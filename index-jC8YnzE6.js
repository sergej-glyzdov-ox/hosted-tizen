function Fne(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))d(m);new MutationObserver(m=>{for(const I of m)if(I.type==="childList")for(const N of I.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&d(N)}).observe(document,{childList:!0,subtree:!0});function l(m){const I={};return m.integrity&&(I.integrity=m.integrity),m.referrerPolicy&&(I.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?I.credentials="include":m.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function d(m){if(m.ep)return;m.ep=!0;const I=l(m);fetch(m.href,I)}})();var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function BC(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var MF={exports:{}},tE={},xT={exports:{}},qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pP;function u9(){if(pP)return qr;pP=1;var o=Symbol.for("react.element"),i=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),N=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),U=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.iterator;function y(Ce){return Ce===null||typeof Ce!="object"?null:(Ce=E&&Ce[E]||Ce["@@iterator"],typeof Ce=="function"?Ce:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,T={};function F(Ce,He,vt){this.props=Ce,this.context=He,this.refs=T,this.updater=vt||P}F.prototype.isReactComponent={},F.prototype.setState=function(Ce,He){if(typeof Ce!="object"&&typeof Ce!="function"&&Ce!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ce,He,"setState")},F.prototype.forceUpdate=function(Ce){this.updater.enqueueForceUpdate(this,Ce,"forceUpdate")};function M(){}M.prototype=F.prototype;function _(Ce,He,vt){this.props=Ce,this.context=He,this.refs=T,this.updater=vt||P}var A=_.prototype=new M;A.constructor=_,g(A,F.prototype),A.isPureReactComponent=!0;var b=Array.isArray,Z=Object.prototype.hasOwnProperty,Y={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function Q(Ce,He,vt){var Re,Ye={},ot=null,Ht=null;if(He!=null)for(Re in He.ref!==void 0&&(Ht=He.ref),He.key!==void 0&&(ot=""+He.key),He)Z.call(He,Re)&&!$.hasOwnProperty(Re)&&(Ye[Re]=He[Re]);var Bt=arguments.length-2;if(Bt===1)Ye.children=vt;else if(1<Bt){for(var Et=Array(Bt),Dt=0;Dt<Bt;Dt++)Et[Dt]=arguments[Dt+2];Ye.children=Et}if(Ce&&Ce.defaultProps)for(Re in Bt=Ce.defaultProps,Bt)Ye[Re]===void 0&&(Ye[Re]=Bt[Re]);return{$$typeof:o,type:Ce,key:ot,ref:Ht,props:Ye,_owner:Y.current}}function se(Ce,He){return{$$typeof:o,type:Ce.type,key:He,ref:Ce.ref,props:Ce.props,_owner:Ce._owner}}function C(Ce){return typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===o}function X(Ce){var He={"=":"=0",":":"=2"};return"$"+Ce.replace(/[=:]/g,function(vt){return He[vt]})}var ce=/\/+/g;function oe(Ce,He){return typeof Ce=="object"&&Ce!==null&&Ce.key!=null?X(""+Ce.key):He.toString(36)}function me(Ce,He,vt,Re,Ye){var ot=typeof Ce;(ot==="undefined"||ot==="boolean")&&(Ce=null);var Ht=!1;if(Ce===null)Ht=!0;else switch(ot){case"string":case"number":Ht=!0;break;case"object":switch(Ce.$$typeof){case o:case i:Ht=!0}}if(Ht)return Ht=Ce,Ye=Ye(Ht),Ce=Re===""?"."+oe(Ht,0):Re,b(Ye)?(vt="",Ce!=null&&(vt=Ce.replace(ce,"$&/")+"/"),me(Ye,He,vt,"",function(Dt){return Dt})):Ye!=null&&(C(Ye)&&(Ye=se(Ye,vt+(!Ye.key||Ht&&Ht.key===Ye.key?"":(""+Ye.key).replace(ce,"$&/")+"/")+Ce)),He.push(Ye)),1;if(Ht=0,Re=Re===""?".":Re+":",b(Ce))for(var Bt=0;Bt<Ce.length;Bt++){ot=Ce[Bt];var Et=Re+oe(ot,Bt);Ht+=me(ot,He,vt,Et,Ye)}else if(Et=y(Ce),typeof Et=="function")for(Ce=Et.call(Ce),Bt=0;!(ot=Ce.next()).done;)ot=ot.value,Et=Re+oe(ot,Bt++),Ht+=me(ot,He,vt,Et,Ye);else if(ot==="object")throw He=String(Ce),Error("Objects are not valid as a React child (found: "+(He==="[object Object]"?"object with keys {"+Object.keys(Ce).join(", ")+"}":He)+"). If you meant to render a collection of children, use an array instead.");return Ht}function be(Ce,He,vt){if(Ce==null)return Ce;var Re=[],Ye=0;return me(Ce,Re,"","",function(ot){return He.call(vt,ot,Ye++)}),Re}function Je(Ce){if(Ce._status===-1){var He=Ce._result;He=He(),He.then(function(vt){(Ce._status===0||Ce._status===-1)&&(Ce._status=1,Ce._result=vt)},function(vt){(Ce._status===0||Ce._status===-1)&&(Ce._status=2,Ce._result=vt)}),Ce._status===-1&&(Ce._status=0,Ce._result=He)}if(Ce._status===1)return Ce._result.default;throw Ce._result}var we={current:null},qe={transition:null},st={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:qe,ReactCurrentOwner:Y};function ft(){throw Error("act(...) is not supported in production builds of React.")}return qr.Children={map:be,forEach:function(Ce,He,vt){be(Ce,function(){He.apply(this,arguments)},vt)},count:function(Ce){var He=0;return be(Ce,function(){He++}),He},toArray:function(Ce){return be(Ce,function(He){return He})||[]},only:function(Ce){if(!C(Ce))throw Error("React.Children.only expected to receive a single React element child.");return Ce}},qr.Component=F,qr.Fragment=l,qr.Profiler=m,qr.PureComponent=_,qr.StrictMode=d,qr.Suspense=w,qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=st,qr.act=ft,qr.cloneElement=function(Ce,He,vt){if(Ce==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ce+".");var Re=g({},Ce.props),Ye=Ce.key,ot=Ce.ref,Ht=Ce._owner;if(He!=null){if(He.ref!==void 0&&(ot=He.ref,Ht=Y.current),He.key!==void 0&&(Ye=""+He.key),Ce.type&&Ce.type.defaultProps)var Bt=Ce.type.defaultProps;for(Et in He)Z.call(He,Et)&&!$.hasOwnProperty(Et)&&(Re[Et]=He[Et]===void 0&&Bt!==void 0?Bt[Et]:He[Et])}var Et=arguments.length-2;if(Et===1)Re.children=vt;else if(1<Et){Bt=Array(Et);for(var Dt=0;Dt<Et;Dt++)Bt[Dt]=arguments[Dt+2];Re.children=Bt}return{$$typeof:o,type:Ce.type,key:Ye,ref:ot,props:Re,_owner:Ht}},qr.createContext=function(Ce){return Ce={$$typeof:N,_currentValue:Ce,_currentValue2:Ce,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ce.Provider={$$typeof:I,_context:Ce},Ce.Consumer=Ce},qr.createElement=Q,qr.createFactory=function(Ce){var He=Q.bind(null,Ce);return He.type=Ce,He},qr.createRef=function(){return{current:null}},qr.forwardRef=function(Ce){return{$$typeof:p,render:Ce}},qr.isValidElement=C,qr.lazy=function(Ce){return{$$typeof:x,_payload:{_status:-1,_result:Ce},_init:Je}},qr.memo=function(Ce,He){return{$$typeof:U,type:Ce,compare:He===void 0?null:He}},qr.startTransition=function(Ce){var He=qe.transition;qe.transition={};try{Ce()}finally{qe.transition=He}},qr.unstable_act=ft,qr.useCallback=function(Ce,He){return we.current.useCallback(Ce,He)},qr.useContext=function(Ce){return we.current.useContext(Ce)},qr.useDebugValue=function(){},qr.useDeferredValue=function(Ce){return we.current.useDeferredValue(Ce)},qr.useEffect=function(Ce,He){return we.current.useEffect(Ce,He)},qr.useId=function(){return we.current.useId()},qr.useImperativeHandle=function(Ce,He,vt){return we.current.useImperativeHandle(Ce,He,vt)},qr.useInsertionEffect=function(Ce,He){return we.current.useInsertionEffect(Ce,He)},qr.useLayoutEffect=function(Ce,He){return we.current.useLayoutEffect(Ce,He)},qr.useMemo=function(Ce,He){return we.current.useMemo(Ce,He)},qr.useReducer=function(Ce,He,vt){return we.current.useReducer(Ce,He,vt)},qr.useRef=function(Ce){return we.current.useRef(Ce)},qr.useState=function(Ce){return we.current.useState(Ce)},qr.useSyncExternalStore=function(Ce,He,vt){return we.current.useSyncExternalStore(Ce,He,vt)},qr.useTransition=function(){return we.current.useTransition()},qr.version="18.3.1",qr}var gP;function nE(){return gP||(gP=1,xT.exports=u9()),xT.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l9=nE(),c9=Symbol.for("react.element"),f9=Symbol.for("react.fragment"),d9=Object.prototype.hasOwnProperty,h9=l9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p9={key:!0,ref:!0,__self:!0,__source:!0};function DF(o,i,l){var d,m={},I=null,N=null;l!==void 0&&(I=""+l),i.key!==void 0&&(I=""+i.key),i.ref!==void 0&&(N=i.ref);for(d in i)d9.call(i,d)&&!p9.hasOwnProperty(d)&&(m[d]=i[d]);if(o&&o.defaultProps)for(d in i=o.defaultProps,i)m[d]===void 0&&(m[d]=i[d]);return{$$typeof:c9,type:o,key:I,ref:N,props:m,_owner:h9.current}}tE.Fragment=f9;tE.jsx=DF;tE.jsxs=DF;MF.exports=tE;var Rt=MF.exports,NI={},PF={exports:{}},ps={},OF={exports:{}},LF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function i(qe,st){var ft=qe.length;qe.push(st);e:for(;0<ft;){var Ce=ft-1>>>1,He=qe[Ce];if(0<m(He,st))qe[Ce]=st,qe[ft]=He,ft=Ce;else break e}}function l(qe){return qe.length===0?null:qe[0]}function d(qe){if(qe.length===0)return null;var st=qe[0],ft=qe.pop();if(ft!==st){qe[0]=ft;e:for(var Ce=0,He=qe.length,vt=He>>>1;Ce<vt;){var Re=2*(Ce+1)-1,Ye=qe[Re],ot=Re+1,Ht=qe[ot];if(0>m(Ye,ft))ot<He&&0>m(Ht,Ye)?(qe[Ce]=Ht,qe[ot]=ft,Ce=ot):(qe[Ce]=Ye,qe[Re]=ft,Ce=Re);else if(ot<He&&0>m(Ht,ft))qe[Ce]=Ht,qe[ot]=ft,Ce=ot;else break e}}return st}function m(qe,st){var ft=qe.sortIndex-st.sortIndex;return ft!==0?ft:qe.id-st.id}if(typeof performance=="object"&&typeof performance.now=="function"){var I=performance;o.unstable_now=function(){return I.now()}}else{var N=Date,p=N.now();o.unstable_now=function(){return N.now()-p}}var w=[],U=[],x=1,E=null,y=3,P=!1,g=!1,T=!1,F=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(qe){for(var st=l(U);st!==null;){if(st.callback===null)d(U);else if(st.startTime<=qe)d(U),st.sortIndex=st.expirationTime,i(w,st);else break;st=l(U)}}function b(qe){if(T=!1,A(qe),!g)if(l(w)!==null)g=!0,Je(Z);else{var st=l(U);st!==null&&we(b,st.startTime-qe)}}function Z(qe,st){g=!1,T&&(T=!1,M(Q),Q=-1),P=!0;var ft=y;try{for(A(st),E=l(w);E!==null&&(!(E.expirationTime>st)||qe&&!X());){var Ce=E.callback;if(typeof Ce=="function"){E.callback=null,y=E.priorityLevel;var He=Ce(E.expirationTime<=st);st=o.unstable_now(),typeof He=="function"?E.callback=He:E===l(w)&&d(w),A(st)}else d(w);E=l(w)}if(E!==null)var vt=!0;else{var Re=l(U);Re!==null&&we(b,Re.startTime-st),vt=!1}return vt}finally{E=null,y=ft,P=!1}}var Y=!1,$=null,Q=-1,se=5,C=-1;function X(){return!(o.unstable_now()-C<se)}function ce(){if($!==null){var qe=o.unstable_now();C=qe;var st=!0;try{st=$(!0,qe)}finally{st?oe():(Y=!1,$=null)}}else Y=!1}var oe;if(typeof _=="function")oe=function(){_(ce)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,be=me.port2;me.port1.onmessage=ce,oe=function(){be.postMessage(null)}}else oe=function(){F(ce,0)};function Je(qe){$=qe,Y||(Y=!0,oe())}function we(qe,st){Q=F(function(){qe(o.unstable_now())},st)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(qe){qe.callback=null},o.unstable_continueExecution=function(){g||P||(g=!0,Je(Z))},o.unstable_forceFrameRate=function(qe){0>qe||125<qe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<qe?Math.floor(1e3/qe):5},o.unstable_getCurrentPriorityLevel=function(){return y},o.unstable_getFirstCallbackNode=function(){return l(w)},o.unstable_next=function(qe){switch(y){case 1:case 2:case 3:var st=3;break;default:st=y}var ft=y;y=st;try{return qe()}finally{y=ft}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(qe,st){switch(qe){case 1:case 2:case 3:case 4:case 5:break;default:qe=3}var ft=y;y=qe;try{return st()}finally{y=ft}},o.unstable_scheduleCallback=function(qe,st,ft){var Ce=o.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?Ce+ft:Ce):ft=Ce,qe){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=ft+He,qe={id:x++,callback:st,priorityLevel:qe,startTime:ft,expirationTime:He,sortIndex:-1},ft>Ce?(qe.sortIndex=ft,i(U,qe),l(w)===null&&qe===l(U)&&(T?(M(Q),Q=-1):T=!0,we(b,ft-Ce))):(qe.sortIndex=He,i(w,qe),g||P||(g=!0,Je(Z))),qe},o.unstable_shouldYield=X,o.unstable_wrapCallback=function(qe){var st=y;return function(){var ft=y;y=st;try{return qe.apply(this,arguments)}finally{y=ft}}}})(LF);OF.exports=LF;var g9=OF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m9=nE(),hs=g9;function Hn(o){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+o,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+o+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kF=new Set,Ng={};function uf(o,i){lh(o,i),lh(o+"Capture",i)}function lh(o,i){for(Ng[o]=i,o=0;o<i.length;o++)kF.add(i[o])}var Sl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),MI=Object.prototype.hasOwnProperty,v9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mP={},vP={};function y9(o){return MI.call(vP,o)?!0:MI.call(mP,o)?!1:v9.test(o)?vP[o]=!0:(mP[o]=!0,!1)}function E9(o,i,l,d){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function _9(o,i,l,d){if(i===null||typeof i>"u"||E9(o,i,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function Ea(o,i,l,d,m,I,N){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=o,this.type=i,this.sanitizeURL=I,this.removeEmptyString=N}var zo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){zo[o]=new Ea(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var i=o[0];zo[i]=new Ea(i,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){zo[o]=new Ea(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){zo[o]=new Ea(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){zo[o]=new Ea(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){zo[o]=new Ea(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){zo[o]=new Ea(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){zo[o]=new Ea(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){zo[o]=new Ea(o,5,!1,o.toLowerCase(),null,!1,!1)});var jC=/[\-:]([a-z])/g;function ZC(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var i=o.replace(jC,ZC);zo[i]=new Ea(i,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var i=o.replace(jC,ZC);zo[i]=new Ea(i,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var i=o.replace(jC,ZC);zo[i]=new Ea(i,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){zo[o]=new Ea(o,1,!1,o.toLowerCase(),null,!1,!1)});zo.xlinkHref=new Ea("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){zo[o]=new Ea(o,1,!1,o.toLowerCase(),null,!0,!0)});function qC(o,i,l,d){var m=zo.hasOwnProperty(i)?zo[i]:null;(m!==null?m.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(_9(i,l,m,d)&&(l=null),d||m===null?y9(i)&&(l===null?o.removeAttribute(i):o.setAttribute(i,""+l)):m.mustUseProperty?o[m.propertyName]=l===null?m.type===3?!1:"":l:(i=m.attributeName,d=m.attributeNamespace,l===null?o.removeAttribute(i):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,d?o.setAttributeNS(d,i,l):o.setAttribute(i,l))))}var Cl=m9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zy=Symbol.for("react.element"),Zd=Symbol.for("react.portal"),qd=Symbol.for("react.fragment"),GC=Symbol.for("react.strict_mode"),DI=Symbol.for("react.profiler"),FF=Symbol.for("react.provider"),UF=Symbol.for("react.context"),HC=Symbol.for("react.forward_ref"),PI=Symbol.for("react.suspense"),OI=Symbol.for("react.suspense_list"),VC=Symbol.for("react.memo"),Xl=Symbol.for("react.lazy"),BF=Symbol.for("react.offscreen"),yP=Symbol.iterator;function eg(o){return o===null||typeof o!="object"?null:(o=yP&&o[yP]||o["@@iterator"],typeof o=="function"?o:null)}var to=Object.assign,NT;function hg(o){if(NT===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);NT=i&&i[1]||""}return"\n"+NT+o}var MT=!1;function DT(o,i){if(!o||MT)return"";MT=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(U){var d=U}Reflect.construct(o,[],i)}else{try{i.call()}catch(U){d=U}o.call(i.prototype)}else{try{throw Error()}catch(U){d=U}o()}}catch(U){if(U&&d&&typeof U.stack=="string"){for(var m=U.stack.split("\n"),I=d.stack.split("\n"),N=m.length-1,p=I.length-1;1<=N&&0<=p&&m[N]!==I[p];)p--;for(;1<=N&&0<=p;N--,p--)if(m[N]!==I[p]){if(N!==1||p!==1)do if(N--,p--,0>p||m[N]!==I[p]){var w="\n"+m[N].replace(" at new "," at ");return o.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",o.displayName)),w}while(1<=N&&0<=p);break}}}finally{MT=!1,Error.prepareStackTrace=l}return(o=o?o.displayName||o.name:"")?hg(o):""}function T9(o){switch(o.tag){case 5:return hg(o.type);case 16:return hg("Lazy");case 13:return hg("Suspense");case 19:return hg("SuspenseList");case 0:case 2:case 15:return o=DT(o.type,!1),o;case 11:return o=DT(o.type.render,!1),o;case 1:return o=DT(o.type,!0),o;default:return""}}function LI(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case qd:return"Fragment";case Zd:return"Portal";case DI:return"Profiler";case GC:return"StrictMode";case PI:return"Suspense";case OI:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case UF:return(o.displayName||"Context")+".Consumer";case FF:return(o._context.displayName||"Context")+".Provider";case HC:var i=o.render;return o=o.displayName,o||(o=i.displayName||i.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case VC:return i=o.displayName||null,i!==null?i:LI(o.type)||"Memo";case Xl:i=o._payload,o=o._init;try{return LI(o(i))}catch(l){}}return null}function S9(o){var i=o.type;switch(o.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=i.render,o=o.displayName||o.name||"",i.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return LI(i);case 8:return i===GC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function fc(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function jF(o){var i=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function w9(o){var i=jF(o)?"checked":"value",l=Object.getOwnPropertyDescriptor(o.constructor.prototype,i),d=""+o[i];if(!o.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,I=l.set;return Object.defineProperty(o,i,{configurable:!0,get:function(){return m.call(this)},set:function(N){d=""+N,I.call(this,N)}}),Object.defineProperty(o,i,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(N){d=""+N},stopTracking:function(){o._valueTracker=null,delete o[i]}}}}function qy(o){o._valueTracker||(o._valueTracker=w9(o))}function ZF(o){if(!o)return!1;var i=o._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return o&&(d=jF(o)?o.checked?"true":"false":o.value),o=d,o!==l?(i.setValue(o),!0):!1}function A0(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch(i){return o.body}}function kI(o,i){var l=i.checked;return to({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l!=null?l:o._wrapperState.initialChecked})}function EP(o,i){var l=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;l=fc(i.value!=null?i.value:l),o._wrapperState={initialChecked:d,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function qF(o,i){i=i.checked,i!=null&&qC(o,"checked",i,!1)}function FI(o,i){qF(o,i);var l=fc(i.value),d=i.type;if(l!=null)d==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+l):o.value!==""+l&&(o.value=""+l);else if(d==="submit"||d==="reset"){o.removeAttribute("value");return}i.hasOwnProperty("value")?UI(o,i.type,l):i.hasOwnProperty("defaultValue")&&UI(o,i.type,fc(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(o.defaultChecked=!!i.defaultChecked)}function _P(o,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+o._wrapperState.initialValue,l||i===o.value||(o.value=i),o.defaultValue=i}l=o.name,l!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,l!==""&&(o.name=l)}function UI(o,i,l){(i!=="number"||A0(o.ownerDocument)!==o)&&(l==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+l&&(o.defaultValue=""+l))}var pg=Array.isArray;function nh(o,i,l,d){if(o=o.options,i){i={};for(var m=0;m<l.length;m++)i["$"+l[m]]=!0;for(l=0;l<o.length;l++)m=i.hasOwnProperty("$"+o[l].value),o[l].selected!==m&&(o[l].selected=m),m&&d&&(o[l].defaultSelected=!0)}else{for(l=""+fc(l),i=null,m=0;m<o.length;m++){if(o[m].value===l){o[m].selected=!0,d&&(o[m].defaultSelected=!0);return}i!==null||o[m].disabled||(i=o[m])}i!==null&&(i.selected=!0)}}function BI(o,i){if(i.dangerouslySetInnerHTML!=null)throw Error(Hn(91));return to({},i,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function TP(o,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(Hn(92));if(pg(l)){if(1<l.length)throw Error(Hn(93));l=l[0]}i=l}i==null&&(i=""),l=i}o._wrapperState={initialValue:fc(l)}}function GF(o,i){var l=fc(i.value),d=fc(i.defaultValue);l!=null&&(l=""+l,l!==o.value&&(o.value=l),i.defaultValue==null&&o.defaultValue!==l&&(o.defaultValue=l)),d!=null&&(o.defaultValue=""+d)}function SP(o){var i=o.textContent;i===o._wrapperState.initialValue&&i!==""&&i!==null&&(o.value=i)}function HF(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jI(o,i){return o==null||o==="http://www.w3.org/1999/xhtml"?HF(i):o==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Gy,VF=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,d,m){MSApp.execUnsafeLocalFunction(function(){return o(i,l,d,m)})}:o}(function(o,i){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=i;else{for(Gy=Gy||document.createElement("div"),Gy.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Gy.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;i.firstChild;)o.appendChild(i.firstChild)}});function Mg(o,i){if(i){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=i;return}}o.textContent=i}var _g={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A9=["Webkit","ms","Moz","O"];Object.keys(_g).forEach(function(o){A9.forEach(function(i){i=i+o.charAt(0).toUpperCase()+o.substring(1),_g[i]=_g[o]})});function KF(o,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||_g.hasOwnProperty(o)&&_g[o]?(""+i).trim():i+"px"}function zF(o,i){o=o.style;for(var l in i)if(i.hasOwnProperty(l)){var d=l.indexOf("--")===0,m=KF(l,i[l],d);l==="float"&&(l="cssFloat"),d?o.setProperty(l,m):o[l]=m}}var I9=to({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ZI(o,i){if(i){if(I9[o]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(Hn(137,o));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(Hn(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(Hn(61))}if(i.style!=null&&typeof i.style!="object")throw Error(Hn(62))}}function qI(o,i){if(o.indexOf("-")===-1)return typeof i.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var GI=null;function KC(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var HI=null,rh=null,ih=null;function wP(o){if(o=em(o)){if(typeof HI!="function")throw Error(Hn(280));var i=o.stateNode;i&&(i=sE(i),HI(o.stateNode,o.type,i))}}function YF(o){rh?ih?ih.push(o):ih=[o]:rh=o}function WF(){if(rh){var o=rh,i=ih;if(ih=rh=null,wP(o),i)for(o=0;o<i.length;o++)wP(i[o])}}function $F(o,i){return o(i)}function XF(){}var PT=!1;function QF(o,i,l){if(PT)return o(i,l);PT=!0;try{return $F(o,i,l)}finally{PT=!1,(rh!==null||ih!==null)&&(XF(),WF())}}function Dg(o,i){var l=o.stateNode;if(l===null)return null;var d=sE(l);if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(Hn(231,i,typeof l));return l}var VI=!1;if(Sl)try{var tg={};Object.defineProperty(tg,"passive",{get:function(){VI=!0}}),window.addEventListener("test",tg,tg),window.removeEventListener("test",tg,tg)}catch(o){VI=!1}function C9(o,i,l,d,m,I,N,p,w){var U=Array.prototype.slice.call(arguments,3);try{i.apply(l,U)}catch(x){this.onError(x)}}var Tg=!1,I0=null,C0=!1,KI=null,b9={onError:function(o){Tg=!0,I0=o}};function R9(o,i,l,d,m,I,N,p,w){Tg=!1,I0=null,C9.apply(b9,arguments)}function x9(o,i,l,d,m,I,N,p,w){if(R9.apply(this,arguments),Tg){if(Tg){var U=I0;Tg=!1,I0=null}else throw Error(Hn(198));C0||(C0=!0,KI=U)}}function lf(o){var i=o,l=o;if(o.alternate)for(;i.return;)i=i.return;else{o=i;do i=o,i.flags&4098&&(l=i.return),o=i.return;while(o)}return i.tag===3?l:null}function JF(o){if(o.tag===13){var i=o.memoizedState;if(i===null&&(o=o.alternate,o!==null&&(i=o.memoizedState)),i!==null)return i.dehydrated}return null}function AP(o){if(lf(o)!==o)throw Error(Hn(188))}function N9(o){var i=o.alternate;if(!i){if(i=lf(o),i===null)throw Error(Hn(188));return i!==o?null:o}for(var l=o,d=i;;){var m=l.return;if(m===null)break;var I=m.alternate;if(I===null){if(d=m.return,d!==null){l=d;continue}break}if(m.child===I.child){for(I=m.child;I;){if(I===l)return AP(m),o;if(I===d)return AP(m),i;I=I.sibling}throw Error(Hn(188))}if(l.return!==d.return)l=m,d=I;else{for(var N=!1,p=m.child;p;){if(p===l){N=!0,l=m,d=I;break}if(p===d){N=!0,d=m,l=I;break}p=p.sibling}if(!N){for(p=I.child;p;){if(p===l){N=!0,l=I,d=m;break}if(p===d){N=!0,d=I,l=m;break}p=p.sibling}if(!N)throw Error(Hn(189))}}if(l.alternate!==d)throw Error(Hn(190))}if(l.tag!==3)throw Error(Hn(188));return l.stateNode.current===l?o:i}function e4(o){return o=N9(o),o!==null?t4(o):null}function t4(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var i=t4(o);if(i!==null)return i;o=o.sibling}return null}var n4=hs.unstable_scheduleCallback,IP=hs.unstable_cancelCallback,M9=hs.unstable_shouldYield,D9=hs.unstable_requestPaint,vo=hs.unstable_now,P9=hs.unstable_getCurrentPriorityLevel,zC=hs.unstable_ImmediatePriority,r4=hs.unstable_UserBlockingPriority,b0=hs.unstable_NormalPriority,O9=hs.unstable_LowPriority,i4=hs.unstable_IdlePriority,rE=null,Fu=null;function L9(o){if(Fu&&typeof Fu.onCommitFiberRoot=="function")try{Fu.onCommitFiberRoot(rE,o,void 0,(o.current.flags&128)===128)}catch(i){}}var hu=Math.clz32?Math.clz32:U9,k9=Math.log,F9=Math.LN2;function U9(o){return o>>>=0,o===0?32:31-(k9(o)/F9|0)|0}var Hy=64,Vy=4194304;function gg(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function R0(o,i){var l=o.pendingLanes;if(l===0)return 0;var d=0,m=o.suspendedLanes,I=o.pingedLanes,N=l&268435455;if(N!==0){var p=N&~m;p!==0?d=gg(p):(I&=N,I!==0&&(d=gg(I)))}else N=l&~m,N!==0?d=gg(N):I!==0&&(d=gg(I));if(d===0)return 0;if(i!==0&&i!==d&&!(i&m)&&(m=d&-d,I=i&-i,m>=I||m===16&&(I&4194240)!==0))return i;if(d&4&&(d|=l&16),i=o.entangledLanes,i!==0)for(o=o.entanglements,i&=d;0<i;)l=31-hu(i),m=1<<l,d|=o[l],i&=~m;return d}function B9(o,i){switch(o){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j9(o,i){for(var l=o.suspendedLanes,d=o.pingedLanes,m=o.expirationTimes,I=o.pendingLanes;0<I;){var N=31-hu(I),p=1<<N,w=m[N];w===-1?(!(p&l)||p&d)&&(m[N]=B9(p,i)):w<=i&&(o.expiredLanes|=p),I&=~p}}function zI(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function o4(){var o=Hy;return Hy<<=1,!(Hy&4194240)&&(Hy=64),o}function OT(o){for(var i=[],l=0;31>l;l++)i.push(o);return i}function Qg(o,i,l){o.pendingLanes|=i,i!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,i=31-hu(i),o[i]=l}function Z9(o,i){var l=o.pendingLanes&~i;o.pendingLanes=i,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=i,o.mutableReadLanes&=i,o.entangledLanes&=i,i=o.entanglements;var d=o.eventTimes;for(o=o.expirationTimes;0<l;){var m=31-hu(l),I=1<<m;i[m]=0,d[m]=-1,o[m]=-1,l&=~I}}function YC(o,i){var l=o.entangledLanes|=i;for(o=o.entanglements;l;){var d=31-hu(l),m=1<<d;m&i|o[d]&i&&(o[d]|=i),l&=~m}}var wi=0;function a4(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var s4,WC,u4,l4,c4,YI=!1,Ky=[],rc=null,ic=null,oc=null,Pg=new Map,Og=new Map,Jl=[],q9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function CP(o,i){switch(o){case"focusin":case"focusout":rc=null;break;case"dragenter":case"dragleave":ic=null;break;case"mouseover":case"mouseout":oc=null;break;case"pointerover":case"pointerout":Pg.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Og.delete(i.pointerId)}}function ng(o,i,l,d,m,I){return o===null||o.nativeEvent!==I?(o={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:I,targetContainers:[m]},i!==null&&(i=em(i),i!==null&&WC(i)),o):(o.eventSystemFlags|=d,i=o.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),o)}function G9(o,i,l,d,m){switch(i){case"focusin":return rc=ng(rc,o,i,l,d,m),!0;case"dragenter":return ic=ng(ic,o,i,l,d,m),!0;case"mouseover":return oc=ng(oc,o,i,l,d,m),!0;case"pointerover":var I=m.pointerId;return Pg.set(I,ng(Pg.get(I)||null,o,i,l,d,m)),!0;case"gotpointercapture":return I=m.pointerId,Og.set(I,ng(Og.get(I)||null,o,i,l,d,m)),!0}return!1}function f4(o){var i=Kc(o.target);if(i!==null){var l=lf(i);if(l!==null){if(i=l.tag,i===13){if(i=JF(l),i!==null){o.blockedOn=i,c4(o.priority,function(){u4(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function f0(o){if(o.blockedOn!==null)return!1;for(var i=o.targetContainers;0<i.length;){var l=WI(o.domEventName,o.eventSystemFlags,i[0],o.nativeEvent);if(l===null){l=o.nativeEvent;var d=new l.constructor(l.type,l);GI=d,l.target.dispatchEvent(d),GI=null}else return i=em(l),i!==null&&WC(i),o.blockedOn=l,!1;i.shift()}return!0}function bP(o,i,l){f0(o)&&l.delete(i)}function H9(){YI=!1,rc!==null&&f0(rc)&&(rc=null),ic!==null&&f0(ic)&&(ic=null),oc!==null&&f0(oc)&&(oc=null),Pg.forEach(bP),Og.forEach(bP)}function rg(o,i){o.blockedOn===i&&(o.blockedOn=null,YI||(YI=!0,hs.unstable_scheduleCallback(hs.unstable_NormalPriority,H9)))}function Lg(o){function i(m){return rg(m,o)}if(0<Ky.length){rg(Ky[0],o);for(var l=1;l<Ky.length;l++){var d=Ky[l];d.blockedOn===o&&(d.blockedOn=null)}}for(rc!==null&&rg(rc,o),ic!==null&&rg(ic,o),oc!==null&&rg(oc,o),Pg.forEach(i),Og.forEach(i),l=0;l<Jl.length;l++)d=Jl[l],d.blockedOn===o&&(d.blockedOn=null);for(;0<Jl.length&&(l=Jl[0],l.blockedOn===null);)f4(l),l.blockedOn===null&&Jl.shift()}var oh=Cl.ReactCurrentBatchConfig,x0=!0;function V9(o,i,l,d){var m=wi,I=oh.transition;oh.transition=null;try{wi=1,$C(o,i,l,d)}finally{wi=m,oh.transition=I}}function K9(o,i,l,d){var m=wi,I=oh.transition;oh.transition=null;try{wi=4,$C(o,i,l,d)}finally{wi=m,oh.transition=I}}function $C(o,i,l,d){if(x0){var m=WI(o,i,l,d);if(m===null)HT(o,i,d,N0,l),CP(o,d);else if(G9(m,o,i,l,d))d.stopPropagation();else if(CP(o,d),i&4&&-1<q9.indexOf(o)){for(;m!==null;){var I=em(m);if(I!==null&&s4(I),I=WI(o,i,l,d),I===null&&HT(o,i,d,N0,l),I===m)break;m=I}m!==null&&d.stopPropagation()}else HT(o,i,d,null,l)}}var N0=null;function WI(o,i,l,d){if(N0=null,o=KC(d),o=Kc(o),o!==null)if(i=lf(o),i===null)o=null;else if(l=i.tag,l===13){if(o=JF(i),o!==null)return o;o=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null);return N0=o,null}function d4(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P9()){case zC:return 1;case r4:return 4;case b0:case O9:return 16;case i4:return 536870912;default:return 16}default:return 16}}var tc=null,XC=null,d0=null;function h4(){if(d0)return d0;var o,i=XC,l=i.length,d,m="value"in tc?tc.value:tc.textContent,I=m.length;for(o=0;o<l&&i[o]===m[o];o++);var N=l-o;for(d=1;d<=N&&i[l-d]===m[I-d];d++);return d0=m.slice(o,1<d?1-d:void 0)}function h0(o){var i=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&i===13&&(o=13)):o=i,o===10&&(o=13),32<=o||o===13?o:0}function zy(){return!0}function RP(){return!1}function gs(o){function i(l,d,m,I,N){this._reactName=l,this._targetInst=m,this.type=d,this.nativeEvent=I,this.target=N,this.currentTarget=null;for(var p in o)o.hasOwnProperty(p)&&(l=o[p],this[p]=l?l(I):I[p]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?zy:RP,this.isPropagationStopped=RP,this}return to(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=zy)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=zy)},persist:function(){},isPersistent:zy}),i}var yh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},QC=gs(yh),Jg=to({},yh,{view:0,detail:0}),z9=gs(Jg),LT,kT,ig,iE=to({},Jg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:JC,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ig&&(ig&&o.type==="mousemove"?(LT=o.screenX-ig.screenX,kT=o.screenY-ig.screenY):kT=LT=0,ig=o),LT)},movementY:function(o){return"movementY"in o?o.movementY:kT}}),xP=gs(iE),Y9=to({},iE,{dataTransfer:0}),W9=gs(Y9),$9=to({},Jg,{relatedTarget:0}),FT=gs($9),X9=to({},yh,{animationName:0,elapsedTime:0,pseudoElement:0}),Q9=gs(X9),J9=to({},yh,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),eH=gs(J9),tH=to({},yh,{data:0}),NP=gs(tH),nH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oH(o){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(o):(o=iH[o])?!!i[o]:!1}function JC(){return oH}var aH=to({},Jg,{key:function(o){if(o.key){var i=nH[o.key]||o.key;if(i!=="Unidentified")return i}return o.type==="keypress"?(o=h0(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?rH[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:JC,charCode:function(o){return o.type==="keypress"?h0(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?h0(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),sH=gs(aH),uH=to({},iE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MP=gs(uH),lH=to({},Jg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:JC}),cH=gs(lH),fH=to({},yh,{propertyName:0,elapsedTime:0,pseudoElement:0}),dH=gs(fH),hH=to({},iE,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),pH=gs(hH),gH=[9,13,27,32],eb=Sl&&"CompositionEvent"in window,Sg=null;Sl&&"documentMode"in document&&(Sg=document.documentMode);var mH=Sl&&"TextEvent"in window&&!Sg,p4=Sl&&(!eb||Sg&&8<Sg&&11>=Sg),DP=" ",PP=!1;function g4(o,i){switch(o){case"keyup":return gH.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m4(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Gd=!1;function vH(o,i){switch(o){case"compositionend":return m4(i);case"keypress":return i.which!==32?null:(PP=!0,DP);case"textInput":return o=i.data,o===DP&&PP?null:o;default:return null}}function yH(o,i){if(Gd)return o==="compositionend"||!eb&&g4(o,i)?(o=h4(),d0=XC=tc=null,Gd=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return p4&&i.locale!=="ko"?null:i.data;default:return null}}var EH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OP(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i==="input"?!!EH[o.type]:i==="textarea"}function v4(o,i,l,d){YF(d),i=M0(i,"onChange"),0<i.length&&(l=new QC("onChange","change",null,l,d),o.push({event:l,listeners:i}))}var wg=null,kg=null;function _H(o){R4(o,0)}function oE(o){var i=Kd(o);if(ZF(i))return o}function TH(o,i){if(o==="change")return i}var y4=!1;if(Sl){var UT;if(Sl){var BT="oninput"in document;if(!BT){var LP=document.createElement("div");LP.setAttribute("oninput","return;"),BT=typeof LP.oninput=="function"}UT=BT}else UT=!1;y4=UT&&(!document.documentMode||9<document.documentMode)}function kP(){wg&&(wg.detachEvent("onpropertychange",E4),kg=wg=null)}function E4(o){if(o.propertyName==="value"&&oE(kg)){var i=[];v4(i,kg,o,KC(o)),QF(_H,i)}}function SH(o,i,l){o==="focusin"?(kP(),wg=i,kg=l,wg.attachEvent("onpropertychange",E4)):o==="focusout"&&kP()}function wH(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return oE(kg)}function AH(o,i){if(o==="click")return oE(i)}function IH(o,i){if(o==="input"||o==="change")return oE(i)}function CH(o,i){return o===i&&(o!==0||1/o===1/i)||o!==o&&i!==i}var gu=typeof Object.is=="function"?Object.is:CH;function Fg(o,i){if(gu(o,i))return!0;if(typeof o!="object"||o===null||typeof i!="object"||i===null)return!1;var l=Object.keys(o),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var m=l[d];if(!MI.call(i,m)||!gu(o[m],i[m]))return!1}return!0}function FP(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function UP(o,i){var l=FP(o);o=0;for(var d;l;){if(l.nodeType===3){if(d=o+l.textContent.length,o<=i&&d>=i)return{node:l,offset:i-o};o=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=FP(l)}}function _4(o,i){return o&&i?o===i?!0:o&&o.nodeType===3?!1:i&&i.nodeType===3?_4(o,i.parentNode):"contains"in o?o.contains(i):o.compareDocumentPosition?!!(o.compareDocumentPosition(i)&16):!1:!1}function T4(){for(var o=window,i=A0();i instanceof o.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch(d){l=!1}if(l)o=i.contentWindow;else break;i=A0(o.document)}return i}function tb(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i&&(i==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||i==="textarea"||o.contentEditable==="true")}function bH(o){var i=T4(),l=o.focusedElem,d=o.selectionRange;if(i!==l&&l&&l.ownerDocument&&_4(l.ownerDocument.documentElement,l)){if(d!==null&&tb(l)){if(i=d.start,o=d.end,o===void 0&&(o=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(o,l.value.length);else if(o=(i=l.ownerDocument||document)&&i.defaultView||window,o.getSelection){o=o.getSelection();var m=l.textContent.length,I=Math.min(d.start,m);d=d.end===void 0?I:Math.min(d.end,m),!o.extend&&I>d&&(m=d,d=I,I=m),m=UP(l,I);var N=UP(l,d);m&&N&&(o.rangeCount!==1||o.anchorNode!==m.node||o.anchorOffset!==m.offset||o.focusNode!==N.node||o.focusOffset!==N.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),o.removeAllRanges(),I>d?(o.addRange(i),o.extend(N.node,N.offset)):(i.setEnd(N.node,N.offset),o.addRange(i)))}}for(i=[],o=l;o=o.parentNode;)o.nodeType===1&&i.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)o=i[l],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var RH=Sl&&"documentMode"in document&&11>=document.documentMode,Hd=null,$I=null,Ag=null,XI=!1;function BP(o,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;XI||Hd==null||Hd!==A0(d)||(d=Hd,"selectionStart"in d&&tb(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ag&&Fg(Ag,d)||(Ag=d,d=M0($I,"onSelect"),0<d.length&&(i=new QC("onSelect","select",null,i,l),o.push({event:i,listeners:d}),i.target=Hd)))}function Yy(o,i){var l={};return l[o.toLowerCase()]=i.toLowerCase(),l["Webkit"+o]="webkit"+i,l["Moz"+o]="moz"+i,l}var Vd={animationend:Yy("Animation","AnimationEnd"),animationiteration:Yy("Animation","AnimationIteration"),animationstart:Yy("Animation","AnimationStart"),transitionend:Yy("Transition","TransitionEnd")},jT={},S4={};Sl&&(S4=document.createElement("div").style,"AnimationEvent"in window||(delete Vd.animationend.animation,delete Vd.animationiteration.animation,delete Vd.animationstart.animation),"TransitionEvent"in window||delete Vd.transitionend.transition);function aE(o){if(jT[o])return jT[o];if(!Vd[o])return o;var i=Vd[o],l;for(l in i)if(i.hasOwnProperty(l)&&l in S4)return jT[o]=i[l];return o}var w4=aE("animationend"),A4=aE("animationiteration"),I4=aE("animationstart"),C4=aE("transitionend"),b4=new Map,jP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hc(o,i){b4.set(o,i),uf(i,[o])}for(var ZT=0;ZT<jP.length;ZT++){var qT=jP[ZT],xH=qT.toLowerCase(),NH=qT[0].toUpperCase()+qT.slice(1);hc(xH,"on"+NH)}hc(w4,"onAnimationEnd");hc(A4,"onAnimationIteration");hc(I4,"onAnimationStart");hc("dblclick","onDoubleClick");hc("focusin","onFocus");hc("focusout","onBlur");hc(C4,"onTransitionEnd");lh("onMouseEnter",["mouseout","mouseover"]);lh("onMouseLeave",["mouseout","mouseover"]);lh("onPointerEnter",["pointerout","pointerover"]);lh("onPointerLeave",["pointerout","pointerover"]);uf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uf("onBeforeInput",["compositionend","keypress","textInput","paste"]);uf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MH=new Set("cancel close invalid load scroll toggle".split(" ").concat(mg));function ZP(o,i,l){var d=o.type||"unknown-event";o.currentTarget=l,x9(d,i,void 0,o),o.currentTarget=null}function R4(o,i){i=(i&4)!==0;for(var l=0;l<o.length;l++){var d=o[l],m=d.event;d=d.listeners;e:{var I=void 0;if(i)for(var N=d.length-1;0<=N;N--){var p=d[N],w=p.instance,U=p.currentTarget;if(p=p.listener,w!==I&&m.isPropagationStopped())break e;ZP(m,p,U),I=w}else for(N=0;N<d.length;N++){if(p=d[N],w=p.instance,U=p.currentTarget,p=p.listener,w!==I&&m.isPropagationStopped())break e;ZP(m,p,U),I=w}}}if(C0)throw o=KI,C0=!1,KI=null,o}function Li(o,i){var l=i[nC];l===void 0&&(l=i[nC]=new Set);var d=o+"__bubble";l.has(d)||(x4(i,o,2,!1),l.add(d))}function GT(o,i,l){var d=0;i&&(d|=4),x4(l,o,d,i)}var Wy="_reactListening"+Math.random().toString(36).slice(2);function Ug(o){if(!o[Wy]){o[Wy]=!0,kF.forEach(function(l){l!=="selectionchange"&&(MH.has(l)||GT(l,!1,o),GT(l,!0,o))});var i=o.nodeType===9?o:o.ownerDocument;i===null||i[Wy]||(i[Wy]=!0,GT("selectionchange",!1,i))}}function x4(o,i,l,d){switch(d4(i)){case 1:var m=V9;break;case 4:m=K9;break;default:m=$C}l=m.bind(null,i,l,o),m=void 0,!VI||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),d?m!==void 0?o.addEventListener(i,l,{capture:!0,passive:m}):o.addEventListener(i,l,!0):m!==void 0?o.addEventListener(i,l,{passive:m}):o.addEventListener(i,l,!1)}function HT(o,i,l,d,m){var I=d;if(!(i&1)&&!(i&2)&&d!==null)e:for(;;){if(d===null)return;var N=d.tag;if(N===3||N===4){var p=d.stateNode.containerInfo;if(p===m||p.nodeType===8&&p.parentNode===m)break;if(N===4)for(N=d.return;N!==null;){var w=N.tag;if((w===3||w===4)&&(w=N.stateNode.containerInfo,w===m||w.nodeType===8&&w.parentNode===m))return;N=N.return}for(;p!==null;){if(N=Kc(p),N===null)return;if(w=N.tag,w===5||w===6){d=I=N;continue e}p=p.parentNode}}d=d.return}QF(function(){var U=I,x=KC(l),E=[];e:{var y=b4.get(o);if(y!==void 0){var P=QC,g=o;switch(o){case"keypress":if(h0(l)===0)break e;case"keydown":case"keyup":P=sH;break;case"focusin":g="focus",P=FT;break;case"focusout":g="blur",P=FT;break;case"beforeblur":case"afterblur":P=FT;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=xP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=W9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=cH;break;case w4:case A4:case I4:P=Q9;break;case C4:P=dH;break;case"scroll":P=z9;break;case"wheel":P=pH;break;case"copy":case"cut":case"paste":P=eH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=MP}var T=(i&4)!==0,F=!T&&o==="scroll",M=T?y!==null?y+"Capture":null:y;T=[];for(var _=U,A;_!==null;){A=_;var b=A.stateNode;if(A.tag===5&&b!==null&&(A=b,M!==null&&(b=Dg(_,M),b!=null&&T.push(Bg(_,b,A)))),F)break;_=_.return}0<T.length&&(y=new P(y,g,null,l,x),E.push({event:y,listeners:T}))}}if(!(i&7)){e:{if(y=o==="mouseover"||o==="pointerover",P=o==="mouseout"||o==="pointerout",y&&l!==GI&&(g=l.relatedTarget||l.fromElement)&&(Kc(g)||g[wl]))break e;if((P||y)&&(y=x.window===x?x:(y=x.ownerDocument)?y.defaultView||y.parentWindow:window,P?(g=l.relatedTarget||l.toElement,P=U,g=g?Kc(g):null,g!==null&&(F=lf(g),g!==F||g.tag!==5&&g.tag!==6)&&(g=null)):(P=null,g=U),P!==g)){if(T=xP,b="onMouseLeave",M="onMouseEnter",_="mouse",(o==="pointerout"||o==="pointerover")&&(T=MP,b="onPointerLeave",M="onPointerEnter",_="pointer"),F=P==null?y:Kd(P),A=g==null?y:Kd(g),y=new T(b,_+"leave",P,l,x),y.target=F,y.relatedTarget=A,b=null,Kc(x)===U&&(T=new T(M,_+"enter",g,l,x),T.target=A,T.relatedTarget=F,b=T),F=b,P&&g)t:{for(T=P,M=g,_=0,A=T;A;A=kd(A))_++;for(A=0,b=M;b;b=kd(b))A++;for(;0<_-A;)T=kd(T),_--;for(;0<A-_;)M=kd(M),A--;for(;_--;){if(T===M||M!==null&&T===M.alternate)break t;T=kd(T),M=kd(M)}T=null}else T=null;P!==null&&qP(E,y,P,T,!1),g!==null&&F!==null&&qP(E,F,g,T,!0)}}e:{if(y=U?Kd(U):window,P=y.nodeName&&y.nodeName.toLowerCase(),P==="select"||P==="input"&&y.type==="file")var Z=TH;else if(OP(y))if(y4)Z=IH;else{Z=wH;var Y=SH}else(P=y.nodeName)&&P.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(Z=AH);if(Z&&(Z=Z(o,U))){v4(E,Z,l,x);break e}Y&&Y(o,y,U),o==="focusout"&&(Y=y._wrapperState)&&Y.controlled&&y.type==="number"&&UI(y,"number",y.value)}switch(Y=U?Kd(U):window,o){case"focusin":(OP(Y)||Y.contentEditable==="true")&&(Hd=Y,$I=U,Ag=null);break;case"focusout":Ag=$I=Hd=null;break;case"mousedown":XI=!0;break;case"contextmenu":case"mouseup":case"dragend":XI=!1,BP(E,l,x);break;case"selectionchange":if(RH)break;case"keydown":case"keyup":BP(E,l,x)}var $;if(eb)e:{switch(o){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else Gd?g4(o,l)&&(Q="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(Q="onCompositionStart");Q&&(p4&&l.locale!=="ko"&&(Gd||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&Gd&&($=h4()):(tc=x,XC="value"in tc?tc.value:tc.textContent,Gd=!0)),Y=M0(U,Q),0<Y.length&&(Q=new NP(Q,o,null,l,x),E.push({event:Q,listeners:Y}),$?Q.data=$:($=m4(l),$!==null&&(Q.data=$)))),($=mH?vH(o,l):yH(o,l))&&(U=M0(U,"onBeforeInput"),0<U.length&&(x=new NP("onBeforeInput","beforeinput",null,l,x),E.push({event:x,listeners:U}),x.data=$))}R4(E,i)})}function Bg(o,i,l){return{instance:o,listener:i,currentTarget:l}}function M0(o,i){for(var l=i+"Capture",d=[];o!==null;){var m=o,I=m.stateNode;m.tag===5&&I!==null&&(m=I,I=Dg(o,l),I!=null&&d.unshift(Bg(o,I,m)),I=Dg(o,i),I!=null&&d.push(Bg(o,I,m))),o=o.return}return d}function kd(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function qP(o,i,l,d,m){for(var I=i._reactName,N=[];l!==null&&l!==d;){var p=l,w=p.alternate,U=p.stateNode;if(w!==null&&w===d)break;p.tag===5&&U!==null&&(p=U,m?(w=Dg(l,I),w!=null&&N.unshift(Bg(l,w,p))):m||(w=Dg(l,I),w!=null&&N.push(Bg(l,w,p)))),l=l.return}N.length!==0&&o.push({event:i,listeners:N})}var DH=/\r\n?/g,PH=/\u0000|\uFFFD/g;function GP(o){return(typeof o=="string"?o:""+o).replace(DH,"\n").replace(PH,"")}function $y(o,i,l){if(i=GP(i),GP(o)!==i&&l)throw Error(Hn(425))}function D0(){}var QI=null,JI=null;function eC(o,i){return o==="textarea"||o==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var tC=typeof setTimeout=="function"?setTimeout:void 0,OH=typeof clearTimeout=="function"?clearTimeout:void 0,HP=typeof Promise=="function"?Promise:void 0,LH=typeof queueMicrotask=="function"?queueMicrotask:typeof HP<"u"?function(o){return HP.resolve(null).then(o).catch(kH)}:tC;function kH(o){setTimeout(function(){throw o})}function VT(o,i){var l=i,d=0;do{var m=l.nextSibling;if(o.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(d===0){o.removeChild(m),Lg(i);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=m}while(l);Lg(i)}function ac(o){for(;o!=null;o=o.nextSibling){var i=o.nodeType;if(i===1||i===3)break;if(i===8){if(i=o.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return o}function VP(o){o=o.previousSibling;for(var i=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return o;i--}else l==="/$"&&i++}o=o.previousSibling}return null}var Eh=Math.random().toString(36).slice(2),ku="__reactFiber$"+Eh,jg="__reactProps$"+Eh,wl="__reactContainer$"+Eh,nC="__reactEvents$"+Eh,FH="__reactListeners$"+Eh,UH="__reactHandles$"+Eh;function Kc(o){var i=o[ku];if(i)return i;for(var l=o.parentNode;l;){if(i=l[wl]||l[ku]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(o=VP(o);o!==null;){if(l=o[ku])return l;o=VP(o)}return i}o=l,l=o.parentNode}return null}function em(o){return o=o[ku]||o[wl],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Kd(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(Hn(33))}function sE(o){return o[jg]||null}var rC=[],zd=-1;function pc(o){return{current:o}}function ki(o){0>zd||(o.current=rC[zd],rC[zd]=null,zd--)}function Pi(o,i){zd++,rC[zd]=o.current,o.current=i}var dc={},ia=pc(dc),ja=pc(!1),ef=dc;function ch(o,i){var l=o.type.contextTypes;if(!l)return dc;var d=o.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var m={},I;for(I in l)m[I]=i[I];return d&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=i,o.__reactInternalMemoizedMaskedChildContext=m),m}function Za(o){return o=o.childContextTypes,o!=null}function P0(){ki(ja),ki(ia)}function KP(o,i,l){if(ia.current!==dc)throw Error(Hn(168));Pi(ia,i),Pi(ja,l)}function N4(o,i,l){var d=o.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var m in d)if(!(m in i))throw Error(Hn(108,S9(o)||"Unknown",m));return to({},l,d)}function O0(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||dc,ef=ia.current,Pi(ia,o),Pi(ja,ja.current),!0}function zP(o,i,l){var d=o.stateNode;if(!d)throw Error(Hn(169));l?(o=N4(o,i,ef),d.__reactInternalMemoizedMergedChildContext=o,ki(ja),ki(ia),Pi(ia,o)):ki(ja),Pi(ja,l)}var yl=null,uE=!1,KT=!1;function M4(o){yl===null?yl=[o]:yl.push(o)}function BH(o){uE=!0,M4(o)}function gc(){if(!KT&&yl!==null){KT=!0;var o=0,i=wi;try{var l=yl;for(wi=1;o<l.length;o++){var d=l[o];do d=d(!0);while(d!==null)}yl=null,uE=!1}catch(m){throw yl!==null&&(yl=yl.slice(o+1)),n4(zC,gc),m}finally{wi=i,KT=!1}}return null}var Yd=[],Wd=0,L0=null,k0=0,Ps=[],Os=0,tf=null,El=1,_l="";function qc(o,i){Yd[Wd++]=k0,Yd[Wd++]=L0,L0=o,k0=i}function D4(o,i,l){Ps[Os++]=El,Ps[Os++]=_l,Ps[Os++]=tf,tf=o;var d=El;o=_l;var m=32-hu(d)-1;d&=~(1<<m),l+=1;var I=32-hu(i)+m;if(30<I){var N=m-m%5;I=(d&(1<<N)-1).toString(32),d>>=N,m-=N,El=1<<32-hu(i)+m|l<<m|d,_l=I+o}else El=1<<I|l<<m|d,_l=o}function nb(o){o.return!==null&&(qc(o,1),D4(o,1,0))}function rb(o){for(;o===L0;)L0=Yd[--Wd],Yd[Wd]=null,k0=Yd[--Wd],Yd[Wd]=null;for(;o===tf;)tf=Ps[--Os],Ps[Os]=null,_l=Ps[--Os],Ps[Os]=null,El=Ps[--Os],Ps[Os]=null}var ds=null,cs=null,Gi=!1,uu=null;function P4(o,i){var l=ks(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=o,i=o.deletions,i===null?(o.deletions=[l],o.flags|=16):i.push(l)}function YP(o,i){switch(o.tag){case 5:var l=o.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(o.stateNode=i,ds=o,cs=ac(i.firstChild),!0):!1;case 6:return i=o.pendingProps===""||i.nodeType!==3?null:i,i!==null?(o.stateNode=i,ds=o,cs=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=tf!==null?{id:El,overflow:_l}:null,o.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=ks(18,null,null,0),l.stateNode=i,l.return=o,o.child=l,ds=o,cs=null,!0):!1;default:return!1}}function iC(o){return(o.mode&1)!==0&&(o.flags&128)===0}function oC(o){if(Gi){var i=cs;if(i){var l=i;if(!YP(o,i)){if(iC(o))throw Error(Hn(418));i=ac(l.nextSibling);var d=ds;i&&YP(o,i)?P4(d,l):(o.flags=o.flags&-4097|2,Gi=!1,ds=o)}}else{if(iC(o))throw Error(Hn(418));o.flags=o.flags&-4097|2,Gi=!1,ds=o}}}function WP(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ds=o}function Xy(o){if(o!==ds)return!1;if(!Gi)return WP(o),Gi=!0,!1;var i;if((i=o.tag!==3)&&!(i=o.tag!==5)&&(i=o.type,i=i!=="head"&&i!=="body"&&!eC(o.type,o.memoizedProps)),i&&(i=cs)){if(iC(o))throw O4(),Error(Hn(418));for(;i;)P4(o,i),i=ac(i.nextSibling)}if(WP(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Hn(317));e:{for(o=o.nextSibling,i=0;o;){if(o.nodeType===8){var l=o.data;if(l==="/$"){if(i===0){cs=ac(o.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}o=o.nextSibling}cs=null}}else cs=ds?ac(o.stateNode.nextSibling):null;return!0}function O4(){for(var o=cs;o;)o=ac(o.nextSibling)}function fh(){cs=ds=null,Gi=!1}function ib(o){uu===null?uu=[o]:uu.push(o)}var jH=Cl.ReactCurrentBatchConfig;function og(o,i,l){if(o=l.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(Hn(309));var d=l.stateNode}if(!d)throw Error(Hn(147,o));var m=d,I=""+o;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===I?i.ref:(i=function(N){var p=m.refs;N===null?delete p[I]:p[I]=N},i._stringRef=I,i)}if(typeof o!="string")throw Error(Hn(284));if(!l._owner)throw Error(Hn(290,o))}return o}function Qy(o,i){throw o=Object.prototype.toString.call(i),Error(Hn(31,o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o))}function $P(o){var i=o._init;return i(o._payload)}function L4(o){function i(M,_){if(o){var A=M.deletions;A===null?(M.deletions=[_],M.flags|=16):A.push(_)}}function l(M,_){if(!o)return null;for(;_!==null;)i(M,_),_=_.sibling;return null}function d(M,_){for(M=new Map;_!==null;)_.key!==null?M.set(_.key,_):M.set(_.index,_),_=_.sibling;return M}function m(M,_){return M=cc(M,_),M.index=0,M.sibling=null,M}function I(M,_,A){return M.index=A,o?(A=M.alternate,A!==null?(A=A.index,A<_?(M.flags|=2,_):A):(M.flags|=2,_)):(M.flags|=1048576,_)}function N(M){return o&&M.alternate===null&&(M.flags|=2),M}function p(M,_,A,b){return _===null||_.tag!==6?(_=JT(A,M.mode,b),_.return=M,_):(_=m(_,A),_.return=M,_)}function w(M,_,A,b){var Z=A.type;return Z===qd?x(M,_,A.props.children,b,A.key):_!==null&&(_.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Xl&&$P(Z)===_.type)?(b=m(_,A.props),b.ref=og(M,_,A),b.return=M,b):(b=_0(A.type,A.key,A.props,null,M.mode,b),b.ref=og(M,_,A),b.return=M,b)}function U(M,_,A,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==A.containerInfo||_.stateNode.implementation!==A.implementation?(_=eS(A,M.mode,b),_.return=M,_):(_=m(_,A.children||[]),_.return=M,_)}function x(M,_,A,b,Z){return _===null||_.tag!==7?(_=Xc(A,M.mode,b,Z),_.return=M,_):(_=m(_,A),_.return=M,_)}function E(M,_,A){if(typeof _=="string"&&_!==""||typeof _=="number")return _=JT(""+_,M.mode,A),_.return=M,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Zy:return A=_0(_.type,_.key,_.props,null,M.mode,A),A.ref=og(M,null,_),A.return=M,A;case Zd:return _=eS(_,M.mode,A),_.return=M,_;case Xl:var b=_._init;return E(M,b(_._payload),A)}if(pg(_)||eg(_))return _=Xc(_,M.mode,A,null),_.return=M,_;Qy(M,_)}return null}function y(M,_,A,b){var Z=_!==null?_.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return Z!==null?null:p(M,_,""+A,b);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Zy:return A.key===Z?w(M,_,A,b):null;case Zd:return A.key===Z?U(M,_,A,b):null;case Xl:return Z=A._init,y(M,_,Z(A._payload),b)}if(pg(A)||eg(A))return Z!==null?null:x(M,_,A,b,null);Qy(M,A)}return null}function P(M,_,A,b,Z){if(typeof b=="string"&&b!==""||typeof b=="number")return M=M.get(A)||null,p(_,M,""+b,Z);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zy:return M=M.get(b.key===null?A:b.key)||null,w(_,M,b,Z);case Zd:return M=M.get(b.key===null?A:b.key)||null,U(_,M,b,Z);case Xl:var Y=b._init;return P(M,_,A,Y(b._payload),Z)}if(pg(b)||eg(b))return M=M.get(A)||null,x(_,M,b,Z,null);Qy(_,b)}return null}function g(M,_,A,b){for(var Z=null,Y=null,$=_,Q=_=0,se=null;$!==null&&Q<A.length;Q++){$.index>Q?(se=$,$=null):se=$.sibling;var C=y(M,$,A[Q],b);if(C===null){$===null&&($=se);break}o&&$&&C.alternate===null&&i(M,$),_=I(C,_,Q),Y===null?Z=C:Y.sibling=C,Y=C,$=se}if(Q===A.length)return l(M,$),Gi&&qc(M,Q),Z;if($===null){for(;Q<A.length;Q++)$=E(M,A[Q],b),$!==null&&(_=I($,_,Q),Y===null?Z=$:Y.sibling=$,Y=$);return Gi&&qc(M,Q),Z}for($=d(M,$);Q<A.length;Q++)se=P($,M,Q,A[Q],b),se!==null&&(o&&se.alternate!==null&&$.delete(se.key===null?Q:se.key),_=I(se,_,Q),Y===null?Z=se:Y.sibling=se,Y=se);return o&&$.forEach(function(X){return i(M,X)}),Gi&&qc(M,Q),Z}function T(M,_,A,b){var Z=eg(A);if(typeof Z!="function")throw Error(Hn(150));if(A=Z.call(A),A==null)throw Error(Hn(151));for(var Y=Z=null,$=_,Q=_=0,se=null,C=A.next();$!==null&&!C.done;Q++,C=A.next()){$.index>Q?(se=$,$=null):se=$.sibling;var X=y(M,$,C.value,b);if(X===null){$===null&&($=se);break}o&&$&&X.alternate===null&&i(M,$),_=I(X,_,Q),Y===null?Z=X:Y.sibling=X,Y=X,$=se}if(C.done)return l(M,$),Gi&&qc(M,Q),Z;if($===null){for(;!C.done;Q++,C=A.next())C=E(M,C.value,b),C!==null&&(_=I(C,_,Q),Y===null?Z=C:Y.sibling=C,Y=C);return Gi&&qc(M,Q),Z}for($=d(M,$);!C.done;Q++,C=A.next())C=P($,M,Q,C.value,b),C!==null&&(o&&C.alternate!==null&&$.delete(C.key===null?Q:C.key),_=I(C,_,Q),Y===null?Z=C:Y.sibling=C,Y=C);return o&&$.forEach(function(ce){return i(M,ce)}),Gi&&qc(M,Q),Z}function F(M,_,A,b){if(typeof A=="object"&&A!==null&&A.type===qd&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Zy:e:{for(var Z=A.key,Y=_;Y!==null;){if(Y.key===Z){if(Z=A.type,Z===qd){if(Y.tag===7){l(M,Y.sibling),_=m(Y,A.props.children),_.return=M,M=_;break e}}else if(Y.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Xl&&$P(Z)===Y.type){l(M,Y.sibling),_=m(Y,A.props),_.ref=og(M,Y,A),_.return=M,M=_;break e}l(M,Y);break}else i(M,Y);Y=Y.sibling}A.type===qd?(_=Xc(A.props.children,M.mode,b,A.key),_.return=M,M=_):(b=_0(A.type,A.key,A.props,null,M.mode,b),b.ref=og(M,_,A),b.return=M,M=b)}return N(M);case Zd:e:{for(Y=A.key;_!==null;){if(_.key===Y)if(_.tag===4&&_.stateNode.containerInfo===A.containerInfo&&_.stateNode.implementation===A.implementation){l(M,_.sibling),_=m(_,A.children||[]),_.return=M,M=_;break e}else{l(M,_);break}else i(M,_);_=_.sibling}_=eS(A,M.mode,b),_.return=M,M=_}return N(M);case Xl:return Y=A._init,F(M,_,Y(A._payload),b)}if(pg(A))return g(M,_,A,b);if(eg(A))return T(M,_,A,b);Qy(M,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,_!==null&&_.tag===6?(l(M,_.sibling),_=m(_,A),_.return=M,M=_):(l(M,_),_=JT(A,M.mode,b),_.return=M,M=_),N(M)):l(M,_)}return F}var dh=L4(!0),k4=L4(!1),F0=pc(null),U0=null,$d=null,ob=null;function ab(){ob=$d=U0=null}function sb(o){var i=F0.current;ki(F0),o._currentValue=i}function aC(o,i,l){for(;o!==null;){var d=o.alternate;if((o.childLanes&i)!==i?(o.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),o===l)break;o=o.return}}function ah(o,i){U0=o,ob=$d=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&i&&(Ba=!0),o.firstContext=null)}function Us(o){var i=o._currentValue;if(ob!==o)if(o={context:o,memoizedValue:i,next:null},$d===null){if(U0===null)throw Error(Hn(308));$d=o,U0.dependencies={lanes:0,firstContext:o}}else $d=$d.next=o;return i}var zc=null;function ub(o){zc===null?zc=[o]:zc.push(o)}function F4(o,i,l,d){var m=i.interleaved;return m===null?(l.next=l,ub(i)):(l.next=m.next,m.next=l),i.interleaved=l,Al(o,d)}function Al(o,i){o.lanes|=i;var l=o.alternate;for(l!==null&&(l.lanes|=i),l=o,o=o.return;o!==null;)o.childLanes|=i,l=o.alternate,l!==null&&(l.childLanes|=i),l=o,o=o.return;return l.tag===3?l.stateNode:null}var Ql=!1;function lb(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U4(o,i){o=o.updateQueue,i.updateQueue===o&&(i.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Tl(o,i){return{eventTime:o,lane:i,tag:0,payload:null,callback:null,next:null}}function sc(o,i,l){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,ui&2){var m=d.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),d.pending=i,Al(o,l)}return m=d.interleaved,m===null?(i.next=i,ub(d)):(i.next=m.next,m.next=i),d.interleaved=i,Al(o,l)}function p0(o,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var d=i.lanes;d&=o.pendingLanes,l|=d,i.lanes=l,YC(o,l)}}function XP(o,i){var l=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var m=null,I=null;if(l=l.firstBaseUpdate,l!==null){do{var N={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};I===null?m=I=N:I=I.next=N,l=l.next}while(l!==null);I===null?m=I=i:I=I.next=i}else m=I=i;l={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:I,shared:d.shared,effects:d.effects},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=i:o.next=i,l.lastBaseUpdate=i}function B0(o,i,l,d){var m=o.updateQueue;Ql=!1;var I=m.firstBaseUpdate,N=m.lastBaseUpdate,p=m.shared.pending;if(p!==null){m.shared.pending=null;var w=p,U=w.next;w.next=null,N===null?I=U:N.next=U,N=w;var x=o.alternate;x!==null&&(x=x.updateQueue,p=x.lastBaseUpdate,p!==N&&(p===null?x.firstBaseUpdate=U:p.next=U,x.lastBaseUpdate=w))}if(I!==null){var E=m.baseState;N=0,x=U=w=null,p=I;do{var y=p.lane,P=p.eventTime;if((d&y)===y){x!==null&&(x=x.next={eventTime:P,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var g=o,T=p;switch(y=i,P=l,T.tag){case 1:if(g=T.payload,typeof g=="function"){E=g.call(P,E,y);break e}E=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=T.payload,y=typeof g=="function"?g.call(P,E,y):g,y==null)break e;E=to({},E,y);break e;case 2:Ql=!0}}p.callback!==null&&p.lane!==0&&(o.flags|=64,y=m.effects,y===null?m.effects=[p]:y.push(p))}else P={eventTime:P,lane:y,tag:p.tag,payload:p.payload,callback:p.callback,next:null},x===null?(U=x=P,w=E):x=x.next=P,N|=y;if(p=p.next,p===null){if(p=m.shared.pending,p===null)break;y=p,p=y.next,y.next=null,m.lastBaseUpdate=y,m.shared.pending=null}}while(!0);if(x===null&&(w=E),m.baseState=w,m.firstBaseUpdate=U,m.lastBaseUpdate=x,i=m.shared.interleaved,i!==null){m=i;do N|=m.lane,m=m.next;while(m!==i)}else I===null&&(m.shared.lanes=0);rf|=N,o.lanes=N,o.memoizedState=E}}function QP(o,i,l){if(o=i.effects,i.effects=null,o!==null)for(i=0;i<o.length;i++){var d=o[i],m=d.callback;if(m!==null){if(d.callback=null,d=l,typeof m!="function")throw Error(Hn(191,m));m.call(d)}}}var tm={},Uu=pc(tm),Zg=pc(tm),qg=pc(tm);function Yc(o){if(o===tm)throw Error(Hn(174));return o}function cb(o,i){switch(Pi(qg,i),Pi(Zg,o),Pi(Uu,tm),o=i.nodeType,o){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:jI(null,"");break;default:o=o===8?i.parentNode:i,i=o.namespaceURI||null,o=o.tagName,i=jI(i,o)}ki(Uu),Pi(Uu,i)}function hh(){ki(Uu),ki(Zg),ki(qg)}function B4(o){Yc(qg.current);var i=Yc(Uu.current),l=jI(i,o.type);i!==l&&(Pi(Zg,o),Pi(Uu,l))}function fb(o){Zg.current===o&&(ki(Uu),ki(Zg))}var Qi=pc(0);function j0(o){for(var i=o;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var zT=[];function db(){for(var o=0;o<zT.length;o++)zT[o]._workInProgressVersionPrimary=null;zT.length=0}var g0=Cl.ReactCurrentDispatcher,YT=Cl.ReactCurrentBatchConfig,nf=0,eo=null,Mo=null,Bo=null,Z0=!1,Ig=!1,Gg=0,ZH=0;function Jo(){throw Error(Hn(321))}function hb(o,i){if(i===null)return!1;for(var l=0;l<i.length&&l<o.length;l++)if(!gu(o[l],i[l]))return!1;return!0}function pb(o,i,l,d,m,I){if(nf=I,eo=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,g0.current=o===null||o.memoizedState===null?VH:KH,o=l(d,m),Ig){I=0;do{if(Ig=!1,Gg=0,25<=I)throw Error(Hn(301));I+=1,Bo=Mo=null,i.updateQueue=null,g0.current=zH,o=l(d,m)}while(Ig)}if(g0.current=q0,i=Mo!==null&&Mo.next!==null,nf=0,Bo=Mo=eo=null,Z0=!1,i)throw Error(Hn(300));return o}function gb(){var o=Gg!==0;return Gg=0,o}function Lu(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bo===null?eo.memoizedState=Bo=o:Bo=Bo.next=o,Bo}function Bs(){if(Mo===null){var o=eo.alternate;o=o!==null?o.memoizedState:null}else o=Mo.next;var i=Bo===null?eo.memoizedState:Bo.next;if(i!==null)Bo=i,Mo=o;else{if(o===null)throw Error(Hn(310));Mo=o,o={memoizedState:Mo.memoizedState,baseState:Mo.baseState,baseQueue:Mo.baseQueue,queue:Mo.queue,next:null},Bo===null?eo.memoizedState=Bo=o:Bo=Bo.next=o}return Bo}function Hg(o,i){return typeof i=="function"?i(o):i}function WT(o){var i=Bs(),l=i.queue;if(l===null)throw Error(Hn(311));l.lastRenderedReducer=o;var d=Mo,m=d.baseQueue,I=l.pending;if(I!==null){if(m!==null){var N=m.next;m.next=I.next,I.next=N}d.baseQueue=m=I,l.pending=null}if(m!==null){I=m.next,d=d.baseState;var p=N=null,w=null,U=I;do{var x=U.lane;if((nf&x)===x)w!==null&&(w=w.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),d=U.hasEagerState?U.eagerState:o(d,U.action);else{var E={lane:x,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};w===null?(p=w=E,N=d):w=w.next=E,eo.lanes|=x,rf|=x}U=U.next}while(U!==null&&U!==I);w===null?N=d:w.next=p,gu(d,i.memoizedState)||(Ba=!0),i.memoizedState=d,i.baseState=N,i.baseQueue=w,l.lastRenderedState=d}if(o=l.interleaved,o!==null){m=o;do I=m.lane,eo.lanes|=I,rf|=I,m=m.next;while(m!==o)}else m===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function $T(o){var i=Bs(),l=i.queue;if(l===null)throw Error(Hn(311));l.lastRenderedReducer=o;var d=l.dispatch,m=l.pending,I=i.memoizedState;if(m!==null){l.pending=null;var N=m=m.next;do I=o(I,N.action),N=N.next;while(N!==m);gu(I,i.memoizedState)||(Ba=!0),i.memoizedState=I,i.baseQueue===null&&(i.baseState=I),l.lastRenderedState=I}return[I,d]}function j4(){}function Z4(o,i){var l=eo,d=Bs(),m=i(),I=!gu(d.memoizedState,m);if(I&&(d.memoizedState=m,Ba=!0),d=d.queue,mb(H4.bind(null,l,d,o),[o]),d.getSnapshot!==i||I||Bo!==null&&Bo.memoizedState.tag&1){if(l.flags|=2048,Vg(9,G4.bind(null,l,d,m,i),void 0,null),jo===null)throw Error(Hn(349));nf&30||q4(l,i,m)}return m}function q4(o,i,l){o.flags|=16384,o={getSnapshot:i,value:l},i=eo.updateQueue,i===null?(i={lastEffect:null,stores:null},eo.updateQueue=i,i.stores=[o]):(l=i.stores,l===null?i.stores=[o]:l.push(o))}function G4(o,i,l,d){i.value=l,i.getSnapshot=d,V4(i)&&K4(o)}function H4(o,i,l){return l(function(){V4(i)&&K4(o)})}function V4(o){var i=o.getSnapshot;o=o.value;try{var l=i();return!gu(o,l)}catch(d){return!0}}function K4(o){var i=Al(o,1);i!==null&&pu(i,o,1,-1)}function JP(o){var i=Lu();return typeof o=="function"&&(o=o()),i.memoizedState=i.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hg,lastRenderedState:o},i.queue=o,o=o.dispatch=HH.bind(null,eo,o),[i.memoizedState,o]}function Vg(o,i,l,d){return o={tag:o,create:i,destroy:l,deps:d,next:null},i=eo.updateQueue,i===null?(i={lastEffect:null,stores:null},eo.updateQueue=i,i.lastEffect=o.next=o):(l=i.lastEffect,l===null?i.lastEffect=o.next=o:(d=l.next,l.next=o,o.next=d,i.lastEffect=o)),o}function z4(){return Bs().memoizedState}function m0(o,i,l,d){var m=Lu();eo.flags|=o,m.memoizedState=Vg(1|i,l,void 0,d===void 0?null:d)}function lE(o,i,l,d){var m=Bs();d=d===void 0?null:d;var I=void 0;if(Mo!==null){var N=Mo.memoizedState;if(I=N.destroy,d!==null&&hb(d,N.deps)){m.memoizedState=Vg(i,l,I,d);return}}eo.flags|=o,m.memoizedState=Vg(1|i,l,I,d)}function eO(o,i){return m0(8390656,8,o,i)}function mb(o,i){return lE(2048,8,o,i)}function Y4(o,i){return lE(4,2,o,i)}function W4(o,i){return lE(4,4,o,i)}function $4(o,i){if(typeof i=="function")return o=o(),i(o),function(){i(null)};if(i!=null)return o=o(),i.current=o,function(){i.current=null}}function X4(o,i,l){return l=l!=null?l.concat([o]):null,lE(4,4,$4.bind(null,i,o),l)}function vb(){}function Q4(o,i){var l=Bs();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&hb(i,d[1])?d[0]:(l.memoizedState=[o,i],o)}function J4(o,i){var l=Bs();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&hb(i,d[1])?d[0]:(o=o(),l.memoizedState=[o,i],o)}function eU(o,i,l){return nf&21?(gu(l,i)||(l=o4(),eo.lanes|=l,rf|=l,o.baseState=!0),i):(o.baseState&&(o.baseState=!1,Ba=!0),o.memoizedState=l)}function qH(o,i){var l=wi;wi=l!==0&&4>l?l:4,o(!0);var d=YT.transition;YT.transition={};try{o(!1),i()}finally{wi=l,YT.transition=d}}function tU(){return Bs().memoizedState}function GH(o,i,l){var d=lc(o);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},nU(o))rU(i,l);else if(l=F4(o,i,l,d),l!==null){var m=ya();pu(l,o,d,m),iU(l,i,d)}}function HH(o,i,l){var d=lc(o),m={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(nU(o))rU(i,m);else{var I=o.alternate;if(o.lanes===0&&(I===null||I.lanes===0)&&(I=i.lastRenderedReducer,I!==null))try{var N=i.lastRenderedState,p=I(N,l);if(m.hasEagerState=!0,m.eagerState=p,gu(p,N)){var w=i.interleaved;w===null?(m.next=m,ub(i)):(m.next=w.next,w.next=m),i.interleaved=m;return}}catch(U){}finally{}l=F4(o,i,m,d),l!==null&&(m=ya(),pu(l,o,d,m),iU(l,i,d))}}function nU(o){var i=o.alternate;return o===eo||i!==null&&i===eo}function rU(o,i){Ig=Z0=!0;var l=o.pending;l===null?i.next=i:(i.next=l.next,l.next=i),o.pending=i}function iU(o,i,l){if(l&4194240){var d=i.lanes;d&=o.pendingLanes,l|=d,i.lanes=l,YC(o,l)}}var q0={readContext:Us,useCallback:Jo,useContext:Jo,useEffect:Jo,useImperativeHandle:Jo,useInsertionEffect:Jo,useLayoutEffect:Jo,useMemo:Jo,useReducer:Jo,useRef:Jo,useState:Jo,useDebugValue:Jo,useDeferredValue:Jo,useTransition:Jo,useMutableSource:Jo,useSyncExternalStore:Jo,useId:Jo,unstable_isNewReconciler:!1},VH={readContext:Us,useCallback:function(o,i){return Lu().memoizedState=[o,i===void 0?null:i],o},useContext:Us,useEffect:eO,useImperativeHandle:function(o,i,l){return l=l!=null?l.concat([o]):null,m0(4194308,4,$4.bind(null,i,o),l)},useLayoutEffect:function(o,i){return m0(4194308,4,o,i)},useInsertionEffect:function(o,i){return m0(4,2,o,i)},useMemo:function(o,i){var l=Lu();return i=i===void 0?null:i,o=o(),l.memoizedState=[o,i],o},useReducer:function(o,i,l){var d=Lu();return i=l!==void 0?l(i):i,d.memoizedState=d.baseState=i,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:i},d.queue=o,o=o.dispatch=GH.bind(null,eo,o),[d.memoizedState,o]},useRef:function(o){var i=Lu();return o={current:o},i.memoizedState=o},useState:JP,useDebugValue:vb,useDeferredValue:function(o){return Lu().memoizedState=o},useTransition:function(){var o=JP(!1),i=o[0];return o=qH.bind(null,o[1]),Lu().memoizedState=o,[i,o]},useMutableSource:function(){},useSyncExternalStore:function(o,i,l){var d=eo,m=Lu();if(Gi){if(l===void 0)throw Error(Hn(407));l=l()}else{if(l=i(),jo===null)throw Error(Hn(349));nf&30||q4(d,i,l)}m.memoizedState=l;var I={value:l,getSnapshot:i};return m.queue=I,eO(H4.bind(null,d,I,o),[o]),d.flags|=2048,Vg(9,G4.bind(null,d,I,l,i),void 0,null),l},useId:function(){var o=Lu(),i=jo.identifierPrefix;if(Gi){var l=_l,d=El;l=(d&~(1<<32-hu(d)-1)).toString(32)+l,i=":"+i+"R"+l,l=Gg++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=ZH++,i=":"+i+"r"+l.toString(32)+":";return o.memoizedState=i},unstable_isNewReconciler:!1},KH={readContext:Us,useCallback:Q4,useContext:Us,useEffect:mb,useImperativeHandle:X4,useInsertionEffect:Y4,useLayoutEffect:W4,useMemo:J4,useReducer:WT,useRef:z4,useState:function(){return WT(Hg)},useDebugValue:vb,useDeferredValue:function(o){var i=Bs();return eU(i,Mo.memoizedState,o)},useTransition:function(){var o=WT(Hg)[0],i=Bs().memoizedState;return[o,i]},useMutableSource:j4,useSyncExternalStore:Z4,useId:tU,unstable_isNewReconciler:!1},zH={readContext:Us,useCallback:Q4,useContext:Us,useEffect:mb,useImperativeHandle:X4,useInsertionEffect:Y4,useLayoutEffect:W4,useMemo:J4,useReducer:$T,useRef:z4,useState:function(){return $T(Hg)},useDebugValue:vb,useDeferredValue:function(o){var i=Bs();return Mo===null?i.memoizedState=o:eU(i,Mo.memoizedState,o)},useTransition:function(){var o=$T(Hg)[0],i=Bs().memoizedState;return[o,i]},useMutableSource:j4,useSyncExternalStore:Z4,useId:tU,unstable_isNewReconciler:!1};function au(o,i){if(o&&o.defaultProps){i=to({},i),o=o.defaultProps;for(var l in o)i[l]===void 0&&(i[l]=o[l]);return i}return i}function sC(o,i,l,d){i=o.memoizedState,l=l(d,i),l=l==null?i:to({},i,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var cE={isMounted:function(o){return(o=o._reactInternals)?lf(o)===o:!1},enqueueSetState:function(o,i,l){o=o._reactInternals;var d=ya(),m=lc(o),I=Tl(d,m);I.payload=i,l!=null&&(I.callback=l),i=sc(o,I,m),i!==null&&(pu(i,o,m,d),p0(i,o,m))},enqueueReplaceState:function(o,i,l){o=o._reactInternals;var d=ya(),m=lc(o),I=Tl(d,m);I.tag=1,I.payload=i,l!=null&&(I.callback=l),i=sc(o,I,m),i!==null&&(pu(i,o,m,d),p0(i,o,m))},enqueueForceUpdate:function(o,i){o=o._reactInternals;var l=ya(),d=lc(o),m=Tl(l,d);m.tag=2,i!=null&&(m.callback=i),i=sc(o,m,d),i!==null&&(pu(i,o,d,l),p0(i,o,d))}};function tO(o,i,l,d,m,I,N){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,I,N):i.prototype&&i.prototype.isPureReactComponent?!Fg(l,d)||!Fg(m,I):!0}function oU(o,i,l){var d=!1,m=dc,I=i.contextType;return typeof I=="object"&&I!==null?I=Us(I):(m=Za(i)?ef:ia.current,d=i.contextTypes,I=(d=d!=null)?ch(o,m):dc),i=new i(l,I),o.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=cE,o.stateNode=i,i._reactInternals=o,d&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=m,o.__reactInternalMemoizedMaskedChildContext=I),i}function nO(o,i,l,d){o=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==o&&cE.enqueueReplaceState(i,i.state,null)}function uC(o,i,l,d){var m=o.stateNode;m.props=l,m.state=o.memoizedState,m.refs={},lb(o);var I=i.contextType;typeof I=="object"&&I!==null?m.context=Us(I):(I=Za(i)?ef:ia.current,m.context=ch(o,I)),m.state=o.memoizedState,I=i.getDerivedStateFromProps,typeof I=="function"&&(sC(o,i,I,l),m.state=o.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(i=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),i!==m.state&&cE.enqueueReplaceState(m,m.state,null),B0(o,l,m,d),m.state=o.memoizedState),typeof m.componentDidMount=="function"&&(o.flags|=4194308)}function ph(o,i){try{var l="",d=i;do l+=T9(d),d=d.return;while(d);var m=l}catch(I){m="\nError generating stack: "+I.message+"\n"+I.stack}return{value:o,source:i,stack:m,digest:null}}function XT(o,i,l){return{value:o,source:null,stack:l!=null?l:null,digest:i!=null?i:null}}function lC(o,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var YH=typeof WeakMap=="function"?WeakMap:Map;function aU(o,i,l){l=Tl(-1,l),l.tag=3,l.payload={element:null};var d=i.value;return l.callback=function(){H0||(H0=!0,EC=d),lC(o,i)},l}function sU(o,i,l){l=Tl(-1,l),l.tag=3;var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var m=i.value;l.payload=function(){return d(m)},l.callback=function(){lC(o,i)}}var I=o.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(l.callback=function(){lC(o,i),typeof d!="function"&&(uc===null?uc=new Set([this]):uc.add(this));var N=i.stack;this.componentDidCatch(i.value,{componentStack:N!==null?N:""})}),l}function rO(o,i,l){var d=o.pingCache;if(d===null){d=o.pingCache=new YH;var m=new Set;d.set(i,m)}else m=d.get(i),m===void 0&&(m=new Set,d.set(i,m));m.has(l)||(m.add(l),o=u7.bind(null,o,i,l),i.then(o,o))}function iO(o){do{var i;if((i=o.tag===13)&&(i=o.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return o;o=o.return}while(o!==null);return null}function oO(o,i,l,d,m){return o.mode&1?(o.flags|=65536,o.lanes=m,o):(o===i?o.flags|=65536:(o.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Tl(-1,1),i.tag=2,sc(l,i,1))),l.lanes|=1),o)}var WH=Cl.ReactCurrentOwner,Ba=!1;function va(o,i,l,d){i.child=o===null?k4(i,null,l,d):dh(i,o.child,l,d)}function aO(o,i,l,d,m){l=l.render;var I=i.ref;return ah(i,m),d=pb(o,i,l,d,I,m),l=gb(),o!==null&&!Ba?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~m,Il(o,i,m)):(Gi&&l&&nb(i),i.flags|=1,va(o,i,d,m),i.child)}function sO(o,i,l,d,m){if(o===null){var I=l.type;return typeof I=="function"&&!Ib(I)&&I.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=I,uU(o,i,I,d,m)):(o=_0(l.type,null,d,i,i.mode,m),o.ref=i.ref,o.return=i,i.child=o)}if(I=o.child,!(o.lanes&m)){var N=I.memoizedProps;if(l=l.compare,l=l!==null?l:Fg,l(N,d)&&o.ref===i.ref)return Il(o,i,m)}return i.flags|=1,o=cc(I,d),o.ref=i.ref,o.return=i,i.child=o}function uU(o,i,l,d,m){if(o!==null){var I=o.memoizedProps;if(Fg(I,d)&&o.ref===i.ref)if(Ba=!1,i.pendingProps=d=I,(o.lanes&m)!==0)o.flags&131072&&(Ba=!0);else return i.lanes=o.lanes,Il(o,i,m)}return cC(o,i,l,d,m)}function lU(o,i,l){var d=i.pendingProps,m=d.children,I=o!==null?o.memoizedState:null;if(d.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pi(Qd,us),us|=l;else{if(!(l&1073741824))return o=I!==null?I.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:o,cachePool:null,transitions:null},i.updateQueue=null,Pi(Qd,us),us|=o,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=I!==null?I.baseLanes:l,Pi(Qd,us),us|=d}else I!==null?(d=I.baseLanes|l,i.memoizedState=null):d=l,Pi(Qd,us),us|=d;return va(o,i,m,l),i.child}function cU(o,i){var l=i.ref;(o===null&&l!==null||o!==null&&o.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function cC(o,i,l,d,m){var I=Za(l)?ef:ia.current;return I=ch(i,I),ah(i,m),l=pb(o,i,l,d,I,m),d=gb(),o!==null&&!Ba?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~m,Il(o,i,m)):(Gi&&d&&nb(i),i.flags|=1,va(o,i,l,m),i.child)}function uO(o,i,l,d,m){if(Za(l)){var I=!0;O0(i)}else I=!1;if(ah(i,m),i.stateNode===null)v0(o,i),oU(i,l,d),uC(i,l,d,m),d=!0;else if(o===null){var N=i.stateNode,p=i.memoizedProps;N.props=p;var w=N.context,U=l.contextType;typeof U=="object"&&U!==null?U=Us(U):(U=Za(l)?ef:ia.current,U=ch(i,U));var x=l.getDerivedStateFromProps,E=typeof x=="function"||typeof N.getSnapshotBeforeUpdate=="function";E||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(p!==d||w!==U)&&nO(i,N,d,U),Ql=!1;var y=i.memoizedState;N.state=y,B0(i,d,N,m),w=i.memoizedState,p!==d||y!==w||ja.current||Ql?(typeof x=="function"&&(sC(i,l,x,d),w=i.memoizedState),(p=Ql||tO(i,l,p,d,y,w,U))?(E||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(i.flags|=4194308)):(typeof N.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=w),N.props=d,N.state=w,N.context=U,d=p):(typeof N.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{N=i.stateNode,U4(o,i),p=i.memoizedProps,U=i.type===i.elementType?p:au(i.type,p),N.props=U,E=i.pendingProps,y=N.context,w=l.contextType,typeof w=="object"&&w!==null?w=Us(w):(w=Za(l)?ef:ia.current,w=ch(i,w));var P=l.getDerivedStateFromProps;(x=typeof P=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(p!==E||y!==w)&&nO(i,N,d,w),Ql=!1,y=i.memoizedState,N.state=y,B0(i,d,N,m);var g=i.memoizedState;p!==E||y!==g||ja.current||Ql?(typeof P=="function"&&(sC(i,l,P,d),g=i.memoizedState),(U=Ql||tO(i,l,U,d,y,g,w)||!1)?(x||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(d,g,w),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(d,g,w)),typeof N.componentDidUpdate=="function"&&(i.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof N.componentDidUpdate!="function"||p===o.memoizedProps&&y===o.memoizedState||(i.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||p===o.memoizedProps&&y===o.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=g),N.props=d,N.state=g,N.context=w,d=U):(typeof N.componentDidUpdate!="function"||p===o.memoizedProps&&y===o.memoizedState||(i.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||p===o.memoizedProps&&y===o.memoizedState||(i.flags|=1024),d=!1)}return fC(o,i,l,d,I,m)}function fC(o,i,l,d,m,I){cU(o,i);var N=(i.flags&128)!==0;if(!d&&!N)return m&&zP(i,l,!1),Il(o,i,I);d=i.stateNode,WH.current=i;var p=N&&typeof l.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,o!==null&&N?(i.child=dh(i,o.child,null,I),i.child=dh(i,null,p,I)):va(o,i,p,I),i.memoizedState=d.state,m&&zP(i,l,!0),i.child}function fU(o){var i=o.stateNode;i.pendingContext?KP(o,i.pendingContext,i.pendingContext!==i.context):i.context&&KP(o,i.context,!1),cb(o,i.containerInfo)}function lO(o,i,l,d,m){return fh(),ib(m),i.flags|=256,va(o,i,l,d),i.child}var dC={dehydrated:null,treeContext:null,retryLane:0};function hC(o){return{baseLanes:o,cachePool:null,transitions:null}}function dU(o,i,l){var d=i.pendingProps,m=Qi.current,I=!1,N=(i.flags&128)!==0,p;if((p=N)||(p=o!==null&&o.memoizedState===null?!1:(m&2)!==0),p?(I=!0,i.flags&=-129):(o===null||o.memoizedState!==null)&&(m|=1),Pi(Qi,m&1),o===null)return oC(i),o=i.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(i.mode&1?o.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(N=d.children,o=d.fallback,I?(d=i.mode,I=i.child,N={mode:"hidden",children:N},!(d&1)&&I!==null?(I.childLanes=0,I.pendingProps=N):I=hE(N,d,0,null),o=Xc(o,d,l,null),I.return=i,o.return=i,I.sibling=o,i.child=I,i.child.memoizedState=hC(l),i.memoizedState=dC,o):yb(i,N));if(m=o.memoizedState,m!==null&&(p=m.dehydrated,p!==null))return $H(o,i,N,d,p,m,l);if(I){I=d.fallback,N=i.mode,m=o.child,p=m.sibling;var w={mode:"hidden",children:d.children};return!(N&1)&&i.child!==m?(d=i.child,d.childLanes=0,d.pendingProps=w,i.deletions=null):(d=cc(m,w),d.subtreeFlags=m.subtreeFlags&14680064),p!==null?I=cc(p,I):(I=Xc(I,N,l,null),I.flags|=2),I.return=i,d.return=i,d.sibling=I,i.child=d,d=I,I=i.child,N=o.child.memoizedState,N=N===null?hC(l):{baseLanes:N.baseLanes|l,cachePool:null,transitions:N.transitions},I.memoizedState=N,I.childLanes=o.childLanes&~l,i.memoizedState=dC,d}return I=o.child,o=I.sibling,d=cc(I,{mode:"visible",children:d.children}),!(i.mode&1)&&(d.lanes=l),d.return=i,d.sibling=null,o!==null&&(l=i.deletions,l===null?(i.deletions=[o],i.flags|=16):l.push(o)),i.child=d,i.memoizedState=null,d}function yb(o,i){return i=hE({mode:"visible",children:i},o.mode,0,null),i.return=o,o.child=i}function Jy(o,i,l,d){return d!==null&&ib(d),dh(i,o.child,null,l),o=yb(i,i.pendingProps.children),o.flags|=2,i.memoizedState=null,o}function $H(o,i,l,d,m,I,N){if(l)return i.flags&256?(i.flags&=-257,d=XT(Error(Hn(422))),Jy(o,i,N,d)):i.memoizedState!==null?(i.child=o.child,i.flags|=128,null):(I=d.fallback,m=i.mode,d=hE({mode:"visible",children:d.children},m,0,null),I=Xc(I,m,N,null),I.flags|=2,d.return=i,I.return=i,d.sibling=I,i.child=d,i.mode&1&&dh(i,o.child,null,N),i.child.memoizedState=hC(N),i.memoizedState=dC,I);if(!(i.mode&1))return Jy(o,i,N,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var p=d.dgst;return d=p,I=Error(Hn(419)),d=XT(I,d,void 0),Jy(o,i,N,d)}if(p=(N&o.childLanes)!==0,Ba||p){if(d=jo,d!==null){switch(N&-N){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(d.suspendedLanes|N)?0:m,m!==0&&m!==I.retryLane&&(I.retryLane=m,Al(o,m),pu(d,o,m,-1))}return Ab(),d=XT(Error(Hn(421))),Jy(o,i,N,d)}return m.data==="$?"?(i.flags|=128,i.child=o.child,i=l7.bind(null,o),m._reactRetry=i,null):(o=I.treeContext,cs=ac(m.nextSibling),ds=i,Gi=!0,uu=null,o!==null&&(Ps[Os++]=El,Ps[Os++]=_l,Ps[Os++]=tf,El=o.id,_l=o.overflow,tf=i),i=yb(i,d.children),i.flags|=4096,i)}function cO(o,i,l){o.lanes|=i;var d=o.alternate;d!==null&&(d.lanes|=i),aC(o.return,i,l)}function QT(o,i,l,d,m){var I=o.memoizedState;I===null?o.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:m}:(I.isBackwards=i,I.rendering=null,I.renderingStartTime=0,I.last=d,I.tail=l,I.tailMode=m)}function hU(o,i,l){var d=i.pendingProps,m=d.revealOrder,I=d.tail;if(va(o,i,d.children,l),d=Qi.current,d&2)d=d&1|2,i.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=i.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&cO(o,l,i);else if(o.tag===19)cO(o,l,i);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}if(Pi(Qi,d),!(i.mode&1))i.memoizedState=null;else switch(m){case"forwards":for(l=i.child,m=null;l!==null;)o=l.alternate,o!==null&&j0(o)===null&&(m=l),l=l.sibling;l=m,l===null?(m=i.child,i.child=null):(m=l.sibling,l.sibling=null),QT(i,!1,m,l,I);break;case"backwards":for(l=null,m=i.child,i.child=null;m!==null;){if(o=m.alternate,o!==null&&j0(o)===null){i.child=m;break}o=m.sibling,m.sibling=l,l=m,m=o}QT(i,!0,l,null,I);break;case"together":QT(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function v0(o,i){!(i.mode&1)&&o!==null&&(o.alternate=null,i.alternate=null,i.flags|=2)}function Il(o,i,l){if(o!==null&&(i.dependencies=o.dependencies),rf|=i.lanes,!(l&i.childLanes))return null;if(o!==null&&i.child!==o.child)throw Error(Hn(153));if(i.child!==null){for(o=i.child,l=cc(o,o.pendingProps),i.child=l,l.return=i;o.sibling!==null;)o=o.sibling,l=l.sibling=cc(o,o.pendingProps),l.return=i;l.sibling=null}return i.child}function XH(o,i,l){switch(i.tag){case 3:fU(i),fh();break;case 5:B4(i);break;case 1:Za(i.type)&&O0(i);break;case 4:cb(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,m=i.memoizedProps.value;Pi(F0,d._currentValue),d._currentValue=m;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(Pi(Qi,Qi.current&1),i.flags|=128,null):l&i.child.childLanes?dU(o,i,l):(Pi(Qi,Qi.current&1),o=Il(o,i,l),o!==null?o.sibling:null);Pi(Qi,Qi.current&1);break;case 19:if(d=(l&i.childLanes)!==0,o.flags&128){if(d)return hU(o,i,l);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Pi(Qi,Qi.current),d)break;return null;case 22:case 23:return i.lanes=0,lU(o,i,l)}return Il(o,i,l)}var pU,pC,gU,mU;pU=function(o,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)o.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};pC=function(){};gU=function(o,i,l,d){var m=o.memoizedProps;if(m!==d){o=i.stateNode,Yc(Uu.current);var I=null;switch(l){case"input":m=kI(o,m),d=kI(o,d),I=[];break;case"select":m=to({},m,{value:void 0}),d=to({},d,{value:void 0}),I=[];break;case"textarea":m=BI(o,m),d=BI(o,d),I=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(o.onclick=D0)}ZI(l,d);var N;l=null;for(U in m)if(!d.hasOwnProperty(U)&&m.hasOwnProperty(U)&&m[U]!=null)if(U==="style"){var p=m[U];for(N in p)p.hasOwnProperty(N)&&(l||(l={}),l[N]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(Ng.hasOwnProperty(U)?I||(I=[]):(I=I||[]).push(U,null));for(U in d){var w=d[U];if(p=m!=null?m[U]:void 0,d.hasOwnProperty(U)&&w!==p&&(w!=null||p!=null))if(U==="style")if(p){for(N in p)!p.hasOwnProperty(N)||w&&w.hasOwnProperty(N)||(l||(l={}),l[N]="");for(N in w)w.hasOwnProperty(N)&&p[N]!==w[N]&&(l||(l={}),l[N]=w[N])}else l||(I||(I=[]),I.push(U,l)),l=w;else U==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,p=p?p.__html:void 0,w!=null&&p!==w&&(I=I||[]).push(U,w)):U==="children"?typeof w!="string"&&typeof w!="number"||(I=I||[]).push(U,""+w):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(Ng.hasOwnProperty(U)?(w!=null&&U==="onScroll"&&Li("scroll",o),I||p===w||(I=[])):(I=I||[]).push(U,w))}l&&(I=I||[]).push("style",l);var U=I;(i.updateQueue=U)&&(i.flags|=4)}};mU=function(o,i,l,d){l!==d&&(i.flags|=4)};function ag(o,i){if(!Gi)switch(o.tailMode){case"hidden":i=o.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function ea(o){var i=o.alternate!==null&&o.alternate.child===o.child,l=0,d=0;if(i)for(var m=o.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=o,m=m.sibling;else for(m=o.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=o,m=m.sibling;return o.subtreeFlags|=d,o.childLanes=l,i}function QH(o,i,l){var d=i.pendingProps;switch(rb(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ea(i),null;case 1:return Za(i.type)&&P0(),ea(i),null;case 3:return d=i.stateNode,hh(),ki(ja),ki(ia),db(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(Xy(i)?i.flags|=4:o===null||o.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,uu!==null&&(SC(uu),uu=null))),pC(o,i),ea(i),null;case 5:fb(i);var m=Yc(qg.current);if(l=i.type,o!==null&&i.stateNode!=null)gU(o,i,l,d,m),o.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(Hn(166));return ea(i),null}if(o=Yc(Uu.current),Xy(i)){d=i.stateNode,l=i.type;var I=i.memoizedProps;switch(d[ku]=i,d[jg]=I,o=(i.mode&1)!==0,l){case"dialog":Li("cancel",d),Li("close",d);break;case"iframe":case"object":case"embed":Li("load",d);break;case"video":case"audio":for(m=0;m<mg.length;m++)Li(mg[m],d);break;case"source":Li("error",d);break;case"img":case"image":case"link":Li("error",d),Li("load",d);break;case"details":Li("toggle",d);break;case"input":EP(d,I),Li("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!I.multiple},Li("invalid",d);break;case"textarea":TP(d,I),Li("invalid",d)}ZI(l,I),m=null;for(var N in I)if(I.hasOwnProperty(N)){var p=I[N];N==="children"?typeof p=="string"?d.textContent!==p&&(I.suppressHydrationWarning!==!0&&$y(d.textContent,p,o),m=["children",p]):typeof p=="number"&&d.textContent!==""+p&&(I.suppressHydrationWarning!==!0&&$y(d.textContent,p,o),m=["children",""+p]):Ng.hasOwnProperty(N)&&p!=null&&N==="onScroll"&&Li("scroll",d)}switch(l){case"input":qy(d),_P(d,I,!0);break;case"textarea":qy(d),SP(d);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(d.onclick=D0)}d=m,i.updateQueue=d,d!==null&&(i.flags|=4)}else{N=m.nodeType===9?m:m.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=HF(l)),o==="http://www.w3.org/1999/xhtml"?l==="script"?(o=N.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof d.is=="string"?o=N.createElement(l,{is:d.is}):(o=N.createElement(l),l==="select"&&(N=o,d.multiple?N.multiple=!0:d.size&&(N.size=d.size))):o=N.createElementNS(o,l),o[ku]=i,o[jg]=d,pU(o,i,!1,!1),i.stateNode=o;e:{switch(N=qI(l,d),l){case"dialog":Li("cancel",o),Li("close",o),m=d;break;case"iframe":case"object":case"embed":Li("load",o),m=d;break;case"video":case"audio":for(m=0;m<mg.length;m++)Li(mg[m],o);m=d;break;case"source":Li("error",o),m=d;break;case"img":case"image":case"link":Li("error",o),Li("load",o),m=d;break;case"details":Li("toggle",o),m=d;break;case"input":EP(o,d),m=kI(o,d),Li("invalid",o);break;case"option":m=d;break;case"select":o._wrapperState={wasMultiple:!!d.multiple},m=to({},d,{value:void 0}),Li("invalid",o);break;case"textarea":TP(o,d),m=BI(o,d),Li("invalid",o);break;default:m=d}ZI(l,m),p=m;for(I in p)if(p.hasOwnProperty(I)){var w=p[I];I==="style"?zF(o,w):I==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&VF(o,w)):I==="children"?typeof w=="string"?(l!=="textarea"||w!=="")&&Mg(o,w):typeof w=="number"&&Mg(o,""+w):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(Ng.hasOwnProperty(I)?w!=null&&I==="onScroll"&&Li("scroll",o):w!=null&&qC(o,I,w,N))}switch(l){case"input":qy(o),_P(o,d,!1);break;case"textarea":qy(o),SP(o);break;case"option":d.value!=null&&o.setAttribute("value",""+fc(d.value));break;case"select":o.multiple=!!d.multiple,I=d.value,I!=null?nh(o,!!d.multiple,I,!1):d.defaultValue!=null&&nh(o,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(o.onclick=D0)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return ea(i),null;case 6:if(o&&i.stateNode!=null)mU(o,i,o.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(Hn(166));if(l=Yc(qg.current),Yc(Uu.current),Xy(i)){if(d=i.stateNode,l=i.memoizedProps,d[ku]=i,(I=d.nodeValue!==l)&&(o=ds,o!==null))switch(o.tag){case 3:$y(d.nodeValue,l,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&$y(d.nodeValue,l,(o.mode&1)!==0)}I&&(i.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[ku]=i,i.stateNode=d}return ea(i),null;case 13:if(ki(Qi),d=i.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Gi&&cs!==null&&i.mode&1&&!(i.flags&128))O4(),fh(),i.flags|=98560,I=!1;else if(I=Xy(i),d!==null&&d.dehydrated!==null){if(o===null){if(!I)throw Error(Hn(318));if(I=i.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(Hn(317));I[ku]=i}else fh(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;ea(i),I=!1}else uu!==null&&(SC(uu),uu=null),I=!0;if(!I)return i.flags&65536?i:null}return i.flags&128?(i.lanes=l,i):(d=d!==null,d!==(o!==null&&o.memoizedState!==null)&&d&&(i.child.flags|=8192,i.mode&1&&(o===null||Qi.current&1?Do===0&&(Do=3):Ab())),i.updateQueue!==null&&(i.flags|=4),ea(i),null);case 4:return hh(),pC(o,i),o===null&&Ug(i.stateNode.containerInfo),ea(i),null;case 10:return sb(i.type._context),ea(i),null;case 17:return Za(i.type)&&P0(),ea(i),null;case 19:if(ki(Qi),I=i.memoizedState,I===null)return ea(i),null;if(d=(i.flags&128)!==0,N=I.rendering,N===null)if(d)ag(I,!1);else{if(Do!==0||o!==null&&o.flags&128)for(o=i.child;o!==null;){if(N=j0(o),N!==null){for(i.flags|=128,ag(I,!1),d=N.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=l,l=i.child;l!==null;)I=l,o=d,I.flags&=14680066,N=I.alternate,N===null?(I.childLanes=0,I.lanes=o,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=N.childLanes,I.lanes=N.lanes,I.child=N.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=N.memoizedProps,I.memoizedState=N.memoizedState,I.updateQueue=N.updateQueue,I.type=N.type,o=N.dependencies,I.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),l=l.sibling;return Pi(Qi,Qi.current&1|2),i.child}o=o.sibling}I.tail!==null&&vo()>gh&&(i.flags|=128,d=!0,ag(I,!1),i.lanes=4194304)}else{if(!d)if(o=j0(N),o!==null){if(i.flags|=128,d=!0,l=o.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),ag(I,!0),I.tail===null&&I.tailMode==="hidden"&&!N.alternate&&!Gi)return ea(i),null}else 2*vo()-I.renderingStartTime>gh&&l!==1073741824&&(i.flags|=128,d=!0,ag(I,!1),i.lanes=4194304);I.isBackwards?(N.sibling=i.child,i.child=N):(l=I.last,l!==null?l.sibling=N:i.child=N,I.last=N)}return I.tail!==null?(i=I.tail,I.rendering=i,I.tail=i.sibling,I.renderingStartTime=vo(),i.sibling=null,l=Qi.current,Pi(Qi,d?l&1|2:l&1),i):(ea(i),null);case 22:case 23:return wb(),d=i.memoizedState!==null,o!==null&&o.memoizedState!==null!==d&&(i.flags|=8192),d&&i.mode&1?us&1073741824&&(ea(i),i.subtreeFlags&6&&(i.flags|=8192)):ea(i),null;case 24:return null;case 25:return null}throw Error(Hn(156,i.tag))}function JH(o,i){switch(rb(i),i.tag){case 1:return Za(i.type)&&P0(),o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 3:return hh(),ki(ja),ki(ia),db(),o=i.flags,o&65536&&!(o&128)?(i.flags=o&-65537|128,i):null;case 5:return fb(i),null;case 13:if(ki(Qi),o=i.memoizedState,o!==null&&o.dehydrated!==null){if(i.alternate===null)throw Error(Hn(340));fh()}return o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 19:return ki(Qi),null;case 4:return hh(),null;case 10:return sb(i.type._context),null;case 22:case 23:return wb(),null;case 24:return null;default:return null}}var e0=!1,na=!1,e7=typeof WeakSet=="function"?WeakSet:Set,cr=null;function Xd(o,i){var l=o.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){oo(o,i,d)}else l.current=null}function gC(o,i,l){try{l()}catch(d){oo(o,i,d)}}var fO=!1;function t7(o,i){if(QI=x0,o=T4(),tb(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var m=d.anchorOffset,I=d.focusNode;d=d.focusOffset;try{l.nodeType,I.nodeType}catch(b){l=null;break e}var N=0,p=-1,w=-1,U=0,x=0,E=o,y=null;t:for(;;){for(var P;E!==l||m!==0&&E.nodeType!==3||(p=N+m),E!==I||d!==0&&E.nodeType!==3||(w=N+d),E.nodeType===3&&(N+=E.nodeValue.length),(P=E.firstChild)!==null;)y=E,E=P;for(;;){if(E===o)break t;if(y===l&&++U===m&&(p=N),y===I&&++x===d&&(w=N),(P=E.nextSibling)!==null)break;E=y,y=E.parentNode}E=P}l=p===-1||w===-1?null:{start:p,end:w}}else l=null}l=l||{start:0,end:0}}else l=null;for(JI={focusedElem:o,selectionRange:l},x0=!1,cr=i;cr!==null;)if(i=cr,o=i.child,(i.subtreeFlags&1028)!==0&&o!==null)o.return=i,cr=o;else for(;cr!==null;){i=cr;try{var g=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var T=g.memoizedProps,F=g.memoizedState,M=i.stateNode,_=M.getSnapshotBeforeUpdate(i.elementType===i.type?T:au(i.type,T),F);M.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var A=i.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Hn(163))}}catch(b){oo(i,i.return,b)}if(o=i.sibling,o!==null){o.return=i.return,cr=o;break}cr=i.return}return g=fO,fO=!1,g}function Cg(o,i,l){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&o)===o){var I=m.destroy;m.destroy=void 0,I!==void 0&&gC(i,l,I)}m=m.next}while(m!==d)}}function fE(o,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&o)===o){var d=l.create;l.destroy=d()}l=l.next}while(l!==i)}}function mC(o){var i=o.ref;if(i!==null){var l=o.stateNode;switch(o.tag){case 5:o=l;break;default:o=l}typeof i=="function"?i(o):i.current=o}}function vU(o){var i=o.alternate;i!==null&&(o.alternate=null,vU(i)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(i=o.stateNode,i!==null&&(delete i[ku],delete i[jg],delete i[nC],delete i[FH],delete i[UH])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function yU(o){return o.tag===5||o.tag===3||o.tag===4}function dO(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||yU(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function vC(o,i,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(o,i):l.insertBefore(o,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(o,l)):(i=l,i.appendChild(o)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=D0));else if(d!==4&&(o=o.child,o!==null))for(vC(o,i,l),o=o.sibling;o!==null;)vC(o,i,l),o=o.sibling}function yC(o,i,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,i?l.insertBefore(o,i):l.appendChild(o);else if(d!==4&&(o=o.child,o!==null))for(yC(o,i,l),o=o.sibling;o!==null;)yC(o,i,l),o=o.sibling}var Vo=null,su=!1;function $l(o,i,l){for(l=l.child;l!==null;)EU(o,i,l),l=l.sibling}function EU(o,i,l){if(Fu&&typeof Fu.onCommitFiberUnmount=="function")try{Fu.onCommitFiberUnmount(rE,l)}catch(p){}switch(l.tag){case 5:na||Xd(l,i);case 6:var d=Vo,m=su;Vo=null,$l(o,i,l),Vo=d,su=m,Vo!==null&&(su?(o=Vo,l=l.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):Vo.removeChild(l.stateNode));break;case 18:Vo!==null&&(su?(o=Vo,l=l.stateNode,o.nodeType===8?VT(o.parentNode,l):o.nodeType===1&&VT(o,l),Lg(o)):VT(Vo,l.stateNode));break;case 4:d=Vo,m=su,Vo=l.stateNode.containerInfo,su=!0,$l(o,i,l),Vo=d,su=m;break;case 0:case 11:case 14:case 15:if(!na&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var I=m,N=I.destroy;I=I.tag,N!==void 0&&(I&2||I&4)&&gC(l,i,N),m=m.next}while(m!==d)}$l(o,i,l);break;case 1:if(!na&&(Xd(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(p){oo(l,i,p)}$l(o,i,l);break;case 21:$l(o,i,l);break;case 22:l.mode&1?(na=(d=na)||l.memoizedState!==null,$l(o,i,l),na=d):$l(o,i,l);break;default:$l(o,i,l)}}function hO(o){var i=o.updateQueue;if(i!==null){o.updateQueue=null;var l=o.stateNode;l===null&&(l=o.stateNode=new e7),i.forEach(function(d){var m=c7.bind(null,o,d);l.has(d)||(l.add(d),d.then(m,m))})}}function iu(o,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];try{var I=o,N=i,p=N;e:for(;p!==null;){switch(p.tag){case 5:Vo=p.stateNode,su=!1;break e;case 3:Vo=p.stateNode.containerInfo,su=!0;break e;case 4:Vo=p.stateNode.containerInfo,su=!0;break e}p=p.return}if(Vo===null)throw Error(Hn(160));EU(I,N,m),Vo=null,su=!1;var w=m.alternate;w!==null&&(w.return=null),m.return=null}catch(U){oo(m,i,U)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)_U(i,o),i=i.sibling}function _U(o,i){var l=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(iu(i,o),Mu(o),d&4){try{Cg(3,o,o.return),fE(3,o)}catch(T){oo(o,o.return,T)}try{Cg(5,o,o.return)}catch(T){oo(o,o.return,T)}}break;case 1:iu(i,o),Mu(o),d&512&&l!==null&&Xd(l,l.return);break;case 5:if(iu(i,o),Mu(o),d&512&&l!==null&&Xd(l,l.return),o.flags&32){var m=o.stateNode;try{Mg(m,"")}catch(T){oo(o,o.return,T)}}if(d&4&&(m=o.stateNode,m!=null)){var I=o.memoizedProps,N=l!==null?l.memoizedProps:I,p=o.type,w=o.updateQueue;if(o.updateQueue=null,w!==null)try{p==="input"&&I.type==="radio"&&I.name!=null&&qF(m,I),qI(p,N);var U=qI(p,I);for(N=0;N<w.length;N+=2){var x=w[N],E=w[N+1];x==="style"?zF(m,E):x==="dangerouslySetInnerHTML"?VF(m,E):x==="children"?Mg(m,E):qC(m,x,E,U)}switch(p){case"input":FI(m,I);break;case"textarea":GF(m,I);break;case"select":var y=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!I.multiple;var P=I.value;P!=null?nh(m,!!I.multiple,P,!1):y!==!!I.multiple&&(I.defaultValue!=null?nh(m,!!I.multiple,I.defaultValue,!0):nh(m,!!I.multiple,I.multiple?[]:"",!1))}m[jg]=I}catch(T){oo(o,o.return,T)}}break;case 6:if(iu(i,o),Mu(o),d&4){if(o.stateNode===null)throw Error(Hn(162));m=o.stateNode,I=o.memoizedProps;try{m.nodeValue=I}catch(T){oo(o,o.return,T)}}break;case 3:if(iu(i,o),Mu(o),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Lg(i.containerInfo)}catch(T){oo(o,o.return,T)}break;case 4:iu(i,o),Mu(o);break;case 13:iu(i,o),Mu(o),m=o.child,m.flags&8192&&(I=m.memoizedState!==null,m.stateNode.isHidden=I,!I||m.alternate!==null&&m.alternate.memoizedState!==null||(Tb=vo())),d&4&&hO(o);break;case 22:if(x=l!==null&&l.memoizedState!==null,o.mode&1?(na=(U=na)||x,iu(i,o),na=U):iu(i,o),Mu(o),d&8192){if(U=o.memoizedState!==null,(o.stateNode.isHidden=U)&&!x&&o.mode&1)for(cr=o,x=o.child;x!==null;){for(E=cr=x;cr!==null;){switch(y=cr,P=y.child,y.tag){case 0:case 11:case 14:case 15:Cg(4,y,y.return);break;case 1:Xd(y,y.return);var g=y.stateNode;if(typeof g.componentWillUnmount=="function"){d=y,l=y.return;try{i=d,g.props=i.memoizedProps,g.state=i.memoizedState,g.componentWillUnmount()}catch(T){oo(d,l,T)}}break;case 5:Xd(y,y.return);break;case 22:if(y.memoizedState!==null){gO(E);continue}}P!==null?(P.return=y,cr=P):gO(E)}x=x.sibling}e:for(x=null,E=o;;){if(E.tag===5){if(x===null){x=E;try{m=E.stateNode,U?(I=m.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(p=E.stateNode,w=E.memoizedProps.style,N=w!=null&&w.hasOwnProperty("display")?w.display:null,p.style.display=KF("display",N))}catch(T){oo(o,o.return,T)}}}else if(E.tag===6){if(x===null)try{E.stateNode.nodeValue=U?"":E.memoizedProps}catch(T){oo(o,o.return,T)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===o)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;x===E&&(x=null),E=E.return}x===E&&(x=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:iu(i,o),Mu(o),d&4&&hO(o);break;case 21:break;default:iu(i,o),Mu(o)}}function Mu(o){var i=o.flags;if(i&2){try{e:{for(var l=o.return;l!==null;){if(yU(l)){var d=l;break e}l=l.return}throw Error(Hn(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(Mg(m,""),d.flags&=-33);var I=dO(o);yC(o,I,m);break;case 3:case 4:var N=d.stateNode.containerInfo,p=dO(o);vC(o,p,N);break;default:throw Error(Hn(161))}}catch(w){oo(o,o.return,w)}o.flags&=-3}i&4096&&(o.flags&=-4097)}function n7(o,i,l){cr=o,TU(o)}function TU(o,i,l){for(var d=(o.mode&1)!==0;cr!==null;){var m=cr,I=m.child;if(m.tag===22&&d){var N=m.memoizedState!==null||e0;if(!N){var p=m.alternate,w=p!==null&&p.memoizedState!==null||na;p=e0;var U=na;if(e0=N,(na=w)&&!U)for(cr=m;cr!==null;)N=cr,w=N.child,N.tag===22&&N.memoizedState!==null?mO(m):w!==null?(w.return=N,cr=w):mO(m);for(;I!==null;)cr=I,TU(I),I=I.sibling;cr=m,e0=p,na=U}pO(o)}else m.subtreeFlags&8772&&I!==null?(I.return=m,cr=I):pO(o)}}function pO(o){for(;cr!==null;){var i=cr;if(i.flags&8772){var l=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:na||fE(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!na)if(l===null)d.componentDidMount();else{var m=i.elementType===i.type?l.memoizedProps:au(i.type,l.memoizedProps);d.componentDidUpdate(m,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var I=i.updateQueue;I!==null&&QP(i,I,d);break;case 3:var N=i.updateQueue;if(N!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}QP(i,N,l)}break;case 5:var p=i.stateNode;if(l===null&&i.flags&4){l=p;var w=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&l.focus();break;case"img":w.src&&(l.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var U=i.alternate;if(U!==null){var x=U.memoizedState;if(x!==null){var E=x.dehydrated;E!==null&&Lg(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Hn(163))}na||i.flags&512&&mC(i)}catch(y){oo(i,i.return,y)}}if(i===o){cr=null;break}if(l=i.sibling,l!==null){l.return=i.return,cr=l;break}cr=i.return}}function gO(o){for(;cr!==null;){var i=cr;if(i===o){cr=null;break}var l=i.sibling;if(l!==null){l.return=i.return,cr=l;break}cr=i.return}}function mO(o){for(;cr!==null;){var i=cr;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{fE(4,i)}catch(w){oo(i,l,w)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var m=i.return;try{d.componentDidMount()}catch(w){oo(i,m,w)}}var I=i.return;try{mC(i)}catch(w){oo(i,I,w)}break;case 5:var N=i.return;try{mC(i)}catch(w){oo(i,N,w)}}}catch(w){oo(i,i.return,w)}if(i===o){cr=null;break}var p=i.sibling;if(p!==null){p.return=i.return,cr=p;break}cr=i.return}}var r7=Math.ceil,G0=Cl.ReactCurrentDispatcher,Eb=Cl.ReactCurrentOwner,Fs=Cl.ReactCurrentBatchConfig,ui=0,jo=null,wo=null,Ko=0,us=0,Qd=pc(0),Do=0,Kg=null,rf=0,dE=0,_b=0,bg=null,Ua=null,Tb=0,gh=1/0,vl=null,H0=!1,EC=null,uc=null,t0=!1,nc=null,V0=0,Rg=0,_C=null,y0=-1,E0=0;function ya(){return ui&6?vo():y0!==-1?y0:y0=vo()}function lc(o){return o.mode&1?ui&2&&Ko!==0?Ko&-Ko:jH.transition!==null?(E0===0&&(E0=o4()),E0):(o=wi,o!==0||(o=window.event,o=o===void 0?16:d4(o.type)),o):1}function pu(o,i,l,d){if(50<Rg)throw Rg=0,_C=null,Error(Hn(185));Qg(o,l,d),(!(ui&2)||o!==jo)&&(o===jo&&(!(ui&2)&&(dE|=l),Do===4&&ec(o,Ko)),qa(o,d),l===1&&ui===0&&!(i.mode&1)&&(gh=vo()+500,uE&&gc()))}function qa(o,i){var l=o.callbackNode;j9(o,i);var d=R0(o,o===jo?Ko:0);if(d===0)l!==null&&IP(l),o.callbackNode=null,o.callbackPriority=0;else if(i=d&-d,o.callbackPriority!==i){if(l!=null&&IP(l),i===1)o.tag===0?BH(vO.bind(null,o)):M4(vO.bind(null,o)),LH(function(){!(ui&6)&&gc()}),l=null;else{switch(a4(d)){case 1:l=zC;break;case 4:l=r4;break;case 16:l=b0;break;case 536870912:l=i4;break;default:l=b0}l=xU(l,SU.bind(null,o))}o.callbackPriority=i,o.callbackNode=l}}function SU(o,i){if(y0=-1,E0=0,ui&6)throw Error(Hn(327));var l=o.callbackNode;if(sh()&&o.callbackNode!==l)return null;var d=R0(o,o===jo?Ko:0);if(d===0)return null;if(d&30||d&o.expiredLanes||i)i=K0(o,d);else{i=d;var m=ui;ui|=2;var I=AU();(jo!==o||Ko!==i)&&(vl=null,gh=vo()+500,$c(o,i));do try{a7();break}catch(p){wU(o,p)}while(!0);ab(),G0.current=I,ui=m,wo!==null?i=0:(jo=null,Ko=0,i=Do)}if(i!==0){if(i===2&&(m=zI(o),m!==0&&(d=m,i=TC(o,m))),i===1)throw l=Kg,$c(o,0),ec(o,d),qa(o,vo()),l;if(i===6)ec(o,d);else{if(m=o.current.alternate,!(d&30)&&!i7(m)&&(i=K0(o,d),i===2&&(I=zI(o),I!==0&&(d=I,i=TC(o,I))),i===1))throw l=Kg,$c(o,0),ec(o,d),qa(o,vo()),l;switch(o.finishedWork=m,o.finishedLanes=d,i){case 0:case 1:throw Error(Hn(345));case 2:Gc(o,Ua,vl);break;case 3:if(ec(o,d),(d&130023424)===d&&(i=Tb+500-vo(),10<i)){if(R0(o,0)!==0)break;if(m=o.suspendedLanes,(m&d)!==d){ya(),o.pingedLanes|=o.suspendedLanes&m;break}o.timeoutHandle=tC(Gc.bind(null,o,Ua,vl),i);break}Gc(o,Ua,vl);break;case 4:if(ec(o,d),(d&4194240)===d)break;for(i=o.eventTimes,m=-1;0<d;){var N=31-hu(d);I=1<<N,N=i[N],N>m&&(m=N),d&=~I}if(d=m,d=vo()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*r7(d/1960))-d,10<d){o.timeoutHandle=tC(Gc.bind(null,o,Ua,vl),d);break}Gc(o,Ua,vl);break;case 5:Gc(o,Ua,vl);break;default:throw Error(Hn(329))}}}return qa(o,vo()),o.callbackNode===l?SU.bind(null,o):null}function TC(o,i){var l=bg;return o.current.memoizedState.isDehydrated&&($c(o,i).flags|=256),o=K0(o,i),o!==2&&(i=Ua,Ua=l,i!==null&&SC(i)),o}function SC(o){Ua===null?Ua=o:Ua.push.apply(Ua,o)}function i7(o){for(var i=o;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var m=l[d],I=m.getSnapshot;m=m.value;try{if(!gu(I(),m))return!1}catch(N){return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ec(o,i){for(i&=~_b,i&=~dE,o.suspendedLanes|=i,o.pingedLanes&=~i,o=o.expirationTimes;0<i;){var l=31-hu(i),d=1<<l;o[l]=-1,i&=~d}}function vO(o){if(ui&6)throw Error(Hn(327));sh();var i=R0(o,0);if(!(i&1))return qa(o,vo()),null;var l=K0(o,i);if(o.tag!==0&&l===2){var d=zI(o);d!==0&&(i=d,l=TC(o,d))}if(l===1)throw l=Kg,$c(o,0),ec(o,i),qa(o,vo()),l;if(l===6)throw Error(Hn(345));return o.finishedWork=o.current.alternate,o.finishedLanes=i,Gc(o,Ua,vl),qa(o,vo()),null}function Sb(o,i){var l=ui;ui|=1;try{return o(i)}finally{ui=l,ui===0&&(gh=vo()+500,uE&&gc())}}function of(o){nc!==null&&nc.tag===0&&!(ui&6)&&sh();var i=ui;ui|=1;var l=Fs.transition,d=wi;try{if(Fs.transition=null,wi=1,o)return o()}finally{wi=d,Fs.transition=l,ui=i,!(ui&6)&&gc()}}function wb(){us=Qd.current,ki(Qd)}function $c(o,i){o.finishedWork=null,o.finishedLanes=0;var l=o.timeoutHandle;if(l!==-1&&(o.timeoutHandle=-1,OH(l)),wo!==null)for(l=wo.return;l!==null;){var d=l;switch(rb(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&P0();break;case 3:hh(),ki(ja),ki(ia),db();break;case 5:fb(d);break;case 4:hh();break;case 13:ki(Qi);break;case 19:ki(Qi);break;case 10:sb(d.type._context);break;case 22:case 23:wb()}l=l.return}if(jo=o,wo=o=cc(o.current,null),Ko=us=i,Do=0,Kg=null,_b=dE=rf=0,Ua=bg=null,zc!==null){for(i=0;i<zc.length;i++)if(l=zc[i],d=l.interleaved,d!==null){l.interleaved=null;var m=d.next,I=l.pending;if(I!==null){var N=I.next;I.next=m,d.next=N}l.pending=d}zc=null}return o}function wU(o,i){do{var l=wo;try{if(ab(),g0.current=q0,Z0){for(var d=eo.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Z0=!1}if(nf=0,Bo=Mo=eo=null,Ig=!1,Gg=0,Eb.current=null,l===null||l.return===null){Do=1,Kg=i,wo=null;break}e:{var I=o,N=l.return,p=l,w=i;if(i=Ko,p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var U=w,x=p,E=x.tag;if(!(x.mode&1)&&(E===0||E===11||E===15)){var y=x.alternate;y?(x.updateQueue=y.updateQueue,x.memoizedState=y.memoizedState,x.lanes=y.lanes):(x.updateQueue=null,x.memoizedState=null)}var P=iO(N);if(P!==null){P.flags&=-257,oO(P,N,p,I,i),P.mode&1&&rO(I,U,i),i=P,w=U;var g=i.updateQueue;if(g===null){var T=new Set;T.add(w),i.updateQueue=T}else g.add(w);break e}else{if(!(i&1)){rO(I,U,i),Ab();break e}w=Error(Hn(426))}}else if(Gi&&p.mode&1){var F=iO(N);if(F!==null){!(F.flags&65536)&&(F.flags|=256),oO(F,N,p,I,i),ib(ph(w,p));break e}}I=w=ph(w,p),Do!==4&&(Do=2),bg===null?bg=[I]:bg.push(I),I=N;do{switch(I.tag){case 3:I.flags|=65536,i&=-i,I.lanes|=i;var M=aU(I,w,i);XP(I,M);break e;case 1:p=w;var _=I.type,A=I.stateNode;if(!(I.flags&128)&&(typeof _.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(uc===null||!uc.has(A)))){I.flags|=65536,i&=-i,I.lanes|=i;var b=sU(I,p,i);XP(I,b);break e}}I=I.return}while(I!==null)}CU(l)}catch(Z){i=Z,wo===l&&l!==null&&(wo=l=l.return);continue}break}while(!0)}function AU(){var o=G0.current;return G0.current=q0,o===null?q0:o}function Ab(){(Do===0||Do===3||Do===2)&&(Do=4),jo===null||!(rf&268435455)&&!(dE&268435455)||ec(jo,Ko)}function K0(o,i){var l=ui;ui|=2;var d=AU();(jo!==o||Ko!==i)&&(vl=null,$c(o,i));do try{o7();break}catch(m){wU(o,m)}while(!0);if(ab(),ui=l,G0.current=d,wo!==null)throw Error(Hn(261));return jo=null,Ko=0,Do}function o7(){for(;wo!==null;)IU(wo)}function a7(){for(;wo!==null&&!M9();)IU(wo)}function IU(o){var i=RU(o.alternate,o,us);o.memoizedProps=o.pendingProps,i===null?CU(o):wo=i,Eb.current=null}function CU(o){var i=o;do{var l=i.alternate;if(o=i.return,i.flags&32768){if(l=JH(l,i),l!==null){l.flags&=32767,wo=l;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Do=6,wo=null;return}}else if(l=QH(l,i,us),l!==null){wo=l;return}if(i=i.sibling,i!==null){wo=i;return}wo=i=o}while(i!==null);Do===0&&(Do=5)}function Gc(o,i,l){var d=wi,m=Fs.transition;try{Fs.transition=null,wi=1,s7(o,i,l,d)}finally{Fs.transition=m,wi=d}return null}function s7(o,i,l,d){do sh();while(nc!==null);if(ui&6)throw Error(Hn(327));l=o.finishedWork;var m=o.finishedLanes;if(l===null)return null;if(o.finishedWork=null,o.finishedLanes=0,l===o.current)throw Error(Hn(177));o.callbackNode=null,o.callbackPriority=0;var I=l.lanes|l.childLanes;if(Z9(o,I),o===jo&&(wo=jo=null,Ko=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||t0||(t0=!0,xU(b0,function(){return sh(),null})),I=(l.flags&15990)!==0,l.subtreeFlags&15990||I){I=Fs.transition,Fs.transition=null;var N=wi;wi=1;var p=ui;ui|=4,Eb.current=null,t7(o,l),_U(l,o),bH(JI),x0=!!QI,JI=QI=null,o.current=l,n7(l),D9(),ui=p,wi=N,Fs.transition=I}else o.current=l;if(t0&&(t0=!1,nc=o,V0=m),I=o.pendingLanes,I===0&&(uc=null),L9(l.stateNode),qa(o,vo()),i!==null)for(d=o.onRecoverableError,l=0;l<i.length;l++)m=i[l],d(m.value,{componentStack:m.stack,digest:m.digest});if(H0)throw H0=!1,o=EC,EC=null,o;return V0&1&&o.tag!==0&&sh(),I=o.pendingLanes,I&1?o===_C?Rg++:(Rg=0,_C=o):Rg=0,gc(),null}function sh(){if(nc!==null){var o=a4(V0),i=Fs.transition,l=wi;try{if(Fs.transition=null,wi=16>o?16:o,nc===null)var d=!1;else{if(o=nc,nc=null,V0=0,ui&6)throw Error(Hn(331));var m=ui;for(ui|=4,cr=o.current;cr!==null;){var I=cr,N=I.child;if(cr.flags&16){var p=I.deletions;if(p!==null){for(var w=0;w<p.length;w++){var U=p[w];for(cr=U;cr!==null;){var x=cr;switch(x.tag){case 0:case 11:case 15:Cg(8,x,I)}var E=x.child;if(E!==null)E.return=x,cr=E;else for(;cr!==null;){x=cr;var y=x.sibling,P=x.return;if(vU(x),x===U){cr=null;break}if(y!==null){y.return=P,cr=y;break}cr=P}}}var g=I.alternate;if(g!==null){var T=g.child;if(T!==null){g.child=null;do{var F=T.sibling;T.sibling=null,T=F}while(T!==null)}}cr=I}}if(I.subtreeFlags&2064&&N!==null)N.return=I,cr=N;else e:for(;cr!==null;){if(I=cr,I.flags&2048)switch(I.tag){case 0:case 11:case 15:Cg(9,I,I.return)}var M=I.sibling;if(M!==null){M.return=I.return,cr=M;break e}cr=I.return}}var _=o.current;for(cr=_;cr!==null;){N=cr;var A=N.child;if(N.subtreeFlags&2064&&A!==null)A.return=N,cr=A;else e:for(N=_;cr!==null;){if(p=cr,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:fE(9,p)}}catch(Z){oo(p,p.return,Z)}if(p===N){cr=null;break e}var b=p.sibling;if(b!==null){b.return=p.return,cr=b;break e}cr=p.return}}if(ui=m,gc(),Fu&&typeof Fu.onPostCommitFiberRoot=="function")try{Fu.onPostCommitFiberRoot(rE,o)}catch(Z){}d=!0}return d}finally{wi=l,Fs.transition=i}}return!1}function yO(o,i,l){i=ph(l,i),i=aU(o,i,1),o=sc(o,i,1),i=ya(),o!==null&&(Qg(o,1,i),qa(o,i))}function oo(o,i,l){if(o.tag===3)yO(o,o,l);else for(;i!==null;){if(i.tag===3){yO(i,o,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(uc===null||!uc.has(d))){o=ph(l,o),o=sU(i,o,1),i=sc(i,o,1),o=ya(),i!==null&&(Qg(i,1,o),qa(i,o));break}}i=i.return}}function u7(o,i,l){var d=o.pingCache;d!==null&&d.delete(i),i=ya(),o.pingedLanes|=o.suspendedLanes&l,jo===o&&(Ko&l)===l&&(Do===4||Do===3&&(Ko&130023424)===Ko&&500>vo()-Tb?$c(o,0):_b|=l),qa(o,i)}function bU(o,i){i===0&&(o.mode&1?(i=Vy,Vy<<=1,!(Vy&130023424)&&(Vy=4194304)):i=1);var l=ya();o=Al(o,i),o!==null&&(Qg(o,i,l),qa(o,l))}function l7(o){var i=o.memoizedState,l=0;i!==null&&(l=i.retryLane),bU(o,l)}function c7(o,i){var l=0;switch(o.tag){case 13:var d=o.stateNode,m=o.memoizedState;m!==null&&(l=m.retryLane);break;case 19:d=o.stateNode;break;default:throw Error(Hn(314))}d!==null&&d.delete(i),bU(o,l)}var RU;RU=function(o,i,l){if(o!==null)if(o.memoizedProps!==i.pendingProps||ja.current)Ba=!0;else{if(!(o.lanes&l)&&!(i.flags&128))return Ba=!1,XH(o,i,l);Ba=!!(o.flags&131072)}else Ba=!1,Gi&&i.flags&1048576&&D4(i,k0,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;v0(o,i),o=i.pendingProps;var m=ch(i,ia.current);ah(i,l),m=pb(null,i,d,o,m,l);var I=gb();return i.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Za(d)?(I=!0,O0(i)):I=!1,i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,lb(i),m.updater=cE,i.stateNode=m,m._reactInternals=i,uC(i,d,o,l),i=fC(null,i,d,!0,I,l)):(i.tag=0,Gi&&I&&nb(i),va(null,i,m,l),i=i.child),i;case 16:d=i.elementType;e:{switch(v0(o,i),o=i.pendingProps,m=d._init,d=m(d._payload),i.type=d,m=i.tag=d7(d),o=au(d,o),m){case 0:i=cC(null,i,d,o,l);break e;case 1:i=uO(null,i,d,o,l);break e;case 11:i=aO(null,i,d,o,l);break e;case 14:i=sO(null,i,d,au(d.type,o),l);break e}throw Error(Hn(306,d,""))}return i;case 0:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:au(d,m),cC(o,i,d,m,l);case 1:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:au(d,m),uO(o,i,d,m,l);case 3:e:{if(fU(i),o===null)throw Error(Hn(387));d=i.pendingProps,I=i.memoizedState,m=I.element,U4(o,i),B0(i,d,null,l);var N=i.memoizedState;if(d=N.element,I.isDehydrated)if(I={element:d,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},i.updateQueue.baseState=I,i.memoizedState=I,i.flags&256){m=ph(Error(Hn(423)),i),i=lO(o,i,d,l,m);break e}else if(d!==m){m=ph(Error(Hn(424)),i),i=lO(o,i,d,l,m);break e}else for(cs=ac(i.stateNode.containerInfo.firstChild),ds=i,Gi=!0,uu=null,l=k4(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(fh(),d===m){i=Il(o,i,l);break e}va(o,i,d,l)}i=i.child}return i;case 5:return B4(i),o===null&&oC(i),d=i.type,m=i.pendingProps,I=o!==null?o.memoizedProps:null,N=m.children,eC(d,m)?N=null:I!==null&&eC(d,I)&&(i.flags|=32),cU(o,i),va(o,i,N,l),i.child;case 6:return o===null&&oC(i),null;case 13:return dU(o,i,l);case 4:return cb(i,i.stateNode.containerInfo),d=i.pendingProps,o===null?i.child=dh(i,null,d,l):va(o,i,d,l),i.child;case 11:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:au(d,m),aO(o,i,d,m,l);case 7:return va(o,i,i.pendingProps,l),i.child;case 8:return va(o,i,i.pendingProps.children,l),i.child;case 12:return va(o,i,i.pendingProps.children,l),i.child;case 10:e:{if(d=i.type._context,m=i.pendingProps,I=i.memoizedProps,N=m.value,Pi(F0,d._currentValue),d._currentValue=N,I!==null)if(gu(I.value,N)){if(I.children===m.children&&!ja.current){i=Il(o,i,l);break e}}else for(I=i.child,I!==null&&(I.return=i);I!==null;){var p=I.dependencies;if(p!==null){N=I.child;for(var w=p.firstContext;w!==null;){if(w.context===d){if(I.tag===1){w=Tl(-1,l&-l),w.tag=2;var U=I.updateQueue;if(U!==null){U=U.shared;var x=U.pending;x===null?w.next=w:(w.next=x.next,x.next=w),U.pending=w}}I.lanes|=l,w=I.alternate,w!==null&&(w.lanes|=l),aC(I.return,l,i),p.lanes|=l;break}w=w.next}}else if(I.tag===10)N=I.type===i.type?null:I.child;else if(I.tag===18){if(N=I.return,N===null)throw Error(Hn(341));N.lanes|=l,p=N.alternate,p!==null&&(p.lanes|=l),aC(N,l,i),N=I.sibling}else N=I.child;if(N!==null)N.return=I;else for(N=I;N!==null;){if(N===i){N=null;break}if(I=N.sibling,I!==null){I.return=N.return,N=I;break}N=N.return}I=N}va(o,i,m.children,l),i=i.child}return i;case 9:return m=i.type,d=i.pendingProps.children,ah(i,l),m=Us(m),d=d(m),i.flags|=1,va(o,i,d,l),i.child;case 14:return d=i.type,m=au(d,i.pendingProps),m=au(d.type,m),sO(o,i,d,m,l);case 15:return uU(o,i,i.type,i.pendingProps,l);case 17:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:au(d,m),v0(o,i),i.tag=1,Za(d)?(o=!0,O0(i)):o=!1,ah(i,l),oU(i,d,m),uC(i,d,m,l),fC(null,i,d,!0,o,l);case 19:return hU(o,i,l);case 22:return lU(o,i,l)}throw Error(Hn(156,i.tag))};function xU(o,i){return n4(o,i)}function f7(o,i,l,d){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(o,i,l,d){return new f7(o,i,l,d)}function Ib(o){return o=o.prototype,!(!o||!o.isReactComponent)}function d7(o){if(typeof o=="function")return Ib(o)?1:0;if(o!=null){if(o=o.$$typeof,o===HC)return 11;if(o===VC)return 14}return 2}function cc(o,i){var l=o.alternate;return l===null?(l=ks(o.tag,i,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=i,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&14680064,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,i=o.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l}function _0(o,i,l,d,m,I){var N=2;if(d=o,typeof o=="function")Ib(o)&&(N=1);else if(typeof o=="string")N=5;else e:switch(o){case qd:return Xc(l.children,m,I,i);case GC:N=8,m|=8;break;case DI:return o=ks(12,l,i,m|2),o.elementType=DI,o.lanes=I,o;case PI:return o=ks(13,l,i,m),o.elementType=PI,o.lanes=I,o;case OI:return o=ks(19,l,i,m),o.elementType=OI,o.lanes=I,o;case BF:return hE(l,m,I,i);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case FF:N=10;break e;case UF:N=9;break e;case HC:N=11;break e;case VC:N=14;break e;case Xl:N=16,d=null;break e}throw Error(Hn(130,o==null?o:typeof o,""))}return i=ks(N,l,i,m),i.elementType=o,i.type=d,i.lanes=I,i}function Xc(o,i,l,d){return o=ks(7,o,d,i),o.lanes=l,o}function hE(o,i,l,d){return o=ks(22,o,d,i),o.elementType=BF,o.lanes=l,o.stateNode={isHidden:!1},o}function JT(o,i,l){return o=ks(6,o,null,i),o.lanes=l,o}function eS(o,i,l){return i=ks(4,o.children!==null?o.children:[],o.key,i),i.lanes=l,i.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},i}function h7(o,i,l,d,m){this.tag=i,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=OT(0),this.expirationTimes=OT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=OT(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Cb(o,i,l,d,m,I,N,p,w){return o=new h7(o,i,l,p,w),i===1?(i=1,I===!0&&(i|=8)):i=0,I=ks(3,null,null,i),o.current=I,I.stateNode=o,I.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},lb(I),o}function p7(o,i,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zd,key:d==null?null:""+d,children:o,containerInfo:i,implementation:l}}function NU(o){if(!o)return dc;o=o._reactInternals;e:{if(lf(o)!==o||o.tag!==1)throw Error(Hn(170));var i=o;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Za(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(Hn(171))}if(o.tag===1){var l=o.type;if(Za(l))return N4(o,l,i)}return i}function MU(o,i,l,d,m,I,N,p,w){return o=Cb(l,d,!0,o,m,I,N,p,w),o.context=NU(null),l=o.current,d=ya(),m=lc(l),I=Tl(d,m),I.callback=i!=null?i:null,sc(l,I,m),o.current.lanes=m,Qg(o,m,d),qa(o,d),o}function pE(o,i,l,d){var m=i.current,I=ya(),N=lc(m);return l=NU(l),i.context===null?i.context=l:i.pendingContext=l,i=Tl(I,N),i.payload={element:o},d=d===void 0?null:d,d!==null&&(i.callback=d),o=sc(m,i,N),o!==null&&(pu(o,m,N,I),p0(o,m,N)),N}function z0(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function EO(o,i){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<i?l:i}}function bb(o,i){EO(o,i),(o=o.alternate)&&EO(o,i)}function g7(){return null}var DU=typeof reportError=="function"?reportError:function(o){console.error(o)};function Rb(o){this._internalRoot=o}gE.prototype.render=Rb.prototype.render=function(o){var i=this._internalRoot;if(i===null)throw Error(Hn(409));pE(o,i,null,null)};gE.prototype.unmount=Rb.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var i=o.containerInfo;of(function(){pE(null,o,null,null)}),i[wl]=null}};function gE(o){this._internalRoot=o}gE.prototype.unstable_scheduleHydration=function(o){if(o){var i=l4();o={blockedOn:null,target:o,priority:i};for(var l=0;l<Jl.length&&i!==0&&i<Jl[l].priority;l++);Jl.splice(l,0,o),l===0&&f4(o)}};function xb(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function mE(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function _O(){}function m7(o,i,l,d,m){if(m){if(typeof d=="function"){var I=d;d=function(){var U=z0(N);I.call(U)}}var N=MU(i,d,o,0,null,!1,!1,"",_O);return o._reactRootContainer=N,o[wl]=N.current,Ug(o.nodeType===8?o.parentNode:o),of(),N}for(;m=o.lastChild;)o.removeChild(m);if(typeof d=="function"){var p=d;d=function(){var U=z0(w);p.call(U)}}var w=Cb(o,0,!1,null,null,!1,!1,"",_O);return o._reactRootContainer=w,o[wl]=w.current,Ug(o.nodeType===8?o.parentNode:o),of(function(){pE(i,w,l,d)}),w}function vE(o,i,l,d,m){var I=l._reactRootContainer;if(I){var N=I;if(typeof m=="function"){var p=m;m=function(){var w=z0(N);p.call(w)}}pE(i,N,o,m)}else N=m7(l,i,o,m,d);return z0(N)}s4=function(o){switch(o.tag){case 3:var i=o.stateNode;if(i.current.memoizedState.isDehydrated){var l=gg(i.pendingLanes);l!==0&&(YC(i,l|1),qa(i,vo()),!(ui&6)&&(gh=vo()+500,gc()))}break;case 13:of(function(){var d=Al(o,1);if(d!==null){var m=ya();pu(d,o,1,m)}}),bb(o,1)}};WC=function(o){if(o.tag===13){var i=Al(o,134217728);if(i!==null){var l=ya();pu(i,o,134217728,l)}bb(o,134217728)}};u4=function(o){if(o.tag===13){var i=lc(o),l=Al(o,i);if(l!==null){var d=ya();pu(l,o,i,d)}bb(o,i)}};l4=function(){return wi};c4=function(o,i){var l=wi;try{return wi=o,i()}finally{wi=l}};HI=function(o,i,l){switch(i){case"input":if(FI(o,l),i=l.name,l.type==="radio"&&i!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==o&&d.form===o.form){var m=sE(d);if(!m)throw Error(Hn(90));ZF(d),FI(d,m)}}}break;case"textarea":GF(o,l);break;case"select":i=l.value,i!=null&&nh(o,!!l.multiple,i,!1)}};$F=Sb;XF=of;var v7={usingClientEntryPoint:!1,Events:[em,Kd,sE,YF,WF,Sb]},sg={findFiberByHostInstance:Kc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},y7={bundleType:sg.bundleType,version:sg.version,rendererPackageName:sg.rendererPackageName,rendererConfig:sg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cl.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=e4(o),o===null?null:o.stateNode},findFiberByHostInstance:sg.findFiberByHostInstance||g7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var n0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!n0.isDisabled&&n0.supportsFiber)try{rE=n0.inject(y7),Fu=n0}catch(o){}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v7;ps.createPortal=function(o,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xb(i))throw Error(Hn(200));return p7(o,i,null,l)};ps.createRoot=function(o,i){if(!xb(o))throw Error(Hn(299));var l=!1,d="",m=DU;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),i=Cb(o,1,!1,null,null,l,!1,d,m),o[wl]=i.current,Ug(o.nodeType===8?o.parentNode:o),new Rb(i)};ps.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var i=o._reactInternals;if(i===void 0)throw typeof o.render=="function"?Error(Hn(188)):(o=Object.keys(o).join(","),Error(Hn(268,o)));return o=e4(i),o=o===null?null:o.stateNode,o};ps.flushSync=function(o){return of(o)};ps.hydrate=function(o,i,l){if(!mE(i))throw Error(Hn(200));return vE(null,o,i,!0,l)};ps.hydrateRoot=function(o,i,l){if(!xb(o))throw Error(Hn(405));var d=l!=null&&l.hydratedSources||null,m=!1,I="",N=DU;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(I=l.identifierPrefix),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),i=MU(i,null,o,1,l!=null?l:null,m,!1,I,N),o[wl]=i.current,Ug(o),d)for(o=0;o<d.length;o++)l=d[o],m=l._getVersion,m=m(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,m]:i.mutableSourceEagerHydrationData.push(l,m);return new gE(i)};ps.render=function(o,i,l){if(!mE(i))throw Error(Hn(200));return vE(null,o,i,!1,l)};ps.unmountComponentAtNode=function(o){if(!mE(o))throw Error(Hn(40));return o._reactRootContainer?(of(function(){vE(null,null,o,!1,function(){o._reactRootContainer=null,o[wl]=null})}),!0):!1};ps.unstable_batchedUpdates=Sb;ps.unstable_renderSubtreeIntoContainer=function(o,i,l,d){if(!mE(l))throw Error(Hn(200));if(o==null||o._reactInternals===void 0)throw Error(Hn(38));return vE(o,i,l,!1,d)};ps.version="18.3.1-next-f1338f8080-20240426";function PU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PU)}catch(o){console.error(o)}}PU(),PF.exports=ps;var E7=PF.exports,TO=E7;NI.createRoot=TO.createRoot,NI.hydrateRoot=TO.hydrateRoot;var OU={exports:{}},tS,SO;function cf(){if(SO)return tS;SO=1;function o(i){var l=typeof i;return i!=null&&(l=="object"||l=="function")}return tS=o,tS}var nS,wO;function LU(){if(wO)return nS;wO=1;var o=typeof cu=="object"&&cu&&cu.Object===Object&&cu;return nS=o,nS}var rS,AO;function Bu(){if(AO)return rS;AO=1;var o=LU(),i=typeof self=="object"&&self&&self.Object===Object&&self,l=o||i||Function("return this")();return rS=l,rS}var iS,IO;function _7(){if(IO)return iS;IO=1;var o=Bu(),i=function(){return o.Date.now()};return iS=i,iS}var oS,CO;function T7(){if(CO)return oS;CO=1;var o=/\s/;function i(l){for(var d=l.length;d--&&o.test(l.charAt(d)););return d}return oS=i,oS}var aS,bO;function S7(){if(bO)return aS;bO=1;var o=T7(),i=/^\s+/;function l(d){return d&&d.slice(0,o(d)+1).replace(i,"")}return aS=l,aS}var sS,RO;function nm(){if(RO)return sS;RO=1;var o=Bu(),i=o.Symbol;return sS=i,sS}var uS,xO;function w7(){if(xO)return uS;xO=1;var o=nm(),i=Object.prototype,l=i.hasOwnProperty,d=i.toString,m=o?o.toStringTag:void 0;function I(N){var p=l.call(N,m),w=N[m];try{N[m]=void 0;var U=!0}catch(E){}var x=d.call(N);return U&&(p?N[m]=w:delete N[m]),x}return uS=I,uS}var lS,NO;function A7(){if(NO)return lS;NO=1;var o=Object.prototype,i=o.toString;function l(d){return i.call(d)}return lS=l,lS}var cS,MO;function rm(){if(MO)return cS;MO=1;var o=nm(),i=w7(),l=A7(),d="[object Null]",m="[object Undefined]",I=o?o.toStringTag:void 0;function N(p){return p==null?p===void 0?m:d:I&&I in Object(p)?i(p):l(p)}return cS=N,cS}var fS,DO;function _h(){if(DO)return fS;DO=1;function o(i){return i!=null&&typeof i=="object"}return fS=o,fS}var dS,PO;function im(){if(PO)return dS;PO=1;var o=rm(),i=_h(),l="[object Symbol]";function d(m){return typeof m=="symbol"||i(m)&&o(m)==l}return dS=d,dS}var hS,OO;function I7(){if(OO)return hS;OO=1;var o=S7(),i=cf(),l=im(),d=NaN,m=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,N=/^0o[0-7]+$/i,p=parseInt;function w(U){if(typeof U=="number")return U;if(l(U))return d;if(i(U)){var x=typeof U.valueOf=="function"?U.valueOf():U;U=i(x)?x+"":x}if(typeof U!="string")return U===0?U:+U;U=o(U);var E=I.test(U);return E||N.test(U)?p(U.slice(2),E?2:8):m.test(U)?d:+U}return hS=w,hS}var pS,LO;function kU(){if(LO)return pS;LO=1;var o=cf(),i=_7(),l=I7(),d="Expected a function",m=Math.max,I=Math.min;function N(p,w,U){var x,E,y,P,g,T,F=0,M=!1,_=!1,A=!0;if(typeof p!="function")throw new TypeError(d);w=l(w)||0,o(U)&&(M=!!U.leading,_="maxWait"in U,y=_?m(l(U.maxWait)||0,w):y,A="trailing"in U?!!U.trailing:A);function b(oe){var me=x,be=E;return x=E=void 0,F=oe,P=p.apply(be,me),P}function Z(oe){return F=oe,g=setTimeout(Q,w),M?b(oe):P}function Y(oe){var me=oe-T,be=oe-F,Je=w-me;return _?I(Je,y-be):Je}function $(oe){var me=oe-T,be=oe-F;return T===void 0||me>=w||me<0||_&&be>=y}function Q(){var oe=i();if($(oe))return se(oe);g=setTimeout(Q,Y(oe))}function se(oe){return g=void 0,A&&x?b(oe):(x=E=void 0,P)}function C(){g!==void 0&&clearTimeout(g),F=0,x=T=E=g=void 0}function X(){return g===void 0?P:se(i())}function ce(){var oe=i(),me=$(oe);if(x=arguments,E=this,T=oe,me){if(g===void 0)return Z(T);if(_)return clearTimeout(g),g=setTimeout(Q,w),b(T)}return g===void 0&&(g=setTimeout(Q,w)),P}return ce.cancel=C,ce.flush=X,ce}return pS=N,pS}var gS,kO;function FU(){if(kO)return gS;kO=1;var o=rm(),i=cf(),l="[object AsyncFunction]",d="[object Function]",m="[object GeneratorFunction]",I="[object Proxy]";function N(p){if(!i(p))return!1;var w=o(p);return w==d||w==m||w==l||w==I}return gS=N,gS}var mS,FO;function C7(){if(FO)return mS;FO=1;var o=Bu(),i=o["__core-js_shared__"];return mS=i,mS}var vS,UO;function b7(){if(UO)return vS;UO=1;var o=C7(),i=function(){var d=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}();function l(d){return!!i&&i in d}return vS=l,vS}var yS,BO;function UU(){if(BO)return yS;BO=1;var o=Function.prototype,i=o.toString;function l(d){if(d!=null){try{return i.call(d)}catch(m){}try{return d+""}catch(m){}}return""}return yS=l,yS}var ES,jO;function R7(){if(jO)return ES;jO=1;var o=FU(),i=b7(),l=cf(),d=UU(),m=/[\\^$.*+?()[\]{}|]/g,I=/^\[object .+?Constructor\]$/,N=Function.prototype,p=Object.prototype,w=N.toString,U=p.hasOwnProperty,x=RegExp("^"+w.call(U).replace(m,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E(y){if(!l(y)||i(y))return!1;var P=o(y)?x:I;return P.test(d(y))}return ES=E,ES}var _S,ZO;function x7(){if(ZO)return _S;ZO=1;function o(i,l){return i==null?void 0:i[l]}return _S=o,_S}var TS,qO;function ff(){if(qO)return TS;qO=1;var o=R7(),i=x7();function l(d,m){var I=i(d,m);return o(I)?I:void 0}return TS=l,TS}var SS,GO;function yE(){if(GO)return SS;GO=1;var o=ff(),i=o(Object,"create");return SS=i,SS}var wS,HO;function N7(){if(HO)return wS;HO=1;var o=yE();function i(){this.__data__=o?o(null):{},this.size=0}return wS=i,wS}var AS,VO;function M7(){if(VO)return AS;VO=1;function o(i){var l=this.has(i)&&delete this.__data__[i];return this.size-=l?1:0,l}return AS=o,AS}var IS,KO;function D7(){if(KO)return IS;KO=1;var o=yE(),i="__lodash_hash_undefined__",l=Object.prototype,d=l.hasOwnProperty;function m(I){var N=this.__data__;if(o){var p=N[I];return p===i?void 0:p}return d.call(N,I)?N[I]:void 0}return IS=m,IS}var CS,zO;function P7(){if(zO)return CS;zO=1;var o=yE(),i=Object.prototype,l=i.hasOwnProperty;function d(m){var I=this.__data__;return o?I[m]!==void 0:l.call(I,m)}return CS=d,CS}var bS,YO;function O7(){if(YO)return bS;YO=1;var o=yE(),i="__lodash_hash_undefined__";function l(d,m){var I=this.__data__;return this.size+=this.has(d)?0:1,I[d]=o&&m===void 0?i:m,this}return bS=l,bS}var RS,WO;function L7(){if(WO)return RS;WO=1;var o=N7(),i=M7(),l=D7(),d=P7(),m=O7();function I(N){var p=-1,w=N==null?0:N.length;for(this.clear();++p<w;){var U=N[p];this.set(U[0],U[1])}}return I.prototype.clear=o,I.prototype.delete=i,I.prototype.get=l,I.prototype.has=d,I.prototype.set=m,RS=I,RS}var xS,$O;function k7(){if($O)return xS;$O=1;function o(){this.__data__=[],this.size=0}return xS=o,xS}var NS,XO;function Nb(){if(XO)return NS;XO=1;function o(i,l){return i===l||i!==i&&l!==l}return NS=o,NS}var MS,QO;function EE(){if(QO)return MS;QO=1;var o=Nb();function i(l,d){for(var m=l.length;m--;)if(o(l[m][0],d))return m;return-1}return MS=i,MS}var DS,JO;function F7(){if(JO)return DS;JO=1;var o=EE(),i=Array.prototype,l=i.splice;function d(m){var I=this.__data__,N=o(I,m);if(N<0)return!1;var p=I.length-1;return N==p?I.pop():l.call(I,N,1),--this.size,!0}return DS=d,DS}var PS,eL;function U7(){if(eL)return PS;eL=1;var o=EE();function i(l){var d=this.__data__,m=o(d,l);return m<0?void 0:d[m][1]}return PS=i,PS}var OS,tL;function B7(){if(tL)return OS;tL=1;var o=EE();function i(l){return o(this.__data__,l)>-1}return OS=i,OS}var LS,nL;function j7(){if(nL)return LS;nL=1;var o=EE();function i(l,d){var m=this.__data__,I=o(m,l);return I<0?(++this.size,m.push([l,d])):m[I][1]=d,this}return LS=i,LS}var kS,rL;function _E(){if(rL)return kS;rL=1;var o=k7(),i=F7(),l=U7(),d=B7(),m=j7();function I(N){var p=-1,w=N==null?0:N.length;for(this.clear();++p<w;){var U=N[p];this.set(U[0],U[1])}}return I.prototype.clear=o,I.prototype.delete=i,I.prototype.get=l,I.prototype.has=d,I.prototype.set=m,kS=I,kS}var FS,iL;function Mb(){if(iL)return FS;iL=1;var o=ff(),i=Bu(),l=o(i,"Map");return FS=l,FS}var US,oL;function Z7(){if(oL)return US;oL=1;var o=L7(),i=_E(),l=Mb();function d(){this.size=0,this.__data__={hash:new o,map:new(l||i),string:new o}}return US=d,US}var BS,aL;function q7(){if(aL)return BS;aL=1;function o(i){var l=typeof i;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?i!=="__proto__":i===null}return BS=o,BS}var jS,sL;function TE(){if(sL)return jS;sL=1;var o=q7();function i(l,d){var m=l.__data__;return o(d)?m[typeof d=="string"?"string":"hash"]:m.map}return jS=i,jS}var ZS,uL;function G7(){if(uL)return ZS;uL=1;var o=TE();function i(l){var d=o(this,l).delete(l);return this.size-=d?1:0,d}return ZS=i,ZS}var qS,lL;function H7(){if(lL)return qS;lL=1;var o=TE();function i(l){return o(this,l).get(l)}return qS=i,qS}var GS,cL;function V7(){if(cL)return GS;cL=1;var o=TE();function i(l){return o(this,l).has(l)}return GS=i,GS}var HS,fL;function K7(){if(fL)return HS;fL=1;var o=TE();function i(l,d){var m=o(this,l),I=m.size;return m.set(l,d),this.size+=m.size==I?0:1,this}return HS=i,HS}var VS,dL;function Db(){if(dL)return VS;dL=1;var o=Z7(),i=G7(),l=H7(),d=V7(),m=K7();function I(N){var p=-1,w=N==null?0:N.length;for(this.clear();++p<w;){var U=N[p];this.set(U[0],U[1])}}return I.prototype.clear=o,I.prototype.delete=i,I.prototype.get=l,I.prototype.has=d,I.prototype.set=m,VS=I,VS}var KS,hL;function z7(){if(hL)return KS;hL=1;var o="__lodash_hash_undefined__";function i(l){return this.__data__.set(l,o),this}return KS=i,KS}var zS,pL;function Y7(){if(pL)return zS;pL=1;function o(i){return this.__data__.has(i)}return zS=o,zS}var YS,gL;function BU(){if(gL)return YS;gL=1;var o=Db(),i=z7(),l=Y7();function d(m){var I=-1,N=m==null?0:m.length;for(this.__data__=new o;++I<N;)this.add(m[I])}return d.prototype.add=d.prototype.push=i,d.prototype.has=l,YS=d,YS}var WS,mL;function W7(){if(mL)return WS;mL=1;function o(i,l,d,m){for(var I=i.length,N=d+(m?1:-1);m?N--:++N<I;)if(l(i[N],N,i))return N;return-1}return WS=o,WS}var $S,vL;function $7(){if(vL)return $S;vL=1;function o(i){return i!==i}return $S=o,$S}var XS,yL;function X7(){if(yL)return XS;yL=1;function o(i,l,d){for(var m=d-1,I=i.length;++m<I;)if(i[m]===l)return m;return-1}return XS=o,XS}var QS,EL;function Q7(){if(EL)return QS;EL=1;var o=W7(),i=$7(),l=X7();function d(m,I,N){return I===I?l(m,I,N):o(m,i,N)}return QS=d,QS}var JS,_L;function J7(){if(_L)return JS;_L=1;var o=Q7();function i(l,d){var m=l==null?0:l.length;return!!m&&o(l,d,0)>-1}return JS=i,JS}var ew,TL;function eV(){if(TL)return ew;TL=1;function o(i,l,d){for(var m=-1,I=i==null?0:i.length;++m<I;)if(d(l,i[m]))return!0;return!1}return ew=o,ew}var tw,SL;function Pb(){if(SL)return tw;SL=1;function o(i,l){for(var d=-1,m=i==null?0:i.length,I=Array(m);++d<m;)I[d]=l(i[d],d,i);return I}return tw=o,tw}var nw,wL;function Ob(){if(wL)return nw;wL=1;function o(i){return function(l){return i(l)}}return nw=o,nw}var rw,AL;function jU(){if(AL)return rw;AL=1;function o(i,l){return i.has(l)}return rw=o,rw}var iw,IL;function tV(){if(IL)return iw;IL=1;var o=BU(),i=J7(),l=eV(),d=Pb(),m=Ob(),I=jU(),N=200;function p(w,U,x,E){var y=-1,P=i,g=!0,T=w.length,F=[],M=U.length;if(!T)return F;x&&(U=d(U,m(x))),E?(P=l,g=!1):U.length>=N&&(P=I,g=!1,U=new o(U));e:for(;++y<T;){var _=w[y],A=x==null?_:x(_);if(_=E||_!==0?_:0,g&&A===A){for(var b=M;b--;)if(U[b]===A)continue e;F.push(_)}else P(U,A,E)||F.push(_)}return F}return iw=p,iw}var ow,CL;function ZU(){if(CL)return ow;CL=1;function o(i,l){for(var d=-1,m=l.length,I=i.length;++d<m;)i[I+d]=l[d];return i}return ow=o,ow}var aw,bL;function nV(){if(bL)return aw;bL=1;var o=rm(),i=_h(),l="[object Arguments]";function d(m){return i(m)&&o(m)==l}return aw=d,aw}var sw,RL;function Lb(){if(RL)return sw;RL=1;var o=nV(),i=_h(),l=Object.prototype,d=l.hasOwnProperty,m=l.propertyIsEnumerable,I=o(function(){return arguments}())?o:function(N){return i(N)&&d.call(N,"callee")&&!m.call(N,"callee")};return sw=I,sw}var uw,xL;function js(){if(xL)return uw;xL=1;var o=Array.isArray;return uw=o,uw}var lw,NL;function rV(){if(NL)return lw;NL=1;var o=nm(),i=Lb(),l=js(),d=o?o.isConcatSpreadable:void 0;function m(I){return l(I)||i(I)||!!(d&&I&&I[d])}return lw=m,lw}var cw,ML;function qU(){if(ML)return cw;ML=1;var o=ZU(),i=rV();function l(d,m,I,N,p){var w=-1,U=d.length;for(I||(I=i),p||(p=[]);++w<U;){var x=d[w];m>0&&I(x)?m>1?l(x,m-1,I,N,p):o(p,x):N||(p[p.length]=x)}return p}return cw=l,cw}var fw,DL;function om(){if(DL)return fw;DL=1;function o(i){return i}return fw=o,fw}var dw,PL;function iV(){if(PL)return dw;PL=1;function o(i,l,d){switch(d.length){case 0:return i.call(l);case 1:return i.call(l,d[0]);case 2:return i.call(l,d[0],d[1]);case 3:return i.call(l,d[0],d[1],d[2])}return i.apply(l,d)}return dw=o,dw}var hw,OL;function oV(){if(OL)return hw;OL=1;var o=iV(),i=Math.max;function l(d,m,I){return m=i(m===void 0?d.length-1:m,0),function(){for(var N=arguments,p=-1,w=i(N.length-m,0),U=Array(w);++p<w;)U[p]=N[m+p];p=-1;for(var x=Array(m+1);++p<m;)x[p]=N[p];return x[m]=I(U),o(d,this,x)}}return hw=l,hw}var pw,LL;function aV(){if(LL)return pw;LL=1;function o(i){return function(){return i}}return pw=o,pw}var gw,kL;function sV(){if(kL)return gw;kL=1;var o=ff(),i=function(){try{var l=o(Object,"defineProperty");return l({},"",{}),l}catch(d){}}();return gw=i,gw}var mw,FL;function uV(){if(FL)return mw;FL=1;var o=aV(),i=sV(),l=om(),d=i?function(m,I){return i(m,"toString",{configurable:!0,enumerable:!1,value:o(I),writable:!0})}:l;return mw=d,mw}var vw,UL;function lV(){if(UL)return vw;UL=1;var o=800,i=16,l=Date.now;function d(m){var I=0,N=0;return function(){var p=l(),w=i-(p-N);if(N=p,w>0){if(++I>=o)return arguments[0]}else I=0;return m.apply(void 0,arguments)}}return vw=d,vw}var yw,BL;function cV(){if(BL)return yw;BL=1;var o=uV(),i=lV(),l=i(o);return yw=l,yw}var Ew,jL;function GU(){if(jL)return Ew;jL=1;var o=om(),i=oV(),l=cV();function d(m,I){return l(i(m,I,o),m+"")}return Ew=d,Ew}var _w,ZL;function kb(){if(ZL)return _w;ZL=1;var o=9007199254740991;function i(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=o}return _w=i,_w}var Tw,qL;function am(){if(qL)return Tw;qL=1;var o=FU(),i=kb();function l(d){return d!=null&&i(d.length)&&!o(d)}return Tw=l,Tw}var Sw,GL;function fV(){if(GL)return Sw;GL=1;var o=am(),i=_h();function l(d){return i(d)&&o(d)}return Sw=l,Sw}var ww,HL;function dV(){if(HL)return ww;HL=1;var o=tV(),i=qU(),l=GU(),d=fV(),m=l(function(I,N){return d(I)?o(I,i(N,1,d,!0)):[]});return ww=m,ww}var Aw,VL;function HU(){if(VL)return Aw;VL=1;function o(i,l){for(var d=-1,m=i==null?0:i.length,I=0,N=[];++d<m;){var p=i[d];l(p,d,i)&&(N[I++]=p)}return N}return Aw=o,Aw}var Iw,KL;function hV(){if(KL)return Iw;KL=1;function o(i){return function(l,d,m){for(var I=-1,N=Object(l),p=m(l),w=p.length;w--;){var U=p[i?w:++I];if(d(N[U],U,N)===!1)break}return l}}return Iw=o,Iw}var Cw,zL;function pV(){if(zL)return Cw;zL=1;var o=hV(),i=o();return Cw=i,Cw}var bw,YL;function gV(){if(YL)return bw;YL=1;function o(i,l){for(var d=-1,m=Array(i);++d<i;)m[d]=l(d);return m}return bw=o,bw}var vg={exports:{}},Rw,WL;function mV(){if(WL)return Rw;WL=1;function o(){return!1}return Rw=o,Rw}vg.exports;var $L;function VU(){return $L||($L=1,function(o,i){var l=Bu(),d=mV(),m=i&&!i.nodeType&&i,I=m&&!0&&o&&!o.nodeType&&o,N=I&&I.exports===m,p=N?l.Buffer:void 0,w=p?p.isBuffer:void 0,U=w||d;o.exports=U}(vg,vg.exports)),vg.exports}var xw,XL;function Fb(){if(XL)return xw;XL=1;var o=9007199254740991,i=/^(?:0|[1-9]\d*)$/;function l(d,m){var I=typeof d;return m=m==null?o:m,!!m&&(I=="number"||I!="symbol"&&i.test(d))&&d>-1&&d%1==0&&d<m}return xw=l,xw}var Nw,QL;function vV(){if(QL)return Nw;QL=1;var o=rm(),i=kb(),l=_h(),d="[object Arguments]",m="[object Array]",I="[object Boolean]",N="[object Date]",p="[object Error]",w="[object Function]",U="[object Map]",x="[object Number]",E="[object Object]",y="[object RegExp]",P="[object Set]",g="[object String]",T="[object WeakMap]",F="[object ArrayBuffer]",M="[object DataView]",_="[object Float32Array]",A="[object Float64Array]",b="[object Int8Array]",Z="[object Int16Array]",Y="[object Int32Array]",$="[object Uint8Array]",Q="[object Uint8ClampedArray]",se="[object Uint16Array]",C="[object Uint32Array]",X={};X[_]=X[A]=X[b]=X[Z]=X[Y]=X[$]=X[Q]=X[se]=X[C]=!0,X[d]=X[m]=X[F]=X[I]=X[M]=X[N]=X[p]=X[w]=X[U]=X[x]=X[E]=X[y]=X[P]=X[g]=X[T]=!1;function ce(oe){return l(oe)&&i(oe.length)&&!!X[o(oe)]}return Nw=ce,Nw}var yg={exports:{}};yg.exports;var JL;function yV(){return JL||(JL=1,function(o,i){var l=LU(),d=i&&!i.nodeType&&i,m=d&&!0&&o&&!o.nodeType&&o,I=m&&m.exports===d,N=I&&l.process,p=function(){try{var w=m&&m.require&&m.require("util").types;return w||N&&N.binding&&N.binding("util")}catch(U){}}();o.exports=p}(yg,yg.exports)),yg.exports}var Mw,ek;function KU(){if(ek)return Mw;ek=1;var o=vV(),i=Ob(),l=yV(),d=l&&l.isTypedArray,m=d?i(d):o;return Mw=m,Mw}var Dw,tk;function EV(){if(tk)return Dw;tk=1;var o=gV(),i=Lb(),l=js(),d=VU(),m=Fb(),I=KU(),N=Object.prototype,p=N.hasOwnProperty;function w(U,x){var E=l(U),y=!E&&i(U),P=!E&&!y&&d(U),g=!E&&!y&&!P&&I(U),T=E||y||P||g,F=T?o(U.length,String):[],M=F.length;for(var _ in U)(x||p.call(U,_))&&!(T&&(_=="length"||P&&(_=="offset"||_=="parent")||g&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||m(_,M)))&&F.push(_);return F}return Dw=w,Dw}var Pw,nk;function _V(){if(nk)return Pw;nk=1;var o=Object.prototype;function i(l){var d=l&&l.constructor,m=typeof d=="function"&&d.prototype||o;return l===m}return Pw=i,Pw}var Ow,rk;function TV(){if(rk)return Ow;rk=1;function o(i,l){return function(d){return i(l(d))}}return Ow=o,Ow}var Lw,ik;function SV(){if(ik)return Lw;ik=1;var o=TV(),i=o(Object.keys,Object);return Lw=i,Lw}var kw,ok;function wV(){if(ok)return kw;ok=1;var o=_V(),i=SV(),l=Object.prototype,d=l.hasOwnProperty;function m(I){if(!o(I))return i(I);var N=[];for(var p in Object(I))d.call(I,p)&&p!="constructor"&&N.push(p);return N}return kw=m,kw}var Fw,ak;function Ub(){if(ak)return Fw;ak=1;var o=EV(),i=wV(),l=am();function d(m){return l(m)?o(m):i(m)}return Fw=d,Fw}var Uw,sk;function Bb(){if(sk)return Uw;sk=1;var o=pV(),i=Ub();function l(d,m){return d&&o(d,m,i)}return Uw=l,Uw}var Bw,uk;function AV(){if(uk)return Bw;uk=1;var o=am();function i(l,d){return function(m,I){if(m==null)return m;if(!o(m))return l(m,I);for(var N=m.length,p=d?N:-1,w=Object(m);(d?p--:++p<N)&&I(w[p],p,w)!==!1;);return m}}return Bw=i,Bw}var jw,lk;function jb(){if(lk)return jw;lk=1;var o=Bb(),i=AV(),l=i(o);return jw=l,jw}var Zw,ck;function IV(){if(ck)return Zw;ck=1;var o=jb();function i(l,d){var m=[];return o(l,function(I,N,p){d(I,N,p)&&m.push(I)}),m}return Zw=i,Zw}var qw,fk;function CV(){if(fk)return qw;fk=1;var o=_E();function i(){this.__data__=new o,this.size=0}return qw=i,qw}var Gw,dk;function bV(){if(dk)return Gw;dk=1;function o(i){var l=this.__data__,d=l.delete(i);return this.size=l.size,d}return Gw=o,Gw}var Hw,hk;function RV(){if(hk)return Hw;hk=1;function o(i){return this.__data__.get(i)}return Hw=o,Hw}var Vw,pk;function xV(){if(pk)return Vw;pk=1;function o(i){return this.__data__.has(i)}return Vw=o,Vw}var Kw,gk;function NV(){if(gk)return Kw;gk=1;var o=_E(),i=Mb(),l=Db(),d=200;function m(I,N){var p=this.__data__;if(p instanceof o){var w=p.__data__;if(!i||w.length<d-1)return w.push([I,N]),this.size=++p.size,this;p=this.__data__=new l(w)}return p.set(I,N),this.size=p.size,this}return Kw=m,Kw}var zw,mk;function zU(){if(mk)return zw;mk=1;var o=_E(),i=CV(),l=bV(),d=RV(),m=xV(),I=NV();function N(p){var w=this.__data__=new o(p);this.size=w.size}return N.prototype.clear=i,N.prototype.delete=l,N.prototype.get=d,N.prototype.has=m,N.prototype.set=I,zw=N,zw}var Yw,vk;function MV(){if(vk)return Yw;vk=1;function o(i,l){for(var d=-1,m=i==null?0:i.length;++d<m;)if(l(i[d],d,i))return!0;return!1}return Yw=o,Yw}var Ww,yk;function YU(){if(yk)return Ww;yk=1;var o=BU(),i=MV(),l=jU(),d=1,m=2;function I(N,p,w,U,x,E){var y=w&d,P=N.length,g=p.length;if(P!=g&&!(y&&g>P))return!1;var T=E.get(N),F=E.get(p);if(T&&F)return T==p&&F==N;var M=-1,_=!0,A=w&m?new o:void 0;for(E.set(N,p),E.set(p,N);++M<P;){var b=N[M],Z=p[M];if(U)var Y=y?U(Z,b,M,p,N,E):U(b,Z,M,N,p,E);if(Y!==void 0){if(Y)continue;_=!1;break}if(A){if(!i(p,function($,Q){if(!l(A,Q)&&(b===$||x(b,$,w,U,E)))return A.push(Q)})){_=!1;break}}else if(!(b===Z||x(b,Z,w,U,E))){_=!1;break}}return E.delete(N),E.delete(p),_}return Ww=I,Ww}var $w,Ek;function DV(){if(Ek)return $w;Ek=1;var o=Bu(),i=o.Uint8Array;return $w=i,$w}var Xw,_k;function PV(){if(_k)return Xw;_k=1;function o(i){var l=-1,d=Array(i.size);return i.forEach(function(m,I){d[++l]=[I,m]}),d}return Xw=o,Xw}var Qw,Tk;function OV(){if(Tk)return Qw;Tk=1;function o(i){var l=-1,d=Array(i.size);return i.forEach(function(m){d[++l]=m}),d}return Qw=o,Qw}var Jw,Sk;function LV(){if(Sk)return Jw;Sk=1;var o=nm(),i=DV(),l=Nb(),d=YU(),m=PV(),I=OV(),N=1,p=2,w="[object Boolean]",U="[object Date]",x="[object Error]",E="[object Map]",y="[object Number]",P="[object RegExp]",g="[object Set]",T="[object String]",F="[object Symbol]",M="[object ArrayBuffer]",_="[object DataView]",A=o?o.prototype:void 0,b=A?A.valueOf:void 0;function Z(Y,$,Q,se,C,X,ce){switch(Q){case _:if(Y.byteLength!=$.byteLength||Y.byteOffset!=$.byteOffset)return!1;Y=Y.buffer,$=$.buffer;case M:return!(Y.byteLength!=$.byteLength||!X(new i(Y),new i($)));case w:case U:case y:return l(+Y,+$);case x:return Y.name==$.name&&Y.message==$.message;case P:case T:return Y==$+"";case E:var oe=m;case g:var me=se&N;if(oe||(oe=I),Y.size!=$.size&&!me)return!1;var be=ce.get(Y);if(be)return be==$;se|=p,ce.set(Y,$);var Je=d(oe(Y),oe($),se,C,X,ce);return ce.delete(Y),Je;case F:if(b)return b.call(Y)==b.call($)}return!1}return Jw=Z,Jw}var eA,wk;function kV(){if(wk)return eA;wk=1;var o=ZU(),i=js();function l(d,m,I){var N=m(d);return i(d)?N:o(N,I(d))}return eA=l,eA}var tA,Ak;function FV(){if(Ak)return tA;Ak=1;function o(){return[]}return tA=o,tA}var nA,Ik;function UV(){if(Ik)return nA;Ik=1;var o=HU(),i=FV(),l=Object.prototype,d=l.propertyIsEnumerable,m=Object.getOwnPropertySymbols,I=m?function(N){return N==null?[]:(N=Object(N),o(m(N),function(p){return d.call(N,p)}))}:i;return nA=I,nA}var rA,Ck;function BV(){if(Ck)return rA;Ck=1;var o=kV(),i=UV(),l=Ub();function d(m){return o(m,l,i)}return rA=d,rA}var iA,bk;function jV(){if(bk)return iA;bk=1;var o=BV(),i=1,l=Object.prototype,d=l.hasOwnProperty;function m(I,N,p,w,U,x){var E=p&i,y=o(I),P=y.length,g=o(N),T=g.length;if(P!=T&&!E)return!1;for(var F=P;F--;){var M=y[F];if(!(E?M in N:d.call(N,M)))return!1}var _=x.get(I),A=x.get(N);if(_&&A)return _==N&&A==I;var b=!0;x.set(I,N),x.set(N,I);for(var Z=E;++F<P;){M=y[F];var Y=I[M],$=N[M];if(w)var Q=E?w($,Y,M,N,I,x):w(Y,$,M,I,N,x);if(!(Q===void 0?Y===$||U(Y,$,p,w,x):Q)){b=!1;break}Z||(Z=M=="constructor")}if(b&&!Z){var se=I.constructor,C=N.constructor;se!=C&&"constructor"in I&&"constructor"in N&&!(typeof se=="function"&&se instanceof se&&typeof C=="function"&&C instanceof C)&&(b=!1)}return x.delete(I),x.delete(N),b}return iA=m,iA}var oA,Rk;function ZV(){if(Rk)return oA;Rk=1;var o=ff(),i=Bu(),l=o(i,"DataView");return oA=l,oA}var aA,xk;function qV(){if(xk)return aA;xk=1;var o=ff(),i=Bu(),l=o(i,"Promise");return aA=l,aA}var sA,Nk;function GV(){if(Nk)return sA;Nk=1;var o=ff(),i=Bu(),l=o(i,"Set");return sA=l,sA}var uA,Mk;function HV(){if(Mk)return uA;Mk=1;var o=ff(),i=Bu(),l=o(i,"WeakMap");return uA=l,uA}var lA,Dk;function VV(){if(Dk)return lA;Dk=1;var o=ZV(),i=Mb(),l=qV(),d=GV(),m=HV(),I=rm(),N=UU(),p="[object Map]",w="[object Object]",U="[object Promise]",x="[object Set]",E="[object WeakMap]",y="[object DataView]",P=N(o),g=N(i),T=N(l),F=N(d),M=N(m),_=I;return(o&&_(new o(new ArrayBuffer(1)))!=y||i&&_(new i)!=p||l&&_(l.resolve())!=U||d&&_(new d)!=x||m&&_(new m)!=E)&&(_=function(A){var b=I(A),Z=b==w?A.constructor:void 0,Y=Z?N(Z):"";if(Y)switch(Y){case P:return y;case g:return p;case T:return U;case F:return x;case M:return E}return b}),lA=_,lA}var cA,Pk;function KV(){if(Pk)return cA;Pk=1;var o=zU(),i=YU(),l=LV(),d=jV(),m=VV(),I=js(),N=VU(),p=KU(),w=1,U="[object Arguments]",x="[object Array]",E="[object Object]",y=Object.prototype,P=y.hasOwnProperty;function g(T,F,M,_,A,b){var Z=I(T),Y=I(F),$=Z?x:m(T),Q=Y?x:m(F);$=$==U?E:$,Q=Q==U?E:Q;var se=$==E,C=Q==E,X=$==Q;if(X&&N(T)){if(!N(F))return!1;Z=!0,se=!1}if(X&&!se)return b||(b=new o),Z||p(T)?i(T,F,M,_,A,b):l(T,F,$,M,_,A,b);if(!(M&w)){var ce=se&&P.call(T,"__wrapped__"),oe=C&&P.call(F,"__wrapped__");if(ce||oe){var me=ce?T.value():T,be=oe?F.value():F;return b||(b=new o),A(me,be,M,_,b)}}return X?(b||(b=new o),d(T,F,M,_,A,b)):!1}return cA=g,cA}var fA,Ok;function WU(){if(Ok)return fA;Ok=1;var o=KV(),i=_h();function l(d,m,I,N,p){return d===m?!0:d==null||m==null||!i(d)&&!i(m)?d!==d&&m!==m:o(d,m,I,N,l,p)}return fA=l,fA}var dA,Lk;function zV(){if(Lk)return dA;Lk=1;var o=zU(),i=WU(),l=1,d=2;function m(I,N,p,w){var U=p.length,x=U,E=!w;if(I==null)return!x;for(I=Object(I);U--;){var y=p[U];if(E&&y[2]?y[1]!==I[y[0]]:!(y[0]in I))return!1}for(;++U<x;){y=p[U];var P=y[0],g=I[P],T=y[1];if(E&&y[2]){if(g===void 0&&!(P in I))return!1}else{var F=new o;if(w)var M=w(g,T,P,I,N,F);if(!(M===void 0?i(T,g,l|d,w,F):M))return!1}}return!0}return dA=m,dA}var hA,kk;function $U(){if(kk)return hA;kk=1;var o=cf();function i(l){return l===l&&!o(l)}return hA=i,hA}var pA,Fk;function YV(){if(Fk)return pA;Fk=1;var o=$U(),i=Ub();function l(d){for(var m=i(d),I=m.length;I--;){var N=m[I],p=d[N];m[I]=[N,p,o(p)]}return m}return pA=l,pA}var gA,Uk;function XU(){if(Uk)return gA;Uk=1;function o(i,l){return function(d){return d==null?!1:d[i]===l&&(l!==void 0||i in Object(d))}}return gA=o,gA}var mA,Bk;function WV(){if(Bk)return mA;Bk=1;var o=zV(),i=YV(),l=XU();function d(m){var I=i(m);return I.length==1&&I[0][2]?l(I[0][0],I[0][1]):function(N){return N===m||o(N,m,I)}}return mA=d,mA}var vA,jk;function Zb(){if(jk)return vA;jk=1;var o=js(),i=im(),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function m(I,N){if(o(I))return!1;var p=typeof I;return p=="number"||p=="symbol"||p=="boolean"||I==null||i(I)?!0:d.test(I)||!l.test(I)||N!=null&&I in Object(N)}return vA=m,vA}var yA,Zk;function $V(){if(Zk)return yA;Zk=1;var o=Db(),i="Expected a function";function l(d,m){if(typeof d!="function"||m!=null&&typeof m!="function")throw new TypeError(i);var I=function(){var N=arguments,p=m?m.apply(this,N):N[0],w=I.cache;if(w.has(p))return w.get(p);var U=d.apply(this,N);return I.cache=w.set(p,U)||w,U};return I.cache=new(l.Cache||o),I}return l.Cache=o,yA=l,yA}var EA,qk;function XV(){if(qk)return EA;qk=1;var o=$V(),i=500;function l(d){var m=o(d,function(N){return I.size===i&&I.clear(),N}),I=m.cache;return m}return EA=l,EA}var _A,Gk;function QV(){if(Gk)return _A;Gk=1;var o=XV(),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,d=o(function(m){var I=[];return m.charCodeAt(0)===46&&I.push(""),m.replace(i,function(N,p,w,U){I.push(w?U.replace(l,"$1"):p||N)}),I});return _A=d,_A}var TA,Hk;function JV(){if(Hk)return TA;Hk=1;var o=nm(),i=Pb(),l=js(),d=im(),m=1/0,I=o?o.prototype:void 0,N=I?I.toString:void 0;function p(w){if(typeof w=="string")return w;if(l(w))return i(w,p)+"";if(d(w))return N?N.call(w):"";var U=w+"";return U=="0"&&1/w==-m?"-0":U}return TA=p,TA}var SA,Vk;function QU(){if(Vk)return SA;Vk=1;var o=JV();function i(l){return l==null?"":o(l)}return SA=i,SA}var wA,Kk;function JU(){if(Kk)return wA;Kk=1;var o=js(),i=Zb(),l=QV(),d=QU();function m(I,N){return o(I)?I:i(I,N)?[I]:l(d(I))}return wA=m,wA}var AA,zk;function SE(){if(zk)return AA;zk=1;var o=im(),i=1/0;function l(d){if(typeof d=="string"||o(d))return d;var m=d+"";return m=="0"&&1/d==-i?"-0":m}return AA=l,AA}var IA,Yk;function qb(){if(Yk)return IA;Yk=1;var o=JU(),i=SE();function l(d,m){m=o(m,d);for(var I=0,N=m.length;d!=null&&I<N;)d=d[i(m[I++])];return I&&I==N?d:void 0}return IA=l,IA}var CA,Wk;function eK(){if(Wk)return CA;Wk=1;var o=qb();function i(l,d,m){var I=l==null?void 0:o(l,d);return I===void 0?m:I}return CA=i,CA}var bA,$k;function tK(){if($k)return bA;$k=1;function o(i,l){return i!=null&&l in Object(i)}return bA=o,bA}var RA,Xk;function nK(){if(Xk)return RA;Xk=1;var o=JU(),i=Lb(),l=js(),d=Fb(),m=kb(),I=SE();function N(p,w,U){w=o(w,p);for(var x=-1,E=w.length,y=!1;++x<E;){var P=I(w[x]);if(!(y=p!=null&&U(p,P)))break;p=p[P]}return y||++x!=E?y:(E=p==null?0:p.length,!!E&&m(E)&&d(P,E)&&(l(p)||i(p)))}return RA=N,RA}var xA,Qk;function rK(){if(Qk)return xA;Qk=1;var o=tK(),i=nK();function l(d,m){return d!=null&&i(d,m,o)}return xA=l,xA}var NA,Jk;function iK(){if(Jk)return NA;Jk=1;var o=WU(),i=eK(),l=rK(),d=Zb(),m=$U(),I=XU(),N=SE(),p=1,w=2;function U(x,E){return d(x)&&m(E)?I(N(x),E):function(y){var P=i(y,x);return P===void 0&&P===E?l(y,x):o(E,P,p|w)}}return NA=U,NA}var MA,e3;function oK(){if(e3)return MA;e3=1;function o(i){return function(l){return l==null?void 0:l[i]}}return MA=o,MA}var DA,t3;function aK(){if(t3)return DA;t3=1;var o=qb();function i(l){return function(d){return o(d,l)}}return DA=i,DA}var PA,n3;function sK(){if(n3)return PA;n3=1;var o=oK(),i=aK(),l=Zb(),d=SE();function m(I){return l(I)?o(d(I)):i(I)}return PA=m,PA}var OA,r3;function Gb(){if(r3)return OA;r3=1;var o=WV(),i=iK(),l=om(),d=js(),m=sK();function I(N){return typeof N=="function"?N:N==null?l:typeof N=="object"?d(N)?i(N[0],N[1]):o(N):m(N)}return OA=I,OA}var LA,i3;function uK(){if(i3)return LA;i3=1;var o=HU(),i=IV(),l=Gb(),d=js();function m(I,N){var p=d(I)?o:i;return p(I,l(N,3))}return LA=m,LA}var kA,o3;function lK(){if(o3)return kA;o3=1;function o(i,l,d){var m;return d(i,function(I,N,p){if(l(I,N,p))return m=N,!1}),m}return kA=o,kA}var FA,a3;function cK(){if(a3)return FA;a3=1;var o=lK(),i=Bb(),l=Gb();function d(m,I){return o(m,l(I,3),i)}return FA=d,FA}var UA,s3;function fK(){if(s3)return UA;s3=1;function o(i){return i&&i.length?i[0]:void 0}return UA=o,UA}var BA,u3;function dK(){return u3||(u3=1,BA=fK()),BA}var jA,l3;function hK(){if(l3)return jA;l3=1;function o(i,l){for(var d=-1,m=i==null?0:i.length;++d<m&&l(i[d],d,i)!==!1;);return i}return jA=o,jA}var ZA,c3;function eB(){if(c3)return ZA;c3=1;var o=om();function i(l){return typeof l=="function"?l:o}return ZA=i,ZA}var qA,f3;function pK(){if(f3)return qA;f3=1;var o=hK(),i=jb(),l=eB(),d=js();function m(I,N){var p=d(I)?o:i;return p(I,l(N))}return qA=m,qA}var GA,d3;function gK(){if(d3)return GA;d3=1;var o=Bb(),i=eB();function l(d,m){return d&&o(d,i(m))}return GA=l,GA}var HA,h3;function mK(){if(h3)return HA;h3=1;function o(){}return HA=o,HA}var VA,p3;function vK(){if(p3)return VA;p3=1;var o=jb(),i=am();function l(d,m){var I=-1,N=i(d)?Array(d.length):[];return o(d,function(p,w,U){N[++I]=m(p,w,U)}),N}return VA=l,VA}var KA,g3;function yK(){if(g3)return KA;g3=1;function o(i,l){var d=i.length;for(i.sort(l);d--;)i[d]=i[d].value;return i}return KA=o,KA}var zA,m3;function EK(){if(m3)return zA;m3=1;var o=im();function i(l,d){if(l!==d){var m=l!==void 0,I=l===null,N=l===l,p=o(l),w=d!==void 0,U=d===null,x=d===d,E=o(d);if(!U&&!E&&!p&&l>d||p&&w&&x&&!U&&!E||I&&w&&x||!m&&x||!N)return 1;if(!I&&!p&&!E&&l<d||E&&m&&N&&!I&&!p||U&&m&&N||!w&&N||!x)return-1}return 0}return zA=i,zA}var YA,v3;function _K(){if(v3)return YA;v3=1;var o=EK();function i(l,d,m){for(var I=-1,N=l.criteria,p=d.criteria,w=N.length,U=m.length;++I<w;){var x=o(N[I],p[I]);if(x){if(I>=U)return x;var E=m[I];return x*(E=="desc"?-1:1)}}return l.index-d.index}return YA=i,YA}var WA,y3;function TK(){if(y3)return WA;y3=1;var o=Pb(),i=qb(),l=Gb(),d=vK(),m=yK(),I=Ob(),N=_K(),p=om(),w=js();function U(x,E,y){E.length?E=o(E,function(T){return w(T)?function(F){return i(F,T.length===1?T[0]:T)}:T}):E=[p];var P=-1;E=o(E,I(l));var g=d(x,function(T,F,M){var _=o(E,function(A){return A(T)});return{criteria:_,index:++P,value:T}});return m(g,function(T,F){return N(T,F,y)})}return WA=U,WA}var $A,E3;function SK(){if(E3)return $A;E3=1;var o=Nb(),i=am(),l=Fb(),d=cf();function m(I,N,p){if(!d(p))return!1;var w=typeof N;return(w=="number"?i(p)&&l(N,p.length):w=="string"&&N in p)?o(p[N],I):!1}return $A=m,$A}var XA,_3;function wK(){if(_3)return XA;_3=1;var o=qU(),i=TK(),l=GU(),d=SK(),m=l(function(I,N){if(I==null)return[];var p=N.length;return p>1&&d(I,N[0],N[1])?N=[]:p>2&&d(N[0],N[1],N[2])&&(N=[N[0]]),i(I,o(N,1),[])});return XA=m,XA}var QA,T3;function AK(){if(T3)return QA;T3=1;var o=kU(),i=cf(),l="Expected a function";function d(m,I,N){var p=!0,w=!0;if(typeof m!="function")throw new TypeError(l);return i(N)&&(p="leading"in N?!!N.leading:p,w="trailing"in N?!!N.trailing:w),o(m,I,{leading:p,maxWait:I,trailing:w})}return QA=d,QA}var JA,S3;function IK(){if(S3)return JA;S3=1;var o=QU(),i=0;function l(d){var m=++i;return o(d)+m}return JA=l,JA}(function(o,i){(function(l,d){o.exports=d(kU(),dV(),uK(),cK(),dK(),pK(),gK(),mK(),wK(),AK(),IK(),nE())})(cu,function(l,d,m,I,N,p,w,U,x,E,y,P){return function(){var g={654:function(F,M,_){var A,b=this&&this.__assign||function(){return b=Object.assign||function(Ne){for(var ne,Be=1,L=arguments.length;Be<L;Be++)for(var D in ne=arguments[Be])Object.prototype.hasOwnProperty.call(ne,D)&&(Ne[D]=ne[D]);return Ne},b.apply(this,arguments)},Z=this&&this.__createBinding||(Object.create?function(Ne,ne,Be,L){L===void 0&&(L=Be);var D=Object.getOwnPropertyDescriptor(ne,Be);D&&!("get"in D?!ne.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return ne[Be]}}),Object.defineProperty(Ne,L,D)}:function(Ne,ne,Be,L){L===void 0&&(L=Be),Ne[L]=ne[Be]}),Y=this&&this.__setModuleDefault||(Object.create?function(Ne,ne){Object.defineProperty(Ne,"default",{enumerable:!0,value:ne})}:function(Ne,ne){Ne.default=ne}),$=this&&this.__importStar||function(Ne){if(Ne&&Ne.__esModule)return Ne;var ne={};if(Ne!=null)for(var Be in Ne)Be!=="default"&&Object.prototype.hasOwnProperty.call(Ne,Be)&&Z(ne,Ne,Be);return Y(ne,Ne),ne},Q=this&&this.__spreadArray||function(Ne,ne,Be){if(Be||arguments.length===2)for(var L,D=0,G=ne.length;D<G;D++)!L&&D in ne||(L||(L=Array.prototype.slice.call(ne,0,D)),L[D]=ne[D]);return Ne.concat(L||Array.prototype.slice.call(ne))},se=this&&this.__importDefault||function(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}};Object.defineProperty(M,"__esModule",{value:!0}),M.doesFocusableExist=M.getCurrentFocusKey=M.updateAllLayouts=M.resume=M.pause=M.navigateByDirection=M.setFocus=M.setKeyMap=M.destroy=M.setThrottle=M.init=M.SpatialNavigation=M.ROOT_FOCUS_KEY=void 0;var C=se(_(150)),X=se(_(117)),ce=se(_(747)),oe=se(_(23)),me=se(_(842)),be=se(_(682)),Je=se(_(784)),we=se(_(432)),qe=se(_(67)),st=se(_(35)),ft=se(_(119)),Ce=$(_(964)),He="left",vt="right",Re="up",Ye="down",ot="enter",Ht=((A={}).left=[37,"ArrowLeft"],A.up=[38,"ArrowUp"],A.right=[39,"ArrowRight"],A.down=[40,"ArrowDown"],A.enter=[13,"Enter"],A);M.ROOT_FOCUS_KEY="SN:ROOT";var Bt=["#0FF","#FF0","#F0F"],Et={leading:!0,trailing:!1},Dt=function(){function Ne(){this.focusableComponents={},this.focusKey=null,this.parentsHavingFocusedChild=[],this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.useGetBoundingClientRect=!1,this.shouldFocusDOMNode=!1,this.shouldUseNativeEvents=!1,this.writingDirection=ft.default.LTR,this.pressedKeys={},this.paused=!1,this.keyDownEventListener=null,this.keyUpEventListener=null,this.keyMap=Ht,this.onKeyEvent=this.onKeyEvent.bind(this),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.setFocus=this.setFocus.bind(this),this.updateAllLayouts=this.updateAllLayouts.bind(this),this.navigateByDirection=this.navigateByDirection.bind(this),this.init=this.init.bind(this),this.setThrottle=this.setThrottle.bind(this),this.destroy=this.destroy.bind(this),this.setKeyMap=this.setKeyMap.bind(this),this.getCurrentFocusKey=this.getCurrentFocusKey.bind(this),this.doesFocusableExist=this.doesFocusableExist.bind(this),this.setFocusDebounced=(0,C.default)(this.setFocus,300,{leading:!1,trailing:!0}),this.debug=!1,this.visualDebugger=null,this.logIndex=0}return Ne.getCutoffCoordinate=function(ne,Be,L,D,G){var K=ne?D.top:G===ft.default.LTR?D.left:D.right,ge=ne?D.bottom:G===ft.default.LTR?D.right:D.left;return Be?L?K:ge:L?ge:K},Ne.getRefCorners=function(ne,Be,L){var D={a:{x:0,y:0},b:{x:0,y:0}};switch(ne){case Re:var G=Be?L.bottom:L.top;D.a={x:L.left,y:G},D.b={x:L.right,y:G};break;case Ye:G=Be?L.top:L.bottom,D.a={x:L.left,y:G},D.b={x:L.right,y:G};break;case He:var K=Be?L.right:L.left;D.a={x:K,y:L.top},D.b={x:K,y:L.bottom};break;case vt:K=Be?L.left:L.right,D.a={x:K,y:L.top},D.b={x:K,y:L.bottom}}return D},Ne.isAdjacentSlice=function(ne,Be,L){var D=ne.a,G=ne.b,K=Be.a,ge=Be.b,pe=L?"x":"y",Ke=D[pe],wt=G[pe],lt=K[pe],ut=ge[pe],nt=.2*(wt-Ke);return Math.max(0,Math.min(wt,ut)-Math.max(Ke,lt))>=nt},Ne.getPrimaryAxisDistance=function(ne,Be,L){var D=ne.a,G=Be.a,K=L?"y":"x";return Math.abs(G[K]-D[K])},Ne.getSecondaryAxisDistance=function(ne,Be,L){var D=ne.a,G=ne.b,K=Be.a,ge=Be.b,pe=L?"x":"y",Ke=D[pe],wt=G[pe],lt=K[pe],ut=ge[pe],nt=[];return nt.push(Math.abs(lt-Ke)),nt.push(Math.abs(lt-wt)),nt.push(Math.abs(ut-Ke)),nt.push(Math.abs(ut-wt)),Math.min.apply(Math,nt)},Ne.prototype.sortSiblingsByPriority=function(ne,Be,L,D){var G=this,K=L===Ye||L===Re,ge=Ne.getRefCorners(L,!1,Be);return(0,we.default)(ne,function(pe){var Ke=Ne.getRefCorners(L,!0,pe.layout),wt=Ne.isAdjacentSlice(ge,Ke,K),lt=wt?Ne.getPrimaryAxisDistance:Ne.getSecondaryAxisDistance,ut=wt?Ne.getSecondaryAxisDistance:Ne.getPrimaryAxisDistance,nt=lt(ge,Ke,K),ht=ut(ge,Ke,K),_t=5*nt+ht,Tt=(_t+1)/(wt?5:1);return G.log("smartNavigate","distance (primary, secondary, total weighted) for ".concat(pe.focusKey," relative to ").concat(D," is"),nt,ht,_t),G.log("smartNavigate","priority for ".concat(pe.focusKey," relative to ").concat(D," is"),Tt),G.visualDebugger&&(G.visualDebugger.drawPoint(Ke.a.x,Ke.a.y,"yellow",6),G.visualDebugger.drawPoint(Ke.b.x,Ke.b.y,"yellow",6)),Tt})},Ne.prototype.init=function(ne){var Be=ne===void 0?{}:ne,L=Be.debug,D=L!==void 0&&L,G=Be.visualDebug,K=G!==void 0&&G,ge=Be.nativeMode,pe=ge!==void 0&&ge,Ke=Be.throttle,wt=Ke===void 0?0:Ke,lt=Be.throttleKeypresses,ut=lt!==void 0&&lt,nt=Be.useGetBoundingClientRect,ht=nt!==void 0&&nt,_t=Be.shouldFocusDOMNode,Tt=_t!==void 0&&_t,Mt=Be.shouldUseNativeEvents,_n=Mt!==void 0&&Mt,rn=Be.rtl,cn=rn!==void 0&&rn;this.enabled||(this.enabled=!0,this.nativeMode=pe,this.throttleKeypresses=ut,this.useGetBoundingClientRect=ht,this.shouldFocusDOMNode=Tt&&!pe,this.shouldUseNativeEvents=_n,this.writingDirection=cn?ft.default.RTL:ft.default.LTR,this.debug=D,this.nativeMode||(Number.isInteger(wt)&&wt>0&&(this.throttle=wt),this.bindEventHandlers(),K&&(this.visualDebugger=new st.default(this.writingDirection),this.startDrawLayouts())))},Ne.prototype.setThrottle=function(ne){var Be=ne===void 0?{}:ne,L=Be.throttle,D=L===void 0?0:L,G=Be.throttleKeypresses,K=G!==void 0&&G;this.throttleKeypresses=K,this.nativeMode||(this.unbindEventHandlers(),Number.isInteger(D)&&(this.throttle=D),this.bindEventHandlers())},Ne.prototype.startDrawLayouts=function(){var ne=this,Be=function(){requestAnimationFrame(function(){ne.visualDebugger.clearLayouts(),(0,Je.default)(ne.focusableComponents,function(L,D){ne.visualDebugger.drawLayout(L.layout,D,L.parentFocusKey)}),Be()})};Be()},Ne.prototype.destroy=function(){this.enabled&&(this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.focusKey=null,this.parentsHavingFocusedChild=[],this.focusableComponents={},this.paused=!1,this.keyMap=Ht,this.unbindEventHandlers())},Ne.prototype.getEventType=function(ne){return(0,oe.default)(this.getKeyMap(),function(Be){return Be.includes(ne)})},Ne.getKeyCode=function(ne){return ne.keyCode||ne.code},Ne.prototype.bindEventHandlers=function(){var ne=this;typeof window<"u"&&window.addEventListener&&(this.keyDownEventListener=function(Be){if(ne.paused!==!0){ne.debug&&(ne.logIndex+=1);var L=Ne.getKeyCode(Be),D=ne.getEventType(L);if(D){ne.pressedKeys[D]=ne.pressedKeys[D]?ne.pressedKeys[D]+1:1,ne.shouldUseNativeEvents||(Be.preventDefault(),Be.stopPropagation());var G={pressedKeys:ne.pressedKeys};D===ot&&ne.focusKey?ne.onEnterPress(G):ne.onArrowPress(D,G)===!1?(ne.log("keyDownEventListener","default navigation prevented"),ne.visualDebugger&&ne.visualDebugger.clear()):ne.onKeyEvent(Be)}}},this.throttle&&(this.keyDownEventListenerThrottled=(0,qe.default)(this.keyDownEventListener.bind(this),this.throttle,Et)),this.keyUpEventListener=function(Be){var L=Ne.getKeyCode(Be),D=ne.getEventType(L);delete ne.pressedKeys[D],ne.throttle&&!ne.throttleKeypresses&&ne.keyDownEventListenerThrottled.cancel(),D===ot&&ne.focusKey&&ne.onEnterRelease()},window.addEventListener("keyup",this.keyUpEventListener),window.addEventListener("keydown",this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener))},Ne.prototype.unbindEventHandlers=function(){if(typeof window<"u"&&window.removeEventListener){window.removeEventListener("keyup",this.keyUpEventListener),this.keyUpEventListener=null;var ne=this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener;window.removeEventListener("keydown",ne),this.keyDownEventListener=null}},Ne.prototype.onEnterPress=function(ne){var Be=this.focusableComponents[this.focusKey];Be?Be.focusable?Be.onEnterPress&&Be.onEnterPress(ne):this.log("onEnterPress","componentNotFocusable"):this.log("onEnterPress","noComponent")},Ne.prototype.onEnterRelease=function(){var ne=this.focusableComponents[this.focusKey];ne?ne.focusable?ne.onEnterRelease&&ne.onEnterRelease():this.log("onEnterRelease","componentNotFocusable"):this.log("onEnterRelease","noComponent")},Ne.prototype.onArrowPress=function(ne,Be){var L=this.focusableComponents[this.focusKey];if(L)return L&&L.onArrowPress&&L.onArrowPress(ne,Be);this.log("onArrowPress","noComponent")},Ne.prototype.navigateByDirection=function(ne,Be){if(this.paused!==!0&&this.enabled&&!this.nativeMode){var L=[Ye,Re,He,vt];L.includes(ne)?(this.log("navigateByDirection","direction",ne),this.smartNavigate(ne,null,Be)):this.log("navigateByDirection","Invalid direction. You passed: `".concat(ne,"`, but you can use only these: "),L)}},Ne.prototype.onKeyEvent=function(ne){this.visualDebugger&&this.visualDebugger.clear();var Be=Ne.getKeyCode(ne),L=(0,oe.default)(this.getKeyMap(),function(D){return D.includes(Be)});this.smartNavigate(L,null,{event:ne})},Ne.prototype.smartNavigate=function(ne,Be,L){var D=this;if(!this.nativeMode){var G=ne===Ye||ne===Re,K=ne===Ye||(this.writingDirection===ft.default.LTR?ne===vt:ne===He);this.log("smartNavigate","direction",ne),this.log("smartNavigate","fromParentFocusKey",Be),this.log("smartNavigate","this.focusKey",this.focusKey),Be||(0,Je.default)(this.focusableComponents,function(_n){_n.layoutUpdated=!1});var ge=this.focusableComponents[Be||this.focusKey];if(Be||ge){if(this.log("smartNavigate","currentComponent",ge?ge.focusKey:void 0,ge?ge.node:void 0,ge),ge){this.updateLayout(ge.focusKey);var pe=ge.parentFocusKey,Ke=ge.focusKey,wt=ge.layout,lt=Ne.getCutoffCoordinate(G,K,!1,wt,this.writingDirection),ut=(0,ce.default)(this.focusableComponents,function(_n){if(_n.parentFocusKey===pe&&_n.focusable){D.updateLayout(_n.focusKey);var rn=Ne.getCutoffCoordinate(G,K,!0,_n.layout,D.writingDirection);return G||D.writingDirection===ft.default.LTR?K?rn>=lt:rn<=lt:K?rn<=lt:rn>=lt}return!1});if(this.debug&&(this.log("smartNavigate","currentCutoffCoordinate",lt),this.log("smartNavigate","siblings","".concat(ut.length," elements:"),ut.map(function(_n){return _n.focusKey}).join(", "),ut.map(function(_n){return _n.node}),ut.map(function(_n){return _n}))),this.visualDebugger){var nt=Ne.getRefCorners(ne,!1,wt);this.visualDebugger.drawPoint(nt.a.x,nt.a.y),this.visualDebugger.drawPoint(nt.b.x,nt.b.y)}var ht=this.sortSiblingsByPriority(ut,wt,ne,Ke),_t=(0,me.default)(ht);if(this.log("smartNavigate","nextComponent",_t?_t.focusKey:void 0,_t?_t.node:void 0,_t),_t)this.setFocus(_t.focusKey,L);else{var Tt=this.focusableComponents[pe],Mt=Tt!=null&&Tt.isFocusBoundary?Tt.focusBoundaryDirections||[ne]:[];Tt&&Mt.includes(ne)||this.smartNavigate(ne,pe,L)}}}else this.setFocus(this.getForcedFocusKey())}},Ne.prototype.saveLastFocusedChildKey=function(ne,Be){ne&&(this.log("saveLastFocusedChildKey","".concat(ne.focusKey," lastFocusedChildKey set"),Be),ne.lastFocusedChildKey=Be)},Ne.prototype.log=function(ne,Be){for(var L=[],D=2;D<arguments.length;D++)L[D-2]=arguments[D];this.debug&&console.log.apply(console,Q(["%c".concat(ne,"%c").concat(Be),"background: ".concat(Bt[this.logIndex%Bt.length],"; color: black; padding: 1px 5px;"),"background: #333; color: #BADA55; padding: 1px 5px;"],L,!1))},Ne.prototype.getCurrentFocusKey=function(){return this.focusKey},Ne.prototype.getForcedFocusKey=function(){var ne,Be=(0,ce.default)(this.focusableComponents,function(D){return D.focusable&&D.forceFocus}),L=this.sortSiblingsByPriority(Be,{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:null},"down",M.ROOT_FOCUS_KEY);return(ne=(0,me.default)(L))===null||ne===void 0?void 0:ne.focusKey},Ne.prototype.getNextFocusKey=function(ne){var Be=this,L=this.focusableComponents[ne];if(!L||this.nativeMode)return ne;var D=(0,ce.default)(this.focusableComponents,function(pe){return pe.parentFocusKey===ne&&pe.focusable});if(D.length>0){var G=L.lastFocusedChildKey,K=L.preferredChildFocusKey;if(this.log("getNextFocusKey","lastFocusedChildKey is",G),this.log("getNextFocusKey","preferredChildFocusKey is",K),G&&L.saveLastFocusedChild&&this.isParticipatingFocusableComponent(G))return this.log("getNextFocusKey","lastFocusedChildKey will be focused",G),this.getNextFocusKey(G);if(K&&this.isParticipatingFocusableComponent(K))return this.log("getNextFocusKey","preferredChildFocusKey will be focused",K),this.getNextFocusKey(K);D.forEach(function(pe){return Be.updateLayout(pe.focusKey)});var ge=function(pe,Ke){var wt=Ke===ft.default.LTR?function(ut){var nt=ut.layout;return Math.abs(nt.left)+Math.abs(nt.top)}:function(ut){var nt=ut.layout;return Math.abs(window.innerWidth-nt.right)+Math.abs(nt.top)},lt=(0,we.default)(pe,wt);return(0,me.default)(lt)}(D,this.writingDirection).focusKey;return this.log("getNextFocusKey","childKey will be focused",ge),this.getNextFocusKey(ge)}return this.log("getNextFocusKey","targetFocusKey",ne),ne},Ne.prototype.addFocusable=function(ne){var Be=ne.focusKey,L=ne.node,D=ne.parentFocusKey,G=ne.onEnterPress,K=ne.onEnterRelease,ge=ne.onArrowPress,pe=ne.onFocus,Ke=ne.onBlur,wt=ne.saveLastFocusedChild,lt=ne.trackChildren,ut=ne.onUpdateFocus,nt=ne.onUpdateHasFocusedChild,ht=ne.preferredChildFocusKey,_t=ne.autoRestoreFocus,Tt=ne.forceFocus,Mt=ne.focusable,_n=ne.isFocusBoundary,rn=ne.focusBoundaryDirections;if(this.focusableComponents[Be]={focusKey:Be,node:L,parentFocusKey:D,onEnterPress:G,onEnterRelease:K,onArrowPress:ge,onFocus:pe,onBlur:Ke,onUpdateFocus:ut,onUpdateHasFocusedChild:nt,saveLastFocusedChild:wt,trackChildren:lt,preferredChildFocusKey:ht,focusable:Mt,isFocusBoundary:_n,focusBoundaryDirections:rn,autoRestoreFocus:_t,forceFocus:Tt,lastFocusedChildKey:null,layout:{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:L},layoutUpdated:!1},L||console.warn('Component added without a node reference. This will result in its coordinates being empty and may cause lost focus. Check the "ref" passed to "useFocusable": ',this.focusableComponents[Be]),!this.nativeMode){this.updateLayout(Be),this.log("addFocusable","Component added: ",this.focusableComponents[Be]),Be===this.focusKey&&this.setFocus(ht||Be);for(var cn=this.focusableComponents[this.focusKey];cn;){if(cn.parentFocusKey===Be){this.updateParentsHasFocusedChild(this.focusKey,{}),this.updateParentsLastFocusedChild(this.focusKey);break}cn=this.focusableComponents[cn.parentFocusKey]}}},Ne.prototype.removeFocusable=function(ne){var Be=ne.focusKey,L=this.focusableComponents[Be];if(L){var D=L.parentFocusKey;(0,L.onUpdateFocus)(!1),this.log("removeFocusable","Component removed: ",L),delete this.focusableComponents[Be];var G=this.parentsHavingFocusedChild.includes(Be);this.parentsHavingFocusedChild=this.parentsHavingFocusedChild.filter(function(pe){return pe!==Be});var K=this.focusableComponents[D],ge=Be===this.focusKey;if(K&&K.lastFocusedChildKey===Be&&(K.lastFocusedChildKey=null),this.nativeMode)return;(ge||G)&&K&&K.autoRestoreFocus&&(this.log("removeFocusable","Component removed: ",ge?"Leaf component":"Container component","Auto restoring focus to: ",D),this.setFocusDebounced(D))}},Ne.prototype.getNodeLayoutByFocusKey=function(ne){var Be=this.focusableComponents[ne];return Be?(this.updateLayout(Be.focusKey),Be.layout):null},Ne.prototype.setCurrentFocusedKey=function(ne,Be){if(this.isFocusableComponent(this.focusKey)&&ne!==this.focusKey){var L=this.focusableComponents[this.focusKey];L.onUpdateFocus(!1),L.onBlur(this.getNodeLayoutByFocusKey(this.focusKey),Be),this.log("setCurrentFocusedKey","onBlur",L)}if(this.focusKey=ne,this.isFocusableComponent(this.focusKey)){var D=this.focusableComponents[this.focusKey];this.shouldFocusDOMNode&&D.node&&D.node.focus(),D.onUpdateFocus(!0),D.onFocus(this.getNodeLayoutByFocusKey(this.focusKey),Be),this.log("setCurrentFocusedKey","onFocus",D)}},Ne.prototype.updateParentsHasFocusedChild=function(ne,Be){for(var L=this,D=[],G=this.focusableComponents[ne];G;){var K=G.parentFocusKey,ge=this.focusableComponents[K];if(ge){var pe=ge.focusKey;D.push(pe)}G=ge}var Ke=(0,X.default)(this.parentsHavingFocusedChild,D),wt=(0,X.default)(D,this.parentsHavingFocusedChild);(0,be.default)(Ke,function(lt){var ut=L.focusableComponents[lt];ut&&ut.trackChildren&&ut.onUpdateHasFocusedChild(!1),L.onIntermediateNodeBecameBlurred(lt,Be)}),(0,be.default)(wt,function(lt){var ut=L.focusableComponents[lt];ut&&ut.trackChildren&&ut.onUpdateHasFocusedChild(!0),L.onIntermediateNodeBecameFocused(lt,Be)}),this.parentsHavingFocusedChild=D},Ne.prototype.updateParentsLastFocusedChild=function(ne){for(var Be=this.focusableComponents[ne];Be;){var L=Be.parentFocusKey,D=this.focusableComponents[L];D&&this.saveLastFocusedChildKey(D,Be.focusKey),Be=D}},Ne.prototype.getKeyMap=function(){return this.keyMap},Ne.prototype.setKeyMap=function(ne){this.keyMap=b(b({},this.getKeyMap()),function(Be){var L={};return Object.entries(Be).forEach(function(D){var G=D[0],K=D[1];L[G]=Array.isArray(K)?K:[K]}),L}(ne))},Ne.prototype.isFocusableComponent=function(ne){return!!this.focusableComponents[ne]},Ne.prototype.isParticipatingFocusableComponent=function(ne){return this.isFocusableComponent(ne)&&this.focusableComponents[ne].focusable},Ne.prototype.onIntermediateNodeBecameFocused=function(ne,Be){this.isParticipatingFocusableComponent(ne)&&this.focusableComponents[ne].onFocus(this.getNodeLayoutByFocusKey(ne),Be)},Ne.prototype.onIntermediateNodeBecameBlurred=function(ne,Be){this.isParticipatingFocusableComponent(ne)&&this.focusableComponents[ne].onBlur(this.getNodeLayoutByFocusKey(ne),Be)},Ne.prototype.pause=function(){this.paused=!0},Ne.prototype.resume=function(){this.paused=!1},Ne.prototype.setFocus=function(ne,Be){if(Be===void 0&&(Be={}),this.setFocusDebounced.cancel(),this.enabled&&!this.nativeMode){this.log("setFocus","focusKey",ne),ne&&ne!==M.ROOT_FOCUS_KEY||(ne=this.getForcedFocusKey());var L=this.getNextFocusKey(ne);this.log("setFocus","newFocusKey",L),this.setCurrentFocusedKey(L,Be),this.updateParentsHasFocusedChild(L,Be),this.updateParentsLastFocusedChild(L)}},Ne.prototype.updateAllLayouts=function(){var ne=this;this.enabled&&!this.nativeMode&&(0,Je.default)(this.focusableComponents,function(Be,L){ne.updateLayout(L)})},Ne.prototype.updateLayout=function(ne){var Be=this.focusableComponents[ne];if(Be&&!this.nativeMode&&!Be.layoutUpdated){var L=Be.node,D=this.useGetBoundingClientRect?(0,Ce.getBoundingClientRect)(L):(0,Ce.default)(L);Be.layout=b(b({},D),{node:L})}},Ne.prototype.updateFocusable=function(ne,Be){var L=Be.node,D=Be.preferredChildFocusKey,G=Be.focusable,K=Be.isFocusBoundary,ge=Be.focusBoundaryDirections,pe=Be.onEnterPress,Ke=Be.onEnterRelease,wt=Be.onArrowPress,lt=Be.onFocus,ut=Be.onBlur;if(!this.nativeMode){var nt=this.focusableComponents[ne];nt&&(nt.preferredChildFocusKey=D,nt.focusable=G,nt.isFocusBoundary=K,nt.focusBoundaryDirections=ge,nt.onEnterPress=pe,nt.onEnterRelease=Ke,nt.onArrowPress=wt,nt.onFocus=lt,nt.onBlur=ut,L&&(nt.node=L))}},Ne.prototype.isNativeMode=function(){return this.nativeMode},Ne.prototype.doesFocusableExist=function(ne){return!!this.focusableComponents[ne]},Ne}();M.SpatialNavigation=new Dt,M.init=M.SpatialNavigation.init,M.setThrottle=M.SpatialNavigation.setThrottle,M.destroy=M.SpatialNavigation.destroy,M.setKeyMap=M.SpatialNavigation.setKeyMap,M.setFocus=M.SpatialNavigation.setFocus,M.navigateByDirection=M.SpatialNavigation.navigateByDirection,M.pause=M.SpatialNavigation.pause,M.resume=M.SpatialNavigation.resume,M.updateAllLayouts=M.SpatialNavigation.updateAllLayouts,M.getCurrentFocusKey=M.SpatialNavigation.getCurrentFocusKey,M.doesFocusableExist=M.SpatialNavigation.doesFocusableExist},35:function(F,M,_){var A=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(M,"__esModule",{value:!0});var b=A(_(119)),Z=typeof window<"u"&&window.document,Y=Z?window.innerWidth:0,$=Z?window.innerHeight:0,Q=function(){function se(C){Z&&(this.debugCtx=se.createCanvas("sn-debug","1010",C),this.layoutsCtx=se.createCanvas("sn-layouts","1000",C),this.writingDirection=C)}return se.createCanvas=function(C,X,ce){var oe=document.querySelector("#".concat(C))||document.createElement("canvas");oe.setAttribute("id",C),oe.setAttribute("dir",ce===b.default.LTR?"ltr":"rtl");var me=oe.getContext("2d");return oe.style.zIndex=X,oe.style.position="fixed",oe.style.top="0",oe.style.left="0",document.body.appendChild(oe),oe.width=Y,oe.height=$,me},se.prototype.clear=function(){Z&&this.debugCtx.clearRect(0,0,Y,$)},se.prototype.clearLayouts=function(){Z&&this.layoutsCtx.clearRect(0,0,Y,$)},se.prototype.drawLayout=function(C,X,ce){if(Z){this.layoutsCtx.strokeStyle="green",this.layoutsCtx.strokeRect(C.left,C.top,C.width,C.height),this.layoutsCtx.font="8px monospace",this.layoutsCtx.fillStyle="red";var oe=this.writingDirection===b.default.LTR?"left":"right",me=C[oe];this.layoutsCtx.fillText(X,me,C.top+10),this.layoutsCtx.fillText(ce,me,C.top+25),this.layoutsCtx.fillText("".concat(oe,": ").concat(me),me,C.top+40),this.layoutsCtx.fillText("top: ".concat(C.top),me,C.top+55)}},se.prototype.drawPoint=function(C,X,ce,oe){ce===void 0&&(ce="blue"),oe===void 0&&(oe=10),Z&&(this.debugCtx.strokeStyle=ce,this.debugCtx.lineWidth=3,this.debugCtx.strokeRect(C-oe/2,X-oe/2,oe,oe))},se}();M.default=Q},119:function(F,M){var _;Object.defineProperty(M,"__esModule",{value:!0}),function(A){A[A.LTR=0]="LTR",A[A.RTL=1]="RTL"}(_||(_={})),M.default=_},607:function(F,M,_){var A=this&&this.__createBinding||(Object.create?function(Z,Y,$,Q){Q===void 0&&(Q=$);var se=Object.getOwnPropertyDescriptor(Y,$);se&&!("get"in se?!Y.__esModule:se.writable||se.configurable)||(se={enumerable:!0,get:function(){return Y[$]}}),Object.defineProperty(Z,Q,se)}:function(Z,Y,$,Q){Q===void 0&&(Q=$),Z[Q]=Y[$]}),b=this&&this.__exportStar||function(Z,Y){for(var $ in Z)$==="default"||Object.prototype.hasOwnProperty.call(Y,$)||A(Y,Z,$)};Object.defineProperty(M,"__esModule",{value:!0}),b(_(79),M),b(_(445),M),b(_(654),M)},964:function(F,M){Object.defineProperty(M,"__esModule",{value:!0}),M.getBoundingClientRect=void 0;var _=function(A){for(var b=A.offsetParent,Z=A.offsetHeight,Y=A.offsetWidth,$=A.offsetLeft,Q=A.offsetTop;b&&b.nodeType===1;)$+=b.offsetLeft-b.scrollLeft,Q+=b.offsetTop-b.scrollTop,b=b.offsetParent;return{height:Z,left:$,top:Q,width:Y}};M.default=function(A){var b=A&&A.parentElement;if(A&&b){var Z=_(b),Y=_(A),$=Y.height,Q=Y.left,se=Y.top,C=Y.width;return{x:Q-Z.left,y:se-Z.top,width:C,height:$,left:Q,top:se,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}},M.getBoundingClientRect=function(A){if(A&&A.getBoundingClientRect){var b=A.getBoundingClientRect();return{x:b.x,y:b.y,width:b.width,height:b.height,left:b.left,top:b.top,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}}},445:function(F,M,_){Object.defineProperty(M,"__esModule",{value:!0}),M.useFocusContext=M.FocusContext=void 0;var A=_(156),b=_(654);M.FocusContext=(0,A.createContext)(b.ROOT_FOCUS_KEY),M.FocusContext.displayName="FocusContext",M.useFocusContext=function(){return(0,A.useContext)(M.FocusContext)}},79:function(F,M,_){var A=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(M,"__esModule",{value:!0}),M.useFocusable=void 0;var b=_(156),Z=A(_(604)),Y=A(_(461)),$=_(654),Q=_(445);M.useFocusable=function(se){var C=se===void 0?{}:se,X=C.focusable,ce=X===void 0||X,oe=C.saveLastFocusedChild,me=oe===void 0||oe,be=C.trackChildren,Je=be!==void 0&&be,we=C.autoRestoreFocus,qe=we===void 0||we,st=C.forceFocus,ft=st!==void 0&&st,Ce=C.isFocusBoundary,He=Ce!==void 0&&Ce,vt=C.focusBoundaryDirections,Re=C.focusKey,Ye=C.preferredChildFocusKey,ot=C.onEnterPress,Ht=ot===void 0?Z.default:ot,Bt=C.onEnterRelease,Et=Bt===void 0?Z.default:Bt,Dt=C.onArrowPress,Ne=Dt===void 0?function(){return!0}:Dt,ne=C.onFocus,Be=ne===void 0?Z.default:ne,L=C.onBlur,D=L===void 0?Z.default:L,G=C.extraProps,K=(0,b.useCallback)(function(Ft){Ht(G,Ft)},[Ht,G]),ge=(0,b.useCallback)(function(){Et(G)},[Et,G]),pe=(0,b.useCallback)(function(Ft,Gn){return Ne(Ft,G,Gn)},[G,Ne]),Ke=(0,b.useCallback)(function(Ft,Gn){Be(Ft,G,Gn)},[G,Be]),wt=(0,b.useCallback)(function(Ft,Gn){D(Ft,G,Gn)},[G,D]),lt=(0,b.useRef)(null),ut=(0,b.useState)(!1),nt=ut[0],ht=ut[1],_t=(0,b.useState)(!1),Tt=_t[0],Mt=_t[1],_n=(0,Q.useFocusContext)(),rn=(0,b.useMemo)(function(){return Re||(0,Y.default)("sn:focusable-item-")},[Re]),cn=(0,b.useCallback)(function(Ft){Ft===void 0&&(Ft={}),$.SpatialNavigation.setFocus(rn,Ft)},[rn]);return(0,b.useEffect)(function(){var Ft=lt.current;return $.SpatialNavigation.addFocusable({focusKey:rn,node:Ft,parentFocusKey:_n,preferredChildFocusKey:Ye,onEnterPress:K,onEnterRelease:ge,onArrowPress:pe,onFocus:Ke,onBlur:wt,onUpdateFocus:function(Gn){return Gn===void 0&&(Gn=!1),ht(Gn)},onUpdateHasFocusedChild:function(Gn){return Gn===void 0&&(Gn=!1),Mt(Gn)},saveLastFocusedChild:me,trackChildren:Je,isFocusBoundary:He,focusBoundaryDirections:vt,autoRestoreFocus:qe,forceFocus:ft,focusable:ce}),function(){$.SpatialNavigation.removeFocusable({focusKey:rn})}},[]),(0,b.useEffect)(function(){var Ft=lt.current;$.SpatialNavigation.updateFocusable(rn,{node:Ft,preferredChildFocusKey:Ye,focusable:ce,isFocusBoundary:He,focusBoundaryDirections:vt,onEnterPress:K,onEnterRelease:ge,onArrowPress:pe,onFocus:Ke,onBlur:wt})},[rn,Ye,ce,He,vt,K,ge,pe,Ke,wt]),{ref:lt,focusSelf:cn,focused:nt,hasFocusedChild:Tt,focusKey:rn}}},150:function(F){F.exports=l},117:function(F){F.exports=d},747:function(F){F.exports=m},23:function(F){F.exports=I},842:function(F){F.exports=N},682:function(F){F.exports=p},784:function(F){F.exports=w},604:function(F){F.exports=U},432:function(F){F.exports=x},67:function(F){F.exports=E},461:function(F){F.exports=y},156:function(F){F.exports=P}},T={};return function F(M){var _=T[M];if(_!==void 0)return _.exports;var A=T[M]={exports:{}};return g[M].call(A.exports,A,A.exports,F),A.exports}(607)}()})})(OU);var tB=OU.exports;function CK(o){return{all:o=o||new Map,on:function(i,l){var d=o.get(i);d?d.push(l):o.set(i,[l])},off:function(i,l){var d=o.get(i);d&&(l?d.splice(d.indexOf(l)>>>0,1):o.set(i,[]))},emit:function(i,l){var d=o.get(i);d&&d.slice().map(function(m){m(l)}),(d=o.get("*"))&&d.slice().map(function(m){m(i,l)})}}}class df{constructor(){this.emitter=CK()}emit(i,l){this.emitter.emit(i,l)}on(i,l){var d;(d=this.emitter)==null||d.on(i,l)}once(i,l){var m;const d=I=>{var N;(N=this.emitter)==null||N.off(i,d),l(I)};(m=this.emitter)==null||m.on(i,d)}off(i,l){var d;(d=this.emitter)==null||d.off(i,l)}onAny(i){this.emitter.on("*",i)}offAny(i){this.emitter.off("*",i)}clearAllListeners(){this.emitter.all.clear()}destroy(){this.clearAllListeners()}}var Wc=256,nB=[],w3=256,r0;for(;Wc--;)nB[Wc]=(Wc+256).toString(16).substring(1);function bK(o){var i=0,l=11;if(!r0||Wc+l>w3*2)for(r0="",Wc=0;i<w3;i++)r0+=nB[Math.random()*256|0];return r0.substring(Wc,Wc+++l)}const A3={DEVICE_ID:"deviceId"};function xg(){const o=localStorage.getItem(A3.DEVICE_ID);if(o)return o;const i=bK();return localStorage.setItem(A3.DEVICE_ID,i),i}function RK(o){o=[...o].sort((l,d)=>l-d);const i=Math.floor(o.length/2);return o.length%2?o[i]:(o[i-1]+o[i])/2}var ls=(o=>(o.NEGOTIATE="negotiate",o.NEGOTIATE_TV="negotiate-tv",o.EVENT_STATUS="eventStatus",o.EVENT_META="eventMeta",o.GENERATE="generate",o.CONTENTFUL="contentful",o))(ls||{});class ug extends Error{constructor(i,l,d,m){super(),this._name=i,this._title=l,this._code=m,this._message=d}get toString(){var i,l;return"".concat(this._name.toUpperCase()," ERROR - ").concat((i=this._title.toUpperCase())!=null?i:""," ").concat((l=this._code)!=null?l:"",": ").concat(this.message)}get name(){return this._name}set name(i){this._name=i}get message(){return this._message}set message(i){this._message=i}get title(){return this._title}set title(i){this._title=i}get code(){return this._code}set code(i){this._code=i}}const mh=xg(),xK="https://staging-api.gigset.io",Y0="new",NK="68HZuoF2PhOm4zHAJzDcwGnqUeph2JA_G9M7vW8-mbw",MK="v203lmr0b15v",Hb="setup-device-id",DK="_appContainer_1isul_1",PK="_pageContainer_1isul_53",OK="_input_1isul_67",LK="_ellipsis_1isul_1",kK={appContainer:DK,pageContainer:PK,input:OK,ellipsis:LK};class Qc extends Error{constructor(i,l){const d=new.target.prototype;super("".concat(i,": Status code '").concat(l,"'")),this.statusCode=l,this.__proto__=d}}class Vb extends Error{constructor(i="A timeout occurred."){const l=new.target.prototype;super(i),this.__proto__=l}}class fu extends Error{constructor(i="An abort occurred."){const l=new.target.prototype;super(i),this.__proto__=l}}class FK extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.transport=l,this.errorType="UnsupportedTransportError",this.__proto__=d}}class UK extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.transport=l,this.errorType="DisabledTransportError",this.__proto__=d}}class BK extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.transport=l,this.errorType="FailedToStartTransportError",this.__proto__=d}}class I3 extends Error{constructor(i){const l=new.target.prototype;super(i),this.errorType="FailedToNegotiateWithServerError",this.__proto__=l}}class jK extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.innerErrors=l,this.__proto__=d}}class rB{constructor(i,l,d){this.statusCode=i,this.statusText=l,this.content=d}}class wE{get(i,l){return this.send({...l,method:"GET",url:i})}post(i,l){return this.send({...l,method:"POST",url:i})}delete(i,l){return this.send({...l,method:"DELETE",url:i})}getCookieString(i){return""}}var Rn;(function(o){o[o.Trace=0]="Trace",o[o.Debug=1]="Debug",o[o.Information=2]="Information",o[o.Warning=3]="Warning",o[o.Error=4]="Error",o[o.Critical=5]="Critical",o[o.None=6]="None"})(Rn||(Rn={}));class zg{constructor(){}log(i,l){}}zg.instance=new zg;const ZK="8.0.0";class So{static isRequired(i,l){if(i==null)throw new Error("The '".concat(l,"' argument is required."))}static isNotEmpty(i,l){if(!i||i.match(/^\s*$/))throw new Error("The '".concat(l,"' argument should not be empty."))}static isIn(i,l,d){if(!(i in l))throw new Error("Unknown ".concat(d," value: ").concat(i,"."))}}class Ji{static get isBrowser(){return!Ji.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Ji.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Ji.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Yg(o,i){let l="";return af(o)?(l="Binary data of length ".concat(o.byteLength),i&&(l+=". Content: '".concat(qK(o),"'"))):typeof o=="string"&&(l="String data of length ".concat(o.length),i&&(l+=". Content: '".concat(o,"'"))),l}function qK(o){const i=new Uint8Array(o);let l="";return i.forEach(d=>{const m=d<16?"0":"";l+="0x".concat(m).concat(d.toString(16)," ")}),l.substr(0,l.length-1)}function af(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}async function iB(o,i,l,d,m,I){const N={},[p,w]=vh();N[p]=w,o.log(Rn.Trace,"(".concat(i," transport) sending data. ").concat(Yg(m,I.logMessageContent),"."));const U=af(m)?"arraybuffer":"text",x=await l.post(d,{content:m,headers:{...N,...I.headers},responseType:U,timeout:I.timeout,withCredentials:I.withCredentials});o.log(Rn.Trace,"(".concat(i," transport) request complete. Response status: ").concat(x.statusCode,"."))}function GK(o){return o===void 0?new W0(Rn.Information):o===null?zg.instance:o.log!==void 0?o:new W0(o)}class HK{constructor(i,l){this._subject=i,this._observer=l}dispose(){const i=this._subject.observers.indexOf(this._observer);i>-1&&this._subject.observers.splice(i,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(l=>{})}}class W0{constructor(i){this._minLevel=i,this.out=console}log(i,l){if(i>=this._minLevel){const d="[".concat(new Date().toISOString(),"] ").concat(Rn[i],": ").concat(l);switch(i){case Rn.Critical:case Rn.Error:this.out.error(d);break;case Rn.Warning:this.out.warn(d);break;case Rn.Information:this.out.info(d);break;default:this.out.log(d);break}}}}function vh(){let o="X-SignalR-User-Agent";return Ji.isNode&&(o="User-Agent"),[o,VK(ZK,KK(),YK(),zK())]}function VK(o,i,l,d){let m="Microsoft SignalR/";const I=o.split(".");return m+="".concat(I[0],".").concat(I[1]),m+=" (".concat(o,"; "),i&&i!==""?m+="".concat(i,"; "):m+="Unknown OS; ",m+="".concat(l),d?m+="; ".concat(d):m+="; Unknown Runtime Version",m+=")",m}function KK(){if(Ji.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function zK(){if(Ji.isNode)return process.versions.node}function YK(){return Ji.isNode?"NodeJS":"Browser"}function C3(o){return o.stack?o.stack:o.message?o.message:"".concat(o)}function WK(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}function $K(o){return typeof fetch>"u"||Ji.isNode?(o._jar=new(require("tough-cookie")).CookieJar,typeof fetch>"u"?o._fetchType=require("node-fetch"):o._fetchType=fetch,o._fetchType=require("fetch-cookie")(o._fetchType,o._jar),!0):!1}function XK(o){return typeof AbortController>"u"?(o._abortControllerType=require("abort-controller"),!0):!1}function QK(){return require("ws")}function JK(){return require("eventsource")}class ez extends wE{constructor(i){super(),this._logger=i;const l={_fetchType:void 0,_jar:void 0};$K(l)?(this._fetchType=l._fetchType,this._jar=l._jar):this._fetchType=fetch.bind(WK()),this._abortControllerType=AbortController;const d={_abortControllerType:this._abortControllerType};XK(d)&&(this._abortControllerType=d._abortControllerType)}async send(i){if(i.abortSignal&&i.abortSignal.aborted)throw new fu;if(!i.method)throw new Error("No method defined.");if(!i.url)throw new Error("No url defined.");const l=new this._abortControllerType;let d;i.abortSignal&&(i.abortSignal.onabort=()=>{l.abort(),d=new fu});let m=null;if(i.timeout){const w=i.timeout;m=setTimeout(()=>{l.abort(),this._logger.log(Rn.Warning,"Timeout from HTTP request."),d=new Vb},w)}i.content===""&&(i.content=void 0),i.content&&(i.headers=i.headers||{},af(i.content)?i.headers["Content-Type"]="application/octet-stream":i.headers["Content-Type"]="text/plain;charset=UTF-8");let I;try{I=await this._fetchType(i.url,{body:i.content,cache:"no-cache",credentials:i.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...i.headers},method:i.method,mode:"cors",redirect:"follow",signal:l.signal})}catch(w){throw d||(this._logger.log(Rn.Warning,"Error from HTTP request. ".concat(w,".")),w)}finally{m&&clearTimeout(m),i.abortSignal&&(i.abortSignal.onabort=null)}if(!I.ok){const w=await b3(I,"text");throw new Qc(w||I.statusText,I.status)}const p=await b3(I,i.responseType);return new rB(I.status,I.statusText,p)}getCookieString(i){let l="";return Ji.isNode&&this._jar&&this._jar.getCookies(i,(d,m)=>l=m.join("; ")),l}}function b3(o,i){let l;switch(i){case"arraybuffer":l=o.arrayBuffer();break;case"text":l=o.text();break;case"blob":case"document":case"json":throw new Error("".concat(i," is not supported."));default:l=o.text();break}return l}class tz extends wE{constructor(i){super(),this._logger=i}send(i){return i.abortSignal&&i.abortSignal.aborted?Promise.reject(new fu):i.method?i.url?new Promise((l,d)=>{const m=new XMLHttpRequest;m.open(i.method,i.url,!0),m.withCredentials=i.withCredentials===void 0?!0:i.withCredentials,m.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.content===""&&(i.content=void 0),i.content&&(af(i.content)?m.setRequestHeader("Content-Type","application/octet-stream"):m.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const I=i.headers;I&&Object.keys(I).forEach(N=>{m.setRequestHeader(N,I[N])}),i.responseType&&(m.responseType=i.responseType),i.abortSignal&&(i.abortSignal.onabort=()=>{m.abort(),d(new fu)}),i.timeout&&(m.timeout=i.timeout),m.onload=()=>{i.abortSignal&&(i.abortSignal.onabort=null),m.status>=200&&m.status<300?l(new rB(m.status,m.statusText,m.response||m.responseText)):d(new Qc(m.response||m.responseText||m.statusText,m.status))},m.onerror=()=>{this._logger.log(Rn.Warning,"Error from HTTP request. ".concat(m.status,": ").concat(m.statusText,".")),d(new Qc(m.statusText,m.status))},m.ontimeout=()=>{this._logger.log(Rn.Warning,"Timeout from HTTP request."),d(new Vb)},m.send(i.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class nz extends wE{constructor(i){if(super(),typeof fetch<"u"||Ji.isNode)this._httpClient=new ez(i);else if(typeof XMLHttpRequest<"u")this._httpClient=new tz(i);else throw new Error("No usable HttpClient found.")}send(i){return i.abortSignal&&i.abortSignal.aborted?Promise.reject(new fu):i.method?i.url?this._httpClient.send(i):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(i){return this._httpClient.getCookieString(i)}}class fs{static write(i){return"".concat(i).concat(fs.RecordSeparator)}static parse(i){if(i[i.length-1]!==fs.RecordSeparator)throw new Error("Message is incomplete.");const l=i.split(fs.RecordSeparator);return l.pop(),l}}fs.RecordSeparatorCode=30;fs.RecordSeparator=String.fromCharCode(fs.RecordSeparatorCode);class rz{writeHandshakeRequest(i){return fs.write(JSON.stringify(i))}parseHandshakeResponse(i){let l,d;if(af(i)){const p=new Uint8Array(i),w=p.indexOf(fs.RecordSeparatorCode);if(w===-1)throw new Error("Message is incomplete.");const U=w+1;l=String.fromCharCode.apply(null,Array.prototype.slice.call(p.slice(0,U))),d=p.byteLength>U?p.slice(U).buffer:null}else{const p=i,w=p.indexOf(fs.RecordSeparator);if(w===-1)throw new Error("Message is incomplete.");const U=w+1;l=p.substring(0,U),d=p.length>U?p.substring(U):null}const m=fs.parse(l),I=JSON.parse(m[0]);if(I.type)throw new Error("Expected a handshake response from the server.");return[d,I]}}var Dr;(function(o){o[o.Invocation=1]="Invocation",o[o.StreamItem=2]="StreamItem",o[o.Completion=3]="Completion",o[o.StreamInvocation=4]="StreamInvocation",o[o.CancelInvocation=5]="CancelInvocation",o[o.Ping=6]="Ping",o[o.Close=7]="Close",o[o.Ack=8]="Ack",o[o.Sequence=9]="Sequence"})(Dr||(Dr={}));class iz{constructor(){this.observers=[]}next(i){for(const l of this.observers)l.next(i)}error(i){for(const l of this.observers)l.error&&l.error(i)}complete(){for(const i of this.observers)i.complete&&i.complete()}subscribe(i){return this.observers.push(i),new HK(this,i)}}class oz{constructor(i,l,d){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=i,this._connection=l,this._bufferSize=d}async _send(i){const l=this._protocol.writeMessage(i);let d=Promise.resolve();if(this._isInvocationMessage(i)){this._totalMessageCount++;let m=()=>{},I=()=>{};af(l)?this._bufferedByteCount+=l.byteLength:this._bufferedByteCount+=l.length,this._bufferedByteCount>=this._bufferSize&&(d=new Promise((N,p)=>{m=N,I=p})),this._messages.push(new az(l,this._totalMessageCount,m,I))}try{this._reconnectInProgress||await this._connection.send(l)}catch(m){this._disconnected()}await d}_ack(i){let l=-1;for(let d=0;d<this._messages.length;d++){const m=this._messages[d];if(m._id<=i.sequenceId)l=d,af(m._message)?this._bufferedByteCount-=m._message.byteLength:this._bufferedByteCount-=m._message.length,m._resolver();else if(this._bufferedByteCount<this._bufferSize)m._resolver();else break}l!==-1&&(this._messages=this._messages.slice(l+1))}_shouldProcessMessage(i){if(this._waitForSequenceMessage)return i.type!==Dr.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(i))return!0;const l=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,l<=this._latestReceivedSequenceId?(l===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=l,this._ackTimer(),!0)}_resetSequence(i){if(i.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=i.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const i=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Dr.Sequence,sequenceId:i}));const l=this._messages;for(const d of l)await this._connection.send(d._message);this._reconnectInProgress=!1}_dispose(i){i!=null||(i=new Error("Unable to reconnect to server."));for(const l of this._messages)l._rejector(i)}_isInvocationMessage(i){switch(i.type){case Dr.Invocation:case Dr.StreamItem:case Dr.Completion:case Dr.StreamInvocation:case Dr.CancelInvocation:return!0;case Dr.Close:case Dr.Sequence:case Dr.Ping:case Dr.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Dr.Ack,sequenceId:this._latestReceivedSequenceId}))}catch(i){}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class az{constructor(i,l,d,m){this._message=i,this._id=l,this._resolver=d,this._rejector=m}}const sz=30*1e3,uz=15*1e3,lz=1e5;var qi;(function(o){o.Disconnected="Disconnected",o.Connecting="Connecting",o.Connected="Connected",o.Disconnecting="Disconnecting",o.Reconnecting="Reconnecting"})(qi||(qi={}));class Kb{static create(i,l,d,m,I,N,p){return new Kb(i,l,d,m,I,N,p)}constructor(i,l,d,m,I,N,p){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Rn.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},So.isRequired(i,"connection"),So.isRequired(l,"logger"),So.isRequired(d,"protocol"),this.serverTimeoutInMilliseconds=I!=null?I:sz,this.keepAliveIntervalInMilliseconds=N!=null?N:uz,this._statefulReconnectBufferSize=p!=null?p:lz,this._logger=l,this._protocol=d,this.connection=i,this._reconnectPolicy=m,this._handshakeProtocol=new rz,this.connection.onreceive=w=>this._processIncomingData(w),this.connection.onclose=w=>this._connectionClosed(w),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=qi.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Dr.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(i){if(this._connectionState!==qi.Disconnected&&this._connectionState!==qi.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!i)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=i}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==qi.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=qi.Connecting,this._logger.log(Rn.Debug,"Starting HubConnection.");try{await this._startInternal(),Ji.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=qi.Connected,this._connectionStarted=!0,this._logger.log(Rn.Debug,"HubConnection connected successfully.")}catch(i){return this._connectionState=qi.Disconnected,this._logger.log(Rn.Debug,"HubConnection failed to start successfully because of error '".concat(i,"'.")),Promise.reject(i)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const i=new Promise((l,d)=>{this._handshakeResolver=l,this._handshakeRejecter=d});await this.connection.start(this._protocol.transferFormat);try{let l=this._protocol.version;this.connection.features.reconnect||(l=1);const d={protocol:this._protocol.name,version:l};if(this._logger.log(Rn.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(d)),this._logger.log(Rn.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await i,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new oz(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(l){throw this._logger.log(Rn.Debug,"Hub handshake failed with error '".concat(l,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(l),l}}async stop(){const i=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await i}catch(l){}}_stopInternal(i){if(this._connectionState===qi.Disconnected)return this._logger.log(Rn.Debug,"Call to HubConnection.stop(".concat(i,") ignored because it is already in the disconnected state.")),Promise.resolve();if(this._connectionState===qi.Disconnecting)return this._logger.log(Rn.Debug,"Call to HttpConnection.stop(".concat(i,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;const l=this._connectionState;return this._connectionState=qi.Disconnecting,this._logger.log(Rn.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Rn.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(l===qi.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=i||new fu("The connection was stopped before the hub handshake could complete."),this.connection.stop(i))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch(i){}}stream(i,...l){const[d,m]=this._replaceStreamingParams(l),I=this._createStreamInvocation(i,l,m);let N;const p=new iz;return p.cancelCallback=()=>{const w=this._createCancelInvocation(I.invocationId);return delete this._callbacks[I.invocationId],N.then(()=>this._sendWithProtocol(w))},this._callbacks[I.invocationId]=(w,U)=>{if(U){p.error(U);return}else w&&(w.type===Dr.Completion?w.error?p.error(new Error(w.error)):p.complete():p.next(w.item))},N=this._sendWithProtocol(I).catch(w=>{p.error(w),delete this._callbacks[I.invocationId]}),this._launchStreams(d,N),p}_sendMessage(i){return this._resetKeepAliveInterval(),this.connection.send(i)}_sendWithProtocol(i){return this._messageBuffer?this._messageBuffer._send(i):this._sendMessage(this._protocol.writeMessage(i))}send(i,...l){const[d,m]=this._replaceStreamingParams(l),I=this._sendWithProtocol(this._createInvocation(i,l,!0,m));return this._launchStreams(d,I),I}invoke(i,...l){const[d,m]=this._replaceStreamingParams(l),I=this._createInvocation(i,l,!1,m);return new Promise((p,w)=>{this._callbacks[I.invocationId]=(x,E)=>{if(E){w(E);return}else x&&(x.type===Dr.Completion?x.error?w(new Error(x.error)):p(x.result):w(new Error("Unexpected message type: ".concat(x.type))))};const U=this._sendWithProtocol(I).catch(x=>{w(x),delete this._callbacks[I.invocationId]});this._launchStreams(d,U)})}on(i,l){!i||!l||(i=i.toLowerCase(),this._methods[i]||(this._methods[i]=[]),this._methods[i].indexOf(l)===-1&&this._methods[i].push(l))}off(i,l){if(!i)return;i=i.toLowerCase();const d=this._methods[i];if(d)if(l){const m=d.indexOf(l);m!==-1&&(d.splice(m,1),d.length===0&&delete this._methods[i])}else delete this._methods[i]}onclose(i){i&&this._closedCallbacks.push(i)}onreconnecting(i){i&&this._reconnectingCallbacks.push(i)}onreconnected(i){i&&this._reconnectedCallbacks.push(i)}_processIncomingData(i){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(i=this._processHandshakeResponse(i),this._receivedHandshakeResponse=!0),i){const l=this._protocol.parseMessages(i,this._logger);for(const d of l)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(d)))switch(d.type){case Dr.Invocation:this._invokeClientMethod(d);break;case Dr.StreamItem:case Dr.Completion:{const m=this._callbacks[d.invocationId];if(m){d.type===Dr.Completion&&delete this._callbacks[d.invocationId];try{m(d)}catch(I){this._logger.log(Rn.Error,"Stream callback threw error: ".concat(C3(I)))}}break}case Dr.Ping:break;case Dr.Close:{this._logger.log(Rn.Information,"Close message received from server.");const m=d.error?new Error("Server returned an error on close: "+d.error):void 0;d.allowReconnect===!0?this.connection.stop(m):this._stopPromise=this._stopInternal(m);break}case Dr.Ack:this._messageBuffer&&this._messageBuffer._ack(d);break;case Dr.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(d);break;default:this._logger.log(Rn.Warning,"Invalid message type: ".concat(d.type,"."));break}}this._resetTimeoutPeriod()}_processHandshakeResponse(i){let l,d;try{[d,l]=this._handshakeProtocol.parseHandshakeResponse(i)}catch(m){const I="Error parsing handshake response: "+m;this._logger.log(Rn.Error,I);const N=new Error(I);throw this._handshakeRejecter(N),N}if(l.error){const m="Server returned handshake error: "+l.error;this._logger.log(Rn.Error,m);const I=new Error(m);throw this._handshakeRejecter(I),I}else this._logger.log(Rn.Debug,"Server handshake complete.");return this._handshakeResolver(),d}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let i=this._nextKeepAlive-new Date().getTime();i<0&&(i=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===qi.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch(l){this._cleanupPingTimer()}},i)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(i){const l=i.target.toLowerCase(),d=this._methods[l];if(!d){this._logger.log(Rn.Warning,"No client method with the name '".concat(l,"' found.")),i.invocationId&&(this._logger.log(Rn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(i.invocationId,"'.")),await this._sendWithProtocol(this._createCompletionMessage(i.invocationId,"Client didn't provide a result.",null)));return}const m=d.slice(),I=!!i.invocationId;let N,p,w;for(const U of m)try{const x=N;N=await U.apply(this,i.arguments),I&&N&&x&&(this._logger.log(Rn.Error,"Multiple results provided for '".concat(l,"'. Sending error to server.")),w=this._createCompletionMessage(i.invocationId,"Client provided multiple results.",null)),p=void 0}catch(x){p=x,this._logger.log(Rn.Error,"A callback for the method '".concat(l,"' threw error '").concat(x,"'."))}w?await this._sendWithProtocol(w):I?(p?w=this._createCompletionMessage(i.invocationId,"".concat(p),null):N!==void 0?w=this._createCompletionMessage(i.invocationId,null,N):(this._logger.log(Rn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(i.invocationId,"'.")),w=this._createCompletionMessage(i.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(w)):N&&this._logger.log(Rn.Error,"Result given for '".concat(l,"' method but server is not expecting a result."))}_connectionClosed(i){this._logger.log(Rn.Debug,"HubConnection.connectionClosed(".concat(i,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||i||new fu("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(i||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===qi.Disconnecting?this._completeClose(i):this._connectionState===qi.Connected&&this._reconnectPolicy?this._reconnect(i):this._connectionState===qi.Connected&&this._completeClose(i)}_completeClose(i){if(this._connectionStarted){this._connectionState=qi.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(i!=null?i:new Error("Connection closed.")),this._messageBuffer=void 0),Ji.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(l=>l.apply(this,[i]))}catch(l){this._logger.log(Rn.Error,"An onclose callback called with error '".concat(i,"' threw error '").concat(l,"'."))}}}async _reconnect(i){const l=Date.now();let d=0,m=i!==void 0?i:new Error("Attempting to reconnect due to a unknown error."),I=this._getNextRetryDelay(d++,0,m);if(I===null){this._logger.log(Rn.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(i);return}if(this._connectionState=qi.Reconnecting,i?this._logger.log(Rn.Information,"Connection reconnecting because of error '".concat(i,"'.")):this._logger.log(Rn.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(N=>N.apply(this,[i]))}catch(N){this._logger.log(Rn.Error,"An onreconnecting callback called with error '".concat(i,"' threw error '").concat(N,"'."))}if(this._connectionState!==qi.Reconnecting){this._logger.log(Rn.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;I!==null;){if(this._logger.log(Rn.Information,"Reconnect attempt number ".concat(d," will start in ").concat(I," ms.")),await new Promise(N=>{this._reconnectDelayHandle=setTimeout(N,I)}),this._reconnectDelayHandle=void 0,this._connectionState!==qi.Reconnecting){this._logger.log(Rn.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=qi.Connected,this._logger.log(Rn.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(N=>N.apply(this,[this.connection.connectionId]))}catch(N){this._logger.log(Rn.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(N,"'."))}return}catch(N){if(this._logger.log(Rn.Information,"Reconnect attempt failed because of error '".concat(N,"'.")),this._connectionState!==qi.Reconnecting){this._logger.log(Rn.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),this._connectionState===qi.Disconnecting&&this._completeClose();return}m=N instanceof Error?N:new Error(N.toString()),I=this._getNextRetryDelay(d++,Date.now()-l,m)}}this._logger.log(Rn.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-l," ms and ").concat(d," failed attempts. Connection disconnecting.")),this._completeClose()}_getNextRetryDelay(i,l,d){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:l,previousRetryCount:i,retryReason:d})}catch(m){return this._logger.log(Rn.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(i,", ").concat(l,") threw error '").concat(m,"'.")),null}}_cancelCallbacksWithError(i){const l=this._callbacks;this._callbacks={},Object.keys(l).forEach(d=>{const m=l[d];try{m(null,i)}catch(I){this._logger.log(Rn.Error,"Stream 'error' callback called with '".concat(i,"' threw error: ").concat(C3(I)))}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(i,l,d,m){if(d)return m.length!==0?{arguments:l,streamIds:m,target:i,type:Dr.Invocation}:{arguments:l,target:i,type:Dr.Invocation};{const I=this._invocationId;return this._invocationId++,m.length!==0?{arguments:l,invocationId:I.toString(),streamIds:m,target:i,type:Dr.Invocation}:{arguments:l,invocationId:I.toString(),target:i,type:Dr.Invocation}}}_launchStreams(i,l){if(i.length!==0){l||(l=Promise.resolve());for(const d in i)i[d].subscribe({complete:()=>{l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d)))},error:m=>{let I;m instanceof Error?I=m.message:m&&m.toString?I=m.toString():I="Unknown error",l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d,I)))},next:m=>{l=l.then(()=>this._sendWithProtocol(this._createStreamItemMessage(d,m)))}})}}_replaceStreamingParams(i){const l=[],d=[];for(let m=0;m<i.length;m++){const I=i[m];if(this._isObservable(I)){const N=this._invocationId;this._invocationId++,l[N]=I,d.push(N.toString()),i.splice(m,1)}}return[l,d]}_isObservable(i){return i&&i.subscribe&&typeof i.subscribe=="function"}_createStreamInvocation(i,l,d){const m=this._invocationId;return this._invocationId++,d.length!==0?{arguments:l,invocationId:m.toString(),streamIds:d,target:i,type:Dr.StreamInvocation}:{arguments:l,invocationId:m.toString(),target:i,type:Dr.StreamInvocation}}_createCancelInvocation(i){return{invocationId:i,type:Dr.CancelInvocation}}_createStreamItemMessage(i,l){return{invocationId:i,item:l,type:Dr.StreamItem}}_createCompletionMessage(i,l,d){return l?{error:l,invocationId:i,type:Dr.Completion}:{invocationId:i,result:d,type:Dr.Completion}}_createCloseMessage(){return{type:Dr.Close}}}const cz=[0,2e3,1e4,3e4,null];class R3{constructor(i){this._retryDelays=i!==void 0?[...i,null]:cz}nextRetryDelayInMilliseconds(i){return this._retryDelays[i.previousRetryCount]}}class Jc{}Jc.Authorization="Authorization";Jc.Cookie="Cookie";class fz extends wE{constructor(i,l){super(),this._innerClient=i,this._accessTokenFactory=l}async send(i){let l=!0;this._accessTokenFactory&&(!this._accessToken||i.url&&i.url.indexOf("/negotiate?")>0)&&(l=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(i);const d=await this._innerClient.send(i);return l&&d.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(i),await this._innerClient.send(i)):d}_setAuthorizationHeader(i){i.headers||(i.headers={}),this._accessToken?i.headers[Jc.Authorization]="Bearer ".concat(this._accessToken):this._accessTokenFactory&&i.headers[Jc.Authorization]&&delete i.headers[Jc.Authorization]}getCookieString(i){return this._innerClient.getCookieString(i)}}var mo;(function(o){o[o.None=0]="None",o[o.WebSockets=1]="WebSockets",o[o.ServerSentEvents=2]="ServerSentEvents",o[o.LongPolling=4]="LongPolling"})(mo||(mo={}));var ra;(function(o){o[o.Text=1]="Text",o[o.Binary=2]="Binary"})(ra||(ra={}));let dz=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class x3{get pollAborted(){return this._pollAbort.aborted}constructor(i,l,d){this._httpClient=i,this._logger=l,this._pollAbort=new dz,this._options=d,this._running=!1,this.onreceive=null,this.onclose=null}async connect(i,l){if(So.isRequired(i,"url"),So.isRequired(l,"transferFormat"),So.isIn(l,ra,"transferFormat"),this._url=i,this._logger.log(Rn.Trace,"(LongPolling transport) Connecting."),l===ra.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[d,m]=vh(),I={[d]:m,...this._options.headers},N={abortSignal:this._pollAbort.signal,headers:I,timeout:1e5,withCredentials:this._options.withCredentials};l===ra.Binary&&(N.responseType="arraybuffer");const p="".concat(i,"&_=").concat(Date.now());this._logger.log(Rn.Trace,"(LongPolling transport) polling: ".concat(p,"."));const w=await this._httpClient.get(p,N);w.statusCode!==200?(this._logger.log(Rn.Error,"(LongPolling transport) Unexpected response code: ".concat(w.statusCode,".")),this._closeError=new Qc(w.statusText||"",w.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,N)}async _poll(i,l){try{for(;this._running;)try{const d="".concat(i,"&_=").concat(Date.now());this._logger.log(Rn.Trace,"(LongPolling transport) polling: ".concat(d,"."));const m=await this._httpClient.get(d,l);m.statusCode===204?(this._logger.log(Rn.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):m.statusCode!==200?(this._logger.log(Rn.Error,"(LongPolling transport) Unexpected response code: ".concat(m.statusCode,".")),this._closeError=new Qc(m.statusText||"",m.statusCode),this._running=!1):m.content?(this._logger.log(Rn.Trace,"(LongPolling transport) data received. ".concat(Yg(m.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(m.content)):this._logger.log(Rn.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(d){this._running?d instanceof Vb?this._logger.log(Rn.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=d,this._running=!1):this._logger.log(Rn.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(d.message))}}finally{this._logger.log(Rn.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(i){return this._running?iB(this._logger,"LongPolling",this._httpClient,this._url,i,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Rn.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Rn.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,"."));const i={},[l,d]=vh();i[l]=d;const m={headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let I;try{await this._httpClient.delete(this._url,m)}catch(N){I=N}I?I instanceof Qc&&(I.statusCode===404?this._logger.log(Rn.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Rn.Trace,"(LongPolling transport) Error sending a DELETE request: ".concat(I))):this._logger.log(Rn.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Rn.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let i="(LongPolling transport) Firing onclose event.";this._closeError&&(i+=" Error: "+this._closeError),this._logger.log(Rn.Trace,i),this.onclose(this._closeError)}}}class hz{constructor(i,l,d,m){this._httpClient=i,this._accessToken=l,this._logger=d,this._options=m,this.onreceive=null,this.onclose=null}async connect(i,l){return So.isRequired(i,"url"),So.isRequired(l,"transferFormat"),So.isIn(l,ra,"transferFormat"),this._logger.log(Rn.Trace,"(SSE transport) Connecting."),this._url=i,this._accessToken&&(i+=(i.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(this._accessToken))),new Promise((d,m)=>{let I=!1;if(l!==ra.Text){m(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let N;if(Ji.isBrowser||Ji.isWebWorker)N=new this._options.EventSource(i,{withCredentials:this._options.withCredentials});else{const p=this._httpClient.getCookieString(i),w={};w.Cookie=p;const[U,x]=vh();w[U]=x,N=new this._options.EventSource(i,{withCredentials:this._options.withCredentials,headers:{...w,...this._options.headers}})}try{N.onmessage=p=>{if(this.onreceive)try{this._logger.log(Rn.Trace,"(SSE transport) data received. ".concat(Yg(p.data,this._options.logMessageContent),".")),this.onreceive(p.data)}catch(w){this._close(w);return}},N.onerror=p=>{I?this._close():m(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},N.onopen=()=>{this._logger.log(Rn.Information,"SSE connected to ".concat(this._url)),this._eventSource=N,I=!0,d()}}catch(p){m(p);return}})}async send(i){return this._eventSource?iB(this._logger,"SSE",this._httpClient,this._url,i,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(i){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(i))}}class pz{constructor(i,l,d,m,I,N){this._logger=d,this._accessTokenFactory=l,this._logMessageContent=m,this._webSocketConstructor=I,this._httpClient=i,this.onreceive=null,this.onclose=null,this._headers=N}async connect(i,l){So.isRequired(i,"url"),So.isRequired(l,"transferFormat"),So.isIn(l,ra,"transferFormat"),this._logger.log(Rn.Trace,"(WebSockets transport) Connecting.");let d;return this._accessTokenFactory&&(d=await this._accessTokenFactory()),new Promise((m,I)=>{i=i.replace(/^http/,"ws");let N;const p=this._httpClient.getCookieString(i);let w=!1;if(Ji.isNode||Ji.isReactNative){const U={},[x,E]=vh();U[x]=E,d&&(U[Jc.Authorization]="Bearer ".concat(d)),p&&(U[Jc.Cookie]=p),N=new this._webSocketConstructor(i,void 0,{headers:{...U,...this._headers}})}else d&&(i+=(i.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(d)));N||(N=new this._webSocketConstructor(i)),l===ra.Binary&&(N.binaryType="arraybuffer"),N.onopen=U=>{this._logger.log(Rn.Information,"WebSocket connected to ".concat(i,".")),this._webSocket=N,w=!0,m()},N.onerror=U=>{let x=null;typeof ErrorEvent<"u"&&U instanceof ErrorEvent?x=U.error:x="There was an error with the transport",this._logger.log(Rn.Information,"(WebSockets transport) ".concat(x,"."))},N.onmessage=U=>{if(this._logger.log(Rn.Trace,"(WebSockets transport) data received. ".concat(Yg(U.data,this._logMessageContent),".")),this.onreceive)try{this.onreceive(U.data)}catch(x){this._close(x);return}},N.onclose=U=>{if(w)this._close(U);else{let x=null;typeof ErrorEvent<"u"&&U instanceof ErrorEvent?x=U.error:x="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",I(new Error(x))}}})}send(i){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Rn.Trace,"(WebSockets transport) sending data. ".concat(Yg(i,this._logMessageContent),".")),this._webSocket.send(i),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(i){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Rn.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(i)&&(i.wasClean===!1||i.code!==1e3)?this.onclose(new Error("WebSocket closed with status code: ".concat(i.code," (").concat(i.reason||"no reason given",")."))):i instanceof Error?this.onclose(i):this.onclose())}_isCloseEvent(i){return i&&typeof i.wasClean=="boolean"&&typeof i.code=="number"}}const N3=100;class gz{constructor(i,l={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,So.isRequired(i,"url"),this._logger=GK(l.logger),this.baseUrl=this._resolveUrl(i),l=l||{},l.logMessageContent=l.logMessageContent===void 0?!1:l.logMessageContent,typeof l.withCredentials=="boolean"||l.withCredentials===void 0)l.withCredentials=l.withCredentials===void 0?!0:l.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");l.timeout=l.timeout===void 0?100*1e3:l.timeout;let d=null,m=null;Ji.isNode&&typeof require<"u"&&(d=QK(),m=JK()),!Ji.isNode&&typeof WebSocket<"u"&&!l.WebSocket?l.WebSocket=WebSocket:Ji.isNode&&!l.WebSocket&&d&&(l.WebSocket=d),!Ji.isNode&&typeof EventSource<"u"&&!l.EventSource?l.EventSource=EventSource:Ji.isNode&&!l.EventSource&&typeof m<"u"&&(l.EventSource=m),this._httpClient=new fz(l.httpClient||new nz(this._logger),l.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=l,this.onreceive=null,this.onclose=null}async start(i){if(i=i||ra.Binary,So.isIn(i,ra,"transferFormat"),this._logger.log(Rn.Debug,"Starting connection with transfer format '".concat(ra[i],"'.")),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(i),await this._startInternalPromise,this._connectionState==="Disconnecting"){const l="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Rn.Error,l),await this._stopPromise,Promise.reject(new fu(l))}else if(this._connectionState!=="Connected"){const l="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Rn.Error,l),Promise.reject(new fu(l))}this._connectionStarted=!0}send(i){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new zb(this.transport)),this._sendQueue.send(i))}async stop(i){if(this._connectionState==="Disconnected")return this._logger.log(Rn.Debug,"Call to HttpConnection.stop(".concat(i,") ignored because the connection is already in the disconnected state.")),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(Rn.Debug,"Call to HttpConnection.stop(".concat(i,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(l=>{this._stopPromiseResolver=l}),await this._stopInternal(i),await this._stopPromise}async _stopInternal(i){this._stopError=i;try{await this._startInternalPromise}catch(l){}if(this.transport){try{await this.transport.stop()}catch(l){this._logger.log(Rn.Error,"HttpConnection.transport.stop() threw error '".concat(l,"'.")),this._stopConnection()}this.transport=void 0}else this._logger.log(Rn.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(i){let l=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===mo.WebSockets)this.transport=this._constructTransport(mo.WebSockets),await this._startTransport(l,i);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let d=null,m=0;do{if(d=await this._getNegotiationResponse(l),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new fu("The connection was stopped during negotiation.");if(d.error)throw new Error(d.error);if(d.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(d.url&&(l=d.url),d.accessToken){const I=d.accessToken;this._accessTokenFactory=()=>I,this._httpClient._accessToken=I,this._httpClient._accessTokenFactory=void 0}m++}while(d.url&&m<N3);if(m===N3&&d.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(l,this._options.transport,d,i)}this.transport instanceof x3&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(Rn.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(d){return this._logger.log(Rn.Error,"Failed to start the connection: "+d),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(d)}}async _getNegotiationResponse(i){const l={},[d,m]=vh();l[d]=m;const I=this._resolveNegotiateUrl(i);this._logger.log(Rn.Debug,"Sending negotiation request: ".concat(I,"."));try{const N=await this._httpClient.post(I,{content:"",headers:{...l,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(N.statusCode!==200)return Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(N.statusCode,"'")));const p=JSON.parse(N.content);return(!p.negotiateVersion||p.negotiateVersion<1)&&(p.connectionToken=p.connectionId),p.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new I3("Client didn't negotiate Stateful Reconnect but the server did.")):p}catch(N){let p="Failed to complete negotiation with the server: "+N;return N instanceof Qc&&N.statusCode===404&&(p=p+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Rn.Error,p),Promise.reject(new I3(p))}}_createConnectUrl(i,l){return l?i+(i.indexOf("?")===-1?"?":"&")+"id=".concat(l):i}async _createTransport(i,l,d,m){let I=this._createConnectUrl(i,d.connectionToken);if(this._isITransport(l)){this._logger.log(Rn.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=l,await this._startTransport(I,m),this.connectionId=d.connectionId;return}const N=[],p=d.availableTransports||[];let w=d;for(const U of p){const x=this._resolveTransportOrError(U,l,m,(w==null?void 0:w.useStatefulReconnect)===!0);if(x instanceof Error)N.push("".concat(U.transport," failed:")),N.push(x);else if(this._isITransport(x)){if(this.transport=x,!w){try{w=await this._getNegotiationResponse(i)}catch(E){return Promise.reject(E)}I=this._createConnectUrl(i,w.connectionToken)}try{await this._startTransport(I,m),this.connectionId=w.connectionId;return}catch(E){if(this._logger.log(Rn.Error,"Failed to start the transport '".concat(U.transport,"': ").concat(E)),w=void 0,N.push(new BK("".concat(U.transport," failed: ").concat(E),mo[U.transport])),this._connectionState!=="Connecting"){const y="Failed to select transport before stop() was called.";return this._logger.log(Rn.Debug,y),Promise.reject(new fu(y))}}}}return N.length>0?Promise.reject(new jK("Unable to connect to the server with any of the available transports. ".concat(N.join(" ")),N)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(i){switch(i){case mo.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new pz(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case mo.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new hz(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case mo.LongPolling:return new x3(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(i,"."))}}_startTransport(i,l){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async d=>{let m=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(i,l),await this.features.resend()}catch(I){m=!0}else{this._stopConnection(d);return}m&&this._stopConnection(d)}:this.transport.onclose=d=>this._stopConnection(d),this.transport.connect(i,l)}_resolveTransportOrError(i,l,d,m){const I=mo[i.transport];if(I==null)return this._logger.log(Rn.Debug,"Skipping transport '".concat(i.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(i.transport,"' because it is not supported by this client."));if(mz(l,I))if(i.transferFormats.map(p=>ra[p]).indexOf(d)>=0){if(I===mo.WebSockets&&!this._options.WebSocket||I===mo.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Rn.Debug,"Skipping transport '".concat(mo[I],"' because it is not supported in your environment.'")),new FK("'".concat(mo[I],"' is not supported in your environment."),I);this._logger.log(Rn.Debug,"Selecting transport '".concat(mo[I],"'."));try{return this.features.reconnect=I===mo.WebSockets?m:void 0,this._constructTransport(I)}catch(p){return p}}else return this._logger.log(Rn.Debug,"Skipping transport '".concat(mo[I],"' because it does not support the requested transfer format '").concat(ra[d],"'.")),new Error("'".concat(mo[I],"' does not support ").concat(ra[d],"."));else return this._logger.log(Rn.Debug,"Skipping transport '".concat(mo[I],"' because it was disabled by the client.")),new UK("'".concat(mo[I],"' is disabled by the client."),I)}_isITransport(i){return i&&typeof i=="object"&&"connect"in i}_stopConnection(i){if(this._logger.log(Rn.Debug,"HttpConnection.stopConnection(".concat(i,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,i=this._stopError||i,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(Rn.Debug,"Call to HttpConnection.stopConnection(".concat(i,") was ignored because the connection is already in the disconnected state."));return}if(this._connectionState==="Connecting")throw this._logger.log(Rn.Warning,"Call to HttpConnection.stopConnection(".concat(i,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(i,") was called while the connection is still in the connecting state."));if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),i?this._logger.log(Rn.Error,"Connection disconnected with error '".concat(i,"'.")):this._logger.log(Rn.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(l=>{this._logger.log(Rn.Error,"TransportSendQueue.stop() threw error '".concat(l,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(i)}catch(l){this._logger.log(Rn.Error,"HttpConnection.onclose(".concat(i,") threw error '").concat(l,"'."))}}}_resolveUrl(i){if(i.lastIndexOf("https://",0)===0||i.lastIndexOf("http://",0)===0)return i;if(!Ji.isBrowser)throw new Error("Cannot resolve '".concat(i,"'."));const l=window.document.createElement("a");return l.href=i,this._logger.log(Rn.Information,"Normalizing '".concat(i,"' to '").concat(l.href,"'.")),l.href}_resolveNegotiateUrl(i){const l=new URL(i);l.pathname.endsWith("/")?l.pathname+="negotiate":l.pathname+="/negotiate";const d=new URLSearchParams(l.searchParams);return d.has("negotiateVersion")||d.append("negotiateVersion",this._negotiateVersion.toString()),d.has("useStatefulReconnect")?d.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&d.append("useStatefulReconnect","true"),l.search=d.toString(),l.toString()}}function mz(o,i){return!o||(i&o)!==0}class zb{constructor(i){this._transport=i,this._buffer=[],this._executing=!0,this._sendBufferedData=new i0,this._transportResult=new i0,this._sendLoopPromise=this._sendLoop()}send(i){return this._bufferData(i),this._transportResult||(this._transportResult=new i0),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(i){if(this._buffer.length&&typeof this._buffer[0]!=typeof i)throw new Error("Expected data to be of type ".concat(typeof this._buffer," but was of type ").concat(typeof i));this._buffer.push(i),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new i0;const i=this._transportResult;this._transportResult=void 0;const l=typeof this._buffer[0]=="string"?this._buffer.join(""):zb._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(l),i.resolve()}catch(d){i.reject(d)}}}static _concatBuffers(i){const l=i.map(I=>I.byteLength).reduce((I,N)=>I+N),d=new Uint8Array(l);let m=0;for(const I of i)d.set(new Uint8Array(I),m),m+=I.byteLength;return d.buffer}}class i0{constructor(){this.promise=new Promise((i,l)=>[this._resolver,this._rejecter]=[i,l])}resolve(){this._resolver()}reject(i){this._rejecter(i)}}const vz="json";class yz{constructor(){this.name=vz,this.version=2,this.transferFormat=ra.Text}parseMessages(i,l){if(typeof i!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!i)return[];l===null&&(l=zg.instance);const d=fs.parse(i),m=[];for(const I of d){const N=JSON.parse(I);if(typeof N.type!="number")throw new Error("Invalid payload.");switch(N.type){case Dr.Invocation:this._isInvocationMessage(N);break;case Dr.StreamItem:this._isStreamItemMessage(N);break;case Dr.Completion:this._isCompletionMessage(N);break;case Dr.Ping:break;case Dr.Close:break;case Dr.Ack:this._isAckMessage(N);break;case Dr.Sequence:this._isSequenceMessage(N);break;default:l.log(Rn.Information,"Unknown message type '"+N.type+"' ignored.");continue}m.push(N)}return m}writeMessage(i){return fs.write(JSON.stringify(i))}_isInvocationMessage(i){this._assertNotEmptyString(i.target,"Invalid payload for Invocation message."),i.invocationId!==void 0&&this._assertNotEmptyString(i.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(i){if(this._assertNotEmptyString(i.invocationId,"Invalid payload for StreamItem message."),i.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(i){if(i.result&&i.error)throw new Error("Invalid payload for Completion message.");!i.result&&i.error&&this._assertNotEmptyString(i.error,"Invalid payload for Completion message."),this._assertNotEmptyString(i.invocationId,"Invalid payload for Completion message.")}_isAckMessage(i){if(typeof i.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(i){if(typeof i.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(i,l){if(typeof i!="string"||i==="")throw new Error(l)}}const Ez={trace:Rn.Trace,debug:Rn.Debug,info:Rn.Information,information:Rn.Information,warn:Rn.Warning,warning:Rn.Warning,error:Rn.Error,critical:Rn.Critical,none:Rn.None};function _z(o){const i=Ez[o.toLowerCase()];if(typeof i<"u")return i;throw new Error("Unknown log level: ".concat(o))}class oB{configureLogging(i){if(So.isRequired(i,"logging"),Tz(i))this.logger=i;else if(typeof i=="string"){const l=_z(i);this.logger=new W0(l)}else this.logger=new W0(i);return this}withUrl(i,l){return So.isRequired(i,"url"),So.isNotEmpty(i,"url"),this.url=i,typeof l=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...l}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:l},this}withHubProtocol(i){return So.isRequired(i,"protocol"),this.protocol=i,this}withAutomaticReconnect(i){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return i?Array.isArray(i)?this.reconnectPolicy=new R3(i):this.reconnectPolicy=i:this.reconnectPolicy=new R3,this}withServerTimeout(i){return So.isRequired(i,"milliseconds"),this._serverTimeoutInMilliseconds=i,this}withKeepAliveInterval(i){return So.isRequired(i,"milliseconds"),this._keepAliveIntervalInMilliseconds=i,this}withStatefulReconnect(i){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=i==null?void 0:i.bufferSize,this}build(){const i=this.httpConnectionOptions||{};if(i.logger===void 0&&(i.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const l=new gz(this.url,i);return Kb.create(l,this.logger||zg.instance,this.protocol||new yz,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function Tz(o){return o.log!==void 0}class Sz extends df{constructor(i){var l;super(),this.options=i,this.hubConnection=i.hubConnection,this.updateIntervalFrequency=(l=i.updateIntervalFrequency)!=null?l:6e4*5}async getServerTimeOffset(){const i=await this.getSyncedTime();this.emit("serverTimeOffsetUpdate",{serverTimeOffset:Date.now()-i.getTime()}),!(this.updateIntervalFrequency<6e4)&&(this.timeoutInstance=setTimeout(this.getServerTimeOffset.bind(this),this.updateIntervalFrequency))}async start(){await this.getServerTimeOffset()}async getSyncedTime(){const i=this,l=12,d=1e4,m=20;let I;return await new Promise((N,p)=>{var T;const w=[];let U=0,x,E;function y(){var F;E=Date.now(),(F=i.hubConnection)==null||F.invoke("echo"),x=setTimeout(()=>{p(new Error("Did not get sufficient echoes from the server in time"))},d)}function P(F){I=F,clearTimeout(x),w.push(Date.now()-E),U++,U<l?setTimeout(y,m):g()}(T=i.hubConnection)==null||T.on("echo",P);function g(){var M;if((M=i.hubConnection)==null||M.off("echo",P),I===void 0){p(new Error("Server timestamp is undefined"));return}let F;i.options.roundtripCalcStrategy==="mean"?F=w.reduce((_,A)=>_+A)/w.length:F=RK(w),N(new Date(I+F/2))}y()})}destroy(){clearTimeout(this.timeoutInstance)}}const ou={STATE_UPDATE:"OnStateUpdated",RECIEVE_GROUP_COMMAND:"receiveGroupCommand",RECIEVE_GLOBAL_COMMAND:"receiveGlobalCommand",CLIENT_DISCONNECT:"DeviceLogOut",SETUP_REQUEST_HOST_TV_CONNECTED:"SetupRequestHostTvConnected",SETUP_STATUS_UPDATE:"SetupStatusUpdate",SETUP_ERROR_RECEIVED:"SetupErrorReceived"},wC={WAITING_FOR_HOST:"WaitingForHostState",READY_TO_PAIR_WITH_HOST:"ShowQrCodeState",CONNECTED_STATE:"ConnectedState",SHOW_QR_CODE_STATE:"ShowQrCode",HOST_TV_STATE:"HostTVState",IDLE:"Idle"};class wz extends df{constructor({deviceId:i,debug:l,groupName:d}){super(),this.hubConnection=null,this.serverTimeService=null,this.state=wC.IDLE,this.deviceId=i,this.debugLogging=l!=null?l:!1,this.groupName=d}setupTimeService(){this.serverTimeService=new Sz({hubConnection:this.hubConnection}),this.serverTimeService.on("serverTimeOffsetUpdate",i=>{this.emit("serverTimeOffsetUpdate",i)}),this.serverTimeService.start()}async join(){await this.sendGroupCommand({command:"join",value:this.deviceId})}async disconnect(){var i;console.log("SignalR: disconnect",ou.CLIENT_DISCONNECT,{deviceId:this.deviceId}),await((i=this.hubConnection)==null?void 0:i.invoke(ou.CLIENT_DISCONNECT))}connect({url:i,accessToken:l}){var d;this.hubConnection=new oB().withUrl(i,{accessTokenFactory:()=>l,transport:mo.WebSockets}).configureLogging(this.debugLogging?Rn.Trace:Rn.Information).build(),(d=this.hubConnection)==null||d.start().then(()=>{this.setupTimeService(),this.connectEventHandlers(),this.join()}).catch(m=>{console.error("Connection failed:",m)})}connectEventHandlers(){var i,l,d,m,I,N;(i=this.hubConnection)==null||i.on(ou.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.on(ou.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.on(ou.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),(m=this.hubConnection)==null||m.on(ou.SETUP_STATUS_UPDATE,this.onSetupStatusUpdate.bind(this)),(I=this.hubConnection)==null||I.onclose(p=>{p?console.error("SignalR: closed with error",p):console.log("SignalR: closed")}),(N=this.hubConnection)==null||N.onreconnected(p=>{p?console.error("SignalR: Reconnected error",p):console.log("SignalR: Reconnected")})}async destroy(){var i,l,d,m,I;(i=this.hubConnection)==null||i.off(ou.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.off(ou.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.off(ou.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),await this.disconnect(),await((m=this.hubConnection)==null?void 0:m.stop()),(I=this.serverTimeService)==null||I.destroy(),super.destroy()}onReceiveGroupCommand(i){var l,d,m,I,N;switch(console.log("onReceiveGroupCommand",i),i.command){case"play":this.emit("startTimeUpdated",{startTime:new Date(i.value.startDate)}),((l=i.value.rateClockState)==null?void 0:l.rate)===0?this.emit("pausePlayStream",{command:"pause",reference:(d=i.value.rateClockState)==null?void 0:d.reference,start:(m=i.value.rateClockState)==null?void 0:m.start}):this.emit("pausePlayStream",{command:"play",reference:(I=i.value.rateClockState)==null?void 0:I.reference,start:(N=i.value.rateClockState)==null?void 0:N.start});break;case"cast":this.emit("cast",{index:i.value});break;case"prepareCast":this.emit("prepareCast",{index:i.value});break;case"cancelCast":console.log("cancelCast");break}}onReceiveGlobalCommand(i){switch(console.log("onReceiveGlobalCommand",i),i.command){case"status_changed":this.emit("eventStatusChanged",void 0);break;case"event_canceled":this.emit("eventCanceled",void 0);break}}async sendGroupCommand(i){var l;return await((l=this.hubConnection)==null?void 0:l.invoke("sendGroupCommand",{groupName:this.groupName,arguments:[i]}))}onStateUpdate(i){switch(this.state=i.state.$type,i.state.$type){case wC.CONNECTED_STATE:if(!i.state.sessionId)return;this.emit("connected",{sessionId:i.state.sessionId}),this.emit("stateUpdated",{state:this.state});return;default:this.emit("stateUpdated",{state:this.state});break}}onSetupStatusUpdate(i){console.log("SetupStatusUpdate: ",i),this.emit("setupStatusUpdate",{deviceLists:i})}}async function Th(o,i,l){var d;try{const m=await fetch(o,i);switch(m.status){case 401:throw new ug(l==null?void 0:l.name,"Unauthorized","Unauthorized",m.status);case 403:throw new ug(l==null?void 0:l.name,"Forbidden","Forbidden",m.status)}const I=await m.json();if(!m.ok)throw new ug(l==null?void 0:l.name,(d=I.sys)==null?void 0:d.id,I.message,m.status);return I}catch(m){throw m instanceof ug?m:new ug(l.name,"Network Error",l.message||"Could not make the request")}}var AC={exports:{}};(function(o,i){(function(l,d){var m="1.0.38",I="",N="?",p="function",w="undefined",U="object",x="string",E="major",y="model",P="name",g="type",T="vendor",F="version",M="architecture",_="console",A="mobile",b="tablet",Z="smarttv",Y="wearable",$="embedded",Q=500,se="Amazon",C="Apple",X="ASUS",ce="BlackBerry",oe="Browser",me="Chrome",be="Edge",Je="Firefox",we="Google",qe="Huawei",st="LG",ft="Microsoft",Ce="Motorola",He="Opera",vt="Samsung",Re="Sharp",Ye="Sony",ot="Xiaomi",Ht="Zebra",Bt="Facebook",Et="Chromium OS",Dt="Mac OS",Ne=function(ht,_t){var Tt={};for(var Mt in ht)_t[Mt]&&_t[Mt].length%2===0?Tt[Mt]=_t[Mt].concat(ht[Mt]):Tt[Mt]=ht[Mt];return Tt},ne=function(ht){for(var _t={},Tt=0;Tt<ht.length;Tt++)_t[ht[Tt].toUpperCase()]=ht[Tt];return _t},Be=function(ht,_t){return typeof ht===x?L(_t).indexOf(L(ht))!==-1:!1},L=function(ht){return ht.toLowerCase()},D=function(ht){return typeof ht===x?ht.replace(/[^\d\.]/g,I).split(".")[0]:d},G=function(ht,_t){if(typeof ht===x)return ht=ht.replace(/^\s\s*/,I),typeof _t===w?ht:ht.substring(0,Q)},K=function(ht,_t){for(var Tt=0,Mt,_n,rn,cn,Ft,Gn;Tt<_t.length&&!Ft;){var Sr=_t[Tt],Gr=_t[Tt+1];for(Mt=_n=0;Mt<Sr.length&&!Ft&&Sr[Mt];)if(Ft=Sr[Mt++].exec(ht),Ft)for(rn=0;rn<Gr.length;rn++)Gn=Ft[++_n],cn=Gr[rn],typeof cn===U&&cn.length>0?cn.length===2?typeof cn[1]==p?this[cn[0]]=cn[1].call(this,Gn):this[cn[0]]=cn[1]:cn.length===3?typeof cn[1]===p&&!(cn[1].exec&&cn[1].test)?this[cn[0]]=Gn?cn[1].call(this,Gn,cn[2]):d:this[cn[0]]=Gn?Gn.replace(cn[1],cn[2]):d:cn.length===4&&(this[cn[0]]=Gn?cn[3].call(this,Gn.replace(cn[1],cn[2])):d):this[cn]=Gn||d;Tt+=2}},ge=function(ht,_t){for(var Tt in _t)if(typeof _t[Tt]===U&&_t[Tt].length>0){for(var Mt=0;Mt<_t[Tt].length;Mt++)if(Be(_t[Tt][Mt],ht))return Tt===N?d:Tt}else if(Be(_t[Tt],ht))return Tt===N?d:Tt;return ht},pe={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},wt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[F,[P,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[F,[P,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[P,F],[/opios[\/ ]+([\w\.]+)/i],[F,[P,He+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[F,[P,He+" GX"]],[/\bopr\/([\w\.]+)/i],[F,[P,He]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[F,[P,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[P,F],[/\bddg\/([\w\.]+)/i],[F,[P,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[F,[P,"UC"+oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[F,[P,"WeChat"]],[/konqueror\/([\w\.]+)/i],[F,[P,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[F,[P,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[F,[P,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[F,[P,"Smart Lenovo "+oe]],[/(avast|avg)\/([\w\.]+)/i],[[P,/(.+)/,"$1 Secure "+oe],F],[/\bfocus\/([\w\.]+)/i],[F,[P,Je+" Focus"]],[/\bopt\/([\w\.]+)/i],[F,[P,He+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[F,[P,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[F,[P,"Dolphin"]],[/coast\/([\w\.]+)/i],[F,[P,He+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[F,[P,"MIUI "+oe]],[/fxios\/([-\w\.]+)/i],[F,[P,Je]],[/\bqihu|(qi?ho?o?|360)browser/i],[[P,"360 "+oe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[P,/(.+)/,"$1 "+oe],F],[/samsungbrowser\/([\w\.]+)/i],[F,[P,vt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[P,/_/g," "],F],[/metasr[\/ ]?([\d\.]+)/i],[F,[P,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[P,"Sogou Mobile"],F],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[P,F],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[P],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[P,Bt],F],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[P,F],[/\bgsa\/([\w\.]+) .*safari\//i],[F,[P,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[F,[P,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[F,[P,me+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[P,me+" WebView"],F],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[F,[P,"Android "+oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[P,F],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[F,[P,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[F,P],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[P,[F,ge,pe]],[/(webkit|khtml)\/([\w\.]+)/i],[P,F],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[P,"Netscape"],F],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[F,[P,Je+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[P,F],[/(cobalt)\/([\w\.]+)/i],[P,[F,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[M,"amd64"]],[/(ia32(?=;))/i],[[M,L]],[/((?:i[346]|x)86)[;\)]/i],[[M,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[M,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[M,"armhf"]],[/windows (ce|mobile); ppc;/i],[[M,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[M,/ower/,I,L]],[/(sun4\w)[;\)]/i],[[M,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[M,L]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[y,[T,vt],[g,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[y,[T,vt],[g,A]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[y,[T,C],[g,A]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[y,[T,C],[g,b]],[/(macintosh);/i],[y,[T,C]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[y,[T,Re],[g,A]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[y,[T,qe],[g,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[y,[T,qe],[g,A]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[y,/_/g," "],[T,ot],[g,A]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[y,/_/g," "],[T,ot],[g,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[y,[T,"OPPO"],[g,A]],[/\b(opd2\d{3}a?) bui/i],[y,[T,"OPPO"],[g,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[y,[T,"Vivo"],[g,A]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[y,[T,"Realme"],[g,A]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[y,[T,Ce],[g,A]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[y,[T,Ce],[g,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[y,[T,st],[g,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[y,[T,st],[g,A]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[y,[T,"Lenovo"],[g,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[y,/_/g," "],[T,"Nokia"],[g,A]],[/(pixel c)\b/i],[y,[T,we],[g,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[y,[T,we],[g,A]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[y,[T,Ye],[g,A]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[y,"Xperia Tablet"],[T,Ye],[g,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[y,[T,"OnePlus"],[g,A]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[y,[T,se],[g,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[y,/(.+)/g,"Fire Phone $1"],[T,se],[g,A]],[/(playbook);[-\w\),; ]+(rim)/i],[y,T,[g,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[y,[T,ce],[g,A]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[y,[T,X],[g,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[y,[T,X],[g,A]],[/(nexus 9)/i],[y,[T,"HTC"],[g,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[y,/_/g," "],[g,A]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[y,[T,"Acer"],[g,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[y,[T,"Meizu"],[g,A]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[y,[T,"Ulefone"],[g,A]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,y,[g,A]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,y,[g,b]],[/(surface duo)/i],[y,[T,ft],[g,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[y,[T,"Fairphone"],[g,A]],[/(u304aa)/i],[y,[T,"AT&T"],[g,A]],[/\bsie-(\w*)/i],[y,[T,"Siemens"],[g,A]],[/\b(rct\w+) b/i],[y,[T,"RCA"],[g,b]],[/\b(venue[\d ]{2,7}) b/i],[y,[T,"Dell"],[g,b]],[/\b(q(?:mv|ta)\w+) b/i],[y,[T,"Verizon"],[g,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[y,[T,"Barnes & Noble"],[g,b]],[/\b(tm\d{3}\w+) b/i],[y,[T,"NuVision"],[g,b]],[/\b(k88) b/i],[y,[T,"ZTE"],[g,b]],[/\b(nx\d{3}j) b/i],[y,[T,"ZTE"],[g,A]],[/\b(gen\d{3}) b.+49h/i],[y,[T,"Swiss"],[g,A]],[/\b(zur\d{3}) b/i],[y,[T,"Swiss"],[g,b]],[/\b((zeki)?tb.*\b) b/i],[y,[T,"Zeki"],[g,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],y,[g,b]],[/\b(ns-?\w{0,9}) b/i],[y,[T,"Insignia"],[g,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[y,[T,"NextBook"],[g,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],y,[g,A]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],y,[g,A]],[/\b(ph-1) /i],[y,[T,"Essential"],[g,A]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[y,[T,"Envizen"],[g,b]],[/\b(trio[-\w\. ]+) b/i],[y,[T,"MachSpeed"],[g,b]],[/\btu_(1491) b/i],[y,[T,"Rotor"],[g,b]],[/(shield[\w ]+) b/i],[y,[T,"Nvidia"],[g,b]],[/(sprint) (\w+)/i],[T,y,[g,A]],[/(kin\.[onetw]{3})/i],[[y,/\./g," "],[T,ft],[g,A]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[y,[T,Ht],[g,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[y,[T,Ht],[g,A]],[/smart-tv.+(samsung)/i],[T,[g,Z]],[/hbbtv.+maple;(\d+)/i],[[y,/^/,"SmartTV"],[T,vt],[g,Z]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,st],[g,Z]],[/(apple) ?tv/i],[T,[y,C+" TV"],[g,Z]],[/crkey/i],[[y,me+"cast"],[T,we],[g,Z]],[/droid.+aft(\w+)( bui|\))/i],[y,[T,se],[g,Z]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[y,[T,Re],[g,Z]],[/(bravia[\w ]+)( bui|\))/i],[y,[T,Ye],[g,Z]],[/(mitv-\w{5}) bui/i],[y,[T,ot],[g,Z]],[/Hbbtv.*(technisat) (.*);/i],[T,y,[g,Z]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,G],[y,G],[g,Z]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[g,Z]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,y,[g,_]],[/droid.+; (shield) bui/i],[y,[T,"Nvidia"],[g,_]],[/(playstation [345portablevi]+)/i],[y,[T,Ye],[g,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[y,[T,ft],[g,_]],[/((pebble))app/i],[T,y,[g,Y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[y,[T,C],[g,Y]],[/droid.+; (glass) \d/i],[y,[T,we],[g,Y]],[/droid.+; (wt63?0{2,3})\)/i],[y,[T,Ht],[g,Y]],[/(quest( \d| pro)?)/i],[y,[T,Bt],[g,Y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[g,$]],[/(aeobc)\b/i],[y,[T,se],[g,$]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[y,[g,A]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[y,[g,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[g,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[g,A]],[/(android[-\w\. ]{0,9});.+buil/i],[y,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[F,[P,be+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[F,[P,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[P,F],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[F,P]],os:[[/microsoft (windows) (vista|xp)/i],[P,F],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[P,[F,ge,Ke]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[F,ge,Ke],[P,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[F,/_/g,"."],[P,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[P,Dt],[F,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[F,P],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[P,F],[/\(bb(10);/i],[F,[P,ce]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[F,[P,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[F,[P,Je+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[F,[P,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[F,[P,"watchOS"]],[/crkey\/([\d\.]+)/i],[F,[P,me+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[P,Et],F],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[P,F],[/(sunos) ?([\w\.\d]*)/i],[[P,"Solaris"],F],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[P,F]]},lt=function(ht,_t){if(typeof ht===U&&(_t=ht,ht=d),!(this instanceof lt))return new lt(ht,_t).getResult();var Tt=typeof l!==w&&l.navigator?l.navigator:d,Mt=ht||(Tt&&Tt.userAgent?Tt.userAgent:I),_n=Tt&&Tt.userAgentData?Tt.userAgentData:d,rn=_t?Ne(wt,_t):wt,cn=Tt&&Tt.userAgent==Mt;return this.getBrowser=function(){var Ft={};return Ft[P]=d,Ft[F]=d,K.call(Ft,Mt,rn.browser),Ft[E]=D(Ft[F]),cn&&Tt&&Tt.brave&&typeof Tt.brave.isBrave==p&&(Ft[P]="Brave"),Ft},this.getCPU=function(){var Ft={};return Ft[M]=d,K.call(Ft,Mt,rn.cpu),Ft},this.getDevice=function(){var Ft={};return Ft[T]=d,Ft[y]=d,Ft[g]=d,K.call(Ft,Mt,rn.device),cn&&!Ft[g]&&_n&&_n.mobile&&(Ft[g]=A),cn&&Ft[y]=="Macintosh"&&Tt&&typeof Tt.standalone!==w&&Tt.maxTouchPoints&&Tt.maxTouchPoints>2&&(Ft[y]="iPad",Ft[g]=b),Ft},this.getEngine=function(){var Ft={};return Ft[P]=d,Ft[F]=d,K.call(Ft,Mt,rn.engine),Ft},this.getOS=function(){var Ft={};return Ft[P]=d,Ft[F]=d,K.call(Ft,Mt,rn.os),cn&&!Ft[P]&&_n&&_n.platform&&_n.platform!="Unknown"&&(Ft[P]=_n.platform.replace(/chrome os/i,Et).replace(/macos/i,Dt)),Ft},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Mt},this.setUA=function(Ft){return Mt=typeof Ft===x&&Ft.length>Q?G(Ft,Q):Ft,this},this.setUA(Mt),this};lt.VERSION=m,lt.BROWSER=ne([P,F,E]),lt.CPU=ne([M]),lt.DEVICE=ne([y,T,g,_,A,Z,b,Y,$]),lt.ENGINE=lt.OS=ne([P,F]),o.exports&&(i=o.exports=lt),i.UAParser=lt;var ut=typeof l!==w&&(l.jQuery||l.Zepto);if(ut&&!ut.ua){var nt=new lt;ut.ua=nt.getResult(),ut.ua.get=function(){return nt.getUA()},ut.ua.set=function(ht){nt.setUA(ht);var _t=nt.getResult();for(var Tt in _t)ut.ua[Tt]=_t[Tt]}}})(typeof window=="object"?window:cu)})(AC,AC.exports);var Az=AC.exports;const M3=new Az.UAParser;function Iz(o){const i=M3.getOS(),l=M3.getBrowser();return"Gigset/".concat(o," (").concat(i.name," ").concat(i.version,"; ").concat(l.name," ").concat(l.version,")")}function Wg({sessionId:o,appVersion:i,apiVersion:l}){const d={"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*","Gigset-Client":Iz(i),"Api-version":l!=null?l:"v1"};return o&&(d.Session=o),d}async function Cz({deviceId:o,appVersion:i,baseUrl:l}){const d={deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(o,")"),deviceId:o};return(await Th)("".concat(l,"/devicehub-api/negotiate-tv"),{method:"POST",body:JSON.stringify(d),headers:Wg({appVersion:i})},{name:ls.NEGOTIATE_TV,message:"could not fetch negotiate-tv data"})}async function bz({deviceId:o,ticketCode:i,scanTvDeviceId:l,appVersion:d,baseUrl:m,ticketPrefix:I}){let N=m;I&&(N="".concat(m));const p={ticketCode:i,deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(o,")"),deviceId:o,scanTvDeviceId:l};return(await Th)("".concat(N,"/devicehub-api/negotiate"),{method:"POST",body:JSON.stringify(p),headers:Wg({appVersion:d})},{name:ls.NEGOTIATE,message:"could not fetch negotiate data"})}async function D3({sessionId:o,appVersion:i,baseUrl:l,ticketPrefix:d,ticketCode:m}){let I=l;d&&(I="".concat(l,"/").concat(d));const N=await Th("".concat(I,"/timeline-api/timeline/").concat(m,"/generate"),{method:"GET",headers:Wg({sessionId:o,appVersion:i})},{name:ls.GENERATE,message:"could not fetch generate data"});return{...await fetch("".concat(N.timelineUrl).concat(N.queryParameters),{method:"GET",headers:Wg({sessionId:o,appVersion:i})}).then(async w=>await w.json()),queryParameters:N.queryParameters,distributionUrl:N.distributionUrl}}async function P3({sessionId:o,appVersion:i,baseUrl:l,ticketCode:d}){return(await Th)("".concat(l,"/static-api/event/").concat(d,"/status"),{method:"GET",headers:Wg({sessionId:o,appVersion:i})},{name:ls.EVENT_STATUS,message:"failed to get event status data"})}function Rz(o){return"".concat(o,"/timeline-api/drm/license?drm=widevine")}var Hc=(o=>(o.JUMPSPOT="jumpspot",o.FOLLOW="follow",o))(Hc||{});function Yb(o){return[...o.places.flatMap((i,l)=>i.jumpSpots.map(d=>({camera:d.camera,title:d.title,type:"jumpspot",placeIndex:l,mapPosition:i.mapPosition,mapScale:i.mapScale,placeTitle:i.title}))),...o.follows.map(i=>({camera:i.camera,title:i.title,type:"follow",mapPosition:i.mapPositions}))].map((i,l)=>({...i,index:l}))}function AE(o,i){return Yb(o).filter(d=>{const m=bi(d.camera.span.time,o.frameRate),I=bi(d.camera.span.time,o.frameRate)+bi(d.camera.span.duration,o.frameRate);return m<=i&&I>=i})}function aB(o,i,l,d){const m=AE(o,i+l+2);if(!m.length)return;if(d){const p=(d==null?void 0:d.placeIndex)!==void 0&&m.find(w=>w.type==="jumpspot"&&w.placeIndex===(d==null?void 0:d.placeIndex));if(p)return p}const I=m.find(p=>p.type==="jumpspot");if(I)return I;const N=m.find(p=>p.type==="follow");if(N)return N}function xz(o){const i=Yb(o),l=o.frameRate;return i.sort((d,m)=>{const I=bi(d.camera.span.time,l)+bi(d.camera.span.duration,l);return bi(m.camera.span.time,l)+bi(m.camera.span.duration,l)-I}),i[0]}function bi(o,i){if(!o)return 0;const[l,d,m,I]=o.split(":").map(Number),N=l*60*60,p=d*60;if(i){const w=I/i;return N+p+m+w}else return N+p+m}function IC(o,i,l){return AE(i,l.getExpectedPositionInSeconds()).find(d=>d.index===o)}function O3(o,i){return Yb(i).find(d=>d.camera.cameraID===o)}const Nz=o=>{if(typeof o=="string")return"String!";if(typeof o=="number")return"Int";if(typeof o=="boolean")return"Boolean";if(typeof o=="object"&&"OR"in o)return"ResourceSetFilter";throw new Error("Unknown type: ".concat(typeof o))};function sB(o,i,l){const d=o.includes("staging")||o.includes("qa"),m={...l,preview:d},N=(Array.isArray(i)?i[0]:i).replace(/#.*/g,"").replace(/\\n/g," ").replace(/\s\s+/g," ").replace(/\s*({|}|\(|\)|\.|:|,)\s*/g,"$1"),p=Object.entries(m).map(([U,x])=>"$".concat(U,": ").concat(Nz(x))).join(", "),w="query(".concat(p,")").concat(N);return JSON.stringify({query:w,variables:m})}const uB=o=>"https://graphql.contentful.com/content/v1/spaces/".concat(o,"/environments/master");function lB(o,i){return{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:o}}const Mz=(o,i)=>sB(i,"\n        {\n          eventCollection(\n            limit: 1\n            preview: $preview\n            where: { ticketCodePrefix: $ticketCodePrefix }\n          ) {\n            items {\n              title\n              timeZoneInSecondsFromGmt\n              timeZoneCode\n              preScreen {\n                showTitle\n                countdownTitle\n                startTimeSubtitle\n                logoutButtonTitle\n                setupGuideButtonTitle\n                backgroundLandscape {\n                  url\n                }\n                backgroundPortrait {\n                  url\n                }\n                logoLeft {\n                  url\n                }\n                logoRight {\n                  url\n                }\n              }\n              upsell {\n                title\n                web {\n                  title\n                  body\n                  image {\n                    url\n                  }\n                  linkTitle\n                  link\n                  upsellLink {\n                    label\n                    url\n                  }\n                }\n              }\n              postScreen {\n                title\n                body\n                logoutButtonTitle\n                scanQrCodeLabel\n                offersCollection(limit: 10) {\n                  items {\n                    link\n                    image {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      ",{preview:!0,ticketCodePrefix:o});async function L3(o,i,l,d){var N,p;const m=Mz(o.toUpperCase(),i),I=await Th(uB(d),lB(m,l),{name:ls.EVENT_META,message:"Could not fetch event meta."});return(p=(N=I==null?void 0:I.data)==null?void 0:N.eventCollection.items)==null?void 0:p[0]}function Dz(o,i){const l=o.reduce((d,m)=>(d.OR.push({slug:m}),d),{OR:[]});return sB(i,"\n        {\n          resourceSetCollection(preview: $preview, where: $resourceSetFilter) {\n            items {\n              slug\n              resourcesCollection {\n                items {\n                  key\n                  value\n                }\n              }\n            }\n          }\n        }\n      ",{resourceSetFilter:l})}async function Pz(o,i,l){var I,N;const d=Dz(["app-general","player","setup-guide","setup","ticket-entry","web-requirements","web-app-pair"],o);return(N=(I=(await Th(uB(l),lB(d,i),{name:ls.CONTENTFUL,message:"Could not fetch contentful data."})).data)==null?void 0:I.resourceSetCollection)==null?void 0:N.items}window.tolerance=.25;window.timeout=4e3;const k3=window.tolerance;class Oz{constructor(){this.connectedSources=new Map,this._offset=0,this._switchingInProgress=!1}start(){}stop(){}setVelocity(i){console.log("velocity",i)}updatePosition(i){console.log("#>> update position",i)}connectMediaElement(i,l=0){this._videoElement=i,this._offset=l}disconnectMedia(){this._videoElement=null,this._offset=0}sync(i){if(this._videoElement&&!this._switchingInProgress){const l=this._videoElement,d=i-l.currentTime-this._offset;console.log("diff",d),(d>k3||d<-k3)&&!this._switchingInProgress&&(this._switchingInProgress=!0,l.pause(),l.currentTime=l.currentTime+d+.8,l.play(),setTimeout(()=>{this._switchingInProgress=!1},window.timeout))}}destroy(){}}class Lz extends df{constructor(i){super(),this.isPaused=!1,this.playheadOffset=0,this.timelineFetchBuffer=3e5,this.prepareBuffer=1e4,this.playerSyncer=new Oz,this.state="idle",this.startTime=i,this.serverTimeOffset=0}get adjustedStartTime(){return this.startTime.getTime()?this.startTime.getTime()+this.serverTimeOffset:0}get isLive(){const i=this.adjustedEndTime;return this.adjustedStartTime&&this.adjustedStartTime<Date.now()&&i&&i>Date.now()}get timeToPrepareStart(){return this.adjustedStartTime-Date.now()-this.prepareBuffer}get isInPrepare(){return this.timeToPrepareStart<0&&this.timeToPrepareStart>this.prepareBuffer*-1}get adjustedEndTime(){if(!this.adjustedStartTime||!this._timelineData)return 0;const i=this._timelineData.frameRate,l=xz(this._timelineData);return this.adjustedStartTime+(bi(l.camera.span.time,i)+bi(l.camera.span.duration,i))*1e3+this.playheadOffset*1e3}get demoEndtime(){return Date.now()-7047966+1e4}set timelineData(i){this._timelineData=i}pausePlayStream(i,l,d){if(i==="pause"&&!this.isPaused)this.isPaused=!0,this.playerSyncer.stop();else if(i==="play"){if(l&&d){const m=new Date(l).getTime()/1e3,I=new Date(d).getTime()/1e3;this.playheadOffset!==0&&(this.playheadOffset=0),this.playheadOffset=m-I,this.playerSyncer.updatePosition(this.getExpectedPositionInSeconds())}this.onStart()}}serverNow(){return Date.now()-this.serverTimeOffset}onStart(){this.state="started",this.emit("start",void 0),this.isPaused=!1,this.playerSyncer.start(),clearInterval(this.queryInterval),this.queryInterval=setInterval(()=>{const i=this.getExpectedPositionInSeconds();this.isPaused||this.playerSyncer.sync(i)},500)}onPrepareStart(){this.emit("prepareStart",void 0)}updateStartTime(i,l=!1){this.startTime=i,this.emit("startTimeUpdated",void 0),this.preparePlayback(),l&&this.adjustedStartTime>Date.now()&&this.updateTimelineFetch()}updateTimelineFetch(){this.adjustedStartTime-this.timelineFetchBuffer>Date.now()?(clearTimeout(this.fetchTimelineTimeout),this.fetchTimelineTimeout=setTimeout(()=>{this.emit("fetchTimeline",void 0)},this.adjustedStartTime-this.timelineFetchBuffer-Date.now())):this.emit("fetchTimeline",void 0)}preparePlayback(){this.adjustedStartTime>Date.now()?(clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),this.playheadOffset=0,this.startTimeout=setTimeout(()=>{this.onStart()},this.adjustedStartTime-Date.now()),this.timeToPrepareStart>0?this.prepareStartTimeout=setTimeout(()=>{this.onPrepareStart()},this.timeToPrepareStart):this.onPrepareStart()):this.state!=="started"&&this._timelineData&&this.onStart()}updateServerTimeOffset(i){this.serverTimeOffset=i}getExpectedPositionInSeconds(){return(Date.now()-this.adjustedStartTime)/1e3-this.playheadOffset}destroy(){clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),clearInterval(this.queryInterval),clearTimeout(this.fetchTimelineTimeout),super.destroy()}}class kz extends df{constructor(i,l,d){super(),this.eventClock=i,this.timelineData=void 0,this.nearEndThreshold=l!=null?l:0,this.transitionThreshold=d!=null?d:2}updateTimelineData(i){this.timelineData=i}updatePlaying(i){var d,m,I;let l=!1;if(this.timelineData){const N=this.timelineData.frameRate,p=(I=(m=(d=i.camera.attentions)==null?void 0:d.filter(w=>w.scope==="global"))==null?void 0:m.sort((w,U)=>bi(w.time)-bi(U.time)))!=null?I:[];clearInterval(this.playbackInterval),this.playbackInterval=setInterval(()=>{clearTimeout(this.nearEndTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.attentionTimeout);const U=this.eventClock.getExpectedPositionInSeconds()-bi(i.camera.span.time,N),x=bi(i.camera.span.duration,N)-U;if(p.length){const E=p.find(P=>U<bi(P.time)),y=E?bi(E.time)-U:0;y>0&&y<1&&(this.attentionTimeout=setTimeout(()=>{this.emit("attention",void 0)},y))}x<=this.nearEndThreshold+1&&x>this.nearEndThreshold&&!l?this.nearEndTimeout=setTimeout(()=>{this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0},(x-this.nearEndThreshold)*1e3):x<this.nearEndThreshold&&!l&&(this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0),x<=this.transitionThreshold+1&&x>this.transitionThreshold&&(this.transitionTimeout=setTimeout(()=>{this.emit("transition",void 0)},(x-this.transitionThreshold)*1e3)),x<=1&&x>0&&(this.endedTimeout=setTimeout(()=>{this.emit("ended",void 0)},x*1e3))},1e3)}}endEvent(){this.emit("eventEnded",void 0)}destroy(){clearInterval(this.playbackInterval),clearTimeout(this.nearEndTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.attentionTimeout),super.destroy()}}const Fz="1.0.0";var In=nE();const du=BC(In);function Uz({baseUrl:o,contentfulAccessToken:i,contentfulSpaceId:l}){const[d,m]=In.useState(),[I,N]=In.useState(),p=In.useCallback((w,U)=>{var x,E;return d&&((E=(x=d.find(y=>y.slug===w))==null?void 0:x.resourcesCollection.items.find(y=>y.key===U))==null?void 0:E.value)||""},[d]);return In.useEffect(()=>{o&&i&&l&&(N(void 0),Pz(o,i,l).then(w=>{m(w)}).catch(w=>{N(w)}))},[o,i,l]),{contentfulData:d,getContentfulValue:p,error:I}}const Bz={ticketCode:"",preferredProfile:"dash-drm",getContentfulValue:()=>"",isDev:!1,preConnectErrors:[],postConnectErrors:[]},Ga=du.createContext(Bz);function jz({children:o,baseUrl:i,preferredProfile:l,contentfulAccessToken:d,contentfulSpaceId:m,newSetupToggle:I=!1,ticketCodeProp:N}){const p=xg(),w=Fz,[U,x]=In.useState(),[E,y]=In.useState(),[P,g]=In.useState(),[T,F]=In.useState(),[M,_]=In.useState(),[A,b]=In.useState(),[Z,Y]=In.useState(),[$,Q]=In.useState(N),[se,C]=In.useState(),[X,ce]=In.useState(),[oe,me]=In.useState(),[be,Je]=In.useState(),[we,qe]=In.useState(),[st,ft]=In.useState([]),[Ce,He]=In.useState([]),[vt,Re]=In.useState(!1),[Ye,ot]=In.useState(),{getContentfulValue:Ht,error:Bt}=Uz({baseUrl:i,contentfulAccessToken:d,contentfulSpaceId:m}),Et=3;function Dt(Ne,ne){return ne.filter(Be=>Ne!==Be.name)}return In.useEffect(()=>{ft(Bt?Ne=>[...Ne,Bt]:Ne=>Dt(ls.CONTENTFUL,Ne))},[Bt]),In.useEffect(()=>{Q(N)},[N]),In.useEffect(()=>{i&&p&&I&&(async()=>{let ne=0;const Be=()=>Cz({deviceId:p,appVersion:w,baseUrl:i});for(;ne<Et;)await Be().then(L=>{qe(L),ne=Et}).catch(L=>{ne+=1,ne===2&&console.error(L)})})()},[w,i,p,I]),In.useEffect(()=>{if(!we)return;const Ne=new oB().withUrl(we.url,{accessTokenFactory:()=>we.accessToken,transport:mo.WebSockets}).build();Ne.start().catch(ne=>{console.error("Global signalR connection failed:",ne)}),Ne.on(ou.SETUP_REQUEST_HOST_TV_CONNECTED,({scanTvDeviceId:ne,ticketCode:Be})=>{Q(Be),C(ne),localStorage.setItem("ticketCode",Be)}),_(Ne)},[we]),In.useEffect(()=>{!$||!se||!M||(console.log("Disconnecting global signalR..."),M.invoke(ou.CLIENT_DISCONNECT))},[$,se,M]),In.useEffect(()=>{if(!$||!se&&I){Je(void 0);return}const Ne=$[0];ft(ne=>Dt(ls.NEGOTIATE,ne)),bz({deviceId:p,deviceType:6,appVersion:w,ticketCode:$,scanTvDeviceId:se,ticketPrefix:Ne,baseUrl:i}).then(ne=>{Je(ne),Re(ne.ticketType>3)}).catch(ne=>{ft(Be=>[...Be,ne])})},[$,w,i,p,se,I]),In.useEffect(()=>{if(!(be!=null&&be.accessToken)||!be.url||!$)return;const Ne=new Lz(new Date(0)),ne=new kz(Ne),Be=new wz({groupName:$,deviceId:p,debug:!1});return Be.connect({url:be.url,accessToken:be.accessToken}),Be.on("setupStatusUpdate",({deviceLists:L})=>{const D=L.connectedDevices[0].sessionId;ot(L.connectedDevices),console.log("signalRClient connected with sessionId: ",D),b(D),He(ge=>Dt(ls.EVENT_STATUS,ge));const G=()=>{P3({appVersion:w,baseUrl:i,ticketCode:$,sessionId:D}).then(ge=>{y(ge),ge.broadcastStart&&(vt||Ne.updateStartTime(new Date(ge.broadcastStart),!0))}).catch(ge=>{He(pe=>[...pe,ge])})};G(),Be.on("eventStatusChanged",G),L3($[0],i,d,m).then(ge=>{g(ge)}).catch(ge=>{He(pe=>[...pe,ge])}),He(ge=>Dt(ls.GENERATE,ge));const K=()=>{D3({sessionId:D,appVersion:w,baseUrl:i,ticketCode:$}).then(ge=>{Ne.timelineData=ge,x(ge),ne.updateTimelineData(ge)}).catch(ge=>{He(pe=>[...pe,ge])})};Ne.on("fetchTimeline",K)}),Be.on("stateUpdated",({state:L})=>{console.log(L,"stateUpdate"),Y(L)}),Be.on("stateUpdated",({state:L})=>{console.log(L,"stateUpdate"),Y(L)}),Be.on("serverTimeOffsetUpdate",({serverTimeOffset:L})=>{console.log("server time offset updated",L),Ne.updateServerTimeOffset(L)}),Be.on("startTimeUpdated",({startTime:L})=>{console.log("startTimeUpdated",L),Ne.updateStartTime(L,!0)}),Be.on("connected",({sessionId:L})=>{console.log("signalRClient connected with sessionId: ",L),b(L),He(K=>Dt(ls.EVENT_STATUS,K));const D=()=>{P3({appVersion:w,baseUrl:i,ticketCode:$,sessionId:L}).then(K=>{if(y(K),K.broadcastStart)if(vt){const ge=new Date;ge.setHours(ge.getHours()+1),Ne.updateStartTime(ge,!0)}else Ne.updateStartTime(new Date(K.broadcastStart),!0)}).catch(K=>{He(ge=>[...ge,K])})};D(),Be.on("eventStatusChanged",D),L3($[0],i,d,m).then(K=>{g(K)}).catch(K=>{He(ge=>[...ge,K])}),He(K=>Dt(ls.GENERATE,K));const G=()=>{D3({sessionId:L,appVersion:w,baseUrl:i,ticketCode:$}).then(K=>{Ne.timelineData=K,x(K),ne.updateTimelineData(K)}).catch(K=>{He(ge=>[...ge,K])})};Ne.on("fetchTimeline",G)}),F(Be),ce(Ne),me(ne),()=>{Y(void 0),ot(void 0),Be.destroy(),ne.destroy(),Ne.destroy()}},[be,$,w,i,p,d,m,vt]),Rt.jsx(Ga.Provider,{value:{signalRClient:T,timelineData:U,eventStatus:E,eventMeta:P,hubState:Z,sessionId:A,ticketCode:$,eventClock:X,orchestrator:oe,preferredProfile:l,baseUrl:i,negotiateData:be,isDev:vt,getContentfulValue:Ht,preConnectErrors:st,postConnectErrors:Ce,connectedDevices:Ye},children:o})}const Zz="_focused_tk4zu_1",qz={focused:Zz};function ta({selfFocus:o,...i}){const{ref:l,focused:d,focusSelf:m}=tB.useFocusable({onEnterPress:()=>{i.onClick()}});return In.useEffect(()=>{o&&m()},[m,o]),Rt.jsx("button",{...i,ref:l,className:"".concat(i.className||""," ").concat(d?qz.focused:""," ").concat(d&&i.focusstile?i.focusstile:"")})}function Sh(){return In.useContext(Ga).signalRClient}function hf(){return In.useContext(Ga).timelineData}function Wb(){return In.useContext(Ga).eventMeta}function Gz(){return In.useContext(Ga).hubState}function Hz(){return In.useContext(Ga).sessionId}function Vz(){return In.useContext(Ga).ticketCode[0]}function mu(){return In.useContext(Ga).eventClock}function Kz(){return In.useContext(Ga).negotiateData}function $b(){return In.useContext(Ga).isDev}function zz(){return In.useContext(Ga).postConnectErrors}function sm(){return In.useContext(Ga).orchestrator}function Xb(){return In.useContext(Ga).connectedDevices}function cB(){const o=hf(),i=Vz(),l=In.useContext(Ga);return In.useMemo(()=>[o==null?void 0:o.profiles.find(d=>d.name===l.preferredProfile),l.preferredProfile==="dash-drm"&&l.baseUrl?Rz(l.baseUrl):void 0,o==null?void 0:o.queryParameters],[l.preferredProfile,i,o,l.baseUrl])}const Yz=()=>Rt.jsx("svg",{width:"800px",height:"800px",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:Rt.jsx("path",{d:"M36.96875 0C36.417969 0.015625 35.988281 0.480469 36 1.03125C36.011719 1.578125 36.457031 2 37 2L37.03125 2C37.160156 1.984375 40.671875 1.984375 44.28125 5.6875C47.914063 9.410156 48 12.96875 48 13C48 13.550781 48.445313 14 49 14C49.554688 14 50 13.550781 50 13C50 12.824219 49.953125 8.65625 45.71875 4.3125C41.457031 -0.0546875 37.164063 -0.0117188 36.96875 0 Z M 37 6C36.453125 6 36.007813 6.453125 36 7C35.992188 7.546875 36.453125 7.988281 37 8C37.066406 8 38.628906 8.066406 40.28125 9.71875C41.933594 11.371094 42 12.945313 42 13C42 13.550781 42.445313 14 43 14C43.554688 14 44 13.550781 44 13C44 12.902344 43.984375 10.546875 41.71875 8.28125C39.453125 6.015625 37.097656 6 37 6 Z M 28.71875 6.03125C27.644531 6.027344 26.539063 6.402344 25.6875 7.1875L1.1875 31.78125C-0.40625 33.375 -0.417969 35.984375 1.1875 37.71875L12.40625 48.90625C13.175781 49.675781 14.199219 50.09375 15.3125 50.09375C16.410156 50.09375 17.46875 49.683594 18.3125 48.90625L42.84375 24.34375C44.371094 22.558594 44.371094 19.964844 42.8125 18.40625L31.59375 7.1875C30.828125 6.421875 29.792969 6.035156 28.71875 6.03125 Z M 28 15C31.867188 15 35 18.132813 35 22C35 25.867188 31.867188 29 28 29C24.132813 29 21 25.867188 21 22C21 18.132813 24.132813 15 28 15 Z M 28 20C26.894531 20 26 20.894531 26 22C26 23.105469 26.894531 24 28 24C29.105469 24 30 23.105469 30 22C30 20.894531 29.105469 20 28 20 Z M 15 27C16.105469 27 17 27.894531 17 29C17 30.105469 16.105469 31 15 31C13.894531 31 13 30.105469 13 29C13 27.894531 13.894531 27 15 27 Z M 10 32C11.105469 32 12 32.894531 12 34C12 35.105469 11.105469 36 10 36C8.894531 36 8 35.105469 8 34C8 32.894531 8.894531 32 10 32 Z M 21 33C22.105469 33 23 33.894531 23 35C23 36.105469 22.105469 37 21 37C19.894531 37 19 36.105469 19 35C19 33.894531 19.894531 33 21 33 Z M 16 38C17.105469 38 18 38.894531 18 40C18 41.105469 17.105469 42 16 42C14.894531 42 14 41.105469 14 40C14 38.894531 14.894531 38 16 38Z"})});function Wz(){const o=Sh(),i=mu(),l=In.useCallback(N=>{!i||!o||o.sendGroupCommand({command:"play",value:{senderID:xg(),startDate:new Date(i.startTime.getTime()-N).toISOString(),rateClockState:{rate:1}}})},[o,i]),d=In.useCallback(N=>{!i||!o||o.sendGroupCommand({command:"play",value:{senderID:xg(),startDate:new Date(i.serverNow()-N).toISOString(),rateClockState:{rate:1}}})},[o,i]),m=In.useCallback(()=>{if(!i||!o)return;const N=new Date;N.setSeconds(N.getSeconds()+5),o.sendGroupCommand({command:"play",value:{senderID:xg(),startDate:new Date(N).toISOString(),rateClockState:{rate:1}}})},[o,i]);return{seekBy:l,seekTo:d,disconnect:()=>{o==null||o.disconnect()},restart:m}}function $z({eventPlayer:o}){var T,F;const i=Sh(),l=mu(),[d,m]=In.useState(!1),[I,N]=In.useState(),{seekBy:p,seekTo:w,disconnect:U,restart:x}=Wz(),[E,y]=In.useState([]),P=hf(),g=()=>{m(!d)};return In.useEffect(()=>{if(!l||!P)return;const M=setInterval(()=>{const _=l.getExpectedPositionInSeconds(),A=AE(P,_);y(A.map(b=>b)),N({expectedPosition:_})},500);return()=>{clearInterval(M)}},[l,P]),Rt.jsxs("div",{className:"demo-remote-container",children:[Rt.jsx("div",{className:"icon-wrapper",onClick:g,children:Rt.jsx(Yz,{})}),d&&Rt.jsxs(Rt.Fragment,{children:[Rt.jsx("h2",{children:"Demo Remote"}),Rt.jsx(ta,{selfFocus:!0,onClick:()=>{o==null||o.requestFullscreen()},children:"Go to fullscreen"}),I&&Rt.jsx("div",{children:Rt.jsxs("p",{children:["Expected position in seconds"," ",I.expectedPosition.toFixed(2)]})}),Rt.jsx(ta,{onClick:()=>{w(-5e3)},children:"Start in 5 sec"}),Rt.jsx(ta,{onClick:()=>{x()},children:"Restart"}),Rt.jsx(ta,{onClick:()=>{p(1e4)},children:"Seek Forward"}),Rt.jsx(ta,{onClick:()=>{p(-1e4)},children:"Seek Backward"}),Rt.jsx(ta,{onClick:()=>{w(1e4)},children:"Seek to first video"}),Rt.jsx(ta,{onClick:()=>{w(1e5)},children:"Seek to 100"}),Rt.jsx(ta,{onClick:U,children:"Disconnect"}),Rt.jsx("h3",{children:"Available streams right now:"}),E.map(M=>Rt.jsxs("div",{className:"cast-button-group",children:[Rt.jsxs(ta,{onClick:()=>{i==null||i.sendGroupCommand({command:"cast",value:M.index})},children:[Rt.jsx("span",{style:{margin:"10px"},children:""}),M.title]}),Rt.jsxs(ta,{onClick:()=>{i==null||i.sendGroupCommand({command:"prepareCast",value:M.index})},children:[Rt.jsx("span",{style:{margin:"10px"},children:""}),"prepare cast"]}),Rt.jsxs(ta,{onClick:()=>{i==null||i.sendGroupCommand({command:"cancelCast",value:M.index})},children:[Rt.jsx("span",{style:{margin:"10px"},children:""}),"cancel cast"]})]},M.camera.assetName)),Rt.jsx("h3",{children:"Statistics:"}),Rt.jsxs("div",{className:"statistics-block",children:[Rt.jsx("label",{children:"Total frames:"}),Rt.jsx("div",{children:((T=o==null?void 0:o.stats)==null?void 0:T.totalVideoFrames)||0})]}),Rt.jsxs("div",{className:"statistics-block",children:[Rt.jsx("label",{children:"Dropped frames:"}),Rt.jsx("div",{children:((F=o==null?void 0:o.stats)==null?void 0:F.droppedVideoFrames)||0})]})]})]})}var fB={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(o,i){(function(l,d){o.exports=d()})(self,function(){return function(){var l={4593:function(N,p){var w,U,x,E,y,P=function(F){for(var M=[],_=0;_<F.length;++_){var A=F.charCodeAt(_);A<128?M.push(A):A<2048?(M.push(192|A>>6),M.push(128|63&A)):A<65536?(M.push(224|A>>12),M.push(128|63&A>>6),M.push(128|63&A)):(M.push(240|A>>18),M.push(128|63&A>>12),M.push(128|63&A>>6),M.push(128|63&A))}return M},g=function(F){for(var M=[],_=0;_<F.length;){var A=F[_++];A<128||(A<224?(A=(31&A)<<6,A|=63&F[_++]):A<240?(A=(15&A)<<12,A|=(63&F[_++])<<6,A|=63&F[_++]):(A=(7&A)<<18,A|=(63&F[_++])<<12,A|=(63&F[_++])<<6,A|=63&F[_++])),M.push(String.fromCharCode(A))}return M.join("")},T={};w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=function(F){for(var M=0,_=[],A=0|F.length/3;0<A--;){var b=(F[M]<<16)+(F[M+1]<<8)+F[M+2];M+=3,_.push(w.charAt(63&b>>18)),_.push(w.charAt(63&b>>12)),_.push(w.charAt(63&b>>6)),_.push(w.charAt(63&b))}return F.length-M==2?(b=(F[M]<<16)+(F[M+1]<<8),_.push(w.charAt(63&b>>18)),_.push(w.charAt(63&b>>12)),_.push(w.charAt(63&b>>6)),_.push("=")):F.length-M==1&&(b=F[M]<<16,_.push(w.charAt(63&b>>18)),_.push(w.charAt(63&b>>12)),_.push("==")),_.join("")},x=function(){for(var F=[],M=0;M<w.length;++M)F[w.charCodeAt(M)]=M;return F[61]=0,F}(),E=function(F){for(var M=0,_=[],A=0|F.length/4;0<A--;){var b=(x[F.charCodeAt(M)]<<18)+(x[F.charCodeAt(M+1)]<<12)+(x[F.charCodeAt(M+2)]<<6)+x[F.charCodeAt(M+3)];_.push(255&b>>16),_.push(255&b>>8),_.push(255&b),M+=4}return _&&(F.charAt(M-2)=="="?(_.pop(),_.pop()):F.charAt(M-1)=="="&&_.pop()),_},y={encode:function(F){for(var M=[],_=0;_<F.length;++_)M.push(F.charCodeAt(_));return M},decode:function(F){for(var M=0;M<s.length;++M)a[M]=String.fromCharCode(a[M]);return a.join("")}},T.decodeArray=function(F){var M=E(F);return new Uint8Array(M)},T.encodeASCII=function(F){var M=y.encode(F);return U(M)},T.decodeASCII=function(F){var M=E(F);return y.decode(M)},T.encode=function(F){var M=P(F);return U(M)},T.decode=function(F){var M=E(F);return g(M)},p.decode=T.decode,p.decodeArray=T.decodeArray,p.encode=T.encode,p.encodeASCII=T.encodeASCII},452:function(N,p){(function(w){var U={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},x=function(C){var X=C;return U.hasOwnProperty(C)&&(X=U[C]),String.fromCharCode(X)},E=15,y=32,P={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},g={17:2,18:4,21:6,22:8,23:10,19:13,20:15},T={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},F={25:2,26:4,29:6,30:8,31:10,27:13,28:15},M=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],_={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(C){this.time=C},log:function(C,X){var ce=this.verboseFilter[C];this.verboseLevel>=ce&&console.log(this.time+" ["+C+"] "+X)}},A=function(C){for(var X=[],ce=0;ce<C.length;ce++)X.push(C[ce].toString(16));return X},b=function(C,X,ce,oe,me){this.foreground=C||"white",this.underline=X||!1,this.italics=ce||!1,this.background=oe||"black",this.flash=me||!1};b.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(C){for(var X=["foreground","underline","italics","background","flash"],ce=0;ce<X.length;ce++){var oe=X[ce];C.hasOwnProperty(oe)&&(this[oe]=C[oe])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(C){return this.foreground===C.foreground&&this.underline===C.underline&&this.italics===C.italics&&this.background===C.background&&this.flash===C.flash},copy:function(C){this.foreground=C.foreground,this.underline=C.underline,this.italics=C.italics,this.background=C.background,this.flash=C.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var Z=function(C,X,ce,oe,me,be){this.uchar=C||" ",this.penState=new b(X,ce,oe,me,be)};Z.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(C,X){this.uchar=C,this.penState.copy(X)},setPenState:function(C){this.penState.copy(C)},equals:function(C){return this.uchar===C.uchar&&this.penState.equals(C.penState)},copy:function(C){this.uchar=C.uchar,this.penState.copy(C.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var Y=function(){this.chars=[];for(var C=0;C<y;C++)this.chars.push(new Z);this.pos=0,this.currPenState=new b};Y.prototype={equals:function(C){for(var X=!0,ce=0;ce<y;ce++)if(!this.chars[ce].equals(C.chars[ce])){X=!1;break}return X},copy:function(C){for(var X=0;X<y;X++)this.chars[X].copy(C.chars[X])},isEmpty:function(){for(var C=!0,X=0;X<y;X++)if(!this.chars[X].isEmpty()){C=!1;break}return C},setCursor:function(C){this.pos!==C&&(this.pos=C),this.pos<0?(_.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>y&&(_.log("ERROR","Too large cursor position "+this.pos),this.pos=y)},moveCursor:function(C){var X=this.pos+C;if(C>1)for(var ce=this.pos+1;ce<X+1;ce++)this.chars[ce].setPenState(this.currPenState);this.setCursor(X)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(C){C>=144&&this.backSpace();var X=x(C);this.pos>=y?_.log("ERROR","Cannot insert "+C.toString(16)+" ("+X+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(X,this.currPenState),this.moveCursor(1))},clearFromPos:function(C){var X;for(X=C;X<y;X++)this.chars[X].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var C=[],X=!0,ce=0;ce<y;ce++){var oe=this.chars[ce].uchar;oe!==" "&&(X=!1),C.push(oe)}return X?"":C.join("")},setPenStyles:function(C){this.currPenState.setStyles(C),this.chars[this.pos].setPenState(this.currPenState)}};var $=function(){this.rows=[];for(var C=0;C<E;C++)this.rows.push(new Y);this.currRow=14,this.nrRollUpRows=null,this.reset()};$.prototype={reset:function(){for(var C=0;C<E;C++)this.rows[C].clear();this.currRow=14},equals:function(C){for(var X=!0,ce=0;ce<E;ce++)if(!this.rows[ce].equals(C.rows[ce])){X=!1;break}return X},copy:function(C){for(var X=0;X<E;X++)this.rows[X].copy(C.rows[X])},isEmpty:function(){for(var C=!0,X=0;X<E;X++)if(!this.rows[X].isEmpty()){C=!1;break}return C},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(C){this.rows[this.currRow].insertChar(C)},setPen:function(C){this.rows[this.currRow].setPenStyles(C)},moveCursor:function(C){this.rows[this.currRow].moveCursor(C)},setCursor:function(C){_.log("INFO","setCursor: "+C),this.rows[this.currRow].setCursor(C)},setPAC:function(C){_.log("INFO","pacData = "+JSON.stringify(C));var X=C.row-1;this.nrRollUpRows&&X<this.nrRollUpRows-1&&(X=this.nrRollUpRows-1),this.currRow=X;var ce=this.rows[this.currRow];if(C.indent!==null){var oe=C.indent,me=Math.max(oe-1,0);ce.setCursor(C.indent),C.color=ce.chars[me].penState.foreground}var be={foreground:C.color,underline:C.underline,italics:C.italics,background:"black",flash:!1};this.setPen(be)},setBkgData:function(C){_.log("INFO","bkgData = "+JSON.stringify(C)),this.backSpace(),this.setPen(C),this.insertChar(32)},setRollUpRows:function(C){this.nrRollUpRows=C},rollUp:function(){if(this.nrRollUpRows!==null){_.log("TEXT",this.getDisplayText());var C=this.currRow+1-this.nrRollUpRows,X=this.rows.splice(C,1)[0];X.clear(),this.rows.splice(this.currRow,0,X),_.log("INFO","Rolling up")}else _.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(C){C=C||!1;for(var X=[],ce="",oe=-1,me=0;me<E;me++){var be=this.rows[me].getTextString();be&&(oe=me+1,C?X.push("Row "+oe+': "'+be+'"'):X.push(be.trim()))}return X.length>0&&(ce=C?"["+X.join(" | ")+"]":X.join("\n")),ce},getTextAndFormat:function(){return this.rows}};var Q=function(C,X){this.chNr=C,this.outputFilter=X,this.mode=null,this.verbose=0,this.displayedMemory=new $,this.nonDisplayedMemory=new $,this.lastOutputScreen=new $,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};Q.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(C){this.outputFilter=C},setPAC:function(C){this.writeScreen.setPAC(C)},setBkgData:function(C){this.writeScreen.setBkgData(C)},setMode:function(C){C!==this.mode&&(this.mode=C,_.log("INFO","MODE="+C),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=C)},insertChars:function(C){for(var X=0;X<C.length;X++)this.writeScreen.insertChar(C[X]);var ce=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";_.log("INFO",ce+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(_.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){_.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){_.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){_.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(C){_.log("INFO","RU("+C+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(C)},cc_FON:function(){_.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){_.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){_.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){_.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){_.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){_.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){_.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(_.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var C=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=C,this.writeScreen=this.nonDisplayedMemory,_.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(C){_.log("INFO","TO("+C+") - Tab Offset"),this.writeScreen.moveCursor(C)},cc_MIDROW:function(C){var X={flash:!1};if(X.underline=C%2==1,X.italics=C>=46,X.italics)X.foreground="white";else{var ce=Math.floor(C/2)-16;X.foreground=["white","green","blue","cyan","red","yellow","magenta"][ce]}_.log("INFO","MIDROW: "+JSON.stringify(X)),this.writeScreen.setPen(X)},outputDataUpdate:function(){var C=_.time;C!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(C,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,C,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:C):this.cueStartTime=C,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(C){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,C,this.displayedMemory),this.cueStartTime=C))}};var se=function(C,X,ce){this.field=C||1,this.outputs=[X,ce],this.channels=[new Q(1,X),new Q(2,ce)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};se.prototype={getHandler:function(C){return this.channels[C].getHandler()},setHandler:function(C,X){this.channels[C].setHandler(X)},addData:function(C,X){var ce,oe,me,be=!1;this.lastTime=C,_.setTime(C);for(var Je=0;Je<X.length;Je+=2)oe=127&X[Je],me=127&X[Je+1],oe>=16&&oe<=31&&oe===this.lastCmdA&&me===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,_.log("DEBUG","Repeated command ("+A([oe,me])+") is dropped")):oe!==0||me!==0?(_.log("DATA","["+A([X[Je],X[Je+1]])+"] -> ("+A([oe,me])+")"),(ce=this.parseCmd(oe,me))||(ce=this.parseMidrow(oe,me)),ce||(ce=this.parsePAC(oe,me)),ce||(ce=this.parseBackgroundAttributes(oe,me)),ce||(be=this.parseChars(oe,me))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(be):_.log("WARNING","No channel found yet. TEXT-MODE?")),ce?this.dataCounters.cmd+=2:be?this.dataCounters.char+=2:(this.dataCounters.other+=2,_.log("WARNING","Couldn't parse cleaned data "+A([oe,me])+" orig: "+A([X[Je],X[Je+1]])))):this.dataCounters.padding+=2},parseCmd:function(C,X){var ce;if(!((C===20||C===21||C===28||C===29)&&32<=X&&X<=47||(C===23||C===31)&&33<=X&&X<=35))return!1;ce=C===20||C===21||C===23?1:2;var oe=this.channels[ce-1];return C===20||C===21||C===28||C===29?X===32?oe.cc_RCL():X===33?oe.cc_BS():X===34?oe.cc_AOF():X===35?oe.cc_AON():X===36?oe.cc_DER():X===37?oe.cc_RU(2):X===38?oe.cc_RU(3):X===39?oe.cc_RU(4):X===40?oe.cc_FON():X===41?oe.cc_RDC():X===42?oe.cc_TR():X===43?oe.cc_RTD():X===44?oe.cc_EDM():X===45?oe.cc_CR():X===46?oe.cc_ENM():X===47&&oe.cc_EOC():oe.cc_TO(X-32),this.lastCmdA=C,this.lastCmdB=X,this.currChNr=ce,!0},parseMidrow:function(C,X){var ce=null;if((C===17||C===25)&&32<=X&&X<=47){if((ce=C===17?1:2)!==this.currChNr)return _.log("ERROR","Mismatch channel in midrow parsing"),!1;var oe=this.channels[ce-1];return oe.insertChars([32]),oe.cc_MIDROW(X),_.log("DEBUG","MIDROW ("+A([C,X])+")"),this.lastCmdA=C,this.lastCmdB=X,!0}return!1},parsePAC:function(C,X){var ce,oe;if(!((17<=C&&C<=23||25<=C&&C<=31)&&64<=X&&X<=127||(C===16||C===24)&&64<=X&&X<=95))return!1;ce=C<=23?1:2,oe=64<=X&&X<=95?ce===1?P[C]:T[C]:ce===1?g[C]:F[C];var me=this.interpretPAC(oe,X);return this.channels[ce-1].setPAC(me),this.lastCmdA=C,this.lastCmdB=X,this.currChNr=ce,!0},interpretPAC:function(C,X){var ce,oe={color:null,italics:!1,indent:null,underline:!1,row:C};return ce=X>95?X-96:X-64,oe.underline=(1&ce)==1,ce<=13?oe.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(ce/2)]:ce<=15?(oe.italics=!0,oe.color="white"):oe.indent=4*Math.floor((ce-16)/2),oe},parseChars:function(C,X){var ce=null,oe=null,me=null;if(C>=25?(ce=2,me=C-8):(ce=1,me=C),17<=me&&me<=19){var be;be=me===17?X+80:me===18?X+112:X+144,_.log("INFO","Special char '"+x(be)+"' in channel "+ce),oe=[be],this.lastCmdA=C,this.lastCmdB=X}else 32<=C&&C<=127&&(oe=X===0?[C]:[C,X],this.lastCmdA=null,this.lastCmdB=null);if(oe){var Je=A(oe);_.log("DEBUG","Char codes =  "+Je.join(","))}return oe},parseBackgroundAttributes:function(C,X){var ce,oe,me;return((C===16||C===24)&&32<=X&&X<=47||(C===23||C===31)&&45<=X&&X<=47)&&(ce={},C===16||C===24?(oe=Math.floor((X-32)/2),ce.background=M[oe],X%2==1&&(ce.background=ce.background+"_semi")):X===45?ce.background="transparent":(ce.foreground="black",X===47&&(ce.underline=!0)),me=C<24?1:2,this.channels[me-1].setBkgData(ce),this.lastCmdA=C,this.lastCmdB=X,!0)},reset:function(){for(var C=0;C<this.channels.length;C++)this.channels[C]&&this.channels[C].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(C){for(var X=0;X<this.channels.length;X++)this.channels[X]&&this.channels[X].cueSplitAtTime(C)}},w.logger=_,w.PenState=b,w.CaptionScreen=$,w.Cea608Parser=se,w.findCea608Nalus=function(C,X,ce){for(var oe=0,me=X,be=[],Je=function(Ce,He,vt,Re){if(Ce!==4||He<8)return null;var Ye=vt.getUint8(Re),ot=vt.getUint16(Re+1),Ht=vt.getUint32(Re+3),Bt=vt.getUint8(Re+7);return Ye==181&&ot==49&&Ht==1195456820&&Bt==3};me<X+ce;){if(oe=C.getUint32(me),(31&C.getUint8(me+4))==6)for(var we=me+5,qe=-1;we<me+4+oe-1;){qe=0;for(var st=255;st===255;)qe+=st=C.getUint8(we),we++;var ft=0;for(st=255;st===255;)ft+=st=C.getUint8(we),we++;Je(qe,ft,C,we)&&be.push([we,ft]),we+=ft}me+=oe+4}return be},w.extractCea608DataFromRange=function(C,X){var ce=X[0],oe=[[],[]];ce+=8;var me=31&C.getUint8(ce);ce+=2;for(var be=0;be<me;be++){var Je=C.getUint8(ce),we=4&Je,qe=3&Je;ce++;var st=C.getUint8(ce);ce++;var ft=C.getUint8(ce);ce++,we&&(127&st)+(127&ft)!=0&&(qe===0?(oe[0].push(st),oe[0].push(ft)):qe===1&&(oe[1].push(st),oe[1].push(ft)))}return oe}})(p)},8416:function(N,p,w){var U=w(1139),x=w(5448),E=w(6398),y=w(2032),P=(w(5530),typeof window<"u"&&window||w.g),g=P.dashjs;g||(g=P.dashjs={}),g.MediaPlayer=U.Z,g.FactoryMaker=x.Z,g.Debug=E.Z,g.Version=(0,y.e)()},6398:function(N,p,w){var U=w(5595),x=w(8512),E=w(5448),y=1,P=2,g=3,T=4,F=5;function M(A){A=A||{};var b,Z,Y,$,Q=this.context,se=(0,U.Z)(Q).getInstance(),C=A.settings,X=[];function ce(st){return st&&st.bind?st.bind(window.console):window.console.log.bind(window.console)}function oe(){for(var st=arguments.length,ft=new Array(st),Ce=0;Ce<st;Ce++)ft[Ce]=arguments[Ce];qe.apply(void 0,[y,this].concat(ft))}function me(){for(var st=arguments.length,ft=new Array(st),Ce=0;Ce<st;Ce++)ft[Ce]=arguments[Ce];qe.apply(void 0,[P,this].concat(ft))}function be(){for(var st=arguments.length,ft=new Array(st),Ce=0;Ce<st;Ce++)ft[Ce]=arguments[Ce];qe.apply(void 0,[g,this].concat(ft))}function Je(){for(var st=arguments.length,ft=new Array(st),Ce=0;Ce<st;Ce++)ft[Ce]=arguments[Ce];qe.apply(void 0,[T,this].concat(ft))}function we(){for(var st=arguments.length,ft=new Array(st),Ce=0;Ce<st;Ce++)ft[Ce]=arguments[Ce];qe.apply(void 0,[F,this].concat(ft))}function qe(st,ft){var Ce="",He=null;Z&&(He=new Date().getTime(),Ce+="["+(He-$)+"]"),Y&&ft&&ft.getClassName&&(Ce+="["+ft.getClassName()+"]",ft.getType&&(Ce+="["+ft.getType()+"]")),Ce.length>0&&(Ce+=" ");for(var vt=arguments.length,Re=new Array(vt>2?vt-2:0),Ye=2;Ye<vt;Ye++)Re[Ye-2]=arguments[Ye];Array.apply(null,Re).forEach(function(ot){Ce+=ot+" "}),X[st]&&C&&C.get().debug.logLevel>=st&&X[st](Ce),C&&C.get().debug.dispatchEvent&&se.trigger(x.Z.LOG,{message:Ce,level:st})}return b={getLogger:function(st){return{fatal:oe.bind(st),error:me.bind(st),warn:be.bind(st),info:Je.bind(st),debug:we.bind(st)}},setLogTimestampVisible:function(st){Z=st},setCalleeNameVisible:function(st){Y=st}},Z=!0,Y=!0,$=new Date().getTime(),typeof window<"u"&&window.console&&(X[y]=ce(window.console.error),X[P]=ce(window.console.error),X[g]=ce(window.console.warn),X[T]=ce(window.console.info),X[F]=ce(window.console.debug)),b}M.__dashjs_factory_name="Debug";var _=E.Z.getSingletonFactory(M);_.LOG_LEVEL_NONE=0,_.LOG_LEVEL_FATAL=y,_.LOG_LEVEL_ERROR=P,_.LOG_LEVEL_WARNING=g,_.LOG_LEVEL_INFO=T,_.LOG_LEVEL_DEBUG=F,E.Z.updateSingletonFactory(M.__dashjs_factory_name,_),p.Z=_},5595:function(N,p,w){var U=w(5448),x=w(8825);function E(){var P={};function g(F,M,_){var A=-1;return P[F]&&P[F].some(function(b,Z){if(b&&b.callback===M&&(!_||_===b.scope))return A=Z,!0}),A}var T={on:function(F,M,_){var A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!F)throw new Error("event type cannot be null or undefined");if(!M||typeof M!="function")throw new Error("listener must be a function: "+M);var b=A.priority||0;if(!(g(F,M,_)>=0)){P[F]=P[F]||[];var Z={callback:M,scope:_,priority:b};_&&_.getStreamId&&(Z.streamId=_.getStreamId()),_&&_.getType&&(Z.mediaType=_.getType()),A&&A.mode&&(Z.mode=A.mode);var Y=P[F].some(function($,Q){if($&&b>$.priority)return P[F].splice(Q,0,Z),!0});Y||P[F].push(Z)}},off:function(F,M,_){if(F&&M&&P[F]){var A=g(F,M,_);A<0||(P[F][A]=null)}},trigger:function(F){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(F&&P[F]){if((M=M||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");M.type=F,_.streamId&&(M.streamId=_.streamId),_.mediaType&&(M.mediaType=_.mediaType),P[F].filter(function(A){return!(!A||_.streamId&&A.streamId&&A.streamId!==_.streamId||_.mediaType&&A.mediaType&&A.mediaType!==_.mediaType||_.mode&&A.mode&&A.mode!==_.mode||!A.mode&&_.mode&&_.mode===x.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(A){return A&&A.callback.call(A.scope,M)})}},reset:function(){P={}}};return T}E.__dashjs_factory_name="EventBus";var y=U.Z.getSingletonFactory(E);y.EVENT_PRIORITY_LOW=0,y.EVENT_PRIORITY_HIGH=5e3,U.Z.updateSingletonFactory(E.__dashjs_factory_name,y),p.Z=y},5448:function(N,p){var w=function(){var U,x=[],E={},y={};function P(M,_){for(var A in x){var b=x[A];if(b.context===M&&b.name===_)return b.instance}return null}function g(M,_){return _[M]}function T(M,_,A){M in A&&(A[M]=_)}function F(M,_,A){var b,Z=M.__dashjs_factory_name,Y=_[Z];if(Y){var $=Y.instance;if(!Y.override)return $.apply({context:_,factory:U},A);for(var Q in b=M.apply({context:_},A),$=$.apply({context:_,factory:U,parent:b},A))b.hasOwnProperty(Q)&&(b[Q]=$[Q])}else b=M.apply({context:_},A);return b.getClassName=function(){return Z},b}return U={extend:function(M,_,A,b){!b[M]&&_&&(b[M]={instance:_,override:A})},getSingletonInstance:P,setSingletonInstance:function(M,_,A){for(var b in x){var Z=x[b];if(Z.context===M&&Z.name===_)return void(x[b].instance=A)}x.push({name:_,context:M,instance:A})},deleteSingletonInstances:function(M){x=x.filter(function(_){return _.context!==M})},getSingletonFactory:function(M){var _=g(M.__dashjs_factory_name,E);return _||(_=function(A){var b;return A===void 0&&(A={}),{getInstance:function(){return b||(b=P(A,M.__dashjs_factory_name)),b||(b=F(M,A,arguments),x.push({name:M.__dashjs_factory_name,context:A,instance:b})),b}}},E[M.__dashjs_factory_name]=_),_},getSingletonFactoryByName:function(M){return g(M,E)},updateSingletonFactory:function(M,_){T(M,_,E)},getClassFactory:function(M){var _=g(M.__dashjs_factory_name,y);return _||(_=function(A){return A===void 0&&(A={}),{create:function(){return F(M,A,arguments)}}},y[M.__dashjs_factory_name]=_),_},getClassFactoryByName:function(M){return g(M,y)},updateClassFactory:function(M,_){T(M,_,y)}},U}();p.Z=w},1264:function(N,p,w){var U=w(5448),x=w(703),E=w(6398),y=w(3393),P=w(7855),g=w(5595),T=w(8512);function F(b){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},F(b)}function M(b,Z,Y){return Z in b?Object.defineProperty(b,Z,{value:Y,enumerable:!0,configurable:!0,writable:!0}):b[Z]=Y,b}function _(){var b,Z,Y=this.context,$=(0,g.Z)(Y).getInstance(),Q={"streaming.delay.liveDelay":T.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":T.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},se={debug:{logLevel:E.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:y.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:y.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:y.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:y.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(b={},M(b,P.w.MPD_TYPE,500),M(b,P.w.XLINK_EXPANSION_TYPE,500),M(b,P.w.MEDIA_SEGMENT_TYPE,1e3),M(b,P.w.INIT_SEGMENT_TYPE,1e3),M(b,P.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),M(b,P.w.INDEX_SEGMENT_TYPE,1e3),M(b,P.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),M(b,P.w.LICENSE,1e3),M(b,P.w.OTHER_TYPE,1e3),M(b,"lowLatencyReductionFactor",10),b),retryAttempts:(Z={},M(Z,P.w.MPD_TYPE,3),M(Z,P.w.XLINK_EXPANSION_TYPE,1),M(Z,P.w.MEDIA_SEGMENT_TYPE,3),M(Z,P.w.INIT_SEGMENT_TYPE,3),M(Z,P.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),M(Z,P.w.INDEX_SEGMENT_TYPE,3),M(Z,P.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),M(Z,P.w.LICENSE,3),M(Z,P.w.OTHER_TYPE,3),M(Z,"lowLatencyMultiplyFactor",5),Z),abr:{movingAverageMethod:y.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:y.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:y.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},C=x.Z.clone(se);function X(ce,oe,me){for(var be in ce)ce.hasOwnProperty(be)&&(oe.hasOwnProperty(be)?F(ce[be])!=="object"||ce[be]instanceof Array||ce[be]===null?(oe[be]=x.Z.clone(ce[be]),Q[me+be]&&$.trigger(Q[me+be])):X(ce[be],oe[be],me.slice()+be+"."):console.error("Settings parameter "+me+be+" is not supported"))}return{get:function(){return C},update:function(ce){F(ce)==="object"&&X(ce,C,"")},reset:function(){C=x.Z.clone(se)}}}_.__dashjs_factory_name="Settings";var A=U.Z.getSingletonFactory(_);p.Z=A},703:function(N,p,w){var U=w(3875),x=w.n(U),E=w(1067);function y(T){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},y(T)}function P(T,F){for(var M=0;M<F.length;M++){var _=F[M];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var g=function(){function T(){(function(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")})(this,T)}var F,M;return F=T,M=[{key:"mixin",value:function(_,A,b){var Z,Y={};if(_)for(var $ in A)A.hasOwnProperty($)&&(Z=A[$],$ in _&&(_[$]===Z||$ in Y&&Y[$]===Z)||(y(_[$])==="object"&&_[$]!==null?_[$]=T.mixin(_[$],Z,b):_[$]=b(Z)));return _}},{key:"clone",value:function(_){if(!_||y(_)!=="object")return _;var A;if(_ instanceof Array){A=[];for(var b=0,Z=_.length;b<Z;++b)b in _&&A.push(T.clone(_[b]))}else A={};return T.mixin(A,_,T.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(_,A){try{if(!A||A.length===0)return _;var b=new URL(_);return A.forEach(function(Z){Z.key&&Z.value&&b.searchParams.set(Z.key,Z.value)}),b.href}catch(Z){return _}}},{key:"parseHttpHeaders",value:function(_){var A={};if(!_)return A;for(var b=_.trim().split("\r\n"),Z=0,Y=b.length;Z<Y;Z++){var $=b[Z],Q=$.indexOf(": ");Q>0&&(A[$.substring(0,Q)]=$.substring(Q+2))}return A}},{key:"generateUuid",value:function(){var _=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(A){var b=(_+16*Math.random())%16|0;return _=Math.floor(_/16),(A=="x"?b:3&b|8).toString(16)})}},{key:"generateHashCode",value:function(_){var A=0;if(_.length===0)return A;for(var b=0;b<_.length;b++)A=(A<<5)-A+_.charCodeAt(b),A|=0;return A}},{key:"getRelativeUrl",value:function(_,A){try{var b=new URL(_),Z=new URL(A);if(b.protocol=Z.protocol,b.origin!==Z.origin)return A;var Y=x().relative(b.pathname.substr(0,b.pathname.lastIndexOf("/")),Z.pathname.substr(0,Z.pathname.lastIndexOf("/"))),$=Y.length===0?1:0;return Y+=Z.pathname.substr(Z.pathname.lastIndexOf("/")+$,Z.pathname.length-1),Z.pathname.length<Y.length?Z.pathname:Y}catch(Q){return A}}},{key:"parseUserAgent",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var A=_===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,E.UAParser)(A)}catch(b){return{}}}},{key:"stringHasProtocol",value:function(_){return/(http(s?)):\/\//i.test(_)}}],M&&P(F,M),T}();p.Z=g},2032:function(N,p,w){function U(){return"4.7.4"}w.d(p,{e:function(){return U}})},2230:function(N,p){function w(x,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}var U=function(){function x(){(function(P,g){if(!(P instanceof g))throw new TypeError("Cannot call a class as a function")})(this,x)}var E,y;return E=x,(y=[{key:"extend",value:function(P,g){if(P){var T=!!g&&g.override,F=!!g&&g.publicOnly;for(var M in P)!P.hasOwnProperty(M)||this[M]&&!T||F&&P[M].indexOf("public_")===-1||(this[M]=P[M])}}}])&&w(E.prototype,y),x}();p.Z=U},4351:function(N,p,w){function U(g){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},U(g)}function x(g,T){return x=Object.setPrototypeOf||function(F,M){return F.__proto__=M,F},x(g,T)}function E(g,T){return!T||U(T)!=="object"&&typeof T!="function"?function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(g):T}function y(g){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},y(g)}var P=function(g){(function(A,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(b&&b.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),b&&x(A,b)})(_,g);var T,F,M=(T=_,F=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(A){return!1}}(),function(){var A,b=y(T);if(F){var Z=y(this).constructor;A=Reflect.construct(b,arguments,Z)}else A=b.apply(this,arguments);return E(this,A)});function _(){var A;return function(b,Z){if(!(b instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(A=M.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",A.BUFFERING_COMPLETED="bufferingCompleted",A.BUFFER_CLEARED="bufferCleared",A.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",A.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",A.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",A.CMSD_STATIC_HEADER="cmsdStaticHeader",A.CURRENT_TRACK_CHANGED="currentTrackChanged",A.DATA_UPDATE_COMPLETED="dataUpdateCompleted",A.INBAND_EVENTS="inbandEvents",A.INITIAL_STREAM_SWITCH="initialStreamSwitch",A.INIT_FRAGMENT_LOADED="initFragmentLoaded",A.INIT_FRAGMENT_NEEDED="initFragmentNeeded",A.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",A.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",A.LOADING_COMPLETED="loadingCompleted",A.LOADING_PROGRESS="loadingProgress",A.LOADING_DATA_PROGRESS="loadingDataProgress",A.LOADING_ABANDONED="loadingAborted",A.MANIFEST_UPDATED="manifestUpdated",A.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",A.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",A.QUOTA_EXCEEDED="quotaExceeded",A.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",A.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",A.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",A.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",A.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",A.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",A.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",A.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",A.SOURCE_BUFFER_ERROR="sourceBufferError",A.STREAMS_COMPOSED="streamsComposed",A.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",A.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",A.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",A.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",A.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",A.URL_RESOLUTION_FAILED="urlResolutionFailed",A.VIDEO_CHUNK_RECEIVED="videoChunkReceived",A.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",A.XLINK_ELEMENT_LOADED="xlinkElementLoaded",A.XLINK_READY="xlinkReady",A.SEEK_TARGET="seekTarget",A.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",A.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",A.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",A.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",A.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",A}return _}(w(8342).Z);p.Z=P},8512:function(N,p,w){function U(F){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},U(F)}function x(F,M){if(!(F instanceof M))throw new TypeError("Cannot call a class as a function")}function E(F,M){return E=Object.setPrototypeOf||function(_,A){return _.__proto__=A,_},E(F,M)}function y(F,M){return!M||U(M)!=="object"&&typeof M!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(F):M}function P(F){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},P(F)}var g=function(F){(function(Z,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");Z.prototype=Object.create(Y&&Y.prototype,{constructor:{value:Z,writable:!0,configurable:!0}}),Y&&E(Z,Y)})(b,F);var M,_,A=(M=b,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}(),function(){var Z,Y=P(M);if(_){var $=P(this).constructor;Z=Reflect.construct(Y,arguments,$)}else Z=Y.apply(this,arguments);return y(this,Z)});function b(){return x(this,b),A.apply(this,arguments)}return b}(w(4351).Z),T=new g;p.Z=T},8342:function(N,p){function w(x,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}var U=function(){function x(){(function(P,g){if(!(P instanceof g))throw new TypeError("Cannot call a class as a function")})(this,x)}var E,y;return E=x,(y=[{key:"extend",value:function(P,g){if(P){var T=!!g&&g.override,F=!!g&&g.publicOnly;for(var M in P)!P.hasOwnProperty(M)||this[M]&&!T||F&&P[M].indexOf("public_")===-1||(this[M]=P[M])}}}])&&w(E.prototype,y),x}();p.Z=U},9326:function(N,p,w){var U=w(3186),x=w(7855),E=w(5448),y=w(8825),P=w(7387),g=w(1553);function T(F){var M,_,A,b,Z,Y=(F=F||{}).eventBus,$=F.debug,Q=F.urlUtils,se=F.type,C=F.streamInfo,X=F.segmentsController,ce=F.timelineConverter,oe=F.baseURLController;function me(){return se}function be(){A=null}function Je(Ce,He,vt){var Re,Ye,ot=oe.resolve(vt.path),Ht={};return ot&&He!==ot.url&&Q.isRelative(He)?(Re=ot.url,Ye=ot.serviceLocation,Ht=ot.queryParams,He&&(Re=Q.resolve(He,Re))):Re=He,!Q.isRelative(Re)&&(Ce.url=Re,Ce.serviceLocation=Ye,Ce.queryParams=Ht,!0)}function we(Ce,He){if(He==null)return null;var vt=new U.Z,Re=He.representation,Ye=Re.adaptation.period.mpd.manifest.Period_asArray[Re.adaptation.period.index].AdaptationSet_asArray[Re.adaptation.index].Representation_asArray[Re.index].bandwidth,ot=He.media;return ot=(0,P.vi)(ot,"Number",He.replacementNumber),ot=(0,P.vi)(ot,"Time",He.replacementTime),ot=(0,P.vi)(ot,"Bandwidth",Ye),ot=(0,P.Aj)(ot,Re.id),ot=(0,P.eR)(ot),vt.mediaType=me(),vt.type=x.w.MEDIA_SEGMENT_TYPE,vt.range=He.mediaRange,vt.startTime=He.presentationStartTime,vt.mediaStartTime=He.mediaStartTime,vt.duration=He.duration,vt.timescale=Re.timescale,vt.availabilityStartTime=He.availabilityStartTime,vt.availabilityEndTime=He.availabilityEndTime,vt.availabilityTimeComplete=Re.availabilityTimeComplete,vt.wallStartTime=He.wallStartTime,vt.quality=Re.index,vt.index=He.index,vt.mediaInfo=Ce,vt.adaptationIndex=Re.adaptation.index,vt.representationId=Re.id,Je(vt,ot,Re)?vt:void 0}function qe(Ce,He,vt){var Re=null;if(!He||!He.segmentInfoType)return Re;var Ye=X.getSegmentByTime(He,vt);return Ye&&(A=Ye,_.debug("Index for time "+vt+" is "+Ye.index),Re=we(Ce,Ye)),Re}function st(Ce,He,vt){var Re=null,Ye=X.getSegmentByIndex(He,vt,A?A.mediaStartTime:-1);if(Ye)Re=we(Ce,Ye),A=Ye;else{if(b&&!Z)return _.debug(me()+" No segment found at index: "+vt+". Wait for next loop"),null;Z=!0}return Re}function ft(){_.debug("Dynamic stream complete"),Z=!0}return M={getCurrentIndex:function(){return A?A.index:-1},getInitRequest:function(Ce,He){return He?function(vt,Re,Ye){var ot=new U.Z,Ht=Re.adaptation.period,Bt=Ht.start;if(ot.mediaType=Ye,ot.type=x.w.INIT_SEGMENT_TYPE,ot.range=Re.range,ot.availabilityStartTime=ce.calcAvailabilityStartTimeFromPresentationTime(Bt,Re,b),ot.availabilityEndTime=ce.calcAvailabilityEndTimeFromPresentationTime(Bt+Ht.duration,Re,b),ot.quality=Re.index,ot.mediaInfo=vt,ot.representationId=Re.id,Je(ot,Re.initialization,Re))return ot.url=(0,P.vi)(ot.url,"Bandwidth",Re.bandwidth),ot}(Ce,He,me()):null},getNextSegmentRequest:function(Ce,He){return He&&He.segmentInfoType?st(Ce,He,A?A.index+1:0):null},getNextSegmentRequestIdempotent:function(Ce,He){var vt=A?A.index+1:0,Re=X.getSegmentByIndex(He,vt,A?A.mediaStartTime:-1);return Re?we(Ce,Re):null},getSegmentRequestForTime:qe,getStreamId:function(){return C.id},getStreamInfo:function(){return C},getType:me,getValidTimeAheadOfTargetTime:function(Ce,He,vt,Re){try{if(isNaN(Ce)||!He||!vt)return NaN;if(Ce<0&&(Ce=0),isNaN(Re)&&(Re=.5),qe(He,vt,Ce))return Ce;if(vt.adaptation.period.start+vt.adaptation.period.duration<Ce)return NaN;for(var Ye=isFinite(vt.adaptation.period.duration)?vt.adaptation.period.start+vt.adaptation.period.duration:Ce+30,ot=Math.min(Ce+Re,Ye),Ht=NaN,Bt=null;ot<=Ye;){var Et=null;if(ot<=Ye&&(Et=qe(He,vt,ot)),Et){Ht=ot,Bt=Et;break}ot+=Re}if(Bt){var Dt=Bt.startTime+Bt.duration;return Ce>Bt.startTime&&Dt-Ce>Re?Ce:!isNaN(Bt.startTime)&&Ce<Bt.startTime&&Ht>Bt.startTime?Bt.startTime+.001:Math.min(Dt-Re,Ht)}return Ht}catch(Ne){return NaN}},initialize:function(Ce){b=Ce,Z=!1,X.initialize(Ce)},isLastSegmentRequested:function(Ce,He){return!Ce||!A?!1:Z?!0:!isFinite(Ce.adaptation.period.duration)||A.presentationStartTime+A.duration>He?!1:Ce.mediaFinishedInformation&&!isNaN(Ce.mediaFinishedInformation.numberOfSegments)&&!isNaN(A.index)&&A.index>=Ce.mediaFinishedInformation.numberOfSegments-1&&(!b||Ce.segmentInfoType===g.Z.SEGMENT_TEMPLATE||b&&Ce.segmentInfoType===g.Z.SEGMENT_LIST&&Ce.adaptation.period.nextPeriodId)?!0:!!(b&&Ce.adaptation.period.nextPeriodId&&Ce.segmentInfoType===g.Z.SEGMENT_TIMELINE&&Ce.mediaFinishedInformation&&!isNaN(Ce.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&A&&!isNaN(A.mediaStartTime)&&!isNaN(A.duration)&&A.mediaStartTime+A.duration>=Ce.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(Ce,He){return He&&He.segmentInfoType?st(Ce,He,A?A.index:0):null},reset:function(){be(),Y.off(y.Z.DYNAMIC_TO_STATIC,ft,M)}},_=$.getLogger(M),be(),Y.on(y.Z.DYNAMIC_TO_STATIC,ft,M),M}T.__dashjs_factory_name="DashHandler",p.Z=E.Z.getClassFactory(T)},1553:function(N,p){function w(x,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}var U=new(function(){function x(){(function(P,g){if(!(P instanceof g))throw new TypeError("Cannot call a class as a function")})(this,x),this.init()}var E,y;return E=x,(y=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&w(E.prototype,y),x}());p.Z=U},7802:function(N,p,w){var U=w(5448),x=w(1724),E=w(3636),y=w(1736),P=w(5246);function g(F){F=F||{};var M,_,A=this.context,b=F.dashConstants,Z=F.type,Y=F.segmentBaseController;function $(Q){return Q?Q.segments?_[b.SEGMENT_BASE]:_[Q.segmentInfoType]:null}return M={initialize:function(Q){_[b.SEGMENT_TIMELINE]=(0,x.Z)(A).create(F,Q),_[b.SEGMENT_TEMPLATE]=(0,E.Z)(A).create(F,Q),_[b.SEGMENT_LIST]=(0,y.Z)(A).create(F,Q),_[b.SEGMENT_BASE]=(0,P.Z)(A).create(F,Q)},updateInitData:function(Q,se){return se?Promise.resolve():Y.getSegmentBaseInitSegment({representation:Q,mediaType:Z})},updateSegmentData:function(Q,se){return se?Promise.resolve():Y.getSegmentList({mimeType:Q.mimeType,representation:Q,mediaType:Z})},getSegmentByIndex:function(Q,se,C){var X=$(Q);return X?X.getSegmentByIndex(Q,se,C):null},getSegmentByTime:function(Q,se){var C=$(Q);return C?C.getSegmentByTime(Q,se):null},getMediaFinishedInformation:function(Q){var se=$(Q);return se?se.getMediaFinishedInformation(Q):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},_={},M}g.__dashjs_factory_name="SegmentsController";var T=U.Z.getClassFactory(g);p.Z=T},1736:function(N,p,w){var U=w(5448),x=w(3393),E=w(7387);function y(g,T){var F=(g=g||{}).timelineConverter;function M(){if(!F||!F.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(x.Z.MISSING_CONFIG_ERROR)}function _(A,b){if(M(),!A)return null;var Z=A.adaptation.period.mpd.manifest.Period_asArray[A.adaptation.period.index].AdaptationSet_asArray[A.adaptation.index].Representation_asArray[A.index].SegmentList,Y=Z.SegmentURL_asArray.length,$=A&&!isNaN(A.startNumber)?A.startNumber:1,Q=Math.max($-1,0),se=Math.max(b-Q,0),C=null;if(se<Y){var X=Z.SegmentURL_asArray[se];(C=(0,E.NF)(F,T,A,b))&&(C.replacementTime=($+b-1)*A.segmentDuration,C.media=X.media?X.media:"",C.mediaRange=X.mediaRange,C.indexRange=X.indexRange)}return C}return{getSegmentByIndex:_,getSegmentByTime:function(A,b){if(M(),!A)return null;var Z=A.segmentDuration;if(isNaN(Z))return null;var Y=F.calcPeriodRelativeTimeFromMpdRelativeTime(A,b);return _(A,Math.floor(Y/Z))},getMediaFinishedInformation:function(A){var b={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!A)return b;var Z=A.adaptation.period.mpd.manifest.Period_asArray[A.adaptation.period.index].AdaptationSet_asArray[A.adaptation.index].Representation_asArray[A.index].SegmentList,Y=A&&!isNaN(A.startNumber)?A.startNumber:1,$=Math.max(Y-1,0);return b.numberOfSegments=$+Z.SegmentURL_asArray.length,b}}}y.__dashjs_factory_name="ListSegmentsGetter";var P=U.Z.getClassFactory(y);p.Z=P},5246:function(N,p,w){var U=w(5448),x=w(3393);function E(P){var g=(P=P||{}).timelineConverter;function T(){if(!g||!g.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(x.Z.MISSING_CONFIG_ERROR)}function F(M,_){if(T(),!M)return null;var A,b=M.segments?M.segments.length:-1;if(_<b&&(A=M.segments[_])&&A.index===_)return A;for(var Z=0;Z<b;Z++)if((A=M.segments[Z])&&A.index===_)return A;return null}return{getSegmentByIndex:F,getSegmentByTime:function(M,_){T();var A=function(b,Z){if(!b)return-1;var Y,$,Q,se,C,X=b.segments,ce=X?X.length:null,oe=-1;if(X&&ce>0){for(C=0;C<ce;C++)if(Q=($=X[C]).presentationStartTime,Z+(Y=(se=$.duration)/2)>=Q&&Z-Y<Q+se){oe=$.index;break}}return oe}(M,_);return F(M,A)},getMediaFinishedInformation:function(M){var _={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return M&&M.segments&&(_.numberOfSegments=M.segments.length),_}}}E.__dashjs_factory_name="SegmentBaseGetter";var y=U.Z.getClassFactory(E);p.Z=y},7387:function(N,p,w){w.d(p,{Aj:function(){return y},NF:function(){return F},TJ:function(){return M},eR:function(){return E},vi:function(){return P}});var U=w(2011);function x(_,A){for(;_.length<A;)_="0"+_;return _}function E(_){return _&&_.split("$$").join("$")}function y(_,A){if(!A||!_||_.indexOf("$RepresentationID$")===-1)return _;var b=A.toString();return _.split("$RepresentationID$").join(b)}function P(_,A,b){var Z,Y,$,Q,se,C,X=A.length,ce=2;if(!_)return _;for(;;){if((Z=_.indexOf("$"+A))<0||(Y=_.indexOf("$",Z+X))<0)return _;if(($=_.indexOf("%0",Z+X))>Z&&$<Y)switch(Q=_.charAt(Y-1),se=parseInt(_.substring($+ce,Y-1),10),Q){case"d":case"i":case"u":C=x(b.toString(),se);break;case"x":C=x(b.toString(16),se);break;case"X":C=x(b.toString(16),se).toUpperCase();break;case"o":C=x(b.toString(8),se);break;default:return _}else C=b;_=_.substring(0,Z)+C+_.substring(Y+1)}}function g(_,A,b,Z,Y,$,Q,se){var C,X=new U.Z;return X.representation=_,X.duration=A,X.presentationStartTime=b,X.mediaStartTime=Z,X.availabilityStartTime=Y.calcAvailabilityStartTimeFromPresentationTime($,_,Q),X.availabilityEndTime=Y.calcAvailabilityEndTimeFromPresentationTime($+A,_,Q),X.wallStartTime=Y.calcWallTimeForSegment(X,Q),X.replacementNumber=(C=se,X.representation.startNumber+C),X.index=se,X}function T(_,A,b,Z){var Y=A.adaptation.period;if(isFinite(Y.duration)&&Y.start+Y.duration<=b.presentationStartTime)return!1;if(Z){if(A.availabilityTimeOffset==="INF")return!0;var $=_.getClientReferenceTime();return b.availabilityStartTime.getTime()<=$&&(!isFinite(b.availabilityEndTime)||b.availabilityEndTime.getTime()>=$)}return!0}function F(_,A,b,Z){var Y,$,Q;Y=b.segmentDuration,isNaN(Y)&&(Y=b.adaptation.period.duration),$=parseFloat((b.adaptation.period.start+Z*Y).toFixed(5)),Q=parseFloat(($+Y).toFixed(5));var se=g(b,Y,$,_.calcMediaTimeFromPresentationTime($,b),_,Q,A,Z);return T(_,b,se,A)?se:null}function M(_,A,b,Z,Y,$,Q,se,C,X){var ce,oe,me=Z/$,be=Y/$;return ce=_.calcPresentationTimeFromMediaTime(me,b),T(_,b,oe=g(b,be,ce,me,_,ce+be,A,C),A)?(oe.replacementTime=X||Z,Q=P(Q,"Number",oe.replacementNumber),Q=P(Q,"Time",oe.replacementTime),oe.media=Q,oe.mediaRange=se,oe):null}},3636:function(N,p,w){var U=w(5448),x=w(3393),E=w(7387);function y(g,T){var F=(g=g||{}).timelineConverter;function M(){if(!F||!F.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(x.Z.MISSING_CONFIG_ERROR)}function _(A,b){if(M(),!A)return null;var Z=A.adaptation.period.mpd.manifest.Period_asArray[A.adaptation.period.index].AdaptationSet_asArray[A.adaptation.index].Representation_asArray[A.index].SegmentTemplate;b=Math.max(b,0);var Y=(0,E.NF)(F,T,A,b);if(Y){Y.replacementTime=Math.round((b-1)*A.segmentDuration*A.timescale,10);var $=Z.media;$=(0,E.vi)($,"Number",Y.replacementNumber),$=(0,E.vi)($,"Time",Y.replacementTime),Y.media=$}return Y}return{getSegmentByIndex:_,getSegmentByTime:function(A,b){if(M(),!A)return null;var Z=A.segmentDuration;if(isNaN(Z))return null;var Y=F.calcPeriodRelativeTimeFromMpdRelativeTime(A,b);return _(A,Math.floor(Y/Z))},getMediaFinishedInformation:function(A){var b={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!A)return b;var Z=A.segmentDuration;return isNaN(Z)?b.numberOfSegments=1:b.numberOfSegments=Math.ceil(A.adaptation.period.duration/Z),b}}}y.__dashjs_factory_name="TemplateSegmentsGetter";var P=U.Z.getClassFactory(y);p.Z=P},1724:function(N,p,w){var U=w(5448),x=w(3393),E=w(7387);function y(g,T){var F=(g=g||{}).timelineConverter,M=g.dashMetrics;function _(){if(!F)throw new Error(x.Z.MISSING_CONFIG_ERROR)}function A(Z,Y){var $,Q,se,C,X,ce,oe,me=Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentTemplate||Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentList,be=me.SegmentTimeline,Je=me.SegmentURL_asArray,we=0,qe=-1;oe=Z.timescale;var st=!1;for(se=0,C=($=be.S_asArray).length;se<C&&!st;se++)for(ce=0,(Q=$[se]).hasOwnProperty("r")&&(ce=Q.r),Q.hasOwnProperty("t")&&(we=Q.t),ce<0&&(ce=b(Z,$[se+1],Q,oe,we/oe)),X=0;X<=ce&&!st;X++)(st=Y(we,me,Je,Q,oe,++qe,se))&&(Z.segmentDuration=Q.d/oe),we+=Q.d}function b(Z,Y,$,Q,se){var C;if(Y&&Y.hasOwnProperty("t"))C=Y.t/Q;else try{var X=0;if(isNaN(Z.adaptation.period.start)||isNaN(Z.adaptation.period.duration)||!isFinite(Z.adaptation.period.duration)){var ce=M.getCurrentDVRInfo();X=isNaN(ce.end)?0:ce.end}else X=Z.adaptation.period.start+Z.adaptation.period.duration;C=F.calcMediaTimeFromPresentationTime(X,Z),Z.segmentDuration=$.d/Q}catch(oe){C=0}return Math.max(Math.ceil((C-se)/($.d/Q))-1,0)}return{getSegmentByIndex:function(Z,Y,$){if(_(),!Z)return null;var Q=null,se=!1;return A(Z,function(C,X,ce,oe,me,be,Je){if(se||$<0){var we=X.media,qe=oe.mediaRange;return ce&&(we=ce[Je].media||"",qe=ce[Je].mediaRange),Q=(0,E.TJ)(F,T,Z,C,oe.d,me,we,qe,be,oe.tManifest),!0}return C>=$*me-.5*oe.d&&(se=!0),!1}),Q},getSegmentByTime:function(Z,Y){if(_(),!Z)return null;Y===void 0&&(Y=null);var $=null,Q=F.calcMediaTimeFromPresentationTime(Y,Z);return A(Z,function(se,C,X,ce,oe,me,be){var Je=parseFloat((Q*oe).toPrecision(15));if(Je<se+ce.d&&Je>=se){var we=C.media,qe=ce.mediaRange;return X&&(we=X[be].media||"",qe=X[be].mediaRange),$=(0,E.TJ)(F,T,Z,se,ce.d,oe,we,qe,me,ce.tManifest),!0}return!1}),$},getMediaFinishedInformation:function(Z){if(!Z)return 0;var Y,$,Q,se,C,X,ce,oe=(Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentTemplate||Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentList).SegmentTimeline,me=0,be=0,Je=0;for(ce=Z.timescale,se=(Y=oe.S_asArray).length,Q=0;Q<se;Q++)for(X=0,($=Y[Q]).hasOwnProperty("r")&&(X=$.r),$.hasOwnProperty("t")&&(be=(me=$.t)/ce),X<0&&(X=b(Z,Y[Q+1],$,ce,be)),C=0;C<=X;C++)Je++,be=(me+=$.d)/ce;return{numberOfSegments:Je,mediaTimeOfLastSignaledSegment:be}}}}y.__dashjs_factory_name="TimelineSegmentsGetter";var P=U.Z.getClassFactory(y);p.Z=P},2011:function(N,p){p.Z=function w(){(function(U,x){if(!(U instanceof x))throw new TypeError("Cannot call a class as a function")})(this,w),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(N,p){p.Z=function w(){(function(U,x){if(!(U instanceof x))throw new TypeError("Cannot call a class as a function")})(this,w),this.schemeIdUri="",this.value=""}},1139:function(N,p,w){w.d(p,{Z:function(){return ip}});var U=w(452),x=w.n(U),E=w(3393),y=w(1553),P=w(3860),g=w(5595),T=w(8512),F=w(5448),M=w(6398),_=w(8825);function A(){var k,O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke,Ie,Ge,q,le,ae,ue=this.context,te=(0,g.Z)(ue).getInstance();function Pe(){ve(),ye=!1,Ae=0,Te=0,Ze=0,q=!1,We=!0,Se=!1,le=!1,ke=NaN,Oe=NaN,H&&(te.off(T.Z.DATA_UPDATE_COMPLETED,Pt,k),te.off(T.Z.LOADING_PROGRESS,On,k),te.off(T.Z.MANIFEST_UPDATED,zt,k),te.off(T.Z.STREAMS_COMPOSED,Ve,k),te.off(_.Z.PLAYBACK_ENDED,en,k),te.off(_.Z.STREAM_INITIALIZING,bt,k),te.off(_.Z.REPRESENTATION_SWITCH,et,k),te.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Jt,k),Qt(),H.removeEventListener("canplay",un),H.removeEventListener("canplaythrough",an),H.removeEventListener("play",Bn),H.removeEventListener("waiting",kn),H.removeEventListener("playing",mr),H.removeEventListener("pause",vr),H.removeEventListener("error",Nn),H.removeEventListener("seeking",Ct),H.removeEventListener("seeked",tn),H.removeEventListener("timeupdate",qt),H.removeEventListener("progress",mn),H.removeEventListener("ratechange",Cn),H.removeEventListener("loadedmetadata",Zn),H.removeEventListener("loadeddata",Fn),H.removeEventListener("stalled",Dn),H.removeEventListener("ended",qn),H.removeEventListener("volumechange",Yn)),de=null,H=null,ie=null,_e=null}function xe(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((je(tt)-ct()).toFixed(5))}function je(tt){var Lt=tt||ie;return Lt.start+Lt.duration}function Me(){var tt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];ie&&H&&H.getElement()?(tt&&_e&&mt(ct()),H.play()):ye=!0}function ve(){ie&&H&&H.pause()}function De(tt){var Lt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],yn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],bn=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(ie&&H&&H.getElement()){var yr=isNaN(ke)?H.getTime():ke;tt!==yr&&((Ie=yn===!0)||(ke=tt),O.info("Requesting seek to time: "+tt+(Ie?" (internal)":"")),_e&&bn&&mt(tt),H.setCurrentTime(tt,Lt))}}function $e(){if(ie&&H&&_e){var tt=j&&j.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Lt=W.getCurrentDVRInfo(tt);return Lt&&Lt.range?Lt.range.end:0}}function mt(tt){var Lt=new Date(re.getClientReferenceTime()),yn=ee.getRegularPeriods()[0],bn=re.calcPresentationTimeFromWallTime(Lt,yn);Ae=bn-tt}function ct(){return ie&&H?H.getTime():null}function yt(){return ie&&H?H.isPaused():null}function pt(){return ie&&H?H.isSeeking():null}function Gt(){return ie&&H?H.isStalled():null}function Vt(){return ie&&H?H.getPlaybackRate():null}function jt(){return ie&&H?H.getEnded():null}function Zt(){return _e}function xn(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!yt()&&_e&&H.getReadyState()!==0&&!pt()&&!q){tt||(tt=j.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO);var Lt=ct(),yn=at(Lt,tt),bn=!isNaN(yn)&&yn!==Lt;bn&&!pt()&&(Gt()||Ge||H.getReadyState()===1)&&(O.debug("UpdateCurrentTime: Seek to actual time: ".concat(yn," from currentTime: ").concat(Lt)),De(yn,!1,!1))}}function at(tt,Lt){var yn=W.getCurrentDVRInfo(Lt),bn=yn?yn.range:null;return bn?tt>bn.end?Math.max(bn.end-Ae,bn.start):tt>0&&tt+.25<bn.start&&Math.abs(tt-bn.start)<31536e4?Se?Math.max(bn.end-Ae,bn.start):bn.start:tt:NaN}function St(){de===null&&(de=setInterval(function(){(function(){if(te.trigger(T.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:_e,time:new Date}),Zt()){var tt=Date.now();(isNaN(Oe)||tt>Oe+ae.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(j.addDVRMetric(),yt()?function(){var Lt=Date.now();(!ze||Lt>ze+500)&&(ze=Lt,qt())}():xn(),Oe=tt)}})()},ae.get().streaming.wallclockTimeUpdateInterval))}function Qt(){clearInterval(de),de=null}function Pt(tt){var Lt=ee.convertRepresentationToRepresentationInfo(tt.currentRepresentation),yn=Lt?Lt.mediaInfo.streamInfo:null;yn!==null&&ie.id===yn.id&&(ie=yn)}function un(){te.trigger(T.Z.CAN_PLAY)}function an(){te.trigger(T.Z.CAN_PLAY_THROUGH)}function Jt(tt){tt.streamId===j.getActiveStreamInfo().id&&(Ge=tt.state===P.Z.BUFFER_EMPTY,ae.get().streaming.buffer.setStallState&&H.setStallState(tt.mediaType,tt.state===P.Z.BUFFER_EMPTY))}function Bn(){O.info("Native video element event: play"),xn(),St(),te.trigger(T.Z.PLAYBACK_STARTED,{startTime:ct()})}function kn(){O.info("Native video element event: waiting"),te.trigger(T.Z.PLAYBACK_WAITING,{playingTime:ct()})}function mr(){O.info("Native video element event: playing"),Ie=!1,te.trigger(T.Z.PLAYBACK_PLAYING,{playingTime:ct()})}function vr(){O.info("Native video element event: pause"),te.trigger(T.Z.PLAYBACK_PAUSED,{ended:jt()})}function Ct(){if(!Ie){var tt=ct();isNaN(ke)||ke===tt||(tt=ke),ke=NaN,O.info("Seeking to: "+tt),St(),te.trigger(T.Z.PLAYBACK_SEEKING,{seekTime:tt,streamId:ie.id})}}function tn(){O.info("Native video element event: seeked"),Ie=!1,te.trigger(T.Z.PLAYBACK_SEEKED)}function qt(){ie&&te.trigger(T.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:xe(),time:ct(),streamId:ie.id})}function mn(){te.trigger(T.Z.PLAYBACK_PROGRESS,{streamId:ie.id})}function Cn(){var tt=Vt();O.info("Native video element event: ratechange: ",tt),te.trigger(T.Z.PLAYBACK_RATE_CHANGED,{playbackRate:tt})}function Zn(){O.info("Native video element event: loadedmetadata"),te.trigger(T.Z.PLAYBACK_METADATA_LOADED),St()}function Fn(){O.info("Native video element event: loadeddata"),te.trigger(T.Z.PLAYBACK_LOADED_DATA)}function qn(){O.info("Native video element event: ended"),ve(),Qt();var tt=j?j.getActiveStreamInfo():null;tt&&te.trigger(T.Z.PLAYBACK_ENDED,{isLast:tt.isLast})}function Yn(){te.trigger(T.Z.PLAYBACK_VOLUME_CHANGED)}function en(tt){if(de&&tt.isLast){O.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Lt=tt.seekTime?tt.seekTime:je();H.setCurrentTime(Lt),ve(),Qt()}}function Nn(tt){var Lt=tt.target||tt.srcElement;te.trigger(T.Z.PLAYBACK_ERROR,{error:Lt.error})}function Pn(){_e=!1}function On(tt){if(tt.stream===!1&&Se&&!isNaN(tt.request.duration)){var Lt=1.2*tt.request.duration;Lt>Ae&&(O.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Lt.toFixed(2)),Ae=Lt,Te=Lt)}}function Dn(tt){te.trigger(T.Z.PLAYBACK_STALLED,{e:tt})}function bt(tt){var Lt;(Lt=tt.mediaInfo)&&Lt.supplementalProperties&&Lt.supplementalProperties[E.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Lt.supplementalProperties[E.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(O.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),Se=!0)}function et(tt){var Lt=j.getActiveStreamInfo();tt&&Lt&&tt.currentRepresentation&&tt.streamId&&tt.streamId===Lt.id&&tt.mediaType&&(tt.mediaType===E.Z.VIDEO||tt.mediaType===E.Z.AUDIO)&&(We=tt.currentRepresentation.availabilityTimeComplete,(Se=!We)&&!le&&(le=!0))}function zt(){q=!0}function Ve(){q=!1}return k={initialize:function(tt,Lt){ie=tt,Lt!==!0&&(H.addEventListener("canplay",un),H.addEventListener("canplaythrough",an),H.addEventListener("play",Bn),H.addEventListener("waiting",kn),H.addEventListener("playing",mr),H.addEventListener("pause",vr),H.addEventListener("error",Nn),H.addEventListener("seeking",Ct),H.addEventListener("seeked",tn),H.addEventListener("timeupdate",qt),H.addEventListener("progress",mn),H.addEventListener("ratechange",Cn),H.addEventListener("loadedmetadata",Zn),H.addEventListener("loadeddata",Fn),H.addEventListener("stalled",Dn),H.addEventListener("ended",qn),H.addEventListener("volumechange",Yn),_e=ie.manifestInfo.isDynamic,Ge=!1,Ie=!1,te.on(T.Z.DATA_UPDATE_COMPLETED,Pt,k),te.on(T.Z.LOADING_PROGRESS,On,k),te.on(T.Z.MANIFEST_UPDATED,zt,k),te.on(T.Z.STREAMS_COMPOSED,Ve,k),te.on(_.Z.PLAYBACK_ENDED,en,k,{priority:g.Z.EVENT_PRIORITY_HIGH}),te.on(_.Z.STREAM_INITIALIZING,bt,k),te.on(_.Z.REPRESENTATION_SWITCH,et,k),te.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Jt,k),te.on(_.Z.DYNAMIC_TO_STATIC,Pn,k),ye&&(ye=!1,Me()))},setConfig:function(tt){tt&&(tt.streamController&&(j=tt.streamController),tt.serviceDescriptionController&&(V=tt.serviceDescriptionController),tt.dashMetrics&&(W=tt.dashMetrics),tt.adapter&&(ee=tt.adapter),tt.videoModel&&(H=tt.videoModel),tt.timelineConverter&&(re=tt.timelineConverter),tt.settings&&(ae=tt.settings))},getTimeToStreamEnd:xe,getBufferLevel:function(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Lt=null;return j.getActiveStreamProcessors().forEach(function(yn){if(!tt||tt.length===0||tt.indexOf(yn.getType())===-1){var bn=yn.getBufferLevel();Lt=Lt===null?bn:Math.min(Lt,bn)}}),Lt},getPlaybackStalled:function(){return Ge},getTime:ct,getLowLatencyModeEnabled:function(){return Se},getInitialCatchupModeActivated:function(){return le},getIsManifestUpdateInProgress:function(){return q},getPlaybackRate:Vt,getPlayedRanges:function(){return ie&&H?H.getPlayedRanges():null},getEnded:jt,getIsDynamic:Zt,getStreamController:function(){return j},computeAndSetLiveDelay:function(tt,Lt){var yn,bn,yr,oi=!isNaN(tt)&&isFinite(tt)?tt:NaN,gi=ee.getSuggestedPresentationDelay(),Xr=V.getServiceDescriptionSettings();return yn=isNaN(ae.get().streaming.delay.liveDelay)?ae.get().streaming.delay.liveDelayFragmentCount===null||isNaN(ae.get().streaming.delay.liveDelayFragmentCount)||isNaN(oi)?Xr&&!isNaN(Xr.liveDelay)&&Xr.liveDelay>0?Xr.liveDelay:ae.get().streaming.delay.useSuggestedPresentationDelay===!0&&gi!==null&&!isNaN(gi)&&gi>0?gi:isNaN(oi)?Lt&&!isNaN(Lt.minBufferTime)?4*Lt.minBufferTime:4*ie.manifestInfo.minBufferTime:4*oi:oi*ae.get().streaming.delay.liveDelayFragmentCount:ae.get().streaming.delay.liveDelay,(yr=ee.getAvailabilityStartTime())!==null&&(Ze=yr),bn=Lt&&Lt.dvrWindowSize>0?Math.min(yn,Lt.dvrWindowSize):yn,Ae=bn,Te=bn,bn},getLiveDelay:function(){return Ae},getOriginalLiveDelay:function(){return Te},getCurrentLiveLatency:function(){if(!_e||isNaN(Ze))return NaN;var tt=ct();if(isNaN(tt)||tt===0)return 0;var Lt=new Date().getTime()+1e3*re.getClientTimeOffset();return Math.max(((Lt-Ze-1e3*tt)/1e3).toFixed(3),0)},play:Me,isPaused:yt,isStalled:Gt,pause:ve,isSeeking:pt,getStreamEndTime:je,seek:De,seekToOriginalLive:function(){var tt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Lt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],yn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],bn=$e();if(bn!==0){var yr=bn-(Ae=Te);De(yr,tt,Lt,yn)}},seekToCurrentLive:function(){var tt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Lt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],yn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],bn=$e();if(bn!==0){var yr=bn-Ae;De(yr,tt,Lt,yn)}},reset:Pe,updateCurrentTime:xn,getAvailabilityStartTime:function(){return Ze}},O=(0,M.Z)(ue).getInstance().getLogger(k),Pe(),k}A.__dashjs_factory_name="PlaybackController";var b=F.Z.getSingletonFactory(A),Z=w(3186),Y="loading",$="executed",Q="failed";function se(k){var O,j,V,W,ee=(k=k||{}).eventBus,H=k.events,re=k.dashMetrics,de=k.fragmentLoader,Ae=k.debug,Te=k.streamInfo,ie=k.type;function _e(q){var le;return!!q&&(le=!1,V.some(function(ae){if(ue=q,te=ae,!isNaN(ue.index)&&ue.startTime===te.startTime&&ue.adaptationIndex===te.adaptationIndex&&ue.type===te.type||function(Pe,xe){return isNaN(Pe.index)&&isNaN(xe.index)&&Pe.quality===xe.quality}(q,ae)||function(Pe,xe){return Pe.action===Z.Z.ACTION_COMPLETE&&Pe.action===xe.action}(q,ae))return le=!0;var ue,te}),le)}function ye(q){return isNaN(q.duration)?.25:Math.min(q.duration/8,.5)}function ze(q){V=V.filter(function(le){var ae=ye(le);return isNaN(le.startTime)||q!==void 0&&le.startTime>=q-ae})}function Oe(q,le){le<=q+.5||(V=V.filter(function(ae){var ue=ye(ae);return isNaN(ae.startTime)||ae.startTime>=le-ue||isNaN(ae.duration)||ae.startTime+ae.duration<=q+ue}))}function Ze(q,le,ae){for(var ue=q.length-1;ue>=0;ue--){var te=q[ue],Pe=te.startTime,xe=Pe+te.duration;if(ae=isNaN(ae)?ye(te):ae,!isNaN(Pe)&&!isNaN(xe)&&le+ae>=Pe&&le-ae<xe||isNaN(Pe)&&isNaN(le))return te}return null}function We(q,le){re.addSchedulingInfo(q,le),re.addRequestsQueue(q.mediaType,W,V)}function Se(q){q.sender===de&&(W.splice(W.indexOf(q.request),1),q.response&&!q.error&&V.push(q.request),We(q.request,q.error?Q:$),ee.trigger(H.FRAGMENT_LOADING_COMPLETED,{request:q.request,response:q.response,error:q.error,sender:this},{streamId:Te.id,mediaType:ie}))}function ke(q){q.sender===de&&ee.trigger(H.FRAGMENT_LOADING_PROGRESS,{request:q.request,response:q.response,error:q.error,sender:this},{streamId:Te.id,mediaType:ie})}function Ie(q){q.sender===de&&ee.trigger(H.FRAGMENT_LOADING_ABANDONED,{request:q.request},{streamId:Te.id,mediaType:ie})}function Ge(){V=[],W=[]}return O={getStreamId:function(){return Te.id},getType:function(){return ie},getRequests:function(q){var le=q?q.state instanceof Array?q.state:[q.state]:[],ae=[];return le.forEach(function(ue){var te=function(Pe){var xe;switch(Pe){case Y:xe=W;break;case $:xe=V;break;default:xe=[]}return xe}(ue);ae=ae.concat(function(Pe,xe){return xe.hasOwnProperty("time")?[Ze(Pe,xe.time,xe.threshold)]:Pe.filter(function(je){for(var Me in xe)if(Me!=="state"&&xe.hasOwnProperty(Me)&&je[Me]!=xe[Me])return!1;return!0})}(te,q))}),ae},isFragmentLoaded:_e,isFragmentLoadedOrPending:function(q){var le,ae=!1,ue=0;if(!(ae=_e(q)))for(ue=0;ue<W.length;ue++)le=W[ue],q.url===le.url&&q.startTime===le.startTime&&(ae=!0);return ae},removeExecutedRequestsBeforeTime:ze,removeExecutedRequestsAfterTime:function(q){V=V.filter(function(le){return isNaN(le.startTime)||q!==void 0&&le.startTime<q})},syncExecutedRequestsWithBufferedRange:function(q,le){if(q&&q.length!==0){for(var ae=0,ue=0,te=q.length;ue<te;ue++)Oe(ae,q.start(ue)),ae=q.end(ue);le>0&&Oe(ae,le)}else ze()},abortRequests:function(){j.debug("abort requests"),de.abort(),W=[]},executeRequest:function(q){q.action===Z.Z.ACTION_DOWNLOAD?(We(q,Y),W.push(q),function(le){ee.trigger(H.FRAGMENT_LOADING_STARTED,{request:le},{streamId:Te.id,mediaType:ie}),de.load(le)}(q)):j.warn("Unknown request action.")},reset:function(){ee.off(H.LOADING_COMPLETED,Se,this),ee.off(H.LOADING_DATA_PROGRESS,ke,this),ee.off(H.LOADING_ABANDONED,Ie,this),de&&de.reset(),Ge()},resetInitialSettings:Ge,addExecutedRequest:function(q){V.push(q)}},j=Ae.getLogger(O),Ge(),ee.on(H.LOADING_COMPLETED,Se,O),ee.on(H.LOADING_DATA_PROGRESS,ke,O),ee.on(H.LOADING_ABANDONED,Ie,O),O}se.__dashjs_factory_name="FragmentModel";var C=F.Z.getClassFactory(se);C.FRAGMENT_MODEL_LOADING=Y,C.FRAGMENT_MODEL_EXECUTED=$,C.FRAGMENT_MODEL_CANCELED="canceled",C.FRAGMENT_MODEL_FAILED=Q,F.Z.updateClassFactory(se.__dashjs_factory_name,C);var X=C,ce=w(5459);function oe(k){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},oe(k)}function me(k,O){return me=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},me(k,O)}function be(k,O){return!O||oe(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Je(k){return Je=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Je(k)}var we=new(function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&me(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Je(O);if(j){var re=Je(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return be(this,ee)});function W(){var ee;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,W),(ee=V.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,ee.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,ee.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,ee.SEGMENT_BASE_LOADER_ERROR_CODE=15,ee.TIME_SYNC_FAILED_ERROR_CODE=16,ee.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,ee.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,ee.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,ee.APPEND_ERROR_CODE=20,ee.REMOVE_ERROR_CODE=21,ee.DATA_UPDATE_FAILED_ERROR_CODE=22,ee.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,ee.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,ee.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,ee.DOWNLOAD_ERROR_ID_SIDX_CODE=26,ee.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,ee.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,ee.DOWNLOAD_ERROR_ID_XLINK_CODE=29,ee.MANIFEST_ERROR_ID_PARSE_CODE=31,ee.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,ee.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,ee.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,ee.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,ee.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",ee.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",ee.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",ee.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",ee.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",ee.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",ee.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",ee.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",ee.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",ee.APPEND_ERROR_MESSAGE="chunk is not defined",ee.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",ee.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",ee.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",ee.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",ee.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",ee.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",ee}return W}(w(2230).Z)),qe=w(1264),st=w(7855);function ft(k){var O,j,V,W,ee,H,re=this.context,de=(0,qe.Z)(re).getInstance(),Ae=k.textController,Te=k.eventBus,ie=[],_e=[],ye=!1,ze=k.mediaSource,Oe=null;function Ze(te){return new Promise(function(Pe){ue(function(){W.changeType&&W.changeType(te),Pe()})})}function We(te){return W=Ae.getTextSourceBuffer(te),Promise.resolve()}function Se(){if(typeof W.addEventListener=="function")try{W.addEventListener("updateend",le,!1),W.addEventListener("error",ae,!1),W.addEventListener("abort",ae,!1)}catch(te){H=setInterval(le,50)}else H=setInterval(le,50)}function ke(te){return new Promise(function(Pe){W&&de.get().streaming.buffer.useAppendWindow?ue(function(){try{if(!W)return void Pe();var xe=ze.duration,je=0;te&&!isNaN(te.start)&&!isNaN(te.duration)&&isFinite(te.duration)&&(xe=te.start+te.duration),te&&!isNaN(te.start)&&(je=te.start),W.appendWindowEnd===xe&&W.appendWindowStart===je||(W.appendWindowStart=0,W.appendWindowEnd=xe+.01,W.appendWindowStart=Math.max(je-.1,0),V.debug("Updated append window for ".concat(ee.type,". Set start to ").concat(W.appendWindowStart," and end to ").concat(W.appendWindowEnd))),Pe()}catch(Me){V.warn("Failed to set append window"),Pe()}}):Pe()})}function Ie(te){return new Promise(function(Pe){W?ue(function(){try{W.timestampOffset===te||isNaN(te)||(W.timestampOffset=te,V.debug("Set MSE timestamp offset to ".concat(te))),Pe()}catch(xe){Pe()}}):Pe()})}function Ge(){if(!ye&&_e.length>0){ye=!0;var te=_e[0];_e.splice(0,1);var Pe=function(){ye=!1,_e.length>0&&Ge.call(this),te&&te.data&&te.data.segmentType&&te.data.segmentType!==st.w.INIT_SEGMENT_TYPE&&delete te.data.bytes,te.promise.resolve({chunk:te.data})};try{Oe=te.request,te.data.bytes.byteLength===0?Pe.call(this):(W.appendBuffer?W.appendBuffer(te.data.bytes):W.append(te.data.bytes,te.data),ue(Pe.bind(this)))}catch(xe){V.fatal('SourceBuffer append failed "'+xe+'"'),_e.length>0?Ge():ye=!1,delete te.data.bytes,te.promise.reject({chunk:te.data,error:new ce.Z(xe.code,xe.message)})}}}function q(){ie.length>0&&(W.updating||(ie.shift()(),q()))}function le(){W.updating||q()}function ae(te){var Pe,xe,je=te.target||{};Pe=T.Z.SOURCE_BUFFER_ERROR,xe={error:je,lastRequestAppended:Oe},Te.trigger(Pe,xe,{streamId:ee.streamInfo.id,mediaType:j})}function ue(te){ie.push(te),W.updating||q()}return O={getType:function(){return j},getAllBufferRanges:function(){try{return W.buffered}catch(te){return V.error("getAllBufferRanges exception: "+te.message),null}},getBuffer:function(){return W},append:function(te){var Pe=this,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(je,Me){te?(_e.push({data:te,promise:{resolve:je,reject:Me},request:xe}),ue(Ge.bind(Pe))):Me({chunk:te,error:new ce.Z(we.APPEND_ERROR_CODE,we.APPEND_ERROR_MESSAGE)})})},remove:function(te){return new Promise(function(Pe,xe){var je=te.start,Me=te.end;je>=0&&Me>je?ue(function(){try{W.remove(je,Me),ue(function(){Pe({from:je,to:Me,unintended:!1}),te.resolve&&te.resolve()})}catch(ve){xe({from:je,to:Me,unintended:!1,error:new ce.Z(we.REMOVE_ERROR_CODE,we.REMOVE_ERROR_MESSAGE)}),te.reject&&te.reject(ve)}}):Pe()})},abort:function(){return new Promise(function(te){try{_e=[],ze.readyState==="open"?ue(function(){try{W&&W.abort(),te()}catch(Pe){te()}}):(W&&W.setTextTrack&&ze.readyState==="ended"&&W.abort(),te())}catch(Pe){te()}})},reset:function(){if(W){try{ie=[],function(){try{typeof W.removeEventListener=="function"&&(W.removeEventListener("updateend",le,!1),W.removeEventListener("error",ae,!1),W.removeEventListener("abort",ae,!1)),clearInterval(H)}catch(te){V.error(te)}}(),ye=!1,_e=[],W.getClassName&&W.getClassName()==="TextSourceBuffer"||(V.debug("Removing sourcebuffer from media source"),ze.removeSourceBuffer(W))}catch(te){}W=null}Oe=null},updateTimestampOffset:Ie,initializeForStreamSwitch:function(te,Pe,xe){j=(ee=te).type;var je=ee.codec;(function(ve){W=ve.getBuffer()})(xe),Se();var Me=[];return Me.push(new Promise(function(ve){ue(function(){var De=W.appendWindowStart,$e=W.appendWindowEnd;W&&(W.abort(),W.appendWindowStart=De,W.appendWindowEnd=$e),ve()})})),Me.push(ke(ee.streamInfo)),de.get().streaming.buffer.useChangeTypeForTrackSwitch&&Me.push(Ze(je)),Pe&&Pe.MSETimeOffset!==void 0&&Me.push(Ie(Pe.MSETimeOffset)),Promise.all(Me)},initializeForFirstUse:function(te,Pe,xe){j=(ee=Pe).type;var je=ee.codec;try{if(je.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return We(te);W=ze.addSourceBuffer(je),Se();var Me=[];return Me.push(ke(ee.streamInfo)),xe&&xe.MSETimeOffset!==void 0&&Me.push(Ie(xe.MSETimeOffset)),Promise.all(Me)}catch(ve){return ee.type==E.Z.TEXT&&!ee.isFragmented||je.indexOf('codecs="stpp')!==-1||je.indexOf('codecs="vtt')!==-1||je.indexOf("text/vtt")!==-1?We(te):Promise.reject(ve)}},updateAppendWindow:ke,changeType:Ze},V=(0,M.Z)(re).getInstance().getLogger(O),O}ft.__dashjs_factory_name="SourceBufferSink";var Ce=F.Z.getClassFactory(ft);function He(k){var O,j,V,W=this.context,ee=[],H=k;function re(de,Ae){return ee=ee.filter(function(Te){return!((isNaN(Ae)||Te.start<Ae)&&(isNaN(de)||Te.end>de))}),Promise.resolve()}return O={getAllBufferRanges:function(){for(var de=[],Ae=0;Ae<ee.length;Ae++){var Te=ee[Ae];de.length===0||Te.start>de[de.length-1].end?de.push({start:Te.start,end:Te.end}):de[de.length-1].end=Te.end}var ie={start:function(_e){return de[_e].start},end:function(_e){return de[_e].end}};return Object.defineProperty(ie,"length",{get:function(){return de.length}}),ie},append:function(de){return de.segmentType!=="InitializationSegment"?(ee.push(de),ee.sort(function(Ae,Te){return Ae.start-Te.start}),V=null):V=de,j.debug("PreBufferSink appended chunk s: "+de.start+"; e: "+de.end),H&&H({chunk:de}),Promise.resolve()},remove:re,abort:function(){return Promise.resolve()},discharge:function(de,Ae){var Te=function(ie,_e){return ee.filter(function(ye){return(isNaN(_e)||ye.start<_e)&&(isNaN(ie)||ye.end>ie)})}(de,Ae);return V&&(Te.push(V),V=null),re(de,Ae),Te},reset:function(){ee=[],V=null,H=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(de){de()},getBuffer:function(){return this}},j=(0,M.Z)(W).getInstance().getLogger(O),O}He.__dashjs_factory_name="PreBufferSink";var vt=F.Z.getClassFactory(He);function Re(){var k={};return{save:function(O){var j=O.streamId,V=O.representationId;k[j]=k[j]||{},k[j][V]=O},extract:function(O,j){return k&&k[O]&&k[O][j]?k[O][j]:null},reset:function(){k={}}}}Re.__dashjs_factory_name="InitCache";var Ye=F.Z.getSingletonFactory(Re),ot=.01,Ht="BufferController";function Bt(k){k=k||{};var O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke,Ie,Ge,q=this.context,le=(0,g.Z)(q).getInstance(),ae=k.errHandler,ue=k.fragmentModel,te=k.representationController,Pe=k.adapter,xe=k.textController,je=k.abrController,Me=k.playbackController,ve=k.streamInfo,De=k.type,$e=k.settings;function mt(et){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(Ve,tt){H=et,Ae&&zt&&typeof Ae.discharge=="function"?(Te=Ae,yt(zt).then(function(){Ve()}).catch(function(Lt){tt(Lt)})):Ve()})}function ct(et){return Pe.convertRepresentationToRepresentationInfo(te.getRepresentationForQuality(et))}function yt(et){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(Ve,tt){Se&&et?H?(ie=!1,Gt(et,zt).then(function(Lt){Ve(Lt)}).catch(function(Lt){tt(Lt)})):(ie=!0,pt().then(function(Lt){Ve(Lt)}).catch(function(Lt){tt(Lt)})):Ve(null)})}function pt(){var et=this;return new Promise(function(zt,Ve){var tt=je.getQualityFor(De,ve.id);Ae=vt(q).create(at.bind(et)),Zn(ct(tt)).then(function(){zt(Ae)}).catch(function(){Ve()})})}function Gt(et,zt){return new Promise(function(Ve,tt){var Lt=je.getQualityFor(De,ve.id);Ae=Ce(q).create({mediaSource:H,textController:xe,eventBus:le}),function(yn,bn,yr){var oi=ct(yr);return bn&&bn[De]&&(De===E.Z.VIDEO||De===E.Z.AUDIO)?Ae.initializeForStreamSwitch(yn,oi,bn[De]):Ae.initializeForFirstUse(ve,yn,oi)}(et,zt,Lt).then(function(){return Zn(ct(Lt))}).then(function(){Ve(Ae)}).catch(function(yn){j.fatal("Caught error on create SourceBuffer: "+yn),ae.error(new ce.Z(we.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,we.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+De)),tt(yn)})})}function Vt(et){$e.get().streaming.cacheInitSegments&&(j.info("Init fragment finished loading saving to",De+"'s init cache"),Se.save(et.chunk)),j.debug("Append Init fragment",De," with representationId:",et.chunk.representationId," and quality:",et.chunk.quality,", data size:",et.chunk.bytes.byteLength),Zt(et.chunk)}function jt(et){Zt(et.chunk,et.request)}function Zt(et){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Ae&&(Ae.append(et,zt).then(function(Ve){at(Ve)}).catch(function(Ve){at(Ve)}),et.mediaInfo.type===E.Z.VIDEO&&Dn(T.Z.VIDEO_CHUNK_RECEIVED,{chunk:et}))}function xn(et){if(et&&et.length>0)for(var zt=0,Ve=et.length;zt<Ve;zt++)j.debug("Buffered range: "+et.start(zt)+" - "+et.end(zt)+", currentTime = ",Me.getTime())}function at(et){if(et.error)return et.error.code===22&&function(){if(We=!0,ee=.8*Nn(),j.warn("Quota exceeded, Critical Buffer: "+ee),ee>0){var tt=Math.max(.2*ee,1),Lt=ee-tt,yn=Math.min($e.get().streaming.buffer.bufferTimeAtTopQuality,.9*Lt),bn=Math.min($e.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Lt),yr={streaming:{buffer:{bufferToKeep:parseFloat(tt.toFixed(5)),bufferTimeAtTopQuality:parseFloat(yn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(bn.toFixed(5))}}};$e.update(yr)}}(),void(et.error.code!==22&&On()||(j.warn("Clearing playback buffer to overcome quota exceed situation"),Dn(T.Z.QUOTA_EXCEEDED,{criticalBufferLevel:ee,quotaExceededTime:et.chunk.start}),qt(tn())));if(Ae&&(Bn(),We=!1,(ze=et.chunk)&&ze.endFragment)){ze&&!isNaN(ze.index)&&(re=Math.max(ze.index,re),kn());var zt=Ae.getAllBufferRanges();ze.segmentType===st.w.MEDIA_SEGMENT_TYPE&&(xn(zt),Pt(),function(){if(!isNaN(Ge)&&!ie)if(De===E.Z.AUDIO||De===E.Z.VIDEO){var tt=Me.getTime(),Lt=Jt(tt,0),yn=Jt(Ge,0);if(Lt&&yn&&Lt.start===yn.start)Ge=NaN;else{var bn=te.getCurrentRepresentation().segmentDuration,yr=Jt(Ge,bn);yr&&($e.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(tt-Ge)>bn?Ge<=yr.end&&Me.seek(Math.max(Ge,yr.start),!1,!0):tt<yr.start&&Me.seek(yr.start,!1,!0))}}else Ge=NaN}());var Ve=!1;_e&&(_e.indexOf(ze)>0&&(Ve=!0),_e=null),ze&&!Ve&&Dn(T.Z.BYTES_APPENDED_END_FRAGMENT,{quality:ze.quality,startTime:ze.start,index:ze.index,bufferedRanges:zt,segmentType:ze.segmentType,mediaType:De})}}function St(){return new Promise(function(et,zt){var Ve=Qt();if(!Ve||Ve.length===0)return Pt(),void et();qt(Ve).then(function(){et()}).catch(function(tt){zt(tt)})})}function Qt(et){var zt=[],Ve=Ae.getAllBufferRanges();if(!Ve||Ve.length===0)return zt;if(!et&&et!==0||isNaN(et))zt.push({start:Ve.start(0),end:Ve.end(Ve.length-1)+.5});else{var tt=function(yn,bn){var yr=$e.get().streaming.buffer.bufferToKeep,oi=bn.start(0);if(yn-oi>yr){var gi=Math.max(0,yn-yr),Xr=ue.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:yn,threshold:ot})[0];if(Xr&&(gi=Math.min(Xr.startTime,gi)),gi>0)return{start:oi,end:gi}}return null}(et,Ve),Lt=function(yn,bn){var yr=bn.end(bn.length-1)+.5,oi=Pn(yn),gi=ve.manifestInfo.duration>=$e.get().streaming.buffer.longFormContentDurationThreshold?$e.get().streaming.buffer.bufferTimeAtTopQualityLongForm:$e.get().streaming.buffer.bufferTimeAtTopQuality,Xr=isNaN(oi)?yn:Math.min(oi,yn+gi);if(Xr>=bn.end(bn.length-1))return null;var Lo=ue.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:yn,threshold:ot})[0];if(Lo&&(Xr=Math.max(Lo.startTime+Lo.duration,Xr)),$e.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var zi=0;zi<bn.length;zi++)if(bn.start(zi)<=yn&&yn<=bn.end(zi)&&bn.start(zi)<=Xr&&Xr<=bn.end(zi)){var Cs=Xr;Xr=zi+1<bn.length?bn.start(zi+1):bn.end(zi)+1,j.debug("Buffered range ["+bn.start(zi)+", "+bn.end(zi)+"] overlaps with targetTime "+yn+" and range to be pruned ["+Cs+", "+yr+"], using ["+Xr+", "+yr+"] instead"+(Xr<yr?"":" (no actual pruning)"));break}}return Xr<bn.end(bn.length-1)?{start:Xr,end:yr}:null}(et,Ve);tt&&zt.push(tt),Lt&&zt.push(Lt)}return zt}function Pt(){(!Ie||De===E.Z.TEXT&&xe.isTextEnabled())&&Bn()}function un(){mr()}function an(){mr(),Ge=NaN}function Jt(et,zt){if(!Ae)return null;var Ve,tt,Lt=Ae.getAllBufferRanges(),yn=0,bn=0,yr=null,oi=null,gi=0,Xr=isNaN(zt)?.15:zt;if(Lt!=null){for(tt=0,Ve=Lt.length;tt<Ve;tt++)if(yn=Lt.start(tt),bn=Lt.end(tt),yr===null)gi=Math.abs(yn-et),(et>=yn&&et<bn||gi<=Xr)&&(yr=yn,oi=bn);else{if(!((gi=yn-oi)<=Xr))break;oi=bn}if(yr!==null)return{start:yr,end:oi}}return null}function Bn(){if(Me){var et=Me.getTime()||0;ie&&(et=isNaN(Ge)?0:Ge);var zt=$e.get().streaming.gaps.jumpGaps&&!isNaN($e.get().streaming.gaps.smallGapLimit)?$e.get().streaming.gaps.smallGapLimit:NaN;W=Math.max(function(Ve,tt){var Lt;return $e.get().streaming.gaps.jumpGaps&&(tt=$e.get().streaming.gaps.smallGapLimit),(Lt=Jt(Ve,tt))===null?0:Lt.end-Ve}(et,zt),0),Dn(T.Z.BUFFER_LEVEL_UPDATED,{mediaType:De,bufferLevel:W}),mr()}}function kn(){var et=re>=de-1,zt=Me.getTimeToStreamEnd(ve)-W<1e-5;!et&&!zt||V||(en(!0),j.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(ve.id," and type ").concat(De)))}function mr(){De!==E.Z.AUDIO&&De!==E.Z.VIDEO||((!Me.getLowLatencyModeEnabled()&&W<$e.get().streaming.buffer.stallThreshold||W===0)&&!V?vr(P.Z.BUFFER_EMPTY):(V||W>=$e.get().streaming.buffer.stallThreshold||Me.getLowLatencyModeEnabled()&&W>0)&&vr(P.Z.BUFFER_LOADED))}function vr(et){ye===et||et===P.Z.BUFFER_EMPTY&&Me.getTime()===0||De===E.Z.TEXT&&!xe.isTextEnabled()||(ye=et,Dn(T.Z.BUFFER_LEVEL_STATE_CHANGED,{state:et}),Dn(et===P.Z.BUFFER_LOADED?T.Z.BUFFER_LOADED:T.Z.BUFFER_EMPTY),j.debug(et===P.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function Ct(){Ae&&De!==E.Z.TEXT&&(V||qt(tn()))}function tn(){var et=[],zt=Ae.getAllBufferRanges();if(!zt||zt.length===0)return et;var Ve=Me.getTime(),tt=Math.max(0,Ve-$e.get().streaming.buffer.bufferToKeep),Lt=ue.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ve,threshold:ot})[0];if(Lt)tt=Math.min(Lt.startTime,tt);else if(Ve===0&&Me.getIsDynamic())return[];if(zt.start(0)<=tt){for(var yn={start:0,end:tt},bn=0;bn<zt.length&&zt.end(bn)<=tt;bn++)yn.end=zt.end(bn);yn.start<yn.end&&et.push(yn)}return et}function qt(et){return new Promise(function(zt,Ve){if(et&&Ae&&et.length!==0){var tt=[];et.forEach(function(Lt){tt.push(function(yn){return new Promise(function(bn,yr){yn.resolve=bn,yn.reject=yr,ke.push(yn)})}(Lt))}),Ze||mn(),Promise.all(tt).then(function(){zt()}).catch(function(Lt){Ve(Lt)})}else zt()})}function mn(){try{if(ke.length===0||!Ae)return j.debug("Nothing to prune, halt pruning"),ke=[],void(Ze=!1);var et=Ae.getBuffer();if(!et||!et.buffered||et.buffered.length===0)return j.debug("SourceBuffer is empty (or does not exist), halt pruning"),ke=[],void(Ze=!1);var zt=ke.shift();j.debug("".concat(De,": Removing buffer from: ").concat(zt.start," to ").concat(zt.end)),Ze=!0,Me.getTime()<zt.end&&en(!1),Ae.remove(zt).then(function(Ve){Cn(Ve)}).catch(function(Ve){Cn(Ve)})}catch(Ve){Ze=!1}}function Cn(et){j.debug("onRemoved buffer from:",et.from,"to",et.to),Ae&&(xn(Ae.getAllBufferRanges()),ke.length===0&&(Ze=!1,Bn()),et.unintended&&(j.warn("Detected unintended removal from:",et.from,"to",et.to,"setting streamprocessor time to",et.from),Dn(T.Z.SEEK_TARGET,{time:et.from})),Ze?mn():(Ie?Ie=!1:Bn(),Dn(T.Z.BUFFER_CLEARED,{from:et.from,to:et.to,unintended:et.unintended,hasEnoughSpaceToAppend:On(),quotaExceeded:We})))}function Zn(et){return new Promise(function(zt){et&&et.MSETimeOffset!==void 0&&Ae&&Ae.updateTimestampOffset?Ae.updateTimestampOffset(et.MSETimeOffset).then(function(){zt()}).catch(function(){zt()}):zt()})}function Fn(){return Ae&&!V?Ae.updateAppendWindow(ve):Promise.resolve()}function qn(){++Oe*($e.get().streaming.wallclockTimeUpdateInterval/1e3)>=$e.get().streaming.buffer.bufferPruningInterval&&(Oe=0,Ct())}function Yn(){mr()}function en(et){(V=et)?Dn(T.Z.BUFFERING_COMPLETED):de=Number.POSITIVE_INFINITY}function Nn(){try{var et,zt,Ve=Ae.getAllBufferRanges(),tt=0;if(!Ve)return tt;for(zt=0,et=Ve.length;zt<et;zt++)tt+=Ve.end(zt)-Ve.start(zt);return tt}catch(Lt){return 0}}function Pn(et){try{var zt=et,Ve=Ae.getAllBufferRanges();if(!Ve||Ve.length===0)return NaN;for(var tt=0;zt===et&&tt<Ve.length;){var Lt=Ve.start(tt),yn=Ve.end(tt);zt>=Lt&&zt<=yn&&(zt=yn),tt+=1}return zt===et?NaN:zt}catch(bn){}}function On(){var et=Nn();return isNaN(et)||et<ee}function Dn(et,zt){var Ve=zt||{};le.trigger(et,Ve,{streamId:ve.id,mediaType:De})}function bt(et,zt){if(ee=Number.POSITIVE_INFINITY,ye=void 0,de=Number.POSITIVE_INFINITY,re=0,ze=null,V=!1,Ze=!1,We=!1,W=0,Oe=0,ke=[],Ge=NaN,ie=!1,Ae){var Ve=Ae;Ae=null,et||zt||Ve.abort().then(function(){Ve.reset(zt),Ve=null})}Ie=!1}return O={initialize:function(et){mt(et),le.on(T.Z.INIT_FRAGMENT_LOADED,Vt,O),le.on(T.Z.MEDIA_FRAGMENT_LOADED,jt,O),le.on(T.Z.WALLCLOCK_TIME_UPDATED,qn,O),le.on(_.Z.PLAYBACK_PLAYING,an,O),le.on(_.Z.PLAYBACK_PROGRESS,Pt,O),le.on(_.Z.PLAYBACK_TIME_UPDATED,Pt,O),le.on(_.Z.PLAYBACK_RATE_CHANGED,Yn,O),le.on(_.Z.PLAYBACK_STALLED,un,O)},getStreamId:function(){return ve.id},getType:function(){return De},getBufferControllerType:function(){return Ht},createBufferSink:yt,dischargePreBuffer:function(){if(Ae&&Te&&typeof Te.discharge=="function"){var et=Te.getAllBufferRanges();if(et.length>0){for(var zt="Beginning "+De+"PreBuffer discharge, adding buffer for:",Ve=0;Ve<et.length;Ve++)zt+=" start: "+et.start(Ve)+", end: "+et.end(Ve)+";";j.debug(zt)}else j.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");_e=[];for(var tt=Te.discharge(),Lt=null,yn=0;yn<tt.length;yn++){var bn=tt[yn];if(bn.segmentType!==st.w.INIT_SEGMENT_TYPE){var yr=Se.extract(bn.streamId,bn.representationId);yr&&Lt!==yr&&(_e.push(yr),Ae.append(yr),Lt=yr)}_e.push(bn),Ae.append(bn)}Te.reset(),Te=null}},getBuffer:function(){return Ae},getBufferLevel:function(){return W},getRangeAt:Jt,hasBufferAtTime:function(et){try{var zt=Ae.getAllBufferRanges();if(!zt||zt.length===0)return!1;for(var Ve=0;Ve<zt.length;){var tt=zt.start(Ve),Lt=zt.end(Ve);if(et>=tt&&et<=Lt)return!0;Ve+=1}return!1}catch(yn){return j.error(yn),!1}},pruneBuffer:Ct,setMediaSource:mt,getMediaSource:function(){return H},appendInitSegmentFromCache:function(et){var zt=Se.extract(ve.id,et);return!!zt&&(j.info("Append Init fragment",De," with representationId:",zt.representationId," and quality:",zt.quality,", data size:",zt.bytes.byteLength),Zt(zt),!0)},getIsBufferingCompleted:function(){return V},setIsBufferingCompleted:en,getIsPruningInProgress:function(){return Ze},reset:function(et,zt){le.off(T.Z.INIT_FRAGMENT_LOADED,Vt,this),le.off(T.Z.MEDIA_FRAGMENT_LOADED,jt,this),le.off(T.Z.WALLCLOCK_TIME_UPDATED,qn,this),le.off(_.Z.PLAYBACK_PLAYING,an,this),le.off(_.Z.PLAYBACK_PROGRESS,Pt,this),le.off(_.Z.PLAYBACK_TIME_UPDATED,Pt,this),le.off(_.Z.PLAYBACK_RATE_CHANGED,Yn,this),le.off(_.Z.PLAYBACK_STALLED,un,this),bt(et,zt)},prepareForPlaybackSeek:function(){return V&&en(!1),Ae.abort()},prepareForReplacementTrackSwitch:function(et){return new Promise(function(zt,Ve){Ae.abort().then(function(){return Fn()}).then(function(){return $e.get().streaming.buffer.useChangeTypeForTrackSwitch?Ae.changeType(et):Promise.resolve()}).then(function(){return St()}).then(function(){en(!1),zt()}).catch(function(tt){Ve(tt)})})},prepareForNonReplacementTrackSwitch:function(et){return new Promise(function(zt,Ve){Fn().then(function(){return $e.get().streaming.buffer.useChangeTypeForTrackSwitch?Ae.changeType(et):Promise.resolve()}).then(function(){zt()}).catch(function(tt){Ve(tt)})})},prepareForForceReplacementQualitySwitch:function(et){return new Promise(function(zt,Ve){Ae.abort().then(function(){return Fn()}).then(function(){return St()}).then(function(){return Zn(et)}).then(function(){en(!1),zt()}).catch(function(tt){Ve(tt)})})},updateAppendWindow:Fn,getAllRangesWithSafetyFactor:Qt,getContinuousBufferTimeForTargetTime:Pn,clearBuffers:qt,pruneAllSafely:St,updateBufferTimestampOffset:Zn,setSeekTarget:function(et){Ge=et},segmentRequestingCompleted:function(et){isNaN(et)||(de=et,kn())}},j=(0,M.Z)(q).getInstance().getLogger(O),Se=Ye(q).getInstance(),bt(),O}Bt.__dashjs_factory_name=Ht;var Et=F.Z.getClassFactory(Bt),Dt="NotFragmentedTextBufferController";function Ne(k){k=k||{};var O,j,V,W,ee,H,re=this.context,de=(0,g.Z)(re).getInstance(),Ae=k.textController,Te=k.errHandler,ie=k.streamInfo,_e=k.type;function ye(Ze){W=Ze}function ze(Ze){var We,Se;j!==Ze&&(j=Ze)&&(We=T.Z.BUFFERING_COMPLETED,Se={},de.trigger(We,Se,{streamId:ie.id,mediaType:_e}))}function Oe(Ze){Ze.chunk.bytes&&!j&&(H.save(Ze.chunk),ee.append(Ze.chunk),ze(!0))}return O={initialize:function(Ze){ye(Ze)},getStreamId:function(){return ie.id},getType:function(){return _e},getBufferControllerType:function(){return Dt},createBufferSink:function(Ze){return new Promise(function(We,Se){try{(ee=Ce(re).create({mediaSource:W,textController:Ae,eventBus:de})).initializeForFirstUse(ie,Ze),V||(ee.getBuffer()&&typeof ee.getBuffer().initialize=="function"&&ee.getBuffer().initialize(),V=!0),We(ee)}catch(ke){Te.error(new ce.Z(we.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,we.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+_e)),Se(ke)}})},dischargePreBuffer:function(){},getBuffer:function(){return ee},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:ye,getMediaSource:function(){return W},appendInitSegmentFromCache:function(Ze){return H.extract(ie.id,Ze)!==null},getIsBufferingCompleted:function(){return j},setIsBufferingCompleted:ze,getIsPruningInProgress:function(){return!1},reset:function(Ze){de.off(T.Z.INIT_FRAGMENT_LOADED,Oe,O),!Ze&&ee&&(ee.abort(),ee.reset(),ee=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return j=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},V=!1,W=null,j=!1,H=Ye(re).getInstance(),de.on(T.Z.INIT_FRAGMENT_LOADED,Oe,O),O}Ne.__dashjs_factory_name=Dt;var ne=F.Z.getClassFactory(Ne);function Be(k){k=k||{};var O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze=this.context,Oe=(0,g.Z)(ze).getInstance(),Ze=k.dashMetrics,We=k.mediaPlayerModel,Se=k.fragmentModel,ke=k.abrController,Ie=k.playbackController,Ge=k.textController,q=k.type,le=k.bufferController,ae=k.representationController,ue=k.settings;function te(){_e=!0}function Pe(){_e=!1}function xe(Gt){if(!le.getIsBufferingCompleted()){je();var Vt=isNaN(Gt)?0:Gt;ee=setTimeout(Me,Vt)}}function je(){ee&&(clearTimeout(ee),ee=null)}function Me(){try{if(function(){try{return q===E.Z.TEXT&&!Ge.isTextEnabled()||Ie.isPaused()&&(!Ie.getStreamController().getInitialPlayback()||!Ie.getStreamController().getAutoPlay())&&!ue.get().streaming.scheduling.scheduleWhilePaused}catch(jt){return!1}}())return void je();if(function(){try{return!!_e&&ae.getCurrentRepresentationInfo()&&(isNaN(Ae)||Te||(jt=j.id,Zt=ke.getMaxAllowedIndexFor(q,jt),!(!isNaN(de)&&de==Zt||(V.info("Top quality "+q+" index has changed from "+de+" to "+Zt),de=Zt,0)))||function(){var xn=ae.getCurrentRepresentationInfo();return!q||!xn||Ze.getCurrentBufferLevel(q)<ve()}())}catch(xn){return!1}var jt,Zt}()){var Gt=!1;ye&&(Gt=ke.checkPlaybackQuality(q,j.id)),Gt||(Vt=ae.getCurrentRepresentationInfo(),ie||Vt.quality!==Ae||Te?(Te?(V.debug("Switch track for "+q+", representation id = "+Vt.id),Te=!1):V.debug("Quality has changed, get init request for representationid = "+Vt.id),Oe.trigger(T.Z.INIT_FRAGMENT_NEEDED,{representationId:Vt.id,sender:O},{streamId:j.id,mediaType:q}),ye=!1,ie=!1):(V.debug("Media segment needed for ".concat(q," and stream id ").concat(j.id)),Oe.trigger(T.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:j.id,mediaType:q}),ye=!0))}else xe(Ie.getLowLatencyModeEnabled()?ue.get().streaming.scheduling.lowLatencyTimeout:ue.get().streaming.scheduling.defaultTimeout)}catch(jt){xe(Ie.getLowLatencyModeEnabled()?ue.get().streaming.scheduling.lowLatencyTimeout:ue.get().streaming.scheduling.defaultTimeout)}var Vt}function ve(){var Gt=NaN,Vt=ae.getCurrentRepresentationInfo();return q&&Vt&&(Gt=q===E.Z.TEXT?function(){try{if(Ge.isTextEnabled()){var jt=ae.getCurrentRepresentationInfo();if(isNaN(jt.fragmentDuration)){var Zt=Ze.getCurrentSchedulingInfo(P.Z.SCHEDULING_INFO);return Zt?Zt.duration:0}return jt.fragmentDuration}return 0}catch(xn){return 0}}():q===E.Z.AUDIO&&H?function(){try{var jt=Ze.getCurrentBufferLevel(E.Z.VIDEO),Zt=ae.getCurrentRepresentationInfo();return isNaN(Zt.fragmentDuration)?jt+1:Math.max(jt+1,Zt.fragmentDuration)}catch(xn){return 0}}():function(){try{var jt=ae.getCurrentRepresentationInfo().mediaInfo.streamInfo;return ke.isPlayingAtTopQuality(jt)?jt.manifestInfo.duration>=ue.get().streaming.buffer.longFormContentDurationThreshold?ue.get().streaming.buffer.bufferTimeAtTopQualityLongForm:ue.get().streaming.buffer.bufferTimeAtTopQuality:We.getStableBufferTime()}catch(Zt){return We.getStableBufferTime()}}()),Gt}function De(){$e(!0)}function $e(Gt){if(Ie&&Se){var Vt=Se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ie.getTime(),threshold:0})[0];Vt&&Ie.getTime()>=Vt.startTime&&((!re.mediaInfo||Vt.mediaInfo.type===re.mediaInfo.type&&Vt.mediaInfo.index!==re.mediaInfo.index)&&Gt&&Oe.trigger(T.Z.TRACK_CHANGE_RENDERED,{mediaType:q,oldMediaInfo:re.mediaInfo,newMediaInfo:Vt.mediaInfo,streamId:j.id}),Vt.quality===re.quality&&Vt.adaptationIndex===re.adaptationIndex||!Gt||(V.debug("Quality change rendered for streamId ".concat(j.id," and type ").concat(q)),Oe.trigger(T.Z.QUALITY_CHANGE_RENDERED,{mediaType:q,oldQuality:re.quality,newQuality:Vt.quality,streamId:j.id})),re={mediaInfo:Vt.mediaInfo,quality:Vt.quality,adaptationIndex:Vt.adaptationIndex})}}function mt(){Se.abortRequests(),je()}function ct(){ue.get().streaming.scheduling.scheduleWhilePaused||xe()}function yt(Gt){Ze.updatePlayListTraceMetrics({playbackspeed:Gt.playbackRate.toString()})}function pt(){ye=!0,W=0,Ae=NaN,re={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},de=NaN,Te=!1,ie=!1,_e=!0}return O={initialize:function(Gt){H=Gt,Oe.on(T.Z.URL_RESOLUTION_FAILED,mt,O),Oe.on(_.Z.PLAYBACK_STARTED,ct,O),Oe.on(_.Z.PLAYBACK_RATE_CHANGED,yt,O),Oe.on(_.Z.PLAYBACK_TIME_UPDATED,De,O),Oe.on(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,te,O),Oe.on(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Pe,O)},getType:function(){return q},getStreamId:function(){return j.id},setTimeToLoadDelay:function(Gt){W=Gt},getTimeToLoadDelay:function(){return W},setSwitchTrack:function(Gt){Te=Gt},getSwitchTrack:function(){return Te},startScheduleTimer:xe,clearScheduleTimer:je,reset:function(){Oe.off(T.Z.URL_RESOLUTION_FAILED,mt,O),Oe.off(_.Z.PLAYBACK_STARTED,ct,O),Oe.off(_.Z.PLAYBACK_RATE_CHANGED,yt,O),Oe.off(_.Z.PLAYBACK_TIME_UPDATED,De,O),Oe.off(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,te,O),Oe.off(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Pe,O),je(),$e(!1),pt(),j=null},getBufferTarget:ve,getPlaybackController:function(){return Ie},setCheckPlaybackQuality:function(Gt){ye=Gt},setInitSegmentRequired:function(Gt){ie=Gt},setLastInitializedQuality:function(Gt){Ae=Gt}},V=(0,M.Z)(ze).getInstance().getLogger(O),pt(),j=k.streamInfo,O}Be.__dashjs_factory_name="ScheduleController";var L=F.Z.getClassFactory(Be),D=w(7387);function G(k){var O,j,V,W,ee,H,re=(k=k||{}).eventBus,de=k.events,Ae=k.abrController,Te=k.dashMetrics,ie=k.playbackController,_e=k.timelineConverter,ye=k.type,ze=k.streamInfo,Oe=k.dashConstants,Ze=k.segmentsController,We=k.isDynamic,Se=k.adapter;function ke(){return ye}function Ie(){return V}function Ge(){return H}function q(){j=null,V=!0,W=[],ee=null}function le(je){return new Promise(function(Me,ve){var De=je.hasInitialization(),$e=je.hasSegments(),mt=[];mt.push(Ze.updateInitData(je,De)),mt.push(Ze.updateSegmentData(je,$e)),Promise.all(mt).then(function(ct){var yt;ct[0]&&!ct[0].error&&(je=function(pt,Gt){return Gt&&!Gt.error&&Gt.representation?Gt.representation:pt}(je,ct[0])),ct[1]&&!ct[1].error&&(je=function(pt,Gt){if(Gt&&!Gt.error){var Vt,jt,Zt,xn,at=Gt.segments,St=[],Qt=0;for(Vt=0,jt=at?at.length:0;Vt<jt;Vt++)Zt=at[Vt],(xn=(0,D.TJ)(_e,We,pt,Zt.startTime,Zt.duration,Zt.timescale,Zt.media,Zt.mediaRange,Qt))&&(St.push(xn),xn=null,Qt++);return St.length>0&&(pt.segments=St),pt}}(je,ct[1])),(yt=je).mediaFinishedInformation=Ze.getMediaFinishedInformation(yt),function(pt){if(Ie()){var Gt,Vt,jt=Te.getCurrentManifestUpdate(),Zt=!1;if(jt){for(var xn=0;xn<jt.representationInfo.length;xn++)if((Gt=jt.representationInfo[xn]).index===pt.index&&Gt.mediaType===ke()){Zt=!0;break}Zt||Te.addManifestUpdateRepresentationInfo(pt,ke())}if(function(){for(var St=0,Qt=W.length;St<Qt;St++){var Pt=W[St].segmentInfoType;if(!W[St].hasInitialization()||(Pt===Oe.SEGMENT_BASE||Pt===Oe.BASE_URL)&&!W[St].segments)return!1}return!0}()){Ae.setPlaybackQuality(ye,ze,(Vt=H,W.indexOf(Vt)));var at=Te.getCurrentDVRInfo(ye);at&&Te.updateManifestUpdateInfo({latency:at.range.end-ie.getTime()}),Te.getCurrentRepresentationSwitch(Ge().adaptation.type)||ae(),te()}}}(je),Me()}).catch(function(ct){ve(ct)})})}function ae(){(function(){if(!(Ae&&Te&&ie&&_e))throw new Error(E.Z.MISSING_CONFIG_ERROR)})();var je=new Date,Me=Ge(),ve=1e3*ie.getTime();Me&&Te.addRepresentationSwitch(Me.adaptation.type,je,ve,Me.id),re.trigger(_.Z.REPRESENTATION_SWITCH,{mediaType:ye,streamId:ze.id,currentRepresentation:Me,numberOfRepresentations:W.length},{streamId:ze.id,mediaType:ye})}function ue(je){return je==null||je>=W.length?null:W[je]}function te(je){V=!1,re.trigger(de.DATA_UPDATE_COMPLETED,{data:j,currentRepresentation:H,error:je},{streamId:ze.id,mediaType:ye})}function Pe(je){H=je,ee=Se.convertRepresentationToRepresentationInfo(H)}function xe(je){if(je.newDuration){var Me=Ge();Me&&Me.adaptation.period&&(Me.adaptation.period.duration=je.newDuration)}}return O={getStreamId:function(){return ze.id},getType:ke,getData:function(){return j},isUpdating:Ie,updateData:function(je,Me,ve,De,$e){return new Promise(function(mt,ct){if(V=!0,W=Me,j=je,Pe(ue($e)),ve!==E.Z.VIDEO&&ve!==E.Z.AUDIO&&(ve!==E.Z.TEXT||!De))return te(),void mt();for(var yt=[],pt=0,Gt=W.length;pt<Gt;pt++){var Vt=W[pt];yt.push(le(Vt))}Promise.all(yt).then(function(){Pe(ue($e)),mt()}).catch(function(jt){ct(jt)})})},getCurrentRepresentation:Ge,getCurrentRepresentationInfo:function(){return ee},getRepresentationForQuality:ue,prepareQualityChange:function(je){Pe(ue(je)),ae()},reset:function(){re.off(_.Z.MANIFEST_VALIDITY_CHANGED,xe,O),q()}},q(),re.on(_.Z.MANIFEST_VALIDITY_CHANGED,xe,O),O}G.__dashjs_factory_name="RepresentationController";var K=F.Z.getClassFactory(G),ge=w(3106),pe=w(9326),Ke=w(7473),wt=w(2594);function lt(k,O){if(!(k instanceof O))throw new TypeError("Cannot call a class as a function")}var ut=function k(){lt(this,k),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};ut.INITIAL_PLAYOUT_START_REASON="initial_playout",ut.SEEK_START_REASON="seek",ut.RESUME_FROM_PAUSE_START_REASON="resume",ut.METRICS_COLLECTION_START_REASON="metrics_collection_start";var nt=function k(){lt(this,k),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};nt.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",nt.REBUFFERING_REASON="rebuffering",nt.USER_REQUEST_STOP_REASON="user_request",nt.END_OF_PERIOD_STOP_REASON="end_of_period",nt.END_OF_CONTENT_STOP_REASON="end_of_content",nt.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",nt.FAILURE_STOP_REASON="failure";var ht=w(7802);function _t(){return{ntpToUTC:function(k){var O=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(O.getTime()+k).getTime()}}}_t.__dashjs_factory_name="TimeUtils";var Tt=F.Z.getSingletonFactory(_t);function Mt(k){k=k||{};var O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze,Oe,Ze=this.context,We=(0,g.Z)(Ze).getInstance(),Se=k.streamInfo,ke=k.type,Ie=k.errHandler,Ge=k.mimeType,q=k.timelineConverter,le=k.adapter,ae=k.manifestModel,ue=k.mediaPlayerModel,te=k.fragmentModel,Pe=k.abrController,xe=k.playbackController,je=k.mediaController,Me=k.textController,ve=k.dashMetrics,De=k.settings,$e=k.boxParser,mt=k.segmentBlacklistController;function ct(){return Se.id}function yt(){return ke}function pt(){return le.getIsTextTrack(de.getData())}function Gt(){ee=[],W=null,ze=0,Ae=!1,Te=!1,ie=!1,Oe=null}function Vt(bt){return!isNaN(bt)&&!isNaN(Se.duration)&&isFinite(Se.duration)&&bt>=Se.start+Se.duration}function jt(bt){var et=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(bt.sender){if(xe.getIsManifestUpdateInProgress())Qt();else if((!pt()||Me.isTextEnabled())&&H&&bt.representationId&&!H.appendInitSegmentFromCache(bt.representationId)){var zt=de.getCurrentRepresentation();if(zt.range===0)return void Zt();var Ve=_e?_e.getInitRequest(W,zt):null;Ve?te.executeRequest(Ve):et&&(re.setInitSegmentRequired(!0),Qt())}}}function Zt(bt){var et=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(xe.getIsManifestUpdateInProgress()||H.getIsPruningInProgress())Qt();else{var zt=St();zt?(Ae=!1,Te=!1,xn(zt)):at(et)}}function xn(bt){isNaN(bt.startTime+bt.duration)||(ze=bt.startTime+bt.duration),bt.delayLoadingTime=new Date().getTime()+re.getTimeToLoadDelay(),re.setTimeToLoadDelay(0),function(et){var zt=et.url;return et.range&&(zt=zt.concat("_",et.range)),mt.contains(zt)}(bt)?(j.warn("Fragment request url ".concat(bt.url," for stream id ").concat(Se.id," and media type ").concat(ke," is on the ignore list and will be skipped")),Qt()):(j.debug("Next fragment request url for stream id ".concat(Se.id," and media type ").concat(ke," is ").concat(bt.url)),te.executeRequest(bt))}function at(bt){var et,zt=de.getCurrentRepresentation();if(!De.get().streaming.gaps.enableSeekFix||!Ae&&xe.getTime()!==0||(V?V&&zt.segmentInfoType===y.Z.SEGMENT_TIMELINE&&(et=_e.getValidTimeAheadOfTargetTime(ze,W,zt,De.get().streaming.gaps.threshold)):et=_e.getValidTimeAheadOfTargetTime(ze,W,zt,De.get().streaming.gaps.threshold),isNaN(et)||et===ze)){if(_e.isLastSegmentRequested(zt,ze)){var Ve=_e.getCurrentIndex();return j.debug("Segment requesting for stream ".concat(Se.id," has finished")),We.trigger(T.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:Ve},{streamId:Se.id,mediaType:ke}),H.segmentRequestingCompleted(Ve),void re.clearScheduleTimer()}bt&&Qt()}else xe.isSeeking()||xe.getTime()===0?(j.warn("Adjusting playback time ".concat(et," because of gap in the manifest. Seeking by ").concat(et-ze)),xe.seek(et,!1,!1)):(j.warn("Adjusting buffering time ".concat(et," because of gap in the manifest. Adjusting time by ").concat(et-ze)),Dn(et),bt&&Qt())}function St(){var bt,et=Fn();if(isNaN(ze)||yt()===E.Z.TEXT&&!Me.isTextEnabled())return null;if(_e){var zt=de&&et?de.getRepresentationForQuality(et.quality):null;bt=Ae?_e.getSegmentRequestForTime(W,zt,ze):Te?_e.repeatSegmentRequest(W,zt):_e.getNextSegmentRequest(W,zt)}return bt}function Qt(){re.startScheduleTimer(xe.getLowLatencyModeEnabled()?De.get().streaming.scheduling.lowLatencyTimeout:De.get().streaming.scheduling.defaultTimeout)}function Pt(bt){bt.error||H.getIsBufferingCompleted()||H.updateBufferTimestampOffset(bt.currentRepresentation)}function un(bt){ve.addBufferState(ke,bt.state,re.getBufferTarget()),bt.state!==P.Z.BUFFER_EMPTY||xe.isSeeking()||(j.info("Buffer is empty! Stalling!"),ve.pushPlayListTraceMetrics(new Date,nt.REBUFFERING_REASON))}function an(bt){te.syncExecutedRequestsWithBufferedRange(H.getBuffer().getAllBufferRanges(),Se.duration),bt.quotaExceeded&&bt.from>xe.getTime()&&Dn(bt.from),bt.hasEnoughSpaceToAppend&&bt.quotaExceeded&&re.startScheduleTimer()}function Jt(bt){if(bt&&bt.lastRequestAppended&&bt.lastRequestAppended.url){var et=bt.lastRequestAppended.url;bt.lastRequestAppended.range&&(et=et.concat("_",bt.lastRequestAppended.range)),j.warn("Blacklisting segment with url ".concat(et)),mt.add(et)}}function Bn(bt){if(j.debug("Appended bytes for ".concat(bt.mediaType," and stream id ").concat(bt.streamId)),bt.segmentType===st.w.INIT_SEGMENT_TYPE){var et=bt.quality;re.setLastInitializedQuality(et),j.info("["+ke+"] lastInitializedRepresentationInfo changed to "+bt.quality)}Oe?kn(Oe):re.startScheduleTimer(0)}function kn(bt){var et=te.getRequests({state:X.FRAGMENT_MODEL_LOADING});if(et&&et.length>0)return j.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(Oe=bt);H.updateBufferTimestampOffset(bt).then(function(){re.setCheckPlaybackQuality(!1),W.segmentAlignment||W.subSegmentAlignment?re.startScheduleTimer():Pn(),Oe=null,ie=!1}).catch(function(){Oe=null,ie=!1})}function mr(bt){j.info("onFragmentLoadingAbandoned request: "+bt.request.url+" has been aborted"),xe.isSeeking()||re.getSwitchTrack()||ie||(j.info("onFragmentLoadingAbandoned request: "+bt.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),bt.request&&bt.request.isInitializationRequest()?re.setInitSegmentRequired(!0):Dn(bt.request.startTime+bt.request.duration/2),re.startScheduleTimer(0))}function vr(bt){j.info("OnFragmentLoadingCompleted for stream id "+Se.id+" and media type "+ke+" - Url:",bt.request?bt.request.url:"undefined",bt.request.range?", Range:"+bt.request.range:""),pt()&&re.startScheduleTimer(0),bt.error&&bt.request.serviceLocation&&function(et){j.info("Fragment loading completed with an error"),et&&et.request&&et.request.type&&(et.request.type===st.w.INIT_SEGMENT_TYPE?jt({representationId:et.request.representationId,sender:{}},!1):et.request.type===st.w.MEDIA_SEGMENT_TYPE&&(Dn(et.request.startTime+et.request.duration/2),Zt({},!1)))}(bt)}function Ct(){Dn(xe.getTime()),Zn().startScheduleTimer()}function tn(bt){var et=bt.currentTrackInfo;if(et){var zt=ee.find(function(Ve){return Ve.index===et.index&&Ve.lang===et.lang});zt&&Cn(zt).then(function(){H.setIsBufferingCompleted(!1),Dn(xe.getTime()),re.setInitSegmentRequired(!0),re.startScheduleTimer()})}}function qt(bt){Dn(bt.quotaExceededTime),re.clearScheduleTimer()}function mn(){return H?H.getBuffer():null}function Cn(bt){bt===W||bt&&W&&bt.type!==W.type||(W=bt);var et=le.getRealAdaptation(Se,W),zt=le.getVoRepresentations(W);if(de){var Ve,tt=de.getData(),Lt=Pe.getMaxAllowedIndexFor(ke,Se.id),yn=Pe.getMinAllowedIndexFor(ke,Se.id),bn=null;return tt!==null&&tt.id===et.id||ke===E.Z.TEXT?Ve=Pe.getQualityFor(ke,Se.id):(bn=Pe.getThroughputHistory().getAverageThroughput(ke,V)||Pe.getInitialBitrateFor(ke,Se.id),Ve=Pe.getQualityForBitrate(W,bn,Se.id)),yn!==void 0&&Ve<yn&&(Ve=yn),Ve>Lt&&(Ve=Lt),de.updateData(et,zt,ke,W.isFragmented,Ve)}return Promise.resolve()}function Zn(){return re}function Fn(bt){var et;return bt!==void 0?((0,ge.SE)(bt),et=de?de.getRepresentationForQuality(bt):null):et=de?de.getCurrentRepresentation():null,le.convertRepresentationToRepresentationInfo(et)}function qn(){return!!H&&H.getIsBufferingCompleted()}function Yn(bt){if(De.get().streaming.enableManifestTimescaleMismatchFix){var et=bt.chunk,zt=et.bytes,Ve=Fn(et.quality),tt=de&&Ve?de.getRepresentationForQuality(Ve.quality):null;Ve&&tt&&(tt.timescale=$e.getMediaTimescaleFromMoov(zt))}}function en(bt){var et=bt.chunk,zt=et.bytes,Ve=et.quality,tt=Fn(Ve),Lt=de&&tt?de.getRepresentationForQuality(tt.quality):null;if(tt&&Lt){var yn;if(De.get().streaming.parseInbandPrft&&bt.request.type===st.w.MEDIA_SEGMENT_TYPE){var bn=function(Lo,zi){var Cs=Lo.getBoxes("prft"),ol=[];return Cs.forEach(function(la){ol.push(function(ko,bs){var To="unknown";switch(ko.flags){case 0:To=y.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:To=y.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:To=y.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var $a=1e3*ko.ntp_timestamp_sec+ko.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:To,ntpTimestamp:$a=Tt(Ze).getInstance().ntpToUTC($a),mediaTime:ko.media_time/bs}}(la,zi))}),ol}(yn=yn||$e.parse(zt),Lt.timescale);bn&&bn.length&&We.trigger(_.Z.INBAND_PRFT,{data:bn},{streamId:Se.id,mediaType:ke})}var yr=le.getEventsFor(tt.mediaInfo,null,Se),oi=le.getEventsFor(tt,Lt,Se);if(yr&&yr.length>0||oi&&oi.length>0){var gi=te.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,quality:Ve,index:et.index})[0],Xr=function(Lo,zi,Cs,ol){try{for(var la={},ko=[],bs=Cs.concat(ol),To=0,$a=bs.length;To<$a;To++)la[bs[To].schemeIdUri+"/"+bs[To].value]=bs[To];var bu=Lo.getBoxes("emsg");if(!bu||bu.length===0)return ko;for(var ca=Lo.getBox("sidx"),Zl=!ca||isNaN(ca.earliest_presentation_time)||isNaN(ca.timescale)?zi&&!isNaN(zi.mediaStartTime)?zi.mediaStartTime:0:ca.earliest_presentation_time/ca.timescale,Xf=Math.max(Zl,0),Ru=de.getCurrentRepresentation(),ji=0,xa=bu.length;ji<xa;ji++){var Qs=le.getEvent(bu[ji],la,Xf,Ru);Qs&&ko.push(Qs)}return ko}catch(xt){return[]}}(yn=yn||$e.parse(zt),gi,yr,oi);We.trigger(T.Z.INBAND_EVENTS,{events:Xr},{streamId:Se.id})}}}function Nn(){var bt=xe.getTime();De.get().streaming.buffer.flushBufferAtTrackSwitch&&xe.seek(bt+.001,!1,!0),Dn(bt),H.setSeekTarget(bt),re.startScheduleTimer()}function Pn(){var bt=xe.getTime(),et=H.getContinuousBufferTimeForTargetTime(bt);Dn(isNaN(et)?bt:et),re.startScheduleTimer()}function On(bt){bt&&!isNaN(bt.time)&&(Dn(bt.time),H.setSeekTarget(bt.time))}function Dn(bt){ze=bt,Ae=!0}return O={initialize:function(bt,et,zt){ye=(0,ht.Z)(Ze).create({events:T.Z,eventBus:We,streamInfo:Se,timelineConverter:q,dashConstants:y.Z,segmentBaseController:k.segmentBaseController,type:ke}),_e=(0,pe.Z)(Ze).create({streamInfo:Se,type:ke,timelineConverter:q,dashMetrics:ve,mediaPlayerModel:ue,baseURLController:k.baseURLController,errHandler:Ie,segmentsController:ye,settings:De,boxParser:$e,events:T.Z,eventBus:We,errors:we,debug:(0,M.Z)(Ze).getInstance(),requestModifier:(0,Ke.Z)(Ze).getInstance(),dashConstants:y.Z,constants:E.Z,urlUtils:(0,wt.Z)(Ze).getInstance()}),V=Se.manifestInfo.isDynamic,_e.initialize(V),Pe.registerStreamType(ke,O),de=K(Ze).create({streamInfo:Se,type:ke,abrController:Pe,dashMetrics:ve,playbackController:xe,timelineConverter:q,dashConstants:y.Z,events:T.Z,eventBus:We,errors:we,isDynamic:V,adapter:le,segmentsController:ye}),H=function(Ve,tt){return Ve?Ve!==E.Z.TEXT||tt?Et(Ze).create({streamInfo:Se,type:Ve,mediaPlayerModel:ue,manifestModel:ae,fragmentModel:te,errHandler:Ie,mediaController:je,representationController:de,adapter:le,textController:Me,abrController:Pe,playbackController:xe,settings:De}):ne(Ze).create({streamInfo:Se,type:Ve,mimeType:Ge,fragmentModel:te,textController:Me,errHandler:Ie,settings:De}):(Ie.error(new ce.Z(we.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,we.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(ke,zt),H&&H.initialize(bt),(re=L(Ze).create({streamInfo:Se,type:ke,mimeType:Ge,adapter:le,dashMetrics:ve,mediaPlayerModel:ue,fragmentModel:te,abrController:Pe,playbackController:xe,textController:Me,mediaController:je,bufferController:H,representationController:de,settings:De})).initialize(et),ze=0,Ae=!1,Te=!1},getStreamId:ct,getType:yt,isUpdating:function(){return!!de&&de.isUpdating()},getBufferController:function(){return H},dischargePreBuffer:function(){H.dischargePreBuffer()},getFragmentModel:function(){return te},getScheduleController:Zn,getRepresentationController:function(){return de},getRepresentationInfo:Fn,getBufferLevel:function(){return H?H.getBufferLevel():0},isBufferingCompleted:qn,createBufferSinks:function(bt){var et=mn();return et?Promise.resolve(et):H?H.createBufferSink(W,bt):Promise.resolve(null)},updateStreamInfo:function(bt){return Se=bt,qn()?Promise.resolve():H.updateAppendWindow()},getStreamInfo:function(){return Se},selectMediaInfo:Cn,clearMediaInfoArray:function(){ee=[]},addMediaInfo:function(bt){ee.indexOf(bt)===-1&&ee.push(bt)},prepareTrackSwitch:function(){return new Promise(function(bt){j.debug("Preparing track switch for type ".concat(ke));var et=ke===E.Z.TEXT||De.get().streaming.trackSwitchMode[ke]===E.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&xe.getTimeToStreamEnd(Se)>De.get().streaming.buffer.stallThreshold;if(H.getIsBufferingCompleted()&&!et)return H.prepareForNonReplacementTrackSwitch(W.codec).then(function(){We.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:Se.id,mediaType:ke})}).catch(function(){We.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:Se.id,mediaType:ke})}),void bt();re.clearScheduleTimer(),re.setSwitchTrack(!0),et?(We.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ke,streamId:Se.id},{mediaType:ke,streamId:Se.id}),te.abortRequests(),H.prepareForReplacementTrackSwitch(W.codec).then(function(){var zt=Fn();return H.updateBufferTimestampOffset(zt)}).then(function(){Nn(),bt()}).catch(function(){Nn(),bt()})):H.prepareForNonReplacementTrackSwitch(W.codec).then(function(){Pn(),bt()}).catch(function(){Pn(),bt()})})},prepareQualityChange:function(bt){Oe&&j.warn("Canceling queued representation switch to ".concat(Oe.quality," for ").concat(ke)),j.debug("Preparing quality switch for type ".concat(ke));var et=bt.newQuality;ie=!0,re.clearScheduleTimer(),de.prepareQualityChange(et);var zt=Fn(et);bt.reason&&bt.reason.forceReplace?function(Ve){te.abortRequests(),We.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ke,streamId:Se.id},{mediaType:ke,streamId:Se.id}),re.setCheckPlaybackQuality(!1),H.prepareForForceReplacementQualitySwitch(Ve).then(function(){Nn(),Oe=null,ie=!1}).catch(function(){Nn(),Oe=null,ie=!1})}(zt):bt&&bt.reason&&bt.reason.forceAbandon?function(Ve){H.updateBufferTimestampOffset(Ve).then(function(){te.abortRequests(),Te=!0,re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1,Oe=null}).catch(function(){Oe=null,ie=!1})}(zt):De.get().streaming.buffer.fastSwitchEnabled?function(Ve){var tt=xe.getTime(),Lt=1.5*(isNaN(Ve.fragmentDuration)?1:Ve.fragmentDuration),yn=te.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:tt+Lt,threshold:0})[0];if(yn&&!pt()){var bn=H.getBufferLevel(),yr=Pe.getAbandonmentStateFor(Se.id,ke);yn.quality<Ve.quality&&bn>=Lt&&yr!==P.Z.ABANDON_LOAD?H.updateBufferTimestampOffset(Ve).then(function(){te.abortRequests(),Dn(tt+Lt),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1}).catch(function(){ie=!1}):kn(Ve)}else kn(Ve)}(zt):kn(zt),ve.pushPlayListTraceMetrics(new Date,nt.REPRESENTATION_SWITCH_STOP_REASON),ve.createPlaylistTraceMetrics(zt.id,1e3*xe.getTime(),xe.getPlaybackRate())},getMediaInfo:function(){return W},getMediaSource:function(){return H.getMediaSource()},setMediaSource:function(bt){return H.setMediaSource(bt,W)},getBuffer:mn,setExplicitBufferingTime:Dn,finalisePlayList:function(bt,et){ve.pushPlayListTraceMetrics(bt,et)},probeNextRequest:function(){var bt=Fn(),et=de&&bt?de.getRepresentationForQuality(bt.quality):null;return _e.getNextSegmentRequestIdempotent(W,et)},prepareInnerPeriodPlaybackSeeking:function(bt){return new Promise(function(et){if(H.hasBufferAtTime(bt.seekTime))return H.pruneBuffer(),Vt(H.getContinuousBufferTimeForTargetTime(bt.seekTime))&&H.setIsBufferingCompleted(!0),void et();re.clearScheduleTimer(),te.abortRequests(),H.prepareForPlaybackSeek().then(function(){var zt=H.getAllRangesWithSafetyFactor(bt.seekTime);return H.clearBuffers(zt)}).then(function(){var zt=H.getContinuousBufferTimeForTargetTime(bt.seekTime);if(Vt(zt))H.setIsBufferingCompleted(!0),et();else{var Ve=isNaN(zt)?bt.seekTime:zt;Dn(Ve),H.setSeekTarget(Ve);var tt=[];tt.push(H.updateAppendWindow());var Lt=Fn();tt.push(H.updateBufferTimestampOffset(Lt)),Promise.all(tt).then(function(){re.setInitSegmentRequired(!0),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),et()})}}).catch(function(zt){j.error(zt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(bt,et){try{re.clearScheduleTimer(),te.abortRequests(),H.prepareForPlaybackSeek().then(function(){return H.pruneAllSafely()}).then(function(){bt()})}catch(zt){et(zt)}})},reset:function(bt,et){_e&&_e.reset(),H&&(H.reset(bt,et),H=null),re&&(re.reset(),re=null),de&&(de.reset(),de=null),ye&&(ye=null),Pe&&Pe.unRegisterStreamType(ct(),ke),We.off(T.Z.DATA_UPDATE_COMPLETED,Pt,O),We.off(T.Z.INIT_FRAGMENT_NEEDED,jt,O),We.off(T.Z.MEDIA_FRAGMENT_NEEDED,Zt,O),We.off(T.Z.INIT_FRAGMENT_LOADED,Yn,O),We.off(T.Z.MEDIA_FRAGMENT_LOADED,en,O),We.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,un,O),We.off(T.Z.BUFFER_CLEARED,an,O),We.off(T.Z.SEEK_TARGET,On,O),We.off(T.Z.FRAGMENT_LOADING_ABANDONED,mr,O),We.off(T.Z.FRAGMENT_LOADING_COMPLETED,vr,O),We.off(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Ct,O),We.off(T.Z.SET_NON_FRAGMENTED_TEXT,tn,O),We.off(T.Z.QUOTA_EXCEEDED,qt,O),We.off(T.Z.SOURCE_BUFFER_ERROR,Jt,O),We.off(T.Z.BYTES_APPENDED_END_FRAGMENT,Bn,O),Gt(),ke=null,Se=null}},j=(0,M.Z)(Ze).getInstance().getLogger(O),Gt(),We.on(T.Z.DATA_UPDATE_COMPLETED,Pt,O,{priority:g.Z.EVENT_PRIORITY_HIGH}),We.on(T.Z.INIT_FRAGMENT_NEEDED,jt,O),We.on(T.Z.MEDIA_FRAGMENT_NEEDED,Zt,O),We.on(T.Z.INIT_FRAGMENT_LOADED,Yn,O),We.on(T.Z.MEDIA_FRAGMENT_LOADED,en,O),We.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,un,O),We.on(T.Z.BUFFER_CLEARED,an,O),We.on(T.Z.SEEK_TARGET,On,O),We.on(T.Z.FRAGMENT_LOADING_ABANDONED,mr,O),We.on(T.Z.FRAGMENT_LOADING_COMPLETED,vr,O),We.on(T.Z.QUOTA_EXCEEDED,qt,O),We.on(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Ct,O),We.on(T.Z.SET_NON_FRAGMENTED_TEXT,tn,O),We.on(T.Z.SOURCE_BUFFER_ERROR,Jt,O),We.on(T.Z.BYTES_APPENDED_END_FRAGMENT,Bn,O),O}Mt.__dashjs_factory_name="StreamProcessor";var _n=F.Z.getClassFactory(Mt),rn=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},cn=w(9032);function Ft(k,O){if(k){if(typeof k=="string")return Gn(k,O);var j=Object.prototype.toString.call(k).slice(8,-1);return j==="Object"&&k.constructor&&(j=k.constructor.name),j==="Map"||j==="Set"?Array.from(k):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?Gn(k,O):void 0}}function Gn(k,O){(O==null||O>k.length)&&(O=k.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=k[j];return V}function Sr(k){k=k||{};var O,j,V=this.context,W=k.requestModifier,ee=k.lowLatencyThroughputModel,H=k.boxParser,re=(0,qe.Z)(V).getInstance();function de(ie){var _e,ye=new Date,ze=ie.request,Oe=new Headers;if(ze.range&&Oe.append("Range","bytes="+ze.range),ie.headers)for(var Ze in ie.headers){var We=ie.headers[Ze];We&&Oe.append(Ze,We)}ze.requestStartDate||(ze.requestStartDate=ye),W&&W.modifyRequestHeader&&W.modifyRequestHeader({setRequestHeader:function(q,le){Oe.append(q,le)}},{url:ie.url}),typeof window.AbortController=="function"&&(_e=new AbortController,ie.abortController=_e,_e.signal.onabort=ie.onabort);var Se={method:ie.method,headers:Oe,credentials:ie.withCredentials?"include":void 0,signal:_e?_e.signal:void 0},ke=re.get().streaming.abr.fetchThroughputCalculationMode,Ie=Date.now(),Ge=0;new Promise(function(q){if(ke===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&ee&&(Ge=ee.getThroughputCapacityDelayMS(ze,1e3*j.getCurrentBufferLevel(ze.mediaType))))return setTimeout(q,Ge);q()}).then(function(){var q=Date.now();fetch(ie.url,Se).then(function(le){ie.response||(ie.response={}),ie.response.status=le.status,ie.response.statusText=le.statusText,ie.response.responseURL=le.url,le.ok||ie.onerror();var ae,ue="",te=function(Pt,un){var an;if(typeof Symbol>"u"||Pt[Symbol.iterator]==null){if(Array.isArray(Pt)||(an=Ft(Pt))){an&&(Pt=an);var Jt=0,Bn=function(){};return{s:Bn,n:function(){return Jt>=Pt.length?{done:!0}:{done:!1,value:Pt[Jt++]}},e:function(Ct){throw Ct},f:Bn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var kn,mr=!0,vr=!1;return{s:function(){an=Pt[Symbol.iterator]()},n:function(){var Ct=an.next();return mr=Ct.done,Ct},e:function(Ct){vr=!0,kn=Ct},f:function(){try{mr||an.return==null||an.return()}finally{if(vr)throw kn}}}}(le.headers.keys());try{for(te.s();!(ae=te.n()).done;){var Pe=ae.value;ue+=Pe+": "+le.headers.get(Pe)+"\r\n"}}catch(Pt){te.e(Pt)}finally{te.f()}if(ie.response.responseHeaders=ue,!le.body)return le.arrayBuffer().then(function(Pt){ie.response.response=Pt;var un={loaded:Pt.byteLength,total:Pt.byteLength,stream:!1};ie.progress(un),ie.onload(),ie.onend()});var xe,je,Me,ve,De=parseInt(le.headers.get("Content-Length"),10),$e=0,mt=!1,ct=new Uint8Array,yt=0;if(ke===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&ee){var pt=q,Gt=0,Vt=(Me=le.body.tee(),ve=2,function(Pt){if(Array.isArray(Pt))return Pt}(Me)||function(Pt,un){if(typeof Symbol<"u"&&Symbol.iterator in Object(Pt)){var an=[],Jt=!0,Bn=!1,kn=void 0;try{for(var mr,vr=Pt[Symbol.iterator]();!(Jt=(mr=vr.next()).done)&&(an.push(mr.value),!un||an.length!==un);Jt=!0);}catch(Ct){Bn=!0,kn=Ct}finally{try{Jt||vr.return==null||vr.return()}finally{if(Bn)throw kn}}return an}}(Me,ve)||Ft(Me,ve)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),jt=Vt[0],Zt=Vt[1];xe=jt.getReader(),je=[],xe.read().then(function Pt(un){var an=un.value,Jt=un.done;if(Gt=Date.now(),an&&an.length){var Bn=Gt-pt,kn=an.length;je.push({chunkDownloadTimeRelativeMS:Gt-q,chunkDownloadDurationMS:Bn,chunkBytes:kn,kbps:Math.round(8*kn/(Bn/1e3)),bufferLevel:j.getCurrentBufferLevel(ze.mediaType)})}if(Jt){var mr=Gt-q,vr=je.reduce(function(Ct,tn){return Ct+tn.chunkBytes},0);return ee.addMeasurement(ze,mr,je,Ie,Ge,ue),void ie.progress({loaded:vr,total:vr,lengthComputable:!0,time:ee.getEstimatedDownloadDurationMS(ze),stream:!0})}return pt=Date.now(),xe.read().then(Pt)}),ie.reader=Zt.getReader()}else ie.reader=le.body.getReader();var xn=[],at=[],St=[],Qt=!0;Ae(ie,function Pt(un){var an=un.value;if(un.done){if(ct){if(ke!==E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Jt=null,Bn=null;ke===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Jt=function(Ct,tn){try{var qt,mn;qt=Ct.filter(function(Nn,Pn){return Pn<Ct.length-1}),mn=tn.filter(function(Nn,Pn){return Pn<tn.length-1});var Cn=[];if(qt.length>1){for(var Zn=0,Fn=0,qn=0;qn<qt.length;qn++)if(qt[qn]&&mn[qn]){var Yn=mn[qn].ts-qt[qn].ts;if(Yn>1)Cn.push(8*mn[qn].bytes/Yn),Fn=0;else{Fn===0&&(Fn=qt[qn].ts,Zn=0);var en=mn[qn].ts-Fn;en>1?(Zn+=mn[qn].bytes,Cn.push(8*Zn/en),Fn=0):Zn+=mn[qn].bytes}}if(Cn.length>0)return Cn.reduce(function(Nn,Pn){return Nn+Pn},0)/Cn.length}return null}catch(Nn){return null}}(at,St),Jt&&(Bn=8*$e/Jt)):ke===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Bn=Te(xn,$e)),ie.progress({loaded:$e,total:isNaN(De)?$e:De,lengthComputable:!0,time:Bn,stream:!0})}ie.response.response=ct.buffer}return ie.onload(),void ie.onend()}if(an&&an.length>0){ct=function(Ct,tn){if(Ct.length===0)return tn;var qt=new Uint8Array(Ct.length+tn.length);return qt.set(Ct),qt.set(tn,Ct.length),qt}(ct,an),$e+=an.length,xn.push({ts:Date.now(),bytes:an.length}),ke===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&Qt&&H.findLastTopIsoBoxCompleted(["moof"],ct,yt).found&&(Qt=!1,at.push({ts:performance.now(),bytes:an.length}));var kn=H.findLastTopIsoBoxCompleted(["moov","mdat"],ct,yt);if(kn.found){var mr,vr=kn.lastCompletedOffset+kn.size;ke!==E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||Qt||(Qt=!0,St.push({ts:performance.now(),bytes:ct.length})),vr===ct.length?(mr=ct,ct=new Uint8Array):(mr=new Uint8Array(ct.subarray(0,vr)),ct=ct.subarray(vr)),ie.progress({data:mr.buffer,lengthComputable:!1,noTrace:!0}),yt=0}else yt=kn.lastCompletedOffset,mt||(ie.progress({lengthComputable:!1,noTrace:!0}),mt=!0)}Ae(ie,Pt)})}).catch(function(le){ie.onerror&&ie.onerror(le)})})}function Ae(ie,_e){ie.reader.read().then(_e).catch(function(ye){ie.onerror&&ie.response.status===200&&ie.onerror(ye)})}function Te(ie,_e){try{if((ie=ie.filter(function(Oe){return Oe.bytes>_e/4/ie.length})).length>1){var ye=0,ze=(ie[ie.length-1].ts-ie[0].ts)/ie.length;return ie.forEach(function(Oe,Ze){var We=ie[Ze+1];if(We){var Se=We.ts-Oe.ts;ye+=Se<ze?Se:0}}),ye}return null}catch(Oe){return null}}return O={load:function(ie){W&&W.modifyRequest?(0,Ke.k)(ie,W).then(function(){return de(ie)}):de(ie)},abort:function(ie){if(ie.abortController)ie.abortController.abort();else if(ie.reader)try{ie.reader.cancel(),ie.onabort()}catch(_e){}},calculateDownloadedTime:Te,setup:function(ie){j=ie.dashMetrics}},O}Sr.__dashjs_factory_name="FetchLoader";var Gr=F.Z.getClassFactory(Sr),gr=w(1180);function fi(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var ao=function(){function k(){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,k),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var O,j;return O=k,(j=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==y.Z.BASE_URL&&this.segmentInfoType!==y.Z.SEGMENT_BASE&&!this.indexRange}}])&&fi(O.prototype,j),k}(),Hr=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.period=null,this.index=-1,this.type=null},so=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};so.DEFAULT_ID="defaultId";var xi=so,Fi=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},no=w(2610),uo=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},Ni=function k(O,j,V,W){(function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")})(this,k),this.url=O||"",this.serviceLocation=j||O||"",this.dvbPriority=V||1,this.dvbWeight=W||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};Ni.DEFAULT_DVB_PRIORITY=1,Ni.DEFAULT_DVB_WEIGHT=1;var nr=Ni,ju=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},ln=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},gn=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function pn(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var At=function(){function k(){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,k),this.schemeIdUri=null,this.value=null,this.id=null}var O,j;return O=k,(j=[{key:"init",value:function(V){return V&&(this.schemeIdUri=V.schemeIdUri?V.schemeIdUri:null,this.value=V.value?V.value:null,this.id=V.id?V.id:null,V[y.Z.DVB_URL]&&(this.dvbUrl=V[y.Z.DVB_URL]),V[y.Z.DVB_MIMETYPE]&&(this.dvbMimeType=V[y.Z.DVB_MIMETYPE]),V[y.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=V[y.Z.DVB_FONTFAMILY])),this}}])&&pn(O.prototype,j),k}(),Xt=w(3101),Ot=w.n(Xt);function Yt(){return{areEqual:function(k,O){return Ot()(k,O)}}}Yt.__dashjs_factory_name="ObjectUtils";var wn=F.Z.getSingletonFactory(Yt),Mn=w(7803),zn=function k(O,j){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,k),this.url=O||"",this.serviceLocation=j||null,this.queryParams={}},Kn=function k(O,j,V){(function(W,ee){if(!(W instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,k),this.url=O||"",this.serviceLocation=j||null,this.ttl=V||NaN,this.queryParams={}};function Ln(k,O){var j=Object.keys(k);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(k);O&&(V=V.filter(function(W){return Object.getOwnPropertyDescriptor(k,W).enumerable})),j.push.apply(j,V)}return j}function fn(k){for(var O=1;O<arguments.length;O++){var j=arguments[O]!=null?arguments[O]:{};O%2?Ln(Object(j),!0).forEach(function(V){Xe(k,V,j[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(j)):Ln(Object(j)).forEach(function(V){Object.defineProperty(k,V,Object.getOwnPropertyDescriptor(j,V))})}return k}function Xe(k,O,j){return O in k?Object.defineProperty(k,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):k[O]=j,k}function Un(k,O){var j;if(typeof Symbol>"u"||k[Symbol.iterator]==null){if(Array.isArray(k)||(j=fr(k))||O){j&&(k=j);var V=0,W=function(){};return{s:W,n:function(){return V>=k.length?{done:!0}:{done:!1,value:k[V++]}},e:function(de){throw de},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ee,H=!0,re=!1;return{s:function(){j=k[Symbol.iterator]()},n:function(){var de=j.next();return H=de.done,de},e:function(de){re=!0,ee=de},f:function(){try{H||j.return==null||j.return()}finally{if(re)throw ee}}}}function fr(k,O){if(k){if(typeof k=="string")return Ir(k,O);var j=Object.prototype.toString.call(k).slice(8,-1);return j==="Object"&&k.constructor&&(j=k.constructor.name),j==="Map"||j==="Set"?Array.from(k):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?Ir(k,O):void 0}}function Ir(k,O){(O==null||O>k.length)&&(O=k.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=k[j];return V}function Vr(){var k,O,j,V,W=this.context,ee=(0,wt.Z)(W).getInstance(),H=Number.isInteger||function(q){return typeof q=="number"&&isFinite(q)&&Math.floor(q)===q};function re(q,le){if(!q)throw new Error("adaptation is not defined");if(!le)throw new Error("type is not defined");if(q.Representation_asArray&&q.Representation_asArray.length){var ae=Ze(q.Representation_asArray[0]);if(ae&&ae.length>0&&Mn.Y.indexOf(ae[0].schemeIdUri)>=0)return le===E.Z.IMAGE}if(q.ContentComponent_asArray&&q.ContentComponent_asArray.length>0){if(q.ContentComponent_asArray.length>1)return le===E.Z.MUXED;if(q.ContentComponent_asArray[0].contentType===le)return!0}var ue=le===E.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(le);if(q.Representation_asArray&&q.Representation_asArray.length){var te=q.Representation_asArray[0].codecs;if(ue.test(te))return!0}if(q.hasOwnProperty(y.Z.MIME_TYPE))return ue.test(q.mimeType);if(q.Representation_asArray){for(var Pe,xe=0;xe<q.Representation_asArray.length;xe++)if((Pe=q.Representation_asArray[xe]).hasOwnProperty(y.Z.MIME_TYPE))return ue.test(Pe.mimeType)}return!1}function de(q){if(!q)throw new Error("adaptation is not defined");if(q.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)||q.hasOwnProperty(y.Z.SEGMENT_TIMELINE)||q.hasOwnProperty(y.Z.SEGMENT_LIST)||q.hasOwnProperty(y.Z.SEGMENT_BASE))return!0;if(q.Representation_asArray&&q.Representation_asArray.length>0){var le=q.Representation_asArray[0];if(le.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)||le.hasOwnProperty(y.Z.SEGMENT_TIMELINE)||le.hasOwnProperty(y.Z.SEGMENT_LIST)||le.hasOwnProperty(y.Z.SEGMENT_BASE))return!0}return!1}function Ae(q){return re(q,E.Z.VIDEO)}function Te(q){return re(q,E.Z.TEXT)}function ie(q){return re(q,E.Z.IMAGE)}function _e(q){return q&&Array.isArray(q.Representation_asArray)&&q.Representation_asArray.sort(function(le,ae){return le.bandwidth-ae.bandwidth}),q}function ye(q,le){return q&&q.Period_asArray&&H(le)&&q.Period_asArray[le]?q.Period_asArray[le].AdaptationSet_asArray:[]}function ze(q){return q&&q.Period_asArray?q.Period_asArray:[]}function Oe(q){var le=!1;return q&&q.hasOwnProperty("type")&&(le=q.type===y.Z.DYNAMIC),le}function Ze(q){return q&&q.EssentialProperty_asArray&&q.EssentialProperty_asArray.length?q.EssentialProperty_asArray.map(function(le){return{schemeIdUri:le.schemeIdUri,value:le.value}}):null}function We(q){if(!q||!q.S_asArray)return NaN;var le=q.S_asArray[0],ae=q.S_asArray[1];return le.hasOwnProperty("d")?le.d:ae.t-le.t}function Se(q,le){if(!q)throw new Error("Period cannot be null or undefined");var ae=xi.DEFAULT_ID+"_"+le;return q.hasOwnProperty(y.Z.ID)&&q.id.length>0&&q.id!=="__proto__"&&(ae=q.id),ae}function ke(q,le,ae){var ue,te=[];if(!q)return te;for(ue=0;ue<q.length;ue++){var Pe=new ju;if(Pe.timescale=1,Pe.representation=le,!q[ue].hasOwnProperty(E.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Pe.schemeIdUri=q[ue].schemeIdUri,q[ue].hasOwnProperty(y.Z.TIMESCALE)&&(Pe.timescale=q[ue].timescale),q[ue].hasOwnProperty(y.Z.VALUE)&&(Pe.value=q[ue].value),te.push(Pe),Pe.period=ae}return te}function Ie(q){var le=[],ae=q.BaseURL_asArray||[q.baseUri],ue=!1;return ae.some(function(te){if(te){var Pe=new nr,xe=te.__text||te;return ee.isRelative(xe)&&(ue=!0,q.baseUri&&(xe=ee.resolve(xe,q.baseUri))),Pe.url=xe,te.hasOwnProperty(y.Z.SERVICE_LOCATION)&&te.serviceLocation.length?Pe.serviceLocation=te.serviceLocation:Pe.serviceLocation=xe,te.hasOwnProperty(y.Z.DVB_PRIORITY)&&(Pe.dvbPriority=te[y.Z.DVB_PRIORITY]),te.hasOwnProperty(y.Z.DVB_WEIGHT)&&(Pe.dvbWeight=te[y.Z.DVB_WEIGHT]),te.hasOwnProperty(y.Z.AVAILABILITY_TIME_OFFSET)&&(Pe.availabilityTimeOffset=te[y.Z.AVAILABILITY_TIME_OFFSET]),te.hasOwnProperty(y.Z.AVAILABILITY_TIME_COMPLETE)&&(Pe.availabilityTimeComplete=te[y.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),le.push(Pe),ue}}),le}function Ge(q){var le=new gn;return le.serverUrl=q.__text,q.hasOwnProperty(y.Z.DEFAULT_SERVICE_LOCATION)&&(le.defaultServiceLocation=q[y.Z.DEFAULT_SERVICE_LOCATION],le.defaultServiceLocationArray=le.defaultServiceLocation.split(" ")),q.hasOwnProperty(y.Z.QUERY_BEFORE_START)&&(le.queryBeforeStart=q[y.Z.QUERY_BEFORE_START].toLowerCase()==="true"),q.hasOwnProperty(y.Z.CLIENT_REQUIREMENT)&&(le.clientRequirement=q[y.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),le}return k={getIsTypeOf:re,getIsText:Te,getIsFragmented:de,getProducerReferenceTimesForAdaptation:function(q){var le=q&&q.hasOwnProperty(y.Z.PRODUCERREFERENCETIME_ASARRAY)?q[y.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(q&&q.hasOwnProperty(y.Z.REPRESENTATION_ASARRAY)?q[y.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(ue){var te;ue.hasOwnProperty(y.Z.PRODUCERREFERENCETIME_ASARRAY)&&le.push.apply(le,function(Pe){if(Array.isArray(Pe))return Ir(Pe)}(te=ue[y.Z.PRODUCERREFERENCETIME_ASARRAY])||function(Pe){if(typeof Symbol<"u"&&Symbol.iterator in Object(Pe))return Array.from(Pe)}(te)||fr(te)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var ae=[];return le.forEach(function(ue){var te=new ln;ue.hasOwnProperty(y.Z.ID)&&(te[y.Z.ID]=ue[y.Z.ID],ue.hasOwnProperty(y.Z.WALL_CLOCK_TIME)&&(te[y.Z.WALL_CLOCK_TIME]=ue[y.Z.WALL_CLOCK_TIME],ue.hasOwnProperty(y.Z.PRESENTATION_TIME)&&(te[y.Z.PRESENTATION_TIME]=ue[y.Z.PRESENTATION_TIME],ue.hasOwnProperty(y.Z.INBAND)&&(te[y.Z.INBAND]=ue[y.Z.INBAND]!=="false"),ue.hasOwnProperty(y.Z.TYPE)&&(te[y.Z.TYPE]=ue[y.Z.TYPE]),ae.push(te))))}),ae},getLanguageForAdaptation:function(q){var le="";return q&&q.hasOwnProperty(y.Z.LANG)&&(le=q.lang),le},getViewpointForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.VIEWPOINT_ASARRAY)&&q[y.Z.VIEWPOINT_ASARRAY].length?q[y.Z.VIEWPOINT_ASARRAY].map(function(le){return new At().init(le)}):[]},getRolesForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.ROLE_ASARRAY)&&q[y.Z.ROLE_ASARRAY].length?q[y.Z.ROLE_ASARRAY].map(function(le){return new At().init(le)}):[]},getAccessibilityForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.ACCESSIBILITY_ASARRAY)&&q[y.Z.ACCESSIBILITY_ASARRAY].length?q[y.Z.ACCESSIBILITY_ASARRAY].map(function(le){return new At().init(le)}):[]},getAudioChannelConfigurationForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&q[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?q[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new At().init(le)}):[]},getAudioChannelConfigurationForRepresentation:function(q){return q&&q.hasOwnProperty(y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&q[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?q[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new At().init(le)}):[]},getAdaptationForIndex:function(q,le,ae){var ue=ye(le,ae);return ue.length>0&&H(q)?ue[q]:null},getIndexForAdaptation:function(q,le,ae){if(!q)return-1;for(var ue=ye(le,ae),te=0;te<ue.length;te++)if(wn(W).getInstance().areEqual(ue[te],q))return te;return-1},getAdaptationForId:function(q,le,ae){var ue,te,Pe=ye(le,ae);for(ue=0,te=Pe.length;ue<te;ue++)if(Pe[ue].hasOwnProperty(y.Z.ID)&&Pe[ue].id===q)return Pe[ue];return null},getAdaptationsForType:function(q,le,ae){var ue,te,Pe=ye(q,le),xe=[];for(ue=0,te=Pe.length;ue<te;ue++)re(Pe[ue],ae)&&xe.push(_e(Pe[ue]));return xe},getRealPeriods:ze,getRealPeriodForIndex:function(q,le){var ae=ze(le);return ae.length>0&&H(q)?ae[q]:null},getCodec:function(q,le,ae){var ue=null;if(q&&q.Representation_asArray&&q.Representation_asArray.length>0){var te=H(le)&&le>=0&&le<q.Representation_asArray.length?q.Representation_asArray[le]:q.Representation_asArray[0];te&&(ue=te.mimeType+';codecs="'+te.codecs+'"',ae&&te.width!==void 0&&(ue+=';width="'+te.width+'";height="'+te.height+'"'))}return ue&&(ue=ue.replace(/\sprofiles=[^;]*/g,"")),ue},getSelectionPriority:function(q){try{var le=q&&q.selectionPriority!==void 0?parseInt(q.selectionPriority):1;return isNaN(le)?1:le}catch(ae){return 1}},getMimeType:function(q){return q&&q.Representation_asArray&&q.Representation_asArray.length>0?q.Representation_asArray[0].mimeType:null},getKID:function(q){return q&&q.hasOwnProperty(y.Z.CENC_DEFAULT_KID)?q[y.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(q){if(!q||!Array.isArray(q.Label_asArray))return[];for(var le=[],ae=0;ae<q.Label_asArray.length;ae++)le.push({lang:q.Label_asArray[ae].lang,text:q.Label_asArray[ae].__text||q.Label_asArray[ae]});return le},getContentProtectionData:function(q){return q&&q.hasOwnProperty(y.Z.CONTENTPROTECTION_ASARRAY)&&q.ContentProtection_asArray.length!==0?q.ContentProtection_asArray:null},getIsDynamic:Oe,getId:function(q){return q&&q[y.Z.ID]||null},hasProfile:function(q,le){var ae=!1;return q&&q.profiles&&q.profiles.length>0&&(ae=q.profiles.indexOf(le)!==-1),ae},getDuration:function(q){return q&&q.hasOwnProperty(y.Z.MEDIA_PRESENTATION_DURATION)?q.mediaPresentationDuration:q&&q.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(q){return q&&q.bandwidth?q.bandwidth:NaN},getManifestUpdatePeriod:function(q){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ae=NaN;return q&&q.hasOwnProperty(y.Z.MINIMUM_UPDATE_PERIOD)&&(ae=q.minimumUpdatePeriod),isNaN(ae)?ae:Math.max(ae-le,1)},getPublishTime:function(q){return q&&q.hasOwnProperty(y.Z.PUBLISH_TIME)?new Date(q[y.Z.PUBLISH_TIME]):null},getRepresentationCount:function(q){return q&&Array.isArray(q.Representation_asArray)?q.Representation_asArray.length:0},getBitrateListForAdaptation:function(q){var le=_e(q);return(le&&Array.isArray(le.Representation_asArray)?le.Representation_asArray:[]).map(function(ae){return{bandwidth:ae.bandwidth,width:ae.width||0,height:ae.height||0,scanType:ae.scanType||null,id:ae.id||null}})},getRepresentationFor:function(q,le){return le&&le.Representation_asArray&&le.Representation_asArray.length>0&&H(q)?le.Representation_asArray[q]:null},getRepresentationsForAdaptation:function(q){var le,ae,ue,te,Pe=[],xe=function(ct){if(ct&&ct.period&&H(ct.period.index)){var yt=ct.period.mpd.manifest.Period_asArray[ct.period.index];if(yt&&yt.AdaptationSet_asArray&&H(ct.index))return _e(yt.AdaptationSet_asArray[ct.index])}}(q);if(xe&&xe.Representation_asArray){if(q&&q.period&&H(q.period.index)){var je=Ie(q.period.mpd.manifest);je&&(ae=je[0])}for(var Me=0,ve=xe.Representation_asArray.length;Me<ve;++Me){var De=xe.Representation_asArray[Me],$e=new ao;if($e.index=Me,$e.adaptation=q,De.hasOwnProperty(y.Z.ID)&&($e.id=De.id),De.hasOwnProperty(y.Z.CODECS)&&($e.codecs=De.codecs),De.hasOwnProperty(y.Z.MIME_TYPE)&&($e.mimeType=De[y.Z.MIME_TYPE]),De.hasOwnProperty(y.Z.CODEC_PRIVATE_DATA)&&($e.codecPrivateData=De.codecPrivateData),De.hasOwnProperty(y.Z.BANDWITH)&&($e.bandwidth=De.bandwidth),De.hasOwnProperty(y.Z.WIDTH)&&($e.width=De.width),De.hasOwnProperty(y.Z.HEIGHT)&&($e.height=De.height),De.hasOwnProperty(y.Z.SCAN_TYPE)&&($e.scanType=De.scanType),De.hasOwnProperty(y.Z.MAX_PLAYOUT_RATE)&&($e.maxPlayoutRate=De.maxPlayoutRate),De.hasOwnProperty(y.Z.SEGMENT_BASE)?(le=De.SegmentBase,$e.segmentInfoType=y.Z.SEGMENT_BASE):De.hasOwnProperty(y.Z.SEGMENT_LIST)?(le=De.SegmentList).hasOwnProperty(y.Z.SEGMENT_TIMELINE)?$e.segmentInfoType=y.Z.SEGMENT_TIMELINE:$e.segmentInfoType=y.Z.SEGMENT_LIST:De.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)?((le=De.SegmentTemplate).hasOwnProperty(y.Z.SEGMENT_TIMELINE)?$e.segmentInfoType=y.Z.SEGMENT_TIMELINE:$e.segmentInfoType=y.Z.SEGMENT_TEMPLATE,le.hasOwnProperty(y.Z.INITIALIZATION_MINUS)&&($e.initialization=le.initialization.split("$Bandwidth$").join(De.bandwidth).split("$RepresentationID$").join(De.id))):$e.segmentInfoType=y.Z.BASE_URL,$e.essentialProperties=Ze(De),le){if(le.hasOwnProperty(y.Z.INITIALIZATION)){var mt=le.Initialization;mt.hasOwnProperty(y.Z.SOURCE_URL)&&($e.initialization=mt.sourceURL),mt.hasOwnProperty(y.Z.RANGE)&&($e.range=mt.range)}else Te(xe)&&de(xe)&&xe.mimeType&&xe.mimeType.indexOf("application/mp4")===-1&&($e.range=0);le.hasOwnProperty(y.Z.TIMESCALE)&&($e.timescale=le.timescale),le.hasOwnProperty(y.Z.DURATION)?$e.segmentDuration=le.duration/$e.timescale:De.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)&&(le=De.SegmentTemplate).hasOwnProperty(y.Z.SEGMENT_TIMELINE)&&($e.segmentDuration=We(le.SegmentTimeline)/$e.timescale),le.hasOwnProperty(y.Z.MEDIA)&&($e.media=le.media),le.hasOwnProperty(y.Z.START_NUMBER)&&($e.startNumber=le.startNumber),le.hasOwnProperty(y.Z.INDEX_RANGE)&&($e.indexRange=le.indexRange),le.hasOwnProperty(y.Z.PRESENTATION_TIME_OFFSET)&&($e.presentationTimeOffset=le.presentationTimeOffset/$e.timescale),le.hasOwnProperty(y.Z.AVAILABILITY_TIME_OFFSET)?$e.availabilityTimeOffset=le.availabilityTimeOffset:ae&&ae.availabilityTimeOffset!==void 0&&($e.availabilityTimeOffset=ae.availabilityTimeOffset),le.hasOwnProperty(y.Z.AVAILABILITY_TIME_COMPLETE)?$e.availabilityTimeComplete=le.availabilityTimeComplete!=="false":ae&&ae.availabilityTimeComplete!==void 0&&($e.availabilityTimeComplete=ae.availabilityTimeComplete)}$e.MSETimeOffset=(te=(ue=$e).presentationTimeOffset,ue.adaptation.period.start-te),$e.path=[q.period.index,q.index,Me],Pe.push($e)}}return Pe},getAdaptationsForPeriod:function(q){var le,ae,ue,te=q&&H(q.index)?q.mpd.manifest.Period_asArray[q.index]:null,Pe=[];if(te&&te.AdaptationSet_asArray)for(ue=0;ue<te.AdaptationSet_asArray.length;ue++)ae=te.AdaptationSet_asArray[ue],le=new Hr,ae.hasOwnProperty(y.Z.ID)&&(le.id=ae.id),le.index=ue,le.period=q,re(ae,E.Z.MUXED)?le.type=E.Z.MUXED:re(ae,E.Z.AUDIO)?le.type=E.Z.AUDIO:Ae(ae)?le.type=E.Z.VIDEO:Te(ae)?le.type=E.Z.TEXT:ie(ae)?le.type=E.Z.IMAGE:O.warn("Unknown Adaptation stream type"),Pe.push(le);return Pe},getRegularPeriods:function(q){var le,ae,ue=!!q&&Oe(q.manifest),te=[],Pe=null,xe=null,je=null,Me=null;for(ae=0,le=q&&q.manifest&&q.manifest.Period_asArray?q.manifest.Period_asArray.length:0;ae<le;ae++)(xe=q.manifest.Period_asArray[ae]).hasOwnProperty(y.Z.START)?(Me=new xi).start=xe.start:Pe!==null&&Pe.hasOwnProperty(y.Z.DURATION)&&je!==null?(Me=new xi).start=parseFloat((je.start+je.duration).toFixed(5)):ae!==0||ue||((Me=new xi).start=0),je!==null&&isNaN(je.duration)&&(Me!==null?je.duration=parseFloat((Me.start-je.start).toFixed(5)):O.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Me!==null&&(Me.id=Se(xe,ae),Me.index=ae,Me.mpd=q,xe.hasOwnProperty(y.Z.DURATION)&&(Me.duration=xe.duration),je&&(je.nextPeriodId=Me.id),te.push(Me),Pe=xe,je=Me),xe=null,Me=null;return te.length===0||je!==null&&isNaN(je.duration)&&(je.duration=parseFloat((function(ve){(function(){if(!j||!j.hasOwnProperty("error"))throw new Error(E.Z.MISSING_CONFIG_ERROR)})();var De,$e=Oe(ve.mpd.manifest);return ve.mpd.manifest.mediaPresentationDuration?De=ve.mpd.manifest.mediaPresentationDuration:ve.duration?De=ve.duration:$e?De=Number.POSITIVE_INFINITY:j.error(new ce.Z(we.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",ve)),De}(je)-je.start).toFixed(5))),te},getMpd:function(q){var le=new Fi;return q&&(le.manifest=q,q.hasOwnProperty(y.Z.AVAILABILITY_START_TIME)?le.availabilityStartTime=new Date(q.availabilityStartTime.getTime()):q.loadedTime&&(le.availabilityStartTime=new Date(q.loadedTime.getTime())),q.hasOwnProperty(y.Z.AVAILABILITY_END_TIME)&&(le.availabilityEndTime=new Date(q.availabilityEndTime.getTime())),q.hasOwnProperty(y.Z.MINIMUM_UPDATE_PERIOD)&&(le.minimumUpdatePeriod=q.minimumUpdatePeriod),q.hasOwnProperty(y.Z.MEDIA_PRESENTATION_DURATION)&&(le.mediaPresentationDuration=q.mediaPresentationDuration),q.hasOwnProperty(y.Z.SUGGESTED_PRESENTATION_DELAY)&&(le.suggestedPresentationDelay=q.suggestedPresentationDelay),q.hasOwnProperty(y.Z.TIMESHIFT_BUFFER_DEPTH)&&(le.timeShiftBufferDepth=q.timeShiftBufferDepth),q.hasOwnProperty(y.Z.MAX_SEGMENT_DURATION)&&(le.maxSegmentDuration=q.maxSegmentDuration),q.hasOwnProperty(y.Z.PUBLISH_TIME)&&(le.publishTime=new Date(q.publishTime))),le},getEventsForPeriod:function(q){var le,ae,ue=q&&q.mpd&&q.mpd.manifest?q.mpd.manifest:null,te=ue?ue.Period_asArray:null,Pe=te&&q&&H(q.index)?te[q.index].EventStream_asArray:null,xe=[];if(Pe)for(le=0;le<Pe.length;le++){var je=new ju;if(je.period=q,je.timescale=1,!Pe[le].hasOwnProperty(E.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(je.schemeIdUri=Pe[le][E.Z.SCHEME_ID_URI],Pe[le].hasOwnProperty(y.Z.TIMESCALE)&&(je.timescale=Pe[le][y.Z.TIMESCALE]),Pe[le].hasOwnProperty(y.Z.VALUE)&&(je.value=Pe[le][y.Z.VALUE]),Pe[le].hasOwnProperty(y.Z.PRESENTATION_TIME_OFFSET)&&(je.presentationTimeOffset=Pe[le][y.Z.PRESENTATION_TIME_OFFSET]),ae=0;Pe[le].Event_asArray&&ae<Pe[le].Event_asArray.length;ae++){var Me=Pe[le].Event_asArray[ae],ve=new uo;ve.presentationTime=0,ve.eventStream=je,Me.hasOwnProperty(y.Z.PRESENTATION_TIME)&&(ve.presentationTime=Me.presentationTime);var De=je.presentationTimeOffset?je.presentationTimeOffset/je.timescale:0;ve.calculatedPresentationTime=ve.presentationTime/je.timescale+q.start-De,Me.hasOwnProperty(y.Z.DURATION)&&(ve.duration=Me.duration/je.timescale),Me.hasOwnProperty(y.Z.ID)?ve.id=Me.id:ve.id=null,Me.Signal&&Me.Signal.Binary?ve.messageData=V.decodeArray(Me.Signal.Binary.toString()):ve.messageData=Me.messageData||Me.__cdata||Me.__text,xe.push(ve)}}return xe},getEssentialPropertiesForAdaptation:function(q){var le={};if(q&&q.hasOwnProperty(y.Z.ESSENTIAL_PROPERTY_ASARRAY)){var ae,ue=Un(q.EssentialProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var te=ae.value;te.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(le[te[E.Z.SCHEME_ID_URI]]=fn({},te))}}catch(Pe){ue.e(Pe)}finally{ue.f()}}return le},getEssentialPropertiesAsArrayForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.ESSENTIAL_PROPERTY_ASARRAY)&&q.EssentialProperty_asArray.length?q.EssentialProperty_asArray.map(function(le){return new At().init(le)}):[]},getEssentialPropertiesForRepresentation:Ze,getEventStreamForAdaptationSet:function(q,le,ae){var ue,te,Pe;return q&&q.Period_asArray&&le&&le.period&&H(le.period.index)&&(te=q.Period_asArray[le.period.index])&&te.AdaptationSet_asArray&&H(le.index)&&(Pe=te.AdaptationSet_asArray[le.index])&&(ue=Pe.InbandEventStream_asArray),ke(ue,null,ae)},getEventStreamForRepresentation:function(q,le,ae){var ue,te,Pe,xe;return q&&q.Period_asArray&&le&&le.adaptation&&le.adaptation.period&&H(le.adaptation.period.index)&&(te=q.Period_asArray[le.adaptation.period.index])&&te.AdaptationSet_asArray&&H(le.adaptation.index)&&(Pe=te.AdaptationSet_asArray[le.adaptation.index])&&Pe.Representation_asArray&&H(le.index)&&(xe=Pe.Representation_asArray[le.index])&&(ue=xe.InbandEventStream_asArray),ke(ue,le,ae)},getUTCTimingSources:function(q){var le=Oe(q),ae=!!q&&q.hasOwnProperty(y.Z.AVAILABILITY_START_TIME),ue=q?q.UTCTiming_asArray:null,te=[];return(le||ae)&&ue&&ue.forEach(function(Pe){var xe=new no.Z;Pe.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(xe.schemeIdUri=Pe.schemeIdUri,Pe.hasOwnProperty(y.Z.VALUE)&&(xe.value=Pe.value.toString(),te.push(xe)))}),te},getBaseURLsFromElement:Ie,getRepresentationSortFunction:function(){return function(q,le){return q.bandwidth-le.bandwidth}},getContentSteering:function(q){if(q&&q.hasOwnProperty(y.Z.CONTENT_STEERING_AS_ARRAY))return Ge(q[y.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(q){return q&&q.hasOwnProperty(y.Z.LOCATION_AS_ARRAY)?q[y.Z.LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,ue=le.hasOwnProperty(y.Z.SERVICE_LOCATION)?le[y.Z.SERVICE_LOCATION]:null;return new zn(ae,ue)}):[]},getPatchLocation:function(q){return q&&q.hasOwnProperty(y.Z.PATCH_LOCATION_AS_ARRAY)?q[y.Z.PATCH_LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,ue=le.hasOwnProperty(y.Z.SERVICE_LOCATION)?le[y.Z.SERVICE_LOCATION]:null,te=le.hasOwnProperty(y.Z.TTL)?1e3*parseFloat(le[y.Z.TTL]):NaN;return new Kn(ae,ue,te)}):[]},getSuggestedPresentationDelay:function(q){return q&&q.hasOwnProperty(y.Z.SUGGESTED_PRESENTATION_DELAY)?q.suggestedPresentationDelay:null},getAvailabilityStartTime:function(q){return q&&q.hasOwnProperty(y.Z.AVAILABILITY_START_TIME)&&q.availabilityStartTime!==null?q.availabilityStartTime.getTime():null},getServiceDescriptions:function(q){var le=[];if(q&&q.hasOwnProperty(y.Z.SERVICE_DESCRIPTION)){var ae,ue=Un(q.ServiceDescription_asArray);try{for(ue.s();!(ae=ue.n()).done;){var te=ae.value,Pe=null,xe=null,je=null,Me=null,ve=null,De=null,$e=null;for(var mt in te)te.hasOwnProperty(mt)&&(mt===y.Z.ID?Pe=te[mt]:mt===y.Z.SERVICE_DESCRIPTION_SCOPE?xe=te[mt].schemeIdUri:mt===y.Z.SERVICE_DESCRIPTION_LATENCY?je={target:parseInt(te[mt].target),max:parseInt(te[mt].max),min:parseInt(te[mt].min),referenceId:parseInt(te[mt].referenceId)}:mt===y.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?Me={max:parseFloat(te[mt].max),min:parseFloat(te[mt].min)}:mt===y.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?ve={mediaType:te[mt].mediaType,max:parseInt(te[mt].max),min:parseInt(te[mt].min),target:parseInt(te[mt].target),type:te[mt].type,maxQualityDifference:parseInt(te[mt].maxQualityDifference)}:mt===y.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?De={mediaType:te[mt].mediaType,max:parseInt(te[mt].max),min:parseInt(te[mt].min),target:parseInt(te[mt].target)}:mt===y.Z.CONTENT_STEERING&&($e=Ge(te[mt])));le.push({id:Pe,schemeIdUri:xe,latency:je,playbackRate:Me,operatingQuality:ve,operatingBandwidth:De,contentSteering:$e})}}catch(ct){ue.e(ct)}finally{ue.f()}}return le},getSegmentAlignment:function(q){return!(!q||!q.hasOwnProperty(y.Z.SEGMENT_ALIGNMENT))&&q[y.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(q){return!(!q||!q.hasOwnProperty(y.Z.SUB_SEGMENT_ALIGNMENT))&&q[y.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(q){var le={};if(q&&q.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,ue=Un(q.SupplementalProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var te=ae.value;te.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(le[te[E.Z.SCHEME_ID_URI]]=fn({},te))}}catch(Pe){ue.e(Pe)}finally{ue.f()}}return le},getSupplementalPropertiesAsArrayForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&q.SupplementalProperty_asArray.length?q.SupplementalProperty_asArray.map(function(le){return new At().init(le)}):[]},getSupplementalPropertiesForRepresentation:function(q){var le={};if(q&&q.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,ue=Un(q.SupplementalProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var te=ae.value;te.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(le[te[E.Z.SCHEME_ID_URI]]=fn({},te))}}catch(Pe){ue.e(Pe)}finally{ue.f()}}return le},getSupplementalPropertiesAsArrayForRepresentation:function(q){return q&&q.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&q.SupplementalProperty_asArray.length?q.SupplementalProperty_asArray.map(function(le){return new At().init(le)}):[]},setConfig:function(q){q&&(q.errHandler&&(j=q.errHandler),q.BASE64&&(V=q.BASE64))}},O=(0,M.Z)(W).getInstance().getLogger(k),k}Vr.__dashjs_factory_name="DashManifestModel";var er=F.Z.getSingletonFactory(Vr),dn=w(703);function vn(k,O){var j;if(typeof Symbol>"u"||k[Symbol.iterator]==null){if(Array.isArray(k)||(j=function(de,Ae){if(de){if(typeof de=="string")return on(de,Ae);var Te=Object.prototype.toString.call(de).slice(8,-1);return Te==="Object"&&de.constructor&&(Te=de.constructor.name),Te==="Map"||Te==="Set"?Array.from(de):Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te)?on(de,Ae):void 0}}(k))||O){j&&(k=j);var V=0,W=function(){};return{s:W,n:function(){return V>=k.length?{done:!0}:{done:!1,value:k[V++]}},e:function(de){throw de},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ee,H=!0,re=!1;return{s:function(){j=k[Symbol.iterator]()},n:function(){var de=j.next();return H=de.done,de},e:function(de){re=!0,ee=de},f:function(){try{H||j.return==null||j.return()}finally{if(re)throw ee}}}}function on(k,O){(O==null||O>k.length)&&(O=k.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=k[j];return V}function tr(){var k,O,j,V,W,ee,H,re,de,Ae,Te=this.context,ie=(0,g.Z)(Te).getInstance(),_e=(0,qe.Z)(Te).getInstance();function ye(){j={pr:1,nor:null,st:null,sf:null,sid:"".concat(dn.Z.generateUuid()),cid:null},de={},re={},Ae={},Oe()}function ze(){Oe()}function Oe(){if(ee){var te=ee.getStreamController();if(te&&typeof te.getActiveStream=="function"){var Pe=te.getActiveStream();Pe&&(H=Pe.getProcessors())}}}function Ze(te,Pe){var xe,je={},Me=vn(Pe);try{for(Me.s();!(xe=Me.n()).done;){var ve=xe.value;te[ve]&&(je[ve]=te[ve])}}catch(De){Me.e(De)}finally{Me.f()}return je}function We(te){var Pe=_e.get().streaming.cmcd.enabledKeys;return te.filter(function(xe){return Pe.includes(xe)})}function Se(te){try{return te.type===st.w.MPD_TYPE?((xe=ke()).ot="m",xe):te.type===st.w.MEDIA_SEGMENT_TYPE?(Pe=te.mediaType,Ae.hasOwnProperty(Pe)||(Ae[Pe]=!1),re.hasOwnProperty(Pe)||(re[Pe]=!1),de.hasOwnProperty(Pe)||(de[Pe]=!1),function(je){var Me,ve=ke(),De=function(Zt){try{var xn=Zt.quality,at=Zt.mediaInfo.bitrateList;return parseInt(at[xn].bandwidth/1e3)}catch(St){return null}}(je),$e=function(Zt){try{return isNaN(Zt.duration)?NaN:Math.round(1e3*Zt.duration)}catch(xn){return null}}(je),mt=function(Zt){try{return 100*parseInt(V.getThroughputHistory().getSafeAverageThroughput(Zt)/100)}catch(xn){return null}}(je.mediaType),ct=function(Zt){try{var xn=j.pr,at=W.getCurrentBufferLevel(Zt);return isNaN(xn)||isNaN(at)?null:100*parseInt(at/xn*10)}catch(St){return null}}(je.mediaType),yt=Ie(je.mediaType),pt=function(Zt){try{var xn=V.getTopBitrateInfoFor(Zt);return Math.round(xn.bitrate/1e3)}catch(at){return null}}(je.mediaType),Gt=j.pr,Vt=function(Zt){if(H&&H.length!==0){var xn,at=vn(H);try{for(at.s();!(xn=at.n()).done;){var St=xn.value;if(St.getType()===Zt)return St.probeNextRequest()}}catch(Qt){at.e(Qt)}finally{at.f()}}}(je.mediaType);je.mediaType===E.Z.VIDEO&&(Me="v"),je.mediaType===E.Z.AUDIO&&(Me="a"),je.mediaType===E.Z.TEXT&&(Me=je.mediaInfo.mimeType==="application/mp4"?"tt":"c");var jt=_e.get().streaming.cmcd.rtp;return jt||(jt=function(Zt){try{var xn=ee.getPlaybackRate();xn||(xn=1);var at=Zt.quality,St=Zt.mediaType,Qt=Zt.mediaInfo,Pt=Zt.duration;if(!Qt)return NaN;var un=Ie(St);un===0&&(un=500);var an=Qt.bitrateList[at].bandwidth*Pt/1e3/(un/xn/1e3),Jt=_e.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(_e.get().streaming.cmcd.rtpSafetyFactor)?_e.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(an*Jt/100)+1)}catch(Bn){return NaN}}(je)),isNaN(jt)||(ve.rtp=jt),Vt&&(je.url!==Vt.url?ve.nor=encodeURIComponent(dn.Z.getRelativeUrl(je.url,Vt.url)):Vt.range&&(ve.nrr=Vt.range)),De&&(ve.br=De),Me&&(ve.ot=Me),isNaN($e)||(ve.d=$e),isNaN(mt)||(ve.mtp=mt),isNaN(ct)||(ve.dl=ct),isNaN(yt)||(ve.bl=yt),isNaN(pt)||(ve.tb=pt),isNaN(Gt)||Gt===1||(ve.pr=Gt),de[je.mediaType]&&(ve.bs=!0,de[je.mediaType]=!1),!re[je.mediaType]&&Ae[je.mediaType]||(ve.su=!0,re[je.mediaType]=!1,Ae[je.mediaType]=!0),ve}(te)):te.type===st.w.INIT_SEGMENT_TYPE?function(){var je=ke();return je.ot="i",je.su=!0,je}():te.type===st.w.OTHER_TYPE||te.type===st.w.XLINK_EXPANSION_TYPE?function(){var je=ke();return je.ot="o",je}():te.type===st.w.LICENSE?function(je){var Me=ke();return Me.ot="k",Me}():null}catch(je){return null}var Pe,xe}function ke(){var te={},Pe=_e.get().streaming.cmcd.cid?_e.get().streaming.cmcd.cid:j.cid;return te.v=1,te.sid=_e.get().streaming.cmcd.sid?_e.get().streaming.cmcd.sid:j.sid,te.sid="".concat(te.sid),Pe&&(te.cid="".concat(Pe)),isNaN(j.pr)||j.pr===1||j.pr===null||(te.pr=j.pr),j.st&&(te.st=j.st),j.sf&&(te.sf=j.sf),te}function Ie(te){try{var Pe=W.getCurrentBufferLevel(te);return isNaN(Pe)?null:100*parseInt(10*Pe)}catch(xe){return null}}function Ge(te){try{j.pr=te.playbackRate}catch(Pe){}}function q(te){try{var Pe=k.getIsDynamic(te.data)?"l":"v",xe=te.protocol&&te.protocol==="MSS"?"s":"d";j.st="".concat(Pe),j.sf="".concat(xe)}catch(je){}}function le(te){try{te.state&&te.mediaType&&te.state===_.Z.BUFFER_EMPTY&&(de[te.mediaType]||(de[te.mediaType]=!0),re[te.mediaType]||(re[te.mediaType]=!0))}catch(Pe){}}function ae(){for(var te in de)de.hasOwnProperty(te)&&(de[te]=!0);for(var Pe in re)re.hasOwnProperty(Pe)&&(re[Pe]=!0)}function ue(te){try{if(!te)return null;var Pe=Object.keys(te).sort(function(Me,ve){return Me.localeCompare(ve)}),xe=Pe.length,je=Pe.reduce(function(Me,ve,De){return ve==="v"&&te[ve]===1||(typeof te[ve]=="string"&&ve!=="ot"&&ve!=="sf"&&ve!=="st"?Me+="".concat(ve,"=").concat(JSON.stringify(te[ve])):Me+="".concat(ve,"=").concat(te[ve]),De<xe-1&&(Me+=",")),Me},"");return(je=je.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(Me){return null}}return O={getQueryParameter:function(te){try{if(_e.get().streaming.cmcd&&_e.get().streaming.cmcd.enabled){var Pe=Se(te),xe=function(Me){try{var ve=_e.get().streaming.cmcd.enabledKeys;return Object.keys(Me).filter(function(De){return ve.includes(De)}).reduce(function(De,$e){return De[$e]=Me[$e],De},{})}catch(De){return Me}}(Pe),je=ue(xe);return ie.trigger(gr.Z.CMCD_DATA_GENERATED,{url:te.url,mediaType:te.mediaType,cmcdData:Pe,cmcdString:je}),{key:"CMCD",value:je}}return null}catch(Me){return null}},getHeaderParameters:function(te){try{if(_e.get().streaming.cmcd&&_e.get().streaming.cmcd.enabled){var Pe=Se(te),xe=Ze(Pe,We(["br","d","ot","tb"])),je=Ze(Pe,We(["bl","dl","mtp","nor","nrr","su"])),Me=Ze(Pe,We(["bs","rtp"])),ve=Ze(Pe,We(["cid","pr","sf","sid","st","v"])),De={"CMCD-Object":ue(xe),"CMCD-Request":ue(je),"CMCD-Status":ue(Me),"CMCD-Session":ue(ve)};return ie.trigger(gr.Z.CMCD_DATA_GENERATED,{url:te.url,mediaType:te.mediaType,cmcdData:Pe,headers:De}),De}return null}catch($e){return null}},setConfig:function(te){te&&(te.abrController&&(V=te.abrController),te.dashMetrics&&(W=te.dashMetrics),te.playbackController&&(ee=te.playbackController))},reset:function(){ie.off(_.Z.PLAYBACK_RATE_CHANGED,Ge,this),ie.off(_.Z.MANIFEST_LOADED,q,this),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,O),ie.off(_.Z.PLAYBACK_SEEKED,ae,O),ye()},initialize:function(){ie.on(_.Z.PLAYBACK_RATE_CHANGED,Ge,O),ie.on(_.Z.MANIFEST_LOADED,q,O),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,O),ie.on(_.Z.PLAYBACK_SEEKED,ae,O),ie.on(_.Z.PERIOD_SWITCH_COMPLETED,ze,O)}},k=er(Te).getInstance(),ye(),O}tr.__dashjs_factory_name="CmcdModel";var ur=F.Z.getSingletonFactory(tr);function xr(k){return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},xr(k)}function Rr(k,O){Rr=function(re,de){return new ee(re,void 0,de)};var j=Ui(RegExp),V=RegExp.prototype,W=new WeakMap;function ee(re,de,Ae){var Te=j.call(this,re,de);return W.set(Te,Ae||W.get(re)),Te}function H(re,de){var Ae=W.get(de);return Object.keys(Ae).reduce(function(Te,ie){return Te[ie]=re[Ae[ie]],Te},Object.create(null))}return di(ee,j),ee.prototype.exec=function(re){var de=V.exec.call(this,re);return de&&(de.groups=H(de,this)),de},ee.prototype[Symbol.replace]=function(re,de){if(typeof de=="string"){var Ae=W.get(this);return V[Symbol.replace].call(this,re,de.replace(/\$<([^>]+)>/g,function(ie,_e){return"$"+Ae[_e]}))}if(typeof de=="function"){var Te=this;return V[Symbol.replace].call(this,re,function(){var ie=[];return ie.push.apply(ie,arguments),xr(ie[ie.length-1])!=="object"&&ie.push(H(ie,Te)),de.apply(this,ie)})}return V[Symbol.replace].call(this,re,de)},Rr.apply(this,arguments)}function di(k,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(O&&O.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),O&&vi(k,O)}function Ui(k){var O=typeof Map=="function"?new Map:void 0;return Ui=function(j){if(j===null||(V=j,Function.toString.call(V).indexOf("[native code]")===-1))return j;var V;if(typeof j!="function")throw new TypeError("Super expression must either be null or a function");if(O!==void 0){if(O.has(j))return O.get(j);O.set(j,W)}function W(){return ni(j,arguments,ri(this).constructor)}return W.prototype=Object.create(j.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),vi(W,j)},Ui(k)}function ni(k,O,j){return ni=li()?Reflect.construct:function(V,W,ee){var H=[null];H.push.apply(H,W);var re=new(Function.bind.apply(V,H));return ee&&vi(re,ee.prototype),re},ni.apply(null,arguments)}function li(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(k){return!1}}function vi(k,O){return vi=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},vi(k,O)}function ri(k){return ri=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},ri(k)}var vs="static",Ao="dynamic",Yo="cmsd-",Ri=Yo+vs,Zu=Yo+Ao,vu="stream",Zs=["mb","st","sf","v"],Rl={video:"v",audio:"a",text:"tt",stream:vu},qu=/^[-0-9]/;function Gu(){var k,O,j,V,W=this.context,ee=(0,g.Z)(W).getInstance();function H(){j={},V={}}function re(ye){ye&&Object.keys(ye).forEach(function(ze){Zs.includes(ze)||delete ye[ze]})}function de(ye){return!ye||ye.toLowerCase()!=="false"&&(qu.test(ye)?parseInt(ye,10):ye.replace(/["]+/g,""))}function Ae(ye){try{for(var ze={},Oe=ye.split(","),Ze=0;Ze<Oe.length;Ze++){var We=Oe[Ze].split("="),Se=We[0],ke=de(We[1]);ze[Se]=ke}return ze}catch(Ie){O.error("Failed to parse CMSD-Static response header value:",Ie)}}function Te(ye){try{for(var ze={},Oe=ye.split(","),Ze=Oe[Oe.length-1].split(";"),We=1;We<Ze.length;We++){var Se=Ze[We].split("="),ke=Se[0],Ie=de(Se[1]);ze[ke]=Ie}return ze}catch(Ge){return O.error("Failed to parse CMSD-Dynamic response header value:",Ge),[]}}function ie(ye){return Rl[ye]||"o"}function _e(ye,ze,Oe){var Ze=ye===vs?j:V,We=Ze[ze]||{},Se=Ze[vu]||{};return We[Oe]||Se[Oe]}return k={setConfig:function(){},initialize:function(){},reset:function(){H()},parseResponseHeaders:function(ye,ze){for(var Oe=null,Ze=null,We=ye.split("\r\n"),Se=We.length-1;Se>=0;Se--){var ke=We[Se].match(Rr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(ke&&ke.groups){var Ie=ke.groups.key.toLowerCase(),Ge=ke.groups.value;switch(Ie){case Ri:Oe=Ae(Ge),ee.trigger(T.Z.CMSD_STATIC_HEADER,Oe);break;case Zu:Ze||(Ze=Te(Ge))}}}var q=vu;return Oe&&Oe.ot?q=Oe.ot:ze&&(q=ie(ze)),re(j[q]),re(V[q]),Oe&&(j[q]=Object.assign(j[q]||{},Oe)),Ze&&(V[q]=Object.assign(V[q]||{},Ze)),{static:Oe,dynamic:Ze}},getMaxBitrate:function(ye){var ze=ie(ye);return _e(Ao,ze,"mb")||-1},getEstimatedThroughput:function(ye){var ze=ie(ye);return _e(Ao,ze,"etp")||null},getResponseDelay:function(ye){var ze=ie(ye);return _e(Ao,ze,"rd")||null},getRoundTripTime:function(ye){var ze=ie(ye);return _e(Ao,ze,"rtt")||null}},O=(0,M.Z)(W).getInstance().getLogger(k),H(),k}Gu.__dashjs_factory_name="CmsdModel";var sn=F.Z.getSingletonFactory(Gu);function ir(){var k,O,j=this.context,V={};function W(){O=(0,M.Z)(j).getInstance().getLogger(k)}function ee(re){for(var de={},Ae=0,Te=0,ie=0,_e=0,ye=re.length,ze=0;ze<ye;++ze)Ae+=re[ze].chunkDownloadTimeRelativeMS,Te+=re[ze].bufferLevel,ie+=re[ze].chunkDownloadTimeRelativeMS*re[ze].bufferLevel,_e+=re[ze].chunkDownloadTimeRelativeMS*re[ze].chunkDownloadTimeRelativeMS;return de.m=(ie-Ae*Te/ye)/(_e-Ae*Ae/ye),de.b=Te/ye-de.m*Ae/ye,function(Oe){return de.m*Oe+de.b}}function H(re){var de,Ae=!0,Te=re.reduce(function(ie,_e){return ie+_e.bufferLevelAtSegmentEnd},0)/re.length;return re.forEach(function(ie){Math.abs(ie.bufferLevelAtSegmentEnd/ie.bufferLevelAtSegmentStart)<.95&&(Ae=!1),ie.bufferLevelAtSegmentEnd/Te<.8&&(Ae=!1),de?de>ie.bitrate&&(Ae=!1):de=ie.bitrate}),Ae}return k={setup:W,addMeasurement:function(re,de,Ae,Te,ie){re&&re.mediaType&&!V[re.mediaType]&&(V[re.mediaType]=[]);var _e=re.mediaInfo.bitrateList.find(function(ye){return ye.id===re.representationId});V[re.mediaType].push({index:re.index,repId:re.representationId,mediaType:re.mediaType,requestTimeMS:Te,adjustedAvailabilityStartTimeMS:re.availabilityStartTime.getTime(),segDurationMS:1e3*re.duration,chunksDurationMS:Ae.reduce(function(ye,ze){return ye+ze.chunkDownloadDurationMS},0),segmentBytes:Ae.reduce(function(ye,ze){return ye+ze.chunkBytes},0),bitrate:_e&&_e.bandwidth,bitrateList:re.mediaInfo.bitrateList,chunkMeasurements:Ae,fetchDownloadDurationMS:de,throughputCapacityDelayMS:ie,getEstimatedBufferLevel:ee(Ae.slice(1))}),V[re.mediaType].length>10&&V[re.mediaType].shift()},getThroughputCapacityDelayMS:function(re,de){var Ae=V[re.mediaType]&&V[re.mediaType].slice(-3);return!Ae||Ae.length<3?0:H(Ae)?de/4>250?250:de/4:0},getEstimatedDownloadDurationMS:function(re){var de=V[re.mediaType].slice(-1).pop(),Ae=V[re.mediaType].slice(-3),Te=de.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;de.bufferLevelAtSegmentStart=de.getEstimatedBufferLevel(Te/2),de.bufferLevelAtSegmentEnd=de.getEstimatedBufferLevel(Te);var ie=H(Ae),_e=ie?.6:.8;if(de.isBufferStable&&1.05*de.segDurationMS<de.fetchDownloadDurationMS)return de.fetchDownloadDurationMS;if(!ie||de.segDurationMS<de.fetchDownloadDurationMS||de.adjustedAvailabilityStartTimeMS<=de.requestTimeMS+de.throughputCapacityDelayMS-de.segDurationMS)return .8*de.fetchDownloadDurationMS;for(var ye=de.requestTimeMS+de.throughputCapacityDelayMS-de.adjustedAvailabilityStartTimeMS,ze=0,Oe=0,Ze=0,We=0;We<de.chunkMeasurements.length;We++){var Se=de.chunkMeasurements[We];if(ye<Oe+Se.chunkDownloadDurationMS)break;Oe+=Se.chunkDownloadDurationMS,ze+=Se.chunkBytes,Ze++}if(ye<0&&O.warn("request time was before adjusted availibitly start time"),ze&&Oe&&Ze>.2*de.chunkMeasurements.length){var ke=ze/Oe,Ie=de.segmentBytes/ke;return de.fetchDownloadDurationMS<Ie?de.fetchDownloadDurationMS*_e:Ie*_e}var Ge=de.bitrate;return de.bitrateList.some(function(q){if(q.bandwidth>de.bitrate)return Ge=q.bandwidth,!0}),Ge===de.bitrate?de.fetchDownloadDurationMS*_e:_e*de.segmentBytes*8*1e3/Ge}},W(),k}ir.__dashjs_factory_name="LowLatencyThroughputModel";var Tr=F.Z.getSingletonFactory(ir),Ai=w(5717);function Wr(k,O,j){return O in k?Object.defineProperty(k,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):k[O]=j,k}function Ii(k){k=k||{};var O,j,V,W,ee,H,re,de,Ae,Te,ie,_e=this.context,ye=k.errHandler,ze=k.dashMetrics,Oe=k.mediaPlayerModel,Ze=k.requestModifier,We=k.boxParser,Se=k.errors,ke=k.requestTimeout||0,Ie=(0,g.Z)(_e).getInstance(),Ge=(0,qe.Z)(_e).getInstance();function q(le,ae){var ue,te=le.request,Pe=[],xe=!0,je=!0,Me=new Date,ve=Me,De=0,$e=null,mt=null;if(!Ze||!ze||!ye)throw new Error("config object is not correct or missing");var ct,yt=function(un){te.requestStartDate=Me,te.requestEndDate=new Date,te.firstByteDate=te.firstByteDate||Me,te.fileLoaderType=mt;var an=ue.response?ue.response.responseURL:null,Jt=ue.response?ue.response.status:null,Bn=ue.response&&ue.response.getAllResponseHeaders?ue.response.getAllResponseHeaders():ue.response?ue.response.responseHeaders:null,kn=Bn&&Ge.get().streaming.cmsd&&Ge.get().streaming.cmsd.enabled?re.parseResponseHeaders(Bn,te.mediaType):null;ze.addHttpRequest(te,an,Jt,Bn,un?Pe:null,kn)},pt=function(un){je=!1,yt(un),te.type===st.w.MPD_TYPE&&(ze.addManifestUpdate(te),Ie.trigger(T.Z.MANIFEST_LOADING_FINISHED,{request:te}))},Gt=function(){if($e&&(clearTimeout($e),$e=null),j.indexOf(ue)!==-1&&(j.splice(j.indexOf(ue),1),je))if(pt(!1),ae>0){try{Ge.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&te.type===st.w.MEDIA_SEGMENT_TYPE&&Oe.getRetryAttemptsForType(st.w.MEDIA_SEGMENT_TYPE)===ae&&Ie.trigger(T.Z.ATTEMPT_BACKGROUND_SYNC)}catch(an){}ae--;var un={config:le};W.push(un),un.timeout=setTimeout(function(){W.indexOf(un)!==-1&&(W.splice(W.indexOf(un),1),q(le,ae))},Oe.getRetryIntervalsForType(te.type))}else{if(te.type===st.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;ye.error(new ce.Z(ee[te.type],te.url+" is not available",{request:te,response:ue.response})),le.error&&le.error(te,"error",ue.response.statusText,ue.response),le.complete&&le.complete(te,ue.response.statusText)}};te.hasOwnProperty("availabilityTimeComplete")&&te.availabilityTimeComplete===!1&&window.fetch&&te.responseType==="arraybuffer"&&te.type===st.w.MEDIA_SEGMENT_TYPE?((ct=Gr(_e).create({requestModifier:Ze,lowLatencyThroughputModel:Ae,boxParser:We})).setup({dashMetrics:ze}),mt=E.Z.FILE_LOADER_TYPES.FETCH):(ct=(0,cn.Z)(_e).create({requestModifier:Ze}),mt=E.Z.FILE_LOADER_TYPES.XHR);var Vt=null,jt=Ze.modifyRequestURL?Ze.modifyRequestURL(te.url):te.url;if(Ge.get().streaming.cmcd&&Ge.get().streaming.cmcd.enabled){var Zt=Ge.get().streaming.cmcd.mode;if(Zt===E.Z.CMCD_MODE_QUERY){var xn=function(un){try{var an=[],Jt=H.getQueryParameter(un);return Jt&&an.push(Jt),an}catch(Bn){return[]}}(te);jt=dn.Z.addAditionalQueryParameterToUrl(jt,xn)}else Zt===E.Z.CMCD_MODE_HEADER&&(Vt=H.getHeaderParameters(te))}var at=de.getXHRWithCredentialsForType(te.type);if(te.queryParams){var St=Object.keys(te.queryParams).map(function(un){return{key:un,value:te.queryParams[un]}});jt=dn.Z.addAditionalQueryParameterToUrl(jt,St)}te.url=jt,ue={url:jt,method:st.w.GET,withCredentials:at,request:te,onload:function(){ue.response.status>=200&&ue.response.status<=299&&(pt(!0),le.success&&le.success(ue.response.response,ue.response.statusText,ue.response.responseURL),le.complete&&le.complete(te,ue.response.statusText))},onend:Gt,onerror:Gt,progress:function(un){var an=new Date;xe&&(xe=!1,(!un.lengthComputable||un.lengthComputable&&un.total!==un.loaded)&&(te.firstByteDate=an)),un.lengthComputable&&(te.bytesLoaded=un.loaded,te.bytesTotal=un.total),un.noTrace||(Pe.push({s:ve,d:un.time?un.time:an.getTime()-ve.getTime(),b:[un.loaded?un.loaded-De:0]}),ve=an,De=un.loaded),$e&&(clearTimeout($e),$e=null),Ge.get().streaming.fragmentRequestProgressTimeout>0&&($e=setTimeout(function(){Te.warn("Abort request "+ue.url+" due to progress timeout"),ue.response.onabort=null,ue.loader.abort(ue),Gt()},Ge.get().streaming.fragmentRequestProgressTimeout)),le.progress&&un&&le.progress(un)},onabort:function(){yt(!0),$e&&(clearTimeout($e),$e=null),le.abort&&le.abort(te)},ontimeout:function(un){var an;if(un.lengthComputable){var Jt=un.loaded/un.total*100;an="Request timeout: loaded: "+un.loaded+", out of: "+un.total+" : "+Jt.toFixed(3)+"% Completed"}else an="Request timeout: non-computable download size";Te.warn(an)},loader:ct,timeout:ke,headers:Vt};var Qt=new Date().getTime();if(isNaN(te.delayLoadingTime)||Qt>=te.delayLoadingTime)j.push(ue),ct.load(ue);else{var Pt={httpRequest:ue};V.push(Pt),Pt.delayTimeout=setTimeout(function(){if(V.indexOf(Pt)!==-1){V.splice(V.indexOf(Pt),1);try{Me=new Date,ve=Me,j.push(Pt.httpRequest),ct.load(Pt.httpRequest)}catch(un){Pt.httpRequest.onerror()}}},te.delayLoadingTime-Qt)}}return O={load:function(le){le.request?q(le,Oe.getRetryAttemptsForType(le.request.type)):le.error&&le.error(le.request,"error")},abort:function(){W.forEach(function(le){clearTimeout(le.timeout),le.config.request&&le.config.abort&&le.config.abort(le.config.request)}),W=[],V.forEach(function(le){return clearTimeout(le.delayTimeout)}),V=[],j.forEach(function(le){le.request.type!==st.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(le.onloadend=le.onerror=le.onprogress=void 0,le.loader.abort(le))}),j=[]}},Te=(0,M.Z)(_e).getInstance().getLogger(O),j=[],V=[],W=[],H=ur(_e).getInstance(),re=sn(_e).getInstance(),Ae=Tr(_e).getInstance(),de=(0,Ai.Z)(_e).getInstance(),Wr(ie={},st.w.MPD_TYPE,Se.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Wr(ie,st.w.XLINK_EXPANSION_TYPE,Se.DOWNLOAD_ERROR_ID_XLINK_CODE),Wr(ie,st.w.INIT_SEGMENT_TYPE,Se.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Wr(ie,st.w.MEDIA_SEGMENT_TYPE,Se.DOWNLOAD_ERROR_ID_CONTENT_CODE),Wr(ie,st.w.INDEX_SEGMENT_TYPE,Se.DOWNLOAD_ERROR_ID_CONTENT_CODE),Wr(ie,st.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,Se.DOWNLOAD_ERROR_ID_CONTENT_CODE),Wr(ie,st.w.OTHER_TYPE,Se.DOWNLOAD_ERROR_ID_CONTENT_CODE),ee=ie,O}Ii.__dashjs_factory_name="HTTPLoader";var Kr=F.Z.getClassFactory(Ii);function br(){var k;function O(){k={}}function j(){O()}return j(),{getLoader:function(V){for(var W in k)if(k.hasOwnProperty(W)&&V.startsWith(W))return k[W];return Kr},registerLoader:function(V,W){k[V]=W},unregisterLoader:function(V){k[V]&&delete k[V]},unregisterAllLoader:O,reset:j}}br.__dashjs_factory_name="SchemeLoaderFactory";var ci=F.Z.getSingletonFactory(br);function Br(k){k=k||{};var O,j,V=this.context;return O=ci(V).getInstance(),{load:function(W){if(!j){var ee=O.getLoader(W&&W.request?W.request.url:null);j=ee(V).create({errHandler:k.errHandler,mediaPlayerModel:k.mediaPlayerModel,requestModifier:k.requestModifier,dashMetrics:k.dashMetrics,boxParser:k.boxParser?k.boxParser:null,constants:k.constants?k.constants:null,dashConstants:k.dashConstants?k.dashConstants:null,urlUtils:k.urlUtils?k.urlUtils:null,requestTimeout:isNaN(k.requestTimeout)?0:k.requestTimeout,errors:k.errors})}j.load(W)},abort:function(){j&&j.abort()}}}Br.__dashjs_factory_name="URLLoader";var Ci=F.Z.getClassFactory(Br);function yo(k){return yo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},yo(k)}function oa(k,O){return oa=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},oa(k,O)}function yi(k,O){return!O||yo(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Ta(k){return Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Ta(k)}var aa=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&oa(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Ta(O);if(j){var re=Ta(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return yi(this,ee)});function W(ee){var H;return function(re,de){if(!(re instanceof de))throw new TypeError("Cannot call a class as a function")}(this,W),(H=V.call(this,ee)).checkForExistenceOnly=!0,H}return W}(Z.Z);function ys(k){k=k||{};var O,j,V=this.context,W=k.eventBus,ee=k.events,H=k.urlUtils,re=k.errors,de=k.streamId;return O={checkForExistence:function(Ae){var Te=function(_e){W.trigger(ee.CHECK_FOR_EXISTENCE_COMPLETED,{request:Ae,exists:_e})};if(Ae){var ie=new aa(Ae.url);j.load({request:ie,success:function(){Te(!0)},error:function(){Te(!1)}})}else Te(!1)},load:function(Ae){var Te=function(ie,_e){W.trigger(ee.LOADING_COMPLETED,{request:Ae,response:ie||null,error:_e||null,sender:O})};Ae?j.load({request:Ae,progress:function(ie){W.trigger(ee.LOADING_PROGRESS,{request:Ae,stream:ie.stream,streamId:de}),ie.data&&W.trigger(ee.LOADING_DATA_PROGRESS,{request:Ae,response:ie.data||null,error:null,sender:O})},success:function(ie){Te(ie)},error:function(ie,_e,ye){Te(void 0,new ce.Z(re.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ye,_e))},abort:function(ie){ie&&W.trigger(ee.LOADING_ABANDONED,{mediaType:ie.mediaType,request:ie,sender:O})}}):Te(void 0,new ce.Z(re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){j&&j.abort()},reset:function(){j&&(j.abort(),j=null)}},j=Ci(V).create({errHandler:k.errHandler,errors:re,dashMetrics:k.dashMetrics,mediaPlayerModel:k.mediaPlayerModel,requestModifier:k.requestModifier,urlUtils:H,constants:E.Z,boxParser:k.boxParser,dashConstants:k.dashConstants,requestTimeout:k.settings.get().streaming.fragmentRequestTimeout}),O}ys.__dashjs_factory_name="FragmentLoader";var Sa=F.Z.getClassFactory(ys);function wa(){return{modifyResponseAsync:function(k){return Promise.resolve(k)}}}wa.__dashjs_factory_name="SegmentResponseModifier";var yu=F.Z.getSingletonFactory(wa);function Eu(k){k=k||{};var O,j,V,W=this.context,ee=(0,g.Z)(W).getInstance(),H=k.errHandler,re=k.mediaPlayerModel,de=k.dashMetrics,Ae=(0,M.Z)(W).getInstance(),Te=yu(W).getInstance(),ie=k.streamInfo;function _e(){return ie.id}function ye(){for(var Oe in V)V[Oe].reset();V={}}function ze(Oe){if(Oe.sender){var Ze=Oe.request,We=Oe.response,Se=Ze.isInitializationRequest(),ke=Ze.mediaInfo.streamInfo;if(Oe.error&&(Ze.mediaType===E.Z.AUDIO||Ze.mediaType===E.Z.VIDEO||Ze.mediaType===E.Z.TEXT&&Ze.mediaInfo.isFragmented)&&ee.trigger(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:Oe.request.serviceLocation}),We&&ke){var Ie=function(Ge,q,le,ae){var ue=new rn;return ue.streamId=le,ue.mediaInfo=q.mediaInfo,ue.segmentType=q.type,ue.start=q.startTime,ue.duration=q.duration,ue.end=ue.start+ue.duration,ue.bytes=Ge,ue.index=q.index,ue.quality=q.quality,ue.representationId=q.representationId,ue.endFragment=ae,ue}(We,Ze,ie.id,Oe.type!==T.Z.FRAGMENT_LOADING_PROGRESS);Te.modifyResponseAsync(Ie).then(function(Ge){ee.trigger(Se?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:Ge,request:Ze},{streamId:ke.id,mediaType:Ze.mediaType})}).catch(function(Ge){j.error(Ge),ee.trigger(Se?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:Ie,request:Ze},{streamId:ke.id,mediaType:Ze.mediaType})})}else j.warn("No "+Ze.mediaType+" bytes to push or stream is inactive.")}}return O={getStreamId:_e,getModel:function(Oe){var Ze=V[Oe];return Ze||(Ze=X(W).create({streamInfo:ie,type:Oe,dashMetrics:de,fragmentLoader:Sa(W).create({dashMetrics:de,mediaPlayerModel:re,errHandler:H,requestModifier:(0,Ke.Z)(W).getInstance(),settings:k.settings,boxParser:k.boxParser,eventBus:ee,events:T.Z,errors:we,dashConstants:k.dashConstants,urlUtils:k.urlUtils,streamId:_e()}),debug:Ae,eventBus:ee,events:T.Z}),V[Oe]=Ze),Ze},reset:function(){ee.off(_.Z.FRAGMENT_LOADING_COMPLETED,ze,this),ee.off(_.Z.FRAGMENT_LOADING_PROGRESS,ze,this),ye()}},j=Ae.getLogger(O),ye(),ee.on(_.Z.FRAGMENT_LOADING_COMPLETED,ze,O),ee.on(_.Z.FRAGMENT_LOADING_PROGRESS,ze,O),O}Eu.__dashjs_factory_name="FragmentController";var Ah=F.Z.getClassFactory(Eu),Aa=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},Es=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function _u(k){var O,j,V=this.context,W=k.streamInfo;function ee(re){j.setTrackByIndex(re)}function H(){j&&j.reset()}return O={getStreamId:function(){return W.id},initialize:function(){j.addTracks();var re=j.getTracks();re&&re.length>0&&ee(0)},provide:function(re,de){if(typeof de=="function"){var Ae,Te,ie=j.getCurrentTrack();if(!ie||ie.segmentDuration<=0||re==null)de(null);else{(Te=j.getThumbnailRequestForTime(re))&&(ie.segmentDuration=Te.duration),Ae=re%ie.segmentDuration;var _e=Math.floor(Ae*ie.tilesHor*ie.tilesVert/ie.segmentDuration),ye=new Aa;if(ye.width=Math.floor(ie.widthPerTile),ye.height=Math.floor(ie.heightPerTile),ye.x=Math.floor(_e%ie.tilesHor)*ie.widthPerTile,ye.y=Math.floor(_e/ie.tilesHor)*ie.heightPerTile,"readThumbnail"in ie)return ie.readThumbnail(re,function(Oe){ye.url=Oe,de(ye)});if(Te)ye.url=Te.url,ie.segmentDuration=NaN;else{var ze=Math.floor(re/ie.segmentDuration);ye.url=function(Oe,Ze){var We=Ze+Oe.startNumber,Se=(0,D.vi)(Oe.templateUrl,"Number",We);return Se=(0,D.vi)(Se,"Time",(We-1)*Oe.segmentDuration*Oe.timescale),Se=(0,D.vi)(Se,"Bandwidth",Oe.bandwidth),(0,D.eR)(Se)}(ie,ze)}de(ye)}}},setTrackByIndex:ee,getCurrentTrackIndex:function(){return j.getCurrentTrackIndex()},getBitrateList:function(){var re=j.getTracks(),de=0;return re.map(function(Ae){var Te=new Es;return Te.mediaType=E.Z.IMAGE,Te.qualityIndex=de++,Te.bitrate=Ae.bitrate,Te.width=Ae.width,Te.height=Ae.height,Te})},reset:H},H(),j=(0,Mn.Z)(V).create({streamInfo:W,adapter:k.adapter,baseURLController:k.baseURLController,timelineConverter:k.timelineConverter,debug:k.debug,eventBus:k.eventBus,events:k.events,dashConstants:k.dashConstants,dashMetrics:k.dashMetrics,segmentBaseController:k.segmentBaseController}),O}_u.__dashjs_factory_name="ThumbnailController";var Tu=F.Z.getClassFactory(_u),Hu=w(7417);function mf(k){var O;k=k||{};var j=[],V=(0,g.Z)(this.context).getInstance(),W=k.updateEventName,ee=k.addBlacklistEventName;function H(re){j.indexOf(re)===-1&&(j.push(re),V.trigger(W,{entry:re}))}return O={add:H,contains:function(re){return!!(j.length&&re&&re.length)&&j.indexOf(re)!==-1},reset:function(){j=[]}},ee&&V.on(ee,function(re){H(re.entry)},O),O}mf.__dashjs_factory_name="BlackListController";var qs=F.Z.getClassFactory(mf),vf=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT,E.Z.MUXED,E.Z.IMAGE];function sr(k){k=k||{};var O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke=this.context,Ie=(0,g.Z)(ke).getInstance(),Ge=(0,wt.Z)(ke).getInstance(),q=k.manifestModel,le=k.mediaPlayerModel,ae=k.dashMetrics,ue=k.manifestUpdater,te=k.adapter,Pe=k.timelineConverter,xe=k.capabilities,je=k.errHandler,Me=k.abrController,ve=k.playbackController,De=k.eventController,$e=k.mediaController,mt=k.protectionController,ct=k.textController,yt=k.videoModel,pt=k.streamInfo,Gt=k.settings;function Vt(en,Nn){return new Promise(function(Pn,On){an(),Te=!0,Bn();var Dn=yt.getElement(),bt=[];vf.forEach(function(et){(et!==E.Z.TEXT||en)&&(et!==E.Z.VIDEO||!Dn||Dn&&/^VIDEO$/i.test(Dn.nodeName))&&bt.push(jt(et,en))}),Promise.all(bt).then(function(){return et=Nn,new Promise(function(zt){var Ve={},tt=V.map(function(Lt){return Lt.createBufferSinks(et)});Promise.all(tt).then(function(Lt){Lt.forEach(function(yn){yn&&(Ve[yn.getType()]=yn)}),zt(Ve)}).catch(function(){zt(Ve)})});var et}).then(function(et){if(Te=!1,V.length===0){var zt="No streams to play.";je.error(new ce.Z(we.MANIFEST_ERROR_ID_NOSTREAMS_CODE,zt,q.getValue())),j.fatal(zt)}else kn();en&&ct.createTracks(pt),Pn(et)}).catch(function(et){On(et)})})}function jt(en,Nn){var Pn,On=te.getAllMediaInfoForType(pt,en),Dn=[],bt=null;if(!On||On.length===0)return j.info("No "+en+" data."),Promise.resolve();en===E.Z.VIDEO&&(re=!0),en===E.Z.AUDIO&&(de=!0);for(var et=0,zt=On.length;et<zt;et++)bt=On[et],en===E.Z.TEXT&&bt.isEmbedded&&(ct.addEmbeddedTrack(pt,bt),Dn.push(bt)),Zt(bt)&&$e.addTrack(bt);if(Dn.length>0&&($e.setInitialMediaSettingsForType(en,pt),ct.addMediaInfosToBuffer(pt,en,Dn)),On=On.filter(function(tt){return!tt.isEmbedded}),On.length===0)return Promise.resolve();if(en===E.Z.IMAGE)return(_e=Tu(ke).create({streamInfo:pt,adapter:te,baseURLController:k.baseURLController,timelineConverter:k.timelineConverter,debug:Ze,eventBus:Ie,events:T.Z,dashConstants:y.Z,dashMetrics:k.dashMetrics,segmentBaseController:k.segmentBaseController})).initialize(),Promise.resolve();Ie.trigger(T.Z.STREAM_INITIALIZING,{streamInfo:pt,mediaInfo:bt}),$e.setInitialMediaSettingsForType(en,pt);var Ve=function(tt,Lt){var yn=tt&&tt.length>0?tt[0]:null,bn=ie.getModel(yn?yn.type:null),yr=yn?yn.type:null,oi=yn?yn.mimeType:null,gi=yn?yn.isFragmented:null,Xr=_n(ke).create({streamInfo:pt,type:yr,mimeType:oi,timelineConverter:Pe,adapter:te,manifestModel:q,mediaPlayerModel:le,fragmentModel:bn,dashMetrics:k.dashMetrics,baseURLController:k.baseURLController,segmentBaseController:k.segmentBaseController,abrController:Me,playbackController:ve,mediaController:$e,textController:ct,errHandler:je,settings:Gt,boxParser:Oe,segmentBlacklistController:ye});Xr.initialize(Lt,re,gi),V.push(Xr);for(var Lo=0;Lo<tt.length;Lo++)Xr.addMediaInfo(tt[Lo]);return yr===E.Z.TEXT&&ct.addMediaInfosToBuffer(pt,yr,tt,bn),Xr}(On,Nn);return(Pn=$e.getCurrentTrackFor(en,pt.id))?(Me.updateTopQualityIndex(Pn),Ve.selectMediaInfo(en===E.Z.TEXT&&Pn.isEmbedded?On[0]:Pn)):Promise.resolve()}function Zt(en){var Nn,Pn=en?en.type:null;return Pn===E.Z.MUXED?(Nn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",j.fatal(Nn),je.error(new ce.Z(we.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Nn,q.getValue())),!1):!(Pn!==E.Z.TEXT&&Pn!==E.Z.IMAGE&&en.contentProtection&&!xe.supportsEncryptedMedia()&&(je.error(new ce.Z(we.CAPABILITY_MEDIAKEYS_ERROR_CODE,we.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function xn(en){for(var Nn=V?V.length:0,Pn=0;Pn<Nn;Pn++){var On=V[Pn].getFragmentModel();On.abortRequests(),On.resetInitialSettings(),V[Pn].reset(!1,en)}ct&&ct.deactivateStream(pt),V=[],ee=!1,H=!1,qn(!1),St(!1),Ie.trigger(T.Z.STREAM_DEACTIVATED,{streamInfo:pt})}function at(en){xn(en),W=!1,re=!1,de=!1,Ae={},Te=!1,We=!1,Se=[]}function St(en){We=en}function Qt(){return pt?pt.start:NaN}function Pt(){return pt?pt.id:null}function un(){return pt}function an(){if(!yt||!Me)throw new Error(E.Z.MISSING_CONFIG_ERROR)}function Jt(en){en.error&&(je.error(en.error),j.fatal(en.error.message))}function Bn(){if(De){var en=te.getEventsFor(pt);en&&en.length>0&&De.addInlineEvents(en,pt.id)}}function kn(){for(var en=V.length,Nn=Ae.audio||Ae.video?new ce.Z(we.DATA_UPDATE_FAILED_ERROR_CODE,we.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,Pn=0;Pn<en;Pn++)if(V[Pn].isUpdating()||Te)return;if(mt){mt.clearMediaInfoArray();for(var On=0;On<en&&V[On];On++){var Dn=V[On].getType(),bt=V[On].getMediaInfo();if(Dn===E.Z.AUDIO||Dn===E.Z.VIDEO||Dn===E.Z.TEXT&&bt.isFragmented){var et=V[On].getMediaInfo();et&&mt.initializeForMedia(et)}}mt.handleKeySystemFromManifest()}Nn?je.error(Nn):W||(W=!0,yt.waitForReadyState(E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){Ie.trigger(T.Z.STREAM_INITIALIZED,{streamInfo:pt})}))}function mr(){var en=mn(),Nn=en.length;if(Nn!==0){for(var Pn=0;Pn<Nn;Pn++)if(!en[Pn].isBufferingCompleted()&&(en[Pn].getType()===E.Z.AUDIO||en[Pn].getType()===E.Z.VIDEO))return void j.debug("onBufferingCompleted - One streamProcessor has finished but",en[Pn].getType(),"one is not buffering completed");j.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),H=!0,Ie.trigger(T.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:pt},{streamInfo:pt})}else j.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function vr(en){Ae[en.mediaType]=en.error,kn()}function Ct(en){De&&De.addInbandEvents(en.events,pt.id)}function tn(en){return en&&en.type?qt(en.type):null}function qt(en){return en?mn().filter(function(Nn){return Nn.getType()===en})[0]:null}function mn(){for(var en,Nn,Pn=[],On=0;On<V.length;On++)(en=(Nn=V[On]).getType())!==E.Z.AUDIO&&en!==E.Z.VIDEO&&en!==E.Z.TEXT||Pn.push(Nn);return Pn}function Cn(en,Nn){var Pn=un(),On=Nn.getStreamInfo();if(!On||!Pn)return!0;var Dn=te.getAdaptationForType(On.index,en,On),bt=te.getAdaptationForType(Pn.index,en,Pn);return Dn&&bt?!(!Zn(bt)&&Zn(Dn)):!Dn&&!bt}function Zn(en){return!!en&&!!(en.ContentProtection||en.Representation_asArray&&en.Representation_asArray.length>0&&en.Representation_asArray[0].ContentProtection)}function Fn(en,Nn){var Pn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!en||!en.hasOwnProperty("getStreamInfo"))return!1;var On=en.getStreamInfo(),Dn=Pn?Pn.getStreamInfo():un();if(!On||!Dn)return!1;var bt=te.getAdaptationForType(On.index,Nn,On),et=te.getAdaptationForType(Dn.index,Nn,Dn);if(!bt||!et)return!bt&&!et;var zt=bt&&et&&bt.mimeType===et.mimeType,Ve=et.Representation_asArray.map(function(bn){return bn.codecs}),tt=bt.Representation_asArray.map(function(bn){return bn.codecs}),Lt=tt.some(function(bn){return Ve.indexOf(bn)>-1}),yn=tt.some(function(bn){return Ve.some(function(yr){return xe.codecRootCompatibleWithCodec(yr,bn)})});return Lt||yn&&zt}function qn(en){ze=en}function Yn(){return ze}return O={initialize:function(){Ie.on(T.Z.BUFFERING_COMPLETED,mr,O),Ie.on(T.Z.DATA_UPDATE_COMPLETED,vr,O),Ie.on(T.Z.INBAND_EVENTS,Ct,O),mt&&(Ie.on(T.Z.KEY_ERROR,Jt,O),Ie.on(T.Z.SERVER_CERTIFICATE_UPDATED,Jt,O),Ie.on(T.Z.LICENSE_REQUEST_COMPLETE,Jt,O),Ie.on(T.Z.KEY_SYSTEM_SELECTED,Jt,O),Ie.on(T.Z.KEY_SESSION_CREATED,Jt,O),Ie.on(T.Z.KEY_STATUSES_CHANGED,Jt,O)),ct.initializeForStream(pt),Ie.trigger(T.Z.STREAM_UPDATED,{streamInfo:pt})},getStreamId:function(){return pt?pt.id:null},activate:function(en,Nn){return new Promise(function(Pn,On){if(!ee)return Yn()?(ee=!0,Ie.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:pt}),void Pn(Nn)):void function(Dn,bt){return Vt(Dn,bt)}(en,Nn).then(function(Dn){ee=!0,Ie.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:pt}),Pn(Dn)}).catch(function(Dn){On(Dn)});Pn(Nn)})},deactivate:xn,getIsActive:function(){return ee},getDuration:function(){return pt?pt.duration:NaN},getStartTime:Qt,getId:Pt,getStreamInfo:un,getHasAudioTrack:function(){return de},getHasVideoTrack:function(){return re},startPreloading:function(en,Nn){return new Promise(function(Pn,On){Yn()?On():(j.info("[startPreloading] Preloading next stream with id ".concat(Pt())),qn(!0),Vt(en,Nn).then(function(){for(var Dn=0;Dn<V.length&&V[Dn];Dn++)V[Dn].setExplicitBufferingTime(Qt()),V[Dn].getScheduleController().startScheduleTimer();Pn()}).catch(function(){qn(!1),On()}))})},initializeForTextWithMediaSource:function(en){return new Promise(function(Nn,Pn){jt(E.Z.TEXT,en).then(function(){return(On=qt(E.Z.TEXT))?On.createBufferSinks():Promise.resolve();var On}).then(function(){ct.createTracks(pt),Nn()}).catch(function(On){Pn(On)})})},getThumbnailController:function(){return _e},getBitrateListFor:function(en){if(an(),en===E.Z.IMAGE)return _e?_e.getBitrateList():[];var Nn=function(Pn){for(var On=null,Dn=0;Dn<V.length;Dn++)if((On=V[Dn]).getType()===Pn)return On.getMediaInfo();return null}(en);return Me.getBitrateList(Nn)},updateData:function(en){return new Promise(function(Nn){Te=!0,pt=en,De&&Bn();for(var Pn=[],On=0,Dn=V.length;On<Dn;On++){var bt=V[On],et=bt.getMediaInfo();Pn.push(bt.updateStreamInfo(pt));var zt=te.getAllMediaInfoForType(pt,bt.getType());if(zt=zt.filter(function(Lt){return!Lt.isEmbedded})){bt.clearMediaInfoArray();for(var Ve=0;Ve<zt.length;Ve++){var tt=zt[Ve];bt.addMediaInfo(zt[Ve]),te.areMediaInfosEqual(et,tt)&&(Me.updateTopQualityIndex(tt),Pn.push(bt.selectMediaInfo(tt)))}}}Promise.all(Pn).then(function(){for(Pn=[];Se.length>0;){var Lt=Se.pop(),yn=Lt.newMediaInfo,bn=tn(Lt.oldMediaInfo);if(!bn)return;Pn.push(bn.prepareTrackSwitch()),Pn.push(bn.selectMediaInfo(yn))}return Promise.all(Pn)}).then(function(){Te=!1,kn(),Ie.trigger(T.Z.STREAM_UPDATED,{streamInfo:pt}),Nn()})})},reset:function(en){ie&&(ie.reset(),ie=null),Me&&pt&&Me.clearDataForStream(pt.id),ye&&(ye.reset(),ye=null),at(en),pt=null,Ie.off(T.Z.DATA_UPDATE_COMPLETED,vr,O),Ie.off(T.Z.BUFFERING_COMPLETED,mr,O),Ie.off(T.Z.INBAND_EVENTS,Ct,O),mt&&(Ie.off(T.Z.KEY_ERROR,Jt,O),Ie.off(T.Z.SERVER_CERTIFICATE_UPDATED,Jt,O),Ie.off(T.Z.LICENSE_REQUEST_COMPLETE,Jt,O),Ie.off(T.Z.KEY_SYSTEM_SELECTED,Jt,O),Ie.off(T.Z.KEY_SESSION_CREATED,Jt,O),Ie.off(T.Z.KEY_STATUSES_CHANGED,Jt,O))},getProcessors:mn,setMediaSource:function(en){return new Promise(function(Nn,Pn){for(var On=[],Dn=0;Dn<V.length;)Zt(V[Dn].getMediaInfo())?(On.push(V[Dn].setMediaSource(en)),Dn++):(V[Dn].reset(),V.splice(Dn,1));Promise.all(On).then(function(){for(var bt=0;bt<V.length;bt++)V[bt].dischargePreBuffer();if(V.length===0){var et="No streams to play.";je.error(new ce.Z(we.MANIFEST_ERROR_ID_NOSTREAMS_CODE,et+"nostreams",q.getValue())),j.fatal(et)}Nn()}).catch(function(bt){j.error(bt),Pn(bt)})})},isMediaCodecCompatible:function(en){var Nn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Fn(en,E.Z.VIDEO,Nn)&&Fn(en,E.Z.AUDIO,Nn)},isProtectionCompatible:function(en){return!en||Cn(E.Z.VIDEO,en)&&Cn(E.Z.AUDIO,en)},getPreloaded:Yn,getIsEndedEventSignaled:function(){return We},setIsEndedEventSignaled:St,getAdapter:function(){return te},getHasFinishedBuffering:function(){return H},setPreloaded:qn,startScheduleControllers:function(){for(var en=V.length,Nn=0;Nn<en&&V[Nn];Nn++)V[Nn].getScheduleController().startScheduleTimer()},prepareTrackChange:function(en){if(ee&&pt){H=!1;var Nn=en.newMediaInfo,Pn=q.getValue();te.setCurrentMediaInfo(pt.id,Nn.type,Nn);var On=tn(Nn);if(On){var Dn=ve.getTime();j.info("Stream -  Process track changed at current time "+Dn),Pn.refreshManifestOnSwitchTrack?(Se.push(en),ue.getIsUpdating()||(j.debug("Stream -  Refreshing manifest for switch track"),ue.refreshManifest())):On.selectMediaInfo(Nn).then(function(){Nn.type!==E.Z.VIDEO&&Nn.type!==E.Z.AUDIO||Me.updateTopQualityIndex(Nn),On.prepareTrackSwitch()})}}},prepareQualityChange:function(en){var Nn=qt(en.mediaType);Nn&&Nn.prepareQualityChange(en)}},function(){try{Ze=(0,M.Z)(ke).getInstance(),j=Ze.getLogger(O),at(),Oe=(0,Hu.Z)(ke).getInstance(),ye=qs(ke).create({updateEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),ie=Ah(ke).create({streamInfo:pt,mediaPlayerModel:le,dashMetrics:ae,errHandler:je,settings:Gt,boxParser:Oe,dashConstants:y.Z,urlUtils:Ge})}catch(en){throw en}}(),O}sr.__dashjs_factory_name="Stream";var ei=F.Z.getClassFactory(sr),Io=function k(O){(function(j,V){if(!(j instanceof V))throw new TypeError("Cannot call a class as a function")})(this,k),this.url=O||null,this.type=st.w.CONTENT_STEERING_TYPE,this.responseType="json"},Eo=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function Hi(){var k,O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze,Oe=this.context,Ze=(0,wt.Z)(Oe).getInstance();function We(Me){q(Me,"baseUrl")}function Se(Me){q(Me,"location")}function ke(Me){if(Me&&Me.request&&Me.request.serviceLocation&&Me.request.requestStartDate&&Me.request.requestEndDate&&!isNaN(Me.request.bytesTotal)){var ve=Me.request.serviceLocation,De=Me.request.requestEndDate.getTime()-Me.request.requestStartDate.getTime();Ge(ve,parseInt(8*Me.request.bytesTotal/De*1e3))}}function Ie(Me){Me&&Me.httpRequest&&Me.httpRequest._serviceLocation&&!isNaN(Me.throughput)&&Ge(Me.httpRequest._serviceLocation,1e3*Me.throughput)}function Ge(Me,ve){W[Me]||(W[Me]=[]),W[Me].push(ve),W[Me].length>4&&W[Me].shift()}function q(Me,ve){if(Me&&Me.request&&Me.request.serviceLocation){var De=Me.request.serviceLocation;V[ve].all.indexOf(De)===-1&&V[ve].all.push(De),V[ve].current=De}}function le(){var Me=Te.getValue(),ve=ze.getContentSteering(Me);return ve||(ve=_e.getServiceDescriptionSettings().contentSteering),ve}function ae(){return new Promise(function(Me){try{var ve=le();if(!ve||!ve.serverUrl)return void Me();var De=function(mt){var ct=mt.serverUrl;j&&j.reloadUri&&(ct=Ze.isRelative(j.reloadUri)?Ze.resolve(j.reloadUri,mt.serverUrl):j.reloadUri);var yt=[],pt=V.baseUrl.all.concat(V.location.all);if(pt.length>0){var Gt=pt.map(function(Zt){var xn=function(at){if(!at||!W[at]||W[at].length===0)return-1;var St=W[at].reduce(function(Qt,Pt){return Qt+Pt})/W[at].length;return parseInt(St)}(Zt);return{serviceLocation:Zt,throughput:xn}});Gt.sort(function(Zt,xn){return xn.throughput-Zt.throughput});var Vt="",jt="";Gt.forEach(function(Zt,xn){xn!==0&&(Vt="".concat(Vt,","),Zt.throughput>-1&&(jt="".concat(jt,","))),Vt="".concat(Vt).concat(Zt.serviceLocation),Zt.throughput>-1&&(jt="".concat(jt).concat(Zt.throughput))}),yt.push({key:"_DASH_pathway",value:'"'.concat(Vt,'"')}),yt.push({key:"_DASH_throughput",value:jt})}return ct=dn.Z.addAditionalQueryParameterToUrl(ct,yt)}(ve),$e=new Io(De);H.load({request:$e,success:function(mt){(function(ct){ct&&ct[y.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(ct[y.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((j=new Eo).version=ct[y.Z.CONTENT_STEERING_RESPONSE.VERSION],ct[y.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(ct[y.Z.CONTENT_STEERING_RESPONSE.TTL])&&(j.ttl=ct[y.Z.CONTENT_STEERING_RESPONSE.TTL]),ct[y.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(j.reloadUri=ct[y.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),ct[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(j.pathwayPriority=ct[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),ct[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(j.pathwayClones=ct[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],j.pathwayClones=j.pathwayClones.filter(function(yt){return function(pt){return pt[y.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&pt[y.Z.CONTENT_STEERING_RESPONSE.ID]&&pt[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&pt[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][y.Z.CONTENT_STEERING_RESPONSE.HOST]}(yt)})),Pe())})(mt),ye.trigger(_.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:j,url:De}),Me()},error:function(mt,ct,yt,pt){(function(Gt,Vt){try{switch(O.warn("Error fetching data from content steering server",Gt),Vt.status){case 410:break;case 429:var jt=Vt&&Vt.getResponseHeader?Vt.getResponseHeader("retry-after"):null;jt!==null&&(j||(j={}),j.ttl=parseInt(jt)),Pe();break;default:Pe()}}catch(Zt){O.error(Zt)}})(mt,pt),Me(mt)},complete:function(){V.baseUrl.all=ue(V.baseUrl),V.location.all=ue(V.location)}})}catch(mt){Me(mt)}})}function ue(Me){return Me.all&&Me.all.length!==0&&Me.current?Me.all.filter(function(ve){return ve===Me.current}):[]}function te(Me){try{var ve=[];return Me&&Me.length!==0&&j&&j.pathwayClones&&j.pathwayClones.length!==0&&j.pathwayClones.forEach(function(De){var $e=Me.filter(function(Gt){return De[y.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===Gt.serviceLocation}),mt=null;if($e&&$e.length>0&&(mt=$e[0]),mt){var ct=new URL(mt.url),yt=De[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][y.Z.CONTENT_STEERING_RESPONSE.HOST];yt=dn.Z.stringHasProtocol(yt)?yt:"".concat(ct.protocol,"//").concat(yt);var pt={synthesizedUrl:"".concat(yt).concat(ct.pathname),serviceLocation:De[y.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:De[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][y.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:mt};ve.push(pt)}}),ve}catch(De){return O.error(De),[]}}function Pe(){j&&j.ttl&&!isNaN(j.ttl)&&(ee&&clearTimeout(ee),ee=setTimeout(function(){ae()},1e3*j.ttl))}function xe(){ee&&clearTimeout(ee),ee=null}function je(){j=null,W={},V={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},xe()}return k={reset:function(){je(),ye.off(_.Z.FRAGMENT_LOADING_STARTED,We,k),ye.off(_.Z.MANIFEST_LOADING_STARTED,Se,k),ye.off(_.Z.MANIFEST_LOADING_FINISHED,ke,k),ye.off(_.Z.THROUGHPUT_MEASUREMENT_STORED,Ie,k)},setConfig:function(Me){Me&&(Me.adapter&&(ze=Me.adapter),Me.errHandler&&(re=Me.errHandler),Me.dashMetrics&&(de=Me.dashMetrics),Me.mediaPlayerModel&&(Ae=Me.mediaPlayerModel),Me.requestModifier&&(ie=Me.requestModifier),Me.manifestModel&&(Te=Me.manifestModel),Me.serviceDescriptionController&&(_e=Me.serviceDescriptionController),Me.eventBus&&(ye=Me.eventBus))},loadSteeringData:ae,getCurrentSteeringResponseData:function(){return j},shouldQueryBeforeStart:function(){var Me=le();return!!Me&&Me.queryBeforeStart},getSteeringDataFromManifest:le,stopSteeringRequestTimer:xe,getSynthesizedBaseUrlElements:function(Me){try{return te(Me).map(function(ve){var De=new nr(ve.synthesizedUrl,ve.serviceLocation);return De.queryParams=ve.queryParams,De.dvbPriority=ve.reference.dvbPriority,De.dvbWeight=ve.reference.dvbWeight,De.availabilityTimeOffset=ve.reference.availabilityTimeOffset,De.availabilityTimeComplete=ve.reference.availabilityTimeComplete,De})}catch(ve){return O.error(ve),[]}},getSynthesizedLocationElements:function(Me){try{return te(Me).map(function(ve){var De=new zn(ve.synthesizedUrl,ve.serviceLocation);return De.queryParams=ve.queryParams,De})}catch(ve){return O.error(ve),[]}},initialize:function(){H=Ci(Oe).create({errHandler:re,dashMetrics:de,mediaPlayerModel:Ae,requestModifier:ie,errors:we}),ye.on(_.Z.FRAGMENT_LOADING_STARTED,We,k),ye.on(_.Z.MANIFEST_LOADING_STARTED,Se,k),ye.on(_.Z.MANIFEST_LOADING_FINISHED,ke,k),ye.on(_.Z.THROUGHPUT_MEASUREMENT_STORED,Ie,k)}},O=(0,M.Z)(Oe).getInstance().getLogger(k),je(),k}Hi.__dashjs_factory_name="ContentSteeringController";var Vi=F.Z.getSingletonFactory(Hi);function Er(){var k,O,j,V=this.context,W=(0,qe.Z)(V).getInstance();return k={select:function(ee){if(!ee||ee.length===0)return null;var H=null;return W.get().streaming.applyContentSteering&&(H=function(re){var de=j.getCurrentSteeringResponseData();return de&&de.pathwayPriority&&de.pathwayPriority.length>0?function(){for(var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ie=0,_e=null,ye=function(){var ze=Ae[ie],Oe=Te.findIndex(function(Ze){return Ze.serviceLocation&&Ze.serviceLocation===ze});if(Oe!==-1&&!O.contains(Te[Oe].serviceLocation))return _e=Te[Oe],"break";ie+=1};ie<Ae.length&&ye()!=="break";);return _e}(de.pathwayPriority,re):null}(ee)),H||(H=function(re){return re[0]}(ee)),H},setConfig:function(ee){ee.blacklistController&&(O=ee.blacklistController),ee.contentSteeringController&&(j=ee.contentSteeringController)},reset:function(){O.reset()}},O=qs(V).create({updateEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),j=Vi(V).getInstance(),k}Er.__dashjs_factory_name="LocationSelector";var Po=F.Z.getClassFactory(Er);function yc(){var k,O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze=this.context,Oe=(0,g.Z)(ze).getInstance(),Ze=(0,wt.Z)(ze).getInstance();function We(){j=NaN,H=!1,W=!0,ee=!1,Se()}function Se(){V!==null&&(clearTimeout(V),V=null)}function ke(xe){Se(),ee||(isNaN(xe)&&!isNaN(j)&&(xe=1e3*j),isNaN(xe)||(O.debug("Refresh manifest in "+xe+" milliseconds."),V=setTimeout(le,xe)))}function Ie(){var xe=arguments.length>0&&arguments[0]!==void 0&&arguments[0];H=!0;var je=de.getValue(),Me=je.url,ve=null,De=Te.getPatchLocation(je),$e=Ae.select(De),mt=null;if($e&&!xe)Me=$e.url,ve=$e.serviceLocation,mt=$e.queryParams;else{var ct=Ge(je),yt=Ae.select(ct);yt&&(Me=yt.url,ve=yt.serviceLocation,mt=yt.queryParams)}Ze.isRelative(Me)&&(Me=Ze.resolve(Me,je.url)),re.load(Me,ve,mt)}function Ge(xe){var je=Te.getLocation(xe),Me=_e.getSynthesizedLocationElements(je);return je.concat(Me)}function q(xe){if(xe){if(Te.getIsPatch(xe)){var je=xe;xe=de.getValue();var Me=Te.isPatchValid(xe,je),ve=Me;if(Me){var De=Te.getPublishTime(xe);ve=Te.applyPatchToManifest(xe,je);var $e=Te.getPublishTime(xe);ve=De.getTime()!=$e.getTime()}if(!ve)return O.debug("Patch provided is invalid, performing full manifest refresh"),void Ie(!0);xe.loadedTime=new Date}}else(xe=de.getValue()).loadedTime=new Date;if(de.getValue()&&de.getValue().type===y.Z.DYNAMIC&&xe.type===y.Z.STATIC)return Oe.trigger(T.Z.DYNAMIC_TO_STATIC),H=!1,void(ee=!0);de.setValue(xe);var mt=new Date,ct=(mt.getTime()-xe.loadedTime.getTime())/1e3;1e3*(j=Te.getManifestUpdatePeriod(xe,ct))>2147483647&&(j=2147483647e-3),Oe.trigger(T.Z.MANIFEST_UPDATED,{manifest:xe}),O.info("Manifest has been refreshed at "+mt+"["+mt.getTime()/1e3+"] "),W||ke()}function le(){W||(H?ke(ye.get().streaming.manifestUpdateRetryInterval):Ie())}function ae(xe){xe.error?xe.error.code===we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ie.error(xe.error):q(xe.manifest)}function ue(){W=!1,ke()}function te(){(W=!ye.get().streaming.scheduling.scheduleWhilePaused)&&Se()}function Pe(){H=!1}return k={initialize:function(){We(),Oe.on(T.Z.STREAMS_COMPOSED,Pe,this),Oe.on(_.Z.PLAYBACK_STARTED,ue,this),Oe.on(_.Z.PLAYBACK_PAUSED,te,this),Oe.on(T.Z.INTERNAL_MANIFEST_LOADED,ae,this)},setManifest:function(xe){q(xe)},refreshManifest:Ie,getIsUpdating:function(){return H},setConfig:function(xe){xe&&(xe.manifestModel&&(de=xe.manifestModel),xe.adapter&&(Te=xe.adapter),xe.manifestLoader&&(re=xe.manifestLoader),xe.errHandler&&(ie=xe.errHandler),xe.locationSelector&&(Ae=xe.locationSelector),xe.settings&&(ye=xe.settings),xe.contentSteeringController&&(_e=xe.contentSteeringController))},reset:function(){Oe.off(_.Z.PLAYBACK_STARTED,ue,this),Oe.off(_.Z.PLAYBACK_PAUSED,te,this),Oe.off(T.Z.STREAMS_COMPOSED,Pe,this),Oe.off(T.Z.INTERNAL_MANIFEST_LOADED,ae,this),We()}},O=(0,M.Z)(ze).getInstance().getLogger(k),Ae=Po(ze).create(),k}yc.__dashjs_factory_name="ManifestUpdater";var Ka=F.Z.getClassFactory(yc);function _s(){var k,O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze,Oe,Ze=this.context,We=(0,g.Z)(Ze).getInstance(),Se=(0,wt.Z)(Ze).getInstance();function ke(){re=[],de=[],Ae=null,Te=null,_e=null,ie=NaN,j=!1,V=!1,ye=W.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Ie(){W.get().streaming.utcSynchronization.enabled&&!j&&!V&&_e&&_e.value&&_e.schemeIdUri&&!isNaN(ie)&&!isNaN(W.get().streaming.utcSynchronization.backgroundAttempts)&&(Te&&(Date.now()-Te)/1e3<30||(re=[],V=!0,Ge(isNaN(W.get().streaming.utcSynchronization.backgroundAttempts)?2:W.get().streaming.utcSynchronization.backgroundAttempts)))}function Ge(yt){try{if(yt<=0)return void mt();var pt=Date.now();ee[_e.schemeIdUri](_e.value,function(Gt){var Vt=Date.now(),jt=le(pt,Vt,Gt);re.push(jt),Ge(yt-1)},function(){mt()})}catch(Gt){mt()}}function q(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,pt=yt||0;if(!de||de.length===0||pt>=de.length)ae();else{var Gt=de[pt];if(Gt)if(ee.hasOwnProperty(Gt.schemeIdUri)){var Vt=new Date().getTime();ee[Gt.schemeIdUri](Gt.value,function(jt){var Zt=new Date().getTime(),xn=le(Vt,Zt,jt);_e=Gt,ae(xn)},function(){q(pt+1)})}else q(pt+1);else ae()}}function le(yt,pt,Gt){return Gt-(pt-(pt-yt)/2)}function ae(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,pt=isNaN(yt);pt&&W.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?De():$e(pt,yt)}function ue(yt){var pt=Date.parse(yt);return isNaN(pt)&&(pt=function(Gt){var Vt,jt,Zt=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(Gt);return Vt=Date.UTC(parseInt(Zt[1],10),parseInt(Zt[2],10)-1,parseInt(Zt[3],10),parseInt(Zt[4],10),parseInt(Zt[5],10),Zt[6]&&(parseInt(Zt[6],10)||0),Zt[7]&&1e3*parseFloat(Zt[7])||0),Zt[9]&&Zt[10]&&(jt=60*parseInt(Zt[9],10)+parseInt(Zt[10],10),Vt+=(Zt[8]==="+"?-1:1)*jt*60*1e3),new Date(Vt).getTime()}(yt)),pt}function te(yt){return Date.parse(yt)}function Pe(yt){return Date.parse(yt)}function xe(yt,pt,Gt){Gt()}function je(yt,pt,Gt){var Vt=ue(yt);isNaN(Vt)?Gt():pt(Vt)}function Me(yt,pt,Gt,Vt,jt){var Zt,xn,at=!1,St=new XMLHttpRequest,Qt=jt?st.w.HEAD:st.w.GET,Pt=pt.match(/\S+/g);if(pt=Pt.shift(),Zt=function(){at||(at=!0,Pt.length?Me(yt,Pt.join(" "),Gt,Vt,jt):Vt())},xn=function(){var an,Jt;St.status===200&&(an=jt?St.getResponseHeader("Date"):St.response,Jt=yt(an),isNaN(Jt)||(Gt(Jt),at=!0))},Se.isRelative(pt)){var un=Oe.resolve();un&&(pt=Se.resolve(pt,un.url))}St.open(Qt,pt),St.timeout=5e3,St.onload=xn,St.onloadend=Zt,St.send()}function ve(yt,pt,Gt){Me(Pe,yt,pt,Gt,!0)}function De(){var yt=H.getLatestMPDRequestHeaderValueByID("Date"),pt=yt!==null?new Date(yt).getTime():Number.NaN;isNaN(pt)?$e(!0):$e(!1,pt-Date.now())}function $e(yt,pt){if(isNaN(ie)||isNaN(pt)||yt||function(Vt){try{var jt,Zt=ct(Vt),xn=isNaN(ye)?30:ye,at=isNaN(W.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:W.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,St=isNaN(W.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:W.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Qt=isNaN(W.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:W.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Zt?(jt=Math.min(xn*at,St),O.debug("Increasing timeBetweenSyncAttempts to ".concat(jt))):(jt=Math.max(xn/at,Qt),O.debug("Decreasing timeBetweenSyncAttempts to ".concat(jt))),ye=jt}catch(Pt){}}(pt),!yt&&!isNaN(pt)){Ae=Date.now(),j=!1;var Gt=isNaN(ie);ie=pt,Gt&&Ie(),O.debug("Completed UTC sync. Setting client - server offset to ".concat(pt))}yt&&(_e=null,j=!1,ze.error(new ce.Z(we.TIME_SYNC_FAILED_ERROR_CODE,we.TIME_SYNC_FAILED_ERROR_MESSAGE))),We.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:pt}),We.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED)}function mt(){if(re&&re.length!==0){var yt=re.reduce(function(pt,Gt){return pt+Gt},0)/re.length;ct(yt)?O.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(O.debug("Completed background UTC sync. Setting client - server offset to ".concat(yt)),ie=yt,We.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ie})),V=!1,Te=Date.now()}}function ct(yt){try{if(isNaN(ie))return!0;var pt=W.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(W.get().streaming.utcSynchronization.maximumAllowedDrift)?W.get().streaming.utcSynchronization.maximumAllowedDrift:100;return yt>=ie-pt&&yt<=ie+pt}catch(Gt){return!0}}return k={initialize:function(){ke(),ee={"urn:mpeg:dash:utc:http-head:2014":ve,"urn:mpeg:dash:utc:http-xsdate:2014":Me.bind(null,ue),"urn:mpeg:dash:utc:http-iso:2014":Me.bind(null,te),"urn:mpeg:dash:utc:direct:2014":je,"urn:mpeg:dash:utc:http-head:2012":ve,"urn:mpeg:dash:utc:http-xsdate:2012":Me.bind(null,ue),"urn:mpeg:dash:utc:http-iso:2012":Me.bind(null,te),"urn:mpeg:dash:utc:direct:2012":je,"urn:mpeg:dash:utc:http-ntp:2014":xe,"urn:mpeg:dash:utc:ntp:2014":xe,"urn:mpeg:dash:utc:sntp:2014":xe}},attemptSync:function(yt,pt){de=yt,j||(function(Gt){try{if(!Gt||!W.get().streaming.utcSynchronization.enabled)return!1;var Vt=isNaN(ye)?30:ye;return!(Ae&&Vt&&!isNaN(Vt))||(Date.now()-Ae)/1e3>=Vt}catch(jt){return!0}}(pt)?(j=!0,q()):We.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(yt){yt&&(yt.dashMetrics&&(H=yt.dashMetrics),yt.baseURLController&&(Oe=yt.baseURLController),yt.errHandler&&(ze=yt.errHandler),yt.settings&&(W=yt.settings))},reset:function(){ke(),We.off(T.Z.ATTEMPT_BACKGROUND_SYNC,Ie,k)}},O=(0,M.Z)(Ze).getInstance().getLogger(k),We.on(T.Z.ATTEMPT_BACKGROUND_SYNC,Ie,k),k}_s.__dashjs_factory_name="TimeSyncController";var Ia=F.Z.getSingletonFactory(_s);Ia.HTTP_TIMEOUT_MS=5e3,F.Z.updateSingletonFactory(_s.__dashjs_factory_name,Ia);var yf=Ia;function Ec(){var k,O,j,V,W,ee=this.context,H=(0,g.Z)(ee).getInstance();return k={attachMediaSource:function(re){var de=window.URL.createObjectURL(O);return re.setSource(de),V==="managedMediaSource"&&(re.setDisableRemotePlayback(!0),O.addEventListener("startstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),O.addEventListener("endstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),de},createMediaSource:function(){var re="WebKitMediaSource"in window,de="MediaSource"in window;return"ManagedMediaSource"in window?(O=new ManagedMediaSource,V="managedMediaSource",W.info("Created ManagedMediaSource")):de?(O=new MediaSource,V="mediaSource",W.info("Created MediaSource")):re&&(O=new WebKitMediaSource,W.info("Created WebkitMediaSource")),O},detachMediaSource:function(re){re.setSource(null)},setConfig:function(re){re&&re.settings&&(j=re.settings)},setDuration:function re(de){O&&O.readyState==="open"&&(de===null&&isNaN(de)||O.duration!==de&&(de!==1/0||j.get().streaming.buffer.mediaSourceDurationInfinity||(de=Math.pow(2,32)),function(Ae){for(var Te=Ae.sourceBuffers,ie=0;ie<Te.length;ie++)if(Te[ie].updating)return!0;return!1}(O)?setTimeout(re.bind(null,de),50):(W.info("Set MediaSource duration:"+de),O.duration=de)))},setSeekable:function(re,de){O&&typeof O.setLiveSeekableRange=="function"&&typeof O.clearLiveSeekableRange=="function"&&O.readyState==="open"&&re>=0&&re<de&&(O.clearLiveSeekableRange(),O.setLiveSeekableRange(re,de))},signalEndOfStream:function(re){if(re&&re.readyState==="open"){for(var de=re.sourceBuffers,Ae=0;Ae<de.length;Ae++)if(de[Ae].updating||de[Ae].buffered.length===0)return;W.info("call to mediaSource endOfStream"),re.endOfStream()}}},W=(0,M.Z)(ee).getInstance().getLogger(k),k}Ec.__dashjs_factory_name="MediaSourceController";var Gs=F.Z.getSingletonFactory(Ec);function lo(){var k,O,j,V,W,ee,H,re,de,Ae,Te,ie="urn:mpeg:dash:event:2012",_e="discarded",ye="updated",ze="added",Oe=this.context,Ze=(0,g.Z)(Oe).getInstance();function We(){if(!H||!re)throw new Error("setConfig function has to be called previously")}function Se(){Te=!1,j={},V={},W=null,Ae=!1,ee=Date.now()/1e3}function ke(){try{if(!Ae){Ae=!0;var xe=re.getTime(),je=xe-ee;je=ee>0?Math.max(0,je):0,Ie(V,je,xe),Ie(j,je,xe),Ge(V),Ge(j),ee=xe,Ae=!1}}catch(Me){Ae=!1,O.error(Me)}}function Ie(xe,je,Me){try{ue(xe,function(ve){if(ve!==void 0){var De=isNaN(ve.duration)?0:ve.duration;ve.calculatedPresentationTime<=Me&&ve.calculatedPresentationTime+je+De>=Me?Pe(ve,_.Z.EVENT_MODE_ON_START):(te(Me,De+je,ve.calculatedPresentationTime)||function($e){try{var mt=$e.eventStream.period.start+$e.eventStream.period.duration;return $e.calculatedPresentationTime>mt}catch(ct){return O.error(ct),!1}}(ve))&&(O.debug("Removing event ".concat(ve.id," from period ").concat(ve.eventStream.period.id," as it is expired or invalid")),function($e,mt){try{var ct=mt.eventStream.schemeIdUri,yt=mt.eventStream.period.id,pt=mt.eventStream.value,Gt=mt.id;$e[yt][ct]=$e[yt][ct].filter(function(Vt){return pt&&Vt.eventStream.value&&Vt.eventStream.value!==pt||Vt.id!==Gt}),$e[yt][ct].length===0&&delete $e[yt][ct]}catch(Vt){O.error(Vt)}}(xe,ve))}})}catch(ve){O.error(ve)}}function Ge(xe){try{for(var je in xe)xe.hasOwnProperty(je)&&Object.keys(xe[je]).length===0&&delete xe[je]}catch(Me){O.error(Me)}}function q(xe,je){var Me=arguments.length>2&&arguments[2]!==void 0&&arguments[2],ve=xe.eventStream.schemeIdUri,De=xe.eventStream.value,$e=xe.id,mt=_e;je[ve]||(je[ve]=[]);var ct=je[ve].findIndex(function(pt){return(!De||pt.eventStream.value&&pt.eventStream.value===De)&&pt.id===$e});if(ct===-1)je[ve].push(xe),xe.triggeredReceivedEvent=!1,xe.triggeredStartEvent=!1,mt=ze;else if(Me){var yt=je[ve][ct];xe.triggeredReceivedEvent=yt.triggeredReceivedEvent,xe.triggeredStartEvent=yt.triggeredStartEvent,je[ve][ct]=xe,mt=ye}return mt}function le(xe){try{if(xe.eventStream.value==1){var je,Me=xe.calculatedPresentationTime;je=xe.calculatedPresentationTime==4294967295?NaN:xe.calculatedPresentationTime+xe.duration,Ze.trigger(_.Z.MANIFEST_VALIDITY_CHANGED,{id:xe.id,validUntil:Me,newDuration:je,newManifestValidAfter:NaN},{mode:_.Z.EVENT_MODE_ON_START})}}catch(ve){O.error(ve)}}function ae(xe){try{var je=re.getTime();ue(xe,function(Me){var ve=Me.eventStream&&Me.eventStream.period&&!isNaN(Me.eventStream.period.duration)?Me.eventStream.period.duration:NaN,De=Me.eventStream&&Me.eventStream.period&&!isNaN(Me.eventStream.period.start)?Me.eventStream.period.start:NaN;if(!isNaN(ve)&&!isNaN(De)){var $e=Me.calculatedPresentationTime;Math.abs($e-je)<300&&Pe(Me,_.Z.EVENT_MODE_ON_START)}})}catch(Me){O.error(Me)}}function ue(xe,je){try{if(xe)for(var Me=Object.keys(xe),ve=0;ve<Me.length;ve++)for(var De=xe[Me[ve]],$e=Object.keys(De),mt=0;mt<$e.length;mt++)De[$e[mt]].forEach(function(ct){ct!==void 0&&je(ct)})}catch(ct){O.error(ct)}}function te(xe,je,Me){try{return xe-je>Me}catch(ve){return O.error(ve),!1}}function Pe(xe,je){try{var Me=re.getTime(),ve=xe.id;if(je===_.Z.EVENT_MODE_ON_RECEIVE&&!xe.triggeredReceivedEvent)return O.debug("Received event ".concat(ve)),xe.triggeredReceivedEvent=!0,void Ze.trigger(xe.eventStream.schemeIdUri,{event:xe},{mode:je});xe.triggeredStartEvent||(xe.eventStream.schemeIdUri===ie&&xe.eventStream.value==1?xe.duration===0&&xe.presentationTimeDelta===0||(O.debug("Starting manifest refresh event ".concat(ve," at ").concat(Me)),function(){try{We(),H.refreshManifest()}catch(De){O.error(De)}}()):xe.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&xe.eventStream.value==1?(O.debug("Starting callback event ".concat(ve," at ").concat(Me)),function(De){try{(0,cn.Z)(Oe).create({}).load({method:"get",url:De,request:{responseType:"arraybuffer"}})}catch($e){O.error($e)}}(xe.messageData)):(O.debug("Starting event ".concat(ve," from period ").concat(xe.eventStream.period.id," at ").concat(Me)),Ze.trigger(xe.eventStream.schemeIdUri,{event:xe},{mode:je})),xe.triggeredStartEvent=!0)}catch(De){O.error(De)}}return k={addInlineEvents:function(xe,je){try{if(We(),j[je]||(j[je]={}),xe)for(var Me=0;Me<xe.length;Me++){var ve=xe[Me];if(!te(re.getTime(),isNaN(ve.duration)?0:ve.duration,ve.calculatedPresentationTime)){var De=q(ve,j[je],!0);De===ze?(O.debug("Added inline event with id ".concat(ve.id," from period ").concat(je)),Pe(ve,_.Z.EVENT_MODE_ON_RECEIVE)):De===ye&&O.debug("Updated inline event with id ".concat(ve.id," from period ").concat(je))}}}catch($e){throw $e}},addInbandEvents:function(xe,je){try{We(),V[je]||(V[je]={});for(var Me=0;Me<xe.length;Me++){var ve=xe[Me];te(re.getTime(),isNaN(ve.duration)?0:ve.duration,ve.calculatedPresentationTime)||(q(ve,V[je],!1)===ze?(ve.eventStream.schemeIdUri===ie&&le(ve),O.debug("Added inband event with id ".concat(ve.id," from period ").concat(je)),Pe(ve,_.Z.EVENT_MODE_ON_RECEIVE)):O.debug("Inband event with scheme_id_uri ".concat(ve.eventStream.schemeIdUri,", value ").concat(ve.eventStream.value,", period id ").concat(je," and event id ").concat(ve.id," was ignored because it has been added before.")))}ke()}catch(De){throw De}},getInbandEvents:function(){return V},getInlineEvents:function(){return j},start:function(){try{We(),O.debug("Start Event Controller");var xe=de.get().streaming.eventControllerRefreshDelay;Te||isNaN(xe)||(Te=!0,W=setInterval(ke,xe))}catch(je){throw je}},setConfig:function(xe){try{if(!xe)return;xe.manifestUpdater&&(H=xe.manifestUpdater),xe.playbackController&&(re=xe.playbackController),xe.settings&&(de=xe.settings)}catch(je){throw je}},reset:function(){(function(){try{W!==null&&Te&&(clearInterval(W),W=null,Te=!1,function(){try{ae(V),ae(j)}catch(xe){O.error(xe)}}())}catch(xe){throw xe}})(),Se()}},O=(0,M.Z)(Oe).getInstance().getLogger(k),Se(),k}lo.__dashjs_factory_name="EventController";var Ef=F.Z.getSingletonFactory(lo),Hs={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Ih(k,O){(O==null||O>k.length)&&(O=k.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=k[j];return V}function _c(){var k,O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke,Ie,Ge,q,le,ae,ue,te,Pe,xe,je,Me,ve,De,$e,mt,ct,yt,pt,Gt,Vt,jt,Zt,xn,at,St,Qt,Pt,un,an=this.context,Jt=(0,g.Z)(an).getInstance();function Bn(){if(!(ee&&ee.hasOwnProperty("load")&&Ie&&Ie.hasOwnProperty("initialize")&&Ie.hasOwnProperty("reset")&&Ie.hasOwnProperty("getClientTimeOffset")&&H&&ke&&de&&De))throw new Error(E.Z.MISSING_CONFIG_ERROR)}function kn(){if(!W||!W.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function mr(){(function(){try{var xt=re.getStreamsInfo();if(!q&&xt.length===0)throw new Error("There are no periods in the MPD");q&&xt.length>0&&de.updateManifestUpdateInfo({currentTime:De.getTime(),buffered:ve.getBufferRange(),presentationStartTime:xt[0].start,clientTimeOffset:Ie.getClientTimeOffset()}),Ge.length>0&&function(Cr){Cr.length!==0?Ge=Ge.filter(function(Sn){var or=Cr.filter(function(Jr){return Jr.id===Sn.getId()}).length>0||Sn.getId()===q.getId();return or||(O.debug("Removing stream ".concat(Sn.getId())),Sn.reset(!0)),or}):O.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(xt);for(var Wt=[],Xn=0,Jn=xt.length;Xn<Jn;Xn++){var Tn=xt[Xn];Wt.push(Ct(Tn)),de.addManifestUpdateStreamInfo(Tn)}Promise.all(Wt).then(function(){return new Promise(function(Cr,Sn){q?Cr():tn(xt,Cr,Sn)})}).then(function(){Jt.trigger(T.Z.STREAMS_COMPOSED),bn()}).catch(function(Cr){throw Cr})}catch(Cr){ke.error(new ce.Z(we.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Cr.message+" nostreamscomposed",H.getValue())),je=!0,ji()}})()}function vr(){St=!0}function Ct(xt){var Wt=Zl(xt.id);return Wt?Wt.updateData(xt):(Wt=ei(an).create({manifestModel:H,mediaPlayerModel:mt,dashMetrics:de,manifestUpdater:W,adapter:re,timelineConverter:Ie,capabilities:j,capabilitiesFilter:V,errHandler:ke,baseURLController:_e,segmentBaseController:ye,textController:ae,abrController:Oe,playbackController:De,eventController:We,mediaController:Ze,protectionController:le,videoModel:ve,streamInfo:xt,settings:at}),Ge.push(Wt),Wt.initialize(),Promise.resolve())}function tn(xt,Wt,Xn){try{Dn();var Jn=de.getCurrentDVRInfo().range;if(Jn.end<Jn.start){Qt&&clearTimeout(Qt);var Tn=Math.min(1e3*(-1*(Jn.end-Jn.start)+2),2147483647);return O.debug("Waiting for ".concat(Tn," ms before playback can start")),Jt.trigger(T.Z.AST_IN_FUTURE,{delay:Tn}),void(Qt=setTimeout(function(){tn(xt,Wt,Xn)},Tn))}at.get().streaming.applyProducerReferenceTime&&$e.calculateProducerReferenceTimeOffsets(xt);var Cr=xt[0].manifestInfo;if(at.get().streaming.applyServiceDescription&&$e.applyServiceDescription(Cr),re.getIsDynamic()){var Sn=ol(xt,Cr);De.computeAndSetLiveDelay(Sn,Cr)}(at.get().streaming.applyContentSteering&&ie.shouldQueryBeforeStart()?ie.loadSteeringData():Promise.resolve()).then(function(){var or=H.getValue();or&&_e.update(or),qt(),Wt()}).catch(function(or){O.error(or),qt(),Wt()})}catch(or){Xn(or)}}function qt(){var xt=function(){var Jn;if(re.getIsDynamic()){var Tn=de.getCurrentDVRInfo();Jn=(Tn&&Tn.range?Tn.range.end:0)-De.getOriginalLiveDelay();var Cr=Tn?Tn.range:null;if(Cr){if(isNaN(Pt)&&Pt.toString().indexOf("posix:")===-1){var Sn=Lo(!0);isNaN(Sn)||(O.info("Start time from URI parameters: ".concat(Sn)),Jn=Math.min(Jn,Sn))}else{O.info("Start time provided by the app: ".concat(Pt));var or=zi(!0,Pt);isNaN(or)||(Jn=Math.min(Jn,or))}var Jr=at.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;Jn=Math.max(Jn,Cr.start+Jr)}}else if(Jn=Qs()[0].getStreamInfo().start,isNaN(Pt)){var Js=Lo(!1);isNaN(Js)||(O.info("Start time from URI parameters: ".concat(Js)),Jn=Math.max(Jn,Js))}else{O.info("Start time provided by the app: ".concat(Pt));var kr=zi(!1,Pt);isNaN(kr)||(Jn=Math.max(Jn,kr))}return Jn}(),Wt=On(xt),Xn=Wt!==null?Wt:Ge[0];Jt.trigger(T.Z.INITIAL_STREAM_SWITCH,{startTime:xt}),mn(Xn,null,xt),Vt||(Vt=setInterval(function(){!Pe&&De.getTimeToStreamEnd()<=0&&!De.isSeeking()&&Jt.trigger(T.Z.PLAYBACK_ENDED,{isLast:ca().isLast})},200))}function mn(xt,Wt,Xn){try{if(Pe||!xt||Wt===xt&&xt.getIsActive())return;Pe=!0,Jt.trigger(T.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:Wt?Wt.getStreamInfo():null,toStreamInfo:xt.getStreamInfo()});var Jn=!1;q=xt,Wt&&(Jn=Nn(xt,Wt),Wt.deactivate(Jn)),Xn=isNaN(Xn)?!Jn&&Wt?xt.getStreamInfo().start:NaN:Xn,O.info("Switch to stream ".concat(xt.getId(),". Seektime is ").concat(Xn,", current playback time is ").concat(De.getTime(),". Seamless period switch is set to ").concat(Jn)),Zt=Zt.filter(function(Tn){return Tn.getId()!==q.getId()}),De.initialize(ca(),!!Wt),ve.getElement()?Cn(Xn,Jn,!1):Zn(Xn,Jn)}catch(Tn){Pe=!1}}function Cn(xt,Wt){var Xn,Jn=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function Tn(){if(Me&&Me.readyState==="open"){O.debug("MediaSource is open!"),window.URL.revokeObjectURL(Xn),Me.removeEventListener("sourceopen",Tn),Me.removeEventListener("webkitsourceopen",Tn),Xr();var Sn=de.getCurrentDVRInfo();Ae.setSeekable(Sn.range.start,Sn.range.end),Jn?(isNaN(xt)||De.seek(xt,!0,!0),q.setMediaSource(Me).then(function(){q.initializeForTextWithMediaSource(Me)})):Zn(xt,Wt)}}function Cr(){Me.addEventListener("sourceopen",Tn,!1),Me.addEventListener("webkitsourceopen",Tn,!1),Xn=Ae.attachMediaSource(ve),O.debug("MediaSource attached to element.  Waiting on open...")}Me?Wt?Zn(xt,Wt):(Ae.detachMediaSource(ve),Cr()):(Me=Ae.createMediaSource(),Cr())}function Zn(xt,Wt){q.activate(Me,Wt?jt:void 0,xt).then(function(Xn){if(Xn){var Jn=Object.keys(Xn);Jn.length>0&&Xn[Jn[0]].getBuffer().changeType&&(xn=!0),jt=Xn}isNaN(xt)||(Jt.trigger(T.Z.SEEK_TARGET,{time:xt},{streamId:q.getId()}),De.seek(xt,!1,!0),q.startScheduleControllers()),Pe=!1,Jt.trigger(T.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:ca()})})}function Fn(xt){var Wt=On(xt.seekTime);Wt&&Wt!==q?Wt&&Wt!==q&&(qn(),function(Xn,Jn){var Tn=Xn&&!isNaN(Xn.seekTime)?Xn.seekTime:NaN,Cr=q.getProcessors().map(function(Sn){return Sn.prepareOuterPeriodPlaybackSeeking(Xn)});Promise.all(Cr).then(function(){mn(Jn,q,Tn)}).catch(function(Sn){ke.error(Sn)})}(xt,Wt)):(qn(),function(Xn){q.getProcessors().forEach(function(Jn){return Jn.prepareInnerPeriodPlaybackSeeking(Xn)}),To(nt.USER_REQUEST_STOP_REASON)}(xt)),$a(ut.SEEK_START_REASON)}function qn(){Yn()}function Yn(){Zt&&Zt.length>0&&(Zt.forEach(function(xt){xt.deactivate(!0)}),Zt=[])}function en(xt){if(xt.newMediaInfo.streamInfo.id===q.getId()){if(Yn(),at.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&xt.oldMediaInfo&&xt.oldMediaInfo.codec!==xt.newMediaInfo.codec){var Wt=De.getTime();return q.deactivate(!1),void Cn(Wt,!1,!1)}q.prepareTrackChange(xt)}}function Nn(xt,Wt){try{return at.get().streaming.buffer.reuseExistingSourceBuffers&&(Wt.isProtectionCompatible(xt)||St)&&(xn&&at.get().streaming.buffer.useChangeTypeForTrackSwitch||Wt.isMediaCodecCompatible(xt,Wt))}catch(Xn){return!1}}function Pn(xt){var Wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Me&&!xt.getPreloaded()){var Xn=Nn(xt,Wt);Xn&&xt.startPreloading(Me,jt).then(function(){Zt.push(xt)})}}function On(xt){if(isNaN(xt))return null;for(var Wt=Ge.length,Xn=0;Xn<Wt;Xn++){var Jn=Ge[Xn];if(xt<parseFloat((Jn.getStartTime()+Jn.getDuration()).toFixed(5)))return Jn}return null}function Dn(){try{var xt=re.getIsDynamic(),Wt=re.getStreamsInfo()[0].manifestInfo,Xn=De.getTime(),Jn=Ie.calcTimeShiftBufferWindow(Ge,xt),Tn=oi();if(Jn.start===void 0||Jn.end===void 0)return;Tn&&Tn.length!==0?Tn.forEach(function(Cr){de.addDVRInfo(Cr.getType(),Xn,Wt,Jn)}):de.addDVRInfo(E.Z.VIDEO,Xn,Wt,Jn)}catch(Cr){}}function bt(xt){if(pt&&te){var Wt=mt.getInitialBufferLevel(),Xn=[E.Z.TEXT];(isNaN(Wt)||Wt<=De.getBufferLevel(Xn)||re.getIsDynamic()&&Wt>De.getLiveDelay())&&(pt=!1,$a(ut.INITIAL_PLAYOUT_START_REASON),De.play())}xt&&xt.mediaType&&de.addBufferLevel(xt.mediaType,new Date,1e3*xt.bufferLevel)}function et(xt){xt.streamInfo.id===q.getId()&&xt.reason&&xt.reason.forceReplace&&Yn(),Zl(xt.streamInfo.id).prepareQualityChange(xt)}function zt(){if(re.getIsDynamic()&&De.getOriginalLiveDelay()!==0&&q){var xt=re.getStreamsInfo();if(xt.length>0){var Wt=xt[0].manifestInfo,Xn=ol(xt,Wt);De.computeAndSetLiveDelay(Xn,Wt)}}}function Ve(){if(ko()){var xt=ve.getPlaybackQuality();xt&&de.addDroppedFrames(xt)}}function tt(){O.debug("[onPlaybackStarted]"),!pt&&yt&&$a(ut.RESUME_FROM_PAUSE_START_REASON),pt&&(pt=!1),Gt&&(Gt=!1,at.get().streaming.applyContentSteering&&!ie.shouldQueryBeforeStart()&&ie.loadSteeringData()),yt=!1}function Lt(xt){O.debug("[onPlaybackPaused]"),xt.ended||(yt=!0,To(nt.USER_REQUEST_STOP_REASON))}function yn(xt){O.debug("Stream with id ".concat(xt.streamInfo.id," finished buffering"));var Wt=xt.streamInfo.isLast;Me&&Wt?(O.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),Ae.signalEndOfStream(Me)):bn()}function bn(){if(q&&q.getHasFinishedBuffering())for(var xt=function(){var Tn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var Cr=Tn||q||null;if(Cr){var Sn=Cr.getStreamInfo();return Ge.filter(function(or){var Jr=or.getStreamInfo();return Jr.start>Sn.start&&Sn.id!==Jr.id})}}catch(or){return[]}}(q),Wt=0;Wt<xt.length;){var Xn=xt[Wt],Jn=Wt===0?q:xt[Wt-1];!Xn.getPreloaded()&&Jn.getHasFinishedBuffering()&&Me&&Pn(Xn,Jn),Wt+=1}}function yr(){Vt&&(clearInterval(Vt),Vt=null)}function oi(){return q?q.getProcessors():[]}function gi(xt){if(q&&!q.getIsEndedEventSignaled()){q.setIsEndedEventSignaled(!0);var Wt=function(){var Xn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Jn=Xn||q||null;if(!Jn)return null;for(var Tn=Jn.getStreamInfo(),Cr=Tn.start,Sn=0,or=-1,Jr=NaN;Sn<Ge.length;){var Js=Ge[Sn].getStreamInfo(),kr=Js.start-Cr;kr>0&&(isNaN(Jr)||kr<Jr)&&Tn.id!==Js.id&&(Jr=kr,or=Sn),Sn+=1}return or>=0?Ge[or]:null}();Wt?(O.debug("StreamController onEnded, found next stream with id ".concat(Wt.getStreamInfo().id,". Switching from ").concat(q.getStreamInfo().id," to ").concat(Wt.getStreamInfo().id)),mn(Wt,q,NaN)):(O.debug("StreamController no next stream found"),q.setIsEndedEventSignaled(!1)),To(Wt?nt.END_OF_PERIOD_STOP_REASON:nt.END_OF_CONTENT_STOP_REASON)}xt&&xt.isLast&&(yr(),ie.stopSteeringRequestTimer())}function Xr(xt){var Wt=xt||ca().manifestInfo.duration;Ae.setDuration(Wt)}function Lo(xt){var Wt=ze.getURIFragmentData();if(!Wt||!Wt.t)return NaN;var Xn=Qs()[0].getStreamInfo().start;return Wt.t=Wt.t.split(",")[0],Cs(xt,Wt.t,Xn)}function zi(xt,Wt){var Xn=0;return xt||(Xn=Qs()[0].getStreamInfo().start),Cs(xt,Wt,Xn)}function Cs(xt,Wt,Xn){var Jn=re.getRegularPeriods()[0],Tn=Wt.toString(),Cr=Tn.indexOf("posix:")!==-1?Tn.substring(6)==="now"?Date.now()/1e3:parseFloat(Tn.substring(6)):NaN;return xt&&!isNaN(Cr)?Ie.calcPresentationTimeFromWallTime(new Date(1e3*Cr),Jn):parseFloat(Tn)+Xn}function ol(xt,Wt){try{var Xn=NaN;if(Wt&&!isNaN(Wt.maxFragmentDuration)&&isFinite(Wt.maxFragmentDuration))return Wt.maxFragmentDuration;if(xt&&xt.length===1){var Jn=xt[0],Tn=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT].reduce(function(Sn,or){var Jr=re.getMediaInfoForType(Jn,or);return Jr&&Jr.isFragmented!==!1&&Sn.push(Jr),Sn},[]).reduce(function(Sn,or){var Jr=re.getVoRepresentations(or);return Jr&&Jr.length>0&&Jr.forEach(function(Js){Js&&Sn.push(Js)}),Sn},[]).reduce(function(Sn,or){var Jr=re.convertRepresentationToRepresentationInfo(or);return Jr&&Jr.fragmentDuration&&!isNaN(Jr.fragmentDuration)&&Sn.push(Jr.fragmentDuration),Sn},[]);Xn=Math.max.apply(Math,function(Sn){if(Array.isArray(Sn))return Ih(Sn)}(Cr=Tn)||function(Sn){if(typeof Symbol<"u"&&Symbol.iterator in Object(Sn))return Array.from(Sn)}(Cr)||function(Sn,or){if(Sn){if(typeof Sn=="string")return Ih(Sn,or);var Jr=Object.prototype.toString.call(Sn).slice(8,-1);return Jr==="Object"&&Sn.constructor&&(Jr=Sn.constructor.name),Jr==="Map"||Jr==="Set"?Array.from(Sn):Jr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Jr)?Ih(Sn,or):void 0}}(Cr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(Xn)?Xn:NaN}catch(Sn){return NaN}var Cr}function la(xt){if(xt.error)je=!0,ji();else{O.info("Manifest updated... updating data system wide.");var Wt=xt.manifest;re.updatePeriods(Wt);var Xn=re.getUTCTimingSources();!re.getIsDynamic()||Xn&&Xn.length!==0||Jt.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Hs.LEVELS.WARNING,event:Hs.EVENTS.NO_UTC_TIMING_ELEMENT});var Jn=re.getIsDynamic()?Xn.concat(ct.getUTCTimingSources()):Xn;V.filterUnsupportedFeatures(Wt).then(function(){_e.initialize(Wt),Te.attemptSync(Jn,re.getIsDynamic())})}}function ko(){return!!q&&q.getHasVideoTrack()}function bs(){return!!q&&q.getHasAudioTrack()}function To(xt,Wt){Wt=Wt||new Date,oi().forEach(function(Xn){Xn.finalisePlayList(Wt,xt)}),de.addPlayList()}function $a(xt){de.createPlaylistMetrics(1e3*De.getTime(),xt)}function bu(xt){if(xt.error){var Wt="";switch(xt.error.code){case 1:Wt="MEDIA_ERR_ABORTED";break;case 2:Wt="MEDIA_ERR_NETWORK";break;case 3:Wt="MEDIA_ERR_DECODE",un.counts.mediaErrorDecode+=1;break;case 4:Wt="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:Wt="MEDIA_ERR_ENCRYPTED";break;default:Wt="UNKNOWN"}Wt==="MEDIA_ERR_DECODE"&&at.get().errors.recoverAttempts.mediaErrorDecode>=un.counts.mediaErrorDecode?function(){O.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Xn=De.getTime();q.deactivate(!1),O.warn("MediaSource has been resetted. Resuming playback from time ".concat(Xn)),Cn(Xn,!1,!1)}():(xe=!0,xt.error.message&&(Wt+=" ("+xt.error.message+")"),xt.error.msExtendedCode&&(Wt+=" (0x"+(xt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),O.fatal("Video Element Error: "+Wt),xt.error&&O.fatal(xt.error),ke.error(new ce.Z(xt.error.code,Wt)),ji())}}function ca(){return q?q.getStreamInfo():null}function Zl(xt){for(var Wt=0,Xn=Ge.length;Wt<Xn;Wt++)if(Ge[Wt].getId()===xt)return Ge[Wt];return null}function Xf(xt){isNaN(xt.newDuration)||Xr(xt.newDuration)}function Ru(){Ge=[],Pt=NaN,le=null,Pe=!1,q=null,xe=!1,je=!1,pt=!0,Gt=!0,yt=!1,te=!0,Vt=null,St=!1,xn=!1,Zt=[],Qt=null,un={counts:{mediaErrorDecode:0}}}function ji(){Bn(),Te.reset(),To(xe||je?nt.FAILURE_STOP_REASON:nt.USER_REQUEST_STOP_REASON);for(var xt=0,Wt=Ge?Ge.length:0;xt<Wt;xt++)Ge[xt].reset(xe);Jt.off(_.Z.PLAYBACK_TIME_UPDATED,Ve,k),Jt.off(_.Z.PLAYBACK_SEEKING,Fn,k),Jt.off(_.Z.PLAYBACK_ERROR,bu,k),Jt.off(_.Z.PLAYBACK_STARTED,tt,k),Jt.off(_.Z.PLAYBACK_PAUSED,Lt,k),Jt.off(_.Z.PLAYBACK_ENDED,gi,k),Jt.off(_.Z.METRIC_ADDED,xa,k),Jt.off(_.Z.MANIFEST_VALIDITY_CHANGED,Xf,k),Jt.off(_.Z.BUFFER_LEVEL_UPDATED,bt,k),Jt.off(_.Z.QUALITY_CHANGE_REQUESTED,et,k),T.Z.KEY_SESSION_UPDATED&&Jt.off(T.Z.KEY_SESSION_UPDATED,vr,k),Jt.off(T.Z.MANIFEST_UPDATED,la,k),Jt.off(T.Z.STREAM_BUFFERING_COMPLETED,yn,k),Jt.off(T.Z.TIME_SYNCHRONIZATION_COMPLETED,mr,k),Jt.off(T.Z.CURRENT_TRACK_CHANGED,en,k),Jt.off(T.Z.SETTING_UPDATED_LIVE_DELAY,zt,k),Jt.off(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,zt,k),_e.reset(),W.reset(),We.reset(),de.clearAllCurrentMetrics(),H.setValue(null),ee.reset(),Ie.reset(),Se.reset(),Me&&(Ae.detachMediaSource(ve),Me=null),ve=null,le&&(le=null,ue=null,H.getValue()&&Jt.trigger(T.Z.PROTECTION_DESTROYED,{data:H.getValue().url})),yr(),Jt.trigger(T.Z.STREAM_TEARDOWN_COMPLETE),Ru()}function xa(xt){if(xt.metric===P.Z.DVR_INFO){var Wt=bs()?E.Z.AUDIO:E.Z.VIDEO;xt.mediaType===Wt&&Ae.setSeekable(xt.value.range.start,xt.value.range.end)}}function Qs(){return Ge}return k={initialize:function(xt,Wt){Bn(),te=xt,ue=Wt,Ie.initialize(),(W=Ka(an).create()).setConfig({manifestModel:H,adapter:re,manifestLoader:ee,errHandler:ke,settings:at,contentSteeringController:ie}),W.initialize(),(We=Ef(an).getInstance()).setConfig({manifestUpdater:W,playbackController:De,settings:at}),We.start(),Te.setConfig({dashMetrics:de,baseURLController:_e,errHandler:ke,settings:at}),Te.initialize(),Ae.setConfig({settings:at}),le&&(Jt.trigger(T.Z.PROTECTION_CREATED,{controller:le}),le.setMediaElement(ve.getElement()),ue&&le.setProtectionData(ue)),Jt.on(_.Z.PLAYBACK_TIME_UPDATED,Ve,k),Jt.on(_.Z.PLAYBACK_SEEKING,Fn,k),Jt.on(_.Z.PLAYBACK_ERROR,bu,k),Jt.on(_.Z.PLAYBACK_STARTED,tt,k),Jt.on(_.Z.PLAYBACK_PAUSED,Lt,k),Jt.on(_.Z.PLAYBACK_ENDED,gi,k),Jt.on(_.Z.METRIC_ADDED,xa,k),Jt.on(_.Z.MANIFEST_VALIDITY_CHANGED,Xf,k),Jt.on(_.Z.BUFFER_LEVEL_UPDATED,bt,k),Jt.on(_.Z.QUALITY_CHANGE_REQUESTED,et,k),T.Z.KEY_SESSION_UPDATED&&Jt.on(T.Z.KEY_SESSION_UPDATED,vr,k),Jt.on(T.Z.MANIFEST_UPDATED,la,k),Jt.on(T.Z.STREAM_BUFFERING_COMPLETED,yn,k),Jt.on(T.Z.TIME_SYNCHRONIZATION_COMPLETED,mr,k),Jt.on(T.Z.CURRENT_TRACK_CHANGED,en,k),Jt.on(T.Z.SETTING_UPDATED_LIVE_DELAY,zt,k),Jt.on(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,zt,k)},getActiveStreamInfo:ca,addDVRMetric:Dn,hasVideoTrack:ko,hasAudioTrack:bs,getStreamById:Zl,getStreamForTime:On,getTimeRelativeToStreamId:function(xt,Wt){for(var Xn=null,Jn=0,Tn=0,Cr=null,Sn=0;Sn<Ge.length;Sn++){if(Tn=(Xn=Ge[Sn]).getStartTime(),Cr=Xn.getDuration(),Number.isFinite(Tn)&&(Jn=Tn),Xn.getId()===Wt)return xt-Jn;Number.isFinite(Cr)&&(Jn+=Cr)}return null},load:function(xt){var Wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Bn(),Pt=Wt,ee.load(xt)},loadWithManifest:function(xt){var Wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;kn(),Pt=Wt,W.setManifest(xt)},getActiveStreamProcessors:oi,setConfig:function(xt){xt&&(xt.capabilities&&(j=xt.capabilities),xt.capabilitiesFilter&&(V=xt.capabilitiesFilter),xt.manifestLoader&&(ee=xt.manifestLoader),xt.manifestModel&&(H=xt.manifestModel),xt.mediaPlayerModel&&(mt=xt.mediaPlayerModel),xt.customParametersModel&&(ct=xt.customParametersModel),xt.protectionController&&(le=xt.protectionController),xt.adapter&&(re=xt.adapter),xt.dashMetrics&&(de=xt.dashMetrics),xt.errHandler&&(ke=xt.errHandler),xt.timelineConverter&&(Ie=xt.timelineConverter),xt.videoModel&&(ve=xt.videoModel),xt.playbackController&&(De=xt.playbackController),xt.serviceDescriptionController&&($e=xt.serviceDescriptionController),xt.contentSteeringController&&(ie=xt.contentSteeringController),xt.textController&&(ae=xt.textController),xt.abrController&&(Oe=xt.abrController),xt.mediaController&&(Ze=xt.mediaController),xt.settings&&(at=xt.settings),xt.baseURLController&&(_e=xt.baseURLController),xt.uriFragmentModel&&(ze=xt.uriFragmentModel),xt.segmentBaseController&&(ye=xt.segmentBaseController),xt.manifestUpdater&&(W=xt.manifestUpdater))},setProtectionData:function(xt){ue=xt,le&&le.setProtectionData(ue)},getIsStreamSwitchInProgress:function(){return Pe},switchToVideoElement:function(xt){q&&(De.initialize(ca()),Cn(xt,!1,!0))},getHasMediaOrInitialisationError:function(){return xe||je},getStreams:Qs,getActiveStream:function(){return q},getInitialPlayback:function(){return pt},getAutoPlay:function(){return te},refreshManifest:function(){W.getIsUpdating()||W.refreshManifest()},reset:ji},O=(0,M.Z)(an).getInstance().getLogger(k),Te=yf(an).getInstance(),Ae=Gs(an).getInstance(),Se=Ye(an).getInstance(),Ru(),k}_c.__dashjs_factory_name="StreamController";var Ch=F.Z.getSingletonFactory(_c);function bh(){var k,O,j,V,W,ee,H,re,de,Ae,Te,ie,_e=this.context,ye=(0,g.Z)(_e).getInstance();function ze(){ie.debug("Stopping the gap controller"),W&&(clearInterval(W),W=null),function(){ye.off(T.Z.WALLCLOCK_TIME_UPDATED,ke,this),ye.off(T.Z.INITIAL_STREAM_SWITCH,Se,this),ye.off(T.Z.PLAYBACK_SEEKING,Oe,this),ye.off(T.Z.BUFFER_REPLACEMENT_STARTED,Ze,k),ye.off(T.Z.TRACK_CHANGE_RENDERED,We,k)}(),W=null,ee=NaN,V=0,Ae=null,Te={}}function Oe(){Ae&&(clearTimeout(Ae),Ae=null)}function Ze(ue){try{if(ue.streamId!==re.getActiveStreamInfo().id||ue.mediaType!==E.Z.VIDEO&&ue.mediaType!==E.Z.AUDIO)return;ue.streamId===re.getActiveStreamInfo().id&&(Te[ue.mediaType]=!0)}catch(te){ie.error(te)}}function We(ue){ue&&ue.mediaType&&(Te[ue.mediaType]=!1)}function Se(){W||function(){try{W||(ie.debug("Starting the gap controller"),W=setInterval(function(){Ie()&&ae(H.getTime())},100))}catch(ue){}}()}function ke(){if(Ie(j.get().streaming.gaps.enableSeekFix)&&++V>=10){var ue=H.getTime();O===ue?ae(ue,!0):(O=ue,ee=NaN),V=0}}function Ie(){var ue=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!re.getActiveStream())return!1;var te=Object.keys(Te).some(function(xe){return Te[xe]}),Pe=!!ue&&Ge();return!te&&j.get().streaming.gaps.jumpGaps&&re.getActiveStreamProcessors().length>0&&(!H.isSeeking()||Pe)&&!H.isPaused()&&!re.getIsStreamSwitchInProgress()&&!re.getHasMediaOrInitialisationError()}function Ge(){var ue=re.getActiveStream(),te=parseFloat((ue.getStartTime()+ue.getDuration()).toFixed(5));return H.getTime()+j.get().streaming.gaps.threshold>=te}function q(ue,te){try{if(!ue||ue.length<=1&&te>0)return NaN;for(var Pe=NaN,xe=0;isNaN(Pe)&&xe<ue.length;){var je=xe>0?ue.end(xe-1):0;te<ue.start(xe)&&je-te<j.get().streaming.gaps.threshold&&(Pe=xe),xe+=1}return Pe}catch(Me){return null}}function le(ue,te){for(var Pe=0,xe=ue.length;Pe<xe;Pe++)if(te>=ue.start(Pe)&&te<=ue.end(Pe))return!0;return!1}function ae(ue){var te,Pe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],xe=j.get().streaming.gaps.enableStallFix,je=j.get().streaming.gaps.stallSeek,Me=j.get().streaming.gaps.smallGapLimit,ve=j.get().streaming.gaps.jumpLargeGaps,De=de.getBufferRange(),$e=NaN,mt=!1;if(te=q(De,ue),!isNaN(te)){var ct=De.start(te),yt=ct-ue;yt>0&&(yt<=Me||ve)&&($e=ct)}var pt=H.getTimeToStreamEnd();if(isNaN($e)&&Pe&&isFinite(pt)&&!isNaN(pt)&&pt<Me&&($e=parseFloat(H.getStreamEndTime().toFixed(5)),mt=!0),xe&&isNaN($e)&&Pe&&isNaN(te)&&le(De,ue)&&(je===0?(ie.warn("Toggle play pause to break stall"),de.pause(),de.play()):(ie.warn("Jumping ".concat(je,"s to break stall")),$e=ue+je)),$e>0&&ee!==$e&&$e>ue&&!Ae){var Gt=$e-ue;if(mt){var Vt=re.getStreamForTime($e),jt=Vt&&!!Vt.getPreloaded();ie.warn("Jumping to end of stream because of gap from ".concat(ue," to ").concat($e,". Gap duration: ").concat(Gt)),H.seek($e,!0,jt)}else{var Zt=H.getIsDynamic(),xn=te>0?De.end(te-1):ue,at=Zt?1e3*Math.max(0,Gt-.1):0;Ae=window.setTimeout(function(){H.seek($e,!0,!0),ie.warn("Jumping gap occuring in period ".concat(re.getActiveStream().getStreamId()," starting at ").concat(xn," and ending at ").concat($e,". Jumping by: ").concat($e-xn)),Ae=null},at)}ee=$e}}return k={reset:ze,setConfig:function(ue){ue&&(ue.settings&&(j=ue.settings),ue.playbackController&&(H=ue.playbackController),ue.streamController&&(re=ue.streamController),ue.videoModel&&(de=ue.videoModel))},initialize:function(){(function(){ye.on(T.Z.WALLCLOCK_TIME_UPDATED,ke,this),ye.on(T.Z.INITIAL_STREAM_SWITCH,Se,this),ye.on(T.Z.PLAYBACK_SEEKING,Oe,this),ye.on(T.Z.BUFFER_REPLACEMENT_STARTED,Ze,k),ye.on(T.Z.TRACK_CHANGE_RENDERED,We,k)})()}},ie=(0,M.Z)(_e).getInstance().getLogger(k),ze(),k}bh.__dashjs_factory_name="GapController";var fm=F.Z.getSingletonFactory(bh);function Rh(){var k,O,j,V,W,ee,H,re,de,Ae,Te=this.context,ie=(0,g.Z)(Te).getInstance();function _e(){O=!1;var Ge=dn.Z.parseUserAgent();j=Ge&&Ge.browser&&Ge.browser.name&&Ge.browser.name.toLowerCase()==="safari"}function ye(){O=!1}function ze(Ge){if(Ge.streamId===ee.getActiveStreamInfo().id&&de){var q=H.getLiveDelay();H.getBufferLevel()>q/2&&(de=!1)}}function Oe(Ge){Ge.streamId===ee.getActiveStreamInfo().id&&(de=Ge.state===P.Z.BUFFER_EMPTY)}function Ze(){re.getCatchupModeEnabled()||V.setPlaybackRate(1)}function We(){H.getIsDynamic()&&re.getCatchupModeEnabled()&&(re.getCatchupPlaybackRates().max>0||re.getCatchupPlaybackRates().min<0)&&!H.isPaused()&&!H.isSeeking()&&function(){try{return!(!H.getTime()>0||O)&&(ke()===E.Z.LIVE_CATCHUP_MODE_LOLP?function(Ge,q){try{return Math.abs(Se())>0||Ge<q}catch(le){return!1}}(H.getBufferLevel(),W.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(Se())>0}catch(Ge){return!1}}())}catch(Ge){return!1}}()&&function(){if(!O&&V){var Ge,q=V.getPlaybackRate(),le=re.getCatchupPlaybackRates(),ae=H.getBufferLevel(),ue=Se(),te=re.getCatchupMaxDrift();if(!isNaN(te)&&te>0&&ue>te)Ae.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),O=!0,H.seekToCurrentLive(!0,!1);else{var Pe=H.getCurrentLiveLatency(),xe=H.getLiveDelay();Ge=ke()===E.Z.LIVE_CATCHUP_MODE_LOLP?function(Me,ve,De,$e,mt){var ct;if(mt<$e){var yt=Math.abs(Me.min),pt=5*(mt-$e);ct=1-yt+2*yt/(1+Math.pow(Math.E,-pt)),Ae.debug("[LoL+ playback control_buffer-based] bufferLevel: "+mt+", newRate: "+ct)}else{if(Math.abs(ve-De)<=.02*De)ct=1;else{var Gt=ve-De,Vt=Gt<0?Math.abs(Me.min):Me.max,jt=5*Gt;ct=1-Vt+2*Vt/(1+Math.pow(Math.E,-jt))}Ae.debug("[LoL+ playback control_latency-based] latency: "+ve+", newRate: "+ct)}return ct}(le,Pe,xe,W.get().streaming.liveCatchup.playbackBufferMin,ae):function(Me,ve,De,$e){if(de)return 1;var mt=ve-De,ct=mt<0?Math.abs(Me.min):Me.max,yt=5*mt,pt=1-ct+2*ct/(1+Math.pow(Math.E,-yt));return H.getPlaybackStalled()&&$e<=De/2&&mt>0&&(pt=1),pt}(le,Pe,xe,ae);var je=j?.25:.02/(.5/le.max);Ge&&Math.abs(q-Ge)>=je&&(Ae.debug("[CatchupController]: Setting playback rate to ".concat(Ge)),V.setPlaybackRate(Ge))}}}()}function Se(){return H.getCurrentLiveLatency()-H.getLiveDelay()}function ke(){var Ge=W.get().streaming.liveCatchup.playbackBufferMin;return W.get().streaming.liveCatchup.mode!==E.Z.LIVE_CATCHUP_MODE_LOLP||Ge===null||isNaN(Ge)?E.Z.LIVE_CATCHUP_MODE_DEFAULT:E.Z.LIVE_CATCHUP_MODE_LOLP}function Ie(){re.getCatchupPlaybackRates(!0)}return k={reset:function(){ie.off(_.Z.BUFFER_LEVEL_UPDATED,ze,k),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,k),ie.off(_.Z.PLAYBACK_PROGRESS,We,k),ie.off(_.Z.PLAYBACK_TIME_UPDATED,We,k),ie.off(_.Z.PLAYBACK_SEEKED,ye,k),ie.off(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Ze,k),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ie,k),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ie,k),ie.off(_.Z.STREAM_INITIALIZED,Ie,k),_e(),V.setPlaybackRate(1,!0)},setConfig:function(Ge){Ge&&(Ge.settings&&(W=Ge.settings),Ge.videoModel&&(V=Ge.videoModel),Ge.streamController&&(ee=Ge.streamController),Ge.playbackController&&(H=Ge.playbackController),Ge.mediaPlayerModel&&(re=Ge.mediaPlayerModel))},initialize:function(){ie.on(_.Z.BUFFER_LEVEL_UPDATED,ze,k),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,k),ie.on(_.Z.PLAYBACK_PROGRESS,We,k),ie.on(_.Z.PLAYBACK_TIME_UPDATED,We,k),ie.on(_.Z.PLAYBACK_SEEKED,ye,k),ie.on(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Ze,k),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ie,k),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ie,k),ie.on(_.Z.STREAM_INITIALIZED,Ie,k),Ie()}},Ae=(0,M.Z)(Te).getInstance().getLogger(k),_e(),k}Rh.__dashjs_factory_name="CatchupController";var xh=F.Z.getSingletonFactory(Rh),Nh=[E.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],_f="video",jr="audio";function Mh(){var k,O,j,V,W,ee=this.context;function H(){O={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},j=[]}function re(de,Ae,Te){try{O[de][Ae]=Te/1e3}catch(ie){V.error(ie)}}return k={getServiceDescriptionSettings:function(){return O},getProducerReferenceTimeOffsets:function(){return j},calculateProducerReferenceTimeOffsets:function(de){try{var Ae=[];if(de&&de.length>0){var Te=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT],ie=W.getAvailabilityStartTime()/1e3;de.forEach(function(_e){var ye=Te.reduce(function(ze,Oe){return ze.concat(W.getAllMediaInfoForType(_e,Oe))},[]).reduce(function(ze,Oe){return W.getProducerReferenceTimes(_e,Oe).forEach(function(Ze){var We=W.getVoRepresentations(Oe);if(We&&We.length>0&&We[0].adaptation&&We[0].segmentInfoType===y.Z.SEGMENT_TEMPLATE){var Se=We[0],ke=new Date(Ze[y.Z.WALL_CLOCK_TIME]).getTime()/1e3-(Ze[y.Z.PRESENTATION_TIME]/Se[y.Z.TIMESCALE]-Se[y.Z.PRESENTATION_TIME_OFFSET]+_e.start),Ie=ie-ke;ze.push({id:Ze[y.Z.ID],to:Ie})}}),ze},[]);Ae=Ae.concat(ye)})}j=Ae}catch(_e){V.error(_e),j=[]}},applyServiceDescription:function(de){if(de&&de.serviceDescriptions){var Ae=de.serviceDescriptions.filter(function(_e){return Nh.includes(_e.schemeIdUri)}),Te=de.serviceDescriptions.filter(function(_e){return _e.schemeIdUri==null}),ie=Ae.length>0?Ae[Ae.length-1]:Te[Te.length-1];ie&&(ie.latency&&ie.latency.target>0&&function(_e){var ye;if(_e.schemeIdUri,E.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,ye=function(We){return{liveDelay:We.latency.target/1e3,maxDrift:!isNaN(We.latency.max)&&We.latency.max>We.latency.target?(We.latency.max-We.latency.target+500)/1e3:NaN,referenceId:We.latency.referenceId||NaN}}(_e),j.length>0){var ze=function(We){var Se,ke=0,Ie=j.filter(function(Ge){return Ge.id===We.referenceId});return Ie.length===0?(ke=j.length>0?j[0].to:0,Se=j[0].id||NaN):(ke=Ie[0].to||0,Se=Ie[0].id||NaN),{to:ke,id:Se}}(ye),Oe=ze.to,Ze=ze.id;O.liveDelay=ye.liveDelay-Oe,O.liveCatchup.maxDrift=ye.maxDrift,V.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(Oe," from ProducerReferenceTime element with id ").concat(Ze,".\n                Live Delay: ").concat(ye.liveDelay-Oe,", Live catchup max drift: ").concat(ye.maxDrift,"\n            "))}else O.liveDelay=ye.liveDelay,O.liveCatchup.maxDrift=ye.maxDrift,V.debug("Found latency properties coming from service description: Live Delay: ".concat(ye.liveDelay,", Live catchup max drift: ").concat(ye.maxDrift))}(ie),ie.playbackRate&&function(_e){var ye=_e.playbackRate.min?Math.round(1e3*(_e.playbackRate.min-1))/1e3:NaN,ze=_e.playbackRate.max?Math.round(1e3*(_e.playbackRate.max-1))/1e3:NaN;O.liveCatchup.playbackRate.min=ye,O.liveCatchup.playbackRate.max=ze,V.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(ye)),V.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(ze))}(ie),ie.operatingQuality,ie.operatingBandwidth&&function(_e){if(_e&&_e.operatingBandwidth&&_e.operatingBandwidth.mediaType&&_e.operatingBandwidth.mediaType!=="all"){var ye={};ye.minBandwidth=_e.operatingBandwidth.min,ye.maxBandwidth=_e.operatingBandwidth.max,ye.targetBandwidth=_e.operatingBandwidth.target;var ze=[];_e.operatingBandwidth.mediaType===_f||_e.operatingBandwidth.mediaType===jr?ze.push(_e.operatingBandwidth.mediaType):_e.operatingBandwidth.mediaType==="any"&&(ze.push(jr),ze.push(_f)),ze.forEach(function(Oe){isNaN(ye.minBandwidth)||re("minBitrate",Oe,ye.minBandwidth),isNaN(ye.maxBandwidth)||re("maxBitrate",Oe,ye.maxBandwidth),isNaN(ye.targetBandwidth)||re("initialBitrate",Oe,ye.targetBandwidth)})}}(ie),ie.contentSteering&&function(_e){O.contentSteering=_e.contentSteering}(ie))}},reset:function(){H()},setConfig:function(de){de&&de.adapter&&(W=de.adapter)}},V=(0,M.Z)(ee).getInstance().getLogger(k),H(),k}Mh.__dashjs_factory_name="ServiceDescriptionController";var Tf=F.Z.getSingletonFactory(Mh),Sf=w(3973),Tc=w.n(Sf),dm=w(3039);function wf(){var k,O,j,V,W,ee,H,re,de=this.context,Ae=(0,g.Z)(de).getInstance();function Te(ve,De){return ve&&j[De]&&j[De][ve]?j[De][ve].list:[]}function ie(ve,De){return ve&&j[De]&&j[De][ve]?j[De][ve].current:null}function _e(ve){var De=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(ve&&ve.streamInfo){var $e=ve.type,mt=ve.streamInfo,ct=mt.id,yt=ie($e,ct);if(j[ct]&&j[ct][$e]&&(j[ct][$e].current=ve,j[ct][$e].current&&($e!==E.Z.TEXT&&!Oe(ve,yt)||$e===E.Z.TEXT&&ve.isFragmented)&&Ae.trigger(T.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:yt,newMediaInfo:ve,switchMode:V.get().streaming.trackSwitchMode[$e]},{streamId:ct}),!De)){var pt=We(ve);if(!pt||!j[ct][$e].storeLastSettings)return;pt.roles&&(pt.role=pt.roles[0],delete pt.roles),pt.accessibility&&(pt.accessibility=pt.accessibility[0]),pt.audioChannelConfiguration&&(pt.audioChannelConfiguration=pt.audioChannelConfiguration[0]),ee[$e]=pt,re.setSavedMediaSettings($e,pt)}}}function ye(ve,De){ve&&De&&(W[ve]=De)}function ze(ve){return ve?W[ve]:null}function Oe(ve,De){if(!ve&&!De)return!0;if(!ve||!De)return!1;var $e=ve.id===De.id,mt=ve.viewpoint===De.viewpoint,ct=JSON.stringify(ve.viewpointsWithSchemeIdUri)===JSON.stringify(De.viewpointsWithSchemeIdUri),yt=ve.lang===De.lang,pt=ve.codec===De.codec,Gt=ve.roles.toString()===De.roles.toString(),Vt=JSON.stringify(ve.rolesWithSchemeIdUri)===JSON.stringify(De.rolesWithSchemeIdUri),jt=ve.accessibility.toString()===De.accessibility.toString(),Zt=JSON.stringify(ve.accessibilitiesWithSchemeIdUri)===JSON.stringify(De.accessibilitiesWithSchemeIdUri),xn=ve.audioChannelConfiguration.toString()===De.audioChannelConfiguration.toString(),at=JSON.stringify(ve.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(De.audioChannelConfigurationsWithSchemeIdUri);return $e&&pt&&mt&&ct&&yt&&Gt&&Vt&&jt&&Zt&&xn&&at}function Ze(){j={},ee={},W={audio:null,video:null,text:null}}function We(ve){var De={lang:ve.lang,viewpoint:ve.viewpoint,roles:ve.roles,accessibility:ve.accessibility,audioChannelConfiguration:ve.audioChannelConfiguration,codec:ve.codec};return De.lang||De.viewpoint||De.role&&De.role.length>0||De.accessibility&&De.accessibility.length>0||De.audioChannelConfiguration&&De.audioChannelConfiguration.length>0?De:null}function Se(ve,De,$e){var mt=[];return ve.forEach(function(ct){De($e,ct)&&mt.push(ct)}),mt.length!==0?mt:ve}function ke(ve,De){try{return!ve.lang||ve.lang instanceof RegExp?De.lang.match(ve.lang):De.lang!==""&&(0,dm.extendedFilter)(De.lang,Tc()(ve.lang)).length>0}catch($e){return!1}}function Ie(ve,De){return ve.index===void 0||ve.index===null||De.index===ve.index}function Ge(ve,De){return!ve.viewpoint||ve.viewpoint===De.viewpoint}function q(ve,De){var $e=arguments.length>2&&arguments[2]!==void 0&&arguments[2],mt=!ve.role||!!De.roles.filter(function(ct){return ct===ve.role})[0];return mt||De.type===E.Z.AUDIO&&$e}function le(ve,De){return ve.accessibility?!!De.accessibility.filter(function($e){return $e===ve.accessibility})[0]:!De.accessibility.length}function ae(ve,De){return!ve.audioChannelConfiguration||!!De.audioChannelConfiguration.filter(function($e){return $e===ve.audioChannelConfiguration})[0]}function ue(ve,De){return!ve.codec||ve.codec===De.codec}function te(ve){var De,$e=0,mt=[];return ve.forEach(function(ct){(De=Math.max.apply(Math,ct.bitrateList.map(function(yt){return yt.bandwidth})))>$e?($e=De,mt=[ct]):De===$e&&mt.push(ct)}),mt}function Pe(ve){var De,$e=1/0,mt=[];return ve.forEach(function(ct){var yt=ct.bitrateList.reduce(function(pt,Gt){var Vt=Math.max(1,Gt.width*Gt.height);return pt+Gt.bandwidth/Vt},0);(De=yt/ct.bitrateList.length)<$e?($e=De,mt=[ct]):De===$e&&mt.push(ct)}),mt}function xe(ve){var De,$e=0,mt=[];return ve.forEach(function(ct){(De=ct.representationCount)>$e?($e=De,mt=[ct]):De===$e&&mt.push(ct)}),mt}function je(ve,De){if(ve===E.Z.TEXT)return De[0];var $e,mt=V.get().streaming.selectionModeForInitialTrack,ct=H.getCustomInitialTrackSelectionFunction();if(ct&&typeof ct=="function")$e=ct(De);else switch(mt){case E.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:$e=function(yt){var pt,Gt,Vt=(pt=0,Gt=[],yt.forEach(function(jt){isNaN(jt.selectionPriority)||(jt.selectionPriority>pt?(pt=jt.selectionPriority,Gt=[jt]):jt.selectionPriority===pt&&Gt.push(jt))}),Gt);return Vt.length>1&&(Vt=te(Vt)),Vt.length>1&&(Vt=xe(Vt)),Vt}(De);break;case E.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:$e=function(yt){var pt=te(yt);return pt.length>1&&(pt=xe(pt)),pt}(De);break;case E.Z.TRACK_SELECTION_MODE_FIRST_TRACK:$e=Me(De);break;case E.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:$e=function(yt){var pt=Pe(yt);return pt.length>1&&(pt=te(pt)),pt}(De);break;case E.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:$e=function(yt){var pt=xe(yt);return pt.length>1&&(pt=te(yt)),pt}(De);break;default:O.warn("Track selection mode ".concat(mt," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),$e=Me(De)}return $e.length>0?$e[0]:De[0]}function Me(ve){return ve[0]}return k={setInitialMediaSettingsForType:function(ve,De){var $e=ee[ve]||ze(ve),mt=Te(ve,De.id),ct=[];$e||(($e=re.getSavedMediaSettings(ve))&&delete $e.codec,ye(ve,$e)),mt&&mt.length!==0&&($e&&(ct=Se(ct=Array.from(mt),ke,$e),ct=Se(ct,Ie,$e),ct=Se(ct,Ge,$e),ve===E.Z.AUDIO&&ee[ve]||(ct=Se(ct,q,$e)),ct=Se(ct,le,$e),ct=Se(ct,ae,$e),ct=Se(ct,ue,$e)),ct.length===0?_e(je(ve,mt),!0):ct.length>1?_e(je(ve,ct)):_e(ct[0]))},addTrack:function(ve){if(ve){var De=ve.type;if(($e=De)===E.Z.AUDIO||$e===E.Z.VIDEO||$e===E.Z.TEXT||$e===E.Z.IMAGE){var $e,mt,ct=ve.streamInfo.id;j[ct]||(j[ct]={audio:{list:[],storeLastSettings:mt=V.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:mt,current:null},text:{list:[],storeLastSettings:mt,current:null},image:{list:[],storeLastSettings:mt,current:null}});for(var yt=j[ct][De].list,pt=0,Gt=yt.length;pt<Gt;++pt)if(Oe(yt[pt],ve))return;yt.push(ve)}}},getTracksFor:Te,getCurrentTrackFor:ie,isCurrentTrack:function(ve){if(!ve)return!1;var De=ve.type,$e=ve.streamInfo.id;return j[$e]&&j[$e][De]&&Oe(j[$e][De].current,ve)},setTrack:_e,selectInitialTrack:je,setInitialSettings:ye,getInitialSettings:ze,getTracksWithHighestBitrate:te,getTracksWithHighestEfficiency:Pe,getTracksWithWidestRange:xe,isTracksEqual:Oe,matchSettings:function(ve,De){var $e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var mt=!1;if(ve.lang){if(ve.lang instanceof RegExp)mt=De.lang.match(ve.lang);else if(De.lang!==""){var ct=Tc()(ve.lang);ct&&(mt=(0,dm.extendedFilter)(De.lang,ct).length>0)}}else mt=!0;var yt=ve.index===void 0||ve.index===null||De.index===ve.index,pt=!ve.viewpoint||ve.viewpoint===De.viewpoint,Gt=!ve.role||!!De.roles.filter(function(Zt){return Zt===ve.role})[0],Vt=!ve.accessibility||!!De.accessibility.filter(function(Zt){return Zt===ve.accessibility})[0],jt=!ve.audioChannelConfiguration||!!De.audioChannelConfiguration.filter(function(Zt){return Zt===ve.audioChannelConfiguration})[0];return mt&&yt&&pt&&(Gt||De.type===E.Z.AUDIO&&$e)&&Vt&&jt}catch(Zt){return!1}},matchSettingsLang:ke,matchSettingsIndex:Ie,matchSettingsViewPoint:Ge,matchSettingsRole:q,matchSettingsAccessibility:le,matchSettingsAudioChannelConfig:ae,saveTextSettingsDisabled:function(){re.setSavedMediaSettings(E.Z.TEXT,null)},setConfig:function(ve){ve&&(ve.domStorage&&(re=ve.domStorage),ve.settings&&(V=ve.settings),ve.customParametersModel&&(H=ve.customParametersModel))},reset:Ze},O=(0,M.Z)(de).getInstance().getLogger(k),Ze(),k}wf.__dashjs_factory_name="MediaController";var xl=F.Z.getSingletonFactory(wf);F.Z.updateSingletonFactory(wf.__dashjs_factory_name,xl);var Af=xl,Ca=NaN,If=function k(O,j){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,k),this.data={baseUrls:O||null,selectedIdx:j||Ca},this.children=[]};function Nl(){var k,O,j,V,W=this.context,ee=wn(W).getInstance();function H(Te,ie,_e){var ye=re(_e);Te[ie]?ee.areEqual(ye,Te[ie].data.baseUrls)||(Te[ie].data.baseUrls=ye,Te[ie].data.selectedIdx=Ca):Te[ie]=new If(ye)}function re(Te){var ie=j.getBaseURLsFromElement(Te),_e=V.getSynthesizedBaseUrlElements(ie);return _e&&_e.length>0&&(ie=ie.concat(_e)),ie}function de(Te,ie){var _e=ie||O;Te(_e.data),_e.children&&_e.children.forEach(function(ye){return de(Te,ye)})}function Ae(){O=new If}return k={reset:Ae,update:function(Te){(function(ie){(function(){if(!j||!j.hasOwnProperty("getBaseURLsFromElement")||!j.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var _e=re(ie);ee.areEqual(_e,O.data.baseUrls)||(O.data.baseUrls=_e,O.data.selectedIdx=Ca),ie&&ie.Period_asArray&&ie.Period_asArray.forEach(function(ye,ze){H(O.children,ze,ye),ye.AdaptationSet_asArray&&ye.AdaptationSet_asArray.forEach(function(Oe,Ze){H(O.children[ze].children,Ze,Oe),Oe.Representation_asArray&&Oe.Representation_asArray.sort(j.getRepresentationSortFunction()).forEach(function(We,Se){H(O.children[ze].children[Ze].children,Se,We)})})})})(Te)},getForPath:function(Te){var ie=O,_e=[ie.data];return Te&&Te.forEach(function(ye){(ie=ie.children[ye])&&_e.push(ie.data)}),_e.filter(function(ye){return ye.baseUrls.length})},invalidateSelectedIndexes:function(Te){de(function(ie){isNaN(ie.selectedIdx)||Te===ie.baseUrls[ie.selectedIdx].serviceLocation&&(ie.selectedIdx=Ca)})},setConfig:function(Te){Te.adapter&&(j=Te.adapter),Te.contentSteeringController&&(V=Te.contentSteeringController)},getBaseUrls:function(Te){return re(Te)}},Ae(),k}Nl.__dashjs_factory_name="BaseURLTreeModel";var hm=F.Z.getClassFactory(Nl);function Ml(k){var O=(k=k||{}).blacklistController;return{select:function(j){return j&&function(W){var ee,H,re=0,de=[],Ae=0;if((H=W.sort(function(Te,ie){var _e=Te.dvbPriority-ie.dvbPriority;return isNaN(_e)?0:_e}).filter(function(Te,ie,_e){return!ie||_e[0].dvbPriority&&Te.dvbPriority&&_e[0].dvbPriority===Te.dvbPriority})).length)return H.length>1&&(H.forEach(function(Te){re+=Te.dvbWeight,de.push(re)}),ee=Math.floor(Math.random()*(re-1)),de.every(function(Te,ie){return Ae=ie,!(ee<Te)})),H[Ae]}((V=[],j.filter(function(W){return!O.contains(W.serviceLocation)||(W.dvbPriority&&V.push(W.dvbPriority),!1)}).filter(function(W){return!V.length||!W.dvbPriority||V.indexOf(W.dvbPriority)===-1})));var V}}}Ml.__dashjs_factory_name="DVBSelector";var Vu=F.Z.getClassFactory(Ml);function Dl(k){var O=(k=k||{}).blacklistController;return{select:function(j){var V,W=0;return j&&j.some(function(ee,H){return W=H,!O.contains(ee.serviceLocation)})&&(V=j[W]),V}}}Dl.__dashjs_factory_name="BasicSelector";var Ku=F.Z.getClassFactory(Dl);function Cf(){var k,O,j,V=this.context;function W(){for(var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],re=0,de=NaN,Ae=function(){var ie=ee[re],_e=H.findIndex(function(ye){return ye.serviceLocation&&ye.serviceLocation===ie});if(_e!==-1&&!j.contains(H[_e].serviceLocation))return de=_e,"break";re+=1};re<ee.length;){var Te=Ae();if(Te==="break")break}return de}return k={selectBaseUrlIndex:function(ee){var H=NaN;if(isNaN(ee.selectedIdx)){var re=O.getSteeringDataFromManifest();re&&re.defaultServiceLocationArray.length>0&&(H=W(re.defaultServiceLocationArray,ee.baseUrls))}var de=O.getCurrentSteeringResponseData();return ee.baseUrls&&ee.baseUrls.length&&de&&de.pathwayPriority&&de.pathwayPriority.length&&(H=W(de.pathwayPriority,ee.baseUrls)),H},setConfig:function(ee){ee.blacklistController&&(j=ee.blacklistController),ee.contentSteeringController&&(O=ee.contentSteeringController)}},O=Vi(V).getInstance(),k}Cf.__dashjs_factory_name="ContentSteeringSelector";var pm=F.Z.getClassFactory(Cf);function Dh(){var k,O,j,V,W,ee,H=this.context,re=(0,g.Z)(H).getInstance(),de=(0,qe.Z)(H).getInstance();function Ae(){O.reset()}return k={chooseSelector:function(Te){(0,ge.PS)(Te,"boolean"),ee=Te?V:j},select:function(Te){if(Te){if(de.get().streaming.applyContentSteering){var ie=W.selectBaseUrlIndex(Te);isNaN(ie)||ie===-1||(Te.selectedIdx=ie)}if(!isNaN(Te.selectedIdx))return Te.baseUrls[Te.selectedIdx];var _e=ee.select(Te.baseUrls);return _e?(Te.selectedIdx=Te.baseUrls.indexOf(_e),_e):(re.trigger(T.Z.URL_RESOLUTION_FAILED,{error:new ce.Z(we.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,we.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(ee===j&&Ae()))}},reset:Ae,setConfig:function(Te){Te.selector&&(ee=Te.selector),Te.contentSteeringSelector&&(W=Te.contentSteeringSelector)}},O=qs(H).create({updateEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),j=Ku(H).create({blacklistController:O}),V=Vu(H).create({blacklistController:O}),(W=pm(H).create()).setConfig({blacklistController:O}),ee=j,k}Dh.__dashjs_factory_name="BaseURLSelector";var gm=F.Z.getClassFactory(Dh);function zu(){var k,O,j,V,W,ee=this.context,H=(0,g.Z)(ee).getInstance(),re=(0,wt.Z)(ee).getInstance();function de(Te){j.update(Te),V.chooseSelector(O.getIsDVB(Te)),H.trigger(_.Z.BASE_URLS_UPDATED,{baseUrls:Ae(Te)})}function Ae(Te){return j.getBaseUrls(Te)}return k={reset:function(){j.reset(),V.reset()},initialize:function(Te){j.setConfig({adapter:O,contentSteeringController:W}),de(Te)},resolve:function(Te){var ie=j.getForPath(Te).reduce(function(_e,ye){var ze=V.select(ye);return ze?(re.isRelative(ze.url)?_e.url=re.resolve(ze.url,_e.url):(_e.url=ze.url,_e.serviceLocation=ze.serviceLocation),_e.availabilityTimeOffset=ze.availabilityTimeOffset,_e.availabilityTimeComplete=ze.availabilityTimeComplete,_e.queryParams=ze.queryParams,_e):new nr},new nr);if(!re.isRelative(ie.url))return ie},setConfig:function(Te){Te.baseURLTreeModel&&(j=Te.baseURLTreeModel),Te.baseURLSelector&&(V=Te.baseURLSelector),Te.adapter&&(O=Te.adapter),Te.contentSteeringController&&(W=Te.contentSteeringController)},getBaseUrls:Ae,update:de},j=hm(ee).create(),V=gm(ee).create(),H.on(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(Te){j.invalidateSelectedIndexes(Te.entry)},k),k}zu.__dashjs_factory_name="BaseURLController";var Ph=F.Z.getClassFactory(zu);function Su(k){return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Su(k)}function bf(k,O){return bf=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},bf(k,O)}function Vs(k,O){return!O||Su(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Rf(k){return Rf=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Rf(k)}var Ks=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&bf(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Rf(O);if(j){var re=Rf(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Vs(this,ee)});function W(ee,H){var re;return function(de,Ae){if(!(de instanceof Ae))throw new TypeError("Cannot call a class as a function")}(this,W),(re=V.call(this)).url=ee||null,re.type=H||null,re.mediaType=E.Z.STREAM,re.responseType="",re}return W}(Z.Z);function Ts(k){k=k||{};var O=this.context,j=(0,g.Z)(O).getInstance(),V=Ci(O).create({errHandler:k.errHandler,dashMetrics:k.dashMetrics,mediaPlayerModel:k.mediaPlayerModel,requestModifier:k.requestModifier,errors:we});return{load:function(W,ee,H){var re=function(Ae,Te){ee.resolved=!0,ee.resolvedContent=Ae||null,j.trigger(T.Z.XLINK_ELEMENT_LOADED,{element:ee,resolveObject:H,error:Ae||Te?null:new ce.Z(we.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,we.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+W)})};if(W==="urn:mpeg:dash:resolve-to-zero:2013")re(null,!0);else{var de=new Ks(W,st.w.XLINK_EXPANSION_TYPE);V.load({request:de,success:function(Ae){re(Ae)},error:function(){re(null)}})}},reset:function(){V&&(V.abort(),V=null)}}}Ts.__dashjs_factory_name="XlinkLoader";var wu=F.Z.getClassFactory(Ts),xf=function(k){(k=k||{}).escapeMode===void 0&&(k.escapeMode=!0),k.attributePrefix===void 0&&(k.attributePrefix="_"),k.arrayAccessForm=k.arrayAccessForm||"none",k.emptyNodeForm=k.emptyNodeForm||"text",k.enableToStringFunc===void 0&&(k.enableToStringFunc=!0),k.arrayAccessFormPaths=k.arrayAccessFormPaths||[],k.skipEmptyTextNodesForObj===void 0&&(k.skipEmptyTextNodesForObj=!0),k.stripWhitespaces===void 0&&(k.stripWhitespaces=!0),k.datetimeAccessFormPaths=k.datetimeAccessFormPaths||[],k.useDoubleQuotes===void 0&&(k.useDoubleQuotes=!1),k.xmlElementsFilter=k.xmlElementsFilter||[],k.jsonPropertiesFilter=k.jsonPropertiesFilter||[],k.keepCData===void 0&&(k.keepCData=!1),k.ignoreRoot===void 0&&(k.ignoreRoot=!1);function O(Se){var ke=Se.localName;return ke==null&&(ke=Se.baseName),ke!=null&&ke!=""||(ke=Se.nodeName),ke}function j(Se){return typeof Se=="string"?Se.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):Se}function V(Se,ke,Ie,Ge){for(var q=0;q<Se.length;q++){var le=Se[q];if(typeof le=="string"){if(le==Ge)break}else if(le instanceof RegExp){if(le.test(Ge))break}else if(typeof le=="function"&&le(ke,Ie,Ge))break}return q!=Se.length}function W(Se,ke,Ie){k.arrayAccessForm==="property"&&(Se[ke]instanceof Array?Se[ke+"_asArray"]=Se[ke]:Se[ke+"_asArray"]=[Se[ke]]),!(Se[ke]instanceof Array)&&k.arrayAccessFormPaths.length>0&&V(k.arrayAccessFormPaths,Se,ke,Ie)&&(Se[ke]=[Se[ke]])}function ee(Se){var ke=Se.split(/[-T:+Z]/g),Ie=new Date(ke[0],ke[1]-1,ke[2]),Ge=ke[5].split(".");if(Ie.setHours(ke[3],ke[4],Ge[0]),Ge.length>1&&Ie.setMilliseconds(Ge[1]),ke[6]&&ke[7]){var q=60*ke[6]+Number(ke[7]);q=0+((/\d\d-\d\d:\d\d$/.test(Se)?"-":"+")=="-"?-1*q:q),Ie.setMinutes(Ie.getMinutes()-q-Ie.getTimezoneOffset())}else Se.indexOf("Z",Se.length-1)!==-1&&(Ie=new Date(Date.UTC(Ie.getFullYear(),Ie.getMonth(),Ie.getDate(),Ie.getHours(),Ie.getMinutes(),Ie.getSeconds(),Ie.getMilliseconds())));return Ie}function H(Se,ke,Ie,Ge){return!(ke==1&&k.xmlElementsFilter.length>0)||V(k.xmlElementsFilter,Se,Ie,Ge)}function re(Se,ke){if(Se.nodeType==9){for(var Ie=new Object,Ge=Se.childNodes,q=0;q<Ge.length;q++)(ae=Ge[q]).nodeType==1&&(k.ignoreRoot?Ie=re(ae):(Ie={})[ue=O(ae)]=re(ae));return Ie}if(Se.nodeType==1){(Ie=new Object).__cnt=0;var le=[];for(Ge=Se.childNodes,q=0;q<Ge.length;q++){var ae,ue=O(ae=Ge[q]);if(ae.nodeType!=8){var te=ke+"."+ue;if(H(Ie,ae.nodeType,ue,te))if(Ie.__cnt++,Ie[ue]==null){var Pe=re(ae,te);(ue!="#text"||/[^\s]/.test(Pe))&&((xe={})[ue]=Pe,le.push(xe)),Ie[ue]=Pe,W(Ie,ue,te)}else{var xe;Ie[ue]!=null&&(Ie[ue]instanceof Array||(Ie[ue]=[Ie[ue]],W(Ie,ue,te))),Pe=re(ae,te),(ue!="#text"||/[^\s]/.test(Pe))&&((xe={})[ue]=Pe,le.push(xe)),Ie[ue][Ie[ue].length]=Pe}}}Ie.__children=le;for(var je=O(Se),Me=0;Me<Se.attributes.length;Me++){var ve=Se.attributes[Me];Ie.__cnt++;for(var De=ve.value,$e=0,mt=k.matchers.length;$e<mt;$e++){var ct=k.matchers[$e];ct.test(ve,je)&&(De=ct.converter(ve.value))}Ie[k.attributePrefix+ve.name]=De}var yt=function(pt){return pt.prefix}(Se);return yt!=null&&yt!=""&&(Ie.__cnt++,Ie.__prefix=yt),Ie["#text"]!=null&&(Ie.__text=Ie["#text"],Ie.__text instanceof Array&&(Ie.__text=Ie.__text.join("\n")),k.stripWhitespaces&&(Ie.__text=Ie.__text.trim()),delete Ie["#text"],k.arrayAccessForm=="property"&&delete Ie["#text_asArray"],Ie.__text=function(pt,Gt,Vt){if(k.datetimeAccessFormPaths.length>0){var jt=Vt.split(".#")[0];return V(k.datetimeAccessFormPaths,pt,Gt,jt)?ee(pt):pt}return pt}(Ie.__text,ue,ke+"."+ue)),Ie["#cdata-section"]!=null&&(Ie.__cdata=Ie["#cdata-section"],delete Ie["#cdata-section"],k.arrayAccessForm=="property"&&delete Ie["#cdata-section_asArray"]),Ie.__cnt==0&&k.emptyNodeForm=="text"?Ie="":Ie.__cnt==1&&Ie.__text!=null?Ie=Ie.__text:Ie.__cnt!=1||Ie.__cdata==null||k.keepCData?Ie.__cnt>1&&Ie.__text!=null&&k.skipEmptyTextNodesForObj&&(k.stripWhitespaces&&Ie.__text==""||Ie.__text.trim()=="")&&delete Ie.__text:Ie=Ie.__cdata,delete Ie.__cnt,!k.enableToStringFunc||Ie.__text==null&&Ie.__cdata==null||(Ie.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),Ie}if(Se.nodeType==3||Se.nodeType==4)return Se.nodeValue}function de(Se,ke,Ie,Ge){var q="<"+(Se!=null&&Se.__prefix!=null?Se.__prefix+":":"")+ke;if(Ie!=null)for(var le=0;le<Ie.length;le++){var ae=Ie[le],ue=Se[ae];k.escapeMode&&(ue=j(ue)),q+=" "+ae.substr(k.attributePrefix.length)+"=",k.useDoubleQuotes?q+='"'+ue+'"':q+="'"+ue+"'"}return q+(Ge?"/>":">")}function Ae(Se,ke){return"</"+(Se.__prefix!=null?Se.__prefix+":":"")+ke+">"}function Te(Se,ke){return k.arrayAccessForm=="property"&&(Ge="_asArray",(Ie=ke.toString()).indexOf(Ge,Ie.length-Ge.length)!==-1)||ke.toString().indexOf(k.attributePrefix)==0||ke.toString().indexOf("__")==0||Se[ke]instanceof Function;var Ie,Ge}function ie(Se){var ke=0;if(Se instanceof Object)for(var Ie in Se)Te(Se,Ie)||ke++;return ke}function _e(Se,ke,Ie){return k.jsonPropertiesFilter.length==0||Ie==""||V(k.jsonPropertiesFilter,Se,ke,Ie)}function ye(Se){var ke=[];if(Se instanceof Object)for(var Ie in Se)Ie.toString().indexOf("__")==-1&&Ie.toString().indexOf(k.attributePrefix)==0&&ke.push(Ie);return ke}function ze(Se){var ke="";return Se instanceof Object?ke+=function(Ie){var Ge="";return Ie.__cdata!=null&&(Ge+="<![CDATA["+Ie.__cdata+"]]>"),Ie.__text!=null&&(k.escapeMode?Ge+=j(Ie.__text):Ge+=Ie.__text),Ge}(Se):Se!=null&&(k.escapeMode?ke+=j(Se):ke+=Se),ke}function Oe(Se,ke){return Se===""?ke:Se+"."+ke}function Ze(Se,ke,Ie,Ge){var q="";if(Se.length==0)q+=de(Se,ke,Ie,!0);else for(var le=0;le<Se.length;le++)q+=de(Se[le],ke,ye(Se[le]),!1),q+=We(Se[le],Oe(Ge,ke)),q+=Ae(Se[le],ke);return q}function We(Se,ke){var Ie="";if(ie(Se)>0){for(var Ge in Se)if(!Te(Se,Ge)&&(ke==""||_e(Se,Ge,Oe(ke,Ge)))){var q=Se[Ge],le=ye(q);q==null||q==null?Ie+=de(q,Ge,le,!0):q instanceof Object?q instanceof Array?Ie+=Ze(q,Ge,le,ke):q instanceof Date?(Ie+=de(q,Ge,le,!1),Ie+=q.toISOString(),Ie+=Ae(q,Ge)):ie(q)>0||q.__text!=null||q.__cdata!=null?(Ie+=de(q,Ge,le,!1),Ie+=We(q,Oe(ke,Ge)),Ie+=Ae(q,Ge)):Ie+=de(q,Ge,le,!0):(Ie+=de(q,Ge,le,!1),Ie+=ze(q),Ie+=Ae(q,Ge))}}return Ie+ze(Se)}this.parseXmlString=function(Se){var ke;if(Se===void 0)return null;if(window.DOMParser){var Ie=new window.DOMParser;try{(ke=Ie.parseFromString(Se,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(ke=null)}catch(Ge){ke=null}}else Se.indexOf("<?")==0&&(Se=Se.substr(Se.indexOf("?>")+2)),(ke=new ActiveXObject("Microsoft.XMLDOM")).async="false",ke.loadXML(Se);return ke},this.asArray=function(Se){return Se===void 0||Se==null?[]:Se instanceof Array?Se:[Se]},this.toXmlDateTime=function(Se){return Se instanceof Date?Se.toISOString():typeof Se=="number"?new Date(Se).toISOString():null},this.asDateTime=function(Se){return typeof Se=="string"?ee(Se):Se},this.xml2json=function(Se){return re(Se)},this.xml_str2json=function(Se){var ke=this.parseXmlString(Se);return ke!=null?this.xml2json(ke):null},this.json2xml_str=function(Se){return We(Se,"")},this.json2xml=function(Se){var ke=this.json2xml_str(Se);return this.parseXmlString(ke)},this.getVersion=function(){return"1.2.0"}},sa="onLoad";function Nf(k){k=k||{};var O,j,V,W,ee,H,re=this.context,de=(0,g.Z)(re).getInstance(),Ae=(0,wt.Z)(re).getInstance();function Te(Oe,Ze,We){var Se,ke,Ie={};Ie.elements=Oe,Ie.type=Ze,Ie.resolveType=We,Ie.elements.length===0&&_e(Ie);for(var Ge=0;Ge<Ie.elements.length;Ge++)Se=Ie.elements[Ge],ke=Ae.isHTTPURL(Se.url)?Se.url:Se.originalContent.BaseURL+Se.url,H.load(ke,Se,Ie)}function ie(Oe){var Ze,We,Se="";if(Ze=Oe.element,We=Oe.resolveObject,Ze.resolvedContent){var ke=0;Ze.resolvedContent.indexOf("<?xml")===0&&(ke=Ze.resolvedContent.indexOf("?>")+2),Se=Ze.resolvedContent.substr(0,ke)+"<response>"+Ze.resolvedContent.substr(ke)+"</response>",Ze.resolvedContent=ee.xml_str2json(Se)}(function(Ie){var Ge;for(Ge=0;Ge<Ie.elements.length;Ge++)if(Ie.elements[Ge].resolved===!1)return!1;return!0})(We)&&_e(We)}function _e(Oe){var Ze,We,Se=[];if(function(ke){var Ie,Ge,q,le,ae,ue,te=[];for(le=ke.elements.length-1;le>=0;le--){if(Ge=(Ie=ke.elements[le]).type+"_asArray",Ie.resolvedContent){if(Ie.resolvedContent)for(ae=0;ae<Ie.resolvedContent[Ge].length;ae++)q=Ie.resolvedContent[Ge][ae],te.push(q)}else delete Ie.originalContent["xlink:actuate"],delete Ie.originalContent["xlink:href"],te.push(Ie.originalContent);for(Ie.parentElement[Ge].splice(Ie.index,1),ue=0;ue<te.length;ue++)Ie.parentElement[Ge].splice(Ie.index+ue,0,te[ue]);te=[]}ke.elements.length>0&&V.run(W)}(Oe),Oe.resolveType==="onActuate"&&de.trigger(T.Z.XLINK_READY,{manifest:W}),Oe.resolveType===sa)switch(Oe.type){case y.Z.PERIOD:for(Ze=0;Ze<W[y.Z.PERIOD+"_asArray"].length;Ze++)(We=W[y.Z.PERIOD+"_asArray"][Ze]).hasOwnProperty(y.Z.ADAPTATION_SET+"_asArray")&&(Se=Se.concat(ye(We[y.Z.ADAPTATION_SET+"_asArray"],We,y.Z.ADAPTATION_SET,sa))),We.hasOwnProperty(y.Z.EVENT_STREAM+"_asArray")&&(Se=Se.concat(ye(We[y.Z.EVENT_STREAM+"_asArray"],We,y.Z.EVENT_STREAM,sa)));Te(Se,y.Z.ADAPTATION_SET,sa);break;case y.Z.ADAPTATION_SET:de.trigger(T.Z.XLINK_READY,{manifest:W})}}function ye(Oe,Ze,We,Se){var ke,Ie,Ge,q=[];for(Ie=Oe.length-1;Ie>=0;Ie--)(ke=Oe[Ie]).hasOwnProperty("xlink:href")&&ke["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&Oe.splice(Ie,1);for(Ie=0;Ie<Oe.length;Ie++)(ke=Oe[Ie]).hasOwnProperty("xlink:href")&&ke.hasOwnProperty("xlink:actuate")&&ke["xlink:actuate"]===Se&&(Ge=ze(ke["xlink:href"],Ze,We,Ie,Se,ke),q.push(Ge));return q}function ze(Oe,Ze,We,Se,ke,Ie){return{url:Oe,parentElement:Ze,type:We,index:Se,resolveType:ke,originalContent:Ie,resolvedContent:null,resolved:!1}}return O={resolveManifestOnLoad:function(Oe){ee=new xf({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:j}),(W=Oe).Period_asArray?Te(ye(W.Period_asArray,W,y.Z.PERIOD,sa),y.Z.PERIOD,sa):de.trigger(T.Z.XLINK_READY,{manifest:W})},setMatchers:function(Oe){Oe&&(j=Oe)},setIron:function(Oe){Oe&&(V=Oe)},reset:function(){de.off(T.Z.XLINK_ELEMENT_LOADED,ie,O),H&&(H.reset(),H=null)}},de.on(T.Z.XLINK_ELEMENT_LOADED,ie,O),H=wu(re).create({errHandler:k.errHandler,dashMetrics:k.dashMetrics,mediaPlayerModel:k.mediaPlayerModel,requestModifier:k.requestModifier,settings:k.settings}),O}Nf.__dashjs_factory_name="XlinkController";var Oh=F.Z.getClassFactory(Nf);function Pl(k){return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Pl(k)}function mm(k){function O(W,ee){for(var H in W)ee.hasOwnProperty(H)||(ee[H]=W[H])}function j(W,ee,H){for(var re=0,de=W.length;re<de;++re){var Ae=W[re];if(ee[Ae.name])if(H[Ae.name]){if(Ae.merge){var Te=ee[Ae.name],ie=H[Ae.name];Pl(Te)==="object"&&Pl(ie)==="object"?O(Te,ie):H[Ae.name]=Te+ie}}else H[Ae.name]=ee[Ae.name]}}function V(W,ee){for(var H=0,re=W.children.length;H<re;++H){var de=W.children[H],Ae=ee[de.name+"_asArray"];if(Ae)for(var Te=0,ie=Ae.length;Te<ie;++Te){var _e=Ae[Te];j(W.properties,ee,_e),V(de,_e)}}}return{run:function(W){if(W===null||Pl(W)!=="object")return W;if(W.Period_asArray&&"period"in k)for(var ee=k.period,H=W.Period_asArray,re=0,de=H.length;re<de;++re){var Ae=H[re];if(V(ee,Ae),"adaptationset"in k){var Te=Ae.AdaptationSet_asArray;if(Te)for(var ie=k.adaptationset,_e=0,ye=Te.length;_e<ye;++_e)V(ie,Te[_e])}}return W}}}mm.__dashjs_factory_name="ObjectIron";var Ei=F.Z.getClassFactory(mm);function Mf(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var Au=function(){function k(V,W){(function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")})(this,k),this._test=V,this._converter=W}var O,j;return O=k,(j=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&Mf(O.prototype,j),k}();function Sc(k){return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Sc(k)}function $r(k,O,j){return O in k?Object.defineProperty(k,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):k[O]=j,k}function Yu(k,O){return Yu=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},Yu(k,O)}function wc(k,O){return!O||Sc(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Df(k){return Df=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Df(k)}var vm=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&Yu(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Df(O);if(j){var re=Df(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return wc(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee,H){var re,de=($r(re={},y.Z.MPD,[y.Z.ID,y.Z.PROFILES]),$r(re,y.Z.PERIOD,[y.Z.ID]),$r(re,y.Z.BASE_URL,[y.Z.SERVICE_LOCATION,y.Z.BYTE_RANGE]),$r(re,y.Z.SEGMENT_BASE,[y.Z.INDEX_RANGE]),$r(re,y.Z.INITIALIZATION,[y.Z.RANGE]),$r(re,y.Z.REPRESENTATION_INDEX,[y.Z.RANGE]),$r(re,y.Z.SEGMENT_LIST,[y.Z.INDEX_RANGE]),$r(re,y.Z.BITSTREAM_SWITCHING,[y.Z.RANGE]),$r(re,y.Z.SEGMENT_URL,[y.Z.MEDIA_RANGE,y.Z.INDEX_RANGE]),$r(re,y.Z.SEGMENT_TEMPLATE,[y.Z.INDEX_RANGE,y.Z.MEDIA,y.Z.INDEX,y.Z.INITIALIZATION_MINUS,y.Z.BITSTREAM_SWITCHING_MINUS]),$r(re,y.Z.ASSET_IDENTIFIER,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.EVENT_STREAM,[y.Z.VALUE]),$r(re,y.Z.ADAPTATION_SET,[y.Z.PROFILES,y.Z.MIME_TYPE,y.Z.SEGMENT_PROFILES,y.Z.CODECS,y.Z.CONTENT_TYPE]),$r(re,y.Z.FRAME_PACKING,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.AUDIO_CHANNEL_CONFIGURATION,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.CONTENT_PROTECTION,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.ESSENTIAL_PROPERTY,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.SUPPLEMENTAL_PROPERTY,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.INBAND_EVENT_STREAM,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.ACCESSIBILITY,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.ROLE,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.RATING,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.VIEWPOINT,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.CONTENT_COMPONENT,[y.Z.CONTENT_TYPE]),$r(re,y.Z.REPRESENTATION,[y.Z.ID,y.Z.DEPENDENCY_ID,y.Z.MEDIA_STREAM_STRUCTURE_ID]),$r(re,y.Z.SUBSET,[y.Z.ID]),$r(re,y.Z.METRICS,[y.Z.METRICS_MINUS]),$r(re,y.Z.REPORTING,[y.Z.VALUE,y.Z.ID]),re);if(de.hasOwnProperty(H)){var Ae=de[H];return Ae!==void 0&&Ae.indexOf(ee.name)>=0}return!1},function(ee){return String(ee)})}return W}(Au);function Lh(k){return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Lh(k)}function kh(k,O){return kh=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},kh(k,O)}function PE(k,O){return!O||Lh(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Pf(k){return Pf=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Pf(k)}var Wu=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,Of=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&kh(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Pf(O);if(j){var re=Pf(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return PE(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee){for(var H=[y.Z.MIN_BUFFER_TIME,y.Z.MEDIA_PRESENTATION_DURATION,y.Z.MINIMUM_UPDATE_PERIOD,y.Z.TIMESHIFT_BUFFER_DEPTH,y.Z.MAX_SEGMENT_DURATION,y.Z.MAX_SUBSEGMENT_DURATION,y.Z.SUGGESTED_PRESENTATION_DELAY,y.Z.START,E.Z.START_TIME,y.Z.DURATION],re=H.length,de=0;de<re;de++)if(ee.nodeName===H[de])return Wu.test(ee.value);return!1},function(ee){var H=Wu.exec(ee),re=31536e3*parseFloat(H[3]||0)+2592e3*parseFloat(H[5]||0)+86400*parseFloat(H[7]||0)+3600*parseFloat(H[9]||0)+60*parseFloat(H[11]||0)+parseFloat(H[13]||0);return H[1]!==void 0&&(re=-re),re})}return W}(Au);function Lf(k){return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Lf(k)}function co(k,O){return co=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},co(k,O)}function Fh(k,O){return!O||Lf(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Ss(k){return Ss=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Ss(k)}var Wo=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,$u=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&co(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Ss(O);if(j){var re=Ss(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Fh(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee){return Wo.test(ee.value)},function(ee){var H,re=Wo.exec(ee);if(H=Date.UTC(parseInt(re[1],10),parseInt(re[2],10)-1,parseInt(re[3],10),parseInt(re[4],10),parseInt(re[5],10),re[6]&&parseInt(re[6],10)||0,re[7]&&1e3*parseFloat(re[7])||0),re[9]&&re[10]){var de=60*parseInt(re[9],10)+parseInt(re[10],10);H+=(re[8]==="+"?-1:1)*de*60*1e3}return new Date(H)})}return W}(Au);function za(k){return za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},za(k)}function hi(k,O){return hi=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},hi(k,O)}function Ki(k,O){return!O||za(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function ws(k){return ws=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},ws(k)}var ym=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Ol=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&hi(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=ws(O);if(j){var re=ws(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Ki(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee){return ym.test(ee.value)},function(ee){return parseFloat(ee)})}return W}(Au);function Co(k){return Co=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Co(k)}function Xu(k,O,j){return O in k?Object.defineProperty(k,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):k[O]=j,k}function _r(k,O){return _r=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},_r(k,O)}function Mi(k,O){return!O||Co(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function kf(k){return kf=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},kf(k)}var Em=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&_r(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=kf(O);if(j){var re=kf(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Mi(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee,H){var re,de=(Xu(re={},y.Z.ADAPTATION_SET,[y.Z.LANG]),Xu(re,y.Z.REPRESENTATION,[y.Z.LANG]),Xu(re,y.Z.CONTENT_COMPONENT,[y.Z.LANG]),Xu(re,y.Z.LABEL,[y.Z.LANG]),Xu(re,y.Z.GROUP_LABEL,[y.Z.LANG]),re);if(de.hasOwnProperty(H)){var Ae=de[H];return Ae!==void 0&&Ae.indexOf(ee.name)>=0}return!1},function(ee){return Tc()(ee)||String(ee)})}return W}(Au);function Uh(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var Di=function(){function k(V){var W;(function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")})(this,k),this._name=V,this._merge=(W=V)&&W.length&&W.charAt(0)===W.charAt(0).toUpperCase()}var O,j;return O=k,(j=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&Uh(O.prototype,j),k}();function Qu(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var Ya=function(){function k(V,W,ee){var H=this;(function(re,de){if(!(re instanceof de))throw new TypeError("Cannot call a class as a function")})(this,k),this._name=V||"",this._properties=[],this._children=ee||[],Array.isArray(W)&&W.forEach(function(re){H._properties.push(new Di(re))})}var O,j;return O=k,(j=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&Qu(O.prototype,j),k}();function Bh(k){return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Bh(k)}function Ll(k,O){return Ll=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},Ll(k,O)}function _o(k,O){return!O||Bh(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function zs(k){return zs=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},zs(k)}var ba=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&Ll(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=zs(O);if(j){var re=zs(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return _o(this,ee)});function W(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,W);var ee=[y.Z.PROFILES,y.Z.WIDTH,y.Z.HEIGHT,y.Z.SAR,y.Z.FRAMERATE,y.Z.AUDIO_SAMPLING_RATE,y.Z.MIME_TYPE,y.Z.SEGMENT_PROFILES,y.Z.CODECS,y.Z.MAXIMUM_SAP_PERIOD,y.Z.START_WITH_SAP,y.Z.MAX_PLAYOUT_RATE,y.Z.CODING_DEPENDENCY,y.Z.SCAN_TYPE,y.Z.FRAME_PACKING,y.Z.AUDIO_CHANNEL_CONFIGURATION,y.Z.CONTENT_PROTECTION,y.Z.ESSENTIAL_PROPERTY,y.Z.ESSENTIAL_PROPERTY+"_asArray",y.Z.SUPPLEMENTAL_PROPERTY,y.Z.INBAND_EVENT_STREAM];return V.call(this,y.Z.ADAPTATION_SET,ee,[new Ya(y.Z.REPRESENTATION,ee,[new Ya(y.Z.SUB_REPRESENTATION,ee)])])}return W}(Ya);function Oo(k){return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Oo(k)}function Ff(k,O){return Ff=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},Ff(k,O)}function _m(k,O){return!O||Oo(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Uf(k){return Uf=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Uf(k)}var Iu=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&Ff(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Uf(O);if(j){var re=Uf(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return _m(this,ee)});function W(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,W);var ee=[y.Z.SEGMENT_BASE,y.Z.SEGMENT_TEMPLATE,y.Z.SEGMENT_LIST];return V.call(this,y.Z.PERIOD,ee,[new Ya(y.Z.ADAPTATION_SET,ee,[new Ya(y.Z.REPRESENTATION,ee)])])}return W}(Ya);function As(k){k=k||{};var O,j,V,W,ee,H=this.context,re=k.debug;return O={parse:function(de){var Ae,Te=window.performance.now();if(!(Ae=W.xml_str2json(de)))throw new Error("parsing the manifest failed");var ie=window.performance.now();Ae.Patch?((Ae=Ae.Patch).add_asArray&&Ae.add_asArray.forEach(function(ye){return ee.run(ye)}),Ae.replace_asArray&&Ae.replace_asArray.forEach(function(ye){return ee.run(ye)})):(Ae=Ae.MPD,ee.run(Ae));var _e=window.performance.now();return j.info("Parsing complete: ( xml2json: "+(ie-Te).toPrecision(3)+"ms, objectiron: "+(_e-ie).toPrecision(3)+"ms, total: "+((_e-Te)/1e3).toPrecision(3)+"s)"),Ae.protocol="DASH",Ae},getMatchers:function(){return V},getIron:function(){return ee}},j=re.getLogger(O),V=[new Of,new $u,new Ol,new Em,new vm],W=new xf({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:V}),ee=Ei(H).create({adaptationset:new ba,period:new Iu}),O}As.__dashjs_factory_name="DashParser";var Ac=F.Z.getClassFactory(As);function Tm(k){k=k||{};var O,j,V,W,ee,H=this.context,re=k.debug,de=k.settings,Ae=(0,g.Z)(H).getInstance(),Te=(0,wt.Z)(H).getInstance(),ie=k.mssHandler,_e=k.errHandler;function ye(Oe){Ae.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:Oe.manifest})}function ze(Oe){var Ze=null;return Oe.indexOf("SmoothStreamingMedia")>-1?(ie&&(Ze=ie.createMssParser(),ie.createMssFragmentProcessor(),ie.registerEvents()),Ze):Oe.indexOf("MPD")>-1||Oe.indexOf("Patch")>-1?Ac(H).create({debug:re}):Ze}return O={load:function(Oe){var Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,We=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Se=new Date,ke=new Ks(Oe,st.w.MPD_TYPE);Ze&&(ke.serviceLocation=Ze),We&&(ke.queryParams=We),ke.requestStartDate||(ke.requestStartDate=Se),Ae.trigger(T.Z.MANIFEST_LOADING_STARTED,{request:ke}),V.load({request:ke,success:function(Ie,Ge,q){var le,ae,ue;if(W)if(q&&q!==Oe?(ae=Te.parseBaseUrl(q),le=q):(Te.isRelative(Oe)&&(Oe=Te.resolve(Oe,window.location.href)),ae=Te.parseBaseUrl(Oe)),Ge!="No Content")if(ee===null&&(ee=ze(Ie)),ee!==null){W.setMatchers(ee.getMatchers()),W.setIron(ee.getIron());try{ue=ee.parse(Ie)}catch(Pe){return void Ae.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}if(ue){if(ue.url=le||Oe,ue.originalUrl||(ue.originalUrl=ue.url),de&&de.get().streaming.enableManifestDurationMismatchFix&&ue.mediaPresentationDuration&&ue.Period_asArray.length>1){var te=ue.Period_asArray.reduce(function(Pe,xe){return Pe+xe.duration},0);!isNaN(te)&&ue.mediaPresentationDuration>te&&(j.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),ue.mediaPresentationDuration=te)}ue.baseUri=ae,ue.loadedTime=new Date,W.resolveManifestOnLoad(ue),Ae.trigger(T.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:Ie})}else Ae.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}else Ae.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))});else Ae.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(Ie,Ge,q){Ae.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(we.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,we.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(Oe,", ").concat(q))})}})},reset:function(){Ae.off(T.Z.XLINK_READY,ye,O),ie&&ie.reset(),W&&(W.reset(),W=null),V&&(V.abort(),V=null)}},j=re.getLogger(O),Ae.on(T.Z.XLINK_READY,ye,O),V=Ci(H).create({errHandler:k.errHandler,dashMetrics:k.dashMetrics,mediaPlayerModel:k.mediaPlayerModel,requestModifier:k.requestModifier,urlUtils:Te,constants:E.Z,dashConstants:y.Z,errors:we,requestTimeout:k.settings.get().streaming.manifestRequestTimeout}),W=Oh(H).create({errHandler:_e,dashMetrics:k.dashMetrics,mediaPlayerModel:k.mediaPlayerModel,requestModifier:k.requestModifier,settings:k.settings}),ee=null,O}Tm.__dashjs_factory_name="ManifestLoader";var OE=F.Z.getClassFactory(Tm);function jh(){var k=this.context,O=(0,g.Z)(k).getInstance();return{error:function(j){O.trigger(T.Z.ERROR,{error:j})}}}jh.__dashjs_factory_name="ErrorHandler";var Sm=F.Z.getSingletonFactory(jh),wm=w(1715);function _i(){var k,O,j,V,W,ee,H=this.context,re=(0,g.Z)(H).getInstance();function de(Ae,Te){if(!Te||!Te.Period_asArray||Te.Period_asArray.length===0)return Promise.resolve();var ie=[];return Te.Period_asArray.forEach(function(_e){ie.push(function(ye,ze){return new Promise(function(Oe){if(ye&&ye.AdaptationSet_asArray&&ye.AdaptationSet_asArray.length!==0){var Ze=[];ye.AdaptationSet_asArray.forEach(function(We){O.getIsTypeOf(We,ze)&&Ze.push(function(Se,ke){return new Promise(function(Ie){if(Se.Representation_asArray&&Se.Representation_asArray.length!==0){var Ge=[],q=[];Se.Representation_asArray.forEach(function(le,ae){var ue=O.getCodec(Se,ae,!1),te=function(Pe,xe,je){switch(Pe){case E.Z.VIDEO:return function(Me,ve){return{codec:ve,width:Me.width||null,height:Me.height||null,framerate:Me.frameRate||null,bitrate:Me.bandwidth||null}}(xe,je);case E.Z.AUDIO:return function(Me,ve){var De=Me.audioSamplingRate||null;return{codec:ve,bitrate:Me.bandwidth||null,samplerate:De}}(xe,je);default:return null}}(ke,le,ue);q.push(te),Ge.push(j.supportsCodec(te,ke))}),Promise.all(Ge).then(function(le){Se.Representation_asArray=Se.Representation_asArray.filter(function(ae,ue){return le[ue]||ee.debug("[Stream] Codec ".concat(q[ue].codec," not supported ")),le[ue]}),Ie()}).catch(function(){Ie()})}else Ie()})}(We,ze))}),Promise.all(Ze).then(function(){ye.AdaptationSet_asArray=ye.AdaptationSet_asArray.filter(function(We){var Se=We.Representation_asArray&&We.Representation_asArray.length>0;return Se||(re.trigger(T.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:We}),ee.warn("AdaptationSet has been removed because of no supported Representation")),Se}),Oe()}).catch(function(){Oe()})}else Oe()})}(_e,Ae))}),Promise.all(ie)}return k={setConfig:function(Ae){Ae&&(Ae.adapter&&(O=Ae.adapter),Ae.capabilities&&(j=Ae.capabilities),Ae.settings&&(V=Ae.settings),Ae.customParametersModel&&(W=Ae.customParametersModel))},filterUnsupportedFeatures:function(Ae){return new Promise(function(Te){var ie=[];ie.push(de(E.Z.VIDEO,Ae)),ie.push(de(E.Z.AUDIO,Ae)),Promise.all(ie).then(function(){V.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(_e){_e&&_e.Period_asArray&&_e.Period_asArray.length!==0&&_e.Period_asArray.forEach(function(ye){ye.AdaptationSet_asArray=ye.AdaptationSet_asArray.filter(function(ze){return!ze.Representation_asArray||ze.Representation_asArray.length===0||(ze.Representation_asArray=ze.Representation_asArray.filter(function(Oe){var Ze=O.getEssentialPropertiesForRepresentation(Oe);if(Ze&&Ze.length>0)for(var We=0;We<Ze.length;){if(!j.supportsEssentialProperty(Ze[We]))return ee.debug("[Stream] EssentialProperty not supported: "+Ze[We].schemeIdUri),!1;We+=1}return!0}),ze.Representation_asArray&&ze.Representation_asArray.length>0)})})}(Ae),function(_e){var ye=W.getCustomCapabilitiesFilters();ye&&ye.length!==0&&_e&&_e.Period_asArray&&_e.Period_asArray.length!==0&&_e.Period_asArray.forEach(function(ze){ze.AdaptationSet_asArray=ze.AdaptationSet_asArray.filter(function(Oe){return!Oe.Representation_asArray||Oe.Representation_asArray.length===0||(Oe.Representation_asArray=Oe.Representation_asArray.filter(function(Ze){return!ye.some(function(We){return!We(Ze)})}),Oe.Representation_asArray&&Oe.Representation_asArray.length>0)})})}(Ae),Te()}).catch(function(){Te()})})}},ee=(0,M.Z)(H).getInstance().getLogger(k),k}_i.__dashjs_factory_name="CapabilitiesFilter";var LE=F.Z.getSingletonFactory(_i),Am=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function Ys(){var k;return{initialize:function(O){if(k=new Am,!O)return null;var j=O.indexOf("#");if(j!==-1)for(var V=O.substr(j+1).split("&"),W=0,ee=V.length;W<ee;++W){var H=V[W],re=H.indexOf("=");if(re!==-1){var de=H.substring(0,re);k.hasOwnProperty(de)&&(k[de]=H.substr(re+1))}}},getURIFragmentData:function(){return k}}}Ys.__dashjs_factory_name="URIFragmentModel";var Ra=F.Z.getSingletonFactory(Ys);function Ju(){var k,O=this.context,j=(0,g.Z)(O).getInstance();return{getValue:function(){return k},setValue:function(V){k=V,V&&j.trigger(T.Z.MANIFEST_LOADED,{data:V})}}}Ju.__dashjs_factory_name="ManifestModel";var Ic=F.Z.getSingletonFactory(Ju),Cc=-.5;function Or(){var k,O,j,V,W=this.context,ee=(0,qe.Z)(W).getInstance();function H(Ae,Te){return isNaN(Ae)?0:Ae>0?(Te&&O.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Ae<Cc?(Te&&O.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(Cc,": ").concat(-50,"% playback speed.")),Cc):Ae}function re(Ae,Te){return isNaN(Ae)?0:Ae<0?(Te&&O.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Ae>1?(Te&&O.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):Ae}function de(){var Ae=ee.get().streaming.buffer.stableBufferTime>0?ee.get().streaming.buffer.stableBufferTime:ee.get().streaming.buffer.fastSwitchEnabled?20:12,Te=j.getLiveDelay();return!isNaN(Te)&&Te>0?Math.min(Ae,Te):Ae}return k={getCatchupMaxDrift:function(){if(!isNaN(ee.get().streaming.liveCatchup.maxDrift)&&ee.get().streaming.liveCatchup.maxDrift>0)return ee.get().streaming.liveCatchup.maxDrift;var Ae=V.getServiceDescriptionSettings();return Ae&&Ae.liveCatchup&&!isNaN(Ae.liveCatchup.maxDrift)&&Ae.liveCatchup.maxDrift>0?Ae.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return ee.get().streaming.liveCatchup.enabled!==null?ee.get().streaming.liveCatchup.enabled:j.getInitialCatchupModeActivated()},getStableBufferTime:de,getInitialBufferLevel:function(){var Ae=ee.get().streaming.buffer.initialBufferLevel;return isNaN(Ae)||Ae<0?0:Math.min(de(),Ae)},getRetryAttemptsForType:function(Ae){var Te=isNaN(ee.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:ee.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return j.getLowLatencyModeEnabled()?ee.get().streaming.retryAttempts[Ae]*Te:ee.get().streaming.retryAttempts[Ae]},getRetryIntervalsForType:function(Ae){var Te=isNaN(ee.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:ee.get().streaming.retryIntervals.lowLatencyReductionFactor;return j.getLowLatencyModeEnabled()?ee.get().streaming.retryIntervals[Ae]/Te:ee.get().streaming.retryIntervals[Ae]},getCatchupPlaybackRates:function(Ae){var Te=ee.get().streaming.liveCatchup.playbackRate;if(!isNaN(Te.min)||!isNaN(Te.max))return{min:H(Te.min,Ae),max:re(Te.max,Ae)};var ie=V.getServiceDescriptionSettings();if(ie&&ie.liveCatchup&&(!isNaN(ie.liveCatchup.playbackRate.min)||!isNaN(ie.liveCatchup.playbackRate.max))){var _e=ie.liveCatchup.playbackRate;return{min:H(_e.min,Ae),max:re(_e.max,Ae)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(Ae,Te){try{var ie=ee.get().streaming.abr[Ae][Te];if(!isNaN(ie)&&ie!==-1)return ie;var _e=V.getServiceDescriptionSettings();return _e&&_e[Ae]&&!isNaN(_e[Ae][Te])?_e[Ae][Te]:-1}catch(ye){return-1}},setConfig:function(Ae){Ae.playbackController&&(j=Ae.playbackController),Ae.serviceDescriptionController&&(V=Ae.serviceDescriptionController)},reset:function(){}},O=(0,M.Z)(W).getInstance().getLogger(k),k}Or.__dashjs_factory_name="MediaPlayerModel";var el=F.Z.getSingletonFactory(Or),Zh=w(1767);function Bf(k){var O=(k=k||{}).abrController,j=k.switchHistory,V=k.droppedFramesHistory,W=k.currentRequest,ee=k.useBufferOccupancyABR,H=k.useL2AABR,re=k.useLoLPABR,de=k.streamProcessor?k.streamProcessor.getScheduleController():null,Ae=k.streamProcessor?k.streamProcessor.getRepresentationInfo():null,Te=k.videoModel?k.videoModel:null;function ie(){return Ae?Ae.mediaInfo:null}return{getMediaType:function(){var _e=ie();return _e?_e.type:null},getMediaInfo:ie,getDroppedFramesHistory:function(){return V},getCurrentRequest:function(){return W},getSwitchHistory:function(){return j},getStreamInfo:function(){var _e=ie();return _e?_e.streamInfo:null},getScheduleController:function(){return de},getAbrController:function(){return O},getRepresentationInfo:function(){return Ae},useBufferOccupancyABR:function(){return ee},useL2AABR:function(){return H},useLoLPABR:function(){return re},getVideoModel:function(){return Te}}}Bf.__dashjs_factory_name="RulesContext";var bc=F.Z.getClassFactory(Bf),Rc=w(2068);function qh(){var k=[],O=[];return{push:function(j){j.newValue===Rc.Z.NO_CHANGE&&(j.newValue=j.oldValue),k[j.oldValue]||(k[j.oldValue]={noDrops:0,drops:0,dropSize:0});var V=j.newValue-j.oldValue,W=V<0?1:0,ee=W?-V:0,H=W?0:1;if(k[j.oldValue].drops+=W,k[j.oldValue].dropSize+=ee,k[j.oldValue].noDrops+=H,O.push({idx:j.oldValue,noDrop:H,drop:W,dropSize:ee}),O.length>8){var re=O.shift();k[re.idx].drops-=re.drop,k[re.idx].dropSize-=re.dropSize,k[re.idx].noDrops-=re.noDrop}},getSwitchRequests:function(){return k},reset:function(){k=[],O=[]}}}qh.__dashjs_factory_name="SwitchRequestHistory";var Im=F.Z.getClassFactory(qh);function Cm(){var k={},O={},j={};return{push:function(V,W,ee){if(W){k[V]||(k[V]=[],O[V]=0,j[V]=0);var H=ee&&ee.droppedVideoFrames?ee.droppedVideoFrames:0,re=ee&&ee.totalVideoFrames?ee.totalVideoFrames:0,de=H-O[V];O[V]=H;var Ae=re-j[V];j[V]=re;var Te=k[V];isNaN(W)||(Te[W]?(Te[W].droppedVideoFrames+=de,Te[W].totalVideoFrames+=Ae):Te[W]={droppedVideoFrames:de,totalVideoFrames:Ae})}},getFrameHistory:function(V){return k[V]},clearForStream:function(V){try{delete k[V],delete O[V],delete j[V]}catch(W){}},reset:function(){k={},O={},j={}}}}Cm.__dashjs_factory_name="DroppedFramesHistory";var kE=F.Z.getClassFactory(Cm);function xc(k){var O,j,V,W,ee,H=this.context,re=(k=k||{}).settings,de=(0,g.Z)(H).getInstance();function Ae(Oe,Ze,We,Se){var ke=Math.pow(.5,We/Se.fast);Oe.fastEstimate=(1-ke)*Ze+ke*Oe.fastEstimate;var Ie=Math.pow(.5,We/Se.slow);Oe.slowEstimate=(1-Ie)*Ze+Ie*Oe.slowEstimate,Oe.totalWeight+=We}function Te(Oe,Ze,We){return re.get().streaming.abr.movingAverageMethod!==E.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(Se,ke){var Ie=Se?ee.throughputHalfLife:ee.latencyHalfLife,Ge=Se?V[ke]:W[ke];if(!Ge||Ge.totalWeight<=0)return NaN;var q=Ge.fastEstimate/(1-Math.pow(.5,Ge.totalWeight/Ie.fast)),le=Ge.slowEstimate/(1-Math.pow(.5,Ge.totalWeight/Ie.slow));return Se?Math.min(q,le):Math.max(q,le)}(Oe,Ze):function(Se,ke,Ie){var Ge=function(le,ae,ue){var te,Pe;if(le?(te=O[ae],Pe=ue?3:4):(te=j[ae],Pe=4),te){if(Pe>=te.length)Pe=te.length;else if(le)for(var xe=1;xe<Pe;++xe){var je=te[te.length-xe]/te[te.length-xe-1];if((je>=1.3||je<=.7692307692307692)&&(Pe+=1)===te.length)break}}else Pe=0;return Pe}(Se,ke,Ie),q=(Se?O:j)[ke];return Ge!==0&&q&&q.length!==0?(q=q.slice(-Ge)).reduce(function(le,ae){return le+ae})/q.length:NaN}(Oe,Ze,We)}function ie(Oe,Ze){return Te(!0,Oe,Ze)}function _e(Oe){O[Oe]=O[Oe]||[],j[Oe]=j[Oe]||[],V[Oe]=V[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0},W[Oe]=W[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function ye(){O={},j={},V={},W={}}var ze={push:function(Oe,Ze,We){if(Ze.trace&&Ze.trace.length){var Se,ke=Ze.tresponse.getTime()-Ze.trequest.getTime()||1,Ie=Ze._tfinish.getTime()-Ze.tresponse.getTime()||1,Ge=Ze.trace.reduce(function(ue,te){return ue+te.b[0]},0),q=0;if((Se=Ze._fileLoaderType&&Ze._fileLoaderType===E.Z.FILE_LOADER_TYPES.FETCH?Ze.trace.reduce(function(ue,te){return ue+te.d},0):We?Ie:ke+Ie)!==0&&(q=Math.round(8*Ge/Se)),Ze.cmsd){var le=Ze.cmsd.dynamic&&Ze.cmsd.dynamic.etp?Ze.cmsd.dynamic.etp:null;if(le){var ae=re.get().streaming.cmsd.abr.etpWeightRatio;ae>0&&ae<=1&&(q=q*(1-ae)+le*ae)}}if(_e(Oe),function(ue,te,Pe){return ue===E.Z.VIDEO?Pe<re.get().streaming.cacheLoadThresholds[E.Z.VIDEO]:ue===E.Z.AUDIO?Pe<re.get().streaming.cacheLoadThresholds[E.Z.AUDIO]:void 0}(Oe,0,Ie)){if(O[Oe].length>0&&!O[Oe].hasCachedEntries)return;O[Oe].hasCachedEntries=!0}else O[Oe]&&O[Oe].hasCachedEntries&&function(ue){delete O[ue],delete j[ue],delete V[ue],delete W[ue],_e(ue)}(Oe);O[Oe].push(q),de.trigger(_.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:q,mediaType:Oe,httpRequest:Ze}),O[Oe].length>20&&O[Oe].shift(),j[Oe].push(ke),j[Oe].length>20&&j[Oe].shift(),Ae(V[Oe],q,.001*Ie,ee.throughputHalfLife),Ae(W[Oe],ke,1,ee.latencyHalfLife)}},getAverageThroughput:ie,getSafeAverageThroughput:function(Oe,Ze){var We=ie(Oe,Ze);return isNaN(We)||(We*=re.get().streaming.abr.bandwidthSafetyFactor),We},getAverageLatency:function(Oe){return Te(!1,Oe)},reset:ye};return ee={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},ye(),ze}xc.__dashjs_factory_name="ThroughputHistory";var FE=F.Z.getClassFactory(xc);function jf(){var k,O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke,Ie,Ge,q,le,ae,ue,te,Pe=this.context,xe=(0,M.Z)(Pe).getInstance(),je=(0,g.Z)(Pe).getInstance();function Me(){W={},ee={},re={},H={},ke={},q={},le={},ae={},Ae===void 0&&(Ae=!1),Ie&&Ie.reset(),Se=void 0,Ie=void 0,Ge=void 0,clearTimeout(de),de=null}function ve(at){var St=at.request.mediaType,Qt=at.streamId;if(St&&Qt&&H[Qt]&&te.get().streaming.abr.autoSwitchBitrate[St]){var Pt=H[Qt][St];if(Pt){var un=bc(Pe).create({abrController:k,streamProcessor:Pt,currentRequest:at.request,useBufferOccupancyABR:q[St],useL2AABR:le[St],useLoLPABR:ae[St],videoModel:ye}),an=j.shouldAbandonFragment(un,Qt);an.quality>Rc.Z.NO_CHANGE&&Pt.getFragmentModel().getRequests({state:X.FRAGMENT_MODEL_LOADING,index:at.request.index})[0]&&(re[Qt][St].state=P.Z.ABANDON_LOAD,ke[Qt][St].reset(),ke[Qt][St].push({oldValue:yt(St,Qt),newValue:an.quality,confidence:1,reason:an.reason}),pt(St,V.getActiveStreamInfo(),an.quality,an.reason),clearTimeout(de),de=setTimeout(function(){re[Qt][St].state=P.Z.ALLOW_LOAD,de=null},te.get().streaming.abandonLoadTimeout))}}}function De(at){at.mediaType===E.Z.VIDEO&&(Se!==void 0&&Ie.push(at.streamId,Se,ye.getPlaybackQuality()),Se=at.newQuality)}function $e(at){var St,Qt;at.metric!==P.Z.HTTP_REQUEST||!at.value||at.value.type!==st.w.MEDIA_SEGMENT_TYPE||at.mediaType!==E.Z.AUDIO&&at.mediaType!==E.Z.VIDEO||Ge.push(at.mediaType,at.value,te.get().streaming.abr.useDeadTimeLatency),at.metric!==P.Z.BUFFER_LEVEL||at.mediaType!==E.Z.AUDIO&&at.mediaType!==E.Z.VIDEO||(St=at.mediaType,Qt=.001*at.value.level,te.get().streaming.abr.ABRStrategy===E.Z.ABR_STRATEGY_DYNAMIC&&function(Pt,un){try{var an=ze.getStableBufferTime(),Jt=an,Bn=.5*an,kn=q[Pt],mr=un>(kn?Bn:Jt);q[Pt]=mr,mr!==kn&&(mr?O.info("["+Pt+"] switching from throughput to buffer occupancy ABR rule (buffer: "+un.toFixed(3)+")."):O.info("["+Pt+"] switching from buffer occupancy to throughput ABR rule (buffer: "+un.toFixed(3)+")."))}catch(vr){O.error(vr)}}(St,Qt))}function mt(at,St){try{var Qt;return W[St]=W[St]||{},W[St].hasOwnProperty(at)||(W[St][at]=0),Qt=function(Pt,un){var an=W[un][Pt],Jt=an;if(!H[un]||!H[un][Pt])return Jt;var Bn=ct(Pt,un);Bn!==void 0&&(Jt=Math.max(an,Bn));var kn=function(mr,vr){try{var Ct=ze.getAbrBitrateParameter("maxBitrate",mr);return Ct>-1?jt(H[vr][mr].getMediaInfo(),Ct,vr):void 0}catch(tn){return}}(Pt,un);return kn!==void 0&&(Jt=Math.min(Jt,kn)),Jt}(at,St),Qt=function(Pt,un,an){var Jt=W[an][un],Bn=te.get().streaming.abr.maxRepresentationRatio[un];return isNaN(Bn)||Bn>=1||Bn<0?Pt:Math.min(Pt,Math.round(Jt*Bn))}(Qt,at,St),Qt=function(Pt,un,an){if(un!==E.Z.VIDEO||!te.get().streaming.abr.limitBitrateByPortal||!H[an]||!H[an][un])return Pt;Ae||xn();var Jt=H[an][un].getStreamInfo(),Bn=_e.getAdaptationForType(Jt.index,un,Jt).Representation_asArray,kn=Pt;if(Te>0&&ie>0){for(;kn>0&&Bn[kn]&&Te<Bn[kn].width&&Te-Bn[kn-1].width<Bn[kn].width-Te;)kn-=1;for(;kn<Bn.length-1&&Bn[kn].width===Bn[kn+1].width;)kn+=1}return kn}(Qt,at,St),te.get().streaming.cmsd.enabled&&te.get().streaming.cmsd.abr.applyMb&&(Qt=function(Pt,un,an){if(un!=="video")return Pt;var Jt=Ze.getMaxBitrate(un);if(Jt<0)return Pt;var Bn=Vt(an,"audio",yt("audio",an));Jt-=Bn?Bn.bitrate/1e3:0;var kn=jt(H[an][un].getMediaInfo(),Jt,an);return O.debug("Stream ID: "+an+" ["+un+"] Apply max bit rate from CMSD: "+Jt),Math.min(Pt,kn)}(Qt,at,St)),Qt}catch(Pt){return}}function ct(at,St){try{return function(Qt,Pt){try{var un=ze.getAbrBitrateParameter("minBitrate",Qt);if(un>-1){var an=H[Pt][Qt].getMediaInfo(),Jt=Zt(an),Bn=jt(an,un,Pt);return Jt[Bn]&&Bn<Jt.length-1&&Jt[Bn].bitrate<1e3*un&&Bn++,Bn}return}catch(kn){return}}(at,St)}catch(Qt){return}}function yt(at){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return St||(St=V.getActiveStreamInfo().id),at&&H[St]&&H[St][at]&&St?(ee[St]=ee[St]||{},ee[St].hasOwnProperty(at)||(ee[St][at]=0),ee[St][at]):0}catch(Qt){return 0}}function pt(at,St,Qt){var Pt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(St&&St.id&&at){var un=St.id,an=yt(at,un);(0,ge.SE)(Qt);var Jt=mt(at,un);Qt!==an&&Qt>=0&&Qt<=Jt&&Gt(at,an,Qt,Jt,Pt,un)}}function Gt(at,St,Qt,Pt,un,an){if(at&&H[an]&&H[an][at]){var Jt=H[an][at].getStreamInfo(),Bn=Jt&&Jt.manifestInfo&&Jt.manifestInfo.isDynamic,kn=ue.getCurrentBufferLevel(at);O.info("Stream ID: "+an+" ["+at+"] switch from "+St+" to "+Qt+"/"+Pt+" (buffer: "+kn+") "+(un?JSON.stringify(un):".")),ee[an]=ee[an]||{},ee[an][at]=Qt;var mr=Vt(an,at,Qt);je.trigger(T.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:St,newQuality:Qt,reason:un,streamInfo:Jt,bitrateInfo:mr,maxIdx:Pt,mediaType:at},{streamId:Jt.id,mediaType:at});var vr=Ge.getAverageThroughput(at,Bn);isNaN(vr)||We.setSavedBitrateSettings(at,vr)}}function Vt(at,St,Qt){if(St&&H&&H[at]&&H[at][St]){var Pt=Zt(H[at][St].getMediaInfo());return Pt[Qt]?Pt[Qt]:null}return null}function jt(at,St,Qt){var Pt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,un=at&&at.type?H[Qt][at.type].getRepresentationInfo():null;if(te.get().streaming.abr.useDeadTimeLatency&&Pt&&un&&un.fragmentDuration){Pt/=1e3;var an=un.fragmentDuration;if(Pt>an)return 0;var Jt=Pt/an;St*=1-Jt}for(var Bn=Zt(at),kn=Bn.length-1;kn>=0;kn--){var mr=Bn[kn];if(1e3*St>=mr.bitrate)return kn}return 0}function Zt(at){var St=[];if(!at||!at.bitrateList)return St;for(var Qt,Pt=at.bitrateList,un=at.type,an=0,Jt=Pt.length;an<Jt;an++)(Qt=new Es).mediaType=un,Qt.qualityIndex=an,Qt.bitrate=Pt[an].bandwidth,Qt.width=Pt[an].width,Qt.height=Pt[an].height,Qt.scanType=Pt[an].scanType,St.push(Qt);return St}function xn(){if(ye){var at=te.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;Te=ye.getClientWidth()*at,ie=ye.getClientHeight()*at}}return k={initialize:function(){Ie=kE(Pe).create(),Ge=FE(Pe).create({settings:te}),(j=(0,Zh.Z)(Pe).create({dashMetrics:ue,customParametersModel:Oe,mediaPlayerModel:ze,settings:te})).initialize(),je.on(_.Z.QUALITY_CHANGE_RENDERED,De,k),je.on(_.Z.METRIC_ADDED,$e,k),je.on(T.Z.LOADING_PROGRESS,ve,k)},isPlayingAtTopQuality:function(at){var St=at?at.id:null,Qt=yt(E.Z.AUDIO,St),Pt=yt(E.Z.VIDEO,St);return Qt===mt(E.Z.AUDIO,St)&&Pt===mt(E.Z.VIDEO,St)},updateTopQualityIndex:function(at){var St=at.type,Qt=at.streamInfo.id,Pt=at.representationCount-1;return W[Qt]=W[Qt]||{},W[Qt][St]=Pt,Pt},clearDataForStream:function(at){Ie&&Ie.clearForStream(at),H[at]&&delete H[at],ke[at]&&delete ke[at],re[at]&&delete re[at]},getThroughputHistory:function(){return Ge},getBitrateList:Zt,getQualityForBitrate:jt,getTopBitrateInfoFor:function(at){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(St||(St=V.getActiveStreamInfo().id),at&&H&&H[St]&&H[St][at]){var Qt=mt(at,St),Pt=Zt(H[St][at].getMediaInfo());return Pt[Qt]?Pt[Qt]:null}return null},getMinAllowedIndexFor:ct,getMaxAllowedIndexFor:mt,getInitialBitrateFor:function(at,St){if(function(){if(!We||!We.hasOwnProperty("getSavedBitrateSettings"))throw new Error(E.Z.MISSING_CONFIG_ERROR)}(),at===E.Z.TEXT)return NaN;var Qt=We.getSavedBitrateSettings(at),Pt=ze.getAbrBitrateParameter("initialBitrate",at),un=te.get().streaming.abr.initialRepresentationRatio[at];if(Pt===-1)if(un>-1){var an=H[St][at].getStreamInfo(),Jt=_e.getAdaptationForType(an.index,at,an).Representation_asArray;Pt=Array.isArray(Jt)?Jt[Math.max(Math.round(Jt.length*un)-1,0)].bandwidth/1e3:0}else Pt=isNaN(Qt)?at===E.Z.VIDEO?1e3:100:Qt;return Pt},getQualityFor:yt,getAbandonmentStateFor:function(at,St){return re[at]&&re[at][St]?re[at][St].state:null},setPlaybackQuality:pt,checkPlaybackQuality:function(at,St){try{if(!(at&&H&&H[St]&&H[St][at]))return!1;if(Ie){var Qt=ye.getPlaybackQuality();Qt&&Ie.push(St,Se,Qt)}if(!te.get().streaming.abr.autoSwitchBitrate[at])return!1;var Pt=yt(at,St),un=bc(Pe).create({abrController:k,switchHistory:ke[St][at],droppedFramesHistory:Ie,streamProcessor:H[St][at],currentValue:Pt,useBufferOccupancyABR:q[at],useL2AABR:le[at],useLoLPABR:ae[at],videoModel:ye}),an=ct(at,St),Jt=mt(at,St),Bn=j.getMaxQuality(un),kn=Bn.quality;return an!==void 0&&(kn>Rc.Z.NO_CHANGE?kn:Pt)<an&&(kn=an),kn>Jt&&(kn=Jt),ke[St][at].push({oldValue:Pt,newValue:kn}),kn>Rc.Z.NO_CHANGE&&kn!==Pt&&(re[St][at].state===P.Z.ALLOW_LOAD||kn<Pt)&&(Gt(at,Pt,kn,Jt,Bn.reason,St),!0)}catch(mr){return!1}},setElementSize:xn,setWindowResizeEventCalled:function(at){Ae=at},registerStreamType:function(at,St){var Qt=St.getStreamInfo().id;H[Qt]||(H[Qt]={}),ke[Qt]||(ke[Qt]={}),re[Qt]||(re[Qt]={}),ke[Qt][at]=Im(Pe).create(),H[Qt][at]=St,re[Qt][at]={},re[Qt][at].state=P.Z.ALLOW_LOAD,function(Pt){var un=te.get().streaming.abr.ABRStrategy;un===E.Z.ABR_STRATEGY_L2A?(q[Pt]=!1,ae[Pt]=!1,le[Pt]=!0):un===E.Z.ABR_STRATEGY_LoLP?(q[Pt]=!1,ae[Pt]=!0,le[Pt]=!1):un===E.Z.ABR_STRATEGY_BOLA?(q[Pt]=!0,ae[Pt]=!1,le[Pt]=!1):un===E.Z.ABR_STRATEGY_THROUGHPUT?(q[Pt]=!1,ae[Pt]=!1,le[Pt]=!1):un===E.Z.ABR_STRATEGY_DYNAMIC&&(q[Pt]=!(!q||!q[Pt])&&q[Pt],ae[Pt]=!1,le[Pt]=!1)}(at),at===E.Z.VIDEO&&xn()},unRegisterStreamType:function(at,St){try{H[at]&&H[at][St]&&delete H[at][St],ke[at]&&ke[at][St]&&delete ke[at][St],re[at]&&re[at][St]&&delete re[at][St]}catch(Qt){}},setConfig:function(at){at&&(at.streamController&&(V=at.streamController),at.domStorage&&(We=at.domStorage),at.mediaPlayerModel&&(ze=at.mediaPlayerModel),at.customParametersModel&&(Oe=at.customParametersModel),at.cmsdModel&&(Ze=at.cmsdModel),at.dashMetrics&&(ue=at.dashMetrics),at.adapter&&(_e=at.adapter),at.videoModel&&(ye=at.videoModel),at.settings&&(te=at.settings))},reset:function(){Me(),je.off(T.Z.LOADING_PROGRESS,ve,k),je.off(_.Z.QUALITY_CHANGE_RENDERED,De,k),je.off(_.Z.METRIC_ADDED,$e,k),j&&j.reset()}},O=xe.getLogger(k),Me(),k}jf.__dashjs_factory_name="AbrController";var Gh=F.Z.getSingletonFactory(jf);Gh.QUALITY_DEFAULT=0,F.Z.updateSingletonFactory(jf.__dashjs_factory_name,Gh);var UE=Gh,bm=new Map([[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Hh(){var k,O,j,V,W,ee,H,re,de=this.context,Ae=(0,g.Z)(de).getInstance(),Te=[];function ie(){j&&(j.playbackRate=1,j.removeEventListener("canplay",ie))}function _e(){return Te.length>0}function ye(){if(j&&_e()&&j.playbackRate===0){var Ie=document.createEvent("Event");Ie.initEvent("waiting",!0,!1),j.dispatchEvent(Ie)}}function ze(Ie,Ge){j&&j.addEventListener(Ie,Ge)}function Oe(Ie,Ge){j&&j.removeEventListener(Ie,Ge)}function Ze(){return j?j.readyState:NaN}function We(){return j?j.buffered:null}function Se(Ie,Ge,q,le,ae){if(j){for(var ue=0;ue<j.textTracks.length;ue++)if(j.textTracks[ue].kind===Ie&&(!Ge||j.textTracks[ue].label==Ge)&&j.textTracks[ue].language===q&&j.textTracks[ue].isTTML===le&&j.textTracks[ue].isEmbedded===ae)return j.textTracks[ue]}return null}function ke(Ie,Ge){return Ie===E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Ze()>=Ie?(Ge(),null):function(q,le){var ae=function ue(){Oe(q,ue),le(q)};return ze(q,ae),{func:ae,event:q}}(bm.get(Ie),Ge)}return k={addEventListener:ze,addTextTrack:function(Ie,Ge,q,le,ae){if(!j)return null;var ue=Se(Ie,Ge,q,le,ae);return ue||((ue=j.addTextTrack(Ie,Ge,q)).isEmbedded=ae,ue.isTTML=le),ue},appendChild:function(Ie){j&&(j.appendChild(Ie),Ie.isTTML!==void 0&&(j.textTracks[j.textTracks.length-1].isTTML=Ie.isTTML,j.textTracks[j.textTracks.length-1].isEmbedded=Ie.isEmbedded))},getBufferRange:We,getClientHeight:function(){return j?j.clientHeight:NaN},getClientWidth:function(){return j?j.clientWidth:NaN},getElement:function(){return j},getEnded:function(){return j?j.ended:null},getPlaybackQuality:function(){if(!j)return null;var Ie="webkitDroppedFrameCount"in j&&"webkitDecodedFrameCount"in j,Ge=null;return"getVideoPlaybackQuality"in j?Ge=j.getVideoPlaybackQuality():Ie&&(Ge={droppedVideoFrames:j.webkitDroppedFrameCount,totalVideoFrames:j.webkitDroppedFrameCount+j.webkitDecodedFrameCount,creationTime:new Date}),Ge},getPlaybackRate:function(){return j?j.playbackRate:null},getPlayedRanges:function(){return j?j.played:null},getReadyState:Ze,getSource:function(){return j?j.src:null},getTTMLRenderingDiv:function(){return ee},getTextTrack:Se,getTextTracks:function(){return j?j.textTracks:[]},getTime:function(){return j?isNaN(V)?j.currentTime:V:null},getVideoHeight:function(){return j?j.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(j){var Ie=j.parentNode.host||j.parentNode;return Ie?j.getBoundingClientRect().left-Ie.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(j){var Ie=j.parentNode.host||j.parentNode;return Ie?j.getBoundingClientRect().top-Ie.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return j?j.videoWidth:NaN},getVttRenderingDiv:function(){return H},initialize:function(){Ae.on(T.Z.PLAYBACK_PLAYING,ye,this)},isPaused:function(){return j?j.paused:null},isSeeking:function(){return j?j.seeking||!isNaN(V):null},isStalled:_e,pause:function(){j&&(j.pause(),j.autoplay=!1)},play:function(){if(j){j.autoplay=!0;var Ie=j.play();Ie&&Ie.catch&&typeof Promise<"u"&&Ie.catch(function(Ge){Ge.name==="NotAllowedError"&&Ae.trigger(T.Z.PLAYBACK_NOT_ALLOWED),O.warn("Caught pending play exception - continuing (".concat(Ge,")"))})}},removeChild:function(Ie){j&&j.removeChild(Ie)},removeEventListener:Oe,reset:function(){clearTimeout(re),Ae.off(T.Z.PLAYBACK_PLAYING,ye,this)},setCurrentTime:function(Ie,Ge){j&&(W&&W.func&&W.event&&Oe(W.event,W.func),V=Ie,W=ke(E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(j)if(j.currentTime!==V)try{V=Ge?function(q){var le=We(),ae=q,ue=9999999999;if(le)for(var te=0;te<le.length;te++){var Pe=le.start(te),xe=le.end(te),je=Math.abs(Pe-q),Me=Math.abs(xe-q);if(q>=Pe&&q<=xe)return q;je<ue&&(ue=je,ae=Pe),Me<ue&&(ue=Me,ae=xe)}return ae}(V):V,isNaN(V)||(j.currentTime=V),V=NaN}catch(q){j.readyState===0&&q.code===q.INVALID_STATE_ERR&&(re=setTimeout(function(){j.currentTime=V,V=NaN},400))}else V=NaN}))},setElement:function(Ie){if(!(Ie==null||Ie&&/^(VIDEO|AUDIO)$/i.test(Ie.nodeName)))throw"element is not video or audio DOM type!";(j=Ie)&&(j.preload="auto")},setPlaybackRate:function(Ie){var Ge=arguments.length>1&&arguments[1]!==void 0&&arguments[1];j&&(!Ge&&j.readyState<=2&&Ie>0?j.addEventListener("canplay",ie):j.playbackRate=Ie)},setSource:function(Ie){j&&(Ie?j.src=Ie:(j.removeAttribute("src"),j.load()))},setStallState:function(Ie,Ge){(function(q,le){le?function(ae){ae!==null&&j&&!j.seeking&&Te.indexOf(ae)===-1&&Te.push(ae)}(q):function(ae){var ue=Te.indexOf(ae);ae!==null&&ue!==-1&&Te.splice(ue,1)}(q)})(Ie,Ge)},setTTMLRenderingDiv:function(Ie){(ee=Ie).style.position="absolute",ee.style.display="flex",ee.style.overflow="hidden",ee.style.pointerEvents="none",ee.style.top=0,ee.style.left=0},setVttRenderingDiv:function(Ie){H=Ie},waitForReadyState:ke,setDisableRemotePlayback:function(Ie){j&&(j.disableRemotePlayback=Ie)}},O=(0,M.Z)(de).getInstance().getLogger(k),V=NaN,k}Hh.__dashjs_factory_name="VideoModel";var BE=F.Z.getSingletonFactory(Hh),Rm=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],Vh="dashjs_?_bitrate",tl="dashjs_?_settings",Is="localStorage",xm="lastBitrate",Nm="lastMediaSettings";function Mm(k){k=k||{};var O,j,V,W=this.context,ee=k.settings;function H(Te){if(V!==void 0)return V;var ie;V=!1;try{typeof window<"u"&&(ie=window[Te])}catch(_e){return j.warn("DOMStorage access denied: "+_e.message),V}if(!ie||Te!==Is)return V;try{ie.setItem("1","1"),ie.removeItem("1"),V=!0}catch(_e){j.warn("DOMStorage is supported, but cannot be used: "+_e.message)}return V}function re(){var Te=6e5;return Math.round(new Date().getTime()/Te)*Te}function de(Te,ie){return H(Te)&&ee.get().streaming[ie+"CachingInfo"].enabled}function Ae(){if(!ee)throw new Error(E.Z.MISSING_CONFIG_ERROR)}return O={getSavedBitrateSettings:function(Te){if(Ae(),!ee.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var ie=NaN;if(de(Is,xm)){var _e=Vh.replace(/\?/,Te);try{var ye=JSON.parse(localStorage.getItem(_e))||{},ze=new Date().getTime()-parseInt(ye.timestamp,10)>=ee.get().streaming.lastBitrateCachingInfo.ttl||!1,Oe=parseFloat(ye.bitrate);isNaN(Oe)||ze?ze&&localStorage.removeItem(_e):(ie=Oe,j.debug("Last saved bitrate for "+Te+" was "+Oe))}catch(Ze){return null}}return ie},setSavedBitrateSettings:function(Te,ie){if(de(Is,xm)&&ie){var _e=Vh.replace(/\?/,Te);try{localStorage.setItem(_e,JSON.stringify({bitrate:ie.toFixed(3),timestamp:re()}))}catch(ye){j.error(ye.message)}}},getSavedMediaSettings:function(Te){if(Ae(),!ee.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var ie=null;if(de(Is,Nm)){var _e=tl.replace(/\?/,Te);try{var ye=JSON.parse(localStorage.getItem(_e))||{},ze=new Date().getTime()-parseInt(ye.timestamp,10)>=ee.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;ie=ye.settings,ze&&(localStorage.removeItem(_e),ie=null)}catch(Oe){return null}}return ie},setSavedMediaSettings:function(Te,ie){if(de(Is,Nm)){var _e=tl.replace(/\?/,Te);try{localStorage.setItem(_e,JSON.stringify({settings:ie,timestamp:re()}))}catch(ye){j.error(ye.message)}}}},j=(0,M.Z)(W).getInstance().getLogger(O),H(Is)&&Rm.forEach(function(Te){var ie=localStorage.getItem(Te.oldKey);if(ie){localStorage.removeItem(Te.oldKey);try{localStorage.setItem(Te.newKey,ie)}catch(_e){j.error(_e.message)}}}),O}Mm.__dashjs_factory_name="DOMStorage";var kl=F.Z.getSingletonFactory(Mm),Zf=w(2032),qf=w(2011);function Gf(){var k,O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye=this.context;function ze(Se,ke,Ie,Ge){var q=null,le=Se?_e.resolve(Se.path):null,ae=Ge||{init:!0,url:le?le.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:ke};O.debug("Start searching for initialization.");var ue=We(ae);re.load({request:ue,success:function(te){if(ae.bytesLoaded=ae.range.end,!(q=V.findInitRange(te)))return ae.range.end=ae.bytesLoaded+ae.bytesToLoad,ze(Se,ke,Ie,ae);Se.range=q,Ie(Se)},error:function(){Ie(Se)}}),O.debug("Perform init search: "+ae.url)}function Oe(Se,ke,Ie,Ge,q,le){if(Ie&&(Ie.start===void 0||Ie.end===void 0)){var ae=Ie?Ie.toString().split("-"):null;Ie=ae?{start:parseFloat(ae[0]),end:parseFloat(ae[1])}:null}q=q||Ze;var ue=null,te=null,Pe=!!Ie,xe=Se?_e.resolve(Se.path):null,je={init:!1,url:xe?xe.url:void 0,range:Pe?Ie:{start:0,end:1500},searching:!Pe,bytesLoaded:le?le.bytesLoaded:0,bytesToLoad:1500,mediaType:ke},Me=We(je);re.load({request:Me,success:function(ve){var De=je.bytesToLoad,$e=ve.byteLength;if(je.bytesLoaded=je.range.end-je.range.start,ue=V.parse(ve),(te=ue.getBox("sidx"))&&te.isComplete){var mt,ct,yt=te.references;if(yt!=null&&yt.length>0&&(mt=yt[0].reference_type===1),mt){var pt,Gt,Vt,jt;O.debug("Initiate multiple SIDX load."),je.range.end=je.range.start+te.size;var Zt=[],xn=0,at=(te.offset||je.range.start)+te.size,St=function(Pt){Pt?(Zt=Zt.concat(Pt),++xn>=Gt&&(Zt.sort(function(un,an){return un.startTime-an.startTime<0?-1:0}),q(Zt,Se,Ge))):q(null,Se,Ge)};for(pt=0,Gt=yt.length;pt<Gt;pt++)Vt=at,jt=at+yt[pt].referenced_size-1,at+=yt[pt].referenced_size,Oe(Se,ke,{start:Vt,end:jt},Ge,St,je)}else O.debug("Parsing segments from SIDX. representation "+ke+" - id: "+Se.id+" for range : "+je.range.start+" - "+je.range.end),ct=function(Pt,un){for(var an,Jt,Bn,kn,mr=Pt.references,vr=mr.length,Ct=Pt.timescale,tn=Pt.earliest_presentation_time,qt=un.range.start+Pt.offset+Pt.first_offset+Pt.size,mn=[],Cn=0;Cn<vr;Cn++)Bn=mr[Cn].subsegment_duration,kn=mr[Cn].referenced_size,(an=new qf.Z).duration=Bn,an.startTime=tn,an.timescale=Ct,Jt=qt+kn-1,an.mediaRange=qt+"-"+Jt,mn.push(an),tn+=Bn,qt+=kn;return mn}(te,je),q(ct,Se,Ge)}else{if(te)je.range.start=te.offset||je.range.start,je.range.end=je.range.start+(te.size||De);else{if($e<je.bytesLoaded)return void q(null,Se,Ge);var Qt=ue.getLastBox();Qt&&Qt.size?(je.range.start=Qt.offset+Qt.size,je.range.end=je.range.start+De):je.range.end+=De}Oe(Se,ke,je.range,Ge,null,je)}},error:function(){q(null,Se,Ge)}}),O.debug("Perform SIDX load for type ".concat(ke," : ").concat(je.url," with range ").concat(je.range.start," - ").concat(je.range.end))}function Ze(Se,ke,Ie){Ie({segments:Se,representation:ke,error:Se?void 0:new ce.Z(de.SEGMENT_BASE_LOADER_ERROR_CODE,de.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function We(Se){if(Se.url){var ke=new Z.Z;return ke.setInfo(Se),ke}}return k={setConfig:function(Se){Se.baseURLController&&(_e=Se.baseURLController),Se.dashMetrics&&(ee=Se.dashMetrics),Se.mediaPlayerModel&&(H=Se.mediaPlayerModel),Se.errHandler&&(j=Se.errHandler),Se.boxParser&&(V=Se.boxParser),Se.debug&&(O=Se.debug.getLogger(k)),Se.requestModifier&&(W=Se.requestModifier),Se.errors&&(de=Se.errors),Se.urlUtils&&(ie=Se.urlUtils),Se.constants&&(Ae=Se.constants),Se.dashConstants&&(Te=Se.dashConstants)},initialize:function(){re=Ci(ye).create({errHandler:j,dashMetrics:ee,mediaPlayerModel:H,requestModifier:W,boxParser:V,errors:de,urlUtils:ie,constants:Ae,dashConstants:Te})},loadInitialization:function(Se,ke){return new Promise(function(Ie){ze(Se,ke,Ie)})},loadSegments:function(Se,ke,Ie){return new Promise(function(Ge){Oe(Se,ke,Ie,Ge)})},reset:function(){re&&(re.abort(),re=null)}}}Gf.__dashjs_factory_name="SegmentBaseLoader";var Dm=F.Z.getSingletonFactory(Gf);function Hf(k){var O;k=k||{};var j=new DataView(k.data),V=0;function W(H,re){var de=!0,Ae=0;if(re===void 0&&(re=!1),H.tag>16777215?(j.getUint32(V)!==H.tag&&(de=!1),Ae=4):H.tag>65535?(256*j.getUint16(V)+j.getUint8(V+2)!==H.tag&&(de=!1),Ae=3):H.tag>255?(j.getUint16(V)!==H.tag&&(de=!1),Ae=2):(j.getUint8(V)!==H.tag&&(de=!1),Ae=1),!de&&H.required&&!re)throw new Error("required tag not found");return de&&(V+=Ae),de}function ee(H){var re=1,de=128,Ae=-1,Te=0,ie=j.getUint8(V),_e=0;for(_e=0;_e<8;_e+=1){if((ie&de)===de){Te=H===void 0?ie&~de:ie,Ae=_e;break}de>>=1}for(_e=0;_e<Ae;_e+=1,re+=1)Te=Te<<8|255&j.getUint8(V+re);return V+=re,Te}return O={getPos:function(){return V},setPos:function(H){V=H},consumeTag:W,consumeTagAndSize:function(H,re){var de=W(H,re);return de&&ee(),de},parseTag:function(H){var re;return W(H),re=ee(),O[H.parse](re)},skipOverElement:function(H,re){var de,Ae=W(H,re);return Ae&&(de=ee(),V+=de),Ae},getMatroskaCodedNum:ee,getMatroskaFloat:function(H){var re;switch(H){case 4:re=j.getFloat32(V),V+=4;break;case 8:re=j.getFloat64(V),V+=8}return re},getMatroskaUint:function(H){if(H>4)return function(Ae){for(var Te=Math.floor(Number.MAX_SAFE_INTEGER/256),ie=0,_e=0;_e<Ae;_e+=1){if(ie>Te)throw new Error("Value exceeds safe integer limit");ie*=256;var ye=j.getUint8(V+_e);if(ie>Number.MAX_SAFE_INTEGER-ye)throw new Error("Value exceeds safe integer limit");ie+=ye}return V+=Ae,ie}(H);for(var re=0,de=0;de<H;de+=1)re<<=8,re|=255&j.getUint8(V+de);return V+=H,re>>>0},moreData:function(){return V<j.byteLength}}}Hf.__dashjs_factory_name="EBMLParser";var Kh=F.Z.getClassFactory(Hf);function Fl(){var k,O,j,V,W,ee,H,re,de,Ae,Te=this.context;function ie(_e){var ye=new Z.Z;return ye.setInfo(_e),ye}return k={setConfig:function(_e){if(!(_e.baseURLController&&_e.dashMetrics&&_e.mediaPlayerModel&&_e.errHandler))throw new Error(E.Z.MISSING_CONFIG_ERROR);Ae=_e.baseURLController,ee=_e.dashMetrics,H=_e.mediaPlayerModel,V=_e.errHandler,de=_e.errors,O=_e.debug.getLogger(k),W=_e.requestModifier},initialize:function(){re=Ci(Te).create({errHandler:V,dashMetrics:ee,mediaPlayerModel:H,requestModifier:W,errors:de})},loadInitialization:function(_e,ye){return new Promise(function(ze){var Oe=null,Ze=_e?Ae.resolve(_e.path):null,We=_e?_e.range.split("-"):null,Se={range:{start:We?parseFloat(We[0]):null,end:We?parseFloat(We[1]):null},request:Oe,url:Ze?Ze.url:void 0,init:!0,mediaType:ye};O.info("Start loading initialization."),Oe=ie(Se),re.load({request:Oe,success:function(){ze(_e)},error:function(){ze(_e)}}),O.debug("Perform init load: "+Se.url)})},loadSegments:function(_e,ye,ze){return new Promise(function(Oe){var Ze=null,We=_e?Ae.resolve(_e.path):null,Se=We?We.url:void 0;Ze=ie({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Ze,url:Se,init:!1,mediaType:ye}),O.debug("Parsing ebml header"),re.load({request:Ze,success:function(ke){(function(Ie,Ge,q,le){if(Ie&&Ie.byteLength!==0){var ae,ue,te,Pe,xe=Kh(Te).create({data:Ie}),je=q?q.split("-"):null,Me=null,ve={url:Ge,range:{start:je?parseFloat(je[0]):null,end:je?parseFloat(je[1]):null},request:Me};for(O.debug("Parse EBML header: "+ve.url),xe.skipOverElement(j.EBML),xe.consumeTag(j.Segment),te=xe.getMatroskaCodedNum(),te+=xe.getPos(),Pe=xe.getPos();xe.moreData()&&!xe.consumeTagAndSize(j.Segment.Info,!0);)if(!(xe.skipOverElement(j.Segment.SeekHead,!0)||xe.skipOverElement(j.Segment.Tracks,!0)||xe.skipOverElement(j.Segment.Cues,!0)||xe.skipOverElement(j.Void,!0)))throw new Error("no valid top level element found");for(;ae===void 0;){var De=xe.getMatroskaCodedNum(!0),$e=xe.getMatroskaCodedNum();De===j.Segment.Info.Duration.tag?ae=xe[j.Segment.Info.Duration.parse]($e):xe.setPos(xe.getPos()+$e)}Me=ie(ve),re.load({request:Me,success:function(mt){ue=function(ct,yt,pt,Gt){var Vt,jt,Zt,xn,at,St,Qt,Pt;for(Zt=[],at=0,St=(jt=function(un){var an,Jt,Bn=[],kn=Kh(Te).create({data:un});for(kn.consumeTagAndSize(j.Segment.Cues);kn.moreData()&&kn.consumeTagAndSize(j.Segment.Cues.CuePoint,!0);){for((an={}).CueTime=kn.parseTag(j.Segment.Cues.CuePoint.CueTime),an.CueTracks=[];kn.moreData()&&kn.consumeTag(j.Segment.Cues.CuePoint.CueTrackPositions,!0);){var mr=kn.getMatroskaCodedNum(),vr=kn.getPos();if((Jt={}).Track=kn.parseTag(j.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Jt.Track===0)throw new Error("Cue track cannot be 0");Jt.ClusterPosition=kn.parseTag(j.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),an.CueTracks.push(Jt),kn.setPos(vr+mr)}if(an.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Bn.push(an)}if(Bn.length===0)throw new Error("mandatory cuepoint not found");return Bn}(ct)).length;at<St;at+=1)xn=new qf.Z,Vt=at<jt.length-1?jt[at+1].CueTime-jt[at].CueTime:Gt-jt[at].CueTime,xn.duration=Vt,xn.startTime=jt[at].CueTime,xn.timescale=1e3,Qt=jt[at].CueTracks[0].ClusterPosition+yt,Pt=at<jt.length-1?jt[at+1].CueTracks[0].ClusterPosition+yt-1:pt-1,xn.mediaRange=Qt+"-"+Pt,Zt.push(xn);return O.debug("Parsed cues: "+Zt.length+" cues."),Zt}(mt,Pe,te,ae),le(ue)},error:function(){O.error("Download Error: Cues "+ve.url),le(null)}}),O.debug("Perform cues load: "+ve.url+" bytes="+ve.range.start+"-"+ve.range.end)}else le(null)})(ke,Se,ze,function(Ie){Oe({segments:Ie,representation:_e,error:Ie?void 0:new ce.Z(de.SEGMENT_BASE_LOADER_ERROR_CODE,de.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){Oe({representation:_e,error:new ce.Z(de.SEGMENT_BASE_LOADER_ERROR_CODE,de.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){re&&(re.abort(),re=null)}},j={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},k}Fl.__dashjs_factory_name="WebmSegmentBaseLoader";var Vf=F.Z.getSingletonFactory(Fl);function Ul(k){k=k||{};var O,j,V,W=this.context,ee=k.eventBus,H=k.events,re=k.dashMetrics,de=k.mediaPlayerModel,Ae=k.errHandler,Te=k.baseURLController,ie=k.debug,_e=k.boxParser,ye=k.requestModifier,ze=k.errors;function Oe(Ze){return(Ze?Ze.split("/")[1]:"").toLowerCase()==="webm"}return O={initialize:function(){j.initialize(),V.initialize()},getSegmentBaseInitSegment:function(Ze){return Oe(Ze.representation.mimeType)?V.loadInitialization(Ze.representation,Ze.mediaType):j.loadInitialization(Ze.representation,Ze.mediaType)},getSegmentList:function(Ze){return Oe(Ze.mimeType)?V.loadSegments(Ze.representation,Ze.mediaType,Ze.representation?Ze.representation.indexRange:null):j.loadSegments(Ze.representation,Ze.mediaType,Ze.representation?Ze.representation.indexRange:null)},reset:function(){j.reset(),V.reset()}},j=Dm(W).getInstance(),V=Vf(W).getInstance(),j.setConfig({baseURLController:Te,dashMetrics:re,mediaPlayerModel:de,errHandler:Ae,eventBus:ee,events:H,errors:ze,debug:ie,boxParser:_e,requestModifier:ye}),V.setConfig({baseURLController:Te,dashMetrics:re,mediaPlayerModel:de,errHandler:Ae,eventBus:ee,events:H,errors:ze,debug:ie,requestModifier:ye}),O}Ul.__dashjs_factory_name="SegmentBaseController";var Pm=F.Z.getSingletonFactory(Ul),zh=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Kf=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},Yh=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},jE=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function zf(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var ZE=function(){function k(V){var W=this;(function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")})(this,k),this.valid=V[0]=="/",this.path=V.split("/").filter(function(ee){return ee.length!==0}).map(function(ee){var H={name:ee},re=ee.indexOf("[");if(re!=-1){H.name=ee.substring(0,re);var de=ee.substring(re+1,ee.length-1);W.valid=W.valid&&de.indexOf("[")==-1;var Ae=de.indexOf("=");Ae!=-1?(H.attribute={name:de.substring(1,Ae),value:de.substring(Ae+1)},["'",'"'].indexOf(H.attribute.value[0])!=-1&&(H.attribute.value=H.attribute.value.substring(1,H.attribute.value.length-1))):H.position=parseInt(de,10)-1}return H})}var O,j;return O=k,(j=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(V,W){for(var ee=null,H=V,re=1,de="MPD";re<this.path.length&&H!==null;){ee=H;var Ae=this.path[re];if(de=Ae.name,re!==this.path.length-1||!de.startsWith("@")&&de!=="text()"){var Te=ee[de+"_asArray"]||[];Te.length===0&&ee[de]&&Te.push(ee[de]),Ae.position?H=Te[Ae.position]||null:Ae.attribute?function(){var ie=Ae.attribute;H=Te.filter(function(_e){return _e[ie.name]==ie.value})[0]||null}():H=Te[0]||null}re++}return H===null?null:de.startsWith("@")?{name:de.substring(1),leaf:H,target:H}:de==="text()"?{name:"__text",leaf:H,target:H}:{name:de,leaf:H,target:W?ee:H}}}])&&zf(O.prototype,j),k}();function ii(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var Om=function(){function k(V,W,ee){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,k),this.action=V,this.xpath=W,this.value=ee,this.position=null}var O,j;return O=k,(j=[{key:"getMpdTarget",value:function(V){var W=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(V,W)}}])&&ii(O.prototype,j),k}();function Yf(){var k,O,j=this.context;return k={getIsPatch:function(V){return V&&V.hasOwnProperty(y.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(V){return V&&V.hasOwnProperty(y.Z.PUBLISH_TIME)?new Date(V[y.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(V){return V&&V.hasOwnProperty(y.Z.ORIGINAL_PUBLISH_TIME)?new Date(V[y.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(V){return V&&V[y.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(V){return V?(V.__children||[]).map(function(W){var ee=Object.keys(W)[0];if(ee!=="add"&&ee!=="remove"&&ee!=="replace")return O.warn("Ignoring node of invalid action: ".concat(ee)),null;var H=W[ee],re=H.sel;if(ee==="add"&&H.type){if(!H.type.startsWith("@"))return O.warn("Ignoring add action for prefixed namespace declaration: ".concat(H.type,"=").concat(H.__text)),null;re="".concat(re,"/").concat(H.type)}var de=new ZE(re);if(!de.isValid())return O.warn("Ignoring action with invalid selector: ".concat(ee," - ").concat(re)),null;var Ae=null;de.findsAttribute()||de.findsTextReplace()?Ae=H.__text||"":ee!=="remove"&&(Ae=H.__children.reduce(function(ie,_e){var ye=Object.keys(_e)[0];return ye!=="#text"&&(ie[ye]=ie[ye]||[],ie[ye].push(_e[ye])),ie},{}));var Te=new Om(ee,de,Ae);return ee==="add"&&(Te.position=H.pos),Te}).filter(function(W){return!!W}):[]}},O=(0,M.Z)(j).getInstance().getLogger(k),k}Yf.__dashjs_factory_name="PatchManifestModel";var qE=F.Z.getSingletonFactory(Yf);function Lm(){var k,O,j,V,W,ee,H,re=this.context;function de(ae,ue,te){var Pe,xe=O.getAdaptationsForType(V[0].mpd.manifest,ae,ue);if(!xe||xe.length===0)return null;if(xe.length>1&&te){var je=ie(te,ue);if(W[te.id]&&W[te.id][ue]){for(var Me=0,ve=xe.length;Me<ve;Me++)if(Ae(W[te.id][ue],je[Me]))return xe[Me]}for(var De=0,$e=xe.length;De<$e;De++)if(Pe=xe[De],O.getRolesForAdaptation(Pe).filter(function(mt){return mt.value===y.Z.MAIN})[0])return xe[De]}return xe[0]}function Ae(ae,ue){if(!ae||!ue)return!1;var te=ae.id===ue.id,Pe=ae.codec===ue.codec,xe=ae.viewpoint===ue.viewpoint,je=JSON.stringify(ae.viewpointsWithSchemeIdUri)===JSON.stringify(ue.viewpointsWithSchemeIdUri),Me=ae.lang===ue.lang,ve=ae.roles.toString()===ue.roles.toString(),De=JSON.stringify(ae.rolesWithSchemeIdUri)===JSON.stringify(ue.rolesWithSchemeIdUri),$e=ae.accessibility.toString()===ue.accessibility.toString(),mt=JSON.stringify(ae.accessibilitiesWithSchemeIdUri)===JSON.stringify(ue.accessibilitiesWithSchemeIdUri),ct=ae.audioChannelConfiguration.toString()===ue.audioChannelConfiguration.toString(),yt=JSON.stringify(ae.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(ue.audioChannelConfigurationsWithSchemeIdUri);return te&&Pe&&xe&&je&&Me&&ve&&De&&$e&&mt&&ct&&yt}function Te(ae,ue,te,Pe,xe,je){var Me,ve,De,$e,mt,ct,yt=[];if(!Pe||Pe.length===0)return[];var pt=O.getAdaptationsForPeriod(ue);for($e=0,ct=Pe.length;$e<ct;$e++)if(Me=Pe[$e],ve=Se(pt[De=O.getIndexForAdaptation(Me,ae,te.index)]),je){var Gt=ve.accessibility.length;for(mt=0;mt<Gt;mt++)if(ve){var Vt=ve.accessibility[mt];if(Vt.indexOf("cea-608:")===0){var jt=Vt.substring(8).split(";");if(jt[0].substring(0,2)==="CC")for(mt=0;mt<jt.length;mt++)ve||(ve=Se.call(this,pt[De])),ke(ve,jt[mt].substring(0,3),jt[mt].substring(4)),yt.push(ve),ve=null;else for(mt=0;mt<jt.length;mt++)ve||(ve=Se.call(this,pt[De])),ke(ve,"CC"+(mt+1),jt[mt]),yt.push(ve),ve=null}else Vt.indexOf("cea-608")===0&&(ke(ve,ee.CC1,"eng"),yt.push(ve),ve=null)}}else xe===ee.IMAGE?(ve.type=ee.IMAGE,yt.push(ve),ve=null):ve&&yt.push(ve);return yt}function ie(ae,ue,te){var Pe=V,xe=te,je=[];if(xe)Ge(),Pe=_e(xe);else{if(!(V.length>0))return je;xe=V[0].mpd.manifest}var Me=We(ae,Pe),ve=O.getAdaptationsForType(xe,ae?ae.index:null,ue);return je=Te(xe,Me,ae,ve,ue),ue===ee.TEXT&&(ve=O.getAdaptationsForType(xe,ae?ae.index:null,ee.VIDEO),je=je.concat(Te(xe,Me,ae,ve,ue,!0))),je}function _e(ae){var ue=ye(ae);return O.getRegularPeriods(ue)}function ye(ae){var ue=Oe(ae);return O.getMpd(ue)}function ze(){V=[],W={}}function Oe(ae){return ae||(V.length>0?V[0].mpd.manifest:null)}function Ze(ae){try{var ue=We(ae.streamInfo,V),te=O.getAdaptationsForPeriod(ue);return ae&&ae.streamInfo&&ae.streamInfo.id!==void 0&&te?te[ae.index]:null}catch(Pe){return null}}function We(ae,ue){for(var te=ue.length,Pe=0;Pe<te;Pe++){var xe=ue[Pe];if(ae&&ae.id===xe.id)return xe}return null}function Se(ae){if(!ae)return null;var ue,te,Pe,xe,je,Me=new Kf,ve=ae.period.mpd.manifest.Period_asArray[ae.period.index].AdaptationSet_asArray[ae.index];if(Me.id=ae.id,Me.index=ae.index,Me.type=ae.type,Me.streamInfo=Ie(ae.period),Me.representationCount=O.getRepresentationCount(ve),Me.labels=O.getLabelsForAdaptation(ve),Me.lang=O.getLanguageForAdaptation(ve),Me.segmentAlignment=O.getSegmentAlignment(ve),Me.subSegmentAlignment=O.getSubSegmentAlignment(ve),ue=O.getViewpointForAdaptation(ve),Me.viewpoint=ue.length?ue[0].value:void 0,Me.viewpointsWithSchemeIdUri=ue,je=O.getAccessibilityForAdaptation(ve),Me.accessibility=je.map(function(yt){var pt=yt.value,Gt=pt;return yt.schemeIdUri&&yt.schemeIdUri.search("cea-608")>=0&&H!==void 0&&(Gt=pt?"cea-608:"+pt:"cea-608",Me.embeddedCaptions=!0),Gt}),Me.accessibilitiesWithSchemeIdUri=je,te=O.getAudioChannelConfigurationForAdaptation(ve),Me.audioChannelConfiguration=te.map(function(yt){return yt.value}),Me.audioChannelConfigurationsWithSchemeIdUri=te,Me.audioChannelConfiguration.length===0&&Array.isArray(ve.Representation_asArray)&&ve.Representation_asArray.length>0&&(Pe=O.getAudioChannelConfigurationForRepresentation(ve.Representation_asArray[0]),Me.audioChannelConfiguration=Pe.map(function(yt){return yt.value}),Me.audioChannelConfigurationsWithSchemeIdUri=Pe),xe=O.getRolesForAdaptation(ve),Me.roles=xe.map(function(yt){return yt.value}),Me.rolesWithSchemeIdUri=xe,Me.codec=O.getCodec(ve),Me.mimeType=O.getMimeType(ve),Me.contentProtection=O.getContentProtectionData(ve),Me.bitrateList=O.getBitrateListForAdaptation(ve),Me.selectionPriority=O.getSelectionPriority(ve),Me.contentProtection){var De=Me.contentProtection.map(function(yt){return O.getKID(yt)}).filter(function(yt){return yt!==null});if(De.length){var $e=De[0];Me.contentProtection.forEach(function(yt){yt.keyId=$e})}}if(Me.isText=O.getIsText(ve),Me.supplementalProperties=O.getSupplementalPropertiesForAdaptation(ve),(!Me.supplementalProperties||Object.keys(Me.supplementalProperties).length===0)&&Array.isArray(ve.Representation_asArray)&&ve.Representation_asArray.length>0){var mt=ve.Representation_asArray.map(function(yt){return O.getSupplementalPropertiesForRepresentation(yt)});mt.every(function(yt){return JSON.stringify(yt)===JSON.stringify(mt[0])})&&(Me.supplementalProperties=mt[0])}if(Me.supplementalPropertiesAsArray=O.getSupplementalPropertiesAsArrayForAdaptation(ve),(!Me.supplementalPropertiesAsArray||Me.supplementalPropertiesAsArray.length===0)&&Array.isArray(ve.Representation_asArray)&&ve.Representation_asArray.length>0){var ct=ve.Representation_asArray.map(function(yt){return O.getSupplementalPropertiesAsArrayForRepresentation(yt)});ct.every(function(yt){return JSON.stringify(yt)===JSON.stringify(ct[0])})&&(Me.supplementalPropertiesAsArray=ct[0])}return Me.essentialProperties=O.getEssentialPropertiesForAdaptation(ve),Me.essentialPropertiesAsArray=O.getEssentialPropertiesAsArrayForAdaptation(ve),Me.isFragmented=O.getIsFragmented(ve),Me.isEmbedded=!1,Me}function ke(ae,ue,te){ae.id=ue,ae.index=100+parseInt(ue.substring(2,3)),ae.type=ee.TEXT,ae.codec="cea-608-in-SEI",ae.isEmbedded=!0,ae.isFragmented=!1;var Pe=Tc()(te);ae.lang=Pe||te,ae.roles=["caption"],ae.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function Ie(ae){var ue,te,Pe=new Yh;return Pe.id=ae.id,Pe.index=ae.index,Pe.start=ae.start,Pe.duration=ae.duration,Pe.manifestInfo=(ue=ae.mpd,(te=new jE).dvrWindowSize=ue.timeShiftBufferDepth,te.loadedTime=ue.manifest.loadedTime,te.availableFrom=ue.availabilityStartTime,te.minBufferTime=ue.manifest.minBufferTime,te.maxFragmentDuration=ue.maxSegmentDuration,te.duration=O.getDuration(ue.manifest),te.isDynamic=O.getIsDynamic(ue.manifest),te.serviceDescriptions=O.getServiceDescriptions(ue.manifest),te.protocol=ue.manifest.protocol,te),Pe.isLast=ae.mpd.manifest.Period_asArray.length===1||Math.abs(Pe.start+Pe.duration-Pe.manifestInfo.duration)<1,Pe}function Ge(){if(!ee)throw new Error("setConfig function has to be called previously")}function q(ae){return V.length>0?V[0].mpd.manifest.Period_asArray[ae]:null}function le(ae,ue,te){var Pe,xe,je,Me,ve;if(ae){for(Pe=ae.AdaptationSet_asArray,Me=0;Me<Pe.length;Me+=1)for(je=Pe[Me].Representation_asArray,ve=0;ve<je.length;ve+=1)if(ue===(xe=je[ve]).id)return te?ve:xe}return null}return k={getBandwidthForRepresentation:function(ae,ue){var te;return(te=le(q(ue),ae))?te.bandwidth:null},getIndexForRepresentation:function(ae,ue){return function(te,Pe){var xe=le(te,Pe,!0);return xe!==null?xe:-1}(q(ue),ae)},getMaxIndexForBufferType:function(ae,ue){return function(te,Pe){var xe,je,Me,ve;if(!te||!Pe)return-1;for(je=te.AdaptationSet_asArray,ve=0;ve<je.length;ve+=1)if(Me=(xe=je[ve]).Representation_asArray,O.getIsTypeOf(xe,Pe))return Me.length;return-1}(q(ue),ae)},convertRepresentationToRepresentationInfo:function(ae){if(ae){var ue=new zh,te=ae.adaptation.period.mpd.manifest.Period_asArray[ae.adaptation.period.index].AdaptationSet_asArray[ae.adaptation.index],Pe=O.getRepresentationFor(ae.index,te);return ue.id=ae.id,ue.quality=ae.index,ue.bandwidth=O.getBandwidth(Pe),ue.fragmentDuration=ae.segmentDuration||(ae.segments&&ae.segments.length>0?ae.segments[0].duration:NaN),ue.MSETimeOffset=ae.MSETimeOffset,ue.mediaInfo=Se(ae.adaptation),ue}return null},getStreamsInfo:function(ae,ue){var te=[],Pe=V;if(ae&&(Ge(),Pe=_e(ae)),Pe.length>0){(!ue||ue>Pe.length)&&(ue=Pe.length);for(var xe=0;xe<ue;xe++)te.push(Ie(Pe[xe]))}return te},getMediaInfoForType:function(ae,ue){if(V.length===0||!ae)return null;var te=We(ae,V);if(!te)return null;var Pe=O.getAdaptationsForPeriod(te),xe=de(ae.index,ue,ae);return xe?Se(Pe[O.getIndexForAdaptation(xe,V[0].mpd.manifest,ae.index)]):null},getAllMediaInfoForType:ie,getAdaptationForType:de,getRealAdaptation:function(ae,ue){var te,Pe,xe=We(ae,V);return te=ue?ue.id:null,V.length>0&&xe&&(Pe=te?O.getAdaptationForId(te,V[0].mpd.manifest,xe.index):O.getAdaptationForIndex(ue?ue.index:null,V[0].mpd.manifest,xe.index)),Pe},getProducerReferenceTimes:function(ae,ue){var te,Pe,xe=We(ae,V);return te=ue?ue.id:null,V.length>0&&xe&&(Pe=te?O.getAdaptationForId(te,V[0].mpd.manifest,xe.index):O.getAdaptationForIndex(ue?ue.index:null,V[0].mpd.manifest,xe.index)),Pe?O.getProducerReferenceTimesForAdaptation(Pe):[]},getRealPeriodByIndex:function(ae){return O.getRealPeriodForIndex(ae,V[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(ae){try{return O.getEssentialPropertiesForRepresentation(ae)}catch(ue){return[]}},getVoRepresentations:function(ae){var ue=Ze(ae);return O.getRepresentationsForAdaptation(ue)},getEventsFor:function(ae,ue,te){var Pe=[];if(V.length>0){var xe=V[0].mpd.manifest;if(ae instanceof Yh){var je=We(ae,V);Pe=O.getEventsForPeriod(je)}else if(ae instanceof Kf){var Me=We(te,V);Pe=O.getEventStreamForAdaptationSet(xe,Ze(ae),Me)}else if(ae instanceof zh){var ve=We(te,V);Pe=O.getEventStreamForRepresentation(xe,ue,ve)}}return Pe},getEvent:function(ae,ue,te,Pe){try{if(!ae||!ue||isNaN(te)||!Pe)return null;var xe=ae.scheme_id_uri,je=ae.value;if(!ue[xe+"/"+je])return null;var Me,ve=new uo,De=ae.timescale||1,$e=Pe.adaptation.period.start,mt=ue[xe+"/"+je],ct=isNaN(Pe.presentationTimeOffset)?isNaN(mt.presentationTimeOffset)?0:mt.presentationTimeOffset:Pe.presentationTimeOffset,yt=ae.presentation_time_delta/De;Me=ae.version===0?$e+te-ct+yt:$e-ct+yt;var pt=ae.event_duration/De,Gt=ae.id,Vt=ae.message_data;return ve.eventStream=mt,ve.eventStream.value=je,ve.eventStream.timescale=De,ve.duration=pt,ve.id=Gt,ve.calculatedPresentationTime=Me,ve.messageData=Vt,ve.presentationTimeDelta=yt,ve}catch(jt){return null}},getMpd:ye,setConfig:function(ae){ae&&(ae.constants&&(ee=ae.constants),ae.cea608parser&&(H=ae.cea608parser),ae.errHandler&&O.setConfig({errHandler:ae.errHandler}),ae.BASE64&&O.setConfig({BASE64:ae.BASE64}))},updatePeriods:function(ae){if(!ae)return null;Ge(),V=_e(ae)},getIsTextTrack:function(ae){return O.getIsText(ae)},getUTCTimingSources:function(){var ae=Oe();return O.getUTCTimingSources(ae)},getSuggestedPresentationDelay:function(){var ae=V.length>0?V[0].mpd:null;return O.getSuggestedPresentationDelay(ae)},getAvailabilityStartTime:function(ae){var ue=ye(ae);return O.getAvailabilityStartTime(ue)},getIsTypeOf:function(ae,ue){return O.getIsTypeOf(ae,ue)},getIsDynamic:function(ae){var ue=Oe(ae);return O.getIsDynamic(ue)},getDuration:function(ae){var ue=Oe(ae);return O.getDuration(ue)},getRegularPeriods:_e,getContentSteering:function(ae){return O.getContentSteering(ae)},getLocation:function(ae){return O.getLocation(ae)},getPatchLocation:function(ae){var ue=O.getPatchLocation(ae),te=O.getPublishTime(ae);return ue&&ue.length!==0&&te?ue.filter(function(Pe){return isNaN(Pe.ttl)||te.getTime()+Pe.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(ae){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return O.getManifestUpdatePeriod(ae,ue)},getPublishTime:function(ae){return O.getPublishTime(ae)},getIsDVB:function(ae){return O.hasProfile(ae,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(ae){return j.getIsPatch(ae)},getBaseURLsFromElement:function(ae){return O.getBaseURLsFromElement(ae)},getRepresentationSortFunction:function(){return O.getRepresentationSortFunction()},getCodec:function(ae,ue,te){return O.getCodec(ae,ue,te)},getPeriodById:function(ae){if(!ae||V.length===0)return null;var ue=V.filter(function(te){return te.id===ae});return ue&&ue.length>0?ue[0]:null},setCurrentMediaInfo:function(ae,ue,te){W[ae]=W[ae]||{},W[ae][ue]=W[ae][ue]||{},W[ae][ue]=te},isPatchValid:function(ae,ue){var te=O.getId(ae),Pe=j.getMpdId(ue),xe=O.getPublishTime(ae),je=j.getPublishTime(ue),Me=j.getOriginalPublishTime(ue);return!!(te&&Pe&&te==Pe&&xe&&Me&&xe.getTime()==Me.getTime()&&je&&xe.getTime()<je.getTime())},applyPatchToManifest:function(ae,ue){j.getPatchOperations(ue).forEach(function(te){var Pe=te.getMpdTarget(ae);if(Pe!==null){var xe=Pe.name,je=Pe.target,Me=Pe.leaf;if(te.xpath.findsAttribute()||xe==="__text")switch(te.action){case"add":case"replace":je[xe]=te.value;break;case"remove":delete je[xe]}else{var ve=(je[xe+"_asArray"]||[]).indexOf(Me),De=te.position==="prepend"||te.position==="before";if((te.action==="remove"||te.action==="replace")&&(delete je[xe],ve!=-1)){var $e=je[xe+"_asArray"];$e.splice(ve,1),$e.length>1?je[xe]=$e:$e.length==1?je[xe]=$e[0]:delete je[xe+"_asArray"]}te.action!=="add"&&te.action!=="replace"||Object.keys(te.value).forEach(function(mt){var ct=te.value[mt],yt=je[mt+"_asArray"]||[];if(yt.length===0&&je[mt]&&yt.push(je[mt]),yt.length===0)yt=ct;else{var pt=yt.length;pt=mt==xe&&ve!=-1?ve+(De?0:1)+(te.action=="replace"?-1:0):De?0:yt.length,yt.splice.apply(yt,[pt,0].concat(ct))}je[mt+"_asArray"]=yt,je[mt]=yt.length==1?yt[0]:yt})}}})},areMediaInfosEqual:Ae,reset:ze},O=er(re).getInstance(),j=qE(re).getInstance(),ze(),k}Lm.__dashjs_factory_name="DashAdapter";var Wf=F.Z.getSingletonFactory(Lm);function km(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var Fm=function(){function k(){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,k)}var O,j;return O=k,j=[{key:"round10",value:function(V,W){return function(ee,H,re){return re===void 0||+re==0?Math[ee](H):(re=+re,(H=+H)===null||isNaN(H)||typeof re!="number"||re%1!=0?NaN:(H=H.toString().split("e"),+((H=(H=Math[ee](+(H[0]+"e"+(H[1]?+H[1]-re:-re)))).toString().split("e"))[0]+"e"+(H[1]?+H[1]+re:re))))}("round",V,W)}}],j&&km(O,j),k}(),Um=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Bm=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.t=null,this.mt=null,this.to=null,this.lto=null},Bl=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.t=null,this.level=null},GE=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.target=null,this.state=P.Z.BUFFER_EMPTY},HE=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.time=null,this.range=null,this.manifestInfo=null},VE=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.time=null,this.droppedFrames=null};function Wh(k,O){if(!(k instanceof O))throw new TypeError("Cannot call a class as a function")}var KE=function k(){Wh(this,k),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},zE=function k(){Wh(this,k),this.id=null,this.index=null,this.start=null,this.duration=null},YE=function k(){Wh(this,k),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},WE=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},$E=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.loadingRequests=[],this.executedRequests=[]};function jm(k){var O,j,V=(k=k||{}).settings,W=this.context,ee=(0,g.Z)(W).getInstance();function H(){ee.trigger(T.Z.METRICS_CHANGED)}function re(ye){ee.trigger(T.Z.METRIC_CHANGED,{mediaType:ye}),H()}function de(ye,ze,Oe){ee.trigger(T.Z.METRIC_UPDATED,{mediaType:ye,metric:ze,value:Oe}),re(ye)}function Ae(ye,ze,Oe){ee.trigger(T.Z.METRIC_ADDED,{mediaType:ye,metric:ze,value:Oe}),re(ye)}function Te(ye,ze){var Oe=null;return ye&&(j.hasOwnProperty(ye)?Oe=j[ye]:ze||(Oe=new Um,j[ye]=Oe)),Oe}function ie(ye,ze,Oe){var Ze=Te(ye);Ze!==null&&(Ze[ze].push(Oe),Ze[ze].length>V.get().streaming.metrics.maxListDepth&&Ze[ze].shift())}function _e(ye,ze,Oe){ie(ye,ze,Oe),Ae(ye,ze,Oe)}return O={clearCurrentMetricsForType:function(ye){delete j[ye],re(ye)},clearAllCurrentMetrics:function(){j={},H()},getMetricsFor:Te,addHttpRequest:function ye(ze,Oe,Ze,We,Se,ke,Ie,Ge,q,le,ae,ue,te,Pe,xe,je,Me){var ve=new st.w;ke!=null&&ke!==We&&(ye(ze,null,Ze,We,Se,null,null,Ge,q,null,null,null,te,null,null,je,Me),ve.actualurl=ke),ve.tcpid=Oe,ve.type=Ze,ve.url=We,ve.range=Ge,ve.trequest=q,ve.tresponse=le,ve.responsecode=ue,ve.cmsd=Me,ve._tfinish=ae,ve._stream=ze,ve._mediaduration=te,ve._quality=Se,ve._responseHeaders=Pe,ve._serviceLocation=Ie,ve._fileLoaderType=je,xe?xe.forEach(function(De){(function($e,mt,ct,yt){var pt=new st.O;pt.s=mt,pt.d=ct,pt.b=yt,$e.trace.push(pt),$e.interval||($e.interval=0),$e.interval+=ct})(ve,De.s,De.d,De.b)}):(delete ve.interval,delete ve.trace),_e(ze,P.Z.HTTP_REQUEST,ve)},addRepresentationSwitch:function(ye,ze,Oe,Ze,We){var Se=new Bm;Se.t=ze,Se.mt=Oe,Se.to=Ze,We?Se.lto=We:delete Se.lto,_e(ye,P.Z.TRACK_SWITCH,Se)},addBufferLevel:function(ye,ze,Oe){var Ze=new Bl;Ze.t=ze,Ze.level=Oe,_e(ye,P.Z.BUFFER_LEVEL,Ze)},addBufferState:function(ye,ze,Oe){var Ze=new GE;Ze.target=Oe,Ze.state=ze,_e(ye,P.Z.BUFFER_STATE,Ze)},addDVRInfo:function(ye,ze,Oe,Ze){var We=new HE;We.time=ze,We.range=Ze,We.manifestInfo=Oe,_e(ye,P.Z.DVR_INFO,We)},addDroppedFrames:function(ye,ze){var Oe=new VE,Ze=Te(ye).DroppedFrames;ze&&(Oe.time=ze.creationTime,Oe.droppedFrames=ze.droppedVideoFrames,Ze.length>0&&Ze[Ze.length-1]==Oe||_e(ye,P.Z.DROPPED_FRAMES,Oe))},addSchedulingInfo:function(ye,ze,Oe,Ze,We,Se,ke,Ie,Ge){var q=new WE;q.mediaType=ye,q.t=ze,q.type=Oe,q.startTime=Ze,q.availabilityStartTime=We,q.duration=Se,q.quality=ke,q.range=Ie,q.state=Ge,_e(ye,P.Z.SCHEDULING_INFO,q)},addRequestsQueue:function(ye,ze,Oe){var Ze=new $E;Ze.loadingRequests=ze,Ze.executedRequests=Oe,Te(ye).RequestsQueue=Ze,Ae(ye,P.Z.REQUESTS_QUEUE,Ze)},addManifestUpdate:function(ye,ze,Oe,Ze,We,Se,ke,Ie,Ge,q){var le=new KE;le.mediaType=ye,le.type=ze,le.requestTime=Oe,le.fetchTime=Ze,le.availabilityStartTime=We,le.presentationStartTime=Se,le.clientTimeOffset=ke,le.currentTime=Ie,le.buffered=Ge,le.latency=q,ie(E.Z.STREAM,P.Z.MANIFEST_UPDATE,le),Ae(ye,P.Z.MANIFEST_UPDATE,le)},updateManifestUpdateInfo:function(ye,ze){if(ye){for(var Oe in ze)ye[Oe]=ze[Oe];de(ye.mediaType,P.Z.MANIFEST_UPDATE,ye)}},addManifestUpdateStreamInfo:function(ye,ze,Oe,Ze,We){if(ye){var Se=new zE;Se.id=ze,Se.index=Oe,Se.start=Ze,Se.duration=We,ye.streamInfo.push(Se),de(ye.mediaType,P.Z.MANIFEST_UPDATE_STREAM_INFO,ye)}},addManifestUpdateRepresentationInfo:function(ye,ze,Oe,Ze,We,Se,ke,Ie){if(ye&&ye.representationInfo){var Ge=new YE;Ge.id=ze,Ge.index=Oe,Ge.streamIndex=Ze,Ge.mediaType=We,Ge.startNumber=ke,Ge.fragmentInfoType=Ie,Ge.presentationTimeOffset=Se,ye.representationInfo.push(Ge),de(ye.mediaType,P.Z.MANIFEST_UPDATE_TRACK_INFO,ye)}},addPlayList:function(ye){ye.trace&&Array.isArray(ye.trace)?ye.trace.forEach(function(ze){ze.hasOwnProperty("subreplevel")&&!ze.subreplevel&&delete ze.subreplevel}):delete ye.trace,_e(E.Z.STREAM,P.Z.PLAY_LIST,ye)},addDVBErrors:function(ye){_e(E.Z.STREAM,P.Z.DVB_ERRORS,ye)}},j={},O}jm.__dashjs_factory_name="MetricsModel";var Zm=F.Z.getSingletonFactory(jm);function nl(k){k=k||{};var O,j,V,W,ee=this.context,H=k.metricsModel;function re(Te){var ie=H.getMetricsFor(Te,!0);if(!ie)return null;var _e,ye=ie.HttpList,ze=null;if(!ye||ye.length<=0)return null;for(_e=ye.length-1;_e>=0;){if(ye[_e].responsecode){ze=ye[_e];break}_e--}return ze}function de(Te){var ie=H.getMetricsFor(Te,!0);return ie&&ie.HttpList?ie.HttpList:[]}function Ae(Te,ie){if(!Te)return null;var _e=Te[ie];return _e&&_e.length!==0?_e[_e.length-1]:null}return O={getCurrentRepresentationSwitch:function(Te){return Ae(H.getMetricsFor(Te,!0),P.Z.TRACK_SWITCH)},getCurrentBufferState:function(Te){return Ae(H.getMetricsFor(Te,!0),P.Z.BUFFER_STATE)},getCurrentBufferLevel:function(Te){var ie=Ae(H.getMetricsFor(Te,!0),P.Z.BUFFER_LEVEL);return ie?Fm.round10(ie.level/1e3,-3):0},getCurrentHttpRequest:re,getHttpRequests:de,getCurrentDroppedFrames:function(){return Ae(H.getMetricsFor(E.Z.VIDEO,!0),P.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(Te){return Ae(H.getMetricsFor(Te,!0),P.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(Te){return Ae(Te?H.getMetricsFor(Te,!0):H.getMetricsFor(E.Z.VIDEO,!0)||H.getMetricsFor(E.Z.AUDIO,!0),P.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return Ae(H.getMetricsFor(E.Z.STREAM),P.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(Te,ie){if(!ie)return null;var _e={},ye=re(Te);ye&&(_e=dn.Z.parseHttpHeaders(ye._responseHeaders));var ze=_e[ie.toLowerCase()];return ze===void 0?null:ze},getLatestMPDRequestHeaderValueByID:function(Te){if(!Te)return null;var ie,_e,ye,ze={};for(ye=(ie=de(E.Z.STREAM)).length-1;ye>=0;ye--)if((_e=ie[ye]).type===st.w.MPD_TYPE){ze=dn.Z.parseHttpHeaders(_e._responseHeaders);break}var Oe=ze[Te.toLowerCase()];return Oe===void 0?null:Oe},addRepresentationSwitch:function(Te,ie,_e,ye,ze){H.addRepresentationSwitch(Te,ie,_e,ye,ze)},addDVRInfo:function(Te,ie,_e,ye){H.addDVRInfo(Te,ie,_e,ye)},updateManifestUpdateInfo:function(Te){var ie=this.getCurrentManifestUpdate();H.updateManifestUpdateInfo(ie,Te)},addManifestUpdateStreamInfo:function(Te){if(Te){var ie=this.getCurrentManifestUpdate();H.addManifestUpdateStreamInfo(ie,Te.id,Te.index,Te.start,Te.duration)}},addManifestUpdateRepresentationInfo:function(Te,ie){if(Te){var _e=this.getCurrentManifestUpdate();H.addManifestUpdateRepresentationInfo(_e,Te.id,Te.index,Te.streamIndex,ie,Te.presentationTimeOffset,Te.startNumber,Te.fragmentInfoType)}},addManifestUpdate:function(Te){H.addManifestUpdate(E.Z.STREAM,Te.type,Te.requestStartDate,Te.requestEndDate)},addHttpRequest:function(Te,ie,_e,ye,ze,Oe){H.addHttpRequest(Te.mediaType,null,Te.type,Te.url,Te.quality,ie,Te.serviceLocation||null,Te.range||null,Te.requestStartDate,Te.firstByteDate,Te.requestEndDate,_e,Te.duration,ye,ze,Te.fileLoaderType,Oe)},addSchedulingInfo:function(Te,ie){H.addSchedulingInfo(Te.mediaType,new Date,Te.type,Te.startTime,Te.availabilityStartTime,Te.duration,Te.quality,Te.range,ie)},addRequestsQueue:function(Te,ie,_e){H.addRequestsQueue(Te,ie,_e)},addBufferLevel:function(Te,ie,_e){H.addBufferLevel(Te,ie,_e)},addBufferState:function(Te,ie,_e){H.addBufferState(Te,ie,_e)},addDroppedFrames:function(Te){H.addDroppedFrames(E.Z.VIDEO,Te)},addPlayList:function(){W&&(H.addPlayList(W),W=null)},addDVBErrors:function(Te){H.addDVBErrors(Te)},createPlaylistMetrics:function(Te,ie){(W=new ut).start=new Date,W.mstart=Te,W.starttype=ie},createPlaylistTraceMetrics:function(Te,ie,_e){j===!0&&(j=!1,(V=new nt).representationid=Te,V.start=new Date,V.mstart=ie,V.playbackspeed=_e!==null?_e.toString():null)},updatePlayListTraceMetrics:function(Te){if(V)for(var ie in V)V[ie]=Te[ie]},pushPlayListTraceMetrics:function(Te,ie){if(j===!1&&W&&V&&V.start){var _e=V.start,ye=Te.getTime()-_e.getTime();V.duration=ye,V.stopreason=ie,W.trace.push(V),j=!0}},clearAllCurrentMetrics:function(){H.clearAllCurrentMetrics()}},H=H||Zm(ee).getInstance({settings:k.settings}),j=!0,V=null,W=null,O}nl.__dashjs_factory_name="DashMetrics";var Nc=F.Z.getSingletonFactory(nl);function $h(){var k,O,j,V,W=this.context,ee=(0,g.Z)(W).getInstance(),H=(0,qe.Z)(W).getInstance();function re(We){V=We}function de(We,Se,ke,Ie){var Ge,q=Se.adaptation.period.mpd,le=q.availabilityStartTime;if(Ie)Ge=ke&&q.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(le.getTime()+1e3*(We+q.timeShiftBufferDepth)):q.availabilityEndTime;else if(ke){var ae=Se.availabilityTimeOffset;Ge=new Date(le.getTime()+1e3*(We-ae))}else Ge=le;return Ge}function Ae(We,Se){return(We.getTime()-Se.mpd.availabilityStartTime.getTime()+1e3*V)/1e3}function Te(We,Se){return We+(Se.adaptation.period.start-Se.presentationTimeOffset)}function ie(We){var Se={start:NaN,end:NaN},ke=We[0].getAdapter().getRegularPeriods()[0],Ie=Ae(new Date,ke);if(!We||We.length===0)return{range:Se,now:Ie};We.forEach(function(q){var le=q.getAdapter(),ae=le.getMediaInfoForType(q.getStreamInfo(),E.Z.VIDEO)||le.getMediaInfoForType(q.getStreamInfo(),E.Z.AUDIO),ue=le.getVoRepresentations(ae)[0],te={start:NaN,end:NaN};if(ue)if(ue.segmentInfoType===y.Z.SEGMENT_TIMELINE)te=function(xe){var je,Me,ve,De,$e=xe.adaptation.period.mpd.manifest.Period_asArray[xe.adaptation.period.index].AdaptationSet_asArray[xe.adaptation.index],mt=O.getRepresentationFor(xe.index,$e),ct=mt.SegmentTemplate||mt.SegmentList,yt=ct.SegmentTimeline,pt=ct.timescale,Gt=yt.S_asArray,Vt={start:0,end:0},jt=Gt[0].t,Zt=!isNaN(jt),xn=Zt?jt:0,at=0;for(Zt&&(Vt.start=Te(xn/pt,xe)),ve=0,De=Gt.length;ve<De;ve++)Me=0,(je=Gt[ve]).hasOwnProperty("r")&&(Me=je.r),at+=je.d*(1+Me);return Vt.end=Te((xn+at)/pt,xe),Vt}(ue);else{var Pe=ue.adaptation.period;te.start=Pe.start,te.end=Math.max(Ie,Pe.start+Pe.duration)}!isNaN(te.start)&&(isNaN(Se.start)||Se.start>te.start)&&(Se.start=te.start),!isNaN(te.end)&&(isNaN(Se.end)||Se.end<te.end)&&(Se.end=te.end)}),Se.end=Math.min(Ie,Se.end);var Ge=ye(We,Se.end,!0);return Se.end=isNaN(Ge)?Se.end:Ge,Se.start=ke&&ke.mpd&&ke.mpd.timeShiftBufferDepth&&!isNaN(ke.mpd.timeShiftBufferDepth)&&!isNaN(Se.end)?Math.max(Se.end-ke.mpd.timeShiftBufferDepth,Se.start):Se.start,Se.start=ye(We,Se.start),{range:Se,now:Ie}}function _e(We,Se){j=We-Se.end}function ye(We,Se){var ke=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var Ie=0,Ge=!1,q=NaN;!Ge&&Ie<We.length;){var le=We[Ie].getStreamInfo();le.start<=Se&&(!isFinite(le.duration)||le.start+le.duration>=Se)?(q=Se,Ge=!0):!ke&&le.start>Se&&(isNaN(q)||le.start<q)?q=le.start:ke&&le.start+le.duration<Se&&(isNaN(q)||le.start+le.duration>q)&&(q=le.start+le.duration),Ie+=1}return q}catch(ae){return Se}}function ze(We){We.offset===void 0||isNaN(We.offset)||re(We.offset/1e3)}function Oe(){V=0,j=0}function Ze(){ee.off(T.Z.UPDATE_TIME_SYNC_OFFSET,ze,this),Oe()}return k={initialize:function(){Oe(),ee.on(T.Z.UPDATE_TIME_SYNC_OFFSET,ze,this)},getClientTimeOffset:function(){return V},setClientTimeOffset:re,getClientReferenceTime:function(){return Date.now()-1e3*j+1e3*V},calcAvailabilityStartTimeFromPresentationTime:function(We,Se,ke){return de(We,Se,ke)},calcAvailabilityEndTimeFromPresentationTime:function(We,Se,ke){return de(We,Se,ke,!0)},calcPresentationTimeFromWallTime:Ae,calcPresentationTimeFromMediaTime:Te,calcPeriodRelativeTimeFromMpdRelativeTime:function(We,Se){return Se-We.adaptation.period.start},calcMediaTimeFromPresentationTime:function(We,Se){return We-Se.adaptation.period.start+Se.presentationTimeOffset},calcWallTimeForSegment:function(We,Se){var ke,Ie,Ge;return Se&&(ke=We.representation.adaptation.period.mpd.suggestedPresentationDelay,Ie=We.presentationStartTime+ke,Ge=new Date(We.availabilityStartTime.getTime()+1e3*Ie)),Ge},calcTimeShiftBufferWindow:function(We,Se){if(!Se)return function(Ie){var Ge={start:NaN,end:NaN},q=0,le=NaN;return Ie.forEach(function(ae){var ue=ae.getStreamInfo();q+=ue.duration,(isNaN(le)||ue.start<le)&&(le=ue.start)}),Ge.start=le,Ge.end=le+q,Ge}(We);if(H.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var ke=ie(We);return _e(ke.now,ke.range),ke.range}return function(Ie){var Ge={start:NaN,end:NaN};if(!Ie||Ie.length===0)return Ge;var q=Ie[0].getAdapter().getRegularPeriods()[0],le=Ae(new Date,q),ae=q.mpd.timeShiftBufferDepth,ue=isNaN(ae)?0:le-ae;if(Ge.start=ye(Ie,ue),Ge.end=!isNaN(Ge.start)&&le<Ge.start?le:ye(Ie,le,!0),!isNaN(ae)&&Ge.end<le-ae&&(Ge.end=NaN),H.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var te=ie(Ie);if(te.range.end<Ge.start)return ee.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Hs.LEVELS.WARNING,event:Hs.EVENTS.INVALID_DVR_WINDOW}),_e(te.now,te.range),te.range}return Ge}(We)},reset:Ze},O=er(W).getInstance(),Ze(),k}$h.__dashjs_factory_name="TimelineConverter";var qm=F.Z.getSingletonFactory($h),ua=w(4593),Lr=w(6934);function pi(k){return pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},pi(k)}function Ws(k,O){return Ws=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},Ws(k,O)}function Xh(k,O){return!O||pi(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function $s(k){return $s=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},$s(k)}var Gm=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&Ws(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=$s(O);if(j){var re=$s(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Xh(this,ee)});function W(){var ee;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,W),(ee=V.call(this)).captionData=null,ee.label=null,ee.defaultTrack=!1,ee.kind=null,ee.isFragmented=!1,ee.isEmbedded=!1,ee.isTTML=null,ee}return W}(Kf),Hm=w(2295);function Vm(){var k=0;function O(re){for(var de="",Ae=0;Ae<re.length;++Ae)de+=re[Ae].uchar;return de.length-de.replace(/^\s+/,"").length}function j(re){return"left: "+3.125*re.x+"%; top: "+6.66*re.y1+"%; width: "+(100-3.125*re.x)+"%; height: "+6.66*Math.max(re.y2-1-re.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function V(re){return re==="red"?"rgb(255, 0, 0)":re==="green"?"rgb(0, 255, 0)":re==="blue"?"rgb(0, 0, 255)":re==="cyan"?"rgb(0, 255, 255)":re==="magenta"?"rgb(255, 0, 255)":re==="yellow"?"rgb(255, 255, 0)":re==="white"?"rgb(255, 255, 255)":re==="black"?"rgb(0, 0, 0)":re}function W(re,de){var Ae=re.videoHeight/15;return de?"font-size: "+Ae+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(de.foreground?V(de.foreground):"rgb(255, 255, 255)")+"; font-style: "+(de.italics?"italic":"normal")+"; text-decoration: "+(de.underline?"underline":"none")+"; white-space: pre; background-color: "+(de.background?V(de.background):"transparent")+";":"font-size: "+Ae+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function ee(re){return re.replace(/^\s+/g,"")}function H(re){return re.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(re,de,Ae,Te){var ie,_e,ye=null,ze=!1,Oe=-1,Ze={start:de,end:Ae,spans:[]},We="style_cea608_white_black",Se={},ke={},Ie=[];for(ie=0;ie<15;++ie){var Ge=Te.rows[ie],q="",le=null;if(Ge.isEmpty()===!1){var ae=O(Ge.chars);ye===null&&(ye={x:ae,y1:ie,y2:ie+1,p:[]}),ae!==Oe&&ze&&(ye.p.push(Ze),Ze={start:de,end:Ae,spans:[]},ye.y2=ie,ye.name="region_"+ye.x+"_"+ye.y1+"_"+ye.y2,Se.hasOwnProperty(ye.name)===!1?(Ie.push(ye),Se[ye.name]=ye):Se[ye.name].p.contat(ye.p),ye={x:ae,y1:ie,y2:ie+1,p:[]});for(var ue=0;ue<Ge.chars.length;++ue){var te=Ge.chars[ue],Pe=te.penState;if(le===null||!Pe.equals(le)){q.trim().length>0&&(Ze.spans.push({name:We,line:q,row:ie}),q="");var xe="style_cea608_"+Pe.foreground+"_"+Pe.background;Pe.underline&&(xe+="_underline"),Pe.italics&&(xe+="_italics"),ke.hasOwnProperty(xe)||(ke[xe]=JSON.parse(JSON.stringify(Pe))),le=Pe,We=xe}q+=te.uchar}q.trim().length>0&&Ze.spans.push({name:We,line:q,row:ie}),ze=!0,Oe=ae}else ze=!1,Oe=-1,ye&&(ye.p.push(Ze),Ze={start:de,end:Ae,spans:[]},ye.y2=ie,ye.name="region_"+ye.x+"_"+ye.y1+"_"+ye.y2,Se.hasOwnProperty(ye.name)===!1?(Ie.push(ye),Se[ye.name]=ye):Se[ye.name].p.contat(ye.p),ye=null)}ye&&(ye.p.push(Ze),ye.y2=ie+1,ye.name="region_"+ye.x+"_"+ye.y1+"_"+ye.y2,Se.hasOwnProperty(ye.name)===!1?(Ie.push(ye),Se[ye.name]=ye):Se[ye.name].p.contat(ye.p),ye=null);var je=[];for(ie=0;ie<Ie.length;++ie){var Me=Ie[ie],ve="sub_cea608_"+k++,De=document.createElement("div");De.id=ve;var $e=j(Me);De.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+$e;var mt=document.createElement("div");mt.className="paragraph bodyStyle",mt.style.cssText=W(re);var ct=document.createElement("div");ct.className="cueUniWrapper",ct.style.cssText="unicode-bidi: normal; direction: ltr;";for(var yt=0;yt<Me.p.length;++yt){var pt=Me.p[yt],Gt=0;for(_e=0;_e<pt.spans.length;++_e){var Vt=pt.spans[_e];if(Vt.line.length>0){if(_e!==0&&Gt!=Vt.row){var jt=document.createElement("br");jt.className="lineBreak",ct.appendChild(jt)}var Zt=!1;Gt===Vt.row&&(Zt=!0),Gt=Vt.row;var xn=ke[Vt.name],at=document.createElement("span");at.className="spanPadding "+Vt.name+" customSpanColor",at.style.cssText=W(re,xn),_e!==0&&Zt?_e===pt.spans.length-1?at.textContent=H(Vt.line):at.textContent=Vt.line:pt.spans.length>1&&_e<pt.spans.length-1&&Vt.row===pt.spans[_e+1].row?at.textContent=ee(Vt.line):at.textContent=Vt.line.trim(),ct.appendChild(at)}}}mt.appendChild(ct),De.appendChild(mt);var St={bodyStyle:["%",90]};for(var Qt in ke)ke.hasOwnProperty(Qt)&&(St[Qt]=["%",90]);je.push({type:"html",start:de,end:Ae,cueHTMLElement:De,cueID:ve,cellResolution:[32,15],isFromCEA608:!0,fontSize:St,lineHeight:{},linePadding:{}})}return je}}}Vm.__dashjs_factory_name="EmbeddedTextHtmlRender";var jn=F.Z.getSingletonFactory(Vm);function Qh(k){var O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se=k.errHandler,ke=k.manifestModel,Ie=k.mediaController,Ge=k.videoModel,q=k.textTracks,le=k.vttParser,ae=k.vttCustomRenderingParser,ue=k.ttmlParser,te=k.streamInfo,Pe=k.settings,xe=this.context,je=(0,g.Z)(xe).getInstance(),Me=!1;function ve(){H=null,de=NaN,Ae=[],Te=null,re=!1,ee=[],W=null}function De(jt){var Zt=new Gm;for(var xn in jt)Zt[xn]=jt[xn];Zt.labels=jt.labels,Zt.defaultTrack=function(at){var St=!1;return _e.length>1&&at.isEmbedded?St=at.id&&at.id===E.Z.CC1:_e.length===1?at.id&&typeof at.id=="string"&&at.id.substring(0,2)==="CC"&&(St=!0):_e.length===0&&(St=at.index===ee[0].index),St}(jt),Zt.isFragmented=jt.isFragmented,Zt.isEmbedded=!!jt.isEmbedded,Zt.isTTML=function(at){return at.codec&&at.codec.search(E.Z.STPP)>=0||at.mimeType&&at.mimeType.search(E.Z.TTML)>=0}(jt),Zt.kind=function(at,St){var Qt=at.roles&&at.roles.length>0?St[at.roles[0]]:St.caption;return Qt=Qt===St.caption||Qt===St.subtitle?Qt:St.caption}(jt,{subtitle:"subtitles",caption:"captions"}),q.addTextTrack(Zt)}function $e(jt){var Zt=jt.chunk;Zt.mediaInfo.embeddedCaptions&&ct(Zt.bytes,Zt)}function mt(jt){ie=jt}function ct(jt,Zt){var xn=Zt.mediaInfo,at=xn.type,St=xn.mimeType,Qt=xn.codec||St;Qt?xn.codec.indexOf("application/mp4")!==-1?function(Pt,un,an){var Jt;if(un.segmentType==="InitializationSegment")re=!0,de=V.getMediaTimescaleFromMoov(Pt);else{if(!re)return;(Jt=V.getSamplesInfo(Pt).sampleList).length>0&&(Te=Jt[0].cts-un.start*de),an.search(E.Z.STPP)>=0?function(Bn,kn,mr){var vr,Ct;for(W=W!==null?W:Gt(mr),vr=0;vr<kn.length;vr++){var tn=kn[vr],qt=tn.cts,mn=pt(),Cn=mn+qt/de,Zn=Cn+tn.duration/de;O.buffered.add(Cn,Zn);var Fn=new DataView(Bn,tn.offset,tn.subSizes[0]),qn=Lr.Utils.dataViewToString(Fn,E.Z.UTF8),Yn=[],en=tn.offset+tn.subSizes[0];for(Ct=1;Ct<tn.subSizes.length;Ct++){var Nn=new Uint8Array(Bn,en,tn.subSizes[Ct]),Pn=String.fromCharCode.apply(null,Nn);Yn.push(Pn),en+=tn.subSizes[Ct]}try{var On=ke.getValue().ttmlTimeIsRelative?qt/de:0,Dn=W.parse(qn,On,qt/de,(qt+tn.duration)/de,Yn);q.addCaptions(ie,mn,Dn)}catch(bt){H.removeExecutedRequestsBeforeTime(),this.remove(),j.error("TTML parser error: "+bt.message)}}}(Pt,Jt,an):function(Bn,kn){var mr,vr,Ct,tn=[];for(mr=0;mr<kn.length;mr++){var qt=kn[mr];qt.cts-=Te;var mn=pt()+qt.cts/de,Cn=mn+qt.duration/de;O.buffered.add(mn,Cn);var Zn=Bn.slice(qt.offset,qt.offset+qt.size),Fn=Lr.parseBuffer(Zn);for(vr=0;vr<Fn.boxes.length;vr++){var qn=Fn.boxes[vr];if(j.debug("VTT box1: "+qn.type),qn.type!=="vtte"&&qn.type==="vttc"){j.debug("VTT vttc boxes.length = "+qn.boxes.length);var Yn={styles:{}};for(Ct=0;Ct<qn.boxes.length;Ct++){var en=qn.boxes[Ct];if(j.debug("VTT box2: "+en.type),en.type==="payl")Yn.start=qt.cts/de,Yn.end=(qt.cts+qt.duration)/de,Yn.data=en.cue_text;else if(en.type==="sttg"&&en.settings&&en.settings!=="")try{var Nn=en.settings.split(" ");Yn.styles=le.getCaptionStyles(Nn)}catch(Pn){}}Yn&&Yn.data&&(tn.push(Yn),j.debug("VTT  ".concat(Yn.start," - ").concat(Yn.end," :  ").concat(Yn.data)))}}}tn.length>0&&q.addCaptions(ie,0,tn)}(Pt,Jt)}}(jt,Zt,Qt):at===E.Z.VIDEO?function(Pt,un){var an,Jt;if(un.segmentType===st.w.INIT_SEGMENT_TYPE)ye===0&&(ye=V.getMediaTimescaleFromMoov(Pt));else if(un.segmentType===st.w.MEDIA_SEGMENT_TYPE){if(ye===0)return void j.warn("CEA-608: No timescale for embeddedTextTrack yet");var Bn=(Jt=V.getSamplesInfo(Pt)).lastSequenceNumber,kn=Math.trunc(un.start),mr=Math.trunc(un.end);if(Ze[0]||Ze[1]||function(){for(var mn,Cn=0;Cn<_e.length;Cn++){if((mn=q.getTrackIdxForId(_e[Cn].id))===-1)return void j.warn("CEA-608: data before track is ready.");var Zn=yt(mn);Ze[Cn]=new(x()).Cea608Parser(Cn+1,{newCue:Zn},null)}}(),ye){if(function(mn,Cn,Zn,Fn,qn){return mn!==null&&Cn!==null&&Fn!==null&&qn!==null&&(Cn===mn?Fn!==qn:Cn!==mn+Zn)}(ze,Bn,Jt.numSequences,Oe,kn))for(an=0;an<Ze.length;an++)Ze[an]&&Ze[an].reset();for(var vr=function(mn,Cn){if(Cn.length===0)return null;for(var Zn={splits:[],fields:[[],[]]},Fn=new DataView(mn),qn=0;qn<Cn.length;qn++)for(var Yn=Cn[qn],en=x().findCea608Nalus(Fn,Yn.offset,Yn.size),Nn=null,Pn=0,On=0;On<en.length;On++)for(var Dn=x().extractCea608DataFromRange(Fn,en[On]),bt=0;bt<2;bt++)if(Dn[bt].length>0){Yn.cts!==Nn?Pn=0:Pn+=1;var et=pt();Zn.fields[bt].push([Yn.cts+et*ye,Dn[bt],Pn]),Nn=Yn.cts}return Zn.fields.forEach(function(zt){zt.sort(function(Ve,tt){return Ve[0]===tt[0]?Ve[2]-tt[2]:Ve[0]-tt[0]})}),Zn}(Pt,Jt.sampleList),Ct=0;Ct<Ze.length;Ct++){var tn=vr.fields[Ct],qt=Ze[Ct];if(qt)for(an=0;an<tn.length;an++)qt.addData(tn[an][0]/ye,tn[an][1])}ze=Bn,Oe=mr}}}(jt,Zt):function(Pt,un,an){var Jt,Bn,kn=new DataView(Pt,0,Pt.byteLength);Bn=Lr.Utils.dataViewToString(kn,E.Z.UTF8);try{Jt=Gt(an).parse(Bn,0),q.addCaptions(q.getCurrentTrackIdx(),0,Jt),O.buffered&&O.buffered.add(un.start,un.end)}catch(mr){Se.error(new ce.Z(we.TIMED_TEXT_ERROR_ID_PARSE_CODE,we.TIMED_TEXT_ERROR_MESSAGE_PARSE+mr.message,Bn))}}(jt,Zt,Qt):j.error("No text type defined")}function yt(jt){return function(Zt,xn,at){var St;(St=Ge.getTTMLRenderingDiv()?We.createHTMLCaptionsFromScreen(Ge.getElement(),Zt,xn,at):[{start:Zt,end:xn,data:at.getDisplayText(),styles:{}}])&&q.addCaptions(jt,0,St)}}function pt(){return isNaN(O.timestampOffset)?0:O.timestampOffset}function Gt(jt){var Zt;return jt.search(E.Z.VTT)>=0?Zt=Pe.get().streaming.text.webvtt.customRenderingEnabled&&ae?ae:le:(jt.search(E.Z.TTML)>=0||jt.search(E.Z.STPP)>=0)&&(Zt=ue),Zt}function Vt(jt){_e.forEach(function(Zt){var xn=q.getTrackIdxForId(Zt.id);xn>=0&&q.deleteCuesFromTrackIdx(xn,jt.from,jt.to)})}return O={initialize:function(){Me||(_e=[],ie=null,ye=0,Ze=[],ze=null,Oe=null,Me=!0,We=jn(xe).getInstance(),je.on(T.Z.VIDEO_CHUNK_RECEIVED,$e,O),je.on(T.Z.BUFFER_CLEARED,Vt,O))},addMediaInfos:function(jt,Zt,xn){if(ee=ee.concat(Zt),jt===E.Z.TEXT&&Zt[0].isFragmented&&!Zt[0].isEmbedded){H=xn,O.buffered=(0,Hm.Z)(xe).create(),Ae=Ie.getTracksFor(E.Z.TEXT,te.id).filter(function(Pt){return Pt.isFragmented});for(var at=Ie.getCurrentTrackFor(E.Z.TEXT,te.id),St=0;St<Ae.length;St++)if(Ae[St]===at){mt(St);break}}for(var Qt=0;Qt<Zt.length;Qt++)De(Zt[Qt])},resetMediaInfos:function(){ee=[]},getStreamId:function(){return te.id},append:ct,abort:function(){},addEmbeddedTrack:function(jt){if(Me&&jt)if(jt.id===E.Z.CC1||jt.id===E.Z.CC3){for(var Zt=0;Zt<_e.length;Zt++)if(_e[Zt].id===jt.id)return;_e.push(jt)}else j.warn("Embedded track "+jt.id+" not supported!")},resetEmbedded:function(){je.off(T.Z.VIDEO_CHUNK_RECEIVED,$e,O),je.off(T.Z.BUFFER_CLEARED,Vt,O),q&&q.deleteAllTextTracks(),Me=!1,_e=[],Ze=[null,null],ze=null,Oe=null},getConfig:function(){return{fragmentModel:H,fragmentedTracks:Ae,videoModel:Ge}},setCurrentFragmentedTrackIdx:mt,remove:function(jt,Zt){jt===void 0&&jt===Zt&&(jt=O.buffered.start(0),Zt=O.buffered.end(O.buffered.length-1)),O.buffered.remove(jt,Zt),q.deleteCuesFromTrackIdx(ie,jt,Zt)},reset:function(){ve(),ee=[],V=null}},j=(0,M.Z)(xe).getInstance().getLogger(O),V=(0,Hu.Z)(xe).getInstance(),ve(),O}Qh.__dashjs_factory_name="TextSourceBuffer";var $f=F.Z.getClassFactory(Qh),Nr=w(4403);function rl(k,O){(O==null||O>k.length)&&(O=k.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=k[j];return V}var il=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function zr(k){var O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke,Ie,Ge=this.context,q=(0,g.Z)(Ge).getInstance(),le=k.videoModel,ae=k.streamInfo,ue=k.settings;function te(Ct,tn,qt,mn,Cn,Zn){var Fn=0,qn=0;Ct/tn>qt/mn?Fn=(qn=tn)/mn*qt:qn=(Fn=Ct)/qt*mn;var Yn,en,Nn=0,Pn=0;return Fn/qn>Cn?(Pn=qn,Nn=qn*Cn):(Nn=Fn,Pn=Fn/Cn),Yn=(Ct-Nn)/2,en=(tn-Pn)/2,Zn?{x:Yn+.1*Nn,y:en+.1*Pn,w:.8*Nn,h:.8*Pn}:{x:Yn,y:en,w:Nn,h:Pn}}function Pe(Ct,tn){var qt=le.getClientWidth(),mn=le.getClientHeight(),Cn=le.getVideoWidth(),Zn=le.getVideoHeight(),Fn=le.getVideoRelativeOffsetTop(),qn=le.getVideoRelativeOffsetLeft();if(Cn!==0&&Zn!==0){var Yn=Cn/Zn,en=!1;Ct.isFromCEA608&&(Yn=1.1666666666666667,en=!0);var Nn=te.call(this,qt,mn,Cn,Zn,Yn,en),Pn=Nn.w,On=Nn.h,Dn=Nn.x,bt=Nn.y;if(Pn!=Ae||On!=Te||Dn!=re||bt!=de||tn){if(re=Dn+qn,de=bt+Fn,Ae=Pn,Te=On,ie){var et=ie.style;et&&(et.left=re+"px",et.top=de+"px",et.width=Ae+"px",et.height=Te+"px",et.zIndex=ze&&document[ze]||Oe?We:null,q.trigger(_.Z.CAPTION_CONTAINER_RESIZE))}var zt=Ct.activeCues;if(zt)for(var Ve=zt.length,tt=0;tt<Ve;++tt){var Lt=zt[tt];Lt.scaleCue(Lt)}}}}function xe(Ct){var tn,qt,mn,Cn,Zn,Fn=Ae,qn=Te;if(Ct.cellResolution){var Yn=[Fn/Ct.cellResolution[0],qn/Ct.cellResolution[1]];if(Ct.linePadding){for(tn in Ct.linePadding)if(Ct.linePadding.hasOwnProperty(tn)){qt=(Ct.linePadding[tn]*Yn[0]).toString();for(var en=document.getElementsByClassName("spanPadding"),Nn=0;Nn<en.length;Nn++)en[Nn].style.cssText=en[Nn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+qt),en[Nn].style.cssText=en[Nn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+qt)}}if(Ct.fontSize){for(tn in Ct.fontSize)if(Ct.fontSize.hasOwnProperty(tn)){Ct.fontSize[tn][0]==="%"?mn=Ct.fontSize[tn][1]/100:Ct.fontSize[tn][0]==="c"&&(mn=Ct.fontSize[tn][1]),qt=(mn*Yn[1]).toString(),Zn=tn!=="defaultFontSize"?document.getElementsByClassName(tn):document.getElementsByClassName("paragraph");for(var Pn=0;Pn<Zn.length;Pn++)Zn[Pn].style.cssText=Zn[Pn].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+qt)}if(Ct.lineHeight){for(tn in Ct.lineHeight)if(Ct.lineHeight.hasOwnProperty(tn)){Ct.lineHeight[tn][0]==="%"?Cn=Ct.lineHeight[tn][1]/100:Ct.fontSize[tn][0]==="c"&&(Cn=Ct.lineHeight[tn][1]),qt=(Cn*Yn[1]).toString(),Zn=document.getElementsByClassName(tn);for(var On=0;On<Zn.length;On++)Zn[On].style.cssText=Zn[On].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+qt)}}}}if(Ct.isd){var Dn=document.getElementById(Ct.cueID);Dn&&ie.removeChild(Dn),Me(Ct)}}function je(Ct,tn){var qt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,mn=/^#(.*)$/;if(qt.test(tn)){var Cn=qt.exec(tn),Zn=parseInt(Cn[4],10)-1;return"data:image/png;base64,"+btoa(Ct.images[Zn])}if(mn.test(tn)){var Fn=mn.exec(tn)[1];return"data:image/png;base64,"+Ct.embeddedImages[Fn]}return tn}function Me(Ct){if(ie){vr.call(this);var tn=document.createElement("div");ie.appendChild(tn),Ze=(0,Nr.renderHTML)(Ct.isd,tn,function(qt){return je(Ct,qt)},ie.clientHeight,ie.clientWidth,ue.get().streaming.text.imsc.displayForcedOnlyMode,function(qt){j.info("renderCaption :",qt)},Ze,ue.get().streaming.text.imsc.enableRollUp),tn.id=Ct.cueID,q.trigger(_.Z.CAPTION_RENDERED,{captionDiv:tn,currentTrackIdx:H})}}function ve(Ct,tn){return!!tn&&tn.endTime>=Ct.startTime}function De(Ct,tn){return!!ue.get().streaming.text.extendSegmentedCues&&!!function(qt,mn,Cn){for(var Zn=0;Zn<Cn.length;Zn++){var Fn=Cn[Zn];if(JSON.stringify(qt[Fn])!==JSON.stringify(mn[Fn]))return!1}return!0}(tn,Ct,il)&&(tn.endTime=Math.max(tn.endTime,Ct.endTime),!0)}function $e(Ct,tn){tn&&tn.forEach(function(qt){qt.kind&&qt.kind==="image"&&(qt.src=je(Ct,qt.src)),$e(Ct,qt.contents)})}function mt(Ct,tn,qt){var mn=St(Ct),Cn=ue.get().streaming.text.dispatchForManualRendering;if(mn&&Array.isArray(qt)&&qt.length!==0)for(var Zn=0;Zn<qt.length;Zn++){var Fn=null,qn=qt[Zn];mn.cellResolution=qn.cellResolution,mn.isFromCEA608=qn.isFromCEA608,isNaN(qn.start)||isNaN(qn.end)||(Cn?Fn=ct(qn,tn):jt(qn)&&ie?Fn=Gt(qn,tn,mn):qn.data&&(Fn=Vt(qn,tn,mn)));try{if(Fn){if(!un(mn,Fn))if(ue.get().streaming.text.webvtt.customRenderingEnabled)mn.manualCueList||(mn.manualCueList=[]),mn.manualCueList.push(Fn);else{var Yn=void 0;mn.cues&&mn.cues.length!==0&&(Yn=mn.cues[mn.cues.length-1]),ve(Fn,Yn)?De(Fn,Yn)||(Yn.isd&&(Yn.onexit=function(){}),mn.mode!==E.Z.TEXT_DISABLED&&mn.addCue(Fn)):mn.mode!==E.Z.TEXT_DISABLED&&mn.addCue(Fn)}var en=ue.get().streaming.buffer.bufferToKeep;Jt(mn,0,le.getTime()-en)}else j.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Nn){throw Bn(mn),mn.addCue(Fn),Nn}}}function ct(Ct,tn){var qt=Zt(Ct,tn);return qt.onenter=function(){jt(Ct)&&Ie&&Ie.cueID!==qt.cueID&&pt(Ie),delete qt.type,Ie=qt,yt(qt)},qt.onexit=function(){pt(qt),Ie=null},qt}function yt(Ct){q.trigger(_.Z.CUE_ENTER,Ct)}function pt(Ct){q.trigger(_.Z.CUE_EXIT,{cueID:Ct.cueID})}function Gt(Ct,tn,qt){var mn=this,Cn=Zt(Ct,tn);return ie.style.left=re+"px",ie.style.top=de+"px",ie.style.width=Ae+"px",ie.style.height=Te+"px",Cn.onenter=function(){var Zn=this;qt.mode===E.Z.TEXT_SHOWING&&(this.isd?(ke?requestAnimationFrame(function(){return Me(Zn)}):Me(this),j.debug("Cue enter id:"+this.cueID)):(ie.appendChild(this.cueHTMLElement),xe.call(mn,this),q.trigger(_.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:H})))},Cn.onexit=function(){if(ie)for(var Zn=ie.childNodes,Fn=0;Fn<Zn.length;++Fn)Zn[Fn].id===this.cueID&&(j.debug("Cue exit id:"+Zn[Fn].id),ie.removeChild(Zn[Fn]),--Fn)},Cn}function Vt(Ct,tn,qt){var mn=Zt(Ct,tn);if(mn.isActive=!1,Ct.styles)try{Ct.styles.align!==void 0&&"align"in mn&&(mn.align=Ct.styles.align),Ct.styles.line!==void 0&&"line"in mn&&(mn.line=Ct.styles.line),Ct.styles.snapToLines!==void 0&&"snapToLines"in mn&&(mn.snapToLines=Ct.styles.snapToLines),Ct.styles.position!==void 0&&"position"in mn&&(mn.position=Ct.styles.position),Ct.styles.size!==void 0&&"size"in mn&&(mn.size=Ct.styles.size)}catch(Cn){j.error(Cn)}return mn.onenter=function(){qt.mode===E.Z.TEXT_SHOWING&&q.trigger(_.Z.CAPTION_RENDERED,{currentTrackIdx:H})},mn}function jt(Ct){return Ct.type==="html"}function Zt(Ct,tn){return jt(Ct)?function(qt,mn){var Cn=new V(qt.start+mn,qt.end+mn,"");return Cn.cueHTMLElement=qt.cueHTMLElement,Cn.isd=qt.isd,Cn.images=qt.images,Cn.embeddedImages=qt.embeddedImages,Cn.cueID=qt.cueID,Cn.scaleCue=xe.bind(self),Cn.cellResolution=qt.cellResolution,Cn.lineHeight=qt.lineHeight,Cn.linePadding=qt.linePadding,Cn.fontSize=qt.fontSize,Cn.isd&&$e(Cn,Cn.isd.contents),Cn}(Ct,tn):function(qt,mn){var Cn=new V(qt.start-mn,qt.end-mn,qt.data);return Cn.cueID="".concat(Cn.startTime,"_").concat(Cn.endTime),Cn}(Ct,tn)}function xn(Ct){if(_e)for(var tn=_e.childNodes,qt=0;qt<tn.length;++qt)tn[qt].id===Ct.cueID&&(_e.removeChild(tn[qt]),--qt)}function at(){var Ct,tn=[],qt=function(Cn,Zn){var Fn;if(typeof Symbol>"u"||Cn[Symbol.iterator]==null){if(Array.isArray(Cn)||(Fn=function(On,Dn){if(On){if(typeof On=="string")return rl(On,Dn);var bt=Object.prototype.toString.call(On).slice(8,-1);return bt==="Object"&&On.constructor&&(bt=On.constructor.name),bt==="Map"||bt==="Set"?Array.from(On):bt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bt)?rl(On,Dn):void 0}}(Cn))||Zn){Fn&&(Cn=Fn);var qn=0,Yn=function(){};return{s:Yn,n:function(){return qn>=Cn.length?{done:!0}:{done:!1,value:Cn[qn++]}},e:function(On){throw On},f:Yn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var en,Nn=!0,Pn=!1;return{s:function(){Fn=Cn[Symbol.iterator]()},n:function(){var On=Fn.next();return Nn=On.done,On},e:function(On){Pn=!0,en=On},f:function(){try{Nn||Fn.return==null||Fn.return()}finally{if(Pn)throw en}}}}(le.getTextTracks());try{for(qt.s();!(Ct=qt.n()).done;){var mn=Ct.value;mn.manualMode===E.Z.TEXT_SHOWING&&tn.push(mn)}}catch(Cn){qt.e(Cn)}finally{qt.f()}return tn}function St(Ct){return Ct>=0&&W[Ct]?le.getTextTrack(W[Ct].kind,W[Ct].id,W[Ct].lang,W[Ct].isTTML,W[Ct].isEmbedded):null}function Qt(Ct){var tn=this;if(Ct!==H){var qt=St(H=Ct);Pt.call(this,qt),ye&&(clearInterval(ye),ye=null),qt&&qt.renderingType==="html"&&(Pe.call(this,qt,!0),window.ResizeObserver?(Se=new window.ResizeObserver(function(){Pe.call(tn,qt,!0)})).observe(le.getElement()):ye=setInterval(Pe.bind(this,qt),500))}}function Pt(Ct){vr.call(this),Ct&&Ct.renderingType==="html"?kn.call(this):mr.call(this)}function un(Ct,tn){if(!Ct.cues)return!1;for(var qt=0;qt<Ct.cues.length;qt++)if(Ct.cues[qt].startTime===tn.startTime&&Ct.cues[qt].endTime===tn.endTime)return!0;return!1}function an(Ct,tn,qt){var mn=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!Ct&&(isNaN(tn)||(mn?Ct.startTime:Ct.endTime)>=tn)&&(isNaN(qt)||(mn?Ct.endTime:Ct.startTime)<=qt)}function Jt(Ct,tn,qt){var mn,Cn;if(!(qt<tn)&&Ct&&(Ct.cues||Ct.manualCueList)){var Zn=Ct.cues&&Ct.cues.length>0?"native":"custom",Fn=Zn==="native"?Ct.cues:Ct.manualCueList;if(!Fn||Fn.length===0)return;for(var qn=Fn.length-1;qn>=0;qn--)!an(Fn[qn],tn,qt,!0)||(mn=Fn[qn],Cn=le.getTime(),mn.startTime>=Cn&&mn.endTime<=Cn)||(Zn==="native"?Ct.removeCue(Fn[qn]):(xn(Fn[qn]),delete Ct.manualCueList[qn]))}}function Bn(Ct,tn,qt){var mn=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(Ct&&(Ct.cues||Ct.manualCueList)){var Cn=Ct.cues&&Ct.cues.length>0?"native":"custom",Zn=Cn==="native"?Ct.cues:Ct.manualCueList;if(!Zn||Zn.length===0)return;for(var Fn=Zn.length-1,qn=Fn;qn>=0;qn--)an(Zn[qn],tn,qt,mn)&&(Cn==="native"?(Zn[qn].onexit&&Zn[qn].onexit(),Ct.removeCue(Zn[qn])):(xn(Zn[qn]),delete Ct.manualCueList[qn]))}}function kn(){var Ct=document.getElementById("native-cue-style");if(!Ct){(Ct=document.createElement("style")).id="native-cue-style",document.head.appendChild(Ct);var tn=Ct.sheet,qt=le.getElement();try{qt&&(qt.id?tn.insertRule("#"+qt.id+"::cue {background: transparent}",0):qt.classList.length!==0?tn.insertRule("."+qt.className+"::cue {background: transparent}",0):tn.insertRule("video::cue {background: transparent}",0))}catch(mn){j.info(""+mn.message)}}}function mr(){var Ct=document.getElementById("native-cue-style");Ct&&document.head.removeChild(Ct)}function vr(){if(ie)for(;ie.firstChild;)ie.removeChild(ie.firstChild)}return O={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(V=window.VTTCue||window.TextTrackCue,W=[],ee=[],H=-1,re=0,de=0,Ae=0,Te=0,ie=null,_e=null,ye=null,Oe=!1,We=2147483647,Ze=null,ke="requestAnimationFrame"in window,document.fullscreenElement!==void 0?ze="fullscreenElement":document.webkitIsFullScreen!==void 0?ze="webkitIsFullScreen":document.msFullscreenElement?ze="msFullscreenElement":document.mozFullScreen&&(ze="mozFullScreen"))},getStreamId:function(){return ae.id},addTextTrack:function(Ct){W.push(Ct)},addCaptions:mt,createTracks:function(){var Ct=ue.get().streaming.text.dispatchForManualRendering;W.sort(function(Dn,bt){return Dn.index-bt.index}),ie=le.getTTMLRenderingDiv(),_e=le.getVttRenderingDiv();for(var tn,qt,mn,Cn,Zn,Fn,qn=-1,Yn=0;Yn<W.length;Yn++){var en=(qt=(tn=W[Yn]).kind,mn=tn.id!==void 0?tn.id:tn.lang,Cn=tn.lang,Zn=tn.isTTML,Fn=tn.isEmbedded,le.addTextTrack(qt,mn,Cn,Zn,Fn));ee.push(en),W[Yn].defaultTrack&&(en.default=!0,qn=Yn);var Nn=St(Yn);Nn&&(Nn.mode=E.Z.TEXT_SHOWING,ie&&(W[Yn].isTTML||W[Yn].isEmbedded)?Nn.renderingType="html":Nn.renderingType="default"),mt(Yn,0,W[Yn].captionData),q.trigger(_.Z.TEXT_TRACK_ADDED)}if(Qt.call(this,qn),qn>=0){q.on(_.Z.PLAYBACK_METADATA_LOADED,function Dn(){var bt=St(qn);bt&&bt.renderingType==="html"&&Pe.call(this,bt,!0),q.off(_.Z.PLAYBACK_METADATA_LOADED,Dn,this)},this);for(var Pn=0;Pn<W.length;Pn++){var On=St(Pn);On&&(On.mode=Pn!==qn||Ct?E.Z.TEXT_HIDDEN:E.Z.TEXT_SHOWING,On.manualMode=Pn===qn?E.Z.TEXT_SHOWING:E.Z.TEXT_HIDDEN)}}q.trigger(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:H,tracks:W,streamId:ae.id})},getCurrentTrackIdx:function(){return H},setCurrentTrackIdx:Qt,getTrackIdxForId:function(Ct){for(var tn=-1,qt=0;qt<W.length;qt++)if(W[qt].id===Ct){tn=qt;break}return tn},getCurrentTrackInfo:function(){return W[H]},setModeForTrackIdx:function(Ct,tn){var qt=St(Ct);qt&&qt.mode!==tn&&(qt.mode=tn),qt&&qt.manualMode!==tn&&(qt.manualMode=tn)},deleteCuesFromTrackIdx:function(Ct,tn,qt){var mn=St(Ct);mn&&Bn(mn,tn,qt)},deleteAllTextTracks:function(){for(var Ct=ee?ee.length:0,tn=0;tn<Ct;tn++){var qt=St(tn);qt&&Bn.call(this,qt,ae.start,ae.start+ae.duration,!1)}ee=[],W=[],ye&&(clearInterval(ye),ye=null),Se&&le&&(Se.unobserve(le.getElement()),Se=null),H=-1,vr.call(this)},manualCueProcessing:function(Ct){var tn=at();if(tn&&tn.length>0){var qt=tn[0].manualCueList;qt&&qt.length>0&&qt.forEach(function(mn){mn.startTime<=Ct&&mn.endTime>=Ct&&!mn.isActive?(mn.isActive=!0,ue.get().streaming.text.dispatchForManualRendering?yt(mn):WebVTT.processCues(window,[mn],_e,mn.cueID)):mn.isActive&&(mn.startTime>Ct||mn.endTime<Ct)&&(mn.isActive=!1,ue.get().streaming.text.dispatchForManualRendering?pt(mn):xn(mn))})}},disableManualTracks:function(){var Ct=at();if(Ct&&Ct.length>0){var tn=Ct[0].manualCueList;tn&&tn.length>0&&tn.forEach(function(qt){if(qt.isActive){if(qt.isActive=!1,ue.get().streaming.text.dispatchForManualRendering)pt(qt);else if(_e)for(var mn=_e.childNodes,Cn=0;Cn<mn.length;++Cn)mn[Cn].id===qt.cueID&&(_e.removeChild(mn[Cn]),--Cn)}})}}},j=(0,M.Z)(Ge).getInstance().getLogger(O),O}zr.__dashjs_factory_name="TextTracks";var Xs=F.Z.getClassFactory(zr);function Jh(){var k,O,j,V,W,ee,H=this.context;function re(ie){var _e=ie.split(":"),ye=_e.length-1;return ie=60*parseInt(_e[ye-1],10)+parseFloat(_e[ye]),ye===2&&(ie+=3600*parseInt(_e[0],10)),ie}function de(ie){var _e=ie.split(V),ye=_e[1].split(ee);return ye.shift(),_e[1]=ye[0],ye.shift(),{cuePoints:_e,styles:Ae(ye)}}function Ae(ie){var _e={};return ie.forEach(function(ye){if(ye.split(/:/).length>1){var ze=ye.split(/:/)[1],Oe=!1;ze&&ze.search(/%/)!=-1&&(Oe=!0,ze=parseInt(ze.replace(/%/,""),10)),(ye.match(/align/)||ye.match(/A/))&&(_e.align=ze),(ye.match(/line/)||ye.match(/L/))&&(_e.line=ze==="auto"?ze:parseInt(ze,10),Oe&&(_e.snapToLines=!1)),(ye.match(/position/)||ye.match(/P/))&&(_e.position=ze),(ye.match(/size/)||ye.match(/S/))&&(_e.size=ze)}}),_e}function Te(ie,_e){for(var ye,ze=_e,Oe="",Ze="";ie[ze]!==""&&ze<ie.length;)ze++;if((ye=ze-_e)>1)for(var We=0;We<ye;We++){if((Ze=ie[_e+We]).match(V)){Oe="";break}Oe+=Ze,We!==ye-1&&(Oe+="\n")}else(Ze=ie[_e]).match(V)||(Oe=Ze);return Oe}return k={parse:function(ie){var _e,ye,ze=[];if(!ie)return ze;_e=(ie=ie.split(j)).length,ye=-1;for(var Oe=0;Oe<_e;Oe++){var Ze=ie[Oe];if(Ze.length>0&&Ze!=="WEBVTT"&&Ze.match(V)){var We=de(Ze),Se=We.cuePoints,ke=We.styles,Ie=Te(ie,Oe+1),Ge=re(Se[0].replace(W,"")),q=re(Se[1].replace(W,""));!isNaN(Ge)&&!isNaN(q)&&Ge>=ye&&q>Ge?Ie!==""?(ye=Ge,ze.push({start:Ge,end:q,data:Ie,styles:ke})):O.error("Skipping cue due to empty/malformed cue text"):O.error("Skipping cue due to incorrect cue timing")}}return ze},getCaptionStyles:Ae},O=(0,M.Z)(H).getInstance().getLogger(k),j=/(?:\r\n|\r|\n)/gm,V=/-->/,W=/(^[\s]+|[\s]+$)/g,ee=/\s\b/g,k}Jh.__dashjs_factory_name="VTTParser";var Bi=F.Z.getSingletonFactory(Jh);function Km(){var k,O;return k={parse:function(j){var V=[];return O.oncue=function(W){W.start=W.startTime,W.end=W.endTime,W.data=W.text,W.styles={align:W.align,line:W.line,position:W.position,size:W.size},V.push(W)},O.parse(j),V}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(O=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(j){}}(),k}Km.__dashjs_factory_name="VttCustomRenderingParser";var zm=F.Z.getSingletonFactory(Km);function Ym(){var k,O,j=this.context,V=(0,g.Z)(j).getInstance(),W=0;return k={parse:function(ee,H,re,de,Ae){var Te,ie,_e,ye="",ze=[],Oe={},Ze={},We="",Se="",ke={onOpenTag:function(ae,ue,te){if(te[" imagetype"]&&!te[" imageType"]&&(V.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Hs.LEVELS.ERROR,event:Hs.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),te[" imageType"]=te[" imagetype"]),ue==="image"&&(ae==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||ae==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!te[" imageType"]||te[" imageType"].value!=="PNG")return void O.warn("smpte-tt imageType != PNG. Discarded");We=te["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){We&&(Ze[We]=Se.trim()),Se="",We=""},onText:function(ae){We&&(Se+=ae)}};if(!ee)throw ye="no ttml data to parse",new Error(ye);Oe.data=ee,V.trigger(T.Z.TTML_TO_PARSE,Oe);var Ie=(0,Nr.fromXML)(Oe.data,function(ae){ye=ae},ke);V.trigger(T.Z.TTML_PARSED,{ttmlString:Oe.data,ttmlDoc:Ie});var Ge,q=Ie.getMediaTimeEvents();for(_e=0;_e<q.length;_e++){var le=(0,Nr.generateISD)(Ie,q[_e],function(ae){ye=ae});le.contents.some(function(ae){return ae.contents.length})&&(Te=q[_e]+H)<(ie=q[_e+1]+H)&&ze.push({start:Te,end:ie,type:"html",cueID:(Ge="cue_TTML_"+W,W++,Ge),isd:le,images:Ae,embeddedImages:Ze})}if(ye!=="")throw O.error(ye),new Error(ye);return ze}},O=(0,M.Z)(j).getInstance().getLogger(k),k}Ym.__dashjs_factory_name="TTMLParser";var Wm=F.Z.getSingletonFactory(Ym);function ep(k,O){var j=Object.keys(k);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(k);O&&(V=V.filter(function(W){return Object.getOwnPropertyDescriptor(k,W).enumerable})),j.push.apply(j,V)}return j}function Mc(k){for(var O=1;O<arguments.length;O++){var j=arguments[O]!=null?arguments[O]:{};O%2?ep(Object(j),!0).forEach(function(V){Wa(k,V,j[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(j)):ep(Object(j)).forEach(function(V){Object.defineProperty(k,V,Object.getOwnPropertyDescriptor(j,V))})}return k}function Wa(k,O,j){return O in k?Object.defineProperty(k,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):k[O]=j,k}function tp(k,O){(O==null||O>k.length)&&(O=k.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=k[j];return V}function Dc(k){var O,j,V,W=this.context,ee=(0,g.Z)(W).getInstance(),H=(0,wt.Z)(W).getInstance(),re=k.adapter,de=k.baseURLController;function Ae(_e,ye){var ze,Oe,Ze=!1;if(de.resolve()){var We=re.getVoRepresentations(_e);We&&We.length>0&&(ze=de.resolve(We[0].path).url)}var Se=_e.essentialPropertiesAsArray.filter(function(Ie){return Ie.schemeIdUri&&Ie.schemeIdUri===E.Z.FONT_DOWNLOAD_DVB_SCHEME}),ke=_e.supplementalPropertiesAsArray.filter(function(Ie){return Ie.schemeIdUri&&Ie.schemeIdUri===E.Z.FONT_DOWNLOAD_DVB_SCHEME});Se.length>0?(Ze=!0,Oe=Se):Oe=ke,Oe.forEach(function(Ie){if(function(ae){return!(!(ae.value&&ae.value==="1"&&ae.dvbUrl&&ae.dvbUrl.length>0&&ae.dvbFontFamily&&ae.dvbFontFamily.length>0&&ae.dvbMimeType)||ae.dvbMimeType!==E.Z.OFF_MIMETYPE&&ae.dvbMimeType!==E.Z.WOFF_MIMETYPE)}(Ie)){var Ge=(q=Ie.dvbUrl,le=ze,H.isPathAbsolute(q)?q:H.isRelative(q)?le?H.resolve(q,le):H.resolve(q):q);V.push({fontFamily:Ie.dvbFontFamily,url:Ge,mimeType:Ie.dvbMimeType,trackId:_e.id,streamId:ye,isEssential:Ze,status:"unloaded",fontFace:new FontFace(Ie.dvbFontFamily,"url(".concat(Ge,")"),{display:"swap"})})}var q,le})}function Te(_e,ye){var ze=V[_e];V[_e]=Mc(Mc({},ze),{},{status:ye})}function ie(){V=[]}return O={addFontsFromTracks:function(_e,ye){if(_e&&Array.isArray(_e)&&ye)for(var ze=0;ze<_e.length;ze++)Ae(_e[ze],ye)},downloadFonts:function(){for(var _e=function(ze){var Oe=V[ze];document.fonts.add(Oe.fontFace),ee.trigger(_.Z.DVB_FONT_DOWNLOAD_ADDED,Oe),Oe.fontFace.load().then(function(){Te(ze,"loaded"),ee.trigger(_.Z.DVB_FONT_DOWNLOAD_COMPLETE,Oe)},function(Ze){Te(ze,"error"),j.debug("Font download error: ",Ze),ee.trigger(_.Z.DVB_FONT_DOWNLOAD_FAILED,Oe)})},ye=0;ye<V.length;ye++)_e(ye)},getFonts:function(){return V},getFontsForTrackId:function(_e){return V.filter(function(ye){return ye.trackId&&ye.trackId===_e})},reset:function(){(function(){var _e,ye=function(Ze,We){var Se;if(typeof Symbol>"u"||Ze[Symbol.iterator]==null){if(Array.isArray(Ze)||(Se=function(ae,ue){if(ae){if(typeof ae=="string")return tp(ae,ue);var te=Object.prototype.toString.call(ae).slice(8,-1);return te==="Object"&&ae.constructor&&(te=ae.constructor.name),te==="Map"||te==="Set"?Array.from(ae):te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te)?tp(ae,ue):void 0}}(Ze))||We){Se&&(Ze=Se);var ke=0,Ie=function(){};return{s:Ie,n:function(){return ke>=Ze.length?{done:!0}:{done:!1,value:Ze[ke++]}},e:function(ae){throw ae},f:Ie}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ge,q=!0,le=!1;return{s:function(){Se=Ze[Symbol.iterator]()},n:function(){var ae=Se.next();return q=ae.done,ae},e:function(ae){le=!0,Ge=ae},f:function(){try{q||Se.return==null||Se.return()}finally{if(le)throw Ge}}}}(V);try{for(ye.s();!(_e=ye.n()).done;){var ze=_e.value,Oe=document.fonts.delete(ze.fontFace);j.debug("Removal of fontFamily: ".concat(ze.fontFamily," was ").concat(Oe?"successful":"unsuccessful"))}}catch(Ze){ye.e(Ze)}finally{ye.f()}})(),ie()}},j=(0,M.Z)(W).getInstance().getLogger(O),ie(),O}Dc.__dashjs_factory_name="DVBFonts";var jl=F.Z.getClassFactory(Dc);function Zr(k){var O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze,Oe=this.context,Ze=k.adapter,We=k.errHandler,Se=k.manifestModel,ke=k.mediaController,Ie=k.baseURLController,Ge=k.videoModel,q=k.settings;function le(De){if(ze.error("Could not download ".concat(De.isEssential?"an essential":"a"," font - fontFamily: ").concat(De.fontFamily,", url: ").concat(De.url)),De.isEssential){var $e=W[De.streamId].getTrackIdxForId(De.trackId);W[De.streamId].setModeForTrackIdx($e,E.Z.TEXT_DISABLED)}}function ae(De){if(ze.debug("Successfully downloaded ".concat(De.isEssential?"an essential":"a"," font - fontFamily: ").concat(De.fontFamily,", url: ").concat(De.url)),De.isEssential){var $e=W[De.streamId].getTrackIdxForId(De.trackId);$e===W[De.streamId].getCurrentTrackIdx()?W[De.streamId].setModeForTrackIdx($e,E.Z.TEXT_SHOWING):W[De.streamId].setModeForTrackIdx($e,E.Z.TEXT_HIDDEN)}}function ue(De){var $e=De.tracks,mt=De.index,ct=De.streamId;if(q.get().streaming.text.defaultEnabled===!1&&!xe()||_e)je(ct,-1);else{var yt=ke.getCurrentTrackFor(E.Z.TEXT,ct);if(yt){var pt={lang:yt.lang,role:yt.roles[0],index:yt.index,codec:yt.codec,accessibility:yt.accessibility[0]};$e.some(function(Gt,Vt){if(ke.matchSettings(pt,Gt))return je(ct,Vt),mt=Vt,!0})}Ae=!1}j[ct].lastEnabledIndex=mt,de.trigger(_.Z.TEXT_TRACKS_ADDED,{enabled:xe(),index:mt,tracks:$e,streamId:ct}),ie=!0,ye.addFontsFromTracks($e,ct),ye.getFonts().forEach(function(Gt){if(Gt.isEssential){var Vt=W[Gt.streamId].getTrackIdxForId(Gt.trackId);W[Gt.streamId].setModeForTrackIdx(Vt,E.Z.TEXT_DISABLED)}}),ye.downloadFonts()}function te(De){try{var $e=De.streamId;if(!W[$e]||isNaN(De.time))return;W[$e].manualCueProcessing(De.time)}catch(mt){}}function Pe(De){try{var $e=De.streamId;if(!W[$e])return;W[$e].disableManualTracks()}catch(mt){}}function xe(){var De=!0;return Ae&&!Te&&(De=!1),De}function je(De,$e){(Ae=$e===-1)&&ke&&ke.saveTextSettingsDisabled();var mt=Me(De);if(mt!==$e&&W[De]){W[De].disableManualTracks();var ct=W[De].getCurrentTrackInfo(),yt=ct?Ge.getTextTrack(ct.kind,ct.id,ct.lang,ct.isTTML,ct.isEmbedded):null;yt&&yt.mode!==E.Z.TEXT_DISABLED&&W[De].setModeForTrackIdx(mt,E.Z.TEXT_HIDDEN),W[De].setCurrentTrackIdx($e),ct=W[De].getCurrentTrackInfo();var pt=q.get().streaming.text.dispatchForManualRendering;ct&&!pt&&ct.mode!==E.Z.TEXT_DISABLED&&W[De].setModeForTrackIdx($e,E.Z.TEXT_SHOWING),ct&&ct.isFragmented&&!ct.isEmbedded?function(Gt,Vt,jt){if(V[Gt])for(var Zt=V[Gt].getConfig().fragmentedTracks,xn=0;xn<Zt.length;xn++){var at=Zt[xn];if(Vt.lang===at.lang&&(at.id?Vt.id===at.id:Vt.index===at.index)){var St=ke.getCurrentTrackFor(E.Z.TEXT,Gt);(at.id?St.id!==at.id:St.index!==at.index)?(W[Gt].deleteCuesFromTrackIdx(jt),V[Gt].setCurrentFragmentedTrackIdx(xn)):jt===-1&&de.trigger(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Gt,mediaType:E.Z.TEXT})}}}(De,ct,mt):ct&&!ct.isFragmented&&function(Gt,Vt){de.trigger(T.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Vt},{streamId:Gt,mediaType:E.Z.TEXT})}(De,ct),ke.setTrack(ct)}}function Me(De){return W[De].getCurrentTrackIdx()}function ve(){V={},W={},j={},Ae=!0,ie=!1,_e=!1}return O={deactivateStream:function(De){if(De){var $e=De.id;V[$e]&&V[$e].resetMediaInfos(),W[$e]&&W[$e].deleteAllTextTracks()}},initialize:function(){ye=jl(Oe).create({adapter:Ze,baseURLController:Ie}),de.on(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,ue,O),de.on(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,O),de.on(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,O),q.get().streaming.text.webvtt.customRenderingEnabled&&(de.on(T.Z.PLAYBACK_TIME_UPDATED,te,O),de.on(T.Z.PLAYBACK_SEEKING,Pe,O))},initializeForStream:function(De){var $e=De.id,mt=Xs(Oe).create({videoModel:Ge,settings:q,streamInfo:De});mt.initialize(),W[$e]=mt;var ct=$f(Oe).create({errHandler:We,adapter:Ze,dvbFonts:ye,manifestModel:Se,mediaController:ke,videoModel:Ge,textTracks:mt,vttParser:ee,vttCustomRenderingParser:H,ttmlParser:re,streamInfo:De,settings:q});ct.initialize(),V[$e]=ct,j[$e]={},j[$e].lastEnabledIndex=-1},createTracks:function(De){var $e=De.id;W[$e]&&W[$e].createTracks()},getTextSourceBuffer:function(De){var $e=De.id;if(V&&V[$e])return V[$e]},getAllTracksAreDisabled:function(){return Ae},addEmbeddedTrack:function(De,$e){var mt=De.id;V[mt]&&V[mt].addEmbeddedTrack($e)},enableText:function(De,$e){return(0,ge.PS)($e,"boolean"),xe()!==$e&&($e&&je(De,j[De].lastEnabledIndex),$e||(j[De].lastEnabledIndex=Me(De),ie?je(De,-1):_e=!0)),!0},isTextEnabled:xe,setTextTrack:je,getCurrentTrackIdx:Me,enableForcedTextStreaming:function(De){return(0,ge.PS)(De,"boolean"),Te=De,!0},addMediaInfosToBuffer:function(De,$e,mt){var ct=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,yt=De.id;V[yt]&&V[yt].addMediaInfos($e,mt,ct)},reset:function(){ye.reset(),ve(),de.off(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,ue,O),de.off(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,O),de.off(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,O),q.get().streaming.text.webvtt.customRenderingEnabled&&(de.off(T.Z.PLAYBACK_TIME_UPDATED,te,O),de.off(T.Z.PLAYBACK_SEEKING,Pe,O)),Object.keys(V).forEach(function(De){V[De].resetEmbedded(),V[De].reset()})}},Te=!1,ie=!1,_e=!1,ee=Bi(Oe).getInstance(),H=zm(Oe).getInstance(),re=Wm(Oe).getInstance(),de=(0,g.Z)(Oe).getInstance(),ze=(0,M.Z)(Oe).getInstance().getLogger(O),ve(),O}Zr.__dashjs_factory_name="TextController";var np=F.Z.getClassFactory(Zr);function rp(){var k,O,j,V,W,ee,H,re,de,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke,Ie,Ge,q,le,ae,ue,te,Pe,xe,je,Me,ve,De,$e,mt,ct,yt,pt,Gt,Vt="You must first call initialize() and set a source before calling this method",jt="You must first call initialize() and set a valid source and view before calling this method",Zt="You must first call attachView() to set the video element before calling this method",xn="You must first call attachSource() with a valid source before calling this method",at="MediaPlayer not initialized!",St=this.context,Qt=(0,g.Z)(St).getInstance(),Pt=(0,qe.Z)(St).getInstance(),un=(0,M.Z)(St).getInstance({settings:Pt});function an(){Yn(null),Fn(null),V=null,ye&&(ye.reset(),ye=null),ze&&(ze.reset(),ze=null),ke&&ke.reset(),Pt.reset(),Ze&&(Ze.reset(),Ze=null)}function Jt(){return!!j&&!!ct.getElement()}function Bn(){return(0,Zf.e)()}function kn(){if(!H)throw jt;return Pe.isPaused()}function mr(){if(!H)throw jt;return Pe.getIsDynamic()}function vr(Ve){var tt=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Lt=ve.getCurrentDVRInfo(tt);if(!Lt)return 0;var yn=Pe.getOriginalLiveDelay(),bn=Lt.range.start+Ve;return bn>Lt.range.end-yn&&(bn=Lt.range.end-yn),bn}function Ct(Ve){if(!H)throw jt;var tt=Zn().currentTime;if(Ve!==void 0)tt=ae.getTimeRelativeToStreamId(tt,Ve);else if(Pe.getIsDynamic()){var Lt=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,yn=ve.getCurrentDVRInfo(Lt);tt=yn===null||tt===0?0:Math.max(0,tt-yn.range.start)}return tt}function tn(){if(!H)throw jt;var Ve=Zn().duration;if(Pe.getIsDynamic()){var tt=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Lt=ve.getCurrentDVRInfo(tt);Ve=Lt?Lt.range.end-Lt.range.start:0}return Ve}function qt(Ve){(0,ge.PS)(Ve,"boolean"),re=Ve}function mn(){ke.restoreDefaultUTCTimingSources()}function Cn(){return ve}function Zn(){if(!ct.getElement())throw Zt;return ct.getElement()}function Fn(Ve){if(!W)throw at;ct.setElement(Ve),Ve&&(Dn(),function(){if(!ze){var tt=dashjs.MetricsReporting;if(typeof tt=="function"){var Lt=tt(St).create();ze=Lt.createMetricsReporting({debug:un,eventBus:Qt,mediaElement:Zn(),adapter:We,dashMetrics:ve,mediaPlayerModel:Se,events:T.Z,constants:E.Z,metricsConstants:P.Z})}}}(),function(){if(!Oe){var tt=dashjs.MssHandler;typeof tt=="function"&&(we.extend(tt.errors),Oe=tt(St).create({eventBus:Qt,mediaPlayerModel:Se,dashMetrics:ve,manifestModel:De,playbackController:Pe,streamController:ae,protectionController:ye,baseURLController:Ge,errHandler:Ie,events:T.Z,constants:E.Z,debug:un,initSegmentType:st.w.INIT_SEGMENT_TYPE,BASE64:ua,ISOBoxer:Lr,settings:Pt}))}}(),ae&&ae.switchToVideoElement(de)),H&&Nn(),zt(de)}function qn(Ve){if(!ee)throw Vt;var tt=ae.getActiveStreamInfo();return tt?_e.getTracksFor(Ve,tt.id):[]}function Yn(Ve){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!W)throw at;typeof Ve=="string"&&yt.initialize(Ve),tt==null&&(tt=NaN),isNaN(tt)||(tt=Math.max(0,tt)),de=tt,j=Ve,(ee||H)&&Nn(),Jt()&&zt(de)}function en(){if(!ee)throw Vt;var Ve=ae.getActiveStreamInfo();return Ve?ae.getStreamById(Ve.id):null}function Nn(){H=!1,ee=!1,We.reset(),ae.reset(),te.reset(),Me.reset(),Pe.reset(),xe.reset(),je.reset(),Ae.reset(),_e.reset(),Gt.reset(),ye&&(Pt.get().streaming.protection.keepProtectionMediaKeys?ye.stop():(ye.reset(),ye=null,Dn())),ue.reset(),$e.reset(),mt.reset()}function Pn(){var Ve=On();ae||(ae=Ch(St).getInstance()),ue||(ue=np(St).create({errHandler:Ie,manifestModel:De,adapter:We,mediaController:_e,baseURLController:Ge,videoModel:ct,settings:Pt})),le.setConfig({capabilities:q,customParametersModel:ke,adapter:We,settings:Pt,manifestModel:De,errHandler:Ie}),ae.setConfig({capabilities:q,capabilitiesFilter:le,manifestLoader:Ve,manifestModel:De,mediaPlayerModel:Se,customParametersModel:ke,protectionController:ye,textController:ue,adapter:We,dashMetrics:ve,errHandler:Ie,timelineConverter:ie,videoModel:ct,playbackController:Pe,serviceDescriptionController:xe,contentSteeringController:je,abrController:Ae,mediaController:_e,settings:Pt,baseURLController:Ge,uriFragmentModel:yt,segmentBaseController:Gt}),te.setConfig({settings:Pt,playbackController:Pe,streamController:ae,videoModel:ct,timelineConverter:ie,adapter:We}),Pe.setConfig({streamController:ae,serviceDescriptionController:xe,dashMetrics:ve,adapter:We,videoModel:ct,timelineConverter:ie,settings:Pt}),Me.setConfig({streamController:ae,playbackController:Pe,mediaPlayerModel:Se,videoModel:ct,settings:Pt}),Ae.setConfig({streamController:ae,domStorage:pt,mediaPlayerModel:Se,customParametersModel:ke,cmsdModel:mt,dashMetrics:ve,adapter:We,videoModel:ct,settings:Pt}),$e.setConfig({abrController:Ae,dashMetrics:ve,playbackController:Pe}),mt.setConfig({}),Ae.initialize(),ae.initialize(re,V),ue.initialize(),te.initialize(),Me.initialize(),$e.initialize(),mt.initialize(),je.initialize(),Gt.initialize()}function On(){return OE(St).create({debug:un,errHandler:Ie,dashMetrics:ve,mediaPlayerModel:Se,requestModifier:(0,Ke.Z)(St).getInstance(),mssHandler:Oe,settings:Pt})}function Dn(){if(ye)return ye;var Ve=dashjs.Protection;if(typeof Ve=="function"){var tt=Ve(St).create();return T.Z.extend(Ve.events),_.Z.extend(Ve.events,{publicOnly:!0}),we.extend(Ve.errors),q||(q=(0,wm.Z)(St).getInstance()),ye=tt.createProtectionSystem({debug:un,errHandler:Ie,videoModel:ct,customParametersModel:ke,capabilities:q,eventBus:Qt,events:T.Z,BASE64:ua,constants:E.Z,cmcdModel:$e,settings:Pt})}return null}function bt(){if(!W)throw at;if(Ze)return Ze;var Ve=dashjs.OfflineController;if(typeof Ve=="function"){T.Z.extend(Ve.events),_.Z.extend(Ve.events,{publicOnly:!0}),we.extend(Ve.errors);var tt=On(),Lt=Ka(St).create();return Lt.setConfig({manifestModel:De,adapter:We,manifestLoader:tt,errHandler:Ie,contentSteeringController:je}),Ze=Ve(St).create({debug:un,manifestUpdater:Lt,baseURLController:Ge,manifestLoader:tt,manifestModel:De,mediaPlayerModel:Se,abrController:Ae,playbackController:Pe,adapter:We,errHandler:Ie,dashMetrics:ve,timelineConverter:ie,segmentBaseController:Gt,schemeLoaderFactory:Te,eventBus:Qt,events:T.Z,errors:we,constants:E.Z,settings:Pt,dashConstants:y.Z,urlUtils:(0,wt.Z)(St).getInstance()})}return null}function et(Ve){var tt=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Lt=ve.getCurrentDVRInfo(tt);return Lt?Ve+(Lt.manifestInfo.availableFrom.getTime()/1e3+Lt.range.start):0}function zt(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Ze&&Ze.resetRecords(),!ee&&j&&(ee=!0,O.info("Streaming Initialized"),Pn(),typeof j=="string"?ae.load(j,Ve):ae.loadWithManifest(j,Ve)),!H&&Jt()&&(H=!0,O.info("Playback Initialized"))}return k={initialize:function(Ve,tt,Lt){var yn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;q||(q=(0,wm.Z)(St).getInstance()).setConfig({settings:Pt}),Ie||(Ie=Sm(St).getInstance()),q.supportsMediaSource()?(W||(W=!0,ie=qm(St).getInstance(),Ae||(Ae=UE(St).getInstance()).setConfig({settings:Pt}),Te||(Te=ci(St).getInstance()),Pe||(Pe=b(St).getInstance()),_e||(_e=Af(St).getInstance()),ae||(ae=Ch(St).getInstance()),te||(te=fm(St).getInstance()),Me||(Me=xh(St).getInstance()),xe||(xe=Tf(St).getInstance()),je||(je=Vi(St).getInstance()),le||(le=LE(St).getInstance()),We=Wf(St).getInstance(),De=Ic(St).getInstance(),$e=ur(St).getInstance(),mt=sn(St).getInstance(),ve=Nc(St).getInstance({settings:Pt}),pt=kl(St).getInstance({settings:Pt}),We.setConfig({constants:E.Z,cea608parser:x(),errHandler:Ie,BASE64:ua}),Ge||(Ge=Ph(St).create()),Ge.setConfig({adapter:We,contentSteeringController:je}),xe.setConfig({adapter:We}),Gt||(Gt=Pm(St).getInstance({dashMetrics:ve,mediaPlayerModel:Se,errHandler:Ie,baseURLController:Ge,events:T.Z,eventBus:Qt,debug:un,boxParser:(0,Hu.Z)(St).getInstance(),requestModifier:(0,Ke.Z)(St).getInstance(),errors:we})),_e.setConfig({domStorage:pt,settings:Pt,customParametersModel:ke}),Se.setConfig({playbackController:Pe,serviceDescriptionController:xe}),je.setConfig({adapter:We,errHandler:Ie,dashMetrics:ve,mediaPlayerModel:Se,manifestModel:De,serviceDescriptionController:xe,eventBus:Qt,requestModifier:(0,Ke.Z)(St).getInstance()}),mn(),qt(Lt===void 0||Lt),bt()),Ve&&Fn(Ve),tt&&Yn(tt,yn),O.info("[dash.js "+Bn()+"] MediaPlayer has been initialized")):Ie.error(new ce.Z(we.CAPABILITY_MEDIASOURCE_ERROR_CODE,we.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(Ve){Ve&&(Ve.capabilities&&(q=Ve.capabilities),Ve.capabilitiesFilter&&(le=Ve.capabilitiesFilter),Ve.streamController&&(ae=Ve.streamController),Ve.textController&&(ue=Ve.textController),Ve.gapController&&(te=Ve.gapController),Ve.playbackController&&(Pe=Ve.playbackController),Ve.serviceDescriptionController&&(xe=Ve.serviceDescriptionController),Ve.contentSteeringController&&(je=Ve.contentSteeringController),Ve.catchupController&&(Me=Ve.catchupController),Ve.mediaPlayerModel&&(Se=Ve.mediaPlayerModel),Ve.customParametersModel&&(ke=Ve.customParametersModel),Ve.abrController&&(Ae=Ve.abrController),Ve.schemeLoaderFactory&&(Te=Ve.schemeLoaderFactory),Ve.mediaController&&(_e=Ve.mediaController),Ve.settings&&(Pt=Ve.settings))},on:function(Ve,tt,Lt,yn){Qt.on(Ve,tt,Lt,yn)},off:function(Ve,tt,Lt){Qt.off(Ve,tt,Lt)},extend:function(Ve,tt,Lt){F.Z.extend(Ve,tt,Lt,St)},attachView:Fn,attachSource:Yn,refreshManifest:function(Ve){if(!W)throw at;if(!Jt())return Ve(null,xn);var tt=this;typeof Ve=="function"&&Qt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Lt(yn){Qt.off(T.Z.INTERNAL_MANIFEST_LOADED,Lt,tt),yn.error?Ve(null,yn.error):Ve(yn.manifest)},tt),ae.refreshManifest()},isReady:Jt,preload:function(){if(!ct.getElement()&&!ee){if(!j)throw xn;zt(de)}},play:function(){if(!H)throw jt;(!re||kn()&&H)&&Pe.play(!0)},isPaused:kn,pause:function(){if(!H)throw jt;Pe.pause()},isSeeking:function(){if(!H)throw jt;return Pe.isSeeking()},isDynamic:mr,getLowLatencyModeEnabled:function(){if(!H)throw jt;return Pe.getLowLatencyModeEnabled()},seek:function(Ve){if(!H)throw jt;if((0,ge.PS)(Ve,"number"),isNaN(Ve))throw E.Z.BAD_ARGUMENT_ERROR;Ve<0&&(Ve=0);var tt=Pe.getIsDynamic()?vr(Ve):Ve,Lt=Zn();!Pe.getIsDynamic()&&Lt.duration&&(tt=Math.min(Lt.duration,tt)),Pe.seek(tt,!1,!1,!0)},seekToOriginalLive:function(){H&&mr()&&Pe.seekToOriginalLive()},setPlaybackRate:function(Ve){Zn().playbackRate=Ve},getPlaybackRate:function(){return Zn().playbackRate},setMute:function(Ve){(0,ge.PS)(Ve,"boolean"),Zn().muted=Ve},isMuted:function(){return Zn().muted},setVolume:function(Ve){if(typeof Ve!="number"||isNaN(Ve)||Ve<0||Ve>1)throw E.Z.BAD_ARGUMENT_ERROR;Zn().volume=Ve},getVolume:function(){return Zn().volume},time:Ct,duration:tn,timeAsUTC:function(){if(!H)throw jt;return Ct()<0?NaN:et(Ct())},durationAsUTC:function(){if(!H)throw jt;return et(tn())},getActiveStream:en,getDVRWindowSize:function(){var Ve=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,tt=ve.getCurrentDVRInfo(Ve);return tt?tt.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:vr,getAvailableBaseUrls:function(){var Ve=De.getValue();return Ve?Ge.getBaseUrls(Ve):[]},getAvailableLocations:function(){var Ve=De.getValue();if(!Ve)return[];var tt=We.getLocation(Ve),Lt=je.getSynthesizedLocationElements(tt);return tt.concat(Lt)},getTargetLiveDelay:function(){if(!H)throw jt;return Pe.getOriginalLiveDelay()},convertToTimeCode:function(Ve){Ve=Math.max(Ve,0);var tt=Math.floor(Ve/3600),Lt=Math.floor(Ve%3600/60),yn=Math.floor(Ve%3600%60);return(tt===0?"":tt<10?"0"+tt.toString()+":":tt.toString()+":")+(Lt<10?"0"+Lt.toString():Lt.toString())+":"+(yn<10?"0"+yn.toString():yn.toString())},formatUTC:function(Ve,tt,Lt){var yn=arguments.length>3&&arguments[3]!==void 0&&arguments[3],bn=new Date(1e3*Ve),yr=bn.toLocaleDateString(tt),oi=bn.toLocaleTimeString(tt,{hour12:Lt});return yn?oi+" "+yr:oi},getVersion:Bn,getDebug:function(){return un},getBufferLength:function(Ve){var tt=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT];if(Ve)return tt.indexOf(Ve)!==-1?Cn().getCurrentBufferLevel(Ve)||NaN:(O.warn("getBufferLength requested for invalid type"),NaN);var Lt=tt.map(function(yn){return qn(yn).length>0?Cn().getCurrentBufferLevel(yn):Number.MAX_VALUE}).reduce(function(yn,bn){return Math.min(yn,bn)});return Lt===Number.MAX_VALUE?NaN:Lt},getTTMLRenderingDiv:function(){return ct?ct.getTTMLRenderingDiv():null},getVideoElement:Zn,getSource:function(){if(!j)throw xn;return j},updateSource:function(Ve){j=Ve,ae.load(j)},getCurrentLiveLatency:function(){if(!W)throw at;return H?Pe.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(Ve){if(!ee)throw Vt;return Ae.getTopBitrateInfoFor(Ve)},setAutoPlay:qt,getAutoPlay:function(){return re},getDashMetrics:Cn,getQualityFor:function(Ve){if(!ee)throw Vt;if(Ve===E.Z.IMAGE){var tt=en();if(!tt)return-1;var Lt=tt.getThumbnailController();return Lt?Lt.getCurrentTrackIndex():-1}return Ae.getQualityFor(Ve)},setQualityFor:function(Ve,tt){var Lt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!ee)throw Vt;if(Ve===E.Z.IMAGE){var yn=en();if(!yn)return;var bn=yn.getThumbnailController();bn&&bn.setTrackByIndex(tt)}Ae.setPlaybackQuality(Ve,ae.getActiveStreamInfo(),tt,{forceReplace:Lt})},updatePortalSize:function(){Ae.setElementSize(),Ae.setWindowResizeEventCalled(!0)},enableText:function(Ve){var tt=ae.getActiveStreamInfo();return!(!tt||!ue)&&ue.enableText(tt.id,Ve)},enableForcedTextStreaming:function(Ve){return!(!ae.getActiveStreamInfo()||!ue)&&ue.enableForcedTextStreaming(Ve)},isTextEnabled:function(){var Ve=ae.getActiveStreamInfo();return!(!Ve||!ue)&&ue.isTextEnabled(Ve)},setTextTrack:function(Ve){if(!H)throw jt;var tt=ae.getActiveStreamInfo();tt&&ue&&ue.setTextTrack(tt.id,Ve)},getBitrateInfoListFor:function(Ve){if(!ee)throw Vt;var tt=en();return tt?tt.getBitrateListFor(Ve):[]},getStreamsFromManifest:function(Ve){if(!ee)throw Vt;return We.getStreamsInfo(Ve)},getTracksFor:qn,getTracksForTypeFromManifest:function(Ve,tt,Lt){if(!ee)throw Vt;return(Lt=Lt||We.getStreamsInfo(tt,1)[0])?We.getAllMediaInfoForType(Lt,Ve,tt):[]},getCurrentTrackFor:function(Ve){if(!ee)throw Vt;var tt=ae.getActiveStreamInfo();return _e.getCurrentTrackFor(Ve,tt.id)},setInitialMediaSettingsFor:function(Ve,tt){if(!W)throw at;_e.setInitialSettings(Ve,tt)},getInitialMediaSettingsFor:function(Ve){if(!W)throw at;return _e.getInitialSettings(Ve)},setCurrentTrack:function(Ve){var tt=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!ee)throw Vt;_e.setTrack(Ve,tt)},addABRCustomRule:function(Ve,tt,Lt){ke.addAbrCustomRule(Ve,tt,Lt)},removeABRCustomRule:function(Ve){ke.removeAbrCustomRule(Ve)},removeAllABRCustomRule:function(){ke.removeAllAbrCustomRule()},getABRCustomRules:function(){return ke.getAbrCustomRules()},getAverageThroughput:function(Ve){var tt=Ae.getThroughputHistory(),Lt=Pe.getIsDynamic();return tt?tt.getAverageThroughput(Ve,Lt):0},retrieveManifest:function(Ve,tt){var Lt=On(),yn=this;Qt.on(T.Z.INTERNAL_MANIFEST_LOADED,function bn(yr){yr.error?tt(null,yr.error):tt(yr.manifest),Qt.off(T.Z.INTERNAL_MANIFEST_LOADED,bn,yn),Lt.reset()},yn),yt.initialize(Ve),Lt.load(Ve)},addUTCTimingSource:function(Ve,tt){ke.addUTCTimingSource(Ve,tt)},removeUTCTimingSource:function(Ve,tt){ke.removeUTCTimingSource(Ve,tt)},clearDefaultUTCTimingSources:function(){ke.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:mn,setXHRWithCredentialsForType:function(Ve,tt){ke.setXHRWithCredentialsForType(Ve,tt)},getXHRWithCredentialsForType:function(Ve){return ke.getXHRWithCredentialsForType(Ve)},getProtectionController:function(){return Dn()},attachProtectionController:function(Ve){ye=Ve},setProtectionData:function(Ve){V=Ve,ae&&ae.setProtectionData(V)},registerLicenseRequestFilter:function(Ve){ke.registerLicenseRequestFilter(Ve)},registerLicenseResponseFilter:function(Ve){ke.registerLicenseResponseFilter(Ve)},unregisterLicenseRequestFilter:function(Ve){ke.unregisterLicenseRequestFilter(Ve)},unregisterLicenseResponseFilter:function(Ve){ke.unregisterLicenseResponseFilter(Ve)},registerCustomCapabilitiesFilter:function(Ve){ke.registerCustomCapabilitiesFilter(Ve)},unregisterCustomCapabilitiesFilter:function(Ve){ke.unregisterCustomCapabilitiesFilter(Ve)},setCustomInitialTrackSelectionFunction:function(Ve){ke.setCustomInitialTrackSelectionFunction(Ve)},resetCustomInitialTrackSelectionFunction:function(){ke.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(Ve){if(!ct.getElement())throw Zt;ct.setTTMLRenderingDiv(Ve)},attachVttRenderingDiv:function(Ve){if(!ct.getElement())throw Zt;ct.setVttRenderingDiv(Ve)},getCurrentTextTrackIndex:function(){var Ve=ae.getActiveStreamInfo();if(Ve&&ue)return ue.getCurrentTrackIdx(Ve.id)},provideThumbnail:function(Ve,tt){if(typeof tt=="function")if(Ve<0)tt(null);else{var Lt=Pe.getIsDynamic()?vr(Ve):Ve,yn=ae.getStreamForTime(Lt);if(yn!==null){var bn=yn.getThumbnailController();if(bn)return bn.provide(Lt,tt);tt(null)}else tt(null)}},getDashAdapter:function(){return We},getOfflineController:function(){return bt()},triggerSteeringRequest:function(){if(je)return je.loadSteeringData()},getCurrentSteeringResponseData:function(){if(je)return je.getCurrentSteeringResponseData()},getSettings:function(){return Pt.get()},updateSettings:function(Ve){Pt.update(Ve)},resetSettings:function(){Pt.reset()},reset:an,destroy:function(){an(),F.Z.deleteSingletonInstances(St)}},O=un.getLogger(k),W=!1,H=!1,ee=!1,re=!0,de=NaN,ye=null,Ze=null,V=null,We=null,Gt=null,T.Z.extend(_.Z),Se=el(St).getInstance(),ke=(0,Ai.Z)(St).getInstance(),ct=BE(St).getInstance(),yt=Ra(St).getInstance(),k}rp.__dashjs_factory_name="MediaPlayer";var Cu=F.Z.getClassFactory(rp);Cu.events=_.Z,Cu.errors=we,F.Z.updateClassFactory(rp.__dashjs_factory_name,Cu);var ip=Cu},8825:function(N,p,w){function U(g){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},U(g)}function x(g,T){return x=Object.setPrototypeOf||function(F,M){return F.__proto__=M,F},x(g,T)}function E(g,T){return!T||U(T)!=="object"&&typeof T!="function"?function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(g):T}function y(g){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},y(g)}var P=new(function(g){(function(A,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(b&&b.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),b&&x(A,b)})(_,g);var T,F,M=(T=_,F=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(A){return!1}}(),function(){var A,b=y(T);if(F){var Z=y(this).constructor;A=Reflect.construct(b,arguments,Z)}else A=b.apply(this,arguments);return E(this,A)});function _(){var A;return function(b,Z){if(!(b instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(A=M.call(this)).AST_IN_FUTURE="astInFuture",A.BASE_URLS_UPDATED="baseUrlsUpdated",A.BUFFER_EMPTY="bufferStalled",A.BUFFER_LOADED="bufferLoaded",A.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",A.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",A.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",A.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",A.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",A.DYNAMIC_TO_STATIC="dynamicToStatic",A.ERROR="error",A.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",A.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",A.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",A.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",A.LOG="log",A.MANIFEST_LOADING_STARTED="manifestLoadingStarted",A.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",A.MANIFEST_LOADED="manifestLoaded",A.METRICS_CHANGED="metricsChanged",A.METRIC_CHANGED="metricChanged",A.METRIC_ADDED="metricAdded",A.METRIC_UPDATED="metricUpdated",A.PERIOD_SWITCH_STARTED="periodSwitchStarted",A.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",A.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",A.QUALITY_CHANGE_RENDERED="qualityChangeRendered",A.TRACK_CHANGE_RENDERED="trackChangeRendered",A.STREAM_INITIALIZING="streamInitializing",A.STREAM_UPDATED="streamUpdated",A.STREAM_ACTIVATED="streamActivated",A.STREAM_DEACTIVATED="streamDeactivated",A.STREAM_INITIALIZED="streamInitialized",A.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",A.TEXT_TRACKS_ADDED="allTextTracksAdded",A.TEXT_TRACK_ADDED="textTrackAdded",A.CUE_ENTER="cueEnter",A.CUE_EXIT="cueExit",A.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",A.TTML_PARSED="ttmlParsed",A.TTML_TO_PARSE="ttmlToParse",A.CAPTION_RENDERED="captionRendered",A.CAPTION_CONTAINER_RESIZE="captionContainerResize",A.CAN_PLAY="canPlay",A.CAN_PLAY_THROUGH="canPlayThrough",A.PLAYBACK_ENDED="playbackEnded",A.PLAYBACK_ERROR="playbackError",A.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",A.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",A.PLAYBACK_LOADED_DATA="playbackLoadedData",A.PLAYBACK_PAUSED="playbackPaused",A.PLAYBACK_PLAYING="playbackPlaying",A.PLAYBACK_PROGRESS="playbackProgress",A.PLAYBACK_RATE_CHANGED="playbackRateChanged",A.PLAYBACK_SEEKED="playbackSeeked",A.PLAYBACK_SEEKING="playbackSeeking",A.PLAYBACK_STALLED="playbackStalled",A.PLAYBACK_STARTED="playbackStarted",A.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",A.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",A.PLAYBACK_WAITING="playbackWaiting",A.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",A.EVENT_MODE_ON_START="eventModeOnStart",A.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",A.CONFORMANCE_VIOLATION="conformanceViolation",A.REPRESENTATION_SWITCH="representationSwitch",A.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",A.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",A.INBAND_PRFT="inbandPrft",A.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",A.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",A}return _}(w(8342).Z));p.Z=P},3393:function(N,p){function w(x,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}var U=new(function(){function x(){(function(P,g){if(!(P instanceof g))throw new TypeError("Cannot call a class as a function")})(this,x),this.init()}var E,y;return E=x,(y=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&w(E.prototype,y),x}());p.Z=U},3860:function(N,p){function w(x,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}var U=new(function(){function x(){(function(P,g){if(!(P instanceof g))throw new TypeError("Cannot call a class as a function")})(this,x),this.init()}var E,y;return E=x,(y=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&w(E.prototype,y),x}());p.Z=U},8080:function(N,p,w){w.d(p,{default:function(){return G}});var U=function K(){(function(ge,pe){if(!(ge instanceof pe))throw new TypeError("Cannot call a class as a function")})(this,K),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};U.SSL_CONNECTION_FAILED_PREFIX="SSL",U.DNS_RESOLUTION_FAILED="C00",U.HOST_UNREACHABLE="C01",U.CONNECTION_REFUSED="C02",U.CONNECTION_ERROR="C03",U.CORRUPT_MEDIA_ISOBMFF="M00",U.CORRUPT_MEDIA_OTHER="M01",U.BASE_URL_CHANGED="F00",U.BECAME_REPORTER="S00";var x=U,E=w(1180);function y(K){var ge,pe,Ke=(K=K||{}).eventBus,wt=K.dashMetrics,lt=K.metricsConstants,ut=K.events;function nt(rn){var cn=new x;if(pe){for(var Ft in rn)rn.hasOwnProperty(Ft)&&(cn[Ft]=rn[Ft]);cn.mpdurl||(cn.mpdurl=pe.originalUrl||pe.url),cn.terror||(cn.terror=new Date),wt.addDVBErrors(cn)}}function ht(rn){rn.error||(pe=rn.manifest)}function _t(rn){nt({errorcode:x.BASE_URL_CHANGED,servicelocation:rn.entry})}function Tt(){nt({errorcode:x.BECAME_REPORTER})}function Mt(rn){var cn;rn.metric===lt.HTTP_REQUEST&&((cn=rn.value).responsecode===0||cn.responsecode==null||cn.responsecode>=400||cn.responsecode<100||cn.responsecode>=600)&&nt({errorcode:cn.responsecode||x.CONNECTION_ERROR,url:cn.url,terror:cn.tresponse,servicelocation:cn._serviceLocation})}function _n(rn){var cn;switch(rn.error?rn.error.code:0){case MediaError.MEDIA_ERR_NETWORK:cn=x.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:cn=x.CORRUPT_MEDIA_OTHER;break;default:return}nt({errorcode:cn})}return ge={initialize:function(){Ke.on(ut.MANIFEST_UPDATED,ht,ge),Ke.on(ut.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,_t,ge),Ke.on(ut.METRIC_ADDED,Mt,ge),Ke.on(ut.METRIC_UPDATED,Mt,ge),Ke.on(ut.PLAYBACK_ERROR,_n,ge),Ke.on(E.Z.BECAME_REPORTING_PLAYER,Tt,ge)},reset:function(){Ke.off(ut.MANIFEST_UPDATED,ht,ge),Ke.off(ut.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,_t,ge),Ke.off(ut.METRIC_ADDED,Mt,ge),Ke.off(ut.METRIC_UPDATED,Mt,ge),Ke.off(ut.PLAYBACK_ERROR,_n,ge),Ke.off(E.Z.BECAME_REPORTING_PLAYER,Tt,ge)}}}y.__dashjs_factory_name="DVBErrorsTranslator";var P=dashjs.FactoryMaker.getSingletonFactory(y),g=w(2295);function T(K){K=K||{};var ge,pe,Ke=!1,wt=this.context,lt=K.mediaElement;return ge={initialize:function(ut){ut&&ut.length&&(ut.forEach(function(nt){var ht=nt.starttime,_t=ht+nt.duration;pe.add(ht,_t)}),Ke=!!ut[0]._useWallClockTime)},reset:function(){pe.clear()},isEnabled:function(){var ut,nt=pe.length;if(!nt)return!0;ut=Ke?new Date().getTime()/1e3:lt.currentTime;for(var ht=0;ht<nt;ht+=1){var _t=pe.start(ht),Tt=pe.end(ht);if(_t<=ut&&ut<Tt)return!0}return!1}},pe=(0,g.Z)(wt).create(),ge}T.__dashjs_factory_name="RangeController";var F=dashjs.FactoryMaker.getClassFactory(T);function M(){return{serialise:function K(ge){var pe,Ke,wt=[],lt=[];for(pe in ge)if(ge.hasOwnProperty(pe)&&pe.indexOf("_")!==0){if((Ke=ge[pe])==null&&(Ke=""),Array.isArray(Ke)){if(!Ke.length)continue;lt=[],Ke.forEach(function(ut){var nt=Object.prototype.toString.call(ut).slice(8,-1)!=="Object";lt.push(nt?ut:K(ut))}),Ke=lt.map(encodeURIComponent).join(",")}else typeof Ke=="string"?Ke=encodeURIComponent(Ke):Ke instanceof Date?Ke=Ke.toISOString():typeof Ke=="number"&&(Ke=Math.round(Ke));wt.push(pe+"="+Ke)}return wt.join("&")}}}M.__dashjs_factory_name="MetricSerialiser";var _=dashjs.FactoryMaker.getSingletonFactory(M);function A(){var K,ge,pe,Ke=window.crypto||window.msCrypto,wt=Uint32Array,lt=Math.pow(2,8*wt.BYTES_PER_ELEMENT)-1;function ut(){Ke&&(K||(K=new wt(10)),Ke.getRandomValues(K),ge=0)}return pe={random:function(nt,ht){var _t;return nt||(nt=0),ht||(ht=1),Ke?(ge===K.length&&ut(),_t=K[ge]/lt,ge+=1):_t=Math.random(),_t*(ht-nt)+nt}},ut(),pe}A.__dashjs_factory_name="RNG";var b=dashjs.FactoryMaker.getSingletonFactory(A),Z=w(5717);function Y(K){var ge;K=K||{};var pe,Ke,wt,lt,ut,nt,ht,_t=this.context,Tt=[],Mt=K.metricsConstants;function _n(){lt=!1,ut=!1,nt=null,ht=null}return ge={report:function(rn,cn){Array.isArray(cn)||(cn=[cn]),ut&&ht.isEnabled()&&cn.forEach(function(Ft){var Gn=pe.serialise(Ft);rn!==Mt.DVB_ERRORS&&(Gn="metricname=".concat(rn,"&").concat(Gn)),function(Sr,Gr,gr){var fi=new XMLHttpRequest;fi.withCredentials=Ke.getXHRWithCredentialsForType(Mt.HTTP_REQUEST_DVB_REPORTING_TYPE);var ao=function(){var Hr=Tt.indexOf(fi);Hr!==-1&&(Tt.splice(Hr,1),!(fi.status>=200&&fi.status<300)&&gr&&gr())};Tt.push(fi);try{fi.open("GET",Sr),fi.onloadend=ao,fi.onerror=ao,fi.send()}catch(Hr){fi.onerror()}}(Gn="".concat(nt,"?").concat(Gn),0,function(){ut=!1})})},initialize:function(rn,cn){var Ft;if(ht=cn,!(nt=rn.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");lt||((Ft=rn.dvbProbability)&&(Ft===1e3||Ft/1e3>=wt.random())&&(ut=!0),lt=!0)},reset:function(){_n()}},pe=_(_t).getInstance(),wt=b(_t).getInstance(),Ke=(0,Z.Z)(_t).getInstance(),_n(),ge}Y.__dashjs_factory_name="DVBReporting";var $=dashjs.FactoryMaker.getClassFactory(Y);function Q(K){K=K||{};var ge,pe={"urn:dvb:dash:reporting:2014":$},Ke=this.context,wt=K.debug?K.debug.getLogger(ge):{},lt=K.metricsConstants,ut=K.mediaPlayerModel||{};return{create:function(nt,ht){var _t;try{(_t=pe[nt.schemeIdUri](Ke).create({metricsConstants:lt,mediaPlayerModel:ut})).initialize(nt,ht)}catch(Tt){_t=null,wt.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(nt.schemeIdUri," (").concat(Tt.message,")"))}return _t},register:function(nt,ht){pe[nt]=ht},unregister:function(nt){delete pe[nt]}}}Q.__dashjs_factory_name="ReportingFactory";var se=dashjs.FactoryMaker.getSingletonFactory(Q);function C(K){var ge=[],pe=se(this.context).getInstance(K);return{initialize:function(Ke,wt){Ke.some(function(lt){var ut=pe.create(lt,wt);if(ut)return ge.push(ut),!0})},reset:function(){ge.forEach(function(Ke){return Ke.reset()}),ge=[]},report:function(Ke,wt){ge.forEach(function(lt){return lt.report(Ke,wt)})}}}C.__dashjs_factory_name="ReportingController";var X=dashjs.FactoryMaker.getClassFactory(C);function ce(){return{reconstructFullMetricName:function(K,ge,pe){var Ke=K;return ge&&(Ke+="("+ge,pe&&pe.length&&(Ke+=","+pe),Ke+=")"),Ke},validateN:function(K){if(!K)throw new Error("missing n");if(isNaN(K))throw new Error("n is NaN");if(K<0)throw new Error("n must be positive");return K}}}ce.__dashjs_factory_name="HandlerHelpers";var oe=dashjs.FactoryMaker.getSingletonFactory(ce);function me(K){var ge,pe,Ke,wt,lt;K=K||{};var ut=this.context,nt=oe(ut).getInstance(),ht=[],_t=K.metricsConstants;function Tt(){var Mt=function(){try{return Object.keys(ht).map(function(_n){return ht[_n]}).reduce(function(_n,rn){return _n.level<rn.level?_n:rn})}catch(_n){return}}();Mt&&lt!==Mt.t&&(lt=Mt.t,ge.report(Ke,Mt))}return{initialize:function(Mt,_n,rn){_n&&(pe=nt.validateN(rn),ge=_n,Ke=nt.reconstructFullMetricName(Mt,rn),wt=setInterval(Tt,pe))},reset:function(){clearInterval(wt),wt=null,pe=0,ge=null,lt=null},handleNewMetric:function(Mt,_n,rn){Mt===_t.BUFFER_LEVEL&&(ht[rn]=_n)}}}me.__dashjs_factory_name="BufferLevelHandler";var be=dashjs.FactoryMaker.getClassFactory(me),Je=dashjs.FactoryMaker.getClassFactory(function(K){var ge,pe=(K=K||{}).eventBus,Ke=K.metricsConstants;function wt(){pe.off(E.Z.METRICS_INITIALISATION_COMPLETE,wt,this),pe.trigger(E.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(lt,ut){ut&&(ge=ut,pe.on(E.Z.METRICS_INITIALISATION_COMPLETE,wt,this))},reset:function(){ge=null},handleNewMetric:function(lt,ut){lt===Ke.DVB_ERRORS&&ge&&ge.report(lt,ut)}}});function we(K){var ge,pe,Ke,wt,lt;K=K||{};var ut=[],nt=oe(this.context).getInstance(),ht=K.metricsConstants;function _t(){var Tt=ut;Tt.length&&ge&&ge.report(wt,Tt),ut=[]}return{initialize:function(Tt,Mt,_n,rn){Mt&&(pe=nt.validateN(_n),ge=Mt,rn&&rn.length&&(Ke=rn),wt=nt.reconstructFullMetricName(Tt,_n,rn),lt=setInterval(_t,pe))},reset:function(){clearInterval(lt),lt=null,pe=null,Ke=null,ut=[],ge=null},handleNewMetric:function(Tt,Mt){Tt===ht.HTTP_REQUEST&&(Ke&&Ke!==Mt.type||ut.push(Mt))}}}we.__dashjs_factory_name="HttpListHandler";var qe=dashjs.FactoryMaker.getClassFactory(we);function st(){var K,ge;return{initialize:function(pe,Ke){K=pe,ge=Ke},reset:function(){ge=null,K=void 0},handleNewMetric:function(pe,Ke){pe===K&&ge&&ge.report(K,Ke)}}}st.__dashjs_factory_name="GenericMetricHandler";var ft=dashjs.FactoryMaker.getClassFactory(st);function Ce(K){var ge,pe=(K=K||{}).debug?K.debug.getLogger(ge):{},Ke=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,wt=this.context,lt={BufferLevel:be,DVBErrors:Je,HttpList:qe,PlayList:ft,RepSwitchList:ft,TcpList:ft};return{create:function(ut,nt){var ht,_t=ut.match(Ke);if(_t){try{(ht=lt[_t[1]](wt).create({eventBus:K.eventBus,metricsConstants:K.metricsConstants})).initialize(_t[1],nt,_t[3],_t[5])}catch(Tt){ht=null,pe.error("MetricsHandlerFactory: Could not create handler for type ".concat(_t[1]," with args ").concat(_t[3],", ").concat(_t[5]," (").concat(Tt.message,")"))}return ht}},register:function(ut,nt){lt[ut]=nt},unregister:function(ut){delete lt[ut]}}}Ce.__dashjs_factory_name="MetricsHandlerFactory";var He=dashjs.FactoryMaker.getSingletonFactory(Ce);function vt(K){K=K||{};var ge,pe=[],Ke=this.context,wt=K.eventBus,lt=K.events,ut=He(Ke).getInstance({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants});function nt(ht){pe.forEach(function(_t){_t.handleNewMetric(ht.metric,ht.value,ht.mediaType)})}return ge={initialize:function(ht,_t){ht.split(",").forEach(function(Tt,Mt,_n){var rn;if(Tt.indexOf("(")!==-1&&Tt.indexOf(")")===-1){var cn=_n[Mt+1];cn&&cn.indexOf("(")===-1&&cn.indexOf(")")!==-1&&(Tt+=","+cn,delete _n[Mt+1])}(rn=ut.create(Tt,_t))&&pe.push(rn)}),wt.on(lt.METRIC_ADDED,nt,ge),wt.on(lt.METRIC_UPDATED,nt,ge)},reset:function(){wt.off(lt.METRIC_ADDED,nt,ge),wt.off(lt.METRIC_UPDATED,nt,ge),pe.forEach(function(ht){return ht.reset()}),pe=[]}}}vt.__dashjs_factory_name="MetricsHandlersController";var Re=dashjs.FactoryMaker.getClassFactory(vt);function Ye(K){var ge,pe,Ke;K=K||{};var wt=this.context;function lt(){ge&&ge.reset(),pe&&pe.reset(),Ke&&Ke.reset()}return{initialize:function(ut){try{(Ke=F(wt).create({mediaElement:K.mediaElement})).initialize(ut.Range),(pe=X(wt).create({debug:K.debug,metricsConstants:K.metricsConstants,mediaPlayerModel:K.mediaPlayerModel})).initialize(ut.Reporting,Ke),(ge=Re(wt).create({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants,events:K.events})).initialize(ut.metrics,pe)}catch(nt){throw lt(),nt}},reset:lt}}Ye.__dashjs_factory_name="MetricsController";var ot=dashjs.FactoryMaker.getClassFactory(Ye),Ht=function K(){(function(ge,pe){if(!(ge instanceof pe))throw new TypeError("Cannot call a class as a function")})(this,K),this.metrics="",this.Range=[],this.Reporting=[]},Bt=function K(){(function(ge,pe){if(!(ge instanceof pe))throw new TypeError("Cannot call a class as a function")})(this,K),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},Et=function K(){(function(ge,pe){if(!(ge instanceof pe))throw new TypeError("Cannot call a class as a function")})(this,K),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function Dt(K){var ge=(K=K||{}).adapter,pe=K.constants;return{getMetrics:function(Ke){var wt=[];return Ke&&Ke.Metrics_asArray&&Ke.Metrics_asArray.forEach(function(lt){var ut=new Ht,nt=ge.getIsDynamic(Ke);lt.hasOwnProperty("metrics")&&(ut.metrics=lt.metrics,lt.Range_asArray&&lt.Range_asArray.forEach(function(ht){var _t=new Bt;_t.starttime=function(Tt,Mt,_n){var rn,cn,Ft=0;return Mt?Ft=ge.getAvailabilityStartTime(Tt)/1e3:(rn=ge.getRegularPeriods(Tt)).length&&(Ft=rn[0].start),cn=Ft,_n&&_n.hasOwnProperty(pe.START_TIME)&&(cn+=_n.starttime),cn}(Ke,nt,ht),ht.hasOwnProperty("duration")?_t.duration=ht.duration:_t.duration=ge.getDuration(Ke),_t._useWallClockTime=nt,ut.Range.push(_t)}),lt.Reporting_asArray&&(lt.Reporting_asArray.forEach(function(ht){var _t=new Et;ht.hasOwnProperty(pe.SCHEME_ID_URI)&&(_t.schemeIdUri=ht.schemeIdUri,ht.hasOwnProperty("value")&&(_t.value=ht.value),ht.hasOwnProperty(pe.DVB_REPORTING_URL)&&(_t.dvbReportingUrl=ht[pe.DVB_REPORTING_URL]),ht.hasOwnProperty(pe.DVB_PROBABILITY)&&(_t.dvbProbability=ht[pe.DVB_PROBABILITY]),ut.Reporting.push(_t))}),wt.push(ut)))}),wt}}}Dt.__dashjs_factory_name="ManifestParsing";var Ne=dashjs.FactoryMaker.getSingletonFactory(Dt);function ne(K){var ge;K=K||{};var pe={},Ke=this.context,wt=K.eventBus,lt=K.events;function ut(ht){if(!ht.error){var _t=Object.keys(pe);Ne(Ke).getInstance({adapter:K.adapter,constants:K.constants}).getMetrics(ht.manifest).forEach(function(Tt){var Mt=JSON.stringify(Tt);if(pe.hasOwnProperty(Mt))_t.splice(Mt,1);else try{var _n=ot(Ke).create(K);_n.initialize(Tt),pe[Mt]=_n}catch(rn){}}),_t.forEach(function(Tt){pe[Tt].reset(),delete pe[Tt]}),wt.trigger(E.Z.METRICS_INITIALISATION_COMPLETE)}}function nt(){Object.keys(pe).forEach(function(ht){pe[ht].reset()}),pe={}}return ge={reset:function(){wt.off(lt.MANIFEST_UPDATED,ut,ge),wt.off(lt.STREAM_TEARDOWN_COMPLETE,nt,ge)}},wt.on(lt.MANIFEST_UPDATED,ut,ge),wt.on(lt.STREAM_TEARDOWN_COMPLETE,nt,ge),ge}ne.__dashjs_factory_name="MetricsCollectionController";var Be=dashjs.FactoryMaker.getClassFactory(ne);function L(){var K=this.context;return{createMetricsReporting:function(ge){return P(K).getInstance({eventBus:ge.eventBus,dashMetrics:ge.dashMetrics,metricsConstants:ge.metricsConstants,events:ge.events}).initialize(),Be(K).create(ge)},getReportingFactory:function(){return se(K).getInstance()},getMetricsHandlerFactory:function(){return He(K).getInstance()}}}L.__dashjs_factory_name="MetricsReporting";var D=dashjs.FactoryMaker.getClassFactory(L);D.events=E.Z,dashjs.FactoryMaker.updateClassFactory(L.__dashjs_factory_name,D);var G=D},1180:function(N,p,w){function U(g){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},U(g)}function x(g,T){return x=Object.setPrototypeOf||function(F,M){return F.__proto__=M,F},x(g,T)}function E(g,T){return!T||U(T)!=="object"&&typeof T!="function"?function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(g):T}function y(g){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},y(g)}var P=new(function(g){(function(A,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(b&&b.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),b&&x(A,b)})(_,g);var T,F,M=(T=_,F=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(A){return!1}}(),function(){var A,b=y(T);if(F){var Z=y(this).constructor;A=Reflect.construct(b,arguments,Z)}else A=b.apply(this,arguments);return E(this,A)});function _(){var A;return function(b,Z){if(!(b instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(A=M.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",A.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",A.CMCD_DATA_GENERATED="cmcdDataGenerated",A}return _}(w(8342).Z));p.Z=P},5717:function(N,p,w){var U=w(2610),x=w(5448),E=w(1264),y=w(3106),P=w(1767),g=w(3393);function T(){var F,M,_,A,b,Z,Y,$,Q=this.context,se=(0,E.Z)(Q).getInstance();function C(){A=[],b=[],Z=[],$=[],Y=null,M=[]}function X(be,Je){var we=-1;be.some(function(qe,st){if(qe===Je)return we=st,!0}),we<0||be.splice(we,1)}function ce(be){var Je;for(Je=0;Je<$.length;Je++)if($[Je].rulename===be)return Je;return-1}function oe(be,Je){me(be,Je);var we=new U.Z;we.schemeIdUri=be,we.value=Je,M.push(we)}function me(be,Je){(0,y.PS)(be,"string"),(0,y.PS)(Je,"string"),M.forEach(function(we,qe){we.schemeIdUri===be&&we.value===Je&&M.splice(qe,1)})}return F={getCustomInitialTrackSelectionFunction:function(){return Y},setCustomInitialTrackSelectionFunction:function(be){Y=be},resetCustomInitialTrackSelectionFunction:function(){Y=null},getLicenseResponseFilters:function(){return b},getLicenseRequestFilters:function(){return A},getCustomCapabilitiesFilters:function(){return Z},registerCustomCapabilitiesFilter:function(be){Z.push(be)},registerLicenseResponseFilter:function(be){b.push(be)},registerLicenseRequestFilter:function(be){A.push(be)},unregisterCustomCapabilitiesFilter:function(be){X(Z,be)},unregisterLicenseResponseFilter:function(be){X(b,be)},unregisterLicenseRequestFilter:function(be){X(A,be)},addAbrCustomRule:function(be,Je,we){if(typeof be!="string"||be!==P.Z.ABANDON_FRAGMENT_RULES&&be!==P.Z.QUALITY_SWITCH_RULES||typeof Je!="string")throw g.Z.BAD_ARGUMENT_ERROR;var qe=ce(Je);qe===-1?$.push({type:be,rulename:Je,rule:we}):($[qe].type=be,$[qe].rule=we)},removeAllAbrCustomRule:function(){$=[]},removeAbrCustomRule:function(be){if(be){var Je=ce(be);Je!==-1&&$.splice(Je,1)}else $=[]},getAbrCustomRules:function(){return $},addUTCTimingSource:oe,removeUTCTimingSource:me,getUTCTimingSources:function(){return M},clearDefaultUTCTimingSources:function(){M=[]},restoreDefaultUTCTimingSources:function(){var be=se.get().streaming.utcSynchronization.defaultTimingSource;oe(be.scheme,be.value)},setXHRWithCredentialsForType:function be(Je,we){Je?_[Je]=!!we:Object.keys(_).forEach(function(qe){be(qe,we)})},getXHRWithCredentialsForType:function(be){var Je=_[be];return Je===void 0?_.default:Je},setConfig:function(){},reset:function(){C()}},_={default:!1},C(),F}T.__dashjs_factory_name="CustomParametersModel",p.Z=x.Z.getSingletonFactory(T)},9032:function(N,p,w){var U=w(5448),x=w(7473);function E(P){var g=(P=P||{}).requestModifier;function T(F){var M=new Date,_=F.request,A=new XMLHttpRequest;if(A.open(F.method,F.url,!0),_.responseType&&(A.responseType=_.responseType),_.range&&A.setRequestHeader("Range","bytes="+_.range),_.requestStartDate||(_.requestStartDate=M),g&&g.modifyRequestHeader&&(A=g.modifyRequestHeader(A,{url:F.url})),F.headers)for(var b in F.headers){var Z=F.headers[b];Z&&A.setRequestHeader(b,Z)}A.withCredentials=F.withCredentials,A.onload=F.onload,A.onloadend=F.onend,A.onerror=F.onerror,A.onprogress=F.progress,A.onabort=F.onabort,A.ontimeout=F.ontimeout,A.timeout=F.timeout,A.send(),F.response=A}return{load:function(F){g&&g.modifyRequest?(0,x.k)(F,g).then(function(){return T(F)}):T(F)},abort:function(F){var M=F.response;M.onloadend=M.onerror=M.onprogress=void 0,M.abort()}}}E.__dashjs_factory_name="XHRLoader";var y=U.Z.getClassFactory(E);p.Z=y},1737:function(N,p,w){function U(ln,gn){for(var pn=0;pn<gn.length;pn++){var At=gn[pn];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),Object.defineProperty(ln,At.key,At)}}w.d(p,{default:function(){return ju}});var x={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},E=function(){function ln(){(function(At,Xt){if(!(At instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,ln)}var gn,pn;return gn=ln,pn=[{key:"findCencContentProtection",value:function(At){for(var Xt=null,Ot=0;Ot<At.length;++Ot){var Yt=At[Ot];Yt.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||Yt.value.toLowerCase()!=="cenc"&&Yt.value.toLowerCase()!=="cbcs"||(Xt=Yt)}return Xt}},{key:"getPSSHData",value:function(At){var Xt=8,Ot=new DataView(At),Yt=Ot.getUint8(Xt);return Xt+=20,Yt>0&&(Xt+=4+16*Ot.getUint32(Xt)),Xt+=4,At.slice(Xt)}},{key:"getPSSHForKeySystem",value:function(At,Xt){var Ot=ln.parsePSSHList(Xt);return At&&Ot.hasOwnProperty(At.uuid.toLowerCase())?Ot[At.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(At,Xt){return"pssh"in At?(At.pssh.__text=At.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),Xt.decodeArray(At.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(At){if(At==null)return[];for(var Xt=new DataView(At.buffer||At),Ot={},Yt=0;;){var wn,Mn,zn=void 0,Kn=Yt;if(Yt>=Xt.buffer.byteLength)break;if(wn=Yt+Xt.getUint32(Yt),Yt+=4,Xt.getUint32(Yt)===1886614376)if(Yt+=4,(Mn=Xt.getUint8(Yt))===0||Mn===1){Yt++,Yt+=3,zn="";var Ln=void 0,fn=void 0;for(Ln=0;Ln<4;Ln++)zn+=(fn=Xt.getUint8(Yt+Ln).toString(16)).length===1?"0"+fn:fn;for(Yt+=4,zn+="-",Ln=0;Ln<2;Ln++)zn+=(fn=Xt.getUint8(Yt+Ln).toString(16)).length===1?"0"+fn:fn;for(Yt+=2,zn+="-",Ln=0;Ln<2;Ln++)zn+=(fn=Xt.getUint8(Yt+Ln).toString(16)).length===1?"0"+fn:fn;for(Yt+=2,zn+="-",Ln=0;Ln<2;Ln++)zn+=(fn=Xt.getUint8(Yt+Ln).toString(16)).length===1?"0"+fn:fn;for(Yt+=2,zn+="-",Ln=0;Ln<6;Ln++)zn+=(fn=Xt.getUint8(Yt+Ln).toString(16)).length===1?"0"+fn:fn;Yt+=6,Yt+=4,Ot[zn=zn.toLowerCase()]=Xt.buffer.slice(Kn,wn),Yt=wn}else Yt=wn;else Yt=wn}return Ot}},{key:"getLicenseServerUrlFromMediaInfo",value:function(At,Xt){try{if(!At||At.length===0)return null;for(var Ot=0,Yt=null;Ot<At.length&&!Yt;){var wn=At[Ot];if(wn&&wn.contentProtection&&wn.contentProtection.length>0){var Mn=wn.contentProtection.filter(function(fr){return fr.schemeIdUri&&fr.schemeIdUri===Xt});if(Mn&&Mn.length>0)for(var zn=0;zn<Mn.length&&!Yt;){for(var Kn=Mn[zn],Ln=0;Ln<x.attributes.length&&!Yt;){for(var fn=0,Xe=x.attributes[Ln];fn<x.prefixes.length&&!Yt;){var Un=x.prefixes[fn];Kn[Xe]&&Kn[Xe].__prefix&&Kn[Xe].__prefix===Un&&Kn[Xe].__text&&(Yt=Kn[Xe].__text),fn+=1}Ln+=1}zn+=1}}Ot+=1}return Yt}catch(fr){return null}}}],pn&&U(gn,pn),ln}(),y=function ln(gn,pn){(function(At,Xt){if(!(At instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.contentType=gn,this.robustness=pn},P=function ln(gn,pn,At,Xt,Ot){(function(Yt,wn){if(!(Yt instanceof wn))throw new TypeError("Cannot call a class as a function")})(this,ln),this.initDataTypes=["cenc"],gn&&gn.length&&(this.audioCapabilities=gn),pn&&pn.length&&(this.videoCapabilities=pn),this.distinctiveIdentifier=At,this.persistentState=Xt,this.sessionTypes=Ot};function g(ln){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gn){return typeof gn}:function(gn){return gn&&typeof Symbol=="function"&&gn.constructor===Symbol&&gn!==Symbol.prototype?"symbol":typeof gn},g(ln)}function T(ln,gn){return T=Object.setPrototypeOf||function(pn,At){return pn.__proto__=At,pn},T(ln,gn)}function F(ln,gn){return!gn||g(gn)!=="object"&&typeof gn!="function"?function(pn){if(pn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pn}(ln):gn}function M(ln){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(gn){return gn.__proto__||Object.getPrototypeOf(gn)},M(ln)}var _=new(function(ln){(function(Ot,Yt){if(typeof Yt!="function"&&Yt!==null)throw new TypeError("Super expression must either be null or a function");Ot.prototype=Object.create(Yt&&Yt.prototype,{constructor:{value:Ot,writable:!0,configurable:!0}}),Yt&&T(Ot,Yt)})(Xt,ln);var gn,pn,At=(gn=Xt,pn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Ot){return!1}}(),function(){var Ot,Yt=M(gn);if(pn){var wn=M(this).constructor;Ot=Reflect.construct(Yt,arguments,wn)}else Ot=Yt.apply(this,arguments);return F(this,Ot)});function Xt(){var Ot;return function(Yt,wn){if(!(Yt instanceof wn))throw new TypeError("Cannot call a class as a function")}(this,Xt),(Ot=At.call(this)).MEDIA_KEYERR_CODE=100,Ot.MEDIA_KEYERR_UNKNOWN_CODE=101,Ot.MEDIA_KEYERR_CLIENT_CODE=102,Ot.MEDIA_KEYERR_SERVICE_CODE=103,Ot.MEDIA_KEYERR_OUTPUT_CODE=104,Ot.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,Ot.MEDIA_KEYERR_DOMAIN_CODE=106,Ot.MEDIA_KEY_MESSAGE_ERROR_CODE=107,Ot.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,Ot.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,Ot.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,Ot.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,Ot.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,Ot.KEY_SESSION_CREATED_ERROR_CODE=113,Ot.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,Ot.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",Ot.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",Ot.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",Ot.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",Ot.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",Ot.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",Ot.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",Ot.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",Ot.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",Ot.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",Ot.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",Ot.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",Ot.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",Ot.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",Ot}return Xt}(w(2230).Z)),A=w(5459),b=function ln(gn,pn,At,Xt,Ot,Yt,wn,Mn){(function(zn,Kn){if(!(zn instanceof Kn))throw new TypeError("Cannot call a class as a function")})(this,ln),this.url=gn,this.method=pn,this.responseType=At,this.headers=Xt,this.withCredentials=Ot,this.messageType=Yt,this.sessionId=wn,this.data=Mn},Z=function ln(gn,pn,At){(function(Xt,Ot){if(!(Xt instanceof Ot))throw new TypeError("Cannot call a class as a function")})(this,ln),this.url=gn,this.headers=pn,this.data=At},Y=w(7855),$=w(703),Q=w(3393),se=w(5448);function C(ln){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gn){return typeof gn}:function(gn){return gn&&typeof Symbol=="function"&&gn.constructor===Symbol&&gn!==Symbol.prototype?"symbol":typeof gn},C(ln)}function X(ln){var gn,pn,At,Xt,Ot,Yt,wn,Mn,zn,Kn,Ln,fn=(ln=ln||{}).protectionKeyController,Xe=ln.protectionModel,Un=ln.eventBus,fr=ln.events,Ir=ln.debug,Vr=ln.BASE64,er=ln.constants,dn=[],vn=ln.cmcdModel,on=ln.settings,tr=ln.customParametersModel;function ur(){if(!(Un&&Un.hasOwnProperty("on")&&fn&&fn.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function xr(sn,ir){Mn||zn?Mn&&Rr():function(Tr,Ai){if(!zn){zn=!0;var Wr,Ii=[];Tr=Tr.sort(function(ci,Br){return(Ot&&Ot[ci.ks.systemString]&&Ot[ci.ks.systemString].priority>=0?Ot[ci.ks.systemString].priority:Tr.length)-(Ot&&Ot[Br.ks.systemString]&&Ot[Br.ks.systemString].priority>=0?Ot[Br.ks.systemString].priority:Tr.length)});for(var Kr=0;Kr<Tr.length;Kr++){var br=vs(Tr[Kr]);Ii.push({ks:Tr[Kr].ks,configs:[br],protData:Tr[Kr].protData})}Xe.requestKeySystemAccess(Ii).then(function(ci){var Br=(Wr=ci.data).mksa&&Wr.mksa.selectedSystemString?Wr.mksa.selectedSystemString:Wr.keySystem.systemString;return pn.info("DRM: KeySystem Access Granted for system string ("+Br+")!  Selecting key system..."),Xe.selectKeySystem(Wr)}).then(function(ci){if(Mn=ci,zn=!1,Xe){Un.trigger(fr.KEY_SYSTEM_SELECTED,{data:Wr});var Br=li(Mn);Br&&Br.serverCertificate&&Br.serverCertificate.length>0&&Xe.setServerCertificate(Vr.decodeArray(Br.serverCertificate).buffer),Rr()}}).catch(function(ci){Mn=null,zn=!1,Ai||Un.trigger(fr.KEY_SYSTEM_SELECTED,{data:null,error:new A.Z(_.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,_.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+ci.error)})})}}(sn,ir)}function Rr(){for(var sn,ir=0;ir<At.length;ir++)for(sn=0;sn<At[ir].length;sn++)if(Mn===At[ir][sn].ks){di(At[ir][sn]);break}At=[]}function di(sn){if(fn.isClearKey(Mn)&&sn.protData&&sn.protData.hasOwnProperty("clearkeys")&&Object.keys(sn.protData.clearkeys).length!==0){var ir={kids:Object.keys(sn.protData.clearkeys)};sn.initData=new TextEncoder().encode(JSON.stringify(ir))}sn.sessionId?Ui(sn):sn.initData!==null&&ni(sn)}function Ui(sn){ur(),Xe.loadKeySession(sn)}function ni(sn){var ir=E.getPSSHForKeySystem(Mn,sn?sn.initData:null);if(ir){if(function(Tr){if(!Tr)return!1;try{for(var Ai=Xe.getSessions(),Wr=0;Wr<Ai.length;Wr++)if(Ai[Wr].getKeyId()===Tr)return!0;return!1}catch(Ii){return!1}}(sn.keyId)||vi(ir))return;try{sn.initData=ir,Xe.createKeySession(sn)}catch(Tr){Un.trigger(fr.KEY_SESSION_CREATED,{data:null,error:new A.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+Tr.message)})}}else sn&&sn.initData?Xe.createKeySession(sn):Un.trigger(fr.KEY_SESSION_CREATED,{data:null,error:new A.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Mn?Mn.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function li(sn){if(sn){var ir=sn.systemString;if(Ot)return ir in Ot?Ot[ir]:null}return null}function vi(sn){if(!sn)return!1;try{for(var ir=Xe.getAllInitData(),Tr=0;Tr<ir.length;Tr++)if(fn.initDataEquals(sn,ir[Tr]))return pn.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(Ai){return!1}}function ri(sn){ur(),sn?(Xe.setMediaElement(sn),Un.on(fr.NEED_KEY,Gu,gn)):sn===null&&(Xe.setMediaElement(sn),Un.off(fr.NEED_KEY,Gu,gn))}function vs(sn){var ir=sn.protData,Tr=[],Ai=[],Wr=ir&&ir.audioRobustness&&ir.audioRobustness.length>0?ir.audioRobustness:wn,Ii=ir&&ir.videoRobustness&&ir.videoRobustness.length>0?ir.videoRobustness:wn,Kr=sn.sessionType,br=ir&&ir.distinctiveIdentifier?ir.distinctiveIdentifier:"optional",ci=ir&&ir.persistentState?ir.persistentState:Kr==="temporary"?"optional":"required";return Xt.forEach(function(Br){Br.type===er.AUDIO?Tr.push(new y(Br.codec,Wr)):Br.type===er.VIDEO&&Ai.push(new y(Br.codec,Ii))}),new P(Tr,Ai,br,ci,[Kr])}function Ao(sn){sn.error?Un.trigger(fr.KEY_STATUSES_CHANGED,{data:null,error:sn.error}):pn.debug("DRM: key status = "+sn.status)}function Yo(sn){pn.debug("DRM: onKeyMessage");var ir=sn.data;Un.trigger(fr.KEY_MESSAGE,{data:ir});var Tr=ir.messageType?ir.messageType:"license-request",Ai=ir.message,Wr=ir.sessionToken,Ii=li(Mn),Kr=fn.getLicenseServerModelInstance(Mn,Ii,Tr),br={sessionToken:Wr,messageType:Tr};if(Ai&&Ai.byteLength!==0){if(!Kr)return pn.debug("DRM: License server request not required for this message (type = "+sn.data.messageType+").  Session ID = "+Wr.getSessionId()),void Ri(br);if(fn.isClearKey(Mn)){var ci=fn.processClearKeyLicenseRequest(Mn,Ii,Ai);if(ci&&ci.keyPairs&&ci.keyPairs.length>0)return pn.debug("DRM: ClearKey license request handled by application!"),Ri(br),void Xe.updateKeySession(Wr,ci)}(function(Br,Ci,yo){var oa=Br.sessionToken,yi=Br.messageType?Br.messageType:"license-request",Ta={sessionToken:oa,messageType:yi},aa=Mn?Mn.systemString:null,ys=function(sr,ei,Io,Eo,Hi){var Vi=null,Er=Eo.message;if(sr&&sr.serverURL){var Po=sr.serverURL;typeof Po=="string"&&Po!==""?Vi=Po:C(Po)==="object"&&Po.hasOwnProperty(ei)&&(Vi=Po[ei])}else if(sr&&sr.laURL&&sr.laURL!=="")Vi=sr.laURL;else if(!(Vi=E.getLicenseServerUrlFromMediaInfo(Xt,Mn.schemeIdURI))&&!fn.isClearKey(Mn)){var yc=E.getPSSHData(Io.initData);(Vi=Mn.getLicenseServerURLFromInitData(yc))||(Vi=Eo.laURL)}return Vi=Hi.getServerURLFromMessage(Vi,Er,ei)}(yo,yi,oa,Br,Ci);if(ys){var Sa={},wa=!1;yo&&Zs(Sa,yo.httpRequestHeaders);var yu=Br.message;Zs(Sa,Mn.getRequestHeadersFromMessage(yu)),Object.keys(Sa).forEach(function(sr){sr.toLowerCase()==="authorization"&&(wa=!0)}),yo&&typeof yo.withCredentials=="boolean"&&(wa=yo.withCredentials);var Eu=function(sr){if(Xe)if(sr.status>=200&&sr.status<=299){var ei=$.Z.parseHttpHeaders(sr.getAllResponseHeaders?sr.getAllResponseHeaders():null),Io=new Z(sr.responseURL,ei,sr.response);qu(tr.getLicenseResponseFilters(),Io).then(function(){var Eo=Ci.getLicenseMessage(Io.data,aa,yi);Eo!==null?(Ri(Ta),Xe.updateKeySession(oa,Eo)):Rl(sr,Ta,aa,yi,Ci)})}else Rl(sr,Ta,aa,yi,Ci)},Ah=function(sr){Ri(Ta,new A.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+aa+' update, XHR aborted. status is "'+sr.statusText+'" ('+sr.status+"), readyState is "+sr.readyState))},Aa=function(sr){Ri(Ta,new A.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+aa+' update, XHR error. status is "'+sr.statusText+'" ('+sr.status+"), readyState is "+sr.readyState))},Es=Mn.getLicenseRequestFromMessage(yu),_u=Ci.getHTTPMethod(yi),Tu=Ci.getResponseType(aa,yi),Hu=yo&&!isNaN(yo.httpTimeout)?yo.httpTimeout:8e3,mf=oa.getSessionId()||null,qs=new b(ys,_u,Tu,Sa,wa,yi,mf,Es),vf=isNaN(on.get().streaming.retryAttempts[Y.w.LICENSE])?3:on.get().streaming.retryAttempts[Y.w.LICENSE];qu(tr.getLicenseRequestFilters(),qs).then(function(){Zu(qs,vf,Hu,Eu,Ah,Aa)})}else Ri(Ta,new A.Z(_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(ir,Kr,Ii)}else Ri(br,new A.Z(_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Ri(sn,ir){Un.trigger(fr.LICENSE_REQUEST_COMPLETE,{data:sn,error:ir})}function Zu(sn,ir,Tr,Ai,Wr,Ii){var Kr=new XMLHttpRequest;if(on.get().streaming.cmcd&&on.get().streaming.cmcd.enabled&&on.get().streaming.cmcd.mode===Q.Z.CMCD_MODE_QUERY){var br=vn.getQueryParameter({url:sn.url,type:Y.w.LICENSE});br&&(sn.url=$.Z.addAditionalQueryParameterToUrl(sn.url,[br]))}for(var ci in Kr.open(sn.method,sn.url,!0),Kr.responseType=sn.responseType,Kr.withCredentials=sn.withCredentials,Tr>0&&(Kr.timeout=Tr),sn.headers)Kr.setRequestHeader(ci,sn.headers[ci]);if(on.get().streaming.cmcd&&on.get().streaming.cmcd.enabled&&on.get().streaming.cmcd.mode===Q.Z.CMCD_MODE_HEADER){var Br=vn.getHeaderParameters({url:sn.url,type:Y.w.LICENSE});if(Br)for(var Ci in Br){var yo=Br[Ci];yo&&Kr.setRequestHeader(Ci,yo)}}var oa=function(){ir--;var yi=isNaN(on.get().streaming.retryIntervals[Y.w.LICENSE])?1e3:on.get().streaming.retryIntervals[Y.w.LICENSE];Ln=setTimeout(function(){Zu(sn,ir,Tr,Ai,Wr,Ii)},yi)};Kr.onload=function(){Kn=null,this.status>=200&&this.status<=299||ir<=0?Ai(this):(pn.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+ir),oa())},Kr.ontimeout=Kr.onerror=function(){Kn=null,ir<=0?Ii(this):(pn.warn("License request network request failed . Retrying it... Pending retries: "+ir),oa())},Kr.onabort=function(){Wr(this)},Un.trigger(fr.LICENSE_REQUEST_SENDING,{url:sn.url,headers:sn.headers,payload:sn.data,sessionId:sn.sessionId}),Kn=Kr,Kr.send(sn.data)}function vu(){Kn&&(Kn.onloadend=Kn.onerror=Kn.onprogress=void 0,Kn.abort(),Kn=null),Ln&&(clearTimeout(Ln),Ln=null)}function Zs(sn,ir){if(ir)for(var Tr in ir)sn[Tr]=ir[Tr]}function Rl(sn,ir,Tr,Ai,Wr){var Ii="NONE",Kr=null;sn.response&&(Ii=Wr.getErrorResponse(sn.response,Tr,Ai),Kr={serverResponse:sn.response||null,responseCode:sn.status||null,responseText:sn.statusText||null}),Ri(ir,new A.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Tr+' update, XHR complete. status is "'+sn.statusText+'" ('+sn.status+"), readyState is "+sn.readyState+".  Response is "+Ii,Kr))}function qu(sn,ir){return sn?sn.reduce(function(Tr,Ai){return Tr.then(function(){return Ai(ir)})},Promise.resolve()):Promise.resolve()}function Gu(sn,ir){if(!on.get().streaming.protection.ignoreEmeEncryptedEvent){if(pn.debug("DRM: onNeedKey"),sn.key.initDataType!=="cenc")return void pn.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+sn.key.initDataType);if(Xt.length===0&&(pn.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(ir=ir===void 0?1:ir+1)<5))return void dn.push(setTimeout(function(){Gu(sn,ir)},500));var Tr=sn.key.initData;if(ArrayBuffer.isView(Tr)&&(Tr=Tr.buffer),Mn){var Ai=E.getPSSHForKeySystem(Mn,Tr);if(Ai&&vi(Ai))return}pn.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(Tr)));var Wr=fn.getSupportedKeySystemsFromSegmentPssh(Tr,Ot,Yt);if(Wr.length===0)return void pn.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Ii){At.push(Ii),xr(Ii,!1)})(Wr)}}return gn={initializeForMedia:function(sn){if(!sn)throw new Error("mediaInfo can not be null or undefined");ur(),Xt.push(sn)},clearMediaInfoArray:function(){Xt=[]},handleKeySystemFromManifest:function(){if(Xt&&Xt.length!==0){var sn=[];Xt.forEach(function(ir){var Tr=fn.getSupportedKeySystemsFromContentProtection(ir.contentProtection,Ot,Yt);Tr.length>0&&(sn.length===0&&(sn=Tr),At.push(Tr))}),sn&&sn.length>0&&xr(sn,!0)}},createKeySession:ni,loadKeySession:Ui,removeKeySession:function(sn){ur(),Xe.removeKeySession(sn)},closeKeySession:function(sn){ur(),Xe.closeKeySession(sn)},setServerCertificate:function(sn){ur(),Xe.setServerCertificate(sn)},setMediaElement:ri,setSessionType:function(sn){Yt=sn},setRobustnessLevel:function(sn){wn=sn},setProtectionData:function(sn){Ot=sn,fn.setProtectionData(sn)},getSupportedKeySystemsFromContentProtection:function(sn){return ur(),fn.getSupportedKeySystemsFromContentProtection(sn,Ot,Yt)},getKeySystems:function(){return fn?fn.getKeySystems():[]},setKeySystems:function(sn){fn&&fn.setKeySystems(sn)},stop:function(){vu(),Xe&&Xe.stop()},reset:function(){Un.off(fr.INTERNAL_KEY_MESSAGE,Yo,gn),Un.off(fr.INTERNAL_KEY_STATUS_CHANGED,Ao,gn),ur(),vu(),ri(null),Mn=null,zn=!1,Xe&&(Xe.reset(),Xe=null),dn.forEach(function(sn){return clearTimeout(sn)}),dn=[],Xt=[],At=[]}},pn=Ir.getLogger(gn),At=[],Xt=[],Yt="temporary",wn="",Kn=null,Ln=null,Un.on(fr.INTERNAL_KEY_MESSAGE,Yo,gn),Un.on(fr.INTERNAL_KEY_STATUS_CHANGED,Ao,gn),gn}X.__dashjs_factory_name="ProtectionController";var ce=se.Z.getClassFactory(X),oe=function ln(gn,pn){(function(At,Xt){if(!(At instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.keyID=gn,this.key=pn};function me(ln,gn){for(var pn=0;pn<gn.length;pn++){var At=gn[pn];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),Object.defineProperty(ln,At.key,At)}}var be=function(){function ln(At,Xt){if(function(Ot,Yt){if(!(Ot instanceof Yt))throw new TypeError("Cannot call a class as a function")}(this,ln),Xt&&Xt!=="persistent"&&Xt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=At,this.type=Xt}var gn,pn;return gn=ln,(pn=[{key:"toJWK",value:function(){var At,Xt=this.keyPairs.length,Ot={keys:[]};for(At=0;At<Xt;At++){var Yt={kty:"oct",alg:"A128KW",kid:this.keyPairs[At].keyID,k:this.keyPairs[At].key};Ot.keys.push(Yt)}this.type&&(Ot.type=this.type);var wn=JSON.stringify(Ot),Mn=wn.length,zn=new ArrayBuffer(Mn),Kn=new Uint8Array(zn);for(At=0;At<Mn;At++)Kn[At]=wn.charCodeAt(At);return zn}}])&&me(gn.prototype,pn),ln}();function Je(ln,gn){for(var pn=0;pn<gn.length;pn++){var At=gn[pn];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),Object.defineProperty(ln,At.key,At)}}var we=new(function(){function ln(){(function(At,Xt){if(!(At instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.init()}var gn,pn;return gn=ln,(pn=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Je(gn.prototype,pn),ln}()),qe="e2719d58-a985-b3c9-781a-b030af78d30e",st=we.CLEARKEY_KEYSTEM_STRING,ft="urn:uuid:"+qe;function Ce(ln){var gn=(ln=ln||{}).BASE64;return{uuid:qe,schemeIdURI:ft,systemString:st,getInitData:function(pn,At){try{var Xt=E.parseInitDataFromContentProtection(pn,gn);if(!Xt&&At){var Ot={kids:[function(Yt){try{var wn=Yt.replace(/-/g,"");return(wn=btoa(wn.match(/\w{2}/g).map(function(Mn){return String.fromCharCode(parseInt(Mn,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(Mn){return null}}(At["cenc:default_KID"])]};Xt=new TextEncoder().encode(JSON.stringify(Ot))}return Xt}catch(Yt){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(pn){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(pn))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(pn,At){var Xt=null;if(pn){for(var Ot=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(At))),Yt=[],wn=0;wn<Ot.kids.length;wn++){var Mn=Ot.kids[wn],zn=pn.clearkeys&&pn.clearkeys.hasOwnProperty(Mn)?pn.clearkeys[Mn]:null;if(!zn)throw new Error("DRM: ClearKey keyID ("+Mn+") is not known!");Yt.push(new oe(Mn,zn))}Xt=new be(Yt)}return Xt}}}Ce.__dashjs_factory_name="KeySystemClearKey";var He=dashjs.FactoryMaker.getSingletonFactory(Ce),vt="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Re=we.CLEARKEY_KEYSTEM_STRING,Ye="urn:uuid:"+vt;function ot(ln){var gn,pn=ln.BASE64,At=ln.debug.getLogger(gn);return{uuid:vt,schemeIdURI:Ye,systemString:Re,getInitData:function(Xt){return E.parseInitDataFromContentProtection(Xt,pn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(Xt){return new Uint8Array(Xt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(Xt,Ot){var Yt=null;if(Xt){for(var wn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Ot))),Mn=[],zn=0;zn<wn.kids.length;zn++){var Kn=wn.kids[zn],Ln=Xt.clearkeys&&Xt.clearkeys.hasOwnProperty(Kn)?Xt.clearkeys[Kn]:null;if(!Ln)throw new Error("DRM: ClearKey keyID ("+Kn+") is not known!");Mn.push(new oe(Kn,Ln))}Yt=new be(Mn),At.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return Yt}}}ot.__dashjs_factory_name="KeySystemW3CClearKey";var Ht=dashjs.FactoryMaker.getSingletonFactory(ot),Bt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Et=we.WIDEVINE_KEYSTEM_STRING,Dt="urn:uuid:"+Bt;function Ne(ln){var gn=(ln=ln||{}).BASE64;return{uuid:Bt,schemeIdURI:Dt,systemString:Et,getInitData:function(pn){return E.parseInitDataFromContentProtection(pn,gn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(pn){return new Uint8Array(pn)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Ne.__dashjs_factory_name="KeySystemWidevine";var ne=dashjs.FactoryMaker.getSingletonFactory(Ne),Be="9a04f079-9840-4286-ab92-e65be0885f95",L=we.PLAYREADY_KEYSTEM_STRING,D="urn:uuid:"+Be;function G(ln){var gn="utf-16",pn=(ln=ln||{}).BASE64,At=ln.settings;function Xt(){if(!pn||!pn.hasOwnProperty("decodeArray")||!pn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Be,schemeIdURI:D,systemString:L,getInitData:function(Ot){var Yt,wn,Mn,zn,Kn,Ln=new Uint8Array([112,115,115,104,0,0,0,0]),fn=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),Xe=0,Un=null;if(Xt(),!Ot)return null;if("pssh"in Ot)return E.parseInitDataFromContentProtection(Ot,pn);if("pro"in Ot)Un=pn.decodeArray(Ot.pro.__text);else{if(!("prheader"in Ot))return null;Un=pn.decodeArray(Ot.prheader.__text)}return Yt=Un.length,wn=4+Ln.length+fn.length+4+Yt,Mn=new ArrayBuffer(wn),zn=new Uint8Array(Mn),(Kn=new DataView(Mn)).setUint32(Xe,wn),Xe+=4,zn.set(Ln,Xe),Xe+=Ln.length,zn.set(fn,Xe),Xe+=fn.length,Kn.setUint32(Xe,Yt),Xe+=4,zn.set(Un,Xe),Xe+=Yt,zn.buffer},getRequestHeadersFromMessage:function(Ot){var Yt,wn,Mn={},zn=new DOMParser;if(At&&At.get().streaming.protection.detectPlayreadyMessageFormat&&gn==="utf-16"&&Ot&&Ot.byteLength%2==1)return Mn["Content-Type"]="text/xml; charset=utf-8",Mn;var Kn=gn==="utf-16"?new Uint16Array(Ot):new Uint8Array(Ot);Yt=String.fromCharCode.apply(null,Kn);for(var Ln=(wn=zn.parseFromString(Yt,"application/xml")).getElementsByTagName("name"),fn=wn.getElementsByTagName("value"),Xe=0;Xe<Ln.length;Xe++)Mn[Ln[Xe].childNodes[0].nodeValue]=fn[Xe].childNodes[0].nodeValue;return Mn.hasOwnProperty("Content")&&(Mn["Content-Type"]=Mn.Content,delete Mn.Content),Mn.hasOwnProperty("Content-Type")||(Mn["Content-Type"]="text/xml; charset=utf-8"),Mn},getLicenseRequestFromMessage:function(Ot){var Yt=null,wn=new DOMParser;if(At&&At.get().streaming.protection.detectPlayreadyMessageFormat&&gn==="utf-16"&&Ot&&Ot.byteLength%2==1)return Ot;var Mn=gn==="utf-16"?new Uint16Array(Ot):new Uint8Array(Ot);Xt();var zn=String.fromCharCode.apply(null,Mn),Kn=wn.parseFromString(zn,"application/xml");if(!Kn.getElementsByTagName("PlayReadyKeyMessage")[0])return Ot;var Ln=Kn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Ln&&(Yt=pn.decode(Ln)),Yt},getLicenseServerURLFromInitData:function(Ot){if(Ot)for(var Yt=new DataView(Ot),wn=Yt.getUint16(4,!0),Mn=6,zn=new DOMParser,Kn=0;Kn<wn;Kn++){var Ln=Yt.getUint16(Mn,!0);Mn+=2;var fn=Yt.getUint16(Mn,!0);if(Mn+=2,Ln===1){var Xe=Ot.slice(Mn,Mn+fn),Un=String.fromCharCode.apply(null,new Uint16Array(Xe)),fr=zn.parseFromString(Un,"application/xml");if(fr.getElementsByTagName("LA_URL")[0]){var Ir=fr.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Ir)return Ir}if(fr.getElementsByTagName("LUI_URL")[0]){var Vr=fr.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Vr)return Vr}}else Mn+=fn}return null},getCDMData:function(Ot){var Yt,wn,Mn,zn;if(Xt(),!Ot)return null;for(Yt=[],zn=0;zn<Ot.length;++zn)Yt.push(Ot.charCodeAt(zn)),Yt.push(0);for(Yt=String.fromCharCode.apply(null,Yt),Yt=pn.encode(Yt),wn='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",Yt),Mn=[],zn=0;zn<wn.length;++zn)Mn.push(wn.charCodeAt(zn)),Mn.push(0);return new Uint8Array(Mn).buffer},setPlayReadyMessageFormat:function(Ot){if(Ot!=="utf-8"&&Ot!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');gn=Ot}}}G.__dashjs_factory_name="KeySystemPlayReady";var K=dashjs.FactoryMaker.getSingletonFactory(G);function ge(ln){var gn=(ln=ln||{}).BASE64,pn={};return pn[we.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(At){return gn.decodeArray(At.license)},getErrorResponse:function(At){return At}},pn[we.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(At){return At},getErrorResponse:function(At){return String.fromCharCode.apply(null,new Uint8Array(At))}},{getServerURLFromMessage:function(At){return At},getHTTPMethod:function(){return"POST"},getResponseType:function(At){return pn[At].responseType},getLicenseMessage:function(At,Xt){return function(){if(!gn||!gn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),pn[Xt].getLicenseMessage(At)},getErrorResponse:function(At,Xt){return pn[Xt].getErrorResponse(At)}}}ge.__dashjs_factory_name="DRMToday";var pe=dashjs.FactoryMaker.getSingletonFactory(ge);function Ke(){var ln="http://schemas.xmlsoap.org/soap/envelope/";function gn(Xt){var Ot=String.fromCharCode.apply(null,new Uint8Array(Xt));return decodeURIComponent(escape(Ot))}function pn(Xt){if(window.DOMParser){var Ot=gn(Xt),Yt=new window.DOMParser().parseFromString(Ot,"text/xml"),wn=Yt?Yt.getElementsByTagNameNS(ln,"Envelope")[0]:null,Mn=wn?wn.getElementsByTagNameNS(ln,"Body")[0]:null;if(Mn&&Mn.getElementsByTagNameNS(ln,"Fault")[0])return null}return Xt}function At(Xt){var Ot="",Yt="",wn="",Mn=-1,zn=-1;if(window.DOMParser){var Kn=gn(Xt),Ln=new window.DOMParser().parseFromString(Kn,"text/xml"),fn=Ln?Ln.getElementsByTagNameNS(ln,"Envelope")[0]:null,Xe=fn?fn.getElementsByTagNameNS(ln,"Body")[0]:null,Un=Xe?Xe.getElementsByTagNameNS(ln,"Fault")[0]:null,fr=Un?Un.getElementsByTagName("detail")[0]:null,Ir=fr?fr.getElementsByTagName("Exception")[0]:null,Vr=null;if(Un===null)return Kn;Ot=(Vr=Un.getElementsByTagName("faultstring")[0].firstChild)?Vr.nodeValue:null,Ir!==null&&(Yt=(Vr=Ir.getElementsByTagName("StatusCode")[0])?Vr.firstChild.nodeValue:null,Mn=(wn=(Vr=Ir.getElementsByTagName("Message")[0])?Vr.firstChild.nodeValue:null)?wn.lastIndexOf("[")+1:-1,zn=wn?wn.indexOf("]"):-1,wn=wn?wn.substring(Mn,zn):"")}var er="code: ".concat(Yt,", name: ").concat(Ot);return wn&&(er+=", message: ".concat(wn)),er}return{getServerURLFromMessage:function(Xt){return Xt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(Xt){return pn.call(this,Xt)},getErrorResponse:function(Xt){return At.call(this,Xt)}}}Ke.__dashjs_factory_name="PlayReady";var wt=se.Z.getSingletonFactory(Ke);function lt(){return{getServerURLFromMessage:function(ln){return ln},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(ln){return ln},getErrorResponse:function(ln){return String.fromCharCode.apply(null,new Uint8Array(ln))}}}lt.__dashjs_factory_name="Widevine";var ut=dashjs.FactoryMaker.getSingletonFactory(lt);function nt(){return{getServerURLFromMessage:function(ln){return ln},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(ln){if(!ln.hasOwnProperty("keys"))return null;for(var gn=[],pn=0;pn<ln.keys.length;pn++){var At=ln.keys[pn],Xt=At.kid.replace(/=/g,""),Ot=At.k.replace(/=/g,"");gn.push(new oe(Xt,Ot))}return new be(gn)},getErrorResponse:function(ln){return String.fromCharCode.apply(null,new Uint8Array(ln))}}}nt.__dashjs_factory_name="ClearKey";var ht=dashjs.FactoryMaker.getSingletonFactory(nt);function _t(){var ln,gn,pn,At,Xt,Ot,Yt,wn,Mn=this.context;function zn(fn,Xe){return Xe&&fn in Xe?Xe[fn]:null}function Kn(fn,Xe){return fn&&fn.sessionId?fn.sessionId:Xe&&Xe.sessionId?Xe.sessionId:null}function Ln(fn,Xe){return fn&&fn.sessionType?fn.sessionType:Xe}return ln={initialize:function(){var fn;At=[],fn=K(Mn).getInstance({BASE64:Xt,settings:Ot}),At.push(fn),fn=ne(Mn).getInstance({BASE64:Xt}),At.push(fn),fn=He(Mn).getInstance({BASE64:Xt}),At.push(fn),Yt=fn,fn=Ht(Mn).getInstance({BASE64:Xt,debug:gn}),At.push(fn),wn=fn},setProtectionData:function(fn){for(var Xe,Un,fr=0;fr<At.length;fr++){var Ir=At[fr];Ir.hasOwnProperty("init")&&Ir.init((Xe=Ir.systemString,Un=void 0,Un=null,fn&&(Un=Xe in fn?fn[Xe]:null),Un))}},isClearKey:function(fn){return fn===Yt||fn===wn},initDataEquals:function(fn,Xe){if(fn.byteLength===Xe.byteLength){for(var Un=new Uint8Array(fn),fr=new Uint8Array(Xe),Ir=0;Ir<Un.length;Ir++)if(Un[Ir]!==fr[Ir])return!1;return!0}return!1},getKeySystems:function(){return At},setKeySystems:function(fn){At=fn},getKeySystemBySystemString:function(fn){for(var Xe=0;Xe<At.length;Xe++)if(At[Xe].systemString===fn)return At[Xe];return null},getSupportedKeySystemsFromContentProtection:function(fn,Xe,Un){var fr,Ir,Vr,er,dn=[];if(fn){var vn=E.findCencContentProtection(fn);for(Vr=0;Vr<At.length;++Vr){var on=zn((Ir=At[Vr]).systemString,Xe);for(er=0;er<fn.length;++er)if((fr=fn[er]).schemeIdUri.toLowerCase()===Ir.schemeIdURI){var tr=Ir.getInitData(fr,vn);dn.push({ks:At[Vr],keyId:fr.keyId,initData:tr,protData:on,cdmData:Ir.getCDMData(on?on.cdmData:null),sessionId:Kn(on,fr),sessionType:Ln(on,Un)})}}}return dn},getSupportedKeySystemsFromSegmentPssh:function(fn,Xe,Un){for(var fr,Ir=[],Vr=E.parsePSSHList(fn),er=0;er<At.length;++er){var dn=zn((fr=At[er]).systemString,Xe);fr.uuid in Vr&&Ir.push({ks:fr,initData:Vr[fr.uuid],protData:dn,cdmData:fr.getCDMData(dn?dn.cdmData:null),sessionId:Kn(dn),sessionType:Ln(dn,Un)})}return Ir},getLicenseServerModelInstance:function(fn,Xe,Un){if(Un==="license-release"||Un==="individualization-request")return null;var fr=null;return Xe&&Xe.hasOwnProperty("drmtoday")?fr=pe(Mn).getInstance({BASE64:Xt}):fn.systemString===we.WIDEVINE_KEYSTEM_STRING?fr=ut(Mn).getInstance():fn.systemString===we.PLAYREADY_KEYSTEM_STRING?fr=wt(Mn).getInstance():fn.systemString===we.CLEARKEY_KEYSTEM_STRING&&(fr=ht(Mn).getInstance()),fr},processClearKeyLicenseRequest:function(fn,Xe,Un){try{return fn.getClearKeysFromProtectionData(Xe,Un)}catch(fr){return pn.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(fn){fn&&(fn.debug&&(gn=fn.debug,pn=gn.getLogger(ln)),fn.BASE64&&(Xt=fn.BASE64),fn.settings&&(Ot=fn.settings))}},ln}_t.__dashjs_factory_name="ProtectionKeyController";var Tt=dashjs.FactoryMaker.getSingletonFactory(_t);function Mt(ln){return Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gn){return typeof gn}:function(gn){return gn&&typeof Symbol=="function"&&gn.constructor===Symbol&&gn!==Symbol.prototype?"symbol":typeof gn},Mt(ln)}function _n(ln,gn){return _n=Object.setPrototypeOf||function(pn,At){return pn.__proto__=At,pn},_n(ln,gn)}function rn(ln,gn){return!gn||Mt(gn)!=="object"&&typeof gn!="function"?function(pn){if(pn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pn}(ln):gn}function cn(ln){return cn=Object.setPrototypeOf?Object.getPrototypeOf:function(gn){return gn.__proto__||Object.getPrototypeOf(gn)},cn(ln)}var Ft=new(function(ln){(function(Ot,Yt){if(typeof Yt!="function"&&Yt!==null)throw new TypeError("Super expression must either be null or a function");Ot.prototype=Object.create(Yt&&Yt.prototype,{constructor:{value:Ot,writable:!0,configurable:!0}}),Yt&&_n(Ot,Yt)})(Xt,ln);var gn,pn,At=(gn=Xt,pn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Ot){return!1}}(),function(){var Ot,Yt=cn(gn);if(pn){var wn=cn(this).constructor;Ot=Reflect.construct(Yt,arguments,wn)}else Ot=Yt.apply(this,arguments);return rn(this,Ot)});function Xt(){var Ot;return function(Yt,wn){if(!(Yt instanceof wn))throw new TypeError("Cannot call a class as a function")}(this,Xt),(Ot=At.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",Ot.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",Ot.KEY_ADDED="public_keyAdded",Ot.KEY_ERROR="public_keyError",Ot.KEY_MESSAGE="public_keyMessage",Ot.KEY_SESSION_CLOSED="public_keySessionClosed",Ot.KEY_SESSION_CREATED="public_keySessionCreated",Ot.KEY_SESSION_REMOVED="public_keySessionRemoved",Ot.KEY_STATUSES_CHANGED="public_keyStatusesChanged",Ot.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",Ot.KEY_SYSTEM_SELECTED="public_keySystemSelected",Ot.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",Ot.LICENSE_REQUEST_SENDING="public_licenseRequestSending",Ot.NEED_KEY="needkey",Ot.PROTECTION_CREATED="public_protectioncreated",Ot.PROTECTION_DESTROYED="public_protectiondestroyed",Ot.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",Ot.TEARDOWN_COMPLETE="protectionTeardownComplete",Ot.VIDEO_ELEMENT_SELECTED="videoElementSelected",Ot.KEY_SESSION_UPDATED="public_keySessionUpdated",Ot}return Xt}(w(8342).Z)),Gn=function ln(gn,pn){(function(At,Xt){if(!(At instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.initData=gn,this.initDataType=pn},Sr=function ln(gn,pn,At,Xt){(function(Ot,Yt){if(!(Ot instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.sessionToken=gn,this.message=pn,this.defaultURL=At,this.messageType=Xt||"license-request"},Gr=function ln(gn,pn){(function(At,Xt){if(!(At instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.keySystem=gn,this.ksConfiguration=pn},gr={};function fi(ln){ln=ln||{};var gn,pn,At,Xt,Ot,Yt,wn,Mn,zn=this.context,Kn=ln.eventBus,Ln=ln.events,fn=ln.debug;function Xe(dn,vn,on,tr){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var ur="Insecure origins are not allowed";return Kn.trigger(Ln.KEY_SYSTEM_ACCESS_COMPLETE,{error:ur}),void tr({error:ur})}var xr=dn[vn].protData&&dn[vn].protData.systemStringPriority?dn[vn].protData.systemStringPriority:null,Rr=dn[vn].configs,di=dn[vn].ks,Ui=di.systemString;(function(ni,li){return new Promise(function(vi,ri){Un(ni,li,0,vi,ri)})})(xr||(gr[Ui]?gr[Ui]:[Ui]),Rr).then(function(ni){var li=typeof ni.getConfiguration=="function"?ni.getConfiguration():null,vi=new Gr(di,li);vi.mksa=ni,Kn.trigger(Ln.KEY_SYSTEM_ACCESS_COMPLETE,{data:vi}),on({data:vi})}).catch(function(ni){if(vn+1<dn.length)Xe(dn,vn+1,on,tr);else{var li="Key system access denied! ";Kn.trigger(Ln.KEY_SYSTEM_ACCESS_COMPLETE,{error:li+ni.message}),tr({error:li+ni.message})}})}function Un(dn,vn,on,tr,ur){var xr=dn[on];pn.debug("Requesting key system access for system string ".concat(xr)),navigator.requestMediaKeySystemAccess(xr,vn).then(function(Rr){Rr.selectedSystemString=xr,tr(Rr)}).catch(function(Rr){on+1<dn.length?Un(dn,vn,on+1,tr,ur):ur(Rr)})}function fr(dn){if(!dn||!dn.session)return Promise.resolve;var vn=dn.session;return vn.removeEventListener("keystatuseschange",dn),vn.removeEventListener("message",dn),vn.close()}function Ir(dn){for(var vn=0;vn<Yt.length;vn++)if(Yt[vn]===dn){Yt.splice(vn,1);break}}function Vr(dn){var vn,on;return dn&&dn.length>0&&(dn[0]&&(typeof dn[0]=="string"?vn=dn[0]:on=dn[0]),dn[1]&&(typeof dn[1]=="string"?vn=dn[1]:on=dn[1])),{status:vn,keyId:on}}function er(dn,vn){var on={session:dn,keyId:vn.keyId,initData:vn.initData,sessionId:vn.sessionId,sessionType:vn.sessionType,handleEvent:function(tr){switch(tr.type){case"keystatuseschange":Kn.trigger(Ln.KEY_STATUSES_CHANGED,{data:this}),tr.target.keyStatuses.forEach(function(){var xr=Vr(arguments);xr.status==="expired"?Kn.trigger(Ln.INTERNAL_KEY_STATUS_CHANGED,{error:new A.Z(_.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):Kn.trigger(Ln.INTERNAL_KEY_STATUS_CHANGED,xr)});break;case"message":var ur=ArrayBuffer.isView(tr.message)?tr.message.buffer:tr.message;Kn.trigger(Ln.INTERNAL_KEY_MESSAGE,{data:new Sr(this,ur,void 0,tr.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return dn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return dn.expiration},getKeyStatuses:function(){return dn.keyStatuses},getUsable:function(){var tr=!1;return dn.keyStatuses.forEach(function(){var ur=Vr(arguments);ur.status==="usable"&&(tr=!0)}),tr}};return dn.addEventListener("keystatuseschange",on),dn.addEventListener("message",on),dn.closed.then(function(){Ir(on),pn.debug("DRM: Session closed.  SessionID = "+on.getSessionId()),Kn.trigger(Ln.KEY_SESSION_CLOSED,{data:on.getSessionId()})}),Yt.push(on),on}return gn={getAllInitData:function(){for(var dn=[],vn=0;vn<Yt.length;vn++)Yt[vn].initData&&dn.push(Yt[vn].initData);return dn},getSessions:function(){return Yt},requestKeySystemAccess:function(dn){return new Promise(function(vn,on){Xe(dn,0,vn,on)})},selectKeySystem:function(dn){return new Promise(function(vn,on){dn.mksa.createMediaKeys().then(function(tr){return At=dn.keySystem,Ot=tr,Xt?Xt.setMediaKeys(Ot):Promise.resolve()}).then(function(){vn(At)}).catch(function(){on({error:"Error selecting keys system ("+dn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(dn){Xt!==dn&&(Xt&&(Xt.removeEventListener("encrypted",wn),Xt.setMediaKeys&&Xt.setMediaKeys(null)),(Xt=dn)&&(Xt.addEventListener("encrypted",wn),Xt.setMediaKeys&&Ot&&Xt.setMediaKeys(Ot)))},setServerCertificate:function(dn){if(!At||!Ot)throw new Error("Can not set server certificate until you have selected a key system");Ot.setServerCertificate(dn).then(function(){pn.info("DRM: License server certificate successfully updated."),Kn.trigger(Ln.SERVER_CERTIFICATE_UPDATED)}).catch(function(vn){Kn.trigger(Ln.SERVER_CERTIFICATE_UPDATED,{error:new A.Z(_.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+vn.name)})})},createKeySession:function(dn){if(!At||!Ot)throw new Error("Can not create sessions until you have selected a key system");var vn=Ot.createSession(dn.sessionType),on=er(vn,dn),tr=At.systemString===we.CLEARKEY_KEYSTEM_STRING&&(dn.initData||dn.protData&&dn.protData.clearkeys)?we.INITIALIZATION_DATA_TYPE_KEYIDS:we.INITIALIZATION_DATA_TYPE_CENC;vn.generateRequest(tr,dn.initData).then(function(){pn.debug("DRM: Session created.  SessionID = "+on.getSessionId()),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:on})}).catch(function(ur){Ir(on),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:null,error:new A.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+ur.name)})})},updateKeySession:function(dn,vn){var on=dn.session;Mn.isClearKey(At)&&(vn=vn.toJWK()),on.update(vn).then(function(){Kn.trigger(Ln.KEY_SESSION_UPDATED)}).catch(function(tr){Kn.trigger(Ln.KEY_ERROR,{error:new A.Z(_.MEDIA_KEYERR_CODE,"Error sending update() message! "+tr.name,dn)})})},loadKeySession:function(dn){if(!At||!Ot)throw new Error("Can not load sessions until you have selected a key system");for(var vn=dn.sessionId,on=0;on<Yt.length;on++)if(vn===Yt[on].sessionId)return void pn.warn("DRM: Ignoring session ID because we have already seen it!");var tr=Ot.createSession(dn.sessionType),ur=er(tr,dn);tr.load(vn).then(function(xr){xr?(pn.debug("DRM: Session loaded.  SessionID = "+ur.getSessionId()),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:ur})):(Ir(ur),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:null,error:new A.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+vn+")")}))}).catch(function(xr){Ir(ur),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:null,error:new A.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+vn+")! "+xr.name)})})},removeKeySession:function(dn){dn.session.remove().then(function(){pn.debug("DRM: Session removed.  SessionID = "+dn.getSessionId()),Kn.trigger(Ln.KEY_SESSION_REMOVED,{data:dn.getSessionId()})},function(vn){Kn.trigger(Ln.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+dn.getSessionId()+"). "+vn.name})})},closeKeySession:function(dn){fr(dn).catch(function(vn){Ir(dn),Kn.trigger(Ln.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+dn.getSessionId()+") "+vn.name})})},stop:function(){for(var dn,vn=0;vn<Yt.length;vn++)(dn=Yt[vn]).getUsable()||(fr(dn),Ir(dn))},reset:function(){var dn,vn=Yt.length;vn!==0?function(){for(var on=function(ur){Ir(ur),Yt.length===0&&(Xt?(Xt.removeEventListener("encrypted",wn),Xt.setMediaKeys(null).then(function(){Kn.trigger(Ln.TEARDOWN_COMPLETE)})):Kn.trigger(Ln.TEARDOWN_COMPLETE))},tr=0;tr<vn;tr++)(function(ur){fr(dn),on(ur)})(dn=Yt[tr])}():Kn.trigger(Ln.TEARDOWN_COMPLETE)}},pn=fn.getLogger(gn),At=null,Xt=null,Ot=null,Yt=[],Mn=Tt(zn).getInstance(),wn={handleEvent:function(dn){if(dn.type==="encrypted"&&dn.initData){var vn=ArrayBuffer.isView(dn.initData)?dn.initData.buffer:dn.initData;Kn.trigger(Ln.NEED_KEY,{key:new Gn(vn,dn.initDataType)})}}},gn}gr[we.PLAYREADY_KEYSTEM_STRING]=[we.PLAYREADY_KEYSTEM_STRING,we.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],gr[we.WIDEVINE_KEYSTEM_STRING]=[we.WIDEVINE_KEYSTEM_STRING],gr[we.CLEARKEY_KEYSTEM_STRING]=[we.CLEARKEY_KEYSTEM_STRING],fi.__dashjs_factory_name="ProtectionModel_21Jan2015";var ao=dashjs.FactoryMaker.getClassFactory(fi);function Hr(ln){ln=ln||{};var gn,pn,At,Xt,Ot,Yt,wn,Mn,zn,Kn=this.context,Ln=ln.eventBus,fn=ln.events,Xe=ln.debug,Un=ln.api;function fr(){try{for(var er=0;er<wn.length;er++)Ir(wn[er]);At&&At.removeEventListener(Un.needkey,Mn),Ln.trigger(fn.TEARDOWN_COMPLETE)}catch(dn){Ln.trigger(fn.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+dn.message})}}function Ir(er){var dn=er.session;dn.removeEventListener(Un.error,er),dn.removeEventListener(Un.message,er),dn.removeEventListener(Un.ready,er),dn.removeEventListener(Un.close,er);for(var vn=0;vn<wn.length;vn++)if(wn[vn]===er){wn.splice(vn,1);break}dn[Un.release]()}function Vr(){var er=null,dn=function(){At.removeEventListener("loadedmetadata",er),At[Un.setMediaKeys](Ot),Ln.trigger(fn.VIDEO_ELEMENT_SELECTED)};At.readyState>=1?dn():(er=dn.bind(this),At.addEventListener("loadedmetadata",er))}return gn={getAllInitData:function(){for(var er=[],dn=0;dn<wn.length;dn++)er.push(wn[dn].initData);return er},getSessions:function(){return wn},requestKeySystemAccess:function(er){return new Promise(function(dn,vn){for(var on=!1,tr=0;tr<er.length;tr++)for(var ur=er[tr].ks.systemString,xr=er[tr].configs,Rr=null,di=null,Ui=0;Ui<xr.length;Ui++){var ni=xr[Ui].audioCapabilities,li=xr[Ui].videoCapabilities;if(ni&&ni.length!==0){Rr=[];for(var vi=0;vi<ni.length;vi++)window[Un.MediaKeys].isTypeSupported(ur,ni[vi].contentType)&&Rr.push(ni[vi])}if(li&&li.length!==0){di=[];for(var ri=0;ri<li.length;ri++)window[Un.MediaKeys].isTypeSupported(ur,li[ri].contentType)&&di.push(li[ri])}if(!(!Rr&&!di||Rr&&Rr.length===0||di&&di.length===0)){on=!0;var vs=new P(Rr,di),Ao=zn.getKeySystemBySystemString(ur),Yo=new Gr(Ao,vs);Ln.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{data:Yo}),dn({data:Yo});break}}if(!on){var Ri="Key system access denied! -- No valid audio/video content configurations detected!";Ln.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ri}),vn({error:Ri})}})},selectKeySystem:function(er){return new Promise(function(dn,vn){try{Ot=er.mediaKeys=new window[Un.MediaKeys](er.keySystem.systemString),Xt=er.keySystem,Yt=er,At&&Vr(),dn(Xt)}catch(on){vn({error:"Error selecting keys system ("+Xt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(er){At!==er&&(At&&At.removeEventListener(Un.needkey,Mn),(At=er)&&(At.addEventListener(Un.needkey,Mn),Ot&&Vr()))},createKeySession:function(er){if(!Xt||!Ot||!Yt)throw new Error("Can not create sessions until you have selected a key system");var dn=null;if(Yt.ksConfiguration.videoCapabilities&&Yt.ksConfiguration.videoCapabilities.length>0&&(dn=Yt.ksConfiguration.videoCapabilities[0]),dn===null&&Yt.ksConfiguration.audioCapabilities&&Yt.ksConfiguration.audioCapabilities.length>0&&(dn=Yt.ksConfiguration.audioCapabilities[0]),dn===null)throw new Error("Can not create sessions for unknown content types.");var vn=dn.contentType,on=Ot.createSession(vn,new Uint8Array(er.initData),er.cdmData?new Uint8Array(er.cdmData):null),tr=function(ur,xr){return{session:ur,keyId:xr.keyId,initData:xr.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Rr){switch(Rr.type){case Un.error:Ln.trigger(fn.KEY_ERROR,{error:new A.Z(_.MEDIA_KEYERR_CODE,"KeyError",this)});break;case Un.message:var di=ArrayBuffer.isView(Rr.message)?Rr.message.buffer:Rr.message;Ln.trigger(fn.INTERNAL_KEY_MESSAGE,{data:new Sr(this,di,Rr.destinationURL)});break;case Un.ready:pn.debug("DRM: Key added."),Ln.trigger(fn.KEY_ADDED);break;case Un.close:pn.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Ln.trigger(fn.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(on,er);on.addEventListener(Un.error,tr),on.addEventListener(Un.message,tr),on.addEventListener(Un.ready,tr),on.addEventListener(Un.close,tr),wn.push(tr),pn.debug("DRM: Session created.  SessionID = "+tr.getSessionId()),Ln.trigger(fn.KEY_SESSION_CREATED,{data:tr})},updateKeySession:function(er,dn){var vn=er.session;zn.isClearKey(Xt)?vn.update(new Uint8Array(dn.toJWK())):vn.update(new Uint8Array(dn)),Ln.trigger(fn.KEY_SESSION_UPDATED)},closeKeySession:Ir,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:fr,reset:fr},pn=Xe.getLogger(gn),At=null,Xt=null,Ot=null,Yt=null,wn=[],zn=Tt(Kn).getInstance(),Mn={handleEvent:function(er){if(er.type===Un.needkey&&er.initData){var dn=ArrayBuffer.isView(er.initData)?er.initData.buffer:er.initData;Ln.trigger(fn.NEED_KEY,{key:new Gn(dn,"cenc")})}}},gn}Hr.__dashjs_factory_name="ProtectionModel_3Feb2014";var so=dashjs.FactoryMaker.getClassFactory(Hr);function xi(ln){ln=ln||{};var gn,pn,At,Xt,Ot,Yt,wn,Mn,zn,Kn=this.context,Ln=ln.eventBus,fn=ln.events,Xe=ln.debug,Un=ln.api,fr=ln.errHandler;function Ir(){At&&dn();for(var vn=0;vn<wn.length;vn++)Vr(wn[vn]);Ln.trigger(fn.TEARDOWN_COMPLETE)}function Vr(vn){try{At[Un.cancelKeyRequest](Xt.systemString,vn.sessionId)}catch(on){Ln.trigger(fn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+vn.sessionId+") "+on.message})}}function er(vn,on){if(on&&vn){for(var tr=vn.length,ur=0;ur<tr;ur++)if(vn[ur].sessionId==on)return vn[ur];return null}return null}function dn(){At.removeEventListener(Un.keyerror,zn),At.removeEventListener(Un.needkey,zn),At.removeEventListener(Un.keymessage,zn),At.removeEventListener(Un.keyadded,zn)}return gn={getAllInitData:function(){for(var vn=[],on=0;on<Yt.length;on++)vn.push(Yt[on].initData);for(var tr=0;tr<wn.length;tr++)vn.push(wn[tr].initData);return vn},getSessions:function(){return wn.concat(Yt)},requestKeySystemAccess:function(vn){return new Promise(function(on,tr){var ur=At;ur||(ur=document.createElement("video"));for(var xr=!1,Rr=0;Rr<vn.length;Rr++)for(var di=vn[Rr].ks.systemString,Ui=vn[Rr].configs,ni=null,li=0;li<Ui.length;li++){var vi=Ui[li].videoCapabilities;if(vi&&vi.length!==0){ni=[];for(var ri=0;ri<vi.length;ri++)ur.canPlayType(vi[ri].contentType,di)!==""&&ni.push(vi[ri])}if(ni&&(!ni||ni.length!==0)){xr=!0;var vs=new P(null,ni),Ao=Ot.getKeySystemBySystemString(di),Yo=new Gr(Ao,vs);Ln.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{data:Yo}),on({data:Yo});break}}if(!xr){var Ri="Key system access denied! -- No valid audio/video content configurations detected!";Ln.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ri}),tr({error:Ri})}})},selectKeySystem:function(vn){return Xt=vn.keySystem,Promise.resolve(Xt)},setMediaElement:function(vn){if(At!==vn){if(At){dn();for(var on=0;on<wn.length;on++)Vr(wn[on]);wn=[]}(At=vn)&&(At.addEventListener(Un.keyerror,zn),At.addEventListener(Un.needkey,zn),At.addEventListener(Un.keymessage,zn),At.addEventListener(Un.keyadded,zn),Ln.trigger(fn.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(vn){if(!Xt)throw new Error("Can not create sessions until you have selected a key system");if(Mn||wn.length===0){var on={sessionId:null,keyId:vn.keyId,initData:vn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return Yt.push(on),At[Un.generateKeyRequest](Xt.systemString,new Uint8Array(vn.initData)),on}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(vn,on){var tr=vn.sessionId;if(Ot.isClearKey(Xt))for(var ur=0;ur<on.keyPairs.length;ur++)At[Un.addKey](Xt.systemString,on.keyPairs[ur].key,on.keyPairs[ur].keyID,tr);else At[Un.addKey](Xt.systemString,new Uint8Array(on),new Uint8Array(vn.initData),tr);Ln.trigger(fn.KEY_SESSION_UPDATED)},closeKeySession:Vr,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Ir,reset:Ir},pn=Xe.getLogger(gn),At=null,Xt=null,Yt=[],wn=[],Ot=Tt(Kn).getInstance(),zn={handleEvent:function(vn){var on=null;switch(vn.type){case Un.needkey:var tr=ArrayBuffer.isView(vn.initData)?vn.initData.buffer:vn.initData;Ln.trigger(fn.NEED_KEY,{key:new Gn(tr,"cenc")});break;case Un.keyerror:if((on=er(wn,vn.sessionId))||(on=er(Yt,vn.sessionId)),on){var ur=_.MEDIA_KEYERR_CODE,xr="";switch(vn.errorCode.code){case 1:ur=_.MEDIA_KEYERR_UNKNOWN_CODE,xr+="MEDIA_KEYERR_UNKNOWN - "+_.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:ur=_.MEDIA_KEYERR_CLIENT_CODE,xr+="MEDIA_KEYERR_CLIENT - "+_.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:ur=_.MEDIA_KEYERR_SERVICE_CODE,xr+="MEDIA_KEYERR_SERVICE - "+_.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:ur=_.MEDIA_KEYERR_OUTPUT_CODE,xr+="MEDIA_KEYERR_OUTPUT - "+_.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:ur=_.MEDIA_KEYERR_HARDWARECHANGE_CODE,xr+="MEDIA_KEYERR_HARDWARECHANGE - "+_.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:ur=_.MEDIA_KEYERR_DOMAIN_CODE,xr+="MEDIA_KEYERR_DOMAIN - "+_.MEDIA_KEYERR_DOMAIN_MESSAGE}xr+="  System Code = "+vn.systemCode,Ln.trigger(fn.KEY_ERROR,{error:new A.Z(ur,xr,on)})}else pn.error("No session token found for key error");break;case Un.keyadded:(on=er(wn,vn.sessionId))||(on=er(Yt,vn.sessionId)),on?(pn.debug("DRM: Key added."),Ln.trigger(fn.KEY_ADDED,{data:on})):pn.debug("No session token found for key added");break;case Un.keymessage:if((Mn=vn.sessionId!==null&&vn.sessionId!==void 0)?!(on=er(wn,vn.sessionId))&&Yt.length>0&&(on=Yt.shift(),wn.push(on),on.sessionId=vn.sessionId,Ln.trigger(fn.KEY_SESSION_CREATED,{data:on})):Yt.length>0&&(on=Yt.shift(),wn.push(on),Yt.length!==0&&fr.error(new A.Z(_.MEDIA_KEY_MESSAGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),on){var Rr=ArrayBuffer.isView(vn.message)?vn.message.buffer:vn.message;on.keyMessage=Rr,Ln.trigger(fn.INTERNAL_KEY_MESSAGE,{data:new Sr(on,Rr,vn.defaultURL)})}else pn.warn("No session token found for key message")}}},gn}xi.__dashjs_factory_name="ProtectionModel_01b";var Fi=dashjs.FactoryMaker.getClassFactory(xi),no=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],uo=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Ni(){var ln,gn=this.context;function pn(At,Xt){for(var Ot=0;Ot<Xt.length;Ot++){var Yt=Xt[Ot];if(typeof At[Yt[Object.keys(Yt)[0]]]=="function")return Yt}return null}return ln={createProtectionSystem:function(At){var Xt=null,Ot=Tt(gn).getInstance();Ot.setConfig({debug:At.debug,BASE64:At.BASE64,settings:At.settings}),Ot.initialize();var Yt=function(wn){var Mn=wn.debug,zn=Mn.getLogger(ln),Kn=wn.eventBus,Ln=wn.errHandler,fn=wn.videoModel?wn.videoModel.getElement():null;return fn&&fn.onencrypted===void 0||fn&&fn.mediaKeys===void 0?pn(fn,uo)?(zn.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),so(gn).create({debug:Mn,eventBus:Kn,events:wn.events,api:pn(fn,uo)})):pn(fn,no)?(zn.info("EME detected on this user agent! (ProtectionModel_01b)"),Fi(gn).create({debug:Mn,eventBus:Kn,errHandler:Ln,events:wn.events,api:pn(fn,no)})):(zn.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(zn.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),ao(gn).create({debug:Mn,eventBus:Kn,events:wn.events}))}(At);return!Xt&&Yt&&(Xt=ce(gn).create({protectionModel:Yt,protectionKeyController:Ot,eventBus:At.eventBus,debug:At.debug,events:At.events,BASE64:At.BASE64,constants:At.constants,cmcdModel:At.cmcdModel,customParametersModel:At.customParametersModel,settings:At.settings}),At.capabilities.setEncryptedMediaSupported(!0)),Xt}}}Ni.__dashjs_factory_name="Protection";var nr=dashjs.FactoryMaker.getClassFactory(Ni);nr.events=Ft,nr.errors=_,dashjs.FactoryMaker.updateClassFactory(Ni.__dashjs_factory_name,nr);var ju=nr},2068:function(N,p,w){var U=w(5448),x={DEFAULT:.5,STRONG:1,WEAK:0};function E(P,g,T){var F,M;return F=P===void 0?-1:P,M=function(_){var A=x.DEFAULT;return _!==x.DEFAULT&&_!==x.STRONG&&_!==x.WEAK||(A=_),A}(T),{quality:F,reason:g===void 0?null:g,priority:M}}E.__dashjs_factory_name="SwitchRequest";var y=U.Z.getClassFactory(E);y.NO_CHANGE=-1,y.PRIORITY=x,U.Z.updateClassFactory(E.__dashjs_factory_name,y),p.Z=y},1767:function(N,p,w){var U=w(5628),x=w(6535),E=w(7423),y=w(895),P=w(6070),g=w(3112),T=w(1914),F=w(5435),M=w(5448),_=w(2068),A=w(3393),b="qualitySwitchRules",Z="abandonFragmentRules";function Y(Q){Q=Q||{};var se,C,X=this.context,ce=Q.mediaPlayerModel,oe=Q.customParametersModel,me=Q.dashMetrics,be=Q.settings;function Je(qe){return qe.filter(function(st){return st.quality>_.Z.NO_CHANGE})}function we(qe){var st,ft,Ce,He,vt,Re={},Ye=null;if(qe.length!==0){for(Re[_.Z.PRIORITY.STRONG]={quality:_.Z.NO_CHANGE,reason:null},Re[_.Z.PRIORITY.WEAK]={quality:_.Z.NO_CHANGE,reason:null},Re[_.Z.PRIORITY.DEFAULT]={quality:_.Z.NO_CHANGE,reason:null},st=0,ft=qe.length;st<ft;st+=1)(Ce=qe[st]).quality!==_.Z.NO_CHANGE&&(Re[Ce.priority].quality===_.Z.NO_CHANGE||Re[Ce.priority].quality>Ce.quality)&&(Re[Ce.priority].quality=Ce.quality,Re[Ce.priority].reason=Ce.reason||null);return Re[_.Z.PRIORITY.WEAK].quality!==_.Z.NO_CHANGE&&(Ye=Re[_.Z.PRIORITY.WEAK]),Re[_.Z.PRIORITY.DEFAULT].quality!==_.Z.NO_CHANGE&&(Ye=Re[_.Z.PRIORITY.DEFAULT]),Re[_.Z.PRIORITY.STRONG].quality!==_.Z.NO_CHANGE&&(Ye=Re[_.Z.PRIORITY.STRONG]),Ye&&(He=Ye.quality,vt=Ye.reason),(0,_.Z)(X).create(He,vt)}}return{initialize:function(){se=[],C=[],be.get().streaming.abr.useDefaultABRRules&&(be.get().streaming.abr.ABRStrategy===A.Z.ABR_STRATEGY_L2A?se.push((0,T.Z)(X).create({dashMetrics:me,settings:be})):be.get().streaming.abr.ABRStrategy===A.Z.ABR_STRATEGY_LoLP?se.push((0,F.Z)(X).create({dashMetrics:me})):(se.push((0,g.Z)(X).create({dashMetrics:me,mediaPlayerModel:ce,settings:be})),se.push((0,U.Z)(X).create({dashMetrics:me})),be.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&se.push((0,x.Z)(X).create({dashMetrics:me,settings:be})),be.get().streaming.abr.additionalAbrRules.switchHistoryRule&&se.push((0,P.Z)(X).create()),be.get().streaming.abr.additionalAbrRules.droppedFramesRule&&se.push((0,y.Z)(X).create()),be.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&C.push((0,E.Z)(X).create({dashMetrics:me,mediaPlayerModel:ce,settings:be})))),oe.getAbrCustomRules().forEach(function(qe){qe.type===b&&se.push(qe.rule(X).create()),qe.type===Z&&C.push(qe.rule(X).create())})},reset:function(){[se,C].forEach(function(qe){qe&&qe.length&&qe.forEach(function(st){return st.reset&&st.reset()})}),se=[],C=[]},getMaxQuality:function(qe){return we(Je(se.map(function(st){return st.getMaxIndex(qe)})))||(0,_.Z)(X).create()},getMinSwitchRequest:we,shouldAbandonFragment:function(qe,st){var ft=we(Je(C.map(function(Ce){return Ce.shouldAbandon(qe,st)})));return ft&&(ft.reason.forceAbandon=!0),ft||(0,_.Z)(X).create()},getQualitySwitchRules:function(){return se}}}Y.__dashjs_factory_name="ABRRulesCollection";var $=M.Z.getClassFactory(Y);$.QUALITY_SWITCH_RULES=b,$.ABANDON_FRAGMENT_RULES=Z,M.Z.updateSingletonFactory(Y.__dashjs_factory_name,$),p.Z=$},7423:function(N,p,w){var U=w(2068),x=w(5448),E=w(6398);function y(P){P=P||{};var g,T,F,M,_,A=this.context,b=P.mediaPlayerModel,Z=P.dashMetrics,Y=P.settings;function $(){F={},M={},_=[]}return g={shouldAbandon:function(Q){var se=(0,U.Z)(A).create(U.Z.NO_CHANGE,{name:y.__dashjs_factory_name});if(!(Q&&Q.hasOwnProperty("getMediaInfo")&&Q.hasOwnProperty("getMediaType")&&Q.hasOwnProperty("getCurrentRequest")&&Q.hasOwnProperty("getRepresentationInfo")&&Q.hasOwnProperty("getAbrController")))return se;var C,X,ce=Q.getMediaInfo(),oe=Q.getMediaType(),me=Q.getStreamInfo(),be=me?me.id:null,Je=Q.getCurrentRequest();if(!isNaN(Je.index)){C=oe,X=Je.index,F[C]=F[C]||{},F[C][X]=F[C][X]||{};var we=b.getStableBufferTime();if(Z.getCurrentBufferLevel(oe)>we)return se;var qe=F[oe][Je.index];if(qe===null||Je.firstByteDate===null||M.hasOwnProperty(qe.id))return se;if(qe.firstByteTime===void 0&&(_[oe]=[],qe.firstByteTime=Je.firstByteDate.getTime(),qe.segmentDuration=Je.duration,qe.bytesTotal=Je.bytesTotal,qe.id=Je.index),qe.bytesLoaded=Je.bytesLoaded,qe.elapsedTime=new Date().getTime()-qe.firstByteTime,qe.bytesLoaded>0&&qe.elapsedTime>0&&function(ot,Ht){_[ot]=_[ot]||[],_[ot].push(Ht)}(oe,Math.round(8*qe.bytesLoaded/qe.elapsedTime)),_[oe].length>=Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&qe.elapsedTime>Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&qe.bytesLoaded<qe.bytesTotal){var st=_[oe].reduce(function(ot,Ht){return ot+Ht},0);if(qe.measuredBandwidthInKbps=Math.round(st/_[oe].length),qe.estimatedTimeOfDownload=+(8*qe.bytesTotal/qe.measuredBandwidthInKbps/1e3).toFixed(2),qe.estimatedTimeOfDownload<qe.segmentDuration*Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||Q.getRepresentationInfo().quality===0)return se;if(!M.hasOwnProperty(qe.id)){var ft=Q.getAbrController(),Ce=qe.bytesTotal-qe.bytesLoaded,He=ft.getBitrateList(ce),vt=ft.getQualityForBitrate(ce,qe.measuredBandwidthInKbps*Y.get().streaming.abr.bandwidthSafetyFactor,be),Re=ft.getMinAllowedIndexFor(oe,be),Ye=Re!==void 0?Math.max(Re,vt):vt;Ce>qe.bytesTotal*He[Ye].bitrate/He[ft.getQualityFor(oe,be)].bitrate&&(se.quality=Ye,se.reason.throughput=qe.measuredBandwidthInKbps,se.reason.fragmentID=qe.id,se.reason.rule=this.getClassName(),M[qe.id]=qe,T.debug("["+oe+"] frag id",qe.id," is asking to abandon and switch to quality to ",Ye," measured bandwidth was",qe.measuredBandwidthInKbps),delete F[oe][qe.id])}}else qe.bytesLoaded===qe.bytesTotal&&delete F[oe][qe.id]}return se},reset:$},T=(0,E.Z)(A).getInstance().getLogger(g),$(),g}y.__dashjs_factory_name="AbandonRequestsRule",p.Z=x.Z.getClassFactory(y)},3112:function(N,p,w){var U=w(3860),x=w(2068),E=w(5448),y=w(7855),P=w(5595),g=w(8512),T=w(6398),F=w(8825),M=w(3393),_=10;function A(b){b=b||{};var Z,Y,$,Q=this.context,se=b.dashMetrics,C=b.mediaPlayerModel,X=(0,P.Z)(Q).getInstance();function ce(Ye,ot,Ht){var Bt=Ht.reduce(function(Ne,ne,Be){return ne>Ht[Ne]?Be:Ne},0);if(Bt===0)return null;var Et=Math.max(Ye,_+2*ot.length),Dt=(Ht[Bt]-1)/(Et/_-1);return{gp:Dt,Vp:_/Dt}}function oe(Ye){Ye.placeholderBuffer=0,Ye.mostAdvancedSegmentStart=NaN,Ye.lastSegmentWasReplacement=!1,Ye.lastSegmentStart=NaN,Ye.lastSegmentDurationS=NaN,Ye.lastSegmentRequestTimeMs=NaN,Ye.lastSegmentFinishTimeMs=NaN}function me(Ye,ot){var Ht=C.getStableBufferTime();if(Ye.stableBufferTime!==Ht){var Bt=ce(Ht,Ye.bitrates,Ye.utilities);if(Bt.Vp!==Ye.Vp||Bt.gp!==Ye.gp){var Et=se.getCurrentBufferLevel(ot),Dt=Et+Ye.placeholderBuffer;Dt-=_,Dt*=Bt.Vp/Ye.Vp,Dt+=_,Ye.stableBufferTime=Ht,Ye.Vp=Bt.Vp,Ye.gp=Bt.gp,Ye.placeholderBuffer=Math.max(0,Dt-Et)}}}function be(Ye,ot){return Ye.Vp*(Ye.utilities[ot]+Ye.gp)}function Je(Ye,ot){for(var Ht=Ye.bitrates[ot],Bt=Ye.utilities[ot],Et=0,Dt=ot-1;Dt>=0;--Dt)if(Ye.utilities[Dt]<Ye.utilities[ot]){var Ne=Ye.bitrates[Dt],ne=Ye.utilities[Dt],Be=Ye.Vp*(Ye.gp+(Ht*ne-Ne*Bt)/(Ht-Ne));Et=Math.max(Et,Be)}return Et}function we(Ye){var ot=Ye.mediaType===M.Z.AUDIO?[M.Z.AUDIO]:$;for(var Ht in ot)$.hasOwnProperty(Ht)&&$[Ht].state===2&&($[Ht].placeholderBuffer=0)}function qe(){for(var Ye in $)if($.hasOwnProperty(Ye)){var ot=$[Ye];ot.state!==0&&(ot.state=1,oe(ot))}}function st(Ye){if(Ye&&Ye.chunk&&Ye.chunk.mediaInfo){var ot=$[Ye.chunk.mediaInfo.type];if(ot&&ot.state!==0){var Ht=Ye.chunk.start;isNaN(ot.mostAdvancedSegmentStart)||Ht>ot.mostAdvancedSegmentStart?(ot.mostAdvancedSegmentStart=Ht,ot.lastSegmentWasReplacement=!1):ot.lastSegmentWasReplacement=!0,ot.lastSegmentStart=Ht,ot.lastSegmentDurationS=Ye.chunk.duration,ot.lastQuality=Ye.chunk.quality,Ce(ot,Ye.chunk.mediaInfo.type)}}}function ft(Ye){if(Ye&&Ye.metric===U.Z.HTTP_REQUEST&&Ye.value&&Ye.value.type===y.w.MEDIA_SEGMENT_TYPE&&Ye.value.trace&&Ye.value.trace.length){var ot=$[Ye.mediaType];ot&&ot.state!==0&&(ot.lastSegmentRequestTimeMs=Ye.value.trequest.getTime(),ot.lastSegmentFinishTimeMs=Ye.value._tfinish.getTime(),Ce(ot,Ye.mediaType))}}function Ce(Ye,ot){if(!isNaN(Ye.lastSegmentStart)&&!isNaN(Ye.lastSegmentRequestTimeMs)&&!isNaN(Ye.placeholderBuffer)){if(Ye.placeholderBuffer*=.99,!isNaN(Ye.lastSegmentFinishTimeMs)){var Ht=se.getCurrentBufferLevel(ot)+.001*(Ye.lastSegmentFinishTimeMs-Ye.lastSegmentRequestTimeMs),Bt=be(Ye,Ye.lastQuality),Et=Math.max(0,Bt-Ht);Ye.placeholderBuffer=Math.min(Et,Ye.placeholderBuffer)}Ye.lastSegmentWasReplacement&&!isNaN(Ye.lastSegmentDurationS)&&(Ye.placeholderBuffer+=Ye.lastSegmentDurationS),Ye.lastSegmentStart=NaN,Ye.lastSegmentRequestTimeMs=NaN}}function He(Ye){if(Ye){var ot=$[Ye.mediaType];ot&&ot.state!==0&&(ot.abrQuality=Ye.newQuality)}}function vt(Ye){if(Ye){var ot=$[Ye.mediaType];if(ot&&ot.state!==0){var Ht,Bt=se.getCurrentBufferLevel(Ye.mediaType);Ht=ot.abrQuality>0?Je(ot,ot.abrQuality):_;var Et=Math.max(0,Ht-Bt);ot.placeholderBuffer=Math.min(ot.placeholderBuffer,Et)}}}function Re(){$={}}return Z={getMaxIndex:function(Ye){var ot=(0,x.Z)(Q).create();if(!(Ye&&Ye.hasOwnProperty("getMediaInfo")&&Ye.hasOwnProperty("getMediaType")&&Ye.hasOwnProperty("getScheduleController")&&Ye.hasOwnProperty("getStreamInfo")&&Ye.hasOwnProperty("getAbrController")&&Ye.hasOwnProperty("useBufferOccupancyABR")))return ot;var Ht=Ye.getMediaInfo(),Bt=Ye.getMediaType(),Et=Ye.getScheduleController(),Dt=Ye.getStreamInfo(),Ne=Ye.getAbrController(),ne=Ne.getThroughputHistory(),Be=Dt?Dt.id:null,L=Dt&&Dt.manifestInfo&&Dt.manifestInfo.isDynamic,D=Ye.useBufferOccupancyABR();if(ot.reason=ot.reason||{},!D)return ot;Et.setTimeToLoadDelay(0);var G=function(nt){var ht=nt.getMediaType(),_t=$[ht];return _t?_t.state!==0&&me(_t,ht):(_t=function(Tt){var Mt={},_n=Tt.getMediaInfo().bitrateList.map(function(Gn){return Gn.bandwidth}),rn=function(Gn){return Gn.map(function(Sr){return Math.log(Sr)})}(_n);rn=rn.map(function(Gn){return Gn-rn[0]+1});var cn=C.getStableBufferTime(),Ft=ce(cn,_n,rn);return Ft?(Mt.state=1,Mt.bitrates=_n,Mt.utilities=rn,Mt.stableBufferTime=cn,Mt.Vp=Ft.Vp,Mt.gp=Ft.gp,Mt.lastQuality=0,oe(Mt)):Mt.state=0,Mt}(nt),$[ht]=_t),_t}(Ye);if(G.state===0)return ot;var K,ge=se.getCurrentBufferLevel(Bt),pe=ne.getAverageThroughput(Bt,L),Ke=ne.getSafeAverageThroughput(Bt,L),wt=ne.getAverageLatency(Bt);if(ot.reason.state=G.state,ot.reason.throughput=pe,ot.reason.latency=wt,isNaN(pe))return ot;switch(G.state){case 1:K=Ne.getQualityForBitrate(Ht,Ke,Be,wt),ot.quality=K,ot.reason.throughput=Ke,G.placeholderBuffer=Math.max(0,Je(G,K)-ge),G.lastQuality=K,!isNaN(G.lastSegmentDurationS)&&ge>=G.lastSegmentDurationS&&(G.state=2);break;case 2:(function(nt,ht){var _t=Date.now();if(isNaN(nt.lastSegmentFinishTimeMs)){if(!isNaN(nt.lastCallTimeMs)){var Tt=.001*(_t-nt.lastCallTimeMs);nt.placeholderBuffer+=Math.max(0,Tt)}}else{var Mt=.001*(_t-nt.lastSegmentFinishTimeMs);nt.placeholderBuffer+=Math.max(0,Mt)}nt.lastCallTimeMs=_t,nt.lastSegmentStart=NaN,nt.lastSegmentRequestTimeMs=NaN,nt.lastSegmentFinishTimeMs=NaN,me(nt,ht)})(G,Bt),K=function(nt,ht){for(var _t=nt.bitrates.length,Tt=NaN,Mt=NaN,_n=0;_n<_t;++_n){var rn=(nt.Vp*(nt.utilities[_n]+nt.gp)-ht)/nt.bitrates[_n];(isNaN(Mt)||rn>=Mt)&&(Mt=rn,Tt=_n)}return Tt}(G,ge+G.placeholderBuffer);var lt=Ne.getQualityForBitrate(Ht,Ke,Be,wt);K>G.lastQuality&&K>lt&&(K=Math.max(lt,G.lastQuality));var ut=Math.max(0,ge+G.placeholderBuffer-be(G,K));ut<=G.placeholderBuffer?(G.placeholderBuffer-=ut,ut=0):(ut-=G.placeholderBuffer,G.placeholderBuffer=0,K<Ne.getMaxAllowedIndexFor(Bt,Be)?Et.setTimeToLoadDelay(1e3*ut):ut=0),ot.quality=K,ot.reason.throughput=pe,ot.reason.latency=wt,ot.reason.bufferLevel=ge,ot.reason.placeholderBuffer=G.placeholderBuffer,ot.reason.delay=ut,G.lastQuality=K;break;default:Y.debug("BOLA ABR rule invoked in bad state."),ot.quality=Ne.getQualityForBitrate(Ht,Ke,Be,wt),ot.reason.state=G.state,ot.reason.throughput=Ke,ot.reason.latency=wt,G.state=1,oe(G)}return ot},reset:function(){Re(),X.off(F.Z.BUFFER_EMPTY,we,Z),X.off(F.Z.PLAYBACK_SEEKING,qe,Z),X.off(F.Z.METRIC_ADDED,ft,Z),X.off(F.Z.QUALITY_CHANGE_REQUESTED,He,Z),X.off(F.Z.FRAGMENT_LOADING_ABANDONED,vt,Z),X.off(g.Z.MEDIA_FRAGMENT_LOADED,st,Z)}},Y=(0,T.Z)(Q).getInstance().getLogger(Z),Re(),X.on(F.Z.BUFFER_EMPTY,we,Z),X.on(F.Z.PLAYBACK_SEEKING,qe,Z),X.on(F.Z.METRIC_ADDED,ft,Z),X.on(F.Z.QUALITY_CHANGE_REQUESTED,He,Z),X.on(F.Z.FRAGMENT_LOADING_ABANDONED,vt,Z),X.on(g.Z.MEDIA_FRAGMENT_LOADED,st,Z),Z}A.__dashjs_factory_name="BolaRule",p.Z=E.Z.getClassFactory(A)},895:function(N,p,w){var U=w(5448),x=w(2068),E=w(6398);function y(){var P,g,T=this.context;return P={getMaxIndex:function(F){var M=(0,x.Z)(T).create();if(!F||!F.hasOwnProperty("getDroppedFramesHistory"))return M;var _=F.getDroppedFramesHistory(),A=F.getStreamInfo().id;if(_){var b=_.getFrameHistory(A);if(!b||b.length===0)return M;for(var Z=0,Y=0,$=x.Z.NO_CHANGE,Q=1;Q<b.length;Q++)if(b[Q]&&(Z=b[Q].droppedVideoFrames,(Y=b[Q].totalVideoFrames)>375&&Z/Y>.15)){$=Q-1,g.debug("index: "+$+" Dropped Frames: "+Z+" Total Frames: "+Y);break}return(0,x.Z)(T).create($,{droppedFrames:Z})}return M}},g=(0,E.Z)(T).getInstance().getLogger(P),P}y.__dashjs_factory_name="DroppedFramesRule",p.Z=U.Z.getClassFactory(y)},6535:function(N,p,w){var U=w(5595),x=w(8512),E=w(5448),y=w(6398),P=w(2068),g=w(3393),T=w(3860),F=w(8825);function M(_){_=_||{};var A,b,Z,Y=this.context,$=(0,U.Z)(Y).getInstance(),Q=_.dashMetrics;function se(){(Z={})[g.Z.VIDEO]={ignoreCount:2},Z[g.Z.AUDIO]={ignoreCount:2}}function C(){se()}function X(ce){isNaN(ce.startTime)||ce.mediaType!==g.Z.AUDIO&&ce.mediaType!==g.Z.VIDEO||Z[ce.mediaType].ignoreCount>0&&Z[ce.mediaType].ignoreCount--}return A={getMaxIndex:function(ce){var oe=(0,P.Z)(Y).create();if(!ce||!ce.hasOwnProperty("getMediaType"))return oe;(function(){if(!Q||!Q.hasOwnProperty("getCurrentBufferLevel")||!Q.hasOwnProperty("getCurrentBufferState"))throw new Error(g.Z.MISSING_CONFIG_ERROR)})();var me=ce.getMediaType(),be=Q.getCurrentBufferState(me),Je=ce.getRepresentationInfo().fragmentDuration,we=ce.getStreamInfo(),qe=we?we.id:null,st=ce.getScheduleController(),ft=we&&we.manifestInfo&&we.manifestInfo.isDynamic;if(function(Bt,Et){return!Bt&&Z[Et].ignoreCount>0}(st.getPlaybackController().getLowLatencyModeEnabled(),me)||!Je)return oe;if(be&&be.state===T.Z.BUFFER_EMPTY)b.debug("["+me+"] Switch to index 0; buffer is empty."),oe.quality=0,oe.reason="InsufficientBufferRule: Buffer is empty";else{var Ce=ce.getMediaInfo(),He=ce.getAbrController(),vt=He.getThroughputHistory(),Re=Q.getCurrentBufferLevel(me),Ye=vt.getAverageThroughput(me,ft),ot=vt.getAverageLatency(me),Ht=Ye*(Re/Je)*.5;oe.quality=He.getQualityForBitrate(Ce,Ht,qe,ot),oe.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return oe},reset:function(){se(),$.off(F.Z.PLAYBACK_SEEKING,C,A),$.off(x.Z.BYTES_APPENDED_END_FRAGMENT,X,A)}},b=(0,y.Z)(Y).getInstance().getLogger(A),se(),$.on(F.Z.PLAYBACK_SEEKING,C,A),$.on(x.Z.BYTES_APPENDED_END_FRAGMENT,X,A),A}M.__dashjs_factory_name="InsufficientBufferRule",p.Z=E.Z.getClassFactory(M)},1914:function(N,p,w){var U=w(3860),x=w(2068),E=w(5448),y=w(7855),P=w(5595),g=w(8512),T=w(6398),F=w(3393);function M(_){_=_||{};var A,b,Z,Y,$=this.context,Q=_.dashMetrics,se=(0,P.Z)($).getInstance();function C(qe){qe.placeholderBuffer=0,qe.mostAdvancedSegmentStart=NaN,qe.lastSegmentWasReplacement=!1,qe.lastSegmentStart=NaN,qe.lastSegmentDurationS=NaN,qe.lastSegmentRequestTimeMs=NaN,qe.lastSegmentFinishTimeMs=NaN,qe.lastSegmentUrl=""}function X(){for(var qe in b)if(b.hasOwnProperty(qe)){var st=b[qe];st.state!==0&&(st.state=1,C(st))}}function ce(qe){if(qe&&qe.chunk&&qe.chunk.mediaInfo){var st=b[qe.chunk.mediaInfo.type],ft=Z[qe.chunk.mediaInfo.type];if(st&&st.state!==0){var Ce=qe.chunk.start;isNaN(st.mostAdvancedSegmentStart)||Ce>st.mostAdvancedSegmentStart?(st.mostAdvancedSegmentStart=Ce,st.lastSegmentWasReplacement=!1):st.lastSegmentWasReplacement=!0,st.lastSegmentStart=Ce,st.lastSegmentDurationS=qe.chunk.duration,st.lastQuality=qe.chunk.quality,me(st,ft)}}}function oe(qe){if(qe&&qe.metric===U.Z.HTTP_REQUEST&&qe.value&&qe.value.type===y.w.MEDIA_SEGMENT_TYPE&&qe.value.trace&&qe.value.trace.length){var st=b[qe.mediaType],ft=Z[qe.mediaType];st&&st.state!==0&&(st.lastSegmentRequestTimeMs=qe.value.trequest.getTime(),st.lastSegmentFinishTimeMs=qe.value._tfinish.getTime(),me(st,ft))}}function me(qe,st){isNaN(qe.lastSegmentStart)||isNaN(qe.lastSegmentRequestTimeMs)||(st.segment_request_start_s=.001*qe.lastSegmentRequestTimeMs,st.segment_download_finish_s=.001*qe.lastSegmentFinishTimeMs,qe.lastSegmentStart=NaN,qe.lastSegmentRequestTimeMs=NaN)}function be(qe){if(qe&&qe.mediaType){var st=b[qe.mediaType];st&&st.state!==0&&(st.abrQuality=qe.newQuality)}}function Je(qe,st){if(qe.length!==st.length)return-1;for(var ft=0,Ce=0;Ce<qe.length;Ce++)ft+=qe[Ce]*st[Ce];return ft}function we(){b={},Z={}}return A={getMaxIndex:function(qe){var st,ft=(0,x.Z)($).create(),Ce=Math.pow(4,.99),He=Math.max(Math.pow(4,1),Ce*Math.sqrt(4)),vt=qe.getMediaInfo(),Re=qe.getMediaType(),Ye=vt.bitrateList.map(function(Ft){return Ft.bandwidth}),ot=Ye.length,Ht=qe.getScheduleController(),Bt=qe.getStreamInfo(),Et=qe.getAbrController(),Dt=Et.getThroughputHistory(),Ne=Bt&&Bt.manifestInfo&&Bt.manifestInfo.isDynamic,ne=qe.useL2AABR(),Be=Q.getCurrentBufferLevel(Re,!0),L=Dt.getSafeAverageThroughput(Re,Ne),D=Dt.getAverageThroughput(Re,Ne),G=Dt.getAverageLatency(Re),K=qe.getVideoModel().getPlaybackRate();if(!(qe&&qe.hasOwnProperty("getMediaInfo")&&qe.hasOwnProperty("getMediaType")&&qe.hasOwnProperty("getScheduleController")&&qe.hasOwnProperty("getStreamInfo")&&qe.hasOwnProperty("getAbrController")&&qe.hasOwnProperty("useL2AABR"))||(ft.reason=ft.reason||{},!ne||Re===F.Z.AUDIO))return ft;Ht.setTimeToLoadDelay(0);var ge=function(Ft){var Gn=Ft.getMediaType(),Sr=b[Gn];return Sr||(Sr=function(Gr){var gr={},fi=Gr.getMediaInfo(),ao=fi.bitrateList.map(function(Hr){return Hr.bandwidth/1e3});return gr.state=1,gr.bitrates=ao,gr.lastQuality=0,function(Hr){Hr&&Hr.type&&(Z[Hr.type]={},Z[Hr.type].w=[],Z[Hr.type].prev_w=[],Z[Hr.type].Q=0,Z[Hr.type].segment_request_start_s=0,Z[Hr.type].segment_download_finish_s=0,Z[Hr.type].B_target=1.5)}(fi),C(gr),gr}(Ft),b[Gn]=Sr),Sr}(qe);if(ge.state===0)return ft;var pe=Z[Re];if(!pe||(ft.reason.state=ge.state,ft.reason.throughput=D,ft.reason.latency=G,isNaN(D)))return ft;switch(ge.state){case 1:if(st=Et.getQualityForBitrate(vt,L,Bt.id,G),ft.quality=st,ft.reason.throughput=L,ge.lastQuality=st,!isNaN(ge.lastSegmentDurationS)&&Be>=pe.B_target){ge.state=2,pe.Q=Ce;for(var Ke=0;Ke<ot;++Ke)Ke===ge.lastQuality?pe.prev_w[Ke]=1:pe.prev_w[Ke]=0}break;case 2:var wt=[],lt=Q.getCurrentHttpRequest(Re).trace.reduce(function(Ft,Gn){return Ft+Gn.d},0),ut=Q.getCurrentHttpRequest(Re).trace.reduce(function(Ft,Gn){return Ft+Gn.b[0]},0),nt=Math.round(8*ut/lt),ht=Q.getCurrentHttpRequest(Re);if(nt<1&&(nt=1),ht.url===ge.lastSegmentUrl||ht.type===y.w.INIT_SEGMENT_TYPE)st=ge.lastQuality;else{for(var _t=ge.lastSegmentDurationS,Tt=1,Mt=0;Mt<ot;++Mt)Ye[Mt]=Ye[Mt]/1e3,K*Ye[Mt]>nt&&(Tt=-1),pe.w[Mt]=pe.prev_w[Mt]+Tt*(_t/(2*He))*((pe.Q+Ce)*(K*Ye[Mt]/nt));pe.w=function(Ft){for(var Gn=Ft.length,Sr=!1,Gr=[],gr=0;gr<Gn;++gr)Gr[gr]=Ft[gr];for(var fi=Ft.sort(function(no,uo){return uo-no}),ao=0,Hr=0,so=[],xi=0;xi<Gn-1;++xi)if((Hr=((ao+=fi[xi])-1)/(xi+1))>=fi[xi+1]){Sr=!0;break}Sr||(Hr=(ao+fi[Gn-1]-1)/Gn);for(var Fi=0;Fi<Gn;++Fi)so[Fi]=Math.max(Gr[Fi]-Hr,0);return so}(pe.w);for(var _n=0;_n<ot;++_n)wt[_n]=pe.w[_n]-pe.prev_w[_n],pe.prev_w[_n]=pe.w[_n];pe.Q=Math.max(0,pe.Q-_t+_t*K*((Je(Ye,pe.prev_w)+Je(Ye,wt))/nt));for(var rn=[],cn=0;cn<ot;++cn)rn[cn]=Math.abs(Ye[cn]-Je(pe.w,Ye));(st=rn.indexOf(Math.min.apply(Math,rn)))>ge.lastQuality&&Ye[ge.lastQuality+1]<=nt&&(st=ge.lastQuality+1),Ye[st]>=nt&&(pe.Q=2*Math.max(Ce,pe.Q)),ge.lastSegmentUrl=ht.url}ft.quality=st,ft.reason.throughput=D,ft.reason.latency=G,ft.reason.bufferLevel=Be,ge.lastQuality=ft.quality;break;default:Y.debug("L2A ABR rule invoked in bad state."),ft.quality=Et.getQualityForBitrate(vt,L,Bt.id,G),ft.reason.state=ge.state,ft.reason.throughput=L,ft.reason.latency=G,ge.state=1,C(ge)}return ft},reset:function(){we(),se.off(g.Z.PLAYBACK_SEEKING,X,A),se.off(g.Z.MEDIA_FRAGMENT_LOADED,ce,A),se.off(g.Z.METRIC_ADDED,oe,A),se.off(g.Z.QUALITY_CHANGE_REQUESTED,be,A)}},Y=(0,T.Z)($).getInstance().getLogger(A),we(),se.on(g.Z.PLAYBACK_SEEKING,X,A),se.on(g.Z.MEDIA_FRAGMENT_LOADED,ce,A),se.on(g.Z.METRIC_ADDED,oe,A),se.on(g.Z.QUALITY_CHANGE_REQUESTED,be,A),A}M.__dashjs_factory_name="L2ARule",p.Z=E.Z.getClassFactory(M)},6070:function(N,p,w){var U=w(5448),x=w(6398),E=w(2068);function y(){var P,g,T=this.context;return P={getMaxIndex:function(F){for(var M=F?F.getSwitchHistory():null,_=M?M.getSwitchRequests():[],A=0,b=0,Z=0,Y=(0,E.Z)(T).create(),$=0;$<_.length;$++)if(_[$]!==void 0&&(A+=_[$].drops,b+=_[$].noDrops,Z+=_[$].dropSize,A+b>=6&&A/b>.075)){Y.quality=$>0&&_[$].drops>0?$-1:$,Y.reason={index:Y.quality,drops:A,noDrops:b,dropSize:Z},g.debug("Switch history rule index: "+Y.quality+" samples: "+(A+b)+" drops: "+A);break}return Y}},g=(0,x.Z)(T).getInstance().getLogger(P),P}y.__dashjs_factory_name="SwitchHistoryRule",p.Z=U.Z.getClassFactory(y)},5628:function(N,p,w){var U=w(5448),x=w(2068),E=w(3393),y=w(3860);function P(g){g=g||{};var T=this.context,F=g.dashMetrics;return{getMaxIndex:function(M){var _=(0,x.Z)(T).create();if(!(M&&M.hasOwnProperty("getMediaInfo")&&M.hasOwnProperty("getMediaType")&&M.hasOwnProperty("useBufferOccupancyABR")&&M.hasOwnProperty("getAbrController")&&M.hasOwnProperty("getScheduleController")))return _;(function(){if(!F||!F.hasOwnProperty("getCurrentBufferState"))throw new Error(E.Z.MISSING_CONFIG_ERROR)})();var A=M.getMediaInfo(),b=M.getMediaType(),Z=F.getCurrentBufferState(b),Y=M.getScheduleController(),$=M.getAbrController(),Q=M.getStreamInfo(),se=Q?Q.id:null,C=Q&&Q.manifestInfo?Q.manifestInfo.isDynamic:null,X=$.getThroughputHistory(),ce=X.getSafeAverageThroughput(b,C),oe=X.getAverageLatency(b),me=M.useBufferOccupancyABR();return isNaN(ce)||!Z||me||$.getAbandonmentStateFor(se,b)!==y.Z.ABANDON_LOAD&&(Z.state===y.Z.BUFFER_LOADED||C)&&(_.quality=$.getQualityForBitrate(A,ce,se,oe),Y.setTimeToLoadDelay(0),_.reason={throughput:ce,latency:oe}),_},reset:function(){}}}P.__dashjs_factory_name="ThroughputRule",p.Z=U.Z.getClassFactory(P)},4722:function(N,p,w){var U=w(5448),x=w(6398);function E(){var y,P,g,T,F,M,_,A,b,Z=this.context;function Y(){g=null,T=1,F=100,M=0,_=null,A=null,b="dynamic_weight_selection"}function $(){var ce=0;if(g)for(var oe=0;oe<g.length;oe++){var me=g[oe];me.state.throughput>ce&&(ce=me.state.throughput)}return ce}function Q(ce,oe,me){var be=ce.map(function(Je,we){return me[we]*Math.pow(Je-oe[we],2)}).reduce(function(Je,we){return Je+we});return(be<0?-1:1)*Math.sqrt(Math.abs(be))}function se(ce,oe){return Q([ce.state.throughput,ce.state.latency,ce.state.rebuffer,ce.state.switch],[oe.state.throughput,oe.state.latency,oe.state.rebuffer,oe.state.switch],[1,1,1,1])}function C(ce,oe,me){for(var be=0;be<oe.length;be++){var Je=oe[be],we=se(Je,ce);X(Je,me,Math.exp(-1*Math.pow(we,2)/(2*Math.pow(.1,2))))}}function X(ce,oe,me){var be=ce.state,Je=[.01,.01,.01,.01];be.throughput=be.throughput+(oe[0]-be.throughput)*Je[0]*me,be.latency=be.latency+(oe[1]-be.latency)*Je[1]*me,be.rebuffer=be.rebuffer+(oe[2]-be.rebuffer)*Je[2]*me,be.switch=be.switch+(oe[3]-be.switch)*Je[3]*me}return y={getNextQuality:function(ce,oe,me,be,Je,we,qe){var st=me,ft=be,Ce=oe,He=function(pe){if(!g){g=[];var Ke=pe.bitrateList,wt=[];M=Ke[0].bandwidth,Ke.forEach(function(ht){wt.push(ht.bandwidth),ht.bandwidth<M&&(M=ht.bandwidth)}),nt=wt.map(function(ht){return Math.pow(ht,2)}).reduce(function(ht,_t){return ht+_t}),T=Math.sqrt(nt);for(var lt=0;lt<Ke.length;lt++){var ut={qualityIndex:lt,bitrate:Ke[lt].bandwidth,state:{throughput:Ke[lt].bandwidth/T,latency:0,rebuffer:0,switch:0}};g.push(ut)}A=function(ht){var _t=[],Tt=function(ju){for(var ln=[],gn=0;gn<ju;gn++){var pn=[Math.random()*$(),Math.random(),Math.random(),Math.random()];ln.push(pn)}return ln}(Math.pow(ht.length,2));_t.push(Tt[0]);for(var Mt=[1,1,1,1],_n=1;_n<ht.length;_n++){for(var rn=null,cn=null,Ft=0;Ft<Tt.length;Ft++){for(var Gn=Tt[Ft],Sr=null,Gr=0;Gr<_t.length;Gr++){var gr=Q(Gn,_t[Gr],Mt);(Sr===null||gr<Sr)&&(Sr=gr)}(cn===null||Sr>cn)&&(rn=Gn,cn=Sr)}_t.push(rn)}for(var fi=null,ao=null,Hr=0;Hr<_t.length;Hr++){for(var so=0,xi=0;xi<_t.length;xi++)Hr!==xi&&(so+=Q(_t[Hr],_t[xi],Mt));(fi===null||so>fi)&&(fi=so,ao=Hr)}var Fi=[];for(Fi.push(_t[ao]),_t.splice(ao,1);_t.length>0;){for(var no=null,uo=null,Ni=0;Ni<_t.length;Ni++){var nr=Q(Fi[0],_t[Ni],Mt);(no===null||nr<no)&&(no=nr,uo=Ni)}Fi.push(_t[uo]),_t.splice(uo,1)}return Fi}(g)}var nt;return g}(ce),vt=oe/T;vt>1&&(vt=$()),me/=F,P.debug("getNextQuality called throughput:".concat(vt," latency:").concat(me," bufferSize:").concat(be," currentQualityIndex:").concat(we," playbackRate:").concat(Je));var Re=He[we],Ye=Re.bitrate*qe.getSegmentDuration()/Ce,ot=Math.max(0,Ye-ft);if(ft-Ye<qe.getMinBuffer())return P.debug("Buffer is low for bitrate= ".concat(Re.bitrate," downloadTime=").concat(Ye," currentBuffer=").concat(ft," rebuffer=").concat(ot)),function(pe,Ke){var wt=0,lt=pe;if(g)for(var ut=0;ut<g.length;ut++){var nt=g[ut];nt.bitrate<pe.bitrate&&nt.bitrate>wt&&Ke>nt.bitrate&&(wt=nt.bitrate,lt=nt)}return lt}(Re,Ce).qualityIndex;switch(b){case"manual_weight_selection":_=[.4,.4,.4,.4];break;case"random_weight_selection":(function(pe){_=function(Ke,wt){for(var lt=[],ut=Math.sqrt(2/Ke),nt=0;nt<4;nt++)lt.push(Math.random()*ut);return _=lt}(pe.length)})(He);break;default:(function(pe,Ke,wt,lt,ut,nt,ht){_||(_=A[A.length-1]);var _t=pe.findWeightVector(Ke,wt,lt,ut,nt,ht);_t!==null&&_t!==-1&&(_=_t)})(qe,He,st,ft,ot,Ce,Je)}for(var Ht=null,Bt=null,Et=null,Dt=0;Dt<He.length;Dt++){var Ne=He[Dt],ne=Ne.state,Be=[ne.throughput,ne.latency,ne.rebuffer,ne.switch],L=_.slice(),D=qe.getNextBufferWithBitrate(Ne.bitrate,ft,Ce),G=D<qe.getMinBuffer();G&&P.debug("Buffer is low for bitrate=".concat(Ne.bitrate," downloadTime=").concat(Ye," currentBuffer=").concat(ft," nextBuffer=").concat(D)),(Ne.bitrate>oe-1e4||G)&&Ne.bitrate!==M&&(L[0]=100);var K=Q(Be,[vt,0,0,0],L);(Ht===null||K<Ht)&&(Ht=K,Bt=Ne.qualityIndex,Et=Ne)}var ge=Math.abs(Re.bitrate-Et.bitrate)/T;return C(Re,He,[vt,me,ot,ge]),C(Et,He,[vt,0,0,ge]),Bt},reset:function(){Y()}},P=(0,x.Z)(Z).getInstance().getLogger(y),Y(),y}E.__dashjs_factory_name="LearningAbrController",p.Z=U.Z.getClassFactory(E)},5317:function(N,p,w){var U=w(5448),x=w(2298);function E(){var y,P,g,T,F;function M(){P=null,g=null,T=null,F=null}function _(b,Z,Y,$){var Q=new x.Z;return Q.type=b,Q.weights.bitrateReward=Z||1,Q.weights.bitrateSwitchPenalty=1,Q.weights.rebufferPenalty=Y||1e3,Q.weights.latencyPenalty=[],Q.weights.latencyPenalty.push({threshold:1.1,penalty:.05*$}),Q.weights.latencyPenalty.push({threshold:1e8,penalty:.1*Y}),Q.weights.playbackSpeedPenalty=$||200,Q}function A(b,Z,Y,$,Q){Q.bitrateWSum+=Q.weights.bitrateReward*b,Q.lastBitrate&&(Q.bitrateSwitchWSum+=Q.weights.bitrateSwitchPenalty*Math.abs(b-Q.lastBitrate)),Q.lastBitrate=b,Q.rebufferWSum+=Q.weights.rebufferPenalty*Z;for(var se=0;se<Q.weights.latencyPenalty.length;se++){var C=Q.weights.latencyPenalty[se];if(Y<=C.threshold){Q.latencyWSum+=C.penalty*Y;break}}Q.playbackSpeedWSum+=Q.weights.playbackSpeedPenalty*Math.abs(1-$),Q.totalQoe=Q.bitrateWSum-Q.bitrateSwitchWSum-Q.rebufferWSum-Q.latencyWSum-Q.playbackSpeedWSum}return y={setupPerSegmentQoe:function(b,Z,Y){P=_("segment",b,Z,Y),g=b,T=Z,F=Y},logSegmentMetrics:function(b,Z,Y,$){P&&A(b,Z,Y,$,P)},getPerSegmentQoe:function(){return P},calculateSingleUseQoe:function(b,Z,Y,$){var Q=null;return g&&T&&F&&(Q=_("segment",g,T,F)),Q?(A(b,Z,Y,$,Q),Q.totalQoe):0},reset:function(){M()}},M(),y}E.__dashjs_factory_name="LoLpQoeEvaluator",p.Z=U.Z.getClassFactory(E)},5435:function(N,p,w){var U=w(6398),x=w(5448),E=w(4722),y=w(5317),P=w(2068),g=w(3860),T=w(6523),F=w(3393);function M(_){var A,b,Z,Y,$=(_=_||{}).dashMetrics,Q=this.context;return b={getMaxIndex:function(se){try{var C=(0,P.Z)(Q).create(),X=se.getMediaInfo().type,ce=se.getAbrController(),oe=se.getStreamInfo(),me=ce.getQualityFor(X,oe.id),be=se.getMediaInfo(),Je=$.getCurrentBufferState(X),we=se.getScheduleController(),qe=$.getCurrentBufferLevel(X,!0),st=oe&&oe.manifestInfo?oe.manifestInfo.isDynamic:null,ft=we.getPlaybackController(),Ce=ft.getCurrentLiveLatency();if(!se.useLoLPABR()||X===F.Z.AUDIO)return C;Ce||(Ce=0);var He=ft.getPlaybackRate(),vt=ce.getThroughputHistory().getSafeAverageThroughput(X,st);if(A.debug("Throughput ".concat(Math.round(vt)," kbps")),isNaN(vt)||!Je||ce.getAbandonmentStateFor(oe.id,X)===g.Z.ABANDON_LOAD)return C;for(var Re=be.bitrateList,Ye=se.getRepresentationInfo().fragmentDuration,ot=Re[0].bandwidth/1e3,Ht=Re[Re.length-1].bandwidth/1e3,Bt=0;Bt<Re.length;Bt++){var Et=Re[Bt].bandwidth/1e3;Et>Ht?Ht=Et:Et<ot&&(ot=Et)}var Dt=Re[me].bandwidth/1e3,Ne=$.getCurrentHttpRequest(X,!0),ne=(Ne.tresponse.getTime()-Ne.trequest.getTime())/1e3,Be=ne>Ye?ne-Ye:0;Y.setupPerSegmentQoe(Ye,Ht,ot),Y.logSegmentMetrics(Dt,Be,Ce,He);var L=(0,T.Z)(Q).create({targetLatency:1.5,bufferMin:.3,segmentDuration:Ye,qoeEvaluator:Y});return C.quality=Z.getNextQuality(be,1e3*vt,Ce,qe,He,me,L),C.reason={throughput:vt,latency:Ce},C.priority=P.Z.PRIORITY.STRONG,we.setTimeToLoadDelay(0),C.quality!==me&&A.debug("[TgcLearningRule]["+X+"] requesting switch to index: ",C.quality,"Average throughput",Math.round(vt),"kbps"),C}catch(D){throw D}},reset:function(){Z.reset(),Y.reset()}},A=(0,U.Z)(Q).getInstance().getLogger(b),Z=(0,E.Z)(Q).create(),Y=(0,y.Z)(Q).create(),b}M.__dashjs_factory_name="LoLPRule",p.Z=x.Z.getClassFactory(M)},6523:function(N,p,w){var U=w(5448);function x(E){var y,P,g,T,F=E.targetLatency,M=E.bufferMin,_=E.segmentDuration,A=E.qoeEvaluator;function b(){return _}function Z(Y,$){var Q=b();return $>Q?Y-Q:Y+Q-$}return y={getMinBuffer:function(){return M},getSegmentDuration:b,getNextBufferWithBitrate:function(Y,$,Q){return Z($,Y*_/Q)},getNextBuffer:Z,findWeightVector:function(Y,$,Q,se,C,X){var ce=null,oe=null,me=null,be=Math.abs($-g);return Y.forEach(function(Je){P.forEach(function(we){we[0];var qe=we[1],st=we[2],ft=(we[3],Je.bitrate*_/C),Ce=Z(Q,ft),He=(st===0?10:1/st)*Math.max(1e-5,ft-Ce),vt=(qe===0?10:1/qe)*Je.state.latency,Re=A.calculateSingleUseQoe(Je.bitrate,He,vt,X);(ce===null||Re>ce)&&function(Ye,ot,Ht){return!(Ye>F+Ht)&&ot>=M}($,Ce,be)&&(ce=Re,oe=we,me=Je.bitrate)})}),oe===null&&me===null&&(oe=-1),g=$,oe}},P=function Y($,Q,se){if(se===Q)return $;for(var C=$.length,X=0;X<C;X++)for(var ce=$.shift(),oe=0;oe<T.length;oe++)$.push(ce.concat(T[oe]));return Y($,Q,se+1)}((T=[.2,.4,.6,.8,1]).map(function(Y){return[Y]}),4,1),g=0,y}x.__dashjs_factory_name="LoLpWeightSelector",p.Z=U.Z.getClassFactory(x)},2298:function(N,p){p.Z=function w(){(function(U,x){if(!(U instanceof x))throw new TypeError("Cannot call a class as a function")})(this,w),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(N,p,w){w.d(p,{Y:function(){return A}});var U=w(3393),x=w(1553),E=w(5448),y=w(2128),P=w(2594),g=w(7387),T=w(7417),F=w(9032),M=w(9326),_=w(7802),A=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function b(Z){var Y,$,Q,se,C,X,ce,oe,me=this.context,be=Z.adapter,Je=Z.baseURLController,we=Z.streamInfo,qe=Z.timelineConverter,st=Z.debug,ft=Z.eventBus,Ce=Z.events,He=Z.dashConstants,vt=(0,P.Z)(me).getInstance();function Re(ot,Ht){var Bt=new y.Z;Bt.id=ot.id,Bt.bitrate=ot.bandwidth,Bt.width=ot.width,Bt.height=ot.height,Bt.tilesHor=1,Bt.tilesVert=1,ot.essentialProperties&&ot.essentialProperties.forEach(function(Et){if(A.indexOf(Et.schemeIdUri)>=0&&Et.value){var Dt=Et.value.split("x");Dt.length!==2||isNaN(Dt[0])||isNaN(Dt[1])||(Bt.tilesHor=parseInt(Dt[0],10),Bt.tilesVert=parseInt(Dt[1],10))}}),Ht?X.updateSegmentData(ot).then(function(Et){(function(Dt,Ne,ne){var Be=[],L=function(D,G){var K,ge,pe,Ke,wt=[],lt=0;for(K=0,ge=D.segments.length;K<ge;K++)pe=D.segments[K],(Ke=(0,g.TJ)(qe,be.getIsDynamic(),G,pe.startTime,pe.duration,pe.timescale,pe.media,pe.mediaRange,lt))&&(wt.push(Ke),Ke=null,lt++);return wt}(ne,Ne);Ne.segments=L,Dt.segmentDuration=Ne.segments[0].duration,Dt.readThumbnail=function(D,G){var K=null;Be.some(function(ge){if(ge.start<=D&&ge.end>D)return K=ge.url,!0}),K?G(K):Ne.segments.some(function(ge){if(ge.mediaStartTime<=D&&ge.mediaStartTime+ge.duration>D){var pe=Je.resolve(Ne.path);return ce.load({method:"get",url:pe.url,request:{range:ge.mediaRange,responseType:"arraybuffer"},onload:function(Ke){var wt=oe.getSamplesInfo(Ke.target.response),lt=new Blob([Ke.target.response.slice(wt.sampleList[0].offset,wt.sampleList[0].offset+wt.sampleList[0].size)],{type:"image/jpeg"}),ut=window.URL.createObjectURL(lt);Be.push({start:ge.mediaStartTime,end:ge.mediaStartTime+ge.duration,url:ut}),G&&G(ut)}}),!0}})}})(Bt,ot,Et)}):(Bt.startNumber=ot.startNumber,Bt.segmentDuration=ot.segmentDuration,Bt.timescale=ot.timescale,Bt.templateUrl=function(Et){var Dt=vt.isRelative(Et.media)?vt.resolve(Et.media,Je.resolve(Et.path).url):Et.media;return Dt?(0,g.Aj)(Dt,Et.id):""}(ot)),Bt.tilesHor>0&&Bt.tilesVert>0&&(Bt.widthPerTile=Bt.width/Bt.tilesHor,Bt.heightPerTile=Bt.height/Bt.tilesVert,$.push(Bt))}function Ye(){$=[],se=-1,C=null}return Y={getTracks:function(){return $},addTracks:function(){if(we&&be&&(C=be.getMediaInfoForType(we,U.Z.IMAGE))){var ot=be.getVoRepresentations(C);ot&&ot.length>0&&ot.forEach(function(Ht){(Ht.segmentInfoType===x.Z.SEGMENT_TEMPLATE&&Ht.segmentDuration>0&&Ht.media||Ht.segmentInfoType===x.Z.SEGMENT_TIMELINE)&&Re(Ht),Ht.segmentInfoType===x.Z.SEGMENT_BASE&&Re(Ht,!0)}),$.length>0&&$.sort(function(Ht,Bt){return Ht.bitrate-Bt.bitrate})}},reset:Ye,setTrackByIndex:function(ot){$&&$.length!==0&&(ot>=$.length&&(ot=$.length-1),se=ot)},getCurrentTrack:function(){return se<0?null:$[se]},getCurrentTrackIndex:function(){return se},getThumbnailRequestForTime:function(ot){for(var Ht,Bt=be.getVoRepresentations(C),Et=0;Et<Bt.length;Et++)if($[se].id===Bt[Et].id){Ht=Bt[Et];break}return Q.getSegmentRequestForTime(C,Ht,ot)}},Ye(),ce=(0,F.Z)(me).create({}),oe=(0,T.Z)(me).getInstance(),X=(0,_.Z)(me).create({events:Ce,eventBus:ft,streamInfo:we,timelineConverter:qe,dashConstants:He,dashMetrics:Z.dashMetrics,segmentBaseController:Z.segmentBaseController,type:U.Z.IMAGE}),(Q=(0,M.Z)(me).create({streamInfo:we,type:U.Z.IMAGE,timelineConverter:qe,segmentsController:X,baseURLController:Je,debug:st,eventBus:ft,events:Ce,dashConstants:He,urlUtils:vt})).initialize(!!be&&be.getIsDynamic()),Y}b.__dashjs_factory_name="ThumbnailTracks",p.Z=E.Z.getClassFactory(b)},7417:function(N,p,w){var U=w(6398),x=w(8260),E=w(5448),y=w(6934),P=w(9597);function g(){var T,F,M=this.context;function _(Z){if(!Z)return null;Z.fileStart===void 0&&(Z.fileStart=0);var Y=y.parseBuffer(Z),$=(0,x.Z)(M).create();return $.setData(Y),$}function A(Z,Y){return Z[Y+3]>>>0|Z[Y+2]<<8>>>0|Z[Y+1]<<16>>>0|Z[Y]<<24>>>0}function b(Z,Y){return String.fromCharCode(Z[Y++])+String.fromCharCode(Z[Y++])+String.fromCharCode(Z[Y++])+String.fromCharCode(Z[Y])}return F={parse:_,findLastTopIsoBoxCompleted:function(Z,Y,$){if($===void 0&&($=0),!Y||$+8>=Y.byteLength)return new P.Z(0,!1);for(var Q,se=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,C=0;$<se.byteLength;){var X=A(se,$),ce=b(se,$+4);if(X===0)break;$+X<=se.byteLength&&(Z.indexOf(ce)>=0?Q=new P.Z($,!0,X):C=$+X),$+=X}return Q||new P.Z(C,!1)},getMediaTimescaleFromMoov:function(Z){var Y=_(Z),$=Y?Y.getBox("mdhd"):void 0;return $?$.timescale:NaN},getSamplesInfo:function(Z){if(!Z||Z.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var Y,$,Q,se,C,X,ce,oe,me,be,Je,we,qe,st,ft,Ce,He=_(Z),vt=He.getBoxes("moof"),Re=He.getBoxes("mfhd");ft=He.getBoxes("moof").length,st=Re[Re.length-1].sequence_number,$=0,C=[];var Ye=-1,ot=-1;for(be=0;be<vt.length;be++){var Ht=vt[be],Bt=Ht.getChildBoxes("traf");for(oe=0;oe<Bt.length;oe++){var Et=Bt[oe],Dt=Et.getChildBox("tfhd"),Ne=Et.getChildBox("tfdt");se=Ne.baseMediaDecodeTime;var ne=Et.getChildBoxes("trun"),Be=Et.getChildBoxes("subs");for(me=0;me<ne.length;me++){var L=ne[me];for($=L.sample_count,qe=(Dt.base_data_offset||0)+(L.data_offset||0),ce=0;ce<$;ce++){Y=(X=L.samples[ce]).sample_duration!==void 0?X.sample_duration:Dt.default_sample_duration,Q=X.sample_size!==void 0?X.sample_size:Dt.default_sample_size;var D={dts:se,cts:se+(X.sample_composition_time_offset!==void 0?X.sample_composition_time_offset:0),duration:Y,offset:Ht.offset+qe,size:Q,subSizes:[Q]};if(Be)for(Je=0;Je<Be.length;Je++){var G=Be[Je];if(Ye<G.entry_count-1&&ce>ot&&(Ye++,ot+=G.entries[Ye].sample_delta),ce==ot){D.subSizes=[];var K=G.entries[Ye];for(we=0;we<K.subsample_count;we++)D.subSizes.push(K.subsamples[we].subsample_size)}}C.push(D),qe+=Q,se+=Y}}Ce=se-Ne.baseMediaDecodeTime}}return{sampleList:C,lastSequenceNumber:st,totalDuration:Ce,numSequences:ft}},findInitRange:function(Z){var Y=null,$=_(Z);if(!$)return Y;var Q=$.getBox("ftyp"),se=$.getBox("moov");return T.debug("Searching for initialization."),se&&se.isComplete&&(Y=(Q?Q.offset:se.offset)+"-"+(se.offset+se.size-1),T.debug("Found the initialization.  Range: "+Y)),Y},parsePayload:function(Z,Y,$){if($===void 0&&($=0),!Y||$+8>=Y.byteLength)return new P.Z(0,!1);for(var Q,se=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,C=0;$<se.byteLength;){var X=A(se,$),ce=b(se,$+4);if(X===0)break;$+X<=se.byteLength&&(Z.indexOf(ce)>=0?Q=new P.Z($,!0,X,ce):C=$+X),$+=X}return Q||new P.Z(C,!1)}},T=(0,U.Z)(M).getInstance().getLogger(F),F}g.__dashjs_factory_name="BoxParser",p.Z=E.Z.getSingletonFactory(g)},1715:function(N,p,w){w.d(p,{B:function(){return P}});var U=w(5448),x=w(7803),E=w(3393),y=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function P(){var T="ManagedMediaSource"in window,F="WebKitMediaSource"in window,M="MediaSource"in window;return T||F||M}function g(){var T,F,M;return T={setConfig:function(_){_&&_.settings&&(F=_.settings)},supportsMediaSource:P,supportsEncryptedMedia:function(){return M},supportsCodec:function(_,A){return A!==E.Z.AUDIO&&A!==E.Z.VIDEO?Promise.resolve(!0):function(b,Z){return F.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(b.codec&&Z===E.Z.AUDIO||Z===E.Z.VIDEO&&b.codec&&b.width&&b.height&&b.bitrate&&b.framerate)}(_,A)?function(b,Z){return new Promise(function(Y){if(b&&b.codec){var $={type:"media-source"};$[Z]={},$[Z].contentType=b.codec,$[Z].width=b.width,$[Z].height=b.height,$[Z].bitrate=parseInt(b.bitrate),$[Z].framerate=parseFloat(b.framerate),navigator.mediaCapabilities.decodingInfo($).then(function(Q){Y(Q.supported)}).catch(function(){Y(!1)})}else Y(!1)})}(_,A):function(b){return new Promise(function(Z){if(b&&b.codec){var Y=b.codec;b.width&&b.height&&(Y+=';width="'+b.width+'";height="'+b.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(Y)||"MediaSource"in window&&MediaSource.isTypeSupported(Y)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(Y)?Z(!0):Z(!1)}else Z(!1)})}(_)},setEncryptedMediaSupported:function(_){M=_},supportsEssentialProperty:function(_){try{return x.Y.indexOf(_.schemeIdUri)!==-1||E.Z.FONT_DOWNLOAD_DVB_SCHEME===_.schemeIdUri}catch(A){return!0}},codecRootCompatibleWithCodec:function(_,A){for(var b,Z=_.split(".")[0],Y=A.indexOf(Z)===0,$=0;$<y.length;$++)if(y[$].codec===Z){b=y[$];break}return b?Y||b.compatibleCodecs.some(function(Q){return A.indexOf(Q)===0}):Y}},M=!1,T}g.__dashjs_factory_name="Capabilities",p.Z=U.Z.getSingletonFactory(g)},2295:function(N,p,w){var U=w(5448),x=w(3106);function E(){return{customTimeRangeArray:[],length:0,add:function(y,P){var g;for(g=0;g<this.customTimeRangeArray.length&&y>this.customTimeRangeArray[g].start;g++);for(this.customTimeRangeArray.splice(g,0,{start:y,end:P}),g=0;g<this.customTimeRangeArray.length-1;g++)this.mergeRanges(g,g+1)&&g--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(y,P){for(var g=0;g<this.customTimeRangeArray.length;g++)if(y<=this.customTimeRangeArray[g].start&&P>=this.customTimeRangeArray[g].end)this.customTimeRangeArray.splice(g,1),g--;else{if(y>this.customTimeRangeArray[g].start&&P<this.customTimeRangeArray[g].end){this.customTimeRangeArray.splice(g+1,0,{start:P,end:this.customTimeRangeArray[g].end}),this.customTimeRangeArray[g].end=y;break}y>this.customTimeRangeArray[g].start&&y<this.customTimeRangeArray[g].end?this.customTimeRangeArray[g].end=y:P>this.customTimeRangeArray[g].start&&P<this.customTimeRangeArray[g].end&&(this.customTimeRangeArray[g].start=P)}this.length=this.customTimeRangeArray.length},mergeRanges:function(y,P){var g=this.customTimeRangeArray[y],T=this.customTimeRangeArray[P];return g.start<=T.start&&T.start<=g.end&&g.end<=T.end?(g.end=T.end,this.customTimeRangeArray.splice(P,1),!0):T.start<=g.start&&g.start<=T.end&&T.end<=g.end?(g.start=T.start,this.customTimeRangeArray.splice(P,1),!0):T.start<=g.start&&g.start<=T.end&&g.end<=T.end?(this.customTimeRangeArray.splice(y,1),!0):g.start<=T.start&&T.start<=g.end&&T.end<=g.end&&(this.customTimeRangeArray.splice(P,1),!0)},start:function(y){return(0,x.SE)(y),y>=this.customTimeRangeArray.length||y<0?NaN:this.customTimeRangeArray[y].start},end:function(y){return(0,x.SE)(y),y>=this.customTimeRangeArray.length||y<0?NaN:this.customTimeRangeArray[y].end}}}E.__dashjs_factory_name="CustomTimeRanges",p.Z=U.Z.getClassFactory(E)},5:function(N,p,w){var U=w(5448);function x(){var E,y=/^[a-z][a-z0-9+\-_.]*:/i,P=/^https?:\/\//i,g=/^https:\/\//i,T=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,F=function(Q,se){try{return new window.URL(Q,se).toString()}catch(C){return Q}},M=function(Q,se){var C=_;if(!se||!Z(Q))return Q;Y(Q)&&(C=A),$(Q)&&(C=b);var X=C(se),ce=X.charAt(X.length-1)!=="/"&&Q.charAt(0)!=="/"?"/":"";return[X,Q].join(ce)};function _(Q){var se=Q.indexOf("/"),C=Q.lastIndexOf("/");return se!==-1?C===se+1?Q:(Q.indexOf("?")!==-1&&(Q=Q.substring(0,Q.indexOf("?"))),Q.substring(0,C+1)):""}function A(Q){var se=Q.match(T);return se?se[1]:""}function b(Q){var se=Q.match(y);return se?se[0]:""}function Z(Q){return!y.test(Q)}function Y(Q){return Z(Q)&&Q.charAt(0)==="/"}function $(Q){return Q.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),E=F}catch(Q){}finally{E=E||M}}(),{parseBaseUrl:_,parseOrigin:A,parseScheme:b,isRelative:Z,isPathAbsolute:Y,isSchemeRelative:$,isHTTPURL:function(Q){return P.test(Q)},isHTTPS:function(Q){return g.test(Q)},removeHostname:function(Q){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(Q)[2].substring(1)},resolve:function(Q,se){return E(Q,se)}}}x.__dashjs_factory_name="DefaultURLUtils",p.Z=U.Z.getSingletonFactory(x)},8260:function(N,p,w){var U=w(2839),x=w(5448);function E(){var y;function P(T){var F=[];if(!T||!y||typeof y.fetchAll!="function")return F;for(var M,_=y.fetchAll(T),A=0,b=_.length;A<b;A++)(M=g(_[A]))&&F.push(M);return F}function g(T){if(!T)return null;var F=new U.Z(T);return T.hasOwnProperty("_incomplete")&&(F.isComplete=!T._incomplete),F}return{getBox:function(T){return T&&y&&y.boxes&&y.boxes.length!==0&&typeof y.fetch=="function"?g(y.fetch(T)):null},getBoxes:P,setData:function(T){y=T},getLastBox:function(){if(!y||!y.boxes||!y.boxes.length)return null;var T=P(y.boxes[y.boxes.length-1].type);return T.length>0?T[T.length-1]:null}}}E.__dashjs_factory_name="IsoFile",p.Z=x.Z.getClassFactory(E)},7473:function(N,p,w){w.d(p,{k:function(){return x}});var U=w(5448);function x(y,P){var g={url:y.url,method:y.method,headers:Object.assign({},y.headers),credentials:y.withCredentials?"include":void 0,range:y.request.range};return Promise.resolve(P.modifyRequest(g)).then(function(){return Object.assign(y,g,{withCredentials:g.credentials==="include"})})}function E(){return{modifyRequest:null,modifyRequestURL:function(y){return y},modifyRequestHeader:function(y,P){return P.url,y}}}E.__dashjs_factory_name="RequestModifier",p.Z=U.Z.getSingletonFactory(E)},3106:function(N,p,w){w.d(p,{PS:function(){return E},SE:function(){return y}});var U=w(3393);function x(P){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},x(P)}function E(P,g){if(x(P)!==g)throw U.Z.BAD_ARGUMENT_ERROR}function y(P){if(P===null||isNaN(P)||P%1!=0)throw U.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(N,p,w){var U=w(5448),x=w(5);function E(){var P,g=[],T=this.context;function F(M,_,A){var b=function(Z){var Y;for(Y=0;Y<g.length;Y++)if(g[Y].regex.test(Z))return g[Y].utils;return P}(A||_);return b&&typeof b[M]=="function"?b[M](_,A):P[M](_,A)}return P=(0,x.Z)(T).getInstance(),{registerUrlRegex:function(M,_){g.push({regex:M,utils:_})},parseBaseUrl:function(M){return F("parseBaseUrl",M)},parseOrigin:function(M){return F("parseOrigin",M)},parseScheme:function(M){return F("parseScheme",M)},isRelative:function(M){return F("isRelative",M)},isPathAbsolute:function(M){return F("isPathAbsolute",M)},isSchemeRelative:function(M){return F("isSchemeRelative",M)},isHTTPURL:function(M){return F("isHTTPURL",M)},isHTTPS:function(M){return F("isHTTPS",M)},removeHostname:function(M){return F("removeHostname",M)},resolve:function(M,_){return F("resolve",M,_)}}}E.__dashjs_factory_name="URLUtils";var y=U.Z.getSingletonFactory(E);p.Z=y},5459:function(N,p){p.Z=function w(U,x,E){(function(y,P){if(!(y instanceof P))throw new TypeError("Cannot call a class as a function")})(this,w),this.code=U||null,this.message=x||null,this.data=E||null}},3186:function(N,p,w){var U=w(7855);function x(y,P){for(var g=0;g<P.length;g++){var T=P[g];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(y,T.key,T)}}var E=function(){function y(T){(function(F,M){if(!(F instanceof M))throw new TypeError("Cannot call a class as a function")})(this,y),this.action=y.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=T||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var P,g;return P=y,(g=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===U.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(T){this.type=T&&T.init?U.w.INIT_SEGMENT_TYPE:U.w.MEDIA_SEGMENT_TYPE,this.url=T&&T.url?T.url:null,this.range=T&&T.range?T.range.start+"-"+T.range.end:null,this.mediaType=T&&T.mediaType?T.mediaType:null}}])&&x(P.prototype,g),y}();E.ACTION_DOWNLOAD="download",E.ACTION_COMPLETE="complete",p.Z=E},2839:function(N,p){function w(x,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}var U=function(){function x(P){if(function(b,Z){if(!(b instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,x),this.offset=P._offset,this.type=P.type,this.size=P.size,this.boxes=[],P.boxes)for(var g=0;g<P.boxes.length;g++)this.boxes.push(new x(P.boxes[g]));switch(this.isComplete=!0,P.type){case"sidx":if(this.timescale=P.timescale,this.earliest_presentation_time=P.earliest_presentation_time,this.first_offset=P.first_offset,this.references=P.references,P.references){this.references=[];for(var T=0;T<P.references.length;T++){var F={reference_type:P.references[T].reference_type,referenced_size:P.references[T].referenced_size,subsegment_duration:P.references[T].subsegment_duration};this.references.push(F)}}break;case"emsg":this.id=P.id,this.version=P.version===1?1:0,this.value=P.value,this.timescale=P.timescale,this.scheme_id_uri=P.scheme_id_uri,this.presentation_time_delta=P.version===1?P.presentation_time:P.presentation_time_delta,this.event_duration=P.event_duration,this.message_data=P.message_data;break;case"mdhd":this.timescale=P.timescale;break;case"mfhd":this.sequence_number=P.sequence_number;break;case"subs":this.entry_count=P.entry_count,this.entries=P.entries;break;case"tfhd":this.base_data_offset=P.base_data_offset,this.sample_description_index=P.sample_description_index,this.default_sample_duration=P.default_sample_duration,this.default_sample_size=P.default_sample_size,this.default_sample_flags=P.default_sample_flags,this.flags=P.flags;break;case"tfdt":this.version=P.version,this.baseMediaDecodeTime=P.baseMediaDecodeTime,this.flags=P.flags;break;case"trun":if(this.sample_count=P.sample_count,this.first_sample_flags=P.first_sample_flags,this.data_offset=P.data_offset,this.flags=P.flags,this.samples=P.samples,P.samples){this.samples=[];for(var M=0,_=P.samples.length;M<_;M++){var A={sample_size:P.samples[M].sample_size,sample_duration:P.samples[M].sample_duration,sample_composition_time_offset:P.samples[M].sample_composition_time_offset};this.samples.push(A)}}break;case"prft":this.version=P.version,this.reference_track_ID=P.reference_track_ID,this.ntp_timestamp_sec=P.ntp_timestamp_sec,this.ntp_timestamp_frac=P.ntp_timestamp_frac,this.media_time=P.media_time,this.flags=P.flags}}var E,y;return E=x,(y=[{key:"getChildBox",value:function(P){for(var g=0;g<this.boxes.length;g++)if(this.boxes[g].type===P)return this.boxes[g]}},{key:"getChildBoxes",value:function(P){for(var g=[],T=0;T<this.boxes.length;T++)this.boxes[T].type===P&&g.push(this.boxes[T]);return g}}])&&w(E.prototype,y),x}();p.Z=U},9597:function(N,p){p.Z=function w(U,x,E){(function(y,P){if(!(y instanceof P))throw new TypeError("Cannot call a class as a function")})(this,w),this.lastCompletedOffset=U,this.found=x,this.size=E}},2128:function(N,p){p.Z=function w(){(function(U,x){if(!(U instanceof x))throw new TypeError("Cannot call a class as a function")})(this,w),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(N,p,w){function U(y,P){if(!(y instanceof P))throw new TypeError("Cannot call a class as a function")}w.d(p,{O:function(){return E},w:function(){return x}});var x=function y(){U(this,y),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},E=function y(){U(this,y),this.s=null,this.d=null,this.b=[]};x.GET="GET",x.HEAD="HEAD",x.MPD_TYPE="MPD",x.XLINK_EXPANSION_TYPE="XLinkExpansion",x.INIT_SEGMENT_TYPE="InitializationSegment",x.INDEX_SEGMENT_TYPE="IndexSegment",x.MEDIA_SEGMENT_TYPE="MediaSegment",x.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",x.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",x.DVB_REPORTING_TYPE="DVBReporting",x.LICENSE="license",x.CONTENT_STEERING_TYPE="ContentSteering",x.OTHER_TYPE="other"},3039:function(N,p){function w(x,E){return function(y,P){for(var g,T,F,M=U(y,"tag"),_=U(P==null?"*":P,"range"),A=[],b=-1;++b<_.length;)if(g=_[b].toLowerCase(),E||g!=="*"){for(T=-1,F=[];++T<M.length;)if(x(M[T].toLowerCase(),g)){if(!E)return M[T];A.push(M[T])}else F.push(M[T]);M=F}return E?A:void 0}}function U(x,E){var y=x&&typeof x=="string"?[x]:x;if(!y||typeof y!="object"||!("length"in y))throw new Error("Invalid "+E+" `"+y+"`, expected non-empty string");return y}p.basicFilter=w(function(x,E){return E==="*"||x===E||x.indexOf(E+"-")>-1},!0),p.extendedFilter=w(function(x,E){var y=x.split("-"),P=E.split("-"),g=0,T=0;if(P[T]!=="*"&&y[g]!==P[T])return!1;for(g++,T++;T<P.length;)if(P[T]!=="*"){if(!y[g])return!1;if(y[g]!==P[T]){if(y[g].length===1)return!1;g++}else g++,T++}else T++;return!0},!0),p.lookup=w(function(x,E){for(var y,P=E;;){if(P==="*"||x===P)return!0;if((y=P.lastIndexOf("-"))<0)return!1;P.charAt(y-2)==="-"&&(y-=2),P=P.slice(0,y)}})},3973:function(N,p,w){N.exports=w(3854)},3854:function(N,p,w){var U=w(2415),x=w(3039),E=w(7778),y=w(5813),P=w(3165),g=w(9460);N.exports=function(Y,$){var Q,se=$||{},C=U.parse(String(Y||"").toLowerCase(),se),X=U.stringify(C),ce=-1;if(!X)return X;for(;++ce<E.length;)x.extendedFilter(X,E[ce].from).length&&(_(C,E[ce].from,E[ce].to),X=U.stringify(C));for(ce=-1;++ce<y.length;)A(C,y[ce].from.field,y[ce].from.value)&&b(C,y[ce].to.field,y[ce].to.value);for(X=U.stringify(Object.assign({},C,M)),ce=-1;++ce<P.length;)X===P[ce]&&(_(C,P[ce],P[ce].split("-").slice(0,-1).join("-")),X=U.stringify(Object.assign({},C,M)));if(C.extensions.sort(Z),se.warning)for(Q in g)T.call(g[Q],C[Q])&&se.warning("Deprecated "+Q+" `"+C[Q]+"`, expected one of `"+g[Q][C[Q]].join("`, `")+"`",null,7);return C.script&&(C.script=C.script.charAt(0).toUpperCase()+C.script.slice(1)),C.region&&(C.region=C.region.toUpperCase()),U.stringify(C)};var T={}.hasOwnProperty,F=new Intl.Collator,M={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function _(Y,$,Q){var se,C=U.parse($),X=U.parse(Q),ce=[];for(se in C)C[se]&&C[se].length&&A(Y,se,C[se])&&ce.push(se);for(se in X)X[se]&&X[se].length&&(ce.indexOf(se)>-1||!Y[se]||!Y[se].length)&&b(Y,se,X[se])}function A(Y,$,Q){var se,C,X,ce,oe=!1;if(Q){if(C=se=Y[$],se&&typeof se=="object")for(C=[],X=-1;++X<se.length;)ce=se[X],Q.indexOf(ce)<0?C.push(ce):oe=!0;else se===Q&&(C=null,oe=!0);Y[$]=C}return oe}function b(Y,$,Q){var se,C,X,ce=Y[$];if(ce&&typeof ce=="object")for(se=[].concat(Q),C=-1;++C<se.length;)X=se[C],ce.indexOf(X)<0&&ce.push(X);else Y[$]=Q}function Z(Y,$){return F.compare(Y.singleton,$.singleton)}},2415:function(N,p,w){p.parse=w(6903),p.stringify=w(6713)},6903:function(N,p,w){var U=w(2219),x=w(3516),E=w(395),y=w(858),P=w(8589);N.exports=function T(F,M){var _,A,b,Z=M||{},Y={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},$=String(F),Q=$.toLowerCase(),se=0;if(F==null)throw new Error("Expected string, got `"+F+"`");if(g.call(P,Q))return(Z.normalize==null||Z.normalize)&&P[Q]?T(P[Q]):(Y[y.indexOf(Q)===-1?"irregular":"regular"]=$,Y);for(;x(Q.charCodeAt(se))&&se<9;)se++;if(se>1&&se<9){if(Y.language=$.slice(0,se),se<4)for(A=0;Q.charCodeAt(se)===45&&x(Q.charCodeAt(se+1))&&x(Q.charCodeAt(se+2))&&x(Q.charCodeAt(se+3))&&!x(Q.charCodeAt(se+4));){if(A>2)return C(se,3,"Too many extended language subtags, expected at most 3 subtags");Y.extendedLanguageSubtags.push($.slice(se+1,se+4)),se+=4,A++}for(Q.charCodeAt(se)===45&&x(Q.charCodeAt(se+1))&&x(Q.charCodeAt(se+2))&&x(Q.charCodeAt(se+3))&&x(Q.charCodeAt(se+4))&&!x(Q.charCodeAt(se+5))&&(Y.script=$.slice(se+1,se+5),se+=5),Q.charCodeAt(se)===45&&(x(Q.charCodeAt(se+1))&&x(Q.charCodeAt(se+2))&&!x(Q.charCodeAt(se+3))?(Y.region=$.slice(se+1,se+3),se+=3):E(Q.charCodeAt(se+1))&&E(Q.charCodeAt(se+2))&&E(Q.charCodeAt(se+3))&&!E(Q.charCodeAt(se+4))&&(Y.region=$.slice(se+1,se+4),se+=4));Q.charCodeAt(se)===45;){for(b=_=se+1;U(Q.charCodeAt(b));){if(b-_>7)return C(b,1,"Too long variant, expected at most 8 characters");b++}if(!(b-_>4||b-_>3&&E(Q.charCodeAt(_))))break;Y.variants.push($.slice(_,b)),se=b}for(;Q.charCodeAt(se)===45&&Q.charCodeAt(se+1)!==120&&U(Q.charCodeAt(se+1))&&Q.charCodeAt(se+2)===45&&U(Q.charCodeAt(se+3));){for(b=se+2,A=0;Q.charCodeAt(b)===45&&U(Q.charCodeAt(b+1))&&U(Q.charCodeAt(b+2));)for(b=(_=b+1)+2,A++;U(Q.charCodeAt(b));){if(b-_>7)return C(b,2,"Too long extension, expected at most 8 characters");b++}if(!A)return C(b,4,"Empty extension, extensions must have at least 2 characters of content");Y.extensions.push({singleton:$.charAt(se+1),extensions:$.slice(se+3,b).split("-")}),se=b}}else se=0;if(se===0&&Q.charCodeAt(se)===120||Q.charCodeAt(se)===45&&Q.charCodeAt(se+1)===120)for(b=se=se?se+2:1;Q.charCodeAt(b)===45&&U(Q.charCodeAt(b+1));){for(b=_=se+1;U(Q.charCodeAt(b));){if(b-_>7)return C(b,5,"Too long private-use area, expected at most 8 characters");b++}Y.privateuse.push($.slice(se+1,b)),se=b}return se!==$.length?C(se,6,"Found superfluous content after tag"):Y;function C(X,ce,oe){return Z.warning&&Z.warning(oe,ce,X),Z.forgiving?Y:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var g={}.hasOwnProperty},6713:function(N){N.exports=function(p){var w,U,x,E=p||{},y=[];if(E.irregular||E.regular)return E.irregular||E.regular;if(E.language)for(y=y.concat(E.language,E.extendedLanguageSubtags||[],E.script||[],E.region||[],E.variants||[]),w=E.extensions||[],U=-1;++U<w.length;)(x=w[U]).singleton&&x.extensions&&x.extensions.length&&(y=y.concat(x.singleton,x.extensions));return E.privateuse&&E.privateuse.length&&(y=y.concat("x",E.privateuse)),y.join("-")}},1549:function(N,p,w){var U=w(6693),x=w(2165),E=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;p.Buffer=g,p.SlowBuffer=function(L){return+L!=L&&(L=0),g.alloc(+L)},p.INSPECT_MAX_BYTES=50;var y=2147483647;function P(L){if(L>y)throw new RangeError('The value "'+L+'" is invalid for option "size"');var D=new Uint8Array(L);return Object.setPrototypeOf(D,g.prototype),D}function g(L,D,G){if(typeof L=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return M(L)}return T(L,D,G)}function T(L,D,G){if(typeof L=="string")return function(pe,Ke){if(typeof Ke=="string"&&Ke!==""||(Ke="utf8"),!g.isEncoding(Ke))throw new TypeError("Unknown encoding: "+Ke);var wt=0|Z(pe,Ke),lt=P(wt),ut=lt.write(pe,Ke);return ut!==wt&&(lt=lt.slice(0,ut)),lt}(L,D);if(ArrayBuffer.isView(L))return function(pe){if(Ne(pe,Uint8Array)){var Ke=new Uint8Array(pe);return A(Ke.buffer,Ke.byteOffset,Ke.byteLength)}return _(pe)}(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(Ne(L,ArrayBuffer)||L&&Ne(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ne(L,SharedArrayBuffer)||L&&Ne(L.buffer,SharedArrayBuffer)))return A(L,D,G);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var K=L.valueOf&&L.valueOf();if(K!=null&&K!==L)return g.from(K,D,G);var ge=function(pe){if(g.isBuffer(pe)){var Ke=0|b(pe.length),wt=P(Ke);return wt.length===0||pe.copy(wt,0,0,Ke),wt}return pe.length!==void 0?typeof pe.length!="number"||ne(pe.length)?P(0):_(pe):pe.type==="Buffer"&&Array.isArray(pe.data)?_(pe.data):void 0}(L);if(ge)return ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return g.from(L[Symbol.toPrimitive]("string"),D,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}function F(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function M(L){return F(L),P(L<0?0:0|b(L))}function _(L){for(var D=L.length<0?0:0|b(L.length),G=P(D),K=0;K<D;K+=1)G[K]=255&L[K];return G}function A(L,D,G){if(D<0||L.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<D+(G||0))throw new RangeError('"length" is outside of buffer bounds');var K;return K=D===void 0&&G===void 0?new Uint8Array(L):G===void 0?new Uint8Array(L,D):new Uint8Array(L,D,G),Object.setPrototypeOf(K,g.prototype),K}function b(L){if(L>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return 0|L}function Z(L,D){if(g.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||Ne(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);var G=L.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&G===0)return 0;for(var ge=!1;;)switch(D){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return Bt(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return Et(L).length;default:if(ge)return K?-1:Bt(L).length;D=(""+D).toLowerCase(),ge=!0}}function Y(L,D,G){var K=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(D>>>=0))return"";for(L||(L="utf8");;)switch(L){case"hex":return ft(this,D,G);case"utf8":case"utf-8":return Je(this,D,G);case"ascii":return qe(this,D,G);case"latin1":case"binary":return st(this,D,G);case"base64":return be(this,D,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ce(this,D,G);default:if(K)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),K=!0}}function $(L,D,G){var K=L[D];L[D]=L[G],L[G]=K}function Q(L,D,G,K,ge){if(L.length===0)return-1;if(typeof G=="string"?(K=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),ne(G=+G)&&(G=ge?0:L.length-1),G<0&&(G=L.length+G),G>=L.length){if(ge)return-1;G=L.length-1}else if(G<0){if(!ge)return-1;G=0}if(typeof D=="string"&&(D=g.from(D,K)),g.isBuffer(D))return D.length===0?-1:se(L,D,G,K,ge);if(typeof D=="number")return D&=255,typeof Uint8Array.prototype.indexOf=="function"?ge?Uint8Array.prototype.indexOf.call(L,D,G):Uint8Array.prototype.lastIndexOf.call(L,D,G):se(L,[D],G,K,ge);throw new TypeError("val must be string, number or Buffer")}function se(L,D,G,K,ge){var pe,Ke=1,wt=L.length,lt=D.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(L.length<2||D.length<2)return-1;Ke=2,wt/=2,lt/=2,G/=2}function ut(Tt,Mt){return Ke===1?Tt[Mt]:Tt.readUInt16BE(Mt*Ke)}if(ge){var nt=-1;for(pe=G;pe<wt;pe++)if(ut(L,pe)===ut(D,nt===-1?0:pe-nt)){if(nt===-1&&(nt=pe),pe-nt+1===lt)return nt*Ke}else nt!==-1&&(pe-=pe-nt),nt=-1}else for(G+lt>wt&&(G=wt-lt),pe=G;pe>=0;pe--){for(var ht=!0,_t=0;_t<lt;_t++)if(ut(L,pe+_t)!==ut(D,_t)){ht=!1;break}if(ht)return pe}return-1}function C(L,D,G,K){G=Number(G)||0;var ge=L.length-G;K?(K=Number(K))>ge&&(K=ge):K=ge;var pe=D.length;K>pe/2&&(K=pe/2);for(var Ke=0;Ke<K;++Ke){var wt=parseInt(D.substr(2*Ke,2),16);if(ne(wt))return Ke;L[G+Ke]=wt}return Ke}function X(L,D,G,K){return Dt(Bt(D,L.length-G),L,G,K)}function ce(L,D,G,K){return Dt(function(ge){for(var pe=[],Ke=0;Ke<ge.length;++Ke)pe.push(255&ge.charCodeAt(Ke));return pe}(D),L,G,K)}function oe(L,D,G,K){return Dt(Et(D),L,G,K)}function me(L,D,G,K){return Dt(function(ge,pe){for(var Ke,wt,lt,ut=[],nt=0;nt<ge.length&&!((pe-=2)<0);++nt)wt=(Ke=ge.charCodeAt(nt))>>8,lt=Ke%256,ut.push(lt),ut.push(wt);return ut}(D,L.length-G),L,G,K)}function be(L,D,G){return D===0&&G===L.length?U.fromByteArray(L):U.fromByteArray(L.slice(D,G))}function Je(L,D,G){G=Math.min(L.length,G);for(var K=[],ge=D;ge<G;){var pe,Ke,wt,lt,ut=L[ge],nt=null,ht=ut>239?4:ut>223?3:ut>191?2:1;if(ge+ht<=G)switch(ht){case 1:ut<128&&(nt=ut);break;case 2:(192&(pe=L[ge+1]))==128&&(lt=(31&ut)<<6|63&pe)>127&&(nt=lt);break;case 3:pe=L[ge+1],Ke=L[ge+2],(192&pe)==128&&(192&Ke)==128&&(lt=(15&ut)<<12|(63&pe)<<6|63&Ke)>2047&&(lt<55296||lt>57343)&&(nt=lt);break;case 4:pe=L[ge+1],Ke=L[ge+2],wt=L[ge+3],(192&pe)==128&&(192&Ke)==128&&(192&wt)==128&&(lt=(15&ut)<<18|(63&pe)<<12|(63&Ke)<<6|63&wt)>65535&&lt<1114112&&(nt=lt)}nt===null?(nt=65533,ht=1):nt>65535&&(nt-=65536,K.push(nt>>>10&1023|55296),nt=56320|1023&nt),K.push(nt),ge+=ht}return function(_t){var Tt=_t.length;if(Tt<=we)return String.fromCharCode.apply(String,_t);for(var Mt="",_n=0;_n<Tt;)Mt+=String.fromCharCode.apply(String,_t.slice(_n,_n+=we));return Mt}(K)}p.kMaxLength=y,g.TYPED_ARRAY_SUPPORT=function(){try{var L=new Uint8Array(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,Uint8Array.prototype),Object.setPrototypeOf(L,D),L.foo()===42}catch(G){return!1}}(),g.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}}),g.poolSize=8192,g.from=function(L,D,G){return T(L,D,G)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),g.alloc=function(L,D,G){return function(K,ge,pe){return F(K),K<=0?P(K):ge!==void 0?typeof pe=="string"?P(K).fill(ge,pe):P(K).fill(ge):P(K)}(L,D,G)},g.allocUnsafe=function(L){return M(L)},g.allocUnsafeSlow=function(L){return M(L)},g.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==g.prototype},g.compare=function(L,D){if(Ne(L,Uint8Array)&&(L=g.from(L,L.offset,L.byteLength)),Ne(D,Uint8Array)&&(D=g.from(D,D.offset,D.byteLength)),!g.isBuffer(L)||!g.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===D)return 0;for(var G=L.length,K=D.length,ge=0,pe=Math.min(G,K);ge<pe;++ge)if(L[ge]!==D[ge]){G=L[ge],K=D[ge];break}return G<K?-1:K<G?1:0},g.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(L,D){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return g.alloc(0);var G;if(D===void 0)for(D=0,G=0;G<L.length;++G)D+=L[G].length;var K=g.allocUnsafe(D),ge=0;for(G=0;G<L.length;++G){var pe=L[G];if(Ne(pe,Uint8Array))ge+pe.length>K.length?g.from(pe).copy(K,ge):Uint8Array.prototype.set.call(K,pe,ge);else{if(!g.isBuffer(pe))throw new TypeError('"list" argument must be an Array of Buffers');pe.copy(K,ge)}ge+=pe.length}return K},g.byteLength=Z,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var L=this.length;if(L%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<L;D+=2)$(this,D,D+1);return this},g.prototype.swap32=function(){var L=this.length;if(L%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<L;D+=4)$(this,D,D+3),$(this,D+1,D+2);return this},g.prototype.swap64=function(){var L=this.length;if(L%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<L;D+=8)$(this,D,D+7),$(this,D+1,D+6),$(this,D+2,D+5),$(this,D+3,D+4);return this},g.prototype.toString=function(){var L=this.length;return L===0?"":arguments.length===0?Je(this,0,L):Y.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(L){if(!g.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L||g.compare(this,L)===0},g.prototype.inspect=function(){var L="",D=p.INSPECT_MAX_BYTES;return L=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(L+=" ... "),"<Buffer "+L+">"},E&&(g.prototype[E]=g.prototype.inspect),g.prototype.compare=function(L,D,G,K,ge){if(Ne(L,Uint8Array)&&(L=g.from(L,L.offset,L.byteLength)),!g.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(D===void 0&&(D=0),G===void 0&&(G=L?L.length:0),K===void 0&&(K=0),ge===void 0&&(ge=this.length),D<0||G>L.length||K<0||ge>this.length)throw new RangeError("out of range index");if(K>=ge&&D>=G)return 0;if(K>=ge)return-1;if(D>=G)return 1;if(this===L)return 0;for(var pe=(ge>>>=0)-(K>>>=0),Ke=(G>>>=0)-(D>>>=0),wt=Math.min(pe,Ke),lt=this.slice(K,ge),ut=L.slice(D,G),nt=0;nt<wt;++nt)if(lt[nt]!==ut[nt]){pe=lt[nt],Ke=ut[nt];break}return pe<Ke?-1:Ke<pe?1:0},g.prototype.includes=function(L,D,G){return this.indexOf(L,D,G)!==-1},g.prototype.indexOf=function(L,D,G){return Q(this,L,D,G,!0)},g.prototype.lastIndexOf=function(L,D,G){return Q(this,L,D,G,!1)},g.prototype.write=function(L,D,G,K){if(D===void 0)K="utf8",G=this.length,D=0;else if(G===void 0&&typeof D=="string")K=D,G=this.length,D=0;else{if(!isFinite(D))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");D>>>=0,isFinite(G)?(G>>>=0,K===void 0&&(K="utf8")):(K=G,G=void 0)}var ge=this.length-D;if((G===void 0||G>ge)&&(G=ge),L.length>0&&(G<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var pe=!1;;)switch(K){case"hex":return C(this,L,D,G);case"utf8":case"utf-8":return X(this,L,D,G);case"ascii":case"latin1":case"binary":return ce(this,L,D,G);case"base64":return oe(this,L,D,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,L,D,G);default:if(pe)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),pe=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var we=4096;function qe(L,D,G){var K="";G=Math.min(L.length,G);for(var ge=D;ge<G;++ge)K+=String.fromCharCode(127&L[ge]);return K}function st(L,D,G){var K="";G=Math.min(L.length,G);for(var ge=D;ge<G;++ge)K+=String.fromCharCode(L[ge]);return K}function ft(L,D,G){var K=L.length;(!D||D<0)&&(D=0),(!G||G<0||G>K)&&(G=K);for(var ge="",pe=D;pe<G;++pe)ge+=Be[L[pe]];return ge}function Ce(L,D,G){for(var K=L.slice(D,G),ge="",pe=0;pe<K.length-1;pe+=2)ge+=String.fromCharCode(K[pe]+256*K[pe+1]);return ge}function He(L,D,G){if(L%1!=0||L<0)throw new RangeError("offset is not uint");if(L+D>G)throw new RangeError("Trying to access beyond buffer length")}function vt(L,D,G,K,ge,pe){if(!g.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>ge||D<pe)throw new RangeError('"value" argument is out of bounds');if(G+K>L.length)throw new RangeError("Index out of range")}function Re(L,D,G,K,ge,pe){if(G+K>L.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function Ye(L,D,G,K,ge){return D=+D,G>>>=0,ge||Re(L,0,G,4),x.write(L,D,G,K,23,4),G+4}function ot(L,D,G,K,ge){return D=+D,G>>>=0,ge||Re(L,0,G,8),x.write(L,D,G,K,52,8),G+8}g.prototype.slice=function(L,D){var G=this.length;(L=~~L)<0?(L+=G)<0&&(L=0):L>G&&(L=G),(D=D===void 0?G:~~D)<0?(D+=G)<0&&(D=0):D>G&&(D=G),D<L&&(D=L);var K=this.subarray(L,D);return Object.setPrototypeOf(K,g.prototype),K},g.prototype.readUintLE=g.prototype.readUIntLE=function(L,D,G){L>>>=0,D>>>=0,G||He(L,D,this.length);for(var K=this[L],ge=1,pe=0;++pe<D&&(ge*=256);)K+=this[L+pe]*ge;return K},g.prototype.readUintBE=g.prototype.readUIntBE=function(L,D,G){L>>>=0,D>>>=0,G||He(L,D,this.length);for(var K=this[L+--D],ge=1;D>0&&(ge*=256);)K+=this[L+--D]*ge;return K},g.prototype.readUint8=g.prototype.readUInt8=function(L,D){return L>>>=0,D||He(L,1,this.length),this[L]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(L,D){return L>>>=0,D||He(L,2,this.length),this[L]|this[L+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(L,D){return L>>>=0,D||He(L,2,this.length),this[L]<<8|this[L+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(L,D){return L>>>=0,D||He(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+16777216*this[L+3]},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(L,D){return L>>>=0,D||He(L,4,this.length),16777216*this[L]+(this[L+1]<<16|this[L+2]<<8|this[L+3])},g.prototype.readIntLE=function(L,D,G){L>>>=0,D>>>=0,G||He(L,D,this.length);for(var K=this[L],ge=1,pe=0;++pe<D&&(ge*=256);)K+=this[L+pe]*ge;return K>=(ge*=128)&&(K-=Math.pow(2,8*D)),K},g.prototype.readIntBE=function(L,D,G){L>>>=0,D>>>=0,G||He(L,D,this.length);for(var K=D,ge=1,pe=this[L+--K];K>0&&(ge*=256);)pe+=this[L+--K]*ge;return pe>=(ge*=128)&&(pe-=Math.pow(2,8*D)),pe},g.prototype.readInt8=function(L,D){return L>>>=0,D||He(L,1,this.length),128&this[L]?-1*(255-this[L]+1):this[L]},g.prototype.readInt16LE=function(L,D){L>>>=0,D||He(L,2,this.length);var G=this[L]|this[L+1]<<8;return 32768&G?4294901760|G:G},g.prototype.readInt16BE=function(L,D){L>>>=0,D||He(L,2,this.length);var G=this[L+1]|this[L]<<8;return 32768&G?4294901760|G:G},g.prototype.readInt32LE=function(L,D){return L>>>=0,D||He(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},g.prototype.readInt32BE=function(L,D){return L>>>=0,D||He(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},g.prototype.readFloatLE=function(L,D){return L>>>=0,D||He(L,4,this.length),x.read(this,L,!0,23,4)},g.prototype.readFloatBE=function(L,D){return L>>>=0,D||He(L,4,this.length),x.read(this,L,!1,23,4)},g.prototype.readDoubleLE=function(L,D){return L>>>=0,D||He(L,8,this.length),x.read(this,L,!0,52,8)},g.prototype.readDoubleBE=function(L,D){return L>>>=0,D||He(L,8,this.length),x.read(this,L,!1,52,8)},g.prototype.writeUintLE=g.prototype.writeUIntLE=function(L,D,G,K){L=+L,D>>>=0,G>>>=0,K||vt(this,L,D,G,Math.pow(2,8*G)-1,0);var ge=1,pe=0;for(this[D]=255&L;++pe<G&&(ge*=256);)this[D+pe]=L/ge&255;return D+G},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(L,D,G,K){L=+L,D>>>=0,G>>>=0,K||vt(this,L,D,G,Math.pow(2,8*G)-1,0);var ge=G-1,pe=1;for(this[D+ge]=255&L;--ge>=0&&(pe*=256);)this[D+ge]=L/pe&255;return D+G},g.prototype.writeUint8=g.prototype.writeUInt8=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,1,255,0),this[D]=255&L,D+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,2,65535,0),this[D]=255&L,this[D+1]=L>>>8,D+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,2,65535,0),this[D]=L>>>8,this[D+1]=255&L,D+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,4,4294967295,0),this[D+3]=L>>>24,this[D+2]=L>>>16,this[D+1]=L>>>8,this[D]=255&L,D+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,4,4294967295,0),this[D]=L>>>24,this[D+1]=L>>>16,this[D+2]=L>>>8,this[D+3]=255&L,D+4},g.prototype.writeIntLE=function(L,D,G,K){if(L=+L,D>>>=0,!K){var ge=Math.pow(2,8*G-1);vt(this,L,D,G,ge-1,-ge)}var pe=0,Ke=1,wt=0;for(this[D]=255&L;++pe<G&&(Ke*=256);)L<0&&wt===0&&this[D+pe-1]!==0&&(wt=1),this[D+pe]=(L/Ke>>0)-wt&255;return D+G},g.prototype.writeIntBE=function(L,D,G,K){if(L=+L,D>>>=0,!K){var ge=Math.pow(2,8*G-1);vt(this,L,D,G,ge-1,-ge)}var pe=G-1,Ke=1,wt=0;for(this[D+pe]=255&L;--pe>=0&&(Ke*=256);)L<0&&wt===0&&this[D+pe+1]!==0&&(wt=1),this[D+pe]=(L/Ke>>0)-wt&255;return D+G},g.prototype.writeInt8=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,1,127,-128),L<0&&(L=255+L+1),this[D]=255&L,D+1},g.prototype.writeInt16LE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,2,32767,-32768),this[D]=255&L,this[D+1]=L>>>8,D+2},g.prototype.writeInt16BE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,2,32767,-32768),this[D]=L>>>8,this[D+1]=255&L,D+2},g.prototype.writeInt32LE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,4,2147483647,-2147483648),this[D]=255&L,this[D+1]=L>>>8,this[D+2]=L>>>16,this[D+3]=L>>>24,D+4},g.prototype.writeInt32BE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[D]=L>>>24,this[D+1]=L>>>16,this[D+2]=L>>>8,this[D+3]=255&L,D+4},g.prototype.writeFloatLE=function(L,D,G){return Ye(this,L,D,!0,G)},g.prototype.writeFloatBE=function(L,D,G){return Ye(this,L,D,!1,G)},g.prototype.writeDoubleLE=function(L,D,G){return ot(this,L,D,!0,G)},g.prototype.writeDoubleBE=function(L,D,G){return ot(this,L,D,!1,G)},g.prototype.copy=function(L,D,G,K){if(!g.isBuffer(L))throw new TypeError("argument should be a Buffer");if(G||(G=0),K||K===0||(K=this.length),D>=L.length&&(D=L.length),D||(D=0),K>0&&K<G&&(K=G),K===G||L.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),L.length-D<K-G&&(K=L.length-D+G);var ge=K-G;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(D,G,K):Uint8Array.prototype.set.call(L,this.subarray(G,K),D),ge},g.prototype.fill=function(L,D,G,K){if(typeof L=="string"){if(typeof D=="string"?(K=D,D=0,G=this.length):typeof G=="string"&&(K=G,G=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!g.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(L.length===1){var ge=L.charCodeAt(0);(K==="utf8"&&ge<128||K==="latin1")&&(L=ge)}}else typeof L=="number"?L&=255:typeof L=="boolean"&&(L=Number(L));if(D<0||this.length<D||this.length<G)throw new RangeError("Out of range index");if(G<=D)return this;var pe;if(D>>>=0,G=G===void 0?this.length:G>>>0,L||(L=0),typeof L=="number")for(pe=D;pe<G;++pe)this[pe]=L;else{var Ke=g.isBuffer(L)?L:g.from(L,K),wt=Ke.length;if(wt===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(pe=0;pe<G-D;++pe)this[pe+D]=Ke[pe%wt]}return this};var Ht=/[^+/0-9A-Za-z-_]/g;function Bt(L,D){var G;D=D||1/0;for(var K=L.length,ge=null,pe=[],Ke=0;Ke<K;++Ke){if((G=L.charCodeAt(Ke))>55295&&G<57344){if(!ge){if(G>56319){(D-=3)>-1&&pe.push(239,191,189);continue}if(Ke+1===K){(D-=3)>-1&&pe.push(239,191,189);continue}ge=G;continue}if(G<56320){(D-=3)>-1&&pe.push(239,191,189),ge=G;continue}G=65536+(ge-55296<<10|G-56320)}else ge&&(D-=3)>-1&&pe.push(239,191,189);if(ge=null,G<128){if((D-=1)<0)break;pe.push(G)}else if(G<2048){if((D-=2)<0)break;pe.push(G>>6|192,63&G|128)}else if(G<65536){if((D-=3)<0)break;pe.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((D-=4)<0)break;pe.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return pe}function Et(L){return U.toByteArray(function(D){if((D=(D=D.split("=")[0]).trim().replace(Ht,"")).length<2)return"";for(;D.length%4!=0;)D+="=";return D}(L))}function Dt(L,D,G,K){for(var ge=0;ge<K&&!(ge+G>=D.length||ge>=L.length);++ge)D[ge+G]=L[ge];return ge}function Ne(L,D){return L instanceof D||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===D.name}function ne(L){return L!=L}var Be=function(){for(var L="0123456789abcdef",D=new Array(256),G=0;G<16;++G)for(var K=16*G,ge=0;ge<16;++ge)D[K+ge]=L[G]+L[ge];return D}()},6693:function(N,p){p.byteLength=function(F){var M=g(F),_=M[0],A=M[1];return 3*(_+A)/4-A},p.toByteArray=function(F){var M,_,A=g(F),b=A[0],Z=A[1],Y=new x(function(se,C,X){return 3*(C+X)/4-X}(0,b,Z)),$=0,Q=Z>0?b-4:b;for(_=0;_<Q;_+=4)M=U[F.charCodeAt(_)]<<18|U[F.charCodeAt(_+1)]<<12|U[F.charCodeAt(_+2)]<<6|U[F.charCodeAt(_+3)],Y[$++]=M>>16&255,Y[$++]=M>>8&255,Y[$++]=255&M;return Z===2&&(M=U[F.charCodeAt(_)]<<2|U[F.charCodeAt(_+1)]>>4,Y[$++]=255&M),Z===1&&(M=U[F.charCodeAt(_)]<<10|U[F.charCodeAt(_+1)]<<4|U[F.charCodeAt(_+2)]>>2,Y[$++]=M>>8&255,Y[$++]=255&M),Y},p.fromByteArray=function(F){for(var M,_=F.length,A=_%3,b=[],Z=16383,Y=0,$=_-A;Y<$;Y+=Z)b.push(T(F,Y,Y+Z>$?$:Y+Z));return A===1?(M=F[_-1],b.push(w[M>>2]+w[M<<4&63]+"==")):A===2&&(M=(F[_-2]<<8)+F[_-1],b.push(w[M>>10]+w[M>>4&63]+w[M<<2&63]+"=")),b.join("")};for(var w=[],U=[],x=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,P=E.length;y<P;++y)w[y]=E[y],U[E.charCodeAt(y)]=y;function g(F){var M=F.length;if(M%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=F.indexOf("=");return _===-1&&(_=M),[_,_===M?0:4-_%4]}function T(F,M,_){for(var A,b,Z=[],Y=M;Y<_;Y+=3)A=(F[Y]<<16&16711680)+(F[Y+1]<<8&65280)+(255&F[Y+2]),Z.push(w[(b=A)>>18&63]+w[b>>12&63]+w[b>>6&63]+w[63&b]);return Z.join("")}U[45]=62,U[95]=63},2165:function(N,p){p.read=function(w,U,x,E,y){var P,g,T=8*y-E-1,F=(1<<T)-1,M=F>>1,_=-7,A=x?y-1:0,b=x?-1:1,Z=w[U+A];for(A+=b,P=Z&(1<<-_)-1,Z>>=-_,_+=T;_>0;P=256*P+w[U+A],A+=b,_-=8);for(g=P&(1<<-_)-1,P>>=-_,_+=E;_>0;g=256*g+w[U+A],A+=b,_-=8);if(P===0)P=1-M;else{if(P===F)return g?NaN:1/0*(Z?-1:1);g+=Math.pow(2,E),P-=M}return(Z?-1:1)*g*Math.pow(2,P-E)},p.write=function(w,U,x,E,y,P){var g,T,F,M=8*P-y-1,_=(1<<M)-1,A=_>>1,b=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=E?0:P-1,Y=E?1:-1,$=U<0||U===0&&1/U<0?1:0;for(U=Math.abs(U),isNaN(U)||U===1/0?(T=isNaN(U)?1:0,g=_):(g=Math.floor(Math.log(U)/Math.LN2),U*(F=Math.pow(2,-g))<1&&(g--,F*=2),(U+=g+A>=1?b/F:b*Math.pow(2,1-A))*F>=2&&(g++,F/=2),g+A>=_?(T=0,g=_):g+A>=1?(T=(U*F-1)*Math.pow(2,y),g+=A):(T=U*Math.pow(2,A-1)*Math.pow(2,y),g=0));y>=8;w[x+Z]=255&T,Z+=Y,T/=256,y-=8);for(g=g<<y|T,M+=y;M>0;w[x+Z]=255&g,Z+=Y,g/=256,M-=8);w[x+Z-Y]|=128*$}},6934:function(N,p){var w={parseBuffer:function(E){return new U(E).parse()},addBoxProcessor:function(E,y){typeof E=="string"&&typeof y=="function"&&(x.prototype._boxProcessors[E]=y)},createFile:function(){return new U},createBox:function(E,y,P){var g=x.create(E);return y&&y.append(g,P),g},createFullBox:function(E,y,P){var g=w.createBox(E,y,P);return g.version=0,g.flags=0,g},Utils:{}};w.Utils.dataViewToString=function(E,y){var P=y||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(P).decode(E);var g=[],T=0;if(P==="utf-8")for(;T<E.byteLength;){var F=E.getUint8(T++);F<128||(F<224?(F=(31&F)<<6,F|=63&E.getUint8(T++)):F<240?(F=(15&F)<<12,F|=(63&E.getUint8(T++))<<6,F|=63&E.getUint8(T++)):(F=(7&F)<<18,F|=(63&E.getUint8(T++))<<12,F|=(63&E.getUint8(T++))<<6,F|=63&E.getUint8(T++))),g.push(String.fromCharCode(F))}else for(;T<E.byteLength;)g.push(String.fromCharCode(E.getUint8(T++)));return g.join("")},w.Utils.utf8ToByteArray=function(E){var y,P;if(typeof TextEncoder<"u")y=new TextEncoder().encode(E);else for(y=[],P=0;P<E.length;++P){var g=E.charCodeAt(P);g<128?y.push(g):g<2048?(y.push(192|g>>6),y.push(128|63&g)):g<65536?(y.push(224|g>>12),y.push(128|63&g>>6),y.push(128|63&g)):(y.push(240|g>>18),y.push(128|63&g>>12),y.push(128|63&g>>6),y.push(128|63&g))}return y},w.Utils.appendBox=function(E,y,P){if(y._offset=E._cursor.offset,y._root=E._root?E._root:E,y._raw=E._raw,y._parent=E,P!==-1)if(P!=null){var g,T=-1;if(typeof P=="number")T=P;else{if(typeof P=="string")g=P;else{if(typeof P!="object"||!P.type)return void E.boxes.push(y);g=P.type}for(var F=0;F<E.boxes.length;F++)if(g===E.boxes[F].type){T=F+1;break}}E.boxes.splice(T,0,y)}else E.boxes.push(y)},p.parseBuffer=w.parseBuffer,p.addBoxProcessor=w.addBoxProcessor,p.createFile=w.createFile,p.createBox=w.createBox,p.createFullBox=w.createFullBox,p.Utils=w.Utils,w.Cursor=function(E){this.offset=E===void 0?0:E};var U=function(E){this._cursor=new w.Cursor,this.boxes=[],E&&(this._raw=new DataView(E))};U.prototype.fetch=function(E){var y=this.fetchAll(E,!0);return y.length?y[0]:null},U.prototype.fetchAll=function(E,y){var P=[];return U._sweep.call(this,E,P,y),P},U.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var E=x.parse(this);if(E.type===void 0)break;this.boxes.push(E)}return this},U._sweep=function(E,y,P){for(var g in this.type&&this.type==E&&y.push(this),this.boxes){if(y.length&&P)return;U._sweep.call(this.boxes[g],E,y,P)}},U.prototype.write=function(){var E,y=0;for(E=0;E<this.boxes.length;E++)y+=this.boxes[E].getLength(!1);var P=new Uint8Array(y);for(this._rawo=new DataView(P.buffer),this.bytes=P,this._cursor.offset=0,E=0;E<this.boxes.length;E++)this.boxes[E].write();return P.buffer},U.prototype.append=function(E,y){w.Utils.appendBox(this,E,y)};var x=function(){this._cursor=new w.Cursor};x.parse=function(E){var y=new x;return y._offset=E._cursor.offset,y._root=E._root?E._root:E,y._raw=E._raw,y._parent=E,y._parseBox(),E._cursor.offset=y._raw.byteOffset+y._raw.byteLength,y},x.create=function(E){var y=new x;return y.type=E,y.boxes=[],y},x.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],x.prototype._boxProcessors={},x.prototype._procField=function(E,y,P){this._parsing?this[E]=this._readField(y,P):this._writeField(y,P,this[E])},x.prototype._procFieldArray=function(E,y,P,g){var T;if(this._parsing)for(this[E]=[],T=0;T<y;T++)this[E][T]=this._readField(P,g);else for(T=0;T<this[E].length;T++)this._writeField(P,g,this[E][T])},x.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},x.prototype._procEntries=function(E,y,P){var g;if(this._parsing)for(this[E]=[],g=0;g<y;g++)this[E].push({}),P.call(this,this[E][g]);else for(g=0;g<y;g++)P.call(this,this[E][g])},x.prototype._procSubEntries=function(E,y,P,g){var T;if(this._parsing)for(E[y]=[],T=0;T<P;T++)E[y].push({}),g.call(this,E[y][T]);else for(T=0;T<P;T++)g.call(this,E[y][T])},x.prototype._procEntryField=function(E,y,P,g){this._parsing?E[y]=this._readField(P,g):this._writeField(P,g,E[y])},x.prototype._procSubBoxes=function(E,y){var P;if(this._parsing)for(this[E]=[],P=0;P<y;P++)this[E].push(x.parse(this));else for(P=0;P<y;P++)this._rawo?this[E][P].write():this.size+=this[E][P].getLength()},x.prototype._readField=function(E,y){switch(E){case"uint":return this._readUint(y);case"int":return this._readInt(y);case"template":return this._readTemplate(y);case"string":return y===-1?this._readTerminatedString():this._readString(y);case"data":return this._readData(y);case"utf8":return this._readUTF8String();default:return-1}},x.prototype._readInt=function(E){var y=null,P=this._cursor.offset-this._raw.byteOffset;switch(E){case 8:y=this._raw.getInt8(P);break;case 16:y=this._raw.getInt16(P);break;case 32:y=this._raw.getInt32(P);break;case 64:var g=this._raw.getInt32(P),T=this._raw.getInt32(P+4);y=g*Math.pow(2,32)+T}return this._cursor.offset+=E>>3,y},x.prototype._readUint=function(E){var y,P,g=null,T=this._cursor.offset-this._raw.byteOffset;switch(E){case 8:g=this._raw.getUint8(T);break;case 16:g=this._raw.getUint16(T);break;case 24:g=((y=this._raw.getUint16(T))<<8)+(P=this._raw.getUint8(T+2));break;case 32:g=this._raw.getUint32(T);break;case 64:y=this._raw.getUint32(T),P=this._raw.getUint32(T+4),g=y*Math.pow(2,32)+P}return this._cursor.offset+=E>>3,g},x.prototype._readString=function(E){for(var y="",P=0;P<E;P++){var g=this._readUint(8);y+=String.fromCharCode(g)}return y},x.prototype._readTemplate=function(E){return this._readUint(E/2)+this._readUint(E/2)/Math.pow(2,E/2)},x.prototype._readTerminatedString=function(){for(var E="";this._cursor.offset-this._offset<this._raw.byteLength;){var y=this._readUint(8);if(y===0)break;E+=String.fromCharCode(y)}return E},x.prototype._readData=function(E){var y=E>0?E:this._raw.byteLength-(this._cursor.offset-this._offset);if(y>0){var P=new Uint8Array(this._raw.buffer,this._cursor.offset,y);return this._cursor.offset+=y,P}return null},x.prototype._readUTF8String=function(){var E=this._raw.byteLength-(this._cursor.offset-this._offset),y=null;return E>0&&(y=new DataView(this._raw.buffer,this._cursor.offset,E),this._cursor.offset+=E),y&&w.Utils.dataViewToString(y)},x.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},x.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},x.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(x.parse(this))},x.prototype.append=function(E,y){w.Utils.appendBox(this,E,y)},x.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var E=0;E<this.boxes.length;E++)this.size+=this.boxes[E].getLength();return this._data&&this._writeData(this._data),this.size},x.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var E=0;E<this.boxes.length;E++)this.boxes[E].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},x.prototype._writeInt=function(E,y){if(this._rawo){var P=this._cursor.offset-this._rawo.byteOffset;switch(E){case 8:this._rawo.setInt8(P,y);break;case 16:this._rawo.setInt16(P,y);break;case 32:this._rawo.setInt32(P,y);break;case 64:var g=Math.floor(y/Math.pow(2,32)),T=y-g*Math.pow(2,32);this._rawo.setUint32(P,g),this._rawo.setUint32(P+4,T)}this._cursor.offset+=E>>3}else this.size+=E>>3},x.prototype._writeUint=function(E,y){if(this._rawo){var P,g,T=this._cursor.offset-this._rawo.byteOffset;switch(E){case 8:this._rawo.setUint8(T,y);break;case 16:this._rawo.setUint16(T,y);break;case 24:P=(16776960&y)>>8,g=255&y,this._rawo.setUint16(T,P),this._rawo.setUint8(T+2,g);break;case 32:this._rawo.setUint32(T,y);break;case 64:g=y-(P=Math.floor(y/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(T,P),this._rawo.setUint32(T+4,g)}this._cursor.offset+=E>>3}else this.size+=E>>3},x.prototype._writeString=function(E,y){for(var P=0;P<E;P++)this._writeUint(8,y.charCodeAt(P))},x.prototype._writeTerminatedString=function(E){if(E.length!==0){for(var y=0;y<E.length;y++)this._writeUint(8,E.charCodeAt(y));this._writeUint(8,0)}},x.prototype._writeTemplate=function(E,y){var P=Math.floor(y),g=(y-P)*Math.pow(2,E/2);this._writeUint(E/2,P),this._writeUint(E/2,g)},x.prototype._writeData=function(E){if(E)if(this._rawo){if(E instanceof Array){for(var y=this._cursor.offset-this._rawo.byteOffset,P=0;P<E.length;P++)this._rawo.setInt8(y+P,E[P]);this._cursor.offset+=E.length}E instanceof Uint8Array&&(this._root.bytes.set(E,this._cursor.offset),this._cursor.offset+=E.length)}else this.size+=E.length},x.prototype._writeUTF8String=function(E){var y=w.Utils.utf8ToByteArray(E);if(this._rawo)for(var P=new DataView(this._rawo.buffer,this._cursor.offset,y.length),g=0;g<y.length;g++)P.setUint8(g,y[g]);else this.size+=y.length},x.prototype._writeField=function(E,y,P){switch(E){case"uint":this._writeUint(y,P);break;case"int":this._writeInt(y,P);break;case"template":this._writeTemplate(y,P);break;case"string":y==-1?this._writeTerminatedString(P):this._writeString(y,P);break;case"data":this._writeData(P);break;case"utf8":this._writeUTF8String(P)}},x.prototype._boxProcessors.avc1=x.prototype._boxProcessors.avc2=x.prototype._boxProcessors.avc3=x.prototype._boxProcessors.avc4=x.prototype._boxProcessors.hvc1=x.prototype._boxProcessors.hev1=x.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},x.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"sample_count","uint",32),this._procEntryField(E,"sample_offset",this.version===1?"int":"uint",32)})},x.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},x.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"segment_duration","uint",this.version===1?64:32),this._procEntryField(E,"media_time","int",this.version===1?64:32),this._procEntryField(E,"media_rate_integer","int",16),this._procEntryField(E,"media_rate_fraction","int",16)})},x.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},x.prototype._boxProcessors.free=x.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},x.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},x.prototype._boxProcessors.ftyp=x.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var E=-1;this._parsing&&(E=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",E,"string",4)},x.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},x.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},x.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},x.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},x.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},x.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},x.prototype._boxProcessors.mp4a=x.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},x.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},x.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},x.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},x.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},x.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},x.prototype._boxProcessors.sdtp=function(){this._procFullBox();var E=-1;this._parsing&&(E=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",E,"uint",8)},x.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(E){this._parsing||(E.reference=(1&E.reference_type)<<31,E.reference|=2147483647&E.referenced_size,E.sap=(1&E.starts_with_SAP)<<31,E.sap|=(3&E.SAP_type)<<28,E.sap|=268435455&E.SAP_delta_time),this._procEntryField(E,"reference","uint",32),this._procEntryField(E,"subsegment_duration","uint",32),this._procEntryField(E,"sap","uint",32),this._parsing&&(E.reference_type=E.reference>>31&1,E.referenced_size=2147483647&E.reference,E.starts_with_SAP=E.sap>>31&1,E.SAP_type=E.sap>>28&7,E.SAP_delta_time=268435455&E.sap)})},x.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},x.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(E){this._procEntryField(E,"ranges_count","uint",32),this._procSubEntries(E,"ranges",E.ranges_count,function(y){this._procEntryField(y,"level","uint",8),this._procEntryField(y,"range_size","uint",24)})})},x.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},x.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},x.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"sample_count","uint",32),this._procEntryField(E,"sample_delta","uint",32)})},x.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"sample_delta","uint",32),this._procEntryField(E,"subsample_count","uint",16),this._procSubEntries(E,"subsamples",E.subsample_count,function(y){this._procEntryField(y,"subsample_size","uint",this.version===1?32:16),this._procEntryField(y,"subsample_priority","uint",8),this._procEntryField(y,"discardable","uint",8),this._procEntryField(y,"codec_specific_parameters","uint",32)})})},x.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},x.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},x.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},x.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(E){this._procEntryField(E,"time","uint",this.version===1?64:32),this._procEntryField(E,"moof_offset","uint",this.version===1?64:32),this._procEntryField(E,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(E,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(E,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},x.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},x.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},x.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(E){256&this.flags&&this._procEntryField(E,"sample_duration","uint",32),512&this.flags&&this._procEntryField(E,"sample_size","uint",32),1024&this.flags&&this._procEntryField(E,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(E,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},x.prototype._boxProcessors["url "]=x.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},x.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},x.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},x.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},x.prototype._boxProcessors.vtte=function(){}},5530:function(N,p,w){N.exports=w(6146).polyfill()},6146:function(N,p,w){N.exports=function(){function U(Et){return typeof Et=="function"}var x=Array.isArray?Array.isArray:function(Et){return Object.prototype.toString.call(Et)==="[object Array]"},E=0,y=void 0,P=void 0,g=function(Et,Dt){Z[E]=Et,Z[E+1]=Dt,(E+=2)===2&&(P?P(Y):X())},T=typeof window<"u"?window:void 0,F=T||{},M=F.MutationObserver||F.WebKitMutationObserver,_=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",A=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function b(){var Et=setTimeout;return function(){return Et(Y,1)}}var Z=new Array(1e3);function Y(){for(var Et=0;Et<E;Et+=2)(0,Z[Et])(Z[Et+1]),Z[Et]=void 0,Z[Et+1]=void 0;E=0}var $,Q,se,C,X=void 0;function ce(Et,Dt){var Ne=this,ne=new this.constructor(be);ne[me]===void 0&&ot(ne);var Be=Ne._state;if(Be){var L=arguments[Be-1];g(function(){return Re(Be,ne,L,Ne._result)})}else He(Ne,ne,Et,Dt);return ne}function oe(Et){if(Et&&typeof Et=="object"&&Et.constructor===this)return Et;var Dt=new this(be);return qe(Dt,Et),Dt}X=_?function(){return process.nextTick(Y)}:M?(Q=0,se=new M(Y),C=document.createTextNode(""),se.observe(C,{characterData:!0}),function(){C.data=Q=++Q%2}):A?(($=new MessageChannel).port1.onmessage=Y,function(){return $.port2.postMessage(0)}):T===void 0?function(){try{var Et=Function("return this")().require("vertx");return(y=Et.runOnLoop||Et.runOnContext)!==void 0?function(){y(Y)}:b()}catch(Dt){return b()}}():b();var me=Math.random().toString(36).substring(2);function be(){}var Je=void 0;function we(Et,Dt,Ne){Dt.constructor===Et.constructor&&Ne===ce&&Dt.constructor.resolve===oe?function(ne,Be){Be._state===1?ft(ne,Be._result):Be._state===2?Ce(ne,Be._result):He(Be,void 0,function(L){return qe(ne,L)},function(L){return Ce(ne,L)})}(Et,Dt):Ne===void 0?ft(Et,Dt):U(Ne)?function(ne,Be,L){g(function(D){var G=!1,K=function(ge,pe,Ke,wt){try{ge.call(pe,Ke,wt)}catch(lt){return lt}}(L,Be,function(ge){G||(G=!0,Be!==ge?qe(D,ge):ft(D,ge))},function(ge){G||(G=!0,Ce(D,ge))},D._label);!G&&K&&(G=!0,Ce(D,K))},ne)}(Et,Dt,Ne):ft(Et,Dt)}function qe(Et,Dt){if(Et===Dt)Ce(Et,new TypeError("You cannot resolve a promise with itself"));else if(Be=typeof(ne=Dt),ne===null||Be!=="object"&&Be!=="function")ft(Et,Dt);else{var Ne=void 0;try{Ne=Dt.then}catch(L){return void Ce(Et,L)}we(Et,Dt,Ne)}var ne,Be}function st(Et){Et._onerror&&Et._onerror(Et._result),vt(Et)}function ft(Et,Dt){Et._state===Je&&(Et._result=Dt,Et._state=1,Et._subscribers.length!==0&&g(vt,Et))}function Ce(Et,Dt){Et._state===Je&&(Et._state=2,Et._result=Dt,g(st,Et))}function He(Et,Dt,Ne,ne){var Be=Et._subscribers,L=Be.length;Et._onerror=null,Be[L]=Dt,Be[L+1]=Ne,Be[L+2]=ne,L===0&&Et._state&&g(vt,Et)}function vt(Et){var Dt=Et._subscribers,Ne=Et._state;if(Dt.length!==0){for(var ne=void 0,Be=void 0,L=Et._result,D=0;D<Dt.length;D+=3)ne=Dt[D],Be=Dt[D+Ne],ne?Re(Ne,ne,Be,L):Be(L);Et._subscribers.length=0}}function Re(Et,Dt,Ne,ne){var Be=U(Ne),L=void 0,D=void 0,G=!0;if(Be){try{L=Ne(ne)}catch(K){G=!1,D=K}if(Dt===L)return void Ce(Dt,new TypeError("A promises callback cannot return that same promise."))}else L=ne;Dt._state!==Je||(Be&&G?qe(Dt,L):G===!1?Ce(Dt,D):Et===1?ft(Dt,L):Et===2&&Ce(Dt,L))}var Ye=0;function ot(Et){Et[me]=Ye++,Et._state=void 0,Et._result=void 0,Et._subscribers=[]}var Ht=function(){function Et(Dt,Ne){this._instanceConstructor=Dt,this.promise=new Dt(be),this.promise[me]||ot(this.promise),x(Ne)?(this.length=Ne.length,this._remaining=Ne.length,this._result=new Array(this.length),this.length===0?ft(this.promise,this._result):(this.length=this.length||0,this._enumerate(Ne),this._remaining===0&&ft(this.promise,this._result))):Ce(this.promise,new Error("Array Methods must be provided an Array"))}return Et.prototype._enumerate=function(Dt){for(var Ne=0;this._state===Je&&Ne<Dt.length;Ne++)this._eachEntry(Dt[Ne],Ne)},Et.prototype._eachEntry=function(Dt,Ne){var ne=this._instanceConstructor,Be=ne.resolve;if(Be===oe){var L=void 0,D=void 0,G=!1;try{L=Dt.then}catch(ge){G=!0,D=ge}if(L===ce&&Dt._state!==Je)this._settledAt(Dt._state,Ne,Dt._result);else if(typeof L!="function")this._remaining--,this._result[Ne]=Dt;else if(ne===Bt){var K=new ne(be);G?Ce(K,D):we(K,Dt,L),this._willSettleAt(K,Ne)}else this._willSettleAt(new ne(function(ge){return ge(Dt)}),Ne)}else this._willSettleAt(Be(Dt),Ne)},Et.prototype._settledAt=function(Dt,Ne,ne){var Be=this.promise;Be._state===Je&&(this._remaining--,Dt===2?Ce(Be,ne):this._result[Ne]=ne),this._remaining===0&&ft(Be,this._result)},Et.prototype._willSettleAt=function(Dt,Ne){var ne=this;He(Dt,void 0,function(Be){return ne._settledAt(1,Ne,Be)},function(Be){return ne._settledAt(2,Ne,Be)})},Et}(),Bt=function(){function Et(Dt){this[me]=Ye++,this._result=this._state=void 0,this._subscribers=[],be!==Dt&&(typeof Dt!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Et?function(Ne,ne){try{ne(function(Be){qe(Ne,Be)},function(Be){Ce(Ne,Be)})}catch(Be){Ce(Ne,Be)}}(this,Dt):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Et.prototype.catch=function(Dt){return this.then(null,Dt)},Et.prototype.finally=function(Dt){var Ne=this,ne=Ne.constructor;return U(Dt)?Ne.then(function(Be){return ne.resolve(Dt()).then(function(){return Be})},function(Be){return ne.resolve(Dt()).then(function(){throw Be})}):Ne.then(Dt,Dt)},Et}();return Bt.prototype.then=ce,Bt.all=function(Et){return new Ht(this,Et).promise},Bt.race=function(Et){var Dt=this;return x(Et)?new Dt(function(Ne,ne){for(var Be=Et.length,L=0;L<Be;L++)Dt.resolve(Et[L]).then(Ne,ne)}):new Dt(function(Ne,ne){return ne(new TypeError("You must pass an array to race."))})},Bt.resolve=oe,Bt.reject=function(Et){var Dt=new this(be);return Ce(Dt,Et),Dt},Bt._setScheduler=function(Et){P=Et},Bt._setAsap=function(Et){g=Et},Bt._asap=g,Bt.polyfill=function(){var Et=void 0;if(w.g!==void 0)Et=w.g;else if(typeof self<"u")Et=self;else try{Et=Function("return this")()}catch(ne){throw new Error("polyfill failed because global object is unavailable in this environment")}var Dt=Et.Promise;if(Dt){var Ne=null;try{Ne=Object.prototype.toString.call(Dt.resolve())}catch(ne){}if(Ne==="[object Promise]"&&!Dt.cast)return}Et.Promise=Bt},Bt.Promise=Bt,Bt}()},1159:function(N){var p,w=typeof Reflect=="object"?Reflect:null,U=w&&typeof w.apply=="function"?w.apply:function(Y,$,Q){return Function.prototype.apply.call(Y,$,Q)};p=w&&typeof w.ownKeys=="function"?w.ownKeys:Object.getOwnPropertySymbols?function(Y){return Object.getOwnPropertyNames(Y).concat(Object.getOwnPropertySymbols(Y))}:function(Y){return Object.getOwnPropertyNames(Y)};var x=Number.isNaN||function(Y){return Y!=Y};function E(){E.init.call(this)}N.exports=E,N.exports.once=function(Y,$){return new Promise(function(Q,se){function C(ce){Y.removeListener($,X),se(ce)}function X(){typeof Y.removeListener=="function"&&Y.removeListener("error",C),Q([].slice.call(arguments))}Z(Y,$,X,{once:!0}),$!=="error"&&function(ce,oe,me){typeof ce.on=="function"&&Z(ce,"error",oe,{once:!0})}(Y,C)})},E.EventEmitter=E,E.prototype._events=void 0,E.prototype._eventsCount=0,E.prototype._maxListeners=void 0;var y=10;function P(Y){if(typeof Y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Y)}function g(Y){return Y._maxListeners===void 0?E.defaultMaxListeners:Y._maxListeners}function T(Y,$,Q,se){var C,X,ce,oe;if(P(Q),(X=Y._events)===void 0?(X=Y._events=Object.create(null),Y._eventsCount=0):(X.newListener!==void 0&&(Y.emit("newListener",$,Q.listener?Q.listener:Q),X=Y._events),ce=X[$]),ce===void 0)ce=X[$]=Q,++Y._eventsCount;else if(typeof ce=="function"?ce=X[$]=se?[Q,ce]:[ce,Q]:se?ce.unshift(Q):ce.push(Q),(C=g(Y))>0&&ce.length>C&&!ce.warned){ce.warned=!0;var me=new Error("Possible EventEmitter memory leak detected. "+ce.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");me.name="MaxListenersExceededWarning",me.emitter=Y,me.type=$,me.count=ce.length,oe=me,console&&console.warn&&console.warn(oe)}return Y}function F(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M(Y,$,Q){var se={fired:!1,wrapFn:void 0,target:Y,type:$,listener:Q},C=F.bind(se);return C.listener=Q,se.wrapFn=C,C}function _(Y,$,Q){var se=Y._events;if(se===void 0)return[];var C=se[$];return C===void 0?[]:typeof C=="function"?Q?[C.listener||C]:[C]:Q?function(X){for(var ce=new Array(X.length),oe=0;oe<ce.length;++oe)ce[oe]=X[oe].listener||X[oe];return ce}(C):b(C,C.length)}function A(Y){var $=this._events;if($!==void 0){var Q=$[Y];if(typeof Q=="function")return 1;if(Q!==void 0)return Q.length}return 0}function b(Y,$){for(var Q=new Array($),se=0;se<$;++se)Q[se]=Y[se];return Q}function Z(Y,$,Q,se){if(typeof Y.on=="function")se.once?Y.once($,Q):Y.on($,Q);else{if(typeof Y.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Y);Y.addEventListener($,function C(X){se.once&&Y.removeEventListener($,C),Q(X)})}}Object.defineProperty(E,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(Y){if(typeof Y!="number"||Y<0||x(Y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Y+".");y=Y}}),E.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},E.prototype.setMaxListeners=function(Y){if(typeof Y!="number"||Y<0||x(Y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Y+".");return this._maxListeners=Y,this},E.prototype.getMaxListeners=function(){return g(this)},E.prototype.emit=function(Y){for(var $=[],Q=1;Q<arguments.length;Q++)$.push(arguments[Q]);var se=Y==="error",C=this._events;if(C!==void 0)se=se&&C.error===void 0;else if(!se)return!1;if(se){var X;if($.length>0&&(X=$[0]),X instanceof Error)throw X;var ce=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw ce.context=X,ce}var oe=C[Y];if(oe===void 0)return!1;if(typeof oe=="function")U(oe,this,$);else{var me=oe.length,be=b(oe,me);for(Q=0;Q<me;++Q)U(be[Q],this,$)}return!0},E.prototype.addListener=function(Y,$){return T(this,Y,$,!1)},E.prototype.on=E.prototype.addListener,E.prototype.prependListener=function(Y,$){return T(this,Y,$,!0)},E.prototype.once=function(Y,$){return P($),this.on(Y,M(this,Y,$)),this},E.prototype.prependOnceListener=function(Y,$){return P($),this.prependListener(Y,M(this,Y,$)),this},E.prototype.removeListener=function(Y,$){var Q,se,C,X,ce;if(P($),(se=this._events)===void 0)return this;if((Q=se[Y])===void 0)return this;if(Q===$||Q.listener===$)--this._eventsCount==0?this._events=Object.create(null):(delete se[Y],se.removeListener&&this.emit("removeListener",Y,Q.listener||$));else if(typeof Q!="function"){for(C=-1,X=Q.length-1;X>=0;X--)if(Q[X]===$||Q[X].listener===$){ce=Q[X].listener,C=X;break}if(C<0)return this;C===0?Q.shift():function(oe,me){for(;me+1<oe.length;me++)oe[me]=oe[me+1];oe.pop()}(Q,C),Q.length===1&&(se[Y]=Q[0]),se.removeListener!==void 0&&this.emit("removeListener",Y,ce||$)}return this},E.prototype.off=E.prototype.removeListener,E.prototype.removeAllListeners=function(Y){var $,Q,se;if((Q=this._events)===void 0)return this;if(Q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Q[Y]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete Q[Y]),this;if(arguments.length===0){var C,X=Object.keys(Q);for(se=0;se<X.length;++se)(C=X[se])!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof($=Q[Y])=="function")this.removeListener(Y,$);else if($!==void 0)for(se=$.length-1;se>=0;se--)this.removeListener(Y,$[se]);return this},E.prototype.listeners=function(Y){return _(this,Y,!0)},E.prototype.rawListeners=function(Y){return _(this,Y,!1)},E.listenerCount=function(Y,$){return typeof Y.listenerCount=="function"?Y.listenerCount($):A.call(Y,$)},E.prototype.listenerCount=A,E.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},3101:function(N){var p=Array.isArray,w=Object.keys,U=Object.prototype.hasOwnProperty;N.exports=function x(E,y){if(E===y)return!0;if(E&&y&&typeof E=="object"&&typeof y=="object"){var P,g,T,F=p(E),M=p(y);if(F&&M){if((g=E.length)!=y.length)return!1;for(P=g;P--!=0;)if(!x(E[P],y[P]))return!1;return!0}if(F!=M)return!1;var _=E instanceof Date,A=y instanceof Date;if(_!=A)return!1;if(_&&A)return E.getTime()==y.getTime();var b=E instanceof RegExp,Z=y instanceof RegExp;if(b!=Z)return!1;if(b&&Z)return E.toString()==y.toString();var Y=w(E);if((g=Y.length)!==w(y).length)return!1;for(P=g;P--!=0;)if(!U.call(y,Y[P]))return!1;for(P=g;P--!=0;)if(!x(E[T=Y[P]],y[T]))return!1;return!0}return E!=E&&y!=y}},3362:function(N,p,w){(function(U,x,E,y,P){function g(D){if("contents"in D)for(var G=("styleAttrs"in D)?D.styleAttrs[y.byName.ruby.qname]:null,K=D.kind==="span"&&(G==="container"||G==="textContainer"||G==="baseContainer"),ge=D.contents.length-1;ge>=0;ge--)!K||"styleAttrs"in D.contents[ge]&&y.byName.ruby.qname in D.contents[ge].styleAttrs?g(D.contents[ge]):delete D.contents[ge]}function T(D,G,K,ge){var pe=ge&&ge.timeContainer==="seq",Ke=0;ge&&(Ke=pe&&K?K.end:ge.begin),G.begin=G.explicit_begin?G.explicit_begin+Ke:Ke;var wt=G.begin,lt=null;if("sets"in G)for(var ut=0;ut<G.sets.length;ut++)T(D,G.sets[ut],lt,G),wt=G.timeContainer==="seq"?G.sets[ut].end:Math.max(wt,G.sets[ut].end),lt=G.sets[ut];if("contents"in G){if("contents"in G)for(var nt=0;nt<G.contents.length;nt++)T(D,G.contents[nt],lt,G),wt=G.timeContainer==="seq"?G.contents[nt].end:Math.max(wt,G.contents[nt].end),lt=G.contents[nt]}else wt=pe?G.begin:Number.POSITIVE_INFINITY;G.explicit_end!==null&&G.explicit_dur!==null?G.end=Math.min(G.begin+G.explicit_dur,Ke+G.explicit_end):G.explicit_end===null&&G.explicit_dur!==null?G.end=G.begin+G.explicit_dur:G.explicit_end!==null&&G.explicit_dur===null?G.end=Ke+G.explicit_end:G.end=wt,delete G.explicit_begin,delete G.explicit_dur,delete G.explicit_end,D._registerEvent(G)}function F(D){this.node=D}function M(){this.events=[],this.head=new _,this.body=null}function _(){this.styling=new A,this.layout=new Y}function A(){this.styles={},this.initials={}}function b(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function Z(){this.styleAttrs=null}function Y(){this.regions={}}function $(D,G){Q.call(this,"image"),this.src=D,this.type=G}function Q(D){this.kind=D}function se(D){this.id=D}function C(D){this.regionID=D}function X(D){this.styleAttrs=D}function ce(D){this.sets=D}function oe(D){this.contents=D}function me(D,G,K){this.explicit_begin=D,this.explicit_end=G,this.explicit_dur=K}function be(){Q.call(this,"body")}function Je(){Q.call(this,"div")}function we(){Q.call(this,"p")}function qe(){Q.call(this,"span")}function st(){Q.call(this,"span")}function ft(){Q.call(this,"br")}function Ce(){}function He(){}function vt(D){return D&&"xml:id"in D.attributes&&D.attributes["xml:id"].value||null}function Re(D){return D&&"style"in D.attributes?D.attributes.style.value.split(" "):[]}function Ye(D,G){var K={};if(D!==null)for(var ge in D.attributes){var pe=D.attributes[ge].uri+" "+D.attributes[ge].local,Ke=y.byQName[pe];if(Ke!==void 0){var wt=Ke.parse(D.attributes[ge].value);wt!==null?(K[pe]=wt,Ke===y.byName.zIndex&&Ne(G,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):ne(G,"Cannot parse styling attribute "+pe+" --> "+D.attributes[ge].value)}}return K}function ot(D,G,K){for(var ge in D.attributes)if(D.attributes[ge].uri===G&&D.attributes[ge].local===K)return D.attributes[ge].value;return null}function Ht(D,G,K){var ge,pe=null;return(ge=/^(\d+(?:\.\d+)?)f$/.exec(K))!==null?G!==null&&(pe=parseFloat(ge[1])/G):(ge=/^(\d+(?:\.\d+)?)t$/.exec(K))!==null?D!==null&&(pe=parseFloat(ge[1])/D):(ge=/^(\d+(?:\.\d+)?)ms$/.exec(K))!==null?pe=parseFloat(ge[1])/1e3:(ge=/^(\d+(?:\.\d+)?)s$/.exec(K))!==null?pe=parseFloat(ge[1]):(ge=/^(\d+(?:\.\d+)?)h$/.exec(K))!==null?pe=3600*parseFloat(ge[1]):(ge=/^(\d+(?:\.\d+)?)m$/.exec(K))!==null?pe=60*parseFloat(ge[1]):(ge=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(K))!==null?pe=3600*parseInt(ge[1])+60*parseInt(ge[2])+parseFloat(ge[3]):(ge=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(K))!==null&&G!==null&&(pe=3600*parseInt(ge[1])+60*parseInt(ge[2])+parseInt(ge[3])+(ge[4]===null?0:parseInt(ge[4])/G)),pe}function Bt(D,G,K){for(;G.styleRefs.length>0;){var ge=G.styleRefs.pop();ge in D.styles?(Bt(D,D.styles[ge],K),Dt(D.styles[ge].styleAttrs,G.styleAttrs)):ne(K,"Non-existant style id referenced")}}function Et(D,G,K,ge){for(var pe=G.length-1;pe>=0;pe--){var Ke=G[pe];Ke in D.styles?Dt(D.styles[Ke].styleAttrs,K):ne(ge,"Non-existant style id referenced")}}function Dt(D,G){for(var K in D)D.hasOwnProperty(K)&&(K in G||(G[K]=D[K]))}function Ne(D,G){if(D&&D.warn&&D.warn(G))throw G}function ne(D,G){if(D&&D.error&&D.error(G))throw G}function Be(D,G){throw D&&D.fatal&&D.fatal(G),G}function L(D,G){for(var K,ge=0,pe=D.length-1;ge<=pe;){var Ke=D[K=Math.floor((ge+pe)/2)];if(Ke<G)ge=K+1;else{if(!(Ke>G))return{found:!0,index:K};pe=K-1}}return{found:!1,index:ge}}U.fromXML=function(D,G,K){var ge=x.parser(!0,{xmlns:!0}),pe=[],Ke=[],wt=[],lt=0,ut=null;ge.onclosetag=function(Mt){if(pe[0]instanceof Ce)ut.head!==null&&ut.head.styling!==null&&Et(ut.head.styling,pe[0].styleRefs,pe[0].styleAttrs,G),delete pe[0].styleRefs;else if(pe[0]instanceof A)for(var _n in pe[0].styles)pe[0].styles.hasOwnProperty(_n)&&Bt(pe[0],pe[0].styles[_n],G);else if(pe[0]instanceof we||pe[0]instanceof qe){if(pe[0].contents.length>1){var rn,cn=[pe[0].contents[0]];for(rn=1;rn<pe[0].contents.length;rn++)pe[0].contents[rn]instanceof st&&cn[cn.length-1]instanceof st?cn[cn.length-1].text+=pe[0].contents[rn].text:cn.push(pe[0].contents[rn]);pe[0].contents=cn}pe[0]instanceof qe&&pe[0].contents.length===1&&pe[0].contents[0]instanceof st&&(pe[0].text=pe[0].contents[0].text,delete pe[0].contents)}else pe[0]instanceof F&&(pe[0].node.uri===E.ns_tt&&pe[0].node.local==="metadata"?lt--:lt>0&&K&&"onCloseTag"in K&&K.onCloseTag());wt.shift(),Ke.shift(),pe.shift()},ge.ontext=function(Mt){if(pe[0]!==void 0)if(pe[0]instanceof qe||pe[0]instanceof we){if(pe[0]instanceof qe){var _n=pe[0].styleAttrs[y.byName.ruby.qname];if(_n==="container"||_n==="textContainer"||_n==="baseContainer")return}var rn=new st;rn.initFromText(ut,pe[0],Mt,Ke[0],wt[0],G),pe[0].contents.push(rn)}else pe[0]instanceof F&&lt>0&&K&&"onText"in K&&K.onText(Mt)},ge.onopentag=function(Mt){var _n=Mt.attributes["xml:space"];_n?wt.unshift(_n.value):wt.length===0?wt.unshift("default"):wt.unshift(wt[0]);var rn=Mt.attributes["xml:lang"];if(rn?Ke.unshift(rn.value):Ke.length===0?Ke.unshift(""):Ke.unshift(Ke[0]),Mt.uri===E.ns_tt)if(Mt.local==="tt")ut!==null&&Be(G,"Two <tt> elements at ("+this.line+","+this.column+")"),(ut=new M).initFromNode(Mt,Ke[0],G),pe.unshift(ut);else if(Mt.local==="head")pe[0]instanceof M||Be(G,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),pe.unshift(ut.head);else if(Mt.local==="styling")pe[0]instanceof _||Be(G,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),pe.unshift(ut.head.styling);else if(Mt.local==="style"){var cn;pe[0]instanceof A?((cn=new b).initFromNode(Mt,G),cn.id?ut.head.styling.styles[cn.id]=cn:ne(G,"<style> element missing @id attribute"),pe.unshift(cn)):pe[0]instanceof Ce?((cn=new b).initFromNode(Mt,G),Dt(cn.styleAttrs,pe[0].styleAttrs),pe.unshift(cn)):Be(G,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Mt.local==="initial"){var Ft;if(pe[0]instanceof A){for(var Gn in(Ft=new Z).initFromNode(Mt,G),Ft.styleAttrs)Ft.styleAttrs.hasOwnProperty(Gn)&&(ut.head.styling.initials[Gn]=Ft.styleAttrs[Gn]);pe.unshift(Ft)}else Be(G,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Mt.local==="layout")pe[0]instanceof _||Be(G,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),pe.unshift(ut.head.layout);else if(Mt.local==="region"){pe[0]instanceof Y||Be(G,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var Sr=new Ce;Sr.initFromNode(ut,Mt,Ke[0],G),!Sr.id||Sr.id in ut.head.layout.regions?ne(G,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):ut.head.layout.regions[Sr.id]=Sr,pe.unshift(Sr)}else if(Mt.local==="body"){pe[0]instanceof M||Be(G,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),ut.body!==null&&Be(G,"Second <body> element at "+this.line+","+this.column+")");var Gr=new be;Gr.initFromNode(ut,Mt,Ke[0],G),ut.body=Gr,pe.unshift(Gr)}else if(Mt.local==="div"){pe[0]instanceof Je||pe[0]instanceof be||Be(G,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var gr=new Je;gr.initFromNode(ut,pe[0],Mt,Ke[0],G);var fi=gr.styleAttrs[y.byName.backgroundImage.qname];fi&&(gr.contents.push(new $(fi)),delete gr.styleAttrs[y.byName.backgroundImage.qname]),pe[0].contents.push(gr),pe.unshift(gr)}else if(Mt.local==="image"){pe[0]instanceof Je||Be(G,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var ao=new $;ao.initFromNode(ut,pe[0],Mt,Ke[0],G),pe[0].contents.push(ao),pe.unshift(ao)}else if(Mt.local==="p"){pe[0]instanceof Je||Be(G,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Hr=new we;Hr.initFromNode(ut,pe[0],Mt,Ke[0],G),pe[0].contents.push(Hr),pe.unshift(Hr)}else if(Mt.local==="span"){pe[0]instanceof qe||pe[0]instanceof we||Be(G,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var so=new qe;so.initFromNode(ut,pe[0],Mt,Ke[0],wt[0],G),pe[0].contents.push(so),pe.unshift(so)}else if(Mt.local==="br"){pe[0]instanceof qe||pe[0]instanceof we||Be(G,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var xi=new ft;xi.initFromNode(ut,pe[0],Mt,Ke[0],G),pe[0].contents.push(xi),pe.unshift(xi)}else if(Mt.local==="set"){pe[0]instanceof qe||pe[0]instanceof we||pe[0]instanceof Je||pe[0]instanceof be||pe[0]instanceof Ce||pe[0]instanceof ft||Be(G,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Fi=new He;Fi.initFromNode(ut,pe[0],Mt,G),pe[0].sets.push(Fi),pe.unshift(Fi)}else pe.unshift(new F(Mt));else pe.unshift(new F(Mt));if(pe[0]instanceof F){if(Mt.uri===E.ns_tt&&Mt.local==="metadata")lt++;else if(lt>0&&K&&"onOpenTag"in K){var no=[];for(var uo in Mt.attributes)no[Mt.attributes[uo].uri+" "+Mt.attributes[uo].local]={uri:Mt.attributes[uo].uri,local:Mt.attributes[uo].local,value:Mt.attributes[uo].value};K.onOpenTag(Mt.uri,Mt.local,no)}}},ge.write(D).close(),delete ut.head.styling.styles;var nt=!1;for(var ht in ut.head.layout.regions)if(ut.head.layout.regions.hasOwnProperty(ht)){nt=!0;break}if(!nt){var _t=Ce.prototype.createDefaultRegion(ut.lang);ut.head.layout.regions[_t.id]=_t}for(var Tt in ut.head.layout.regions)ut.head.layout.regions.hasOwnProperty(Tt)&&T(ut,ut.head.layout.regions[Tt],null,null);return ut.body&&T(ut,ut.body,null,null),ut.body&&g(ut.body),ut},M.prototype.initFromNode=function(D,G,K){var ge=function(lt,ut){var nt=ot(lt,E.ns_ttp,"cellResolution"),ht=15,_t=32;if(nt!==null){var Tt=/(\d+) (\d+)/.exec(nt);Tt!==null?(_t=parseInt(Tt[1]),ht=parseInt(Tt[2])):Ne(ut,"Malformed cellResolution value (using initial value instead)")}return{w:_t,h:ht}}(D,K);this.cellLength={h:new P.ComputedLength(0,1/ge.h),w:new P.ComputedLength(1/ge.w,0)};var pe=function(lt,ut){var nt,ht=ot(lt,E.ns_ttp,"frameRate"),_t=30;ht!==null&&((nt=/(\d+)/.exec(ht))!==null?_t=parseInt(nt[1]):Ne(ut,"Malformed frame rate attribute (using initial value instead)"));var Tt=ot(lt,E.ns_ttp,"frameRateMultiplier"),Mt=1;Tt!==null&&((nt=/(\d+) (\d+)/.exec(Tt))!==null?Mt=parseInt(nt[1])/parseInt(nt[2]):Ne(ut,"Malformed frame rate multiplier attribute (using initial value instead)"));var _n=Mt*_t,rn=1,cn=ot(lt,E.ns_ttp,"tickRate");return cn===null?ht!==null&&(rn=_n):(nt=/(\d+)/.exec(cn))!==null?rn=parseInt(nt[1]):Ne(ut,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:_n,tickRate:rn}}(D,K);this.effectiveFrameRate=pe.effectiveFrameRate,this.tickRate=pe.tickRate,this.aspectRatio=function(lt,ut){var nt=ot(lt,E.ns_ittp,"aspectRatio");nt===null&&(nt=ot(lt,E.ns_ttp,"displayAspectRatio"));var ht=null;if(nt!==null){var _t=/(\d+)\s+(\d+)/.exec(nt);if(_t!==null){var Tt=parseInt(_t[1]),Mt=parseInt(_t[2]);Tt!==0&&Mt!==0?ht=Tt/Mt:ne(ut,"Illegal aspectRatio values (ignoring)")}else ne(ut,"Malformed aspectRatio attribute (ignoring)")}return ht}(D,K);var Ke=ot(D,E.ns_ttp,"timeBase");Ke!==null&&Ke!=="media"&&Be(K,"Unsupported time base");var wt=function(lt,ut){var nt=ot(lt,E.ns_tts,"extent");if(nt===null)return null;var ht=nt.split(" ");if(ht.length!==2)return Ne(ut,"Malformed extent (ignoring)"),null;var _t=P.parseLength(ht[0]),Tt=P.parseLength(ht[1]);return Tt&&_t?{h:Tt,w:_t}:(Ne(ut,"Malformed extent values (ignoring)"),null)}(D,K);wt===null?this.pxLength={h:null,w:null}:(wt.h.unit==="px"&&wt.w.unit==="px"||Be(K,"Extent on TT must be in px or absent"),this.pxLength={h:new P.ComputedLength(0,1/wt.h.value),w:new P.ComputedLength(1/wt.w.value,0)}),this.dimensions={h:new P.ComputedLength(0,1),w:new P.ComputedLength(1,0)},this.lang=G},M.prototype._registerEvent=function(D){if(!(D.end<=D.begin)){var G=L(this.events,D.begin);if(G.found||this.events.splice(G.index,0,D.begin),D.end!==Number.POSITIVE_INFINITY){var K=L(this.events,D.end);K.found||this.events.splice(K.index,0,D.end)}}},M.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},M.prototype.getMediaTimeEvents=function(){return this.events},b.prototype.initFromNode=function(D,G){this.id=vt(D),this.styleAttrs=Ye(D,G),this.styleRefs=Re(D)},Z.prototype.initFromNode=function(D,G){for(var K in this.styleAttrs={},D.attributes)if(D.attributes[K].uri===E.ns_itts||D.attributes[K].uri===E.ns_ebutts||D.attributes[K].uri===E.ns_tts){var ge=D.attributes[K].uri+" "+D.attributes[K].local;this.styleAttrs[ge]=D.attributes[K].value}},$.prototype.initFromNode=function(D,G,K,ge,pe){this.src="src"in K.attributes?K.attributes.src.value:null,this.src||ne(pe,"Invalid image@src attribute"),this.type="type"in K.attributes?K.attributes.type.value:null,this.type||ne(pe,"Invalid image@type attribute"),X.prototype.initFromNode.call(this,D,G,K,pe),me.prototype.initFromNode.call(this,D,G,K,pe),ce.prototype.initFromNode.call(this,D,G,K,pe),C.prototype.initFromNode.call(this,D,G,K,pe),this.lang=ge},se.prototype.initFromNode=function(D,G,K,ge){this.id=vt(K)},C.prototype.initFromNode=function(D,G,K,ge){this.regionID=function(pe){return pe&&"region"in pe.attributes?pe.attributes.region.value:""}(K)},X.prototype.initFromNode=function(D,G,K,ge){this.styleAttrs=Ye(K,ge),D.head!==null&&D.head.styling!==null&&Et(D.head.styling,Re(K),this.styleAttrs,ge)},ce.prototype.initFromNode=function(D,G,K,ge){this.sets=[]},oe.prototype.initFromNode=function(D,G,K,ge){this.contents=[]},me.prototype.initFromNode=function(D,G,K,ge){var pe=function(Ke,wt,lt,ut){var nt=null;lt&&"begin"in lt.attributes&&(nt=Ht(Ke.tickRate,Ke.effectiveFrameRate,lt.attributes.begin.value))===null&&Ne(ut,"Malformed begin value "+lt.attributes.begin.value+" (using 0)");var ht=null;lt&&"dur"in lt.attributes&&(ht=Ht(Ke.tickRate,Ke.effectiveFrameRate,lt.attributes.dur.value))===null&&Ne(ut,"Malformed dur value "+lt.attributes.dur.value+" (ignoring)");var _t=null;return lt&&"end"in lt.attributes&&(_t=Ht(Ke.tickRate,Ke.effectiveFrameRate,lt.attributes.end.value))===null&&Ne(ut,"Malformed end value (ignoring)"),{explicit_begin:nt,explicit_end:_t,explicit_dur:ht}}(D,0,K,ge);this.explicit_begin=pe.explicit_begin,this.explicit_end=pe.explicit_end,this.explicit_dur=pe.explicit_dur,this.timeContainer=function(Ke,wt){var lt=Ke&&"timeContainer"in Ke.attributes?Ke.attributes.timeContainer.value:null;return lt&&lt!=="par"?lt==="seq"?"seq":(ne(wt,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(K,ge)},be.prototype.initFromNode=function(D,G,K,ge){X.prototype.initFromNode.call(this,D,null,G,ge),me.prototype.initFromNode.call(this,D,null,G,ge),ce.prototype.initFromNode.call(this,D,null,G,ge),C.prototype.initFromNode.call(this,D,null,G,ge),oe.prototype.initFromNode.call(this,D,null,G,ge),this.lang=K},Je.prototype.initFromNode=function(D,G,K,ge,pe){X.prototype.initFromNode.call(this,D,G,K,pe),me.prototype.initFromNode.call(this,D,G,K,pe),ce.prototype.initFromNode.call(this,D,G,K,pe),C.prototype.initFromNode.call(this,D,G,K,pe),oe.prototype.initFromNode.call(this,D,G,K,pe),this.lang=ge},we.prototype.initFromNode=function(D,G,K,ge,pe){X.prototype.initFromNode.call(this,D,G,K,pe),me.prototype.initFromNode.call(this,D,G,K,pe),ce.prototype.initFromNode.call(this,D,G,K,pe),C.prototype.initFromNode.call(this,D,G,K,pe),oe.prototype.initFromNode.call(this,D,G,K,pe),this.lang=ge},qe.prototype.initFromNode=function(D,G,K,ge,pe,Ke){X.prototype.initFromNode.call(this,D,G,K,Ke),me.prototype.initFromNode.call(this,D,G,K,Ke),ce.prototype.initFromNode.call(this,D,G,K,Ke),C.prototype.initFromNode.call(this,D,G,K,Ke),oe.prototype.initFromNode.call(this,D,G,K,Ke),this.space=pe,this.lang=ge},st.prototype.initFromText=function(D,G,K,ge,pe,Ke){me.prototype.initFromNode.call(this,D,G,null,Ke),this.text=K,this.space=pe,this.lang=ge},ft.prototype.initFromNode=function(D,G,K,ge,pe){C.prototype.initFromNode.call(this,D,G,K,pe),me.prototype.initFromNode.call(this,D,G,K,pe),this.lang=ge},Ce.prototype.createDefaultRegion=function(D){var G=new Ce;return se.call(G,""),X.call(G,{}),ce.call(G,[]),me.call(G,0,Number.POSITIVE_INFINITY,null),this.lang=D,G},Ce.prototype.initFromNode=function(D,G,K,ge){se.prototype.initFromNode.call(this,D,null,G,ge),me.prototype.initFromNode.call(this,D,null,G,ge),ce.prototype.initFromNode.call(this,D,null,G,ge),this.styleAttrs=Ye(G,ge),this.styleRefs=Re(G),this.lang=K},He.prototype.initFromNode=function(D,G,K,ge){me.prototype.initFromNode.call(this,D,G,K,ge);var pe=Ye(K,ge);for(var Ke in this.qname=null,this.value=null,pe)if(pe.hasOwnProperty(Ke)){if(this.qname){ne(ge,"More than one style specified on set");break}this.qname=Ke,this.value=pe[Ke]}}})(p,typeof sax>"u"?w(5378):sax,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},506:function(N,p,w){var U=/firefox/i.test(navigator.userAgent);(function(x,E,y){function P(oe,me,be,Je){var we;if(be.kind==="region")(we=document.createElement("div")).style.position="absolute";else if(be.kind==="body")we=document.createElement("div");else if(be.kind==="div")we=document.createElement("div");else if(be.kind==="image"){if(we=document.createElement("img"),oe.imgResolver!==null&&be.src!==null){var qe=oe.imgResolver(be.src,we);qe&&(we.src=qe),we.height=oe.regionH,we.width=oe.regionW}}else if(be.kind==="p")we=document.createElement("p");else if(be.kind==="span")if(be.styleAttrs[y.byName.ruby.qname]==="container")we=document.createElement("ruby"),oe.ruby=!0;else if(be.styleAttrs[y.byName.ruby.qname]==="base")we=document.createElement("span");else if(be.styleAttrs[y.byName.ruby.qname]==="text")we=document.createElement("rt");else if(be.styleAttrs[y.byName.ruby.qname]==="baseContainer")we=document.createElement("rbc");else if(be.styleAttrs[y.byName.ruby.qname]==="textContainer")we=document.createElement("rtc");else{if(be.styleAttrs[y.byName.ruby.qname]==="delimiter")return;we=document.createElement("span")}else be.kind==="br"&&(we=document.createElement("br"));if(we){if(be.lang&&(be.kind!=="region"&&be.lang===Je.lang||(we.lang=be.lang)),me.appendChild(we),we.style.margin="0",be.kind==="region"){var st=be.styleAttrs[y.byName.writingMode.qname];st==="lrtb"||st==="lr"?(oe.ipd="lr",oe.bpd="tb"):st==="rltb"||st==="rl"?(oe.ipd="rl",oe.bpd="tb"):st==="tblr"?(oe.ipd="tb",oe.bpd="lr"):st!=="tbrl"&&st!=="tb"||(oe.ipd="tb",oe.bpd="rl")}else if(be.kind==="p"&&oe.bpd==="tb"){var ft=be.styleAttrs[y.byName.direction.qname];oe.ipd=ft==="ltr"?"lr":"rl"}for(var Ce=0;Ce<Z.length;Ce++){var He=Z[Ce],vt=be.styleAttrs[He.qname];vt!==void 0&&He.map!==null&&He.map(oe,we,be,vt)}var Re=we,Ye=be.styleAttrs[y.byName.linePadding.qname];if(Ye&&!Ye.isZero()){var ot=Ye.toUsedLength(oe.w,oe.h);if(ot>0){var Ht=Math.ceil(ot)+"px";oe.bpd==="tb"?(Re.style.paddingLeft=Ht,Re.style.paddingRight=Ht):(Re.style.paddingTop=Ht,Re.style.paddingBottom=Ht),oe.lp=Ye}}var Bt=be.styleAttrs[y.byName.multiRowAlign.qname];if(Bt&&Bt!=="auto"){var Et=document.createElement("span");Et.style.display="inline-block",Et.style.textAlign=Bt,we.appendChild(Et),Re=Et,oe.mra=Bt}var Dt=be.styleAttrs[y.byName.rubyReserve.qname];if(Dt&&Dt[0]!=="none"&&(oe.rubyReserve=Dt),be.styleAttrs[y.byName.fillLineGap.qname]&&(oe.flg=!0),be.kind==="span"&&be.text){var Ne=be.styleAttrs[y.byName.textEmphasis.qname];if(Ne&&Ne.style!=="none"&&(oe.textEmphasis=!0),y.byName.textCombine.qname in be.styleAttrs&&be.styleAttrs[y.byName.textCombine.qname]==="all")we.textContent=be.text,we._isd_element=be,Ne&&A(oe,we,0,Ne);else for(var ne="",Be=0;Be<be.text.length;Be++){ne+=be.text.charAt(Be);var L=be.text.charCodeAt(Be);if(L<55296||L>56319||Be===be.text.length-1){var D=document.createElement("span");D.textContent=ne,Ne&&A(oe,D,0,Ne),we.appendChild(D),ne="",D._isd_element=be}}}if("contents"in be)for(var G=0;G<be.contents.length;G++)P(oe,Re,be.contents[G],be);var K=[];if(be.kind==="p"&&(_(oe,Re,K,null),oe.rubyReserve&&(function(lt,ut){for(var nt=0;nt<lt.length;nt++){var ht,_t,Tt=document.createElement("ruby"),Mt=document.createElement("span");Mt.textContent="",Tt.appendChild(Mt);var _n,rn=ut.rubyReserve[1].toUsedLength(ut.w,ut.h)+"px";ut.rubyReserve[0]==="both"||ut.rubyReserve[0]==="outside"&&lt.length==1?((ht=document.createElement("rtc")).style[se]=Q?"after":"under",ht.textContent="",ht.style.fontSize=rn,(_t=document.createElement("rtc")).style[se]=Q?"before":"over",_t.textContent="",_t.style.fontSize=rn,Tt.appendChild(ht),Tt.appendChild(_t)):((ht=document.createElement("rtc")).textContent="",ht.style.fontSize=rn,_n=ut.rubyReserve[0]==="after"||ut.rubyReserve[0]==="outside"&&nt>0?Q?"after":ut.bpd==="tb"||ut.bpd==="rl"?"under":"over":Q?"before":ut.bpd==="tb"||ut.bpd==="rl"?"over":"under",ht.style[se]=_n,Tt.appendChild(ht));for(var cn=null,Ft=0;Ft<lt[nt].rbc.length;Ft++)if(lt[nt].rbc[Ft].localName==="ruby"){cn=lt[nt].rbc[Ft];for(var Gn=0;Gn<cn.style.length;Gn++)Tt.style.setProperty(cn.style.item(Gn),cn.style.getPropertyValue(cn.style.item(Gn)));break}(cn=cn||lt[nt].elements[0].node).parentElement.insertBefore(Tt,cn)}}(K,oe),oe.rubyReserve=null),(oe.ruby||oe.rubyReserve)&&(function(lt,ut){for(var nt=0;nt<lt.length;nt++)for(var ht=0;ht<lt[nt].rbc.length;ht++){var _t;lt[nt].rbc[ht].style[se]||(_t=Q?nt===0?"before":"after":ut.bpd==="tb"||ut.bpd==="rl"?nt===0?"over":"under":nt===0?"under":"over",lt[nt].rbc[ht].style[se]=_t)}}(K,oe),oe.ruby=null),oe.textEmphasis&&(function(lt,ut){for(var nt=0;nt<lt.length;nt++)for(var ht=0;ht<lt[nt].te.length;ht++){var _t;lt[nt].te[ht].style[X]&&lt[nt].te[ht].style[X]!=="none"||(_t=ut.bpd==="tb"?nt===0?"left over":"left under":ut.bpd==="rl"?nt===0?"right under":"left under":nt===0?"left under":"right under",lt[nt].te[ht].style[X]=_t)}}(K,oe),oe.textEmphasis=null),oe.mra&&(function(lt){for(var ut=0;ut<lt.length-1;ut++){var nt=lt[ut].elements.length;if(nt!==0&&lt[ut].br===!1){var ht=document.createElement("br"),_t=lt[ut].elements[nt-1].node;_t.parentElement.insertBefore(ht,_t.nextSibling)}}}(K),oe.mra=null),oe.lp&&(function(lt,ut,nt){if(lt!==null)for(var ht=0;ht<lt.length;ht++){var _t=lt[ht].elements.length,Tt=Math.ceil(ut)+"px",Mt="-"+Math.ceil(ut)+"px";if(_t!==0){var _n=lt[ht].elements[lt[ht].start_elem],rn=lt[ht].elements[lt[ht].end_elem];if(_n===rn){var cn=_n.node.getBoundingClientRect();if(cn.width==0||cn.height==0)continue}nt.ipd==="lr"?(_n.node.style.marginLeft=Mt,_n.node.style.paddingLeft=Tt):nt.ipd==="rl"?(_n.node.style.paddingRight=Tt,_n.node.style.marginRight=Mt):nt.ipd==="tb"&&(_n.node.style.paddingTop=Tt,_n.node.style.marginTop=Mt),nt.ipd==="lr"?(U||(rn.node.style.marginRight=Mt),rn.node.style.paddingRight=Tt):nt.ipd==="rl"?(rn.node.style.paddingLeft=Tt,U||(rn.node.style.marginLeft=Mt)):nt.ipd==="tb"&&(rn.node.style.paddingBottom=Tt,rn.node.style.marginBottom=Mt)}}}(K,oe.lp.toUsedLength(oe.w,oe.h),oe),oe.lp=null),function(lt,ut){for(var nt=0;nt<lt.length;nt++)for(var ht=lt[nt],_t=1;_t<ht.elements.length;){var Tt=ht.elements[_t-1],Mt=ht.elements[_t];T(Tt.node,Mt.node,ut)?ht.elements.splice(_t,1):_t++}for(var _n,rn,cn=[],Ft=0;Ft<lt.length;Ft++)for(var Gn=0;Gn<lt[Ft].elements.length;Gn++)(rn=g(_n=lt[Ft].elements[Gn].node,cn,!1))&&(_n.style.backgroundColor=rn);for(var Sr=0;Sr<cn.length;Sr++)cn[Sr].style.backgroundColor=""}(K,oe),oe.flg)){var ge=M(Re.getBoundingClientRect(),oe);(function(lt,ut,nt,ht,_t){for(var Tt=Math.sign(nt-ut),Mt=0;Mt<=lt.length;Mt++){var _n,rn,cn,Ft;if(_n=Mt===0?Math.round(ut):Mt===lt.length?Math.round(nt):Math.round((lt[Mt-1].after+lt[Mt].before)/2),Mt>0&&lt[Mt-1])for(cn=0;cn<lt[Mt-1].elements.length;cn++)rn=Tt*(_n-(Ft=lt[Mt-1].elements[cn]).after)+"px",ht.bpd==="lr"?Ft.node.style.paddingRight=rn:ht.bpd==="rl"?Ft.node.style.paddingLeft=rn:ht.bpd==="tb"&&(Ft.node.style.paddingBottom=rn);if(Mt<lt.length)for(cn=0;cn<lt[Mt].elements.length;cn++)rn=Tt*((Ft=lt[Mt].elements[cn]).before-_n)+"px",ht.bpd==="lr"?Ft.node.style.paddingLeft=rn:ht.bpd==="rl"?Ft.node.style.paddingRight=rn:ht.bpd==="tb"&&(Ft.node.style.paddingTop=rn)}})(K,ge.before,ge.after,oe),oe.flg=null}if(be.kind==="region"&&oe.bpd==="tb"&&oe.enableRollUp&&be.contents.length>0&&be.styleAttrs[y.byName.displayAlign.qname]==="after"){_(oe,Re,K,null);var pe=new F(be.id===""?"_":be.id,K);if(oe.currentISDState[pe.id]=pe,oe.previousISDState&&pe.id in oe.previousISDState&&oe.previousISDState[pe.id].plist.length>0&&pe.plist.length>1&&pe.plist[pe.plist.length-2].text===oe.previousISDState[pe.id].plist[oe.previousISDState[pe.id].plist.length-1].text){var Ke=we.firstElementChild,wt=pe.plist[pe.plist.length-1].after-pe.plist[pe.plist.length-1].before;Ke.style.bottom="-"+wt+"px",Ke.style.transition="transform 0.4s",Ke.style.position="relative",Ke.style.transform="translateY(-"+wt+"px)"}}}else ce(oe.errorHandler,"Error processing ISD element kind: "+be.kind)}function g(oe,me,be){return oe.style.backgroundColor?(be&&!me.includes(oe)&&me.push(oe),oe.style.backgroundColor):oe.parentElement.nodeName==="SPAN"||oe.parentElement.nodeName==="RUBY"||oe.parentElement.nodeName==="RBC"||oe.parentElement.nodeName==="RTC"||oe.parentElement.nodeName==="RT"?g(oe.parentElement,me,!0):void 0}function T(oe,me,be){if(oe.tagName==="SPAN"&&me.tagName==="SPAN"&&oe._isd_element===me._isd_element){if(!oe._isd_element)return ce(be.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;oe.textContent+=me.textContent;for(var Je=0;Je<me.style.length;Je++){var we=me.style[Je];(we.indexOf("border")>=0||we.indexOf("padding")>=0||we.indexOf("margin")>=0)&&(oe.style[we]=me.style[we])}return me.parentElement.removeChild(me),!0}return!1}function F(oe,me){this.id=oe,this.plist=me}function M(oe,me){var be={before:null,after:null,start:null,end:null};return me.bpd==="tb"?(be.before=oe.top,be.after=oe.bottom,me.ipd==="lr"?(be.start=oe.left,be.end=oe.right):(be.start=oe.right,be.end=oe.left)):me.bpd==="lr"?(be.before=oe.left,be.after=oe.right,be.start=oe.top,be.end=oe.bottom):me.bpd==="rl"&&(be.before=oe.right,be.after=oe.left,be.start=oe.top,be.end=oe.bottom),be}function _(oe,me,be,Je){if(me.localName!=="rt"&&me.localName!=="rtc"){var we,qe,st,ft,Ce=me.style.backgroundColor||Je;if(me.childElementCount===0)if(me.localName==="span"||me.localName==="rb"){var He=M(me.getBoundingClientRect(),oe);if(be.length!==0&&(we=He.before,qe=He.after,st=be[be.length-1].before,qe<(ft=be[be.length-1].after)&&we>st||ft<=qe&&st>=we)){var vt=Math.sign(He.after-He.before),Re=Math.sign(He.end-He.start);vt*(He.before-be[be.length-1].before)<0&&(be[be.length-1].before=He.before),vt*(He.after-be[be.length-1].after)>0&&(be[be.length-1].after=He.after),Re*(He.start-be[be.length-1].start)<0&&(be[be.length-1].start=He.start,be[be.length-1].start_elem=be[be.length-1].elements.length),Re*(He.end-be[be.length-1].end)>0&&(be[be.length-1].end=He.end,be[be.length-1].end_elem=be[be.length-1].elements.length)}else be.push({before:He.before,after:He.after,start:He.start,end:He.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});be[be.length-1].text+=me.textContent,be[be.length-1].elements.push({node:me,bgcolor:Ce,before:He.before,after:He.after})}else me.localName==="br"&&be.length!==0&&(be[be.length-1].br=!0);else for(var Ye=me.firstChild;Ye;)Ye.nodeType===Node.ELEMENT_NODE&&(_(oe,Ye,be,Ce),Ye.localName==="ruby"||Ye.localName==="rtc"?be.length>0&&be[be.length-1].rbc.push(Ye):Ye.localName==="span"&&Ye.style[C]&&Ye.style[C]!=="none"&&be.length>0&&be[be.length-1].te.push(Ye)),Ye=Ye.nextSibling}}function A(oe,me,be,Je){var we;Je.style!=="none"&&(Je.style==="auto"?me.style[C]="filled":me.style[C]=Je.style+" "+Je.symbol,(Je.position==="before"||Je.position==="after")&&(we=oe.bpd==="tb"?Je.position==="before"?"left over":"left under":oe.bpd==="rl"?Je.position==="before"?"right under":"left under":Je.position==="before"?"left under":"right under",me.style[X]=we))}function b(oe,me){this.qname=oe,this.map=me}x.render=function(oe,me,be,Je,we,qe,st,ft,Ce){var He=Je||me.clientHeight,vt=we||me.clientWidth;if(oe.aspectRatio!==null){var Re=He*oe.aspectRatio;Re>vt?He=Math.round(vt/oe.aspectRatio):vt=Re}var Ye=document.createElement("div");Ye.style.position="relative",Ye.style.width=vt+"px",Ye.style.height=He+"px",Ye.style.margin="auto",Ye.style.top=0,Ye.style.bottom=0,Ye.style.left=0,Ye.style.right=0,Ye.style.zIndex=0;var ot={h:He,w:vt,regionH:null,regionW:null,imgResolver:be,displayForcedOnlyMode:qe||!1,isd:oe,errorHandler:st,previousISDState:ft,enableRollUp:Ce||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(me.appendChild(Ye),"contents"in oe)for(var Ht=0;Ht<oe.contents.length;Ht++)P(ot,Ye,oe.contents[Ht],oe);return ot.currentISDState};for(var Z=[new b("http://www.w3.org/ns/ttml#styling backgroundColor",function(oe,me,be,Je){Je[3]!==0&&(me.style.backgroundColor="rgba("+Je[0].toString()+","+Je[1].toString()+","+Je[2].toString()+","+(Je[3]/255).toString()+")")}),new b("http://www.w3.org/ns/ttml#styling color",function(oe,me,be,Je){me.style.color="rgba("+Je[0].toString()+","+Je[1].toString()+","+Je[2].toString()+","+(Je[3]/255).toString()+")"}),new b("http://www.w3.org/ns/ttml#styling direction",function(oe,me,be,Je){me.style.direction=Je}),new b("http://www.w3.org/ns/ttml#styling display",function(oe,me,be,Je){}),new b("http://www.w3.org/ns/ttml#styling displayAlign",function(oe,me,be,Je){me.style.display="flex",me.style.flexDirection="column",Je==="before"?me.style.justifyContent="flex-start":Je==="center"?me.style.justifyContent="center":Je==="after"&&(me.style.justifyContent="flex-end")}),new b("http://www.w3.org/ns/ttml#styling extent",function(oe,me,be,Je){oe.regionH=Je.h.toUsedLength(oe.w,oe.h),oe.regionW=Je.w.toUsedLength(oe.w,oe.h);var we=0,qe=0,st=be.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];st&&(we=st[0].toUsedLength(oe.w,oe.h)+st[2].toUsedLength(oe.w,oe.h),qe=st[1].toUsedLength(oe.w,oe.h)+st[3].toUsedLength(oe.w,oe.h)),me.style.height=oe.regionH-we+"px",me.style.width=oe.regionW-qe+"px"}),new b("http://www.w3.org/ns/ttml#styling fontFamily",function(oe,me,be,Je){for(var we=[],qe=0;qe<Je.length;qe++)Je[qe]=Je[qe].trim(),Je[qe]==="monospaceSerif"?(we.push("Courier New"),we.push('"Liberation Mono"'),we.push("Courier"),we.push("monospace")):Je[qe]==="proportionalSansSerif"?(we.push("Arial"),we.push("Helvetica"),we.push('"Liberation Sans"'),we.push("sans-serif")):Je[qe]==="monospace"?we.push("monospace"):Je[qe]==="sansSerif"?we.push("sans-serif"):Je[qe]==="serif"?we.push("serif"):Je[qe]==="monospaceSansSerif"?(we.push("Consolas"),we.push("monospace")):Je[qe]==="proportionalSerif"?we.push("serif"):we.push(Je[qe]);if(we.length>0){for(var st=[we[0]],ft=1;ft<we.length;ft++)st.indexOf(we[ft])==-1&&st.push(we[ft]);we=st}me.style.fontFamily=we.join(",")}),new b("http://www.w3.org/ns/ttml#styling shear",function(oe,me,be,Je){if(Je!==0){var we=-.9*Je;oe.bpd==="tb"?me.style.transform="skewX("+we+"deg)":me.style.transform="skewY("+we+"deg)"}}),new b("http://www.w3.org/ns/ttml#styling fontSize",function(oe,me,be,Je){me.style.fontSize=Je.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling fontStyle",function(oe,me,be,Je){me.style.fontStyle=Je}),new b("http://www.w3.org/ns/ttml#styling fontWeight",function(oe,me,be,Je){me.style.fontWeight=Je}),new b("http://www.w3.org/ns/ttml#styling lineHeight",function(oe,me,be,Je){me.style.lineHeight=Je==="normal"?"normal":Je.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling opacity",function(oe,me,be,Je){me.style.opacity=Je}),new b("http://www.w3.org/ns/ttml#styling origin",function(oe,me,be,Je){me.style.top=Je.h.toUsedLength(oe.w,oe.h)+"px",me.style.left=Je.w.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling overflow",function(oe,me,be,Je){me.style.overflow=Je}),new b("http://www.w3.org/ns/ttml#styling padding",function(oe,me,be,Je){var we=[];we[0]=Je[0].toUsedLength(oe.w,oe.h)+"px",we[1]=Je[3].toUsedLength(oe.w,oe.h)+"px",we[2]=Je[2].toUsedLength(oe.w,oe.h)+"px",we[3]=Je[1].toUsedLength(oe.w,oe.h)+"px",me.style.padding=we.join(" ")}),new b("http://www.w3.org/ns/ttml#styling position",function(oe,me,be,Je){me.style.top=Je.h.toUsedLength(oe.w,oe.h)+"px",me.style.left=Je.w.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling rubyAlign",function(oe,me,be,Je){me.style.rubyAlign=Je==="spaceAround"?"space-around":"center"}),new b("http://www.w3.org/ns/ttml#styling rubyPosition",function(oe,me,be,Je){var we;Je!=="before"&&Je!=="after"||(we=Q?Je:oe.bpd==="tb"||oe.bpd==="rl"?Je==="before"?"over":"under":Je==="before"?"under":"over",me.parentElement.style[se]=we)}),new b("http://www.w3.org/ns/ttml#styling showBackground",null),new b("http://www.w3.org/ns/ttml#styling textAlign",function(oe,me,be,Je){var we;we=Je==="start"?oe.ipd==="rl"?"right":"left":Je==="end"?oe.ipd==="rl"?"left":"right":Je,me.style.textAlign=we}),new b("http://www.w3.org/ns/ttml#styling textDecoration",function(oe,me,be,Je){me.style.textDecoration=Je.join(" ").replace("lineThrough","line-through")}),new b("http://www.w3.org/ns/ttml#styling textOutline",function(oe,me,be,Je){}),new b("http://www.w3.org/ns/ttml#styling textShadow",function(oe,me,be,Je){var we=be.styleAttrs[y.byName.textOutline.qname];if(Je==="none"&&we==="none")me.style.textShadow="";else{var qe=[];if(we!=="none"){var st="rgba("+we.color[0].toString()+","+we.color[1].toString()+","+we.color[2].toString()+","+(we.color[3]/255).toString()+")";qe.push("1px 1px 1px "+st),qe.push("-1px 1px 1px "+st),qe.push("1px -1px 1px "+st),qe.push("-1px -1px 1px "+st)}if(Je!=="none")for(var ft=0;ft<Je.length;ft++)qe.push(Je[ft].x_off.toUsedLength(oe.w,oe.h)+"px "+Je[ft].y_off.toUsedLength(oe.w,oe.h)+"px "+Je[ft].b_radius.toUsedLength(oe.w,oe.h)+"px rgba("+Je[ft].color[0].toString()+","+Je[ft].color[1].toString()+","+Je[ft].color[2].toString()+","+(Je[ft].color[3]/255).toString()+")");me.style.textShadow=qe.join(",")}}),new b("http://www.w3.org/ns/ttml#styling textCombine",function(oe,me,be,Je){me.style.textCombineUpright=Je}),new b("http://www.w3.org/ns/ttml#styling textEmphasis",function(oe,me,be,Je){}),new b("http://www.w3.org/ns/ttml#styling unicodeBidi",function(oe,me,be,Je){var we;we=Je==="bidiOverride"?"bidi-override":Je,me.style.unicodeBidi=we}),new b("http://www.w3.org/ns/ttml#styling visibility",function(oe,me,be,Je){me.style.visibility=Je}),new b("http://www.w3.org/ns/ttml#styling wrapOption",function(oe,me,be,Je){Je==="wrap"?be.space==="preserve"?me.style.whiteSpace="pre-wrap":me.style.whiteSpace="normal":be.space==="preserve"?me.style.whiteSpace="pre":me.style.whiteSpace="noWrap"}),new b("http://www.w3.org/ns/ttml#styling writingMode",function(oe,me,be,Je){Je==="lrtb"||Je==="lr"||Je==="rltb"||Je==="rl"?me.style.writingMode="horizontal-tb":Je==="tblr"?me.style.writingMode="vertical-lr":Je!=="tbrl"&&Je!=="tb"||(me.style.writingMode="vertical-rl")}),new b("http://www.w3.org/ns/ttml#styling zIndex",function(oe,me,be,Je){me.style.zIndex=Je}),new b("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(oe,me,be,Je){oe.displayForcedOnlyMode&&Je===!1&&(me.style.visibility="hidden")})],Y={},$=0;$<Z.length;$++)Y[Z[$].qname]=Z[$];var Q="webkitRubyPosition"in window.getComputedStyle(document.documentElement),se=Q?"webkitRubyPosition":"rubyPosition",C="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",X="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function ce(oe,me){if(oe&&oe.error&&oe.error(me))throw me}})(p,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4080:function(N,p,w){(function(U,x,E,y){U.generateISD=function(b,Z,Y){var $,Q=new M(b),se={},C={},X=b.head.styling.initials[E.byName.showBackground.qname],ce=b.head.styling.initials[E.byName.backgroundColor.qname];for(var oe in b.head.layout.regions)if(b.head.layout.regions.hasOwnProperty(oe)){var me=b.head.layout.regions[oe],be=me.styleAttrs[E.byName.showBackground.qname]||X,Je=me.styleAttrs[E.byName.backgroundColor.qname]||ce;C[me.id]=(be==="always"||be===void 0)&&Je!==void 0&&!(Z<me.begin||Z>=me.end)}for(var we in b.body&&b.body.regionID&&(C[b.body.regionID]=!0),$=b.body!==null?function st(ft,Ce){if(Ce.contents){var He={};for(var vt in Ce)Ce.hasOwnProperty(vt)&&(He[vt]=Ce[vt]);return He.contents=[],Ce.contents.filter(function(Re){return!(ft<Re.begin||ft>=Re.end)}).forEach(function(Re){var Ye=st(ft,Re);Ye.regionID&&(C[Ye.regionID]=!0),Ye!==null&&He.contents.push(Ye)}),He}return Ce}(Z,b.body):null,C[""]!==void 0&&(C[""]=!0),C)if(C[we]){var qe=g(b,Z,b.head.layout.regions[we],$,null,"",b.head.layout.regions[we],Y,se);qe!==null&&Q.contents.push(qe.element)}return Q};var P=[E.byName.color.qname,E.byName.textCombine.qname,E.byName.textDecoration.qname,E.byName.textEmphasis.qname,E.byName.textOutline.qname,E.byName.textShadow.qname];function g(b,Z,Y,$,Q,se,C,X,ce){if(Z<C.begin||Z>=C.end)return null;var oe="regionID"in C&&C.regionID!==""?C.regionID:se;if(Q!==null&&oe!==Y.id&&(!("contents"in C)||"contents"in C&&C.contents.length===0||oe!==""))return null;var me=new _(C);if("sets"in C)for(var be=0;be<C.sets.length;be++)Z<C.sets[be].begin||Z>=C.sets[be].end||(me.styleAttrs[C.sets[be].qname]=C.sets[be].value);var Je={};for(var we in me.styleAttrs)if(me.styleAttrs.hasOwnProperty(we)&&(Je[we]=!0,me.kind==="region"&&we===E.byName.writingMode.qname&&!(E.byName.direction.qname in me.styleAttrs))){var qe=me.styleAttrs[we];qe==="lrtb"||qe==="lr"?me.styleAttrs[E.byName.direction.qname]="ltr":qe!=="rltb"&&qe!=="rl"||(me.styleAttrs[E.byName.direction.qname]="rtl")}if(Q!==null)for(var st=0;st<E.all.length;st++){var ft=E.all[st];if(ft.qname===E.byName.textDecoration.qname){var Ce=Q.styleAttrs[ft.qname],He=me.styleAttrs[ft.qname],vt=[];He===void 0?vt=Ce:He.indexOf("none")===-1?((He.indexOf("noUnderline")===-1&&Ce.indexOf("underline")!==-1||He.indexOf("underline")!==-1)&&vt.push("underline"),(He.indexOf("noLineThrough")===-1&&Ce.indexOf("lineThrough")!==-1||He.indexOf("lineThrough")!==-1)&&vt.push("lineThrough"),(He.indexOf("noOverline")===-1&&Ce.indexOf("overline")!==-1||He.indexOf("overline")!==-1)&&vt.push("overline")):vt.push("none"),me.styleAttrs[ft.qname]=vt}else if(ft.qname!==E.byName.fontSize.qname||ft.qname in me.styleAttrs||me.kind!=="span"||me.styleAttrs[E.byName.ruby.qname]!=="textContainer")if(ft.qname!==E.byName.fontSize.qname||ft.qname in me.styleAttrs||me.kind!=="span"||me.styleAttrs[E.byName.ruby.qname]!=="text")ft.inherit&&ft.qname in Q.styleAttrs&&!(ft.qname in me.styleAttrs)&&(me.styleAttrs[ft.qname]=Q.styleAttrs[ft.qname]);else{var Re=Q.styleAttrs[E.byName.fontSize.qname];Q.styleAttrs[E.byName.ruby.qname]==="textContainer"?me.styleAttrs[ft.qname]=Re:me.styleAttrs[ft.qname]=new y.ComputedLength(.5*Re.rw,.5*Re.rh)}else{var Ye=Q.styleAttrs[E.byName.fontSize.qname];me.styleAttrs[ft.qname]=new y.ComputedLength(.5*Ye.rw,.5*Ye.rh)}}for(var ot=0;ot<E.all.length;ot++){var Ht=E.all[ot];if(!(Ht.qname in me.styleAttrs)&&!(Ht.qname===E.byName.position.qname&&E.byName.origin.qname in me.styleAttrs||Ht.qname===E.byName.origin.qname&&E.byName.position.qname in me.styleAttrs)){var Bt=b.head.styling.initials[Ht.qname]||Ht.initial;if(Bt!==null&&(me.kind==="region"||Ht.inherit===!1&&Bt!==null)){var Et=Ht.parse(Bt);Et!==null?(me.styleAttrs[Ht.qname]=Et,Je[Ht.qname]=!0):A(X,"Invalid initial value for '"+Ht.qname+"' on element '"+me.kind)}}}for(var Dt=0;Dt<E.all.length;Dt++){var Ne=E.all[Dt];if(Ne.qname in Je&&Ne.compute!==null){var ne=Ne.compute(b,Q,me,me.styleAttrs[Ne.qname],ce);ne!==null?me.styleAttrs[Ne.qname]=ne:(me.styleAttrs[Ne.qname]=Ne.compute(b,Q,me,Ne.parse(Ne.initial),ce),A(X,"Style '"+Ne.qname+"' on element '"+me.kind+"' cannot be computed"))}}if(me.styleAttrs[E.byName.display.qname]==="none")return null;var Be=null;Q===null?Be=$===null?[]:[$]:"contents"in C&&(Be=C.contents);for(var L=0;Be!==null&&L<Be.length;L++){var D=g(b,Z,Y,$,me,oe,Be[L],X,ce);D!==null&&me.contents.push(D.element)}for(var G in me.styleAttrs)if(me.styleAttrs.hasOwnProperty(G)){var K=!1;if(me.kind==="span"){var ge=me.styleAttrs[E.byName.ruby.qname];(K=(ge==="container"||ge==="textContainer"||ge==="baseContainer")&&P.indexOf(G)!==-1)||(K=ge!=="container"&&G===E.byName.rubyAlign.qname),K||(K=!(ge==="textContainer"||ge==="text")&&G===E.byName.rubyPosition.qname)}if(!K){var pe=E.byQName[G];"applies"in pe&&(K=pe.applies.indexOf(me.kind)===-1)}K&&delete me.styleAttrs[G]}var Ke=me.styleAttrs[E.byName.ruby.qname];if(me.kind==="p"||me.kind==="span"&&(Ke==="textContainer"||Ke==="text")){var wt=[];T(me,wt),function(lt){for(var ut,nt=0;nt<lt.length;)if((ut=lt[nt]).kind!=="br"&&ut.space!=="preserve"){var ht=ut.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(ht)&&(nt===0||(_t=lt[nt-1]).kind==="br"||/[\r\n\t ]$/.test(_t.text))&&(ht=ht.substring(1)),ut.text=ht,ht.length===0?lt.splice(nt,1):nt++}else nt++;var _t,Tt;for(nt=0;nt<lt.length;nt++)(ut=lt[nt]).kind!=="br"&&ut.space!=="preserve"?/[ ]$/.test(ut.text)&&(nt===lt.length-1||(Tt=lt[nt+1]).kind==="br"||Tt.space==="preserve"&&/^[\r\n]/.test(Tt.text))&&(ut.text=ut.text.slice(0,-1)):nt++}(wt),F(me)}return me.kind==="div"&&E.byName.backgroundImage.qname in me.styleAttrs||me.kind==="br"||me.kind==="image"||"contents"in me&&me.contents.length>0||me.kind==="span"&&me.text!==null||me.kind==="region"&&me.styleAttrs[E.byName.showBackground.qname]==="always"?{region_id:oe,element:me}:null}function T(b,Z){if("contents"in b)for(var Y=0;Y<b.contents.length;Y++){var $=b.contents[Y],Q=$.styleAttrs[E.byName.ruby.qname];($.kind!=="span"||Q!=="textContainer"&&Q!=="text")&&("contents"in $?T($,Z):($.kind==="span"&&$.text.length!==0||$.kind==="br")&&Z.push($))}}function F(b){if(b.kind==="br")return!1;if("text"in b)return b.text.length===0;if("contents"in b){for(var Z=b.contents.length;Z--;)F(b.contents[Z])&&b.contents.splice(Z,1);return b.contents.length===0}}function M(b){this.contents=[],this.aspectRatio=b.aspectRatio,this.lang=b.lang}function _(b){for(var Z in this.kind=b.kind||"region",this.lang=b.lang,b.id&&(this.id=b.id),this.styleAttrs={},b.styleAttrs)b.styleAttrs.hasOwnProperty(Z)&&(this.styleAttrs[Z]=b.styleAttrs[Z]);"src"in b&&(this.src=b.src),"type"in b&&(this.type=b.type),"text"in b?this.text=b.text:(this.kind==="region"||"contents"in b)&&(this.contents=[]),"space"in b&&(this.space=b.space)}function A(b,Z){if(b&&b.error&&b.error(Z))throw Z}})(p,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4403:function(N,p,w){p.generateISD=w(4080).generateISD,p.fromXML=w(3362).fromXML,p.renderHTML=w(506).render},210:function(N,p){(function(w){w.ns_tt="http://www.w3.org/ns/ttml",w.ns_tts="http://www.w3.org/ns/ttml#styling",w.ns_ttp="http://www.w3.org/ns/ttml#parameter",w.ns_xml="http://www.w3.org/XML/1998/namespace",w.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",w.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",w.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",w.ns_ebutts="urn:ebu:tt:style"})(p)},6811:function(N,p,w){(function(U,x,E){function y(T,F,M,_,A,b,Z,Y){this.name=F,this.ns=T,this.qname=T+" "+F,this.inherit=A,this.animatable=b,this.initial=M,this.applies=_,this.parse=Z,this.compute=Y}for(var P in U.all=[new y(x.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,E.parseColor,null),new y(x.ns_tts,"color","white",["span"],!0,!0,E.parseColor,null),new y(x.ns_tts,"direction","ltr",["p","span"],!0,!0,function(T){return T},null),new y(x.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(T){return T},null),new y(x.ns_tts,"displayAlign","before",["region"],!1,!0,function(T){return T},null),new y(x.ns_tts,"extent","auto",["tt","region"],!1,!0,function(T){if(T==="auto")return T;var F=T.split(" ");if(F.length!==2)return null;var M=E.parseLength(F[0]),_=E.parseLength(F[1]);return _&&M?{h:_,w:M}:null},function(T,F,M,_,A){var b,Z;if(_==="auto")b=new E.ComputedLength(0,1);else if((b=E.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")Z=new E.ComputedLength(1,0);else if((Z=E.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:b,w:Z}}),new y(x.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(T){for(var F=T.split(","),M=[],_=0;_<F.length;_++)F[_]=F[_].trim(),F[_].charAt(0)!=="'"&&F[_].charAt(0)!=='"'&&F[_]==="default"?M.push("monospaceSerif"):M.push(F[_]);return M},null),new y(x.ns_tts,"shear","0%",["p"],!0,!0,E.parseLength,function(T,F,M,_){return _.unit!=="%"?null:Math.abs(_.value)>100?100*Math.sign(_.value):_.value}),new y(x.ns_tts,"fontSize","1c",["span","p"],!0,!0,E.parseLength,function(T,F,M,_,A){return E.toComputedLength(_.value,_.unit,F!==null?F.styleAttrs[U.byName.fontSize.qname]:T.cellLength.h,F!==null?F.styleAttrs[U.byName.fontSize.qname]:T.cellLength.h,T.cellLength.h,T.pxLength.h)}),new y(x.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(T){return T},null),new y(x.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(T){return T},null),new y(x.ns_tts,"lineHeight","normal",["p"],!0,!0,function(T){return T==="normal"?T:E.parseLength(T)},function(T,F,M,_,A){var b;if(_==="normal")b=_;else if((b=E.toComputedLength(_.value,_.unit,M.styleAttrs[U.byName.fontSize.qname],M.styleAttrs[U.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null)return null;return b}),new y(x.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new y(x.ns_tts,"origin","auto",["region"],!1,!0,function(T){if(T==="auto")return T;var F=T.split(" ");if(F.length!==2)return null;var M=E.parseLength(F[0]),_=E.parseLength(F[1]);return _&&M?{h:_,w:M}:null},function(T,F,M,_,A){var b,Z;if(_==="auto")b=new E.ComputedLength(0,0);else if((b=E.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")Z=new E.ComputedLength(0,0);else if((Z=E.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:b,w:Z}}),new y(x.ns_tts,"overflow","hidden",["region"],!1,!0,function(T){return T},null),new y(x.ns_tts,"padding","0px",["region"],!1,!0,function(T){var F=T.split(" ");if(F.length>4)return null;for(var M=[],_=0;_<F.length;_++){var A=E.parseLength(F[_]);if(!A)return null;M.push(A)}return M},function(T,F,M,_,A){var b;if(_.length===1)b=[_[0],_[0],_[0],_[0]];else if(_.length===2)b=[_[0],_[1],_[0],_[1]];else if(_.length===3)b=[_[0],_[1],_[2],_[1]];else{if(_.length!==4)return null;b=[_[0],_[1],_[2],_[3]]}var Z=M.styleAttrs[U.byName.writingMode.qname];if(Z==="lrtb"||Z==="lr")b=[b[0],b[3],b[2],b[1]];else if(Z==="rltb"||Z==="rl")b=[b[0],b[1],b[2],b[3]];else if(Z==="tblr")b=[b[3],b[0],b[1],b[2]];else{if(Z!=="tbrl"&&Z!=="tb")return null;b=[b[3],b[2],b[1],b[0]]}for(var Y=[],$=0;$<b.length;$++)if(b[$].value===0)Y[$]=new E.ComputedLength(0,0);else if(Y[$]=E.toComputedLength(b[$].value,b[$].unit,M.styleAttrs[U.byName.fontSize.qname],$===0||$===2?M.styleAttrs[U.byName.extent.qname].h:M.styleAttrs[U.byName.extent.qname].w,$===0||$===2?T.cellLength.h:T.cellLength.w,$===0||$===2?T.pxLength.h:T.pxLength.w),Y[$]===null)return null;return Y}),new y(x.ns_tts,"position","top left",["region"],!1,!0,function(T){return E.parsePosition(T)},function(T,F,M,_){var A,b;return(A=E.toComputedLength(_.v.offset.value,_.v.offset.unit,null,new E.ComputedLength(-M.styleAttrs[U.byName.extent.qname].h.rw,T.dimensions.h.rh-M.styleAttrs[U.byName.extent.qname].h.rh),null,T.pxLength.h))===null?null:(_.v.edge==="bottom"&&(A=new E.ComputedLength(-A.rw-M.styleAttrs[U.byName.extent.qname].h.rw,T.dimensions.h.rh-A.rh-M.styleAttrs[U.byName.extent.qname].h.rh)),b=E.toComputedLength(_.h.offset.value,_.h.offset.unit,null,new E.ComputedLength(T.dimensions.w.rw-M.styleAttrs[U.byName.extent.qname].w.rw,-M.styleAttrs[U.byName.extent.qname].w.rh),null,T.pxLength.w),A===null?null:(_.h.edge==="right"&&(b=new E.ComputedLength(T.dimensions.w.rw-b.rw-M.styleAttrs[U.byName.extent.qname].w.rw,-b.rh-M.styleAttrs[U.byName.extent.qname].w.rh)),{h:A,w:b}))}),new y(x.ns_tts,"ruby","none",["span"],!1,!0,function(T){return T},null),new y(x.ns_tts,"rubyAlign","center",["span"],!0,!0,function(T){return T!=="center"&&T!=="spaceAround"?null:T},null),new y(x.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(T){return T},null),new y(x.ns_tts,"rubyReserve","none",["p"],!0,!0,function(T){var F=T.split(" "),M=[null,null];if(F.length===0||F.length>2||F[0]!=="none"&&F[0]!=="both"&&F[0]!=="after"&&F[0]!=="before"&&F[0]!=="outside")return null;if(M[0]=F[0],F.length===2&&F[0]!=="none"){var _=E.parseLength(F[1]);if(!_)return null;M[1]=_}return M},function(T,F,M,_,A){if(_[0]==="none")return _;var b;return(b=_[1]===null?new E.ComputedLength(.5*M.styleAttrs[U.byName.fontSize.qname].rw,.5*M.styleAttrs[U.byName.fontSize.qname].rh):E.toComputedLength(_[1].value,_[1].unit,M.styleAttrs[U.byName.fontSize.qname],M.styleAttrs[U.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null?null:[_[0],b]}),new y(x.ns_tts,"showBackground","always",["region"],!1,!0,function(T){return T},null),new y(x.ns_tts,"textAlign","start",["p"],!0,!0,function(T){return T},function(T,F,M,_,A){return _==="left"?"start":_==="right"?"end":_}),new y(x.ns_tts,"textCombine","none",["span"],!0,!0,function(T){return T==="none"||T==="all"?T:null},null),new y(x.ns_tts,"textDecoration","none",["span"],!0,!0,function(T){return T.split(" ")},null),new y(x.ns_tts,"textEmphasis","none",["span"],!0,!0,function(T){for(var F=T.split(" "),M={style:null,symbol:null,color:null,position:null},_=0;_<F.length;_++)if(F[_]==="none"||F[_]==="auto")M.style=F[_];else if(F[_]==="filled"||F[_]==="open")M.style=F[_];else if(F[_]==="circle"||F[_]==="dot"||F[_]==="sesame")M.symbol=F[_];else if(F[_]==="current")M.color=F[_];else if(F[_]==="outside"||F[_]==="before"||F[_]==="after")M.position=F[_];else if(M.color=E.parseColor(F[_]),M.color===null)return null;return M.style==null&&M.symbol==null?M.style="auto":(M.symbol=M.symbol||"circle",M.style=M.style||"filled"),M.position=M.position||"outside",M.color=M.color||"current",M},null),new y(x.ns_tts,"textOutline","none",["span"],!0,!0,function(T){if(T==="none")return T;var F={},M=T.split(" ");if(M.length===0||M.length>2)return null;var _=E.parseColor(M[0]);if(F.color=_,_!==null&&M.shift(),M.length!==1)return null;var A=E.parseLength(M[0]);return A?(F.thickness=A,F):null},function(T,F,M,_,A){if(_==="none")return _;var b={};return _.color===null?b.color=M.styleAttrs[U.byName.color.qname]:b.color=_.color,b.thickness=E.toComputedLength(_.thickness.value,_.thickness.unit,M.styleAttrs[U.byName.fontSize.qname],M.styleAttrs[U.byName.fontSize.qname],T.cellLength.h,T.pxLength.h),b.thickness===null?null:b}),new y(x.ns_tts,"textShadow","none",["span"],!0,!0,E.parseTextShadow,function(T,F,M,_){if(_==="none")return _;for(var A=[],b=0;b<_.length;b++){var Z={};if(Z.x_off=E.toComputedLength(_[b][0].value,_[b][0].unit,null,M.styleAttrs[U.byName.fontSize.qname],null,T.pxLength.w),Z.x_off===null||(Z.y_off=E.toComputedLength(_[b][1].value,_[b][1].unit,null,M.styleAttrs[U.byName.fontSize.qname],null,T.pxLength.h),Z.y_off===null))return null;if(_[b][2]===null)Z.b_radius=0;else if(Z.b_radius=E.toComputedLength(_[b][2].value,_[b][2].unit,null,M.styleAttrs[U.byName.fontSize.qname],null,T.pxLength.h),Z.b_radius===null)return null;_[b][3]===null?Z.color=M.styleAttrs[U.byName.color.qname]:Z.color=_[b][3],A.push(Z)}return A}),new y(x.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(T){return T},null),new y(x.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(T){return T},null),new y(x.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(T){return T},null),new y(x.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(T){return T},null),new y(x.ns_tts,"zIndex","auto",["region"],!1,!0,function(T){var F;return T==="auto"?F=T:(F=parseInt(T),isNaN(F)&&(F=null)),F},null),new y(x.ns_ebutts,"linePadding","0c",["p"],!0,!1,E.parseLength,function(T,F,M,_,A){return E.toComputedLength(_.value,_.unit,null,null,T.cellLength.w,null)}),new y(x.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(T){return T},null),new y(x.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(T){return T},null),new y(x.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(T){return T==="true"},null),new y(x.ns_itts,"fillLineGap","false",["p"],!0,!0,function(T){return T==="true"},null)],U.byQName={},U.all)U.byQName[U.all[P].qname]=U.all[P];for(var g in U.byName={},U.all)U.byName[U.all[g].name]=U.all[g]})(p,typeof imscNames>"u"?w(210):imscNames,typeof imscUtils>"u"?w(5926):imscUtils)},5926:function(N,p){(function(w){var U=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,x=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,E=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,y={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};w.parseColor=function(g){var T,F=null,M=y[g.toLowerCase()];return M!==void 0?F=M:(T=U.exec(g))!==null?F=[parseInt(T[1],16),parseInt(T[2],16),parseInt(T[3],16),T[4]!==void 0?parseInt(T[4],16):255]:(T=x.exec(g))!==null?F=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),255]:(T=E.exec(g))!==null&&(F=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),parseInt(T[4])]),F};var P=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;w.parseLength=function(g){var T,F=null;return(T=P.exec(g))!==null&&(F={value:parseFloat(T[1]),unit:T[2]}),F},w.parseTextShadow=function(g){for(var T=g.match(/([^\(,\)]|\([^\)]+\))+/g),F=[],M=0;M<T.length;M++){var _=T[M].split(" ");if(_.length===1&&_[0]==="none")return"none";if(_.length>1&&_.length<5){var A=[null,null,null,null],b=w.parseLength(_.shift());if(b===null||(A[0]=b,(b=w.parseLength(_.shift()))===null))return null;if(A[1]=b,_.length===0){F.push(A);continue}if((b=w.parseLength(_[0]))!==null&&(A[2]=b,_.shift()),_.length===0){F.push(A);continue}var Z=w.parseColor(_[0]);if(Z===null)return null;A[3]=Z,F.push(A)}}return F},w.parsePosition=function(g){var T=g.split(" "),F=function($){return $==="center"||$==="left"||$==="top"||$==="bottom"||$==="right"};if(T.length>4)return null;for(var M=0;M<T.length;M++)if(!F(T[M])){var _=w.parseLength(T[M]);if(_===null)return null;T[M]=_}for(var A={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},b=0;b<T.length;){var Z=T[b++];if(F(Z)){var Y={value:0,unit:"%"};T.length!==2&&b<T.length&&!F(T[b])&&(Y=T[b++]),Z==="right"?(A.h.edge=Z,A.h.offset=Y):Z==="bottom"?(A.v.edge=Z,A.v.offset=Y):Z==="left"?A.h.offset=Y:Z==="top"&&(A.v.offset=Y)}else{if(T.length!==1&&T.length!==2)return null;b===1?A.h.offset=Z:A.v.offset=Z}}return A},w.ComputedLength=function(g,T){this.rw=g,this.rh=T},w.ComputedLength.prototype.toUsedLength=function(g,T){return g*this.rw+T*this.rh},w.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},w.toComputedLength=function(g,T,F,M,_,A){return T==="%"&&M?new w.ComputedLength(M.rw*g/100,M.rh*g/100):T==="em"&&F?new w.ComputedLength(F.rw*g,F.rh*g):T==="c"&&_?new w.ComputedLength(g*_.rw,g*_.rh):T==="px"&&A?new w.ComputedLength(g*A.rw,g*A.rh):T==="rh"?new w.ComputedLength(0,g/100):T==="rw"?new w.ComputedLength(g/100,0):null}})(p)},3516:function(N){N.exports=function(p){var w=typeof p=="string"?p.charCodeAt(0):p;return w>=97&&w<=122||w>=65&&w<=90}},2219:function(N,p,w){var U=w(3516),x=w(395);N.exports=function(E){return U(E)||x(E)}},395:function(N){N.exports=function(p){var w=typeof p=="string"?p.charCodeAt(0):p;return w>=48&&w<=57}},3875:function(N){function p(x){if(typeof x!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(x))}function w(x,E){for(var y,P="",g=0,T=-1,F=0,M=0;M<=x.length;++M){if(M<x.length)y=x.charCodeAt(M);else{if(y===47)break;y=47}if(y===47){if(!(T===M-1||F===1))if(T!==M-1&&F===2){if(P.length<2||g!==2||P.charCodeAt(P.length-1)!==46||P.charCodeAt(P.length-2)!==46){if(P.length>2){var _=P.lastIndexOf("/");if(_!==P.length-1){_===-1?(P="",g=0):g=(P=P.slice(0,_)).length-1-P.lastIndexOf("/"),T=M,F=0;continue}}else if(P.length===2||P.length===1){P="",g=0,T=M,F=0;continue}}E&&(P.length>0?P+="/..":P="..",g=2)}else P.length>0?P+="/"+x.slice(T+1,M):P=x.slice(T+1,M),g=M-T-1;T=M,F=0}else y===46&&F!==-1?++F:F=-1}return P}var U={resolve:function(){for(var x,E="",y=!1,P=arguments.length-1;P>=-1&&!y;P--){var g;P>=0?g=arguments[P]:(x===void 0&&(x=process.cwd()),g=x),p(g),g.length!==0&&(E=g+"/"+E,y=g.charCodeAt(0)===47)}return E=w(E,!y),y?E.length>0?"/"+E:"/":E.length>0?E:"."},normalize:function(x){if(p(x),x.length===0)return".";var E=x.charCodeAt(0)===47,y=x.charCodeAt(x.length-1)===47;return(x=w(x,!E)).length!==0||E||(x="."),x.length>0&&y&&(x+="/"),E?"/"+x:x},isAbsolute:function(x){return p(x),x.length>0&&x.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var x,E=0;E<arguments.length;++E){var y=arguments[E];p(y),y.length>0&&(x===void 0?x=y:x+="/"+y)}return x===void 0?".":U.normalize(x)},relative:function(x,E){if(p(x),p(E),x===E||(x=U.resolve(x))===(E=U.resolve(E)))return"";for(var y=1;y<x.length&&x.charCodeAt(y)===47;++y);for(var P=x.length,g=P-y,T=1;T<E.length&&E.charCodeAt(T)===47;++T);for(var F=E.length-T,M=g<F?g:F,_=-1,A=0;A<=M;++A){if(A===M){if(F>M){if(E.charCodeAt(T+A)===47)return E.slice(T+A+1);if(A===0)return E.slice(T+A)}else g>M&&(x.charCodeAt(y+A)===47?_=A:A===0&&(_=0));break}var b=x.charCodeAt(y+A);if(b!==E.charCodeAt(T+A))break;b===47&&(_=A)}var Z="";for(A=y+_+1;A<=P;++A)A!==P&&x.charCodeAt(A)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+E.slice(T+_):(T+=_,E.charCodeAt(T)===47&&++T,E.slice(T))},_makeLong:function(x){return x},dirname:function(x){if(p(x),x.length===0)return".";for(var E=x.charCodeAt(0),y=E===47,P=-1,g=!0,T=x.length-1;T>=1;--T)if((E=x.charCodeAt(T))===47){if(!g){P=T;break}}else g=!1;return P===-1?y?"/":".":y&&P===1?"//":x.slice(0,P)},basename:function(x,E){if(E!==void 0&&typeof E!="string")throw new TypeError('"ext" argument must be a string');p(x);var y,P=0,g=-1,T=!0;if(E!==void 0&&E.length>0&&E.length<=x.length){if(E.length===x.length&&E===x)return"";var F=E.length-1,M=-1;for(y=x.length-1;y>=0;--y){var _=x.charCodeAt(y);if(_===47){if(!T){P=y+1;break}}else M===-1&&(T=!1,M=y+1),F>=0&&(_===E.charCodeAt(F)?--F==-1&&(g=y):(F=-1,g=M))}return P===g?g=M:g===-1&&(g=x.length),x.slice(P,g)}for(y=x.length-1;y>=0;--y)if(x.charCodeAt(y)===47){if(!T){P=y+1;break}}else g===-1&&(T=!1,g=y+1);return g===-1?"":x.slice(P,g)},extname:function(x){p(x);for(var E=-1,y=0,P=-1,g=!0,T=0,F=x.length-1;F>=0;--F){var M=x.charCodeAt(F);if(M!==47)P===-1&&(g=!1,P=F+1),M===46?E===-1?E=F:T!==1&&(T=1):E!==-1&&(T=-1);else if(!g){y=F+1;break}}return E===-1||P===-1||T===0||T===1&&E===P-1&&E===y+1?"":x.slice(E,P)},format:function(x){if(x===null||typeof x!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof x);return function(E,y){var P=y.dir||y.root,g=y.base||(y.name||"")+(y.ext||"");return P?P===y.root?P+g:P+"/"+g:g}(0,x)},parse:function(x){p(x);var E={root:"",dir:"",base:"",ext:"",name:""};if(x.length===0)return E;var y,P=x.charCodeAt(0),g=P===47;g?(E.root="/",y=1):y=0;for(var T=-1,F=0,M=-1,_=!0,A=x.length-1,b=0;A>=y;--A)if((P=x.charCodeAt(A))!==47)M===-1&&(_=!1,M=A+1),P===46?T===-1?T=A:b!==1&&(b=1):T!==-1&&(b=-1);else if(!_){F=A+1;break}return T===-1||M===-1||b===0||b===1&&T===M-1&&T===F+1?M!==-1&&(E.base=E.name=F===0&&g?x.slice(1,M):x.slice(F,M)):(F===0&&g?(E.name=x.slice(1,T),E.base=x.slice(1,M)):(E.name=x.slice(F,T),E.base=x.slice(F,M)),E.ext=x.slice(T,M)),F>0?E.dir=x.slice(0,F-1):g&&(E.dir="/"),E},sep:"/",delimiter:":",win32:null,posix:null};U.posix=U,N.exports=U},8387:function(N,p,w){var U=w(1549),x=U.Buffer;function E(P,g){for(var T in P)g[T]=P[T]}function y(P,g,T){return x(P,g,T)}x.from&&x.alloc&&x.allocUnsafe&&x.allocUnsafeSlow?N.exports=U:(E(U,p),p.Buffer=y),E(x,y),y.from=function(P,g,T){if(typeof P=="number")throw new TypeError("Argument must not be a number");return x(P,g,T)},y.alloc=function(P,g,T){if(typeof P!="number")throw new TypeError("Argument must be a number");var F=x(P);return g!==void 0?typeof T=="string"?F.fill(g,T):F.fill(g):F.fill(0),F},y.allocUnsafe=function(P){if(typeof P!="number")throw new TypeError("Argument must be a number");return x(P)},y.allocUnsafeSlow=function(P){if(typeof P!="number")throw new TypeError("Argument must be a number");return U.SlowBuffer(P)}},5378:function(N,p,w){(function(U){U.parser=function(L,D){return new y(L,D)},U.SAXParser=y,U.SAXStream=g,U.createStream=function(L,D){return new g(L,D)},U.MAX_BUFFER_LENGTH=65536;var x,E=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function y(L,D){if(!(this instanceof y))return new y(L,D);var G=this;(function(K){for(var ge=0,pe=E.length;ge<pe;ge++)K[E[ge]]=""})(G),G.q=G.c="",G.bufferCheckPosition=U.MAX_BUFFER_LENGTH,G.opt=D||{},G.opt.lowercase=G.opt.lowercase||G.opt.lowercasetags,G.looseCase=G.opt.lowercase?"toLowerCase":"toUpperCase",G.tags=[],G.closed=G.closedRoot=G.sawRoot=!1,G.tag=G.error=null,G.strict=!!L,G.noscript=!(!L&&!G.opt.noscript),G.state=we.BEGIN,G.strictEntities=G.opt.strictEntities,G.ENTITIES=G.strictEntities?Object.create(U.XML_ENTITIES):Object.create(U.ENTITIES),G.attribList=[],G.opt.xmlns&&(G.ns=Object.create(Y)),G.trackPosition=G.opt.position!==!1,G.trackPosition&&(G.position=G.line=G.column=0),st(G,"onready")}U.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(L){function D(){}return D.prototype=L,new D}),Object.keys||(Object.keys=function(L){var D=[];for(var G in L)L.hasOwnProperty(G)&&D.push(G);return D}),y.prototype={end:function(){Re(this)},write:function(L){var D=this;if(this.error)throw this.error;if(D.closed)return vt(D,"Cannot write after close. Assign an onready handler.");if(L===null)return Re(D);typeof L=="object"&&(L=L.toString());for(var G=0,K="";K=Be(L,G++),D.c=K,K;)switch(D.trackPosition&&(D.position++,K==="\n"?(D.line++,D.column=0):D.column++),D.state){case we.BEGIN:if(D.state=we.BEGIN_WHITESPACE,K==="\uFEFF")continue;ne(D,K);continue;case we.BEGIN_WHITESPACE:ne(D,K);continue;case we.TEXT:if(D.sawRoot&&!D.closedRoot){for(var ge=G-1;K&&K!=="<"&&K!=="&";)(K=Be(L,G++))&&D.trackPosition&&(D.position++,K==="\n"?(D.line++,D.column=0):D.column++);D.textNode+=L.substring(ge,G-1)}K!=="<"||D.sawRoot&&D.closedRoot&&!D.strict?(!oe(T,K)||D.sawRoot&&!D.closedRoot||Ye(D,"Text data outside of root node."),K==="&"?D.state=we.TEXT_ENTITY:D.textNode+=K):(D.state=we.OPEN_WAKA,D.startTagPosition=D.position);continue;case we.SCRIPT:K==="<"?D.state=we.SCRIPT_ENDING:D.script+=K;continue;case we.SCRIPT_ENDING:K==="/"?D.state=we.CLOSE_TAG:(D.script+="<"+K,D.state=we.SCRIPT);continue;case we.OPEN_WAKA:if(K==="!")D.state=we.SGML_DECL,D.sgmlDecl="";else if(!ce(T,K))if(ce($,K))D.state=we.OPEN_TAG,D.tagName=K;else if(K==="/")D.state=we.CLOSE_TAG,D.tagName="";else if(K==="?")D.state=we.PROC_INST,D.procInstName=D.procInstBody="";else{if(Ye(D,"Unencoded <"),D.startTagPosition+1<D.position){var pe=D.position-D.startTagPosition;K=new Array(pe).join(" ")+K}D.textNode+="<"+K,D.state=we.TEXT}continue;case we.SGML_DECL:(D.sgmlDecl+K).toUpperCase()==="[CDATA["?(ft(D,"onopencdata"),D.state=we.CDATA,D.sgmlDecl="",D.cdata=""):D.sgmlDecl+K==="--"?(D.state=we.COMMENT,D.comment="",D.sgmlDecl=""):(D.sgmlDecl+K).toUpperCase()==="DOCTYPE"?(D.state=we.DOCTYPE,(D.doctype||D.sawRoot)&&Ye(D,"Inappropriately located doctype declaration"),D.doctype="",D.sgmlDecl=""):K===">"?(ft(D,"onsgmldeclaration",D.sgmlDecl),D.sgmlDecl="",D.state=we.TEXT):(ce(_,K)&&(D.state=we.SGML_DECL_QUOTED),D.sgmlDecl+=K);continue;case we.SGML_DECL_QUOTED:K===D.q&&(D.state=we.SGML_DECL,D.q=""),D.sgmlDecl+=K;continue;case we.DOCTYPE:K===">"?(D.state=we.TEXT,ft(D,"ondoctype",D.doctype),D.doctype=!0):(D.doctype+=K,K==="["?D.state=we.DOCTYPE_DTD:ce(_,K)&&(D.state=we.DOCTYPE_QUOTED,D.q=K));continue;case we.DOCTYPE_QUOTED:D.doctype+=K,K===D.q&&(D.q="",D.state=we.DOCTYPE);continue;case we.DOCTYPE_DTD:D.doctype+=K,K==="]"?D.state=we.DOCTYPE:ce(_,K)&&(D.state=we.DOCTYPE_DTD_QUOTED,D.q=K);continue;case we.DOCTYPE_DTD_QUOTED:D.doctype+=K,K===D.q&&(D.state=we.DOCTYPE_DTD,D.q="");continue;case we.COMMENT:K==="-"?D.state=we.COMMENT_ENDING:D.comment+=K;continue;case we.COMMENT_ENDING:K==="-"?(D.state=we.COMMENT_ENDED,D.comment=He(D.opt,D.comment),D.comment&&ft(D,"oncomment",D.comment),D.comment=""):(D.comment+="-"+K,D.state=we.COMMENT);continue;case we.COMMENT_ENDED:K!==">"?(Ye(D,"Malformed comment"),D.comment+="--"+K,D.state=we.COMMENT):D.state=we.TEXT;continue;case we.CDATA:K==="]"?D.state=we.CDATA_ENDING:D.cdata+=K;continue;case we.CDATA_ENDING:K==="]"?D.state=we.CDATA_ENDING_2:(D.cdata+="]"+K,D.state=we.CDATA);continue;case we.CDATA_ENDING_2:K===">"?(D.cdata&&ft(D,"oncdata",D.cdata),ft(D,"onclosecdata"),D.cdata="",D.state=we.TEXT):K==="]"?D.cdata+="]":(D.cdata+="]]"+K,D.state=we.CDATA);continue;case we.PROC_INST:K==="?"?D.state=we.PROC_INST_ENDING:ce(T,K)?D.state=we.PROC_INST_BODY:D.procInstName+=K;continue;case we.PROC_INST_BODY:if(!D.procInstBody&&ce(T,K))continue;K==="?"?D.state=we.PROC_INST_ENDING:D.procInstBody+=K;continue;case we.PROC_INST_ENDING:K===">"?(ft(D,"onprocessinginstruction",{name:D.procInstName,body:D.procInstBody}),D.procInstName=D.procInstBody="",D.state=we.TEXT):(D.procInstBody+="?"+K,D.state=we.PROC_INST_BODY);continue;case we.OPEN_TAG:ce(Q,K)?D.tagName+=K:(ot(D),K===">"?Et(D):K==="/"?D.state=we.OPEN_TAG_SLASH:(oe(T,K)&&Ye(D,"Invalid character in tag name"),D.state=we.ATTRIB));continue;case we.OPEN_TAG_SLASH:K===">"?(Et(D,!0),Dt(D)):(Ye(D,"Forward-slash in opening tag not followed by >"),D.state=we.ATTRIB);continue;case we.ATTRIB:if(ce(T,K))continue;K===">"?Et(D):K==="/"?D.state=we.OPEN_TAG_SLASH:ce($,K)?(D.attribName=K,D.attribValue="",D.state=we.ATTRIB_NAME):Ye(D,"Invalid attribute name");continue;case we.ATTRIB_NAME:K==="="?D.state=we.ATTRIB_VALUE:K===">"?(Ye(D,"Attribute without value"),D.attribValue=D.attribName,Bt(D),Et(D)):ce(T,K)?D.state=we.ATTRIB_NAME_SAW_WHITE:ce(Q,K)?D.attribName+=K:Ye(D,"Invalid attribute name");continue;case we.ATTRIB_NAME_SAW_WHITE:if(K==="=")D.state=we.ATTRIB_VALUE;else{if(ce(T,K))continue;Ye(D,"Attribute without value"),D.tag.attributes[D.attribName]="",D.attribValue="",ft(D,"onattribute",{name:D.attribName,value:""}),D.attribName="",K===">"?Et(D):ce($,K)?(D.attribName=K,D.state=we.ATTRIB_NAME):(Ye(D,"Invalid attribute name"),D.state=we.ATTRIB)}continue;case we.ATTRIB_VALUE:if(ce(T,K))continue;ce(_,K)?(D.q=K,D.state=we.ATTRIB_VALUE_QUOTED):(Ye(D,"Unquoted attribute value"),D.state=we.ATTRIB_VALUE_UNQUOTED,D.attribValue=K);continue;case we.ATTRIB_VALUE_QUOTED:if(K!==D.q){K==="&"?D.state=we.ATTRIB_VALUE_ENTITY_Q:D.attribValue+=K;continue}Bt(D),D.q="",D.state=we.ATTRIB_VALUE_CLOSED;continue;case we.ATTRIB_VALUE_CLOSED:ce(T,K)?D.state=we.ATTRIB:K===">"?Et(D):K==="/"?D.state=we.OPEN_TAG_SLASH:ce($,K)?(Ye(D,"No whitespace between attributes"),D.attribName=K,D.attribValue="",D.state=we.ATTRIB_NAME):Ye(D,"Invalid attribute name");continue;case we.ATTRIB_VALUE_UNQUOTED:if(oe(A,K)){K==="&"?D.state=we.ATTRIB_VALUE_ENTITY_U:D.attribValue+=K;continue}Bt(D),K===">"?Et(D):D.state=we.ATTRIB;continue;case we.CLOSE_TAG:if(D.tagName)K===">"?Dt(D):ce(Q,K)?D.tagName+=K:D.script?(D.script+="</"+D.tagName,D.tagName="",D.state=we.SCRIPT):(oe(T,K)&&Ye(D,"Invalid tagname in closing tag"),D.state=we.CLOSE_TAG_SAW_WHITE);else{if(ce(T,K))continue;oe($,K)?D.script?(D.script+="</"+K,D.state=we.SCRIPT):Ye(D,"Invalid tagname in closing tag."):D.tagName=K}continue;case we.CLOSE_TAG_SAW_WHITE:if(ce(T,K))continue;K===">"?Dt(D):Ye(D,"Invalid characters in closing tag");continue;case we.TEXT_ENTITY:case we.ATTRIB_VALUE_ENTITY_Q:case we.ATTRIB_VALUE_ENTITY_U:var Ke,wt;switch(D.state){case we.TEXT_ENTITY:Ke=we.TEXT,wt="textNode";break;case we.ATTRIB_VALUE_ENTITY_Q:Ke=we.ATTRIB_VALUE_QUOTED,wt="attribValue";break;case we.ATTRIB_VALUE_ENTITY_U:Ke=we.ATTRIB_VALUE_UNQUOTED,wt="attribValue"}K===";"?(D[wt]+=Ne(D),D.entity="",D.state=Ke):ce(D.entity.length?C:se,K)?D.entity+=K:(Ye(D,"Invalid character in entity name"),D[wt]+="&"+D.entity+K,D.entity="",D.state=Ke);continue;default:throw new Error(D,"Unknown state: "+D.state)}return D.position>=D.bufferCheckPosition&&function(lt){for(var ut=Math.max(U.MAX_BUFFER_LENGTH,10),nt=0,ht=0,_t=E.length;ht<_t;ht++){var Tt=lt[E[ht]].length;if(Tt>ut)switch(E[ht]){case"textNode":Ce(lt);break;case"cdata":ft(lt,"oncdata",lt.cdata),lt.cdata="";break;case"script":ft(lt,"onscript",lt.script),lt.script="";break;default:vt(lt,"Max buffer length exceeded: "+E[ht])}nt=Math.max(nt,Tt)}var Mt=U.MAX_BUFFER_LENGTH-nt;lt.bufferCheckPosition=Mt+lt.position}(D),D},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var L;Ce(L=this),L.cdata!==""&&(ft(L,"oncdata",L.cdata),L.cdata=""),L.script!==""&&(ft(L,"onscript",L.script),L.script="")}};try{x=w(182).Stream}catch(L){x=function(){}}var P=U.EVENTS.filter(function(L){return L!=="error"&&L!=="end"});function g(L,D){if(!(this instanceof g))return new g(L,D);x.apply(this),this._parser=new y(L,D),this.writable=!0,this.readable=!0;var G=this;this._parser.onend=function(){G.emit("end")},this._parser.onerror=function(K){G.emit("error",K),G._parser.error=null},this._decoder=null,P.forEach(function(K){Object.defineProperty(G,"on"+K,{get:function(){return G._parser["on"+K]},set:function(ge){if(!ge)return G.removeAllListeners(K),G._parser["on"+K]=ge,ge;G.on(K,ge)},enumerable:!0,configurable:!1})})}g.prototype=Object.create(x.prototype,{constructor:{value:g}}),g.prototype.write=function(L){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(L)){if(!this._decoder){var D=w(7503).s;this._decoder=new D("utf8")}L=this._decoder.write(L)}return this._parser.write(L.toString()),this.emit("data",L),!0},g.prototype.end=function(L){return L&&L.length&&this.write(L),this._parser.end(),!0},g.prototype.on=function(L,D){var G=this;return G._parser["on"+L]||P.indexOf(L)===-1||(G._parser["on"+L]=function(){var K=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,L),G.emit.apply(G,K)}),x.prototype.on.call(G,L,D)};var T="\r\n	 ",F="0124356789",M="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",_="'\"",A=T+">",b="http://www.w3.org/XML/1998/namespace",Z="http://www.w3.org/2000/xmlns/",Y={xml:b,xmlns:Z};T=X(T),F=X(F),M=X(M);var $=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,se=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function X(L){return L.split("").reduce(function(D,G){return D[G]=!0,D},{})}function ce(L,D){return function(G){return Object.prototype.toString.call(G)==="[object RegExp]"}(L)?!!D.match(L):L[D]}function oe(L,D){return!ce(L,D)}_=X(_),A=X(A);var me,be,Je,we=0;for(var qe in U.STATE={BEGIN:we++,BEGIN_WHITESPACE:we++,TEXT:we++,TEXT_ENTITY:we++,OPEN_WAKA:we++,SGML_DECL:we++,SGML_DECL_QUOTED:we++,DOCTYPE:we++,DOCTYPE_QUOTED:we++,DOCTYPE_DTD:we++,DOCTYPE_DTD_QUOTED:we++,COMMENT_STARTING:we++,COMMENT:we++,COMMENT_ENDING:we++,COMMENT_ENDED:we++,CDATA:we++,CDATA_ENDING:we++,CDATA_ENDING_2:we++,PROC_INST:we++,PROC_INST_BODY:we++,PROC_INST_ENDING:we++,OPEN_TAG:we++,OPEN_TAG_SLASH:we++,ATTRIB:we++,ATTRIB_NAME:we++,ATTRIB_NAME_SAW_WHITE:we++,ATTRIB_VALUE:we++,ATTRIB_VALUE_QUOTED:we++,ATTRIB_VALUE_CLOSED:we++,ATTRIB_VALUE_UNQUOTED:we++,ATTRIB_VALUE_ENTITY_Q:we++,ATTRIB_VALUE_ENTITY_U:we++,CLOSE_TAG:we++,CLOSE_TAG_SAW_WHITE:we++,SCRIPT:we++,SCRIPT_ENDING:we++},U.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},U.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(U.ENTITIES).forEach(function(L){var D=U.ENTITIES[L],G=typeof D=="number"?String.fromCharCode(D):D;U.ENTITIES[L]=G}),U.STATE)U.STATE[U.STATE[qe]]=qe;function st(L,D,G){L[D]&&L[D](G)}function ft(L,D,G){L.textNode&&Ce(L),st(L,D,G)}function Ce(L){L.textNode=He(L.opt,L.textNode),L.textNode&&st(L,"ontext",L.textNode),L.textNode=""}function He(L,D){return L.trim&&(D=D.trim()),L.normalize&&(D=D.replace(/\s+/g," ")),D}function vt(L,D){return Ce(L),L.trackPosition&&(D+="\nLine: "+L.line+"\nColumn: "+L.column+"\nChar: "+L.c),D=new Error(D),L.error=D,st(L,"onerror",D),L}function Re(L){return L.sawRoot&&!L.closedRoot&&Ye(L,"Unclosed root tag"),L.state!==we.BEGIN&&L.state!==we.BEGIN_WHITESPACE&&L.state!==we.TEXT&&vt(L,"Unexpected end"),Ce(L),L.c="",L.closed=!0,st(L,"onend"),y.call(L,L.strict,L.opt),L}function Ye(L,D){if(typeof L!="object"||!(L instanceof y))throw new Error("bad call to strictFail");L.strict&&vt(L,D)}function ot(L){L.strict||(L.tagName=L.tagName[L.looseCase]());var D=L.tags[L.tags.length-1]||L,G=L.tag={name:L.tagName,attributes:{}};L.opt.xmlns&&(G.ns=D.ns),L.attribList.length=0,ft(L,"onopentagstart",G)}function Ht(L,D){var G=L.indexOf(":")<0?["",L]:L.split(":"),K=G[0],ge=G[1];return D&&L==="xmlns"&&(K="xmlns",ge=""),{prefix:K,local:ge}}function Bt(L){if(L.strict||(L.attribName=L.attribName[L.looseCase]()),L.attribList.indexOf(L.attribName)!==-1||L.tag.attributes.hasOwnProperty(L.attribName))L.attribName=L.attribValue="";else{if(L.opt.xmlns){var D=Ht(L.attribName,!0),G=D.prefix,K=D.local;if(G==="xmlns")if(K==="xml"&&L.attribValue!==b)Ye(L,"xml: prefix must be bound to "+b+"\nActual: "+L.attribValue);else if(K==="xmlns"&&L.attribValue!==Z)Ye(L,"xmlns: prefix must be bound to "+Z+"\nActual: "+L.attribValue);else{var ge=L.tag,pe=L.tags[L.tags.length-1]||L;ge.ns===pe.ns&&(ge.ns=Object.create(pe.ns)),ge.ns[K]=L.attribValue}L.attribList.push([L.attribName,L.attribValue])}else L.tag.attributes[L.attribName]=L.attribValue,ft(L,"onattribute",{name:L.attribName,value:L.attribValue});L.attribName=L.attribValue=""}}function Et(L,D){if(L.opt.xmlns){var G=L.tag,K=Ht(L.tagName);G.prefix=K.prefix,G.local=K.local,G.uri=G.ns[K.prefix]||"",G.prefix&&!G.uri&&(Ye(L,"Unbound namespace prefix: "+JSON.stringify(L.tagName)),G.uri=K.prefix);var ge=L.tags[L.tags.length-1]||L;G.ns&&ge.ns!==G.ns&&Object.keys(G.ns).forEach(function(_n){ft(L,"onopennamespace",{prefix:_n,uri:G.ns[_n]})});for(var pe=0,Ke=L.attribList.length;pe<Ke;pe++){var wt=L.attribList[pe],lt=wt[0],ut=wt[1],nt=Ht(lt,!0),ht=nt.prefix,_t=nt.local,Tt=ht===""?"":G.ns[ht]||"",Mt={name:lt,value:ut,prefix:ht,local:_t,uri:Tt};ht&&ht!=="xmlns"&&!Tt&&(Ye(L,"Unbound namespace prefix: "+JSON.stringify(ht)),Mt.uri=ht),L.tag.attributes[lt]=Mt,ft(L,"onattribute",Mt)}L.attribList.length=0}L.tag.isSelfClosing=!!D,L.sawRoot=!0,L.tags.push(L.tag),ft(L,"onopentag",L.tag),D||(L.noscript||L.tagName.toLowerCase()!=="script"?L.state=we.TEXT:L.state=we.SCRIPT,L.tag=null,L.tagName=""),L.attribName=L.attribValue="",L.attribList.length=0}function Dt(L){if(!L.tagName)return Ye(L,"Weird empty close tag."),L.textNode+="</>",void(L.state=we.TEXT);if(L.script){if(L.tagName!=="script")return L.script+="</"+L.tagName+">",L.tagName="",void(L.state=we.SCRIPT);ft(L,"onscript",L.script),L.script=""}var D=L.tags.length,G=L.tagName;L.strict||(G=G[L.looseCase]());for(var K=G;D--&&L.tags[D].name!==K;)Ye(L,"Unexpected close tag");if(D<0)return Ye(L,"Unmatched closing tag: "+L.tagName),L.textNode+="</"+L.tagName+">",void(L.state=we.TEXT);L.tagName=G;for(var ge=L.tags.length;ge-- >D;){var pe=L.tag=L.tags.pop();L.tagName=L.tag.name,ft(L,"onclosetag",L.tagName);var Ke={};for(var wt in pe.ns)Ke[wt]=pe.ns[wt];var lt=L.tags[L.tags.length-1]||L;L.opt.xmlns&&pe.ns!==lt.ns&&Object.keys(pe.ns).forEach(function(ut){var nt=pe.ns[ut];ft(L,"onclosenamespace",{prefix:ut,uri:nt})})}D===0&&(L.closedRoot=!0),L.tagName=L.attribValue=L.attribName="",L.attribList.length=0,L.state=we.TEXT}function Ne(L){var D,G=L.entity,K=G.toLowerCase(),ge="";return L.ENTITIES[G]?L.ENTITIES[G]:L.ENTITIES[K]?L.ENTITIES[K]:((G=K).charAt(0)==="#"&&(G.charAt(1)==="x"?(G=G.slice(2),ge=(D=parseInt(G,16)).toString(16)):(G=G.slice(1),ge=(D=parseInt(G,10)).toString(10))),G=G.replace(/^0+/,""),ge.toLowerCase()!==G?(Ye(L,"Invalid character entity"),"&"+L.entity+";"):String.fromCodePoint(D))}function ne(L,D){D==="<"?(L.state=we.OPEN_WAKA,L.startTagPosition=L.position):oe(T,D)&&(Ye(L,"Non-whitespace before first tag."),L.textNode=D,L.state=we.TEXT)}function Be(L,D){var G="";return D<L.length&&(G=L.charAt(D)),G}we=U.STATE,String.fromCodePoint||(me=String.fromCharCode,be=Math.floor,Je=function(){var L,D,G=16384,K=[],ge=-1,pe=arguments.length;if(!pe)return"";for(var Ke="";++ge<pe;){var wt=Number(arguments[ge]);if(!isFinite(wt)||wt<0||wt>1114111||be(wt)!==wt)throw RangeError("Invalid code point: "+wt);wt<=65535?K.push(wt):(L=55296+((wt-=65536)>>10),D=wt%1024+56320,K.push(L,D)),(ge+1===pe||K.length>G)&&(Ke+=me.apply(null,K),K.length=0)}return Ke},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Je,configurable:!0,writable:!0}):String.fromCodePoint=Je)})(p)},182:function(N,p,w){N.exports=x;var U=w(1159).EventEmitter;function x(){U.call(this)}w(1765)(x,U),x.Readable=w(2846),x.Writable=w(8318),x.Duplex=w(6138),x.Transform=w(9798),x.PassThrough=w(5472),x.finished=w(8800),x.pipeline=w(7295),x.Stream=x,x.prototype.pipe=function(E,y){var P=this;function g(Z){E.writable&&E.write(Z)===!1&&P.pause&&P.pause()}function T(){P.readable&&P.resume&&P.resume()}P.on("data",g),E.on("drain",T),E._isStdio||y&&y.end===!1||(P.on("end",M),P.on("close",_));var F=!1;function M(){F||(F=!0,E.end())}function _(){F||(F=!0,typeof E.destroy=="function"&&E.destroy())}function A(Z){if(b(),U.listenerCount(this,"error")===0)throw Z}function b(){P.removeListener("data",g),E.removeListener("drain",T),P.removeListener("end",M),P.removeListener("close",_),P.removeListener("error",A),E.removeListener("error",A),P.removeListener("end",b),P.removeListener("close",b),E.removeListener("close",b)}return P.on("error",A),E.on("error",A),P.on("end",b),P.on("close",b),E.on("close",b),E.emit("pipe",P),E}},1765:function(N){typeof Object.create=="function"?N.exports=function(p,w){w&&(p.super_=w,p.prototype=Object.create(w.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}))}:N.exports=function(p,w){if(w){p.super_=w;var U=function(){};U.prototype=w.prototype,p.prototype=new U,p.prototype.constructor=p}}},3690:function(N){var p={};function w(x,E,y){y||(y=Error);var P=function(g){var T,F;function M(_,A,b){return g.call(this,function(Z,Y,$){return typeof E=="string"?E:E(Z,Y,$)}(_,A,b))||this}return F=g,(T=M).prototype=Object.create(F.prototype),T.prototype.constructor=T,T.__proto__=F,M}(y);P.prototype.name=y.name,P.prototype.code=x,p[x]=P}function U(x,E){if(Array.isArray(x)){var y=x.length;return x=x.map(function(P){return String(P)}),y>2?"one of ".concat(E," ").concat(x.slice(0,y-1).join(", "),", or ")+x[y-1]:y===2?"one of ".concat(E," ").concat(x[0]," or ").concat(x[1]):"of ".concat(E," ").concat(x[0])}return"of ".concat(E," ").concat(String(x))}w("ERR_INVALID_OPT_VALUE",function(x,E){return'The value "'+E+'" is invalid for option "'+x+'"'},TypeError),w("ERR_INVALID_ARG_TYPE",function(x,E,y){var P,g,T,F,M;if(typeof E=="string"&&(g="not ",E.substr(0,g.length)===g)?(P="must not be",E=E.replace(/^not /,"")):P="must be",function(A,b,Z){return(Z===void 0||Z>A.length)&&(Z=A.length),A.substring(Z-b.length,Z)===b}(x," argument"))T="The ".concat(x," ").concat(P," ").concat(U(E,"type"));else{var _=(typeof M!="number"&&(M=0),M+1>(F=x).length||F.indexOf(".",M)===-1?"argument":"property");T='The "'.concat(x,'" ').concat(_," ").concat(P," ").concat(U(E,"type"))}return T+". Received type ".concat(typeof y)},TypeError),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),w("ERR_METHOD_NOT_IMPLEMENTED",function(x){return"The "+x+" method is not implemented"}),w("ERR_STREAM_PREMATURE_CLOSE","Premature close"),w("ERR_STREAM_DESTROYED",function(x){return"Cannot call "+x+" after a stream was destroyed"}),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),w("ERR_STREAM_WRITE_AFTER_END","write after end"),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_UNKNOWN_ENCODING",function(x){return"Unknown encoding: "+x},TypeError),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),N.exports.q=p},6138:function(N,p,w){var U=Object.keys||function(_){var A=[];for(var b in _)A.push(b);return A};N.exports=T;var x=w(2846),E=w(8318);w(1765)(T,x);for(var y=U(E.prototype),P=0;P<y.length;P++){var g=y[P];T.prototype[g]||(T.prototype[g]=E.prototype[g])}function T(_){if(!(this instanceof T))return new T(_);x.call(this,_),E.call(this,_),this.allowHalfOpen=!0,_&&(_.readable===!1&&(this.readable=!1),_.writable===!1&&(this.writable=!1),_.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",F)))}function F(){this._writableState.ended||process.nextTick(M,this)}function M(_){_.end()}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=_,this._writableState.destroyed=_)}})},5472:function(N,p,w){N.exports=x;var U=w(9798);function x(E){if(!(this instanceof x))return new x(E);U.call(this,E)}w(1765)(x,U),x.prototype._transform=function(E,y,P){P(null,E)}},2846:function(N,p,w){var U;N.exports=me,me.ReadableState=oe,w(1159).EventEmitter;var x,E=function(Ne,ne){return Ne.listeners(ne).length},y=w(9299),P=w(1549).Buffer,g=w.g.Uint8Array||function(){},T=w(964);x=T&&T.debuglog?T.debuglog("stream"):function(){};var F,M,_,A=w(8393),b=w(6163),Z=w(7269).getHighWaterMark,Y=w(3690).q,$=Y.ERR_INVALID_ARG_TYPE,Q=Y.ERR_STREAM_PUSH_AFTER_EOF,se=Y.ERR_METHOD_NOT_IMPLEMENTED,C=Y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;w(1765)(me,y);var X=b.errorOrDestroy,ce=["error","close","destroy","pause","resume"];function oe(Ne,ne,Be){U=U||w(6138),Ne=Ne||{},typeof Be!="boolean"&&(Be=ne instanceof U),this.objectMode=!!Ne.objectMode,Be&&(this.objectMode=this.objectMode||!!Ne.readableObjectMode),this.highWaterMark=Z(this,Ne,"readableHighWaterMark",Be),this.buffer=new A,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ne.emitClose!==!1,this.autoDestroy=!!Ne.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ne.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ne.encoding&&(F||(F=w(7503).s),this.decoder=new F(Ne.encoding),this.encoding=Ne.encoding)}function me(Ne){if(U=U||w(6138),!(this instanceof me))return new me(Ne);var ne=this instanceof U;this._readableState=new oe(Ne,this,ne),this.readable=!0,Ne&&(typeof Ne.read=="function"&&(this._read=Ne.read),typeof Ne.destroy=="function"&&(this._destroy=Ne.destroy)),y.call(this)}function be(Ne,ne,Be,L,D){x("readableAddChunk",ne);var G,K=Ne._readableState;if(ne===null)K.reading=!1,function(ge,pe){if(x("onEofChunk"),!pe.ended){if(pe.decoder){var Ke=pe.decoder.end();Ke&&Ke.length&&(pe.buffer.push(Ke),pe.length+=pe.objectMode?1:Ke.length)}pe.ended=!0,pe.sync?st(ge):(pe.needReadable=!1,pe.emittedReadable||(pe.emittedReadable=!0,ft(ge)))}}(Ne,K);else if(D||(G=function(ge,pe){var Ke,wt;return wt=pe,P.isBuffer(wt)||wt instanceof g||typeof pe=="string"||pe===void 0||ge.objectMode||(Ke=new $("chunk",["string","Buffer","Uint8Array"],pe)),Ke}(K,ne)),G)X(Ne,G);else if(K.objectMode||ne&&ne.length>0)if(typeof ne=="string"||K.objectMode||Object.getPrototypeOf(ne)===P.prototype||(ne=function(ge){return P.from(ge)}(ne)),L)K.endEmitted?X(Ne,new C):Je(Ne,K,ne,!0);else if(K.ended)X(Ne,new Q);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!Be?(ne=K.decoder.write(ne),K.objectMode||ne.length!==0?Je(Ne,K,ne,!1):Ce(Ne,K)):Je(Ne,K,ne,!1)}else L||(K.reading=!1,Ce(Ne,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function Je(Ne,ne,Be,L){ne.flowing&&ne.length===0&&!ne.sync?(ne.awaitDrain=0,Ne.emit("data",Be)):(ne.length+=ne.objectMode?1:Be.length,L?ne.buffer.unshift(Be):ne.buffer.push(Be),ne.needReadable&&st(Ne)),Ce(Ne,ne)}Object.defineProperty(me.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Ne){this._readableState&&(this._readableState.destroyed=Ne)}}),me.prototype.destroy=b.destroy,me.prototype._undestroy=b.undestroy,me.prototype._destroy=function(Ne,ne){ne(Ne)},me.prototype.push=function(Ne,ne){var Be,L=this._readableState;return L.objectMode?Be=!0:typeof Ne=="string"&&((ne=ne||L.defaultEncoding)!==L.encoding&&(Ne=P.from(Ne,ne),ne=""),Be=!0),be(this,Ne,ne,!1,Be)},me.prototype.unshift=function(Ne){return be(this,Ne,null,!0,!1)},me.prototype.isPaused=function(){return this._readableState.flowing===!1},me.prototype.setEncoding=function(Ne){F||(F=w(7503).s);var ne=new F(Ne);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;for(var Be=this._readableState.buffer.head,L="";Be!==null;)L+=ne.write(Be.data),Be=Be.next;return this._readableState.buffer.clear(),L!==""&&this._readableState.buffer.push(L),this._readableState.length=L.length,this};var we=1073741824;function qe(Ne,ne){return Ne<=0||ne.length===0&&ne.ended?0:ne.objectMode?1:Ne!=Ne?ne.flowing&&ne.length?ne.buffer.head.data.length:ne.length:(Ne>ne.highWaterMark&&(ne.highWaterMark=function(Be){return Be>=we?Be=we:(Be--,Be|=Be>>>1,Be|=Be>>>2,Be|=Be>>>4,Be|=Be>>>8,Be|=Be>>>16,Be++),Be}(Ne)),Ne<=ne.length?Ne:ne.ended?ne.length:(ne.needReadable=!0,0))}function st(Ne){var ne=Ne._readableState;x("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(x("emitReadable",ne.flowing),ne.emittedReadable=!0,process.nextTick(ft,Ne))}function ft(Ne){var ne=Ne._readableState;x("emitReadable_",ne.destroyed,ne.length,ne.ended),ne.destroyed||!ne.length&&!ne.ended||(Ne.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,ot(Ne)}function Ce(Ne,ne){ne.readingMore||(ne.readingMore=!0,process.nextTick(He,Ne,ne))}function He(Ne,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&ne.length===0);){var Be=ne.length;if(x("maybeReadMore read 0"),Ne.read(0),Be===ne.length)break}ne.readingMore=!1}function vt(Ne){var ne=Ne._readableState;ne.readableListening=Ne.listenerCount("readable")>0,ne.resumeScheduled&&!ne.paused?ne.flowing=!0:Ne.listenerCount("data")>0&&Ne.resume()}function Re(Ne){x("readable nexttick read 0"),Ne.read(0)}function Ye(Ne,ne){x("resume",ne.reading),ne.reading||Ne.read(0),ne.resumeScheduled=!1,Ne.emit("resume"),ot(Ne),ne.flowing&&!ne.reading&&Ne.read(0)}function ot(Ne){var ne=Ne._readableState;for(x("flow",ne.flowing);ne.flowing&&Ne.read()!==null;);}function Ht(Ne,ne){return ne.length===0?null:(ne.objectMode?Be=ne.buffer.shift():!Ne||Ne>=ne.length?(Be=ne.decoder?ne.buffer.join(""):ne.buffer.length===1?ne.buffer.first():ne.buffer.concat(ne.length),ne.buffer.clear()):Be=ne.buffer.consume(Ne,ne.decoder),Be);var Be}function Bt(Ne){var ne=Ne._readableState;x("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,process.nextTick(Et,ne,Ne))}function Et(Ne,ne){if(x("endReadableNT",Ne.endEmitted,Ne.length),!Ne.endEmitted&&Ne.length===0&&(Ne.endEmitted=!0,ne.readable=!1,ne.emit("end"),Ne.autoDestroy)){var Be=ne._writableState;(!Be||Be.autoDestroy&&Be.finished)&&ne.destroy()}}function Dt(Ne,ne){for(var Be=0,L=Ne.length;Be<L;Be++)if(Ne[Be]===ne)return Be;return-1}me.prototype.read=function(Ne){x("read",Ne),Ne=parseInt(Ne,10);var ne=this._readableState,Be=Ne;if(Ne!==0&&(ne.emittedReadable=!1),Ne===0&&ne.needReadable&&((ne.highWaterMark!==0?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return x("read: emitReadable",ne.length,ne.ended),ne.length===0&&ne.ended?Bt(this):st(this),null;if((Ne=qe(Ne,ne))===0&&ne.ended)return ne.length===0&&Bt(this),null;var L,D=ne.needReadable;return x("need readable",D),(ne.length===0||ne.length-Ne<ne.highWaterMark)&&x("length less than watermark",D=!0),ne.ended||ne.reading?x("reading or ended",D=!1):D&&(x("do read"),ne.reading=!0,ne.sync=!0,ne.length===0&&(ne.needReadable=!0),this._read(ne.highWaterMark),ne.sync=!1,ne.reading||(Ne=qe(Be,ne))),(L=Ne>0?Ht(Ne,ne):null)===null?(ne.needReadable=ne.length<=ne.highWaterMark,Ne=0):(ne.length-=Ne,ne.awaitDrain=0),ne.length===0&&(ne.ended||(ne.needReadable=!0),Be!==Ne&&ne.ended&&Bt(this)),L!==null&&this.emit("data",L),L},me.prototype._read=function(Ne){X(this,new se("_read()"))},me.prototype.pipe=function(Ne,ne){var Be=this,L=this._readableState;switch(L.pipesCount){case 0:L.pipes=Ne;break;case 1:L.pipes=[L.pipes,Ne];break;default:L.pipes.push(Ne)}L.pipesCount+=1,x("pipe count=%d opts=%j",L.pipesCount,ne);var D=ne&&ne.end===!1||Ne===process.stdout||Ne===process.stderr?ut:G;function G(){x("onend"),Ne.end()}L.endEmitted?process.nextTick(D):Be.once("end",D),Ne.on("unpipe",function nt(ht,_t){x("onunpipe"),ht===Be&&_t&&_t.hasUnpiped===!1&&(_t.hasUnpiped=!0,x("cleanup"),Ne.removeListener("close",wt),Ne.removeListener("finish",lt),Ne.removeListener("drain",K),Ne.removeListener("error",Ke),Ne.removeListener("unpipe",nt),Be.removeListener("end",G),Be.removeListener("end",ut),Be.removeListener("data",pe),ge=!0,!L.awaitDrain||Ne._writableState&&!Ne._writableState.needDrain||K())});var K=function(nt){return function(){var ht=nt._readableState;x("pipeOnDrain",ht.awaitDrain),ht.awaitDrain&&ht.awaitDrain--,ht.awaitDrain===0&&E(nt,"data")&&(ht.flowing=!0,ot(nt))}}(Be);Ne.on("drain",K);var ge=!1;function pe(nt){x("ondata");var ht=Ne.write(nt);x("dest.write",ht),ht===!1&&((L.pipesCount===1&&L.pipes===Ne||L.pipesCount>1&&Dt(L.pipes,Ne)!==-1)&&!ge&&(x("false write response, pause",L.awaitDrain),L.awaitDrain++),Be.pause())}function Ke(nt){x("onerror",nt),ut(),Ne.removeListener("error",Ke),E(Ne,"error")===0&&X(Ne,nt)}function wt(){Ne.removeListener("finish",lt),ut()}function lt(){x("onfinish"),Ne.removeListener("close",wt),ut()}function ut(){x("unpipe"),Be.unpipe(Ne)}return Be.on("data",pe),function(nt,ht,_t){if(typeof nt.prependListener=="function")return nt.prependListener(ht,_t);nt._events&&nt._events[ht]?Array.isArray(nt._events[ht])?nt._events[ht].unshift(_t):nt._events[ht]=[_t,nt._events[ht]]:nt.on(ht,_t)}(Ne,"error",Ke),Ne.once("close",wt),Ne.once("finish",lt),Ne.emit("pipe",Be),L.flowing||(x("pipe resume"),Be.resume()),Ne},me.prototype.unpipe=function(Ne){var ne=this._readableState,Be={hasUnpiped:!1};if(ne.pipesCount===0)return this;if(ne.pipesCount===1)return Ne&&Ne!==ne.pipes||(Ne||(Ne=ne.pipes),ne.pipes=null,ne.pipesCount=0,ne.flowing=!1,Ne&&Ne.emit("unpipe",this,Be)),this;if(!Ne){var L=ne.pipes,D=ne.pipesCount;ne.pipes=null,ne.pipesCount=0,ne.flowing=!1;for(var G=0;G<D;G++)L[G].emit("unpipe",this,{hasUnpiped:!1});return this}var K=Dt(ne.pipes,Ne);return K===-1||(ne.pipes.splice(K,1),ne.pipesCount-=1,ne.pipesCount===1&&(ne.pipes=ne.pipes[0]),Ne.emit("unpipe",this,Be)),this},me.prototype.on=function(Ne,ne){var Be=y.prototype.on.call(this,Ne,ne),L=this._readableState;return Ne==="data"?(L.readableListening=this.listenerCount("readable")>0,L.flowing!==!1&&this.resume()):Ne==="readable"&&(L.endEmitted||L.readableListening||(L.readableListening=L.needReadable=!0,L.flowing=!1,L.emittedReadable=!1,x("on readable",L.length,L.reading),L.length?st(this):L.reading||process.nextTick(Re,this))),Be},me.prototype.addListener=me.prototype.on,me.prototype.removeListener=function(Ne,ne){var Be=y.prototype.removeListener.call(this,Ne,ne);return Ne==="readable"&&process.nextTick(vt,this),Be},me.prototype.removeAllListeners=function(Ne){var ne=y.prototype.removeAllListeners.apply(this,arguments);return Ne!=="readable"&&Ne!==void 0||process.nextTick(vt,this),ne},me.prototype.resume=function(){var Ne=this._readableState;return Ne.flowing||(x("resume"),Ne.flowing=!Ne.readableListening,function(ne,Be){Be.resumeScheduled||(Be.resumeScheduled=!0,process.nextTick(Ye,ne,Be))}(this,Ne)),Ne.paused=!1,this},me.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},me.prototype.wrap=function(Ne){var ne=this,Be=this._readableState,L=!1;for(var D in Ne.on("end",function(){if(x("wrapped end"),Be.decoder&&!Be.ended){var K=Be.decoder.end();K&&K.length&&ne.push(K)}ne.push(null)}),Ne.on("data",function(K){x("wrapped data"),Be.decoder&&(K=Be.decoder.write(K)),Be.objectMode&&K==null||(Be.objectMode||K&&K.length)&&(ne.push(K)||(L=!0,Ne.pause()))}),Ne)this[D]===void 0&&typeof Ne[D]=="function"&&(this[D]=function(K){return function(){return Ne[K].apply(Ne,arguments)}}(D));for(var G=0;G<ce.length;G++)Ne.on(ce[G],this.emit.bind(this,ce[G]));return this._read=function(K){x("wrapped _read",K),L&&(L=!1,Ne.resume())},this},typeof Symbol=="function"&&(me.prototype[Symbol.asyncIterator]=function(){return M===void 0&&(M=w(7299)),M(this)}),Object.defineProperty(me.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(me.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(me.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ne){this._readableState&&(this._readableState.flowing=Ne)}}),me._fromList=Ht,Object.defineProperty(me.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(me.from=function(Ne,ne){return _===void 0&&(_=w(6233)),_(me,Ne,ne)})},9798:function(N,p,w){N.exports=F;var U=w(3690).q,x=U.ERR_METHOD_NOT_IMPLEMENTED,E=U.ERR_MULTIPLE_CALLBACK,y=U.ERR_TRANSFORM_ALREADY_TRANSFORMING,P=U.ERR_TRANSFORM_WITH_LENGTH_0,g=w(6138);function T(A,b){var Z=this._transformState;Z.transforming=!1;var Y=Z.writecb;if(Y===null)return this.emit("error",new E);Z.writechunk=null,Z.writecb=null,b!=null&&this.push(b),Y(A);var $=this._readableState;$.reading=!1,($.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}function F(A){if(!(this instanceof F))return new F(A);g.call(this,A),this._transformState={afterTransform:T.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,A&&(typeof A.transform=="function"&&(this._transform=A.transform),typeof A.flush=="function"&&(this._flush=A.flush)),this.on("prefinish",M)}function M(){var A=this;typeof this._flush!="function"||this._readableState.destroyed?_(this,null,null):this._flush(function(b,Z){_(A,b,Z)})}function _(A,b,Z){if(b)return A.emit("error",b);if(Z!=null&&A.push(Z),A._writableState.length)throw new P;if(A._transformState.transforming)throw new y;return A.push(null)}w(1765)(F,g),F.prototype.push=function(A,b){return this._transformState.needTransform=!1,g.prototype.push.call(this,A,b)},F.prototype._transform=function(A,b,Z){Z(new x("_transform()"))},F.prototype._write=function(A,b,Z){var Y=this._transformState;if(Y.writecb=Z,Y.writechunk=A,Y.writeencoding=b,!Y.transforming){var $=this._readableState;(Y.needTransform||$.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}},F.prototype._read=function(A){var b=this._transformState;b.writechunk===null||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))},F.prototype._destroy=function(A,b){g.prototype._destroy.call(this,A,function(Z){b(Z)})}},8318:function(N,p,w){function U(Ce){var He=this;this.next=null,this.entry=null,this.finish=function(){(function(vt,Re,Ye){var ot=vt.entry;for(vt.entry=null;ot;){var Ht=ot.callback;Re.pendingcb--,Ht(void 0),ot=ot.next}Re.corkedRequestsFree.next=vt})(He,Ce)}}var x;N.exports=me,me.WritableState=oe;var E,y={deprecate:w(7839)},P=w(9299),g=w(1549).Buffer,T=w.g.Uint8Array||function(){},F=w(6163),M=w(7269).getHighWaterMark,_=w(3690).q,A=_.ERR_INVALID_ARG_TYPE,b=_.ERR_METHOD_NOT_IMPLEMENTED,Z=_.ERR_MULTIPLE_CALLBACK,Y=_.ERR_STREAM_CANNOT_PIPE,$=_.ERR_STREAM_DESTROYED,Q=_.ERR_STREAM_NULL_VALUES,se=_.ERR_STREAM_WRITE_AFTER_END,C=_.ERR_UNKNOWN_ENCODING,X=F.errorOrDestroy;function ce(){}function oe(Ce,He,vt){x=x||w(6138),Ce=Ce||{},typeof vt!="boolean"&&(vt=He instanceof x),this.objectMode=!!Ce.objectMode,vt&&(this.objectMode=this.objectMode||!!Ce.writableObjectMode),this.highWaterMark=M(this,Ce,"writableHighWaterMark",vt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Re=Ce.decodeStrings===!1;this.decodeStrings=!Re,this.defaultEncoding=Ce.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ye){(function(ot,Ht){var Bt=ot._writableState,Et=Bt.sync,Dt=Bt.writecb;if(typeof Dt!="function")throw new Z;if(function(ne){ne.writing=!1,ne.writecb=null,ne.length-=ne.writelen,ne.writelen=0}(Bt),Ht)(function(ne,Be,L,D,G){--Be.pendingcb,L?(process.nextTick(G,D),process.nextTick(ft,ne,Be),ne._writableState.errorEmitted=!0,X(ne,D)):(G(D),ne._writableState.errorEmitted=!0,X(ne,D),ft(ne,Be))})(ot,Bt,Et,Ht,Dt);else{var Ne=qe(Bt)||ot.destroyed;Ne||Bt.corked||Bt.bufferProcessing||!Bt.bufferedRequest||we(ot,Bt),Et?process.nextTick(Je,ot,Bt,Ne,Dt):Je(ot,Bt,Ne,Dt)}})(He,Ye)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ce.emitClose!==!1,this.autoDestroy=!!Ce.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new U(this)}function me(Ce){var He=this instanceof(x=x||w(6138));if(!He&&!E.call(me,this))return new me(Ce);this._writableState=new oe(Ce,this,He),this.writable=!0,Ce&&(typeof Ce.write=="function"&&(this._write=Ce.write),typeof Ce.writev=="function"&&(this._writev=Ce.writev),typeof Ce.destroy=="function"&&(this._destroy=Ce.destroy),typeof Ce.final=="function"&&(this._final=Ce.final)),P.call(this)}function be(Ce,He,vt,Re,Ye,ot,Ht){He.writelen=Re,He.writecb=Ht,He.writing=!0,He.sync=!0,He.destroyed?He.onwrite(new $("write")):vt?Ce._writev(Ye,He.onwrite):Ce._write(Ye,ot,He.onwrite),He.sync=!1}function Je(Ce,He,vt,Re){vt||function(Ye,ot){ot.length===0&&ot.needDrain&&(ot.needDrain=!1,Ye.emit("drain"))}(Ce,He),He.pendingcb--,Re(),ft(Ce,He)}function we(Ce,He){He.bufferProcessing=!0;var vt=He.bufferedRequest;if(Ce._writev&&vt&&vt.next){var Re=He.bufferedRequestCount,Ye=new Array(Re),ot=He.corkedRequestsFree;ot.entry=vt;for(var Ht=0,Bt=!0;vt;)Ye[Ht]=vt,vt.isBuf||(Bt=!1),vt=vt.next,Ht+=1;Ye.allBuffers=Bt,be(Ce,He,!0,He.length,Ye,"",ot.finish),He.pendingcb++,He.lastBufferedRequest=null,ot.next?(He.corkedRequestsFree=ot.next,ot.next=null):He.corkedRequestsFree=new U(He),He.bufferedRequestCount=0}else{for(;vt;){var Et=vt.chunk,Dt=vt.encoding,Ne=vt.callback;if(be(Ce,He,!1,He.objectMode?1:Et.length,Et,Dt,Ne),vt=vt.next,He.bufferedRequestCount--,He.writing)break}vt===null&&(He.lastBufferedRequest=null)}He.bufferedRequest=vt,He.bufferProcessing=!1}function qe(Ce){return Ce.ending&&Ce.length===0&&Ce.bufferedRequest===null&&!Ce.finished&&!Ce.writing}function st(Ce,He){Ce._final(function(vt){He.pendingcb--,vt&&X(Ce,vt),He.prefinished=!0,Ce.emit("prefinish"),ft(Ce,He)})}function ft(Ce,He){var vt=qe(He);if(vt&&(function(Ye,ot){ot.prefinished||ot.finalCalled||(typeof Ye._final!="function"||ot.destroyed?(ot.prefinished=!0,Ye.emit("prefinish")):(ot.pendingcb++,ot.finalCalled=!0,process.nextTick(st,Ye,ot)))}(Ce,He),He.pendingcb===0&&(He.finished=!0,Ce.emit("finish"),He.autoDestroy))){var Re=Ce._readableState;(!Re||Re.autoDestroy&&Re.endEmitted)&&Ce.destroy()}return vt}w(1765)(me,P),oe.prototype.getBuffer=function(){for(var Ce=this.bufferedRequest,He=[];Ce;)He.push(Ce),Ce=Ce.next;return He},function(){try{Object.defineProperty(oe.prototype,"buffer",{get:y.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Ce){}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(me,Symbol.hasInstance,{value:function(Ce){return!!E.call(this,Ce)||this===me&&Ce&&Ce._writableState instanceof oe}})):E=function(Ce){return Ce instanceof this},me.prototype.pipe=function(){X(this,new Y)},me.prototype.write=function(Ce,He,vt){var Re,Ye=this._writableState,ot=!1,Ht=!Ye.objectMode&&(Re=Ce,g.isBuffer(Re)||Re instanceof T);return Ht&&!g.isBuffer(Ce)&&(Ce=function(Bt){return g.from(Bt)}(Ce)),typeof He=="function"&&(vt=He,He=null),Ht?He="buffer":He||(He=Ye.defaultEncoding),typeof vt!="function"&&(vt=ce),Ye.ending?function(Bt,Et){var Dt=new se;X(Bt,Dt),process.nextTick(Et,Dt)}(this,vt):(Ht||function(Bt,Et,Dt,Ne){var ne;return Dt===null?ne=new Q:typeof Dt=="string"||Et.objectMode||(ne=new A("chunk",["string","Buffer"],Dt)),!ne||(X(Bt,ne),process.nextTick(Ne,ne),!1)}(this,Ye,Ce,vt))&&(Ye.pendingcb++,ot=function(Bt,Et,Dt,Ne,ne,Be){if(!Dt){var L=function(ge,pe,Ke){return ge.objectMode||ge.decodeStrings===!1||typeof pe!="string"||(pe=g.from(pe,Ke)),pe}(Et,Ne,ne);Ne!==L&&(Dt=!0,ne="buffer",Ne=L)}var D=Et.objectMode?1:Ne.length;Et.length+=D;var G=Et.length<Et.highWaterMark;if(G||(Et.needDrain=!0),Et.writing||Et.corked){var K=Et.lastBufferedRequest;Et.lastBufferedRequest={chunk:Ne,encoding:ne,isBuf:Dt,callback:Be,next:null},K?K.next=Et.lastBufferedRequest:Et.bufferedRequest=Et.lastBufferedRequest,Et.bufferedRequestCount+=1}else be(Bt,Et,!1,D,Ne,ne,Be);return G}(this,Ye,Ht,Ce,He,vt)),ot},me.prototype.cork=function(){this._writableState.corked++},me.prototype.uncork=function(){var Ce=this._writableState;Ce.corked&&(Ce.corked--,Ce.writing||Ce.corked||Ce.bufferProcessing||!Ce.bufferedRequest||we(this,Ce))},me.prototype.setDefaultEncoding=function(Ce){if(typeof Ce=="string"&&(Ce=Ce.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ce+"").toLowerCase())>-1))throw new C(Ce);return this._writableState.defaultEncoding=Ce,this},Object.defineProperty(me.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(me.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),me.prototype._write=function(Ce,He,vt){vt(new b("_write()"))},me.prototype._writev=null,me.prototype.end=function(Ce,He,vt){var Re=this._writableState;return typeof Ce=="function"?(vt=Ce,Ce=null,He=null):typeof He=="function"&&(vt=He,He=null),Ce!=null&&this.write(Ce,He),Re.corked&&(Re.corked=1,this.uncork()),Re.ending||function(Ye,ot,Ht){ot.ending=!0,ft(Ye,ot),Ht&&(ot.finished?process.nextTick(Ht):Ye.once("finish",Ht)),ot.ended=!0,Ye.writable=!1}(this,Re,vt),this},Object.defineProperty(me.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(me.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ce){this._writableState&&(this._writableState.destroyed=Ce)}}),me.prototype.destroy=F.destroy,me.prototype._undestroy=F.undestroy,me.prototype._destroy=function(Ce,He){He(Ce)}},7299:function(N,p,w){var U;function x(Q,se,C){return se in Q?Object.defineProperty(Q,se,{value:C,enumerable:!0,configurable:!0,writable:!0}):Q[se]=C,Q}var E=w(8800),y=Symbol("lastResolve"),P=Symbol("lastReject"),g=Symbol("error"),T=Symbol("ended"),F=Symbol("lastPromise"),M=Symbol("handlePromise"),_=Symbol("stream");function A(Q,se){return{value:Q,done:se}}function b(Q){var se=Q[y];if(se!==null){var C=Q[_].read();C!==null&&(Q[F]=null,Q[y]=null,Q[P]=null,se(A(C,!1)))}}function Z(Q){process.nextTick(b,Q)}var Y=Object.getPrototypeOf(function(){}),$=Object.setPrototypeOf((x(U={get stream(){return this[_]},next:function(){var Q=this,se=this[g];if(se!==null)return Promise.reject(se);if(this[T])return Promise.resolve(A(void 0,!0));if(this[_].destroyed)return new Promise(function(oe,me){process.nextTick(function(){Q[g]?me(Q[g]):oe(A(void 0,!0))})});var C,X=this[F];if(X)C=new Promise(function(oe,me){return function(be,Je){oe.then(function(){me[T]?be(A(void 0,!0)):me[M](be,Je)},Je)}}(X,this));else{var ce=this[_].read();if(ce!==null)return Promise.resolve(A(ce,!1));C=new Promise(this[M])}return this[F]=C,C}},Symbol.asyncIterator,function(){return this}),x(U,"return",function(){var Q=this;return new Promise(function(se,C){Q[_].destroy(null,function(X){X?C(X):se(A(void 0,!0))})})}),U),Y);N.exports=function(Q){var se,C=Object.create($,(x(se={},_,{value:Q,writable:!0}),x(se,y,{value:null,writable:!0}),x(se,P,{value:null,writable:!0}),x(se,g,{value:null,writable:!0}),x(se,T,{value:Q._readableState.endEmitted,writable:!0}),x(se,M,{value:function(X,ce){var oe=C[_].read();oe?(C[F]=null,C[y]=null,C[P]=null,X(A(oe,!1))):(C[y]=X,C[P]=ce)},writable:!0}),se));return C[F]=null,E(Q,function(X){if(X&&X.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ce=C[P];return ce!==null&&(C[F]=null,C[y]=null,C[P]=null,ce(X)),void(C[g]=X)}var oe=C[y];oe!==null&&(C[F]=null,C[y]=null,C[P]=null,oe(A(void 0,!0))),C[T]=!0}),Q.on("readable",Z.bind(null,C)),C}},8393:function(N,p,w){function U(T,F){var M=Object.keys(T);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(T);F&&(_=_.filter(function(A){return Object.getOwnPropertyDescriptor(T,A).enumerable})),M.push.apply(M,_)}return M}function x(T,F,M){return F in T?Object.defineProperty(T,F,{value:M,enumerable:!0,configurable:!0,writable:!0}):T[F]=M,T}function E(T,F){for(var M=0;M<F.length;M++){var _=F[M];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var y=w(1549).Buffer,P=w(9862).inspect,g=P&&P.custom||"inspect";N.exports=function(){function T(){(function(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")})(this,T),this.head=null,this.tail=null,this.length=0}var F,M;return F=T,M=[{key:"push",value:function(_){var A={data:_,next:null};this.length>0?this.tail.next=A:this.head=A,this.tail=A,++this.length}},{key:"unshift",value:function(_){var A={data:_,next:this.head};this.length===0&&(this.tail=A),this.head=A,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var A=this.head,b=""+A.data;A=A.next;)b+=_+A.data;return b}},{key:"concat",value:function(_){if(this.length===0)return y.alloc(0);for(var A,b,Z,Y=y.allocUnsafe(_>>>0),$=this.head,Q=0;$;)A=$.data,b=Y,Z=Q,y.prototype.copy.call(A,b,Z),Q+=$.data.length,$=$.next;return Y}},{key:"consume",value:function(_,A){var b;return _<this.head.data.length?(b=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):b=_===this.head.data.length?this.shift():A?this._getString(_):this._getBuffer(_),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var A=this.head,b=1,Z=A.data;for(_-=Z.length;A=A.next;){var Y=A.data,$=_>Y.length?Y.length:_;if($===Y.length?Z+=Y:Z+=Y.slice(0,_),(_-=$)==0){$===Y.length?(++b,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=Y.slice($));break}++b}return this.length-=b,Z}},{key:"_getBuffer",value:function(_){var A=y.allocUnsafe(_),b=this.head,Z=1;for(b.data.copy(A),_-=b.data.length;b=b.next;){var Y=b.data,$=_>Y.length?Y.length:_;if(Y.copy(A,A.length-_,0,$),(_-=$)==0){$===Y.length?(++Z,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=Y.slice($));break}++Z}return this.length-=Z,A}},{key:g,value:function(_,A){return P(this,function(b){for(var Z=1;Z<arguments.length;Z++){var Y=arguments[Z]!=null?arguments[Z]:{};Z%2?U(Object(Y),!0).forEach(function($){x(b,$,Y[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(Y)):U(Object(Y)).forEach(function($){Object.defineProperty(b,$,Object.getOwnPropertyDescriptor(Y,$))})}return b}({},A,{depth:0,customInspect:!1}))}}],M&&E(F.prototype,M),T}()},6163:function(N){function p(x,E){U(x,E),w(x)}function w(x){x._writableState&&!x._writableState.emitClose||x._readableState&&!x._readableState.emitClose||x.emit("close")}function U(x,E){x.emit("error",E)}N.exports={destroy:function(x,E){var y=this,P=this._readableState&&this._readableState.destroyed,g=this._writableState&&this._writableState.destroyed;return P||g?(E?E(x):x&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(U,this,x)):process.nextTick(U,this,x)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(x||null,function(T){!E&&T?y._writableState?y._writableState.errorEmitted?process.nextTick(w,y):(y._writableState.errorEmitted=!0,process.nextTick(p,y,T)):process.nextTick(p,y,T):E?(process.nextTick(w,y),E(T)):process.nextTick(w,y)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(x,E){var y=x._readableState,P=x._writableState;y&&y.autoDestroy||P&&P.autoDestroy?x.destroy(E):x.emit("error",E)}}},8800:function(N,p,w){var U=w(3690).q.ERR_STREAM_PREMATURE_CLOSE;function x(){}N.exports=function E(y,P,g){if(typeof P=="function")return E(y,null,P);P||(P={}),g=function(se){var C=!1;return function(){if(!C){C=!0;for(var X=arguments.length,ce=new Array(X),oe=0;oe<X;oe++)ce[oe]=arguments[oe];se.apply(this,ce)}}}(g||x);var T=P.readable||P.readable!==!1&&y.readable,F=P.writable||P.writable!==!1&&y.writable,M=function(){y.writable||A()},_=y._writableState&&y._writableState.finished,A=function(){F=!1,_=!0,T||g.call(y)},b=y._readableState&&y._readableState.endEmitted,Z=function(){T=!1,b=!0,F||g.call(y)},Y=function(se){g.call(y,se)},$=function(){var se;return T&&!b?(y._readableState&&y._readableState.ended||(se=new U),g.call(y,se)):F&&!_?(y._writableState&&y._writableState.ended||(se=new U),g.call(y,se)):void 0},Q=function(){y.req.on("finish",A)};return function(se){return se.setHeader&&typeof se.abort=="function"}(y)?(y.on("complete",A),y.on("abort",$),y.req?Q():y.on("request",Q)):F&&!y._writableState&&(y.on("end",M),y.on("close",M)),y.on("end",Z),y.on("finish",A),P.error!==!1&&y.on("error",Y),y.on("close",$),function(){y.removeListener("complete",A),y.removeListener("abort",$),y.removeListener("request",Q),y.req&&y.req.removeListener("finish",A),y.removeListener("end",M),y.removeListener("close",M),y.removeListener("finish",A),y.removeListener("end",Z),y.removeListener("error",Y),y.removeListener("close",$)}}},6233:function(N){N.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(N,p,w){var U,x=w(3690).q,E=x.ERR_MISSING_ARGS,y=x.ERR_STREAM_DESTROYED;function P(_){if(_)throw _}function g(_,A,b,Z){Z=function(Q){var se=!1;return function(){se||(se=!0,Q.apply(void 0,arguments))}}(Z);var Y=!1;_.on("close",function(){Y=!0}),U===void 0&&(U=w(8800)),U(_,{readable:A,writable:b},function(Q){if(Q)return Z(Q);Y=!0,Z()});var $=!1;return function(Q){if(!Y&&!$)return $=!0,function(se){return se.setHeader&&typeof se.abort=="function"}(_)?_.abort():typeof _.destroy=="function"?_.destroy():void Z(Q||new y("pipe"))}}function T(_){_()}function F(_,A){return _.pipe(A)}function M(_){return _.length?typeof _[_.length-1]!="function"?P:_.pop():P}N.exports=function(){for(var _=arguments.length,A=new Array(_),b=0;b<_;b++)A[b]=arguments[b];var Z,Y=M(A);if(Array.isArray(A[0])&&(A=A[0]),A.length<2)throw new E("streams");var $=A.map(function(Q,se){var C=se<A.length-1;return g(Q,C,se>0,function(X){Z||(Z=X),X&&$.forEach(T),C||($.forEach(T),Y(Z))})});return A.reduce(F)}},7269:function(N,p,w){var U=w(3690).q.ERR_INVALID_OPT_VALUE;N.exports={getHighWaterMark:function(x,E,y,P){var g=function(T,F,M){return T.highWaterMark!=null?T.highWaterMark:F?T[M]:null}(E,P,y);if(g!=null){if(!isFinite(g)||Math.floor(g)!==g||g<0)throw new U(P?y:"highWaterMark",g);return Math.floor(g)}return x.objectMode?16:16384}}},9299:function(N,p,w){N.exports=w(1159).EventEmitter},7503:function(N,p,w){var U=w(8387).Buffer,x=U.isEncoding||function(b){switch((b=""+b)&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function E(b){var Z;switch(this.encoding=function(Y){var $=function(Q){if(!Q)return"utf8";for(var se;;)switch(Q){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Q;default:if(se)return;Q=(""+Q).toLowerCase(),se=!0}}(Y);if(typeof $!="string"&&(U.isEncoding===x||!x(Y)))throw new Error("Unknown encoding: "+Y);return $||Y}(b),this.encoding){case"utf16le":this.text=g,this.end=T,Z=4;break;case"utf8":this.fillLast=P,Z=4;break;case"base64":this.text=F,this.end=M,Z=3;break;default:return this.write=_,void(this.end=A)}this.lastNeed=0,this.lastTotal=0,this.lastChar=U.allocUnsafe(Z)}function y(b){return b<=127?0:b>>5==6?2:b>>4==14?3:b>>3==30?4:b>>6==2?-1:-2}function P(b){var Z=this.lastTotal-this.lastNeed,Y=function($,Q,se){if((192&Q[0])!=128)return $.lastNeed=0,"";if($.lastNeed>1&&Q.length>1){if((192&Q[1])!=128)return $.lastNeed=1,"";if($.lastNeed>2&&Q.length>2&&(192&Q[2])!=128)return $.lastNeed=2,""}}(this,b);return Y!==void 0?Y:this.lastNeed<=b.length?(b.copy(this.lastChar,Z,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(b.copy(this.lastChar,Z,0,b.length),void(this.lastNeed-=b.length))}function g(b,Z){if((b.length-Z)%2==0){var Y=b.toString("utf16le",Z);if(Y){var $=Y.charCodeAt(Y.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],Y.slice(0,-1)}return Y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",Z,b.length-1)}function T(b){var Z=b&&b.length?this.write(b):"";if(this.lastNeed){var Y=this.lastTotal-this.lastNeed;return Z+this.lastChar.toString("utf16le",0,Y)}return Z}function F(b,Z){var Y=(b.length-Z)%3;return Y===0?b.toString("base64",Z):(this.lastNeed=3-Y,this.lastTotal=3,Y===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",Z,b.length-Y))}function M(b){var Z=b&&b.length?this.write(b):"";return this.lastNeed?Z+this.lastChar.toString("base64",0,3-this.lastNeed):Z}function _(b){return b.toString(this.encoding)}function A(b){return b&&b.length?this.write(b):""}p.s=E,E.prototype.write=function(b){if(b.length===0)return"";var Z,Y;if(this.lastNeed){if((Z=this.fillLast(b))===void 0)return"";Y=this.lastNeed,this.lastNeed=0}else Y=0;return Y<b.length?Z?Z+this.text(b,Y):this.text(b,Y):Z||""},E.prototype.end=function(b){var Z=b&&b.length?this.write(b):"";return this.lastNeed?Z+"":Z},E.prototype.text=function(b,Z){var Y=function(Q,se,C){var X=se.length-1;if(X<C)return 0;var ce=y(se[X]);return ce>=0?(ce>0&&(Q.lastNeed=ce-1),ce):--X<C||ce===-2?0:(ce=y(se[X]))>=0?(ce>0&&(Q.lastNeed=ce-2),ce):--X<C||ce===-2?0:(ce=y(se[X]))>=0?(ce>0&&(ce===2?ce=0:Q.lastNeed=ce-3),ce):0}(this,b,Z);if(!this.lastNeed)return b.toString("utf8",Z);this.lastTotal=Y;var $=b.length-(Y-this.lastNeed);return b.copy(this.lastChar,0,$),b.toString("utf8",Z,$)},E.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length}},1067:function(N,p,w){var U;(function(x,E){var y="function",P="undefined",g="object",T="string",F="major",M="model",_="name",A="type",b="vendor",Z="version",Y="architecture",$="console",Q="mobile",se="tablet",C="smarttv",X="wearable",ce="embedded",oe="Amazon",me="Apple",be="ASUS",Je="BlackBerry",we="Browser",qe="Chrome",st="Firefox",ft="Google",Ce="Huawei",He="LG",vt="Microsoft",Re="Motorola",Ye="Opera",ot="Samsung",Ht="Sharp",Bt="Sony",Et="Xiaomi",Dt="Zebra",Ne="Facebook",ne="Chromium OS",Be="Mac OS",L=function(ht){for(var _t={},Tt=0;Tt<ht.length;Tt++)_t[ht[Tt].toUpperCase()]=ht[Tt];return _t},D=function(ht,_t){return typeof ht===T&&G(_t).indexOf(G(ht))!==-1},G=function(ht){return ht.toLowerCase()},K=function(ht,_t){if(typeof ht===T)return ht=ht.replace(/^\s\s*/,""),typeof _t===P?ht:ht.substring(0,500)},ge=function(ht,_t){for(var Tt,Mt,_n,rn,cn,Ft,Gn=0;Gn<_t.length&&!cn;){var Sr=_t[Gn],Gr=_t[Gn+1];for(Tt=Mt=0;Tt<Sr.length&&!cn&&Sr[Tt];)if(cn=Sr[Tt++].exec(ht))for(_n=0;_n<Gr.length;_n++)Ft=cn[++Mt],typeof(rn=Gr[_n])===g&&rn.length>0?rn.length===2?typeof rn[1]==y?this[rn[0]]=rn[1].call(this,Ft):this[rn[0]]=rn[1]:rn.length===3?typeof rn[1]!==y||rn[1].exec&&rn[1].test?this[rn[0]]=Ft?Ft.replace(rn[1],rn[2]):E:this[rn[0]]=Ft?rn[1].call(this,Ft,rn[2]):E:rn.length===4&&(this[rn[0]]=Ft?rn[3].call(this,Ft.replace(rn[1],rn[2])):E):this[rn]=Ft||E;Gn+=2}},pe=function(ht,_t){for(var Tt in _t)if(typeof _t[Tt]===g&&_t[Tt].length>0){for(var Mt=0;Mt<_t[Tt].length;Mt++)if(D(_t[Tt][Mt],ht))return Tt==="?"?E:Tt}else if(D(_t[Tt],ht))return Tt==="?"?E:Tt;return ht},Ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},wt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[Z,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[Z,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,Z],[/opios[\/ ]+([\w\.]+)/i],[Z,[_,Ye+" Mini"]],[/\bopr\/([\w\.]+)/i],[Z,[_,Ye]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[Z,[_,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[_,Z],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[Z,[_,"UC"+we]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[Z,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[Z,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[Z,[_,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[Z,[_,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[Z,[_,"Smart Lenovo "+we]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+we],Z],[/\bfocus\/([\w\.]+)/i],[Z,[_,st+" Focus"]],[/\bopt\/([\w\.]+)/i],[Z,[_,Ye+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[Z,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[Z,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[Z,[_,Ye+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[Z,[_,"MIUI "+we]],[/fxios\/([-\w\.]+)/i],[Z,[_,st]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+we]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+we],Z],[/samsungbrowser\/([\w\.]+)/i],[Z,[_,ot+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],Z],[/metasr[\/ ]?([\d\.]+)/i],[Z,[_,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[_,"Sogou Mobile"],Z],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[_,Z],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,Ne],Z],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[_,Z],[/\bgsa\/([\w\.]+) .*safari\//i],[Z,[_,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[Z,[_,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[Z,[_,qe+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,qe+" WebView"],Z],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[Z,[_,"Android "+we]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,Z],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[Z,[_,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[Z,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[Z,pe,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[_,Z],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],Z],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[Z,[_,st+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[_,Z],[/(cobalt)\/([\w\.]+)/i],[_,[Z,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Y,"amd64"]],[/(ia32(?=;))/i],[[Y,G]],[/((?:i[346]|x)86)[;\)]/i],[[Y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Y,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[Y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Y,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[M,[b,ot],[A,se]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[M,[b,ot],[A,Q]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[M,[b,me],[A,Q]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[M,[b,me],[A,se]],[/(macintosh);/i],[M,[b,me]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[M,[b,Ht],[A,Q]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[M,[b,Ce],[A,se]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[M,[b,Ce],[A,Q]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[M,/_/g," "],[b,Et],[A,Q]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[M,/_/g," "],[b,Et],[A,se]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[M,[b,"OPPO"],[A,Q]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[M,[b,"Vivo"],[A,Q]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[M,[b,"Realme"],[A,Q]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[M,[b,Re],[A,Q]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[M,[b,Re],[A,se]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[M,[b,He],[A,se]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[M,[b,He],[A,Q]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[M,[b,"Lenovo"],[A,se]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[M,/_/g," "],[b,"Nokia"],[A,Q]],[/(pixel c)\b/i],[M,[b,ft],[A,se]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[M,[b,ft],[A,Q]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[M,[b,Bt],[A,Q]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[M,"Xperia Tablet"],[b,Bt],[A,se]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[M,[b,"OnePlus"],[A,Q]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[M,[b,oe],[A,se]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[M,/(.+)/g,"Fire Phone $1"],[b,oe],[A,Q]],[/(playbook);[-\w\),; ]+(rim)/i],[M,b,[A,se]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[M,[b,Je],[A,Q]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[M,[b,be],[A,se]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[M,[b,be],[A,Q]],[/(nexus 9)/i],[M,[b,"HTC"],[A,se]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[b,[M,/_/g," "],[A,Q]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[M,[b,"Acer"],[A,se]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[M,[b,"Meizu"],[A,Q]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[M,[b,"Ulefone"],[A,Q]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[b,M,[A,Q]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[b,M,[A,se]],[/(surface duo)/i],[M,[b,vt],[A,se]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[M,[b,"Fairphone"],[A,Q]],[/(u304aa)/i],[M,[b,"AT&T"],[A,Q]],[/\bsie-(\w*)/i],[M,[b,"Siemens"],[A,Q]],[/\b(rct\w+) b/i],[M,[b,"RCA"],[A,se]],[/\b(venue[\d ]{2,7}) b/i],[M,[b,"Dell"],[A,se]],[/\b(q(?:mv|ta)\w+) b/i],[M,[b,"Verizon"],[A,se]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[M,[b,"Barnes & Noble"],[A,se]],[/\b(tm\d{3}\w+) b/i],[M,[b,"NuVision"],[A,se]],[/\b(k88) b/i],[M,[b,"ZTE"],[A,se]],[/\b(nx\d{3}j) b/i],[M,[b,"ZTE"],[A,Q]],[/\b(gen\d{3}) b.+49h/i],[M,[b,"Swiss"],[A,Q]],[/\b(zur\d{3}) b/i],[M,[b,"Swiss"],[A,se]],[/\b((zeki)?tb.*\b) b/i],[M,[b,"Zeki"],[A,se]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[b,"Dragon Touch"],M,[A,se]],[/\b(ns-?\w{0,9}) b/i],[M,[b,"Insignia"],[A,se]],[/\b((nxa|next)-?\w{0,9}) b/i],[M,[b,"NextBook"],[A,se]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[b,"Voice"],M,[A,Q]],[/\b(lvtel\-)?(v1[12]) b/i],[[b,"LvTel"],M,[A,Q]],[/\b(ph-1) /i],[M,[b,"Essential"],[A,Q]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[M,[b,"Envizen"],[A,se]],[/\b(trio[-\w\. ]+) b/i],[M,[b,"MachSpeed"],[A,se]],[/\btu_(1491) b/i],[M,[b,"Rotor"],[A,se]],[/(shield[\w ]+) b/i],[M,[b,"Nvidia"],[A,se]],[/(sprint) (\w+)/i],[b,M,[A,Q]],[/(kin\.[onetw]{3})/i],[[M,/\./g," "],[b,vt],[A,Q]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[M,[b,Dt],[A,se]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[M,[b,Dt],[A,Q]],[/smart-tv.+(samsung)/i],[b,[A,C]],[/hbbtv.+maple;(\d+)/i],[[M,/^/,"SmartTV"],[b,ot],[A,C]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[b,He],[A,C]],[/(apple) ?tv/i],[b,[M,me+" TV"],[A,C]],[/crkey/i],[[M,qe+"cast"],[b,ft],[A,C]],[/droid.+aft(\w+)( bui|\))/i],[M,[b,oe],[A,C]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[M,[b,Ht],[A,C]],[/(bravia[\w ]+)( bui|\))/i],[M,[b,Bt],[A,C]],[/(mitv-\w{5}) bui/i],[M,[b,Et],[A,C]],[/Hbbtv.*(technisat) (.*);/i],[b,M,[A,C]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[b,K],[M,K],[A,C]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[A,C]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[b,M,[A,$]],[/droid.+; (shield) bui/i],[M,[b,"Nvidia"],[A,$]],[/(playstation [345portablevi]+)/i],[M,[b,Bt],[A,$]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[M,[b,vt],[A,$]],[/((pebble))app/i],[b,M,[A,X]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[M,[b,me],[A,X]],[/droid.+; (glass) \d/i],[M,[b,ft],[A,X]],[/droid.+; (wt63?0{2,3})\)/i],[M,[b,Dt],[A,X]],[/(quest( 2| pro)?)/i],[M,[b,Ne],[A,X]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[b,[A,ce]],[/(aeobc)\b/i],[M,[b,oe],[A,ce]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[M,[A,Q]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[M,[A,se]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[A,se]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[A,Q]],[/(android[-\w\. ]{0,9});.+buil/i],[M,[b,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[Z,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[Z,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[_,Z],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[Z,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,Z],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[_,[Z,pe,Ke]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[Z,pe,Ke],[_,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[Z,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,Be],[Z,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[Z,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,Z],[/\(bb(10);/i],[Z,[_,Je]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[Z,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[Z,[_,st+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[Z,[_,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[Z,[_,"watchOS"]],[/crkey\/([\d\.]+)/i],[Z,[_,qe+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[_,ne],Z],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,Z],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],Z],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[_,Z]]},lt=function(ht,_t){if(typeof ht===g&&(_t=ht,ht=E),!(this instanceof lt))return new lt(ht,_t).getResult();var Tt=typeof x!==P&&x.navigator?x.navigator:E,Mt=ht||(Tt&&Tt.userAgent?Tt.userAgent:""),_n=Tt&&Tt.userAgentData?Tt.userAgentData:E,rn=_t?function(Ft,Gn){var Sr={};for(var Gr in Ft)Gn[Gr]&&Gn[Gr].length%2==0?Sr[Gr]=Gn[Gr].concat(Ft[Gr]):Sr[Gr]=Ft[Gr];return Sr}(wt,_t):wt,cn=Tt&&Tt.userAgent==Mt;return this.getBrowser=function(){var Ft,Gn={};return Gn[_]=E,Gn[Z]=E,ge.call(Gn,Mt,rn.browser),Gn[F]=typeof(Ft=Gn[Z])===T?Ft.replace(/[^\d\.]/g,"").split(".")[0]:E,cn&&Tt&&Tt.brave&&typeof Tt.brave.isBrave==y&&(Gn[_]="Brave"),Gn},this.getCPU=function(){var Ft={};return Ft[Y]=E,ge.call(Ft,Mt,rn.cpu),Ft},this.getDevice=function(){var Ft={};return Ft[b]=E,Ft[M]=E,Ft[A]=E,ge.call(Ft,Mt,rn.device),cn&&!Ft[A]&&_n&&_n.mobile&&(Ft[A]=Q),cn&&Ft[M]=="Macintosh"&&Tt&&typeof Tt.standalone!==P&&Tt.maxTouchPoints&&Tt.maxTouchPoints>2&&(Ft[M]="iPad",Ft[A]=se),Ft},this.getEngine=function(){var Ft={};return Ft[_]=E,Ft[Z]=E,ge.call(Ft,Mt,rn.engine),Ft},this.getOS=function(){var Ft={};return Ft[_]=E,Ft[Z]=E,ge.call(Ft,Mt,rn.os),cn&&!Ft[_]&&_n&&_n.platform!="Unknown"&&(Ft[_]=_n.platform.replace(/chrome os/i,ne).replace(/macos/i,Be)),Ft},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Mt},this.setUA=function(Ft){return Mt=typeof Ft===T&&Ft.length>500?K(Ft,500):Ft,this},this.setUA(Mt),this};lt.VERSION="1.0.37",lt.BROWSER=L([_,Z,F]),lt.CPU=L([Y]),lt.DEVICE=L([M,b,A,$,Q,C,se,X,ce]),lt.ENGINE=lt.OS=L([_,Z]),typeof p!==P?(N.exports&&(p=N.exports=lt),p.UAParser=lt):w.amdO?(U=(function(){return lt}).call(p,w,p,N))===E||(N.exports=U):typeof x!==P&&(x.UAParser=lt);var ut=typeof x!==P&&(x.jQuery||x.Zepto);if(ut&&!ut.ua){var nt=new lt;ut.ua=nt.getResult(),ut.ua.get=function(){return nt.getUA()},ut.ua.set=function(ht){nt.setUA(ht);var _t=nt.getResult();for(var Tt in _t)ut.ua[Tt]=_t[Tt]}}})(typeof window=="object"?window:this)},7839:function(N,p,w){function U(x){try{if(!w.g.localStorage)return!1}catch(y){return!1}var E=w.g.localStorage[x];return E!=null&&String(E).toLowerCase()==="true"}N.exports=function(x,E){if(U("noDeprecation"))return x;var y=!1;return function(){if(!y){if(U("throwDeprecation"))throw new Error(E);U("traceDeprecation")?console.trace(E):console.warn(E),y=!0}return x.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(N){N.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(N){N.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(N){N.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(N){N.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(N){N.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(N){N.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},d={};function m(N){var p=d[N];if(p!==void 0)return p.exports;var w=d[N]={exports:{}};return l[N].call(w.exports,w,w.exports,m),w.exports}m.amdO={},m.n=function(N){var p=N&&N.__esModule?function(){return N.default}:function(){return N};return m.d(p,{a:p}),p},m.d=function(N,p){for(var w in p)m.o(p,w)&&!m.o(N,w)&&Object.defineProperty(N,w,{enumerable:!0,get:p[w]})},m.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(N){if(typeof window=="object")return window}}(),m.o=function(N,p){return Object.prototype.hasOwnProperty.call(N,p)};var I={};return function(){m.d(I,{default:function(){return g}}),m(8416);var N,p=m(1715),w=m(8080),U=m(1737),x=m(1139),E=function(){var T,F="application/dash+xml";function M(A,b,Z){if(!A||!/^VIDEO$/i.test(A.nodeName))return null;if(A._dashjs_player)return A._dashjs_player;var Y,$=A.id||A.name||"video element";if(!(b=b||[].slice.call(A.querySelectorAll("source")).filter(function(Q){return Q.type==F})[0])&&A.src)(b=document.createElement("source")).src=A.src;else if(!b&&!A.src)return null;return Z=Z||{},(Y=(0,x.Z)(Z).create()).initialize(A,b.src,A.autoplay),T||(T=Y.getDebug().getLogger()),T.debug("Converted "+$+" to dash.js player and added content: "+b.src),A._dashjs_player=Y,Y}function _(A){return/^VIDEO$/i.test(A.nodeName)?A:_(A.parentNode)}return{create:M,createAll:function(A,b){var Z=[];A=A||"[data-dashjs-player]";for(var Y=(b=b||document).querySelectorAll(A),$=0;$<Y.length;$++){var Q=M(Y[$],null);Z.push(Q)}for(var se=b.querySelectorAll('source[type="'+F+'"]'),C=0;C<se.length;C++){var X=M(_(se[C]),null);Z.push(X)}return Z}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?E.createAll():N=window.setInterval(function(){window.dashjs&&(window.clearInterval(N),E.createAll())},500):window.addEventListener("load",function T(){window.removeEventListener("load",T),E.createAll()}));var y=E,P=m(6398);dashjs.Protection=U.default,dashjs.MetricsReporting=w.default,dashjs.MediaPlayerFactory=y,dashjs.Debug=P.Z,dashjs.supportsMediaSource=p.B;var g=dashjs}(),I.default}()})})(fB);var Xz=fB.exports;const Qz=BC(Xz);var Du,Xi,eI,tI,Eg={};Eg.d=(o,i)=>{for(var l in i)Eg.o(i,l)&&!Eg.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:i[l]})},Eg.o=(o,i)=>Object.prototype.hasOwnProperty.call(o,i);var IE={};function F3(o,i){(i==null||i>o.length)&&(i=o.length);for(var l=0,d=Array(i);l<i;l++)d[l]=o[l];return d}function io(o){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{},d=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(l).filter(function(m){return Object.getOwnPropertyDescriptor(l,m).enumerable}))),d.forEach(function(m){var I;I=l[m],m in o?Object.defineProperty(o,m,{value:I,enumerable:!0,configurable:!0,writable:!0}):o[m]=I})}return o}function go(o,i){return i=i!=null?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):function(l,d){var m=Object.keys(l);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(l);m.push.apply(m,I)}return m}(Object(i)).forEach(function(l){Object.defineProperty(o,l,Object.getOwnPropertyDescriptor(i,l))}),o}function U3(o,i){return function(l){if(Array.isArray(l))return l}(o)||function(l,d){var m,I,N=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(N!=null){var p=[],w=!0,U=!1;try{for(N=N.call(l);!(w=(m=N.next()).done)&&(p.push(m.value),!d||p.length!==d);w=!0);}catch(x){U=!0,I=x}finally{try{w||N.return==null||N.return()}finally{if(U)throw I}}return p}}(o,i)||function(l,d){if(l){if(typeof l=="string")return F3(l,d);var m=Object.prototype.toString.call(l).slice(8,-1);if(m==="Object"&&l.constructor&&(m=l.constructor.name),m==="Map"||m==="Set")return Array.from(m);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return F3(l,d)}}(o,i)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Eg.d(IE,{GP:()=>eI,fZ:()=>eY,vn:()=>tI}),(Du=eI||(eI={})).LOADED="loaded",Du.SEEKING="seeking",Du.SEEKED="seeked",Du.BUFFERING="buffering",Du.BUFFERED="buffered",Du.PLAY="play",Du.PLAYING="playing",Du.PAUSE="pause",Du.ENDED="ended",Du.TIME_UPDATE="timeupdate",(Xi=tI||(tI={})).loadstart="loadstart",Xi.progress="progress",Xi.suspend="suspend",Xi.abort="abort",Xi.error="error",Xi.emptied="emptied",Xi.stalled="stalled",Xi.loadedmetadata="loadedmetadata",Xi.loadeddata="loadeddata",Xi.canplay="canplay",Xi.canplaythrough="canplaythrough",Xi.playing="playing",Xi.waiting="waiting",Xi.seeking="seeking",Xi.seeked="seeked",Xi.ended="ended",Xi.durationchange="durationchange",Xi.timeupdate="timeupdate",Xi.play="play",Xi.pause="pause",Xi.ratechange="ratechange",Xi.resize="resize",Xi.volumechange="volumechange";var Jz={paused:!1,ended:!1,loading:!0,buffering:!1,seeking:!1,initialPlayFired:!1,deferLoadedEvent:!1,deferPlayingEvent:!1,deferSeekedEvent:!1,playRequested:!1},eY=function(o){var i=o.mediaElement,l=o.callback,d=o.allowResumeAfterEnded,m=d!==void 0&&d,I=null,N=function(){typeof I=="number"&&clearTimeout(I)},p=io({},Jz),w=function(){return m?p.loading:p.loading||p.ended},U=function(){!p.loading&&p.buffering&&i.playbackRate>0&&(p=go(io({},p),{buffering:!1}),l("buffered")),p.loading&&(i.playbackRate===0?p=go(io({},p),{deferLoadedEvent:!0}):(p=go(io({},p),{loading:!1,deferLoadedEvent:!1}),l("loaded")))},x=function(){w()||(p.ended&&(p.ended=!1),p.buffering&&l("buffered"),p=go(io({},p),{seeking:!0,buffering:!1}),l("seeking"))},E=function(){if(!w()&&p.seeking){if(i.playbackRate===0){p=go(io({},p),{deferSeekedEvent:!0});return}p=go(io({},p),{seeking:!1,deferSeekedEvent:!1}),l("seeked")}},y=function(){if(N(),!w()&&!p.seeking){if(i.seeking){x();return}p.buffering||(p=go(io({},p),{buffering:!0}),l("buffering"))}},P=function(){if(N(),i.playbackRate===0){p=go(io({},p),{deferPlayingEvent:!0});return}(p=go(io({},p),{deferPlayingEvent:!1})).loading&&U(),p.initialPlayFired?p.buffering?(p=go(io({},p),{buffering:!1}),l("buffered")):p.seeking&&(p=go(io({},p),{seeking:!1,deferSeekedEvent:!1}),l("seeked")):(p=go(io({},p),{initialPlayFired:!0,paused:!1,playRequested:!1}),l("playing")),p.paused&&p.playRequested&&(p=go(io({},p),{paused:!1,playRequested:!1}),l("playing"))},g=function(){return!p.seeking&&!p.buffering&&i.playbackRate===0&&!i.seeking},T=[["canplaythrough",U],["playing",P],["waiting",y],["seeking",x],["seeked",E],["ended",function(){p=go(io({},p),{ended:!0,buffering:!1,seeking:!1,loading:!1,paused:!0}),N(),l("ended")}],["timeupdate",function(){w()||(p.buffering&&!i.paused&&(p=go(io({},p),{buffering:!1}),l("buffered")),l("timeupdate"))}],["play",function(){!w()&&p.paused&&p.initialPlayFired&&(p=go(io({},p),{playRequested:!0}),l("play"))}],["pause",function(){!i.ended&&(p.playRequested||!p.paused)&&((p=go(io({},p),{playRequested:!1})).deferLoadedEvent?(p=go(io({},p),{loading:!1,deferLoadedEvent:!1}),l("loaded"),i.paused&&(p=go(io({},p),{paused:!0}),l("pause"))):(p=go(io({},p),{paused:!0}),l("pause")))}],["ratechange",function(){N();var F=i.playbackRate>0;p.deferLoadedEvent&&F&&U(),p.deferSeekedEvent&&F&&E(),p.deferPlayingEvent&&F&&P(),!w()&&(g()?I=window.setTimeout(function(){g()&&y()},50):p.buffering&&F&&(p=go(io({},p),{buffering:!1}),l("buffered")))}]];return T.forEach(function(F){var M=U3(F,2),_=M[0],A=M[1];return i.addEventListener(_,A)}),{teardown:function(){N(),T.forEach(function(F){var M=U3(F,2),_=M[0],A=M[1];return i.removeEventListener(_,A)})}}},Pu=IE.GP;IE.vn;var tY=IE.fZ;const nY={NEAR_END:"nearend"};class dB extends df{constructor(i){var l;super(),this.options=i,this.hasEmittedNearEnd=!1,this.video=this.options.element,this.video.muted=!!this.options.muted,this.nearEndThreshold=(l=this.options.nearEndThreshold)!=null?l:10,this.setupMediaEventFilter()}createBaseEventPayload(i){return{currentTime:i.currentTime,timeStamp:Date.now()}}setupMediaEventFilter(){this.eventFilter&&(this.eventFilter.teardown(),this.eventFilter=void 0),this.eventFilter=tY({mediaElement:this.options.element,allowResumeAfterEnded:!0,callback:i=>{const l=this.createBaseEventPayload(this.video);switch(i){case Pu.LOADED:{this.emit("loaded",l);break}case Pu.SEEKING:{this.emit("seeking",l);break}case Pu.SEEKED:{this.emit("seeked",l);break}case Pu.BUFFERING:{this.emit("buffering",l);break}case Pu.BUFFERED:{this.emit("buffered",l);break}case Pu.PLAY:{this.emit("play",l);break}case Pu.PLAYING:{this.emit("playing",l);break}case Pu.PAUSE:{this.emit("pause",l);break}case Pu.ENDED:{this.emit("ended",l);break}case Pu.TIME_UPDATE:{const d=this.video.duration-this.video.currentTime;this.hasEmittedNearEnd&&d>this.nearEndThreshold&&(this.hasEmittedNearEnd=!1),!this.hasEmittedNearEnd&&d<=this.nearEndThreshold&&(this.hasEmittedNearEnd=!0,this.emit(nY.NEAR_END,{...l,remainingTime:d})),this.emit("timeupdate",l);break}}}})}destroy(){var i;(i=this.eventFilter)==null||i.teardown()}getStats(){const i=this.options.element.getVideoPlaybackQuality();return{droppedVideoFrames:i.droppedVideoFrames,totalVideoFrames:i.totalVideoFrames}}}class rY extends Error{constructor(i,l){super(i),this.rawError=l}}class iY extends dB{constructor(i){var d,m;super(i),this.name="DashJSEngine",this.player=Qz.MediaPlayer().create(),this.options.policyQuery&&this.options.policyQuery.startsWith("?")&&this.player.extend("RequestModifier",function(){return{modifyRequestURL:function(I){return I+i.policyQuery}}},!0);const l={"com.widevine.alpha":{serverURL:(d=this.options)==null?void 0:d.widevineLicenseUrl,httpRequestHeaders:i.customLicenceRequestHeaders,priority:0,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO"}};this.player.updateSettings({streaming:{cacheInitSegments:!0,abr:{initialBitrate:{video:4e7},minBitrate:{video:4e6}},protection:{keepProtectionMediaKeys:this.options.keepProtectionData!==!1},buffer:{stableBufferTime:12,bufferToKeep:6}}}),this.player.initialize(this.options.element,void 0,(m=this.options.autoPlay)!=null?m:!1,void 0),this.options.widevineLicenseUrl&&this.player.setProtectionData(l)}destroy(){this.player.destroy(),super.destroy()}async load(i,l){this.setupMediaEventFilter(),console.time("# load"),await new Promise((d,m)=>{var I,N;this.once("loaded",()=>{console.timeEnd("# load"),d()});try{console.warn("# attachSource",i,Math.max((I=l==null?void 0:l.startTimeSeconds)!=null?I:0,0)),this.player.attachSource(i,Math.max((N=l==null?void 0:l.startTimeSeconds)!=null?N:0,0))}catch(p){m(new rY("UnknownError",p))}})}}var hB={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(o){(function(){var i=typeof window<"u"?window:cu,l={};(function(m,I,N){var p;function w(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var U=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function x(e){e=[typeof globalThis=="object"&&globalThis,e,typeof m=="object"&&m,typeof self=="object"&&self,typeof I=="object"&&I];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var E=x(this);function y(e,t){if(t)e:{var n=E;e=e.split(".");for(var r=0;r<e.length-1;r++){var u=e[r];if(!(u in n))break e;n=n[u]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&U(n,e,{configurable:!0,writable:!0,value:t})}}y("Symbol",function(e){function t(c){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(c||"")+"_"+u++,c)}function n(c,f){this.g=c,U(this,"description",{configurable:!0,writable:!0,value:f})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return t}),y("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=E[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&U(r.prototype,e,{configurable:!0,writable:!0,value:function(){return P(w(this))}})}return e});function P(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function g(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:w(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function T(e){if(!(e instanceof Array)){e=g(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var F=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},M;if(typeof Object.setPrototypeOf=="function")M=Object.setPrototypeOf;else{var _;e:{var A={a:!0},b={};try{b.__proto__=A,_=b.a;break e}catch(e){}_=!1}M=_?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Z=M;function Y(e,t){if(e.prototype=F(t.prototype),e.prototype.constructor=e,Z)Z(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.ik=t.prototype}function $(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function Q(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}$.prototype.s=function(e){this.h=e};function se(e,t){e.i={qg:t,Cg:!0},e.g=e.m||e.j}$.prototype.return=function(e){this.i={return:e},this.g=this.j};function C(e,t,n){return e.g=n,{value:t}}$.prototype.u=function(e){this.g=e};function X(e){e.g=0}function ce(e,t,n){e.m=t,n!=null&&(e.j=n)}function oe(e,t){e.m=0,e.j=t||0}function me(e,t,n){e.g=t,e.m=n||0}function be(e,t){return e.m=t||0,t=e.i.qg,e.i=null,t}function Je(e){e.A=[e.i],e.m=0,e.j=0}function we(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.Cg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function qe(e){this.g=new $,this.h=e}function st(e,t){Q(e.g);var n=e.g.l;return n?ft(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),Ce(e))}function ft(e,t,n,r){try{var u=t.call(e.g.l,n);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.o=!1,u;var c=u.value}catch(f){return e.g.l=null,se(e.g,f),Ce(e)}return e.g.l=null,r.call(e.g,c),Ce(e)}function Ce(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,se(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Cg)throw t.qg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function He(e){this.next=function(t){return Q(e.g),e.g.l?t=ft(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=Ce(e)),t},this.throw=function(t){return Q(e.g),e.g.l?t=ft(e,e.g.l.throw,t,e.g.s):(se(e.g,t),t=Ce(e)),t},this.return=function(t){return st(e,t)},this[Symbol.iterator]=function(){return this}}function vt(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,u){function c(f){f.done?r(f.value):Promise.resolve(f.value).then(t,n).then(c,u)}c(e.next())})}function Re(e){return vt(new He(new qe(e)))}function Ye(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}y("Promise",function(e){function t(f){this.h=0,this.i=void 0,this.g=[],this.o=!1;var h=this.j();try{f(h.resolve,h.reject)}catch(v){h.reject(v)}}function n(){this.g=null}function r(f){return f instanceof t?f:new t(function(h){h(f)})}if(e)return e;n.prototype.h=function(f){if(this.g==null){this.g=[];var h=this;this.i(function(){h.l()})}this.g.push(f)};var u=E.setTimeout;n.prototype.i=function(f){u(f,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var h=0;h<f.length;++h){var v=f[h];f[h]=null;try{v()}catch(S){this.j(S)}}}this.g=null},n.prototype.j=function(f){this.i(function(){throw f})},t.prototype.j=function(){function f(S){return function(R){v||(v=!0,S.call(h,R))}}var h=this,v=!1;return{resolve:f(this.F),reject:f(this.l)}},t.prototype.F=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof t)this.H(f);else{e:switch(typeof f){case"object":var h=f!=null;break e;case"function":h=!0;break e;default:h=!1}h?this.C(f):this.m(f)}},t.prototype.C=function(f){var h=void 0;try{h=f.then}catch(v){this.l(v);return}typeof h=="function"?this.I(h,f):this.m(f)},t.prototype.l=function(f){this.s(2,f)},t.prototype.m=function(f){this.s(1,f)},t.prototype.s=function(f,h){if(this.h!=0)throw Error("Cannot settle("+f+", "+h+"): Promise already settled in state"+this.h);this.h=f,this.i=h,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var f=this;u(function(){if(f.B()){var h=E.console;typeof h<"u"&&h.error(f.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var f=E.CustomEvent,h=E.Event,v=E.dispatchEvent;return typeof v>"u"?!0:(typeof f=="function"?f=new f("unhandledrejection",{cancelable:!0}):typeof h=="function"?f=new h("unhandledrejection",{cancelable:!0}):(f=E.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f)),f.promise=this,f.reason=this.i,v(f))},t.prototype.A=function(){if(this.g!=null){for(var f=0;f<this.g.length;++f)c.h(this.g[f]);this.g=null}};var c=new n;return t.prototype.H=function(f){var h=this.j();f.Bd(h.resolve,h.reject)},t.prototype.I=function(f,h){var v=this.j();try{f.call(h,v.resolve,v.reject)}catch(S){v.reject(S)}},t.prototype.then=function(f,h){function v(z,J){return typeof z=="function"?function(fe){try{S(z(fe))}catch(he){R(he)}}:J}var S,R,B=new t(function(z,J){S=z,R=J});return this.Bd(v(f,S),v(h,R)),B},t.prototype.catch=function(f){return this.then(void 0,f)},t.prototype.Bd=function(f,h){function v(){switch(S.h){case 1:f(S.i);break;case 2:h(S.i);break;default:throw Error("Unexpected state: "+S.h)}}var S=this;this.g==null?c.h(v):this.g.push(v),this.o=!0},t.resolve=r,t.reject=function(f){return new t(function(h,v){v(f)})},t.race=function(f){return new t(function(h,v){for(var S=g(f),R=S.next();!R.done;R=S.next())r(R.value).Bd(h,v)})},t.all=function(f){var h=g(f),v=h.next();return v.done?r([]):new t(function(S,R){function B(fe){return function(he){z[fe]=he,J--,J==0&&S(z)}}var z=[],J=0;do z.push(void 0),J++,r(v.value).Bd(B(z.length-1),R),v=h.next();while(!v.done)})},t});function ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}y("WeakMap",function(e){function t(v){if(this.g=(h+=Math.random()+1).toString(),v){v=g(v);for(var S;!(S=v.next()).done;)S=S.value,this.set(S[0],S[1])}}function n(){}function r(v){var S=typeof v;return S==="object"&&v!==null||S==="function"}function u(v){if(!ot(v,f)){var S=new n;U(v,f,{value:S})}}function c(v){var S=Object[v];S&&(Object[v]=function(R){return R instanceof n?R:(Object.isExtensible(R)&&u(R),S(R))})}if(function(){if(!e||!Object.seal)return!1;try{var v=Object.seal({}),S=Object.seal({}),R=new e([[v,2],[S,3]]);return R.get(v)!=2||R.get(S)!=3?!1:(R.delete(v),R.set(S,4),!R.has(v)&&R.get(S)==4)}catch(B){return!1}}())return e;var f="$jscomp_hidden_"+Math.random();c("freeze"),c("preventExtensions"),c("seal");var h=0;return t.prototype.set=function(v,S){if(!r(v))throw Error("Invalid WeakMap key");if(u(v),!ot(v,f))throw Error("WeakMap key fail: "+v);return v[f][this.g]=S,this},t.prototype.get=function(v){return r(v)&&ot(v,f)?v[f][this.g]:void 0},t.prototype.has=function(v){return r(v)&&ot(v,f)&&ot(v[f],this.g)},t.prototype.delete=function(v){return r(v)&&ot(v,f)&&ot(v[f],this.g)?delete v[f][this.g]:!1},t}),y("Map",function(e){function t(){var h={};return h.Nb=h.next=h.head=h}function n(h,v){var S=h[1];return P(function(){if(S){for(;S.head!=h[1];)S=S.Nb;for(;S.next!=S.head;)return S=S.next,{done:!1,value:v(S)};S=null}return{done:!0,value:void 0}})}function r(h,v){var S=v&&typeof v;S=="object"||S=="function"?c.has(v)?S=c.get(v):(S=""+ ++f,c.set(v,S)):S="p_"+v;var R=h[0][S];if(R&&ot(h[0],S))for(h=0;h<R.length;h++){var B=R[h];if(v!==v&&B.key!==B.key||v===B.key)return{id:S,list:R,index:h,entry:B}}return{id:S,list:R,index:-1,entry:void 0}}function u(h){if(this[0]={},this[1]=t(),this.size=0,h){h=g(h);for(var v;!(v=h.next()).done;)v=v.value,this.set(v[0],v[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var h=Object.seal({x:4}),v=new e(g([[h,"s"]]));if(v.get(h)!="s"||v.size!=1||v.get({x:4})||v.set({x:4},"t")!=v||v.size!=2)return!1;var S=v.entries(),R=S.next();return R.done||R.value[0]!=h||R.value[1]!="s"?!1:(R=S.next(),!(R.done||R.value[0].x!=4||R.value[1]!="t"||!S.next().done))}catch(B){return!1}}())return e;var c=new WeakMap;u.prototype.set=function(h,v){h=h===0?0:h;var S=r(this,h);return S.list||(S.list=this[0][S.id]=[]),S.entry?S.entry.value=v:(S.entry={next:this[1],Nb:this[1].Nb,head:this[1],key:h,value:v},S.list.push(S.entry),this[1].Nb.next=S.entry,this[1].Nb=S.entry,this.size++),this},u.prototype.delete=function(h){return h=r(this,h),h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this[0][h.id],h.entry.Nb.next=h.entry.next,h.entry.next.Nb=h.entry.Nb,h.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this[0]={},this[1]=this[1].Nb=t(),this.size=0},u.prototype.has=function(h){return!!r(this,h).entry},u.prototype.get=function(h){return(h=r(this,h).entry)&&h.value},u.prototype.entries=function(){return n(this,function(h){return[h.key,h.value]})},u.prototype.keys=function(){return n(this,function(h){return h.key})},u.prototype.values=function(){return n(this,function(h){return h.value})},u.prototype.forEach=function(h,v){for(var S=this.entries(),R;!(R=S.next()).done;)R=R.value,h.call(v,R[1],R[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var f=0;return u}),y("Set",function(e){function t(n){if(this.g=new Map,n){n=g(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(g([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var u=r.entries(),c=u.next();return c.done||c.value[0]!=n||c.value[1]!=n?!1:(c=u.next(),c.done||c.value[0]==n||c.value[0].x!=4||c.value[1]!=c.value[0]?!1:u.next().done)}catch(f){return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var u=this;this.g.forEach(function(c){return n.call(r,c,c,u)})},t)});function Ht(e,t){e instanceof String&&(e+="");var n=0,r=!1,u={next:function(){if(!r&&n<e.length){var c=n++;return{value:t(c,e[c]),done:!1}}return r=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}y("Array.prototype.keys",function(e){return e||function(){return Ht(this,function(t){return t})}});function Bt(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,u=0;u<r;u++){var c=e[u];if(t.call(n,c,u,e))return{Ag:u,v:c}}return{Ag:-1,v:void 0}}y("Array.prototype.findIndex",function(e){return e||function(t,n){return Bt(this,t,n).Ag}}),y("Array.from",function(e){return e||function(t,n,r){n=n!=null?n:function(h){return h};var u=[],c=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof c=="function"){t=c.call(t);for(var f=0;!(c=t.next()).done;)u.push(n.call(r,c.value,f++))}else for(c=t.length,f=0;f<c;f++)u.push(n.call(r,t[f],f));return u}}),y("Array.prototype.values",function(e){return e||function(){return Ht(this,function(t,n){return n})}}),y("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),y("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var u=r.length;for(n=n||0,0>n&&(n=Math.max(n+u,0));n<u;n++){var c=r[n];if(c===t||Object.is(c,t))return!0}return!1}});function Et(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}y("String.prototype.includes",function(e){return e||function(t,n){return Et(this,t,"includes").indexOf(t,n||0)!==-1}}),y("String.fromCodePoint",function(e){return e||function(t){for(var n="",r=0;r<arguments.length;r++){var u=Number(arguments[r]);if(0>u||1114111<u||u!==Math.floor(u))throw new RangeError("invalid_code_point "+u);65535>=u?n+=String.fromCharCode(u):(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),n+=String.fromCharCode(u&1023|56320))}return n}}),y("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=g(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),u=new e([n]);return!u.has(n)||u.has(r)?!1:(u.delete(n),u.add(r),!u.has(n)&&u.has(r))}catch(c){return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),y("Array.prototype.find",function(e){return e||function(t,n){return Bt(this,t,n).v}}),y("String.prototype.startsWith",function(e){return e||function(t,n){var r=Et(this,t,"startsWith"),u=r.length,c=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var f=0;f<c&&n<u;)if(r[n++]!=t[f++])return!1;return f>=c}}),y("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)ot(t,r)&&n.push([r,t[r]]);return n}});var Dt=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var u in r)ot(r,u)&&(e[u]=r[u])}return e};y("Object.assign",function(e){return e||Dt}),y("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),y("Array.prototype.entries",function(e){return e||function(){return Ht(this,function(t,n){return[t,n]})}}),y("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),y("String.prototype.repeat",function(e){return e||function(t){var n=Et(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),y("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),y("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)ot(t,r)&&n.push(t[r]);return n}}),y("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),y("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),y("String.prototype.endsWith",function(e){return e||function(t,n){var r=Et(this,t,"endsWith");n===void 0&&(n=r.length),n=Math.max(0,Math.min(n|0,r.length));for(var u=t.length;0<u&&0<n;)if(r[--n]!=t[--u])return!1;return 0>=u}}),y("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}});var Ne=this||self;function ne(e,t){e=e.split(".");var n=Ne;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function Be(){}function L(){}function D(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}D.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function G(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new D(2),this.j=new D(5),this.g=0,this.i=128e3,this.l=16e3}K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(G(this.h),G(this.j))};function ge(){}function pe(){}function Ke(){}function wt(e){var t=Ye.apply(1,arguments);ht.has(e)||(ht.add(e),Ke.apply(ge,T(t)))}function lt(){}function ut(){}function nt(){}var ht=new Set;m.console&&(Ke=function(){return console.warn.apply(console,T(Ye.apply(0,arguments)))},pe=function(){console.error.apply(console,T(Ye.apply(0,arguments)))});function _t(){this.g={}}p=_t.prototype,p.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},p.get=function(e){return(e=this.g[e])?e.slice():null},p.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},p.forEach=function(e){for(var t in this.g)e(t,this.g[t])},p.size=function(){return Object.keys(this.g).length},p.keys=function(){return Object.keys(this.g)};function Tt(){this.g=new _t}p=Tt.prototype,p.release=function(){this.Qa(),this.g=null},p.D=function(e,t,n,r){this.g&&(e=new Mt(e,t,n,r),this.g.push(t,e))},p.pa=function(e,t,n,r){function u(f){c.$a(e,t,u),n(f)}var c=this;this.D(e,t,u,r)},p.$a=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=g(r);for(var u=r.next();!u.done;u=r.next())u=u.value,u.target!=e||n!=u.listener&&n||(u.$a(),this.g.remove(t,u))}},p.Qa=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,T(e.g[n]));for(e=g(t),t=e.next();!t.done;t=e.next())t.value.$a();this.g.g={}}},ne("shaka.util.EventManager",Tt),Tt.prototype.removeAll=Tt.prototype.Qa,Tt.prototype.unlisten=Tt.prototype.$a,Tt.prototype.listenOnce=Tt.prototype.pa,Tt.prototype.listen=Tt.prototype.D,Tt.prototype.release=Tt.prototype.release;function Mt(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=_n(e,r),this.target.addEventListener(t,n,this.g)}Mt.prototype.$a=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function _n(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),rn(e)?t:t.capture||!1}function rn(e){var t=cn;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(u){t=!1}cn=t}return t||!1}var cn=void 0;function Ft(e){if(Sr.has(e))return Sr.get(e);if(m.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return Sr.set(e,t),t}return m.MediaSource?(t=MediaSource.isTypeSupported(e),Sr.set(e,t),t):!1}function Gn(){return!!m.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var Sr=new Map;function Gr(e,t){this.g=e,this.h=t}Gr.prototype.toString=function(){return"v"+this.g+"."+this.h};function gr(e,t){var n=new Gr(5,0),r=Hr,u=r.g,c=n.h-u.h;(0<(n.g-u.g||c)?r.i:r.h)(r.g,n,e,t)}function fi(e,t,n,r){Ke([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function ao(e,t,n,r){pe([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var Hr=null;function so(){}so.prototype.extract=function(){},so.prototype.decode=function(){return[]},so.prototype.clear=function(){},so.prototype.getStreams=function(){return[]};function xi(){}xi.prototype.init=function(){},xi.prototype.parse=function(){return[]};function Fi(){}function no(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(uo(e)==uo(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=nr(e);t=nr(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function uo(e){return e instanceof ArrayBuffer?e:e.buffer}function Ni(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function nr(e,t,n){return n=n===void 0?1/0:n,gn(e,t===void 0?0:t,n,Uint8Array)}function ju(e,t,n){return n=n===void 0?1/0:n,gn(e,t===void 0?0:t,n,Uint16Array)}function ln(e,t,n){return n=n===void 0?1/0:n,gn(e,t===void 0?0:t,n,DataView)}function gn(e,t,n,r){var u=uo(e),c=1;"BYTES_PER_ELEMENT"in r&&(c=r.BYTES_PER_ELEMENT);var f=((e.byteOffset||0)+e.byteLength)/c;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/c,f))),new r(u,e,Math.floor(Math.min(e+Math.max(n,0),f))-e)}ne("shaka.util.BufferUtils",Fi),Fi.toDataView=ln,Fi.toUint16=ju,Fi.toUint8=nr,Fi.toArrayBuffer=Ni,Fi.equal=no;function pn(){}pn.prototype.init=function(){},pn.prototype.i=function(){},pn.prototype.g=function(){},pn.prototype.j=function(){},ne("shaka.media.IClosedCaptionParser",pn);function At(e){this.l=new xi,(e=Xt[e.toLowerCase()])&&(this.l=e()),this.h=new so,(e=Ot)&&(this.h=e())}At.prototype.init=function(e,t){t!==void 0&&t||this.g(),this.l.init(e)},At.prototype.i=function(e){e=this.l.parse(e),e=g(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=nr(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},At.prototype.g=function(){this.h.clear()},At.prototype.j=function(){return this.h.getStreams()},ne("shaka.media.ClosedCaptionParser",At),At.findDecoder=function(){return Ot},At.unregisterDecoder=function(){Ot=null},At.registerDecoder=function(e){Ot=e},At.findParser=function(e){return Xt[e]},At.unregisterParser=function(e){delete Xt[e]},At.registerParser=function(e,t){Xt[e]=t};var Xt={},Ot=null;function Yt(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=wn,this.scroll=Mn}ne("shaka.text.CueRegion",Yt);var wn=1;Yt.units={PX:0,PERCENTAGE:wn,LINES:2};var Mn="";Yt.scrollMode={NONE:Mn,UP:"up"};function zn(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Kn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function Ln(e,t,n){if(n||(n=zn),e.length!=t.length)return!1;t=t.slice(),e=g(e);for(var r=e.next(),u={};!r.done;u={Dg:void 0},r=e.next()){if(u.Dg=r.value,r=t.findIndex(function(c){return function(f){return n(c.Dg,f)}}(u)),r==-1)return!1;t[r]=t[t.length-1],t.pop()}return t.length==0}function fn(e,t,n){if(n||(n=zn),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Xe(e,t,n){var r=Ye.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}Xe.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},ne("shaka.util.Error",Xe),Xe.Severity={RECOVERABLE:1,CRITICAL:2},Xe.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Xe.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:4001};function Un(e){this.h=e,this.g=void 0}Un.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function fr(e,t){return e.length&&t.length&&e!==t?0<Ir(e,t).length:!0}function Ir(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=g(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=g(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.keySystem==c.keySystem){u=new Map;for(var f=g((r.initData||[]).concat(c.initData||[])),h=f.next();!h.done;h=f.next())h=h.value,u.set(h.keyId,h);u=Array.from(u.values()),f=r.keyIds&&c.keyIds?new Set([].concat(T(r.keyIds),T(c.keyIds))):r.keyIds||c.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||c.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||c.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||c.persistentStateRequired,videoRobustness:r.videoRobustness||c.videoRobustness,audioRobustness:r.audioRobustness||c.audioRobustness,serverCertificate:r.serverCertificate||c.serverCertificate,serverCertificateUri:r.serverCertificateUri||c.serverCertificateUri,initData:u,keyIds:f});break}}return n}function Vr(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}var er=new Un(function(){return Ni(new Uint8Array([0]))}),dn=new Map;function vn(e){this.h=e,this.g=null}vn.prototype.Z=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){m.clearTimeout(r),n=!1},r=m.setTimeout(function(){n&&t.h()},1e3*e),this},vn.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function on(e){this.h=e,this.g=null}on.prototype.wc=function(){return this.stop(),this.h(),this},on.prototype.Z=function(e){var t=this;return this.stop(),this.g=new vn(function(){t.h()}).Z(e),this},on.prototype.Ra=function(e){var t=this;return this.stop(),this.g=new vn(function(){t.g.Z(e),t.h()}).Z(e),this},on.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},ne("shaka.util.Timer",on),on.prototype.stop=on.prototype.stop,on.prototype.tickEvery=on.prototype.Ra,on.prototype.tickAfter=on.prototype.Z,on.prototype.tickNow=on.prototype.wc;function tr(){var e=m.ManagedMediaSource||m.MediaSource;return!!(e&&e.isTypeSupported)}function ur(e){return ir().canPlayType(e)!=""}function xr(){return!!navigator.userAgent.match(/Edge?\//)}function Rr(){return sn("Xbox One")}function di(){return sn("Tizen")}function Ui(){return sn("Tizen 3")}function ni(){return sn("Tizen 2")}function li(){return sn("Web0S")}function vi(){return li()&&vs()===38}function ri(){return sn("CrKey")}function vs(){if(!sn("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function Ao(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!di()&&!sn("PC=EOS")&&!sn("PC=APL")&&!sn("VirginMedia")&&!vu()&&!Ri()&&!sn("AFT")&&!sn("WPE")&&!sn("DT_STB_BCM")}function Yo(){return sn("PlayStation 5")}function Ri(){return sn("PlayStation 4")}function Zu(){return sn("Hisense")||sn("VIDAA")}function vu(){return sn("SOPOpenBrowser")}function Zs(){if(!Ao())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Rl(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("windows"):!1}function qu(){return sn("Android")}function Gu(){return!!(di()||li()||Rr()||Ri()||Yo()||sn("AFT")||sn("PC=EOS")||sn("PC=APL")||sn("VirginMedia")||vu()||sn("WPE")||ri()||Zu()||sn("DT_STB_BCM"))}function sn(e){return(navigator.userAgent||"").includes(e)}function ir(){return Ii||(Wr||(Wr=new on(function(){Ii=null})),(Ii=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Ii=document.createElement("video")),Wr.Z(1),Ii)}function Tr(e){return e?e===m.shakaMediaKeysPolyfill:!!m.shakaMediaKeysPolyfill}function Ai(){var e,t,n,r,u,c,f,h,v,S,R,B,z,J,fe;return Re(function(he){switch(he.g){case 1:if(e={width:1/0,height:1/0},ri()){if(B=m.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,ce(he,15),!(z=B)){he.u(17);break}return C(he,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),18)}if(di()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch(Ee){Ke("Tizen: Error detecting screen size, default screen size 1920x1080.")}he.u(3);break}if(Rr()){e.width=1920,e.height=1080;try{n=void 0,n=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows,r=new n.Media.Protection.ProtectionCapabilities,u=n.Media.Protection.ProtectionCapabilityResult,c=null;do c=r.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(c===u.maybe);c===u.probably&&(e.width=3840,e.height=2160)}catch(Ee){Ke("Xbox: Error detecting screen size, default screen size 1920x1080.")}he.u(3);break}if(li()){try{f=JSON.parse(m.PalmSystem.deviceInfo),e.width=Math.max(1920,f.screenWidth),e.height=Math.max(1080,f.screenHeight)}catch(Ee){Ke("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}he.u(3);break}if(Zu()){m.Hisense_Get4KSupportState&&m.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),he.u(3);break}if(!Ri()&&!Yo()){he.u(3);break}return h=!1,ce(he,9),C(he,m.msdk.device.getDisplayInfo(),11);case 11:v=he.h,h=v.resolution==="4K",me(he,10);break;case 9:return be(he),ce(he,12),C(he,m.msdk.device.getDisplayInfoImmediate(),14);case 14:S=he.h,h=S.resolution==="4K",me(he,10);break;case 12:R=be(he),Ke("PlayStation: Failed to get the display info:",R);case 10:h?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),he.u(3);break;case 18:z=he.h;case 17:if(z){e.width=3840,e.height=2160,he.u(19);break}if(!(J=B)){he.u(20);break}return C(he,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),21);case 21:J=he.h;case 20:J&&(e.width=1920,e.height=1080);case 19:me(he,3);break;case 15:fe=be(he),pe("Failed to check canDisplayType:",fe);case 3:return he.return(e)}})}var Wr=null,Ii=null;function Kr(){}function br(e){if(!e)return"";if(e=nr(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),m.TextDecoder&&!Ri())return e=new TextDecoder().decode(e),e.includes("")&&pe('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):r=e[n],65535>=r)t+=String.fromCharCode(r);else{r-=65536;var u=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+u)}}return t}function ci(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new Xe(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=ln(e);for(var u=0;u<n;u++)r[u]=e.getUint16(2*u,t);return oa(r)}function Br(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=nr(e);if(n[0]==239&&n[1]==187&&n[2]==191)return br(n);if(n[0]==254&&n[1]==255)return ci(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return ci(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return ci(e,!1);if(n[1]==0&&n[3]==0)return ci(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return br(e);throw new Xe(2,2,2003)}function Ci(e){if(m.TextEncoder&&!Ri()){var t=new TextEncoder;return Ni(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Ni(t)}function yo(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),u=0;u<e.length;++u)r.setUint16(2*u,e.charCodeAt(u),t);return n}function oa(e){return Ta.value()(e)}function yi(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return u[1]=="#"?(u=u[2]=="x"||u[2]=="X"?parseInt(u.substring(3),16):parseInt(u.substring(2),10),0<=u&&1114111>=u?String.fromCodePoint(u):""):t[u]||"'"}):e||""}ne("shaka.util.StringUtils",Kr),Kr.resetFromCharCode=function(){Ta.g=void 0},Kr.toUTF16=yo,Kr.toUTF8=Ci,Kr.fromBytesAutoDetect=Br,Kr.fromUTF16=ci,Kr.fromUTF8=br;var Ta=new Un(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch(u){return!1}}for(var t={dc:65536};0<t.dc;t={dc:t.dc},t.dc/=2)if(e(t.dc))return function(n){return function(r){for(var u="",c=0;c<r.length;c+=n.dc)u+=String.fromCharCode.apply(null,r.subarray(c,c+n.dc));return u}}(t);return null});function aa(e){this.h=e||"",this.g=0}function ys(e){Sa(e,/[ \t]+/gm)}function Sa(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function wa(e){return e.g==e.h.length?null:(e=Sa(e,/[^ \t\n]*/gm))?e[0]:null}function yu(e){if(e=Sa(e,Ah),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function Eu(e){return e?yu(new aa(e)):null}var Ah=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Aa(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer instanceof ArrayBuffer)return r;if(n.has(r))return null;var u=r.constructor==Array;if(r.constructor!=Object&&!u)return null;n.add(r);var c=u?[]:{},f;for(f in r)c[f]=t(r[f]);return u&&(c.length=r.length),c}}var n=new WeakSet;return t(e)}function Es(e){var t={},n;for(n in e)t[n]=e[n];return t}function _u(e,t){var n=n===void 0?!1:n;return e=Br(e),Tu(e,t,n)}function Tu(e,t,n){return e=mf(e,n===void 0?!1:n),!t&&e.length?e[0]:(e=e.find(function(r){return t.split(",").includes(r.tagName)}))?e:null}function Hu(e){return Nh.has(e)?Nh.get(e):""}function mf(e,t){function n(c,f){f=f===void 0?!1:f;for(var h=[];e[u];)if(e.charCodeAt(u)==60){if(e.charCodeAt(u+1)===47){f=u+2,u=e.indexOf(">",u),f=e.substring(f,u);var v=f.indexOf(c);if(v==-1){var S=c.indexOf(".");0<S&&(v=f.indexOf(c.substring(0,S)))}if(v==-1)throw c=e.substring(0,u).split("\n"),Error("Unexpected close tag\nLine: "+(c.length-1)+"\nColumn: "+(c[c.length-1].length+1)+"\nChar: "+e[u]);u+1&&(u+=1);break}else if(e.charCodeAt(u+1)===33){if(e.charCodeAt(u+2)==45){for(;u!==-1&&(e.charCodeAt(u)!==62||e.charCodeAt(u-1)!=45||e.charCodeAt(u-2)!=45||u==-1);)u=e.indexOf(">",u+1);u===-1&&(u=e.length)}else if(e.charCodeAt(u+2)===91&&e.charCodeAt(u+8)===91&&e.substr(u+3,5).toLowerCase()==="cdata"){v=e.indexOf("]]>",u),v==-1?(h.push(e.substr(u+9)),u=e.length):(h.push(e.substring(u+9,v)),u=v+3);continue}u++;continue}e:{S=f,u++;var R=r(),B={};for(v=[];e.charCodeAt(u)!==62&&e[u];){var z=e.charCodeAt(u);if(64<z&&91>z||96<z&&123>z){z=r();for(var J=e.charCodeAt(u);J&&J!==39&&J!==34&&!(64<J&&91>J||96<J&&123>J)&&J!==62;)u++,J=e.charCodeAt(u);var fe=u+1;if(u=e.indexOf(e[u],fe),fe=e.slice(fe,u),J===39||J===34){if(u===-1){if(S={tagName:R,attributes:B,children:v,parent:null},t)for(R=0;R<v.length;R++)typeof v[R]!="string"&&(v[R].parent=S);v=S;break e}}else fe=null,u--;if(z.startsWith("xmlns:")){J=fe;var he=z.split(":")[1];Nh.set(J,he),_f.set(he,J)}R==="tt"&&z==="xml:space"&&fe==="preserve"&&(S=!0),B[z]=fe}u++}for(e.charCodeAt(u-1)!==47?(u++,v=n(R,S)):u++,S={tagName:R,attributes:B,children:v,parent:null},R=v.length,B=0;B<R;B++)z=v[B],typeof z!="string"?t&&(z.parent=S):B==R-1&&z=="\n"&&v.pop();v=S}if(h.push(v),typeof v=="string")break;v.tagName[0]==="?"&&v.children&&(h.push.apply(h,T(v.children)),v.children=[])}else v=u,u=e.indexOf("<",u)-1,u===-2&&(u=e.length),v=e.slice(v,u+1),f?0<v.length&&h.push(v):(h.length&&v.length==1&&v[0]=="\n"||0<v.trim().length)&&h.push(v),u++;return h}function r(){for(var c=u;"\r\n	>/= ".indexOf(e[u])===-1&&e[u];)u++;return e.slice(c,u)}var u=0;return n("")}function qs(e){return typeof e=="string"}function vf(e){var t=[];if(!e.children)return[];e=g(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function sr(e,t){var n=[];if(!e.children)return[];e=g(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function ei(e){return typeof e=="string"?yi(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:yi(e))}function Io(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=ei(e))&&(e=e.trim()),e):null}function Eo(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=g(e.children);for(var r=e.next();!r.done;r=e.next())Eo(r.value,t,n)}return n}function Hi(e,t){return e=sr(e,t),e.length!=1?null:e[0]}function Vi(e,t,n){return e=yc(e,t,n),e.length!=1?null:e[0]}function Er(e,t,n,r){r=r===void 0?null:r;var u=null;return e=e.attributes[t],e!=null&&(u=n(e)),u==null?r:u}function Po(e,t,n){return t=Hu(t),e.attributes[t+":"+n]||null}function yc(e,t,n){t=Hu(t);var r=[];if(e.children){e=g(e.children);for(var u=e.next();!u.done;u=e.next())(u=u.value)&&u.tagName===t+":"+n&&r.push(u)}return r}function Ka(e,t,n){t=g(t);for(var r=t.next();!r.done;r=t.next())if(r=Po(e,r.value,n))return r;return null}function _s(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Ia(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function yf(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Ec(e){return e=Number(e),e%1===0?e:null}function Gs(e){return e=Number(e),e%1===0&&0<e?e:null}function lo(e){return e=Number(e),e%1===0&&0<=e?e:null}function Ef(e){return e=Number(e),isNaN(e)?null:e}function Hs(e){return e?e.toLowerCase()==="true":!1}function Ih(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function _c(e){var t=[];e=yi(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=g(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=n.match(/^([\w]+)/);if(r){var u=n.match(/(@id='(.*?)')/),c=n.match(/(@t='(\d+)')/),f=n.match(/(@n='(\d+)')/),h=n.match(/\[(\d+)\]/);t.push({name:r[0],id:u?u[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:c?Number(c[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:f?Number(f[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:h?Number(h[1])-1:null,Tb:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Tb=n.slice(1))}return t}function Ch(e,t){var n=_c(t.attributes.sel||"");if(n.length){var r=n[n.length-1],u=t.attributes.pos||null;n=r.position,n==null&&(r.t!==null&&(n=bh(e,"t",r.t)),r.n!==null&&(n=bh(e,"n",r.n))),n===null?n=u==="prepend"?0:e.length:u==="prepend"?--n:u==="after"&&++n,u=t.tagName,(r=r.Tb)&&e[n]?fm(e[n],u,r,Io(t)||""):(u!=="remove"&&u!=="replace"||e.splice(n,1),u!=="add"&&u!=="replace"||e.splice.apply(e,[n,0].concat(T(t.children))))}}function bh(e,t,n){var r=0;e=g(e);for(var u=e.next();!u.done;u=e.next()){if(Number(u.value.attributes[t])===n)return r;r++}return null}function fm(e,t,n,r){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=r)}function Rh(e){var t="",n=e.tagName.split(":");0<n.length&&(t=n[0],t=_f.has(t)?_f.get(t):""),t=document.createElementNS(t,e.tagName);for(var r in e.attributes)t.setAttribute(r,e.attributes[r]);for(e=g(e.children),r=e.next();!r.done;r=e.next())r=r.value,n=void 0,typeof r=="string"?n=new Text(r):n=Rh(r),t.appendChild(n);return t}function xh(e){if(!e)return null;var t={tagName:e.tagName,attributes:Es(e.attributes),children:[],parent:null};e=g(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n=="string"||(n=xh(n),n.parent=t),t.children.push(n);return t}var Nh=new Map,_f=new Map;function jr(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Yt,this.position=null,this.positionAlign=Af,this.size=0,this.textAlign=Ca,this.direction=Ml,this.writingMode=Vu,this.lineInterpretation=Dl,this.line=null,this.lineHeight="",this.lineAlign=Ku,this.displayAlign=Nl,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=gm,this.fontStyle=Ph,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={ic:32,rows:15}}function Mh(e,t){return e=new jr(e,t,""),e.lineBreak=!0,e}jr.prototype.clone=function(){var e=new jr(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function Tf(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!fn(e.nestedCues,t.nestedCues,Tf))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!fn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}function Sf(e,t){t=t===void 0?new Map:t;var n=e.payload;if(n.includes("<")){t.size===0&&Tc(t);var r=n;n=[];for(var u=-1,c=0;c<r.length;c++)r[c]==="<"?u=c+1:r[c]===">"&&0<u&&(u=r.substr(u,c-u),u.match(Rf)&&n.push(u),u=-1);for(n=g(n),c=n.next();!c.done;c=n.next())c=c.value,r=r.replace("<"+c+">",'<div time="'+c+'">'),r+="</div>";e:{c=r,u=[];var f=-1;n="",r=!1;for(var h=0;h<c.length;h++)if(c[h]==="/"){var v=c.indexOf(">",h);if(v===-1){n=c;break e}if((v=c.substring(h+1,v))&&v=="v"){r=!0;var S=null;if(u.length&&(S=u[u.length-1]),S){if(S===v)n+="/"+v+">";else{if(!S.startsWith("v")){n+=c[h];continue}n+="/"+S+">"}h+=v.length+1}else n+=c[h]}else n+=c[h]}else c[h]==="<"?(f=h+1,c[f]!="v"&&(f=-1)):c[h]===">"&&0<f&&(u.push(c.substr(f,h-f)),f=-1),n+=c[h];for(c=g(u),u=c.next();!u.done;u=c.next())u=u.value,f=u.replace(" ",".voice-"),n=n.replace("<"+u+">","<"+f+">"),n=n.replace("</"+u+">","</"+f+">"),r||(n+="</"+f+">")}n=dm(n),e.payload="";try{var R=Tu("<span>"+n+"</span>","span")}catch(B){}if(R)if(R=R.children,R.length!=1||R[0].tagName)for(R=g(R),n=R.next();!n.done;n=R.next())wf(n.value,e,t);else e.payload=yi(n);else e.payload=yi(n)}else e.payload=yi(n)}function Tc(e){for(var t=g(Object.entries(pm)),n=t.next();!n.done;n=t.next()){var r=g(n.value);n=r.next().value,r=r.next().value;var u=new jr(0,0,"");u.color=r,e.set("."+n,u)}for(t=g(Object.entries(Dh)),n=t.next();!n.done;n=t.next())r=g(n.value),n=r.next().value,r=r.next().value,u=new jr(0,0,""),u.backgroundColor=r,e.set("."+n,u)}function dm(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||""}):e||""}function wf(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Yt,r.position=null,r.size=0,e.tagName)for(var u=g(e.tagName.split(/(?=[ .])+/g)),c=u.next();!c.done;c=u.next()){var f=c=c.value;if(f.startsWith(".voice-")){var h=f.split("-").pop();f='v[voice="'+h+'"]',n.has(f)||(f="v[voice="+h+"]")}switch(n.has(f)&&(h=r,f=n.get(f))&&(h.backgroundColor=xl(f.backgroundColor,h.backgroundColor),h.color=xl(f.color,h.color),h.fontFamily=xl(f.fontFamily,h.fontFamily),h.fontSize=xl(f.fontSize,h.fontSize),h.textShadow=xl(f.textShadow,h.textShadow),h.fontWeight=f.fontWeight,h.fontStyle=f.fontStyle,h.opacity=f.opacity,h.rubyTag=f.rubyTag,h.textCombineUpright=f.textCombineUpright,h.wrapLine=f.wrapLine),c){case"br":r=Mh(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=zu;break;case"i":r.fontStyle=Su;break;case"u":r.textDecoration.push(Vs);break;case"font":(c=e.attributes.color)&&(r.color=c);break;case"div":if(c=e.attributes.time,!c)break;(c=Eu(c))&&(r.startTime=c);break;case"ruby":case"rp":case"rt":r.rubyTag=c}}if(u=e.children,qs(e)||u.length==1&&qs(u[0]))for(n=ei(e).split("\n"),e=!0,n=g(n),u=n.next();!u.done;u=n.next())u=u.value,e||(e=Mh(r.startTime,r.endTime),t.nestedCues.push(e)),0<u.length&&(e=r.clone(),e.payload=yi(u),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=g(u),e=t.next();!e.done;e=t.next())wf(e.value,r,n)}function xl(e,t){return e&&0<e.length?e:t}ne("shaka.text.Cue",jr),jr.parseCuePayload=Sf,jr.equal=Tf,jr.prototype.clone=jr.prototype.clone;var Af="auto";jr.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Af};var Ca="center",If={LEFT:"left",RIGHT:"right",CENTER:Ca,START:"start",END:"end"};jr.textAlign=If;var Nl="after",hm={BEFORE:"before",CENTER:"center",AFTER:Nl};jr.displayAlign=hm;var Ml="ltr";jr.direction={HORIZONTAL_LEFT_TO_RIGHT:Ml,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Vu="horizontal-tb";jr.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Vu,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Dl=0;jr.lineInterpretation={LINE_NUMBER:Dl,PERCENTAGE:1};var Ku="start",Cf={CENTER:"center",START:Ku,END:"end"};jr.lineAlign=Cf;var pm={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};jr.defaultTextColor=pm;var Dh={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};jr.defaultTextBackgroundColor=Dh;var gm=400,zu=700;jr.fontWeight={NORMAL:gm,BOLD:zu};var Ph="normal",Su="italic",bf={NORMAL:Ph,ITALIC:Su,OBLIQUE:"oblique"};jr.fontStyle=bf;var Vs="underline";jr.textDecoration={UNDERLINE:Vs,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var Rf=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Ks(){}Ks.prototype.destroy=function(){};function Ts(e,t,n){xf[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,fe:t}}function wu(e,t){for(var n=e.toLowerCase().split(";")[0],r=g([Pl,Oh,Nf,sa]),u=r.next();!u.done;u=r.next())if(u=xf[n+"-"+u.value]){var c=u.fe(),f=c.isSupported(e,t);if(c.destroy(),f)return u.fe}return null}ne("shaka.transmuxer.TransmuxerEngine",Ks),Ks.findTransmuxer=wu,Ks.unregisterTransmuxer=function(e,t){delete xf[e.toLowerCase().split(";")[0]+"-"+t]},Ks.registerTransmuxer=Ts,Ks.prototype.destroy=Ks.prototype.destroy;var xf={},sa=1,Nf=2,Oh=3,Pl=4;Ks.PluginPriority={FALLBACK:sa,PREFERRED_SECONDARY:Nf,PREFERRED:Oh,APPLICATION:Pl};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var mm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Ei(e){var t;e instanceof Ei?(Mf(this,e.Bb),this.xc=e.xc,Au(this,e.Db),Sc(this,e.Oc),this.Pa=e.Pa,$r(this,e.g.clone()),this.jc=e.jc):e&&(t=String(e).match(mm))?(Mf(this,t[1]||"",!0),this.xc=Yu(t[2]||""),Au(this,t[3]||"",!0),Sc(this,t[4]),this.Pa=Yu(t[5]||"",!0),$r(this,t[6]||"",!0),this.jc=Yu(t[7]||"")):this.g=new Wu(null)}p=Ei.prototype,p.Bb="",p.xc="",p.Db="",p.Oc=null,p.Pa="",p.jc="",p.toString=function(){var e=[],t=this.Bb;if(t&&e.push(wc(t,vm,!0),":"),t=this.Db){e.push("//");var n=this.xc;n&&e.push(wc(n,vm,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Oc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.Db&&t.charAt(0)!="/"&&e.push("/"),e.push(wc(t,t.charAt(0)=="/"?kh:Lh,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.jc)&&e.push("#",wc(t,Pf)),e.join("")},p.resolve=function(e){var t=this.clone();t.Bb==="data"&&(t=new Ei);var n=!!e.Bb;n?Mf(t,e.Bb):n=!!e.xc,n?t.xc=e.xc:n=!!e.Db,n?Au(t,e.Db):n=e.Oc!=null;var r=e.Pa;if(n)Sc(t,e.Oc);else if(n=!!e.Pa){if(r.charAt(0)!="/")if(this.Db&&!this.Pa)r="/"+r;else{var u=t.Pa.lastIndexOf("/");u!=-1&&(r=t.Pa.substr(0,u+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){u=r.lastIndexOf("/",0)==0,r=r.split("/");for(var c=[],f=0;f<r.length;){var h=r[f++];h=="."?u&&f==r.length&&c.push(""):h==".."?((1<c.length||c.length==1&&c[0]!="")&&c.pop(),u&&f==r.length&&c.push("")):(c.push(h),u=!0)}r=c.join("/")}}return n?t.Pa=r:n=e.g.toString()!=="",n?$r(t,e.g.clone()):n=!!e.jc,n&&(t.jc=e.jc),t},p.clone=function(){return new Ei(this)};function Mf(e,t,n){e.Bb=n?Yu(t,!0):t,e.Bb&&(e.Bb=e.Bb.replace(/:$/,""))}function Au(e,t,n){e.Db=n?Yu(t,!0):t}function Sc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Oc=t}else e.Oc=null}function $r(e,t,n){t instanceof Wu?e.g=t:(n||(t=wc(t,PE)),e.g=new Wu(t))}function Yu(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function wc(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Df),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Df(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var vm=/[#\/\?@]/g,Lh=/[#\?:]/g,kh=/[#\?]/g,PE=/[#\?@]/g,Pf=/#/g;function Wu(e){this.g=e||null}function Of(e){if(!e.Ka&&(e.Ka={},e.Yc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),u=null;if(0<=r){var c=t[n].substring(0,r);u=t[n].substring(r+1)}else c=t[n];c=decodeURIComponent(c.replace(/\+/g," ")),u=u||"",e.add(c,decodeURIComponent(u.replace(/\+/g," ")))}}p=Wu.prototype,p.Ka=null,p.Yc=null;function Lf(e){return Of(e),e.Yc}p.add=function(e,t){Of(this),this.g=null;var n=this.Ka.hasOwnProperty(e)?this.Ka[e]:null;return n||(this.Ka[e]=n=[]),n.push(t),this.Yc++,this},p.set=function(e,t){return Of(this),this.g=null,this.Ka.hasOwnProperty(e)?this.Ka[e]=[t]:this.add(e,t),this},p.get=function(e){return Of(this),this.Ka[e]||[]},p.toString=function(){if(this.g)return this.g;if(!this.Ka)return"";var e=[],t;for(t in this.Ka)for(var n=encodeURIComponent(t),r=this.Ka[t],u=0;u<r.length;u++){var c=n;r[u]!==""&&(c+="="+encodeURIComponent(r[u])),e.push(c)}return this.g=e.join("&")},p.clone=function(){var e=new Wu;if(e.g=this.g,this.Ka){var t={},n;for(n in this.Ka)t[n]=this.Ka[n].concat();e.Ka=t,e.Yc=this.Yc}return e};function co(){}function Fh(e){return e=oa(nr(e)),btoa(e)}function Ss(e,t){return t=t==null?!0:t,e=Fh(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Wo(e){e=m.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function $u(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=m.parseInt(e.substr(2*r,2),16);return n}function za(e){var t=nr(e);e="",t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function hi(){for(var e=Ye.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var u=e[r];u instanceof Uint8Array?t.set(u,n):t.set(nr(u),n),n+=u.byteLength}return t}ne("shaka.util.Uint8ArrayUtils",co),co.concat=hi,co.toHex=za,co.fromHex=$u,co.fromBase64=Wo,co.toBase64=Ss,co.toStandardBase64=Fh;function Ki(e,t,n){if(n=n===void 0?"":n,t.length==0)return e;if(e.length==1&&t.length==1){var r=new Ei(e[0]);return t=new Ei(t[0]),t=r.resolve(t),n&&$r(t,n),[t.toString()]}t=t.map(function(h){return new Ei(h)}),r=[],e=g(e);for(var u=e.next();!u.done;u=e.next()){u=new Ei(u.value);for(var c=g(t),f=c.next();!f.done;f=c.next())f=u.resolve(f.value),n&&$r(f,n),r.push(f.toString())}return r}function ws(e,t,n,r){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},r&&(e.keySystemUris=new Set([r])),e}function ym(e,t){t=t===void 0?"cenc":t;var n=[],r=[],u=[];e.forEach(function(f,h){var v=h;v.length!=22&&(v=Ss($u(h),!1));var S=f;S.length!=22&&(S=Ss($u(f),!1)),f={kty:"oct",kid:v,k:S},n.push(f),r.push(f.kid),u.push(h)}),e=JSON.stringify({keys:n});var c=JSON.stringify({kids:r});return c=[{initData:nr(Ci(c)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+m.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:c,keyIds:new Set(u)}}function Ol(e,t){if(t.length==1)return t[0];if(e=Co(e,t),e!=null)return e;throw new Xe(2,4,4025,t)}function Co(e,t){for(var n=g(Em[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var u=g(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.test(c.trim()))return c.trim()}return e==_r?"":null}function Xu(e,t){var n=[];e=g(Em[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=g(t),c=u.next();!c.done;c=u.next())c=c.value,r.test(c.trim())&&n.push(c.trim())}return n}var _r="text",Mi={ja:"video",Y:"audio",wa:_r,De:"image",ej:"application"},kf=1/15,Em={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Uh(){}function Di(e,t){var n=e;return t&&!Iu.includes(e)&&(n+='; codecs="'+t+'"'),n}function Qu(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Ya(e,t,n){var r=Di(e,t);return t=Qu(e,t),wu(t)?(e=wu(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function Bh(e,t,n){var r=[t];return Uf.forEach(function(u,c){var f=e[c];c=="codecs"?Iu.includes(e.mimeType)||r.push('codecs="'+n+'"'):f&&r.push(u+'="'+f+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function Ll(e){return e.split(";")[0].split("/")[1]}function _o(e){var t=_m(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function zs(e){var t=[];e=g(e.split(","));for(var n=e.next();!n.done;n=e.next())n=_m(n.value),t.push(n[0]);return t.sort().join(",")}function ba(e){return e.split(";")[0]}function Oo(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Ff(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function _m(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}ne("shaka.util.MimeUtils",Uh),Uh.getFullTypeWithAllCodecs=Qu,Uh.getFullType=Di;var Uf=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Iu=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function As(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function Ac(e){return _i[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!Ot:!1}As.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function Tm(e,t,n,r,u){var c,f,h,v,S,R,B;return Re(function(z){if(z.g==1)return C(z,Promise.resolve(),2);if(!e.i||!e.j)return z.return();if(n==null||r==null)return e.i.parseInit(nr(t)),z.return();for(c=e.B?n:e.s,f={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:c},h=e.i.parseMedia(nr(t),f,u,[]),v=g(h),S=v.next();!S.done;S=v.next())R=S.value,e.A(R,u||null,f);B=h.filter(function(J){return J.startTime>=e.l&&J.startTime<e.m}),e.j.append(B),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),X(z)})}As.prototype.remove=function(e,t){var n=this;return Re(function(r){if(r.g==1)return C(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),X(r)})};function OE(e,t,n){e.l=t,e.m=n}function jh(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=g(t.keys()),u=r.next();!u.done;u=r.next())(u=t.get(u.value).filter(function(c){return c.endTime<=n}))&&e.j.append(u)}function Sm(e,t,n){t.startTime+=n,t.endTime+=n,t=g(t.nestedCues);for(var r=t.next();!r.done;r=t.next())Sm(e,r.value,n)}function wm(e,t,n,r,u){var c=n+" "+r,f=new Map;t=g(t);for(var h=t.next();!h.done;h=t.next()){var v=h.value;h=v.stream,v=v.cue,f.has(h)||f.set(h,new Map),f.get(h).has(c)||f.get(h).set(c,[]),Sm(e,v,u),v.startTime>=e.l&&v.startTime<e.m&&(f.get(h).get(c).push(v),h==e.C&&e.j.append([v]))}for(u=g(f.keys()),c=u.next();!c.done;c=u.next())for(c=c.value,e.o.has(c)||e.o.set(c,new Map),t=g(f.get(c).keys()),h=t.next();!h.done;h=t.next())h=h.value,v=f.get(c).get(h),e.o.get(c).set(h,v);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}ne("shaka.text.TextEngine",As),As.prototype.destroy=As.prototype.destroy,As.findParser=function(e){return _i[e]},As.unregisterParser=function(e){delete _i[e]},As.registerParser=function(e,t){_i[e]=t};var _i={};function LE(e,t){return e.concat(t)}function Am(){}function Ys(e){return e!=null}function Ra(){}function Ju(e,t){return e=Or(e),t=Or(t),e.split("-")[0]==t.split("-")[0]}function Ic(e,t){return e=Or(e),t=Or(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Cc(e,t){return e=Or(e),t=Or(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Or(e){e=g(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=g(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Rc.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function el(e,t){return e=Or(e),t=Or(t),t==e?4:Ic(t,e)?3:Cc(t,e)?2:Ic(e,t)?1:0}function Zh(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=Rc.get(e)||e}function Bf(e){return e.language?Or(e.language):e.audio&&e.audio.language?Or(e.audio.language):e.video&&e.video.language?Or(e.video.language):"und"}function bc(e,t){e=Or(e);var n=new Set;t=g(t);for(var r=t.next();!r.done;r=t.next())n.add(Or(r.value));for(t=g(n),r=t.next();!r.done;r=t.next())if(r=r.value,r==e)return r;for(t=g(n),r=t.next();!r.done;r=t.next())if(r=r.value,Ic(r,e))return r;for(t=g(n),r=t.next();!r.done;r=t.next())if(r=r.value,Cc(r,e))return r;for(n=g(n),t=n.next();!t.done;t=n.next())if(t=t.value,Ic(e,t))return t;return null}ne("shaka.util.LanguageUtils",Ra),Ra.findClosestLocale=bc,Ra.getLocaleForVariant=Bf,Ra.getLocaleForText=function(e){return Or(e.language||"und")},Ra.getBase=Zh,Ra.relatedness=el,Ra.areSiblings=function(e,t){var n=Zh(e),r=Zh(t);return e!=n&&t!=r&&n==r},Ra.normalize=Or,Ra.isSiblingOf=Cc,Ra.isParentOf=Ic,Ra.areLanguageCompatible=Ju,Ra.areLocaleCompatible=function(e,t){return e=Or(e),t=Or(t),e==t};var Rc=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function qh(){}function Im(e,t,n,r){var u=e.variants;if((t.length||n.length)&&(u=Cm(u,t,n)),r.length){for(t=new _t,u=g(u),n=u.next();!n.done;n=u.next())n=n.value,t.push(String(n.video.width||0),n);var c=[];t.forEach(function(he,Ee){he=0;var Le=[];Ee=g(Ee);for(var Fe=Ee.next(),it={};!Fe.done;it={xe:void 0},Fe=Ee.next())it.xe=Fe.value,Fe=r.filter(function(Ue){return function(Qe){return Ue.xe.decodingInfos[0][Qe]}}(it)).length,Fe>he?(he=Fe,Le=[it.xe]):Fe==he&&Le.push(it.xe);c.push.apply(c,T(Le))}),u=c}n=new Set,t=new Set,u=g(u);for(var f=u.next();!f.done;f=u.next())f=f.value,f.audio&&n.add(f.audio),f.video&&t.add(f.video);n=Array.from(n).sort(function(he,Ee){return he.bandwidth-Ee.bandwidth});var h=[];for(u=new Map,n=g(n),f=n.next();!f.done;f=n.next()){f=f.value;var v=f.language+(f.channelsCount||0)+(f.audioSamplingRate||0)+f.roles.join(",")+f.label+f.groupId+f.fastSwitching,S=u.get(v)||[];if(S.length){var R=S[S.length-1],B=_o(R.codecs),z=_o(f.codecs);B!=z||f.bandwidth&&R.bandwidth&&!(f.bandwidth>R.bandwidth)||(S.push(f),h.push(f.id))}else S.push(f),h.push(f.id);u.set(v,S)}var J={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,av01:.75,"dovi-av1":.7,vvc:.65};n=Array.from(t).sort(function(he,Ee){if(!he.bandwidth||!Ee.bandwidth||he.bandwidth==Ee.bandwidth){if(he.codecs&&Ee.codecs&&he.codecs!=Ee.codecs&&he.width==Ee.width){var Le=_o(he.codecs),Fe=_o(Ee.codecs);if(Le!=Fe)return(J[Le]||1)-(J[Fe]||1)}return he.width-Ee.width}return he.bandwidth-Ee.bandwidth}),t=Gn();var fe=[];for(u=new Map,n=g(n),f=n.next();!f.done;f=n.next()){if(f=f.value,v=Math.round(f.frameRate||0)+(f.hdr||"")+f.fastSwitching,S=u.get(v)||[],S.length){if(R=S[S.length-1],!t&&(B=_o(R.codecs),z=_o(f.codecs),B!==z))continue;f.width>R.width||f.height>R.height?(S.push(f),fe.push(f.id)):f.width==R.width&&f.height==R.height&&(B=_o(R.codecs),z=_o(f.codecs),B!=z||f.bandwidth&&R.bandwidth&&!(f.bandwidth>R.bandwidth)||(S.push(f),fe.push(f.id)))}else S.push(f),fe.push(f.id);u.set(v,S)}e.variants=e.variants.filter(function(he){var Ee=he.audio;return he=he.video,!(Ee&&!h.includes(Ee.id)||he&&!fe.includes(he.id))})}function Cm(e,t,n){t=g(t);for(var r=t.next(),u={};!r.done;u={mh:void 0},r=t.next())if(u.mh=r.value,r=e.filter(function(c){return function(f){return f.video&&f.video.codecs.startsWith(c.mh)}}(u)),r.length){e=r;break}for(n=g(n),t=n.next(),r={};!t.done;r={fg:void 0},t=n.next())if(r.fg=t.value,t=e.filter(function(c){return function(f){return f.audio&&f.audio.codecs.startsWith(c.fg)}}(r)),t.length){e=t;break}return e}function kE(e,t,n){e.variants=e.variants.filter(function(r){return xc(r,t,n)})}function xc(e,t,n){function r(h,v,S){return h>=v&&h<=S}var u=e.video;if(u&&u.width&&u.height){var c=u.width,f=u.height;if(f>c&&(f=g([f,c]),c=f.next().value,f=f.next().value),!r(c,t.minWidth,Math.min(t.maxWidth,n.width))||!r(f,t.minHeight,Math.min(t.maxHeight,n.height))||!r(u.width*u.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function FE(e,t,n){return n=n===void 0?[]:n,Re(function(r){return r.g==1?C(r,jf(e,t,0<t.offlineSessionIds.length,n),2):(xm(t),C(r,Nm(t),0))})}function jf(e,t,n,r){var u,c;return Re(function(f){if(f.g==1)return Rr()&&Gh(t.variants),C(f,Rm(t.variants,n,!1,r),2);u=null,e&&(c=e.g)&&(u=c.keySystem),t.variants=t.variants.filter(function(h){var v=UE(h,u);if(!v){var S=[];h.audio&&S.push(Kf(h.audio)),h.video&&S.push(Kf(h.video))}return v}),X(f)})}function Gh(e){var t={dvav:"avc3",dva1:"avc1",dvhe:"hev1",dvh1:"hvc1",dvc1:"vvc1",dvi1:"vvi1"},n=new Set;e=g(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&n.add(r.video);for(n=g(n),e=n.next();!e.done;e=n.next()){e=e.value,r=g(Object.keys(t));for(var u=r.next();!u.done;u=r.next())if(u=u.value,e.codecs.includes(u)){e.codecs=e.codecs.replace(u,t[u]);break}}}function UE(e,t){var n=Rr(),r=sn("Firefox")&&qu(),u=e.video,c=u&&u.width||0,f=u&&u.height||0;if(n&&u&&(1920<c||1080<f)&&(u.codecs.includes("avc1.")||u.codecs.includes("avc3.")))return!1;if(u){if(n=Is(u.codecs),u.codecs.includes(",")){if(c=u.codecs.split(","),n=Ol("video",c),n=Is(n),c=Ol("audio",c),c=tl(c,u.mimeType),f=Ya(u.mimeType,c,"audio"),!Ft(f))return!1;n=[n,c].join()}if(c=Ya(u.mimeType,n,"video"),!Ft(c))return!1;u.codecs=n}if(u=e.audio,r&&u&&u.encrypted&&u.codecs.toLowerCase().includes("opus"))return!1;if(u){if(r=tl(u.codecs,u.mimeType),n=Ya(u.mimeType,r,"audio"),!Ft(n))return!1;u.codecs=r}return e.decodingInfos.some(function(h){return!(!h.supported||t&&(h=h.keySystemAccess)&&h.keySystem!=t)})}function bm(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=g(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=JSON.stringify(u),u=e[u],u instanceof Object?(u=bm(u),n.push(r+":"+u)):(u=JSON.stringify(u),n.push(r+":"+u))}return"{"+n.join(",")+"}"}function Hh(e,t){var n,r,u,c,f,h,v;return Re(function(S){if(S.g==1){for(n=function(R,B){if(R){var z=Es(R);return z.supported=R.supported&&B.supported,z.powerEfficient=R.powerEfficient&&B.powerEfficient,z.smooth=R.smooth&&B.smooth,B.keySystemAccess&&!z.keySystemAccess&&(z.keySystemAccess=B.keySystemAccess),z}return B},r=null,u=[],c=g(t),f=c.next(),h={};!f.done;h={cache:void 0,zd:void 0},f=c.next())v=f.value,h.zd=bm(v),h.cache=Yh,h.cache[h.zd]?r=n(r,h.cache[h.zd]):u.push(BE(v).then(function(R){return function(B){var z=null;B=g(B||[]);for(var J=B.next();!J.done;J=B.next())z=n(z,J.value);z&&(R.cache[R.zd]=z,r=n(r,z))}}(h)));return C(S,Promise.all(u),2)}r&&e.decodingInfos.push(r),X(S)})}function BE(e){var t=[""];e.video&&(t=Oo(e.video.contentType).split(","));var n=[""];e.audio&&(n=Oo(e.audio.contentType).split(","));var r=[];t=g(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var c=g(n),f=c.next(),h={};!f.done;h={Ac:void 0},f=c.next())f=f.value,h.Ac=Aa(e),e.video&&(h.Ac.video.contentType=Di(ba(h.Ac.video.contentType),u)),e.audio&&(h.Ac.audio.contentType=Di(ba(h.Ac.audio.contentType),f)),r.push(new Promise(function(v){return function(S,R){navigator.mediaCapabilities.decodingInfo(v.Ac).then(function(B){S(B)}).catch(R)}}(h)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function Rm(e,t,n,r){var u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe;return Re(function(rt){switch(rt.g){case 1:if(e.some(function(dt){return dt.decodingInfos.length}))return rt.return();u=g(r),c=u.next(),f={};case 2:if(c.done){rt.u(4);break}f.Ng=c.value,h=!1,v=g(e),S=v.next();case 5:if(S.done){rt.u(7);break}R=S.value,B=Vh(R,t,n).filter(function(dt){return function(gt){return gt=gt[0],(gt.keySystemConfiguration&&gt.keySystemConfiguration.keySystem)===dt.Ng}}(f)),z=g(B),J=z.next();case 8:if(J.done){rt.u(10);break}return fe=J.value,C(rt,Hh(R,fe),9);case 9:J=z.next(),rt.u(8);break;case 10:R.decodingInfos.length&&(h=!0),S=v.next(),rt.u(5);break;case 7:if(h)return rt.return();f={Ng:void 0},c=u.next(),rt.u(2);break;case 4:he=g(e),Ee=he.next();case 12:if(Ee.done){rt.u(0);break}Le=Ee.value,Fe=Vh(Le,t,n).filter(function(dt){return dt=dt[0],dt=dt.keySystemConfiguration&&dt.keySystemConfiguration.keySystem,!dt||!r.includes(dt)}),it=g(Fe),Ue=it.next();case 15:if(Ue.done){Ee=he.next(),rt.u(12);break}return Qe=Ue.value,C(rt,Hh(Le,Qe),16);case 16:Ue=it.next(),rt.u(15)}})}function Vh(e,t,n){var r=e.audio,u=e.video,c=[],f=[];if(u)for(var h=g(u.fullMimeTypes),v=h.next();!v.done;v=h.next()){v=v.value;var S=Oo(v);if(S.includes(",")&&!r){var R=S.split(","),B=ba(v);S=Ol("video",R),R=Ol("audio",R),R=tl(R,B),B=Ya(B,R,"audio"),f.push({contentType:B,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(S=Is(S),v={contentType:Ya(ba(v),S,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||1},u.hdr)switch(u.hdr){case"SDR":v.transferFunction="srgb";break;case"PQ":v.transferFunction="pq";break;case"HLG":v.transferFunction="hlg"}u.colorGamut&&(v.colorGamut=u.colorGamut),c.push(v)}if(r)for(h=g(r.fullMimeTypes),v=h.next();!v.done;v=h.next())S=v.value,v=ba(S),S=tl(Oo(S),v),v=Ya(v,S,"audio"),f.push({contentType:v,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(h=[],c.length==0&&c.push(null),f.length==0&&f.push(null),c=g(c),v=c.next();!v.done;v=c.next())for(v=v.value,S=g(f),B=S.next();!B.done;B=S.next())B=B.value,R={type:n?"file":"media-source"},v&&(R.video=v),B&&(R.audio=B),h.push(R);if(f=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!f.length)return[h];for(e=[],n=new Map,f=g(f),c=f.next();!c.done;c=f.next())c=c.value,n.get(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c);for(f=t?"required":"optional",t=t?["persistent-license"]:["temporary"],c=g(n.keys()),v=c.next();!v.done;v=c.next()){for(v=v.value,S=[],B=g(h),R=B.next();!R.done;R=B.next()){R=Object.assign({},R.value);var z=n.get(v),J={keySystem:v,initDataType:"cenc",persistentState:f,distinctiveIdentifier:"optional",sessionTypes:t};z=g(z);for(var fe=z.next();!fe.done;fe=z.next()){if(fe=fe.value,fe.initData&&fe.initData.length){for(var he=new Set,Ee=g(fe.initData),Le=Ee.next();!Le.done;Le=Ee.next())he.add(Le.value.initDataType);J.initDataType=fe.initData[0].initDataType}fe.distinctiveIdentifierRequired&&(J.distinctiveIdentifier="required"),fe.persistentStateRequired&&(J.persistentState="required"),fe.sessionType&&(J.sessionTypes=[fe.sessionType]),r&&(J.audio?(fe.encryptionScheme&&(J.audio.encryptionScheme=J.audio.encryptionScheme||fe.encryptionScheme),J.audio.robustness=J.audio.robustness||fe.audioRobustness):(J.audio={robustness:fe.audioRobustness},fe.encryptionScheme&&(J.audio.encryptionScheme=fe.encryptionScheme)),J.audio.robustness==""&&delete J.audio.robustness),u&&(J.video?(fe.encryptionScheme&&(J.video.encryptionScheme=J.video.encryptionScheme||fe.encryptionScheme),J.video.robustness=J.video.robustness||fe.videoRobustness):(J.video={robustness:fe.videoRobustness},fe.encryptionScheme&&(J.video.encryptionScheme=fe.encryptionScheme)),J.video.robustness==""&&delete J.video.robustness)}R.keySystemConfiguration=J,S.push(R)}e.push(S)}return e}function tl(e,t){return e.toLowerCase()=="flac"?Zs()?"fLaC":"flac":e.toLowerCase()==="opus"?Zs()&&Ll(t)=="mp4"?"Opus":"opus":e}function Is(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function xm(e){e.textStreams=e.textStreams.filter(function(t){return t=Di(t.mimeType,t.codecs),Ac(t)})}function Nm(e){var t,n,r,u,c,f,h;return Re(function(v){switch(v.g){case 1:t=[],n=g(e.imageStreams),r=n.next();case 2:if(r.done){v.u(4);break}if(u=r.value,c=u.mimeType,c=="application/mp4"&&u.codecs=="mjpg"&&(c="image/jpg"),zf.has(c)){v.u(5);break}if(f=ZE.get(c),!f){zf.set(c,!1),v.u(5);break}return C(v,Mm(f),7);case 7:h=v.h,zf.set(c,h);case 5:zf.get(c)&&t.push(u),r=n.next(),v.u(2);break;case 4:e.imageStreams=t,X(v)}})}function Mm(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function kl(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,u=n?n.mimeType:null,c=t?t.codecs:null,f=n?n.codecs:null,h=[];f&&h.push(f),c&&h.push(c);var v=[];n&&v.push(n.mimeType),t&&v.push(t.mimeType),v=v[0]||null;var S=[];t&&S.push(t.kind),n&&S.push(n.kind),S=S[0]||null;var R=new Set;if(t)for(var B=g(t.roles),z=B.next();!z.done;z=B.next())R.add(z.value);if(n)for(B=g(n.roles),z=B.next();!z.done;z=B.next())R.add(z.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:S,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:v,audioMimeType:r,videoMimeType:u,codecs:h.join(", "),audioCodec:c,videoCodec:f,primary:e.primary,roles:Array.from(R),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,f.includes(",")&&(e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage)),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Zf(e){return{id:e.id,active:!1,type:_r,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function qf(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=eu(e.segmentIndex));var u=e.tilesLayout;return r&&(u=r.tilesLayout||u),u&&t!=null&&(t/=Number(u.split("x")[0])),u&&n!=null&&(n/=Number(u.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:u||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Gf(e){return e.__shaka_id||(e.__shaka_id=jE++),e.__shaka_id}function Dm(e){var t=Kh(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Hf(e){var t=Kh(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Kh(e){var t=e.language;return{id:Gf(e),active:!1,type:"",bandwidth:0,language:Or(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Fl(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Vf(e){return e.filter(function(t){return Fl(t)})}function Ul(e,t,n,r){var u=e,c=e.filter(function(v){return v.primary});c.length&&(u=c);var f=u.length?u[0].language:"";if(u=u.filter(function(v){return v.language==f}),t){var h=bc(Or(t),e.map(function(v){return v.language}));h&&(u=e.filter(function(v){return Or(v.language)==h}))}if(u=u.filter(function(v){return v.forced==r}),n){if(e=Pm(u,n),e.length)return e}else if(e=u.filter(function(v){return v.roles.length==0}),e.length)return e;return e=u.map(function(v){return v.roles}).reduce(LE,[]),e.length?Pm(u,e[0]):u}function Pm(e,t){return e.filter(function(n){return n.roles.includes(t)})}function zh(e,t){t.length&&(t=t.filter(function(n){return _o(e.codecs)==_o(n.codecs)}).sort(function(n,r){return n.bandwidth&&r.bandwidth&&n.bandwidth!=r.bandwidth?n.bandwidth-r.bandwidth:(n.width||0)-(r.width||0)}),e.trickModeVideo=t[0],1<t.length&&(t=t.find(function(n){return e.width==n.width&&e.height==n.height})))&&(e.trickModeVideo=t)}function Kf(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}ne("shaka.util.StreamUtils",qh),qh.meetsRestrictions=xc;var Yh={},jE=0,zf=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),ZE=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function ii(){var e=this;this.A=null,this.j=!1,this.i=new K,this.F=new Tt,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.j&&e.g.useNetworkInformation){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.s=[],this.B=1,this.G=!1,this.h=this.o=this.g=this.l=null,this.C=new on(function(){if(e.j&&e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=null}p=ii.prototype,p.stop=function(){this.A=null,this.j=!1,this.s=[],this.B=1,this.o=this.l=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.m=null},p.release=function(){this.F.release(),this.C=null},p.init=function(e){this.A=e},p.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:m.devicePixelRatio;e=m.screen.height*n,t=m.screen.width*n}this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:m.devicePixelRatio,e=Math.min(e,this.o.clientHeight*n),t=Math.min(t,this.o.clientWidth*n)),n=this.s.filter(function(S){return S&&!(S.audio&&S.audio.fastSwitching||S.video&&S.video.fastSwitching)}),n.length||(n=this.s);var r=n;if(n.length!=this.s.length&&(r=this.s.filter(function(S){return S&&!!(S.audio&&S.audio.fastSwitching||S.video&&S.video.fastSwitching)})),n=Yf(this,this.g.restrictions,r,1/0,1/0),e!=1/0||t!=1/0){n=qE(n),n=g(n);for(var u=n.next();!u.done;u=n.next())if(u=u.value,u.height>=e&&u.width>=t){e=u.height,t=u.width;break}n=Yf(this,this.g.restrictions,r,e,t)}for(e=this.getBandwidthEstimate(),r.length&&!n.length&&(n=Yf(this,null,r,1/0,1/0),n=[n[0]]),t=n[0]||null,r=0;r<n.length;r++){u=n[r];for(var c=isNaN(this.B)?1:Math.abs(this.B),f=c*u.bandwidth/this.g.bandwidthDowngradeTarget,h={bandwidth:1/0},v=r+1;v<n.length;v++)if(u.bandwidth!=n[v].bandwidth){h=n[v];break}c=c*h.bandwidth/this.g.bandwidthUpgradeTarget,e>=f&&e<=c&&(t.bandwidth!=u.bandwidth||t.bandwidth==u.bandwidth&&t.video&&u.video&&(t.video.width<u.video.width||t.video.height<u.video.height))&&(t=u)}return this.l=Date.now(),t},p.enable=function(){this.j=!0},p.disable=function(){this.j=!1},p.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.i.sample(e,t),n&&this.l!=null&&this.j&&Om(this))},p.trySuggestStreams=function(){this.l!=null&&this.j&&Om(this)},p.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.i.getBandwidthEstimate(e),this.m?this.m.getBandwidthEstimate(e):e)},p.setVariants=function(e){this.s=e},p.playbackRateChanged=function(e){this.B=e},p.setMediaElement=function(e){var t=this;this.o=e,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in m&&(this.h=new ResizeObserver(function(){t.C.Z(Lm)}),this.h.observe(this.o))},p.setCmsdManager=function(e){this.m=e},p.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function Om(e){if(!e.G){var t=e.i;if(!(t.g>=t.i))return;e.G=!0,e.l-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.l<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function Yf(e,t,n,r,u){if(e.m){var c=e.m.wg();c&&(n=n.filter(function(f){return f.bandwidth&&c?f.bandwidth<=c:!0}))}return t&&(n=n.filter(function(f){return xc(f,t,{width:u,height:r})})),n.sort(function(f,h){return f.bandwidth-h.bandwidth})}function qE(e){var t=[];e=g(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,u){return r.width-u.width})}ne("shaka.abr.SimpleAbrManager",ii),ii.prototype.configure=ii.prototype.configure,ii.prototype.setCmsdManager=ii.prototype.setCmsdManager,ii.prototype.setMediaElement=ii.prototype.setMediaElement,ii.prototype.playbackRateChanged=ii.prototype.playbackRateChanged,ii.prototype.setVariants=ii.prototype.setVariants,ii.prototype.getBandwidthEstimate=ii.prototype.getBandwidthEstimate,ii.prototype.trySuggestStreams=ii.prototype.trySuggestStreams,ii.prototype.segmentDownloaded=ii.prototype.segmentDownloaded,ii.prototype.disable=ii.prototype.disable,ii.prototype.enable=ii.prototype.enable,ii.prototype.chooseVariant=ii.prototype.chooseVariant,ii.prototype.init=ii.prototype.init,ii.prototype.release=ii.prototype.release,ii.prototype.stop=ii.prototype.stop;var Lm=1;ne("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),ne("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function Wf(e,t,n,r){for(n=n===void 0?!0:n,r=r===void 0?!1:r,this.h=e,this.g=new Set([e]),t=t||[],e=g(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}Wf.prototype.add=function(e,t,n){return km(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function km(e,t,n,r){var u;if(!(u=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(u=e.audio&&t.audio)){u=e.audio;var c=t.audio;u=!!((!u.channelsCount||!c.channelsCount||2<u.channelsCount||2<c.channelsCount)&&u.channelsCount!=c.channelsCount||u.spatialAudio!==c.spatialAudio||n&&!Fm(u,c)||!Um(u.roles,c.roles)||r&&u.groupId!==c.groupId)}return!(r=u)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||Fm(e,t))&&Um(e.roles,t.roles))),!r}Wf.prototype.values=function(){return this.g.values()};function Fm(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return zs(r)}),t=t.codecs.split(",").map(function(r){return zs(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Um(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=g(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Bm(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Bl(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}Bm.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Gn(),r=e.filter(function(u){return km(t.i,u,!n,t.g)});return r.length?new Wf(r[0],r,!n,this.g):this.j.create(e)};function Bl(e,t,n,r,u,c,f,h,v,S,R){this.A=e,this.B=t,this.i=n,this.j=r,this.C=u,this.m=c,this.h=f===void 0?"":f,this.l=h===void 0?"":h,this.o=v===void 0?"reload":v,this.s=S===void 0?!1:S,this.g=R===void 0?"":R}Bl.prototype.create=function(e){var t=[];t=GE(e,this.A);var n=e.filter(function(r){return r.primary});return t=t.length?t:n.length?n:e,e=HE(t,this.B),e.length&&(t=e),this.m&&(e=YE(t,this.m),e.length&&(t=e)),this.j&&(e=zE(t,this.j),e.length&&(t=e)),this.i&&(e=KE(t,this.i),e.length&&(t=e)),this.h&&(e=VE(t,this.h),e.length&&(t=e)),this.l&&(e=Wh(t,this.l),e.length&&(t=e)),e=WE(t,this.C),e.length&&(t=e),this.g&&(e=$E(t,this.g),e.length&&(t=e)),new Wf(t[0],t,!(this.o=="smooth"&&Gn()),this.s)};function GE(e,t){t=Or(t);var n=bc(t,e.map(function(r){return Bf(r)}));return n?e.filter(function(r){return n==Bf(r)}):[]}function HE(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function VE(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function Wh(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function KE(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function zE(e,t){return t=="AUTO"&&(t=m.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function YE(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function WE(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function $E(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function jm(){this.g=Nc,this.i=new Map().set(Nc,2).set(nl,1),this.h=0}function Zm(e,t,n){e.i.set(Nc,n).set(nl,t)}var nl=0,Nc=1;function $h(e,t){var n=ua();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function qm(e){var t,n;return Re(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new Xe(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),C(r,new Promise(function(u){new on(u).Z(n/1e3)}),2))}e.h*=e.m,X(r)})}function ua(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Lr(){var e,t,n=new Promise(function(r,u){e=r,t=u});return n.resolve=e,n.reject=t,n}Lr.prototype.resolve=function(){},Lr.prototype.reject=function(){};function pi(e,t){this.promise=e,this.i=t,this.g=!1}function Ws(e){return new pi(Promise.reject(e),function(){return Promise.resolve()})}function Xh(){var e=Promise.reject(new Xe(2,7,7001));return e.catch(function(){}),new pi(e,function(){return Promise.resolve()})}function $s(e){return new pi(Promise.resolve(e),function(){return Promise.resolve()})}function Gm(e){return new pi(e,function(){return e.catch(function(){})})}pi.prototype.abort=function(){return this.g=!0,this.i()};function Hm(e){return new pi(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}pi.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},pi.prototype.Aa=function(e,t){function n(h){return function(v){if(u.g&&h)c.reject(f);else{var S=h?e:t;S?r=Vm(S,v,c):(h?c.resolve:c.reject)(v)}}}function r(){return c.reject(f),u.abort()}var u=this,c=new Lr,f=new Xe(2,7,7001);return this.promise.then(n(!0),n(!1)),new pi(c,function(){return r()})};function Vm(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(u){return n.reject(u),function(){return Promise.resolve()}}}E.Object.defineProperties(pi.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),ne("shaka.util.AbortableOperation",pi),pi.prototype.chain=pi.prototype.Aa,pi.prototype.finally=pi.prototype.finally,pi.all=Hm,pi.prototype.abort=pi.prototype.abort,pi.notAbortable=Gm,pi.completed=$s,pi.aborted=Xh,pi.failed=Ws;function jn(e,t){if(t)if(t instanceof Map)for(var n=g(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=m.performance&&m.performance.now?m.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Qh(e){var t=new jn(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}jn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},jn.prototype.stopImmediatePropagation=function(){this.g=!0},jn.prototype.stopPropagation=function(){},ne("shaka.util.FakeEvent",jn);var $f={gj:"abrstatuschanged",hj:"adaptation",ij:"audiotrackchanged",jj:"buffering",kj:"complete",lj:"downloadfailed",mj:"downloadheadersreceived",nj:"drmsessionupdate",pj:"emsg",Jj:"prft",Error:"error",qj:"expirationupdated",rj:"firstquartile",sj:"gapjumped",vj:"keystatuschanged",zj:"loaded",Aj:"loading",Cj:"manifestparsed",Dj:"manifestupdated",Ej:"mediaqualitychanged",Fj:"mediasourcerecovered",Metadata:"metadata",Gj:"midpoint",Hj:"nospatialvideoinfo",Ij:"onstatechange",Kj:"ratechange",Mj:"segmentappended",Nj:"sessiondata",Oj:"spatialvideoinfo",Pj:"stalldetected",Qj:"started",Rj:"statechanged",Sj:"streaming",Tj:"textchanged",Uj:"texttrackvisibility",Vj:"thirdquartile",Wj:"timelineregionadded",Xj:"timelineregionenter",Yj:"timelineregionexit",Zj:"trackschanged",ak:"unloading",ck:"variantchanged"};function Nr(){this.sa=new _t,this.oe=this}Nr.prototype.addEventListener=function(e,t){this.sa&&this.sa.push(e,t)},Nr.prototype.removeEventListener=function(e,t){this.sa&&this.sa.remove(e,t)},Nr.prototype.dispatchEvent=function(e){if(!this.sa)return!0;var t=this.sa.get(e.type)||[],n=this.sa.get("All");for(n&&(t=t.concat(n)),t=g(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.oe,e.currentTarget=this.oe;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},Nr.prototype.release=function(){this.sa=null};function rl(){this.g=[]}function il(e,t){e.g.push(t.finally(function(){Kn(e.g,t)}))}rl.prototype.destroy=function(){for(var e=[],t=g(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function zr(e,t,n,r,u,c){Nr.call(this),this.i=!1,this.o=new rl,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.B=n||null,this.C=r||null,this.G=u||null,this.F=c||null,this.s=this.A=!1,this.m=16e3}Y(zr,Nr),p=zr.prototype,p.Pf=function(e){this.A=e},p.Qf=function(e){this.s=e};function Xs(e,t,n,r){n=n||tp;var u=Dc[e];(!u||n>=u.priority)&&(Dc[e]={priority:n,fe:t,Bi:r===void 0?!1:r})}function Jh(e,t){for(var n=g(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(e=g(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}p.Ei=function(e){this.g.add(e)},p.$i=function(e){this.g.delete(e)},p.jg=function(){this.g.clear()},p.Fi=function(e){this.h.add(e)},p.aj=function(e){this.h.delete(e)},p.kg=function(){this.h.clear()};function Bi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}p.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Nr.prototype.release.call(this),this.o.destroy()},p.request=function(e,t,n){var r=this,u=new ep;if(this.i){var c=Promise.reject(new Xe(2,7,7001));return c.catch(function(){}),new Mc(c,function(){return Promise.resolve()},u)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Aa(t.retryParameters):ua(),t.uris=Aa(t.uris),c=Km(this,e,t,n);var f=c.Aa(function(){return zm(r,e,t,n,new $h(t.retryParameters,!1),0,null,u)}),h=f.Aa(function(z){return Ym(r,e,z,n)}),v=Date.now(),S=0;c.promise.then(function(){S=Date.now()-v},function(){});var R=0;f.promise.then(function(){R=Date.now()},function(){});var B=h.Aa(function(z){var J=Date.now()-R,fe=z.response;return fe.timeMs+=S,fe.timeMs+=J,z.gi||!r.l||fe.fromCache||t.method=="HEAD"||e!=Wa||r.l(fe.timeMs,fe.data.byteLength,Wm(n)),r.F&&r.F(e,fe,n),fe},function(z){throw z&&(z.severity=2),z});return c=new Mc(B.promise,function(){return B.abort()},u),il(this.o,c),c};function Km(e,t,n,r){function u(h){c=c.Aa(function(){return n.body&&(n.body=Ni(n.body)),h(t,n,r)})}var c=$s(void 0);e.C&&u(e.C),e=g(e.g);for(var f=e.next();!f.done;f=e.next())u(f.value);return c.Aa(void 0,function(h){throw h instanceof Xe&&h.code==7001?h:new Xe(2,1,1006,h)})}function zm(e,t,n,r,u,c,f,h){e.A&&(n.uris[c]=n.uris[c].replace("https://","http://")),e.s&&(n.uris[c]=n.uris[c].replace("http://","https://")),0<c&&e.G&&e.G(t,r,n.uris[c],n.uris[c-1]);var v=new Ei(n.uris[c]),S=v.Bb,R=!1;S||(S=location.protocol,S=S.slice(0,-1),Mf(v,S),n.uris[c]=v.toString()),S=S.toLowerCase();var B=(S=Dc[S])?S.fe:null;if(!B)return Ws(new Xe(2,1,1e3,v));var z=S.Bi,J=null,fe=null,he=!1,Ee=!1,Le;return Gm(qm(u)).Aa(function(){if(e.i)return Xh();Le=Date.now();var Fe=0;n.requestStartTime=Date.now();var it=B(n.uris[c],n,t,function(rt,dt,gt){J&&J.stop(),fe&&fe.Z(Qe/1e3),e.l&&t==Wa&&(Fe++,n.packetNumber=Fe,e.l(rt,dt,Wm(r),n),R=!0,h.g=gt)},function(rt){e.j&&e.j(rt,n,t),Ee=!0,n.timeToFirstByte=Date.now()-n.requestStartTime},{minBytesForProgressEvents:e.m});if(!z)return it;var Ue=n.retryParameters.connectionTimeout;Ue&&(J=new on(function(){he=!0,it.abort()}),J.Z(Ue/1e3));var Qe=n.retryParameters.stallTimeout;return Qe&&(fe=new on(function(){he=!0,it.abort()})),it}).Aa(function(Fe){J&&J.stop(),fe&&fe.stop(),Fe.timeMs==null&&(Fe.timeMs=Date.now()-Le);var it={response:Fe,gi:R};return!Ee&&e.j&&e.j(Fe.headers,n,t),it},function(Fe){if(J&&J.stop(),fe&&fe.stop(),e.B){var it=null,Ue=0;Fe instanceof Xe&&(it=Fe,Fe.code==1001&&(Ue=Fe.data[1])),e.B(n,it,Ue,he)}if(e.i)return Xh();if(he&&(Fe=new Xe(1,1,1003,n.uris[c],t)),Fe instanceof Xe){if(Fe.code==7001)throw Fe;if(Fe.code==1010)throw f;if(Fe.severity==1)return it=new Map().set("error",Fe),it=new jn("retry",it),e.dispatchEvent(it),c=(c+1)%n.uris.length,zm(e,t,n,r,u,c,Fe,h)}throw Fe})}function Ym(e,t,n,r){var u=$s(void 0);e=g(e.h);for(var c=e.next(),f={};!c.done;f={Sg:void 0},c=e.next())f.Sg=c.value,u=u.Aa(function(h){return function(){var v=n.response;return v.data&&(v.data=Ni(v.data)),(0,h.Sg)(t,v,r)}}(f));return u.Aa(function(){return n},function(h){var v=2;if(h instanceof Xe){if(h.code==7001)throw h;v=h.severity}throw new Xe(v,1,1007,h)})}function Wm(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.s)return!1}return!0}ne("shaka.net.NetworkingEngine",zr),zr.prototype.request=zr.prototype.request,zr.prototype.destroy=zr.prototype.destroy,zr.makeRequest=Bi,zr.defaultRetryParameters=function(){return ua()},zr.prototype.clearAllResponseFilters=zr.prototype.kg,zr.prototype.unregisterResponseFilter=zr.prototype.aj,zr.prototype.registerResponseFilter=zr.prototype.Fi,zr.prototype.clearAllRequestFilters=zr.prototype.jg,zr.prototype.unregisterRequestFilter=zr.prototype.$i,zr.prototype.registerRequestFilter=zr.prototype.Ei,zr.unregisterScheme=function(e){delete Dc[e]},zr.registerScheme=Xs,zr.prototype.setForceHTTPS=zr.prototype.Qf,zr.prototype.setForceHTTP=zr.prototype.Pf;function ep(){this.g=0}zr.NumBytesRemainingClass=ep;function Mc(e,t,n){pi.call(this,e,t),this.h=n}Y(Mc,pi),zr.PendingRequest=Mc;var Wa=1;zr.RequestType={MANIFEST:0,SEGMENT:Wa,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},zr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var tp=3;zr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:tp};var Dc={};function jl(e){this.g=!1,this.h=new Lr,this.i=e}jl.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Zr(e,t){if(e.g)throw t instanceof Xe&&t.code==7003?t:new Xe(2,7,7003,t)}function np(e,t){var n=[];e=g(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function rp(e,t){e=g(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Cu(e){for(var t=new Map,n=g(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function ip(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function k(e,t){this.h=ln(e),this.i=t==j,this.g=0}p=k.prototype,p.ra=function(){return this.g<this.h.byteLength},p.xa=function(){return this.g},p.getLength=function(){return this.h.byteLength},p.S=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw O()}},p.la=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw O()}},p.P=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw O()}},p.Pg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw O()}},p.Pc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw O()}if(2097151<t)throw new Xe(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},p.rb=function(e){if(this.g+e>this.h.byteLength)throw O();var t=nr(this.h,this.g,e);return this.g+=e,t},p.skip=function(e){if(this.g+e>this.h.byteLength)throw O();this.g+=e},p.Mi=function(e){if(this.g<e)throw O();this.g-=e},p.seek=function(e){if(0>e||e>this.h.byteLength)throw O();this.g=e},p.sc=function(){for(var e=this.g;this.ra()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=nr(this.h,e,this.g-e),this.g+=1,br(e)};function O(){return new Xe(2,3,3e3)}ne("shaka.util.DataViewReader",k),k.prototype.readTerminatedString=k.prototype.sc,k.prototype.seek=k.prototype.seek,k.prototype.rewind=k.prototype.Mi,k.prototype.skip=k.prototype.skip,k.prototype.readBytes=k.prototype.rb,k.prototype.readUint64=k.prototype.Pc,k.prototype.readInt32=k.prototype.Pg,k.prototype.readUint32=k.prototype.P,k.prototype.readUint16=k.prototype.la,k.prototype.readUint8=k.prototype.S,k.prototype.getLength=k.prototype.getLength,k.prototype.getPosition=k.prototype.xa,k.prototype.hasMoreData=k.prototype.ra;var j=1;k.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:j};function V(){this.i=[],this.h=[],this.g=!1}p=V.prototype,p.box=function(e,t){return e=Ae(e),this.i[e]=_e,this.h[e]=t,this},p.R=function(e,t){return e=Ae(e),this.i[e]=ye,this.h[e]=t,this},p.stop=function(){this.g=!0},p.parse=function(e,t,n){for(e=new k(e,0),this.g=!1;e.ra()&&!this.g;)this.Mc(0,e,t,n)},p.Mc=function(e,t,n,r){var u=t.xa();if(r&&u+8>t.getLength())this.g=!0;else{var c=t.P(),f=t.P(),h=Te(f),v=!1;switch(c){case 0:c=t.getLength()-u;break;case 1:if(r&&t.xa()+8>t.getLength()){this.g=!0;return}c=t.Pc(),v=!0}var S=this.h[f];if(S){var R=null,B=null;if(this.i[f]==ye){if(r&&t.xa()+4>t.getLength()){this.g=!0;return}B=t.P(),R=B>>>24,B&=16777215}f=u+c,n&&f>t.getLength()&&(f=t.getLength()),r&&f>t.getLength()?this.g=!0:(r=f-t.xa(),t=0<r?t.rb(r):new Uint8Array(0),t=new k(t,0),S({name:h,parser:this,partialOkay:n||!1,version:R,flags:B,reader:t,size:c,start:u+e,has64BitSize:v}))}else t.skip(Math.min(u+c-t.xa(),t.getLength()-t.xa()))}};function W(e){for(var t=ie(e);e.reader.ra()&&!e.parser.g;)e.parser.Mc(e.start+t,e.reader,e.partialOkay)}function ee(e){for(var t=ie(e),n=e.reader.P(),r=0;r<n&&(e.parser.Mc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function H(e){var t=ie(e);for(e.reader.skip(78);e.reader.ra()&&!e.parser.g;)e.parser.Mc(e.start+t,e.reader,e.partialOkay)}function re(e){var t=ie(e);e.reader.skip(8);var n=e.reader.la();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ra()&&!e.parser.g;)e.parser.Mc(e.start+t,e.reader,e.partialOkay)}function de(e){return function(t){e(t.reader.rb(t.reader.getLength()-t.reader.xa()))}}function Ae(e){var t=0;e=g(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Te(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function ie(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}ne("shaka.util.Mp4Parser",V),V.headerSize=ie,V.typeToString=Te,V.allData=de,V.audioSampleEntry=re,V.visualSampleEntry=H,V.sampleDescription=ee,V.children=W,V.prototype.parseNext=V.prototype.Mc,V.prototype.parse=V.prototype.parse,V.prototype.stop=V.prototype.stop,V.prototype.fullBox=V.prototype.R,V.prototype.box=V.prototype.box;var _e=0,ye=1;function ze(e){var t=this;this.g=[],this.h=[],this.data=[],new V().box("moov",W).box("moof",W).R("pssh",function(n){if(!(1<n.version)){var r=nr(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(za(n.reader.rb(16))),0<n.version){r=n.reader.P();for(var u=0;u<r;u++){var c=za(n.reader.rb(16));t.h.push(c)}}}}).parse(e)}function Oe(e,t,n,r){var u=e.length,c=t.length+16+u;0<r&&(c+=4+16*n.size);var f=new Uint8Array(c),h=ln(f),v=0;if(h.setUint32(v,c),v+=4,h.setUint32(v,1886614376),v+=4,1>r?h.setUint32(v,0):h.setUint32(v,16777216),v+=4,f.set(t,v),v+=t.length,0<r)for(h.setUint32(v,n.size),v+=4,t=g(n),n=t.next();!n.done;n=t.next())n=$u(n.value),f.set(n,v),v+=n.length;return h.setUint32(v,u),f.set(e,v+4),f}function Ze(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.ga=this.ea=!1,this.I=0,this.g=null,this.B=new Tt,this.i=new Map,this.A=new Map,this.l=new Lr,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.aa=new Map,this.fa=new Map,this.L=new on(function(){return Vt(t)}),this.O=!1,this.N=[],this.X=!1,this.K=new on(function(){St(t)}),this.l.catch(function(){}),this.j=new jl(function(){return We(t)}),this.ba=!1,this.F=this.G=null,this.T=function(){return!1}}p=Ze.prototype,p.destroy=function(){return this.j.destroy()};function We(e){return Re(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,C(t,xn(e),2);case 2:if(!e.m){t.u(3);break}return ce(t,4),C(t,e.m.setMediaKeys(null),6);case 6:me(t,5);break;case 4:be(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,X(t)}})}p.configure=function(e,t){this.h=e,t&&(this.T=t),this.K&&this.K.Ra(this.h.updateExpirationTime)};function Se(e,t,n){return e.ga=!0,e.A=new Map,e.O=n,Ge(e,t)}function ke(e,t,n){e.A=new Map,n=g(n);for(var r=n.next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(n=g(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.O=0<e.A.size,Ge(e,t)}function Ie(e,t,n,r,u,c){var f=new Map;return u={audioCapabilities:u,videoCapabilities:c,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},u.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],f.set(t,u),je(e,f,[])}function Ge(e,t){var n,r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue;return Re(function(Qe){if(Qe.g==1){if(n=De(e))for(r=g(t),u=r.next();!u.done;u=r.next())c=u.value,c.video&&(c.video.drmInfos=[n]),c.audio&&(c.audio.drmInfos=[n]);for(f=t.some(function(rt){return!!(rt.video&&rt.video.drmInfos.length||rt.audio&&rt.audio.drmInfos.length)}),f||(h=Cu(e.h.servers),un(t,h)),v=new Set,S=g(t),R=S.next();!R.done;R=S.next())for(B=R.value,z=at(B),J=g(z),fe=J.next();!fe.done;fe=J.next())he=fe.value,v.add(he);for(Ee=g(v),Le=Ee.next();!Le.done;Le=Ee.next())Fe=Le.value,Jt(Fe,Cu(e.h.servers),Cu(e.h.advanced||{}),e.h.keySystemsMapping);return C(Qe,Rm(t,e.O,e.ba,e.h.preferredKeySystems),2)}return Zr(e.j),it=f||Object.keys(e.h.servers).length,it?(Ue=je(e,void 0,t),Qe.return(f?Ue:Ue.catch(function(){}))):(e.ea=!0,Qe.return(Promise.resolve()))})}function q(e){var t;return Re(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return C(n,e.G,3);case 3:return Zr(e.j),n.return();case 2:return ce(n,4),e.G=e.m.setMediaKeys(e.s),C(n,e.G,6);case 6:me(n,5);break;case 4:t=be(n),e.o(new Xe(2,6,6003,t.message));case 5:Zr(e.j),X(n)}})}function le(e,t){return Re(function(n){if(n.g==1)return C(n,q(e),2);Pe(e,t.initDataType,nr(t.initData)),X(n)})}p.Sb=function(e){var t=this;return Re(function(n){if(n.g==1)return t.s?(t.m=e,t.B.pa(t.m,"play",function(){for(var r=g(t.N),u=r.next();!u.done;u=r.next())pt(t,u.value);t.X=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return xn(t)}),t.F=t.g&&t.g.initData.find(function(r){return 0<r.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?C(n,q(t),2):n.u(2)):(t.B.pa(e,"encrypted",function(){t.o(new Xe(2,6,6010))}),n.return());te(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(r){return le(t,r)}),X(n)})};function ae(e){var t,n,r,u,c;return Re(function(f){switch(f.g){case 1:if(!e.s||!e.g)return f.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){f.u(2);break}return t=Bi([e.g.serverCertificateUri],e.h.retryParameters),ce(f,3),n=e.C.Mb.request(5,t,{isPreload:e.T()}),C(f,n.promise,5);case 5:r=f.h,e.g.serverCertificate=nr(r.data),me(f,4);break;case 3:throw u=be(f),new Xe(2,6,6017,u);case 4:if(e.j.g)return f.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?f.return():(ce(f,6),C(f,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:me(f,0);break;case 6:throw c=be(f),new Xe(2,6,6004,c.message)}})}function ue(e,t){var n,r,u;return Re(function(c){if(c.g==1)return C(c,ct(e,t,{initData:null,initDataType:null}),2);if(c.g!=3)return n=c.h,n?(r=[],(u=e.i.get(n))&&(u.kb=new Lr,r.push(u.kb)),r.push(n.remove()),C(c,Promise.all(r),3)):c.return();e.i.delete(n),X(c)})}function te(e){var t,n,r,u,c;return Re(function(f){if(f.g==1)return e.A.size?(e.A.forEach(function(h,v){ct(e,v,h)}),C(f,e.l,3)):f.u(2);if(f.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&Pt(e))return f.return(e.l);e.l=new Lr,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=g(n),u=r.next();!u.done;u=r.next())c=u.value,Pe(e,c.initDataType,c.initData);return Qt(e)&&e.l.resolve(),f.return(e.l)})}function Pe(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var r=e.i.values();r=g(r);for(var u=r.next();!u.done;u=r.next())if(no(n,u.value.initData))return}0<e.i.size&&Qt(e)&&(e.l.resolve(),e.l=new Lr,e.l.catch(function(){})),yt(e,t,n,e.g.sessionType)}}function xe(e){return e=e.i.keys(),e=np(e,function(t){return t.sessionId}),Array.from(e)}p.ef=function(){var e=this,t=this.i.keys();return t=np(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},p.ad=function(){var e=1/0,t=this.i.keys();t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},p.Id=function(){return ip(this.fa)};function je(e,t,n){var r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe;return Re(function(it){switch(it.g){case 1:if(r=new Map,n.length){u=Me(e,n,r),it.u(2);break}return C(it,ve(e,t),3);case 3:u=it.h;case 2:if(c=u,!c)throw new Xe(2,6,6001);for(Zr(e.j),ce(it,4),e.H.clear(),f=c.getConfiguration(),h=f.audioCapabilities||[],v=f.videoCapabilities||[],S=g(h),R=S.next();!R.done;R=S.next())B=R.value,e.H.add(B.contentType.toLowerCase());for(z=g(v),J=z.next();!J.done;J=z.next())fe=J.value,e.H.add(fe.contentType.toLowerCase());if(n.length){var Ue=c.keySystem,Qe=r.get(c.keySystem),rt=[],dt=[],gt=[],kt=[],It=[],Ut=new Set,Nt=new Set;an(Qe,rt,dt,kt,gt,It,Ut,Nt);var nn=e.O?"persistent-license":"temporary";for(Ue={keySystem:Ue,encryptionScheme:rt[0],licenseServerUri:dt[0],distinctiveIdentifierRequired:Qe[0].distinctiveIdentifierRequired,persistentStateRequired:Qe[0].persistentStateRequired,sessionType:Qe[0].sessionType||nn,audioRobustness:Qe[0].audioRobustness||"",videoRobustness:Qe[0].videoRobustness||"",serverCertificate:kt[0],serverCertificateUri:gt[0],initData:It,keyIds:Ut},0<Nt.size&&(Ue.keySystemUris=Nt),Qe=g(Qe),Nt=Qe.next();!Nt.done;Nt=Qe.next())Nt=Nt.value,Nt.distinctiveIdentifierRequired&&(Ue.distinctiveIdentifierRequired=Nt.distinctiveIdentifierRequired),Nt.persistentStateRequired&&(Ue.persistentStateRequired=Nt.persistentStateRequired);Qe=Ue}else Qe=c.keySystem,Nt=t.get(c.keySystem),Ue=[],rt=[],dt=[],gt=[],kt=[],It=new Set,an(Nt.drmInfos,Ue,rt,gt,dt,kt,It),Qe={keySystem:Qe,encryptionScheme:Ue[0],licenseServerUri:rt[0],distinctiveIdentifierRequired:Nt.distinctiveIdentifier=="required",persistentStateRequired:Nt.persistentState=="required",sessionType:Nt.sessionTypes[0]||"temporary",audioRobustness:(Nt.audioCapabilities?Nt.audioCapabilities[0].robustness:"")||"",videoRobustness:(Nt.videoCapabilities?Nt.videoCapabilities[0].robustness:"")||"",serverCertificate:gt[0],serverCertificateUri:dt[0],initData:kt,keyIds:It};if(e.g=Qe,!e.g.licenseServerUri)throw new Xe(2,6,6012,e.g.keySystem);return C(it,c.createMediaKeys(),6);case 6:if(he=it.h,Zr(e.j),e.s=he,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){it.u(7);break}return ce(it,8),C(it,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(Ee=it.h,Ee!="usable")throw new Xe(2,6,6018);Zr(e.j),me(it,7,4);break;case 8:throw Le=be(it,4),Le instanceof Xe?Le:new Xe(2,6,6019,Le.message);case 7:return e.ea=!0,C(it,ae(e),11);case 11:Zr(e.j),me(it,0);break;case 4:throw Fe=be(it),Zr(e.j,Fe),e.g=null,e.H.clear(),Fe instanceof Xe?Fe:new Xe(2,6,6002,Fe.message)}})}function Me(e,t,n){for(var r=g(t),u=r.next();!u.done;u=r.next()){u=g(at(u.value));for(var c=u.next();!c.done;c=u.next())c=c.value,n.has(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c)}if(n.size==1&&n.has(""))throw new Xe(2,6,6e3);for(e=g(e.h.preferredKeySystems),u=e.next(),r={};!u.done;r={Og:void 0},u=e.next())for(r.Og=u.value,u=g(t),c=u.next();!c.done;c=u.next())if(c=c.value.decodingInfos.find(function(S){return function(R){return R.supported&&R.keySystemAccess!=null&&R.keySystemAccess.keySystem==S.Og}}(r)))return c.keySystemAccess;for(e=g([!0,!1]),r=e.next();!r.done;r=e.next())for(r=r.value,u=g(t),c=u.next();!c.done;c=u.next()){c=g(c.value.decodingInfos);for(var f=c.next();!f.done;f=c.next())if(f=f.value,f.supported&&f.keySystemAccess){var h=n.get(f.keySystemAccess.keySystem);h=g(h);for(var v=h.next();!v.done;v=h.next())if(!!v.value.licenseServerUri==r)return f.keySystemAccess}}return null}function ve(e,t){var n,r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le;return Re(function(Fe){switch(Fe.g){case 1:if(t.size==1&&t.has(""))throw new Xe(2,6,6e3);for(r=g(t.values()),u=r.next();!u.done;u=r.next())c=u.value,c.audioCapabilities.length==0&&delete c.audioCapabilities,c.videoCapabilities.length==0&&delete c.videoCapabilities;f=g(e.h.preferredKeySystems),h=f.next();case 2:if(h.done){Fe.u(4);break}if(v=h.value,!t.has(v)){Fe.u(3);break}return S=t.get(v),ce(Fe,6),C(Fe,navigator.requestMediaKeySystemAccess(v,[S]),8);case 8:return n=Fe.h,Fe.return(n);case 6:be(Fe);case 7:Zr(e.j);case 3:h=f.next(),Fe.u(2);break;case 4:R=g([!0,!1]),B=R.next();case 9:if(B.done){Fe.u(11);break}z=B.value,J=g(t.keys()),fe=J.next();case 12:if(fe.done){B=R.next(),Fe.u(9);break}if(he=fe.value,Ee=t.get(he),Le=Ee.drmInfos.some(function(it){return!!it.licenseServerUri}),Le!=z){Fe.u(13);break}return ce(Fe,15),C(Fe,navigator.requestMediaKeySystemAccess(he,[Ee]),17);case 17:return n=Fe.h,Fe.return(n);case 15:be(Fe);case 16:Zr(e.j);case 13:fe=J.next(),Fe.u(12);break;case 11:return Fe.return(n)}})}function De(e){return e=Cu(e.h.clearKeys),e.size==0?null:ym(e)}function $e(e){Qt(e)&&e.l.resolve()}function mt(e,t){new on(function(){t.loaded=!0,$e(e)}).Z(kn)}function ct(e,t,n){var r,u,c,f,h,v,S;return Re(function(R){switch(R.g){case 1:try{r=e.s.createSession("persistent-license")}catch(B){return u=new Xe(2,6,6005,B.message),e.o(u),R.return(Promise.reject(u))}return e.B.D(r,"message",function(B){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.X?e.N.push(B):pt(e,B)}),e.B.D(r,"keystatuseschange",function(B){return Gt(e,B)}),c={initData:n.initData,initDataType:n.initDataType,loaded:!1,Af:1/0,kb:null,type:"persistent-license"},e.i.set(r,c),ce(R,2),C(R,r.load(t),4);case 4:return f=R.h,Zr(e.j),f||(e.i.delete(r),h=e.h.persistentSessionOnlinePlayback?1:2,e.o(new Xe(h,6,6013)),c.loaded=!0),mt(e,c),$e(e),R.return(r);case 2:v=be(R),Zr(e.j,v),e.i.delete(r),S=e.h.persistentSessionOnlinePlayback?1:2,e.o(new Xe(S,6,6005,v.message)),c.loaded=!0,$e(e);case 3:return R.return(Promise.resolve())}})}function yt(e,t,n,r){try{var u=e.s.createSession(r)}catch(c){e.o(new Xe(2,6,6005,c.message));return}e.B.D(u,"message",function(c){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.X?e.N.push(c):pt(e,c)}),e.B.D(u,"keystatuseschange",function(c){return Gt(e,c)}),e.i.set(u,{initData:n,initDataType:t,loaded:!1,Af:1/0,kb:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(c){t=c,c instanceof Xe||(t=new Xe(2,6,6016,c)),e.o(t);return}e.h.logLicenseExchange&&Ss(n),u.generateRequest(t,n).catch(function(c){if(!e.j.g){e.i.delete(u);var f=c.errorCode;if(f&&f.systemCode){var h=f.systemCode;0>h&&(h+=Math.pow(2,32)),h="0x"+h.toString(16)}e.o(new Xe(2,6,6006,c.message,c,h))}})}function pt(e,t){var n,r,u,c,f,h,v,S,R,B,z,J,fe,he;Re(function(Ee){switch(Ee.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Ss(t.message),r=e.i.get(n),u=e.g.licenseServerUri,c=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&c&&c.individualizationServer&&(u=c.individualizationServer),f=Bi([u],e.h.retryParameters),f.body=t.message,f.method="POST",f.licenseRequestType=t.messageType,f.sessionId=n.sessionId,f.drmInfo=e.g,r&&(f.initData=r.initData,f.initDataType=r.initDataType),c&&c.headers)for(h in c.headers)f.headers[h]=c.headers[h];if(Vr(e.g.keySystem)){var Le=ci(f.body,!0,!0);if(Le.includes("PlayReadyKeyMessage")){Le=Tu(Le,"PlayReadyKeyMessage");var Fe=Eo(Le,"HttpHeader");Fe=g(Fe);for(var it=Fe.next();!it.done;it=Fe.next()){var Ue=it.value;it=Eo(Ue,"name")[0],Ue=Eo(Ue,"value")[0],f.headers[ei(it)]=ei(Ue)}Le=Eo(Le,"Challenge")[0],f.body=Wo(ei(Le))}else f.headers["Content-Type"]="text/xml; charset=utf-8"}return v=Date.now(),ce(Ee,2),R=e.C.Mb.request(2,f,{isPreload:e.T()}),C(Ee,R.promise,4);case 4:S=Ee.h,me(Ee,3);break;case 2:return B=be(Ee),e.j.g||(z=new Xe(2,6,6007,B),e.i.size==1?(e.o(z),r&&r.kb&&r.kb.reject(z)):(r&&r.kb&&r.kb.reject(z),e.i.delete(n),Qt(e)&&(e.l.resolve(),e.L.Z(.1)))),Ee.return();case 3:return e.j.g?Ee.return():(e.I+=(Date.now()-v)/1e3,e.h.logLicenseExchange&&Ss(S.data),ce(Ee,5),C(Ee,n.update(S.data),7));case 7:me(Ee,6);break;case 5:return J=be(Ee),fe=new Xe(2,6,6008,J.message),e.o(fe),r&&r.kb&&r.kb.reject(fe),Ee.return();case 6:if(e.j.g)return Ee.return();he=new jn("drmsessionupdate"),e.C.onEvent(he),r&&(r.kb&&r.kb.resolve(),mt(e,r)),X(Ee)}})}function Gt(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(c,f){if(typeof f=="string"){var h=f;f=c,c=h}if(Vr(e.g.keySystem)&&f.byteLength==16&&(xr()||Ri())){h=ln(f);var v=h.getUint32(0,!0),S=h.getUint16(4,!0),R=h.getUint16(6,!0);h.setUint32(0,v,!1),h.setUint16(4,S,!1),h.setUint16(6,R,!1)}c!="status-pending"&&(n.loaded=!0),c=="expired"&&(r=!0),f=za(f).slice(0,32),e.aa.set(f,c)});var u=t.expiration-Date.now();(0>u||r&&1e3>u)&&n&&!n.kb&&(e.i.delete(t),t.close().catch(function(){})),Qt(e)&&(e.l.resolve(),e.L.Z(mr))}function Vt(e){var t=e.aa,n=e.fa;n.clear(),t.forEach(function(r,u){return n.set(u,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.o(new Xe(2,6,6014)),e.C.be(ip(n))}function jt(){var e,t,n,r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut;return Re(function(Nt){if(Nt.g==1){for(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" "),t=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],n=["150","2000","3000"],r={"com.widevine.alpha":t,"com.microsoft.playready.recommendation":n},u=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],c=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],f={videoCapabilities:u,audioCapabilities:c,initDataTypes:["cenc","sinf","skd","keyids"]},h=[null,"cenc","cbcs","cbcs-1-9"],v=new Map,S=function(nn,Kt){var $t,En,An,Vn,Qn,ar,Ar,Qr;return Re(function(Yr){switch(Yr.g){case 1:return ce(Yr,2),C(Yr,Kt.createMediaKeys(),4);case 4:me(Yr,3);break;case 2:return be(Yr),Yr.return();case 3:En=($t=Kt.getConfiguration().sessionTypes)?$t.includes("persistent-license"):!1,Ui()&&(En=!1),An=Kt.getConfiguration().videoCapabilities,Vn=Kt.getConfiguration().audioCapabilities,Qn={persistentState:En,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[]},v.has(nn)&&v.get(nn)?Qn=v.get(nn):v.set(nn,Qn),(ar=An[0].encryptionScheme)&&!Qn.encryptionSchemes.includes(ar)&&Qn.encryptionSchemes.push(ar),(Ar=An[0].robustness)&&!Qn.videoRobustnessLevels.includes(Ar)&&Qn.videoRobustnessLevels.push(Ar),(Qr=Vn[0].robustness)&&!Qn.audioRobustnessLevels.includes(Qr)&&Qn.audioRobustnessLevels.push(Qr),X(Yr)}})},R=function(nn,Kt,$t,En){var An,Vn,Qn,ar,Ar,Qr,Yr,Si,Pr,Fr;return Re(function(si){switch(si.g){case 1:for(ce(si,2),An=Aa(f),Vn=g(An.videoCapabilities),Qn=Vn.next();!Qn.done;Qn=Vn.next())ar=Qn.value,ar.encryptionScheme=Kt,ar.robustness=$t;for(Ar=g(An.audioCapabilities),Qr=Ar.next();!Qr.done;Qr=Ar.next())Yr=Qr.value,Yr.encryptionScheme=Kt,Yr.robustness=En;return Si=Aa(An),Si.persistentState="required",Si.sessionTypes=["persistent-license"],Pr=[Si,An],C(si,navigator.requestMediaKeySystemAccess(nn,Pr),4);case 4:return Fr=si.h,C(si,S(nn,Fr),5);case 5:me(si,0);break;case 2:be(si),X(si)}})},B=function(nn,Kt,$t,En){var An,Vn,Qn;return Re(function(ar){switch(ar.g){case 1:return ce(ar,2),An={type:"media-source",video:{contentType:u[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:c[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:nn,video:{encryptionScheme:Kt,robustness:$t},audio:{encryptionScheme:Kt,robustness:En}}},C(ar,navigator.mediaCapabilities.decodingInfo(An),4);case 4:return Vn=ar.h,Qn=Vn.keySystemAccess,C(ar,S(nn,Qn),5);case 5:me(ar,0);break;case 2:be(ar),X(ar)}})},z=g(e),J=z.next();!J.done;J=z.next())fe=J.value,v.set(fe,null);for(he=[],Ee=g(h),Le=Ee.next();!Le.done;Le=Ee.next())for(Fe=Le.value,it=g(e),Ue=it.next();!Ue.done;Ue=it.next())Qe=Ue.value,Qe==="org.w3.clearkey"&&Zs()||(he.push(R(Qe,Fe,"","")),he.push(B(Qe,Fe,"","")));for(rt=g(e),dt=rt.next();!dt.done;dt=rt.next())for(gt=dt.value,kt=g(r[gt]||[]),It=kt.next();!It.done;It=kt.next())Ut=It.value,he.push(R(gt,null,Ut,"")),he.push(R(gt,null,"",Ut)),he.push(B(gt,null,Ut,"")),he.push(B(gt,null,"",Ut));return C(Nt,Promise.all(he),2)}return Nt.return(ip(v))})}function Zt(e){var t;return Re(function(n){if(n.g==1)return t=new Promise(function(r,u){new on(u).Z(Bn)}),ce(n,2),C(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return me(n,0);be(n),X(n)})}function xn(e){var t;return Re(function(n){return t=Array.from(e.i.entries()),e.i.clear(),C(n,Promise.all(t.map(function(r){r=g(r);var u=r.next().value,c=r.next().value;return Re(function(f){if(f.g==1)return ce(f,2),e.ga||e.A.has(u.sessionId)||c.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?C(f,Zt(u),5):C(f,u.remove(),5);if(f.g!=2)return me(f,0);be(f),X(f)})})),0)})}function at(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function St(e){e.i.forEach(function(t,n){var r=t.Af,u=n.expiration;isNaN(u)&&(u=1/0),u!=r&&(e.C.onExpirationUpdated(n.sessionId,u),t.Af=u)})}function Qt(e){return e=e.i.values(),rp(e,function(t){return t.loaded})}function Pt(e){for(var t=g(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.aa.get(n.value)!=="usable")return!1;return!0}function un(e,t){var n=[];for(t.forEach(function(r,u){n.push({keySystem:u,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=g(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function an(e,t,n,r,u,c,f,h){var v=[];e=g(e);for(var S=e.next(),R={};!S.done;R={ua:void 0},S=e.next()){if(R.ua=S.value,t.includes(R.ua.encryptionScheme)||t.push(R.ua.encryptionScheme),R.ua.keySystem=="org.w3.clearkey"&&R.ua.licenseServerUri.startsWith("data:application/json;base64,")?v.includes(R.ua.licenseServerUri)||v.push(R.ua.licenseServerUri):n.includes(R.ua.licenseServerUri)||n.push(R.ua.licenseServerUri),u.includes(R.ua.serverCertificateUri)||u.push(R.ua.serverCertificateUri),R.ua.serverCertificate&&(r.some(function(J){return function(fe){return no(fe,J.ua.serverCertificate)}}(R))||r.push(R.ua.serverCertificate)),R.ua.initData){S=g(R.ua.initData);for(var B=S.next(),z={};!B.done;z={mf:void 0},B=S.next())z.mf=B.value,c.some(function(J){return function(fe){var he=J.mf;return fe.keyId&&fe.keyId==he.keyId?!0:fe.initDataType==he.initDataType&&no(fe.initData,he.initData)}}(z))||c.push(z.mf)}if(R.ua.keyIds)for(S=g(R.ua.keyIds),B=S.next();!B.done;B=S.next())f.add(B.value);if(R.ua.keySystemUris&&h)for(R=g(R.ua.keySystemUris),S=R.next();!S.done;S=R.next())h.add(S.value)}if(v.length==1)n.push(v[0]);else if(0<v.length){for(t=[],v=g(v),r=v.next();!r.done;r=v.next())r=m.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,T(r.keys));v=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+m.btoa(v))}}function Jt(e,t,n,r){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(u)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[u]&&(e.keySystem=r[u]),m.cast&&m.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Bn=1,kn=5,mr=.5;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function vr(e,t,n){this.h=e,this.i=t,this.g=n}function Ct(e,t){return Re(function(n){if(n.g==1)return C(n,FE(e.g,t,e.h.drm.preferredKeySystems),2);if(e.h.streaming.dontChooseCodecs||Im(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes),!t.variants.some(Fl))throw new Xe(2,4,4032);return n.return(qt(e,t))})}function tn(e,t){var n=e.h.restrictions;e=e.i;var r=!1;t=g(t.variants);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=u.allowedByApplication;u.allowedByApplication=xc(u,n,e),c!=u.allowedByApplication&&(r=!0)}return r}function qt(e,t){var n=tn(e,t);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var u=g(t.variants),c=u.next();!c.done;c=u.next())c=c.value,mn(e,r.keySystem,c.video),mn(e,r.keySystem,c.audio);Cn(e,t)}return n}function mn(e,t,n){if(n){n=g(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=g(r.initData||[]);for(var u=r.next();!u.done;u=r.next())u=u.value,Pe(e.g,u.initDataType,u.initData)}}}function Cn(e,t){e=e.g?e.g.Id():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,u=!1,c=new Set,f=new Set;t=g(t.variants);for(var h=t.next();!h.done;h=t.next()){h=h.value;var v=[];h.audio&&v.push(h.audio),h.video&&v.push(h.video),v=g(v);for(var S=v.next();!S.done;S=v.next())if(S=S.value,S.keyIds.size){S=g(S.keyIds);for(var R=S.next();!R.done;R=S.next()){R=R.value;var B=e[n?"00":R];B?Zn.includes(B)&&f.add(B):c.add(R)}}h.allowedByApplication?h.allowedByKeySystem&&(r=!0):u=!0}if(!r)throw e={hasAppRestrictions:u,missingKeys:Array.from(c),restrictedKeyStatuses:Array.from(f)},new Xe(2,4,4012,e)}var Zn=["output-restricted","internal-error"];function Fn(){}function qn(e,t){if(t){var n=Yn[t.toLowerCase()];if(n)return n}throw new Xe(2,4,4e3,e,t)}ne("shaka.media.ManifestParser",Fn),Fn.unregisterParserByMime=function(e){delete Yn[e]},Fn.registerParserByMime=function(e,t){Yn[e]=t},Fn.registerParserByExtension=function(){gr("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Fn.AccessibilityPurpose={bk:"visually impaired",tj:"hard of hearing"};var Yn={};function en(e,t){function n(){c=!0}function r(R){h.push(R),W(R)}var u=e=nr(e),c=!1,f,h=[],v=[];if(new V().box("moov",r).box("trak",r).box("mdia",r).box("minf",r).box("stbl",r).R("stsd",function(R){f=R,h.push(R),ee(R)}).R("encv",n).R("enca",n).R("dvav",function(R){v.push({box:R,Oa:1701733238})}).R("dva1",function(R){v.push({box:R,Oa:1701733238})}).R("dvh1",function(R){v.push({box:R,Oa:1701733238})}).R("dvhe",function(R){v.push({box:R,Oa:1701733238})}).R("dvc1",function(R){v.push({box:R,Oa:1701733238})}).R("dvi1",function(R){v.push({box:R,Oa:1701733238})}).R("hev1",function(R){v.push({box:R,Oa:1701733238})}).R("hvc1",function(R){v.push({box:R,Oa:1701733238})}).R("avc1",function(R){v.push({box:R,Oa:1701733238})}).R("avc3",function(R){v.push({box:R,Oa:1701733238})}).R("ac-3",function(R){v.push({box:R,Oa:1701733217})}).R("ec-3",function(R){v.push({box:R,Oa:1701733217})}).R("ac-4",function(R){v.push({box:R,Oa:1701733217})}).R("mp4a",function(R){v.push({box:R,Oa:1701733217})}).parse(e),c)return e;if(v.length==0||!f)throw za(e),new Xe(2,3,3019,t);v.reverse(),t=g(v);for(var S=t.next();!S.done;S=t.next())S=S.value,u=Nn(u,f,S.box,h,S.Oa);return xr()&&Rl()?(t=new Uint8Array(e.byteLength+u.byteLength),t.set(u),t.set(e,u.byteLength),t):u}function Nn(e,t,n,r,u){var c=On.value(),f=e.subarray(n.start,n.start+n.size),h=ln(f),v=new Uint8Array(n.size+c.byteLength);for(v.set(f,0),f=ln(v),f.setUint32(4,u),v.set(c,n.size),u=h.getUint32(4),f.setUint32(n.size+16,u),Pn(v,0,v.byteLength),u=new Uint8Array(e.byteLength+v.byteLength),n=Rr()||xr()?n.start:n.start+n.size,c=e.subarray(n),u.set(e.subarray(0,n)),u.set(v,n),u.set(c,n+v.byteLength),e=g(r),r=e.next();!r.done;r=e.next())r=r.value,Pn(u,r.start,r.size+v.byteLength);return v=ln(u,t.start),t=ie(t),e=v.getUint32(t),v.setUint32(t,e+1),u}function Pn(e,t,n){e=ln(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var On=new Un(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function Dn(e,t,n,r,u,c,f){this.M=e,this.Ha=t,this.va=n,this.Kc=r===void 0?null:r,this.timescale=u===void 0?null:u,this.g=c===void 0?null:c,this.aesKey=f===void 0?null:f,this.mimeType=this.codecs=null}Dn.prototype.Yb=function(){return this.Ha},Dn.prototype.Wb=function(){return this.va},Dn.prototype.cd=function(){return this.g};function bt(e,t){return e===t?!0:e&&t?e.Yb()==t.Yb()&&e.Wb()==t.Wb()&&fn(e.M().sort(),t.M().sort())&&no(e.cd(),t.cd()):e==t}ne("shaka.media.InitSegmentReference",Dn),Dn.prototype.getEndByte=Dn.prototype.Wb,Dn.prototype.getStartByte=Dn.prototype.Yb;function et(e,t,n,r,u,c,f,h,v,S,R,B,z,J,fe,he){for(S=S===void 0?[]:S,J=J===void 0?Ve:J,this.startTime=e,this.j=this.endTime=t,this.F=n,this.Ha=r,this.va=u,this.$=c,this.timestampOffset=f,this.appendWindowStart=h,this.appendWindowEnd=v,this.g=S,this.tilesLayout=R===void 0?"":R,this.B=B===void 0?null:B,this.h=z===void 0?null:z,this.status=J,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=fe===void 0?null:fe,this.A=null,this.i=0,this.o=he===void 0?!1:he,this.G=this.s=!1,e=g(this.g),t=e.next();!t.done;t=e.next())t.value.Hg();this.o&&this.g.length&&this.g[this.g.length-1].Gg(),this.C=this.bandwidth=this.mimeType=this.codecs=null}p=et.prototype,p.M=function(){return this.F()},p.getStartTime=function(){return this.startTime},p.Kh=function(){return this.endTime},p.Yb=function(){return this.Ha},p.Wb=function(){return this.va},p.bi=function(){return this.tilesLayout},p.ai=function(){return this.B},p.Zb=function(){return this.status},p.ui=function(){this.status=tt},p.xf=function(){this.preload=!0},p.isPreload=function(){return this.preload},p.Jc=function(){this.l=!1},p.li=function(){return this.l},p.Hg=function(){this.s=!0},p.ni=function(){return this.s},p.Gg=function(){this.G=!0},p.mi=function(){return this.G},p.Fg=function(){this.m=!0},p.hi=function(){return this.m},p.bh=function(e){this.A=e},p.$h=function(){return this.A},p.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=g(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},p.Uf=function(e){this.h==null?pe("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},p.Xi=function(e){this.C=e},p.cd=function(){return this.C};function zt(e,t){e.$=t,e=g(e.g);for(var n=e.next();!n.done;n=e.next())zt(n.value,t)}ne("shaka.media.SegmentReference",et),et.prototype.getSegmentData=et.prototype.cd,et.prototype.setSegmentData=et.prototype.Xi,et.prototype.syncAgainst=et.prototype.Uf,et.prototype.offset=et.prototype.offset,et.prototype.getThumbnailSprite=et.prototype.$h,et.prototype.setThumbnailSprite=et.prototype.bh,et.prototype.hasByterangeOptimization=et.prototype.hi,et.prototype.markAsByterangeOptimization=et.prototype.Fg,et.prototype.isLastPartial=et.prototype.mi,et.prototype.markAsLastPartial=et.prototype.Gg,et.prototype.isPartial=et.prototype.ni,et.prototype.markAsPartial=et.prototype.Hg,et.prototype.isIndependent=et.prototype.li,et.prototype.markAsNonIndependent=et.prototype.Jc,et.prototype.isPreload=et.prototype.isPreload,et.prototype.markAsPreload=et.prototype.xf,et.prototype.markAsUnavailable=et.prototype.ui,et.prototype.getStatus=et.prototype.Zb,et.prototype.getTileDuration=et.prototype.ai,et.prototype.getTilesLayout=et.prototype.bi,et.prototype.getEndByte=et.prototype.Wb,et.prototype.getStartByte=et.prototype.Yb,et.prototype.getEndTime=et.prototype.Kh,et.prototype.getStartTime=et.prototype.getStartTime,et.prototype.getUris=et.prototype.M;var Ve=0,tt=1;et.Status={fj:Ve,$j:tt,Bj:2};function Lt(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function yn(e){return!e||Lt(e)?null:e.length?e.end(e.length-1):null}function bn(e,t){return!e||!e.length||Lt(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function yr(e,t){if(!e||!e.length||Lt(e))return 0;var n=0;e=g(gi(e));for(var r=e.next();!r.done;r=e.next()){var u=r.value;r=u.start,u=u.end,u>t&&(n+=u-Math.max(r,t))}return n}function oi(e,t,n){return!e||!e.length||Lt(e)?null:(e=gi(e).findIndex(function(r,u,c){return r.start>t&&(u==0||c[u-1].end-t<=n)}),0<=e?e:null)}function gi(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Xr(){}function Lo(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function zi(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Cs(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function ol(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=br(nr(e.data,1,n)),u=e.data[2+n],c=e.data.subarray(3+n).indexOf(0);if(c===-1)return null;var f=br(nr(e.data,3+n,c)),h;return r==="-->"?h=br(nr(e.data,4+n+c)):h=Ni(e.data.subarray(4+n+c)),t.mimeType=r,t.pictureType=u,t.description=f,t.data=h,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=br(nr(e.data,1,r)),e=br(nr(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=br(nr(e.data,1,r)),e=br(nr(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=br(nr(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Ni(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=br(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=br(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ni(e.data),t):null}function la(e){for(var t=0,n=[];Lo(e,t);){var r=Cs(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var u=e.subarray(t),c=Cs(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:c,data:u.subarray(10,10+c)},(c=ol(u))&&n.push(c),t+=u.size+10}zi(e,t)&&(t+=10)}return n}function ko(e,t){for(var n=t=t===void 0?0:t,r=0;Lo(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=Cs(e,t+6),zi(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}ne("shaka.util.Id3Utils",Xr),Xr.getID3Data=ko,Xr.getID3Frames=la;function bs(e,t){var n=null,r=null,u=null,c=e.P();return t&1&&(u=e.Pc()),t&2&&e.skip(4),t&8&&(n=e.P()),t&16&&(r=e.P()),{trackId:c,Zc:n,Fd:r,dk:u}}function To(e,t){return t==1?(t=e.P(),e=e.P(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.P()}}function $a(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.P(),e.skip(4),e=e.la(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function bu(e,t,n){var r=e.P(),u=[],c=null;n&1&&(c=e.P()),n&4&&e.skip(4);for(var f=0;f<r;f++){var h={Kf:null,sampleSize:null,ke:null};n&256&&(h.Kf=e.P()),n&512&&(h.sampleSize=e.P()),n&1024&&e.skip(4),n&2048&&(h.ke=t==0?e.P():e.Pg()),u.push(h)}return{hk:r,Tg:u,Dh:c}}function ca(e){e.skip(6),e.skip(2),e.skip(8);var t=e.la();return e.skip(2),e.skip(2),e.skip(2),e=e.la()+e.la()/65536,{channelCount:t,sampleRate:e}}function Zl(e){return e=e.P(),{codec:Te(e)}}function Xf(e){var t=null,n=null,r=e.rb(4),u=String.fromCharCode(r[0]);if(u+=String.fromCharCode(r[1]),u+=String.fromCharCode(r[2]),u+=String.fromCharCode(r[3]),u==="nclx"){switch(e.la()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.la(),e.la(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,vd:n}}function Ru(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function ji(e){return(10>e?"0":"")+e}function xa(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=nr(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Qs(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new k(n,0).P(),e.g=8*r,e.i-=r)}function xt(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Qs(e)}e.h<<=t,e.g-=t}function Wt(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Qs(e),n=t-n,0<n?r<<n|Wt(e,n):r}function Xn(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Qs(e),t+Xn(e)}function Jn(e){xt(e,1+Xn(e))}function Tn(e){var t=Xn(e);return Wt(e,t+1)-1}function Cr(e){return e=Tn(e),1&e?1+e>>>1:-1*(e>>>1)}function Sn(e){return Wt(e,1)===1}function or(e){return Wt(e,8)}function Jr(e,t){for(var n=8,r=8,u=0;u<t;u++)r!==0&&(r=Cr(e),r=(n+r+256)%256),n=r===0?n:r}function Js(e){return or(e),Tn(e),Tn(e)}ne("shaka.util.ExpGolomb",xa);function kr(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}p=kr.prototype,p.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},p.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,QE(e)),n=e.length-(e.length+t)%188,r=!1,u=t;u<n;u+=188)if(e[u]==71){var c=!!(e[u+1]&64),f=((e[u+1]&31)<<8)+e[u+2];if(1<(e[u+3]&48)>>4){var h=u+5+e[u+4];if(h==u+188)continue}else h=u+4;switch(f){case 0:c&&(h+=e[h]+1),this.G=(e[h+10]&31)<<8|e[h+11];break;case 17:case 8191:break;case this.G:c&&(h+=e[h]+1),c=e,f={audio:-1,video:-1,Od:-1,audioCodec:"",videoCodec:""};var v=h+3+((c[h+1]&15)<<8|c[h+2])-4;for(h+=12+((c[h+10]&15)<<8|c[h+11]);h<v;){var S=(c[h+1]&31)<<8|c[h+2],R=(c[h+3]&15)<<8|c[h+4];switch(c[h]){case 6:if(0<R)for(var B=h+5,z=R;2<z;){var J=c[B+1]+2;switch(c[B]){case 5:var fe=oa(c.subarray(B+2,B+J));f.audio==-1&&fe==="Opus"?(f.audio=S,f.audioCodec="opus"):f.video==-1&&fe==="AV01"&&(f.video=S,f.videoCodec="av1");break;case 106:f.audio==-1&&(f.audio=S,f.audioCodec="ac3");break;case 122:f.audio==-1&&(f.audio=S,f.audioCodec="ec3");break;case 124:f.audio==-1&&(f.audio=S,f.audioCodec="aac");break;case 127:f.audioCodec=="opus"&&(fe=null,c[B+2]===128&&(fe=c[B+3]),fe!=null&&(this.F={channelCount:fe&15?fe&15:2,Ah:fe,sampleRate:48e3}))}B+=J,z-=J}break;case 15:f.audio==-1&&(f.audio=S,f.audioCodec="aac");break;case 17:f.audio==-1&&(f.audio=S,f.audioCodec="aac-loas");break;case 21:f.Od==-1&&(f.Od=S);break;case 27:f.video==-1&&(f.video=S,f.videoCodec="avc");break;case 3:case 4:f.audio==-1&&(f.audio=S,f.audioCodec="mp3");break;case 36:f.video==-1&&(f.video=S,f.videoCodec="hvc");break;case 129:f.audio==-1&&(f.audio=S,f.audioCodec="ac3");break;case 132:case 135:f.audio==-1&&(f.audio=S,f.audioCodec="ec3")}h+=R+5}c=f,c.video!=-1&&(this.I=c.video,this.m=c.videoCodec),c.audio!=-1&&(this.B=c.audio,this.A=c.audioCodec),c.Od!=-1&&(this.C=c.Od),r&&!this.H&&(r=!1,u=t-188),this.H=!0;break;case this.I:h=e.subarray(h,u+188),c?this.j.push([h]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(h);break;case this.B:h=e.subarray(h,u+188),c?this.i.push([h]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(h);break;case this.C:h=e.subarray(h,u+188),c?this.l.push([h]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(h);break;default:r=!0}}return this};function XE(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var u=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=u),n.pts=SR(u,e.s),e.s=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=SR(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}p.Ai=function(e){return gr("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Df(e)},p.Df=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var u=e.byteLength,c=1;this.m=="hvc"&&(c=2);for(var f=n||0,h=[],v=-1,S=0,R,B=0;B<u;++B){var z=e[B];if(z){if(2<=f&&z==1){if(t&&!h.length&&v==-1&&(z=B-(3<f?3:f),n&&z!=0&&(z=e.subarray(0,z),t.data=hi(t.data,z),t.fullData=hi(t.fullData,z))),0<=v?(f=B-((3<f?3:f)+1),h.push({data:e.subarray(v+c,f+1),fullData:e.subarray(v,f+1),type:S,time:r})):t&&!h.length&&(v=B-f,0<v&&(v=e.subarray(0,v),t.data=hi(t.data,v),t.fullData=hi(t.fullData,v))),B>=u-c)return h;B++,v=B,S=this.m=="hvc"?e[B]>>1&63:e[B]&31}f=0}else f++;B>=u-1&&0<=v&&0<=f&&(R={data:e.subarray(v+c,u),fullData:e.subarray(v,u),type:S,time:r})}return R&&h.push(R),!h.length&&t&&(t.data=hi(t.data,e),t.fullData=hi(t.fullData,e)),h},p.getMetadata=function(){for(var e=[],t=g(this.l),n=t.next();!n.done;n=t.next())n=hi.apply(co,T(n.value)),(n=XE(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:la(n.data),dts:n.dts,pts:n.pts});return e},p.Vb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=g(this.i),n=t.next();!n.done;n=t.next()){var r=hi.apply(co,T(n.value)),u=XE(this,r);n=this.h.length?this.h[this.h.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!n||n.pts!=u.pts&&n.dts!=u.dts)?(this.h.length&&u.dts<(n.dts||0)&&(e=!0),this.h.push(u)):this.h.length&&(r=u?u.data:r)&&(n=this.h.pop(),n.data=hi(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(c,f){var h=(c.pts||0)-(f.pts||0);return(c.dts||0)-(f.dts||0)||h}))}return this.h},p.nc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=g(this.j),r=n.next();!r.done;r=n.next()){var u=hi.apply(co,T(r.value)),c=XE(this,u);r=this.g.length?this.g[this.g.length-1]:null,c&&c.pts!=null&&c.dts!=null&&(!r||r.pts!=c.pts&&r.dts!=c.dts)?(this.g.length&&c.dts<(r.dts||0)&&(t=!0),this.g.push(c)):this.g.length&&(u=c?c.data:u)&&(r=this.g.pop(),r.data=hi(r.data,u),this.g.push(r))}if(e){for(n=[],r=g(this.g),u=r.next();!u.done;u=r.next())if(u=u.value,u.nalus=this.Df(u,f,void 0),u.nalus.length){n.push(u);var f=u.nalus[u.nalus.length-1]}this.g=n}t&&(this.g=this.g.sort(function(h,v){var S=(h.pts||0)-(v.pts||0);return(h.dts||0)-(v.dts||0)||S}))}return e?this.g:(e=this.g,this.g=[],e)},p.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Vb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.nc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},p.$c=function(){return{audio:this.A,video:this.m}},p.Md=function(){for(var e=[],t=g(this.nc()),n=t.next();!n.done;n=t.next())e.push.apply(e,T(n.value.nalus));return e},p.ei=function(){gr("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.kf();return{height:e.height,width:e.width}},p.kf=function(){return this.m=="hvc"?v8(this):m8(this)};function TR(e){var t=e.nc();return 1<t.length&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function m8(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Md();if(!n.length||(n=n.find(function(J){return J.type==7}),!n))return t;n=new xa(n.data);var r=or(n),u=or(n),c=or(n);if(Jn(n),y8.includes(r)){var f=Tn(n);if(f===3&&xt(n,1),Jn(n),Jn(n),xt(n,1),Sn(n)){f=f!==3?8:12;for(var h=0;h<f;h++)Sn(n)&&(6>h?Jr(n,16):Jr(n,64))}}if(Jn(n),f=Tn(n),f===0)Tn(n);else if(f===1)for(xt(n,1),Jn(n),Jn(n),f=Tn(n),h=0;h<f;h++)Jn(n);Jn(n),xt(n,1),f=Tn(n),h=Tn(n);var v=Wt(n,1);v===0&&xt(n,1),xt(n,1);var S=0,R=0,B=0,z=0;return Sn(n)&&(S=Tn(n),R=Tn(n),B=Tn(n),z=Tn(n)),t.height=String((2-v)*(h+1)*16-2*B-2*z),t.width=String(16*(f+1)-2*S-2*R),t.codec="avc1."+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2)+("0"+c.toString(16).toUpperCase()).slice(-2),t.frameRate=TR(e),t}function v8(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Md();if(!n.length||(n=n.find(function(Qe){return Qe.type==33}),!n))return t;var r=new xa(n.fullData,!0);or(r),or(r),Wt(r,4);var u=Wt(r,3);Sn(r);var c=Wt(r,2),f=Wt(r,1),h=Wt(r,5),v=Wt(r,32);n=or(r);for(var S=or(r),R=or(r),B=or(r),z=or(r),J=or(r),fe=or(r),he=[],Ee=[],Le=0;Le<u;Le++)he.push(Sn(r)),Ee.push(Sn(r));if(0<u)for(Le=u;8>Le;Le++)Wt(r,2);for(Le=0;Le<u;Le++)he[Le]&&Wt(r,88),Ee[Le]&&or(r);Tn(r),u=Tn(r),u==3&&Wt(r,1),he=Tn(r),Ee=Tn(r);var Fe=Le=0,it=0,Ue=0;return Sn(r)&&(Le+=Tn(r),Fe+=Tn(r),it+=Tn(r),Ue+=Tn(r)),t.width=String(he-(Le+Fe)*(u===1||u===2?2:1)),t.height=String(Ee-(it+Ue)*(u===1?2:1)),r=function(Qe){for(var rt=0,dt=0;32>dt;dt++)rt|=(Qe>>dt&1)<<31-dt;return rt>>>0}(v),f=f==1?"H":"L",c="hvc1"+("."+["","A","B","C"][c]+h),c+="."+r.toString(16).toUpperCase(),c+="."+f+fe,J&&(c+="."+J.toString(16).toUpperCase()),z&&(c+="."+z.toString(16).toUpperCase()),B&&(c+="."+B.toString(16).toUpperCase()),R&&(c+="."+R.toString(16).toUpperCase()),S&&(c+="."+S.toString(16).toUpperCase()),n&&(c+="."+n.toString(16).toUpperCase()),t.codec=c,t.frameRate=TR(e),t}function SR(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function op(e){return!(0>QE(e))}function QE(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}ne("shaka.util.TsParser",kr),kr.syncOffset=QE,kr.probe=op,kr.prototype.getVideoInfo=kr.prototype.kf,kr.prototype.getVideoResolution=kr.prototype.ei,kr.prototype.getVideoNalus=kr.prototype.Md,kr.prototype.getCodecs=kr.prototype.$c,kr.prototype.getStartTime=kr.prototype.getStartTime,kr.prototype.getVideoData=kr.prototype.nc,kr.prototype.getAudioData=kr.prototype.Vb,kr.prototype.getMetadata=kr.prototype.getMetadata,kr.prototype.parseNalus=kr.prototype.Df,kr.prototype.parseAvcNalus=kr.prototype.Ai,kr.prototype.parse=kr.prototype.parse,kr.prototype.clearData=kr.prototype.clearData,kr.Timescale=9e4;var y8=[100,110,122,244,44,83,86,118,128,138,139,134];function ap(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&Ke("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,gr("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Ke("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(Ke("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Ke(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function wR(e){e.g&&e.i.classList.add("shaka-hidden")}ap.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function AR(e,t,n){var r=0,u=-1;switch(t.mimeType){case"video/webm":r=1;break;case"video/mp4":r=2}switch(n){case"DASH":u=1;break;case"HLS":u=0}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(u))}ne("shaka.lcevc.Dec",ap),ap.prototype.release=ap.prototype.release;function IR(e,t,n,r){var u=this;this.i=e,this.aa=n,this.A=null,this.ba=t,this.h={},this.F={},this.Da={},this.g=null,this.fa=!1,this.T=r||null,this.l={},this.s=new Tt,this.j={},this.G=null,this.K=new Lr,this.L="",this.sa=!1,this.m=CR(this,this.K),this.C=!1,this.H=new jl(function(){return _8(u)}),this.B=!1,this.X="UNKNOWN",this.Ea=this.Fa=!1,this.za=new Lr,this.o=!1,this.ta=!0,this.ka=this.N=this.oa=this.O=this.I=this.ea=null,this.ga=new Lr}function CR(e,t){if(m.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.s.D(n,"startstreaming",function(){e.ta=!0}),e.s.D(n,"endstreaming",function(){e.ta=!1}),e.s.pa(n,"sourceopen",function(){URL.revokeObjectURL(e.L),t.resolve()}),e.s.pa(e.i,"playing",function(){e.sa=!0}),e.L=ev(n),e.i.src=e.L,n}return n=new MediaSource,e.s.pa(n,"sourceopen",function(){URL.revokeObjectURL(e.L),t.resolve()}),e.s.pa(e.i,"playing",function(){e.sa=!0}),e.L=ev(n),e.i.src=e.L,n}function E8(e,t){var n,r,u,c,f,h,v,S,R,B,z;return Re(function(J){if(J.g==1)return e.createSegmentIndex?C(J,e.createSegmentIndex(),2):J.u(2);if(!e.segmentIndex)return J.return(!1);if(e.segmentIndex.getNumReferences()==0)return J.return(!0);for(n=Mi,r=new Set,u=g(e.segmentIndex),c=u.next();!c.done;c=u.next())if(f=c.value,h=f.mimeType||e.mimeType||"",v=f.codecs||e.codecs||"",S=h+":"+v,!r.has(S)){if(r.add(S),t==n.wa){if(R=Di(h,v),!Ac(R))return J.return(!1)}else if(t==n.ja?v=Is(v):t==n.Y&&(v=tl(v,h)),B=Bh(e,h,v),z=Qu(h,v),!Ft(B)&&!wu(z))return J.return(!1)}return J.return(!0)})}p=IR.prototype,p.destroy=function(){return this.H.destroy()};function _8(e){var t,n,r,u,c,f,h,v;return Re(function(S){if(S.g==1){t=[];for(n in e.l)for(r=e.l[n],u=r[0],e.l[n]=r.slice(0,1),u&&t.push(u.p.catch(Am)),c=g(r.slice(1)),f=c.next();!f.done;f=c.next())h=f.value,h.p.reject(new Xe(2,7,7003,void 0));e.g&&t.push(e.g.destroy());for(v in e.j)t.push(e.j[v].destroy());return C(S,Promise.all(t),2)}e.s&&(e.s.release(),e.s=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.m=null,e.g=null,e.ba=null,e.h={},e.j={},e.G=null,e.l={},e.T=null,e.I=null,e.aa=null,X(S)})}p.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var u=this,c,f,h,v,S;return Re(function(R){switch(R.g){case 1:return c=Mi,C(R,u.K,2);case 2:u.B=t,u.X=n,u.Fa=r,u.Ea=!u.B&&u.X=="HLS"&&!u.Fa,u.I=null,f=g(e.keys()),h=f.next();case 3:if(h.done){R.u(0);break}return v=h.value,S=e.get(v),C(R,$m(u,v,S,S.codecs),6);case 6:u.o?(u.l[c.Y]=[],u.l[c.ja]=[]):u.l[v]=[],h=f.next(),R.u(3)}})};function $m(e,t,n,r){var u,c,f,h,v,S,R,B,z,J,fe,he;return Re(function(Ee){switch(Ee.g){case 1:return u=Mi,c=Be,f=L,C(Ee,E8(n,t),2);case 2:if(f.call(c,Ee.h,"Type negotiation should happen before MediaSourceEngine.init!"),h=Di(n.mimeType,r),t==u.wa){Xm(e,h,e.B,n.external),Ee.u(0);break}if(v=e.A.forceTransmux,(!Ft(h)||!e.B&&Iu.includes(h))&&(v=!0),S=Qu(n.mimeType,r),!v){Ee.u(4);break}if(R=Co(u.Y,(r||"").split(",")),B=Co(u.ja,(r||"").split(",")),!R||!B){Ee.u(5);break}return e.o=!0,C(Ee,$m(e,u.Y,n,R),6);case 6:return C(Ee,$m(e,u.ja,n,B),7);case 7:return Ee.return();case 5:(z=wu(S))&&(J=z(),e.j[t]=J,h=J.convertCodecs(t,S));case 4:fe=h+e.A.addExtraFeaturesToSourceBuffer(h),Zr(e.H);try{he=e.m.addSourceBuffer(fe)}catch(Le){throw new Xe(2,3,3015,Le,"The mediaSource_ status was "+e.m.readyState+" expected 'open'",null)}e.B&&(he.mode=D8),e.s.D(he,"error",function(){var Le=e.l[t][0];Le.p.reject(new Xe(2,3,3014,e.i.error?e.i.error.code:0,Le.uri))}),e.s.D(he,"updateend",function(){return al(e,t)}),e.h[t]=he,e.F[t]=h,e.Da[t]=!!n.drmInfos.length,X(Ee)}})}p.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function Xm(e,t,n,r){e.g||(e.g=new As(e.ba),e.g&&(e.g.A=e.A.modifyCueCallback));var u=e.g;r=r||e.fa,e=e.X,t=="application/cea-608"||t=="application/cea-708"?u.i=null:(u.i=(0,_i[t])(),u.i.setSequenceMode?u.i.setSequenceMode(n):gr("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):gr("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.B=r)}function bR(e){return e.C?!1:e.m?e.m.readyState=="ended":!0}function JE(e,t){return e.C||!Object.keys(e.h).length?e=null:t==_r?e=e.g.g:(e=Qf(e,t),e=!e||Lt(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function sp(e,t){return e.C?null:t==_r?e.g.h:yn(Qf(e,t))}function T8(e,t,n){return e.C?0:t==_r?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Qf(e,t),yr(e,n))}p.xb=function(){var e={total:this.C?[]:gi(this.i.buffered),audio:this.C?[]:gi(Qf(this,"audio")),video:this.C?[]:gi(Qf(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Qf(e,t){try{return e.h[t].buffered}catch(n){return null}}function S8(e,t,n,r,u,c){var f=null,h=nr(n);if(Iu.includes(u))c=la(h),c.length&&r&&((t=c.find(function(B){return B.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(f=Math.round(t.data)/1e3),e.aa.onMetadata([{cueTime:r.startTime,data:h,frames:c,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(u.includes("/mp4")&&r&&r.timestampOffset==0&&r.$&&r.$.timescale){var v=r.$.timescale;if(!isNaN(v)){var S=0,R=!1;new V().box("moof",W).box("traf",W).R("tfdt",function(B){S=To(B.reader,B.version).baseMediaDecodeTime/v,R=!0,B.parser.stop()}).parse(n,!0),R&&(f=S)}}else!u.includes("/mp4")&&!u.includes("/webm")&&op(h)&&(e.I?e.I.clearData():e.I=new kr,h=e.I.parse(h),t=h.getStartTime(t),t!=null&&(f=t),h=h.getMetadata(),h.length)&&e.aa.onMetadata(h,c,r?r.endTime:null);return f}function Qm(e,t,n,r,u,c,f,h,v,S){f=f===void 0?!1:f,h=h===void 0?!1:h,v=v===void 0?!1:v,S=S===void 0?!1:S;var R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt;return Re(function(gt){switch(gt.g){case 1:if(R=Mi,t!=R.wa){gt.u(2);break}if(!e.B){gt.u(3);break}return C(gt,e.za,4);case 4:B=gt.h,e.g.s=B;case 3:return C(gt,Tm(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.M()[0]:null),5);case 5:return gt.return();case 2:if(S||!e.o){gt.u(6);break}return C(gt,Qm(e,R.Y,n,r,u,c,f,h,v,!0),7);case 7:return C(gt,Qm(e,R.ja,n,r,u,c,f,h,v,!0),8);case 8:return gt.return();case 6:if(!e.h[t])return gt.return();if(z=e.h[t].timestampOffset,J=e.F[t],e.j[t]&&(J=e.j[t].getOriginalMimeType()),r&&(fe=S8(e,t,n,r,J,z),fe!=null&&(e.O==null&&t==R.ja&&(e.O=fe,e.oa=r.startTime,e.N!=null&&(he=0,e.oa==e.ka&&(he=e.O-e.N),e.ga.resolve(he))),e.N==null&&t==R.Y&&(e.N=fe,e.ka=r.startTime,e.O!=null&&(Ee=0,e.oa==e.ka&&(Ee=e.O-e.N),e.ga.resolve(Ee))),Le=r.startTime-fe,Fe=Math.abs(z-Le),(.001<=Fe||f||h)&&(!v||0<Le||!z)&&(z=Le,e.Ea&&(ro(e,t,function(){return Jf(e,t)},null),ro(e,t,function(){return ed(e,t,z)},null))),it=t==R.ja||!(R.ja in e.h),e.B&&it&&e.za.resolve(z))),c&&t==R.ja&&(e.g||Xm(e,"application/cea-608",e.B,!1),e.G||(Ue=J.split(";",1)[0],e.G=new At(Ue)),r?(Qe=e.G.i(n),Qe.length&&wm(e.g,Qe,r.startTime,r.endTime,z)):e.G.init(n,h)),!e.j[t]){gt.u(9);break}return C(gt,e.j[t].transmux(n,u,r,e.m.duration,t),10);case 10:n=gt.h;case 9:if(n=b8(e,n,r?r.startTime:null,t,r?r.M()[0]:null),!r||!e.B||t==R.wa){gt.u(11);break}if(!f&&!h){gt.u(11);break}if(rt=r.startTime,e.X!="HLS"||e.o||t!=R.Y||!e.h[R.ja]){gt.u(13);break}return C(gt,e.ga,14);case 14:dt=gt.h,.1<Math.abs(dt)&&(rt-=dt);case 13:ro(e,t,function(){return Jf(e,t)},null),ro(e,t,function(){return ed(e,t,rt)},null);case 11:return C(gt,ro(e,t,function(){var kt=n;if(t=="video"&&e.T){var It=e.T;It.g&&It.g.appendBuffer(kt,"video",It.o,-z)}e.h[t].appendBuffer(kt)},r?r.M()[0]:null),15);case 15:X(gt)}})}function w8(e,t){var n=sp(e,"video")||0;jh(e.g,t,n)}function A8(e){e.g&&jh(e.g,"",0)}p.remove=function(e,t,n){var r=this,u;return Re(function(c){return c.g==1?(u=Mi,e==u.wa?C(c,r.g.remove(t,n),0):C(c,ro(r,e,function(){return Jm(r,e,t,n)},null),4)):r.o?C(c,ro(r,u.Y,function(){return Jm(r,u.Y,t,n)},null),0):c.u(0)})};function RR(e,t){var n;return Re(function(r){return r.g==1?(n=Mi,t==n.wa?e.g?C(r,e.g.remove(0,1/0),0):r.return():C(r,ro(e,t,function(){return Jm(e,t,0,e.m.duration)},null),4)):e.o?C(r,ro(e,n.Y,function(){return Jm(e,n.Y,0,e.m.duration)},null),0):r.u(0)})}p.flush=function(e){var t=this,n;return Re(function(r){return r.g==1?(n=Mi,e==n.wa?r.return():C(r,ro(t,e,function(){t.i.currentTime-=.001,al(t,e)},null),2)):t.o?C(r,ro(t,n.Y,function(){var u=n.Y;t.i.currentTime-=.001,al(t,u)},null),0):r.u(0)})};function I8(e,t,n,r,u,c,f,h,v){var S,R,B;return Re(function(z){return z.g==1?(S=Mi,t==S.wa?(c||(e.g.s=n),OE(e.g,r,u),z.return()):(R=[],C(z,N8(e,t,f,h,v),2))):(B=z.h,B||(R.push(ro(e,t,function(){return Jf(e,t)},null)),e.o&&R.push(ro(e,S.Y,function(){return Jf(e,S.Y)},null))),c||(R.push(ro(e,t,function(){return ed(e,t,n)},null)),e.o&&R.push(ro(e,S.Y,function(){return ed(e,S.Y,n)},null))),R.push(ro(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=u,e.h[t].appendWindowStart=r,al(e,t)},null)),e.o&&R.push(ro(e,S.Y,function(){var J=S.Y;e.h[J].appendWindowStart=0,e.h[J].appendWindowEnd=u,e.h[J].appendWindowStart=r,al(e,J)},null)),C(z,Promise.all(R),0))})}function C8(e,t,n){var r;return Re(function(u){return u.g==1?(r=Mi,t==r.wa?u.return():(t==r.ja&&(e.za=new Lr),ro(e,t,function(){return Jf(e,t)},null),e.o&&ro(e,r.Y,function(){return Jf(e,r.Y)},null),C(u,ro(e,t,function(){return ed(e,t,n)},null),2))):e.o?C(u,ro(e,r.Y,function(){return ed(e,r.Y,n)},null),0):u.u(0)})}p.endOfStream=function(e){var t=this;return Re(function(n){return C(n,e1(t,function(){bR(t)||t.m.readyState==="closed"||(e?t.m.endOfStream(e):t.m.endOfStream())}),0)})},p.Za=function(e){var t=this;return Re(function(n){return C(n,e1(t,function(){if(e<t.m.duration)for(var r in t.h){var u={start:function(){},p:new Lr,uri:null};t.l[r].unshift(u)}t.m.duration=e,t.ea=e}),0)})},p.getDuration=function(){return this.m.duration};function Jm(e,t,n,r){r<=n?al(e,t):e.h[t].remove(n,r)}function Jf(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,al(e,t)}function ed(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,al(e,t)}function al(e,t){if(!e.C){var n=e.l[t][0];n&&(n.p.resolve(),t1(e,t))}}function ro(e,t,n,r){return Zr(e.H),n={start:n,p:new Lr,uri:r},e.l[t].push(n),e.l[t].length==1&&xR(e,t),n.p}function e1(e,t){var n,r,u,c,f,h,v;return Re(function(S){switch(S.g){case 1:Zr(e.H),n=[],r={};for(u in e.h)r={ready:void 0},r.ready=new Lr,c={start:function(R){return function(){return R.ready.resolve()}}(r),p:r.ready,uri:null},e.l[u].push(c),n.push(r.ready),e.l[u].length==1&&c.start();return ce(S,2),C(S,Promise.all(n),4);case 4:me(S,3);break;case 2:throw f=be(S),f;case 3:return ce(S,5,6),C(S,t(),6);case 6:Je(S);for(h in e.h)t1(e,h);we(S,0);break;case 5:throw v=be(S),new Xe(2,3,3015,v,e.i.error||"No error in the media element",null)}})}function t1(e,t){e.l[t].shift(),xR(e,t)}function xR(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new Xe(2,3,3017,t)):n.p.reject(new Xe(2,3,3015,r,e.i.error||"No error in the media element",n.uri)),t1(e,t)}}function b8(e,t,n,r,u){var c=n==null,f=e.Da[r];return n=e.aa.Oh(),(c=e.A.insertFakeEncryptionInInit&&c&&f)&&(n=Vr(n),c=di()||Rr()||vu()||xr()&&Rl()&&n),c&&Ll(e.F[r])=="mp4"&&(t=en(t,u)),t}function R8(e,t,n,r){return ro(e,t,function(){t!==_r&&(Gn()&&(e.j[t]&&(e.j[t].destroy(),delete e.j[t]),r&&(e.j[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.F[t]=n),al(e,t))},null)}function x8(e,t){var n,r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt;return Re(function(It){switch(It.g){case 1:n=Mi,e.C=!0,e.o=!1,r=e.i.currentTime,u=e.i.autoplay,c=e.i.paused,e.sa&&(e.i.autoplay=!1),oe(It,2),e.s.Qa(),f=[];for(h in e.j)f.push(e.j[h].destroy());for(v in e.l)for(S=e.l[v],R=S[0],e.l[v]=S.slice(0,1),R&&f.push(R.p.catch(Am)),B=g(S.slice(1)),z=B.next();!z.done;z=B.next())J=z.value,J.p.reject(new Xe(2,7,7003,void 0));for(fe in e.h){he=e.h[fe];try{e.m.removeSourceBuffer(he)}catch(Ut){}}return C(It,Promise.all(f),4);case 4:return e.j={},e.h={},Ee=e.m.duration,e.K=new Lr,e.m=CR(e,e.K),C(It,e.K,5);case 5:!isNaN(Ee)&&Ee?e.m.duration=Ee:!isNaN(e.ea)&&e.ea&&(e.m.duration=e.ea),Le=new Lr,Fe=e.m.sourceBuffers,it=t.size,Ue=0,Qe=function(){Ue++,Ue===it&&(Le.resolve(),e.s.$a(Fe,"addsourcebuffer",Qe))},e.s.D(Fe,"addsourcebuffer",Qe),rt=g(t.keys()),dt=rt.next();case 6:return dt.done?(e.i.currentTime=r,C(It,Le,2)):(gt=dt.value,kt=t.get(gt),C(It,$m(e,gt,kt,kt.codecs),9));case 9:e.o?(e.l[n.Y]=[],e.l[n.ja]=[]):e.l[gt]=[],dt=rt.next(),It.u(6);break;case 2:Je(It),e.C=!1,Zr(e.H),e.s.pa(e.i,"canplaythrough",function(){e.H.g||(e.i.autoplay=u,c||e.i.play())}),we(It,0)}})}function NR(e,t){return e1(e,function(){return x8(e,t)})}function N8(e,t,n,r,u){var c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it;return Re(function(Ue){return Ue.g==1?(c=Mi,t==c.wa?Ue.return(!1):(f=_o(Oo(e.F[t])),h=ba(e.F[t]),S=!1,R=Di(n,r),B=e.A.forceTransmux,(!Ft(R)||!e.B&&Iu.includes(R))&&(B=!0),B&&(z=Qu(n,r),J=wu(z))&&(v=J(),fe=Co(c.Y,(r||"").split(",")),he=Co(c.ja,(r||"").split(",")),fe&&he?(S=!0,Ee=he,t==c.Y&&(Ee=fe),R=v.convertCodecs(t,Qu(n,Ee))):R=v.convertCodecs(t,z)),Le=_o(Oo(R)),Fe=ba(R),f===Le&&h===Fe?(e.j[t]&&!v?(e.j[t].destroy(),delete e.j[t]):!e.j[t]&&v?e.j[t]=v:v&&(e.j[t]&&e.j[t].transmux!=v.transmux?(e.j[t].destroy(),delete e.j[t],e.j[t]=v):v.destroy()),Ue.return(!1)):(it=!0,(e.o||S&&v&&!e.j[t])&&(it=!1),it&&e.A.codecSwitchingStrategy==="smooth"&&Gn()?C(Ue,R8(e,t,R,v),3):(v&&v.destroy(),C(Ue,NR(e,u),3))))):Ue.return(!0)})}function M8(e,t,n,r){if(t==_r)var u=!1;else{u=_o(Oo(e.F[t]));var c=ba(e.F[t]),f=Di(n,r),h=e.A.forceTransmux;(!Ft(f)||!e.B&&Iu.includes(f))&&(h=!0),n=Qu(n,r),h&&(h=wu(n))&&(h=h(),f=h.convertCodecs(t,n),h.destroy()),t=_o(Oo(f)),f=ba(f),u=u!==t||c!==f}return u?e.A.codecSwitchingStrategy!=="smooth"||!Gn()||e.o:!1}var ev=m.URL.createObjectURL,D8="sequence";function rr(e,t,n){this.i=e,this.B=t,this.o=this.j=1/0,this.h=1,this.g=this.l=null,this.A=0,this.G=!0,this.H=0,this.C=n===void 0?!0:n,this.F=0,this.s=!1,this.m=e}p=rr.prototype,p.getDuration=function(){return this.j},p.Qh=function(){return this.h},p.$g=function(e){this.i=e},p.Za=function(e){this.j=e},p.Vh=function(){return this.i},p.Yg=function(e){this.A=e},p.vc=function(e){this.G=e},p.ne=function(e){this.o=e},p.Ld=function(){return this.o},p.Of=function(e){this.B=e},p.Jh=function(){return this.B},p.Lg=function(e,t){if(e.length!=0){var n=(Date.now()+this.A)/1e3;if(e=e.filter(function(u){return u.start+t<n}),e.length!=0){var r=e[e.length-1].end+t;this.Zd(e[0].start+t),this.h=e.reduce(function(u,c){return Math.max(u,c.end-c.start)},this.h),this.g=Math.max(this.g,r),this.i!=null&&this.C&&!this.s&&(this.i=n-this.g-this.h)}}},p.qd=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.A)/1e3;e=g(e);for(var u=e.next();!u.done;u=e.next())u=u.value,r<u.startTime||(t=Math.min(t,u.startTime),n=Math.max(n,u.endTime),this.h=Math.max(this.h,u.endTime-u.startTime));this.Zd(t),this.g=Math.max(this.g,n),this.i!=null&&this.C&&!this.s&&(this.i=r-this.g-this.h)}},p.Kg=function(e,t){this.Zd(e),t==1/0||this.U()||(this.g=Math.max(this.g,t))},p.Rh=function(){return this.g},p.Ud=function(){this.s=!0},p.oi=function(){return this.s},p.Zg=function(e){this.m=e},p.Nh=function(){return this.m},p.Zd=function(e){this.l=this.l==null?e:Math.min(this.l,e)},p.yf=function(e){this.h=Math.max(this.h,e)},p.offset=function(e){this.l!=null&&(this.l+=e),this.g!=null&&(this.g+=e)},p.U=function(){return this.j==1/0&&!this.G},p.pc=function(){return this.j!=1/0&&!this.G},p.nb=function(){return Math.max(this.H,this.Xb()-this.o)},p.eh=function(e){this.H=e},p.Xb=function(){return this.U()||this.pc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.h-this.i)+this.F,this.j):this.g?Math.min(this.g,this.j):this.j},p.bd=function(e){var t=Math.max(this.l,this.H);return this.o==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Xb()-this.o+e,this.zb()))},p.Jb=function(){return this.bd(0)},p.zb=function(){return Math.max(0,this.Xb()-(this.U()||this.pc()?this.B:0))},p.lh=function(){return!(this.i==null||this.g!=null&&this.C)},p.Xg=function(e){this.F=e},p.Hh=function(){return this.F},ne("shaka.media.PresentationTimeline",rr),rr.prototype.getAvailabilityTimeOffset=rr.prototype.Hh,rr.prototype.setAvailabilityTimeOffset=rr.prototype.Xg,rr.prototype.usingPresentationStartTime=rr.prototype.lh,rr.prototype.getSeekRangeEnd=rr.prototype.zb,rr.prototype.getSeekRangeStart=rr.prototype.Jb,rr.prototype.getSafeSeekRangeStart=rr.prototype.bd,rr.prototype.getSegmentAvailabilityEnd=rr.prototype.Xb,rr.prototype.setUserSeekStart=rr.prototype.eh,rr.prototype.getSegmentAvailabilityStart=rr.prototype.nb,rr.prototype.isInProgress=rr.prototype.pc,rr.prototype.isLive=rr.prototype.U,rr.prototype.offset=rr.prototype.offset,rr.prototype.notifyMaxSegmentDuration=rr.prototype.yf,rr.prototype.notifyMinSegmentStartTime=rr.prototype.Zd,rr.prototype.getInitialProgramDateTime=rr.prototype.Nh,rr.prototype.setInitialProgramDateTime=rr.prototype.Zg,rr.prototype.isStartTimeLocked=rr.prototype.oi,rr.prototype.lockStartTime=rr.prototype.Ud,rr.prototype.getMaxSegmentEndTime=rr.prototype.Rh,rr.prototype.notifyPeriodDuration=rr.prototype.Kg,rr.prototype.notifySegments=rr.prototype.qd,rr.prototype.notifyTimeRange=rr.prototype.Lg,rr.prototype.getDelay=rr.prototype.Jh,rr.prototype.setDelay=rr.prototype.Of,rr.prototype.getSegmentAvailabilityDuration=rr.prototype.Ld,rr.prototype.setSegmentAvailabilityDuration=rr.prototype.ne,rr.prototype.setStatic=rr.prototype.vc,rr.prototype.setClockOffset=rr.prototype.Yg,rr.prototype.getPresentationStartTime=rr.prototype.Vh,rr.prototype.setDuration=rr.prototype.Za,rr.prototype.setPresentationStartTime=rr.prototype.$g,rr.prototype.getMaxSegmentDuration=rr.prototype.Qh,rr.prototype.getDuration=rr.prototype.getDuration;function MR(e,t,n){this.j=n,this.l=e,this.s=DR(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}MR.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function P8(e,t){e.i=t}function O8(e){this.g=e}function DR(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=g(gi(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function n1(e,t,n,r,u){var c=this;this.A=u,this.g=e,this.B=t,this.m=n,this.l=new Tt,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.s=!1,this.l.D(e,"waiting",function(){return r1(c)}),this.o=new on(function(){r1(c)}).Ra(this.m.gapJumpTimerTime)}n1.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.o!=null&&(this.o.stop(),this.o=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},n1.prototype.Bf=function(){this.s=!0,r1(this)};function r1(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,r=DR(n),u=n.g.currentTime,c=Date.now()/1e3;(t.g!=u||t.s!=r)&&(t.m=c,t.g=u,t.s=r,t.h=!1),u=c-t.m,(r=u>=t.A&&r&&!t.h)&&(t.i(t.g,u),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new jn("stalldetected"))),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=oi(n,t,e.m.gapDetectionThreshold),r!=null&&(r!=0||e.s))&&(u=n.start(r),(navigator.userAgent.match(/Edge\//)||Rr()||di())&&(u=Math.ceil(100*(u+e.m.gapPadding))/100),u>=e.B.zb()||.001>u-t||(r!=0&&n.end(r-1),e.g.currentTime=u,t==e.i&&(e.i=u),e.C++,e.A(new jn("gapjumped"))))}}}function td(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=L8.value().get(t),n.pa(e,t,r))}var L8=new Un(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function PR(e,t,n,r){var u=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return u.l==null&&(u.l=r()),u.l},this.o=!1,this.h=new Tt,this.i=new FR(e),td(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){LR(u,u.j())})}PR.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function i1(e){return e.o?e.g.currentTime:e.j()}function OR(e,t){0<e.g.readyState?UR(e.i,t):td(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){LR(e,e.j())})}function LR(e,t){.001>Math.abs(e.g.currentTime-t)?kR(e):(e.h.pa(e.g,"seeking",function(){kR(e)}),UR(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function kR(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function FR(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new on(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}FR.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function UR(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Ra(.1)}function BR(e){this.h=e,this.j=!1,this.g=null,this.i=new Tt}p=BR.prototype,p.ready=function(){function e(){if(t.g==null||t.g==0&&t.h.duration!=1/0)t.j=!0;else{var n=t.h.currentTime,r=t.g;0>t.g&&(r=Math.max(0,n+t.g)),n!=r?(t.i.pa(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=r):t.j=!0}}var t=this;td(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},p.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},p.Ee=function(e){this.g=this.j?this.g:e},p.wd=function(){return(this.j?this.h.currentTime:this.g)||0},p.dg=function(){return 0},p.cg=function(){return 0},p.Jg=function(){};function jR(e,t,n,r,u,c){var f=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=u,this.s=null,this.o=k8(e,n,c),this.j=new n1(e,t.presentationTimeline,n,this.o,c),this.h=new PR(e,function(){e:{var h=f.j;h.j=!0,h.s=!1;var v=i1(f.h);if(h=qR(f,v),.001<Math.abs(h-v)){if(v=!1,!ri()||ri()&&qu())v=!0;else{var S=Date.now()/1e3;(!f.s||f.s<S-1)&&(f.s=S,v=!0)}if(v){OR(f.h,h),h=void 0;break e}}f.A(),h=void 0}return h},function(h){var v=f.j;v.g.seeking&&!v.j&&(v.j=!0,v.i=h)},function(){var h=r;return h==null?h=1/0>f.g.getDuration()?f.g.Jb():f.g.zb():0>h&&(h=f.g.zb()+h),ZR(f,GR(f,h))}),this.m=new on(function(){if(f.i.readyState!=0&&!f.i.paused){var h=i1(f.h),v=f.g.Jb(),S=f.g.zb();3>S-v&&(v=S-3),h<v&&(h=qR(f,h),f.i.currentTime=h)}})}p=jR.prototype,p.ready=function(){this.m.Ra(.25)},p.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},p.Ee=function(e){OR(this.h,e)},p.wd=function(){var e=i1(this.h);return 0<this.i.readyState&&!this.i.paused?GR(this,e):e},p.dg=function(){return this.o?this.o.o:0},p.cg=function(){return this.j.C},p.Jg=function(){this.j.Bf()};function ZR(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function qR(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,u=e.g.Jb(),c=e.g.zb(),f=e.g.getDuration();3>c-u&&(u=c-3);var h=e.g.bd(n),v=e.g.bd(r);return n=e.g.bd(n+r),t>=f?ZR(e,t):t>c?c:t<u?bn(e.i.buffered,v)?v:n:t>=h||bn(e.i.buffered,t)?t:n}function GR(e,t){var n=e.g.Jb();return t<n?n:(e=e.g.zb(),t>e?e:t)}function k8(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new MR(new O8(e),t.stallThreshold,n),P8(t,function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}function Mr(e){this.g=e,this.m=null,this.i=0,this.o=!1}p=Mr.prototype,p.getNumReferences=function(){return this.g.length},p.getNumEvicted=function(){return this.i},p.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},p.vi=function(){this.o=!0},p.Gb=function(e){for(var t=g(this.g),n=t.next();!n.done;n=t.next())e(n.value)};function eu(e){return e.g[0]||null}p.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],u=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<u)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},p.get=function(e){return this.g.length==0?null:(e-=this.i,0>e||e>=this.g.length?null:this.g[e])},p.offset=function(e){if(!this.o)for(var t=g(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},p.Wd=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,T(e))}},p.od=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.g.length==0||r.endTime>n.g[0].startTime)}),this.Wd(e),this.Ga(t)},p.Ga=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},p.Ec=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new et(e.startTime,t,e.F,e.Ha,e.va,e.$,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},p.re=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new on(function(){var r=t();r?n.g.push.apply(n.g,T(r)):(n.m.stop(),n.m=null)}),this.m.Ra(e))},Mr.prototype[Symbol.iterator]=function(){return this.Ib(0)},Mr.prototype.Ib=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;var u=this.get(r);n?r++:r--;var c=-1;if(u&&0<u.g.length)for(var f=u.g.length-1;0<=f;--f){var h=u.g[f];if(e>=h.startTime&&e<h.endTime){if(!t){for(;f&&!h.l;)f--,h=u.g[f];if(!h.l)return pe("No independent partial segment found!"),null}n?r--:r++,c=f-1;break}}return new Na(this,r,c,n)};function o1(e,t,n){return e=new et(e,e+t,function(){return n},0,null,null,e,e,e+t),new Mr([e])}ne("shaka.media.SegmentIndex",Mr),Mr.forSingleSegment=o1,Mr.prototype.getIteratorForTime=Mr.prototype.Ib,Mr.prototype.updateEvery=Mr.prototype.re,Mr.prototype.fit=Mr.prototype.Ec,Mr.prototype.evict=Mr.prototype.Ga,Mr.prototype.mergeAndEvict=Mr.prototype.od,Mr.prototype.offset=Mr.prototype.offset,Mr.prototype.get=Mr.prototype.get,Mr.prototype.find=Mr.prototype.find,Mr.prototype.markImmutable=Mr.prototype.vi,Mr.prototype.release=Mr.prototype.release,Mr.prototype.getNumEvicted=Mr.prototype.getNumEvicted,Mr.prototype.getNumReferences=Mr.prototype.getNumReferences;function Na(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}Na.prototype.Tc=function(e){this.reverse=e},Na.prototype.Ch=function(){return this.h},Na.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Na.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},ne("shaka.media.SegmentIterator",Na),Na.prototype.next=Na.prototype.next,Na.prototype.current=Na.prototype.current,Na.prototype.currentPosition=Na.prototype.Ch,Na.prototype.setReverse=Na.prototype.Tc;function Ti(){Mr.call(this,[]),this.h=[]}Y(Ti,Mr),p=Ti.prototype,p.clone=function(){var e=new Ti;return e.h=this.h.slice(),e.i=this.i,e},p.release=function(){for(var e=g(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},p.Gb=function(e){for(var t=g(this.h),n=t.next();!n.done;n=t.next())n.value.Gb(e)},p.find=function(e){for(var t=this.i,n=g(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.find(e);if(u!=null)return u+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},p.get=function(e){for(var t=this.i,n=g(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.get(e-t);if(u)return u;u=r.getNumReferences(),t+=r.getNumEvicted()+u}return null},p.offset=function(){},p.Wd=function(){},p.Ga=function(e){for(var t=g(this.h),n=t.next();!n.done;n=t.next())n.value.Ga(e);for(;1<this.h.length&&this.h[0].getNumReferences()==0;)e=this.h.shift(),this.i+=e.getNumEvicted(),e.release()},p.od=function(){},p.Ec=function(){},p.re=function(){},ne("shaka.media.MetaSegmentIndex",Ti),Ti.prototype.updateEvery=Ti.prototype.re,Ti.prototype.fit=Ti.prototype.Ec,Ti.prototype.mergeAndEvict=Ti.prototype.od,Ti.prototype.evict=Ti.prototype.Ga,Ti.prototype.merge=Ti.prototype.Wd,Ti.prototype.offset=Ti.prototype.offset,Ti.prototype.get=Ti.prototype.get,Ti.prototype.find=Ti.prototype.find,Ti.prototype.forEachTopLevelReference=Ti.prototype.Gb,Ti.prototype.release=Ti.prototype.release;function up(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Kd(),this.h=new on(function(){t.g.Ig(.25*t.i)})}up.prototype.release=function(){this.set(this.lc()),this.h&&(this.h.stop(),this.h=null),this.g=null},up.prototype.set=function(e){this.i=e,HR(this)},up.prototype.lc=function(){return this.g.lc()};function HR(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Kd()!=t&&e.g.Rf(t);return}catch(n){}e.h.Ra(.25),e.g.Kd()!=0&&e.g.Rf(0)}function VR(e){var t=this;this.h=e,this.g=new Set,this.i=new on(function(){KR(t,!1)}).Ra(.25)}VR.prototype.release=function(){this.i.stop();for(var e=g(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function KR(e,t){for(var n=g(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function F8(){this.g=null,this.h=[]}function a1(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=g(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function U8(e){function t(c){return{timestamp:c.timestamp,state:c.state,duration:c.duration}}for(var n=[],r=g(e.h),u=r.next();!u.done;u=r.next())n.push(t(u.value));return e.g&&n.push(t(e.g)),n}function B8(){this.i=this.h=null,this.g=[]}function s1(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function tv(){this.hc=this.Eg=this.A=this.B=this.I=this.C=this.s=this.j=this.H=this.m=this.i=this.T=this.X=this.L=this.N=this.O=this.l=this.o=NaN,this.K=0,this.F=this.G=NaN,this.g=new F8,this.h=new B8}function nv(e,t,n,r){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=r}function j8(e,t){e.l=t,e=g(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function lp(e,t,n){if(n=n===void 0?!1:n,e.i.segmentIndex&&(e.g||(e.g=e.i.segmentIndex.Ib(t,!0,e.o)),e.g)){for(n&&e.g.next();e.h.size<e.m&&(t=e.g.next().value,!!t);)n=!0,t.isPreload()&&t.va!=null&&(n=!1),t.Zb()==2&&(n=!1),n&&t.$&&zR(e,t.$),n&&!e.h.has(t)&&(n=new l1(e.l),$R(n,t,e.i),e.h.set(t,n));u1(e)}}function zR(e,t){if(e.i.segmentIndex&&!Array.from(e.j.keys()).some(function(r){return bt(r,t)})){var n=new l1(e.l);$R(n,t,e.i),e.j.set(t,n)}}function YR(e,t){t=g(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&cp(e,n)}function tu(e){YR(e,e.h),YR(e,e.j),e.g=null}nv.prototype.Ga=function(e,t){t=t===void 0?!1:t;for(var n=g(this.h.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&cp(this,r);t&&u1(this)},nv.prototype.Tc=function(e){this.o=e,this.g&&this.g.Tc(e)};function u1(e){for(var t=Array.from(e.h.keys()),n=g(e.j.keys()),r=n.next(),u={};!r.done;u={nf:void 0},r=n.next())u.nf=r.value,t.some(function(c){return function(f){return bt(f.$,c.nf)}}(u))||cp(e,u.nf)}function WR(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var r=n.pop();r&&cp(e,r)}u1(e)}function Z8(e,t){t&&t!==e.i&&(tu(e),e.i=t)}function cp(e,t){var n=e.h;t instanceof Dn&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function l1(e){this.g=e,this.ce=this.Tf=null}function $R(e,t,n){var r=new Uint8Array(0);e.ce=e.g(t,n,function(u){return Re(function(c){if(c.g==1)return 0<r.byteLength?r=hi(r,u):r=u,e.Tf?C(c,e.Tf(r),3):c.u(0);r=new Uint8Array(0),X(c)})})}l1.prototype.abort=function(){this.ce&&this.ce.abort()};function c1(e){Nr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new on(function(){for(var n=t.i(),r=g(t.g),u=r.next();!u.done;u=r.next())u=u.value,u.endTime<n.start&&(t.g.delete(u),u=new jn("regionremove",new Map([["region",u]])),t.dispatchEvent(u))}).Ra(2)}Y(c1,Nr),c1.prototype.release=function(){this.g.clear(),this.h.stop(),Nr.prototype.release.call(this)};function rv(e){Nr.call(this),this.g=new Map,this.h=e}Y(rv,Nr),rv.prototype.release=function(){this.g.clear(),Nr.prototype.release.call(this)};function q8(e,t){var n=e.g.get(t);return n||(n={sd:[],Oe:null,contentType:t},e.g.set(t,n)),n}function G8(e,t,n){var r=q8(e,t.contentType);H8(e,r),e={Kc:t,position:n},r=r.sd,t=r.findIndex(function(u){return u.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}rv.prototype.j=function(e){for(var t=g(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var r=n.Oe;e:{for(var u=n.sd,c=u.length-1;0<=c;c--){var f=u[c];if(f.position<=e){u=f.Kc;break e}}u=null}c=u&&!(r===u||r&&u&&r.bandwidth==u.bandwidth&&r.audioSamplingRate==u.audioSamplingRate&&r.codecs==u.codecs&&r.contentType==u.contentType&&r.frameRate==u.frameRate&&r.height==u.height&&r.mimeType==u.mimeType&&r.channelsCount==u.channelsCount&&r.pixelAspectRatio==u.pixelAspectRatio&&r.width==u.width),f=u&&r&&u.label&&r.label&&r.label!==u.label;var h=u&&r&&u.language&&r.language&&r.language!==u.language;r=u&&r&&u.roles&&r.roles&&!fn(r.roles,u.roles),(f||h||r)&&XR(this,e,u.contentType)&&(n.Oe=u,r=new jn("audiotrackchange",new Map([["quality",u],["position",e]])),this.dispatchEvent(r)),c&&XR(this,e,u.contentType)&&(n.Oe=u,JSON.stringify(u),n=new jn("qualitychange",new Map([["quality",u],["position",e]])),this.dispatchEvent(n))}};function XR(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function H8(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,u=t.sd;t.sd=u.filter(function(c,f){return!(c.position<=n&&f+1<u.length&&u[f+1].position<=n||c.position>=r)})}else t.sd=[]}function iv(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function ov(e){var t=ba(e),n=t.split("/")[0];return e=Oo(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,vd:null,colorGamut:null,frameRate:null}}function V8(e,t){function n(Ue){Ee=Ue.name;var Qe=Ue.reader;Qe.skip(24);var rt=Qe.la(),dt=Qe.la();Qe.skip(50),B=String(rt),R=String(dt),Ue.reader.ra()&&W(Ue)}function r(Ue){var Qe=ca(Ue.reader);z=Qe.channelCount,J=Qe.sampleRate,u(Ue.name)}function u(Ue){switch(Ue=Ue.toLowerCase(),Ue){case"avc1":case"avc3":f.push(Ue+".42E01E"),v=!0;break;case"hev1":case"hvc1":f.push(Ue+".1.6.L93.90"),v=!0;break;case"dvh1":case"dvhe":f.push(Ue+".05.04"),v=!0;break;case"vp09":f.push(Ue+".00.10.08"),v=!0;break;case"av01":f.push(Ue+".0.01M.08"),v=!0;break;case"mp4a":c.push("mp4a.40.2"),h=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":c.push(Ue),h=!0}}var c=[],f=[],h=!1,v=!1,S=null,R=null,B=null,z=null,J=null,fe=null,he=null,Ee;if(new V().box("moov",W).box("trak",W).box("mdia",W).R("mdhd",function(Ue){S=$a(Ue.reader,Ue.version).language}).box("minf",W).box("stbl",W).R("stsd",ee).box("mp4a",function(Ue){var Qe=ca(Ue.reader);z=Qe.channelCount,J=Qe.sampleRate,Ue.reader.ra()?W(Ue):u(Ue.name)}).box("esds",function(Ue){Ue=Ue.reader;for(var Qe="mp4a",rt,dt;Ue.ra();){rt=Ue.S();for(var gt=Ue.S();gt&128;)gt=Ue.S();if(rt==3)Ue.la(),gt=Ue.S(),gt&128&&Ue.la(),gt&64&&Ue.skip(Ue.S()),gt&32&&Ue.la();else if(rt==4)dt=Ue.S(),Ue.skip(12);else if(rt==5)break}dt&&(Qe+="."+Ru(dt),rt==5&&Ue.ra()&&(rt=Ue.S(),dt=(rt&248)>>3,dt===31&&Ue.ra()&&(dt=32+((rt&7)<<3)+((Ue.S()&224)>>5)),Qe+="."+dt)),c.push(Qe),h=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dva1",n).box("dvav",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("avcC",function(Ue){var Qe=Ee||"";switch(Ee){case"dvav":Qe="avc3";break;case"dva1":Qe="avc1"}Ue=Ue.reader,Ue.skip(1),Ue=Qe+"."+Ru(Ue.S())+Ru(Ue.S())+Ru(Ue.S()),f.push(Ue),v=!0}).box("hvcC",function(Ue){var Qe=Ee||"";switch(Ee){case"dvh1":Qe="hvc1";break;case"dvhe":Qe="hev1"}var rt=Ue.reader;rt.skip(1),Ue=rt.S();var dt=["","A","B","C"][Ue>>6],gt=Ue&31,kt=rt.P(),It=(Ue&32)>>5?"H":"L";Ue=[rt.S(),rt.S(),rt.S(),rt.S(),rt.S(),rt.S()],rt=rt.S();for(var Ut=0,Nt=0;32>Nt&&(Ut|=kt&1,Nt!=31);Nt++)Ut<<=1,kt>>=1;for(Qe=Qe+("."+dt+gt)+("."+Ru(Ut,!0)),Qe+="."+It+rt,dt="",gt=Ue.length;gt--;)((It=Ue[gt])||dt)&&(dt="."+It.toString(16).toUpperCase()+dt);Qe+=dt,f.push(Qe),v=!0}).box("dvcC",function(Ue){var Qe=Ee||"";switch(Ee){case"hvc1":Qe="dvh1";break;case"hev1":Qe="dvhe";break;case"avc1":Qe="dva1";break;case"avc3":Qe="dvav";break;case"av01":Qe="dav1"}var rt=Ue.reader;rt.skip(2),Ue=rt.S(),rt=rt.S(),f.push(Qe+"."+ji(Ue>>1&127)+"."+ji(Ue<<5&32|rt>>3&31)),v=!0}).box("dvvC",function(Ue){var Qe=Ee||"";switch(Ee){case"hvc1":Qe="dvh1";break;case"hev1":Qe="dvhe";break;case"avc1":Qe="dva1";break;case"avc3":Qe="dvav";break;case"av01":Qe="dav1"}var rt=Ue.reader;rt.skip(2),Ue=rt.S(),rt=rt.S(),f.push(Qe+"."+ji(Ue>>1&127)+"."+ji(Ue<<5&32|rt>>3&31)),v=!0}).R("vpcC",function(Ue){var Qe=Ee||"",rt=Ue.reader;Ue=rt.S();var dt=rt.S();rt=rt.S()>>4&15,f.push(Qe+"."+ji(Ue)+"."+ji(dt)+"."+ji(rt)),v=!0}).box("av1C",function(Ue){var Qe=Ee||"";switch(Ee){case"dav1":Qe="av01"}var rt=Ue.reader;rt.skip(1),Ue=rt.S(),rt=rt.S();var dt=Ue>>>5,gt=(rt&64)>>6;f.push(Qe+"."+dt+"."+ji(Ue&31)+(rt>>>7?"H":"M")+"."+ji(dt===2&&gt?(rt&32)>>5?12:10:gt?10:8)+"."+((rt&16)>>4)+"."+((rt&8)>>3)+((rt&4)>>2)+(rt&3)+"."+ji(1)+"."+ji(1)+"."+ji(1)+".0"),v=!0}).box("enca",re).box("encv",H).box("sinf",W).box("frma",function(Ue){Ue=Zl(Ue.reader).codec,u(Ue)}).box("colr",function(Ue){f=f.map(function(dt){if(dt.startsWith("av01.")){var gt=Ue.reader,kt=gt.xa(),It=gt.rb(4),Ut=String.fromCharCode(It[0]);if(Ut+=String.fromCharCode(It[1]),Ut+=String.fromCharCode(It[2]),Ut+=String.fromCharCode(It[3]),Ut==="nclx"){It=gt.la(),Ut=gt.la();var Nt=gt.la(),nn=gt.S()>>7,Kt=dt.split(".");Kt.length==10&&(Kt[6]=ji(It),Kt[7]=ji(Ut),Kt[8]=ji(Nt),Kt[9]=String(nn),dt=Kt.join("."))}gt.seek(kt)}return dt});var Qe=Xf(Ue.reader),rt=Qe.colorGamut;fe=Qe.vd,he=rt}).parse(e||t,!0),!c.length&&!f.length)return null;var Le=h&&!v,Fe=new Map;if(v){var it=new At("video/mp4");for(e&&it.init(e),it.i(t),e=g(it.j()),t=e.next();!t.done;t=e.next())t=t.value,Fe.set(t,t);it.g()}return{type:Le?"audio":"video",mimeType:Le?"audio/mp4":"video/mp4",codecs:f1(c.concat(f)).join(", "),language:S,height:R,width:B,channelCount:z,sampleRate:J,closedCaptions:Fe,vd:fe,colorGamut:he,frameRate:null}}function f1(e){var t=new Set,n=[];e=g(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u=zs(r);t.has(u)||(n.push(r),t.add(u))}return t=Xu("audio",n),r=Xu("video",n),e=Xu(_r,n),r=K8(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function K8(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?Ft('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function z8(e){var t=null;return new V().box("moov",W).box("trak",W).box("mdia",W).box("minf",W).box("stbl",W).R("stsd",ee).box("encv",H).box("enca",re).box("sinf",W).box("schi",W).R("tenc",function(n){n=n.reader,n.S(),n.S(),n.S(),n.S(),t=za(n.rb(16))}).parse(e,!0),t}function d1(e,t,n){var r,u,c,f,h;return Re(function(v){if(v.g==1)return r=t,r.cryptoKey?v.u(2):C(v,r.fetchKey(),3);if(u=r.iv,!u)for(u=nr(new ArrayBuffer(16)),c=r.firstMediaSequenceNumber+n,f=u.byteLength-1;0<=f;f--)u[f]=c&255,c>>=8;return t.blockCipherMode=="CBC"?h={name:"AES-CBC",iv:u}:h={name:"AES-CTR",counter:u,length:64},v.return(m.crypto.subtle.decrypt(h,r.cryptoKey,e))})}function nd(e,t,n,r,u){return e=Bi(e,r,u),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function QR(e,t){var n=this;this.g=t,this.l=e,this.h=null,this.F=new Map,this.B=1,this.s=this.j=null,this.I=0,this.G=!1,this.i=new Map,this.C=!1,this.K=null,this.A=!1,this.m=new jl(function(){return Y8(n)}),this.L=Date.now()/1e3,this.o=new Map,this.H={projection:null,hfov:null},this.O=0,this.N=1/0}p=QR.prototype,p.destroy=function(){return this.m.destroy()};function Y8(e){var t,n,r,u,c,f,h;return Re(function(v){if(v.g==1){for(t=[],n=g(e.i.values()),r=n.next();!r.done;r=n.next())u=r.value,fp(u),t.push(dp(u)),u.V&&(tu(u.V),u.V=null);for(c=g(e.o.values()),f=c.next();!f.done;f=c.next())h=f.value,tu(h);return C(v,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.l=null,e.h=null,X(v)})}p.configure=function(e){if(this.h=e,this.K=new $h({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.V&&(tu(t.V),t.V=null),t=g(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,tu(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(_r))&&t.V&&(tu(t.V),t.V=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.V&&(tu(t.V),t.V=null),t=g(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.V?(WR(n.V,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(tu(n.V),n.V=null)):0<e.segmentPrefetchLimit&&(n.V=p1(this,n.stream));e.disableAudioPrefetch||tj(this)};function W8(e,t,n){e.l.presentationTimeline.U()||(e.O=t,e.N=n)}p.start=function(e){var t=this;return Re(function(n){if(n.g==1)return C(n,ej(t,e||new Map),2);Zr(t.m),t.C=!0,X(n)})};function $8(e,t){var n,r,u,c,f,h;Re(function(v){switch(v.g){case 1:return n=Mi,e.I++,r=e.I,ce(v,2),C(v,RR(e.g.ca,n.wa),4);case 4:me(v,3);break;case 2:u=be(v),e.g&&e.g.onError(u);case 3:c=Di(t.mimeType,t.codecs),Xm(e.g.ca,c,e.l.sequenceMode,t.external),f=e.g.ca.ba,(f.isTextVisible()||e.h.alwaysStreamText)&&e.I==r&&(h=ex(e,t),e.i.set(n.wa,h),Xa(e,h,0)),X(v)}})}function X8(e){var t=e.i.get(_r);t&&(fp(t),dp(t).catch(function(){}),e.i.delete(_r)),e.s=null}function h1(e,t){for(var n=0>e.g.fb(),r=g(e.i.values()),u=r.next();!u.done;u=r.next())u=u.value,u.ma&&u.ma.Tc(n),u.V&&u.V.Tc(n);for(r=g(e.o.values()),u=r.next();!u.done;u=r.next())u.value.Tc(n);(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.bc&&(rd(e,t,!1,0,!1),n.bc=r):(t=n.bc)&&(n.bc=null,rd(e,t,!0,0,!1)))}function JR(e,t,n,r,u,c){n=n===void 0?!1:n,r=r===void 0?0:r,u=u===void 0?!1:u,c=c===void 0?!1:c,e.j=t,e.C&&(t.video&&rd(e,t.video,n,r,u,c),t.audio&&rd(e,t.audio,n,r,u,c))}function av(e,t){Re(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):C(n,t.createSegmentIndex(),2):n.return();rd(e,t,!0,0,!1),X(n)})}function Q8(e,t){for(var n=g(e.F.entries()),r=n.next();!r.done;r=n.next()){var u=g(r.value);r=u.next().value,u=u.next().value,r.includes(t.type)&&(u(),e.F.delete(r))}}function rd(e,t,n,r,u,c){var f=e.i.get(t.type);f||t.type!=_r?f&&(f.bc&&(t.trickModeVideo?(f.bc=t,t=t.trickModeVideo):f.bc=null),f.stream!=t||u)&&(e.o.has(t)?f.V=e.o.get(t):f.V&&Z8(f.V,t),t.type==_r&&(u=Di(t.mimeType,t.codecs),Xm(e.g.ca,u,e.l.sequenceMode,t.external)),!e.o.has(f.stream)&&f.stream.closeSegmentIndex&&(f.La?(u="("+f.type+":"+f.stream.id+")",e.F.has(u)||e.F.set(u,f.stream.closeSegmentIndex)):f.stream.closeSegmentIndex()),f.stream=t,f.ma=null,f.eg=!!c,n?f.Wc?f.ze=!0:f.La?(f.fc=!0,f.Ed=r,f.ze=!0):(fp(f),y1(e,f,!0,r).catch(function(h){e.g&&e.g.onError(h)})):f.La||f.ub||Xa(e,f,0),J8(e,f).catch(function(h){e.g&&e.g.onError(h)})):$8(e,t)}function J8(e,t){var n,r;return Re(function(u){if(u.g==1)return t.jb?(n=t.stream,r=t.jb,n.segmentIndex?u.u(2):C(u,n.createSegmentIndex(),2)):u.return();if(t.jb!=r||t.stream!=n)return u.return();var c=e.g.Jd(),f=sp(e.g.ca,t.type),h=t.stream.segmentIndex.find(t.Na?t.Na.endTime:c),v=h==null?null:t.stream.segmentIndex.get(h);h=v&&v.va?v.va-v.Ha:null,v&&!h&&(h=(v.endTime-v.getStartTime())*(t.stream.bandwidth||0)/8),h?((v=v.$)&&(h+=(v.va?v.va-v.Ha:null)||0),v=e.g.getBandwidthEstimate(),c=8*h/v<(f||0)-c-Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal)||t.jb.h.g>h):c=!1,c&&t.jb.abort(),X(u)})}p.Rc=function(){if(this.g)for(var e=this.g.Jd(),t=g(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var u=this.g.ca;if(u.C?u=!1:r==_r?(u=u.g,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=Qf(u,r),u=bn(u,e)),!u){if(n.V&&(n.V.g=null),n.type==="audio"){u=g(this.o.values());for(var c=u.next();!c.done;c=u.next())c.value.g=null}n.ma=null,(sp(this.g.ca,r)!=null||n.La)&&sv(this,n),n.jb&&(n.jb.abort(),n.jb=null),r===_r&&(r=this.g.ca,r.G&&r.G.g()),n.Rc=!0}}};function sv(e,t){t.Wc||t.fc||(t.La?(t.fc=!0,t.Ed=0):JE(e.g.ca,t.type)==null?t.ub==null&&Xa(e,t,0):(fp(t),y1(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function ej(e,t){var n,r,u,c,f,h,v,S,R,B;return Re(function(z){if(z.g==1){if(n=Mi,!e.j)throw new Xe(2,5,5006);return r=new Map,u=new Set,e.j.audio&&(r.set(n.Y,e.j.audio),u.add(e.j.audio)),e.j.video&&(r.set(n.ja,e.j.video),u.add(e.j.video)),e.s&&(r.set(n.wa,e.s),u.add(e.s)),c=e.g.ca,C(z,c.init(r,e.l.sequenceMode,e.l.type,e.l.ignoreManifestTimestampsInSegmentsMode),2)}for(Zr(e.m),e.updateDuration(),f=g(r.keys()),h=f.next();!h.done;h=f.next())v=h.value,S=r.get(v),e.i.has(v)||(R=ex(e,S),t.has(S.id)&&(B=t.get(S.id),j8(B,function(J,fe,he){return uv(J,fe,he||null,e.h.retryParameters,e.g.Mb)}),R.V=B),e.i.set(v,R),Xa(e,R,0));X(z)})}function ex(e,t){return{stream:t,type:t.type,ma:null,V:p1(e,t),Na:null,qc:null,Td:null,Sd:null,Rd:null,bc:null,endOfStream:!1,La:!1,ub:null,fc:!1,Ed:0,ze:!1,Wc:!1,Rc:!0,Hf:!1,ed:!1,jb:null}}function p1(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===_r&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===_r&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.V)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new nv(e.h.segmentPrefetchLimit,t,function(r,u,c){return uv(r,u,c||null,e.h.retryParameters,e.g.Mb)},0>e.g.fb()):null}function tj(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r=g(e.l.variants),u=r.next(),c={};!u.done;c={mb:void 0},u=r.next())if(c.mb=u.value,c.mb.audio)if(e.o.has(c.mb.audio)){if(u=e.o.get(c.mb.audio),WR(u,t),!(0<t&&n.some(function(h){return function(v){return Ju(h.mb.audio.language,v)}}(c)))){var f=e.i.get(c.mb.audio.type);u!==(f&&f.V)&&tu(u),e.o.delete(c.mb.audio)}}else 0>=t||!n.some(function(h){return function(v){return Ju(h.mb.audio.language,v)}}(c))||!(u=p1(e,c.mb.audio))||(c.mb.audio.segmentIndex||c.mb.audio.createSegmentIndex(),e.o.set(c.mb.audio,u))}p.updateDuration=function(){var e=this.l.presentationTimeline.getDuration();1/0>e?this.g.ca.Za(e):this.g.ca.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function nj(e,t){var n,r,u,c,f,h;return Re(function(v){switch(v.g){case 1:if(Zr(e.m),t.La||t.ub==null||t.Wc)return v.return();if(t.ub=null,!t.fc){v.u(2);break}return C(v,y1(e,t,t.ze,t.Ed),3);case 3:return v.return();case 2:if(Q8(e,t),t.stream.segmentIndex){v.u(4);break}return n=t.stream,ce(v,5),C(v,t.stream.createSegmentIndex(),7);case 7:me(v,6);break;case 5:return r=be(v),C(v,E1(e,t,r),8);case 8:return v.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.La||t.ub||Xa(e,t,0),v.return();case 4:ce(v,9),u=rj(e,t),u!=null&&(Xa(e,t,u),t.ed=!1),me(v,10);break;case 9:return c=be(v),C(v,E1(e,t,c),11);case 11:return v.return();case 10:if(f=Array.from(e.i.values()),!e.C||!f.every(function(S){return S.endOfStream})){v.u(0);break}return C(v,e.g.ca.endOfStream(),13);case 13:Zr(e.m),h=e.g.ca.getDuration(),h!=0&&h<e.l.presentationTimeline.getDuration()&&e.l.presentationTimeline.Za(h),X(v)}})}function rj(e,t){if(m1(t))return w8(e.g.ca,t.stream.originalId||""),null;if(t.type==_r&&A8(e.g.ca),!e.g.ca.ta&&t.type!=_r)return e.h.updateIntervalSeconds/2;var n=e.g.Jd();if(t.type==="audio")for(var r=g(e.o.keys()),u=r.next();!u.done;u=r.next())u=e.o.get(u.value),u.Ga(n,!0),lp(u,n);r=t.Na?t.Na.endTime:n;var c=T8(e.g.ca,t.type,n),f=Math.max(1,Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),h=e.l.presentationTimeline.getDuration()-r;if(u=sp(e.g.ca,t.type),1e-6>h&&u)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(_r))&&m1(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,c>=f)return e.h.updateIntervalSeconds/2;if(f=!t.ma,u=ij(e,t,n,u),!u)return e.h.updateIntervalSeconds;c=!1,f&&t.eg&&(c=!0,t.eg=!1),f=1/0,h=Array.from(e.i.values()),h=g(h);for(var v=h.next();!v.done;v=h.next())v=v.value,m1(v)||v.ma&&!v.ma.current()||(f=Math.min(f,v.Na?v.Na.endTime:n));return r>=f+e.l.presentationTimeline.h?e.h.updateIntervalSeconds:(t.V&&t.ma&&!e.o.has(t.stream)&&(t.V.Ga(u.startTime),lp(t.V,u.startTime)),oj(e,t,n,u,c).catch(function(){}),null)}function ij(e,t,n,r){if(t.ma)return t.ma.current();if(t.Na||r)return n=t.Na?t.Na.endTime:r,e=0>e.g.fb(),t.stream.segmentIndex&&(t.ma=t.stream.segmentIndex.Ib(n,!1,e)),t.ma&&t.ma.next().value;r=e.l.sequenceMode?0:e.h.inaccurateManifestTolerance;var u=Math.max(n-r,0);e=0>e.g.fb();var c=null;return r&&(t.stream.segmentIndex&&(t.ma=t.stream.segmentIndex.Ib(u,!1,e)),c=t.ma&&t.ma.next().value),c||(t.stream.segmentIndex&&(t.ma=t.stream.segmentIndex.Ib(n,!1,e)),c=t.ma&&t.ma.next().value),c}function oj(e,t,n,r,u){var c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue;return Re(function(Qe){switch(Qe.g){case 1:if(c=Mi,f=t.stream,h=t.ma,t.La=!0,ce(Qe,2),r.Zb()==2)throw new Xe(1,1,1011);return C(Qe,uj(e,t,r,u),4);case 4:return Zr(e.m),e.A?Qe.return():(v=f.mimeType=="video/mp4"||f.mimeType=="audio/mp4",S=m.ReadableStream,e.h.lowLatencyMode&&e.l.isLowLatency&&S&&v&&(e.l.type!="HLS"||r.m)?(z=new Uint8Array(0),fe=J=!1,Ee=function(rt){var dt,gt,kt;return Re(function(It){switch(It.g){case 1:if(J||(fe=!0,Zr(e.m),e.A))return It.return();if(ce(It,2),z=aj(z,rt),dt=!1,gt=0,new V().box("mdat",function(Ut){gt=Ut.size+Ut.start,dt=!0}).parse(z,!1,!0),!dt){It.u(4);break}return kt=z.subarray(0,gt),z=z.subarray(gt),C(It,g1(e,t,n,f,r,kt,!0,u),5);case 5:t.V&&t.ma&&lp(t.V,r.startTime,!0);case 4:me(It,0);break;case 2:he=be(It),X(It)}})},C(Qe,v1(e,t,r,Ee),9)):(R=v1(e,t,r),C(Qe,R,7)));case 7:return B=Qe.h,Zr(e.m),e.A?Qe.return():(Zr(e.m),t.fc?(t.La=!1,Xa(e,t,0),Qe.return()):C(Qe,g1(e,t,n,f,r,B,!1,u),6));case 9:if(Le=Qe.h,he)throw he;if(fe){Qe.u(10);break}return J=!0,Zr(e.m),e.A?Qe.return():t.fc?(t.La=!1,Xa(e,t,0),Qe.return()):C(Qe,g1(e,t,n,f,r,Le,!1,u),10);case 10:t.V&&t.ma&&lp(t.V,r.startTime,!0);case 6:if(Zr(e.m),e.A)return Qe.return();t.Na=r,h.next(),t.La=!1,t.Hf=!1,Fe=e.g.ca.xb(),it=Fe[t.type],JSON.stringify(it),t.fc||e.g.Bf(r,t.stream),Xa(e,t,0),me(Qe,0);break;case 2:if(Ue=be(Qe),Zr(e.m,Ue),e.A)return Qe.return();if(t.La=!1,Ue.code==7001)t.La=!1,fp(t),Xa(e,t,0),Qe.u(0);else if(t.type==c.wa&&e.h.ignoreTextStreamFailures)e.i.delete(c.wa),Qe.u(0);else if(Ue.code==3017)sj(e,t,Ue),Qe.u(0);else return t.ed=!0,Ue.category==1&&t.V&&cp(t.V,r),Ue.severity=2,C(Qe,E1(e,t,Ue),0)}})}function aj(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function sj(e,t,n){if(!Array.from(e.i.values()).some(function(u){return u!=t&&u.Hf})){if(e.g.disableStream(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else if(4<r)e.B-=.04;else{t.ed=!0,e.A=!0,e.g.onError(n);return}t.Hf=!0}Xa(e,t,4)}function uj(e,t,n,r){var u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it;return Re(function(Ue){switch(Ue.g){case 1:if(u=Mi,c=t.Na==null&&t.qc==null,f=[],h=Math.max(0,Math.max(n.appendWindowStart,e.O)-.1),v=Math.min(n.appendWindowEnd,e.N)+.01,S=n.codecs||t.stream.codecs,R=zs(S),B=ba(n.mimeType||t.stream.mimeType),z=n.timestampOffset,z==t.Td&&h==t.Sd&&v==t.Rd&&R==t.uf&&B==t.vf){Ue.u(2);break}if(J=t.uf&&t.vf&&M8(e.g.ca,t.type,B,S),!J){Ue.u(3);break}if(fe=null,t.type===u.ja?fe=e.i.get(u.Y):t.type===u.Y&&(fe=e.i.get(u.ja)),!fe){Ue.u(3);break}return C(Ue,dp(fe).catch(function(){}),5);case 5:fe.qc=null,sv(e,fe);case 3:return C(Ue,tx(e,t,z,h,v,n,R,B),2);case 2:return bt(n.$,t.qc)||(t.qc=n.$,n.l&&n.$&&(he=v1(e,t,n.$),Ee=function(){var Qe,rt,dt,gt,kt,It,Ut;return Re(function(Nt){switch(Nt.g){case 1:return ce(Nt,2),C(Nt,he,4);case 4:return Qe=Nt.h,Zr(e.m),rt=null,dt=new Map,gt={projection:null,hfov:null},kt=new V,kt.box("moov",W).box("trak",W).box("mdia",W).R("mdhd",function(nn){rt=$a(nn.reader,nn.version).timescale}).box("hdlr",function(nn){switch(nn=nn.reader,nn.skip(8),nn.sc()){case"soun":dt.set(u.Y,rt);break;case"vide":dt.set(u.ja,rt)}rt=null}).box("minf",W).box("stbl",W).R("stsd",ee).box("encv",H).box("avc1",H).box("avc3",H).box("hev1",H).box("hvc1",H).box("dvav",H).box("dva1",H).box("dvh1",H).box("dvhe",H).box("dvc1",H).box("dvi1",H).box("vexu",W).box("proj",W).R("prji",function(nn){nn=nn.reader.sc(),gt.projection=nn}).box("hfov",function(nn){nn=nn.reader.P()/1e3,gt.hfov=nn}).parse(Qe),fj(e,gt),dt.has(t.type)?n.$.timescale=dt.get(t.type):rt!=null&&(n.$.timescale=rt),It=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,C(Nt,e.g.hg(t.type,Qe),5);case 5:return C(Nt,Qm(e.g.ca,t.type,Qe,null,t.stream,It,t.Rc,r),6);case 6:me(Nt,0);break;case 2:throw Ut=be(Nt),t.qc=null,Ut}})},Le=n.startTime,c&&(Fe=sp(e.g.ca,t.type),Fe!=null&&(Le=Fe)),e.g.yi(Le,n.$),f.push(Ee()))),e.l.sequenceMode&&(it=t.Na?t.Na.i:null,n.i!=it&&f.push(C8(e.g.ca,t.type,n.startTime))),C(Ue,Promise.all(f),0)}})}function tx(e,t,n,r,u,c,f,h){var v,S,R,B;return Re(function(z){if(z.g==1)return v=Mi,S=new Map,e.j.audio&&S.set(v.Y,e.j.audio),e.j.video&&S.set(v.ja,e.j.video),ce(z,2),t.Sd=r,t.Rd=u,f&&(t.uf=f),h&&(t.vf=h),t.Td=n,R=e.l.sequenceMode||e.l.type=="HLS",C(z,I8(e.g.ca,t.type,n,r,u,R,c.mimeType||t.stream.mimeType,c.codecs||t.stream.codecs,S),4);if(z.g!=2)return me(z,0);throw B=be(z),t.Sd=null,t.Rd=null,t.uf=null,t.vf=null,t.Td=null,B})}function g1(e,t,n,r,u,c,f,h){f=f===void 0?!1:f,h=h===void 0?!1:h;var v,S,R,B,z,J,fe,he;return Re(function(Ee){switch(Ee.g){case 1:return v=r.closedCaptions&&0<r.closedCaptions.size,R=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,B=e.h.parsePrftBox&&!e.G,z=r.mimeType=="video/mp4"||r.mimeType=="audio/mp4",J=null,u.$&&(J=u.$.timescale),fe=z&&J&&r.type==="video"&&e.l.type=="DASH"&&e.h.shouldFixTimestampOffset,(R||B||fe)&&(S=new V),R&&S.R("emsg",function(Le){var Fe=r.emsgSchemeIdUris;if(Le.version===0)var it=Le.reader.sc(),Ue=Le.reader.sc(),Qe=Le.reader.P(),rt=Le.reader.P(),dt=Le.reader.P(),gt=Le.reader.P(),kt=u.startTime+rt/Qe;else Qe=Le.reader.P(),kt=Le.reader.Pc()/Qe+u.timestampOffset,rt=kt-u.startTime,dt=Le.reader.P(),gt=Le.reader.P(),it=Le.reader.sc(),Ue=Le.reader.sc();Le=Le.reader.rb(Le.reader.getLength()-Le.reader.xa()),(Fe&&Fe.includes(it)||e.h.dispatchAllEmsgBoxes)&&(it=="urn:mpeg:dash:event:2012"?e.g.zi():(Fe=kt+dt/Qe,Qe=new Map().set("detail",{startTime:kt,endTime:Fe,schemeIdUri:it,value:Ue,timescale:Qe,presentationTimeDelta:rt,eventDuration:dt,id:gt,messageData:Le}),Qe=new jn("emsg",Qe),Qe.cancelable=!0,e.g.onEvent(Qe),!Qe.defaultPrevented&&(it=="https://aomedia.org/emsg/ID3"||it=="https://developer.apple.com/streaming/emsg-id3")&&(it=la(Le),it.length)&&e.g.onMetadata([{cueTime:kt,data:Le,frames:it,dts:kt,pts:kt}],0,Fe)))}),B&&S.R("prft",function(Le){if(!e.G&&u.$.timescale){var Fe=Le.reader,it=Le.version;Fe.P(),Le=Fe.P();var Ue=Fe.P();Le=1e3*Le+Ue/Math.pow(2,32)*1e3,it===0?Fe=Fe.P():(it=Fe.P(),Fe=Fe.P(),Fe=it*Math.pow(2,32)+Fe),Le=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+Le).getTime(),Fe=new Map().set("detail",{wallClockTime:Le,programStartDate:new Date(Le-Fe/u.$.timescale*1e3)}),Fe=new jn("prft",Fe),e.g.onEvent(Fe),e.G=!0}}),fe&&S.box("moof",W).box("traf",W).R("tfdt",function(Le){var Fe,it,Ue,Qe,rt,dt;return Re(function(gt){return Fe=To(Le.reader,Le.version),it=Fe.baseMediaDecodeTime,it?(Ue=-it/J,Qe=Number(t.Td)||0,Qe<Ue?(rt=t.Sd,dt=t.Rd,C(gt,tx(e,t,Ue,rt,dt,u),0)):gt.u(0)):gt.return()})}),(R||B||fe)&&S.parse(c,!1,f),C(Ee,lj(e,t,n),2);case 2:return Zr(e.m),he=t.Rc,t.Rc=!1,C(Ee,e.g.hg(t.type,c),3);case 3:return C(Ee,Qm(e.g.ca,t.type,c,u,r,v,he,h,f),4);case 4:Zr(e.m),X(Ee)}})}function lj(e,t,n){var r,u,c,f,h;return Re(function(v){if(v.g==1)return r=t.stream.segmentIndex,r instanceof Ti&&r.Ga(e.l.presentationTimeline.Jb()),u=Math.max(e.h.bufferBehind,e.l.presentationTimeline.h),c=JE(e.g.ca,t.type),c==null?v.return():(f=n-c,h=f-u,h<=e.h.evictionGoal?v.return():C(v,e.g.ca.remove(t.type,c,c+h),2));Zr(e.m),X(v)})}function m1(e){return e&&e.type==_r&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function v1(e,t,n,r){var u,c,f,h,v;return Re(function(S){switch(S.g){case 1:if(u=n.cd())return S.return(u);if(c=null,t.V){var R=t.V,B=R.h;n instanceof Dn&&(B=R.j),B.has(n)?(R=B.get(n),r&&(R.Tf=r),c=R.ce):c=null}return c||(c=uv(n,t.stream,r||null,e.h.retryParameters,e.g.Mb)),f=0,t.ma&&(f=t.ma.h),t.jb=c,C(S,c.promise,2);case 2:if(h=S.h,t.jb=null,v=h.data,!n.aesKey){S.u(3);break}return C(S,d1(v,n.aesKey,f),4);case 4:v=S.h;case 3:return S.return(v)}})}function uv(e,t,n,r,u,c){c=c===void 0?!1:c;var f=e instanceof et?e:void 0,h=f?1:0;return e=nd(e.M(),e.Ha,e.va,r,n),e.contentType=t.type,u.request(Wa,e,{type:h,stream:t,segment:f,isPreload:c})}function y1(e,t,n,r){var u,c;return Re(function(f){if(f.g==1)return t.fc=!1,t.ze=!1,t.Ed=0,t.Wc=!0,t.Na=null,t.ma=null,t.V&&!e.o.has(t.stream)&&tu(t.V),r?(u=e.g.Jd(),c=e.g.ca.getDuration(),C(f,e.g.ca.remove(t.type,u+r,c),3)):C(f,RR(e.g.ca,t.type),4);if(f.g!=3)return Zr(e.m),n?C(f,e.g.ca.flush(t.type),3):f.u(3);Zr(e.m),t.Wc=!1,t.endOfStream=!1,t.La||t.ub||Xa(e,t,0),X(f)})}function Xa(e,t,n){var r=t.type;(r!=_r||e.i.has(r))&&(t.ub=new vn(function(){var u;return Re(function(c){if(c.g==1)return ce(c,2),C(c,nj(e,t),4);if(c.g!=2)return me(c,0);u=be(c),e.g&&e.g.onError(u),X(c)})}).Z(n))}function fp(e){e.ub!=null&&(e.ub.stop(),e.ub=null)}function dp(e){return Re(function(t){return e.jb?C(t,e.jb.abort(),0):t.u(0)})}function E1(e,t,n){var r;return Re(function(u){if(u.g==1)return C(u,qm(e.K),2);if(Zr(e.m),n.category===1){if(t.bc)return h1(e,!1),u.return();r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,r),n.handled&&(n.severity=1)}(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),X(u)})}function cj(e){var t,n,r,u,c,f;return Re(function(h){return h.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.L<n?h.return(!1):(e.L=t,r=Mi,(u=e.i.get(r.Y))&&(u.qc=null,sv(e,u),dp(u).catch(function(){})),(c=e.i.get(r.ja))&&(c.qc=null,sv(e,c),dp(c).catch(function(){})),f=new Map,e.j.audio&&f.set(r.Y,e.j.audio),e.j.video&&f.set(r.ja,e.j.video),C(h,NR(e.g.ca,f),2))):h.return(!0)})}function fj(e,t){if(e.H.projection!=t.projection||e.H.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new jn("spatialvideoinfo",n)}else n=new jn("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.H=t}}function lv(){}function _1(e,t,n,r,u){var c=u in r,f=c?n.constructor==Object&&Object.keys(r).length==0:n.constructor==Object&&Object.keys(n).length==0,h=c||f,v=!0,S;for(S in t){var R=u+"."+S,B=c?r[u]:n[S];h||S in n?t[S]===void 0?B===void 0||h?delete e[S]:e[S]=Aa(B):f?e[S]=t[S]:B.constructor==Object&&t[S]&&t[S].constructor==Object?(e[S]||(e[S]=Aa(B)),R=_1(e[S],t[S],B,r,R),v=v&&R):typeof t[S]!=typeof B||t[S]==null||typeof t[S]!="function"&&t[S].constructor!=B.constructor?(pe("Invalid config, wrong type for "+R),v=!1):(typeof n[S]=="function"&&n[S].length!=t[S].length&&Ke("Unexpected number of arguments for "+R),e[S]=t[S]):(pe("Invalid config, unrecognized key "+R),v=!1)}return v}function cv(e,t){for(var n={},r=n,u=0,c=0;u=e.indexOf(".",u),!(0>u);)(u==0||e[u-1]!="\\")&&(c=e.substring(c,u).replace(/\\\./g,"."),r[c]={},r=r[c],c=u+1),u+=1;return r[e.substring(c).replace(/\\\./g,".")]=t,n}function id(e,t){return e&&t}function nx(e,t){function n(f){for(var h=g(Object.keys(f)),v=h.next();!v.done;v=h.next())v=v.value,c(f[v])&&Object.keys(f[v]).length===0||u(f[v])||typeof f[v]=="function"?delete f[v]:c(f[v])&&(n(f[v]),Object.keys(f[v]).length===0&&delete f[v])}function r(f,h){return Object.keys(f).reduce(function(v,S){var R=f[S];return h.hasOwnProperty(S)?c(R)&&c(h[S])?(R=r(R,h[S]),(0<Object.keys(R).length||!c(R))&&(v[S]=R)):u(R)&&u(h[S])||Number.isNaN(R)&&Number.isNaN(h[S])||R!==h[S]&&(v[S]=R):v[S]=R,v},{})}function u(f){return Array.isArray(f)&&f.length===0}function c(f){return f&&typeof f=="object"&&!Array.isArray(f)}return e=r(e,t),n(e),e}ne("shaka.util.ConfigUtils",lv),lv.getDifferenceFromConfigObjects=nx,lv.convertToConfigObject=cv,lv.mergeConfigObjects=_1;function Qa(){}function rx(e){return e=Br(e),new Ei(e).Db}function hp(e,t,n){function r(h){ln(c).setUint32(f,h.byteLength,!0),f+=4,c.set(nr(h),f),f+=h.byteLength}if(!n||!n.byteLength)throw new Xe(2,6,6015);var u;typeof t=="string"?u=yo(t,!0):u=t,e=Br(e),e=yo(e,!0);var c=new Uint8Array(12+e.byteLength+u.byteLength+n.byteLength),f=0;return r(e),r(u),r(n),c}function ix(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Br(e).split("skd://").pop(),hp(e,n,t))}function T1(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}ne("shaka.util.FairPlayUtils",Qa),Qa.commonFairPlayResponse=function(e,t){if(e===2){try{var n=br(t.data)}catch(u){return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(u){}e&&(t.data=Ni(Wo(n)))}},Qa.expressplayFairPlayRequest=function(e,t){T1(e,t)},Qa.conaxFairPlayRequest=function(e,t){T1(e,t)},Qa.ezdrmFairPlayRequest=function(e,t){T1(e,t)},Qa.verimatrixFairPlayRequest=function(e,t){e===2&&(e=nr(t.body),e=Ss(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Ci("spc="+e))},Qa.expressplayInitDataTransform=function(e,t,n){return ix(e,t,n)},Qa.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Br(e).split("skd://").pop().split("?").shift(),n=m.atob(n);var r=new ArrayBuffer(2*n.length);r=ju(r);for(var u=0,c=n.length;u<c;u++)r[u]=n.charCodeAt(u);return hp(e,r,t)},Qa.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Br(e).split(";").pop(),hp(e,n,t))},Qa.verimatrixInitDataTransform=function(e,t,n){return ix(e,t,n)},Qa.initDataTransform=hp,Qa.defaultGetContentId=rx,Qa.isFairPlaySupported=function(){var e;return Re(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ce(t,2),C(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(be(t),t.return(!1))})};function S1(){}function od(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:ua(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(R,B,z){return Tr()&&B=="skd"&&(B=z.serverCertificate,z=rx(R),R=hp(R,z,B)),R},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Rr(),minHdcpVersion:"",ignoreDuplicateInitData:!ni()};(Rr()||Ri())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;ni()||Ui()||sn("Tizen 4")||sn("Tizen 5")||sn("Tizen 6")||vi()||li()&&vs()===53||li()&&vs()===68||!(!ri()||ri()&&qu()||ri()&&sn("Fuchsia"))||Rl()&&xr()||(n="smooth",r=!0),r={retryParameters:ua(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:fv,manifestPreprocessorTXml:dv,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:!(Ui()||ni()||vi()||Ri()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:fv,manifestPreprocessorTXml:dv,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var u={retryParameters:ua(),failureCallback:function(R){return id([R])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:.01,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:Ri()||Yo(),dontChooseCodecs:!1,shouldFixTimestampOffset:li()||di()};(li()||di()||ri()||Zu())&&(u.stallSkip=0),di()&&(u.gapPadding=2);var c={trackSelectionCallback:function(R){return Re(function(B){return B.return(R)})},downloadSizeCallback:function(R){var B;return Re(function(z){return z.g==1?navigator.storage&&navigator.storage.estimate?C(z,navigator.storage.estimate(),3):z.return(!0):(B=z.h,z.return(B.usage+R<.95*B.quota))})},progressCallback:function(R,B){return id([R,B])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:Ao()?.5:0,preferNetworkInformationBandwidth:!1},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(R){return id([R],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(R,B){return id([R,B])}};var f=!1,h=!1,v=!0;Gu()&&(h=f=!0,v=!1);var S={drm:t,manifest:r,streaming:u,mediaSource:n,offline:c,abrFactory:function(){return new ii},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:f,skipPlayDetection:h,supportsMultipleMediaElements:v}};return c.trackSelectionCallback=function(R){return Re(function(B){return B.return(dj(R,S.preferredAudioLanguage,S.preferredVideoHdrLevel))})},S}function ql(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return _1(e,t,n||od(),r,"")}function dj(e,t,n){var r=n;r=="AUTO"&&(r=m.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var u=e.filter(function(h){return!(h.type!="variant"||h.hdr&&h.hdr!=r)});n=[];var c=bc(t,u.map(function(h){return h.language}));c&&(n=u.filter(function(h){return Or(h.language)==c})),n.length==0&&(n=u.filter(function(h){return h.primary})),n.length==0&&(u.map(function(h){return h.language}),n=u);var f=n.filter(function(h){return h.height&&480>=h.height});for(f.length&&(f.sort(function(h,v){return v.height-h.height}),n=f.filter(function(h){return h.height==f[0].height})),t=[],n.length&&(u=Math.floor(n.length/2),n.sort(function(h,v){return h.bandwidth-v.bandwidth}),t.push(n[u])),e=g(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=_r&&n.type!="image"||t.push(n);return t}function fv(e){return id([e],e)}function dv(e){return id([e],e)}ne("shaka.util.PlayerConfiguration",S1),S1.mergeConfigObjects=ql,S1.createDefault=od;function sl(e,t,n,r){Nr.call(this),this.N=e,this.X=t,this.za=r.networkingEngine,this.B=n,this.o=null,this.ta=0,this.Ta=r.Bc,this.F=r.si,this.bb=r.ti,this.g=r.config,this.j=this.G=this.h=null,this.fa=!1,this.H=r.Di,this.ka=!1,this.l=null,this.ea=!1,this.i=this.C=null,this.ba=!1,this.L=new Map,this.oa=!1,this.Ea=r.Ci,this.aa=new tv,this.m=new Lr,this.O=null,this.s=!1,this.Fa=r.wh,this.ga=null,this.Da=r.vh,this.T=!1,this.K=[],this.I=[],this.A=!0}Y(sl,Nr);function pp(e,t,n){(e=t?e.I:e.K)?e.push(n):n()}function hj(e){if(e.I)for(var t=g(e.I),n=t.next();!n.done;n=t.next())n=n.value,n();e.I=null}function ox(e,t){if(e.O=t,e.T=!0,e.K){t=g(e.K);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.K=null}p=sl.prototype,p.getStartTime=function(){return this.B},p.Gc=function(){return this.N},p.gf=function(){return this.h};function pj(e){return e.ba=!0,e.i}function gj(e){return e.fa=!0,e.j}function mj(e){return e.ka=!0,e.H}p.getStats=function(){return this.aa};function vj(e){return e.ea=!0,e.l}function yj(e){return e.oa=!0,e.L}p.start=function(){var e=this;(function(){var t;return Re(function(n){switch(n.g){case 1:return C(n,Promise.resolve(),2);case 2:return ce(n,3),C(n,Ej(e),5);case 5:return gp(e),C(n,_j(e),6);case 6:if(gp(e),e.o||(e.o=new Bl(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups)),e.Da){var r=e.g.abrFactory;e.C=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Fa){r=e.h.presentationTimeline.U();var u=Vf(e.h.variants);u=e.o.create(u),e.i.configure(e.g.abr),e.i.setVariants(Array.from(u.values())),(u=e.i.chooseVariant())&&(e.ga=u,u.video&&ax(e,u.video,r),u.audio&&ax(e,u.audio,r))}return C(n,void 0,7);case 7:gp(e),e.m.resolve(),me(n,0);break;case 3:t=be(n),e.m.reject(t),X(n)}})})()},p.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):Nr.prototype.dispatchEvent.call(this,e)},p.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var t=new Map().set("detail",e);t=new jn("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function gp(e){if(e.s)throw new Xe(2,7,7003)}function w1(e,t){e.dispatchEvent(new jn("onstatechange",new Map().set("state",t)))}function Ej(e){var t,n,r,u;return Re(function(c){if(c.g==1)return w1(e,"manifest-parser"),e.j||(e.G=qn(e.N,e.X),e.j=e.G(),e.j.configure(e.g.manifest,function(){return e.A})),t=Date.now()/1e3,w1(e,"manifest"),e.h?c.u(2):C(c,e.j.start(e.N,e.bb),3);if(c.g!=2&&(e.h=c.h),n=new jn("manifestparsed",void 0),e.dispatchEvent(n),e.h.variants.length==0)throw new Xe(2,4,4036);Tj(e.h),r=Date.now()/1e3,u=r-t,e.aa.H=u,X(c)})}function _j(e){var t,n,r,u,c;return Re(function(f){switch(f.g){case 1:if(w1(e,"drm-engine"),e.ta=Date.now()/1e3,e.l=e.Ta(),e.F.g=e.l,e.l.configure(e.g.drm,function(){return e.A}),t=tn(e.F,e.h),!t){f.u(2);break}return n=new jn("trackschanged",void 0),C(f,Promise.resolve(),3);case 3:gp(e),e.dispatchEvent(n);case 2:return r=Vf(e.h.variants),C(f,ke(e.l,r,e.h.offlineSessionIds),4);case 4:return gp(e),C(f,Ct(e.F,e.h),5);case 5:if(u=f.h,!u){f.u(0);break}return c=new jn("trackschanged",void 0),C(f,Promise.resolve(),7);case 7:e.dispatchEvent(c),X(f)}})}p.configure=function(e,t){e=cv(e,t),ql(this.g,e)},p.getConfiguration=function(){return Aa(this.g)};function ax(e,t,n){var r,u,c,f,h;Re(function(v){if(v.g==1)return r=e.g.streaming.segmentPrefetchLimit||2,u=new nv(r,t,function(S,R,B){return uv(S,R,B||null,e.g.streaming.retryParameters,e.za,e.A)},!1),e.L.set(t.id,u),C(v,t.createSegmentIndex(),2);c=e.B||0,(h=(f=t.segmentIndex.Ib(c))?f.current():null)||(h=eu(t.segmentIndex)),h&&(n?h.$&&zR(u,h.$):lp(u,h.startTime)),X(v)})}p.dj=function(){return this.m},p.destroy=function(){var e=this,t,n,r;return Re(function(u){switch(u.g){case 1:if(e.s=!0,!e.j||e.fa){u.u(2);break}return C(u,e.j.stop(),2);case 2:if(!e.i||e.ba){u.u(4);break}return C(u,e.i.stop(),4);case 4:if(e.H&&!e.ka&&e.H.release(),!e.l||e.ea){u.u(6);break}return C(u,e.l.destroy(),6);case 6:if(0<e.L.size&&!e.oa)for(t=g(e.L.values()),n=t.next();!n.done;n=t.next())r=n.value,tu(r);X(u)}})};function Tj(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}ne("shaka.media.PreloadManager",sl),sl.prototype.destroy=sl.prototype.destroy,sl.prototype.waitForFinish=sl.prototype.dj;function hv(e,t){Nr.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{zc:null,yc:ad,oc:function(r,u){return Pc(n,"enter",r,u)}},{zc:mp,yc:ad,oc:function(r,u){return Pc(n,"enter",r,u)}},{zc:vp,yc:ad,oc:function(r,u){return Pc(n,"enter",r,u)}},{zc:ad,yc:mp,oc:function(r,u){return Pc(n,"exit",r,u)}},{zc:ad,yc:vp,oc:function(r,u){return Pc(n,"exit",r,u)}},{zc:mp,yc:vp,oc:function(r,u){return Pc(n,"skip",r,u)}},{zc:vp,yc:mp,oc:function(r,u){return Pc(n,"skip",r,u)}}],this.h=new Tt,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}Y(hv,Nr),hv.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Nr.prototype.release.call(this)},hv.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=g(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var u=this.g.get(r),c=e<r.startTime?mp:e>r.endTime?vp:ad;this.g.set(r,c);for(var f=g(this.m),h=f.next();!h.done;h=f.next())h=h.value,h.zc==u&&h.yc==c&&h.oc(r,t)}}};function Pc(e,t,n,r){t=new jn(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var mp=1,ad=2,vp=3;function pv(e,t,n){var r,u,c,f,h,v,S;return Re(function(R){switch(R.g){case 1:var B=new Ei(e).Pa.split("/").pop().split(".");return r=B.length==1?"":B.pop().toLowerCase(),(u=Sj[r])?R.return(u):(c=0,f=Bi([e],n),ce(R,2),f.method="HEAD",C(R,t.request(c,f).promise,4));case 4:h=R.h,u=h.headers["content-type"],me(R,3);break;case 2:if(v=be(R),!v||v.code!=1002&&v.code!=1001){R.u(3);break}return f.method="GET",C(R,t.request(c,f).promise,6);case 6:S=R.h,u=S.headers["content-type"];case 3:return R.return(u?u.toLowerCase().split(";").shift():"")}})}var Sj={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"};function sx(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(f){return sx(f,e)}).join("");if(!e.payload)return e.payload;var n=[],r=e.fontWeight>=zu,u=e.fontStyle==Su,c=e.textDecoration.includes(Vs);return r&&n.push(["b"]),u&&n.push(["i"]),c&&n.push(["u"]),u=e.color,u==""&&t&&(u=t.color),r="",(u=ux(u))&&(r+="."+u),u=e.backgroundColor,u==""&&t&&(u=t.backgroundColor),(t=ux(u))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(f,h){var v=g(h);return h=v.next().value,v=v.next().value,"<"+h+(v===void 0?"":v)+">"+f+"</"+h+">"},e.payload)}function ux(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function A1(e,t){var n=[];e=g(lx(e));for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,T(A1(r.nestedCues,r)));else{var u=r.clone();u.nestedCues=[],u.payload=sx(r,t),n.push(u)}return n}function lx(e){var t=[];e=g(e);for(var n=e.next(),r={};!n.done;r={Le:void 0},n=e.next())r.Le=n.value,t.some(function(u){return function(c){return Tf(u.Le,c)}}(r))||t.push(r.Le);return t}function wj(e){function t(r){for(var u=5381,c=r.length;c;)u=33*u^r.charCodeAt(--c);return(u>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch(r){}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function Aj(e){if(e.endTime===1/0||e.endTime<e.startTime)return null;var t=new jr(e.startTime,e.endTime,e.text);return t.line=typeof e.line=="number"?e.line:null,e.lineAlign&&(t.lineAlign=e.lineAlign),t.lineInterpretation=e.snapToLines?Dl:1,t.position=typeof e.position=="number"?e.position:null,e.positionAlign&&(t.positionAlign=e.positionAlign),t.size=e.size,t.textAlign=e.align,e.vertical==="lr"?t.writingMode="vertical-lr":e.vertical==="rl"&&(t.writingMode="vertical-rl"),e.region&&(t.region.id=e.region.id,t.region.height=e.region.lines,t.region.heightUnits=2,t.region.regionAnchorX=e.region.regionAnchorX,t.region.regionAnchorY=e.region.regionAnchorY,t.region.scroll=e.region.scroll,t.region.viewportAnchorX=e.region.viewportAnchorX,t.region.viewportAnchorY=e.region.viewportAnchorY,t.region.viewportAnchorUnits=wn,t.region.width=e.region.width,t.region.widthUnits=wn),Sf(t),t}function fa(e,t){this.g=null;for(var n=g(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.kind!=="metadata"&&r.kind!=="chapters"&&(r.mode="disabled",r.label==t&&(this.g=r));this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}p=fa.prototype,p.configure=function(){},p.remove=function(e,t){return this.g?(cx(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},p.append=function(e){var t=A1(e),n=[];e=this.g.cues?Array.from(this.g.cues):[],t=g(t);for(var r=t.next(),u={};!r.done;u={Ic:void 0},r=t.next())u.Ic=r.value,!e.some(function(c){return function(f){return f.startTime==c.Ic.startTime&&f.endTime==c.Ic.endTime&&f.text==c.Ic.payload}}(u))&&u.Ic.payload&&(r=wj(u.Ic))&&n.push(r);for(e=n.slice().sort(function(c,f){return c.startTime!=f.startTime?c.startTime-f.startTime:c.endTime!=f.endTime?c.endTime-f.startTime:"line"in VTTCue.prototype?n.indexOf(f)-n.indexOf(c):n.indexOf(c)-n.indexOf(f)}),e=g(e),t=e.next();!t.done;t=e.next())this.g.addCue(t.value)},p.destroy=function(){return this.g&&(cx(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},p.isTextVisible=function(){return this.g.mode=="showing"},p.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function cx(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=g(Array.from(e.cues)),u=r.next();!u.done;u=r.next())(u=u.value)&&t(u)&&e.removeCue(u);e.mode=n}ne("shaka.text.SimpleTextDisplayer",fa),fa.prototype.setTextVisibility=fa.prototype.setTextVisibility,fa.prototype.isTextVisible=fa.prototype.isTextVisible,fa.prototype.destroy=fa.prototype.destroy,fa.prototype.append=fa.prototype.append,fa.prototype.remove=fa.prototype.remove,fa.prototype.configure=fa.prototype.configure;function da(){}p=da.prototype,p.configure=function(){},p.remove=function(){},p.append=function(){},p.destroy=function(){},p.isTextVisible=function(){return!1},p.setTextVisibility=function(){},ne("shaka.text.StubTextDisplayer",da),da.prototype.setTextVisibility=da.prototype.setTextVisibility,da.prototype.isTextVisible=da.prototype.isTextVisible,da.prototype.destroy=da.prototype.destroy,da.prototype.append=da.prototype.append,da.prototype.remove=da.prototype.remove,da.prototype.configure=da.prototype.configure;function fx(){}function sd(e){for(;e.firstChild;)e.removeChild(e.firstChild)}ne("shaka.util.Dom",fx),fx.removeAllChildren=sd;function ha(e,t,n){var r=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||gr("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new on(function(){r.A.paused||ud(r)}).Ra(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Tt,this.j.D(document,"fullscreenchange",function(){ud(r,!0)}),this.j.D(this.A,"seeking",function(){ud(r,!0)}),this.j.D(this.A,"resize",function(){var u=r.A,c=u.videoWidth;u=u.videoHeight,c&&u?r.l=c/u:r.l=null}),this.o=null,"ResizeObserver"in m&&(this.o=new ResizeObserver(function(){ud(r,!0)}),this.o.observe(this.g)),this.B=new Map}p=ha.prototype,p.configure=function(e){this.C&&this.C.Ra(e.captionsUpdatePeriod)},p.append=function(e){var t=[].concat(T(this.h));e=g(lx(e));for(var n=e.next(),r={};!n.done;r={Me:void 0},n=e.next())r.Me=n.value,t.some(function(u){return function(c){return Tf(c,u.Me)}}(r))||this.h.push(r.Me);ud(this)},p.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},p.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),ud(this,n>this.h.length),!0},p.isTextVisible=function(){return this.m},p.setTextVisibility=function(e){this.m=e};function Ij(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function dx(e,t,n,r,u){var c=!1,f=[],h=[];t=g(t);for(var v=t.next();!v.done;v=t.next()){v=v.value,u.push(v);var S=e.i.get(v),R=v.startTime<=r&&v.endTime>r,B=S?S.oh:null;S&&(f.push(S.Ne),S.uc&&f.push(S.uc),R||(c=!0,e.i.delete(v),S=null)),R&&(h.push(v),S?Ij(e,B)||(c=!0):(Cj(e,v,u),S=e.i.get(v),B=S.oh,c=!0)),0<v.nestedCues.length&&B&&dx(e,v.nestedCues,B,r,u),u.pop()}if(c){for(r=g(f),u=r.next();!u.done;u=r.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(h.sort(function(z,J){return z.startTime!=J.startTime?z.startTime-J.startTime:z.endTime-J.endTime}),h=g(h),r=h.next();!r.done;r=h.next())r=e.i.get(r.value),r.uc?(r.uc.contains(n)&&r.uc.removeChild(n),n.appendChild(r.uc),r.uc.appendChild(r.Ne)):n.appendChild(r.Ne)}}function ud(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=g(e.B.values());for(var r=t.next();!r.done;r=t.next())sd(r.value);sd(e.g),e.i.clear(),e.B.clear()}e.m&&dx(e,e.h,e.g,n,[])}}function Cj(e,t,n){var r=1<n.length,u=r?"span":"div";t.lineBreak&&(u="br"),t.rubyTag&&(u=t.rubyTag),r=!r&&0<t.nestedCues.length;var c=document.createElement(u);if(u!="br"&&Rj(e,c,t,n,r),n=null,t.region&&t.region.id){var f=t.region,h=e.l===4/3?2.5:1.9;if(n=f.id+"_"+f.width+"x"+f.height+(f.heightUnits==wn?"%":"px")+"-"+f.viewportAnchorX+"x"+f.viewportAnchorY+(f.viewportAnchorUnits==wn?"%":"px"),e.B.has(n))n=e.B.get(n);else{u=document.createElement("span");var v=f.heightUnits==wn?"%":"px",S=f.widthUnits==wn?"%":"px",R=f.viewportAnchorUnits==wn?"%":"px";u.id="shaka-text-region---"+n,u.classList.add("shaka-text-region"),u.style.position="absolute";var B=f.height,z=f.width;f.heightUnits===2&&(B=5.33*f.height,v="%"),f.widthUnits===2&&(z=f.width*h,S="%"),u.style.height=B+v,u.style.width=z+S,f.viewportAnchorUnits===2?(h=f.viewportAnchorY/75*100,v=f.viewportAnchorX/(e.l===4/3?160:210)*100,h-=f.regionAnchorY*B/100,v-=f.regionAnchorX*z/100,u.style.top=h+"%",u.style.left=v+"%"):(u.style.top=f.viewportAnchorY-f.regionAnchorY*B/100+R,u.style.left=f.viewportAnchorX-f.regionAnchorX*z/100+R),f.heightUnits!==0&&f.widthUnits!==0&&f.viewportAnchorUnits!==0&&(f=Math.max(0,Math.min(100-(parseInt(u.style.width.slice(0,-1),10)||0),parseInt(u.style.left.slice(0,-1),10)||0)),u.style.top=Math.max(0,Math.min(100-(parseInt(u.style.height.slice(0,-1),10)||0),parseInt(u.style.top.slice(0,-1),10)||0))+"%",u.style.left=f+"%"),u.style.display="flex",u.style.flexDirection="column",u.style.alignItems="center",u.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(n,u),n=u}}u=c,r&&(u=document.createElement("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=t.backgroundColor,u.style.lineHeight="normal",c.appendChild(u)),e.i.set(t,{Ne:c,oh:u,uc:n})}function bj(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Af?n:e==="left"||e==="start"&&t===Ml||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Ml?"line-right":"center"}function Rj(e,t,n,r,u){var c=t.style,f=n.nestedCues.length==0,h=1<r.length;c.whiteSpace="pre-wrap";var v=n.payload.replace(/\s+$/g,function(R){return"".repeat(R.length)});if(c.webkitTextStrokeColor=n.textStrokeColor,c.webkitTextStrokeWidth=n.textStrokeWidth,c.color=n.color,c.direction=n.direction,c.opacity=n.opacity,c.paddingLeft=I1(n.linePadding,n,e.s),c.paddingRight=I1(n.linePadding,n,e.s),c.textCombineUpright=n.textCombineUpright,c.textShadow=n.textShadow,n.backgroundImage)c.backgroundImage="url('"+n.backgroundImage+"')",c.backgroundRepeat="no-repeat",c.backgroundSize="contain",c.backgroundPosition="center",n.backgroundColor&&(c.backgroundColor=n.backgroundColor),c.width="100%",c.height="100%";else{if(n.nestedCues.length)var S=t;else S=document.createElement("span"),t.appendChild(S);n.border&&(S.style.border=n.border),u||((t=xj(r,function(R){return R.backgroundColor}))?S.style.backgroundColor=t:v&&(S.style.backgroundColor="rgba(0, 0, 0, 0.8)")),v&&(S.textContent=v)}h&&!r[r.length-1].isContainer?c.display="inline":(c.display="flex",c.flexDirection="column",c.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(c.width="100%",c.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(c.width="100%",c.alignItems="end"),c.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),f||(c.margin="0"),c.fontFamily=n.fontFamily,c.fontWeight=n.fontWeight.toString(),c.fontStyle=n.fontStyle,c.letterSpacing=n.letterSpacing,c.fontSize=I1(n.fontSize,n,e.s),r=n.line,r!=null&&(f=n.lineInterpretation,f==Dl&&(f=1,h=16,e.l&&1>e.l&&(h=32),r=0>r?100+r/h*100:r/h*100),f==1&&(c.position="absolute",n.writingMode==Vu?(c.width="100%",n.lineAlign==Ku?c.top=r+"%":n.lineAlign=="end"&&(c.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(c.height="100%",n.lineAlign==Ku?c.left=r+"%":n.lineAlign=="end"&&(c.right=100-r+"%")):(c.height="100%",n.lineAlign==Ku?c.right=r+"%":n.lineAlign=="end"&&(c.left=100-r+"%")))),c.lineHeight=n.lineHeight,e=bj(n),e=="line-left"?(c.cssFloat="left",n.position!==null&&(c.position="absolute",n.writingMode==Vu?(c.left=n.position+"%",c.width="auto"):c.top=n.position+"%")):e=="line-right"?(c.cssFloat="right",n.position!==null&&(c.position="absolute",n.writingMode==Vu?(c.right=100-n.position+"%",c.width="auto"):c.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(c.position="absolute",n.writingMode==Vu?(c.left=n.position+"%",c.width="auto"):c.top=n.position+"%"),c.textAlign=n.textAlign,c.textDecoration=n.textDecoration.join(" "),c.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&c.writingMode==n.writingMode||(c.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Vu?c.width=n.size+"%":c.height=n.size+"%")}function I1(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var u=r.value;switch(r.unit){case"%":return u/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*u/t.cellResolution.rows+"px";default:return e}}function xj(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}ne("shaka.text.UITextDisplayer",ha),ha.prototype.setTextVisibility=ha.prototype.setTextVisibility,ha.prototype.isTextVisible=ha.prototype.isTextVisible,ha.prototype.remove=ha.prototype.remove,ha.prototype.destroy=ha.prototype.destroy,ha.prototype.append=ha.prototype.append,ha.prototype.configure=ha.prototype.configure;function Nj(e,t){function n(c){for(var f=c,h=g(t),v=h.next();!v.done;v=h.next())v=v.value,v.end&&v.start<c&&(f+=v.end-v.start);return c=Math.floor(f/3600),h=Math.floor(f/60%60),v=Math.floor(f%60),f=Math.floor(1e3*f%1e3),(10>c?"0":"")+c+":"+(10>h?"0":"")+h+":"+(10>v?"0":"")+v+"."+(100>f?10>f?"00":"0":"")+f}var r=A1(e);e="WEBVTT\n\n",r=g(r);for(var u=r.next();!u.done;u=r.next())u=u.value,e+=n(u.startTime)+" --> "+n(u.endTime)+function(c){var f=[];switch(c.textAlign){case"left":f.push("align:left");break;case"right":f.push("align:right");break;case Ca:f.push("align:middle");break;case"start":f.push("align:start");break;case"end":f.push("align:end")}switch(c.writingMode){case"vertical-lr":f.push("vertical:lr");break;case"vertical-rl":f.push("vertical:rl")}return f.length?" "+f.join(" "):""}(u)+"\n",e+=u.payload+"\n\n";return e}ne("shaka.text.WebVttGenerator",function(){});function hx(e,t){this.h=e,this.g=t,this.i=void 0,this.l=!1,this.o=!0,this.j=this.m=!1}hx.prototype.configure=function(e){this.g=e};function Mj(e){e.l=!1,e.o=!0,e.m=!1,e.j=!1}function Dj(e,t){e.j=t,e.j?e.i==_v?e.i=Tv:e.i==Sv&&(e.i=wv):e.i==Tv?e.i=_v:e.i==wv&&(e.i=Sv)}function Pj(e,t,n){try{if(!e.g.enabled)return t;var r=C1(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=mv;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=yv;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=gx;break e}u=void 0}r.ot=u,r.su=!0;var c=gv(r);return b1(t,c)}catch(f){return wt("CMCD_SRC_ERROR","Could not generate src CMCD data.",f),t}}function C1(e){return e.g.sessionId||(e.g.sessionId=m.crypto.randomUUID()),{v:1,sf:e.i,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function ld(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,C1(e)),n.pr=e.h.fb();var u=n.ot===vv||n.ot===yv;if(e.m&&u&&(n.bs=!0,n.su=!0,e.m=!1),n.su==null&&(n.su=e.o),e=Oj(e,n),r)r=Uj(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var c=gv(e);c&&(t.uris=t.uris.map(function(f){return b1(f,c)}))}}}function Oj(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,u){return n.includes(u)&&(r[u]=t[u]),r},{}):t}function Lj(e){if(e.type===0)return Bj;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?yv:vv;if(t=="audio")return mv;if(t=="text")return e.mimeType==="application/mp4"?Ev:R1}}function kj(e,t){if(t=e.h.xb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function px(e,t){if(t=e.h.xb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function Fj(e,t){var n=e.h.mc();if(!n.length)return NaN;e=n[0],n=g(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case vv:return e.videoBandwidth||NaN;case mv:return e.audioBandwidth||NaN;default:return e.bandwidth}}function gv(e){function t(B){return 100*n(B/100)}function n(B){return Math.round(B)}function r(B){return!Number.isNaN(B)&&B!=null&&B!==""&&B!==!1}var u=[],c={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(B){return encodeURIComponent(B)},rtp:t,tb:n},f=Object.keys(e||{}).sort();f=g(f);for(var h=f.next();!h.done;h=f.next()){h=h.value;var v=e[h];if(r(v)&&(h!=="v"||v!==1)&&(h!="pr"||v!==1)){var S=c[h];S&&(v=S(v)),S=typeof v;var R=void 0;R=S==="string"&&h!=="ot"&&h!=="sf"&&h!=="st"?h+"="+JSON.stringify(v):S==="boolean"?h:S==="symbol"?h+"="+v.description:h+"="+v,u.push(R)}}return u.join(",")}function Uj(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],u=[{},{},{},{}],c={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=g(t);for(var f=t.next();!f.done;f=t.next())f=f.value,u[c[f]!=null?c[f]:1][f]=e[f];for(e=0;e<u.length;e++)(c=gv(u[e]))&&(n["CMCD-"+r[e]]=c);return n}function b1(e,t){return!t||e.includes("offline:")?e:(e=new Ei(e),e.g.set("CMCD",t),e.toString())}var gx="m",mv="a",vv="v",yv="av",Bj="i",R1="c",Ev="tt",_v="d",Tv="ld",Sv="h",wv="lh";ne("shaka.util.CmcdManager.StreamingFormat",{DASH:_v,xj:Tv,HLS:Sv,yj:wv,Lj:"s",OTHER:"o"});function Ja(e){this.h=e,this.g=null}p=Ja.prototype,p.configure=function(e){this.h=e},p.wg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(yx)?1e3*this.g.get(yx):null},p.vg=function(){return this.h.enabled&&this.g&&this.g.has(vx)?1e3*this.g.get(vx):null},p.Wh=function(){return this.h.enabled&&this.g&&this.g.has(Ex)?this.g.get(Ex):null},p.Xh=function(){return this.h.enabled&&this.g&&this.g.has(_x)?this.g.get(_x):null},p.getBandwidthEstimate=function(e){var t=this.vg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function mx(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}ne("shaka.util.CmsdManager",Ja),Ja.prototype.getBandwidthEstimate=Ja.prototype.getBandwidthEstimate,Ja.prototype.getRoundTripTime=Ja.prototype.Xh,Ja.prototype.getResponseDelay=Ja.prototype.Wh,Ja.prototype.getEstimatedThroughput=Ja.prototype.vg,Ja.prototype.getMaxBitrate=Ja.prototype.wg;var vx="etp",yx="mb",Ex="rd",_x="rtt";function Tx(){this.g=null,this.h=[]}function x1(e,t){return Re(function(n){if(n.g==1)return e.g?C(n,new Promise(function(r){return e.h.push(r)}),2):n.u(2);e.g=t,X(n)})}Tx.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function hn(e,t,n){t=t===void 0?null:t,Nr.call(this);var r=this;this.m=B1,this.h=null,this.ee=t,this.oa=!1,this.qe=new Tt,this.jd=new Tt,this.l=new Tt,this.Ta=new Tt,this.vb=new Tt,this.G=this.I=this.B=this.F=null,this.ye=0,this.aa=new Tx,this.ka=this.$f=this.ea=this.i=this.bb=this.H=this.j=this.$b=this.L=this.bg=this.fa=this.O=this.fd=this.N=this.ge=this.K=this.Fb=null,this.Da=!1,this.za=this.o=null,this.ag=1e9,this.pd=[],this.X=NaN,this.g=ul(this),this.T=null,this.Ae=-1,this.Fa=null,this.ga={width:1/0,height:1/0},this.ae=new vr(this.g,this.ga,null),this.je=[],this.s=null,this.Ea=new Bl(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Eb=this.g.preferredTextLanguage,this.nd=this.g.preferredTextRole,this.md=this.g.preferForcedSubs,this.ld=[],n&&n(this),this.O=Qj(this),this.fa=new Ja(this.g.cmsd),this.F=xx(this),this.F.Pf(this.g.streaming.forceHTTP),this.F.Qf(this.g.streaming.forceHTTPS),this.F.m=this.g.streaming.minBytesForProgressEvents,this.Hb=this.ba=this.A=null,this.Ce=!1,this.Be=new on(function(){return Re(function(u){if(u.g==1)return r.ba?C(u,r.Sb(r.Hb,!0),3):u.u(0);if(u.g!=4)return C(u,r.load(r.ba),4);r.Ce?r.Hb.pause():r.Hb.play(),r.ba=null,r.Ce=!1,X(u)})}),xv&&(this.A=xv(),this.A.configure(this.g.ads),this.vb.D(this.A,"ad-content-pause-requested",function(u){var c;return Re(function(f){if(f.g==1)return r.Be.stop(),r.ba?f.u(0):(r.Hb=r.h,r.Ce=r.h.ended,c=u.saveLivePosition||!1,C(f,r.og(!0,c),3));r.ba=f.h,X(f)})}),this.vb.D(this.A,"ad-content-resume-requested",function(u){if(u=u.offset||0,r.ba){var c=r.ba;c.B&&u&&(c.B+=u)}r.Be.Z(.1)}),this.vb.D(this.A,"ad-content-attach-requested",function(){return Re(function(u){return r.h||!r.Hb?u.u(0):C(u,r.Sb(r.Hb,!0),0)})})),this.qe.D(m,"online",function(){k1(r),r.Jf()}),this.he=new on(function(){for(var u=Date.now()/1e3,c=!1,f=!0,h=g(r.i.variants),v=h.next();!v.done;v=h.next())v=v.value,0<v.disabledUntilTime&&v.disabledUntilTime<=u&&(v.disabledUntilTime=0,c=!0),0<v.disabledUntilTime&&(f=!1);f&&r.he.stop(),c&&fd(r,!1,void 0,!1,!1)}),this.ta=null,e&&(gr("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Sb(e,!0)),this.C=null}Y(hn,Nr);function Av(e){e.L!=null&&(wR(e.L),e.L.release(),e.L=null)}function jj(e,t){t.lcevc.enabled?(Av(e),e.L==null&&(e.L=new ap(e.h,e.bg,t.lcevc),e.I&&(e.I.T=e.L))):Av(e)}function ai(e,t){return new jn(e,t)}p=hn.prototype,p.destroy=function(){var e=this,t;return Re(function(n){switch(n.g){case 1:return e.m==nu?n.return():(Av(e),t=e.detach(),e.m=nu,C(n,t,2));case 2:return C(n,e.Pe(),3);case 3:if(e.qe&&(e.qe.release(),e.qe=null),e.jd&&(e.jd.release(),e.jd=null),e.l&&(e.l.release(),e.l=null),e.Ta&&(e.Ta.release(),e.Ta=null),e.vb&&(e.vb.release(),e.vb=null),e.za=null,e.g=null,e.s=null,e.ee=null,e.O=null,e.fa=null,!e.F){n.u(4);break}return C(n,e.F.destroy(),5);case 5:e.F=null;case 4:e.o&&(e.o.release(),e.o=null),Nr.prototype.release.call(e),X(n)}})};function cd(e,t){e.dispatchEvent(ai("onstatechange",new Map().set("state",t)))}p.Sb=function(e,t){t=t===void 0?!0:t;var n=this,r,u,c;return Re(function(f){switch(f.g){case 1:if(n.m==nu)throw new Xe(2,7,7e3);if(r=n.h&&n.h==e,!n.h||n.h==e){f.u(2);break}return C(f,n.detach(),2);case 2:return C(f,N1(n,"attach"),4);case 4:if(f.h)return f.return();if(ce(f,5,6),r||(cd(n,"attach"),u=function(){var h=F1(n,!1);h&&dd(n,h)},n.jd.D(e,"error",u),n.h=e),!t||!tr()||n.I){f.u(6);break}return C(f,M1(n),6);case 6:Je(f),n.aa.release(),we(f,0);break;case 5:return c=be(f),C(f,n.detach(),10);case 10:throw c}})},p.xh=function(e){this.bg=e},p.detach=function(e){e=e===void 0?!1:e;var t=this;return Re(function(n){if(n.g==1){if(t.m==nu)throw new Xe(2,7,7e3);return C(n,t.ec(!1,e),2)}if(n.g!=3)return C(n,N1(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.jd.Qa(),t.h=null),cd(t,"detach"),t.A&&!e&&t.A.release()}finally{t.aa.release()}X(n)})};function N1(e,t){var n;return Re(function(r){return r.g==1?(n=++e.ye,C(r,x1(e.aa,t),2)):n!=e.ye?(e.aa.release(),r.return(!0)):r.return(!1)})}p.ec=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c,f,h,v,S,R,B,z;return Re(function(J){switch(J.g){case 1:return n.m!=nu&&(n.m=B1),C(J,N1(n,"unload"),2);case 2:return J.h?J.return():(oe(J,3),n.Da=!1,cd(n,"unload"),e&&!tr()&&(e=!1),Av(n),r=n.ld.map(function(fe){return fe()}),n.ld=[],C(J,Promise.all(r),5));case 5:if(n.dispatchEvent(ai("unloading")),n.fd&&(n.fd.release(),n.fd=null),n.h&&(n.l.Qa(),n.Ta.Qa()),n.he.stop(),n.Fb&&(n.Fb.release(),n.Fb=null),n.ge&&(n.ge.stop(),n.ge=null),!n.H){J.u(6);break}return C(J,n.H.stop(),7);case 7:n.H=null,n.bb=null;case 6:if(!n.o){J.u(8);break}return C(J,n.o.stop(),8);case 8:if(!n.j){J.u(10);break}return C(J,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.K&&(n.K.release(),n.K=null),n.G&&(n.G.release(),n.G=null),!Tr("webkit")||!n.B){J.u(12);break}return C(J,n.B.destroy(),13);case 13:n.B=null;case 12:if(!n.I){J.u(14);break}return C(J,n.I.destroy(),15);case 15:n.I=null;case 14:if(n.A&&!t&&n.A.onAssetUnload(),n.ba&&!t&&(n.ba.destroy(),n.ba=null),t||n.Be.stop(),n.O&&Mj(n.O),n.fa&&(n.fa.g=null),!n.C){J.u(16);break}return C(J,n.C.destroy(),17);case 17:n.C=null;case 16:if(n.h&&sd(n.h),!n.h||!n.h.src){J.u(18);break}return C(J,new Promise(function(fe){return new on(fe).Z(.1)}),19);case 19:n.h.removeAttribute("src"),n.h.load();case 18:if(!n.B){J.u(20);break}return C(J,n.B.destroy(),21);case 21:n.B=null;case 20:if(n.ta&&n.ea!=n.ta.Gc()&&(n.ta.s||n.ta.destroy(),n.ta=null),n.ea=null,n.$f=null,n.N=null,n.i){for(u=g(n.i.variants),c=u.next();!c.done;c=u.next())for(f=c.value,h=g([f.audio,f.video]),v=h.next();!v.done;v=h.next())(S=v.value)&&S.segmentIndex&&S.segmentIndex.release();for(R=g(n.i.textStreams),B=R.next();!B.done;B=R.next())z=B.value,z.segmentIndex&&z.segmentIndex.release()}n.g.streaming.clearDecodingCache&&(Yh={},dn.clear()),n.i=null,n.s=new tv,n.we=null,n.Fa=null,n.T=null,n.Ae=-1,n.pd=[],n.X=NaN,L1(n);case 3:Je(J),n.aa.release(),we(J,4);break;case 4:if(e&&tr()&&!n.I&&n.h)return C(J,M1(n),0);J.u(0)}})},p.cj=function(e){this.ka=e},p.load=function(e,t,n){t=t===void 0?null:t;var r=this,u,c,f,h,v,S,R,B,z,J,fe,he,Ee;return Re(function(Le){switch(Le.g){case 1:if(r.m==nu)throw new Xe(2,7,7e3);return u=null,c="",e instanceof sl?(u=e,c=u.Gc()||""):c=e||"",C(Le,x1(r.aa,"load"),2);case 2:if(r.aa.release(),!r.h)throw new Xe(2,7,7002);if(!r.ea){Le.u(3);break}return r.ea=c,C(Le,r.ec(!1),3);case 3:if(f=++r.ye,h=function(){return Re(function(Fe){if(Fe.g==1)return r.ye==f?Fe.u(0):u?C(Fe,u.destroy(),3):Fe.u(3);throw new Xe(2,7,7e3)})},v=function(Fe,it){return Re(function(Ue){switch(Ue.g){case 1:return oe(Ue,2),C(Ue,x1(r.aa,it),4);case 4:return C(Ue,h(),5);case 5:return C(Ue,Fe(),6);case 6:return C(Ue,h(),7);case 7:u&&r.g&&(u.g=r.g);case 2:Je(Ue),r.aa.release(),we(Ue,0)}})},ce(Le,5,6),t==null&&u&&(t=u.getStartTime()),r.ka=t,r.Da=!1,r.dispatchEvent(ai("loading")),u){n=u.X,Le.u(8);break}if(n){Le.u(8);break}return C(Le,v(function(){return Re(function(Fe){if(Fe.g==1)return C(Fe,Ix(r,c),2);n=Fe.h,X(Fe)})},"guessMimeType_"),8);case 8:if(S=!!u,u){ox(u,r),r.s=u.getStats(),Le.u(11);break}return C(Le,wx(r,c,t,n,!0),12);case 12:(u=Le.h)?(u.A=!1,ox(u,r),r.s=u.getStats(),u.start(),u.m.catch(function(){})):r.s=new tv;case 11:if(R=!u,B=Date.now()/1e3,r.s=u?u.getStats():new tv,r.ea=c,r.$f=n||null,R)return C(Le,v(function(){return Re(function(Fe){return C(Fe,Hj(r,n),0)})},"initializeSrcEqualsDrmInner_"),20);if(r.I){Le.u(15);break}return C(Le,v(function(){return Re(function(Fe){return C(Fe,M1(r),0)})},"initializeMediaSourceEngineInner_"),15);case 15:return C(Le,v(function(){return Re(function(Fe){return C(Fe,u.m,0)})},"waitForFinish"),17);case 17:return r.g=u.getConfiguration(),r.ae=u.F,r.bb=u.G,r.H=gj(u),r.H&&r.H.setMediaElement&&r.h&&r.H.setMediaElement(r.h),r.fd=mj(u),r.$b=u.Ea,r.i=u.gf(),(z=u.o)&&(r.Ea=z),S&&r.h&&r.h.nodeName==="AUDIO"&&(Zj(r),r.configure("manifest.disableVideo",!0)),r.B=vj(u),C(Le,v(function(){return Re(function(Fe){return C(Fe,r.B.Sb(r.h),0)})},"drmEngine_.attach"),18);case 18:return!(J=u.C)||r.za&&r.za==J||(r.o=pj(u),r.za=u.C,typeof r.o.setMediaElement!="function"&&(gr("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(gr("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(gr("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),fe=yj(u),he=u.ga,C(Le,v(function(){return Re(function(Fe){return C(Fe,Gj(r,B,he,fe),0)})},"loadInner_"),19);case 19:hj(u),Le.u(14);break;case 20:return C(Le,v(function(){return Re(function(Fe){return C(Fe,Vj(r,B,n),0)})},"srcEqualsInner_"),14);case 14:r.dispatchEvent(ai("loaded"));case 6:if(Je(Le),!u){Le.u(22);break}return C(Le,u.destroy(),22);case 22:r.ta=null,we(Le,0);break;case 5:if(Ee=be(Le),!Ee||Ee.code==7e3){Le.u(24);break}return C(Le,r.ec(!1),24);case 24:throw Ee}})};function Zj(e){for(var t=g(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}p.Zi=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r;return Re(function(u){return u.g==1?C(u,Sx(n),2):u.g!=3?(r=u.h,C(u,n.ec(e,t),3)):u.return(r)})},p.og=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,r;return Re(function(u){return u.g==1?C(u,Sx(n,t),2):u.g!=3?(r=u.h,C(u,n.detach(e),3)):u.return(r)})};function Sx(e,t){t=t===void 0?!1:t;var n,r;return Re(function(u){if(u.g==1)return n=null,e.i&&e.H&&e.bb&&e.ea?(r=e.h.currentTime,e.U()&&!t&&(r=null),C(u,Ax(e,e.ea,r,e.$f,!0,!1,!1),3)):u.u(2);if(u.g!=2){n=u.h,e.je.push(n),e.H&&e.H.setMediaElement&&e.H.setMediaElement(null);var c=n,f=e.H,h=e.bb;c.h=e.i,c.j=f,c.G=h,c=n,f=e.za,c.i=e.o,c.C=f,n.o=e.Ea,n.start(),e.i=null,e.H=null,e.bb=null,e.o=null,e.za=null}return u.return(n)})}p.preload=function(e,t,n){t=t===void 0?null:t;var r=this,u;return Re(function(c){return c.g==1?C(c,wx(r,e,t,n),2):((u=c.h)?u.start():dd(r,new Xe(2,7,7005)),c.return(u))})},p.Pe=function(){var e=this,t,n,r,u;return Re(function(c){for(t=[],n=g(e.je),r=n.next();!r.done;r=n.next())u=r.value,u.s||t.push(u.destroy());return e.je=[],C(c,Promise.all(t),0)})};function wx(e,t,n,r,u){u=u===void 0?!1:u;var c,f,h;return Re(function(v){return v.g==1?r?v.u(2):C(v,Ix(e,t),3):(v.g!=2&&(r=v.h),qj(e,r)?v.return(null):(c=!1,f=!0,u&&(e.o&&e.za==e.g.abrFactory&&(f=!1),e.h&&e.h.nodeName==="AUDIO"&&(c=!0)),h=Ax(e,t,n,r||null,!u,c,f),h=u?h.then(function(S){return S.A=!1,S}):h.then(function(S){return e.je.push(S),S}),v.return(h)))})}function Ax(e,t,n,r,u,c,f){u=u===void 0?!0:u,c=c===void 0?!1:c,f=f===void 0?!0:f;var h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe;return Re(function(rt){return rt.g==1?(h=null,v=Aa(e.g),c&&(v.manifest.disableVideo=!0),S=function(){return h.T&&h.s?null:h},R=function(){return S()?S().getConfiguration():e.g},B=function(dt,gt){S()?h.configure(dt,gt):e.configure(dt,gt)},e.ga.width!=1/0||e.ga.height!=1/0?rt.u(2):C(rt,Ai(),3)):(rt.g!=2&&(z=rt.h,e.ga.width=z.width,e.ga.height=z.height),J=new vr(v,e.ga,null),fe={networkingEngine:e.F,filter:function(dt){var gt,kt;return Re(function(It){if(It.g==1)return C(It,Ct(J,dt),2);if(It.g!=4)return gt=It.h,gt?(kt=ai("trackschanged"),C(It,Promise.resolve(),4)):It.u(0);h.dispatchEvent(kt),X(It)})},makeTextStreamsForClosedCaptions:function(dt){return t5(e,dt)},onTimelineRegionAdded:function(dt){var gt=h.H;e:{for(var kt=g(gt.g),It=kt.next();!It.done;It=kt.next())if(It=It.value,It.schemeIdUri==dt.schemeIdUri&&It.id==dt.id&&It.startTime==dt.startTime&&It.endTime==dt.endTime){kt=It;break e}kt=null}kt==null&&(gt.g.add(dt),dt=new jn("regionadd",new Map([["region",dt]])),gt.dispatchEvent(dt))},onEvent:function(dt){return h.dispatchEvent(dt)},onError:function(dt){return h.onError(dt)},isLowLatencyMode:function(){return R().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return R().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){B("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&h.T&&e.j.updateDuration()},newDrmInfo:function(dt){var gt=h.l,kt=gt?gt.g:null;kt&&gt.s&&mn(J,kt.keySystem,dt)},onManifestUpdated:function(){var dt=new Map().set("isLive",e.U());h.dispatchEvent(ai("manifestupdated",dt)),pp(h,!1,function(){e.A&&e.A.onManifestUpdated(e.U())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(dt,gt,kt,It){var Ut=dt;dt=="com.apple.hls.interstitial"&&(Ut="com.apple.quicktime.HLS",dt={startTime:gt,endTime:kt,values:It},e.A)&&e.A.onHLSInterstitialMetadata(e,e.h,dt),It=g(It),dt=It.next();for(var Nt={};!dt.done;Nt={Ff:void 0},dt=It.next())Nt.Ff=dt.value,Nt.Ff.name!="ID"&&pp(h,!1,function(nn){return function(){D1(e,gt,kt,Ut,nn.Ff)}}(Nt))},disableStream:function(dt){return e.disableStream(dt,e.g.streaming.maxDisabledTime)},addFont:function(dt,gt){return e.addFont(dt,gt)}},he=new c1(function(){return e.Pb()}),he.addEventListener("regionadd",function(dt){var gt=dt.region;Ep(e,"timelineregionadded",gt,h),pp(h,!1,function(){e.A&&(e.A.onDashTimedMetadata(gt),e.A.onDASHInterstitialMetadata(e,e.h,gt))})}),Ee=null,v.streaming.observeQualityChanges&&(Ee=new rv(function(){return e.xb()}),Ee.addEventListener("qualitychange",function(dt){Gx(e,dt.quality,dt.position)}),Ee.addEventListener("audiotrackchange",function(dt){Gx(e,dt.quality,dt.position,!0)})),Le=!0,Fe={Mb:e.F,onError:function(dt){return h.onError(dt)},be:function(dt){pp(h,!0,function(){e:{var gt=dt,kt=ai("keystatuschanged");e.dispatchEvent(kt);var It=Object.keys(gt);It.length==1&&It[0]==""&&(It=["00"],gt={"00":gt[""]}),kt=It.length==1&&It[0]=="00";var Ut=!1;if(It.length){It=g(e.i.variants);for(var Nt=It.next();!Nt.done;Nt=It.next()){Nt=Nt.value;var nn=[];Nt.audio&&nn.push(Nt.audio),Nt.video&&nn.push(Nt.video),nn=g(nn);for(var Kt=nn.next();!Kt.done;Kt=nn.next()){var $t=Kt.value;if(Kt=Nt.allowedByKeySystem,$t.keyIds.size){Nt.allowedByKeySystem=!0,$t=g($t.keyIds);for(var En=$t.next();!En.done;En=$t.next())En=En.value,((En=gt[kt?"00":En])||e.B.F)&&(Nt.allowedByKeySystem=Nt.allowedByKeySystem&&!!En&&!Zn.includes(En))}Kt!=Nt.allowedByKeySystem&&(Ut=!0)}}}if(Ut&&(es(e),!Lc(e)))break e;(gt=e.j.j)&&!gt.allowedByKeySystem&&fd(e)}})},onExpirationUpdated:function(dt,gt){var kt=ai("expirationupdated");h.dispatchEvent(kt),(kt=h.j)&&kt.onExpirationUpdated&&kt.onExpirationUpdated(dt,gt)},onEvent:function(dt){h.dispatchEvent(dt),dt.type=="drmsessionupdate"&&Le&&(Le=!1,dt=Date.now()/1e3-h.ta,(e.s||h.getStats()).j=dt,e.L&&wR(e.L))}},it=xx(e,S),Jh(e.F,it),Ue=function(){return e.Bc(Fe)},Qe={config:v,ti:fe,Di:he,Ci:Ee,Bc:Ue,si:J,networkingEngine:it,wh:u,vh:f},h=new sl(t,r,n,Qe),rt.return(h))})}function Ix(e,t){var n,r;return Re(function(u){return u.g==1?(n=e.g.manifest.retryParameters,C(u,pv(t,e.F,n),2)):(r=u.h,r=="application/x-mpegurl"&&Ao()&&(r="application/vnd.apple.mpegurl"),u.return(r))})}function qj(e,t){if(!tr())return!0;if(t){if((e.h||ir()).canPlayType(t)=="")return!1;if(!(tr()&&t in Yn))return!0;if(Ff(t))return Ao()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls}return!1}function Cx(e){var t=e.g.textDisplayFactory;t!==e.we&&(e.C=t(),e.C.configure?e.C.configure(e.g.textDisplayer):gr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.we=t,e.C.setTextVisibility(e.oa))}function M1(e){var t,n,r;return Re(function(u){if(u.g==1)return cd(e,"media-source"),Cx(e),t=Xj(e.h,e.C,{Oh:function(){return e.keySystem()},onMetadata:function(c,f,h){bx(e,c,f,h)}},e.L),t.configure(e.g.mediaSource),n=e.g.manifest,r=n.segmentRelativeVttTiming,t.fa=r,C(u,t.K,2);e.I=t,X(u)})}function Gj(e,t,n,r){var u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It;return Re(function(Ut){switch(Ut.g){case 1:cd(e,"load"),u=e.h,e.K=new up({Kd:function(){return u.playbackRate},lc:function(){return u.defaultPlaybackRate},Rf:function(Nt){u.playbackRate=Nt},Ig:function(Nt){u.currentTime+=Nt}}),c=function(){return Iv(e)},f=function(){return Fx(e)},e.l.D(u,"playing",c),e.l.D(u,"pause",c),e.l.D(u,"ended",c),e.l.D(u,"ratechange",f),jj(e,e.g),e.Eb=e.g.preferredTextLanguage,e.nd=e.g.preferredTextRole,e.md=e.g.preferForcedSubs,U1(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(Nt,nn,Kt){e.i&&e.j&&Nt!=e.j.j&&bv(e,Nt,!0,nn===void 0?!1:nn,Kt===void 0?0:Kt)}),e.o.setMediaElement(u),e.o.setCmsdManager(e.fa),e.j=Jj(e),e.j.configure(e.g.streaming),e.m=$o,u.textTracks&&e.l.D(u.textTracks,"addtrack",function(Nt){if(Nt.track)switch(Nt=Nt.track,Nt.kind){case"chapters":Rx(e,Nt)}}),e.dispatchEvent(ai("streaming")),h=n;case 2:for((S=e.j.j)||h||(h=Lc(e)?e.o.chooseVariant():null),R=[],v=S||h,B=g([v.video,v.audio]),z=B.next();!z.done;z=B.next())(J=z.value)&&!J.segmentIndex&&R.push(J.createSegmentIndex());if(!(0<R.length)){Ut.u(4);break}return C(Ut,Promise.all(R),4);case 4:if(!v||v.disabledUntilTime!=0){Ut.u(2);break}if(e.H&&e.H.onInitialVariantChosen&&e.H.onInitialVariantChosen(v),e.i.isLowLatency&&!e.g.streaming.lowLatencyMode&&Ke("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),e.O&&Dj(e.O,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),U1(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),W8(e.j,e.g.playRangeStart,e.g.playRangeEnd),fe=function(Nt){e.G=Wj(e,Nt),e.Fb=$j(e,Nt),Nx(e,u,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||(he=e.ka,he==null&&e.i.startTime&&(he=e.i.startTime),fe(he)),S){Ut.u(7);break}if(!e.g.streaming.startAtSegmentBoundary){Ut.u(8);break}return Ee=e.i.presentationTimeline,Le=e.ka||e.h.currentTime,e.ka==null&&e.i.startTime&&(Le=e.i.startTime),Fe=Ee.Jb(),it=Ee.zb(),Le<Fe?Le=Fe:Le>it&&(Le=it),C(Ut,n5(h,Le),9);case 9:Ue=Ut.h,fe(Ue);case 8:bv(e,h,!0,!1,0);case 7:return e.G.ready(),Qe=e.Hc().find(function(Nt){return Nt.active}),Qe||((rt=Ul(e.i.textStreams,e.Eb,e.nd,e.md)[0]||null)&&s1(e.s.h,rt,!0),h&&(rt?(r5(e,h.audio,rt)&&(e.oa=!0),e.oa&&e.C.setTextVisibility(!0),Zx(e)):e.oa=!1),rt&&(e.g.streaming.alwaysStreamText||e.rf())&&av(e.j,rt)),C(Ut,e.j.start(r),10);case 10:e.g.abr.enabled&&(e.o.enable(),qx(e)),es(e),Lc(e),e.i.variants.some(function(Nt){return Nt.primary}),((dt=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(gt=function(){return Ux(e)},e.l.D(u,"timeupdate",gt)),dt||(kt=function(){return Cv(e)},e.l.D(u,"timeupdate",kt),Cv(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(It=function(){var Nt;return Re(function(nn){if(nn.g==1)return Nt=e.h.duration-e.h.currentTime,isNaN(Nt)||!(Nt<=e.g.streaming.preloadNextUrlWindow)?nn.u(0):(e.l.$a(u,"timeupdate",It),C(nn,e.preload(e.i.nextUrl),4));e.ta=nn.h,X(nn)})},e.l.D(u,"timeupdate",It)),e.l.D(u,"ended",function(){e.load(e.ta||e.i.nextUrl)}))),e.A&&e.A.onManifestUpdated(dt),e.Da=!0,e.l.pa(u,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),X(Ut)}})}function Hj(e,t){var n,r,u,c,f;return Re(function(h){return h.g==1?(n=Mi,r=Date.now()/1e3,u=!0,e.B=e.Bc({Mb:e.F,onError:function(v){dd(e,v)},be:function(){},onExpirationUpdated:function(){var v=ai("expirationupdated");e.dispatchEvent(v)},onEvent:function(v){e.dispatchEvent(v),v.type=="drmsessionupdate"&&u&&(u=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.g.drm),c={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},f={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?ba(t):"",codecs:t?Oo(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ja,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},f.fullMimeTypes.add(Di(f.mimeType,f.codecs)),t.startsWith("audio/")?(f.type=n.Y,c.audio=f):c.video=f,e.B.ba=!0,C(h,ke(e.B,[c],[]),2)):C(h,e.B.Sb(e.h),0)})}function Vj(e,t,n){var r,u,c,f,h,v,S,R,B,z,J,fe;return Re(function(he){if(he.g==1)return cd(e,"src-equals"),r=e.h,e.G=new BR(r),u=!1,e.ld.push(function(){u=!0}),e.ka!=null&&e.G.Ee(e.ka),e.K=new up({Kd:function(){return r.playbackRate},lc:function(){return r.defaultPlaybackRate},Rf:function(Ee){r.playbackRate=Ee},Ig:function(Ee){r.currentTime+=Ee}}),c=e.g.streaming.rebufferingGoal,Nx(e,r,c),f=function(){return Iv(e)},h=function(){return Fx(e)},e.l.D(r,"playing",f),e.l.D(r,"pause",f),e.l.D(r,"ended",f),e.l.D(r,"ratechange",h),r.preload!="none"&&e.l.pa(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.l.D(r.audioTracks,"addtrack",function(){return es(e)}),e.l.D(r.audioTracks,"removetrack",function(){return es(e)}),e.l.D(r.audioTracks,"change",function(){return es(e)})),r.textTracks&&(Cx(e),e.l.D(r.textTracks,"addtrack",function(Ee){if(Ee.track)switch(Ee=Ee.track,Ee.kind){case"metadata":Yj(e,Ee);break;case"chapters":Rx(e,Ee);break;default:es(e)}}),e.l.D(r.textTracks,"removetrack",function(){return es(e)}),e.l.D(r.textTracks,"change",function(){return es(e)}),e.l.D(r,"enterpictureinpicture",function(){var Ee=yp(e).find(function(Le){return Le.mode!=="disabled"});Ee&&(Ee.mode="showing")}),e.l.D(r,"leavepictureinpicture",function(){var Ee=yp(e).find(function(Le){return Le.mode!=="disabled"});Ee&&(Ee.mode="hidden")})),v=Pj(e.O,e.ea,n),!v.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(v+="#t=",0<e.g.playRangeStart&&(v+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(v+=","+e.g.playRangeEnd)),r.src=v,(di()||li())&&r.load(),r.preload!="none"&&!r.autoplay&&Ff(n)&&Zs()&&r.load(),e.m=Zo,e.dispatchEvent(ai("streaming")),S=new Lr,td(r,HTMLMediaElement.HAVE_METADATA,e.l,function(){e.G.ready(),S.resolve()}),td(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.l,function(){var Ee,Le,Fe,it,Ue;return Re(function(Qe){if(Qe.g==1)return Kj(e),Ee=yp(e),Ee.find(function(rt){return rt.mode!="disabled"})?(0<Ee.length&&(e.oa=!0,e.C.setTextVisibility(!0)),Qe.u(2)):C(Qe,new Promise(function(rt){e.l.pa(r.textTracks,"change",rt),new on(rt).Z(1)}),2);if(u)return Qe.return();for(Le=!1,Fe=g(Ee),it=Fe.next();!it.done;it=Fe.next())Ue=it.value,Ue.mode!=="disabled"&&(Le?(Ue.mode="disabled",Ke("Found more than one enabled text track, disabling it",Ue)):(Px(e,Ue),Le=!0));zj(e),X(Qe)})}),r.error?S.reject(F1(e)):r.preload=="none"&&(Ke('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),S.resolve()),e.l.pa(r,"error",function(){S.reject(F1(e))}),R=new Promise(function(Ee,Le){new on(Le).Z(e.g.streaming.loadTimeout)}),C(he,Promise.race([S,R]),2);((B=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(z=function(){return Ux(e)},e.l.D(r,"timeupdate",z)),B||(J=function(){return Cv(e)},e.l.D(r,"timeupdate",J),Cv(e)),e.A&&(e.A.onManifestUpdated(B),B&&(fe=e.Pb().end,e.l.D(r,"progress",function(){var Ee=e.Pb().end;fe!=Ee&&(e.A.onManifestUpdated(e.U()),fe=Ee)}))),e.Da=!0,X(he)})}function Kj(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Ug(t,e.g.preferredVariantRole)}function zj(e){var t=e.g.preferredTextLanguage;t!=""&&e.Lf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function Yj(e,t){if(t.kind=="metadata"){t.mode="hidden",e.l.D(t,"cuechange",function(){if(t.activeCues)for(var r=g(t.activeCues),u=r.next();!u.done;u=r.next())u=u.value,D1(e,u.startTime,u.endTime,u.type,u.value),e.A&&e.A.onCueMetadataChange(u.value);if(t.cues){r=[],u=g(t.cues);for(var c=u.next(),f={};!c.done;f={Ub:void 0},c=u.next())f.Ub=c.value,f.Ub.type=="com.apple.quicktime.HLS"&&f.Ub.startTime!=null&&(c=r.find(function(h){return function(v){return v.startTime==h.Ub.startTime&&v.endTime==h.Ub.endTime}}(f)),c||(c={startTime:f.Ub.startTime,endTime:f.Ub.endTime,values:[]},r.push(c)),c.values.push(f.Ub.value));for(r=g(r),u=r.next();!u.done;u=r.next())u=u.value,u.values.some(function(h){return h.key=="X-ASSET-URI"||h.key=="X-ASSET-LIST"})&&e.A&&(u.values.push({key:"CUE",description:"",data:u.startTime==0?"ONCE,PRE":"ONCE",mimeType:null,pictureType:null}),e.A.onHLSInterstitialMetadata(e,e.h,u))}});var n=new on(function(){var r=e5(e);r=g(r);for(var u=r.next();!u.done;u=r.next())u.value.mode="hidden"}).wc().Z(.5);e.ld.push(function(){n.stop()})}}function bx(e,t,n,r){t=g(t);for(var u=t.next();!u.done;u=t.next())if(u=u.value,u.data&&typeof u.cueTime=="number"&&u.frames){var c=u.cueTime+n,f=r;f&&c>f&&(f=c);for(var h=g(u.frames),v=h.next();!v.done;v=h.next())D1(e,c,f,"org.id3",v.value);e.A&&e.A.onHlsTimedMetadata(u,c)}}function D1(e,t,n,r,u){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",u),e.dispatchEvent(ai("metadata",t))}function Rx(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new on(function(){t.mode="hidden"}).wc().Z(.5);e.ld.push(function(){n.stop()})}}p.Hi=function(){for(var e=this.aa;e.g;)e.release()},p.Bc=function(e){return new Ze(e)};function xx(e,t){function n(u){t()?t().dispatchEvent(u):e.dispatchEvent(u)}function r(u){t()?pp(t(),!0,u):u()}return t||(t=function(){return null}),new zr(function(u,c,f,h){var v=t()?t().i:e.o;v&&v.segmentDownloaded(u,c,f,h)},function(u,c,f){c=new Map().set("headers",u).set("request",c).set("requestType",f),n(ai("downloadheadersreceived",c)),r(function(){if(e.fa){var h=e.fa;if(h.h.enabled){var v=u["cmsd-static"];if(v)try{var S=new Map,R=v.split(",");for(v=0;v<R.length;v++){var B=R[v].split("=");S.set(B[0],mx(B[1]))}}catch(Ee){}if(S=u["cmsd-dynamic"]){try{var z=new Map,J=S.split(";");for(S=1;S<J.length;S++){var fe=J[S].split("=");z.set(fe[0],mx(fe[1]))}var he=z}catch(Ee){he=null}he&&(h.g=he)}}}})},function(u,c,f,h){u=new Map().set("request",u).set("error",c).set("httpResponseCode",f).set("aborted",h),n(ai("downloadfailed",u))},function(u,c,f){r(function(){var h=e.O,v=f;if(v=v===void 0?{}:v,h.g.enabled)if(c.method==="HEAD")ld(h,c);else switch(u){case 0:try{if(h.g.enabled){if(v.type){e:{switch(v.type){case 4:var S=h.j?Tv:_v;break e;case 3:case 2:S=h.j?wv:Sv;break e;case 5:S="s";break e}S=void 0}h.i=S}ld(h,c,{ot:gx,su:!h.l})}}catch(Kt){wt("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Kt)}break;case Wa:try{if(h.g.enabled){var R=v.segment;S=0,R&&(S=R.endTime-R.startTime);var B={d:1e3*S,st:h.h.U()?"l":"v"};B.ot=Lj(v);var z=B.ot===vv||B.ot===mv||B.ot===yv||B.ot===Ev,J=v.stream;if(J){var fe=h.h.fb();if(z&&(B.bl=kj(h,J.type),B.ot!==Ev)){var he=px(h,J.type);B.dl=fe?he/Math.abs(fe):he}if(J.bandwidth&&(B.br=J.bandwidth/1e3),J.segmentIndex&&R){var Ee=J.segmentIndex.Ib(R.endTime,!0,0>fe);if(Ee){var Le=Ee.next().value;if(Le&&Le!=R){if(!fn(R.M(),Le.M())){var Fe=Le.M()[0],it=c.uris[0],Ue=new URL(Fe),Qe=new URL(it);if(Ue.origin!==Qe.origin)var rt=Fe;else{for(var dt=Ue.pathname.split("/").slice(1),gt=Qe.pathname.split("/").slice(1,-1);dt[0]===gt[0];)dt.shift(),gt.shift();for(;gt.length;)gt.shift(),dt.unshift("..");rt=dt.join("/")}B.nor=rt}if((Le.Ha||Le.va)&&(R.Ha!=Le.Ha||R.va!=Le.va)){var kt=Le.Ha+"-";Le.va&&(kt+=Le.va),B.nrr=kt}}}var It=h.h.fb()||1,Ut=px(h,J.type)||500,Nt=J.bandwidth,nn=Nt?Nt*(R.endTime-R.startTime)/1e3/(Ut/It/1e3)*h.g.rtpSafetyFactor:NaN;isNaN(nn)||(B.rtp=nn)}}z&&B.ot!==Ev&&(B.tb=Fj(h,B.ot)/1e3),ld(h,c,B)}}catch(Kt){wt("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Kt)}break;case 2:case 5:case 6:ld(h,c,{ot:"k"});break;case 4:ld(h,c,{ot:"o"})}})},function(u,c,f,h){(u=t()?t().j:e.H)&&u.banLocation&&u.banLocation(h)},function(u,c){if(c.data){c=c.data.byteLength;var f=t()?t().getStats():e.s;f&&(f.hc=isNaN(f.hc)?c:f.hc+c,u===0&&(f.Eg=c))}})}function Wj(e,t){return new jR(e.h,e.i,e.g.streaming,t,function(){e.Fb&&KR(e.Fb,!0),e.j&&e.j.Rc(),e.N&&Oc(e)},function(n){return e.dispatchEvent(n)})}function $j(e,t){t=new hv(e.fd,e.U()||0<t),t.addEventListener("enter",function(r){Ep(e,"timelineregionenter",r.region)}),t.addEventListener("exit",function(r){Ep(e,"timelineregionexit",r.region)}),t.addEventListener("skip",function(r){var u=r.region;r.seeking||(Ep(e,"timelineregionenter",u),Ep(e,"timelineregionexit",u))});var n=new VR(e.h);return n.g.add(t),e.$b&&n.g.add(e.$b),n}function Nx(e,t,n){e.N=new jm,e.N.g=nl,Zm(e.N,n,Math.min(.5,n/2)),L1(e),e.ge=new on(function(){Oc(e)}).Ra(.25),e.l.D(t,"waiting",function(){return Oc(e)}),e.l.D(t,"stalled",function(){return Oc(e)}),e.l.D(t,"canplaythrough",function(){return Oc(e)}),e.l.D(t,"progress",function(){return Oc(e)})}function Oc(e){switch(e.m){case Zo:if(e.h.ended)var t=!0;else{var n=yn(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case $o:e:if(e.h.ended||bR(e.I))t=!0;else{if(e.i.presentationTimeline.U()){n=e.i.presentationTimeline.Xb();var r=yn(e.h.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=yr(e.h.buffered,e.h.currentTime),n=e.N;var u=t,c=n.i.get(n.g);t=n.g,r=u||r>=c?Nc:nl,n.g=r,(t=t!=r)&&r===Nc&&(n.h=Date.now()),t&&L1(e)}function Xj(e,t,n,r){return new IR(e,t,n,r)}function Qj(e){return new hx({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},xb:function(){return e.xb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},fb:function(){return e.fb()},yb:function(){return e.yb()},mc:function(){return e.mc()},U:function(){return e.U()}},e.g.cmcd)}function Jj(e){return new QR(e.i,{Jd:function(){return e.G?e.G.wd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},fb:function(){return e.fb()},ca:e.I,Mb:e.F,onError:function(t){return dd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},zi:function(){e.H&&e.H.update&&e.H.update()},Bf:function(t,n){var r=t.startTime;t=t.endTime;var u=n.type;if(n=n.codecs.includes(","),e.G){e.G.Jg();var c=JE(e.I,u);!e.U()&&e.h.paused&&c!=null&&u!=_r&&0<c&&e.G.wd()<c&&e.G.Ee(c)}Oc(e),r=new Map().set("start",r).set("end",t).set("contentType",u).set("isMuxed",n),e.dispatchEvent(ai("segmentappended",r))},yi:function(t,n){(n=n.Kc)&&e.$b&&G8(e.$b,n,t)},hg:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){t=new ze(nr(n)),n=0;for(var u=g(t.data),c=u.next();!c.done;c=u.next())n+=c.value.length;if(n==0)r=Promise.resolve();else{for(n=new Uint8Array(n),u=0,t=g(t.data),c=t.next();!c.done;c=t.next())c=c.value,n.set(c,u),u+=c.length;Pe(r,"cenc",n),r=r.l}}else r=Promise.resolve();return r},onMetadata:function(t,n,r){bx(e,t,n,r)},disableStream:function(t,n){return e.disableStream(t,n)}})}p.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=cv(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(gr("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(gr("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(gr("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&Ao(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){gr("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var r=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+r,e.streaming.liveSync.targetLatencyTolerance=r}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(gr("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(gr("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(gr("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(gr("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(gr("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(gr("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(gr("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(gr("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){gr("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var u=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return u},delete e.mediaSource.sourceBufferExtraFeatures}return e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(gr("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.maxDisabledTime==null&&(e.streaming.maxDisabledTime=1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.dash==null&&(e.manifest.dash={}),e.manifest.dash.autoCorrectDrift==null&&(e.manifest.dash.autoCorrectDrift=!1),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100)),n=ql(this.g,e,ul(this)),Mx(this),n};function Mx(e){if(e.ae=new vr(e.g,e.ga,e.B),e.H){var t=Aa(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.H.configure(t)}if(e.B&&e.B.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.m!=nu&&qt(e.ae,e.i)&&es(e)}catch(u){dd(e,u)}e.o&&Lc(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||fd(e)}if(e.F&&(e.F.Pf(e.g.streaming.forceHTTP),e.F.Qf(e.g.streaming.forceHTTPS),e.F.m=e.g.streaming.minBytesForProgressEvents),e.I&&(e.I.configure(e.g.mediaSource),e.I.fa=e.g.manifest.segmentRelativeVttTiming),e.C)if(t=e.g.textDisplayFactory,e.we!=t){var n=e.C;if(e.C=t(),e.C.configure?e.C.configure(e.g.textDisplayer):gr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.C.setTextVisibility(n.isTextVisible()),n.destroy(),e.I){n=e.I;var r=e.C;n.ba=r,n.g&&(n.g.j=r)}e.we=t,e.j&&(t=e.j,(n=t.i.get(_r))&&rd(t,n.stream,!0,0,!0))}else e.C.configure&&e.C.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),qx(e)),e.N&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Zm(e.N,t,Math.min(.5,t/2))),e.i&&U1(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.O&&e.O.configure(e.g.cmcd),e.fa&&e.fa.configure(e.g.cmsd)}p.getConfiguration=function(){var e=ul(this);return ql(e,this.g,ul(this)),e},p.xg=function(){var e=ul(this);return ql(e,this.g,ul(this)),nx(this.g,ul(this))},p.tg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Pb().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},p.Li=function(){for(var e in this.g)delete this.g[e];ql(this.g,ul(this),ul(this)),Mx(this)},p.ff=function(){return this.m},p.hf=function(){return this.i?this.i.type:null},p.Sh=function(){return this.h},p.yb=function(){return this.F},p.Gc=function(){return this.ea},p.sg=function(){return this.A?this.A:null},p.U=function(){return this.i?this.i.presentationTimeline.U():this.h&&this.h.src?this.h.duration==1/0:!1},p.pc=function(){return this.i?this.i.presentationTimeline.pc():!1},p.ii=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},p.Pb=function(){if(this.i){if(!this.Da&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Jb(),end:e.zb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},p.fi=function(){this.U()&&(this.h.currentTime=this.Pb().end)},p.ji=function(){return this.Da},p.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},p.drmInfo=function(){return this.B?this.B.g:null},p.ad=function(){return this.B?this.B.ad():1/0},p.ef=function(){return this.B?this.B.ef():[]},p.Id=function(){return this.B?this.B.Id():{}},p.pf=function(){return this.N?this.N.g==nl:!1},p.fb=function(){return this.h?this.K?this.K.i:1:0},p.ud=function(e,t){var n=this;t=t===void 0?!0:t,e==0?Ke("A trick play rate of 0 is unsupported!"):(this.Ta.Qa(),this.h.paused&&this.h.play(),this.K.set(e),this.m==$o&&(this.o.playbackRateChanged(e),h1(this.j,t&&1<Math.abs(e))),this.U()&&this.Ta.D(this.h,"timeupdate",function(){var r=n.h.currentTime,u=n.Pb(),c=n.g.streaming.safeSeekOffset;0<e?Math.floor(r)>=Math.floor(u.end)&&n.Uc():Math.floor(r)<=Math.floor(u.start+c)&&n.Uc()}))},p.Uc=function(){var e=this.K.lc();this.m==Zo&&this.K.set(e),this.m==$o&&(this.K.set(e),this.o.playbackRateChanged(e),h1(this.j,!1)),this.Ta.Qa()},p.mc=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=g(this.i.variants),u=r.next();!u.done;u=r.next())if(u=u.value,Fl(u)){var c=kl(u);c.active=u==e,c.active||n==1||e==null||u.video!=e.video||u.audio!=e.audio||(c.active=!0),c.active&&n++,t.push(c)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(f){return Hf(f)}):[]},p.Hc=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=g(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var u=Zf(r);u.active=r==e,t.push(u)}return t}return this.h&&this.h.src&&this.h.textTracks?yp(this).map(function(c){return Dm(c)}):[]},p.Mh=function(){var e=this.pd;return this.i&&(e=this.i.imageStreams),e.map(function(t){return qf(t)})},p.Eh=function(e){var t=this,n,r,u,c;return Re(function(f){return f.g==1?t.m!=$o&&t.m!=Zo?f.return(null):(n=t.pd,t.i&&(n=t.i.imageStreams),(r=n.find(function(h){return h.id==e}))?r.segmentIndex?f.u(2):C(f,r.createSegmentIndex(),2):f.return(null)):f.g!=4?(u=[],r.segmentIndex.Gb(function(h){var v=Dx(h.tilesLayout||r.tilesLayout);if(v){v=v.rows*v.ic;for(var S=h.j-h.startTime,R=0;R<v;R++)u.push(t.zg(e,h.startTime+S*R/v))}}),C(f,Promise.all(u),4)):(c=f.h,f.return(c.filter(function(h){return h})))})};function Dx(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{ic:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}p.zg=function(e,t){var n=this,r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue;return Re(function(Qe){return Qe.g==1?n.m!=$o&&n.m!=Zo?Qe.return(null):(r=n.pd,n.i&&(r=n.i.imageStreams),(u=r.find(function(rt){return rt.id==e}))?u.segmentIndex?Qe.u(2):C(Qe,u.createSegmentIndex(),2):Qe.return(null)):(c=u.segmentIndex.find(t),c==null||(f=u.segmentIndex.get(c),h=Dx(f.tilesLayout||u.tilesLayout),!h)?Qe.return(null):(v=u.width||0,S=u.height||0,R=v/h.ic,B=S/h.rows,z=h.ic*h.rows,J=f.j-f.startTime,fe=f.B||J/z,he=f.startTime,Le=Ee=0,1<z&&(Fe=Math.floor((t-f.startTime)/fe),he=f.startTime+Fe*fe,Ee=Fe%h.ic*R,Le=Math.floor(Fe/h.ic)*B),it=!1,(Ue=f.A)&&(it=!0,B=Ue.height,Ee=Ue.positionX,Le=Ue.positionY,R=Ue.width),Qe.return({segment:f,imageHeight:S,imageWidth:v,height:B,positionX:Ee,positionY:Le,startTime:he,duration:fe,uris:f.M(),width:R,sprite:it})))})},p.Vg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.s&&(s1(this.s.h,t,!1),av(this.j,t),Rv(this),this.Eb=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){var n=yp(this);t=n.find(function(r){return r.mode!=="disabled"}),n=n.find(function(r){return Gf(r)===e.id}),t!==n&&(t&&(t.mode="disabled",this.l.$a(t,"cuechange"),this.C.remove(0,1/0)),n&&Px(this,n)),Rv(this)}};function Px(e,t){e.l.D(t,"cuechange",function(){e.C.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n=Array.from(t.activeCues||[]).map(Aj).filter(Ys);e.C.append(n)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}p.Mf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){var r=this.i.variants.find(function(c){return c.id==e.id});if(r&&Fl(r)){var u=this.j.j;this.g.abr.enabled&&(u.video!=r.video||u.audio&&r.audio&&u.audio.language==r.audio.language&&u.audio.channelsCount==r.audio.channelsCount)&&Ke("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack()."),bv(this,r,!1,t,n),this.Ea=new Bm(r,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Lc(this)}}else if(this.h&&this.h.audioTracks){for(t=Array.from(this.h.audioTracks),t=g(t),n=t.next();!n.done;n=t.next())if(n=n.value,Gf(n)==e.id){Bx(this,n);break}}},p.Gh=function(){return Vx(this.mc())},p.Zh=function(){return Vx(this.Hc())},p.Fh=function(){return Array.from(Hx(this.mc()))},p.Yh=function(){return Array.from(Hx(this.Hc()))},p.Ug=function(e,t,n,r,u){if(n=n===void 0?0:n,r=r===void 0?0:r,u=u===void 0?"":u,this.i&&this.G){this.Ea=new Bl(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,u),e=function(f,h){return f.video||h.video?f.video&&h.video?Math.abs((f.video.height||0)-(h.video.height||0))+Math.abs((f.video.width||0)-(h.video.width||0)):1/0:0},t=this.j.j,u=this.Ea.create(this.i.variants),n=null,u=g(u.values());for(var c=u.next();!c.done;c=u.next())c=c.value,Fl(c)&&(!n||e(n,t)>e(c,t))&&(n=c);n!=t&&(n?(e=kl(n),this.Mf(e,!0,r)):fd(this))}else this.h&&this.h.audioTracks&&(r=Ul(this.mc(),e,t||"",!1)[0])&&this.Mf(r)},p.Lf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.G?(this.Eb=e,this.nd=t||"",this.md=n,(e=Ul(this.i.textStreams,this.Eb,this.nd,this.md)[0]||null)&&e!=this.j.s&&(s1(this.s.h,e,!1),this.g.streaming.alwaysStreamText||this.rf())&&(av(this.j,e),Rv(this))):(e=Ul(this.Hc(),e,t||"",n)[0])&&this.Vg(e)},p.Ri=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.G){for(var r=null,u=g(this.i.variants),c=u.next();!c.done;c=u.next())if(c=c.value,c.audio.label==e){r=c;break}r!=null&&(this.Ea=new Bl(r.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),fd(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=g(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&Bx(this,t)}},p.rf=function(){var e=this.oa;return this.C?this.C.isTextVisible():e},p.ug=function(){return this.h&&this.h.src&&this.h.textTracks?Ox(this).map(function(e){return Dm(e)}):[]},p.Ih=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=Or(e),n=Ox(this).filter(function(h){return Or(h.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=g(n);for(var u=n.next();!u.done;u=n.next())if((u=u.value)&&u.cues){u=g(u.cues);for(var c=u.next();!c.done;c=u.next()){var f=c.value;(c=f.id)&&c!=""||(c=f.startTime+"-"+f.endTime+"-"+f.text),f={id:c,title:f.text,startTime:f.startTime,endTime:f.endTime},r.has(c)||(e.push(f),r.add(c))}}return e};function yp(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function e5(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}function Ox(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="chapters"})}p.ah=function(e){e=!!e,this.oa!=e&&(this.oa=e,this.m==$o?(this.C.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||(e=Ul(this.i.textStreams,this.Eb,this.nd,this.md),0<e.length&&(av(this.j,e[0]),Rv(this))):X8(this.j))):this.h&&this.h.src&&this.h.textTracks&&this.C.setTextVisibility(e),Zx(this))},p.Uh=function(){if(this.G)var e=this.G.wd();else{if(this.ka==null)return new Date;e=this.ka}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},p.yg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},p.Ld=function(){return this.U()&&this.i?this.i.presentationTimeline.Ld():null},p.xb=function(){if(this.m==$o)return this.I.xb();var e={total:[],audio:[],video:[],text:[]};return this.m==Zo&&(e.total=gi(this.h.buffered)),e},p.getStats=function(){if(this.m!=$o&&this.m!=Zo)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Iv(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.U()){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.G&&(this.s.T=this.G.cg(),this.s.X=this.G.dg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.O=Number(n.droppedVideoFrames),t.N=r,this.s.L=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.m==$o){if(n=this.j.j,t=this.j.s,n){r=this.K?this.K.i:1;var u=r*n.bandwidth;t&&t.bandwidth&&(u+=r*t.bandwidth),this.s.B=u}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.U()&&(n=this.yg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&(this.s.G=this.i.periodCount,this.s.F=this.i.gapCount,this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.h)),n=this.o.getBandwidthEstimate(),this.s.A=n}this.m==Zo&&(n=this.s,n.hc=isNaN(n.hc)?NaN:n.hc+NaN,n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var c=this.s;e=c.o,n=c.l,t=c.B,r=c.N,u=c.O;var f=c.L,h=c.X,v=c.T,S=c.A,R=c.i,B=c.m,z=c.H,J=c.j,fe=a1(c.g,"playing"),he=a1(c.g,"paused"),Ee=a1(c.g,"buffering"),Le=c.s,Fe=c.C,it=c.I,Ue=c.Eg,Qe=c.hc,rt=c.K,dt=c.G,gt=c.F,kt=U8(c.g),It=[];c=g(c.h.g);for(var Ut=c.next();!Ut.done;Ut=c.next())Ut=Ut.value,It.push({timestamp:Ut.timestamp,id:Ut.id,type:Ut.type,fromAdaptation:Ut.fromAdaptation,bandwidth:Ut.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:u,corruptedFrames:f,stallsDetected:h,gapsJumped:v,estimatedBandwidth:S,completionPercent:R,loadLatency:B,manifestTimeSeconds:z,drmTimeSeconds:J,playTime:fe,pauseTime:he,bufferingTime:Ee,licenseTime:Le,liveLatency:Fe,maxSegmentDuration:it,manifestSizeBytes:Ue,bytesDownloaded:Qe,nonFatalErrorCount:rt,manifestPeriodCount:dt,manifestGapCount:gt,stateHistory:kt,switchHistory:It}},p.sh=function(e,t,n,r,u,c,f){f=f===void 0?!1:f;var h=this,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it;return Re(function(Ue){switch(Ue.g){case 1:if(h.m!=$o&&h.m!=Zo)throw new Xe(1,7,7004);if(n!="subtitles"&&n!="captions"&&Ke("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){Ue.u(2);break}return C(Ue,P1(h,e),3);case 3:r=Ue.h;case 2:if(v=[],h.A&&(v=h.A.getCuePoints()),h.m!=Zo){Ue.u(4);break}return f&&(n="forced"),C(Ue,Lx(h,e,t,n,r,c||"",v),5);case 5:if(S=Or(t),R=h.Hc(),B=R.find(function(Qe){return Or(Qe.language)==S&&Qe.label==(c||"")&&Qe.kind==n}))return es(h),Ue.return(B);throw new Xe(1,2,2012);case 4:if(z=Mi,J=h.h.duration,h.i&&(J=h.i.presentationTimeline.getDuration()),J==1/0)throw new Xe(1,4,4033);if(!v.length){Ue.u(6);break}return C(Ue,O1(h,e,h.F,h.g.streaming.retryParameters),7);case 7:fe=Ue.h,he=kx(h,fe,r,v),Ee=new Blob([he],{type:"text/vtt"}),e=ev(Ee),r="text/vtt";case 6:if(Le={id:h.ag++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:o1(0,J,[e]),mimeType:r||"",codecs:u||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:c||null,type:z.wa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!f,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Di(r||"",u||"")])},Fe=Di(Le.mimeType,Le.codecs),it=Ac(Fe),!it)throw new Xe(2,2,2014,r);return h.i.textStreams.push(Le),es(h),Ue.return(Zf(Le))}})},p.th=function(e,t){var n=this,r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it;return Re(function(Ue){switch(Ue.g){case 1:if(n.m!=$o&&n.m!=Zo)throw new Xe(1,7,7004);if(t){Ue.u(2);break}return C(Ue,P1(n,e),3);case 3:t=Ue.h;case 2:if(t!="text/vtt")throw new Xe(1,2,2017,e);if(r=Mi,u=n.h.duration,n.i&&(u=n.i.presentationTimeline.getDuration()),u==1/0)throw new Xe(1,4,4045);return C(Ue,O1(n,e,n.F,n.g.streaming.retryParameters),4);case 4:if(c=Ue.h,f=_i[t],!f)throw new Xe(2,2,2014,t);for(h=f(),v={periodStart:0,segmentStart:0,segmentEnd:u,vttOffset:0},S=nr(c),R=h.parseMedia(S,v,e,[]),B=[],z=g(R),J=z.next(),fe={};!J.done;fe={ve:void 0,Cc:void 0},J=z.next())fe.Cc=J.value,fe.ve=null,he=function(Qe){return function(){return Qe.ve==null&&(Qe.ve=Ki([e],[Qe.Cc.payload])),Qe.ve||[]}}(fe),Ee=new et(fe.Cc.startTime,fe.Cc.endTime,he,0,null,null,0,0,1/0),fe.Cc.payload.includes("#xywh")&&(Le=fe.Cc.payload.split("#xywh=")[1].split(","),Le.length===4&&Ee.bh({height:parseInt(Le[3],10),positionX:parseInt(Le[0],10),positionY:parseInt(Le[1],10),width:parseInt(Le[2],10)})),B.push(Ee);if(Fe=t,!B.length){Ue.u(5);break}return C(Ue,pv(B[0].M()[0],n.F,n.g.manifest.retryParameters),6);case 6:Fe=Ue.h;case 5:return it={id:n.ag++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Mr(B),mimeType:Fe||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.De,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Di(Fe||"","")])},n.m==Zo?n.pd.push(it):n.i.imageStreams.push(it),es(n),Ue.return(qf(it))}})},p.rh=function(e,t,n){var r=this,u,c,f,h;return Re(function(v){switch(v.g){case 1:if(r.m!=$o&&r.m!=Zo)throw new Xe(1,7,7004);if(n){v.u(2);break}return C(v,P1(r,e),3);case 3:n=v.h;case 2:return u=[],r.A&&(u=r.A.getCuePoints()),C(v,Lx(r,e,t,"chapters",n,"",u),4);case 4:if(c=v.h,f=r.ug(),h=f.find(function(S){return S.language==t}),!h){v.u(5);break}return C(v,new Promise(function(S,R){r.l.pa(c,"load",S),r.l.pa(c,"error",function(){R(new Xe(1,2,2015))})}),6);case 6:return es(r),v.return(h);case 5:throw new Xe(1,2,2012)}})};function P1(e,t){var n;return Re(function(r){switch(r.g){case 1:return ce(r,2),C(r,pv(t,e.F,e.g.streaming.retryParameters),4);case 4:n=r.h,me(r,3);break;case 2:be(r);case 3:if(n)return r.return(n);throw new Xe(1,2,2011,t)}})}function Lx(e,t,n,r,u,c,f){var h,v,S,R;return Re(function(B){if(B.g==1)return u!="text/vtt"||f.length?C(B,O1(e,t,e.F,e.g.streaming.retryParameters),3):B.u(2);B.g!=2&&(h=B.h,v=kx(e,h,u,f),S=new Blob([v],{type:"text/vtt"}),t=ev(S),u="text/vtt"),R=document.createElement("track");var z=e.O,J=t;try{if(z.g.enabled){var fe=C1(z);fe.ot=R1,fe.su=!0;var he=gv(fe),Ee=b1(J,he)}else Ee=J}catch(Le){wt("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",Le),Ee=J}return R.src=Ee,R.label=c,R.kind=r,R.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(R),B.return(R)})}function O1(e,t,n,r){var u,c,f;return Re(function(h){if(h.g==1){u=Wa,c=Bi([t],r),c.method="GET";var v=e.O;try{v.g.enabled&&ld(v,c,{ot:R1,su:!0})}catch(S){wt("CMCD_TEXT_ERROR","Could not generate text CMCD data.",S)}return C(h,n.request(u,c).promise,2)}return f=h.h,h.return(f.data)})}function kx(e,t,n,r){var u=_i[n];if(u)return n=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=nr(t),t=n.parseMedia(t,e,null,[]),Nj(t,r);throw new Xe(2,2,2014,n)}p.Wi=function(e,t){this.ga.width=e,this.ga.height=t},p.Jf=function(e){if(this.m==$o){var t=this.j;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.A)t=!1;else{for(var n=g(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.ed||r.La||r.ub||(r.ed=!1,Xa(t,r,e));t=!0}}else t=!1;return t},p.gf=function(){return Ke("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},p.Ph=function(){return this.bb};function ul(e){var t=od();return t.streaming.failureCallback=function(n){if(e.U()){var r=null;n.code==1001||n.code==1002?(r=1,e.g.streaming.lowLatencyMode&&(r=.1)):n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.Jf(r))}},t.textDisplayFactory=function(){if(e.ee){var n=e.getConfiguration();return new ha(e.h,e.ee,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new fa(e.h,"Shaka Player TextTrack"):new da},t}p.fh=function(e){this.ee=e};function t5(e,t){for(var n=new Set,r=g(t.textStreams),u=r.next();!u.done;u=r.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||n.add(u.originalId);for(r=g(t.variants),u=r.next();!u.done;u=r.next())if((u=u.value.video)&&u.closedCaptions){for(var c=g(u.closedCaptions.keys()),f=c.next();!f.done;f=c.next())if(f=f.value,!n.has(f)){var h=f.startsWith("CC")?"application/cea-608":"application/cea-708",v=new Ti,S=u.closedCaptions.get(f);h={id:e.ag++,originalId:f,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:v,mimeType:h,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:S,originalLanguage:S,label:null,type:_r,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Di(h,"")])},t.textStreams.push(h),n.add(f)}}}function n5(e,t){var n,r,u,c,f;return Re(function(h){return h.g==1?(n=e.audio,r=e.video,u=function(v,S){var R,B,z;return Re(function(J){return J.g==1?v?C(J,v.createSegmentIndex(),2):J.return(null):(B=(R=v.segmentIndex.Ib(S))?R.next().value:null,B?(z=B.startTime,J.return(z)):J.return(null))})},C(h,u(n,t),2)):h.g!=3?(c=h.h,C(h,u(r,t),3)):(f=h.h,f!=null&&c!=null?h.return(Math.max(f,c)):f!=null?h.return(f):c!=null?h.return(c):h.return(t))})}function L1(e){var t=e.pf();if(e.s&&e.N&&e.G){var n=e.K;if(n.j=t,HR(n),e.O&&(n=e.O,t||n.l||(n.l=!0),n.l&&t&&(n.m=!0),n.o=t),Iv(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Ae<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var r=e.g.streaming.liveSync.targetLatencyTolerance,u=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.T&&(e.T=Math.min(e.T+ ++e.Ae*u,n-r))}}t=new Map().set("buffering",t),e.dispatchEvent(ai("buffering",t))}function Fx(e){var t=e.h.playbackRate;t!=0&&(e.K&&e.K.set(t),t=ai("ratechange"),e.dispatchEvent(t))}function Iv(e){if(e.s&&e.N){var t=e.s.g,n="playing";e.N.g==nl?n="buffering":e.h.ended?n="ended":e.h.paused&&(n="paused");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var u=Date.now()/1e3;t.g.duration=u-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:u,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(ai("statechanged",n)))}}function Ux(e){var t=e.h.playbackRate,n=e.U();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.tg();u<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.ud(r,!1):u==1&&t!==e.K.lc()&&e.Uc()}if(n&&(n=e.Pb(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start))){r=e.g.streaming.liveSync.targetLatencyTolerance,u=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var c=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var f=e.g.streaming.liveSync.targetLatency,h=f+r,v=Math.max(0,f-r),S=e.g.streaming.liveSync.maxPlaybackRate,R=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(f=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?h=e.i.serviceDescription.targetLatency+r:e.i.serviceDescription.maxLatency!=null&&(h=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?v=Math.max(0,e.i.serviceDescription.targetLatency-r):e.i.serviceDescription.minLatency!=null&&(v=e.i.serviceDescription.minLatency),S=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,R=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.T||typeof f!="number"||(e.T=f);var B=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;u&&e.Fa&&e.T!==null&&typeof f=="number"&&e.Ae<B&&Date.now()-e.Fa>1e3*c&&(c=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.T=Math.max(e.T-(f-c)/2,c+r),e.Fa=Date.now()),u&&e.T!==null&&(h=e.T+r,v=e.T-r),f=n.end-e.h.currentTime,r=0,e.m==Zo&&(u=e.h.buffered,0<u.length&&(r=u.end(u.length-1),r=Math.max(S,r-n.end))),n=e.g.streaming.liveSync.panicMode,u=1e3*e.g.streaming.liveSync.panicThreshold,c=Date.now()-e.N.h,n&&!R&&(R=e.g.streaming.liveSync.minPlaybackRate),n&&R&&c<=u?t!=R&&e.ud(R,!1):h&&S&&f-r>h?(t!=S&&e.ud(S,!1),e.Fa=null):v&&R&&f-r<v?(t!=R&&e.ud(R,!1),e.Fa=null):t!==e.K.lc()&&(e.Uc(),e.Fa=Date.now())}}function Cv(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.X)?(e.X=n,t=!0):(n=Math.max(e.X,n),e.X!=n&&(e.X=n,t=!0))),t){var r;e.X==0?r=ai("started"):e.X==25?r=ai("firstquartile"):e.X==50?r=ai("midpoint"):e.X==75?r=ai("thirdquartile"):e.X==100&&(r=ai("complete")),r&&e.dispatchEvent(r)}}}function Lc(e){try{Cn(e.ae,e.i)}catch(n){return dd(e,n),!1}var t=Vf(e.i.variants);return t=e.Ea.create(t),e.o.setVariants(Array.from(t.values())),!0}function fd(e,t,n,r,u){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,u=u===void 0?!0:u;var c;(c=Lc(e)?e.o.chooseVariant():null)&&bv(e,c,u,t,n,r)}function bv(e,t,n,r,u,c){c=c===void 0?!1:c;var f=e.j.j;if(t==f)r&&JR(e.j,t,r,u,!0);else{var h=e.s.h;h.h!=t&&(h.h=t,h.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),JR(e.j,t,r,u,c,n),r=null,f&&(r=kl(f)),t=kl(t),n?(n=new Map().set("oldTrack",r).set("newTrack",t),e.L&&AR(e.L,t,e.hf()),n=ai("adaptation",n),hd(e,n)):jx(e,r,t)}}function Bx(e,t){var n=Array.from(e.h.audioTracks).find(function(r){return r.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=Hf(n),t=Hf(t),jx(e,n,t))}function r5(e,t,n){if(e.g.autoShowText==0)return!1;if(e.g.autoShowText==1)return!0;var r=Or(e.g.preferredTextLanguage);return n=Or(n.language),e.g.autoShowText==2?Ju(n,r):e.g.autoShowText==3?t?(e=Or(t.language),Ju(n,r)&&!Ju(e,n)):!1:(Ke("Invalid autoShowText setting!"),!1)}function es(e){var t=ai("trackschanged");hd(e,t)}function jx(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.L&&AR(e.L,n,e.hf()),n=ai("variantchanged",t),hd(e,n)}function Rv(e){var t=ai("textchanged");hd(e,t)}function Zx(e){var t=ai("texttrackvisibility");hd(e,t)}function qx(e){e.g.abr.enabled||k1(e);var t=new Map().set("newStatus",e.g.abr.enabled);hd(e,ai("abrstatuschanged",t))}function k1(e,t){if(t=t===void 0?!0:t,e.m==$o){e.he.stop();for(var n=g(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&Lc(e)}}p.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===nu||!navigator.onLine||t==0)return!1;if(this.i.variants.some(function(h){var v=h[e.type];return v&&v.id!==e.id&&!h.disabledUntilTime?e.type=="audio"?e.language===v.language:!0:!1})){for(var n=!1,r=!1,u=g(this.i.variants),c=u.next();!c.done;c=u.next()){c=c.value;var f=c[e.type];f&&(f.id===e.id?(c.disabledUntilTime=Date.now()/1e3+t,n=!0):f.trickModeVideo&&f.trickModeVideo.id==e.id&&(r=!0))}return!n&&r?!1:(this.he.Ra(1),t=this.xb().video.reduce(function(h,v){return h+v.end-v.start},0),fd(this,!1,t,!0,!1),!0)}return!1};function dd(e,t){var n,r,u,c;return Re(function(f){switch(f.g){case 1:if(e.m==nu)return f.return();if(t.severity===1&&e.s.K++,n=!0,!(e.Da&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){f.u(2);break}return ce(f,3),C(f,cj(e.j),5);case 5:r=f.h,n=!r,r&&(u=ai("mediasourcerecovered"),e.dispatchEvent(u)),me(f,2);break;case 3:be(f),n=!0;case 2:if(!n)return f.return();t.severity===2&&k1(e,!1),c=ai("error",new Map().set("detail",t)),e.dispatchEvent(c),c.defaultPrevented&&(t.handled=!0),X(f)}})}p.addFont=function(e,t){var n,r,u,c,f;return Re(function(h){if(h.g==1)return"fonts"in document&&"FontFace"in m?C(h,document.fonts.ready,3):h.u(0);if(!("entries"in document.fonts))return h.return();for(n=function(v){v=v.entries();for(var S=[],R=v.next();R.done===!1;)S.push(R.value),R=v.next();return S},r=g(n(document.fonts)),u=r.next();!u.done;u=r.next())if(c=u.value,c.family==e&&c.display=="swap")return h.return();f=new FontFace(e,"url("+t+")",{display:"swap"}),document.fonts.add(f),X(h)})};function Ep(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(ai(t,e))}function Gx(e,t,n,r){r=r===void 0?!1:r,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(ai(r?"audiotrackchanged":"mediaqualitychanged",t))}function F1(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new Xe(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new Xe(2,3,3016,n,t,e.h.error.message))}function U1(e,t,n){0<t&&(e.U()||e.eh(t)),t=e.getDuration(),n<t&&(e.U()||e.Za(n))}function hd(e,t){Re(function(n){if(n.g==1)return C(n,Promise.resolve(),2);e.m!=nu&&e.dispatchEvent(t),X(n)})}function Hx(e){var t=new Set;e=g(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Or(n.language)):t.add("und");return t}function Vx(e){var t=new Map,n=new Map;e=g(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u="und",c=[];r.language&&(u=Or(r.language)),r.type=="variant"?c=r.audioRoles:c=r.roles,c&&c.length||(c=[""]),t.has(u)||t.set(u,new Set),c=g(c);for(var f=c.next();!f.done;f=c.next())f=f.value,t.get(u).add(f),r.label&&(n.has(u)||n.set(u,new Map),n.get(u).set(f,r.label))}var h=[];return t.forEach(function(v,S){v=g(v);for(var R=v.next();!R.done;R=v.next()){R=R.value;var B=null;n.has(S)&&n.get(S).has(R)&&(B=n.get(S).get(R)),h.push({language:S,role:R,label:B})}}),h}ne("shaka.Player",hn),hn.prototype.addFont=hn.prototype.addFont,hn.prototype.setVideoContainer=hn.prototype.fh,hn.prototype.getManifestParserFactory=hn.prototype.Ph,hn.prototype.getManifest=hn.prototype.gf,hn.prototype.retryStreaming=hn.prototype.Jf,hn.prototype.setMaxHardwareResolution=hn.prototype.Wi,hn.prototype.addChaptersTrack=hn.prototype.rh,hn.prototype.addThumbnailsTrack=hn.prototype.th,hn.prototype.addTextTrackAsync=hn.prototype.sh,hn.prototype.getStats=hn.prototype.getStats,hn.prototype.getBufferedInfo=hn.prototype.xb,hn.prototype.getSegmentAvailabilityDuration=hn.prototype.Ld,hn.prototype.getPresentationStartTimeAsDate=hn.prototype.yg,hn.prototype.getPlayheadTimeAsDate=hn.prototype.Uh,hn.prototype.setTextTrackVisibility=hn.prototype.ah,hn.prototype.getChapters=hn.prototype.Ih,hn.prototype.getChaptersTracks=hn.prototype.ug,hn.prototype.isTextTrackVisible=hn.prototype.rf,hn.prototype.selectVariantsByLabel=hn.prototype.Ri,hn.prototype.selectTextLanguage=hn.prototype.Lf,hn.prototype.selectAudioLanguage=hn.prototype.Ug,hn.prototype.getTextLanguages=hn.prototype.Yh,hn.prototype.getAudioLanguages=hn.prototype.Fh,hn.prototype.getTextLanguagesAndRoles=hn.prototype.Zh,hn.prototype.getAudioLanguagesAndRoles=hn.prototype.Gh,hn.prototype.selectVariantTrack=hn.prototype.Mf,hn.prototype.selectTextTrack=hn.prototype.Vg,hn.prototype.getThumbnails=hn.prototype.zg,hn.prototype.getAllThumbnails=hn.prototype.Eh,hn.prototype.getImageTracks=hn.prototype.Mh,hn.prototype.getTextTracks=hn.prototype.Hc,hn.prototype.getVariantTracks=hn.prototype.mc,hn.prototype.cancelTrickPlay=hn.prototype.Uc,hn.prototype.trickPlay=hn.prototype.ud,hn.prototype.getPlaybackRate=hn.prototype.fb,hn.prototype.isBuffering=hn.prototype.pf,hn.prototype.getKeyStatuses=hn.prototype.Id,hn.prototype.getActiveSessionsMetadata=hn.prototype.ef,hn.prototype.getExpiration=hn.prototype.ad,hn.prototype.drmInfo=hn.prototype.drmInfo,hn.prototype.keySystem=hn.prototype.keySystem,hn.prototype.isFullyLoaded=hn.prototype.ji,hn.prototype.goToLive=hn.prototype.fi,hn.prototype.seekRange=hn.prototype.Pb,hn.prototype.isAudioOnly=hn.prototype.ii,hn.prototype.isInProgress=hn.prototype.pc,hn.prototype.isLive=hn.prototype.U,hn.prototype.getAdManager=hn.prototype.sg,hn.prototype.getAssetUri=hn.prototype.Gc,hn.prototype.getNetworkingEngine=hn.prototype.yb,hn.prototype.getMediaElement=hn.prototype.Sh,hn.prototype.getManifestType=hn.prototype.hf,hn.prototype.getLoadMode=hn.prototype.ff,hn.prototype.resetConfiguration=hn.prototype.Li,hn.prototype.getBufferFullness=hn.prototype.tg,hn.prototype.getNonDefaultConfiguration=hn.prototype.xg,hn.prototype.getConfiguration=hn.prototype.getConfiguration,hn.prototype.configure=hn.prototype.configure,hn.prototype.releaseAllMutexes=hn.prototype.Hi,hn.prototype.destroyAllPreloads=hn.prototype.Pe,hn.prototype.preload=hn.prototype.preload,hn.prototype.detachAndSavePreload=hn.prototype.og,hn.prototype.unloadAndSavePreload=hn.prototype.Zi,hn.prototype.load=hn.prototype.load,hn.prototype.updateStartTime=hn.prototype.cj,hn.prototype.unload=hn.prototype.ec,hn.prototype.detach=hn.prototype.detach,hn.prototype.attachCanvas=hn.prototype.xh,hn.prototype.attach=hn.prototype.Sb,hn.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,u,c,f,h;return Re(function(v){switch(v.g){case 1:if(t={},!e){v.u(2);break}return C(v,jt(),3);case 3:t=v.h;case 2:var S={};if(tr())for(var R in Yn)S[R]=!0;R=g(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var B=R.next();!B.done;B=R.next())B=B.value,S[B]=tr()?!!Yn[B]:ur(B);for(n=S,R='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(T(Iu)),S={},R=g(R),B=R.next();!B.done;B=R.next()){B=B.value,S[B]=Ac(B)?!0:tr()?Ft(B)||!!wu(B):ur(B);var z=B.split(";")[0];S[z]=S[z]||S[B]}return r=S,C(v,Ai(),4);case 4:u=v.h,c={manifest:n,media:r,drm:t,hardwareResolution:u},f=j1;for(h in f)c[h]=f[h]();return v.return(c)}})},hn.isBrowserSupported=function(){if(m.Promise||Ke("A Promise implementation or polyfill is required"),!(m.Promise&&m.Uint8Array&&Array.prototype.forEach)||sn("Trident/"))return!1;var e=Zs();return e&&9>e||!(m.MediaKeys&&m.navigator&&m.navigator.requestMediaKeySystemAccess&&m.MediaKeySystemAccess&&m.MediaKeySystemAccess.prototype.getConfiguration)?!1:tr()?!0:ur("application/x-mpegurl")},hn.setAdManagerFactory=function(e){xv=e},hn.registerSupportPlugin=function(e,t){j1[e]=t},hn.prototype.destroy=hn.prototype.destroy;var nu=0,B1=1,$o=2,Zo=3;hn.LoadMode={DESTROYED:nu,NOT_LOADED:B1,MEDIA_SOURCE:$o,SRC_EQUALS:Zo},hn.version="v4.11.4";var Kx=["4","11"];Hr=new function(e){this.g=e,this.i=fi,this.h=ao}(new Gr(Number(Kx[0]),Number(Kx[1])));var j1={},xv=null;function zx(){this.g=[],this.i=this.l=this.j=this.h=0}function i5(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function dr(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Tt,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}p=dr.prototype,p.needsSkipUI=function(){return!1},p.getDuration=function(){return this.g.getDuration()},p.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},p.getRemainingTime=function(){return this.h.getRemainingTime()},p.isPaused=function(){return this.i},p.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},p.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.h.getAdSkippableState()},p.skip=function(){return this.h.skip()},p.pause=function(){return this.h.pause()},p.play=function(){return this.h.resume()},p.getVolume=function(){return this.h.getVolume()},p.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},p.isMuted=function(){return this.h.getVolume()==0},p.isLinear=function(){return this.g.isLinear()},p.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},p.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},p.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},p.getTitle=function(){return this.g.getTitle()},p.getDescription=function(){return this.g.getDescription()},p.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},p.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},p.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},p.getAdId=function(){return this.g.getAdId()},p.getCreativeAdId=function(){return this.g.getCreativeAdId()},p.getAdvertiserName=function(){return this.g.getAdvertiserName()},p.getMediaUrl=function(){return this.g.getMediaUrl()},p.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},p.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},p.release=function(){this.h=this.g=null},ne("shaka.ads.ClientSideAd",dr),dr.prototype.release=dr.prototype.release,dr.prototype.getPodIndex=dr.prototype.getPodIndex,dr.prototype.getTimeOffset=dr.prototype.getTimeOffset,dr.prototype.getMediaUrl=dr.prototype.getMediaUrl,dr.prototype.getAdvertiserName=dr.prototype.getAdvertiserName,dr.prototype.getCreativeAdId=dr.prototype.getCreativeAdId,dr.prototype.getAdId=dr.prototype.getAdId,dr.prototype.getVastMediaWidth=dr.prototype.getVastMediaWidth,dr.prototype.getVastMediaHeight=dr.prototype.getVastMediaHeight,dr.prototype.getVastMediaBitrate=dr.prototype.getVastMediaBitrate,dr.prototype.getDescription=dr.prototype.getDescription,dr.prototype.getTitle=dr.prototype.getTitle,dr.prototype.getPositionInSequence=dr.prototype.getPositionInSequence,dr.prototype.getSequenceLength=dr.prototype.getSequenceLength,dr.prototype.setMuted=dr.prototype.setMuted,dr.prototype.resize=dr.prototype.resize,dr.prototype.isLinear=dr.prototype.isLinear,dr.prototype.isMuted=dr.prototype.isMuted,dr.prototype.setVolume=dr.prototype.setVolume,dr.prototype.getVolume=dr.prototype.getVolume,dr.prototype.play=dr.prototype.play,dr.prototype.pause=dr.prototype.pause,dr.prototype.skip=dr.prototype.skip,dr.prototype.canSkipNow=dr.prototype.canSkipNow,dr.prototype.getTimeUntilSkippable=dr.prototype.getTimeUntilSkippable,dr.prototype.isSkippable=dr.prototype.isSkippable,dr.prototype.isPaused=dr.prototype.isPaused,dr.prototype.getRemainingTime=dr.prototype.getRemainingTime,dr.prototype.getMinSuggestedDuration=dr.prototype.getMinSuggestedDuration,dr.prototype.getDuration=dr.prototype.getDuration,dr.prototype.needsSkipUI=dr.prototype.needsSkipUI;function ti(){}function Yx(e,t){var n=[],r=0;t!=null&&(r=t),e=g(sr(e,"Ad"));for(var u=e.next();!u.done;u=e.next())if((u=Hi(u.value,"InLine"))&&(u=Hi(u,"Creatives"))){u=g(sr(u,"Creative"));for(var c=u.next();!c.done;c=u.next()){var f=Hi(c.value,"Linear");if(f&&(c=null,f.attributes.skipoffset&&(c=Eu(f.attributes.skipoffset),isNaN(c)&&(c=null)),f=Hi(f,"MediaFiles"))){var h=sr(f,"MediaFile");for(f=h,h=h.filter(function(v){return v.attributes.delivery=="streaming"}),h.length&&(f=h),f=f.sort(function(v,S){return(parseInt(S.attributes.height,10)||0)-(parseInt(v.attributes.height,10)||0)}),f=g(f),h=f.next();!h.done;h=f.next())if(h=ei(h.value)){n.push({id:null,startTime:r,endTime:null,uri:h,isSkippable:c!=null,skipOffset:c,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:t==null,post:t==1/0,timelineRange:!1});break}}}}return n}ne("shaka.ads.Utils",ti),ti.ADS_LOADED="ads-loaded",ti.AD_STARTED="ad-started",ti.AD_FIRST_QUARTILE="ad-first-quartile",ti.AD_MIDPOINT="ad-midpoint",ti.AD_THIRD_QUARTILE="ad-third-quartile",ti.AD_COMPLETE="ad-complete",ti.AD_STOPPED="ad-stopped",ti.AD_SKIPPED="ad-skipped",ti.AD_VOLUME_CHANGED="ad-volume-changed",ti.AD_MUTED="ad-muted",ti.AD_PAUSED="ad-paused",ti.AD_RESUMED="ad-resumed",ti.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",ti.CUEPOINTS_CHANGED="ad-cue-points-changed",ti.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",ti.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",ti.AD_CLICKED="ad-clicked",ti.AD_PROGRESS="ad-progress",ti.AD_BUFFERING="ad-buffering",ti.AD_IMPRESSION="ad-impression",ti.AD_DURATION_CHANGED="ad-duration-changed",ti.AD_CLOSED="ad-closed",ti.AD_LOADED="ad-loaded",ti.ALL_ADS_COMPLETED="all-ads-completed",ti.AD_LINEAR_CHANGED="ad-linear-changed",ti.AD_METADATA="ad-metadata",ti.AD_RECOVERABLE_ERROR="ad-recoverable-error",ti.AD_ERROR="ad-error",ti.AD_BREAK_READY="ad-break-ready",ti.AD_INTERACTION="ad-interaction",ti.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",ti.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",ti.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function Nv(e,t,n,r,u){var c=this;this.s=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=u,this.j=null,this.h=new Tt,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.s,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.11.4"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(f){o5(c,f)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(f){Wx(c,f)}),this.h.D(this.i,"ended",function(){c.m.contentComplete()}),this.h.pa(this.i,"play",function(){c.F=!0})}Nv.prototype.configure=function(e){this.o=e},Nv.prototype.stop=function(){this.g&&this.g.stop(),this.s&&sd(this.s)},Nv.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function Wx(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new jn("ad-error",t)),Dv(e,null),e.l(new jn("ad-cue-points-changed",new Map().set("cuepoints",[])))}function o5(e,t){if(e.l(new jn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new jn("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=g(r);for(var u=r.next();!u.done;u=r.next())t.push({start:u.value,end:null});e.l(new jn("ad-cue-points-changed",new Map().set("cuepoints",t)))}a5(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,Mv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Mv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in m?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Mv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Mv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.pa(e.i,"play",function(){e.F=!0,e.g.start()})}catch(c){Dv(e,null)}}function Mv(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function a5(e){function t(n,r){n=new Map().set("originalEvent",n),e.l(new jn(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){Wx(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){$x(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){$x(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Dv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){Dv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function $x(e,t){var n=t.getAd();n?(e.j=new dr(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new jn("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new jn("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Ke("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Dv(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new jn("ad-content-resume-requested")),e.l(new jn("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function hr(e,t,n,r,u,c){this.g=e,this.h=t,this.j=n,this.l=r,this.m=u,this.i=c}p=hr.prototype,p.needsSkipUI=function(){return!0},p.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},p.isPaused=function(){return this.g.paused},p.isSkippable=function(){return this.h},p.getTimeUntilSkippable=function(){if(this.h){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.l()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.play()},p.getVolume=function(){return this.g.volume},p.setVolume=function(e){this.g.volume=e},p.isMuted=function(){return this.g.muted},p.isLinear=function(){return!0},p.resize=function(){},p.setMuted=function(e){this.g.muted=e},p.getSequenceLength=function(){return this.m},p.getPositionInSequence=function(){return this.i},p.getTitle=function(){return""},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return""},p.getCreativeAdId=function(){return""},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){this.g=null},ne("shaka.ads.InterstitialAd",hr),hr.prototype.release=hr.prototype.release,hr.prototype.getPodIndex=hr.prototype.getPodIndex,hr.prototype.getTimeOffset=hr.prototype.getTimeOffset,hr.prototype.getMediaUrl=hr.prototype.getMediaUrl,hr.prototype.getAdvertiserName=hr.prototype.getAdvertiserName,hr.prototype.getCreativeAdId=hr.prototype.getCreativeAdId,hr.prototype.getAdId=hr.prototype.getAdId,hr.prototype.getVastMediaWidth=hr.prototype.getVastMediaWidth,hr.prototype.getVastMediaHeight=hr.prototype.getVastMediaHeight,hr.prototype.getVastMediaBitrate=hr.prototype.getVastMediaBitrate,hr.prototype.getDescription=hr.prototype.getDescription,hr.prototype.getTitle=hr.prototype.getTitle,hr.prototype.getPositionInSequence=hr.prototype.getPositionInSequence,hr.prototype.getSequenceLength=hr.prototype.getSequenceLength,hr.prototype.setMuted=hr.prototype.setMuted,hr.prototype.resize=hr.prototype.resize,hr.prototype.isLinear=hr.prototype.isLinear,hr.prototype.isMuted=hr.prototype.isMuted,hr.prototype.setVolume=hr.prototype.setVolume,hr.prototype.getVolume=hr.prototype.getVolume,hr.prototype.play=hr.prototype.play,hr.prototype.pause=hr.prototype.pause,hr.prototype.skip=hr.prototype.skip,hr.prototype.canSkipNow=hr.prototype.canSkipNow,hr.prototype.getTimeUntilSkippable=hr.prototype.getTimeUntilSkippable,hr.prototype.isSkippable=hr.prototype.isSkippable,hr.prototype.isPaused=hr.prototype.isPaused,hr.prototype.getRemainingTime=hr.prototype.getRemainingTime,hr.prototype.getMinSuggestedDuration=hr.prototype.getMinSuggestedDuration,hr.prototype.getDuration=hr.prototype.getDuration,hr.prototype.needsSkipUI=hr.prototype.needsSkipUI;function _p(e,t,n,r){var u=this;this.G=e,this.B=t,this.h=n,this.F=null,this.o=!0,this.m=this.h,this.g=r,this.H=new Set,this.A=new Set,this.s=new Map,this.i=new hn,q1(this),this.K=new Tt,this.j=new Tt,this.I=!1,this.C=this.l=null,this.K.D(this.h,"timeupdate",function(){if(!u.I){var c=u.l==null||u.l==0;u.l=u.h.currentTime,u.C&&!u.C.pre&&!u.C.post&&u.l<u.C.startTime&&(u.C=null),(c=Xx(u,c,0,u.C))&&Qx(u,c,1,1,Date.now())}}),new on(function(){var c,f,h,v,S,R,B,z,J,fe;return Re(function(he){switch(he.g){case 1:if(!u.A.size||u.I||u.l==null){he.u(0);break}c=!1,f=Array.from(u.A),h=u.B.Pb(),v=g(f),S=v.next();case 3:if(S.done){he.u(5);break}if(R=S.value,B=R.endTime||R.startTime,!(1<=h.start-B)){z=R.startTime-u.l,0<z&&10>=z&&(u.s.has(R)||u.s.set(R,u.i.preload(R.uri))),he.u(4);break}if(!u.s.has(R)){he.u(7);break}return C(he,u.s.get(R),8);case 8:(J=he.h)&&J.destroy(),u.s.delete(R);case 7:fe=JSON.stringify(R),u.H.has(fe)&&u.H.delete(fe),u.A.delete(R),c=!0;case 4:S=v.next(),he.u(3);break;case 5:c&&Z1(u),X(he)}})}).Ra(1)}_p.prototype.configure=function(e){this.G&&this.o==e.supportsMultipleMediaElements&&((this.o=!e.supportsMultipleMediaElements)?(this.m=this.h,this.F&&(this.F.parentElement&&this.G.removeChild(this.F),this.F=null)):(this.F||(e=document.createElement(this.h.tagName),e.autoplay=!0,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgb(0, 0, 0)",e.setAttribute("playsinline",""),this.F=e),this.m=this.F))},_p.prototype.stop=function(){this.j&&this.j.Qa(),this.H.clear(),this.A.clear(),this.i.Pe(),this.s.clear(),this.i.detach(),this.I=!1,this.C=this.l=null},_p.prototype.release=function(){this.stop(),this.K&&this.K.release(),this.j&&this.j.release(),this.G&&sd(this.G),this.i.destroy()};function s5(e,t){var n;Re(function(r){if(r.g==1)return e.B.ff()==Zo&&e.o?(Ke("Unsupported HLS interstitial when using single media element",t),r.return()):(q1(e),C(r,u5(e,t),2));n=r.h,n.length?Pv(e,n):Ke("Unsupported HLS interstitial",t),X(r)})}_p.prototype.addAdUrlInterstitial=function(e){var t=this,n,r,u,c,f,h,v,S,R;return Re(function(B){switch(B.g){case 1:return n={type:12},C(B,G1(t,e,n),2);case 2:if(r=B.h,u=_u(r,"VAST,vmap:VMAP"),!u)throw new Xe(2,10,4001);if(c=[],u.tagName=="VAST"){c=Yx(u,t.l),B.u(3);break}if(u.tagName!="vmap:VMAP"){B.u(3);break}for(var z=[],J=g(sr(u,"vmap:AdBreak")),fe=J.next();!fe.done;fe=J.next()){var he=fe.value,Ee=he.attributes.timeOffset;Ee&&(fe=null,Ee=="start"?fe=0:Ee=="end"?fe=1/0:fe=Eu(Ee),(he=Hi(he,"vmap:AdSource"))&&(he=Hi(he,"vmap:AdTagURI"))&&(he=ei(he))&&z.push({time:fe,uri:he}))}f=g(z),h=f.next();case 5:if(h.done){B.u(3);break}return v=h.value,C(B,G1(t,v.uri,n),8);case 8:if(S=B.h,R=_u(S,"VAST"),!R)throw new Xe(2,10,4001);c.push.apply(c,T(Yx(R,v.time))),h=f.next(),B.u(5);break;case 3:Pv(t,c),X(B)}})};function Pv(e,t){if(e.B.ff()==Zo&&e.o)Ke("Unsupported interstitial when using single media element",t);else{var n=!1;t=g(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var u=JSON.stringify(r);if(!e.H.has(u)){if(n=!0,e.H.add(u),e.A.add(r),u=!1,r.pre&&e.l==null)u=!0;else if(r.startTime==0&&!r.canJump)u=!0;else if(e.l!=null){var c=r.startTime-e.l;0<c&&10>=c&&(u=!0)}u&&(e.s.has(r)||e.s.set(r,e.i.preload(r.uri)))}}n&&Z1(e)}}function Xx(e,t,n,r){var u=0,c=null;if(e.A.size&&e.l!=null){var f=e.h.ended,h=Array.from(e.A).sort(function(B,z){return z.startTime-B.startTime});h=g(h);for(var v=h.next();!v.done;v=h.next()){v=v.value;var S=!1;if(t)S=v.pre;else if(f)S=v.post;else if(!v.pre&&!v.post){var R=e.l-Math.round(1e3*v.startTime)/1e3;0<R&&(1>=R||!v.canJump)&&(S=!(1<R&&r&&!r.pre&&!r.post&&r.startTime>=v.startTime))}if(S){if(u==n){c=v;break}u++}}}return c}function Qx(e,t,n,r,u,c){c=c===void 0?0:c;var f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue;Re(function(Qe){switch(Qe.g){case 1:if(e.C=t,f=Date.now(),!e.m.parentElement&&e.G&&e.G.appendChild(e.m),r==1&&n==1&&(n=Array.from(e.A).filter(function(rt){return t.pre?rt.pre==t.pre:t.post?rt.post==t.post:.001>Math.abs(rt.startTime-t.startTime)}).length),(t.once||t.pre)&&(c++,e.A.delete(t),Z1(e)),e.I=!0,!e.o||r!=1){Qe.u(2);break}return e.g(new jn("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),h=new Lr,v=function(rt){return Re(function(dt){if(dt.g==1)return rt.state!="detach"?dt.u(0):Gu()?C(dt,new Promise(function(gt){return new on(gt).Z(.1)}),3):dt.u(3);h.resolve(),e.j.$a(e.B,"onstatechange",v),X(dt)})},e.j.D(e.B,"onstatechange",v),C(Qe,h,2);case 2:return e.o||(e.h.pause(),t.resumeOffset!=null&&t.resumeOffset!=0&&(e.h.currentTime+=t.resumeOffset)),S=!1,R=null,B=function(){if(!e.o&&t.resumeOffset==null)if(t.timelineRange&&t.endTime&&t.endTime!=1/0)e.h.currentTime!=t.endTime&&(e.h.currentTime=t.endTime);else{var rt=Date.now();e.h.currentTime+=(rt-u)/1e3,u=rt}},z=function(){var rt,dt;return Re(function(gt){if(gt.g==1)return B(),R&&R.stop(),(rt=Xx(e,t.pre,r-c))?(e.g(new jn("ad-stopped")),e.j.Qa(),Qx(e,rt,n,++r,u,c),gt.u(0)):e.o?C(gt,e.i.detach(),4):C(gt,e.i.ec(),4);e.o&&(dt=t.resumeOffset,dt==null&&(dt=t.timelineRange&&t.endTime&&t.endTime!=1/0?t.endTime-(e.l||0):(Date.now()-u)/1e3),e.g(new jn("ad-content-resume-requested",new Map().set("offset",dt)))),e.g(new jn("ad-stopped")),e.j.Qa(),e.I=!1,e.o||(B(),e.h.ended||e.h.play()),X(gt)})},J=function(rt){return Re(function(dt){return S?dt.return():(S=!0,e.g(new jn("ad-error",new Map().set("originalEvent",rt))),C(dt,z(),0))})},fe=function(){return Re(function(rt){if(rt.g==1)return S?rt.return():(S=!0,C(rt,z(),2));e.g(new jn("ad-complete")),X(rt)})},he=function(){return Re(function(rt){return S?rt.return():(S=!0,e.g(new jn("ad-skipped")),C(rt,z(),0))})},Ee=new hr(e.m,t.isSkippable,t.skipOffset,he,n,r),e.o||(Ee.setMuted(e.h.muted),Ee.setVolume(e.h.volume)),e.g(new jn("ad-started",new Map().set("ad",Ee))),Ee.canSkipNow()&&e.g(new jn("ad-skip-state-changed")),Le=new Set,e.j.pa(e.i,"error",J),e.j.D(e.m,"timeupdate",function(){var rt=e.m.duration;rt&&(t.isSkippable&&t.skipOffset&&Ee.canSkipNow()&&0<Ee.getRemainingTime()&&0<Ee.getDuration()&&e.g(new jn("ad-skip-state-changed")),rt=100*e.m.currentTime/rt,25<=rt&&!Le.has("firstquartile")?(B(),e.g(new jn("ad-first-quartile")),Le.add("firstquartile")):50<=rt&&!Le.has("midpoint")?(B(),e.g(new jn("ad-midpoint")),Le.add("midpoint")):75<=rt&&!Le.has("thirdquartile")&&(B(),e.g(new jn("ad-third-quartile")),Le.add("thirdquartile")))}),e.j.pa(e.i,"complete",fe),e.j.D(e.m,"play",function(){e.g(new jn("ad-resumed"))}),e.j.D(e.m,"pause",function(){e.g(new jn("ad-paused"))}),e.j.D(e.m,"volumechange",function(){e.m.muted?e.g(new jn("ad-muted")):e.g(new jn("ad-volume-changed"))}),ce(Qe,4),t.playoutLimit&&(R=new on(function(){Ee.skip()}).Z(t.playoutLimit)),q1(e),C(Qe,e.i.Sb(e.m),6);case 6:return e.s.has(t)?C(Qe,e.s.get(t),10):C(Qe,e.i.load(t.uri),8);case 10:return Fe=Qe.h,e.s.delete(t),Fe?C(Qe,e.i.load(Fe),8):C(Qe,e.i.load(t.uri),8);case 8:it=(Date.now()-f)/1e3,e.g(new jn("ads-loaded",new Map().set("loadTime",it))),e.o&&e.h.play(),me(Qe,0);break;case 4:Ue=be(Qe),J(Ue),X(Qe)}})}function u5(e,t){var n,r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An;return Re(function(Vn){switch(Vn.g){case 1:if(n=[],!t||(r=t.values.find(function(Qn){return Qn.key=="X-ASSET-URI"}),u=t.values.find(function(Qn){return Qn.key=="X-ASSET-LIST"}),!r&&!u))return Vn.return(n);if(c=null,(f=t.values.find(function(Qn){return Qn.key=="ID"}))&&(c=f.data),h=t.values.find(function(Qn){return Qn.key=="X-RESTRICT"}),S=v=!0,h&&h.data&&(R=h.data,v=!R.includes("SKIP"),S=!R.includes("JUMP")),B=null,(z=t.values.find(function(Qn){return Qn.key=="X-RESUME-OFFSET"}))&&(J=z.data,B=parseFloat(J),isNaN(B)&&(B=null)),fe=null,(he=t.values.find(function(Qn){return Qn.key=="X-PLAYOUT-LIMIT"}))&&(Ee=he.data,fe=parseFloat(Ee),isNaN(fe)&&(fe=null)),it=Fe=Le=!1,(Ue=t.values.find(function(Qn){return Qn.key=="CUE"}))&&(Qe=Ue.data,Le=Qe.includes("ONCE"),Fe=Qe.includes("PRE"),it=Qe.includes("POST")),rt=!1,(dt=t.values.find(function(Qn){return Qn.key=="X-TIMELINE-OCCUPIES"}))?(gt=dt.data,rt=gt.includes("RANGE")):!z&&e.B.U()&&(rt=!Fe&&!it),r){if(kt=r.data,!kt)return Vn.return(n);n.push({id:c,startTime:t.startTime,endTime:t.endTime,uri:kt,isSkippable:v,skipOffset:v?0:null,canJump:S,resumeOffset:B,playoutLimit:fe,once:Le,pre:Fe,post:it,timelineRange:rt}),Vn.u(2);break}if(!u){Vn.u(2);break}return It=u.data,It?(ce(Vn,4),Ut={type:11},C(Vn,G1(e,It,Ut),6)):Vn.return(n);case 6:for(Nt=Vn.h,nn=br(Nt),Kt=JSON.parse(nn),$t=g(Kt.ASSETS),En=$t.next();!En.done;En=$t.next())An=En.value,An.URI&&n.push({id:c,startTime:t.startTime,endTime:t.endTime,uri:An.URI,isSkippable:v,skipOffset:v?0:null,canJump:S,resumeOffset:B,playoutLimit:fe,once:Le,pre:Fe,post:it,timelineRange:rt});me(Vn,2);break;case 4:be(Vn);case 2:return Vn.return(n)}})}function Z1(e){for(var t=[],n=g(e.A),r=n.next(),u={};!r.done;u={Rb:void 0},r=n.next())r=r.value,u.Rb={start:r.startTime,end:null},r.pre?(u.Rb.start=0,u.Rb.end=null):r.post?(u.Rb.start=-1,u.Rb.end=null):r.timelineRange&&(u.Rb.end=r.endTime),t.find(function(c){return function(f){return c.Rb.start==f.start&&c.Rb.end==f.end}}(u))||t.push(u.Rb);e.g(new jn("ad-cue-points-changed",new Map().set("cuepoints",t)))}function q1(e){e.i.configure(e.B.xg());var t=e.i.yb();t.jg(),t.kg(),Jh(e.B.yb(),t)}function G1(e,t,n){var r,u,c;return Re(function(f){return f.g==1?(r=Bi([t],ua()),u=e.B.yb().request(7,r,n),C(f,u.promise,2)):(c=f.h,f.return(c.data))})}function lr(e,t,n,r,u){this.h=e,this.j=Eu(this.h.skipOffset),this.g=u,this.i=t,this.l=n,this.o=r,this.m=!1}p=lr.prototype,p.needsSkipUI=function(){return!0},p.getDuration=function(){return this.h.durationInSeconds},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},p.isPaused=function(){return this.g.paused},p.isSkippable=function(){return typeof this.j=="number"},p.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.play()},p.getVolume=function(){return this.g.volume},p.setVolume=function(e){this.g.volume=e},p.isMuted=function(){return this.g.muted},p.isLinear=function(){return this.o},p.resize=function(){},p.setMuted=function(e){this.g.muted=e},p.getSequenceLength=function(){return this.l?this.l:1},p.getPositionInSequence=function(){return this.i?this.i:1},p.getTitle=function(){return this.h.adTitle},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return this.h.adId},p.getCreativeAdId=function(){return this.h.creativeId},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){this.l=this.i=this.g=this.h=null},ne("shaka.ads.MediaTailorAd",lr),lr.prototype.release=lr.prototype.release,lr.prototype.getPodIndex=lr.prototype.getPodIndex,lr.prototype.getTimeOffset=lr.prototype.getTimeOffset,lr.prototype.getMediaUrl=lr.prototype.getMediaUrl,lr.prototype.getAdvertiserName=lr.prototype.getAdvertiserName,lr.prototype.getCreativeAdId=lr.prototype.getCreativeAdId,lr.prototype.getAdId=lr.prototype.getAdId,lr.prototype.getVastMediaWidth=lr.prototype.getVastMediaWidth,lr.prototype.getVastMediaHeight=lr.prototype.getVastMediaHeight,lr.prototype.getVastMediaBitrate=lr.prototype.getVastMediaBitrate,lr.prototype.getDescription=lr.prototype.getDescription,lr.prototype.getTitle=lr.prototype.getTitle,lr.prototype.getPositionInSequence=lr.prototype.getPositionInSequence,lr.prototype.getSequenceLength=lr.prototype.getSequenceLength,lr.prototype.setMuted=lr.prototype.setMuted,lr.prototype.resize=lr.prototype.resize,lr.prototype.isLinear=lr.prototype.isLinear,lr.prototype.isMuted=lr.prototype.isMuted,lr.prototype.setVolume=lr.prototype.setVolume,lr.prototype.getVolume=lr.prototype.getVolume,lr.prototype.play=lr.prototype.play,lr.prototype.pause=lr.prototype.pause,lr.prototype.skip=lr.prototype.skip,lr.prototype.canSkipNow=lr.prototype.canSkipNow,lr.prototype.getTimeUntilSkippable=lr.prototype.getTimeUntilSkippable,lr.prototype.isSkippable=lr.prototype.isSkippable,lr.prototype.isPaused=lr.prototype.isPaused,lr.prototype.getRemainingTime=lr.prototype.getRemainingTime,lr.prototype.getMinSuggestedDuration=lr.prototype.getMinSuggestedDuration,lr.prototype.getDuration=lr.prototype.getDuration,lr.prototype.needsSkipUI=lr.prototype.needsSkipUI;function Tp(e,t,n,r){this.B=e,this.K=t,this.h=n,this.l=null,this.T=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.O=!0,this.H="",this.o=new Tt}Tp.prototype.stop=function(){for(var e=g(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.$a(t.target,t.type,t.listener);pd(this),this.m=[],this.s=[],this.G="",this.O=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},Tp.prototype.release=function(){this.stop(),this.o&&this.o.release()},Tp.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(c5(this,this.G,this.O),this.O=!1)},Tp.prototype.getCuePoints=function(){for(var e=[],t=g(this.j),n=t.next();!n.done;n=t.next()){n=g(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function l5(e,t,n){var r,u,c,f,h,v,S,R,B,z,J,fe;Re(function(he){if(he.g==1)return r={type:7},u=Bi([t],ua()),u.method="POST",n&&(c=JSON.stringify(n),u.body=Ci(c)),f=e.K.request(7,u,r),ce(he,2),C(he,f.promise,4);if(he.g!=2){if(h=he.h,v=br(h.data),S=JSON.parse(v),S.manifestUrl&&S.trackingUrl)R=new Ei(t),B=new Ei(S.trackingUrl),e.G=R.resolve(B).toString(),z=Date.now()/1e3,J=z-e.T,e.i(new jn("ads-loaded",new Map().set("loadTime",J))),fe=new Ei(S.manifestUrl),e.l.resolve(R.resolve(fe).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return me(he,0)}if(be(he),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,he.return();e.l.resolve(e.H),e.l=null,X(he)})}function c5(e,t,n){var r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe;Re(function(it){if(it.g==1)return r={type:8},u=Bi([t],ua()),c=e.K.request(7,u,r),ce(it,2),C(it,c.promise,4);if(it.g!=2){if(f=it.h,h=[],v=br(f.data),S=JSON.parse(v),0<S.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(S.avails)){for(e.j=S.avails,R=g(e.j),B=R.next();!B.done;B=R.next())for(z=B.value,J=g(z.nonLinearAdsList),fe=J.next();!fe.done;fe=J.next())for(he=fe.value,Ee=g(he.nonLinearAdList),Le=Ee.next();!Le.done;Le=Ee.next())Fe=Le.value,f5(e,Fe);h=e.getCuePoints(),e.i(new jn("ad-cue-points-changed",new Map().set("cuepoints",h)))}}else e.j.length&&e.i(new jn("ad-cue-points-changed",new Map().set("cuepoints",h))),pd(e),e.j=[];return n&&(e.I||0<h.length)&&d5(e),me(it,0)}be(it),X(it)})}function f5(e,t){var n,r,u,c,f,h,v,S;Re(function(R){if(R.g==1)return!t.staticResource||(n=Jx(t),e.F.get(n))?R.return():(r={type:9},u=Bi([t.staticResource],ua()),c=e.K.request(7,u,r),ce(R,2),e.F.set(n,[]),C(R,c.promise,4));if(R.g!=2)return f=R.h,h=br(f.data),v=JSON.parse(h),S=v.apps,e.F.set(n,S),me(R,0);be(R),e.F.delete(n),X(R)})}function Jx(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function d5(e){tN(e),e.I||(eN(e),e.o.D(e.h,"seeked",function(){eN(e)}),e.o.D(e.h,"ended",function(){pd(e)})),e.o.D(e.h,"timeupdate",function(){tN(e)})}function eN(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,r,u=g(e.j),c=u.next();!c.done;c=u.next()){c=c.value;for(var f=g(c.ads),h=f.next();!h.done;h=f.next())if(h=h.value,!r)h.startTimeInSeconds<t&&(r=h,n=c);else if(h.startTimeInSeconds<t&&h.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=h,n=c;break}}n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function tN(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.C,u=r.startTimeInSeconds+.5*r.durationInSeconds,c=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),qo(e,"firstQuartile")):t>=u&&!e.s.includes("midpoint")?(e.s.push("midpoint"),qo(e,"midpoint")):t>=c&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),qo(e,"thirdQuartile")),r=e.g.getRemainingTime(),u=e.g.getDuration(),e.g.canSkipNow()&&0<r&&0<u&&qo(e,"skipStateChanged"),0<u&&(0>=r||r>u)&&pd(e)}if(!e.g||!e.g.isLinear()){e:for(r=g(e.j),u=r.next();!u.done&&(u=u.value,!(e.g&&e.g.isLinear()));u=r.next())for(c=0;c<u.ads.length;c++){var f=u.ads[c],h=f.startTimeInSeconds+f.durationInSeconds;if(f.startTimeInSeconds<=t&&h>t){if(e.N.includes(f.adId)){if(e.h.ended)continue;e.h.currentTime=h;break e}pd(e),e.L=u,e.g=new lr(f,c+1,u.ads.length,!0,e.h),e.C=f,c===0&&qo(e,"breakStart"),nN(e);break}}if(!e.g){for(r=g(e.j),u=r.next();!u.done&&(u=u.value,!e.g);u=r.next())for(c=0;c<u.nonLinearAdsList.length;c++)if(f=u.nonLinearAdsList[c],f.nonLinearAdList.length){h=u.startTimeInSeconds;var v=e.F.get(Jx(f.nonLinearAdList[0]));if(h<=t&&v&&v.length){pd(e),h=e,v=g(v);for(var S=v.next();!S.done;S=v.next())if(S=S.value,S.data.source.length){var R=document.createElement("img");R.src=S.data.source[0].url,R.style.top=(S.placeholder.top||0)+"%",R.style.height=100-(S.placeholder.top||0)+"%",R.style.left=(S.placeholder.left||0)+"%",R.style.maxWidth=100-(S.placeholder.left||0)+"%",R.style.objectFit="contain",R.style.position="absolute",h.B.appendChild(R)}e.L=u,e.g=new lr(f,c+1,u.ads.length,!1,e.h),e.C=f,c===0&&qo(e,"breakStart"),nN(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function pd(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId);var t=e.g.m;t!==void 0&&t?qo(e,"skip"):qo(e,"complete"),t=g(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.$a(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&qo(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function nN(e){var t=!1;e.h.paused?t=!0:(qo(e,"impression"),qo(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&qo(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||qo(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(qo(e,"impression"),qo(e,"start"),t=!1):qo(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){qo(e,"pause")}});for(var n=g(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function qo(e,t){var n=e.C.trackingEvents.find(function(c){return c.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(c){return c.eventType==t})),n){var r={type:10};n=g(n.beaconUrls);for(var u=n.next();!u.done;u=n.next())(u=u.value)&&u!=""&&(u=Bi([u],ua()),u.method="POST",e.K.request(7,u,r))}switch(t){case"impression":e.i(new jn("ad-impression"));break;case"start":e.i(new jn("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new jn("ad-muted"));break;case"unmute":e.i(new jn("ad-volume-changed"));break;case"resume":e.i(new jn("ad-resumed"));break;case"pause":e.i(new jn("ad-paused"));break;case"firstQuartile":e.i(new jn("ad-first-quartile"));break;case"midpoint":e.i(new jn("ad-midpoint"));break;case"thirdQuartile":e.i(new jn("ad-third-quartile"));break;case"complete":e.i(new jn("ad-complete")),e.i(new jn("ad-stopped"));break;case"skip":e.i(new jn("ad-skipped")),e.i(new jn("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new jn("ad-skip-state-changed"))}}function pr(e,t){this.g=e,this.i=null,this.h=t}p=pr.prototype,p.needsSkipUI=function(){return!0},p.getDuration=function(){return this.i?this.i.duration:-1},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},p.isPaused=function(){return this.h.paused},p.isSkippable=function(){return this.g.isSkippable()},p.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.h.currentTime+=this.getRemainingTime()},p.pause=function(){return this.h.pause()},p.play=function(){return this.h.play()},p.getVolume=function(){return this.h.volume},p.setVolume=function(e){this.h.volume=e},p.isMuted=function(){return this.h.muted},p.isLinear=function(){return!0},p.resize=function(){},p.setMuted=function(e){this.h.muted=e},p.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},p.getTitle=function(){return this.g.getTitle()},p.getDescription=function(){return this.g.getDescription()},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},p.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},p.getAdId=function(){return this.g.getAdId()},p.getCreativeAdId=function(){return this.g.getCreativeAdId()},p.getAdvertiserName=function(){return this.g.getAdvertiserName()},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},p.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},p.release=function(){this.h=this.i=this.g=null},ne("shaka.ads.ServerSideAd",pr),pr.prototype.release=pr.prototype.release,pr.prototype.getPodIndex=pr.prototype.getPodIndex,pr.prototype.getTimeOffset=pr.prototype.getTimeOffset,pr.prototype.getMediaUrl=pr.prototype.getMediaUrl,pr.prototype.getAdvertiserName=pr.prototype.getAdvertiserName,pr.prototype.getCreativeAdId=pr.prototype.getCreativeAdId,pr.prototype.getAdId=pr.prototype.getAdId,pr.prototype.getVastMediaWidth=pr.prototype.getVastMediaWidth,pr.prototype.getVastMediaHeight=pr.prototype.getVastMediaHeight,pr.prototype.getVastMediaBitrate=pr.prototype.getVastMediaBitrate,pr.prototype.getDescription=pr.prototype.getDescription,pr.prototype.getTitle=pr.prototype.getTitle,pr.prototype.getPositionInSequence=pr.prototype.getPositionInSequence,pr.prototype.getSequenceLength=pr.prototype.getSequenceLength,pr.prototype.setMuted=pr.prototype.setMuted,pr.prototype.resize=pr.prototype.resize,pr.prototype.isLinear=pr.prototype.isLinear,pr.prototype.isMuted=pr.prototype.isMuted,pr.prototype.setVolume=pr.prototype.setVolume,pr.prototype.getVolume=pr.prototype.getVolume,pr.prototype.play=pr.prototype.play,pr.prototype.pause=pr.prototype.pause,pr.prototype.skip=pr.prototype.skip,pr.prototype.canSkipNow=pr.prototype.canSkipNow,pr.prototype.getTimeUntilSkippable=pr.prototype.getTimeUntilSkippable,pr.prototype.isSkippable=pr.prototype.isSkippable,pr.prototype.isPaused=pr.prototype.isPaused,pr.prototype.getRemainingTime=pr.prototype.getRemainingTime,pr.prototype.getMinSuggestedDuration=pr.prototype.getMinSuggestedDuration,pr.prototype.getDuration=pr.prototype.getDuration,pr.prototype.needsSkipUI=pr.prototype.needsSkipUI;function rN(e,t,n,r){var u=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Tt,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new jn("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(c){h5(u,c)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.B.length?u.j.resolve(u.B):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(c){c=c.getAd(),u.m=new pr(c,u.l),u.A&&(u.m.i=u.A),u.i(new jn("ad-started",new Map().set("ad",u.m))),u.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.s.removeAttribute("ad-active");var c=u.l.currentTime;u.o&&u.o>c&&(u.l.currentTime=u.o,u.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(c){u.A=c.getStreamData().adProgressData,u.m&&(u.m.i=u.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new jn("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new jn("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new jn("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new jn("ad-complete")),u.i(new jn("ad-stopped")),u.s.removeAttribute("ad-active"),u.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new jn("ad-skipped")),u.i(new jn("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(c){var f=c.getStreamData();c=[],f=g(f.cuepoints);for(var h=f.next();!h.done;h=f.next())h=h.value,c.push({start:h.start,end:h.end});u.C=c,u.i(new jn("ad-cue-points-changed",new Map().set("cuepoints",c)))})}p=rN.prototype,p.configure=function(){},p.stop=function(){this.B="",this.o=null,this.C=[]},p.release=function(){this.stop(),this.h&&this.h.release()},p.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},p.getCuePoints=function(){return this.C};function h5(e,t){e.i(new jn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function Wn(){Nr.call(this),this.g=this.i=this.j=this.h=null,this.m=new zx,this.o=navigator.language,this.l=null}Y(Wn,Nr),p=Wn.prototype,p.setLocale=function(e){this.o=e},p.configure=function(e){this.l=e,this.h&&this.h.configure(this.l),this.j&&this.j.configure(this.l),this.g&&this.g.configure(this.l)},p.initInterstitial=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new _p(e,t,n,function(u){return Ov(r,u)}),this.h.configure(this.l)},p.initClientSide=function(e,t,n){var r=this;if(!m.google||!google.ima||!google.ima.AdsLoader)throw new Xe(2,10,1e4);this.j&&this.j.release(),this.j=new Nv(e,t,this.o,n,function(u){return Ov(r,u)}),this.j.configure(this.l)},p.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),Nr.prototype.release.call(this)},p.onAssetUnload=function(){this.h&&this.h.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new jn("ad-stopped")),this.dispatchEvent(new jn("ad-content-attach-requested")),this.m=new zx},p.requestClientSideAds=function(e){if(!this.j)throw new Xe(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},p.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new Xe(1,10,10001);var t=this.j;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},p.initMediaTailor=function(e,t,n){var r=this;this.i&&this.i.release(),this.i=new Tp(e,t,n,function(u){return Ov(r,u)})},p.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new Xe(1,10,10005);var r=this.i;return n=n===void 0?"":n,r.l?e=Promise.reject(new Xe(1,10,10004)):(r.l=new Lr,l5(r,e,t),r.H=n||"",r.T=Date.now()/1e3,e=r.l),e},p.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new Xe(1,10,10005);var t=this.i;t.G=e,t.i(new jn("ads-loaded",new Map().set("loadTime",0)))},p.initServerSide=function(e,t){var n=this;if(!m.google||!google.ima||!google.ima.dai)throw new Xe(2,10,10002);this.g&&this.g.release(),this.g=new rN(e,t,this.o,function(r){return Ov(n,r)}),this.g.configure(this.l)},p.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new Xe(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Ke('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.11.4",n=this.g,n.j?e=Promise.reject(new Xe(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Lr,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},p.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new Xe(1,10,10003);(e.mpt||e.mpv)&&Ke('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.11.4",this.g.g.replaceAdTagParameters(e)},p.getServerSideCuePoints=function(){return gr("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},p.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},p.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:i5(e),started:e.h,playedCompletely:e.j,skipped:e.l,errors:e.i}},p.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},p.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},p.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},p.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},p.onHLSInterstitialMetadata=function(e,t,n){this.h||this.initInterstitial(null,e,t),this.h&&s5(this.h,n)},p.onDASHInterstitialMetadata=function(e,t,n){if(n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:2022"&&(this.h||this.initInterstitial(null,e,t),this.h)){e=this.h,t=g(n.eventNode.children);for(var r=t.next();!r.done;r=t.next()){var u=r.value;if(u.tagName=="AlternativeMPD"&&(r=u.attributes.uri,u=u.attributes.mode,r)){var c=r,f=u;break}}c?(t=f=="replace",f=f=="insert",(t||f)&&Pv(e,[{id:null,startTime:n.startTime,endTime:t?n.endTime:null,uri:c,isSkippable:!1,skipOffset:null,canJump:!0,resumeOffset:f?0:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:t&&!f}])):Ke("Unsupported MPD alternate",n)}},p.addCustomInterstitial=function(e){if(!this.h)throw new Xe(1,10,10006);Pv(this.h,[e])},p.addAdUrlInterstitial=function(e){if(!this.h)throw new Xe(1,10,10006);return this.h.addAdUrlInterstitial(e)};function Ov(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;break;case"ad-complete":e.m.j++;break;case"ad-skipped":e.m.l++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}ne("shaka.ads.AdManager",Wn),Wn.prototype.addAdUrlInterstitial=Wn.prototype.addAdUrlInterstitial,Wn.prototype.addCustomInterstitial=Wn.prototype.addCustomInterstitial,Wn.prototype.onDASHInterstitialMetadata=Wn.prototype.onDASHInterstitialMetadata,Wn.prototype.onHLSInterstitialMetadata=Wn.prototype.onHLSInterstitialMetadata,Wn.prototype.onCueMetadataChange=Wn.prototype.onCueMetadataChange,Wn.prototype.onHlsTimedMetadata=Wn.prototype.onHlsTimedMetadata,Wn.prototype.onDashTimedMetadata=Wn.prototype.onDashTimedMetadata,Wn.prototype.onManifestUpdated=Wn.prototype.onManifestUpdated,Wn.prototype.getStats=Wn.prototype.getStats,Wn.prototype.getCuePoints=Wn.prototype.getCuePoints,Wn.prototype.getServerSideCuePoints=Wn.prototype.getServerSideCuePoints,Wn.prototype.replaceServerSideAdTagParameters=Wn.prototype.replaceServerSideAdTagParameters,Wn.prototype.requestServerSideStream=Wn.prototype.requestServerSideStream,Wn.prototype.initServerSide=Wn.prototype.initServerSide,Wn.prototype.addMediaTailorTrackingUrl=Wn.prototype.addMediaTailorTrackingUrl,Wn.prototype.requestMediaTailorStream=Wn.prototype.requestMediaTailorStream,Wn.prototype.initMediaTailor=Wn.prototype.initMediaTailor,Wn.prototype.updateClientSideAdsRenderingSettings=Wn.prototype.updateClientSideAdsRenderingSettings,Wn.prototype.requestClientSideAds=Wn.prototype.requestClientSideAds,Wn.prototype.onAssetUnload=Wn.prototype.onAssetUnload,Wn.prototype.release=Wn.prototype.release,Wn.prototype.initClientSide=Wn.prototype.initClientSide,Wn.prototype.initInterstitial=Wn.prototype.initInterstitial,Wn.prototype.configure=Wn.prototype.configure,Wn.prototype.setLocale=Wn.prototype.setLocale,Wn.ADS_LOADED="ads-loaded",Wn.AD_STARTED="ad-started",Wn.AD_FIRST_QUARTILE="ad-first-quartile",Wn.AD_MIDPOINT="ad-midpoint",Wn.AD_THIRD_QUARTILE="ad-third-quartile",Wn.AD_COMPLETE="ad-complete",Wn.AD_STOPPED="ad-stopped",Wn.AD_SKIPPED="ad-skipped",Wn.AD_VOLUME_CHANGED="ad-volume-changed",Wn.AD_MUTED="ad-muted",Wn.AD_PAUSED="ad-paused",Wn.AD_RESUMED="ad-resumed",Wn.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Wn.CUEPOINTS_CHANGED="ad-cue-points-changed",Wn.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Wn.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Wn.AD_CLICKED="ad-clicked",Wn.AD_PROGRESS="ad-progress",Wn.AD_BUFFERING="ad-buffering",Wn.AD_IMPRESSION="ad-impression",Wn.AD_DURATION_CHANGED="ad-duration-changed",Wn.AD_CLOSED="ad-closed",Wn.AD_LOADED="ad-loaded",Wn.ALL_ADS_COMPLETED="all-ads-completed",Wn.AD_LINEAR_CHANGED="ad-linear-changed",Wn.AD_METADATA="ad-metadata",Wn.AD_RECOVERABLE_ERROR="ad-recoverable-error",Wn.AD_ERROR="ad-error",Wn.AD_BREAK_READY="ad-break-ready",Wn.AD_INTERACTION="ad-interaction",Wn.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Wn.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Wn.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",xv=function(){return new Wn};function iN(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof jn){var r={};for(u in n)(t=n[u])&&typeof t=="object"?u=="detail"&&(r[u]=t):u in Event||(r[u]=t);return r}if(n instanceof Error){var u=new Set(["name","message","stack"]);for(r in n)u.add(r);for(r=g(Object.getOwnPropertyNames(n)),t=r.next();!t.done;t=r.next())u.add(t.value);for(r={},u=g(u),t=u.next();!t.done;t=u.next())t=t.value,r[t]=n[t];n={__type__:"Error",contents:r}}else if(n instanceof TimeRanges){for(u={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=g(gi(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,u.start.push(r.start),u.end.push(t);n=u}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function H1(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=p5(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function p5(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var oN="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),g5="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),V1=["loop","playbackRate"],m5=["pause","play"],Lv={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10,isFullyLoaded:1},kv={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},K1={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},aN=[["getConfiguration","configure"]],sN=[["isTextTrackVisible","setTextTrackVisibility"]],v5="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),y5=["attach","attachCanvas","detach","load","unload"];function z1(e,t,n,r,u,c,f){var h=this;this.G=e,this.K=f,this.l=new on(t),this.L=n,this.s=!1,this.A=r,this.F=u,this.N=c,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return Y1(h)},this.C=function(v,S){switch(v=H1(S),v.type){case"event":var R=v.targetName,B=Qh(v.event);h.A(R,B);break;case"update":R=v.update;for(B in R){v=h.g[B]||{};for(var z in R[B])v[z]=R[B][z]}h.s&&(h.L(),h.s=!1);break;case"asyncComplete":if(B=v.id,z=v.error,v=h.i[B],delete h.i[B],v)if(z){B=new Xe(z.severity,z.category,z.code);for(R in z)B[R]=z[R];v.reject(B)}else v.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,wp.add(this)}p=z1.prototype,p.destroy=function(){return wp.delete(this),W1(this),Rs&&lN(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},p.gb=function(){return this.h},p.Gf=function(){return this.I},p.init=function(){if(this.G.length)if(m.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.wc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=g(wp),r=n.next();!r.done;r=n.next()){r=r.value;var u=t;r.j=new Lr,r.s=!0,Fv(r,u)}},function(t){for(var n=g(wp),r=n.next();!r.done;r=n.next())r=r.value,Uv=t=="available",r.l.wc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Uv&&this.l.Z(_5),(e=Rs)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Lr,this.s=!0,Fv(this,e)):Rs=null}else m.__onGCastApiAvailable!==cN&&(Bv=m.__onGCastApiAvailable||null,m.__onGCastApiAvailable=cN)},p.Nf=function(e){this.o=e,this.h&&Sp(this,{type:"appData",appData:this.o})},p.cast=function(){var e=this;return Re(function(t){if(!e.m)throw new Xe(1,8,8e3);if(!Uv)throw new Xe(1,8,8001);if(e.h)throw new Xe(1,8,8002);return e.j=new Lr,chrome.cast.requestSession(function(n){return Fv(e,n)},function(n){return uN(e,n)}),C(t,e.j,0)})};function E5(e){e.h&&chrome.cast.requestSession(function(t){return Fv(e,t)},function(t){return uN(e,t)})}p.Fc=function(){if(this.h){if(W1(this),Rs){lN(this);try{Rs.stop(function(){},function(){})}catch(e){}Rs=null}Y1(this)}},p.get=function(e,t){var n=this;if(e=="video"){if(m5.includes(t))return function(){return n.Rg.apply(n,[e,t].concat(T(Ye.apply(0,arguments))))}}else if(e=="player"){if(K1[t]&&!this.get("player","isLive")())return function(){};if(v5.includes(t))return function(){return n.Rg.apply(n,[e,t].concat(T(Ye.apply(0,arguments))))};if(y5.includes(t))return function(){return n.Ii.apply(n,[e,t].concat(T(Ye.apply(0,arguments))))};if(Lv[t]||kv[t])return function(){return n.g[e][t]}}return this.g[e][t]},p.set=function(e,t,n){this.g[e][t]=n,Sp(this,{type:"set",targetName:e,property:t,value:n})};function Fv(e,t){var n=e.N();Rs=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),Y1(e),Sp(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function uN(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new Xe(2,8,n,t))}p.Rg=function(e,t){Sp(this,{type:"call",targetName:e,methodName:t,args:Ye.apply(2,arguments)})},p.Ii=function(e,t){var n=Ye.apply(2,arguments),r=new Lr,u=this.H.toString();this.H++,this.i[u]=r;try{Sp(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:u})}catch(c){r.reject(c)}return r};function lN(e){var t=Rs;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function Y1(e){var t=Rs?Rs.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};W1(e)}e.h=t,e.I=t?Rs.receiver.friendlyName:"",e.l.wc()}function W1(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new Xe(1,7,7e3))}}function Sp(e,t){t=iN(t);var n=Rs;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},lt)}catch(r){throw t=new Xe(2,8,8005,r),n=new jn("error",new Map().set("detail",t)),e.A("player",n),e.Fc(),t}}var _5=.02,Uv=!1,Rs=null,Bv=null,wp=new Set;function cN(e){if(Bv?m.__onGCastApiAvailable=Bv:delete m.__onGCastApiAvailable,Bv=null,e)for(var t=g(wp),n=t.next();!n.done;n=t.next())n.value.init();typeof m.__onGCastApiAvailable=="function"&&m.__onGCastApiAvailable(e)}function Oi(e,t,n,r){r=r===void 0?!1:r,Nr.call(this);var u=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new z1(n,function(){return hN(u)},function(){return pN(u)},function(c,f){return mN(u,c,f)},function(){return gN(u)},function(){return dN(u)},r),T5(this)}Y(Oi,Nr),p=Oi.prototype,p.destroy=function(e){return e&&this.g.Fc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Nr.prototype.release.call(this),Promise.all(e)},p.di=function(){return this.l},p.Th=function(){return this.s},p.yh=function(){return this.g.m&&Uv},p.gb=function(){return this.g.gb()},p.Gf=function(){return this.g.Gf()},p.cast=function(){var e=this;return Re(function(t){return t.g==1?C(t,e.g.cast(),2):e.h?C(t,e.h.ec(),0):t.return()})},p.Nf=function(e){this.g.Nf(e)},p.Yi=function(){E5(this.g)},p.Fc=function(){this.g.Fc()},p.zh=function(e,t){t=t===void 0?!1:t;var n=this;return Re(function(r){if(r.g==1)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.Fc(),C(r,n.g.destroy(),2));n.g=null,n.g=new z1(e,function(){return hN(n)},function(){return pN(n)},function(u,c){return mN(n,u,c)},function(){return gN(n)},function(){return dN(n)},t),n.g.init(),X(r)})};function T5(e){e.g.init(),e.m=new Tt;for(var t=g(oN),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(c){e.g.gb()||(c=Qh(c),e.j.dispatchEvent(c))});for(var r in $f)e.m.D(e.h,$f[r],function(c){e.g.gb()||e.o.dispatchEvent(c)});e.l={},t={};for(var u in e.i)t={kd:t.kd},t.kd=u,Object.defineProperty(e.l,t.kd,{configurable:!1,enumerable:!0,get:function(c){return function(){return w5(e,c.kd)}}(t),set:function(c){return function(f){var h=c.kd;e.g.gb()?e.g.set("video",h,f):e.i[h]=f}}(t)});e.s={},fN(e,function(c){Object.defineProperty(e.s,c,{configurable:!1,enumerable:!0,get:function(){return A5(e,c)}})}),S5(e),e.j=new Nr,e.j.oe=e.l,e.o=new Nr,e.o.oe=e.s}function S5(e){var t=new Map;fN(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function fN(e,t){function n(v){return v=="constructor"||typeof r[v]!="function"?!1:!u.has(v)}var r=e.h,u=new Set,c;for(c in r)n(c)&&(u.add(c),t(c,r[c]));for(e=Object.getPrototypeOf(r),c=Object.getPrototypeOf({});e&&e!=c;){for(var f=g(Object.getOwnPropertyNames(e)),h=f.next();!h.done;h=f.next())h=h.value,n(h)&&(u.add(h),t(h,r[h]));e=Object.getPrototypeOf(e)}}function dN(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Gc(),startTime:null};e.i.pause();for(var n=g(V1),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=g(aN),r=n.next();!r.done;r=n.next()){var u=r.value;r=u[1],u=e.h[u[0]](),t.player[r]=u}for(n=g(sN),r=n.next();!r.done;r=n.next())u=r.value,r=u[1],u=e.h[u[0]](),t.playerAfterLoad[r]=u;return t}function hN(e){var t=new jn("caststatuschanged");e.dispatchEvent(t)}function pN(e){var t=new jn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function gN(e){for(var t=g(aN),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var u=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var c=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var f;(r=e.g.get("player","getTextTracks")())&&r.length&&(f=r.find(function(S){return S.active}));var h=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var v={};for(n=g(V1),r=n.next();!r.done;r=n.next())r=r.value,v[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var S=g(V1),R=S.next();!R.done;R=S.next())R=R.value,e.i[R]=v[R];for(S=g(sN),R=S.next();!R.done;R=S.next()){var B=R.value;R=B[1],B=e.g.get("player",B[0])(),e.h[R](B)}e.h.ah(h),f&&e.h.Lf(f.language,f.roles,f.forced),e.i.autoplay=c,u&&e.i.play()}},function(S){S=new Map().set("detail",S),S=new jn("error",S),e.h.dispatchEvent(S)})}function w5(e,t){if(t=="addEventListener")return function(r,u,c){return e.j.addEventListener(r,u,c)};if(t=="removeEventListener")return function(r,u,c){return e.j.removeEventListener(r,u,c)};if(e.g.gb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.gb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function A5(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,u){return e.o.addEventListener(n,r,u)};if(t=="removeEventListener")return function(n,r,u){return e.o.removeEventListener(n,r,u)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.yb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.sg()};if(t=="setVideoContainer")return function(n){return e.h.fh(n)};if(e.g.gb()){if(t=="getManifest"||t=="drmInfo")return function(){return Ke(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return Ke(t+"() does not work while casting!"),Promise.resolve()}}return e.g.gb()&&Object.keys(e.g.g.video).length==0&&(Lv[t]||kv[t])||!e.g.gb()?e.h[t].bind(e.h):e.g.get("player",t)}function mN(e,t,n){e.g.gb()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}ne("shaka.cast.CastProxy",Oi),Oi.prototype.changeReceiverId=Oi.prototype.zh,Oi.prototype.forceDisconnect=Oi.prototype.Fc,Oi.prototype.suggestDisconnect=Oi.prototype.Yi,Oi.prototype.setAppData=Oi.prototype.Nf,Oi.prototype.cast=Oi.prototype.cast,Oi.prototype.receiverName=Oi.prototype.Gf,Oi.prototype.isCasting=Oi.prototype.gb,Oi.prototype.canCast=Oi.prototype.yh,Oi.prototype.getPlayer=Oi.prototype.Th,Oi.prototype.getVideo=Oi.prototype.di,Oi.prototype.destroy=Oi.prototype.destroy;function bo(e,t,n,r){Nr.call(this);var u=this;this.g=e,this.h=t,this.j=new Tt,this.H={video:e,player:t},this.F=n||function(){},this.I=r||function(c){return c},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.C=new on(function(){$1(u)}),I5(this)}Y(bo,Nr),p=bo.prototype,p.isConnected=function(){return this.G},p.ki=function(){return this.o},p.Ui=function(e){this.i=e},p.Bh=function(){this.i=null},p.Vi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},p.Ti=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},p.Si=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},p.destroy=function(){var e=this,t,n;return Re(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.C&&(e.C.stop(),e.C=null),e.g=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.s=null,Nr.prototype.release.call(e),C(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),X(r)})};function I5(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return vN(e)},t.onSenderDisconnected=function(){return vN(e)},t.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&ll(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),ll(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(u){return R5(e,u)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return b5(e,u)},t.start(),t=g(oN);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(u){return yN(e,"video",u)});for(var r in $f)e.j.D(e.h,$f[r],function(u){return yN(e,"player",u)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,gd(e)}),e.j.D(e.g,"playing",function(){e.o=!1,gd(e)}),e.j.D(e.g,"pause",function(){gd(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,gd(e)}),e.j.D(e.g,"ended",function(){new on(function(){e.g&&e.g.ended&&(e.o=!0,gd(e))}).Z(N5)})}function vN(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,gd(e)}function gd(e){var t;Re(function(n){if(n.g==1)return C(n,Promise.resolve(),2);if(!e.h)return n.return();t=new jn("caststatuschanged"),e.dispatchEvent(t),EN(e)||cl(e),X(n)})}function C5(e,t,n){var r,u,c,f,h,v,S,R,B,z;Re(function(J){switch(J.g){case 1:for(r in t.player)u=t.player[r],e.h[r](u);return e.F(n),c=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ce(J,5),C(J,e.h.load(t.manifest,t.startTime),7)):C(J,Promise.resolve(),3);case 7:me(J,3);break;case 5:return f=be(J),h=new Map().set("detail",f),v=new jn("error",h),e.h&&e.h.dispatchEvent(v),J.return();case 3:if(!e.h)return J.return();for(S in t.video)R=t.video[S],e.g[S]=R;for(B in t.playerAfterLoad)z=t.playerAfterLoad[B],e.h[B](z);e.g.autoplay=c,t.manifest&&(e.g.play(),cl(e)),X(J)}})}function yN(e,t,n){e.h&&($1(e),ll(e,{type:"event",targetName:t,event:n},e.l))}function $1(e){e.C.Z(x5);for(var t={video:{},player:{}},n=g(g5),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.U())for(var u in K1)e.m%K1[u]==0&&(t.player[u]=e.h[u]());for(var c in Lv)e.m%Lv[c]==0&&(t.player[c]=e.h[c]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),ll(e,{type:"update",update:t},e.l);for(var f in kv)e.m%kv[f]==0&&(t={player:{}},t.player[f]=e.h[f](),ll(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),EN(e)}function EN(e){return e.A&&(e.g.duration||e.h.U())?(X1(e),e.A=!1,!0):!1}function X1(e,t){var n={contentId:e.h.Gc(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),cl(e,t===void 0?0:t,n)}function b5(e,t){var n=H1(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,C5(e,n.initState,n.appData),$1(e);break;case"appData":e.F(n.appData);break;case"set":var r=n.targetName,u=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){t.setSystemVolumeLevel(n);break}else if(u=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][u]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,u=n.methodName,r=="player"&&u=="load"&&(e.m=0,e.B=!1);var c=n.id,f=t.senderId;t=e.H[r],n=t[u].apply(t,n.args),r=="player"&&u=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return _N(e,f,c,null)},function(h){return _N(e,f,c,h)})}}function R5(e,t){var n=H1(t.data);switch(n.type){case"PLAY":e.g.play(),cl(e);break;case"PAUSE":e.g.pause(),cl(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),cl(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),cl(e));break;case"STOP":e.h.ec().then(function(){e.h&&cl(e)});break;case"GET_STATUS":X1(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var u=e.g.volume,c=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),u==e.g.volume&&c==e.g.muted||cl(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,u=e.I(t.contentId),c=n.autoplay||!0,e.F(t.customData),c&&(e.g.autoplay=!0),e.h.load(u,r).then(function(){e.h&&X1(e)}).catch(function(f){var h="LOAD_FAILED";f.category==7&&f.code==7e3&&(h="LOAD_CANCELLED"),ll(e,{requestId:Number(n.requestId),type:h},e.s)});break;default:ll(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function _N(e,t,n,r){e.h&&ll(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function ll(e,t,n,r){e.G&&(e=iN(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function cl(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?M5:e.h.pf()?P5:e.g.paused?O5:D5,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),ll(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}ne("shaka.cast.CastReceiver",bo),bo.prototype.destroy=bo.prototype.destroy,bo.prototype.setContentArtist=bo.prototype.Si,bo.prototype.setContentImage=bo.prototype.Ti,bo.prototype.setContentTitle=bo.prototype.Vi,bo.prototype.clearContentMetadata=bo.prototype.Bh,bo.prototype.setContentMetadata=bo.prototype.Ui,bo.prototype.isIdle=bo.prototype.ki,bo.prototype.isConnected=bo.prototype.isConnected;var x5=.5,N5=5,M5="IDLE",D5="PLAYING",P5="BUFFERING",O5="PAUSED";function TN(e,t,n,r,u){if(r>=u)return null;for(var c=-1,f=-1,h=0;h<n.length;h++)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){c=h;break}for(h=n.length-1;0<=h;h--)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){f=h;break}if(c===-1||f===-1)return null;for(var v=h=!1,S="white",R="black",B=Q1(r,u,h,v,S,R);c<=f;c++){for(var z=n[c],J=-1,fe=-1,he=0;he<z.length;he++)if(z[he]!=null&&z[he].g.trim()!==""){J=he;break}for(he=z.length-1;0<=he;he--)if(z[he]!=null&&z[he].g.trim()!==""){fe=he;break}if(J===-1||fe===-1)z=SN(r,u),e.nestedCues.push(z);else{for(;J<=fe;J++)if(he=z[J]){var Ee=he.l,Le=he.i,Fe=he.j,it=he.h;(Ee!=h||Le!=v||Fe!=S||it!=R)&&(B.payload&&e.nestedCues.push(B),B=Q1(r,u,Ee,Le,Fe,it),h=Ee,v=Le,S=Fe,R=it),B.payload+=he.g}else B.payload+=" ";B.payload&&e.nestedCues.push(B),c!==f&&(B=SN(r,u),e.nestedCues.push(B)),B=Q1(r,u,h,v,S,R)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Q1(e,t,n,r,u,c){return e=new jr(e,t,""),n&&e.textDecoration.push(Vs),r&&(e.fontStyle=Su),e.color=u,e.backgroundColor=c,e}function SN(e,t){return e=new jr(e,t,""),e.lineBreak=!0,e}function wN(e,t,n,r,u){this.g=e,this.l=t,this.i=n,this.h=r,this.j=u}function J1(e,t){this.i=[],this.g=1,this.h=0,this.C=e,this.B=t,this.j=this.m=!1,this.l="white",this.o="black",this.s=this.A=null,Ap(this)}function jv(e,t,n){var r="CC"+((e.C<<1|e.B)+1),u=new jr(t,n,"");u.lineInterpretation=1;var c=CN.get(e.g);return c&&(u.line=c),e.s!=null&&e.A!=null&&(u.position=10+Math.min(70,10*e.s)+2.5*e.A),(t=TN(u,r,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(c=CN.get(e.g+3-t.cue.nestedCues.length))&&(u.line=c),t}function Ap(e){fl(e,0,15),e.g=1}function md(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case 0:r=IN.has(n)?IN.get(n):String.fromCharCode(n);break;case 1:r=L5.get(n);break;case 2:e.i[e.g].pop(),r=k5.get(n);break;case 3:e.i[e.g].pop(),r=F5.get(n)}r&&e.i[e.g].push(new wN(r,e.m,e.j,e.o,e.l))}}function AN(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(c){return c});else for(var u=0;u<r;u++)e.i[t+u]=e.i[n+u].map(function(c){return c})}function fl(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var IN=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),L5=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57," "],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),k5=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),F5=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),CN=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Zv(e,t){this.h=0,this.o=new J1(e,t),this.i=new J1(e,t),this.g=this.j=new J1(e,t),this.l=0,this.m=null}function e_(e,t,n){e.g=e.i;var r=e.g,u=null;return e.h!==3&&e.h!==4&&(u=jv(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,fl(n,0,15),n=e.j,n.g=0<n.h?n.h:0,fl(n,0,15),r.g=15),e.h=3,r.h=t,u}function bN(e){e.h=1,e.g=e.j,e.g.h=0}function RN(e){wt("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var U5="black green blue cyan red yellow magenta black".split(" "),xN="white green blue cyan red yellow magenta white_italics".split(" ");function t_(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",n_(this)}function n_(e){e.i=[];for(var t=0;16>t;t++)e.i.push(r_())}function r_(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function kc(e,t){NN(e)&&(e.i[e.h][e.g]=new wN(t,e.C,e.A,e.s,e.B),e.g++)}function NN(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}t_.prototype.isVisible=function(){return this.l};function Fc(e,t,n){var r=new jr(e.j,t,"");r.textAlign=e.F===0?"left":e.F===1?"right":Ca;var u=r.region;switch(e.I&&(u.id+="svc"+e.I),u.id+="win"+e.N,u.height=e.o,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.H,u.viewportAnchorY=e.L,u.viewportAnchorUnits=e.K?wn:2,e.G){case 0:u.regionAnchorX=0,u.regionAnchorY=0;break;case 1:u.regionAnchorX=50,u.regionAnchorY=0;break;case 2:u.regionAnchorX=100,u.regionAnchorY=0;break;case 3:u.regionAnchorX=0,u.regionAnchorY=50;break;case 4:u.regionAnchorX=50,u.regionAnchorY=50;break;case 5:u.regionAnchorX=100,u.regionAnchorY=50;break;case 6:u.regionAnchorX=0,u.regionAnchorY=100;break;case 7:u.regionAnchorX=50,u.regionAnchorY=100;break;case 8:u.regionAnchorX=100,u.regionAnchorY=100}return(n=TN(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}t_.prototype.display=function(){this.l=!0};function B5(){this.i=[],this.h=null,this.g=0}function j5(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new qv(e.h)),e.h=null,e.g=0))}function qv(e){this.g=0,this.h=e}qv.prototype.ra=function(){return this.g<this.h.length},qv.prototype.xa=function(){return this.g};function fo(e){if(!e.ra())throw new Xe(2,2,3e3);return e.h[e.g++]}qv.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Xe(2,2,3e3);this.g+=e};function Z5(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function q5(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=fo(t).value,t=null,n=g(Ip(e,n));for(var u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Fc(u,r,e.i)),n_(u);return t}if(n===137)for(t=fo(t).value,t=g(Ip(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.display();else{if(n===138){for(n=fo(t).value,t=null,n=g(Ip(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Fc(u,r,e.i)),u.l=!1;return t}if(n===139){for(n=fo(t).value,t=null,n=g(Ip(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()?t=Fc(u,r,e.i):u.j=r,u.l=!u.l;return t}if(n===140)return t=fo(t).value,MN(e,t,r);if(n===143)return r=MN(e,255,r),DN(e),r;if(n===144)t.skip(1),r=fo(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=fo(t).value,n=fo(t).value,t.skip(1),e.g&&(t=PN((n&48)>>4,(n&12)>>2,n&3),e.g.B=PN((r&48)>>4,(r&12)>>2,r&3),e.g.s=t);else if(n===146)r=fo(t).value,t=fo(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=fo(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,u=e.h[n]!==null,!u){var c=new t_(n,e.i);c.j=r,e.h[n]=c}r=fo(t).value,c=fo(t).value;var f=fo(t).value,h=fo(t).value,v=fo(t).value;t=fo(t).value,u&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(r&32),t.L=c&127,t.H=f,t.G=(h&240)>>4,t.K=0<(c&128),t.o=(h&15)+1,t.m=(v&63)+1,e.g=e.h[n]}}}return null}function Ip(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function MN(e,t,n){var r=null;t=g(Ip(e,t));for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=e.h[u];c.isVisible()&&(r=Fc(c,n,e.i)),e.h[u]=null}return r}function DN(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function PN(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],G5[e<<2|t<<1|n]}var ON=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),G5="black blue green cyan red magenta yellow white".split(" ");function vd(){this.h=[],this.g=[],this.i=new B5,this.l=0,this.m=new Map([["CC1",new Zv(0,0)],["CC2",new Zv(0,1)],["CC3",new Zv(1,0)],["CC4",new Zv(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,i_(this)}vd.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,i_(this),e=g(this.j.values());for(var t=e.next();!t.done;t=e.next())DN(t.value)};function i_(e){e.o=0,e.s=0;for(var t=g(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Ap(n.i),Ap(n.j),Ap(n.o);e.B=!0}vd.prototype.extract=function(e,t){if(this.B){for(var n=g(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new k(e,0),!(8>e.getLength())&&e.S()===181&&e.la()===49&&e.P()===1195456820&&e.S()===3&&(n=e.S(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var u=e.S(),c=(u&4)>>2,f=e.S(),h=e.S();c&&(u&=3,u===0||u===1?this.h.push({pts:t,type:u,cb:f,Cb:h,order:this.h.length}):(this.g.push({pts:t,type:u,value:f,order:this.g.length}),this.g.push({pts:t,type:2,value:h,order:this.g.length})))}},vd.prototype.decode=function(){function e(u,c){return u.pts-c.pts||u.order-c.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=g(this.h),r=n.next();!r.done;r=n.next())(r=H5(this,r.value))&&t.push(r);for(n=g(this.g),r=n.next();!r.done;r=n.next())j5(this.i,r.value);for(n=g(this.i.i),r=n.next();!r.done;r=n.next())r=V5(this,r.value),t.push.apply(t,T(r));return this.i.i=[],this.h=[],this.g=[],t};function H5(e,t){var n=t.type;if((t.cb&112)===16){var r=t.cb>>3&1;n===0?e.o=r:e.s=r}if(r="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(r),t.cb===255&&t.Cb===255||!t.cb&&!t.Cb||!LN(t.cb)||!LN(t.Cb))return 45<=++e.l&&i_(e),null;e.l=0,t.cb&=127,t.Cb&=127;var u=t.cb;if(1<=u&&15>=u||!t.cb&&!t.Cb)return null;if(u=null,(t.cb&112)===16)e:{if(e.A.add(r),r=t.cb,e=t.Cb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1],r="white",u=!1;var c=null,f=95<e?e-96:e-64;13>=f?r=xN[Math.floor(f/2)]:15>=f?u=!0:c=Math.floor((f-16)/2),e=(e&1)===1,n.h!==4&&(f=n.g,n.h===3&&t!==f.g&&(n=1+t-f.h,AN(f,n,1+f.g-f.h,f.h),fl(f,0,n-1),fl(f,t+1,15-t)),f.g=t,f.m=e,f.j=u,f.l=r,f.s=c,f.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",md(n.g,0,32),r=!1,t=xN[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",!(r&7)&&(t=U5[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)md(n.g,1,e);else if((r&246)===18&&(e&224)===32)md(n.g,r&1?3:2,e);else{if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.Cb){case 32:bN(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=e_(n,2,e);break;case 38:r=e_(n,3,e);break;case 39:r=e_(n,4,e);break;case 40:md(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Ap(n.o),RN(n);break;case 43:RN(n);break;case 44:t=n.i,r=null,n.h!==4&&(r=jv(t,n.l,e)),fl(t,0,15);break;case 45:t=n.g,n.h!==3?r=null:(r=jv(t,n.l,e),u=t.g-t.h+1,AN(t,u-1,u,t.h),fl(t,0,u-1),fl(t,t.g,15-t.g),n.l=e);break;case 46:fl(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=jv(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,bN(n),n.l=e,r=t}u=r;break e}(r==23||r==31)&&33<=e&&35>=e&&(n.g.A=e-32)}u=null}else e=t.Cb,md(n.g,0,t.cb),md(n.g,0,e);return u}function V5(e,t){var n=[];try{for(;t.ra();){var r=fo(t).value,u=(r&224)>>5,c=r&31;if(u===7&&c!=0&&(u=fo(t).value&63),u!=0){e.A.add("svc"+u),e.j.has(u)||e.j.set(u,new Z5(u));for(var f=e.j.get(u),h=t.xa();t.xa()-h<c;){u=f;var v=t,S=fo(v),R=S.value,B=S.pts;if(R===16){var z=fo(v);R=R<<16|z.value}if(0<=R&&31>=R){v=u;var J=R,fe=B;if(v.g){var he=v.g;switch(u=null,J){case 8:!NN(he)||0>=he.g&&0>=he.h||(0>=he.g?(he.g=he.m-1,he.h--):he.g--,he.i[he.h][he.g]=null);break;case 13:if(he.isVisible()&&(u=Fc(he,fe,v.i)),he.h+1>=he.o){for(v=he,J=0,fe=1;16>fe;fe++,J++)v.i[J]=v.i[fe];for(fe=0;1>fe;fe++,J++)v.i[J]=r_()}else he.h++;he.g=0;break;case 14:he.isVisible()&&(u=Fc(he,fe,v.i)),he.i[he.h]=r_(),he.g=0;break;case 12:he.isVisible()&&(u=Fc(he,fe,v.i)),n_(he),v=he,v.h=0,v.g=0}var Ee=u}else Ee=null}else if(128<=R&&159>=R)Ee=q5(u,v,R,B);else{if(4096<=R&&4127>=R)u=v,v=R&255,8<=v&&15>=v?u.skip(1):16<=v&&23>=v?u.skip(2):24<=v&&31>=v&&u.skip(3);else if(4224<=R&&4255>=R)u=v,v=R&255,128<=v&&135>=v?u.skip(4):136<=v&&143>=v&&u.skip(5);else if(32<=R&&127>=R)v=R,u.g&&(v===127?kc(u.g,""):kc(u.g,String.fromCharCode(v)));else if(160<=R&&255>=R)u.g&&kc(u.g,String.fromCharCode(R));else if(4128<=R&&4223>=R){if(v=R&255,u.g)if(ON.has(v)){var Le=ON.get(v);kc(u.g,Le)}else kc(u.g,"_")}else 4256<=R&&4351>=R&&u.g&&((R&255)!=160?kc(u.g,"_"):kc(u.g,"[CC]"));Ee=null}(u=Ee)&&n.push(u)}}}}catch(Fe){if(Fe instanceof Xe&&Fe.code===3e3)wt("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Fe}return n}function LN(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}vd.prototype.getStreams=function(){return Array.from(this.A)},ne("shaka.cea.CeaDecoder",vd),Ot=function(){return new vd};function kN(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(T(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var u=0;e[r]==255;)u+=255,r++;u+=e[r++],n==4&&t.push(e.subarray(r,r+u)),r+=u}return t}function Gv(){this.j=new Map,this.i=this.h=0,this.g=o_}Gv.prototype.init=function(e){function t(c){c=c.name,c in Hv&&(n.g=Hv[c])}var n=this,r=[],u=[];if(new V().box("moov",W).box("mvex",W).R("trex",function(c){var f=c.reader;f.skip(4),f.skip(4),c=f.P(),f=f.P(),n.h=c,n.i=f}).box("trak",W).R("tkhd",function(c){var f=c.reader;c=c.version,c==1?(f.skip(8),f.skip(8)):(f.skip(4),f.skip(4));var h=f.P();c==1?f.skip(8):f.skip(4),f.skip(4),f.skip(8),f.skip(2),f.skip(2),f.skip(2),f.skip(2),f.skip(36),f.la(),f.la(),f.la(),f.la(),r.push(h)}).box("mdia",W).R("mdhd",function(c){c=$a(c.reader,c.version),u.push(c.timescale)}).box("minf",W).box("stbl",W).R("stsd",ee).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",H).box("sinf",W).box("frma",function(c){c=Zl(c.reader).codec,c in Hv&&(n.g=Hv[c])}).parse(e,!0),!r.length||!u.length||r.length!=u.length)throw new Xe(2,2,2010);this.g==o_&&Ke("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(c,f){n.j.set(c,u[f])})},Gv.prototype.parse=function(e){var t=this;if(this.g==o_)return[];var n=[],r=0,u=[];return new V().box("moof",function(c){r=c.start,u=[],W(c)}).box("traf",function(c){u.push({baseMediaDecodeTime:null,Zc:t.h,Fd:t.i,Mg:[],timescale:9e4}),W(c)}).R("trun",function(c){var f=u[u.length-1];c=bu(c.reader,c.version,c.flags),f.Mg.push(c)}).R("tfhd",function(c){var f=u[u.length-1];c=bs(c.reader,c.flags),f.Zc=c.Zc||t.h,f.Fd=c.Fd||t.i,c=c.trackId,t.j.has(c)&&(f.timescale=t.j.get(c))}).R("tfdt",function(c){var f=u[u.length-1];c=To(c.reader,c.version),f.baseMediaDecodeTime=c.baseMediaDecodeTime}).box("mdat",function(c){for(var f=r-c.start-8,h=c.reader.xa(),v=g(u),S=v.next();!S.done;S=v.next()){if(S=S.value,S.baseMediaDecodeTime===null)throw Ke("Unable to find base media decode time for CEA captions!"),new Xe(2,2,2010);c.reader.seek(h),K5(t,c.reader,S.baseMediaDecodeTime,S.timescale,S.Zc,S.Fd,f,S.Mg,n)}}).parse(e,!1),n};function K5(e,t,n,r,u,c,f,h,v){var S=0,R=c,B=h.map(function(fe){return fe.Tg});for(B=[].concat.apply([],T(B)),B.length&&(R=B[0].sampleSize||c),t.skip(f+h[0].Dh);t.ra();){f=t.P();var z=t.S(),J=null;switch(J=!1,h=1,e.g){case Cp:J=z&31,J=J==6;break;case bp:h=2,t.skip(1),J=z>>1&63,J=J==39||J==40;break;case Rp:h=2,t.skip(1),J=z>>1&63,J=J==23||J==24;break;default:return}if(J)for(z=0,S<B.length&&(z=B[S].ke||0),z=(n+z)/r,h=g(kN(t.rb(f-h))),J=h.next();!J.done;J=h.next())v.push({packet:J.value,pts:z});else try{t.skip(f-h)}catch(fe){break}R-=f+4,R==0&&(n=S<B.length?n+(B[S].Kf||u):n+u,S++,S<B.length?R=B[S].sampleSize||c:R=c)}}ne("shaka.cea.Mp4CeaParser",Gv);var o_=0,Cp=1,bp=2,Rp=3,Hv={avc1:Cp,avc3:Cp,dvav:Cp,dva1:Cp,hev1:bp,hvc1:bp,dvh1:bp,dvhe:bp,vvc1:Rp,vvi1:Rp,dvc1:Rp,dvi1:Rp};Xt["video/mp4"]=function(){return new Gv};function Vv(){this.g=null}Vv.prototype.init=function(){},Vv.prototype.parse=function(e){this.g?this.g.clearData():this.g=new kr;var t=[];if(e=nr(e),!op(e))return t;e=this.g.parse(e);var n=e.$c(),r=e.Md();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=g(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var u=g(kN(r.data)),c=u.next();!c.done;c=u.next())t.push({packet:c.value,pts:r.time});return t},ne("shaka.cea.TsCeaParser",Vv),Xt["video/mp2t"]=function(){return new Vv};function FN(e,t,n){var r=X5(e),u=null;e=[];var c=[],f=null,h=new Set(r.map(function(S){return S.keyId}));h.delete(null);var v="cenc";if(1<h.size)throw new Xe(2,4,4010);if(!t){if(c=r.filter(function(S){return S.Qc=="urn:mpeg:dash:sea:2012"}),1<c.length)throw new Xe(2,4,4050);c.length&&(f=J5(c[0])),(c=r.find(function(S){return S.Qc=="urn:mpeg:dash:mp4protection:2011"}))&&c.encryptionScheme&&(v=c.encryptionScheme),c=r.filter(function(S){return S.Qc=="urn:mpeg:dash:mp4protection:2011"?(u=S.init||u,!1):S.Qc!="urn:mpeg:dash:sea:2012"}),c.length&&(e=$5(u,v,c,n,h),e.length==0&&(e=[ws("",v,u)]))}if(r.length&&!f&&(t||!c.length))for(e=[],t=g(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(ws(n,v,u));if(h=Array.from(h)[0]||null)for(v=g(e),t=v.next();!t.done;t=v.next())for(t=g(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=h;return{mg:h,ek:u,drmInfos:e,Fe:f,rg:!0}}function z5(e,t,n,r){var u=FN(e,n,r);if(t.rg)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=u.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=u.drmInfos),t.rg=!1;else if(0<u.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(c){return u.drmInfos.some(function(f){return f.keySystem==c.keySystem})}),t.drmInfos.length==0))throw new Xe(2,4,4008);return u.mg||t.mg}function Y5(e){var t=0,n=ln(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=nr(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function W5(e){e=g(Eo(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=g(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return ei(n)}return""}function Kv(e){var t=Vi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ei(t))?t:(e=Vi(e.node,"urn:microsoft:playready","pro"),!e||!ei(e)||(e=ei(e),e=Wo(e),e=Y5(e).filter(function(n){return n.type===e6})[0],!e)?"":(e=ci(e.value,!0),(e=Tu(e,"WRMHEADER"))?W5(e):""))}function $5(e,t,n,r,u){var c=[];n=g(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var h=r[f.Qc];if(h){var v;if((v=Vi(f.node,"urn:microsoft:playready","pro"))&&ei(v)){v=ei(v),v=Wo(v);var S=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);v=[{initData:Oe(v,S,new Set,0),initDataType:"cenc",keyId:f.keyId}]}else v=null;if(S=null,f.Qc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){S=f;var R=u;if(R.size==0)S=null;else{var B=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),z=new Uint8Array([]);S=[{initData:Oe(z,B,R,1),initDataType:"cenc",keyId:S.keyId}]}}v=ws(h,t,f.init||e||v||S),(h=t6.get(h))&&(v.licenseServerUri=h(f)),c.push(v)}}return c}function X5(e){var t=[];e=g(e);for(var n=e.next();!n.done;n=e.next())(n=Q5(n.value))&&t.push(n);return t}function Q5(e){var t=e.attributes.schemeIdUri,n=Po(e,"urn:mpeg:cenc:2013","default_KID"),r=yc(e,"urn:mpeg:cenc:2013","pssh").map(Io),u=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new Xe(2,4,4009);var c=[];try{c=r.map(function(f){return{initDataType:"cenc",initData:Wo(f),keyId:null}})}catch(f){throw new Xe(2,4,4007)}return{node:e,Qc:t,keyId:n,init:0<c.length?c:null,encryptionScheme:u}}function J5(e){if(!m.crypto||!m.crypto.subtle)throw Ke("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Xe(2,4,4042);var t=Vi(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new Xe(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new Xe(2,4,4051);if(t=Vi(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new Xe(2,4,4051);if(e=t.attributes.IV,t=yi(t.attributes.keyUriTemplate),!e||!t)throw new Xe(2,4,4051);if(e=$u(e.substr(2)),e.byteLength!=16)throw new Xe(2,4,4048);return{pi:t,iv:e}}var e6=1,t6=new Map().set("com.widevine.alpha",function(e){var t=Vi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ei(t))?t:(e=Vi(e.node,"urn:microsoft","laurl"))&&yi(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Kv).set("com.microsoft.playready.recommendation",Kv).set("com.microsoft.playready.software",Kv).set("com.microsoft.playready.hardware",Kv).set("org.w3.clearkey",function(e){var t=Vi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ei(t))?t:(e=Vi(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=ei(e))?e:""});function xp(e,t,n,r,u,c){var f={RepresentationID:t,Number:n,SubNumber:r,Bandwidth:u,Time:c};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(h,v,S,R){if(h=="$$")return"$";var B=f[v];if(B==null)return h;switch(v=="RepresentationID"&&S&&(S=void 0),v=="Time"&&typeof B!="bigint"&&(.2<=Math.abs(B-Math.round(B))&&Ke("Calculated $Time$ values must be close to integers"),B=Math.round(B)),R){case void 0:case"d":case"i":case"u":h=B.toString();break;case"o":h=B.toString(8);break;case"x":h=B.toString(16);break;case"X":h=B.toString(16).toUpperCase();break;default:h=B.toString()}return S=m.parseInt(S,10)||1,Array(Math.max(0,S-h.length)+1).join("0")+h})}function UN(e,t){var n=xs(e,t,"timescale"),r=1;n&&(r=Gs(n)||1),n=xs(e,t,"duration"),(n=Gs(n||""))&&(n/=r);var u=xs(e,t,"startNumber"),c=Number(xs(e,t,"presentationTimeOffset"))||0,f=lo(u||"");if((u==null||f==null)&&(f=1),u=null,t=yd(e,t,"SegmentTimeline")){t=sr(t,"S"),u=r,e=e.ha.duration||1/0;for(var h=f,v=[],S=-c,R=0;R<t.length;++R){var B=t[R],z=t[R+1],J=Er(B,"t",lo),fe=Er(B,"d",lo),he=Er(B,"r",Ec);if(B=Er(B,"k",Ec)||0,J!=null&&(J-=c),fe){if(J=J!=null?J:S,he=he||0,0>he)if(z){if(z=Er(z,"t",lo),z==null)break;if(J>=z)break;he=Math.ceil((z-J)/fe)-1}else{if(e==1/0)break;if(J/u>=e)break;he=Math.ceil((e*u-J)/fe)-1}for(0<v.length&&J!=S&&(v[v.length-1].end=J/u),z=0;z<=he;++z)S=J+fe,v.push({start:J/u,end:S/u,Zf:J,Ab:B,Qi:v.length+h}),J=S}}u=v}return{timescale:r,Ma:n,td:f,Ob:c/r||0,Yf:c,timeline:u}}function BN(e,t){return[t(e.J),t(e.ia),t(e.na)].filter(Ys)}function xs(e,t,n){t=BN(e,t),e=null,t=g(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function yd(e,t,n){t=BN(e,t),e=null,t=g(t);for(var r=t.next();!r.done&&!(e=Hi(r.value,n));r=t.next());return e}function n6(e,t,n,r,u,c){for(var f=Po(e,"http://www.w3.org/1999/xlink","href"),h=Po(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",v=g(Object.keys(e.attributes)),S=v.next();!S.done;S=v.next()){S=S.value;var R=S.split(":"),B=Hu("http://www.w3.org/1999/xlink");R[0]==B&&delete e.attributes[S]}if(5<=c)return Ws(new Xe(2,4,4028));if(h!="onLoad")return Ws(new Xe(2,4,4027));var z=Ki([r],[f]);return u.request(0,Bi(z,t)).Aa(function(J){if(J=_u(J.data,e.tagName),!J)return Ws(new Xe(2,4,4001,f));for(e.children=[];J.children.length;){var fe=J.children.shift();e.children.push(fe)}fe=g(Object.keys(J.attributes));for(var he=fe.next();!he.done;he=fe.next())he=he.value,e.attributes[he]=J.attributes[he];return zv(e,t,n,z[0],u,c+1)})}function zv(e,t,n,r,u,c){if(c=c===void 0?0:c,Po(e,"http://www.w3.org/1999/xlink","href")){var f=n6(e,t,n,r,u,c);return n&&(f=f.Aa(void 0,function(){return zv(e,t,n,r,u,c)})),f}f=[];for(var h=g(vf(e)),v=h.next(),S={};!v.done;S={Vc:void 0},v=h.next())S.Vc=v.value,Po(S.Vc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(R){return function(B){return B!==R.Vc}}(S)):S.Vc.tagName!="SegmentTimeline"&&f.push(zv(S.Vc,t,n,r,u,c));return Hm(f).Aa(function(){return e})}function r6(e,t,n,r,u,c,f){var h,v=new V().R("sidx",function(S){h=i6(t,r,u,c,f,n,S)});if(e&&v.parse(e),h)return h;throw new Xe(2,3,3004)}function i6(e,t,n,r,u,c,f){var h=[];f.reader.skip(4);var v=f.reader.P();if(v==0)throw new Xe(2,3,3005);if(f.version==0)var S=f.reader.P(),R=f.reader.P();else S=f.reader.Pc(),R=f.reader.Pc();f.reader.skip(2);var B=f.reader.la();for(e=e+f.size+R,R=0;R<B;R++){var z=f.reader.P(),J=(z&2147483648)>>>31;z&=2147483647;var fe=f.reader.P();if(f.reader.skip(4),J==1)throw new Xe(2,3,3006);h.push(new et(S/v+n,(S+fe)/v+n,function(){return c},e,e+z-1,t,n,r,u)),S+=fe,e+=z}return f.parser.stop(),h}function Gl(e){this.h=ln(e),this.g=new k(this.h,0)}Gl.prototype.ra=function(){return this.g.ra()};function dl(e){var t=jN(e);if(7<t.length)throw new Xe(2,3,3002);var n=0;t=g(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=jN(e);e:{r=g(o6);for(var u=r.next();!u.done;u=r.next())if(no(t,new Uint8Array(u.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.xa();else{if(t.length==8&&t[1]&224)throw new Xe(2,3,3001);for(u=r=0;u<t.length;u++){var c=t[u];r=u==0?c&(1<<8-t.length)-1:256*r+c}t=r}return t=e.g.xa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.xa(),r=ln(e.h,e.g.xa(),t),e.g.skip(t),new a6(n,r)}function jN(e){var t=e.g.xa(),n=e.g.S();if(n==0)throw new Xe(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),nr(e.h,t,n)}var o6=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function a6(e,t){this.id=e,this.g=t}function a_(e){if(8<e.g.byteLength)throw new Xe(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new Xe(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function s6(e,t,n,r,u,c,f,h,v){function S(){return u}var R=[];e=new Gl(e.g);for(var B=null,z=null;e.ra();){var J=dl(e);if(J.id==187){var fe=u6(J);fe&&(J=n*fe.bj,fe=t+fe.Gi,B!=null&&R.push(new et(B+f,J+f,S,z,fe-1,c,f,h,v)),B=J,z=fe)}}return B!=null&&R.push(new et(B+f,r+f,S,z,null,c,f,h,v)),R}function u6(e){var t=new Gl(e.g);if(e=dl(t),e.id!=179)throw new Xe(2,3,3013);if(e=a_(e),t=dl(t),t.id!=183)throw new Xe(2,3,3012);t=new Gl(t.g);for(var n=0;t.ra();){var r=dl(t);if(r.id==241){n=a_(r);break}}return{bj:e,Gi:n}}function ZN(e,t,n){if(t=yd(e,t,"Initialization"),!t)return null;var r=e.J.Ja(),u=t.attributes.sourceURL;u&&(r=Ki(r,[yi(u)],e.lb())),u=0;var c=null;return(t=Er(t,"range",yf))&&(u=t.start,c=t.end),n=new Dn(function(){return r},u,c,VN(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function l6(e,t,n){var r=Number(xs(e,Ed,"presentationTimeOffset"))||0,u=xs(e,Ed,"timescale"),c=1;u&&(c=Gs(u)||1);var f=r/c||0,h=ZN(e,Ed,n);c6(e,h);var v=Es(e);return{kc:function(){var S=yd(v,Ed,"RepresentationIndex"),R=v.J.Ja();return S&&(S=yi(S.attributes.sourceURL))&&(R=Ki(R,[S],v.lb())),S=GN(v),qN(v,t,h,R,S.start,S.end,f)}}}function qN(e,t,n,r,u,c,f){var h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt;return Re(function(kt){if(kt.g==1)return h=e.presentationTimeline,v=!e.wb||!e.ha.qf,S=e.ha.start,R=e.ha.duration,B=e.J.mimeType.split("/")[1],z=t,J=null,fe=[z(r,u,c,!1),B=="webm"?z(n.M(),n.Ha,n.va,!0):null],z=null,C(kt,Promise.all(fe),2);if(he=kt.h,Ee=he[0],Le=he[1]||null,Fe=null,it=S-f,Ue=S,Qe=R?S+R:1/0,B=="mp4")var It=r6(Ee,u,r,n,it,Ue,Qe);else{It=Ee;var Ut=new Gl(Le);if(dl(Ut).id!=440786851)throw new Xe(2,3,3008);var Nt=dl(Ut);if(Nt.id!=408125543)throw new Xe(2,3,3009);Ut=Nt.g.byteOffset,Nt=new Gl(Nt.g);for(var nn=null;Nt.ra();){var Kt=dl(Nt);if(Kt.id==357149030){nn=Kt;break}}if(!nn)throw new Xe(2,3,3010);for(nn=new Gl(nn.g),Kt=1e6,Nt=null;nn.ra();){var $t=dl(nn);if($t.id==2807729)Kt=a_($t);else if($t.id==17545)if($t.g.byteLength==4)Nt=$t.g.getFloat32(0);else if($t.g.byteLength==8)Nt=$t.g.getFloat64(0);else throw new Xe(2,3,3003)}if(Nt==null)throw new Xe(2,3,3011);if(nn=Kt/1e9,Nt*=nn,It=dl(new Gl(It)),It.id!=475249515)throw new Xe(2,3,3007);It=s6(It,Ut,nn,Nt,r,n,it,Ue,Qe)}for(Fe=It,rt=g(Fe),dt=rt.next();!dt.done;dt=rt.next())gt=dt.value,gt.codecs=e.J.codecs,gt.mimeType=e.J.mimeType,gt.bandwidth=e.bandwidth;return h.qd(Fe),J=new Mr(Fe),v&&J.Ec(Ue,Qe,!0),kt.return(J)})}function Ed(e){return e.Sc}function GN(e){var t=yd(e,Ed,"RepresentationIndex");return e=xs(e,Ed,"indexRange"),e=yf(e||""),t&&(e=Er(t,"range",yf,e)),e}function c6(e,t){if(HN(e,t),!GN(e))throw new Xe(2,4,4002)}function HN(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=_r&&n!="mp4"&&n!="webm")throw new Xe(2,4,4006);if(n=="webm"&&!t)throw new Xe(2,4,4005)}function VN(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.$d,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ia.label||null,roles:e.roles||null,language:e.ia.language||null}}function f6(e,t,n){var r=ZN(e,KN,n),u=d6(e);if(!u.Ma&&!u.timeline&&1<u.Lc.length)throw new Xe(2,4,4002);if(!u.Ma&&!e.ha.duration&&!u.timeline&&u.Lc.length==1)throw new Xe(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new Xe(2,4,4002);var c=null,f=null;e.na.id&&e.J.id&&(f=t[e.na.id+","+e.J.id])&&(c=f.segmentIndex);var h=h6(e.ha.start,e.ha.duration,e.J.Ja,u,r,n,e.J.mimeType,e.J.codecs,e.bandwidth,e.lb);return t=!c,c?c.od(h,e.presentationTimeline.nb()):c=new Mr(h),e.presentationTimeline.qd(h),e.wb&&e.ha.qf||c.Ec(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),f&&(f.segmentIndex=c),{kc:function(){return c&&c.getNumReferences()!=0||c.Wd(h),Promise.resolve(c)}}}function KN(e){return e.Qb}function d6(e){var t=p6(e);e=UN(e,KN);var n=e.td;n==0&&(n=1);var r=0;return e.Ma?r=e.Ma*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{Ma:e.Ma,startTime:r,td:n,Ob:e.Ob,timeline:e.timeline,Lc:t}}function h6(e,t,n,r,u,c,f,h,v,S){var R=r.Lc.length;r.timeline&&r.timeline.length!=r.Lc.length&&(R=Math.min(r.timeline.length,r.Lc.length));for(var B=e-r.Ob,z=t?e+t:1/0,J=[],fe=r.startTime,he={},Ee=0;Ee<R;he={se:void 0,le:void 0},Ee++){he.le=r.Lc[Ee];var Le=fe;fe=void 0,fe=r.Ma!=null?Le+r.Ma:r.timeline?r.timeline[Ee].end:Le+t,he.se=null,he=new et(e+Le,e+fe,function(Fe){return function(){return Fe.se==null&&(Fe.se=Ki(n(),[Fe.le.wi],S())),Fe.se}}(he),he.le.start,he.le.end,u,B,e,z,[],"",null,null,Ve,c),he.codecs=h,he.mimeType=f,he.bandwidth=v,J.push(he)}return J}function p6(e){return[e.J.Qb,e.ia.Qb,e.na.Qb].filter(Ys).map(function(t){return sr(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.lf&&(e.lf=!0);var n=yi(t.attributes.media);return t=Er(t,"mediaRange",yf,{start:0,end:null}),{wi:n,start:t.start,end:t.end}})}function zN(e,t,n,r,u,c,f,h,v){v||e.J.Pd||(e.J.Pd=xs(e,Hl,"initialization"));var S=e.J.Pd?y6(e,f):null,R=g6(e);m6(R);var B=Es(e);if(R.gd)return HN(e,S),{kc:function(){var Ee=xp(R.gd,B.J.id,null,null,B.bandwidth||null,null);return Ee=Ki(B.J.Ja(),[Ee]),qN(B,t,S,Ee,0,null,R.Ob)}};if(R.Ma)return r||e.ia.contentType==="image"||(n=e.ha.start,r=e.na.id,v=e.ha.duration,r=(r=r!=null&&c[r]||v)?n+r:1/0,e.presentationTimeline.yf(R.Ma),e.presentationTimeline.Kg(n,r)),{kc:function(){return v6(B,R,u,S,c,f,h,e.J.me)}};var z=null;r=r=null,e.na.id&&e.J.id&&(r=e.na.id+","+e.J.id,r=n[r])&&(z=r.segmentIndex);var J=e.ha.start,fe=e.ha.duration?J+e.ha.duration:1/0,he=!(e.wb&&e.ha.qf);return z?(n=z,YN(n,R,J,fe,he,S),n.Ga(e.presentationTimeline.nb())):z=new Yv(R,e.J.id,e.bandwidth,e.J.Ja,e.lb,J,fe,S,he,f,e.J.me),R.timeline&&e.ia.contentType!=="image"&&e.presentationTimeline.Lg(R.timeline,J),r&&e.wb&&(r.segmentIndex=z),{kc:function(){return z instanceof Yv&&z.getNumReferences()==0&&YN(z,R,J,fe,he,S),Promise.resolve(z)}}}function Hl(e){return e.cc}function g6(e){var t=UN(e,Hl),n=xs(e,Hl,"media"),r=xs(e,Hl,"index"),u=xs(e,Hl,"k"),c=0;return u&&(c=parseInt(u,10)),{Ma:t.Ma,timescale:t.timescale,td:t.td,Ob:t.Ob,Yf:t.Yf,timeline:t.timeline,ac:n&&yi(n),gd:r,mimeType:e.J.mimeType,codecs:e.J.codecs,bandwidth:e.bandwidth,xi:c}}function m6(e){var t=e.gd?1:0;if(t+=e.timeline?1:0,t+=e.Ma?1:0,t==0)throw new Xe(2,4,4002);if(t!=1&&(e.gd&&(e.timeline=null),e.Ma=null),!e.gd&&!e.ac)throw new Xe(2,4,4002)}function v6(e,t,n,r,u,c,f,h){function v(nn){var Kt=(nn-Ee)*he,$t=Kt+t.Ob,En=Kt+z;Kt=En+he;var An=Math.min(Kt,R()),Vn=[],Qn=t.xi;if(Qn)for(var ar=(An-En)/Qn,Ar={},Qr=0;Qr<Qn;Ar={hh:void 0},Qr++){var Yr=En+ar*Qr,Si=Yr+ar;Ar.hh=Qr+1,Ar=new et(Yr,Si,function(Pr){return function(){var Fr=$t*Le;return"BigInt"in m&&Fr>Number.MAX_SAFE_INTEGER&&(Fr=BigInt($t)*BigInt(Le)),Fr=xp(Fe,Ue,nn,Pr.hh,it,Fr),Ki(Qe(),[Fr],rt())}}(Ar),0,null,r,dt,z,R(),[],"",null,null,Ve,c),Ar.codecs=e.J.codecs,Ar.mimeType=e.J.mimeType,h==0?0<Qr&&Ar.Jc():Qr%h!=0&&Ar.Jc(),Vn.push(Ar)}return En=new et(En,An,function(){if(Qn)return[];var Pr=$t*Le;return"BigInt"in m&&Pr>Number.MAX_SAFE_INTEGER&&(Pr=BigInt($t)*BigInt(Le)),Pr=xp(Fe,Ue,nn,null,it,Pr),Ki(Qe(),[Pr],rt())},0,null,r,dt,z,R(),Vn,"",null,null,Ve,c,0<Vn.length),En.codecs=e.J.codecs,En.mimeType=e.J.mimeType,En.bandwidth=e.bandwidth,En.j=Kt,En}function S(){var nn=[Math.max(B.nb(),z),Math.min(B.Xb(),R())].map(function(Kt){return Kt-z});return nn=[Math.ceil(nn[0]/he),Math.ceil(nn[1]/he)-1],e.J.Sa&&nn[1]++,nn.map(function(Kt){return Kt+Ee})}function R(){var nn=J!=null&&u[J]||fe;return nn?z+nn:1/0}var B=e.presentationTimeline,z=e.ha.start,J=e.na.id,fe=e.ha.duration,he=t.Ma,Ee=t.td,Le=t.timescale,Fe=t.ac,it=e.bandwidth||null,Ue=e.J.id,Qe=e.J.Ja,rt=e.lb,dt=z-t.Ob,gt=S();n=e.wb?Math.max(gt[0],gt[1]-n+1):gt[0],f=f||gt[1],gt=[];for(var kt=n;kt<=f;++kt){var It=v(kt);gt.push(It)}var Ut=new Mr(gt);if(gt=B.Xb()<R(),kt=B.U(),gt||kt){var Nt=Math.max(n,f+1);n=he,e.J.Sa&&(n=.1),Ut.re(n,function(){var nn=B.nb();Ut.Ga(nn);var Kt=g(S());Kt.next(),Kt=Kt.next().value;for(var $t=[];Nt<=Kt;){var En=v(Nt);$t.push(En),Nt++}return nn>R()&&!$t.length?null:$t})}return Promise.resolve(Ut)}function y6(e,t){var n=e.J.Pd;if(n||(n=xs(e,Hl,"initialization")),!n)return null;n=yi(n);var r=e.J.id,u=e.bandwidth||null,c=e.J.Ja,f=e.lb;return t=new Dn(function(){var h=xp(n,r,null,null,u,null);return Ki(c(),[h],f())},0,null,VN(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function Yv(e,t,n,r,u,c,f,h,v,S,R){Mr.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=r,this.H=u,this.j=c,this.l=f,this.s=h,this.A=S,this.G=R,v&&WN(this)}Y(Yv,Mr),p=Yv.prototype,p.getNumReferences=function(){return this.h?this.h.timeline.length:0},p.release=function(){Mr.prototype.release.call(this),this.h=null},p.Ga=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.j<=e;r+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function YN(e,t,n,r,u,c){if(E6(e,c),e.h){if(n=e.h.timeline,e.h.ac!==t.ac&&(e.h.ac=t.ac),n.length){var f=n[n.length-1];t=t.timeline.filter(function(h){return h.start>=f.end})}else t=t.timeline.slice();0<t.length&&e.h.timeline.push.apply(e.h.timeline,T(t)),e.l!==r&&(e.l=r)}else e.h=t,e.j=n,e.l=r;u&&WN(e)}function E6(e,t){if(e.s!==t){e.s=t,e=g(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&zt(n,t)}}function WN(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.Ga(e.j)}}p.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var u=t[r],c=u.start+this.j;if(u=r<n?t[r+1].start+this.j:this.l===1/0?u.end+this.j:this.l,e>=c&&e<u)return r+this.i}return null},p.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=this.h.timeline[e],u=r.Qi,c=this.h.Yf+r.Zf;n=this.j-this.h.Ob;var f=this.j+r.end,h=f;e===this.getNumReferences()-1&&this.l!==1/0&&(h=this.l);for(var v=this.h.codecs,S=this.h.mimeType,R=this.h.bandwidth,B=[],z=(r.end-r.start)/r.Ab,J={},fe=0;fe<r.Ab;J={te:void 0,ih:void 0},fe++){var he=r.start+z*fe,Ee=he+z;J.ih=fe+1,J.te=null,J=new et(this.j+he,this.j+Ee,function(Le){return function(){return t.h?(Le.te==null&&(Le.te=$N(t.h.ac,t.F,u,t.B,c,Le.ih,t.C,t.H)),Le.te):[]}}(J),0,null,this.s,n,this.j,this.l,[],"",null,null,Ve,this.A),J.codecs=v,J.mimeType=S,J.bandwidth=R,this.G==0?0<fe&&J.Jc():fe%this.G!=0&&J.Jc(),B.push(J)}n=new et(this.j+r.start,h,function(){return 0<r.Ab||!t.h?[]:$N(t.h.ac,t.F,u,t.B,c,null,t.C,t.H)},0,null,this.s,n,this.j,this.l,B,"",null,null,Ve,this.A,0<r.Ab),n.codecs=v,n.mimeType=S,n.j=f,n.bandwidth=R,this.g[e]=n}return n};function $N(e,t,n,r,u,c,f,h){return e=xp(e,t,n,c,r||null,u),Ki(f(),[e],h()).map(function(v){return v.toString()})}function _d(e){this.o=null,this.A=e,this.G=new rl,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}_d.prototype.configure=function(e){this.o=e},_d.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},_d.prototype.setManifestType=function(e){this.s=e};function Np(e,t){var n,r,u,c,f,h,v;return Re(function(S){if(S.g==1)return n=Ki(e.i,[_6(e,t)]),r=Bi(n,e.o.retryParameters),u=e.A.networkingEngine.request(8,r),il(e.G,u),ce(S,2),C(S,u.promise,4);if(S.g!=2)return c=S.h,f=br(c.data),h=JSON.parse(f),h.VERSION==1&&T6(e,h,c.uri),me(S,0);if((v=be(S))&&v.code==7001)return S.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new on(function(){Np(e,t)}),e.g.Z(e.C),X(S)})}function _6(e,t){if(!e.m.length)return t;t=new Ei(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),u=t.g;return e.s=="DASH"?(u.add("_DASH_pathway",n),u.add("_DASH_throughput",String(r))):e.s=="HLS"&&(u.add("_HLS_pathway",n),u.add("_HLS_throughput",String(r))),Lf(u)&&$r(t,u),t.toString()}function T6(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new on(function(){Np(e,r)}),(n=t.TTL)&&(e.C=n),e.g.Z(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function Td(e,t,n,r){var u=e.l.get(t);u||(u=new Map),u.set(n,r),e.l.set(t,u)}_d.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Mp(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],u=g(e.m),c=u.next(),f={};!c.done;f={Nc:void 0},c=u.next())if(f.Nc=c.value,c=t.get(f.Nc))r.push({Ef:f.Nc,location:c});else if(c=e.F.find(function(v){return function(S){return S.uj==v.Nc}}(f))){var h=t.get(c["BASE-ID"]);h&&(c["URI-REPLACEMENT"].ph?(h=new Ei(h),Au(h,c["URI-REPLACEMENT"].ph),r.push({Ef:f.Nc,location:h.toString()})):r.push({Ef:f.Nc,location:h}))}for(u=Date.now(),f=g(e.j.keys()),c=f.next();!c.done;c=f.next())c=c.value,h=e.j.get(c),u>h&&e.j.delete(c);if(r=r.filter(function(v){for(var S=g(e.j.keys()),R=S.next();!R.done;R=S.next())if(R.value.includes(new Ei(v.location).Db))return!1;return!0}),r.length&&(e.B=r[0].Ef),r=r.map(function(v){return v.location}),!r.length&&e.h)for(u=g(e.h.split(",")),f=u.next();!f.done;f=u.next())(f=t.get(f.value))&&(e.B=e.h,r.push(f));if(!r.length)for(t=g(t.values()),u=t.next();!u.done;u=t.next())r.push(u.value);return n?r:Ki(e.i,r)}function Fo(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.s=this.o=!1,this.m=new Set}p=Fo.prototype,p.release=function(){for(var e=g(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[]},p.ci=function(){return this.l},p.jf=function(){return this.j.slice()},p.Lh=function(){return this.i},p.ng=function(e,t){if(e){if(e.type=="audio")for(var n=g(this.h),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(u){return u!==e});else if(e.type=="video")for(n=g(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(u){return u!==e}),r.trickModeVideo&&(r.trickModeVideo.matchedStreams=r.trickModeVideo.matchedStreams.filter(function(u){return u!==e}));else if(e.type==_r)for(n=g(this.j),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(u){return u!==e});else if(e.type=="image")for(n=g(this.i),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(u){return u!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}};function XN(e,t){var n=[],r=[],u=[],c=[];e=g(e);for(var f=e.next();!f.done;f=e.next()){var h=f.value;f=new Map(h.audioStreams.map(function(B){return[c_(B),B]}));var v=new Map(h.videoStreams.map(function(B){return[l_(B),B]})),S=new Map(h.textStreams.map(function(B){return[Lp(B),B]}));if(h=new Map(h.imageStreams.map(function(B){return[kp(B),B]})),t){var R=rM(_r);S.set(Lp(R),R),R=rM("image"),h.set(kp(R),R)}n.push(f),r.push(v),u.push(S),c.push(h)}return{gg:n,nh:r,jh:u,Bg:c}}p.Je=function(e,t,n){n=n===void 0?!1:n;var r=this,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An;return Re(function(Vn){if(Vn.g==1){if(u=Mi,!t&&e.length==1)return c=XN(e,!1),f=c.gg,h=c.nh,v=c.jh,S=c.Bg,r.h=Array.from(f[0].values()),r.g=Array.from(h[0].values()),r.j=Array.from(v[0].values()),r.i=Array.from(S[0].values()),Vn.u(2);for(R=n?r.m.size:0,B=-1,z=0;z<e.length;z++)J=e[z],r.m.has(J.id)||(r.m.add(J.id),B==-1&&(B=z));return B==-1?Vn.return():(fe=XN(e,!0),he=fe.gg,Ee=fe.nh,Le=fe.jh,Fe=fe.Bg,C(Vn,Promise.all([Vl(r,r.h,he,B,Dp,Sd,R),Vl(r,r.g,Ee,B,Dp,Sd,R),Vl(r,r.j,Le,B,Dp,Sd,R),Vl(r,r.i,Fe,B,Dp,Sd,R)]),2))}if(it=0,Ue=[],r.g.length&&r.h.length)for(It=g(r.h),Ut=It.next();!Ut.done;Ut=It.next())for(Nt=Ut.value,nn=g(r.g),Kt=nn.next();!Kt.done;Kt=nn.next())$t=Kt.value,En=Ir(Nt.drmInfos,$t.drmInfos),Nt.drmInfos.length&&$t.drmInfos.length&&!En.length||(An=it++,Ue.push({id:An,language:Nt.language,disabledUntilTime:0,primary:Nt.primary,audio:Nt,video:$t,bandwidth:(Nt.bandwidth||0)+($t.bandwidth||0),drmInfos:En,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(Qe=r.g.length?r.g:r.h,rt=g(Qe),dt=rt.next();!dt.done;dt=rt.next())gt=dt.value,kt=it++,Ue.push({id:kt,language:gt.language,disabledUntilTime:0,primary:gt.primary,audio:gt.type==u.Y?gt:null,video:gt.type==u.ja?gt:null,bandwidth:gt.bandwidth||0,drmInfos:gt.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});r.l=Ue,X(Vn)})};function QN(e){var t,n,r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt;return Re(function($t){switch($t.g){case 1:if(t=Mi,e.length==1)return $t.return(e[0]);for(n=e.map(function(En){return new Map(En.filter(function(An){return An.type===t.Y}).map(function(An){return[c_(An),An]}))}),r=e.map(function(En){return new Map(En.filter(function(An){return An.type===t.ja}).map(function(An){return[l_(An),An]}))}),u=e.map(function(En){return new Map(En.filter(function(An){return An.type===t.wa}).map(function(An){return[Lp(An),An]}))}),c=e.map(function(En){return new Map(En.filter(function(An){return An.type===t.De}).map(function(An){return[kp(An),An]}))}),f=g(u),h=f.next();!h.done;h=f.next())v=h.value,S=nM(t.wa),v.set(Lp(S),S);for(R=g(c),B=R.next();!B.done;B=R.next())z=B.value,J=nM(t.De),z.set(kp(J),J);return fe=new Fo,C($t,Vl(fe,[],n,0,Wv,$v,0),2);case 2:return he=$t.h,C($t,Vl(fe,[],r,0,Wv,$v,0),3);case 3:return Ee=$t.h,C($t,Vl(fe,[],u,0,Wv,$v,0),4);case 4:return Le=$t.h,C($t,Vl(fe,[],c,0,Wv,$v,0),5);case 5:if(Fe=$t.h,it=0,Ee.length&&he.length)for(gt=g(he),kt=gt.next();!kt.done;kt=gt.next())for(It=kt.value,Ut=g(Ee),Nt=Ut.next();!Nt.done;Nt=Ut.next())nn=Nt.value,Kt=it++,nn.variantIds.push(Kt),It.variantIds.push(Kt);else for(Ue=Ee.concat(he),Qe=g(Ue),rt=Qe.next();!rt.done;rt=Qe.next())dt=rt.value,dt.variantIds=[it++];return $t.return(Ee.concat(he).concat(Le).concat(Fe))}})}function Vl(e,t,n,r,u,c,f){var h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt;return Re(function(It){switch(It.g){case 1:for(h=[],v=0;v<n.length;v++)v>=r?h.push(new Set(n[v].values())):h.push(new Set);S=g(t),R=S.next();case 2:if(R.done){It.u(4);break}return B=R.value,C(It,S6(e,B,n,r,c,h,f),5);case 5:if(z=It.h,!z)throw new Xe(2,4,4037);R=S.next(),It.u(2);break;case 4:for(J=g(h),fe=J.next();!fe.done;fe=J.next())for(he=fe.value,Ee=g(he),Le=Ee.next();!Le.done;Le=Ee.next())Fe=Le.value,(it=w6(e,Fe,n,u,c,h))&&t.push(it);for(Ue=g(h),Qe=Ue.next();!Qe.done;Qe=Ue.next())for(rt=Qe.value,dt=g(rt),gt=dt.next(),kt={};!gt.done;kt={Sf:void 0},gt=dt.next())if(kt.Sf=gt.value,!u_(kt.Sf)&&t.some(function(Ut){return function(Nt){return s_(e,Ut.Sf,Nt)}}(kt)))throw new Xe(2,4,4037);return It.return(t)}})}function S6(e,t,n,r,u,c,f){return Re(function(h){return h.g==1?(tM(e,n,t,0<f),t.matchedStreams?t.segmentIndex?C(h,JN(t,r+f),2):h.u(2):h.return(!1)):(eM(t,r,u,c,f),h.return(!0))})}function JN(e,t){var n,r,u,c,f,h;return Re(function(v){if(v.g==1){for(n=[],r=e.matchedStreams,u=t;u<r.length;u++)c=r[u],n.push(c.createSegmentIndex()),c.trickModeVideo&&!c.trickModeVideo.segmentIndex&&n.push(c.trickModeVideo.createSegmentIndex());return C(v,Promise.all(n),2)}if(e.segmentIndex instanceof Ti)for(f=t;f<r.length;f++)h=r[f],h.segmentIndex&&e.segmentIndex.h.push(h.segmentIndex);X(v)})}function w6(e,t,n,r,u,c){if(u_(t))return null;var f=r(t);return tM(e,n,f),f.createSegmentIndex&&(f.createSegmentIndex=function(){return Re(function(h){return f.segmentIndex?h.u(0):(f.segmentIndex=new Ti,C(h,JN(f,0),0))})}),!f.matchedStreams||!f.matchedStreams.length?null:(eM(f,0,u,c,0),f)}function eM(e,t,n,r,u){var c=e.matchedStreams;for(t+=u;t<c.length;t++){var f=c[t];n(e,f);var h=!0;if(e.type=="audio"&&el(e.language,f.language)==0&&(h=!1),h&&(r[t-u].delete(f),f.fullMimeTypes))for(f=g(f.fullMimeTypes.values()),h=f.next();!h.done;h=f.next())e.fullMimeTypes.add(h.value)}}function Dp(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=g(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t}function Wv(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set,t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function Sd(e,t){function n(f,h){f||(f=[]),h=g(h);for(var v=h.next();!v.done;v=h.next())v=v.value,f.includes(v)||f.push(v);return f}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=g(t.keyIds),u=r.next();!u.done;u=r.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=t.originalId:(r=t.originalId||"")&&!e.originalId.endsWith(r)&&(e.originalId+=","+r),r=Ir(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new Xe(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=g(t.closedCaptions),u=r.next();!u.done;u=r.next()){var c=g(u.value);u=c.next().value,c=c.next().value,e.closedCaptions.set(u,c)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Dp(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var f=new Ti,h=g(e.trickModeVideo.matchedStreams),v=h.next();!v.done;v=h.next())f.h.push(v.value.segmentIndex);return e.trickModeVideo.segmentIndex=f,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),Sd(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),Sd(e.trickModeVideo,t))}function $v(e,t){var n=e.roles;n||(n=[]);for(var r=g(t.roles),u=r.next();!u.done;u=r.next())u=u.value,n.includes(u)||n.push(u);for(e.roles=n,n=g(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,T(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=g(t.closedCaptions),n=t.next();!n.done;n=t.next())r=g(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function tM(e,t,n,r){r=r!==void 0&&r?n.matchedStreams:[],t=g(t);for(var u=t.next();!u.done;u=t.next()){if(u=A6(e,u.value,n),!u)return;r.push(u)}n.matchedStreams=r}function A6(e,t,n){var r={audio:c_,video:l_,text:Lp,image:kp}[n.type],u=null,c=r(n);if(t.has(c))u=t.get(c);else{c={audio:function(S,R){return s_(e,S,R)},video:function(S,R){return s_(e,S,R)},text:I6,image:C6}[n.type];for(var f={audio:b6,video:R6,text:x6,image:N6}[n.type],h=g(t.values()),v=h.next();!v.done;v=h.next())v=v.value,!c(n,v)||n.fastSwitching!=v.fastSwitching||u&&!f(n,u,v)||(u=v)}return e.s&&!u_(u)&&t.delete(r(u)),u}function Pp(e,t){return e.mimeType!=t.mimeType?!1:Xv(e.codecs)===Xv(t.codecs)}p.Wg=function(e){this.o=e},p.dh=function(e){this.s=e};function s_(e,t,n){return!(!Pp(t,n)&&!e.o||t.drmInfos&&!fr(t.drmInfos,n.drmInfos))}function I6(e,t){return t.language?!(e.forced!==t.forced||el(e.language,t.language)==0||t.kind!=e.kind):!0}function C6(){return!0}function b6(e,t,n){var r=Pp(e,t),u=Pp(e,n);if(r&&!u)return!1;if(!r&&u||(r=el(e.language,t.language),u=el(e.language,n.language),u>r))return!0;if(u<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length)return!0;if(u.length<r.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=Op(e.channelsCount,t.channelsCount,n.channelsCount),r==ru?!0:r==hl?!1:(r=Op(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==ru?!0:r==hl?!1:!!(e.bandwidth&&iM(e.bandwidth,t.bandwidth,n.bandwidth)==ru)))}function R6(e,t,n){var r=Pp(e,t),u=Pp(e,n);if(r&&!u)return!1;if(!r&&u||(r=Op(e.width*e.height,t.width*t.height,n.width*n.height),r==ru))return!0;if(r==hl)return!1;if(e.frameRate){if(r=Op(e.frameRate,t.frameRate,n.frameRate),r==ru)return!0;if(r==hl)return!1}return!!(e.bandwidth&&iM(e.bandwidth,t.bandwidth,n.bandwidth)==ru)}function x6(e,t,n){var r=el(e.language,t.language),u=el(e.language,n.language);if(u>r)return!0;if(u<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length)return!0;if(u.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function N6(e,t,n){return Op(e.width*e.height,t.width*t.height,n.width*n.height)==ru}function nM(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function rM(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Mr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function Op(e,t,n){if(t==e&&e!=n)return hl;if(n==e&&e!=t)return ru;if(t>e){if(n<=e||n-e<t-e)return ru;if(n-e>t-e)return hl}else{if(n>e)return hl;if(e-n<e-t)return ru;if(e-n>e-t)return hl}return oM}function iM(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?ru:t<e?hl:oM}function u_(e){switch(e.type){case _r:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function l_(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,Xv(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function c_(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,Xv(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Lp(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function kp(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function Xv(e){if(!f_.has(e)){var t=_o(e);f_.set(e,t)}return f_.get(e)}ne("shaka.util.PeriodCombiner",Fo),Fo.prototype.setUseStreamOnce=Fo.prototype.dh,Fo.prototype.setAllowMultiTypeVariants=Fo.prototype.Wg,Fo.prototype.combinePeriods=Fo.prototype.Je,Fo.prototype.deleteStream=Fo.prototype.ng,Fo.prototype.getImageStreams=Fo.prototype.Lh,Fo.prototype.getTextStreams=Fo.prototype.jf,Fo.prototype.getVariants=Fo.prototype.ci;var ru=1,oM=0,hl=-1,f_=new Map;function M6(e,t){var n=new DOMParser,r=D6.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(u){return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function aM(e,t){try{var n=Br(e);return M6(n,t)}catch(r){return null}}var D6=new Un(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Qv(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.sa=1,this.F=[],this.l={Yd:"",type:"",profiles:[],Lb:null,Sa:0,Ja:null,rd:0},this.s=new Map,this.o={},this.B={},this.ka={},this.m=new Fo,this.K=0,this.oa=new D(5),this.L=new on(function(){if(e.I&&!e.g.continueLoadingWhenPaused&&(e.G.$a(e.I,"timeupdate"),e.I.paused)){e.G.pa(e.I,"timeupdate",function(){return dM(e)});return}dM(e)}),this.T=new rl,this.O=null,this.C=[],this.ba=1/0,this.H=!1,this.h=null,this.N=0,this.fa=!1,this.G=new Tt,this.I=null,this.ga=!1,this.aa="",this.ea=function(){return!1},this.X=[]}p=Qv.prototype,p.configure=function(e,t){var n=this.j&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&(this.ea=t),n&&this.i&&this.i.presentationTimeline.U()&&this.L.wc(),this.h&&this.h.configure(this.g),this.m&&(this.m.Wg(this.g.dash.multiTypeVariantsAllowed&&Gn()),this.m.dh(this.g.dash.useStreamOnceInPeriodFlattening))},p.start=function(e,t){var n=this,r;return Re(function(u){if(u.g==1)return n.H=t.isLowLatencyMode(),n.A=[e],n.j=t,C(u,d_(n),2);if(r=u.h,n.j&&h_(n,r),!n.j)throw new Xe(2,7,7001);return u.return(n.i)})},p.stop=function(){for(var e=g(Object.values(this.o)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.o={},this.B={},this.s.clear(),this.l={Yd:"",type:"",profiles:[],Lb:null,Sa:0,Ja:null,rd:0},this.m=null,this.L!=null&&(this.L.stop(),this.L=null),this.h&&this.h.destroy(),this.G&&(this.G.release(),this.G=null),this.T.destroy()},p.update=function(){var e=this,t;return Re(function(n){if(n.g==1)return ce(n,2),C(n,d_(e),4);if(n.g!=2)return me(n,0);if(t=be(n),!e.j||!t)return n.return();e.j.onError(t),X(n)})},p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.U()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.Xb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.K=t.endTime-e,h_(this,0))}}},p.banLocation=function(e){this.h&&this.h.banLocation(e)},p.setMediaElement=function(e){this.I=e};function d_(e){var t,n,r,u,c,f,h,v,S,R,B;return Re(function(z){return z.g==1?(t=4,n="MPD",r=W6(e),u=e.A,r.length?(u=r,n="Patch",t=6):1<e.A.length&&e.h&&(c=Mp(e.h,"Location",!0),c.length&&(u=c)),f=Bi(u,e.g.retryParameters),h=Date.now(),C(z,g_(e,f,0,{type:t}),2)):z.g!=3?(v=z.h,e.j?(v.uri&&v.uri!=v.originalUri&&!e.A.includes(v.uri)&&e.A.unshift(v.uri),S=new Ei(v.uri),e.aa=S.g.toString(),C(z,P6(e,v.data,v.uri,n),3)):z.return(0)):(R=Date.now(),B=(R-h)/1e3,e.oa.sample(1,B),z.return(B))})}function P6(e,t,n,r){var u,c,f,h,v,S,R,B,z,J;return Re(function(fe){if(fe.g==1){if(u=t,c=e.g.dash.manifestPreprocessor,f=fv,c!=f){if(gr("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),h=aM(u,r),!h)throw new Xe(2,4,4001,n);c(h),u=Ci(h.outerHTML)}if(v=_u(u,r),!v)throw new Xe(2,4,4001,n);return S=e.g.dash.manifestPreprocessorTXml,R=dv,S!=R&&S(v),r==="Patch"?fe.return(O6(e,v)):e.g.dash.disableXlinkProcessing?fe.return(sM(e,v,n)):(B=e.g.dash.xlinkFailGracefully,z=zv(v,e.g.retryParameters,B,n,e.j.networkingEngine),il(e.T,z),C(fe,z.promise,2))}return J=fe.h,fe.return(sM(e,J,n))})}function sM(e,t,n){var r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An,Vn,Qn,ar,Ar,Qr,Yr,Si,Pr,Fr,si,Ns,Wi,Fa,ss,$i,Ms,Nd,gl,Md,Dy,Xp;return Re(function(Ds){switch(Ds.g){case 1:for(e.h&&e.h.l.clear(),r=[n],u=[],c=new Map,f=sr(t,"Location"),h=g(f),v=h.next();!v.done;v=h.next())S=v.value,R=S.attributes.serviceLocation,(B=Io(S))&&(z=Ki(r,[B])[0],R&&(e.h?Td(e.h,"Location",R,z):c.set(R,z)),u.push(z));if(e.h?(J=Mp(e.h,"Location",!0),0<J.length&&(r=e.A=J)):u.length&&(r=e.A=u),e.l.Yd=t.attributes.id||"",e.l.rd=Er(t,"publishTime",_s)||0,e.F=sr(t,"PatchLocation"),fe=Promise.resolve(),(he=Hi(t,"ContentSteering"))&&e.j)for(Ee=he.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=Ee):(e.h=new _d(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=Ee,(Le=Io(he))&&(Er(he,"queryBeforeStart",Hs,!1)?fe=Np(e.h,Le):Np(e.h,Le))),Fe=g(c.keys()),it=Fe.next();!it.done;it=Fe.next())Ue=it.value,Qe=c.get(Ue),Td(e.h,"Location",Ue,Qe);if(rt=sr(t,"BaseURL"),dt=!1,e.h)for(gt=g(rt),kt=gt.next();!kt.done;kt=gt.next())It=kt.value,Ut=It.attributes.serviceLocation,Nt=Io(It),Ut&&Nt&&(Td(e.h,"BaseURL",Ut,Nt),dt=!0);if(e.X=null,dt&&e.h||(nn=rt.map(Io),e.X=Ki(r,nn)),Kt=function(){return e.h&&dt?Mp(e.h,"BaseURL"):e.X?e.X:[]},e.l.Ja=Kt,$t=0,rt&&rt.length&&($t=Er(rt[0],"availabilityTimeOffset",Ef)||0),e.l.Sa=$t,En=e.g.dash.ignoreMinBufferTime,An=0,En||(An=Er(t,"minBufferTime",Ia)||0),e.K=Er(t,"minimumUpdatePeriod",Ia,-1),Vn=Er(t,"availabilityStartTime",_s),Qn=Er(t,"timeShiftBufferDepth",Ia),ar=e.g.dash.ignoreSuggestedPresentationDelay,Ar=null,ar||(Ar=Er(t,"suggestedPresentationDelay",Ia)),Qr=e.g.dash.ignoreMaxSegmentDuration,Yr=null,Qr||(Yr=Er(t,"maxSegmentDuration",Ia)),Si=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.ga=e.i.presentationTimeline.U()&&Si=="static"),e.l.type=Si,B6(e),e.i)for(Pr=e.i.presentationTimeline,Fr=g(Object.values(e.o)),si=Fr.next();!si.done;si=Fr.next())Ns=si.value,Ns.segmentIndex&&Ns.segmentIndex.Ga(Pr.nb());else Wi=e.g.defaultPresentationDelay||1.5*An,Fa=Ar!=null?Ar:Wi,Pr=new rr(Vn,Fa,e.g.dash.autoCorrectDrift);return Pr.vc(Si=="static"),Pr.U()&&!isNaN(e.g.availabilityWindowOverride)&&(Qn=e.g.availabilityWindowOverride),Qn==null&&(Qn=1/0),Pr.ne(Qn),ss=t.attributes.profiles||"",e.l.profiles=ss.split(","),$i={wb:Si!="static",presentationTimeline:Pr,na:null,ha:null,ia:null,J:null,bandwidth:0,lf:!1,Sa:$t,Lb:null,profiles:ss.split(","),roles:null,lb:function(){return""}},e.N=0,Ms=fM(e,$i,Kt,t,!1),Nd=Ms.duration,gl=Ms.periods,(Si!="static"||e.ga)&&Ms.pg||Pr.Za(Nd||1/0),e.fa&&!e.H&&e.j.isAutoLowLatencyMode()&&(e.j.enableLowLatencyMode(),e.H=e.j.isLowLatencyMode()),e.H&&Pr.Xg(e.ba),Pr.yf(Yr||1),C(Ds,fe,2);case 2:return e.H&&(An=0,Md=Ar!=null?Ar:e.g.defaultPresentationDelay,Pr.Of(Md)),e.i?(e.i.periodCount=gl.length,e.i.gapCount=e.N,C(Ds,uM(e,gl,!1),4)):C(Ds,e.m.Je(gl,$i.wb),6);case 6:if(e.i={presentationTimeline:Pr,variants:e.m.l,textStreams:e.m.jf(),imageStreams:e.m.i,offlineSessionIds:[],minBufferTime:An||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:F6(t),nextUrl:U6(t),periodCount:gl.length,gapCount:e.N,isLowLatency:e.fa,startTime:null},!Pr.lh()){Ds.u(7);break}return Dy=sr(t,"UTCTiming"),C(Ds,z6(e,Kt,Dy),8);case 8:if(Xp=Ds.h,!e.j)return Ds.return();Pr.Yg(Xp);case 7:Pr.Ud();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),X(Ds)}})}function uM(e,t,n){var r;return Re(function(u){if(u.g==1)return C(u,e.m.Je(t,!0,n),2);e.i.variants=e.m.l,r=e.m.jf(),0<r.length&&(e.i.textStreams=r),e.i.imageStreams=e.m.i,e.j.filter(e.i),X(u)})}function O6(e,t){var n,r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt;return Re(function(nn){if(nn.g==1){if(n=t.attributes.mpdId,r=Er(t,"originalPublishTime",_s),!n||n!==e.l.Yd||r!==e.l.rd)throw e.F=[],new Xe(1,4,4052);for(u=[],c=[],f=new Set,h=g(vf(t)),v=h.next();!v.done;v=h.next())if(S=v.value,R=_c(S.attributes.sel||""),B=R[R.length-1],z=Io(S)||"",B.name==="MPD")if(B.Tb==="mediaPresentationDuration"){J=Io(S)||"";var Kt=Ia(J);if(Kt!=null){e.l.Lb=Kt;for(var $t=g(e.s.values()),En=$t.next();!En.done;En=$t.next())En.value.Lb=Kt}}else if(B.Tb==="type"){for(e.i.presentationTimeline.vc(z=="static"),e.l.type=z,Kt=g(e.s.values()),$t=Kt.next();!$t.done;$t=Kt.next())$t.value.wb=z=="dynamic";z=="static"&&(e.K=-1)}else B.Tb==="publishTime"?e.l.rd=_s(z)||0:B.Tb===null&&S.tagName==="add"&&c.push(S);else if(B.name==="PatchLocation")Ch(e.F,S);else if(B.name==="Period")S.tagName==="add"?c.push(S):S.tagName==="remove"&&B.id&&k6(e,B.id);else if(B.name==="SegmentTemplate"){if($t=_c(S.attributes.sel||""),Kt=$t[$t.length-1],Kt.Tb){$t=lM(e,$t),En=Io(S)||"";for(var An=g($t),Vn=An.next();!Vn.done;Vn=An.next())Vn=e.s.get(Vn.value),fm(Vn.J.cc,S.tagName,Kt.Tb,En);Kt=$t}else Kt=[];for(fe=Kt,he=g(fe),Ee=he.next();!Ee.done;Ee=he.next())Le=Ee.value,f.add(Le)}else if(B.name==="SegmentTimeline"||B.name==="S"){for(Kt=_c(S.attributes.sel||""),Kt=lM(e,Kt),$t=g(Kt),En=$t.next();!En.done;En=$t.next())En=e.s.get(En.value),En=yd(En,Hl,"SegmentTimeline"),An=sr(En,"S"),Ch(An,S),En.children=An;for(Fe=Kt,it=g(Fe),Ue=it.next();!Ue.done;Ue=it.next())Qe=Ue.value,f.add(Qe)}for(rt=g(f),dt=rt.next();!dt.done;dt=rt.next())gt=dt.value,cM(e,gt);for(kt=g(c),It=kt.next();!It.done;It=kt.next())Ut=It.value,u.push.apply(u,T(L6(e,Ut)));return u.length?(e.i.periodCount+=u.length,e.i.gapCount=e.N,C(nn,uM(e,u,!0),2)):nn.u(2)}e.l.type=="static"&&(Nt=e.l.Lb,e.i.presentationTimeline.Za(Nt||1/0)),X(nn)})}function L6(e,t){return fM(e,{wb:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,na:null,ha:null,ia:null,J:null,bandwidth:0,lf:!1,Sa:e.l.Sa,profiles:e.l.profiles,Lb:e.l.Lb,roles:null,lb:function(){return""}},e.l.Ja,t,!0).periods}function k6(e,t){e.i.periodCount--;for(var n=g(e.s.keys()),r=n.next();!r.done;r=n.next())if(r=r.value,r.startsWith(t)){var u=e.s.get(r);yd(u,Hl,"SegmentTimeline").children=[],cM(e,r),e.s.delete(r)}e.C=e.C.filter(function(c){return c!==t})}function lM(e,t){var n="",r="",u=-1,c="";t=g(t);for(var f=t.next();!f.done;f=t.next())f=f.value,f.name==="Period"?n=f.id:f.name==="AdaptationSet"?(r=f.id,f.position!==null&&(u=f.position)):f.name==="Representation"&&(c=f.id);if(t=[],c)t.push(n+","+c);else if(r)for(u=g(e.s.values()),e=u.next();!e.done;e=u.next())e=e.value,e.na.id===n&&e.ia.id===r&&e.J.id&&t.push(n+","+e.J.id);else if(-1<u)for(r=g(e.s.values()),e=r.next();!e.done;e=r.next())e=e.value,e.na.id===n&&e.ia.position===u&&e.J.id&&t.push(n+","+e.J.id);return t}function cM(e,t){var n=e.s.get(t),r=e.o[t];r.segmentIndex&&r.segmentIndex.Ga(e.i.presentationTimeline.nb());try{var u=zN(n,function(c,f,h,v){return pM(e,c,f,h,v)},e.o,!0,e.g.dash.initialSegmentLimit,e.ka,n.J.aesKey,null,!0);r.createSegmentIndex=function(){return Re(function(c){if(c.g==1)return r.segmentIndex?c.u(0):C(c,u.kc(),3);r.segmentIndex=c.h,X(c)})}}catch(c){if(t=n.J.contentType,t!=_r&&t!="application"&&t!="image"||c.code!=4002)throw c}}function F6(e){var t=Hi(e,"ServiceDescription");if(!t||(e=Hi(t,"Latency"),t=Hi(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function U6(e){if(e=sr(e,"SupplementalProperty"),!e.length)return null;e=g(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function fM(e,t,n,r,u){var c=t.Lb;c||(c=Er(r,"mediaPresentationDuration",Ia),e.l.Lb=c);var f=0;e.i&&e.i.presentationTimeline&&e.ga&&(f=e.i.presentationTimeline.Jb());var h=[],v=f;r=sr(r,"Period");for(var S=0;S<r.length;S++){var R=r[S],B=r[S+1],z=Er(R,"start",Ia,v),J=R.attributes.id,fe=Er(R,"duration",Ia),he=null;if(B){var Ee=Er(B,"start",Ia);Ee!=null&&(he=Ee-z)}else c!=null&&(he=c-z+f);if(Ee=kf,he&&fe&&Math.abs(he-fe)>Ee&&he>fe&&e.N++,he==null&&(he=fe),!(e.O!==null&&J!==null&&z!==null&&z<e.O)||e.C.includes(J)||S+1==r.length){if(z!==null&&(e.O===null||z>e.O)&&(e.O=z),v=j6(e,t,n,{start:z,duration:he,node:R,qf:he==null||!B}),h.push(v),t.na.id&&he&&(e.ka[t.na.id]=he),he==null){v=null;break}v=z+he}}if(u)for(t=g(h),n=t.next();!n.done;n=t.next())n=n.value.id,e.C.includes(n)||e.C.push(n);else e.C=h.map(function(Le){return Le.id});return c!=null?{periods:h,duration:c+f,pg:!1}:{periods:h,duration:v,pg:!0}}function B6(e){var t=Object.keys(e.B).filter(function(c){return!e.C.includes(c)});t=g(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var r=g(e.B[n]),u=r.next();!u.done;u=r.next())u=u.value,e.m&&e.m.ng(e.o[u],n),delete e.o[u];delete e.B[n]}}function j6(e,t,n,r){t.na=p_(e,r.node,null,n),t.ha=r,t.na.Sa=t.Sa,t.na.id||(t.na.id="__shaka_period_"+r.start);var u=sr(r.node,"EventStream");n=t.presentationTimeline.nb(),u=g(u);for(var c=u.next();!c.done;c=u.next())Y6(e,r.start,r.duration,c.value,n);for(n=sr(r.node,"SupplementalProperty"),n=g(n),u=n.next();!u.done;u=n.next())u=u.value,u.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(u=Fp(e,u))&&(t.lb=u);if(n=sr(r.node,"AdaptationSet").map(function(S,R){return Z6(e,t,R,S)}).filter(Ys),t.wb){for(r=[],u=g(n),c=u.next();!c.done;c=u.next()){c=g(c.value.Ki);for(var f=c.next();!f.done;f=c.next())r.push(f.value)}if(r.length!=new Set(r).size)throw new Xe(2,4,4018)}for(r=n.filter(function(S){return!S.Xf}),n=n.filter(function(S){return S.Xf}),n=g(n),u=n.next();!u.done;u=n.next()){u=u.value,c=u.Xf.split(" "),f=g(r);for(var h=f.next();!h.done;h=f.next())if(h=h.value,c.includes(h.id)){h=g(h.streams);for(var v=h.next();!v.done;v=h.next())zh(v.value,u.streams)}}if(n=Jv(e.g.disableAudio,r,"audio"),u=Jv(e.g.disableVideo,r,"video"),c=Jv(e.g.disableText,r,_r),r=Jv(e.g.disableThumbnails,r,"image"),u.length===0&&n.length===0)throw new Xe(2,4,4004);return{id:t.na.id,audioStreams:n,videoStreams:u,textStreams:c,imageStreams:r}}function Jv(e,t,n){return e||!t.length?[]:t.reduce(function(r,u){return u.contentType!=n||r.push.apply(r,T(u.streams)),r},[])}function Z6(e,t,n,r){function u(Ut){var Nt=Ut.attributes["dvb:fontFamily"];Ut=Ut.attributes["dvb:url"],Nt&&Ut&&(Ut=Ki(t.ia.Ja(),[Ut],t.lb()),e.j.addFont(Nt,Ut[0]))}function c(Ut){switch(Ut){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function f(Ut){switch(Ut){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ia=p_(e,r,t.na,null),t.ia.position=n;var h=!1;n=sr(r,"Role");var v=n.map(function(Ut){return Ut.attributes.value}).filter(Ys),S=void 0,R=t.ia.contentType==_r;R&&(S="subtitle"),n=g(n);for(var B=n.next();!B.done;B=n.next()){B=B.value;var z=B.attributes.schemeIdUri;if(z==null||z=="urn:mpeg:dash:role:2011")switch(B=B.attributes.value,B){case"main":h=!0;break;case"caption":case"subtitle":S=B}}var J=sr(r,"EssentialProperty");n=null;var fe=!1;B=null,z=!1,J=g(J);for(var he=J.next();!he.done;he=J.next()){he=he.value;var Ee=he.attributes.schemeIdUri;if(Ee=="http://dashif.org/guidelines/trickmode")n=he.attributes.value;else if(Ee=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var Le=f(parseInt(he.attributes.value,10));else if(Ee=="urn:mpeg:mpegB:cicp:ColourPrimaries")var Fe=c(parseInt(he.attributes.value,10));else Ee!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(Ee=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?fe=!0:Ee=="urn:dvb:dash:fontdownload:2014"?u(he):Ee=="urn:mpeg:dash:urlparam:2014"&&(B=Fp(e,he))||(z=!0))}if(z)return null;var it=null;for(z=sr(r,"SupplementalProperty"),z=g(z),J=z.next();!J.done;J=z.next())J=J.value,he=J.attributes.schemeIdUri,he=="http://dashif.org/guidelines/last-segment-number"?it=parseInt(J.attributes.value,10)-1:he=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?Le=f(parseInt(J.attributes.value,10)):he=="urn:mpeg:mpegB:cicp:ColourPrimaries"?Fe=c(parseInt(J.attributes.value,10)):he=="urn:dvb:dash:fontdownload:2014"?u(J):he=="urn:mpeg:dash:urlparam:2014"&&(B=Fp(e,J));B&&(t.lb=B),B=sr(r,"Accessibility");var Ue=new Map,Qe;for(B=g(B),z=B.next();!z.done;z=B.next())if(J=z.value,z=J.attributes.schemeIdUri,J=J.attributes.value,z!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(z!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)z=="urn:mpeg:dash:role:2011"?J!=null&&(v.push(J),J=="captions"&&(S="caption")):z=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(J=="1"?Qe="visually impaired":J=="2"&&(Qe="hard of hearing"));else if(z=1,J!=null)for(J=g(J.split(";")),he=J.next();!he.done;he=J.next()){Ee=he.value;var rt=he=void 0;Ee.includes("=")?(Ee=Ee.split("="),he="svc"+Ee[0],rt=Ee[1].split(",")[0].split(":").pop()):(he="svc"+z,z++,rt=Ee),Ue.set(he,Or(rt))}else Ue.set("svc1","und");else if(z=1,J!=null)for(J=J.split(";"),he=g(J),Ee=he.next();!Ee.done;Ee=he.next()){rt=Ee.value;var dt=Ee=void 0;rt.includes("=")?(rt=rt.split("="),Ee=rt[0].startsWith("CC")?rt[0]:"CC"+rt[0],dt=rt[1]||"und"):(Ee="CC"+z,J.length==2?z+=2:z++,dt=rt),Ue.set(Ee,Or(dt))}else Ue.set("CC1","und");B=sr(r,"ContentProtection");var gt=FN(B,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),kt=Or(t.ia.language||"und"),It=t.ia.label;if(B=sr(r,"Representation"),r=B.map(function(Ut){return(Ut=q6(e,t,gt,S,kt,It,h,v,Ue,Ut,Qe,it))&&(Ut.hdr=Ut.hdr||Le,Ut.colorGamut=Ut.colorGamut||Fe,Ut.fastSwitching=fe),Ut}).filter(function(Ut){return!!Ut}),r.length==0){if(n=t.ia.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||R||n)return null;throw new Xe(2,4,4003)}if(!t.ia.contentType||t.ia.contentType=="application")for(t.ia.contentType=gM(r[0].mimeType,r[0].codecs),R=g(r),z=R.next();!z.done;z=R.next())z.value.type=t.ia.contentType;for(R=t.ia.id||"__fake__"+e.sa++,z=g(r),J=z.next();!J.done;J=z.next()){for(J=J.value,he=g(gt.drmInfos),Ee=he.next();!Ee.done;Ee=he.next())Ee=Ee.value,Ee.keyIds=Ee.keyIds&&J.keyIds?new Set([].concat(T(Ee.keyIds),T(J.keyIds))):Ee.keyIds||J.keyIds;e.g.dash.enableAudioGroups&&(J.groupId=R)}return B=B.map(function(Ut){return Ut.attributes.id}).filter(Ys),{id:R,contentType:t.ia.contentType,language:kt,fk:h,streams:r,drmInfos:gt.drmInfos,Xf:n,Ki:B}}function Fp(e,t){if((t=Vi(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&Er(t,"useMPDUrlQuery",Hs,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return n=="$querypart$"?e.aa:n.split("&").map(function(r){if(r=="$querypart$")return e.aa;var u=/\$query:(.*?)\$/g.exec(r);if(u&&u.length==2){u=u[1];var c=new Wu(e.aa).get(u);if(c.length)return u+"="+c[0]}return r}).join("&")}}return null}function q6(e,t,n,r,u,c,f,h,v,S,R,B){t.J=p_(e,S,t.ia,null);var z=t.J.id;if(e.ba=Math.min(e.ba,t.J.Sa),e.fa=0<e.ba,!K6(t.J))return null;var J=t.ha.start;t.bandwidth=Er(S,"bandwidth",Gs)||0,t.roles=h;var fe=sr(S,"SupplementalProperty"),he=sr(S,"EssentialProperty"),Ee=null,Le=he.find(function($t){return $t.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(Le||(Le=fe.find(function($t){return $t.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(Ee=Fp(e,Le)),Ee&&(t.lb=Ee),Le=t.J.contentType,Ee=Le==_r||Le=="application",Le=Le=="image";try{var Fe=void 0;if(n.Fe){var it=t.J.Ja,Ue=t.lb,Qe=Ki(it(),[n.Fe.pi],Ue()),rt=Bi(Qe,e.g.retryParameters);Fe={bitsKey:128,blockCipherMode:"CBC",iv:n.Fe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var $t,En,An;return Re(function(Vn){if(Vn.g==1)return C(Vn,g_(e,rt,6),2);if(Vn.g!=3){if($t=Vn.h,!$t.data||$t.data.byteLength!=16)throw new Xe(2,4,4049);return En={name:"AES-CBC"},An=Fe,C(Vn,m.crypto.subtle.importKey("raw",$t.data,En,!0,["decrypt"]),3)}An.cryptoKey=Vn.h,Fe.fetchKey=void 0,X(Vn)})}}}if(t.J.aesKey=Fe,it=function($t,En,An,Vn){return pM(e,$t,En,An,Vn)},t.J.Sc)var dt=l6(t,it,Fe);else if(t.J.Qb)dt=f6(t,e.o,Fe);else if(t.J.cc)dt=zN(t,it,e.o,!!e.i,e.g.dash.initialSegmentLimit,e.ka,Fe,B,!1);else{var gt=t.ha.duration||0,kt=t.J.Ja,It=t.J.mimeType,Ut=t.J.codecs;dt={kc:function(){var $t=o1(J,gt,kt());return $t.Gb(function(En){En.mimeType=It,En.codecs=Ut}),Promise.resolve($t)}}}}catch($t){if((Ee||Le)&&$t.code==4002)return null;throw $t}S=sr(S,"ContentProtection"),S=z5(S,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),S=new Set(S?[S]:[]),B=!1,fe.some(function($t){return $t.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&$t.attributes.value=="JOC"})&&(B=!0),fe=!1,Ee&&(fe=h.includes("forced_subtitle")||h.includes("forced-subtitle"));var Nt;if(Le&&((he=he.find(function($t){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes($t.attributes.schemeIdUri)}))&&(Nt=he.attributes.value),!Nt))return null;var nn;Ee=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(Ee.includes("hvc1.2.4.L153.B0")||Ee.includes("hev1.2.4.L153.B0"))&&(nn="PQ"),he=t.J.id?t.na.id+","+t.J.id:"",e.F.length&&z&&e.s.set(t.na.id+","+z,G6(t));var Kt=he&&e.o[he]?e.o[he]:{id:e.sa++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Kt.segmentIndex&&(Kt.segmentIndex.release(),Kt.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:Ee,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:S,language:u,originalLanguage:t.ia.language,label:c,type:t.ia.contentType,primary:f,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:h,forced:fe,channelsCount:t.J.$d,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:B,closedCaptions:v,hdr:nn,colorGamut:void 0,videoLayout:void 0,tilesLayout:Nt,accessibilityPurpose:R,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Di(t.J.mimeType,t.J.codecs)])};return Kt.createSegmentIndex=function(){var $t;return Re(function(En){if(En.g==1)return Kt.segmentIndex?En.u(0):($t=Kt,C(En,dt.kc(),3));$t.segmentIndex=En.h,X(En)})},he&&t.wb&&!e.o[he]&&(t=t.na.id||"",e.B[t]||(e.B[t]=[]),e.o[he]=Kt,e.B[t].push(he)),Kt}function G6(e){function t(n){return n?(n=Es(n),n.Sc=null,n.Qb=null,n.cc=xh(n.cc),n):null}return e=Es(e),e.na=t(e.na),e.ia=t(e.ia),e.J=t(e.J),e.ha&&(e.ha=Es(e.ha),e.ha.node=null),e}function dM(e){var t,n;return Re(function(r){switch(r.g){case 1:return t=0,ce(r,2),C(r,d_(e),4);case 4:t=r.h,me(r,3);break;case 2:if(n=be(r),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),r.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return r.return();e.j.onManifestUpdated(),h_(e,t),X(r)}})}function h_(e,t){if(!(0>e.K)){var n=e.K;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.L.Z(Math.max(n-t,G(e.oa)))}}function p_(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,$d:null,audioSamplingRate:null,Sa:0,me:0},r=r||n.Ja;var u=t.attributes.id,c=sr(t,"BaseURL"),f,h=!1;if(e.h)for(var v=g(c),S=v.next();!S.done;S=v.next()){var R=S.value;S=R.attributes.serviceLocation,R=Io(R),S&&R&&(Td(e.h,u,S,R),h=!0)}h&&e.h||(f=c.map(Io)),v=t.attributes.contentType||n.contentType,S=t.attributes.mimeType||n.mimeType,R=[t.attributes.codecs||n.codecs];var B=Po(t,"urn:scte:dash:scte214-extensions","supplementalCodecs");B&&R.push(B),R=f1(R).join(","),B=Er(t,"frameRate",Ih)||n.frameRate;var z=t.attributes.sar||n.pixelAspectRatio,J=H6(sr(t,"InbandEventStream"),n.emsgSchemeIdUris),fe=sr(t,"AudioChannelConfiguration");fe=V6(fe)||n.$d;var he=Er(t,"audioSamplingRate",lo)||n.audioSamplingRate;v||(v=gM(S,R));var Ee=Hi(t,"SegmentBase"),Le=Hi(t,"SegmentTemplate"),Fe=Ee&&Er(Ee,"availabilityTimeOffset",Ef)||0,it=Le&&Er(Le,"availabilityTimeOffset",Ef)||0,Ue=c&&c.length&&Er(c[0],"availabilityTimeOffset",Ef)||0;Fe=n.Sa+Ue+Fe+it,it=null,(Ue=Hi(t,"SegmentSequenceProperties"))&&(Ue=Hi(Ue,"SAP"))&&(it=Er(Ue,"cadence",Ec)),Ue=t.attributes.label;var Qe=sr(t,"Label");return Qe&&Qe.length&&(Qe=Qe[0],ei(Qe)&&(Ue=ei(Qe))),{Ja:function(){return Ki(r(),c.length?e.h&&h?Mp(e.h,u):f||[]:[])},Sc:Ee||n.Sc,Qb:Hi(t,"SegmentList")||n.Qb,cc:Le||n.cc,width:Er(t,"width",lo)||n.width,height:Er(t,"height",lo)||n.height,contentType:v,mimeType:S,codecs:R,frameRate:B,pixelAspectRatio:z,emsgSchemeIdUris:J,id:u,language:t.attributes.lang,$d:fe,audioSamplingRate:he,Sa:Fe,Pd:null,me:it||n.me,label:Ue||null}}function H6(e,t){t=t.slice(),e=g(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function V6(e){e=g(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function K6(e){var t=e.Sc?1:0;return t+=e.Qb?1:0,t+=e.cc?1:0,t==0?e.contentType==_r||e.contentType=="application":(t!=1&&(e.Sc&&(e.Qb=null),e.cc=null),!0)}function hM(e,t,n,r){var u,c,f,h,v,S,R;return Re(function(B){if(B.g==1)return u=[yi(n)],c=Ki(t(),u),f=Bi(c,e.g.retryParameters),f.method=r,h=e.j.networkingEngine.request(4,f,{isPreload:e.ea()}),il(e.T,h),C(B,h.promise,2);if(v=B.h,r=="HEAD"){if(!v.headers||!v.headers.date)return B.return(0);S=v.headers.date}else S=br(v.data);return R=Date.parse(S),isNaN(R)?B.return(0):B.return(R-Date.now())})}function z6(e,t,n){var r,u,c,f,h,v,S,R;return Re(function(B){switch(B.g){case 1:r=n.map(function(z){return{scheme:z.attributes.schemeIdUri,value:z.attributes.value}}),u=e.g.dash.clockSyncUri,!r.length&&u&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),c=g(r),f=c.next();case 2:if(f.done){B.u(4);break}switch(h=f.value,ce(B,5),v=h.scheme,S=h.value,v){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return B.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return B.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return R=Date.parse(S),B.return(isNaN(R)?0:R-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Ke("NTP UTCTiming scheme is not supported");break;default:Ke("Unrecognized scheme in UTCTiming element",v)}B.u(9);break;case 7:return C(B,hM(e,t,S,"HEAD"),10);case 10:return B.return(B.h);case 8:return C(B,hM(e,t,S,"GET"),11);case 11:return B.return(B.h);case 9:me(B,3);break;case 5:be(B);case 3:f=c.next(),B.u(2);break;case 4:return Ke("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),B.return(0)}})}function Y6(e,t,n,r,u){var c=r.attributes.schemeIdUri||"",f=r.attributes.value||"",h=Er(r,"timescale",lo)||1,v=Er(r,"presentationTimeOffset",lo)||0;r=g(sr(r,"Event"));for(var S=r.next();!S.done;S=r.next()){S=S.value;var R=Er(S,"presentationTime",lo)||0,B=Er(S,"duration",lo)||0;R=Math.max((R-v)/h+t,t),B=R+B/h,n!=null&&(R=Math.min(R,t+n),B=Math.min(B,t+n)),B<u||(S={schemeIdUri:c,value:f,startTime:R,endTime:B,id:S.attributes.id||"",eventElement:Rh(S),eventNode:xh(S)},e.j.onTimelineRegionAdded(S))}}function pM(e,t,n,r,u){var c,f,h,v;return Re(function(S){return S.g==1?(c=Wa,f=u?0:1,h=nd(t,n,r,e.g.retryParameters),C(S,g_(e,h,c,{type:f}),2)):(v=S.h,S.return(v.data))})}function gM(e,t){return t=Di(e,t),Ac(t)?_r:e.split("/")[0]}function g_(e,t,n,r){return r||(r={}),r.isPreload=e.ea(),t=e.j.networkingEngine.request(n,t,r),il(e.T,t),t.promise}function W6(e){var t=e.l.rd;if(!e.l.Yd||!t||!e.F.length)return[];var n=Date.now()/1e3,r=e.F.filter(function(u){return u=lo(u.attributes.ttl),!u||t+u>n}).map(Io).filter(Ys);return r.length?Ki(e.A,r):[]}ne("shaka.dash.DashParser",Qv),Yn["application/dash+xml"]=function(){return new Qv},Yn["video/vnd.mpeg.dash.mpd"]=function(){return new Qv};function ey(){}ne("shaka.dependencies",ey),ey.has=function(e){return m_.has(e)},ey.add=function(e,t){if(!vM[e])throw Error(e+" is not supported");e==mM?gr("mux.js","mux.js is no longer used in Shaka Player."):m_.set(e,function(){return t})};var mM="muxjs",vM={gk:mM,ISOBoxer:"ISOBoxer"};ey.Allowed=vM;var m_=new Map([["ISOBoxer",function(){return m.ISOBoxer}]]);function yM(e,t,n){this.type=e,this.W=t,this.segments=n||null}function EM(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}EM.prototype.toString=function(e){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function _M(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function Up(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function $n(e,t,n){return(e=Up(e,t))?e.value:n||null}function Ur(e,t){if(e=Up(e,t),!e)throw new Xe(2,4,4023,t);return e.value}function TM(e,t,n){n=n===void 0?[]:n,this.W=t,this.g=e,this.Ab=n}function SM(e,t){this.name=e,this.value=t}function ts(e,t){return e.filter(function(n){return n.name==t})}function wM(e,t){return e.filter(function(n){return Ur(n,"TYPE")==t})}function ho(e,t){e=g(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function wd(e,t,n){return n=n===void 0?0:n,(e=ho(e,t))?Number(e.value):n}function Kl(e,t,n){return t?AM(e,[t],n):[]}function AM(e,t,n){if(!t.length)return[];t=Ki(e,t),e=[],t=g(t);for(var r=t.next();!r.done;r=t.next())e.push(IM(r.value,n));return e}function IM(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=g(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var u=r.slice(2,r.length-1),c=t.get(u);if(c)e=e.replace(r,c);else throw new Xe(2,4,4039,u)}}return e}function $6(){this.g=0}function v_(e,t){t=br(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new Xe(2,4,4015);t=0;for(var r=!0,u=g(n),c=u.next();!c.done;c=u.next())if(c=c.value,/^#(?!EXT)/m.test(c)||r)r=!1;else if(c=y_(e,c),--e.g,CM.includes(c.name)){t=1;break}else c.name=="EXT-X-STREAM-INF"&&(r=!0);for(u=[],r=!0,c=0;c<n.length;c++){var f=n[c],h=n[c+1];if(/^#(?!EXT)/m.test(f)||r)r=!1;else{if(f=y_(e,f),X6.includes(f.name)){if(t!=1)throw new Xe(2,4,4017);f=n.splice(c,n.length-c),n=[],r=[],c=[],h=null,f=g(f);for(var v=f.next();!v.done;v=f.next())v=v.value,/^(#EXT)/.test(v)?(v=y_(e,v),CM.includes(v.name)?u.push(v):v.name=="EXT-X-MAP"?h=v:v.name=="EXT-X-PART"?c.push(v):v.name=="EXT-X-PRELOAD-HINT"?$n(v,"TYPE")=="PART"?c.push(v):$n(v,"TYPE")=="MAP"&&(v.name="EXT-X-MAP",h=v):r.push(v)):/^#(?!EXT)/m.test(v)||(v=v.trim(),h&&r.push(h),n.push(new TM(v,r,c)),r=[],c=[]);return c.length&&(h&&r.push(h),n.push(new TM("",r,c))),new yM(t,u,n)}u.push(f),f.name=="EXT-X-STREAM-INF"&&(f.attributes.push(new SM("URI",h)),r=!0)}}return new yM(t,u)}function y_(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new Xe(2,4,4016,t);t=n[1];var r=n[2];n=[];var u;if(r){r=new aa(r);var c;(c=Sa(r,/^([^,=]+)(?:,|$)/g))&&(u=c[1]);for(var f=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;c=Sa(r,f);)n.push(new SM(c[1],c[2]||c[3])),ys(r)}return new EM(e,t,n,u)}var CM="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),X6="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");function bM(){}function RM(e){try{var t=E_(e);return $s({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return Ws(n)}}function E_(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new Xe(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new Xe(2,1,1004,e);var n=t[0];e=m.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var u;return r?u=Wo(e):u=Ci(e),{data:u,contentType:n}}ne("shaka.net.DataUriPlugin",bM),bM.parse=RM,Xs("data",RM);function ty(){var e=this;this.g=this.h=null,this.C=1,this.A=new Map,this.H=new Map,this.O=new Map,this.O.set("video",new Map),this.O.set("audio",new Map),this.O.set(_r,new Map),this.O.set("image",new Map),this.vb=new Set,this.i=new Map,this.l=null,this.N="",this.Ta=new $6,this.I=-1,this.ga=1/0,this.fa=this.$b=!1,this.B=new on(function(){if(e.ba&&!e.g.continueLoadingWhenPaused&&(e.aa.$a(e.ba,"timeupdate"),e.ba.paused)){e.aa.pa(e.ba,"timeupdate",function(){return XM(e)});return}XM(e)}),this.za=ay,this.m=null,this.bb=0,this.o=1/0,this.Fa=this.Ea=this.X=0,this.ea=new rl,this.F=new Map,this.G=new Map,this.ta=new Map,this.ka=new Map,this.L=new Map,this.oa=new Map,this.sa=new Map,this.Hb=this.K=!1,this.Eb=new D(5),this.j=null,this.T=!0,this.Da=new Set,this.aa=new Tt,this.s=this.ba=null,this.Fb=function(){return!1}}p=ty.prototype,p.configure=function(e,t){this.g=e,t&&(this.Fb=t),this.j&&this.j.configure(this.g)},p.start=function(e,t){var n=this,r;return Re(function(u){return u.g==1?(n.h=t,n.K=t.isLowLatencyMode(),C(u,b_(n,[e]).promise,2)):u.g!=3?(r=u.h,n.N=r.uri,C(u,eZ(n,r.data,e),3)):u.return(n.m)})},p.stop=function(){this.B&&(this.B.stop(),this.B=null);var e=[];return this.ea&&(e.push(this.ea.destroy()),this.ea=null),this.g=this.h=null,this.vb.clear(),this.m=null,this.i.clear(),this.H.clear(),this.G.clear(),this.A.clear(),this.ta.clear(),this.ka.clear(),this.L.clear(),this.oa.clear(),this.sa.clear(),this.Da.clear(),this.j&&this.j.destroy(),this.aa&&(this.aa.release(),this.aa=null),Promise.all(e)},p.update=function(){var e=this,t,n,r,u,c,f,h,v,S,R,B,z;return Re(function(J){if(J.g==1){if(!pa(e))return J.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,r=n.filter(function(fe){return fe.stream.segmentIndex}),u=g(r),c=u.next();!c.done;c=u.next())f=c.value,t.push(Q6(e,f));return C(J,Promise.all(t),2)}for(UM(e,r.map(function(fe){return fe.stream})),h=r.some(function(fe){return fe.dd==0}),r.length&&!h&&(v=TZ,iy(e,v.qh),S=r.map(function(fe){return fe.Kb}),e.l.Za(Math.min.apply(Math,T(S))),e.h.updateDuration()),h&&T_(e),R=g(r),B=R.next();!B.done;B=R.next())z=B.value,z.stream.segmentIndex&&!eu(z.stream.segmentIndex)&&e.h.disableStream(z.stream);X(J)})};function __(e,t){return pa(e)?e.O.get(t.type):t.Vd}function Q6(e,t){var n,r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An,Vn,Qn;return Re(function(ar){switch(ar.g){case 1:for(n=[],r=g(t.M()),u=r.next();!u.done;u=r.next())c=u.value,f=new Ei(c),h=f.g,t.Cd&&(0<=t.pb&&h.add("_HLS_msn",String(t.pb)),0<=t.qb&&h.add("_HLS_part",String(t.qb))),t.Dd&&h.add("_HLS_skip","YES"),Lf(h)&&$r(f,h),n.push(f.toString());return ce(ar,2),C(ar,b_(e,n,!0).promise,4);case 4:v=ar.h,me(ar,3);break;case 2:throw S=be(ar),e.h&&e.h.disableStream(t.stream),S;case 3:if(!t.stream.segmentIndex)return ar.return();if(R=v_(e.Ta,v.data),R.type!=1)throw new Xe(2,4,4017);return B=v.uri,B==v.originalUri||t.M().includes(B)||t.Qg.push(B),z=ts(R.W,"EXT-X-DEFINE"),J=S_(e,z,B),fe=t.stream,he=__(e,t),C(ar,qM(e,R,fe.mimeType,t.M,J),5);case 5:for(Ee=ar.h,Le=Ee.keyIds,Fe=Ee.drmInfos,it=function(Ar,Qr){return Ar.size===Qr.size&&[].concat(T(Ar)).every(function(Yr){return Qr.has(Yr)})},it(fe.keyIds,Le)||(fe.keyIds=Le,fe.drmInfos=Fe,e.h.newDrmInfo(fe)),Ue=YM(e,R,he,J,t.M,t.type),Qe=Ue.segments,(rt=Ue.bandwidth)&&(fe.bandwidth=rt),dt=iv(fe),gt=g(Qe),kt=gt.next();!kt.done;kt=gt.next())It=kt.value,It.$&&(It.$.Kc=dt);fe.segmentIndex.od(Qe,e.l.nb()),Qe.length&&(Ut=wd(R.W,"EXT-X-MEDIA-SEQUENCE",0),nn=(Nt=ho(R.W,"EXT-X-SKIP"))?Number($n(Nt,"SKIPPED-SEGMENTS")):0,Kt=jM(Ut,Qe),$t=Kt.pb,En=Kt.qb,t.pb=$t+nn,t.qb=En,An=he.get(Ut),fe.segmentIndex.Ga(An)),(Vn=eu(fe.segmentIndex))&&(t.rc=Vn.startTime,Qn=Qe[Qe.length-1],t.Kb=Qn.endTime),ho(R.W,"EXT-X-ENDLIST")&&(t.dd=!0),A_(e,R),I_(e,R.W,fe.type,J,t.M),X(ar)}})}p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(){},p.banLocation=function(e){this.j&&this.j.banLocation(e)},p.setMediaElement=function(e){this.ba=e};function xM(e,t){for(var n=e.I==-1,r=g(t),u=r.next();!u.done;u=r.next()){u=u.value;var c=u.stream.segmentIndex,f=__(e,u);if(c=eu(c)){f=g(f);for(var h=f.next();!h.done;h=f.next()){h=g(h.value);var v=h.next().value;if(h.next().value==c.startTime){n&&(e.I=Math.max(e.I,v)),u.Qe=v;break}}}}if(!(0>e.I))for(t=g(t),n=t.next();!n.done;n=t.next())n=n.value,Bp(e,n.type)&&(r=n.stream.segmentIndex)&&(u=e.I-n.Qe,0<u&&(r.g.splice(0,u),r=eu(r))&&(r=-r.startTime,n.stream.segmentIndex.offset(r),NM(e,n,r)))}function J6(e,t){if(e.ga==1/0){t=g(t);for(var n=t.next();!n.done;n=t.next())n=eu(n.value.stream.segmentIndex),n!=null&&n.h!=null&&(e.ga=Math.min(e.ga,n.h))}if(t=e.ga,t!=1/0){n=g(e.i.values());for(var r=n.next();!r.done;r=n.next())if(r=r.value,!Bp(e,r.type)){var u=r.stream.segmentIndex;if(u!=null){var c=eu(u);if(c)if(c.h==null)pe("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.M(),"Expect AV sync issues!");else for(NM(e,r,c.h-t-c.startTime),r=g(u),u=r.next();!u.done;u=r.next())u.value.Uf(t)}}}}function NM(e,t,n){t.rc+=n,t.Kb+=n,e=__(e,t);for(var r=g(e),u=r.next();!u.done;u=r.next()){var c=g(u.value);u=c.next().value,c=c.next().value,e.set(u,c+n)}t.M()}function eZ(e,t,n){var r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An,Vn,Qn;return Re(function(ar){switch(ar.g){case 1:return r=Mi,u=v_(e.Ta,t),c=ts(u.W,"EXT-X-DEFINE"),f=[],h=[],v=[],e.l=new rr(null,0),e.l.vc(!0),S=function(){return[n]},R=null,B=new Map,u.type==1?(e.T=!1,Ue=ts(u.W,"EXT-X-DEFINE"),B=S_(e,Ue,e.N),R=r.ja,Qe="",rt=new Map,C(ar,BM(e,e.C++,B,u,S,"",R,Qe,!0,"Media Playlist",null,rt,null,!1,null,!1),7)):(nZ(e,c),z=ts(u.W,"EXT-X-MEDIA"),J=ts(u.W,"EXT-X-STREAM-INF"),fe=ts(u.W,"EXT-X-IMAGE-STREAM-INF"),he=ts(u.W,"EXT-X-I-FRAME-STREAM-INF"),Ee=ts(u.W,"EXT-X-SESSION-KEY"),Le=ts(u.W,"EXT-X-SESSION-DATA"),Fe=ts(u.W,"EXT-X-CONTENT-STEERING"),iZ(e,Le),C(ar,oZ(e,Fe),4));case 4:return rZ(e,J),hZ(e,z),it=lZ(e,he),C(ar,cZ(e,J,Ee,z,S,e.A,it),5);case 5:return f=ar.h,h=aZ(e,z),C(ar,sZ(e,fe,he),6);case 6:v=ar.h,ar.u(3);break;case 7:dt=ar.h,e.i.set(n,dt),dt.stream&&(gt=iv(dt.stream),dt.stream.segmentIndex.Gb(function(Ar){Ar.$&&(Ar.$.Kc=gt)})),R=dt.stream.type,f.push({id:0,language:Or(Qe||"und"),disabledUntilTime:0,primary:!0,audio:R=="audio"?dt.stream:null,video:R=="video"?dt.stream:null,bandwidth:dt.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new Xe(2,7,7001);if(HM(e,u),u.type==1&&(pa(e)&&(VM(e,u),kt=e.o,e.B.Z(kt)),It=Array.from(e.i.values()),w_(e,It),T_(e),I_(e,u.W,R,B,S)),e.m={presentationTimeline:e.l,variants:f,textStreams:h,imageStreams:v,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.s},e.fa||!e.g.hls.disableCodecGuessing){ar.u(8);break}for(Ut=[],Nt=g(e.m.variants),nn=Nt.next();!nn.done;nn=Nt.next())Kt=nn.value,Kt.audio&&Kt.audio.codecs===""&&Ut.push(Kt.audio.createSegmentIndex()),Kt.video&&Kt.video.codecs===""&&Ut.push(Kt.video.createSegmentIndex());return C(ar,Promise.all(Ut),8);case 8:if(e.h.makeTextStreamsForClosedCaptions(e.m),f.length==1){for($t=[],En=f[0],An=g([En.video,En.audio]),Vn=An.next();!Vn.done;Vn=An.next())(Qn=Vn.value)&&!Qn.segmentIndex&&$t.push(Qn.createSegmentIndex());if(0<$t.length)return C(ar,Promise.all($t),0)}ar.u(0)}})}function tZ(e,t){var n,r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt;return Re(function(kt){switch(kt.g){case 1:if(n=ov(e.g.hls.mediaPlaylistFullMimeType),!t.length)return kt.return(n);if(r=WM(e,t),u=r.segment,c=r.segmentIndex,f=u.M(),h=f[0],v=new Ei(h),S=v.Pa.split(".").pop(),R=R_[S])return kt.return(ov(R));if(B=Wa,J=z=null,fe=u.$,!fe){kt.u(2);break}return he=nd(fe.M(),fe.Yb(),fe.Wb(),e.g.retryParameters),C(kt,pl(e,he,B,{type:0}).promise,3);case 3:if(Ee=kt.h,z=Ee.data,!fe.aesKey){kt.u(4);break}return C(kt,d1(z,fe.aesKey,0),5);case 5:z=kt.h;case 4:(J=Ee.headers["content-type"])&&(J=J.split(";")[0].toLowerCase());case 2:return Le=nd(u.M(),u.Yb(),u.Wb(),e.g.retryParameters),C(kt,pl(e,Le,B,{type:1}).promise,6);case 6:if(Fe=kt.h,it=Fe.data,!u.aesKey){kt.u(7);break}return C(kt,d1(it,u.aesKey,c),8);case 8:it=kt.h;case 7:if((Ue=Fe.headers["content-type"])&&(Ue=Ue.split(";")[0].toLowerCase()),Qe="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),rt=["audio/mp4","video/mp4","video/iso.segment"],op(nr(it))){var It=it,Ut=nr(It);Ut=new kr().parse(Ut);var Nt=Ut.$c();Ut=Ut.kf();var nn=[],Kt=!1,$t=!1;switch(Nt.audio){case"aac":case"aac-loas":nn.push("mp4a.40.2"),Kt=!0;break;case"mp3":nn.push("mp4a.40.34"),Kt=!0;break;case"ac3":nn.push("ac-3"),Kt=!0;break;case"ec3":nn.push("ec-3"),Kt=!0;break;case"opus":nn.push("opus"),Kt=!0}switch(Nt.video){case"avc":Ut.codec?nn.push(Ut.codec):nn.push("avc1.42E01E"),$t=!0;break;case"hvc":Ut.codec?nn.push(Ut.codec):nn.push("hvc1.1.6.L93.90"),$t=!0;break;case"av1":nn.push("av01.0.01M.08"),$t=!0}if(nn.length){if(Nt=Kt&&!$t,Kt=new Map,$t){$t=new At("video/mp2t"),$t.i(It),It=g($t.j());for(var En=It.next();!En.done;En=It.next())En=En.value,Kt.set(En,En);$t.g()}Ut={type:Nt?"audio":"video",mimeType:"video/mp2t",codecs:nn.join(", "),language:null,height:Ut.height,width:Ut.width,channelCount:null,sampleRate:null,closedCaptions:Kt,vd:null,colorGamut:null,frameRate:Ut.frameRate}}else Ut=null;if(dt=Ut)return kt.return(dt)}else if((Qe.includes(S)||rt.includes(Ue)||J&&rt.includes(J))&&(gt=V8(z,it)))return kt.return(gt);return Ue?kt.return(ov(Ue)):J?kt.return(ov(J)):kt.return(n)}})}function T_(e){if(pa(e)){if(e.za==sy){for(var t=1/0,n=1/0,r=g(e.i.values()),u=r.next();!u.done;u=r.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&(t=Math.min(t,u.Kb),n=Math.min(n,u.rc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.ne(t)}}else e.l.Za(FM(e));if(!e.l.s)for(t=g(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=eu(n.stream.segmentIndex))&&n.h&&e.l.Zg(n.h);e.l.Ud()}function nZ(e,t){var n=new Ei(e.N).g;t=g(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=$n(u,"NAME");var c=$n(u,"VALUE");u=$n(u,"QUERYPARAM"),r&&c&&(e.A.has(r)||e.A.set(r,c)),u&&(r=n.get(u)[0])&&!e.A.has(r)&&e.A.set(u,r)}}function S_(e,t,n){n=new Ei(n).g;var r=new Map;t=g(t);for(var u=t.next();!u.done;u=t.next()){var c=u.value,f=$n(c,"NAME"),h=$n(c,"VALUE");u=$n(c,"QUERYPARAM"),c=$n(c,"IMPORT"),f&&h&&(r.has(f)||r.set(f,h)),u&&(f=n.get(u)[0])&&!r.has(f)&&r.set(u,f),c&&(u=e.A.get(c))&&r.set(c,u)}return r}function rZ(e,t){t=g(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=$n(r,"AUDIO");n=$n(r,"VIDEO");var c=$n(r,"SUBTITLES");if(r=MM(e,r),c){var f=Co(_r,r);e.G.set(c,f),Kn(r,f)}u&&(c=Co("audio",r),c||(c=e.g.hls.defaultAudioCodec),e.G.set(u,c)),n&&(u=Co("video",r),u||(u=e.g.hls.defaultVideoCodec),e.G.set(n,u))}}function iZ(e,t){t=g(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=$n(r,"DATA-ID");n=$n(r,"URI");var c=$n(r,"LANGUAGE");r=$n(r,"VALUE"),u=new Map().set("id",u),n&&u.set("uri",Kl([e.N],n,e.A)[0]),c&&u.set("language",c),r&&u.set("value",r),n=new jn("sessiondata",u),e.h&&e.h.onEvent(n)}}function oZ(e,t){var n,r,u,c,f,h;return Re(function(v){if(!e.h||!e.g)return v.return();for(r=g(t),u=r.next();!u.done;u=r.next())if(c=u.value,f=$n(c,"PATHWAY-ID"),h=$n(c,"SERVER-URI"),f&&h){e.j=new _d(e.h),e.j.configure(e.g),e.j.i=[e.N],e.j.setManifestType("HLS"),e.j.h=f,n=Np(e.j,h);break}return C(v,n,0)})}function aZ(e,t){var n=wM(t,"SUBTITLES");t=n.map(function(f){if(e.g.disableText)return null;try{return LM(e,[f],new Map).stream}catch(h){if(e.g.hls.ignoreTextStreamFailures)return null;throw h}}),n=g(n);for(var r=n.next();!r.done;r=n.next()){var u=Ur(r.value,"GROUP-ID");if((r=e.G.get(u))&&(u=e.H.get(u))){u=g(u);for(var c=u.next();!c.done;c=u.next())c=c.value,c.stream.codecs=r,c.stream.mimeType=C_(_r,r)||ry(_r),Ad(c.stream)}}return t.filter(function(f){return f})}function Ad(e){var t=new Set([Di(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Gb(function(n){n.mimeType&&t.add(Di(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function sZ(e,t,n){var r,u;return Re(function(c){return c.g==1?(r=t.map(function(f){var h,v;return Re(function(S){if(S.g==1)return e.g.disableThumbnails?S.return(null):(ce(S,2),C(S,pZ(e,f),4));if(S.g!=2)return h=S.h,S.return(h.stream);if(v=be(S),e.g.hls.ignoreImageStreamFailures)return S.return(null);throw v})}).concat(n.map(function(f){if(e.g.disableThumbnails)return null;try{var h=kM(e,f);return h.stream.type!=="image"?null:h.stream}catch(v){if(e.g.hls.ignoreImageStreamFailures)return null;throw v}})),C(c,Promise.all(r),2)):(u=c.h,c.return(u.filter(function(f){return f})))})}function uZ(e,t,n){t=t.filter(function(h){var v=$n(h,"URI")||"";return $n(h,"TYPE")!="SUBTITLES"&&v!=""});var r={};t=g(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=_M(u,!e.j);r[c]?r[c].push(u):r[c]=[u]}for(var f in r)LM(e,r[f],n)}function lZ(e,t){return t.map(function(n){return n=kM(e,n),n.stream.type!=="video"?null:n.stream}).filter(function(n){return n})}function cZ(e,t,n,r,u,c,f){var h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An,Vn,Qn,ar,Ar,Qr,Yr,Si,Pr;return Re(function(Fr){switch(Fr.g){case 1:if(h=[],v=new Set,!(0<n.length)){Fr.u(2);break}S=g(n),R=S.next();case 3:if(R.done){Fr.u(2);break}if(B=R.value,z=Ur(B,"METHOD"),J=$n(B,"KEYFORMAT")||"identity",fe=null,z=="NONE"){Fr.u(4);break}if(oy(z)){he=Kl(u(),Ur(B,"URI"),c),Ee=he.sort().join(""),e.L.has(Ee)||(Le=Bi(he,e.g.retryParameters),Fe=pl(e,Le,6).promise,e.L.set(Ee,Fe)),Fr.u(4);break}if(J!="identity"){fe=(it=eD[J])?it(B,""):null,Fr.u(6);break}return C(Fr,QM(e,B,"",u,null,c),9);case 9:fe=Fr.h;case 6:if(fe){if(fe.keyIds)for(Ue=g(fe.keyIds),Qe=Ue.next();!Qe.done;Qe=Ue.next())rt=Qe.value,v.add(rt);h.push(fe)}case 4:R=S.next(),Fr.u(3);break;case 2:for(dt={},gt=g(t),kt=gt.next();!kt.done;kt=gt.next())It=kt.value,Ut=_M(It,!e.j),dt[Ut]?dt[Ut].push(It):dt[Ut]=[It];Nt=[];for(nn in dt)Kt=dt[nn],$t=Kt[0],En=$n($t,"FRAME-RATE"),An=Number($n($t,"AVERAGE-BANDWIDTH"))||Number(Ur($t,"BANDWIDTH")),Vn=$n($t,"RESOLUTION"),Qn=g(Vn?Vn.split("x"):[null,null]),ar=Qn.next().value,Ar=Qn.next().value,Qr=$n($t,"VIDEO-RANGE"),(Yr=$n($t,"REQ-VIDEO-LAYOUT"))&&Yr.includes(",")&&(Si=Yr.split(",").filter(function(si){return si=="CH-STEREO"||si=="CH-MONO"}),Yr=Si[0]),Yr=Yr||"CH-MONO",Pr=fZ(e,Kt,r),Nt.push.apply(Nt,T(dZ(e,Pr.audio,Pr.video,An,ar,Ar,En,Qr,Yr,h,v,f)));return Fr.return(Nt.filter(function(si){return si!=null}))}})}function fZ(e,t,n){for(var r={audio:[],video:[]},u=new Map,c=[],f=!1,h=!1,v=g(t),S=v.next();!S.done;S=v.next()){var R=S.value;S=$n(R,"AUDIO");var B=$n(R,"VIDEO"),z=S||B;z&&(c.includes(z)||c.push(z),(R=$n(R,"PATHWAY-ID"))&&u.set(z,R),S?f=!0:B&&(h=!0))}c.length&&n.length&&(v=n.filter(function(he){return c.includes(Ur(he,"GROUP-ID"))}),uZ(e,v,u)),v=(u=c.sort().join(","))&&e.H.has(u)?e.H.get(u):[],f?r.audio.push.apply(r.audio,T(v)):h&&r.video.push.apply(r.video,T(v)),S=!1;var J=t.map(function(he){return Ur(he,"URI")});if(h=r.audio.find(function(he){return he&&he.M().find(function(Ee){return J.includes(Ee)})}),f=MM(e,t[0]),B=Co("video",f),(z=Co("audio",f))&&!B?(h="audio",S=0<r.audio.length):!r.audio.length&&!r.video.length&&z&&B?(h="video",f=[[B,z].join()]):r.audio.length&&h?(h="audio",S=!0):h=r.video.length&&!r.audio.length?"audio":"video",!S){var fe=R=z=B=S=null;!v.length&&(n=n.find(function(he){var Ee=$n(he,"URI")||"",Le=$n(he,"TYPE");return he=Ur(he,"GROUP-ID"),Le!="SUBTITLES"&&Ee==""&&c.includes(he)}))&&(S=$n(n,"LANGUAGE"),B=$n(n,"NAME"),z=DM(n),OM(n),R=$n(n,"CHARACTERISTICS"),fe=PM(n)),e=gZ(e,t,f,h,S,B,z,R,fe),u&&(e.stream.groupId=u),r[e.stream.type]=[e]}return r}function MM(e,t){var n=$n(t,"CODECS")||"";return t=$n(t,"SUPPLEMENTAL-CODECS"),e.fa=0<n.length,e.fa||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(r){return r.split("/")[0]}),e.push.apply(e,T(t))),f1(e)}function DM(e){return(e=$n(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function PM(e){return(e=$n(e,"SAMPLE-RATE"))?parseInt(e,10):null}function OM(e){return(e=$n(e,"CHANNELS"))?e.includes("/JOC"):!1}function dZ(e,t,n,r,u,c,f,h,v,S,R,B){for(var z=g(n),J=z.next();!J.done;J=z.next())$M(J.value.stream,u,c,f,h,v,null);for(u=e.g.disableAudio,(!t.length||u)&&(t=[null]),u=e.g.disableVideo,(!n.length||u)&&(n=[null]),u=[],t=g(t),c=t.next();!c.done;c=t.next())for(c=c.value,f=g(n),h=f.next();!h.done;h=f.next()){var fe=h.value;(h=c?c.stream:null)&&(h.drmInfos=S,h.keyIds=R),(v=fe?fe.stream:null)&&(v.drmInfos=S,v.keyIds=R,zh(v,B)),v&&!h&&(v.bandwidth=r),!v&&h&&(h.bandwidth=r),z=c?c.stream.drmInfos:null,J=fe?fe.stream.drmInfos:null,fe=fe?fe.M().sort().join(","):"";var he=c?c.M().sort().join(","):"";fe=fe+" - "+he,h&&v&&!fr(z,J)||e.vb.has(fe)||(h={id:e.C++,language:h?h.language:"und",disabledUntilTime:0,primary:!!h&&h.primary||!!v&&v.primary,audio:h,video:v,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(h),e.vb.add(fe))}return u}function hZ(e,t){t=wM(t,"CLOSED-CAPTIONS"),e.T=t.length==0,t=g(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=$n(r,"LANGUAGE");n=Or(u||"und"),u||(u=$n(r,"NAME"))&&(n=u),u=Ur(r,"GROUP-ID"),r=Ur(r,"INSTREAM-ID").replace("SERVICE","svc"),e.F.get(u)||e.F.set(u,new Map),e.F.get(u).set(r,n)}}function LM(e,t,n){for(var r=[],u=[],c=new Map,f=g(t),h=f.next();!h.done;h=f.next()){var v=h.value;h=Ur(v,"URI"),v=Ur(v,"GROUP-ID"),r.push(h),u.push(v),c.set(v,h)}if(f=u.sort().join(","),h=t[0],t="",v=Ur(h,"TYPE").toLowerCase(),v=="subtitles"&&(v=_r),v==_r)t=$n(h,"CODECS")||"";else{u=g(u);for(var S=u.next();!S.done;S=u.next())if(S=S.value,e.G.has(S)){t=e.G.get(S);break}}if(u=r.sort().join(","),e.i.has(u))return e.i.get(u);if(S=e.C++,e.j){c=g(c);for(var R=c.next();!R.done;R=c.next()){var B=g(R.value);R=B.next().value,B=B.next().value,(R=n.get(R))&&Td(e.j,S,R,B)}}n=$n(h,"LANGUAGE"),c=$n(h,"NAME"),R=$n(h,"DEFAULT")=="YES",B=v=="audio"?DM(h):null;var z=v=="audio"?OM(h):!1,J=$n(h,"CHARACTERISTICS"),fe=$n(h,"FORCED")=="YES";return h=v=="audio"?PM(h):null,r=ny(e,S,r,t,v,n,R,c,B,null,J,fe,h,z),r.stream&&(r.stream.groupId=f),e.H.has(f)?e.H.get(f).push(r):e.H.set(f,[r]),e.i.set(u,r),r}function pZ(e,t){var n,r,u,c,f,h,v,S,R,B;return Re(function(z){return z.g==1?(n=Ur(t,"URI"),r=$n(t,"CODECS","jpeg")||"",e.i.has(n)?z.return(e.i.get(n)):(u=$n(t,"LANGUAGE"),c=$n(t,"NAME"),f=$n(t,"CHARACTERISTICS"),h=ny(e,e.C++,[n],r,"image",u,!1,c,null,null,f,!1,null,!1),(v=$n(t,"RESOLUTION"))?C(z,h.stream.createSegmentIndex(),3):z.u(2))):(z.g!=2&&(S=eu(h.stream.segmentIndex),R=S.tilesLayout)&&(h.stream.width=Number(v.split("x")[0])*Number(R.split("x")[0]),h.stream.height=Number(v.split("x")[1])*Number(R.split("x")[1])),(B=$n(t,"BANDWIDTH"))&&(h.stream.bandwidth=Number(B)),e.i.set(n,h),z.return(h))})}function kM(e,t){var n="video",r=Ur(t,"URI"),u=$n(t,"CODECS")||"";if(u=="mjpg"&&(n="image"),e.i.has(r))return e.i.get(r);var c=$n(t,"LANGUAGE"),f=$n(t,"NAME"),h=$n(t,"CHARACTERISTICS");return n=ny(e,e.C++,[r],u,n,c,!1,f,null,null,h,!1,null,!1),u=$n(t,"RESOLUTION"),c=g(u?u.split("x"):[null,null]),u=c.next().value,c=c.next().value,n.stream.width=Number(u)||void 0,n.stream.height=Number(c)||void 0,(t=$n(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(r,n),n}function gZ(e,t,n,r,u,c,f,h,v){for(var S=e.C++,R=[],B=g(t),z=B.next();!z.done;z=B.next()){var J=z.value;z=Ur(J,"URI"),J=$n(J,"PATHWAY-ID"),e.j&&J&&Td(e.j,S,J,z),R.push(z)}if(B=R.sort().join(","),e.i.has(B))return e.i.get(B);e:{if(t=$n(t[0],"CLOSED-CAPTIONS"),r=="video"){if(e.g.disableText){e.T=!1,t=null;break e}if(t){if(t!="NONE"){t=e.F.get(t);break e}e.T=!1}else if(!t&&e.F.size)for(t=g(e.F.keys()).next();!t.done;){t=e.F.get(t.value);break e}}t=null}return n=Ol(r,n),r=ny(e,S,R,n,r,u,!1,c,f,t,h,!1,v,!1),e.i.set(B,r),r}function ny(e,t,n,r,u,c,f,h,v,S,R,B,z,J){function fe(Qe){var rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An,Vn,Qn,ar,Ar,Qr,Yr,Si,Pr,Fr,si,Ns;return Re(function(Wi){switch(Wi.g){case 1:return rt=Mi,ce(Wi,2),dt=Fe.M(),C(Wi,Qe.promise,4);case 4:if(gt=Wi.h,Qe.aborted)return Wi.return();if(kt=gt.uri,kt==gt.originalUri||dt.includes(kt)||Le.push(kt),It=v_(e.Ta,gt.data),It.type!=1)throw new Xe(2,4,4017);return Ut=ts(It.W,"EXT-X-DEFINE"),Nt=S_(e,Ut,kt),nn=!1,(!e.fa&&e.g.hls.disableCodecGuessing||e.T&&u==rt.ja&&!e.g.hls.disableClosedCaptionsDetection)&&0<It.segments.length&&(e.T=!1,nn=!0),Kt=!e.fa&&e.g.hls.disableCodecGuessing,$t=pa(e),C(Wi,BM(e,0,Nt,It,he,r,u,c,f,h,v,S,R,B,z,J,void 0,nn,Kt),5);case 5:if(En=Wi.h,Qe.aborted)return Wi.return();if(An=En.stream,HM(e,It),pa(e)&&!$t&&VM(e,It),Fe.rc=En.rc,Fe.Kb=En.Kb,Fe.Dd=En.Dd,Fe.Cd=En.Cd,Fe.dd=En.dd,Fe.Vd=En.Vd,Fe.pb=En.pb,Fe.qb=En.qb,Fe.wf=!0,Ee.segmentIndex=An.segmentIndex,Ee.encrypted=An.encrypted,Ee.drmInfos=An.drmInfos,Ee.keyIds=An.keyIds,Ee.mimeType=An.mimeType,Ee.bandwidth=Ee.bandwidth||An.bandwidth,Ee.codecs=Ee.codecs||An.codecs,Ee.closedCaptions=Ee.closedCaptions||An.closedCaptions,Ee.width=Ee.width||An.width,Ee.height=Ee.height||An.height,Ee.hdr=Ee.hdr||An.hdr,Ee.colorGamut=Ee.colorGamut||An.colorGamut,Ee.frameRate=Ee.frameRate||An.frameRate,Ee.language=="und"&&An.language!="und"&&(Ee.language=An.language),Ee.language=Ee.language||An.language,Ee.channelsCount=Ee.channelsCount||An.channelsCount,Ee.audioSamplingRate=Ee.audioSamplingRate||An.audioSamplingRate,Ad(Ee),Ee.drmInfos.length&&e.h.newDrmInfo(Ee),Vn=!1,(!S&&Ee.closedCaptions||S&&Ee.closedCaptions&&S.size!=Ee.closedCaptions.size)&&(Vn=!0),e.m&&Vn&&e.h.makeTextStreamsForClosedCaptions(e.m),u==rt.ja||u==rt.Y)for(Qn=g(e.i.values()),ar=Qn.next();!ar.done;ar=Qn.next())Ar=ar.value,Ar.wf||Ar.type!=u||(Ar.stream.mimeType=An.mimeType,Ad(Ar.stream));u==rt.wa&&(Qr=eu(An.segmentIndex))&&Qr.$&&(Ee.mimeType="application/mp4",Ad(Ee)),Yr=iv(Ee),Ee.segmentIndex.Gb(function(Fa){Fa.$&&(Fa.$.Kc=Yr)}),mZ(e)&&(e.$b?w_(e,[Fe]):(e.$b=!0,Si=Array.from(e.i.values()),Pr=Si.filter(function(Fa){return Fa.stream.segmentIndex}),w_(e,Pr),T_(e),Fr=e.o,0<Fr&&e.B.Z(Fr))),I_(e,It.W,Ee.type,Nt,he),e.m&&(e.m.startTime=e.s),me(Wi,0);break;case 2:if(si=be(Wi),Ee.closeSegmentIndex(),si.code===7001)return Wi.return();if(Ns=e.h.disableStream(Ee),!Ns)throw si;X(Wi)}})}function he(){return e.j&&1<n.length?Mp(e.j,t):Le.concat(AM([e.N],n,e.A))}var Ee=ZM(e,r,u,c,f,h,v,S,R,B,z,J),Le=[],Fe={stream:Ee,type:u,Qg:Le,M:he,rc:0,Kb:0,Vd:new Map,Dd:!1,Cd:!1,dd:!1,Qe:-1,pb:-1,qb:-1,wf:!1},it=null,Ue;return Ee.createSegmentIndex=function(){return it||(Ue=b_(e,Fe.M(),!0),it=new Promise(function(Qe){Qe(fe(Ue))}))},Ee.closeSegmentIndex=function(){it&&!Ee.segmentIndex&&Ue.abort(),Ee.segmentIndex&&(Ee.segmentIndex.release(),Ee.segmentIndex=null),it=null},Fe}function FM(e){var t=1/0;e=g(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.Kb));return t}function UM(e,t){var n=[];t=g(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.Gb(function(u){n.push(u)});e.l.qd(n)}function w_(e,t){if(!pa(e))for(var n=FM(e),r=g(t),u=r.next();!u.done;u=r.next())u.value.stream.segmentIndex.Ec(0,n);UM(e,t.map(function(c){return c.stream})),e.g.hls.ignoreManifestProgramDateTime?xM(e,t):(J6(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&xM(e,t))}function Bp(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function mZ(e){if(!e.m)return!1;var t=[],n=[];e=g(e.m.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(u){return u.segmentIndex})||0<n.length&&!n.some(function(u){return u.segmentIndex}))}function BM(e,t,n,r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe){Le=Le===void 0?!0:Le,Fe=Fe===void 0?!0:Fe;var it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An,Vn,Qn,ar,Ar,Qr,Yr,Si,Pr,Fr,si,Ns,Wi,Fa,ss;return Re(function($i){switch($i.g){case 1:if(it=r.segments||[],Ue=it.every(function(Ms){return!!ho(Ms.W,"EXT-X-GAP")}),!it.length||Ue)throw new Xe(2,4,4053);if(vZ(e,r),pa(e)&&A_(e,r),Qe=pa(e)?e.O.get(f):new Map,rt=YM(e,r,Qe,n,u,f),dt=rt.segments,gt=rt.bandwidth,nn=Nt=Ut=It=kt=null,!(0<dt.length&&Le)){$i.u(2);break}return C($i,tZ(e,dt),3);case 3:Kt=$i.h,f=Kt.type,h=Kt.language,R=Kt.channelCount,fe=Kt.sampleRate,e.g.disableText||(B=Kt.closedCaptions),It=Kt.height,kt=Kt.width,Ut=Kt.vd,Nt=Kt.colorGamut,nn=Kt.frameRate,Fe&&(Ee=Kt.mimeType,c=Kt.codecs);case 2:if(Ee){$i.u(4);break}return C($i,_Z(e,f,c,dt),5);case 5:Ee=$i.h;case 4:return C($i,qM(e,r,Ee,u,n),6);case 6:if($t=$i.h,En=$t.drmInfos,An=$t.keyIds,Vn=$t.encrypted,Qn=$t.uh,Vn&&!En.length&&!Qn)throw new Xe(2,4,4026);return ar=ZM(e,c,f,h,v,S,R,B,z,J,fe,he),ar.encrypted=Vn,ar.drmInfos=En,ar.keyIds=An,ar.mimeType=Ee,gt&&(ar.bandwidth=gt),Ad(ar),f=="video"&&(kt||It||Ut||Nt)&&$M(ar,kt,It,nn,Ut,null,Nt),pa(e)&&A_(e,r),Ar=dt[0].startTime,Qr=dt[dt.length-1],Yr=Qr.endTime,Si=new Mr(dt),ar.segmentIndex=Si,Fr=(Pr=ho(r.W,"EXT-X-SERVER-CONTROL"))?Up(Pr,"CAN-SKIP-UNTIL")!=null:!1,si=Pr?Up(Pr,"CAN-BLOCK-RELOAD")!=null:!1,Ns=wd(r.W,"EXT-X-MEDIA-SEQUENCE",0),Wi=jM(Ns,dt),Fa=Wi.pb,ss=Wi.qb,$i.return({stream:ar,type:f,Qg:[],M:u,rc:Ar,Kb:Yr,Dd:Fr,Cd:si,dd:!1,Qe:-1,pb:Fa,qb:ss,Vd:Qe,wf:!1})}})}function jM(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{pb:e,qb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].isPreload()||(e++,n=0),{pb:e,qb:n}):(e++,t.m&&(n=0),{pb:e,qb:n})}function ZM(e,t,n,r,u,c,f,h,v,S,R,B){var z=C_(n,t)||ry(n),J=[];if(v){v=g(v.split(","));for(var fe=v.next();!fe.done;fe=v.next())J.push(fe.value)}return v=void 0,fe=null,n==_r?v=J.includes("public.accessibility.transcribes-spoken-dialog")&&J.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":J.includes("public.accessibility.describes-video")&&(fe="visually impaired"),J.length||v!=="subtitle"||J.push("subtitle"),e={id:e.C++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:z,codecs:t,kind:n==_r?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Or(r||"und"),originalLanguage:r,label:c,type:n,primary:u,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:J,forced:S,channelsCount:f,audioSamplingRate:R,spatialAudio:B,closedCaptions:h,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:fe,external:!1,fastSwitching:!1,fullMimeTypes:new Set},Ad(e),e}function qM(e,t,n,r,u){var c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En;return Re(function(An){switch(An.g){case 1:if(c=new Map,t.segments){for(f=g(t.segments),h=f.next();!h.done;h=f.next())if(v=h.value,S=ts(v.W,"EXT-X-KEY"),R=null,S.length)for(R=KM(e,t,v.W,r,u),B=g(S),z=B.next();!z.done;z=B.next())J=z.value,c.set(J,R)}he=fe=!1,Ee=[],Le=new Set,Fe=g(c),it=Fe.next();case 2:if(it.done){An.u(4);break}if(Ue=it.value,Qe=g(Ue),rt=Qe.next().value,dt=Qe.next().value,gt=rt,kt=dt,It=Ur(gt,"METHOD"),It=="NONE"){An.u(3);break}if(fe=!0,Ut=$n(gt,"KEYFORMAT")||"identity",Nt=null,oy(It)){he=!0,An.u(3);break}if(Ut!="identity"){Nt=(nn=eD[Ut])?nn(gt,n):null,An.u(6);break}return C(An,QM(e,gt,n,r,kt,u),8);case 8:Nt=An.h;case 6:if(Nt){if(Nt.keyIds)for(Kt=g(Nt.keyIds),$t=Kt.next();!$t.done;$t=Kt.next())En=$t.value,Le.add(En);Ee.push(Nt)}case 3:it=Fe.next(),An.u(2);break;case 4:return An.return({drmInfos:Ee,keyIds:Le,encrypted:fe,uh:he})}})}function GM(e,t,n,r,u){if(!m.crypto||!m.crypto.subtle)throw Ke("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new Xe(2,4,4042);var c=0,f=$n(t,"IV","");if(f){var h=$u(f.substr(2));if(h.byteLength!=16)throw new Xe(2,4,4048)}else c=wd(n.W,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+c,!e.ka.has(n)){var v={bitsKey:128,blockCipherMode:"CBC",iv:h,firstMediaSequenceNumber:c};switch(Ur(t,"METHOD")){case"AES-256":v.bitsKey=256;break;case"AES-256-CTR":v.bitsKey=256,v.blockCipherMode="CTR"}v.fetchKey=function(){var S,R,B,z,J,fe;return Re(function(he){if(he.g==1)return S=Kl(r(),Ur(t,"URI"),u),R=S.sort().join(""),e.L.has(R)||(B=Bi(S,e.g.retryParameters),z=pl(e,B,6).promise,e.L.set(R,z)),C(he,e.L.get(R),2);if(he.g!=3){if(J=he.h,!J.data||J.data.byteLength!=v.bitsKey/8)throw new Xe(2,4,4049);return fe={name:v.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:v.bitsKey},C(he,m.crypto.subtle.importKey("raw",J.data,fe,!0,["decrypt"]),3)}v.cryptoKey=he.h,v.fetchKey=void 0,X(he)})},e.ka.set(n,v)}return e.ka.get(n)}function HM(e,t){e.s==null&&(t=ho(t.W,"EXT-X-START"))&&(e.s=Number(Ur(t,"TIME-OFFSET")))}function vZ(e,t){var n=ho(t.W,"EXT-X-PLAYLIST-TYPE");t=ho(t.W,"EXT-X-ENDLIST"),t=n&&n.value=="VOD"||t,n=n&&n.value=="EVENT"&&!t,n=!t&&!n,t?iy(e,ay):n?iy(e,sy):iy(e,tD)}function A_(e,t){var n=1/0,r=t.segments;if(r.length)for(var u=r.length-1;0<=u;){var c=ho(r[u].W,"EXTINF");if(c){n=Number(c.value.split(",")[0]);break}u--}if(r=ho(t.W,"EXT-X-TARGETDURATION"),!r)throw new Xe(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(u=ho(t.W,"EXT-X-PART-INF"))&&(e.X=Number(Ur(u,"PART-TARGET"))),t=ho(t.W,"EXT-X-SERVER-CONTROL"),e.K&&e.X?(e.o=e.Hb?5*e.X<=n?Math.min(e.X,e.o):Math.min(n,e.o):Math.min(e.X,e.o),e.Fa=t?Number(Ur(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?Up(t,"HOLD-BACK"):null,e.Ea=n?Number(n.value):0),e.bb=Math.max(r,e.bb)}function VM(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.Fa)n=e.Fa;else if(e.Ea)n=e.Ea;else{var r=t.segments.length,u=e.g.hls.liveSegmentsDelay;for(u>r-2&&(u=Math.max(1,r-2)),u=r-u;u<r;u++){var c=ho(t.segments[u].W,"EXTINF");n=c?n+Math.ceil(Number(c.value.split(",")[0])):n+e.bb}}e.s&&0>e.s&&(n=Math.min(-e.s,n),e.s+=n),e.l.$g(0),e.l.Of(n),e.l.vc(!1)}function KM(e,t,n,r,u){var c=ho(n,"EXT-X-MAP");if(!c)return null;var f=Ur(c,"URI"),h=Kl(r(),f,u);if(f=[h.toString(),$n(c,"BYTERANGE","")].join("-"),!e.ta.has(f)){var v=void 0,S=null;n=g(n);for(var R=n.next();!R.done;R=n.next())R=R.value,R.name=="EXT-X-KEY"?oy(Ur(R,"METHOD"))&&R.id<c.id&&(v=GM(e,R,t,r,u)):R.name=="EXT-X-BYTERANGE"&&R.id<c.id&&(S=R);t=yZ(h,c,S,v),e.ta.set(f,t)}return e.ta.get(f)}function yZ(e,t,n,r){var u=0,c=null;return t=$n(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(u=t.split("@"),c=Number(u[0]),u=Number(u[1]),c=u+c-1,r&&(n=c+1-u,n%16&&(c+=16-n%16))),new Dn(function(){return e},u,c,null,null,null,r)}function EZ(e,t,n,r,u,c,f,h,v){function S(Vn){Vn=new Ei(Vn).Pa.split(".").pop();var Qn=x_[f][Vn];return Qn||(Qn=R_[Vn]),Qn}var R=r.W,B=ho(R,"EXTINF"),z=0,J=0,fe=null;r.Ab.length&&(e.m.isLowLatency=!0);var he=null;if(!e.g.hls.ignoreManifestProgramDateTime){var Ee=ho(R,"EXT-X-PROGRAM-DATE-TIME");Ee&&Ee.value&&(he=_s(Ee.value))}var Le=Ve;if(ho(R,"EXT-X-GAP")&&(e.m.gapCount++,Le=2),!B){if(r.Ab.length==0)throw new Xe(2,4,4024,"EXTINF");if(!e.K)return null}var Fe=[];Ee=!1;var it=null,Ue=!1,Qe=!1;if(e.K&&r.Ab.length){z=t&&m.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var rt=he,dt={},gt=0;gt<r.Ab.length;dt={ue:void 0,de:void 0},gt++){var kt=r.Ab[gt],It=gt==0?n:Fe[Fe.length-1],Ut=gt==0?u:It.endTime,Nt=Number($n(kt,"DURATION"))||e.X;if(Nt){var nn=Ut+Nt,Kt=0,$t=null;if(kt.name=="EXT-X-PRELOAD-HINT"?(Kt=(Kt=$n(kt,"BYTERANGE-START"))?Number(Kt):0,(It=$n(kt,"BYTERANGE-LENGTH"))?$t=Kt+Number(It)-1:Kt&&($t=Number.MAX_SAFE_INTEGER)):(Kt=$n(kt,"BYTERANGE"),$t=g(zM(It,Kt)),Kt=$t.next().value,$t=$t.next().value),dt.de=$n(kt,"URI"),dt.de){It=Ve,$n(kt,"GAP")=="YES"&&(e.m.gapCount++,It=2,Ue=!0),dt.ue=null;var En=function(Vn){return function(){return Vn.ue==null&&(Vn.ue=Kl(h(),Vn.de,c)),Vn.ue}}(dt);z&&0<=Kt&&$t!=null&&(it=En,Ee=!0),Ut=new et(Ut,nn,En,Kt,$t,t,0,0,1/0,[],"",null,rt,It,v),kt.name=="EXT-X-PRELOAD-HINT"&&(Ut.xf(),Qe=!0),$n(kt,"INDEPENDENT")!="YES"&&0<gt&&Ut.Jc(),(dt=S(dt.de))&&(Ut.mimeType=dt,JM.has(dt)&&(Ut.$=null)),Fe.push(Ut),rt&&(rt+=Nt)}}}}if(B){if(B=Number(B.value.split(",")[0]),B==0)return null;z=u+B}else if(Fe.length)z=Fe[Fe.length-1].endTime;else return null;Ee&&(Ue||Fe[0].Ha!=0?(Ee=!1,it=null):Fe=[]),(B=ho(R,"EXT-X-BYTERANGE"))?(fe=g(zM(n,B.value)),J=fe.next().value,fe=fe.next().value):Fe.length&&(J=Fe[0].Ha,fe=Fe[Fe.length-1].va),n="",B=null,f=="image"&&(n="1x1",R=ho(R,"EXT-X-TILES"))&&(n=Ur(R,"LAYOUT"),(R=$n(R,"DURATION"))&&(B=Number(R)));var An=null;return t=new et(u,z,function(){return it?it():(An==null&&(An=Kl(h(),r.g,c)),An||[])},J,fe,t,0,0,1/0,Fe,n,B,he,Le,v,0<Fe.length&&!!r.g),(u=S(r.g))&&(t.mimeType=u,JM.has(u)&&(t.$=null)),Ee&&(e.Hb=!0,t.Fg(),Qe&&t.xf()),t}function zM(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.va+1,r=n+t-1),[n,r]}function I_(e,t,n,r,u){if(n=="video"||n=="audio"){var c=e.l.m;if(c&&!Bp(e,n))for(t=ts(t,"EXT-X-DATERANGE"),t=t.sort(function(he,Ee){return he=Ur(he,"START-DATE"),Ee=Ur(Ee,"START-DATE"),he<Ee?-1:he>Ee?1:0}),n=0;n<t.length;n++){var f=t[n],h=Ur(f,"ID");if(!e.Da.has(h)){var v=Ur(f,"START-DATE"),S=_s(v);if(!isNaN(S)){v=Math.max(0,S-c);var R=null,B=$n(f,"END-DATE");if(B&&(B=_s(B),!isNaN(B)&&(R=B-c,0>R))||R==null&&(B=$n(f,"DURATION")||$n(f,"PLANNED-DURATION"))&&(B=parseFloat(B),isNaN(B)||(R=v+B),0>S-c+B))continue;B=$n(f,"CLASS")||"com.apple.quicktime.HLS";var z=$n(f,"END-ON-NEXT")=="YES";if(R==null&&z){for(z=n+1;z<t.length;z++){var J=$n(t[z],"CLASS")||"com.apple.quicktime.HLS";if(B==J&&(J=Ur(t[z],"START-DATE"),J=_s(J),!isNaN(J)&&J&&J>S)){R=Math.max(0,J-c);break}}if(R==null)continue}for(S=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"],z=[],f=g(f.attributes),J=f.next();!J.done;J=f.next())if(J=J.value,!S.includes(J.name)){var fe=IM(J.value,r);(J.name=="X-ASSET-URI"||J.name=="X-ASSET-LIST")&&(fe=Kl(u(),J.value,r)[0]),z.push({key:J.name,description:"",data:fe,mimeType:null,pictureType:null})}1<z.length&&e.h.onMetadata(B,v,R,z),e.Da.add(h)}}}}}function YM(e,t,n,r,u,c){var f=t.segments,h=void 0,v=wd(t.W,"EXT-X-DISCONTINUITY-SEQUENCE",0),S=wd(t.W,"EXT-X-MEDIA-SEQUENCE",0),R=ho(t.W,"EXT-X-SKIP"),B=R?Number($n(R,"SKIPPED-SEGMENTS")):0,z=S+B,J=0;pa(e)&&n.has(z)&&(J=n.get(z)),J===0&&e.za==sy&&0<n.size&&!n.has(z)&&e.l.i!=null&&(J=e.l.nb());var fe=[],he=null;R=[];for(var Ee=0;Ee<f.length;Ee++){var Le=f[Ee],Fe=Ee==0?J:he.endTime;z=S+B+Ee,ho(Le.W,"EXT-X-DISCONTINUITY")&&v++;for(var it=g(Le.W),Ue=it.next();!Ue.done;Ue=it.next())Ue=Ue.value,Ue.name=="EXT-X-KEY"&&(oy(Ur(Ue,"METHOD"))?h=GM(e,Ue,t,u,r):h=void 0);n.set(z,Fe),it=KM(e,t,Le.W,u,r),!e.K&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.K=e.h.isLowLatencyMode()),(Fe=EZ(e,it,he,Le,Fe,r,c,u,h))&&((he=wd(Le.W,"EXT-X-BITRATE"))?R.push({bitrate:he,duration:Fe.endTime-Fe.startTime}):R.length&&(he=R.pop(),he.duration+=Fe.endTime-Fe.startTime,R.push(he)),he=Fe,Fe.i=v,Bp(e,c)&&e.I!=null&&z<e.I||fe.push(Fe))}if(t=void 0,R.length&&(t=R.reduce(function(Qe,rt){return Qe+rt.duration},0),t=Math.round(R.reduce(function(Qe,rt){return Qe+rt.bitrate*rt.duration},0)/t*1e3)),R=fe.some(function(Qe){return Qe.h!=null})){for(n={},r=0;r<fe.length;n={Hd:void 0,Gd:void 0,yd:void 0,tc:void 0,xd:void 0},r++)if(n.tc=fe[r],n.tc.h==null)for(n.Gd=0,n.Hd=r,u=function(Qe){return function(){var rt=fe[Qe.Hd];if(rt){if(rt.h!=null)return rt.h+Qe.Gd;Qe.Gd-=rt.endTime-rt.startTime,Qe.Hd+=1}return null}}(n),n.xd=0,n.yd=r,f=function(Qe){return function(){var rt=fe[Qe.yd];if(rt){if(rt!=Qe.tc&&(Qe.xd+=rt.endTime-rt.startTime),rt.h!=null)return rt.h+Qe.xd;--Qe.yd}return null}}(n);n.tc.h==null;)n.tc.h=f(),n.tc.h==null&&(n.tc.h=u())}if(R)for(n=g(fe),r=n.next();!r.done;r=n.next())for(u=r.value,r=u.h,u=g(u.g),f=u.next();!f.done;f=u.next())f=f.value,f.h=r,r+=f.endTime-f.startTime;if(n=e.ga,R&&n!=1/0&&!Bp(e,c))for(e=g(fe),c=e.next();!c.done;c=e.next())c.value.Uf(n);return{segments:fe,bandwidth:t}}function C_(e,t){if(e==_r){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function ry(e){return e==_r?"text/vtt":x_[e].mp4}function WM(e,t){e=pa(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.Zb()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function _Z(e,t,n,r){var u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le;return Re(function(Fe){switch(Fe.g){case 1:return u=Wa,c=WM(e,r),f=c.segment,f.status==2?Fe.return(ry(t)):(h=f.M(),v=new Ei(h[0]),S=v.Pa.split(".").pop(),R=x_[t],(B=R[S])||(B=R_[S])||(B=C_(t,n))?Fe.return(B):(J=1,fe=Bi(h,e.g.retryParameters),ce(Fe,2),fe.method="HEAD",C(Fe,pl(e,fe,u,{type:J}).promise,4)));case 4:he=Fe.h,z=he.headers["content-type"],me(Fe,3);break;case 2:if(Ee=be(Fe),!Ee||Ee.code!=1002&&Ee.code!=1001){Fe.u(3);break}return fe.method="GET",C(Fe,pl(e,fe,u,{type:J}).promise,6);case 6:Le=Fe.h,z=Le.headers["content-type"];case 3:return z?Fe.return(z.toLowerCase().split(";")[0]):Fe.return(ry(t))}})}function $M(e,t,n,r,u,c,f){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=u||void 0,e.videoLayout=c||void 0,e.colorGamut=f||void 0)}function b_(e,t,n){return pl(e,Bi(t,e.g.retryParameters),0,{type:n?2:3})}function XM(e){var t,n,r,u,c,f;return Re(function(h){switch(h.g){case 1:return e.h?(ce(h,2),t=Date.now(),C(h,e.update(),4)):h.return();case 4:n=Date.now(),pa(e)&&(r=(n-t)/1e3,e.Eb.sample(1,r),u=e.o,c=Math.max(0,u-G(e.Eb)),e.B.Z(c)),me(h,3);break;case 2:if(f=be(h),!e.h)return h.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(f),h.return();f.severity=1,e.h.onError(f),e.B.Z(.1);case 3:if(!e.h)return h.return();e.h.onManifestUpdated(),X(h)}})}function pa(e){return e.za!=ay}function iy(e,t){e.za=t,e.l&&e.l.vc(!pa(e)),pa(e)||e.B.stop()}function pl(e,t,n,r){if(!e.ea)throw new Xe(2,7,7001);return r||(r={}),r.isPreload=e.Fb(),t=e.h.networkingEngine.request(n,t,r),il(e.ea,t),t}function oy(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function QM(e,t,n,r,u,c){var f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue;return Re(function(Qe){switch(Qe.g){case 1:if(n=="video/mp2t")throw new Xe(2,4,4040);if(Tr())throw new Xe(2,4,4041);if(f=Ur(t,"METHOD"),h=["SAMPLE-AES","SAMPLE-AES-CTR"],!h.includes(f))return Qe.return(null);if(v=Kl(r(),Ur(t,"URI"),c),v[0].startsWith("data:text/plain;base64,")){S=za(Wo(v[0].split("data:text/plain;base64,").pop())),Qe.u(2);break}return R=v.sort().join(""),e.oa.has(R)||(B=Bi(v,e.g.retryParameters),z=pl(e,B,6).promise,e.oa.set(R,z)),C(Qe,e.oa.get(R),3);case 3:J=Qe.h,S=za(J.data);case 2:if(fe="00000000000000000000000000000000",!u){Qe.u(4);break}if(e.sa.has(u)){he=e.sa.get(u),Qe.u(5);break}return Ee=nd(u.M(),u.Yb(),u.Wb(),e.g.retryParameters),Le=Wa,C(Qe,pl(e,Ee,Le,{type:0}).promise,6);case 6:Fe=Qe.h,he=z8(Fe.data),e.sa.set(u,he);case 5:he&&(fe=he);case 4:return it=new Map,it.set(fe,S),Ue="cenc",f=="SAMPLE-AES"&&(Ue="cbcs"),Qe.return(ym(it,Ue))}})}ne("shaka.hls.HlsParser",ty);var R_={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},x_={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},JM=new Set(["video/mp2t"].concat(T(Iu))),eD={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new Xe(2,4,4040);if(Tr())throw new Xe(2,4,4041);if(t=Ur(e,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),ws("com.apple.fps",n,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],Ur(e,"URI"))},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Ur(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=Ur(e,"URI"),t=E_(t.split("?")[0]),t=nr(t.data),n=ws("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=$n(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=Ur(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=Ur(e,"URI"),e=E_(e.split("?")[0]),e=nr(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Oe(e,t,new Set,0),ws("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},ay="VOD",tD="EVENT",sy="LIVE",TZ={qh:ay,oj:tD,wj:sy};Yn["application/x-mpegurl"]=function(){return new ty},Yn["application/vnd.apple.mpegurl"]=function(){return new ty};function SZ(e){var t=0,n=ln(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=nr(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function uy(e){if(e=nD(e))e:{e=g(Eo(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=Hi(t.value,"LA_URL")){e=ei(t);break e}e=""}else e="";return e}function nD(e){return e=Wo(ei(e)),e=SZ(e).filter(function(t){return t.type===wZ})[0],e?(e=ci(e.value,!0),(e=Tu(e,"WRMHEADER"))?e:null):null}var wZ=1,AZ=new Map().set("com.microsoft.playready",uy).set("com.microsoft.playready.recommendation",uy).set("com.microsoft.playready.software",uy).set("com.microsoft.playready.hardware",uy);function Id(e){if(!aD){aD=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);ly=wr("ftyp",t,r,t,n),t=wr("dref",LZ),N_=wr("dinf",t)}this.g=e}function Cd(e){for(var t=[],n=g(e.g),r=n.next();!r.done;r=n.next()){var u=t,c=u.push,f=r.value;r=wr;var h=f.id+1,v=f.stream.width||0,S=f.stream.height||0;f.type=="audio"&&(S=v=0);var R=f.duration*f.timescale,B=Math.floor(R/(zl+1));switch(R=Math.floor(R%(zl+1)),h=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(mi(h,4)),[0,0,0,0],T(mi(B,4)),T(mi(R,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],T(mi(v,2)),[0,0],T(mi(S,2)),[0,0])),h=wr("tkhd",h),v=wr,B=f.duration*f.timescale,S=Math.floor(B/(zl+1)),B=Math.floor(B%(zl+1)),R=f.stream.language,R=R.charCodeAt(0)-96<<10|R.charCodeAt(1)-96<<5|R.charCodeAt(2)-96,S=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(mi(f.timescale,4)),T(mi(S,4)),T(mi(B,4)),T(mi(R,2)),[0,0])),S=wr("mdhd",S),B=f,R=new Uint8Array([]),B.type){case"video":R=CZ;break;case"audio":R=bZ}B=wr("hdlr",R);e:{switch(f.type){case"video":f=wr("minf",wr("vmhd",DZ),N_,rD(f));break e;case"audio":f=wr("minf",wr("smhd",PZ),N_,rD(f));break e}f=new Uint8Array([])}f=v("mdia",S,B,f),r=r("trak",h,f),c.call(u,r)}for(t=hi.apply(co,T(t)),c=e.g[0],n=wr,r=c.duration*c.timescale,u=Math.floor(r/(zl+1)),r=Math.floor(r%(zl+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(mi(c.timescale,4)),T(mi(u,4)),T(mi(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=wr("mvhd",u),r=[],e=g(e.g),v=e.next();!v.done;v=e.next())f=r,h=f.push,v=new Uint8Array([0,0,0,0].concat(T(mi(v.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),v=wr("trex",v),h.call(f,v);if(e=hi.apply(co,T(r)),e=wr("mvex",e),r=[],c.encrypted){for(c=g(c.stream.drmInfos),f=c.next();!f.done;f=c.next())if(f=f.value,f.initData)for(f=g(f.initData),h=f.next();!h.done;h=f.next())r.push(h.value.initData);c=hi.apply(co,T(r))}else c=new Uint8Array([]);return e=n("moov",u,t,e,c),t=new Uint8Array(ly.byteLength+e.byteLength),t.set(ly),t.set(e,ly.byteLength),t}function rD(e){var t=wr,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.ya.byteLength)var u=wr("avcC",e.ya);else{u=wr;for(var c=7,f=[],h=[],v=0,S=0,R=0,B=0;B<e.ab.length;B++){var z=oD(e.ab[B]);switch(z[0]&31){case 7:f.push(z),c+=z.length+2;break;case 8:h.push(z),c+=z.length+2}}for(0<f.length&&(v=f[0][1],R=f[0][2],S=f[0][3]),c=new Uint8Array(c),B=0,c[B++]=1,c[B++]=v,c[B++]=R,c[B++]=S,c[B++]=255,c[B++]=224|f.length,v=0;v<f.length;v++)c[B++]=(f[v].length&65280)>>8,c[B++]=f[v].length&255,c.set(f[v],B),B+=f[v].length;for(c[B++]=h.length,f=0;f<h.length;f++)c[B++]=(h[f].length&65280)>>8,c[B++]=h[f].length&255,c.set(h[f],B),B+=h[f].length;u=u("avcC",c)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(mi(n,2)),T(mi(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",h=iD(e),f=new Uint8Array([]),e.encrypted&&(f=bd(e),r="encv"),n=wr(r,n,u,h,f)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,u=e.stream.height||0,n=new Uint8Array([]),0<e.ya.byteLength&&(n=wr("hvcC",e.ya)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(mi(r,2)),T(mi(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",h=iD(e),f=new Uint8Array([]),e.encrypted&&(f=bd(e),u="encv"),n=wr(u,r,n,h,f));break;case"audio":e.codecs.includes("mp3")?e=wr(".mp3",jp(e)):e.codecs.includes("ac-3")?(n=wr("dac3",e.qa),r="ac-3",u=new Uint8Array([]),e.encrypted&&(u=bd(e),r="enca"),e=wr(r,jp(e),n,u)):e.codecs.includes("ec-3")?(n=wr("dec3",e.qa),r="ec-3",u=new Uint8Array([]),e.encrypted&&(u=bd(e),r="enca"),e=wr(r,jp(e),n,u)):e.codecs.includes("opus")?(n=wr("dOps",e.qa),r="Opus",u=new Uint8Array([]),e.encrypted&&(u=bd(e),r="enca"),e=wr(r,jp(e),n,u)):(0<e.qa.byteLength?n=wr("esds",e.qa):(n=wr,r=e.id+1,u=e.stream.channelsCount||2,f=e.stream.audioSamplingRate||44100,v=Ol("audio",e.codecs.split(",")),S={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},h=S[f],(v==="mp4a.40.5"||v==="mp4a.40.29")&&(h=S[2*f]),f=parseInt(v.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(T(mi(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,f<<3|h>>>1,h<<7|u<<3,6,1,2])),n=n("esds",r)),r="mp4a",u=new Uint8Array([]),e.encrypted&&(u=bd(e),r="enca"),e=wr(r,jp(e),n,u)),n=e}return e=wr("stsd",OZ,n),t("stbl",e,wr("stts",RZ),wr("stsc",xZ),wr("stsz",MZ),wr("stco",NZ))}function iD(e){if(!e.Ba&&!e.Ca)return new Uint8Array([]);var t=e.Ca;return e=new Uint8Array([].concat(T(mi(e.Ba,4)),T(mi(t,4)))),wr("pasp",e)}function jp(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(T(mi(e.stream.audioSamplingRate||44100,2)),[0,0]))}function bd(e){for(var t=wr,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,u=0;u<n.length;u+=1)r|=n.charCodeAt(u)<<8*(n.length-u-1);n=new Uint8Array([].concat(T(mi(r,4)))),n=wr("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=wr("schm",r),u=wr;var c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=g(e.stream.drmInfos);for(var f=e.next();!f.done;f=e.next())if((f=f.value)&&f.keyIds&&f.keyIds.size){f=g(f.keyIds);for(var h=f.next();!h.done;h=f.next())c=oD(h.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),c=wr("tenc",e,c),t("sinf",n,r,u("schi",c))}function Zp(e){var t=[];e=g(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,u=r.apply,c=wr,f=new Uint8Array([0,0,0,0].concat(T(mi(n.data?n.data.sb:0,4))));f=wr("mfhd",f);var h,v=n.data?n.data.Ya:[],S=new Uint8Array(4+v.length);for(h=0;h<v.length;h++){var R=v[h].flags;S[h+4]=R.Va<<4|R.Xa<<2|R.Wa}v=wr("sdtp",S);var B=v.length+92;S=wr,h=new Uint8Array([0,0,0,58].concat(T(mi(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=wr("tfhd",h),R=n.data?n.data.baseMediaDecodeTime:0;var z=Math.floor(R%(zl+1));R=new Uint8Array([1,0,0,0].concat(T(mi(Math.floor(R/(zl+1)),4)),T(mi(z,4)))),R=wr("tfdt",R);var J=B;B=n.data?n.data.Ya:[],z=B.length;var fe=12+16*z,he=new Uint8Array(fe);for(J+=8+fe,he.set([n.type==="video"?1:0,0,15,1].concat(T(mi(z,4)),T(mi(J,4))),0),J=0;J<z;J++){var Ee=B[J];fe=mi(Ee.duration,4);var Le=mi(Ee.size,4),Fe=Ee.flags;Ee=mi(Ee.eb,4),he.set([].concat(T(fe),T(Le),[Fe.hb<<2|Fe.Va,Fe.Xa<<6|Fe.Wa<<4|Fe.ib,Fe.Ua&61440,Fe.Ua&15],T(Ee)),12+16*J)}B=wr("trun",he),v=S("traf",h,R,B,v),c=c("moof",f,v),u.call(r,t,[c,IZ(n)])}return hi.apply(co,T(t))}function IZ(e){return e=(e.data?e.data.Ya:[]).map(function(t){return t.data}),e=hi.apply(co,T(e)),wr("mdat",e)}function mi(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function oD(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function wr(e){var t=Ye.apply(1,arguments),n=sD[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],sD[e]=n);for(var r=8,u=t.length-1;0<=u;u--)r+=t[u].byteLength;for(u=new Uint8Array(r),u[0]=r>>24&255,u[1]=r>>16&255,u[2]=r>>8&255,u[3]=r&255,u.set(n,4),n=0,r=8;n<t.length;n++)u.set(t[n],r),r+=t[n].byteLength;return u}var aD=!1,zl=Math.pow(2,32)-1,sD={},CZ=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),bZ=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),RZ=new Uint8Array([0,0,0,0,0,0,0,0]),xZ=new Uint8Array([0,0,0,0,0,0,0,0]),NZ=new Uint8Array([0,0,0,0,0,0,0,0]),MZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),DZ=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),PZ=new Uint8Array([0,0,0,0,0,0,0,0]),OZ=new Uint8Array([0,0,0,0,0,0,0,1]),ly=new Uint8Array([]),LZ=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),N_=new Uint8Array([]);function M_(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.C=new D(5),this.o=new on(function(){kZ(e)}),this.B=new rl,this.m=new Map,this.A=function(){return!1}}p=M_.prototype,p.configure=function(e,t){this.g=e,t&&(this.A=t)},p.start=function(e,t){var n=this;return Re(function(r){if(r.g==1)return n.l=[e],n.h=t,C(r,D_(n),2);if(!n.h)throw new Xe(2,7,7001);return r.return(n.j)})};function kZ(e){var t;Re(function(n){switch(n.g){case 1:return ce(n,2),C(n,D_(e),4);case 4:me(n,3);break;case 2:t=be(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();X(n)}})}p.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.B.destroy()},p.update=function(){var e=this,t;return Re(function(n){if(n.g==1)return ce(n,2),C(n,D_(e),4);if(n.g!=2)return me(n,0);if(t=be(n),!e.h||!t)return n.return();e.h.onError(t),X(n)})},p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(){},p.banLocation=function(){},p.setMediaElement=function(){};function D_(e){var t,n,r,u,c,f,h;return Re(function(v){if(v.g==1)return t=Bi(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),u=n.request(0,t,{type:5,isPreload:e.A()}),il(e.B,u),C(v,u.promise,2);if(c=v.h,!e.h)return v.return();c.uri&&!e.l.includes(c.uri)&&e.l.unshift(c.uri);var S=c.uri,R=c.data,B=e.g.mss.manifestPreprocessor;if(B!=fv){if(gr("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),R=aM(R,"SmoothStreamingMedia"),!R)throw new Xe(2,4,4046,S);B(R),R=Ci(R.outerHTML)}var z=_u(R,"SmoothStreamingMedia");if(!z)throw new Xe(2,4,4046,S);if(S=e.g.mss.manifestPreprocessorTXml,S!=dv&&S(z),e.i||(e.i=new rr(null,0)),S=Er(z,"IsLive",Hs,!1))throw new Xe(2,4,4047);e.i.vc(!S),B=Er(z,"TimeScale",lo,1e7),R=Er(z,"DVRWindowLength",lo),S&&(R===0||isNaN(R))&&(R=1/0);var J=Er(z,"CanSeek",Hs,!1);R===0&&J&&(R=1/0),J=null,R&&0<R&&(J=R/B),S&&!isNaN(e.g.availabilityWindowOverride)&&(J=e.g.availabilityWindowOverride),J==null&&(J=1/0),e.i.ne(J),R=Er(z,"Duration",lo,1/0),S||e.i.Za(R/B),S={variants:[],textStreams:[],timescale:B,duration:R/B};var fe;for(J=sr(z,"Protection"),B=e.g.mss.keySystemsBySystemId,R=[],J=g(J),fe=J.next();!fe.done;fe=J.next())R=R.concat(sr(fe.value,"ProtectionHeader"));if(R.length){for(J=[],fe=0;fe<R.length;fe++){var he=R[fe],Ee=he.attributes.SystemID.toLowerCase(),Le=B[Ee];if(Le){var Fe=nD(he);if(Fe)e:{Fe=g(Eo(Fe,"DATA"));for(var it=Fe.next();!it.done;it=Fe.next())if(it=Hi(it.value,"KID")){Fe=Wo(ei(it)),Fe=new Uint8Array([Fe[3],Fe[2],Fe[1],Fe[0],Fe[5],Fe[4],Fe[7],Fe[6]].concat(T(Fe.slice(8)))),Fe=za(Fe);break e}Fe=null}else Fe=null;it=Wo(ei(he)),Ee=$u(Ee.replace(/-/g,"")),Ee=[{initData:Oe(it,Ee,new Set,0),initDataType:"cenc",keyId:Fe}],Ee=ws(Le,"cenc",Ee),Fe&&Ee.keyIds.add(Fe),(Le=AZ.get(Le))&&(Ee.licenseServerUri=Le(he)),J.push(Ee)}}B=J}else B=[];for(fe=B,J=[],B=[],R=[],z=sr(z,"StreamIndex"),z=g(z),he=z.next();!he.done;he=z.next()){he=he.value,Le=sr(he,"QualityLevel"),Ee=S.timescale,Fe=S.duration,it=sr(he,"c");for(var Ue=[],Qe=0,rt=0;rt<it.length;++rt){var dt=it[rt],gt=it[rt+1],kt=Er(dt,"t",lo),It=Er(dt,"d",lo);if(dt=Er(dt,"r",Ec),!It)break;if(kt=kt!=null?kt:Qe,dt=dt||0,0>dt)if(gt){if(gt=Er(gt,"t",lo),gt==null)break;if(kt>=gt)break;dt=Math.ceil((gt-kt)/It)-1}else{if(Fe==1/0)break;if(kt/Ee>=Fe)break;dt=Math.ceil((Fe*Ee-kt)/It)-1}for(gt=0;gt<=dt;++gt)Qe=kt+It,Ue.push({start:kt/Ee,end:Qe/Ee,Zf:kt}),kt=Qe}for(Ee=Ue,Le=g(Le),Fe=Le.next();!Fe.done;Fe=Le.next())(Fe=FZ(e,he,Fe.value,Ee,fe,S))&&(Fe.type!="audio"||e.g.disableAudio?Fe.type!="video"||e.g.disableVideo?Fe.type!=_r||e.g.disableText||R.push(Fe):B.push(Fe):J.push(Fe))}for(z=[],J=g(0<J.length?J:[null]),fe=J.next();!fe.done;fe=J.next())for(fe=fe.value,he=g(0<B.length?B:[null]),Ue=he.next();!Ue.done;Ue=he.next())Le=z,Ee=Le.push,Fe=e,it=fe,Ue=Ue.value,rt=0,it&&it.bandwidth&&0<it.bandwidth&&(rt+=it.bandwidth),Ue&&Ue.bandwidth&&0<Ue.bandwidth&&(rt+=Ue.bandwidth),Fe={id:Fe.s++,language:it?it.language:"und",disabledUntilTime:0,primary:!!it&&it.primary||!!Ue&&Ue.primary,audio:it,video:Ue,bandwidth:rt,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},Ee.call(Le,Fe);S.variants=z,S.textStreams=R,e.j?(e.j.variants=S.variants,e.j.textStreams=S.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:S.variants,textStreams:S.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.Ud()),Promise.resolve(),f=Date.now(),h=(f-r)/1e3,e.C.sample(1,h),X(v)})}function FZ(e,t,n,r,u,c){var f=t.attributes.Type;if(f!=="audio"&&f!=="video"&&f!=="text")return Ke("Ignoring unrecognized type:",f),null;var h=t.attributes.Language,v=e.s++,S=Er(n,"Bitrate",Gs),R=Er(n,"MaxWidth",Gs),B=Er(n,"MaxHeight",Gs),z=Er(n,"Channels",Gs),J=Er(n,"SamplingRate",Gs),fe=c.duration;r.length&&(fe=r[r.length-1].end-r[0].start);var he=e.i.getDuration();e.i.Za(Math.min(fe,he));var Ee={id:v,originalId:t.attributes.Name||String(v),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:S||0,width:R||void 0,height:B||void 0,kind:"",encrypted:0<u.length,drmInfos:u,keyIds:new Set,language:Or(h||"und"),originalLanguage:h,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:z,audioSamplingRate:J,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:fe,timescale:c.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((u=t.attributes.Subtype)&&((u=GZ[u])&&Ee.roles.push(u),u==="main"&&(Ee.primary=!0)),u=n.attributes.FourCC,(u===null||u==="")&&(u=t.attributes.FourCC),!u){if(f==="audio")u="AAC";else if(f==="video")return Ke('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!qZ.includes(u.toUpperCase()))return Ke("Codec not supported:",u),null;switch(n=UZ(n,f,u,Ee),Ee.mssPrivateData.codecPrivateData=n,f){case"audio":if(!n)return Ke("Quality unsupported without CodecPrivateData",f),null;Ee.type="audio",Ee.mimeType="mss/audio/mp4",Ee.codecs=BZ(u,n);break;case"video":if(!n)return Ke("Quality unsupported without CodecPrivateData",f),null;Ee.type="video",Ee.mimeType="mss/video/mp4",Ee.codecs=jZ(n);break;case"text":Ee.type=_r,Ee.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(Ee.codecs="stpp")}return Ee.fullMimeTypes.add(Di(Ee.mimeType,Ee.codecs)),Ee.createSegmentIndex=function(){if(Ee.segmentIndex)return Promise.resolve();if(e.m.has(Ee.id))var Le=e.m.get(Ee.id);else Le=[],Ee.type=="video"&&(Le=Ee.mssPrivateData.codecPrivateData.split("00000001").slice(1)),Le={id:Ee.id,type:Ee.type,codecs:Ee.codecs,encrypted:Ee.encrypted,timescale:Ee.mssPrivateData.timescale,duration:Ee.mssPrivateData.duration,ab:Le,qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:null,stream:Ee},Le=Cd(new Id([Le])),e.m.set(Ee.id,Le);return Le=ZZ(e,new Dn(function(){return[]},0,null,iv(Ee),Ee.mssPrivateData.timescale,Le),Ee,t,r),Ee.segmentIndex=new Mr(Le),Promise.resolve()},Ee.closeSegmentIndex=function(){Ee.segmentIndex&&(Ee.segmentIndex.release(),Ee.segmentIndex=null)},Ee}function UZ(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=u[e],n==="AACH"?(n=new Uint8Array(4),e=u[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function BZ(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function jZ(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function ZZ(e,t,n,r,u){var c=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[],u=g(u);for(var f=u.next(),h={};!f.done;h={pe:void 0},f=u.next())h.pe=f.value,r.push(new et(h.pe.start,h.pe.end,function(v){return function(){return Ki(e.l,[c.replace("{start time}",String(v.pe.Zf))])}}(h),0,null,t,0,0,n.mssPrivateData.duration));return r}ne("shaka.mss.MssParser",M_);var qZ="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),GZ={CAPT:"main",SUBT:"alternate",DESC:"main"};Yn["application/vnd.ms-sstr+xml"]=function(){return new M_};function uD(e,t,n,r,u,c){if(200<=n&&299>=n&&n!=202)return{uri:u||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};var f=null;try{f=Br(t)}catch(h){}throw new Xe(n==401||n==403?2:1,1,1001,r,n,f,e,c,u||r)}function P_(){}function cy(e,t,n,r,u,c){var f=new YZ;Cu(t.headers).forEach(function(R,B){f.append(B,R)});var h=new KZ,v={ig:!1,kh:!1};if(e=HZ(e,n,{body:t.body||void 0,headers:f,method:t.method,signal:h.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},v,r,u,t.streamDataCallback,c.minBytesForProgressEvents||0),e=new pi(e,function(){return v.ig=!0,h.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var S=new on(function(){v.kh=!0,h.abort()});S.Z(t/1e3),e.finally(function(){S.stop()})}return e}function HZ(e,t,n,r,u,c,f,h){var v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue;return Re(function(Qe){switch(Qe.g){case 1:return v=VZ,S=zZ,J=z=0,fe=Date.now(),ce(Qe,2),C(Qe,v(e,n),4);case 4:if(R=Qe.h,c(lD(R.headers)),n.method=="HEAD"){Qe.u(5);break}return he=R.clone().body.getReader(),Le=(Ee=R.headers.get("Content-Length"))?parseInt(Ee,10):0,Fe=function(rt){function dt(){var gt,kt,It,Ut;return Re(function(Nt){switch(Nt.g){case 1:return ce(Nt,2),C(Nt,he.read(),4);case 4:gt=Nt.h,me(Nt,3);break;case 2:return be(Nt),Nt.return();case 3:if(gt.done){Nt.u(5);break}if(z+=gt.value.byteLength,!f){Nt.u(5);break}return C(Nt,f(gt.value),5);case 5:kt=Date.now(),It=z-J,(100<kt-fe&&It>=h||gt.done)&&(Ut=gt.done?0:Le-z,u(kt-fe,It,Ut),J=z,fe=kt),gt.done?rt.close():(rt.enqueue(gt.value),dt()),X(Nt)}})}dt()},new S({start:Fe}),C(Qe,R.arrayBuffer(),6);case 6:B=Qe.h;case 5:me(Qe,3);break;case 2:throw it=be(Qe),r.ig?new Xe(1,1,7001,e,t):r.kh?new Xe(1,1,1003,e,t):new Xe(1,1,1002,e,it,t);case 3:return Ue=lD(R.headers),Qe.return(uD(Ue,B,R.status,e,R.url,t))}})}function lD(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function cD(){if(m.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(m.Response){if(!new Response("").body)return!1}else return!1;return!(!m.fetch||"polyfill"in m.fetch||!m.AbortController)}ne("shaka.net.HttpFetchPlugin",P_),P_.isSupported=cD,P_.parse=cy;var VZ=m.fetch,KZ=m.AbortController,zZ=m.ReadableStream,YZ=m.Headers;cD()&&(Xs("http",cy,2,!0),Xs("https",cy,2,!0),Xs("blob",cy,2,!0));function fD(){}function fy(e,t,n,r,u,c){var f=new WZ,h=Date.now(),v=0,S=new Promise(function(R,B){f.open(t.method,e,!0),f.responseType="arraybuffer",f.timeout=t.retryParameters.timeout,f.withCredentials=t.allowCrossSiteCredentials,f.onabort=function(){B(new Xe(1,1,7001,e,n))};var z=!1;f.onreadystatechange=function(){if(f.readyState==2&&!z){var fe=dD(f);u(fe),z=!0}},f.onload=function(fe){var he=dD(f),Ee=f.response;try{r(Date.now()-h,fe.loaded-v,0);var Le=uD(he,Ee,f.status,e,f.responseURL,n);R(Le)}catch(Fe){B(Fe)}},f.onerror=function(fe){B(new Xe(1,1,1002,e,fe,n))},f.ontimeout=function(){B(new Xe(1,1,1003,e,n))},f.onprogress=function(fe){var he=Date.now(),Ee=c.minBytesForProgressEvents||0,Le=fe.loaded-v;(100<he-h&&Le>=Ee||fe.lengthComputable&&fe.loaded==fe.total)&&(r(he-h,Le,f.readyState==4?0:fe.total-fe.loaded),v=fe.loaded,h=he)};for(var J in t.headers)f.setRequestHeader(J.toLowerCase(),t.headers[J]);f.send(t.body)});return new pi(S,function(){return f.abort(),Promise.resolve()})}function dD(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}ne("shaka.net.HttpXHRPlugin",fD),fD.parse=fy;var WZ=m.XMLHttpRequest;Xs("http",fy,1,!0),Xs("https",fy,1,!0),Xs("blob",fy,1,!0);function hD(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function O_(e){return e.M().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Ha+":"+e.va}function $Z(e,t){return nd(e.g.M(),e.g.Ha,e.g.va,t.streaming.retryParameters)}function pD(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function gD(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}pD.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function mD(e){var t=this;this.o=e,this.j=new Map,this.i=new jl(function(){return L_(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new pD}mD.prototype.destroy=function(){return this.i.destroy()};function XZ(e,t,n){e.m=t,e.l=n}function L_(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function QZ(e,t,n,r,u,c){Zr(e.i);var f=(e.j.get(t)||Promise.resolve()).then(function(){var h,v,S,R,B,z,J;return Re(function(fe){if(fe.g==1)return C(fe,eq(e,n),2);if(h=fe.h,e.i.g)throw new Xe(2,9,7001);if(u)for(R in v=nr(h),S=new ze(v),S.data)B=Number(R),z=S.data[B],J=S.g[B],e.l(z,J);e.g.close(r,h.byteLength);var he=e.g;return e.m(he.i==0?0:he.j/he.i,e.g.h),fe.return(c(h))})});e.j.set(t,f)}function JZ(e){return Re(function(t){return t.g==1?C(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function eq(e,t){var n,r,u,c;return Re(function(f){return f.g==1?(n=Wa,r=e.o.request(n,t),u=function(){return r.abort()},e.h.push(u),C(f,r.promise,2)):(c=f.h,Kn(e.h,u),f.return(c.data))})}function dy(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Lr,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}dy.prototype.abort=function(){var e=this;return Re(function(t){if(t.g==1){try{e.i.abort()}catch(n){}return ce(t,2),C(t,e.g,4)}if(t.g!=2)return me(t,0);be(t),X(t)})};function k_(e,t){return new Promise(function(n,r){var u=e.h.openCursor();u.onerror=r,u.onsuccess=function(){var c;return Re(function(f){if(f.g==1)return u.result==null?(n(),f.return()):(c=u.result,C(f,t(c.key,c.value,c),2));c.continue(),X(f)})}})}dy.prototype.store=function(){return this.h},dy.prototype.promise=function(){return this.g};function F_(e){this.h=e,this.g=[]}F_.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Uc(e,t){return hy(e,t,"readwrite")}function hy(e,t,n){n=e.h.transaction([t],n);var r=new dy(n,t);return e.g.push(r),r.promise().then(function(){Kn(e.g,r)},function(){Kn(e.g,r)}),r}function Bc(e,t,n){this.h=new F_(e),this.i=t,this.g=n}p=Bc.prototype,p.destroy=function(){return this.h.destroy()},p.hasFixedKeySpace=function(){return!0},p.addSegments=function(){return vD(this.i)},p.removeSegments=function(e,t){return yD(this,this.i,e,t)},p.getSegments=function(e){var t=this,n;return Re(function(r){return r.g==1?C(r,ED(t,t.i,e),2):(n=r.h,r.return(n.map(function(u){return t.lg(u)})))})},p.addManifests=function(){return vD(this.g)},p.updateManifest=function(){return Promise.reject(new Xe(2,9,9016,"Cannot modify values in "+this.g))};function tq(e,t,n){e=Uc(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}p.updateManifestExpiration=function(e,t){var n=Uc(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=t,r.put(u,e))},n.promise()},p.removeManifests=function(e,t){return yD(this,this.g,e,t)},p.getManifests=function(e){var t=this,n;return Re(function(r){return r.g==1?C(r,ED(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(u){return t.Xc(u)}))))})},p.getAllManifests=function(){var e=this,t,n;return Re(function(r){return r.g==1?(t=hy(e.h,e.g,"readonly"),n=new Map,C(r,k_(t,function(u,c){var f;return Re(function(h){if(h.g==1)return C(h,e.Xc(c),2);f=h.h,n.set(u,f),X(h)})}),2)):r.g!=3?C(r,t.promise(),3):r.return(n)})},p.lg=function(e){return e},p.Xc=function(e){return Promise.resolve(e)};function vD(e){return Promise.reject(new Xe(2,9,9011,"Cannot add new value to "+e))}p.add=function(e,t){var n=this,r,u,c,f,h,v,S;return Re(function(R){if(R.g==1){for(r=Uc(n.h,e),u=r.store(),c=[],f=g(t),h=f.next(),v={};!h.done;v={If:void 0},h=f.next())S=h.value,v.If=u.add(S),v.If.onsuccess=function(B){return function(){c.push(B.If.result)}}(v);return C(R,r.promise(),2)}return R.return(c)})};function yD(e,t,n,r){e=Uc(e.h,t),t=e.store(),n=g(n);for(var u=n.next(),c={};!u.done;c={tf:void 0},u=n.next())c.tf=u.value,t.delete(c.tf).onsuccess=function(f){return function(){return r(f.tf)}}(c);return e.promise()}function ED(e,t,n){var r,u,c,f,h,v,S;return Re(function(R){if(R.g==1){for(r=hy(e.h,t,"readonly"),u=r.store(),c={},f=[],h=g(n),v=h.next(),S={};!v.done;S={ie:void 0,Qd:void 0},v=h.next())S.Qd=v.value,S.ie=u.get(S.Qd),S.ie.onsuccess=function(B){return function(){B.ie.result==null&&f.push(B.Qd),c[B.Qd]=B.ie.result}}(S);return C(R,r.promise(),2)}if(f.length)throw new Xe(2,9,9012,"Could not find values for "+f);return R.return(n.map(function(B){return c[B]}))})}function qp(e){this.g=new F_(e)}qp.prototype.destroy=function(){return this.g.destroy()},qp.prototype.getAll=function(){var e=this,t,n;return Re(function(r){return r.g==1?(t=hy(e.g,"session-ids","readonly"),n=[],C(r,k_(t,function(u,c){n.push(c)}),2)):r.g!=3?C(r,t.promise(),3):r.return(n)})},qp.prototype.add=function(e){var t=Uc(this.g,"session-ids"),n=t.store();e=g(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},qp.prototype.remove=function(e){var t=this,n;return Re(function(r){return r.g==1?(n=Uc(t.g,"session-ids"),C(r,k_(n,function(u,c,f){e.includes(c.sessionId)&&f.delete()}),2)):C(r,n.promise(),0)})};function Xo(){this.g=new Map}Xo.prototype.destroy=function(){for(var e=[],t=g(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Xo.prototype.init=function(){var e=this;Gp.forEach(function(u,c){(u=u())&&e.g.set(c,u)});for(var t=[],n=g(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function _D(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){u.hasFixedKeySpace()||t||(t={path:{ob:r,Ia:c},Ia:u})})}),t)return t;throw new Xe(2,9,9013,"Could not find a cell that supports add-operations")}function nq(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){t({ob:r,Ia:c},u)})})}function py(e,t,n){if(e=e.g.get(t),!e)throw new Xe(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new Xe(2,9,9013,"Could not find cell with name "+n);return t}function rq(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function iq(e){var t=Array.from(e.g.keys());if(!t.length)throw new Xe(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function oq(e){var t,n,r;return Re(function(u){return u.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=Gp,r.forEach(function(c){(c=c())&&t.push(c)})),C(u,Promise.all(t.map(function(c){return c.erase()})),2)):n?u.u(0):C(u,Promise.all(t.map(function(c){return c.destroy()})),0)})}function TD(e,t){Gp.set(e,t)}ne("shaka.offline.StorageMuxer",Xo),Xo.unregister=function(e){Gp.delete(e)},Xo.register=TD,Xo.prototype.destroy=Xo.prototype.destroy;var Gp=new Map;function Hp(){Bc.apply(this,arguments)}Y(Hp,Bc),Hp.prototype.updateManifestExpiration=function(e,t){var n=this,r,u,c;return Re(function(f){return r=Uc(n.h,n.g),u=r.store(),c=new Lr,u.get(e).onsuccess=function(h){(h=h.target.result)?(h.expiration=t,u.put(h),c.resolve()):c.reject(new Xe(2,9,9012,"Could not find values for "+e))},C(f,Promise.all([r.promise(),c]),0)})},Hp.prototype.Xc=function(e){var t,n,r,u,c,f;return Re(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime,c=aq(e.periods[n],u),t.push(c);return C(h,QN(t),2)}return f=h.h,h.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:f,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function aq(e,t){uq(e);for(var n=g(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(u){return sq(u,e.startTime,t)})}function sq(e,t,n){var r=e.initSegmentUri?SD(e.initSegmentUri):null,u=t+e.presentationTimeOffset,c=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(f){var h=SD(f.uri);return{startTime:t+f.startTime,endTime:t+f.endTime,dataKey:h,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:c,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Hp.prototype.lg=function(e){return{data:e.data}};function SD(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Xe(2,9,9004,"Could not parse uri "+e)}function uq(e){var t=e.streams.filter(function(h){return h.contentType=="audio"});if(e=e.streams.filter(function(h){return h.contentType=="video"}),!t.every(function(h){return h.variantIds})||!e.every(function(h){return h.variantIds})){for(var n=g(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=g(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){r=n++;for(var u=g(e),c=u.next();!c.done;c=u.next())c.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,u=g(t),c=u.next();!c.done;c=u.next())c.value.variantIds.push(r);if(e.length&&t.length)for(t=g(t),r=t.next();!r.done;r=t.next())for(r=r.value,u=g(e),c=u.next();!c.done;c=u.next()){c=c.value;var f=n++;r.variantIds.push(f),c.variantIds.push(f)}}}function gy(){Bc.apply(this,arguments)}Y(gy,Bc),gy.prototype.Xc=function(e){var t,n,r,u,c,f;return Re(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime;for(var v=e.periods[n],S=[],R=g(v.streams),B=R.next();!B.done;B=R.next())B=B.value,B.variantIds.length!=0&&S.push(lq(B,v.startTime,v.startTime+u));c=S,t.push(c)}return C(h,QN(t),2)}return f=h.h,h.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:f,sequenceMode:!1})})};function lq(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function U_(){Bc.apply(this,arguments)}Y(U_,Bc),p=U_.prototype,p.hasFixedKeySpace=function(){return!1},p.addSegments=function(e){return this.add(this.i,e)},p.addManifests=function(e){return this.add(this.g,e)},p.updateManifest=function(e,t){return tq(this,e,t)},p.Xc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function wD(){this.m=this.j=this.i=this.h=this.g=this.l=null}p=wD.prototype,p.init=function(){var e=this,t=new Lr,n=!1,r=new on(function(){n=!0,t.reject(new Xe(2,9,9017))});r.Z(5);var u=m.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!n){var c=u.result;e.l=c;var f=c.objectStoreNames;f=f.contains("manifest")&&f.contains("segment")?new Hp(c,"segment","manifest"):null,e.g=f,f=c.objectStoreNames,f=f.contains("manifest-v2")&&f.contains("segment-v2")?new gy(c,"segment-v2","manifest-v2"):null,e.h=f,f=c.objectStoreNames,f=f.contains("manifest-v3")&&f.contains("segment-v3")?new gy(c,"segment-v3","manifest-v3"):null,e.i=f,f=c.objectStoreNames,f=f.contains("manifest-v5")&&f.contains("segment-v5")?new U_(c,"segment-v5","manifest-v5"):null,e.j=f,c=c.objectStoreNames.contains("session-ids")?new qp(c):null,e.m=c,r.stop(),t.resolve()}},u.onupgradeneeded=function(){for(var c=u.result,f=g(["segment-v5","manifest-v5","session-ids"]),h=f.next();!h.done;h=f.next())h=h.value,c.objectStoreNames.contains(h)||c.createObjectStore(h,{autoIncrement:!0})},u.onerror=function(c){n||(t.reject(new Xe(2,9,9001,u.error)),r.stop(),c.preventDefault())},t},p.destroy=function(){var e=this;return Re(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return C(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return C(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return C(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return C(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return C(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),X(t)}})},p.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},p.getEmeSessionCell=function(){return this.m},p.erase=function(){var e=this;return Re(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return C(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return C(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return C(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return C(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),C(t,cq(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,C(t,e.init(),0)}})};function cq(){var e=new Lr,t=m.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new Xe(2,9,9001,t.error)),n.preventDefault()},e}TD("idb",function(){return ri()||Rr()||!m.indexedDB?null:new wD});function xu(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}xu.prototype.ob=function(){return this.i},xu.prototype.Ia=function(){return this.h},xu.prototype.key=function(){return this.l},xu.prototype.toString=function(){return this.j};function B_(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new xu(t,n,r,Number(e[4])):null}function AD(e,t){this.h=e,this.g=t}function ID(e,t){var n=new rr(null,0);n.Za(t.duration);var r=t.streams.filter(function(S){return S.type=="audio"}),u=t.streams.filter(function(S){return S.type=="video"});r=fq(e,r,u,n),u=t.streams.filter(function(S){return S.type==_r}).map(function(S){return my(e,S,n)});var c=t.streams.filter(function(S){return S.type=="image"}).map(function(S){return my(e,S,n)}),f=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var h=g(r.values()),v=h.next();!v.done;v=h.next())v=v.value,v.audio&&v.audio.encrypted&&(v.audio.drmInfos=f),v.video&&v.video.encrypted&&(v.video.drmInfos=f);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:u,imageStreams:c,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function fq(e,t,n,r){for(var u=new Set,c=g(t),f=c.next();!f.done;f=c.next()){f=g(f.value.variantIds);for(var h=f.next();!h.done;h=f.next())u.add(h.value)}for(c=g(n),f=c.next();!f.done;f=c.next())for(f=g(f.value.variantIds),h=f.next();!h.done;h=f.next())u.add(h.value);for(c=new Map,u=g(u),f=u.next();!f.done;f=u.next())f=f.value,c.set(f,{id:f,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=g(t),u=t.next();!u.done;u=t.next())for(f=u.value,u=my(e,f,r),f=g(f.variantIds),h=f.next();!h.done;h=f.next())h=c.get(h.value),h.language=u.language,h.primary=h.primary||u.primary,h.audio=u;for(n=g(n),t=n.next();!t.done;t=n.next())for(u=t.value,t=my(e,u,r),u=g(u.variantIds),f=u.next();!f.done;f=u.next())f=c.get(f.value),f.primary=f.primary||t.primary,f.video=t;return c}function my(e,t,n){var r=t.segments.map(function(u){return dq(e,u,t)});return n.qd(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Mr(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Di(t.mimeType,t.codecs)])}}function dq(e,t,n){var r=new xu("segment",e.h,e.g,t.dataKey);return e=new et(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?hq(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function hq(e,t){var n=new xu("segment",e.h,e.g,t);return new Dn(function(){return[n.toString()]},0,null)}function CD(){this.g=null}p=CD.prototype,p.configure=function(){},p.start=function(e,t){var n=this,r,u,c,f,h,v,S;return Re(function(R){switch(R.g){case 1:if(r=B_(e),n.g=r,r==null||r.g!="manifest")throw new Xe(2,1,9004,e);return u=new Xo,oe(R,2),C(R,u.init(),4);case 4:return C(R,py(u,r.ob(),r.Ia()),5);case 5:return c=R.h,C(R,c.getManifests([r.key()]),6);case 6:return f=R.h,h=f[0],v=new AD(r.ob(),r.Ia()),S=ID(v,h),t.makeTextStreamsForClosedCaptions(S),R.return(S);case 2:return Je(R),C(R,u.destroy(),7);case 7:we(R,0)}})},p.stop=function(){return Promise.resolve()},p.update=function(){},p.onExpirationUpdated=function(e,t){var n=this,r,u,c,f,h,v,S;return Re(function(R){switch(R.g){case 1:return r=n.g,u=new Xo,ce(R,2,3),C(R,u.init(),5);case 5:return C(R,py(u,r.ob(),r.Ia()),6);case 6:return c=R.h,C(R,c.getManifests([r.key()]),7);case 7:if(f=R.h,h=f[0],v=h.sessionIds.includes(e),S=h.expiration==null||h.expiration>t,!v||!S){R.u(3);break}return C(R,c.updateManifestExpiration(r.key(),t),3);case 3:return Je(R),C(R,u.destroy(),10);case 10:we(R,0);break;case 2:be(R),R.u(3)}})},p.onInitialVariantChosen=function(){},p.banLocation=function(){},p.setMediaElement=function(){},Yn["application/x-offline-manifest"]=function(){return new CD};function bD(){}function RD(e){var t=B_(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=$s(e)):e=t&&t.g=="segment"?pq(t.key(),t):Ws(new Xe(2,1,9004,e)),e}function pq(e,t){var n=new Xo;return $s(void 0).Aa(function(){return n.init()}).Aa(function(){return py(n,t.ob(),t.Ia())}).Aa(function(r){return r.getSegments([t.key()])}).Aa(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}ne("shaka.offline.OfflineScheme",bD),bD.plugin=RD,Xs("offline",RD);function xD(e,t,n){var r,u,c,f,h,v;return Re(function(S){switch(S.g){case 1:r=[];for(var R=[],B=g(n),z=B.next();!z.done;z=B.next()){z=z.value;for(var J=!1,fe=g(R),he=fe.next();!he.done;he=fe.next())if(he=he.value,mq(he.info,z)){he.sessionIds.push(z.sessionId),J=!0;break}J||R.push({info:z,sessionIds:[z.sessionId]})}u=g(R),c=u.next();case 2:if(c.done){S.u(4);break}return f=c.value,h=gq(e,t,f),C(S,h,5);case 5:v=S.h,r=r.concat(v),c=u.next(),S.u(2);break;case 4:return S.return(r)}})}function gq(e,t,n){var r,u;return Re(function(c){switch(c.g){case 1:return r=new Ze({Mb:t,onError:function(){},be:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ce(c,2),r.configure(e),C(c,Ie(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:me(c,3);break;case 2:return be(c),C(c,r.destroy(),5);case 5:return c.return([]);case 3:return u=[],C(c,Promise.all(n.sessionIds.map(function(f){return Re(function(h){if(h.g==1)return ce(h,2),C(h,ue(r,f),4);if(h.g!=2)return u.push(f),me(h,0);be(h),X(h)})})),6);case 6:return C(c,r.destroy(),7);case 7:return c.return(u)}})}function mq(e,t){function n(r,u){return r.robustness==u.robustness&&r.contentType==u.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Ln(e.audioCapabilities,t.audioCapabilities,n)&&Ln(e.videoCapabilities,t.videoCapabilities,n)}function vq(e,t,n){var r=t.presentationTimeline.getDuration();return t=ND(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function j_(e,t){var n=ID(new AD(e.ob(),e.Ia()),t),r=t.appMetadata||{};return n=ND(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function ND(e){var t=[],n=Vf(e.variants);n=g(n);for(var r=n.next();!r.done;r=n.next())t.push(kl(r.value));for(e=g(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Zf(n.value));return t}function yq(){this.g={}}function Eq(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var u=n.bandwidth||393216,c=r.bandwidth||t.bandwidth-u;0>=c&&(c=t.bandwidth),e.g[n.id]=u,e.g[r.id]=c}}function _q(e,t){e.g[t.id]=t.bandwidth||2048}function MD(e,t){return e=e.g[t],e==null&&(e=0),e}function po(e){var t=this;if(e&&e.constructor!=hn)throw new Xe(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.yb()):(this.h=od(),this.g=new zr),this.i=[],this.j=[];var n=!e;this.l=new jl(function(){var r,u,c,f,h;return Re(function(v){switch(v.g){case 1:return C(v,Promise.all(t.j.map(function(S){return L_(S)})),2);case 2:for(r=function(){},u=[],c=g(t.i),f=c.next();!f.done;f=c.next())h=f.value,u.push(h.then(r,r));return C(v,Promise.all(u),3);case 3:if(!n){v.u(4);break}return C(v,t.g.destroy(),4);case 4:t.h=null,t.g=null,X(v)}})})}function Z_(){if(tr())e:{for(var e=g(Gp.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}p=po.prototype,p.destroy=function(){return this.l.destroy()},p.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=cv(e,t)),ql(this.h,e)},p.getConfiguration=function(){var e=od();return ql(e,this.h,od()),e},p.yb=function(){return this.g},p.store=function(e,t,n){var r=this,u=this.getConfiguration(),c=new mD(this.g);return this.j.push(c),t=Tq(this,e,t||{},function(){var f;return Re(function(h){return h.g==1?n?h.u(2):C(h,pv(e,r.g,u.manifest.retryParameters),3):(h.g!=2&&(n=h.h),f=qn(e,n||null),h.return(f()))})},u,c),t=new pi(t,function(){return L_(c)}),t.finally(function(){Kn(r.j,c)}),Oq(this,t)};function Tq(e,t,n,r,u,c){var f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it;return Re(function(Ue){switch(Ue.g){case 1:return vy(),h=f=null,v=new Xo,B=R=S=null,ce(Ue,2,3),C(Ue,r(),5);case 5:return f=Ue.h,C(Ue,Nq(e,t,f,u),6);case 6:if(z=Ue.h,Ro(e),J=!z.presentationTimeline.U()&&!z.presentationTimeline.pc(),!J)throw new Xe(2,9,9005,t);return C(Ue,e.Bc(z,function(Qe){B=B||Qe},u),7);case 7:if(h=Ue.h,Ro(e),B)throw B;return C(Ue,wq(z,h,u),8);case 8:return C(Ue,v.init(),9);case 9:return Ro(e),C(Ue,_D(v),10);case 10:return S=Ue.h,Ro(e),fe=Aq(h,z,t,n,u,c),he=fe.ri,Ee=fe.Wf,C(Ue,S.Ia.addManifests([he]),11);case 11:if(Le=Ue.h,Ro(e),R=Le[0],Ro(e),B)throw B;return C(Ue,Sq(e,Ee,R,he,c,u,S.Ia,z,h),12);case 12:return Ro(e),LD(z,he,h,u),C(Ue,S.Ia.updateManifest(R,he),13);case 13:return Ro(e),Fe=new xu("manifest",S.path.ob,S.path.Ia,R),Ue.return(j_(Fe,he));case 3:return Je(Ue),C(Ue,v.destroy(),14);case 14:if(!f){Ue.u(15);break}return C(Ue,f.stop(),15);case 15:if(!h){Ue.u(17);break}return C(Ue,h.destroy(),17);case 17:we(Ue,0);break;case 2:if(it=be(Ue),R==null){Ue.u(19);break}return C(Ue,DD(R),19);case 19:throw B||it}})}function Sq(e,t,n,r,u,c,f,h,v){var S,R,B,z,J,fe,he,Ee,Le,Fe;return Re(function(it){switch(it.g){case 1:if(S={},R=0,B=function(Ue,Qe){var rt,dt,gt,kt,It,Ut,Nt;return Re(function(nn){if(nn.g==1){for(rt=g(Ue),dt=rt.next(),gt={};!dt.done;gt={Dc:void 0},dt=rt.next())gt.Dc=dt.value,kt=$Z(gt.Dc,c),It=gt.Dc.i,Ut=gt.Dc.h,Nt=function(Kt){return function($t){var En,An,Vn;return Re(function(Qn){if(Qn.g==1)return C(Qn,f.addSegments([{data:$t}]),2);En=Qn.h,Ro(e),An=Kt.Dc.g,Vn=O_(An),S[Vn]=En[0],R+=$t.byteLength,X(Qn)})}}(gt),QZ(u,gt.Dc.groupId,kt,It,Ut,Nt);return C(nn,JZ(u),2)}return Qe?(Ro(e),LD(h,r,v,c),C(nn,f.updateManifest(n,r),0)):nn.u(0)})},z=!1,ce(it,2),!q_(h)||!z||OD(h)){it.u(4);break}return C(it,B(t.filter(function(Ue){return Ue.h}),!0),5);case 5:return Ro(e),t=t.filter(function(Ue){return!Ue.h}),J=S,fe=R,S={},R=0,C(it,PD(f,n,r,J,fe,function(){return Ro(e)}),6);case 6:Ro(e);case 4:if(z){it.u(7);break}return C(it,B(t,!1),8);case 8:return Ro(e),he=S,Ee=R,S={},R=0,C(it,PD(f,n,r,he,Ee,function(){return Ro(e)}),9);case 9:Ro(e);case 7:me(it,0);break;case 2:return Le=be(it),Fe=Object.values(S),C(it,f.removeSegments(Fe,function(){}),10);case 10:throw Le}})}function DD(e){var t,n,r,u;return Re(function(c){switch(c.g){case 1:return t=new Xo,C(c,t.init(),2);case 2:return C(c,_D(t),3);case 3:return n=c.h,r=new xu("manifest",n.path.ob,n.path.Ia,e),C(c,t.destroy(),4);case 4:return u=new po,C(c,u.remove(r.toString()),0)}})}function PD(e,t,n,r,u,c){var f,h,v,S,R,B,z,J,fe,he,Ee;return Re(function(Le){switch(Le.g){case 1:for(f=!1,ce(Le,2),h=!0,v=g(n.streams),S=v.next();!S.done;S=v.next())for(R=S.value,B=g(R.segments),z=B.next();!z.done;z=B.next())J=z.value,fe=J.pendingSegmentRefId?r[J.pendingSegmentRefId]:null,fe!=null&&(J.dataKey=fe,J.pendingSegmentRefId=void 0),fe=J.pendingInitSegmentRefId?r[J.pendingInitSegmentRefId]:null,fe!=null&&(J.initSegmentKey=fe,J.pendingInitSegmentRefId=void 0),J.pendingSegmentRefId&&(h=!1),J.pendingInitSegmentRefId&&(h=!1);return n.size+=u,h&&(n.isIncomplete=!1),C(Le,e.updateManifest(t,n),4);case 4:f=!0,c(),me(Le,0);break;case 2:return he=be(Le),C(Le,DD(t),5);case 5:if(f){Le.u(6);break}return Ee=Object.values(r),C(Le,e.removeSegments(Ee,function(){}),6);case 6:throw he}})}function wq(e,t,n){var r,u,c,f,h,v,S,R,B,z,J,fe,he,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t;return Re(function(En){switch(En.g){case 1:return r={width:1/0,height:1/0},kE(e,n.restrictions,r),C(En,jf(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(u=[],c=n.preferredDecodingAttributes,f=n.preferredVideoCodecs,h=n.preferredAudioCodecs,Im(e,f,h,c),v=g(e.variants),S=v.next();!S.done;S=v.next())R=S.value,u.push(kl(R));for(B=g(e.textStreams),z=B.next();!z.done;z=B.next())J=z.value,u.push(Zf(J));for(fe=g(e.imageStreams),he=fe.next();!he.done;he=fe.next())Ee=he.value,u.push(qf(Ee));return C(En,n.offline.trackSelectionCallback(u),3);case 3:for(Le=En.h,Fe=e.presentationTimeline.getDuration(),it=0,Ue=g(Le),Qe=Ue.next();!Qe.done;Qe=Ue.next())rt=Qe.value,dt=rt.bandwidth*Fe/8,it+=dt;return ce(En,4),C(En,n.offline.downloadSizeCallback(it),6);case 6:if(gt=En.h,!gt)throw new Xe(2,9,9014);me(En,5);break;case 4:throw kt=be(En),kt instanceof Xe?kt:new Xe(2,9,9015);case 5:for(It=new Set,Ut=new Set,Nt=new Set,nn=g(Le),Kt=nn.next();!Kt.done;Kt=nn.next())$t=Kt.value,$t.type=="variant"&&It.add($t.id),$t.type=="text"&&Ut.add($t.id),$t.type=="image"&&Nt.add($t.id);e.variants=e.variants.filter(function(An){return It.has(An.id)}),e.textStreams=e.textStreams.filter(function(An){return Ut.has(An.id)}),e.imageStreams=e.imageStreams.filter(function(An){return Nt.has(An.id)}),Fq(e),X(En)}})}function Aq(e,t,n,r,u,c){var f=vq(n,t,r),h=u.offline.progressCallback;XZ(c,function(J,fe){f.size=fe,h(f,J)},function(J,fe){v&&u.offline.usePersistentLicense&&S==fe&&Pe(e,"cenc",J)});var v=q_(t)&&!OD(t),S=null;v&&(S=Uq.get(e.g.keySystem));for(var R=new yq,B=g(t.textStreams),z=B.next();!z.done;z=B.next())R.g[z.value.id]=52;for(B=g(t.imageStreams),z=B.next();!z.done;z=B.next())_q(R,z.value);for(B=g(t.variants),z=B.next();!z.done;z=B.next())Eq(R,z.value);return R=Mq(c,R,t,u),c=R.streams,R=R.Wf,B=e.g,z=u.offline.usePersistentLicense,B&&z&&(B.initData=[]),{ri:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ad(),streams:c,sessionIds:z?xe(e):[],drmInfo:B,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Wf:R}}function q_(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function OD(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function LD(e,t,n,r){if(t.expiration=n.ad(),n=xe(n),t.sessionIds=r.offline.usePersistentLicense?n:[],q_(e)&&r.offline.usePersistentLicense&&!n.length)throw new Xe(2,9,9007)}p.remove=function(e){return G_(this,Iq(this,e))};function Iq(e,t){var n,r,u,c,f,h;return Re(function(v){switch(v.g){case 1:if(vy(),n=B_(t),n==null||n.g!="manifest")throw new Xe(2,9,9004,t);return r=n,u=new Xo,oe(v,2),C(v,u.init(),4);case 4:return C(v,py(u,r.ob(),r.Ia()),5);case 5:return c=v.h,C(v,c.getManifests([r.key()]),6);case 6:return f=v.h,h=f[0],C(v,Promise.all([Cq(e,h,u),bq(c,r,h)]),2);case 2:return Je(v),C(v,u.destroy(),8);case 8:we(v,0)}})}function kD(e,t){for(var n=[],r=g(e.streams),u=r.next();!u.done;u=r.next())u=u.value,t&&u.type=="video"?n.push({contentType:Di(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):t||u.type!="audio"||n.push({contentType:Di(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return n}function Cq(e,t,n){return Re(function(r){return C(r,kq(e.g,e.h.drm,n,t),0)})}function bq(e,t,n){function r(){}var u=Lq(n);return j_(t,n),Promise.all([e.removeSegments(u,r),e.removeManifests([t.key()],r)])}p.Ji=function(){return G_(this,Rq(this))};function Rq(e){var t,n,r,u,c,f,h,v,S,R;return Re(function(B){switch(B.g){case 1:return vy(),t=e.g,n=e.h.drm,r=new Xo,u=!1,oe(B,2),C(B,r.init(),4);case 4:c=[],rq(r,function(z){return c.push(z)}),f=g(c),h=f.next();case 5:if(h.done){B.u(2);break}return v=h.value,C(B,v.getAll(),8);case 8:return S=B.h,C(B,xD(n,t,S),9);case 9:return R=B.h,C(B,v.remove(R),10);case 10:R.length!=S.length&&(u=!0),h=f.next(),B.u(5);break;case 2:return Je(B),C(B,r.destroy(),11);case 11:we(B,3);break;case 3:return B.return(!u)}})}p.list=function(){return G_(this,xq())};function xq(){var e,t,n;return Re(function(r){switch(r.g){case 1:return vy(),e=[],t=new Xo,oe(r,2),C(r,t.init(),4);case 4:return n=Promise.resolve(),nq(t,function(u,c){n=n.then(function(){var f;return Re(function(h){if(h.g==1)return C(h,c.getAllManifests(),2);f=h.h,f.forEach(function(v,S){v=j_(new xu("manifest",u.ob,u.Ia,S),v),e.push(v)}),X(h)})})}),C(r,n,2);case 2:return Je(r),C(r,t.destroy(),6);case 6:we(r,3);break;case 3:return r.return(e)}})}function Nq(e,t,n,r){var u,c,f,h,v;return Re(function(S){if(S.g==1)return u=null,c=e.g,f={networkingEngine:c,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(R){u=R},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(r.manifest),Ro(e),C(S,n.start(t,f),2);if(S.g!=3)return h=S.h,Ro(e),v=FD(h),C(S,Promise.all(np(v,function(R){return R.createSegmentIndex()})),3);if(Ro(e),u)throw u;return S.return(h)})}p.Bc=function(e,t,n){var r=this,u;return Re(function(c){return c.g==1?(u=new Ze({Mb:r.g,onError:t,be:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),u.configure(n.drm),C(c,Se(u,e.variants,n.offline.usePersistentLicense),2)):c.g!=3?C(c,te(u),3):c.return(u)})};function Mq(e,t,n,r){var u=new Map,c=FD(n),f=new Map;c=g(c);for(var h=c.next();!h.done;h=c.next()){h=h.value;var v=Dq(e,t,n,h,r,u);f.set(h.id,v)}for(e=g(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&f.get(t.audio.id).variantIds.push(t.id),t.video&&f.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(f.values()),Wf:Array.from(u.values())}}function Dq(e,t,n,r,u,c){var f={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},h=u.offline.numberOfParallelDownloads,v=h===0?r.id:0;return Pq(r,n.presentationTimeline.nb(),function(S){var R=O_(S),B=void 0;if(!c.has(R)){var z=S.endTime-S.startTime;z=MD(t,r.id)*z,z=gD(e.g,z),c.set(R,new hD(S,z,v,!1))}S.$&&(B=O_(S.$),c.has(B)||(z=.5*MD(t,r.id),z=gD(e.g,z),c.set(B,new hD(S.$,z,v,!0)))),f.segments.push({pendingInitSegmentRefId:B,initSegmentKey:B?0:null,startTime:S.startTime,endTime:S.endTime,appendWindowStart:S.appendWindowStart,appendWindowEnd:S.appendWindowEnd,timestampOffset:S.timestampOffset,tilesLayout:S.tilesLayout,pendingSegmentRefId:R,dataKey:0,mimeType:S.mimeType,codecs:S.codecs}),h!==0&&(v=(v+1)%h)}),f}function Pq(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function Ro(e){if(e.l.g)throw new Xe(2,9,7001)}function vy(){if(!Z_())throw new Xe(2,9,9e3)}function G_(e,t){return Re(function(n){return n.g==1?(e.i.push(t),oe(n,2),C(n,t,4)):n.g!=2?n.return(n.h):(Je(n),Kn(e.i,t),we(n,0))})}function Oq(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Kn(e.i,n)})}function Lq(e){var t=new Set;e=g(e.streams);for(var n=e.next();!n.done;n=e.next()){n=g(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function kq(e,t,n,r){var u,c,f;return Re(function(h){return h.g==1?r.drmInfo?(u=iq(n),c=r.sessionIds.map(function(v){return{sessionId:v,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:kD(r,!1),videoCapabilities:kD(r,!0)}}),C(h,xD(t,e,c),2)):h.return():h.g!=3?(f=h.h,C(h,u.remove(f),3)):C(h,u.add(c.filter(function(v){return!f.includes(v.sessionId)})),0)})}function FD(e){for(var t=new Set,n=g(e.variants),r=n.next();!r.done;r=n.next())r=r.value,r.audio&&t.add(r.audio),r.video&&t.add(r.video);for(n=g(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=g(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function Fq(e){e.variants.map(function(c){return c.video});var t=new Set(e.variants.map(function(c){return c.audio}));e=e.textStreams;for(var n=g(t),r=n.next();!r.done;r=n.next()){r=g(t);for(var u=r.next();!u.done;u=r.next());}for(t=g(e),n=t.next();!n.done;n=t.next())for(n=g(e),r=n.next();!r.done;r=n.next());}ne("shaka.offline.Storage",po),po.deleteAll=function(){var e;return Re(function(t){return t.g==1?(e=new Xo,oe(t,2),C(t,oq(e),2)):t.g!=5?(Je(t),C(t,e.destroy(),5)):we(t,0)})},po.prototype.list=po.prototype.list,po.prototype.removeEmeSessions=po.prototype.Ji,po.prototype.remove=po.prototype.remove,po.prototype.store=po.prototype.store,po.prototype.getNetworkingEngine=po.prototype.yb,po.prototype.getConfiguration=po.prototype.getConfiguration,po.prototype.configure=po.prototype.configure,po.prototype.destroy=po.prototype.destroy,po.support=Z_;var Uq=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");j1.offline=Z_;function xo(){}function Qo(e,t){for(e={priority:t||0,callback:e},t=0;t<Vp.length;t++)if(Vp[t].priority<e.priority){Vp.splice(t,0,e);return}Vp.push(e)}ne("shaka.polyfill",xo),xo.register=Qo,xo.installAll=function(){for(var e=g(Vp),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Ke("Error installing polyfill!",n)}}};var Vp=[];function UD(){}function BD(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=g(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())Bq(t.value)}function Bq(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}xo.Aria=UD,UD.install=BD,Qo(BD);function jD(){}function ZD(){eP()}xo.EncryptionScheme=jD,jD.install=ZD,Qo(ZD,-2);function qD(){}function GD(){if(m.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Rd),document.addEventListener("webkitfullscreenerror",Rd),document.addEventListener("mozfullscreenchange",Rd),document.addEventListener("mozfullscreenerror",Rd),document.addEventListener("MSFullscreenChange",Rd),document.addEventListener("MSFullscreenError",Rd)}}function Rd(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}xo.Fullscreen=qD,qD.install=GD,Qo(GD);function yy(){}function HD(){var e=!0;!ri()||ri()&&qu()||ri()&&sn("Fuchsia")||(e=!1),(Ao()||Yo()||Ri()||li()||di()||sn("PC=EOS")||Zu())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),VD=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=jq)}function jq(e){var t,n,r,u,c,f,h,v,S,R,B;return Re(function(z){switch(z.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,r=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(u=n.contentType,c=ur(u),!c)||r&&(f=r.contentType,h=ur(f),!h))return z.return(t)}else return z.return(t);z.u(2);break}if(!tr())return z.return(t);if(!n){z.u(3);break}return C(z,Zq(n),4);case 4:if(v=z.h,!v)return z.return(t);case 3:if(r){var J=r.contentType;if(ri()&&r.spatialRendering&&(J+="; spatialRendering=true"),S=Ft(J),!S)return z.return(t)}case 2:return e.keySystemConfiguration?(R=e.keySystemConfiguration,C(z,qq(n,r,R),6)):(t.supported=!0,z.return(t));case 6:(B=z.h)&&(t.supported=!0,t.keySystemAccess=B);case 5:return z.return(t)}})}function Zq(e){var t,n;return Re(function(r){return r.g==1?ri()?C(r,Gq(e),3):di()?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width,t+="; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.bitrate&&(t+="; bitrate="+e.bitrate),r.return(Ft(t))):r.u(2):r.g!=2?(n=r.h,r.return(n)):r.return(Ft(e.contentType))})}function qq(e,t,n){var r,u,c,f,h,v,S,R,B;return Re(function(z){switch(z.g){case 1:if(r=[],u=[],n.audio&&(c={robustness:n.audio.robustness||"",contentType:t.contentType},di()&&t.contentType.includes('codecs="ac-3"')&&(c.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(c.encryptionScheme=n.audio.encryptionScheme),r.push(c)),n.video&&(f={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(f.encryptionScheme=n.video.encryptionScheme),u.push(f)),h={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(h.audioCapabilities=r),u.length&&(h.videoCapabilities=u),v=e?e.contentType:"",S=t?t.contentType:"",R=n.keySystem,B=null,ce(z,2),dn.has(v+"#"+S+"#"+R)){B=dn.get(v+"#"+S+"#"+R)||null,z.u(4);break}return C(z,navigator.requestMediaKeySystemAccess(n.keySystem,[h]),5);case 5:B=z.h,dn.set(v+"#"+S+"#"+R,B);case 4:me(z,3);break;case 2:be(z);case 3:return z.return(B)}})}function Gq(e){var t,n;return Re(function(r){return r.g==1?m.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.transferFunction==="pq"&&(t+="; eotf=smpte2084"),n=!1,t in Ey?(n=Ey[t],r.u(2)):C(r,cast.__platform__.canDisplayType(t),3)):r.return(Ft(e.contentType)):(r.g!=2&&(n=r.h,Ey[t]=n),r.return(n))})}xo.MediaCapabilities=yy,yy.install=HD;var VD=null;yy.originalMcap=VD;var Ey={};yy.memoizedCanDisplayTypeRequests_=Ey,Qo(HD,-1);function KD(){}function zD(){var e=Zs();(m.MediaSource||m.ManagedMediaSource)&&(e&&m.MediaSource?10>=e?m.MediaSource=null:12>=e?(H_(),YD()):15>=e&&H_():sn("DT_STB_BCM")?(H_(),YD()):(ni()||Ui()||sn("Tizen 4"))&&Vq()),(m.MediaSource||m.ManagedMediaSource)&&Hq(),m.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&Kq()}function H_(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Ye.apply(0,arguments));return t.abort=function(){},t}}function YD(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function Hq(){if(m.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return Ll(n)!="mp2t"&&e(n)}}if(m.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);m.ManagedMediaSource.isTypeSupported=function(n){return Ll(n)!="mp2t"&&t(n)}}}function Vq(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return zs(n)!="opus"&&e(n)},m.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);m.ManagedMediaSource.isTypeSupported=function(n){return zs(n)!="opus"&&t(n)}}}function Kq(){var e=MediaSource.isTypeSupported;li()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(f){return f.startsWith("codecs=")});if(0>r)return e(t);var u=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),c=u.findIndex(function(f){return f.startsWith("vp09")});return 0<=c&&(u[c]="vp9",n[r]='codecs="'+u.join(",")+'"',t=n.join("; ")),e(t)})}xo.MediaSource=KD,KD.install=zD,Qo(zD);function WD(){}function $D(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?zq():m.orientation!=null&&Yq())}function zq(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function Yq(){function e(){switch(m.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new _y;screen.orientation=t,e(),m.addEventListener("orientationchange",function(){e();var n=new jn("change");t.dispatchEvent(n)})}xo.Orientation=WD,WD.install=$D;function _y(){Nr.call(this),this.type="",this.angle=0}Y(_y,Nr),_y.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},_y.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Qo($D);function V_(){}var K_,z_,Y_,W_,$_,X_;function Wq(e,t){try{var n=new Ty(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function $q(e){var t=this.mediaKeys;return t&&t!=e&&XD(t,null),delete this.mediaKeys,(this.mediaKeys=e)?XD(e,this):Promise.resolve()}function Xq(e){if(e=nr(e.initData),ln(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=ci(e.subarray(4),!0),e=Ci(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Ni(e),this.dispatchEvent(t)}xo.PatchedMediaKeysApple=V_,V_.uninstall=function(){K_&&(K_=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",z_),HTMLMediaElement.prototype.setMediaKeys=Y_,m.MediaKeys=W_,m.MediaKeySystemAccess=$_,navigator.requestMediaKeySystemAccess=X_,z_=X_=Y_=$_=W_=null,m.shakaMediaKeysPolyfill="")},V_.install=function(e){m.HTMLVideoElement&&m.WebKitMediaKeys&&(e!==void 0&&e&&(K_=!0,z_=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),Y_=HTMLMediaElement.prototype.setMediaKeys,W_=m.MediaKeys,$_=m.MediaKeySystemAccess,X_=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=$q,m.MediaKeys=Kp,m.MediaKeySystemAccess=Ty,navigator.requestMediaKeySystemAccess=Wq,m.shakaMediaKeysPolyfill=Qq)};function Ty(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=g(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,u=!1;if(n.audioCapabilities)for(var c=g(n.audioCapabilities),f=c.next();!f.done;f=c.next())f=f.value,f.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,f.contentType.split(";")[0])&&(t.audioCapabilities.push(f),u=!0));if(n.videoCapabilities)for(n=g(n.videoCapabilities),c=n.next();!c.done;c=n.next())c=c.value,c.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.videoCapabilities.push(c),u=!0));r||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=u?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Ty.prototype.createMediaKeys=function(){var e=new Kp(this.keySystem);return Promise.resolve(e)},Ty.prototype.getConfiguration=function(){return this.g};function Kp(e){this.h=new WebKitMediaKeys(e),this.g=new Tt}Kp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Q_(this.h)},Kp.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function XD(e,t){if(e.g.Qa(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",Xq);try{return td(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}Kp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Q_(e){Nr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Tt,this.sessionId="",this.expiration=NaN,this.closed=new Lr,this.keyStatuses=new QD}Y(Q_,Nr),p=Q_.prototype,p.generateRequest=function(e,t){var n=this;this.h=new Lr;try{var r=this.l.createSession("video/mp4",nr(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(u){n.h&&(n.h.resolve(),n.h=null),u=new Map().set("messageType",n.keyStatuses.Zb()==null?"license-request":"license-renewal").set("message",Ni(u.message)),u=new jn("message",u),n.dispatchEvent(u)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(Sy(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=n.i.error,n.h!=null)n.h.reject(u),n.h=null;else if(n.g!=null)n.g.reject(u),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Sy(n,"output-not-allowed");break;default:Sy(n,"internal-error")}}),Sy(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},p.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},p.update=function(e){this.g=new Lr;try{this.i.update(nr(e))}catch(t){this.g.reject(t)}return this.g},p.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Qa()}catch(e){this.closed.reject(e)}return this.closed},p.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Sy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new jn("keystatuseschange"),e.dispatchEvent(t)}function QD(){this.size=0,this.g=void 0}p=QD.prototype,p.Zb=function(){return this.g},p.forEach=function(e){this.g&&e(this.g,er.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var t=er.value();return!!(this.g&&no(e,t))},p.entries=function(){},p.keys=function(){},p.values=function(){};var Qq="apple";function JD(){}function e2(){m.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||Ui()||sn("Tizen 4")||sn("Tizen 5.0")||vi())&&(MediaKeys.prototype.setServerCertificate=Jq)}function Jq(){return Promise.resolve(!1)}xo.PatchedMediaKeysCert=JD,JD.install=e2,Qo(e2);function t2(){}function n2(){!m.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=eG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=tG,m.MediaKeys=wy,m.MediaKeySystemAccess=J_,m.shakaMediaKeysPolyfill=nG)}function eG(){return Promise.reject(Error("The key system specified is not supported."))}function tG(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}xo.PatchedMediaKeysNop=t2,t2.install=n2;function wy(){throw new TypeError("Illegal constructor.")}wy.prototype.createSession=function(){},wy.prototype.setServerCertificate=function(){},wy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function J_(){throw this.keySystem="",new TypeError("Illegal constructor.")}J_.prototype.getConfiguration=function(){},J_.prototype.createMediaKeys=function(){};var nG="nop";Qo(n2,-10);function r2(){}function i2(){if(!(!m.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)iT="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=rG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=iG,m.MediaKeys=zp,m.MediaKeySystemAccess=Ay,m.shakaMediaKeysPolyfill=oG}}function eT(e){var t=iT;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function rG(e,t){try{var n=new Ay(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function iG(e){var t=this.mediaKeys;return t&&t!=e&&o2(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&o2(e,this),Promise.resolve()}xo.PatchedMediaKeysWebkit=r2,r2.install=i2;function Ay(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),t=g(t);for(var c=t.next();!c.done;c=t.next()){c=c.value;var f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:c.initDataTypes,sessionTypes:["temporary"],label:c.label},h=!1;if(c.audioCapabilities)for(var v=g(c.audioCapabilities),S=v.next();!S.done;S=v.next())S=S.value,S.contentType&&(h=!0,u.canPlayType(S.contentType.split(";")[0],this.g)&&(f.audioCapabilities.push(S),r=!0));if(c.videoCapabilities)for(v=g(c.videoCapabilities),S=v.next();!S.done;S=v.next())S=S.value,S.contentType&&(h=!0,u.canPlayType(S.contentType,this.g)&&(f.videoCapabilities.push(S),r=!0));if(h||(r=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),c.persistentState=="required"&&(n?(f.persistentState="required",f.sessionTypes=["persistent-license"]):r=!1),r){this.h=f;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Ay.prototype.createMediaKeys=function(){var e=new zp(this.g);return Promise.resolve(e)},Ay.prototype.getConfiguration=function(){return this.h};function zp(e){this.l=e,this.h=null,this.g=new Tt,this.i=[],this.j=new Map}function o2(e,t){e.h=t,e.g.Qa();var n=iT;t&&(e.g.D(t,n+"needkey",function(r){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=Ni(r.initData),e.h.dispatchEvent(u)}),e.g.D(t,n+"keymessage",function(r){var u=tT(e,r.sessionId);u&&(r=new Map().set("messageType",u.keyStatuses.Zb()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new jn("message",r),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=tT(e,r.sessionId))&&r.ready()}),e.g.D(t,n+"keyerror",function(r){var u=tT(e,r.sessionId);if(u){var c=Error("EME v0.1b key error"),f=r.errorCode;f.systemCode=r.systemCode,c.errorCode=f,!r.sessionId&&u.h?(r.systemCode==45&&(c.message="Unsupported session type."),u.h.reject(c),u.h=null):r.sessionId&&u.g?(u.g.reject(c),u.g=null):(c=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Iy(u,"output-restricted"):c==1?Iy(u,"expired"):Iy(u,"internal-error"))}}))}zp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new nT(t,this.l,e),this.i.push(e),e},zp.prototype.setServerCertificate=function(){return Promise.resolve(!1)},zp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function tT(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function nT(e,t,n){Nr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Lr,this.keyStatuses=new s2}Y(nT,Nr),p=nT.prototype,p.ready=function(){Iy(this,"usable"),this.g&&this.g.resolve(),this.g=null};function a2(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=nr(Ci("LOAD_SESSION|"+n));else{var u=Ci("PERSISTENT|");r=hi(u,t)}else r=nr(t)}catch(f){return Promise.reject(f)}e.h=new Lr;var c=eT("generateKeyRequest");try{e.j[c](e.i,r)}catch(f){if(f.name!="InvalidStateError")return e.h=null,Promise.reject(f);new on(function(){try{e.j[c](e.i,r)}catch(h){e.h.reject(h),e.h=null}}).Z(.01)}return e.h}function rT(e,t,n){if(e.g)e.g.then(function(){return rT(e,t,n)}).catch(function(){return rT(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=br(n),u=JSON.parse(r);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Wo(u.keys[0].k),u=Wo(u.keys[0].kid)}else r=nr(n),u=null;var c=eT("addKey");try{e.j[c](e.i,r,u,e.sessionId)}catch(f){e.g.reject(f),e.g=null}}}function Iy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new jn("keystatuseschange"),e.dispatchEvent(t)}p.generateRequest=function(e,t){return a2(this,t,null)},p.load=function(e){return this.l=="persistent-license"?a2(this,null,e):Promise.reject(Error("Not a persistent session."))},p.update=function(e){var t=new Lr;return rT(this,t,e),t},p.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=eT("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},p.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function s2(){this.size=0,this.g=void 0}p=s2.prototype,p.Zb=function(){return this.g},p.forEach=function(e){this.g&&e(this.g,er.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var t=er.value();return!!(this.g&&no(e,t))},p.entries=function(){},p.keys=function(){},p.values=function(){};var iT="",oG="webkit";Qo(i2);function u2(){}function l2(){if(m.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=sG,Object.defineProperty(e,"disablePictureInPicture",{get:lG,set:cG,enumerable:!0,configurable:!0}),document.exitPictureInPicture=uG,document.addEventListener("webkitpresentationmodechanged",aG,!0))}}function aG(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function sG(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function uG(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function lG(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function cG(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}xo.PiPWebkit=u2,u2.install=l2,Qo(l2);function c2(){}function f2(){m.crypto&&("randomUUID"in m.crypto||(m.crypto.randomUUID=fG))}function fG(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}xo.RandomUUID=c2,c2.install=f2,Qo(f2);function d2(){}function h2(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:dG})}function dG(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}xo.Symbol=d2,d2.install=h2,Qo(h2);function p2(){}function g2(){if(m.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}xo.VideoPlayPromise=p2,p2.install=g2,Qo(g2);function m2(){}function v2(){if(m.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||vi())&&(e.getVideoPlaybackQuality=hG)}}function hG(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}xo.VideoPlaybackQuality=m2,m2.install=v2,Qo(v2);function y2(){}function E2(){if(!m.VTTCue&&m.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=oT;else if(t==6)e=pG;else{try{var n=!!oT(1,2,"")}catch(r){n=!1}n&&(e=oT)}e&&(m.VTTCue=function(r,u,c){return e(r,u,c)})}}function oT(e,t,n){return new m.TextTrackCue(e,t,n)}function pG(e,t,n){return new m.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}xo.VTTCue=y2,y2.install=E2,Qo(E2);function Ma(){}Ma.prototype.parseInit=function(){},Ma.prototype.setSequenceMode=function(){},Ma.prototype.setManifestType=function(){},Ma.prototype.parseMedia=function(e,t){var n=null,r=[];e=br(e).split(/\r?\n/),e=g(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=gG.exec(u))){var c=mG.exec(u[1]);c=60*parseInt(c[1],10)+parseFloat(c[2].replace(",",".")),u=new jr(c,t.segmentEnd?t.segmentEnd:c+2,u[2]),n&&(n.endTime=c,r.push(n)),n=u}return n&&r.push(n),r},ne("shaka.text.LrcTextParser",Ma),Ma.prototype.parseMedia=Ma.prototype.parseMedia,Ma.prototype.setManifestType=Ma.prototype.setManifestType,Ma.prototype.setSequenceMode=Ma.prototype.setSequenceMode,Ma.prototype.parseInit=Ma.prototype.parseInit;var gG=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,mG=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;_i["application/x-subtitle-lrc"]=function(){return new Ma};function ga(){}ga.prototype.parseInit=function(){},ga.prototype.setSequenceMode=function(){},ga.prototype.setManifestType=function(){},ga.prototype.parseMedia=function(e,t,n,r){var u=br(e);if(e=[],u=="")return e;var c=Tu(u,"tt",!0);if(!c)throw new Xe(2,2,2005,"Failed to parse TTML.");if(u=Eo(c,"body")[0],!u)return[];var f=Ka(c,Yp,"frameRate"),h=Ka(c,Yp,"subFrameRate"),v=Ka(c,Yp,"frameRateMultiplier"),S=Ka(c,Yp,"tickRate"),R=Ka(c,Yp,"cellResolution"),B=c.attributes["xml:space"]||"default",z=Ka(c,Ry,"extent");if(B!="default"&&B!="preserve")throw new Xe(2,2,2005,"Invalid xml:space value: "+B);B=B=="default",f=new TG(f,h,v,S),R=_G(R),h=Eo(c,"metadata")[0],h=(h?h.children:[]).filter(function(he){return he!="\n"}),v=Eo(c,"style"),c=Eo(c,"region"),S=[];for(var J=g(c),fe=J.next();!fe.done;fe=J.next())(fe=vG(fe.value,v,z))&&S.push(fe);if(sr(u,"p").length)throw new Xe(2,2,2001,"<p> can only be inside <div> in TTML");for(z=g(sr(u,"div")),J=z.next();!J.done;J=z.next())if(sr(J.value,"span").length)throw new Xe(2,2,2001,"<span> can only be inside <p> in TTML");return(t=_2(u,t,f,h,v,c,S,B,R,null,!1,n,r))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function _2(e,t,n,r,u,c,f,h,v,S,R,B,z){var J=S;if(qs(e)){if(!R)return null;var fe={tagName:"span",children:[ei(e)],attributes:{},parent:null}}else fe=e;for(var he=null,Ee=g(N2),Le=Ee.next();!Le.done&&!(he=by(fe,"backgroundImage",r,"#",Le.value)[0]);Le=Ee.next());Ee=null,Le=Ka(fe,N2,"backgroundImage");var Fe=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(Le&&Fe.test(Le)){if(Ee=parseInt(Le.split(":").pop(),10)-1,Ee>=z.length)return null;Ee=z[Ee]}else B&&Le&&!Le.startsWith("#")&&(Fe=new Ei(B),Le=new Ei(Le),(Le=Fe.resolve(Le).toString())&&(Ee=Le));if((e.tagName=="p"||he||Ee)&&(R=!0),e=R,Le=(fe.attributes["xml:space"]||(h?"default":"preserve"))=="default",Fe=fe.children.every(qs),h=[],!Fe)for(var it=g(fe.children),Ue=it.next();!Ue.done;Ue=it.next())(Ue=_2(Ue.value,t,n,r,u,c,f,Le,v,fe,R,B,z))&&h.push(Ue);if(r=S!=null,B=ei(fe),B=fe.children.length&&B&&/\S/.test(B),it=fe.attributes.begin||fe.attributes.end||fe.attributes.dur,!(it||B||fe.tagName=="br"||h.length!=0||r&&!Le))return null;for(z=w2(fe,n),B=z.start,z=z.end;J&&J.tagName&&J.tagName!="tt";)z=EG(J,n,B,z),B=z.start,z=z.end,J=J.parent;if(B==null&&(B=0),B+=t.periodStart,z=z==null?1/0:z+t.periodStart,B=Math.max(B,t.segmentStart),z=Math.min(z,t.segmentEnd),!it&&0<h.length)for(B=1/0,z=0,t=g(h),n=t.next();!n.done;n=t.next())n=n.value,B=Math.min(B,n.startTime),z=Math.max(z,n.endTime);if(fe.tagName=="br")return u=new jr(B,z,""),u.lineBreak=!0,u;if(t="",Fe&&(t=yi(ei(fe)||""),Le&&(t=t.replace(/\s+/g," "))),t=new jr(B,z,t),t.nestedCues=h,R||(t.isContainer=!0),v&&(t.cellResolution=v),v=by(fe,"region",c,"")[0],fe.attributes.region&&v&&v.attributes["xml:id"]){var Qe=v.attributes["xml:id"];t.region=f.filter(function(rt){return rt.id==Qe})[0]}return f=v,S&&r&&!fe.attributes.region&&!fe.attributes.style&&(f=by(S,"region",c,"")[0]),yG(t,fe,f,he,Ee,u,e,h.length==0),t}function vG(e,t,n){var r=new Yt,u=e.attributes["xml:id"];if(!u)return null;r.id=u,u=null,n&&(u=cT.exec(n)||fT.exec(n)),n=u?Number(u[1]):null,u=u?Number(u[2]):null;var c,f=Cy(e,t,"extent");if(f){var h=(c=cT.exec(f))||fT.exec(f);h!=null&&(r.width=Number(h[1]),r.height=Number(h[2]),c||(n!=null&&(r.width=100*r.width/n),u!=null&&(r.height=100*r.height/u)),r.widthUnits=c||n!=null?wn:0,r.heightUnits=c||u!=null?wn:0)}return(e=Cy(e,t,"origin"))&&(h=(c=cT.exec(e))||fT.exec(e),h!=null&&(r.viewportAnchorX=Number(h[1]),r.viewportAnchorY=Number(h[2]),c?f||(r.width=100-r.viewportAnchorX,r.widthUnits=wn,r.height=100-r.viewportAnchorY,r.heightUnits=wn):(u!=null&&(r.viewportAnchorY=100*r.viewportAnchorY/u),n!=null&&(r.viewportAnchorX=100*r.viewportAnchorX/n)),r.viewportAnchorUnits=c||n!=null?wn:0)),r}function aT(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),t.length==4)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function yG(e,t,n,r,u,c,f,h){if(f=f||h,No(t,n,c,"direction",f)=="rtl"&&(e.direction="rtl"),h=No(t,n,c,"writingMode",f),h=="tb"||h=="tblr"?e.writingMode="vertical-lr":h=="tbrl"?e.writingMode="vertical-rl":h=="rltb"||h=="rl"?e.direction="rtl":h&&(e.direction=Ml),(h=No(t,n,c,"textAlign",!0))?(e.positionAlign=AG[h],e.lineAlign=wG[h],e.textAlign=If[h.toUpperCase()]):e.textAlign=Ca,(h=No(t,n,c,"displayAlign",!0))&&(e.displayAlign=hm[h.toUpperCase()]),(h=No(t,n,c,"color",f))&&(e.color=aT(h)),(h=No(t,n,c,"backgroundColor",f))&&(e.backgroundColor=aT(h)),(h=No(t,n,c,"border",f))&&(e.border=h),h=No(t,n,c,"fontFamily",f))switch(h){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=h.split(",").filter(function(v){return v!="default"}).join(",")}switch((h=No(t,n,c,"fontWeight",f))&&h=="bold"&&(e.fontWeight=zu),h=No(t,n,c,"wrapOption",f),e.wrapLine=!(h&&h=="noWrap"),(h=No(t,n,c,"lineHeight",f))&&h.match(xd)&&(e.lineHeight=h),(h=No(t,n,c,"fontSize",f))&&(h.match(xd)||h.match(SG))&&(e.fontSize=h),(h=No(t,n,c,"fontStyle",f))&&(e.fontStyle=bf[h.toUpperCase()]),r?(u=r.attributes.imageType||r.attributes.imagetype,h=r.attributes.encoding,r=ei(r).trim(),u=="PNG"&&h=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):u&&(e.backgroundImage=u),(r=No(t,n,c,"textOutline",f))&&(r=r.split(" "),r[0].match(xd)?e.textStrokeColor=e.color:(e.textStrokeColor=aT(r[0]),r.shift()),r[0]&&r[0].match(xd)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=No(t,n,c,"letterSpacing",f))&&r.match(xd)&&(e.letterSpacing=r),(r=No(t,n,c,"linePadding",f))&&r.match(xd)&&(e.linePadding=r),(r=No(t,n,c,"opacity",f))&&(e.opacity=parseFloat(r)),(r=Cy(n,c,"textDecoration"))&&T2(e,r),(r=sT(t,c,"textDecoration"))&&T2(e,r),(r=No(t,n,c,"textCombine",f))&&(e.textCombineUpright=r),No(t,n,c,"ruby",f)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function T2(e,t){t=g(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(Vs)||e.textDecoration.push(Vs);break;case"noUnderline":e.textDecoration.includes(Vs)&&Kn(e.textDecoration,Vs);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Kn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Kn(e.textDecoration,"overline")}}function No(e,t,n,r,u){return u=u===void 0?!0:u,(e=sT(e,n,r))?e:u?Cy(t,n,r):null}function Cy(e,t,n){if(!e)return null;var r=Ka(e,Ry,n);return r||S2(e,t,n)}function sT(e,t,n){var r=Ka(e,Ry,n);return r||S2(e,t,n)}function S2(e,t,n){e=by(e,"style",t,"");for(var r=null,u=0;u<e.length;u++){var c=Po(e[u],"urn:ebu:tt:style",n);c||(c=Ka(e[u],Ry,n)),c||(c=sT(e[u],t,n)),c&&(r=c)}return r}function by(e,t,n,r,u){var c=[];if(!e||1>n.length)return c;var f=e;for(e=null;!e&&!(e=u?Po(f,u,t):f.attributes[t])&&(f=f.parent,f););if(t=e){for(t=g(t.split(" ")),u=t.next();!u.done;u=t.next())for(u=u.value,e=g(n),f=e.next();!f.done;f=e.next())if(f=f.value,r+f.attributes["xml:id"]==u){c.push(f);break}}return c}function EG(e,t,n,r){return e=w2(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function w2(e,t){var n=uT(e.attributes.begin,t),r=uT(e.attributes.end,t);return e=uT(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function uT(e,t){var n=null;if(A2.test(e)){e=A2.exec(e),n=Number(e[1]);var r=Number(e[2]),u=Number(e[3]),c=Number(e[4]);c+=(Number(e[5])||0)/t.h,u+=c/t.frameRate,n=u+60*r+3600*n}else if(I2.test(e))n=lT(I2,e);else if(C2.test(e))n=lT(C2,e);else if(b2.test(e))e=b2.exec(e),n=Number(e[1])/t.frameRate;else if(R2.test(e))e=R2.exec(e),n=Number(e[1])/t.g;else if(x2.test(e))n=lT(x2,e);else if(e)throw new Xe(2,2,2001,"Could not parse cue time range in TTML");return n}function lT(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function _G(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{ic:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}ne("shaka.text.TtmlTextParser",ga),ga.prototype.parseMedia=ga.prototype.parseMedia,ga.prototype.setManifestType=ga.prototype.setManifestType,ga.prototype.setSequenceMode=ga.prototype.setSequenceMode,ga.prototype.parseInit=ga.prototype.parseInit;function TG(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var cT=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,SG=/^(\d{1,4}(?:\.\d+)?|100)%$/,xd=/^(\d+px|\d+em|\d*\.?\d+c)$/,fT=/^(\d+)px (\d+)px$/,A2=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,I2=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,C2=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,b2=/^(\d*(?:\.\d*)?)f$/,R2=/^(\d*(?:\.\d*)?)t$/,x2=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),wG={left:Ku,center:"center",right:"end",start:Ku,end:"end"},AG={left:"line-left",center:"center",right:"line-right"},Yp=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Ry=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],N2=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];_i["application/ttml+xml"]=function(){return new ga};function Yi(){this.g=new ga}Yi.prototype.parseInit=function(e){var t=!1;if(new V().box("moov",W).box("trak",W).box("mdia",W).box("minf",W).box("stbl",W).R("stsd",ee).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new Xe(2,2,2007)},Yi.prototype.setSequenceMode=function(){},Yi.prototype.setManifestType=function(){},Yi.prototype.parseMedia=function(e,t,n){var r=this,u=!1,c=[],f=[];if(new V().box("moof",W).box("traf",W).R("subs",function(h){f=[];for(var v=h.reader,S=v.P(),R=0;R<S;R++){v.P();for(var B=v.la(),z=0;z<B;z++)h.version==1?f.push(v.P()):f.push(v.la()),v.S(),v.S(),v.P()}}).box("mdat",de(function(h){if(u=!0,f.length){for(var v=nr(h,0,f[0]),S=[],R=f[0],B=1;B<f.length;B++){var z=nr(h,R,f[B]);z=Fh(z),S.push("data:image/png;base64,"+z),R+=f[B]}c=c.concat(r.g.parseMedia(v,t,n,S))}else c=c.concat(r.g.parseMedia(h,t,n,[]))})).parse(e,!1),!u)throw new Xe(2,2,2007);return c},ne("shaka.text.Mp4TtmlParser",Yi),Yi.prototype.parseMedia=Yi.prototype.parseMedia,Yi.prototype.setManifestType=Yi.prototype.setManifestType,Yi.prototype.setSequenceMode=Yi.prototype.setSequenceMode,Yi.prototype.parseInit=Yi.prototype.parseInit,_i['application/mp4; codecs="stpp"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im1i"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im2i"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im2t"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.etd1"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.etd1|im1t"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im1t|etd1"']=function(){return new Yi},_i['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Yi};function Go(){this.h=!1,this.g="UNKNOWN"}Go.prototype.parseInit=function(){},Go.prototype.setSequenceMode=function(e){this.h=e},Go.prototype.setManifestType=function(e){this.g=e},Go.prototype.parseMedia=function(e,t){e=br(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Xe(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new Xe(2,2,2e3);if(e=Eu(e[1]),e==null)throw new Xe(2,2,2e3);r=Number(r[1]);for(var u=t.segmentStart-t.periodStart;95443.7176888889<=u;)u-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}else e=t.segmentStart;for(t=[],r=g(n[0].split("\n")),u=r.next();!u.done;u=r.next())if(u=u.value,/^Region:/.test(u)){u=new aa(u);var c=new Yt;wa(u),ys(u);for(var f=wa(u);f;){var h=c,v=f;(f=/^id=(.*)$/.exec(v))?h.id=f[1]:(f=/^width=(\d{1,2}|100)%$/.exec(v))?h.width=Number(f[1]):(f=/^lines=(\d+)$/.exec(v))?(h.height=Number(f[1]),h.heightUnits=2):(f=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(v))?(h.regionAnchorX=Number(f[1]),h.regionAnchorY=Number(f[2])):(f=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(v))?(h.viewportAnchorX=Number(f[1]),h.viewportAnchorY=Number(f[2])):/^scroll=up$/.exec(v)&&(h.scroll="up"),ys(u),f=wa(u)}t.push(c)}for(r=new Map,Tc(r),u=[],n=g(n.slice(1)),c=n.next();!c.done;c=n.next()){if(c=c.value.split("\n"),(c.length!=1||c[0])&&!/^NOTE($|[ \t])/.test(c[0])&&c[0]=="STYLE"){for(h=[],f=-1,v=1;v<c.length;v++)c[v].includes("::cue")&&(h.push([]),f=h.length-1),f!=-1&&(h[f].push(c[v]),c[v].includes("}")&&(f=-1));for(h=g(h),f=h.next();!f.done;f=h.next()){var S=f.value;f="global",(v=S[0].match(/\((.*)\)/))&&(f=v.pop()),v=S.slice(1,-1),S[0].includes("}")&&(S=/\{(.*?)\}/.exec(S[0]))&&(v=S[1].split(";")),(S=r.get(f))||(S=new jr(0,0,""));for(var R=!1,B=0;B<v.length;B++){var z=/^\s*([^:]+):\s*(.*)/.exec(v[B]);if(z){var J=z[2].trim().replace(";","");switch(z[1].trim()){case"background-color":case"background":R=!0,S.backgroundColor=J;break;case"color":R=!0,S.color=J;break;case"font-family":R=!0,S.fontFamily=J;break;case"font-size":R=!0,S.fontSize=J;break;case"font-weight":(700<=parseInt(J,10)||J=="bold")&&(R=!0,S.fontWeight=zu);break;case"font-style":switch(J){case"normal":R=!0,S.fontStyle=Ph;break;case"italic":R=!0,S.fontStyle=Su;break;case"oblique":R=!0,S.fontStyle="oblique"}break;case"opacity":R=!0,S.opacity=parseFloat(J);break;case"text-combine-upright":R=!0,S.textCombineUpright=J;break;case"text-shadow":R=!0,S.textShadow=J;break;case"white-space":R=!0,S.wrapLine=J!="noWrap"}}}R&&r.set(f,S)}}if(S=c,R=e,S.length==1&&!S[0]||/^NOTE($|[ \t])/.test(S[0])||S[0]=="STYLE"||S[0]=="REGION")c=null;else if(c=null,S[0].includes("-->")||(c=S[0],S.splice(0,1)),h=new aa(S[0]),f=yu(h),B=Sa(h,/[ \t]+--\x3e[ \t]+/g),v=yu(h),f==null||B==null||v==null)Ke("Failed to parse VTT time code. Cue skipped:",c,S),c=null;else{for(f+=R,v+=R,R=S.slice(1).join("\n").trim(),r.has("global")?(S=r.get("global").clone(),S.startTime=f,S.endTime=v,S.payload=R):S=new jr(f,v,R),ys(h),f=wa(h);f;)M2(S,f,t),ys(h),f=wa(h);Sf(S,r),c!=null&&(S.id=c),c=S}c&&u.push(c)}return u};function M2(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=Ca:e.textAlign=If[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Af)):(r=/^region:(.*)$/.exec(t))?(t=IG(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Cf[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Dl,e.line=Number(n[1]),n[2]&&(e.lineAlign=Cf[n[2].toUpperCase()]))}function IG(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}ne("shaka.text.VttTextParser",Go),Go.prototype.parseMedia=Go.prototype.parseMedia,Go.prototype.setManifestType=Go.prototype.setManifestType,Go.prototype.setSequenceMode=Go.prototype.setSequenceMode,Go.prototype.parseInit=Go.prototype.parseInit,_i["text/vtt"]=function(){return new Go},_i['text/vtt; codecs="vtt"']=function(){return new Go},_i['text/vtt; codecs="wvtt"']=function(){return new Go};function Da(){this.g=null}Da.prototype.parseInit=function(e){var t=this,n=!1;if(new V().box("moov",W).box("trak",W).box("mdia",W).R("mdhd",function(r){r=$a(r.reader,r.version),t.g=r.timescale}).box("minf",W).box("stbl",W).R("stsd",ee).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new Xe(2,2,2008);if(!n)throw new Xe(2,2,2008)},Da.prototype.setSequenceMode=function(){},Da.prototype.setManifestType=function(){},Da.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new Xe(2,2,2008);var n=0,r=[],u,c=[],f=!1,h=!1,v=!1,S=null;if(new V().box("moof",W).box("traf",W).R("tfdt",function(it){f=!0,n=To(it.reader,it.version).baseMediaDecodeTime}).R("tfhd",function(it){S=bs(it.reader,it.flags).Zc}).R("trun",function(it){h=!0,r=bu(it.reader,it.version,it.flags).Tg}).box("mdat",de(function(it){v=!0,u=it})).parse(e,!1),!v&&!f&&!h)throw new Xe(2,2,2008);e=n;for(var R=new k(u,0),B=g(r),z=B.next();!z.done;z=B.next()){z=z.value;var J=z.Kf||S,fe=z.ke?n+z.ke:e;e=fe+(J||0);var he=0;do{var Ee=R.P();he+=Ee;var Le=R.P(),Fe=null;Te(Le)=="vttc"?8<Ee&&(Fe=R.rb(Ee-8)):R.skip(Ee-8),J&&Fe&&(Ee=CG(Fe,t.periodStart+fe/this.g,t.periodStart+e/this.g),c.push(Ee))}while(z.sampleSize&&he<z.sampleSize)}return c.filter(Ys)};function CG(e,t,n){var r,u,c;return new V().box("payl",de(function(f){r=br(f)})).box("iden",de(function(f){u=br(f)})).box("sttg",de(function(f){c=br(f)})).parse(e),r?bG(r,u,c,t,n):null}function bG(e,t,n,r,u){if(e=new jr(r,u,e),Sf(e),t&&(e.id=t),n)for(t=new aa(n),n=wa(t);n;)M2(e,n,[]),ys(t),n=wa(t);return e}ne("shaka.text.Mp4VttParser",Da),Da.prototype.parseMedia=Da.prototype.parseMedia,Da.prototype.setManifestType=Da.prototype.setManifestType,Da.prototype.setSequenceMode=Da.prototype.setSequenceMode,Da.prototype.parseInit=Da.prototype.parseInit,_i['application/mp4; codecs="wvtt"']=function(){return new Da};function Pa(){}Pa.prototype.parseInit=function(){},Pa.prototype.setSequenceMode=function(){},Pa.prototype.setManifestType=function(){},Pa.prototype.parseMedia=function(e){var t=br(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=g(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var r=new aa(n[0]),u=yu(r),c=Sa(r,/,/g);if(r=yu(r),u==null||c==null||r==null)throw new Xe(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new jr(u,r,n.slice(1).join("\n").trim()))}return e},ne("shaka.text.SbvTextParser",Pa),Pa.prototype.parseMedia=Pa.prototype.parseMedia,Pa.prototype.setManifestType=Pa.prototype.setManifestType,Pa.prototype.setSequenceMode=Pa.prototype.setSequenceMode,Pa.prototype.parseInit=Pa.prototype.parseInit,_i["text/x-subviewer"]=function(){return new Pa};function ma(){this.g=new Go}ma.prototype.parseInit=function(){},ma.prototype.setSequenceMode=function(){},ma.prototype.setManifestType=function(){},ma.prototype.parseMedia=function(e,t,n){return e=br(e),e=D2(e),e=nr(Ci(e)),this.g.parseMedia(e,t,n,[])};function D2(e){var t="WEBVTT\n\n";if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=g(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}ne("shaka.text.SrtTextParser",ma),ma.srt2webvtt=D2,ma.prototype.parseMedia=ma.prototype.parseMedia,ma.prototype.setManifestType=ma.prototype.setManifestType,ma.prototype.setSequenceMode=ma.prototype.setSequenceMode,ma.prototype.parseInit=ma.prototype.parseInit,_i["text/srt"]=function(){return new ma};function Oa(){}Oa.prototype.parseInit=function(){},Oa.prototype.setSequenceMode=function(){},Oa.prototype.setManifestType=function(){},Oa.prototype.parseMedia=function(e){var t="",n="",r=null,u=null;for(u=br(e).split(/\r?\n\s*\r?\n/),e=g(u),u=e.next();!u.done;u=e.next()){var c=u.value;u=c,(c=xG.exec(c))&&(r=c[1],u=c[2]),r=="V4 Styles"||r=="V4+ Styles"?(t=u,t=n?t+("\n"+u):u):r=="Events"&&(n=n?n+("\n"+u):u)}for(r=[],u=null,t=g(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(c=L2.exec(e))){if(e=c[1].trim(),c=c[2].trim(),e=="Format")u=c.split(xy);else if(e=="Style"){e=c.split(xy),c={};for(var f=0;f<u.length&&f<e.length;f++)c[u[f]]=e[f];r.push(c)}}for(u=[],t=null,n=g(n.split(/\r?\n/)),c=n.next(),e={};!c.done;e={gh:void 0},c=n.next())if(c=c.value,!/^\s*;/.test(c)&&(f=L2.exec(c))){if(c=f[1].trim(),f=f[2].trim(),c=="Format")t=f.split(xy);else if(c=="Dialogue"){f=f.split(xy),c={};for(var h=0;h<t.length&&h<f.length;h++)c[t[h]]=f[h];h=O2(c.Start);var v=O2(c.End);f=new jr(h,v,f.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),e.gh=c.Style,(e=r.find(function(S){return function(R){return R.Name==S.gh}}(e)))&&RG(f,e),u.push(f)}}return u};function RG(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=P2(n))&&(e.color=n),(n=t.BackColour)&&(n=P2(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=zu),t.Italic&&(e.fontStyle=Su),t.Underline&&e.textDecoration.push(Vs),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Nl,e.textAlign="start";break;case 2:e.displayAlign=Nl,e.textAlign=Ca;break;case 3:e.displayAlign=Nl,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=Ca;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=Ca;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function P2(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function O2(e){return e=NG.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}ne("shaka.text.SsaTextParser",Oa),Oa.prototype.parseMedia=Oa.prototype.parseMedia,Oa.prototype.setManifestType=Oa.prototype.setManifestType,Oa.prototype.setSequenceMode=Oa.prototype.setSequenceMode,Oa.prototype.parseInit=Oa.prototype.parseInit;var xG=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,L2=/^\s*([^:]+):\s*(.*)/,xy=/\s*,\s*/,NG=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;_i["text/x-ssa"]=function(){return new Oa};function k2(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Nd:n,da:e}:null}function F2(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var u=((e[t+2]&192)>>>6)+1,c=(e[t+2]&1)<<2;return c|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:c,codec:"mp4a.40."+u}}function U2(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function MG(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function La(e){this.i=e,this.h=0,this.g=new Map}p=La.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ft(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Oo(t)||"mp4a.40.2")+'"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,r){for(var u=nr(e),c=ko(u),f=c.length;f<u.length&&!U2(u,f);f++);if(e=1e3*n.endTime,c=la(c),c.length&&n&&(c=c.find(function(R){return R.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=c.data),c=F2(u,f),!c)return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=c.sampleRate,t.channelsCount=c.channelCount;for(var h=[];f<u.length;){var v=k2(u,f);if(!v)return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));var S=v.Nd+v.da;f+S<=u.length&&h.push({data:u.subarray(f+v.Nd,f+S),size:v.da,duration:1024,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),f+=S}return u=c.sampleRate,e=Math.floor(e*u/1e3),r={id:t.id,type:"audio",codecs:c.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,ab:[],qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.h,baseMediaDecodeTime:e,Ya:h},stream:t},r=new Id([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Cd(r),this.g.set(n,t)),n=Zp(r),this.h++,t=hi(t,n),Promise.resolve(t)},ne("shaka.transmuxer.AacTransmuxer",La),La.prototype.transmux=La.prototype.transmux,La.prototype.getOriginalMimeType=La.prototype.getOriginalMimeType,La.prototype.convertCodecs=La.prototype.convertCodecs,La.prototype.isSupported=La.prototype.isSupported,La.prototype.destroy=La.prototype.destroy,Ts("audio/aac",function(){return new La("audio/aac")},sa);function B2(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,u=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+u>e.length)return null;var c=e[t+6]>>5,f=0;c===2?f+=2:(c&1&&c!==1&&(f+=2),c&4&&(f+=2)),f=(e[t+6]<<8|e[t+7])>>12-f&1;var h=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|h>>2,(h&3)<<6|c<<3|f<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][c]+f,qa:e,da:u}}function DG(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var u,c;0<r;){c=e[t];var f=Math.min(r,8),h=8-f;u=4278190080>>>24+h<<h,u=(c&u)>>h,n=n?n<<f|u:u,t+=1,r-=f}if(16>n)return!0}return!1}function ns(e){this.i=e,this.h=0,this.g=new Map}p=ns.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ft(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,r){e=nr(e);for(var u=ko(e),c=u.length;c<e.length&&!DG(e,c);c++);var f=1e3*n.endTime;u=la(u),u.length&&n&&(u=u.find(function(R){return R.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=u.data),u=0;for(var h=new Uint8Array([]),v=[];c<e.length;){var S=B2(e,c);if(!S)return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=S.sampleRate,t.channelsCount=S.channelCount,u=S.sampleRate,h=S.qa,v.push({data:e.subarray(c,c+S.da),size:S.da,duration:1536,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),c+=S.da}return e=Math.floor(f*u/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,ab:[],qa:h,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.h,baseMediaDecodeTime:e,Ya:v},stream:t},r=new Id([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Cd(r),this.g.set(n,t)),n=Zp(r),this.h++,t=hi(t,n),Promise.resolve(t)},ne("shaka.transmuxer.Ac3Transmuxer",ns),ns.prototype.transmux=ns.prototype.transmux,ns.prototype.getOriginalMimeType=ns.prototype.getOriginalMimeType,ns.prototype.convertCodecs=ns.prototype.convertCodecs,ns.prototype.isSupported=ns.prototype.isSupported,ns.prototype.destroy=ns.prototype.destroy,Ts("audio/ac3",function(){return new ns("audio/ac3")},sa);function j2(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new xa(e.subarray(t+2));xt(n,2),xt(n,3);var r=Wt(n,11)+1<<1,u=Wt(n,2);if(u==3){u=Wt(n,2),u=[24e3,22060,16e3][u];var c=3}else u=[48e3,44100,32e3][u],c=Wt(n,2);var f=Wt(n,3),h=Wt(n,1);return n=Wt(n,5),t+r>e.byteLength?null:(e=Math.floor(r*u/(16*[1,2,3,6][c])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|n<<1|0,0|f<<1|h<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][f]+h,qa:e,da:r})}function rs(e){this.i=e,this.h=0,this.g=new Map}p=rs.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ft(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,r){e=nr(e);for(var u=ko(e),c=u.length;c<e.length&&(e[c]<<8|e[c+1]<<0)!==2935;c++);var f=1e3*n.endTime;u=la(u),u.length&&n&&(u=u.find(function(R){return R.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=u.data),u=0;for(var h=new Uint8Array([]),v=[];c<e.length;){var S=j2(e,c);if(!S)return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=S.sampleRate,t.channelsCount=S.channelCount,u=S.sampleRate,h=S.qa,v.push({data:e.subarray(c,c+S.da),size:S.da,duration:1536,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),c+=S.da}return e=Math.floor(f*u/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,ab:[],qa:h,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.h,baseMediaDecodeTime:e,Ya:v},stream:t},r=new Id([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Cd(r),this.g.set(n,t)),n=Zp(r),this.h++,t=hi(t,n),Promise.resolve(t)},ne("shaka.transmuxer.Ec3Transmuxer",rs),rs.prototype.transmux=rs.prototype.transmux,rs.prototype.getOriginalMimeType=rs.prototype.getOriginalMimeType,rs.prototype.convertCodecs=rs.prototype.convertCodecs,rs.prototype.isSupported=rs.prototype.isSupported,rs.prototype.destroy=rs.prototype.destroy,Ts("audio/ec3",function(){return new rs("audio/ec3")},sa);function PG(e){if(!e.length)return null;var t=e.find(function(he){return he.type==7});if(e=e.find(function(he){return he.type==8}),!t||!e)return null;var n=new xa(t.data),r=or(n);if(or(n),or(n),Jn(n),LG.includes(r)&&(r=Tn(n),r===3&&xt(n,1),Jn(n),Jn(n),xt(n,1),Sn(n))){r=r!==3?8:12;for(var u=0;u<r;u++)Sn(n)&&(6>u?Jr(n,16):Jr(n,64))}if(Jn(n),r=Tn(n),r===0)Tn(n);else if(r===1)for(xt(n,1),Jn(n),Jn(n),r=Tn(n),u=0;u<r;u++)Jn(n);Jn(n),xt(n,1);var c=Tn(n),f=Tn(n),h=Wt(n,1);h===0&&xt(n,1),xt(n,1);var v=0,S=0,R=0,B=0;if(Sn(n)&&(v=Tn(n),S=Tn(n),R=Tn(n),B=Tn(n)),u=r=1,Sn(n)&&Sn(n)){var z=or(n),J=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],fe=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<z&&16>=z?(r=J[z-1],u=fe[z-1]):z===255&&(r=Wt(n,16),u=Wt(n,16))}return n=(2-h)*(f+1)*16-2*R-2*B,c=16*(c+1)-2*v-2*S,v=[],t=t.fullData,v.push(t.byteLength>>>8&255),v.push(t.byteLength&255),v=v.concat.apply(v,T(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,T(e)),e=new Uint8Array([1,v[3],v[4],v[5],255,225].concat(v,[1],t)),{height:n,width:c,ya:e,Ba:r,Ca:u}}function OG(e){var t=!1,n=[],r=e.find(function(v){return v.type==7}),u=!1;e=g(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;var f=!1;switch(c.type){case 1:f=u=!0;var h=c.data;r&&4<h.length&&(h=Js(new xa(h)),h===2||h===4||h===7||h===9)&&(t=!0);break;case 5:t=f=u=!0;break;case 6:f=!0;break;case 7:f=!0;break;case 8:f=!0;break;case 9:u=f=!0;break;case 12:f=!0;break;default:f=!1}u&&f&&(f=c.fullData.byteLength,h=new Uint8Array(4),h[0]=f>>24&255,h[1]=f>>16&255,h[2]=f>>8&255,h[3]=f&255,n.push(h),n.push(c.fullData))}return n.length?{data:hi.apply(co,T(n)),hd:t}:null}var LG=[100,110,122,244,44,83,86,118,128,138,139,134];function kG(e){if(!e.length)return null;var t=e.find(function(f){return f.type==32}),n=e.find(function(f){return f.type==33}),r=e.find(function(f){return f.type==34});if(!t||!n||!r)return null;var u=FG(t.fullData);e=UG(n.fullData);var c=BG(r.fullData);return t=jG(t.fullData,n.fullData,r.fullData,{zf:u.zf,Vf:u.Vf,cf:e.cf,df:e.df,Xe:e.Xe,bf:e.bf,Ye:e.Ye,Ze:e.Ze,$e:e.$e,af:e.af,Re:e.Re,Se:e.Se,Te:e.Te,Ue:e.Ue,Ve:e.Ve,We:e.We,Ke:e.Ke,Xd:e.Xd,Ie:e.Ie,He:e.He,Ge:e.Ge,Cf:c.Cf}),{height:e.height,width:e.width,ya:t,Ba:e.Pi,Ca:e.Oi}}function FG(e){var t=new xa(e,!0);return or(t),or(t),Wt(t,4),Wt(t,2),Wt(t,6),e=Wt(t,3),t=Sn(t),{zf:e+1,Vf:t}}function UG(e){e=new xa(e,!0),or(e),or(e);var t=0,n=0,r=0,u=0;Wt(e,4);var c=Wt(e,3);Sn(e);for(var f=Wt(e,2),h=Wt(e,1),v=Wt(e,5),S=or(e),R=or(e),B=or(e),z=or(e),J=or(e),fe=or(e),he=or(e),Ee=or(e),Le=or(e),Fe=or(e),it=or(e),Ue=[],Qe=[],rt=0;rt<c;rt++)Ue.push(Sn(e)),Qe.push(Sn(e));if(0<c)for(rt=c;8>rt;rt++)Wt(e,2);for(rt=0;rt<c;rt++)Ue[rt]&&Wt(e,88),Qe[rt]&&or(e);Tn(e),Ue=Tn(e),Ue==3&&Wt(e,1),Qe=Tn(e),rt=Tn(e),Sn(e)&&(t+=Tn(e),n+=Tn(e),r+=Tn(e),u+=Tn(e));var dt=Tn(e),gt=Tn(e),kt=Tn(e);if(Sn(e))for(var It=0;It<=c;It++)Tn(e),Tn(e),Tn(e);else Tn(e),Tn(e),Tn(e);if(Tn(e),Tn(e),Tn(e),Tn(e),Tn(e),Tn(e),Sn(e)&&Sn(e))for(It=0;4>It;It++)for(var Ut=0;Ut<(It===3?2:6);Ut++)if(Sn(e)){var Nt=Math.min(64,1<<4+(It<<1));1<It&&Cr(e);for(var nn=0;nn<Nt;nn++)Cr(e)}else Tn(e);for(Sn(e),Sn(e),Sn(e)&&(or(e),Tn(e),Tn(e),Sn(e)),It=Tn(e),Nt=Ut=0;Nt<It;Nt++)if(nn=!1,Nt!==0&&(nn=Sn(e)),nn){Nt===It&&Tn(e),Sn(e),Tn(e);for(var Kt=nn=0;Kt<=Ut;Kt++){var $t=Sn(e),En=!1;$t||(En=Sn(e)),($t||En)&&nn++}Ut=nn}else{for(Kt=Tn(e),nn=Tn(e),Ut=Kt+nn,$t=0;$t<Kt;$t++)Tn(e),Sn(e);for(Kt=0;Kt<nn;Kt++)Tn(e),Sn(e)}if(Sn(e))for(It=Tn(e),Ut=0;Ut<It;Ut++){for(Nt=0;Nt<kt+4;Nt++)Wt(e,1);Wt(e,1)}if(It=kt=1,Ut=0,Sn(e),Sn(e),Sn(e)){if(Sn(e)&&(Nt=or(e),nn=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Kt=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<Nt&&16>=Nt?(kt=nn[Nt-1],It=Kt[Nt-1]):Nt===255&&(kt=Wt(e,16),It=Wt(e,16))),Sn(e)&&Sn(e),Sn(e)&&(Wt(e,3),Sn(e),Sn(e)&&(or(e),or(e),or(e))),Sn(e)&&(Tn(e),Tn(e)),Sn(e),Sn(e),Sn(e),(Nt=Sn(e))&&(Tn(e),Tn(e),Tn(e),Tn(e)),Sn(e)&&(Wt(e,32),Wt(e,32),Sn(e)&&Tn(e),Sn(e)))for(Kt=!1,Nt=Sn(e),nn=Sn(e),(Nt||nn)&&((Kt=Sn(e))&&(or(e),Wt(e,5),Sn(e),Wt(e,5)),Wt(e,4),Wt(e,4),Kt&&Wt(e,4),Wt(e,5),Wt(e,5),Wt(e,5)),$t=0;$t<=c;$t++){var An=!0;En=1,Sn(e)||(An=Sn(e));var Vn=!1;if(An?Tn(e):Vn=Sn(e),Vn||(En=Tn(e)+1),Nt){for(An=0;An<En;An++)Tn(e),Tn(e),Kt&&(Tn(e),Tn(e));Sn(e)}if(nn){for(An=0;An<En;An++)Tn(e),Tn(e),Kt&&(Tn(e),Tn(e));Sn(e)}}Sn(e)&&(Sn(e),Sn(e),Sn(e),Ut=Tn(e),Tn(e),Tn(e),Tn(e),Tn(e))}return{Xe:it,cf:f,df:h,bf:v,Ye:S,Ze:R,$e:B,af:z,Re:J,Se:fe,Te:he,Ue:Ee,Ve:Le,We:Fe,Xd:Ut,Ke:0,Ie:Ue,He:dt,Ge:gt,width:Qe-(t+n)*(Ue===1||Ue===2?2:1),height:rt-(r+u)*(Ue===1?2:1),Pi:kt,Oi:It}}function BG(e){var t=new xa(e,!0);or(t),or(t),Tn(t),Tn(t),Sn(t),Sn(t),Wt(t,3),Sn(t),Sn(t),Tn(t),Tn(t),Cr(t),Sn(t),Sn(t),Sn(t)&&Tn(t),Cr(t),Cr(t),Sn(t),Sn(t),Sn(t),Sn(t),e=Sn(t),t=Sn(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Cf:n}}function jG(e,t,n,r){var u=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return u[0]=1,u[1]=(r.cf&3)<<6|(r.df?1:0)<<5|r.bf&31,u[2]=r.Ye,u[3]=r.Ze,u[4]=r.$e,u[5]=r.af,u[6]=r.Re,u[7]=r.Se,u[8]=r.Te,u[9]=r.Ue,u[10]=r.Ve,u[11]=r.We,u[12]=r.Xe,u[13]=240|(r.Xd&3840)>>8,u[14]=r.Xd&255,u[15]=252|r.Cf&3,u[16]=252|r.Ie&3,u[17]=248|r.He&7,u[18]=248|r.Ge&7,u[19]=0,u[20]=0,u[21]=(r.Ke&3)<<6|(r.zf&7)<<3|(r.Vf?1:0)<<2|3,u[22]=3,u[23]=160,u[24]=0,u[25]=1,u[26]=(e.byteLength&65280)>>8,u[27]=(e.byteLength&255)>>0,u.set(e,28),u[23+(5+e.byteLength)]=161,u[e.byteLength+29]=0,u[e.byteLength+30]=1,u[e.byteLength+31]=(t.byteLength&65280)>>8,u[e.byteLength+32]=(t.byteLength&255)>>0,u.set(t,e.byteLength+33),u[23+(e.byteLength+10+t.byteLength)]=162,u[e.byteLength+10+t.byteLength+24]=0,u[e.byteLength+10+t.byteLength+25]=1,u[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,u[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,u.set(n,e.byteLength+10+t.byteLength+28),u}function Ny(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(n!==1&&u!==0&&u!==15&&c!==3){var f=e[t+3]>>6;u=1e3*ZG[14*(n===3?3-r:r===3?3:4)+u-1],c=qG[3*(n===3?0:n===2?1:2)+c],n=GG[n][r];var h=HG[r],v=Math.floor(n*u/c+(e[t+2]>>1&1))*h,S=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(S=S?parseInt(S[1],10):0)&&87>=S&&r===2&&224e3<=u&&f===0&&(e[t+3]|=128),{sampleRate:c,channelCount:f===3?1:2,da:v,Ni:8*n*h}}return null}function Z2(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function q2(e,t){if(t+1<e.length&&Z2(e,t)){var n=Ny(e,t),r=4;return n&&n.da&&(r=n.da),t+=r,t===e.length||t+1<e.length&&Z2(e,t)}return!1}var ZG=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],qG=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],GG=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],HG=[0,1,1,4];function is(e){this.i=e,this.h=0,this.g=new Map}p=is.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ft(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,r){for(var u=nr(e),c=ko(u).length;c<u.length&&!q2(u,c);c++);var f;for(e=[];c<u.length;){var h=Ny(u,c);if(!h)return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));f||(f=h),c+h.da<=u.length&&e.push({data:u.subarray(c,c+h.da),size:h.da,duration:1152,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),c+=h.da}return f?(u=9e4*f.Ni/f.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:f.sampleRate,duration:r,ab:[],qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.h,baseMediaDecodeTime:u,Ya:e},stream:t},r=new Id([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Cd(r),this.g.set(n,t)),n=Zp(r),this.h++,t=hi(t,n),Promise.resolve(t)):Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null))},ne("shaka.transmuxer.Mp3Transmuxer",is),is.prototype.transmux=is.prototype.transmux,is.prototype.getOriginalMimeType=is.prototype.getOriginalMimeType,is.prototype.convertCodecs=is.prototype.convertCodecs,is.prototype.isSupported=is.prototype.isSupported,is.prototype.destroy=is.prototype.destroy,Ts("audio/mpeg",function(){return new is("audio/mpeg")},sa);function os(e){this.h=e,this.g=null}p=os.prototype,p.destroy=function(){},p.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Oo(e).split(","),n=Co("audio",t);return t=Co("video",t),!n||t||_o(n)!="mp3"?!1:Ft(this.convertCodecs("audio",e))},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},p.getOriginalMimeType=function(){return this.h},p.transmux=function(e,t,n,r,u){if(this.g?this.g.clearData():this.g=new kr,e=nr(e),e=this.g.parse(e),e.$c().audio!="mp3"||u!="audio")return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));for(n=new Uint8Array([]),u=g(e.Vb()),e=u.next();!e.done;e=u.next())if(e=e.value.data)for(t=0;t<e.length;)(r=Ny(e,t))?(t+r.da<=e.length&&(n=hi(n,e.subarray(t,t+r.da))),t+=r.da):t++;return Promise.resolve(n)},ne("shaka.transmuxer.MpegTsTransmuxer",os),os.prototype.transmux=os.prototype.transmux,os.prototype.getOriginalMimeType=os.prototype.getOriginalMimeType,os.prototype.convertCodecs=os.prototype.convertCodecs,os.prototype.isSupported=os.prototype.isSupported,os.prototype.destroy=os.prototype.destroy,Ts("video/mp2t",function(){return new os("video/mp2t")},Nf);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function ka(e){this.h=e,(this.g=m_.get("ISOBoxer")())&&VG(this)}function VG(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==KG[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}p=ka.prototype,p.destroy=function(){},p.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Ft(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ft(t)||Ft(e))},p.convertCodecs=function(e,t){return t.replace("mss/","")},p.getOriginalMimeType=function(){return this.h},p.transmux=function(e,t,n){if(!n)return Promise.resolve(nr(e));if(!t.mssPrivateData)return Promise.reject(new Xe(2,3,3020,n?n.M()[0]:null));try{var r,u=this.g.parseBuffer(e),c=u.fetch("tfhd");c.track_ID=t.id+1;var f=u.fetch("tfdt"),h=u.fetch("traf");f===null&&(f=this.g.createFullBox("tfdt",h,c),f.version=1,f.flags=0,f.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var v=u.fetch("trun"),S=u.fetch("tfxd");S&&S._parent.boxes.splice(S._parent.boxes.indexOf(S),1);var R=u.fetch("tfrf");R&&R._parent.boxes.splice(R._parent.boxes.indexOf(R),1);var B=u.fetch("sepiff");if(B!==null){B.type="senc",B.usertype=void 0;var z=u.fetch("saio");if(z===null){z=this.g.createFullBox("saio",h),z.version=0,z.flags=0,z.entry_count=1,z.offset=[0];var J=this.g.createFullBox("saiz",h);if(J.version=0,J.flags=0,J.sample_count=B.sample_count,J.default_sample_info_size=0,J.sample_info_size=[],B.flags&2)for(r=0;r<B.sample_count;r+=1)J.sample_info_size[r]=10+6*B.entry[r].NumberOfEntries;else J.default_sample_info_size=8}}c.flags&=16777214,c.flags|=131072,v.flags|=1;var fe=u.fetch("moof");v.data_offset=fe.getLength()+8;var he=u.fetch("saio");he!==null&&(he.offset[0]=G2(fe,"traf")+G2(h,"senc")+16);var Ee=nr(u.write());return Promise.resolve(Ee)}catch(Le){return Le instanceof Xe?Promise.reject(Le):Promise.reject(new Xe(2,3,3022,n?n.M()[0]:null))}};function G2(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}ne("shaka.transmuxer.MssTransmuxer",ka),ka.prototype.transmux=ka.prototype.transmux,ka.prototype.getOriginalMimeType=ka.prototype.getOriginalMimeType,ka.prototype.convertCodecs=ka.prototype.convertCodecs,ka.prototype.isSupported=ka.prototype.isSupported,ka.prototype.destroy=ka.prototype.destroy;var KG=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Ts("mss/audio/mp4",function(){return new ka("mss/audio/mp4")},sa),Ts("mss/video/mp4",function(){return new ka("mss/video/mp4")},sa);function as(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}p=as.prototype,p.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},p.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Oo(n).split(",");return n=Co("audio",r),r=Co("video",r),n&&(n=_o(n),!zG.includes(n))||r&&(n=_o(r),!YG.includes(n))?!1:t?Ft(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ft(t)||Ft(e))},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Oo(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return tl(n,"audio/mp4")}).map(Is).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},p.getOriginalMimeType=function(){return this.l},p.transmux=function(e,t,n,r,u){var c=nr(e);if(u=="audio"&&!op(c)){for(var f=ko(c),h=f.length;h<c.length;h++)if(q2(c,h))return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));for(h=f.length;h<c.length;h++)if(U2(c,h))return this.h||(this.h=new La("audio/aac")),this.h.transmux(e,t,n,r,u);return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null))}this.j?this.j.clearData():this.j=new kr;var v=this.j.parse(c),S=[],R=v.$c();try{var B=null;if(u=="video"){switch(R.video){case"avc":var z=[],J=null,fe=[],he=v.nc();if(!he.length)throw new Xe(2,3,3023,n?n.M()[0]:null);for(var Ee=0;Ee<he.length;Ee++){var Le=he[Ee],Fe=Le.nalus;fe.push.apply(fe,T(Fe));var it=OG(Fe);if(it){J==null&&(J=Le.dts);var Ue=void 0;Ue=Ee+1<he.length?(he[Ee+1].dts||0)-(Le.dts||0):1<he.length?(Le.dts||0)-(he[Ee-1].dts||0):9e4*(n.endTime-n.startTime),z.push({data:it.data,size:it.data.byteLength,duration:Ue,eb:Math.round((Le.pts||0)-(Le.dts||0)),flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:it.hd?2:1,ib:it.hd?0:1}})}}var Qe=PG(fe);if(!Qe||J==null)throw new Xe(2,3,3018,n?n.M()[0]:null);t.height=Qe.height,t.width=Qe.width,B={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,ab:[],qa:new Uint8Array([]),ya:Qe.ya,Ba:Qe.Ba,Ca:Qe.Ca,data:{sb:this.g,baseMediaDecodeTime:J,Ya:z},stream:t};break;case"hvc":var rt=[],dt=null,gt=[],kt=v.nc();if(!kt.length)throw new Xe(2,3,3023,n?n.M()[0]:null);for(var It=0;It<kt.length;It++){var Ut=kt[It],Nt=Ut.nalus;gt.push.apply(gt,T(Nt));for(var nn=!1,Kt=[],$t=!1,En=g(Nt),An=En.next();!An.done;An=En.next()){var Vn=An.value;switch(Vn.type){case 1:case 0:var Qn=$t=!0;break;case 19:case 20:case 21:nn=Qn=$t=!0;break;case 32:Qn=!0;break;case 33:Qn=!0;break;case 34:Qn=!0;break;case 35:$t=Qn=!0;break;case 39:case 40:Qn=!0;break;default:Qn=!1}if($t&&Qn){var ar=Vn.fullData.byteLength,Ar=new Uint8Array(4);Ar[0]=ar>>24&255,Ar[1]=ar>>16&255,Ar[2]=ar>>8&255,Ar[3]=ar&255,Kt.push(Ar),Kt.push(Vn.fullData)}}var Qr=Kt.length?{data:hi.apply(co,T(Kt)),hd:nn}:null;if(Qr){dt==null&&Ut.dts!=null&&(dt=Ut.dts);var Yr=void 0;Yr=It+1<kt.length?(kt[It+1].dts||0)-(Ut.dts||0):1<kt.length?(Ut.dts||0)-(kt[It-1].dts||0):9e4*(n.endTime-n.startTime),rt.push({data:Qr.data,size:Qr.data.byteLength,duration:Yr,eb:Math.round((Ut.pts||0)-(Ut.dts||0)),flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:Qr.hd?2:1,ib:Qr.hd?0:1}})}}var Si=kG(gt);if(!Si||dt==null)throw new Xe(2,3,3018,n?n.M()[0]:null);t.height=Si.height,t.width=Si.width,B={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,ab:[],qa:new Uint8Array([]),ya:Si.ya,Ba:Si.Ba,Ca:Si.Ca,data:{sb:this.g,baseMediaDecodeTime:dt,Ya:rt},stream:t}}B&&(S.push(B),B=null)}if(u=="audio"){switch(R.audio){case"aac":for(var Pr=[],Fr,si=null,Ns=g(v.Vb()),Wi=Ns.next();!Wi.done;Wi=Ns.next()){var Fa=Wi.value,ss=Fa.data;if(ss){var $i=0;if(Fr=F2(ss,$i),!Fr)throw new Xe(2,3,3018,n?n.M()[0]:null);for(t.audioSamplingRate=Fr.sampleRate,t.channelsCount=Fr.channelCount,si==null&&Fa.pts!==null&&(si=Fa.pts);$i<ss.length;){var Ms=k2(ss,$i);if(Ms){var Nd=Ms.Nd+Ms.da;$i+Nd<=ss.length&&Pr.push({data:ss.subarray($i+Ms.Nd,$i+Nd),size:Ms.da,duration:1024,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),$i+=Nd}else $i++}}}if(!Fr||si==null){if(!v.nc().length)throw new Xe(2,3,3018,n?n.M()[0]:null);si=9e4*n.startTime;var gl=Co("audio",t.codecs.split(","));if(!gl||!t.channelsCount||!t.audioSamplingRate)throw new Xe(2,3,3018,n?n.M()[0]:null);Fr={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:gl};var Md=MG(gl,t.channelsCount);if(!Md)throw new Xe(2,3,3018,n?n.M()[0]:null);for(var Dy=si+9e4*(n.endTime-n.startTime),Xp=si;Xp<Dy;)Pr.push({data:Md,size:Md.byteLength,duration:1024,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),Xp+=1024/Fr.sampleRate*9e4}var Ds=Fr.sampleRate,JG=si/9e4*Ds;B={id:t.id,type:"audio",codecs:Fr.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ds,duration:r,ab:[],qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:JG,Ya:Pr},stream:t};break;case"ac3":for(var tP=[],Py=0,pT=new Uint8Array([]),Oy=null,nP=g(v.Vb()),gT=nP.next();!gT.done;gT=nP.next()){var mT=gT.value,vT=mT.data;Oy==null&&mT.pts!==null&&(Oy=mT.pts);for(var Dd=0;Dd<vT.length;){var Yl=B2(vT,Dd);Yl?(t.audioSamplingRate=Yl.sampleRate,t.channelsCount=Yl.channelCount,Py=Yl.sampleRate,pT=Yl.qa,tP.push({data:vT.subarray(Dd,Dd+Yl.da),size:Yl.da,duration:1536,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),Dd+=Yl.da):Dd++}}if(Py==0||pT.byteLength==0||Oy==null)throw new Xe(2,3,3018,n?n.M()[0]:null);var e9=Oy/9e4*Py;B={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Py,duration:r,ab:[],qa:pT,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:e9,Ya:tP},stream:t};break;case"ec3":for(var rP=[],Ly=0,yT=new Uint8Array([]),ky=null,iP=g(v.Vb()),ET=iP.next();!ET.done;ET=iP.next()){var _T=ET.value,TT=_T.data;ky==null&&_T.pts!==null&&(ky=_T.pts);for(var Pd=0;Pd<TT.length;){var Wl=j2(TT,Pd);Wl?(t.audioSamplingRate=Wl.sampleRate,t.channelsCount=Wl.channelCount,Ly=Wl.sampleRate,yT=Wl.qa,rP.push({data:TT.subarray(Pd,Pd+Wl.da),size:Wl.da,duration:1536,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),Pd+=Wl.da):Pd++}}if(Ly==0||yT.byteLength==0||ky==null)throw new Xe(2,3,3018,n?n.M()[0]:null);var t9=ky/9e4*Ly;B={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ly,duration:r,ab:[],qa:yT,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:t9,Ya:rP},stream:t};break;case"mp3":for(var oP=[],Fy,Uy=null,aP=g(v.Vb()),ST=aP.next();!ST.done;ST=aP.next()){var wT=ST.value,Qp=wT.data;if(Qp){Uy==null&&wT.pts!==null&&(Uy=wT.pts);for(var jc=0;jc<Qp.length;){var Od=Ny(Qp,jc);Od?(Fy||(Fy=Od),jc+Od.da<=Qp.length&&oP.push({data:Qp.subarray(jc,jc+Od.da),size:Od.da,duration:1152,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),jc+=Od.da):jc++}}}if(!Fy||Uy==null)throw new Xe(2,3,3018,n?n.M()[0]:null);var sP=Fy.sampleRate,n9=Uy/9e4*sP;B={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:sP,duration:r,ab:[],qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:n9,Ya:oP},stream:t};break;case"opus":var uP=[],By=null,Nu=v.F;if(!Nu)throw new Xe(2,3,3018,n?n.M()[0]:null);var Ho=[];switch(Nu.Ah){case 1:case 2:Ho=[0];break;case 0:Ho=[255,1,1,0,1];break;case 128:Ho=[255,2,0,0,1];break;case 3:Ho=[1,2,1,0,2,1];break;case 4:Ho=[1,2,2,0,1,2,3];break;case 5:Ho=[1,3,2,0,4,1,2,3];break;case 6:Ho=[1,4,2,0,4,1,2,3,5];break;case 7:Ho=[1,4,2,0,4,1,2,3,5,6];break;case 8:Ho=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Ho=[1,1,2,0,1];break;case 131:Ho=[1,1,3,0,1,2];break;case 132:Ho=[1,1,4,0,1,2,3];break;case 133:Ho=[1,1,5,0,1,2,3,4];break;case 134:Ho=[1,1,6,0,1,2,3,4,5];break;case 135:Ho=[1,1,7,0,1,2,3,4,5,6];break;case 136:Ho=[1,1,8,0,1,2,3,4,5,6,7]}for(var lP=new Uint8Array([0,Nu.channelCount,0,0,Nu.sampleRate>>>24&255,Nu.sampleRate>>>17&255,Nu.sampleRate>>>8&255,Nu.sampleRate>>>0&255,0,0].concat(T(Ho))),cP=Nu.sampleRate,fP=g(v.Vb()),AT=fP.next();!AT.done;AT=fP.next()){var IT=AT.value,Ld=IT.data;By==null&&IT.pts!==null&&(By=IT.pts);for(var Jp=0;Jp<Ld.length;){for(var r9=(Ld[Jp+1]&16)!==0,i9=(Ld[Jp+1]&8)!==0,ml=Jp+2,jy=0;Ld[ml]===255;)jy+=255,ml+=1;jy+=Ld[ml],ml+=1,ml+=r9?2:0,ml+=i9?2:0;var dP=Ld.slice(ml,ml+jy);uP.push({data:dP,size:dP.byteLength,duration:960,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),Jp=ml+jy}}if(lP.byteLength==0||By==null)throw new Xe(2,3,3018,n?n.M()[0]:null);t.audioSamplingRate=Nu.sampleRate,t.channelsCount=Nu.channelCount;var o9=By/9e4*cP;B={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:cP,duration:r,ab:[],qa:lP,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:o9,Ya:uP},stream:t}}B&&(S.push(B),B=null)}}catch(RT){return RT&&RT.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(RT)}if(!S.length)return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));var hP=new Id(S),CT=t.id+"_"+n.i;if(this.i.has(CT))var bT=this.i.get(CT);else bT=Cd(hP),this.i.set(CT,bT);var a9=Zp(hP);this.g++;var s9=hi(bT,a9);return Promise.resolve(s9)},ne("shaka.transmuxer.TsTransmuxer",as),as.prototype.transmux=as.prototype.transmux,as.prototype.getOriginalMimeType=as.prototype.getOriginalMimeType,as.prototype.convertCodecs=as.prototype.convertCodecs,as.prototype.isSupported=as.prototype.isSupported,as.prototype.destroy=as.prototype.destroy;var zG=["aac","ac-3","ec-3","mp3","opus"],YG=["avc","hevc"];Ts("video/mp2t",function(){return new as("video/mp2t")},Oh);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function H2(){}var Wp;function V2(){Wp||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Wp=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=WG,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function WG(e,t){var n=this,r;return Re(function(u){return u.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),C(u,Wp.call(n,e,t),2)):(r=u.h,J2(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Wp,u.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=K2,u.return(K2.call(n,e,t))))})}function K2(e,t){var n=this,r,u,c,f,h,v,S,R,B,z,J,fe;return Re(function(he){if(he.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=Q2(e),u=[],c=g(t),f=c.next();!f.done;f=c.next())h=f.value,v=z2(h.videoCapabilities,r),S=z2(h.audioCapabilities,r),h.videoCapabilities&&h.videoCapabilities.length&&!v.length||h.audioCapabilities&&h.audioCapabilities.length&&!S.length||(R=Object.assign({},h),R.videoCapabilities=v,R.audioCapabilities=S,u.push(R));if(!u.length)throw B=Error("Unsupported keySystem or supportedConfigurations."),B.name="NotSupportedError",B.code=DOMException.NOT_SUPPORTED_ERR,B;return C(he,Wp.call(n,e,u),2)}return z=he.h,fe=J=null,u[0]&&(u[0].videoCapabilities&&(J=u[0].videoCapabilities[0].encryptionScheme),u[0].audioCapabilities&&(fe=u[0].audioCapabilities[0].encryptionScheme)),he.return(new My(z,J,fe))})}function z2(e,t){return e&&e.filter(function(n){return dT(n.encryptionScheme,t)})}ne("EmeEncryptionSchemePolyfill",H2),H2.install=V2;function Y2(){}var $p;function W2(){$p||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?($p=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=$G,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function $G(e){var t=this,n,r;return Re(function(u){switch(u.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),C(u,$p.call(t,e),2);case 2:if(n=u.h,!e.keySystemConfiguration)return u.return(n);if((r=n.keySystemAccess)&&J2(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=$p,u.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=$2,r){u.u(3);break}return C(u,X2(e),4);case 4:return n.keySystemAccess=u.h,u.return(n);case 3:return u.return($2.call(t,e))}})}function $2(e){var t=this,n,r,u,c,f,h,v;return Re(function(S){switch(S.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),r=n=null,!e.keySystemConfiguration||(u=e.keySystemConfiguration,c=u.keySystem,r=u.audio&&u.audio.encryptionScheme,n=u.video&&u.video.encryptionScheme,f=Q2(c),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},dT(r,f)&&dT(n,f))?C(S,$p.call(t,e),2):S.return(h);case 2:if(v=S.h,v.keySystemAccess){v.keySystemAccess=new My(v.keySystemAccess,n,r),S.u(3);break}if(!e.keySystemConfiguration){S.u(3);break}return C(S,X2(e),5);case 5:v.keySystemAccess=S.h;case 3:return S.return(v)}})}function X2(e){var t,n;return Re(function(r){if(r.g==1){var u=e.keySystemConfiguration,c=[],f=[];return u.audio&&c.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:u.audio.encryptionScheme}),u.video&&f.push({robustness:u.video.robustness||"",contentType:e.video.contentType,encryptionScheme:u.video.encryptionScheme}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},c.length&&(u.audioCapabilities=c),f.length&&(u.videoCapabilities=f),t=u,C(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}ne("McEncryptionSchemePolyfill",Y2),Y2.install=W2;function My(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}My.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=g(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=g(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},My.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function Q2(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function J2(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function dT(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&(QG||XG))}function hT(){}function eP(){V2(),W2()}ne("EncryptionSchemePolyfills",hT),hT.install=eP;var XG=navigator.userAgent.includes("CrKey"),QG=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10);typeof N<"u"&&N.exports&&(N.exports=hT)}).call(l,i,i,void 0);for(var d in l.shaka)o[d]=l.shaka[d]})()})(hB);const o0=BC(hB),Vc=class Vc{static async setup_stream(i,l,d){if(this.licenseUrl=l,this.customDrmHeaders=d,!i.mediaKeys)try{const m=await this.get_media_keys(i);if(m){await i.setMediaKeys(m.mediaKey);const I=m.mediaKey.createSession();this.on_handle_license_messageEvent=async N=>{await this.handle_license_messageEvent(m.mediaKey,I,N)},this.on_handle_encrypted_event=async N=>{await this.handle_encrypted_event(m,I,N)},I.addEventListener("message",this.on_handle_license_messageEvent),i.addEventListener("encrypted",this.on_handle_encrypted_event)}}catch(m){console.error("### DRMManager.setupStream error:",m)}}static async create_mediaKey_sessions(i){for(let l=0;l<i;l++){const m=await(await navigator.requestMediaKeySystemAccess("com.widevine.alpha",this.DRM_CONFIG)).createMediaKeys();this.mediaKey_pool.push({id:this.mediaKey_pool.length+1,mediaKey:m,htmlMediaElement:null,isInitialized:!1})}}static async release_mediaKeys(i){const l=this.mediaKey_pool.find(d=>d.htmlMediaElement===i);this.mediaKey_pool.length>0&&l&&(await i.setMediaKeys(null),l.htmlMediaElement=null,l.isInitialized=!1)}static get is_prepared(){return this.mediaKey_pool.length>1}static get_mediaKey_id(i){const l=this.mediaKey_pool.find(d=>d.mediaKey===i);return l?l.id:null}static async get_media_keys(i){let l=this.mediaKey_pool.find(d=>d.htmlMediaElement===i);if(l)return l;if((this.mediaKey_pool.length<=0||this.mediaKey_pool.every(d=>d.htmlMediaElement))&&await this.create_mediaKey_sessions(1),l=this.mediaKey_pool.find(d=>!d.htmlMediaElement),l)return l.htmlMediaElement=i,l;throw new Error("No media keys available")}static async handle_license_messageEvent(i,l,d){try{const m=d.message.byteLength;console.log(m,"byteLength");let I;m===2?I=m.toString():I="".concat(this.get_mediaKey_id(i),"-").concat(m);let N;this.license_cache.has(I)?(console.log("using cached licence"),N=this.license_cache.get(I)):(N=await(await fetch(this.licenseUrl,{method:"POST",body:d.message,headers:{"Content-Type":"application/octet-stream",...this.customDrmHeaders}})).arrayBuffer(),N?this.license_cache.set(I,N):console.error("License response is null")),N?await l.update(N):console.error("License not found in cache and could not be fetched")}catch(m){console.error("Error during license acquisition: ".concat(m))}}static async handle_encrypted_event(i,l,d){if(d.initDataType&&d.initData)try{if(!i.isInitialized){i.isInitialized=!0;const m=this.mediaKey_pool.findIndex(I=>I.id===i.id);m!==-1&&(this.mediaKey_pool[m]=i),await l.generateRequest(d.initDataType,d.initData)}}catch(m){console.error("Failed to generate a license request: ".concat(m))}else console.error("Encrypted event is missing initData or initDataType")}};Vc.licenseUrl="",Vc.customDrmHeaders={},Vc.license_cache=new Map,Vc.mediaKey_pool=[],Vc.DRM_CONFIG=[{keySystem:"com.widevine.alpha",initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"'},{contentType:'video/mp4; codecs="avc1.64001f"'},{contentType:'video/mp4; codecs="avc1.64001e"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}],sessionTypes:["temporary"],persistentState:"optional",distinctiveIdentifier:"optional"}];let CC=Vc;class oY extends dB{constructor(i){var l;super(i),this.name="ShakaEngine",this.addPolicyToRequests=(d,m)=>{switch(d){case o0.net.NetworkingEngine.RequestType.MANIFEST:case o0.net.NetworkingEngine.RequestType.SEGMENT:if(!this.options.policyQuery||!this.options.policyQuery.startsWith("?"))break;m.uris[0]+=this.options.policyQuery;break;case o0.net.NetworkingEngine.RequestType.LICENSE:if(!this.options.customLicenceRequestHeaders)break;Object.entries(this.options.customLicenceRequestHeaders).forEach(([I,N])=>{m.headers[I]=N});break}},this.addPolicyToRequests=this.addPolicyToRequests.bind(this),this.player=new o0.Player,this.options.widevineLicenseUrl&&this.player.configure({drm:{servers:{"com.widevine.alpha":this.options.keepProtectionData===!1?this.options.widevineLicenseUrl:" "}},streaming:{bufferingGoal:120,rebufferingGoal:60,bufferBehind:0}}),(l=this.player.getNetworkingEngine())==null||l.registerRequestFilter(this.addPolicyToRequests)}destroy(){this.player&&this.player.destroy(),super.destroy()}async load(i){var l;if(this.player&&i){if(this.options.widevineLicenseUrl&&this.options.keepProtectionData!==!1)try{await this.player.unload(),await CC.setup_stream(this.options.element,this.options.widevineLicenseUrl,(l=this.options.customLicenceRequestHeaders)!=null?l:{})}catch(d){console.log(d)}await this.player.attach(this.options.element),await this.player.load(i,void 0)}}}class aY extends df{constructor(i){super(),this.options=i,this.options.preferredTech==="shaka"?this.engine=new oY(i):this.engine=new iY(i),this.engine.onAny(this.propagateEvent.bind(this))}get playerEngine(){return this.engine}get videoElement(){return this.engine.video}propagateEvent(i,l){this.emit(i,l)}destroy(){this.engine.destroy()}get stats(){return this.engine.getStats()}async load(i,l){this.currentSource=i,await this.engine.load(i,l)}}class sY extends df{constructor(i){var l;console.log("# CONSTRUCTOR",i),super(),this.options=i,this._eventsEmitted=!1,this.eventClock=i.eventClock,this.containerElement=i.containerElement,this.videoElement=document.createElement("video"),(l=document.querySelector("video"))==null||l.remove(),this.containerElement.appendChild(this.videoElement),this.player=new aY({autoPlay:!1,...i.playerOptions,element:this.videoElement})}get currentSource(){var i;return(i=this.player)==null?void 0:i.currentSource}get currentCamera(){return this._currentCamera}get stats(){var i;return(i=this.player)==null?void 0:i.engine.getStats()}logPlayerStuff(){[this.player].forEach((i,l)=>{console.log("Bitrate",l,i.engine.video.getVideoPlaybackQuality()),console.log("Time",l,i.engine.video.currentTime),console.log("Paused",l,i.engine.video.paused)})}propagateEvent(i,l){this.emit(i,l)}async load(i,l,d){return new Promise((m,I)=>{try{if(this.eventClock.playerSyncer.disconnectMedia(),!this.player)throw new Error("Found no ImagienPlayer to use :( ");this._eventsEmitted||(this.player.onAny(this.propagateEvent.bind(this)),this._eventsEmitted=!0),console.log("LOAD"),this.player.load(l,d).then(()=>{this.player.once("playing",()=>{console.log("# once playing"),this._currentCamera=i,this.eventClock.playerSyncer.connectMediaElement(this.videoElement,((d==null?void 0:d.eventOffset)||0)-((d==null?void 0:d.reelOffset)||0))});const N=((d==null?void 0:d.eventOffset)||0)-((d==null?void 0:d.reelOffset)||0),p=this.eventClock.getExpectedPositionInSeconds()-N;Math.sign(p)<0?setTimeout(()=>{this.videoElement.play(),m()},Math.abs(p)*1e3):(this.videoElement.currentTime=p,this.videoElement.play(),m())})}catch(N){console.error(N),I(N)}})}async requestFullscreen(){await this.containerElement.requestFullscreen()}async exitFullscreen(){await document.exitFullscreen()}destroy(){super.destroy(),[this.player].forEach(i=>{i.destroy()})}}var lg=function(o){return o&&o.Math===Math&&o},Ha=lg(typeof globalThis=="object"&&globalThis)||lg(typeof window=="object"&&window)||lg(typeof self=="object"&&self)||lg(typeof cu=="object"&&cu)||lg(typeof cu=="object"&&cu)||function(){return this}()||Function("return this")(),Qb={},ms=function(o){try{return!!o()}catch(i){return!0}},uY=ms,mc=!uY(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),lY=ms,Jb=!lY(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")}),cY=Jb,a0=Function.prototype.call,bl=cY?a0.bind(a0):function(){return a0.apply(a0,arguments)},pB={},gB={}.propertyIsEnumerable,mB=Object.getOwnPropertyDescriptor,fY=mB&&!gB.call({1:2},1);pB.f=fY?function(i){var l=mB(this,i);return!!l&&l.enumerable}:gB;var vB=function(o,i){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:i}},yB=Jb,EB=Function.prototype,bC=EB.call,dY=yB&&EB.bind.bind(bC,bC),_a=yB?dY:function(o){return function(){return bC.apply(o,arguments)}},_B=_a,hY=_B({}.toString),pY=_B("".slice),CE=function(o){return pY(hY(o),8,-1)},gY=_a,mY=ms,vY=CE,nI=Object,yY=gY("".split),EY=mY(function(){return!nI("z").propertyIsEnumerable(0)})?function(o){return vY(o)==="String"?yY(o,""):nI(o)}:nI,bE=function(o){return o==null},_Y=bE,TY=TypeError,um=function(o){if(_Y(o))throw new TY("Can't call method on "+o);return o},SY=EY,wY=um,RE=function(o){return SY(wY(o))},rI=typeof document=="object"&&document.all,Va=typeof rI>"u"&&rI!==void 0?function(o){return typeof o=="function"||o===rI}:function(o){return typeof o=="function"},AY=Va,wh=function(o){return typeof o=="object"?o!==null:AY(o)},iI=Ha,IY=Va,CY=function(o){return IY(o)?o:void 0},eR=function(o,i){return arguments.length<2?CY(iI[o]):iI[o]&&iI[o][i]},bY=_a,TB=bY({}.isPrototypeOf),RY=typeof navigator<"u"&&String(navigator.userAgent)||"",SB=Ha,oI=RY,B3=SB.process,j3=SB.Deno,Z3=B3&&B3.versions||j3&&j3.version,q3=Z3&&Z3.v8,lu,$0;q3&&(lu=q3.split("."),$0=lu[0]>0&&lu[0]<4?1:+(lu[0]+lu[1]));!$0&&oI&&(lu=oI.match(/Edge\/(\d+)/),(!lu||lu[1]>=74)&&(lu=oI.match(/Chrome\/(\d+)/),lu&&($0=+lu[1])));var xY=$0,G3=xY,NY=ms,MY=Ha,DY=MY.String,wB=!!Object.getOwnPropertySymbols&&!NY(function(){var o=Symbol("symbol detection");return!DY(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&G3&&G3<41}),PY=wB,AB=PY&&!Symbol.sham&&typeof Symbol.iterator=="symbol",OY=eR,LY=Va,kY=TB,FY=AB,UY=Object,IB=FY?function(o){return typeof o=="symbol"}:function(o){var i=OY("Symbol");return LY(i)&&kY(i.prototype,UY(o))},BY=String,jY=function(o){try{return BY(o)}catch(i){return"Object"}},ZY=Va,qY=jY,GY=TypeError,HY=function(o){if(ZY(o))return o;throw new GY(qY(o)+" is not a function")},VY=HY,KY=bE,tR=function(o,i){var l=o[i];return KY(l)?void 0:VY(l)},aI=bl,sI=Va,uI=wh,zY=TypeError,YY=function(o,i){var l,d;if(i==="string"&&sI(l=o.toString)&&!uI(d=aI(l,o))||sI(l=o.valueOf)&&!uI(d=aI(l,o))||i!=="string"&&sI(l=o.toString)&&!uI(d=aI(l,o)))return d;throw new zY("Can't convert object to primitive value")},CB={exports:{}},H3=Ha,WY=Object.defineProperty,nR=function(o,i){try{WY(H3,o,{value:i,configurable:!0,writable:!0})}catch(l){H3[o]=i}return i},$Y=Ha,XY=nR,V3="__core-js_shared__",K3=CB.exports=$Y[V3]||XY(V3,{});(K3.versions||(K3.versions=[])).push({version:"3.37.1",mode:"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var rR=CB.exports,z3=rR,iR=function(o,i){return z3[o]||(z3[o]=i||{})},QY=um,JY=Object,bB=function(o){return JY(QY(o))},eW=_a,tW=bB,nW=eW({}.hasOwnProperty),vc=Object.hasOwn||function(i,l){return nW(tW(i),l)},rW=_a,iW=0,oW=Math.random(),aW=rW(1 .toString),RB=function(o){return"Symbol("+(o===void 0?"":o)+")_"+aW(++iW+oW,36)},sW=Ha,uW=iR,Y3=vc,lW=RB,cW=wB,fW=AB,Jd=sW.Symbol,lI=uW("wks"),dW=fW?Jd.for||Jd:Jd&&Jd.withoutSetter||lW,pf=function(o){return Y3(lI,o)||(lI[o]=cW&&Y3(Jd,o)?Jd[o]:dW("Symbol."+o)),lI[o]},hW=bl,W3=wh,$3=IB,pW=tR,gW=YY,mW=pf,vW=TypeError,yW=mW("toPrimitive"),EW=function(o,i){if(!W3(o)||$3(o))return o;var l=pW(o,yW),d;if(l){if(i===void 0&&(i="default"),d=hW(l,o,i),!W3(d)||$3(d))return d;throw new vW("Can't convert object to primitive value")}return i===void 0&&(i="number"),gW(o,i)},_W=EW,TW=IB,xB=function(o){var i=_W(o,"string");return TW(i)?i:i+""},SW=Ha,X3=wh,RC=SW.document,wW=X3(RC)&&X3(RC.createElement),NB=function(o){return wW?RC.createElement(o):{}},AW=mc,IW=ms,CW=NB,MB=!AW&&!IW(function(){return Object.defineProperty(CW("div"),"a",{get:function(){return 7}}).a!==7}),bW=mc,RW=bl,xW=pB,NW=vB,MW=RE,DW=xB,PW=vc,OW=MB,Q3=Object.getOwnPropertyDescriptor;Qb.f=bW?Q3:function(i,l){if(i=MW(i),l=DW(l),OW)try{return Q3(i,l)}catch(d){}if(PW(i,l))return NW(!RW(xW.f,i,l),i[l])};var lm={},LW=mc,kW=ms,DB=LW&&kW(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),FW=wh,UW=String,BW=TypeError,gf=function(o){if(FW(o))return o;throw new BW(UW(o)+" is not an object")},jW=mc,ZW=MB,qW=DB,s0=gf,J3=xB,GW=TypeError,cI=Object.defineProperty,HW=Object.getOwnPropertyDescriptor,fI="enumerable",dI="configurable",hI="writable";lm.f=jW?qW?function(i,l,d){if(s0(i),l=J3(l),s0(d),typeof i=="function"&&l==="prototype"&&"value"in d&&hI in d&&!d[hI]){var m=HW(i,l);m&&m[hI]&&(i[l]=d.value,d={configurable:dI in d?d[dI]:m[dI],enumerable:fI in d?d[fI]:m[fI],writable:!1})}return cI(i,l,d)}:cI:function(i,l,d){if(s0(i),l=J3(l),s0(d),ZW)try{return cI(i,l,d)}catch(m){}if("get"in d||"set"in d)throw new GW("Accessors not supported");return"value"in d&&(i[l]=d.value),i};var VW=mc,KW=lm,zW=vB,oR=VW?function(o,i,l){return KW.f(o,i,zW(1,l))}:function(o,i,l){return o[i]=l,o},PB={exports:{}},xC=mc,YW=vc,OB=Function.prototype,WW=xC&&Object.getOwnPropertyDescriptor,aR=YW(OB,"name"),$W=aR&&(function(){}).name==="something",XW=aR&&(!xC||xC&&WW(OB,"name").configurable),QW={EXISTS:aR,PROPER:$W,CONFIGURABLE:XW},JW=_a,e$=Va,NC=rR,t$=JW(Function.toString);e$(NC.inspectSource)||(NC.inspectSource=function(o){return t$(o)});var n$=NC.inspectSource,r$=Ha,i$=Va,eF=r$.WeakMap,o$=i$(eF)&&/native code/.test(String(eF)),a$=iR,s$=RB,tF=a$("keys"),LB=function(o){return tF[o]||(tF[o]=s$(o))},sR={},u$=o$,kB=Ha,l$=wh,c$=oR,pI=vc,gI=rR,f$=LB,d$=sR,nF="Object already initialized",MC=kB.TypeError,h$=kB.WeakMap,X0,$g,Q0,p$=function(o){return Q0(o)?$g(o):X0(o,{})},g$=function(o){return function(i){var l;if(!l$(i)||(l=$g(i)).type!==o)throw new MC("Incompatible receiver, "+o+" required");return l}};if(u$||gI.state){var Ou=gI.state||(gI.state=new h$);Ou.get=Ou.get,Ou.has=Ou.has,Ou.set=Ou.set,X0=function(o,i){if(Ou.has(o))throw new MC(nF);return i.facade=o,Ou.set(o,i),i},$g=function(o){return Ou.get(o)||{}},Q0=function(o){return Ou.has(o)}}else{var Fd=f$("state");d$[Fd]=!0,X0=function(o,i){if(pI(o,Fd))throw new MC(nF);return i.facade=o,c$(o,Fd,i),i},$g=function(o){return pI(o,Fd)?o[Fd]:{}},Q0=function(o){return pI(o,Fd)}}var FB={set:X0,get:$g,has:Q0,enforce:p$,getterFor:g$},uR=_a,m$=ms,v$=Va,u0=vc,DC=mc,y$=QW.CONFIGURABLE,E$=n$,UB=FB,_$=UB.enforce,T$=UB.get,rF=String,T0=Object.defineProperty,S$=uR("".slice),w$=uR("".replace),A$=uR([].join),I$=DC&&!m$(function(){return T0(function(){},"length",{value:8}).length!==8}),C$=String(String).split("String"),b$=PB.exports=function(o,i,l){S$(rF(i),0,7)==="Symbol("&&(i="["+w$(rF(i),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),l&&l.getter&&(i="get "+i),l&&l.setter&&(i="set "+i),(!u0(o,"name")||y$&&o.name!==i)&&(DC?T0(o,"name",{value:i,configurable:!0}):o.name=i),I$&&l&&u0(l,"arity")&&o.length!==l.arity&&T0(o,"length",{value:l.arity});try{l&&u0(l,"constructor")&&l.constructor?DC&&T0(o,"prototype",{writable:!1}):o.prototype&&(o.prototype=void 0)}catch(m){}var d=_$(o);return u0(d,"source")||(d.source=A$(C$,typeof i=="string"?i:"")),o};Function.prototype.toString=b$(function(){return v$(this)&&T$(this).source||E$(this)},"toString");var R$=PB.exports,x$=Va,N$=lm,M$=R$,D$=nR,BB=function(o,i,l,d){d||(d={});var m=d.enumerable,I=d.name!==void 0?d.name:i;if(x$(l)&&M$(l,I,d),d.global)m?o[i]=l:D$(i,l);else{try{d.unsafe?o[i]&&(m=!0):delete o[i]}catch(N){}m?o[i]=l:N$.f(o,i,{value:l,enumerable:!1,configurable:!d.nonConfigurable,writable:!d.nonWritable})}return o},jB={},P$=Math.ceil,O$=Math.floor,L$=Math.trunc||function(i){var l=+i;return(l>0?O$:P$)(l)},k$=L$,xE=function(o){var i=+o;return i!==i||i===0?0:k$(i)},F$=xE,U$=Math.max,B$=Math.min,j$=function(o,i){var l=F$(o);return l<0?U$(l+i,0):B$(l,i)},Z$=xE,q$=Math.min,ZB=function(o){var i=Z$(o);return i>0?q$(i,9007199254740991):0},G$=ZB,H$=function(o){return G$(o.length)},V$=RE,K$=j$,z$=H$,iF=function(o){return function(i,l,d){var m=V$(i),I=z$(m);if(I===0)return!o&&-1;var N=K$(d,I),p;if(o&&l!==l){for(;I>N;)if(p=m[N++],p!==p)return!0}else for(;I>N;N++)if((o||N in m)&&m[N]===l)return o||N||0;return!o&&-1}},Y$={includes:iF(!0),indexOf:iF(!1)},W$=_a,mI=vc,$$=RE,X$=Y$.indexOf,Q$=sR,oF=W$([].push),qB=function(o,i){var l=$$(o),d=0,m=[],I;for(I in l)!mI(Q$,I)&&mI(l,I)&&oF(m,I);for(;i.length>d;)mI(l,I=i[d++])&&(~X$(m,I)||oF(m,I));return m},lR=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],J$=qB,eX=lR,tX=eX.concat("length","prototype");jB.f=Object.getOwnPropertyNames||function(i){return J$(i,tX)};var GB={};GB.f=Object.getOwnPropertySymbols;var nX=eR,rX=_a,iX=jB,oX=GB,aX=gf,sX=rX([].concat),uX=nX("Reflect","ownKeys")||function(i){var l=iX.f(aX(i)),d=oX.f;return d?sX(l,d(i)):l},aF=vc,lX=uX,cX=Qb,fX=lm,dX=function(o,i,l){for(var d=lX(i),m=fX.f,I=cX.f,N=0;N<d.length;N++){var p=d[N];!aF(o,p)&&!(l&&aF(l,p))&&m(o,p,I(i,p))}},hX=ms,pX=Va,gX=/#|\.prototype\./,cm=function(o,i){var l=vX[mX(o)];return l===EX?!0:l===yX?!1:pX(i)?hX(i):!!i},mX=cm.normalize=function(o){return String(o).replace(gX,".").toLowerCase()},vX=cm.data={},yX=cm.NATIVE="N",EX=cm.POLYFILL="P",_X=cm,l0=Ha,TX=Qb.f,SX=oR,wX=BB,AX=nR,IX=dX,CX=_X,HB=function(o,i){var l=o.target,d=o.global,m=o.stat,I,N,p,w,U,x;if(d?N=l0:m?N=l0[l]||AX(l,{}):N=l0[l]&&l0[l].prototype,N)for(p in i){if(U=i[p],o.dontCallGetSet?(x=TX(N,p),w=x&&x.value):w=N[p],I=CX(d?p:l+(m?".":"#")+p,o.forced),!I&&w!==void 0){if(typeof U==typeof w)continue;IX(U,w)}(o.sham||w&&w.sham)&&SX(U,"sham",!0),wX(N,p,U,o)}},bX=wh,RX=CE,xX=pf,NX=xX("match"),MX=function(o){var i;return bX(o)&&((i=o[NX])!==void 0?!!i:RX(o)==="RegExp")},DX=pf,PX=DX("toStringTag"),VB={};VB[PX]="z";var OX=String(VB)==="[object z]",LX=OX,kX=Va,S0=CE,FX=pf,UX=FX("toStringTag"),BX=Object,jX=S0(function(){return arguments}())==="Arguments",ZX=function(o,i){try{return o[i]}catch(l){}},qX=LX?S0:function(o){var i,l,d;return o===void 0?"Undefined":o===null?"Null":typeof(l=ZX(i=BX(o),UX))=="string"?l:jX?S0(i):(d=S0(i))==="Object"&&kX(i.callee)?"Arguments":d},GX=qX,HX=String,NE=function(o){if(GX(o)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return HX(o)},VX=gf,KB=function(){var o=VX(this),i="";return o.hasIndices&&(i+="d"),o.global&&(i+="g"),o.ignoreCase&&(i+="i"),o.multiline&&(i+="m"),o.dotAll&&(i+="s"),o.unicode&&(i+="u"),o.unicodeSets&&(i+="v"),o.sticky&&(i+="y"),i},KX=bl,zX=vc,YX=TB,WX=KB,sF=RegExp.prototype,$X=function(o){var i=o.flags;return i===void 0&&!("flags"in sF)&&!zX(o,"flags")&&YX(sF,o)?KX(WX,o):i},cR=_a,XX=bB,QX=Math.floor,vI=cR("".charAt),JX=cR("".replace),yI=cR("".slice),eQ=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,tQ=/\$([$&'`]|\d{1,2})/g,zB=function(o,i,l,d,m,I){var N=l+o.length,p=d.length,w=tQ;return m!==void 0&&(m=XX(m),w=eQ),JX(I,w,function(U,x){var E;switch(vI(x,0)){case"$":return"$";case"&":return o;case"`":return yI(i,0,l);case"'":return yI(i,N);case"<":E=m[yI(x,1,-1)];break;default:var y=+x;if(y===0)return U;if(y>p){var P=QX(y/10);return P===0?U:P<=p?d[P-1]===void 0?vI(x,1):d[P-1]+vI(x,1):U}E=d[y-1]}return E===void 0?"":E})},nQ=HB,rQ=bl,fR=_a,uF=um,iQ=Va,oQ=bE,aQ=MX,cg=NE,sQ=tR,uQ=$X,lQ=zB,cQ=pf,fQ=cQ("replace"),dQ=TypeError,EI=fR("".indexOf);fR("".replace);var lF=fR("".slice),hQ=Math.max;nQ({target:"String",proto:!0},{replaceAll:function(i,l){var d=uF(this),m,I,N,p,w,U,x,E,y,P=0,g=0,T="";if(!oQ(i)){if(m=aQ(i),m&&(I=cg(uF(uQ(i))),!~EI(I,"g")))throw new dQ("`.replaceAll` does not allow non-global regexes");if(N=sQ(i,fQ),N)return rQ(N,i,d,l)}for(p=cg(d),w=cg(i),U=iQ(l),U||(l=cg(l)),x=w.length,E=hQ(1,x),P=EI(p,w);P!==-1;)y=U?cg(l(w,P,p)):lQ(w,p,P,[],void 0,l),T+=lF(p,g,P)+y,g=P+x,P=P+E>p.length?-1:EI(p,w,P+E);return g<p.length&&(T+=lF(p,g)),T}});var dR=ms,pQ=Ha,hR=pQ.RegExp,pR=dR(function(){var o=hR("a","y");return o.lastIndex=2,o.exec("abcd")!==null}),gQ=pR||dR(function(){return!hR("a","y").sticky}),mQ=pR||dR(function(){var o=hR("^r","gy");return o.lastIndex=2,o.exec("str")!==null}),vQ={BROKEN_CARET:mQ,MISSED_STICKY:gQ,UNSUPPORTED_Y:pR},YB={},yQ=qB,EQ=lR,_Q=Object.keys||function(i){return yQ(i,EQ)},TQ=mc,SQ=DB,wQ=lm,AQ=gf,IQ=RE,CQ=_Q;YB.f=TQ&&!SQ?Object.defineProperties:function(i,l){AQ(i);for(var d=IQ(l),m=CQ(l),I=m.length,N=0,p;I>N;)wQ.f(i,p=m[N++],d[p]);return i};var bQ=eR,RQ=bQ("document","documentElement"),xQ=gf,NQ=YB,cF=lR,MQ=sR,DQ=RQ,PQ=NB,OQ=LB,fF=">",dF="<",PC="prototype",OC="script",WB=OQ("IE_PROTO"),_I=function(){},$B=function(o){return dF+OC+fF+o+dF+"/"+OC+fF},hF=function(o){o.write($B("")),o.close();var i=o.parentWindow.Object;return o=null,i},LQ=function(){var o=PQ("iframe"),i="java"+OC+":",l;return o.style.display="none",DQ.appendChild(o),o.src=String(i),l=o.contentWindow.document,l.open(),l.write($B("document.F=Object")),l.close(),l.F},c0,w0=function(){try{c0=new ActiveXObject("htmlfile")}catch(i){}w0=typeof document<"u"?document.domain&&c0?hF(c0):LQ():hF(c0);for(var o=cF.length;o--;)delete w0[PC][cF[o]];return w0()};MQ[WB]=!0;var kQ=Object.create||function(i,l){var d;return i!==null?(_I[PC]=xQ(i),d=new _I,_I[PC]=null,d[WB]=i):d=w0(),l===void 0?d:NQ.f(d,l)},FQ=ms,UQ=Ha,BQ=UQ.RegExp,jQ=FQ(function(){var o=BQ(".","s");return!(o.dotAll&&o.test("\n")&&o.flags==="s")}),ZQ=ms,qQ=Ha,GQ=qQ.RegExp,HQ=ZQ(function(){var o=GQ("(?<a>b)","g");return o.exec("b").groups.a!=="b"||"b".replace(o,"$<a>c")!=="bc"}),eh=bl,ME=_a,VQ=NE,KQ=KB,zQ=vQ,YQ=iR,WQ=kQ,$Q=FB.get,XQ=jQ,QQ=HQ,JQ=YQ("native-string-replace",String.prototype.replace),J0=RegExp.prototype.exec,LC=J0,eJ=ME("".charAt),tJ=ME("".indexOf),nJ=ME("".replace),TI=ME("".slice),kC=function(){var o=/a/,i=/b*/g;return eh(J0,o,"a"),eh(J0,i,"a"),o.lastIndex!==0||i.lastIndex!==0}(),XB=zQ.BROKEN_CARET,FC=/()??/.exec("")[1]!==void 0,rJ=kC||FC||XB||XQ||QQ;rJ&&(LC=function(i){var l=this,d=$Q(l),m=VQ(i),I=d.raw,N,p,w,U,x,E,y;if(I)return I.lastIndex=l.lastIndex,N=eh(LC,I,m),l.lastIndex=I.lastIndex,N;var P=d.groups,g=XB&&l.sticky,T=eh(KQ,l),F=l.source,M=0,_=m;if(g&&(T=nJ(T,"y",""),tJ(T,"g")===-1&&(T+="g"),_=TI(m,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&eJ(m,l.lastIndex-1)!=="\n")&&(F="(?: "+F+")",_=" "+_,M++),p=new RegExp("^(?:"+F+")",T)),FC&&(p=new RegExp("^"+F+"$(?!\\s)",T)),kC&&(w=l.lastIndex),U=eh(J0,g?p:l,_),g?U?(U.input=TI(U.input,M),U[0]=TI(U[0],M),U.index=l.lastIndex,l.lastIndex+=U[0].length):l.lastIndex=0:kC&&U&&(l.lastIndex=l.global?U.index+U[0].length:w),FC&&U&&U.length>1&&eh(JQ,U[0],p,function(){for(x=1;x<arguments.length-2;x++)arguments[x]===void 0&&(U[x]=void 0)}),U&&P)for(U.groups=E=WQ(null),x=0;x<P.length;x++)y=P[x],E[y[0]]=U[y[1]];return U});var gR=LC,iJ=HB,pF=gR;iJ({target:"RegExp",proto:!0,forced:/./.exec!==pF},{exec:pF});var oJ=Jb,QB=Function.prototype,gF=QB.apply,mF=QB.call,aJ=typeof Reflect=="object"&&Reflect.apply||(oJ?mF.bind(gF):function(){return mF.apply(gF,arguments)}),vF=bl,yF=BB,sJ=gR,EF=ms,JB=pf,uJ=oR,lJ=JB("species"),SI=RegExp.prototype,cJ=function(o,i,l,d){var m=JB(o),I=!EF(function(){var U={};return U[m]=function(){return 7},""[o](U)!==7}),N=I&&!EF(function(){var U=!1,x=/a/;return o==="split"&&(x={},x.constructor={},x.constructor[lJ]=function(){return x},x.flags="",x[m]=/./[m]),x.exec=function(){return U=!0,null},x[m](""),!U});if(!I||!N||l){var p=/./[m],w=i(m,""[o],function(U,x,E,y,P){var g=x.exec;return g===sJ||g===SI.exec?I&&!P?{done:!0,value:vF(p,x,E,y)}:{done:!0,value:vF(U,E,x,y)}:{done:!1}});yF(String.prototype,o,w[0]),yF(SI,m,w[1])}d&&uJ(SI[m],"sham",!0)},mR=_a,fJ=xE,dJ=NE,hJ=um,pJ=mR("".charAt),_F=mR("".charCodeAt),gJ=mR("".slice),TF=function(o){return function(i,l){var d=dJ(hJ(i)),m=fJ(l),I=d.length,N,p;return m<0||m>=I?o?"":void 0:(N=_F(d,m),N<55296||N>56319||m+1===I||(p=_F(d,m+1))<56320||p>57343?o?pJ(d,m):N:o?gJ(d,m,m+2):(N-55296<<10)+(p-56320)+65536)}},mJ={codeAt:TF(!1),charAt:TF(!0)},vJ=mJ.charAt,yJ=function(o,i,l){return i+(l?vJ(o,i).length:1)},SF=bl,EJ=gf,_J=Va,TJ=CE,SJ=gR,wJ=TypeError,AJ=function(o,i){var l=o.exec;if(_J(l)){var d=SF(l,o,i);return d!==null&&EJ(d),d}if(TJ(o)==="RegExp")return SF(SJ,o,i);throw new wJ("RegExp#exec called on incompatible receiver")},IJ=aJ,wF=bl,DE=_a,CJ=cJ,bJ=ms,RJ=gf,xJ=Va,NJ=bE,MJ=xE,DJ=ZB,Ud=NE,PJ=um,OJ=yJ,LJ=tR,kJ=zB,FJ=AJ,UJ=pf,UC=UJ("replace"),BJ=Math.max,jJ=Math.min,ZJ=DE([].concat),wI=DE([].push),AF=DE("".indexOf),IF=DE("".slice),qJ=function(o){return o===void 0?o:String(o)},GJ=function(){return"a".replace(/./,"$0")==="$0"}(),CF=function(){return/./[UC]?/./[UC]("a","$0")==="":!1}(),HJ=!bJ(function(){var o=/./;return o.exec=function(){var i=[];return i.groups={a:"7"},i},"".replace(o,"$<a>")!=="7"});CJ("replace",function(o,i,l){var d=CF?"$":"$0";return[function(I,N){var p=PJ(this),w=NJ(I)?void 0:LJ(I,UC);return w?wF(w,I,p,N):wF(i,Ud(p),I,N)},function(m,I){var N=RJ(this),p=Ud(m);if(typeof I=="string"&&AF(I,d)===-1&&AF(I,"$<")===-1){var w=l(i,N,p,I);if(w.done)return w.value}var U=xJ(I);U||(I=Ud(I));var x=N.global,E;x&&(E=N.unicode,N.lastIndex=0);for(var y=[],P;P=FJ(N,p),!(P===null||(wI(y,P),!x));){var g=Ud(P[0]);g===""&&(N.lastIndex=OJ(p,DJ(N.lastIndex),E))}for(var T="",F=0,M=0;M<y.length;M++){P=y[M];for(var _=Ud(P[0]),A=BJ(jJ(MJ(P.index),p.length),0),b=[],Z,Y=1;Y<P.length;Y++)wI(b,qJ(P[Y]));var $=P.groups;if(U){var Q=ZJ([_],b,A,p);$!==void 0&&wI(Q,$),Z=Ud(IJ(I,void 0,Q))}else Z=kJ(_,p,A,b,$,I);A>=F&&(T+=IF(p,F,A)+Z,F=A+_.length)}return T+IF(p,F)}]},!HJ||!GJ||CF);var VJ=Ha,KJ=_a,zJ=function(o,i){return KJ(VJ[o].prototype[i])},YJ=zJ;YJ("String","replaceAll");function vR(){const o=mu(),i=hf(),[l]=cB();return In.useCallback(async(d,m)=>{var p;if(!l||!o)return;const I=(p=i==null?void 0:i.distributionUrl)!=null?p:"";let N=l.cameraURLTemplate;if(N=N.replace("{{baseURL}}",I),N=N.replace("{{folderName}}/",m.camera.folderName?m.camera.folderName+"/":""),N=N.replaceAll("{{assetName}}",m.camera.assetName||""),N!==d.currentSource&&i)return await d.load(m,N,{startTimeSeconds:o.getExpectedPositionInSeconds()-bi(m.camera.span.time,i.frameRate),eventOffset:bi(m.camera.span.time,i.frameRate),reelOffset:bi(m.camera.reelOffset,i.frameRate)})},[o,l,i])}function WJ(){const o=vR();return In.useCallback(async(i,l)=>await o(i,l).then(),[o])}function $J(){const o=mu(),i=Sh(),l=$b();In.useEffect(()=>{if(!o||!i||!l)return;const d=({command:m,reference:I,start:N})=>{o.pausePlayStream(m,I,N)};return i.on("pausePlayStream",d),()=>{i.off("pausePlayStream",d)}},[o,i,l])}function XJ(o){const i=mu(),l=hf(),d=Sh(),m=WJ(),I=vR();In.useEffect(()=>{if(!d||!l||!i||!o)return;let N,p=[void 0,-1];const w=()=>{const T=i.getExpectedPositionInSeconds()<=0?0:i.getExpectedPositionInSeconds();return AE(l,T)[0]},U=T=>{p[0]=I(o,T),p[1]=T.index},x=T=>{if(p[0]&&p[1]===T.index){p[0].then(()=>{}),p=[void 0,-1];return}try{m(o,T)}catch(F){console.error("failed to play stream",F)}},E=()=>{const T=w();T&&U(T)},y=()=>{const T=w();T&&x(T)},P=({index:T})=>{var M;const F=(M=O3(T,l))!=null?M:IC(T,l,i);F&&U(F)},g=({index:T})=>{var M;const F=(M=O3(T,l))!=null?M:IC(T,l,i);F&&(U(F),N=setTimeout(()=>{x(F)},1900))};return d.on("prepareCast",P),d.on("cast",g),i.on("prepareStart",E),i.on("start",y),i.isLive?(i.preparePlayback(),y()):i.isInPrepare?E():console.log("HRRR"),()=>{d.off("prepareCast",P),d.off("cast",g),i.off("prepareStart",E),i.off("start",y),clearTimeout(N)}},[d,l,i,o,m,I])}function QJ(o){const i=sm();In.useEffect(()=>{if(!o||!i)return;const l=()=>{o.currentCamera&&i.updatePlaying(o.currentCamera)};return o.on("playing",l),()=>{o.off("playing",l)}},[o,i])}function JJ(o){const i=sm(),l=mu(),d=hf(),m=vR();In.useEffect(()=>{if(!d||!l||!o||!i)return;const I=({remainingTime:N})=>{console.log("# prepareStream",N);const p=aB(d,l.getExpectedPositionInSeconds(),N,o.currentCamera);if(p)try{const w=m(o,p);i.once("ended",()=>{w.then(()=>{})})}catch(w){console.error("failed to load stream",w)}else i.once("ended",()=>{i.endEvent()})};return i.on("nearEnd",I),()=>{i.off("nearEnd",I)}},[d,l,o,m,i])}function eee(o,i,l){const d=Hz(),m=mu(),[I,N]=In.useState(null);return In.useEffect(()=>{const p=document.querySelector(o);if(p==null||!m||!l)return;const w=new sY({containerElement:p,playerOptions:{autoPlay:!1,widevineLicenseUrl:i,policyQuery:l,preferredTech:"dashjs",customLicenceRequestHeaders:{"Api-version":"v1",Session:d}},eventClock:m});return console.log("!! Player Instance"),N(w),()=>{w.destroy()}},[d,o,i,l,m]),I}function tee(o){const i=mu(),l=Sh(),d=hf(),m=sm(),[I,N]=In.useState(),[p,w]=In.useState();return In.useEffect(()=>{if(!d||!i||!o||!l||!m)return;const U=({index:E})=>{w(IC(E,d,i)),N(o.currentCamera)},x=()=>{const E=o.currentCamera;(E==null?void 0:E.camera.transition)==="mapAndClosing"&&(w(aB(d,i.getExpectedPositionInSeconds(),2,E)),N(E))};return l.on("cast",U),m.on("transition",x),()=>{l.off("cast",U),m.off("transition",x)}},[d,i,o,l,m]),[I,p]}function e8({x:o,y:i,mapScale:l}){const[d,m]=In.useState(0),[I,N]=In.useState(0),[p,w]=In.useState(0),[U,x]=In.useState(0),[E,y]=In.useState(0);return In.useEffect(()=>{const P=window.innerWidth,g=window.innerHeight,T=P/12,F=g/12;x(g/2-g*.05),y(P/g),m(o*T),N(i*F),w(T*l)},[o,i,l]),{scaledX:d,scaledY:I,size:p,baseY:U,aspectRatio:E}}const nee="_container_zht4e_1",ree="_fadeIn_zht4e_1",iee="_scrollWrapper_zht4e_15",oee="_scrollContainer_zht4e_29",AI={container:nee,fadeIn:ree,scrollWrapper:iee,scrollContainer:oee};function aee(){const o=Wb();return Rt.jsxs("div",{className:AI.container,children:[Rt.jsx("h1",{children:o==null?void 0:o.postScreen.title}),Rt.jsx("p",{className:"body-text",style:{opacity:.5},children:o==null?void 0:o.postScreen.body}),Rt.jsx("div",{className:AI.scrollWrapper,children:Rt.jsx("div",{className:AI.scrollContainer,children:o&&o.postScreen.offersCollection.items.map((i,l)=>Rt.jsx("img",{src:i.image.url},l))})})]})}const see="_transitionWrapper_jyngr_1",uee="_active_jyngr_17",lee="_transition_jyngr_1",cee="_fadeOut_jyngr_1",fee="_hidden_jyngr_57",dee="_visible_jyngr_67",hee="_videoTitle_jyngr_77",pee="_fadeIn_jyngr_1",fg={transitionWrapper:see,active:uee,transition:lee,fadeOut:cee,hidden:fee,visible:dee,videoTitle:hee,fadeIn:pee},gee="_placeContainer_ywyae_1",mee="_place_ywyae_1",vee="_background_ywyae_45",yee="_activePlace_ywyae_57",Eee="_fadeOut_ywyae_1",_ee="_normalPlace_ywyae_79",Tee="_selectedPlace_ywyae_99",See="_fadeIn_ywyae_1",wee="_pulseEffect_ywyae_1",Aee="_title_ywyae_153",Zc={placeContainer:gee,place:mee,background:vee,activePlace:yee,fadeOut:Eee,normalPlace:_ee,selectedPlace:Tee,fadeIn:See,pulseEffect:wee,title:Aee};var Ls=(o=>(o.ACTIVE_PLACE="ActivePlace",o.SELECTED_PLACE="SelectedPlace",o.NORMAL_PLACE="NormalPlace",o))(Ls||{});const Iee=({place:o,mapPlacesLength:i})=>{const l=e8({x:o.mapPosition.x,y:o.mapPosition.y,mapScale:o.mapScale}),d=In.useMemo(()=>{switch(o.placeType){case Ls.ACTIVE_PLACE:return Zc.activePlace;case Ls.SELECTED_PLACE:return Zc.selectedPlace;case Ls.NORMAL_PLACE:default:return Zc.normalPlace}},[o]);return Rt.jsx("div",{className:Zc.placeContainer,children:Rt.jsxs("div",{className:"".concat(Zc.place," ").concat(d),style:{width:l.size,height:l.size,left:"calc(50% + ".concat(i>1?l.scaledX:0,"px)"),top:"calc(50% + ".concat(i>1?l.scaledY:0,"px)"),transform:"translate(-50%, -50%)"},children:[Rt.jsx("div",{className:Zc.background}),(o.placeType===Ls.ACTIVE_PLACE||o.placeType===Ls.SELECTED_PLACE)&&Rt.jsx("div",{className:"subheader-light ".concat(Zc.title),children:o.title})]})})},Cee="_followContainer_1h8ds_1",bee="_follow_1h8ds_1",Ree="_selectedFollow_1h8ds_35",xee="_pulseEffect_1h8ds_1",Nee="_notSelectedFollow_1h8ds_79",Mee="_iconContainer_1h8ds_97",Dee="_labelContainer_1h8ds_131",Bd={followContainer:Cee,follow:bee,selectedFollow:Ree,pulseEffect:xee,notSelectedFollow:Nee,iconContainer:Mee,labelContainer:Dee},Pee="_label_svzic_1",Oee={label:Pee},Lee=({content:o,classNames:i=""})=>Rt.jsx("div",{className:"".concat(Oee.label," ").concat(i," label"),children:o}),kee=({style:o})=>Rt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 32 32",fill:"none",style:o,children:Rt.jsx("path",{d:"M24 19L16 11L8 19",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),t8=({classNames:o,styles:i,color:l,stroke:d})=>Rt.jsxs("svg",{className:o,style:i,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[Rt.jsx("path",{d:"M96 176C140.183 176 176 140.183 176 96C176 51.8172 140.183 16 96 16C51.8172 16 16 51.8172 16 96C16 140.183 51.8172 176 96 176Z",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M96 64V108",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("circle",{cx:"96",cy:"128",r:"8",fill:l||"white"})]}),Fee=({classNames:o,styles:i,color:l,stroke:d})=>Rt.jsxs("svg",{className:o,style:i,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[Rt.jsx("path",{d:"M11.1475 18.5801L152.567 160",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("circle",{cx:"96",cy:"160",r:"4",fill:"white"}),Rt.jsx("path",{d:"M180.853 75.1472C169.71 64.0041 156.481 55.165 141.922 49.1344C127.363 43.1039 111.758 40 95.9998 40C83.9607 40 72.0117 41.8116 60.55 45.3557M11.147 75.1472C20.7929 65.5013 32.0017 57.5818 44.2834 51.716",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),Rt.jsx("path",{d:"M152.569 103.431C145.14 96.0028 136.321 90.11 126.615 86.0896C116.909 82.0693 106.506 80 96.0002 80C95.7328 80 95.4656 80.0013 95.1984 80.004M39.4316 103.431C46.8603 96.0028 55.6795 90.11 65.3855 86.0896C68.6182 84.7506 71.9282 83.628 75.2936 82.7262",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),Rt.jsx("path",{d:"M124.294 131.725C120.58 128.011 116.17 125.065 111.317 123.055C106.464 121.044 101.263 120.01 96.0099 120.01C90.757 120.01 85.5555 121.044 80.7025 123.055C75.8495 125.065 71.4399 128.011 67.7256 131.726",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"})]}),Uee=()=>Rt.jsxs("svg",{width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Rt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M149.333 96L120 125.333L106.667 112",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),Bee=()=>Rt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",children:[Rt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M144 96L112 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M112 96L144 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),jee=()=>Rt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[Rt.jsx("path",{d:"M2 12V44L16 36L32 44L46 36V4L32 12L16 4L2 12Z",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M16 4V36",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M32 12V44",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),Zee=()=>Rt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Rt.jsxs("g",{children:[Rt.jsx("path",{d:"M192,64H32C14.328,64,0,78.328,0,96v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S209.672,64,192,64z"}),Rt.jsx("path",{d:"M480,64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32V96\r\n		C512,78.328,497.672,64,480,64z"}),Rt.jsx("path",{d:"M480,288c-17.672,0-32,14.328-32,32v64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32v-96\r\n		C512,302.328,497.672,288,480,288z"}),Rt.jsx("path",{d:"M192,384H64v-64c0-17.672-14.328-32-32-32S0,302.328,0,320v96c0,17.672,14.328,32,32,32h160c17.672,0,32-14.328,32-32\r\n		S209.672,384,192,384z"})]})}),qee=()=>Rt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Rt.jsxs("g",{children:[Rt.jsx("path",{d:"M192,64c-17.672,0-32,14.328-32,32v64H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32V96\r\n		C224,78.328,209.672,64,192,64z"}),Rt.jsx("path",{d:"M320,224h160c17.672,0,32-14.328,32-32s-14.328-32-32-32H352V96c0-17.672-14.328-32-32-32s-32,14.328-32,32v96\r\n		C288,209.672,302.328,224,320,224z"}),Rt.jsx("path",{d:"M480,288H320c-17.672,0-32,14.328-32,32v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S497.672,288,480,288z"}),Rt.jsx("path",{d:"M192,288H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32v-96\r\n		C224,302.328,209.672,288,192,288z"})]})}),Gee=({follow:o})=>{var m,I,N,p;const i=e8({x:(I=(m=o.mapPosition)==null?void 0:m.x)!=null?I:0,y:(p=(N=o.mapPosition)==null?void 0:N.y)!=null?p:0,mapScale:.6}),[l,d]=In.useState(0);return In.useEffect(()=>{function w(U,x,E){return-Math.atan2((U.x-x.x)*E,U.y-x.y)*(180/Math.PI)}o.mapPosition&&d(w(o.mapPositions[0],o.mapPositions[o.mapPositions.length-1],i.aspectRatio))},[o.mapPosition,o.mapPositions,i]),Rt.jsxs("div",{className:Bd.followContainer,style:{width:i.size,height:i.size,left:"calc(50% + ".concat(i.scaledX,"px)"),top:"calc(50% - ".concat(i.scaledY,"px)")},children:[Rt.jsx("div",{className:"".concat(Bd.follow," ").concat(o.isSelectedFollow?Bd.selectedFollow:Bd.notSelectedFollow," ").concat(Bd.iconContainer),children:Rt.jsx(kee,{style:{transform:"rotate(".concat(l,"deg)")}})}),o.isSelectedFollow&&Rt.jsx(Lee,{classNames:Bd.labelContainer,content:o.title})]})},Hee=({fromCamera:o,toCamera:i})=>{const l=hf(),d=mu(),m=4200,I=m+3950,N=1900,[p,w]=In.useState([]),[U,x]=In.useState([]),[E,y]=In.useState(!1),[P,g]=In.useState(!1),[T,F]=In.useState(""),M=In.useRef([]),_=In.useMemo(()=>{function se(C,X){const ce=C.jumpSpots.map(qe=>qe.camera.span),me=ce.map(qe=>qe.time).map(qe=>bi(qe,X.frameRate)),be=Math.min(...me),Je=ce.map(qe=>bi(qe.time,X.frameRate)+bi(qe.duration,X.frameRate)),we=Math.max(...Je);return{start:be,end:we}}return l==null?void 0:l.places.filter(C=>C.jumpSpots.length>0).map((C,X)=>({...C,span:se(C,l),placeType:Ls.NORMAL_PLACE,placeIndex:X}))},[l]),A=In.useMemo(()=>(l==null?void 0:l.follows.map(se=>({...se,isSelectedFollow:!1})))||[],[l]),b=In.useCallback((se,C)=>{const X=bi(se.camera.span.time,C.frameRate)+2;return(_==null?void 0:_.filter(ce=>ce.span.start<=X&&X<=ce.span.end))||[]},[_]),Z=In.useCallback(se=>{const C=se.mapPositions[0]||{x:0,y:0};if(l&&d){const X=d.getExpectedPositionInSeconds()-bi(se.camera.span.time,l.frameRate),ce=bi(se.camera.span.duration,l.frameRate);let oe=Math.floor(X*4/ce);return X===ce&&(oe-=1),se.mapPositions[oe]||C}return C},[d,l]),Y=In.useCallback((se,C)=>{const X=bi(se.camera.span.time,C.frameRate)+2;return A.filter(ce=>bi(ce.camera.span.time,C.frameRate)<=X&&X<=bi(ce.camera.span.time,C.frameRate)+bi(ce.camera.span.duration,C.frameRate)).map(ce=>({...ce,mapPosition:Z(ce)}))},[A,Z]),$=In.useCallback(se=>_==null?void 0:_.find(C=>C.jumpSpots.some(X=>X.camera.assetName===se.camera.assetName)),[_]),Q=(se,C)=>C.jumpSpots.some(X=>X.camera.assetName===se.camera.assetName);return In.useEffect(()=>{if(!_||!o||!i||!l||o.camera.assetName===i.camera.assetName)return;const se=M.current;let C=[],X=[],ce=[],oe=[];if(F(i.placeTitle?i.placeTitle:i.title),o.type===Hc.JUMPSPOT&&i.type===Hc.JUMPSPOT&&o.placeIndex===i.placeIndex)g(!1),y(!0);else{switch(g(!0),o.type){case Hc.JUMPSPOT:X=Y(i,l),C=b(o,l).map(qe=>Q(o,qe)?{...qe,placeType:Ls.ACTIVE_PLACE}:qe);break;case Hc.FOLLOW:C=b(o,l),X=Y(o,l).map(qe=>({...qe,isSelectedFollow:o.camera.assetName===qe.camera.assetName}));break}switch(w(C),x(X),i.type){case Hc.JUMPSPOT:oe=Y(o,l);const qe=C.find(ft=>Q(i,ft));if(qe)ce=C.map(ft=>({...ft,placeType:ft.placeIndex===qe.placeIndex?Ls.SELECTED_PLACE:Ls.NORMAL_PLACE}));else{const ft=$(i);ft&&(ft.placeType=Ls.SELECTED_PLACE,ce=[...C.map(Ce=>({...Ce,placeType:Ls.NORMAL_PLACE})),ft])}break;case Hc.FOLLOW:ce=b(o,l),oe=Y(o,l);const st=X.find(ft=>ft.camera.assetName===i.camera.assetName);if(st)oe=X.map(ft=>({...ft,isSelectedFollow:ft.camera.assetName===st.camera.assetName}));else{const ft=A.find(Ce=>Ce.camera.assetName===i.camera.assetName);if(ft){const Ce={...ft,isSelectedFollow:!0,mapPosition:Z(ft)};oe=[...X.map(He=>({...He,isSelectedFollow:!1})),Ce]}}break}}const me=setTimeout(()=>{x(oe)},N);se.push(me);const be=setTimeout(()=>{w(ce)},N);se.push(be);const Je=setTimeout(()=>{g(!1),y(!0)},m);se.push(Je);const we=setTimeout(()=>{y(!1)},I);return se.push(we),()=>{se.forEach(qe=>{clearTimeout(qe)}),M.current=[]}},[o,i,_,A,Y,$,l,b,Z,I]),Rt.jsxs("div",{className:"".concat(fg.transitionWrapper," ").concat(P?fg.active:""),children:[P&&Rt.jsxs("div",{className:"".concat(fg.transition," ").concat(fg.visible),children:[p.map((se,C)=>Rt.jsx(Iee,{place:se,mapPlacesLength:p.length},"place-".concat(C.toString()))),U.filter(se=>se.camera.assetName===(o==null?void 0:o.camera.assetName)||se.camera.assetName===(i==null?void 0:i.camera.assetName)).map((se,C)=>Rt.jsx(Gee,{follow:se},"follow-".concat(C.toString())))]}),E&&Rt.jsx("h1",{className:fg.videoTitle,style:{textShadow:"2px 2px 4px black"},children:T})]})},Vee="_playerPage_s22qw_1",Kee="_playerContainer_s22qw_13",zee="_fadeIn_s22qw_1",bF={playerPage:Vee,playerContainer:Kee,fadeIn:zee},Yee="_attention_1xh5o_1",Wee="_ripple1_1xh5o_1",$ee="_ripple2_1xh5o_1",Xee="_thirdRipple_1xh5o_81",Qee="_ripple3_1xh5o_1",Jee="_iconWrapper_1xh5o_105",II={attention:Yee,ripple1:Wee,ripple2:$ee,thirdRipple:Xee,ripple3:Qee,iconWrapper:Jee},ete=()=>{const o=sm(),[i,l]=In.useState(!1),d=5e3;if(In.useEffect(()=>{if(!o)return;let m;const I=()=>{l(!0),m=setTimeout(()=>{l(!1)},d)};return o.on("attention",I),()=>{o.off("attention",I),clearTimeout(m)}},[o]),!!i)return Rt.jsxs("div",{className:II.attention,children:[Rt.jsx("span",{className:II.iconWrapper,children:Rt.jsx(jee,{})}),Rt.jsx("span",{className:II.thirdRipple})]})};var tte=Object.defineProperty,eE=Object.getOwnPropertySymbols,n8=Object.prototype.hasOwnProperty,r8=Object.prototype.propertyIsEnumerable,RF=(o,i,l)=>i in o?tte(o,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[i]=l,Xg=(o,i)=>{for(var l in i||(i={}))n8.call(i,l)&&RF(o,l,i[l]);if(eE)for(var l of eE(i))r8.call(i,l)&&RF(o,l,i[l]);return o},yR=(o,i)=>{var l={};for(var d in o)n8.call(o,d)&&i.indexOf(d)<0&&(l[d]=o[d]);if(o!=null&&eE)for(var d of eE(o))i.indexOf(d)<0&&r8.call(o,d)&&(l[d]=o[d]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var sf;(o=>{const i=class{constructor(w,U,x,E){if(this.version=w,this.errorCorrectionLevel=U,this.modules=[],this.isFunction=[],w<i.MIN_VERSION||w>i.MAX_VERSION)throw new RangeError("Version value out of range");if(E<-1||E>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let y=[];for(let g=0;g<this.size;g++)y.push(!1);for(let g=0;g<this.size;g++)this.modules.push(y.slice()),this.isFunction.push(y.slice());this.drawFunctionPatterns();const P=this.addEccAndInterleave(x);if(this.drawCodewords(P),E==-1){let g=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const F=this.getPenaltyScore();F<g&&(E=T,g=F),this.applyMask(T)}}I(0<=E&&E<=7),this.mask=E,this.applyMask(E),this.drawFormatBits(E),this.isFunction=[]}static encodeText(w,U){const x=o.QrSegment.makeSegments(w);return i.encodeSegments(x,U)}static encodeBinary(w,U){const x=o.QrSegment.makeBytes(w);return i.encodeSegments([x],U)}static encodeSegments(w,U,x=1,E=40,y=-1,P=!0){if(!(i.MIN_VERSION<=x&&x<=E&&E<=i.MAX_VERSION)||y<-1||y>7)throw new RangeError("Invalid value");let g,T;for(g=x;;g++){const A=i.getNumDataCodewords(g,U)*8,b=p.getTotalBits(w,g);if(b<=A){T=b;break}if(g>=E)throw new RangeError("Data too long")}for(const A of[i.Ecc.MEDIUM,i.Ecc.QUARTILE,i.Ecc.HIGH])P&&T<=i.getNumDataCodewords(g,A)*8&&(U=A);let F=[];for(const A of w){d(A.mode.modeBits,4,F),d(A.numChars,A.mode.numCharCountBits(g),F);for(const b of A.getData())F.push(b)}I(F.length==T);const M=i.getNumDataCodewords(g,U)*8;I(F.length<=M),d(0,Math.min(4,M-F.length),F),d(0,(8-F.length%8)%8,F),I(F.length%8==0);for(let A=236;F.length<M;A^=253)d(A,8,F);let _=[];for(;_.length*8<F.length;)_.push(0);return F.forEach((A,b)=>_[b>>>3]|=A<<7-(b&7)),new i(g,U,_,y)}getModule(w,U){return 0<=w&&w<this.size&&0<=U&&U<this.size&&this.modules[U][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let x=0;x<this.size;x++)this.setFunctionModule(6,x,x%2==0),this.setFunctionModule(x,6,x%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),U=w.length;for(let x=0;x<U;x++)for(let E=0;E<U;E++)x==0&&E==0||x==0&&E==U-1||x==U-1&&E==0||this.drawAlignmentPattern(w[x],w[E]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const U=this.errorCorrectionLevel.formatBits<<3|w;let x=U;for(let y=0;y<10;y++)x=x<<1^(x>>>9)*1335;const E=(U<<10|x)^21522;I(E>>>15==0);for(let y=0;y<=5;y++)this.setFunctionModule(8,y,m(E,y));this.setFunctionModule(8,7,m(E,6)),this.setFunctionModule(8,8,m(E,7)),this.setFunctionModule(7,8,m(E,8));for(let y=9;y<15;y++)this.setFunctionModule(14-y,8,m(E,y));for(let y=0;y<8;y++)this.setFunctionModule(this.size-1-y,8,m(E,y));for(let y=8;y<15;y++)this.setFunctionModule(8,this.size-15+y,m(E,y));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let x=0;x<12;x++)w=w<<1^(w>>>11)*7973;const U=this.version<<12|w;I(U>>>18==0);for(let x=0;x<18;x++){const E=m(U,x),y=this.size-11+x%3,P=Math.floor(x/3);this.setFunctionModule(y,P,E),this.setFunctionModule(P,y,E)}}drawFinderPattern(w,U){for(let x=-4;x<=4;x++)for(let E=-4;E<=4;E++){const y=Math.max(Math.abs(E),Math.abs(x)),P=w+E,g=U+x;0<=P&&P<this.size&&0<=g&&g<this.size&&this.setFunctionModule(P,g,y!=2&&y!=4)}}drawAlignmentPattern(w,U){for(let x=-2;x<=2;x++)for(let E=-2;E<=2;E++)this.setFunctionModule(w+E,U+x,Math.max(Math.abs(E),Math.abs(x))!=1)}setFunctionModule(w,U,x){this.modules[U][w]=x,this.isFunction[U][w]=!0}addEccAndInterleave(w){const U=this.version,x=this.errorCorrectionLevel;if(w.length!=i.getNumDataCodewords(U,x))throw new RangeError("Invalid argument");const E=i.NUM_ERROR_CORRECTION_BLOCKS[x.ordinal][U],y=i.ECC_CODEWORDS_PER_BLOCK[x.ordinal][U],P=Math.floor(i.getNumRawDataModules(U)/8),g=E-P%E,T=Math.floor(P/E);let F=[];const M=i.reedSolomonComputeDivisor(y);for(let A=0,b=0;A<E;A++){let Z=w.slice(b,b+T-y+(A<g?0:1));b+=Z.length;const Y=i.reedSolomonComputeRemainder(Z,M);A<g&&Z.push(0),F.push(Z.concat(Y))}let _=[];for(let A=0;A<F[0].length;A++)F.forEach((b,Z)=>{(A!=T-y||Z>=g)&&_.push(b[A])});return I(_.length==P),_}drawCodewords(w){if(w.length!=Math.floor(i.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let U=0;for(let x=this.size-1;x>=1;x-=2){x==6&&(x=5);for(let E=0;E<this.size;E++)for(let y=0;y<2;y++){const P=x-y,T=(x+1&2)==0?this.size-1-E:E;!this.isFunction[T][P]&&U<w.length*8&&(this.modules[T][P]=m(w[U>>>3],7-(U&7)),U++)}}I(U==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let U=0;U<this.size;U++)for(let x=0;x<this.size;x++){let E;switch(w){case 0:E=(x+U)%2==0;break;case 1:E=U%2==0;break;case 2:E=x%3==0;break;case 3:E=(x+U)%3==0;break;case 4:E=(Math.floor(x/3)+Math.floor(U/2))%2==0;break;case 5:E=x*U%2+x*U%3==0;break;case 6:E=(x*U%2+x*U%3)%2==0;break;case 7:E=((x+U)%2+x*U%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[U][x]&&E&&(this.modules[U][x]=!this.modules[U][x])}}getPenaltyScore(){let w=0;for(let y=0;y<this.size;y++){let P=!1,g=0,T=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[y][F]==P?(g++,g==5?w+=i.PENALTY_N1:g>5&&w++):(this.finderPenaltyAddHistory(g,T),P||(w+=this.finderPenaltyCountPatterns(T)*i.PENALTY_N3),P=this.modules[y][F],g=1);w+=this.finderPenaltyTerminateAndCount(P,g,T)*i.PENALTY_N3}for(let y=0;y<this.size;y++){let P=!1,g=0,T=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[F][y]==P?(g++,g==5?w+=i.PENALTY_N1:g>5&&w++):(this.finderPenaltyAddHistory(g,T),P||(w+=this.finderPenaltyCountPatterns(T)*i.PENALTY_N3),P=this.modules[F][y],g=1);w+=this.finderPenaltyTerminateAndCount(P,g,T)*i.PENALTY_N3}for(let y=0;y<this.size-1;y++)for(let P=0;P<this.size-1;P++){const g=this.modules[y][P];g==this.modules[y][P+1]&&g==this.modules[y+1][P]&&g==this.modules[y+1][P+1]&&(w+=i.PENALTY_N2)}let U=0;for(const y of this.modules)U=y.reduce((P,g)=>P+(g?1:0),U);const x=this.size*this.size,E=Math.ceil(Math.abs(U*20-x*10)/x)-1;return I(0<=E&&E<=9),w+=E*i.PENALTY_N4,I(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,U=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let x=[6];for(let E=this.size-7;x.length<w;E-=U)x.splice(1,0,E);return x}}static getNumRawDataModules(w){if(w<i.MIN_VERSION||w>i.MAX_VERSION)throw new RangeError("Version number out of range");let U=(16*w+128)*w+64;if(w>=2){const x=Math.floor(w/7)+2;U-=(25*x-10)*x-55,w>=7&&(U-=36)}return I(208<=U&&U<=29648),U}static getNumDataCodewords(w,U){return Math.floor(i.getNumRawDataModules(w)/8)-i.ECC_CODEWORDS_PER_BLOCK[U.ordinal][w]*i.NUM_ERROR_CORRECTION_BLOCKS[U.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let U=[];for(let E=0;E<w-1;E++)U.push(0);U.push(1);let x=1;for(let E=0;E<w;E++){for(let y=0;y<U.length;y++)U[y]=i.reedSolomonMultiply(U[y],x),y+1<U.length&&(U[y]^=U[y+1]);x=i.reedSolomonMultiply(x,2)}return U}static reedSolomonComputeRemainder(w,U){let x=U.map(E=>0);for(const E of w){const y=E^x.shift();x.push(0),U.forEach((P,g)=>x[g]^=i.reedSolomonMultiply(P,y))}return x}static reedSolomonMultiply(w,U){if(w>>>8||U>>>8)throw new RangeError("Byte out of range");let x=0;for(let E=7;E>=0;E--)x=x<<1^(x>>>7)*285,x^=(U>>>E&1)*w;return I(x>>>8==0),x}finderPenaltyCountPatterns(w){const U=w[1];I(U<=this.size*3);const x=U>0&&w[2]==U&&w[3]==U*3&&w[4]==U&&w[5]==U;return(x&&w[0]>=U*4&&w[6]>=U?1:0)+(x&&w[6]>=U*4&&w[0]>=U?1:0)}finderPenaltyTerminateAndCount(w,U,x){return w&&(this.finderPenaltyAddHistory(U,x),U=0),U+=this.size,this.finderPenaltyAddHistory(U,x),this.finderPenaltyCountPatterns(x)}finderPenaltyAddHistory(w,U){U[0]==0&&(w+=this.size),U.pop(),U.unshift(w)}};let l=i;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],o.QrCode=l;function d(w,U,x){if(U<0||U>31||w>>>U)throw new RangeError("Value out of range");for(let E=U-1;E>=0;E--)x.push(w>>>E&1)}function m(w,U){return(w>>>U&1)!=0}function I(w){if(!w)throw new Error("Assertion error")}const N=class{constructor(w,U,x){if(this.mode=w,this.numChars=U,this.bitData=x,U<0)throw new RangeError("Invalid argument");this.bitData=x.slice()}static makeBytes(w){let U=[];for(const x of w)d(x,8,U);return new N(N.Mode.BYTE,w.length,U)}static makeNumeric(w){if(!N.isNumeric(w))throw new RangeError("String contains non-numeric characters");let U=[];for(let x=0;x<w.length;){const E=Math.min(w.length-x,3);d(parseInt(w.substr(x,E),10),E*3+1,U),x+=E}return new N(N.Mode.NUMERIC,w.length,U)}static makeAlphanumeric(w){if(!N.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let U=[],x;for(x=0;x+2<=w.length;x+=2){let E=N.ALPHANUMERIC_CHARSET.indexOf(w.charAt(x))*45;E+=N.ALPHANUMERIC_CHARSET.indexOf(w.charAt(x+1)),d(E,11,U)}return x<w.length&&d(N.ALPHANUMERIC_CHARSET.indexOf(w.charAt(x)),6,U),new N(N.Mode.ALPHANUMERIC,w.length,U)}static makeSegments(w){return w==""?[]:N.isNumeric(w)?[N.makeNumeric(w)]:N.isAlphanumeric(w)?[N.makeAlphanumeric(w)]:[N.makeBytes(N.toUtf8ByteArray(w))]}static makeEci(w){let U=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)d(w,8,U);else if(w<16384)d(2,2,U),d(w,14,U);else if(w<1e6)d(6,3,U),d(w,21,U);else throw new RangeError("ECI assignment value out of range");return new N(N.Mode.ECI,0,U)}static isNumeric(w){return N.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return N.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,U){let x=0;for(const E of w){const y=E.mode.numCharCountBits(U);if(E.numChars>=1<<y)return 1/0;x+=4+y+E.bitData.length}return x}static toUtf8ByteArray(w){w=encodeURI(w);let U=[];for(let x=0;x<w.length;x++)w.charAt(x)!="%"?U.push(w.charCodeAt(x)):(U.push(parseInt(w.substr(x+1,2),16)),x+=2);return U}};let p=N;p.NUMERIC_REGEX=/^[0-9]*$/,p.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,p.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",o.QrSegment=p})(sf||(sf={}));(o=>{(i=>{const l=class{constructor(m,I){this.ordinal=m,this.formatBits=I}};let d=l;d.LOW=new l(0,1),d.MEDIUM=new l(1,0),d.QUARTILE=new l(2,3),d.HIGH=new l(3,2),i.Ecc=d})(o.QrCode||(o.QrCode={}))})(sf||(sf={}));(o=>{(i=>{const l=class{constructor(m,I){this.modeBits=m,this.numBitsCharCount=I}numCharCountBits(m){return this.numBitsCharCount[Math.floor((m+7)/17)]}};let d=l;d.NUMERIC=new l(1,[10,12,14]),d.ALPHANUMERIC=new l(2,[9,11,13]),d.BYTE=new l(4,[8,16,16]),d.KANJI=new l(8,[8,10,12]),d.ECI=new l(7,[0,0,0]),i.Mode=d})(o.QrSegment||(o.QrSegment={}))})(sf||(sf={}));var th=sf;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var i8={L:th.QrCode.Ecc.LOW,M:th.QrCode.Ecc.MEDIUM,Q:th.QrCode.Ecc.QUARTILE,H:th.QrCode.Ecc.HIGH},o8=128,a8="L",s8="#FFFFFF",u8="#000000",l8=!1,ER=4,nte=.1;function c8(o,i=0){const l=[];return o.forEach(function(d,m){let I=null;d.forEach(function(N,p){if(!N&&I!==null){l.push("M".concat(I+i," ").concat(m+i,"h").concat(p-I,"v1H").concat(I+i,"z")),I=null;return}if(p===d.length-1){if(!N)return;I===null?l.push("M".concat(p+i,",").concat(m+i," h1v1H").concat(p+i,"z")):l.push("M".concat(I+i,",").concat(m+i," h").concat(p+1-I,"v1H").concat(I+i,"z"));return}N&&I===null&&(I=p)})}),l.join("")}function f8(o,i){return o.slice().map((l,d)=>d<i.y||d>=i.y+i.h?l:l.map((m,I)=>I<i.x||I>=i.x+i.w?m:!1))}function d8(o,i,l,d){if(d==null)return null;const m=l?ER:0,I=o.length+m*2,N=Math.floor(i*nte),p=I/i,w=(d.width||N)*p,U=(d.height||N)*p,x=d.x==null?o.length/2-w/2:d.x*p,E=d.y==null?o.length/2-U/2:d.y*p;let y=null;if(d.excavate){let P=Math.floor(x),g=Math.floor(E),T=Math.ceil(w+x-P),F=Math.ceil(U+E-g);y={x:P,y:g,w:T,h:F}}return{x,y:E,h:U,w,excavation:y}}var rte=function(){try{new Path2D().addPath(new Path2D)}catch(o){return!1}return!0}();function ite(o){const i=o,{value:l,size:d=o8,level:m=a8,bgColor:I=s8,fgColor:N=u8,includeMargin:p=l8,style:w,imageSettings:U}=i,x=yR(i,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),E=U==null?void 0:U.src,y=In.useRef(null),P=In.useRef(null),[g,T]=In.useState(!1);In.useEffect(()=>{if(y.current!=null){const _=y.current,A=_.getContext("2d");if(!A)return;let b=th.QrCode.encodeText(l,i8[m]).getModules();const Z=p?ER:0,Y=b.length+Z*2,$=d8(b,d,p,U),Q=P.current,se=$!=null&&Q!==null&&Q.complete&&Q.naturalHeight!==0&&Q.naturalWidth!==0;se&&$.excavation!=null&&(b=f8(b,$.excavation));const C=window.devicePixelRatio||1;_.height=_.width=d*C;const X=d/Y*C;A.scale(X,X),A.fillStyle=I,A.fillRect(0,0,Y,Y),A.fillStyle=N,rte?A.fill(new Path2D(c8(b,Z))):b.forEach(function(ce,oe){ce.forEach(function(me,be){me&&A.fillRect(be+Z,oe+Z,1,1)})}),se&&A.drawImage(Q,$.x+Z,$.y+Z,$.w,$.h)}}),In.useEffect(()=>{T(!1)},[E]);const F=Xg({height:d,width:d},w);let M=null;return E!=null&&(M=du.createElement("img",{src:E,key:E,style:{display:"none"},onLoad:()=>{T(!0)},ref:P})),du.createElement(du.Fragment,null,du.createElement("canvas",Xg({style:F,height:d,width:d,ref:y},x)),M)}function ote(o){const i=o,{value:l,size:d=o8,level:m=a8,bgColor:I=s8,fgColor:N=u8,includeMargin:p=l8,imageSettings:w}=i,U=yR(i,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let x=th.QrCode.encodeText(l,i8[m]).getModules();const E=p?ER:0,y=x.length+E*2,P=d8(x,d,p,w);let g=null;w!=null&&P!=null&&(P.excavation!=null&&(x=f8(x,P.excavation)),g=du.createElement("image",{xlinkHref:w.src,height:P.h,width:P.w,x:P.x+E,y:P.y+E,preserveAspectRatio:"none"}));const T=c8(x,E);return du.createElement("svg",Xg({height:d,width:d,viewBox:"0 0 ".concat(y," ").concat(y)},U),du.createElement("path",{fill:I,d:"M0,0 h".concat(y,"v").concat(y,"H0z"),shapeRendering:"crispEdges"}),du.createElement("path",{fill:N,d:T,shapeRendering:"crispEdges"}),g)}var _R=o=>{const i=o,{renderAs:l}=i,d=yR(i,["renderAs"]);return l==="svg"?du.createElement(ote,Xg({},d)):du.createElement(ite,Xg({},d))};const ate="_container_1l3tn_1",ste="_qrCode_1l3tn_25",ute="_text_1l3tn_35",CI={container:ate,qrCode:ste,text:ute},lte=({url:o})=>Rt.jsxs("div",{className:CI.container,children:[Rt.jsx("p",{className:"body-text ".concat(CI.text),style:{opacity:.75},children:"Scan the QR code with the app."}),Rt.jsx(_R,{className:CI.qrCode,bgColor:"white",fgColor:"black",value:o,size:500})]}),cte="_controlsWrapper_1v4q3_1",fte="_hidden_1v4q3_21",dte="_iconWrapper_1v4q3_29",bI={controlsWrapper:cte,hidden:fte,iconWrapper:dte},hte=({visible:o,eventPlayer:i})=>{const[l,d]=In.useState(!1),m=()=>{i&&(l?i.exitFullscreen().then(()=>{d(!1)}):i.requestFullscreen().then(()=>{d(!0)}))};return Rt.jsx("div",{className:"".concat(bI.controlsWrapper," ").concat(o?"":bI.hidden),children:Rt.jsx("div",{className:bI.iconWrapper,onClick:m,children:l?Rt.jsx(qee,{}):Rt.jsx(Zee,{})})})},pte="_warningContainer_1tqkb_1",gte={warningContainer:pte},h8=()=>Rt.jsxs("div",{className:gte.warningContainer,children:[Rt.jsx(t8,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),Rt.jsx("p",{className:"label",children:"Finish setup on your mobile or tablet. "})]}),mte="_messageContainer_1jzyd_3",vte="_message_1jzyd_3",xF={messageContainer:mte,message:vte},yte=({message:o})=>Rt.jsx("div",{className:xF.messageContainer,children:Rt.jsx("div",{className:"".concat(xF.message," subheader-light"),children:o})});function Ete(){const[o,i,l]=cB(),d=$b(),m=eee("#playerContainer",i,l),[I,N]=In.useState(!1),[p,w]=In.useState(),U=Xb(),x=In.useRef(),E=In.useMemo(()=>{const F=window.navigator.userAgent;return new RegExp("_TV_[A-Z0-9]+_([0-9]{4});").test(F)},[]);In.useEffect(()=>{const F=U==null?void 0:U.find(M=>M.deviceId===mh);w(F)},[U]);const y=!!(U!=null&&U.filter(F=>F.deviceId!==mh));XJ(m),QJ(m),JJ(m);const[P,g]=tee(m);$J();const T=()=>{E||(N(!0),clearTimeout(x.current),x.current=setTimeout(()=>{N(!1)},3e3))};return Rt.jsxs("div",{className:bF.playerPage,onMouseMove:T,children:[Rt.jsxs("div",{id:"playerContainer",className:bF.playerContainer,children:[d&&Rt.jsx($z,{eventPlayer:m}),Rt.jsx(ete,{}),Rt.jsx(hte,{visible:I,eventPlayer:m}),(p==null?void 0:p.stateInfo.state)==="showQrCode"&&Rt.jsx(lte,{url:"".concat(Hb,":").concat(p.stateInfo.qrCodeDeviceId)}),Rt.jsx(Hee,{fromCamera:P,toCamera:g})]}),!y&&Rt.jsx(yte,{message:Rt.jsx(h8,{})})]})}const _te="_gradientBackground_b6nct_1",Tte="_container_b6nct_15",Ste="_fadeIn_b6nct_1",wte="_connectedTV_b6nct_45",Ate="_disconnectedTV_b6nct_47",Ite="_popIn_b6nct_1",Cte="_iconContainer_b6nct_105",bte="_connectedText_b6nct_121",jd={gradientBackground:_te,container:Tte,fadeIn:Ste,connectedTV:wte,disconnectedTV:Ate,popIn:Ite,iconContainer:Cte,connectedText:bte},Rte=({isDisconnected:o})=>Rt.jsx("div",{className:jd.gradientBackground,children:Rt.jsxs("div",{className:jd.container,children:[Rt.jsx("div",{className:o?jd.disconnectedTV:jd.connectedTV,children:Rt.jsx("div",{className:jd.iconContainer,children:o?Rt.jsx(Bee,{}):Rt.jsx(Uee,{})})}),Rt.jsx("h1",{className:jd.connectedText,children:o?"TV disconnected":"TV connected"})]})}),xte="_hidden_zykq7_1",Nte={hidden:xte},Mte="_gradientBackground_14xmh_1",Dte="_container_14xmh_15",Pte="_fadeIn_14xmh_1",Ote="_imageWrapper_14xmh_45",Lte="_listText_14xmh_57",kte="_boldText_14xmh_57",Fte="_image_14xmh_45",Ute="_glow_14xmh_91",Bte="_dividerWrapper_14xmh_119",jte="_divider_14xmh_119",Zte="_buttonsWrapper_14xmh_149",qte="_testButton_14xmh_185",Gte="_demoButton_14xmh_195",Hte="_logoutButton_14xmh_203",Vte="_title_14xmh_215",Kte="_countdownWrapper_14xmh_225",zte="_timeSectionContainer_14xmh_253",Yte="_timeSection_14xmh_253",Wte="_countdownTitle_14xmh_277",$te="_label_14xmh_285",Xte="_logos_14xmh_293",Qte="_warning_14xmh_339",Zi={gradientBackground:Mte,container:Dte,fadeIn:Pte,imageWrapper:Ote,listText:Lte,boldText:kte,image:Fte,glow:Ute,dividerWrapper:Bte,divider:jte,buttonsWrapper:Zte,testButton:qte,demoButton:Gte,logoutButton:Hte,title:Vte,countdownWrapper:Kte,timeSectionContainer:zte,timeSection:Yte,countdownTitle:Wte,label:$te,logos:Xte,warning:Qte},Jte="_errorContainer_1vpqa_1",ene={errorContainer:Jte},p8=({errorIcon:o,errorMessage:i,errorName:l})=>Rt.jsxs("div",{className:ene.errorContainer,children:[o&&Rt.jsx("div",{children:o}),Rt.jsx("span",{className:"body-text",children:"".concat(l&&"".concat(l,".")," ").concat(i)})]}),tne="_gradientBackground_1pfse_1",nne="_container_1pfse_19",rne="_qrCode_1pfse_33",RI={gradientBackground:tne,container:nne,qrCode:rne},ine=({url:o})=>Rt.jsxs("div",{className:"".concat(RI.gradientBackground," ").concat(RI.container),children:[Rt.jsx(_R,{className:RI.qrCode,bgColor:"white",fgColor:"black",value:o,size:500}),Rt.jsx("p",{className:"body-text",children:"Scan the QR code with the app."})]}),one=({timeToLive:o})=>{const i=zz(),l=mu(),d=Wb(),m=$b(),I=Xb(),[N,p]=In.useState(),[w,U]=In.useState("00:00:00:00"),[x,E]=In.useState(!1),y=In.useRef(null),P=5;In.useEffect(()=>{const b=I==null?void 0:I.filter(Z=>Z.deviceId!==mh);E(!!(b!=null&&b.length))},[I]),In.useEffect(()=>{const b=I==null?void 0:I.find(Z=>Z.deviceId===mh);p(b)},[I]);let g;(b=>{b.BEFORE="before",b.MIDDLE="middle",b.END="end"})(g||(g={}));const T=b=>{if(l){let Z=new Date;switch(b){case"end":Z=new Date(l.demoEndtime);break;case"middle":Z.setMinutes(Z.getMinutes()-22);break;default:case"before":Z.setSeconds(Z.getSeconds()+P);break}l.updateStartTime(Z,!0)}};In.useEffect(()=>{if(o&&o>0){const b=Q=>{const se=Date.parse(Q.toString())-Date.parse(new Date().toString()),C=Math.floor(se/1e3%60),X=Math.floor(se/1e3/60%60),ce=Math.floor(se/1e3/60/60%24),oe=Math.floor(se/1e3/60/60/24);return{total:se,days:oe,hours:ce,minutes:X,seconds:C}},Z=Q=>{const{total:se,days:C,hours:X,minutes:ce,seconds:oe}=b(Q);se>=0&&U((C>9?C:"0"+C)+":"+(X>9?X:"0"+X)+":"+(ce>9?ce:"0"+ce)+":"+(oe>9?oe:"0"+oe))};(Q=>{y.current&&clearInterval(y.current),Z(Q);const se=setInterval(()=>{Z(Q)},1e3);y.current=se})((Q=>{const se=new Date;return se.setSeconds(se.getSeconds()+Math.floor(Q/1e3)),se})(o))}},[o]);const[F,M,_,A]=w.split(":");if(N&&N.stateInfo.state==="showQrCode"){const b="".concat(Hb,":").concat(N.stateInfo.qrCodeDeviceId);return Rt.jsx(ine,{url:b})}return Rt.jsxs("div",{className:Zi.container,children:[m&&Rt.jsx("div",{className:Zi.buttonsWrapper,children:Rt.jsxs("div",{children:[Rt.jsx(ta,{className:"".concat(Zi.demoButton," ").concat(Zi.testButton),onClick:()=>{T("before")},selfFocus:!0,children:"Before"}),Rt.jsx(ta,{className:Zi.testButton,onClick:()=>{T("middle")},children:"Middle"}),Rt.jsx(ta,{className:Zi.testButton,onClick:()=>{T("end")},children:"End"})]})}),i.map((b,Z)=>Rt.jsx(p8,{errorMessage:b.toString},"".concat(b.name,"-error-").concat(Z.toString()))),Rt.jsxs("div",{className:Zi.imageWrapper,children:[Rt.jsx("div",{className:Zi.glow}),Rt.jsx("img",{className:Zi.image,src:"".concat(d==null?void 0:d.preScreen.backgroundLandscape.url)})]}),Rt.jsxs("div",{className:Zi.countdownWrapper,children:[Rt.jsx("div",{className:"".concat(Zi.title," subheader-bold"),children:d==null?void 0:d.preScreen.showTitle}),Rt.jsx("div",{className:Zi.dividerWrapper,children:Rt.jsx("div",{className:Zi.divider})}),Rt.jsx("p",{className:"body-text ".concat(Zi.countdownTitle),children:"Starts in"}),Rt.jsxs("div",{className:Zi.timeSectionContainer,children:[Rt.jsxs("div",{className:Zi.timeSection,children:[Rt.jsx("div",{className:"subheader-bold",children:F}),Rt.jsx("div",{className:"".concat(Zi.label," label"),children:"days"})]}),Rt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),Rt.jsxs("div",{className:Zi.timeSection,children:[Rt.jsx("div",{className:"subheader-bold",children:M}),Rt.jsx("div",{className:"".concat(Zi.label," label"),children:"hours"})]}),Rt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),Rt.jsxs("div",{className:Zi.timeSection,children:[Rt.jsx("div",{className:"subheader-bold",children:_}),Rt.jsx("div",{className:"".concat(Zi.label," label"),children:"mins"})]}),Rt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),Rt.jsxs("div",{className:Zi.timeSection,children:[Rt.jsx("div",{className:"subheader-bold",children:A}),Rt.jsx("div",{className:"".concat(Zi.label," label"),children:"secs"})]})]})]}),Rt.jsx("div",{className:Zi.warning,children:!x&&Y0==="new"&&Rt.jsx(h8,{})})]})},ane="_wrapper_f3bpf_1",sne="_container_f3bpf_21",une="_qrCodeContainer_f3bpf_41",lne="_qrCode_f3bpf_41",cne="_listContainer_f3bpf_67",fne="_list_f3bpf_67",dne="_listItemContainer_f3bpf_101",hne="_listNumber_f3bpf_115",pne="_listText_f3bpf_137",gne="_circleRightCorner_f3bpf_149",mne="_circleLeftCorner_f3bpf_173",vne="_circleCenter_f3bpf_195",yne="_fadeIn_f3bpf_1",Uo={wrapper:ane,container:sne,qrCodeContainer:une,qrCode:lne,listContainer:cne,list:fne,listItemContainer:dne,listNumber:hne,listText:pne,circleRightCorner:gne,circleLeftCorner:mne,circleCenter:vne,fadeIn:yne},Ene=({url:o})=>Rt.jsxs("div",{className:Uo.wrapper,children:[Rt.jsx("div",{className:Uo.circleRightCorner}),Rt.jsx("div",{className:Uo.circleLeftCorner}),Rt.jsx("div",{className:Uo.circleCenter}),Rt.jsxs("div",{className:Uo.container,children:[Rt.jsxs("div",{className:"".concat(Uo.listContainer," body-text"),children:[Rt.jsx("h1",{style:{lineHeight:"3rem"},children:"Connect your TV"}),Rt.jsxs("div",{className:Uo.list,children:[Rt.jsxs("span",{className:Uo.listItemContainer,children:[Rt.jsx("span",{className:Uo.listNumber,children:"1"}),Rt.jsxs("span",{className:Uo.listText,children:["Download the ",Rt.jsx("span",{className:"bold-text",children:"Imagien Parallel"})," ","app on your mobile or tablet."]})]}),Rt.jsxs("span",{className:Uo.listItemContainer,children:[Rt.jsx("span",{className:Uo.listNumber,children:"2"}),Rt.jsx("span",{className:Uo.listText,children:"Enter the ticket code from your confirmation email."})]}),Rt.jsxs("span",{className:Uo.listItemContainer,children:[Rt.jsx("span",{className:Uo.listNumber,children:"3"}),Rt.jsx("span",{className:Uo.listText,children:"Scan the QR code with the app."})]})]})]}),Rt.jsx("div",{className:Uo.qrCodeContainer,children:Rt.jsx("div",{className:Uo.qrCode,children:Rt.jsx(_R,{bgColor:"white",fgColor:"black",value:o!=null?o:"",size:512})})})]})]}),_ne="_container_zht4e_1",Tne="_fadeIn_zht4e_1",Sne="_scrollWrapper_zht4e_15",wne="_scrollContainer_zht4e_29",xI={container:_ne,fadeIn:Tne,scrollWrapper:Sne,scrollContainer:wne};function Ane(){const o=Wb();return Rt.jsxs("div",{className:xI.container,children:[Rt.jsx("h1",{children:"Oh no! This event has been canceled."}),Rt.jsx("div",{className:xI.scrollWrapper,children:Rt.jsx("div",{className:xI.scrollContainer,children:o&&o.postScreen.offersCollection.items.map((i,l)=>Rt.jsx("img",{src:i.image.url},l))})})]})}const Ine=()=>{const[o,i]=In.useState(0);return In.useEffect(()=>{const l=m=>{i(m.keyCode)},d=()=>{i(null)};return document.addEventListener("keydown",l),document.addEventListener("keyup",d),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",d)}},[]),o};var uh=(o=>(o.TIZEN="tizen",o.WEBOS="webos",o.WEBZEROS="web0s",o.WEB="web",o))(uh||{});function g8(){const o=navigator.userAgent.toLowerCase();return o.includes("tizen")?"tizen":o.includes("webos")||o.includes("web0s")?"webos":"web"}function Cne(){switch(g8()){case uh.TIZEN:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:10009,KEY_MEDIA_STOP:413};case uh.WEBOS:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:461,KEY_MEDIA_STOP:413};case uh.WEB:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83};default:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83}}}const bne=Cne(),Rne="_popupWrapper_19u5b_1",xne="_popup_19u5b_1",Nne="_controls_19u5b_59",Mne="_focused_19u5b_93",dg={popupWrapper:Rne,popup:xne,controls:Nne,focused:Mne};function Dne({close:o}){const i=()=>{switch(g8()){case uh.TIZEN:window.tizen.application.getCurrentApplication().exit();break;case uh.WEBOS:window.close();break}};return Rt.jsx("div",{className:dg.popupWrapper,children:Rt.jsxs("div",{className:dg.popup,children:[Rt.jsx("h3",{children:"Would you like to exit app?"}),Rt.jsxs("div",{className:dg.controls,children:[Rt.jsx(ta,{onClick:o,selfFocus:!0,focusstile:dg.focused,children:"Back"}),Rt.jsx(ta,{onClick:i,focusstile:dg.focused,children:"Confirm"})]})]})})}const Pne={};function One(){return Rt.jsx("div",{className:Pne.popup,children:"Network Error Popup"})}function NF(){const o=Ine(),[i,l]=In.useState(),d=()=>{l(void 0)};switch(In.useEffect(()=>{o===bne.KEY_BACK&&l("exit")},[o]),i){case"exit":return Rt.jsx(Dne,{close:d});case"network":return Rt.jsx(One,{});default:return}}function Lne(){const o=mu();Kz();const i=sm(),l=Gz(),d=Sh(),m=Xb(),[I,N]=In.useState(!1),[p,w]=In.useState(!1),[U,x]=In.useState(!1),[E,y]=In.useState(),[P,g]=In.useState(!1),[T,F]=In.useState(!1),[M,_]=In.useState(!1),[A,b]=In.useState(),[Z,Y]=In.useState(),[$,Q]=In.useState(),se="".concat(Hb,":").concat(mh);In.useEffect(()=>{m&&b(m.find(ce=>ce.deviceId===mh)||m[0])},[m]),In.useEffect(()=>{Y(A==null?void 0:A.stateInfo.state)},[A]);const C=$&&$.code===404?Rt.jsx(Fee,{color:"#ff4646"}):Rt.jsx(t8,{stroke:"10",color:"#ff4646",styles:{width:"5rem",height:"5rem"}}),X=$&&$.code===404?"No Internet connection. Try scanning the code again.":"".concat($==null?void 0:$.name,". Try scanning the code again.");if(In.useEffect(()=>{if(!o)return;const ce=()=>{console.log(Q),o.adjustedEndTime&&o.adjustedEndTime<Date.now()?w(!0):o.adjustedStartTime&&(w(!1),y(o.adjustedStartTime-Date.now()))};return o.on("startTimeUpdated",ce),()=>{o.off("startTimeUpdated",ce)}},[o]),In.useEffect(()=>{if(!i)return;const ce=()=>{w(!0)};return i.on("eventEnded",ce),()=>{i.off("eventEnded",ce)}},[i]),In.useEffect(()=>{if(!d)return;const ce=()=>{x(!0)};return d.on("eventCanceled",ce),()=>{d.off("eventCanceled",ce)}},[d]),In.useEffect(()=>{if(!P)return;F(!0);const ce=setTimeout(()=>{g(!1)},1500);return()=>{clearTimeout(ce)}},[P]),In.useEffect(()=>{if(E)if(E>0){N(!1);const ce=setTimeout(()=>{N(!0)},E);return()=>{clearTimeout(ce)}}else N(!0)},[E]),In.useEffect(()=>{Z==="hostTv"?(_(!0),g(!0)):l===wC.CONNECTED_STATE&&Y0!=="new"&&g(!0)},[Z,l]),U)return Rt.jsx(Ane,{});if(p)return Rt.jsx(aee,{});{if(!M&&Z===void 0)return Rt.jsxs(Rt.Fragment,{children:[Rt.jsx(Ene,{url:se}),$&&Rt.jsx(p8,{errorMessage:X,errorIcon:C}),Rt.jsx(NF,{})]});if(P&&!T)return Rt.jsx(Rte,{})}return Rt.jsxs("div",{children:[Rt.jsx("div",{className:I?"":Nte.hidden,children:Rt.jsx(Ete,{})}),!I&&Rt.jsx(one,{timeToLive:E}),Rt.jsx(NF,{})]})}tB.init({debug:!1,shouldUseNativeEvents:!0});function kne(){const o=localStorage.getItem("ticketCode"),[i,l]=In.useState(o!=null?o:"");return Rt.jsx("div",{className:kK.pageContainer,children:Rt.jsxs(jz,{baseUrl:xK,preferredProfile:"dash-drm",contentfulAccessToken:NK,contentfulSpaceId:MK,newSetupToggle:Y0==="new",ticketCodeProp:i,children:[Y0!=="new",Rt.jsx(Lne,{})]})})}NI.createRoot(document.getElementById("root")).render(Rt.jsx(kne,{}));export{Fne as __vite_legacy_guard};
