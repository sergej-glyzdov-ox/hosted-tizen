function xne(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const S of p)if(S.type==="childList")for(const b of S.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&f(b)}).observe(document,{childList:!0,subtree:!0});function l(p){const S={};return p.integrity&&(S.integrity=p.integrity),p.referrerPolicy&&(S.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?S.credentials="include":p.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function f(p){if(p.ep)return;p.ep=!0;const S=l(p);fetch(p.href,S)}})();var iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var nF={exports:{}},K0={},rF={exports:{}},Fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg=Symbol.for("react.element"),S9=Symbol.for("react.portal"),w9=Symbol.for("react.fragment"),A9=Symbol.for("react.strict_mode"),I9=Symbol.for("react.profiler"),b9=Symbol.for("react.provider"),C9=Symbol.for("react.context"),R9=Symbol.for("react.forward_ref"),N9=Symbol.for("react.suspense"),x9=Symbol.for("react.memo"),M9=Symbol.for("react.lazy"),BD=Symbol.iterator;function D9(r){return r===null||typeof r!="object"?null:(r=BD&&r[BD]||r["@@iterator"],typeof r=="function"?r:null)}var iF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oF=Object.assign,aF={};function Th(r,o,l){this.props=r,this.context=o,this.refs=aF,this.updater=l||iF}Th.prototype.isReactComponent={};Th.prototype.setState=function(r,o){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,o,"setState")};Th.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function sF(){}sF.prototype=Th.prototype;function wb(r,o,l){this.props=r,this.context=o,this.refs=aF,this.updater=l||iF}var Ab=wb.prototype=new sF;Ab.constructor=wb;oF(Ab,Th.prototype);Ab.isPureReactComponent=!0;var jD=Array.isArray,uF=Object.prototype.hasOwnProperty,Ib={current:null},lF={key:!0,ref:!0,__self:!0,__source:!0};function cF(r,o,l){var f,p={},S=null,b=null;if(o!=null)for(f in o.ref!==void 0&&(b=o.ref),o.key!==void 0&&(S=""+o.key),o)uF.call(o,f)&&!lF.hasOwnProperty(f)&&(p[f]=o[f]);var g=arguments.length-2;if(g===1)p.children=l;else if(1<g){for(var w=Array(g),F=0;F<g;F++)w[F]=arguments[F+2];p.children=w}if(r&&r.defaultProps)for(f in g=r.defaultProps,g)p[f]===void 0&&(p[f]=g[f]);return{$$typeof:Wg,type:r,key:S,ref:b,props:p,_owner:Ib.current}}function P9(r,o){return{$$typeof:Wg,type:r.type,key:o,ref:r.ref,props:r.props,_owner:r._owner}}function bb(r){return typeof r=="object"&&r!==null&&r.$$typeof===Wg}function O9(r){var o={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(l){return o[l]})}var ZD=/\/+/g;function lT(r,o){return typeof r=="object"&&r!==null&&r.key!=null?O9(""+r.key):o.toString(36)}function e0(r,o,l,f,p){var S=typeof r;(S==="undefined"||S==="boolean")&&(r=null);var b=!1;if(r===null)b=!0;else switch(S){case"string":case"number":b=!0;break;case"object":switch(r.$$typeof){case Wg:case S9:b=!0}}if(b)return b=r,p=p(b),r=f===""?"."+lT(b,0):f,jD(p)?(l="",r!=null&&(l=r.replace(ZD,"$&/")+"/"),e0(p,o,l,"",function(F){return F})):p!=null&&(bb(p)&&(p=P9(p,l+(!p.key||b&&b.key===p.key?"":(""+p.key).replace(ZD,"$&/")+"/")+r)),o.push(p)),1;if(b=0,f=f===""?".":f+":",jD(r))for(var g=0;g<r.length;g++){S=r[g];var w=f+lT(S,g);b+=e0(S,o,l,w,p)}else if(w=D9(r),typeof w=="function")for(r=w.call(r),g=0;!(S=r.next()).done;)S=S.value,w=f+lT(S,g++),b+=e0(S,o,l,w,p);else if(S==="object")throw o=String(r),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return b}function Ny(r,o,l){if(r==null)return r;var f=[],p=0;return e0(r,f,"","",function(S){return o.call(l,S,p++)}),f}function L9(r){if(r._status===-1){var o=r._result;o=o(),o.then(function(l){(r._status===0||r._status===-1)&&(r._status=1,r._result=l)},function(l){(r._status===0||r._status===-1)&&(r._status=2,r._result=l)}),r._status===-1&&(r._status=0,r._result=o)}if(r._status===1)return r._result.default;throw r._result}var Sa={current:null},t0={transition:null},k9={ReactCurrentDispatcher:Sa,ReactCurrentBatchConfig:t0,ReactCurrentOwner:Ib};function fF(){throw Error("act(...) is not supported in production builds of React.")}Fr.Children={map:Ny,forEach:function(r,o,l){Ny(r,function(){o.apply(this,arguments)},l)},count:function(r){var o=0;return Ny(r,function(){o++}),o},toArray:function(r){return Ny(r,function(o){return o})||[]},only:function(r){if(!bb(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Fr.Component=Th;Fr.Fragment=w9;Fr.Profiler=I9;Fr.PureComponent=wb;Fr.StrictMode=A9;Fr.Suspense=N9;Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k9;Fr.act=fF;Fr.cloneElement=function(r,o,l){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var f=oF({},r.props),p=r.key,S=r.ref,b=r._owner;if(o!=null){if(o.ref!==void 0&&(S=o.ref,b=Ib.current),o.key!==void 0&&(p=""+o.key),r.type&&r.type.defaultProps)var g=r.type.defaultProps;for(w in o)uF.call(o,w)&&!lF.hasOwnProperty(w)&&(f[w]=o[w]===void 0&&g!==void 0?g[w]:o[w])}var w=arguments.length-2;if(w===1)f.children=l;else if(1<w){g=Array(w);for(var F=0;F<w;F++)g[F]=arguments[F+2];f.children=g}return{$$typeof:Wg,type:r.type,key:p,ref:S,props:f,_owner:b}};Fr.createContext=function(r){return r={$$typeof:C9,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:b9,_context:r},r.Consumer=r};Fr.createElement=cF;Fr.createFactory=function(r){var o=cF.bind(null,r);return o.type=r,o};Fr.createRef=function(){return{current:null}};Fr.forwardRef=function(r){return{$$typeof:R9,render:r}};Fr.isValidElement=bb;Fr.lazy=function(r){return{$$typeof:M9,_payload:{_status:-1,_result:r},_init:L9}};Fr.memo=function(r,o){return{$$typeof:x9,type:r,compare:o===void 0?null:o}};Fr.startTransition=function(r){var o=t0.transition;t0.transition={};try{r()}finally{t0.transition=o}};Fr.unstable_act=fF;Fr.useCallback=function(r,o){return Sa.current.useCallback(r,o)};Fr.useContext=function(r){return Sa.current.useContext(r)};Fr.useDebugValue=function(){};Fr.useDeferredValue=function(r){return Sa.current.useDeferredValue(r)};Fr.useEffect=function(r,o){return Sa.current.useEffect(r,o)};Fr.useId=function(){return Sa.current.useId()};Fr.useImperativeHandle=function(r,o,l){return Sa.current.useImperativeHandle(r,o,l)};Fr.useInsertionEffect=function(r,o){return Sa.current.useInsertionEffect(r,o)};Fr.useLayoutEffect=function(r,o){return Sa.current.useLayoutEffect(r,o)};Fr.useMemo=function(r,o){return Sa.current.useMemo(r,o)};Fr.useReducer=function(r,o,l){return Sa.current.useReducer(r,o,l)};Fr.useRef=function(r){return Sa.current.useRef(r)};Fr.useState=function(r){return Sa.current.useState(r)};Fr.useSyncExternalStore=function(r,o,l){return Sa.current.useSyncExternalStore(r,o,l)};Fr.useTransition=function(){return Sa.current.useTransition()};Fr.version="18.3.1";rF.exports=Fr;var pn=rF.exports;const Xo=Sb(pn);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F9=pn,U9=Symbol.for("react.element"),B9=Symbol.for("react.fragment"),j9=Object.prototype.hasOwnProperty,Z9=F9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G9={key:!0,ref:!0,__self:!0,__source:!0};function dF(r,o,l){var f,p={},S=null,b=null;l!==void 0&&(S=""+l),o.key!==void 0&&(S=""+o.key),o.ref!==void 0&&(b=o.ref);for(f in o)j9.call(o,f)&&!G9.hasOwnProperty(f)&&(p[f]=o[f]);if(r&&r.defaultProps)for(f in o=r.defaultProps,o)p[f]===void 0&&(p[f]=o[f]);return{$$typeof:U9,type:r,key:S,ref:b,props:p,_owner:Z9.current}}K0.Fragment=B9;K0.jsx=dF;K0.jsxs=dF;nF.exports=K0;var gt=nF.exports,cI={},hF={exports:{}},ps={},pF={exports:{}},gF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function o(Ze,it){var ut=Ze.length;Ze.push(it);e:for(;0<ut;){var $e=ut-1>>>1,lt=Ze[$e];if(0<p(lt,it))Ze[$e]=it,Ze[ut]=lt,ut=$e;else break e}}function l(Ze){return Ze.length===0?null:Ze[0]}function f(Ze){if(Ze.length===0)return null;var it=Ze[0],ut=Ze.pop();if(ut!==it){Ze[0]=ut;e:for(var $e=0,lt=Ze.length,At=lt>>>1;$e<At;){var Oe=2*($e+1)-1,Qe=Ze[Oe],ct=Oe+1,Qt=Ze[ct];if(0>p(Qe,ut))ct<lt&&0>p(Qt,Qe)?(Ze[$e]=Qt,Ze[ct]=ut,$e=ct):(Ze[$e]=Qe,Ze[Oe]=ut,$e=Oe);else if(ct<lt&&0>p(Qt,ut))Ze[$e]=Qt,Ze[ct]=ut,$e=ct;else break e}}return it}function p(Ze,it){var ut=Ze.sortIndex-it.sortIndex;return ut!==0?ut:Ze.id-it.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;r.unstable_now=function(){return S.now()}}else{var b=Date,g=b.now();r.unstable_now=function(){return b.now()-g}}var w=[],F=[],C=1,y=null,v=3,D=!1,m=!1,T=!1,U=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Ze){for(var it=l(F);it!==null;){if(it.callback===null)f(F);else if(it.startTime<=Ze)f(F),it.sortIndex=it.expirationTime,o(w,it);else break;it=l(F)}}function R(Ze){if(T=!1,I(Ze),!m)if(l(w)!==null)m=!0,Xe(j);else{var it=l(F);it!==null&&Ae(R,it.startTime-Ze)}}function j(Ze,it){m=!1,T&&(T=!1,x(X),X=-1),D=!0;var ut=v;try{for(I(it),y=l(w);y!==null&&(!(y.expirationTime>it)||Ze&&!$());){var $e=y.callback;if(typeof $e=="function"){y.callback=null,v=y.priorityLevel;var lt=$e(y.expirationTime<=it);it=r.unstable_now(),typeof lt=="function"?y.callback=lt:y===l(w)&&f(w),I(it)}else f(w);y=l(w)}if(y!==null)var At=!0;else{var Oe=l(F);Oe!==null&&Ae(R,Oe.startTime-it),At=!1}return At}finally{y=null,v=ut,D=!1}}var z=!1,W=null,X=-1,le=5,N=-1;function $(){return!(r.unstable_now()-N<le)}function fe(){if(W!==null){var Ze=r.unstable_now();N=Ze;var it=!0;try{it=W(!0,Ze)}finally{it?oe():(z=!1,W=null)}}else z=!1}var oe;if(typeof _=="function")oe=function(){_(fe)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Ie=he.port2;he.port1.onmessage=fe,oe=function(){Ie.postMessage(null)}}else oe=function(){U(fe,0)};function Xe(Ze){W=Ze,z||(z=!0,oe())}function Ae(Ze,it){X=U(function(){Ze(r.unstable_now())},it)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Ze){Ze.callback=null},r.unstable_continueExecution=function(){m||D||(m=!0,Xe(j))},r.unstable_forceFrameRate=function(Ze){0>Ze||125<Ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<Ze?Math.floor(1e3/Ze):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return l(w)},r.unstable_next=function(Ze){switch(v){case 1:case 2:case 3:var it=3;break;default:it=v}var ut=v;v=it;try{return Ze()}finally{v=ut}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Ze,it){switch(Ze){case 1:case 2:case 3:case 4:case 5:break;default:Ze=3}var ut=v;v=Ze;try{return it()}finally{v=ut}},r.unstable_scheduleCallback=function(Ze,it,ut){var $e=r.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?$e+ut:$e):ut=$e,Ze){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=ut+lt,Ze={id:C++,callback:it,priorityLevel:Ze,startTime:ut,expirationTime:lt,sortIndex:-1},ut>$e?(Ze.sortIndex=ut,o(F,Ze),l(w)===null&&Ze===l(F)&&(T?(x(X),X=-1):T=!0,Ae(R,ut-$e))):(Ze.sortIndex=lt,o(w,Ze),m||D||(m=!0,Xe(j))),Ze},r.unstable_shouldYield=$,r.unstable_wrapCallback=function(Ze){var it=v;return function(){var ut=v;v=it;try{return Ze.apply(this,arguments)}finally{v=ut}}}})(gF);pF.exports=gF;var q9=pF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H9=pn,hs=q9;function jn(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mF=new Set,Cg={};function Tf(r,o){dh(r,o),dh(r+"Capture",o)}function dh(r,o){for(Cg[r]=o,r=0;r<o.length;r++)mF.add(o[r])}var El=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fI=Object.prototype.hasOwnProperty,K9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,GD={},qD={};function V9(r){return fI.call(qD,r)?!0:fI.call(GD,r)?!1:K9.test(r)?qD[r]=!0:(GD[r]=!0,!1)}function z9(r,o,l,f){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function Y9(r,o,l,f){if(o===null||typeof o>"u"||z9(r,o,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function wa(r,o,l,f,p,S,b){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=r,this.type=o,this.sanitizeURL=S,this.removeEmptyString=b}var Go={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Go[r]=new wa(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];Go[o]=new wa(o,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Go[r]=new wa(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Go[r]=new wa(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Go[r]=new wa(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Go[r]=new wa(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Go[r]=new wa(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Go[r]=new wa(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Go[r]=new wa(r,5,!1,r.toLowerCase(),null,!1,!1)});var Cb=/[\-:]([a-z])/g;function Rb(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(Cb,Rb);Go[o]=new wa(o,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(Cb,Rb);Go[o]=new wa(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(Cb,Rb);Go[o]=new wa(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Go[r]=new wa(r,1,!1,r.toLowerCase(),null,!1,!1)});Go.xlinkHref=new wa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Go[r]=new wa(r,1,!1,r.toLowerCase(),null,!0,!0)});function Nb(r,o,l,f){var p=Go.hasOwnProperty(o)?Go[o]:null;(p!==null?p.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(Y9(o,l,p,f)&&(l=null),f||p===null?V9(o)&&(l===null?r.removeAttribute(o):r.setAttribute(o,""+l)):p.mustUseProperty?r[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,f=p.attributeNamespace,l===null?r.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,f?r.setAttributeNS(f,o,l):r.setAttribute(o,l))))}var wl=H9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xy=Symbol.for("react.element"),Kd=Symbol.for("react.portal"),Vd=Symbol.for("react.fragment"),xb=Symbol.for("react.strict_mode"),dI=Symbol.for("react.profiler"),vF=Symbol.for("react.provider"),yF=Symbol.for("react.context"),Mb=Symbol.for("react.forward_ref"),hI=Symbol.for("react.suspense"),pI=Symbol.for("react.suspense_list"),Db=Symbol.for("react.memo"),Xl=Symbol.for("react.lazy"),EF=Symbol.for("react.offscreen"),HD=Symbol.iterator;function Xp(r){return r===null||typeof r!="object"?null:(r=HD&&r[HD]||r["@@iterator"],typeof r=="function"?r:null)}var Vi=Object.assign,cT;function cg(r){if(cT===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);cT=o&&o[1]||""}return"\n"+cT+r}var fT=!1;function dT(r,o){if(!r||fT)return"";fT=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(F){var f=F}Reflect.construct(r,[],o)}else{try{o.call()}catch(F){f=F}r.call(o.prototype)}else{try{throw Error()}catch(F){f=F}r()}}catch(F){if(F&&f&&typeof F.stack=="string"){for(var p=F.stack.split("\n"),S=f.stack.split("\n"),b=p.length-1,g=S.length-1;1<=b&&0<=g&&p[b]!==S[g];)g--;for(;1<=b&&0<=g;b--,g--)if(p[b]!==S[g]){if(b!==1||g!==1)do if(b--,g--,0>g||p[b]!==S[g]){var w="\n"+p[b].replace(" at new "," at ");return r.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",r.displayName)),w}while(1<=b&&0<=g);break}}}finally{fT=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?cg(r):""}function W9(r){switch(r.tag){case 5:return cg(r.type);case 16:return cg("Lazy");case 13:return cg("Suspense");case 19:return cg("SuspenseList");case 0:case 2:case 15:return r=dT(r.type,!1),r;case 11:return r=dT(r.type.render,!1),r;case 1:return r=dT(r.type,!0),r;default:return""}}function gI(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Vd:return"Fragment";case Kd:return"Portal";case dI:return"Profiler";case xb:return"StrictMode";case hI:return"Suspense";case pI:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case yF:return(r.displayName||"Context")+".Consumer";case vF:return(r._context.displayName||"Context")+".Provider";case Mb:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Db:return o=r.displayName||null,o!==null?o:gI(r.type)||"Memo";case Xl:o=r._payload,r=r._init;try{return gI(r(o))}catch(l){}}return null}function $9(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gI(o);case 8:return o===xb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function dc(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function _F(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function X9(r){var o=_F(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),f=""+r[o];if(!r.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,S=l.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return p.call(this)},set:function(b){f=""+b,S.call(this,b)}}),Object.defineProperty(r,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(b){f=""+b},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function My(r){r._valueTracker||(r._valueTracker=X9(r))}function TF(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return r&&(f=_F(r)?r.checked?"true":"false":r.value),r=f,r!==l?(o.setValue(r),!0):!1}function g0(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch(o){return r.body}}function mI(r,o){var l=o.checked;return Vi({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l!=null?l:r._wrapperState.initialChecked})}function KD(r,o){var l=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;l=dc(o.value!=null?o.value:l),r._wrapperState={initialChecked:f,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function SF(r,o){o=o.checked,o!=null&&Nb(r,"checked",o,!1)}function vI(r,o){SF(r,o);var l=dc(o.value),f=o.type;if(l!=null)f==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?yI(r,o.type,l):o.hasOwnProperty("defaultValue")&&yI(r,o.type,dc(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function VD(r,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,l||o===r.value||(r.value=o),r.defaultValue=o}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function yI(r,o,l){(o!=="number"||g0(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var fg=Array.isArray;function ah(r,o,l,f){if(r=r.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=o.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&f&&(r[l].defaultSelected=!0)}else{for(l=""+dc(l),o=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,f&&(r[p].defaultSelected=!0);return}o!==null||r[p].disabled||(o=r[p])}o!==null&&(o.selected=!0)}}function EI(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(jn(91));return Vi({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function zD(r,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(jn(92));if(fg(l)){if(1<l.length)throw Error(jn(93));l=l[0]}o=l}o==null&&(o=""),l=o}r._wrapperState={initialValue:dc(l)}}function wF(r,o){var l=dc(o.value),f=dc(o.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),o.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),f!=null&&(r.defaultValue=""+f)}function YD(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function AF(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _I(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?AF(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Dy,IF=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,f,p){MSApp.execUnsafeLocalFunction(function(){return r(o,l,f,p)})}:r}(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(Dy=Dy||document.createElement("div"),Dy.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Dy.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function Rg(r,o){if(o){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=o;return}}r.textContent=o}var vg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q9=["Webkit","ms","Moz","O"];Object.keys(vg).forEach(function(r){Q9.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),vg[o]=vg[r]})});function bF(r,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||vg.hasOwnProperty(r)&&vg[r]?(""+o).trim():o+"px"}function CF(r,o){r=r.style;for(var l in o)if(o.hasOwnProperty(l)){var f=l.indexOf("--")===0,p=bF(l,o[l],f);l==="float"&&(l="cssFloat"),f?r.setProperty(l,p):r[l]=p}}var J9=Vi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function TI(r,o){if(o){if(J9[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(jn(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(jn(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(jn(61))}if(o.style!=null&&typeof o.style!="object")throw Error(jn(62))}}function SI(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wI=null;function Pb(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var AI=null,sh=null,uh=null;function WD(r){if(r=Qg(r)){if(typeof AI!="function")throw Error(jn(280));var o=r.stateNode;o&&(o=$0(o),AI(r.stateNode,r.type,o))}}function RF(r){sh?uh?uh.push(r):uh=[r]:sh=r}function NF(){if(sh){var r=sh,o=uh;if(uh=sh=null,WD(r),o)for(r=0;r<o.length;r++)WD(o[r])}}function xF(r,o){return r(o)}function MF(){}var hT=!1;function DF(r,o,l){if(hT)return r(o,l);hT=!0;try{return xF(r,o,l)}finally{hT=!1,(sh!==null||uh!==null)&&(MF(),NF())}}function Ng(r,o){var l=r.stateNode;if(l===null)return null;var f=$0(l);if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(jn(231,o,typeof l));return l}var II=!1;if(El)try{var Qp={};Object.defineProperty(Qp,"passive",{get:function(){II=!0}}),window.addEventListener("test",Qp,Qp),window.removeEventListener("test",Qp,Qp)}catch(r){II=!1}function eq(r,o,l,f,p,S,b,g,w){var F=Array.prototype.slice.call(arguments,3);try{o.apply(l,F)}catch(C){this.onError(C)}}var yg=!1,m0=null,v0=!1,bI=null,tq={onError:function(r){yg=!0,m0=r}};function nq(r,o,l,f,p,S,b,g,w){yg=!1,m0=null,eq.apply(tq,arguments)}function rq(r,o,l,f,p,S,b,g,w){if(nq.apply(this,arguments),yg){if(yg){var F=m0;yg=!1,m0=null}else throw Error(jn(198));v0||(v0=!0,bI=F)}}function Sf(r){var o=r,l=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,o.flags&4098&&(l=o.return),r=o.return;while(r)}return o.tag===3?l:null}function PF(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function $D(r){if(Sf(r)!==r)throw Error(jn(188))}function iq(r){var o=r.alternate;if(!o){if(o=Sf(r),o===null)throw Error(jn(188));return o!==r?null:r}for(var l=r,f=o;;){var p=l.return;if(p===null)break;var S=p.alternate;if(S===null){if(f=p.return,f!==null){l=f;continue}break}if(p.child===S.child){for(S=p.child;S;){if(S===l)return $D(p),r;if(S===f)return $D(p),o;S=S.sibling}throw Error(jn(188))}if(l.return!==f.return)l=p,f=S;else{for(var b=!1,g=p.child;g;){if(g===l){b=!0,l=p,f=S;break}if(g===f){b=!0,f=p,l=S;break}g=g.sibling}if(!b){for(g=S.child;g;){if(g===l){b=!0,l=S,f=p;break}if(g===f){b=!0,f=S,l=p;break}g=g.sibling}if(!b)throw Error(jn(189))}}if(l.alternate!==f)throw Error(jn(190))}if(l.tag!==3)throw Error(jn(188));return l.stateNode.current===l?r:o}function OF(r){return r=iq(r),r!==null?LF(r):null}function LF(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=LF(r);if(o!==null)return o;r=r.sibling}return null}var kF=hs.unstable_scheduleCallback,XD=hs.unstable_cancelCallback,oq=hs.unstable_shouldYield,aq=hs.unstable_requestPaint,lo=hs.unstable_now,sq=hs.unstable_getCurrentPriorityLevel,Ob=hs.unstable_ImmediatePriority,FF=hs.unstable_UserBlockingPriority,y0=hs.unstable_NormalPriority,uq=hs.unstable_LowPriority,UF=hs.unstable_IdlePriority,V0=null,Mu=null;function lq(r){if(Mu&&typeof Mu.onCommitFiberRoot=="function")try{Mu.onCommitFiberRoot(V0,r,void 0,(r.current.flags&128)===128)}catch(o){}}var au=Math.clz32?Math.clz32:dq,cq=Math.log,fq=Math.LN2;function dq(r){return r>>>=0,r===0?32:31-(cq(r)/fq|0)|0}var Py=64,Oy=4194304;function dg(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function E0(r,o){var l=r.pendingLanes;if(l===0)return 0;var f=0,p=r.suspendedLanes,S=r.pingedLanes,b=l&268435455;if(b!==0){var g=b&~p;g!==0?f=dg(g):(S&=b,S!==0&&(f=dg(S)))}else b=l&~p,b!==0?f=dg(b):S!==0&&(f=dg(S));if(f===0)return 0;if(o!==0&&o!==f&&!(o&p)&&(p=f&-f,S=o&-o,p>=S||p===16&&(S&4194240)!==0))return o;if(f&4&&(f|=l&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=f;0<o;)l=31-au(o),p=1<<l,f|=r[l],o&=~p;return f}function hq(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pq(r,o){for(var l=r.suspendedLanes,f=r.pingedLanes,p=r.expirationTimes,S=r.pendingLanes;0<S;){var b=31-au(S),g=1<<b,w=p[b];w===-1?(!(g&l)||g&f)&&(p[b]=hq(g,o)):w<=o&&(r.expiredLanes|=g),S&=~g}}function CI(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function BF(){var r=Py;return Py<<=1,!(Py&4194240)&&(Py=64),r}function pT(r){for(var o=[],l=0;31>l;l++)o.push(r);return o}function $g(r,o,l){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-au(o),r[o]=l}function gq(r,o){var l=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var f=r.eventTimes;for(r=r.expirationTimes;0<l;){var p=31-au(l),S=1<<p;o[p]=0,f[p]=-1,r[p]=-1,l&=~S}}function Lb(r,o){var l=r.entangledLanes|=o;for(r=r.entanglements;l;){var f=31-au(l),p=1<<f;p&o|r[f]&o&&(r[f]|=o),l&=~p}}var di=0;function jF(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var ZF,kb,GF,qF,HF,RI=!1,Ly=[],rc=null,ic=null,oc=null,xg=new Map,Mg=new Map,Jl=[],mq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function QD(r,o){switch(r){case"focusin":case"focusout":rc=null;break;case"dragenter":case"dragleave":ic=null;break;case"mouseover":case"mouseout":oc=null;break;case"pointerover":case"pointerout":xg.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mg.delete(o.pointerId)}}function Jp(r,o,l,f,p,S){return r===null||r.nativeEvent!==S?(r={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:S,targetContainers:[p]},o!==null&&(o=Qg(o),o!==null&&kb(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),r)}function vq(r,o,l,f,p){switch(o){case"focusin":return rc=Jp(rc,r,o,l,f,p),!0;case"dragenter":return ic=Jp(ic,r,o,l,f,p),!0;case"mouseover":return oc=Jp(oc,r,o,l,f,p),!0;case"pointerover":var S=p.pointerId;return xg.set(S,Jp(xg.get(S)||null,r,o,l,f,p)),!0;case"gotpointercapture":return S=p.pointerId,Mg.set(S,Jp(Mg.get(S)||null,r,o,l,f,p)),!0}return!1}function KF(r){var o=af(r.target);if(o!==null){var l=Sf(o);if(l!==null){if(o=l.tag,o===13){if(o=PF(l),o!==null){r.blockedOn=o,HF(r.priority,function(){GF(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function n0(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var l=NI(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var f=new l.constructor(l.type,l);wI=f,l.target.dispatchEvent(f),wI=null}else return o=Qg(l),o!==null&&kb(o),r.blockedOn=l,!1;o.shift()}return!0}function JD(r,o,l){n0(r)&&l.delete(o)}function yq(){RI=!1,rc!==null&&n0(rc)&&(rc=null),ic!==null&&n0(ic)&&(ic=null),oc!==null&&n0(oc)&&(oc=null),xg.forEach(JD),Mg.forEach(JD)}function eg(r,o){r.blockedOn===o&&(r.blockedOn=null,RI||(RI=!0,hs.unstable_scheduleCallback(hs.unstable_NormalPriority,yq)))}function Dg(r){function o(p){return eg(p,r)}if(0<Ly.length){eg(Ly[0],r);for(var l=1;l<Ly.length;l++){var f=Ly[l];f.blockedOn===r&&(f.blockedOn=null)}}for(rc!==null&&eg(rc,r),ic!==null&&eg(ic,r),oc!==null&&eg(oc,r),xg.forEach(o),Mg.forEach(o),l=0;l<Jl.length;l++)f=Jl[l],f.blockedOn===r&&(f.blockedOn=null);for(;0<Jl.length&&(l=Jl[0],l.blockedOn===null);)KF(l),l.blockedOn===null&&Jl.shift()}var lh=wl.ReactCurrentBatchConfig,_0=!0;function Eq(r,o,l,f){var p=di,S=lh.transition;lh.transition=null;try{di=1,Fb(r,o,l,f)}finally{di=p,lh.transition=S}}function _q(r,o,l,f){var p=di,S=lh.transition;lh.transition=null;try{di=4,Fb(r,o,l,f)}finally{di=p,lh.transition=S}}function Fb(r,o,l,f){if(_0){var p=NI(r,o,l,f);if(p===null)AT(r,o,f,T0,l),QD(r,f);else if(vq(p,r,o,l,f))f.stopPropagation();else if(QD(r,f),o&4&&-1<mq.indexOf(r)){for(;p!==null;){var S=Qg(p);if(S!==null&&ZF(S),S=NI(r,o,l,f),S===null&&AT(r,o,f,T0,l),S===p)break;p=S}p!==null&&f.stopPropagation()}else AT(r,o,f,null,l)}}var T0=null;function NI(r,o,l,f){if(T0=null,r=Pb(f),r=af(r),r!==null)if(o=Sf(r),o===null)r=null;else if(l=o.tag,l===13){if(r=PF(o),r!==null)return r;r=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return T0=r,null}function VF(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sq()){case Ob:return 1;case FF:return 4;case y0:case uq:return 16;case UF:return 536870912;default:return 16}default:return 16}}var tc=null,Ub=null,r0=null;function zF(){if(r0)return r0;var r,o=Ub,l=o.length,f,p="value"in tc?tc.value:tc.textContent,S=p.length;for(r=0;r<l&&o[r]===p[r];r++);var b=l-r;for(f=1;f<=b&&o[l-f]===p[S-f];f++);return r0=p.slice(r,1<f?1-f:void 0)}function i0(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function ky(){return!0}function eP(){return!1}function gs(r){function o(l,f,p,S,b){this._reactName=l,this._targetInst=p,this.type=f,this.nativeEvent=S,this.target=b,this.currentTarget=null;for(var g in r)r.hasOwnProperty(g)&&(l=r[g],this[g]=l?l(S):S[g]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?ky:eP,this.isPropagationStopped=eP,this}return Vi(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ky)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ky)},persist:function(){},isPersistent:ky}),o}var Sh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bb=gs(Sh),Xg=Vi({},Sh,{view:0,detail:0}),Tq=gs(Xg),gT,mT,tg,z0=Vi({},Xg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jb,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==tg&&(tg&&r.type==="mousemove"?(gT=r.screenX-tg.screenX,mT=r.screenY-tg.screenY):mT=gT=0,tg=r),gT)},movementY:function(r){return"movementY"in r?r.movementY:mT}}),tP=gs(z0),Sq=Vi({},z0,{dataTransfer:0}),wq=gs(Sq),Aq=Vi({},Xg,{relatedTarget:0}),vT=gs(Aq),Iq=Vi({},Sh,{animationName:0,elapsedTime:0,pseudoElement:0}),bq=gs(Iq),Cq=Vi({},Sh,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Rq=gs(Cq),Nq=Vi({},Sh,{data:0}),nP=gs(Nq),xq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pq(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Dq[r])?!!o[r]:!1}function jb(){return Pq}var Oq=Vi({},Xg,{key:function(r){if(r.key){var o=xq[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=i0(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Mq[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jb,charCode:function(r){return r.type==="keypress"?i0(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?i0(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Lq=gs(Oq),kq=Vi({},z0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rP=gs(kq),Fq=Vi({},Xg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jb}),Uq=gs(Fq),Bq=Vi({},Sh,{propertyName:0,elapsedTime:0,pseudoElement:0}),jq=gs(Bq),Zq=Vi({},z0,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Gq=gs(Zq),qq=[9,13,27,32],Zb=El&&"CompositionEvent"in window,Eg=null;El&&"documentMode"in document&&(Eg=document.documentMode);var Hq=El&&"TextEvent"in window&&!Eg,YF=El&&(!Zb||Eg&&8<Eg&&11>=Eg),iP=" ",oP=!1;function WF(r,o){switch(r){case"keyup":return qq.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $F(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var zd=!1;function Kq(r,o){switch(r){case"compositionend":return $F(o);case"keypress":return o.which!==32?null:(oP=!0,iP);case"textInput":return r=o.data,r===iP&&oP?null:r;default:return null}}function Vq(r,o){if(zd)return r==="compositionend"||!Zb&&WF(r,o)?(r=zF(),r0=Ub=tc=null,zd=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return YF&&o.locale!=="ko"?null:o.data;default:return null}}var zq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aP(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!zq[r.type]:o==="textarea"}function XF(r,o,l,f){RF(f),o=S0(o,"onChange"),0<o.length&&(l=new Bb("onChange","change",null,l,f),r.push({event:l,listeners:o}))}var _g=null,Pg=null;function Yq(r){u4(r,0)}function Y0(r){var o=$d(r);if(TF(o))return r}function Wq(r,o){if(r==="change")return o}var QF=!1;if(El){var yT;if(El){var ET="oninput"in document;if(!ET){var sP=document.createElement("div");sP.setAttribute("oninput","return;"),ET=typeof sP.oninput=="function"}yT=ET}else yT=!1;QF=yT&&(!document.documentMode||9<document.documentMode)}function uP(){_g&&(_g.detachEvent("onpropertychange",JF),Pg=_g=null)}function JF(r){if(r.propertyName==="value"&&Y0(Pg)){var o=[];XF(o,Pg,r,Pb(r)),DF(Yq,o)}}function $q(r,o,l){r==="focusin"?(uP(),_g=o,Pg=l,_g.attachEvent("onpropertychange",JF)):r==="focusout"&&uP()}function Xq(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Y0(Pg)}function Qq(r,o){if(r==="click")return Y0(o)}function Jq(r,o){if(r==="input"||r==="change")return Y0(o)}function eH(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var uu=typeof Object.is=="function"?Object.is:eH;function Og(r,o){if(uu(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var l=Object.keys(r),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var p=l[f];if(!fI.call(o,p)||!uu(r[p],o[p]))return!1}return!0}function lP(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function cP(r,o){var l=lP(r);r=0;for(var f;l;){if(l.nodeType===3){if(f=r+l.textContent.length,r<=o&&f>=o)return{node:l,offset:o-r};r=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=lP(l)}}function e4(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?e4(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function t4(){for(var r=window,o=g0();o instanceof r.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch(f){l=!1}if(l)r=o.contentWindow;else break;o=g0(r.document)}return o}function Gb(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function tH(r){var o=t4(),l=r.focusedElem,f=r.selectionRange;if(o!==l&&l&&l.ownerDocument&&e4(l.ownerDocument.documentElement,l)){if(f!==null&&Gb(l)){if(o=f.start,r=f.end,r===void 0&&(r=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(r,l.value.length);else if(r=(o=l.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var p=l.textContent.length,S=Math.min(f.start,p);f=f.end===void 0?S:Math.min(f.end,p),!r.extend&&S>f&&(p=f,f=S,S=p),p=cP(l,S);var b=cP(l,f);p&&b&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==b.node||r.focusOffset!==b.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),r.removeAllRanges(),S>f?(r.addRange(o),r.extend(b.node,b.offset)):(o.setEnd(b.node,b.offset),r.addRange(o)))}}for(o=[],r=l;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)r=o[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var nH=El&&"documentMode"in document&&11>=document.documentMode,Yd=null,xI=null,Tg=null,MI=!1;function fP(r,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;MI||Yd==null||Yd!==g0(f)||(f=Yd,"selectionStart"in f&&Gb(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Tg&&Og(Tg,f)||(Tg=f,f=S0(xI,"onSelect"),0<f.length&&(o=new Bb("onSelect","select",null,o,l),r.push({event:o,listeners:f}),o.target=Yd)))}function Fy(r,o){var l={};return l[r.toLowerCase()]=o.toLowerCase(),l["Webkit"+r]="webkit"+o,l["Moz"+r]="moz"+o,l}var Wd={animationend:Fy("Animation","AnimationEnd"),animationiteration:Fy("Animation","AnimationIteration"),animationstart:Fy("Animation","AnimationStart"),transitionend:Fy("Transition","TransitionEnd")},_T={},n4={};El&&(n4=document.createElement("div").style,"AnimationEvent"in window||(delete Wd.animationend.animation,delete Wd.animationiteration.animation,delete Wd.animationstart.animation),"TransitionEvent"in window||delete Wd.transitionend.transition);function W0(r){if(_T[r])return _T[r];if(!Wd[r])return r;var o=Wd[r],l;for(l in o)if(o.hasOwnProperty(l)&&l in n4)return _T[r]=o[l];return r}var r4=W0("animationend"),i4=W0("animationiteration"),o4=W0("animationstart"),a4=W0("transitionend"),s4=new Map,dP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pc(r,o){s4.set(r,o),Tf(o,[r])}for(var TT=0;TT<dP.length;TT++){var ST=dP[TT],rH=ST.toLowerCase(),iH=ST[0].toUpperCase()+ST.slice(1);pc(rH,"on"+iH)}pc(r4,"onAnimationEnd");pc(i4,"onAnimationIteration");pc(o4,"onAnimationStart");pc("dblclick","onDoubleClick");pc("focusin","onFocus");pc("focusout","onBlur");pc(a4,"onTransitionEnd");dh("onMouseEnter",["mouseout","mouseover"]);dh("onMouseLeave",["mouseout","mouseover"]);dh("onPointerEnter",["pointerout","pointerover"]);dh("onPointerLeave",["pointerout","pointerover"]);Tf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oH=new Set("cancel close invalid load scroll toggle".split(" ").concat(hg));function hP(r,o,l){var f=r.type||"unknown-event";r.currentTarget=l,rq(f,o,void 0,r),r.currentTarget=null}function u4(r,o){o=(o&4)!==0;for(var l=0;l<r.length;l++){var f=r[l],p=f.event;f=f.listeners;e:{var S=void 0;if(o)for(var b=f.length-1;0<=b;b--){var g=f[b],w=g.instance,F=g.currentTarget;if(g=g.listener,w!==S&&p.isPropagationStopped())break e;hP(p,g,F),S=w}else for(b=0;b<f.length;b++){if(g=f[b],w=g.instance,F=g.currentTarget,g=g.listener,w!==S&&p.isPropagationStopped())break e;hP(p,g,F),S=w}}}if(v0)throw r=bI,v0=!1,bI=null,r}function xi(r,o){var l=o[kI];l===void 0&&(l=o[kI]=new Set);var f=r+"__bubble";l.has(f)||(l4(o,r,2,!1),l.add(f))}function wT(r,o,l){var f=0;o&&(f|=4),l4(l,r,f,o)}var Uy="_reactListening"+Math.random().toString(36).slice(2);function Lg(r){if(!r[Uy]){r[Uy]=!0,mF.forEach(function(l){l!=="selectionchange"&&(oH.has(l)||wT(l,!1,r),wT(l,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Uy]||(o[Uy]=!0,wT("selectionchange",!1,o))}}function l4(r,o,l,f){switch(VF(o)){case 1:var p=Eq;break;case 4:p=_q;break;default:p=Fb}l=p.bind(null,o,l,r),p=void 0,!II||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),f?p!==void 0?r.addEventListener(o,l,{capture:!0,passive:p}):r.addEventListener(o,l,!0):p!==void 0?r.addEventListener(o,l,{passive:p}):r.addEventListener(o,l,!1)}function AT(r,o,l,f,p){var S=f;if(!(o&1)&&!(o&2)&&f!==null)e:for(;;){if(f===null)return;var b=f.tag;if(b===3||b===4){var g=f.stateNode.containerInfo;if(g===p||g.nodeType===8&&g.parentNode===p)break;if(b===4)for(b=f.return;b!==null;){var w=b.tag;if((w===3||w===4)&&(w=b.stateNode.containerInfo,w===p||w.nodeType===8&&w.parentNode===p))return;b=b.return}for(;g!==null;){if(b=af(g),b===null)return;if(w=b.tag,w===5||w===6){f=S=b;continue e}g=g.parentNode}}f=f.return}DF(function(){var F=S,C=Pb(l),y=[];e:{var v=s4.get(r);if(v!==void 0){var D=Bb,m=r;switch(r){case"keypress":if(i0(l)===0)break e;case"keydown":case"keyup":D=Lq;break;case"focusin":m="focus",D=vT;break;case"focusout":m="blur",D=vT;break;case"beforeblur":case"afterblur":D=vT;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=tP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=wq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=Uq;break;case r4:case i4:case o4:D=bq;break;case a4:D=jq;break;case"scroll":D=Tq;break;case"wheel":D=Gq;break;case"copy":case"cut":case"paste":D=Rq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=rP}var T=(o&4)!==0,U=!T&&r==="scroll",x=T?v!==null?v+"Capture":null:v;T=[];for(var _=F,I;_!==null;){I=_;var R=I.stateNode;if(I.tag===5&&R!==null&&(I=R,x!==null&&(R=Ng(_,x),R!=null&&T.push(kg(_,R,I)))),U)break;_=_.return}0<T.length&&(v=new D(v,m,null,l,C),y.push({event:v,listeners:T}))}}if(!(o&7)){e:{if(v=r==="mouseover"||r==="pointerover",D=r==="mouseout"||r==="pointerout",v&&l!==wI&&(m=l.relatedTarget||l.fromElement)&&(af(m)||m[_l]))break e;if((D||v)&&(v=C.window===C?C:(v=C.ownerDocument)?v.defaultView||v.parentWindow:window,D?(m=l.relatedTarget||l.toElement,D=F,m=m?af(m):null,m!==null&&(U=Sf(m),m!==U||m.tag!==5&&m.tag!==6)&&(m=null)):(D=null,m=F),D!==m)){if(T=tP,R="onMouseLeave",x="onMouseEnter",_="mouse",(r==="pointerout"||r==="pointerover")&&(T=rP,R="onPointerLeave",x="onPointerEnter",_="pointer"),U=D==null?v:$d(D),I=m==null?v:$d(m),v=new T(R,_+"leave",D,l,C),v.target=U,v.relatedTarget=I,R=null,af(C)===F&&(T=new T(x,_+"enter",m,l,C),T.target=I,T.relatedTarget=U,R=T),U=R,D&&m)t:{for(T=D,x=m,_=0,I=T;I;I=jd(I))_++;for(I=0,R=x;R;R=jd(R))I++;for(;0<_-I;)T=jd(T),_--;for(;0<I-_;)x=jd(x),I--;for(;_--;){if(T===x||x!==null&&T===x.alternate)break t;T=jd(T),x=jd(x)}T=null}else T=null;D!==null&&pP(y,v,D,T,!1),m!==null&&U!==null&&pP(y,U,m,T,!0)}}e:{if(v=F?$d(F):window,D=v.nodeName&&v.nodeName.toLowerCase(),D==="select"||D==="input"&&v.type==="file")var j=Wq;else if(aP(v))if(QF)j=Jq;else{j=Xq;var z=$q}else(D=v.nodeName)&&D.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(j=Qq);if(j&&(j=j(r,F))){XF(y,j,l,C);break e}z&&z(r,v,F),r==="focusout"&&(z=v._wrapperState)&&z.controlled&&v.type==="number"&&yI(v,"number",v.value)}switch(z=F?$d(F):window,r){case"focusin":(aP(z)||z.contentEditable==="true")&&(Yd=z,xI=F,Tg=null);break;case"focusout":Tg=xI=Yd=null;break;case"mousedown":MI=!0;break;case"contextmenu":case"mouseup":case"dragend":MI=!1,fP(y,l,C);break;case"selectionchange":if(nH)break;case"keydown":case"keyup":fP(y,l,C)}var W;if(Zb)e:{switch(r){case"compositionstart":var X="onCompositionStart";break e;case"compositionend":X="onCompositionEnd";break e;case"compositionupdate":X="onCompositionUpdate";break e}X=void 0}else zd?WF(r,l)&&(X="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(X="onCompositionStart");X&&(YF&&l.locale!=="ko"&&(zd||X!=="onCompositionStart"?X==="onCompositionEnd"&&zd&&(W=zF()):(tc=C,Ub="value"in tc?tc.value:tc.textContent,zd=!0)),z=S0(F,X),0<z.length&&(X=new nP(X,r,null,l,C),y.push({event:X,listeners:z}),W?X.data=W:(W=$F(l),W!==null&&(X.data=W)))),(W=Hq?Kq(r,l):Vq(r,l))&&(F=S0(F,"onBeforeInput"),0<F.length&&(C=new nP("onBeforeInput","beforeinput",null,l,C),y.push({event:C,listeners:F}),C.data=W))}u4(y,o)})}function kg(r,o,l){return{instance:r,listener:o,currentTarget:l}}function S0(r,o){for(var l=o+"Capture",f=[];r!==null;){var p=r,S=p.stateNode;p.tag===5&&S!==null&&(p=S,S=Ng(r,l),S!=null&&f.unshift(kg(r,S,p)),S=Ng(r,o),S!=null&&f.push(kg(r,S,p))),r=r.return}return f}function jd(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function pP(r,o,l,f,p){for(var S=o._reactName,b=[];l!==null&&l!==f;){var g=l,w=g.alternate,F=g.stateNode;if(w!==null&&w===f)break;g.tag===5&&F!==null&&(g=F,p?(w=Ng(l,S),w!=null&&b.unshift(kg(l,w,g))):p||(w=Ng(l,S),w!=null&&b.push(kg(l,w,g)))),l=l.return}b.length!==0&&r.push({event:o,listeners:b})}var aH=/\r\n?/g,sH=/\u0000|\uFFFD/g;function gP(r){return(typeof r=="string"?r:""+r).replace(aH,"\n").replace(sH,"")}function By(r,o,l){if(o=gP(o),gP(r)!==o&&l)throw Error(jn(425))}function w0(){}var DI=null,PI=null;function OI(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var LI=typeof setTimeout=="function"?setTimeout:void 0,uH=typeof clearTimeout=="function"?clearTimeout:void 0,mP=typeof Promise=="function"?Promise:void 0,lH=typeof queueMicrotask=="function"?queueMicrotask:typeof mP<"u"?function(r){return mP.resolve(null).then(r).catch(cH)}:LI;function cH(r){setTimeout(function(){throw r})}function IT(r,o){var l=o,f=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(f===0){r.removeChild(p),Dg(o);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=p}while(l);Dg(o)}function ac(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function vP(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return r;o--}else l==="/$"&&o++}r=r.previousSibling}return null}var wh=Math.random().toString(36).slice(2),xu="__reactFiber$"+wh,Fg="__reactProps$"+wh,_l="__reactContainer$"+wh,kI="__reactEvents$"+wh,fH="__reactListeners$"+wh,dH="__reactHandles$"+wh;function af(r){var o=r[xu];if(o)return o;for(var l=r.parentNode;l;){if(o=l[_l]||l[xu]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(r=vP(r);r!==null;){if(l=r[xu])return l;r=vP(r)}return o}r=l,l=r.parentNode}return null}function Qg(r){return r=r[xu]||r[_l],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function $d(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(jn(33))}function $0(r){return r[Fg]||null}var FI=[],Xd=-1;function gc(r){return{current:r}}function Mi(r){0>Xd||(r.current=FI[Xd],FI[Xd]=null,Xd--)}function bi(r,o){Xd++,FI[Xd]=r.current,r.current=o}var hc={},ea=gc(hc),Ba=gc(!1),pf=hc;function hh(r,o){var l=r.type.contextTypes;if(!l)return hc;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var p={},S;for(S in l)p[S]=o[S];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=p),p}function ja(r){return r=r.childContextTypes,r!=null}function A0(){Mi(Ba),Mi(ea)}function yP(r,o,l){if(ea.current!==hc)throw Error(jn(168));bi(ea,o),bi(Ba,l)}function c4(r,o,l){var f=r.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var p in f)if(!(p in o))throw Error(jn(108,$9(r)||"Unknown",p));return Vi({},l,f)}function I0(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||hc,pf=ea.current,bi(ea,r),bi(Ba,Ba.current),!0}function EP(r,o,l){var f=r.stateNode;if(!f)throw Error(jn(169));l?(r=c4(r,o,pf),f.__reactInternalMemoizedMergedChildContext=r,Mi(Ba),Mi(ea),bi(ea,r)):Mi(Ba),bi(Ba,l)}var pl=null,X0=!1,bT=!1;function f4(r){pl===null?pl=[r]:pl.push(r)}function hH(r){X0=!0,f4(r)}function mc(){if(!bT&&pl!==null){bT=!0;var r=0,o=di;try{var l=pl;for(di=1;r<l.length;r++){var f=l[r];do f=f(!0);while(f!==null)}pl=null,X0=!1}catch(p){throw pl!==null&&(pl=pl.slice(r+1)),kF(Ob,mc),p}finally{di=o,bT=!1}}return null}var Qd=[],Jd=0,b0=null,C0=0,Is=[],bs=0,gf=null,gl=1,ml="";function tf(r,o){Qd[Jd++]=C0,Qd[Jd++]=b0,b0=r,C0=o}function d4(r,o,l){Is[bs++]=gl,Is[bs++]=ml,Is[bs++]=gf,gf=r;var f=gl;r=ml;var p=32-au(f)-1;f&=~(1<<p),l+=1;var S=32-au(o)+p;if(30<S){var b=p-p%5;S=(f&(1<<b)-1).toString(32),f>>=b,p-=b,gl=1<<32-au(o)+p|l<<p|f,ml=S+r}else gl=1<<S|l<<p|f,ml=r}function qb(r){r.return!==null&&(tf(r,1),d4(r,1,0))}function Hb(r){for(;r===b0;)b0=Qd[--Jd],Qd[Jd]=null,C0=Qd[--Jd],Qd[Jd]=null;for(;r===gf;)gf=Is[--bs],Is[bs]=null,ml=Is[--bs],Is[bs]=null,gl=Is[--bs],Is[bs]=null}var ds=null,ls=null,Ui=!1,nu=null;function h4(r,o){var l=Rs(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=r,o=r.deletions,o===null?(r.deletions=[l],r.flags|=16):o.push(l)}function _P(r,o){switch(r.tag){case 5:var l=r.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,ds=r,ls=ac(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,ds=r,ls=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=gf!==null?{id:gl,overflow:ml}:null,r.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Rs(18,null,null,0),l.stateNode=o,l.return=r,r.child=l,ds=r,ls=null,!0):!1;default:return!1}}function UI(r){return(r.mode&1)!==0&&(r.flags&128)===0}function BI(r){if(Ui){var o=ls;if(o){var l=o;if(!_P(r,o)){if(UI(r))throw Error(jn(418));o=ac(l.nextSibling);var f=ds;o&&_P(r,o)?h4(f,l):(r.flags=r.flags&-4097|2,Ui=!1,ds=r)}}else{if(UI(r))throw Error(jn(418));r.flags=r.flags&-4097|2,Ui=!1,ds=r}}}function TP(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;ds=r}function jy(r){if(r!==ds)return!1;if(!Ui)return TP(r),Ui=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!OI(r.type,r.memoizedProps)),o&&(o=ls)){if(UI(r))throw p4(),Error(jn(418));for(;o;)h4(r,o),o=ac(o.nextSibling)}if(TP(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(jn(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(o===0){ls=ac(r.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}r=r.nextSibling}ls=null}}else ls=ds?ac(r.stateNode.nextSibling):null;return!0}function p4(){for(var r=ls;r;)r=ac(r.nextSibling)}function ph(){ls=ds=null,Ui=!1}function Kb(r){nu===null?nu=[r]:nu.push(r)}var pH=wl.ReactCurrentBatchConfig;function ng(r,o,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(jn(309));var f=l.stateNode}if(!f)throw Error(jn(147,r));var p=f,S=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===S?o.ref:(o=function(b){var g=p.refs;b===null?delete g[S]:g[S]=b},o._stringRef=S,o)}if(typeof r!="string")throw Error(jn(284));if(!l._owner)throw Error(jn(290,r))}return r}function Zy(r,o){throw r=Object.prototype.toString.call(o),Error(jn(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function SP(r){var o=r._init;return o(r._payload)}function g4(r){function o(x,_){if(r){var I=x.deletions;I===null?(x.deletions=[_],x.flags|=16):I.push(_)}}function l(x,_){if(!r)return null;for(;_!==null;)o(x,_),_=_.sibling;return null}function f(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function p(x,_){return x=cc(x,_),x.index=0,x.sibling=null,x}function S(x,_,I){return x.index=I,r?(I=x.alternate,I!==null?(I=I.index,I<_?(x.flags|=2,_):I):(x.flags|=2,_)):(x.flags|=1048576,_)}function b(x){return r&&x.alternate===null&&(x.flags|=2),x}function g(x,_,I,R){return _===null||_.tag!==6?(_=PT(I,x.mode,R),_.return=x,_):(_=p(_,I),_.return=x,_)}function w(x,_,I,R){var j=I.type;return j===Vd?C(x,_,I.props.children,R,I.key):_!==null&&(_.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Xl&&SP(j)===_.type)?(R=p(_,I.props),R.ref=ng(x,_,I),R.return=x,R):(R=f0(I.type,I.key,I.props,null,x.mode,R),R.ref=ng(x,_,I),R.return=x,R)}function F(x,_,I,R){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=OT(I,x.mode,R),_.return=x,_):(_=p(_,I.children||[]),_.return=x,_)}function C(x,_,I,R,j){return _===null||_.tag!==7?(_=ff(I,x.mode,R,j),_.return=x,_):(_=p(_,I),_.return=x,_)}function y(x,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=PT(""+_,x.mode,I),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xy:return I=f0(_.type,_.key,_.props,null,x.mode,I),I.ref=ng(x,null,_),I.return=x,I;case Kd:return _=OT(_,x.mode,I),_.return=x,_;case Xl:var R=_._init;return y(x,R(_._payload),I)}if(fg(_)||Xp(_))return _=ff(_,x.mode,I,null),_.return=x,_;Zy(x,_)}return null}function v(x,_,I,R){var j=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return j!==null?null:g(x,_,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case xy:return I.key===j?w(x,_,I,R):null;case Kd:return I.key===j?F(x,_,I,R):null;case Xl:return j=I._init,v(x,_,j(I._payload),R)}if(fg(I)||Xp(I))return j!==null?null:C(x,_,I,R,null);Zy(x,I)}return null}function D(x,_,I,R,j){if(typeof R=="string"&&R!==""||typeof R=="number")return x=x.get(I)||null,g(_,x,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case xy:return x=x.get(R.key===null?I:R.key)||null,w(_,x,R,j);case Kd:return x=x.get(R.key===null?I:R.key)||null,F(_,x,R,j);case Xl:var z=R._init;return D(x,_,I,z(R._payload),j)}if(fg(R)||Xp(R))return x=x.get(I)||null,C(_,x,R,j,null);Zy(_,R)}return null}function m(x,_,I,R){for(var j=null,z=null,W=_,X=_=0,le=null;W!==null&&X<I.length;X++){W.index>X?(le=W,W=null):le=W.sibling;var N=v(x,W,I[X],R);if(N===null){W===null&&(W=le);break}r&&W&&N.alternate===null&&o(x,W),_=S(N,_,X),z===null?j=N:z.sibling=N,z=N,W=le}if(X===I.length)return l(x,W),Ui&&tf(x,X),j;if(W===null){for(;X<I.length;X++)W=y(x,I[X],R),W!==null&&(_=S(W,_,X),z===null?j=W:z.sibling=W,z=W);return Ui&&tf(x,X),j}for(W=f(x,W);X<I.length;X++)le=D(W,x,X,I[X],R),le!==null&&(r&&le.alternate!==null&&W.delete(le.key===null?X:le.key),_=S(le,_,X),z===null?j=le:z.sibling=le,z=le);return r&&W.forEach(function($){return o(x,$)}),Ui&&tf(x,X),j}function T(x,_,I,R){var j=Xp(I);if(typeof j!="function")throw Error(jn(150));if(I=j.call(I),I==null)throw Error(jn(151));for(var z=j=null,W=_,X=_=0,le=null,N=I.next();W!==null&&!N.done;X++,N=I.next()){W.index>X?(le=W,W=null):le=W.sibling;var $=v(x,W,N.value,R);if($===null){W===null&&(W=le);break}r&&W&&$.alternate===null&&o(x,W),_=S($,_,X),z===null?j=$:z.sibling=$,z=$,W=le}if(N.done)return l(x,W),Ui&&tf(x,X),j;if(W===null){for(;!N.done;X++,N=I.next())N=y(x,N.value,R),N!==null&&(_=S(N,_,X),z===null?j=N:z.sibling=N,z=N);return Ui&&tf(x,X),j}for(W=f(x,W);!N.done;X++,N=I.next())N=D(W,x,X,N.value,R),N!==null&&(r&&N.alternate!==null&&W.delete(N.key===null?X:N.key),_=S(N,_,X),z===null?j=N:z.sibling=N,z=N);return r&&W.forEach(function(fe){return o(x,fe)}),Ui&&tf(x,X),j}function U(x,_,I,R){if(typeof I=="object"&&I!==null&&I.type===Vd&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case xy:e:{for(var j=I.key,z=_;z!==null;){if(z.key===j){if(j=I.type,j===Vd){if(z.tag===7){l(x,z.sibling),_=p(z,I.props.children),_.return=x,x=_;break e}}else if(z.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Xl&&SP(j)===z.type){l(x,z.sibling),_=p(z,I.props),_.ref=ng(x,z,I),_.return=x,x=_;break e}l(x,z);break}else o(x,z);z=z.sibling}I.type===Vd?(_=ff(I.props.children,x.mode,R,I.key),_.return=x,x=_):(R=f0(I.type,I.key,I.props,null,x.mode,R),R.ref=ng(x,_,I),R.return=x,x=R)}return b(x);case Kd:e:{for(z=I.key;_!==null;){if(_.key===z)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){l(x,_.sibling),_=p(_,I.children||[]),_.return=x,x=_;break e}else{l(x,_);break}else o(x,_);_=_.sibling}_=OT(I,x.mode,R),_.return=x,x=_}return b(x);case Xl:return z=I._init,U(x,_,z(I._payload),R)}if(fg(I))return m(x,_,I,R);if(Xp(I))return T(x,_,I,R);Zy(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(l(x,_.sibling),_=p(_,I),_.return=x,x=_):(l(x,_),_=PT(I,x.mode,R),_.return=x,x=_),b(x)):l(x,_)}return U}var gh=g4(!0),m4=g4(!1),R0=gc(null),N0=null,eh=null,Vb=null;function zb(){Vb=eh=N0=null}function Yb(r){var o=R0.current;Mi(R0),r._currentValue=o}function jI(r,o,l){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===l)break;r=r.return}}function ch(r,o){N0=r,Vb=eh=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&o&&(Ua=!0),r.firstContext=null)}function xs(r){var o=r._currentValue;if(Vb!==r)if(r={context:r,memoizedValue:o,next:null},eh===null){if(N0===null)throw Error(jn(308));eh=r,N0.dependencies={lanes:0,firstContext:r}}else eh=eh.next=r;return o}var sf=null;function Wb(r){sf===null?sf=[r]:sf.push(r)}function v4(r,o,l,f){var p=o.interleaved;return p===null?(l.next=l,Wb(o)):(l.next=p.next,p.next=l),o.interleaved=l,Tl(r,f)}function Tl(r,o){r.lanes|=o;var l=r.alternate;for(l!==null&&(l.lanes|=o),l=r,r=r.return;r!==null;)r.childLanes|=o,l=r.alternate,l!==null&&(l.childLanes|=o),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Ql=!1;function $b(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function y4(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function vl(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function sc(r,o,l){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,$r&2){var p=f.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),f.pending=o,Tl(r,l)}return p=f.interleaved,p===null?(o.next=o,Wb(f)):(o.next=p.next,p.next=o),f.interleaved=o,Tl(r,l)}function o0(r,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var f=o.lanes;f&=r.pendingLanes,l|=f,o.lanes=l,Lb(r,l)}}function wP(r,o){var l=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var p=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var b={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};S===null?p=S=b:S=S.next=b,l=l.next}while(l!==null);S===null?p=S=o:S=S.next=o}else p=S=o;l={baseState:f.baseState,firstBaseUpdate:p,lastBaseUpdate:S,shared:f.shared,effects:f.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=o:r.next=o,l.lastBaseUpdate=o}function x0(r,o,l,f){var p=r.updateQueue;Ql=!1;var S=p.firstBaseUpdate,b=p.lastBaseUpdate,g=p.shared.pending;if(g!==null){p.shared.pending=null;var w=g,F=w.next;w.next=null,b===null?S=F:b.next=F,b=w;var C=r.alternate;C!==null&&(C=C.updateQueue,g=C.lastBaseUpdate,g!==b&&(g===null?C.firstBaseUpdate=F:g.next=F,C.lastBaseUpdate=w))}if(S!==null){var y=p.baseState;b=0,C=F=w=null,g=S;do{var v=g.lane,D=g.eventTime;if((f&v)===v){C!==null&&(C=C.next={eventTime:D,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var m=r,T=g;switch(v=o,D=l,T.tag){case 1:if(m=T.payload,typeof m=="function"){y=m.call(D,y,v);break e}y=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=T.payload,v=typeof m=="function"?m.call(D,y,v):m,v==null)break e;y=Vi({},y,v);break e;case 2:Ql=!0}}g.callback!==null&&g.lane!==0&&(r.flags|=64,v=p.effects,v===null?p.effects=[g]:v.push(g))}else D={eventTime:D,lane:v,tag:g.tag,payload:g.payload,callback:g.callback,next:null},C===null?(F=C=D,w=y):C=C.next=D,b|=v;if(g=g.next,g===null){if(g=p.shared.pending,g===null)break;v=g,g=v.next,v.next=null,p.lastBaseUpdate=v,p.shared.pending=null}}while(!0);if(C===null&&(w=y),p.baseState=w,p.firstBaseUpdate=F,p.lastBaseUpdate=C,o=p.shared.interleaved,o!==null){p=o;do b|=p.lane,p=p.next;while(p!==o)}else S===null&&(p.shared.lanes=0);vf|=b,r.lanes=b,r.memoizedState=y}}function AP(r,o,l){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var f=r[o],p=f.callback;if(p!==null){if(f.callback=null,f=l,typeof p!="function")throw Error(jn(191,p));p.call(f)}}}var Jg={},Du=gc(Jg),Ug=gc(Jg),Bg=gc(Jg);function uf(r){if(r===Jg)throw Error(jn(174));return r}function Xb(r,o){switch(bi(Bg,o),bi(Ug,r),bi(Du,Jg),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:_I(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=_I(o,r)}Mi(Du),bi(Du,o)}function mh(){Mi(Du),Mi(Ug),Mi(Bg)}function E4(r){uf(Bg.current);var o=uf(Du.current),l=_I(o,r.type);o!==l&&(bi(Ug,r),bi(Du,l))}function Qb(r){Ug.current===r&&(Mi(Du),Mi(Ug))}var qi=gc(0);function M0(r){for(var o=r;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var CT=[];function Jb(){for(var r=0;r<CT.length;r++)CT[r]._workInProgressVersionPrimary=null;CT.length=0}var a0=wl.ReactCurrentDispatcher,RT=wl.ReactCurrentBatchConfig,mf=0,Ki=null,So=null,Mo=null,D0=!1,Sg=!1,jg=0,gH=0;function Wo(){throw Error(jn(321))}function eC(r,o){if(o===null)return!1;for(var l=0;l<o.length&&l<r.length;l++)if(!uu(r[l],o[l]))return!1;return!0}function tC(r,o,l,f,p,S){if(mf=S,Ki=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,a0.current=r===null||r.memoizedState===null?EH:_H,r=l(f,p),Sg){S=0;do{if(Sg=!1,jg=0,25<=S)throw Error(jn(301));S+=1,Mo=So=null,o.updateQueue=null,a0.current=TH,r=l(f,p)}while(Sg)}if(a0.current=P0,o=So!==null&&So.next!==null,mf=0,Mo=So=Ki=null,D0=!1,o)throw Error(jn(300));return r}function nC(){var r=jg!==0;return jg=0,r}function Nu(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mo===null?Ki.memoizedState=Mo=r:Mo=Mo.next=r,Mo}function Ms(){if(So===null){var r=Ki.alternate;r=r!==null?r.memoizedState:null}else r=So.next;var o=Mo===null?Ki.memoizedState:Mo.next;if(o!==null)Mo=o,So=r;else{if(r===null)throw Error(jn(310));So=r,r={memoizedState:So.memoizedState,baseState:So.baseState,baseQueue:So.baseQueue,queue:So.queue,next:null},Mo===null?Ki.memoizedState=Mo=r:Mo=Mo.next=r}return Mo}function Zg(r,o){return typeof o=="function"?o(r):o}function NT(r){var o=Ms(),l=o.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=r;var f=So,p=f.baseQueue,S=l.pending;if(S!==null){if(p!==null){var b=p.next;p.next=S.next,S.next=b}f.baseQueue=p=S,l.pending=null}if(p!==null){S=p.next,f=f.baseState;var g=b=null,w=null,F=S;do{var C=F.lane;if((mf&C)===C)w!==null&&(w=w.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),f=F.hasEagerState?F.eagerState:r(f,F.action);else{var y={lane:C,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};w===null?(g=w=y,b=f):w=w.next=y,Ki.lanes|=C,vf|=C}F=F.next}while(F!==null&&F!==S);w===null?b=f:w.next=g,uu(f,o.memoizedState)||(Ua=!0),o.memoizedState=f,o.baseState=b,o.baseQueue=w,l.lastRenderedState=f}if(r=l.interleaved,r!==null){p=r;do S=p.lane,Ki.lanes|=S,vf|=S,p=p.next;while(p!==r)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function xT(r){var o=Ms(),l=o.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=r;var f=l.dispatch,p=l.pending,S=o.memoizedState;if(p!==null){l.pending=null;var b=p=p.next;do S=r(S,b.action),b=b.next;while(b!==p);uu(S,o.memoizedState)||(Ua=!0),o.memoizedState=S,o.baseQueue===null&&(o.baseState=S),l.lastRenderedState=S}return[S,f]}function _4(){}function T4(r,o){var l=Ki,f=Ms(),p=o(),S=!uu(f.memoizedState,p);if(S&&(f.memoizedState=p,Ua=!0),f=f.queue,rC(A4.bind(null,l,f,r),[r]),f.getSnapshot!==o||S||Mo!==null&&Mo.memoizedState.tag&1){if(l.flags|=2048,Gg(9,w4.bind(null,l,f,p,o),void 0,null),Do===null)throw Error(jn(349));mf&30||S4(l,o,p)}return p}function S4(r,o,l){r.flags|=16384,r={getSnapshot:o,value:l},o=Ki.updateQueue,o===null?(o={lastEffect:null,stores:null},Ki.updateQueue=o,o.stores=[r]):(l=o.stores,l===null?o.stores=[r]:l.push(r))}function w4(r,o,l,f){o.value=l,o.getSnapshot=f,I4(o)&&b4(r)}function A4(r,o,l){return l(function(){I4(o)&&b4(r)})}function I4(r){var o=r.getSnapshot;r=r.value;try{var l=o();return!uu(r,l)}catch(f){return!0}}function b4(r){var o=Tl(r,1);o!==null&&su(o,r,1,-1)}function IP(r){var o=Nu();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zg,lastRenderedState:r},o.queue=r,r=r.dispatch=yH.bind(null,Ki,r),[o.memoizedState,r]}function Gg(r,o,l,f){return r={tag:r,create:o,destroy:l,deps:f,next:null},o=Ki.updateQueue,o===null?(o={lastEffect:null,stores:null},Ki.updateQueue=o,o.lastEffect=r.next=r):(l=o.lastEffect,l===null?o.lastEffect=r.next=r:(f=l.next,l.next=r,r.next=f,o.lastEffect=r)),r}function C4(){return Ms().memoizedState}function s0(r,o,l,f){var p=Nu();Ki.flags|=r,p.memoizedState=Gg(1|o,l,void 0,f===void 0?null:f)}function Q0(r,o,l,f){var p=Ms();f=f===void 0?null:f;var S=void 0;if(So!==null){var b=So.memoizedState;if(S=b.destroy,f!==null&&eC(f,b.deps)){p.memoizedState=Gg(o,l,S,f);return}}Ki.flags|=r,p.memoizedState=Gg(1|o,l,S,f)}function bP(r,o){return s0(8390656,8,r,o)}function rC(r,o){return Q0(2048,8,r,o)}function R4(r,o){return Q0(4,2,r,o)}function N4(r,o){return Q0(4,4,r,o)}function x4(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function M4(r,o,l){return l=l!=null?l.concat([r]):null,Q0(4,4,x4.bind(null,o,r),l)}function iC(){}function D4(r,o){var l=Ms();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&eC(o,f[1])?f[0]:(l.memoizedState=[r,o],r)}function P4(r,o){var l=Ms();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&eC(o,f[1])?f[0]:(r=r(),l.memoizedState=[r,o],r)}function O4(r,o,l){return mf&21?(uu(l,o)||(l=BF(),Ki.lanes|=l,vf|=l,r.baseState=!0),o):(r.baseState&&(r.baseState=!1,Ua=!0),r.memoizedState=l)}function mH(r,o){var l=di;di=l!==0&&4>l?l:4,r(!0);var f=RT.transition;RT.transition={};try{r(!1),o()}finally{di=l,RT.transition=f}}function L4(){return Ms().memoizedState}function vH(r,o,l){var f=lc(r);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},k4(r))F4(o,l);else if(l=v4(r,o,l,f),l!==null){var p=Ta();su(l,r,f,p),U4(l,o,f)}}function yH(r,o,l){var f=lc(r),p={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(k4(r))F4(o,p);else{var S=r.alternate;if(r.lanes===0&&(S===null||S.lanes===0)&&(S=o.lastRenderedReducer,S!==null))try{var b=o.lastRenderedState,g=S(b,l);if(p.hasEagerState=!0,p.eagerState=g,uu(g,b)){var w=o.interleaved;w===null?(p.next=p,Wb(o)):(p.next=w.next,w.next=p),o.interleaved=p;return}}catch(F){}finally{}l=v4(r,o,p,f),l!==null&&(p=Ta(),su(l,r,f,p),U4(l,o,f))}}function k4(r){var o=r.alternate;return r===Ki||o!==null&&o===Ki}function F4(r,o){Sg=D0=!0;var l=r.pending;l===null?o.next=o:(o.next=l.next,l.next=o),r.pending=o}function U4(r,o,l){if(l&4194240){var f=o.lanes;f&=r.pendingLanes,l|=f,o.lanes=l,Lb(r,l)}}var P0={readContext:xs,useCallback:Wo,useContext:Wo,useEffect:Wo,useImperativeHandle:Wo,useInsertionEffect:Wo,useLayoutEffect:Wo,useMemo:Wo,useReducer:Wo,useRef:Wo,useState:Wo,useDebugValue:Wo,useDeferredValue:Wo,useTransition:Wo,useMutableSource:Wo,useSyncExternalStore:Wo,useId:Wo,unstable_isNewReconciler:!1},EH={readContext:xs,useCallback:function(r,o){return Nu().memoizedState=[r,o===void 0?null:o],r},useContext:xs,useEffect:bP,useImperativeHandle:function(r,o,l){return l=l!=null?l.concat([r]):null,s0(4194308,4,x4.bind(null,o,r),l)},useLayoutEffect:function(r,o){return s0(4194308,4,r,o)},useInsertionEffect:function(r,o){return s0(4,2,r,o)},useMemo:function(r,o){var l=Nu();return o=o===void 0?null:o,r=r(),l.memoizedState=[r,o],r},useReducer:function(r,o,l){var f=Nu();return o=l!==void 0?l(o):o,f.memoizedState=f.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},f.queue=r,r=r.dispatch=vH.bind(null,Ki,r),[f.memoizedState,r]},useRef:function(r){var o=Nu();return r={current:r},o.memoizedState=r},useState:IP,useDebugValue:iC,useDeferredValue:function(r){return Nu().memoizedState=r},useTransition:function(){var r=IP(!1),o=r[0];return r=mH.bind(null,r[1]),Nu().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,l){var f=Ki,p=Nu();if(Ui){if(l===void 0)throw Error(jn(407));l=l()}else{if(l=o(),Do===null)throw Error(jn(349));mf&30||S4(f,o,l)}p.memoizedState=l;var S={value:l,getSnapshot:o};return p.queue=S,bP(A4.bind(null,f,S,r),[r]),f.flags|=2048,Gg(9,w4.bind(null,f,S,l,o),void 0,null),l},useId:function(){var r=Nu(),o=Do.identifierPrefix;if(Ui){var l=ml,f=gl;l=(f&~(1<<32-au(f)-1)).toString(32)+l,o=":"+o+"R"+l,l=jg++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=gH++,o=":"+o+"r"+l.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},_H={readContext:xs,useCallback:D4,useContext:xs,useEffect:rC,useImperativeHandle:M4,useInsertionEffect:R4,useLayoutEffect:N4,useMemo:P4,useReducer:NT,useRef:C4,useState:function(){return NT(Zg)},useDebugValue:iC,useDeferredValue:function(r){var o=Ms();return O4(o,So.memoizedState,r)},useTransition:function(){var r=NT(Zg)[0],o=Ms().memoizedState;return[r,o]},useMutableSource:_4,useSyncExternalStore:T4,useId:L4,unstable_isNewReconciler:!1},TH={readContext:xs,useCallback:D4,useContext:xs,useEffect:rC,useImperativeHandle:M4,useInsertionEffect:R4,useLayoutEffect:N4,useMemo:P4,useReducer:xT,useRef:C4,useState:function(){return xT(Zg)},useDebugValue:iC,useDeferredValue:function(r){var o=Ms();return So===null?o.memoizedState=r:O4(o,So.memoizedState,r)},useTransition:function(){var r=xT(Zg)[0],o=Ms().memoizedState;return[r,o]},useMutableSource:_4,useSyncExternalStore:T4,useId:L4,unstable_isNewReconciler:!1};function eu(r,o){if(r&&r.defaultProps){o=Vi({},o),r=r.defaultProps;for(var l in r)o[l]===void 0&&(o[l]=r[l]);return o}return o}function ZI(r,o,l,f){o=r.memoizedState,l=l(f,o),l=l==null?o:Vi({},o,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var J0={isMounted:function(r){return(r=r._reactInternals)?Sf(r)===r:!1},enqueueSetState:function(r,o,l){r=r._reactInternals;var f=Ta(),p=lc(r),S=vl(f,p);S.payload=o,l!=null&&(S.callback=l),o=sc(r,S,p),o!==null&&(su(o,r,p,f),o0(o,r,p))},enqueueReplaceState:function(r,o,l){r=r._reactInternals;var f=Ta(),p=lc(r),S=vl(f,p);S.tag=1,S.payload=o,l!=null&&(S.callback=l),o=sc(r,S,p),o!==null&&(su(o,r,p,f),o0(o,r,p))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var l=Ta(),f=lc(r),p=vl(l,f);p.tag=2,o!=null&&(p.callback=o),o=sc(r,p,f),o!==null&&(su(o,r,f,l),o0(o,r,f))}};function CP(r,o,l,f,p,S,b){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,S,b):o.prototype&&o.prototype.isPureReactComponent?!Og(l,f)||!Og(p,S):!0}function B4(r,o,l){var f=!1,p=hc,S=o.contextType;return typeof S=="object"&&S!==null?S=xs(S):(p=ja(o)?pf:ea.current,f=o.contextTypes,S=(f=f!=null)?hh(r,p):hc),o=new o(l,S),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=J0,r.stateNode=o,o._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=S),o}function RP(r,o,l,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==r&&J0.enqueueReplaceState(o,o.state,null)}function GI(r,o,l,f){var p=r.stateNode;p.props=l,p.state=r.memoizedState,p.refs={},$b(r);var S=o.contextType;typeof S=="object"&&S!==null?p.context=xs(S):(S=ja(o)?pf:ea.current,p.context=hh(r,S)),p.state=r.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(ZI(r,o,S,l),p.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&J0.enqueueReplaceState(p,p.state,null),x0(r,l,p,f),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function vh(r,o){try{var l="",f=o;do l+=W9(f),f=f.return;while(f);var p=l}catch(S){p="\nError generating stack: "+S.message+"\n"+S.stack}return{value:r,source:o,stack:p,digest:null}}function MT(r,o,l){return{value:r,source:null,stack:l!=null?l:null,digest:o!=null?o:null}}function qI(r,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var SH=typeof WeakMap=="function"?WeakMap:Map;function j4(r,o,l){l=vl(-1,l),l.tag=3,l.payload={element:null};var f=o.value;return l.callback=function(){L0||(L0=!0,JI=f),qI(r,o)},l}function Z4(r,o,l){l=vl(-1,l),l.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var p=o.value;l.payload=function(){return f(p)},l.callback=function(){qI(r,o)}}var S=r.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(l.callback=function(){qI(r,o),typeof f!="function"&&(uc===null?uc=new Set([this]):uc.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})}),l}function NP(r,o,l){var f=r.pingCache;if(f===null){f=r.pingCache=new SH;var p=new Set;f.set(o,p)}else p=f.get(o),p===void 0&&(p=new Set,f.set(o,p));p.has(l)||(p.add(l),r=kH.bind(null,r,o,l),o.then(r,r))}function xP(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function MP(r,o,l,f,p){return r.mode&1?(r.flags|=65536,r.lanes=p,r):(r===o?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=vl(-1,1),o.tag=2,sc(l,o,1))),l.lanes|=1),r)}var wH=wl.ReactCurrentOwner,Ua=!1;function _a(r,o,l,f){o.child=r===null?m4(o,null,l,f):gh(o,r.child,l,f)}function DP(r,o,l,f,p){l=l.render;var S=o.ref;return ch(o,p),f=tC(r,o,l,f,S,p),l=nC(),r!==null&&!Ua?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~p,Sl(r,o,p)):(Ui&&l&&qb(o),o.flags|=1,_a(r,o,f,p),o.child)}function PP(r,o,l,f,p){if(r===null){var S=l.type;return typeof S=="function"&&!dC(S)&&S.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=S,G4(r,o,S,f,p)):(r=f0(l.type,null,f,o,o.mode,p),r.ref=o.ref,r.return=o,o.child=r)}if(S=r.child,!(r.lanes&p)){var b=S.memoizedProps;if(l=l.compare,l=l!==null?l:Og,l(b,f)&&r.ref===o.ref)return Sl(r,o,p)}return o.flags|=1,r=cc(S,f),r.ref=o.ref,r.return=o,o.child=r}function G4(r,o,l,f,p){if(r!==null){var S=r.memoizedProps;if(Og(S,f)&&r.ref===o.ref)if(Ua=!1,o.pendingProps=f=S,(r.lanes&p)!==0)r.flags&131072&&(Ua=!0);else return o.lanes=r.lanes,Sl(r,o,p)}return HI(r,o,l,f,p)}function q4(r,o,l){var f=o.pendingProps,p=f.children,S=r!==null?r.memoizedState:null;if(f.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},bi(nh,us),us|=l;else{if(!(l&1073741824))return r=S!==null?S.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,bi(nh,us),us|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=S!==null?S.baseLanes:l,bi(nh,us),us|=f}else S!==null?(f=S.baseLanes|l,o.memoizedState=null):f=l,bi(nh,us),us|=f;return _a(r,o,p,l),o.child}function H4(r,o){var l=o.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function HI(r,o,l,f,p){var S=ja(l)?pf:ea.current;return S=hh(o,S),ch(o,p),l=tC(r,o,l,f,S,p),f=nC(),r!==null&&!Ua?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~p,Sl(r,o,p)):(Ui&&f&&qb(o),o.flags|=1,_a(r,o,l,p),o.child)}function OP(r,o,l,f,p){if(ja(l)){var S=!0;I0(o)}else S=!1;if(ch(o,p),o.stateNode===null)u0(r,o),B4(o,l,f),GI(o,l,f,p),f=!0;else if(r===null){var b=o.stateNode,g=o.memoizedProps;b.props=g;var w=b.context,F=l.contextType;typeof F=="object"&&F!==null?F=xs(F):(F=ja(l)?pf:ea.current,F=hh(o,F));var C=l.getDerivedStateFromProps,y=typeof C=="function"||typeof b.getSnapshotBeforeUpdate=="function";y||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(g!==f||w!==F)&&RP(o,b,f,F),Ql=!1;var v=o.memoizedState;b.state=v,x0(o,f,b,p),w=o.memoizedState,g!==f||v!==w||Ba.current||Ql?(typeof C=="function"&&(ZI(o,l,C,f),w=o.memoizedState),(g=Ql||CP(o,l,g,f,v,w,F))?(y||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=w),b.props=f,b.state=w,b.context=F,f=g):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{b=o.stateNode,y4(r,o),g=o.memoizedProps,F=o.type===o.elementType?g:eu(o.type,g),b.props=F,y=o.pendingProps,v=b.context,w=l.contextType,typeof w=="object"&&w!==null?w=xs(w):(w=ja(l)?pf:ea.current,w=hh(o,w));var D=l.getDerivedStateFromProps;(C=typeof D=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(g!==y||v!==w)&&RP(o,b,f,w),Ql=!1,v=o.memoizedState,b.state=v,x0(o,f,b,p);var m=o.memoizedState;g!==y||v!==m||Ba.current||Ql?(typeof D=="function"&&(ZI(o,l,D,f),m=o.memoizedState),(F=Ql||CP(o,l,F,f,v,m,w)||!1)?(C||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,m,w),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,m,w)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||g===r.memoizedProps&&v===r.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||g===r.memoizedProps&&v===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=m),b.props=f,b.state=m,b.context=w,f=F):(typeof b.componentDidUpdate!="function"||g===r.memoizedProps&&v===r.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||g===r.memoizedProps&&v===r.memoizedState||(o.flags|=1024),f=!1)}return KI(r,o,l,f,S,p)}function KI(r,o,l,f,p,S){H4(r,o);var b=(o.flags&128)!==0;if(!f&&!b)return p&&EP(o,l,!1),Sl(r,o,S);f=o.stateNode,wH.current=o;var g=b&&typeof l.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,r!==null&&b?(o.child=gh(o,r.child,null,S),o.child=gh(o,null,g,S)):_a(r,o,g,S),o.memoizedState=f.state,p&&EP(o,l,!0),o.child}function K4(r){var o=r.stateNode;o.pendingContext?yP(r,o.pendingContext,o.pendingContext!==o.context):o.context&&yP(r,o.context,!1),Xb(r,o.containerInfo)}function LP(r,o,l,f,p){return ph(),Kb(p),o.flags|=256,_a(r,o,l,f),o.child}var VI={dehydrated:null,treeContext:null,retryLane:0};function zI(r){return{baseLanes:r,cachePool:null,transitions:null}}function V4(r,o,l){var f=o.pendingProps,p=qi.current,S=!1,b=(o.flags&128)!==0,g;if((g=b)||(g=r!==null&&r.memoizedState===null?!1:(p&2)!==0),g?(S=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),bi(qi,p&1),r===null)return BI(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(o.mode&1?r.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(b=f.children,r=f.fallback,S?(f=o.mode,S=o.child,b={mode:"hidden",children:b},!(f&1)&&S!==null?(S.childLanes=0,S.pendingProps=b):S=nE(b,f,0,null),r=ff(r,f,l,null),S.return=o,r.return=o,S.sibling=r,o.child=S,o.child.memoizedState=zI(l),o.memoizedState=VI,r):oC(o,b));if(p=r.memoizedState,p!==null&&(g=p.dehydrated,g!==null))return AH(r,o,b,f,g,p,l);if(S){S=f.fallback,b=o.mode,p=r.child,g=p.sibling;var w={mode:"hidden",children:f.children};return!(b&1)&&o.child!==p?(f=o.child,f.childLanes=0,f.pendingProps=w,o.deletions=null):(f=cc(p,w),f.subtreeFlags=p.subtreeFlags&14680064),g!==null?S=cc(g,S):(S=ff(S,b,l,null),S.flags|=2),S.return=o,f.return=o,f.sibling=S,o.child=f,f=S,S=o.child,b=r.child.memoizedState,b=b===null?zI(l):{baseLanes:b.baseLanes|l,cachePool:null,transitions:b.transitions},S.memoizedState=b,S.childLanes=r.childLanes&~l,o.memoizedState=VI,f}return S=r.child,r=S.sibling,f=cc(S,{mode:"visible",children:f.children}),!(o.mode&1)&&(f.lanes=l),f.return=o,f.sibling=null,r!==null&&(l=o.deletions,l===null?(o.deletions=[r],o.flags|=16):l.push(r)),o.child=f,o.memoizedState=null,f}function oC(r,o){return o=nE({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function Gy(r,o,l,f){return f!==null&&Kb(f),gh(o,r.child,null,l),r=oC(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function AH(r,o,l,f,p,S,b){if(l)return o.flags&256?(o.flags&=-257,f=MT(Error(jn(422))),Gy(r,o,b,f)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(S=f.fallback,p=o.mode,f=nE({mode:"visible",children:f.children},p,0,null),S=ff(S,p,b,null),S.flags|=2,f.return=o,S.return=o,f.sibling=S,o.child=f,o.mode&1&&gh(o,r.child,null,b),o.child.memoizedState=zI(b),o.memoizedState=VI,S);if(!(o.mode&1))return Gy(r,o,b,null);if(p.data==="$!"){if(f=p.nextSibling&&p.nextSibling.dataset,f)var g=f.dgst;return f=g,S=Error(jn(419)),f=MT(S,f,void 0),Gy(r,o,b,f)}if(g=(b&r.childLanes)!==0,Ua||g){if(f=Do,f!==null){switch(b&-b){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(f.suspendedLanes|b)?0:p,p!==0&&p!==S.retryLane&&(S.retryLane=p,Tl(r,p),su(f,r,p,-1))}return fC(),f=MT(Error(jn(421))),Gy(r,o,b,f)}return p.data==="$?"?(o.flags|=128,o.child=r.child,o=FH.bind(null,r),p._reactRetry=o,null):(r=S.treeContext,ls=ac(p.nextSibling),ds=o,Ui=!0,nu=null,r!==null&&(Is[bs++]=gl,Is[bs++]=ml,Is[bs++]=gf,gl=r.id,ml=r.overflow,gf=o),o=oC(o,f.children),o.flags|=4096,o)}function kP(r,o,l){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),jI(r.return,o,l)}function DT(r,o,l,f,p){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:p}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=f,S.tail=l,S.tailMode=p)}function z4(r,o,l){var f=o.pendingProps,p=f.revealOrder,S=f.tail;if(_a(r,o,f.children,l),f=qi.current,f&2)f=f&1|2,o.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&kP(r,l,o);else if(r.tag===19)kP(r,l,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(bi(qi,f),!(o.mode&1))o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)r=l.alternate,r!==null&&M0(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),DT(o,!1,p,l,S);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(r=p.alternate,r!==null&&M0(r)===null){o.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}DT(o,!0,l,null,S);break;case"together":DT(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function u0(r,o){!(o.mode&1)&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function Sl(r,o,l){if(r!==null&&(o.dependencies=r.dependencies),vf|=o.lanes,!(l&o.childLanes))return null;if(r!==null&&o.child!==r.child)throw Error(jn(153));if(o.child!==null){for(r=o.child,l=cc(r,r.pendingProps),o.child=l,l.return=o;r.sibling!==null;)r=r.sibling,l=l.sibling=cc(r,r.pendingProps),l.return=o;l.sibling=null}return o.child}function IH(r,o,l){switch(o.tag){case 3:K4(o),ph();break;case 5:E4(o);break;case 1:ja(o.type)&&I0(o);break;case 4:Xb(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,p=o.memoizedProps.value;bi(R0,f._currentValue),f._currentValue=p;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(bi(qi,qi.current&1),o.flags|=128,null):l&o.child.childLanes?V4(r,o,l):(bi(qi,qi.current&1),r=Sl(r,o,l),r!==null?r.sibling:null);bi(qi,qi.current&1);break;case 19:if(f=(l&o.childLanes)!==0,r.flags&128){if(f)return z4(r,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),bi(qi,qi.current),f)break;return null;case 22:case 23:return o.lanes=0,q4(r,o,l)}return Sl(r,o,l)}var Y4,YI,W4,$4;Y4=function(r,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};YI=function(){};W4=function(r,o,l,f){var p=r.memoizedProps;if(p!==f){r=o.stateNode,uf(Du.current);var S=null;switch(l){case"input":p=mI(r,p),f=mI(r,f),S=[];break;case"select":p=Vi({},p,{value:void 0}),f=Vi({},f,{value:void 0}),S=[];break;case"textarea":p=EI(r,p),f=EI(r,f),S=[];break;default:typeof p.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=w0)}TI(l,f);var b;l=null;for(F in p)if(!f.hasOwnProperty(F)&&p.hasOwnProperty(F)&&p[F]!=null)if(F==="style"){var g=p[F];for(b in g)g.hasOwnProperty(b)&&(l||(l={}),l[b]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(Cg.hasOwnProperty(F)?S||(S=[]):(S=S||[]).push(F,null));for(F in f){var w=f[F];if(g=p!=null?p[F]:void 0,f.hasOwnProperty(F)&&w!==g&&(w!=null||g!=null))if(F==="style")if(g){for(b in g)!g.hasOwnProperty(b)||w&&w.hasOwnProperty(b)||(l||(l={}),l[b]="");for(b in w)w.hasOwnProperty(b)&&g[b]!==w[b]&&(l||(l={}),l[b]=w[b])}else l||(S||(S=[]),S.push(F,l)),l=w;else F==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,g=g?g.__html:void 0,w!=null&&g!==w&&(S=S||[]).push(F,w)):F==="children"?typeof w!="string"&&typeof w!="number"||(S=S||[]).push(F,""+w):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(Cg.hasOwnProperty(F)?(w!=null&&F==="onScroll"&&xi("scroll",r),S||g===w||(S=[])):(S=S||[]).push(F,w))}l&&(S=S||[]).push("style",l);var F=S;(o.updateQueue=F)&&(o.flags|=4)}};$4=function(r,o,l,f){l!==f&&(o.flags|=4)};function rg(r,o){if(!Ui)switch(r.tailMode){case"hidden":o=r.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function $o(r){var o=r.alternate!==null&&r.alternate.child===r.child,l=0,f=0;if(o)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,f|=p.subtreeFlags&14680064,f|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,f|=p.subtreeFlags,f|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=f,r.childLanes=l,o}function bH(r,o,l){var f=o.pendingProps;switch(Hb(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $o(o),null;case 1:return ja(o.type)&&A0(),$o(o),null;case 3:return f=o.stateNode,mh(),Mi(Ba),Mi(ea),Jb(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(jy(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,nu!==null&&(nb(nu),nu=null))),YI(r,o),$o(o),null;case 5:Qb(o);var p=uf(Bg.current);if(l=o.type,r!==null&&o.stateNode!=null)W4(r,o,l,f,p),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(jn(166));return $o(o),null}if(r=uf(Du.current),jy(o)){f=o.stateNode,l=o.type;var S=o.memoizedProps;switch(f[xu]=o,f[Fg]=S,r=(o.mode&1)!==0,l){case"dialog":xi("cancel",f),xi("close",f);break;case"iframe":case"object":case"embed":xi("load",f);break;case"video":case"audio":for(p=0;p<hg.length;p++)xi(hg[p],f);break;case"source":xi("error",f);break;case"img":case"image":case"link":xi("error",f),xi("load",f);break;case"details":xi("toggle",f);break;case"input":KD(f,S),xi("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!S.multiple},xi("invalid",f);break;case"textarea":zD(f,S),xi("invalid",f)}TI(l,S),p=null;for(var b in S)if(S.hasOwnProperty(b)){var g=S[b];b==="children"?typeof g=="string"?f.textContent!==g&&(S.suppressHydrationWarning!==!0&&By(f.textContent,g,r),p=["children",g]):typeof g=="number"&&f.textContent!==""+g&&(S.suppressHydrationWarning!==!0&&By(f.textContent,g,r),p=["children",""+g]):Cg.hasOwnProperty(b)&&g!=null&&b==="onScroll"&&xi("scroll",f)}switch(l){case"input":My(f),VD(f,S,!0);break;case"textarea":My(f),YD(f);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(f.onclick=w0)}f=p,o.updateQueue=f,f!==null&&(o.flags|=4)}else{b=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=AF(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=b.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=b.createElement(l,{is:f.is}):(r=b.createElement(l),l==="select"&&(b=r,f.multiple?b.multiple=!0:f.size&&(b.size=f.size))):r=b.createElementNS(r,l),r[xu]=o,r[Fg]=f,Y4(r,o,!1,!1),o.stateNode=r;e:{switch(b=SI(l,f),l){case"dialog":xi("cancel",r),xi("close",r),p=f;break;case"iframe":case"object":case"embed":xi("load",r),p=f;break;case"video":case"audio":for(p=0;p<hg.length;p++)xi(hg[p],r);p=f;break;case"source":xi("error",r),p=f;break;case"img":case"image":case"link":xi("error",r),xi("load",r),p=f;break;case"details":xi("toggle",r),p=f;break;case"input":KD(r,f),p=mI(r,f),xi("invalid",r);break;case"option":p=f;break;case"select":r._wrapperState={wasMultiple:!!f.multiple},p=Vi({},f,{value:void 0}),xi("invalid",r);break;case"textarea":zD(r,f),p=EI(r,f),xi("invalid",r);break;default:p=f}TI(l,p),g=p;for(S in g)if(g.hasOwnProperty(S)){var w=g[S];S==="style"?CF(r,w):S==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&IF(r,w)):S==="children"?typeof w=="string"?(l!=="textarea"||w!=="")&&Rg(r,w):typeof w=="number"&&Rg(r,""+w):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(Cg.hasOwnProperty(S)?w!=null&&S==="onScroll"&&xi("scroll",r):w!=null&&Nb(r,S,w,b))}switch(l){case"input":My(r),VD(r,f,!1);break;case"textarea":My(r),YD(r);break;case"option":f.value!=null&&r.setAttribute("value",""+dc(f.value));break;case"select":r.multiple=!!f.multiple,S=f.value,S!=null?ah(r,!!f.multiple,S,!1):f.defaultValue!=null&&ah(r,!!f.multiple,f.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=w0)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return $o(o),null;case 6:if(r&&o.stateNode!=null)$4(r,o,r.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(jn(166));if(l=uf(Bg.current),uf(Du.current),jy(o)){if(f=o.stateNode,l=o.memoizedProps,f[xu]=o,(S=f.nodeValue!==l)&&(r=ds,r!==null))switch(r.tag){case 3:By(f.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&By(f.nodeValue,l,(r.mode&1)!==0)}S&&(o.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[xu]=o,o.stateNode=f}return $o(o),null;case 13:if(Mi(qi),f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ui&&ls!==null&&o.mode&1&&!(o.flags&128))p4(),ph(),o.flags|=98560,S=!1;else if(S=jy(o),f!==null&&f.dehydrated!==null){if(r===null){if(!S)throw Error(jn(318));if(S=o.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(jn(317));S[xu]=o}else ph(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;$o(o),S=!1}else nu!==null&&(nb(nu),nu=null),S=!0;if(!S)return o.flags&65536?o:null}return o.flags&128?(o.lanes=l,o):(f=f!==null,f!==(r!==null&&r.memoizedState!==null)&&f&&(o.child.flags|=8192,o.mode&1&&(r===null||qi.current&1?wo===0&&(wo=3):fC())),o.updateQueue!==null&&(o.flags|=4),$o(o),null);case 4:return mh(),YI(r,o),r===null&&Lg(o.stateNode.containerInfo),$o(o),null;case 10:return Yb(o.type._context),$o(o),null;case 17:return ja(o.type)&&A0(),$o(o),null;case 19:if(Mi(qi),S=o.memoizedState,S===null)return $o(o),null;if(f=(o.flags&128)!==0,b=S.rendering,b===null)if(f)rg(S,!1);else{if(wo!==0||r!==null&&r.flags&128)for(r=o.child;r!==null;){if(b=M0(r),b!==null){for(o.flags|=128,rg(S,!1),f=b.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=l,l=o.child;l!==null;)S=l,r=f,S.flags&=14680066,b=S.alternate,b===null?(S.childLanes=0,S.lanes=r,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=b.childLanes,S.lanes=b.lanes,S.child=b.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=b.memoizedProps,S.memoizedState=b.memoizedState,S.updateQueue=b.updateQueue,S.type=b.type,r=b.dependencies,S.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return bi(qi,qi.current&1|2),o.child}r=r.sibling}S.tail!==null&&lo()>yh&&(o.flags|=128,f=!0,rg(S,!1),o.lanes=4194304)}else{if(!f)if(r=M0(b),r!==null){if(o.flags|=128,f=!0,l=r.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),rg(S,!0),S.tail===null&&S.tailMode==="hidden"&&!b.alternate&&!Ui)return $o(o),null}else 2*lo()-S.renderingStartTime>yh&&l!==1073741824&&(o.flags|=128,f=!0,rg(S,!1),o.lanes=4194304);S.isBackwards?(b.sibling=o.child,o.child=b):(l=S.last,l!==null?l.sibling=b:o.child=b,S.last=b)}return S.tail!==null?(o=S.tail,S.rendering=o,S.tail=o.sibling,S.renderingStartTime=lo(),o.sibling=null,l=qi.current,bi(qi,f?l&1|2:l&1),o):($o(o),null);case 22:case 23:return cC(),f=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==f&&(o.flags|=8192),f&&o.mode&1?us&1073741824&&($o(o),o.subtreeFlags&6&&(o.flags|=8192)):$o(o),null;case 24:return null;case 25:return null}throw Error(jn(156,o.tag))}function CH(r,o){switch(Hb(o),o.tag){case 1:return ja(o.type)&&A0(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return mh(),Mi(Ba),Mi(ea),Jb(),r=o.flags,r&65536&&!(r&128)?(o.flags=r&-65537|128,o):null;case 5:return Qb(o),null;case 13:if(Mi(qi),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(jn(340));ph()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return Mi(qi),null;case 4:return mh(),null;case 10:return Yb(o.type._context),null;case 22:case 23:return cC(),null;case 24:return null;default:return null}}var qy=!1,Qo=!1,RH=typeof WeakSet=="function"?WeakSet:Set,nr=null;function th(r,o){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){Qi(r,o,f)}else l.current=null}function WI(r,o,l){try{l()}catch(f){Qi(r,o,f)}}var FP=!1;function NH(r,o){if(DI=_0,r=t4(),Gb(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var p=f.anchorOffset,S=f.focusNode;f=f.focusOffset;try{l.nodeType,S.nodeType}catch(R){l=null;break e}var b=0,g=-1,w=-1,F=0,C=0,y=r,v=null;t:for(;;){for(var D;y!==l||p!==0&&y.nodeType!==3||(g=b+p),y!==S||f!==0&&y.nodeType!==3||(w=b+f),y.nodeType===3&&(b+=y.nodeValue.length),(D=y.firstChild)!==null;)v=y,y=D;for(;;){if(y===r)break t;if(v===l&&++F===p&&(g=b),v===S&&++C===f&&(w=b),(D=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=D}l=g===-1||w===-1?null:{start:g,end:w}}else l=null}l=l||{start:0,end:0}}else l=null;for(PI={focusedElem:r,selectionRange:l},_0=!1,nr=o;nr!==null;)if(o=nr,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,nr=r;else for(;nr!==null;){o=nr;try{var m=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var T=m.memoizedProps,U=m.memoizedState,x=o.stateNode,_=x.getSnapshotBeforeUpdate(o.elementType===o.type?T:eu(o.type,T),U);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=o.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jn(163))}}catch(R){Qi(o,o.return,R)}if(r=o.sibling,r!==null){r.return=o.return,nr=r;break}nr=o.return}return m=FP,FP=!1,m}function wg(r,o,l){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var p=f=f.next;do{if((p.tag&r)===r){var S=p.destroy;p.destroy=void 0,S!==void 0&&WI(o,l,S)}p=p.next}while(p!==f)}}function eE(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&r)===r){var f=l.create;l.destroy=f()}l=l.next}while(l!==o)}}function $I(r){var o=r.ref;if(o!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof o=="function"?o(r):o.current=r}}function X4(r){var o=r.alternate;o!==null&&(r.alternate=null,X4(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[xu],delete o[Fg],delete o[kI],delete o[fH],delete o[dH])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Q4(r){return r.tag===5||r.tag===3||r.tag===4}function UP(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Q4(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function XI(r,o,l){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(r,o):l.insertBefore(r,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(r,l)):(o=l,o.appendChild(r)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=w0));else if(f!==4&&(r=r.child,r!==null))for(XI(r,o,l),r=r.sibling;r!==null;)XI(r,o,l),r=r.sibling}function QI(r,o,l){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?l.insertBefore(r,o):l.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(QI(r,o,l),r=r.sibling;r!==null;)QI(r,o,l),r=r.sibling}var jo=null,tu=!1;function $l(r,o,l){for(l=l.child;l!==null;)J4(r,o,l),l=l.sibling}function J4(r,o,l){if(Mu&&typeof Mu.onCommitFiberUnmount=="function")try{Mu.onCommitFiberUnmount(V0,l)}catch(g){}switch(l.tag){case 5:Qo||th(l,o);case 6:var f=jo,p=tu;jo=null,$l(r,o,l),jo=f,tu=p,jo!==null&&(tu?(r=jo,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):jo.removeChild(l.stateNode));break;case 18:jo!==null&&(tu?(r=jo,l=l.stateNode,r.nodeType===8?IT(r.parentNode,l):r.nodeType===1&&IT(r,l),Dg(r)):IT(jo,l.stateNode));break;case 4:f=jo,p=tu,jo=l.stateNode.containerInfo,tu=!0,$l(r,o,l),jo=f,tu=p;break;case 0:case 11:case 14:case 15:if(!Qo&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){p=f=f.next;do{var S=p,b=S.destroy;S=S.tag,b!==void 0&&(S&2||S&4)&&WI(l,o,b),p=p.next}while(p!==f)}$l(r,o,l);break;case 1:if(!Qo&&(th(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(g){Qi(l,o,g)}$l(r,o,l);break;case 21:$l(r,o,l);break;case 22:l.mode&1?(Qo=(f=Qo)||l.memoizedState!==null,$l(r,o,l),Qo=f):$l(r,o,l);break;default:$l(r,o,l)}}function BP(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new RH),o.forEach(function(f){var p=UH.bind(null,r,f);l.has(f)||(l.add(f),f.then(p,p))})}}function Qs(r,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];try{var S=r,b=o,g=b;e:for(;g!==null;){switch(g.tag){case 5:jo=g.stateNode,tu=!1;break e;case 3:jo=g.stateNode.containerInfo,tu=!0;break e;case 4:jo=g.stateNode.containerInfo,tu=!0;break e}g=g.return}if(jo===null)throw Error(jn(160));J4(S,b,p),jo=null,tu=!1;var w=p.alternate;w!==null&&(w.return=null),p.return=null}catch(F){Qi(p,o,F)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)eU(o,r),o=o.sibling}function eU(r,o){var l=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Qs(o,r),Iu(r),f&4){try{wg(3,r,r.return),eE(3,r)}catch(T){Qi(r,r.return,T)}try{wg(5,r,r.return)}catch(T){Qi(r,r.return,T)}}break;case 1:Qs(o,r),Iu(r),f&512&&l!==null&&th(l,l.return);break;case 5:if(Qs(o,r),Iu(r),f&512&&l!==null&&th(l,l.return),r.flags&32){var p=r.stateNode;try{Rg(p,"")}catch(T){Qi(r,r.return,T)}}if(f&4&&(p=r.stateNode,p!=null)){var S=r.memoizedProps,b=l!==null?l.memoizedProps:S,g=r.type,w=r.updateQueue;if(r.updateQueue=null,w!==null)try{g==="input"&&S.type==="radio"&&S.name!=null&&SF(p,S),SI(g,b);var F=SI(g,S);for(b=0;b<w.length;b+=2){var C=w[b],y=w[b+1];C==="style"?CF(p,y):C==="dangerouslySetInnerHTML"?IF(p,y):C==="children"?Rg(p,y):Nb(p,C,y,F)}switch(g){case"input":vI(p,S);break;case"textarea":wF(p,S);break;case"select":var v=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!S.multiple;var D=S.value;D!=null?ah(p,!!S.multiple,D,!1):v!==!!S.multiple&&(S.defaultValue!=null?ah(p,!!S.multiple,S.defaultValue,!0):ah(p,!!S.multiple,S.multiple?[]:"",!1))}p[Fg]=S}catch(T){Qi(r,r.return,T)}}break;case 6:if(Qs(o,r),Iu(r),f&4){if(r.stateNode===null)throw Error(jn(162));p=r.stateNode,S=r.memoizedProps;try{p.nodeValue=S}catch(T){Qi(r,r.return,T)}}break;case 3:if(Qs(o,r),Iu(r),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Dg(o.containerInfo)}catch(T){Qi(r,r.return,T)}break;case 4:Qs(o,r),Iu(r);break;case 13:Qs(o,r),Iu(r),p=r.child,p.flags&8192&&(S=p.memoizedState!==null,p.stateNode.isHidden=S,!S||p.alternate!==null&&p.alternate.memoizedState!==null||(uC=lo())),f&4&&BP(r);break;case 22:if(C=l!==null&&l.memoizedState!==null,r.mode&1?(Qo=(F=Qo)||C,Qs(o,r),Qo=F):Qs(o,r),Iu(r),f&8192){if(F=r.memoizedState!==null,(r.stateNode.isHidden=F)&&!C&&r.mode&1)for(nr=r,C=r.child;C!==null;){for(y=nr=C;nr!==null;){switch(v=nr,D=v.child,v.tag){case 0:case 11:case 14:case 15:wg(4,v,v.return);break;case 1:th(v,v.return);var m=v.stateNode;if(typeof m.componentWillUnmount=="function"){f=v,l=v.return;try{o=f,m.props=o.memoizedProps,m.state=o.memoizedState,m.componentWillUnmount()}catch(T){Qi(f,l,T)}}break;case 5:th(v,v.return);break;case 22:if(v.memoizedState!==null){ZP(y);continue}}D!==null?(D.return=v,nr=D):ZP(y)}C=C.sibling}e:for(C=null,y=r;;){if(y.tag===5){if(C===null){C=y;try{p=y.stateNode,F?(S=p.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(g=y.stateNode,w=y.memoizedProps.style,b=w!=null&&w.hasOwnProperty("display")?w.display:null,g.style.display=bF("display",b))}catch(T){Qi(r,r.return,T)}}}else if(y.tag===6){if(C===null)try{y.stateNode.nodeValue=F?"":y.memoizedProps}catch(T){Qi(r,r.return,T)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===r)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===r)break e;for(;y.sibling===null;){if(y.return===null||y.return===r)break e;C===y&&(C=null),y=y.return}C===y&&(C=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Qs(o,r),Iu(r),f&4&&BP(r);break;case 21:break;default:Qs(o,r),Iu(r)}}function Iu(r){var o=r.flags;if(o&2){try{e:{for(var l=r.return;l!==null;){if(Q4(l)){var f=l;break e}l=l.return}throw Error(jn(160))}switch(f.tag){case 5:var p=f.stateNode;f.flags&32&&(Rg(p,""),f.flags&=-33);var S=UP(r);QI(r,S,p);break;case 3:case 4:var b=f.stateNode.containerInfo,g=UP(r);XI(r,g,b);break;default:throw Error(jn(161))}}catch(w){Qi(r,r.return,w)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function xH(r,o,l){nr=r,tU(r)}function tU(r,o,l){for(var f=(r.mode&1)!==0;nr!==null;){var p=nr,S=p.child;if(p.tag===22&&f){var b=p.memoizedState!==null||qy;if(!b){var g=p.alternate,w=g!==null&&g.memoizedState!==null||Qo;g=qy;var F=Qo;if(qy=b,(Qo=w)&&!F)for(nr=p;nr!==null;)b=nr,w=b.child,b.tag===22&&b.memoizedState!==null?GP(p):w!==null?(w.return=b,nr=w):GP(p);for(;S!==null;)nr=S,tU(S),S=S.sibling;nr=p,qy=g,Qo=F}jP(r)}else p.subtreeFlags&8772&&S!==null?(S.return=p,nr=S):jP(r)}}function jP(r){for(;nr!==null;){var o=nr;if(o.flags&8772){var l=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Qo||eE(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Qo)if(l===null)f.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:eu(o.type,l.memoizedProps);f.componentDidUpdate(p,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var S=o.updateQueue;S!==null&&AP(o,S,f);break;case 3:var b=o.updateQueue;if(b!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}AP(o,b,l)}break;case 5:var g=o.stateNode;if(l===null&&o.flags&4){l=g;var w=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&l.focus();break;case"img":w.src&&(l.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var F=o.alternate;if(F!==null){var C=F.memoizedState;if(C!==null){var y=C.dehydrated;y!==null&&Dg(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jn(163))}Qo||o.flags&512&&$I(o)}catch(v){Qi(o,o.return,v)}}if(o===r){nr=null;break}if(l=o.sibling,l!==null){l.return=o.return,nr=l;break}nr=o.return}}function ZP(r){for(;nr!==null;){var o=nr;if(o===r){nr=null;break}var l=o.sibling;if(l!==null){l.return=o.return,nr=l;break}nr=o.return}}function GP(r){for(;nr!==null;){var o=nr;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{eE(4,o)}catch(w){Qi(o,l,w)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var p=o.return;try{f.componentDidMount()}catch(w){Qi(o,p,w)}}var S=o.return;try{$I(o)}catch(w){Qi(o,S,w)}break;case 5:var b=o.return;try{$I(o)}catch(w){Qi(o,b,w)}}}catch(w){Qi(o,o.return,w)}if(o===r){nr=null;break}var g=o.sibling;if(g!==null){g.return=o.return,nr=g;break}nr=o.return}}var MH=Math.ceil,O0=wl.ReactCurrentDispatcher,aC=wl.ReactCurrentOwner,Ns=wl.ReactCurrentBatchConfig,$r=0,Do=null,go=null,Zo=0,us=0,nh=gc(0),wo=0,qg=null,vf=0,tE=0,sC=0,Ag=null,Fa=null,uC=0,yh=1/0,hl=null,L0=!1,JI=null,uc=null,Hy=!1,nc=null,k0=0,Ig=0,eb=null,l0=-1,c0=0;function Ta(){return $r&6?lo():l0!==-1?l0:l0=lo()}function lc(r){return r.mode&1?$r&2&&Zo!==0?Zo&-Zo:pH.transition!==null?(c0===0&&(c0=BF()),c0):(r=di,r!==0||(r=window.event,r=r===void 0?16:VF(r.type)),r):1}function su(r,o,l,f){if(50<Ig)throw Ig=0,eb=null,Error(jn(185));$g(r,l,f),(!($r&2)||r!==Do)&&(r===Do&&(!($r&2)&&(tE|=l),wo===4&&ec(r,Zo)),Za(r,f),l===1&&$r===0&&!(o.mode&1)&&(yh=lo()+500,X0&&mc()))}function Za(r,o){var l=r.callbackNode;pq(r,o);var f=E0(r,r===Do?Zo:0);if(f===0)l!==null&&XD(l),r.callbackNode=null,r.callbackPriority=0;else if(o=f&-f,r.callbackPriority!==o){if(l!=null&&XD(l),o===1)r.tag===0?hH(qP.bind(null,r)):f4(qP.bind(null,r)),lH(function(){!($r&6)&&mc()}),l=null;else{switch(jF(f)){case 1:l=Ob;break;case 4:l=FF;break;case 16:l=y0;break;case 536870912:l=UF;break;default:l=y0}l=lU(l,nU.bind(null,r))}r.callbackPriority=o,r.callbackNode=l}}function nU(r,o){if(l0=-1,c0=0,$r&6)throw Error(jn(327));var l=r.callbackNode;if(fh()&&r.callbackNode!==l)return null;var f=E0(r,r===Do?Zo:0);if(f===0)return null;if(f&30||f&r.expiredLanes||o)o=F0(r,f);else{o=f;var p=$r;$r|=2;var S=iU();(Do!==r||Zo!==o)&&(hl=null,yh=lo()+500,cf(r,o));do try{OH();break}catch(g){rU(r,g)}while(!0);zb(),O0.current=S,$r=p,go!==null?o=0:(Do=null,Zo=0,o=wo)}if(o!==0){if(o===2&&(p=CI(r),p!==0&&(f=p,o=tb(r,p))),o===1)throw l=qg,cf(r,0),ec(r,f),Za(r,lo()),l;if(o===6)ec(r,f);else{if(p=r.current.alternate,!(f&30)&&!DH(p)&&(o=F0(r,f),o===2&&(S=CI(r),S!==0&&(f=S,o=tb(r,S))),o===1))throw l=qg,cf(r,0),ec(r,f),Za(r,lo()),l;switch(r.finishedWork=p,r.finishedLanes=f,o){case 0:case 1:throw Error(jn(345));case 2:nf(r,Fa,hl);break;case 3:if(ec(r,f),(f&130023424)===f&&(o=uC+500-lo(),10<o)){if(E0(r,0)!==0)break;if(p=r.suspendedLanes,(p&f)!==f){Ta(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=LI(nf.bind(null,r,Fa,hl),o);break}nf(r,Fa,hl);break;case 4:if(ec(r,f),(f&4194240)===f)break;for(o=r.eventTimes,p=-1;0<f;){var b=31-au(f);S=1<<b,b=o[b],b>p&&(p=b),f&=~S}if(f=p,f=lo()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*MH(f/1960))-f,10<f){r.timeoutHandle=LI(nf.bind(null,r,Fa,hl),f);break}nf(r,Fa,hl);break;case 5:nf(r,Fa,hl);break;default:throw Error(jn(329))}}}return Za(r,lo()),r.callbackNode===l?nU.bind(null,r):null}function tb(r,o){var l=Ag;return r.current.memoizedState.isDehydrated&&(cf(r,o).flags|=256),r=F0(r,o),r!==2&&(o=Fa,Fa=l,o!==null&&nb(o)),r}function nb(r){Fa===null?Fa=r:Fa.push.apply(Fa,r)}function DH(r){for(var o=r;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var p=l[f],S=p.getSnapshot;p=p.value;try{if(!uu(S(),p))return!1}catch(b){return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ec(r,o){for(o&=~sC,o&=~tE,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var l=31-au(o),f=1<<l;r[l]=-1,o&=~f}}function qP(r){if($r&6)throw Error(jn(327));fh();var o=E0(r,0);if(!(o&1))return Za(r,lo()),null;var l=F0(r,o);if(r.tag!==0&&l===2){var f=CI(r);f!==0&&(o=f,l=tb(r,f))}if(l===1)throw l=qg,cf(r,0),ec(r,o),Za(r,lo()),l;if(l===6)throw Error(jn(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,nf(r,Fa,hl),Za(r,lo()),null}function lC(r,o){var l=$r;$r|=1;try{return r(o)}finally{$r=l,$r===0&&(yh=lo()+500,X0&&mc())}}function yf(r){nc!==null&&nc.tag===0&&!($r&6)&&fh();var o=$r;$r|=1;var l=Ns.transition,f=di;try{if(Ns.transition=null,di=1,r)return r()}finally{di=f,Ns.transition=l,$r=o,!($r&6)&&mc()}}function cC(){us=nh.current,Mi(nh)}function cf(r,o){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,uH(l)),go!==null)for(l=go.return;l!==null;){var f=l;switch(Hb(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&A0();break;case 3:mh(),Mi(Ba),Mi(ea),Jb();break;case 5:Qb(f);break;case 4:mh();break;case 13:Mi(qi);break;case 19:Mi(qi);break;case 10:Yb(f.type._context);break;case 22:case 23:cC()}l=l.return}if(Do=r,go=r=cc(r.current,null),Zo=us=o,wo=0,qg=null,sC=tE=vf=0,Fa=Ag=null,sf!==null){for(o=0;o<sf.length;o++)if(l=sf[o],f=l.interleaved,f!==null){l.interleaved=null;var p=f.next,S=l.pending;if(S!==null){var b=S.next;S.next=p,f.next=b}l.pending=f}sf=null}return r}function rU(r,o){do{var l=go;try{if(zb(),a0.current=P0,D0){for(var f=Ki.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}D0=!1}if(mf=0,Mo=So=Ki=null,Sg=!1,jg=0,aC.current=null,l===null||l.return===null){wo=1,qg=o,go=null;break}e:{var S=r,b=l.return,g=l,w=o;if(o=Zo,g.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var F=w,C=g,y=C.tag;if(!(C.mode&1)&&(y===0||y===11||y===15)){var v=C.alternate;v?(C.updateQueue=v.updateQueue,C.memoizedState=v.memoizedState,C.lanes=v.lanes):(C.updateQueue=null,C.memoizedState=null)}var D=xP(b);if(D!==null){D.flags&=-257,MP(D,b,g,S,o),D.mode&1&&NP(S,F,o),o=D,w=F;var m=o.updateQueue;if(m===null){var T=new Set;T.add(w),o.updateQueue=T}else m.add(w);break e}else{if(!(o&1)){NP(S,F,o),fC();break e}w=Error(jn(426))}}else if(Ui&&g.mode&1){var U=xP(b);if(U!==null){!(U.flags&65536)&&(U.flags|=256),MP(U,b,g,S,o),Kb(vh(w,g));break e}}S=w=vh(w,g),wo!==4&&(wo=2),Ag===null?Ag=[S]:Ag.push(S),S=b;do{switch(S.tag){case 3:S.flags|=65536,o&=-o,S.lanes|=o;var x=j4(S,w,o);wP(S,x);break e;case 1:g=w;var _=S.type,I=S.stateNode;if(!(S.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(uc===null||!uc.has(I)))){S.flags|=65536,o&=-o,S.lanes|=o;var R=Z4(S,g,o);wP(S,R);break e}}S=S.return}while(S!==null)}aU(l)}catch(j){o=j,go===l&&l!==null&&(go=l=l.return);continue}break}while(!0)}function iU(){var r=O0.current;return O0.current=P0,r===null?P0:r}function fC(){(wo===0||wo===3||wo===2)&&(wo=4),Do===null||!(vf&268435455)&&!(tE&268435455)||ec(Do,Zo)}function F0(r,o){var l=$r;$r|=2;var f=iU();(Do!==r||Zo!==o)&&(hl=null,cf(r,o));do try{PH();break}catch(p){rU(r,p)}while(!0);if(zb(),$r=l,O0.current=f,go!==null)throw Error(jn(261));return Do=null,Zo=0,wo}function PH(){for(;go!==null;)oU(go)}function OH(){for(;go!==null&&!oq();)oU(go)}function oU(r){var o=uU(r.alternate,r,us);r.memoizedProps=r.pendingProps,o===null?aU(r):go=o,aC.current=null}function aU(r){var o=r;do{var l=o.alternate;if(r=o.return,o.flags&32768){if(l=CH(l,o),l!==null){l.flags&=32767,go=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{wo=6,go=null;return}}else if(l=bH(l,o,us),l!==null){go=l;return}if(o=o.sibling,o!==null){go=o;return}go=o=r}while(o!==null);wo===0&&(wo=5)}function nf(r,o,l){var f=di,p=Ns.transition;try{Ns.transition=null,di=1,LH(r,o,l,f)}finally{Ns.transition=p,di=f}return null}function LH(r,o,l,f){do fh();while(nc!==null);if($r&6)throw Error(jn(327));l=r.finishedWork;var p=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(jn(177));r.callbackNode=null,r.callbackPriority=0;var S=l.lanes|l.childLanes;if(gq(r,S),r===Do&&(go=Do=null,Zo=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Hy||(Hy=!0,lU(y0,function(){return fh(),null})),S=(l.flags&15990)!==0,l.subtreeFlags&15990||S){S=Ns.transition,Ns.transition=null;var b=di;di=1;var g=$r;$r|=4,aC.current=null,NH(r,l),eU(l,r),tH(PI),_0=!!DI,PI=DI=null,r.current=l,xH(l),aq(),$r=g,di=b,Ns.transition=S}else r.current=l;if(Hy&&(Hy=!1,nc=r,k0=p),S=r.pendingLanes,S===0&&(uc=null),lq(l.stateNode),Za(r,lo()),o!==null)for(f=r.onRecoverableError,l=0;l<o.length;l++)p=o[l],f(p.value,{componentStack:p.stack,digest:p.digest});if(L0)throw L0=!1,r=JI,JI=null,r;return k0&1&&r.tag!==0&&fh(),S=r.pendingLanes,S&1?r===eb?Ig++:(Ig=0,eb=r):Ig=0,mc(),null}function fh(){if(nc!==null){var r=jF(k0),o=Ns.transition,l=di;try{if(Ns.transition=null,di=16>r?16:r,nc===null)var f=!1;else{if(r=nc,nc=null,k0=0,$r&6)throw Error(jn(331));var p=$r;for($r|=4,nr=r.current;nr!==null;){var S=nr,b=S.child;if(nr.flags&16){var g=S.deletions;if(g!==null){for(var w=0;w<g.length;w++){var F=g[w];for(nr=F;nr!==null;){var C=nr;switch(C.tag){case 0:case 11:case 15:wg(8,C,S)}var y=C.child;if(y!==null)y.return=C,nr=y;else for(;nr!==null;){C=nr;var v=C.sibling,D=C.return;if(X4(C),C===F){nr=null;break}if(v!==null){v.return=D,nr=v;break}nr=D}}}var m=S.alternate;if(m!==null){var T=m.child;if(T!==null){m.child=null;do{var U=T.sibling;T.sibling=null,T=U}while(T!==null)}}nr=S}}if(S.subtreeFlags&2064&&b!==null)b.return=S,nr=b;else e:for(;nr!==null;){if(S=nr,S.flags&2048)switch(S.tag){case 0:case 11:case 15:wg(9,S,S.return)}var x=S.sibling;if(x!==null){x.return=S.return,nr=x;break e}nr=S.return}}var _=r.current;for(nr=_;nr!==null;){b=nr;var I=b.child;if(b.subtreeFlags&2064&&I!==null)I.return=b,nr=I;else e:for(b=_;nr!==null;){if(g=nr,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:eE(9,g)}}catch(j){Qi(g,g.return,j)}if(g===b){nr=null;break e}var R=g.sibling;if(R!==null){R.return=g.return,nr=R;break e}nr=g.return}}if($r=p,mc(),Mu&&typeof Mu.onPostCommitFiberRoot=="function")try{Mu.onPostCommitFiberRoot(V0,r)}catch(j){}f=!0}return f}finally{di=l,Ns.transition=o}}return!1}function HP(r,o,l){o=vh(l,o),o=j4(r,o,1),r=sc(r,o,1),o=Ta(),r!==null&&($g(r,1,o),Za(r,o))}function Qi(r,o,l){if(r.tag===3)HP(r,r,l);else for(;o!==null;){if(o.tag===3){HP(o,r,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(uc===null||!uc.has(f))){r=vh(l,r),r=Z4(o,r,1),o=sc(o,r,1),r=Ta(),o!==null&&($g(o,1,r),Za(o,r));break}}o=o.return}}function kH(r,o,l){var f=r.pingCache;f!==null&&f.delete(o),o=Ta(),r.pingedLanes|=r.suspendedLanes&l,Do===r&&(Zo&l)===l&&(wo===4||wo===3&&(Zo&130023424)===Zo&&500>lo()-uC?cf(r,0):sC|=l),Za(r,o)}function sU(r,o){o===0&&(r.mode&1?(o=Oy,Oy<<=1,!(Oy&130023424)&&(Oy=4194304)):o=1);var l=Ta();r=Tl(r,o),r!==null&&($g(r,o,l),Za(r,l))}function FH(r){var o=r.memoizedState,l=0;o!==null&&(l=o.retryLane),sU(r,l)}function UH(r,o){var l=0;switch(r.tag){case 13:var f=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:f=r.stateNode;break;default:throw Error(jn(314))}f!==null&&f.delete(o),sU(r,l)}var uU;uU=function(r,o,l){if(r!==null)if(r.memoizedProps!==o.pendingProps||Ba.current)Ua=!0;else{if(!(r.lanes&l)&&!(o.flags&128))return Ua=!1,IH(r,o,l);Ua=!!(r.flags&131072)}else Ua=!1,Ui&&o.flags&1048576&&d4(o,C0,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;u0(r,o),r=o.pendingProps;var p=hh(o,ea.current);ch(o,l),p=tC(null,o,f,r,p,l);var S=nC();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,ja(f)?(S=!0,I0(o)):S=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,$b(o),p.updater=J0,o.stateNode=p,p._reactInternals=o,GI(o,f,r,l),o=KI(null,o,f,!0,S,l)):(o.tag=0,Ui&&S&&qb(o),_a(null,o,p,l),o=o.child),o;case 16:f=o.elementType;e:{switch(u0(r,o),r=o.pendingProps,p=f._init,f=p(f._payload),o.type=f,p=o.tag=jH(f),r=eu(f,r),p){case 0:o=HI(null,o,f,r,l);break e;case 1:o=OP(null,o,f,r,l);break e;case 11:o=DP(null,o,f,r,l);break e;case 14:o=PP(null,o,f,eu(f.type,r),l);break e}throw Error(jn(306,f,""))}return o;case 0:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:eu(f,p),HI(r,o,f,p,l);case 1:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:eu(f,p),OP(r,o,f,p,l);case 3:e:{if(K4(o),r===null)throw Error(jn(387));f=o.pendingProps,S=o.memoizedState,p=S.element,y4(r,o),x0(o,f,null,l);var b=o.memoizedState;if(f=b.element,S.isDehydrated)if(S={element:f,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},o.updateQueue.baseState=S,o.memoizedState=S,o.flags&256){p=vh(Error(jn(423)),o),o=LP(r,o,f,l,p);break e}else if(f!==p){p=vh(Error(jn(424)),o),o=LP(r,o,f,l,p);break e}else for(ls=ac(o.stateNode.containerInfo.firstChild),ds=o,Ui=!0,nu=null,l=m4(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ph(),f===p){o=Sl(r,o,l);break e}_a(r,o,f,l)}o=o.child}return o;case 5:return E4(o),r===null&&BI(o),f=o.type,p=o.pendingProps,S=r!==null?r.memoizedProps:null,b=p.children,OI(f,p)?b=null:S!==null&&OI(f,S)&&(o.flags|=32),H4(r,o),_a(r,o,b,l),o.child;case 6:return r===null&&BI(o),null;case 13:return V4(r,o,l);case 4:return Xb(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=gh(o,null,f,l):_a(r,o,f,l),o.child;case 11:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:eu(f,p),DP(r,o,f,p,l);case 7:return _a(r,o,o.pendingProps,l),o.child;case 8:return _a(r,o,o.pendingProps.children,l),o.child;case 12:return _a(r,o,o.pendingProps.children,l),o.child;case 10:e:{if(f=o.type._context,p=o.pendingProps,S=o.memoizedProps,b=p.value,bi(R0,f._currentValue),f._currentValue=b,S!==null)if(uu(S.value,b)){if(S.children===p.children&&!Ba.current){o=Sl(r,o,l);break e}}else for(S=o.child,S!==null&&(S.return=o);S!==null;){var g=S.dependencies;if(g!==null){b=S.child;for(var w=g.firstContext;w!==null;){if(w.context===f){if(S.tag===1){w=vl(-1,l&-l),w.tag=2;var F=S.updateQueue;if(F!==null){F=F.shared;var C=F.pending;C===null?w.next=w:(w.next=C.next,C.next=w),F.pending=w}}S.lanes|=l,w=S.alternate,w!==null&&(w.lanes|=l),jI(S.return,l,o),g.lanes|=l;break}w=w.next}}else if(S.tag===10)b=S.type===o.type?null:S.child;else if(S.tag===18){if(b=S.return,b===null)throw Error(jn(341));b.lanes|=l,g=b.alternate,g!==null&&(g.lanes|=l),jI(b,l,o),b=S.sibling}else b=S.child;if(b!==null)b.return=S;else for(b=S;b!==null;){if(b===o){b=null;break}if(S=b.sibling,S!==null){S.return=b.return,b=S;break}b=b.return}S=b}_a(r,o,p.children,l),o=o.child}return o;case 9:return p=o.type,f=o.pendingProps.children,ch(o,l),p=xs(p),f=f(p),o.flags|=1,_a(r,o,f,l),o.child;case 14:return f=o.type,p=eu(f,o.pendingProps),p=eu(f.type,p),PP(r,o,f,p,l);case 15:return G4(r,o,o.type,o.pendingProps,l);case 17:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:eu(f,p),u0(r,o),o.tag=1,ja(f)?(r=!0,I0(o)):r=!1,ch(o,l),B4(o,f,p),GI(o,f,p,l),KI(null,o,f,!0,r,l);case 19:return z4(r,o,l);case 22:return q4(r,o,l)}throw Error(jn(156,o.tag))};function lU(r,o){return kF(r,o)}function BH(r,o,l,f){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(r,o,l,f){return new BH(r,o,l,f)}function dC(r){return r=r.prototype,!(!r||!r.isReactComponent)}function jH(r){if(typeof r=="function")return dC(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Mb)return 11;if(r===Db)return 14}return 2}function cc(r,o){var l=r.alternate;return l===null?(l=Rs(r.tag,o,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=o,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,o=r.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function f0(r,o,l,f,p,S){var b=2;if(f=r,typeof r=="function")dC(r)&&(b=1);else if(typeof r=="string")b=5;else e:switch(r){case Vd:return ff(l.children,p,S,o);case xb:b=8,p|=8;break;case dI:return r=Rs(12,l,o,p|2),r.elementType=dI,r.lanes=S,r;case hI:return r=Rs(13,l,o,p),r.elementType=hI,r.lanes=S,r;case pI:return r=Rs(19,l,o,p),r.elementType=pI,r.lanes=S,r;case EF:return nE(l,p,S,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case vF:b=10;break e;case yF:b=9;break e;case Mb:b=11;break e;case Db:b=14;break e;case Xl:b=16,f=null;break e}throw Error(jn(130,r==null?r:typeof r,""))}return o=Rs(b,l,o,p),o.elementType=r,o.type=f,o.lanes=S,o}function ff(r,o,l,f){return r=Rs(7,r,f,o),r.lanes=l,r}function nE(r,o,l,f){return r=Rs(22,r,f,o),r.elementType=EF,r.lanes=l,r.stateNode={isHidden:!1},r}function PT(r,o,l){return r=Rs(6,r,null,o),r.lanes=l,r}function OT(r,o,l){return o=Rs(4,r.children!==null?r.children:[],r.key,o),o.lanes=l,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function ZH(r,o,l,f,p){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pT(0),this.expirationTimes=pT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pT(0),this.identifierPrefix=f,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function hC(r,o,l,f,p,S,b,g,w){return r=new ZH(r,o,l,g,w),o===1?(o=1,S===!0&&(o|=8)):o=0,S=Rs(3,null,null,o),r.current=S,S.stateNode=r,S.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},$b(S),r}function GH(r,o,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kd,key:f==null?null:""+f,children:r,containerInfo:o,implementation:l}}function cU(r){if(!r)return hc;r=r._reactInternals;e:{if(Sf(r)!==r||r.tag!==1)throw Error(jn(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(ja(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(jn(171))}if(r.tag===1){var l=r.type;if(ja(l))return c4(r,l,o)}return o}function fU(r,o,l,f,p,S,b,g,w){return r=hC(l,f,!0,r,p,S,b,g,w),r.context=cU(null),l=r.current,f=Ta(),p=lc(l),S=vl(f,p),S.callback=o!=null?o:null,sc(l,S,p),r.current.lanes=p,$g(r,p,f),Za(r,f),r}function rE(r,o,l,f){var p=o.current,S=Ta(),b=lc(p);return l=cU(l),o.context===null?o.context=l:o.pendingContext=l,o=vl(S,b),o.payload={element:r},f=f===void 0?null:f,f!==null&&(o.callback=f),r=sc(p,o,b),r!==null&&(su(r,p,b,S),o0(r,p,b)),b}function U0(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function KP(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<o?l:o}}function pC(r,o){KP(r,o),(r=r.alternate)&&KP(r,o)}function qH(){return null}var dU=typeof reportError=="function"?reportError:function(r){console.error(r)};function gC(r){this._internalRoot=r}iE.prototype.render=gC.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(jn(409));rE(r,o,null,null)};iE.prototype.unmount=gC.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;yf(function(){rE(null,r,null,null)}),o[_l]=null}};function iE(r){this._internalRoot=r}iE.prototype.unstable_scheduleHydration=function(r){if(r){var o=qF();r={blockedOn:null,target:r,priority:o};for(var l=0;l<Jl.length&&o!==0&&o<Jl[l].priority;l++);Jl.splice(l,0,r),l===0&&KF(r)}};function mC(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function oE(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function VP(){}function HH(r,o,l,f,p){if(p){if(typeof f=="function"){var S=f;f=function(){var F=U0(b);S.call(F)}}var b=fU(o,f,r,0,null,!1,!1,"",VP);return r._reactRootContainer=b,r[_l]=b.current,Lg(r.nodeType===8?r.parentNode:r),yf(),b}for(;p=r.lastChild;)r.removeChild(p);if(typeof f=="function"){var g=f;f=function(){var F=U0(w);g.call(F)}}var w=hC(r,0,!1,null,null,!1,!1,"",VP);return r._reactRootContainer=w,r[_l]=w.current,Lg(r.nodeType===8?r.parentNode:r),yf(function(){rE(o,w,l,f)}),w}function aE(r,o,l,f,p){var S=l._reactRootContainer;if(S){var b=S;if(typeof p=="function"){var g=p;p=function(){var w=U0(b);g.call(w)}}rE(o,b,r,p)}else b=HH(l,o,r,p,f);return U0(b)}ZF=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var l=dg(o.pendingLanes);l!==0&&(Lb(o,l|1),Za(o,lo()),!($r&6)&&(yh=lo()+500,mc()))}break;case 13:yf(function(){var f=Tl(r,1);if(f!==null){var p=Ta();su(f,r,1,p)}}),pC(r,1)}};kb=function(r){if(r.tag===13){var o=Tl(r,134217728);if(o!==null){var l=Ta();su(o,r,134217728,l)}pC(r,134217728)}};GF=function(r){if(r.tag===13){var o=lc(r),l=Tl(r,o);if(l!==null){var f=Ta();su(l,r,o,f)}pC(r,o)}};qF=function(){return di};HF=function(r,o){var l=di;try{return di=r,o()}finally{di=l}};AI=function(r,o,l){switch(o){case"input":if(vI(r,l),o=l.name,l.type==="radio"&&o!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==r&&f.form===r.form){var p=$0(f);if(!p)throw Error(jn(90));TF(f),vI(f,p)}}}break;case"textarea":wF(r,l);break;case"select":o=l.value,o!=null&&ah(r,!!l.multiple,o,!1)}};xF=lC;MF=yf;var KH={usingClientEntryPoint:!1,Events:[Qg,$d,$0,RF,NF,lC]},ig={findFiberByHostInstance:af,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VH={bundleType:ig.bundleType,version:ig.version,rendererPackageName:ig.rendererPackageName,rendererConfig:ig.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wl.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=OF(r),r===null?null:r.stateNode},findFiberByHostInstance:ig.findFiberByHostInstance||qH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ky=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ky.isDisabled&&Ky.supportsFiber)try{V0=Ky.inject(VH),Mu=Ky}catch(r){}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KH;ps.createPortal=function(r,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mC(o))throw Error(jn(200));return GH(r,o,null,l)};ps.createRoot=function(r,o){if(!mC(r))throw Error(jn(299));var l=!1,f="",p=dU;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=hC(r,1,!1,null,null,l,!1,f,p),r[_l]=o.current,Lg(r.nodeType===8?r.parentNode:r),new gC(o)};ps.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(jn(188)):(r=Object.keys(r).join(","),Error(jn(268,r)));return r=OF(o),r=r===null?null:r.stateNode,r};ps.flushSync=function(r){return yf(r)};ps.hydrate=function(r,o,l){if(!oE(o))throw Error(jn(200));return aE(null,r,o,!0,l)};ps.hydrateRoot=function(r,o,l){if(!mC(r))throw Error(jn(405));var f=l!=null&&l.hydratedSources||null,p=!1,S="",b=dU;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(S=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),o=fU(o,null,r,1,l!=null?l:null,p,!1,S,b),r[_l]=o.current,Lg(r),f)for(r=0;r<f.length;r++)l=f[r],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new iE(o)};ps.render=function(r,o,l){if(!oE(o))throw Error(jn(200));return aE(null,r,o,!1,l)};ps.unmountComponentAtNode=function(r){if(!oE(r))throw Error(jn(40));return r._reactRootContainer?(yf(function(){aE(null,null,r,!1,function(){r._reactRootContainer=null,r[_l]=null})}),!0):!1};ps.unstable_batchedUpdates=lC;ps.unstable_renderSubtreeIntoContainer=function(r,o,l,f){if(!oE(l))throw Error(jn(200));if(r==null||r._reactInternals===void 0)throw Error(jn(38));return aE(r,o,l,!1,f)};ps.version="18.3.1-next-f1338f8080-20240426";function hU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hU)}catch(r){console.error(r)}}hU(),hF.exports=ps;var zH=hF.exports,zP=zH;cI.createRoot=zP.createRoot,cI.hydrateRoot=zP.hydrateRoot;var pU={exports:{}},LT,YP;function wf(){if(YP)return LT;YP=1;function r(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}return LT=r,LT}var kT,WP;function gU(){if(WP)return kT;WP=1;var r=typeof iu=="object"&&iu&&iu.Object===Object&&iu;return kT=r,kT}var FT,$P;function Pu(){if($P)return FT;$P=1;var r=gU(),o=typeof self=="object"&&self&&self.Object===Object&&self,l=r||o||Function("return this")();return FT=l,FT}var UT,XP;function YH(){if(XP)return UT;XP=1;var r=Pu(),o=function(){return r.Date.now()};return UT=o,UT}var BT,QP;function WH(){if(QP)return BT;QP=1;var r=/\s/;function o(l){for(var f=l.length;f--&&r.test(l.charAt(f)););return f}return BT=o,BT}var jT,JP;function $H(){if(JP)return jT;JP=1;var r=WH(),o=/^\s+/;function l(f){return f&&f.slice(0,r(f)+1).replace(o,"")}return jT=l,jT}var ZT,eO;function em(){if(eO)return ZT;eO=1;var r=Pu(),o=r.Symbol;return ZT=o,ZT}var GT,tO;function XH(){if(tO)return GT;tO=1;var r=em(),o=Object.prototype,l=o.hasOwnProperty,f=o.toString,p=r?r.toStringTag:void 0;function S(b){var g=l.call(b,p),w=b[p];try{b[p]=void 0;var F=!0}catch(y){}var C=f.call(b);return F&&(g?b[p]=w:delete b[p]),C}return GT=S,GT}var qT,nO;function QH(){if(nO)return qT;nO=1;var r=Object.prototype,o=r.toString;function l(f){return o.call(f)}return qT=l,qT}var HT,rO;function tm(){if(rO)return HT;rO=1;var r=em(),o=XH(),l=QH(),f="[object Null]",p="[object Undefined]",S=r?r.toStringTag:void 0;function b(g){return g==null?g===void 0?p:f:S&&S in Object(g)?o(g):l(g)}return HT=b,HT}var KT,iO;function Ah(){if(iO)return KT;iO=1;function r(o){return o!=null&&typeof o=="object"}return KT=r,KT}var VT,oO;function nm(){if(oO)return VT;oO=1;var r=tm(),o=Ah(),l="[object Symbol]";function f(p){return typeof p=="symbol"||o(p)&&r(p)==l}return VT=f,VT}var zT,aO;function JH(){if(aO)return zT;aO=1;var r=$H(),o=wf(),l=nm(),f=NaN,p=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,b=/^0o[0-7]+$/i,g=parseInt;function w(F){if(typeof F=="number")return F;if(l(F))return f;if(o(F)){var C=typeof F.valueOf=="function"?F.valueOf():F;F=o(C)?C+"":C}if(typeof F!="string")return F===0?F:+F;F=r(F);var y=S.test(F);return y||b.test(F)?g(F.slice(2),y?2:8):p.test(F)?f:+F}return zT=w,zT}var YT,sO;function mU(){if(sO)return YT;sO=1;var r=wf(),o=YH(),l=JH(),f="Expected a function",p=Math.max,S=Math.min;function b(g,w,F){var C,y,v,D,m,T,U=0,x=!1,_=!1,I=!0;if(typeof g!="function")throw new TypeError(f);w=l(w)||0,r(F)&&(x=!!F.leading,_="maxWait"in F,v=_?p(l(F.maxWait)||0,w):v,I="trailing"in F?!!F.trailing:I);function R(oe){var he=C,Ie=y;return C=y=void 0,U=oe,D=g.apply(Ie,he),D}function j(oe){return U=oe,m=setTimeout(X,w),x?R(oe):D}function z(oe){var he=oe-T,Ie=oe-U,Xe=w-he;return _?S(Xe,v-Ie):Xe}function W(oe){var he=oe-T,Ie=oe-U;return T===void 0||he>=w||he<0||_&&Ie>=v}function X(){var oe=o();if(W(oe))return le(oe);m=setTimeout(X,z(oe))}function le(oe){return m=void 0,I&&C?R(oe):(C=y=void 0,D)}function N(){m!==void 0&&clearTimeout(m),U=0,C=T=y=m=void 0}function $(){return m===void 0?D:le(o())}function fe(){var oe=o(),he=W(oe);if(C=arguments,y=this,T=oe,he){if(m===void 0)return j(T);if(_)return clearTimeout(m),m=setTimeout(X,w),R(T)}return m===void 0&&(m=setTimeout(X,w)),D}return fe.cancel=N,fe.flush=$,fe}return YT=b,YT}var WT,uO;function vU(){if(uO)return WT;uO=1;var r=tm(),o=wf(),l="[object AsyncFunction]",f="[object Function]",p="[object GeneratorFunction]",S="[object Proxy]";function b(g){if(!o(g))return!1;var w=r(g);return w==f||w==p||w==l||w==S}return WT=b,WT}var $T,lO;function e7(){if(lO)return $T;lO=1;var r=Pu(),o=r["__core-js_shared__"];return $T=o,$T}var XT,cO;function t7(){if(cO)return XT;cO=1;var r=e7(),o=function(){var f=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}();function l(f){return!!o&&o in f}return XT=l,XT}var QT,fO;function yU(){if(fO)return QT;fO=1;var r=Function.prototype,o=r.toString;function l(f){if(f!=null){try{return o.call(f)}catch(p){}try{return f+""}catch(p){}}return""}return QT=l,QT}var JT,dO;function n7(){if(dO)return JT;dO=1;var r=vU(),o=t7(),l=wf(),f=yU(),p=/[\\^$.*+?()[\]{}|]/g,S=/^\[object .+?Constructor\]$/,b=Function.prototype,g=Object.prototype,w=b.toString,F=g.hasOwnProperty,C=RegExp("^"+w.call(F).replace(p,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y(v){if(!l(v)||o(v))return!1;var D=r(v)?C:S;return D.test(f(v))}return JT=y,JT}var eS,hO;function r7(){if(hO)return eS;hO=1;function r(o,l){return o==null?void 0:o[l]}return eS=r,eS}var tS,pO;function Af(){if(pO)return tS;pO=1;var r=n7(),o=r7();function l(f,p){var S=o(f,p);return r(S)?S:void 0}return tS=l,tS}var nS,gO;function sE(){if(gO)return nS;gO=1;var r=Af(),o=r(Object,"create");return nS=o,nS}var rS,mO;function i7(){if(mO)return rS;mO=1;var r=sE();function o(){this.__data__=r?r(null):{},this.size=0}return rS=o,rS}var iS,vO;function o7(){if(vO)return iS;vO=1;function r(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}return iS=r,iS}var oS,yO;function a7(){if(yO)return oS;yO=1;var r=sE(),o="__lodash_hash_undefined__",l=Object.prototype,f=l.hasOwnProperty;function p(S){var b=this.__data__;if(r){var g=b[S];return g===o?void 0:g}return f.call(b,S)?b[S]:void 0}return oS=p,oS}var aS,EO;function s7(){if(EO)return aS;EO=1;var r=sE(),o=Object.prototype,l=o.hasOwnProperty;function f(p){var S=this.__data__;return r?S[p]!==void 0:l.call(S,p)}return aS=f,aS}var sS,_O;function u7(){if(_O)return sS;_O=1;var r=sE(),o="__lodash_hash_undefined__";function l(f,p){var S=this.__data__;return this.size+=this.has(f)?0:1,S[f]=r&&p===void 0?o:p,this}return sS=l,sS}var uS,TO;function l7(){if(TO)return uS;TO=1;var r=i7(),o=o7(),l=a7(),f=s7(),p=u7();function S(b){var g=-1,w=b==null?0:b.length;for(this.clear();++g<w;){var F=b[g];this.set(F[0],F[1])}}return S.prototype.clear=r,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=f,S.prototype.set=p,uS=S,uS}var lS,SO;function c7(){if(SO)return lS;SO=1;function r(){this.__data__=[],this.size=0}return lS=r,lS}var cS,wO;function vC(){if(wO)return cS;wO=1;function r(o,l){return o===l||o!==o&&l!==l}return cS=r,cS}var fS,AO;function uE(){if(AO)return fS;AO=1;var r=vC();function o(l,f){for(var p=l.length;p--;)if(r(l[p][0],f))return p;return-1}return fS=o,fS}var dS,IO;function f7(){if(IO)return dS;IO=1;var r=uE(),o=Array.prototype,l=o.splice;function f(p){var S=this.__data__,b=r(S,p);if(b<0)return!1;var g=S.length-1;return b==g?S.pop():l.call(S,b,1),--this.size,!0}return dS=f,dS}var hS,bO;function d7(){if(bO)return hS;bO=1;var r=uE();function o(l){var f=this.__data__,p=r(f,l);return p<0?void 0:f[p][1]}return hS=o,hS}var pS,CO;function h7(){if(CO)return pS;CO=1;var r=uE();function o(l){return r(this.__data__,l)>-1}return pS=o,pS}var gS,RO;function p7(){if(RO)return gS;RO=1;var r=uE();function o(l,f){var p=this.__data__,S=r(p,l);return S<0?(++this.size,p.push([l,f])):p[S][1]=f,this}return gS=o,gS}var mS,NO;function lE(){if(NO)return mS;NO=1;var r=c7(),o=f7(),l=d7(),f=h7(),p=p7();function S(b){var g=-1,w=b==null?0:b.length;for(this.clear();++g<w;){var F=b[g];this.set(F[0],F[1])}}return S.prototype.clear=r,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=f,S.prototype.set=p,mS=S,mS}var vS,xO;function yC(){if(xO)return vS;xO=1;var r=Af(),o=Pu(),l=r(o,"Map");return vS=l,vS}var yS,MO;function g7(){if(MO)return yS;MO=1;var r=l7(),o=lE(),l=yC();function f(){this.size=0,this.__data__={hash:new r,map:new(l||o),string:new r}}return yS=f,yS}var ES,DO;function m7(){if(DO)return ES;DO=1;function r(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}return ES=r,ES}var _S,PO;function cE(){if(PO)return _S;PO=1;var r=m7();function o(l,f){var p=l.__data__;return r(f)?p[typeof f=="string"?"string":"hash"]:p.map}return _S=o,_S}var TS,OO;function v7(){if(OO)return TS;OO=1;var r=cE();function o(l){var f=r(this,l).delete(l);return this.size-=f?1:0,f}return TS=o,TS}var SS,LO;function y7(){if(LO)return SS;LO=1;var r=cE();function o(l){return r(this,l).get(l)}return SS=o,SS}var wS,kO;function E7(){if(kO)return wS;kO=1;var r=cE();function o(l){return r(this,l).has(l)}return wS=o,wS}var AS,FO;function _7(){if(FO)return AS;FO=1;var r=cE();function o(l,f){var p=r(this,l),S=p.size;return p.set(l,f),this.size+=p.size==S?0:1,this}return AS=o,AS}var IS,UO;function EC(){if(UO)return IS;UO=1;var r=g7(),o=v7(),l=y7(),f=E7(),p=_7();function S(b){var g=-1,w=b==null?0:b.length;for(this.clear();++g<w;){var F=b[g];this.set(F[0],F[1])}}return S.prototype.clear=r,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=f,S.prototype.set=p,IS=S,IS}var bS,BO;function T7(){if(BO)return bS;BO=1;var r="__lodash_hash_undefined__";function o(l){return this.__data__.set(l,r),this}return bS=o,bS}var CS,jO;function S7(){if(jO)return CS;jO=1;function r(o){return this.__data__.has(o)}return CS=r,CS}var RS,ZO;function EU(){if(ZO)return RS;ZO=1;var r=EC(),o=T7(),l=S7();function f(p){var S=-1,b=p==null?0:p.length;for(this.__data__=new r;++S<b;)this.add(p[S])}return f.prototype.add=f.prototype.push=o,f.prototype.has=l,RS=f,RS}var NS,GO;function w7(){if(GO)return NS;GO=1;function r(o,l,f,p){for(var S=o.length,b=f+(p?1:-1);p?b--:++b<S;)if(l(o[b],b,o))return b;return-1}return NS=r,NS}var xS,qO;function A7(){if(qO)return xS;qO=1;function r(o){return o!==o}return xS=r,xS}var MS,HO;function I7(){if(HO)return MS;HO=1;function r(o,l,f){for(var p=f-1,S=o.length;++p<S;)if(o[p]===l)return p;return-1}return MS=r,MS}var DS,KO;function b7(){if(KO)return DS;KO=1;var r=w7(),o=A7(),l=I7();function f(p,S,b){return S===S?l(p,S,b):r(p,o,b)}return DS=f,DS}var PS,VO;function C7(){if(VO)return PS;VO=1;var r=b7();function o(l,f){var p=l==null?0:l.length;return!!p&&r(l,f,0)>-1}return PS=o,PS}var OS,zO;function R7(){if(zO)return OS;zO=1;function r(o,l,f){for(var p=-1,S=o==null?0:o.length;++p<S;)if(f(l,o[p]))return!0;return!1}return OS=r,OS}var LS,YO;function _C(){if(YO)return LS;YO=1;function r(o,l){for(var f=-1,p=o==null?0:o.length,S=Array(p);++f<p;)S[f]=l(o[f],f,o);return S}return LS=r,LS}var kS,WO;function TC(){if(WO)return kS;WO=1;function r(o){return function(l){return o(l)}}return kS=r,kS}var FS,$O;function _U(){if($O)return FS;$O=1;function r(o,l){return o.has(l)}return FS=r,FS}var US,XO;function N7(){if(XO)return US;XO=1;var r=EU(),o=C7(),l=R7(),f=_C(),p=TC(),S=_U(),b=200;function g(w,F,C,y){var v=-1,D=o,m=!0,T=w.length,U=[],x=F.length;if(!T)return U;C&&(F=f(F,p(C))),y?(D=l,m=!1):F.length>=b&&(D=S,m=!1,F=new r(F));e:for(;++v<T;){var _=w[v],I=C==null?_:C(_);if(_=y||_!==0?_:0,m&&I===I){for(var R=x;R--;)if(F[R]===I)continue e;U.push(_)}else D(F,I,y)||U.push(_)}return U}return US=g,US}var BS,QO;function TU(){if(QO)return BS;QO=1;function r(o,l){for(var f=-1,p=l.length,S=o.length;++f<p;)o[S+f]=l[f];return o}return BS=r,BS}var jS,JO;function x7(){if(JO)return jS;JO=1;var r=tm(),o=Ah(),l="[object Arguments]";function f(p){return o(p)&&r(p)==l}return jS=f,jS}var ZS,eL;function SC(){if(eL)return ZS;eL=1;var r=x7(),o=Ah(),l=Object.prototype,f=l.hasOwnProperty,p=l.propertyIsEnumerable,S=r(function(){return arguments}())?r:function(b){return o(b)&&f.call(b,"callee")&&!p.call(b,"callee")};return ZS=S,ZS}var GS,tL;function Ds(){if(tL)return GS;tL=1;var r=Array.isArray;return GS=r,GS}var qS,nL;function M7(){if(nL)return qS;nL=1;var r=em(),o=SC(),l=Ds(),f=r?r.isConcatSpreadable:void 0;function p(S){return l(S)||o(S)||!!(f&&S&&S[f])}return qS=p,qS}var HS,rL;function SU(){if(rL)return HS;rL=1;var r=TU(),o=M7();function l(f,p,S,b,g){var w=-1,F=f.length;for(S||(S=o),g||(g=[]);++w<F;){var C=f[w];p>0&&S(C)?p>1?l(C,p-1,S,b,g):r(g,C):b||(g[g.length]=C)}return g}return HS=l,HS}var KS,iL;function rm(){if(iL)return KS;iL=1;function r(o){return o}return KS=r,KS}var VS,oL;function D7(){if(oL)return VS;oL=1;function r(o,l,f){switch(f.length){case 0:return o.call(l);case 1:return o.call(l,f[0]);case 2:return o.call(l,f[0],f[1]);case 3:return o.call(l,f[0],f[1],f[2])}return o.apply(l,f)}return VS=r,VS}var zS,aL;function P7(){if(aL)return zS;aL=1;var r=D7(),o=Math.max;function l(f,p,S){return p=o(p===void 0?f.length-1:p,0),function(){for(var b=arguments,g=-1,w=o(b.length-p,0),F=Array(w);++g<w;)F[g]=b[p+g];g=-1;for(var C=Array(p+1);++g<p;)C[g]=b[g];return C[p]=S(F),r(f,this,C)}}return zS=l,zS}var YS,sL;function O7(){if(sL)return YS;sL=1;function r(o){return function(){return o}}return YS=r,YS}var WS,uL;function L7(){if(uL)return WS;uL=1;var r=Af(),o=function(){try{var l=r(Object,"defineProperty");return l({},"",{}),l}catch(f){}}();return WS=o,WS}var $S,lL;function k7(){if(lL)return $S;lL=1;var r=O7(),o=L7(),l=rm(),f=o?function(p,S){return o(p,"toString",{configurable:!0,enumerable:!1,value:r(S),writable:!0})}:l;return $S=f,$S}var XS,cL;function F7(){if(cL)return XS;cL=1;var r=800,o=16,l=Date.now;function f(p){var S=0,b=0;return function(){var g=l(),w=o-(g-b);if(b=g,w>0){if(++S>=r)return arguments[0]}else S=0;return p.apply(void 0,arguments)}}return XS=f,XS}var QS,fL;function U7(){if(fL)return QS;fL=1;var r=k7(),o=F7(),l=o(r);return QS=l,QS}var JS,dL;function wU(){if(dL)return JS;dL=1;var r=rm(),o=P7(),l=U7();function f(p,S){return l(o(p,S,r),p+"")}return JS=f,JS}var ew,hL;function wC(){if(hL)return ew;hL=1;var r=9007199254740991;function o(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=r}return ew=o,ew}var tw,pL;function im(){if(pL)return tw;pL=1;var r=vU(),o=wC();function l(f){return f!=null&&o(f.length)&&!r(f)}return tw=l,tw}var nw,gL;function B7(){if(gL)return nw;gL=1;var r=im(),o=Ah();function l(f){return o(f)&&r(f)}return nw=l,nw}var rw,mL;function j7(){if(mL)return rw;mL=1;var r=N7(),o=SU(),l=wU(),f=B7(),p=l(function(S,b){return f(S)?r(S,o(b,1,f,!0)):[]});return rw=p,rw}var iw,vL;function AU(){if(vL)return iw;vL=1;function r(o,l){for(var f=-1,p=o==null?0:o.length,S=0,b=[];++f<p;){var g=o[f];l(g,f,o)&&(b[S++]=g)}return b}return iw=r,iw}var ow,yL;function Z7(){if(yL)return ow;yL=1;function r(o){return function(l,f,p){for(var S=-1,b=Object(l),g=p(l),w=g.length;w--;){var F=g[o?w:++S];if(f(b[F],F,b)===!1)break}return l}}return ow=r,ow}var aw,EL;function G7(){if(EL)return aw;EL=1;var r=Z7(),o=r();return aw=o,aw}var sw,_L;function q7(){if(_L)return sw;_L=1;function r(o,l){for(var f=-1,p=Array(o);++f<o;)p[f]=l(f);return p}return sw=r,sw}var pg={exports:{}},uw,TL;function H7(){if(TL)return uw;TL=1;function r(){return!1}return uw=r,uw}pg.exports;var SL;function IU(){return SL||(SL=1,function(r,o){var l=Pu(),f=H7(),p=o&&!o.nodeType&&o,S=p&&!0&&r&&!r.nodeType&&r,b=S&&S.exports===p,g=b?l.Buffer:void 0,w=g?g.isBuffer:void 0,F=w||f;r.exports=F}(pg,pg.exports)),pg.exports}var lw,wL;function AC(){if(wL)return lw;wL=1;var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;function l(f,p){var S=typeof f;return p=p==null?r:p,!!p&&(S=="number"||S!="symbol"&&o.test(f))&&f>-1&&f%1==0&&f<p}return lw=l,lw}var cw,AL;function K7(){if(AL)return cw;AL=1;var r=tm(),o=wC(),l=Ah(),f="[object Arguments]",p="[object Array]",S="[object Boolean]",b="[object Date]",g="[object Error]",w="[object Function]",F="[object Map]",C="[object Number]",y="[object Object]",v="[object RegExp]",D="[object Set]",m="[object String]",T="[object WeakMap]",U="[object ArrayBuffer]",x="[object DataView]",_="[object Float32Array]",I="[object Float64Array]",R="[object Int8Array]",j="[object Int16Array]",z="[object Int32Array]",W="[object Uint8Array]",X="[object Uint8ClampedArray]",le="[object Uint16Array]",N="[object Uint32Array]",$={};$[_]=$[I]=$[R]=$[j]=$[z]=$[W]=$[X]=$[le]=$[N]=!0,$[f]=$[p]=$[U]=$[S]=$[x]=$[b]=$[g]=$[w]=$[F]=$[C]=$[y]=$[v]=$[D]=$[m]=$[T]=!1;function fe(oe){return l(oe)&&o(oe.length)&&!!$[r(oe)]}return cw=fe,cw}var gg={exports:{}};gg.exports;var IL;function V7(){return IL||(IL=1,function(r,o){var l=gU(),f=o&&!o.nodeType&&o,p=f&&!0&&r&&!r.nodeType&&r,S=p&&p.exports===f,b=S&&l.process,g=function(){try{var w=p&&p.require&&p.require("util").types;return w||b&&b.binding&&b.binding("util")}catch(F){}}();r.exports=g}(gg,gg.exports)),gg.exports}var fw,bL;function bU(){if(bL)return fw;bL=1;var r=K7(),o=TC(),l=V7(),f=l&&l.isTypedArray,p=f?o(f):r;return fw=p,fw}var dw,CL;function z7(){if(CL)return dw;CL=1;var r=q7(),o=SC(),l=Ds(),f=IU(),p=AC(),S=bU(),b=Object.prototype,g=b.hasOwnProperty;function w(F,C){var y=l(F),v=!y&&o(F),D=!y&&!v&&f(F),m=!y&&!v&&!D&&S(F),T=y||v||D||m,U=T?r(F.length,String):[],x=U.length;for(var _ in F)(C||g.call(F,_))&&!(T&&(_=="length"||D&&(_=="offset"||_=="parent")||m&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||p(_,x)))&&U.push(_);return U}return dw=w,dw}var hw,RL;function Y7(){if(RL)return hw;RL=1;var r=Object.prototype;function o(l){var f=l&&l.constructor,p=typeof f=="function"&&f.prototype||r;return l===p}return hw=o,hw}var pw,NL;function W7(){if(NL)return pw;NL=1;function r(o,l){return function(f){return o(l(f))}}return pw=r,pw}var gw,xL;function $7(){if(xL)return gw;xL=1;var r=W7(),o=r(Object.keys,Object);return gw=o,gw}var mw,ML;function X7(){if(ML)return mw;ML=1;var r=Y7(),o=$7(),l=Object.prototype,f=l.hasOwnProperty;function p(S){if(!r(S))return o(S);var b=[];for(var g in Object(S))f.call(S,g)&&g!="constructor"&&b.push(g);return b}return mw=p,mw}var vw,DL;function IC(){if(DL)return vw;DL=1;var r=z7(),o=X7(),l=im();function f(p){return l(p)?r(p):o(p)}return vw=f,vw}var yw,PL;function bC(){if(PL)return yw;PL=1;var r=G7(),o=IC();function l(f,p){return f&&r(f,p,o)}return yw=l,yw}var Ew,OL;function Q7(){if(OL)return Ew;OL=1;var r=im();function o(l,f){return function(p,S){if(p==null)return p;if(!r(p))return l(p,S);for(var b=p.length,g=f?b:-1,w=Object(p);(f?g--:++g<b)&&S(w[g],g,w)!==!1;);return p}}return Ew=o,Ew}var _w,LL;function CC(){if(LL)return _w;LL=1;var r=bC(),o=Q7(),l=o(r);return _w=l,_w}var Tw,kL;function J7(){if(kL)return Tw;kL=1;var r=CC();function o(l,f){var p=[];return r(l,function(S,b,g){f(S,b,g)&&p.push(S)}),p}return Tw=o,Tw}var Sw,FL;function eK(){if(FL)return Sw;FL=1;var r=lE();function o(){this.__data__=new r,this.size=0}return Sw=o,Sw}var ww,UL;function tK(){if(UL)return ww;UL=1;function r(o){var l=this.__data__,f=l.delete(o);return this.size=l.size,f}return ww=r,ww}var Aw,BL;function nK(){if(BL)return Aw;BL=1;function r(o){return this.__data__.get(o)}return Aw=r,Aw}var Iw,jL;function rK(){if(jL)return Iw;jL=1;function r(o){return this.__data__.has(o)}return Iw=r,Iw}var bw,ZL;function iK(){if(ZL)return bw;ZL=1;var r=lE(),o=yC(),l=EC(),f=200;function p(S,b){var g=this.__data__;if(g instanceof r){var w=g.__data__;if(!o||w.length<f-1)return w.push([S,b]),this.size=++g.size,this;g=this.__data__=new l(w)}return g.set(S,b),this.size=g.size,this}return bw=p,bw}var Cw,GL;function CU(){if(GL)return Cw;GL=1;var r=lE(),o=eK(),l=tK(),f=nK(),p=rK(),S=iK();function b(g){var w=this.__data__=new r(g);this.size=w.size}return b.prototype.clear=o,b.prototype.delete=l,b.prototype.get=f,b.prototype.has=p,b.prototype.set=S,Cw=b,Cw}var Rw,qL;function oK(){if(qL)return Rw;qL=1;function r(o,l){for(var f=-1,p=o==null?0:o.length;++f<p;)if(l(o[f],f,o))return!0;return!1}return Rw=r,Rw}var Nw,HL;function RU(){if(HL)return Nw;HL=1;var r=EU(),o=oK(),l=_U(),f=1,p=2;function S(b,g,w,F,C,y){var v=w&f,D=b.length,m=g.length;if(D!=m&&!(v&&m>D))return!1;var T=y.get(b),U=y.get(g);if(T&&U)return T==g&&U==b;var x=-1,_=!0,I=w&p?new r:void 0;for(y.set(b,g),y.set(g,b);++x<D;){var R=b[x],j=g[x];if(F)var z=v?F(j,R,x,g,b,y):F(R,j,x,b,g,y);if(z!==void 0){if(z)continue;_=!1;break}if(I){if(!o(g,function(W,X){if(!l(I,X)&&(R===W||C(R,W,w,F,y)))return I.push(X)})){_=!1;break}}else if(!(R===j||C(R,j,w,F,y))){_=!1;break}}return y.delete(b),y.delete(g),_}return Nw=S,Nw}var xw,KL;function aK(){if(KL)return xw;KL=1;var r=Pu(),o=r.Uint8Array;return xw=o,xw}var Mw,VL;function sK(){if(VL)return Mw;VL=1;function r(o){var l=-1,f=Array(o.size);return o.forEach(function(p,S){f[++l]=[S,p]}),f}return Mw=r,Mw}var Dw,zL;function uK(){if(zL)return Dw;zL=1;function r(o){var l=-1,f=Array(o.size);return o.forEach(function(p){f[++l]=p}),f}return Dw=r,Dw}var Pw,YL;function lK(){if(YL)return Pw;YL=1;var r=em(),o=aK(),l=vC(),f=RU(),p=sK(),S=uK(),b=1,g=2,w="[object Boolean]",F="[object Date]",C="[object Error]",y="[object Map]",v="[object Number]",D="[object RegExp]",m="[object Set]",T="[object String]",U="[object Symbol]",x="[object ArrayBuffer]",_="[object DataView]",I=r?r.prototype:void 0,R=I?I.valueOf:void 0;function j(z,W,X,le,N,$,fe){switch(X){case _:if(z.byteLength!=W.byteLength||z.byteOffset!=W.byteOffset)return!1;z=z.buffer,W=W.buffer;case x:return!(z.byteLength!=W.byteLength||!$(new o(z),new o(W)));case w:case F:case v:return l(+z,+W);case C:return z.name==W.name&&z.message==W.message;case D:case T:return z==W+"";case y:var oe=p;case m:var he=le&b;if(oe||(oe=S),z.size!=W.size&&!he)return!1;var Ie=fe.get(z);if(Ie)return Ie==W;le|=g,fe.set(z,W);var Xe=f(oe(z),oe(W),le,N,$,fe);return fe.delete(z),Xe;case U:if(R)return R.call(z)==R.call(W)}return!1}return Pw=j,Pw}var Ow,WL;function cK(){if(WL)return Ow;WL=1;var r=TU(),o=Ds();function l(f,p,S){var b=p(f);return o(f)?b:r(b,S(f))}return Ow=l,Ow}var Lw,$L;function fK(){if($L)return Lw;$L=1;function r(){return[]}return Lw=r,Lw}var kw,XL;function dK(){if(XL)return kw;XL=1;var r=AU(),o=fK(),l=Object.prototype,f=l.propertyIsEnumerable,p=Object.getOwnPropertySymbols,S=p?function(b){return b==null?[]:(b=Object(b),r(p(b),function(g){return f.call(b,g)}))}:o;return kw=S,kw}var Fw,QL;function hK(){if(QL)return Fw;QL=1;var r=cK(),o=dK(),l=IC();function f(p){return r(p,l,o)}return Fw=f,Fw}var Uw,JL;function pK(){if(JL)return Uw;JL=1;var r=hK(),o=1,l=Object.prototype,f=l.hasOwnProperty;function p(S,b,g,w,F,C){var y=g&o,v=r(S),D=v.length,m=r(b),T=m.length;if(D!=T&&!y)return!1;for(var U=D;U--;){var x=v[U];if(!(y?x in b:f.call(b,x)))return!1}var _=C.get(S),I=C.get(b);if(_&&I)return _==b&&I==S;var R=!0;C.set(S,b),C.set(b,S);for(var j=y;++U<D;){x=v[U];var z=S[x],W=b[x];if(w)var X=y?w(W,z,x,b,S,C):w(z,W,x,S,b,C);if(!(X===void 0?z===W||F(z,W,g,w,C):X)){R=!1;break}j||(j=x=="constructor")}if(R&&!j){var le=S.constructor,N=b.constructor;le!=N&&"constructor"in S&&"constructor"in b&&!(typeof le=="function"&&le instanceof le&&typeof N=="function"&&N instanceof N)&&(R=!1)}return C.delete(S),C.delete(b),R}return Uw=p,Uw}var Bw,ek;function gK(){if(ek)return Bw;ek=1;var r=Af(),o=Pu(),l=r(o,"DataView");return Bw=l,Bw}var jw,tk;function mK(){if(tk)return jw;tk=1;var r=Af(),o=Pu(),l=r(o,"Promise");return jw=l,jw}var Zw,nk;function vK(){if(nk)return Zw;nk=1;var r=Af(),o=Pu(),l=r(o,"Set");return Zw=l,Zw}var Gw,rk;function yK(){if(rk)return Gw;rk=1;var r=Af(),o=Pu(),l=r(o,"WeakMap");return Gw=l,Gw}var qw,ik;function EK(){if(ik)return qw;ik=1;var r=gK(),o=yC(),l=mK(),f=vK(),p=yK(),S=tm(),b=yU(),g="[object Map]",w="[object Object]",F="[object Promise]",C="[object Set]",y="[object WeakMap]",v="[object DataView]",D=b(r),m=b(o),T=b(l),U=b(f),x=b(p),_=S;return(r&&_(new r(new ArrayBuffer(1)))!=v||o&&_(new o)!=g||l&&_(l.resolve())!=F||f&&_(new f)!=C||p&&_(new p)!=y)&&(_=function(I){var R=S(I),j=R==w?I.constructor:void 0,z=j?b(j):"";if(z)switch(z){case D:return v;case m:return g;case T:return F;case U:return C;case x:return y}return R}),qw=_,qw}var Hw,ok;function _K(){if(ok)return Hw;ok=1;var r=CU(),o=RU(),l=lK(),f=pK(),p=EK(),S=Ds(),b=IU(),g=bU(),w=1,F="[object Arguments]",C="[object Array]",y="[object Object]",v=Object.prototype,D=v.hasOwnProperty;function m(T,U,x,_,I,R){var j=S(T),z=S(U),W=j?C:p(T),X=z?C:p(U);W=W==F?y:W,X=X==F?y:X;var le=W==y,N=X==y,$=W==X;if($&&b(T)){if(!b(U))return!1;j=!0,le=!1}if($&&!le)return R||(R=new r),j||g(T)?o(T,U,x,_,I,R):l(T,U,W,x,_,I,R);if(!(x&w)){var fe=le&&D.call(T,"__wrapped__"),oe=N&&D.call(U,"__wrapped__");if(fe||oe){var he=fe?T.value():T,Ie=oe?U.value():U;return R||(R=new r),I(he,Ie,x,_,R)}}return $?(R||(R=new r),f(T,U,x,_,I,R)):!1}return Hw=m,Hw}var Kw,ak;function NU(){if(ak)return Kw;ak=1;var r=_K(),o=Ah();function l(f,p,S,b,g){return f===p?!0:f==null||p==null||!o(f)&&!o(p)?f!==f&&p!==p:r(f,p,S,b,l,g)}return Kw=l,Kw}var Vw,sk;function TK(){if(sk)return Vw;sk=1;var r=CU(),o=NU(),l=1,f=2;function p(S,b,g,w){var F=g.length,C=F,y=!w;if(S==null)return!C;for(S=Object(S);F--;){var v=g[F];if(y&&v[2]?v[1]!==S[v[0]]:!(v[0]in S))return!1}for(;++F<C;){v=g[F];var D=v[0],m=S[D],T=v[1];if(y&&v[2]){if(m===void 0&&!(D in S))return!1}else{var U=new r;if(w)var x=w(m,T,D,S,b,U);if(!(x===void 0?o(T,m,l|f,w,U):x))return!1}}return!0}return Vw=p,Vw}var zw,uk;function xU(){if(uk)return zw;uk=1;var r=wf();function o(l){return l===l&&!r(l)}return zw=o,zw}var Yw,lk;function SK(){if(lk)return Yw;lk=1;var r=xU(),o=IC();function l(f){for(var p=o(f),S=p.length;S--;){var b=p[S],g=f[b];p[S]=[b,g,r(g)]}return p}return Yw=l,Yw}var Ww,ck;function MU(){if(ck)return Ww;ck=1;function r(o,l){return function(f){return f==null?!1:f[o]===l&&(l!==void 0||o in Object(f))}}return Ww=r,Ww}var $w,fk;function wK(){if(fk)return $w;fk=1;var r=TK(),o=SK(),l=MU();function f(p){var S=o(p);return S.length==1&&S[0][2]?l(S[0][0],S[0][1]):function(b){return b===p||r(b,p,S)}}return $w=f,$w}var Xw,dk;function RC(){if(dk)return Xw;dk=1;var r=Ds(),o=nm(),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/;function p(S,b){if(r(S))return!1;var g=typeof S;return g=="number"||g=="symbol"||g=="boolean"||S==null||o(S)?!0:f.test(S)||!l.test(S)||b!=null&&S in Object(b)}return Xw=p,Xw}var Qw,hk;function AK(){if(hk)return Qw;hk=1;var r=EC(),o="Expected a function";function l(f,p){if(typeof f!="function"||p!=null&&typeof p!="function")throw new TypeError(o);var S=function(){var b=arguments,g=p?p.apply(this,b):b[0],w=S.cache;if(w.has(g))return w.get(g);var F=f.apply(this,b);return S.cache=w.set(g,F)||w,F};return S.cache=new(l.Cache||r),S}return l.Cache=r,Qw=l,Qw}var Jw,pk;function IK(){if(pk)return Jw;pk=1;var r=AK(),o=500;function l(f){var p=r(f,function(b){return S.size===o&&S.clear(),b}),S=p.cache;return p}return Jw=l,Jw}var eA,gk;function bK(){if(gk)return eA;gk=1;var r=IK(),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,f=r(function(p){var S=[];return p.charCodeAt(0)===46&&S.push(""),p.replace(o,function(b,g,w,F){S.push(w?F.replace(l,"$1"):g||b)}),S});return eA=f,eA}var tA,mk;function CK(){if(mk)return tA;mk=1;var r=em(),o=_C(),l=Ds(),f=nm(),p=1/0,S=r?r.prototype:void 0,b=S?S.toString:void 0;function g(w){if(typeof w=="string")return w;if(l(w))return o(w,g)+"";if(f(w))return b?b.call(w):"";var F=w+"";return F=="0"&&1/w==-p?"-0":F}return tA=g,tA}var nA,vk;function DU(){if(vk)return nA;vk=1;var r=CK();function o(l){return l==null?"":r(l)}return nA=o,nA}var rA,yk;function PU(){if(yk)return rA;yk=1;var r=Ds(),o=RC(),l=bK(),f=DU();function p(S,b){return r(S)?S:o(S,b)?[S]:l(f(S))}return rA=p,rA}var iA,Ek;function fE(){if(Ek)return iA;Ek=1;var r=nm(),o=1/0;function l(f){if(typeof f=="string"||r(f))return f;var p=f+"";return p=="0"&&1/f==-o?"-0":p}return iA=l,iA}var oA,_k;function NC(){if(_k)return oA;_k=1;var r=PU(),o=fE();function l(f,p){p=r(p,f);for(var S=0,b=p.length;f!=null&&S<b;)f=f[o(p[S++])];return S&&S==b?f:void 0}return oA=l,oA}var aA,Tk;function RK(){if(Tk)return aA;Tk=1;var r=NC();function o(l,f,p){var S=l==null?void 0:r(l,f);return S===void 0?p:S}return aA=o,aA}var sA,Sk;function NK(){if(Sk)return sA;Sk=1;function r(o,l){return o!=null&&l in Object(o)}return sA=r,sA}var uA,wk;function xK(){if(wk)return uA;wk=1;var r=PU(),o=SC(),l=Ds(),f=AC(),p=wC(),S=fE();function b(g,w,F){w=r(w,g);for(var C=-1,y=w.length,v=!1;++C<y;){var D=S(w[C]);if(!(v=g!=null&&F(g,D)))break;g=g[D]}return v||++C!=y?v:(y=g==null?0:g.length,!!y&&p(y)&&f(D,y)&&(l(g)||o(g)))}return uA=b,uA}var lA,Ak;function MK(){if(Ak)return lA;Ak=1;var r=NK(),o=xK();function l(f,p){return f!=null&&o(f,p,r)}return lA=l,lA}var cA,Ik;function DK(){if(Ik)return cA;Ik=1;var r=NU(),o=RK(),l=MK(),f=RC(),p=xU(),S=MU(),b=fE(),g=1,w=2;function F(C,y){return f(C)&&p(y)?S(b(C),y):function(v){var D=o(v,C);return D===void 0&&D===y?l(v,C):r(y,D,g|w)}}return cA=F,cA}var fA,bk;function PK(){if(bk)return fA;bk=1;function r(o){return function(l){return l==null?void 0:l[o]}}return fA=r,fA}var dA,Ck;function OK(){if(Ck)return dA;Ck=1;var r=NC();function o(l){return function(f){return r(f,l)}}return dA=o,dA}var hA,Rk;function LK(){if(Rk)return hA;Rk=1;var r=PK(),o=OK(),l=RC(),f=fE();function p(S){return l(S)?r(f(S)):o(S)}return hA=p,hA}var pA,Nk;function xC(){if(Nk)return pA;Nk=1;var r=wK(),o=DK(),l=rm(),f=Ds(),p=LK();function S(b){return typeof b=="function"?b:b==null?l:typeof b=="object"?f(b)?o(b[0],b[1]):r(b):p(b)}return pA=S,pA}var gA,xk;function kK(){if(xk)return gA;xk=1;var r=AU(),o=J7(),l=xC(),f=Ds();function p(S,b){var g=f(S)?r:o;return g(S,l(b,3))}return gA=p,gA}var mA,Mk;function FK(){if(Mk)return mA;Mk=1;function r(o,l,f){var p;return f(o,function(S,b,g){if(l(S,b,g))return p=b,!1}),p}return mA=r,mA}var vA,Dk;function UK(){if(Dk)return vA;Dk=1;var r=FK(),o=bC(),l=xC();function f(p,S){return r(p,l(S,3),o)}return vA=f,vA}var yA,Pk;function BK(){if(Pk)return yA;Pk=1;function r(o){return o&&o.length?o[0]:void 0}return yA=r,yA}var EA,Ok;function jK(){return Ok||(Ok=1,EA=BK()),EA}var _A,Lk;function ZK(){if(Lk)return _A;Lk=1;function r(o,l){for(var f=-1,p=o==null?0:o.length;++f<p&&l(o[f],f,o)!==!1;);return o}return _A=r,_A}var TA,kk;function OU(){if(kk)return TA;kk=1;var r=rm();function o(l){return typeof l=="function"?l:r}return TA=o,TA}var SA,Fk;function GK(){if(Fk)return SA;Fk=1;var r=ZK(),o=CC(),l=OU(),f=Ds();function p(S,b){var g=f(S)?r:o;return g(S,l(b))}return SA=p,SA}var wA,Uk;function qK(){if(Uk)return wA;Uk=1;var r=bC(),o=OU();function l(f,p){return f&&r(f,o(p))}return wA=l,wA}var AA,Bk;function HK(){if(Bk)return AA;Bk=1;function r(){}return AA=r,AA}var IA,jk;function KK(){if(jk)return IA;jk=1;var r=CC(),o=im();function l(f,p){var S=-1,b=o(f)?Array(f.length):[];return r(f,function(g,w,F){b[++S]=p(g,w,F)}),b}return IA=l,IA}var bA,Zk;function VK(){if(Zk)return bA;Zk=1;function r(o,l){var f=o.length;for(o.sort(l);f--;)o[f]=o[f].value;return o}return bA=r,bA}var CA,Gk;function zK(){if(Gk)return CA;Gk=1;var r=nm();function o(l,f){if(l!==f){var p=l!==void 0,S=l===null,b=l===l,g=r(l),w=f!==void 0,F=f===null,C=f===f,y=r(f);if(!F&&!y&&!g&&l>f||g&&w&&C&&!F&&!y||S&&w&&C||!p&&C||!b)return 1;if(!S&&!g&&!y&&l<f||y&&p&&b&&!S&&!g||F&&p&&b||!w&&b||!C)return-1}return 0}return CA=o,CA}var RA,qk;function YK(){if(qk)return RA;qk=1;var r=zK();function o(l,f,p){for(var S=-1,b=l.criteria,g=f.criteria,w=b.length,F=p.length;++S<w;){var C=r(b[S],g[S]);if(C){if(S>=F)return C;var y=p[S];return C*(y=="desc"?-1:1)}}return l.index-f.index}return RA=o,RA}var NA,Hk;function WK(){if(Hk)return NA;Hk=1;var r=_C(),o=NC(),l=xC(),f=KK(),p=VK(),S=TC(),b=YK(),g=rm(),w=Ds();function F(C,y,v){y.length?y=r(y,function(T){return w(T)?function(U){return o(U,T.length===1?T[0]:T)}:T}):y=[g];var D=-1;y=r(y,S(l));var m=f(C,function(T,U,x){var _=r(y,function(I){return I(T)});return{criteria:_,index:++D,value:T}});return p(m,function(T,U){return b(T,U,v)})}return NA=F,NA}var xA,Kk;function $K(){if(Kk)return xA;Kk=1;var r=vC(),o=im(),l=AC(),f=wf();function p(S,b,g){if(!f(g))return!1;var w=typeof b;return(w=="number"?o(g)&&l(b,g.length):w=="string"&&b in g)?r(g[b],S):!1}return xA=p,xA}var MA,Vk;function XK(){if(Vk)return MA;Vk=1;var r=SU(),o=WK(),l=wU(),f=$K(),p=l(function(S,b){if(S==null)return[];var g=b.length;return g>1&&f(S,b[0],b[1])?b=[]:g>2&&f(b[0],b[1],b[2])&&(b=[b[0]]),o(S,r(b,1),[])});return MA=p,MA}var DA,zk;function QK(){if(zk)return DA;zk=1;var r=mU(),o=wf(),l="Expected a function";function f(p,S,b){var g=!0,w=!0;if(typeof p!="function")throw new TypeError(l);return o(b)&&(g="leading"in b?!!b.leading:g,w="trailing"in b?!!b.trailing:w),r(p,S,{leading:g,maxWait:S,trailing:w})}return DA=f,DA}var PA,Yk;function JK(){if(Yk)return PA;Yk=1;var r=DU(),o=0;function l(f){var p=++o;return r(f)+p}return PA=l,PA}(function(r,o){(function(l,f){r.exports=f(mU(),j7(),kK(),UK(),jK(),GK(),qK(),HK(),XK(),QK(),JK(),pn)})(iu,function(l,f,p,S,b,g,w,F,C,y,v,D){return function(){var m={654:function(U,x,_){var I,R=this&&this.__assign||function(){return R=Object.assign||function(Ce){for(var te,Fe=1,O=arguments.length;Fe<O;Fe++)for(var M in te=arguments[Fe])Object.prototype.hasOwnProperty.call(te,M)&&(Ce[M]=te[M]);return Ce},R.apply(this,arguments)},j=this&&this.__createBinding||(Object.create?function(Ce,te,Fe,O){O===void 0&&(O=Fe);var M=Object.getOwnPropertyDescriptor(te,Fe);M&&!("get"in M?!te.__esModule:M.writable||M.configurable)||(M={enumerable:!0,get:function(){return te[Fe]}}),Object.defineProperty(Ce,O,M)}:function(Ce,te,Fe,O){O===void 0&&(O=Fe),Ce[O]=te[Fe]}),z=this&&this.__setModuleDefault||(Object.create?function(Ce,te){Object.defineProperty(Ce,"default",{enumerable:!0,value:te})}:function(Ce,te){Ce.default=te}),W=this&&this.__importStar||function(Ce){if(Ce&&Ce.__esModule)return Ce;var te={};if(Ce!=null)for(var Fe in Ce)Fe!=="default"&&Object.prototype.hasOwnProperty.call(Ce,Fe)&&j(te,Ce,Fe);return z(te,Ce),te},X=this&&this.__spreadArray||function(Ce,te,Fe){if(Fe||arguments.length===2)for(var O,M=0,q=te.length;M<q;M++)!O&&M in te||(O||(O=Array.prototype.slice.call(te,0,M)),O[M]=te[M]);return Ce.concat(O||Array.prototype.slice.call(te))},le=this&&this.__importDefault||function(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}};Object.defineProperty(x,"__esModule",{value:!0}),x.doesFocusableExist=x.getCurrentFocusKey=x.updateAllLayouts=x.resume=x.pause=x.navigateByDirection=x.setFocus=x.setKeyMap=x.destroy=x.setThrottle=x.init=x.SpatialNavigation=x.ROOT_FOCUS_KEY=void 0;var N=le(_(150)),$=le(_(117)),fe=le(_(747)),oe=le(_(23)),he=le(_(842)),Ie=le(_(682)),Xe=le(_(784)),Ae=le(_(432)),Ze=le(_(67)),it=le(_(35)),ut=le(_(119)),$e=W(_(964)),lt="left",At="right",Oe="up",Qe="down",ct="enter",Qt=((I={}).left=[37,"ArrowLeft"],I.up=[38,"ArrowUp"],I.right=[39,"ArrowRight"],I.down=[40,"ArrowDown"],I.enter=[13,"Enter"],I);x.ROOT_FOCUS_KEY="SN:ROOT";var Kt=["#0FF","#FF0","#F0F"],St={leading:!0,trailing:!1},Lt=function(){function Ce(){this.focusableComponents={},this.focusKey=null,this.parentsHavingFocusedChild=[],this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.useGetBoundingClientRect=!1,this.shouldFocusDOMNode=!1,this.shouldUseNativeEvents=!1,this.writingDirection=ut.default.LTR,this.pressedKeys={},this.paused=!1,this.keyDownEventListener=null,this.keyUpEventListener=null,this.keyMap=Qt,this.onKeyEvent=this.onKeyEvent.bind(this),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.setFocus=this.setFocus.bind(this),this.updateAllLayouts=this.updateAllLayouts.bind(this),this.navigateByDirection=this.navigateByDirection.bind(this),this.init=this.init.bind(this),this.setThrottle=this.setThrottle.bind(this),this.destroy=this.destroy.bind(this),this.setKeyMap=this.setKeyMap.bind(this),this.getCurrentFocusKey=this.getCurrentFocusKey.bind(this),this.doesFocusableExist=this.doesFocusableExist.bind(this),this.setFocusDebounced=(0,N.default)(this.setFocus,300,{leading:!1,trailing:!0}),this.debug=!1,this.visualDebugger=null,this.logIndex=0}return Ce.getCutoffCoordinate=function(te,Fe,O,M,q){var K=te?M.top:q===ut.default.LTR?M.left:M.right,ye=te?M.bottom:q===ut.default.LTR?M.right:M.left;return Fe?O?K:ye:O?ye:K},Ce.getRefCorners=function(te,Fe,O){var M={a:{x:0,y:0},b:{x:0,y:0}};switch(te){case Oe:var q=Fe?O.bottom:O.top;M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case Qe:q=Fe?O.top:O.bottom,M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case lt:var K=Fe?O.right:O.left;M.a={x:K,y:O.top},M.b={x:K,y:O.bottom};break;case At:K=Fe?O.left:O.right,M.a={x:K,y:O.top},M.b={x:K,y:O.bottom}}return M},Ce.isAdjacentSlice=function(te,Fe,O){var M=te.a,q=te.b,K=Fe.a,ye=Fe.b,de=O?"x":"y",He=M[de],Tt=q[de],ot=K[de],rt=ye[de],et=.2*(Tt-He);return Math.max(0,Math.min(Tt,rt)-Math.max(He,ot))>=et},Ce.getPrimaryAxisDistance=function(te,Fe,O){var M=te.a,q=Fe.a,K=O?"y":"x";return Math.abs(q[K]-M[K])},Ce.getSecondaryAxisDistance=function(te,Fe,O){var M=te.a,q=te.b,K=Fe.a,ye=Fe.b,de=O?"x":"y",He=M[de],Tt=q[de],ot=K[de],rt=ye[de],et=[];return et.push(Math.abs(ot-He)),et.push(Math.abs(ot-Tt)),et.push(Math.abs(rt-He)),et.push(Math.abs(rt-Tt)),Math.min.apply(Math,et)},Ce.prototype.sortSiblingsByPriority=function(te,Fe,O,M){var q=this,K=O===Qe||O===Oe,ye=Ce.getRefCorners(O,!1,Fe);return(0,Ae.default)(te,function(de){var He=Ce.getRefCorners(O,!0,de.layout),Tt=Ce.isAdjacentSlice(ye,He,K),ot=Tt?Ce.getPrimaryAxisDistance:Ce.getSecondaryAxisDistance,rt=Tt?Ce.getSecondaryAxisDistance:Ce.getPrimaryAxisDistance,et=ot(ye,He,K),ft=rt(ye,He,K),yt=5*et+ft,_t=(yt+1)/(Tt?5:1);return q.log("smartNavigate","distance (primary, secondary, total weighted) for ".concat(de.focusKey," relative to ").concat(M," is"),et,ft,yt),q.log("smartNavigate","priority for ".concat(de.focusKey," relative to ").concat(M," is"),_t),q.visualDebugger&&(q.visualDebugger.drawPoint(He.a.x,He.a.y,"yellow",6),q.visualDebugger.drawPoint(He.b.x,He.b.y,"yellow",6)),_t})},Ce.prototype.init=function(te){var Fe=te===void 0?{}:te,O=Fe.debug,M=O!==void 0&&O,q=Fe.visualDebug,K=q!==void 0&&q,ye=Fe.nativeMode,de=ye!==void 0&&ye,He=Fe.throttle,Tt=He===void 0?0:He,ot=Fe.throttleKeypresses,rt=ot!==void 0&&ot,et=Fe.useGetBoundingClientRect,ft=et!==void 0&&et,yt=Fe.shouldFocusDOMNode,_t=yt!==void 0&&yt,Ct=Fe.shouldUseNativeEvents,hn=Ct!==void 0&&Ct,Xt=Fe.rtl,nn=Xt!==void 0&&Xt;this.enabled||(this.enabled=!0,this.nativeMode=de,this.throttleKeypresses=rt,this.useGetBoundingClientRect=ft,this.shouldFocusDOMNode=_t&&!de,this.shouldUseNativeEvents=hn,this.writingDirection=nn?ut.default.RTL:ut.default.LTR,this.debug=M,this.nativeMode||(Number.isInteger(Tt)&&Tt>0&&(this.throttle=Tt),this.bindEventHandlers(),K&&(this.visualDebugger=new it.default(this.writingDirection),this.startDrawLayouts())))},Ce.prototype.setThrottle=function(te){var Fe=te===void 0?{}:te,O=Fe.throttle,M=O===void 0?0:O,q=Fe.throttleKeypresses,K=q!==void 0&&q;this.throttleKeypresses=K,this.nativeMode||(this.unbindEventHandlers(),Number.isInteger(M)&&(this.throttle=M),this.bindEventHandlers())},Ce.prototype.startDrawLayouts=function(){var te=this,Fe=function(){requestAnimationFrame(function(){te.visualDebugger.clearLayouts(),(0,Xe.default)(te.focusableComponents,function(O,M){te.visualDebugger.drawLayout(O.layout,M,O.parentFocusKey)}),Fe()})};Fe()},Ce.prototype.destroy=function(){this.enabled&&(this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.focusKey=null,this.parentsHavingFocusedChild=[],this.focusableComponents={},this.paused=!1,this.keyMap=Qt,this.unbindEventHandlers())},Ce.prototype.getEventType=function(te){return(0,oe.default)(this.getKeyMap(),function(Fe){return Fe.includes(te)})},Ce.getKeyCode=function(te){return te.keyCode||te.code},Ce.prototype.bindEventHandlers=function(){var te=this;typeof window<"u"&&window.addEventListener&&(this.keyDownEventListener=function(Fe){if(te.paused!==!0){te.debug&&(te.logIndex+=1);var O=Ce.getKeyCode(Fe),M=te.getEventType(O);if(M){te.pressedKeys[M]=te.pressedKeys[M]?te.pressedKeys[M]+1:1,te.shouldUseNativeEvents||(Fe.preventDefault(),Fe.stopPropagation());var q={pressedKeys:te.pressedKeys};M===ct&&te.focusKey?te.onEnterPress(q):te.onArrowPress(M,q)===!1?(te.log("keyDownEventListener","default navigation prevented"),te.visualDebugger&&te.visualDebugger.clear()):te.onKeyEvent(Fe)}}},this.throttle&&(this.keyDownEventListenerThrottled=(0,Ze.default)(this.keyDownEventListener.bind(this),this.throttle,St)),this.keyUpEventListener=function(Fe){var O=Ce.getKeyCode(Fe),M=te.getEventType(O);delete te.pressedKeys[M],te.throttle&&!te.throttleKeypresses&&te.keyDownEventListenerThrottled.cancel(),M===ct&&te.focusKey&&te.onEnterRelease()},window.addEventListener("keyup",this.keyUpEventListener),window.addEventListener("keydown",this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener))},Ce.prototype.unbindEventHandlers=function(){if(typeof window<"u"&&window.removeEventListener){window.removeEventListener("keyup",this.keyUpEventListener),this.keyUpEventListener=null;var te=this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener;window.removeEventListener("keydown",te),this.keyDownEventListener=null}},Ce.prototype.onEnterPress=function(te){var Fe=this.focusableComponents[this.focusKey];Fe?Fe.focusable?Fe.onEnterPress&&Fe.onEnterPress(te):this.log("onEnterPress","componentNotFocusable"):this.log("onEnterPress","noComponent")},Ce.prototype.onEnterRelease=function(){var te=this.focusableComponents[this.focusKey];te?te.focusable?te.onEnterRelease&&te.onEnterRelease():this.log("onEnterRelease","componentNotFocusable"):this.log("onEnterRelease","noComponent")},Ce.prototype.onArrowPress=function(te,Fe){var O=this.focusableComponents[this.focusKey];if(O)return O&&O.onArrowPress&&O.onArrowPress(te,Fe);this.log("onArrowPress","noComponent")},Ce.prototype.navigateByDirection=function(te,Fe){if(this.paused!==!0&&this.enabled&&!this.nativeMode){var O=[Qe,Oe,lt,At];O.includes(te)?(this.log("navigateByDirection","direction",te),this.smartNavigate(te,null,Fe)):this.log("navigateByDirection","Invalid direction. You passed: `".concat(te,"`, but you can use only these: "),O)}},Ce.prototype.onKeyEvent=function(te){this.visualDebugger&&this.visualDebugger.clear();var Fe=Ce.getKeyCode(te),O=(0,oe.default)(this.getKeyMap(),function(M){return M.includes(Fe)});this.smartNavigate(O,null,{event:te})},Ce.prototype.smartNavigate=function(te,Fe,O){var M=this;if(!this.nativeMode){var q=te===Qe||te===Oe,K=te===Qe||(this.writingDirection===ut.default.LTR?te===At:te===lt);this.log("smartNavigate","direction",te),this.log("smartNavigate","fromParentFocusKey",Fe),this.log("smartNavigate","this.focusKey",this.focusKey),Fe||(0,Xe.default)(this.focusableComponents,function(hn){hn.layoutUpdated=!1});var ye=this.focusableComponents[Fe||this.focusKey];if(Fe||ye){if(this.log("smartNavigate","currentComponent",ye?ye.focusKey:void 0,ye?ye.node:void 0,ye),ye){this.updateLayout(ye.focusKey);var de=ye.parentFocusKey,He=ye.focusKey,Tt=ye.layout,ot=Ce.getCutoffCoordinate(q,K,!1,Tt,this.writingDirection),rt=(0,fe.default)(this.focusableComponents,function(hn){if(hn.parentFocusKey===de&&hn.focusable){M.updateLayout(hn.focusKey);var Xt=Ce.getCutoffCoordinate(q,K,!0,hn.layout,M.writingDirection);return q||M.writingDirection===ut.default.LTR?K?Xt>=ot:Xt<=ot:K?Xt<=ot:Xt>=ot}return!1});if(this.debug&&(this.log("smartNavigate","currentCutoffCoordinate",ot),this.log("smartNavigate","siblings","".concat(rt.length," elements:"),rt.map(function(hn){return hn.focusKey}).join(", "),rt.map(function(hn){return hn.node}),rt.map(function(hn){return hn}))),this.visualDebugger){var et=Ce.getRefCorners(te,!1,Tt);this.visualDebugger.drawPoint(et.a.x,et.a.y),this.visualDebugger.drawPoint(et.b.x,et.b.y)}var ft=this.sortSiblingsByPriority(rt,Tt,te,He),yt=(0,he.default)(ft);if(this.log("smartNavigate","nextComponent",yt?yt.focusKey:void 0,yt?yt.node:void 0,yt),yt)this.setFocus(yt.focusKey,O);else{var _t=this.focusableComponents[de],Ct=_t!=null&&_t.isFocusBoundary?_t.focusBoundaryDirections||[te]:[];_t&&Ct.includes(te)||this.smartNavigate(te,de,O)}}}else this.setFocus(this.getForcedFocusKey())}},Ce.prototype.saveLastFocusedChildKey=function(te,Fe){te&&(this.log("saveLastFocusedChildKey","".concat(te.focusKey," lastFocusedChildKey set"),Fe),te.lastFocusedChildKey=Fe)},Ce.prototype.log=function(te,Fe){for(var O=[],M=2;M<arguments.length;M++)O[M-2]=arguments[M];this.debug&&console.log.apply(console,X(["%c".concat(te,"%c").concat(Fe),"background: ".concat(Kt[this.logIndex%Kt.length],"; color: black; padding: 1px 5px;"),"background: #333; color: #BADA55; padding: 1px 5px;"],O,!1))},Ce.prototype.getCurrentFocusKey=function(){return this.focusKey},Ce.prototype.getForcedFocusKey=function(){var te,Fe=(0,fe.default)(this.focusableComponents,function(M){return M.focusable&&M.forceFocus}),O=this.sortSiblingsByPriority(Fe,{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:null},"down",x.ROOT_FOCUS_KEY);return(te=(0,he.default)(O))===null||te===void 0?void 0:te.focusKey},Ce.prototype.getNextFocusKey=function(te){var Fe=this,O=this.focusableComponents[te];if(!O||this.nativeMode)return te;var M=(0,fe.default)(this.focusableComponents,function(de){return de.parentFocusKey===te&&de.focusable});if(M.length>0){var q=O.lastFocusedChildKey,K=O.preferredChildFocusKey;if(this.log("getNextFocusKey","lastFocusedChildKey is",q),this.log("getNextFocusKey","preferredChildFocusKey is",K),q&&O.saveLastFocusedChild&&this.isParticipatingFocusableComponent(q))return this.log("getNextFocusKey","lastFocusedChildKey will be focused",q),this.getNextFocusKey(q);if(K&&this.isParticipatingFocusableComponent(K))return this.log("getNextFocusKey","preferredChildFocusKey will be focused",K),this.getNextFocusKey(K);M.forEach(function(de){return Fe.updateLayout(de.focusKey)});var ye=function(de,He){var Tt=He===ut.default.LTR?function(rt){var et=rt.layout;return Math.abs(et.left)+Math.abs(et.top)}:function(rt){var et=rt.layout;return Math.abs(window.innerWidth-et.right)+Math.abs(et.top)},ot=(0,Ae.default)(de,Tt);return(0,he.default)(ot)}(M,this.writingDirection).focusKey;return this.log("getNextFocusKey","childKey will be focused",ye),this.getNextFocusKey(ye)}return this.log("getNextFocusKey","targetFocusKey",te),te},Ce.prototype.addFocusable=function(te){var Fe=te.focusKey,O=te.node,M=te.parentFocusKey,q=te.onEnterPress,K=te.onEnterRelease,ye=te.onArrowPress,de=te.onFocus,He=te.onBlur,Tt=te.saveLastFocusedChild,ot=te.trackChildren,rt=te.onUpdateFocus,et=te.onUpdateHasFocusedChild,ft=te.preferredChildFocusKey,yt=te.autoRestoreFocus,_t=te.forceFocus,Ct=te.focusable,hn=te.isFocusBoundary,Xt=te.focusBoundaryDirections;if(this.focusableComponents[Fe]={focusKey:Fe,node:O,parentFocusKey:M,onEnterPress:q,onEnterRelease:K,onArrowPress:ye,onFocus:de,onBlur:He,onUpdateFocus:rt,onUpdateHasFocusedChild:et,saveLastFocusedChild:Tt,trackChildren:ot,preferredChildFocusKey:ft,focusable:Ct,isFocusBoundary:hn,focusBoundaryDirections:Xt,autoRestoreFocus:yt,forceFocus:_t,lastFocusedChildKey:null,layout:{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:O},layoutUpdated:!1},O||console.warn('Component added without a node reference. This will result in its coordinates being empty and may cause lost focus. Check the "ref" passed to "useFocusable": ',this.focusableComponents[Fe]),!this.nativeMode){this.updateLayout(Fe),this.log("addFocusable","Component added: ",this.focusableComponents[Fe]),Fe===this.focusKey&&this.setFocus(ft||Fe);for(var nn=this.focusableComponents[this.focusKey];nn;){if(nn.parentFocusKey===Fe){this.updateParentsHasFocusedChild(this.focusKey,{}),this.updateParentsLastFocusedChild(this.focusKey);break}nn=this.focusableComponents[nn.parentFocusKey]}}},Ce.prototype.removeFocusable=function(te){var Fe=te.focusKey,O=this.focusableComponents[Fe];if(O){var M=O.parentFocusKey;(0,O.onUpdateFocus)(!1),this.log("removeFocusable","Component removed: ",O),delete this.focusableComponents[Fe];var q=this.parentsHavingFocusedChild.includes(Fe);this.parentsHavingFocusedChild=this.parentsHavingFocusedChild.filter(function(de){return de!==Fe});var K=this.focusableComponents[M],ye=Fe===this.focusKey;if(K&&K.lastFocusedChildKey===Fe&&(K.lastFocusedChildKey=null),this.nativeMode)return;(ye||q)&&K&&K.autoRestoreFocus&&(this.log("removeFocusable","Component removed: ",ye?"Leaf component":"Container component","Auto restoring focus to: ",M),this.setFocusDebounced(M))}},Ce.prototype.getNodeLayoutByFocusKey=function(te){var Fe=this.focusableComponents[te];return Fe?(this.updateLayout(Fe.focusKey),Fe.layout):null},Ce.prototype.setCurrentFocusedKey=function(te,Fe){if(this.isFocusableComponent(this.focusKey)&&te!==this.focusKey){var O=this.focusableComponents[this.focusKey];O.onUpdateFocus(!1),O.onBlur(this.getNodeLayoutByFocusKey(this.focusKey),Fe),this.log("setCurrentFocusedKey","onBlur",O)}if(this.focusKey=te,this.isFocusableComponent(this.focusKey)){var M=this.focusableComponents[this.focusKey];this.shouldFocusDOMNode&&M.node&&M.node.focus(),M.onUpdateFocus(!0),M.onFocus(this.getNodeLayoutByFocusKey(this.focusKey),Fe),this.log("setCurrentFocusedKey","onFocus",M)}},Ce.prototype.updateParentsHasFocusedChild=function(te,Fe){for(var O=this,M=[],q=this.focusableComponents[te];q;){var K=q.parentFocusKey,ye=this.focusableComponents[K];if(ye){var de=ye.focusKey;M.push(de)}q=ye}var He=(0,$.default)(this.parentsHavingFocusedChild,M),Tt=(0,$.default)(M,this.parentsHavingFocusedChild);(0,Ie.default)(He,function(ot){var rt=O.focusableComponents[ot];rt&&rt.trackChildren&&rt.onUpdateHasFocusedChild(!1),O.onIntermediateNodeBecameBlurred(ot,Fe)}),(0,Ie.default)(Tt,function(ot){var rt=O.focusableComponents[ot];rt&&rt.trackChildren&&rt.onUpdateHasFocusedChild(!0),O.onIntermediateNodeBecameFocused(ot,Fe)}),this.parentsHavingFocusedChild=M},Ce.prototype.updateParentsLastFocusedChild=function(te){for(var Fe=this.focusableComponents[te];Fe;){var O=Fe.parentFocusKey,M=this.focusableComponents[O];M&&this.saveLastFocusedChildKey(M,Fe.focusKey),Fe=M}},Ce.prototype.getKeyMap=function(){return this.keyMap},Ce.prototype.setKeyMap=function(te){this.keyMap=R(R({},this.getKeyMap()),function(Fe){var O={};return Object.entries(Fe).forEach(function(M){var q=M[0],K=M[1];O[q]=Array.isArray(K)?K:[K]}),O}(te))},Ce.prototype.isFocusableComponent=function(te){return!!this.focusableComponents[te]},Ce.prototype.isParticipatingFocusableComponent=function(te){return this.isFocusableComponent(te)&&this.focusableComponents[te].focusable},Ce.prototype.onIntermediateNodeBecameFocused=function(te,Fe){this.isParticipatingFocusableComponent(te)&&this.focusableComponents[te].onFocus(this.getNodeLayoutByFocusKey(te),Fe)},Ce.prototype.onIntermediateNodeBecameBlurred=function(te,Fe){this.isParticipatingFocusableComponent(te)&&this.focusableComponents[te].onBlur(this.getNodeLayoutByFocusKey(te),Fe)},Ce.prototype.pause=function(){this.paused=!0},Ce.prototype.resume=function(){this.paused=!1},Ce.prototype.setFocus=function(te,Fe){if(Fe===void 0&&(Fe={}),this.setFocusDebounced.cancel(),this.enabled&&!this.nativeMode){this.log("setFocus","focusKey",te),te&&te!==x.ROOT_FOCUS_KEY||(te=this.getForcedFocusKey());var O=this.getNextFocusKey(te);this.log("setFocus","newFocusKey",O),this.setCurrentFocusedKey(O,Fe),this.updateParentsHasFocusedChild(O,Fe),this.updateParentsLastFocusedChild(O)}},Ce.prototype.updateAllLayouts=function(){var te=this;this.enabled&&!this.nativeMode&&(0,Xe.default)(this.focusableComponents,function(Fe,O){te.updateLayout(O)})},Ce.prototype.updateLayout=function(te){var Fe=this.focusableComponents[te];if(Fe&&!this.nativeMode&&!Fe.layoutUpdated){var O=Fe.node,M=this.useGetBoundingClientRect?(0,$e.getBoundingClientRect)(O):(0,$e.default)(O);Fe.layout=R(R({},M),{node:O})}},Ce.prototype.updateFocusable=function(te,Fe){var O=Fe.node,M=Fe.preferredChildFocusKey,q=Fe.focusable,K=Fe.isFocusBoundary,ye=Fe.focusBoundaryDirections,de=Fe.onEnterPress,He=Fe.onEnterRelease,Tt=Fe.onArrowPress,ot=Fe.onFocus,rt=Fe.onBlur;if(!this.nativeMode){var et=this.focusableComponents[te];et&&(et.preferredChildFocusKey=M,et.focusable=q,et.isFocusBoundary=K,et.focusBoundaryDirections=ye,et.onEnterPress=de,et.onEnterRelease=He,et.onArrowPress=Tt,et.onFocus=ot,et.onBlur=rt,O&&(et.node=O))}},Ce.prototype.isNativeMode=function(){return this.nativeMode},Ce.prototype.doesFocusableExist=function(te){return!!this.focusableComponents[te]},Ce}();x.SpatialNavigation=new Lt,x.init=x.SpatialNavigation.init,x.setThrottle=x.SpatialNavigation.setThrottle,x.destroy=x.SpatialNavigation.destroy,x.setKeyMap=x.SpatialNavigation.setKeyMap,x.setFocus=x.SpatialNavigation.setFocus,x.navigateByDirection=x.SpatialNavigation.navigateByDirection,x.pause=x.SpatialNavigation.pause,x.resume=x.SpatialNavigation.resume,x.updateAllLayouts=x.SpatialNavigation.updateAllLayouts,x.getCurrentFocusKey=x.SpatialNavigation.getCurrentFocusKey,x.doesFocusableExist=x.SpatialNavigation.doesFocusableExist},35:function(U,x,_){var I=this&&this.__importDefault||function(le){return le&&le.__esModule?le:{default:le}};Object.defineProperty(x,"__esModule",{value:!0});var R=I(_(119)),j=typeof window<"u"&&window.document,z=j?window.innerWidth:0,W=j?window.innerHeight:0,X=function(){function le(N){j&&(this.debugCtx=le.createCanvas("sn-debug","1010",N),this.layoutsCtx=le.createCanvas("sn-layouts","1000",N),this.writingDirection=N)}return le.createCanvas=function(N,$,fe){var oe=document.querySelector("#".concat(N))||document.createElement("canvas");oe.setAttribute("id",N),oe.setAttribute("dir",fe===R.default.LTR?"ltr":"rtl");var he=oe.getContext("2d");return oe.style.zIndex=$,oe.style.position="fixed",oe.style.top="0",oe.style.left="0",document.body.appendChild(oe),oe.width=z,oe.height=W,he},le.prototype.clear=function(){j&&this.debugCtx.clearRect(0,0,z,W)},le.prototype.clearLayouts=function(){j&&this.layoutsCtx.clearRect(0,0,z,W)},le.prototype.drawLayout=function(N,$,fe){if(j){this.layoutsCtx.strokeStyle="green",this.layoutsCtx.strokeRect(N.left,N.top,N.width,N.height),this.layoutsCtx.font="8px monospace",this.layoutsCtx.fillStyle="red";var oe=this.writingDirection===R.default.LTR?"left":"right",he=N[oe];this.layoutsCtx.fillText($,he,N.top+10),this.layoutsCtx.fillText(fe,he,N.top+25),this.layoutsCtx.fillText("".concat(oe,": ").concat(he),he,N.top+40),this.layoutsCtx.fillText("top: ".concat(N.top),he,N.top+55)}},le.prototype.drawPoint=function(N,$,fe,oe){fe===void 0&&(fe="blue"),oe===void 0&&(oe=10),j&&(this.debugCtx.strokeStyle=fe,this.debugCtx.lineWidth=3,this.debugCtx.strokeRect(N-oe/2,$-oe/2,oe,oe))},le}();x.default=X},119:function(U,x){var _;Object.defineProperty(x,"__esModule",{value:!0}),function(I){I[I.LTR=0]="LTR",I[I.RTL=1]="RTL"}(_||(_={})),x.default=_},607:function(U,x,_){var I=this&&this.__createBinding||(Object.create?function(j,z,W,X){X===void 0&&(X=W);var le=Object.getOwnPropertyDescriptor(z,W);le&&!("get"in le?!z.__esModule:le.writable||le.configurable)||(le={enumerable:!0,get:function(){return z[W]}}),Object.defineProperty(j,X,le)}:function(j,z,W,X){X===void 0&&(X=W),j[X]=z[W]}),R=this&&this.__exportStar||function(j,z){for(var W in j)W==="default"||Object.prototype.hasOwnProperty.call(z,W)||I(z,j,W)};Object.defineProperty(x,"__esModule",{value:!0}),R(_(79),x),R(_(445),x),R(_(654),x)},964:function(U,x){Object.defineProperty(x,"__esModule",{value:!0}),x.getBoundingClientRect=void 0;var _=function(I){for(var R=I.offsetParent,j=I.offsetHeight,z=I.offsetWidth,W=I.offsetLeft,X=I.offsetTop;R&&R.nodeType===1;)W+=R.offsetLeft-R.scrollLeft,X+=R.offsetTop-R.scrollTop,R=R.offsetParent;return{height:j,left:W,top:X,width:z}};x.default=function(I){var R=I&&I.parentElement;if(I&&R){var j=_(R),z=_(I),W=z.height,X=z.left,le=z.top,N=z.width;return{x:X-j.left,y:le-j.top,width:N,height:W,left:X,top:le,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}},x.getBoundingClientRect=function(I){if(I&&I.getBoundingClientRect){var R=I.getBoundingClientRect();return{x:R.x,y:R.y,width:R.width,height:R.height,left:R.left,top:R.top,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}}},445:function(U,x,_){Object.defineProperty(x,"__esModule",{value:!0}),x.useFocusContext=x.FocusContext=void 0;var I=_(156),R=_(654);x.FocusContext=(0,I.createContext)(R.ROOT_FOCUS_KEY),x.FocusContext.displayName="FocusContext",x.useFocusContext=function(){return(0,I.useContext)(x.FocusContext)}},79:function(U,x,_){var I=this&&this.__importDefault||function(le){return le&&le.__esModule?le:{default:le}};Object.defineProperty(x,"__esModule",{value:!0}),x.useFocusable=void 0;var R=_(156),j=I(_(604)),z=I(_(461)),W=_(654),X=_(445);x.useFocusable=function(le){var N=le===void 0?{}:le,$=N.focusable,fe=$===void 0||$,oe=N.saveLastFocusedChild,he=oe===void 0||oe,Ie=N.trackChildren,Xe=Ie!==void 0&&Ie,Ae=N.autoRestoreFocus,Ze=Ae===void 0||Ae,it=N.forceFocus,ut=it!==void 0&&it,$e=N.isFocusBoundary,lt=$e!==void 0&&$e,At=N.focusBoundaryDirections,Oe=N.focusKey,Qe=N.preferredChildFocusKey,ct=N.onEnterPress,Qt=ct===void 0?j.default:ct,Kt=N.onEnterRelease,St=Kt===void 0?j.default:Kt,Lt=N.onArrowPress,Ce=Lt===void 0?function(){return!0}:Lt,te=N.onFocus,Fe=te===void 0?j.default:te,O=N.onBlur,M=O===void 0?j.default:O,q=N.extraProps,K=(0,R.useCallback)(function(Pt){Qt(q,Pt)},[Qt,q]),ye=(0,R.useCallback)(function(){St(q)},[St,q]),de=(0,R.useCallback)(function(Pt,Un){return Ce(Pt,q,Un)},[q,Ce]),He=(0,R.useCallback)(function(Pt,Un){Fe(Pt,q,Un)},[q,Fe]),Tt=(0,R.useCallback)(function(Pt,Un){M(Pt,q,Un)},[q,M]),ot=(0,R.useRef)(null),rt=(0,R.useState)(!1),et=rt[0],ft=rt[1],yt=(0,R.useState)(!1),_t=yt[0],Ct=yt[1],hn=(0,X.useFocusContext)(),Xt=(0,R.useMemo)(function(){return Oe||(0,z.default)("sn:focusable-item-")},[Oe]),nn=(0,R.useCallback)(function(Pt){Pt===void 0&&(Pt={}),W.SpatialNavigation.setFocus(Xt,Pt)},[Xt]);return(0,R.useEffect)(function(){var Pt=ot.current;return W.SpatialNavigation.addFocusable({focusKey:Xt,node:Pt,parentFocusKey:hn,preferredChildFocusKey:Qe,onEnterPress:K,onEnterRelease:ye,onArrowPress:de,onFocus:He,onBlur:Tt,onUpdateFocus:function(Un){return Un===void 0&&(Un=!1),ft(Un)},onUpdateHasFocusedChild:function(Un){return Un===void 0&&(Un=!1),Ct(Un)},saveLastFocusedChild:he,trackChildren:Xe,isFocusBoundary:lt,focusBoundaryDirections:At,autoRestoreFocus:Ze,forceFocus:ut,focusable:fe}),function(){W.SpatialNavigation.removeFocusable({focusKey:Xt})}},[]),(0,R.useEffect)(function(){var Pt=ot.current;W.SpatialNavigation.updateFocusable(Xt,{node:Pt,preferredChildFocusKey:Qe,focusable:fe,isFocusBoundary:lt,focusBoundaryDirections:At,onEnterPress:K,onEnterRelease:ye,onArrowPress:de,onFocus:He,onBlur:Tt})},[Xt,Qe,fe,lt,At,K,ye,de,He,Tt]),{ref:ot,focusSelf:nn,focused:et,hasFocusedChild:_t,focusKey:Xt}}},150:function(U){U.exports=l},117:function(U){U.exports=f},747:function(U){U.exports=p},23:function(U){U.exports=S},842:function(U){U.exports=b},682:function(U){U.exports=g},784:function(U){U.exports=w},604:function(U){U.exports=F},432:function(U){U.exports=C},67:function(U){U.exports=y},461:function(U){U.exports=v},156:function(U){U.exports=D}},T={};return function U(x){var _=T[x];if(_!==void 0)return _.exports;var I=T[x]={exports:{}};return m[x].call(I.exports,I,I.exports,U),I.exports}(607)}()})})(pU);var yl=pU.exports;function eV(r){return{all:r=r||new Map,on:function(o,l){var f=r.get(o);f?f.push(l):r.set(o,[l])},off:function(o,l){var f=r.get(o);f&&(l?f.splice(f.indexOf(l)>>>0,1):r.set(o,[]))},emit:function(o,l){var f=r.get(o);f&&f.slice().map(function(p){p(l)}),(f=r.get("*"))&&f.slice().map(function(p){p(o,l)})}}}class If{constructor(){this.emitter=eV()}emit(o,l){this.emitter.emit(o,l)}on(o,l){var f;(f=this.emitter)==null||f.on(o,l)}once(o,l){var p;const f=S=>{var b;(b=this.emitter)==null||b.off(o,f),l(S)};(p=this.emitter)==null||p.on(o,f)}off(o,l){var f;(f=this.emitter)==null||f.off(o,l)}onAny(o){this.emitter.on("*",o)}offAny(o){this.emitter.off("*",o)}clearAllListeners(){this.emitter.all.clear()}destroy(){this.clearAllListeners()}}var lf=256,LU=[],Wk=256,Vy;for(;lf--;)LU[lf]=(lf+256).toString(16).substring(1);function tV(r){var o=0,l=11;if(!Vy||lf+l>Wk*2)for(Vy="",lf=0;o<Wk;o++)Vy+=LU[Math.random()*256|0];return Vy.substring(lf,lf+++l)}const $k={DEVICE_ID:"deviceId"};function bg(){const r=localStorage.getItem($k.DEVICE_ID);if(r)return r;const o=tV();return localStorage.setItem($k.DEVICE_ID,o),o}function nV(r){r=[...r].sort((l,f)=>l-f);const o=Math.floor(r.length/2);return r.length%2?r[o]:(r[o-1]+r[o])/2}var cs=(r=>(r.NEGOTIATE="negotiate",r.NEGOTIATE_TV="negotiate-tv",r.EVENT_STATUS="eventStatus",r.EVENT_META="eventMeta",r.GENERATE="generate",r.CONTENTFUL="contentful",r))(cs||{});class og extends Error{constructor(o,l,f,p){super(),this._name=o,this._title=l,this._code=p,this._message=f}get toString(){var o,l;return"".concat(this._name.toUpperCase()," ERROR - ").concat((o=this._title.toUpperCase())!=null?o:""," ").concat((l=this._code)!=null?l:"",": ").concat(this.message)}get name(){return this._name}set name(o){this._name=o}get message(){return this._message}set message(o){this._message=o}get title(){return this._title}set title(o){this._title=o}get code(){return this._code}set code(o){this._code=o}}var fc=(r=>(r.TIZEN="tizen",r.WEBOS="webos",r.WEBZEROS="web0s",r.WEB="web",r))(fc||{});function dE(){const r=navigator.userAgent.toLowerCase();return r.includes("tizen")?"tizen":r.includes("webos")||r.includes("web0s")?"webos":"web"}const kU=dE()==="webos"?"LG TV":"Samsung TV",Eh=bg(),rV="https://staging-api.gigset.io",rb="new",iV="68HZuoF2PhOm4zHAJzDcwGnqUeph2JA_G9M7vW8-mbw",oV="v203lmr0b15v",MC="setup-device-id",aV="_appContainer_1isul_1",sV="_pageContainer_1isul_53",uV="_input_1isul_67",lV="_ellipsis_1isul_1",cV={appContainer:aV,pageContainer:sV,input:uV,ellipsis:lV};class df extends Error{constructor(o,l){const f=new.target.prototype;super("".concat(o,": Status code '").concat(l,"'")),this.statusCode=l,this.__proto__=f}}class DC extends Error{constructor(o="A timeout occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class ou extends Error{constructor(o="An abort occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class fV extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.transport=l,this.errorType="UnsupportedTransportError",this.__proto__=f}}class dV extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.transport=l,this.errorType="DisabledTransportError",this.__proto__=f}}class hV extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.transport=l,this.errorType="FailedToStartTransportError",this.__proto__=f}}class Xk extends Error{constructor(o){const l=new.target.prototype;super(o),this.errorType="FailedToNegotiateWithServerError",this.__proto__=l}}class pV extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.innerErrors=l,this.__proto__=f}}class FU{constructor(o,l,f){this.statusCode=o,this.statusText=l,this.content=f}}class hE{get(o,l){return this.send({...l,method:"GET",url:o})}post(o,l){return this.send({...l,method:"POST",url:o})}delete(o,l){return this.send({...l,method:"DELETE",url:o})}getCookieString(o){return""}}var wn;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None"})(wn||(wn={}));class Hg{constructor(){}log(o,l){}}Hg.instance=new Hg;const gV="8.0.0";class po{static isRequired(o,l){if(o==null)throw new Error("The '".concat(l,"' argument is required."))}static isNotEmpty(o,l){if(!o||o.match(/^\s*$/))throw new Error("The '".concat(l,"' argument should not be empty."))}static isIn(o,l,f){if(!(o in l))throw new Error("Unknown ".concat(f," value: ").concat(o,"."))}}class Hi{static get isBrowser(){return!Hi.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Hi.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Hi.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Kg(r,o){let l="";return Ef(r)?(l="Binary data of length ".concat(r.byteLength),o&&(l+=". Content: '".concat(mV(r),"'"))):typeof r=="string"&&(l="String data of length ".concat(r.length),o&&(l+=". Content: '".concat(r,"'"))),l}function mV(r){const o=new Uint8Array(r);let l="";return o.forEach(f=>{const p=f<16?"0":"";l+="0x".concat(p).concat(f.toString(16)," ")}),l.substr(0,l.length-1)}function Ef(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}async function UU(r,o,l,f,p,S){const b={},[g,w]=_h();b[g]=w,r.log(wn.Trace,"(".concat(o," transport) sending data. ").concat(Kg(p,S.logMessageContent),"."));const F=Ef(p)?"arraybuffer":"text",C=await l.post(f,{content:p,headers:{...b,...S.headers},responseType:F,timeout:S.timeout,withCredentials:S.withCredentials});r.log(wn.Trace,"(".concat(o," transport) request complete. Response status: ").concat(C.statusCode,"."))}function vV(r){return r===void 0?new B0(wn.Information):r===null?Hg.instance:r.log!==void 0?r:new B0(r)}class yV{constructor(o,l){this._subject=o,this._observer=l}dispose(){const o=this._subject.observers.indexOf(this._observer);o>-1&&this._subject.observers.splice(o,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(l=>{})}}class B0{constructor(o){this._minLevel=o,this.out=console}log(o,l){if(o>=this._minLevel){const f="[".concat(new Date().toISOString(),"] ").concat(wn[o],": ").concat(l);switch(o){case wn.Critical:case wn.Error:this.out.error(f);break;case wn.Warning:this.out.warn(f);break;case wn.Information:this.out.info(f);break;default:this.out.log(f);break}}}}function _h(){let r="X-SignalR-User-Agent";return Hi.isNode&&(r="User-Agent"),[r,EV(gV,_V(),SV(),TV())]}function EV(r,o,l,f){let p="Microsoft SignalR/";const S=r.split(".");return p+="".concat(S[0],".").concat(S[1]),p+=" (".concat(r,"; "),o&&o!==""?p+="".concat(o,"; "):p+="Unknown OS; ",p+="".concat(l),f?p+="; ".concat(f):p+="; Unknown Runtime Version",p+=")",p}function _V(){if(Hi.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function TV(){if(Hi.isNode)return process.versions.node}function SV(){return Hi.isNode?"NodeJS":"Browser"}function Qk(r){return r.stack?r.stack:r.message?r.message:"".concat(r)}function wV(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}function AV(r){return typeof fetch>"u"||Hi.isNode?(r._jar=new(require("tough-cookie")).CookieJar,typeof fetch>"u"?r._fetchType=require("node-fetch"):r._fetchType=fetch,r._fetchType=require("fetch-cookie")(r._fetchType,r._jar),!0):!1}function IV(r){return typeof AbortController>"u"?(r._abortControllerType=require("abort-controller"),!0):!1}function bV(){return require("ws")}function CV(){return require("eventsource")}class RV extends hE{constructor(o){super(),this._logger=o;const l={_fetchType:void 0,_jar:void 0};AV(l)?(this._fetchType=l._fetchType,this._jar=l._jar):this._fetchType=fetch.bind(wV()),this._abortControllerType=AbortController;const f={_abortControllerType:this._abortControllerType};IV(f)&&(this._abortControllerType=f._abortControllerType)}async send(o){if(o.abortSignal&&o.abortSignal.aborted)throw new ou;if(!o.method)throw new Error("No method defined.");if(!o.url)throw new Error("No url defined.");const l=new this._abortControllerType;let f;o.abortSignal&&(o.abortSignal.onabort=()=>{l.abort(),f=new ou});let p=null;if(o.timeout){const w=o.timeout;p=setTimeout(()=>{l.abort(),this._logger.log(wn.Warning,"Timeout from HTTP request."),f=new DC},w)}o.content===""&&(o.content=void 0),o.content&&(o.headers=o.headers||{},Ef(o.content)?o.headers["Content-Type"]="application/octet-stream":o.headers["Content-Type"]="text/plain;charset=UTF-8");let S;try{S=await this._fetchType(o.url,{body:o.content,cache:"no-cache",credentials:o.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...o.headers},method:o.method,mode:"cors",redirect:"follow",signal:l.signal})}catch(w){throw f||(this._logger.log(wn.Warning,"Error from HTTP request. ".concat(w,".")),w)}finally{p&&clearTimeout(p),o.abortSignal&&(o.abortSignal.onabort=null)}if(!S.ok){const w=await Jk(S,"text");throw new df(w||S.statusText,S.status)}const g=await Jk(S,o.responseType);return new FU(S.status,S.statusText,g)}getCookieString(o){let l="";return Hi.isNode&&this._jar&&this._jar.getCookies(o,(f,p)=>l=p.join("; ")),l}}function Jk(r,o){let l;switch(o){case"arraybuffer":l=r.arrayBuffer();break;case"text":l=r.text();break;case"blob":case"document":case"json":throw new Error("".concat(o," is not supported."));default:l=r.text();break}return l}class NV extends hE{constructor(o){super(),this._logger=o}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new ou):o.method?o.url?new Promise((l,f)=>{const p=new XMLHttpRequest;p.open(o.method,o.url,!0),p.withCredentials=o.withCredentials===void 0?!0:o.withCredentials,p.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.content===""&&(o.content=void 0),o.content&&(Ef(o.content)?p.setRequestHeader("Content-Type","application/octet-stream"):p.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const S=o.headers;S&&Object.keys(S).forEach(b=>{p.setRequestHeader(b,S[b])}),o.responseType&&(p.responseType=o.responseType),o.abortSignal&&(o.abortSignal.onabort=()=>{p.abort(),f(new ou)}),o.timeout&&(p.timeout=o.timeout),p.onload=()=>{o.abortSignal&&(o.abortSignal.onabort=null),p.status>=200&&p.status<300?l(new FU(p.status,p.statusText,p.response||p.responseText)):f(new df(p.response||p.responseText||p.statusText,p.status))},p.onerror=()=>{this._logger.log(wn.Warning,"Error from HTTP request. ".concat(p.status,": ").concat(p.statusText,".")),f(new df(p.statusText,p.status))},p.ontimeout=()=>{this._logger.log(wn.Warning,"Timeout from HTTP request."),f(new DC)},p.send(o.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class xV extends hE{constructor(o){if(super(),typeof fetch<"u"||Hi.isNode)this._httpClient=new RV(o);else if(typeof XMLHttpRequest<"u")this._httpClient=new NV(o);else throw new Error("No usable HttpClient found.")}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new ou):o.method?o.url?this._httpClient.send(o):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(o){return this._httpClient.getCookieString(o)}}class fs{static write(o){return"".concat(o).concat(fs.RecordSeparator)}static parse(o){if(o[o.length-1]!==fs.RecordSeparator)throw new Error("Message is incomplete.");const l=o.split(fs.RecordSeparator);return l.pop(),l}}fs.RecordSeparatorCode=30;fs.RecordSeparator=String.fromCharCode(fs.RecordSeparatorCode);class MV{writeHandshakeRequest(o){return fs.write(JSON.stringify(o))}parseHandshakeResponse(o){let l,f;if(Ef(o)){const g=new Uint8Array(o),w=g.indexOf(fs.RecordSeparatorCode);if(w===-1)throw new Error("Message is incomplete.");const F=w+1;l=String.fromCharCode.apply(null,Array.prototype.slice.call(g.slice(0,F))),f=g.byteLength>F?g.slice(F).buffer:null}else{const g=o,w=g.indexOf(fs.RecordSeparator);if(w===-1)throw new Error("Message is incomplete.");const F=w+1;l=g.substring(0,F),f=g.length>F?g.substring(F):null}const p=fs.parse(l),S=JSON.parse(p[0]);if(S.type)throw new Error("Expected a handshake response from the server.");return[f,S]}}var Ar;(function(r){r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence"})(Ar||(Ar={}));class DV{constructor(){this.observers=[]}next(o){for(const l of this.observers)l.next(o)}error(o){for(const l of this.observers)l.error&&l.error(o)}complete(){for(const o of this.observers)o.complete&&o.complete()}subscribe(o){return this.observers.push(o),new yV(this,o)}}class PV{constructor(o,l,f){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=o,this._connection=l,this._bufferSize=f}async _send(o){const l=this._protocol.writeMessage(o);let f=Promise.resolve();if(this._isInvocationMessage(o)){this._totalMessageCount++;let p=()=>{},S=()=>{};Ef(l)?this._bufferedByteCount+=l.byteLength:this._bufferedByteCount+=l.length,this._bufferedByteCount>=this._bufferSize&&(f=new Promise((b,g)=>{p=b,S=g})),this._messages.push(new OV(l,this._totalMessageCount,p,S))}try{this._reconnectInProgress||await this._connection.send(l)}catch(p){this._disconnected()}await f}_ack(o){let l=-1;for(let f=0;f<this._messages.length;f++){const p=this._messages[f];if(p._id<=o.sequenceId)l=f,Ef(p._message)?this._bufferedByteCount-=p._message.byteLength:this._bufferedByteCount-=p._message.length,p._resolver();else if(this._bufferedByteCount<this._bufferSize)p._resolver();else break}l!==-1&&(this._messages=this._messages.slice(l+1))}_shouldProcessMessage(o){if(this._waitForSequenceMessage)return o.type!==Ar.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(o))return!0;const l=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,l<=this._latestReceivedSequenceId?(l===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=l,this._ackTimer(),!0)}_resetSequence(o){if(o.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=o.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const o=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ar.Sequence,sequenceId:o}));const l=this._messages;for(const f of l)await this._connection.send(f._message);this._reconnectInProgress=!1}_dispose(o){o!=null||(o=new Error("Unable to reconnect to server."));for(const l of this._messages)l._rejector(o)}_isInvocationMessage(o){switch(o.type){case Ar.Invocation:case Ar.StreamItem:case Ar.Completion:case Ar.StreamInvocation:case Ar.CancelInvocation:return!0;case Ar.Close:case Ar.Sequence:case Ar.Ping:case Ar.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ar.Ack,sequenceId:this._latestReceivedSequenceId}))}catch(o){}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class OV{constructor(o,l,f,p){this._message=o,this._id=l,this._resolver=f,this._rejector=p}}const LV=30*1e3,kV=15*1e3,FV=1e5;var Fi;(function(r){r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting"})(Fi||(Fi={}));class PC{static create(o,l,f,p,S,b,g){return new PC(o,l,f,p,S,b,g)}constructor(o,l,f,p,S,b,g){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(wn.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},po.isRequired(o,"connection"),po.isRequired(l,"logger"),po.isRequired(f,"protocol"),this.serverTimeoutInMilliseconds=S!=null?S:LV,this.keepAliveIntervalInMilliseconds=b!=null?b:kV,this._statefulReconnectBufferSize=g!=null?g:FV,this._logger=l,this._protocol=f,this.connection=o,this._reconnectPolicy=p,this._handshakeProtocol=new MV,this.connection.onreceive=w=>this._processIncomingData(w),this.connection.onclose=w=>this._connectionClosed(w),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ar.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(o){if(this._connectionState!==Fi.Disconnected&&this._connectionState!==Fi.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!o)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=o}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Fi.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Fi.Connecting,this._logger.log(wn.Debug,"Starting HubConnection.");try{await this._startInternal(),Hi.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Fi.Connected,this._connectionStarted=!0,this._logger.log(wn.Debug,"HubConnection connected successfully.")}catch(o){return this._connectionState=Fi.Disconnected,this._logger.log(wn.Debug,"HubConnection failed to start successfully because of error '".concat(o,"'.")),Promise.reject(o)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const o=new Promise((l,f)=>{this._handshakeResolver=l,this._handshakeRejecter=f});await this.connection.start(this._protocol.transferFormat);try{let l=this._protocol.version;this.connection.features.reconnect||(l=1);const f={protocol:this._protocol.name,version:l};if(this._logger.log(wn.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(f)),this._logger.log(wn.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await o,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new PV(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(l){throw this._logger.log(wn.Debug,"Hub handshake failed with error '".concat(l,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(l),l}}async stop(){const o=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await o}catch(l){}}_stopInternal(o){if(this._connectionState===Fi.Disconnected)return this._logger.log(wn.Debug,"Call to HubConnection.stop(".concat(o,") ignored because it is already in the disconnected state.")),Promise.resolve();if(this._connectionState===Fi.Disconnecting)return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;const l=this._connectionState;return this._connectionState=Fi.Disconnecting,this._logger.log(wn.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(wn.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(l===Fi.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=o||new ou("The connection was stopped before the hub handshake could complete."),this.connection.stop(o))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch(o){}}stream(o,...l){const[f,p]=this._replaceStreamingParams(l),S=this._createStreamInvocation(o,l,p);let b;const g=new DV;return g.cancelCallback=()=>{const w=this._createCancelInvocation(S.invocationId);return delete this._callbacks[S.invocationId],b.then(()=>this._sendWithProtocol(w))},this._callbacks[S.invocationId]=(w,F)=>{if(F){g.error(F);return}else w&&(w.type===Ar.Completion?w.error?g.error(new Error(w.error)):g.complete():g.next(w.item))},b=this._sendWithProtocol(S).catch(w=>{g.error(w),delete this._callbacks[S.invocationId]}),this._launchStreams(f,b),g}_sendMessage(o){return this._resetKeepAliveInterval(),this.connection.send(o)}_sendWithProtocol(o){return this._messageBuffer?this._messageBuffer._send(o):this._sendMessage(this._protocol.writeMessage(o))}send(o,...l){const[f,p]=this._replaceStreamingParams(l),S=this._sendWithProtocol(this._createInvocation(o,l,!0,p));return this._launchStreams(f,S),S}invoke(o,...l){const[f,p]=this._replaceStreamingParams(l),S=this._createInvocation(o,l,!1,p);return new Promise((g,w)=>{this._callbacks[S.invocationId]=(C,y)=>{if(y){w(y);return}else C&&(C.type===Ar.Completion?C.error?w(new Error(C.error)):g(C.result):w(new Error("Unexpected message type: ".concat(C.type))))};const F=this._sendWithProtocol(S).catch(C=>{w(C),delete this._callbacks[S.invocationId]});this._launchStreams(f,F)})}on(o,l){!o||!l||(o=o.toLowerCase(),this._methods[o]||(this._methods[o]=[]),this._methods[o].indexOf(l)===-1&&this._methods[o].push(l))}off(o,l){if(!o)return;o=o.toLowerCase();const f=this._methods[o];if(f)if(l){const p=f.indexOf(l);p!==-1&&(f.splice(p,1),f.length===0&&delete this._methods[o])}else delete this._methods[o]}onclose(o){o&&this._closedCallbacks.push(o)}onreconnecting(o){o&&this._reconnectingCallbacks.push(o)}onreconnected(o){o&&this._reconnectedCallbacks.push(o)}_processIncomingData(o){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(o=this._processHandshakeResponse(o),this._receivedHandshakeResponse=!0),o){const l=this._protocol.parseMessages(o,this._logger);for(const f of l)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(f)))switch(f.type){case Ar.Invocation:this._invokeClientMethod(f);break;case Ar.StreamItem:case Ar.Completion:{const p=this._callbacks[f.invocationId];if(p){f.type===Ar.Completion&&delete this._callbacks[f.invocationId];try{p(f)}catch(S){this._logger.log(wn.Error,"Stream callback threw error: ".concat(Qk(S)))}}break}case Ar.Ping:break;case Ar.Close:{this._logger.log(wn.Information,"Close message received from server.");const p=f.error?new Error("Server returned an error on close: "+f.error):void 0;f.allowReconnect===!0?this.connection.stop(p):this._stopPromise=this._stopInternal(p);break}case Ar.Ack:this._messageBuffer&&this._messageBuffer._ack(f);break;case Ar.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(f);break;default:this._logger.log(wn.Warning,"Invalid message type: ".concat(f.type,"."));break}}this._resetTimeoutPeriod()}_processHandshakeResponse(o){let l,f;try{[f,l]=this._handshakeProtocol.parseHandshakeResponse(o)}catch(p){const S="Error parsing handshake response: "+p;this._logger.log(wn.Error,S);const b=new Error(S);throw this._handshakeRejecter(b),b}if(l.error){const p="Server returned handshake error: "+l.error;this._logger.log(wn.Error,p);const S=new Error(p);throw this._handshakeRejecter(S),S}else this._logger.log(wn.Debug,"Server handshake complete.");return this._handshakeResolver(),f}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let o=this._nextKeepAlive-new Date().getTime();o<0&&(o=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===Fi.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch(l){this._cleanupPingTimer()}},o)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(o){const l=o.target.toLowerCase(),f=this._methods[l];if(!f){this._logger.log(wn.Warning,"No client method with the name '".concat(l,"' found.")),o.invocationId&&(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),await this._sendWithProtocol(this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)));return}const p=f.slice(),S=!!o.invocationId;let b,g,w;for(const F of p)try{const C=b;b=await F.apply(this,o.arguments),S&&b&&C&&(this._logger.log(wn.Error,"Multiple results provided for '".concat(l,"'. Sending error to server.")),w=this._createCompletionMessage(o.invocationId,"Client provided multiple results.",null)),g=void 0}catch(C){g=C,this._logger.log(wn.Error,"A callback for the method '".concat(l,"' threw error '").concat(C,"'."))}w?await this._sendWithProtocol(w):S?(g?w=this._createCompletionMessage(o.invocationId,"".concat(g),null):b!==void 0?w=this._createCompletionMessage(o.invocationId,null,b):(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),w=this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(w)):b&&this._logger.log(wn.Error,"Result given for '".concat(l,"' method but server is not expecting a result."))}_connectionClosed(o){this._logger.log(wn.Debug,"HubConnection.connectionClosed(".concat(o,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||o||new ou("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(o||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Fi.Disconnecting?this._completeClose(o):this._connectionState===Fi.Connected&&this._reconnectPolicy?this._reconnect(o):this._connectionState===Fi.Connected&&this._completeClose(o)}_completeClose(o){if(this._connectionStarted){this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(o!=null?o:new Error("Connection closed.")),this._messageBuffer=void 0),Hi.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(l=>l.apply(this,[o]))}catch(l){this._logger.log(wn.Error,"An onclose callback called with error '".concat(o,"' threw error '").concat(l,"'."))}}}async _reconnect(o){const l=Date.now();let f=0,p=o!==void 0?o:new Error("Attempting to reconnect due to a unknown error."),S=this._getNextRetryDelay(f++,0,p);if(S===null){this._logger.log(wn.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(o);return}if(this._connectionState=Fi.Reconnecting,o?this._logger.log(wn.Information,"Connection reconnecting because of error '".concat(o,"'.")):this._logger.log(wn.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(b=>b.apply(this,[o]))}catch(b){this._logger.log(wn.Error,"An onreconnecting callback called with error '".concat(o,"' threw error '").concat(b,"'."))}if(this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;S!==null;){if(this._logger.log(wn.Information,"Reconnect attempt number ".concat(f," will start in ").concat(S," ms.")),await new Promise(b=>{this._reconnectDelayHandle=setTimeout(b,S)}),this._reconnectDelayHandle=void 0,this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Fi.Connected,this._logger.log(wn.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(b=>b.apply(this,[this.connection.connectionId]))}catch(b){this._logger.log(wn.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(b,"'."))}return}catch(b){if(this._logger.log(wn.Information,"Reconnect attempt failed because of error '".concat(b,"'.")),this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),this._connectionState===Fi.Disconnecting&&this._completeClose();return}p=b instanceof Error?b:new Error(b.toString()),S=this._getNextRetryDelay(f++,Date.now()-l,p)}}this._logger.log(wn.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-l," ms and ").concat(f," failed attempts. Connection disconnecting.")),this._completeClose()}_getNextRetryDelay(o,l,f){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:l,previousRetryCount:o,retryReason:f})}catch(p){return this._logger.log(wn.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(o,", ").concat(l,") threw error '").concat(p,"'.")),null}}_cancelCallbacksWithError(o){const l=this._callbacks;this._callbacks={},Object.keys(l).forEach(f=>{const p=l[f];try{p(null,o)}catch(S){this._logger.log(wn.Error,"Stream 'error' callback called with '".concat(o,"' threw error: ").concat(Qk(S)))}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(o,l,f,p){if(f)return p.length!==0?{arguments:l,streamIds:p,target:o,type:Ar.Invocation}:{arguments:l,target:o,type:Ar.Invocation};{const S=this._invocationId;return this._invocationId++,p.length!==0?{arguments:l,invocationId:S.toString(),streamIds:p,target:o,type:Ar.Invocation}:{arguments:l,invocationId:S.toString(),target:o,type:Ar.Invocation}}}_launchStreams(o,l){if(o.length!==0){l||(l=Promise.resolve());for(const f in o)o[f].subscribe({complete:()=>{l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(f)))},error:p=>{let S;p instanceof Error?S=p.message:p&&p.toString?S=p.toString():S="Unknown error",l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(f,S)))},next:p=>{l=l.then(()=>this._sendWithProtocol(this._createStreamItemMessage(f,p)))}})}}_replaceStreamingParams(o){const l=[],f=[];for(let p=0;p<o.length;p++){const S=o[p];if(this._isObservable(S)){const b=this._invocationId;this._invocationId++,l[b]=S,f.push(b.toString()),o.splice(p,1)}}return[l,f]}_isObservable(o){return o&&o.subscribe&&typeof o.subscribe=="function"}_createStreamInvocation(o,l,f){const p=this._invocationId;return this._invocationId++,f.length!==0?{arguments:l,invocationId:p.toString(),streamIds:f,target:o,type:Ar.StreamInvocation}:{arguments:l,invocationId:p.toString(),target:o,type:Ar.StreamInvocation}}_createCancelInvocation(o){return{invocationId:o,type:Ar.CancelInvocation}}_createStreamItemMessage(o,l){return{invocationId:o,item:l,type:Ar.StreamItem}}_createCompletionMessage(o,l,f){return l?{error:l,invocationId:o,type:Ar.Completion}:{invocationId:o,result:f,type:Ar.Completion}}_createCloseMessage(){return{type:Ar.Close}}}const UV=[0,2e3,1e4,3e4,null];class e3{constructor(o){this._retryDelays=o!==void 0?[...o,null]:UV}nextRetryDelayInMilliseconds(o){return this._retryDelays[o.previousRetryCount]}}class hf{}hf.Authorization="Authorization";hf.Cookie="Cookie";class BV extends hE{constructor(o,l){super(),this._innerClient=o,this._accessTokenFactory=l}async send(o){let l=!0;this._accessTokenFactory&&(!this._accessToken||o.url&&o.url.indexOf("/negotiate?")>0)&&(l=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(o);const f=await this._innerClient.send(o);return l&&f.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(o),await this._innerClient.send(o)):f}_setAuthorizationHeader(o){o.headers||(o.headers={}),this._accessToken?o.headers[hf.Authorization]="Bearer ".concat(this._accessToken):this._accessTokenFactory&&o.headers[hf.Authorization]&&delete o.headers[hf.Authorization]}getCookieString(o){return this._innerClient.getCookieString(o)}}var uo;(function(r){r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling"})(uo||(uo={}));var Jo;(function(r){r[r.Text=1]="Text",r[r.Binary=2]="Binary"})(Jo||(Jo={}));let jV=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class t3{get pollAborted(){return this._pollAbort.aborted}constructor(o,l,f){this._httpClient=o,this._logger=l,this._pollAbort=new jV,this._options=f,this._running=!1,this.onreceive=null,this.onclose=null}async connect(o,l){if(po.isRequired(o,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Jo,"transferFormat"),this._url=o,this._logger.log(wn.Trace,"(LongPolling transport) Connecting."),l===Jo.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[f,p]=_h(),S={[f]:p,...this._options.headers},b={abortSignal:this._pollAbort.signal,headers:S,timeout:1e5,withCredentials:this._options.withCredentials};l===Jo.Binary&&(b.responseType="arraybuffer");const g="".concat(o,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(g,"."));const w=await this._httpClient.get(g,b);w.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(w.statusCode,".")),this._closeError=new df(w.statusText||"",w.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,b)}async _poll(o,l){try{for(;this._running;)try{const f="".concat(o,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(f,"."));const p=await this._httpClient.get(f,l);p.statusCode===204?(this._logger.log(wn.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):p.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(p.statusCode,".")),this._closeError=new df(p.statusText||"",p.statusCode),this._running=!1):p.content?(this._logger.log(wn.Trace,"(LongPolling transport) data received. ".concat(Kg(p.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(p.content)):this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(f){this._running?f instanceof DC?this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=f,this._running=!1):this._logger.log(wn.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(f.message))}}finally{this._logger.log(wn.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(o){return this._running?UU(this._logger,"LongPolling",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(wn.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(wn.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,"."));const o={},[l,f]=_h();o[l]=f;const p={headers:{...o,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let S;try{await this._httpClient.delete(this._url,p)}catch(b){S=b}S?S instanceof df&&(S.statusCode===404?this._logger.log(wn.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(wn.Trace,"(LongPolling transport) Error sending a DELETE request: ".concat(S))):this._logger.log(wn.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(wn.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let o="(LongPolling transport) Firing onclose event.";this._closeError&&(o+=" Error: "+this._closeError),this._logger.log(wn.Trace,o),this.onclose(this._closeError)}}}class ZV{constructor(o,l,f,p){this._httpClient=o,this._accessToken=l,this._logger=f,this._options=p,this.onreceive=null,this.onclose=null}async connect(o,l){return po.isRequired(o,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Jo,"transferFormat"),this._logger.log(wn.Trace,"(SSE transport) Connecting."),this._url=o,this._accessToken&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(this._accessToken))),new Promise((f,p)=>{let S=!1;if(l!==Jo.Text){p(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let b;if(Hi.isBrowser||Hi.isWebWorker)b=new this._options.EventSource(o,{withCredentials:this._options.withCredentials});else{const g=this._httpClient.getCookieString(o),w={};w.Cookie=g;const[F,C]=_h();w[F]=C,b=new this._options.EventSource(o,{withCredentials:this._options.withCredentials,headers:{...w,...this._options.headers}})}try{b.onmessage=g=>{if(this.onreceive)try{this._logger.log(wn.Trace,"(SSE transport) data received. ".concat(Kg(g.data,this._options.logMessageContent),".")),this.onreceive(g.data)}catch(w){this._close(w);return}},b.onerror=g=>{S?this._close():p(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},b.onopen=()=>{this._logger.log(wn.Information,"SSE connected to ".concat(this._url)),this._eventSource=b,S=!0,f()}}catch(g){p(g);return}})}async send(o){return this._eventSource?UU(this._logger,"SSE",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(o){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(o))}}class GV{constructor(o,l,f,p,S,b){this._logger=f,this._accessTokenFactory=l,this._logMessageContent=p,this._webSocketConstructor=S,this._httpClient=o,this.onreceive=null,this.onclose=null,this._headers=b}async connect(o,l){po.isRequired(o,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Jo,"transferFormat"),this._logger.log(wn.Trace,"(WebSockets transport) Connecting.");let f;return this._accessTokenFactory&&(f=await this._accessTokenFactory()),new Promise((p,S)=>{o=o.replace(/^http/,"ws");let b;const g=this._httpClient.getCookieString(o);let w=!1;if(Hi.isNode||Hi.isReactNative){const F={},[C,y]=_h();F[C]=y,f&&(F[hf.Authorization]="Bearer ".concat(f)),g&&(F[hf.Cookie]=g),b=new this._webSocketConstructor(o,void 0,{headers:{...F,...this._headers}})}else f&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(f)));b||(b=new this._webSocketConstructor(o)),l===Jo.Binary&&(b.binaryType="arraybuffer"),b.onopen=F=>{this._logger.log(wn.Information,"WebSocket connected to ".concat(o,".")),this._webSocket=b,w=!0,p()},b.onerror=F=>{let C=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?C=F.error:C="There was an error with the transport",this._logger.log(wn.Information,"(WebSockets transport) ".concat(C,"."))},b.onmessage=F=>{if(this._logger.log(wn.Trace,"(WebSockets transport) data received. ".concat(Kg(F.data,this._logMessageContent),".")),this.onreceive)try{this.onreceive(F.data)}catch(C){this._close(C);return}},b.onclose=F=>{if(w)this._close(F);else{let C=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?C=F.error:C="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",S(new Error(C))}}})}send(o){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(wn.Trace,"(WebSockets transport) sending data. ".concat(Kg(o,this._logMessageContent),".")),this._webSocket.send(o),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(o){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(wn.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(o)&&(o.wasClean===!1||o.code!==1e3)?this.onclose(new Error("WebSocket closed with status code: ".concat(o.code," (").concat(o.reason||"no reason given",")."))):o instanceof Error?this.onclose(o):this.onclose())}_isCloseEvent(o){return o&&typeof o.wasClean=="boolean"&&typeof o.code=="number"}}const n3=100;class qV{constructor(o,l={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,po.isRequired(o,"url"),this._logger=vV(l.logger),this.baseUrl=this._resolveUrl(o),l=l||{},l.logMessageContent=l.logMessageContent===void 0?!1:l.logMessageContent,typeof l.withCredentials=="boolean"||l.withCredentials===void 0)l.withCredentials=l.withCredentials===void 0?!0:l.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");l.timeout=l.timeout===void 0?100*1e3:l.timeout;let f=null,p=null;Hi.isNode&&typeof require<"u"&&(f=bV(),p=CV()),!Hi.isNode&&typeof WebSocket<"u"&&!l.WebSocket?l.WebSocket=WebSocket:Hi.isNode&&!l.WebSocket&&f&&(l.WebSocket=f),!Hi.isNode&&typeof EventSource<"u"&&!l.EventSource?l.EventSource=EventSource:Hi.isNode&&!l.EventSource&&typeof p<"u"&&(l.EventSource=p),this._httpClient=new BV(l.httpClient||new xV(this._logger),l.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=l,this.onreceive=null,this.onclose=null}async start(o){if(o=o||Jo.Binary,po.isIn(o,Jo,"transferFormat"),this._logger.log(wn.Debug,"Starting connection with transfer format '".concat(Jo[o],"'.")),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(o),await this._startInternalPromise,this._connectionState==="Disconnecting"){const l="Failed to start the HttpConnection before stop() was called.";return this._logger.log(wn.Error,l),await this._stopPromise,Promise.reject(new ou(l))}else if(this._connectionState!=="Connected"){const l="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(wn.Error,l),Promise.reject(new ou(l))}this._connectionStarted=!0}send(o){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new OC(this.transport)),this._sendQueue.send(o))}async stop(o){if(this._connectionState==="Disconnected")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnected state.")),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(l=>{this._stopPromiseResolver=l}),await this._stopInternal(o),await this._stopPromise}async _stopInternal(o){this._stopError=o;try{await this._startInternalPromise}catch(l){}if(this.transport){try{await this.transport.stop()}catch(l){this._logger.log(wn.Error,"HttpConnection.transport.stop() threw error '".concat(l,"'.")),this._stopConnection()}this.transport=void 0}else this._logger.log(wn.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(o){let l=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===uo.WebSockets)this.transport=this._constructTransport(uo.WebSockets),await this._startTransport(l,o);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let f=null,p=0;do{if(f=await this._getNegotiationResponse(l),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new ou("The connection was stopped during negotiation.");if(f.error)throw new Error(f.error);if(f.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(f.url&&(l=f.url),f.accessToken){const S=f.accessToken;this._accessTokenFactory=()=>S,this._httpClient._accessToken=S,this._httpClient._accessTokenFactory=void 0}p++}while(f.url&&p<n3);if(p===n3&&f.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(l,this._options.transport,f,o)}this.transport instanceof t3&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(wn.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(f){return this._logger.log(wn.Error,"Failed to start the connection: "+f),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(f)}}async _getNegotiationResponse(o){const l={},[f,p]=_h();l[f]=p;const S=this._resolveNegotiateUrl(o);this._logger.log(wn.Debug,"Sending negotiation request: ".concat(S,"."));try{const b=await this._httpClient.post(S,{content:"",headers:{...l,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(b.statusCode!==200)return Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(b.statusCode,"'")));const g=JSON.parse(b.content);return(!g.negotiateVersion||g.negotiateVersion<1)&&(g.connectionToken=g.connectionId),g.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Xk("Client didn't negotiate Stateful Reconnect but the server did.")):g}catch(b){let g="Failed to complete negotiation with the server: "+b;return b instanceof df&&b.statusCode===404&&(g=g+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(wn.Error,g),Promise.reject(new Xk(g))}}_createConnectUrl(o,l){return l?o+(o.indexOf("?")===-1?"?":"&")+"id=".concat(l):o}async _createTransport(o,l,f,p){let S=this._createConnectUrl(o,f.connectionToken);if(this._isITransport(l)){this._logger.log(wn.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=l,await this._startTransport(S,p),this.connectionId=f.connectionId;return}const b=[],g=f.availableTransports||[];let w=f;for(const F of g){const C=this._resolveTransportOrError(F,l,p,(w==null?void 0:w.useStatefulReconnect)===!0);if(C instanceof Error)b.push("".concat(F.transport," failed:")),b.push(C);else if(this._isITransport(C)){if(this.transport=C,!w){try{w=await this._getNegotiationResponse(o)}catch(y){return Promise.reject(y)}S=this._createConnectUrl(o,w.connectionToken)}try{await this._startTransport(S,p),this.connectionId=w.connectionId;return}catch(y){if(this._logger.log(wn.Error,"Failed to start the transport '".concat(F.transport,"': ").concat(y)),w=void 0,b.push(new hV("".concat(F.transport," failed: ").concat(y),uo[F.transport])),this._connectionState!=="Connecting"){const v="Failed to select transport before stop() was called.";return this._logger.log(wn.Debug,v),Promise.reject(new ou(v))}}}}return b.length>0?Promise.reject(new pV("Unable to connect to the server with any of the available transports. ".concat(b.join(" ")),b)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(o){switch(o){case uo.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new GV(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case uo.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new ZV(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case uo.LongPolling:return new t3(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(o,"."))}}_startTransport(o,l){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async f=>{let p=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(o,l),await this.features.resend()}catch(S){p=!0}else{this._stopConnection(f);return}p&&this._stopConnection(f)}:this.transport.onclose=f=>this._stopConnection(f),this.transport.connect(o,l)}_resolveTransportOrError(o,l,f,p){const S=uo[o.transport];if(S==null)return this._logger.log(wn.Debug,"Skipping transport '".concat(o.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(o.transport,"' because it is not supported by this client."));if(HV(l,S))if(o.transferFormats.map(g=>Jo[g]).indexOf(f)>=0){if(S===uo.WebSockets&&!this._options.WebSocket||S===uo.ServerSentEvents&&!this._options.EventSource)return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[S],"' because it is not supported in your environment.'")),new fV("'".concat(uo[S],"' is not supported in your environment."),S);this._logger.log(wn.Debug,"Selecting transport '".concat(uo[S],"'."));try{return this.features.reconnect=S===uo.WebSockets?p:void 0,this._constructTransport(S)}catch(g){return g}}else return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[S],"' because it does not support the requested transfer format '").concat(Jo[f],"'.")),new Error("'".concat(uo[S],"' does not support ").concat(Jo[f],"."));else return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[S],"' because it was disabled by the client.")),new dV("'".concat(uo[S],"' is disabled by the client."),S)}_isITransport(o){return o&&typeof o=="object"&&"connect"in o}_stopConnection(o){if(this._logger.log(wn.Debug,"HttpConnection.stopConnection(".concat(o,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,o=this._stopError||o,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(wn.Debug,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is already in the disconnected state."));return}if(this._connectionState==="Connecting")throw this._logger.log(wn.Warning,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(o,") was called while the connection is still in the connecting state."));if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),o?this._logger.log(wn.Error,"Connection disconnected with error '".concat(o,"'.")):this._logger.log(wn.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(l=>{this._logger.log(wn.Error,"TransportSendQueue.stop() threw error '".concat(l,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(o)}catch(l){this._logger.log(wn.Error,"HttpConnection.onclose(".concat(o,") threw error '").concat(l,"'."))}}}_resolveUrl(o){if(o.lastIndexOf("https://",0)===0||o.lastIndexOf("http://",0)===0)return o;if(!Hi.isBrowser)throw new Error("Cannot resolve '".concat(o,"'."));const l=window.document.createElement("a");return l.href=o,this._logger.log(wn.Information,"Normalizing '".concat(o,"' to '").concat(l.href,"'.")),l.href}_resolveNegotiateUrl(o){const l=new URL(o);l.pathname.endsWith("/")?l.pathname+="negotiate":l.pathname+="/negotiate";const f=new URLSearchParams(l.searchParams);return f.has("negotiateVersion")||f.append("negotiateVersion",this._negotiateVersion.toString()),f.has("useStatefulReconnect")?f.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&f.append("useStatefulReconnect","true"),l.search=f.toString(),l.toString()}}function HV(r,o){return!r||(o&r)!==0}class OC{constructor(o){this._transport=o,this._buffer=[],this._executing=!0,this._sendBufferedData=new zy,this._transportResult=new zy,this._sendLoopPromise=this._sendLoop()}send(o){return this._bufferData(o),this._transportResult||(this._transportResult=new zy),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(o){if(this._buffer.length&&typeof this._buffer[0]!=typeof o)throw new Error("Expected data to be of type ".concat(typeof this._buffer," but was of type ").concat(typeof o));this._buffer.push(o),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new zy;const o=this._transportResult;this._transportResult=void 0;const l=typeof this._buffer[0]=="string"?this._buffer.join(""):OC._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(l),o.resolve()}catch(f){o.reject(f)}}}static _concatBuffers(o){const l=o.map(S=>S.byteLength).reduce((S,b)=>S+b),f=new Uint8Array(l);let p=0;for(const S of o)f.set(new Uint8Array(S),p),p+=S.byteLength;return f.buffer}}class zy{constructor(){this.promise=new Promise((o,l)=>[this._resolver,this._rejecter]=[o,l])}resolve(){this._resolver()}reject(o){this._rejecter(o)}}const KV="json";class VV{constructor(){this.name=KV,this.version=2,this.transferFormat=Jo.Text}parseMessages(o,l){if(typeof o!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!o)return[];l===null&&(l=Hg.instance);const f=fs.parse(o),p=[];for(const S of f){const b=JSON.parse(S);if(typeof b.type!="number")throw new Error("Invalid payload.");switch(b.type){case Ar.Invocation:this._isInvocationMessage(b);break;case Ar.StreamItem:this._isStreamItemMessage(b);break;case Ar.Completion:this._isCompletionMessage(b);break;case Ar.Ping:break;case Ar.Close:break;case Ar.Ack:this._isAckMessage(b);break;case Ar.Sequence:this._isSequenceMessage(b);break;default:l.log(wn.Information,"Unknown message type '"+b.type+"' ignored.");continue}p.push(b)}return p}writeMessage(o){return fs.write(JSON.stringify(o))}_isInvocationMessage(o){this._assertNotEmptyString(o.target,"Invalid payload for Invocation message."),o.invocationId!==void 0&&this._assertNotEmptyString(o.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(o){if(this._assertNotEmptyString(o.invocationId,"Invalid payload for StreamItem message."),o.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(o){if(o.result&&o.error)throw new Error("Invalid payload for Completion message.");!o.result&&o.error&&this._assertNotEmptyString(o.error,"Invalid payload for Completion message."),this._assertNotEmptyString(o.invocationId,"Invalid payload for Completion message.")}_isAckMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(o,l){if(typeof o!="string"||o==="")throw new Error(l)}}const zV={trace:wn.Trace,debug:wn.Debug,info:wn.Information,information:wn.Information,warn:wn.Warning,warning:wn.Warning,error:wn.Error,critical:wn.Critical,none:wn.None};function YV(r){const o=zV[r.toLowerCase()];if(typeof o<"u")return o;throw new Error("Unknown log level: ".concat(r))}class r3{configureLogging(o){if(po.isRequired(o,"logging"),WV(o))this.logger=o;else if(typeof o=="string"){const l=YV(o);this.logger=new B0(l)}else this.logger=new B0(o);return this}withUrl(o,l){return po.isRequired(o,"url"),po.isNotEmpty(o,"url"),this.url=o,typeof l=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...l}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:l},this}withHubProtocol(o){return po.isRequired(o,"protocol"),this.protocol=o,this}withAutomaticReconnect(o){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return o?Array.isArray(o)?this.reconnectPolicy=new e3(o):this.reconnectPolicy=o:this.reconnectPolicy=new e3,this}withServerTimeout(o){return po.isRequired(o,"milliseconds"),this._serverTimeoutInMilliseconds=o,this}withKeepAliveInterval(o){return po.isRequired(o,"milliseconds"),this._keepAliveIntervalInMilliseconds=o,this}withStatefulReconnect(o){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=o==null?void 0:o.bufferSize,this}build(){const o=this.httpConnectionOptions||{};if(o.logger===void 0&&(o.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const l=new qV(this.url,o);return PC.create(l,this.logger||Hg.instance,this.protocol||new VV,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function WV(r){return r.log!==void 0}class $V extends If{constructor(o){var l;super(),this.options=o,this.hubConnection=o.hubConnection,this.updateIntervalFrequency=(l=o.updateIntervalFrequency)!=null?l:6e4*5}async getServerTimeOffset(){const o=await this.getSyncedTime();this.emit("serverTimeOffsetUpdate",{serverTimeOffset:Date.now()-o.getTime()}),!(this.updateIntervalFrequency<6e4)&&(this.timeoutInstance=setTimeout(this.getServerTimeOffset.bind(this),this.updateIntervalFrequency))}async start(){await this.getServerTimeOffset()}async getSyncedTime(){const o=this,l=12,f=1e4,p=20;let S;return await new Promise((b,g)=>{var T;const w=[];let F=0,C,y;function v(){var U;y=Date.now(),(U=o.hubConnection)==null||U.invoke("echo"),C=setTimeout(()=>{g(new Error("Did not get sufficient echoes from the server in time"))},f)}function D(U){S=U,clearTimeout(C),w.push(Date.now()-y),F++,F<l?setTimeout(v,p):m()}(T=o.hubConnection)==null||T.on("echo",D);function m(){var x;if((x=o.hubConnection)==null||x.off("echo",D),S===void 0){g(new Error("Server timestamp is undefined"));return}let U;o.options.roundtripCalcStrategy==="mean"?U=w.reduce((_,I)=>_+I)/w.length:U=nV(w),b(new Date(S+U/2))}v()})}destroy(){clearTimeout(this.timeoutInstance)}}const Js={STATE_UPDATE:"OnStateUpdated",RECIEVE_GROUP_COMMAND:"receiveGroupCommand",RECIEVE_GLOBAL_COMMAND:"receiveGlobalCommand",CLIENT_DISCONNECT:"DeviceLogOut",SETUP_REQUEST_HOST_TV_CONNECTED:"SetupRequestHostTvConnected",SETUP_STATUS_UPDATE:"SetupStatusUpdate",SETUP_ERROR_RECEIVED:"SetupErrorReceived"},ib={WAITING_FOR_HOST:"WaitingForHostState",READY_TO_PAIR_WITH_HOST:"ShowQrCodeState",CONNECTED_STATE:"ConnectedState",SHOW_QR_CODE_STATE:"ShowQrCode",HOST_TV_STATE:"HostTVState",IDLE:"Idle"};class XV extends If{constructor({deviceId:o,debug:l}){super(),this.hubConnection=null,this.globalHubConnection=null,this.connected=!1,this.serverTimeService=null,this.state=ib.IDLE,this.deviceId=o,this.debugLogging=l!=null?l:!1}setupTimeService(){this.serverTimeService=new $V({hubConnection:this.hubConnection}),this.serverTimeService.on("serverTimeOffsetUpdate",o=>{this.emit("serverTimeOffsetUpdate",o)}),this.serverTimeService.start()}async join(){await this.sendGroupCommand({command:"join",value:this.deviceId})}async disconnect(){var o;console.log("SignalR: disconnect",Js.CLIENT_DISCONNECT,{deviceId:this.deviceId}),this.connected=!1,await((o=this.hubConnection)==null?void 0:o.invoke(Js.CLIENT_DISCONNECT))}globalDisconnect(){var o;console.log("Disconnecting global signalR...",this.deviceId),(o=this.globalHubConnection)==null||o.invoke(Js.CLIENT_DISCONNECT)}connect({url:o,accessToken:l,groupName:f}){var p;this.groupName=f,this.hubConnection=new r3().withUrl(o,{accessTokenFactory:()=>l,transport:uo.WebSockets}).withAutomaticReconnect().configureLogging(this.debugLogging?wn.Trace:wn.Information).build(),(p=this.hubConnection)==null||p.start().then(()=>{this.setupTimeService(),this.connectEventHandlers(),this.connected=!0,this.join()}).catch(S=>{console.error("Connection failed:",S)})}async globalConnect({url:o,accessToken:l}){return new Promise((f,p)=>{this.globalHubConnection=new r3().withUrl(o,{accessTokenFactory:()=>l,transport:uo.WebSockets}).withAutomaticReconnect().build(),this.globalHubConnection.start().catch(S=>{console.error("Global signalR connection failed:",S),p()}),this.globalHubConnection.on(Js.SETUP_REQUEST_HOST_TV_CONNECTED,({scanTvDeviceId:S,ticketCode:b})=>{localStorage.setItem("ticketCode",b),f({ticketCode:b,scanTvDeviceId:S})})})}connectEventHandlers(){var o,l,f,p,S,b;(o=this.hubConnection)==null||o.on(Js.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.on(Js.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(f=this.hubConnection)==null||f.on(Js.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),(p=this.hubConnection)==null||p.on(Js.SETUP_STATUS_UPDATE,this.onSetupStatusUpdate.bind(this)),(S=this.hubConnection)==null||S.onclose(g=>{g?console.error("SignalR: closed with error",g):console.log("SignalR: closed")}),(b=this.hubConnection)==null||b.onreconnected(g=>{g?console.error("SignalR: Reconnected error",g):console.log("SignalR: Reconnected")})}async destroy(){var o,l,f,p;(o=this.hubConnection)==null||o.off(Js.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.off(Js.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(f=this.hubConnection)==null||f.off(Js.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),await this.disconnect(),(p=this.serverTimeService)==null||p.destroy(),super.destroy()}onReceiveGroupCommand(o){var l,f,p,S,b;switch(console.log("onReceiveGroupCommand",o),o.command){case"play":this.emit("startTimeUpdated",{startTime:new Date(o.value.startDate)}),((l=o.value.rateClockState)==null?void 0:l.rate)===0?this.emit("pausePlayStream",{command:"pause",reference:(f=o.value.rateClockState)==null?void 0:f.reference,start:(p=o.value.rateClockState)==null?void 0:p.start}):this.emit("pausePlayStream",{command:"play",reference:(S=o.value.rateClockState)==null?void 0:S.reference,start:(b=o.value.rateClockState)==null?void 0:b.start});break;case"cast":this.emit("cast",{index:o.value});break;case"prepareCast":this.emit("prepareCast",{index:o.value});break;case"cancelCast":console.log("cancelCast");break}}onReceiveGlobalCommand(o){switch(console.log("onReceiveGlobalCommand",o),o.command){case"status_changed":this.emit("eventStatusChanged",void 0);break;case"event_canceled":this.emit("eventCanceled",void 0);break}}async sendGroupCommand(o){var l;return await((l=this.hubConnection)==null?void 0:l.invoke("sendGroupCommand",{groupName:this.groupName,arguments:[o]}))}onStateUpdate(o){switch(this.state=o.state.$type,o.state.$type){case ib.CONNECTED_STATE:if(!o.state.sessionId)return;this.emit("connected",{sessionId:o.state.sessionId}),this.emit("stateUpdated",{state:this.state});return;default:this.emit("stateUpdated",{state:this.state});break}}onSetupStatusUpdate(o){console.log("SetupStatusUpdate: ",o),this.emit("setupStatusUpdate",{deviceLists:o})}}async function Ih(r,o,l){var f;try{const p=await fetch(r,o);switch(p.status){case 401:throw new og(l==null?void 0:l.name,"Unauthorized","Unauthorized",p.status);case 403:throw new og(l==null?void 0:l.name,"Forbidden","Forbidden",p.status)}const S=await p.json();if(!p.ok)throw new og(l==null?void 0:l.name,(f=S.sys)==null?void 0:f.id,S.message,p.status);return S}catch(p){throw p instanceof og?p:new og(l.name,"Network Error",l.message||"Could not make the request")}}var ob={exports:{}};(function(r,o){(function(l,f){var p="1.0.38",S="",b="?",g="function",w="undefined",F="object",C="string",y="major",v="model",D="name",m="type",T="vendor",U="version",x="architecture",_="console",I="mobile",R="tablet",j="smarttv",z="wearable",W="embedded",X=500,le="Amazon",N="Apple",$="ASUS",fe="BlackBerry",oe="Browser",he="Chrome",Ie="Edge",Xe="Firefox",Ae="Google",Ze="Huawei",it="LG",ut="Microsoft",$e="Motorola",lt="Opera",At="Samsung",Oe="Sharp",Qe="Sony",ct="Xiaomi",Qt="Zebra",Kt="Facebook",St="Chromium OS",Lt="Mac OS",Ce=function(ft,yt){var _t={};for(var Ct in ft)yt[Ct]&&yt[Ct].length%2===0?_t[Ct]=yt[Ct].concat(ft[Ct]):_t[Ct]=ft[Ct];return _t},te=function(ft){for(var yt={},_t=0;_t<ft.length;_t++)yt[ft[_t].toUpperCase()]=ft[_t];return yt},Fe=function(ft,yt){return typeof ft===C?O(yt).indexOf(O(ft))!==-1:!1},O=function(ft){return ft.toLowerCase()},M=function(ft){return typeof ft===C?ft.replace(/[^\d\.]/g,S).split(".")[0]:f},q=function(ft,yt){if(typeof ft===C)return ft=ft.replace(/^\s\s*/,S),typeof yt===w?ft:ft.substring(0,X)},K=function(ft,yt){for(var _t=0,Ct,hn,Xt,nn,Pt,Un;_t<yt.length&&!Pt;){var gr=yt[_t],Pr=yt[_t+1];for(Ct=hn=0;Ct<gr.length&&!Pt&&gr[Ct];)if(Pt=gr[Ct++].exec(ft),Pt)for(Xt=0;Xt<Pr.length;Xt++)Un=Pt[++hn],nn=Pr[Xt],typeof nn===F&&nn.length>0?nn.length===2?typeof nn[1]==g?this[nn[0]]=nn[1].call(this,Un):this[nn[0]]=nn[1]:nn.length===3?typeof nn[1]===g&&!(nn[1].exec&&nn[1].test)?this[nn[0]]=Un?nn[1].call(this,Un,nn[2]):f:this[nn[0]]=Un?Un.replace(nn[1],nn[2]):f:nn.length===4&&(this[nn[0]]=Un?nn[3].call(this,Un.replace(nn[1],nn[2])):f):this[nn]=Un||f;_t+=2}},ye=function(ft,yt){for(var _t in yt)if(typeof yt[_t]===F&&yt[_t].length>0){for(var Ct=0;Ct<yt[_t].length;Ct++)if(Fe(yt[_t][Ct],ft))return _t===b?f:_t}else if(Fe(yt[_t],ft))return _t===b?f:_t;return ft},de={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},He={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Tt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[U,[D,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[U,[D,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[D,U],[/opios[\/ ]+([\w\.]+)/i],[U,[D,lt+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[U,[D,lt+" GX"]],[/\bopr\/([\w\.]+)/i],[U,[D,lt]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[U,[D,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[D,U],[/\bddg\/([\w\.]+)/i],[U,[D,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[U,[D,"UC"+oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[U,[D,"WeChat"]],[/konqueror\/([\w\.]+)/i],[U,[D,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[U,[D,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[U,[D,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[U,[D,"Smart Lenovo "+oe]],[/(avast|avg)\/([\w\.]+)/i],[[D,/(.+)/,"$1 Secure "+oe],U],[/\bfocus\/([\w\.]+)/i],[U,[D,Xe+" Focus"]],[/\bopt\/([\w\.]+)/i],[U,[D,lt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[U,[D,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[U,[D,"Dolphin"]],[/coast\/([\w\.]+)/i],[U,[D,lt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[U,[D,"MIUI "+oe]],[/fxios\/([-\w\.]+)/i],[U,[D,Xe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[D,"360 "+oe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[D,/(.+)/,"$1 "+oe],U],[/samsungbrowser\/([\w\.]+)/i],[U,[D,At+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[D,/_/g," "],U],[/metasr[\/ ]?([\d\.]+)/i],[U,[D,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[D,"Sogou Mobile"],U],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[D,U],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[D],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[D,Kt],U],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[D,U],[/\bgsa\/([\w\.]+) .*safari\//i],[U,[D,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[U,[D,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[U,[D,he+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[D,he+" WebView"],U],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[U,[D,"Android "+oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[D,U],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[U,[D,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[U,D],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[D,[U,ye,de]],[/(webkit|khtml)\/([\w\.]+)/i],[D,U],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[D,"Netscape"],U],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[U,[D,Xe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[D,U],[/(cobalt)\/([\w\.]+)/i],[D,[U,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[x,"amd64"]],[/(ia32(?=;))/i],[[x,O]],[/((?:i[346]|x)86)[;\)]/i],[[x,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[x,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[x,"armhf"]],[/windows (ce|mobile); ppc;/i],[[x,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[x,/ower/,S,O]],[/(sun4\w)[;\)]/i],[[x,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[x,O]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[v,[T,At],[m,R]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[v,[T,At],[m,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[v,[T,N],[m,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[T,N],[m,R]],[/(macintosh);/i],[v,[T,N]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[v,[T,Oe],[m,I]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[v,[T,Ze],[m,R]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[v,[T,Ze],[m,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[v,/_/g," "],[T,ct],[m,I]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[v,/_/g," "],[T,ct],[m,R]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[v,[T,"OPPO"],[m,I]],[/\b(opd2\d{3}a?) bui/i],[v,[T,"OPPO"],[m,R]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[v,[T,"Vivo"],[m,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[v,[T,"Realme"],[m,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[v,[T,$e],[m,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[v,[T,$e],[m,R]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[v,[T,it],[m,R]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[v,[T,it],[m,I]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[v,[T,"Lenovo"],[m,R]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[v,/_/g," "],[T,"Nokia"],[m,I]],[/(pixel c)\b/i],[v,[T,Ae],[m,R]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[v,[T,Ae],[m,I]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[T,Qe],[m,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[v,"Xperia Tablet"],[T,Qe],[m,R]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[v,[T,"OnePlus"],[m,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[v,[T,le],[m,R]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[v,/(.+)/g,"Fire Phone $1"],[T,le],[m,I]],[/(playbook);[-\w\),; ]+(rim)/i],[v,T,[m,R]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[v,[T,fe],[m,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[v,[T,$],[m,R]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[v,[T,$],[m,I]],[/(nexus 9)/i],[v,[T,"HTC"],[m,R]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[v,/_/g," "],[m,I]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[v,[T,"Acer"],[m,R]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[v,[T,"Meizu"],[m,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[v,[T,"Ulefone"],[m,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,v,[m,I]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,v,[m,R]],[/(surface duo)/i],[v,[T,ut],[m,R]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[v,[T,"Fairphone"],[m,I]],[/(u304aa)/i],[v,[T,"AT&T"],[m,I]],[/\bsie-(\w*)/i],[v,[T,"Siemens"],[m,I]],[/\b(rct\w+) b/i],[v,[T,"RCA"],[m,R]],[/\b(venue[\d ]{2,7}) b/i],[v,[T,"Dell"],[m,R]],[/\b(q(?:mv|ta)\w+) b/i],[v,[T,"Verizon"],[m,R]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[v,[T,"Barnes & Noble"],[m,R]],[/\b(tm\d{3}\w+) b/i],[v,[T,"NuVision"],[m,R]],[/\b(k88) b/i],[v,[T,"ZTE"],[m,R]],[/\b(nx\d{3}j) b/i],[v,[T,"ZTE"],[m,I]],[/\b(gen\d{3}) b.+49h/i],[v,[T,"Swiss"],[m,I]],[/\b(zur\d{3}) b/i],[v,[T,"Swiss"],[m,R]],[/\b((zeki)?tb.*\b) b/i],[v,[T,"Zeki"],[m,R]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],v,[m,R]],[/\b(ns-?\w{0,9}) b/i],[v,[T,"Insignia"],[m,R]],[/\b((nxa|next)-?\w{0,9}) b/i],[v,[T,"NextBook"],[m,R]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],v,[m,I]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],v,[m,I]],[/\b(ph-1) /i],[v,[T,"Essential"],[m,I]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[v,[T,"Envizen"],[m,R]],[/\b(trio[-\w\. ]+) b/i],[v,[T,"MachSpeed"],[m,R]],[/\btu_(1491) b/i],[v,[T,"Rotor"],[m,R]],[/(shield[\w ]+) b/i],[v,[T,"Nvidia"],[m,R]],[/(sprint) (\w+)/i],[T,v,[m,I]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[T,ut],[m,I]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[T,Qt],[m,R]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[T,Qt],[m,I]],[/smart-tv.+(samsung)/i],[T,[m,j]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[T,At],[m,j]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,it],[m,j]],[/(apple) ?tv/i],[T,[v,N+" TV"],[m,j]],[/crkey/i],[[v,he+"cast"],[T,Ae],[m,j]],[/droid.+aft(\w+)( bui|\))/i],[v,[T,le],[m,j]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[v,[T,Oe],[m,j]],[/(bravia[\w ]+)( bui|\))/i],[v,[T,Qe],[m,j]],[/(mitv-\w{5}) bui/i],[v,[T,ct],[m,j]],[/Hbbtv.*(technisat) (.*);/i],[T,v,[m,j]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,q],[v,q],[m,j]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,j]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,v,[m,_]],[/droid.+; (shield) bui/i],[v,[T,"Nvidia"],[m,_]],[/(playstation [345portablevi]+)/i],[v,[T,Qe],[m,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[v,[T,ut],[m,_]],[/((pebble))app/i],[T,v,[m,z]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[v,[T,N],[m,z]],[/droid.+; (glass) \d/i],[v,[T,Ae],[m,z]],[/droid.+; (wt63?0{2,3})\)/i],[v,[T,Qt],[m,z]],[/(quest( \d| pro)?)/i],[v,[T,Kt],[m,z]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[m,W]],[/(aeobc)\b/i],[v,[T,le],[m,W]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[v,[m,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[v,[m,R]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,R]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,I]],[/(android[-\w\. ]{0,9});.+buil/i],[v,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[U,[D,Ie+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[U,[D,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[D,U],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[U,D]],os:[[/microsoft (windows) (vista|xp)/i],[D,U],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[D,[U,ye,He]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[U,ye,He],[D,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[U,/_/g,"."],[D,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[D,Lt],[U,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[U,D],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[D,U],[/\(bb(10);/i],[U,[D,fe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[U,[D,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[U,[D,Xe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[U,[D,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[U,[D,"watchOS"]],[/crkey\/([\d\.]+)/i],[U,[D,he+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[D,St],U],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[D,U],[/(sunos) ?([\w\.\d]*)/i],[[D,"Solaris"],U],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[D,U]]},ot=function(ft,yt){if(typeof ft===F&&(yt=ft,ft=f),!(this instanceof ot))return new ot(ft,yt).getResult();var _t=typeof l!==w&&l.navigator?l.navigator:f,Ct=ft||(_t&&_t.userAgent?_t.userAgent:S),hn=_t&&_t.userAgentData?_t.userAgentData:f,Xt=yt?Ce(Tt,yt):Tt,nn=_t&&_t.userAgent==Ct;return this.getBrowser=function(){var Pt={};return Pt[D]=f,Pt[U]=f,K.call(Pt,Ct,Xt.browser),Pt[y]=M(Pt[U]),nn&&_t&&_t.brave&&typeof _t.brave.isBrave==g&&(Pt[D]="Brave"),Pt},this.getCPU=function(){var Pt={};return Pt[x]=f,K.call(Pt,Ct,Xt.cpu),Pt},this.getDevice=function(){var Pt={};return Pt[T]=f,Pt[v]=f,Pt[m]=f,K.call(Pt,Ct,Xt.device),nn&&!Pt[m]&&hn&&hn.mobile&&(Pt[m]=I),nn&&Pt[v]=="Macintosh"&&_t&&typeof _t.standalone!==w&&_t.maxTouchPoints&&_t.maxTouchPoints>2&&(Pt[v]="iPad",Pt[m]=R),Pt},this.getEngine=function(){var Pt={};return Pt[D]=f,Pt[U]=f,K.call(Pt,Ct,Xt.engine),Pt},this.getOS=function(){var Pt={};return Pt[D]=f,Pt[U]=f,K.call(Pt,Ct,Xt.os),nn&&!Pt[D]&&hn&&hn.platform&&hn.platform!="Unknown"&&(Pt[D]=hn.platform.replace(/chrome os/i,St).replace(/macos/i,Lt)),Pt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(Pt){return Ct=typeof Pt===C&&Pt.length>X?q(Pt,X):Pt,this},this.setUA(Ct),this};ot.VERSION=p,ot.BROWSER=te([D,U,y]),ot.CPU=te([x]),ot.DEVICE=te([v,T,m,_,I,j,R,z,W]),ot.ENGINE=ot.OS=te([D,U]),r.exports&&(o=r.exports=ot),o.UAParser=ot;var rt=typeof l!==w&&(l.jQuery||l.Zepto);if(rt&&!rt.ua){var et=new ot;rt.ua=et.getResult(),rt.ua.get=function(){return et.getUA()},rt.ua.set=function(ft){et.setUA(ft);var yt=et.getResult();for(var _t in yt)rt.ua[_t]=yt[_t]}}})(typeof window=="object"?window:iu)})(ob,ob.exports);var QV=ob.exports;const i3=new QV.UAParser;function JV(r){const o=i3.getOS(),l=i3.getBrowser();return"Gigset/".concat(r," (").concat(o.name," ").concat(o.version,"; ").concat(l.name," ").concat(l.version,")")}function Vg({sessionId:r,appVersion:o,apiVersion:l}){const f={"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*","Gigset-Client":JV(o),"Api-version":l!=null?l:"v1"};return r&&(f.Session=r),f}async function ez({deviceId:r,appVersion:o,baseUrl:l}){const f={deviceOsVersion:window.navigator.userAgent,deviceName:kU,deviceId:r};return(await Ih)("".concat(l,"/devicehub-api/negotiate-tv"),{method:"POST",body:JSON.stringify(f),headers:Vg({appVersion:o})},{name:cs.NEGOTIATE_TV,message:"could not fetch negotiate-tv data"})}async function tz({deviceId:r,ticketCode:o,scanTvDeviceId:l,appVersion:f,baseUrl:p,ticketPrefix:S}){let b=p;S&&(b="".concat(p));const g={ticketCode:o,deviceOsVersion:window.navigator.userAgent,deviceName:kU,deviceId:r,scanTvDeviceId:l};return(await Ih)("".concat(b,"/devicehub-api/negotiate"),{method:"POST",body:JSON.stringify(g),headers:Vg({appVersion:f})},{name:cs.NEGOTIATE,message:"could not fetch negotiate data"})}async function nz({sessionId:r,appVersion:o,baseUrl:l,ticketPrefix:f,ticketCode:p}){let S=l;f&&(S="".concat(l,"/").concat(f));const b=await Ih("".concat(S,"/timeline-api/timeline/").concat(p,"/generate"),{method:"GET",headers:Vg({sessionId:r,appVersion:o})},{name:cs.GENERATE,message:"could not fetch generate data"});return{...await fetch("".concat(b.timelineUrl).concat(b.queryParameters),{method:"GET",headers:Vg({sessionId:r,appVersion:o})}).then(async w=>await w.json()),queryParameters:b.queryParameters,distributionUrl:b.distributionUrl}}async function rz({sessionId:r,appVersion:o,baseUrl:l,ticketCode:f}){return(await Ih)("".concat(l,"/static-api/event/").concat(f,"/status"),{method:"GET",headers:Vg({sessionId:r,appVersion:o})},{name:cs.EVENT_STATUS,message:"failed to get event status data"})}function iz(r){return"".concat(r,"/timeline-api/drm/license?drm=widevine")}var rf=(r=>(r.JUMPSPOT="jumpspot",r.FOLLOW="follow",r))(rf||{});function LC(r){return[...r.places.flatMap((o,l)=>o.jumpSpots.map(f=>({camera:f.camera,title:f.title,type:"jumpspot",placeIndex:l,mapPosition:o.mapPosition,mapScale:o.mapScale,placeTitle:o.title}))),...r.follows.map(o=>({camera:o.camera,title:o.title,type:"follow",mapPosition:o.mapPositions}))].map((o,l)=>({...o,index:l}))}function pE(r,o){return LC(r).filter(f=>{const p=mi(f.camera.span.time,r.frameRate),S=mi(f.camera.span.time,r.frameRate)+mi(f.camera.span.duration,r.frameRate);return p<=o&&S>=o})}function BU(r,o,l,f){const p=pE(r,o+l+2);if(!p.length)return;if(f){const g=(f==null?void 0:f.placeIndex)!==void 0&&p.find(w=>w.type==="jumpspot"&&w.placeIndex===(f==null?void 0:f.placeIndex));if(g)return g}const S=p.find(g=>g.type==="jumpspot");if(S)return S;const b=p.find(g=>g.type==="follow");if(b)return b}function oz(r){const o=LC(r),l=r.frameRate;return o.sort((f,p)=>{const S=mi(f.camera.span.time,l)+mi(f.camera.span.duration,l);return mi(p.camera.span.time,l)+mi(p.camera.span.duration,l)-S}),o[0]}function mi(r,o){if(!r)return 0;const[l,f,p,S]=r.split(":").map(Number),b=l*60*60,g=f*60;if(o){const w=S/o;return b+g+p+w}else return b+g+p}function ab(r,o,l){return pE(o,l.getExpectedPositionInSeconds()).find(f=>f.index===r)}function sb(r,o){return LC(o).find(f=>f.camera.cameraID===r)}const az=r=>{if(typeof r=="string")return"String!";if(typeof r=="number")return"Int";if(typeof r=="boolean")return"Boolean";if(typeof r=="object"&&"OR"in r)return"ResourceSetFilter";throw new Error("Unknown type: ".concat(typeof r))};function jU(r,o,l){const f=r.includes("staging")||r.includes("qa"),p={...l,preview:f},b=(Array.isArray(o)?o[0]:o).replace(/#.*/g,"").replace(/\\n/g," ").replace(/\s\s+/g," ").replace(/\s*({|}|\(|\)|\.|:|,)\s*/g,"$1"),g=Object.entries(p).map(([F,C])=>"$".concat(F,": ").concat(az(C))).join(", "),w="query(".concat(g,")").concat(b);return JSON.stringify({query:w,variables:p})}const ZU=r=>"https://graphql.contentful.com/content/v1/spaces/".concat(r,"/environments/master");function GU(r,o){return{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:r}}const sz=(r,o)=>jU(o,"\n        {\n          eventCollection(\n            limit: 1\n            preview: $preview\n            where: { ticketCodePrefix: $ticketCodePrefix }\n          ) {\n            items {\n              title\n              timeZoneInSecondsFromGmt\n              timeZoneCode\n              preScreen {\n                showTitle\n                countdownTitle\n                startTimeSubtitle\n                logoutButtonTitle\n                setupGuideButtonTitle\n                backgroundLandscape {\n                  url\n                }\n                backgroundPortrait {\n                  url\n                }\n                logoLeft {\n                  url\n                }\n                logoRight {\n                  url\n                }\n              }\n              upsell {\n                title\n                web {\n                  title\n                  body\n                  image {\n                    url\n                  }\n                  linkTitle\n                  link\n                  upsellLink {\n                    label\n                    url\n                  }\n                }\n              }\n              postScreen {\n                title\n                body\n                logoutButtonTitle\n                scanQrCodeLabel\n                offersCollection(limit: 10) {\n                  items {\n                    link\n                    image {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      ",{preview:!0,ticketCodePrefix:r});async function uz(r,o,l,f){var b,g;const p=sz(r.toUpperCase(),o),S=await Ih(ZU(f),GU(p,l),{name:cs.EVENT_META,message:"Could not fetch event meta."});return(g=(b=S==null?void 0:S.data)==null?void 0:b.eventCollection.items)==null?void 0:g[0]}function lz(r,o){const l=r.reduce((f,p)=>(f.OR.push({slug:p}),f),{OR:[]});return jU(o,"\n        {\n          resourceSetCollection(preview: $preview, where: $resourceSetFilter) {\n            items {\n              slug\n              resourcesCollection {\n                items {\n                  key\n                  value\n                }\n              }\n            }\n          }\n        }\n      ",{resourceSetFilter:l})}async function cz(r,o,l){var S,b;const f=lz(["app-general","player","setup-guide","setup","ticket-entry","web-requirements","web-app-pair"],r);return(b=(S=(await Ih(ZU(l),GU(f,o),{name:cs.CONTENTFUL,message:"Could not fetch contentful data."})).data)==null?void 0:S.resourceSetCollection)==null?void 0:b.items}const o3=.4,a3=.2;class fz{constructor(){switch(this._algorithmArray=[l=>{const f=this._videoElement;if(f){const p=l-f.currentTime-this._offset+.14;if((p>a3||p<-a3)&&!this._switchingInProgress)if(this._switchingInProgress=!0,setTimeout(()=>{this._switchingInProgress=!1},2e3),p>1)f.currentTime=f.currentTime+p+1.8;else{const S=p/2;f.playbackRate=Math.sign(p)===1?2:.5,setTimeout(()=>{f.playbackRate=1},Math.abs(S)*2200)}}},l=>{if(this._videoElement&&!this._switchingInProgress){const f=this._videoElement,p=l-f.currentTime-this._offset+.9;(p>o3||p<-o3)&&!this._switchingInProgress&&(this._switchingInProgress=!0,f.currentTime=f.currentTime+p,setTimeout(()=>{this._switchingInProgress=!1},3e3))}}],this._offset=0,this._switchingInProgress=!1,dE()){case fc.TIZEN:this._algorithm=0;break;case fc.WEBOS:this._algorithm=1;break;default:this._algorithm=0;break}}connectMediaElement(o,l=0){this._videoElement=o,this._offset=l}disconnectMedia(){this._videoElement=null,this._offset=0}sync(o){this._algorithmArray[this._algorithm](o)}destroy(){}}class dz extends If{constructor(o){super(),this.isPaused=!1,this.playheadOffset=0,this.timelineFetchBuffer=3e5,this.prepareBuffer=1e4,this.playerSyncer=new fz,this.state="idle",this.startTime=o,this.serverTimeOffset=0}get adjustedStartTime(){return this.startTime.getTime()?this.startTime.getTime()+this.serverTimeOffset:0}get isLive(){const o=this.adjustedEndTime;return this.adjustedStartTime&&this.adjustedStartTime<Date.now()&&o&&o>Date.now()}set loading(o){this.emit("playerLoadingState",o)}get timeToPrepareStart(){return this.adjustedStartTime-Date.now()-this.prepareBuffer}get isInPrepare(){return this.timeToPrepareStart<0&&this.timeToPrepareStart>this.prepareBuffer*-1}get adjustedEndTime(){if(!this.adjustedStartTime||!this._timelineData)return 0;const o=this._timelineData.frameRate,l=oz(this._timelineData);return this.adjustedStartTime+(mi(l.camera.span.time,o)+mi(l.camera.span.duration,o))*1e3+this.playheadOffset*1e3}get demoEndtime(){return Date.now()-7047966+1e4}set timelineData(o){this._timelineData=o}pausePlayStream(o,l,f){if(o==="pause"&&!this.isPaused)this.isPaused=!0;else if(o==="play"){if(l&&f){const p=new Date(l).getTime()/1e3,S=new Date(f).getTime()/1e3;this.playheadOffset!==0&&(this.playheadOffset=0),this.playheadOffset=p-S}this.onStart()}}serverNow(){return Date.now()-this.serverTimeOffset}onStart(){this.state="started",this.emit("start",void 0),this.isPaused=!1,clearInterval(this.queryInterval),this.queryInterval=setInterval(()=>{const o=this.getExpectedPositionInSeconds();this.isPaused||this.playerSyncer.sync(o)},500)}onPrepareStart(){this.emit("prepareStart",void 0)}updateStartTime(o,l=!1){this.startTime=o,this.emit("startTimeUpdated",void 0),this.preparePlayback(),l&&this.adjustedStartTime>Date.now()&&this.updateTimelineFetch()}updateTimelineFetch(){this.adjustedStartTime-this.timelineFetchBuffer>Date.now()?(clearTimeout(this.fetchTimelineTimeout),this.fetchTimelineTimeout=setTimeout(()=>{this.emit("fetchTimeline",void 0)},this.adjustedStartTime-this.timelineFetchBuffer-Date.now())):this.emit("fetchTimeline",void 0)}preparePlayback(){this.adjustedStartTime>Date.now()?(clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),this.playheadOffset=0,this.startTimeout=setTimeout(()=>{this.onStart()},this.adjustedStartTime-Date.now()),this.timeToPrepareStart>0?this.prepareStartTimeout=setTimeout(()=>{this.onPrepareStart()},this.timeToPrepareStart):this.onPrepareStart()):this.adjustedStartTime<Date.now()&&this.state!=="started"?(this.emit("fetchTimeline",void 0),this.onStart()):this.state!=="started"&&this._timelineData&&this.onStart()}updateServerTimeOffset(o){this.serverTimeOffset=o,this.emit("startTimeUpdated",void 0),this.preparePlayback()}getExpectedPositionInSeconds(){return(Date.now()-this.adjustedStartTime)/1e3-this.playheadOffset}destroy(){clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),clearInterval(this.queryInterval),clearTimeout(this.fetchTimelineTimeout),super.destroy()}}class hz extends If{constructor(o,l,f){super(),this.eventClock=o,this.timelineData=void 0,this.nearEndThreshold=l!=null?l:0,this.transitionThreshold=f!=null?f:2}updateTimelineData(o){this.timelineData=o}updatePlaying(o){var f,p,S;let l=!1;if(this.timelineData){const b=this.timelineData.frameRate,g=(S=(p=(f=o.camera.attentions)==null?void 0:f.filter(w=>w.scope==="global"))==null?void 0:p.sort((w,F)=>mi(w.time)-mi(F.time)))!=null?S:[];clearInterval(this.playbackInterval),this.playbackInterval=setInterval(()=>{clearTimeout(this.nearEndTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.attentionTimeout);const F=this.eventClock.getExpectedPositionInSeconds()-mi(o.camera.span.time,b),C=mi(o.camera.span.duration,b)-F;if(g.length){const y=g.find(D=>F<mi(D.time)),v=y?mi(y.time)-F:0;v>0&&v<1&&(this.attentionTimeout=setTimeout(()=>{this.emit("attention",void 0)},v))}C<=this.nearEndThreshold+1&&C>this.nearEndThreshold&&!l?this.nearEndTimeout=setTimeout(()=>{this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0},(C-this.nearEndThreshold)*1e3):C<this.nearEndThreshold&&!l&&(this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0),C<=this.transitionThreshold+1&&C>this.transitionThreshold&&(this.transitionTimeout=setTimeout(()=>{this.emit("transition",void 0)},(C-this.transitionThreshold)*1e3)),C<=1&&C>0&&(this.endedTimeout=setTimeout(()=>{this.emit("ended",void 0)},C*1e3))},1e3)}}endEvent(){this.emit("eventEnded",void 0)}destroy(){clearInterval(this.playbackInterval),clearTimeout(this.nearEndTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.attentionTimeout),super.destroy()}}const pz="1.0.0";function gz({baseUrl:r,contentfulAccessToken:o,contentfulSpaceId:l}){const[f,p]=pn.useState(),[S,b]=pn.useState(),g=pn.useCallback((w,F)=>{var C,y;return f&&((y=(C=f.find(v=>v.slug===w))==null?void 0:C.resourcesCollection.items.find(v=>v.key===F))==null?void 0:y.value)||""},[f]);return pn.useEffect(()=>{r&&o&&l&&(b(void 0),cz(r,o,l).then(w=>{p(w)}).catch(w=>{b(w)}))},[r,o,l]),{contentfulData:f,getContentfulValue:g,error:S}}const mz={ticketCode:"",preferredProfile:"dash-drm",getContentfulValue:()=>"",isDev:!1,preConnectErrors:[],postConnectErrors:[]},ta=Xo.createContext(mz);function vz({children:r,baseUrl:o,preferredProfile:l,contentfulAccessToken:f,contentfulSpaceId:p,newSetupToggle:S=!1,ticketCodeProp:b}){const g=bg(),w=pz,[F,C]=pn.useState(),[y,v]=pn.useState(),[D,m]=pn.useState(),[T,U]=pn.useState(),[x,_]=pn.useState(),[I,R]=pn.useState(),[j,z]=pn.useState(b),[W,X]=pn.useState(),[le,N]=pn.useState(),[$,fe]=pn.useState(),[oe,he]=pn.useState(),[Ie,Xe]=pn.useState(),[Ae,Ze]=pn.useState([]),[it,ut]=pn.useState([]),[$e,lt]=pn.useState(!1),[At,Oe]=pn.useState(),Qe=pn.useRef(),ct=pn.useRef(),{getContentfulValue:Qt,error:Kt}=gz({baseUrl:o,contentfulAccessToken:f,contentfulSpaceId:p}),St=3;function Lt(Ce,te){return te.filter(Fe=>Ce!==Fe.name)}return pn.useEffect(()=>{Ze(Kt?Ce=>[...Ce,Kt]:Ce=>Lt(cs.CONTENTFUL,Ce))},[Kt]),pn.useEffect(()=>{z(b)},[b]),pn.useEffect(()=>{o&&g&&S&&(async()=>{let te=0;const Fe=()=>ez({deviceId:g,appVersion:w,baseUrl:o});for(;te<St;)await Fe().then(O=>{Xe(O),te=St}).catch(O=>{te+=1,te===2&&console.error(O)})})()},[w,o,g,S]),pn.useEffect(()=>{if(!Ie)return;const Ce=new XV({deviceId:g,debug:!1});U(Ce),Ce==null||Ce.globalConnect(Ie).then(({ticketCode:te,scanTvDeviceId:Fe})=>{z(te),X(Fe)}),setTimeout(()=>{const te=localStorage.getItem("ticketCode");te&&(z(te),X("SCAN_DEVICE_ID"))},500)},[Ie]),pn.useEffect(()=>{!j||!W||!(T!=null&&T.globalHubConnection)||T.globalDisconnect()},[j,W,T==null?void 0:T.globalHubConnection]),pn.useEffect(()=>{if(!j||!W&&S){he(void 0);return}const Ce=j[0];Ze(te=>Lt(cs.NEGOTIATE,te)),tz({deviceId:g,deviceType:6,appVersion:w,ticketCode:j,scanTvDeviceId:W,ticketPrefix:Ce,baseUrl:o}).then(te=>{he(te),lt(te.ticketType>3)}).catch(te=>{Ze(Fe=>[...Fe,te])})},[j,w,o,g,W,S]),pn.useEffect(()=>{if(!(oe!=null&&oe.accessToken)||!oe.url||!j)return;const Ce=new dz(new Date(0)),te=new hz(Ce);T==null||T.connect({url:oe.url,accessToken:oe.accessToken,groupName:j});function Fe(O){_(O),ut(K=>Lt(cs.EVENT_STATUS,K));const M=()=>{rz({appVersion:w,baseUrl:o,ticketCode:j,sessionId:O}).then(K=>{if(v(K),K.broadcastStart&&Qe.current!==K.broadcastStart&&!ct.current)if(Qe.current=K.broadcastStart,$e){const ye=new Date;ye.setHours(ye.getHours()+1),Ce.updateStartTime(ye,!0)}else Ce.updateStartTime(new Date(K.broadcastStart),!0)}).catch(K=>{ut(ye=>[...ye,K])})};M(),T==null||T.on("eventStatusChanged",M),uz(j[0],o,f,p).then(K=>{m(K)}).catch(K=>{ut(ye=>[...ye,K])}),ut(K=>Lt(cs.GENERATE,K));const q=()=>{nz({sessionId:O,appVersion:w,baseUrl:o,ticketCode:j}).then(K=>{Ce.timelineData=K,C(K),te.updateTimelineData(K)}).catch(K=>{ut(ye=>[...ye,K])})};!F&&!Qe.current&&q(),Ce.on("fetchTimeline",q)}return T==null||T.on("setupStatusUpdate",({deviceLists:O})=>{var q;const M=(q=O.connectedDevices[0])==null?void 0:q.sessionId;Oe(O.connectedDevices),console.log("signalRClient `setupStatusUpdate` connected with sessionId: ",M),Fe(M)}),T==null||T.on("stateUpdated",({state:O})=>{console.log(O,"stateUpdate"),R(O)}),T==null||T.on("serverTimeOffsetUpdate",({serverTimeOffset:O})=>{console.log("signalRClient: server time offset updated",O),Ce.updateServerTimeOffset(O)}),T==null||T.on("startTimeUpdated",({startTime:O})=>{Qe.current=O.toString(),ct.current=O.toString(),Ce.updateStartTime(O,!0)}),T==null||T.on("connected",({sessionId:O})=>{console.log("signalRClient: `connected` with sessionId: ",O),_(O),Fe(O)}),N(Ce),fe(te),()=>{R(void 0),Oe(void 0),T==null||T.destroy(),te.destroy(),Ce.destroy()}},[oe,j,w,o,g,f,p,$e]),gt.jsx(ta.Provider,{value:{signalRClient:T,timelineData:F,eventStatus:y,eventMeta:D,hubState:I,sessionId:x,ticketCode:j,eventClock:le,orchestrator:$,preferredProfile:l,baseUrl:o,negotiateData:oe,isDev:$e,getContentfulValue:Qt,preConnectErrors:Ae,postConnectErrors:it,connectedDevices:At},children:r})}const yz="_focused_17p1l_1",Ez="_posterFocused_17p1l_11",_z="_qrCode_17p1l_31",ub={focused:yz,posterFocused:Ez,qrCode:_z};function To({selfFocus:r,focusKey:o,...l}){const{ref:f,focused:p,focusSelf:S}=yl.useFocusable({onEnterPress:()=>{l.onClick()},onBlur:()=>{l.onBlur&&l.onBlur()},focusKey:o});return pn.useEffect(()=>{r&&S()},[S,r]),gt.jsx("button",{...l,ref:f,className:"".concat(l.className||""," ").concat(p?ub.focused:"")})}function bf(){return pn.useContext(ta).signalRClient}function Cf(){return pn.useContext(ta).timelineData}function kC(){return pn.useContext(ta).eventMeta}function Tz(){return pn.useContext(ta).hubState}function Sz(){return pn.useContext(ta).sessionId}function wz(){return pn.useContext(ta).ticketCode?[0]:null}function Ps(){return pn.useContext(ta).eventClock}function Az(){return pn.useContext(ta).negotiateData}function FC(){return pn.useContext(ta).isDev}function Iz(){return pn.useContext(ta).getContentfulValue}function bz(){return pn.useContext(ta).preConnectErrors}function Cz(){return pn.useContext(ta).postConnectErrors}function om(){return pn.useContext(ta).orchestrator}function UC(){return pn.useContext(ta).connectedDevices}function qU(){const r=Cf(),o=wz(),l=pn.useContext(ta);return pn.useMemo(()=>[r==null?void 0:r.profiles.find(f=>f.name===l.preferredProfile),l.preferredProfile==="dash-drm"&&l.baseUrl?iz(l.baseUrl):void 0,r==null?void 0:r.queryParameters],[l.preferredProfile,o,r,l.baseUrl])}const Rz=()=>gt.jsx("svg",{width:"800px",height:"800px",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:gt.jsx("path",{d:"M36.96875 0C36.417969 0.015625 35.988281 0.480469 36 1.03125C36.011719 1.578125 36.457031 2 37 2L37.03125 2C37.160156 1.984375 40.671875 1.984375 44.28125 5.6875C47.914063 9.410156 48 12.96875 48 13C48 13.550781 48.445313 14 49 14C49.554688 14 50 13.550781 50 13C50 12.824219 49.953125 8.65625 45.71875 4.3125C41.457031 -0.0546875 37.164063 -0.0117188 36.96875 0 Z M 37 6C36.453125 6 36.007813 6.453125 36 7C35.992188 7.546875 36.453125 7.988281 37 8C37.066406 8 38.628906 8.066406 40.28125 9.71875C41.933594 11.371094 42 12.945313 42 13C42 13.550781 42.445313 14 43 14C43.554688 14 44 13.550781 44 13C44 12.902344 43.984375 10.546875 41.71875 8.28125C39.453125 6.015625 37.097656 6 37 6 Z M 28.71875 6.03125C27.644531 6.027344 26.539063 6.402344 25.6875 7.1875L1.1875 31.78125C-0.40625 33.375 -0.417969 35.984375 1.1875 37.71875L12.40625 48.90625C13.175781 49.675781 14.199219 50.09375 15.3125 50.09375C16.410156 50.09375 17.46875 49.683594 18.3125 48.90625L42.84375 24.34375C44.371094 22.558594 44.371094 19.964844 42.8125 18.40625L31.59375 7.1875C30.828125 6.421875 29.792969 6.035156 28.71875 6.03125 Z M 28 15C31.867188 15 35 18.132813 35 22C35 25.867188 31.867188 29 28 29C24.132813 29 21 25.867188 21 22C21 18.132813 24.132813 15 28 15 Z M 28 20C26.894531 20 26 20.894531 26 22C26 23.105469 26.894531 24 28 24C29.105469 24 30 23.105469 30 22C30 20.894531 29.105469 20 28 20 Z M 15 27C16.105469 27 17 27.894531 17 29C17 30.105469 16.105469 31 15 31C13.894531 31 13 30.105469 13 29C13 27.894531 13.894531 27 15 27 Z M 10 32C11.105469 32 12 32.894531 12 34C12 35.105469 11.105469 36 10 36C8.894531 36 8 35.105469 8 34C8 32.894531 8.894531 32 10 32 Z M 21 33C22.105469 33 23 33.894531 23 35C23 36.105469 22.105469 37 21 37C19.894531 37 19 36.105469 19 35C19 33.894531 19.894531 33 21 33 Z M 16 38C17.105469 38 18 38.894531 18 40C18 41.105469 17.105469 42 16 42C14.894531 42 14 41.105469 14 40C14 38.894531 14.894531 38 16 38Z"})});function Nz(){const r=bf(),o=Ps(),l=pn.useCallback(b=>{!o||!r||r.sendGroupCommand({command:"play",value:{senderID:bg(),startDate:new Date(o.startTime.getTime()-b).toISOString(),rateClockState:{rate:1}}})},[r,o]),f=pn.useCallback(b=>{!o||!r||r.sendGroupCommand({command:"play",value:{senderID:bg(),startDate:new Date(o.serverNow()-b).toISOString(),rateClockState:{rate:1}}})},[r,o]),p=pn.useCallback(()=>{if(!o||!r)return;const b=new Date;b.setSeconds(b.getSeconds()+5),r.sendGroupCommand({command:"play",value:{senderID:bg(),startDate:new Date(b).toISOString(),rateClockState:{rate:1}}})},[r,o]);return{seekBy:l,seekTo:f,disconnect:()=>{r==null||r.disconnect()},restart:p}}function xz({eventPlayer:r}){var T,U;const o=bf(),l=Ps(),[f,p]=pn.useState(!1),[S,b]=pn.useState(),{seekBy:g,seekTo:w,disconnect:F,restart:C}=Nz(),[y,v]=pn.useState([]),D=Cf(),m=()=>{p(!f)};return pn.useEffect(()=>{if(!l||!D)return;const x=setInterval(()=>{const _=l.getExpectedPositionInSeconds(),I=pE(D,_);v(I.map(R=>R)),b({expectedPosition:_})},500);return()=>{clearInterval(x)}},[l,D]),gt.jsxs("div",{className:"demo-remote-container",children:[gt.jsx("div",{className:"icon-wrapper",onClick:m,children:gt.jsx(Rz,{})}),f&&gt.jsxs(gt.Fragment,{children:[gt.jsx("h2",{children:"Demo Remote"}),gt.jsx(To,{selfFocus:!0,onClick:()=>{r==null||r.requestFullscreen()},children:"Go to fullscreen"}),S&&gt.jsx("div",{children:gt.jsxs("p",{children:["Expected position in seconds"," ",S.expectedPosition.toFixed(2)]})}),gt.jsx(To,{onClick:()=>{w(-5e3)},children:"Start in 5 sec"}),gt.jsx(To,{onClick:()=>{C()},children:"Restart"}),gt.jsx(To,{onClick:()=>{g(1e4)},children:"Seek Forward"}),gt.jsx(To,{onClick:()=>{g(-1e4)},children:"Seek Backward"}),gt.jsx(To,{onClick:()=>{w(1e4)},children:"Seek to first video"}),gt.jsx(To,{onClick:()=>{w(1e5)},children:"Seek to 100"}),gt.jsx(To,{onClick:F,children:"Disconnect"}),gt.jsx("h3",{children:"Available streams right now:"}),y.map(x=>gt.jsxs("div",{className:"cast-button-group",children:[gt.jsxs(To,{onClick:()=>{o==null||o.sendGroupCommand({command:"cast",value:x.index})},children:[gt.jsx("span",{style:{margin:"10px"},children:""}),x.title]}),gt.jsxs(To,{onClick:()=>{o==null||o.sendGroupCommand({command:"prepareCast",value:x.index})},children:[gt.jsx("span",{style:{margin:"10px"},children:""}),"prepare cast"]}),gt.jsxs(To,{onClick:()=>{o==null||o.sendGroupCommand({command:"cancelCast",value:x.index})},children:[gt.jsx("span",{style:{margin:"10px"},children:""}),"cancel cast"]})]},x.camera.assetName)),gt.jsx("h3",{children:"Statistics:"}),gt.jsxs("div",{className:"statistics-block",children:[gt.jsx("label",{children:"Total frames:"}),gt.jsx("div",{children:((T=r==null?void 0:r.stats)==null?void 0:T.totalVideoFrames)||0})]}),gt.jsxs("div",{className:"statistics-block",children:[gt.jsx("label",{children:"Dropped frames:"}),gt.jsx("div",{children:((U=r==null?void 0:r.stats)==null?void 0:U.droppedVideoFrames)||0})]})]})]})}var HU={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(r,o){(function(l,f){r.exports=f()})(self,function(){return function(){var l={4593:function(b,g){var w,F,C,y,v,D=function(U){for(var x=[],_=0;_<U.length;++_){var I=U.charCodeAt(_);I<128?x.push(I):I<2048?(x.push(192|I>>6),x.push(128|63&I)):I<65536?(x.push(224|I>>12),x.push(128|63&I>>6),x.push(128|63&I)):(x.push(240|I>>18),x.push(128|63&I>>12),x.push(128|63&I>>6),x.push(128|63&I))}return x},m=function(U){for(var x=[],_=0;_<U.length;){var I=U[_++];I<128||(I<224?(I=(31&I)<<6,I|=63&U[_++]):I<240?(I=(15&I)<<12,I|=(63&U[_++])<<6,I|=63&U[_++]):(I=(7&I)<<18,I|=(63&U[_++])<<12,I|=(63&U[_++])<<6,I|=63&U[_++])),x.push(String.fromCharCode(I))}return x.join("")},T={};w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=function(U){for(var x=0,_=[],I=0|U.length/3;0<I--;){var R=(U[x]<<16)+(U[x+1]<<8)+U[x+2];x+=3,_.push(w.charAt(63&R>>18)),_.push(w.charAt(63&R>>12)),_.push(w.charAt(63&R>>6)),_.push(w.charAt(63&R))}return U.length-x==2?(R=(U[x]<<16)+(U[x+1]<<8),_.push(w.charAt(63&R>>18)),_.push(w.charAt(63&R>>12)),_.push(w.charAt(63&R>>6)),_.push("=")):U.length-x==1&&(R=U[x]<<16,_.push(w.charAt(63&R>>18)),_.push(w.charAt(63&R>>12)),_.push("==")),_.join("")},C=function(){for(var U=[],x=0;x<w.length;++x)U[w.charCodeAt(x)]=x;return U[61]=0,U}(),y=function(U){for(var x=0,_=[],I=0|U.length/4;0<I--;){var R=(C[U.charCodeAt(x)]<<18)+(C[U.charCodeAt(x+1)]<<12)+(C[U.charCodeAt(x+2)]<<6)+C[U.charCodeAt(x+3)];_.push(255&R>>16),_.push(255&R>>8),_.push(255&R),x+=4}return _&&(U.charAt(x-2)=="="?(_.pop(),_.pop()):U.charAt(x-1)=="="&&_.pop()),_},v={encode:function(U){for(var x=[],_=0;_<U.length;++_)x.push(U.charCodeAt(_));return x},decode:function(U){for(var x=0;x<s.length;++x)a[x]=String.fromCharCode(a[x]);return a.join("")}},T.decodeArray=function(U){var x=y(U);return new Uint8Array(x)},T.encodeASCII=function(U){var x=v.encode(U);return F(x)},T.decodeASCII=function(U){var x=y(U);return v.decode(x)},T.encode=function(U){var x=D(U);return F(x)},T.decode=function(U){var x=y(U);return m(x)},g.decode=T.decode,g.decodeArray=T.decodeArray,g.encode=T.encode,g.encodeASCII=T.encodeASCII},452:function(b,g){(function(w){var F={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},C=function(N){var $=N;return F.hasOwnProperty(N)&&($=F[N]),String.fromCharCode($)},y=15,v=32,D={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},m={17:2,18:4,21:6,22:8,23:10,19:13,20:15},T={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},U={25:2,26:4,29:6,30:8,31:10,27:13,28:15},x=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],_={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(N){this.time=N},log:function(N,$){var fe=this.verboseFilter[N];this.verboseLevel>=fe&&console.log(this.time+" ["+N+"] "+$)}},I=function(N){for(var $=[],fe=0;fe<N.length;fe++)$.push(N[fe].toString(16));return $},R=function(N,$,fe,oe,he){this.foreground=N||"white",this.underline=$||!1,this.italics=fe||!1,this.background=oe||"black",this.flash=he||!1};R.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(N){for(var $=["foreground","underline","italics","background","flash"],fe=0;fe<$.length;fe++){var oe=$[fe];N.hasOwnProperty(oe)&&(this[oe]=N[oe])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(N){return this.foreground===N.foreground&&this.underline===N.underline&&this.italics===N.italics&&this.background===N.background&&this.flash===N.flash},copy:function(N){this.foreground=N.foreground,this.underline=N.underline,this.italics=N.italics,this.background=N.background,this.flash=N.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var j=function(N,$,fe,oe,he,Ie){this.uchar=N||" ",this.penState=new R($,fe,oe,he,Ie)};j.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(N,$){this.uchar=N,this.penState.copy($)},setPenState:function(N){this.penState.copy(N)},equals:function(N){return this.uchar===N.uchar&&this.penState.equals(N.penState)},copy:function(N){this.uchar=N.uchar,this.penState.copy(N.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var z=function(){this.chars=[];for(var N=0;N<v;N++)this.chars.push(new j);this.pos=0,this.currPenState=new R};z.prototype={equals:function(N){for(var $=!0,fe=0;fe<v;fe++)if(!this.chars[fe].equals(N.chars[fe])){$=!1;break}return $},copy:function(N){for(var $=0;$<v;$++)this.chars[$].copy(N.chars[$])},isEmpty:function(){for(var N=!0,$=0;$<v;$++)if(!this.chars[$].isEmpty()){N=!1;break}return N},setCursor:function(N){this.pos!==N&&(this.pos=N),this.pos<0?(_.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>v&&(_.log("ERROR","Too large cursor position "+this.pos),this.pos=v)},moveCursor:function(N){var $=this.pos+N;if(N>1)for(var fe=this.pos+1;fe<$+1;fe++)this.chars[fe].setPenState(this.currPenState);this.setCursor($)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(N){N>=144&&this.backSpace();var $=C(N);this.pos>=v?_.log("ERROR","Cannot insert "+N.toString(16)+" ("+$+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar($,this.currPenState),this.moveCursor(1))},clearFromPos:function(N){var $;for($=N;$<v;$++)this.chars[$].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var N=[],$=!0,fe=0;fe<v;fe++){var oe=this.chars[fe].uchar;oe!==" "&&($=!1),N.push(oe)}return $?"":N.join("")},setPenStyles:function(N){this.currPenState.setStyles(N),this.chars[this.pos].setPenState(this.currPenState)}};var W=function(){this.rows=[];for(var N=0;N<y;N++)this.rows.push(new z);this.currRow=14,this.nrRollUpRows=null,this.reset()};W.prototype={reset:function(){for(var N=0;N<y;N++)this.rows[N].clear();this.currRow=14},equals:function(N){for(var $=!0,fe=0;fe<y;fe++)if(!this.rows[fe].equals(N.rows[fe])){$=!1;break}return $},copy:function(N){for(var $=0;$<y;$++)this.rows[$].copy(N.rows[$])},isEmpty:function(){for(var N=!0,$=0;$<y;$++)if(!this.rows[$].isEmpty()){N=!1;break}return N},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(N){this.rows[this.currRow].insertChar(N)},setPen:function(N){this.rows[this.currRow].setPenStyles(N)},moveCursor:function(N){this.rows[this.currRow].moveCursor(N)},setCursor:function(N){_.log("INFO","setCursor: "+N),this.rows[this.currRow].setCursor(N)},setPAC:function(N){_.log("INFO","pacData = "+JSON.stringify(N));var $=N.row-1;this.nrRollUpRows&&$<this.nrRollUpRows-1&&($=this.nrRollUpRows-1),this.currRow=$;var fe=this.rows[this.currRow];if(N.indent!==null){var oe=N.indent,he=Math.max(oe-1,0);fe.setCursor(N.indent),N.color=fe.chars[he].penState.foreground}var Ie={foreground:N.color,underline:N.underline,italics:N.italics,background:"black",flash:!1};this.setPen(Ie)},setBkgData:function(N){_.log("INFO","bkgData = "+JSON.stringify(N)),this.backSpace(),this.setPen(N),this.insertChar(32)},setRollUpRows:function(N){this.nrRollUpRows=N},rollUp:function(){if(this.nrRollUpRows!==null){_.log("TEXT",this.getDisplayText());var N=this.currRow+1-this.nrRollUpRows,$=this.rows.splice(N,1)[0];$.clear(),this.rows.splice(this.currRow,0,$),_.log("INFO","Rolling up")}else _.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(N){N=N||!1;for(var $=[],fe="",oe=-1,he=0;he<y;he++){var Ie=this.rows[he].getTextString();Ie&&(oe=he+1,N?$.push("Row "+oe+': "'+Ie+'"'):$.push(Ie.trim()))}return $.length>0&&(fe=N?"["+$.join(" | ")+"]":$.join("\n")),fe},getTextAndFormat:function(){return this.rows}};var X=function(N,$){this.chNr=N,this.outputFilter=$,this.mode=null,this.verbose=0,this.displayedMemory=new W,this.nonDisplayedMemory=new W,this.lastOutputScreen=new W,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};X.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(N){this.outputFilter=N},setPAC:function(N){this.writeScreen.setPAC(N)},setBkgData:function(N){this.writeScreen.setBkgData(N)},setMode:function(N){N!==this.mode&&(this.mode=N,_.log("INFO","MODE="+N),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=N)},insertChars:function(N){for(var $=0;$<N.length;$++)this.writeScreen.insertChar(N[$]);var fe=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";_.log("INFO",fe+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(_.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){_.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){_.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){_.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(N){_.log("INFO","RU("+N+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(N)},cc_FON:function(){_.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){_.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){_.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){_.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){_.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){_.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){_.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(_.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var N=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=N,this.writeScreen=this.nonDisplayedMemory,_.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(N){_.log("INFO","TO("+N+") - Tab Offset"),this.writeScreen.moveCursor(N)},cc_MIDROW:function(N){var $={flash:!1};if($.underline=N%2==1,$.italics=N>=46,$.italics)$.foreground="white";else{var fe=Math.floor(N/2)-16;$.foreground=["white","green","blue","cyan","red","yellow","magenta"][fe]}_.log("INFO","MIDROW: "+JSON.stringify($)),this.writeScreen.setPen($)},outputDataUpdate:function(){var N=_.time;N!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(N,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,N,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:N):this.cueStartTime=N,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(N){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,N,this.displayedMemory),this.cueStartTime=N))}};var le=function(N,$,fe){this.field=N||1,this.outputs=[$,fe],this.channels=[new X(1,$),new X(2,fe)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};le.prototype={getHandler:function(N){return this.channels[N].getHandler()},setHandler:function(N,$){this.channels[N].setHandler($)},addData:function(N,$){var fe,oe,he,Ie=!1;this.lastTime=N,_.setTime(N);for(var Xe=0;Xe<$.length;Xe+=2)oe=127&$[Xe],he=127&$[Xe+1],oe>=16&&oe<=31&&oe===this.lastCmdA&&he===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,_.log("DEBUG","Repeated command ("+I([oe,he])+") is dropped")):oe!==0||he!==0?(_.log("DATA","["+I([$[Xe],$[Xe+1]])+"] -> ("+I([oe,he])+")"),(fe=this.parseCmd(oe,he))||(fe=this.parseMidrow(oe,he)),fe||(fe=this.parsePAC(oe,he)),fe||(fe=this.parseBackgroundAttributes(oe,he)),fe||(Ie=this.parseChars(oe,he))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(Ie):_.log("WARNING","No channel found yet. TEXT-MODE?")),fe?this.dataCounters.cmd+=2:Ie?this.dataCounters.char+=2:(this.dataCounters.other+=2,_.log("WARNING","Couldn't parse cleaned data "+I([oe,he])+" orig: "+I([$[Xe],$[Xe+1]])))):this.dataCounters.padding+=2},parseCmd:function(N,$){var fe;if(!((N===20||N===21||N===28||N===29)&&32<=$&&$<=47||(N===23||N===31)&&33<=$&&$<=35))return!1;fe=N===20||N===21||N===23?1:2;var oe=this.channels[fe-1];return N===20||N===21||N===28||N===29?$===32?oe.cc_RCL():$===33?oe.cc_BS():$===34?oe.cc_AOF():$===35?oe.cc_AON():$===36?oe.cc_DER():$===37?oe.cc_RU(2):$===38?oe.cc_RU(3):$===39?oe.cc_RU(4):$===40?oe.cc_FON():$===41?oe.cc_RDC():$===42?oe.cc_TR():$===43?oe.cc_RTD():$===44?oe.cc_EDM():$===45?oe.cc_CR():$===46?oe.cc_ENM():$===47&&oe.cc_EOC():oe.cc_TO($-32),this.lastCmdA=N,this.lastCmdB=$,this.currChNr=fe,!0},parseMidrow:function(N,$){var fe=null;if((N===17||N===25)&&32<=$&&$<=47){if((fe=N===17?1:2)!==this.currChNr)return _.log("ERROR","Mismatch channel in midrow parsing"),!1;var oe=this.channels[fe-1];return oe.insertChars([32]),oe.cc_MIDROW($),_.log("DEBUG","MIDROW ("+I([N,$])+")"),this.lastCmdA=N,this.lastCmdB=$,!0}return!1},parsePAC:function(N,$){var fe,oe;if(!((17<=N&&N<=23||25<=N&&N<=31)&&64<=$&&$<=127||(N===16||N===24)&&64<=$&&$<=95))return!1;fe=N<=23?1:2,oe=64<=$&&$<=95?fe===1?D[N]:T[N]:fe===1?m[N]:U[N];var he=this.interpretPAC(oe,$);return this.channels[fe-1].setPAC(he),this.lastCmdA=N,this.lastCmdB=$,this.currChNr=fe,!0},interpretPAC:function(N,$){var fe,oe={color:null,italics:!1,indent:null,underline:!1,row:N};return fe=$>95?$-96:$-64,oe.underline=(1&fe)==1,fe<=13?oe.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(fe/2)]:fe<=15?(oe.italics=!0,oe.color="white"):oe.indent=4*Math.floor((fe-16)/2),oe},parseChars:function(N,$){var fe=null,oe=null,he=null;if(N>=25?(fe=2,he=N-8):(fe=1,he=N),17<=he&&he<=19){var Ie;Ie=he===17?$+80:he===18?$+112:$+144,_.log("INFO","Special char '"+C(Ie)+"' in channel "+fe),oe=[Ie],this.lastCmdA=N,this.lastCmdB=$}else 32<=N&&N<=127&&(oe=$===0?[N]:[N,$],this.lastCmdA=null,this.lastCmdB=null);if(oe){var Xe=I(oe);_.log("DEBUG","Char codes =  "+Xe.join(","))}return oe},parseBackgroundAttributes:function(N,$){var fe,oe,he;return((N===16||N===24)&&32<=$&&$<=47||(N===23||N===31)&&45<=$&&$<=47)&&(fe={},N===16||N===24?(oe=Math.floor(($-32)/2),fe.background=x[oe],$%2==1&&(fe.background=fe.background+"_semi")):$===45?fe.background="transparent":(fe.foreground="black",$===47&&(fe.underline=!0)),he=N<24?1:2,this.channels[he-1].setBkgData(fe),this.lastCmdA=N,this.lastCmdB=$,!0)},reset:function(){for(var N=0;N<this.channels.length;N++)this.channels[N]&&this.channels[N].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(N){for(var $=0;$<this.channels.length;$++)this.channels[$]&&this.channels[$].cueSplitAtTime(N)}},w.logger=_,w.PenState=R,w.CaptionScreen=W,w.Cea608Parser=le,w.findCea608Nalus=function(N,$,fe){for(var oe=0,he=$,Ie=[],Xe=function($e,lt,At,Oe){if($e!==4||lt<8)return null;var Qe=At.getUint8(Oe),ct=At.getUint16(Oe+1),Qt=At.getUint32(Oe+3),Kt=At.getUint8(Oe+7);return Qe==181&&ct==49&&Qt==1195456820&&Kt==3};he<$+fe;){if(oe=N.getUint32(he),(31&N.getUint8(he+4))==6)for(var Ae=he+5,Ze=-1;Ae<he+4+oe-1;){Ze=0;for(var it=255;it===255;)Ze+=it=N.getUint8(Ae),Ae++;var ut=0;for(it=255;it===255;)ut+=it=N.getUint8(Ae),Ae++;Xe(Ze,ut,N,Ae)&&Ie.push([Ae,ut]),Ae+=ut}he+=oe+4}return Ie},w.extractCea608DataFromRange=function(N,$){var fe=$[0],oe=[[],[]];fe+=8;var he=31&N.getUint8(fe);fe+=2;for(var Ie=0;Ie<he;Ie++){var Xe=N.getUint8(fe),Ae=4&Xe,Ze=3&Xe;fe++;var it=N.getUint8(fe);fe++;var ut=N.getUint8(fe);fe++,Ae&&(127&it)+(127&ut)!=0&&(Ze===0?(oe[0].push(it),oe[0].push(ut)):Ze===1&&(oe[1].push(it),oe[1].push(ut)))}return oe}})(g)},8416:function(b,g,w){var F=w(1139),C=w(5448),y=w(6398),v=w(2032),D=(w(5530),typeof window<"u"&&window||w.g),m=D.dashjs;m||(m=D.dashjs={}),m.MediaPlayer=F.Z,m.FactoryMaker=C.Z,m.Debug=y.Z,m.Version=(0,v.e)()},6398:function(b,g,w){var F=w(5595),C=w(8512),y=w(5448),v=1,D=2,m=3,T=4,U=5;function x(I){I=I||{};var R,j,z,W,X=this.context,le=(0,F.Z)(X).getInstance(),N=I.settings,$=[];function fe(it){return it&&it.bind?it.bind(window.console):window.console.log.bind(window.console)}function oe(){for(var it=arguments.length,ut=new Array(it),$e=0;$e<it;$e++)ut[$e]=arguments[$e];Ze.apply(void 0,[v,this].concat(ut))}function he(){for(var it=arguments.length,ut=new Array(it),$e=0;$e<it;$e++)ut[$e]=arguments[$e];Ze.apply(void 0,[D,this].concat(ut))}function Ie(){for(var it=arguments.length,ut=new Array(it),$e=0;$e<it;$e++)ut[$e]=arguments[$e];Ze.apply(void 0,[m,this].concat(ut))}function Xe(){for(var it=arguments.length,ut=new Array(it),$e=0;$e<it;$e++)ut[$e]=arguments[$e];Ze.apply(void 0,[T,this].concat(ut))}function Ae(){for(var it=arguments.length,ut=new Array(it),$e=0;$e<it;$e++)ut[$e]=arguments[$e];Ze.apply(void 0,[U,this].concat(ut))}function Ze(it,ut){var $e="",lt=null;j&&(lt=new Date().getTime(),$e+="["+(lt-W)+"]"),z&&ut&&ut.getClassName&&($e+="["+ut.getClassName()+"]",ut.getType&&($e+="["+ut.getType()+"]")),$e.length>0&&($e+=" ");for(var At=arguments.length,Oe=new Array(At>2?At-2:0),Qe=2;Qe<At;Qe++)Oe[Qe-2]=arguments[Qe];Array.apply(null,Oe).forEach(function(ct){$e+=ct+" "}),$[it]&&N&&N.get().debug.logLevel>=it&&$[it]($e),N&&N.get().debug.dispatchEvent&&le.trigger(C.Z.LOG,{message:$e,level:it})}return R={getLogger:function(it){return{fatal:oe.bind(it),error:he.bind(it),warn:Ie.bind(it),info:Xe.bind(it),debug:Ae.bind(it)}},setLogTimestampVisible:function(it){j=it},setCalleeNameVisible:function(it){z=it}},j=!0,z=!0,W=new Date().getTime(),typeof window<"u"&&window.console&&($[v]=fe(window.console.error),$[D]=fe(window.console.error),$[m]=fe(window.console.warn),$[T]=fe(window.console.info),$[U]=fe(window.console.debug)),R}x.__dashjs_factory_name="Debug";var _=y.Z.getSingletonFactory(x);_.LOG_LEVEL_NONE=0,_.LOG_LEVEL_FATAL=v,_.LOG_LEVEL_ERROR=D,_.LOG_LEVEL_WARNING=m,_.LOG_LEVEL_INFO=T,_.LOG_LEVEL_DEBUG=U,y.Z.updateSingletonFactory(x.__dashjs_factory_name,_),g.Z=_},5595:function(b,g,w){var F=w(5448),C=w(8825);function y(){var D={};function m(U,x,_){var I=-1;return D[U]&&D[U].some(function(R,j){if(R&&R.callback===x&&(!_||_===R.scope))return I=j,!0}),I}var T={on:function(U,x,_){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!U)throw new Error("event type cannot be null or undefined");if(!x||typeof x!="function")throw new Error("listener must be a function: "+x);var R=I.priority||0;if(!(m(U,x,_)>=0)){D[U]=D[U]||[];var j={callback:x,scope:_,priority:R};_&&_.getStreamId&&(j.streamId=_.getStreamId()),_&&_.getType&&(j.mediaType=_.getType()),I&&I.mode&&(j.mode=I.mode);var z=D[U].some(function(W,X){if(W&&R>W.priority)return D[U].splice(X,0,j),!0});z||D[U].push(j)}},off:function(U,x,_){if(U&&x&&D[U]){var I=m(U,x,_);I<0||(D[U][I]=null)}},trigger:function(U){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(U&&D[U]){if((x=x||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");x.type=U,_.streamId&&(x.streamId=_.streamId),_.mediaType&&(x.mediaType=_.mediaType),D[U].filter(function(I){return!(!I||_.streamId&&I.streamId&&I.streamId!==_.streamId||_.mediaType&&I.mediaType&&I.mediaType!==_.mediaType||_.mode&&I.mode&&I.mode!==_.mode||!I.mode&&_.mode&&_.mode===C.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(I){return I&&I.callback.call(I.scope,x)})}},reset:function(){D={}}};return T}y.__dashjs_factory_name="EventBus";var v=F.Z.getSingletonFactory(y);v.EVENT_PRIORITY_LOW=0,v.EVENT_PRIORITY_HIGH=5e3,F.Z.updateSingletonFactory(y.__dashjs_factory_name,v),g.Z=v},5448:function(b,g){var w=function(){var F,C=[],y={},v={};function D(x,_){for(var I in C){var R=C[I];if(R.context===x&&R.name===_)return R.instance}return null}function m(x,_){return _[x]}function T(x,_,I){x in I&&(I[x]=_)}function U(x,_,I){var R,j=x.__dashjs_factory_name,z=_[j];if(z){var W=z.instance;if(!z.override)return W.apply({context:_,factory:F},I);for(var X in R=x.apply({context:_},I),W=W.apply({context:_,factory:F,parent:R},I))R.hasOwnProperty(X)&&(R[X]=W[X])}else R=x.apply({context:_},I);return R.getClassName=function(){return j},R}return F={extend:function(x,_,I,R){!R[x]&&_&&(R[x]={instance:_,override:I})},getSingletonInstance:D,setSingletonInstance:function(x,_,I){for(var R in C){var j=C[R];if(j.context===x&&j.name===_)return void(C[R].instance=I)}C.push({name:_,context:x,instance:I})},deleteSingletonInstances:function(x){C=C.filter(function(_){return _.context!==x})},getSingletonFactory:function(x){var _=m(x.__dashjs_factory_name,y);return _||(_=function(I){var R;return I===void 0&&(I={}),{getInstance:function(){return R||(R=D(I,x.__dashjs_factory_name)),R||(R=U(x,I,arguments),C.push({name:x.__dashjs_factory_name,context:I,instance:R})),R}}},y[x.__dashjs_factory_name]=_),_},getSingletonFactoryByName:function(x){return m(x,y)},updateSingletonFactory:function(x,_){T(x,_,y)},getClassFactory:function(x){var _=m(x.__dashjs_factory_name,v);return _||(_=function(I){return I===void 0&&(I={}),{create:function(){return U(x,I,arguments)}}},v[x.__dashjs_factory_name]=_),_},getClassFactoryByName:function(x){return m(x,v)},updateClassFactory:function(x,_){T(x,_,v)}},F}();g.Z=w},1264:function(b,g,w){var F=w(5448),C=w(703),y=w(6398),v=w(3393),D=w(7855),m=w(5595),T=w(8512);function U(R){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},U(R)}function x(R,j,z){return j in R?Object.defineProperty(R,j,{value:z,enumerable:!0,configurable:!0,writable:!0}):R[j]=z,R}function _(){var R,j,z=this.context,W=(0,m.Z)(z).getInstance(),X={"streaming.delay.liveDelay":T.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":T.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},le={debug:{logLevel:y.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:v.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:v.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:v.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:v.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(R={},x(R,D.w.MPD_TYPE,500),x(R,D.w.XLINK_EXPANSION_TYPE,500),x(R,D.w.MEDIA_SEGMENT_TYPE,1e3),x(R,D.w.INIT_SEGMENT_TYPE,1e3),x(R,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),x(R,D.w.INDEX_SEGMENT_TYPE,1e3),x(R,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),x(R,D.w.LICENSE,1e3),x(R,D.w.OTHER_TYPE,1e3),x(R,"lowLatencyReductionFactor",10),R),retryAttempts:(j={},x(j,D.w.MPD_TYPE,3),x(j,D.w.XLINK_EXPANSION_TYPE,1),x(j,D.w.MEDIA_SEGMENT_TYPE,3),x(j,D.w.INIT_SEGMENT_TYPE,3),x(j,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),x(j,D.w.INDEX_SEGMENT_TYPE,3),x(j,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),x(j,D.w.LICENSE,3),x(j,D.w.OTHER_TYPE,3),x(j,"lowLatencyMultiplyFactor",5),j),abr:{movingAverageMethod:v.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:v.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:v.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},N=C.Z.clone(le);function $(fe,oe,he){for(var Ie in fe)fe.hasOwnProperty(Ie)&&(oe.hasOwnProperty(Ie)?U(fe[Ie])!=="object"||fe[Ie]instanceof Array||fe[Ie]===null?(oe[Ie]=C.Z.clone(fe[Ie]),X[he+Ie]&&W.trigger(X[he+Ie])):$(fe[Ie],oe[Ie],he.slice()+Ie+"."):console.error("Settings parameter "+he+Ie+" is not supported"))}return{get:function(){return N},update:function(fe){U(fe)==="object"&&$(fe,N,"")},reset:function(){N=C.Z.clone(le)}}}_.__dashjs_factory_name="Settings";var I=F.Z.getSingletonFactory(_);g.Z=I},703:function(b,g,w){var F=w(3875),C=w.n(F),y=w(1067);function v(T){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},v(T)}function D(T,U){for(var x=0;x<U.length;x++){var _=U[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var m=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T)}var U,x;return U=T,x=[{key:"mixin",value:function(_,I,R){var j,z={};if(_)for(var W in I)I.hasOwnProperty(W)&&(j=I[W],W in _&&(_[W]===j||W in z&&z[W]===j)||(v(_[W])==="object"&&_[W]!==null?_[W]=T.mixin(_[W],j,R):_[W]=R(j)));return _}},{key:"clone",value:function(_){if(!_||v(_)!=="object")return _;var I;if(_ instanceof Array){I=[];for(var R=0,j=_.length;R<j;++R)R in _&&I.push(T.clone(_[R]))}else I={};return T.mixin(I,_,T.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(_,I){try{if(!I||I.length===0)return _;var R=new URL(_);return I.forEach(function(j){j.key&&j.value&&R.searchParams.set(j.key,j.value)}),R.href}catch(j){return _}}},{key:"parseHttpHeaders",value:function(_){var I={};if(!_)return I;for(var R=_.trim().split("\r\n"),j=0,z=R.length;j<z;j++){var W=R[j],X=W.indexOf(": ");X>0&&(I[W.substring(0,X)]=W.substring(X+2))}return I}},{key:"generateUuid",value:function(){var _=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(I){var R=(_+16*Math.random())%16|0;return _=Math.floor(_/16),(I=="x"?R:3&R|8).toString(16)})}},{key:"generateHashCode",value:function(_){var I=0;if(_.length===0)return I;for(var R=0;R<_.length;R++)I=(I<<5)-I+_.charCodeAt(R),I|=0;return I}},{key:"getRelativeUrl",value:function(_,I){try{var R=new URL(_),j=new URL(I);if(R.protocol=j.protocol,R.origin!==j.origin)return I;var z=C().relative(R.pathname.substr(0,R.pathname.lastIndexOf("/")),j.pathname.substr(0,j.pathname.lastIndexOf("/"))),W=z.length===0?1:0;return z+=j.pathname.substr(j.pathname.lastIndexOf("/")+W,j.pathname.length-1),j.pathname.length<z.length?j.pathname:z}catch(X){return I}}},{key:"parseUserAgent",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var I=_===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,y.UAParser)(I)}catch(R){return{}}}},{key:"stringHasProtocol",value:function(_){return/(http(s?)):\/\//i.test(_)}}],x&&D(U,x),T}();g.Z=m},2032:function(b,g,w){function F(){return"4.7.4"}w.d(g,{e:function(){return F}})},2230:function(b,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var F=function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C)}var y,v;return y=C,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var x in D)!D.hasOwnProperty(x)||this[x]&&!T||U&&D[x].indexOf("public_")===-1||(this[x]=D[x])}}}])&&w(y.prototype,v),C}();g.Z=F},4351:function(b,g,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function C(m,T){return C=Object.setPrototypeOf||function(U,x){return U.__proto__=x,U},C(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=function(m){(function(I,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(R&&R.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),R&&C(I,R)})(_,m);var T,U,x=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,R=v(T);if(U){var j=v(this).constructor;I=Reflect.construct(R,arguments,j)}else I=R.apply(this,arguments);return y(this,I)});function _(){var I;return function(R,j){if(!(R instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=x.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",I.BUFFERING_COMPLETED="bufferingCompleted",I.BUFFER_CLEARED="bufferCleared",I.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",I.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",I.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",I.CMSD_STATIC_HEADER="cmsdStaticHeader",I.CURRENT_TRACK_CHANGED="currentTrackChanged",I.DATA_UPDATE_COMPLETED="dataUpdateCompleted",I.INBAND_EVENTS="inbandEvents",I.INITIAL_STREAM_SWITCH="initialStreamSwitch",I.INIT_FRAGMENT_LOADED="initFragmentLoaded",I.INIT_FRAGMENT_NEEDED="initFragmentNeeded",I.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",I.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",I.LOADING_COMPLETED="loadingCompleted",I.LOADING_PROGRESS="loadingProgress",I.LOADING_DATA_PROGRESS="loadingDataProgress",I.LOADING_ABANDONED="loadingAborted",I.MANIFEST_UPDATED="manifestUpdated",I.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",I.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",I.QUOTA_EXCEEDED="quotaExceeded",I.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",I.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",I.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",I.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",I.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",I.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",I.SOURCE_BUFFER_ERROR="sourceBufferError",I.STREAMS_COMPOSED="streamsComposed",I.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",I.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",I.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",I.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",I.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",I.URL_RESOLUTION_FAILED="urlResolutionFailed",I.VIDEO_CHUNK_RECEIVED="videoChunkReceived",I.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",I.XLINK_ELEMENT_LOADED="xlinkElementLoaded",I.XLINK_READY="xlinkReady",I.SEEK_TARGET="seekTarget",I.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",I.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",I.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",I.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",I.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",I}return _}(w(8342).Z);g.Z=D},8512:function(b,g,w){function F(U){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},F(U)}function C(U,x){if(!(U instanceof x))throw new TypeError("Cannot call a class as a function")}function y(U,x){return y=Object.setPrototypeOf||function(_,I){return _.__proto__=I,_},y(U,x)}function v(U,x){return!x||F(x)!=="object"&&typeof x!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(U):x}function D(U){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)},D(U)}var m=function(U){(function(j,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(z&&z.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),z&&y(j,z)})(R,U);var x,_,I=(x=R,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(j){return!1}}(),function(){var j,z=D(x);if(_){var W=D(this).constructor;j=Reflect.construct(z,arguments,W)}else j=z.apply(this,arguments);return v(this,j)});function R(){return C(this,R),I.apply(this,arguments)}return R}(w(4351).Z),T=new m;g.Z=T},8342:function(b,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var F=function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C)}var y,v;return y=C,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var x in D)!D.hasOwnProperty(x)||this[x]&&!T||U&&D[x].indexOf("public_")===-1||(this[x]=D[x])}}}])&&w(y.prototype,v),C}();g.Z=F},9326:function(b,g,w){var F=w(3186),C=w(7855),y=w(5448),v=w(8825),D=w(7387),m=w(1553);function T(U){var x,_,I,R,j,z=(U=U||{}).eventBus,W=U.debug,X=U.urlUtils,le=U.type,N=U.streamInfo,$=U.segmentsController,fe=U.timelineConverter,oe=U.baseURLController;function he(){return le}function Ie(){I=null}function Xe($e,lt,At){var Oe,Qe,ct=oe.resolve(At.path),Qt={};return ct&&lt!==ct.url&&X.isRelative(lt)?(Oe=ct.url,Qe=ct.serviceLocation,Qt=ct.queryParams,lt&&(Oe=X.resolve(lt,Oe))):Oe=lt,!X.isRelative(Oe)&&($e.url=Oe,$e.serviceLocation=Qe,$e.queryParams=Qt,!0)}function Ae($e,lt){if(lt==null)return null;var At=new F.Z,Oe=lt.representation,Qe=Oe.adaptation.period.mpd.manifest.Period_asArray[Oe.adaptation.period.index].AdaptationSet_asArray[Oe.adaptation.index].Representation_asArray[Oe.index].bandwidth,ct=lt.media;return ct=(0,D.vi)(ct,"Number",lt.replacementNumber),ct=(0,D.vi)(ct,"Time",lt.replacementTime),ct=(0,D.vi)(ct,"Bandwidth",Qe),ct=(0,D.Aj)(ct,Oe.id),ct=(0,D.eR)(ct),At.mediaType=he(),At.type=C.w.MEDIA_SEGMENT_TYPE,At.range=lt.mediaRange,At.startTime=lt.presentationStartTime,At.mediaStartTime=lt.mediaStartTime,At.duration=lt.duration,At.timescale=Oe.timescale,At.availabilityStartTime=lt.availabilityStartTime,At.availabilityEndTime=lt.availabilityEndTime,At.availabilityTimeComplete=Oe.availabilityTimeComplete,At.wallStartTime=lt.wallStartTime,At.quality=Oe.index,At.index=lt.index,At.mediaInfo=$e,At.adaptationIndex=Oe.adaptation.index,At.representationId=Oe.id,Xe(At,ct,Oe)?At:void 0}function Ze($e,lt,At){var Oe=null;if(!lt||!lt.segmentInfoType)return Oe;var Qe=$.getSegmentByTime(lt,At);return Qe&&(I=Qe,_.debug("Index for time "+At+" is "+Qe.index),Oe=Ae($e,Qe)),Oe}function it($e,lt,At){var Oe=null,Qe=$.getSegmentByIndex(lt,At,I?I.mediaStartTime:-1);if(Qe)Oe=Ae($e,Qe),I=Qe;else{if(R&&!j)return _.debug(he()+" No segment found at index: "+At+". Wait for next loop"),null;j=!0}return Oe}function ut(){_.debug("Dynamic stream complete"),j=!0}return x={getCurrentIndex:function(){return I?I.index:-1},getInitRequest:function($e,lt){return lt?function(At,Oe,Qe){var ct=new F.Z,Qt=Oe.adaptation.period,Kt=Qt.start;if(ct.mediaType=Qe,ct.type=C.w.INIT_SEGMENT_TYPE,ct.range=Oe.range,ct.availabilityStartTime=fe.calcAvailabilityStartTimeFromPresentationTime(Kt,Oe,R),ct.availabilityEndTime=fe.calcAvailabilityEndTimeFromPresentationTime(Kt+Qt.duration,Oe,R),ct.quality=Oe.index,ct.mediaInfo=At,ct.representationId=Oe.id,Xe(ct,Oe.initialization,Oe))return ct.url=(0,D.vi)(ct.url,"Bandwidth",Oe.bandwidth),ct}($e,lt,he()):null},getNextSegmentRequest:function($e,lt){return lt&&lt.segmentInfoType?it($e,lt,I?I.index+1:0):null},getNextSegmentRequestIdempotent:function($e,lt){var At=I?I.index+1:0,Oe=$.getSegmentByIndex(lt,At,I?I.mediaStartTime:-1);return Oe?Ae($e,Oe):null},getSegmentRequestForTime:Ze,getStreamId:function(){return N.id},getStreamInfo:function(){return N},getType:he,getValidTimeAheadOfTargetTime:function($e,lt,At,Oe){try{if(isNaN($e)||!lt||!At)return NaN;if($e<0&&($e=0),isNaN(Oe)&&(Oe=.5),Ze(lt,At,$e))return $e;if(At.adaptation.period.start+At.adaptation.period.duration<$e)return NaN;for(var Qe=isFinite(At.adaptation.period.duration)?At.adaptation.period.start+At.adaptation.period.duration:$e+30,ct=Math.min($e+Oe,Qe),Qt=NaN,Kt=null;ct<=Qe;){var St=null;if(ct<=Qe&&(St=Ze(lt,At,ct)),St){Qt=ct,Kt=St;break}ct+=Oe}if(Kt){var Lt=Kt.startTime+Kt.duration;return $e>Kt.startTime&&Lt-$e>Oe?$e:!isNaN(Kt.startTime)&&$e<Kt.startTime&&Qt>Kt.startTime?Kt.startTime+.001:Math.min(Lt-Oe,Qt)}return Qt}catch(Ce){return NaN}},initialize:function($e){R=$e,j=!1,$.initialize($e)},isLastSegmentRequested:function($e,lt){return!$e||!I?!1:j?!0:!isFinite($e.adaptation.period.duration)||I.presentationStartTime+I.duration>lt?!1:$e.mediaFinishedInformation&&!isNaN($e.mediaFinishedInformation.numberOfSegments)&&!isNaN(I.index)&&I.index>=$e.mediaFinishedInformation.numberOfSegments-1&&(!R||$e.segmentInfoType===m.Z.SEGMENT_TEMPLATE||R&&$e.segmentInfoType===m.Z.SEGMENT_LIST&&$e.adaptation.period.nextPeriodId)?!0:!!(R&&$e.adaptation.period.nextPeriodId&&$e.segmentInfoType===m.Z.SEGMENT_TIMELINE&&$e.mediaFinishedInformation&&!isNaN($e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&I&&!isNaN(I.mediaStartTime)&&!isNaN(I.duration)&&I.mediaStartTime+I.duration>=$e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function($e,lt){return lt&&lt.segmentInfoType?it($e,lt,I?I.index:0):null},reset:function(){Ie(),z.off(v.Z.DYNAMIC_TO_STATIC,ut,x)}},_=W.getLogger(x),Ie(),z.on(v.Z.DYNAMIC_TO_STATIC,ut,x),x}T.__dashjs_factory_name="DashHandler",g.Z=y.Z.getClassFactory(T)},1553:function(b,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var F=new(function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var y,v;return y=C,(v=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&w(y.prototype,v),C}());g.Z=F},7802:function(b,g,w){var F=w(5448),C=w(1724),y=w(3636),v=w(1736),D=w(5246);function m(U){U=U||{};var x,_,I=this.context,R=U.dashConstants,j=U.type,z=U.segmentBaseController;function W(X){return X?X.segments?_[R.SEGMENT_BASE]:_[X.segmentInfoType]:null}return x={initialize:function(X){_[R.SEGMENT_TIMELINE]=(0,C.Z)(I).create(U,X),_[R.SEGMENT_TEMPLATE]=(0,y.Z)(I).create(U,X),_[R.SEGMENT_LIST]=(0,v.Z)(I).create(U,X),_[R.SEGMENT_BASE]=(0,D.Z)(I).create(U,X)},updateInitData:function(X,le){return le?Promise.resolve():z.getSegmentBaseInitSegment({representation:X,mediaType:j})},updateSegmentData:function(X,le){return le?Promise.resolve():z.getSegmentList({mimeType:X.mimeType,representation:X,mediaType:j})},getSegmentByIndex:function(X,le,N){var $=W(X);return $?$.getSegmentByIndex(X,le,N):null},getSegmentByTime:function(X,le){var N=W(X);return N?N.getSegmentByTime(X,le):null},getMediaFinishedInformation:function(X){var le=W(X);return le?le.getMediaFinishedInformation(X):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},_={},x}m.__dashjs_factory_name="SegmentsController";var T=F.Z.getClassFactory(m);g.Z=T},1736:function(b,g,w){var F=w(5448),C=w(3393),y=w(7387);function v(m,T){var U=(m=m||{}).timelineConverter;function x(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function _(I,R){if(x(),!I)return null;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,z=j.SegmentURL_asArray.length,W=I&&!isNaN(I.startNumber)?I.startNumber:1,X=Math.max(W-1,0),le=Math.max(R-X,0),N=null;if(le<z){var $=j.SegmentURL_asArray[le];(N=(0,y.NF)(U,T,I,R))&&(N.replacementTime=(W+R-1)*I.segmentDuration,N.media=$.media?$.media:"",N.mediaRange=$.mediaRange,N.indexRange=$.indexRange)}return N}return{getSegmentByIndex:_,getSegmentByTime:function(I,R){if(x(),!I)return null;var j=I.segmentDuration;if(isNaN(j))return null;var z=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,R);return _(I,Math.floor(z/j))},getMediaFinishedInformation:function(I){var R={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return R;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,z=I&&!isNaN(I.startNumber)?I.startNumber:1,W=Math.max(z-1,0);return R.numberOfSegments=W+j.SegmentURL_asArray.length,R}}}v.__dashjs_factory_name="ListSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},5246:function(b,g,w){var F=w(5448),C=w(3393);function y(D){var m=(D=D||{}).timelineConverter;function T(){if(!m||!m.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function U(x,_){if(T(),!x)return null;var I,R=x.segments?x.segments.length:-1;if(_<R&&(I=x.segments[_])&&I.index===_)return I;for(var j=0;j<R;j++)if((I=x.segments[j])&&I.index===_)return I;return null}return{getSegmentByIndex:U,getSegmentByTime:function(x,_){T();var I=function(R,j){if(!R)return-1;var z,W,X,le,N,$=R.segments,fe=$?$.length:null,oe=-1;if($&&fe>0){for(N=0;N<fe;N++)if(X=(W=$[N]).presentationStartTime,j+(z=(le=W.duration)/2)>=X&&j-z<X+le){oe=W.index;break}}return oe}(x,_);return U(x,I)},getMediaFinishedInformation:function(x){var _={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return x&&x.segments&&(_.numberOfSegments=x.segments.length),_}}}y.__dashjs_factory_name="SegmentBaseGetter";var v=F.Z.getClassFactory(y);g.Z=v},7387:function(b,g,w){w.d(g,{Aj:function(){return v},NF:function(){return U},TJ:function(){return x},eR:function(){return y},vi:function(){return D}});var F=w(2011);function C(_,I){for(;_.length<I;)_="0"+_;return _}function y(_){return _&&_.split("$$").join("$")}function v(_,I){if(!I||!_||_.indexOf("$RepresentationID$")===-1)return _;var R=I.toString();return _.split("$RepresentationID$").join(R)}function D(_,I,R){var j,z,W,X,le,N,$=I.length,fe=2;if(!_)return _;for(;;){if((j=_.indexOf("$"+I))<0||(z=_.indexOf("$",j+$))<0)return _;if((W=_.indexOf("%0",j+$))>j&&W<z)switch(X=_.charAt(z-1),le=parseInt(_.substring(W+fe,z-1),10),X){case"d":case"i":case"u":N=C(R.toString(),le);break;case"x":N=C(R.toString(16),le);break;case"X":N=C(R.toString(16),le).toUpperCase();break;case"o":N=C(R.toString(8),le);break;default:return _}else N=R;_=_.substring(0,j)+N+_.substring(z+1)}}function m(_,I,R,j,z,W,X,le){var N,$=new F.Z;return $.representation=_,$.duration=I,$.presentationStartTime=R,$.mediaStartTime=j,$.availabilityStartTime=z.calcAvailabilityStartTimeFromPresentationTime(W,_,X),$.availabilityEndTime=z.calcAvailabilityEndTimeFromPresentationTime(W+I,_,X),$.wallStartTime=z.calcWallTimeForSegment($,X),$.replacementNumber=(N=le,$.representation.startNumber+N),$.index=le,$}function T(_,I,R,j){var z=I.adaptation.period;if(isFinite(z.duration)&&z.start+z.duration<=R.presentationStartTime)return!1;if(j){if(I.availabilityTimeOffset==="INF")return!0;var W=_.getClientReferenceTime();return R.availabilityStartTime.getTime()<=W&&(!isFinite(R.availabilityEndTime)||R.availabilityEndTime.getTime()>=W)}return!0}function U(_,I,R,j){var z,W,X;z=R.segmentDuration,isNaN(z)&&(z=R.adaptation.period.duration),W=parseFloat((R.adaptation.period.start+j*z).toFixed(5)),X=parseFloat((W+z).toFixed(5));var le=m(R,z,W,_.calcMediaTimeFromPresentationTime(W,R),_,X,I,j);return T(_,R,le,I)?le:null}function x(_,I,R,j,z,W,X,le,N,$){var fe,oe,he=j/W,Ie=z/W;return fe=_.calcPresentationTimeFromMediaTime(he,R),T(_,R,oe=m(R,Ie,fe,he,_,fe+Ie,I,N),I)?(oe.replacementTime=$||j,X=D(X,"Number",oe.replacementNumber),X=D(X,"Time",oe.replacementTime),oe.media=X,oe.mediaRange=le,oe):null}},3636:function(b,g,w){var F=w(5448),C=w(3393),y=w(7387);function v(m,T){var U=(m=m||{}).timelineConverter;function x(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function _(I,R){if(x(),!I)return null;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentTemplate;R=Math.max(R,0);var z=(0,y.NF)(U,T,I,R);if(z){z.replacementTime=Math.round((R-1)*I.segmentDuration*I.timescale,10);var W=j.media;W=(0,y.vi)(W,"Number",z.replacementNumber),W=(0,y.vi)(W,"Time",z.replacementTime),z.media=W}return z}return{getSegmentByIndex:_,getSegmentByTime:function(I,R){if(x(),!I)return null;var j=I.segmentDuration;if(isNaN(j))return null;var z=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,R);return _(I,Math.floor(z/j))},getMediaFinishedInformation:function(I){var R={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return R;var j=I.segmentDuration;return isNaN(j)?R.numberOfSegments=1:R.numberOfSegments=Math.ceil(I.adaptation.period.duration/j),R}}}v.__dashjs_factory_name="TemplateSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},1724:function(b,g,w){var F=w(5448),C=w(3393),y=w(7387);function v(m,T){var U=(m=m||{}).timelineConverter,x=m.dashMetrics;function _(){if(!U)throw new Error(C.Z.MISSING_CONFIG_ERROR)}function I(j,z){var W,X,le,N,$,fe,oe,he=j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentTemplate||j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentList,Ie=he.SegmentTimeline,Xe=he.SegmentURL_asArray,Ae=0,Ze=-1;oe=j.timescale;var it=!1;for(le=0,N=(W=Ie.S_asArray).length;le<N&&!it;le++)for(fe=0,(X=W[le]).hasOwnProperty("r")&&(fe=X.r),X.hasOwnProperty("t")&&(Ae=X.t),fe<0&&(fe=R(j,W[le+1],X,oe,Ae/oe)),$=0;$<=fe&&!it;$++)(it=z(Ae,he,Xe,X,oe,++Ze,le))&&(j.segmentDuration=X.d/oe),Ae+=X.d}function R(j,z,W,X,le){var N;if(z&&z.hasOwnProperty("t"))N=z.t/X;else try{var $=0;if(isNaN(j.adaptation.period.start)||isNaN(j.adaptation.period.duration)||!isFinite(j.adaptation.period.duration)){var fe=x.getCurrentDVRInfo();$=isNaN(fe.end)?0:fe.end}else $=j.adaptation.period.start+j.adaptation.period.duration;N=U.calcMediaTimeFromPresentationTime($,j),j.segmentDuration=W.d/X}catch(oe){N=0}return Math.max(Math.ceil((N-le)/(W.d/X))-1,0)}return{getSegmentByIndex:function(j,z,W){if(_(),!j)return null;var X=null,le=!1;return I(j,function(N,$,fe,oe,he,Ie,Xe){if(le||W<0){var Ae=$.media,Ze=oe.mediaRange;return fe&&(Ae=fe[Xe].media||"",Ze=fe[Xe].mediaRange),X=(0,y.TJ)(U,T,j,N,oe.d,he,Ae,Ze,Ie,oe.tManifest),!0}return N>=W*he-.5*oe.d&&(le=!0),!1}),X},getSegmentByTime:function(j,z){if(_(),!j)return null;z===void 0&&(z=null);var W=null,X=U.calcMediaTimeFromPresentationTime(z,j);return I(j,function(le,N,$,fe,oe,he,Ie){var Xe=parseFloat((X*oe).toPrecision(15));if(Xe<le+fe.d&&Xe>=le){var Ae=N.media,Ze=fe.mediaRange;return $&&(Ae=$[Ie].media||"",Ze=$[Ie].mediaRange),W=(0,y.TJ)(U,T,j,le,fe.d,oe,Ae,Ze,he,fe.tManifest),!0}return!1}),W},getMediaFinishedInformation:function(j){if(!j)return 0;var z,W,X,le,N,$,fe,oe=(j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentTemplate||j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentList).SegmentTimeline,he=0,Ie=0,Xe=0;for(fe=j.timescale,le=(z=oe.S_asArray).length,X=0;X<le;X++)for($=0,(W=z[X]).hasOwnProperty("r")&&($=W.r),W.hasOwnProperty("t")&&(Ie=(he=W.t)/fe),$<0&&($=R(j,z[X+1],W,fe,Ie)),N=0;N<=$;N++)Xe++,Ie=(he+=W.d)/fe;return{numberOfSegments:Xe,mediaTimeOfLastSignaledSegment:Ie}}}}v.__dashjs_factory_name="TimelineSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},2011:function(b,g){g.Z=function w(){(function(F,C){if(!(F instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(b,g){g.Z=function w(){(function(F,C){if(!(F instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.schemeIdUri="",this.value=""}},1139:function(b,g,w){w.d(g,{Z:function(){return Km}});var F=w(452),C=w.n(F),y=w(3393),v=w(1553),D=w(3860),m=w(5595),T=w(8512),U=w(5448),x=w(6398),_=w(8825);function I(){var L,P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z,ue,ae,se=this.context,Q=(0,m.Z)(se).getInstance();function Me(){pe(),ge=!1,Se=0,Ee=0,Be=0,Z=!1,ze=!0,_e=!1,ue=!1,Le=NaN,De=NaN,H&&(Q.off(T.Z.DATA_UPDATE_COMPLETED,Nt,L),Q.off(T.Z.LOADING_PROGRESS,Ot,L),Q.off(T.Z.MANIFEST_UPDATED,qt,L),Q.off(T.Z.STREAMS_COMPOSED,Ve,L),Q.off(_.Z.PLAYBACK_ENDED,bt,L),Q.off(_.Z.STREAM_INITIALIZING,st,L),Q.off(_.Z.REPRESENTATION_SWITCH,tt,L),Q.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Yt,L),Wt(),H.removeEventListener("canplay",en),H.removeEventListener("canplaythrough",Jt),H.removeEventListener("play",Dn),H.removeEventListener("waiting",Nn),H.removeEventListener("playing",rr),H.removeEventListener("pause",ir),H.removeEventListener("error",Sn),H.removeEventListener("seeking",It),H.removeEventListener("seeked",$t),H.removeEventListener("timeupdate",Zt),H.removeEventListener("progress",un),H.removeEventListener("ratechange",vn),H.removeEventListener("loadedmetadata",Pn),H.removeEventListener("loadeddata",xn),H.removeEventListener("stalled",On),H.removeEventListener("ended",Fn),H.removeEventListener("volumechange",Gn)),ce=null,H=null,ie=null,me=null}function be(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((ke(Ke)-at()).toFixed(5))}function ke(Ke){var Mt=Ke||ie;return Mt.start+Mt.duration}function Re(){var Ke=arguments.length>0&&arguments[0]!==void 0&&arguments[0];ie&&H&&H.getElement()?(Ke&&me&&dt(at()),H.play()):ge=!0}function pe(){ie&&H&&H.pause()}function Ne(Ke){var Mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(ie&&H&&H.getElement()){var sr=isNaN(Le)?H.getTime():Le;Ke!==sr&&((we=fn===!0)||(Le=Ke),P.info("Requesting seek to time: "+Ke+(we?" (internal)":"")),me&&Tn&&dt(Ke),H.setCurrentTime(Ke,Mt))}}function Ye(){if(ie&&H&&me){var Ke=B&&B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Mt=ee.getCurrentDVRInfo(Ke);return Mt&&Mt.range?Mt.range.end:0}}function dt(Ke){var Mt=new Date(re.getClientReferenceTime()),fn=J.getRegularPeriods()[0],Tn=re.calcPresentationTimeFromWallTime(Mt,fn);Se=Tn-Ke}function at(){return ie&&H?H.getTime():null}function Je(){return ie&&H?H.isPaused():null}function ht(){return ie&&H?H.isSeeking():null}function Bt(){return ie&&H?H.isStalled():null}function Gt(){return ie&&H?H.getPlaybackRate():null}function kt(){return ie&&H?H.getEnded():null}function Ft(){return me}function An(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!Je()&&me&&H.getReadyState()!==0&&!ht()&&!Z){Ke||(Ke=B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO);var Mt=at(),fn=nt(Mt,Ke),Tn=!isNaN(fn)&&fn!==Mt;Tn&&!ht()&&(Bt()||je||H.getReadyState()===1)&&(P.debug("UpdateCurrentTime: Seek to actual time: ".concat(fn," from currentTime: ").concat(Mt)),Ne(fn,!1,!1))}}function nt(Ke,Mt){var fn=ee.getCurrentDVRInfo(Mt),Tn=fn?fn.range:null;return Tn?Ke>Tn.end?Math.max(Tn.end-Se,Tn.start):Ke>0&&Ke+.25<Tn.start&&Math.abs(Ke-Tn.start)<31536e4?_e?Math.max(Tn.end-Se,Tn.start):Tn.start:Ke:NaN}function vt(){ce===null&&(ce=setInterval(function(){(function(){if(Q.trigger(T.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:me,time:new Date}),Ft()){var Ke=Date.now();(isNaN(De)||Ke>De+ae.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(B.addDVRMetric(),Je()?function(){var Mt=Date.now();(!qe||Mt>qe+500)&&(qe=Mt,Zt())}():An(),De=Ke)}})()},ae.get().streaming.wallclockTimeUpdateInterval))}function Wt(){clearInterval(ce),ce=null}function Nt(Ke){var Mt=J.convertRepresentationToRepresentationInfo(Ke.currentRepresentation),fn=Mt?Mt.mediaInfo.streamInfo:null;fn!==null&&ie.id===fn.id&&(ie=fn)}function en(){Q.trigger(T.Z.CAN_PLAY)}function Jt(){Q.trigger(T.Z.CAN_PLAY_THROUGH)}function Yt(Ke){Ke.streamId===B.getActiveStreamInfo().id&&(je=Ke.state===D.Z.BUFFER_EMPTY,ae.get().streaming.buffer.setStallState&&H.setStallState(Ke.mediaType,Ke.state===D.Z.BUFFER_EMPTY))}function Dn(){P.info("Native video element event: play"),An(),vt(),Q.trigger(T.Z.PLAYBACK_STARTED,{startTime:at()})}function Nn(){P.info("Native video element event: waiting"),Q.trigger(T.Z.PLAYBACK_WAITING,{playingTime:at()})}function rr(){P.info("Native video element event: playing"),we=!1,Q.trigger(T.Z.PLAYBACK_PLAYING,{playingTime:at()})}function ir(){P.info("Native video element event: pause"),Q.trigger(T.Z.PLAYBACK_PAUSED,{ended:kt()})}function It(){if(!we){var Ke=at();isNaN(Le)||Le===Ke||(Ke=Le),Le=NaN,P.info("Seeking to: "+Ke),vt(),Q.trigger(T.Z.PLAYBACK_SEEKING,{seekTime:Ke,streamId:ie.id})}}function $t(){P.info("Native video element event: seeked"),we=!1,Q.trigger(T.Z.PLAYBACK_SEEKED)}function Zt(){ie&&Q.trigger(T.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:be(),time:at(),streamId:ie.id})}function un(){Q.trigger(T.Z.PLAYBACK_PROGRESS,{streamId:ie.id})}function vn(){var Ke=Gt();P.info("Native video element event: ratechange: ",Ke),Q.trigger(T.Z.PLAYBACK_RATE_CHANGED,{playbackRate:Ke})}function Pn(){P.info("Native video element event: loadedmetadata"),Q.trigger(T.Z.PLAYBACK_METADATA_LOADED),vt()}function xn(){P.info("Native video element event: loadeddata"),Q.trigger(T.Z.PLAYBACK_LOADED_DATA)}function Fn(){P.info("Native video element event: ended"),pe(),Wt();var Ke=B?B.getActiveStreamInfo():null;Ke&&Q.trigger(T.Z.PLAYBACK_ENDED,{isLast:Ke.isLast})}function Gn(){Q.trigger(T.Z.PLAYBACK_VOLUME_CHANGED)}function bt(Ke){if(ce&&Ke.isLast){P.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Mt=Ke.seekTime?Ke.seekTime:ke();H.setCurrentTime(Mt),pe(),Wt()}}function Sn(Ke){var Mt=Ke.target||Ke.srcElement;Q.trigger(T.Z.PLAYBACK_ERROR,{error:Mt.error})}function En(){me=!1}function Ot(Ke){if(Ke.stream===!1&&_e&&!isNaN(Ke.request.duration)){var Mt=1.2*Ke.request.duration;Mt>Se&&(P.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Mt.toFixed(2)),Se=Mt,Ee=Mt)}}function On(Ke){Q.trigger(T.Z.PLAYBACK_STALLED,{e:Ke})}function st(Ke){var Mt;(Mt=Ke.mediaInfo)&&Mt.supplementalProperties&&Mt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Mt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(P.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),_e=!0)}function tt(Ke){var Mt=B.getActiveStreamInfo();Ke&&Mt&&Ke.currentRepresentation&&Ke.streamId&&Ke.streamId===Mt.id&&Ke.mediaType&&(Ke.mediaType===y.Z.VIDEO||Ke.mediaType===y.Z.AUDIO)&&(ze=Ke.currentRepresentation.availabilityTimeComplete,(_e=!ze)&&!ue&&(ue=!0))}function qt(){Z=!0}function Ve(){Z=!1}return L={initialize:function(Ke,Mt){ie=Ke,Mt!==!0&&(H.addEventListener("canplay",en),H.addEventListener("canplaythrough",Jt),H.addEventListener("play",Dn),H.addEventListener("waiting",Nn),H.addEventListener("playing",rr),H.addEventListener("pause",ir),H.addEventListener("error",Sn),H.addEventListener("seeking",It),H.addEventListener("seeked",$t),H.addEventListener("timeupdate",Zt),H.addEventListener("progress",un),H.addEventListener("ratechange",vn),H.addEventListener("loadedmetadata",Pn),H.addEventListener("loadeddata",xn),H.addEventListener("stalled",On),H.addEventListener("ended",Fn),H.addEventListener("volumechange",Gn),me=ie.manifestInfo.isDynamic,je=!1,we=!1,Q.on(T.Z.DATA_UPDATE_COMPLETED,Nt,L),Q.on(T.Z.LOADING_PROGRESS,Ot,L),Q.on(T.Z.MANIFEST_UPDATED,qt,L),Q.on(T.Z.STREAMS_COMPOSED,Ve,L),Q.on(_.Z.PLAYBACK_ENDED,bt,L,{priority:m.Z.EVENT_PRIORITY_HIGH}),Q.on(_.Z.STREAM_INITIALIZING,st,L),Q.on(_.Z.REPRESENTATION_SWITCH,tt,L),Q.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Yt,L),Q.on(_.Z.DYNAMIC_TO_STATIC,En,L),ge&&(ge=!1,Re()))},setConfig:function(Ke){Ke&&(Ke.streamController&&(B=Ke.streamController),Ke.serviceDescriptionController&&(V=Ke.serviceDescriptionController),Ke.dashMetrics&&(ee=Ke.dashMetrics),Ke.adapter&&(J=Ke.adapter),Ke.videoModel&&(H=Ke.videoModel),Ke.timelineConverter&&(re=Ke.timelineConverter),Ke.settings&&(ae=Ke.settings))},getTimeToStreamEnd:be,getBufferLevel:function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Mt=null;return B.getActiveStreamProcessors().forEach(function(fn){if(!Ke||Ke.length===0||Ke.indexOf(fn.getType())===-1){var Tn=fn.getBufferLevel();Mt=Mt===null?Tn:Math.min(Mt,Tn)}}),Mt},getPlaybackStalled:function(){return je},getTime:at,getLowLatencyModeEnabled:function(){return _e},getInitialCatchupModeActivated:function(){return ue},getIsManifestUpdateInProgress:function(){return Z},getPlaybackRate:Gt,getPlayedRanges:function(){return ie&&H?H.getPlayedRanges():null},getEnded:kt,getIsDynamic:Ft,getStreamController:function(){return B},computeAndSetLiveDelay:function(Ke,Mt){var fn,Tn,sr,Zr=!isNaN(Ke)&&isFinite(Ke)?Ke:NaN,Ai=J.getSuggestedPresentationDelay(),zr=V.getServiceDescriptionSettings();return fn=isNaN(ae.get().streaming.delay.liveDelay)?ae.get().streaming.delay.liveDelayFragmentCount===null||isNaN(ae.get().streaming.delay.liveDelayFragmentCount)||isNaN(Zr)?zr&&!isNaN(zr.liveDelay)&&zr.liveDelay>0?zr.liveDelay:ae.get().streaming.delay.useSuggestedPresentationDelay===!0&&Ai!==null&&!isNaN(Ai)&&Ai>0?Ai:isNaN(Zr)?Mt&&!isNaN(Mt.minBufferTime)?4*Mt.minBufferTime:4*ie.manifestInfo.minBufferTime:4*Zr:Zr*ae.get().streaming.delay.liveDelayFragmentCount:ae.get().streaming.delay.liveDelay,(sr=J.getAvailabilityStartTime())!==null&&(Be=sr),Tn=Mt&&Mt.dvrWindowSize>0?Math.min(fn,Mt.dvrWindowSize):fn,Se=Tn,Ee=Tn,Tn},getLiveDelay:function(){return Se},getOriginalLiveDelay:function(){return Ee},getCurrentLiveLatency:function(){if(!me||isNaN(Be))return NaN;var Ke=at();if(isNaN(Ke)||Ke===0)return 0;var Mt=new Date().getTime()+1e3*re.getClientTimeOffset();return Math.max(((Mt-Be-1e3*Ke)/1e3).toFixed(3),0)},play:Re,isPaused:Je,isStalled:Bt,pause:pe,isSeeking:ht,getStreamEndTime:ke,seek:Ne,seekToOriginalLive:function(){var Ke=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=Ye();if(Tn!==0){var sr=Tn-(Se=Ee);Ne(sr,Ke,Mt,fn)}},seekToCurrentLive:function(){var Ke=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=Ye();if(Tn!==0){var sr=Tn-Se;Ne(sr,Ke,Mt,fn)}},reset:Me,updateCurrentTime:An,getAvailabilityStartTime:function(){return Be}},P=(0,x.Z)(se).getInstance().getLogger(L),Me(),L}I.__dashjs_factory_name="PlaybackController";var R=U.Z.getSingletonFactory(I),j=w(3186),z="loading",W="executed",X="failed";function le(L){var P,B,V,ee,J=(L=L||{}).eventBus,H=L.events,re=L.dashMetrics,ce=L.fragmentLoader,Se=L.debug,Ee=L.streamInfo,ie=L.type;function me(Z){var ue;return!!Z&&(ue=!1,V.some(function(ae){if(se=Z,Q=ae,!isNaN(se.index)&&se.startTime===Q.startTime&&se.adaptationIndex===Q.adaptationIndex&&se.type===Q.type||function(Me,be){return isNaN(Me.index)&&isNaN(be.index)&&Me.quality===be.quality}(Z,ae)||function(Me,be){return Me.action===j.Z.ACTION_COMPLETE&&Me.action===be.action}(Z,ae))return ue=!0;var se,Q}),ue)}function ge(Z){return isNaN(Z.duration)?.25:Math.min(Z.duration/8,.5)}function qe(Z){V=V.filter(function(ue){var ae=ge(ue);return isNaN(ue.startTime)||Z!==void 0&&ue.startTime>=Z-ae})}function De(Z,ue){ue<=Z+.5||(V=V.filter(function(ae){var se=ge(ae);return isNaN(ae.startTime)||ae.startTime>=ue-se||isNaN(ae.duration)||ae.startTime+ae.duration<=Z+se}))}function Be(Z,ue,ae){for(var se=Z.length-1;se>=0;se--){var Q=Z[se],Me=Q.startTime,be=Me+Q.duration;if(ae=isNaN(ae)?ge(Q):ae,!isNaN(Me)&&!isNaN(be)&&ue+ae>=Me&&ue-ae<be||isNaN(Me)&&isNaN(ue))return Q}return null}function ze(Z,ue){re.addSchedulingInfo(Z,ue),re.addRequestsQueue(Z.mediaType,ee,V)}function _e(Z){Z.sender===ce&&(ee.splice(ee.indexOf(Z.request),1),Z.response&&!Z.error&&V.push(Z.request),ze(Z.request,Z.error?X:W),J.trigger(H.FRAGMENT_LOADING_COMPLETED,{request:Z.request,response:Z.response,error:Z.error,sender:this},{streamId:Ee.id,mediaType:ie}))}function Le(Z){Z.sender===ce&&J.trigger(H.FRAGMENT_LOADING_PROGRESS,{request:Z.request,response:Z.response,error:Z.error,sender:this},{streamId:Ee.id,mediaType:ie})}function we(Z){Z.sender===ce&&J.trigger(H.FRAGMENT_LOADING_ABANDONED,{request:Z.request},{streamId:Ee.id,mediaType:ie})}function je(){V=[],ee=[]}return P={getStreamId:function(){return Ee.id},getType:function(){return ie},getRequests:function(Z){var ue=Z?Z.state instanceof Array?Z.state:[Z.state]:[],ae=[];return ue.forEach(function(se){var Q=function(Me){var be;switch(Me){case z:be=ee;break;case W:be=V;break;default:be=[]}return be}(se);ae=ae.concat(function(Me,be){return be.hasOwnProperty("time")?[Be(Me,be.time,be.threshold)]:Me.filter(function(ke){for(var Re in be)if(Re!=="state"&&be.hasOwnProperty(Re)&&ke[Re]!=be[Re])return!1;return!0})}(Q,Z))}),ae},isFragmentLoaded:me,isFragmentLoadedOrPending:function(Z){var ue,ae=!1,se=0;if(!(ae=me(Z)))for(se=0;se<ee.length;se++)ue=ee[se],Z.url===ue.url&&Z.startTime===ue.startTime&&(ae=!0);return ae},removeExecutedRequestsBeforeTime:qe,removeExecutedRequestsAfterTime:function(Z){V=V.filter(function(ue){return isNaN(ue.startTime)||Z!==void 0&&ue.startTime<Z})},syncExecutedRequestsWithBufferedRange:function(Z,ue){if(Z&&Z.length!==0){for(var ae=0,se=0,Q=Z.length;se<Q;se++)De(ae,Z.start(se)),ae=Z.end(se);ue>0&&De(ae,ue)}else qe()},abortRequests:function(){B.debug("abort requests"),ce.abort(),ee=[]},executeRequest:function(Z){Z.action===j.Z.ACTION_DOWNLOAD?(ze(Z,z),ee.push(Z),function(ue){J.trigger(H.FRAGMENT_LOADING_STARTED,{request:ue},{streamId:Ee.id,mediaType:ie}),ce.load(ue)}(Z)):B.warn("Unknown request action.")},reset:function(){J.off(H.LOADING_COMPLETED,_e,this),J.off(H.LOADING_DATA_PROGRESS,Le,this),J.off(H.LOADING_ABANDONED,we,this),ce&&ce.reset(),je()},resetInitialSettings:je,addExecutedRequest:function(Z){V.push(Z)}},B=Se.getLogger(P),je(),J.on(H.LOADING_COMPLETED,_e,P),J.on(H.LOADING_DATA_PROGRESS,Le,P),J.on(H.LOADING_ABANDONED,we,P),P}le.__dashjs_factory_name="FragmentModel";var N=U.Z.getClassFactory(le);N.FRAGMENT_MODEL_LOADING=z,N.FRAGMENT_MODEL_EXECUTED=W,N.FRAGMENT_MODEL_CANCELED="canceled",N.FRAGMENT_MODEL_FAILED=X,U.Z.updateClassFactory(le.__dashjs_factory_name,N);var $=N,fe=w(5459);function oe(L){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},oe(L)}function he(L,P){return he=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},he(L,P)}function Ie(L,P){return!P||oe(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Xe(L){return Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Xe(L)}var Ae=new(function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&he(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Xe(P);if(B){var re=Xe(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Ie(this,J)});function ee(){var J;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,J.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,J.SEGMENT_BASE_LOADER_ERROR_CODE=15,J.TIME_SYNC_FAILED_ERROR_CODE=16,J.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,J.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,J.APPEND_ERROR_CODE=20,J.REMOVE_ERROR_CODE=21,J.DATA_UPDATE_FAILED_ERROR_CODE=22,J.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,J.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,J.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,J.DOWNLOAD_ERROR_ID_SIDX_CODE=26,J.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,J.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,J.DOWNLOAD_ERROR_ID_XLINK_CODE=29,J.MANIFEST_ERROR_ID_PARSE_CODE=31,J.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,J.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,J.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,J.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,J.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",J.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",J.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",J.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",J.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",J.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",J.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",J.APPEND_ERROR_MESSAGE="chunk is not defined",J.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",J.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",J.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",J.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",J.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",J.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",J}return ee}(w(2230).Z)),Ze=w(1264),it=w(7855);function ut(L){var P,B,V,ee,J,H,re=this.context,ce=(0,Ze.Z)(re).getInstance(),Se=L.textController,Ee=L.eventBus,ie=[],me=[],ge=!1,qe=L.mediaSource,De=null;function Be(Q){return new Promise(function(Me){se(function(){ee.changeType&&ee.changeType(Q),Me()})})}function ze(Q){return ee=Se.getTextSourceBuffer(Q),Promise.resolve()}function _e(){if(typeof ee.addEventListener=="function")try{ee.addEventListener("updateend",ue,!1),ee.addEventListener("error",ae,!1),ee.addEventListener("abort",ae,!1)}catch(Q){H=setInterval(ue,50)}else H=setInterval(ue,50)}function Le(Q){return new Promise(function(Me){ee&&ce.get().streaming.buffer.useAppendWindow?se(function(){try{if(!ee)return void Me();var be=qe.duration,ke=0;Q&&!isNaN(Q.start)&&!isNaN(Q.duration)&&isFinite(Q.duration)&&(be=Q.start+Q.duration),Q&&!isNaN(Q.start)&&(ke=Q.start),ee.appendWindowEnd===be&&ee.appendWindowStart===ke||(ee.appendWindowStart=0,ee.appendWindowEnd=be+.01,ee.appendWindowStart=Math.max(ke-.1,0),V.debug("Updated append window for ".concat(J.type,". Set start to ").concat(ee.appendWindowStart," and end to ").concat(ee.appendWindowEnd))),Me()}catch(Re){V.warn("Failed to set append window"),Me()}}):Me()})}function we(Q){return new Promise(function(Me){ee?se(function(){try{ee.timestampOffset===Q||isNaN(Q)||(ee.timestampOffset=Q,V.debug("Set MSE timestamp offset to ".concat(Q))),Me()}catch(be){Me()}}):Me()})}function je(){if(!ge&&me.length>0){ge=!0;var Q=me[0];me.splice(0,1);var Me=function(){ge=!1,me.length>0&&je.call(this),Q&&Q.data&&Q.data.segmentType&&Q.data.segmentType!==it.w.INIT_SEGMENT_TYPE&&delete Q.data.bytes,Q.promise.resolve({chunk:Q.data})};try{De=Q.request,Q.data.bytes.byteLength===0?Me.call(this):(ee.appendBuffer?ee.appendBuffer(Q.data.bytes):ee.append(Q.data.bytes,Q.data),se(Me.bind(this)))}catch(be){V.fatal('SourceBuffer append failed "'+be+'"'),me.length>0?je():ge=!1,delete Q.data.bytes,Q.promise.reject({chunk:Q.data,error:new fe.Z(be.code,be.message)})}}}function Z(){ie.length>0&&(ee.updating||(ie.shift()(),Z()))}function ue(){ee.updating||Z()}function ae(Q){var Me,be,ke=Q.target||{};Me=T.Z.SOURCE_BUFFER_ERROR,be={error:ke,lastRequestAppended:De},Ee.trigger(Me,be,{streamId:J.streamInfo.id,mediaType:B})}function se(Q){ie.push(Q),ee.updating||Z()}return P={getType:function(){return B},getAllBufferRanges:function(){try{return ee.buffered}catch(Q){return V.error("getAllBufferRanges exception: "+Q.message),null}},getBuffer:function(){return ee},append:function(Q){var Me=this,be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(ke,Re){Q?(me.push({data:Q,promise:{resolve:ke,reject:Re},request:be}),se(je.bind(Me))):Re({chunk:Q,error:new fe.Z(Ae.APPEND_ERROR_CODE,Ae.APPEND_ERROR_MESSAGE)})})},remove:function(Q){return new Promise(function(Me,be){var ke=Q.start,Re=Q.end;ke>=0&&Re>ke?se(function(){try{ee.remove(ke,Re),se(function(){Me({from:ke,to:Re,unintended:!1}),Q.resolve&&Q.resolve()})}catch(pe){be({from:ke,to:Re,unintended:!1,error:new fe.Z(Ae.REMOVE_ERROR_CODE,Ae.REMOVE_ERROR_MESSAGE)}),Q.reject&&Q.reject(pe)}}):Me()})},abort:function(){return new Promise(function(Q){try{me=[],qe.readyState==="open"?se(function(){try{ee&&ee.abort(),Q()}catch(Me){Q()}}):(ee&&ee.setTextTrack&&qe.readyState==="ended"&&ee.abort(),Q())}catch(Me){Q()}})},reset:function(){if(ee){try{ie=[],function(){try{typeof ee.removeEventListener=="function"&&(ee.removeEventListener("updateend",ue,!1),ee.removeEventListener("error",ae,!1),ee.removeEventListener("abort",ae,!1)),clearInterval(H)}catch(Q){V.error(Q)}}(),ge=!1,me=[],ee.getClassName&&ee.getClassName()==="TextSourceBuffer"||(V.debug("Removing sourcebuffer from media source"),qe.removeSourceBuffer(ee))}catch(Q){}ee=null}De=null},updateTimestampOffset:we,initializeForStreamSwitch:function(Q,Me,be){B=(J=Q).type;var ke=J.codec;(function(pe){ee=pe.getBuffer()})(be),_e();var Re=[];return Re.push(new Promise(function(pe){se(function(){var Ne=ee.appendWindowStart,Ye=ee.appendWindowEnd;ee&&(ee.abort(),ee.appendWindowStart=Ne,ee.appendWindowEnd=Ye),pe()})})),Re.push(Le(J.streamInfo)),ce.get().streaming.buffer.useChangeTypeForTrackSwitch&&Re.push(Be(ke)),Me&&Me.MSETimeOffset!==void 0&&Re.push(we(Me.MSETimeOffset)),Promise.all(Re)},initializeForFirstUse:function(Q,Me,be){B=(J=Me).type;var ke=J.codec;try{if(ke.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return ze(Q);ee=qe.addSourceBuffer(ke),_e();var Re=[];return Re.push(Le(J.streamInfo)),be&&be.MSETimeOffset!==void 0&&Re.push(we(be.MSETimeOffset)),Promise.all(Re)}catch(pe){return J.type==y.Z.TEXT&&!J.isFragmented||ke.indexOf('codecs="stpp')!==-1||ke.indexOf('codecs="vtt')!==-1||ke.indexOf("text/vtt")!==-1?ze(Q):Promise.reject(pe)}},updateAppendWindow:Le,changeType:Be},V=(0,x.Z)(re).getInstance().getLogger(P),P}ut.__dashjs_factory_name="SourceBufferSink";var $e=U.Z.getClassFactory(ut);function lt(L){var P,B,V,ee=this.context,J=[],H=L;function re(ce,Se){return J=J.filter(function(Ee){return!((isNaN(Se)||Ee.start<Se)&&(isNaN(ce)||Ee.end>ce))}),Promise.resolve()}return P={getAllBufferRanges:function(){for(var ce=[],Se=0;Se<J.length;Se++){var Ee=J[Se];ce.length===0||Ee.start>ce[ce.length-1].end?ce.push({start:Ee.start,end:Ee.end}):ce[ce.length-1].end=Ee.end}var ie={start:function(me){return ce[me].start},end:function(me){return ce[me].end}};return Object.defineProperty(ie,"length",{get:function(){return ce.length}}),ie},append:function(ce){return ce.segmentType!=="InitializationSegment"?(J.push(ce),J.sort(function(Se,Ee){return Se.start-Ee.start}),V=null):V=ce,B.debug("PreBufferSink appended chunk s: "+ce.start+"; e: "+ce.end),H&&H({chunk:ce}),Promise.resolve()},remove:re,abort:function(){return Promise.resolve()},discharge:function(ce,Se){var Ee=function(ie,me){return J.filter(function(ge){return(isNaN(me)||ge.start<me)&&(isNaN(ie)||ge.end>ie)})}(ce,Se);return V&&(Ee.push(V),V=null),re(ce,Se),Ee},reset:function(){J=[],V=null,H=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(ce){ce()},getBuffer:function(){return this}},B=(0,x.Z)(ee).getInstance().getLogger(P),P}lt.__dashjs_factory_name="PreBufferSink";var At=U.Z.getClassFactory(lt);function Oe(){var L={};return{save:function(P){var B=P.streamId,V=P.representationId;L[B]=L[B]||{},L[B][V]=P},extract:function(P,B){return L&&L[P]&&L[P][B]?L[P][B]:null},reset:function(){L={}}}}Oe.__dashjs_factory_name="InitCache";var Qe=U.Z.getSingletonFactory(Oe),ct=.01,Qt="BufferController";function Kt(L){L=L||{};var P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z=this.context,ue=(0,m.Z)(Z).getInstance(),ae=L.errHandler,se=L.fragmentModel,Q=L.representationController,Me=L.adapter,be=L.textController,ke=L.abrController,Re=L.playbackController,pe=L.streamInfo,Ne=L.type,Ye=L.settings;function dt(tt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(Ve,Ke){H=tt,Se&&qt&&typeof Se.discharge=="function"?(Ee=Se,Je(qt).then(function(){Ve()}).catch(function(Mt){Ke(Mt)})):Ve()})}function at(tt){return Me.convertRepresentationToRepresentationInfo(Q.getRepresentationForQuality(tt))}function Je(tt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(Ve,Ke){_e&&tt?H?(ie=!1,Bt(tt,qt).then(function(Mt){Ve(Mt)}).catch(function(Mt){Ke(Mt)})):(ie=!0,ht().then(function(Mt){Ve(Mt)}).catch(function(Mt){Ke(Mt)})):Ve(null)})}function ht(){var tt=this;return new Promise(function(qt,Ve){var Ke=ke.getQualityFor(Ne,pe.id);Se=At(Z).create(nt.bind(tt)),Pn(at(Ke)).then(function(){qt(Se)}).catch(function(){Ve()})})}function Bt(tt,qt){return new Promise(function(Ve,Ke){var Mt=ke.getQualityFor(Ne,pe.id);Se=$e(Z).create({mediaSource:H,textController:be,eventBus:ue}),function(fn,Tn,sr){var Zr=at(sr);return Tn&&Tn[Ne]&&(Ne===y.Z.VIDEO||Ne===y.Z.AUDIO)?Se.initializeForStreamSwitch(fn,Zr,Tn[Ne]):Se.initializeForFirstUse(pe,fn,Zr)}(tt,qt,Mt).then(function(){return Pn(at(Mt))}).then(function(){Ve(Se)}).catch(function(fn){B.fatal("Caught error on create SourceBuffer: "+fn),ae.error(new fe.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+Ne)),Ke(fn)})})}function Gt(tt){Ye.get().streaming.cacheInitSegments&&(B.info("Init fragment finished loading saving to",Ne+"'s init cache"),_e.save(tt.chunk)),B.debug("Append Init fragment",Ne," with representationId:",tt.chunk.representationId," and quality:",tt.chunk.quality,", data size:",tt.chunk.bytes.byteLength),Ft(tt.chunk)}function kt(tt){Ft(tt.chunk,tt.request)}function Ft(tt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Se&&(Se.append(tt,qt).then(function(Ve){nt(Ve)}).catch(function(Ve){nt(Ve)}),tt.mediaInfo.type===y.Z.VIDEO&&On(T.Z.VIDEO_CHUNK_RECEIVED,{chunk:tt}))}function An(tt){if(tt&&tt.length>0)for(var qt=0,Ve=tt.length;qt<Ve;qt++)B.debug("Buffered range: "+tt.start(qt)+" - "+tt.end(qt)+", currentTime = ",Re.getTime())}function nt(tt){if(tt.error)return tt.error.code===22&&function(){if(ze=!0,J=.8*Sn(),B.warn("Quota exceeded, Critical Buffer: "+J),J>0){var Ke=Math.max(.2*J,1),Mt=J-Ke,fn=Math.min(Ye.get().streaming.buffer.bufferTimeAtTopQuality,.9*Mt),Tn=Math.min(Ye.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Mt),sr={streaming:{buffer:{bufferToKeep:parseFloat(Ke.toFixed(5)),bufferTimeAtTopQuality:parseFloat(fn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Tn.toFixed(5))}}};Ye.update(sr)}}(),void(tt.error.code!==22&&Ot()||(B.warn("Clearing playback buffer to overcome quota exceed situation"),On(T.Z.QUOTA_EXCEEDED,{criticalBufferLevel:J,quotaExceededTime:tt.chunk.start}),Zt($t())));if(Se&&(Dn(),ze=!1,(qe=tt.chunk)&&qe.endFragment)){qe&&!isNaN(qe.index)&&(re=Math.max(qe.index,re),Nn());var qt=Se.getAllBufferRanges();qe.segmentType===it.w.MEDIA_SEGMENT_TYPE&&(An(qt),Nt(),function(){if(!isNaN(je)&&!ie)if(Ne===y.Z.AUDIO||Ne===y.Z.VIDEO){var Ke=Re.getTime(),Mt=Yt(Ke,0),fn=Yt(je,0);if(Mt&&fn&&Mt.start===fn.start)je=NaN;else{var Tn=Q.getCurrentRepresentation().segmentDuration,sr=Yt(je,Tn);sr&&(Ye.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Ke-je)>Tn?je<=sr.end&&Re.seek(Math.max(je,sr.start),!1,!0):Ke<sr.start&&Re.seek(sr.start,!1,!0))}}else je=NaN}());var Ve=!1;me&&(me.indexOf(qe)>0&&(Ve=!0),me=null),qe&&!Ve&&On(T.Z.BYTES_APPENDED_END_FRAGMENT,{quality:qe.quality,startTime:qe.start,index:qe.index,bufferedRanges:qt,segmentType:qe.segmentType,mediaType:Ne})}}function vt(){return new Promise(function(tt,qt){var Ve=Wt();if(!Ve||Ve.length===0)return Nt(),void tt();Zt(Ve).then(function(){tt()}).catch(function(Ke){qt(Ke)})})}function Wt(tt){var qt=[],Ve=Se.getAllBufferRanges();if(!Ve||Ve.length===0)return qt;if(!tt&&tt!==0||isNaN(tt))qt.push({start:Ve.start(0),end:Ve.end(Ve.length-1)+.5});else{var Ke=function(fn,Tn){var sr=Ye.get().streaming.buffer.bufferToKeep,Zr=Tn.start(0);if(fn-Zr>sr){var Ai=Math.max(0,fn-sr),zr=se.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:ct})[0];if(zr&&(Ai=Math.min(zr.startTime,Ai)),Ai>0)return{start:Zr,end:Ai}}return null}(tt,Ve),Mt=function(fn,Tn){var sr=Tn.end(Tn.length-1)+.5,Zr=En(fn),Ai=pe.manifestInfo.duration>=Ye.get().streaming.buffer.longFormContentDurationThreshold?Ye.get().streaming.buffer.bufferTimeAtTopQualityLongForm:Ye.get().streaming.buffer.bufferTimeAtTopQuality,zr=isNaN(Zr)?fn:Math.min(Zr,fn+Ai);if(zr>=Tn.end(Tn.length-1))return null;var io=se.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:ct})[0];if(io&&(zr=Math.max(io.startTime+io.duration,zr)),Ye.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Zi=0;Zi<Tn.length;Zi++)if(Tn.start(Zi)<=fn&&fn<=Tn.end(Zi)&&Tn.start(Zi)<=zr&&zr<=Tn.end(Zi)){var Gs=zr;zr=Zi+1<Tn.length?Tn.start(Zi+1):Tn.end(Zi)+1,B.debug("Buffered range ["+Tn.start(Zi)+", "+Tn.end(Zi)+"] overlaps with targetTime "+fn+" and range to be pruned ["+Gs+", "+sr+"], using ["+zr+", "+sr+"] instead"+(zr<sr?"":" (no actual pruning)"));break}}return zr<Tn.end(Tn.length-1)?{start:zr,end:sr}:null}(tt,Ve);Ke&&qt.push(Ke),Mt&&qt.push(Mt)}return qt}function Nt(){(!we||Ne===y.Z.TEXT&&be.isTextEnabled())&&Dn()}function en(){rr()}function Jt(){rr(),je=NaN}function Yt(tt,qt){if(!Se)return null;var Ve,Ke,Mt=Se.getAllBufferRanges(),fn=0,Tn=0,sr=null,Zr=null,Ai=0,zr=isNaN(qt)?.15:qt;if(Mt!=null){for(Ke=0,Ve=Mt.length;Ke<Ve;Ke++)if(fn=Mt.start(Ke),Tn=Mt.end(Ke),sr===null)Ai=Math.abs(fn-tt),(tt>=fn&&tt<Tn||Ai<=zr)&&(sr=fn,Zr=Tn);else{if(!((Ai=fn-Zr)<=zr))break;Zr=Tn}if(sr!==null)return{start:sr,end:Zr}}return null}function Dn(){if(Re){var tt=Re.getTime()||0;ie&&(tt=isNaN(je)?0:je);var qt=Ye.get().streaming.gaps.jumpGaps&&!isNaN(Ye.get().streaming.gaps.smallGapLimit)?Ye.get().streaming.gaps.smallGapLimit:NaN;ee=Math.max(function(Ve,Ke){var Mt;return Ye.get().streaming.gaps.jumpGaps&&(Ke=Ye.get().streaming.gaps.smallGapLimit),(Mt=Yt(Ve,Ke))===null?0:Mt.end-Ve}(tt,qt),0),On(T.Z.BUFFER_LEVEL_UPDATED,{mediaType:Ne,bufferLevel:ee}),rr()}}function Nn(){var tt=re>=ce-1,qt=Re.getTimeToStreamEnd(pe)-ee<1e-5;!tt&&!qt||V||(bt(!0),B.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(pe.id," and type ").concat(Ne)))}function rr(){Ne!==y.Z.AUDIO&&Ne!==y.Z.VIDEO||((!Re.getLowLatencyModeEnabled()&&ee<Ye.get().streaming.buffer.stallThreshold||ee===0)&&!V?ir(D.Z.BUFFER_EMPTY):(V||ee>=Ye.get().streaming.buffer.stallThreshold||Re.getLowLatencyModeEnabled()&&ee>0)&&ir(D.Z.BUFFER_LOADED))}function ir(tt){ge===tt||tt===D.Z.BUFFER_EMPTY&&Re.getTime()===0||Ne===y.Z.TEXT&&!be.isTextEnabled()||(ge=tt,On(T.Z.BUFFER_LEVEL_STATE_CHANGED,{state:tt}),On(tt===D.Z.BUFFER_LOADED?T.Z.BUFFER_LOADED:T.Z.BUFFER_EMPTY),B.debug(tt===D.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function It(){Se&&Ne!==y.Z.TEXT&&(V||Zt($t()))}function $t(){var tt=[],qt=Se.getAllBufferRanges();if(!qt||qt.length===0)return tt;var Ve=Re.getTime(),Ke=Math.max(0,Ve-Ye.get().streaming.buffer.bufferToKeep),Mt=se.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:Ve,threshold:ct})[0];if(Mt)Ke=Math.min(Mt.startTime,Ke);else if(Ve===0&&Re.getIsDynamic())return[];if(qt.start(0)<=Ke){for(var fn={start:0,end:Ke},Tn=0;Tn<qt.length&&qt.end(Tn)<=Ke;Tn++)fn.end=qt.end(Tn);fn.start<fn.end&&tt.push(fn)}return tt}function Zt(tt){return new Promise(function(qt,Ve){if(tt&&Se&&tt.length!==0){var Ke=[];tt.forEach(function(Mt){Ke.push(function(fn){return new Promise(function(Tn,sr){fn.resolve=Tn,fn.reject=sr,Le.push(fn)})}(Mt))}),Be||un(),Promise.all(Ke).then(function(){qt()}).catch(function(Mt){Ve(Mt)})}else qt()})}function un(){try{if(Le.length===0||!Se)return B.debug("Nothing to prune, halt pruning"),Le=[],void(Be=!1);var tt=Se.getBuffer();if(!tt||!tt.buffered||tt.buffered.length===0)return B.debug("SourceBuffer is empty (or does not exist), halt pruning"),Le=[],void(Be=!1);var qt=Le.shift();B.debug("".concat(Ne,": Removing buffer from: ").concat(qt.start," to ").concat(qt.end)),Be=!0,Re.getTime()<qt.end&&bt(!1),Se.remove(qt).then(function(Ve){vn(Ve)}).catch(function(Ve){vn(Ve)})}catch(Ve){Be=!1}}function vn(tt){B.debug("onRemoved buffer from:",tt.from,"to",tt.to),Se&&(An(Se.getAllBufferRanges()),Le.length===0&&(Be=!1,Dn()),tt.unintended&&(B.warn("Detected unintended removal from:",tt.from,"to",tt.to,"setting streamprocessor time to",tt.from),On(T.Z.SEEK_TARGET,{time:tt.from})),Be?un():(we?we=!1:Dn(),On(T.Z.BUFFER_CLEARED,{from:tt.from,to:tt.to,unintended:tt.unintended,hasEnoughSpaceToAppend:Ot(),quotaExceeded:ze})))}function Pn(tt){return new Promise(function(qt){tt&&tt.MSETimeOffset!==void 0&&Se&&Se.updateTimestampOffset?Se.updateTimestampOffset(tt.MSETimeOffset).then(function(){qt()}).catch(function(){qt()}):qt()})}function xn(){return Se&&!V?Se.updateAppendWindow(pe):Promise.resolve()}function Fn(){++De*(Ye.get().streaming.wallclockTimeUpdateInterval/1e3)>=Ye.get().streaming.buffer.bufferPruningInterval&&(De=0,It())}function Gn(){rr()}function bt(tt){(V=tt)?On(T.Z.BUFFERING_COMPLETED):ce=Number.POSITIVE_INFINITY}function Sn(){try{var tt,qt,Ve=Se.getAllBufferRanges(),Ke=0;if(!Ve)return Ke;for(qt=0,tt=Ve.length;qt<tt;qt++)Ke+=Ve.end(qt)-Ve.start(qt);return Ke}catch(Mt){return 0}}function En(tt){try{var qt=tt,Ve=Se.getAllBufferRanges();if(!Ve||Ve.length===0)return NaN;for(var Ke=0;qt===tt&&Ke<Ve.length;){var Mt=Ve.start(Ke),fn=Ve.end(Ke);qt>=Mt&&qt<=fn&&(qt=fn),Ke+=1}return qt===tt?NaN:qt}catch(Tn){}}function Ot(){var tt=Sn();return isNaN(tt)||tt<J}function On(tt,qt){var Ve=qt||{};ue.trigger(tt,Ve,{streamId:pe.id,mediaType:Ne})}function st(tt,qt){if(J=Number.POSITIVE_INFINITY,ge=void 0,ce=Number.POSITIVE_INFINITY,re=0,qe=null,V=!1,Be=!1,ze=!1,ee=0,De=0,Le=[],je=NaN,ie=!1,Se){var Ve=Se;Se=null,tt||qt||Ve.abort().then(function(){Ve.reset(qt),Ve=null})}we=!1}return P={initialize:function(tt){dt(tt),ue.on(T.Z.INIT_FRAGMENT_LOADED,Gt,P),ue.on(T.Z.MEDIA_FRAGMENT_LOADED,kt,P),ue.on(T.Z.WALLCLOCK_TIME_UPDATED,Fn,P),ue.on(_.Z.PLAYBACK_PLAYING,Jt,P),ue.on(_.Z.PLAYBACK_PROGRESS,Nt,P),ue.on(_.Z.PLAYBACK_TIME_UPDATED,Nt,P),ue.on(_.Z.PLAYBACK_RATE_CHANGED,Gn,P),ue.on(_.Z.PLAYBACK_STALLED,en,P)},getStreamId:function(){return pe.id},getType:function(){return Ne},getBufferControllerType:function(){return Qt},createBufferSink:Je,dischargePreBuffer:function(){if(Se&&Ee&&typeof Ee.discharge=="function"){var tt=Ee.getAllBufferRanges();if(tt.length>0){for(var qt="Beginning "+Ne+"PreBuffer discharge, adding buffer for:",Ve=0;Ve<tt.length;Ve++)qt+=" start: "+tt.start(Ve)+", end: "+tt.end(Ve)+";";B.debug(qt)}else B.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");me=[];for(var Ke=Ee.discharge(),Mt=null,fn=0;fn<Ke.length;fn++){var Tn=Ke[fn];if(Tn.segmentType!==it.w.INIT_SEGMENT_TYPE){var sr=_e.extract(Tn.streamId,Tn.representationId);sr&&Mt!==sr&&(me.push(sr),Se.append(sr),Mt=sr)}me.push(Tn),Se.append(Tn)}Ee.reset(),Ee=null}},getBuffer:function(){return Se},getBufferLevel:function(){return ee},getRangeAt:Yt,hasBufferAtTime:function(tt){try{var qt=Se.getAllBufferRanges();if(!qt||qt.length===0)return!1;for(var Ve=0;Ve<qt.length;){var Ke=qt.start(Ve),Mt=qt.end(Ve);if(tt>=Ke&&tt<=Mt)return!0;Ve+=1}return!1}catch(fn){return B.error(fn),!1}},pruneBuffer:It,setMediaSource:dt,getMediaSource:function(){return H},appendInitSegmentFromCache:function(tt){var qt=_e.extract(pe.id,tt);return!!qt&&(B.info("Append Init fragment",Ne," with representationId:",qt.representationId," and quality:",qt.quality,", data size:",qt.bytes.byteLength),Ft(qt),!0)},getIsBufferingCompleted:function(){return V},setIsBufferingCompleted:bt,getIsPruningInProgress:function(){return Be},reset:function(tt,qt){ue.off(T.Z.INIT_FRAGMENT_LOADED,Gt,this),ue.off(T.Z.MEDIA_FRAGMENT_LOADED,kt,this),ue.off(T.Z.WALLCLOCK_TIME_UPDATED,Fn,this),ue.off(_.Z.PLAYBACK_PLAYING,Jt,this),ue.off(_.Z.PLAYBACK_PROGRESS,Nt,this),ue.off(_.Z.PLAYBACK_TIME_UPDATED,Nt,this),ue.off(_.Z.PLAYBACK_RATE_CHANGED,Gn,this),ue.off(_.Z.PLAYBACK_STALLED,en,this),st(tt,qt)},prepareForPlaybackSeek:function(){return V&&bt(!1),Se.abort()},prepareForReplacementTrackSwitch:function(tt){return new Promise(function(qt,Ve){Se.abort().then(function(){return xn()}).then(function(){return Ye.get().streaming.buffer.useChangeTypeForTrackSwitch?Se.changeType(tt):Promise.resolve()}).then(function(){return vt()}).then(function(){bt(!1),qt()}).catch(function(Ke){Ve(Ke)})})},prepareForNonReplacementTrackSwitch:function(tt){return new Promise(function(qt,Ve){xn().then(function(){return Ye.get().streaming.buffer.useChangeTypeForTrackSwitch?Se.changeType(tt):Promise.resolve()}).then(function(){qt()}).catch(function(Ke){Ve(Ke)})})},prepareForForceReplacementQualitySwitch:function(tt){return new Promise(function(qt,Ve){Se.abort().then(function(){return xn()}).then(function(){return vt()}).then(function(){return Pn(tt)}).then(function(){bt(!1),qt()}).catch(function(Ke){Ve(Ke)})})},updateAppendWindow:xn,getAllRangesWithSafetyFactor:Wt,getContinuousBufferTimeForTargetTime:En,clearBuffers:Zt,pruneAllSafely:vt,updateBufferTimestampOffset:Pn,setSeekTarget:function(tt){je=tt},segmentRequestingCompleted:function(tt){isNaN(tt)||(ce=tt,Nn())}},B=(0,x.Z)(Z).getInstance().getLogger(P),_e=Qe(Z).getInstance(),st(),P}Kt.__dashjs_factory_name=Qt;var St=U.Z.getClassFactory(Kt),Lt="NotFragmentedTextBufferController";function Ce(L){L=L||{};var P,B,V,ee,J,H,re=this.context,ce=(0,m.Z)(re).getInstance(),Se=L.textController,Ee=L.errHandler,ie=L.streamInfo,me=L.type;function ge(Be){ee=Be}function qe(Be){var ze,_e;B!==Be&&(B=Be)&&(ze=T.Z.BUFFERING_COMPLETED,_e={},ce.trigger(ze,_e,{streamId:ie.id,mediaType:me}))}function De(Be){Be.chunk.bytes&&!B&&(H.save(Be.chunk),J.append(Be.chunk),qe(!0))}return P={initialize:function(Be){ge(Be)},getStreamId:function(){return ie.id},getType:function(){return me},getBufferControllerType:function(){return Lt},createBufferSink:function(Be){return new Promise(function(ze,_e){try{(J=$e(re).create({mediaSource:ee,textController:Se,eventBus:ce})).initializeForFirstUse(ie,Be),V||(J.getBuffer()&&typeof J.getBuffer().initialize=="function"&&J.getBuffer().initialize(),V=!0),ze(J)}catch(Le){Ee.error(new fe.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+me)),_e(Le)}})},dischargePreBuffer:function(){},getBuffer:function(){return J},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:ge,getMediaSource:function(){return ee},appendInitSegmentFromCache:function(Be){return H.extract(ie.id,Be)!==null},getIsBufferingCompleted:function(){return B},setIsBufferingCompleted:qe,getIsPruningInProgress:function(){return!1},reset:function(Be){ce.off(T.Z.INIT_FRAGMENT_LOADED,De,P),!Be&&J&&(J.abort(),J.reset(),J=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return B=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},V=!1,ee=null,B=!1,H=Qe(re).getInstance(),ce.on(T.Z.INIT_FRAGMENT_LOADED,De,P),P}Ce.__dashjs_factory_name=Lt;var te=U.Z.getClassFactory(Ce);function Fe(L){L=L||{};var P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe=this.context,De=(0,m.Z)(qe).getInstance(),Be=L.dashMetrics,ze=L.mediaPlayerModel,_e=L.fragmentModel,Le=L.abrController,we=L.playbackController,je=L.textController,Z=L.type,ue=L.bufferController,ae=L.representationController,se=L.settings;function Q(){me=!0}function Me(){me=!1}function be(Bt){if(!ue.getIsBufferingCompleted()){ke();var Gt=isNaN(Bt)?0:Bt;J=setTimeout(Re,Gt)}}function ke(){J&&(clearTimeout(J),J=null)}function Re(){try{if(function(){try{return Z===y.Z.TEXT&&!je.isTextEnabled()||we.isPaused()&&(!we.getStreamController().getInitialPlayback()||!we.getStreamController().getAutoPlay())&&!se.get().streaming.scheduling.scheduleWhilePaused}catch(kt){return!1}}())return void ke();if(function(){try{return!!me&&ae.getCurrentRepresentationInfo()&&(isNaN(Se)||Ee||(kt=B.id,Ft=Le.getMaxAllowedIndexFor(Z,kt),!(!isNaN(ce)&&ce==Ft||(V.info("Top quality "+Z+" index has changed from "+ce+" to "+Ft),ce=Ft,0)))||function(){var An=ae.getCurrentRepresentationInfo();return!Z||!An||Be.getCurrentBufferLevel(Z)<pe()}())}catch(An){return!1}var kt,Ft}()){var Bt=!1;ge&&(Bt=Le.checkPlaybackQuality(Z,B.id)),Bt||(Gt=ae.getCurrentRepresentationInfo(),ie||Gt.quality!==Se||Ee?(Ee?(V.debug("Switch track for "+Z+", representation id = "+Gt.id),Ee=!1):V.debug("Quality has changed, get init request for representationid = "+Gt.id),De.trigger(T.Z.INIT_FRAGMENT_NEEDED,{representationId:Gt.id,sender:P},{streamId:B.id,mediaType:Z}),ge=!1,ie=!1):(V.debug("Media segment needed for ".concat(Z," and stream id ").concat(B.id)),De.trigger(T.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:B.id,mediaType:Z}),ge=!0))}else be(we.getLowLatencyModeEnabled()?se.get().streaming.scheduling.lowLatencyTimeout:se.get().streaming.scheduling.defaultTimeout)}catch(kt){be(we.getLowLatencyModeEnabled()?se.get().streaming.scheduling.lowLatencyTimeout:se.get().streaming.scheduling.defaultTimeout)}var Gt}function pe(){var Bt=NaN,Gt=ae.getCurrentRepresentationInfo();return Z&&Gt&&(Bt=Z===y.Z.TEXT?function(){try{if(je.isTextEnabled()){var kt=ae.getCurrentRepresentationInfo();if(isNaN(kt.fragmentDuration)){var Ft=Be.getCurrentSchedulingInfo(D.Z.SCHEDULING_INFO);return Ft?Ft.duration:0}return kt.fragmentDuration}return 0}catch(An){return 0}}():Z===y.Z.AUDIO&&H?function(){try{var kt=Be.getCurrentBufferLevel(y.Z.VIDEO),Ft=ae.getCurrentRepresentationInfo();return isNaN(Ft.fragmentDuration)?kt+1:Math.max(kt+1,Ft.fragmentDuration)}catch(An){return 0}}():function(){try{var kt=ae.getCurrentRepresentationInfo().mediaInfo.streamInfo;return Le.isPlayingAtTopQuality(kt)?kt.manifestInfo.duration>=se.get().streaming.buffer.longFormContentDurationThreshold?se.get().streaming.buffer.bufferTimeAtTopQualityLongForm:se.get().streaming.buffer.bufferTimeAtTopQuality:ze.getStableBufferTime()}catch(Ft){return ze.getStableBufferTime()}}()),Bt}function Ne(){Ye(!0)}function Ye(Bt){if(we&&_e){var Gt=_e.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:we.getTime(),threshold:0})[0];Gt&&we.getTime()>=Gt.startTime&&((!re.mediaInfo||Gt.mediaInfo.type===re.mediaInfo.type&&Gt.mediaInfo.index!==re.mediaInfo.index)&&Bt&&De.trigger(T.Z.TRACK_CHANGE_RENDERED,{mediaType:Z,oldMediaInfo:re.mediaInfo,newMediaInfo:Gt.mediaInfo,streamId:B.id}),Gt.quality===re.quality&&Gt.adaptationIndex===re.adaptationIndex||!Bt||(V.debug("Quality change rendered for streamId ".concat(B.id," and type ").concat(Z)),De.trigger(T.Z.QUALITY_CHANGE_RENDERED,{mediaType:Z,oldQuality:re.quality,newQuality:Gt.quality,streamId:B.id})),re={mediaInfo:Gt.mediaInfo,quality:Gt.quality,adaptationIndex:Gt.adaptationIndex})}}function dt(){_e.abortRequests(),ke()}function at(){se.get().streaming.scheduling.scheduleWhilePaused||be()}function Je(Bt){Be.updatePlayListTraceMetrics({playbackspeed:Bt.playbackRate.toString()})}function ht(){ge=!0,ee=0,Se=NaN,re={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},ce=NaN,Ee=!1,ie=!1,me=!0}return P={initialize:function(Bt){H=Bt,De.on(T.Z.URL_RESOLUTION_FAILED,dt,P),De.on(_.Z.PLAYBACK_STARTED,at,P),De.on(_.Z.PLAYBACK_RATE_CHANGED,Je,P),De.on(_.Z.PLAYBACK_TIME_UPDATED,Ne,P),De.on(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),De.on(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Me,P)},getType:function(){return Z},getStreamId:function(){return B.id},setTimeToLoadDelay:function(Bt){ee=Bt},getTimeToLoadDelay:function(){return ee},setSwitchTrack:function(Bt){Ee=Bt},getSwitchTrack:function(){return Ee},startScheduleTimer:be,clearScheduleTimer:ke,reset:function(){De.off(T.Z.URL_RESOLUTION_FAILED,dt,P),De.off(_.Z.PLAYBACK_STARTED,at,P),De.off(_.Z.PLAYBACK_RATE_CHANGED,Je,P),De.off(_.Z.PLAYBACK_TIME_UPDATED,Ne,P),De.off(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),De.off(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Me,P),ke(),Ye(!1),ht(),B=null},getBufferTarget:pe,getPlaybackController:function(){return we},setCheckPlaybackQuality:function(Bt){ge=Bt},setInitSegmentRequired:function(Bt){ie=Bt},setLastInitializedQuality:function(Bt){Se=Bt}},V=(0,x.Z)(qe).getInstance().getLogger(P),ht(),B=L.streamInfo,P}Fe.__dashjs_factory_name="ScheduleController";var O=U.Z.getClassFactory(Fe),M=w(7387);function q(L){var P,B,V,ee,J,H,re=(L=L||{}).eventBus,ce=L.events,Se=L.abrController,Ee=L.dashMetrics,ie=L.playbackController,me=L.timelineConverter,ge=L.type,qe=L.streamInfo,De=L.dashConstants,Be=L.segmentsController,ze=L.isDynamic,_e=L.adapter;function Le(){return ge}function we(){return V}function je(){return H}function Z(){B=null,V=!0,ee=[],J=null}function ue(ke){return new Promise(function(Re,pe){var Ne=ke.hasInitialization(),Ye=ke.hasSegments(),dt=[];dt.push(Be.updateInitData(ke,Ne)),dt.push(Be.updateSegmentData(ke,Ye)),Promise.all(dt).then(function(at){var Je;at[0]&&!at[0].error&&(ke=function(ht,Bt){return Bt&&!Bt.error&&Bt.representation?Bt.representation:ht}(ke,at[0])),at[1]&&!at[1].error&&(ke=function(ht,Bt){if(Bt&&!Bt.error){var Gt,kt,Ft,An,nt=Bt.segments,vt=[],Wt=0;for(Gt=0,kt=nt?nt.length:0;Gt<kt;Gt++)Ft=nt[Gt],(An=(0,M.TJ)(me,ze,ht,Ft.startTime,Ft.duration,Ft.timescale,Ft.media,Ft.mediaRange,Wt))&&(vt.push(An),An=null,Wt++);return vt.length>0&&(ht.segments=vt),ht}}(ke,at[1])),(Je=ke).mediaFinishedInformation=Be.getMediaFinishedInformation(Je),function(ht){if(we()){var Bt,Gt,kt=Ee.getCurrentManifestUpdate(),Ft=!1;if(kt){for(var An=0;An<kt.representationInfo.length;An++)if((Bt=kt.representationInfo[An]).index===ht.index&&Bt.mediaType===Le()){Ft=!0;break}Ft||Ee.addManifestUpdateRepresentationInfo(ht,Le())}if(function(){for(var vt=0,Wt=ee.length;vt<Wt;vt++){var Nt=ee[vt].segmentInfoType;if(!ee[vt].hasInitialization()||(Nt===De.SEGMENT_BASE||Nt===De.BASE_URL)&&!ee[vt].segments)return!1}return!0}()){Se.setPlaybackQuality(ge,qe,(Gt=H,ee.indexOf(Gt)));var nt=Ee.getCurrentDVRInfo(ge);nt&&Ee.updateManifestUpdateInfo({latency:nt.range.end-ie.getTime()}),Ee.getCurrentRepresentationSwitch(je().adaptation.type)||ae(),Q()}}}(ke),Re()}).catch(function(at){pe(at)})})}function ae(){(function(){if(!(Se&&Ee&&ie&&me))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var ke=new Date,Re=je(),pe=1e3*ie.getTime();Re&&Ee.addRepresentationSwitch(Re.adaptation.type,ke,pe,Re.id),re.trigger(_.Z.REPRESENTATION_SWITCH,{mediaType:ge,streamId:qe.id,currentRepresentation:Re,numberOfRepresentations:ee.length},{streamId:qe.id,mediaType:ge})}function se(ke){return ke==null||ke>=ee.length?null:ee[ke]}function Q(ke){V=!1,re.trigger(ce.DATA_UPDATE_COMPLETED,{data:B,currentRepresentation:H,error:ke},{streamId:qe.id,mediaType:ge})}function Me(ke){H=ke,J=_e.convertRepresentationToRepresentationInfo(H)}function be(ke){if(ke.newDuration){var Re=je();Re&&Re.adaptation.period&&(Re.adaptation.period.duration=ke.newDuration)}}return P={getStreamId:function(){return qe.id},getType:Le,getData:function(){return B},isUpdating:we,updateData:function(ke,Re,pe,Ne,Ye){return new Promise(function(dt,at){if(V=!0,ee=Re,B=ke,Me(se(Ye)),pe!==y.Z.VIDEO&&pe!==y.Z.AUDIO&&(pe!==y.Z.TEXT||!Ne))return Q(),void dt();for(var Je=[],ht=0,Bt=ee.length;ht<Bt;ht++){var Gt=ee[ht];Je.push(ue(Gt))}Promise.all(Je).then(function(){Me(se(Ye)),dt()}).catch(function(kt){at(kt)})})},getCurrentRepresentation:je,getCurrentRepresentationInfo:function(){return J},getRepresentationForQuality:se,prepareQualityChange:function(ke){Me(se(ke)),ae()},reset:function(){re.off(_.Z.MANIFEST_VALIDITY_CHANGED,be,P),Z()}},Z(),re.on(_.Z.MANIFEST_VALIDITY_CHANGED,be,P),P}q.__dashjs_factory_name="RepresentationController";var K=U.Z.getClassFactory(q),ye=w(3106),de=w(9326),He=w(7473),Tt=w(2594);function ot(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var rt=function L(){ot(this,L),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};rt.INITIAL_PLAYOUT_START_REASON="initial_playout",rt.SEEK_START_REASON="seek",rt.RESUME_FROM_PAUSE_START_REASON="resume",rt.METRICS_COLLECTION_START_REASON="metrics_collection_start";var et=function L(){ot(this,L),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};et.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",et.REBUFFERING_REASON="rebuffering",et.USER_REQUEST_STOP_REASON="user_request",et.END_OF_PERIOD_STOP_REASON="end_of_period",et.END_OF_CONTENT_STOP_REASON="end_of_content",et.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",et.FAILURE_STOP_REASON="failure";var ft=w(7802);function yt(){return{ntpToUTC:function(L){var P=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(P.getTime()+L).getTime()}}}yt.__dashjs_factory_name="TimeUtils";var _t=U.Z.getSingletonFactory(yt);function Ct(L){L=L||{};var P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe,De,Be=this.context,ze=(0,m.Z)(Be).getInstance(),_e=L.streamInfo,Le=L.type,we=L.errHandler,je=L.mimeType,Z=L.timelineConverter,ue=L.adapter,ae=L.manifestModel,se=L.mediaPlayerModel,Q=L.fragmentModel,Me=L.abrController,be=L.playbackController,ke=L.mediaController,Re=L.textController,pe=L.dashMetrics,Ne=L.settings,Ye=L.boxParser,dt=L.segmentBlacklistController;function at(){return _e.id}function Je(){return Le}function ht(){return ue.getIsTextTrack(ce.getData())}function Bt(){J=[],ee=null,qe=0,Se=!1,Ee=!1,ie=!1,De=null}function Gt(st){return!isNaN(st)&&!isNaN(_e.duration)&&isFinite(_e.duration)&&st>=_e.start+_e.duration}function kt(st){var tt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(st.sender){if(be.getIsManifestUpdateInProgress())Wt();else if((!ht()||Re.isTextEnabled())&&H&&st.representationId&&!H.appendInitSegmentFromCache(st.representationId)){var qt=ce.getCurrentRepresentation();if(qt.range===0)return void Ft();var Ve=me?me.getInitRequest(ee,qt):null;Ve?Q.executeRequest(Ve):tt&&(re.setInitSegmentRequired(!0),Wt())}}}function Ft(st){var tt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(be.getIsManifestUpdateInProgress()||H.getIsPruningInProgress())Wt();else{var qt=vt();qt?(Se=!1,Ee=!1,An(qt)):nt(tt)}}function An(st){isNaN(st.startTime+st.duration)||(qe=st.startTime+st.duration),st.delayLoadingTime=new Date().getTime()+re.getTimeToLoadDelay(),re.setTimeToLoadDelay(0),function(tt){var qt=tt.url;return tt.range&&(qt=qt.concat("_",tt.range)),dt.contains(qt)}(st)?(B.warn("Fragment request url ".concat(st.url," for stream id ").concat(_e.id," and media type ").concat(Le," is on the ignore list and will be skipped")),Wt()):(B.debug("Next fragment request url for stream id ".concat(_e.id," and media type ").concat(Le," is ").concat(st.url)),Q.executeRequest(st))}function nt(st){var tt,qt=ce.getCurrentRepresentation();if(!Ne.get().streaming.gaps.enableSeekFix||!Se&&be.getTime()!==0||(V?V&&qt.segmentInfoType===v.Z.SEGMENT_TIMELINE&&(tt=me.getValidTimeAheadOfTargetTime(qe,ee,qt,Ne.get().streaming.gaps.threshold)):tt=me.getValidTimeAheadOfTargetTime(qe,ee,qt,Ne.get().streaming.gaps.threshold),isNaN(tt)||tt===qe)){if(me.isLastSegmentRequested(qt,qe)){var Ve=me.getCurrentIndex();return B.debug("Segment requesting for stream ".concat(_e.id," has finished")),ze.trigger(T.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:Ve},{streamId:_e.id,mediaType:Le}),H.segmentRequestingCompleted(Ve),void re.clearScheduleTimer()}st&&Wt()}else be.isSeeking()||be.getTime()===0?(B.warn("Adjusting playback time ".concat(tt," because of gap in the manifest. Seeking by ").concat(tt-qe)),be.seek(tt,!1,!1)):(B.warn("Adjusting buffering time ".concat(tt," because of gap in the manifest. Adjusting time by ").concat(tt-qe)),On(tt),st&&Wt())}function vt(){var st,tt=xn();if(isNaN(qe)||Je()===y.Z.TEXT&&!Re.isTextEnabled())return null;if(me){var qt=ce&&tt?ce.getRepresentationForQuality(tt.quality):null;st=Se?me.getSegmentRequestForTime(ee,qt,qe):Ee?me.repeatSegmentRequest(ee,qt):me.getNextSegmentRequest(ee,qt)}return st}function Wt(){re.startScheduleTimer(be.getLowLatencyModeEnabled()?Ne.get().streaming.scheduling.lowLatencyTimeout:Ne.get().streaming.scheduling.defaultTimeout)}function Nt(st){st.error||H.getIsBufferingCompleted()||H.updateBufferTimestampOffset(st.currentRepresentation)}function en(st){pe.addBufferState(Le,st.state,re.getBufferTarget()),st.state!==D.Z.BUFFER_EMPTY||be.isSeeking()||(B.info("Buffer is empty! Stalling!"),pe.pushPlayListTraceMetrics(new Date,et.REBUFFERING_REASON))}function Jt(st){Q.syncExecutedRequestsWithBufferedRange(H.getBuffer().getAllBufferRanges(),_e.duration),st.quotaExceeded&&st.from>be.getTime()&&On(st.from),st.hasEnoughSpaceToAppend&&st.quotaExceeded&&re.startScheduleTimer()}function Yt(st){if(st&&st.lastRequestAppended&&st.lastRequestAppended.url){var tt=st.lastRequestAppended.url;st.lastRequestAppended.range&&(tt=tt.concat("_",st.lastRequestAppended.range)),B.warn("Blacklisting segment with url ".concat(tt)),dt.add(tt)}}function Dn(st){if(B.debug("Appended bytes for ".concat(st.mediaType," and stream id ").concat(st.streamId)),st.segmentType===it.w.INIT_SEGMENT_TYPE){var tt=st.quality;re.setLastInitializedQuality(tt),B.info("["+Le+"] lastInitializedRepresentationInfo changed to "+st.quality)}De?Nn(De):re.startScheduleTimer(0)}function Nn(st){var tt=Q.getRequests({state:$.FRAGMENT_MODEL_LOADING});if(tt&&tt.length>0)return B.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(De=st);H.updateBufferTimestampOffset(st).then(function(){re.setCheckPlaybackQuality(!1),ee.segmentAlignment||ee.subSegmentAlignment?re.startScheduleTimer():En(),De=null,ie=!1}).catch(function(){De=null,ie=!1})}function rr(st){B.info("onFragmentLoadingAbandoned request: "+st.request.url+" has been aborted"),be.isSeeking()||re.getSwitchTrack()||ie||(B.info("onFragmentLoadingAbandoned request: "+st.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),st.request&&st.request.isInitializationRequest()?re.setInitSegmentRequired(!0):On(st.request.startTime+st.request.duration/2),re.startScheduleTimer(0))}function ir(st){B.info("OnFragmentLoadingCompleted for stream id "+_e.id+" and media type "+Le+" - Url:",st.request?st.request.url:"undefined",st.request.range?", Range:"+st.request.range:""),ht()&&re.startScheduleTimer(0),st.error&&st.request.serviceLocation&&function(tt){B.info("Fragment loading completed with an error"),tt&&tt.request&&tt.request.type&&(tt.request.type===it.w.INIT_SEGMENT_TYPE?kt({representationId:tt.request.representationId,sender:{}},!1):tt.request.type===it.w.MEDIA_SEGMENT_TYPE&&(On(tt.request.startTime+tt.request.duration/2),Ft({},!1)))}(st)}function It(){On(be.getTime()),Pn().startScheduleTimer()}function $t(st){var tt=st.currentTrackInfo;if(tt){var qt=J.find(function(Ve){return Ve.index===tt.index&&Ve.lang===tt.lang});qt&&vn(qt).then(function(){H.setIsBufferingCompleted(!1),On(be.getTime()),re.setInitSegmentRequired(!0),re.startScheduleTimer()})}}function Zt(st){On(st.quotaExceededTime),re.clearScheduleTimer()}function un(){return H?H.getBuffer():null}function vn(st){st===ee||st&&ee&&st.type!==ee.type||(ee=st);var tt=ue.getRealAdaptation(_e,ee),qt=ue.getVoRepresentations(ee);if(ce){var Ve,Ke=ce.getData(),Mt=Me.getMaxAllowedIndexFor(Le,_e.id),fn=Me.getMinAllowedIndexFor(Le,_e.id),Tn=null;return Ke!==null&&Ke.id===tt.id||Le===y.Z.TEXT?Ve=Me.getQualityFor(Le,_e.id):(Tn=Me.getThroughputHistory().getAverageThroughput(Le,V)||Me.getInitialBitrateFor(Le,_e.id),Ve=Me.getQualityForBitrate(ee,Tn,_e.id)),fn!==void 0&&Ve<fn&&(Ve=fn),Ve>Mt&&(Ve=Mt),ce.updateData(tt,qt,Le,ee.isFragmented,Ve)}return Promise.resolve()}function Pn(){return re}function xn(st){var tt;return st!==void 0?((0,ye.SE)(st),tt=ce?ce.getRepresentationForQuality(st):null):tt=ce?ce.getCurrentRepresentation():null,ue.convertRepresentationToRepresentationInfo(tt)}function Fn(){return!!H&&H.getIsBufferingCompleted()}function Gn(st){if(Ne.get().streaming.enableManifestTimescaleMismatchFix){var tt=st.chunk,qt=tt.bytes,Ve=xn(tt.quality),Ke=ce&&Ve?ce.getRepresentationForQuality(Ve.quality):null;Ve&&Ke&&(Ke.timescale=Ye.getMediaTimescaleFromMoov(qt))}}function bt(st){var tt=st.chunk,qt=tt.bytes,Ve=tt.quality,Ke=xn(Ve),Mt=ce&&Ke?ce.getRepresentationForQuality(Ke.quality):null;if(Ke&&Mt){var fn;if(Ne.get().streaming.parseInbandPrft&&st.request.type===it.w.MEDIA_SEGMENT_TYPE){var Tn=function(io,Zi){var Gs=io.getBoxes("prft"),Ju=[];return Gs.forEach(function(el){Ju.push(function(Qa,qs){var Oo="unknown";switch(Qa.flags){case 0:Oo=v.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:Oo=v.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:Oo=v.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var _u=1e3*Qa.ntp_timestamp_sec+Qa.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:Oo,ntpTimestamp:_u=_t(Be).getInstance().ntpToUTC(_u),mediaTime:Qa.media_time/qs}}(el,Zi))}),Ju}(fn=fn||Ye.parse(qt),Mt.timescale);Tn&&Tn.length&&ze.trigger(_.Z.INBAND_PRFT,{data:Tn},{streamId:_e.id,mediaType:Le})}var sr=ue.getEventsFor(Ke.mediaInfo,null,_e),Zr=ue.getEventsFor(Ke,Mt,_e);if(sr&&sr.length>0||Zr&&Zr.length>0){var Ai=Q.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,quality:Ve,index:tt.index})[0],zr=function(io,Zi,Gs,Ju){try{for(var el={},Qa=[],qs=Gs.concat(Ju),Oo=0,_u=qs.length;Oo<_u;Oo++)el[qs[Oo].schemeIdUri+"/"+qs[Oo].value]=qs[Oo];var Tu=io.getBoxes("emsg");if(!Tu||Tu.length===0)return Qa;for(var da=io.getBox("sidx"),jc=!da||isNaN(da.earliest_presentation_time)||isNaN(da.timescale)?Zi&&!isNaN(Zi.mediaStartTime)?Zi.mediaStartTime:0:da.earliest_presentation_time/da.timescale,Jf=Math.max(jc,0),tl=ce.getCurrentRepresentation(),Ja=0,Zc=Tu.length;Ja<Zc;Ja++){var Hs=ue.getEvent(Tu[Ja],el,Jf,tl);Hs&&Qa.push(Hs)}return Qa}catch(Dt){return[]}}(fn=fn||Ye.parse(qt),Ai,sr,Zr);ze.trigger(T.Z.INBAND_EVENTS,{events:zr},{streamId:_e.id})}}}function Sn(){var st=be.getTime();Ne.get().streaming.buffer.flushBufferAtTrackSwitch&&be.seek(st+.001,!1,!0),On(st),H.setSeekTarget(st),re.startScheduleTimer()}function En(){var st=be.getTime(),tt=H.getContinuousBufferTimeForTargetTime(st);On(isNaN(tt)?st:tt),re.startScheduleTimer()}function Ot(st){st&&!isNaN(st.time)&&(On(st.time),H.setSeekTarget(st.time))}function On(st){qe=st,Se=!0}return P={initialize:function(st,tt,qt){ge=(0,ft.Z)(Be).create({events:T.Z,eventBus:ze,streamInfo:_e,timelineConverter:Z,dashConstants:v.Z,segmentBaseController:L.segmentBaseController,type:Le}),me=(0,de.Z)(Be).create({streamInfo:_e,type:Le,timelineConverter:Z,dashMetrics:pe,mediaPlayerModel:se,baseURLController:L.baseURLController,errHandler:we,segmentsController:ge,settings:Ne,boxParser:Ye,events:T.Z,eventBus:ze,errors:Ae,debug:(0,x.Z)(Be).getInstance(),requestModifier:(0,He.Z)(Be).getInstance(),dashConstants:v.Z,constants:y.Z,urlUtils:(0,Tt.Z)(Be).getInstance()}),V=_e.manifestInfo.isDynamic,me.initialize(V),Me.registerStreamType(Le,P),ce=K(Be).create({streamInfo:_e,type:Le,abrController:Me,dashMetrics:pe,playbackController:be,timelineConverter:Z,dashConstants:v.Z,events:T.Z,eventBus:ze,errors:Ae,isDynamic:V,adapter:ue,segmentsController:ge}),H=function(Ve,Ke){return Ve?Ve!==y.Z.TEXT||Ke?St(Be).create({streamInfo:_e,type:Ve,mediaPlayerModel:se,manifestModel:ae,fragmentModel:Q,errHandler:we,mediaController:ke,representationController:ce,adapter:ue,textController:Re,abrController:Me,playbackController:be,settings:Ne}):te(Be).create({streamInfo:_e,type:Ve,mimeType:je,fragmentModel:Q,textController:Re,errHandler:we,settings:Ne}):(we.error(new fe.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(Le,qt),H&&H.initialize(st),(re=O(Be).create({streamInfo:_e,type:Le,mimeType:je,adapter:ue,dashMetrics:pe,mediaPlayerModel:se,fragmentModel:Q,abrController:Me,playbackController:be,textController:Re,mediaController:ke,bufferController:H,representationController:ce,settings:Ne})).initialize(tt),qe=0,Se=!1,Ee=!1},getStreamId:at,getType:Je,isUpdating:function(){return!!ce&&ce.isUpdating()},getBufferController:function(){return H},dischargePreBuffer:function(){H.dischargePreBuffer()},getFragmentModel:function(){return Q},getScheduleController:Pn,getRepresentationController:function(){return ce},getRepresentationInfo:xn,getBufferLevel:function(){return H?H.getBufferLevel():0},isBufferingCompleted:Fn,createBufferSinks:function(st){var tt=un();return tt?Promise.resolve(tt):H?H.createBufferSink(ee,st):Promise.resolve(null)},updateStreamInfo:function(st){return _e=st,Fn()?Promise.resolve():H.updateAppendWindow()},getStreamInfo:function(){return _e},selectMediaInfo:vn,clearMediaInfoArray:function(){J=[]},addMediaInfo:function(st){J.indexOf(st)===-1&&J.push(st)},prepareTrackSwitch:function(){return new Promise(function(st){B.debug("Preparing track switch for type ".concat(Le));var tt=Le===y.Z.TEXT||Ne.get().streaming.trackSwitchMode[Le]===y.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&be.getTimeToStreamEnd(_e)>Ne.get().streaming.buffer.stallThreshold;if(H.getIsBufferingCompleted()&&!tt)return H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){ze.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:_e.id,mediaType:Le})}).catch(function(){ze.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:_e.id,mediaType:Le})}),void st();re.clearScheduleTimer(),re.setSwitchTrack(!0),tt?(ze.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:_e.id},{mediaType:Le,streamId:_e.id}),Q.abortRequests(),H.prepareForReplacementTrackSwitch(ee.codec).then(function(){var qt=xn();return H.updateBufferTimestampOffset(qt)}).then(function(){Sn(),st()}).catch(function(){Sn(),st()})):H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){En(),st()}).catch(function(){En(),st()})})},prepareQualityChange:function(st){De&&B.warn("Canceling queued representation switch to ".concat(De.quality," for ").concat(Le)),B.debug("Preparing quality switch for type ".concat(Le));var tt=st.newQuality;ie=!0,re.clearScheduleTimer(),ce.prepareQualityChange(tt);var qt=xn(tt);st.reason&&st.reason.forceReplace?function(Ve){Q.abortRequests(),ze.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:_e.id},{mediaType:Le,streamId:_e.id}),re.setCheckPlaybackQuality(!1),H.prepareForForceReplacementQualitySwitch(Ve).then(function(){Sn(),De=null,ie=!1}).catch(function(){Sn(),De=null,ie=!1})}(qt):st&&st.reason&&st.reason.forceAbandon?function(Ve){H.updateBufferTimestampOffset(Ve).then(function(){Q.abortRequests(),Ee=!0,re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1,De=null}).catch(function(){De=null,ie=!1})}(qt):Ne.get().streaming.buffer.fastSwitchEnabled?function(Ve){var Ke=be.getTime(),Mt=1.5*(isNaN(Ve.fragmentDuration)?1:Ve.fragmentDuration),fn=Q.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:Ke+Mt,threshold:0})[0];if(fn&&!ht()){var Tn=H.getBufferLevel(),sr=Me.getAbandonmentStateFor(_e.id,Le);fn.quality<Ve.quality&&Tn>=Mt&&sr!==D.Z.ABANDON_LOAD?H.updateBufferTimestampOffset(Ve).then(function(){Q.abortRequests(),On(Ke+Mt),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1}).catch(function(){ie=!1}):Nn(Ve)}else Nn(Ve)}(qt):Nn(qt),pe.pushPlayListTraceMetrics(new Date,et.REPRESENTATION_SWITCH_STOP_REASON),pe.createPlaylistTraceMetrics(qt.id,1e3*be.getTime(),be.getPlaybackRate())},getMediaInfo:function(){return ee},getMediaSource:function(){return H.getMediaSource()},setMediaSource:function(st){return H.setMediaSource(st,ee)},getBuffer:un,setExplicitBufferingTime:On,finalisePlayList:function(st,tt){pe.pushPlayListTraceMetrics(st,tt)},probeNextRequest:function(){var st=xn(),tt=ce&&st?ce.getRepresentationForQuality(st.quality):null;return me.getNextSegmentRequestIdempotent(ee,tt)},prepareInnerPeriodPlaybackSeeking:function(st){return new Promise(function(tt){if(H.hasBufferAtTime(st.seekTime))return H.pruneBuffer(),Gt(H.getContinuousBufferTimeForTargetTime(st.seekTime))&&H.setIsBufferingCompleted(!0),void tt();re.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){var qt=H.getAllRangesWithSafetyFactor(st.seekTime);return H.clearBuffers(qt)}).then(function(){var qt=H.getContinuousBufferTimeForTargetTime(st.seekTime);if(Gt(qt))H.setIsBufferingCompleted(!0),tt();else{var Ve=isNaN(qt)?st.seekTime:qt;On(Ve),H.setSeekTarget(Ve);var Ke=[];Ke.push(H.updateAppendWindow());var Mt=xn();Ke.push(H.updateBufferTimestampOffset(Mt)),Promise.all(Ke).then(function(){re.setInitSegmentRequired(!0),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),tt()})}}).catch(function(qt){B.error(qt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(st,tt){try{re.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){return H.pruneAllSafely()}).then(function(){st()})}catch(qt){tt(qt)}})},reset:function(st,tt){me&&me.reset(),H&&(H.reset(st,tt),H=null),re&&(re.reset(),re=null),ce&&(ce.reset(),ce=null),ge&&(ge=null),Me&&Me.unRegisterStreamType(at(),Le),ze.off(T.Z.DATA_UPDATE_COMPLETED,Nt,P),ze.off(T.Z.INIT_FRAGMENT_NEEDED,kt,P),ze.off(T.Z.MEDIA_FRAGMENT_NEEDED,Ft,P),ze.off(T.Z.INIT_FRAGMENT_LOADED,Gn,P),ze.off(T.Z.MEDIA_FRAGMENT_LOADED,bt,P),ze.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),ze.off(T.Z.BUFFER_CLEARED,Jt,P),ze.off(T.Z.SEEK_TARGET,Ot,P),ze.off(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),ze.off(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),ze.off(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,It,P),ze.off(T.Z.SET_NON_FRAGMENTED_TEXT,$t,P),ze.off(T.Z.QUOTA_EXCEEDED,Zt,P),ze.off(T.Z.SOURCE_BUFFER_ERROR,Yt,P),ze.off(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),Bt(),Le=null,_e=null}},B=(0,x.Z)(Be).getInstance().getLogger(P),Bt(),ze.on(T.Z.DATA_UPDATE_COMPLETED,Nt,P,{priority:m.Z.EVENT_PRIORITY_HIGH}),ze.on(T.Z.INIT_FRAGMENT_NEEDED,kt,P),ze.on(T.Z.MEDIA_FRAGMENT_NEEDED,Ft,P),ze.on(T.Z.INIT_FRAGMENT_LOADED,Gn,P),ze.on(T.Z.MEDIA_FRAGMENT_LOADED,bt,P),ze.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),ze.on(T.Z.BUFFER_CLEARED,Jt,P),ze.on(T.Z.SEEK_TARGET,Ot,P),ze.on(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),ze.on(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),ze.on(T.Z.QUOTA_EXCEEDED,Zt,P),ze.on(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,It,P),ze.on(T.Z.SET_NON_FRAGMENTED_TEXT,$t,P),ze.on(T.Z.SOURCE_BUFFER_ERROR,Yt,P),ze.on(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),P}Ct.__dashjs_factory_name="StreamProcessor";var hn=U.Z.getClassFactory(Ct),Xt=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},nn=w(9032);function Pt(L,P){if(L){if(typeof L=="string")return Un(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Un(L,P):void 0}}function Un(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function gr(L){L=L||{};var P,B,V=this.context,ee=L.requestModifier,J=L.lowLatencyThroughputModel,H=L.boxParser,re=(0,Ze.Z)(V).getInstance();function ce(ie){var me,ge=new Date,qe=ie.request,De=new Headers;if(qe.range&&De.append("Range","bytes="+qe.range),ie.headers)for(var Be in ie.headers){var ze=ie.headers[Be];ze&&De.append(Be,ze)}qe.requestStartDate||(qe.requestStartDate=ge),ee&&ee.modifyRequestHeader&&ee.modifyRequestHeader({setRequestHeader:function(Z,ue){De.append(Z,ue)}},{url:ie.url}),typeof window.AbortController=="function"&&(me=new AbortController,ie.abortController=me,me.signal.onabort=ie.onabort);var _e={method:ie.method,headers:De,credentials:ie.withCredentials?"include":void 0,signal:me?me.signal:void 0},Le=re.get().streaming.abr.fetchThroughputCalculationMode,we=Date.now(),je=0;new Promise(function(Z){if(Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J&&(je=J.getThroughputCapacityDelayMS(qe,1e3*B.getCurrentBufferLevel(qe.mediaType))))return setTimeout(Z,je);Z()}).then(function(){var Z=Date.now();fetch(ie.url,_e).then(function(ue){ie.response||(ie.response={}),ie.response.status=ue.status,ie.response.statusText=ue.statusText,ie.response.responseURL=ue.url,ue.ok||ie.onerror();var ae,se="",Q=function(Nt,en){var Jt;if(typeof Symbol>"u"||Nt[Symbol.iterator]==null){if(Array.isArray(Nt)||(Jt=Pt(Nt))){Jt&&(Nt=Jt);var Yt=0,Dn=function(){};return{s:Dn,n:function(){return Yt>=Nt.length?{done:!0}:{done:!1,value:Nt[Yt++]}},e:function(It){throw It},f:Dn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Nn,rr=!0,ir=!1;return{s:function(){Jt=Nt[Symbol.iterator]()},n:function(){var It=Jt.next();return rr=It.done,It},e:function(It){ir=!0,Nn=It},f:function(){try{rr||Jt.return==null||Jt.return()}finally{if(ir)throw Nn}}}}(ue.headers.keys());try{for(Q.s();!(ae=Q.n()).done;){var Me=ae.value;se+=Me+": "+ue.headers.get(Me)+"\r\n"}}catch(Nt){Q.e(Nt)}finally{Q.f()}if(ie.response.responseHeaders=se,!ue.body)return ue.arrayBuffer().then(function(Nt){ie.response.response=Nt;var en={loaded:Nt.byteLength,total:Nt.byteLength,stream:!1};ie.progress(en),ie.onload(),ie.onend()});var be,ke,Re,pe,Ne=parseInt(ue.headers.get("Content-Length"),10),Ye=0,dt=!1,at=new Uint8Array,Je=0;if(Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J){var ht=Z,Bt=0,Gt=(Re=ue.body.tee(),pe=2,function(Nt){if(Array.isArray(Nt))return Nt}(Re)||function(Nt,en){if(typeof Symbol<"u"&&Symbol.iterator in Object(Nt)){var Jt=[],Yt=!0,Dn=!1,Nn=void 0;try{for(var rr,ir=Nt[Symbol.iterator]();!(Yt=(rr=ir.next()).done)&&(Jt.push(rr.value),!en||Jt.length!==en);Yt=!0);}catch(It){Dn=!0,Nn=It}finally{try{Yt||ir.return==null||ir.return()}finally{if(Dn)throw Nn}}return Jt}}(Re,pe)||Pt(Re,pe)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),kt=Gt[0],Ft=Gt[1];be=kt.getReader(),ke=[],be.read().then(function Nt(en){var Jt=en.value,Yt=en.done;if(Bt=Date.now(),Jt&&Jt.length){var Dn=Bt-ht,Nn=Jt.length;ke.push({chunkDownloadTimeRelativeMS:Bt-Z,chunkDownloadDurationMS:Dn,chunkBytes:Nn,kbps:Math.round(8*Nn/(Dn/1e3)),bufferLevel:B.getCurrentBufferLevel(qe.mediaType)})}if(Yt){var rr=Bt-Z,ir=ke.reduce(function(It,$t){return It+$t.chunkBytes},0);return J.addMeasurement(qe,rr,ke,we,je,se),void ie.progress({loaded:ir,total:ir,lengthComputable:!0,time:J.getEstimatedDownloadDurationMS(qe),stream:!0})}return ht=Date.now(),be.read().then(Nt)}),ie.reader=Ft.getReader()}else ie.reader=ue.body.getReader();var An=[],nt=[],vt=[],Wt=!0;Se(ie,function Nt(en){var Jt=en.value;if(en.done){if(at){if(Le!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Yt=null,Dn=null;Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Yt=function(It,$t){try{var Zt,un;Zt=It.filter(function(Sn,En){return En<It.length-1}),un=$t.filter(function(Sn,En){return En<$t.length-1});var vn=[];if(Zt.length>1){for(var Pn=0,xn=0,Fn=0;Fn<Zt.length;Fn++)if(Zt[Fn]&&un[Fn]){var Gn=un[Fn].ts-Zt[Fn].ts;if(Gn>1)vn.push(8*un[Fn].bytes/Gn),xn=0;else{xn===0&&(xn=Zt[Fn].ts,Pn=0);var bt=un[Fn].ts-xn;bt>1?(Pn+=un[Fn].bytes,vn.push(8*Pn/bt),xn=0):Pn+=un[Fn].bytes}}if(vn.length>0)return vn.reduce(function(Sn,En){return Sn+En},0)/vn.length}return null}catch(Sn){return null}}(nt,vt),Yt&&(Dn=8*Ye/Yt)):Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Dn=Ee(An,Ye)),ie.progress({loaded:Ye,total:isNaN(Ne)?Ye:Ne,lengthComputable:!0,time:Dn,stream:!0})}ie.response.response=at.buffer}return ie.onload(),void ie.onend()}if(Jt&&Jt.length>0){at=function(It,$t){if(It.length===0)return $t;var Zt=new Uint8Array(It.length+$t.length);return Zt.set(It),Zt.set($t,It.length),Zt}(at,Jt),Ye+=Jt.length,An.push({ts:Date.now(),bytes:Jt.length}),Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&Wt&&H.findLastTopIsoBoxCompleted(["moof"],at,Je).found&&(Wt=!1,nt.push({ts:performance.now(),bytes:Jt.length}));var Nn=H.findLastTopIsoBoxCompleted(["moov","mdat"],at,Je);if(Nn.found){var rr,ir=Nn.lastCompletedOffset+Nn.size;Le!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||Wt||(Wt=!0,vt.push({ts:performance.now(),bytes:at.length})),ir===at.length?(rr=at,at=new Uint8Array):(rr=new Uint8Array(at.subarray(0,ir)),at=at.subarray(ir)),ie.progress({data:rr.buffer,lengthComputable:!1,noTrace:!0}),Je=0}else Je=Nn.lastCompletedOffset,dt||(ie.progress({lengthComputable:!1,noTrace:!0}),dt=!0)}Se(ie,Nt)})}).catch(function(ue){ie.onerror&&ie.onerror(ue)})})}function Se(ie,me){ie.reader.read().then(me).catch(function(ge){ie.onerror&&ie.response.status===200&&ie.onerror(ge)})}function Ee(ie,me){try{if((ie=ie.filter(function(De){return De.bytes>me/4/ie.length})).length>1){var ge=0,qe=(ie[ie.length-1].ts-ie[0].ts)/ie.length;return ie.forEach(function(De,Be){var ze=ie[Be+1];if(ze){var _e=ze.ts-De.ts;ge+=_e<qe?_e:0}}),ge}return null}catch(De){return null}}return P={load:function(ie){ee&&ee.modifyRequest?(0,He.k)(ie,ee).then(function(){return ce(ie)}):ce(ie)},abort:function(ie){if(ie.abortController)ie.abortController.abort();else if(ie.reader)try{ie.reader.cancel(),ie.onabort()}catch(me){}},calculateDownloadedTime:Ee,setup:function(ie){B=ie.dashMetrics}},P}gr.__dashjs_factory_name="FetchLoader";var Pr=U.Z.getClassFactory(gr),dr=w(1180);function ei(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Ji=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var P,B;return P=L,(B=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==v.Z.BASE_URL&&this.segmentInfoType!==v.Z.SEGMENT_BASE&&!this.indexRange}}])&&ei(P.prototype,B),L}(),Or=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.period=null,this.index=-1,this.type=null},eo=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};eo.DEFAULT_ID="defaultId";var _i=eo,Di=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},zi=w(2610),to=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},Ti=function L(P,B,V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||P||"",this.dvbPriority=V||1,this.dvbWeight=ee||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};Ti.DEFAULT_DVB_PRIORITY=1,Ti.DEFAULT_DVB_WEIGHT=1;var Qn=Ti,Ou=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},tn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},sn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function an(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var wt=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.schemeIdUri=null,this.value=null,this.id=null}var P,B;return P=L,(B=[{key:"init",value:function(V){return V&&(this.schemeIdUri=V.schemeIdUri?V.schemeIdUri:null,this.value=V.value?V.value:null,this.id=V.id?V.id:null,V[v.Z.DVB_URL]&&(this.dvbUrl=V[v.Z.DVB_URL]),V[v.Z.DVB_MIMETYPE]&&(this.dvbMimeType=V[v.Z.DVB_MIMETYPE]),V[v.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=V[v.Z.DVB_FONTFAMILY])),this}}])&&an(P.prototype,B),L}(),zt=w(3101),xt=w.n(zt);function Vt(){return{areEqual:function(L,P){return xt()(L,P)}}}Vt.__dashjs_factory_name="ObjectUtils";var mn=U.Z.getSingletonFactory(Vt),In=w(7803),Zn=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.queryParams={}},Cn=function L(P,B,V){(function(ee,J){if(!(ee instanceof J))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.ttl=V||NaN,this.queryParams={}};function Rn(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function on(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?Rn(Object(B),!0).forEach(function(V){Bn(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):Rn(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function Bn(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function kn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=er(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(ce){throw ce},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,re=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var ce=B.next();return H=ce.done,ce},e:function(ce){re=!0,J=ce},f:function(){try{H||B.return==null||B.return()}finally{if(re)throw J}}}}function er(L,P){if(L){if(typeof L=="string")return Er(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Er(L,P):void 0}}function Er(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Ur(){var L,P,B,V,ee=this.context,J=(0,Tt.Z)(ee).getInstance(),H=Number.isInteger||function(Z){return typeof Z=="number"&&isFinite(Z)&&Math.floor(Z)===Z};function re(Z,ue){if(!Z)throw new Error("adaptation is not defined");if(!ue)throw new Error("type is not defined");if(Z.Representation_asArray&&Z.Representation_asArray.length){var ae=Be(Z.Representation_asArray[0]);if(ae&&ae.length>0&&In.Y.indexOf(ae[0].schemeIdUri)>=0)return ue===y.Z.IMAGE}if(Z.ContentComponent_asArray&&Z.ContentComponent_asArray.length>0){if(Z.ContentComponent_asArray.length>1)return ue===y.Z.MUXED;if(Z.ContentComponent_asArray[0].contentType===ue)return!0}var se=ue===y.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(ue);if(Z.Representation_asArray&&Z.Representation_asArray.length){var Q=Z.Representation_asArray[0].codecs;if(se.test(Q))return!0}if(Z.hasOwnProperty(v.Z.MIME_TYPE))return se.test(Z.mimeType);if(Z.Representation_asArray){for(var Me,be=0;be<Z.Representation_asArray.length;be++)if((Me=Z.Representation_asArray[be]).hasOwnProperty(v.Z.MIME_TYPE))return se.test(Me.mimeType)}return!1}function ce(Z){if(!Z)throw new Error("adaptation is not defined");if(Z.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||Z.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||Z.hasOwnProperty(v.Z.SEGMENT_LIST)||Z.hasOwnProperty(v.Z.SEGMENT_BASE))return!0;if(Z.Representation_asArray&&Z.Representation_asArray.length>0){var ue=Z.Representation_asArray[0];if(ue.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||ue.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||ue.hasOwnProperty(v.Z.SEGMENT_LIST)||ue.hasOwnProperty(v.Z.SEGMENT_BASE))return!0}return!1}function Se(Z){return re(Z,y.Z.VIDEO)}function Ee(Z){return re(Z,y.Z.TEXT)}function ie(Z){return re(Z,y.Z.IMAGE)}function me(Z){return Z&&Array.isArray(Z.Representation_asArray)&&Z.Representation_asArray.sort(function(ue,ae){return ue.bandwidth-ae.bandwidth}),Z}function ge(Z,ue){return Z&&Z.Period_asArray&&H(ue)&&Z.Period_asArray[ue]?Z.Period_asArray[ue].AdaptationSet_asArray:[]}function qe(Z){return Z&&Z.Period_asArray?Z.Period_asArray:[]}function De(Z){var ue=!1;return Z&&Z.hasOwnProperty("type")&&(ue=Z.type===v.Z.DYNAMIC),ue}function Be(Z){return Z&&Z.EssentialProperty_asArray&&Z.EssentialProperty_asArray.length?Z.EssentialProperty_asArray.map(function(ue){return{schemeIdUri:ue.schemeIdUri,value:ue.value}}):null}function ze(Z){if(!Z||!Z.S_asArray)return NaN;var ue=Z.S_asArray[0],ae=Z.S_asArray[1];return ue.hasOwnProperty("d")?ue.d:ae.t-ue.t}function _e(Z,ue){if(!Z)throw new Error("Period cannot be null or undefined");var ae=_i.DEFAULT_ID+"_"+ue;return Z.hasOwnProperty(v.Z.ID)&&Z.id.length>0&&Z.id!=="__proto__"&&(ae=Z.id),ae}function Le(Z,ue,ae){var se,Q=[];if(!Z)return Q;for(se=0;se<Z.length;se++){var Me=new Ou;if(Me.timescale=1,Me.representation=ue,!Z[se].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Me.schemeIdUri=Z[se].schemeIdUri,Z[se].hasOwnProperty(v.Z.TIMESCALE)&&(Me.timescale=Z[se].timescale),Z[se].hasOwnProperty(v.Z.VALUE)&&(Me.value=Z[se].value),Q.push(Me),Me.period=ae}return Q}function we(Z){var ue=[],ae=Z.BaseURL_asArray||[Z.baseUri],se=!1;return ae.some(function(Q){if(Q){var Me=new Qn,be=Q.__text||Q;return J.isRelative(be)&&(se=!0,Z.baseUri&&(be=J.resolve(be,Z.baseUri))),Me.url=be,Q.hasOwnProperty(v.Z.SERVICE_LOCATION)&&Q.serviceLocation.length?Me.serviceLocation=Q.serviceLocation:Me.serviceLocation=be,Q.hasOwnProperty(v.Z.DVB_PRIORITY)&&(Me.dvbPriority=Q[v.Z.DVB_PRIORITY]),Q.hasOwnProperty(v.Z.DVB_WEIGHT)&&(Me.dvbWeight=Q[v.Z.DVB_WEIGHT]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)&&(Me.availabilityTimeOffset=Q[v.Z.AVAILABILITY_TIME_OFFSET]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)&&(Me.availabilityTimeComplete=Q[v.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),ue.push(Me),se}}),ue}function je(Z){var ue=new sn;return ue.serverUrl=Z.__text,Z.hasOwnProperty(v.Z.DEFAULT_SERVICE_LOCATION)&&(ue.defaultServiceLocation=Z[v.Z.DEFAULT_SERVICE_LOCATION],ue.defaultServiceLocationArray=ue.defaultServiceLocation.split(" ")),Z.hasOwnProperty(v.Z.QUERY_BEFORE_START)&&(ue.queryBeforeStart=Z[v.Z.QUERY_BEFORE_START].toLowerCase()==="true"),Z.hasOwnProperty(v.Z.CLIENT_REQUIREMENT)&&(ue.clientRequirement=Z[v.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),ue}return L={getIsTypeOf:re,getIsText:Ee,getIsFragmented:ce,getProducerReferenceTimesForAdaptation:function(Z){var ue=Z&&Z.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)?Z[v.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(Z&&Z.hasOwnProperty(v.Z.REPRESENTATION_ASARRAY)?Z[v.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(se){var Q;se.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)&&ue.push.apply(ue,function(Me){if(Array.isArray(Me))return Er(Me)}(Q=se[v.Z.PRODUCERREFERENCETIME_ASARRAY])||function(Me){if(typeof Symbol<"u"&&Symbol.iterator in Object(Me))return Array.from(Me)}(Q)||er(Q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var ae=[];return ue.forEach(function(se){var Q=new tn;se.hasOwnProperty(v.Z.ID)&&(Q[v.Z.ID]=se[v.Z.ID],se.hasOwnProperty(v.Z.WALL_CLOCK_TIME)&&(Q[v.Z.WALL_CLOCK_TIME]=se[v.Z.WALL_CLOCK_TIME],se.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(Q[v.Z.PRESENTATION_TIME]=se[v.Z.PRESENTATION_TIME],se.hasOwnProperty(v.Z.INBAND)&&(Q[v.Z.INBAND]=se[v.Z.INBAND]!=="false"),se.hasOwnProperty(v.Z.TYPE)&&(Q[v.Z.TYPE]=se[v.Z.TYPE]),ae.push(Q))))}),ae},getLanguageForAdaptation:function(Z){var ue="";return Z&&Z.hasOwnProperty(v.Z.LANG)&&(ue=Z.lang),ue},getViewpointForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.VIEWPOINT_ASARRAY)&&Z[v.Z.VIEWPOINT_ASARRAY].length?Z[v.Z.VIEWPOINT_ASARRAY].map(function(ue){return new wt().init(ue)}):[]},getRolesForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ROLE_ASARRAY)&&Z[v.Z.ROLE_ASARRAY].length?Z[v.Z.ROLE_ASARRAY].map(function(ue){return new wt().init(ue)}):[]},getAccessibilityForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ACCESSIBILITY_ASARRAY)&&Z[v.Z.ACCESSIBILITY_ASARRAY].length?Z[v.Z.ACCESSIBILITY_ASARRAY].map(function(ue){return new wt().init(ue)}):[]},getAudioChannelConfigurationForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(ue){return new wt().init(ue)}):[]},getAudioChannelConfigurationForRepresentation:function(Z){return Z&&Z.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(ue){return new wt().init(ue)}):[]},getAdaptationForIndex:function(Z,ue,ae){var se=ge(ue,ae);return se.length>0&&H(Z)?se[Z]:null},getIndexForAdaptation:function(Z,ue,ae){if(!Z)return-1;for(var se=ge(ue,ae),Q=0;Q<se.length;Q++)if(mn(ee).getInstance().areEqual(se[Q],Z))return Q;return-1},getAdaptationForId:function(Z,ue,ae){var se,Q,Me=ge(ue,ae);for(se=0,Q=Me.length;se<Q;se++)if(Me[se].hasOwnProperty(v.Z.ID)&&Me[se].id===Z)return Me[se];return null},getAdaptationsForType:function(Z,ue,ae){var se,Q,Me=ge(Z,ue),be=[];for(se=0,Q=Me.length;se<Q;se++)re(Me[se],ae)&&be.push(me(Me[se]));return be},getRealPeriods:qe,getRealPeriodForIndex:function(Z,ue){var ae=qe(ue);return ae.length>0&&H(Z)?ae[Z]:null},getCodec:function(Z,ue,ae){var se=null;if(Z&&Z.Representation_asArray&&Z.Representation_asArray.length>0){var Q=H(ue)&&ue>=0&&ue<Z.Representation_asArray.length?Z.Representation_asArray[ue]:Z.Representation_asArray[0];Q&&(se=Q.mimeType+';codecs="'+Q.codecs+'"',ae&&Q.width!==void 0&&(se+=';width="'+Q.width+'";height="'+Q.height+'"'))}return se&&(se=se.replace(/\sprofiles=[^;]*/g,"")),se},getSelectionPriority:function(Z){try{var ue=Z&&Z.selectionPriority!==void 0?parseInt(Z.selectionPriority):1;return isNaN(ue)?1:ue}catch(ae){return 1}},getMimeType:function(Z){return Z&&Z.Representation_asArray&&Z.Representation_asArray.length>0?Z.Representation_asArray[0].mimeType:null},getKID:function(Z){return Z&&Z.hasOwnProperty(v.Z.CENC_DEFAULT_KID)?Z[v.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(Z){if(!Z||!Array.isArray(Z.Label_asArray))return[];for(var ue=[],ae=0;ae<Z.Label_asArray.length;ae++)ue.push({lang:Z.Label_asArray[ae].lang,text:Z.Label_asArray[ae].__text||Z.Label_asArray[ae]});return ue},getContentProtectionData:function(Z){return Z&&Z.hasOwnProperty(v.Z.CONTENTPROTECTION_ASARRAY)&&Z.ContentProtection_asArray.length!==0?Z.ContentProtection_asArray:null},getIsDynamic:De,getId:function(Z){return Z&&Z[v.Z.ID]||null},hasProfile:function(Z,ue){var ae=!1;return Z&&Z.profiles&&Z.profiles.length>0&&(ae=Z.profiles.indexOf(ue)!==-1),ae},getDuration:function(Z){return Z&&Z.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)?Z.mediaPresentationDuration:Z&&Z.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(Z){return Z&&Z.bandwidth?Z.bandwidth:NaN},getManifestUpdatePeriod:function(Z){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ae=NaN;return Z&&Z.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(ae=Z.minimumUpdatePeriod),isNaN(ae)?ae:Math.max(ae-ue,1)},getPublishTime:function(Z){return Z&&Z.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(Z[v.Z.PUBLISH_TIME]):null},getRepresentationCount:function(Z){return Z&&Array.isArray(Z.Representation_asArray)?Z.Representation_asArray.length:0},getBitrateListForAdaptation:function(Z){var ue=me(Z);return(ue&&Array.isArray(ue.Representation_asArray)?ue.Representation_asArray:[]).map(function(ae){return{bandwidth:ae.bandwidth,width:ae.width||0,height:ae.height||0,scanType:ae.scanType||null,id:ae.id||null}})},getRepresentationFor:function(Z,ue){return ue&&ue.Representation_asArray&&ue.Representation_asArray.length>0&&H(Z)?ue.Representation_asArray[Z]:null},getRepresentationsForAdaptation:function(Z){var ue,ae,se,Q,Me=[],be=function(at){if(at&&at.period&&H(at.period.index)){var Je=at.period.mpd.manifest.Period_asArray[at.period.index];if(Je&&Je.AdaptationSet_asArray&&H(at.index))return me(Je.AdaptationSet_asArray[at.index])}}(Z);if(be&&be.Representation_asArray){if(Z&&Z.period&&H(Z.period.index)){var ke=we(Z.period.mpd.manifest);ke&&(ae=ke[0])}for(var Re=0,pe=be.Representation_asArray.length;Re<pe;++Re){var Ne=be.Representation_asArray[Re],Ye=new Ji;if(Ye.index=Re,Ye.adaptation=Z,Ne.hasOwnProperty(v.Z.ID)&&(Ye.id=Ne.id),Ne.hasOwnProperty(v.Z.CODECS)&&(Ye.codecs=Ne.codecs),Ne.hasOwnProperty(v.Z.MIME_TYPE)&&(Ye.mimeType=Ne[v.Z.MIME_TYPE]),Ne.hasOwnProperty(v.Z.CODEC_PRIVATE_DATA)&&(Ye.codecPrivateData=Ne.codecPrivateData),Ne.hasOwnProperty(v.Z.BANDWITH)&&(Ye.bandwidth=Ne.bandwidth),Ne.hasOwnProperty(v.Z.WIDTH)&&(Ye.width=Ne.width),Ne.hasOwnProperty(v.Z.HEIGHT)&&(Ye.height=Ne.height),Ne.hasOwnProperty(v.Z.SCAN_TYPE)&&(Ye.scanType=Ne.scanType),Ne.hasOwnProperty(v.Z.MAX_PLAYOUT_RATE)&&(Ye.maxPlayoutRate=Ne.maxPlayoutRate),Ne.hasOwnProperty(v.Z.SEGMENT_BASE)?(ue=Ne.SegmentBase,Ye.segmentInfoType=v.Z.SEGMENT_BASE):Ne.hasOwnProperty(v.Z.SEGMENT_LIST)?(ue=Ne.SegmentList).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?Ye.segmentInfoType=v.Z.SEGMENT_TIMELINE:Ye.segmentInfoType=v.Z.SEGMENT_LIST:Ne.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)?((ue=Ne.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?Ye.segmentInfoType=v.Z.SEGMENT_TIMELINE:Ye.segmentInfoType=v.Z.SEGMENT_TEMPLATE,ue.hasOwnProperty(v.Z.INITIALIZATION_MINUS)&&(Ye.initialization=ue.initialization.split("$Bandwidth$").join(Ne.bandwidth).split("$RepresentationID$").join(Ne.id))):Ye.segmentInfoType=v.Z.BASE_URL,Ye.essentialProperties=Be(Ne),ue){if(ue.hasOwnProperty(v.Z.INITIALIZATION)){var dt=ue.Initialization;dt.hasOwnProperty(v.Z.SOURCE_URL)&&(Ye.initialization=dt.sourceURL),dt.hasOwnProperty(v.Z.RANGE)&&(Ye.range=dt.range)}else Ee(be)&&ce(be)&&be.mimeType&&be.mimeType.indexOf("application/mp4")===-1&&(Ye.range=0);ue.hasOwnProperty(v.Z.TIMESCALE)&&(Ye.timescale=ue.timescale),ue.hasOwnProperty(v.Z.DURATION)?Ye.segmentDuration=ue.duration/Ye.timescale:Ne.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)&&(ue=Ne.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)&&(Ye.segmentDuration=ze(ue.SegmentTimeline)/Ye.timescale),ue.hasOwnProperty(v.Z.MEDIA)&&(Ye.media=ue.media),ue.hasOwnProperty(v.Z.START_NUMBER)&&(Ye.startNumber=ue.startNumber),ue.hasOwnProperty(v.Z.INDEX_RANGE)&&(Ye.indexRange=ue.indexRange),ue.hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(Ye.presentationTimeOffset=ue.presentationTimeOffset/Ye.timescale),ue.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)?Ye.availabilityTimeOffset=ue.availabilityTimeOffset:ae&&ae.availabilityTimeOffset!==void 0&&(Ye.availabilityTimeOffset=ae.availabilityTimeOffset),ue.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)?Ye.availabilityTimeComplete=ue.availabilityTimeComplete!=="false":ae&&ae.availabilityTimeComplete!==void 0&&(Ye.availabilityTimeComplete=ae.availabilityTimeComplete)}Ye.MSETimeOffset=(Q=(se=Ye).presentationTimeOffset,se.adaptation.period.start-Q),Ye.path=[Z.period.index,Z.index,Re],Me.push(Ye)}}return Me},getAdaptationsForPeriod:function(Z){var ue,ae,se,Q=Z&&H(Z.index)?Z.mpd.manifest.Period_asArray[Z.index]:null,Me=[];if(Q&&Q.AdaptationSet_asArray)for(se=0;se<Q.AdaptationSet_asArray.length;se++)ae=Q.AdaptationSet_asArray[se],ue=new Or,ae.hasOwnProperty(v.Z.ID)&&(ue.id=ae.id),ue.index=se,ue.period=Z,re(ae,y.Z.MUXED)?ue.type=y.Z.MUXED:re(ae,y.Z.AUDIO)?ue.type=y.Z.AUDIO:Se(ae)?ue.type=y.Z.VIDEO:Ee(ae)?ue.type=y.Z.TEXT:ie(ae)?ue.type=y.Z.IMAGE:P.warn("Unknown Adaptation stream type"),Me.push(ue);return Me},getRegularPeriods:function(Z){var ue,ae,se=!!Z&&De(Z.manifest),Q=[],Me=null,be=null,ke=null,Re=null;for(ae=0,ue=Z&&Z.manifest&&Z.manifest.Period_asArray?Z.manifest.Period_asArray.length:0;ae<ue;ae++)(be=Z.manifest.Period_asArray[ae]).hasOwnProperty(v.Z.START)?(Re=new _i).start=be.start:Me!==null&&Me.hasOwnProperty(v.Z.DURATION)&&ke!==null?(Re=new _i).start=parseFloat((ke.start+ke.duration).toFixed(5)):ae!==0||se||((Re=new _i).start=0),ke!==null&&isNaN(ke.duration)&&(Re!==null?ke.duration=parseFloat((Re.start-ke.start).toFixed(5)):P.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Re!==null&&(Re.id=_e(be,ae),Re.index=ae,Re.mpd=Z,be.hasOwnProperty(v.Z.DURATION)&&(Re.duration=be.duration),ke&&(ke.nextPeriodId=Re.id),Q.push(Re),Me=be,ke=Re),be=null,Re=null;return Q.length===0||ke!==null&&isNaN(ke.duration)&&(ke.duration=parseFloat((function(pe){(function(){if(!B||!B.hasOwnProperty("error"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var Ne,Ye=De(pe.mpd.manifest);return pe.mpd.manifest.mediaPresentationDuration?Ne=pe.mpd.manifest.mediaPresentationDuration:pe.duration?Ne=pe.duration:Ye?Ne=Number.POSITIVE_INFINITY:B.error(new fe.Z(Ae.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",pe)),Ne}(ke)-ke.start).toFixed(5))),Q},getMpd:function(Z){var ue=new Di;return Z&&(ue.manifest=Z,Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)?ue.availabilityStartTime=new Date(Z.availabilityStartTime.getTime()):Z.loadedTime&&(ue.availabilityStartTime=new Date(Z.loadedTime.getTime())),Z.hasOwnProperty(v.Z.AVAILABILITY_END_TIME)&&(ue.availabilityEndTime=new Date(Z.availabilityEndTime.getTime())),Z.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(ue.minimumUpdatePeriod=Z.minimumUpdatePeriod),Z.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)&&(ue.mediaPresentationDuration=Z.mediaPresentationDuration),Z.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)&&(ue.suggestedPresentationDelay=Z.suggestedPresentationDelay),Z.hasOwnProperty(v.Z.TIMESHIFT_BUFFER_DEPTH)&&(ue.timeShiftBufferDepth=Z.timeShiftBufferDepth),Z.hasOwnProperty(v.Z.MAX_SEGMENT_DURATION)&&(ue.maxSegmentDuration=Z.maxSegmentDuration),Z.hasOwnProperty(v.Z.PUBLISH_TIME)&&(ue.publishTime=new Date(Z.publishTime))),ue},getEventsForPeriod:function(Z){var ue,ae,se=Z&&Z.mpd&&Z.mpd.manifest?Z.mpd.manifest:null,Q=se?se.Period_asArray:null,Me=Q&&Z&&H(Z.index)?Q[Z.index].EventStream_asArray:null,be=[];if(Me)for(ue=0;ue<Me.length;ue++){var ke=new Ou;if(ke.period=Z,ke.timescale=1,!Me[ue].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(ke.schemeIdUri=Me[ue][y.Z.SCHEME_ID_URI],Me[ue].hasOwnProperty(v.Z.TIMESCALE)&&(ke.timescale=Me[ue][v.Z.TIMESCALE]),Me[ue].hasOwnProperty(v.Z.VALUE)&&(ke.value=Me[ue][v.Z.VALUE]),Me[ue].hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(ke.presentationTimeOffset=Me[ue][v.Z.PRESENTATION_TIME_OFFSET]),ae=0;Me[ue].Event_asArray&&ae<Me[ue].Event_asArray.length;ae++){var Re=Me[ue].Event_asArray[ae],pe=new to;pe.presentationTime=0,pe.eventStream=ke,Re.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(pe.presentationTime=Re.presentationTime);var Ne=ke.presentationTimeOffset?ke.presentationTimeOffset/ke.timescale:0;pe.calculatedPresentationTime=pe.presentationTime/ke.timescale+Z.start-Ne,Re.hasOwnProperty(v.Z.DURATION)&&(pe.duration=Re.duration/ke.timescale),Re.hasOwnProperty(v.Z.ID)?pe.id=Re.id:pe.id=null,Re.Signal&&Re.Signal.Binary?pe.messageData=V.decodeArray(Re.Signal.Binary.toString()):pe.messageData=Re.messageData||Re.__cdata||Re.__text,be.push(pe)}}return be},getEssentialPropertiesForAdaptation:function(Z){var ue={};if(Z&&Z.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)){var ae,se=kn(Z.EssentialProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(ue[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){se.e(Me)}finally{se.f()}}return ue},getEssentialPropertiesAsArrayForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)&&Z.EssentialProperty_asArray.length?Z.EssentialProperty_asArray.map(function(ue){return new wt().init(ue)}):[]},getEssentialPropertiesForRepresentation:Be,getEventStreamForAdaptationSet:function(Z,ue,ae){var se,Q,Me;return Z&&Z.Period_asArray&&ue&&ue.period&&H(ue.period.index)&&(Q=Z.Period_asArray[ue.period.index])&&Q.AdaptationSet_asArray&&H(ue.index)&&(Me=Q.AdaptationSet_asArray[ue.index])&&(se=Me.InbandEventStream_asArray),Le(se,null,ae)},getEventStreamForRepresentation:function(Z,ue,ae){var se,Q,Me,be;return Z&&Z.Period_asArray&&ue&&ue.adaptation&&ue.adaptation.period&&H(ue.adaptation.period.index)&&(Q=Z.Period_asArray[ue.adaptation.period.index])&&Q.AdaptationSet_asArray&&H(ue.adaptation.index)&&(Me=Q.AdaptationSet_asArray[ue.adaptation.index])&&Me.Representation_asArray&&H(ue.index)&&(be=Me.Representation_asArray[ue.index])&&(se=be.InbandEventStream_asArray),Le(se,ue,ae)},getUTCTimingSources:function(Z){var ue=De(Z),ae=!!Z&&Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME),se=Z?Z.UTCTiming_asArray:null,Q=[];return(ue||ae)&&se&&se.forEach(function(Me){var be=new zi.Z;Me.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(be.schemeIdUri=Me.schemeIdUri,Me.hasOwnProperty(v.Z.VALUE)&&(be.value=Me.value.toString(),Q.push(be)))}),Q},getBaseURLsFromElement:we,getRepresentationSortFunction:function(){return function(Z,ue){return Z.bandwidth-ue.bandwidth}},getContentSteering:function(Z){if(Z&&Z.hasOwnProperty(v.Z.CONTENT_STEERING_AS_ARRAY))return je(Z[v.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(Z){return Z&&Z.hasOwnProperty(v.Z.LOCATION_AS_ARRAY)?Z[v.Z.LOCATION_AS_ARRAY].map(function(ue){var ae=ue.__text||ue,se=ue.hasOwnProperty(v.Z.SERVICE_LOCATION)?ue[v.Z.SERVICE_LOCATION]:null;return new Zn(ae,se)}):[]},getPatchLocation:function(Z){return Z&&Z.hasOwnProperty(v.Z.PATCH_LOCATION_AS_ARRAY)?Z[v.Z.PATCH_LOCATION_AS_ARRAY].map(function(ue){var ae=ue.__text||ue,se=ue.hasOwnProperty(v.Z.SERVICE_LOCATION)?ue[v.Z.SERVICE_LOCATION]:null,Q=ue.hasOwnProperty(v.Z.TTL)?1e3*parseFloat(ue[v.Z.TTL]):NaN;return new Cn(ae,se,Q)}):[]},getSuggestedPresentationDelay:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)?Z.suggestedPresentationDelay:null},getAvailabilityStartTime:function(Z){return Z&&Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)&&Z.availabilityStartTime!==null?Z.availabilityStartTime.getTime():null},getServiceDescriptions:function(Z){var ue=[];if(Z&&Z.hasOwnProperty(v.Z.SERVICE_DESCRIPTION)){var ae,se=kn(Z.ServiceDescription_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value,Me=null,be=null,ke=null,Re=null,pe=null,Ne=null,Ye=null;for(var dt in Q)Q.hasOwnProperty(dt)&&(dt===v.Z.ID?Me=Q[dt]:dt===v.Z.SERVICE_DESCRIPTION_SCOPE?be=Q[dt].schemeIdUri:dt===v.Z.SERVICE_DESCRIPTION_LATENCY?ke={target:parseInt(Q[dt].target),max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),referenceId:parseInt(Q[dt].referenceId)}:dt===v.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?Re={max:parseFloat(Q[dt].max),min:parseFloat(Q[dt].min)}:dt===v.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?pe={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target),type:Q[dt].type,maxQualityDifference:parseInt(Q[dt].maxQualityDifference)}:dt===v.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?Ne={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target)}:dt===v.Z.CONTENT_STEERING&&(Ye=je(Q[dt])));ue.push({id:Me,schemeIdUri:be,latency:ke,playbackRate:Re,operatingQuality:pe,operatingBandwidth:Ne,contentSteering:Ye})}}catch(at){se.e(at)}finally{se.f()}}return ue},getSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(v.Z.SEGMENT_ALIGNMENT))&&Z[v.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(v.Z.SUB_SEGMENT_ALIGNMENT))&&Z[v.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(Z){var ue={};if(Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,se=kn(Z.SupplementalProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(ue[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){se.e(Me)}finally{se.f()}}return ue},getSupplementalPropertiesAsArrayForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&Z.SupplementalProperty_asArray.length?Z.SupplementalProperty_asArray.map(function(ue){return new wt().init(ue)}):[]},getSupplementalPropertiesForRepresentation:function(Z){var ue={};if(Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,se=kn(Z.SupplementalProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(ue[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){se.e(Me)}finally{se.f()}}return ue},getSupplementalPropertiesAsArrayForRepresentation:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&Z.SupplementalProperty_asArray.length?Z.SupplementalProperty_asArray.map(function(ue){return new wt().init(ue)}):[]},setConfig:function(Z){Z&&(Z.errHandler&&(B=Z.errHandler),Z.BASE64&&(V=Z.BASE64))}},P=(0,x.Z)(ee).getInstance().getLogger(L),L}Ur.__dashjs_factory_name="DashManifestModel";var Vn=U.Z.getSingletonFactory(Ur),rn=w(703);function cn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=function(ce,Se){if(ce){if(typeof ce=="string")return bn(ce,Se);var Ee=Object.prototype.toString.call(ce).slice(8,-1);return Ee==="Object"&&ce.constructor&&(Ee=ce.constructor.name),Ee==="Map"||Ee==="Set"?Array.from(ce):Ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ee)?bn(ce,Se):void 0}}(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(ce){throw ce},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,re=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var ce=B.next();return H=ce.done,ce},e:function(ce){re=!0,J=ce},f:function(){try{H||B.return==null||B.return()}finally{if(re)throw J}}}}function bn(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Jn(){var L,P,B,V,ee,J,H,re,ce,Se,Ee=this.context,ie=(0,m.Z)(Ee).getInstance(),me=(0,Ze.Z)(Ee).getInstance();function ge(){B={pr:1,nor:null,st:null,sf:null,sid:"".concat(rn.Z.generateUuid()),cid:null},ce={},re={},Se={},De()}function qe(){De()}function De(){if(J){var Q=J.getStreamController();if(Q&&typeof Q.getActiveStream=="function"){var Me=Q.getActiveStream();Me&&(H=Me.getProcessors())}}}function Be(Q,Me){var be,ke={},Re=cn(Me);try{for(Re.s();!(be=Re.n()).done;){var pe=be.value;Q[pe]&&(ke[pe]=Q[pe])}}catch(Ne){Re.e(Ne)}finally{Re.f()}return ke}function ze(Q){var Me=me.get().streaming.cmcd.enabledKeys;return Q.filter(function(be){return Me.includes(be)})}function _e(Q){try{return Q.type===it.w.MPD_TYPE?((be=Le()).ot="m",be):Q.type===it.w.MEDIA_SEGMENT_TYPE?(Me=Q.mediaType,Se.hasOwnProperty(Me)||(Se[Me]=!1),re.hasOwnProperty(Me)||(re[Me]=!1),ce.hasOwnProperty(Me)||(ce[Me]=!1),function(ke){var Re,pe=Le(),Ne=function(Ft){try{var An=Ft.quality,nt=Ft.mediaInfo.bitrateList;return parseInt(nt[An].bandwidth/1e3)}catch(vt){return null}}(ke),Ye=function(Ft){try{return isNaN(Ft.duration)?NaN:Math.round(1e3*Ft.duration)}catch(An){return null}}(ke),dt=function(Ft){try{return 100*parseInt(V.getThroughputHistory().getSafeAverageThroughput(Ft)/100)}catch(An){return null}}(ke.mediaType),at=function(Ft){try{var An=B.pr,nt=ee.getCurrentBufferLevel(Ft);return isNaN(An)||isNaN(nt)?null:100*parseInt(nt/An*10)}catch(vt){return null}}(ke.mediaType),Je=we(ke.mediaType),ht=function(Ft){try{var An=V.getTopBitrateInfoFor(Ft);return Math.round(An.bitrate/1e3)}catch(nt){return null}}(ke.mediaType),Bt=B.pr,Gt=function(Ft){if(H&&H.length!==0){var An,nt=cn(H);try{for(nt.s();!(An=nt.n()).done;){var vt=An.value;if(vt.getType()===Ft)return vt.probeNextRequest()}}catch(Wt){nt.e(Wt)}finally{nt.f()}}}(ke.mediaType);ke.mediaType===y.Z.VIDEO&&(Re="v"),ke.mediaType===y.Z.AUDIO&&(Re="a"),ke.mediaType===y.Z.TEXT&&(Re=ke.mediaInfo.mimeType==="application/mp4"?"tt":"c");var kt=me.get().streaming.cmcd.rtp;return kt||(kt=function(Ft){try{var An=J.getPlaybackRate();An||(An=1);var nt=Ft.quality,vt=Ft.mediaType,Wt=Ft.mediaInfo,Nt=Ft.duration;if(!Wt)return NaN;var en=we(vt);en===0&&(en=500);var Jt=Wt.bitrateList[nt].bandwidth*Nt/1e3/(en/An/1e3),Yt=me.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(me.get().streaming.cmcd.rtpSafetyFactor)?me.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Jt*Yt/100)+1)}catch(Dn){return NaN}}(ke)),isNaN(kt)||(pe.rtp=kt),Gt&&(ke.url!==Gt.url?pe.nor=encodeURIComponent(rn.Z.getRelativeUrl(ke.url,Gt.url)):Gt.range&&(pe.nrr=Gt.range)),Ne&&(pe.br=Ne),Re&&(pe.ot=Re),isNaN(Ye)||(pe.d=Ye),isNaN(dt)||(pe.mtp=dt),isNaN(at)||(pe.dl=at),isNaN(Je)||(pe.bl=Je),isNaN(ht)||(pe.tb=ht),isNaN(Bt)||Bt===1||(pe.pr=Bt),ce[ke.mediaType]&&(pe.bs=!0,ce[ke.mediaType]=!1),!re[ke.mediaType]&&Se[ke.mediaType]||(pe.su=!0,re[ke.mediaType]=!1,Se[ke.mediaType]=!0),pe}(Q)):Q.type===it.w.INIT_SEGMENT_TYPE?function(){var ke=Le();return ke.ot="i",ke.su=!0,ke}():Q.type===it.w.OTHER_TYPE||Q.type===it.w.XLINK_EXPANSION_TYPE?function(){var ke=Le();return ke.ot="o",ke}():Q.type===it.w.LICENSE?function(ke){var Re=Le();return Re.ot="k",Re}():null}catch(ke){return null}var Me,be}function Le(){var Q={},Me=me.get().streaming.cmcd.cid?me.get().streaming.cmcd.cid:B.cid;return Q.v=1,Q.sid=me.get().streaming.cmcd.sid?me.get().streaming.cmcd.sid:B.sid,Q.sid="".concat(Q.sid),Me&&(Q.cid="".concat(Me)),isNaN(B.pr)||B.pr===1||B.pr===null||(Q.pr=B.pr),B.st&&(Q.st=B.st),B.sf&&(Q.sf=B.sf),Q}function we(Q){try{var Me=ee.getCurrentBufferLevel(Q);return isNaN(Me)?null:100*parseInt(10*Me)}catch(be){return null}}function je(Q){try{B.pr=Q.playbackRate}catch(Me){}}function Z(Q){try{var Me=L.getIsDynamic(Q.data)?"l":"v",be=Q.protocol&&Q.protocol==="MSS"?"s":"d";B.st="".concat(Me),B.sf="".concat(be)}catch(ke){}}function ue(Q){try{Q.state&&Q.mediaType&&Q.state===_.Z.BUFFER_EMPTY&&(ce[Q.mediaType]||(ce[Q.mediaType]=!0),re[Q.mediaType]||(re[Q.mediaType]=!0))}catch(Me){}}function ae(){for(var Q in ce)ce.hasOwnProperty(Q)&&(ce[Q]=!0);for(var Me in re)re.hasOwnProperty(Me)&&(re[Me]=!0)}function se(Q){try{if(!Q)return null;var Me=Object.keys(Q).sort(function(Re,pe){return Re.localeCompare(pe)}),be=Me.length,ke=Me.reduce(function(Re,pe,Ne){return pe==="v"&&Q[pe]===1||(typeof Q[pe]=="string"&&pe!=="ot"&&pe!=="sf"&&pe!=="st"?Re+="".concat(pe,"=").concat(JSON.stringify(Q[pe])):Re+="".concat(pe,"=").concat(Q[pe]),Ne<be-1&&(Re+=",")),Re},"");return(ke=ke.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(Re){return null}}return P={getQueryParameter:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Me=_e(Q),be=function(Re){try{var pe=me.get().streaming.cmcd.enabledKeys;return Object.keys(Re).filter(function(Ne){return pe.includes(Ne)}).reduce(function(Ne,Ye){return Ne[Ye]=Re[Ye],Ne},{})}catch(Ne){return Re}}(Me),ke=se(be);return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Me,cmcdString:ke}),{key:"CMCD",value:ke}}return null}catch(Re){return null}},getHeaderParameters:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Me=_e(Q),be=Be(Me,ze(["br","d","ot","tb"])),ke=Be(Me,ze(["bl","dl","mtp","nor","nrr","su"])),Re=Be(Me,ze(["bs","rtp"])),pe=Be(Me,ze(["cid","pr","sf","sid","st","v"])),Ne={"CMCD-Object":se(be),"CMCD-Request":se(ke),"CMCD-Status":se(Re),"CMCD-Session":se(pe)};return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Me,headers:Ne}),Ne}return null}catch(Ye){return null}},setConfig:function(Q){Q&&(Q.abrController&&(V=Q.abrController),Q.dashMetrics&&(ee=Q.dashMetrics),Q.playbackController&&(J=Q.playbackController))},reset:function(){ie.off(_.Z.PLAYBACK_RATE_CHANGED,je,this),ie.off(_.Z.MANIFEST_LOADED,Z,this),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,ue,P),ie.off(_.Z.PLAYBACK_SEEKED,ae,P),ge()},initialize:function(){ie.on(_.Z.PLAYBACK_RATE_CHANGED,je,P),ie.on(_.Z.MANIFEST_LOADED,Z,P),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,ue,P),ie.on(_.Z.PLAYBACK_SEEKED,ae,P),ie.on(_.Z.PERIOD_SWITCH_COMPLETED,qe,P)}},L=Vn(Ee).getInstance(),ge(),P}Jn.__dashjs_factory_name="CmcdModel";var ar=U.Z.getSingletonFactory(Jn);function br(L){return br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},br(L)}function Lr(L,P){Lr=function(re,ce){return new J(re,void 0,ce)};var B=no(RegExp),V=RegExp.prototype,ee=new WeakMap;function J(re,ce,Se){var Ee=B.call(this,re,ce);return ee.set(Ee,Se||ee.get(re)),Ee}function H(re,ce){var Se=ee.get(ce);return Object.keys(Se).reduce(function(Ee,ie){return Ee[ie]=re[Se[ie]],Ee},Object.create(null))}return Yi(J,B),J.prototype.exec=function(re){var ce=V.exec.call(this,re);return ce&&(ce.groups=H(ce,this)),ce},J.prototype[Symbol.replace]=function(re,ce){if(typeof ce=="string"){var Se=ee.get(this);return V[Symbol.replace].call(this,re,ce.replace(/\$<([^>]+)>/g,function(ie,me){return"$"+Se[me]}))}if(typeof ce=="function"){var Ee=this;return V[Symbol.replace].call(this,re,function(){var ie=[];return ie.push.apply(ie,arguments),br(ie[ie.length-1])!=="object"&&ie.push(H(ie,Ee)),ce.apply(this,ie)})}return V[Symbol.replace].call(this,re,ce)},Lr.apply(this,arguments)}function Yi(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(P&&P.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),P&&hi(L,P)}function no(L){var P=typeof Map=="function"?new Map:void 0;return no=function(B){if(B===null||(V=B,Function.toString.call(V).indexOf("[native code]")===-1))return B;var V;if(typeof B!="function")throw new TypeError("Super expression must either be null or a function");if(P!==void 0){if(P.has(B))return P.get(B);P.set(B,ee)}function ee(){return Br(B,arguments,vi(this).constructor)}return ee.prototype=Object.create(B.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),hi(ee,B)},no(L)}function Br(L,P,B){return Br=qr()?Reflect.construct:function(V,ee,J){var H=[null];H.push.apply(H,ee);var re=new(Function.bind.apply(V,H));return J&&hi(re,J.prototype),re},Br.apply(null,arguments)}function qr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}function hi(L,P){return hi=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},hi(L,P)}function vi(L){return vi=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},vi(L)}var Ao="static",ro="dynamic",na="cmsd-",Ci=na+Ao,Il=na+ro,lu="stream",Ec=["mb","st","sf","v"],xf={video:"v",audio:"a",text:"tt",stream:lu},si=/^[-0-9]/;function Os(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){B={},V={}}function re(ge){ge&&Object.keys(ge).forEach(function(qe){Ec.includes(qe)||delete ge[qe]})}function ce(ge){return!ge||ge.toLowerCase()!=="false"&&(si.test(ge)?parseInt(ge,10):ge.replace(/["]+/g,""))}function Se(ge){try{for(var qe={},De=ge.split(","),Be=0;Be<De.length;Be++){var ze=De[Be].split("="),_e=ze[0],Le=ce(ze[1]);qe[_e]=Le}return qe}catch(we){P.error("Failed to parse CMSD-Static response header value:",we)}}function Ee(ge){try{for(var qe={},De=ge.split(","),Be=De[De.length-1].split(";"),ze=1;ze<Be.length;ze++){var _e=Be[ze].split("="),Le=_e[0],we=ce(_e[1]);qe[Le]=we}return qe}catch(je){return P.error("Failed to parse CMSD-Dynamic response header value:",je),[]}}function ie(ge){return xf[ge]||"o"}function me(ge,qe,De){var Be=ge===Ao?B:V,ze=Be[qe]||{},_e=Be[lu]||{};return ze[De]||_e[De]}return L={setConfig:function(){},initialize:function(){},reset:function(){H()},parseResponseHeaders:function(ge,qe){for(var De=null,Be=null,ze=ge.split("\r\n"),_e=ze.length-1;_e>=0;_e--){var Le=ze[_e].match(Lr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(Le&&Le.groups){var we=Le.groups.key.toLowerCase(),je=Le.groups.value;switch(we){case Ci:De=Se(je),J.trigger(T.Z.CMSD_STATIC_HEADER,De);break;case Il:Be||(Be=Ee(je))}}}var Z=lu;return De&&De.ot?Z=De.ot:qe&&(Z=ie(qe)),re(B[Z]),re(V[Z]),De&&(B[Z]=Object.assign(B[Z]||{},De)),Be&&(V[Z]=Object.assign(V[Z]||{},Be)),{static:De,dynamic:Be}},getMaxBitrate:function(ge){var qe=ie(ge);return me(ro,qe,"mb")||-1},getEstimatedThroughput:function(ge){var qe=ie(ge);return me(ro,qe,"etp")||null},getResponseDelay:function(ge){var qe=ie(ge);return me(ro,qe,"rd")||null},getRoundTripTime:function(ge){var qe=ie(ge);return me(ro,qe,"rtt")||null}},P=(0,x.Z)(ee).getInstance().getLogger(L),H(),L}Os.__dashjs_factory_name="CmsdModel";var _n=U.Z.getSingletonFactory(Os);function Xn(){var L,P,B=this.context,V={};function ee(){P=(0,x.Z)(B).getInstance().getLogger(L)}function J(re){for(var ce={},Se=0,Ee=0,ie=0,me=0,ge=re.length,qe=0;qe<ge;++qe)Se+=re[qe].chunkDownloadTimeRelativeMS,Ee+=re[qe].bufferLevel,ie+=re[qe].chunkDownloadTimeRelativeMS*re[qe].bufferLevel,me+=re[qe].chunkDownloadTimeRelativeMS*re[qe].chunkDownloadTimeRelativeMS;return ce.m=(ie-Se*Ee/ge)/(me-Se*Se/ge),ce.b=Ee/ge-ce.m*Se/ge,function(De){return ce.m*De+ce.b}}function H(re){var ce,Se=!0,Ee=re.reduce(function(ie,me){return ie+me.bufferLevelAtSegmentEnd},0)/re.length;return re.forEach(function(ie){Math.abs(ie.bufferLevelAtSegmentEnd/ie.bufferLevelAtSegmentStart)<.95&&(Se=!1),ie.bufferLevelAtSegmentEnd/Ee<.8&&(Se=!1),ce?ce>ie.bitrate&&(Se=!1):ce=ie.bitrate}),Se}return L={setup:ee,addMeasurement:function(re,ce,Se,Ee,ie){re&&re.mediaType&&!V[re.mediaType]&&(V[re.mediaType]=[]);var me=re.mediaInfo.bitrateList.find(function(ge){return ge.id===re.representationId});V[re.mediaType].push({index:re.index,repId:re.representationId,mediaType:re.mediaType,requestTimeMS:Ee,adjustedAvailabilityStartTimeMS:re.availabilityStartTime.getTime(),segDurationMS:1e3*re.duration,chunksDurationMS:Se.reduce(function(ge,qe){return ge+qe.chunkDownloadDurationMS},0),segmentBytes:Se.reduce(function(ge,qe){return ge+qe.chunkBytes},0),bitrate:me&&me.bandwidth,bitrateList:re.mediaInfo.bitrateList,chunkMeasurements:Se,fetchDownloadDurationMS:ce,throughputCapacityDelayMS:ie,getEstimatedBufferLevel:J(Se.slice(1))}),V[re.mediaType].length>10&&V[re.mediaType].shift()},getThroughputCapacityDelayMS:function(re,ce){var Se=V[re.mediaType]&&V[re.mediaType].slice(-3);return!Se||Se.length<3?0:H(Se)?ce/4>250?250:ce/4:0},getEstimatedDownloadDurationMS:function(re){var ce=V[re.mediaType].slice(-1).pop(),Se=V[re.mediaType].slice(-3),Ee=ce.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;ce.bufferLevelAtSegmentStart=ce.getEstimatedBufferLevel(Ee/2),ce.bufferLevelAtSegmentEnd=ce.getEstimatedBufferLevel(Ee);var ie=H(Se),me=ie?.6:.8;if(ce.isBufferStable&&1.05*ce.segDurationMS<ce.fetchDownloadDurationMS)return ce.fetchDownloadDurationMS;if(!ie||ce.segDurationMS<ce.fetchDownloadDurationMS||ce.adjustedAvailabilityStartTimeMS<=ce.requestTimeMS+ce.throughputCapacityDelayMS-ce.segDurationMS)return .8*ce.fetchDownloadDurationMS;for(var ge=ce.requestTimeMS+ce.throughputCapacityDelayMS-ce.adjustedAvailabilityStartTimeMS,qe=0,De=0,Be=0,ze=0;ze<ce.chunkMeasurements.length;ze++){var _e=ce.chunkMeasurements[ze];if(ge<De+_e.chunkDownloadDurationMS)break;De+=_e.chunkDownloadDurationMS,qe+=_e.chunkBytes,Be++}if(ge<0&&P.warn("request time was before adjusted availibitly start time"),qe&&De&&Be>.2*ce.chunkMeasurements.length){var Le=qe/De,we=ce.segmentBytes/Le;return ce.fetchDownloadDurationMS<we?ce.fetchDownloadDurationMS*me:we*me}var je=ce.bitrate;return ce.bitrateList.some(function(Z){if(Z.bandwidth>ce.bitrate)return je=Z.bandwidth,!0}),je===ce.bitrate?ce.fetchDownloadDurationMS*me:me*ce.segmentBytes*8*1e3/je}},ee(),L}Xn.__dashjs_factory_name="LowLatencyThroughputModel";var hr=U.Z.getSingletonFactory(Xn),ti=w(5717);function Mr(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Bi(L){L=L||{};var P,B,V,ee,J,H,re,ce,Se,Ee,ie,me=this.context,ge=L.errHandler,qe=L.dashMetrics,De=L.mediaPlayerModel,Be=L.requestModifier,ze=L.boxParser,_e=L.errors,Le=L.requestTimeout||0,we=(0,m.Z)(me).getInstance(),je=(0,Ze.Z)(me).getInstance();function Z(ue,ae){var se,Q=ue.request,Me=[],be=!0,ke=!0,Re=new Date,pe=Re,Ne=0,Ye=null,dt=null;if(!Be||!qe||!ge)throw new Error("config object is not correct or missing");var at,Je=function(en){Q.requestStartDate=Re,Q.requestEndDate=new Date,Q.firstByteDate=Q.firstByteDate||Re,Q.fileLoaderType=dt;var Jt=se.response?se.response.responseURL:null,Yt=se.response?se.response.status:null,Dn=se.response&&se.response.getAllResponseHeaders?se.response.getAllResponseHeaders():se.response?se.response.responseHeaders:null,Nn=Dn&&je.get().streaming.cmsd&&je.get().streaming.cmsd.enabled?re.parseResponseHeaders(Dn,Q.mediaType):null;qe.addHttpRequest(Q,Jt,Yt,Dn,en?Me:null,Nn)},ht=function(en){ke=!1,Je(en),Q.type===it.w.MPD_TYPE&&(qe.addManifestUpdate(Q),we.trigger(T.Z.MANIFEST_LOADING_FINISHED,{request:Q}))},Bt=function(){if(Ye&&(clearTimeout(Ye),Ye=null),B.indexOf(se)!==-1&&(B.splice(B.indexOf(se),1),ke))if(ht(!1),ae>0){try{je.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&Q.type===it.w.MEDIA_SEGMENT_TYPE&&De.getRetryAttemptsForType(it.w.MEDIA_SEGMENT_TYPE)===ae&&we.trigger(T.Z.ATTEMPT_BACKGROUND_SYNC)}catch(Jt){}ae--;var en={config:ue};ee.push(en),en.timeout=setTimeout(function(){ee.indexOf(en)!==-1&&(ee.splice(ee.indexOf(en),1),Z(ue,ae))},De.getRetryIntervalsForType(Q.type))}else{if(Q.type===it.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;ge.error(new fe.Z(J[Q.type],Q.url+" is not available",{request:Q,response:se.response})),ue.error&&ue.error(Q,"error",se.response.statusText,se.response),ue.complete&&ue.complete(Q,se.response.statusText)}};Q.hasOwnProperty("availabilityTimeComplete")&&Q.availabilityTimeComplete===!1&&window.fetch&&Q.responseType==="arraybuffer"&&Q.type===it.w.MEDIA_SEGMENT_TYPE?((at=Pr(me).create({requestModifier:Be,lowLatencyThroughputModel:Se,boxParser:ze})).setup({dashMetrics:qe}),dt=y.Z.FILE_LOADER_TYPES.FETCH):(at=(0,nn.Z)(me).create({requestModifier:Be}),dt=y.Z.FILE_LOADER_TYPES.XHR);var Gt=null,kt=Be.modifyRequestURL?Be.modifyRequestURL(Q.url):Q.url;if(je.get().streaming.cmcd&&je.get().streaming.cmcd.enabled){var Ft=je.get().streaming.cmcd.mode;if(Ft===y.Z.CMCD_MODE_QUERY){var An=function(en){try{var Jt=[],Yt=H.getQueryParameter(en);return Yt&&Jt.push(Yt),Jt}catch(Dn){return[]}}(Q);kt=rn.Z.addAditionalQueryParameterToUrl(kt,An)}else Ft===y.Z.CMCD_MODE_HEADER&&(Gt=H.getHeaderParameters(Q))}var nt=ce.getXHRWithCredentialsForType(Q.type);if(Q.queryParams){var vt=Object.keys(Q.queryParams).map(function(en){return{key:en,value:Q.queryParams[en]}});kt=rn.Z.addAditionalQueryParameterToUrl(kt,vt)}Q.url=kt,se={url:kt,method:it.w.GET,withCredentials:nt,request:Q,onload:function(){se.response.status>=200&&se.response.status<=299&&(ht(!0),ue.success&&ue.success(se.response.response,se.response.statusText,se.response.responseURL),ue.complete&&ue.complete(Q,se.response.statusText))},onend:Bt,onerror:Bt,progress:function(en){var Jt=new Date;be&&(be=!1,(!en.lengthComputable||en.lengthComputable&&en.total!==en.loaded)&&(Q.firstByteDate=Jt)),en.lengthComputable&&(Q.bytesLoaded=en.loaded,Q.bytesTotal=en.total),en.noTrace||(Me.push({s:pe,d:en.time?en.time:Jt.getTime()-pe.getTime(),b:[en.loaded?en.loaded-Ne:0]}),pe=Jt,Ne=en.loaded),Ye&&(clearTimeout(Ye),Ye=null),je.get().streaming.fragmentRequestProgressTimeout>0&&(Ye=setTimeout(function(){Ee.warn("Abort request "+se.url+" due to progress timeout"),se.response.onabort=null,se.loader.abort(se),Bt()},je.get().streaming.fragmentRequestProgressTimeout)),ue.progress&&en&&ue.progress(en)},onabort:function(){Je(!0),Ye&&(clearTimeout(Ye),Ye=null),ue.abort&&ue.abort(Q)},ontimeout:function(en){var Jt;if(en.lengthComputable){var Yt=en.loaded/en.total*100;Jt="Request timeout: loaded: "+en.loaded+", out of: "+en.total+" : "+Yt.toFixed(3)+"% Completed"}else Jt="Request timeout: non-computable download size";Ee.warn(Jt)},loader:at,timeout:Le,headers:Gt};var Wt=new Date().getTime();if(isNaN(Q.delayLoadingTime)||Wt>=Q.delayLoadingTime)B.push(se),at.load(se);else{var Nt={httpRequest:se};V.push(Nt),Nt.delayTimeout=setTimeout(function(){if(V.indexOf(Nt)!==-1){V.splice(V.indexOf(Nt),1);try{Re=new Date,pe=Re,B.push(Nt.httpRequest),at.load(Nt.httpRequest)}catch(en){Nt.httpRequest.onerror()}}},Q.delayLoadingTime-Wt)}}return P={load:function(ue){ue.request?Z(ue,De.getRetryAttemptsForType(ue.request.type)):ue.error&&ue.error(ue.request,"error")},abort:function(){ee.forEach(function(ue){clearTimeout(ue.timeout),ue.config.request&&ue.config.abort&&ue.config.abort(ue.config.request)}),ee=[],V.forEach(function(ue){return clearTimeout(ue.delayTimeout)}),V=[],B.forEach(function(ue){ue.request.type!==it.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(ue.onloadend=ue.onerror=ue.onprogress=void 0,ue.loader.abort(ue))}),B=[]}},Ee=(0,x.Z)(me).getInstance().getLogger(P),B=[],V=[],ee=[],H=ar(me).getInstance(),re=_n(me).getInstance(),Se=hr(me).getInstance(),ce=(0,ti.Z)(me).getInstance(),Mr(ie={},it.w.MPD_TYPE,_e.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Mr(ie,it.w.XLINK_EXPANSION_TYPE,_e.DOWNLOAD_ERROR_ID_XLINK_CODE),Mr(ie,it.w.INIT_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Mr(ie,it.w.MEDIA_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,it.w.INDEX_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,it.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,it.w.OTHER_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),J=ie,P}Bi.__dashjs_factory_name="HTTPLoader";var Xr=U.Z.getClassFactory(Bi);function ra(){var L;function P(){L={}}function B(){P()}return B(),{getLoader:function(V){for(var ee in L)if(L.hasOwnProperty(ee)&&V.startsWith(ee))return L[ee];return Xr},registerLoader:function(V,ee){L[V]=ee},unregisterLoader:function(V){L[V]&&delete L[V]},unregisterAllLoader:P,reset:B}}ra.__dashjs_factory_name="SchemeLoaderFactory";var Pi=U.Z.getSingletonFactory(ra);function ui(L){L=L||{};var P,B,V=this.context;return P=Pi(V).getInstance(),{load:function(ee){if(!B){var J=P.getLoader(ee&&ee.request?ee.request.url:null);B=J(V).create({errHandler:L.errHandler,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,dashMetrics:L.dashMetrics,boxParser:L.boxParser?L.boxParser:null,constants:L.constants?L.constants:null,dashConstants:L.dashConstants?L.dashConstants:null,urlUtils:L.urlUtils?L.urlUtils:null,requestTimeout:isNaN(L.requestTimeout)?0:L.requestTimeout,errors:L.errors})}B.load(ee)},abort:function(){B&&B.abort()}}}ui.__dashjs_factory_name="URLLoader";var Io=U.Z.getClassFactory(ui);function Wi(L){return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Wi(L)}function qo(L,P){return qo=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},qo(L,P)}function ia(L,P){return!P||Wi(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function pt(L){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},pt(L)}var oa=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&qo(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=pt(P);if(B){var re=pt(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return ia(this,J)});function ee(J){var H;return function(re,ce){if(!(re instanceof ce))throw new TypeError("Cannot call a class as a function")}(this,ee),(H=V.call(this,J)).checkForExistenceOnly=!0,H}return ee}(j.Z);function Ls(L){L=L||{};var P,B,V=this.context,ee=L.eventBus,J=L.events,H=L.urlUtils,re=L.errors,ce=L.streamId;return P={checkForExistence:function(Se){var Ee=function(me){ee.trigger(J.CHECK_FOR_EXISTENCE_COMPLETED,{request:Se,exists:me})};if(Se){var ie=new oa(Se.url);B.load({request:ie,success:function(){Ee(!0)},error:function(){Ee(!1)}})}else Ee(!1)},load:function(Se){var Ee=function(ie,me){ee.trigger(J.LOADING_COMPLETED,{request:Se,response:ie||null,error:me||null,sender:P})};Se?B.load({request:Se,progress:function(ie){ee.trigger(J.LOADING_PROGRESS,{request:Se,stream:ie.stream,streamId:ce}),ie.data&&ee.trigger(J.LOADING_DATA_PROGRESS,{request:Se,response:ie.data||null,error:null,sender:P})},success:function(ie){Ee(ie)},error:function(ie,me,ge){Ee(void 0,new fe.Z(re.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ge,me))},abort:function(ie){ie&&ee.trigger(J.LOADING_ABANDONED,{mediaType:ie.mediaType,request:ie,sender:P})}}):Ee(void 0,new fe.Z(re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){B&&B.abort()},reset:function(){B&&(B.abort(),B=null)}},B=Io(V).create({errHandler:L.errHandler,errors:re,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:H,constants:y.Z,boxParser:L.boxParser,dashConstants:L.dashConstants,requestTimeout:L.settings.get().streaming.fragmentRequestTimeout}),P}Ls.__dashjs_factory_name="FragmentLoader";var pr=U.Z.getClassFactory(Ls);function bo(){return{modifyResponseAsync:function(L){return Promise.resolve(L)}}}bo.__dashjs_factory_name="SegmentResponseModifier";var cu=U.Z.getSingletonFactory(bo);function bl(L){L=L||{};var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=L.errHandler,re=L.mediaPlayerModel,ce=L.dashMetrics,Se=(0,x.Z)(ee).getInstance(),Ee=cu(ee).getInstance(),ie=L.streamInfo;function me(){return ie.id}function ge(){for(var De in V)V[De].reset();V={}}function qe(De){if(De.sender){var Be=De.request,ze=De.response,_e=Be.isInitializationRequest(),Le=Be.mediaInfo.streamInfo;if(De.error&&(Be.mediaType===y.Z.AUDIO||Be.mediaType===y.Z.VIDEO||Be.mediaType===y.Z.TEXT&&Be.mediaInfo.isFragmented)&&J.trigger(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:De.request.serviceLocation}),ze&&Le){var we=function(je,Z,ue,ae){var se=new Xt;return se.streamId=ue,se.mediaInfo=Z.mediaInfo,se.segmentType=Z.type,se.start=Z.startTime,se.duration=Z.duration,se.end=se.start+se.duration,se.bytes=je,se.index=Z.index,se.quality=Z.quality,se.representationId=Z.representationId,se.endFragment=ae,se}(ze,Be,ie.id,De.type!==T.Z.FRAGMENT_LOADING_PROGRESS);Ee.modifyResponseAsync(we).then(function(je){J.trigger(_e?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:je,request:Be},{streamId:Le.id,mediaType:Be.mediaType})}).catch(function(je){B.error(je),J.trigger(_e?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:we,request:Be},{streamId:Le.id,mediaType:Be.mediaType})})}else B.warn("No "+Be.mediaType+" bytes to push or stream is inactive.")}}return P={getStreamId:me,getModel:function(De){var Be=V[De];return Be||(Be=$(ee).create({streamInfo:ie,type:De,dashMetrics:ce,fragmentLoader:pr(ee).create({dashMetrics:ce,mediaPlayerModel:re,errHandler:H,requestModifier:(0,He.Z)(ee).getInstance(),settings:L.settings,boxParser:L.boxParser,eventBus:J,events:T.Z,errors:Ae,dashConstants:L.dashConstants,urlUtils:L.urlUtils,streamId:me()}),debug:Se,eventBus:J,events:T.Z}),V[De]=Be),Be},reset:function(){J.off(_.Z.FRAGMENT_LOADING_COMPLETED,qe,this),J.off(_.Z.FRAGMENT_LOADING_PROGRESS,qe,this),ge()}},B=Se.getLogger(P),ge(),J.on(_.Z.FRAGMENT_LOADING_COMPLETED,qe,P),J.on(_.Z.FRAGMENT_LOADING_PROGRESS,qe,P),P}bl.__dashjs_factory_name="FragmentController";var vs=U.Z.getClassFactory(bl),Ha=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},Lu=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function ku(L){var P,B,V=this.context,ee=L.streamInfo;function J(re){B.setTrackByIndex(re)}function H(){B&&B.reset()}return P={getStreamId:function(){return ee.id},initialize:function(){B.addTracks();var re=B.getTracks();re&&re.length>0&&J(0)},provide:function(re,ce){if(typeof ce=="function"){var Se,Ee,ie=B.getCurrentTrack();if(!ie||ie.segmentDuration<=0||re==null)ce(null);else{(Ee=B.getThumbnailRequestForTime(re))&&(ie.segmentDuration=Ee.duration),Se=re%ie.segmentDuration;var me=Math.floor(Se*ie.tilesHor*ie.tilesVert/ie.segmentDuration),ge=new Ha;if(ge.width=Math.floor(ie.widthPerTile),ge.height=Math.floor(ie.heightPerTile),ge.x=Math.floor(me%ie.tilesHor)*ie.widthPerTile,ge.y=Math.floor(me/ie.tilesHor)*ie.heightPerTile,"readThumbnail"in ie)return ie.readThumbnail(re,function(De){ge.url=De,ce(ge)});if(Ee)ge.url=Ee.url,ie.segmentDuration=NaN;else{var qe=Math.floor(re/ie.segmentDuration);ge.url=function(De,Be){var ze=Be+De.startNumber,_e=(0,M.vi)(De.templateUrl,"Number",ze);return _e=(0,M.vi)(_e,"Time",(ze-1)*De.segmentDuration*De.timescale),_e=(0,M.vi)(_e,"Bandwidth",De.bandwidth),(0,M.eR)(_e)}(ie,qe)}ce(ge)}}},setTrackByIndex:J,getCurrentTrackIndex:function(){return B.getCurrentTrackIndex()},getBitrateList:function(){var re=B.getTracks(),ce=0;return re.map(function(Se){var Ee=new Lu;return Ee.mediaType=y.Z.IMAGE,Ee.qualityIndex=ce++,Ee.bitrate=Se.bitrate,Ee.width=Se.width,Ee.height=Se.height,Ee})},reset:H},H(),B=(0,In.Z)(V).create({streamInfo:ee,adapter:L.adapter,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:L.debug,eventBus:L.eventBus,events:L.events,dashConstants:L.dashConstants,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController}),P}ku.__dashjs_factory_name="ThumbnailController";var aa=U.Z.getClassFactory(ku),sa=w(7417);function fu(L){var P;L=L||{};var B=[],V=(0,m.Z)(this.context).getInstance(),ee=L.updateEventName,J=L.addBlacklistEventName;function H(re){B.indexOf(re)===-1&&(B.push(re),V.trigger(ee,{entry:re}))}return P={add:H,contains:function(re){return!!(B.length&&re&&re.length)&&B.indexOf(re)!==-1},reset:function(){B=[]}},J&&V.on(J,function(re){H(re.entry)},P),P}fu.__dashjs_factory_name="BlackListController";var ys=U.Z.getClassFactory(fu),_c=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT,y.Z.MUXED,y.Z.IMAGE];function Nr(L){L=L||{};var P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le=this.context,we=(0,m.Z)(Le).getInstance(),je=(0,Tt.Z)(Le).getInstance(),Z=L.manifestModel,ue=L.mediaPlayerModel,ae=L.dashMetrics,se=L.manifestUpdater,Q=L.adapter,Me=L.timelineConverter,be=L.capabilities,ke=L.errHandler,Re=L.abrController,pe=L.playbackController,Ne=L.eventController,Ye=L.mediaController,dt=L.protectionController,at=L.textController,Je=L.videoModel,ht=L.streamInfo,Bt=L.settings;function Gt(bt,Sn){return new Promise(function(En,Ot){Jt(),Ee=!0,Dn();var On=Je.getElement(),st=[];_c.forEach(function(tt){(tt!==y.Z.TEXT||bt)&&(tt!==y.Z.VIDEO||!On||On&&/^VIDEO$/i.test(On.nodeName))&&st.push(kt(tt,bt))}),Promise.all(st).then(function(){return tt=Sn,new Promise(function(qt){var Ve={},Ke=V.map(function(Mt){return Mt.createBufferSinks(tt)});Promise.all(Ke).then(function(Mt){Mt.forEach(function(fn){fn&&(Ve[fn.getType()]=fn)}),qt(Ve)}).catch(function(){qt(Ve)})});var tt}).then(function(tt){if(Ee=!1,V.length===0){var qt="No streams to play.";ke.error(new fe.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,qt,Z.getValue())),B.fatal(qt)}else Nn();bt&&at.createTracks(ht),En(tt)}).catch(function(tt){Ot(tt)})})}function kt(bt,Sn){var En,Ot=Q.getAllMediaInfoForType(ht,bt),On=[],st=null;if(!Ot||Ot.length===0)return B.info("No "+bt+" data."),Promise.resolve();bt===y.Z.VIDEO&&(re=!0),bt===y.Z.AUDIO&&(ce=!0);for(var tt=0,qt=Ot.length;tt<qt;tt++)st=Ot[tt],bt===y.Z.TEXT&&st.isEmbedded&&(at.addEmbeddedTrack(ht,st),On.push(st)),Ft(st)&&Ye.addTrack(st);if(On.length>0&&(Ye.setInitialMediaSettingsForType(bt,ht),at.addMediaInfosToBuffer(ht,bt,On)),Ot=Ot.filter(function(Ke){return!Ke.isEmbedded}),Ot.length===0)return Promise.resolve();if(bt===y.Z.IMAGE)return(me=aa(Le).create({streamInfo:ht,adapter:Q,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:Be,eventBus:we,events:T.Z,dashConstants:v.Z,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController})).initialize(),Promise.resolve();we.trigger(T.Z.STREAM_INITIALIZING,{streamInfo:ht,mediaInfo:st}),Ye.setInitialMediaSettingsForType(bt,ht);var Ve=function(Ke,Mt){var fn=Ke&&Ke.length>0?Ke[0]:null,Tn=ie.getModel(fn?fn.type:null),sr=fn?fn.type:null,Zr=fn?fn.mimeType:null,Ai=fn?fn.isFragmented:null,zr=hn(Le).create({streamInfo:ht,type:sr,mimeType:Zr,timelineConverter:Me,adapter:Q,manifestModel:Z,mediaPlayerModel:ue,fragmentModel:Tn,dashMetrics:L.dashMetrics,baseURLController:L.baseURLController,segmentBaseController:L.segmentBaseController,abrController:Re,playbackController:pe,mediaController:Ye,textController:at,errHandler:ke,settings:Bt,boxParser:De,segmentBlacklistController:ge});zr.initialize(Mt,re,Ai),V.push(zr);for(var io=0;io<Ke.length;io++)zr.addMediaInfo(Ke[io]);return sr===y.Z.TEXT&&at.addMediaInfosToBuffer(ht,sr,Ke,Tn),zr}(Ot,Sn);return(En=Ye.getCurrentTrackFor(bt,ht.id))?(Re.updateTopQualityIndex(En),Ve.selectMediaInfo(bt===y.Z.TEXT&&En.isEmbedded?Ot[0]:En)):Promise.resolve()}function Ft(bt){var Sn,En=bt?bt.type:null;return En===y.Z.MUXED?(Sn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",B.fatal(Sn),ke.error(new fe.Z(Ae.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Sn,Z.getValue())),!1):!(En!==y.Z.TEXT&&En!==y.Z.IMAGE&&bt.contentProtection&&!be.supportsEncryptedMedia()&&(ke.error(new fe.Z(Ae.CAPABILITY_MEDIAKEYS_ERROR_CODE,Ae.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function An(bt){for(var Sn=V?V.length:0,En=0;En<Sn;En++){var Ot=V[En].getFragmentModel();Ot.abortRequests(),Ot.resetInitialSettings(),V[En].reset(!1,bt)}at&&at.deactivateStream(ht),V=[],J=!1,H=!1,Fn(!1),vt(!1),we.trigger(T.Z.STREAM_DEACTIVATED,{streamInfo:ht})}function nt(bt){An(bt),ee=!1,re=!1,ce=!1,Se={},Ee=!1,ze=!1,_e=[]}function vt(bt){ze=bt}function Wt(){return ht?ht.start:NaN}function Nt(){return ht?ht.id:null}function en(){return ht}function Jt(){if(!Je||!Re)throw new Error(y.Z.MISSING_CONFIG_ERROR)}function Yt(bt){bt.error&&(ke.error(bt.error),B.fatal(bt.error.message))}function Dn(){if(Ne){var bt=Q.getEventsFor(ht);bt&&bt.length>0&&Ne.addInlineEvents(bt,ht.id)}}function Nn(){for(var bt=V.length,Sn=Se.audio||Se.video?new fe.Z(Ae.DATA_UPDATE_FAILED_ERROR_CODE,Ae.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,En=0;En<bt;En++)if(V[En].isUpdating()||Ee)return;if(dt){dt.clearMediaInfoArray();for(var Ot=0;Ot<bt&&V[Ot];Ot++){var On=V[Ot].getType(),st=V[Ot].getMediaInfo();if(On===y.Z.AUDIO||On===y.Z.VIDEO||On===y.Z.TEXT&&st.isFragmented){var tt=V[Ot].getMediaInfo();tt&&dt.initializeForMedia(tt)}}dt.handleKeySystemFromManifest()}Sn?ke.error(Sn):ee||(ee=!0,Je.waitForReadyState(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){we.trigger(T.Z.STREAM_INITIALIZED,{streamInfo:ht})}))}function rr(){var bt=un(),Sn=bt.length;if(Sn!==0){for(var En=0;En<Sn;En++)if(!bt[En].isBufferingCompleted()&&(bt[En].getType()===y.Z.AUDIO||bt[En].getType()===y.Z.VIDEO))return void B.debug("onBufferingCompleted - One streamProcessor has finished but",bt[En].getType(),"one is not buffering completed");B.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),H=!0,we.trigger(T.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:ht},{streamInfo:ht})}else B.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ir(bt){Se[bt.mediaType]=bt.error,Nn()}function It(bt){Ne&&Ne.addInbandEvents(bt.events,ht.id)}function $t(bt){return bt&&bt.type?Zt(bt.type):null}function Zt(bt){return bt?un().filter(function(Sn){return Sn.getType()===bt})[0]:null}function un(){for(var bt,Sn,En=[],Ot=0;Ot<V.length;Ot++)(bt=(Sn=V[Ot]).getType())!==y.Z.AUDIO&&bt!==y.Z.VIDEO&&bt!==y.Z.TEXT||En.push(Sn);return En}function vn(bt,Sn){var En=en(),Ot=Sn.getStreamInfo();if(!Ot||!En)return!0;var On=Q.getAdaptationForType(Ot.index,bt,Ot),st=Q.getAdaptationForType(En.index,bt,En);return On&&st?!(!Pn(st)&&Pn(On)):!On&&!st}function Pn(bt){return!!bt&&!!(bt.ContentProtection||bt.Representation_asArray&&bt.Representation_asArray.length>0&&bt.Representation_asArray[0].ContentProtection)}function xn(bt,Sn){var En=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!bt||!bt.hasOwnProperty("getStreamInfo"))return!1;var Ot=bt.getStreamInfo(),On=En?En.getStreamInfo():en();if(!Ot||!On)return!1;var st=Q.getAdaptationForType(Ot.index,Sn,Ot),tt=Q.getAdaptationForType(On.index,Sn,On);if(!st||!tt)return!st&&!tt;var qt=st&&tt&&st.mimeType===tt.mimeType,Ve=tt.Representation_asArray.map(function(Tn){return Tn.codecs}),Ke=st.Representation_asArray.map(function(Tn){return Tn.codecs}),Mt=Ke.some(function(Tn){return Ve.indexOf(Tn)>-1}),fn=Ke.some(function(Tn){return Ve.some(function(sr){return be.codecRootCompatibleWithCodec(sr,Tn)})});return Mt||fn&&qt}function Fn(bt){qe=bt}function Gn(){return qe}return P={initialize:function(){we.on(T.Z.BUFFERING_COMPLETED,rr,P),we.on(T.Z.DATA_UPDATE_COMPLETED,ir,P),we.on(T.Z.INBAND_EVENTS,It,P),dt&&(we.on(T.Z.KEY_ERROR,Yt,P),we.on(T.Z.SERVER_CERTIFICATE_UPDATED,Yt,P),we.on(T.Z.LICENSE_REQUEST_COMPLETE,Yt,P),we.on(T.Z.KEY_SYSTEM_SELECTED,Yt,P),we.on(T.Z.KEY_SESSION_CREATED,Yt,P),we.on(T.Z.KEY_STATUSES_CHANGED,Yt,P)),at.initializeForStream(ht),we.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht})},getStreamId:function(){return ht?ht.id:null},activate:function(bt,Sn){return new Promise(function(En,Ot){if(!J)return Gn()?(J=!0,we.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),void En(Sn)):void function(On,st){return Gt(On,st)}(bt,Sn).then(function(On){J=!0,we.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),En(On)}).catch(function(On){Ot(On)});En(Sn)})},deactivate:An,getIsActive:function(){return J},getDuration:function(){return ht?ht.duration:NaN},getStartTime:Wt,getId:Nt,getStreamInfo:en,getHasAudioTrack:function(){return ce},getHasVideoTrack:function(){return re},startPreloading:function(bt,Sn){return new Promise(function(En,Ot){Gn()?Ot():(B.info("[startPreloading] Preloading next stream with id ".concat(Nt())),Fn(!0),Gt(bt,Sn).then(function(){for(var On=0;On<V.length&&V[On];On++)V[On].setExplicitBufferingTime(Wt()),V[On].getScheduleController().startScheduleTimer();En()}).catch(function(){Fn(!1),Ot()}))})},initializeForTextWithMediaSource:function(bt){return new Promise(function(Sn,En){kt(y.Z.TEXT,bt).then(function(){return(Ot=Zt(y.Z.TEXT))?Ot.createBufferSinks():Promise.resolve();var Ot}).then(function(){at.createTracks(ht),Sn()}).catch(function(Ot){En(Ot)})})},getThumbnailController:function(){return me},getBitrateListFor:function(bt){if(Jt(),bt===y.Z.IMAGE)return me?me.getBitrateList():[];var Sn=function(En){for(var Ot=null,On=0;On<V.length;On++)if((Ot=V[On]).getType()===En)return Ot.getMediaInfo();return null}(bt);return Re.getBitrateList(Sn)},updateData:function(bt){return new Promise(function(Sn){Ee=!0,ht=bt,Ne&&Dn();for(var En=[],Ot=0,On=V.length;Ot<On;Ot++){var st=V[Ot],tt=st.getMediaInfo();En.push(st.updateStreamInfo(ht));var qt=Q.getAllMediaInfoForType(ht,st.getType());if(qt=qt.filter(function(Mt){return!Mt.isEmbedded})){st.clearMediaInfoArray();for(var Ve=0;Ve<qt.length;Ve++){var Ke=qt[Ve];st.addMediaInfo(qt[Ve]),Q.areMediaInfosEqual(tt,Ke)&&(Re.updateTopQualityIndex(Ke),En.push(st.selectMediaInfo(Ke)))}}}Promise.all(En).then(function(){for(En=[];_e.length>0;){var Mt=_e.pop(),fn=Mt.newMediaInfo,Tn=$t(Mt.oldMediaInfo);if(!Tn)return;En.push(Tn.prepareTrackSwitch()),En.push(Tn.selectMediaInfo(fn))}return Promise.all(En)}).then(function(){Ee=!1,Nn(),we.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht}),Sn()})})},reset:function(bt){ie&&(ie.reset(),ie=null),Re&&ht&&Re.clearDataForStream(ht.id),ge&&(ge.reset(),ge=null),nt(bt),ht=null,we.off(T.Z.DATA_UPDATE_COMPLETED,ir,P),we.off(T.Z.BUFFERING_COMPLETED,rr,P),we.off(T.Z.INBAND_EVENTS,It,P),dt&&(we.off(T.Z.KEY_ERROR,Yt,P),we.off(T.Z.SERVER_CERTIFICATE_UPDATED,Yt,P),we.off(T.Z.LICENSE_REQUEST_COMPLETE,Yt,P),we.off(T.Z.KEY_SYSTEM_SELECTED,Yt,P),we.off(T.Z.KEY_SESSION_CREATED,Yt,P),we.off(T.Z.KEY_STATUSES_CHANGED,Yt,P))},getProcessors:un,setMediaSource:function(bt){return new Promise(function(Sn,En){for(var Ot=[],On=0;On<V.length;)Ft(V[On].getMediaInfo())?(Ot.push(V[On].setMediaSource(bt)),On++):(V[On].reset(),V.splice(On,1));Promise.all(Ot).then(function(){for(var st=0;st<V.length;st++)V[st].dischargePreBuffer();if(V.length===0){var tt="No streams to play.";ke.error(new fe.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,tt+"nostreams",Z.getValue())),B.fatal(tt)}Sn()}).catch(function(st){B.error(st),En(st)})})},isMediaCodecCompatible:function(bt){var Sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return xn(bt,y.Z.VIDEO,Sn)&&xn(bt,y.Z.AUDIO,Sn)},isProtectionCompatible:function(bt){return!bt||vn(y.Z.VIDEO,bt)&&vn(y.Z.AUDIO,bt)},getPreloaded:Gn,getIsEndedEventSignaled:function(){return ze},setIsEndedEventSignaled:vt,getAdapter:function(){return Q},getHasFinishedBuffering:function(){return H},setPreloaded:Fn,startScheduleControllers:function(){for(var bt=V.length,Sn=0;Sn<bt&&V[Sn];Sn++)V[Sn].getScheduleController().startScheduleTimer()},prepareTrackChange:function(bt){if(J&&ht){H=!1;var Sn=bt.newMediaInfo,En=Z.getValue();Q.setCurrentMediaInfo(ht.id,Sn.type,Sn);var Ot=$t(Sn);if(Ot){var On=pe.getTime();B.info("Stream -  Process track changed at current time "+On),En.refreshManifestOnSwitchTrack?(_e.push(bt),se.getIsUpdating()||(B.debug("Stream -  Refreshing manifest for switch track"),se.refreshManifest())):Ot.selectMediaInfo(Sn).then(function(){Sn.type!==y.Z.VIDEO&&Sn.type!==y.Z.AUDIO||Re.updateTopQualityIndex(Sn),Ot.prepareTrackSwitch()})}}},prepareQualityChange:function(bt){var Sn=Zt(bt.mediaType);Sn&&Sn.prepareQualityChange(bt)}},function(){try{Be=(0,x.Z)(Le).getInstance(),B=Be.getLogger(P),nt(),De=(0,sa.Z)(Le).getInstance(),ge=ys(Le).create({updateEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),ie=vs(Le).create({streamInfo:ht,mediaPlayerModel:ue,dashMetrics:ae,errHandler:ke,settings:Bt,boxParser:De,dashConstants:v.Z,urlUtils:je})}catch(bt){throw bt}}(),P}Nr.__dashjs_factory_name="Stream";var Es=U.Z.getClassFactory(Nr),_s=function L(P){(function(B,V){if(!(B instanceof V))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||null,this.type=it.w.CONTENT_STEERING_TYPE,this.responseType="json"},Yr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function Tc(){var L,P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe,De=this.context,Be=(0,Tt.Z)(De).getInstance();function ze(Re){Z(Re,"baseUrl")}function _e(Re){Z(Re,"location")}function Le(Re){if(Re&&Re.request&&Re.request.serviceLocation&&Re.request.requestStartDate&&Re.request.requestEndDate&&!isNaN(Re.request.bytesTotal)){var pe=Re.request.serviceLocation,Ne=Re.request.requestEndDate.getTime()-Re.request.requestStartDate.getTime();je(pe,parseInt(8*Re.request.bytesTotal/Ne*1e3))}}function we(Re){Re&&Re.httpRequest&&Re.httpRequest._serviceLocation&&!isNaN(Re.throughput)&&je(Re.httpRequest._serviceLocation,1e3*Re.throughput)}function je(Re,pe){ee[Re]||(ee[Re]=[]),ee[Re].push(pe),ee[Re].length>4&&ee[Re].shift()}function Z(Re,pe){if(Re&&Re.request&&Re.request.serviceLocation){var Ne=Re.request.serviceLocation;V[pe].all.indexOf(Ne)===-1&&V[pe].all.push(Ne),V[pe].current=Ne}}function ue(){var Re=Ee.getValue(),pe=qe.getContentSteering(Re);return pe||(pe=me.getServiceDescriptionSettings().contentSteering),pe}function ae(){return new Promise(function(Re){try{var pe=ue();if(!pe||!pe.serverUrl)return void Re();var Ne=function(dt){var at=dt.serverUrl;B&&B.reloadUri&&(at=Be.isRelative(B.reloadUri)?Be.resolve(B.reloadUri,dt.serverUrl):B.reloadUri);var Je=[],ht=V.baseUrl.all.concat(V.location.all);if(ht.length>0){var Bt=ht.map(function(Ft){var An=function(nt){if(!nt||!ee[nt]||ee[nt].length===0)return-1;var vt=ee[nt].reduce(function(Wt,Nt){return Wt+Nt})/ee[nt].length;return parseInt(vt)}(Ft);return{serviceLocation:Ft,throughput:An}});Bt.sort(function(Ft,An){return An.throughput-Ft.throughput});var Gt="",kt="";Bt.forEach(function(Ft,An){An!==0&&(Gt="".concat(Gt,","),Ft.throughput>-1&&(kt="".concat(kt,","))),Gt="".concat(Gt).concat(Ft.serviceLocation),Ft.throughput>-1&&(kt="".concat(kt).concat(Ft.throughput))}),Je.push({key:"_DASH_pathway",value:'"'.concat(Gt,'"')}),Je.push({key:"_DASH_throughput",value:kt})}return at=rn.Z.addAditionalQueryParameterToUrl(at,Je)}(pe),Ye=new _s(Ne);H.load({request:Ye,success:function(dt){(function(at){at&&at[v.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(at[v.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((B=new Yr).version=at[v.Z.CONTENT_STEERING_RESPONSE.VERSION],at[v.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(at[v.Z.CONTENT_STEERING_RESPONSE.TTL])&&(B.ttl=at[v.Z.CONTENT_STEERING_RESPONSE.TTL]),at[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(B.reloadUri=at[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(B.pathwayPriority=at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(B.pathwayClones=at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],B.pathwayClones=B.pathwayClones.filter(function(Je){return function(ht){return ht[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&ht[v.Z.CONTENT_STEERING_RESPONSE.ID]&&ht[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&ht[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST]}(Je)})),Me())})(dt),ge.trigger(_.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:B,url:Ne}),Re()},error:function(dt,at,Je,ht){(function(Bt,Gt){try{switch(P.warn("Error fetching data from content steering server",Bt),Gt.status){case 410:break;case 429:var kt=Gt&&Gt.getResponseHeader?Gt.getResponseHeader("retry-after"):null;kt!==null&&(B||(B={}),B.ttl=parseInt(kt)),Me();break;default:Me()}}catch(Ft){P.error(Ft)}})(dt,ht),Re(dt)},complete:function(){V.baseUrl.all=se(V.baseUrl),V.location.all=se(V.location)}})}catch(dt){Re(dt)}})}function se(Re){return Re.all&&Re.all.length!==0&&Re.current?Re.all.filter(function(pe){return pe===Re.current}):[]}function Q(Re){try{var pe=[];return Re&&Re.length!==0&&B&&B.pathwayClones&&B.pathwayClones.length!==0&&B.pathwayClones.forEach(function(Ne){var Ye=Re.filter(function(Bt){return Ne[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===Bt.serviceLocation}),dt=null;if(Ye&&Ye.length>0&&(dt=Ye[0]),dt){var at=new URL(dt.url),Je=Ne[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST];Je=rn.Z.stringHasProtocol(Je)?Je:"".concat(at.protocol,"//").concat(Je);var ht={synthesizedUrl:"".concat(Je).concat(at.pathname),serviceLocation:Ne[v.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:Ne[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:dt};pe.push(ht)}}),pe}catch(Ne){return P.error(Ne),[]}}function Me(){B&&B.ttl&&!isNaN(B.ttl)&&(J&&clearTimeout(J),J=setTimeout(function(){ae()},1e3*B.ttl))}function be(){J&&clearTimeout(J),J=null}function ke(){B=null,ee={},V={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},be()}return L={reset:function(){ke(),ge.off(_.Z.FRAGMENT_LOADING_STARTED,ze,L),ge.off(_.Z.MANIFEST_LOADING_STARTED,_e,L),ge.off(_.Z.MANIFEST_LOADING_FINISHED,Le,L),ge.off(_.Z.THROUGHPUT_MEASUREMENT_STORED,we,L)},setConfig:function(Re){Re&&(Re.adapter&&(qe=Re.adapter),Re.errHandler&&(re=Re.errHandler),Re.dashMetrics&&(ce=Re.dashMetrics),Re.mediaPlayerModel&&(Se=Re.mediaPlayerModel),Re.requestModifier&&(ie=Re.requestModifier),Re.manifestModel&&(Ee=Re.manifestModel),Re.serviceDescriptionController&&(me=Re.serviceDescriptionController),Re.eventBus&&(ge=Re.eventBus))},loadSteeringData:ae,getCurrentSteeringResponseData:function(){return B},shouldQueryBeforeStart:function(){var Re=ue();return!!Re&&Re.queryBeforeStart},getSteeringDataFromManifest:ue,stopSteeringRequestTimer:be,getSynthesizedBaseUrlElements:function(Re){try{return Q(Re).map(function(pe){var Ne=new Qn(pe.synthesizedUrl,pe.serviceLocation);return Ne.queryParams=pe.queryParams,Ne.dvbPriority=pe.reference.dvbPriority,Ne.dvbWeight=pe.reference.dvbWeight,Ne.availabilityTimeOffset=pe.reference.availabilityTimeOffset,Ne.availabilityTimeComplete=pe.reference.availabilityTimeComplete,Ne})}catch(pe){return P.error(pe),[]}},getSynthesizedLocationElements:function(Re){try{return Q(Re).map(function(pe){var Ne=new Zn(pe.synthesizedUrl,pe.serviceLocation);return Ne.queryParams=pe.queryParams,Ne})}catch(pe){return P.error(pe),[]}},initialize:function(){H=Io(De).create({errHandler:re,dashMetrics:ce,mediaPlayerModel:Se,requestModifier:ie,errors:Ae}),ge.on(_.Z.FRAGMENT_LOADING_STARTED,ze,L),ge.on(_.Z.MANIFEST_LOADING_STARTED,_e,L),ge.on(_.Z.MANIFEST_LOADING_FINISHED,Le,L),ge.on(_.Z.THROUGHPUT_MEASUREMENT_STORED,we,L)}},P=(0,x.Z)(De).getInstance().getLogger(L),ke(),L}Tc.__dashjs_factory_name="ContentSteeringController";var Ia=U.Z.getSingletonFactory(Tc);function Cl(){var L,P,B,V=this.context,ee=(0,Ze.Z)(V).getInstance();return L={select:function(J){if(!J||J.length===0)return null;var H=null;return ee.get().streaming.applyContentSteering&&(H=function(re){var ce=B.getCurrentSteeringResponseData();return ce&&ce.pathwayPriority&&ce.pathwayPriority.length>0?function(){for(var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ie=0,me=null,ge=function(){var qe=Se[ie],De=Ee.findIndex(function(Be){return Be.serviceLocation&&Be.serviceLocation===qe});if(De!==-1&&!P.contains(Ee[De].serviceLocation))return me=Ee[De],"break";ie+=1};ie<Se.length&&ge()!=="break";);return me}(ce.pathwayPriority,re):null}(J)),H||(H=function(re){return re[0]}(J)),H},setConfig:function(J){J.blacklistController&&(P=J.blacklistController),J.contentSteeringController&&(B=J.contentSteeringController)},reset:function(){P.reset()}},P=ys(V).create({updateEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),B=Ia(V).getInstance(),L}Cl.__dashjs_factory_name="LocationSelector";var ua=U.Z.getClassFactory(Cl);function Ts(){var L,P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe=this.context,De=(0,m.Z)(qe).getInstance(),Be=(0,Tt.Z)(qe).getInstance();function ze(){B=NaN,H=!1,ee=!0,J=!1,_e()}function _e(){V!==null&&(clearTimeout(V),V=null)}function Le(be){_e(),J||(isNaN(be)&&!isNaN(B)&&(be=1e3*B),isNaN(be)||(P.debug("Refresh manifest in "+be+" milliseconds."),V=setTimeout(ue,be)))}function we(){var be=arguments.length>0&&arguments[0]!==void 0&&arguments[0];H=!0;var ke=ce.getValue(),Re=ke.url,pe=null,Ne=Ee.getPatchLocation(ke),Ye=Se.select(Ne),dt=null;if(Ye&&!be)Re=Ye.url,pe=Ye.serviceLocation,dt=Ye.queryParams;else{var at=je(ke),Je=Se.select(at);Je&&(Re=Je.url,pe=Je.serviceLocation,dt=Je.queryParams)}Be.isRelative(Re)&&(Re=Be.resolve(Re,ke.url)),re.load(Re,pe,dt)}function je(be){var ke=Ee.getLocation(be),Re=me.getSynthesizedLocationElements(ke);return ke.concat(Re)}function Z(be){if(be){if(Ee.getIsPatch(be)){var ke=be;be=ce.getValue();var Re=Ee.isPatchValid(be,ke),pe=Re;if(Re){var Ne=Ee.getPublishTime(be);pe=Ee.applyPatchToManifest(be,ke);var Ye=Ee.getPublishTime(be);pe=Ne.getTime()!=Ye.getTime()}if(!pe)return P.debug("Patch provided is invalid, performing full manifest refresh"),void we(!0);be.loadedTime=new Date}}else(be=ce.getValue()).loadedTime=new Date;if(ce.getValue()&&ce.getValue().type===v.Z.DYNAMIC&&be.type===v.Z.STATIC)return De.trigger(T.Z.DYNAMIC_TO_STATIC),H=!1,void(J=!0);ce.setValue(be);var dt=new Date,at=(dt.getTime()-be.loadedTime.getTime())/1e3;1e3*(B=Ee.getManifestUpdatePeriod(be,at))>2147483647&&(B=2147483647e-3),De.trigger(T.Z.MANIFEST_UPDATED,{manifest:be}),P.info("Manifest has been refreshed at "+dt+"["+dt.getTime()/1e3+"] "),ee||Le()}function ue(){ee||(H?Le(ge.get().streaming.manifestUpdateRetryInterval):we())}function ae(be){be.error?be.error.code===Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ie.error(be.error):Z(be.manifest)}function se(){ee=!1,Le()}function Q(){(ee=!ge.get().streaming.scheduling.scheduleWhilePaused)&&_e()}function Me(){H=!1}return L={initialize:function(){ze(),De.on(T.Z.STREAMS_COMPOSED,Me,this),De.on(_.Z.PLAYBACK_STARTED,se,this),De.on(_.Z.PLAYBACK_PAUSED,Q,this),De.on(T.Z.INTERNAL_MANIFEST_LOADED,ae,this)},setManifest:function(be){Z(be)},refreshManifest:we,getIsUpdating:function(){return H},setConfig:function(be){be&&(be.manifestModel&&(ce=be.manifestModel),be.adapter&&(Ee=be.adapter),be.manifestLoader&&(re=be.manifestLoader),be.errHandler&&(ie=be.errHandler),be.locationSelector&&(Se=be.locationSelector),be.settings&&(ge=be.settings),be.contentSteeringController&&(me=be.contentSteeringController))},reset:function(){De.off(_.Z.PLAYBACK_STARTED,se,this),De.off(_.Z.PLAYBACK_PAUSED,Q,this),De.off(T.Z.STREAMS_COMPOSED,Me,this),De.off(T.Z.INTERNAL_MANIFEST_LOADED,ae,this),ze()}},P=(0,x.Z)(qe).getInstance().getLogger(L),Se=ua(qe).create(),L}Ts.__dashjs_factory_name="ManifestUpdater";var Vr=U.Z.getClassFactory(Ts);function Ka(){var L,P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe,De,Be=this.context,ze=(0,m.Z)(Be).getInstance(),_e=(0,Tt.Z)(Be).getInstance();function Le(){re=[],ce=[],Se=null,Ee=null,me=null,ie=NaN,B=!1,V=!1,ge=ee.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function we(){ee.get().streaming.utcSynchronization.enabled&&!B&&!V&&me&&me.value&&me.schemeIdUri&&!isNaN(ie)&&!isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)&&(Ee&&(Date.now()-Ee)/1e3<30||(re=[],V=!0,je(isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)?2:ee.get().streaming.utcSynchronization.backgroundAttempts)))}function je(Je){try{if(Je<=0)return void dt();var ht=Date.now();J[me.schemeIdUri](me.value,function(Bt){var Gt=Date.now(),kt=ue(ht,Gt,Bt);re.push(kt),je(Je-1)},function(){dt()})}catch(Bt){dt()}}function Z(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ht=Je||0;if(!ce||ce.length===0||ht>=ce.length)ae();else{var Bt=ce[ht];if(Bt)if(J.hasOwnProperty(Bt.schemeIdUri)){var Gt=new Date().getTime();J[Bt.schemeIdUri](Bt.value,function(kt){var Ft=new Date().getTime(),An=ue(Gt,Ft,kt);me=Bt,ae(An)},function(){Z(ht+1)})}else Z(ht+1);else ae()}}function ue(Je,ht,Bt){return Bt-(ht-(ht-Je)/2)}function ae(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,ht=isNaN(Je);ht&&ee.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?Ne():Ye(ht,Je)}function se(Je){var ht=Date.parse(Je);return isNaN(ht)&&(ht=function(Bt){var Gt,kt,Ft=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(Bt);return Gt=Date.UTC(parseInt(Ft[1],10),parseInt(Ft[2],10)-1,parseInt(Ft[3],10),parseInt(Ft[4],10),parseInt(Ft[5],10),Ft[6]&&(parseInt(Ft[6],10)||0),Ft[7]&&1e3*parseFloat(Ft[7])||0),Ft[9]&&Ft[10]&&(kt=60*parseInt(Ft[9],10)+parseInt(Ft[10],10),Gt+=(Ft[8]==="+"?-1:1)*kt*60*1e3),new Date(Gt).getTime()}(Je)),ht}function Q(Je){return Date.parse(Je)}function Me(Je){return Date.parse(Je)}function be(Je,ht,Bt){Bt()}function ke(Je,ht,Bt){var Gt=se(Je);isNaN(Gt)?Bt():ht(Gt)}function Re(Je,ht,Bt,Gt,kt){var Ft,An,nt=!1,vt=new XMLHttpRequest,Wt=kt?it.w.HEAD:it.w.GET,Nt=ht.match(/\S+/g);if(ht=Nt.shift(),Ft=function(){nt||(nt=!0,Nt.length?Re(Je,Nt.join(" "),Bt,Gt,kt):Gt())},An=function(){var Jt,Yt;vt.status===200&&(Jt=kt?vt.getResponseHeader("Date"):vt.response,Yt=Je(Jt),isNaN(Yt)||(Bt(Yt),nt=!0))},_e.isRelative(ht)){var en=De.resolve();en&&(ht=_e.resolve(ht,en.url))}vt.open(Wt,ht),vt.timeout=5e3,vt.onload=An,vt.onloadend=Ft,vt.send()}function pe(Je,ht,Bt){Re(Me,Je,ht,Bt,!0)}function Ne(){var Je=H.getLatestMPDRequestHeaderValueByID("Date"),ht=Je!==null?new Date(Je).getTime():Number.NaN;isNaN(ht)?Ye(!0):Ye(!1,ht-Date.now())}function Ye(Je,ht){if(isNaN(ie)||isNaN(ht)||Je||function(Gt){try{var kt,Ft=at(Gt),An=isNaN(ge)?30:ge,nt=isNaN(ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,vt=isNaN(ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Wt=isNaN(ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Ft?(kt=Math.min(An*nt,vt),P.debug("Increasing timeBetweenSyncAttempts to ".concat(kt))):(kt=Math.max(An/nt,Wt),P.debug("Decreasing timeBetweenSyncAttempts to ".concat(kt))),ge=kt}catch(Nt){}}(ht),!Je&&!isNaN(ht)){Se=Date.now(),B=!1;var Bt=isNaN(ie);ie=ht,Bt&&we(),P.debug("Completed UTC sync. Setting client - server offset to ".concat(ht))}Je&&(me=null,B=!1,qe.error(new fe.Z(Ae.TIME_SYNC_FAILED_ERROR_CODE,Ae.TIME_SYNC_FAILED_ERROR_MESSAGE))),ze.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ht}),ze.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED)}function dt(){if(re&&re.length!==0){var Je=re.reduce(function(ht,Bt){return ht+Bt},0)/re.length;at(Je)?P.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(P.debug("Completed background UTC sync. Setting client - server offset to ".concat(Je)),ie=Je,ze.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ie})),V=!1,Ee=Date.now()}}function at(Je){try{if(isNaN(ie))return!0;var ht=ee.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(ee.get().streaming.utcSynchronization.maximumAllowedDrift)?ee.get().streaming.utcSynchronization.maximumAllowedDrift:100;return Je>=ie-ht&&Je<=ie+ht}catch(Bt){return!0}}return L={initialize:function(){Le(),J={"urn:mpeg:dash:utc:http-head:2014":pe,"urn:mpeg:dash:utc:http-xsdate:2014":Re.bind(null,se),"urn:mpeg:dash:utc:http-iso:2014":Re.bind(null,Q),"urn:mpeg:dash:utc:direct:2014":ke,"urn:mpeg:dash:utc:http-head:2012":pe,"urn:mpeg:dash:utc:http-xsdate:2012":Re.bind(null,se),"urn:mpeg:dash:utc:http-iso:2012":Re.bind(null,Q),"urn:mpeg:dash:utc:direct:2012":ke,"urn:mpeg:dash:utc:http-ntp:2014":be,"urn:mpeg:dash:utc:ntp:2014":be,"urn:mpeg:dash:utc:sntp:2014":be}},attemptSync:function(Je,ht){ce=Je,B||(function(Bt){try{if(!Bt||!ee.get().streaming.utcSynchronization.enabled)return!1;var Gt=isNaN(ge)?30:ge;return!(Se&&Gt&&!isNaN(Gt))||(Date.now()-Se)/1e3>=Gt}catch(kt){return!0}}(ht)?(B=!0,Z()):ze.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(Je){Je&&(Je.dashMetrics&&(H=Je.dashMetrics),Je.baseURLController&&(De=Je.baseURLController),Je.errHandler&&(qe=Je.errHandler),Je.settings&&(ee=Je.settings))},reset:function(){Le(),ze.off(T.Z.ATTEMPT_BACKGROUND_SYNC,we,L)}},P=(0,x.Z)(Be).getInstance().getLogger(L),ze.on(T.Z.ATTEMPT_BACKGROUND_SYNC,we,L),L}Ka.__dashjs_factory_name="TimeSyncController";var Va=U.Z.getSingletonFactory(Ka);Va.HTTP_TIMEOUT_MS=5e3,U.Z.updateSingletonFactory(Ka.__dashjs_factory_name,Va);var za=Va;function Mf(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance();return L={attachMediaSource:function(re){var ce=window.URL.createObjectURL(P);return re.setSource(ce),V==="managedMediaSource"&&(re.setDisableRemotePlayback(!0),P.addEventListener("startstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),P.addEventListener("endstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),ce},createMediaSource:function(){var re="WebKitMediaSource"in window,ce="MediaSource"in window;return"ManagedMediaSource"in window?(P=new ManagedMediaSource,V="managedMediaSource",ee.info("Created ManagedMediaSource")):ce?(P=new MediaSource,V="mediaSource",ee.info("Created MediaSource")):re&&(P=new WebKitMediaSource,ee.info("Created WebkitMediaSource")),P},detachMediaSource:function(re){re.setSource(null)},setConfig:function(re){re&&re.settings&&(B=re.settings)},setDuration:function re(ce){P&&P.readyState==="open"&&(ce===null&&isNaN(ce)||P.duration!==ce&&(ce!==1/0||B.get().streaming.buffer.mediaSourceDurationInfinity||(ce=Math.pow(2,32)),function(Se){for(var Ee=Se.sourceBuffers,ie=0;ie<Ee.length;ie++)if(Ee[ie].updating)return!0;return!1}(P)?setTimeout(re.bind(null,ce),50):(ee.info("Set MediaSource duration:"+ce),P.duration=ce)))},setSeekable:function(re,ce){P&&typeof P.setLiveSeekableRange=="function"&&typeof P.clearLiveSeekableRange=="function"&&P.readyState==="open"&&re>=0&&re<ce&&(P.clearLiveSeekableRange(),P.setLiveSeekableRange(re,ce))},signalEndOfStream:function(re){if(re&&re.readyState==="open"){for(var ce=re.sourceBuffers,Se=0;Se<ce.length;Se++)if(ce[Se].updating||ce[Se].buffered.length===0)return;ee.info("call to mediaSource endOfStream"),re.endOfStream()}}},ee=(0,x.Z)(J).getInstance().getLogger(L),L}Mf.__dashjs_factory_name="MediaSourceController";var Ch=U.Z.getSingletonFactory(Mf);function Co(){var L,P,B,V,ee,J,H,re,ce,Se,Ee,ie="urn:mpeg:dash:event:2012",me="discarded",ge="updated",qe="added",De=this.context,Be=(0,m.Z)(De).getInstance();function ze(){if(!H||!re)throw new Error("setConfig function has to be called previously")}function _e(){Ee=!1,B={},V={},ee=null,Se=!1,J=Date.now()/1e3}function Le(){try{if(!Se){Se=!0;var be=re.getTime(),ke=be-J;ke=J>0?Math.max(0,ke):0,we(V,ke,be),we(B,ke,be),je(V),je(B),J=be,Se=!1}}catch(Re){Se=!1,P.error(Re)}}function we(be,ke,Re){try{se(be,function(pe){if(pe!==void 0){var Ne=isNaN(pe.duration)?0:pe.duration;pe.calculatedPresentationTime<=Re&&pe.calculatedPresentationTime+ke+Ne>=Re?Me(pe,_.Z.EVENT_MODE_ON_START):(Q(Re,Ne+ke,pe.calculatedPresentationTime)||function(Ye){try{var dt=Ye.eventStream.period.start+Ye.eventStream.period.duration;return Ye.calculatedPresentationTime>dt}catch(at){return P.error(at),!1}}(pe))&&(P.debug("Removing event ".concat(pe.id," from period ").concat(pe.eventStream.period.id," as it is expired or invalid")),function(Ye,dt){try{var at=dt.eventStream.schemeIdUri,Je=dt.eventStream.period.id,ht=dt.eventStream.value,Bt=dt.id;Ye[Je][at]=Ye[Je][at].filter(function(Gt){return ht&&Gt.eventStream.value&&Gt.eventStream.value!==ht||Gt.id!==Bt}),Ye[Je][at].length===0&&delete Ye[Je][at]}catch(Gt){P.error(Gt)}}(be,pe))}})}catch(pe){P.error(pe)}}function je(be){try{for(var ke in be)be.hasOwnProperty(ke)&&Object.keys(be[ke]).length===0&&delete be[ke]}catch(Re){P.error(Re)}}function Z(be,ke){var Re=arguments.length>2&&arguments[2]!==void 0&&arguments[2],pe=be.eventStream.schemeIdUri,Ne=be.eventStream.value,Ye=be.id,dt=me;ke[pe]||(ke[pe]=[]);var at=ke[pe].findIndex(function(ht){return(!Ne||ht.eventStream.value&&ht.eventStream.value===Ne)&&ht.id===Ye});if(at===-1)ke[pe].push(be),be.triggeredReceivedEvent=!1,be.triggeredStartEvent=!1,dt=qe;else if(Re){var Je=ke[pe][at];be.triggeredReceivedEvent=Je.triggeredReceivedEvent,be.triggeredStartEvent=Je.triggeredStartEvent,ke[pe][at]=be,dt=ge}return dt}function ue(be){try{if(be.eventStream.value==1){var ke,Re=be.calculatedPresentationTime;ke=be.calculatedPresentationTime==4294967295?NaN:be.calculatedPresentationTime+be.duration,Be.trigger(_.Z.MANIFEST_VALIDITY_CHANGED,{id:be.id,validUntil:Re,newDuration:ke,newManifestValidAfter:NaN},{mode:_.Z.EVENT_MODE_ON_START})}}catch(pe){P.error(pe)}}function ae(be){try{var ke=re.getTime();se(be,function(Re){var pe=Re.eventStream&&Re.eventStream.period&&!isNaN(Re.eventStream.period.duration)?Re.eventStream.period.duration:NaN,Ne=Re.eventStream&&Re.eventStream.period&&!isNaN(Re.eventStream.period.start)?Re.eventStream.period.start:NaN;if(!isNaN(pe)&&!isNaN(Ne)){var Ye=Re.calculatedPresentationTime;Math.abs(Ye-ke)<300&&Me(Re,_.Z.EVENT_MODE_ON_START)}})}catch(Re){P.error(Re)}}function se(be,ke){try{if(be)for(var Re=Object.keys(be),pe=0;pe<Re.length;pe++)for(var Ne=be[Re[pe]],Ye=Object.keys(Ne),dt=0;dt<Ye.length;dt++)Ne[Ye[dt]].forEach(function(at){at!==void 0&&ke(at)})}catch(at){P.error(at)}}function Q(be,ke,Re){try{return be-ke>Re}catch(pe){return P.error(pe),!1}}function Me(be,ke){try{var Re=re.getTime(),pe=be.id;if(ke===_.Z.EVENT_MODE_ON_RECEIVE&&!be.triggeredReceivedEvent)return P.debug("Received event ".concat(pe)),be.triggeredReceivedEvent=!0,void Be.trigger(be.eventStream.schemeIdUri,{event:be},{mode:ke});be.triggeredStartEvent||(be.eventStream.schemeIdUri===ie&&be.eventStream.value==1?be.duration===0&&be.presentationTimeDelta===0||(P.debug("Starting manifest refresh event ".concat(pe," at ").concat(Re)),function(){try{ze(),H.refreshManifest()}catch(Ne){P.error(Ne)}}()):be.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&be.eventStream.value==1?(P.debug("Starting callback event ".concat(pe," at ").concat(Re)),function(Ne){try{(0,nn.Z)(De).create({}).load({method:"get",url:Ne,request:{responseType:"arraybuffer"}})}catch(Ye){P.error(Ye)}}(be.messageData)):(P.debug("Starting event ".concat(pe," from period ").concat(be.eventStream.period.id," at ").concat(Re)),Be.trigger(be.eventStream.schemeIdUri,{event:be},{mode:ke})),be.triggeredStartEvent=!0)}catch(Ne){P.error(Ne)}}return L={addInlineEvents:function(be,ke){try{if(ze(),B[ke]||(B[ke]={}),be)for(var Re=0;Re<be.length;Re++){var pe=be[Re];if(!Q(re.getTime(),isNaN(pe.duration)?0:pe.duration,pe.calculatedPresentationTime)){var Ne=Z(pe,B[ke],!0);Ne===qe?(P.debug("Added inline event with id ".concat(pe.id," from period ").concat(ke)),Me(pe,_.Z.EVENT_MODE_ON_RECEIVE)):Ne===ge&&P.debug("Updated inline event with id ".concat(pe.id," from period ").concat(ke))}}}catch(Ye){throw Ye}},addInbandEvents:function(be,ke){try{ze(),V[ke]||(V[ke]={});for(var Re=0;Re<be.length;Re++){var pe=be[Re];Q(re.getTime(),isNaN(pe.duration)?0:pe.duration,pe.calculatedPresentationTime)||(Z(pe,V[ke],!1)===qe?(pe.eventStream.schemeIdUri===ie&&ue(pe),P.debug("Added inband event with id ".concat(pe.id," from period ").concat(ke)),Me(pe,_.Z.EVENT_MODE_ON_RECEIVE)):P.debug("Inband event with scheme_id_uri ".concat(pe.eventStream.schemeIdUri,", value ").concat(pe.eventStream.value,", period id ").concat(ke," and event id ").concat(pe.id," was ignored because it has been added before.")))}Le()}catch(Ne){throw Ne}},getInbandEvents:function(){return V},getInlineEvents:function(){return B},start:function(){try{ze(),P.debug("Start Event Controller");var be=ce.get().streaming.eventControllerRefreshDelay;Ee||isNaN(be)||(Ee=!0,ee=setInterval(Le,be))}catch(ke){throw ke}},setConfig:function(be){try{if(!be)return;be.manifestUpdater&&(H=be.manifestUpdater),be.playbackController&&(re=be.playbackController),be.settings&&(ce=be.settings)}catch(ke){throw ke}},reset:function(){(function(){try{ee!==null&&Ee&&(clearInterval(ee),ee=null,Ee=!1,function(){try{ae(V),ae(B)}catch(be){P.error(be)}}())}catch(be){throw be}})(),_e()}},P=(0,x.Z)(De).getInstance().getLogger(L),_e(),L}Co.__dashjs_factory_name="EventController";var lm=U.Z.getSingletonFactory(Co),Oi={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Df(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function du(){var L,P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z,ue,ae,se,Q,Me,be,ke,Re,pe,Ne,Ye,dt,at,Je,ht,Bt,Gt,kt,Ft,An,nt,vt,Wt,Nt,en,Jt=this.context,Yt=(0,m.Z)(Jt).getInstance();function Dn(){if(!(J&&J.hasOwnProperty("load")&&we&&we.hasOwnProperty("initialize")&&we.hasOwnProperty("reset")&&we.hasOwnProperty("getClientTimeOffset")&&H&&Le&&ce&&Ne))throw new Error(y.Z.MISSING_CONFIG_ERROR)}function Nn(){if(!ee||!ee.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function rr(){(function(){try{var Dt=re.getStreamsInfo();if(!Z&&Dt.length===0)throw new Error("There are no periods in the MPD");Z&&Dt.length>0&&ce.updateManifestUpdateInfo({currentTime:Ne.getTime(),buffered:pe.getBufferRange(),presentationStartTime:Dt[0].start,clientTimeOffset:we.getClientTimeOffset()}),je.length>0&&function(Ir){Ir.length!==0?je=je.filter(function(fr){var ri=Ir.filter(function(Qr){return Qr.id===fr.getId()}).length>0||fr.getId()===Z.getId();return ri||(P.debug("Removing stream ".concat(fr.getId())),fr.reset(!0)),ri}):P.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Dt);for(var yn=[],Hn=0,ur=Dt.length;Hn<ur;Hn++){var Tr=Dt[Hn];yn.push(It(Tr)),ce.addManifestUpdateStreamInfo(Tr)}Promise.all(yn).then(function(){return new Promise(function(Ir,fr){Z?Ir():$t(Dt,Ir,fr)})}).then(function(){Yt.trigger(T.Z.STREAMS_COMPOSED),Tn()}).catch(function(Ir){throw Ir})}catch(Ir){Le.error(new fe.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Ir.message+" nostreamscomposed",H.getValue())),ke=!0,Ja()}})()}function ir(){vt=!0}function It(Dt){var yn=jc(Dt.id);return yn?yn.updateData(Dt):(yn=Es(Jt).create({manifestModel:H,mediaPlayerModel:dt,dashMetrics:ce,manifestUpdater:ee,adapter:re,timelineConverter:we,capabilities:B,capabilitiesFilter:V,errHandler:Le,baseURLController:me,segmentBaseController:ge,textController:ae,abrController:De,playbackController:Ne,eventController:ze,mediaController:Be,protectionController:ue,videoModel:pe,streamInfo:Dt,settings:nt}),je.push(yn),yn.initialize(),Promise.resolve())}function $t(Dt,yn,Hn){try{On();var ur=ce.getCurrentDVRInfo().range;if(ur.end<ur.start){Wt&&clearTimeout(Wt);var Tr=Math.min(1e3*(-1*(ur.end-ur.start)+2),2147483647);return P.debug("Waiting for ".concat(Tr," ms before playback can start")),Yt.trigger(T.Z.AST_IN_FUTURE,{delay:Tr}),void(Wt=setTimeout(function(){$t(Dt,yn,Hn)},Tr))}nt.get().streaming.applyProducerReferenceTime&&Ye.calculateProducerReferenceTimeOffsets(Dt);var Ir=Dt[0].manifestInfo;if(nt.get().streaming.applyServiceDescription&&Ye.applyServiceDescription(Ir),re.getIsDynamic()){var fr=Ju(Dt,Ir);Ne.computeAndSetLiveDelay(fr,Ir)}(nt.get().streaming.applyContentSteering&&ie.shouldQueryBeforeStart()?ie.loadSteeringData():Promise.resolve()).then(function(){var ri=H.getValue();ri&&me.update(ri),Zt(),yn()}).catch(function(ri){P.error(ri),Zt(),yn()})}catch(ri){Hn(ri)}}function Zt(){var Dt=function(){var ur;if(re.getIsDynamic()){var Tr=ce.getCurrentDVRInfo();ur=(Tr&&Tr.range?Tr.range.end:0)-Ne.getOriginalLiveDelay();var Ir=Tr?Tr.range:null;if(Ir){if(isNaN(Nt)&&Nt.toString().indexOf("posix:")===-1){var fr=io(!0);isNaN(fr)||(P.info("Start time from URI parameters: ".concat(fr)),ur=Math.min(ur,fr))}else{P.info("Start time provided by the app: ".concat(Nt));var ri=Zi(!0,Nt);isNaN(ri)||(ur=Math.min(ur,ri))}var Qr=nt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;ur=Math.max(ur,Ir.start+Qr)}}else if(ur=Hs()[0].getStreamInfo().start,isNaN(Nt)){var Ks=io(!1);isNaN(Ks)||(P.info("Start time from URI parameters: ".concat(Ks)),ur=Math.max(ur,Ks))}else{P.info("Start time provided by the app: ".concat(Nt));var Vs=Zi(!1,Nt);isNaN(Vs)||(ur=Math.max(ur,Vs))}return ur}(),yn=Ot(Dt),Hn=yn!==null?yn:je[0];Yt.trigger(T.Z.INITIAL_STREAM_SWITCH,{startTime:Dt}),un(Hn,null,Dt),Gt||(Gt=setInterval(function(){!Me&&Ne.getTimeToStreamEnd()<=0&&!Ne.isSeeking()&&Yt.trigger(T.Z.PLAYBACK_ENDED,{isLast:da().isLast})},200))}function un(Dt,yn,Hn){try{if(Me||!Dt||yn===Dt&&Dt.getIsActive())return;Me=!0,Yt.trigger(T.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:yn?yn.getStreamInfo():null,toStreamInfo:Dt.getStreamInfo()});var ur=!1;Z=Dt,yn&&(ur=Sn(Dt,yn),yn.deactivate(ur)),Hn=isNaN(Hn)?!ur&&yn?Dt.getStreamInfo().start:NaN:Hn,P.info("Switch to stream ".concat(Dt.getId(),". Seektime is ").concat(Hn,", current playback time is ").concat(Ne.getTime(),". Seamless period switch is set to ").concat(ur)),Ft=Ft.filter(function(Tr){return Tr.getId()!==Z.getId()}),Ne.initialize(da(),!!yn),pe.getElement()?vn(Hn,ur,!1):Pn(Hn,ur)}catch(Tr){Me=!1}}function vn(Dt,yn){var Hn,ur=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function Tr(){if(Re&&Re.readyState==="open"){P.debug("MediaSource is open!"),window.URL.revokeObjectURL(Hn),Re.removeEventListener("sourceopen",Tr),Re.removeEventListener("webkitsourceopen",Tr),zr();var fr=ce.getCurrentDVRInfo();Se.setSeekable(fr.range.start,fr.range.end),ur?(isNaN(Dt)||Ne.seek(Dt,!0,!0),Z.setMediaSource(Re).then(function(){Z.initializeForTextWithMediaSource(Re)})):Pn(Dt,yn)}}function Ir(){Re.addEventListener("sourceopen",Tr,!1),Re.addEventListener("webkitsourceopen",Tr,!1),Hn=Se.attachMediaSource(pe),P.debug("MediaSource attached to element.  Waiting on open...")}Re?yn?Pn(Dt,yn):(Se.detachMediaSource(pe),Ir()):(Re=Se.createMediaSource(),Ir())}function Pn(Dt,yn){Z.activate(Re,yn?kt:void 0,Dt).then(function(Hn){if(Hn){var ur=Object.keys(Hn);ur.length>0&&Hn[ur[0]].getBuffer().changeType&&(An=!0),kt=Hn}isNaN(Dt)||(Yt.trigger(T.Z.SEEK_TARGET,{time:Dt},{streamId:Z.getId()}),Ne.seek(Dt,!1,!0),Z.startScheduleControllers()),Me=!1,Yt.trigger(T.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:da()})})}function xn(Dt){var yn=Ot(Dt.seekTime);yn&&yn!==Z?yn&&yn!==Z&&(Fn(),function(Hn,ur){var Tr=Hn&&!isNaN(Hn.seekTime)?Hn.seekTime:NaN,Ir=Z.getProcessors().map(function(fr){return fr.prepareOuterPeriodPlaybackSeeking(Hn)});Promise.all(Ir).then(function(){un(ur,Z,Tr)}).catch(function(fr){Le.error(fr)})}(Dt,yn)):(Fn(),function(Hn){Z.getProcessors().forEach(function(ur){return ur.prepareInnerPeriodPlaybackSeeking(Hn)}),Oo(et.USER_REQUEST_STOP_REASON)}(Dt)),_u(rt.SEEK_START_REASON)}function Fn(){Gn()}function Gn(){Ft&&Ft.length>0&&(Ft.forEach(function(Dt){Dt.deactivate(!0)}),Ft=[])}function bt(Dt){if(Dt.newMediaInfo.streamInfo.id===Z.getId()){if(Gn(),nt.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&Dt.oldMediaInfo&&Dt.oldMediaInfo.codec!==Dt.newMediaInfo.codec){var yn=Ne.getTime();return Z.deactivate(!1),void vn(yn,!1,!1)}Z.prepareTrackChange(Dt)}}function Sn(Dt,yn){try{return nt.get().streaming.buffer.reuseExistingSourceBuffers&&(yn.isProtectionCompatible(Dt)||vt)&&(An&&nt.get().streaming.buffer.useChangeTypeForTrackSwitch||yn.isMediaCodecCompatible(Dt,yn))}catch(Hn){return!1}}function En(Dt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Re&&!Dt.getPreloaded()){var Hn=Sn(Dt,yn);Hn&&Dt.startPreloading(Re,kt).then(function(){Ft.push(Dt)})}}function Ot(Dt){if(isNaN(Dt))return null;for(var yn=je.length,Hn=0;Hn<yn;Hn++){var ur=je[Hn];if(Dt<parseFloat((ur.getStartTime()+ur.getDuration()).toFixed(5)))return ur}return null}function On(){try{var Dt=re.getIsDynamic(),yn=re.getStreamsInfo()[0].manifestInfo,Hn=Ne.getTime(),ur=we.calcTimeShiftBufferWindow(je,Dt),Tr=Zr();if(ur.start===void 0||ur.end===void 0)return;Tr&&Tr.length!==0?Tr.forEach(function(Ir){ce.addDVRInfo(Ir.getType(),Hn,yn,ur)}):ce.addDVRInfo(y.Z.VIDEO,Hn,yn,ur)}catch(Ir){}}function st(Dt){if(ht&&Q){var yn=dt.getInitialBufferLevel(),Hn=[y.Z.TEXT];(isNaN(yn)||yn<=Ne.getBufferLevel(Hn)||re.getIsDynamic()&&yn>Ne.getLiveDelay())&&(ht=!1,_u(rt.INITIAL_PLAYOUT_START_REASON),Ne.play())}Dt&&Dt.mediaType&&ce.addBufferLevel(Dt.mediaType,new Date,1e3*Dt.bufferLevel)}function tt(Dt){Dt.streamInfo.id===Z.getId()&&Dt.reason&&Dt.reason.forceReplace&&Gn(),jc(Dt.streamInfo.id).prepareQualityChange(Dt)}function qt(){if(re.getIsDynamic()&&Ne.getOriginalLiveDelay()!==0&&Z){var Dt=re.getStreamsInfo();if(Dt.length>0){var yn=Dt[0].manifestInfo,Hn=Ju(Dt,yn);Ne.computeAndSetLiveDelay(Hn,yn)}}}function Ve(){if(Qa()){var Dt=pe.getPlaybackQuality();Dt&&ce.addDroppedFrames(Dt)}}function Ke(){P.debug("[onPlaybackStarted]"),!ht&&Je&&_u(rt.RESUME_FROM_PAUSE_START_REASON),ht&&(ht=!1),Bt&&(Bt=!1,nt.get().streaming.applyContentSteering&&!ie.shouldQueryBeforeStart()&&ie.loadSteeringData()),Je=!1}function Mt(Dt){P.debug("[onPlaybackPaused]"),Dt.ended||(Je=!0,Oo(et.USER_REQUEST_STOP_REASON))}function fn(Dt){P.debug("Stream with id ".concat(Dt.streamInfo.id," finished buffering"));var yn=Dt.streamInfo.isLast;Re&&yn?(P.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),Se.signalEndOfStream(Re)):Tn()}function Tn(){if(Z&&Z.getHasFinishedBuffering())for(var Dt=function(){var Tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var Ir=Tr||Z||null;if(Ir){var fr=Ir.getStreamInfo();return je.filter(function(ri){var Qr=ri.getStreamInfo();return Qr.start>fr.start&&fr.id!==Qr.id})}}catch(ri){return[]}}(Z),yn=0;yn<Dt.length;){var Hn=Dt[yn],ur=yn===0?Z:Dt[yn-1];!Hn.getPreloaded()&&ur.getHasFinishedBuffering()&&Re&&En(Hn,ur),yn+=1}}function sr(){Gt&&(clearInterval(Gt),Gt=null)}function Zr(){return Z?Z.getProcessors():[]}function Ai(Dt){if(Z&&!Z.getIsEndedEventSignaled()){Z.setIsEndedEventSignaled(!0);var yn=function(){var Hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ur=Hn||Z||null;if(!ur)return null;for(var Tr=ur.getStreamInfo(),Ir=Tr.start,fr=0,ri=-1,Qr=NaN;fr<je.length;){var Ks=je[fr].getStreamInfo(),Vs=Ks.start-Ir;Vs>0&&(isNaN(Qr)||Vs<Qr)&&Tr.id!==Ks.id&&(Qr=Vs,ri=fr),fr+=1}return ri>=0?je[ri]:null}();yn?(P.debug("StreamController onEnded, found next stream with id ".concat(yn.getStreamInfo().id,". Switching from ").concat(Z.getStreamInfo().id," to ").concat(yn.getStreamInfo().id)),un(yn,Z,NaN)):(P.debug("StreamController no next stream found"),Z.setIsEndedEventSignaled(!1)),Oo(yn?et.END_OF_PERIOD_STOP_REASON:et.END_OF_CONTENT_STOP_REASON)}Dt&&Dt.isLast&&(sr(),ie.stopSteeringRequestTimer())}function zr(Dt){var yn=Dt||da().manifestInfo.duration;Se.setDuration(yn)}function io(Dt){var yn=qe.getURIFragmentData();if(!yn||!yn.t)return NaN;var Hn=Hs()[0].getStreamInfo().start;return yn.t=yn.t.split(",")[0],Gs(Dt,yn.t,Hn)}function Zi(Dt,yn){var Hn=0;return Dt||(Hn=Hs()[0].getStreamInfo().start),Gs(Dt,yn,Hn)}function Gs(Dt,yn,Hn){var ur=re.getRegularPeriods()[0],Tr=yn.toString(),Ir=Tr.indexOf("posix:")!==-1?Tr.substring(6)==="now"?Date.now()/1e3:parseFloat(Tr.substring(6)):NaN;return Dt&&!isNaN(Ir)?we.calcPresentationTimeFromWallTime(new Date(1e3*Ir),ur):parseFloat(Tr)+Hn}function Ju(Dt,yn){try{var Hn=NaN;if(yn&&!isNaN(yn.maxFragmentDuration)&&isFinite(yn.maxFragmentDuration))return yn.maxFragmentDuration;if(Dt&&Dt.length===1){var ur=Dt[0],Tr=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT].reduce(function(fr,ri){var Qr=re.getMediaInfoForType(ur,ri);return Qr&&Qr.isFragmented!==!1&&fr.push(Qr),fr},[]).reduce(function(fr,ri){var Qr=re.getVoRepresentations(ri);return Qr&&Qr.length>0&&Qr.forEach(function(Ks){Ks&&fr.push(Ks)}),fr},[]).reduce(function(fr,ri){var Qr=re.convertRepresentationToRepresentationInfo(ri);return Qr&&Qr.fragmentDuration&&!isNaN(Qr.fragmentDuration)&&fr.push(Qr.fragmentDuration),fr},[]);Hn=Math.max.apply(Math,function(fr){if(Array.isArray(fr))return Df(fr)}(Ir=Tr)||function(fr){if(typeof Symbol<"u"&&Symbol.iterator in Object(fr))return Array.from(fr)}(Ir)||function(fr,ri){if(fr){if(typeof fr=="string")return Df(fr,ri);var Qr=Object.prototype.toString.call(fr).slice(8,-1);return Qr==="Object"&&fr.constructor&&(Qr=fr.constructor.name),Qr==="Map"||Qr==="Set"?Array.from(fr):Qr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qr)?Df(fr,ri):void 0}}(Ir)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(Hn)?Hn:NaN}catch(fr){return NaN}var Ir}function el(Dt){if(Dt.error)ke=!0,Ja();else{P.info("Manifest updated... updating data system wide.");var yn=Dt.manifest;re.updatePeriods(yn);var Hn=re.getUTCTimingSources();!re.getIsDynamic()||Hn&&Hn.length!==0||Yt.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Oi.LEVELS.WARNING,event:Oi.EVENTS.NO_UTC_TIMING_ELEMENT});var ur=re.getIsDynamic()?Hn.concat(at.getUTCTimingSources()):Hn;V.filterUnsupportedFeatures(yn).then(function(){me.initialize(yn),Ee.attemptSync(ur,re.getIsDynamic())})}}function Qa(){return!!Z&&Z.getHasVideoTrack()}function qs(){return!!Z&&Z.getHasAudioTrack()}function Oo(Dt,yn){yn=yn||new Date,Zr().forEach(function(Hn){Hn.finalisePlayList(yn,Dt)}),ce.addPlayList()}function _u(Dt){ce.createPlaylistMetrics(1e3*Ne.getTime(),Dt)}function Tu(Dt){if(Dt.error){var yn="";switch(Dt.error.code){case 1:yn="MEDIA_ERR_ABORTED";break;case 2:yn="MEDIA_ERR_NETWORK";break;case 3:yn="MEDIA_ERR_DECODE",en.counts.mediaErrorDecode+=1;break;case 4:yn="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:yn="MEDIA_ERR_ENCRYPTED";break;default:yn="UNKNOWN"}yn==="MEDIA_ERR_DECODE"&&nt.get().errors.recoverAttempts.mediaErrorDecode>=en.counts.mediaErrorDecode?function(){P.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Hn=Ne.getTime();Z.deactivate(!1),P.warn("MediaSource has been resetted. Resuming playback from time ".concat(Hn)),vn(Hn,!1,!1)}():(be=!0,Dt.error.message&&(yn+=" ("+Dt.error.message+")"),Dt.error.msExtendedCode&&(yn+=" (0x"+(Dt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),P.fatal("Video Element Error: "+yn),Dt.error&&P.fatal(Dt.error),Le.error(new fe.Z(Dt.error.code,yn)),Ja())}}function da(){return Z?Z.getStreamInfo():null}function jc(Dt){for(var yn=0,Hn=je.length;yn<Hn;yn++)if(je[yn].getId()===Dt)return je[yn];return null}function Jf(Dt){isNaN(Dt.newDuration)||zr(Dt.newDuration)}function tl(){je=[],Nt=NaN,ue=null,Me=!1,Z=null,be=!1,ke=!1,ht=!0,Bt=!0,Je=!1,Q=!0,Gt=null,vt=!1,An=!1,Ft=[],Wt=null,en={counts:{mediaErrorDecode:0}}}function Ja(){Dn(),Ee.reset(),Oo(be||ke?et.FAILURE_STOP_REASON:et.USER_REQUEST_STOP_REASON);for(var Dt=0,yn=je?je.length:0;Dt<yn;Dt++)je[Dt].reset(be);Yt.off(_.Z.PLAYBACK_TIME_UPDATED,Ve,L),Yt.off(_.Z.PLAYBACK_SEEKING,xn,L),Yt.off(_.Z.PLAYBACK_ERROR,Tu,L),Yt.off(_.Z.PLAYBACK_STARTED,Ke,L),Yt.off(_.Z.PLAYBACK_PAUSED,Mt,L),Yt.off(_.Z.PLAYBACK_ENDED,Ai,L),Yt.off(_.Z.METRIC_ADDED,Zc,L),Yt.off(_.Z.MANIFEST_VALIDITY_CHANGED,Jf,L),Yt.off(_.Z.BUFFER_LEVEL_UPDATED,st,L),Yt.off(_.Z.QUALITY_CHANGE_REQUESTED,tt,L),T.Z.KEY_SESSION_UPDATED&&Yt.off(T.Z.KEY_SESSION_UPDATED,ir,L),Yt.off(T.Z.MANIFEST_UPDATED,el,L),Yt.off(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Yt.off(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Yt.off(T.Z.CURRENT_TRACK_CHANGED,bt,L),Yt.off(T.Z.SETTING_UPDATED_LIVE_DELAY,qt,L),Yt.off(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,qt,L),me.reset(),ee.reset(),ze.reset(),ce.clearAllCurrentMetrics(),H.setValue(null),J.reset(),we.reset(),_e.reset(),Re&&(Se.detachMediaSource(pe),Re=null),pe=null,ue&&(ue=null,se=null,H.getValue()&&Yt.trigger(T.Z.PROTECTION_DESTROYED,{data:H.getValue().url})),sr(),Yt.trigger(T.Z.STREAM_TEARDOWN_COMPLETE),tl()}function Zc(Dt){if(Dt.metric===D.Z.DVR_INFO){var yn=qs()?y.Z.AUDIO:y.Z.VIDEO;Dt.mediaType===yn&&Se.setSeekable(Dt.value.range.start,Dt.value.range.end)}}function Hs(){return je}return L={initialize:function(Dt,yn){Dn(),Q=Dt,se=yn,we.initialize(),(ee=Vr(Jt).create()).setConfig({manifestModel:H,adapter:re,manifestLoader:J,errHandler:Le,settings:nt,contentSteeringController:ie}),ee.initialize(),(ze=lm(Jt).getInstance()).setConfig({manifestUpdater:ee,playbackController:Ne,settings:nt}),ze.start(),Ee.setConfig({dashMetrics:ce,baseURLController:me,errHandler:Le,settings:nt}),Ee.initialize(),Se.setConfig({settings:nt}),ue&&(Yt.trigger(T.Z.PROTECTION_CREATED,{controller:ue}),ue.setMediaElement(pe.getElement()),se&&ue.setProtectionData(se)),Yt.on(_.Z.PLAYBACK_TIME_UPDATED,Ve,L),Yt.on(_.Z.PLAYBACK_SEEKING,xn,L),Yt.on(_.Z.PLAYBACK_ERROR,Tu,L),Yt.on(_.Z.PLAYBACK_STARTED,Ke,L),Yt.on(_.Z.PLAYBACK_PAUSED,Mt,L),Yt.on(_.Z.PLAYBACK_ENDED,Ai,L),Yt.on(_.Z.METRIC_ADDED,Zc,L),Yt.on(_.Z.MANIFEST_VALIDITY_CHANGED,Jf,L),Yt.on(_.Z.BUFFER_LEVEL_UPDATED,st,L),Yt.on(_.Z.QUALITY_CHANGE_REQUESTED,tt,L),T.Z.KEY_SESSION_UPDATED&&Yt.on(T.Z.KEY_SESSION_UPDATED,ir,L),Yt.on(T.Z.MANIFEST_UPDATED,el,L),Yt.on(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Yt.on(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Yt.on(T.Z.CURRENT_TRACK_CHANGED,bt,L),Yt.on(T.Z.SETTING_UPDATED_LIVE_DELAY,qt,L),Yt.on(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,qt,L)},getActiveStreamInfo:da,addDVRMetric:On,hasVideoTrack:Qa,hasAudioTrack:qs,getStreamById:jc,getStreamForTime:Ot,getTimeRelativeToStreamId:function(Dt,yn){for(var Hn=null,ur=0,Tr=0,Ir=null,fr=0;fr<je.length;fr++){if(Tr=(Hn=je[fr]).getStartTime(),Ir=Hn.getDuration(),Number.isFinite(Tr)&&(ur=Tr),Hn.getId()===yn)return Dt-ur;Number.isFinite(Ir)&&(ur+=Ir)}return null},load:function(Dt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Dn(),Nt=yn,J.load(Dt)},loadWithManifest:function(Dt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Nn(),Nt=yn,ee.setManifest(Dt)},getActiveStreamProcessors:Zr,setConfig:function(Dt){Dt&&(Dt.capabilities&&(B=Dt.capabilities),Dt.capabilitiesFilter&&(V=Dt.capabilitiesFilter),Dt.manifestLoader&&(J=Dt.manifestLoader),Dt.manifestModel&&(H=Dt.manifestModel),Dt.mediaPlayerModel&&(dt=Dt.mediaPlayerModel),Dt.customParametersModel&&(at=Dt.customParametersModel),Dt.protectionController&&(ue=Dt.protectionController),Dt.adapter&&(re=Dt.adapter),Dt.dashMetrics&&(ce=Dt.dashMetrics),Dt.errHandler&&(Le=Dt.errHandler),Dt.timelineConverter&&(we=Dt.timelineConverter),Dt.videoModel&&(pe=Dt.videoModel),Dt.playbackController&&(Ne=Dt.playbackController),Dt.serviceDescriptionController&&(Ye=Dt.serviceDescriptionController),Dt.contentSteeringController&&(ie=Dt.contentSteeringController),Dt.textController&&(ae=Dt.textController),Dt.abrController&&(De=Dt.abrController),Dt.mediaController&&(Be=Dt.mediaController),Dt.settings&&(nt=Dt.settings),Dt.baseURLController&&(me=Dt.baseURLController),Dt.uriFragmentModel&&(qe=Dt.uriFragmentModel),Dt.segmentBaseController&&(ge=Dt.segmentBaseController),Dt.manifestUpdater&&(ee=Dt.manifestUpdater))},setProtectionData:function(Dt){se=Dt,ue&&ue.setProtectionData(se)},getIsStreamSwitchInProgress:function(){return Me},switchToVideoElement:function(Dt){Z&&(Ne.initialize(da()),vn(Dt,!1,!0))},getHasMediaOrInitialisationError:function(){return be||ke},getStreams:Hs,getActiveStream:function(){return Z},getInitialPlayback:function(){return ht},getAutoPlay:function(){return Q},refreshManifest:function(){ee.getIsUpdating()||ee.refreshManifest()},reset:Ja},P=(0,x.Z)(Jt).getInstance().getLogger(L),Ee=za(Jt).getInstance(),Se=Ch(Jt).getInstance(),_e=Qe(Jt).getInstance(),tl(),L}du.__dashjs_factory_name="StreamController";var Ho=U.Z.getSingletonFactory(du);function hu(){var L,P,B,V,ee,J,H,re,ce,Se,Ee,ie,me=this.context,ge=(0,m.Z)(me).getInstance();function qe(){ie.debug("Stopping the gap controller"),ee&&(clearInterval(ee),ee=null),function(){ge.off(T.Z.WALLCLOCK_TIME_UPDATED,Le,this),ge.off(T.Z.INITIAL_STREAM_SWITCH,_e,this),ge.off(T.Z.PLAYBACK_SEEKING,De,this),ge.off(T.Z.BUFFER_REPLACEMENT_STARTED,Be,L),ge.off(T.Z.TRACK_CHANGE_RENDERED,ze,L)}(),ee=null,J=NaN,V=0,Se=null,Ee={}}function De(){Se&&(clearTimeout(Se),Se=null)}function Be(se){try{if(se.streamId!==re.getActiveStreamInfo().id||se.mediaType!==y.Z.VIDEO&&se.mediaType!==y.Z.AUDIO)return;se.streamId===re.getActiveStreamInfo().id&&(Ee[se.mediaType]=!0)}catch(Q){ie.error(Q)}}function ze(se){se&&se.mediaType&&(Ee[se.mediaType]=!1)}function _e(){ee||function(){try{ee||(ie.debug("Starting the gap controller"),ee=setInterval(function(){we()&&ae(H.getTime())},100))}catch(se){}}()}function Le(){if(we(B.get().streaming.gaps.enableSeekFix)&&++V>=10){var se=H.getTime();P===se?ae(se,!0):(P=se,J=NaN),V=0}}function we(){var se=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!re.getActiveStream())return!1;var Q=Object.keys(Ee).some(function(be){return Ee[be]}),Me=!!se&&je();return!Q&&B.get().streaming.gaps.jumpGaps&&re.getActiveStreamProcessors().length>0&&(!H.isSeeking()||Me)&&!H.isPaused()&&!re.getIsStreamSwitchInProgress()&&!re.getHasMediaOrInitialisationError()}function je(){var se=re.getActiveStream(),Q=parseFloat((se.getStartTime()+se.getDuration()).toFixed(5));return H.getTime()+B.get().streaming.gaps.threshold>=Q}function Z(se,Q){try{if(!se||se.length<=1&&Q>0)return NaN;for(var Me=NaN,be=0;isNaN(Me)&&be<se.length;){var ke=be>0?se.end(be-1):0;Q<se.start(be)&&ke-Q<B.get().streaming.gaps.threshold&&(Me=be),be+=1}return Me}catch(Re){return null}}function ue(se,Q){for(var Me=0,be=se.length;Me<be;Me++)if(Q>=se.start(Me)&&Q<=se.end(Me))return!0;return!1}function ae(se){var Q,Me=arguments.length>1&&arguments[1]!==void 0&&arguments[1],be=B.get().streaming.gaps.enableStallFix,ke=B.get().streaming.gaps.stallSeek,Re=B.get().streaming.gaps.smallGapLimit,pe=B.get().streaming.gaps.jumpLargeGaps,Ne=ce.getBufferRange(),Ye=NaN,dt=!1;if(Q=Z(Ne,se),!isNaN(Q)){var at=Ne.start(Q),Je=at-se;Je>0&&(Je<=Re||pe)&&(Ye=at)}var ht=H.getTimeToStreamEnd();if(isNaN(Ye)&&Me&&isFinite(ht)&&!isNaN(ht)&&ht<Re&&(Ye=parseFloat(H.getStreamEndTime().toFixed(5)),dt=!0),be&&isNaN(Ye)&&Me&&isNaN(Q)&&ue(Ne,se)&&(ke===0?(ie.warn("Toggle play pause to break stall"),ce.pause(),ce.play()):(ie.warn("Jumping ".concat(ke,"s to break stall")),Ye=se+ke)),Ye>0&&J!==Ye&&Ye>se&&!Se){var Bt=Ye-se;if(dt){var Gt=re.getStreamForTime(Ye),kt=Gt&&!!Gt.getPreloaded();ie.warn("Jumping to end of stream because of gap from ".concat(se," to ").concat(Ye,". Gap duration: ").concat(Bt)),H.seek(Ye,!0,kt)}else{var Ft=H.getIsDynamic(),An=Q>0?Ne.end(Q-1):se,nt=Ft?1e3*Math.max(0,Bt-.1):0;Se=window.setTimeout(function(){H.seek(Ye,!0,!0),ie.warn("Jumping gap occuring in period ".concat(re.getActiveStream().getStreamId()," starting at ").concat(An," and ending at ").concat(Ye,". Jumping by: ").concat(Ye-An)),Se=null},nt)}J=Ye}}return L={reset:qe,setConfig:function(se){se&&(se.settings&&(B=se.settings),se.playbackController&&(H=se.playbackController),se.streamController&&(re=se.streamController),se.videoModel&&(ce=se.videoModel))},initialize:function(){(function(){ge.on(T.Z.WALLCLOCK_TIME_UPDATED,Le,this),ge.on(T.Z.INITIAL_STREAM_SWITCH,_e,this),ge.on(T.Z.PLAYBACK_SEEKING,De,this),ge.on(T.Z.BUFFER_REPLACEMENT_STARTED,Be,L),ge.on(T.Z.TRACK_CHANGE_RENDERED,ze,L)})()}},ie=(0,x.Z)(me).getInstance().getLogger(L),qe(),L}hu.__dashjs_factory_name="GapController";var ks=U.Z.getSingletonFactory(hu);function li(){var L,P,B,V,ee,J,H,re,ce,Se,Ee=this.context,ie=(0,m.Z)(Ee).getInstance();function me(){P=!1;var je=rn.Z.parseUserAgent();B=je&&je.browser&&je.browser.name&&je.browser.name.toLowerCase()==="safari"}function ge(){P=!1}function qe(je){if(je.streamId===J.getActiveStreamInfo().id&&ce){var Z=H.getLiveDelay();H.getBufferLevel()>Z/2&&(ce=!1)}}function De(je){je.streamId===J.getActiveStreamInfo().id&&(ce=je.state===D.Z.BUFFER_EMPTY)}function Be(){re.getCatchupModeEnabled()||V.setPlaybackRate(1)}function ze(){H.getIsDynamic()&&re.getCatchupModeEnabled()&&(re.getCatchupPlaybackRates().max>0||re.getCatchupPlaybackRates().min<0)&&!H.isPaused()&&!H.isSeeking()&&function(){try{return!(!H.getTime()>0||P)&&(Le()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(je,Z){try{return Math.abs(_e())>0||je<Z}catch(ue){return!1}}(H.getBufferLevel(),ee.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(_e())>0}catch(je){return!1}}())}catch(je){return!1}}()&&function(){if(!P&&V){var je,Z=V.getPlaybackRate(),ue=re.getCatchupPlaybackRates(),ae=H.getBufferLevel(),se=_e(),Q=re.getCatchupMaxDrift();if(!isNaN(Q)&&Q>0&&se>Q)Se.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),P=!0,H.seekToCurrentLive(!0,!1);else{var Me=H.getCurrentLiveLatency(),be=H.getLiveDelay();je=Le()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(Re,pe,Ne,Ye,dt){var at;if(dt<Ye){var Je=Math.abs(Re.min),ht=5*(dt-Ye);at=1-Je+2*Je/(1+Math.pow(Math.E,-ht)),Se.debug("[LoL+ playback control_buffer-based] bufferLevel: "+dt+", newRate: "+at)}else{if(Math.abs(pe-Ne)<=.02*Ne)at=1;else{var Bt=pe-Ne,Gt=Bt<0?Math.abs(Re.min):Re.max,kt=5*Bt;at=1-Gt+2*Gt/(1+Math.pow(Math.E,-kt))}Se.debug("[LoL+ playback control_latency-based] latency: "+pe+", newRate: "+at)}return at}(ue,Me,be,ee.get().streaming.liveCatchup.playbackBufferMin,ae):function(Re,pe,Ne,Ye){if(ce)return 1;var dt=pe-Ne,at=dt<0?Math.abs(Re.min):Re.max,Je=5*dt,ht=1-at+2*at/(1+Math.pow(Math.E,-Je));return H.getPlaybackStalled()&&Ye<=Ne/2&&dt>0&&(ht=1),ht}(ue,Me,be,ae);var ke=B?.25:.02/(.5/ue.max);je&&Math.abs(Z-je)>=ke&&(Se.debug("[CatchupController]: Setting playback rate to ".concat(je)),V.setPlaybackRate(je))}}}()}function _e(){return H.getCurrentLiveLatency()-H.getLiveDelay()}function Le(){var je=ee.get().streaming.liveCatchup.playbackBufferMin;return ee.get().streaming.liveCatchup.mode!==y.Z.LIVE_CATCHUP_MODE_LOLP||je===null||isNaN(je)?y.Z.LIVE_CATCHUP_MODE_DEFAULT:y.Z.LIVE_CATCHUP_MODE_LOLP}function we(){re.getCatchupPlaybackRates(!0)}return L={reset:function(){ie.off(_.Z.BUFFER_LEVEL_UPDATED,qe,L),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,De,L),ie.off(_.Z.PLAYBACK_PROGRESS,ze,L),ie.off(_.Z.PLAYBACK_TIME_UPDATED,ze,L),ie.off(_.Z.PLAYBACK_SEEKED,ge,L),ie.off(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Be,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,we,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,we,L),ie.off(_.Z.STREAM_INITIALIZED,we,L),me(),V.setPlaybackRate(1,!0)},setConfig:function(je){je&&(je.settings&&(ee=je.settings),je.videoModel&&(V=je.videoModel),je.streamController&&(J=je.streamController),je.playbackController&&(H=je.playbackController),je.mediaPlayerModel&&(re=je.mediaPlayerModel))},initialize:function(){ie.on(_.Z.BUFFER_LEVEL_UPDATED,qe,L),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,De,L),ie.on(_.Z.PLAYBACK_PROGRESS,ze,L),ie.on(_.Z.PLAYBACK_TIME_UPDATED,ze,L),ie.on(_.Z.PLAYBACK_SEEKED,ge,L),ie.on(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Be,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,we,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,we,L),ie.on(_.Z.STREAM_INITIALIZED,we,L),we()}},Se=(0,x.Z)(Ee).getInstance().getLogger(L),me(),L}li.__dashjs_factory_name="CatchupController";var co=U.Z.getSingletonFactory(li),Fu=[y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],Rh="video",Uu="audio";function Ro(){var L,P,B,V,ee,J=this.context;function H(){P={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},B=[]}function re(ce,Se,Ee){try{P[ce][Se]=Ee/1e3}catch(ie){V.error(ie)}}return L={getServiceDescriptionSettings:function(){return P},getProducerReferenceTimeOffsets:function(){return B},calculateProducerReferenceTimeOffsets:function(ce){try{var Se=[];if(ce&&ce.length>0){var Ee=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT],ie=ee.getAvailabilityStartTime()/1e3;ce.forEach(function(me){var ge=Ee.reduce(function(qe,De){return qe.concat(ee.getAllMediaInfoForType(me,De))},[]).reduce(function(qe,De){return ee.getProducerReferenceTimes(me,De).forEach(function(Be){var ze=ee.getVoRepresentations(De);if(ze&&ze.length>0&&ze[0].adaptation&&ze[0].segmentInfoType===v.Z.SEGMENT_TEMPLATE){var _e=ze[0],Le=new Date(Be[v.Z.WALL_CLOCK_TIME]).getTime()/1e3-(Be[v.Z.PRESENTATION_TIME]/_e[v.Z.TIMESCALE]-_e[v.Z.PRESENTATION_TIME_OFFSET]+me.start),we=ie-Le;qe.push({id:Be[v.Z.ID],to:we})}}),qe},[]);Se=Se.concat(ge)})}B=Se}catch(me){V.error(me),B=[]}},applyServiceDescription:function(ce){if(ce&&ce.serviceDescriptions){var Se=ce.serviceDescriptions.filter(function(me){return Fu.includes(me.schemeIdUri)}),Ee=ce.serviceDescriptions.filter(function(me){return me.schemeIdUri==null}),ie=Se.length>0?Se[Se.length-1]:Ee[Ee.length-1];ie&&(ie.latency&&ie.latency.target>0&&function(me){var ge;if(me.schemeIdUri,y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,ge=function(ze){return{liveDelay:ze.latency.target/1e3,maxDrift:!isNaN(ze.latency.max)&&ze.latency.max>ze.latency.target?(ze.latency.max-ze.latency.target+500)/1e3:NaN,referenceId:ze.latency.referenceId||NaN}}(me),B.length>0){var qe=function(ze){var _e,Le=0,we=B.filter(function(je){return je.id===ze.referenceId});return we.length===0?(Le=B.length>0?B[0].to:0,_e=B[0].id||NaN):(Le=we[0].to||0,_e=we[0].id||NaN),{to:Le,id:_e}}(ge),De=qe.to,Be=qe.id;P.liveDelay=ge.liveDelay-De,P.liveCatchup.maxDrift=ge.maxDrift,V.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(De," from ProducerReferenceTime element with id ").concat(Be,".\n                Live Delay: ").concat(ge.liveDelay-De,", Live catchup max drift: ").concat(ge.maxDrift,"\n            "))}else P.liveDelay=ge.liveDelay,P.liveCatchup.maxDrift=ge.maxDrift,V.debug("Found latency properties coming from service description: Live Delay: ".concat(ge.liveDelay,", Live catchup max drift: ").concat(ge.maxDrift))}(ie),ie.playbackRate&&function(me){var ge=me.playbackRate.min?Math.round(1e3*(me.playbackRate.min-1))/1e3:NaN,qe=me.playbackRate.max?Math.round(1e3*(me.playbackRate.max-1))/1e3:NaN;P.liveCatchup.playbackRate.min=ge,P.liveCatchup.playbackRate.max=qe,V.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(ge)),V.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(qe))}(ie),ie.operatingQuality,ie.operatingBandwidth&&function(me){if(me&&me.operatingBandwidth&&me.operatingBandwidth.mediaType&&me.operatingBandwidth.mediaType!=="all"){var ge={};ge.minBandwidth=me.operatingBandwidth.min,ge.maxBandwidth=me.operatingBandwidth.max,ge.targetBandwidth=me.operatingBandwidth.target;var qe=[];me.operatingBandwidth.mediaType===Rh||me.operatingBandwidth.mediaType===Uu?qe.push(me.operatingBandwidth.mediaType):me.operatingBandwidth.mediaType==="any"&&(qe.push(Uu),qe.push(Rh)),qe.forEach(function(De){isNaN(ge.minBandwidth)||re("minBitrate",De,ge.minBandwidth),isNaN(ge.maxBandwidth)||re("maxBitrate",De,ge.maxBandwidth),isNaN(ge.targetBandwidth)||re("initialBitrate",De,ge.targetBandwidth)})}}(ie),ie.contentSteering&&function(me){P.contentSteering=me.contentSteering}(ie))}},reset:function(){H()},setConfig:function(ce){ce&&ce.adapter&&(ee=ce.adapter)}},V=(0,x.Z)(J).getInstance().getLogger(L),H(),L}Ro.__dashjs_factory_name="ServiceDescriptionController";var Nh=U.Z.getSingletonFactory(Ro),vr=w(3973),yi=w.n(vr),xh=w(3039);function Sc(){var L,P,B,V,ee,J,H,re,ce=this.context,Se=(0,m.Z)(ce).getInstance();function Ee(pe,Ne){return pe&&B[Ne]&&B[Ne][pe]?B[Ne][pe].list:[]}function ie(pe,Ne){return pe&&B[Ne]&&B[Ne][pe]?B[Ne][pe].current:null}function me(pe){var Ne=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(pe&&pe.streamInfo){var Ye=pe.type,dt=pe.streamInfo,at=dt.id,Je=ie(Ye,at);if(B[at]&&B[at][Ye]&&(B[at][Ye].current=pe,B[at][Ye].current&&(Ye!==y.Z.TEXT&&!De(pe,Je)||Ye===y.Z.TEXT&&pe.isFragmented)&&Se.trigger(T.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:Je,newMediaInfo:pe,switchMode:V.get().streaming.trackSwitchMode[Ye]},{streamId:at}),!Ne)){var ht=ze(pe);if(!ht||!B[at][Ye].storeLastSettings)return;ht.roles&&(ht.role=ht.roles[0],delete ht.roles),ht.accessibility&&(ht.accessibility=ht.accessibility[0]),ht.audioChannelConfiguration&&(ht.audioChannelConfiguration=ht.audioChannelConfiguration[0]),J[Ye]=ht,re.setSavedMediaSettings(Ye,ht)}}}function ge(pe,Ne){pe&&Ne&&(ee[pe]=Ne)}function qe(pe){return pe?ee[pe]:null}function De(pe,Ne){if(!pe&&!Ne)return!0;if(!pe||!Ne)return!1;var Ye=pe.id===Ne.id,dt=pe.viewpoint===Ne.viewpoint,at=JSON.stringify(pe.viewpointsWithSchemeIdUri)===JSON.stringify(Ne.viewpointsWithSchemeIdUri),Je=pe.lang===Ne.lang,ht=pe.codec===Ne.codec,Bt=pe.roles.toString()===Ne.roles.toString(),Gt=JSON.stringify(pe.rolesWithSchemeIdUri)===JSON.stringify(Ne.rolesWithSchemeIdUri),kt=pe.accessibility.toString()===Ne.accessibility.toString(),Ft=JSON.stringify(pe.accessibilitiesWithSchemeIdUri)===JSON.stringify(Ne.accessibilitiesWithSchemeIdUri),An=pe.audioChannelConfiguration.toString()===Ne.audioChannelConfiguration.toString(),nt=JSON.stringify(pe.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(Ne.audioChannelConfigurationsWithSchemeIdUri);return Ye&&ht&&dt&&at&&Je&&Bt&&Gt&&kt&&Ft&&An&&nt}function Be(){B={},J={},ee={audio:null,video:null,text:null}}function ze(pe){var Ne={lang:pe.lang,viewpoint:pe.viewpoint,roles:pe.roles,accessibility:pe.accessibility,audioChannelConfiguration:pe.audioChannelConfiguration,codec:pe.codec};return Ne.lang||Ne.viewpoint||Ne.role&&Ne.role.length>0||Ne.accessibility&&Ne.accessibility.length>0||Ne.audioChannelConfiguration&&Ne.audioChannelConfiguration.length>0?Ne:null}function _e(pe,Ne,Ye){var dt=[];return pe.forEach(function(at){Ne(Ye,at)&&dt.push(at)}),dt.length!==0?dt:pe}function Le(pe,Ne){try{return!pe.lang||pe.lang instanceof RegExp?Ne.lang.match(pe.lang):Ne.lang!==""&&(0,xh.extendedFilter)(Ne.lang,yi()(pe.lang)).length>0}catch(Ye){return!1}}function we(pe,Ne){return pe.index===void 0||pe.index===null||Ne.index===pe.index}function je(pe,Ne){return!pe.viewpoint||pe.viewpoint===Ne.viewpoint}function Z(pe,Ne){var Ye=arguments.length>2&&arguments[2]!==void 0&&arguments[2],dt=!pe.role||!!Ne.roles.filter(function(at){return at===pe.role})[0];return dt||Ne.type===y.Z.AUDIO&&Ye}function ue(pe,Ne){return pe.accessibility?!!Ne.accessibility.filter(function(Ye){return Ye===pe.accessibility})[0]:!Ne.accessibility.length}function ae(pe,Ne){return!pe.audioChannelConfiguration||!!Ne.audioChannelConfiguration.filter(function(Ye){return Ye===pe.audioChannelConfiguration})[0]}function se(pe,Ne){return!pe.codec||pe.codec===Ne.codec}function Q(pe){var Ne,Ye=0,dt=[];return pe.forEach(function(at){(Ne=Math.max.apply(Math,at.bitrateList.map(function(Je){return Je.bandwidth})))>Ye?(Ye=Ne,dt=[at]):Ne===Ye&&dt.push(at)}),dt}function Me(pe){var Ne,Ye=1/0,dt=[];return pe.forEach(function(at){var Je=at.bitrateList.reduce(function(ht,Bt){var Gt=Math.max(1,Bt.width*Bt.height);return ht+Bt.bandwidth/Gt},0);(Ne=Je/at.bitrateList.length)<Ye?(Ye=Ne,dt=[at]):Ne===Ye&&dt.push(at)}),dt}function be(pe){var Ne,Ye=0,dt=[];return pe.forEach(function(at){(Ne=at.representationCount)>Ye?(Ye=Ne,dt=[at]):Ne===Ye&&dt.push(at)}),dt}function ke(pe,Ne){if(pe===y.Z.TEXT)return Ne[0];var Ye,dt=V.get().streaming.selectionModeForInitialTrack,at=H.getCustomInitialTrackSelectionFunction();if(at&&typeof at=="function")Ye=at(Ne);else switch(dt){case y.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:Ye=function(Je){var ht,Bt,Gt=(ht=0,Bt=[],Je.forEach(function(kt){isNaN(kt.selectionPriority)||(kt.selectionPriority>ht?(ht=kt.selectionPriority,Bt=[kt]):kt.selectionPriority===ht&&Bt.push(kt))}),Bt);return Gt.length>1&&(Gt=Q(Gt)),Gt.length>1&&(Gt=be(Gt)),Gt}(Ne);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:Ye=function(Je){var ht=Q(Je);return ht.length>1&&(ht=be(ht)),ht}(Ne);break;case y.Z.TRACK_SELECTION_MODE_FIRST_TRACK:Ye=Re(Ne);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:Ye=function(Je){var ht=Me(Je);return ht.length>1&&(ht=Q(ht)),ht}(Ne);break;case y.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:Ye=function(Je){var ht=be(Je);return ht.length>1&&(ht=Q(Je)),ht}(Ne);break;default:P.warn("Track selection mode ".concat(dt," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),Ye=Re(Ne)}return Ye.length>0?Ye[0]:Ne[0]}function Re(pe){return pe[0]}return L={setInitialMediaSettingsForType:function(pe,Ne){var Ye=J[pe]||qe(pe),dt=Ee(pe,Ne.id),at=[];Ye||((Ye=re.getSavedMediaSettings(pe))&&delete Ye.codec,ge(pe,Ye)),dt&&dt.length!==0&&(Ye&&(at=_e(at=Array.from(dt),Le,Ye),at=_e(at,we,Ye),at=_e(at,je,Ye),pe===y.Z.AUDIO&&J[pe]||(at=_e(at,Z,Ye)),at=_e(at,ue,Ye),at=_e(at,ae,Ye),at=_e(at,se,Ye)),at.length===0?me(ke(pe,dt),!0):at.length>1?me(ke(pe,at)):me(at[0]))},addTrack:function(pe){if(pe){var Ne=pe.type;if((Ye=Ne)===y.Z.AUDIO||Ye===y.Z.VIDEO||Ye===y.Z.TEXT||Ye===y.Z.IMAGE){var Ye,dt,at=pe.streamInfo.id;B[at]||(B[at]={audio:{list:[],storeLastSettings:dt=V.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:dt,current:null},text:{list:[],storeLastSettings:dt,current:null},image:{list:[],storeLastSettings:dt,current:null}});for(var Je=B[at][Ne].list,ht=0,Bt=Je.length;ht<Bt;++ht)if(De(Je[ht],pe))return;Je.push(pe)}}},getTracksFor:Ee,getCurrentTrackFor:ie,isCurrentTrack:function(pe){if(!pe)return!1;var Ne=pe.type,Ye=pe.streamInfo.id;return B[Ye]&&B[Ye][Ne]&&De(B[Ye][Ne].current,pe)},setTrack:me,selectInitialTrack:ke,setInitialSettings:ge,getInitialSettings:qe,getTracksWithHighestBitrate:Q,getTracksWithHighestEfficiency:Me,getTracksWithWidestRange:be,isTracksEqual:De,matchSettings:function(pe,Ne){var Ye=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var dt=!1;if(pe.lang){if(pe.lang instanceof RegExp)dt=Ne.lang.match(pe.lang);else if(Ne.lang!==""){var at=yi()(pe.lang);at&&(dt=(0,xh.extendedFilter)(Ne.lang,at).length>0)}}else dt=!0;var Je=pe.index===void 0||pe.index===null||Ne.index===pe.index,ht=!pe.viewpoint||pe.viewpoint===Ne.viewpoint,Bt=!pe.role||!!Ne.roles.filter(function(Ft){return Ft===pe.role})[0],Gt=!pe.accessibility||!!Ne.accessibility.filter(function(Ft){return Ft===pe.accessibility})[0],kt=!pe.audioChannelConfiguration||!!Ne.audioChannelConfiguration.filter(function(Ft){return Ft===pe.audioChannelConfiguration})[0];return dt&&Je&&ht&&(Bt||Ne.type===y.Z.AUDIO&&Ye)&&Gt&&kt}catch(Ft){return!1}},matchSettingsLang:Le,matchSettingsIndex:we,matchSettingsViewPoint:je,matchSettingsRole:Z,matchSettingsAccessibility:ue,matchSettingsAudioChannelConfig:ae,saveTextSettingsDisabled:function(){re.setSavedMediaSettings(y.Z.TEXT,null)},setConfig:function(pe){pe&&(pe.domStorage&&(re=pe.domStorage),pe.settings&&(V=pe.settings),pe.customParametersModel&&(H=pe.customParametersModel))},reset:Be},P=(0,x.Z)(ce).getInstance().getLogger(L),Be(),L}Sc.__dashjs_factory_name="MediaController";var Si=U.Z.getSingletonFactory(Sc);U.Z.updateSingletonFactory(Sc.__dashjs_factory_name,Si);var Bu=Si,Fs=NaN,cm=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.data={baseUrls:P||null,selectedIdx:B||Fs},this.children=[]};function Pf(){var L,P,B,V,ee=this.context,J=mn(ee).getInstance();function H(Ee,ie,me){var ge=re(me);Ee[ie]?J.areEqual(ge,Ee[ie].data.baseUrls)||(Ee[ie].data.baseUrls=ge,Ee[ie].data.selectedIdx=Fs):Ee[ie]=new cm(ge)}function re(Ee){var ie=B.getBaseURLsFromElement(Ee),me=V.getSynthesizedBaseUrlElements(ie);return me&&me.length>0&&(ie=ie.concat(me)),ie}function ce(Ee,ie){var me=ie||P;Ee(me.data),me.children&&me.children.forEach(function(ge){return ce(Ee,ge)})}function Se(){P=new cm}return L={reset:Se,update:function(Ee){(function(ie){(function(){if(!B||!B.hasOwnProperty("getBaseURLsFromElement")||!B.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var me=re(ie);J.areEqual(me,P.data.baseUrls)||(P.data.baseUrls=me,P.data.selectedIdx=Fs),ie&&ie.Period_asArray&&ie.Period_asArray.forEach(function(ge,qe){H(P.children,qe,ge),ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.forEach(function(De,Be){H(P.children[qe].children,Be,De),De.Representation_asArray&&De.Representation_asArray.sort(B.getRepresentationSortFunction()).forEach(function(ze,_e){H(P.children[qe].children[Be].children,_e,ze)})})})})(Ee)},getForPath:function(Ee){var ie=P,me=[ie.data];return Ee&&Ee.forEach(function(ge){(ie=ie.children[ge])&&me.push(ie.data)}),me.filter(function(ge){return ge.baseUrls.length})},invalidateSelectedIndexes:function(Ee){ce(function(ie){isNaN(ie.selectedIdx)||Ee===ie.baseUrls[ie.selectedIdx].serviceLocation&&(ie.selectedIdx=Fs)})},setConfig:function(Ee){Ee.adapter&&(B=Ee.adapter),Ee.contentSteeringController&&(V=Ee.contentSteeringController)},getBaseUrls:function(Ee){return re(Ee)}},Se(),L}Pf.__dashjs_factory_name="BaseURLTreeModel";var ba=U.Z.getClassFactory(Pf);function Ya(L){var P=(L=L||{}).blacklistController;return{select:function(B){return B&&function(ee){var J,H,re=0,ce=[],Se=0;if((H=ee.sort(function(Ee,ie){var me=Ee.dvbPriority-ie.dvbPriority;return isNaN(me)?0:me}).filter(function(Ee,ie,me){return!ie||me[0].dvbPriority&&Ee.dvbPriority&&me[0].dvbPriority===Ee.dvbPriority})).length)return H.length>1&&(H.forEach(function(Ee){re+=Ee.dvbWeight,ce.push(re)}),J=Math.floor(Math.random()*(re-1)),ce.every(function(Ee,ie){return Se=ie,!(J<Ee)})),H[Se]}((V=[],B.filter(function(ee){return!P.contains(ee.serviceLocation)||(ee.dvbPriority&&V.push(ee.dvbPriority),!1)}).filter(function(ee){return!V.length||!ee.dvbPriority||V.indexOf(ee.dvbPriority)===-1})));var V}}}Ya.__dashjs_factory_name="DVBSelector";var Ca=U.Z.getClassFactory(Ya);function Po(L){var P=(L=L||{}).blacklistController;return{select:function(B){var V,ee=0;return B&&B.some(function(J,H){return ee=H,!P.contains(J.serviceLocation)})&&(V=B[ee]),V}}}Po.__dashjs_factory_name="BasicSelector";var fm=U.Z.getClassFactory(Po);function Mh(){var L,P,B,V=this.context;function ee(){for(var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],re=0,ce=NaN,Se=function(){var ie=J[re],me=H.findIndex(function(ge){return ge.serviceLocation&&ge.serviceLocation===ie});if(me!==-1&&!B.contains(H[me].serviceLocation))return ce=me,"break";re+=1};re<J.length;){var Ee=Se();if(Ee==="break")break}return ce}return L={selectBaseUrlIndex:function(J){var H=NaN;if(isNaN(J.selectedIdx)){var re=P.getSteeringDataFromManifest();re&&re.defaultServiceLocationArray.length>0&&(H=ee(re.defaultServiceLocationArray,J.baseUrls))}var ce=P.getCurrentSteeringResponseData();return J.baseUrls&&J.baseUrls.length&&ce&&ce.pathwayPriority&&ce.pathwayPriority.length&&(H=ee(ce.pathwayPriority,J.baseUrls)),H},setConfig:function(J){J.blacklistController&&(B=J.blacklistController),J.contentSteeringController&&(P=J.contentSteeringController)}},P=Ia(V).getInstance(),L}Mh.__dashjs_factory_name="ContentSteeringSelector";var AE=U.Z.getClassFactory(Mh);function pu(){var L,P,B,V,ee,J,H=this.context,re=(0,m.Z)(H).getInstance(),ce=(0,Ze.Z)(H).getInstance();function Se(){P.reset()}return L={chooseSelector:function(Ee){(0,ye.PS)(Ee,"boolean"),J=Ee?V:B},select:function(Ee){if(Ee){if(ce.get().streaming.applyContentSteering){var ie=ee.selectBaseUrlIndex(Ee);isNaN(ie)||ie===-1||(Ee.selectedIdx=ie)}if(!isNaN(Ee.selectedIdx))return Ee.baseUrls[Ee.selectedIdx];var me=J.select(Ee.baseUrls);return me?(Ee.selectedIdx=Ee.baseUrls.indexOf(me),me):(re.trigger(T.Z.URL_RESOLUTION_FAILED,{error:new fe.Z(Ae.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Ae.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(J===B&&Se()))}},reset:Se,setConfig:function(Ee){Ee.selector&&(J=Ee.selector),Ee.contentSteeringSelector&&(ee=Ee.contentSteeringSelector)}},P=ys(H).create({updateEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),B=fm(H).create({blacklistController:P}),V=Ca(H).create({blacklistController:P}),(ee=AE(H).create()).setConfig({blacklistController:P}),J=B,L}pu.__dashjs_factory_name="BaseURLSelector";var Us=U.Z.getClassFactory(pu);function Rl(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance(),re=(0,Tt.Z)(J).getInstance();function ce(Ee){B.update(Ee),V.chooseSelector(P.getIsDVB(Ee)),H.trigger(_.Z.BASE_URLS_UPDATED,{baseUrls:Se(Ee)})}function Se(Ee){return B.getBaseUrls(Ee)}return L={reset:function(){B.reset(),V.reset()},initialize:function(Ee){B.setConfig({adapter:P,contentSteeringController:ee}),ce(Ee)},resolve:function(Ee){var ie=B.getForPath(Ee).reduce(function(me,ge){var qe=V.select(ge);return qe?(re.isRelative(qe.url)?me.url=re.resolve(qe.url,me.url):(me.url=qe.url,me.serviceLocation=qe.serviceLocation),me.availabilityTimeOffset=qe.availabilityTimeOffset,me.availabilityTimeComplete=qe.availabilityTimeComplete,me.queryParams=qe.queryParams,me):new Qn},new Qn);if(!re.isRelative(ie.url))return ie},setConfig:function(Ee){Ee.baseURLTreeModel&&(B=Ee.baseURLTreeModel),Ee.baseURLSelector&&(V=Ee.baseURLSelector),Ee.adapter&&(P=Ee.adapter),Ee.contentSteeringController&&(ee=Ee.contentSteeringController)},getBaseUrls:Se,update:ce},B=ba(J).create(),V=Us(J).create(),H.on(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(Ee){B.invalidateSelectedIndexes(Ee.entry)},L),L}Rl.__dashjs_factory_name="BaseURLController";var IE=U.Z.getClassFactory(Rl);function Dh(L){return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Dh(L)}function Of(L,P){return Of=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Of(L,P)}function dm(L,P){return!P||Dh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Lf(L){return Lf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Lf(L)}var ji=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Of(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Lf(P);if(B){var re=Lf(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return dm(this,J)});function ee(J,H){var re;return function(ce,Se){if(!(ce instanceof Se))throw new TypeError("Cannot call a class as a function")}(this,ee),(re=V.call(this)).url=J||null,re.type=H||null,re.mediaType=y.Z.STREAM,re.responseType="",re}return ee}(j.Z);function hm(L){L=L||{};var P=this.context,B=(0,m.Z)(P).getInstance(),V=Io(P).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,errors:Ae});return{load:function(ee,J,H){var re=function(Se,Ee){J.resolved=!0,J.resolvedContent=Se||null,B.trigger(T.Z.XLINK_ELEMENT_LOADED,{element:J,resolveObject:H,error:Se||Ee?null:new fe.Z(Ae.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Ae.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+ee)})};if(ee==="urn:mpeg:dash:resolve-to-zero:2013")re(null,!0);else{var ce=new ji(ee,it.w.XLINK_EXPANSION_TYPE);V.load({request:ce,success:function(Se){re(Se)},error:function(){re(null)}})}},reset:function(){V&&(V.abort(),V=null)}}}hm.__dashjs_factory_name="XlinkLoader";var pm=U.Z.getClassFactory(hm),ju=function(L){(L=L||{}).escapeMode===void 0&&(L.escapeMode=!0),L.attributePrefix===void 0&&(L.attributePrefix="_"),L.arrayAccessForm=L.arrayAccessForm||"none",L.emptyNodeForm=L.emptyNodeForm||"text",L.enableToStringFunc===void 0&&(L.enableToStringFunc=!0),L.arrayAccessFormPaths=L.arrayAccessFormPaths||[],L.skipEmptyTextNodesForObj===void 0&&(L.skipEmptyTextNodesForObj=!0),L.stripWhitespaces===void 0&&(L.stripWhitespaces=!0),L.datetimeAccessFormPaths=L.datetimeAccessFormPaths||[],L.useDoubleQuotes===void 0&&(L.useDoubleQuotes=!1),L.xmlElementsFilter=L.xmlElementsFilter||[],L.jsonPropertiesFilter=L.jsonPropertiesFilter||[],L.keepCData===void 0&&(L.keepCData=!1),L.ignoreRoot===void 0&&(L.ignoreRoot=!1);function P(_e){var Le=_e.localName;return Le==null&&(Le=_e.baseName),Le!=null&&Le!=""||(Le=_e.nodeName),Le}function B(_e){return typeof _e=="string"?_e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):_e}function V(_e,Le,we,je){for(var Z=0;Z<_e.length;Z++){var ue=_e[Z];if(typeof ue=="string"){if(ue==je)break}else if(ue instanceof RegExp){if(ue.test(je))break}else if(typeof ue=="function"&&ue(Le,we,je))break}return Z!=_e.length}function ee(_e,Le,we){L.arrayAccessForm==="property"&&(_e[Le]instanceof Array?_e[Le+"_asArray"]=_e[Le]:_e[Le+"_asArray"]=[_e[Le]]),!(_e[Le]instanceof Array)&&L.arrayAccessFormPaths.length>0&&V(L.arrayAccessFormPaths,_e,Le,we)&&(_e[Le]=[_e[Le]])}function J(_e){var Le=_e.split(/[-T:+Z]/g),we=new Date(Le[0],Le[1]-1,Le[2]),je=Le[5].split(".");if(we.setHours(Le[3],Le[4],je[0]),je.length>1&&we.setMilliseconds(je[1]),Le[6]&&Le[7]){var Z=60*Le[6]+Number(Le[7]);Z=0+((/\d\d-\d\d:\d\d$/.test(_e)?"-":"+")=="-"?-1*Z:Z),we.setMinutes(we.getMinutes()-Z-we.getTimezoneOffset())}else _e.indexOf("Z",_e.length-1)!==-1&&(we=new Date(Date.UTC(we.getFullYear(),we.getMonth(),we.getDate(),we.getHours(),we.getMinutes(),we.getSeconds(),we.getMilliseconds())));return we}function H(_e,Le,we,je){return!(Le==1&&L.xmlElementsFilter.length>0)||V(L.xmlElementsFilter,_e,we,je)}function re(_e,Le){if(_e.nodeType==9){for(var we=new Object,je=_e.childNodes,Z=0;Z<je.length;Z++)(ae=je[Z]).nodeType==1&&(L.ignoreRoot?we=re(ae):(we={})[se=P(ae)]=re(ae));return we}if(_e.nodeType==1){(we=new Object).__cnt=0;var ue=[];for(je=_e.childNodes,Z=0;Z<je.length;Z++){var ae,se=P(ae=je[Z]);if(ae.nodeType!=8){var Q=Le+"."+se;if(H(we,ae.nodeType,se,Q))if(we.__cnt++,we[se]==null){var Me=re(ae,Q);(se!="#text"||/[^\s]/.test(Me))&&((be={})[se]=Me,ue.push(be)),we[se]=Me,ee(we,se,Q)}else{var be;we[se]!=null&&(we[se]instanceof Array||(we[se]=[we[se]],ee(we,se,Q))),Me=re(ae,Q),(se!="#text"||/[^\s]/.test(Me))&&((be={})[se]=Me,ue.push(be)),we[se][we[se].length]=Me}}}we.__children=ue;for(var ke=P(_e),Re=0;Re<_e.attributes.length;Re++){var pe=_e.attributes[Re];we.__cnt++;for(var Ne=pe.value,Ye=0,dt=L.matchers.length;Ye<dt;Ye++){var at=L.matchers[Ye];at.test(pe,ke)&&(Ne=at.converter(pe.value))}we[L.attributePrefix+pe.name]=Ne}var Je=function(ht){return ht.prefix}(_e);return Je!=null&&Je!=""&&(we.__cnt++,we.__prefix=Je),we["#text"]!=null&&(we.__text=we["#text"],we.__text instanceof Array&&(we.__text=we.__text.join("\n")),L.stripWhitespaces&&(we.__text=we.__text.trim()),delete we["#text"],L.arrayAccessForm=="property"&&delete we["#text_asArray"],we.__text=function(ht,Bt,Gt){if(L.datetimeAccessFormPaths.length>0){var kt=Gt.split(".#")[0];return V(L.datetimeAccessFormPaths,ht,Bt,kt)?J(ht):ht}return ht}(we.__text,se,Le+"."+se)),we["#cdata-section"]!=null&&(we.__cdata=we["#cdata-section"],delete we["#cdata-section"],L.arrayAccessForm=="property"&&delete we["#cdata-section_asArray"]),we.__cnt==0&&L.emptyNodeForm=="text"?we="":we.__cnt==1&&we.__text!=null?we=we.__text:we.__cnt!=1||we.__cdata==null||L.keepCData?we.__cnt>1&&we.__text!=null&&L.skipEmptyTextNodesForObj&&(L.stripWhitespaces&&we.__text==""||we.__text.trim()=="")&&delete we.__text:we=we.__cdata,delete we.__cnt,!L.enableToStringFunc||we.__text==null&&we.__cdata==null||(we.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),we}if(_e.nodeType==3||_e.nodeType==4)return _e.nodeValue}function ce(_e,Le,we,je){var Z="<"+(_e!=null&&_e.__prefix!=null?_e.__prefix+":":"")+Le;if(we!=null)for(var ue=0;ue<we.length;ue++){var ae=we[ue],se=_e[ae];L.escapeMode&&(se=B(se)),Z+=" "+ae.substr(L.attributePrefix.length)+"=",L.useDoubleQuotes?Z+='"'+se+'"':Z+="'"+se+"'"}return Z+(je?"/>":">")}function Se(_e,Le){return"</"+(_e.__prefix!=null?_e.__prefix+":":"")+Le+">"}function Ee(_e,Le){return L.arrayAccessForm=="property"&&(je="_asArray",(we=Le.toString()).indexOf(je,we.length-je.length)!==-1)||Le.toString().indexOf(L.attributePrefix)==0||Le.toString().indexOf("__")==0||_e[Le]instanceof Function;var we,je}function ie(_e){var Le=0;if(_e instanceof Object)for(var we in _e)Ee(_e,we)||Le++;return Le}function me(_e,Le,we){return L.jsonPropertiesFilter.length==0||we==""||V(L.jsonPropertiesFilter,_e,Le,we)}function ge(_e){var Le=[];if(_e instanceof Object)for(var we in _e)we.toString().indexOf("__")==-1&&we.toString().indexOf(L.attributePrefix)==0&&Le.push(we);return Le}function qe(_e){var Le="";return _e instanceof Object?Le+=function(we){var je="";return we.__cdata!=null&&(je+="<![CDATA["+we.__cdata+"]]>"),we.__text!=null&&(L.escapeMode?je+=B(we.__text):je+=we.__text),je}(_e):_e!=null&&(L.escapeMode?Le+=B(_e):Le+=_e),Le}function De(_e,Le){return _e===""?Le:_e+"."+Le}function Be(_e,Le,we,je){var Z="";if(_e.length==0)Z+=ce(_e,Le,we,!0);else for(var ue=0;ue<_e.length;ue++)Z+=ce(_e[ue],Le,ge(_e[ue]),!1),Z+=ze(_e[ue],De(je,Le)),Z+=Se(_e[ue],Le);return Z}function ze(_e,Le){var we="";if(ie(_e)>0){for(var je in _e)if(!Ee(_e,je)&&(Le==""||me(_e,je,De(Le,je)))){var Z=_e[je],ue=ge(Z);Z==null||Z==null?we+=ce(Z,je,ue,!0):Z instanceof Object?Z instanceof Array?we+=Be(Z,je,ue,Le):Z instanceof Date?(we+=ce(Z,je,ue,!1),we+=Z.toISOString(),we+=Se(Z,je)):ie(Z)>0||Z.__text!=null||Z.__cdata!=null?(we+=ce(Z,je,ue,!1),we+=ze(Z,De(Le,je)),we+=Se(Z,je)):we+=ce(Z,je,ue,!0):(we+=ce(Z,je,ue,!1),we+=qe(Z),we+=Se(Z,je))}}return we+qe(_e)}this.parseXmlString=function(_e){var Le;if(_e===void 0)return null;if(window.DOMParser){var we=new window.DOMParser;try{(Le=we.parseFromString(_e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(Le=null)}catch(je){Le=null}}else _e.indexOf("<?")==0&&(_e=_e.substr(_e.indexOf("?>")+2)),(Le=new ActiveXObject("Microsoft.XMLDOM")).async="false",Le.loadXML(_e);return Le},this.asArray=function(_e){return _e===void 0||_e==null?[]:_e instanceof Array?_e:[_e]},this.toXmlDateTime=function(_e){return _e instanceof Date?_e.toISOString():typeof _e=="number"?new Date(_e).toISOString():null},this.asDateTime=function(_e){return typeof _e=="string"?J(_e):_e},this.xml2json=function(_e){return re(_e)},this.xml_str2json=function(_e){var Le=this.parseXmlString(_e);return Le!=null?this.xml2json(Le):null},this.json2xml_str=function(_e){return ze(_e,"")},this.json2xml=function(_e){var Le=this.json2xml_str(_e);return this.parseXmlString(Le)},this.getVersion=function(){return"1.2.0"}},mo="onLoad";function Zu(L){L=L||{};var P,B,V,ee,J,H,re=this.context,ce=(0,m.Z)(re).getInstance(),Se=(0,Tt.Z)(re).getInstance();function Ee(De,Be,ze){var _e,Le,we={};we.elements=De,we.type=Be,we.resolveType=ze,we.elements.length===0&&me(we);for(var je=0;je<we.elements.length;je++)_e=we.elements[je],Le=Se.isHTTPURL(_e.url)?_e.url:_e.originalContent.BaseURL+_e.url,H.load(Le,_e,we)}function ie(De){var Be,ze,_e="";if(Be=De.element,ze=De.resolveObject,Be.resolvedContent){var Le=0;Be.resolvedContent.indexOf("<?xml")===0&&(Le=Be.resolvedContent.indexOf("?>")+2),_e=Be.resolvedContent.substr(0,Le)+"<response>"+Be.resolvedContent.substr(Le)+"</response>",Be.resolvedContent=J.xml_str2json(_e)}(function(we){var je;for(je=0;je<we.elements.length;je++)if(we.elements[je].resolved===!1)return!1;return!0})(ze)&&me(ze)}function me(De){var Be,ze,_e=[];if(function(Le){var we,je,Z,ue,ae,se,Q=[];for(ue=Le.elements.length-1;ue>=0;ue--){if(je=(we=Le.elements[ue]).type+"_asArray",we.resolvedContent){if(we.resolvedContent)for(ae=0;ae<we.resolvedContent[je].length;ae++)Z=we.resolvedContent[je][ae],Q.push(Z)}else delete we.originalContent["xlink:actuate"],delete we.originalContent["xlink:href"],Q.push(we.originalContent);for(we.parentElement[je].splice(we.index,1),se=0;se<Q.length;se++)we.parentElement[je].splice(we.index+se,0,Q[se]);Q=[]}Le.elements.length>0&&V.run(ee)}(De),De.resolveType==="onActuate"&&ce.trigger(T.Z.XLINK_READY,{manifest:ee}),De.resolveType===mo)switch(De.type){case v.Z.PERIOD:for(Be=0;Be<ee[v.Z.PERIOD+"_asArray"].length;Be++)(ze=ee[v.Z.PERIOD+"_asArray"][Be]).hasOwnProperty(v.Z.ADAPTATION_SET+"_asArray")&&(_e=_e.concat(ge(ze[v.Z.ADAPTATION_SET+"_asArray"],ze,v.Z.ADAPTATION_SET,mo))),ze.hasOwnProperty(v.Z.EVENT_STREAM+"_asArray")&&(_e=_e.concat(ge(ze[v.Z.EVENT_STREAM+"_asArray"],ze,v.Z.EVENT_STREAM,mo)));Ee(_e,v.Z.ADAPTATION_SET,mo);break;case v.Z.ADAPTATION_SET:ce.trigger(T.Z.XLINK_READY,{manifest:ee})}}function ge(De,Be,ze,_e){var Le,we,je,Z=[];for(we=De.length-1;we>=0;we--)(Le=De[we]).hasOwnProperty("xlink:href")&&Le["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&De.splice(we,1);for(we=0;we<De.length;we++)(Le=De[we]).hasOwnProperty("xlink:href")&&Le.hasOwnProperty("xlink:actuate")&&Le["xlink:actuate"]===_e&&(je=qe(Le["xlink:href"],Be,ze,we,_e,Le),Z.push(je));return Z}function qe(De,Be,ze,_e,Le,we){return{url:De,parentElement:Be,type:ze,index:_e,resolveType:Le,originalContent:we,resolvedContent:null,resolved:!1}}return P={resolveManifestOnLoad:function(De){J=new ju({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:B}),(ee=De).Period_asArray?Ee(ge(ee.Period_asArray,ee,v.Z.PERIOD,mo),v.Z.PERIOD,mo):ce.trigger(T.Z.XLINK_READY,{manifest:ee})},setMatchers:function(De){De&&(B=De)},setIron:function(De){De&&(V=De)},reset:function(){ce.off(T.Z.XLINK_ELEMENT_LOADED,ie,P),H&&(H.reset(),H=null)}},ce.on(T.Z.XLINK_ELEMENT_LOADED,ie,P),H=pm(re).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),P}Zu.__dashjs_factory_name="XlinkController";var wc=U.Z.getClassFactory(Zu);function Gu(L){return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Gu(L)}function Cr(L){function P(ee,J){for(var H in ee)J.hasOwnProperty(H)||(J[H]=ee[H])}function B(ee,J,H){for(var re=0,ce=ee.length;re<ce;++re){var Se=ee[re];if(J[Se.name])if(H[Se.name]){if(Se.merge){var Ee=J[Se.name],ie=H[Se.name];Gu(Ee)==="object"&&Gu(ie)==="object"?P(Ee,ie):H[Se.name]=Ee+ie}}else H[Se.name]=J[Se.name]}}function V(ee,J){for(var H=0,re=ee.children.length;H<re;++H){var ce=ee.children[H],Se=J[ce.name+"_asArray"];if(Se)for(var Ee=0,ie=Se.length;Ee<ie;++Ee){var me=Se[Ee];B(ee.properties,J,me),V(ce,me)}}}return{run:function(ee){if(ee===null||Gu(ee)!=="object")return ee;if(ee.Period_asArray&&"period"in L)for(var J=L.period,H=ee.Period_asArray,re=0,ce=H.length;re<ce;++re){var Se=H[re];if(V(J,Se),"adaptationset"in L){var Ee=Se.AdaptationSet_asArray;if(Ee)for(var ie=L.adaptationset,me=0,ge=Ee.length;me<ge;++me)V(ie,Ee[me])}}return ee}}}Cr.__dashjs_factory_name="ObjectIron";var qu=U.Z.getClassFactory(Cr);function Ph(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Hu=function(){function L(V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._test=V,this._converter=ee}var P,B;return P=L,(B=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&Ph(P.prototype,B),L}();function Nl(L){return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Nl(L)}function ni(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Wa(L,P){return Wa=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Wa(L,P)}function gm(L,P){return!P||Nl(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ac(L){return Ac=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ac(L)}var mm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Wa(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ac(P);if(B){var re=Ac(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return gm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var re,ce=(ni(re={},v.Z.MPD,[v.Z.ID,v.Z.PROFILES]),ni(re,v.Z.PERIOD,[v.Z.ID]),ni(re,v.Z.BASE_URL,[v.Z.SERVICE_LOCATION,v.Z.BYTE_RANGE]),ni(re,v.Z.SEGMENT_BASE,[v.Z.INDEX_RANGE]),ni(re,v.Z.INITIALIZATION,[v.Z.RANGE]),ni(re,v.Z.REPRESENTATION_INDEX,[v.Z.RANGE]),ni(re,v.Z.SEGMENT_LIST,[v.Z.INDEX_RANGE]),ni(re,v.Z.BITSTREAM_SWITCHING,[v.Z.RANGE]),ni(re,v.Z.SEGMENT_URL,[v.Z.MEDIA_RANGE,v.Z.INDEX_RANGE]),ni(re,v.Z.SEGMENT_TEMPLATE,[v.Z.INDEX_RANGE,v.Z.MEDIA,v.Z.INDEX,v.Z.INITIALIZATION_MINUS,v.Z.BITSTREAM_SWITCHING_MINUS]),ni(re,v.Z.ASSET_IDENTIFIER,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.EVENT_STREAM,[v.Z.VALUE]),ni(re,v.Z.ADAPTATION_SET,[v.Z.PROFILES,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.CONTENT_TYPE]),ni(re,v.Z.FRAME_PACKING,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.AUDIO_CHANNEL_CONFIGURATION,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.CONTENT_PROTECTION,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.ESSENTIAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.SUPPLEMENTAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.INBAND_EVENT_STREAM,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.ACCESSIBILITY,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.ROLE,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.RATING,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.VIEWPOINT,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.CONTENT_COMPONENT,[v.Z.CONTENT_TYPE]),ni(re,v.Z.REPRESENTATION,[v.Z.ID,v.Z.DEPENDENCY_ID,v.Z.MEDIA_STREAM_STRUCTURE_ID]),ni(re,v.Z.SUBSET,[v.Z.ID]),ni(re,v.Z.METRICS,[v.Z.METRICS_MINUS]),ni(re,v.Z.REPORTING,[v.Z.VALUE,v.Z.ID]),re);if(ce.hasOwnProperty(H)){var Se=ce[H];return Se!==void 0&&Se.indexOf(J.name)>=0}return!1},function(J){return String(J)})}return ee}(Hu);function Oh(L){return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Oh(L)}function Lh(L,P){return Lh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Lh(L,P)}function kf(L,P){return!P||Oh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ic(L){return Ic=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ic(L)}var vm=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,ym=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Lh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ic(P);if(B){var re=Ic(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return kf(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){for(var H=[v.Z.MIN_BUFFER_TIME,v.Z.MEDIA_PRESENTATION_DURATION,v.Z.MINIMUM_UPDATE_PERIOD,v.Z.TIMESHIFT_BUFFER_DEPTH,v.Z.MAX_SEGMENT_DURATION,v.Z.MAX_SUBSEGMENT_DURATION,v.Z.SUGGESTED_PRESENTATION_DELAY,v.Z.START,y.Z.START_TIME,v.Z.DURATION],re=H.length,ce=0;ce<re;ce++)if(J.nodeName===H[ce])return vm.test(J.value);return!1},function(J){var H=vm.exec(J),re=31536e3*parseFloat(H[3]||0)+2592e3*parseFloat(H[5]||0)+86400*parseFloat(H[7]||0)+3600*parseFloat(H[9]||0)+60*parseFloat(H[11]||0)+parseFloat(H[13]||0);return H[1]!==void 0&&(re=-re),re})}return ee}(Hu);function kh(L){return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},kh(L)}function Ff(L,P){return Ff=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Ff(L,P)}function Em(L,P){return!P||kh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Uf(L){return Uf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Uf(L)}var Fh=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,_m=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Ff(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Uf(P);if(B){var re=Uf(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Em(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return Fh.test(J.value)},function(J){var H,re=Fh.exec(J);if(H=Date.UTC(parseInt(re[1],10),parseInt(re[2],10)-1,parseInt(re[3],10),parseInt(re[4],10),parseInt(re[5],10),re[6]&&parseInt(re[6],10)||0,re[7]&&1e3*parseFloat(re[7])||0),re[9]&&re[10]){var ce=60*parseInt(re[9],10)+parseInt(re[10],10);H+=(re[8]==="+"?-1:1)*ce*60*1e3}return new Date(H)})}return ee}(Hu);function Ku(L){return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Ku(L)}function xl(L,P){return xl=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},xl(L,P)}function bE(L,P){return!P||Ku(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Bf(L){return Bf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Bf(L)}var CE=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Ml=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&xl(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Bf(P);if(B){var re=Bf(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return bE(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return CE.test(J.value)},function(J){return parseFloat(J)})}return ee}(Hu);function Dl(L){return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Dl(L)}function Vu(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function bc(L,P){return bc=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},bc(L,P)}function Tm(L,P){return!P||Dl(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Pl(L){return Pl=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Pl(L)}var Sm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&bc(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Pl(P);if(B){var re=Pl(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Tm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var re,ce=(Vu(re={},v.Z.ADAPTATION_SET,[v.Z.LANG]),Vu(re,v.Z.REPRESENTATION,[v.Z.LANG]),Vu(re,v.Z.CONTENT_COMPONENT,[v.Z.LANG]),Vu(re,v.Z.LABEL,[v.Z.LANG]),Vu(re,v.Z.GROUP_LABEL,[v.Z.LANG]),re);if(ce.hasOwnProperty(H)){var Se=ce[H];return Se!==void 0&&Se.indexOf(J.name)>=0}return!1},function(J){return yi()(J)||String(J)})}return ee}(Hu);function jf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Zf=function(){function L(V){var ee;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V,this._merge=(ee=V)&&ee.length&&ee.charAt(0)===ee.charAt(0).toUpperCase()}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&jf(P.prototype,B),L}();function Cc(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var zu=function(){function L(V,ee,J){var H=this;(function(re,ce){if(!(re instanceof ce))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V||"",this._properties=[],this._children=J||[],Array.isArray(ee)&&ee.forEach(function(re){H._properties.push(new Zf(re))})}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&Cc(P.prototype,B),L}();function Gf(L){return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Gf(L)}function Uh(L,P){return Uh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Uh(L,P)}function RE(L,P){return!P||Gf(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Yu(L){return Yu=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Yu(L)}var NE=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Uh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Yu(P);if(B){var re=Yu(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return RE(this,J)});function ee(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.PROFILES,v.Z.WIDTH,v.Z.HEIGHT,v.Z.SAR,v.Z.FRAMERATE,v.Z.AUDIO_SAMPLING_RATE,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.MAXIMUM_SAP_PERIOD,v.Z.START_WITH_SAP,v.Z.MAX_PLAYOUT_RATE,v.Z.CODING_DEPENDENCY,v.Z.SCAN_TYPE,v.Z.FRAME_PACKING,v.Z.AUDIO_CHANNEL_CONFIGURATION,v.Z.CONTENT_PROTECTION,v.Z.ESSENTIAL_PROPERTY,v.Z.ESSENTIAL_PROPERTY+"_asArray",v.Z.SUPPLEMENTAL_PROPERTY,v.Z.INBAND_EVENT_STREAM];return V.call(this,v.Z.ADAPTATION_SET,J,[new zu(v.Z.REPRESENTATION,J,[new zu(v.Z.SUB_REPRESENTATION,J)])])}return ee}(zu);function Hr(L){return Hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Hr(L)}function qf(L,P){return qf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},qf(L,P)}function Bh(L,P){return!P||Hr(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Hf(L){return Hf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Hf(L)}var xE=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&qf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Hf(P);if(B){var re=Hf(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Bh(this,J)});function ee(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.SEGMENT_BASE,v.Z.SEGMENT_TEMPLATE,v.Z.SEGMENT_LIST];return V.call(this,v.Z.PERIOD,J,[new zu(v.Z.ADAPTATION_SET,J,[new zu(v.Z.REPRESENTATION,J)])])}return ee}(zu);function Rc(L){L=L||{};var P,B,V,ee,J,H=this.context,re=L.debug;return P={parse:function(ce){var Se,Ee=window.performance.now();if(!(Se=ee.xml_str2json(ce)))throw new Error("parsing the manifest failed");var ie=window.performance.now();Se.Patch?((Se=Se.Patch).add_asArray&&Se.add_asArray.forEach(function(ge){return J.run(ge)}),Se.replace_asArray&&Se.replace_asArray.forEach(function(ge){return J.run(ge)})):(Se=Se.MPD,J.run(Se));var me=window.performance.now();return B.info("Parsing complete: ( xml2json: "+(ie-Ee).toPrecision(3)+"ms, objectiron: "+(me-ie).toPrecision(3)+"ms, total: "+((me-Ee)/1e3).toPrecision(3)+"s)"),Se.protocol="DASH",Se},getMatchers:function(){return V},getIron:function(){return J}},B=re.getLogger(P),V=[new ym,new _m,new Ml,new Sm,new mm],ee=new ju({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:V}),J=qu(H).create({adaptationset:new NE,period:new xE}),P}Rc.__dashjs_factory_name="DashParser";var wm=U.Z.getClassFactory(Rc);function jh(L){L=L||{};var P,B,V,ee,J,H=this.context,re=L.debug,ce=L.settings,Se=(0,m.Z)(H).getInstance(),Ee=(0,Tt.Z)(H).getInstance(),ie=L.mssHandler,me=L.errHandler;function ge(De){Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:De.manifest})}function qe(De){var Be=null;return De.indexOf("SmoothStreamingMedia")>-1?(ie&&(Be=ie.createMssParser(),ie.createMssFragmentProcessor(),ie.registerEvents()),Be):De.indexOf("MPD")>-1||De.indexOf("Patch")>-1?wm(H).create({debug:re}):Be}return P={load:function(De){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,_e=new Date,Le=new ji(De,it.w.MPD_TYPE);Be&&(Le.serviceLocation=Be),ze&&(Le.queryParams=ze),Le.requestStartDate||(Le.requestStartDate=_e),Se.trigger(T.Z.MANIFEST_LOADING_STARTED,{request:Le}),V.load({request:Le,success:function(we,je,Z){var ue,ae,se;if(ee)if(Z&&Z!==De?(ae=Ee.parseBaseUrl(Z),ue=Z):(Ee.isRelative(De)&&(De=Ee.resolve(De,window.location.href)),ae=Ee.parseBaseUrl(De)),je!="No Content")if(J===null&&(J=qe(we)),J!==null){ee.setMatchers(J.getMatchers()),ee.setIron(J.getIron());try{se=J.parse(we)}catch(Me){return void Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new fe.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))})}if(se){if(se.url=ue||De,se.originalUrl||(se.originalUrl=se.url),ce&&ce.get().streaming.enableManifestDurationMismatchFix&&se.mediaPresentationDuration&&se.Period_asArray.length>1){var Q=se.Period_asArray.reduce(function(Me,be){return Me+be.duration},0);!isNaN(Q)&&se.mediaPresentationDuration>Q&&(B.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),se.mediaPresentationDuration=Q)}se.baseUri=ae,se.loadedTime=new Date,ee.resolveManifestOnLoad(se),Se.trigger(T.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:we})}else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new fe.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))})}else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new fe.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))});else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(we,je,Z){Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new fe.Z(Ae.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(De,", ").concat(Z))})}})},reset:function(){Se.off(T.Z.XLINK_READY,ge,P),ie&&ie.reset(),ee&&(ee.reset(),ee=null),V&&(V.abort(),V=null)}},B=re.getLogger(P),Se.on(T.Z.XLINK_READY,ge,P),V=Io(H).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:Ee,constants:y.Z,dashConstants:v.Z,errors:Ae,requestTimeout:L.settings.get().streaming.manifestRequestTimeout}),ee=wc(H).create({errHandler:me,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),J=null,P}jh.__dashjs_factory_name="ManifestLoader";var Am=U.Z.getClassFactory(jh);function Zh(){var L=this.context,P=(0,m.Z)(L).getInstance();return{error:function(B){P.trigger(T.Z.ERROR,{error:B})}}}Zh.__dashjs_factory_name="ErrorHandler";var Ol=U.Z.getSingletonFactory(Zh),Im=w(1715);function bm(){var L,P,B,V,ee,J,H=this.context,re=(0,m.Z)(H).getInstance();function ce(Se,Ee){if(!Ee||!Ee.Period_asArray||Ee.Period_asArray.length===0)return Promise.resolve();var ie=[];return Ee.Period_asArray.forEach(function(me){ie.push(function(ge,qe){return new Promise(function(De){if(ge&&ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.length!==0){var Be=[];ge.AdaptationSet_asArray.forEach(function(ze){P.getIsTypeOf(ze,qe)&&Be.push(function(_e,Le){return new Promise(function(we){if(_e.Representation_asArray&&_e.Representation_asArray.length!==0){var je=[],Z=[];_e.Representation_asArray.forEach(function(ue,ae){var se=P.getCodec(_e,ae,!1),Q=function(Me,be,ke){switch(Me){case y.Z.VIDEO:return function(Re,pe){return{codec:pe,width:Re.width||null,height:Re.height||null,framerate:Re.frameRate||null,bitrate:Re.bandwidth||null}}(be,ke);case y.Z.AUDIO:return function(Re,pe){var Ne=Re.audioSamplingRate||null;return{codec:pe,bitrate:Re.bandwidth||null,samplerate:Ne}}(be,ke);default:return null}}(Le,ue,se);Z.push(Q),je.push(B.supportsCodec(Q,Le))}),Promise.all(je).then(function(ue){_e.Representation_asArray=_e.Representation_asArray.filter(function(ae,se){return ue[se]||J.debug("[Stream] Codec ".concat(Z[se].codec," not supported ")),ue[se]}),we()}).catch(function(){we()})}else we()})}(ze,qe))}),Promise.all(Be).then(function(){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function(ze){var _e=ze.Representation_asArray&&ze.Representation_asArray.length>0;return _e||(re.trigger(T.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:ze}),J.warn("AdaptationSet has been removed because of no supported Representation")),_e}),De()}).catch(function(){De()})}else De()})}(me,Se))}),Promise.all(ie)}return L={setConfig:function(Se){Se&&(Se.adapter&&(P=Se.adapter),Se.capabilities&&(B=Se.capabilities),Se.settings&&(V=Se.settings),Se.customParametersModel&&(ee=Se.customParametersModel))},filterUnsupportedFeatures:function(Se){return new Promise(function(Ee){var ie=[];ie.push(ce(y.Z.VIDEO,Se)),ie.push(ce(y.Z.AUDIO,Se)),Promise.all(ie).then(function(){V.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(me){me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(ge){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function(qe){return!qe.Representation_asArray||qe.Representation_asArray.length===0||(qe.Representation_asArray=qe.Representation_asArray.filter(function(De){var Be=P.getEssentialPropertiesForRepresentation(De);if(Be&&Be.length>0)for(var ze=0;ze<Be.length;){if(!B.supportsEssentialProperty(Be[ze]))return J.debug("[Stream] EssentialProperty not supported: "+Be[ze].schemeIdUri),!1;ze+=1}return!0}),qe.Representation_asArray&&qe.Representation_asArray.length>0)})})}(Se),function(me){var ge=ee.getCustomCapabilitiesFilters();ge&&ge.length!==0&&me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(qe){qe.AdaptationSet_asArray=qe.AdaptationSet_asArray.filter(function(De){return!De.Representation_asArray||De.Representation_asArray.length===0||(De.Representation_asArray=De.Representation_asArray.filter(function(Be){return!ge.some(function(ze){return!ze(Be)})}),De.Representation_asArray&&De.Representation_asArray.length>0)})})}(Se),Ee()}).catch(function(){Ee()})})}},J=(0,x.Z)(H).getInstance().getLogger(L),L}bm.__dashjs_factory_name="CapabilitiesFilter";var ME=U.Z.getSingletonFactory(bm),DE=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function Cm(){var L;return{initialize:function(P){if(L=new DE,!P)return null;var B=P.indexOf("#");if(B!==-1)for(var V=P.substr(B+1).split("&"),ee=0,J=V.length;ee<J;++ee){var H=V[ee],re=H.indexOf("=");if(re!==-1){var ce=H.substring(0,re);L.hasOwnProperty(ce)&&(L[ce]=H.substr(re+1))}}},getURIFragmentData:function(){return L}}}Cm.__dashjs_factory_name="URIFragmentModel";var PE=U.Z.getSingletonFactory(Cm);function Rm(){var L,P=this.context,B=(0,m.Z)(P).getInstance();return{getValue:function(){return L},setValue:function(V){L=V,V&&B.trigger(T.Z.MANIFEST_LOADED,{data:V})}}}Rm.__dashjs_factory_name="ManifestModel";var OE=U.Z.getSingletonFactory(Rm),Gh=-.5;function qh(){var L,P,B,V,ee=this.context,J=(0,Ze.Z)(ee).getInstance();function H(Se,Ee){return isNaN(Se)?0:Se>0?(Ee&&P.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Se<Gh?(Ee&&P.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(Gh,": ").concat(-50,"% playback speed.")),Gh):Se}function re(Se,Ee){return isNaN(Se)?0:Se<0?(Ee&&P.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Se>1?(Ee&&P.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):Se}function ce(){var Se=J.get().streaming.buffer.stableBufferTime>0?J.get().streaming.buffer.stableBufferTime:J.get().streaming.buffer.fastSwitchEnabled?20:12,Ee=B.getLiveDelay();return!isNaN(Ee)&&Ee>0?Math.min(Se,Ee):Se}return L={getCatchupMaxDrift:function(){if(!isNaN(J.get().streaming.liveCatchup.maxDrift)&&J.get().streaming.liveCatchup.maxDrift>0)return J.get().streaming.liveCatchup.maxDrift;var Se=V.getServiceDescriptionSettings();return Se&&Se.liveCatchup&&!isNaN(Se.liveCatchup.maxDrift)&&Se.liveCatchup.maxDrift>0?Se.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return J.get().streaming.liveCatchup.enabled!==null?J.get().streaming.liveCatchup.enabled:B.getInitialCatchupModeActivated()},getStableBufferTime:ce,getInitialBufferLevel:function(){var Se=J.get().streaming.buffer.initialBufferLevel;return isNaN(Se)||Se<0?0:Math.min(ce(),Se)},getRetryAttemptsForType:function(Se){var Ee=isNaN(J.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:J.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryAttempts[Se]*Ee:J.get().streaming.retryAttempts[Se]},getRetryIntervalsForType:function(Se){var Ee=isNaN(J.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:J.get().streaming.retryIntervals.lowLatencyReductionFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryIntervals[Se]/Ee:J.get().streaming.retryIntervals[Se]},getCatchupPlaybackRates:function(Se){var Ee=J.get().streaming.liveCatchup.playbackRate;if(!isNaN(Ee.min)||!isNaN(Ee.max))return{min:H(Ee.min,Se),max:re(Ee.max,Se)};var ie=V.getServiceDescriptionSettings();if(ie&&ie.liveCatchup&&(!isNaN(ie.liveCatchup.playbackRate.min)||!isNaN(ie.liveCatchup.playbackRate.max))){var me=ie.liveCatchup.playbackRate;return{min:H(me.min,Se),max:re(me.max,Se)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(Se,Ee){try{var ie=J.get().streaming.abr[Se][Ee];if(!isNaN(ie)&&ie!==-1)return ie;var me=V.getServiceDescriptionSettings();return me&&me[Se]&&!isNaN(me[Se][Ee])?me[Se][Ee]:-1}catch(ge){return-1}},setConfig:function(Se){Se.playbackController&&(B=Se.playbackController),Se.serviceDescriptionController&&(V=Se.serviceDescriptionController)},reset:function(){}},P=(0,x.Z)(ee).getInstance().getLogger(L),L}qh.__dashjs_factory_name="MediaPlayerModel";var Ll=U.Z.getSingletonFactory(qh),Nc=w(1767);function Hh(L){var P=(L=L||{}).abrController,B=L.switchHistory,V=L.droppedFramesHistory,ee=L.currentRequest,J=L.useBufferOccupancyABR,H=L.useL2AABR,re=L.useLoLPABR,ce=L.streamProcessor?L.streamProcessor.getScheduleController():null,Se=L.streamProcessor?L.streamProcessor.getRepresentationInfo():null,Ee=L.videoModel?L.videoModel:null;function ie(){return Se?Se.mediaInfo:null}return{getMediaType:function(){var me=ie();return me?me.type:null},getMediaInfo:ie,getDroppedFramesHistory:function(){return V},getCurrentRequest:function(){return ee},getSwitchHistory:function(){return B},getStreamInfo:function(){var me=ie();return me?me.streamInfo:null},getScheduleController:function(){return ce},getAbrController:function(){return P},getRepresentationInfo:function(){return Se},useBufferOccupancyABR:function(){return J},useL2AABR:function(){return H},useLoLPABR:function(){return re},getVideoModel:function(){return Ee}}}Hh.__dashjs_factory_name="RulesContext";var Kh=U.Z.getClassFactory(Hh),la=w(2068);function Rr(){var L=[],P=[];return{push:function(B){B.newValue===la.Z.NO_CHANGE&&(B.newValue=B.oldValue),L[B.oldValue]||(L[B.oldValue]={noDrops:0,drops:0,dropSize:0});var V=B.newValue-B.oldValue,ee=V<0?1:0,J=ee?-V:0,H=ee?0:1;if(L[B.oldValue].drops+=ee,L[B.oldValue].dropSize+=J,L[B.oldValue].noDrops+=H,P.push({idx:B.oldValue,noDrop:H,drop:ee,dropSize:J}),P.length>8){var re=P.shift();L[re.idx].drops-=re.drop,L[re.idx].dropSize-=re.dropSize,L[re.idx].noDrops-=re.noDrop}},getSwitchRequests:function(){return L},reset:function(){L=[],P=[]}}}Rr.__dashjs_factory_name="SwitchRequestHistory";var pi=U.Z.getClassFactory(Rr);function gu(){var L={},P={},B={};return{push:function(V,ee,J){if(ee){L[V]||(L[V]=[],P[V]=0,B[V]=0);var H=J&&J.droppedVideoFrames?J.droppedVideoFrames:0,re=J&&J.totalVideoFrames?J.totalVideoFrames:0,ce=H-P[V];P[V]=H;var Se=re-B[V];B[V]=re;var Ee=L[V];isNaN(ee)||(Ee[ee]?(Ee[ee].droppedVideoFrames+=ce,Ee[ee].totalVideoFrames+=Se):Ee[ee]={droppedVideoFrames:ce,totalVideoFrames:Se})}},getFrameHistory:function(V){return L[V]},clearForStream:function(V){try{delete L[V],delete P[V],delete B[V]}catch(ee){}},reset:function(){L={},P={},B={}}}}gu.__dashjs_factory_name="DroppedFramesHistory";var Vh=U.Z.getClassFactory(gu);function Wu(L){var P,B,V,ee,J,H=this.context,re=(L=L||{}).settings,ce=(0,m.Z)(H).getInstance();function Se(De,Be,ze,_e){var Le=Math.pow(.5,ze/_e.fast);De.fastEstimate=(1-Le)*Be+Le*De.fastEstimate;var we=Math.pow(.5,ze/_e.slow);De.slowEstimate=(1-we)*Be+we*De.slowEstimate,De.totalWeight+=ze}function Ee(De,Be,ze){return re.get().streaming.abr.movingAverageMethod!==y.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(_e,Le){var we=_e?J.throughputHalfLife:J.latencyHalfLife,je=_e?V[Le]:ee[Le];if(!je||je.totalWeight<=0)return NaN;var Z=je.fastEstimate/(1-Math.pow(.5,je.totalWeight/we.fast)),ue=je.slowEstimate/(1-Math.pow(.5,je.totalWeight/we.slow));return _e?Math.min(Z,ue):Math.max(Z,ue)}(De,Be):function(_e,Le,we){var je=function(ue,ae,se){var Q,Me;if(ue?(Q=P[ae],Me=se?3:4):(Q=B[ae],Me=4),Q){if(Me>=Q.length)Me=Q.length;else if(ue)for(var be=1;be<Me;++be){var ke=Q[Q.length-be]/Q[Q.length-be-1];if((ke>=1.3||ke<=.7692307692307692)&&(Me+=1)===Q.length)break}}else Me=0;return Me}(_e,Le,we),Z=(_e?P:B)[Le];return je!==0&&Z&&Z.length!==0?(Z=Z.slice(-je)).reduce(function(ue,ae){return ue+ae})/Z.length:NaN}(De,Be,ze)}function ie(De,Be){return Ee(!0,De,Be)}function me(De){P[De]=P[De]||[],B[De]=B[De]||[],V[De]=V[De]||{fastEstimate:0,slowEstimate:0,totalWeight:0},ee[De]=ee[De]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function ge(){P={},B={},V={},ee={}}var qe={push:function(De,Be,ze){if(Be.trace&&Be.trace.length){var _e,Le=Be.tresponse.getTime()-Be.trequest.getTime()||1,we=Be._tfinish.getTime()-Be.tresponse.getTime()||1,je=Be.trace.reduce(function(se,Q){return se+Q.b[0]},0),Z=0;if((_e=Be._fileLoaderType&&Be._fileLoaderType===y.Z.FILE_LOADER_TYPES.FETCH?Be.trace.reduce(function(se,Q){return se+Q.d},0):ze?we:Le+we)!==0&&(Z=Math.round(8*je/_e)),Be.cmsd){var ue=Be.cmsd.dynamic&&Be.cmsd.dynamic.etp?Be.cmsd.dynamic.etp:null;if(ue){var ae=re.get().streaming.cmsd.abr.etpWeightRatio;ae>0&&ae<=1&&(Z=Z*(1-ae)+ue*ae)}}if(me(De),function(se,Q,Me){return se===y.Z.VIDEO?Me<re.get().streaming.cacheLoadThresholds[y.Z.VIDEO]:se===y.Z.AUDIO?Me<re.get().streaming.cacheLoadThresholds[y.Z.AUDIO]:void 0}(De,0,we)){if(P[De].length>0&&!P[De].hasCachedEntries)return;P[De].hasCachedEntries=!0}else P[De]&&P[De].hasCachedEntries&&function(se){delete P[se],delete B[se],delete V[se],delete ee[se],me(se)}(De);P[De].push(Z),ce.trigger(_.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:Z,mediaType:De,httpRequest:Be}),P[De].length>20&&P[De].shift(),B[De].push(Le),B[De].length>20&&B[De].shift(),Se(V[De],Z,.001*we,J.throughputHalfLife),Se(ee[De],Le,1,J.latencyHalfLife)}},getAverageThroughput:ie,getSafeAverageThroughput:function(De,Be){var ze=ie(De,Be);return isNaN(ze)||(ze*=re.get().streaming.abr.bandwidthSafetyFactor),ze},getAverageLatency:function(De){return Ee(!1,De)},reset:ge};return J={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},ge(),qe}Wu.__dashjs_factory_name="ThroughputHistory";var Nm=U.Z.getClassFactory(Wu);function Kf(){var L,P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z,ue,ae,se,Q,Me=this.context,be=(0,x.Z)(Me).getInstance(),ke=(0,m.Z)(Me).getInstance();function Re(){ee={},J={},re={},H={},Le={},Z={},ue={},ae={},Se===void 0&&(Se=!1),we&&we.reset(),_e=void 0,we=void 0,je=void 0,clearTimeout(ce),ce=null}function pe(nt){var vt=nt.request.mediaType,Wt=nt.streamId;if(vt&&Wt&&H[Wt]&&Q.get().streaming.abr.autoSwitchBitrate[vt]){var Nt=H[Wt][vt];if(Nt){var en=Kh(Me).create({abrController:L,streamProcessor:Nt,currentRequest:nt.request,useBufferOccupancyABR:Z[vt],useL2AABR:ue[vt],useLoLPABR:ae[vt],videoModel:ge}),Jt=B.shouldAbandonFragment(en,Wt);Jt.quality>la.Z.NO_CHANGE&&Nt.getFragmentModel().getRequests({state:$.FRAGMENT_MODEL_LOADING,index:nt.request.index})[0]&&(re[Wt][vt].state=D.Z.ABANDON_LOAD,Le[Wt][vt].reset(),Le[Wt][vt].push({oldValue:Je(vt,Wt),newValue:Jt.quality,confidence:1,reason:Jt.reason}),ht(vt,V.getActiveStreamInfo(),Jt.quality,Jt.reason),clearTimeout(ce),ce=setTimeout(function(){re[Wt][vt].state=D.Z.ALLOW_LOAD,ce=null},Q.get().streaming.abandonLoadTimeout))}}}function Ne(nt){nt.mediaType===y.Z.VIDEO&&(_e!==void 0&&we.push(nt.streamId,_e,ge.getPlaybackQuality()),_e=nt.newQuality)}function Ye(nt){var vt,Wt;nt.metric!==D.Z.HTTP_REQUEST||!nt.value||nt.value.type!==it.w.MEDIA_SEGMENT_TYPE||nt.mediaType!==y.Z.AUDIO&&nt.mediaType!==y.Z.VIDEO||je.push(nt.mediaType,nt.value,Q.get().streaming.abr.useDeadTimeLatency),nt.metric!==D.Z.BUFFER_LEVEL||nt.mediaType!==y.Z.AUDIO&&nt.mediaType!==y.Z.VIDEO||(vt=nt.mediaType,Wt=.001*nt.value.level,Q.get().streaming.abr.ABRStrategy===y.Z.ABR_STRATEGY_DYNAMIC&&function(Nt,en){try{var Jt=qe.getStableBufferTime(),Yt=Jt,Dn=.5*Jt,Nn=Z[Nt],rr=en>(Nn?Dn:Yt);Z[Nt]=rr,rr!==Nn&&(rr?P.info("["+Nt+"] switching from throughput to buffer occupancy ABR rule (buffer: "+en.toFixed(3)+")."):P.info("["+Nt+"] switching from buffer occupancy to throughput ABR rule (buffer: "+en.toFixed(3)+")."))}catch(ir){P.error(ir)}}(vt,Wt))}function dt(nt,vt){try{var Wt;return ee[vt]=ee[vt]||{},ee[vt].hasOwnProperty(nt)||(ee[vt][nt]=0),Wt=function(Nt,en){var Jt=ee[en][Nt],Yt=Jt;if(!H[en]||!H[en][Nt])return Yt;var Dn=at(Nt,en);Dn!==void 0&&(Yt=Math.max(Jt,Dn));var Nn=function(rr,ir){try{var It=qe.getAbrBitrateParameter("maxBitrate",rr);return It>-1?kt(H[ir][rr].getMediaInfo(),It,ir):void 0}catch($t){return}}(Nt,en);return Nn!==void 0&&(Yt=Math.min(Yt,Nn)),Yt}(nt,vt),Wt=function(Nt,en,Jt){var Yt=ee[Jt][en],Dn=Q.get().streaming.abr.maxRepresentationRatio[en];return isNaN(Dn)||Dn>=1||Dn<0?Nt:Math.min(Nt,Math.round(Yt*Dn))}(Wt,nt,vt),Wt=function(Nt,en,Jt){if(en!==y.Z.VIDEO||!Q.get().streaming.abr.limitBitrateByPortal||!H[Jt]||!H[Jt][en])return Nt;Se||An();var Yt=H[Jt][en].getStreamInfo(),Dn=me.getAdaptationForType(Yt.index,en,Yt).Representation_asArray,Nn=Nt;if(Ee>0&&ie>0){for(;Nn>0&&Dn[Nn]&&Ee<Dn[Nn].width&&Ee-Dn[Nn-1].width<Dn[Nn].width-Ee;)Nn-=1;for(;Nn<Dn.length-1&&Dn[Nn].width===Dn[Nn+1].width;)Nn+=1}return Nn}(Wt,nt,vt),Q.get().streaming.cmsd.enabled&&Q.get().streaming.cmsd.abr.applyMb&&(Wt=function(Nt,en,Jt){if(en!=="video")return Nt;var Yt=Be.getMaxBitrate(en);if(Yt<0)return Nt;var Dn=Gt(Jt,"audio",Je("audio",Jt));Yt-=Dn?Dn.bitrate/1e3:0;var Nn=kt(H[Jt][en].getMediaInfo(),Yt,Jt);return P.debug("Stream ID: "+Jt+" ["+en+"] Apply max bit rate from CMSD: "+Yt),Math.min(Nt,Nn)}(Wt,nt,vt)),Wt}catch(Nt){return}}function at(nt,vt){try{return function(Wt,Nt){try{var en=qe.getAbrBitrateParameter("minBitrate",Wt);if(en>-1){var Jt=H[Nt][Wt].getMediaInfo(),Yt=Ft(Jt),Dn=kt(Jt,en,Nt);return Yt[Dn]&&Dn<Yt.length-1&&Yt[Dn].bitrate<1e3*en&&Dn++,Dn}return}catch(Nn){return}}(nt,vt)}catch(Wt){return}}function Je(nt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return vt||(vt=V.getActiveStreamInfo().id),nt&&H[vt]&&H[vt][nt]&&vt?(J[vt]=J[vt]||{},J[vt].hasOwnProperty(nt)||(J[vt][nt]=0),J[vt][nt]):0}catch(Wt){return 0}}function ht(nt,vt,Wt){var Nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(vt&&vt.id&&nt){var en=vt.id,Jt=Je(nt,en);(0,ye.SE)(Wt);var Yt=dt(nt,en);Wt!==Jt&&Wt>=0&&Wt<=Yt&&Bt(nt,Jt,Wt,Yt,Nt,en)}}function Bt(nt,vt,Wt,Nt,en,Jt){if(nt&&H[Jt]&&H[Jt][nt]){var Yt=H[Jt][nt].getStreamInfo(),Dn=Yt&&Yt.manifestInfo&&Yt.manifestInfo.isDynamic,Nn=se.getCurrentBufferLevel(nt);P.info("Stream ID: "+Jt+" ["+nt+"] switch from "+vt+" to "+Wt+"/"+Nt+" (buffer: "+Nn+") "+(en?JSON.stringify(en):".")),J[Jt]=J[Jt]||{},J[Jt][nt]=Wt;var rr=Gt(Jt,nt,Wt);ke.trigger(T.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:vt,newQuality:Wt,reason:en,streamInfo:Yt,bitrateInfo:rr,maxIdx:Nt,mediaType:nt},{streamId:Yt.id,mediaType:nt});var ir=je.getAverageThroughput(nt,Dn);isNaN(ir)||ze.setSavedBitrateSettings(nt,ir)}}function Gt(nt,vt,Wt){if(vt&&H&&H[nt]&&H[nt][vt]){var Nt=Ft(H[nt][vt].getMediaInfo());return Nt[Wt]?Nt[Wt]:null}return null}function kt(nt,vt,Wt){var Nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,en=nt&&nt.type?H[Wt][nt.type].getRepresentationInfo():null;if(Q.get().streaming.abr.useDeadTimeLatency&&Nt&&en&&en.fragmentDuration){Nt/=1e3;var Jt=en.fragmentDuration;if(Nt>Jt)return 0;var Yt=Nt/Jt;vt*=1-Yt}for(var Dn=Ft(nt),Nn=Dn.length-1;Nn>=0;Nn--){var rr=Dn[Nn];if(1e3*vt>=rr.bitrate)return Nn}return 0}function Ft(nt){var vt=[];if(!nt||!nt.bitrateList)return vt;for(var Wt,Nt=nt.bitrateList,en=nt.type,Jt=0,Yt=Nt.length;Jt<Yt;Jt++)(Wt=new Lu).mediaType=en,Wt.qualityIndex=Jt,Wt.bitrate=Nt[Jt].bandwidth,Wt.width=Nt[Jt].width,Wt.height=Nt[Jt].height,Wt.scanType=Nt[Jt].scanType,vt.push(Wt);return vt}function An(){if(ge){var nt=Q.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;Ee=ge.getClientWidth()*nt,ie=ge.getClientHeight()*nt}}return L={initialize:function(){we=Vh(Me).create(),je=Nm(Me).create({settings:Q}),(B=(0,Nc.Z)(Me).create({dashMetrics:se,customParametersModel:De,mediaPlayerModel:qe,settings:Q})).initialize(),ke.on(_.Z.QUALITY_CHANGE_RENDERED,Ne,L),ke.on(_.Z.METRIC_ADDED,Ye,L),ke.on(T.Z.LOADING_PROGRESS,pe,L)},isPlayingAtTopQuality:function(nt){var vt=nt?nt.id:null,Wt=Je(y.Z.AUDIO,vt),Nt=Je(y.Z.VIDEO,vt);return Wt===dt(y.Z.AUDIO,vt)&&Nt===dt(y.Z.VIDEO,vt)},updateTopQualityIndex:function(nt){var vt=nt.type,Wt=nt.streamInfo.id,Nt=nt.representationCount-1;return ee[Wt]=ee[Wt]||{},ee[Wt][vt]=Nt,Nt},clearDataForStream:function(nt){we&&we.clearForStream(nt),H[nt]&&delete H[nt],Le[nt]&&delete Le[nt],re[nt]&&delete re[nt]},getThroughputHistory:function(){return je},getBitrateList:Ft,getQualityForBitrate:kt,getTopBitrateInfoFor:function(nt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(vt||(vt=V.getActiveStreamInfo().id),nt&&H&&H[vt]&&H[vt][nt]){var Wt=dt(nt,vt),Nt=Ft(H[vt][nt].getMediaInfo());return Nt[Wt]?Nt[Wt]:null}return null},getMinAllowedIndexFor:at,getMaxAllowedIndexFor:dt,getInitialBitrateFor:function(nt,vt){if(function(){if(!ze||!ze.hasOwnProperty("getSavedBitrateSettings"))throw new Error(y.Z.MISSING_CONFIG_ERROR)}(),nt===y.Z.TEXT)return NaN;var Wt=ze.getSavedBitrateSettings(nt),Nt=qe.getAbrBitrateParameter("initialBitrate",nt),en=Q.get().streaming.abr.initialRepresentationRatio[nt];if(Nt===-1)if(en>-1){var Jt=H[vt][nt].getStreamInfo(),Yt=me.getAdaptationForType(Jt.index,nt,Jt).Representation_asArray;Nt=Array.isArray(Yt)?Yt[Math.max(Math.round(Yt.length*en)-1,0)].bandwidth/1e3:0}else Nt=isNaN(Wt)?nt===y.Z.VIDEO?1e3:100:Wt;return Nt},getQualityFor:Je,getAbandonmentStateFor:function(nt,vt){return re[nt]&&re[nt][vt]?re[nt][vt].state:null},setPlaybackQuality:ht,checkPlaybackQuality:function(nt,vt){try{if(!(nt&&H&&H[vt]&&H[vt][nt]))return!1;if(we){var Wt=ge.getPlaybackQuality();Wt&&we.push(vt,_e,Wt)}if(!Q.get().streaming.abr.autoSwitchBitrate[nt])return!1;var Nt=Je(nt,vt),en=Kh(Me).create({abrController:L,switchHistory:Le[vt][nt],droppedFramesHistory:we,streamProcessor:H[vt][nt],currentValue:Nt,useBufferOccupancyABR:Z[nt],useL2AABR:ue[nt],useLoLPABR:ae[nt],videoModel:ge}),Jt=at(nt,vt),Yt=dt(nt,vt),Dn=B.getMaxQuality(en),Nn=Dn.quality;return Jt!==void 0&&(Nn>la.Z.NO_CHANGE?Nn:Nt)<Jt&&(Nn=Jt),Nn>Yt&&(Nn=Yt),Le[vt][nt].push({oldValue:Nt,newValue:Nn}),Nn>la.Z.NO_CHANGE&&Nn!==Nt&&(re[vt][nt].state===D.Z.ALLOW_LOAD||Nn<Nt)&&(Bt(nt,Nt,Nn,Yt,Dn.reason,vt),!0)}catch(rr){return!1}},setElementSize:An,setWindowResizeEventCalled:function(nt){Se=nt},registerStreamType:function(nt,vt){var Wt=vt.getStreamInfo().id;H[Wt]||(H[Wt]={}),Le[Wt]||(Le[Wt]={}),re[Wt]||(re[Wt]={}),Le[Wt][nt]=pi(Me).create(),H[Wt][nt]=vt,re[Wt][nt]={},re[Wt][nt].state=D.Z.ALLOW_LOAD,function(Nt){var en=Q.get().streaming.abr.ABRStrategy;en===y.Z.ABR_STRATEGY_L2A?(Z[Nt]=!1,ae[Nt]=!1,ue[Nt]=!0):en===y.Z.ABR_STRATEGY_LoLP?(Z[Nt]=!1,ae[Nt]=!0,ue[Nt]=!1):en===y.Z.ABR_STRATEGY_BOLA?(Z[Nt]=!0,ae[Nt]=!1,ue[Nt]=!1):en===y.Z.ABR_STRATEGY_THROUGHPUT?(Z[Nt]=!1,ae[Nt]=!1,ue[Nt]=!1):en===y.Z.ABR_STRATEGY_DYNAMIC&&(Z[Nt]=!(!Z||!Z[Nt])&&Z[Nt],ae[Nt]=!1,ue[Nt]=!1)}(nt),nt===y.Z.VIDEO&&An()},unRegisterStreamType:function(nt,vt){try{H[nt]&&H[nt][vt]&&delete H[nt][vt],Le[nt]&&Le[nt][vt]&&delete Le[nt][vt],re[nt]&&re[nt][vt]&&delete re[nt][vt]}catch(Wt){}},setConfig:function(nt){nt&&(nt.streamController&&(V=nt.streamController),nt.domStorage&&(ze=nt.domStorage),nt.mediaPlayerModel&&(qe=nt.mediaPlayerModel),nt.customParametersModel&&(De=nt.customParametersModel),nt.cmsdModel&&(Be=nt.cmsdModel),nt.dashMetrics&&(se=nt.dashMetrics),nt.adapter&&(me=nt.adapter),nt.videoModel&&(ge=nt.videoModel),nt.settings&&(Q=nt.settings))},reset:function(){Re(),ke.off(T.Z.LOADING_PROGRESS,pe,L),ke.off(_.Z.QUALITY_CHANGE_RENDERED,Ne,L),ke.off(_.Z.METRIC_ADDED,Ye,L),B&&B.reset()}},P=be.getLogger(L),Re(),L}Kf.__dashjs_factory_name="AbrController";var zh=U.Z.getSingletonFactory(Kf);zh.QUALITY_DEFAULT=0,U.Z.updateSingletonFactory(Kf.__dashjs_factory_name,zh);var Wn=zh,xm=new Map([[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function xc(){var L,P,B,V,ee,J,H,re,ce=this.context,Se=(0,m.Z)(ce).getInstance(),Ee=[];function ie(){B&&(B.playbackRate=1,B.removeEventListener("canplay",ie))}function me(){return Ee.length>0}function ge(){if(B&&me()&&B.playbackRate===0){var we=document.createEvent("Event");we.initEvent("waiting",!0,!1),B.dispatchEvent(we)}}function qe(we,je){B&&B.addEventListener(we,je)}function De(we,je){B&&B.removeEventListener(we,je)}function Be(){return B?B.readyState:NaN}function ze(){return B?B.buffered:null}function _e(we,je,Z,ue,ae){if(B){for(var se=0;se<B.textTracks.length;se++)if(B.textTracks[se].kind===we&&(!je||B.textTracks[se].label==je)&&B.textTracks[se].language===Z&&B.textTracks[se].isTTML===ue&&B.textTracks[se].isEmbedded===ae)return B.textTracks[se]}return null}function Le(we,je){return we===y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Be()>=we?(je(),null):function(Z,ue){var ae=function se(){De(Z,se),ue(Z)};return qe(Z,ae),{func:ae,event:Z}}(xm.get(we),je)}return L={addEventListener:qe,addTextTrack:function(we,je,Z,ue,ae){if(!B)return null;var se=_e(we,je,Z,ue,ae);return se||((se=B.addTextTrack(we,je,Z)).isEmbedded=ae,se.isTTML=ue),se},appendChild:function(we){B&&(B.appendChild(we),we.isTTML!==void 0&&(B.textTracks[B.textTracks.length-1].isTTML=we.isTTML,B.textTracks[B.textTracks.length-1].isEmbedded=we.isEmbedded))},getBufferRange:ze,getClientHeight:function(){return B?B.clientHeight:NaN},getClientWidth:function(){return B?B.clientWidth:NaN},getElement:function(){return B},getEnded:function(){return B?B.ended:null},getPlaybackQuality:function(){if(!B)return null;var we="webkitDroppedFrameCount"in B&&"webkitDecodedFrameCount"in B,je=null;return"getVideoPlaybackQuality"in B?je=B.getVideoPlaybackQuality():we&&(je={droppedVideoFrames:B.webkitDroppedFrameCount,totalVideoFrames:B.webkitDroppedFrameCount+B.webkitDecodedFrameCount,creationTime:new Date}),je},getPlaybackRate:function(){return B?B.playbackRate:null},getPlayedRanges:function(){return B?B.played:null},getReadyState:Be,getSource:function(){return B?B.src:null},getTTMLRenderingDiv:function(){return J},getTextTrack:_e,getTextTracks:function(){return B?B.textTracks:[]},getTime:function(){return B?isNaN(V)?B.currentTime:V:null},getVideoHeight:function(){return B?B.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(B){var we=B.parentNode.host||B.parentNode;return we?B.getBoundingClientRect().left-we.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(B){var we=B.parentNode.host||B.parentNode;return we?B.getBoundingClientRect().top-we.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return B?B.videoWidth:NaN},getVttRenderingDiv:function(){return H},initialize:function(){Se.on(T.Z.PLAYBACK_PLAYING,ge,this)},isPaused:function(){return B?B.paused:null},isSeeking:function(){return B?B.seeking||!isNaN(V):null},isStalled:me,pause:function(){B&&(B.pause(),B.autoplay=!1)},play:function(){if(B){B.autoplay=!0;var we=B.play();we&&we.catch&&typeof Promise<"u"&&we.catch(function(je){je.name==="NotAllowedError"&&Se.trigger(T.Z.PLAYBACK_NOT_ALLOWED),P.warn("Caught pending play exception - continuing (".concat(je,")"))})}},removeChild:function(we){B&&B.removeChild(we)},removeEventListener:De,reset:function(){clearTimeout(re),Se.off(T.Z.PLAYBACK_PLAYING,ge,this)},setCurrentTime:function(we,je){B&&(ee&&ee.func&&ee.event&&De(ee.event,ee.func),V=we,ee=Le(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(B)if(B.currentTime!==V)try{V=je?function(Z){var ue=ze(),ae=Z,se=9999999999;if(ue)for(var Q=0;Q<ue.length;Q++){var Me=ue.start(Q),be=ue.end(Q),ke=Math.abs(Me-Z),Re=Math.abs(be-Z);if(Z>=Me&&Z<=be)return Z;ke<se&&(se=ke,ae=Me),Re<se&&(se=Re,ae=be)}return ae}(V):V,isNaN(V)||(B.currentTime=V),V=NaN}catch(Z){B.readyState===0&&Z.code===Z.INVALID_STATE_ERR&&(re=setTimeout(function(){B.currentTime=V,V=NaN},400))}else V=NaN}))},setElement:function(we){if(!(we==null||we&&/^(VIDEO|AUDIO)$/i.test(we.nodeName)))throw"element is not video or audio DOM type!";(B=we)&&(B.preload="auto")},setPlaybackRate:function(we){var je=arguments.length>1&&arguments[1]!==void 0&&arguments[1];B&&(!je&&B.readyState<=2&&we>0?B.addEventListener("canplay",ie):B.playbackRate=we)},setSource:function(we){B&&(we?B.src=we:(B.removeAttribute("src"),B.load()))},setStallState:function(we,je){(function(Z,ue){ue?function(ae){ae!==null&&B&&!B.seeking&&Ee.indexOf(ae)===-1&&Ee.push(ae)}(Z):function(ae){var se=Ee.indexOf(ae);ae!==null&&se!==-1&&Ee.splice(se,1)}(Z)})(we,je)},setTTMLRenderingDiv:function(we){(J=we).style.position="absolute",J.style.display="flex",J.style.overflow="hidden",J.style.pointerEvents="none",J.style.top=0,J.style.left=0},setVttRenderingDiv:function(we){H=we},waitForReadyState:Le,setDisableRemotePlayback:function(we){B&&(B.disableRemotePlayback=we)}},P=(0,x.Z)(ce).getInstance().getLogger(L),V=NaN,L}xc.__dashjs_factory_name="VideoModel";var Sr=U.Z.getSingletonFactory(xc),kl=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],mu="dashjs_?_bitrate",Kr="dashjs_?_settings",Ko="localStorage",Li="lastBitrate",Mm="lastMediaSettings";function Yh(L){L=L||{};var P,B,V,ee=this.context,J=L.settings;function H(Ee){if(V!==void 0)return V;var ie;V=!1;try{typeof window<"u"&&(ie=window[Ee])}catch(me){return B.warn("DOMStorage access denied: "+me.message),V}if(!ie||Ee!==Ko)return V;try{ie.setItem("1","1"),ie.removeItem("1"),V=!0}catch(me){B.warn("DOMStorage is supported, but cannot be used: "+me.message)}return V}function re(){var Ee=6e5;return Math.round(new Date().getTime()/Ee)*Ee}function ce(Ee,ie){return H(Ee)&&J.get().streaming[ie+"CachingInfo"].enabled}function Se(){if(!J)throw new Error(y.Z.MISSING_CONFIG_ERROR)}return P={getSavedBitrateSettings:function(Ee){if(Se(),!J.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var ie=NaN;if(ce(Ko,Li)){var me=mu.replace(/\?/,Ee);try{var ge=JSON.parse(localStorage.getItem(me))||{},qe=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastBitrateCachingInfo.ttl||!1,De=parseFloat(ge.bitrate);isNaN(De)||qe?qe&&localStorage.removeItem(me):(ie=De,B.debug("Last saved bitrate for "+Ee+" was "+De))}catch(Be){return null}}return ie},setSavedBitrateSettings:function(Ee,ie){if(ce(Ko,Li)&&ie){var me=mu.replace(/\?/,Ee);try{localStorage.setItem(me,JSON.stringify({bitrate:ie.toFixed(3),timestamp:re()}))}catch(ge){B.error(ge.message)}}},getSavedMediaSettings:function(Ee){if(Se(),!J.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var ie=null;if(ce(Ko,Mm)){var me=Kr.replace(/\?/,Ee);try{var ge=JSON.parse(localStorage.getItem(me))||{},qe=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;ie=ge.settings,qe&&(localStorage.removeItem(me),ie=null)}catch(De){return null}}return ie},setSavedMediaSettings:function(Ee,ie){if(ce(Ko,Mm)){var me=Kr.replace(/\?/,Ee);try{localStorage.setItem(me,JSON.stringify({settings:ie,timestamp:re()}))}catch(ge){B.error(ge.message)}}}},B=(0,x.Z)(ee).getInstance().getLogger(P),H(Ko)&&kl.forEach(function(Ee){var ie=localStorage.getItem(Ee.oldKey);if(ie){localStorage.removeItem(Ee.oldKey);try{localStorage.setItem(Ee.newKey,ie)}catch(me){B.error(me.message)}}}),P}Yh.__dashjs_factory_name="DOMStorage";var LE=U.Z.getSingletonFactory(Yh),Dm=w(2032),Wh=w(2011);function Mc(){var L,P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge=this.context;function qe(_e,Le,we,je){var Z=null,ue=_e?me.resolve(_e.path):null,ae=je||{init:!0,url:ue?ue.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:Le};P.debug("Start searching for initialization.");var se=ze(ae);re.load({request:se,success:function(Q){if(ae.bytesLoaded=ae.range.end,!(Z=V.findInitRange(Q)))return ae.range.end=ae.bytesLoaded+ae.bytesToLoad,qe(_e,Le,we,ae);_e.range=Z,we(_e)},error:function(){we(_e)}}),P.debug("Perform init search: "+ae.url)}function De(_e,Le,we,je,Z,ue){if(we&&(we.start===void 0||we.end===void 0)){var ae=we?we.toString().split("-"):null;we=ae?{start:parseFloat(ae[0]),end:parseFloat(ae[1])}:null}Z=Z||Be;var se=null,Q=null,Me=!!we,be=_e?me.resolve(_e.path):null,ke={init:!1,url:be?be.url:void 0,range:Me?we:{start:0,end:1500},searching:!Me,bytesLoaded:ue?ue.bytesLoaded:0,bytesToLoad:1500,mediaType:Le},Re=ze(ke);re.load({request:Re,success:function(pe){var Ne=ke.bytesToLoad,Ye=pe.byteLength;if(ke.bytesLoaded=ke.range.end-ke.range.start,se=V.parse(pe),(Q=se.getBox("sidx"))&&Q.isComplete){var dt,at,Je=Q.references;if(Je!=null&&Je.length>0&&(dt=Je[0].reference_type===1),dt){var ht,Bt,Gt,kt;P.debug("Initiate multiple SIDX load."),ke.range.end=ke.range.start+Q.size;var Ft=[],An=0,nt=(Q.offset||ke.range.start)+Q.size,vt=function(Nt){Nt?(Ft=Ft.concat(Nt),++An>=Bt&&(Ft.sort(function(en,Jt){return en.startTime-Jt.startTime<0?-1:0}),Z(Ft,_e,je))):Z(null,_e,je)};for(ht=0,Bt=Je.length;ht<Bt;ht++)Gt=nt,kt=nt+Je[ht].referenced_size-1,nt+=Je[ht].referenced_size,De(_e,Le,{start:Gt,end:kt},je,vt,ke)}else P.debug("Parsing segments from SIDX. representation "+Le+" - id: "+_e.id+" for range : "+ke.range.start+" - "+ke.range.end),at=function(Nt,en){for(var Jt,Yt,Dn,Nn,rr=Nt.references,ir=rr.length,It=Nt.timescale,$t=Nt.earliest_presentation_time,Zt=en.range.start+Nt.offset+Nt.first_offset+Nt.size,un=[],vn=0;vn<ir;vn++)Dn=rr[vn].subsegment_duration,Nn=rr[vn].referenced_size,(Jt=new Wh.Z).duration=Dn,Jt.startTime=$t,Jt.timescale=It,Yt=Zt+Nn-1,Jt.mediaRange=Zt+"-"+Yt,un.push(Jt),$t+=Dn,Zt+=Nn;return un}(Q,ke),Z(at,_e,je)}else{if(Q)ke.range.start=Q.offset||ke.range.start,ke.range.end=ke.range.start+(Q.size||Ne);else{if(Ye<ke.bytesLoaded)return void Z(null,_e,je);var Wt=se.getLastBox();Wt&&Wt.size?(ke.range.start=Wt.offset+Wt.size,ke.range.end=ke.range.start+Ne):ke.range.end+=Ne}De(_e,Le,ke.range,je,null,ke)}},error:function(){Z(null,_e,je)}}),P.debug("Perform SIDX load for type ".concat(Le," : ").concat(ke.url," with range ").concat(ke.range.start," - ").concat(ke.range.end))}function Be(_e,Le,we){we({segments:_e,representation:Le,error:_e?void 0:new fe.Z(ce.SEGMENT_BASE_LOADER_ERROR_CODE,ce.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function ze(_e){if(_e.url){var Le=new j.Z;return Le.setInfo(_e),Le}}return L={setConfig:function(_e){_e.baseURLController&&(me=_e.baseURLController),_e.dashMetrics&&(J=_e.dashMetrics),_e.mediaPlayerModel&&(H=_e.mediaPlayerModel),_e.errHandler&&(B=_e.errHandler),_e.boxParser&&(V=_e.boxParser),_e.debug&&(P=_e.debug.getLogger(L)),_e.requestModifier&&(ee=_e.requestModifier),_e.errors&&(ce=_e.errors),_e.urlUtils&&(ie=_e.urlUtils),_e.constants&&(Se=_e.constants),_e.dashConstants&&(Ee=_e.dashConstants)},initialize:function(){re=Io(ge).create({errHandler:B,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,boxParser:V,errors:ce,urlUtils:ie,constants:Se,dashConstants:Ee})},loadInitialization:function(_e,Le){return new Promise(function(we){qe(_e,Le,we)})},loadSegments:function(_e,Le,we){return new Promise(function(je){De(_e,Le,we,je)})},reset:function(){re&&(re.abort(),re=null)}}}Mc.__dashjs_factory_name="SegmentBaseLoader";var $a=U.Z.getSingletonFactory(Mc);function $h(L){var P;L=L||{};var B=new DataView(L.data),V=0;function ee(H,re){var ce=!0,Se=0;if(re===void 0&&(re=!1),H.tag>16777215?(B.getUint32(V)!==H.tag&&(ce=!1),Se=4):H.tag>65535?(256*B.getUint16(V)+B.getUint8(V+2)!==H.tag&&(ce=!1),Se=3):H.tag>255?(B.getUint16(V)!==H.tag&&(ce=!1),Se=2):(B.getUint8(V)!==H.tag&&(ce=!1),Se=1),!ce&&H.required&&!re)throw new Error("required tag not found");return ce&&(V+=Se),ce}function J(H){var re=1,ce=128,Se=-1,Ee=0,ie=B.getUint8(V),me=0;for(me=0;me<8;me+=1){if((ie&ce)===ce){Ee=H===void 0?ie&~ce:ie,Se=me;break}ce>>=1}for(me=0;me<Se;me+=1,re+=1)Ee=Ee<<8|255&B.getUint8(V+re);return V+=re,Ee}return P={getPos:function(){return V},setPos:function(H){V=H},consumeTag:ee,consumeTagAndSize:function(H,re){var ce=ee(H,re);return ce&&J(),ce},parseTag:function(H){var re;return ee(H),re=J(),P[H.parse](re)},skipOverElement:function(H,re){var ce,Se=ee(H,re);return Se&&(ce=J(),V+=ce),Se},getMatroskaCodedNum:J,getMatroskaFloat:function(H){var re;switch(H){case 4:re=B.getFloat32(V),V+=4;break;case 8:re=B.getFloat64(V),V+=8}return re},getMatroskaUint:function(H){if(H>4)return function(Se){for(var Ee=Math.floor(Number.MAX_SAFE_INTEGER/256),ie=0,me=0;me<Se;me+=1){if(ie>Ee)throw new Error("Value exceeds safe integer limit");ie*=256;var ge=B.getUint8(V+me);if(ie>Number.MAX_SAFE_INTEGER-ge)throw new Error("Value exceeds safe integer limit");ie+=ge}return V+=Se,ie}(H);for(var re=0,ce=0;ce<H;ce+=1)re<<=8,re|=255&B.getUint8(V+ce);return V+=H,re>>>0},moreData:function(){return V<B.byteLength}}}$h.__dashjs_factory_name="EBMLParser";var Dc=U.Z.getClassFactory($h);function $u(){var L,P,B,V,ee,J,H,re,ce,Se,Ee=this.context;function ie(me){var ge=new j.Z;return ge.setInfo(me),ge}return L={setConfig:function(me){if(!(me.baseURLController&&me.dashMetrics&&me.mediaPlayerModel&&me.errHandler))throw new Error(y.Z.MISSING_CONFIG_ERROR);Se=me.baseURLController,J=me.dashMetrics,H=me.mediaPlayerModel,V=me.errHandler,ce=me.errors,P=me.debug.getLogger(L),ee=me.requestModifier},initialize:function(){re=Io(Ee).create({errHandler:V,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,errors:ce})},loadInitialization:function(me,ge){return new Promise(function(qe){var De=null,Be=me?Se.resolve(me.path):null,ze=me?me.range.split("-"):null,_e={range:{start:ze?parseFloat(ze[0]):null,end:ze?parseFloat(ze[1]):null},request:De,url:Be?Be.url:void 0,init:!0,mediaType:ge};P.info("Start loading initialization."),De=ie(_e),re.load({request:De,success:function(){qe(me)},error:function(){qe(me)}}),P.debug("Perform init load: "+_e.url)})},loadSegments:function(me,ge,qe){return new Promise(function(De){var Be=null,ze=me?Se.resolve(me.path):null,_e=ze?ze.url:void 0;Be=ie({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Be,url:_e,init:!1,mediaType:ge}),P.debug("Parsing ebml header"),re.load({request:Be,success:function(Le){(function(we,je,Z,ue){if(we&&we.byteLength!==0){var ae,se,Q,Me,be=Dc(Ee).create({data:we}),ke=Z?Z.split("-"):null,Re=null,pe={url:je,range:{start:ke?parseFloat(ke[0]):null,end:ke?parseFloat(ke[1]):null},request:Re};for(P.debug("Parse EBML header: "+pe.url),be.skipOverElement(B.EBML),be.consumeTag(B.Segment),Q=be.getMatroskaCodedNum(),Q+=be.getPos(),Me=be.getPos();be.moreData()&&!be.consumeTagAndSize(B.Segment.Info,!0);)if(!(be.skipOverElement(B.Segment.SeekHead,!0)||be.skipOverElement(B.Segment.Tracks,!0)||be.skipOverElement(B.Segment.Cues,!0)||be.skipOverElement(B.Void,!0)))throw new Error("no valid top level element found");for(;ae===void 0;){var Ne=be.getMatroskaCodedNum(!0),Ye=be.getMatroskaCodedNum();Ne===B.Segment.Info.Duration.tag?ae=be[B.Segment.Info.Duration.parse](Ye):be.setPos(be.getPos()+Ye)}Re=ie(pe),re.load({request:Re,success:function(dt){se=function(at,Je,ht,Bt){var Gt,kt,Ft,An,nt,vt,Wt,Nt;for(Ft=[],nt=0,vt=(kt=function(en){var Jt,Yt,Dn=[],Nn=Dc(Ee).create({data:en});for(Nn.consumeTagAndSize(B.Segment.Cues);Nn.moreData()&&Nn.consumeTagAndSize(B.Segment.Cues.CuePoint,!0);){for((Jt={}).CueTime=Nn.parseTag(B.Segment.Cues.CuePoint.CueTime),Jt.CueTracks=[];Nn.moreData()&&Nn.consumeTag(B.Segment.Cues.CuePoint.CueTrackPositions,!0);){var rr=Nn.getMatroskaCodedNum(),ir=Nn.getPos();if((Yt={}).Track=Nn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Yt.Track===0)throw new Error("Cue track cannot be 0");Yt.ClusterPosition=Nn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),Jt.CueTracks.push(Yt),Nn.setPos(ir+rr)}if(Jt.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Dn.push(Jt)}if(Dn.length===0)throw new Error("mandatory cuepoint not found");return Dn}(at)).length;nt<vt;nt+=1)An=new Wh.Z,Gt=nt<kt.length-1?kt[nt+1].CueTime-kt[nt].CueTime:Bt-kt[nt].CueTime,An.duration=Gt,An.startTime=kt[nt].CueTime,An.timescale=1e3,Wt=kt[nt].CueTracks[0].ClusterPosition+Je,Nt=nt<kt.length-1?kt[nt+1].CueTracks[0].ClusterPosition+Je-1:ht-1,An.mediaRange=Wt+"-"+Nt,Ft.push(An);return P.debug("Parsed cues: "+Ft.length+" cues."),Ft}(dt,Me,Q,ae),ue(se)},error:function(){P.error("Download Error: Cues "+pe.url),ue(null)}}),P.debug("Perform cues load: "+pe.url+" bytes="+pe.range.start+"-"+pe.range.end)}else ue(null)})(Le,_e,qe,function(we){De({segments:we,representation:me,error:we?void 0:new fe.Z(ce.SEGMENT_BASE_LOADER_ERROR_CODE,ce.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){De({representation:me,error:new fe.Z(ce.SEGMENT_BASE_LOADER_ERROR_CODE,ce.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){re&&(re.abort(),re=null)}},B={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},L}$u.__dashjs_factory_name="WebmSegmentBaseLoader";var jr=U.Z.getSingletonFactory($u);function Vf(L){L=L||{};var P,B,V,ee=this.context,J=L.eventBus,H=L.events,re=L.dashMetrics,ce=L.mediaPlayerModel,Se=L.errHandler,Ee=L.baseURLController,ie=L.debug,me=L.boxParser,ge=L.requestModifier,qe=L.errors;function De(Be){return(Be?Be.split("/")[1]:"").toLowerCase()==="webm"}return P={initialize:function(){B.initialize(),V.initialize()},getSegmentBaseInitSegment:function(Be){return De(Be.representation.mimeType)?V.loadInitialization(Be.representation,Be.mediaType):B.loadInitialization(Be.representation,Be.mediaType)},getSegmentList:function(Be){return De(Be.mimeType)?V.loadSegments(Be.representation,Be.mediaType,Be.representation?Be.representation.indexRange:null):B.loadSegments(Be.representation,Be.mediaType,Be.representation?Be.representation.indexRange:null)},reset:function(){B.reset(),V.reset()}},B=$a(ee).getInstance(),V=jr(ee).getInstance(),B.setConfig({baseURLController:Ee,dashMetrics:re,mediaPlayerModel:ce,errHandler:Se,eventBus:J,events:H,errors:qe,debug:ie,boxParser:me,requestModifier:ge}),V.setConfig({baseURLController:Ee,dashMetrics:re,mediaPlayerModel:ce,errHandler:Se,eventBus:J,events:H,errors:qe,debug:ie,requestModifier:ge}),P}Vf.__dashjs_factory_name="SegmentBaseController";var kE=U.Z.getSingletonFactory(Vf),Fl=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Pc=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},Dr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},Bs=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function Pm(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var kr=function(){function L(V){var ee=this;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.valid=V[0]=="/",this.path=V.split("/").filter(function(J){return J.length!==0}).map(function(J){var H={name:J},re=J.indexOf("[");if(re!=-1){H.name=J.substring(0,re);var ce=J.substring(re+1,J.length-1);ee.valid=ee.valid&&ce.indexOf("[")==-1;var Se=ce.indexOf("=");Se!=-1?(H.attribute={name:ce.substring(1,Se),value:ce.substring(Se+1)},["'",'"'].indexOf(H.attribute.value[0])!=-1&&(H.attribute.value=H.attribute.value.substring(1,H.attribute.value.length-1))):H.position=parseInt(ce,10)-1}return H})}var P,B;return P=L,(B=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(V,ee){for(var J=null,H=V,re=1,ce="MPD";re<this.path.length&&H!==null;){J=H;var Se=this.path[re];if(ce=Se.name,re!==this.path.length-1||!ce.startsWith("@")&&ce!=="text()"){var Ee=J[ce+"_asArray"]||[];Ee.length===0&&J[ce]&&Ee.push(J[ce]),Se.position?H=Ee[Se.position]||null:Se.attribute?function(){var ie=Se.attribute;H=Ee.filter(function(me){return me[ie.name]==ie.value})[0]||null}():H=Ee[0]||null}re++}return H===null?null:ce.startsWith("@")?{name:ce.substring(1),leaf:H,target:H}:ce==="text()"?{name:"__text",leaf:H,target:H}:{name:ce,leaf:H,target:ee?J:H}}}])&&Pm(P.prototype,B),L}();function yr(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var vu=function(){function L(V,ee,J){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,L),this.action=V,this.xpath=ee,this.value=J,this.position=null}var P,B;return P=L,(B=[{key:"getMpdTarget",value:function(V){var ee=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(V,ee)}}])&&yr(P.prototype,B),L}();function wi(){var L,P,B=this.context;return L={getIsPatch:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(V[v.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_PUBLISH_TIME)?new Date(V[v.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(V){return V&&V[v.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(V){return V?(V.__children||[]).map(function(ee){var J=Object.keys(ee)[0];if(J!=="add"&&J!=="remove"&&J!=="replace")return P.warn("Ignoring node of invalid action: ".concat(J)),null;var H=ee[J],re=H.sel;if(J==="add"&&H.type){if(!H.type.startsWith("@"))return P.warn("Ignoring add action for prefixed namespace declaration: ".concat(H.type,"=").concat(H.__text)),null;re="".concat(re,"/").concat(H.type)}var ce=new kr(re);if(!ce.isValid())return P.warn("Ignoring action with invalid selector: ".concat(J," - ").concat(re)),null;var Se=null;ce.findsAttribute()||ce.findsTextReplace()?Se=H.__text||"":J!=="remove"&&(Se=H.__children.reduce(function(ie,me){var ge=Object.keys(me)[0];return ge!=="#text"&&(ie[ge]=ie[ge]||[],ie[ge].push(me[ge])),ie},{}));var Ee=new vu(J,ce,Se);return J==="add"&&(Ee.position=H.pos),Ee}).filter(function(ee){return!!ee}):[]}},P=(0,x.Z)(B).getInstance().getLogger(L),L}wi.__dashjs_factory_name="PatchManifestModel";var Xh=U.Z.getSingletonFactory(wi);function Xu(){var L,P,B,V,ee,J,H,re=this.context;function ce(ae,se,Q){var Me,be=P.getAdaptationsForType(V[0].mpd.manifest,ae,se);if(!be||be.length===0)return null;if(be.length>1&&Q){var ke=ie(Q,se);if(ee[Q.id]&&ee[Q.id][se]){for(var Re=0,pe=be.length;Re<pe;Re++)if(Se(ee[Q.id][se],ke[Re]))return be[Re]}for(var Ne=0,Ye=be.length;Ne<Ye;Ne++)if(Me=be[Ne],P.getRolesForAdaptation(Me).filter(function(dt){return dt.value===v.Z.MAIN})[0])return be[Ne]}return be[0]}function Se(ae,se){if(!ae||!se)return!1;var Q=ae.id===se.id,Me=ae.codec===se.codec,be=ae.viewpoint===se.viewpoint,ke=JSON.stringify(ae.viewpointsWithSchemeIdUri)===JSON.stringify(se.viewpointsWithSchemeIdUri),Re=ae.lang===se.lang,pe=ae.roles.toString()===se.roles.toString(),Ne=JSON.stringify(ae.rolesWithSchemeIdUri)===JSON.stringify(se.rolesWithSchemeIdUri),Ye=ae.accessibility.toString()===se.accessibility.toString(),dt=JSON.stringify(ae.accessibilitiesWithSchemeIdUri)===JSON.stringify(se.accessibilitiesWithSchemeIdUri),at=ae.audioChannelConfiguration.toString()===se.audioChannelConfiguration.toString(),Je=JSON.stringify(ae.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(se.audioChannelConfigurationsWithSchemeIdUri);return Q&&Me&&be&&ke&&Re&&pe&&Ne&&Ye&&dt&&at&&Je}function Ee(ae,se,Q,Me,be,ke){var Re,pe,Ne,Ye,dt,at,Je=[];if(!Me||Me.length===0)return[];var ht=P.getAdaptationsForPeriod(se);for(Ye=0,at=Me.length;Ye<at;Ye++)if(Re=Me[Ye],pe=_e(ht[Ne=P.getIndexForAdaptation(Re,ae,Q.index)]),ke){var Bt=pe.accessibility.length;for(dt=0;dt<Bt;dt++)if(pe){var Gt=pe.accessibility[dt];if(Gt.indexOf("cea-608:")===0){var kt=Gt.substring(8).split(";");if(kt[0].substring(0,2)==="CC")for(dt=0;dt<kt.length;dt++)pe||(pe=_e.call(this,ht[Ne])),Le(pe,kt[dt].substring(0,3),kt[dt].substring(4)),Je.push(pe),pe=null;else for(dt=0;dt<kt.length;dt++)pe||(pe=_e.call(this,ht[Ne])),Le(pe,"CC"+(dt+1),kt[dt]),Je.push(pe),pe=null}else Gt.indexOf("cea-608")===0&&(Le(pe,J.CC1,"eng"),Je.push(pe),pe=null)}}else be===J.IMAGE?(pe.type=J.IMAGE,Je.push(pe),pe=null):pe&&Je.push(pe);return Je}function ie(ae,se,Q){var Me=V,be=Q,ke=[];if(be)je(),Me=me(be);else{if(!(V.length>0))return ke;be=V[0].mpd.manifest}var Re=ze(ae,Me),pe=P.getAdaptationsForType(be,ae?ae.index:null,se);return ke=Ee(be,Re,ae,pe,se),se===J.TEXT&&(pe=P.getAdaptationsForType(be,ae?ae.index:null,J.VIDEO),ke=ke.concat(Ee(be,Re,ae,pe,se,!0))),ke}function me(ae){var se=ge(ae);return P.getRegularPeriods(se)}function ge(ae){var se=De(ae);return P.getMpd(se)}function qe(){V=[],ee={}}function De(ae){return ae||(V.length>0?V[0].mpd.manifest:null)}function Be(ae){try{var se=ze(ae.streamInfo,V),Q=P.getAdaptationsForPeriod(se);return ae&&ae.streamInfo&&ae.streamInfo.id!==void 0&&Q?Q[ae.index]:null}catch(Me){return null}}function ze(ae,se){for(var Q=se.length,Me=0;Me<Q;Me++){var be=se[Me];if(ae&&ae.id===be.id)return be}return null}function _e(ae){if(!ae)return null;var se,Q,Me,be,ke,Re=new Pc,pe=ae.period.mpd.manifest.Period_asArray[ae.period.index].AdaptationSet_asArray[ae.index];if(Re.id=ae.id,Re.index=ae.index,Re.type=ae.type,Re.streamInfo=we(ae.period),Re.representationCount=P.getRepresentationCount(pe),Re.labels=P.getLabelsForAdaptation(pe),Re.lang=P.getLanguageForAdaptation(pe),Re.segmentAlignment=P.getSegmentAlignment(pe),Re.subSegmentAlignment=P.getSubSegmentAlignment(pe),se=P.getViewpointForAdaptation(pe),Re.viewpoint=se.length?se[0].value:void 0,Re.viewpointsWithSchemeIdUri=se,ke=P.getAccessibilityForAdaptation(pe),Re.accessibility=ke.map(function(Je){var ht=Je.value,Bt=ht;return Je.schemeIdUri&&Je.schemeIdUri.search("cea-608")>=0&&H!==void 0&&(Bt=ht?"cea-608:"+ht:"cea-608",Re.embeddedCaptions=!0),Bt}),Re.accessibilitiesWithSchemeIdUri=ke,Q=P.getAudioChannelConfigurationForAdaptation(pe),Re.audioChannelConfiguration=Q.map(function(Je){return Je.value}),Re.audioChannelConfigurationsWithSchemeIdUri=Q,Re.audioChannelConfiguration.length===0&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0&&(Me=P.getAudioChannelConfigurationForRepresentation(pe.Representation_asArray[0]),Re.audioChannelConfiguration=Me.map(function(Je){return Je.value}),Re.audioChannelConfigurationsWithSchemeIdUri=Me),be=P.getRolesForAdaptation(pe),Re.roles=be.map(function(Je){return Je.value}),Re.rolesWithSchemeIdUri=be,Re.codec=P.getCodec(pe),Re.mimeType=P.getMimeType(pe),Re.contentProtection=P.getContentProtectionData(pe),Re.bitrateList=P.getBitrateListForAdaptation(pe),Re.selectionPriority=P.getSelectionPriority(pe),Re.contentProtection){var Ne=Re.contentProtection.map(function(Je){return P.getKID(Je)}).filter(function(Je){return Je!==null});if(Ne.length){var Ye=Ne[0];Re.contentProtection.forEach(function(Je){Je.keyId=Ye})}}if(Re.isText=P.getIsText(pe),Re.supplementalProperties=P.getSupplementalPropertiesForAdaptation(pe),(!Re.supplementalProperties||Object.keys(Re.supplementalProperties).length===0)&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0){var dt=pe.Representation_asArray.map(function(Je){return P.getSupplementalPropertiesForRepresentation(Je)});dt.every(function(Je){return JSON.stringify(Je)===JSON.stringify(dt[0])})&&(Re.supplementalProperties=dt[0])}if(Re.supplementalPropertiesAsArray=P.getSupplementalPropertiesAsArrayForAdaptation(pe),(!Re.supplementalPropertiesAsArray||Re.supplementalPropertiesAsArray.length===0)&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0){var at=pe.Representation_asArray.map(function(Je){return P.getSupplementalPropertiesAsArrayForRepresentation(Je)});at.every(function(Je){return JSON.stringify(Je)===JSON.stringify(at[0])})&&(Re.supplementalPropertiesAsArray=at[0])}return Re.essentialProperties=P.getEssentialPropertiesForAdaptation(pe),Re.essentialPropertiesAsArray=P.getEssentialPropertiesAsArrayForAdaptation(pe),Re.isFragmented=P.getIsFragmented(pe),Re.isEmbedded=!1,Re}function Le(ae,se,Q){ae.id=se,ae.index=100+parseInt(se.substring(2,3)),ae.type=J.TEXT,ae.codec="cea-608-in-SEI",ae.isEmbedded=!0,ae.isFragmented=!1;var Me=yi()(Q);ae.lang=Me||Q,ae.roles=["caption"],ae.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function we(ae){var se,Q,Me=new Dr;return Me.id=ae.id,Me.index=ae.index,Me.start=ae.start,Me.duration=ae.duration,Me.manifestInfo=(se=ae.mpd,(Q=new Bs).dvrWindowSize=se.timeShiftBufferDepth,Q.loadedTime=se.manifest.loadedTime,Q.availableFrom=se.availabilityStartTime,Q.minBufferTime=se.manifest.minBufferTime,Q.maxFragmentDuration=se.maxSegmentDuration,Q.duration=P.getDuration(se.manifest),Q.isDynamic=P.getIsDynamic(se.manifest),Q.serviceDescriptions=P.getServiceDescriptions(se.manifest),Q.protocol=se.manifest.protocol,Q),Me.isLast=ae.mpd.manifest.Period_asArray.length===1||Math.abs(Me.start+Me.duration-Me.manifestInfo.duration)<1,Me}function je(){if(!J)throw new Error("setConfig function has to be called previously")}function Z(ae){return V.length>0?V[0].mpd.manifest.Period_asArray[ae]:null}function ue(ae,se,Q){var Me,be,ke,Re,pe;if(ae){for(Me=ae.AdaptationSet_asArray,Re=0;Re<Me.length;Re+=1)for(ke=Me[Re].Representation_asArray,pe=0;pe<ke.length;pe+=1)if(se===(be=ke[pe]).id)return Q?pe:be}return null}return L={getBandwidthForRepresentation:function(ae,se){var Q;return(Q=ue(Z(se),ae))?Q.bandwidth:null},getIndexForRepresentation:function(ae,se){return function(Q,Me){var be=ue(Q,Me,!0);return be!==null?be:-1}(Z(se),ae)},getMaxIndexForBufferType:function(ae,se){return function(Q,Me){var be,ke,Re,pe;if(!Q||!Me)return-1;for(ke=Q.AdaptationSet_asArray,pe=0;pe<ke.length;pe+=1)if(Re=(be=ke[pe]).Representation_asArray,P.getIsTypeOf(be,Me))return Re.length;return-1}(Z(se),ae)},convertRepresentationToRepresentationInfo:function(ae){if(ae){var se=new Fl,Q=ae.adaptation.period.mpd.manifest.Period_asArray[ae.adaptation.period.index].AdaptationSet_asArray[ae.adaptation.index],Me=P.getRepresentationFor(ae.index,Q);return se.id=ae.id,se.quality=ae.index,se.bandwidth=P.getBandwidth(Me),se.fragmentDuration=ae.segmentDuration||(ae.segments&&ae.segments.length>0?ae.segments[0].duration:NaN),se.MSETimeOffset=ae.MSETimeOffset,se.mediaInfo=_e(ae.adaptation),se}return null},getStreamsInfo:function(ae,se){var Q=[],Me=V;if(ae&&(je(),Me=me(ae)),Me.length>0){(!se||se>Me.length)&&(se=Me.length);for(var be=0;be<se;be++)Q.push(we(Me[be]))}return Q},getMediaInfoForType:function(ae,se){if(V.length===0||!ae)return null;var Q=ze(ae,V);if(!Q)return null;var Me=P.getAdaptationsForPeriod(Q),be=ce(ae.index,se,ae);return be?_e(Me[P.getIndexForAdaptation(be,V[0].mpd.manifest,ae.index)]):null},getAllMediaInfoForType:ie,getAdaptationForType:ce,getRealAdaptation:function(ae,se){var Q,Me,be=ze(ae,V);return Q=se?se.id:null,V.length>0&&be&&(Me=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,be.index):P.getAdaptationForIndex(se?se.index:null,V[0].mpd.manifest,be.index)),Me},getProducerReferenceTimes:function(ae,se){var Q,Me,be=ze(ae,V);return Q=se?se.id:null,V.length>0&&be&&(Me=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,be.index):P.getAdaptationForIndex(se?se.index:null,V[0].mpd.manifest,be.index)),Me?P.getProducerReferenceTimesForAdaptation(Me):[]},getRealPeriodByIndex:function(ae){return P.getRealPeriodForIndex(ae,V[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(ae){try{return P.getEssentialPropertiesForRepresentation(ae)}catch(se){return[]}},getVoRepresentations:function(ae){var se=Be(ae);return P.getRepresentationsForAdaptation(se)},getEventsFor:function(ae,se,Q){var Me=[];if(V.length>0){var be=V[0].mpd.manifest;if(ae instanceof Dr){var ke=ze(ae,V);Me=P.getEventsForPeriod(ke)}else if(ae instanceof Pc){var Re=ze(Q,V);Me=P.getEventStreamForAdaptationSet(be,Be(ae),Re)}else if(ae instanceof Fl){var pe=ze(Q,V);Me=P.getEventStreamForRepresentation(be,se,pe)}}return Me},getEvent:function(ae,se,Q,Me){try{if(!ae||!se||isNaN(Q)||!Me)return null;var be=ae.scheme_id_uri,ke=ae.value;if(!se[be+"/"+ke])return null;var Re,pe=new to,Ne=ae.timescale||1,Ye=Me.adaptation.period.start,dt=se[be+"/"+ke],at=isNaN(Me.presentationTimeOffset)?isNaN(dt.presentationTimeOffset)?0:dt.presentationTimeOffset:Me.presentationTimeOffset,Je=ae.presentation_time_delta/Ne;Re=ae.version===0?Ye+Q-at+Je:Ye-at+Je;var ht=ae.event_duration/Ne,Bt=ae.id,Gt=ae.message_data;return pe.eventStream=dt,pe.eventStream.value=ke,pe.eventStream.timescale=Ne,pe.duration=ht,pe.id=Bt,pe.calculatedPresentationTime=Re,pe.messageData=Gt,pe.presentationTimeDelta=Je,pe}catch(kt){return null}},getMpd:ge,setConfig:function(ae){ae&&(ae.constants&&(J=ae.constants),ae.cea608parser&&(H=ae.cea608parser),ae.errHandler&&P.setConfig({errHandler:ae.errHandler}),ae.BASE64&&P.setConfig({BASE64:ae.BASE64}))},updatePeriods:function(ae){if(!ae)return null;je(),V=me(ae)},getIsTextTrack:function(ae){return P.getIsText(ae)},getUTCTimingSources:function(){var ae=De();return P.getUTCTimingSources(ae)},getSuggestedPresentationDelay:function(){var ae=V.length>0?V[0].mpd:null;return P.getSuggestedPresentationDelay(ae)},getAvailabilityStartTime:function(ae){var se=ge(ae);return P.getAvailabilityStartTime(se)},getIsTypeOf:function(ae,se){return P.getIsTypeOf(ae,se)},getIsDynamic:function(ae){var se=De(ae);return P.getIsDynamic(se)},getDuration:function(ae){var se=De(ae);return P.getDuration(se)},getRegularPeriods:me,getContentSteering:function(ae){return P.getContentSteering(ae)},getLocation:function(ae){return P.getLocation(ae)},getPatchLocation:function(ae){var se=P.getPatchLocation(ae),Q=P.getPublishTime(ae);return se&&se.length!==0&&Q?se.filter(function(Me){return isNaN(Me.ttl)||Q.getTime()+Me.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(ae){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return P.getManifestUpdatePeriod(ae,se)},getPublishTime:function(ae){return P.getPublishTime(ae)},getIsDVB:function(ae){return P.hasProfile(ae,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(ae){return B.getIsPatch(ae)},getBaseURLsFromElement:function(ae){return P.getBaseURLsFromElement(ae)},getRepresentationSortFunction:function(){return P.getRepresentationSortFunction()},getCodec:function(ae,se,Q){return P.getCodec(ae,se,Q)},getPeriodById:function(ae){if(!ae||V.length===0)return null;var se=V.filter(function(Q){return Q.id===ae});return se&&se.length>0?se[0]:null},setCurrentMediaInfo:function(ae,se,Q){ee[ae]=ee[ae]||{},ee[ae][se]=ee[ae][se]||{},ee[ae][se]=Q},isPatchValid:function(ae,se){var Q=P.getId(ae),Me=B.getMpdId(se),be=P.getPublishTime(ae),ke=B.getPublishTime(se),Re=B.getOriginalPublishTime(se);return!!(Q&&Me&&Q==Me&&be&&Re&&be.getTime()==Re.getTime()&&ke&&be.getTime()<ke.getTime())},applyPatchToManifest:function(ae,se){B.getPatchOperations(se).forEach(function(Q){var Me=Q.getMpdTarget(ae);if(Me!==null){var be=Me.name,ke=Me.target,Re=Me.leaf;if(Q.xpath.findsAttribute()||be==="__text")switch(Q.action){case"add":case"replace":ke[be]=Q.value;break;case"remove":delete ke[be]}else{var pe=(ke[be+"_asArray"]||[]).indexOf(Re),Ne=Q.position==="prepend"||Q.position==="before";if((Q.action==="remove"||Q.action==="replace")&&(delete ke[be],pe!=-1)){var Ye=ke[be+"_asArray"];Ye.splice(pe,1),Ye.length>1?ke[be]=Ye:Ye.length==1?ke[be]=Ye[0]:delete ke[be+"_asArray"]}Q.action!=="add"&&Q.action!=="replace"||Object.keys(Q.value).forEach(function(dt){var at=Q.value[dt],Je=ke[dt+"_asArray"]||[];if(Je.length===0&&ke[dt]&&Je.push(ke[dt]),Je.length===0)Je=at;else{var ht=Je.length;ht=dt==be&&pe!=-1?pe+(Ne?0:1)+(Q.action=="replace"?-1:0):Ne?0:Je.length,Je.splice.apply(Je,[ht,0].concat(at))}ke[dt+"_asArray"]=Je,ke[dt]=Je.length==1?Je[0]:Je})}}})},areMediaInfosEqual:Se,reset:qe},P=Vn(re).getInstance(),B=Xh(re).getInstance(),qe(),L}Xu.__dashjs_factory_name="DashAdapter";var Om=U.Z.getSingletonFactory(Xu);function zf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Ul=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L)}var P,B;return P=L,B=[{key:"round10",value:function(V,ee){return function(J,H,re){return re===void 0||+re==0?Math[J](H):(re=+re,(H=+H)===null||isNaN(H)||typeof re!="number"||re%1!=0?NaN:(H=H.toString().split("e"),+((H=(H=Math[J](+(H[0]+"e"+(H[1]?+H[1]-re:-re)))).toString().split("e"))[0]+"e"+(H[1]?+H[1]+re:re))))}("round",V,ee)}}],B&&zf(P,B),L}(),FE=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Lm=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.mt=null,this.to=null,this.lto=null},km=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.level=null},Yf=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.target=null,this.state=D.Z.BUFFER_EMPTY},Qh=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.range=null,this.manifestInfo=null},Bl=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.droppedFrames=null};function Oc(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var UE=function L(){Oc(this,L),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},Wf=function L(){Oc(this,L),this.id=null,this.index=null,this.start=null,this.duration=null},BE=function L(){Oc(this,L),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},Wr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},Ri=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.loadingRequests=[],this.executedRequests=[]};function yu(L){var P,B,V=(L=L||{}).settings,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){J.trigger(T.Z.METRICS_CHANGED)}function re(ge){J.trigger(T.Z.METRIC_CHANGED,{mediaType:ge}),H()}function ce(ge,qe,De){J.trigger(T.Z.METRIC_UPDATED,{mediaType:ge,metric:qe,value:De}),re(ge)}function Se(ge,qe,De){J.trigger(T.Z.METRIC_ADDED,{mediaType:ge,metric:qe,value:De}),re(ge)}function Ee(ge,qe){var De=null;return ge&&(B.hasOwnProperty(ge)?De=B[ge]:qe||(De=new FE,B[ge]=De)),De}function ie(ge,qe,De){var Be=Ee(ge);Be!==null&&(Be[qe].push(De),Be[qe].length>V.get().streaming.metrics.maxListDepth&&Be[qe].shift())}function me(ge,qe,De){ie(ge,qe,De),Se(ge,qe,De)}return P={clearCurrentMetricsForType:function(ge){delete B[ge],re(ge)},clearAllCurrentMetrics:function(){B={},H()},getMetricsFor:Ee,addHttpRequest:function ge(qe,De,Be,ze,_e,Le,we,je,Z,ue,ae,se,Q,Me,be,ke,Re){var pe=new it.w;Le!=null&&Le!==ze&&(ge(qe,null,Be,ze,_e,null,null,je,Z,null,null,null,Q,null,null,ke,Re),pe.actualurl=Le),pe.tcpid=De,pe.type=Be,pe.url=ze,pe.range=je,pe.trequest=Z,pe.tresponse=ue,pe.responsecode=se,pe.cmsd=Re,pe._tfinish=ae,pe._stream=qe,pe._mediaduration=Q,pe._quality=_e,pe._responseHeaders=Me,pe._serviceLocation=we,pe._fileLoaderType=ke,be?be.forEach(function(Ne){(function(Ye,dt,at,Je){var ht=new it.O;ht.s=dt,ht.d=at,ht.b=Je,Ye.trace.push(ht),Ye.interval||(Ye.interval=0),Ye.interval+=at})(pe,Ne.s,Ne.d,Ne.b)}):(delete pe.interval,delete pe.trace),me(qe,D.Z.HTTP_REQUEST,pe)},addRepresentationSwitch:function(ge,qe,De,Be,ze){var _e=new Lm;_e.t=qe,_e.mt=De,_e.to=Be,ze?_e.lto=ze:delete _e.lto,me(ge,D.Z.TRACK_SWITCH,_e)},addBufferLevel:function(ge,qe,De){var Be=new km;Be.t=qe,Be.level=De,me(ge,D.Z.BUFFER_LEVEL,Be)},addBufferState:function(ge,qe,De){var Be=new Yf;Be.target=De,Be.state=qe,me(ge,D.Z.BUFFER_STATE,Be)},addDVRInfo:function(ge,qe,De,Be){var ze=new Qh;ze.time=qe,ze.range=Be,ze.manifestInfo=De,me(ge,D.Z.DVR_INFO,ze)},addDroppedFrames:function(ge,qe){var De=new Bl,Be=Ee(ge).DroppedFrames;qe&&(De.time=qe.creationTime,De.droppedFrames=qe.droppedVideoFrames,Be.length>0&&Be[Be.length-1]==De||me(ge,D.Z.DROPPED_FRAMES,De))},addSchedulingInfo:function(ge,qe,De,Be,ze,_e,Le,we,je){var Z=new Wr;Z.mediaType=ge,Z.t=qe,Z.type=De,Z.startTime=Be,Z.availabilityStartTime=ze,Z.duration=_e,Z.quality=Le,Z.range=we,Z.state=je,me(ge,D.Z.SCHEDULING_INFO,Z)},addRequestsQueue:function(ge,qe,De){var Be=new Ri;Be.loadingRequests=qe,Be.executedRequests=De,Ee(ge).RequestsQueue=Be,Se(ge,D.Z.REQUESTS_QUEUE,Be)},addManifestUpdate:function(ge,qe,De,Be,ze,_e,Le,we,je,Z){var ue=new UE;ue.mediaType=ge,ue.type=qe,ue.requestTime=De,ue.fetchTime=Be,ue.availabilityStartTime=ze,ue.presentationStartTime=_e,ue.clientTimeOffset=Le,ue.currentTime=we,ue.buffered=je,ue.latency=Z,ie(y.Z.STREAM,D.Z.MANIFEST_UPDATE,ue),Se(ge,D.Z.MANIFEST_UPDATE,ue)},updateManifestUpdateInfo:function(ge,qe){if(ge){for(var De in qe)ge[De]=qe[De];ce(ge.mediaType,D.Z.MANIFEST_UPDATE,ge)}},addManifestUpdateStreamInfo:function(ge,qe,De,Be,ze){if(ge){var _e=new Wf;_e.id=qe,_e.index=De,_e.start=Be,_e.duration=ze,ge.streamInfo.push(_e),ce(ge.mediaType,D.Z.MANIFEST_UPDATE_STREAM_INFO,ge)}},addManifestUpdateRepresentationInfo:function(ge,qe,De,Be,ze,_e,Le,we){if(ge&&ge.representationInfo){var je=new BE;je.id=qe,je.index=De,je.streamIndex=Be,je.mediaType=ze,je.startNumber=Le,je.fragmentInfoType=we,je.presentationTimeOffset=_e,ge.representationInfo.push(je),ce(ge.mediaType,D.Z.MANIFEST_UPDATE_TRACK_INFO,ge)}},addPlayList:function(ge){ge.trace&&Array.isArray(ge.trace)?ge.trace.forEach(function(qe){qe.hasOwnProperty("subreplevel")&&!qe.subreplevel&&delete qe.subreplevel}):delete ge.trace,me(y.Z.STREAM,D.Z.PLAY_LIST,ge)},addDVBErrors:function(ge){me(y.Z.STREAM,D.Z.DVB_ERRORS,ge)}},B={},P}yu.__dashjs_factory_name="MetricsModel";var Ra=U.Z.getSingletonFactory(yu);function ca(L){L=L||{};var P,B,V,ee,J=this.context,H=L.metricsModel;function re(Ee){var ie=H.getMetricsFor(Ee,!0);if(!ie)return null;var me,ge=ie.HttpList,qe=null;if(!ge||ge.length<=0)return null;for(me=ge.length-1;me>=0;){if(ge[me].responsecode){qe=ge[me];break}me--}return qe}function ce(Ee){var ie=H.getMetricsFor(Ee,!0);return ie&&ie.HttpList?ie.HttpList:[]}function Se(Ee,ie){if(!Ee)return null;var me=Ee[ie];return me&&me.length!==0?me[me.length-1]:null}return P={getCurrentRepresentationSwitch:function(Ee){return Se(H.getMetricsFor(Ee,!0),D.Z.TRACK_SWITCH)},getCurrentBufferState:function(Ee){return Se(H.getMetricsFor(Ee,!0),D.Z.BUFFER_STATE)},getCurrentBufferLevel:function(Ee){var ie=Se(H.getMetricsFor(Ee,!0),D.Z.BUFFER_LEVEL);return ie?Ul.round10(ie.level/1e3,-3):0},getCurrentHttpRequest:re,getHttpRequests:ce,getCurrentDroppedFrames:function(){return Se(H.getMetricsFor(y.Z.VIDEO,!0),D.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(Ee){return Se(H.getMetricsFor(Ee,!0),D.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(Ee){return Se(Ee?H.getMetricsFor(Ee,!0):H.getMetricsFor(y.Z.VIDEO,!0)||H.getMetricsFor(y.Z.AUDIO,!0),D.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return Se(H.getMetricsFor(y.Z.STREAM),D.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(Ee,ie){if(!ie)return null;var me={},ge=re(Ee);ge&&(me=rn.Z.parseHttpHeaders(ge._responseHeaders));var qe=me[ie.toLowerCase()];return qe===void 0?null:qe},getLatestMPDRequestHeaderValueByID:function(Ee){if(!Ee)return null;var ie,me,ge,qe={};for(ge=(ie=ce(y.Z.STREAM)).length-1;ge>=0;ge--)if((me=ie[ge]).type===it.w.MPD_TYPE){qe=rn.Z.parseHttpHeaders(me._responseHeaders);break}var De=qe[Ee.toLowerCase()];return De===void 0?null:De},addRepresentationSwitch:function(Ee,ie,me,ge,qe){H.addRepresentationSwitch(Ee,ie,me,ge,qe)},addDVRInfo:function(Ee,ie,me,ge){H.addDVRInfo(Ee,ie,me,ge)},updateManifestUpdateInfo:function(Ee){var ie=this.getCurrentManifestUpdate();H.updateManifestUpdateInfo(ie,Ee)},addManifestUpdateStreamInfo:function(Ee){if(Ee){var ie=this.getCurrentManifestUpdate();H.addManifestUpdateStreamInfo(ie,Ee.id,Ee.index,Ee.start,Ee.duration)}},addManifestUpdateRepresentationInfo:function(Ee,ie){if(Ee){var me=this.getCurrentManifestUpdate();H.addManifestUpdateRepresentationInfo(me,Ee.id,Ee.index,Ee.streamIndex,ie,Ee.presentationTimeOffset,Ee.startNumber,Ee.fragmentInfoType)}},addManifestUpdate:function(Ee){H.addManifestUpdate(y.Z.STREAM,Ee.type,Ee.requestStartDate,Ee.requestEndDate)},addHttpRequest:function(Ee,ie,me,ge,qe,De){H.addHttpRequest(Ee.mediaType,null,Ee.type,Ee.url,Ee.quality,ie,Ee.serviceLocation||null,Ee.range||null,Ee.requestStartDate,Ee.firstByteDate,Ee.requestEndDate,me,Ee.duration,ge,qe,Ee.fileLoaderType,De)},addSchedulingInfo:function(Ee,ie){H.addSchedulingInfo(Ee.mediaType,new Date,Ee.type,Ee.startTime,Ee.availabilityStartTime,Ee.duration,Ee.quality,Ee.range,ie)},addRequestsQueue:function(Ee,ie,me){H.addRequestsQueue(Ee,ie,me)},addBufferLevel:function(Ee,ie,me){H.addBufferLevel(Ee,ie,me)},addBufferState:function(Ee,ie,me){H.addBufferState(Ee,ie,me)},addDroppedFrames:function(Ee){H.addDroppedFrames(y.Z.VIDEO,Ee)},addPlayList:function(){ee&&(H.addPlayList(ee),ee=null)},addDVBErrors:function(Ee){H.addDVBErrors(Ee)},createPlaylistMetrics:function(Ee,ie){(ee=new rt).start=new Date,ee.mstart=Ee,ee.starttype=ie},createPlaylistTraceMetrics:function(Ee,ie,me){B===!0&&(B=!1,(V=new et).representationid=Ee,V.start=new Date,V.mstart=ie,V.playbackspeed=me!==null?me.toString():null)},updatePlayListTraceMetrics:function(Ee){if(V)for(var ie in V)V[ie]=Ee[ie]},pushPlayListTraceMetrics:function(Ee,ie){if(B===!1&&ee&&V&&V.start){var me=V.start,ge=Ee.getTime()-me.getTime();V.duration=ge,V.stopreason=ie,ee.trace.push(V),B=!0}},clearAllCurrentMetrics:function(){H.clearAllCurrentMetrics()}},H=H||Ra(J).getInstance({settings:L.settings}),B=!0,V=null,ee=null,P}ca.__dashjs_factory_name="DashMetrics";var js=U.Z.getSingletonFactory(ca);function _r(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,Ze.Z)(ee).getInstance();function re(ze){V=ze}function ce(ze,_e,Le,we){var je,Z=_e.adaptation.period.mpd,ue=Z.availabilityStartTime;if(we)je=Le&&Z.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(ue.getTime()+1e3*(ze+Z.timeShiftBufferDepth)):Z.availabilityEndTime;else if(Le){var ae=_e.availabilityTimeOffset;je=new Date(ue.getTime()+1e3*(ze-ae))}else je=ue;return je}function Se(ze,_e){return(ze.getTime()-_e.mpd.availabilityStartTime.getTime()+1e3*V)/1e3}function Ee(ze,_e){return ze+(_e.adaptation.period.start-_e.presentationTimeOffset)}function ie(ze){var _e={start:NaN,end:NaN},Le=ze[0].getAdapter().getRegularPeriods()[0],we=Se(new Date,Le);if(!ze||ze.length===0)return{range:_e,now:we};ze.forEach(function(Z){var ue=Z.getAdapter(),ae=ue.getMediaInfoForType(Z.getStreamInfo(),y.Z.VIDEO)||ue.getMediaInfoForType(Z.getStreamInfo(),y.Z.AUDIO),se=ue.getVoRepresentations(ae)[0],Q={start:NaN,end:NaN};if(se)if(se.segmentInfoType===v.Z.SEGMENT_TIMELINE)Q=function(be){var ke,Re,pe,Ne,Ye=be.adaptation.period.mpd.manifest.Period_asArray[be.adaptation.period.index].AdaptationSet_asArray[be.adaptation.index],dt=P.getRepresentationFor(be.index,Ye),at=dt.SegmentTemplate||dt.SegmentList,Je=at.SegmentTimeline,ht=at.timescale,Bt=Je.S_asArray,Gt={start:0,end:0},kt=Bt[0].t,Ft=!isNaN(kt),An=Ft?kt:0,nt=0;for(Ft&&(Gt.start=Ee(An/ht,be)),pe=0,Ne=Bt.length;pe<Ne;pe++)Re=0,(ke=Bt[pe]).hasOwnProperty("r")&&(Re=ke.r),nt+=ke.d*(1+Re);return Gt.end=Ee((An+nt)/ht,be),Gt}(se);else{var Me=se.adaptation.period;Q.start=Me.start,Q.end=Math.max(we,Me.start+Me.duration)}!isNaN(Q.start)&&(isNaN(_e.start)||_e.start>Q.start)&&(_e.start=Q.start),!isNaN(Q.end)&&(isNaN(_e.end)||_e.end<Q.end)&&(_e.end=Q.end)}),_e.end=Math.min(we,_e.end);var je=ge(ze,_e.end,!0);return _e.end=isNaN(je)?_e.end:je,_e.start=Le&&Le.mpd&&Le.mpd.timeShiftBufferDepth&&!isNaN(Le.mpd.timeShiftBufferDepth)&&!isNaN(_e.end)?Math.max(_e.end-Le.mpd.timeShiftBufferDepth,_e.start):_e.start,_e.start=ge(ze,_e.start),{range:_e,now:we}}function me(ze,_e){B=ze-_e.end}function ge(ze,_e){var Le=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var we=0,je=!1,Z=NaN;!je&&we<ze.length;){var ue=ze[we].getStreamInfo();ue.start<=_e&&(!isFinite(ue.duration)||ue.start+ue.duration>=_e)?(Z=_e,je=!0):!Le&&ue.start>_e&&(isNaN(Z)||ue.start<Z)?Z=ue.start:Le&&ue.start+ue.duration<_e&&(isNaN(Z)||ue.start+ue.duration>Z)&&(Z=ue.start+ue.duration),we+=1}return Z}catch(ae){return _e}}function qe(ze){ze.offset===void 0||isNaN(ze.offset)||re(ze.offset/1e3)}function De(){V=0,B=0}function Be(){J.off(T.Z.UPDATE_TIME_SYNC_OFFSET,qe,this),De()}return L={initialize:function(){De(),J.on(T.Z.UPDATE_TIME_SYNC_OFFSET,qe,this)},getClientTimeOffset:function(){return V},setClientTimeOffset:re,getClientReferenceTime:function(){return Date.now()-1e3*B+1e3*V},calcAvailabilityStartTimeFromPresentationTime:function(ze,_e,Le){return ce(ze,_e,Le)},calcAvailabilityEndTimeFromPresentationTime:function(ze,_e,Le){return ce(ze,_e,Le,!0)},calcPresentationTimeFromWallTime:Se,calcPresentationTimeFromMediaTime:Ee,calcPeriodRelativeTimeFromMpdRelativeTime:function(ze,_e){return _e-ze.adaptation.period.start},calcMediaTimeFromPresentationTime:function(ze,_e){return ze-_e.adaptation.period.start+_e.presentationTimeOffset},calcWallTimeForSegment:function(ze,_e){var Le,we,je;return _e&&(Le=ze.representation.adaptation.period.mpd.suggestedPresentationDelay,we=ze.presentationStartTime+Le,je=new Date(ze.availabilityStartTime.getTime()+1e3*we)),je},calcTimeShiftBufferWindow:function(ze,_e){if(!_e)return function(we){var je={start:NaN,end:NaN},Z=0,ue=NaN;return we.forEach(function(ae){var se=ae.getStreamInfo();Z+=se.duration,(isNaN(ue)||se.start<ue)&&(ue=se.start)}),je.start=ue,je.end=ue+Z,je}(ze);if(H.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var Le=ie(ze);return me(Le.now,Le.range),Le.range}return function(we){var je={start:NaN,end:NaN};if(!we||we.length===0)return je;var Z=we[0].getAdapter().getRegularPeriods()[0],ue=Se(new Date,Z),ae=Z.mpd.timeShiftBufferDepth,se=isNaN(ae)?0:ue-ae;if(je.start=ge(we,se),je.end=!isNaN(je.start)&&ue<je.start?ue:ge(we,ue,!0),!isNaN(ae)&&je.end<ue-ae&&(je.end=NaN),H.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var Q=ie(we);if(Q.range.end<je.start)return J.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Oi.LEVELS.WARNING,event:Oi.EVENTS.INVALID_DVR_WINDOW}),me(Q.now,Q.range),Q.range}return je}(ze)},reset:Be},P=Vn(ee).getInstance(),Be(),L}_r.__dashjs_factory_name="TimelineConverter";var Eu=U.Z.getSingletonFactory(_r),$f=w(4593),fa=w(6934);function Xf(L){return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Xf(L)}function Xa(L,P){return Xa=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Xa(L,P)}function Qf(L,P){return!P||Xf(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Qu(L){return Qu=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Qu(L)}var Zs=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Xa(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Qu(P);if(B){var re=Qu(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Qf(this,J)});function ee(){var J;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).captionData=null,J.label=null,J.defaultTrack=!1,J.kind=null,J.isFragmented=!1,J.isEmbedded=!1,J.isTTML=null,J}return ee}(Pc),No=w(2295);function Lc(){var L=0;function P(re){for(var ce="",Se=0;Se<re.length;++Se)ce+=re[Se].uchar;return ce.length-ce.replace(/^\s+/,"").length}function B(re){return"left: "+3.125*re.x+"%; top: "+6.66*re.y1+"%; width: "+(100-3.125*re.x)+"%; height: "+6.66*Math.max(re.y2-1-re.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function V(re){return re==="red"?"rgb(255, 0, 0)":re==="green"?"rgb(0, 255, 0)":re==="blue"?"rgb(0, 0, 255)":re==="cyan"?"rgb(0, 255, 255)":re==="magenta"?"rgb(255, 0, 255)":re==="yellow"?"rgb(255, 255, 0)":re==="white"?"rgb(255, 255, 255)":re==="black"?"rgb(0, 0, 0)":re}function ee(re,ce){var Se=re.videoHeight/15;return ce?"font-size: "+Se+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(ce.foreground?V(ce.foreground):"rgb(255, 255, 255)")+"; font-style: "+(ce.italics?"italic":"normal")+"; text-decoration: "+(ce.underline?"underline":"none")+"; white-space: pre; background-color: "+(ce.background?V(ce.background):"transparent")+";":"font-size: "+Se+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function J(re){return re.replace(/^\s+/g,"")}function H(re){return re.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(re,ce,Se,Ee){var ie,me,ge=null,qe=!1,De=-1,Be={start:ce,end:Se,spans:[]},ze="style_cea608_white_black",_e={},Le={},we=[];for(ie=0;ie<15;++ie){var je=Ee.rows[ie],Z="",ue=null;if(je.isEmpty()===!1){var ae=P(je.chars);ge===null&&(ge={x:ae,y1:ie,y2:ie+1,p:[]}),ae!==De&&qe&&(ge.p.push(Be),Be={start:ce,end:Se,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(we.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge={x:ae,y1:ie,y2:ie+1,p:[]});for(var se=0;se<je.chars.length;++se){var Q=je.chars[se],Me=Q.penState;if(ue===null||!Me.equals(ue)){Z.trim().length>0&&(Be.spans.push({name:ze,line:Z,row:ie}),Z="");var be="style_cea608_"+Me.foreground+"_"+Me.background;Me.underline&&(be+="_underline"),Me.italics&&(be+="_italics"),Le.hasOwnProperty(be)||(Le[be]=JSON.parse(JSON.stringify(Me))),ue=Me,ze=be}Z+=Q.uchar}Z.trim().length>0&&Be.spans.push({name:ze,line:Z,row:ie}),qe=!0,De=ae}else qe=!1,De=-1,ge&&(ge.p.push(Be),Be={start:ce,end:Se,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(we.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge=null)}ge&&(ge.p.push(Be),ge.y2=ie+1,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(we.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge=null);var ke=[];for(ie=0;ie<we.length;++ie){var Re=we[ie],pe="sub_cea608_"+L++,Ne=document.createElement("div");Ne.id=pe;var Ye=B(Re);Ne.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+Ye;var dt=document.createElement("div");dt.className="paragraph bodyStyle",dt.style.cssText=ee(re);var at=document.createElement("div");at.className="cueUniWrapper",at.style.cssText="unicode-bidi: normal; direction: ltr;";for(var Je=0;Je<Re.p.length;++Je){var ht=Re.p[Je],Bt=0;for(me=0;me<ht.spans.length;++me){var Gt=ht.spans[me];if(Gt.line.length>0){if(me!==0&&Bt!=Gt.row){var kt=document.createElement("br");kt.className="lineBreak",at.appendChild(kt)}var Ft=!1;Bt===Gt.row&&(Ft=!0),Bt=Gt.row;var An=Le[Gt.name],nt=document.createElement("span");nt.className="spanPadding "+Gt.name+" customSpanColor",nt.style.cssText=ee(re,An),me!==0&&Ft?me===ht.spans.length-1?nt.textContent=H(Gt.line):nt.textContent=Gt.line:ht.spans.length>1&&me<ht.spans.length-1&&Gt.row===ht.spans[me+1].row?nt.textContent=J(Gt.line):nt.textContent=Gt.line.trim(),at.appendChild(nt)}}}dt.appendChild(at),Ne.appendChild(dt);var vt={bodyStyle:["%",90]};for(var Wt in Le)Le.hasOwnProperty(Wt)&&(vt[Wt]=["%",90]);ke.push({type:"html",start:ce,end:Se,cueHTMLElement:Ne,cueID:pe,cellResolution:[32,15],isFromCEA608:!0,fontSize:vt,lineHeight:{},linePadding:{}})}return ke}}}Lc.__dashjs_factory_name="EmbeddedTextHtmlRender";var Jh=U.Z.getSingletonFactory(Lc);function Fm(L){var P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe,De,Be,ze,_e=L.errHandler,Le=L.manifestModel,we=L.mediaController,je=L.videoModel,Z=L.textTracks,ue=L.vttParser,ae=L.vttCustomRenderingParser,se=L.ttmlParser,Q=L.streamInfo,Me=L.settings,be=this.context,ke=(0,m.Z)(be).getInstance(),Re=!1;function pe(){H=null,ce=NaN,Se=[],Ee=null,re=!1,J=[],ee=null}function Ne(kt){var Ft=new Zs;for(var An in kt)Ft[An]=kt[An];Ft.labels=kt.labels,Ft.defaultTrack=function(nt){var vt=!1;return me.length>1&&nt.isEmbedded?vt=nt.id&&nt.id===y.Z.CC1:me.length===1?nt.id&&typeof nt.id=="string"&&nt.id.substring(0,2)==="CC"&&(vt=!0):me.length===0&&(vt=nt.index===J[0].index),vt}(kt),Ft.isFragmented=kt.isFragmented,Ft.isEmbedded=!!kt.isEmbedded,Ft.isTTML=function(nt){return nt.codec&&nt.codec.search(y.Z.STPP)>=0||nt.mimeType&&nt.mimeType.search(y.Z.TTML)>=0}(kt),Ft.kind=function(nt,vt){var Wt=nt.roles&&nt.roles.length>0?vt[nt.roles[0]]:vt.caption;return Wt=Wt===vt.caption||Wt===vt.subtitle?Wt:vt.caption}(kt,{subtitle:"subtitles",caption:"captions"}),Z.addTextTrack(Ft)}function Ye(kt){var Ft=kt.chunk;Ft.mediaInfo.embeddedCaptions&&at(Ft.bytes,Ft)}function dt(kt){ie=kt}function at(kt,Ft){var An=Ft.mediaInfo,nt=An.type,vt=An.mimeType,Wt=An.codec||vt;Wt?An.codec.indexOf("application/mp4")!==-1?function(Nt,en,Jt){var Yt;if(en.segmentType==="InitializationSegment")re=!0,ce=V.getMediaTimescaleFromMoov(Nt);else{if(!re)return;(Yt=V.getSamplesInfo(Nt).sampleList).length>0&&(Ee=Yt[0].cts-en.start*ce),Jt.search(y.Z.STPP)>=0?function(Dn,Nn,rr){var ir,It;for(ee=ee!==null?ee:Bt(rr),ir=0;ir<Nn.length;ir++){var $t=Nn[ir],Zt=$t.cts,un=ht(),vn=un+Zt/ce,Pn=vn+$t.duration/ce;P.buffered.add(vn,Pn);var xn=new DataView(Dn,$t.offset,$t.subSizes[0]),Fn=fa.Utils.dataViewToString(xn,y.Z.UTF8),Gn=[],bt=$t.offset+$t.subSizes[0];for(It=1;It<$t.subSizes.length;It++){var Sn=new Uint8Array(Dn,bt,$t.subSizes[It]),En=String.fromCharCode.apply(null,Sn);Gn.push(En),bt+=$t.subSizes[It]}try{var Ot=Le.getValue().ttmlTimeIsRelative?Zt/ce:0,On=ee.parse(Fn,Ot,Zt/ce,(Zt+$t.duration)/ce,Gn);Z.addCaptions(ie,un,On)}catch(st){H.removeExecutedRequestsBeforeTime(),this.remove(),B.error("TTML parser error: "+st.message)}}}(Nt,Yt,Jt):function(Dn,Nn){var rr,ir,It,$t=[];for(rr=0;rr<Nn.length;rr++){var Zt=Nn[rr];Zt.cts-=Ee;var un=ht()+Zt.cts/ce,vn=un+Zt.duration/ce;P.buffered.add(un,vn);var Pn=Dn.slice(Zt.offset,Zt.offset+Zt.size),xn=fa.parseBuffer(Pn);for(ir=0;ir<xn.boxes.length;ir++){var Fn=xn.boxes[ir];if(B.debug("VTT box1: "+Fn.type),Fn.type!=="vtte"&&Fn.type==="vttc"){B.debug("VTT vttc boxes.length = "+Fn.boxes.length);var Gn={styles:{}};for(It=0;It<Fn.boxes.length;It++){var bt=Fn.boxes[It];if(B.debug("VTT box2: "+bt.type),bt.type==="payl")Gn.start=Zt.cts/ce,Gn.end=(Zt.cts+Zt.duration)/ce,Gn.data=bt.cue_text;else if(bt.type==="sttg"&&bt.settings&&bt.settings!=="")try{var Sn=bt.settings.split(" ");Gn.styles=ue.getCaptionStyles(Sn)}catch(En){}}Gn&&Gn.data&&($t.push(Gn),B.debug("VTT  ".concat(Gn.start," - ").concat(Gn.end," :  ").concat(Gn.data)))}}}$t.length>0&&Z.addCaptions(ie,0,$t)}(Nt,Yt)}}(kt,Ft,Wt):nt===y.Z.VIDEO?function(Nt,en){var Jt,Yt;if(en.segmentType===it.w.INIT_SEGMENT_TYPE)ge===0&&(ge=V.getMediaTimescaleFromMoov(Nt));else if(en.segmentType===it.w.MEDIA_SEGMENT_TYPE){if(ge===0)return void B.warn("CEA-608: No timescale for embeddedTextTrack yet");var Dn=(Yt=V.getSamplesInfo(Nt)).lastSequenceNumber,Nn=Math.trunc(en.start),rr=Math.trunc(en.end);if(Be[0]||Be[1]||function(){for(var un,vn=0;vn<me.length;vn++){if((un=Z.getTrackIdxForId(me[vn].id))===-1)return void B.warn("CEA-608: data before track is ready.");var Pn=Je(un);Be[vn]=new(C()).Cea608Parser(vn+1,{newCue:Pn},null)}}(),ge){if(function(un,vn,Pn,xn,Fn){return un!==null&&vn!==null&&xn!==null&&Fn!==null&&(vn===un?xn!==Fn:vn!==un+Pn)}(qe,Dn,Yt.numSequences,De,Nn))for(Jt=0;Jt<Be.length;Jt++)Be[Jt]&&Be[Jt].reset();for(var ir=function(un,vn){if(vn.length===0)return null;for(var Pn={splits:[],fields:[[],[]]},xn=new DataView(un),Fn=0;Fn<vn.length;Fn++)for(var Gn=vn[Fn],bt=C().findCea608Nalus(xn,Gn.offset,Gn.size),Sn=null,En=0,Ot=0;Ot<bt.length;Ot++)for(var On=C().extractCea608DataFromRange(xn,bt[Ot]),st=0;st<2;st++)if(On[st].length>0){Gn.cts!==Sn?En=0:En+=1;var tt=ht();Pn.fields[st].push([Gn.cts+tt*ge,On[st],En]),Sn=Gn.cts}return Pn.fields.forEach(function(qt){qt.sort(function(Ve,Ke){return Ve[0]===Ke[0]?Ve[2]-Ke[2]:Ve[0]-Ke[0]})}),Pn}(Nt,Yt.sampleList),It=0;It<Be.length;It++){var $t=ir.fields[It],Zt=Be[It];if(Zt)for(Jt=0;Jt<$t.length;Jt++)Zt.addData($t[Jt][0]/ge,$t[Jt][1])}qe=Dn,De=rr}}}(kt,Ft):function(Nt,en,Jt){var Yt,Dn,Nn=new DataView(Nt,0,Nt.byteLength);Dn=fa.Utils.dataViewToString(Nn,y.Z.UTF8);try{Yt=Bt(Jt).parse(Dn,0),Z.addCaptions(Z.getCurrentTrackIdx(),0,Yt),P.buffered&&P.buffered.add(en.start,en.end)}catch(rr){_e.error(new fe.Z(Ae.TIMED_TEXT_ERROR_ID_PARSE_CODE,Ae.TIMED_TEXT_ERROR_MESSAGE_PARSE+rr.message,Dn))}}(kt,Ft,Wt):B.error("No text type defined")}function Je(kt){return function(Ft,An,nt){var vt;(vt=je.getTTMLRenderingDiv()?ze.createHTMLCaptionsFromScreen(je.getElement(),Ft,An,nt):[{start:Ft,end:An,data:nt.getDisplayText(),styles:{}}])&&Z.addCaptions(kt,0,vt)}}function ht(){return isNaN(P.timestampOffset)?0:P.timestampOffset}function Bt(kt){var Ft;return kt.search(y.Z.VTT)>=0?Ft=Me.get().streaming.text.webvtt.customRenderingEnabled&&ae?ae:ue:(kt.search(y.Z.TTML)>=0||kt.search(y.Z.STPP)>=0)&&(Ft=se),Ft}function Gt(kt){me.forEach(function(Ft){var An=Z.getTrackIdxForId(Ft.id);An>=0&&Z.deleteCuesFromTrackIdx(An,kt.from,kt.to)})}return P={initialize:function(){Re||(me=[],ie=null,ge=0,Be=[],qe=null,De=null,Re=!0,ze=Jh(be).getInstance(),ke.on(T.Z.VIDEO_CHUNK_RECEIVED,Ye,P),ke.on(T.Z.BUFFER_CLEARED,Gt,P))},addMediaInfos:function(kt,Ft,An){if(J=J.concat(Ft),kt===y.Z.TEXT&&Ft[0].isFragmented&&!Ft[0].isEmbedded){H=An,P.buffered=(0,No.Z)(be).create(),Se=we.getTracksFor(y.Z.TEXT,Q.id).filter(function(Nt){return Nt.isFragmented});for(var nt=we.getCurrentTrackFor(y.Z.TEXT,Q.id),vt=0;vt<Se.length;vt++)if(Se[vt]===nt){dt(vt);break}}for(var Wt=0;Wt<Ft.length;Wt++)Ne(Ft[Wt])},resetMediaInfos:function(){J=[]},getStreamId:function(){return Q.id},append:at,abort:function(){},addEmbeddedTrack:function(kt){if(Re&&kt)if(kt.id===y.Z.CC1||kt.id===y.Z.CC3){for(var Ft=0;Ft<me.length;Ft++)if(me[Ft].id===kt.id)return;me.push(kt)}else B.warn("Embedded track "+kt.id+" not supported!")},resetEmbedded:function(){ke.off(T.Z.VIDEO_CHUNK_RECEIVED,Ye,P),ke.off(T.Z.BUFFER_CLEARED,Gt,P),Z&&Z.deleteAllTextTracks(),Re=!1,me=[],Be=[null,null],qe=null,De=null},getConfig:function(){return{fragmentModel:H,fragmentedTracks:Se,videoModel:je}},setCurrentFragmentedTrackIdx:dt,remove:function(kt,Ft){kt===void 0&&kt===Ft&&(kt=P.buffered.start(0),Ft=P.buffered.end(P.buffered.length-1)),P.buffered.remove(kt,Ft),Z.deleteCuesFromTrackIdx(ie,kt,Ft)},reset:function(){pe(),J=[],V=null}},B=(0,x.Z)(be).getInstance().getLogger(P),V=(0,sa.Z)(be).getInstance(),pe(),P}Fm.__dashjs_factory_name="TextSourceBuffer";var ep=U.Z.getClassFactory(Fm),kc=w(4403);function Fc(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}var jE=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function Um(L){var P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je=this.context,Z=(0,m.Z)(je).getInstance(),ue=L.videoModel,ae=L.streamInfo,se=L.settings;function Q(It,$t,Zt,un,vn,Pn){var xn=0,Fn=0;It/$t>Zt/un?xn=(Fn=$t)/un*Zt:Fn=(xn=It)/Zt*un;var Gn,bt,Sn=0,En=0;return xn/Fn>vn?(En=Fn,Sn=Fn*vn):(Sn=xn,En=xn/vn),Gn=(It-Sn)/2,bt=($t-En)/2,Pn?{x:Gn+.1*Sn,y:bt+.1*En,w:.8*Sn,h:.8*En}:{x:Gn,y:bt,w:Sn,h:En}}function Me(It,$t){var Zt=ue.getClientWidth(),un=ue.getClientHeight(),vn=ue.getVideoWidth(),Pn=ue.getVideoHeight(),xn=ue.getVideoRelativeOffsetTop(),Fn=ue.getVideoRelativeOffsetLeft();if(vn!==0&&Pn!==0){var Gn=vn/Pn,bt=!1;It.isFromCEA608&&(Gn=1.1666666666666667,bt=!0);var Sn=Q.call(this,Zt,un,vn,Pn,Gn,bt),En=Sn.w,Ot=Sn.h,On=Sn.x,st=Sn.y;if(En!=Se||Ot!=Ee||On!=re||st!=ce||$t){if(re=On+Fn,ce=st+xn,Se=En,Ee=Ot,ie){var tt=ie.style;tt&&(tt.left=re+"px",tt.top=ce+"px",tt.width=Se+"px",tt.height=Ee+"px",tt.zIndex=qe&&document[qe]||De?ze:null,Z.trigger(_.Z.CAPTION_CONTAINER_RESIZE))}var qt=It.activeCues;if(qt)for(var Ve=qt.length,Ke=0;Ke<Ve;++Ke){var Mt=qt[Ke];Mt.scaleCue(Mt)}}}}function be(It){var $t,Zt,un,vn,Pn,xn=Se,Fn=Ee;if(It.cellResolution){var Gn=[xn/It.cellResolution[0],Fn/It.cellResolution[1]];if(It.linePadding){for($t in It.linePadding)if(It.linePadding.hasOwnProperty($t)){Zt=(It.linePadding[$t]*Gn[0]).toString();for(var bt=document.getElementsByClassName("spanPadding"),Sn=0;Sn<bt.length;Sn++)bt[Sn].style.cssText=bt[Sn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt),bt[Sn].style.cssText=bt[Sn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}if(It.fontSize){for($t in It.fontSize)if(It.fontSize.hasOwnProperty($t)){It.fontSize[$t][0]==="%"?un=It.fontSize[$t][1]/100:It.fontSize[$t][0]==="c"&&(un=It.fontSize[$t][1]),Zt=(un*Gn[1]).toString(),Pn=$t!=="defaultFontSize"?document.getElementsByClassName($t):document.getElementsByClassName("paragraph");for(var En=0;En<Pn.length;En++)Pn[En].style.cssText=Pn[En].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}if(It.lineHeight){for($t in It.lineHeight)if(It.lineHeight.hasOwnProperty($t)){It.lineHeight[$t][0]==="%"?vn=It.lineHeight[$t][1]/100:It.fontSize[$t][0]==="c"&&(vn=It.lineHeight[$t][1]),Zt=(vn*Gn[1]).toString(),Pn=document.getElementsByClassName($t);for(var Ot=0;Ot<Pn.length;Ot++)Pn[Ot].style.cssText=Pn[Ot].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}}}if(It.isd){var On=document.getElementById(It.cueID);On&&ie.removeChild(On),Re(It)}}function ke(It,$t){var Zt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,un=/^#(.*)$/;if(Zt.test($t)){var vn=Zt.exec($t),Pn=parseInt(vn[4],10)-1;return"data:image/png;base64,"+btoa(It.images[Pn])}if(un.test($t)){var xn=un.exec($t)[1];return"data:image/png;base64,"+It.embeddedImages[xn]}return $t}function Re(It){if(ie){ir.call(this);var $t=document.createElement("div");ie.appendChild($t),Be=(0,kc.renderHTML)(It.isd,$t,function(Zt){return ke(It,Zt)},ie.clientHeight,ie.clientWidth,se.get().streaming.text.imsc.displayForcedOnlyMode,function(Zt){B.info("renderCaption :",Zt)},Be,se.get().streaming.text.imsc.enableRollUp),$t.id=It.cueID,Z.trigger(_.Z.CAPTION_RENDERED,{captionDiv:$t,currentTrackIdx:H})}}function pe(It,$t){return!!$t&&$t.endTime>=It.startTime}function Ne(It,$t){return!!se.get().streaming.text.extendSegmentedCues&&!!function(Zt,un,vn){for(var Pn=0;Pn<vn.length;Pn++){var xn=vn[Pn];if(JSON.stringify(Zt[xn])!==JSON.stringify(un[xn]))return!1}return!0}($t,It,jE)&&($t.endTime=Math.max($t.endTime,It.endTime),!0)}function Ye(It,$t){$t&&$t.forEach(function(Zt){Zt.kind&&Zt.kind==="image"&&(Zt.src=ke(It,Zt.src)),Ye(It,Zt.contents)})}function dt(It,$t,Zt){var un=vt(It),vn=se.get().streaming.text.dispatchForManualRendering;if(un&&Array.isArray(Zt)&&Zt.length!==0)for(var Pn=0;Pn<Zt.length;Pn++){var xn=null,Fn=Zt[Pn];un.cellResolution=Fn.cellResolution,un.isFromCEA608=Fn.isFromCEA608,isNaN(Fn.start)||isNaN(Fn.end)||(vn?xn=at(Fn,$t):kt(Fn)&&ie?xn=Bt(Fn,$t,un):Fn.data&&(xn=Gt(Fn,$t,un)));try{if(xn){if(!en(un,xn))if(se.get().streaming.text.webvtt.customRenderingEnabled)un.manualCueList||(un.manualCueList=[]),un.manualCueList.push(xn);else{var Gn=void 0;un.cues&&un.cues.length!==0&&(Gn=un.cues[un.cues.length-1]),pe(xn,Gn)?Ne(xn,Gn)||(Gn.isd&&(Gn.onexit=function(){}),un.mode!==y.Z.TEXT_DISABLED&&un.addCue(xn)):un.mode!==y.Z.TEXT_DISABLED&&un.addCue(xn)}var bt=se.get().streaming.buffer.bufferToKeep;Yt(un,0,ue.getTime()-bt)}else B.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Sn){throw Dn(un),un.addCue(xn),Sn}}}function at(It,$t){var Zt=Ft(It,$t);return Zt.onenter=function(){kt(It)&&we&&we.cueID!==Zt.cueID&&ht(we),delete Zt.type,we=Zt,Je(Zt)},Zt.onexit=function(){ht(Zt),we=null},Zt}function Je(It){Z.trigger(_.Z.CUE_ENTER,It)}function ht(It){Z.trigger(_.Z.CUE_EXIT,{cueID:It.cueID})}function Bt(It,$t,Zt){var un=this,vn=Ft(It,$t);return ie.style.left=re+"px",ie.style.top=ce+"px",ie.style.width=Se+"px",ie.style.height=Ee+"px",vn.onenter=function(){var Pn=this;Zt.mode===y.Z.TEXT_SHOWING&&(this.isd?(Le?requestAnimationFrame(function(){return Re(Pn)}):Re(this),B.debug("Cue enter id:"+this.cueID)):(ie.appendChild(this.cueHTMLElement),be.call(un,this),Z.trigger(_.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:H})))},vn.onexit=function(){if(ie)for(var Pn=ie.childNodes,xn=0;xn<Pn.length;++xn)Pn[xn].id===this.cueID&&(B.debug("Cue exit id:"+Pn[xn].id),ie.removeChild(Pn[xn]),--xn)},vn}function Gt(It,$t,Zt){var un=Ft(It,$t);if(un.isActive=!1,It.styles)try{It.styles.align!==void 0&&"align"in un&&(un.align=It.styles.align),It.styles.line!==void 0&&"line"in un&&(un.line=It.styles.line),It.styles.snapToLines!==void 0&&"snapToLines"in un&&(un.snapToLines=It.styles.snapToLines),It.styles.position!==void 0&&"position"in un&&(un.position=It.styles.position),It.styles.size!==void 0&&"size"in un&&(un.size=It.styles.size)}catch(vn){B.error(vn)}return un.onenter=function(){Zt.mode===y.Z.TEXT_SHOWING&&Z.trigger(_.Z.CAPTION_RENDERED,{currentTrackIdx:H})},un}function kt(It){return It.type==="html"}function Ft(It,$t){return kt(It)?function(Zt,un){var vn=new V(Zt.start+un,Zt.end+un,"");return vn.cueHTMLElement=Zt.cueHTMLElement,vn.isd=Zt.isd,vn.images=Zt.images,vn.embeddedImages=Zt.embeddedImages,vn.cueID=Zt.cueID,vn.scaleCue=be.bind(self),vn.cellResolution=Zt.cellResolution,vn.lineHeight=Zt.lineHeight,vn.linePadding=Zt.linePadding,vn.fontSize=Zt.fontSize,vn.isd&&Ye(vn,vn.isd.contents),vn}(It,$t):function(Zt,un){var vn=new V(Zt.start-un,Zt.end-un,Zt.data);return vn.cueID="".concat(vn.startTime,"_").concat(vn.endTime),vn}(It,$t)}function An(It){if(me)for(var $t=me.childNodes,Zt=0;Zt<$t.length;++Zt)$t[Zt].id===It.cueID&&(me.removeChild($t[Zt]),--Zt)}function nt(){var It,$t=[],Zt=function(vn,Pn){var xn;if(typeof Symbol>"u"||vn[Symbol.iterator]==null){if(Array.isArray(vn)||(xn=function(Ot,On){if(Ot){if(typeof Ot=="string")return Fc(Ot,On);var st=Object.prototype.toString.call(Ot).slice(8,-1);return st==="Object"&&Ot.constructor&&(st=Ot.constructor.name),st==="Map"||st==="Set"?Array.from(Ot):st==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(st)?Fc(Ot,On):void 0}}(vn))||Pn){xn&&(vn=xn);var Fn=0,Gn=function(){};return{s:Gn,n:function(){return Fn>=vn.length?{done:!0}:{done:!1,value:vn[Fn++]}},e:function(Ot){throw Ot},f:Gn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var bt,Sn=!0,En=!1;return{s:function(){xn=vn[Symbol.iterator]()},n:function(){var Ot=xn.next();return Sn=Ot.done,Ot},e:function(Ot){En=!0,bt=Ot},f:function(){try{Sn||xn.return==null||xn.return()}finally{if(En)throw bt}}}}(ue.getTextTracks());try{for(Zt.s();!(It=Zt.n()).done;){var un=It.value;un.manualMode===y.Z.TEXT_SHOWING&&$t.push(un)}}catch(vn){Zt.e(vn)}finally{Zt.f()}return $t}function vt(It){return It>=0&&ee[It]?ue.getTextTrack(ee[It].kind,ee[It].id,ee[It].lang,ee[It].isTTML,ee[It].isEmbedded):null}function Wt(It){var $t=this;if(It!==H){var Zt=vt(H=It);Nt.call(this,Zt),ge&&(clearInterval(ge),ge=null),Zt&&Zt.renderingType==="html"&&(Me.call(this,Zt,!0),window.ResizeObserver?(_e=new window.ResizeObserver(function(){Me.call($t,Zt,!0)})).observe(ue.getElement()):ge=setInterval(Me.bind(this,Zt),500))}}function Nt(It){ir.call(this),It&&It.renderingType==="html"?Nn.call(this):rr.call(this)}function en(It,$t){if(!It.cues)return!1;for(var Zt=0;Zt<It.cues.length;Zt++)if(It.cues[Zt].startTime===$t.startTime&&It.cues[Zt].endTime===$t.endTime)return!0;return!1}function Jt(It,$t,Zt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!It&&(isNaN($t)||(un?It.startTime:It.endTime)>=$t)&&(isNaN(Zt)||(un?It.endTime:It.startTime)<=Zt)}function Yt(It,$t,Zt){var un,vn;if(!(Zt<$t)&&It&&(It.cues||It.manualCueList)){var Pn=It.cues&&It.cues.length>0?"native":"custom",xn=Pn==="native"?It.cues:It.manualCueList;if(!xn||xn.length===0)return;for(var Fn=xn.length-1;Fn>=0;Fn--)!Jt(xn[Fn],$t,Zt,!0)||(un=xn[Fn],vn=ue.getTime(),un.startTime>=vn&&un.endTime<=vn)||(Pn==="native"?It.removeCue(xn[Fn]):(An(xn[Fn]),delete It.manualCueList[Fn]))}}function Dn(It,$t,Zt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(It&&(It.cues||It.manualCueList)){var vn=It.cues&&It.cues.length>0?"native":"custom",Pn=vn==="native"?It.cues:It.manualCueList;if(!Pn||Pn.length===0)return;for(var xn=Pn.length-1,Fn=xn;Fn>=0;Fn--)Jt(Pn[Fn],$t,Zt,un)&&(vn==="native"?(Pn[Fn].onexit&&Pn[Fn].onexit(),It.removeCue(Pn[Fn])):(An(Pn[Fn]),delete It.manualCueList[Fn]))}}function Nn(){var It=document.getElementById("native-cue-style");if(!It){(It=document.createElement("style")).id="native-cue-style",document.head.appendChild(It);var $t=It.sheet,Zt=ue.getElement();try{Zt&&(Zt.id?$t.insertRule("#"+Zt.id+"::cue {background: transparent}",0):Zt.classList.length!==0?$t.insertRule("."+Zt.className+"::cue {background: transparent}",0):$t.insertRule("video::cue {background: transparent}",0))}catch(un){B.info(""+un.message)}}}function rr(){var It=document.getElementById("native-cue-style");It&&document.head.removeChild(It)}function ir(){if(ie)for(;ie.firstChild;)ie.removeChild(ie.firstChild)}return P={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(V=window.VTTCue||window.TextTrackCue,ee=[],J=[],H=-1,re=0,ce=0,Se=0,Ee=0,ie=null,me=null,ge=null,De=!1,ze=2147483647,Be=null,Le="requestAnimationFrame"in window,document.fullscreenElement!==void 0?qe="fullscreenElement":document.webkitIsFullScreen!==void 0?qe="webkitIsFullScreen":document.msFullscreenElement?qe="msFullscreenElement":document.mozFullScreen&&(qe="mozFullScreen"))},getStreamId:function(){return ae.id},addTextTrack:function(It){ee.push(It)},addCaptions:dt,createTracks:function(){var It=se.get().streaming.text.dispatchForManualRendering;ee.sort(function(On,st){return On.index-st.index}),ie=ue.getTTMLRenderingDiv(),me=ue.getVttRenderingDiv();for(var $t,Zt,un,vn,Pn,xn,Fn=-1,Gn=0;Gn<ee.length;Gn++){var bt=(Zt=($t=ee[Gn]).kind,un=$t.id!==void 0?$t.id:$t.lang,vn=$t.lang,Pn=$t.isTTML,xn=$t.isEmbedded,ue.addTextTrack(Zt,un,vn,Pn,xn));J.push(bt),ee[Gn].defaultTrack&&(bt.default=!0,Fn=Gn);var Sn=vt(Gn);Sn&&(Sn.mode=y.Z.TEXT_SHOWING,ie&&(ee[Gn].isTTML||ee[Gn].isEmbedded)?Sn.renderingType="html":Sn.renderingType="default"),dt(Gn,0,ee[Gn].captionData),Z.trigger(_.Z.TEXT_TRACK_ADDED)}if(Wt.call(this,Fn),Fn>=0){Z.on(_.Z.PLAYBACK_METADATA_LOADED,function On(){var st=vt(Fn);st&&st.renderingType==="html"&&Me.call(this,st,!0),Z.off(_.Z.PLAYBACK_METADATA_LOADED,On,this)},this);for(var En=0;En<ee.length;En++){var Ot=vt(En);Ot&&(Ot.mode=En!==Fn||It?y.Z.TEXT_HIDDEN:y.Z.TEXT_SHOWING,Ot.manualMode=En===Fn?y.Z.TEXT_SHOWING:y.Z.TEXT_HIDDEN)}}Z.trigger(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:H,tracks:ee,streamId:ae.id})},getCurrentTrackIdx:function(){return H},setCurrentTrackIdx:Wt,getTrackIdxForId:function(It){for(var $t=-1,Zt=0;Zt<ee.length;Zt++)if(ee[Zt].id===It){$t=Zt;break}return $t},getCurrentTrackInfo:function(){return ee[H]},setModeForTrackIdx:function(It,$t){var Zt=vt(It);Zt&&Zt.mode!==$t&&(Zt.mode=$t),Zt&&Zt.manualMode!==$t&&(Zt.manualMode=$t)},deleteCuesFromTrackIdx:function(It,$t,Zt){var un=vt(It);un&&Dn(un,$t,Zt)},deleteAllTextTracks:function(){for(var It=J?J.length:0,$t=0;$t<It;$t++){var Zt=vt($t);Zt&&Dn.call(this,Zt,ae.start,ae.start+ae.duration,!1)}J=[],ee=[],ge&&(clearInterval(ge),ge=null),_e&&ue&&(_e.unobserve(ue.getElement()),_e=null),H=-1,ir.call(this)},manualCueProcessing:function(It){var $t=nt();if($t&&$t.length>0){var Zt=$t[0].manualCueList;Zt&&Zt.length>0&&Zt.forEach(function(un){un.startTime<=It&&un.endTime>=It&&!un.isActive?(un.isActive=!0,se.get().streaming.text.dispatchForManualRendering?Je(un):WebVTT.processCues(window,[un],me,un.cueID)):un.isActive&&(un.startTime>It||un.endTime<It)&&(un.isActive=!1,se.get().streaming.text.dispatchForManualRendering?ht(un):An(un))})}},disableManualTracks:function(){var It=nt();if(It&&It.length>0){var $t=It[0].manualCueList;$t&&$t.length>0&&$t.forEach(function(Zt){if(Zt.isActive){if(Zt.isActive=!1,se.get().streaming.text.dispatchForManualRendering)ht(Zt);else if(me)for(var un=me.childNodes,vn=0;vn<un.length;++vn)un[vn].id===Zt.cueID&&(me.removeChild(un[vn]),--vn)}})}}},B=(0,x.Z)(je).getInstance().getLogger(P),P}Um.__dashjs_factory_name="TextTracks";var Bm=U.Z.getClassFactory(Um);function jm(){var L,P,B,V,ee,J,H=this.context;function re(ie){var me=ie.split(":"),ge=me.length-1;return ie=60*parseInt(me[ge-1],10)+parseFloat(me[ge]),ge===2&&(ie+=3600*parseInt(me[0],10)),ie}function ce(ie){var me=ie.split(V),ge=me[1].split(J);return ge.shift(),me[1]=ge[0],ge.shift(),{cuePoints:me,styles:Se(ge)}}function Se(ie){var me={};return ie.forEach(function(ge){if(ge.split(/:/).length>1){var qe=ge.split(/:/)[1],De=!1;qe&&qe.search(/%/)!=-1&&(De=!0,qe=parseInt(qe.replace(/%/,""),10)),(ge.match(/align/)||ge.match(/A/))&&(me.align=qe),(ge.match(/line/)||ge.match(/L/))&&(me.line=qe==="auto"?qe:parseInt(qe,10),De&&(me.snapToLines=!1)),(ge.match(/position/)||ge.match(/P/))&&(me.position=qe),(ge.match(/size/)||ge.match(/S/))&&(me.size=qe)}}),me}function Ee(ie,me){for(var ge,qe=me,De="",Be="";ie[qe]!==""&&qe<ie.length;)qe++;if((ge=qe-me)>1)for(var ze=0;ze<ge;ze++){if((Be=ie[me+ze]).match(V)){De="";break}De+=Be,ze!==ge-1&&(De+="\n")}else(Be=ie[me]).match(V)||(De=Be);return De}return L={parse:function(ie){var me,ge,qe=[];if(!ie)return qe;me=(ie=ie.split(B)).length,ge=-1;for(var De=0;De<me;De++){var Be=ie[De];if(Be.length>0&&Be!=="WEBVTT"&&Be.match(V)){var ze=ce(Be),_e=ze.cuePoints,Le=ze.styles,we=Ee(ie,De+1),je=re(_e[0].replace(ee,"")),Z=re(_e[1].replace(ee,""));!isNaN(je)&&!isNaN(Z)&&je>=ge&&Z>je?we!==""?(ge=je,qe.push({start:je,end:Z,data:we,styles:Le})):P.error("Skipping cue due to empty/malformed cue text"):P.error("Skipping cue due to incorrect cue timing")}}return qe},getCaptionStyles:Se},P=(0,x.Z)(H).getInstance().getLogger(L),B=/(?:\r\n|\r|\n)/gm,V=/-->/,ee=/(^[\s]+|[\s]+$)/g,J=/\s\b/g,L}jm.__dashjs_factory_name="VTTParser";var Zm=U.Z.getSingletonFactory(jm);function tp(){var L,P;return L={parse:function(B){var V=[];return P.oncue=function(ee){ee.start=ee.startTime,ee.end=ee.endTime,ee.data=ee.text,ee.styles={align:ee.align,line:ee.line,position:ee.position,size:ee.size},V.push(ee)},P.parse(B),V}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(P=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(B){}}(),L}tp.__dashjs_factory_name="VttCustomRenderingParser";var ZE=U.Z.getSingletonFactory(tp);function Gm(){var L,P,B=this.context,V=(0,m.Z)(B).getInstance(),ee=0;return L={parse:function(J,H,re,ce,Se){var Ee,ie,me,ge="",qe=[],De={},Be={},ze="",_e="",Le={onOpenTag:function(ae,se,Q){if(Q[" imagetype"]&&!Q[" imageType"]&&(V.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Oi.LEVELS.ERROR,event:Oi.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),Q[" imageType"]=Q[" imagetype"]),se==="image"&&(ae==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||ae==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!Q[" imageType"]||Q[" imageType"].value!=="PNG")return void P.warn("smpte-tt imageType != PNG. Discarded");ze=Q["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){ze&&(Be[ze]=_e.trim()),_e="",ze=""},onText:function(ae){ze&&(_e+=ae)}};if(!J)throw ge="no ttml data to parse",new Error(ge);De.data=J,V.trigger(T.Z.TTML_TO_PARSE,De);var we=(0,kc.fromXML)(De.data,function(ae){ge=ae},Le);V.trigger(T.Z.TTML_PARSED,{ttmlString:De.data,ttmlDoc:we});var je,Z=we.getMediaTimeEvents();for(me=0;me<Z.length;me++){var ue=(0,kc.generateISD)(we,Z[me],function(ae){ge=ae});ue.contents.some(function(ae){return ae.contents.length})&&(Ee=Z[me]+H)<(ie=Z[me+1]+H)&&qe.push({start:Ee,end:ie,type:"html",cueID:(je="cue_TTML_"+ee,ee++,je),isd:ue,images:Se,embeddedImages:Be})}if(ge!=="")throw P.error(ge),new Error(ge);return qe}},P=(0,x.Z)(B).getInstance().getLogger(L),L}Gm.__dashjs_factory_name="TTMLParser";var GE=U.Z.getSingletonFactory(Gm);function np(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function jl(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?np(Object(B),!0).forEach(function(V){qm(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):np(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function qm(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function rp(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function ip(L){var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,Tt.Z)(ee).getInstance(),re=L.adapter,ce=L.baseURLController;function Se(me,ge){var qe,De,Be=!1;if(ce.resolve()){var ze=re.getVoRepresentations(me);ze&&ze.length>0&&(qe=ce.resolve(ze[0].path).url)}var _e=me.essentialPropertiesAsArray.filter(function(we){return we.schemeIdUri&&we.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME}),Le=me.supplementalPropertiesAsArray.filter(function(we){return we.schemeIdUri&&we.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME});_e.length>0?(Be=!0,De=_e):De=Le,De.forEach(function(we){if(function(ae){return!(!(ae.value&&ae.value==="1"&&ae.dvbUrl&&ae.dvbUrl.length>0&&ae.dvbFontFamily&&ae.dvbFontFamily.length>0&&ae.dvbMimeType)||ae.dvbMimeType!==y.Z.OFF_MIMETYPE&&ae.dvbMimeType!==y.Z.WOFF_MIMETYPE)}(we)){var je=(Z=we.dvbUrl,ue=qe,H.isPathAbsolute(Z)?Z:H.isRelative(Z)?ue?H.resolve(Z,ue):H.resolve(Z):Z);V.push({fontFamily:we.dvbFontFamily,url:je,mimeType:we.dvbMimeType,trackId:me.id,streamId:ge,isEssential:Be,status:"unloaded",fontFace:new FontFace(we.dvbFontFamily,"url(".concat(je,")"),{display:"swap"})})}var Z,ue})}function Ee(me,ge){var qe=V[me];V[me]=jl(jl({},qe),{},{status:ge})}function ie(){V=[]}return P={addFontsFromTracks:function(me,ge){if(me&&Array.isArray(me)&&ge)for(var qe=0;qe<me.length;qe++)Se(me[qe],ge)},downloadFonts:function(){for(var me=function(qe){var De=V[qe];document.fonts.add(De.fontFace),J.trigger(_.Z.DVB_FONT_DOWNLOAD_ADDED,De),De.fontFace.load().then(function(){Ee(qe,"loaded"),J.trigger(_.Z.DVB_FONT_DOWNLOAD_COMPLETE,De)},function(Be){Ee(qe,"error"),B.debug("Font download error: ",Be),J.trigger(_.Z.DVB_FONT_DOWNLOAD_FAILED,De)})},ge=0;ge<V.length;ge++)me(ge)},getFonts:function(){return V},getFontsForTrackId:function(me){return V.filter(function(ge){return ge.trackId&&ge.trackId===me})},reset:function(){(function(){var me,ge=function(Be,ze){var _e;if(typeof Symbol>"u"||Be[Symbol.iterator]==null){if(Array.isArray(Be)||(_e=function(ae,se){if(ae){if(typeof ae=="string")return rp(ae,se);var Q=Object.prototype.toString.call(ae).slice(8,-1);return Q==="Object"&&ae.constructor&&(Q=ae.constructor.name),Q==="Map"||Q==="Set"?Array.from(ae):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?rp(ae,se):void 0}}(Be))||ze){_e&&(Be=_e);var Le=0,we=function(){};return{s:we,n:function(){return Le>=Be.length?{done:!0}:{done:!1,value:Be[Le++]}},e:function(ae){throw ae},f:we}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var je,Z=!0,ue=!1;return{s:function(){_e=Be[Symbol.iterator]()},n:function(){var ae=_e.next();return Z=ae.done,ae},e:function(ae){ue=!0,je=ae},f:function(){try{Z||_e.return==null||_e.return()}finally{if(ue)throw je}}}}(V);try{for(ge.s();!(me=ge.n()).done;){var qe=me.value,De=document.fonts.delete(qe.fontFace);B.debug("Removal of fontFamily: ".concat(qe.fontFamily," was ").concat(De?"successful":"unsuccessful"))}}catch(Be){ge.e(Be)}finally{ge.f()}})(),ie()}},B=(0,x.Z)(ee).getInstance().getLogger(P),ie(),P}ip.__dashjs_factory_name="DVBFonts";var qE=U.Z.getClassFactory(ip);function Hm(L){var P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe,De=this.context,Be=L.adapter,ze=L.errHandler,_e=L.manifestModel,Le=L.mediaController,we=L.baseURLController,je=L.videoModel,Z=L.settings;function ue(Ne){if(qe.error("Could not download ".concat(Ne.isEssential?"an essential":"a"," font - fontFamily: ").concat(Ne.fontFamily,", url: ").concat(Ne.url)),Ne.isEssential){var Ye=ee[Ne.streamId].getTrackIdxForId(Ne.trackId);ee[Ne.streamId].setModeForTrackIdx(Ye,y.Z.TEXT_DISABLED)}}function ae(Ne){if(qe.debug("Successfully downloaded ".concat(Ne.isEssential?"an essential":"a"," font - fontFamily: ").concat(Ne.fontFamily,", url: ").concat(Ne.url)),Ne.isEssential){var Ye=ee[Ne.streamId].getTrackIdxForId(Ne.trackId);Ye===ee[Ne.streamId].getCurrentTrackIdx()?ee[Ne.streamId].setModeForTrackIdx(Ye,y.Z.TEXT_SHOWING):ee[Ne.streamId].setModeForTrackIdx(Ye,y.Z.TEXT_HIDDEN)}}function se(Ne){var Ye=Ne.tracks,dt=Ne.index,at=Ne.streamId;if(Z.get().streaming.text.defaultEnabled===!1&&!be()||me)ke(at,-1);else{var Je=Le.getCurrentTrackFor(y.Z.TEXT,at);if(Je){var ht={lang:Je.lang,role:Je.roles[0],index:Je.index,codec:Je.codec,accessibility:Je.accessibility[0]};Ye.some(function(Bt,Gt){if(Le.matchSettings(ht,Bt))return ke(at,Gt),dt=Gt,!0})}Se=!1}B[at].lastEnabledIndex=dt,ce.trigger(_.Z.TEXT_TRACKS_ADDED,{enabled:be(),index:dt,tracks:Ye,streamId:at}),ie=!0,ge.addFontsFromTracks(Ye,at),ge.getFonts().forEach(function(Bt){if(Bt.isEssential){var Gt=ee[Bt.streamId].getTrackIdxForId(Bt.trackId);ee[Bt.streamId].setModeForTrackIdx(Gt,y.Z.TEXT_DISABLED)}}),ge.downloadFonts()}function Q(Ne){try{var Ye=Ne.streamId;if(!ee[Ye]||isNaN(Ne.time))return;ee[Ye].manualCueProcessing(Ne.time)}catch(dt){}}function Me(Ne){try{var Ye=Ne.streamId;if(!ee[Ye])return;ee[Ye].disableManualTracks()}catch(dt){}}function be(){var Ne=!0;return Se&&!Ee&&(Ne=!1),Ne}function ke(Ne,Ye){(Se=Ye===-1)&&Le&&Le.saveTextSettingsDisabled();var dt=Re(Ne);if(dt!==Ye&&ee[Ne]){ee[Ne].disableManualTracks();var at=ee[Ne].getCurrentTrackInfo(),Je=at?je.getTextTrack(at.kind,at.id,at.lang,at.isTTML,at.isEmbedded):null;Je&&Je.mode!==y.Z.TEXT_DISABLED&&ee[Ne].setModeForTrackIdx(dt,y.Z.TEXT_HIDDEN),ee[Ne].setCurrentTrackIdx(Ye),at=ee[Ne].getCurrentTrackInfo();var ht=Z.get().streaming.text.dispatchForManualRendering;at&&!ht&&at.mode!==y.Z.TEXT_DISABLED&&ee[Ne].setModeForTrackIdx(Ye,y.Z.TEXT_SHOWING),at&&at.isFragmented&&!at.isEmbedded?function(Bt,Gt,kt){if(V[Bt])for(var Ft=V[Bt].getConfig().fragmentedTracks,An=0;An<Ft.length;An++){var nt=Ft[An];if(Gt.lang===nt.lang&&(nt.id?Gt.id===nt.id:Gt.index===nt.index)){var vt=Le.getCurrentTrackFor(y.Z.TEXT,Bt);(nt.id?vt.id!==nt.id:vt.index!==nt.index)?(ee[Bt].deleteCuesFromTrackIdx(kt),V[Bt].setCurrentFragmentedTrackIdx(An)):kt===-1&&ce.trigger(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Bt,mediaType:y.Z.TEXT})}}}(Ne,at,dt):at&&!at.isFragmented&&function(Bt,Gt){ce.trigger(T.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Gt},{streamId:Bt,mediaType:y.Z.TEXT})}(Ne,at),Le.setTrack(at)}}function Re(Ne){return ee[Ne].getCurrentTrackIdx()}function pe(){V={},ee={},B={},Se=!0,ie=!1,me=!1}return P={deactivateStream:function(Ne){if(Ne){var Ye=Ne.id;V[Ye]&&V[Ye].resetMediaInfos(),ee[Ye]&&ee[Ye].deleteAllTextTracks()}},initialize:function(){ge=qE(De).create({adapter:Be,baseURLController:we}),ce.on(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,se,P),ce.on(T.Z.DVB_FONT_DOWNLOAD_FAILED,ue,P),ce.on(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),Z.get().streaming.text.webvtt.customRenderingEnabled&&(ce.on(T.Z.PLAYBACK_TIME_UPDATED,Q,P),ce.on(T.Z.PLAYBACK_SEEKING,Me,P))},initializeForStream:function(Ne){var Ye=Ne.id,dt=Bm(De).create({videoModel:je,settings:Z,streamInfo:Ne});dt.initialize(),ee[Ye]=dt;var at=ep(De).create({errHandler:ze,adapter:Be,dvbFonts:ge,manifestModel:_e,mediaController:Le,videoModel:je,textTracks:dt,vttParser:J,vttCustomRenderingParser:H,ttmlParser:re,streamInfo:Ne,settings:Z});at.initialize(),V[Ye]=at,B[Ye]={},B[Ye].lastEnabledIndex=-1},createTracks:function(Ne){var Ye=Ne.id;ee[Ye]&&ee[Ye].createTracks()},getTextSourceBuffer:function(Ne){var Ye=Ne.id;if(V&&V[Ye])return V[Ye]},getAllTracksAreDisabled:function(){return Se},addEmbeddedTrack:function(Ne,Ye){var dt=Ne.id;V[dt]&&V[dt].addEmbeddedTrack(Ye)},enableText:function(Ne,Ye){return(0,ye.PS)(Ye,"boolean"),be()!==Ye&&(Ye&&ke(Ne,B[Ne].lastEnabledIndex),Ye||(B[Ne].lastEnabledIndex=Re(Ne),ie?ke(Ne,-1):me=!0)),!0},isTextEnabled:be,setTextTrack:ke,getCurrentTrackIdx:Re,enableForcedTextStreaming:function(Ne){return(0,ye.PS)(Ne,"boolean"),Ee=Ne,!0},addMediaInfosToBuffer:function(Ne,Ye,dt){var at=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,Je=Ne.id;V[Je]&&V[Je].addMediaInfos(Ye,dt,at)},reset:function(){ge.reset(),pe(),ce.off(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,se,P),ce.off(T.Z.DVB_FONT_DOWNLOAD_FAILED,ue,P),ce.off(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),Z.get().streaming.text.webvtt.customRenderingEnabled&&(ce.off(T.Z.PLAYBACK_TIME_UPDATED,Q,P),ce.off(T.Z.PLAYBACK_SEEKING,Me,P)),Object.keys(V).forEach(function(Ne){V[Ne].resetEmbedded(),V[Ne].reset()})}},Ee=!1,ie=!1,me=!1,J=Zm(De).getInstance(),H=ZE(De).getInstance(),re=GE(De).getInstance(),ce=(0,m.Z)(De).getInstance(),qe=(0,x.Z)(De).getInstance().getLogger(P),pe(),P}Hm.__dashjs_factory_name="TextController";var HE=U.Z.getClassFactory(Hm);function Uc(){var L,P,B,V,ee,J,H,re,ce,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z,ue,ae,se,Q,Me,be,ke,Re,pe,Ne,Ye,dt,at,Je,ht,Bt,Gt="You must first call initialize() and set a source before calling this method",kt="You must first call initialize() and set a valid source and view before calling this method",Ft="You must first call attachView() to set the video element before calling this method",An="You must first call attachSource() with a valid source before calling this method",nt="MediaPlayer not initialized!",vt=this.context,Wt=(0,m.Z)(vt).getInstance(),Nt=(0,Ze.Z)(vt).getInstance(),en=(0,x.Z)(vt).getInstance({settings:Nt});function Jt(){Gn(null),xn(null),V=null,ge&&(ge.reset(),ge=null),qe&&(qe.reset(),qe=null),Le&&Le.reset(),Nt.reset(),Be&&(Be.reset(),Be=null)}function Yt(){return!!B&&!!at.getElement()}function Dn(){return(0,Dm.e)()}function Nn(){if(!H)throw kt;return Me.isPaused()}function rr(){if(!H)throw kt;return Me.getIsDynamic()}function ir(Ve){var Ke=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Mt=pe.getCurrentDVRInfo(Ke);if(!Mt)return 0;var fn=Me.getOriginalLiveDelay(),Tn=Mt.range.start+Ve;return Tn>Mt.range.end-fn&&(Tn=Mt.range.end-fn),Tn}function It(Ve){if(!H)throw kt;var Ke=Pn().currentTime;if(Ve!==void 0)Ke=ae.getTimeRelativeToStreamId(Ke,Ve);else if(Me.getIsDynamic()){var Mt=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,fn=pe.getCurrentDVRInfo(Mt);Ke=fn===null||Ke===0?0:Math.max(0,Ke-fn.range.start)}return Ke}function $t(){if(!H)throw kt;var Ve=Pn().duration;if(Me.getIsDynamic()){var Ke=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Mt=pe.getCurrentDVRInfo(Ke);Ve=Mt?Mt.range.end-Mt.range.start:0}return Ve}function Zt(Ve){(0,ye.PS)(Ve,"boolean"),re=Ve}function un(){Le.restoreDefaultUTCTimingSources()}function vn(){return pe}function Pn(){if(!at.getElement())throw Ft;return at.getElement()}function xn(Ve){if(!ee)throw nt;at.setElement(Ve),Ve&&(On(),function(){if(!qe){var Ke=dashjs.MetricsReporting;if(typeof Ke=="function"){var Mt=Ke(vt).create();qe=Mt.createMetricsReporting({debug:en,eventBus:Wt,mediaElement:Pn(),adapter:ze,dashMetrics:pe,mediaPlayerModel:_e,events:T.Z,constants:y.Z,metricsConstants:D.Z})}}}(),function(){if(!De){var Ke=dashjs.MssHandler;typeof Ke=="function"&&(Ae.extend(Ke.errors),De=Ke(vt).create({eventBus:Wt,mediaPlayerModel:_e,dashMetrics:pe,manifestModel:Ne,playbackController:Me,streamController:ae,protectionController:ge,baseURLController:je,errHandler:we,events:T.Z,constants:y.Z,debug:en,initSegmentType:it.w.INIT_SEGMENT_TYPE,BASE64:$f,ISOBoxer:fa,settings:Nt}))}}(),ae&&ae.switchToVideoElement(ce)),H&&Sn(),qt(ce)}function Fn(Ve){if(!J)throw Gt;var Ke=ae.getActiveStreamInfo();return Ke?me.getTracksFor(Ve,Ke.id):[]}function Gn(Ve){var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!ee)throw nt;typeof Ve=="string"&&Je.initialize(Ve),Ke==null&&(Ke=NaN),isNaN(Ke)||(Ke=Math.max(0,Ke)),ce=Ke,B=Ve,(J||H)&&Sn(),Yt()&&qt(ce)}function bt(){if(!J)throw Gt;var Ve=ae.getActiveStreamInfo();return Ve?ae.getStreamById(Ve.id):null}function Sn(){H=!1,J=!1,ze.reset(),ae.reset(),Q.reset(),Re.reset(),Me.reset(),be.reset(),ke.reset(),Se.reset(),me.reset(),Bt.reset(),ge&&(Nt.get().streaming.protection.keepProtectionMediaKeys?ge.stop():(ge.reset(),ge=null,On())),se.reset(),Ye.reset(),dt.reset()}function En(){var Ve=Ot();ae||(ae=Ho(vt).getInstance()),se||(se=HE(vt).create({errHandler:we,manifestModel:Ne,adapter:ze,mediaController:me,baseURLController:je,videoModel:at,settings:Nt})),ue.setConfig({capabilities:Z,customParametersModel:Le,adapter:ze,settings:Nt,manifestModel:Ne,errHandler:we}),ae.setConfig({capabilities:Z,capabilitiesFilter:ue,manifestLoader:Ve,manifestModel:Ne,mediaPlayerModel:_e,customParametersModel:Le,protectionController:ge,textController:se,adapter:ze,dashMetrics:pe,errHandler:we,timelineConverter:ie,videoModel:at,playbackController:Me,serviceDescriptionController:be,contentSteeringController:ke,abrController:Se,mediaController:me,settings:Nt,baseURLController:je,uriFragmentModel:Je,segmentBaseController:Bt}),Q.setConfig({settings:Nt,playbackController:Me,streamController:ae,videoModel:at,timelineConverter:ie,adapter:ze}),Me.setConfig({streamController:ae,serviceDescriptionController:be,dashMetrics:pe,adapter:ze,videoModel:at,timelineConverter:ie,settings:Nt}),Re.setConfig({streamController:ae,playbackController:Me,mediaPlayerModel:_e,videoModel:at,settings:Nt}),Se.setConfig({streamController:ae,domStorage:ht,mediaPlayerModel:_e,customParametersModel:Le,cmsdModel:dt,dashMetrics:pe,adapter:ze,videoModel:at,settings:Nt}),Ye.setConfig({abrController:Se,dashMetrics:pe,playbackController:Me}),dt.setConfig({}),Se.initialize(),ae.initialize(re,V),se.initialize(),Q.initialize(),Re.initialize(),Ye.initialize(),dt.initialize(),ke.initialize(),Bt.initialize()}function Ot(){return Am(vt).create({debug:en,errHandler:we,dashMetrics:pe,mediaPlayerModel:_e,requestModifier:(0,He.Z)(vt).getInstance(),mssHandler:De,settings:Nt})}function On(){if(ge)return ge;var Ve=dashjs.Protection;if(typeof Ve=="function"){var Ke=Ve(vt).create();return T.Z.extend(Ve.events),_.Z.extend(Ve.events,{publicOnly:!0}),Ae.extend(Ve.errors),Z||(Z=(0,Im.Z)(vt).getInstance()),ge=Ke.createProtectionSystem({debug:en,errHandler:we,videoModel:at,customParametersModel:Le,capabilities:Z,eventBus:Wt,events:T.Z,BASE64:$f,constants:y.Z,cmcdModel:Ye,settings:Nt})}return null}function st(){if(!ee)throw nt;if(Be)return Be;var Ve=dashjs.OfflineController;if(typeof Ve=="function"){T.Z.extend(Ve.events),_.Z.extend(Ve.events,{publicOnly:!0}),Ae.extend(Ve.errors);var Ke=Ot(),Mt=Vr(vt).create();return Mt.setConfig({manifestModel:Ne,adapter:ze,manifestLoader:Ke,errHandler:we,contentSteeringController:ke}),Be=Ve(vt).create({debug:en,manifestUpdater:Mt,baseURLController:je,manifestLoader:Ke,manifestModel:Ne,mediaPlayerModel:_e,abrController:Se,playbackController:Me,adapter:ze,errHandler:we,dashMetrics:pe,timelineConverter:ie,segmentBaseController:Bt,schemeLoaderFactory:Ee,eventBus:Wt,events:T.Z,errors:Ae,constants:y.Z,settings:Nt,dashConstants:v.Z,urlUtils:(0,Tt.Z)(vt).getInstance()})}return null}function tt(Ve){var Ke=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Mt=pe.getCurrentDVRInfo(Ke);return Mt?Ve+(Mt.manifestInfo.availableFrom.getTime()/1e3+Mt.range.start):0}function qt(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Be&&Be.resetRecords(),!J&&B&&(J=!0,P.info("Streaming Initialized"),En(),typeof B=="string"?ae.load(B,Ve):ae.loadWithManifest(B,Ve)),!H&&Yt()&&(H=!0,P.info("Playback Initialized"))}return L={initialize:function(Ve,Ke,Mt){var fn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;Z||(Z=(0,Im.Z)(vt).getInstance()).setConfig({settings:Nt}),we||(we=Ol(vt).getInstance()),Z.supportsMediaSource()?(ee||(ee=!0,ie=Eu(vt).getInstance(),Se||(Se=Wn(vt).getInstance()).setConfig({settings:Nt}),Ee||(Ee=Pi(vt).getInstance()),Me||(Me=R(vt).getInstance()),me||(me=Bu(vt).getInstance()),ae||(ae=Ho(vt).getInstance()),Q||(Q=ks(vt).getInstance()),Re||(Re=co(vt).getInstance()),be||(be=Nh(vt).getInstance()),ke||(ke=Ia(vt).getInstance()),ue||(ue=ME(vt).getInstance()),ze=Om(vt).getInstance(),Ne=OE(vt).getInstance(),Ye=ar(vt).getInstance(),dt=_n(vt).getInstance(),pe=js(vt).getInstance({settings:Nt}),ht=LE(vt).getInstance({settings:Nt}),ze.setConfig({constants:y.Z,cea608parser:C(),errHandler:we,BASE64:$f}),je||(je=IE(vt).create()),je.setConfig({adapter:ze,contentSteeringController:ke}),be.setConfig({adapter:ze}),Bt||(Bt=kE(vt).getInstance({dashMetrics:pe,mediaPlayerModel:_e,errHandler:we,baseURLController:je,events:T.Z,eventBus:Wt,debug:en,boxParser:(0,sa.Z)(vt).getInstance(),requestModifier:(0,He.Z)(vt).getInstance(),errors:Ae})),me.setConfig({domStorage:ht,settings:Nt,customParametersModel:Le}),_e.setConfig({playbackController:Me,serviceDescriptionController:be}),ke.setConfig({adapter:ze,errHandler:we,dashMetrics:pe,mediaPlayerModel:_e,manifestModel:Ne,serviceDescriptionController:be,eventBus:Wt,requestModifier:(0,He.Z)(vt).getInstance()}),un(),Zt(Mt===void 0||Mt),st()),Ve&&xn(Ve),Ke&&Gn(Ke,fn),P.info("[dash.js "+Dn()+"] MediaPlayer has been initialized")):we.error(new fe.Z(Ae.CAPABILITY_MEDIASOURCE_ERROR_CODE,Ae.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(Ve){Ve&&(Ve.capabilities&&(Z=Ve.capabilities),Ve.capabilitiesFilter&&(ue=Ve.capabilitiesFilter),Ve.streamController&&(ae=Ve.streamController),Ve.textController&&(se=Ve.textController),Ve.gapController&&(Q=Ve.gapController),Ve.playbackController&&(Me=Ve.playbackController),Ve.serviceDescriptionController&&(be=Ve.serviceDescriptionController),Ve.contentSteeringController&&(ke=Ve.contentSteeringController),Ve.catchupController&&(Re=Ve.catchupController),Ve.mediaPlayerModel&&(_e=Ve.mediaPlayerModel),Ve.customParametersModel&&(Le=Ve.customParametersModel),Ve.abrController&&(Se=Ve.abrController),Ve.schemeLoaderFactory&&(Ee=Ve.schemeLoaderFactory),Ve.mediaController&&(me=Ve.mediaController),Ve.settings&&(Nt=Ve.settings))},on:function(Ve,Ke,Mt,fn){Wt.on(Ve,Ke,Mt,fn)},off:function(Ve,Ke,Mt){Wt.off(Ve,Ke,Mt)},extend:function(Ve,Ke,Mt){U.Z.extend(Ve,Ke,Mt,vt)},attachView:xn,attachSource:Gn,refreshManifest:function(Ve){if(!ee)throw nt;if(!Yt())return Ve(null,An);var Ke=this;typeof Ve=="function"&&Wt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Mt(fn){Wt.off(T.Z.INTERNAL_MANIFEST_LOADED,Mt,Ke),fn.error?Ve(null,fn.error):Ve(fn.manifest)},Ke),ae.refreshManifest()},isReady:Yt,preload:function(){if(!at.getElement()&&!J){if(!B)throw An;qt(ce)}},play:function(){if(!H)throw kt;(!re||Nn()&&H)&&Me.play(!0)},isPaused:Nn,pause:function(){if(!H)throw kt;Me.pause()},isSeeking:function(){if(!H)throw kt;return Me.isSeeking()},isDynamic:rr,getLowLatencyModeEnabled:function(){if(!H)throw kt;return Me.getLowLatencyModeEnabled()},seek:function(Ve){if(!H)throw kt;if((0,ye.PS)(Ve,"number"),isNaN(Ve))throw y.Z.BAD_ARGUMENT_ERROR;Ve<0&&(Ve=0);var Ke=Me.getIsDynamic()?ir(Ve):Ve,Mt=Pn();!Me.getIsDynamic()&&Mt.duration&&(Ke=Math.min(Mt.duration,Ke)),Me.seek(Ke,!1,!1,!0)},seekToOriginalLive:function(){H&&rr()&&Me.seekToOriginalLive()},setPlaybackRate:function(Ve){Pn().playbackRate=Ve},getPlaybackRate:function(){return Pn().playbackRate},setMute:function(Ve){(0,ye.PS)(Ve,"boolean"),Pn().muted=Ve},isMuted:function(){return Pn().muted},setVolume:function(Ve){if(typeof Ve!="number"||isNaN(Ve)||Ve<0||Ve>1)throw y.Z.BAD_ARGUMENT_ERROR;Pn().volume=Ve},getVolume:function(){return Pn().volume},time:It,duration:$t,timeAsUTC:function(){if(!H)throw kt;return It()<0?NaN:tt(It())},durationAsUTC:function(){if(!H)throw kt;return tt($t())},getActiveStream:bt,getDVRWindowSize:function(){var Ve=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Ke=pe.getCurrentDVRInfo(Ve);return Ke?Ke.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:ir,getAvailableBaseUrls:function(){var Ve=Ne.getValue();return Ve?je.getBaseUrls(Ve):[]},getAvailableLocations:function(){var Ve=Ne.getValue();if(!Ve)return[];var Ke=ze.getLocation(Ve),Mt=ke.getSynthesizedLocationElements(Ke);return Ke.concat(Mt)},getTargetLiveDelay:function(){if(!H)throw kt;return Me.getOriginalLiveDelay()},convertToTimeCode:function(Ve){Ve=Math.max(Ve,0);var Ke=Math.floor(Ve/3600),Mt=Math.floor(Ve%3600/60),fn=Math.floor(Ve%3600%60);return(Ke===0?"":Ke<10?"0"+Ke.toString()+":":Ke.toString()+":")+(Mt<10?"0"+Mt.toString():Mt.toString())+":"+(fn<10?"0"+fn.toString():fn.toString())},formatUTC:function(Ve,Ke,Mt){var fn=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Tn=new Date(1e3*Ve),sr=Tn.toLocaleDateString(Ke),Zr=Tn.toLocaleTimeString(Ke,{hour12:Mt});return fn?Zr+" "+sr:Zr},getVersion:Dn,getDebug:function(){return en},getBufferLength:function(Ve){var Ke=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT];if(Ve)return Ke.indexOf(Ve)!==-1?vn().getCurrentBufferLevel(Ve)||NaN:(P.warn("getBufferLength requested for invalid type"),NaN);var Mt=Ke.map(function(fn){return Fn(fn).length>0?vn().getCurrentBufferLevel(fn):Number.MAX_VALUE}).reduce(function(fn,Tn){return Math.min(fn,Tn)});return Mt===Number.MAX_VALUE?NaN:Mt},getTTMLRenderingDiv:function(){return at?at.getTTMLRenderingDiv():null},getVideoElement:Pn,getSource:function(){if(!B)throw An;return B},updateSource:function(Ve){B=Ve,ae.load(B)},getCurrentLiveLatency:function(){if(!ee)throw nt;return H?Me.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(Ve){if(!J)throw Gt;return Se.getTopBitrateInfoFor(Ve)},setAutoPlay:Zt,getAutoPlay:function(){return re},getDashMetrics:vn,getQualityFor:function(Ve){if(!J)throw Gt;if(Ve===y.Z.IMAGE){var Ke=bt();if(!Ke)return-1;var Mt=Ke.getThumbnailController();return Mt?Mt.getCurrentTrackIndex():-1}return Se.getQualityFor(Ve)},setQualityFor:function(Ve,Ke){var Mt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!J)throw Gt;if(Ve===y.Z.IMAGE){var fn=bt();if(!fn)return;var Tn=fn.getThumbnailController();Tn&&Tn.setTrackByIndex(Ke)}Se.setPlaybackQuality(Ve,ae.getActiveStreamInfo(),Ke,{forceReplace:Mt})},updatePortalSize:function(){Se.setElementSize(),Se.setWindowResizeEventCalled(!0)},enableText:function(Ve){var Ke=ae.getActiveStreamInfo();return!(!Ke||!se)&&se.enableText(Ke.id,Ve)},enableForcedTextStreaming:function(Ve){return!(!ae.getActiveStreamInfo()||!se)&&se.enableForcedTextStreaming(Ve)},isTextEnabled:function(){var Ve=ae.getActiveStreamInfo();return!(!Ve||!se)&&se.isTextEnabled(Ve)},setTextTrack:function(Ve){if(!H)throw kt;var Ke=ae.getActiveStreamInfo();Ke&&se&&se.setTextTrack(Ke.id,Ve)},getBitrateInfoListFor:function(Ve){if(!J)throw Gt;var Ke=bt();return Ke?Ke.getBitrateListFor(Ve):[]},getStreamsFromManifest:function(Ve){if(!J)throw Gt;return ze.getStreamsInfo(Ve)},getTracksFor:Fn,getTracksForTypeFromManifest:function(Ve,Ke,Mt){if(!J)throw Gt;return(Mt=Mt||ze.getStreamsInfo(Ke,1)[0])?ze.getAllMediaInfoForType(Mt,Ve,Ke):[]},getCurrentTrackFor:function(Ve){if(!J)throw Gt;var Ke=ae.getActiveStreamInfo();return me.getCurrentTrackFor(Ve,Ke.id)},setInitialMediaSettingsFor:function(Ve,Ke){if(!ee)throw nt;me.setInitialSettings(Ve,Ke)},getInitialMediaSettingsFor:function(Ve){if(!ee)throw nt;return me.getInitialSettings(Ve)},setCurrentTrack:function(Ve){var Ke=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!J)throw Gt;me.setTrack(Ve,Ke)},addABRCustomRule:function(Ve,Ke,Mt){Le.addAbrCustomRule(Ve,Ke,Mt)},removeABRCustomRule:function(Ve){Le.removeAbrCustomRule(Ve)},removeAllABRCustomRule:function(){Le.removeAllAbrCustomRule()},getABRCustomRules:function(){return Le.getAbrCustomRules()},getAverageThroughput:function(Ve){var Ke=Se.getThroughputHistory(),Mt=Me.getIsDynamic();return Ke?Ke.getAverageThroughput(Ve,Mt):0},retrieveManifest:function(Ve,Ke){var Mt=Ot(),fn=this;Wt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Tn(sr){sr.error?Ke(null,sr.error):Ke(sr.manifest),Wt.off(T.Z.INTERNAL_MANIFEST_LOADED,Tn,fn),Mt.reset()},fn),Je.initialize(Ve),Mt.load(Ve)},addUTCTimingSource:function(Ve,Ke){Le.addUTCTimingSource(Ve,Ke)},removeUTCTimingSource:function(Ve,Ke){Le.removeUTCTimingSource(Ve,Ke)},clearDefaultUTCTimingSources:function(){Le.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:un,setXHRWithCredentialsForType:function(Ve,Ke){Le.setXHRWithCredentialsForType(Ve,Ke)},getXHRWithCredentialsForType:function(Ve){return Le.getXHRWithCredentialsForType(Ve)},getProtectionController:function(){return On()},attachProtectionController:function(Ve){ge=Ve},setProtectionData:function(Ve){V=Ve,ae&&ae.setProtectionData(V)},registerLicenseRequestFilter:function(Ve){Le.registerLicenseRequestFilter(Ve)},registerLicenseResponseFilter:function(Ve){Le.registerLicenseResponseFilter(Ve)},unregisterLicenseRequestFilter:function(Ve){Le.unregisterLicenseRequestFilter(Ve)},unregisterLicenseResponseFilter:function(Ve){Le.unregisterLicenseResponseFilter(Ve)},registerCustomCapabilitiesFilter:function(Ve){Le.registerCustomCapabilitiesFilter(Ve)},unregisterCustomCapabilitiesFilter:function(Ve){Le.unregisterCustomCapabilitiesFilter(Ve)},setCustomInitialTrackSelectionFunction:function(Ve){Le.setCustomInitialTrackSelectionFunction(Ve)},resetCustomInitialTrackSelectionFunction:function(){Le.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(Ve){if(!at.getElement())throw Ft;at.setTTMLRenderingDiv(Ve)},attachVttRenderingDiv:function(Ve){if(!at.getElement())throw Ft;at.setVttRenderingDiv(Ve)},getCurrentTextTrackIndex:function(){var Ve=ae.getActiveStreamInfo();if(Ve&&se)return se.getCurrentTrackIdx(Ve.id)},provideThumbnail:function(Ve,Ke){if(typeof Ke=="function")if(Ve<0)Ke(null);else{var Mt=Me.getIsDynamic()?ir(Ve):Ve,fn=ae.getStreamForTime(Mt);if(fn!==null){var Tn=fn.getThumbnailController();if(Tn)return Tn.provide(Mt,Ke);Ke(null)}else Ke(null)}},getDashAdapter:function(){return ze},getOfflineController:function(){return st()},triggerSteeringRequest:function(){if(ke)return ke.loadSteeringData()},getCurrentSteeringResponseData:function(){if(ke)return ke.getCurrentSteeringResponseData()},getSettings:function(){return Nt.get()},updateSettings:function(Ve){Nt.update(Ve)},resetSettings:function(){Nt.reset()},reset:Jt,destroy:function(){Jt(),U.Z.deleteSingletonInstances(vt)}},P=en.getLogger(L),ee=!1,H=!1,J=!1,re=!0,ce=NaN,ge=null,Be=null,V=null,ze=null,Bt=null,T.Z.extend(_.Z),_e=Ll(vt).getInstance(),Le=(0,ti.Z)(vt).getInstance(),at=Sr(vt).getInstance(),Je=PE(vt).getInstance(),L}Uc.__dashjs_factory_name="MediaPlayer";var Bc=U.Z.getClassFactory(Uc);Bc.events=_.Z,Bc.errors=Ae,U.Z.updateClassFactory(Uc.__dashjs_factory_name,Bc);var Km=Bc},8825:function(b,g,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function C(m,T){return C=Object.setPrototypeOf||function(U,x){return U.__proto__=x,U},C(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(I,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(R&&R.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),R&&C(I,R)})(_,m);var T,U,x=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,R=v(T);if(U){var j=v(this).constructor;I=Reflect.construct(R,arguments,j)}else I=R.apply(this,arguments);return y(this,I)});function _(){var I;return function(R,j){if(!(R instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=x.call(this)).AST_IN_FUTURE="astInFuture",I.BASE_URLS_UPDATED="baseUrlsUpdated",I.BUFFER_EMPTY="bufferStalled",I.BUFFER_LOADED="bufferLoaded",I.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",I.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",I.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",I.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",I.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",I.DYNAMIC_TO_STATIC="dynamicToStatic",I.ERROR="error",I.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",I.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",I.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",I.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",I.LOG="log",I.MANIFEST_LOADING_STARTED="manifestLoadingStarted",I.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",I.MANIFEST_LOADED="manifestLoaded",I.METRICS_CHANGED="metricsChanged",I.METRIC_CHANGED="metricChanged",I.METRIC_ADDED="metricAdded",I.METRIC_UPDATED="metricUpdated",I.PERIOD_SWITCH_STARTED="periodSwitchStarted",I.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",I.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",I.QUALITY_CHANGE_RENDERED="qualityChangeRendered",I.TRACK_CHANGE_RENDERED="trackChangeRendered",I.STREAM_INITIALIZING="streamInitializing",I.STREAM_UPDATED="streamUpdated",I.STREAM_ACTIVATED="streamActivated",I.STREAM_DEACTIVATED="streamDeactivated",I.STREAM_INITIALIZED="streamInitialized",I.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",I.TEXT_TRACKS_ADDED="allTextTracksAdded",I.TEXT_TRACK_ADDED="textTrackAdded",I.CUE_ENTER="cueEnter",I.CUE_EXIT="cueExit",I.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",I.TTML_PARSED="ttmlParsed",I.TTML_TO_PARSE="ttmlToParse",I.CAPTION_RENDERED="captionRendered",I.CAPTION_CONTAINER_RESIZE="captionContainerResize",I.CAN_PLAY="canPlay",I.CAN_PLAY_THROUGH="canPlayThrough",I.PLAYBACK_ENDED="playbackEnded",I.PLAYBACK_ERROR="playbackError",I.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",I.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",I.PLAYBACK_LOADED_DATA="playbackLoadedData",I.PLAYBACK_PAUSED="playbackPaused",I.PLAYBACK_PLAYING="playbackPlaying",I.PLAYBACK_PROGRESS="playbackProgress",I.PLAYBACK_RATE_CHANGED="playbackRateChanged",I.PLAYBACK_SEEKED="playbackSeeked",I.PLAYBACK_SEEKING="playbackSeeking",I.PLAYBACK_STALLED="playbackStalled",I.PLAYBACK_STARTED="playbackStarted",I.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",I.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",I.PLAYBACK_WAITING="playbackWaiting",I.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",I.EVENT_MODE_ON_START="eventModeOnStart",I.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",I.CONFORMANCE_VIOLATION="conformanceViolation",I.REPRESENTATION_SWITCH="representationSwitch",I.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",I.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",I.INBAND_PRFT="inbandPrft",I.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",I.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",I}return _}(w(8342).Z));g.Z=D},3393:function(b,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var F=new(function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var y,v;return y=C,(v=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&w(y.prototype,v),C}());g.Z=F},3860:function(b,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var F=new(function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var y,v;return y=C,(v=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&w(y.prototype,v),C}());g.Z=F},8080:function(b,g,w){w.d(g,{default:function(){return q}});var F=function K(){(function(ye,de){if(!(ye instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};F.SSL_CONNECTION_FAILED_PREFIX="SSL",F.DNS_RESOLUTION_FAILED="C00",F.HOST_UNREACHABLE="C01",F.CONNECTION_REFUSED="C02",F.CONNECTION_ERROR="C03",F.CORRUPT_MEDIA_ISOBMFF="M00",F.CORRUPT_MEDIA_OTHER="M01",F.BASE_URL_CHANGED="F00",F.BECAME_REPORTER="S00";var C=F,y=w(1180);function v(K){var ye,de,He=(K=K||{}).eventBus,Tt=K.dashMetrics,ot=K.metricsConstants,rt=K.events;function et(Xt){var nn=new C;if(de){for(var Pt in Xt)Xt.hasOwnProperty(Pt)&&(nn[Pt]=Xt[Pt]);nn.mpdurl||(nn.mpdurl=de.originalUrl||de.url),nn.terror||(nn.terror=new Date),Tt.addDVBErrors(nn)}}function ft(Xt){Xt.error||(de=Xt.manifest)}function yt(Xt){et({errorcode:C.BASE_URL_CHANGED,servicelocation:Xt.entry})}function _t(){et({errorcode:C.BECAME_REPORTER})}function Ct(Xt){var nn;Xt.metric===ot.HTTP_REQUEST&&((nn=Xt.value).responsecode===0||nn.responsecode==null||nn.responsecode>=400||nn.responsecode<100||nn.responsecode>=600)&&et({errorcode:nn.responsecode||C.CONNECTION_ERROR,url:nn.url,terror:nn.tresponse,servicelocation:nn._serviceLocation})}function hn(Xt){var nn;switch(Xt.error?Xt.error.code:0){case MediaError.MEDIA_ERR_NETWORK:nn=C.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:nn=C.CORRUPT_MEDIA_OTHER;break;default:return}et({errorcode:nn})}return ye={initialize:function(){He.on(rt.MANIFEST_UPDATED,ft,ye),He.on(rt.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,yt,ye),He.on(rt.METRIC_ADDED,Ct,ye),He.on(rt.METRIC_UPDATED,Ct,ye),He.on(rt.PLAYBACK_ERROR,hn,ye),He.on(y.Z.BECAME_REPORTING_PLAYER,_t,ye)},reset:function(){He.off(rt.MANIFEST_UPDATED,ft,ye),He.off(rt.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,yt,ye),He.off(rt.METRIC_ADDED,Ct,ye),He.off(rt.METRIC_UPDATED,Ct,ye),He.off(rt.PLAYBACK_ERROR,hn,ye),He.off(y.Z.BECAME_REPORTING_PLAYER,_t,ye)}}}v.__dashjs_factory_name="DVBErrorsTranslator";var D=dashjs.FactoryMaker.getSingletonFactory(v),m=w(2295);function T(K){K=K||{};var ye,de,He=!1,Tt=this.context,ot=K.mediaElement;return ye={initialize:function(rt){rt&&rt.length&&(rt.forEach(function(et){var ft=et.starttime,yt=ft+et.duration;de.add(ft,yt)}),He=!!rt[0]._useWallClockTime)},reset:function(){de.clear()},isEnabled:function(){var rt,et=de.length;if(!et)return!0;rt=He?new Date().getTime()/1e3:ot.currentTime;for(var ft=0;ft<et;ft+=1){var yt=de.start(ft),_t=de.end(ft);if(yt<=rt&&rt<_t)return!0}return!1}},de=(0,m.Z)(Tt).create(),ye}T.__dashjs_factory_name="RangeController";var U=dashjs.FactoryMaker.getClassFactory(T);function x(){return{serialise:function K(ye){var de,He,Tt=[],ot=[];for(de in ye)if(ye.hasOwnProperty(de)&&de.indexOf("_")!==0){if((He=ye[de])==null&&(He=""),Array.isArray(He)){if(!He.length)continue;ot=[],He.forEach(function(rt){var et=Object.prototype.toString.call(rt).slice(8,-1)!=="Object";ot.push(et?rt:K(rt))}),He=ot.map(encodeURIComponent).join(",")}else typeof He=="string"?He=encodeURIComponent(He):He instanceof Date?He=He.toISOString():typeof He=="number"&&(He=Math.round(He));Tt.push(de+"="+He)}return Tt.join("&")}}}x.__dashjs_factory_name="MetricSerialiser";var _=dashjs.FactoryMaker.getSingletonFactory(x);function I(){var K,ye,de,He=window.crypto||window.msCrypto,Tt=Uint32Array,ot=Math.pow(2,8*Tt.BYTES_PER_ELEMENT)-1;function rt(){He&&(K||(K=new Tt(10)),He.getRandomValues(K),ye=0)}return de={random:function(et,ft){var yt;return et||(et=0),ft||(ft=1),He?(ye===K.length&&rt(),yt=K[ye]/ot,ye+=1):yt=Math.random(),yt*(ft-et)+et}},rt(),de}I.__dashjs_factory_name="RNG";var R=dashjs.FactoryMaker.getSingletonFactory(I),j=w(5717);function z(K){var ye;K=K||{};var de,He,Tt,ot,rt,et,ft,yt=this.context,_t=[],Ct=K.metricsConstants;function hn(){ot=!1,rt=!1,et=null,ft=null}return ye={report:function(Xt,nn){Array.isArray(nn)||(nn=[nn]),rt&&ft.isEnabled()&&nn.forEach(function(Pt){var Un=de.serialise(Pt);Xt!==Ct.DVB_ERRORS&&(Un="metricname=".concat(Xt,"&").concat(Un)),function(gr,Pr,dr){var ei=new XMLHttpRequest;ei.withCredentials=He.getXHRWithCredentialsForType(Ct.HTTP_REQUEST_DVB_REPORTING_TYPE);var Ji=function(){var Or=_t.indexOf(ei);Or!==-1&&(_t.splice(Or,1),!(ei.status>=200&&ei.status<300)&&dr&&dr())};_t.push(ei);try{ei.open("GET",gr),ei.onloadend=Ji,ei.onerror=Ji,ei.send()}catch(Or){ei.onerror()}}(Un="".concat(et,"?").concat(Un),0,function(){rt=!1})})},initialize:function(Xt,nn){var Pt;if(ft=nn,!(et=Xt.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");ot||((Pt=Xt.dvbProbability)&&(Pt===1e3||Pt/1e3>=Tt.random())&&(rt=!0),ot=!0)},reset:function(){hn()}},de=_(yt).getInstance(),Tt=R(yt).getInstance(),He=(0,j.Z)(yt).getInstance(),hn(),ye}z.__dashjs_factory_name="DVBReporting";var W=dashjs.FactoryMaker.getClassFactory(z);function X(K){K=K||{};var ye,de={"urn:dvb:dash:reporting:2014":W},He=this.context,Tt=K.debug?K.debug.getLogger(ye):{},ot=K.metricsConstants,rt=K.mediaPlayerModel||{};return{create:function(et,ft){var yt;try{(yt=de[et.schemeIdUri](He).create({metricsConstants:ot,mediaPlayerModel:rt})).initialize(et,ft)}catch(_t){yt=null,Tt.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(et.schemeIdUri," (").concat(_t.message,")"))}return yt},register:function(et,ft){de[et]=ft},unregister:function(et){delete de[et]}}}X.__dashjs_factory_name="ReportingFactory";var le=dashjs.FactoryMaker.getSingletonFactory(X);function N(K){var ye=[],de=le(this.context).getInstance(K);return{initialize:function(He,Tt){He.some(function(ot){var rt=de.create(ot,Tt);if(rt)return ye.push(rt),!0})},reset:function(){ye.forEach(function(He){return He.reset()}),ye=[]},report:function(He,Tt){ye.forEach(function(ot){return ot.report(He,Tt)})}}}N.__dashjs_factory_name="ReportingController";var $=dashjs.FactoryMaker.getClassFactory(N);function fe(){return{reconstructFullMetricName:function(K,ye,de){var He=K;return ye&&(He+="("+ye,de&&de.length&&(He+=","+de),He+=")"),He},validateN:function(K){if(!K)throw new Error("missing n");if(isNaN(K))throw new Error("n is NaN");if(K<0)throw new Error("n must be positive");return K}}}fe.__dashjs_factory_name="HandlerHelpers";var oe=dashjs.FactoryMaker.getSingletonFactory(fe);function he(K){var ye,de,He,Tt,ot;K=K||{};var rt=this.context,et=oe(rt).getInstance(),ft=[],yt=K.metricsConstants;function _t(){var Ct=function(){try{return Object.keys(ft).map(function(hn){return ft[hn]}).reduce(function(hn,Xt){return hn.level<Xt.level?hn:Xt})}catch(hn){return}}();Ct&&ot!==Ct.t&&(ot=Ct.t,ye.report(He,Ct))}return{initialize:function(Ct,hn,Xt){hn&&(de=et.validateN(Xt),ye=hn,He=et.reconstructFullMetricName(Ct,Xt),Tt=setInterval(_t,de))},reset:function(){clearInterval(Tt),Tt=null,de=0,ye=null,ot=null},handleNewMetric:function(Ct,hn,Xt){Ct===yt.BUFFER_LEVEL&&(ft[Xt]=hn)}}}he.__dashjs_factory_name="BufferLevelHandler";var Ie=dashjs.FactoryMaker.getClassFactory(he),Xe=dashjs.FactoryMaker.getClassFactory(function(K){var ye,de=(K=K||{}).eventBus,He=K.metricsConstants;function Tt(){de.off(y.Z.METRICS_INITIALISATION_COMPLETE,Tt,this),de.trigger(y.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(ot,rt){rt&&(ye=rt,de.on(y.Z.METRICS_INITIALISATION_COMPLETE,Tt,this))},reset:function(){ye=null},handleNewMetric:function(ot,rt){ot===He.DVB_ERRORS&&ye&&ye.report(ot,rt)}}});function Ae(K){var ye,de,He,Tt,ot;K=K||{};var rt=[],et=oe(this.context).getInstance(),ft=K.metricsConstants;function yt(){var _t=rt;_t.length&&ye&&ye.report(Tt,_t),rt=[]}return{initialize:function(_t,Ct,hn,Xt){Ct&&(de=et.validateN(hn),ye=Ct,Xt&&Xt.length&&(He=Xt),Tt=et.reconstructFullMetricName(_t,hn,Xt),ot=setInterval(yt,de))},reset:function(){clearInterval(ot),ot=null,de=null,He=null,rt=[],ye=null},handleNewMetric:function(_t,Ct){_t===ft.HTTP_REQUEST&&(He&&He!==Ct.type||rt.push(Ct))}}}Ae.__dashjs_factory_name="HttpListHandler";var Ze=dashjs.FactoryMaker.getClassFactory(Ae);function it(){var K,ye;return{initialize:function(de,He){K=de,ye=He},reset:function(){ye=null,K=void 0},handleNewMetric:function(de,He){de===K&&ye&&ye.report(K,He)}}}it.__dashjs_factory_name="GenericMetricHandler";var ut=dashjs.FactoryMaker.getClassFactory(it);function $e(K){var ye,de=(K=K||{}).debug?K.debug.getLogger(ye):{},He=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,Tt=this.context,ot={BufferLevel:Ie,DVBErrors:Xe,HttpList:Ze,PlayList:ut,RepSwitchList:ut,TcpList:ut};return{create:function(rt,et){var ft,yt=rt.match(He);if(yt){try{(ft=ot[yt[1]](Tt).create({eventBus:K.eventBus,metricsConstants:K.metricsConstants})).initialize(yt[1],et,yt[3],yt[5])}catch(_t){ft=null,de.error("MetricsHandlerFactory: Could not create handler for type ".concat(yt[1]," with args ").concat(yt[3],", ").concat(yt[5]," (").concat(_t.message,")"))}return ft}},register:function(rt,et){ot[rt]=et},unregister:function(rt){delete ot[rt]}}}$e.__dashjs_factory_name="MetricsHandlerFactory";var lt=dashjs.FactoryMaker.getSingletonFactory($e);function At(K){K=K||{};var ye,de=[],He=this.context,Tt=K.eventBus,ot=K.events,rt=lt(He).getInstance({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants});function et(ft){de.forEach(function(yt){yt.handleNewMetric(ft.metric,ft.value,ft.mediaType)})}return ye={initialize:function(ft,yt){ft.split(",").forEach(function(_t,Ct,hn){var Xt;if(_t.indexOf("(")!==-1&&_t.indexOf(")")===-1){var nn=hn[Ct+1];nn&&nn.indexOf("(")===-1&&nn.indexOf(")")!==-1&&(_t+=","+nn,delete hn[Ct+1])}(Xt=rt.create(_t,yt))&&de.push(Xt)}),Tt.on(ot.METRIC_ADDED,et,ye),Tt.on(ot.METRIC_UPDATED,et,ye)},reset:function(){Tt.off(ot.METRIC_ADDED,et,ye),Tt.off(ot.METRIC_UPDATED,et,ye),de.forEach(function(ft){return ft.reset()}),de=[]}}}At.__dashjs_factory_name="MetricsHandlersController";var Oe=dashjs.FactoryMaker.getClassFactory(At);function Qe(K){var ye,de,He;K=K||{};var Tt=this.context;function ot(){ye&&ye.reset(),de&&de.reset(),He&&He.reset()}return{initialize:function(rt){try{(He=U(Tt).create({mediaElement:K.mediaElement})).initialize(rt.Range),(de=$(Tt).create({debug:K.debug,metricsConstants:K.metricsConstants,mediaPlayerModel:K.mediaPlayerModel})).initialize(rt.Reporting,He),(ye=Oe(Tt).create({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants,events:K.events})).initialize(rt.metrics,de)}catch(et){throw ot(),et}},reset:ot}}Qe.__dashjs_factory_name="MetricsController";var ct=dashjs.FactoryMaker.getClassFactory(Qe),Qt=function K(){(function(ye,de){if(!(ye instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.metrics="",this.Range=[],this.Reporting=[]},Kt=function K(){(function(ye,de){if(!(ye instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},St=function K(){(function(ye,de){if(!(ye instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function Lt(K){var ye=(K=K||{}).adapter,de=K.constants;return{getMetrics:function(He){var Tt=[];return He&&He.Metrics_asArray&&He.Metrics_asArray.forEach(function(ot){var rt=new Qt,et=ye.getIsDynamic(He);ot.hasOwnProperty("metrics")&&(rt.metrics=ot.metrics,ot.Range_asArray&&ot.Range_asArray.forEach(function(ft){var yt=new Kt;yt.starttime=function(_t,Ct,hn){var Xt,nn,Pt=0;return Ct?Pt=ye.getAvailabilityStartTime(_t)/1e3:(Xt=ye.getRegularPeriods(_t)).length&&(Pt=Xt[0].start),nn=Pt,hn&&hn.hasOwnProperty(de.START_TIME)&&(nn+=hn.starttime),nn}(He,et,ft),ft.hasOwnProperty("duration")?yt.duration=ft.duration:yt.duration=ye.getDuration(He),yt._useWallClockTime=et,rt.Range.push(yt)}),ot.Reporting_asArray&&(ot.Reporting_asArray.forEach(function(ft){var yt=new St;ft.hasOwnProperty(de.SCHEME_ID_URI)&&(yt.schemeIdUri=ft.schemeIdUri,ft.hasOwnProperty("value")&&(yt.value=ft.value),ft.hasOwnProperty(de.DVB_REPORTING_URL)&&(yt.dvbReportingUrl=ft[de.DVB_REPORTING_URL]),ft.hasOwnProperty(de.DVB_PROBABILITY)&&(yt.dvbProbability=ft[de.DVB_PROBABILITY]),rt.Reporting.push(yt))}),Tt.push(rt)))}),Tt}}}Lt.__dashjs_factory_name="ManifestParsing";var Ce=dashjs.FactoryMaker.getSingletonFactory(Lt);function te(K){var ye;K=K||{};var de={},He=this.context,Tt=K.eventBus,ot=K.events;function rt(ft){if(!ft.error){var yt=Object.keys(de);Ce(He).getInstance({adapter:K.adapter,constants:K.constants}).getMetrics(ft.manifest).forEach(function(_t){var Ct=JSON.stringify(_t);if(de.hasOwnProperty(Ct))yt.splice(Ct,1);else try{var hn=ct(He).create(K);hn.initialize(_t),de[Ct]=hn}catch(Xt){}}),yt.forEach(function(_t){de[_t].reset(),delete de[_t]}),Tt.trigger(y.Z.METRICS_INITIALISATION_COMPLETE)}}function et(){Object.keys(de).forEach(function(ft){de[ft].reset()}),de={}}return ye={reset:function(){Tt.off(ot.MANIFEST_UPDATED,rt,ye),Tt.off(ot.STREAM_TEARDOWN_COMPLETE,et,ye)}},Tt.on(ot.MANIFEST_UPDATED,rt,ye),Tt.on(ot.STREAM_TEARDOWN_COMPLETE,et,ye),ye}te.__dashjs_factory_name="MetricsCollectionController";var Fe=dashjs.FactoryMaker.getClassFactory(te);function O(){var K=this.context;return{createMetricsReporting:function(ye){return D(K).getInstance({eventBus:ye.eventBus,dashMetrics:ye.dashMetrics,metricsConstants:ye.metricsConstants,events:ye.events}).initialize(),Fe(K).create(ye)},getReportingFactory:function(){return le(K).getInstance()},getMetricsHandlerFactory:function(){return lt(K).getInstance()}}}O.__dashjs_factory_name="MetricsReporting";var M=dashjs.FactoryMaker.getClassFactory(O);M.events=y.Z,dashjs.FactoryMaker.updateClassFactory(O.__dashjs_factory_name,M);var q=M},1180:function(b,g,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function C(m,T){return C=Object.setPrototypeOf||function(U,x){return U.__proto__=x,U},C(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(I,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(R&&R.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),R&&C(I,R)})(_,m);var T,U,x=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,R=v(T);if(U){var j=v(this).constructor;I=Reflect.construct(R,arguments,j)}else I=R.apply(this,arguments);return y(this,I)});function _(){var I;return function(R,j){if(!(R instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=x.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",I.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",I.CMCD_DATA_GENERATED="cmcdDataGenerated",I}return _}(w(8342).Z));g.Z=D},5717:function(b,g,w){var F=w(2610),C=w(5448),y=w(1264),v=w(3106),D=w(1767),m=w(3393);function T(){var U,x,_,I,R,j,z,W,X=this.context,le=(0,y.Z)(X).getInstance();function N(){I=[],R=[],j=[],W=[],z=null,x=[]}function $(Ie,Xe){var Ae=-1;Ie.some(function(Ze,it){if(Ze===Xe)return Ae=it,!0}),Ae<0||Ie.splice(Ae,1)}function fe(Ie){var Xe;for(Xe=0;Xe<W.length;Xe++)if(W[Xe].rulename===Ie)return Xe;return-1}function oe(Ie,Xe){he(Ie,Xe);var Ae=new F.Z;Ae.schemeIdUri=Ie,Ae.value=Xe,x.push(Ae)}function he(Ie,Xe){(0,v.PS)(Ie,"string"),(0,v.PS)(Xe,"string"),x.forEach(function(Ae,Ze){Ae.schemeIdUri===Ie&&Ae.value===Xe&&x.splice(Ze,1)})}return U={getCustomInitialTrackSelectionFunction:function(){return z},setCustomInitialTrackSelectionFunction:function(Ie){z=Ie},resetCustomInitialTrackSelectionFunction:function(){z=null},getLicenseResponseFilters:function(){return R},getLicenseRequestFilters:function(){return I},getCustomCapabilitiesFilters:function(){return j},registerCustomCapabilitiesFilter:function(Ie){j.push(Ie)},registerLicenseResponseFilter:function(Ie){R.push(Ie)},registerLicenseRequestFilter:function(Ie){I.push(Ie)},unregisterCustomCapabilitiesFilter:function(Ie){$(j,Ie)},unregisterLicenseResponseFilter:function(Ie){$(R,Ie)},unregisterLicenseRequestFilter:function(Ie){$(I,Ie)},addAbrCustomRule:function(Ie,Xe,Ae){if(typeof Ie!="string"||Ie!==D.Z.ABANDON_FRAGMENT_RULES&&Ie!==D.Z.QUALITY_SWITCH_RULES||typeof Xe!="string")throw m.Z.BAD_ARGUMENT_ERROR;var Ze=fe(Xe);Ze===-1?W.push({type:Ie,rulename:Xe,rule:Ae}):(W[Ze].type=Ie,W[Ze].rule=Ae)},removeAllAbrCustomRule:function(){W=[]},removeAbrCustomRule:function(Ie){if(Ie){var Xe=fe(Ie);Xe!==-1&&W.splice(Xe,1)}else W=[]},getAbrCustomRules:function(){return W},addUTCTimingSource:oe,removeUTCTimingSource:he,getUTCTimingSources:function(){return x},clearDefaultUTCTimingSources:function(){x=[]},restoreDefaultUTCTimingSources:function(){var Ie=le.get().streaming.utcSynchronization.defaultTimingSource;oe(Ie.scheme,Ie.value)},setXHRWithCredentialsForType:function Ie(Xe,Ae){Xe?_[Xe]=!!Ae:Object.keys(_).forEach(function(Ze){Ie(Ze,Ae)})},getXHRWithCredentialsForType:function(Ie){var Xe=_[Ie];return Xe===void 0?_.default:Xe},setConfig:function(){},reset:function(){N()}},_={default:!1},N(),U}T.__dashjs_factory_name="CustomParametersModel",g.Z=C.Z.getSingletonFactory(T)},9032:function(b,g,w){var F=w(5448),C=w(7473);function y(D){var m=(D=D||{}).requestModifier;function T(U){var x=new Date,_=U.request,I=new XMLHttpRequest;if(I.open(U.method,U.url,!0),_.responseType&&(I.responseType=_.responseType),_.range&&I.setRequestHeader("Range","bytes="+_.range),_.requestStartDate||(_.requestStartDate=x),m&&m.modifyRequestHeader&&(I=m.modifyRequestHeader(I,{url:U.url})),U.headers)for(var R in U.headers){var j=U.headers[R];j&&I.setRequestHeader(R,j)}I.withCredentials=U.withCredentials,I.onload=U.onload,I.onloadend=U.onend,I.onerror=U.onerror,I.onprogress=U.progress,I.onabort=U.onabort,I.ontimeout=U.ontimeout,I.timeout=U.timeout,I.send(),U.response=I}return{load:function(U){m&&m.modifyRequest?(0,C.k)(U,m).then(function(){return T(U)}):T(U)},abort:function(U){var x=U.response;x.onloadend=x.onerror=x.onprogress=void 0,x.abort()}}}y.__dashjs_factory_name="XHRLoader";var v=F.Z.getClassFactory(y);g.Z=v},1737:function(b,g,w){function F(tn,sn){for(var an=0;an<sn.length;an++){var wt=sn[an];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(tn,wt.key,wt)}}w.d(g,{default:function(){return Ou}});var C={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},y=function(){function tn(){(function(wt,zt){if(!(wt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn)}var sn,an;return sn=tn,an=[{key:"findCencContentProtection",value:function(wt){for(var zt=null,xt=0;xt<wt.length;++xt){var Vt=wt[xt];Vt.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||Vt.value.toLowerCase()!=="cenc"&&Vt.value.toLowerCase()!=="cbcs"||(zt=Vt)}return zt}},{key:"getPSSHData",value:function(wt){var zt=8,xt=new DataView(wt),Vt=xt.getUint8(zt);return zt+=20,Vt>0&&(zt+=4+16*xt.getUint32(zt)),zt+=4,wt.slice(zt)}},{key:"getPSSHForKeySystem",value:function(wt,zt){var xt=tn.parsePSSHList(zt);return wt&&xt.hasOwnProperty(wt.uuid.toLowerCase())?xt[wt.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(wt,zt){return"pssh"in wt?(wt.pssh.__text=wt.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),zt.decodeArray(wt.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(wt){if(wt==null)return[];for(var zt=new DataView(wt.buffer||wt),xt={},Vt=0;;){var mn,In,Zn=void 0,Cn=Vt;if(Vt>=zt.buffer.byteLength)break;if(mn=Vt+zt.getUint32(Vt),Vt+=4,zt.getUint32(Vt)===1886614376)if(Vt+=4,(In=zt.getUint8(Vt))===0||In===1){Vt++,Vt+=3,Zn="";var Rn=void 0,on=void 0;for(Rn=0;Rn<4;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=4,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=2,Zn+="-",Rn=0;Rn<6;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;Vt+=6,Vt+=4,xt[Zn=Zn.toLowerCase()]=zt.buffer.slice(Cn,mn),Vt=mn}else Vt=mn;else Vt=mn}return xt}},{key:"getLicenseServerUrlFromMediaInfo",value:function(wt,zt){try{if(!wt||wt.length===0)return null;for(var xt=0,Vt=null;xt<wt.length&&!Vt;){var mn=wt[xt];if(mn&&mn.contentProtection&&mn.contentProtection.length>0){var In=mn.contentProtection.filter(function(er){return er.schemeIdUri&&er.schemeIdUri===zt});if(In&&In.length>0)for(var Zn=0;Zn<In.length&&!Vt;){for(var Cn=In[Zn],Rn=0;Rn<C.attributes.length&&!Vt;){for(var on=0,Bn=C.attributes[Rn];on<C.prefixes.length&&!Vt;){var kn=C.prefixes[on];Cn[Bn]&&Cn[Bn].__prefix&&Cn[Bn].__prefix===kn&&Cn[Bn].__text&&(Vt=Cn[Bn].__text),on+=1}Rn+=1}Zn+=1}}xt+=1}return Vt}catch(er){return null}}}],an&&F(sn,an),tn}(),v=function tn(sn,an){(function(wt,zt){if(!(wt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.contentType=sn,this.robustness=an},D=function tn(sn,an,wt,zt,xt){(function(Vt,mn){if(!(Vt instanceof mn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initDataTypes=["cenc"],sn&&sn.length&&(this.audioCapabilities=sn),an&&an.length&&(this.videoCapabilities=an),this.distinctiveIdentifier=wt,this.persistentState=zt,this.sessionTypes=xt};function m(tn){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},m(tn)}function T(tn,sn){return T=Object.setPrototypeOf||function(an,wt){return an.__proto__=wt,an},T(tn,sn)}function U(tn,sn){return!sn||m(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function x(tn){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},x(tn)}var _=new(function(tn){(function(xt,Vt){if(typeof Vt!="function"&&Vt!==null)throw new TypeError("Super expression must either be null or a function");xt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:xt,writable:!0,configurable:!0}}),Vt&&T(xt,Vt)})(zt,tn);var sn,an,wt=(sn=zt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(xt){return!1}}(),function(){var xt,Vt=x(sn);if(an){var mn=x(this).constructor;xt=Reflect.construct(Vt,arguments,mn)}else xt=Vt.apply(this,arguments);return U(this,xt)});function zt(){var xt;return function(Vt,mn){if(!(Vt instanceof mn))throw new TypeError("Cannot call a class as a function")}(this,zt),(xt=wt.call(this)).MEDIA_KEYERR_CODE=100,xt.MEDIA_KEYERR_UNKNOWN_CODE=101,xt.MEDIA_KEYERR_CLIENT_CODE=102,xt.MEDIA_KEYERR_SERVICE_CODE=103,xt.MEDIA_KEYERR_OUTPUT_CODE=104,xt.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,xt.MEDIA_KEYERR_DOMAIN_CODE=106,xt.MEDIA_KEY_MESSAGE_ERROR_CODE=107,xt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,xt.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,xt.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,xt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,xt.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,xt.KEY_SESSION_CREATED_ERROR_CODE=113,xt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,xt.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",xt.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",xt.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",xt.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",xt.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",xt.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",xt.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",xt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",xt.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",xt.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",xt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",xt.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",xt.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",xt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",xt}return zt}(w(2230).Z)),I=w(5459),R=function tn(sn,an,wt,zt,xt,Vt,mn,In){(function(Zn,Cn){if(!(Zn instanceof Cn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.method=an,this.responseType=wt,this.headers=zt,this.withCredentials=xt,this.messageType=Vt,this.sessionId=mn,this.data=In},j=function tn(sn,an,wt){(function(zt,xt){if(!(zt instanceof xt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.headers=an,this.data=wt},z=w(7855),W=w(703),X=w(3393),le=w(5448);function N(tn){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},N(tn)}function $(tn){var sn,an,wt,zt,xt,Vt,mn,In,Zn,Cn,Rn,on=(tn=tn||{}).protectionKeyController,Bn=tn.protectionModel,kn=tn.eventBus,er=tn.events,Er=tn.debug,Ur=tn.BASE64,Vn=tn.constants,rn=[],cn=tn.cmcdModel,bn=tn.settings,Jn=tn.customParametersModel;function ar(){if(!(kn&&kn.hasOwnProperty("on")&&on&&on.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function br(_n,Xn){In||Zn?In&&Lr():function(hr,ti){if(!Zn){Zn=!0;var Mr,Bi=[];hr=hr.sort(function(Pi,ui){return(xt&&xt[Pi.ks.systemString]&&xt[Pi.ks.systemString].priority>=0?xt[Pi.ks.systemString].priority:hr.length)-(xt&&xt[ui.ks.systemString]&&xt[ui.ks.systemString].priority>=0?xt[ui.ks.systemString].priority:hr.length)});for(var Xr=0;Xr<hr.length;Xr++){var ra=Ao(hr[Xr]);Bi.push({ks:hr[Xr].ks,configs:[ra],protData:hr[Xr].protData})}Bn.requestKeySystemAccess(Bi).then(function(Pi){var ui=(Mr=Pi.data).mksa&&Mr.mksa.selectedSystemString?Mr.mksa.selectedSystemString:Mr.keySystem.systemString;return an.info("DRM: KeySystem Access Granted for system string ("+ui+")!  Selecting key system..."),Bn.selectKeySystem(Mr)}).then(function(Pi){if(In=Pi,Zn=!1,Bn){kn.trigger(er.KEY_SYSTEM_SELECTED,{data:Mr});var ui=qr(In);ui&&ui.serverCertificate&&ui.serverCertificate.length>0&&Bn.setServerCertificate(Ur.decodeArray(ui.serverCertificate).buffer),Lr()}}).catch(function(Pi){In=null,Zn=!1,ti||kn.trigger(er.KEY_SYSTEM_SELECTED,{data:null,error:new I.Z(_.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,_.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Pi.error)})})}}(_n,Xn)}function Lr(){for(var _n,Xn=0;Xn<wt.length;Xn++)for(_n=0;_n<wt[Xn].length;_n++)if(In===wt[Xn][_n].ks){Yi(wt[Xn][_n]);break}wt=[]}function Yi(_n){if(on.isClearKey(In)&&_n.protData&&_n.protData.hasOwnProperty("clearkeys")&&Object.keys(_n.protData.clearkeys).length!==0){var Xn={kids:Object.keys(_n.protData.clearkeys)};_n.initData=new TextEncoder().encode(JSON.stringify(Xn))}_n.sessionId?no(_n):_n.initData!==null&&Br(_n)}function no(_n){ar(),Bn.loadKeySession(_n)}function Br(_n){var Xn=y.getPSSHForKeySystem(In,_n?_n.initData:null);if(Xn){if(function(hr){if(!hr)return!1;try{for(var ti=Bn.getSessions(),Mr=0;Mr<ti.length;Mr++)if(ti[Mr].getKeyId()===hr)return!0;return!1}catch(Bi){return!1}}(_n.keyId)||hi(Xn))return;try{_n.initData=Xn,Bn.createKeySession(_n)}catch(hr){kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+hr.message)})}}else _n&&_n.initData?Bn.createKeySession(_n):kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(In?In.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function qr(_n){if(_n){var Xn=_n.systemString;if(xt)return Xn in xt?xt[Xn]:null}return null}function hi(_n){if(!_n)return!1;try{for(var Xn=Bn.getAllInitData(),hr=0;hr<Xn.length;hr++)if(on.initDataEquals(_n,Xn[hr]))return an.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(ti){return!1}}function vi(_n){ar(),_n?(Bn.setMediaElement(_n),kn.on(er.NEED_KEY,Os,sn)):_n===null&&(Bn.setMediaElement(_n),kn.off(er.NEED_KEY,Os,sn))}function Ao(_n){var Xn=_n.protData,hr=[],ti=[],Mr=Xn&&Xn.audioRobustness&&Xn.audioRobustness.length>0?Xn.audioRobustness:mn,Bi=Xn&&Xn.videoRobustness&&Xn.videoRobustness.length>0?Xn.videoRobustness:mn,Xr=_n.sessionType,ra=Xn&&Xn.distinctiveIdentifier?Xn.distinctiveIdentifier:"optional",Pi=Xn&&Xn.persistentState?Xn.persistentState:Xr==="temporary"?"optional":"required";return zt.forEach(function(ui){ui.type===Vn.AUDIO?hr.push(new v(ui.codec,Mr)):ui.type===Vn.VIDEO&&ti.push(new v(ui.codec,Bi))}),new D(hr,ti,ra,Pi,[Xr])}function ro(_n){_n.error?kn.trigger(er.KEY_STATUSES_CHANGED,{data:null,error:_n.error}):an.debug("DRM: key status = "+_n.status)}function na(_n){an.debug("DRM: onKeyMessage");var Xn=_n.data;kn.trigger(er.KEY_MESSAGE,{data:Xn});var hr=Xn.messageType?Xn.messageType:"license-request",ti=Xn.message,Mr=Xn.sessionToken,Bi=qr(In),Xr=on.getLicenseServerModelInstance(In,Bi,hr),ra={sessionToken:Mr,messageType:hr};if(ti&&ti.byteLength!==0){if(!Xr)return an.debug("DRM: License server request not required for this message (type = "+_n.data.messageType+").  Session ID = "+Mr.getSessionId()),void Ci(ra);if(on.isClearKey(In)){var Pi=on.processClearKeyLicenseRequest(In,Bi,ti);if(Pi&&Pi.keyPairs&&Pi.keyPairs.length>0)return an.debug("DRM: ClearKey license request handled by application!"),Ci(ra),void Bn.updateKeySession(Mr,Pi)}(function(ui,Io,Wi){var qo=ui.sessionToken,ia=ui.messageType?ui.messageType:"license-request",pt={sessionToken:qo,messageType:ia},oa=In?In.systemString:null,Ls=function(Nr,Es,_s,Yr,Tc){var Ia=null,Cl=Yr.message;if(Nr&&Nr.serverURL){var ua=Nr.serverURL;typeof ua=="string"&&ua!==""?Ia=ua:N(ua)==="object"&&ua.hasOwnProperty(Es)&&(Ia=ua[Es])}else if(Nr&&Nr.laURL&&Nr.laURL!=="")Ia=Nr.laURL;else if(!(Ia=y.getLicenseServerUrlFromMediaInfo(zt,In.schemeIdURI))&&!on.isClearKey(In)){var Ts=y.getPSSHData(_s.initData);(Ia=In.getLicenseServerURLFromInitData(Ts))||(Ia=Yr.laURL)}return Ia=Tc.getServerURLFromMessage(Ia,Cl,Es)}(Wi,ia,qo,ui,Io);if(Ls){var pr={},bo=!1;Wi&&Ec(pr,Wi.httpRequestHeaders);var cu=ui.message;Ec(pr,In.getRequestHeadersFromMessage(cu)),Object.keys(pr).forEach(function(Nr){Nr.toLowerCase()==="authorization"&&(bo=!0)}),Wi&&typeof Wi.withCredentials=="boolean"&&(bo=Wi.withCredentials);var bl=function(Nr){if(Bn)if(Nr.status>=200&&Nr.status<=299){var Es=W.Z.parseHttpHeaders(Nr.getAllResponseHeaders?Nr.getAllResponseHeaders():null),_s=new j(Nr.responseURL,Es,Nr.response);si(Jn.getLicenseResponseFilters(),_s).then(function(){var Yr=Io.getLicenseMessage(_s.data,oa,ia);Yr!==null?(Ci(pt),Bn.updateKeySession(qo,Yr)):xf(Nr,pt,oa,ia,Io)})}else xf(Nr,pt,oa,ia,Io)},vs=function(Nr){Ci(pt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+oa+' update, XHR aborted. status is "'+Nr.statusText+'" ('+Nr.status+"), readyState is "+Nr.readyState))},Ha=function(Nr){Ci(pt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+oa+' update, XHR error. status is "'+Nr.statusText+'" ('+Nr.status+"), readyState is "+Nr.readyState))},Lu=In.getLicenseRequestFromMessage(cu),ku=Io.getHTTPMethod(ia),aa=Io.getResponseType(oa,ia),sa=Wi&&!isNaN(Wi.httpTimeout)?Wi.httpTimeout:8e3,fu=qo.getSessionId()||null,ys=new R(Ls,ku,aa,pr,bo,ia,fu,Lu),_c=isNaN(bn.get().streaming.retryAttempts[z.w.LICENSE])?3:bn.get().streaming.retryAttempts[z.w.LICENSE];si(Jn.getLicenseRequestFilters(),ys).then(function(){Il(ys,_c,sa,bl,vs,Ha)})}else Ci(pt,new I.Z(_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(Xn,Xr,Bi)}else Ci(ra,new I.Z(_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Ci(_n,Xn){kn.trigger(er.LICENSE_REQUEST_COMPLETE,{data:_n,error:Xn})}function Il(_n,Xn,hr,ti,Mr,Bi){var Xr=new XMLHttpRequest;if(bn.get().streaming.cmcd&&bn.get().streaming.cmcd.enabled&&bn.get().streaming.cmcd.mode===X.Z.CMCD_MODE_QUERY){var ra=cn.getQueryParameter({url:_n.url,type:z.w.LICENSE});ra&&(_n.url=W.Z.addAditionalQueryParameterToUrl(_n.url,[ra]))}for(var Pi in Xr.open(_n.method,_n.url,!0),Xr.responseType=_n.responseType,Xr.withCredentials=_n.withCredentials,hr>0&&(Xr.timeout=hr),_n.headers)Xr.setRequestHeader(Pi,_n.headers[Pi]);if(bn.get().streaming.cmcd&&bn.get().streaming.cmcd.enabled&&bn.get().streaming.cmcd.mode===X.Z.CMCD_MODE_HEADER){var ui=cn.getHeaderParameters({url:_n.url,type:z.w.LICENSE});if(ui)for(var Io in ui){var Wi=ui[Io];Wi&&Xr.setRequestHeader(Io,Wi)}}var qo=function(){Xn--;var ia=isNaN(bn.get().streaming.retryIntervals[z.w.LICENSE])?1e3:bn.get().streaming.retryIntervals[z.w.LICENSE];Rn=setTimeout(function(){Il(_n,Xn,hr,ti,Mr,Bi)},ia)};Xr.onload=function(){Cn=null,this.status>=200&&this.status<=299||Xn<=0?ti(this):(an.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+Xn),qo())},Xr.ontimeout=Xr.onerror=function(){Cn=null,Xn<=0?Bi(this):(an.warn("License request network request failed . Retrying it... Pending retries: "+Xn),qo())},Xr.onabort=function(){Mr(this)},kn.trigger(er.LICENSE_REQUEST_SENDING,{url:_n.url,headers:_n.headers,payload:_n.data,sessionId:_n.sessionId}),Cn=Xr,Xr.send(_n.data)}function lu(){Cn&&(Cn.onloadend=Cn.onerror=Cn.onprogress=void 0,Cn.abort(),Cn=null),Rn&&(clearTimeout(Rn),Rn=null)}function Ec(_n,Xn){if(Xn)for(var hr in Xn)_n[hr]=Xn[hr]}function xf(_n,Xn,hr,ti,Mr){var Bi="NONE",Xr=null;_n.response&&(Bi=Mr.getErrorResponse(_n.response,hr,ti),Xr={serverResponse:_n.response||null,responseCode:_n.status||null,responseText:_n.statusText||null}),Ci(Xn,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+hr+' update, XHR complete. status is "'+_n.statusText+'" ('+_n.status+"), readyState is "+_n.readyState+".  Response is "+Bi,Xr))}function si(_n,Xn){return _n?_n.reduce(function(hr,ti){return hr.then(function(){return ti(Xn)})},Promise.resolve()):Promise.resolve()}function Os(_n,Xn){if(!bn.get().streaming.protection.ignoreEmeEncryptedEvent){if(an.debug("DRM: onNeedKey"),_n.key.initDataType!=="cenc")return void an.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+_n.key.initDataType);if(zt.length===0&&(an.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(Xn=Xn===void 0?1:Xn+1)<5))return void rn.push(setTimeout(function(){Os(_n,Xn)},500));var hr=_n.key.initData;if(ArrayBuffer.isView(hr)&&(hr=hr.buffer),In){var ti=y.getPSSHForKeySystem(In,hr);if(ti&&hi(ti))return}an.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(hr)));var Mr=on.getSupportedKeySystemsFromSegmentPssh(hr,xt,Vt);if(Mr.length===0)return void an.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Bi){wt.push(Bi),br(Bi,!1)})(Mr)}}return sn={initializeForMedia:function(_n){if(!_n)throw new Error("mediaInfo can not be null or undefined");ar(),zt.push(_n)},clearMediaInfoArray:function(){zt=[]},handleKeySystemFromManifest:function(){if(zt&&zt.length!==0){var _n=[];zt.forEach(function(Xn){var hr=on.getSupportedKeySystemsFromContentProtection(Xn.contentProtection,xt,Vt);hr.length>0&&(_n.length===0&&(_n=hr),wt.push(hr))}),_n&&_n.length>0&&br(_n,!0)}},createKeySession:Br,loadKeySession:no,removeKeySession:function(_n){ar(),Bn.removeKeySession(_n)},closeKeySession:function(_n){ar(),Bn.closeKeySession(_n)},setServerCertificate:function(_n){ar(),Bn.setServerCertificate(_n)},setMediaElement:vi,setSessionType:function(_n){Vt=_n},setRobustnessLevel:function(_n){mn=_n},setProtectionData:function(_n){xt=_n,on.setProtectionData(_n)},getSupportedKeySystemsFromContentProtection:function(_n){return ar(),on.getSupportedKeySystemsFromContentProtection(_n,xt,Vt)},getKeySystems:function(){return on?on.getKeySystems():[]},setKeySystems:function(_n){on&&on.setKeySystems(_n)},stop:function(){lu(),Bn&&Bn.stop()},reset:function(){kn.off(er.INTERNAL_KEY_MESSAGE,na,sn),kn.off(er.INTERNAL_KEY_STATUS_CHANGED,ro,sn),ar(),lu(),vi(null),In=null,Zn=!1,Bn&&(Bn.reset(),Bn=null),rn.forEach(function(_n){return clearTimeout(_n)}),rn=[],zt=[],wt=[]}},an=Er.getLogger(sn),wt=[],zt=[],Vt="temporary",mn="",Cn=null,Rn=null,kn.on(er.INTERNAL_KEY_MESSAGE,na,sn),kn.on(er.INTERNAL_KEY_STATUS_CHANGED,ro,sn),sn}$.__dashjs_factory_name="ProtectionController";var fe=le.Z.getClassFactory($),oe=function tn(sn,an){(function(wt,zt){if(!(wt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keyID=sn,this.key=an};function he(tn,sn){for(var an=0;an<sn.length;an++){var wt=sn[an];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(tn,wt.key,wt)}}var Ie=function(){function tn(wt,zt){if(function(xt,Vt){if(!(xt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,tn),zt&&zt!=="persistent"&&zt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=wt,this.type=zt}var sn,an;return sn=tn,(an=[{key:"toJWK",value:function(){var wt,zt=this.keyPairs.length,xt={keys:[]};for(wt=0;wt<zt;wt++){var Vt={kty:"oct",alg:"A128KW",kid:this.keyPairs[wt].keyID,k:this.keyPairs[wt].key};xt.keys.push(Vt)}this.type&&(xt.type=this.type);var mn=JSON.stringify(xt),In=mn.length,Zn=new ArrayBuffer(In),Cn=new Uint8Array(Zn);for(wt=0;wt<In;wt++)Cn[wt]=mn.charCodeAt(wt);return Zn}}])&&he(sn.prototype,an),tn}();function Xe(tn,sn){for(var an=0;an<sn.length;an++){var wt=sn[an];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(tn,wt.key,wt)}}var Ae=new(function(){function tn(){(function(wt,zt){if(!(wt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.init()}var sn,an;return sn=tn,(an=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Xe(sn.prototype,an),tn}()),Ze="e2719d58-a985-b3c9-781a-b030af78d30e",it=Ae.CLEARKEY_KEYSTEM_STRING,ut="urn:uuid:"+Ze;function $e(tn){var sn=(tn=tn||{}).BASE64;return{uuid:Ze,schemeIdURI:ut,systemString:it,getInitData:function(an,wt){try{var zt=y.parseInitDataFromContentProtection(an,sn);if(!zt&&wt){var xt={kids:[function(Vt){try{var mn=Vt.replace(/-/g,"");return(mn=btoa(mn.match(/\w{2}/g).map(function(In){return String.fromCharCode(parseInt(In,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(In){return null}}(wt["cenc:default_KID"])]};zt=new TextEncoder().encode(JSON.stringify(xt))}return zt}catch(Vt){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(an){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(an))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(an,wt){var zt=null;if(an){for(var xt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(wt))),Vt=[],mn=0;mn<xt.kids.length;mn++){var In=xt.kids[mn],Zn=an.clearkeys&&an.clearkeys.hasOwnProperty(In)?an.clearkeys[In]:null;if(!Zn)throw new Error("DRM: ClearKey keyID ("+In+") is not known!");Vt.push(new oe(In,Zn))}zt=new Ie(Vt)}return zt}}}$e.__dashjs_factory_name="KeySystemClearKey";var lt=dashjs.FactoryMaker.getSingletonFactory($e),At="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Oe=Ae.CLEARKEY_KEYSTEM_STRING,Qe="urn:uuid:"+At;function ct(tn){var sn,an=tn.BASE64,wt=tn.debug.getLogger(sn);return{uuid:At,schemeIdURI:Qe,systemString:Oe,getInitData:function(zt){return y.parseInitDataFromContentProtection(zt,an)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(zt){return new Uint8Array(zt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(zt,xt){var Vt=null;if(zt){for(var mn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(xt))),In=[],Zn=0;Zn<mn.kids.length;Zn++){var Cn=mn.kids[Zn],Rn=zt.clearkeys&&zt.clearkeys.hasOwnProperty(Cn)?zt.clearkeys[Cn]:null;if(!Rn)throw new Error("DRM: ClearKey keyID ("+Cn+") is not known!");In.push(new oe(Cn,Rn))}Vt=new Ie(In),wt.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return Vt}}}ct.__dashjs_factory_name="KeySystemW3CClearKey";var Qt=dashjs.FactoryMaker.getSingletonFactory(ct),Kt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",St=Ae.WIDEVINE_KEYSTEM_STRING,Lt="urn:uuid:"+Kt;function Ce(tn){var sn=(tn=tn||{}).BASE64;return{uuid:Kt,schemeIdURI:Lt,systemString:St,getInitData:function(an){return y.parseInitDataFromContentProtection(an,sn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(an){return new Uint8Array(an)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Ce.__dashjs_factory_name="KeySystemWidevine";var te=dashjs.FactoryMaker.getSingletonFactory(Ce),Fe="9a04f079-9840-4286-ab92-e65be0885f95",O=Ae.PLAYREADY_KEYSTEM_STRING,M="urn:uuid:"+Fe;function q(tn){var sn="utf-16",an=(tn=tn||{}).BASE64,wt=tn.settings;function zt(){if(!an||!an.hasOwnProperty("decodeArray")||!an.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Fe,schemeIdURI:M,systemString:O,getInitData:function(xt){var Vt,mn,In,Zn,Cn,Rn=new Uint8Array([112,115,115,104,0,0,0,0]),on=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),Bn=0,kn=null;if(zt(),!xt)return null;if("pssh"in xt)return y.parseInitDataFromContentProtection(xt,an);if("pro"in xt)kn=an.decodeArray(xt.pro.__text);else{if(!("prheader"in xt))return null;kn=an.decodeArray(xt.prheader.__text)}return Vt=kn.length,mn=4+Rn.length+on.length+4+Vt,In=new ArrayBuffer(mn),Zn=new Uint8Array(In),(Cn=new DataView(In)).setUint32(Bn,mn),Bn+=4,Zn.set(Rn,Bn),Bn+=Rn.length,Zn.set(on,Bn),Bn+=on.length,Cn.setUint32(Bn,Vt),Bn+=4,Zn.set(kn,Bn),Bn+=Vt,Zn.buffer},getRequestHeadersFromMessage:function(xt){var Vt,mn,In={},Zn=new DOMParser;if(wt&&wt.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&xt&&xt.byteLength%2==1)return In["Content-Type"]="text/xml; charset=utf-8",In;var Cn=sn==="utf-16"?new Uint16Array(xt):new Uint8Array(xt);Vt=String.fromCharCode.apply(null,Cn);for(var Rn=(mn=Zn.parseFromString(Vt,"application/xml")).getElementsByTagName("name"),on=mn.getElementsByTagName("value"),Bn=0;Bn<Rn.length;Bn++)In[Rn[Bn].childNodes[0].nodeValue]=on[Bn].childNodes[0].nodeValue;return In.hasOwnProperty("Content")&&(In["Content-Type"]=In.Content,delete In.Content),In.hasOwnProperty("Content-Type")||(In["Content-Type"]="text/xml; charset=utf-8"),In},getLicenseRequestFromMessage:function(xt){var Vt=null,mn=new DOMParser;if(wt&&wt.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&xt&&xt.byteLength%2==1)return xt;var In=sn==="utf-16"?new Uint16Array(xt):new Uint8Array(xt);zt();var Zn=String.fromCharCode.apply(null,In),Cn=mn.parseFromString(Zn,"application/xml");if(!Cn.getElementsByTagName("PlayReadyKeyMessage")[0])return xt;var Rn=Cn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Rn&&(Vt=an.decode(Rn)),Vt},getLicenseServerURLFromInitData:function(xt){if(xt)for(var Vt=new DataView(xt),mn=Vt.getUint16(4,!0),In=6,Zn=new DOMParser,Cn=0;Cn<mn;Cn++){var Rn=Vt.getUint16(In,!0);In+=2;var on=Vt.getUint16(In,!0);if(In+=2,Rn===1){var Bn=xt.slice(In,In+on),kn=String.fromCharCode.apply(null,new Uint16Array(Bn)),er=Zn.parseFromString(kn,"application/xml");if(er.getElementsByTagName("LA_URL")[0]){var Er=er.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Er)return Er}if(er.getElementsByTagName("LUI_URL")[0]){var Ur=er.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Ur)return Ur}}else In+=on}return null},getCDMData:function(xt){var Vt,mn,In,Zn;if(zt(),!xt)return null;for(Vt=[],Zn=0;Zn<xt.length;++Zn)Vt.push(xt.charCodeAt(Zn)),Vt.push(0);for(Vt=String.fromCharCode.apply(null,Vt),Vt=an.encode(Vt),mn='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",Vt),In=[],Zn=0;Zn<mn.length;++Zn)In.push(mn.charCodeAt(Zn)),In.push(0);return new Uint8Array(In).buffer},setPlayReadyMessageFormat:function(xt){if(xt!=="utf-8"&&xt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');sn=xt}}}q.__dashjs_factory_name="KeySystemPlayReady";var K=dashjs.FactoryMaker.getSingletonFactory(q);function ye(tn){var sn=(tn=tn||{}).BASE64,an={};return an[Ae.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(wt){return sn.decodeArray(wt.license)},getErrorResponse:function(wt){return wt}},an[Ae.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(wt){return wt},getErrorResponse:function(wt){return String.fromCharCode.apply(null,new Uint8Array(wt))}},{getServerURLFromMessage:function(wt){return wt},getHTTPMethod:function(){return"POST"},getResponseType:function(wt){return an[wt].responseType},getLicenseMessage:function(wt,zt){return function(){if(!sn||!sn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),an[zt].getLicenseMessage(wt)},getErrorResponse:function(wt,zt){return an[zt].getErrorResponse(wt)}}}ye.__dashjs_factory_name="DRMToday";var de=dashjs.FactoryMaker.getSingletonFactory(ye);function He(){var tn="http://schemas.xmlsoap.org/soap/envelope/";function sn(zt){var xt=String.fromCharCode.apply(null,new Uint8Array(zt));return decodeURIComponent(escape(xt))}function an(zt){if(window.DOMParser){var xt=sn(zt),Vt=new window.DOMParser().parseFromString(xt,"text/xml"),mn=Vt?Vt.getElementsByTagNameNS(tn,"Envelope")[0]:null,In=mn?mn.getElementsByTagNameNS(tn,"Body")[0]:null;if(In&&In.getElementsByTagNameNS(tn,"Fault")[0])return null}return zt}function wt(zt){var xt="",Vt="",mn="",In=-1,Zn=-1;if(window.DOMParser){var Cn=sn(zt),Rn=new window.DOMParser().parseFromString(Cn,"text/xml"),on=Rn?Rn.getElementsByTagNameNS(tn,"Envelope")[0]:null,Bn=on?on.getElementsByTagNameNS(tn,"Body")[0]:null,kn=Bn?Bn.getElementsByTagNameNS(tn,"Fault")[0]:null,er=kn?kn.getElementsByTagName("detail")[0]:null,Er=er?er.getElementsByTagName("Exception")[0]:null,Ur=null;if(kn===null)return Cn;xt=(Ur=kn.getElementsByTagName("faultstring")[0].firstChild)?Ur.nodeValue:null,Er!==null&&(Vt=(Ur=Er.getElementsByTagName("StatusCode")[0])?Ur.firstChild.nodeValue:null,In=(mn=(Ur=Er.getElementsByTagName("Message")[0])?Ur.firstChild.nodeValue:null)?mn.lastIndexOf("[")+1:-1,Zn=mn?mn.indexOf("]"):-1,mn=mn?mn.substring(In,Zn):"")}var Vn="code: ".concat(Vt,", name: ").concat(xt);return mn&&(Vn+=", message: ".concat(mn)),Vn}return{getServerURLFromMessage:function(zt){return zt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(zt){return an.call(this,zt)},getErrorResponse:function(zt){return wt.call(this,zt)}}}He.__dashjs_factory_name="PlayReady";var Tt=le.Z.getSingletonFactory(He);function ot(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(tn){return tn},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}ot.__dashjs_factory_name="Widevine";var rt=dashjs.FactoryMaker.getSingletonFactory(ot);function et(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(tn){if(!tn.hasOwnProperty("keys"))return null;for(var sn=[],an=0;an<tn.keys.length;an++){var wt=tn.keys[an],zt=wt.kid.replace(/=/g,""),xt=wt.k.replace(/=/g,"");sn.push(new oe(zt,xt))}return new Ie(sn)},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}et.__dashjs_factory_name="ClearKey";var ft=dashjs.FactoryMaker.getSingletonFactory(et);function yt(){var tn,sn,an,wt,zt,xt,Vt,mn,In=this.context;function Zn(on,Bn){return Bn&&on in Bn?Bn[on]:null}function Cn(on,Bn){return on&&on.sessionId?on.sessionId:Bn&&Bn.sessionId?Bn.sessionId:null}function Rn(on,Bn){return on&&on.sessionType?on.sessionType:Bn}return tn={initialize:function(){var on;wt=[],on=K(In).getInstance({BASE64:zt,settings:xt}),wt.push(on),on=te(In).getInstance({BASE64:zt}),wt.push(on),on=lt(In).getInstance({BASE64:zt}),wt.push(on),Vt=on,on=Qt(In).getInstance({BASE64:zt,debug:sn}),wt.push(on),mn=on},setProtectionData:function(on){for(var Bn,kn,er=0;er<wt.length;er++){var Er=wt[er];Er.hasOwnProperty("init")&&Er.init((Bn=Er.systemString,kn=void 0,kn=null,on&&(kn=Bn in on?on[Bn]:null),kn))}},isClearKey:function(on){return on===Vt||on===mn},initDataEquals:function(on,Bn){if(on.byteLength===Bn.byteLength){for(var kn=new Uint8Array(on),er=new Uint8Array(Bn),Er=0;Er<kn.length;Er++)if(kn[Er]!==er[Er])return!1;return!0}return!1},getKeySystems:function(){return wt},setKeySystems:function(on){wt=on},getKeySystemBySystemString:function(on){for(var Bn=0;Bn<wt.length;Bn++)if(wt[Bn].systemString===on)return wt[Bn];return null},getSupportedKeySystemsFromContentProtection:function(on,Bn,kn){var er,Er,Ur,Vn,rn=[];if(on){var cn=y.findCencContentProtection(on);for(Ur=0;Ur<wt.length;++Ur){var bn=Zn((Er=wt[Ur]).systemString,Bn);for(Vn=0;Vn<on.length;++Vn)if((er=on[Vn]).schemeIdUri.toLowerCase()===Er.schemeIdURI){var Jn=Er.getInitData(er,cn);rn.push({ks:wt[Ur],keyId:er.keyId,initData:Jn,protData:bn,cdmData:Er.getCDMData(bn?bn.cdmData:null),sessionId:Cn(bn,er),sessionType:Rn(bn,kn)})}}}return rn},getSupportedKeySystemsFromSegmentPssh:function(on,Bn,kn){for(var er,Er=[],Ur=y.parsePSSHList(on),Vn=0;Vn<wt.length;++Vn){var rn=Zn((er=wt[Vn]).systemString,Bn);er.uuid in Ur&&Er.push({ks:er,initData:Ur[er.uuid],protData:rn,cdmData:er.getCDMData(rn?rn.cdmData:null),sessionId:Cn(rn),sessionType:Rn(rn,kn)})}return Er},getLicenseServerModelInstance:function(on,Bn,kn){if(kn==="license-release"||kn==="individualization-request")return null;var er=null;return Bn&&Bn.hasOwnProperty("drmtoday")?er=de(In).getInstance({BASE64:zt}):on.systemString===Ae.WIDEVINE_KEYSTEM_STRING?er=rt(In).getInstance():on.systemString===Ae.PLAYREADY_KEYSTEM_STRING?er=Tt(In).getInstance():on.systemString===Ae.CLEARKEY_KEYSTEM_STRING&&(er=ft(In).getInstance()),er},processClearKeyLicenseRequest:function(on,Bn,kn){try{return on.getClearKeysFromProtectionData(Bn,kn)}catch(er){return an.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(on){on&&(on.debug&&(sn=on.debug,an=sn.getLogger(tn)),on.BASE64&&(zt=on.BASE64),on.settings&&(xt=on.settings))}},tn}yt.__dashjs_factory_name="ProtectionKeyController";var _t=dashjs.FactoryMaker.getSingletonFactory(yt);function Ct(tn){return Ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},Ct(tn)}function hn(tn,sn){return hn=Object.setPrototypeOf||function(an,wt){return an.__proto__=wt,an},hn(tn,sn)}function Xt(tn,sn){return!sn||Ct(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function nn(tn){return nn=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},nn(tn)}var Pt=new(function(tn){(function(xt,Vt){if(typeof Vt!="function"&&Vt!==null)throw new TypeError("Super expression must either be null or a function");xt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:xt,writable:!0,configurable:!0}}),Vt&&hn(xt,Vt)})(zt,tn);var sn,an,wt=(sn=zt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(xt){return!1}}(),function(){var xt,Vt=nn(sn);if(an){var mn=nn(this).constructor;xt=Reflect.construct(Vt,arguments,mn)}else xt=Vt.apply(this,arguments);return Xt(this,xt)});function zt(){var xt;return function(Vt,mn){if(!(Vt instanceof mn))throw new TypeError("Cannot call a class as a function")}(this,zt),(xt=wt.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",xt.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",xt.KEY_ADDED="public_keyAdded",xt.KEY_ERROR="public_keyError",xt.KEY_MESSAGE="public_keyMessage",xt.KEY_SESSION_CLOSED="public_keySessionClosed",xt.KEY_SESSION_CREATED="public_keySessionCreated",xt.KEY_SESSION_REMOVED="public_keySessionRemoved",xt.KEY_STATUSES_CHANGED="public_keyStatusesChanged",xt.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",xt.KEY_SYSTEM_SELECTED="public_keySystemSelected",xt.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",xt.LICENSE_REQUEST_SENDING="public_licenseRequestSending",xt.NEED_KEY="needkey",xt.PROTECTION_CREATED="public_protectioncreated",xt.PROTECTION_DESTROYED="public_protectiondestroyed",xt.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",xt.TEARDOWN_COMPLETE="protectionTeardownComplete",xt.VIDEO_ELEMENT_SELECTED="videoElementSelected",xt.KEY_SESSION_UPDATED="public_keySessionUpdated",xt}return zt}(w(8342).Z)),Un=function tn(sn,an){(function(wt,zt){if(!(wt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initData=sn,this.initDataType=an},gr=function tn(sn,an,wt,zt){(function(xt,Vt){if(!(xt instanceof Vt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.sessionToken=sn,this.message=an,this.defaultURL=wt,this.messageType=zt||"license-request"},Pr=function tn(sn,an){(function(wt,zt){if(!(wt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keySystem=sn,this.ksConfiguration=an},dr={};function ei(tn){tn=tn||{};var sn,an,wt,zt,xt,Vt,mn,In,Zn=this.context,Cn=tn.eventBus,Rn=tn.events,on=tn.debug;function Bn(rn,cn,bn,Jn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var ar="Insecure origins are not allowed";return Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:ar}),void Jn({error:ar})}var br=rn[cn].protData&&rn[cn].protData.systemStringPriority?rn[cn].protData.systemStringPriority:null,Lr=rn[cn].configs,Yi=rn[cn].ks,no=Yi.systemString;(function(Br,qr){return new Promise(function(hi,vi){kn(Br,qr,0,hi,vi)})})(br||(dr[no]?dr[no]:[no]),Lr).then(function(Br){var qr=typeof Br.getConfiguration=="function"?Br.getConfiguration():null,hi=new Pr(Yi,qr);hi.mksa=Br,Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{data:hi}),bn({data:hi})}).catch(function(Br){if(cn+1<rn.length)Bn(rn,cn+1,bn,Jn);else{var qr="Key system access denied! ";Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:qr+Br.message}),Jn({error:qr+Br.message})}})}function kn(rn,cn,bn,Jn,ar){var br=rn[bn];an.debug("Requesting key system access for system string ".concat(br)),navigator.requestMediaKeySystemAccess(br,cn).then(function(Lr){Lr.selectedSystemString=br,Jn(Lr)}).catch(function(Lr){bn+1<rn.length?kn(rn,cn,bn+1,Jn,ar):ar(Lr)})}function er(rn){if(!rn||!rn.session)return Promise.resolve;var cn=rn.session;return cn.removeEventListener("keystatuseschange",rn),cn.removeEventListener("message",rn),cn.close()}function Er(rn){for(var cn=0;cn<Vt.length;cn++)if(Vt[cn]===rn){Vt.splice(cn,1);break}}function Ur(rn){var cn,bn;return rn&&rn.length>0&&(rn[0]&&(typeof rn[0]=="string"?cn=rn[0]:bn=rn[0]),rn[1]&&(typeof rn[1]=="string"?cn=rn[1]:bn=rn[1])),{status:cn,keyId:bn}}function Vn(rn,cn){var bn={session:rn,keyId:cn.keyId,initData:cn.initData,sessionId:cn.sessionId,sessionType:cn.sessionType,handleEvent:function(Jn){switch(Jn.type){case"keystatuseschange":Cn.trigger(Rn.KEY_STATUSES_CHANGED,{data:this}),Jn.target.keyStatuses.forEach(function(){var br=Ur(arguments);br.status==="expired"?Cn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,{error:new I.Z(_.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):Cn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,br)});break;case"message":var ar=ArrayBuffer.isView(Jn.message)?Jn.message.buffer:Jn.message;Cn.trigger(Rn.INTERNAL_KEY_MESSAGE,{data:new gr(this,ar,void 0,Jn.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return rn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return rn.expiration},getKeyStatuses:function(){return rn.keyStatuses},getUsable:function(){var Jn=!1;return rn.keyStatuses.forEach(function(){var ar=Ur(arguments);ar.status==="usable"&&(Jn=!0)}),Jn}};return rn.addEventListener("keystatuseschange",bn),rn.addEventListener("message",bn),rn.closed.then(function(){Er(bn),an.debug("DRM: Session closed.  SessionID = "+bn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CLOSED,{data:bn.getSessionId()})}),Vt.push(bn),bn}return sn={getAllInitData:function(){for(var rn=[],cn=0;cn<Vt.length;cn++)Vt[cn].initData&&rn.push(Vt[cn].initData);return rn},getSessions:function(){return Vt},requestKeySystemAccess:function(rn){return new Promise(function(cn,bn){Bn(rn,0,cn,bn)})},selectKeySystem:function(rn){return new Promise(function(cn,bn){rn.mksa.createMediaKeys().then(function(Jn){return wt=rn.keySystem,xt=Jn,zt?zt.setMediaKeys(xt):Promise.resolve()}).then(function(){cn(wt)}).catch(function(){bn({error:"Error selecting keys system ("+rn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(rn){zt!==rn&&(zt&&(zt.removeEventListener("encrypted",mn),zt.setMediaKeys&&zt.setMediaKeys(null)),(zt=rn)&&(zt.addEventListener("encrypted",mn),zt.setMediaKeys&&xt&&zt.setMediaKeys(xt)))},setServerCertificate:function(rn){if(!wt||!xt)throw new Error("Can not set server certificate until you have selected a key system");xt.setServerCertificate(rn).then(function(){an.info("DRM: License server certificate successfully updated."),Cn.trigger(Rn.SERVER_CERTIFICATE_UPDATED)}).catch(function(cn){Cn.trigger(Rn.SERVER_CERTIFICATE_UPDATED,{error:new I.Z(_.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+cn.name)})})},createKeySession:function(rn){if(!wt||!xt)throw new Error("Can not create sessions until you have selected a key system");var cn=xt.createSession(rn.sessionType),bn=Vn(cn,rn),Jn=wt.systemString===Ae.CLEARKEY_KEYSTEM_STRING&&(rn.initData||rn.protData&&rn.protData.clearkeys)?Ae.INITIALIZATION_DATA_TYPE_KEYIDS:Ae.INITIALIZATION_DATA_TYPE_CENC;cn.generateRequest(Jn,rn.initData).then(function(){an.debug("DRM: Session created.  SessionID = "+bn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:bn})}).catch(function(ar){Er(bn),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+ar.name)})})},updateKeySession:function(rn,cn){var bn=rn.session;In.isClearKey(wt)&&(cn=cn.toJWK()),bn.update(cn).then(function(){Cn.trigger(Rn.KEY_SESSION_UPDATED)}).catch(function(Jn){Cn.trigger(Rn.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"Error sending update() message! "+Jn.name,rn)})})},loadKeySession:function(rn){if(!wt||!xt)throw new Error("Can not load sessions until you have selected a key system");for(var cn=rn.sessionId,bn=0;bn<Vt.length;bn++)if(cn===Vt[bn].sessionId)return void an.warn("DRM: Ignoring session ID because we have already seen it!");var Jn=xt.createSession(rn.sessionType),ar=Vn(Jn,rn);Jn.load(cn).then(function(br){br?(an.debug("DRM: Session loaded.  SessionID = "+ar.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:ar})):(Er(ar),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+cn+")")}))}).catch(function(br){Er(ar),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+cn+")! "+br.name)})})},removeKeySession:function(rn){rn.session.remove().then(function(){an.debug("DRM: Session removed.  SessionID = "+rn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_REMOVED,{data:rn.getSessionId()})},function(cn){Cn.trigger(Rn.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+rn.getSessionId()+"). "+cn.name})})},closeKeySession:function(rn){er(rn).catch(function(cn){Er(rn),Cn.trigger(Rn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+rn.getSessionId()+") "+cn.name})})},stop:function(){for(var rn,cn=0;cn<Vt.length;cn++)(rn=Vt[cn]).getUsable()||(er(rn),Er(rn))},reset:function(){var rn,cn=Vt.length;cn!==0?function(){for(var bn=function(ar){Er(ar),Vt.length===0&&(zt?(zt.removeEventListener("encrypted",mn),zt.setMediaKeys(null).then(function(){Cn.trigger(Rn.TEARDOWN_COMPLETE)})):Cn.trigger(Rn.TEARDOWN_COMPLETE))},Jn=0;Jn<cn;Jn++)(function(ar){er(rn),bn(ar)})(rn=Vt[Jn])}():Cn.trigger(Rn.TEARDOWN_COMPLETE)}},an=on.getLogger(sn),wt=null,zt=null,xt=null,Vt=[],In=_t(Zn).getInstance(),mn={handleEvent:function(rn){if(rn.type==="encrypted"&&rn.initData){var cn=ArrayBuffer.isView(rn.initData)?rn.initData.buffer:rn.initData;Cn.trigger(Rn.NEED_KEY,{key:new Un(cn,rn.initDataType)})}}},sn}dr[Ae.PLAYREADY_KEYSTEM_STRING]=[Ae.PLAYREADY_KEYSTEM_STRING,Ae.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],dr[Ae.WIDEVINE_KEYSTEM_STRING]=[Ae.WIDEVINE_KEYSTEM_STRING],dr[Ae.CLEARKEY_KEYSTEM_STRING]=[Ae.CLEARKEY_KEYSTEM_STRING],ei.__dashjs_factory_name="ProtectionModel_21Jan2015";var Ji=dashjs.FactoryMaker.getClassFactory(ei);function Or(tn){tn=tn||{};var sn,an,wt,zt,xt,Vt,mn,In,Zn,Cn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api;function er(){try{for(var Vn=0;Vn<mn.length;Vn++)Er(mn[Vn]);wt&&wt.removeEventListener(kn.needkey,In),Rn.trigger(on.TEARDOWN_COMPLETE)}catch(rn){Rn.trigger(on.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+rn.message})}}function Er(Vn){var rn=Vn.session;rn.removeEventListener(kn.error,Vn),rn.removeEventListener(kn.message,Vn),rn.removeEventListener(kn.ready,Vn),rn.removeEventListener(kn.close,Vn);for(var cn=0;cn<mn.length;cn++)if(mn[cn]===Vn){mn.splice(cn,1);break}rn[kn.release]()}function Ur(){var Vn=null,rn=function(){wt.removeEventListener("loadedmetadata",Vn),wt[kn.setMediaKeys](xt),Rn.trigger(on.VIDEO_ELEMENT_SELECTED)};wt.readyState>=1?rn():(Vn=rn.bind(this),wt.addEventListener("loadedmetadata",Vn))}return sn={getAllInitData:function(){for(var Vn=[],rn=0;rn<mn.length;rn++)Vn.push(mn[rn].initData);return Vn},getSessions:function(){return mn},requestKeySystemAccess:function(Vn){return new Promise(function(rn,cn){for(var bn=!1,Jn=0;Jn<Vn.length;Jn++)for(var ar=Vn[Jn].ks.systemString,br=Vn[Jn].configs,Lr=null,Yi=null,no=0;no<br.length;no++){var Br=br[no].audioCapabilities,qr=br[no].videoCapabilities;if(Br&&Br.length!==0){Lr=[];for(var hi=0;hi<Br.length;hi++)window[kn.MediaKeys].isTypeSupported(ar,Br[hi].contentType)&&Lr.push(Br[hi])}if(qr&&qr.length!==0){Yi=[];for(var vi=0;vi<qr.length;vi++)window[kn.MediaKeys].isTypeSupported(ar,qr[vi].contentType)&&Yi.push(qr[vi])}if(!(!Lr&&!Yi||Lr&&Lr.length===0||Yi&&Yi.length===0)){bn=!0;var Ao=new D(Lr,Yi),ro=Zn.getKeySystemBySystemString(ar),na=new Pr(ro,Ao);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:na}),rn({data:na});break}}if(!bn){var Ci="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ci}),cn({error:Ci})}})},selectKeySystem:function(Vn){return new Promise(function(rn,cn){try{xt=Vn.mediaKeys=new window[kn.MediaKeys](Vn.keySystem.systemString),zt=Vn.keySystem,Vt=Vn,wt&&Ur(),rn(zt)}catch(bn){cn({error:"Error selecting keys system ("+zt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(Vn){wt!==Vn&&(wt&&wt.removeEventListener(kn.needkey,In),(wt=Vn)&&(wt.addEventListener(kn.needkey,In),xt&&Ur()))},createKeySession:function(Vn){if(!zt||!xt||!Vt)throw new Error("Can not create sessions until you have selected a key system");var rn=null;if(Vt.ksConfiguration.videoCapabilities&&Vt.ksConfiguration.videoCapabilities.length>0&&(rn=Vt.ksConfiguration.videoCapabilities[0]),rn===null&&Vt.ksConfiguration.audioCapabilities&&Vt.ksConfiguration.audioCapabilities.length>0&&(rn=Vt.ksConfiguration.audioCapabilities[0]),rn===null)throw new Error("Can not create sessions for unknown content types.");var cn=rn.contentType,bn=xt.createSession(cn,new Uint8Array(Vn.initData),Vn.cdmData?new Uint8Array(Vn.cdmData):null),Jn=function(ar,br){return{session:ar,keyId:br.keyId,initData:br.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Lr){switch(Lr.type){case kn.error:Rn.trigger(on.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"KeyError",this)});break;case kn.message:var Yi=ArrayBuffer.isView(Lr.message)?Lr.message.buffer:Lr.message;Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(this,Yi,Lr.destinationURL)});break;case kn.ready:an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED);break;case kn.close:an.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Rn.trigger(on.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(bn,Vn);bn.addEventListener(kn.error,Jn),bn.addEventListener(kn.message,Jn),bn.addEventListener(kn.ready,Jn),bn.addEventListener(kn.close,Jn),mn.push(Jn),an.debug("DRM: Session created.  SessionID = "+Jn.getSessionId()),Rn.trigger(on.KEY_SESSION_CREATED,{data:Jn})},updateKeySession:function(Vn,rn){var cn=Vn.session;Zn.isClearKey(zt)?cn.update(new Uint8Array(rn.toJWK())):cn.update(new Uint8Array(rn)),Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Er,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:er,reset:er},an=Bn.getLogger(sn),wt=null,zt=null,xt=null,Vt=null,mn=[],Zn=_t(Cn).getInstance(),In={handleEvent:function(Vn){if(Vn.type===kn.needkey&&Vn.initData){var rn=ArrayBuffer.isView(Vn.initData)?Vn.initData.buffer:Vn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(rn,"cenc")})}}},sn}Or.__dashjs_factory_name="ProtectionModel_3Feb2014";var eo=dashjs.FactoryMaker.getClassFactory(Or);function _i(tn){tn=tn||{};var sn,an,wt,zt,xt,Vt,mn,In,Zn,Cn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api,er=tn.errHandler;function Er(){wt&&rn();for(var cn=0;cn<mn.length;cn++)Ur(mn[cn]);Rn.trigger(on.TEARDOWN_COMPLETE)}function Ur(cn){try{wt[kn.cancelKeyRequest](zt.systemString,cn.sessionId)}catch(bn){Rn.trigger(on.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+cn.sessionId+") "+bn.message})}}function Vn(cn,bn){if(bn&&cn){for(var Jn=cn.length,ar=0;ar<Jn;ar++)if(cn[ar].sessionId==bn)return cn[ar];return null}return null}function rn(){wt.removeEventListener(kn.keyerror,Zn),wt.removeEventListener(kn.needkey,Zn),wt.removeEventListener(kn.keymessage,Zn),wt.removeEventListener(kn.keyadded,Zn)}return sn={getAllInitData:function(){for(var cn=[],bn=0;bn<Vt.length;bn++)cn.push(Vt[bn].initData);for(var Jn=0;Jn<mn.length;Jn++)cn.push(mn[Jn].initData);return cn},getSessions:function(){return mn.concat(Vt)},requestKeySystemAccess:function(cn){return new Promise(function(bn,Jn){var ar=wt;ar||(ar=document.createElement("video"));for(var br=!1,Lr=0;Lr<cn.length;Lr++)for(var Yi=cn[Lr].ks.systemString,no=cn[Lr].configs,Br=null,qr=0;qr<no.length;qr++){var hi=no[qr].videoCapabilities;if(hi&&hi.length!==0){Br=[];for(var vi=0;vi<hi.length;vi++)ar.canPlayType(hi[vi].contentType,Yi)!==""&&Br.push(hi[vi])}if(Br&&(!Br||Br.length!==0)){br=!0;var Ao=new D(null,Br),ro=xt.getKeySystemBySystemString(Yi),na=new Pr(ro,Ao);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:na}),bn({data:na});break}}if(!br){var Ci="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ci}),Jn({error:Ci})}})},selectKeySystem:function(cn){return zt=cn.keySystem,Promise.resolve(zt)},setMediaElement:function(cn){if(wt!==cn){if(wt){rn();for(var bn=0;bn<mn.length;bn++)Ur(mn[bn]);mn=[]}(wt=cn)&&(wt.addEventListener(kn.keyerror,Zn),wt.addEventListener(kn.needkey,Zn),wt.addEventListener(kn.keymessage,Zn),wt.addEventListener(kn.keyadded,Zn),Rn.trigger(on.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(cn){if(!zt)throw new Error("Can not create sessions until you have selected a key system");if(In||mn.length===0){var bn={sessionId:null,keyId:cn.keyId,initData:cn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return Vt.push(bn),wt[kn.generateKeyRequest](zt.systemString,new Uint8Array(cn.initData)),bn}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(cn,bn){var Jn=cn.sessionId;if(xt.isClearKey(zt))for(var ar=0;ar<bn.keyPairs.length;ar++)wt[kn.addKey](zt.systemString,bn.keyPairs[ar].key,bn.keyPairs[ar].keyID,Jn);else wt[kn.addKey](zt.systemString,new Uint8Array(bn),new Uint8Array(cn.initData),Jn);Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Ur,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Er,reset:Er},an=Bn.getLogger(sn),wt=null,zt=null,Vt=[],mn=[],xt=_t(Cn).getInstance(),Zn={handleEvent:function(cn){var bn=null;switch(cn.type){case kn.needkey:var Jn=ArrayBuffer.isView(cn.initData)?cn.initData.buffer:cn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(Jn,"cenc")});break;case kn.keyerror:if((bn=Vn(mn,cn.sessionId))||(bn=Vn(Vt,cn.sessionId)),bn){var ar=_.MEDIA_KEYERR_CODE,br="";switch(cn.errorCode.code){case 1:ar=_.MEDIA_KEYERR_UNKNOWN_CODE,br+="MEDIA_KEYERR_UNKNOWN - "+_.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:ar=_.MEDIA_KEYERR_CLIENT_CODE,br+="MEDIA_KEYERR_CLIENT - "+_.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:ar=_.MEDIA_KEYERR_SERVICE_CODE,br+="MEDIA_KEYERR_SERVICE - "+_.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:ar=_.MEDIA_KEYERR_OUTPUT_CODE,br+="MEDIA_KEYERR_OUTPUT - "+_.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:ar=_.MEDIA_KEYERR_HARDWARECHANGE_CODE,br+="MEDIA_KEYERR_HARDWARECHANGE - "+_.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:ar=_.MEDIA_KEYERR_DOMAIN_CODE,br+="MEDIA_KEYERR_DOMAIN - "+_.MEDIA_KEYERR_DOMAIN_MESSAGE}br+="  System Code = "+cn.systemCode,Rn.trigger(on.KEY_ERROR,{error:new I.Z(ar,br,bn)})}else an.error("No session token found for key error");break;case kn.keyadded:(bn=Vn(mn,cn.sessionId))||(bn=Vn(Vt,cn.sessionId)),bn?(an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED,{data:bn})):an.debug("No session token found for key added");break;case kn.keymessage:if((In=cn.sessionId!==null&&cn.sessionId!==void 0)?!(bn=Vn(mn,cn.sessionId))&&Vt.length>0&&(bn=Vt.shift(),mn.push(bn),bn.sessionId=cn.sessionId,Rn.trigger(on.KEY_SESSION_CREATED,{data:bn})):Vt.length>0&&(bn=Vt.shift(),mn.push(bn),Vt.length!==0&&er.error(new I.Z(_.MEDIA_KEY_MESSAGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),bn){var Lr=ArrayBuffer.isView(cn.message)?cn.message.buffer:cn.message;bn.keyMessage=Lr,Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(bn,Lr,cn.defaultURL)})}else an.warn("No session token found for key message")}}},sn}_i.__dashjs_factory_name="ProtectionModel_01b";var Di=dashjs.FactoryMaker.getClassFactory(_i),zi=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],to=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Ti(){var tn,sn=this.context;function an(wt,zt){for(var xt=0;xt<zt.length;xt++){var Vt=zt[xt];if(typeof wt[Vt[Object.keys(Vt)[0]]]=="function")return Vt}return null}return tn={createProtectionSystem:function(wt){var zt=null,xt=_t(sn).getInstance();xt.setConfig({debug:wt.debug,BASE64:wt.BASE64,settings:wt.settings}),xt.initialize();var Vt=function(mn){var In=mn.debug,Zn=In.getLogger(tn),Cn=mn.eventBus,Rn=mn.errHandler,on=mn.videoModel?mn.videoModel.getElement():null;return on&&on.onencrypted===void 0||on&&on.mediaKeys===void 0?an(on,to)?(Zn.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),eo(sn).create({debug:In,eventBus:Cn,events:mn.events,api:an(on,to)})):an(on,zi)?(Zn.info("EME detected on this user agent! (ProtectionModel_01b)"),Di(sn).create({debug:In,eventBus:Cn,errHandler:Rn,events:mn.events,api:an(on,zi)})):(Zn.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Zn.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Ji(sn).create({debug:In,eventBus:Cn,events:mn.events}))}(wt);return!zt&&Vt&&(zt=fe(sn).create({protectionModel:Vt,protectionKeyController:xt,eventBus:wt.eventBus,debug:wt.debug,events:wt.events,BASE64:wt.BASE64,constants:wt.constants,cmcdModel:wt.cmcdModel,customParametersModel:wt.customParametersModel,settings:wt.settings}),wt.capabilities.setEncryptedMediaSupported(!0)),zt}}}Ti.__dashjs_factory_name="Protection";var Qn=dashjs.FactoryMaker.getClassFactory(Ti);Qn.events=Pt,Qn.errors=_,dashjs.FactoryMaker.updateClassFactory(Ti.__dashjs_factory_name,Qn);var Ou=Qn},2068:function(b,g,w){var F=w(5448),C={DEFAULT:.5,STRONG:1,WEAK:0};function y(D,m,T){var U,x;return U=D===void 0?-1:D,x=function(_){var I=C.DEFAULT;return _!==C.DEFAULT&&_!==C.STRONG&&_!==C.WEAK||(I=_),I}(T),{quality:U,reason:m===void 0?null:m,priority:x}}y.__dashjs_factory_name="SwitchRequest";var v=F.Z.getClassFactory(y);v.NO_CHANGE=-1,v.PRIORITY=C,F.Z.updateClassFactory(y.__dashjs_factory_name,v),g.Z=v},1767:function(b,g,w){var F=w(5628),C=w(6535),y=w(7423),v=w(895),D=w(6070),m=w(3112),T=w(1914),U=w(5435),x=w(5448),_=w(2068),I=w(3393),R="qualitySwitchRules",j="abandonFragmentRules";function z(X){X=X||{};var le,N,$=this.context,fe=X.mediaPlayerModel,oe=X.customParametersModel,he=X.dashMetrics,Ie=X.settings;function Xe(Ze){return Ze.filter(function(it){return it.quality>_.Z.NO_CHANGE})}function Ae(Ze){var it,ut,$e,lt,At,Oe={},Qe=null;if(Ze.length!==0){for(Oe[_.Z.PRIORITY.STRONG]={quality:_.Z.NO_CHANGE,reason:null},Oe[_.Z.PRIORITY.WEAK]={quality:_.Z.NO_CHANGE,reason:null},Oe[_.Z.PRIORITY.DEFAULT]={quality:_.Z.NO_CHANGE,reason:null},it=0,ut=Ze.length;it<ut;it+=1)($e=Ze[it]).quality!==_.Z.NO_CHANGE&&(Oe[$e.priority].quality===_.Z.NO_CHANGE||Oe[$e.priority].quality>$e.quality)&&(Oe[$e.priority].quality=$e.quality,Oe[$e.priority].reason=$e.reason||null);return Oe[_.Z.PRIORITY.WEAK].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.WEAK]),Oe[_.Z.PRIORITY.DEFAULT].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.DEFAULT]),Oe[_.Z.PRIORITY.STRONG].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.STRONG]),Qe&&(lt=Qe.quality,At=Qe.reason),(0,_.Z)($).create(lt,At)}}return{initialize:function(){le=[],N=[],Ie.get().streaming.abr.useDefaultABRRules&&(Ie.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_L2A?le.push((0,T.Z)($).create({dashMetrics:he,settings:Ie})):Ie.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_LoLP?le.push((0,U.Z)($).create({dashMetrics:he})):(le.push((0,m.Z)($).create({dashMetrics:he,mediaPlayerModel:fe,settings:Ie})),le.push((0,F.Z)($).create({dashMetrics:he})),Ie.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&le.push((0,C.Z)($).create({dashMetrics:he,settings:Ie})),Ie.get().streaming.abr.additionalAbrRules.switchHistoryRule&&le.push((0,D.Z)($).create()),Ie.get().streaming.abr.additionalAbrRules.droppedFramesRule&&le.push((0,v.Z)($).create()),Ie.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&N.push((0,y.Z)($).create({dashMetrics:he,mediaPlayerModel:fe,settings:Ie})))),oe.getAbrCustomRules().forEach(function(Ze){Ze.type===R&&le.push(Ze.rule($).create()),Ze.type===j&&N.push(Ze.rule($).create())})},reset:function(){[le,N].forEach(function(Ze){Ze&&Ze.length&&Ze.forEach(function(it){return it.reset&&it.reset()})}),le=[],N=[]},getMaxQuality:function(Ze){return Ae(Xe(le.map(function(it){return it.getMaxIndex(Ze)})))||(0,_.Z)($).create()},getMinSwitchRequest:Ae,shouldAbandonFragment:function(Ze,it){var ut=Ae(Xe(N.map(function($e){return $e.shouldAbandon(Ze,it)})));return ut&&(ut.reason.forceAbandon=!0),ut||(0,_.Z)($).create()},getQualitySwitchRules:function(){return le}}}z.__dashjs_factory_name="ABRRulesCollection";var W=x.Z.getClassFactory(z);W.QUALITY_SWITCH_RULES=R,W.ABANDON_FRAGMENT_RULES=j,x.Z.updateSingletonFactory(z.__dashjs_factory_name,W),g.Z=W},7423:function(b,g,w){var F=w(2068),C=w(5448),y=w(6398);function v(D){D=D||{};var m,T,U,x,_,I=this.context,R=D.mediaPlayerModel,j=D.dashMetrics,z=D.settings;function W(){U={},x={},_=[]}return m={shouldAbandon:function(X){var le=(0,F.Z)(I).create(F.Z.NO_CHANGE,{name:v.__dashjs_factory_name});if(!(X&&X.hasOwnProperty("getMediaInfo")&&X.hasOwnProperty("getMediaType")&&X.hasOwnProperty("getCurrentRequest")&&X.hasOwnProperty("getRepresentationInfo")&&X.hasOwnProperty("getAbrController")))return le;var N,$,fe=X.getMediaInfo(),oe=X.getMediaType(),he=X.getStreamInfo(),Ie=he?he.id:null,Xe=X.getCurrentRequest();if(!isNaN(Xe.index)){N=oe,$=Xe.index,U[N]=U[N]||{},U[N][$]=U[N][$]||{};var Ae=R.getStableBufferTime();if(j.getCurrentBufferLevel(oe)>Ae)return le;var Ze=U[oe][Xe.index];if(Ze===null||Xe.firstByteDate===null||x.hasOwnProperty(Ze.id))return le;if(Ze.firstByteTime===void 0&&(_[oe]=[],Ze.firstByteTime=Xe.firstByteDate.getTime(),Ze.segmentDuration=Xe.duration,Ze.bytesTotal=Xe.bytesTotal,Ze.id=Xe.index),Ze.bytesLoaded=Xe.bytesLoaded,Ze.elapsedTime=new Date().getTime()-Ze.firstByteTime,Ze.bytesLoaded>0&&Ze.elapsedTime>0&&function(ct,Qt){_[ct]=_[ct]||[],_[ct].push(Qt)}(oe,Math.round(8*Ze.bytesLoaded/Ze.elapsedTime)),_[oe].length>=z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&Ze.elapsedTime>z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&Ze.bytesLoaded<Ze.bytesTotal){var it=_[oe].reduce(function(ct,Qt){return ct+Qt},0);if(Ze.measuredBandwidthInKbps=Math.round(it/_[oe].length),Ze.estimatedTimeOfDownload=+(8*Ze.bytesTotal/Ze.measuredBandwidthInKbps/1e3).toFixed(2),Ze.estimatedTimeOfDownload<Ze.segmentDuration*z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||X.getRepresentationInfo().quality===0)return le;if(!x.hasOwnProperty(Ze.id)){var ut=X.getAbrController(),$e=Ze.bytesTotal-Ze.bytesLoaded,lt=ut.getBitrateList(fe),At=ut.getQualityForBitrate(fe,Ze.measuredBandwidthInKbps*z.get().streaming.abr.bandwidthSafetyFactor,Ie),Oe=ut.getMinAllowedIndexFor(oe,Ie),Qe=Oe!==void 0?Math.max(Oe,At):At;$e>Ze.bytesTotal*lt[Qe].bitrate/lt[ut.getQualityFor(oe,Ie)].bitrate&&(le.quality=Qe,le.reason.throughput=Ze.measuredBandwidthInKbps,le.reason.fragmentID=Ze.id,le.reason.rule=this.getClassName(),x[Ze.id]=Ze,T.debug("["+oe+"] frag id",Ze.id," is asking to abandon and switch to quality to ",Qe," measured bandwidth was",Ze.measuredBandwidthInKbps),delete U[oe][Ze.id])}}else Ze.bytesLoaded===Ze.bytesTotal&&delete U[oe][Ze.id]}return le},reset:W},T=(0,y.Z)(I).getInstance().getLogger(m),W(),m}v.__dashjs_factory_name="AbandonRequestsRule",g.Z=C.Z.getClassFactory(v)},3112:function(b,g,w){var F=w(3860),C=w(2068),y=w(5448),v=w(7855),D=w(5595),m=w(8512),T=w(6398),U=w(8825),x=w(3393),_=10;function I(R){R=R||{};var j,z,W,X=this.context,le=R.dashMetrics,N=R.mediaPlayerModel,$=(0,D.Z)(X).getInstance();function fe(Qe,ct,Qt){var Kt=Qt.reduce(function(Ce,te,Fe){return te>Qt[Ce]?Fe:Ce},0);if(Kt===0)return null;var St=Math.max(Qe,_+2*ct.length),Lt=(Qt[Kt]-1)/(St/_-1);return{gp:Lt,Vp:_/Lt}}function oe(Qe){Qe.placeholderBuffer=0,Qe.mostAdvancedSegmentStart=NaN,Qe.lastSegmentWasReplacement=!1,Qe.lastSegmentStart=NaN,Qe.lastSegmentDurationS=NaN,Qe.lastSegmentRequestTimeMs=NaN,Qe.lastSegmentFinishTimeMs=NaN}function he(Qe,ct){var Qt=N.getStableBufferTime();if(Qe.stableBufferTime!==Qt){var Kt=fe(Qt,Qe.bitrates,Qe.utilities);if(Kt.Vp!==Qe.Vp||Kt.gp!==Qe.gp){var St=le.getCurrentBufferLevel(ct),Lt=St+Qe.placeholderBuffer;Lt-=_,Lt*=Kt.Vp/Qe.Vp,Lt+=_,Qe.stableBufferTime=Qt,Qe.Vp=Kt.Vp,Qe.gp=Kt.gp,Qe.placeholderBuffer=Math.max(0,Lt-St)}}}function Ie(Qe,ct){return Qe.Vp*(Qe.utilities[ct]+Qe.gp)}function Xe(Qe,ct){for(var Qt=Qe.bitrates[ct],Kt=Qe.utilities[ct],St=0,Lt=ct-1;Lt>=0;--Lt)if(Qe.utilities[Lt]<Qe.utilities[ct]){var Ce=Qe.bitrates[Lt],te=Qe.utilities[Lt],Fe=Qe.Vp*(Qe.gp+(Qt*te-Ce*Kt)/(Qt-Ce));St=Math.max(St,Fe)}return St}function Ae(Qe){var ct=Qe.mediaType===x.Z.AUDIO?[x.Z.AUDIO]:W;for(var Qt in ct)W.hasOwnProperty(Qt)&&W[Qt].state===2&&(W[Qt].placeholderBuffer=0)}function Ze(){for(var Qe in W)if(W.hasOwnProperty(Qe)){var ct=W[Qe];ct.state!==0&&(ct.state=1,oe(ct))}}function it(Qe){if(Qe&&Qe.chunk&&Qe.chunk.mediaInfo){var ct=W[Qe.chunk.mediaInfo.type];if(ct&&ct.state!==0){var Qt=Qe.chunk.start;isNaN(ct.mostAdvancedSegmentStart)||Qt>ct.mostAdvancedSegmentStart?(ct.mostAdvancedSegmentStart=Qt,ct.lastSegmentWasReplacement=!1):ct.lastSegmentWasReplacement=!0,ct.lastSegmentStart=Qt,ct.lastSegmentDurationS=Qe.chunk.duration,ct.lastQuality=Qe.chunk.quality,$e(ct,Qe.chunk.mediaInfo.type)}}}function ut(Qe){if(Qe&&Qe.metric===F.Z.HTTP_REQUEST&&Qe.value&&Qe.value.type===v.w.MEDIA_SEGMENT_TYPE&&Qe.value.trace&&Qe.value.trace.length){var ct=W[Qe.mediaType];ct&&ct.state!==0&&(ct.lastSegmentRequestTimeMs=Qe.value.trequest.getTime(),ct.lastSegmentFinishTimeMs=Qe.value._tfinish.getTime(),$e(ct,Qe.mediaType))}}function $e(Qe,ct){if(!isNaN(Qe.lastSegmentStart)&&!isNaN(Qe.lastSegmentRequestTimeMs)&&!isNaN(Qe.placeholderBuffer)){if(Qe.placeholderBuffer*=.99,!isNaN(Qe.lastSegmentFinishTimeMs)){var Qt=le.getCurrentBufferLevel(ct)+.001*(Qe.lastSegmentFinishTimeMs-Qe.lastSegmentRequestTimeMs),Kt=Ie(Qe,Qe.lastQuality),St=Math.max(0,Kt-Qt);Qe.placeholderBuffer=Math.min(St,Qe.placeholderBuffer)}Qe.lastSegmentWasReplacement&&!isNaN(Qe.lastSegmentDurationS)&&(Qe.placeholderBuffer+=Qe.lastSegmentDurationS),Qe.lastSegmentStart=NaN,Qe.lastSegmentRequestTimeMs=NaN}}function lt(Qe){if(Qe){var ct=W[Qe.mediaType];ct&&ct.state!==0&&(ct.abrQuality=Qe.newQuality)}}function At(Qe){if(Qe){var ct=W[Qe.mediaType];if(ct&&ct.state!==0){var Qt,Kt=le.getCurrentBufferLevel(Qe.mediaType);Qt=ct.abrQuality>0?Xe(ct,ct.abrQuality):_;var St=Math.max(0,Qt-Kt);ct.placeholderBuffer=Math.min(ct.placeholderBuffer,St)}}}function Oe(){W={}}return j={getMaxIndex:function(Qe){var ct=(0,C.Z)(X).create();if(!(Qe&&Qe.hasOwnProperty("getMediaInfo")&&Qe.hasOwnProperty("getMediaType")&&Qe.hasOwnProperty("getScheduleController")&&Qe.hasOwnProperty("getStreamInfo")&&Qe.hasOwnProperty("getAbrController")&&Qe.hasOwnProperty("useBufferOccupancyABR")))return ct;var Qt=Qe.getMediaInfo(),Kt=Qe.getMediaType(),St=Qe.getScheduleController(),Lt=Qe.getStreamInfo(),Ce=Qe.getAbrController(),te=Ce.getThroughputHistory(),Fe=Lt?Lt.id:null,O=Lt&&Lt.manifestInfo&&Lt.manifestInfo.isDynamic,M=Qe.useBufferOccupancyABR();if(ct.reason=ct.reason||{},!M)return ct;St.setTimeToLoadDelay(0);var q=function(et){var ft=et.getMediaType(),yt=W[ft];return yt?yt.state!==0&&he(yt,ft):(yt=function(_t){var Ct={},hn=_t.getMediaInfo().bitrateList.map(function(Un){return Un.bandwidth}),Xt=function(Un){return Un.map(function(gr){return Math.log(gr)})}(hn);Xt=Xt.map(function(Un){return Un-Xt[0]+1});var nn=N.getStableBufferTime(),Pt=fe(nn,hn,Xt);return Pt?(Ct.state=1,Ct.bitrates=hn,Ct.utilities=Xt,Ct.stableBufferTime=nn,Ct.Vp=Pt.Vp,Ct.gp=Pt.gp,Ct.lastQuality=0,oe(Ct)):Ct.state=0,Ct}(et),W[ft]=yt),yt}(Qe);if(q.state===0)return ct;var K,ye=le.getCurrentBufferLevel(Kt),de=te.getAverageThroughput(Kt,O),He=te.getSafeAverageThroughput(Kt,O),Tt=te.getAverageLatency(Kt);if(ct.reason.state=q.state,ct.reason.throughput=de,ct.reason.latency=Tt,isNaN(de))return ct;switch(q.state){case 1:K=Ce.getQualityForBitrate(Qt,He,Fe,Tt),ct.quality=K,ct.reason.throughput=He,q.placeholderBuffer=Math.max(0,Xe(q,K)-ye),q.lastQuality=K,!isNaN(q.lastSegmentDurationS)&&ye>=q.lastSegmentDurationS&&(q.state=2);break;case 2:(function(et,ft){var yt=Date.now();if(isNaN(et.lastSegmentFinishTimeMs)){if(!isNaN(et.lastCallTimeMs)){var _t=.001*(yt-et.lastCallTimeMs);et.placeholderBuffer+=Math.max(0,_t)}}else{var Ct=.001*(yt-et.lastSegmentFinishTimeMs);et.placeholderBuffer+=Math.max(0,Ct)}et.lastCallTimeMs=yt,et.lastSegmentStart=NaN,et.lastSegmentRequestTimeMs=NaN,et.lastSegmentFinishTimeMs=NaN,he(et,ft)})(q,Kt),K=function(et,ft){for(var yt=et.bitrates.length,_t=NaN,Ct=NaN,hn=0;hn<yt;++hn){var Xt=(et.Vp*(et.utilities[hn]+et.gp)-ft)/et.bitrates[hn];(isNaN(Ct)||Xt>=Ct)&&(Ct=Xt,_t=hn)}return _t}(q,ye+q.placeholderBuffer);var ot=Ce.getQualityForBitrate(Qt,He,Fe,Tt);K>q.lastQuality&&K>ot&&(K=Math.max(ot,q.lastQuality));var rt=Math.max(0,ye+q.placeholderBuffer-Ie(q,K));rt<=q.placeholderBuffer?(q.placeholderBuffer-=rt,rt=0):(rt-=q.placeholderBuffer,q.placeholderBuffer=0,K<Ce.getMaxAllowedIndexFor(Kt,Fe)?St.setTimeToLoadDelay(1e3*rt):rt=0),ct.quality=K,ct.reason.throughput=de,ct.reason.latency=Tt,ct.reason.bufferLevel=ye,ct.reason.placeholderBuffer=q.placeholderBuffer,ct.reason.delay=rt,q.lastQuality=K;break;default:z.debug("BOLA ABR rule invoked in bad state."),ct.quality=Ce.getQualityForBitrate(Qt,He,Fe,Tt),ct.reason.state=q.state,ct.reason.throughput=He,ct.reason.latency=Tt,q.state=1,oe(q)}return ct},reset:function(){Oe(),$.off(U.Z.BUFFER_EMPTY,Ae,j),$.off(U.Z.PLAYBACK_SEEKING,Ze,j),$.off(U.Z.METRIC_ADDED,ut,j),$.off(U.Z.QUALITY_CHANGE_REQUESTED,lt,j),$.off(U.Z.FRAGMENT_LOADING_ABANDONED,At,j),$.off(m.Z.MEDIA_FRAGMENT_LOADED,it,j)}},z=(0,T.Z)(X).getInstance().getLogger(j),Oe(),$.on(U.Z.BUFFER_EMPTY,Ae,j),$.on(U.Z.PLAYBACK_SEEKING,Ze,j),$.on(U.Z.METRIC_ADDED,ut,j),$.on(U.Z.QUALITY_CHANGE_REQUESTED,lt,j),$.on(U.Z.FRAGMENT_LOADING_ABANDONED,At,j),$.on(m.Z.MEDIA_FRAGMENT_LOADED,it,j),j}I.__dashjs_factory_name="BolaRule",g.Z=y.Z.getClassFactory(I)},895:function(b,g,w){var F=w(5448),C=w(2068),y=w(6398);function v(){var D,m,T=this.context;return D={getMaxIndex:function(U){var x=(0,C.Z)(T).create();if(!U||!U.hasOwnProperty("getDroppedFramesHistory"))return x;var _=U.getDroppedFramesHistory(),I=U.getStreamInfo().id;if(_){var R=_.getFrameHistory(I);if(!R||R.length===0)return x;for(var j=0,z=0,W=C.Z.NO_CHANGE,X=1;X<R.length;X++)if(R[X]&&(j=R[X].droppedVideoFrames,(z=R[X].totalVideoFrames)>375&&j/z>.15)){W=X-1,m.debug("index: "+W+" Dropped Frames: "+j+" Total Frames: "+z);break}return(0,C.Z)(T).create(W,{droppedFrames:j})}return x}},m=(0,y.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="DroppedFramesRule",g.Z=F.Z.getClassFactory(v)},6535:function(b,g,w){var F=w(5595),C=w(8512),y=w(5448),v=w(6398),D=w(2068),m=w(3393),T=w(3860),U=w(8825);function x(_){_=_||{};var I,R,j,z=this.context,W=(0,F.Z)(z).getInstance(),X=_.dashMetrics;function le(){(j={})[m.Z.VIDEO]={ignoreCount:2},j[m.Z.AUDIO]={ignoreCount:2}}function N(){le()}function $(fe){isNaN(fe.startTime)||fe.mediaType!==m.Z.AUDIO&&fe.mediaType!==m.Z.VIDEO||j[fe.mediaType].ignoreCount>0&&j[fe.mediaType].ignoreCount--}return I={getMaxIndex:function(fe){var oe=(0,D.Z)(z).create();if(!fe||!fe.hasOwnProperty("getMediaType"))return oe;(function(){if(!X||!X.hasOwnProperty("getCurrentBufferLevel")||!X.hasOwnProperty("getCurrentBufferState"))throw new Error(m.Z.MISSING_CONFIG_ERROR)})();var he=fe.getMediaType(),Ie=X.getCurrentBufferState(he),Xe=fe.getRepresentationInfo().fragmentDuration,Ae=fe.getStreamInfo(),Ze=Ae?Ae.id:null,it=fe.getScheduleController(),ut=Ae&&Ae.manifestInfo&&Ae.manifestInfo.isDynamic;if(function(Kt,St){return!Kt&&j[St].ignoreCount>0}(it.getPlaybackController().getLowLatencyModeEnabled(),he)||!Xe)return oe;if(Ie&&Ie.state===T.Z.BUFFER_EMPTY)R.debug("["+he+"] Switch to index 0; buffer is empty."),oe.quality=0,oe.reason="InsufficientBufferRule: Buffer is empty";else{var $e=fe.getMediaInfo(),lt=fe.getAbrController(),At=lt.getThroughputHistory(),Oe=X.getCurrentBufferLevel(he),Qe=At.getAverageThroughput(he,ut),ct=At.getAverageLatency(he),Qt=Qe*(Oe/Xe)*.5;oe.quality=lt.getQualityForBitrate($e,Qt,Ze,ct),oe.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return oe},reset:function(){le(),W.off(U.Z.PLAYBACK_SEEKING,N,I),W.off(C.Z.BYTES_APPENDED_END_FRAGMENT,$,I)}},R=(0,v.Z)(z).getInstance().getLogger(I),le(),W.on(U.Z.PLAYBACK_SEEKING,N,I),W.on(C.Z.BYTES_APPENDED_END_FRAGMENT,$,I),I}x.__dashjs_factory_name="InsufficientBufferRule",g.Z=y.Z.getClassFactory(x)},1914:function(b,g,w){var F=w(3860),C=w(2068),y=w(5448),v=w(7855),D=w(5595),m=w(8512),T=w(6398),U=w(3393);function x(_){_=_||{};var I,R,j,z,W=this.context,X=_.dashMetrics,le=(0,D.Z)(W).getInstance();function N(Ze){Ze.placeholderBuffer=0,Ze.mostAdvancedSegmentStart=NaN,Ze.lastSegmentWasReplacement=!1,Ze.lastSegmentStart=NaN,Ze.lastSegmentDurationS=NaN,Ze.lastSegmentRequestTimeMs=NaN,Ze.lastSegmentFinishTimeMs=NaN,Ze.lastSegmentUrl=""}function $(){for(var Ze in R)if(R.hasOwnProperty(Ze)){var it=R[Ze];it.state!==0&&(it.state=1,N(it))}}function fe(Ze){if(Ze&&Ze.chunk&&Ze.chunk.mediaInfo){var it=R[Ze.chunk.mediaInfo.type],ut=j[Ze.chunk.mediaInfo.type];if(it&&it.state!==0){var $e=Ze.chunk.start;isNaN(it.mostAdvancedSegmentStart)||$e>it.mostAdvancedSegmentStart?(it.mostAdvancedSegmentStart=$e,it.lastSegmentWasReplacement=!1):it.lastSegmentWasReplacement=!0,it.lastSegmentStart=$e,it.lastSegmentDurationS=Ze.chunk.duration,it.lastQuality=Ze.chunk.quality,he(it,ut)}}}function oe(Ze){if(Ze&&Ze.metric===F.Z.HTTP_REQUEST&&Ze.value&&Ze.value.type===v.w.MEDIA_SEGMENT_TYPE&&Ze.value.trace&&Ze.value.trace.length){var it=R[Ze.mediaType],ut=j[Ze.mediaType];it&&it.state!==0&&(it.lastSegmentRequestTimeMs=Ze.value.trequest.getTime(),it.lastSegmentFinishTimeMs=Ze.value._tfinish.getTime(),he(it,ut))}}function he(Ze,it){isNaN(Ze.lastSegmentStart)||isNaN(Ze.lastSegmentRequestTimeMs)||(it.segment_request_start_s=.001*Ze.lastSegmentRequestTimeMs,it.segment_download_finish_s=.001*Ze.lastSegmentFinishTimeMs,Ze.lastSegmentStart=NaN,Ze.lastSegmentRequestTimeMs=NaN)}function Ie(Ze){if(Ze&&Ze.mediaType){var it=R[Ze.mediaType];it&&it.state!==0&&(it.abrQuality=Ze.newQuality)}}function Xe(Ze,it){if(Ze.length!==it.length)return-1;for(var ut=0,$e=0;$e<Ze.length;$e++)ut+=Ze[$e]*it[$e];return ut}function Ae(){R={},j={}}return I={getMaxIndex:function(Ze){var it,ut=(0,C.Z)(W).create(),$e=Math.pow(4,.99),lt=Math.max(Math.pow(4,1),$e*Math.sqrt(4)),At=Ze.getMediaInfo(),Oe=Ze.getMediaType(),Qe=At.bitrateList.map(function(Pt){return Pt.bandwidth}),ct=Qe.length,Qt=Ze.getScheduleController(),Kt=Ze.getStreamInfo(),St=Ze.getAbrController(),Lt=St.getThroughputHistory(),Ce=Kt&&Kt.manifestInfo&&Kt.manifestInfo.isDynamic,te=Ze.useL2AABR(),Fe=X.getCurrentBufferLevel(Oe,!0),O=Lt.getSafeAverageThroughput(Oe,Ce),M=Lt.getAverageThroughput(Oe,Ce),q=Lt.getAverageLatency(Oe),K=Ze.getVideoModel().getPlaybackRate();if(!(Ze&&Ze.hasOwnProperty("getMediaInfo")&&Ze.hasOwnProperty("getMediaType")&&Ze.hasOwnProperty("getScheduleController")&&Ze.hasOwnProperty("getStreamInfo")&&Ze.hasOwnProperty("getAbrController")&&Ze.hasOwnProperty("useL2AABR"))||(ut.reason=ut.reason||{},!te||Oe===U.Z.AUDIO))return ut;Qt.setTimeToLoadDelay(0);var ye=function(Pt){var Un=Pt.getMediaType(),gr=R[Un];return gr||(gr=function(Pr){var dr={},ei=Pr.getMediaInfo(),Ji=ei.bitrateList.map(function(Or){return Or.bandwidth/1e3});return dr.state=1,dr.bitrates=Ji,dr.lastQuality=0,function(Or){Or&&Or.type&&(j[Or.type]={},j[Or.type].w=[],j[Or.type].prev_w=[],j[Or.type].Q=0,j[Or.type].segment_request_start_s=0,j[Or.type].segment_download_finish_s=0,j[Or.type].B_target=1.5)}(ei),N(dr),dr}(Pt),R[Un]=gr),gr}(Ze);if(ye.state===0)return ut;var de=j[Oe];if(!de||(ut.reason.state=ye.state,ut.reason.throughput=M,ut.reason.latency=q,isNaN(M)))return ut;switch(ye.state){case 1:if(it=St.getQualityForBitrate(At,O,Kt.id,q),ut.quality=it,ut.reason.throughput=O,ye.lastQuality=it,!isNaN(ye.lastSegmentDurationS)&&Fe>=de.B_target){ye.state=2,de.Q=$e;for(var He=0;He<ct;++He)He===ye.lastQuality?de.prev_w[He]=1:de.prev_w[He]=0}break;case 2:var Tt=[],ot=X.getCurrentHttpRequest(Oe).trace.reduce(function(Pt,Un){return Pt+Un.d},0),rt=X.getCurrentHttpRequest(Oe).trace.reduce(function(Pt,Un){return Pt+Un.b[0]},0),et=Math.round(8*rt/ot),ft=X.getCurrentHttpRequest(Oe);if(et<1&&(et=1),ft.url===ye.lastSegmentUrl||ft.type===v.w.INIT_SEGMENT_TYPE)it=ye.lastQuality;else{for(var yt=ye.lastSegmentDurationS,_t=1,Ct=0;Ct<ct;++Ct)Qe[Ct]=Qe[Ct]/1e3,K*Qe[Ct]>et&&(_t=-1),de.w[Ct]=de.prev_w[Ct]+_t*(yt/(2*lt))*((de.Q+$e)*(K*Qe[Ct]/et));de.w=function(Pt){for(var Un=Pt.length,gr=!1,Pr=[],dr=0;dr<Un;++dr)Pr[dr]=Pt[dr];for(var ei=Pt.sort(function(zi,to){return to-zi}),Ji=0,Or=0,eo=[],_i=0;_i<Un-1;++_i)if((Or=((Ji+=ei[_i])-1)/(_i+1))>=ei[_i+1]){gr=!0;break}gr||(Or=(Ji+ei[Un-1]-1)/Un);for(var Di=0;Di<Un;++Di)eo[Di]=Math.max(Pr[Di]-Or,0);return eo}(de.w);for(var hn=0;hn<ct;++hn)Tt[hn]=de.w[hn]-de.prev_w[hn],de.prev_w[hn]=de.w[hn];de.Q=Math.max(0,de.Q-yt+yt*K*((Xe(Qe,de.prev_w)+Xe(Qe,Tt))/et));for(var Xt=[],nn=0;nn<ct;++nn)Xt[nn]=Math.abs(Qe[nn]-Xe(de.w,Qe));(it=Xt.indexOf(Math.min.apply(Math,Xt)))>ye.lastQuality&&Qe[ye.lastQuality+1]<=et&&(it=ye.lastQuality+1),Qe[it]>=et&&(de.Q=2*Math.max($e,de.Q)),ye.lastSegmentUrl=ft.url}ut.quality=it,ut.reason.throughput=M,ut.reason.latency=q,ut.reason.bufferLevel=Fe,ye.lastQuality=ut.quality;break;default:z.debug("L2A ABR rule invoked in bad state."),ut.quality=St.getQualityForBitrate(At,O,Kt.id,q),ut.reason.state=ye.state,ut.reason.throughput=O,ut.reason.latency=q,ye.state=1,N(ye)}return ut},reset:function(){Ae(),le.off(m.Z.PLAYBACK_SEEKING,$,I),le.off(m.Z.MEDIA_FRAGMENT_LOADED,fe,I),le.off(m.Z.METRIC_ADDED,oe,I),le.off(m.Z.QUALITY_CHANGE_REQUESTED,Ie,I)}},z=(0,T.Z)(W).getInstance().getLogger(I),Ae(),le.on(m.Z.PLAYBACK_SEEKING,$,I),le.on(m.Z.MEDIA_FRAGMENT_LOADED,fe,I),le.on(m.Z.METRIC_ADDED,oe,I),le.on(m.Z.QUALITY_CHANGE_REQUESTED,Ie,I),I}x.__dashjs_factory_name="L2ARule",g.Z=y.Z.getClassFactory(x)},6070:function(b,g,w){var F=w(5448),C=w(6398),y=w(2068);function v(){var D,m,T=this.context;return D={getMaxIndex:function(U){for(var x=U?U.getSwitchHistory():null,_=x?x.getSwitchRequests():[],I=0,R=0,j=0,z=(0,y.Z)(T).create(),W=0;W<_.length;W++)if(_[W]!==void 0&&(I+=_[W].drops,R+=_[W].noDrops,j+=_[W].dropSize,I+R>=6&&I/R>.075)){z.quality=W>0&&_[W].drops>0?W-1:W,z.reason={index:z.quality,drops:I,noDrops:R,dropSize:j},m.debug("Switch history rule index: "+z.quality+" samples: "+(I+R)+" drops: "+I);break}return z}},m=(0,C.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="SwitchHistoryRule",g.Z=F.Z.getClassFactory(v)},5628:function(b,g,w){var F=w(5448),C=w(2068),y=w(3393),v=w(3860);function D(m){m=m||{};var T=this.context,U=m.dashMetrics;return{getMaxIndex:function(x){var _=(0,C.Z)(T).create();if(!(x&&x.hasOwnProperty("getMediaInfo")&&x.hasOwnProperty("getMediaType")&&x.hasOwnProperty("useBufferOccupancyABR")&&x.hasOwnProperty("getAbrController")&&x.hasOwnProperty("getScheduleController")))return _;(function(){if(!U||!U.hasOwnProperty("getCurrentBufferState"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var I=x.getMediaInfo(),R=x.getMediaType(),j=U.getCurrentBufferState(R),z=x.getScheduleController(),W=x.getAbrController(),X=x.getStreamInfo(),le=X?X.id:null,N=X&&X.manifestInfo?X.manifestInfo.isDynamic:null,$=W.getThroughputHistory(),fe=$.getSafeAverageThroughput(R,N),oe=$.getAverageLatency(R),he=x.useBufferOccupancyABR();return isNaN(fe)||!j||he||W.getAbandonmentStateFor(le,R)!==v.Z.ABANDON_LOAD&&(j.state===v.Z.BUFFER_LOADED||N)&&(_.quality=W.getQualityForBitrate(I,fe,le,oe),z.setTimeToLoadDelay(0),_.reason={throughput:fe,latency:oe}),_},reset:function(){}}}D.__dashjs_factory_name="ThroughputRule",g.Z=F.Z.getClassFactory(D)},4722:function(b,g,w){var F=w(5448),C=w(6398);function y(){var v,D,m,T,U,x,_,I,R,j=this.context;function z(){m=null,T=1,U=100,x=0,_=null,I=null,R="dynamic_weight_selection"}function W(){var fe=0;if(m)for(var oe=0;oe<m.length;oe++){var he=m[oe];he.state.throughput>fe&&(fe=he.state.throughput)}return fe}function X(fe,oe,he){var Ie=fe.map(function(Xe,Ae){return he[Ae]*Math.pow(Xe-oe[Ae],2)}).reduce(function(Xe,Ae){return Xe+Ae});return(Ie<0?-1:1)*Math.sqrt(Math.abs(Ie))}function le(fe,oe){return X([fe.state.throughput,fe.state.latency,fe.state.rebuffer,fe.state.switch],[oe.state.throughput,oe.state.latency,oe.state.rebuffer,oe.state.switch],[1,1,1,1])}function N(fe,oe,he){for(var Ie=0;Ie<oe.length;Ie++){var Xe=oe[Ie],Ae=le(Xe,fe);$(Xe,he,Math.exp(-1*Math.pow(Ae,2)/(2*Math.pow(.1,2))))}}function $(fe,oe,he){var Ie=fe.state,Xe=[.01,.01,.01,.01];Ie.throughput=Ie.throughput+(oe[0]-Ie.throughput)*Xe[0]*he,Ie.latency=Ie.latency+(oe[1]-Ie.latency)*Xe[1]*he,Ie.rebuffer=Ie.rebuffer+(oe[2]-Ie.rebuffer)*Xe[2]*he,Ie.switch=Ie.switch+(oe[3]-Ie.switch)*Xe[3]*he}return v={getNextQuality:function(fe,oe,he,Ie,Xe,Ae,Ze){var it=he,ut=Ie,$e=oe,lt=function(de){if(!m){m=[];var He=de.bitrateList,Tt=[];x=He[0].bandwidth,He.forEach(function(ft){Tt.push(ft.bandwidth),ft.bandwidth<x&&(x=ft.bandwidth)}),et=Tt.map(function(ft){return Math.pow(ft,2)}).reduce(function(ft,yt){return ft+yt}),T=Math.sqrt(et);for(var ot=0;ot<He.length;ot++){var rt={qualityIndex:ot,bitrate:He[ot].bandwidth,state:{throughput:He[ot].bandwidth/T,latency:0,rebuffer:0,switch:0}};m.push(rt)}I=function(ft){var yt=[],_t=function(Ou){for(var tn=[],sn=0;sn<Ou;sn++){var an=[Math.random()*W(),Math.random(),Math.random(),Math.random()];tn.push(an)}return tn}(Math.pow(ft.length,2));yt.push(_t[0]);for(var Ct=[1,1,1,1],hn=1;hn<ft.length;hn++){for(var Xt=null,nn=null,Pt=0;Pt<_t.length;Pt++){for(var Un=_t[Pt],gr=null,Pr=0;Pr<yt.length;Pr++){var dr=X(Un,yt[Pr],Ct);(gr===null||dr<gr)&&(gr=dr)}(nn===null||gr>nn)&&(Xt=Un,nn=gr)}yt.push(Xt)}for(var ei=null,Ji=null,Or=0;Or<yt.length;Or++){for(var eo=0,_i=0;_i<yt.length;_i++)Or!==_i&&(eo+=X(yt[Or],yt[_i],Ct));(ei===null||eo>ei)&&(ei=eo,Ji=Or)}var Di=[];for(Di.push(yt[Ji]),yt.splice(Ji,1);yt.length>0;){for(var zi=null,to=null,Ti=0;Ti<yt.length;Ti++){var Qn=X(Di[0],yt[Ti],Ct);(zi===null||Qn<zi)&&(zi=Qn,to=Ti)}Di.push(yt[to]),yt.splice(to,1)}return Di}(m)}var et;return m}(fe),At=oe/T;At>1&&(At=W()),he/=U,D.debug("getNextQuality called throughput:".concat(At," latency:").concat(he," bufferSize:").concat(Ie," currentQualityIndex:").concat(Ae," playbackRate:").concat(Xe));var Oe=lt[Ae],Qe=Oe.bitrate*Ze.getSegmentDuration()/$e,ct=Math.max(0,Qe-ut);if(ut-Qe<Ze.getMinBuffer())return D.debug("Buffer is low for bitrate= ".concat(Oe.bitrate," downloadTime=").concat(Qe," currentBuffer=").concat(ut," rebuffer=").concat(ct)),function(de,He){var Tt=0,ot=de;if(m)for(var rt=0;rt<m.length;rt++){var et=m[rt];et.bitrate<de.bitrate&&et.bitrate>Tt&&He>et.bitrate&&(Tt=et.bitrate,ot=et)}return ot}(Oe,$e).qualityIndex;switch(R){case"manual_weight_selection":_=[.4,.4,.4,.4];break;case"random_weight_selection":(function(de){_=function(He,Tt){for(var ot=[],rt=Math.sqrt(2/He),et=0;et<4;et++)ot.push(Math.random()*rt);return _=ot}(de.length)})(lt);break;default:(function(de,He,Tt,ot,rt,et,ft){_||(_=I[I.length-1]);var yt=de.findWeightVector(He,Tt,ot,rt,et,ft);yt!==null&&yt!==-1&&(_=yt)})(Ze,lt,it,ut,ct,$e,Xe)}for(var Qt=null,Kt=null,St=null,Lt=0;Lt<lt.length;Lt++){var Ce=lt[Lt],te=Ce.state,Fe=[te.throughput,te.latency,te.rebuffer,te.switch],O=_.slice(),M=Ze.getNextBufferWithBitrate(Ce.bitrate,ut,$e),q=M<Ze.getMinBuffer();q&&D.debug("Buffer is low for bitrate=".concat(Ce.bitrate," downloadTime=").concat(Qe," currentBuffer=").concat(ut," nextBuffer=").concat(M)),(Ce.bitrate>oe-1e4||q)&&Ce.bitrate!==x&&(O[0]=100);var K=X(Fe,[At,0,0,0],O);(Qt===null||K<Qt)&&(Qt=K,Kt=Ce.qualityIndex,St=Ce)}var ye=Math.abs(Oe.bitrate-St.bitrate)/T;return N(Oe,lt,[At,he,ct,ye]),N(St,lt,[At,0,0,ye]),Kt},reset:function(){z()}},D=(0,C.Z)(j).getInstance().getLogger(v),z(),v}y.__dashjs_factory_name="LearningAbrController",g.Z=F.Z.getClassFactory(y)},5317:function(b,g,w){var F=w(5448),C=w(2298);function y(){var v,D,m,T,U;function x(){D=null,m=null,T=null,U=null}function _(R,j,z,W){var X=new C.Z;return X.type=R,X.weights.bitrateReward=j||1,X.weights.bitrateSwitchPenalty=1,X.weights.rebufferPenalty=z||1e3,X.weights.latencyPenalty=[],X.weights.latencyPenalty.push({threshold:1.1,penalty:.05*W}),X.weights.latencyPenalty.push({threshold:1e8,penalty:.1*z}),X.weights.playbackSpeedPenalty=W||200,X}function I(R,j,z,W,X){X.bitrateWSum+=X.weights.bitrateReward*R,X.lastBitrate&&(X.bitrateSwitchWSum+=X.weights.bitrateSwitchPenalty*Math.abs(R-X.lastBitrate)),X.lastBitrate=R,X.rebufferWSum+=X.weights.rebufferPenalty*j;for(var le=0;le<X.weights.latencyPenalty.length;le++){var N=X.weights.latencyPenalty[le];if(z<=N.threshold){X.latencyWSum+=N.penalty*z;break}}X.playbackSpeedWSum+=X.weights.playbackSpeedPenalty*Math.abs(1-W),X.totalQoe=X.bitrateWSum-X.bitrateSwitchWSum-X.rebufferWSum-X.latencyWSum-X.playbackSpeedWSum}return v={setupPerSegmentQoe:function(R,j,z){D=_("segment",R,j,z),m=R,T=j,U=z},logSegmentMetrics:function(R,j,z,W){D&&I(R,j,z,W,D)},getPerSegmentQoe:function(){return D},calculateSingleUseQoe:function(R,j,z,W){var X=null;return m&&T&&U&&(X=_("segment",m,T,U)),X?(I(R,j,z,W,X),X.totalQoe):0},reset:function(){x()}},x(),v}y.__dashjs_factory_name="LoLpQoeEvaluator",g.Z=F.Z.getClassFactory(y)},5435:function(b,g,w){var F=w(6398),C=w(5448),y=w(4722),v=w(5317),D=w(2068),m=w(3860),T=w(6523),U=w(3393);function x(_){var I,R,j,z,W=(_=_||{}).dashMetrics,X=this.context;return R={getMaxIndex:function(le){try{var N=(0,D.Z)(X).create(),$=le.getMediaInfo().type,fe=le.getAbrController(),oe=le.getStreamInfo(),he=fe.getQualityFor($,oe.id),Ie=le.getMediaInfo(),Xe=W.getCurrentBufferState($),Ae=le.getScheduleController(),Ze=W.getCurrentBufferLevel($,!0),it=oe&&oe.manifestInfo?oe.manifestInfo.isDynamic:null,ut=Ae.getPlaybackController(),$e=ut.getCurrentLiveLatency();if(!le.useLoLPABR()||$===U.Z.AUDIO)return N;$e||($e=0);var lt=ut.getPlaybackRate(),At=fe.getThroughputHistory().getSafeAverageThroughput($,it);if(I.debug("Throughput ".concat(Math.round(At)," kbps")),isNaN(At)||!Xe||fe.getAbandonmentStateFor(oe.id,$)===m.Z.ABANDON_LOAD)return N;for(var Oe=Ie.bitrateList,Qe=le.getRepresentationInfo().fragmentDuration,ct=Oe[0].bandwidth/1e3,Qt=Oe[Oe.length-1].bandwidth/1e3,Kt=0;Kt<Oe.length;Kt++){var St=Oe[Kt].bandwidth/1e3;St>Qt?Qt=St:St<ct&&(ct=St)}var Lt=Oe[he].bandwidth/1e3,Ce=W.getCurrentHttpRequest($,!0),te=(Ce.tresponse.getTime()-Ce.trequest.getTime())/1e3,Fe=te>Qe?te-Qe:0;z.setupPerSegmentQoe(Qe,Qt,ct),z.logSegmentMetrics(Lt,Fe,$e,lt);var O=(0,T.Z)(X).create({targetLatency:1.5,bufferMin:.3,segmentDuration:Qe,qoeEvaluator:z});return N.quality=j.getNextQuality(Ie,1e3*At,$e,Ze,lt,he,O),N.reason={throughput:At,latency:$e},N.priority=D.Z.PRIORITY.STRONG,Ae.setTimeToLoadDelay(0),N.quality!==he&&I.debug("[TgcLearningRule]["+$+"] requesting switch to index: ",N.quality,"Average throughput",Math.round(At),"kbps"),N}catch(M){throw M}},reset:function(){j.reset(),z.reset()}},I=(0,F.Z)(X).getInstance().getLogger(R),j=(0,y.Z)(X).create(),z=(0,v.Z)(X).create(),R}x.__dashjs_factory_name="LoLPRule",g.Z=C.Z.getClassFactory(x)},6523:function(b,g,w){var F=w(5448);function C(y){var v,D,m,T,U=y.targetLatency,x=y.bufferMin,_=y.segmentDuration,I=y.qoeEvaluator;function R(){return _}function j(z,W){var X=R();return W>X?z-X:z+X-W}return v={getMinBuffer:function(){return x},getSegmentDuration:R,getNextBufferWithBitrate:function(z,W,X){return j(W,z*_/X)},getNextBuffer:j,findWeightVector:function(z,W,X,le,N,$){var fe=null,oe=null,he=null,Ie=Math.abs(W-m);return z.forEach(function(Xe){D.forEach(function(Ae){Ae[0];var Ze=Ae[1],it=Ae[2],ut=(Ae[3],Xe.bitrate*_/N),$e=j(X,ut),lt=(it===0?10:1/it)*Math.max(1e-5,ut-$e),At=(Ze===0?10:1/Ze)*Xe.state.latency,Oe=I.calculateSingleUseQoe(Xe.bitrate,lt,At,$);(fe===null||Oe>fe)&&function(Qe,ct,Qt){return!(Qe>U+Qt)&&ct>=x}(W,$e,Ie)&&(fe=Oe,oe=Ae,he=Xe.bitrate)})}),oe===null&&he===null&&(oe=-1),m=W,oe}},D=function z(W,X,le){if(le===X)return W;for(var N=W.length,$=0;$<N;$++)for(var fe=W.shift(),oe=0;oe<T.length;oe++)W.push(fe.concat(T[oe]));return z(W,X,le+1)}((T=[.2,.4,.6,.8,1]).map(function(z){return[z]}),4,1),m=0,v}C.__dashjs_factory_name="LoLpWeightSelector",g.Z=F.Z.getClassFactory(C)},2298:function(b,g){g.Z=function w(){(function(F,C){if(!(F instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(b,g,w){w.d(g,{Y:function(){return I}});var F=w(3393),C=w(1553),y=w(5448),v=w(2128),D=w(2594),m=w(7387),T=w(7417),U=w(9032),x=w(9326),_=w(7802),I=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function R(j){var z,W,X,le,N,$,fe,oe,he=this.context,Ie=j.adapter,Xe=j.baseURLController,Ae=j.streamInfo,Ze=j.timelineConverter,it=j.debug,ut=j.eventBus,$e=j.events,lt=j.dashConstants,At=(0,D.Z)(he).getInstance();function Oe(ct,Qt){var Kt=new v.Z;Kt.id=ct.id,Kt.bitrate=ct.bandwidth,Kt.width=ct.width,Kt.height=ct.height,Kt.tilesHor=1,Kt.tilesVert=1,ct.essentialProperties&&ct.essentialProperties.forEach(function(St){if(I.indexOf(St.schemeIdUri)>=0&&St.value){var Lt=St.value.split("x");Lt.length!==2||isNaN(Lt[0])||isNaN(Lt[1])||(Kt.tilesHor=parseInt(Lt[0],10),Kt.tilesVert=parseInt(Lt[1],10))}}),Qt?$.updateSegmentData(ct).then(function(St){(function(Lt,Ce,te){var Fe=[],O=function(M,q){var K,ye,de,He,Tt=[],ot=0;for(K=0,ye=M.segments.length;K<ye;K++)de=M.segments[K],(He=(0,m.TJ)(Ze,Ie.getIsDynamic(),q,de.startTime,de.duration,de.timescale,de.media,de.mediaRange,ot))&&(Tt.push(He),He=null,ot++);return Tt}(te,Ce);Ce.segments=O,Lt.segmentDuration=Ce.segments[0].duration,Lt.readThumbnail=function(M,q){var K=null;Fe.some(function(ye){if(ye.start<=M&&ye.end>M)return K=ye.url,!0}),K?q(K):Ce.segments.some(function(ye){if(ye.mediaStartTime<=M&&ye.mediaStartTime+ye.duration>M){var de=Xe.resolve(Ce.path);return fe.load({method:"get",url:de.url,request:{range:ye.mediaRange,responseType:"arraybuffer"},onload:function(He){var Tt=oe.getSamplesInfo(He.target.response),ot=new Blob([He.target.response.slice(Tt.sampleList[0].offset,Tt.sampleList[0].offset+Tt.sampleList[0].size)],{type:"image/jpeg"}),rt=window.URL.createObjectURL(ot);Fe.push({start:ye.mediaStartTime,end:ye.mediaStartTime+ye.duration,url:rt}),q&&q(rt)}}),!0}})}})(Kt,ct,St)}):(Kt.startNumber=ct.startNumber,Kt.segmentDuration=ct.segmentDuration,Kt.timescale=ct.timescale,Kt.templateUrl=function(St){var Lt=At.isRelative(St.media)?At.resolve(St.media,Xe.resolve(St.path).url):St.media;return Lt?(0,m.Aj)(Lt,St.id):""}(ct)),Kt.tilesHor>0&&Kt.tilesVert>0&&(Kt.widthPerTile=Kt.width/Kt.tilesHor,Kt.heightPerTile=Kt.height/Kt.tilesVert,W.push(Kt))}function Qe(){W=[],le=-1,N=null}return z={getTracks:function(){return W},addTracks:function(){if(Ae&&Ie&&(N=Ie.getMediaInfoForType(Ae,F.Z.IMAGE))){var ct=Ie.getVoRepresentations(N);ct&&ct.length>0&&ct.forEach(function(Qt){(Qt.segmentInfoType===C.Z.SEGMENT_TEMPLATE&&Qt.segmentDuration>0&&Qt.media||Qt.segmentInfoType===C.Z.SEGMENT_TIMELINE)&&Oe(Qt),Qt.segmentInfoType===C.Z.SEGMENT_BASE&&Oe(Qt,!0)}),W.length>0&&W.sort(function(Qt,Kt){return Qt.bitrate-Kt.bitrate})}},reset:Qe,setTrackByIndex:function(ct){W&&W.length!==0&&(ct>=W.length&&(ct=W.length-1),le=ct)},getCurrentTrack:function(){return le<0?null:W[le]},getCurrentTrackIndex:function(){return le},getThumbnailRequestForTime:function(ct){for(var Qt,Kt=Ie.getVoRepresentations(N),St=0;St<Kt.length;St++)if(W[le].id===Kt[St].id){Qt=Kt[St];break}return X.getSegmentRequestForTime(N,Qt,ct)}},Qe(),fe=(0,U.Z)(he).create({}),oe=(0,T.Z)(he).getInstance(),$=(0,_.Z)(he).create({events:$e,eventBus:ut,streamInfo:Ae,timelineConverter:Ze,dashConstants:lt,dashMetrics:j.dashMetrics,segmentBaseController:j.segmentBaseController,type:F.Z.IMAGE}),(X=(0,x.Z)(he).create({streamInfo:Ae,type:F.Z.IMAGE,timelineConverter:Ze,segmentsController:$,baseURLController:Xe,debug:it,eventBus:ut,events:$e,dashConstants:lt,urlUtils:At})).initialize(!!Ie&&Ie.getIsDynamic()),z}R.__dashjs_factory_name="ThumbnailTracks",g.Z=y.Z.getClassFactory(R)},7417:function(b,g,w){var F=w(6398),C=w(8260),y=w(5448),v=w(6934),D=w(9597);function m(){var T,U,x=this.context;function _(j){if(!j)return null;j.fileStart===void 0&&(j.fileStart=0);var z=v.parseBuffer(j),W=(0,C.Z)(x).create();return W.setData(z),W}function I(j,z){return j[z+3]>>>0|j[z+2]<<8>>>0|j[z+1]<<16>>>0|j[z]<<24>>>0}function R(j,z){return String.fromCharCode(j[z++])+String.fromCharCode(j[z++])+String.fromCharCode(j[z++])+String.fromCharCode(j[z])}return U={parse:_,findLastTopIsoBoxCompleted:function(j,z,W){if(W===void 0&&(W=0),!z||W+8>=z.byteLength)return new D.Z(0,!1);for(var X,le=z instanceof ArrayBuffer?new Uint8Array(z):z,N=0;W<le.byteLength;){var $=I(le,W),fe=R(le,W+4);if($===0)break;W+$<=le.byteLength&&(j.indexOf(fe)>=0?X=new D.Z(W,!0,$):N=W+$),W+=$}return X||new D.Z(N,!1)},getMediaTimescaleFromMoov:function(j){var z=_(j),W=z?z.getBox("mdhd"):void 0;return W?W.timescale:NaN},getSamplesInfo:function(j){if(!j||j.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var z,W,X,le,N,$,fe,oe,he,Ie,Xe,Ae,Ze,it,ut,$e,lt=_(j),At=lt.getBoxes("moof"),Oe=lt.getBoxes("mfhd");ut=lt.getBoxes("moof").length,it=Oe[Oe.length-1].sequence_number,W=0,N=[];var Qe=-1,ct=-1;for(Ie=0;Ie<At.length;Ie++){var Qt=At[Ie],Kt=Qt.getChildBoxes("traf");for(oe=0;oe<Kt.length;oe++){var St=Kt[oe],Lt=St.getChildBox("tfhd"),Ce=St.getChildBox("tfdt");le=Ce.baseMediaDecodeTime;var te=St.getChildBoxes("trun"),Fe=St.getChildBoxes("subs");for(he=0;he<te.length;he++){var O=te[he];for(W=O.sample_count,Ze=(Lt.base_data_offset||0)+(O.data_offset||0),fe=0;fe<W;fe++){z=($=O.samples[fe]).sample_duration!==void 0?$.sample_duration:Lt.default_sample_duration,X=$.sample_size!==void 0?$.sample_size:Lt.default_sample_size;var M={dts:le,cts:le+($.sample_composition_time_offset!==void 0?$.sample_composition_time_offset:0),duration:z,offset:Qt.offset+Ze,size:X,subSizes:[X]};if(Fe)for(Xe=0;Xe<Fe.length;Xe++){var q=Fe[Xe];if(Qe<q.entry_count-1&&fe>ct&&(Qe++,ct+=q.entries[Qe].sample_delta),fe==ct){M.subSizes=[];var K=q.entries[Qe];for(Ae=0;Ae<K.subsample_count;Ae++)M.subSizes.push(K.subsamples[Ae].subsample_size)}}N.push(M),Ze+=X,le+=z}}$e=le-Ce.baseMediaDecodeTime}}return{sampleList:N,lastSequenceNumber:it,totalDuration:$e,numSequences:ut}},findInitRange:function(j){var z=null,W=_(j);if(!W)return z;var X=W.getBox("ftyp"),le=W.getBox("moov");return T.debug("Searching for initialization."),le&&le.isComplete&&(z=(X?X.offset:le.offset)+"-"+(le.offset+le.size-1),T.debug("Found the initialization.  Range: "+z)),z},parsePayload:function(j,z,W){if(W===void 0&&(W=0),!z||W+8>=z.byteLength)return new D.Z(0,!1);for(var X,le=z instanceof ArrayBuffer?new Uint8Array(z):z,N=0;W<le.byteLength;){var $=I(le,W),fe=R(le,W+4);if($===0)break;W+$<=le.byteLength&&(j.indexOf(fe)>=0?X=new D.Z(W,!0,$,fe):N=W+$),W+=$}return X||new D.Z(N,!1)}},T=(0,F.Z)(x).getInstance().getLogger(U),U}m.__dashjs_factory_name="BoxParser",g.Z=y.Z.getSingletonFactory(m)},1715:function(b,g,w){w.d(g,{B:function(){return D}});var F=w(5448),C=w(7803),y=w(3393),v=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function D(){var T="ManagedMediaSource"in window,U="WebKitMediaSource"in window,x="MediaSource"in window;return T||U||x}function m(){var T,U,x;return T={setConfig:function(_){_&&_.settings&&(U=_.settings)},supportsMediaSource:D,supportsEncryptedMedia:function(){return x},supportsCodec:function(_,I){return I!==y.Z.AUDIO&&I!==y.Z.VIDEO?Promise.resolve(!0):function(R,j){return U.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(R.codec&&j===y.Z.AUDIO||j===y.Z.VIDEO&&R.codec&&R.width&&R.height&&R.bitrate&&R.framerate)}(_,I)?function(R,j){return new Promise(function(z){if(R&&R.codec){var W={type:"media-source"};W[j]={},W[j].contentType=R.codec,W[j].width=R.width,W[j].height=R.height,W[j].bitrate=parseInt(R.bitrate),W[j].framerate=parseFloat(R.framerate),navigator.mediaCapabilities.decodingInfo(W).then(function(X){z(X.supported)}).catch(function(){z(!1)})}else z(!1)})}(_,I):function(R){return new Promise(function(j){if(R&&R.codec){var z=R.codec;R.width&&R.height&&(z+=';width="'+R.width+'";height="'+R.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(z)||"MediaSource"in window&&MediaSource.isTypeSupported(z)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(z)?j(!0):j(!1)}else j(!1)})}(_)},setEncryptedMediaSupported:function(_){x=_},supportsEssentialProperty:function(_){try{return C.Y.indexOf(_.schemeIdUri)!==-1||y.Z.FONT_DOWNLOAD_DVB_SCHEME===_.schemeIdUri}catch(I){return!0}},codecRootCompatibleWithCodec:function(_,I){for(var R,j=_.split(".")[0],z=I.indexOf(j)===0,W=0;W<v.length;W++)if(v[W].codec===j){R=v[W];break}return R?z||R.compatibleCodecs.some(function(X){return I.indexOf(X)===0}):z}},x=!1,T}m.__dashjs_factory_name="Capabilities",g.Z=F.Z.getSingletonFactory(m)},2295:function(b,g,w){var F=w(5448),C=w(3106);function y(){return{customTimeRangeArray:[],length:0,add:function(v,D){var m;for(m=0;m<this.customTimeRangeArray.length&&v>this.customTimeRangeArray[m].start;m++);for(this.customTimeRangeArray.splice(m,0,{start:v,end:D}),m=0;m<this.customTimeRangeArray.length-1;m++)this.mergeRanges(m,m+1)&&m--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(v,D){for(var m=0;m<this.customTimeRangeArray.length;m++)if(v<=this.customTimeRangeArray[m].start&&D>=this.customTimeRangeArray[m].end)this.customTimeRangeArray.splice(m,1),m--;else{if(v>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end){this.customTimeRangeArray.splice(m+1,0,{start:D,end:this.customTimeRangeArray[m].end}),this.customTimeRangeArray[m].end=v;break}v>this.customTimeRangeArray[m].start&&v<this.customTimeRangeArray[m].end?this.customTimeRangeArray[m].end=v:D>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end&&(this.customTimeRangeArray[m].start=D)}this.length=this.customTimeRangeArray.length},mergeRanges:function(v,D){var m=this.customTimeRangeArray[v],T=this.customTimeRangeArray[D];return m.start<=T.start&&T.start<=m.end&&m.end<=T.end?(m.end=T.end,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&T.end<=m.end?(m.start=T.start,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&m.end<=T.end?(this.customTimeRangeArray.splice(v,1),!0):m.start<=T.start&&T.start<=m.end&&T.end<=m.end&&(this.customTimeRangeArray.splice(D,1),!0)},start:function(v){return(0,C.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].start},end:function(v){return(0,C.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].end}}}y.__dashjs_factory_name="CustomTimeRanges",g.Z=F.Z.getClassFactory(y)},5:function(b,g,w){var F=w(5448);function C(){var y,v=/^[a-z][a-z0-9+\-_.]*:/i,D=/^https?:\/\//i,m=/^https:\/\//i,T=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,U=function(X,le){try{return new window.URL(X,le).toString()}catch(N){return X}},x=function(X,le){var N=_;if(!le||!j(X))return X;z(X)&&(N=I),W(X)&&(N=R);var $=N(le),fe=$.charAt($.length-1)!=="/"&&X.charAt(0)!=="/"?"/":"";return[$,X].join(fe)};function _(X){var le=X.indexOf("/"),N=X.lastIndexOf("/");return le!==-1?N===le+1?X:(X.indexOf("?")!==-1&&(X=X.substring(0,X.indexOf("?"))),X.substring(0,N+1)):""}function I(X){var le=X.match(T);return le?le[1]:""}function R(X){var le=X.match(v);return le?le[0]:""}function j(X){return!v.test(X)}function z(X){return j(X)&&X.charAt(0)==="/"}function W(X){return X.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),y=U}catch(X){}finally{y=y||x}}(),{parseBaseUrl:_,parseOrigin:I,parseScheme:R,isRelative:j,isPathAbsolute:z,isSchemeRelative:W,isHTTPURL:function(X){return D.test(X)},isHTTPS:function(X){return m.test(X)},removeHostname:function(X){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(X)[2].substring(1)},resolve:function(X,le){return y(X,le)}}}C.__dashjs_factory_name="DefaultURLUtils",g.Z=F.Z.getSingletonFactory(C)},8260:function(b,g,w){var F=w(2839),C=w(5448);function y(){var v;function D(T){var U=[];if(!T||!v||typeof v.fetchAll!="function")return U;for(var x,_=v.fetchAll(T),I=0,R=_.length;I<R;I++)(x=m(_[I]))&&U.push(x);return U}function m(T){if(!T)return null;var U=new F.Z(T);return T.hasOwnProperty("_incomplete")&&(U.isComplete=!T._incomplete),U}return{getBox:function(T){return T&&v&&v.boxes&&v.boxes.length!==0&&typeof v.fetch=="function"?m(v.fetch(T)):null},getBoxes:D,setData:function(T){v=T},getLastBox:function(){if(!v||!v.boxes||!v.boxes.length)return null;var T=D(v.boxes[v.boxes.length-1].type);return T.length>0?T[T.length-1]:null}}}y.__dashjs_factory_name="IsoFile",g.Z=C.Z.getClassFactory(y)},7473:function(b,g,w){w.d(g,{k:function(){return C}});var F=w(5448);function C(v,D){var m={url:v.url,method:v.method,headers:Object.assign({},v.headers),credentials:v.withCredentials?"include":void 0,range:v.request.range};return Promise.resolve(D.modifyRequest(m)).then(function(){return Object.assign(v,m,{withCredentials:m.credentials==="include"})})}function y(){return{modifyRequest:null,modifyRequestURL:function(v){return v},modifyRequestHeader:function(v,D){return D.url,v}}}y.__dashjs_factory_name="RequestModifier",g.Z=F.Z.getSingletonFactory(y)},3106:function(b,g,w){w.d(g,{PS:function(){return y},SE:function(){return v}});var F=w(3393);function C(D){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},C(D)}function y(D,m){if(C(D)!==m)throw F.Z.BAD_ARGUMENT_ERROR}function v(D){if(D===null||isNaN(D)||D%1!=0)throw F.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(b,g,w){var F=w(5448),C=w(5);function y(){var D,m=[],T=this.context;function U(x,_,I){var R=function(j){var z;for(z=0;z<m.length;z++)if(m[z].regex.test(j))return m[z].utils;return D}(I||_);return R&&typeof R[x]=="function"?R[x](_,I):D[x](_,I)}return D=(0,C.Z)(T).getInstance(),{registerUrlRegex:function(x,_){m.push({regex:x,utils:_})},parseBaseUrl:function(x){return U("parseBaseUrl",x)},parseOrigin:function(x){return U("parseOrigin",x)},parseScheme:function(x){return U("parseScheme",x)},isRelative:function(x){return U("isRelative",x)},isPathAbsolute:function(x){return U("isPathAbsolute",x)},isSchemeRelative:function(x){return U("isSchemeRelative",x)},isHTTPURL:function(x){return U("isHTTPURL",x)},isHTTPS:function(x){return U("isHTTPS",x)},removeHostname:function(x){return U("removeHostname",x)},resolve:function(x,_){return U("resolve",x,_)}}}y.__dashjs_factory_name="URLUtils";var v=F.Z.getSingletonFactory(y);g.Z=v},5459:function(b,g){g.Z=function w(F,C,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,w),this.code=F||null,this.message=C||null,this.data=y||null}},3186:function(b,g,w){var F=w(7855);function C(v,D){for(var m=0;m<D.length;m++){var T=D[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}var y=function(){function v(T){(function(U,x){if(!(U instanceof x))throw new TypeError("Cannot call a class as a function")})(this,v),this.action=v.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=T||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var D,m;return D=v,(m=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===F.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(T){this.type=T&&T.init?F.w.INIT_SEGMENT_TYPE:F.w.MEDIA_SEGMENT_TYPE,this.url=T&&T.url?T.url:null,this.range=T&&T.range?T.range.start+"-"+T.range.end:null,this.mediaType=T&&T.mediaType?T.mediaType:null}}])&&C(D.prototype,m),v}();y.ACTION_DOWNLOAD="download",y.ACTION_COMPLETE="complete",g.Z=y},2839:function(b,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var F=function(){function C(D){if(function(R,j){if(!(R instanceof j))throw new TypeError("Cannot call a class as a function")}(this,C),this.offset=D._offset,this.type=D.type,this.size=D.size,this.boxes=[],D.boxes)for(var m=0;m<D.boxes.length;m++)this.boxes.push(new C(D.boxes[m]));switch(this.isComplete=!0,D.type){case"sidx":if(this.timescale=D.timescale,this.earliest_presentation_time=D.earliest_presentation_time,this.first_offset=D.first_offset,this.references=D.references,D.references){this.references=[];for(var T=0;T<D.references.length;T++){var U={reference_type:D.references[T].reference_type,referenced_size:D.references[T].referenced_size,subsegment_duration:D.references[T].subsegment_duration};this.references.push(U)}}break;case"emsg":this.id=D.id,this.version=D.version===1?1:0,this.value=D.value,this.timescale=D.timescale,this.scheme_id_uri=D.scheme_id_uri,this.presentation_time_delta=D.version===1?D.presentation_time:D.presentation_time_delta,this.event_duration=D.event_duration,this.message_data=D.message_data;break;case"mdhd":this.timescale=D.timescale;break;case"mfhd":this.sequence_number=D.sequence_number;break;case"subs":this.entry_count=D.entry_count,this.entries=D.entries;break;case"tfhd":this.base_data_offset=D.base_data_offset,this.sample_description_index=D.sample_description_index,this.default_sample_duration=D.default_sample_duration,this.default_sample_size=D.default_sample_size,this.default_sample_flags=D.default_sample_flags,this.flags=D.flags;break;case"tfdt":this.version=D.version,this.baseMediaDecodeTime=D.baseMediaDecodeTime,this.flags=D.flags;break;case"trun":if(this.sample_count=D.sample_count,this.first_sample_flags=D.first_sample_flags,this.data_offset=D.data_offset,this.flags=D.flags,this.samples=D.samples,D.samples){this.samples=[];for(var x=0,_=D.samples.length;x<_;x++){var I={sample_size:D.samples[x].sample_size,sample_duration:D.samples[x].sample_duration,sample_composition_time_offset:D.samples[x].sample_composition_time_offset};this.samples.push(I)}}break;case"prft":this.version=D.version,this.reference_track_ID=D.reference_track_ID,this.ntp_timestamp_sec=D.ntp_timestamp_sec,this.ntp_timestamp_frac=D.ntp_timestamp_frac,this.media_time=D.media_time,this.flags=D.flags}}var y,v;return y=C,(v=[{key:"getChildBox",value:function(D){for(var m=0;m<this.boxes.length;m++)if(this.boxes[m].type===D)return this.boxes[m]}},{key:"getChildBoxes",value:function(D){for(var m=[],T=0;T<this.boxes.length;T++)this.boxes[T].type===D&&m.push(this.boxes[T]);return m}}])&&w(y.prototype,v),C}();g.Z=F},9597:function(b,g){g.Z=function w(F,C,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,w),this.lastCompletedOffset=F,this.found=C,this.size=y}},2128:function(b,g){g.Z=function w(){(function(F,C){if(!(F instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(b,g,w){function F(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")}w.d(g,{O:function(){return y},w:function(){return C}});var C=function v(){F(this,v),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},y=function v(){F(this,v),this.s=null,this.d=null,this.b=[]};C.GET="GET",C.HEAD="HEAD",C.MPD_TYPE="MPD",C.XLINK_EXPANSION_TYPE="XLinkExpansion",C.INIT_SEGMENT_TYPE="InitializationSegment",C.INDEX_SEGMENT_TYPE="IndexSegment",C.MEDIA_SEGMENT_TYPE="MediaSegment",C.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",C.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",C.DVB_REPORTING_TYPE="DVBReporting",C.LICENSE="license",C.CONTENT_STEERING_TYPE="ContentSteering",C.OTHER_TYPE="other"},3039:function(b,g){function w(C,y){return function(v,D){for(var m,T,U,x=F(v,"tag"),_=F(D==null?"*":D,"range"),I=[],R=-1;++R<_.length;)if(m=_[R].toLowerCase(),y||m!=="*"){for(T=-1,U=[];++T<x.length;)if(C(x[T].toLowerCase(),m)){if(!y)return x[T];I.push(x[T])}else U.push(x[T]);x=U}return y?I:void 0}}function F(C,y){var v=C&&typeof C=="string"?[C]:C;if(!v||typeof v!="object"||!("length"in v))throw new Error("Invalid "+y+" `"+v+"`, expected non-empty string");return v}g.basicFilter=w(function(C,y){return y==="*"||C===y||C.indexOf(y+"-")>-1},!0),g.extendedFilter=w(function(C,y){var v=C.split("-"),D=y.split("-"),m=0,T=0;if(D[T]!=="*"&&v[m]!==D[T])return!1;for(m++,T++;T<D.length;)if(D[T]!=="*"){if(!v[m])return!1;if(v[m]!==D[T]){if(v[m].length===1)return!1;m++}else m++,T++}else T++;return!0},!0),g.lookup=w(function(C,y){for(var v,D=y;;){if(D==="*"||C===D)return!0;if((v=D.lastIndexOf("-"))<0)return!1;D.charAt(v-2)==="-"&&(v-=2),D=D.slice(0,v)}})},3973:function(b,g,w){b.exports=w(3854)},3854:function(b,g,w){var F=w(2415),C=w(3039),y=w(7778),v=w(5813),D=w(3165),m=w(9460);b.exports=function(z,W){var X,le=W||{},N=F.parse(String(z||"").toLowerCase(),le),$=F.stringify(N),fe=-1;if(!$)return $;for(;++fe<y.length;)C.extendedFilter($,y[fe].from).length&&(_(N,y[fe].from,y[fe].to),$=F.stringify(N));for(fe=-1;++fe<v.length;)I(N,v[fe].from.field,v[fe].from.value)&&R(N,v[fe].to.field,v[fe].to.value);for($=F.stringify(Object.assign({},N,x)),fe=-1;++fe<D.length;)$===D[fe]&&(_(N,D[fe],D[fe].split("-").slice(0,-1).join("-")),$=F.stringify(Object.assign({},N,x)));if(N.extensions.sort(j),le.warning)for(X in m)T.call(m[X],N[X])&&le.warning("Deprecated "+X+" `"+N[X]+"`, expected one of `"+m[X][N[X]].join("`, `")+"`",null,7);return N.script&&(N.script=N.script.charAt(0).toUpperCase()+N.script.slice(1)),N.region&&(N.region=N.region.toUpperCase()),F.stringify(N)};var T={}.hasOwnProperty,U=new Intl.Collator,x={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function _(z,W,X){var le,N=F.parse(W),$=F.parse(X),fe=[];for(le in N)N[le]&&N[le].length&&I(z,le,N[le])&&fe.push(le);for(le in $)$[le]&&$[le].length&&(fe.indexOf(le)>-1||!z[le]||!z[le].length)&&R(z,le,$[le])}function I(z,W,X){var le,N,$,fe,oe=!1;if(X){if(N=le=z[W],le&&typeof le=="object")for(N=[],$=-1;++$<le.length;)fe=le[$],X.indexOf(fe)<0?N.push(fe):oe=!0;else le===X&&(N=null,oe=!0);z[W]=N}return oe}function R(z,W,X){var le,N,$,fe=z[W];if(fe&&typeof fe=="object")for(le=[].concat(X),N=-1;++N<le.length;)$=le[N],fe.indexOf($)<0&&fe.push($);else z[W]=X}function j(z,W){return U.compare(z.singleton,W.singleton)}},2415:function(b,g,w){g.parse=w(6903),g.stringify=w(6713)},6903:function(b,g,w){var F=w(2219),C=w(3516),y=w(395),v=w(858),D=w(8589);b.exports=function T(U,x){var _,I,R,j=x||{},z={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},W=String(U),X=W.toLowerCase(),le=0;if(U==null)throw new Error("Expected string, got `"+U+"`");if(m.call(D,X))return(j.normalize==null||j.normalize)&&D[X]?T(D[X]):(z[v.indexOf(X)===-1?"irregular":"regular"]=W,z);for(;C(X.charCodeAt(le))&&le<9;)le++;if(le>1&&le<9){if(z.language=W.slice(0,le),le<4)for(I=0;X.charCodeAt(le)===45&&C(X.charCodeAt(le+1))&&C(X.charCodeAt(le+2))&&C(X.charCodeAt(le+3))&&!C(X.charCodeAt(le+4));){if(I>2)return N(le,3,"Too many extended language subtags, expected at most 3 subtags");z.extendedLanguageSubtags.push(W.slice(le+1,le+4)),le+=4,I++}for(X.charCodeAt(le)===45&&C(X.charCodeAt(le+1))&&C(X.charCodeAt(le+2))&&C(X.charCodeAt(le+3))&&C(X.charCodeAt(le+4))&&!C(X.charCodeAt(le+5))&&(z.script=W.slice(le+1,le+5),le+=5),X.charCodeAt(le)===45&&(C(X.charCodeAt(le+1))&&C(X.charCodeAt(le+2))&&!C(X.charCodeAt(le+3))?(z.region=W.slice(le+1,le+3),le+=3):y(X.charCodeAt(le+1))&&y(X.charCodeAt(le+2))&&y(X.charCodeAt(le+3))&&!y(X.charCodeAt(le+4))&&(z.region=W.slice(le+1,le+4),le+=4));X.charCodeAt(le)===45;){for(R=_=le+1;F(X.charCodeAt(R));){if(R-_>7)return N(R,1,"Too long variant, expected at most 8 characters");R++}if(!(R-_>4||R-_>3&&y(X.charCodeAt(_))))break;z.variants.push(W.slice(_,R)),le=R}for(;X.charCodeAt(le)===45&&X.charCodeAt(le+1)!==120&&F(X.charCodeAt(le+1))&&X.charCodeAt(le+2)===45&&F(X.charCodeAt(le+3));){for(R=le+2,I=0;X.charCodeAt(R)===45&&F(X.charCodeAt(R+1))&&F(X.charCodeAt(R+2));)for(R=(_=R+1)+2,I++;F(X.charCodeAt(R));){if(R-_>7)return N(R,2,"Too long extension, expected at most 8 characters");R++}if(!I)return N(R,4,"Empty extension, extensions must have at least 2 characters of content");z.extensions.push({singleton:W.charAt(le+1),extensions:W.slice(le+3,R).split("-")}),le=R}}else le=0;if(le===0&&X.charCodeAt(le)===120||X.charCodeAt(le)===45&&X.charCodeAt(le+1)===120)for(R=le=le?le+2:1;X.charCodeAt(R)===45&&F(X.charCodeAt(R+1));){for(R=_=le+1;F(X.charCodeAt(R));){if(R-_>7)return N(R,5,"Too long private-use area, expected at most 8 characters");R++}z.privateuse.push(W.slice(le+1,R)),le=R}return le!==W.length?N(le,6,"Found superfluous content after tag"):z;function N($,fe,oe){return j.warning&&j.warning(oe,fe,$),j.forgiving?z:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var m={}.hasOwnProperty},6713:function(b){b.exports=function(g){var w,F,C,y=g||{},v=[];if(y.irregular||y.regular)return y.irregular||y.regular;if(y.language)for(v=v.concat(y.language,y.extendedLanguageSubtags||[],y.script||[],y.region||[],y.variants||[]),w=y.extensions||[],F=-1;++F<w.length;)(C=w[F]).singleton&&C.extensions&&C.extensions.length&&(v=v.concat(C.singleton,C.extensions));return y.privateuse&&y.privateuse.length&&(v=v.concat("x",y.privateuse)),v.join("-")}},1549:function(b,g,w){var F=w(6693),C=w(2165),y=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=m,g.SlowBuffer=function(O){return+O!=O&&(O=0),m.alloc(+O)},g.INSPECT_MAX_BYTES=50;var v=2147483647;function D(O){if(O>v)throw new RangeError('The value "'+O+'" is invalid for option "size"');var M=new Uint8Array(O);return Object.setPrototypeOf(M,m.prototype),M}function m(O,M,q){if(typeof O=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return x(O)}return T(O,M,q)}function T(O,M,q){if(typeof O=="string")return function(de,He){if(typeof He=="string"&&He!==""||(He="utf8"),!m.isEncoding(He))throw new TypeError("Unknown encoding: "+He);var Tt=0|j(de,He),ot=D(Tt),rt=ot.write(de,He);return rt!==Tt&&(ot=ot.slice(0,rt)),ot}(O,M);if(ArrayBuffer.isView(O))return function(de){if(Ce(de,Uint8Array)){var He=new Uint8Array(de);return I(He.buffer,He.byteOffset,He.byteLength)}return _(de)}(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(Ce(O,ArrayBuffer)||O&&Ce(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce(O,SharedArrayBuffer)||O&&Ce(O.buffer,SharedArrayBuffer)))return I(O,M,q);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var K=O.valueOf&&O.valueOf();if(K!=null&&K!==O)return m.from(K,M,q);var ye=function(de){if(m.isBuffer(de)){var He=0|R(de.length),Tt=D(He);return Tt.length===0||de.copy(Tt,0,0,He),Tt}return de.length!==void 0?typeof de.length!="number"||te(de.length)?D(0):_(de):de.type==="Buffer"&&Array.isArray(de.data)?_(de.data):void 0}(O);if(ye)return ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return m.from(O[Symbol.toPrimitive]("string"),M,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}function U(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function x(O){return U(O),D(O<0?0:0|R(O))}function _(O){for(var M=O.length<0?0:0|R(O.length),q=D(M),K=0;K<M;K+=1)q[K]=255&O[K];return q}function I(O,M,q){if(M<0||O.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<M+(q||0))throw new RangeError('"length" is outside of buffer bounds');var K;return K=M===void 0&&q===void 0?new Uint8Array(O):q===void 0?new Uint8Array(O,M):new Uint8Array(O,M,q),Object.setPrototypeOf(K,m.prototype),K}function R(O){if(O>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|O}function j(O,M){if(m.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||Ce(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);var q=O.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&q===0)return 0;for(var ye=!1;;)switch(M){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return Kt(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return St(O).length;default:if(ye)return K?-1:Kt(O).length;M=(""+M).toLowerCase(),ye=!0}}function z(O,M,q){var K=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0)<=(M>>>=0))return"";for(O||(O="utf8");;)switch(O){case"hex":return ut(this,M,q);case"utf8":case"utf-8":return Xe(this,M,q);case"ascii":return Ze(this,M,q);case"latin1":case"binary":return it(this,M,q);case"base64":return Ie(this,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $e(this,M,q);default:if(K)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),K=!0}}function W(O,M,q){var K=O[M];O[M]=O[q],O[q]=K}function X(O,M,q,K,ye){if(O.length===0)return-1;if(typeof q=="string"?(K=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),te(q=+q)&&(q=ye?0:O.length-1),q<0&&(q=O.length+q),q>=O.length){if(ye)return-1;q=O.length-1}else if(q<0){if(!ye)return-1;q=0}if(typeof M=="string"&&(M=m.from(M,K)),m.isBuffer(M))return M.length===0?-1:le(O,M,q,K,ye);if(typeof M=="number")return M&=255,typeof Uint8Array.prototype.indexOf=="function"?ye?Uint8Array.prototype.indexOf.call(O,M,q):Uint8Array.prototype.lastIndexOf.call(O,M,q):le(O,[M],q,K,ye);throw new TypeError("val must be string, number or Buffer")}function le(O,M,q,K,ye){var de,He=1,Tt=O.length,ot=M.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(O.length<2||M.length<2)return-1;He=2,Tt/=2,ot/=2,q/=2}function rt(_t,Ct){return He===1?_t[Ct]:_t.readUInt16BE(Ct*He)}if(ye){var et=-1;for(de=q;de<Tt;de++)if(rt(O,de)===rt(M,et===-1?0:de-et)){if(et===-1&&(et=de),de-et+1===ot)return et*He}else et!==-1&&(de-=de-et),et=-1}else for(q+ot>Tt&&(q=Tt-ot),de=q;de>=0;de--){for(var ft=!0,yt=0;yt<ot;yt++)if(rt(O,de+yt)!==rt(M,yt)){ft=!1;break}if(ft)return de}return-1}function N(O,M,q,K){q=Number(q)||0;var ye=O.length-q;K?(K=Number(K))>ye&&(K=ye):K=ye;var de=M.length;K>de/2&&(K=de/2);for(var He=0;He<K;++He){var Tt=parseInt(M.substr(2*He,2),16);if(te(Tt))return He;O[q+He]=Tt}return He}function $(O,M,q,K){return Lt(Kt(M,O.length-q),O,q,K)}function fe(O,M,q,K){return Lt(function(ye){for(var de=[],He=0;He<ye.length;++He)de.push(255&ye.charCodeAt(He));return de}(M),O,q,K)}function oe(O,M,q,K){return Lt(St(M),O,q,K)}function he(O,M,q,K){return Lt(function(ye,de){for(var He,Tt,ot,rt=[],et=0;et<ye.length&&!((de-=2)<0);++et)Tt=(He=ye.charCodeAt(et))>>8,ot=He%256,rt.push(ot),rt.push(Tt);return rt}(M,O.length-q),O,q,K)}function Ie(O,M,q){return M===0&&q===O.length?F.fromByteArray(O):F.fromByteArray(O.slice(M,q))}function Xe(O,M,q){q=Math.min(O.length,q);for(var K=[],ye=M;ye<q;){var de,He,Tt,ot,rt=O[ye],et=null,ft=rt>239?4:rt>223?3:rt>191?2:1;if(ye+ft<=q)switch(ft){case 1:rt<128&&(et=rt);break;case 2:(192&(de=O[ye+1]))==128&&(ot=(31&rt)<<6|63&de)>127&&(et=ot);break;case 3:de=O[ye+1],He=O[ye+2],(192&de)==128&&(192&He)==128&&(ot=(15&rt)<<12|(63&de)<<6|63&He)>2047&&(ot<55296||ot>57343)&&(et=ot);break;case 4:de=O[ye+1],He=O[ye+2],Tt=O[ye+3],(192&de)==128&&(192&He)==128&&(192&Tt)==128&&(ot=(15&rt)<<18|(63&de)<<12|(63&He)<<6|63&Tt)>65535&&ot<1114112&&(et=ot)}et===null?(et=65533,ft=1):et>65535&&(et-=65536,K.push(et>>>10&1023|55296),et=56320|1023&et),K.push(et),ye+=ft}return function(yt){var _t=yt.length;if(_t<=Ae)return String.fromCharCode.apply(String,yt);for(var Ct="",hn=0;hn<_t;)Ct+=String.fromCharCode.apply(String,yt.slice(hn,hn+=Ae));return Ct}(K)}g.kMaxLength=v,m.TYPED_ARRAY_SUPPORT=function(){try{var O=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(O,M),O.foo()===42}catch(q){return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(O,M,q){return T(O,M,q)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(O,M,q){return function(K,ye,de){return U(K),K<=0?D(K):ye!==void 0?typeof de=="string"?D(K).fill(ye,de):D(K).fill(ye):D(K)}(O,M,q)},m.allocUnsafe=function(O){return x(O)},m.allocUnsafeSlow=function(O){return x(O)},m.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==m.prototype},m.compare=function(O,M){if(Ce(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),Ce(M,Uint8Array)&&(M=m.from(M,M.offset,M.byteLength)),!m.isBuffer(O)||!m.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===M)return 0;for(var q=O.length,K=M.length,ye=0,de=Math.min(q,K);ye<de;++ye)if(O[ye]!==M[ye]){q=O[ye],K=M[ye];break}return q<K?-1:K<q?1:0},m.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(O,M){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return m.alloc(0);var q;if(M===void 0)for(M=0,q=0;q<O.length;++q)M+=O[q].length;var K=m.allocUnsafe(M),ye=0;for(q=0;q<O.length;++q){var de=O[q];if(Ce(de,Uint8Array))ye+de.length>K.length?m.from(de).copy(K,ye):Uint8Array.prototype.set.call(K,de,ye);else{if(!m.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(K,ye)}ye+=de.length}return K},m.byteLength=j,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<O;M+=2)W(this,M,M+1);return this},m.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<O;M+=4)W(this,M,M+3),W(this,M+1,M+2);return this},m.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<O;M+=8)W(this,M,M+7),W(this,M+1,M+6),W(this,M+2,M+5),W(this,M+3,M+4);return this},m.prototype.toString=function(){var O=this.length;return O===0?"":arguments.length===0?Xe(this,0,O):z.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(O){if(!m.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O||m.compare(this,O)===0},m.prototype.inspect=function(){var O="",M=g.INSPECT_MAX_BYTES;return O=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(O+=" ... "),"<Buffer "+O+">"},y&&(m.prototype[y]=m.prototype.inspect),m.prototype.compare=function(O,M,q,K,ye){if(Ce(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),!m.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(M===void 0&&(M=0),q===void 0&&(q=O?O.length:0),K===void 0&&(K=0),ye===void 0&&(ye=this.length),M<0||q>O.length||K<0||ye>this.length)throw new RangeError("out of range index");if(K>=ye&&M>=q)return 0;if(K>=ye)return-1;if(M>=q)return 1;if(this===O)return 0;for(var de=(ye>>>=0)-(K>>>=0),He=(q>>>=0)-(M>>>=0),Tt=Math.min(de,He),ot=this.slice(K,ye),rt=O.slice(M,q),et=0;et<Tt;++et)if(ot[et]!==rt[et]){de=ot[et],He=rt[et];break}return de<He?-1:He<de?1:0},m.prototype.includes=function(O,M,q){return this.indexOf(O,M,q)!==-1},m.prototype.indexOf=function(O,M,q){return X(this,O,M,q,!0)},m.prototype.lastIndexOf=function(O,M,q){return X(this,O,M,q,!1)},m.prototype.write=function(O,M,q,K){if(M===void 0)K="utf8",q=this.length,M=0;else if(q===void 0&&typeof M=="string")K=M,q=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(q)?(q>>>=0,K===void 0&&(K="utf8")):(K=q,q=void 0)}var ye=this.length-M;if((q===void 0||q>ye)&&(q=ye),O.length>0&&(q<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var de=!1;;)switch(K){case"hex":return N(this,O,M,q);case"utf8":case"utf-8":return $(this,O,M,q);case"ascii":case"latin1":case"binary":return fe(this,O,M,q);case"base64":return oe(this,O,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,O,M,q);default:if(de)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),de=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ae=4096;function Ze(O,M,q){var K="";q=Math.min(O.length,q);for(var ye=M;ye<q;++ye)K+=String.fromCharCode(127&O[ye]);return K}function it(O,M,q){var K="";q=Math.min(O.length,q);for(var ye=M;ye<q;++ye)K+=String.fromCharCode(O[ye]);return K}function ut(O,M,q){var K=O.length;(!M||M<0)&&(M=0),(!q||q<0||q>K)&&(q=K);for(var ye="",de=M;de<q;++de)ye+=Fe[O[de]];return ye}function $e(O,M,q){for(var K=O.slice(M,q),ye="",de=0;de<K.length-1;de+=2)ye+=String.fromCharCode(K[de]+256*K[de+1]);return ye}function lt(O,M,q){if(O%1!=0||O<0)throw new RangeError("offset is not uint");if(O+M>q)throw new RangeError("Trying to access beyond buffer length")}function At(O,M,q,K,ye,de){if(!m.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>ye||M<de)throw new RangeError('"value" argument is out of bounds');if(q+K>O.length)throw new RangeError("Index out of range")}function Oe(O,M,q,K,ye,de){if(q+K>O.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function Qe(O,M,q,K,ye){return M=+M,q>>>=0,ye||Oe(O,0,q,4),C.write(O,M,q,K,23,4),q+4}function ct(O,M,q,K,ye){return M=+M,q>>>=0,ye||Oe(O,0,q,8),C.write(O,M,q,K,52,8),q+8}m.prototype.slice=function(O,M){var q=this.length;(O=~~O)<0?(O+=q)<0&&(O=0):O>q&&(O=q),(M=M===void 0?q:~~M)<0?(M+=q)<0&&(M=0):M>q&&(M=q),M<O&&(M=O);var K=this.subarray(O,M);return Object.setPrototypeOf(K,m.prototype),K},m.prototype.readUintLE=m.prototype.readUIntLE=function(O,M,q){O>>>=0,M>>>=0,q||lt(O,M,this.length);for(var K=this[O],ye=1,de=0;++de<M&&(ye*=256);)K+=this[O+de]*ye;return K},m.prototype.readUintBE=m.prototype.readUIntBE=function(O,M,q){O>>>=0,M>>>=0,q||lt(O,M,this.length);for(var K=this[O+--M],ye=1;M>0&&(ye*=256);)K+=this[O+--M]*ye;return K},m.prototype.readUint8=m.prototype.readUInt8=function(O,M){return O>>>=0,M||lt(O,1,this.length),this[O]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(O,M){return O>>>=0,M||lt(O,2,this.length),this[O]|this[O+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(O,M){return O>>>=0,M||lt(O,2,this.length),this[O]<<8|this[O+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(O,M){return O>>>=0,M||lt(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(O,M){return O>>>=0,M||lt(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},m.prototype.readIntLE=function(O,M,q){O>>>=0,M>>>=0,q||lt(O,M,this.length);for(var K=this[O],ye=1,de=0;++de<M&&(ye*=256);)K+=this[O+de]*ye;return K>=(ye*=128)&&(K-=Math.pow(2,8*M)),K},m.prototype.readIntBE=function(O,M,q){O>>>=0,M>>>=0,q||lt(O,M,this.length);for(var K=M,ye=1,de=this[O+--K];K>0&&(ye*=256);)de+=this[O+--K]*ye;return de>=(ye*=128)&&(de-=Math.pow(2,8*M)),de},m.prototype.readInt8=function(O,M){return O>>>=0,M||lt(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},m.prototype.readInt16LE=function(O,M){O>>>=0,M||lt(O,2,this.length);var q=this[O]|this[O+1]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt16BE=function(O,M){O>>>=0,M||lt(O,2,this.length);var q=this[O+1]|this[O]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt32LE=function(O,M){return O>>>=0,M||lt(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},m.prototype.readInt32BE=function(O,M){return O>>>=0,M||lt(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},m.prototype.readFloatLE=function(O,M){return O>>>=0,M||lt(O,4,this.length),C.read(this,O,!0,23,4)},m.prototype.readFloatBE=function(O,M){return O>>>=0,M||lt(O,4,this.length),C.read(this,O,!1,23,4)},m.prototype.readDoubleLE=function(O,M){return O>>>=0,M||lt(O,8,this.length),C.read(this,O,!0,52,8)},m.prototype.readDoubleBE=function(O,M){return O>>>=0,M||lt(O,8,this.length),C.read(this,O,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||At(this,O,M,q,Math.pow(2,8*q)-1,0);var ye=1,de=0;for(this[M]=255&O;++de<q&&(ye*=256);)this[M+de]=O/ye&255;return M+q},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||At(this,O,M,q,Math.pow(2,8*q)-1,0);var ye=q-1,de=1;for(this[M+ye]=255&O;--ye>=0&&(de*=256);)this[M+ye]=O/de&255;return M+q},m.prototype.writeUint8=m.prototype.writeUInt8=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,1,255,0),this[M]=255&O,M+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,2,65535,0),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,2,65535,0),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,4,4294967295,0),this[M+3]=O>>>24,this[M+2]=O>>>16,this[M+1]=O>>>8,this[M]=255&O,M+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,4,4294967295,0),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeIntLE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var ye=Math.pow(2,8*q-1);At(this,O,M,q,ye-1,-ye)}var de=0,He=1,Tt=0;for(this[M]=255&O;++de<q&&(He*=256);)O<0&&Tt===0&&this[M+de-1]!==0&&(Tt=1),this[M+de]=(O/He>>0)-Tt&255;return M+q},m.prototype.writeIntBE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var ye=Math.pow(2,8*q-1);At(this,O,M,q,ye-1,-ye)}var de=q-1,He=1,Tt=0;for(this[M+de]=255&O;--de>=0&&(He*=256);)O<0&&Tt===0&&this[M+de+1]!==0&&(Tt=1),this[M+de]=(O/He>>0)-Tt&255;return M+q},m.prototype.writeInt8=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,1,127,-128),O<0&&(O=255+O+1),this[M]=255&O,M+1},m.prototype.writeInt16LE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,2,32767,-32768),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeInt16BE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,2,32767,-32768),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeInt32LE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,4,2147483647,-2147483648),this[M]=255&O,this[M+1]=O>>>8,this[M+2]=O>>>16,this[M+3]=O>>>24,M+4},m.prototype.writeInt32BE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeFloatLE=function(O,M,q){return Qe(this,O,M,!0,q)},m.prototype.writeFloatBE=function(O,M,q){return Qe(this,O,M,!1,q)},m.prototype.writeDoubleLE=function(O,M,q){return ct(this,O,M,!0,q)},m.prototype.writeDoubleBE=function(O,M,q){return ct(this,O,M,!1,q)},m.prototype.copy=function(O,M,q,K){if(!m.isBuffer(O))throw new TypeError("argument should be a Buffer");if(q||(q=0),K||K===0||(K=this.length),M>=O.length&&(M=O.length),M||(M=0),K>0&&K<q&&(K=q),K===q||O.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),O.length-M<K-q&&(K=O.length-M+q);var ye=K-q;return this===O&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(M,q,K):Uint8Array.prototype.set.call(O,this.subarray(q,K),M),ye},m.prototype.fill=function(O,M,q,K){if(typeof O=="string"){if(typeof M=="string"?(K=M,M=0,q=this.length):typeof q=="string"&&(K=q,q=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!m.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(O.length===1){var ye=O.charCodeAt(0);(K==="utf8"&&ye<128||K==="latin1")&&(O=ye)}}else typeof O=="number"?O&=255:typeof O=="boolean"&&(O=Number(O));if(M<0||this.length<M||this.length<q)throw new RangeError("Out of range index");if(q<=M)return this;var de;if(M>>>=0,q=q===void 0?this.length:q>>>0,O||(O=0),typeof O=="number")for(de=M;de<q;++de)this[de]=O;else{var He=m.isBuffer(O)?O:m.from(O,K),Tt=He.length;if(Tt===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(de=0;de<q-M;++de)this[de+M]=He[de%Tt]}return this};var Qt=/[^+/0-9A-Za-z-_]/g;function Kt(O,M){var q;M=M||1/0;for(var K=O.length,ye=null,de=[],He=0;He<K;++He){if((q=O.charCodeAt(He))>55295&&q<57344){if(!ye){if(q>56319){(M-=3)>-1&&de.push(239,191,189);continue}if(He+1===K){(M-=3)>-1&&de.push(239,191,189);continue}ye=q;continue}if(q<56320){(M-=3)>-1&&de.push(239,191,189),ye=q;continue}q=65536+(ye-55296<<10|q-56320)}else ye&&(M-=3)>-1&&de.push(239,191,189);if(ye=null,q<128){if((M-=1)<0)break;de.push(q)}else if(q<2048){if((M-=2)<0)break;de.push(q>>6|192,63&q|128)}else if(q<65536){if((M-=3)<0)break;de.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;de.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return de}function St(O){return F.toByteArray(function(M){if((M=(M=M.split("=")[0]).trim().replace(Qt,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M}(O))}function Lt(O,M,q,K){for(var ye=0;ye<K&&!(ye+q>=M.length||ye>=O.length);++ye)M[ye+q]=O[ye];return ye}function Ce(O,M){return O instanceof M||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===M.name}function te(O){return O!=O}var Fe=function(){for(var O="0123456789abcdef",M=new Array(256),q=0;q<16;++q)for(var K=16*q,ye=0;ye<16;++ye)M[K+ye]=O[q]+O[ye];return M}()},6693:function(b,g){g.byteLength=function(U){var x=m(U),_=x[0],I=x[1];return 3*(_+I)/4-I},g.toByteArray=function(U){var x,_,I=m(U),R=I[0],j=I[1],z=new C(function(le,N,$){return 3*(N+$)/4-$}(0,R,j)),W=0,X=j>0?R-4:R;for(_=0;_<X;_+=4)x=F[U.charCodeAt(_)]<<18|F[U.charCodeAt(_+1)]<<12|F[U.charCodeAt(_+2)]<<6|F[U.charCodeAt(_+3)],z[W++]=x>>16&255,z[W++]=x>>8&255,z[W++]=255&x;return j===2&&(x=F[U.charCodeAt(_)]<<2|F[U.charCodeAt(_+1)]>>4,z[W++]=255&x),j===1&&(x=F[U.charCodeAt(_)]<<10|F[U.charCodeAt(_+1)]<<4|F[U.charCodeAt(_+2)]>>2,z[W++]=x>>8&255,z[W++]=255&x),z},g.fromByteArray=function(U){for(var x,_=U.length,I=_%3,R=[],j=16383,z=0,W=_-I;z<W;z+=j)R.push(T(U,z,z+j>W?W:z+j));return I===1?(x=U[_-1],R.push(w[x>>2]+w[x<<4&63]+"==")):I===2&&(x=(U[_-2]<<8)+U[_-1],R.push(w[x>>10]+w[x>>4&63]+w[x<<2&63]+"=")),R.join("")};for(var w=[],F=[],C=typeof Uint8Array<"u"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0,D=y.length;v<D;++v)w[v]=y[v],F[y.charCodeAt(v)]=v;function m(U){var x=U.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=U.indexOf("=");return _===-1&&(_=x),[_,_===x?0:4-_%4]}function T(U,x,_){for(var I,R,j=[],z=x;z<_;z+=3)I=(U[z]<<16&16711680)+(U[z+1]<<8&65280)+(255&U[z+2]),j.push(w[(R=I)>>18&63]+w[R>>12&63]+w[R>>6&63]+w[63&R]);return j.join("")}F[45]=62,F[95]=63},2165:function(b,g){g.read=function(w,F,C,y,v){var D,m,T=8*v-y-1,U=(1<<T)-1,x=U>>1,_=-7,I=C?v-1:0,R=C?-1:1,j=w[F+I];for(I+=R,D=j&(1<<-_)-1,j>>=-_,_+=T;_>0;D=256*D+w[F+I],I+=R,_-=8);for(m=D&(1<<-_)-1,D>>=-_,_+=y;_>0;m=256*m+w[F+I],I+=R,_-=8);if(D===0)D=1-x;else{if(D===U)return m?NaN:1/0*(j?-1:1);m+=Math.pow(2,y),D-=x}return(j?-1:1)*m*Math.pow(2,D-y)},g.write=function(w,F,C,y,v,D){var m,T,U,x=8*D-v-1,_=(1<<x)-1,I=_>>1,R=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=y?0:D-1,z=y?1:-1,W=F<0||F===0&&1/F<0?1:0;for(F=Math.abs(F),isNaN(F)||F===1/0?(T=isNaN(F)?1:0,m=_):(m=Math.floor(Math.log(F)/Math.LN2),F*(U=Math.pow(2,-m))<1&&(m--,U*=2),(F+=m+I>=1?R/U:R*Math.pow(2,1-I))*U>=2&&(m++,U/=2),m+I>=_?(T=0,m=_):m+I>=1?(T=(F*U-1)*Math.pow(2,v),m+=I):(T=F*Math.pow(2,I-1)*Math.pow(2,v),m=0));v>=8;w[C+j]=255&T,j+=z,T/=256,v-=8);for(m=m<<v|T,x+=v;x>0;w[C+j]=255&m,j+=z,m/=256,x-=8);w[C+j-z]|=128*W}},6934:function(b,g){var w={parseBuffer:function(y){return new F(y).parse()},addBoxProcessor:function(y,v){typeof y=="string"&&typeof v=="function"&&(C.prototype._boxProcessors[y]=v)},createFile:function(){return new F},createBox:function(y,v,D){var m=C.create(y);return v&&v.append(m,D),m},createFullBox:function(y,v,D){var m=w.createBox(y,v,D);return m.version=0,m.flags=0,m},Utils:{}};w.Utils.dataViewToString=function(y,v){var D=v||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(D).decode(y);var m=[],T=0;if(D==="utf-8")for(;T<y.byteLength;){var U=y.getUint8(T++);U<128||(U<224?(U=(31&U)<<6,U|=63&y.getUint8(T++)):U<240?(U=(15&U)<<12,U|=(63&y.getUint8(T++))<<6,U|=63&y.getUint8(T++)):(U=(7&U)<<18,U|=(63&y.getUint8(T++))<<12,U|=(63&y.getUint8(T++))<<6,U|=63&y.getUint8(T++))),m.push(String.fromCharCode(U))}else for(;T<y.byteLength;)m.push(String.fromCharCode(y.getUint8(T++)));return m.join("")},w.Utils.utf8ToByteArray=function(y){var v,D;if(typeof TextEncoder<"u")v=new TextEncoder().encode(y);else for(v=[],D=0;D<y.length;++D){var m=y.charCodeAt(D);m<128?v.push(m):m<2048?(v.push(192|m>>6),v.push(128|63&m)):m<65536?(v.push(224|m>>12),v.push(128|63&m>>6),v.push(128|63&m)):(v.push(240|m>>18),v.push(128|63&m>>12),v.push(128|63&m>>6),v.push(128|63&m))}return v},w.Utils.appendBox=function(y,v,D){if(v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,D!==-1)if(D!=null){var m,T=-1;if(typeof D=="number")T=D;else{if(typeof D=="string")m=D;else{if(typeof D!="object"||!D.type)return void y.boxes.push(v);m=D.type}for(var U=0;U<y.boxes.length;U++)if(m===y.boxes[U].type){T=U+1;break}}y.boxes.splice(T,0,v)}else y.boxes.push(v)},g.parseBuffer=w.parseBuffer,g.addBoxProcessor=w.addBoxProcessor,g.createFile=w.createFile,g.createBox=w.createBox,g.createFullBox=w.createFullBox,g.Utils=w.Utils,w.Cursor=function(y){this.offset=y===void 0?0:y};var F=function(y){this._cursor=new w.Cursor,this.boxes=[],y&&(this._raw=new DataView(y))};F.prototype.fetch=function(y){var v=this.fetchAll(y,!0);return v.length?v[0]:null},F.prototype.fetchAll=function(y,v){var D=[];return F._sweep.call(this,y,D,v),D},F.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var y=C.parse(this);if(y.type===void 0)break;this.boxes.push(y)}return this},F._sweep=function(y,v,D){for(var m in this.type&&this.type==y&&v.push(this),this.boxes){if(v.length&&D)return;F._sweep.call(this.boxes[m],y,v,D)}},F.prototype.write=function(){var y,v=0;for(y=0;y<this.boxes.length;y++)v+=this.boxes[y].getLength(!1);var D=new Uint8Array(v);for(this._rawo=new DataView(D.buffer),this.bytes=D,this._cursor.offset=0,y=0;y<this.boxes.length;y++)this.boxes[y].write();return D.buffer},F.prototype.append=function(y,v){w.Utils.appendBox(this,y,v)};var C=function(){this._cursor=new w.Cursor};C.parse=function(y){var v=new C;return v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,v._parseBox(),y._cursor.offset=v._raw.byteOffset+v._raw.byteLength,v},C.create=function(y){var v=new C;return v.type=y,v.boxes=[],v},C.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],C.prototype._boxProcessors={},C.prototype._procField=function(y,v,D){this._parsing?this[y]=this._readField(v,D):this._writeField(v,D,this[y])},C.prototype._procFieldArray=function(y,v,D,m){var T;if(this._parsing)for(this[y]=[],T=0;T<v;T++)this[y][T]=this._readField(D,m);else for(T=0;T<this[y].length;T++)this._writeField(D,m,this[y][T])},C.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},C.prototype._procEntries=function(y,v,D){var m;if(this._parsing)for(this[y]=[],m=0;m<v;m++)this[y].push({}),D.call(this,this[y][m]);else for(m=0;m<v;m++)D.call(this,this[y][m])},C.prototype._procSubEntries=function(y,v,D,m){var T;if(this._parsing)for(y[v]=[],T=0;T<D;T++)y[v].push({}),m.call(this,y[v][T]);else for(T=0;T<D;T++)m.call(this,y[v][T])},C.prototype._procEntryField=function(y,v,D,m){this._parsing?y[v]=this._readField(D,m):this._writeField(D,m,y[v])},C.prototype._procSubBoxes=function(y,v){var D;if(this._parsing)for(this[y]=[],D=0;D<v;D++)this[y].push(C.parse(this));else for(D=0;D<v;D++)this._rawo?this[y][D].write():this.size+=this[y][D].getLength()},C.prototype._readField=function(y,v){switch(y){case"uint":return this._readUint(v);case"int":return this._readInt(v);case"template":return this._readTemplate(v);case"string":return v===-1?this._readTerminatedString():this._readString(v);case"data":return this._readData(v);case"utf8":return this._readUTF8String();default:return-1}},C.prototype._readInt=function(y){var v=null,D=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:v=this._raw.getInt8(D);break;case 16:v=this._raw.getInt16(D);break;case 32:v=this._raw.getInt32(D);break;case 64:var m=this._raw.getInt32(D),T=this._raw.getInt32(D+4);v=m*Math.pow(2,32)+T}return this._cursor.offset+=y>>3,v},C.prototype._readUint=function(y){var v,D,m=null,T=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:m=this._raw.getUint8(T);break;case 16:m=this._raw.getUint16(T);break;case 24:m=((v=this._raw.getUint16(T))<<8)+(D=this._raw.getUint8(T+2));break;case 32:m=this._raw.getUint32(T);break;case 64:v=this._raw.getUint32(T),D=this._raw.getUint32(T+4),m=v*Math.pow(2,32)+D}return this._cursor.offset+=y>>3,m},C.prototype._readString=function(y){for(var v="",D=0;D<y;D++){var m=this._readUint(8);v+=String.fromCharCode(m)}return v},C.prototype._readTemplate=function(y){return this._readUint(y/2)+this._readUint(y/2)/Math.pow(2,y/2)},C.prototype._readTerminatedString=function(){for(var y="";this._cursor.offset-this._offset<this._raw.byteLength;){var v=this._readUint(8);if(v===0)break;y+=String.fromCharCode(v)}return y},C.prototype._readData=function(y){var v=y>0?y:this._raw.byteLength-(this._cursor.offset-this._offset);if(v>0){var D=new Uint8Array(this._raw.buffer,this._cursor.offset,v);return this._cursor.offset+=v,D}return null},C.prototype._readUTF8String=function(){var y=this._raw.byteLength-(this._cursor.offset-this._offset),v=null;return y>0&&(v=new DataView(this._raw.buffer,this._cursor.offset,y),this._cursor.offset+=y),v&&w.Utils.dataViewToString(v)},C.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},C.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},C.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(C.parse(this))},C.prototype.append=function(y,v){w.Utils.appendBox(this,y,v)},C.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.size+=this.boxes[y].getLength();return this._data&&this._writeData(this._data),this.size},C.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.boxes[y].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},C.prototype._writeInt=function(y,v){if(this._rawo){var D=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setInt8(D,v);break;case 16:this._rawo.setInt16(D,v);break;case 32:this._rawo.setInt32(D,v);break;case 64:var m=Math.floor(v/Math.pow(2,32)),T=v-m*Math.pow(2,32);this._rawo.setUint32(D,m),this._rawo.setUint32(D+4,T)}this._cursor.offset+=y>>3}else this.size+=y>>3},C.prototype._writeUint=function(y,v){if(this._rawo){var D,m,T=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setUint8(T,v);break;case 16:this._rawo.setUint16(T,v);break;case 24:D=(16776960&v)>>8,m=255&v,this._rawo.setUint16(T,D),this._rawo.setUint8(T+2,m);break;case 32:this._rawo.setUint32(T,v);break;case 64:m=v-(D=Math.floor(v/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(T,D),this._rawo.setUint32(T+4,m)}this._cursor.offset+=y>>3}else this.size+=y>>3},C.prototype._writeString=function(y,v){for(var D=0;D<y;D++)this._writeUint(8,v.charCodeAt(D))},C.prototype._writeTerminatedString=function(y){if(y.length!==0){for(var v=0;v<y.length;v++)this._writeUint(8,y.charCodeAt(v));this._writeUint(8,0)}},C.prototype._writeTemplate=function(y,v){var D=Math.floor(v),m=(v-D)*Math.pow(2,y/2);this._writeUint(y/2,D),this._writeUint(y/2,m)},C.prototype._writeData=function(y){if(y)if(this._rawo){if(y instanceof Array){for(var v=this._cursor.offset-this._rawo.byteOffset,D=0;D<y.length;D++)this._rawo.setInt8(v+D,y[D]);this._cursor.offset+=y.length}y instanceof Uint8Array&&(this._root.bytes.set(y,this._cursor.offset),this._cursor.offset+=y.length)}else this.size+=y.length},C.prototype._writeUTF8String=function(y){var v=w.Utils.utf8ToByteArray(y);if(this._rawo)for(var D=new DataView(this._rawo.buffer,this._cursor.offset,v.length),m=0;m<v.length;m++)D.setUint8(m,v[m]);else this.size+=v.length},C.prototype._writeField=function(y,v,D){switch(y){case"uint":this._writeUint(v,D);break;case"int":this._writeInt(v,D);break;case"template":this._writeTemplate(v,D);break;case"string":v==-1?this._writeTerminatedString(D):this._writeString(v,D);break;case"data":this._writeData(D);break;case"utf8":this._writeUTF8String(D)}},C.prototype._boxProcessors.avc1=C.prototype._boxProcessors.avc2=C.prototype._boxProcessors.avc3=C.prototype._boxProcessors.avc4=C.prototype._boxProcessors.hvc1=C.prototype._boxProcessors.hev1=C.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},C.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_offset",this.version===1?"int":"uint",32)})},C.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},C.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"segment_duration","uint",this.version===1?64:32),this._procEntryField(y,"media_time","int",this.version===1?64:32),this._procEntryField(y,"media_rate_integer","int",16),this._procEntryField(y,"media_rate_fraction","int",16)})},C.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},C.prototype._boxProcessors.free=C.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},C.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},C.prototype._boxProcessors.ftyp=C.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var y=-1;this._parsing&&(y=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",y,"string",4)},C.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},C.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},C.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},C.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},C.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},C.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},C.prototype._boxProcessors.mp4a=C.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},C.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},C.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},C.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},C.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},C.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},C.prototype._boxProcessors.sdtp=function(){this._procFullBox();var y=-1;this._parsing&&(y=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",y,"uint",8)},C.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(y){this._parsing||(y.reference=(1&y.reference_type)<<31,y.reference|=2147483647&y.referenced_size,y.sap=(1&y.starts_with_SAP)<<31,y.sap|=(3&y.SAP_type)<<28,y.sap|=268435455&y.SAP_delta_time),this._procEntryField(y,"reference","uint",32),this._procEntryField(y,"subsegment_duration","uint",32),this._procEntryField(y,"sap","uint",32),this._parsing&&(y.reference_type=y.reference>>31&1,y.referenced_size=2147483647&y.reference,y.starts_with_SAP=y.sap>>31&1,y.SAP_type=y.sap>>28&7,y.SAP_delta_time=268435455&y.sap)})},C.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},C.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(y){this._procEntryField(y,"ranges_count","uint",32),this._procSubEntries(y,"ranges",y.ranges_count,function(v){this._procEntryField(v,"level","uint",8),this._procEntryField(v,"range_size","uint",24)})})},C.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},C.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},C.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_delta","uint",32)})},C.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_delta","uint",32),this._procEntryField(y,"subsample_count","uint",16),this._procSubEntries(y,"subsamples",y.subsample_count,function(v){this._procEntryField(v,"subsample_size","uint",this.version===1?32:16),this._procEntryField(v,"subsample_priority","uint",8),this._procEntryField(v,"discardable","uint",8),this._procEntryField(v,"codec_specific_parameters","uint",32)})})},C.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},C.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},C.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},C.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(y){this._procEntryField(y,"time","uint",this.version===1?64:32),this._procEntryField(y,"moof_offset","uint",this.version===1?64:32),this._procEntryField(y,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(y,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(y,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},C.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},C.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},C.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(y){256&this.flags&&this._procEntryField(y,"sample_duration","uint",32),512&this.flags&&this._procEntryField(y,"sample_size","uint",32),1024&this.flags&&this._procEntryField(y,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(y,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},C.prototype._boxProcessors["url "]=C.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},C.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},C.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},C.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},C.prototype._boxProcessors.vtte=function(){}},5530:function(b,g,w){b.exports=w(6146).polyfill()},6146:function(b,g,w){b.exports=function(){function F(St){return typeof St=="function"}var C=Array.isArray?Array.isArray:function(St){return Object.prototype.toString.call(St)==="[object Array]"},y=0,v=void 0,D=void 0,m=function(St,Lt){j[y]=St,j[y+1]=Lt,(y+=2)===2&&(D?D(z):$())},T=typeof window<"u"?window:void 0,U=T||{},x=U.MutationObserver||U.WebKitMutationObserver,_=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",I=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function R(){var St=setTimeout;return function(){return St(z,1)}}var j=new Array(1e3);function z(){for(var St=0;St<y;St+=2)(0,j[St])(j[St+1]),j[St]=void 0,j[St+1]=void 0;y=0}var W,X,le,N,$=void 0;function fe(St,Lt){var Ce=this,te=new this.constructor(Ie);te[he]===void 0&&ct(te);var Fe=Ce._state;if(Fe){var O=arguments[Fe-1];m(function(){return Oe(Fe,te,O,Ce._result)})}else lt(Ce,te,St,Lt);return te}function oe(St){if(St&&typeof St=="object"&&St.constructor===this)return St;var Lt=new this(Ie);return Ze(Lt,St),Lt}$=_?function(){return process.nextTick(z)}:x?(X=0,le=new x(z),N=document.createTextNode(""),le.observe(N,{characterData:!0}),function(){N.data=X=++X%2}):I?((W=new MessageChannel).port1.onmessage=z,function(){return W.port2.postMessage(0)}):T===void 0?function(){try{var St=Function("return this")().require("vertx");return(v=St.runOnLoop||St.runOnContext)!==void 0?function(){v(z)}:R()}catch(Lt){return R()}}():R();var he=Math.random().toString(36).substring(2);function Ie(){}var Xe=void 0;function Ae(St,Lt,Ce){Lt.constructor===St.constructor&&Ce===fe&&Lt.constructor.resolve===oe?function(te,Fe){Fe._state===1?ut(te,Fe._result):Fe._state===2?$e(te,Fe._result):lt(Fe,void 0,function(O){return Ze(te,O)},function(O){return $e(te,O)})}(St,Lt):Ce===void 0?ut(St,Lt):F(Ce)?function(te,Fe,O){m(function(M){var q=!1,K=function(ye,de,He,Tt){try{ye.call(de,He,Tt)}catch(ot){return ot}}(O,Fe,function(ye){q||(q=!0,Fe!==ye?Ze(M,ye):ut(M,ye))},function(ye){q||(q=!0,$e(M,ye))},M._label);!q&&K&&(q=!0,$e(M,K))},te)}(St,Lt,Ce):ut(St,Lt)}function Ze(St,Lt){if(St===Lt)$e(St,new TypeError("You cannot resolve a promise with itself"));else if(Fe=typeof(te=Lt),te===null||Fe!=="object"&&Fe!=="function")ut(St,Lt);else{var Ce=void 0;try{Ce=Lt.then}catch(O){return void $e(St,O)}Ae(St,Lt,Ce)}var te,Fe}function it(St){St._onerror&&St._onerror(St._result),At(St)}function ut(St,Lt){St._state===Xe&&(St._result=Lt,St._state=1,St._subscribers.length!==0&&m(At,St))}function $e(St,Lt){St._state===Xe&&(St._state=2,St._result=Lt,m(it,St))}function lt(St,Lt,Ce,te){var Fe=St._subscribers,O=Fe.length;St._onerror=null,Fe[O]=Lt,Fe[O+1]=Ce,Fe[O+2]=te,O===0&&St._state&&m(At,St)}function At(St){var Lt=St._subscribers,Ce=St._state;if(Lt.length!==0){for(var te=void 0,Fe=void 0,O=St._result,M=0;M<Lt.length;M+=3)te=Lt[M],Fe=Lt[M+Ce],te?Oe(Ce,te,Fe,O):Fe(O);St._subscribers.length=0}}function Oe(St,Lt,Ce,te){var Fe=F(Ce),O=void 0,M=void 0,q=!0;if(Fe){try{O=Ce(te)}catch(K){q=!1,M=K}if(Lt===O)return void $e(Lt,new TypeError("A promises callback cannot return that same promise."))}else O=te;Lt._state!==Xe||(Fe&&q?Ze(Lt,O):q===!1?$e(Lt,M):St===1?ut(Lt,O):St===2&&$e(Lt,O))}var Qe=0;function ct(St){St[he]=Qe++,St._state=void 0,St._result=void 0,St._subscribers=[]}var Qt=function(){function St(Lt,Ce){this._instanceConstructor=Lt,this.promise=new Lt(Ie),this.promise[he]||ct(this.promise),C(Ce)?(this.length=Ce.length,this._remaining=Ce.length,this._result=new Array(this.length),this.length===0?ut(this.promise,this._result):(this.length=this.length||0,this._enumerate(Ce),this._remaining===0&&ut(this.promise,this._result))):$e(this.promise,new Error("Array Methods must be provided an Array"))}return St.prototype._enumerate=function(Lt){for(var Ce=0;this._state===Xe&&Ce<Lt.length;Ce++)this._eachEntry(Lt[Ce],Ce)},St.prototype._eachEntry=function(Lt,Ce){var te=this._instanceConstructor,Fe=te.resolve;if(Fe===oe){var O=void 0,M=void 0,q=!1;try{O=Lt.then}catch(ye){q=!0,M=ye}if(O===fe&&Lt._state!==Xe)this._settledAt(Lt._state,Ce,Lt._result);else if(typeof O!="function")this._remaining--,this._result[Ce]=Lt;else if(te===Kt){var K=new te(Ie);q?$e(K,M):Ae(K,Lt,O),this._willSettleAt(K,Ce)}else this._willSettleAt(new te(function(ye){return ye(Lt)}),Ce)}else this._willSettleAt(Fe(Lt),Ce)},St.prototype._settledAt=function(Lt,Ce,te){var Fe=this.promise;Fe._state===Xe&&(this._remaining--,Lt===2?$e(Fe,te):this._result[Ce]=te),this._remaining===0&&ut(Fe,this._result)},St.prototype._willSettleAt=function(Lt,Ce){var te=this;lt(Lt,void 0,function(Fe){return te._settledAt(1,Ce,Fe)},function(Fe){return te._settledAt(2,Ce,Fe)})},St}(),Kt=function(){function St(Lt){this[he]=Qe++,this._result=this._state=void 0,this._subscribers=[],Ie!==Lt&&(typeof Lt!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof St?function(Ce,te){try{te(function(Fe){Ze(Ce,Fe)},function(Fe){$e(Ce,Fe)})}catch(Fe){$e(Ce,Fe)}}(this,Lt):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return St.prototype.catch=function(Lt){return this.then(null,Lt)},St.prototype.finally=function(Lt){var Ce=this,te=Ce.constructor;return F(Lt)?Ce.then(function(Fe){return te.resolve(Lt()).then(function(){return Fe})},function(Fe){return te.resolve(Lt()).then(function(){throw Fe})}):Ce.then(Lt,Lt)},St}();return Kt.prototype.then=fe,Kt.all=function(St){return new Qt(this,St).promise},Kt.race=function(St){var Lt=this;return C(St)?new Lt(function(Ce,te){for(var Fe=St.length,O=0;O<Fe;O++)Lt.resolve(St[O]).then(Ce,te)}):new Lt(function(Ce,te){return te(new TypeError("You must pass an array to race."))})},Kt.resolve=oe,Kt.reject=function(St){var Lt=new this(Ie);return $e(Lt,St),Lt},Kt._setScheduler=function(St){D=St},Kt._setAsap=function(St){m=St},Kt._asap=m,Kt.polyfill=function(){var St=void 0;if(w.g!==void 0)St=w.g;else if(typeof self<"u")St=self;else try{St=Function("return this")()}catch(te){throw new Error("polyfill failed because global object is unavailable in this environment")}var Lt=St.Promise;if(Lt){var Ce=null;try{Ce=Object.prototype.toString.call(Lt.resolve())}catch(te){}if(Ce==="[object Promise]"&&!Lt.cast)return}St.Promise=Kt},Kt.Promise=Kt,Kt}()},1159:function(b){var g,w=typeof Reflect=="object"?Reflect:null,F=w&&typeof w.apply=="function"?w.apply:function(z,W,X){return Function.prototype.apply.call(z,W,X)};g=w&&typeof w.ownKeys=="function"?w.ownKeys:Object.getOwnPropertySymbols?function(z){return Object.getOwnPropertyNames(z).concat(Object.getOwnPropertySymbols(z))}:function(z){return Object.getOwnPropertyNames(z)};var C=Number.isNaN||function(z){return z!=z};function y(){y.init.call(this)}b.exports=y,b.exports.once=function(z,W){return new Promise(function(X,le){function N(fe){z.removeListener(W,$),le(fe)}function $(){typeof z.removeListener=="function"&&z.removeListener("error",N),X([].slice.call(arguments))}j(z,W,$,{once:!0}),W!=="error"&&function(fe,oe,he){typeof fe.on=="function"&&j(fe,"error",oe,{once:!0})}(z,N)})},y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var v=10;function D(z){if(typeof z!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof z)}function m(z){return z._maxListeners===void 0?y.defaultMaxListeners:z._maxListeners}function T(z,W,X,le){var N,$,fe,oe;if(D(X),($=z._events)===void 0?($=z._events=Object.create(null),z._eventsCount=0):($.newListener!==void 0&&(z.emit("newListener",W,X.listener?X.listener:X),$=z._events),fe=$[W]),fe===void 0)fe=$[W]=X,++z._eventsCount;else if(typeof fe=="function"?fe=$[W]=le?[X,fe]:[fe,X]:le?fe.unshift(X):fe.push(X),(N=m(z))>0&&fe.length>N&&!fe.warned){fe.warned=!0;var he=new Error("Possible EventEmitter memory leak detected. "+fe.length+" "+String(W)+" listeners added. Use emitter.setMaxListeners() to increase limit");he.name="MaxListenersExceededWarning",he.emitter=z,he.type=W,he.count=fe.length,oe=he,console&&console.warn&&console.warn(oe)}return z}function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(z,W,X){var le={fired:!1,wrapFn:void 0,target:z,type:W,listener:X},N=U.bind(le);return N.listener=X,le.wrapFn=N,N}function _(z,W,X){var le=z._events;if(le===void 0)return[];var N=le[W];return N===void 0?[]:typeof N=="function"?X?[N.listener||N]:[N]:X?function($){for(var fe=new Array($.length),oe=0;oe<fe.length;++oe)fe[oe]=$[oe].listener||$[oe];return fe}(N):R(N,N.length)}function I(z){var W=this._events;if(W!==void 0){var X=W[z];if(typeof X=="function")return 1;if(X!==void 0)return X.length}return 0}function R(z,W){for(var X=new Array(W),le=0;le<W;++le)X[le]=z[le];return X}function j(z,W,X,le){if(typeof z.on=="function")le.once?z.once(W,X):z.on(W,X);else{if(typeof z.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof z);z.addEventListener(W,function N($){le.once&&z.removeEventListener(W,N),X($)})}}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(z){if(typeof z!="number"||z<0||C(z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+z+".");v=z}}),y.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(z){if(typeof z!="number"||z<0||C(z))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+z+".");return this._maxListeners=z,this},y.prototype.getMaxListeners=function(){return m(this)},y.prototype.emit=function(z){for(var W=[],X=1;X<arguments.length;X++)W.push(arguments[X]);var le=z==="error",N=this._events;if(N!==void 0)le=le&&N.error===void 0;else if(!le)return!1;if(le){var $;if(W.length>0&&($=W[0]),$ instanceof Error)throw $;var fe=new Error("Unhandled error."+($?" ("+$.message+")":""));throw fe.context=$,fe}var oe=N[z];if(oe===void 0)return!1;if(typeof oe=="function")F(oe,this,W);else{var he=oe.length,Ie=R(oe,he);for(X=0;X<he;++X)F(Ie[X],this,W)}return!0},y.prototype.addListener=function(z,W){return T(this,z,W,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(z,W){return T(this,z,W,!0)},y.prototype.once=function(z,W){return D(W),this.on(z,x(this,z,W)),this},y.prototype.prependOnceListener=function(z,W){return D(W),this.prependListener(z,x(this,z,W)),this},y.prototype.removeListener=function(z,W){var X,le,N,$,fe;if(D(W),(le=this._events)===void 0)return this;if((X=le[z])===void 0)return this;if(X===W||X.listener===W)--this._eventsCount==0?this._events=Object.create(null):(delete le[z],le.removeListener&&this.emit("removeListener",z,X.listener||W));else if(typeof X!="function"){for(N=-1,$=X.length-1;$>=0;$--)if(X[$]===W||X[$].listener===W){fe=X[$].listener,N=$;break}if(N<0)return this;N===0?X.shift():function(oe,he){for(;he+1<oe.length;he++)oe[he]=oe[he+1];oe.pop()}(X,N),X.length===1&&(le[z]=X[0]),le.removeListener!==void 0&&this.emit("removeListener",z,fe||W)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(z){var W,X,le;if((X=this._events)===void 0)return this;if(X.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):X[z]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete X[z]),this;if(arguments.length===0){var N,$=Object.keys(X);for(le=0;le<$.length;++le)(N=$[le])!=="removeListener"&&this.removeAllListeners(N);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(W=X[z])=="function")this.removeListener(z,W);else if(W!==void 0)for(le=W.length-1;le>=0;le--)this.removeListener(z,W[le]);return this},y.prototype.listeners=function(z){return _(this,z,!0)},y.prototype.rawListeners=function(z){return _(this,z,!1)},y.listenerCount=function(z,W){return typeof z.listenerCount=="function"?z.listenerCount(W):I.call(z,W)},y.prototype.listenerCount=I,y.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},3101:function(b){var g=Array.isArray,w=Object.keys,F=Object.prototype.hasOwnProperty;b.exports=function C(y,v){if(y===v)return!0;if(y&&v&&typeof y=="object"&&typeof v=="object"){var D,m,T,U=g(y),x=g(v);if(U&&x){if((m=y.length)!=v.length)return!1;for(D=m;D--!=0;)if(!C(y[D],v[D]))return!1;return!0}if(U!=x)return!1;var _=y instanceof Date,I=v instanceof Date;if(_!=I)return!1;if(_&&I)return y.getTime()==v.getTime();var R=y instanceof RegExp,j=v instanceof RegExp;if(R!=j)return!1;if(R&&j)return y.toString()==v.toString();var z=w(y);if((m=z.length)!==w(v).length)return!1;for(D=m;D--!=0;)if(!F.call(v,z[D]))return!1;for(D=m;D--!=0;)if(!C(y[T=z[D]],v[T]))return!1;return!0}return y!=y&&v!=v}},3362:function(b,g,w){(function(F,C,y,v,D){function m(M){if("contents"in M)for(var q=("styleAttrs"in M)?M.styleAttrs[v.byName.ruby.qname]:null,K=M.kind==="span"&&(q==="container"||q==="textContainer"||q==="baseContainer"),ye=M.contents.length-1;ye>=0;ye--)!K||"styleAttrs"in M.contents[ye]&&v.byName.ruby.qname in M.contents[ye].styleAttrs?m(M.contents[ye]):delete M.contents[ye]}function T(M,q,K,ye){var de=ye&&ye.timeContainer==="seq",He=0;ye&&(He=de&&K?K.end:ye.begin),q.begin=q.explicit_begin?q.explicit_begin+He:He;var Tt=q.begin,ot=null;if("sets"in q)for(var rt=0;rt<q.sets.length;rt++)T(M,q.sets[rt],ot,q),Tt=q.timeContainer==="seq"?q.sets[rt].end:Math.max(Tt,q.sets[rt].end),ot=q.sets[rt];if("contents"in q){if("contents"in q)for(var et=0;et<q.contents.length;et++)T(M,q.contents[et],ot,q),Tt=q.timeContainer==="seq"?q.contents[et].end:Math.max(Tt,q.contents[et].end),ot=q.contents[et]}else Tt=de?q.begin:Number.POSITIVE_INFINITY;q.explicit_end!==null&&q.explicit_dur!==null?q.end=Math.min(q.begin+q.explicit_dur,He+q.explicit_end):q.explicit_end===null&&q.explicit_dur!==null?q.end=q.begin+q.explicit_dur:q.explicit_end!==null&&q.explicit_dur===null?q.end=He+q.explicit_end:q.end=Tt,delete q.explicit_begin,delete q.explicit_dur,delete q.explicit_end,M._registerEvent(q)}function U(M){this.node=M}function x(){this.events=[],this.head=new _,this.body=null}function _(){this.styling=new I,this.layout=new z}function I(){this.styles={},this.initials={}}function R(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function j(){this.styleAttrs=null}function z(){this.regions={}}function W(M,q){X.call(this,"image"),this.src=M,this.type=q}function X(M){this.kind=M}function le(M){this.id=M}function N(M){this.regionID=M}function $(M){this.styleAttrs=M}function fe(M){this.sets=M}function oe(M){this.contents=M}function he(M,q,K){this.explicit_begin=M,this.explicit_end=q,this.explicit_dur=K}function Ie(){X.call(this,"body")}function Xe(){X.call(this,"div")}function Ae(){X.call(this,"p")}function Ze(){X.call(this,"span")}function it(){X.call(this,"span")}function ut(){X.call(this,"br")}function $e(){}function lt(){}function At(M){return M&&"xml:id"in M.attributes&&M.attributes["xml:id"].value||null}function Oe(M){return M&&"style"in M.attributes?M.attributes.style.value.split(" "):[]}function Qe(M,q){var K={};if(M!==null)for(var ye in M.attributes){var de=M.attributes[ye].uri+" "+M.attributes[ye].local,He=v.byQName[de];if(He!==void 0){var Tt=He.parse(M.attributes[ye].value);Tt!==null?(K[de]=Tt,He===v.byName.zIndex&&Ce(q,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):te(q,"Cannot parse styling attribute "+de+" --> "+M.attributes[ye].value)}}return K}function ct(M,q,K){for(var ye in M.attributes)if(M.attributes[ye].uri===q&&M.attributes[ye].local===K)return M.attributes[ye].value;return null}function Qt(M,q,K){var ye,de=null;return(ye=/^(\d+(?:\.\d+)?)f$/.exec(K))!==null?q!==null&&(de=parseFloat(ye[1])/q):(ye=/^(\d+(?:\.\d+)?)t$/.exec(K))!==null?M!==null&&(de=parseFloat(ye[1])/M):(ye=/^(\d+(?:\.\d+)?)ms$/.exec(K))!==null?de=parseFloat(ye[1])/1e3:(ye=/^(\d+(?:\.\d+)?)s$/.exec(K))!==null?de=parseFloat(ye[1]):(ye=/^(\d+(?:\.\d+)?)h$/.exec(K))!==null?de=3600*parseFloat(ye[1]):(ye=/^(\d+(?:\.\d+)?)m$/.exec(K))!==null?de=60*parseFloat(ye[1]):(ye=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(K))!==null?de=3600*parseInt(ye[1])+60*parseInt(ye[2])+parseFloat(ye[3]):(ye=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(K))!==null&&q!==null&&(de=3600*parseInt(ye[1])+60*parseInt(ye[2])+parseInt(ye[3])+(ye[4]===null?0:parseInt(ye[4])/q)),de}function Kt(M,q,K){for(;q.styleRefs.length>0;){var ye=q.styleRefs.pop();ye in M.styles?(Kt(M,M.styles[ye],K),Lt(M.styles[ye].styleAttrs,q.styleAttrs)):te(K,"Non-existant style id referenced")}}function St(M,q,K,ye){for(var de=q.length-1;de>=0;de--){var He=q[de];He in M.styles?Lt(M.styles[He].styleAttrs,K):te(ye,"Non-existant style id referenced")}}function Lt(M,q){for(var K in M)M.hasOwnProperty(K)&&(K in q||(q[K]=M[K]))}function Ce(M,q){if(M&&M.warn&&M.warn(q))throw q}function te(M,q){if(M&&M.error&&M.error(q))throw q}function Fe(M,q){throw M&&M.fatal&&M.fatal(q),q}function O(M,q){for(var K,ye=0,de=M.length-1;ye<=de;){var He=M[K=Math.floor((ye+de)/2)];if(He<q)ye=K+1;else{if(!(He>q))return{found:!0,index:K};de=K-1}}return{found:!1,index:ye}}F.fromXML=function(M,q,K){var ye=C.parser(!0,{xmlns:!0}),de=[],He=[],Tt=[],ot=0,rt=null;ye.onclosetag=function(Ct){if(de[0]instanceof $e)rt.head!==null&&rt.head.styling!==null&&St(rt.head.styling,de[0].styleRefs,de[0].styleAttrs,q),delete de[0].styleRefs;else if(de[0]instanceof I)for(var hn in de[0].styles)de[0].styles.hasOwnProperty(hn)&&Kt(de[0],de[0].styles[hn],q);else if(de[0]instanceof Ae||de[0]instanceof Ze){if(de[0].contents.length>1){var Xt,nn=[de[0].contents[0]];for(Xt=1;Xt<de[0].contents.length;Xt++)de[0].contents[Xt]instanceof it&&nn[nn.length-1]instanceof it?nn[nn.length-1].text+=de[0].contents[Xt].text:nn.push(de[0].contents[Xt]);de[0].contents=nn}de[0]instanceof Ze&&de[0].contents.length===1&&de[0].contents[0]instanceof it&&(de[0].text=de[0].contents[0].text,delete de[0].contents)}else de[0]instanceof U&&(de[0].node.uri===y.ns_tt&&de[0].node.local==="metadata"?ot--:ot>0&&K&&"onCloseTag"in K&&K.onCloseTag());Tt.shift(),He.shift(),de.shift()},ye.ontext=function(Ct){if(de[0]!==void 0)if(de[0]instanceof Ze||de[0]instanceof Ae){if(de[0]instanceof Ze){var hn=de[0].styleAttrs[v.byName.ruby.qname];if(hn==="container"||hn==="textContainer"||hn==="baseContainer")return}var Xt=new it;Xt.initFromText(rt,de[0],Ct,He[0],Tt[0],q),de[0].contents.push(Xt)}else de[0]instanceof U&&ot>0&&K&&"onText"in K&&K.onText(Ct)},ye.onopentag=function(Ct){var hn=Ct.attributes["xml:space"];hn?Tt.unshift(hn.value):Tt.length===0?Tt.unshift("default"):Tt.unshift(Tt[0]);var Xt=Ct.attributes["xml:lang"];if(Xt?He.unshift(Xt.value):He.length===0?He.unshift(""):He.unshift(He[0]),Ct.uri===y.ns_tt)if(Ct.local==="tt")rt!==null&&Fe(q,"Two <tt> elements at ("+this.line+","+this.column+")"),(rt=new x).initFromNode(Ct,He[0],q),de.unshift(rt);else if(Ct.local==="head")de[0]instanceof x||Fe(q,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),de.unshift(rt.head);else if(Ct.local==="styling")de[0]instanceof _||Fe(q,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),de.unshift(rt.head.styling);else if(Ct.local==="style"){var nn;de[0]instanceof I?((nn=new R).initFromNode(Ct,q),nn.id?rt.head.styling.styles[nn.id]=nn:te(q,"<style> element missing @id attribute"),de.unshift(nn)):de[0]instanceof $e?((nn=new R).initFromNode(Ct,q),Lt(nn.styleAttrs,de[0].styleAttrs),de.unshift(nn)):Fe(q,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Ct.local==="initial"){var Pt;if(de[0]instanceof I){for(var Un in(Pt=new j).initFromNode(Ct,q),Pt.styleAttrs)Pt.styleAttrs.hasOwnProperty(Un)&&(rt.head.styling.initials[Un]=Pt.styleAttrs[Un]);de.unshift(Pt)}else Fe(q,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Ct.local==="layout")de[0]instanceof _||Fe(q,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),de.unshift(rt.head.layout);else if(Ct.local==="region"){de[0]instanceof z||Fe(q,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var gr=new $e;gr.initFromNode(rt,Ct,He[0],q),!gr.id||gr.id in rt.head.layout.regions?te(q,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):rt.head.layout.regions[gr.id]=gr,de.unshift(gr)}else if(Ct.local==="body"){de[0]instanceof x||Fe(q,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),rt.body!==null&&Fe(q,"Second <body> element at "+this.line+","+this.column+")");var Pr=new Ie;Pr.initFromNode(rt,Ct,He[0],q),rt.body=Pr,de.unshift(Pr)}else if(Ct.local==="div"){de[0]instanceof Xe||de[0]instanceof Ie||Fe(q,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var dr=new Xe;dr.initFromNode(rt,de[0],Ct,He[0],q);var ei=dr.styleAttrs[v.byName.backgroundImage.qname];ei&&(dr.contents.push(new W(ei)),delete dr.styleAttrs[v.byName.backgroundImage.qname]),de[0].contents.push(dr),de.unshift(dr)}else if(Ct.local==="image"){de[0]instanceof Xe||Fe(q,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var Ji=new W;Ji.initFromNode(rt,de[0],Ct,He[0],q),de[0].contents.push(Ji),de.unshift(Ji)}else if(Ct.local==="p"){de[0]instanceof Xe||Fe(q,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Or=new Ae;Or.initFromNode(rt,de[0],Ct,He[0],q),de[0].contents.push(Or),de.unshift(Or)}else if(Ct.local==="span"){de[0]instanceof Ze||de[0]instanceof Ae||Fe(q,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var eo=new Ze;eo.initFromNode(rt,de[0],Ct,He[0],Tt[0],q),de[0].contents.push(eo),de.unshift(eo)}else if(Ct.local==="br"){de[0]instanceof Ze||de[0]instanceof Ae||Fe(q,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var _i=new ut;_i.initFromNode(rt,de[0],Ct,He[0],q),de[0].contents.push(_i),de.unshift(_i)}else if(Ct.local==="set"){de[0]instanceof Ze||de[0]instanceof Ae||de[0]instanceof Xe||de[0]instanceof Ie||de[0]instanceof $e||de[0]instanceof ut||Fe(q,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Di=new lt;Di.initFromNode(rt,de[0],Ct,q),de[0].sets.push(Di),de.unshift(Di)}else de.unshift(new U(Ct));else de.unshift(new U(Ct));if(de[0]instanceof U){if(Ct.uri===y.ns_tt&&Ct.local==="metadata")ot++;else if(ot>0&&K&&"onOpenTag"in K){var zi=[];for(var to in Ct.attributes)zi[Ct.attributes[to].uri+" "+Ct.attributes[to].local]={uri:Ct.attributes[to].uri,local:Ct.attributes[to].local,value:Ct.attributes[to].value};K.onOpenTag(Ct.uri,Ct.local,zi)}}},ye.write(M).close(),delete rt.head.styling.styles;var et=!1;for(var ft in rt.head.layout.regions)if(rt.head.layout.regions.hasOwnProperty(ft)){et=!0;break}if(!et){var yt=$e.prototype.createDefaultRegion(rt.lang);rt.head.layout.regions[yt.id]=yt}for(var _t in rt.head.layout.regions)rt.head.layout.regions.hasOwnProperty(_t)&&T(rt,rt.head.layout.regions[_t],null,null);return rt.body&&T(rt,rt.body,null,null),rt.body&&m(rt.body),rt},x.prototype.initFromNode=function(M,q,K){var ye=function(ot,rt){var et=ct(ot,y.ns_ttp,"cellResolution"),ft=15,yt=32;if(et!==null){var _t=/(\d+) (\d+)/.exec(et);_t!==null?(yt=parseInt(_t[1]),ft=parseInt(_t[2])):Ce(rt,"Malformed cellResolution value (using initial value instead)")}return{w:yt,h:ft}}(M,K);this.cellLength={h:new D.ComputedLength(0,1/ye.h),w:new D.ComputedLength(1/ye.w,0)};var de=function(ot,rt){var et,ft=ct(ot,y.ns_ttp,"frameRate"),yt=30;ft!==null&&((et=/(\d+)/.exec(ft))!==null?yt=parseInt(et[1]):Ce(rt,"Malformed frame rate attribute (using initial value instead)"));var _t=ct(ot,y.ns_ttp,"frameRateMultiplier"),Ct=1;_t!==null&&((et=/(\d+) (\d+)/.exec(_t))!==null?Ct=parseInt(et[1])/parseInt(et[2]):Ce(rt,"Malformed frame rate multiplier attribute (using initial value instead)"));var hn=Ct*yt,Xt=1,nn=ct(ot,y.ns_ttp,"tickRate");return nn===null?ft!==null&&(Xt=hn):(et=/(\d+)/.exec(nn))!==null?Xt=parseInt(et[1]):Ce(rt,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:hn,tickRate:Xt}}(M,K);this.effectiveFrameRate=de.effectiveFrameRate,this.tickRate=de.tickRate,this.aspectRatio=function(ot,rt){var et=ct(ot,y.ns_ittp,"aspectRatio");et===null&&(et=ct(ot,y.ns_ttp,"displayAspectRatio"));var ft=null;if(et!==null){var yt=/(\d+)\s+(\d+)/.exec(et);if(yt!==null){var _t=parseInt(yt[1]),Ct=parseInt(yt[2]);_t!==0&&Ct!==0?ft=_t/Ct:te(rt,"Illegal aspectRatio values (ignoring)")}else te(rt,"Malformed aspectRatio attribute (ignoring)")}return ft}(M,K);var He=ct(M,y.ns_ttp,"timeBase");He!==null&&He!=="media"&&Fe(K,"Unsupported time base");var Tt=function(ot,rt){var et=ct(ot,y.ns_tts,"extent");if(et===null)return null;var ft=et.split(" ");if(ft.length!==2)return Ce(rt,"Malformed extent (ignoring)"),null;var yt=D.parseLength(ft[0]),_t=D.parseLength(ft[1]);return _t&&yt?{h:_t,w:yt}:(Ce(rt,"Malformed extent values (ignoring)"),null)}(M,K);Tt===null?this.pxLength={h:null,w:null}:(Tt.h.unit==="px"&&Tt.w.unit==="px"||Fe(K,"Extent on TT must be in px or absent"),this.pxLength={h:new D.ComputedLength(0,1/Tt.h.value),w:new D.ComputedLength(1/Tt.w.value,0)}),this.dimensions={h:new D.ComputedLength(0,1),w:new D.ComputedLength(1,0)},this.lang=q},x.prototype._registerEvent=function(M){if(!(M.end<=M.begin)){var q=O(this.events,M.begin);if(q.found||this.events.splice(q.index,0,M.begin),M.end!==Number.POSITIVE_INFINITY){var K=O(this.events,M.end);K.found||this.events.splice(K.index,0,M.end)}}},x.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},x.prototype.getMediaTimeEvents=function(){return this.events},R.prototype.initFromNode=function(M,q){this.id=At(M),this.styleAttrs=Qe(M,q),this.styleRefs=Oe(M)},j.prototype.initFromNode=function(M,q){for(var K in this.styleAttrs={},M.attributes)if(M.attributes[K].uri===y.ns_itts||M.attributes[K].uri===y.ns_ebutts||M.attributes[K].uri===y.ns_tts){var ye=M.attributes[K].uri+" "+M.attributes[K].local;this.styleAttrs[ye]=M.attributes[K].value}},W.prototype.initFromNode=function(M,q,K,ye,de){this.src="src"in K.attributes?K.attributes.src.value:null,this.src||te(de,"Invalid image@src attribute"),this.type="type"in K.attributes?K.attributes.type.value:null,this.type||te(de,"Invalid image@type attribute"),$.prototype.initFromNode.call(this,M,q,K,de),he.prototype.initFromNode.call(this,M,q,K,de),fe.prototype.initFromNode.call(this,M,q,K,de),N.prototype.initFromNode.call(this,M,q,K,de),this.lang=ye},le.prototype.initFromNode=function(M,q,K,ye){this.id=At(K)},N.prototype.initFromNode=function(M,q,K,ye){this.regionID=function(de){return de&&"region"in de.attributes?de.attributes.region.value:""}(K)},$.prototype.initFromNode=function(M,q,K,ye){this.styleAttrs=Qe(K,ye),M.head!==null&&M.head.styling!==null&&St(M.head.styling,Oe(K),this.styleAttrs,ye)},fe.prototype.initFromNode=function(M,q,K,ye){this.sets=[]},oe.prototype.initFromNode=function(M,q,K,ye){this.contents=[]},he.prototype.initFromNode=function(M,q,K,ye){var de=function(He,Tt,ot,rt){var et=null;ot&&"begin"in ot.attributes&&(et=Qt(He.tickRate,He.effectiveFrameRate,ot.attributes.begin.value))===null&&Ce(rt,"Malformed begin value "+ot.attributes.begin.value+" (using 0)");var ft=null;ot&&"dur"in ot.attributes&&(ft=Qt(He.tickRate,He.effectiveFrameRate,ot.attributes.dur.value))===null&&Ce(rt,"Malformed dur value "+ot.attributes.dur.value+" (ignoring)");var yt=null;return ot&&"end"in ot.attributes&&(yt=Qt(He.tickRate,He.effectiveFrameRate,ot.attributes.end.value))===null&&Ce(rt,"Malformed end value (ignoring)"),{explicit_begin:et,explicit_end:yt,explicit_dur:ft}}(M,0,K,ye);this.explicit_begin=de.explicit_begin,this.explicit_end=de.explicit_end,this.explicit_dur=de.explicit_dur,this.timeContainer=function(He,Tt){var ot=He&&"timeContainer"in He.attributes?He.attributes.timeContainer.value:null;return ot&&ot!=="par"?ot==="seq"?"seq":(te(Tt,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(K,ye)},Ie.prototype.initFromNode=function(M,q,K,ye){$.prototype.initFromNode.call(this,M,null,q,ye),he.prototype.initFromNode.call(this,M,null,q,ye),fe.prototype.initFromNode.call(this,M,null,q,ye),N.prototype.initFromNode.call(this,M,null,q,ye),oe.prototype.initFromNode.call(this,M,null,q,ye),this.lang=K},Xe.prototype.initFromNode=function(M,q,K,ye,de){$.prototype.initFromNode.call(this,M,q,K,de),he.prototype.initFromNode.call(this,M,q,K,de),fe.prototype.initFromNode.call(this,M,q,K,de),N.prototype.initFromNode.call(this,M,q,K,de),oe.prototype.initFromNode.call(this,M,q,K,de),this.lang=ye},Ae.prototype.initFromNode=function(M,q,K,ye,de){$.prototype.initFromNode.call(this,M,q,K,de),he.prototype.initFromNode.call(this,M,q,K,de),fe.prototype.initFromNode.call(this,M,q,K,de),N.prototype.initFromNode.call(this,M,q,K,de),oe.prototype.initFromNode.call(this,M,q,K,de),this.lang=ye},Ze.prototype.initFromNode=function(M,q,K,ye,de,He){$.prototype.initFromNode.call(this,M,q,K,He),he.prototype.initFromNode.call(this,M,q,K,He),fe.prototype.initFromNode.call(this,M,q,K,He),N.prototype.initFromNode.call(this,M,q,K,He),oe.prototype.initFromNode.call(this,M,q,K,He),this.space=de,this.lang=ye},it.prototype.initFromText=function(M,q,K,ye,de,He){he.prototype.initFromNode.call(this,M,q,null,He),this.text=K,this.space=de,this.lang=ye},ut.prototype.initFromNode=function(M,q,K,ye,de){N.prototype.initFromNode.call(this,M,q,K,de),he.prototype.initFromNode.call(this,M,q,K,de),this.lang=ye},$e.prototype.createDefaultRegion=function(M){var q=new $e;return le.call(q,""),$.call(q,{}),fe.call(q,[]),he.call(q,0,Number.POSITIVE_INFINITY,null),this.lang=M,q},$e.prototype.initFromNode=function(M,q,K,ye){le.prototype.initFromNode.call(this,M,null,q,ye),he.prototype.initFromNode.call(this,M,null,q,ye),fe.prototype.initFromNode.call(this,M,null,q,ye),this.styleAttrs=Qe(q,ye),this.styleRefs=Oe(q),this.lang=K},lt.prototype.initFromNode=function(M,q,K,ye){he.prototype.initFromNode.call(this,M,q,K,ye);var de=Qe(K,ye);for(var He in this.qname=null,this.value=null,de)if(de.hasOwnProperty(He)){if(this.qname){te(ye,"More than one style specified on set");break}this.qname=He,this.value=de[He]}}})(g,typeof sax>"u"?w(5378):sax,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},506:function(b,g,w){var F=/firefox/i.test(navigator.userAgent);(function(C,y,v){function D(oe,he,Ie,Xe){var Ae;if(Ie.kind==="region")(Ae=document.createElement("div")).style.position="absolute";else if(Ie.kind==="body")Ae=document.createElement("div");else if(Ie.kind==="div")Ae=document.createElement("div");else if(Ie.kind==="image"){if(Ae=document.createElement("img"),oe.imgResolver!==null&&Ie.src!==null){var Ze=oe.imgResolver(Ie.src,Ae);Ze&&(Ae.src=Ze),Ae.height=oe.regionH,Ae.width=oe.regionW}}else if(Ie.kind==="p")Ae=document.createElement("p");else if(Ie.kind==="span")if(Ie.styleAttrs[v.byName.ruby.qname]==="container")Ae=document.createElement("ruby"),oe.ruby=!0;else if(Ie.styleAttrs[v.byName.ruby.qname]==="base")Ae=document.createElement("span");else if(Ie.styleAttrs[v.byName.ruby.qname]==="text")Ae=document.createElement("rt");else if(Ie.styleAttrs[v.byName.ruby.qname]==="baseContainer")Ae=document.createElement("rbc");else if(Ie.styleAttrs[v.byName.ruby.qname]==="textContainer")Ae=document.createElement("rtc");else{if(Ie.styleAttrs[v.byName.ruby.qname]==="delimiter")return;Ae=document.createElement("span")}else Ie.kind==="br"&&(Ae=document.createElement("br"));if(Ae){if(Ie.lang&&(Ie.kind!=="region"&&Ie.lang===Xe.lang||(Ae.lang=Ie.lang)),he.appendChild(Ae),Ae.style.margin="0",Ie.kind==="region"){var it=Ie.styleAttrs[v.byName.writingMode.qname];it==="lrtb"||it==="lr"?(oe.ipd="lr",oe.bpd="tb"):it==="rltb"||it==="rl"?(oe.ipd="rl",oe.bpd="tb"):it==="tblr"?(oe.ipd="tb",oe.bpd="lr"):it!=="tbrl"&&it!=="tb"||(oe.ipd="tb",oe.bpd="rl")}else if(Ie.kind==="p"&&oe.bpd==="tb"){var ut=Ie.styleAttrs[v.byName.direction.qname];oe.ipd=ut==="ltr"?"lr":"rl"}for(var $e=0;$e<j.length;$e++){var lt=j[$e],At=Ie.styleAttrs[lt.qname];At!==void 0&&lt.map!==null&&lt.map(oe,Ae,Ie,At)}var Oe=Ae,Qe=Ie.styleAttrs[v.byName.linePadding.qname];if(Qe&&!Qe.isZero()){var ct=Qe.toUsedLength(oe.w,oe.h);if(ct>0){var Qt=Math.ceil(ct)+"px";oe.bpd==="tb"?(Oe.style.paddingLeft=Qt,Oe.style.paddingRight=Qt):(Oe.style.paddingTop=Qt,Oe.style.paddingBottom=Qt),oe.lp=Qe}}var Kt=Ie.styleAttrs[v.byName.multiRowAlign.qname];if(Kt&&Kt!=="auto"){var St=document.createElement("span");St.style.display="inline-block",St.style.textAlign=Kt,Ae.appendChild(St),Oe=St,oe.mra=Kt}var Lt=Ie.styleAttrs[v.byName.rubyReserve.qname];if(Lt&&Lt[0]!=="none"&&(oe.rubyReserve=Lt),Ie.styleAttrs[v.byName.fillLineGap.qname]&&(oe.flg=!0),Ie.kind==="span"&&Ie.text){var Ce=Ie.styleAttrs[v.byName.textEmphasis.qname];if(Ce&&Ce.style!=="none"&&(oe.textEmphasis=!0),v.byName.textCombine.qname in Ie.styleAttrs&&Ie.styleAttrs[v.byName.textCombine.qname]==="all")Ae.textContent=Ie.text,Ae._isd_element=Ie,Ce&&I(oe,Ae,0,Ce);else for(var te="",Fe=0;Fe<Ie.text.length;Fe++){te+=Ie.text.charAt(Fe);var O=Ie.text.charCodeAt(Fe);if(O<55296||O>56319||Fe===Ie.text.length-1){var M=document.createElement("span");M.textContent=te,Ce&&I(oe,M,0,Ce),Ae.appendChild(M),te="",M._isd_element=Ie}}}if("contents"in Ie)for(var q=0;q<Ie.contents.length;q++)D(oe,Oe,Ie.contents[q],Ie);var K=[];if(Ie.kind==="p"&&(_(oe,Oe,K,null),oe.rubyReserve&&(function(ot,rt){for(var et=0;et<ot.length;et++){var ft,yt,_t=document.createElement("ruby"),Ct=document.createElement("span");Ct.textContent="",_t.appendChild(Ct);var hn,Xt=rt.rubyReserve[1].toUsedLength(rt.w,rt.h)+"px";rt.rubyReserve[0]==="both"||rt.rubyReserve[0]==="outside"&&ot.length==1?((ft=document.createElement("rtc")).style[le]=X?"after":"under",ft.textContent="",ft.style.fontSize=Xt,(yt=document.createElement("rtc")).style[le]=X?"before":"over",yt.textContent="",yt.style.fontSize=Xt,_t.appendChild(ft),_t.appendChild(yt)):((ft=document.createElement("rtc")).textContent="",ft.style.fontSize=Xt,hn=rt.rubyReserve[0]==="after"||rt.rubyReserve[0]==="outside"&&et>0?X?"after":rt.bpd==="tb"||rt.bpd==="rl"?"under":"over":X?"before":rt.bpd==="tb"||rt.bpd==="rl"?"over":"under",ft.style[le]=hn,_t.appendChild(ft));for(var nn=null,Pt=0;Pt<ot[et].rbc.length;Pt++)if(ot[et].rbc[Pt].localName==="ruby"){nn=ot[et].rbc[Pt];for(var Un=0;Un<nn.style.length;Un++)_t.style.setProperty(nn.style.item(Un),nn.style.getPropertyValue(nn.style.item(Un)));break}(nn=nn||ot[et].elements[0].node).parentElement.insertBefore(_t,nn)}}(K,oe),oe.rubyReserve=null),(oe.ruby||oe.rubyReserve)&&(function(ot,rt){for(var et=0;et<ot.length;et++)for(var ft=0;ft<ot[et].rbc.length;ft++){var yt;ot[et].rbc[ft].style[le]||(yt=X?et===0?"before":"after":rt.bpd==="tb"||rt.bpd==="rl"?et===0?"over":"under":et===0?"under":"over",ot[et].rbc[ft].style[le]=yt)}}(K,oe),oe.ruby=null),oe.textEmphasis&&(function(ot,rt){for(var et=0;et<ot.length;et++)for(var ft=0;ft<ot[et].te.length;ft++){var yt;ot[et].te[ft].style[$]&&ot[et].te[ft].style[$]!=="none"||(yt=rt.bpd==="tb"?et===0?"left over":"left under":rt.bpd==="rl"?et===0?"right under":"left under":et===0?"left under":"right under",ot[et].te[ft].style[$]=yt)}}(K,oe),oe.textEmphasis=null),oe.mra&&(function(ot){for(var rt=0;rt<ot.length-1;rt++){var et=ot[rt].elements.length;if(et!==0&&ot[rt].br===!1){var ft=document.createElement("br"),yt=ot[rt].elements[et-1].node;yt.parentElement.insertBefore(ft,yt.nextSibling)}}}(K),oe.mra=null),oe.lp&&(function(ot,rt,et){if(ot!==null)for(var ft=0;ft<ot.length;ft++){var yt=ot[ft].elements.length,_t=Math.ceil(rt)+"px",Ct="-"+Math.ceil(rt)+"px";if(yt!==0){var hn=ot[ft].elements[ot[ft].start_elem],Xt=ot[ft].elements[ot[ft].end_elem];if(hn===Xt){var nn=hn.node.getBoundingClientRect();if(nn.width==0||nn.height==0)continue}et.ipd==="lr"?(hn.node.style.marginLeft=Ct,hn.node.style.paddingLeft=_t):et.ipd==="rl"?(hn.node.style.paddingRight=_t,hn.node.style.marginRight=Ct):et.ipd==="tb"&&(hn.node.style.paddingTop=_t,hn.node.style.marginTop=Ct),et.ipd==="lr"?(F||(Xt.node.style.marginRight=Ct),Xt.node.style.paddingRight=_t):et.ipd==="rl"?(Xt.node.style.paddingLeft=_t,F||(Xt.node.style.marginLeft=Ct)):et.ipd==="tb"&&(Xt.node.style.paddingBottom=_t,Xt.node.style.marginBottom=Ct)}}}(K,oe.lp.toUsedLength(oe.w,oe.h),oe),oe.lp=null),function(ot,rt){for(var et=0;et<ot.length;et++)for(var ft=ot[et],yt=1;yt<ft.elements.length;){var _t=ft.elements[yt-1],Ct=ft.elements[yt];T(_t.node,Ct.node,rt)?ft.elements.splice(yt,1):yt++}for(var hn,Xt,nn=[],Pt=0;Pt<ot.length;Pt++)for(var Un=0;Un<ot[Pt].elements.length;Un++)(Xt=m(hn=ot[Pt].elements[Un].node,nn,!1))&&(hn.style.backgroundColor=Xt);for(var gr=0;gr<nn.length;gr++)nn[gr].style.backgroundColor=""}(K,oe),oe.flg)){var ye=x(Oe.getBoundingClientRect(),oe);(function(ot,rt,et,ft,yt){for(var _t=Math.sign(et-rt),Ct=0;Ct<=ot.length;Ct++){var hn,Xt,nn,Pt;if(hn=Ct===0?Math.round(rt):Ct===ot.length?Math.round(et):Math.round((ot[Ct-1].after+ot[Ct].before)/2),Ct>0&&ot[Ct-1])for(nn=0;nn<ot[Ct-1].elements.length;nn++)Xt=_t*(hn-(Pt=ot[Ct-1].elements[nn]).after)+"px",ft.bpd==="lr"?Pt.node.style.paddingRight=Xt:ft.bpd==="rl"?Pt.node.style.paddingLeft=Xt:ft.bpd==="tb"&&(Pt.node.style.paddingBottom=Xt);if(Ct<ot.length)for(nn=0;nn<ot[Ct].elements.length;nn++)Xt=_t*((Pt=ot[Ct].elements[nn]).before-hn)+"px",ft.bpd==="lr"?Pt.node.style.paddingLeft=Xt:ft.bpd==="rl"?Pt.node.style.paddingRight=Xt:ft.bpd==="tb"&&(Pt.node.style.paddingTop=Xt)}})(K,ye.before,ye.after,oe),oe.flg=null}if(Ie.kind==="region"&&oe.bpd==="tb"&&oe.enableRollUp&&Ie.contents.length>0&&Ie.styleAttrs[v.byName.displayAlign.qname]==="after"){_(oe,Oe,K,null);var de=new U(Ie.id===""?"_":Ie.id,K);if(oe.currentISDState[de.id]=de,oe.previousISDState&&de.id in oe.previousISDState&&oe.previousISDState[de.id].plist.length>0&&de.plist.length>1&&de.plist[de.plist.length-2].text===oe.previousISDState[de.id].plist[oe.previousISDState[de.id].plist.length-1].text){var He=Ae.firstElementChild,Tt=de.plist[de.plist.length-1].after-de.plist[de.plist.length-1].before;He.style.bottom="-"+Tt+"px",He.style.transition="transform 0.4s",He.style.position="relative",He.style.transform="translateY(-"+Tt+"px)"}}}else fe(oe.errorHandler,"Error processing ISD element kind: "+Ie.kind)}function m(oe,he,Ie){return oe.style.backgroundColor?(Ie&&!he.includes(oe)&&he.push(oe),oe.style.backgroundColor):oe.parentElement.nodeName==="SPAN"||oe.parentElement.nodeName==="RUBY"||oe.parentElement.nodeName==="RBC"||oe.parentElement.nodeName==="RTC"||oe.parentElement.nodeName==="RT"?m(oe.parentElement,he,!0):void 0}function T(oe,he,Ie){if(oe.tagName==="SPAN"&&he.tagName==="SPAN"&&oe._isd_element===he._isd_element){if(!oe._isd_element)return fe(Ie.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;oe.textContent+=he.textContent;for(var Xe=0;Xe<he.style.length;Xe++){var Ae=he.style[Xe];(Ae.indexOf("border")>=0||Ae.indexOf("padding")>=0||Ae.indexOf("margin")>=0)&&(oe.style[Ae]=he.style[Ae])}return he.parentElement.removeChild(he),!0}return!1}function U(oe,he){this.id=oe,this.plist=he}function x(oe,he){var Ie={before:null,after:null,start:null,end:null};return he.bpd==="tb"?(Ie.before=oe.top,Ie.after=oe.bottom,he.ipd==="lr"?(Ie.start=oe.left,Ie.end=oe.right):(Ie.start=oe.right,Ie.end=oe.left)):he.bpd==="lr"?(Ie.before=oe.left,Ie.after=oe.right,Ie.start=oe.top,Ie.end=oe.bottom):he.bpd==="rl"&&(Ie.before=oe.right,Ie.after=oe.left,Ie.start=oe.top,Ie.end=oe.bottom),Ie}function _(oe,he,Ie,Xe){if(he.localName!=="rt"&&he.localName!=="rtc"){var Ae,Ze,it,ut,$e=he.style.backgroundColor||Xe;if(he.childElementCount===0)if(he.localName==="span"||he.localName==="rb"){var lt=x(he.getBoundingClientRect(),oe);if(Ie.length!==0&&(Ae=lt.before,Ze=lt.after,it=Ie[Ie.length-1].before,Ze<(ut=Ie[Ie.length-1].after)&&Ae>it||ut<=Ze&&it>=Ae)){var At=Math.sign(lt.after-lt.before),Oe=Math.sign(lt.end-lt.start);At*(lt.before-Ie[Ie.length-1].before)<0&&(Ie[Ie.length-1].before=lt.before),At*(lt.after-Ie[Ie.length-1].after)>0&&(Ie[Ie.length-1].after=lt.after),Oe*(lt.start-Ie[Ie.length-1].start)<0&&(Ie[Ie.length-1].start=lt.start,Ie[Ie.length-1].start_elem=Ie[Ie.length-1].elements.length),Oe*(lt.end-Ie[Ie.length-1].end)>0&&(Ie[Ie.length-1].end=lt.end,Ie[Ie.length-1].end_elem=Ie[Ie.length-1].elements.length)}else Ie.push({before:lt.before,after:lt.after,start:lt.start,end:lt.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});Ie[Ie.length-1].text+=he.textContent,Ie[Ie.length-1].elements.push({node:he,bgcolor:$e,before:lt.before,after:lt.after})}else he.localName==="br"&&Ie.length!==0&&(Ie[Ie.length-1].br=!0);else for(var Qe=he.firstChild;Qe;)Qe.nodeType===Node.ELEMENT_NODE&&(_(oe,Qe,Ie,$e),Qe.localName==="ruby"||Qe.localName==="rtc"?Ie.length>0&&Ie[Ie.length-1].rbc.push(Qe):Qe.localName==="span"&&Qe.style[N]&&Qe.style[N]!=="none"&&Ie.length>0&&Ie[Ie.length-1].te.push(Qe)),Qe=Qe.nextSibling}}function I(oe,he,Ie,Xe){var Ae;Xe.style!=="none"&&(Xe.style==="auto"?he.style[N]="filled":he.style[N]=Xe.style+" "+Xe.symbol,(Xe.position==="before"||Xe.position==="after")&&(Ae=oe.bpd==="tb"?Xe.position==="before"?"left over":"left under":oe.bpd==="rl"?Xe.position==="before"?"right under":"left under":Xe.position==="before"?"left under":"right under",he.style[$]=Ae))}function R(oe,he){this.qname=oe,this.map=he}C.render=function(oe,he,Ie,Xe,Ae,Ze,it,ut,$e){var lt=Xe||he.clientHeight,At=Ae||he.clientWidth;if(oe.aspectRatio!==null){var Oe=lt*oe.aspectRatio;Oe>At?lt=Math.round(At/oe.aspectRatio):At=Oe}var Qe=document.createElement("div");Qe.style.position="relative",Qe.style.width=At+"px",Qe.style.height=lt+"px",Qe.style.margin="auto",Qe.style.top=0,Qe.style.bottom=0,Qe.style.left=0,Qe.style.right=0,Qe.style.zIndex=0;var ct={h:lt,w:At,regionH:null,regionW:null,imgResolver:Ie,displayForcedOnlyMode:Ze||!1,isd:oe,errorHandler:it,previousISDState:ut,enableRollUp:$e||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(he.appendChild(Qe),"contents"in oe)for(var Qt=0;Qt<oe.contents.length;Qt++)D(ct,Qe,oe.contents[Qt],oe);return ct.currentISDState};for(var j=[new R("http://www.w3.org/ns/ttml#styling backgroundColor",function(oe,he,Ie,Xe){Xe[3]!==0&&(he.style.backgroundColor="rgba("+Xe[0].toString()+","+Xe[1].toString()+","+Xe[2].toString()+","+(Xe[3]/255).toString()+")")}),new R("http://www.w3.org/ns/ttml#styling color",function(oe,he,Ie,Xe){he.style.color="rgba("+Xe[0].toString()+","+Xe[1].toString()+","+Xe[2].toString()+","+(Xe[3]/255).toString()+")"}),new R("http://www.w3.org/ns/ttml#styling direction",function(oe,he,Ie,Xe){he.style.direction=Xe}),new R("http://www.w3.org/ns/ttml#styling display",function(oe,he,Ie,Xe){}),new R("http://www.w3.org/ns/ttml#styling displayAlign",function(oe,he,Ie,Xe){he.style.display="flex",he.style.flexDirection="column",Xe==="before"?he.style.justifyContent="flex-start":Xe==="center"?he.style.justifyContent="center":Xe==="after"&&(he.style.justifyContent="flex-end")}),new R("http://www.w3.org/ns/ttml#styling extent",function(oe,he,Ie,Xe){oe.regionH=Xe.h.toUsedLength(oe.w,oe.h),oe.regionW=Xe.w.toUsedLength(oe.w,oe.h);var Ae=0,Ze=0,it=Ie.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];it&&(Ae=it[0].toUsedLength(oe.w,oe.h)+it[2].toUsedLength(oe.w,oe.h),Ze=it[1].toUsedLength(oe.w,oe.h)+it[3].toUsedLength(oe.w,oe.h)),he.style.height=oe.regionH-Ae+"px",he.style.width=oe.regionW-Ze+"px"}),new R("http://www.w3.org/ns/ttml#styling fontFamily",function(oe,he,Ie,Xe){for(var Ae=[],Ze=0;Ze<Xe.length;Ze++)Xe[Ze]=Xe[Ze].trim(),Xe[Ze]==="monospaceSerif"?(Ae.push("Courier New"),Ae.push('"Liberation Mono"'),Ae.push("Courier"),Ae.push("monospace")):Xe[Ze]==="proportionalSansSerif"?(Ae.push("Arial"),Ae.push("Helvetica"),Ae.push('"Liberation Sans"'),Ae.push("sans-serif")):Xe[Ze]==="monospace"?Ae.push("monospace"):Xe[Ze]==="sansSerif"?Ae.push("sans-serif"):Xe[Ze]==="serif"?Ae.push("serif"):Xe[Ze]==="monospaceSansSerif"?(Ae.push("Consolas"),Ae.push("monospace")):Xe[Ze]==="proportionalSerif"?Ae.push("serif"):Ae.push(Xe[Ze]);if(Ae.length>0){for(var it=[Ae[0]],ut=1;ut<Ae.length;ut++)it.indexOf(Ae[ut])==-1&&it.push(Ae[ut]);Ae=it}he.style.fontFamily=Ae.join(",")}),new R("http://www.w3.org/ns/ttml#styling shear",function(oe,he,Ie,Xe){if(Xe!==0){var Ae=-.9*Xe;oe.bpd==="tb"?he.style.transform="skewX("+Ae+"deg)":he.style.transform="skewY("+Ae+"deg)"}}),new R("http://www.w3.org/ns/ttml#styling fontSize",function(oe,he,Ie,Xe){he.style.fontSize=Xe.toUsedLength(oe.w,oe.h)+"px"}),new R("http://www.w3.org/ns/ttml#styling fontStyle",function(oe,he,Ie,Xe){he.style.fontStyle=Xe}),new R("http://www.w3.org/ns/ttml#styling fontWeight",function(oe,he,Ie,Xe){he.style.fontWeight=Xe}),new R("http://www.w3.org/ns/ttml#styling lineHeight",function(oe,he,Ie,Xe){he.style.lineHeight=Xe==="normal"?"normal":Xe.toUsedLength(oe.w,oe.h)+"px"}),new R("http://www.w3.org/ns/ttml#styling opacity",function(oe,he,Ie,Xe){he.style.opacity=Xe}),new R("http://www.w3.org/ns/ttml#styling origin",function(oe,he,Ie,Xe){he.style.top=Xe.h.toUsedLength(oe.w,oe.h)+"px",he.style.left=Xe.w.toUsedLength(oe.w,oe.h)+"px"}),new R("http://www.w3.org/ns/ttml#styling overflow",function(oe,he,Ie,Xe){he.style.overflow=Xe}),new R("http://www.w3.org/ns/ttml#styling padding",function(oe,he,Ie,Xe){var Ae=[];Ae[0]=Xe[0].toUsedLength(oe.w,oe.h)+"px",Ae[1]=Xe[3].toUsedLength(oe.w,oe.h)+"px",Ae[2]=Xe[2].toUsedLength(oe.w,oe.h)+"px",Ae[3]=Xe[1].toUsedLength(oe.w,oe.h)+"px",he.style.padding=Ae.join(" ")}),new R("http://www.w3.org/ns/ttml#styling position",function(oe,he,Ie,Xe){he.style.top=Xe.h.toUsedLength(oe.w,oe.h)+"px",he.style.left=Xe.w.toUsedLength(oe.w,oe.h)+"px"}),new R("http://www.w3.org/ns/ttml#styling rubyAlign",function(oe,he,Ie,Xe){he.style.rubyAlign=Xe==="spaceAround"?"space-around":"center"}),new R("http://www.w3.org/ns/ttml#styling rubyPosition",function(oe,he,Ie,Xe){var Ae;Xe!=="before"&&Xe!=="after"||(Ae=X?Xe:oe.bpd==="tb"||oe.bpd==="rl"?Xe==="before"?"over":"under":Xe==="before"?"under":"over",he.parentElement.style[le]=Ae)}),new R("http://www.w3.org/ns/ttml#styling showBackground",null),new R("http://www.w3.org/ns/ttml#styling textAlign",function(oe,he,Ie,Xe){var Ae;Ae=Xe==="start"?oe.ipd==="rl"?"right":"left":Xe==="end"?oe.ipd==="rl"?"left":"right":Xe,he.style.textAlign=Ae}),new R("http://www.w3.org/ns/ttml#styling textDecoration",function(oe,he,Ie,Xe){he.style.textDecoration=Xe.join(" ").replace("lineThrough","line-through")}),new R("http://www.w3.org/ns/ttml#styling textOutline",function(oe,he,Ie,Xe){}),new R("http://www.w3.org/ns/ttml#styling textShadow",function(oe,he,Ie,Xe){var Ae=Ie.styleAttrs[v.byName.textOutline.qname];if(Xe==="none"&&Ae==="none")he.style.textShadow="";else{var Ze=[];if(Ae!=="none"){var it="rgba("+Ae.color[0].toString()+","+Ae.color[1].toString()+","+Ae.color[2].toString()+","+(Ae.color[3]/255).toString()+")";Ze.push("1px 1px 1px "+it),Ze.push("-1px 1px 1px "+it),Ze.push("1px -1px 1px "+it),Ze.push("-1px -1px 1px "+it)}if(Xe!=="none")for(var ut=0;ut<Xe.length;ut++)Ze.push(Xe[ut].x_off.toUsedLength(oe.w,oe.h)+"px "+Xe[ut].y_off.toUsedLength(oe.w,oe.h)+"px "+Xe[ut].b_radius.toUsedLength(oe.w,oe.h)+"px rgba("+Xe[ut].color[0].toString()+","+Xe[ut].color[1].toString()+","+Xe[ut].color[2].toString()+","+(Xe[ut].color[3]/255).toString()+")");he.style.textShadow=Ze.join(",")}}),new R("http://www.w3.org/ns/ttml#styling textCombine",function(oe,he,Ie,Xe){he.style.textCombineUpright=Xe}),new R("http://www.w3.org/ns/ttml#styling textEmphasis",function(oe,he,Ie,Xe){}),new R("http://www.w3.org/ns/ttml#styling unicodeBidi",function(oe,he,Ie,Xe){var Ae;Ae=Xe==="bidiOverride"?"bidi-override":Xe,he.style.unicodeBidi=Ae}),new R("http://www.w3.org/ns/ttml#styling visibility",function(oe,he,Ie,Xe){he.style.visibility=Xe}),new R("http://www.w3.org/ns/ttml#styling wrapOption",function(oe,he,Ie,Xe){Xe==="wrap"?Ie.space==="preserve"?he.style.whiteSpace="pre-wrap":he.style.whiteSpace="normal":Ie.space==="preserve"?he.style.whiteSpace="pre":he.style.whiteSpace="noWrap"}),new R("http://www.w3.org/ns/ttml#styling writingMode",function(oe,he,Ie,Xe){Xe==="lrtb"||Xe==="lr"||Xe==="rltb"||Xe==="rl"?he.style.writingMode="horizontal-tb":Xe==="tblr"?he.style.writingMode="vertical-lr":Xe!=="tbrl"&&Xe!=="tb"||(he.style.writingMode="vertical-rl")}),new R("http://www.w3.org/ns/ttml#styling zIndex",function(oe,he,Ie,Xe){he.style.zIndex=Xe}),new R("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(oe,he,Ie,Xe){oe.displayForcedOnlyMode&&Xe===!1&&(he.style.visibility="hidden")})],z={},W=0;W<j.length;W++)z[j[W].qname]=j[W];var X="webkitRubyPosition"in window.getComputedStyle(document.documentElement),le=X?"webkitRubyPosition":"rubyPosition",N="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",$="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function fe(oe,he){if(oe&&oe.error&&oe.error(he))throw he}})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4080:function(b,g,w){(function(F,C,y,v){F.generateISD=function(R,j,z){var W,X=new x(R),le={},N={},$=R.head.styling.initials[y.byName.showBackground.qname],fe=R.head.styling.initials[y.byName.backgroundColor.qname];for(var oe in R.head.layout.regions)if(R.head.layout.regions.hasOwnProperty(oe)){var he=R.head.layout.regions[oe],Ie=he.styleAttrs[y.byName.showBackground.qname]||$,Xe=he.styleAttrs[y.byName.backgroundColor.qname]||fe;N[he.id]=(Ie==="always"||Ie===void 0)&&Xe!==void 0&&!(j<he.begin||j>=he.end)}for(var Ae in R.body&&R.body.regionID&&(N[R.body.regionID]=!0),W=R.body!==null?function it(ut,$e){if($e.contents){var lt={};for(var At in $e)$e.hasOwnProperty(At)&&(lt[At]=$e[At]);return lt.contents=[],$e.contents.filter(function(Oe){return!(ut<Oe.begin||ut>=Oe.end)}).forEach(function(Oe){var Qe=it(ut,Oe);Qe.regionID&&(N[Qe.regionID]=!0),Qe!==null&&lt.contents.push(Qe)}),lt}return $e}(j,R.body):null,N[""]!==void 0&&(N[""]=!0),N)if(N[Ae]){var Ze=m(R,j,R.head.layout.regions[Ae],W,null,"",R.head.layout.regions[Ae],z,le);Ze!==null&&X.contents.push(Ze.element)}return X};var D=[y.byName.color.qname,y.byName.textCombine.qname,y.byName.textDecoration.qname,y.byName.textEmphasis.qname,y.byName.textOutline.qname,y.byName.textShadow.qname];function m(R,j,z,W,X,le,N,$,fe){if(j<N.begin||j>=N.end)return null;var oe="regionID"in N&&N.regionID!==""?N.regionID:le;if(X!==null&&oe!==z.id&&(!("contents"in N)||"contents"in N&&N.contents.length===0||oe!==""))return null;var he=new _(N);if("sets"in N)for(var Ie=0;Ie<N.sets.length;Ie++)j<N.sets[Ie].begin||j>=N.sets[Ie].end||(he.styleAttrs[N.sets[Ie].qname]=N.sets[Ie].value);var Xe={};for(var Ae in he.styleAttrs)if(he.styleAttrs.hasOwnProperty(Ae)&&(Xe[Ae]=!0,he.kind==="region"&&Ae===y.byName.writingMode.qname&&!(y.byName.direction.qname in he.styleAttrs))){var Ze=he.styleAttrs[Ae];Ze==="lrtb"||Ze==="lr"?he.styleAttrs[y.byName.direction.qname]="ltr":Ze!=="rltb"&&Ze!=="rl"||(he.styleAttrs[y.byName.direction.qname]="rtl")}if(X!==null)for(var it=0;it<y.all.length;it++){var ut=y.all[it];if(ut.qname===y.byName.textDecoration.qname){var $e=X.styleAttrs[ut.qname],lt=he.styleAttrs[ut.qname],At=[];lt===void 0?At=$e:lt.indexOf("none")===-1?((lt.indexOf("noUnderline")===-1&&$e.indexOf("underline")!==-1||lt.indexOf("underline")!==-1)&&At.push("underline"),(lt.indexOf("noLineThrough")===-1&&$e.indexOf("lineThrough")!==-1||lt.indexOf("lineThrough")!==-1)&&At.push("lineThrough"),(lt.indexOf("noOverline")===-1&&$e.indexOf("overline")!==-1||lt.indexOf("overline")!==-1)&&At.push("overline")):At.push("none"),he.styleAttrs[ut.qname]=At}else if(ut.qname!==y.byName.fontSize.qname||ut.qname in he.styleAttrs||he.kind!=="span"||he.styleAttrs[y.byName.ruby.qname]!=="textContainer")if(ut.qname!==y.byName.fontSize.qname||ut.qname in he.styleAttrs||he.kind!=="span"||he.styleAttrs[y.byName.ruby.qname]!=="text")ut.inherit&&ut.qname in X.styleAttrs&&!(ut.qname in he.styleAttrs)&&(he.styleAttrs[ut.qname]=X.styleAttrs[ut.qname]);else{var Oe=X.styleAttrs[y.byName.fontSize.qname];X.styleAttrs[y.byName.ruby.qname]==="textContainer"?he.styleAttrs[ut.qname]=Oe:he.styleAttrs[ut.qname]=new v.ComputedLength(.5*Oe.rw,.5*Oe.rh)}else{var Qe=X.styleAttrs[y.byName.fontSize.qname];he.styleAttrs[ut.qname]=new v.ComputedLength(.5*Qe.rw,.5*Qe.rh)}}for(var ct=0;ct<y.all.length;ct++){var Qt=y.all[ct];if(!(Qt.qname in he.styleAttrs)&&!(Qt.qname===y.byName.position.qname&&y.byName.origin.qname in he.styleAttrs||Qt.qname===y.byName.origin.qname&&y.byName.position.qname in he.styleAttrs)){var Kt=R.head.styling.initials[Qt.qname]||Qt.initial;if(Kt!==null&&(he.kind==="region"||Qt.inherit===!1&&Kt!==null)){var St=Qt.parse(Kt);St!==null?(he.styleAttrs[Qt.qname]=St,Xe[Qt.qname]=!0):I($,"Invalid initial value for '"+Qt.qname+"' on element '"+he.kind)}}}for(var Lt=0;Lt<y.all.length;Lt++){var Ce=y.all[Lt];if(Ce.qname in Xe&&Ce.compute!==null){var te=Ce.compute(R,X,he,he.styleAttrs[Ce.qname],fe);te!==null?he.styleAttrs[Ce.qname]=te:(he.styleAttrs[Ce.qname]=Ce.compute(R,X,he,Ce.parse(Ce.initial),fe),I($,"Style '"+Ce.qname+"' on element '"+he.kind+"' cannot be computed"))}}if(he.styleAttrs[y.byName.display.qname]==="none")return null;var Fe=null;X===null?Fe=W===null?[]:[W]:"contents"in N&&(Fe=N.contents);for(var O=0;Fe!==null&&O<Fe.length;O++){var M=m(R,j,z,W,he,oe,Fe[O],$,fe);M!==null&&he.contents.push(M.element)}for(var q in he.styleAttrs)if(he.styleAttrs.hasOwnProperty(q)){var K=!1;if(he.kind==="span"){var ye=he.styleAttrs[y.byName.ruby.qname];(K=(ye==="container"||ye==="textContainer"||ye==="baseContainer")&&D.indexOf(q)!==-1)||(K=ye!=="container"&&q===y.byName.rubyAlign.qname),K||(K=!(ye==="textContainer"||ye==="text")&&q===y.byName.rubyPosition.qname)}if(!K){var de=y.byQName[q];"applies"in de&&(K=de.applies.indexOf(he.kind)===-1)}K&&delete he.styleAttrs[q]}var He=he.styleAttrs[y.byName.ruby.qname];if(he.kind==="p"||he.kind==="span"&&(He==="textContainer"||He==="text")){var Tt=[];T(he,Tt),function(ot){for(var rt,et=0;et<ot.length;)if((rt=ot[et]).kind!=="br"&&rt.space!=="preserve"){var ft=rt.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(ft)&&(et===0||(yt=ot[et-1]).kind==="br"||/[\r\n\t ]$/.test(yt.text))&&(ft=ft.substring(1)),rt.text=ft,ft.length===0?ot.splice(et,1):et++}else et++;var yt,_t;for(et=0;et<ot.length;et++)(rt=ot[et]).kind!=="br"&&rt.space!=="preserve"?/[ ]$/.test(rt.text)&&(et===ot.length-1||(_t=ot[et+1]).kind==="br"||_t.space==="preserve"&&/^[\r\n]/.test(_t.text))&&(rt.text=rt.text.slice(0,-1)):et++}(Tt),U(he)}return he.kind==="div"&&y.byName.backgroundImage.qname in he.styleAttrs||he.kind==="br"||he.kind==="image"||"contents"in he&&he.contents.length>0||he.kind==="span"&&he.text!==null||he.kind==="region"&&he.styleAttrs[y.byName.showBackground.qname]==="always"?{region_id:oe,element:he}:null}function T(R,j){if("contents"in R)for(var z=0;z<R.contents.length;z++){var W=R.contents[z],X=W.styleAttrs[y.byName.ruby.qname];(W.kind!=="span"||X!=="textContainer"&&X!=="text")&&("contents"in W?T(W,j):(W.kind==="span"&&W.text.length!==0||W.kind==="br")&&j.push(W))}}function U(R){if(R.kind==="br")return!1;if("text"in R)return R.text.length===0;if("contents"in R){for(var j=R.contents.length;j--;)U(R.contents[j])&&R.contents.splice(j,1);return R.contents.length===0}}function x(R){this.contents=[],this.aspectRatio=R.aspectRatio,this.lang=R.lang}function _(R){for(var j in this.kind=R.kind||"region",this.lang=R.lang,R.id&&(this.id=R.id),this.styleAttrs={},R.styleAttrs)R.styleAttrs.hasOwnProperty(j)&&(this.styleAttrs[j]=R.styleAttrs[j]);"src"in R&&(this.src=R.src),"type"in R&&(this.type=R.type),"text"in R?this.text=R.text:(this.kind==="region"||"contents"in R)&&(this.contents=[]),"space"in R&&(this.space=R.space)}function I(R,j){if(R&&R.error&&R.error(j))throw j}})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4403:function(b,g,w){g.generateISD=w(4080).generateISD,g.fromXML=w(3362).fromXML,g.renderHTML=w(506).render},210:function(b,g){(function(w){w.ns_tt="http://www.w3.org/ns/ttml",w.ns_tts="http://www.w3.org/ns/ttml#styling",w.ns_ttp="http://www.w3.org/ns/ttml#parameter",w.ns_xml="http://www.w3.org/XML/1998/namespace",w.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",w.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",w.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",w.ns_ebutts="urn:ebu:tt:style"})(g)},6811:function(b,g,w){(function(F,C,y){function v(T,U,x,_,I,R,j,z){this.name=U,this.ns=T,this.qname=T+" "+U,this.inherit=I,this.animatable=R,this.initial=x,this.applies=_,this.parse=j,this.compute=z}for(var D in F.all=[new v(C.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,y.parseColor,null),new v(C.ns_tts,"color","white",["span"],!0,!0,y.parseColor,null),new v(C.ns_tts,"direction","ltr",["p","span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(T){return T},null),new v(C.ns_tts,"displayAlign","before",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"extent","auto",["tt","region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var x=y.parseLength(U[0]),_=y.parseLength(U[1]);return _&&x?{h:_,w:x}:null},function(T,U,x,_,I){var R,j;if(_==="auto")R=new y.ComputedLength(0,1);else if((R=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")j=new y.ComputedLength(1,0);else if((j=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:R,w:j}}),new v(C.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(T){for(var U=T.split(","),x=[],_=0;_<U.length;_++)U[_]=U[_].trim(),U[_].charAt(0)!=="'"&&U[_].charAt(0)!=='"'&&U[_]==="default"?x.push("monospaceSerif"):x.push(U[_]);return x},null),new v(C.ns_tts,"shear","0%",["p"],!0,!0,y.parseLength,function(T,U,x,_){return _.unit!=="%"?null:Math.abs(_.value)>100?100*Math.sign(_.value):_.value}),new v(C.ns_tts,"fontSize","1c",["span","p"],!0,!0,y.parseLength,function(T,U,x,_,I){return y.toComputedLength(_.value,_.unit,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,T.cellLength.h,T.pxLength.h)}),new v(C.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(T){return T},null),new v(C.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(T){return T},null),new v(C.ns_tts,"lineHeight","normal",["p"],!0,!0,function(T){return T==="normal"?T:y.parseLength(T)},function(T,U,x,_,I){var R;if(_==="normal")R=_;else if((R=y.toComputedLength(_.value,_.unit,x.styleAttrs[F.byName.fontSize.qname],x.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null)return null;return R}),new v(C.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new v(C.ns_tts,"origin","auto",["region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var x=y.parseLength(U[0]),_=y.parseLength(U[1]);return _&&x?{h:_,w:x}:null},function(T,U,x,_,I){var R,j;if(_==="auto")R=new y.ComputedLength(0,0);else if((R=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")j=new y.ComputedLength(0,0);else if((j=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:R,w:j}}),new v(C.ns_tts,"overflow","hidden",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"padding","0px",["region"],!1,!0,function(T){var U=T.split(" ");if(U.length>4)return null;for(var x=[],_=0;_<U.length;_++){var I=y.parseLength(U[_]);if(!I)return null;x.push(I)}return x},function(T,U,x,_,I){var R;if(_.length===1)R=[_[0],_[0],_[0],_[0]];else if(_.length===2)R=[_[0],_[1],_[0],_[1]];else if(_.length===3)R=[_[0],_[1],_[2],_[1]];else{if(_.length!==4)return null;R=[_[0],_[1],_[2],_[3]]}var j=x.styleAttrs[F.byName.writingMode.qname];if(j==="lrtb"||j==="lr")R=[R[0],R[3],R[2],R[1]];else if(j==="rltb"||j==="rl")R=[R[0],R[1],R[2],R[3]];else if(j==="tblr")R=[R[3],R[0],R[1],R[2]];else{if(j!=="tbrl"&&j!=="tb")return null;R=[R[3],R[2],R[1],R[0]]}for(var z=[],W=0;W<R.length;W++)if(R[W].value===0)z[W]=new y.ComputedLength(0,0);else if(z[W]=y.toComputedLength(R[W].value,R[W].unit,x.styleAttrs[F.byName.fontSize.qname],W===0||W===2?x.styleAttrs[F.byName.extent.qname].h:x.styleAttrs[F.byName.extent.qname].w,W===0||W===2?T.cellLength.h:T.cellLength.w,W===0||W===2?T.pxLength.h:T.pxLength.w),z[W]===null)return null;return z}),new v(C.ns_tts,"position","top left",["region"],!1,!0,function(T){return y.parsePosition(T)},function(T,U,x,_){var I,R;return(I=y.toComputedLength(_.v.offset.value,_.v.offset.unit,null,new y.ComputedLength(-x.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-x.styleAttrs[F.byName.extent.qname].h.rh),null,T.pxLength.h))===null?null:(_.v.edge==="bottom"&&(I=new y.ComputedLength(-I.rw-x.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-I.rh-x.styleAttrs[F.byName.extent.qname].h.rh)),R=y.toComputedLength(_.h.offset.value,_.h.offset.unit,null,new y.ComputedLength(T.dimensions.w.rw-x.styleAttrs[F.byName.extent.qname].w.rw,-x.styleAttrs[F.byName.extent.qname].w.rh),null,T.pxLength.w),I===null?null:(_.h.edge==="right"&&(R=new y.ComputedLength(T.dimensions.w.rw-R.rw-x.styleAttrs[F.byName.extent.qname].w.rw,-R.rh-x.styleAttrs[F.byName.extent.qname].w.rh)),{h:I,w:R}))}),new v(C.ns_tts,"ruby","none",["span"],!1,!0,function(T){return T},null),new v(C.ns_tts,"rubyAlign","center",["span"],!0,!0,function(T){return T!=="center"&&T!=="spaceAround"?null:T},null),new v(C.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"rubyReserve","none",["p"],!0,!0,function(T){var U=T.split(" "),x=[null,null];if(U.length===0||U.length>2||U[0]!=="none"&&U[0]!=="both"&&U[0]!=="after"&&U[0]!=="before"&&U[0]!=="outside")return null;if(x[0]=U[0],U.length===2&&U[0]!=="none"){var _=y.parseLength(U[1]);if(!_)return null;x[1]=_}return x},function(T,U,x,_,I){if(_[0]==="none")return _;var R;return(R=_[1]===null?new y.ComputedLength(.5*x.styleAttrs[F.byName.fontSize.qname].rw,.5*x.styleAttrs[F.byName.fontSize.qname].rh):y.toComputedLength(_[1].value,_[1].unit,x.styleAttrs[F.byName.fontSize.qname],x.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null?null:[_[0],R]}),new v(C.ns_tts,"showBackground","always",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"textAlign","start",["p"],!0,!0,function(T){return T},function(T,U,x,_,I){return _==="left"?"start":_==="right"?"end":_}),new v(C.ns_tts,"textCombine","none",["span"],!0,!0,function(T){return T==="none"||T==="all"?T:null},null),new v(C.ns_tts,"textDecoration","none",["span"],!0,!0,function(T){return T.split(" ")},null),new v(C.ns_tts,"textEmphasis","none",["span"],!0,!0,function(T){for(var U=T.split(" "),x={style:null,symbol:null,color:null,position:null},_=0;_<U.length;_++)if(U[_]==="none"||U[_]==="auto")x.style=U[_];else if(U[_]==="filled"||U[_]==="open")x.style=U[_];else if(U[_]==="circle"||U[_]==="dot"||U[_]==="sesame")x.symbol=U[_];else if(U[_]==="current")x.color=U[_];else if(U[_]==="outside"||U[_]==="before"||U[_]==="after")x.position=U[_];else if(x.color=y.parseColor(U[_]),x.color===null)return null;return x.style==null&&x.symbol==null?x.style="auto":(x.symbol=x.symbol||"circle",x.style=x.style||"filled"),x.position=x.position||"outside",x.color=x.color||"current",x},null),new v(C.ns_tts,"textOutline","none",["span"],!0,!0,function(T){if(T==="none")return T;var U={},x=T.split(" ");if(x.length===0||x.length>2)return null;var _=y.parseColor(x[0]);if(U.color=_,_!==null&&x.shift(),x.length!==1)return null;var I=y.parseLength(x[0]);return I?(U.thickness=I,U):null},function(T,U,x,_,I){if(_==="none")return _;var R={};return _.color===null?R.color=x.styleAttrs[F.byName.color.qname]:R.color=_.color,R.thickness=y.toComputedLength(_.thickness.value,_.thickness.unit,x.styleAttrs[F.byName.fontSize.qname],x.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h),R.thickness===null?null:R}),new v(C.ns_tts,"textShadow","none",["span"],!0,!0,y.parseTextShadow,function(T,U,x,_){if(_==="none")return _;for(var I=[],R=0;R<_.length;R++){var j={};if(j.x_off=y.toComputedLength(_[R][0].value,_[R][0].unit,null,x.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.w),j.x_off===null||(j.y_off=y.toComputedLength(_[R][1].value,_[R][1].unit,null,x.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),j.y_off===null))return null;if(_[R][2]===null)j.b_radius=0;else if(j.b_radius=y.toComputedLength(_[R][2].value,_[R][2].unit,null,x.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),j.b_radius===null)return null;_[R][3]===null?j.color=x.styleAttrs[F.byName.color.qname]:j.color=_[R][3],I.push(j)}return I}),new v(C.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(T){return T},null),new v(C.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"zIndex","auto",["region"],!1,!0,function(T){var U;return T==="auto"?U=T:(U=parseInt(T),isNaN(U)&&(U=null)),U},null),new v(C.ns_ebutts,"linePadding","0c",["p"],!0,!1,y.parseLength,function(T,U,x,_,I){return y.toComputedLength(_.value,_.unit,null,null,T.cellLength.w,null)}),new v(C.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(T){return T},null),new v(C.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(T){return T},null),new v(C.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(T){return T==="true"},null),new v(C.ns_itts,"fillLineGap","false",["p"],!0,!0,function(T){return T==="true"},null)],F.byQName={},F.all)F.byQName[F.all[D].qname]=F.all[D];for(var m in F.byName={},F.all)F.byName[F.all[m].name]=F.all[m]})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscUtils>"u"?w(5926):imscUtils)},5926:function(b,g){(function(w){var F=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,C=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,y=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,v={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};w.parseColor=function(m){var T,U=null,x=v[m.toLowerCase()];return x!==void 0?U=x:(T=F.exec(m))!==null?U=[parseInt(T[1],16),parseInt(T[2],16),parseInt(T[3],16),T[4]!==void 0?parseInt(T[4],16):255]:(T=C.exec(m))!==null?U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),255]:(T=y.exec(m))!==null&&(U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),parseInt(T[4])]),U};var D=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;w.parseLength=function(m){var T,U=null;return(T=D.exec(m))!==null&&(U={value:parseFloat(T[1]),unit:T[2]}),U},w.parseTextShadow=function(m){for(var T=m.match(/([^\(,\)]|\([^\)]+\))+/g),U=[],x=0;x<T.length;x++){var _=T[x].split(" ");if(_.length===1&&_[0]==="none")return"none";if(_.length>1&&_.length<5){var I=[null,null,null,null],R=w.parseLength(_.shift());if(R===null||(I[0]=R,(R=w.parseLength(_.shift()))===null))return null;if(I[1]=R,_.length===0){U.push(I);continue}if((R=w.parseLength(_[0]))!==null&&(I[2]=R,_.shift()),_.length===0){U.push(I);continue}var j=w.parseColor(_[0]);if(j===null)return null;I[3]=j,U.push(I)}}return U},w.parsePosition=function(m){var T=m.split(" "),U=function(W){return W==="center"||W==="left"||W==="top"||W==="bottom"||W==="right"};if(T.length>4)return null;for(var x=0;x<T.length;x++)if(!U(T[x])){var _=w.parseLength(T[x]);if(_===null)return null;T[x]=_}for(var I={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},R=0;R<T.length;){var j=T[R++];if(U(j)){var z={value:0,unit:"%"};T.length!==2&&R<T.length&&!U(T[R])&&(z=T[R++]),j==="right"?(I.h.edge=j,I.h.offset=z):j==="bottom"?(I.v.edge=j,I.v.offset=z):j==="left"?I.h.offset=z:j==="top"&&(I.v.offset=z)}else{if(T.length!==1&&T.length!==2)return null;R===1?I.h.offset=j:I.v.offset=j}}return I},w.ComputedLength=function(m,T){this.rw=m,this.rh=T},w.ComputedLength.prototype.toUsedLength=function(m,T){return m*this.rw+T*this.rh},w.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},w.toComputedLength=function(m,T,U,x,_,I){return T==="%"&&x?new w.ComputedLength(x.rw*m/100,x.rh*m/100):T==="em"&&U?new w.ComputedLength(U.rw*m,U.rh*m):T==="c"&&_?new w.ComputedLength(m*_.rw,m*_.rh):T==="px"&&I?new w.ComputedLength(m*I.rw,m*I.rh):T==="rh"?new w.ComputedLength(0,m/100):T==="rw"?new w.ComputedLength(m/100,0):null}})(g)},3516:function(b){b.exports=function(g){var w=typeof g=="string"?g.charCodeAt(0):g;return w>=97&&w<=122||w>=65&&w<=90}},2219:function(b,g,w){var F=w(3516),C=w(395);b.exports=function(y){return F(y)||C(y)}},395:function(b){b.exports=function(g){var w=typeof g=="string"?g.charCodeAt(0):g;return w>=48&&w<=57}},3875:function(b){function g(C){if(typeof C!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(C))}function w(C,y){for(var v,D="",m=0,T=-1,U=0,x=0;x<=C.length;++x){if(x<C.length)v=C.charCodeAt(x);else{if(v===47)break;v=47}if(v===47){if(!(T===x-1||U===1))if(T!==x-1&&U===2){if(D.length<2||m!==2||D.charCodeAt(D.length-1)!==46||D.charCodeAt(D.length-2)!==46){if(D.length>2){var _=D.lastIndexOf("/");if(_!==D.length-1){_===-1?(D="",m=0):m=(D=D.slice(0,_)).length-1-D.lastIndexOf("/"),T=x,U=0;continue}}else if(D.length===2||D.length===1){D="",m=0,T=x,U=0;continue}}y&&(D.length>0?D+="/..":D="..",m=2)}else D.length>0?D+="/"+C.slice(T+1,x):D=C.slice(T+1,x),m=x-T-1;T=x,U=0}else v===46&&U!==-1?++U:U=-1}return D}var F={resolve:function(){for(var C,y="",v=!1,D=arguments.length-1;D>=-1&&!v;D--){var m;D>=0?m=arguments[D]:(C===void 0&&(C=process.cwd()),m=C),g(m),m.length!==0&&(y=m+"/"+y,v=m.charCodeAt(0)===47)}return y=w(y,!v),v?y.length>0?"/"+y:"/":y.length>0?y:"."},normalize:function(C){if(g(C),C.length===0)return".";var y=C.charCodeAt(0)===47,v=C.charCodeAt(C.length-1)===47;return(C=w(C,!y)).length!==0||y||(C="."),C.length>0&&v&&(C+="/"),y?"/"+C:C},isAbsolute:function(C){return g(C),C.length>0&&C.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var C,y=0;y<arguments.length;++y){var v=arguments[y];g(v),v.length>0&&(C===void 0?C=v:C+="/"+v)}return C===void 0?".":F.normalize(C)},relative:function(C,y){if(g(C),g(y),C===y||(C=F.resolve(C))===(y=F.resolve(y)))return"";for(var v=1;v<C.length&&C.charCodeAt(v)===47;++v);for(var D=C.length,m=D-v,T=1;T<y.length&&y.charCodeAt(T)===47;++T);for(var U=y.length-T,x=m<U?m:U,_=-1,I=0;I<=x;++I){if(I===x){if(U>x){if(y.charCodeAt(T+I)===47)return y.slice(T+I+1);if(I===0)return y.slice(T+I)}else m>x&&(C.charCodeAt(v+I)===47?_=I:I===0&&(_=0));break}var R=C.charCodeAt(v+I);if(R!==y.charCodeAt(T+I))break;R===47&&(_=I)}var j="";for(I=v+_+1;I<=D;++I)I!==D&&C.charCodeAt(I)!==47||(j.length===0?j+="..":j+="/..");return j.length>0?j+y.slice(T+_):(T+=_,y.charCodeAt(T)===47&&++T,y.slice(T))},_makeLong:function(C){return C},dirname:function(C){if(g(C),C.length===0)return".";for(var y=C.charCodeAt(0),v=y===47,D=-1,m=!0,T=C.length-1;T>=1;--T)if((y=C.charCodeAt(T))===47){if(!m){D=T;break}}else m=!1;return D===-1?v?"/":".":v&&D===1?"//":C.slice(0,D)},basename:function(C,y){if(y!==void 0&&typeof y!="string")throw new TypeError('"ext" argument must be a string');g(C);var v,D=0,m=-1,T=!0;if(y!==void 0&&y.length>0&&y.length<=C.length){if(y.length===C.length&&y===C)return"";var U=y.length-1,x=-1;for(v=C.length-1;v>=0;--v){var _=C.charCodeAt(v);if(_===47){if(!T){D=v+1;break}}else x===-1&&(T=!1,x=v+1),U>=0&&(_===y.charCodeAt(U)?--U==-1&&(m=v):(U=-1,m=x))}return D===m?m=x:m===-1&&(m=C.length),C.slice(D,m)}for(v=C.length-1;v>=0;--v)if(C.charCodeAt(v)===47){if(!T){D=v+1;break}}else m===-1&&(T=!1,m=v+1);return m===-1?"":C.slice(D,m)},extname:function(C){g(C);for(var y=-1,v=0,D=-1,m=!0,T=0,U=C.length-1;U>=0;--U){var x=C.charCodeAt(U);if(x!==47)D===-1&&(m=!1,D=U+1),x===46?y===-1?y=U:T!==1&&(T=1):y!==-1&&(T=-1);else if(!m){v=U+1;break}}return y===-1||D===-1||T===0||T===1&&y===D-1&&y===v+1?"":C.slice(y,D)},format:function(C){if(C===null||typeof C!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof C);return function(y,v){var D=v.dir||v.root,m=v.base||(v.name||"")+(v.ext||"");return D?D===v.root?D+m:D+"/"+m:m}(0,C)},parse:function(C){g(C);var y={root:"",dir:"",base:"",ext:"",name:""};if(C.length===0)return y;var v,D=C.charCodeAt(0),m=D===47;m?(y.root="/",v=1):v=0;for(var T=-1,U=0,x=-1,_=!0,I=C.length-1,R=0;I>=v;--I)if((D=C.charCodeAt(I))!==47)x===-1&&(_=!1,x=I+1),D===46?T===-1?T=I:R!==1&&(R=1):T!==-1&&(R=-1);else if(!_){U=I+1;break}return T===-1||x===-1||R===0||R===1&&T===x-1&&T===U+1?x!==-1&&(y.base=y.name=U===0&&m?C.slice(1,x):C.slice(U,x)):(U===0&&m?(y.name=C.slice(1,T),y.base=C.slice(1,x)):(y.name=C.slice(U,T),y.base=C.slice(U,x)),y.ext=C.slice(T,x)),U>0?y.dir=C.slice(0,U-1):m&&(y.dir="/"),y},sep:"/",delimiter:":",win32:null,posix:null};F.posix=F,b.exports=F},8387:function(b,g,w){var F=w(1549),C=F.Buffer;function y(D,m){for(var T in D)m[T]=D[T]}function v(D,m,T){return C(D,m,T)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?b.exports=F:(y(F,g),g.Buffer=v),y(C,v),v.from=function(D,m,T){if(typeof D=="number")throw new TypeError("Argument must not be a number");return C(D,m,T)},v.alloc=function(D,m,T){if(typeof D!="number")throw new TypeError("Argument must be a number");var U=C(D);return m!==void 0?typeof T=="string"?U.fill(m,T):U.fill(m):U.fill(0),U},v.allocUnsafe=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return C(D)},v.allocUnsafeSlow=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return F.SlowBuffer(D)}},5378:function(b,g,w){(function(F){F.parser=function(O,M){return new v(O,M)},F.SAXParser=v,F.SAXStream=m,F.createStream=function(O,M){return new m(O,M)},F.MAX_BUFFER_LENGTH=65536;var C,y=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function v(O,M){if(!(this instanceof v))return new v(O,M);var q=this;(function(K){for(var ye=0,de=y.length;ye<de;ye++)K[y[ye]]=""})(q),q.q=q.c="",q.bufferCheckPosition=F.MAX_BUFFER_LENGTH,q.opt=M||{},q.opt.lowercase=q.opt.lowercase||q.opt.lowercasetags,q.looseCase=q.opt.lowercase?"toLowerCase":"toUpperCase",q.tags=[],q.closed=q.closedRoot=q.sawRoot=!1,q.tag=q.error=null,q.strict=!!O,q.noscript=!(!O&&!q.opt.noscript),q.state=Ae.BEGIN,q.strictEntities=q.opt.strictEntities,q.ENTITIES=q.strictEntities?Object.create(F.XML_ENTITIES):Object.create(F.ENTITIES),q.attribList=[],q.opt.xmlns&&(q.ns=Object.create(z)),q.trackPosition=q.opt.position!==!1,q.trackPosition&&(q.position=q.line=q.column=0),it(q,"onready")}F.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(O){function M(){}return M.prototype=O,new M}),Object.keys||(Object.keys=function(O){var M=[];for(var q in O)O.hasOwnProperty(q)&&M.push(q);return M}),v.prototype={end:function(){Oe(this)},write:function(O){var M=this;if(this.error)throw this.error;if(M.closed)return At(M,"Cannot write after close. Assign an onready handler.");if(O===null)return Oe(M);typeof O=="object"&&(O=O.toString());for(var q=0,K="";K=Fe(O,q++),M.c=K,K;)switch(M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++),M.state){case Ae.BEGIN:if(M.state=Ae.BEGIN_WHITESPACE,K==="\uFEFF")continue;te(M,K);continue;case Ae.BEGIN_WHITESPACE:te(M,K);continue;case Ae.TEXT:if(M.sawRoot&&!M.closedRoot){for(var ye=q-1;K&&K!=="<"&&K!=="&";)(K=Fe(O,q++))&&M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++);M.textNode+=O.substring(ye,q-1)}K!=="<"||M.sawRoot&&M.closedRoot&&!M.strict?(!oe(T,K)||M.sawRoot&&!M.closedRoot||Qe(M,"Text data outside of root node."),K==="&"?M.state=Ae.TEXT_ENTITY:M.textNode+=K):(M.state=Ae.OPEN_WAKA,M.startTagPosition=M.position);continue;case Ae.SCRIPT:K==="<"?M.state=Ae.SCRIPT_ENDING:M.script+=K;continue;case Ae.SCRIPT_ENDING:K==="/"?M.state=Ae.CLOSE_TAG:(M.script+="<"+K,M.state=Ae.SCRIPT);continue;case Ae.OPEN_WAKA:if(K==="!")M.state=Ae.SGML_DECL,M.sgmlDecl="";else if(!fe(T,K))if(fe(W,K))M.state=Ae.OPEN_TAG,M.tagName=K;else if(K==="/")M.state=Ae.CLOSE_TAG,M.tagName="";else if(K==="?")M.state=Ae.PROC_INST,M.procInstName=M.procInstBody="";else{if(Qe(M,"Unencoded <"),M.startTagPosition+1<M.position){var de=M.position-M.startTagPosition;K=new Array(de).join(" ")+K}M.textNode+="<"+K,M.state=Ae.TEXT}continue;case Ae.SGML_DECL:(M.sgmlDecl+K).toUpperCase()==="[CDATA["?(ut(M,"onopencdata"),M.state=Ae.CDATA,M.sgmlDecl="",M.cdata=""):M.sgmlDecl+K==="--"?(M.state=Ae.COMMENT,M.comment="",M.sgmlDecl=""):(M.sgmlDecl+K).toUpperCase()==="DOCTYPE"?(M.state=Ae.DOCTYPE,(M.doctype||M.sawRoot)&&Qe(M,"Inappropriately located doctype declaration"),M.doctype="",M.sgmlDecl=""):K===">"?(ut(M,"onsgmldeclaration",M.sgmlDecl),M.sgmlDecl="",M.state=Ae.TEXT):(fe(_,K)&&(M.state=Ae.SGML_DECL_QUOTED),M.sgmlDecl+=K);continue;case Ae.SGML_DECL_QUOTED:K===M.q&&(M.state=Ae.SGML_DECL,M.q=""),M.sgmlDecl+=K;continue;case Ae.DOCTYPE:K===">"?(M.state=Ae.TEXT,ut(M,"ondoctype",M.doctype),M.doctype=!0):(M.doctype+=K,K==="["?M.state=Ae.DOCTYPE_DTD:fe(_,K)&&(M.state=Ae.DOCTYPE_QUOTED,M.q=K));continue;case Ae.DOCTYPE_QUOTED:M.doctype+=K,K===M.q&&(M.q="",M.state=Ae.DOCTYPE);continue;case Ae.DOCTYPE_DTD:M.doctype+=K,K==="]"?M.state=Ae.DOCTYPE:fe(_,K)&&(M.state=Ae.DOCTYPE_DTD_QUOTED,M.q=K);continue;case Ae.DOCTYPE_DTD_QUOTED:M.doctype+=K,K===M.q&&(M.state=Ae.DOCTYPE_DTD,M.q="");continue;case Ae.COMMENT:K==="-"?M.state=Ae.COMMENT_ENDING:M.comment+=K;continue;case Ae.COMMENT_ENDING:K==="-"?(M.state=Ae.COMMENT_ENDED,M.comment=lt(M.opt,M.comment),M.comment&&ut(M,"oncomment",M.comment),M.comment=""):(M.comment+="-"+K,M.state=Ae.COMMENT);continue;case Ae.COMMENT_ENDED:K!==">"?(Qe(M,"Malformed comment"),M.comment+="--"+K,M.state=Ae.COMMENT):M.state=Ae.TEXT;continue;case Ae.CDATA:K==="]"?M.state=Ae.CDATA_ENDING:M.cdata+=K;continue;case Ae.CDATA_ENDING:K==="]"?M.state=Ae.CDATA_ENDING_2:(M.cdata+="]"+K,M.state=Ae.CDATA);continue;case Ae.CDATA_ENDING_2:K===">"?(M.cdata&&ut(M,"oncdata",M.cdata),ut(M,"onclosecdata"),M.cdata="",M.state=Ae.TEXT):K==="]"?M.cdata+="]":(M.cdata+="]]"+K,M.state=Ae.CDATA);continue;case Ae.PROC_INST:K==="?"?M.state=Ae.PROC_INST_ENDING:fe(T,K)?M.state=Ae.PROC_INST_BODY:M.procInstName+=K;continue;case Ae.PROC_INST_BODY:if(!M.procInstBody&&fe(T,K))continue;K==="?"?M.state=Ae.PROC_INST_ENDING:M.procInstBody+=K;continue;case Ae.PROC_INST_ENDING:K===">"?(ut(M,"onprocessinginstruction",{name:M.procInstName,body:M.procInstBody}),M.procInstName=M.procInstBody="",M.state=Ae.TEXT):(M.procInstBody+="?"+K,M.state=Ae.PROC_INST_BODY);continue;case Ae.OPEN_TAG:fe(X,K)?M.tagName+=K:(ct(M),K===">"?St(M):K==="/"?M.state=Ae.OPEN_TAG_SLASH:(oe(T,K)&&Qe(M,"Invalid character in tag name"),M.state=Ae.ATTRIB));continue;case Ae.OPEN_TAG_SLASH:K===">"?(St(M,!0),Lt(M)):(Qe(M,"Forward-slash in opening tag not followed by >"),M.state=Ae.ATTRIB);continue;case Ae.ATTRIB:if(fe(T,K))continue;K===">"?St(M):K==="/"?M.state=Ae.OPEN_TAG_SLASH:fe(W,K)?(M.attribName=K,M.attribValue="",M.state=Ae.ATTRIB_NAME):Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_NAME:K==="="?M.state=Ae.ATTRIB_VALUE:K===">"?(Qe(M,"Attribute without value"),M.attribValue=M.attribName,Kt(M),St(M)):fe(T,K)?M.state=Ae.ATTRIB_NAME_SAW_WHITE:fe(X,K)?M.attribName+=K:Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_NAME_SAW_WHITE:if(K==="=")M.state=Ae.ATTRIB_VALUE;else{if(fe(T,K))continue;Qe(M,"Attribute without value"),M.tag.attributes[M.attribName]="",M.attribValue="",ut(M,"onattribute",{name:M.attribName,value:""}),M.attribName="",K===">"?St(M):fe(W,K)?(M.attribName=K,M.state=Ae.ATTRIB_NAME):(Qe(M,"Invalid attribute name"),M.state=Ae.ATTRIB)}continue;case Ae.ATTRIB_VALUE:if(fe(T,K))continue;fe(_,K)?(M.q=K,M.state=Ae.ATTRIB_VALUE_QUOTED):(Qe(M,"Unquoted attribute value"),M.state=Ae.ATTRIB_VALUE_UNQUOTED,M.attribValue=K);continue;case Ae.ATTRIB_VALUE_QUOTED:if(K!==M.q){K==="&"?M.state=Ae.ATTRIB_VALUE_ENTITY_Q:M.attribValue+=K;continue}Kt(M),M.q="",M.state=Ae.ATTRIB_VALUE_CLOSED;continue;case Ae.ATTRIB_VALUE_CLOSED:fe(T,K)?M.state=Ae.ATTRIB:K===">"?St(M):K==="/"?M.state=Ae.OPEN_TAG_SLASH:fe(W,K)?(Qe(M,"No whitespace between attributes"),M.attribName=K,M.attribValue="",M.state=Ae.ATTRIB_NAME):Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_VALUE_UNQUOTED:if(oe(I,K)){K==="&"?M.state=Ae.ATTRIB_VALUE_ENTITY_U:M.attribValue+=K;continue}Kt(M),K===">"?St(M):M.state=Ae.ATTRIB;continue;case Ae.CLOSE_TAG:if(M.tagName)K===">"?Lt(M):fe(X,K)?M.tagName+=K:M.script?(M.script+="</"+M.tagName,M.tagName="",M.state=Ae.SCRIPT):(oe(T,K)&&Qe(M,"Invalid tagname in closing tag"),M.state=Ae.CLOSE_TAG_SAW_WHITE);else{if(fe(T,K))continue;oe(W,K)?M.script?(M.script+="</"+K,M.state=Ae.SCRIPT):Qe(M,"Invalid tagname in closing tag."):M.tagName=K}continue;case Ae.CLOSE_TAG_SAW_WHITE:if(fe(T,K))continue;K===">"?Lt(M):Qe(M,"Invalid characters in closing tag");continue;case Ae.TEXT_ENTITY:case Ae.ATTRIB_VALUE_ENTITY_Q:case Ae.ATTRIB_VALUE_ENTITY_U:var He,Tt;switch(M.state){case Ae.TEXT_ENTITY:He=Ae.TEXT,Tt="textNode";break;case Ae.ATTRIB_VALUE_ENTITY_Q:He=Ae.ATTRIB_VALUE_QUOTED,Tt="attribValue";break;case Ae.ATTRIB_VALUE_ENTITY_U:He=Ae.ATTRIB_VALUE_UNQUOTED,Tt="attribValue"}K===";"?(M[Tt]+=Ce(M),M.entity="",M.state=He):fe(M.entity.length?N:le,K)?M.entity+=K:(Qe(M,"Invalid character in entity name"),M[Tt]+="&"+M.entity+K,M.entity="",M.state=He);continue;default:throw new Error(M,"Unknown state: "+M.state)}return M.position>=M.bufferCheckPosition&&function(ot){for(var rt=Math.max(F.MAX_BUFFER_LENGTH,10),et=0,ft=0,yt=y.length;ft<yt;ft++){var _t=ot[y[ft]].length;if(_t>rt)switch(y[ft]){case"textNode":$e(ot);break;case"cdata":ut(ot,"oncdata",ot.cdata),ot.cdata="";break;case"script":ut(ot,"onscript",ot.script),ot.script="";break;default:At(ot,"Max buffer length exceeded: "+y[ft])}et=Math.max(et,_t)}var Ct=F.MAX_BUFFER_LENGTH-et;ot.bufferCheckPosition=Ct+ot.position}(M),M},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var O;$e(O=this),O.cdata!==""&&(ut(O,"oncdata",O.cdata),O.cdata=""),O.script!==""&&(ut(O,"onscript",O.script),O.script="")}};try{C=w(182).Stream}catch(O){C=function(){}}var D=F.EVENTS.filter(function(O){return O!=="error"&&O!=="end"});function m(O,M){if(!(this instanceof m))return new m(O,M);C.apply(this),this._parser=new v(O,M),this.writable=!0,this.readable=!0;var q=this;this._parser.onend=function(){q.emit("end")},this._parser.onerror=function(K){q.emit("error",K),q._parser.error=null},this._decoder=null,D.forEach(function(K){Object.defineProperty(q,"on"+K,{get:function(){return q._parser["on"+K]},set:function(ye){if(!ye)return q.removeAllListeners(K),q._parser["on"+K]=ye,ye;q.on(K,ye)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(C.prototype,{constructor:{value:m}}),m.prototype.write=function(O){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(O)){if(!this._decoder){var M=w(7503).s;this._decoder=new M("utf8")}O=this._decoder.write(O)}return this._parser.write(O.toString()),this.emit("data",O),!0},m.prototype.end=function(O){return O&&O.length&&this.write(O),this._parser.end(),!0},m.prototype.on=function(O,M){var q=this;return q._parser["on"+O]||D.indexOf(O)===-1||(q._parser["on"+O]=function(){var K=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,O),q.emit.apply(q,K)}),C.prototype.on.call(q,O,M)};var T="\r\n	 ",U="0124356789",x="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",_="'\"",I=T+">",R="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/2000/xmlns/",z={xml:R,xmlns:j};T=$(T),U=$(U),x=$(x);var W=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,X=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,le=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,N=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function $(O){return O.split("").reduce(function(M,q){return M[q]=!0,M},{})}function fe(O,M){return function(q){return Object.prototype.toString.call(q)==="[object RegExp]"}(O)?!!M.match(O):O[M]}function oe(O,M){return!fe(O,M)}_=$(_),I=$(I);var he,Ie,Xe,Ae=0;for(var Ze in F.STATE={BEGIN:Ae++,BEGIN_WHITESPACE:Ae++,TEXT:Ae++,TEXT_ENTITY:Ae++,OPEN_WAKA:Ae++,SGML_DECL:Ae++,SGML_DECL_QUOTED:Ae++,DOCTYPE:Ae++,DOCTYPE_QUOTED:Ae++,DOCTYPE_DTD:Ae++,DOCTYPE_DTD_QUOTED:Ae++,COMMENT_STARTING:Ae++,COMMENT:Ae++,COMMENT_ENDING:Ae++,COMMENT_ENDED:Ae++,CDATA:Ae++,CDATA_ENDING:Ae++,CDATA_ENDING_2:Ae++,PROC_INST:Ae++,PROC_INST_BODY:Ae++,PROC_INST_ENDING:Ae++,OPEN_TAG:Ae++,OPEN_TAG_SLASH:Ae++,ATTRIB:Ae++,ATTRIB_NAME:Ae++,ATTRIB_NAME_SAW_WHITE:Ae++,ATTRIB_VALUE:Ae++,ATTRIB_VALUE_QUOTED:Ae++,ATTRIB_VALUE_CLOSED:Ae++,ATTRIB_VALUE_UNQUOTED:Ae++,ATTRIB_VALUE_ENTITY_Q:Ae++,ATTRIB_VALUE_ENTITY_U:Ae++,CLOSE_TAG:Ae++,CLOSE_TAG_SAW_WHITE:Ae++,SCRIPT:Ae++,SCRIPT_ENDING:Ae++},F.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},F.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(F.ENTITIES).forEach(function(O){var M=F.ENTITIES[O],q=typeof M=="number"?String.fromCharCode(M):M;F.ENTITIES[O]=q}),F.STATE)F.STATE[F.STATE[Ze]]=Ze;function it(O,M,q){O[M]&&O[M](q)}function ut(O,M,q){O.textNode&&$e(O),it(O,M,q)}function $e(O){O.textNode=lt(O.opt,O.textNode),O.textNode&&it(O,"ontext",O.textNode),O.textNode=""}function lt(O,M){return O.trim&&(M=M.trim()),O.normalize&&(M=M.replace(/\s+/g," ")),M}function At(O,M){return $e(O),O.trackPosition&&(M+="\nLine: "+O.line+"\nColumn: "+O.column+"\nChar: "+O.c),M=new Error(M),O.error=M,it(O,"onerror",M),O}function Oe(O){return O.sawRoot&&!O.closedRoot&&Qe(O,"Unclosed root tag"),O.state!==Ae.BEGIN&&O.state!==Ae.BEGIN_WHITESPACE&&O.state!==Ae.TEXT&&At(O,"Unexpected end"),$e(O),O.c="",O.closed=!0,it(O,"onend"),v.call(O,O.strict,O.opt),O}function Qe(O,M){if(typeof O!="object"||!(O instanceof v))throw new Error("bad call to strictFail");O.strict&&At(O,M)}function ct(O){O.strict||(O.tagName=O.tagName[O.looseCase]());var M=O.tags[O.tags.length-1]||O,q=O.tag={name:O.tagName,attributes:{}};O.opt.xmlns&&(q.ns=M.ns),O.attribList.length=0,ut(O,"onopentagstart",q)}function Qt(O,M){var q=O.indexOf(":")<0?["",O]:O.split(":"),K=q[0],ye=q[1];return M&&O==="xmlns"&&(K="xmlns",ye=""),{prefix:K,local:ye}}function Kt(O){if(O.strict||(O.attribName=O.attribName[O.looseCase]()),O.attribList.indexOf(O.attribName)!==-1||O.tag.attributes.hasOwnProperty(O.attribName))O.attribName=O.attribValue="";else{if(O.opt.xmlns){var M=Qt(O.attribName,!0),q=M.prefix,K=M.local;if(q==="xmlns")if(K==="xml"&&O.attribValue!==R)Qe(O,"xml: prefix must be bound to "+R+"\nActual: "+O.attribValue);else if(K==="xmlns"&&O.attribValue!==j)Qe(O,"xmlns: prefix must be bound to "+j+"\nActual: "+O.attribValue);else{var ye=O.tag,de=O.tags[O.tags.length-1]||O;ye.ns===de.ns&&(ye.ns=Object.create(de.ns)),ye.ns[K]=O.attribValue}O.attribList.push([O.attribName,O.attribValue])}else O.tag.attributes[O.attribName]=O.attribValue,ut(O,"onattribute",{name:O.attribName,value:O.attribValue});O.attribName=O.attribValue=""}}function St(O,M){if(O.opt.xmlns){var q=O.tag,K=Qt(O.tagName);q.prefix=K.prefix,q.local=K.local,q.uri=q.ns[K.prefix]||"",q.prefix&&!q.uri&&(Qe(O,"Unbound namespace prefix: "+JSON.stringify(O.tagName)),q.uri=K.prefix);var ye=O.tags[O.tags.length-1]||O;q.ns&&ye.ns!==q.ns&&Object.keys(q.ns).forEach(function(hn){ut(O,"onopennamespace",{prefix:hn,uri:q.ns[hn]})});for(var de=0,He=O.attribList.length;de<He;de++){var Tt=O.attribList[de],ot=Tt[0],rt=Tt[1],et=Qt(ot,!0),ft=et.prefix,yt=et.local,_t=ft===""?"":q.ns[ft]||"",Ct={name:ot,value:rt,prefix:ft,local:yt,uri:_t};ft&&ft!=="xmlns"&&!_t&&(Qe(O,"Unbound namespace prefix: "+JSON.stringify(ft)),Ct.uri=ft),O.tag.attributes[ot]=Ct,ut(O,"onattribute",Ct)}O.attribList.length=0}O.tag.isSelfClosing=!!M,O.sawRoot=!0,O.tags.push(O.tag),ut(O,"onopentag",O.tag),M||(O.noscript||O.tagName.toLowerCase()!=="script"?O.state=Ae.TEXT:O.state=Ae.SCRIPT,O.tag=null,O.tagName=""),O.attribName=O.attribValue="",O.attribList.length=0}function Lt(O){if(!O.tagName)return Qe(O,"Weird empty close tag."),O.textNode+="</>",void(O.state=Ae.TEXT);if(O.script){if(O.tagName!=="script")return O.script+="</"+O.tagName+">",O.tagName="",void(O.state=Ae.SCRIPT);ut(O,"onscript",O.script),O.script=""}var M=O.tags.length,q=O.tagName;O.strict||(q=q[O.looseCase]());for(var K=q;M--&&O.tags[M].name!==K;)Qe(O,"Unexpected close tag");if(M<0)return Qe(O,"Unmatched closing tag: "+O.tagName),O.textNode+="</"+O.tagName+">",void(O.state=Ae.TEXT);O.tagName=q;for(var ye=O.tags.length;ye-- >M;){var de=O.tag=O.tags.pop();O.tagName=O.tag.name,ut(O,"onclosetag",O.tagName);var He={};for(var Tt in de.ns)He[Tt]=de.ns[Tt];var ot=O.tags[O.tags.length-1]||O;O.opt.xmlns&&de.ns!==ot.ns&&Object.keys(de.ns).forEach(function(rt){var et=de.ns[rt];ut(O,"onclosenamespace",{prefix:rt,uri:et})})}M===0&&(O.closedRoot=!0),O.tagName=O.attribValue=O.attribName="",O.attribList.length=0,O.state=Ae.TEXT}function Ce(O){var M,q=O.entity,K=q.toLowerCase(),ye="";return O.ENTITIES[q]?O.ENTITIES[q]:O.ENTITIES[K]?O.ENTITIES[K]:((q=K).charAt(0)==="#"&&(q.charAt(1)==="x"?(q=q.slice(2),ye=(M=parseInt(q,16)).toString(16)):(q=q.slice(1),ye=(M=parseInt(q,10)).toString(10))),q=q.replace(/^0+/,""),ye.toLowerCase()!==q?(Qe(O,"Invalid character entity"),"&"+O.entity+";"):String.fromCodePoint(M))}function te(O,M){M==="<"?(O.state=Ae.OPEN_WAKA,O.startTagPosition=O.position):oe(T,M)&&(Qe(O,"Non-whitespace before first tag."),O.textNode=M,O.state=Ae.TEXT)}function Fe(O,M){var q="";return M<O.length&&(q=O.charAt(M)),q}Ae=F.STATE,String.fromCodePoint||(he=String.fromCharCode,Ie=Math.floor,Xe=function(){var O,M,q=16384,K=[],ye=-1,de=arguments.length;if(!de)return"";for(var He="";++ye<de;){var Tt=Number(arguments[ye]);if(!isFinite(Tt)||Tt<0||Tt>1114111||Ie(Tt)!==Tt)throw RangeError("Invalid code point: "+Tt);Tt<=65535?K.push(Tt):(O=55296+((Tt-=65536)>>10),M=Tt%1024+56320,K.push(O,M)),(ye+1===de||K.length>q)&&(He+=he.apply(null,K),K.length=0)}return He},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Xe,configurable:!0,writable:!0}):String.fromCodePoint=Xe)})(g)},182:function(b,g,w){b.exports=C;var F=w(1159).EventEmitter;function C(){F.call(this)}w(1765)(C,F),C.Readable=w(2846),C.Writable=w(8318),C.Duplex=w(6138),C.Transform=w(9798),C.PassThrough=w(5472),C.finished=w(8800),C.pipeline=w(7295),C.Stream=C,C.prototype.pipe=function(y,v){var D=this;function m(j){y.writable&&y.write(j)===!1&&D.pause&&D.pause()}function T(){D.readable&&D.resume&&D.resume()}D.on("data",m),y.on("drain",T),y._isStdio||v&&v.end===!1||(D.on("end",x),D.on("close",_));var U=!1;function x(){U||(U=!0,y.end())}function _(){U||(U=!0,typeof y.destroy=="function"&&y.destroy())}function I(j){if(R(),F.listenerCount(this,"error")===0)throw j}function R(){D.removeListener("data",m),y.removeListener("drain",T),D.removeListener("end",x),D.removeListener("close",_),D.removeListener("error",I),y.removeListener("error",I),D.removeListener("end",R),D.removeListener("close",R),y.removeListener("close",R)}return D.on("error",I),y.on("error",I),D.on("end",R),D.on("close",R),y.on("close",R),y.emit("pipe",D),y}},1765:function(b){typeof Object.create=="function"?b.exports=function(g,w){w&&(g.super_=w,g.prototype=Object.create(w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:b.exports=function(g,w){if(w){g.super_=w;var F=function(){};F.prototype=w.prototype,g.prototype=new F,g.prototype.constructor=g}}},3690:function(b){var g={};function w(C,y,v){v||(v=Error);var D=function(m){var T,U;function x(_,I,R){return m.call(this,function(j,z,W){return typeof y=="string"?y:y(j,z,W)}(_,I,R))||this}return U=m,(T=x).prototype=Object.create(U.prototype),T.prototype.constructor=T,T.__proto__=U,x}(v);D.prototype.name=v.name,D.prototype.code=C,g[C]=D}function F(C,y){if(Array.isArray(C)){var v=C.length;return C=C.map(function(D){return String(D)}),v>2?"one of ".concat(y," ").concat(C.slice(0,v-1).join(", "),", or ")+C[v-1]:v===2?"one of ".concat(y," ").concat(C[0]," or ").concat(C[1]):"of ".concat(y," ").concat(C[0])}return"of ".concat(y," ").concat(String(C))}w("ERR_INVALID_OPT_VALUE",function(C,y){return'The value "'+y+'" is invalid for option "'+C+'"'},TypeError),w("ERR_INVALID_ARG_TYPE",function(C,y,v){var D,m,T,U,x;if(typeof y=="string"&&(m="not ",y.substr(0,m.length)===m)?(D="must not be",y=y.replace(/^not /,"")):D="must be",function(I,R,j){return(j===void 0||j>I.length)&&(j=I.length),I.substring(j-R.length,j)===R}(C," argument"))T="The ".concat(C," ").concat(D," ").concat(F(y,"type"));else{var _=(typeof x!="number"&&(x=0),x+1>(U=C).length||U.indexOf(".",x)===-1?"argument":"property");T='The "'.concat(C,'" ').concat(_," ").concat(D," ").concat(F(y,"type"))}return T+". Received type ".concat(typeof v)},TypeError),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),w("ERR_METHOD_NOT_IMPLEMENTED",function(C){return"The "+C+" method is not implemented"}),w("ERR_STREAM_PREMATURE_CLOSE","Premature close"),w("ERR_STREAM_DESTROYED",function(C){return"Cannot call "+C+" after a stream was destroyed"}),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),w("ERR_STREAM_WRITE_AFTER_END","write after end"),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_UNKNOWN_ENCODING",function(C){return"Unknown encoding: "+C},TypeError),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),b.exports.q=g},6138:function(b,g,w){var F=Object.keys||function(_){var I=[];for(var R in _)I.push(R);return I};b.exports=T;var C=w(2846),y=w(8318);w(1765)(T,C);for(var v=F(y.prototype),D=0;D<v.length;D++){var m=v[D];T.prototype[m]||(T.prototype[m]=y.prototype[m])}function T(_){if(!(this instanceof T))return new T(_);C.call(this,_),y.call(this,_),this.allowHalfOpen=!0,_&&(_.readable===!1&&(this.readable=!1),_.writable===!1&&(this.writable=!1),_.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",U)))}function U(){this._writableState.ended||process.nextTick(x,this)}function x(_){_.end()}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=_,this._writableState.destroyed=_)}})},5472:function(b,g,w){b.exports=C;var F=w(9798);function C(y){if(!(this instanceof C))return new C(y);F.call(this,y)}w(1765)(C,F),C.prototype._transform=function(y,v,D){D(null,y)}},2846:function(b,g,w){var F;b.exports=he,he.ReadableState=oe,w(1159).EventEmitter;var C,y=function(Ce,te){return Ce.listeners(te).length},v=w(9299),D=w(1549).Buffer,m=w.g.Uint8Array||function(){},T=w(964);C=T&&T.debuglog?T.debuglog("stream"):function(){};var U,x,_,I=w(8393),R=w(6163),j=w(7269).getHighWaterMark,z=w(3690).q,W=z.ERR_INVALID_ARG_TYPE,X=z.ERR_STREAM_PUSH_AFTER_EOF,le=z.ERR_METHOD_NOT_IMPLEMENTED,N=z.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;w(1765)(he,v);var $=R.errorOrDestroy,fe=["error","close","destroy","pause","resume"];function oe(Ce,te,Fe){F=F||w(6138),Ce=Ce||{},typeof Fe!="boolean"&&(Fe=te instanceof F),this.objectMode=!!Ce.objectMode,Fe&&(this.objectMode=this.objectMode||!!Ce.readableObjectMode),this.highWaterMark=j(this,Ce,"readableHighWaterMark",Fe),this.buffer=new I,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ce.emitClose!==!1,this.autoDestroy=!!Ce.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ce.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ce.encoding&&(U||(U=w(7503).s),this.decoder=new U(Ce.encoding),this.encoding=Ce.encoding)}function he(Ce){if(F=F||w(6138),!(this instanceof he))return new he(Ce);var te=this instanceof F;this._readableState=new oe(Ce,this,te),this.readable=!0,Ce&&(typeof Ce.read=="function"&&(this._read=Ce.read),typeof Ce.destroy=="function"&&(this._destroy=Ce.destroy)),v.call(this)}function Ie(Ce,te,Fe,O,M){C("readableAddChunk",te);var q,K=Ce._readableState;if(te===null)K.reading=!1,function(ye,de){if(C("onEofChunk"),!de.ended){if(de.decoder){var He=de.decoder.end();He&&He.length&&(de.buffer.push(He),de.length+=de.objectMode?1:He.length)}de.ended=!0,de.sync?it(ye):(de.needReadable=!1,de.emittedReadable||(de.emittedReadable=!0,ut(ye)))}}(Ce,K);else if(M||(q=function(ye,de){var He,Tt;return Tt=de,D.isBuffer(Tt)||Tt instanceof m||typeof de=="string"||de===void 0||ye.objectMode||(He=new W("chunk",["string","Buffer","Uint8Array"],de)),He}(K,te)),q)$(Ce,q);else if(K.objectMode||te&&te.length>0)if(typeof te=="string"||K.objectMode||Object.getPrototypeOf(te)===D.prototype||(te=function(ye){return D.from(ye)}(te)),O)K.endEmitted?$(Ce,new N):Xe(Ce,K,te,!0);else if(K.ended)$(Ce,new X);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!Fe?(te=K.decoder.write(te),K.objectMode||te.length!==0?Xe(Ce,K,te,!1):$e(Ce,K)):Xe(Ce,K,te,!1)}else O||(K.reading=!1,$e(Ce,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function Xe(Ce,te,Fe,O){te.flowing&&te.length===0&&!te.sync?(te.awaitDrain=0,Ce.emit("data",Fe)):(te.length+=te.objectMode?1:Fe.length,O?te.buffer.unshift(Fe):te.buffer.push(Fe),te.needReadable&&it(Ce)),$e(Ce,te)}Object.defineProperty(he.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Ce){this._readableState&&(this._readableState.destroyed=Ce)}}),he.prototype.destroy=R.destroy,he.prototype._undestroy=R.undestroy,he.prototype._destroy=function(Ce,te){te(Ce)},he.prototype.push=function(Ce,te){var Fe,O=this._readableState;return O.objectMode?Fe=!0:typeof Ce=="string"&&((te=te||O.defaultEncoding)!==O.encoding&&(Ce=D.from(Ce,te),te=""),Fe=!0),Ie(this,Ce,te,!1,Fe)},he.prototype.unshift=function(Ce){return Ie(this,Ce,null,!0,!1)},he.prototype.isPaused=function(){return this._readableState.flowing===!1},he.prototype.setEncoding=function(Ce){U||(U=w(7503).s);var te=new U(Ce);this._readableState.decoder=te,this._readableState.encoding=this._readableState.decoder.encoding;for(var Fe=this._readableState.buffer.head,O="";Fe!==null;)O+=te.write(Fe.data),Fe=Fe.next;return this._readableState.buffer.clear(),O!==""&&this._readableState.buffer.push(O),this._readableState.length=O.length,this};var Ae=1073741824;function Ze(Ce,te){return Ce<=0||te.length===0&&te.ended?0:te.objectMode?1:Ce!=Ce?te.flowing&&te.length?te.buffer.head.data.length:te.length:(Ce>te.highWaterMark&&(te.highWaterMark=function(Fe){return Fe>=Ae?Fe=Ae:(Fe--,Fe|=Fe>>>1,Fe|=Fe>>>2,Fe|=Fe>>>4,Fe|=Fe>>>8,Fe|=Fe>>>16,Fe++),Fe}(Ce)),Ce<=te.length?Ce:te.ended?te.length:(te.needReadable=!0,0))}function it(Ce){var te=Ce._readableState;C("emitReadable",te.needReadable,te.emittedReadable),te.needReadable=!1,te.emittedReadable||(C("emitReadable",te.flowing),te.emittedReadable=!0,process.nextTick(ut,Ce))}function ut(Ce){var te=Ce._readableState;C("emitReadable_",te.destroyed,te.length,te.ended),te.destroyed||!te.length&&!te.ended||(Ce.emit("readable"),te.emittedReadable=!1),te.needReadable=!te.flowing&&!te.ended&&te.length<=te.highWaterMark,ct(Ce)}function $e(Ce,te){te.readingMore||(te.readingMore=!0,process.nextTick(lt,Ce,te))}function lt(Ce,te){for(;!te.reading&&!te.ended&&(te.length<te.highWaterMark||te.flowing&&te.length===0);){var Fe=te.length;if(C("maybeReadMore read 0"),Ce.read(0),Fe===te.length)break}te.readingMore=!1}function At(Ce){var te=Ce._readableState;te.readableListening=Ce.listenerCount("readable")>0,te.resumeScheduled&&!te.paused?te.flowing=!0:Ce.listenerCount("data")>0&&Ce.resume()}function Oe(Ce){C("readable nexttick read 0"),Ce.read(0)}function Qe(Ce,te){C("resume",te.reading),te.reading||Ce.read(0),te.resumeScheduled=!1,Ce.emit("resume"),ct(Ce),te.flowing&&!te.reading&&Ce.read(0)}function ct(Ce){var te=Ce._readableState;for(C("flow",te.flowing);te.flowing&&Ce.read()!==null;);}function Qt(Ce,te){return te.length===0?null:(te.objectMode?Fe=te.buffer.shift():!Ce||Ce>=te.length?(Fe=te.decoder?te.buffer.join(""):te.buffer.length===1?te.buffer.first():te.buffer.concat(te.length),te.buffer.clear()):Fe=te.buffer.consume(Ce,te.decoder),Fe);var Fe}function Kt(Ce){var te=Ce._readableState;C("endReadable",te.endEmitted),te.endEmitted||(te.ended=!0,process.nextTick(St,te,Ce))}function St(Ce,te){if(C("endReadableNT",Ce.endEmitted,Ce.length),!Ce.endEmitted&&Ce.length===0&&(Ce.endEmitted=!0,te.readable=!1,te.emit("end"),Ce.autoDestroy)){var Fe=te._writableState;(!Fe||Fe.autoDestroy&&Fe.finished)&&te.destroy()}}function Lt(Ce,te){for(var Fe=0,O=Ce.length;Fe<O;Fe++)if(Ce[Fe]===te)return Fe;return-1}he.prototype.read=function(Ce){C("read",Ce),Ce=parseInt(Ce,10);var te=this._readableState,Fe=Ce;if(Ce!==0&&(te.emittedReadable=!1),Ce===0&&te.needReadable&&((te.highWaterMark!==0?te.length>=te.highWaterMark:te.length>0)||te.ended))return C("read: emitReadable",te.length,te.ended),te.length===0&&te.ended?Kt(this):it(this),null;if((Ce=Ze(Ce,te))===0&&te.ended)return te.length===0&&Kt(this),null;var O,M=te.needReadable;return C("need readable",M),(te.length===0||te.length-Ce<te.highWaterMark)&&C("length less than watermark",M=!0),te.ended||te.reading?C("reading or ended",M=!1):M&&(C("do read"),te.reading=!0,te.sync=!0,te.length===0&&(te.needReadable=!0),this._read(te.highWaterMark),te.sync=!1,te.reading||(Ce=Ze(Fe,te))),(O=Ce>0?Qt(Ce,te):null)===null?(te.needReadable=te.length<=te.highWaterMark,Ce=0):(te.length-=Ce,te.awaitDrain=0),te.length===0&&(te.ended||(te.needReadable=!0),Fe!==Ce&&te.ended&&Kt(this)),O!==null&&this.emit("data",O),O},he.prototype._read=function(Ce){$(this,new le("_read()"))},he.prototype.pipe=function(Ce,te){var Fe=this,O=this._readableState;switch(O.pipesCount){case 0:O.pipes=Ce;break;case 1:O.pipes=[O.pipes,Ce];break;default:O.pipes.push(Ce)}O.pipesCount+=1,C("pipe count=%d opts=%j",O.pipesCount,te);var M=te&&te.end===!1||Ce===process.stdout||Ce===process.stderr?rt:q;function q(){C("onend"),Ce.end()}O.endEmitted?process.nextTick(M):Fe.once("end",M),Ce.on("unpipe",function et(ft,yt){C("onunpipe"),ft===Fe&&yt&&yt.hasUnpiped===!1&&(yt.hasUnpiped=!0,C("cleanup"),Ce.removeListener("close",Tt),Ce.removeListener("finish",ot),Ce.removeListener("drain",K),Ce.removeListener("error",He),Ce.removeListener("unpipe",et),Fe.removeListener("end",q),Fe.removeListener("end",rt),Fe.removeListener("data",de),ye=!0,!O.awaitDrain||Ce._writableState&&!Ce._writableState.needDrain||K())});var K=function(et){return function(){var ft=et._readableState;C("pipeOnDrain",ft.awaitDrain),ft.awaitDrain&&ft.awaitDrain--,ft.awaitDrain===0&&y(et,"data")&&(ft.flowing=!0,ct(et))}}(Fe);Ce.on("drain",K);var ye=!1;function de(et){C("ondata");var ft=Ce.write(et);C("dest.write",ft),ft===!1&&((O.pipesCount===1&&O.pipes===Ce||O.pipesCount>1&&Lt(O.pipes,Ce)!==-1)&&!ye&&(C("false write response, pause",O.awaitDrain),O.awaitDrain++),Fe.pause())}function He(et){C("onerror",et),rt(),Ce.removeListener("error",He),y(Ce,"error")===0&&$(Ce,et)}function Tt(){Ce.removeListener("finish",ot),rt()}function ot(){C("onfinish"),Ce.removeListener("close",Tt),rt()}function rt(){C("unpipe"),Fe.unpipe(Ce)}return Fe.on("data",de),function(et,ft,yt){if(typeof et.prependListener=="function")return et.prependListener(ft,yt);et._events&&et._events[ft]?Array.isArray(et._events[ft])?et._events[ft].unshift(yt):et._events[ft]=[yt,et._events[ft]]:et.on(ft,yt)}(Ce,"error",He),Ce.once("close",Tt),Ce.once("finish",ot),Ce.emit("pipe",Fe),O.flowing||(C("pipe resume"),Fe.resume()),Ce},he.prototype.unpipe=function(Ce){var te=this._readableState,Fe={hasUnpiped:!1};if(te.pipesCount===0)return this;if(te.pipesCount===1)return Ce&&Ce!==te.pipes||(Ce||(Ce=te.pipes),te.pipes=null,te.pipesCount=0,te.flowing=!1,Ce&&Ce.emit("unpipe",this,Fe)),this;if(!Ce){var O=te.pipes,M=te.pipesCount;te.pipes=null,te.pipesCount=0,te.flowing=!1;for(var q=0;q<M;q++)O[q].emit("unpipe",this,{hasUnpiped:!1});return this}var K=Lt(te.pipes,Ce);return K===-1||(te.pipes.splice(K,1),te.pipesCount-=1,te.pipesCount===1&&(te.pipes=te.pipes[0]),Ce.emit("unpipe",this,Fe)),this},he.prototype.on=function(Ce,te){var Fe=v.prototype.on.call(this,Ce,te),O=this._readableState;return Ce==="data"?(O.readableListening=this.listenerCount("readable")>0,O.flowing!==!1&&this.resume()):Ce==="readable"&&(O.endEmitted||O.readableListening||(O.readableListening=O.needReadable=!0,O.flowing=!1,O.emittedReadable=!1,C("on readable",O.length,O.reading),O.length?it(this):O.reading||process.nextTick(Oe,this))),Fe},he.prototype.addListener=he.prototype.on,he.prototype.removeListener=function(Ce,te){var Fe=v.prototype.removeListener.call(this,Ce,te);return Ce==="readable"&&process.nextTick(At,this),Fe},he.prototype.removeAllListeners=function(Ce){var te=v.prototype.removeAllListeners.apply(this,arguments);return Ce!=="readable"&&Ce!==void 0||process.nextTick(At,this),te},he.prototype.resume=function(){var Ce=this._readableState;return Ce.flowing||(C("resume"),Ce.flowing=!Ce.readableListening,function(te,Fe){Fe.resumeScheduled||(Fe.resumeScheduled=!0,process.nextTick(Qe,te,Fe))}(this,Ce)),Ce.paused=!1,this},he.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},he.prototype.wrap=function(Ce){var te=this,Fe=this._readableState,O=!1;for(var M in Ce.on("end",function(){if(C("wrapped end"),Fe.decoder&&!Fe.ended){var K=Fe.decoder.end();K&&K.length&&te.push(K)}te.push(null)}),Ce.on("data",function(K){C("wrapped data"),Fe.decoder&&(K=Fe.decoder.write(K)),Fe.objectMode&&K==null||(Fe.objectMode||K&&K.length)&&(te.push(K)||(O=!0,Ce.pause()))}),Ce)this[M]===void 0&&typeof Ce[M]=="function"&&(this[M]=function(K){return function(){return Ce[K].apply(Ce,arguments)}}(M));for(var q=0;q<fe.length;q++)Ce.on(fe[q],this.emit.bind(this,fe[q]));return this._read=function(K){C("wrapped _read",K),O&&(O=!1,Ce.resume())},this},typeof Symbol=="function"&&(he.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=w(7299)),x(this)}),Object.defineProperty(he.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(he.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(he.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ce){this._readableState&&(this._readableState.flowing=Ce)}}),he._fromList=Qt,Object.defineProperty(he.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(he.from=function(Ce,te){return _===void 0&&(_=w(6233)),_(he,Ce,te)})},9798:function(b,g,w){b.exports=U;var F=w(3690).q,C=F.ERR_METHOD_NOT_IMPLEMENTED,y=F.ERR_MULTIPLE_CALLBACK,v=F.ERR_TRANSFORM_ALREADY_TRANSFORMING,D=F.ERR_TRANSFORM_WITH_LENGTH_0,m=w(6138);function T(I,R){var j=this._transformState;j.transforming=!1;var z=j.writecb;if(z===null)return this.emit("error",new y);j.writechunk=null,j.writecb=null,R!=null&&this.push(R),z(I);var W=this._readableState;W.reading=!1,(W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}function U(I){if(!(this instanceof U))return new U(I);m.call(this,I),this._transformState={afterTransform:T.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,I&&(typeof I.transform=="function"&&(this._transform=I.transform),typeof I.flush=="function"&&(this._flush=I.flush)),this.on("prefinish",x)}function x(){var I=this;typeof this._flush!="function"||this._readableState.destroyed?_(this,null,null):this._flush(function(R,j){_(I,R,j)})}function _(I,R,j){if(R)return I.emit("error",R);if(j!=null&&I.push(j),I._writableState.length)throw new D;if(I._transformState.transforming)throw new v;return I.push(null)}w(1765)(U,m),U.prototype.push=function(I,R){return this._transformState.needTransform=!1,m.prototype.push.call(this,I,R)},U.prototype._transform=function(I,R,j){j(new C("_transform()"))},U.prototype._write=function(I,R,j){var z=this._transformState;if(z.writecb=j,z.writechunk=I,z.writeencoding=R,!z.transforming){var W=this._readableState;(z.needTransform||W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}},U.prototype._read=function(I){var R=this._transformState;R.writechunk===null||R.transforming?R.needTransform=!0:(R.transforming=!0,this._transform(R.writechunk,R.writeencoding,R.afterTransform))},U.prototype._destroy=function(I,R){m.prototype._destroy.call(this,I,function(j){R(j)})}},8318:function(b,g,w){function F($e){var lt=this;this.next=null,this.entry=null,this.finish=function(){(function(At,Oe,Qe){var ct=At.entry;for(At.entry=null;ct;){var Qt=ct.callback;Oe.pendingcb--,Qt(void 0),ct=ct.next}Oe.corkedRequestsFree.next=At})(lt,$e)}}var C;b.exports=he,he.WritableState=oe;var y,v={deprecate:w(7839)},D=w(9299),m=w(1549).Buffer,T=w.g.Uint8Array||function(){},U=w(6163),x=w(7269).getHighWaterMark,_=w(3690).q,I=_.ERR_INVALID_ARG_TYPE,R=_.ERR_METHOD_NOT_IMPLEMENTED,j=_.ERR_MULTIPLE_CALLBACK,z=_.ERR_STREAM_CANNOT_PIPE,W=_.ERR_STREAM_DESTROYED,X=_.ERR_STREAM_NULL_VALUES,le=_.ERR_STREAM_WRITE_AFTER_END,N=_.ERR_UNKNOWN_ENCODING,$=U.errorOrDestroy;function fe(){}function oe($e,lt,At){C=C||w(6138),$e=$e||{},typeof At!="boolean"&&(At=lt instanceof C),this.objectMode=!!$e.objectMode,At&&(this.objectMode=this.objectMode||!!$e.writableObjectMode),this.highWaterMark=x(this,$e,"writableHighWaterMark",At),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Oe=$e.decodeStrings===!1;this.decodeStrings=!Oe,this.defaultEncoding=$e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Qe){(function(ct,Qt){var Kt=ct._writableState,St=Kt.sync,Lt=Kt.writecb;if(typeof Lt!="function")throw new j;if(function(te){te.writing=!1,te.writecb=null,te.length-=te.writelen,te.writelen=0}(Kt),Qt)(function(te,Fe,O,M,q){--Fe.pendingcb,O?(process.nextTick(q,M),process.nextTick(ut,te,Fe),te._writableState.errorEmitted=!0,$(te,M)):(q(M),te._writableState.errorEmitted=!0,$(te,M),ut(te,Fe))})(ct,Kt,St,Qt,Lt);else{var Ce=Ze(Kt)||ct.destroyed;Ce||Kt.corked||Kt.bufferProcessing||!Kt.bufferedRequest||Ae(ct,Kt),St?process.nextTick(Xe,ct,Kt,Ce,Lt):Xe(ct,Kt,Ce,Lt)}})(lt,Qe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=$e.emitClose!==!1,this.autoDestroy=!!$e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new F(this)}function he($e){var lt=this instanceof(C=C||w(6138));if(!lt&&!y.call(he,this))return new he($e);this._writableState=new oe($e,this,lt),this.writable=!0,$e&&(typeof $e.write=="function"&&(this._write=$e.write),typeof $e.writev=="function"&&(this._writev=$e.writev),typeof $e.destroy=="function"&&(this._destroy=$e.destroy),typeof $e.final=="function"&&(this._final=$e.final)),D.call(this)}function Ie($e,lt,At,Oe,Qe,ct,Qt){lt.writelen=Oe,lt.writecb=Qt,lt.writing=!0,lt.sync=!0,lt.destroyed?lt.onwrite(new W("write")):At?$e._writev(Qe,lt.onwrite):$e._write(Qe,ct,lt.onwrite),lt.sync=!1}function Xe($e,lt,At,Oe){At||function(Qe,ct){ct.length===0&&ct.needDrain&&(ct.needDrain=!1,Qe.emit("drain"))}($e,lt),lt.pendingcb--,Oe(),ut($e,lt)}function Ae($e,lt){lt.bufferProcessing=!0;var At=lt.bufferedRequest;if($e._writev&&At&&At.next){var Oe=lt.bufferedRequestCount,Qe=new Array(Oe),ct=lt.corkedRequestsFree;ct.entry=At;for(var Qt=0,Kt=!0;At;)Qe[Qt]=At,At.isBuf||(Kt=!1),At=At.next,Qt+=1;Qe.allBuffers=Kt,Ie($e,lt,!0,lt.length,Qe,"",ct.finish),lt.pendingcb++,lt.lastBufferedRequest=null,ct.next?(lt.corkedRequestsFree=ct.next,ct.next=null):lt.corkedRequestsFree=new F(lt),lt.bufferedRequestCount=0}else{for(;At;){var St=At.chunk,Lt=At.encoding,Ce=At.callback;if(Ie($e,lt,!1,lt.objectMode?1:St.length,St,Lt,Ce),At=At.next,lt.bufferedRequestCount--,lt.writing)break}At===null&&(lt.lastBufferedRequest=null)}lt.bufferedRequest=At,lt.bufferProcessing=!1}function Ze($e){return $e.ending&&$e.length===0&&$e.bufferedRequest===null&&!$e.finished&&!$e.writing}function it($e,lt){$e._final(function(At){lt.pendingcb--,At&&$($e,At),lt.prefinished=!0,$e.emit("prefinish"),ut($e,lt)})}function ut($e,lt){var At=Ze(lt);if(At&&(function(Qe,ct){ct.prefinished||ct.finalCalled||(typeof Qe._final!="function"||ct.destroyed?(ct.prefinished=!0,Qe.emit("prefinish")):(ct.pendingcb++,ct.finalCalled=!0,process.nextTick(it,Qe,ct)))}($e,lt),lt.pendingcb===0&&(lt.finished=!0,$e.emit("finish"),lt.autoDestroy))){var Oe=$e._readableState;(!Oe||Oe.autoDestroy&&Oe.endEmitted)&&$e.destroy()}return At}w(1765)(he,D),oe.prototype.getBuffer=function(){for(var $e=this.bufferedRequest,lt=[];$e;)lt.push($e),$e=$e.next;return lt},function(){try{Object.defineProperty(oe.prototype,"buffer",{get:v.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch($e){}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(he,Symbol.hasInstance,{value:function($e){return!!y.call(this,$e)||this===he&&$e&&$e._writableState instanceof oe}})):y=function($e){return $e instanceof this},he.prototype.pipe=function(){$(this,new z)},he.prototype.write=function($e,lt,At){var Oe,Qe=this._writableState,ct=!1,Qt=!Qe.objectMode&&(Oe=$e,m.isBuffer(Oe)||Oe instanceof T);return Qt&&!m.isBuffer($e)&&($e=function(Kt){return m.from(Kt)}($e)),typeof lt=="function"&&(At=lt,lt=null),Qt?lt="buffer":lt||(lt=Qe.defaultEncoding),typeof At!="function"&&(At=fe),Qe.ending?function(Kt,St){var Lt=new le;$(Kt,Lt),process.nextTick(St,Lt)}(this,At):(Qt||function(Kt,St,Lt,Ce){var te;return Lt===null?te=new X:typeof Lt=="string"||St.objectMode||(te=new I("chunk",["string","Buffer"],Lt)),!te||($(Kt,te),process.nextTick(Ce,te),!1)}(this,Qe,$e,At))&&(Qe.pendingcb++,ct=function(Kt,St,Lt,Ce,te,Fe){if(!Lt){var O=function(ye,de,He){return ye.objectMode||ye.decodeStrings===!1||typeof de!="string"||(de=m.from(de,He)),de}(St,Ce,te);Ce!==O&&(Lt=!0,te="buffer",Ce=O)}var M=St.objectMode?1:Ce.length;St.length+=M;var q=St.length<St.highWaterMark;if(q||(St.needDrain=!0),St.writing||St.corked){var K=St.lastBufferedRequest;St.lastBufferedRequest={chunk:Ce,encoding:te,isBuf:Lt,callback:Fe,next:null},K?K.next=St.lastBufferedRequest:St.bufferedRequest=St.lastBufferedRequest,St.bufferedRequestCount+=1}else Ie(Kt,St,!1,M,Ce,te,Fe);return q}(this,Qe,Qt,$e,lt,At)),ct},he.prototype.cork=function(){this._writableState.corked++},he.prototype.uncork=function(){var $e=this._writableState;$e.corked&&($e.corked--,$e.writing||$e.corked||$e.bufferProcessing||!$e.bufferedRequest||Ae(this,$e))},he.prototype.setDefaultEncoding=function($e){if(typeof $e=="string"&&($e=$e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf(($e+"").toLowerCase())>-1))throw new N($e);return this._writableState.defaultEncoding=$e,this},Object.defineProperty(he.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(he.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),he.prototype._write=function($e,lt,At){At(new R("_write()"))},he.prototype._writev=null,he.prototype.end=function($e,lt,At){var Oe=this._writableState;return typeof $e=="function"?(At=$e,$e=null,lt=null):typeof lt=="function"&&(At=lt,lt=null),$e!=null&&this.write($e,lt),Oe.corked&&(Oe.corked=1,this.uncork()),Oe.ending||function(Qe,ct,Qt){ct.ending=!0,ut(Qe,ct),Qt&&(ct.finished?process.nextTick(Qt):Qe.once("finish",Qt)),ct.ended=!0,Qe.writable=!1}(this,Oe,At),this},Object.defineProperty(he.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(he.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function($e){this._writableState&&(this._writableState.destroyed=$e)}}),he.prototype.destroy=U.destroy,he.prototype._undestroy=U.undestroy,he.prototype._destroy=function($e,lt){lt($e)}},7299:function(b,g,w){var F;function C(X,le,N){return le in X?Object.defineProperty(X,le,{value:N,enumerable:!0,configurable:!0,writable:!0}):X[le]=N,X}var y=w(8800),v=Symbol("lastResolve"),D=Symbol("lastReject"),m=Symbol("error"),T=Symbol("ended"),U=Symbol("lastPromise"),x=Symbol("handlePromise"),_=Symbol("stream");function I(X,le){return{value:X,done:le}}function R(X){var le=X[v];if(le!==null){var N=X[_].read();N!==null&&(X[U]=null,X[v]=null,X[D]=null,le(I(N,!1)))}}function j(X){process.nextTick(R,X)}var z=Object.getPrototypeOf(function(){}),W=Object.setPrototypeOf((C(F={get stream(){return this[_]},next:function(){var X=this,le=this[m];if(le!==null)return Promise.reject(le);if(this[T])return Promise.resolve(I(void 0,!0));if(this[_].destroyed)return new Promise(function(oe,he){process.nextTick(function(){X[m]?he(X[m]):oe(I(void 0,!0))})});var N,$=this[U];if($)N=new Promise(function(oe,he){return function(Ie,Xe){oe.then(function(){he[T]?Ie(I(void 0,!0)):he[x](Ie,Xe)},Xe)}}($,this));else{var fe=this[_].read();if(fe!==null)return Promise.resolve(I(fe,!1));N=new Promise(this[x])}return this[U]=N,N}},Symbol.asyncIterator,function(){return this}),C(F,"return",function(){var X=this;return new Promise(function(le,N){X[_].destroy(null,function($){$?N($):le(I(void 0,!0))})})}),F),z);b.exports=function(X){var le,N=Object.create(W,(C(le={},_,{value:X,writable:!0}),C(le,v,{value:null,writable:!0}),C(le,D,{value:null,writable:!0}),C(le,m,{value:null,writable:!0}),C(le,T,{value:X._readableState.endEmitted,writable:!0}),C(le,x,{value:function($,fe){var oe=N[_].read();oe?(N[U]=null,N[v]=null,N[D]=null,$(I(oe,!1))):(N[v]=$,N[D]=fe)},writable:!0}),le));return N[U]=null,y(X,function($){if($&&$.code!=="ERR_STREAM_PREMATURE_CLOSE"){var fe=N[D];return fe!==null&&(N[U]=null,N[v]=null,N[D]=null,fe($)),void(N[m]=$)}var oe=N[v];oe!==null&&(N[U]=null,N[v]=null,N[D]=null,oe(I(void 0,!0))),N[T]=!0}),X.on("readable",j.bind(null,N)),N}},8393:function(b,g,w){function F(T,U){var x=Object.keys(T);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(T);U&&(_=_.filter(function(I){return Object.getOwnPropertyDescriptor(T,I).enumerable})),x.push.apply(x,_)}return x}function C(T,U,x){return U in T?Object.defineProperty(T,U,{value:x,enumerable:!0,configurable:!0,writable:!0}):T[U]=x,T}function y(T,U){for(var x=0;x<U.length;x++){var _=U[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var v=w(1549).Buffer,D=w(9862).inspect,m=D&&D.custom||"inspect";b.exports=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T),this.head=null,this.tail=null,this.length=0}var U,x;return U=T,x=[{key:"push",value:function(_){var I={data:_,next:null};this.length>0?this.tail.next=I:this.head=I,this.tail=I,++this.length}},{key:"unshift",value:function(_){var I={data:_,next:this.head};this.length===0&&(this.tail=I),this.head=I,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var I=this.head,R=""+I.data;I=I.next;)R+=_+I.data;return R}},{key:"concat",value:function(_){if(this.length===0)return v.alloc(0);for(var I,R,j,z=v.allocUnsafe(_>>>0),W=this.head,X=0;W;)I=W.data,R=z,j=X,v.prototype.copy.call(I,R,j),X+=W.data.length,W=W.next;return z}},{key:"consume",value:function(_,I){var R;return _<this.head.data.length?(R=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):R=_===this.head.data.length?this.shift():I?this._getString(_):this._getBuffer(_),R}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var I=this.head,R=1,j=I.data;for(_-=j.length;I=I.next;){var z=I.data,W=_>z.length?z.length:_;if(W===z.length?j+=z:j+=z.slice(0,_),(_-=W)==0){W===z.length?(++R,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=z.slice(W));break}++R}return this.length-=R,j}},{key:"_getBuffer",value:function(_){var I=v.allocUnsafe(_),R=this.head,j=1;for(R.data.copy(I),_-=R.data.length;R=R.next;){var z=R.data,W=_>z.length?z.length:_;if(z.copy(I,I.length-_,0,W),(_-=W)==0){W===z.length?(++j,R.next?this.head=R.next:this.head=this.tail=null):(this.head=R,R.data=z.slice(W));break}++j}return this.length-=j,I}},{key:m,value:function(_,I){return D(this,function(R){for(var j=1;j<arguments.length;j++){var z=arguments[j]!=null?arguments[j]:{};j%2?F(Object(z),!0).forEach(function(W){C(R,W,z[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(z)):F(Object(z)).forEach(function(W){Object.defineProperty(R,W,Object.getOwnPropertyDescriptor(z,W))})}return R}({},I,{depth:0,customInspect:!1}))}}],x&&y(U.prototype,x),T}()},6163:function(b){function g(C,y){F(C,y),w(C)}function w(C){C._writableState&&!C._writableState.emitClose||C._readableState&&!C._readableState.emitClose||C.emit("close")}function F(C,y){C.emit("error",y)}b.exports={destroy:function(C,y){var v=this,D=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return D||m?(y?y(C):C&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(F,this,C)):process.nextTick(F,this,C)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(C||null,function(T){!y&&T?v._writableState?v._writableState.errorEmitted?process.nextTick(w,v):(v._writableState.errorEmitted=!0,process.nextTick(g,v,T)):process.nextTick(g,v,T):y?(process.nextTick(w,v),y(T)):process.nextTick(w,v)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(C,y){var v=C._readableState,D=C._writableState;v&&v.autoDestroy||D&&D.autoDestroy?C.destroy(y):C.emit("error",y)}}},8800:function(b,g,w){var F=w(3690).q.ERR_STREAM_PREMATURE_CLOSE;function C(){}b.exports=function y(v,D,m){if(typeof D=="function")return y(v,null,D);D||(D={}),m=function(le){var N=!1;return function(){if(!N){N=!0;for(var $=arguments.length,fe=new Array($),oe=0;oe<$;oe++)fe[oe]=arguments[oe];le.apply(this,fe)}}}(m||C);var T=D.readable||D.readable!==!1&&v.readable,U=D.writable||D.writable!==!1&&v.writable,x=function(){v.writable||I()},_=v._writableState&&v._writableState.finished,I=function(){U=!1,_=!0,T||m.call(v)},R=v._readableState&&v._readableState.endEmitted,j=function(){T=!1,R=!0,U||m.call(v)},z=function(le){m.call(v,le)},W=function(){var le;return T&&!R?(v._readableState&&v._readableState.ended||(le=new F),m.call(v,le)):U&&!_?(v._writableState&&v._writableState.ended||(le=new F),m.call(v,le)):void 0},X=function(){v.req.on("finish",I)};return function(le){return le.setHeader&&typeof le.abort=="function"}(v)?(v.on("complete",I),v.on("abort",W),v.req?X():v.on("request",X)):U&&!v._writableState&&(v.on("end",x),v.on("close",x)),v.on("end",j),v.on("finish",I),D.error!==!1&&v.on("error",z),v.on("close",W),function(){v.removeListener("complete",I),v.removeListener("abort",W),v.removeListener("request",X),v.req&&v.req.removeListener("finish",I),v.removeListener("end",x),v.removeListener("close",x),v.removeListener("finish",I),v.removeListener("end",j),v.removeListener("error",z),v.removeListener("close",W)}}},6233:function(b){b.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(b,g,w){var F,C=w(3690).q,y=C.ERR_MISSING_ARGS,v=C.ERR_STREAM_DESTROYED;function D(_){if(_)throw _}function m(_,I,R,j){j=function(X){var le=!1;return function(){le||(le=!0,X.apply(void 0,arguments))}}(j);var z=!1;_.on("close",function(){z=!0}),F===void 0&&(F=w(8800)),F(_,{readable:I,writable:R},function(X){if(X)return j(X);z=!0,j()});var W=!1;return function(X){if(!z&&!W)return W=!0,function(le){return le.setHeader&&typeof le.abort=="function"}(_)?_.abort():typeof _.destroy=="function"?_.destroy():void j(X||new v("pipe"))}}function T(_){_()}function U(_,I){return _.pipe(I)}function x(_){return _.length?typeof _[_.length-1]!="function"?D:_.pop():D}b.exports=function(){for(var _=arguments.length,I=new Array(_),R=0;R<_;R++)I[R]=arguments[R];var j,z=x(I);if(Array.isArray(I[0])&&(I=I[0]),I.length<2)throw new y("streams");var W=I.map(function(X,le){var N=le<I.length-1;return m(X,N,le>0,function($){j||(j=$),$&&W.forEach(T),N||(W.forEach(T),z(j))})});return I.reduce(U)}},7269:function(b,g,w){var F=w(3690).q.ERR_INVALID_OPT_VALUE;b.exports={getHighWaterMark:function(C,y,v,D){var m=function(T,U,x){return T.highWaterMark!=null?T.highWaterMark:U?T[x]:null}(y,D,v);if(m!=null){if(!isFinite(m)||Math.floor(m)!==m||m<0)throw new F(D?v:"highWaterMark",m);return Math.floor(m)}return C.objectMode?16:16384}}},9299:function(b,g,w){b.exports=w(1159).EventEmitter},7503:function(b,g,w){var F=w(8387).Buffer,C=F.isEncoding||function(R){switch((R=""+R)&&R.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function y(R){var j;switch(this.encoding=function(z){var W=function(X){if(!X)return"utf8";for(var le;;)switch(X){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return X;default:if(le)return;X=(""+X).toLowerCase(),le=!0}}(z);if(typeof W!="string"&&(F.isEncoding===C||!C(z)))throw new Error("Unknown encoding: "+z);return W||z}(R),this.encoding){case"utf16le":this.text=m,this.end=T,j=4;break;case"utf8":this.fillLast=D,j=4;break;case"base64":this.text=U,this.end=x,j=3;break;default:return this.write=_,void(this.end=I)}this.lastNeed=0,this.lastTotal=0,this.lastChar=F.allocUnsafe(j)}function v(R){return R<=127?0:R>>5==6?2:R>>4==14?3:R>>3==30?4:R>>6==2?-1:-2}function D(R){var j=this.lastTotal-this.lastNeed,z=function(W,X,le){if((192&X[0])!=128)return W.lastNeed=0,"";if(W.lastNeed>1&&X.length>1){if((192&X[1])!=128)return W.lastNeed=1,"";if(W.lastNeed>2&&X.length>2&&(192&X[2])!=128)return W.lastNeed=2,""}}(this,R);return z!==void 0?z:this.lastNeed<=R.length?(R.copy(this.lastChar,j,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(R.copy(this.lastChar,j,0,R.length),void(this.lastNeed-=R.length))}function m(R,j){if((R.length-j)%2==0){var z=R.toString("utf16le",j);if(z){var W=z.charCodeAt(z.length-1);if(W>=55296&&W<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=R[R.length-2],this.lastChar[1]=R[R.length-1],z.slice(0,-1)}return z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=R[R.length-1],R.toString("utf16le",j,R.length-1)}function T(R){var j=R&&R.length?this.write(R):"";if(this.lastNeed){var z=this.lastTotal-this.lastNeed;return j+this.lastChar.toString("utf16le",0,z)}return j}function U(R,j){var z=(R.length-j)%3;return z===0?R.toString("base64",j):(this.lastNeed=3-z,this.lastTotal=3,z===1?this.lastChar[0]=R[R.length-1]:(this.lastChar[0]=R[R.length-2],this.lastChar[1]=R[R.length-1]),R.toString("base64",j,R.length-z))}function x(R){var j=R&&R.length?this.write(R):"";return this.lastNeed?j+this.lastChar.toString("base64",0,3-this.lastNeed):j}function _(R){return R.toString(this.encoding)}function I(R){return R&&R.length?this.write(R):""}g.s=y,y.prototype.write=function(R){if(R.length===0)return"";var j,z;if(this.lastNeed){if((j=this.fillLast(R))===void 0)return"";z=this.lastNeed,this.lastNeed=0}else z=0;return z<R.length?j?j+this.text(R,z):this.text(R,z):j||""},y.prototype.end=function(R){var j=R&&R.length?this.write(R):"";return this.lastNeed?j+"":j},y.prototype.text=function(R,j){var z=function(X,le,N){var $=le.length-1;if($<N)return 0;var fe=v(le[$]);return fe>=0?(fe>0&&(X.lastNeed=fe-1),fe):--$<N||fe===-2?0:(fe=v(le[$]))>=0?(fe>0&&(X.lastNeed=fe-2),fe):--$<N||fe===-2?0:(fe=v(le[$]))>=0?(fe>0&&(fe===2?fe=0:X.lastNeed=fe-3),fe):0}(this,R,j);if(!this.lastNeed)return R.toString("utf8",j);this.lastTotal=z;var W=R.length-(z-this.lastNeed);return R.copy(this.lastChar,0,W),R.toString("utf8",j,W)},y.prototype.fillLast=function(R){if(this.lastNeed<=R.length)return R.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);R.copy(this.lastChar,this.lastTotal-this.lastNeed,0,R.length),this.lastNeed-=R.length}},1067:function(b,g,w){var F;(function(C,y){var v="function",D="undefined",m="object",T="string",U="major",x="model",_="name",I="type",R="vendor",j="version",z="architecture",W="console",X="mobile",le="tablet",N="smarttv",$="wearable",fe="embedded",oe="Amazon",he="Apple",Ie="ASUS",Xe="BlackBerry",Ae="Browser",Ze="Chrome",it="Firefox",ut="Google",$e="Huawei",lt="LG",At="Microsoft",Oe="Motorola",Qe="Opera",ct="Samsung",Qt="Sharp",Kt="Sony",St="Xiaomi",Lt="Zebra",Ce="Facebook",te="Chromium OS",Fe="Mac OS",O=function(ft){for(var yt={},_t=0;_t<ft.length;_t++)yt[ft[_t].toUpperCase()]=ft[_t];return yt},M=function(ft,yt){return typeof ft===T&&q(yt).indexOf(q(ft))!==-1},q=function(ft){return ft.toLowerCase()},K=function(ft,yt){if(typeof ft===T)return ft=ft.replace(/^\s\s*/,""),typeof yt===D?ft:ft.substring(0,500)},ye=function(ft,yt){for(var _t,Ct,hn,Xt,nn,Pt,Un=0;Un<yt.length&&!nn;){var gr=yt[Un],Pr=yt[Un+1];for(_t=Ct=0;_t<gr.length&&!nn&&gr[_t];)if(nn=gr[_t++].exec(ft))for(hn=0;hn<Pr.length;hn++)Pt=nn[++Ct],typeof(Xt=Pr[hn])===m&&Xt.length>0?Xt.length===2?typeof Xt[1]==v?this[Xt[0]]=Xt[1].call(this,Pt):this[Xt[0]]=Xt[1]:Xt.length===3?typeof Xt[1]!==v||Xt[1].exec&&Xt[1].test?this[Xt[0]]=Pt?Pt.replace(Xt[1],Xt[2]):y:this[Xt[0]]=Pt?Xt[1].call(this,Pt,Xt[2]):y:Xt.length===4&&(this[Xt[0]]=Pt?Xt[3].call(this,Pt.replace(Xt[1],Xt[2])):y):this[Xt]=Pt||y;Un+=2}},de=function(ft,yt){for(var _t in yt)if(typeof yt[_t]===m&&yt[_t].length>0){for(var Ct=0;Ct<yt[_t].length;Ct++)if(M(yt[_t][Ct],ft))return _t==="?"?y:_t}else if(M(yt[_t],ft))return _t==="?"?y:_t;return ft},He={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Tt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[j,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[j,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,j],[/opios[\/ ]+([\w\.]+)/i],[j,[_,Qe+" Mini"]],[/\bopr\/([\w\.]+)/i],[j,[_,Qe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[j,[_,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[_,j],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[j,[_,"UC"+Ae]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[j,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[j,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[j,[_,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[j,[_,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[j,[_,"Smart Lenovo "+Ae]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+Ae],j],[/\bfocus\/([\w\.]+)/i],[j,[_,it+" Focus"]],[/\bopt\/([\w\.]+)/i],[j,[_,Qe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[j,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[j,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[j,[_,Qe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[j,[_,"MIUI "+Ae]],[/fxios\/([-\w\.]+)/i],[j,[_,it]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+Ae]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+Ae],j],[/samsungbrowser\/([\w\.]+)/i],[j,[_,ct+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],j],[/metasr[\/ ]?([\d\.]+)/i],[j,[_,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[_,"Sogou Mobile"],j],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[_,j],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,Ce],j],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[_,j],[/\bgsa\/([\w\.]+) .*safari\//i],[j,[_,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[j,[_,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[j,[_,Ze+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,Ze+" WebView"],j],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[j,[_,"Android "+Ae]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,j],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[j,[_,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[j,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[j,de,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[_,j],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],j],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[j,[_,it+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[_,j],[/(cobalt)\/([\w\.]+)/i],[_,[j,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[z,"amd64"]],[/(ia32(?=;))/i],[[z,q]],[/((?:i[346]|x)86)[;\)]/i],[[z,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[z,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[z,"armhf"]],[/windows (ce|mobile); ppc;/i],[[z,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[z,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[z,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[z,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[x,[R,ct],[I,le]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[x,[R,ct],[I,X]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[x,[R,he],[I,X]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[x,[R,he],[I,le]],[/(macintosh);/i],[x,[R,he]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[x,[R,Qt],[I,X]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[x,[R,$e],[I,le]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[x,[R,$e],[I,X]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[x,/_/g," "],[R,St],[I,X]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[x,/_/g," "],[R,St],[I,le]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[x,[R,"OPPO"],[I,X]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[x,[R,"Vivo"],[I,X]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[x,[R,"Realme"],[I,X]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[x,[R,Oe],[I,X]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[x,[R,Oe],[I,le]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[x,[R,lt],[I,le]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[x,[R,lt],[I,X]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[x,[R,"Lenovo"],[I,le]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[x,/_/g," "],[R,"Nokia"],[I,X]],[/(pixel c)\b/i],[x,[R,ut],[I,le]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[x,[R,ut],[I,X]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[x,[R,Kt],[I,X]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[x,"Xperia Tablet"],[R,Kt],[I,le]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[x,[R,"OnePlus"],[I,X]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[x,[R,oe],[I,le]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[x,/(.+)/g,"Fire Phone $1"],[R,oe],[I,X]],[/(playbook);[-\w\),; ]+(rim)/i],[x,R,[I,le]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[x,[R,Xe],[I,X]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[x,[R,Ie],[I,le]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[x,[R,Ie],[I,X]],[/(nexus 9)/i],[x,[R,"HTC"],[I,le]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[R,[x,/_/g," "],[I,X]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[x,[R,"Acer"],[I,le]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[x,[R,"Meizu"],[I,X]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[x,[R,"Ulefone"],[I,X]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[R,x,[I,X]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[R,x,[I,le]],[/(surface duo)/i],[x,[R,At],[I,le]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[x,[R,"Fairphone"],[I,X]],[/(u304aa)/i],[x,[R,"AT&T"],[I,X]],[/\bsie-(\w*)/i],[x,[R,"Siemens"],[I,X]],[/\b(rct\w+) b/i],[x,[R,"RCA"],[I,le]],[/\b(venue[\d ]{2,7}) b/i],[x,[R,"Dell"],[I,le]],[/\b(q(?:mv|ta)\w+) b/i],[x,[R,"Verizon"],[I,le]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[x,[R,"Barnes & Noble"],[I,le]],[/\b(tm\d{3}\w+) b/i],[x,[R,"NuVision"],[I,le]],[/\b(k88) b/i],[x,[R,"ZTE"],[I,le]],[/\b(nx\d{3}j) b/i],[x,[R,"ZTE"],[I,X]],[/\b(gen\d{3}) b.+49h/i],[x,[R,"Swiss"],[I,X]],[/\b(zur\d{3}) b/i],[x,[R,"Swiss"],[I,le]],[/\b((zeki)?tb.*\b) b/i],[x,[R,"Zeki"],[I,le]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[R,"Dragon Touch"],x,[I,le]],[/\b(ns-?\w{0,9}) b/i],[x,[R,"Insignia"],[I,le]],[/\b((nxa|next)-?\w{0,9}) b/i],[x,[R,"NextBook"],[I,le]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[R,"Voice"],x,[I,X]],[/\b(lvtel\-)?(v1[12]) b/i],[[R,"LvTel"],x,[I,X]],[/\b(ph-1) /i],[x,[R,"Essential"],[I,X]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[x,[R,"Envizen"],[I,le]],[/\b(trio[-\w\. ]+) b/i],[x,[R,"MachSpeed"],[I,le]],[/\btu_(1491) b/i],[x,[R,"Rotor"],[I,le]],[/(shield[\w ]+) b/i],[x,[R,"Nvidia"],[I,le]],[/(sprint) (\w+)/i],[R,x,[I,X]],[/(kin\.[onetw]{3})/i],[[x,/\./g," "],[R,At],[I,X]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[x,[R,Lt],[I,le]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[x,[R,Lt],[I,X]],[/smart-tv.+(samsung)/i],[R,[I,N]],[/hbbtv.+maple;(\d+)/i],[[x,/^/,"SmartTV"],[R,ct],[I,N]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[R,lt],[I,N]],[/(apple) ?tv/i],[R,[x,he+" TV"],[I,N]],[/crkey/i],[[x,Ze+"cast"],[R,ut],[I,N]],[/droid.+aft(\w+)( bui|\))/i],[x,[R,oe],[I,N]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[x,[R,Qt],[I,N]],[/(bravia[\w ]+)( bui|\))/i],[x,[R,Kt],[I,N]],[/(mitv-\w{5}) bui/i],[x,[R,St],[I,N]],[/Hbbtv.*(technisat) (.*);/i],[R,x,[I,N]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[R,K],[x,K],[I,N]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[I,N]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[R,x,[I,W]],[/droid.+; (shield) bui/i],[x,[R,"Nvidia"],[I,W]],[/(playstation [345portablevi]+)/i],[x,[R,Kt],[I,W]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[x,[R,At],[I,W]],[/((pebble))app/i],[R,x,[I,$]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[x,[R,he],[I,$]],[/droid.+; (glass) \d/i],[x,[R,ut],[I,$]],[/droid.+; (wt63?0{2,3})\)/i],[x,[R,Lt],[I,$]],[/(quest( 2| pro)?)/i],[x,[R,Ce],[I,$]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[R,[I,fe]],[/(aeobc)\b/i],[x,[R,oe],[I,fe]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[x,[I,X]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[x,[I,le]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[I,le]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[I,X]],[/(android[-\w\. ]{0,9});.+buil/i],[x,[R,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[j,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[j,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[_,j],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[j,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,j],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[_,[j,de,He]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[j,de,He],[_,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[j,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,Fe],[j,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[j,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,j],[/\(bb(10);/i],[j,[_,Xe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[j,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[j,[_,it+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[j,[_,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[j,[_,"watchOS"]],[/crkey\/([\d\.]+)/i],[j,[_,Ze+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[_,te],j],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,j],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],j],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[_,j]]},ot=function(ft,yt){if(typeof ft===m&&(yt=ft,ft=y),!(this instanceof ot))return new ot(ft,yt).getResult();var _t=typeof C!==D&&C.navigator?C.navigator:y,Ct=ft||(_t&&_t.userAgent?_t.userAgent:""),hn=_t&&_t.userAgentData?_t.userAgentData:y,Xt=yt?function(Pt,Un){var gr={};for(var Pr in Pt)Un[Pr]&&Un[Pr].length%2==0?gr[Pr]=Un[Pr].concat(Pt[Pr]):gr[Pr]=Pt[Pr];return gr}(Tt,yt):Tt,nn=_t&&_t.userAgent==Ct;return this.getBrowser=function(){var Pt,Un={};return Un[_]=y,Un[j]=y,ye.call(Un,Ct,Xt.browser),Un[U]=typeof(Pt=Un[j])===T?Pt.replace(/[^\d\.]/g,"").split(".")[0]:y,nn&&_t&&_t.brave&&typeof _t.brave.isBrave==v&&(Un[_]="Brave"),Un},this.getCPU=function(){var Pt={};return Pt[z]=y,ye.call(Pt,Ct,Xt.cpu),Pt},this.getDevice=function(){var Pt={};return Pt[R]=y,Pt[x]=y,Pt[I]=y,ye.call(Pt,Ct,Xt.device),nn&&!Pt[I]&&hn&&hn.mobile&&(Pt[I]=X),nn&&Pt[x]=="Macintosh"&&_t&&typeof _t.standalone!==D&&_t.maxTouchPoints&&_t.maxTouchPoints>2&&(Pt[x]="iPad",Pt[I]=le),Pt},this.getEngine=function(){var Pt={};return Pt[_]=y,Pt[j]=y,ye.call(Pt,Ct,Xt.engine),Pt},this.getOS=function(){var Pt={};return Pt[_]=y,Pt[j]=y,ye.call(Pt,Ct,Xt.os),nn&&!Pt[_]&&hn&&hn.platform!="Unknown"&&(Pt[_]=hn.platform.replace(/chrome os/i,te).replace(/macos/i,Fe)),Pt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(Pt){return Ct=typeof Pt===T&&Pt.length>500?K(Pt,500):Pt,this},this.setUA(Ct),this};ot.VERSION="1.0.37",ot.BROWSER=O([_,j,U]),ot.CPU=O([z]),ot.DEVICE=O([x,R,I,W,X,N,le,$,fe]),ot.ENGINE=ot.OS=O([_,j]),typeof g!==D?(b.exports&&(g=b.exports=ot),g.UAParser=ot):w.amdO?(F=(function(){return ot}).call(g,w,g,b))===y||(b.exports=F):typeof C!==D&&(C.UAParser=ot);var rt=typeof C!==D&&(C.jQuery||C.Zepto);if(rt&&!rt.ua){var et=new ot;rt.ua=et.getResult(),rt.ua.get=function(){return et.getUA()},rt.ua.set=function(ft){et.setUA(ft);var yt=et.getResult();for(var _t in yt)rt.ua[_t]=yt[_t]}}})(typeof window=="object"?window:this)},7839:function(b,g,w){function F(C){try{if(!w.g.localStorage)return!1}catch(v){return!1}var y=w.g.localStorage[C];return y!=null&&String(y).toLowerCase()==="true"}b.exports=function(C,y){if(F("noDeprecation"))return C;var v=!1;return function(){if(!v){if(F("throwDeprecation"))throw new Error(y);F("traceDeprecation")?console.trace(y):console.warn(y),v=!0}return C.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(b){b.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(b){b.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(b){b.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(b){b.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(b){b.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(b){b.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},f={};function p(b){var g=f[b];if(g!==void 0)return g.exports;var w=f[b]={exports:{}};return l[b].call(w.exports,w,w.exports,p),w.exports}p.amdO={},p.n=function(b){var g=b&&b.__esModule?function(){return b.default}:function(){return b};return p.d(g,{a:g}),g},p.d=function(b,g){for(var w in g)p.o(g,w)&&!p.o(b,w)&&Object.defineProperty(b,w,{enumerable:!0,get:g[w]})},p.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(b){if(typeof window=="object")return window}}(),p.o=function(b,g){return Object.prototype.hasOwnProperty.call(b,g)};var S={};return function(){p.d(S,{default:function(){return m}}),p(8416);var b,g=p(1715),w=p(8080),F=p(1737),C=p(1139),y=function(){var T,U="application/dash+xml";function x(I,R,j){if(!I||!/^VIDEO$/i.test(I.nodeName))return null;if(I._dashjs_player)return I._dashjs_player;var z,W=I.id||I.name||"video element";if(!(R=R||[].slice.call(I.querySelectorAll("source")).filter(function(X){return X.type==U})[0])&&I.src)(R=document.createElement("source")).src=I.src;else if(!R&&!I.src)return null;return j=j||{},(z=(0,C.Z)(j).create()).initialize(I,R.src,I.autoplay),T||(T=z.getDebug().getLogger()),T.debug("Converted "+W+" to dash.js player and added content: "+R.src),I._dashjs_player=z,z}function _(I){return/^VIDEO$/i.test(I.nodeName)?I:_(I.parentNode)}return{create:x,createAll:function(I,R){var j=[];I=I||"[data-dashjs-player]";for(var z=(R=R||document).querySelectorAll(I),W=0;W<z.length;W++){var X=x(z[W],null);j.push(X)}for(var le=R.querySelectorAll('source[type="'+U+'"]'),N=0;N<le.length;N++){var $=x(_(le[N]),null);j.push($)}return j}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?y.createAll():b=window.setInterval(function(){window.dashjs&&(window.clearInterval(b),y.createAll())},500):window.addEventListener("load",function T(){window.removeEventListener("load",T),y.createAll()}));var v=y,D=p(6398);dashjs.Protection=F.default,dashjs.MetricsReporting=w.default,dashjs.MediaPlayerFactory=v,dashjs.Debug=D.Z,dashjs.supportsMediaSource=g.B;var m=dashjs}(),S.default}()})})(HU);var Mz=HU.exports;const Dz=Sb(Mz);var bu,Gi,OA,LA,mg={};mg.d=(r,o)=>{for(var l in o)mg.o(o,l)&&!mg.o(r,l)&&Object.defineProperty(r,l,{enumerable:!0,get:o[l]})},mg.o=(r,o)=>Object.prototype.hasOwnProperty.call(r,o);var gE={};function s3(r,o){(o==null||o>r.length)&&(o=r.length);for(var l=0,f=Array(o);l<o;l++)f[l]=r[l];return f}function Xi(r){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{},f=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(l).filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable}))),f.forEach(function(p){var S;S=l[p],p in r?Object.defineProperty(r,p,{value:S,enumerable:!0,configurable:!0,writable:!0}):r[p]=S})}return r}function so(r,o){return o=o!=null?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):function(l,f){var p=Object.keys(l);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(l);p.push.apply(p,S)}return p}(Object(o)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(o,l))}),r}function u3(r,o){return function(l){if(Array.isArray(l))return l}(r)||function(l,f){var p,S,b=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(b!=null){var g=[],w=!0,F=!1;try{for(b=b.call(l);!(w=(p=b.next()).done)&&(g.push(p.value),!f||g.length!==f);w=!0);}catch(C){F=!0,S=C}finally{try{w||b.return==null||b.return()}finally{if(F)throw S}}return g}}(r,o)||function(l,f){if(l){if(typeof l=="string")return s3(l,f);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(p);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return s3(l,f)}}(r,o)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}mg.d(gE,{GP:()=>OA,fZ:()=>Oz,vn:()=>LA}),(bu=OA||(OA={})).LOADED="loaded",bu.SEEKING="seeking",bu.SEEKED="seeked",bu.BUFFERING="buffering",bu.BUFFERED="buffered",bu.PLAY="play",bu.PLAYING="playing",bu.PAUSE="pause",bu.ENDED="ended",bu.TIME_UPDATE="timeupdate",(Gi=LA||(LA={})).loadstart="loadstart",Gi.progress="progress",Gi.suspend="suspend",Gi.abort="abort",Gi.error="error",Gi.emptied="emptied",Gi.stalled="stalled",Gi.loadedmetadata="loadedmetadata",Gi.loadeddata="loadeddata",Gi.canplay="canplay",Gi.canplaythrough="canplaythrough",Gi.playing="playing",Gi.waiting="waiting",Gi.seeking="seeking",Gi.seeked="seeked",Gi.ended="ended",Gi.durationchange="durationchange",Gi.timeupdate="timeupdate",Gi.play="play",Gi.pause="pause",Gi.ratechange="ratechange",Gi.resize="resize",Gi.volumechange="volumechange";var Pz={paused:!1,ended:!1,loading:!0,buffering:!1,seeking:!1,initialPlayFired:!1,deferLoadedEvent:!1,deferPlayingEvent:!1,deferSeekedEvent:!1,playRequested:!1},Oz=function(r){var o=r.mediaElement,l=r.callback,f=r.allowResumeAfterEnded,p=f!==void 0&&f,S=null,b=function(){typeof S=="number"&&clearTimeout(S)},g=Xi({},Pz),w=function(){return p?g.loading:g.loading||g.ended},F=function(){!g.loading&&g.buffering&&o.playbackRate>0&&(g=so(Xi({},g),{buffering:!1}),l("buffered")),g.loading&&(o.playbackRate===0?g=so(Xi({},g),{deferLoadedEvent:!0}):(g=so(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded")))},C=function(){w()||(g.ended&&(g.ended=!1),g.buffering&&l("buffered"),g=so(Xi({},g),{seeking:!0,buffering:!1}),l("seeking"))},y=function(){if(!w()&&g.seeking){if(o.playbackRate===0){g=so(Xi({},g),{deferSeekedEvent:!0});return}g=so(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")}},v=function(){if(b(),!w()&&!g.seeking){if(o.seeking){C();return}g.buffering||(g=so(Xi({},g),{buffering:!0}),l("buffering"))}},D=function(){if(b(),o.playbackRate===0){g=so(Xi({},g),{deferPlayingEvent:!0});return}(g=so(Xi({},g),{deferPlayingEvent:!1})).loading&&F(),g.initialPlayFired?g.buffering?(g=so(Xi({},g),{buffering:!1}),l("buffered")):g.seeking&&(g=so(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")):(g=so(Xi({},g),{initialPlayFired:!0,paused:!1,playRequested:!1}),l("playing")),g.paused&&g.playRequested&&(g=so(Xi({},g),{paused:!1,playRequested:!1}),l("playing"))},m=function(){return!g.seeking&&!g.buffering&&o.playbackRate===0&&!o.seeking},T=[["canplaythrough",F],["playing",D],["waiting",v],["seeking",C],["seeked",y],["ended",function(){g=so(Xi({},g),{ended:!0,buffering:!1,seeking:!1,loading:!1,paused:!0}),b(),l("ended")}],["timeupdate",function(){w()||(g.buffering&&!o.paused&&(g=so(Xi({},g),{buffering:!1}),l("buffered")),l("timeupdate"))}],["play",function(){!w()&&g.paused&&g.initialPlayFired&&(g=so(Xi({},g),{playRequested:!0}),l("play"))}],["pause",function(){!o.ended&&(g.playRequested||!g.paused)&&((g=so(Xi({},g),{playRequested:!1})).deferLoadedEvent?(g=so(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded"),o.paused&&(g=so(Xi({},g),{paused:!0}),l("pause"))):(g=so(Xi({},g),{paused:!0}),l("pause")))}],["ratechange",function(){b();var U=o.playbackRate>0;g.deferLoadedEvent&&U&&F(),g.deferSeekedEvent&&U&&y(),g.deferPlayingEvent&&U&&D(),!w()&&(m()?S=window.setTimeout(function(){m()&&v()},50):g.buffering&&U&&(g=so(Xi({},g),{buffering:!1}),l("buffered")))}]];return T.forEach(function(U){var x=u3(U,2),_=x[0],I=x[1];return o.addEventListener(_,I)}),{teardown:function(){b(),T.forEach(function(U){var x=u3(U,2),_=x[0],I=x[1];return o.removeEventListener(_,I)})}}},Cu=gE.GP;gE.vn;var Lz=gE.fZ;const kz={NEAR_END:"nearend"};class KU extends If{constructor(o){var l;super(),this.options=o,this.hasEmittedNearEnd=!1,this.video=this.options.element,this.video.muted=!!this.options.muted,this.nearEndThreshold=(l=this.options.nearEndThreshold)!=null?l:10,this.setupMediaEventFilter()}createBaseEventPayload(o){return{currentTime:o.currentTime,timeStamp:Date.now()}}setupMediaEventFilter(){this.eventFilter&&(this.eventFilter.teardown(),this.eventFilter=void 0),this.eventFilter=Lz({mediaElement:this.options.element,allowResumeAfterEnded:!0,callback:o=>{const l=this.createBaseEventPayload(this.video);switch(o){case Cu.LOADED:{this.emit("loaded",l);break}case Cu.SEEKING:{this.emit("seeking",l);break}case Cu.SEEKED:{this.emit("seeked",l);break}case Cu.BUFFERING:{this.emit("buffering",l);break}case Cu.BUFFERED:{this.emit("buffered",l);break}case Cu.PLAY:{this.emit("play",l);break}case Cu.PLAYING:{this.emit("playing",l);break}case Cu.PAUSE:{this.emit("pause",l);break}case Cu.ENDED:{this.emit("ended",l);break}case Cu.TIME_UPDATE:{const f=this.video.duration-this.video.currentTime;this.hasEmittedNearEnd&&f>this.nearEndThreshold&&(this.hasEmittedNearEnd=!1),!this.hasEmittedNearEnd&&f<=this.nearEndThreshold&&(this.hasEmittedNearEnd=!0,this.emit(kz.NEAR_END,{...l,remainingTime:f})),this.emit("timeupdate",l);break}}}})}destroy(){var o;(o=this.eventFilter)==null||o.teardown()}getStats(){const o=this.options.element.getVideoPlaybackQuality();return{droppedVideoFrames:o.droppedVideoFrames,totalVideoFrames:o.totalVideoFrames}}}class Fz extends Error{constructor(o,l){super(o),this.rawError=l}}class Uz extends KU{constructor(o){var f,p;super(o),this.name="DashJSEngine",this.player=Dz.MediaPlayer().create(),this.options.policyQuery&&this.options.policyQuery.startsWith("?")&&this.player.extend("RequestModifier",function(){return{modifyRequestURL:function(S){return S+o.policyQuery}}},!0);const l={"com.widevine.alpha":{serverURL:(f=this.options)==null?void 0:f.widevineLicenseUrl,httpRequestHeaders:o.customLicenceRequestHeaders,priority:0,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO"}};this.player.updateSettings({streaming:{cacheInitSegments:!0,abr:{initialBitrate:{video:4e7},minBitrate:{video:4e6}},protection:{keepProtectionMediaKeys:this.options.keepProtectionData!==!1},buffer:{stableBufferTime:12,bufferToKeep:6}}}),this.player.initialize(this.options.element,void 0,(p=this.options.autoPlay)!=null?p:!1,void 0),this.options.widevineLicenseUrl&&this.player.setProtectionData(l)}destroy(){this.player.destroy(),super.destroy()}async load(o,l){this.setupMediaEventFilter(),await new Promise((f,p)=>{var S;this.once("loaded",()=>{f()});try{this.player.attachSource(o,Math.max((S=l==null?void 0:l.startTimeSeconds)!=null?S:0,0))}catch(b){p(new Fz("UnknownError",b))}})}}var VU={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(r){(function(){var o=typeof window<"u"?window:iu,l={};(function(p,S,b){var g;function w(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var F=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function C(e){e=[typeof globalThis=="object"&&globalThis,e,typeof p=="object"&&p,typeof self=="object"&&self,typeof S=="object"&&S];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var y=C(this);function v(e,t){if(t)e:{var n=y;e=e.split(".");for(var i=0;i<e.length-1;i++){var u=e[i];if(!(u in n))break e;n=n[u]}e=e[e.length-1],i=n[e],t=t(i),t!=i&&t!=null&&F(n,e,{configurable:!0,writable:!0,value:t})}}v("Symbol",function(e){function t(c){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(c||"")+"_"+u++,c)}function n(c,d){this.g=c,F(this,"description",{configurable:!0,writable:!0,value:d})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return t}),v("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=y[t[n]];typeof i=="function"&&typeof i.prototype[e]!="function"&&F(i.prototype,e,{configurable:!0,writable:!0,value:function(){return D(w(this))}})}return e});function D(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:w(e)}}function T(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var U=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},x;if(typeof Object.setPrototypeOf=="function")x=Object.setPrototypeOf;else{var _;e:{var I={a:!0},R={};try{R.__proto__=I,_=R.a;break e}catch(e){}_=!1}x=_?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var j=x;function z(e,t){if(e.prototype=U(t.prototype),e.prototype.constructor=e,j)j(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Ij=t.prototype}function W(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function X(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}W.prototype.s=function(e){this.h=e};function le(e,t){e.i={Yf:t,jg:!0},e.g=e.m||e.j}W.prototype.return=function(e){this.i={return:e},this.g=this.j};function N(e,t,n){return e.g=n,{value:t}}W.prototype.u=function(e){this.g=e};function $(e){e.g=0}function fe(e,t,n){e.m=t,n!=null&&(e.j=n)}function oe(e,t){e.m=0,e.j=t||0}function he(e,t,n){e.g=t,e.m=n||0}function Ie(e,t){return e.m=t||0,t=e.i.Yf,e.i=null,t}function Xe(e){e.A=[e.i],e.m=0,e.j=0}function Ae(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.jg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function Ze(e){this.g=new W,this.h=e}function it(e,t){X(e.g);var n=e.g.l;return n?ut(e,"return"in n?n.return:function(i){return{value:i,done:!0}},t,e.g.return):(e.g.return(t),$e(e))}function ut(e,t,n,i){try{var u=t.call(e.g.l,n);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.o=!1,u;var c=u.value}catch(d){return e.g.l=null,le(e.g,d),$e(e)}return e.g.l=null,i.call(e.g,c),$e(e)}function $e(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,le(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.jg)throw t.Yf;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function lt(e){this.next=function(t){return X(e.g),e.g.l?t=ut(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=$e(e)),t},this.throw=function(t){return X(e.g),e.g.l?t=ut(e,e.g.l.throw,t,e.g.s):(le(e.g,t),t=$e(e)),t},this.return=function(t){return it(e,t)},this[Symbol.iterator]=function(){return this}}function At(e){function t(i){return e.next(i)}function n(i){return e.throw(i)}return new Promise(function(i,u){function c(d){d.done?i(d.value):Promise.resolve(d.value).then(t,n).then(c,u)}c(e.next())})}function Oe(e){return At(new lt(new Ze(e)))}function Qe(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}v("Promise",function(e){function t(d){this.h=0,this.i=void 0,this.g=[],this.o=!1;var h=this.j();try{d(h.resolve,h.reject)}catch(E){h.reject(E)}}function n(){this.g=null}function i(d){return d instanceof t?d:new t(function(h){h(d)})}if(e)return e;n.prototype.h=function(d){if(this.g==null){this.g=[];var h=this;this.i(function(){h.l()})}this.g.push(d)};var u=y.setTimeout;n.prototype.i=function(d){u(d,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var d=this.g;this.g=[];for(var h=0;h<d.length;++h){var E=d[h];d[h]=null;try{E()}catch(A){this.j(A)}}}this.g=null},n.prototype.j=function(d){this.i(function(){throw d})},t.prototype.j=function(){function d(A){return function(k){E||(E=!0,A.call(h,k))}}var h=this,E=!1;return{resolve:d(this.F),reject:d(this.l)}},t.prototype.F=function(d){if(d===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof t)this.H(d);else{e:switch(typeof d){case"object":var h=d!=null;break e;case"function":h=!0;break e;default:h=!1}h?this.C(d):this.m(d)}},t.prototype.C=function(d){var h=void 0;try{h=d.then}catch(E){this.l(E);return}typeof h=="function"?this.I(h,d):this.m(d)},t.prototype.l=function(d){this.s(2,d)},t.prototype.m=function(d){this.s(1,d)},t.prototype.s=function(d,h){if(this.h!=0)throw Error("Cannot settle("+d+", "+h+"): Promise already settled in state"+this.h);this.h=d,this.i=h,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var d=this;u(function(){if(d.B()){var h=y.console;typeof h<"u"&&h.error(d.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var d=y.CustomEvent,h=y.Event,E=y.dispatchEvent;return typeof E>"u"?!0:(typeof d=="function"?d=new d("unhandledrejection",{cancelable:!0}):typeof h=="function"?d=new h("unhandledrejection",{cancelable:!0}):(d=y.document.createEvent("CustomEvent"),d.initCustomEvent("unhandledrejection",!1,!0,d)),d.promise=this,d.reason=this.i,E(d))},t.prototype.A=function(){if(this.g!=null){for(var d=0;d<this.g.length;++d)c.h(this.g[d]);this.g=null}};var c=new n;return t.prototype.H=function(d){var h=this.j();d.Fd(h.resolve,h.reject)},t.prototype.I=function(d,h){var E=this.j();try{d.call(h,E.resolve,E.reject)}catch(A){E.reject(A)}},t.prototype.then=function(d,h){function E(ne,Y){return typeof ne=="function"?function(ve){try{A(ne(ve))}catch(Pe){k(Pe)}}:Y}var A,k,G=new t(function(ne,Y){A=ne,k=Y});return this.Fd(E(d,A),E(h,k)),G},t.prototype.catch=function(d){return this.then(void 0,d)},t.prototype.Fd=function(d,h){function E(){switch(A.h){case 1:d(A.i);break;case 2:h(A.i);break;default:throw Error("Unexpected state: "+A.h)}}var A=this;this.g==null?c.h(E):this.g.push(E),this.o=!0},t.resolve=i,t.reject=function(d){return new t(function(h,E){E(d)})},t.race=function(d){return new t(function(h,E){for(var A=m(d),k=A.next();!k.done;k=A.next())i(k.value).Fd(h,E)})},t.all=function(d){var h=m(d),E=h.next();return E.done?i([]):new t(function(A,k){function G(ve){return function(Pe){ne[ve]=Pe,Y--,Y==0&&A(ne)}}var ne=[],Y=0;do ne.push(void 0),Y++,i(E.value).Fd(G(ne.length-1),k),E=h.next();while(!E.done)})},t});function ct(e,t){return Object.prototype.hasOwnProperty.call(e,t)}v("WeakMap",function(e){function t(E){if(this.g=(h+=Math.random()+1).toString(),E){E=m(E);for(var A;!(A=E.next()).done;)A=A.value,this.set(A[0],A[1])}}function n(){}function i(E){var A=typeof E;return A==="object"&&E!==null||A==="function"}function u(E){if(!ct(E,d)){var A=new n;F(E,d,{value:A})}}function c(E){var A=Object[E];A&&(Object[E]=function(k){return k instanceof n?k:(Object.isExtensible(k)&&u(k),A(k))})}if(function(){if(!e||!Object.seal)return!1;try{var E=Object.seal({}),A=Object.seal({}),k=new e([[E,2],[A,3]]);return k.get(E)!=2||k.get(A)!=3?!1:(k.delete(E),k.set(A,4),!k.has(E)&&k.get(A)==4)}catch(G){return!1}}())return e;var d="$jscomp_hidden_"+Math.random();c("freeze"),c("preventExtensions"),c("seal");var h=0;return t.prototype.set=function(E,A){if(!i(E))throw Error("Invalid WeakMap key");if(u(E),!ct(E,d))throw Error("WeakMap key fail: "+E);return E[d][this.g]=A,this},t.prototype.get=function(E){return i(E)&&ct(E,d)?E[d][this.g]:void 0},t.prototype.has=function(E){return i(E)&&ct(E,d)&&ct(E[d],this.g)},t.prototype.delete=function(E){return i(E)&&ct(E,d)&&ct(E[d],this.g)?delete E[d][this.g]:!1},t}),v("Map",function(e){function t(){var h={};return h.Ab=h.next=h.head=h}function n(h,E){var A=h.g;return D(function(){if(A){for(;A.head!=h.g;)A=A.Ab;for(;A.next!=A.head;)return A=A.next,{done:!1,value:E(A)};A=null}return{done:!0,value:void 0}})}function i(h,E){var A=E&&typeof E;A=="object"||A=="function"?c.has(E)?A=c.get(E):(A=""+ ++d,c.set(E,A)):A="p_"+E;var k=h.h[A];if(k&&ct(h.h,A))for(h=0;h<k.length;h++){var G=k[h];if(E!==E&&G.key!==G.key||E===G.key)return{id:A,list:k,index:h,entry:G}}return{id:A,list:k,index:-1,entry:void 0}}function u(h){if(this.h={},this.g=t(),this.size=0,h){h=m(h);for(var E;!(E=h.next()).done;)E=E.value,this.set(E[0],E[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var h=Object.seal({x:4}),E=new e(m([[h,"s"]]));if(E.get(h)!="s"||E.size!=1||E.get({x:4})||E.set({x:4},"t")!=E||E.size!=2)return!1;var A=E.entries(),k=A.next();return k.done||k.value[0]!=h||k.value[1]!="s"?!1:(k=A.next(),!(k.done||k.value[0].x!=4||k.value[1]!="t"||!A.next().done))}catch(G){return!1}}())return e;var c=new WeakMap;u.prototype.set=function(h,E){h=h===0?0:h;var A=i(this,h);return A.list||(A.list=this.h[A.id]=[]),A.entry?A.entry.value=E:(A.entry={next:this.g,Ab:this.g.Ab,head:this.g,key:h,value:E},A.list.push(A.entry),this.g.Ab.next=A.entry,this.g.Ab=A.entry,this.size++),this},u.prototype.delete=function(h){return h=i(this,h),h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.h[h.id],h.entry.Ab.next=h.entry.next,h.entry.next.Ab=h.entry.Ab,h.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this.h={},this.g=this.g.Ab=t(),this.size=0},u.prototype.has=function(h){return!!i(this,h).entry},u.prototype.get=function(h){return(h=i(this,h).entry)&&h.value},u.prototype.entries=function(){return n(this,function(h){return[h.key,h.value]})},u.prototype.keys=function(){return n(this,function(h){return h.key})},u.prototype.values=function(){return n(this,function(h){return h.value})},u.prototype.forEach=function(h,E){for(var A=this.entries(),k;!(k=A.next()).done;)k=k.value,h.call(E,k[1],k[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var d=0;return u}),v("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var i;!(i=n.next()).done;)this.add(i.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),i=new e(m([n]));if(!i.has(n)||i.size!=1||i.add(n)!=i||i.size!=1||i.add({x:4})!=i||i.size!=2)return!1;var u=i.entries(),c=u.next();return c.done||c.value[0]!=n||c.value[1]!=n?!1:(c=u.next(),c.done||c.value[0]==n||c.value[0].x!=4||c.value[1]!=c.value[0]?!1:u.next().done)}catch(d){return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,i){var u=this;this.g.forEach(function(c){return n.call(i,c,c,u)})},t)});function Qt(e,t){e instanceof String&&(e+="");var n=0,i=!1,u={next:function(){if(!i&&n<e.length){var c=n++;return{value:t(c,e[c]),done:!1}}return i=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}v("Array.prototype.keys",function(e){return e||function(){return Qt(this,function(t){return t})}});function Kt(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,u=0;u<i;u++){var c=e[u];if(t.call(n,c,u,e))return{gg:u,v:c}}return{gg:-1,v:void 0}}v("Array.prototype.findIndex",function(e){return e||function(t,n){return Kt(this,t,n).gg}}),v("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),v("Array.prototype.includes",function(e){return e||function(t,n){var i=this;i instanceof String&&(i=String(i));var u=i.length;for(n=n||0,0>n&&(n=Math.max(n+u,0));n<u;n++){var c=i[n];if(c===t||Object.is(c,t))return!0}return!1}});function St(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}v("String.prototype.includes",function(e){return e||function(t,n){return St(this,t,"includes").indexOf(t,n||0)!==-1}}),v("Array.prototype.find",function(e){return e||function(t,n){return Kt(this,t,n).v}}),v("String.prototype.startsWith",function(e){return e||function(t,n){var i=St(this,t,"startsWith"),u=i.length,c=t.length;n=Math.max(0,Math.min(n|0,i.length));for(var d=0;d<c&&n<u;)if(i[n++]!=t[d++])return!1;return d>=c}}),v("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var i;!(i=n.next()).done;)this.add(i.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),i=Object.seal({}),u=new e([n]);return!u.has(n)||u.has(i)?!1:(u.delete(n),u.add(i),!u.has(n)&&u.has(i))}catch(c){return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),v("Array.from",function(e){return e||function(t,n,i){n=n!=null?n:function(h){return h};var u=[],c=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof c=="function"){t=c.call(t);for(var d=0;!(c=t.next()).done;)u.push(n.call(i,c.value,d++))}else for(c=t.length,d=0;d<c;d++)u.push(n.call(i,t[d],d));return u}});var Lt=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var u in i)ct(i,u)&&(e[u]=i[u])}return e};v("Object.assign",function(e){return e||Lt}),v("Array.prototype.values",function(e){return e||function(){return Qt(this,function(t,n){return n})}}),v("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),v("Array.prototype.entries",function(e){return e||function(){return Qt(this,function(t,n){return[t,n]})}}),v("String.prototype.repeat",function(e){return e||function(t){var n=St(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var i="";t;)t&1&&(i+=n),(t>>>=1)&&(n+=n);return i}}),v("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),v("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),v("Object.values",function(e){return e||function(t){var n=[],i;for(i in t)ct(t,i)&&n.push(t[i]);return n}}),v("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),v("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),v("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),v("Object.entries",function(e){return e||function(t){var n=[],i;for(i in t)ct(t,i)&&n.push([i,t[i]]);return n}});var Ce=this||self;function te(e,t){e=e.split(".");var n=Ce;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||t===void 0?n[i]&&n[i]!==Object.prototype[i]?n=n[i]:n=n[i]={}:n[i]=t}function Fe(){}function O(){}function M(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}M.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function q(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new M(2),this.j=new M(5),this.g=0,this.i=128e3,this.l=16e3}K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(q(this.h),q(this.j))};function ye(){}function de(){}function He(){}function Tt(e){var t=Qe.apply(1,arguments);ft.has(e)||(ft.add(e),He.apply(ye,T(t)))}function ot(){}function rt(){}function et(){}var ft=new Set;p.console&&(He=function(){return console.warn.apply(console,T(Qe.apply(0,arguments)))},de=function(){console.error.apply(console,T(Qe.apply(0,arguments)))});function yt(){this.g={}}g=yt.prototype,g.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},g.get=function(e){return(e=this.g[e])?e.slice():null},g.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},g.forEach=function(e){for(var t in this.g)e(t,this.g[t])},g.size=function(){return Object.keys(this.g).length},g.keys=function(){return Object.keys(this.g)};function _t(){this.g=new yt}g=_t.prototype,g.release=function(){this.ib(),this.g=null},g.D=function(e,t,n,i){this.g&&(e=new Ct(e,t,n,i),this.g.push(t,e))},g.na=function(e,t,n,i){function u(d){c.Kb(e,t,u),n(d)}var c=this;this.D(e,t,u,i)},g.Kb=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=m(i);for(var u=i.next();!u.done;u=i.next())u=u.value,u.target!=e||n!=u.listener&&n||(u.Kb(),this.g.remove(t,u))}},g.ib=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,T(e.g[n]));for(e=m(t),t=e.next();!t.done;t=e.next())t.value.Kb();this.g.g={}}},te("shaka.util.EventManager",_t),_t.prototype.removeAll=_t.prototype.ib,_t.prototype.unlisten=_t.prototype.Kb,_t.prototype.listenOnce=_t.prototype.na,_t.prototype.listen=_t.prototype.D,_t.prototype.release=_t.prototype.release;function Ct(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=hn(e,i),this.target.addEventListener(t,n,this.g)}Ct.prototype.Kb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function hn(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(i){return!n.has(i)}),Xt(e)?t:t.capture||!1}function Xt(e){var t=nn;if(t==null){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(u){t=!1}nn=t}return t||!1}var nn=void 0;function Pt(e){if(gr.has(e))return gr.get(e);if(p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return gr.set(e,t),t}return p.MediaSource?(t=MediaSource.isTypeSupported(e),gr.set(e,t),t):!1}function Un(){return!!p.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var gr=new Map;function Pr(e,t){this.g=e,this.h=t}Pr.prototype.toString=function(){return"v"+this.g+"."+this.h};function dr(e,t){var n=new Pr(5,0),i=Or,u=i.g,c=n.h-u.h;(0<(n.g-u.g||c)?i.i:i.h)(i.g,n,e,t)}function ei(e,t,n,i){He([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Ji(e,t,n,i){de([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(" "))}var Or=null;function eo(){}eo.prototype.extract=function(){},eo.prototype.decode=function(){return[]},eo.prototype.clear=function(){},eo.prototype.getStreams=function(){return[]};function _i(){}_i.prototype.init=function(){},_i.prototype.parse=function(){return[]};function Di(){}function zi(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(to(e)==to(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Qn(e);t=Qn(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function to(e){return e instanceof ArrayBuffer?e:e.buffer}function Ti(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Qn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint8Array)}function Ou(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint16Array)}function tn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,DataView)}function sn(e,t,n,i){var u=to(e),c=1;"BYTES_PER_ELEMENT"in i&&(c=i.BYTES_PER_ELEMENT);var d=((e.byteOffset||0)+e.byteLength)/c;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/c,d))),new i(u,e,Math.floor(Math.min(e+Math.max(n,0),d))-e)}te("shaka.util.BufferUtils",Di),Di.toDataView=tn,Di.toUint16=Ou,Di.toUint8=Qn,Di.toArrayBuffer=Ti,Di.equal=zi;function an(){}an.prototype.init=function(){},an.prototype.i=function(){},an.prototype.h=function(){},an.prototype.j=function(){},te("shaka.media.IClosedCaptionParser",an);function wt(e){this.l=new _i,(e=zt[e.toLowerCase()])&&(this.l=e()),this.g=new eo,(e=xt)&&(this.g=e())}wt.prototype.init=function(e){this.l.init(e)},wt.prototype.i=function(e){e=this.l.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Qn(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},wt.prototype.h=function(){this.g.clear()},wt.prototype.j=function(){return this.g.getStreams()},te("shaka.media.ClosedCaptionParser",wt),wt.findDecoder=function(){return xt},wt.unregisterDecoder=function(){xt=null},wt.registerDecoder=function(e){xt=e},wt.findParser=function(e){return zt[e]},wt.unregisterParser=function(e){delete zt[e]},wt.registerParser=function(e,t){zt[e]=t};var zt={},xt=null;function Vt(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function mn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function In(e,t,n){if(n||(n=Vt),e.length!=t.length)return!1;t=t.slice();var i={};e=m(e);for(var u=e.next();!u.done;i={ne:i.ne},u=e.next()){if(i.ne=u.value,u=t.findIndex(function(c){return function(d){return n(c.ne,d)}}(i)),u==-1)return!1;t[u]=t[t.length-1],t.pop()}return t.length==0}function Zn(e,t,n){if(n||(n=Vt),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function Cn(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Br,this.position=null,this.positionAlign=Bn,this.size=0,this.textAlign=kn,this.direction=Vn,this.writingMode=rn,this.lineInterpretation=cn,this.line=null,this.lineHeight="",this.lineAlign=bn,this.displayAlign=Er,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Lr,this.fontStyle=Yi,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Sb:32,rows:15}}function Rn(e,t){return e=new Cn(e,t,""),e.lineBreak=!0,e}Cn.prototype.clone=function(){var e=new Cn(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function on(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Zn(e.nestedCues,t.nestedCues,on))return!1}else if(n=="region"||n=="cellResolution"){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!Zn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}te("shaka.text.Cue",Cn),Cn.equal=on,Cn.prototype.clone=Cn.prototype.clone;var Bn="auto";Cn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Bn};var kn="center",er={LEFT:"left",RIGHT:"right",CENTER:kn,START:"start",END:"end"};Cn.textAlign=er;var Er="after",Ur={BEFORE:"before",CENTER:"center",AFTER:Er};Cn.displayAlign=Ur;var Vn="ltr";Cn.direction={HORIZONTAL_LEFT_TO_RIGHT:Vn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var rn="horizontal-tb";Cn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:rn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var cn=0;Cn.lineInterpretation={LINE_NUMBER:cn,PERCENTAGE:1};var bn="start",Jn={CENTER:"center",START:bn,END:"end"};Cn.lineAlign=Jn;var ar={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Cn.defaultTextColor=ar;var br={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Cn.defaultTextBackgroundColor=br;var Lr=400;Cn.fontWeight={NORMAL:Lr,BOLD:700};var Yi="normal",no={NORMAL:Yi,ITALIC:"italic",OBLIQUE:"oblique"};Cn.fontStyle=no,Cn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Br(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qr,this.scroll=hi}te("shaka.text.CueRegion",Br);var qr=1;Br.units={PX:0,PERCENTAGE:qr,LINES:2};var hi="";Br.scrollMode={NONE:hi,UP:"up"};function vi(){}vi.prototype.destroy=function(){};function Ao(e,t,n){na[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ge:t}}function ro(e,t){for(var n=e.toLowerCase().split(";")[0],i=m([Ec,lu,Il,Ci]),u=i.next();!u.done;u=i.next())if(u=na[n+"-"+u.value]){var c=u.ge(),d=c.isSupported(e,t);if(c.destroy(),d)return u.ge}return null}te("shaka.transmuxer.TransmuxerEngine",vi),vi.findTransmuxer=ro,vi.unregisterTransmuxer=function(e,t){delete na[e.toLowerCase().split(";")[0]+"-"+t]},vi.registerTransmuxer=Ao,vi.prototype.destroy=vi.prototype.destroy;var na={},Ci=1,Il=2,lu=3,Ec=4;vi.PluginPriority={FALLBACK:Ci,PREFERRED_SECONDARY:Il,PREFERRED:lu,APPLICATION:Ec};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var xf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function si(e){var t;e instanceof si?(Os(this,e.kb),this.mc=e.mc,_n(this,e.wb),Xn(this,e.Bc),this.Pa=e.Pa,hr(this,e.g.clone()),this.Wb=e.Wb):e&&(t=String(e).match(xf))?(Os(this,t[1]||"",!0),this.mc=ti(t[2]||""),_n(this,t[3]||"",!0),Xn(this,t[4]),this.Pa=ti(t[5]||"",!0),hr(this,t[6]||"",!0),this.Wb=ti(t[7]||"")):this.g=new Wi(null)}g=si.prototype,g.kb="",g.mc="",g.wb="",g.Bc=null,g.Pa="",g.Wb="",g.toString=function(){var e=[],t=this.kb;if(t&&e.push(Mr(t,Xr,!0),":"),t=this.wb){e.push("//");var n=this.mc;n&&e.push(Mr(n,Xr,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Bc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.wb&&t.charAt(0)!="/"&&e.push("/"),e.push(Mr(t,t.charAt(0)=="/"?Pi:ra,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Wb)&&e.push("#",Mr(t,Io)),e.join("")},g.resolve=function(e){var t=this.clone();t.kb==="data"&&(t=new si);var n=!!e.kb;n?Os(t,e.kb):n=!!e.mc,n?t.mc=e.mc:n=!!e.wb,n?_n(t,e.wb):n=e.Bc!=null;var i=e.Pa;if(n)Xn(t,e.Bc);else if(n=!!e.Pa){if(i.charAt(0)!="/")if(this.wb&&!this.Pa)i="/"+i;else{var u=t.Pa.lastIndexOf("/");u!=-1&&(i=t.Pa.substr(0,u+1)+i)}if(i==".."||i==".")i="";else if(i.indexOf("./")!=-1||i.indexOf("/.")!=-1){u=i.lastIndexOf("/",0)==0,i=i.split("/");for(var c=[],d=0;d<i.length;){var h=i[d++];h=="."?u&&d==i.length&&c.push(""):h==".."?((1<c.length||c.length==1&&c[0]!="")&&c.pop(),u&&d==i.length&&c.push("")):(c.push(h),u=!0)}i=c.join("/")}}return n?t.Pa=i:n=e.g.toString()!=="",n?hr(t,e.g.clone()):n=!!e.Wb,n&&(t.Wb=e.Wb),t},g.clone=function(){return new si(this)};function Os(e,t,n){e.kb=n?ti(t,!0):t,e.kb&&(e.kb=e.kb.replace(/:$/,""))}function _n(e,t,n){e.wb=n?ti(t,!0):t}function Xn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Bc=t}else e.Bc=null}function hr(e,t,n){t instanceof Wi?e.g=t:(n||(t=Mr(t,ui)),e.g=new Wi(t))}function ti(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Mr(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Bi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bi(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Xr=/[#\/\?@]/g,ra=/[#\?:]/g,Pi=/[#\?]/g,ui=/[#\?@]/g,Io=/#/g;function Wi(e){this.g=e||null}function qo(e){if(!e.Ca&&(e.Ca={},e.Zc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),u=null;if(0<=i){var c=t[n].substring(0,i);u=t[n].substring(i+1)}else c=t[n];c=decodeURIComponent(c.replace(/\+/g," ")),u=u||"",e.add(c,decodeURIComponent(u.replace(/\+/g," ")))}}g=Wi.prototype,g.Ca=null,g.Zc=null;function ia(e){return qo(e),e.Zc}g.add=function(e,t){qo(this),this.g=null;var n=this.Ca.hasOwnProperty(e)?this.Ca[e]:null;return n||(this.Ca[e]=n=[]),n.push(t),this.Zc++,this},g.set=function(e,t){return qo(this),this.g=null,this.Ca.hasOwnProperty(e)?this.Ca[e]=[t]:this.add(e,t),this},g.get=function(e){return qo(this),this.Ca[e]||[]},g.toString=function(){if(this.g)return this.g;if(!this.Ca)return"";var e=[],t;for(t in this.Ca)for(var n=encodeURIComponent(t),i=this.Ca[t],u=0;u<i.length;u++){var c=n;i[u]!==""&&(c+="="+encodeURIComponent(i[u])),e.push(c)}return this.g=e.join("&")},g.clone=function(){var e=new Wi;if(e.g=this.g,this.Ca){var t={},n;for(n in this.Ca)t[n]=this.Ca[n].concat();e.Ca=t,e.Zc=this.Zc}return e};function pt(e,t,n){var i=Qe.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}pt.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},te("shaka.util.Error",pt),pt.Severity={RECOVERABLE:1,CRITICAL:2},pt.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},pt.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function oa(e){this.h=e,this.g=void 0}oa.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Ls(e){this.h=e,this.g=null}Ls.prototype.X=function(e){var t=this;this.stop();var n=!0,i=null;return this.g=function(){p.clearTimeout(i),n=!1},i=p.setTimeout(function(){n&&t.h()},1e3*e),this},Ls.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function pr(e){this.h=e,this.g=null}pr.prototype.kc=function(){return this.stop(),this.h(),this},pr.prototype.X=function(e){var t=this;return this.stop(),this.g=new Ls(function(){t.h()}).X(e),this},pr.prototype.$a=function(e){var t=this;return this.stop(),this.g=new Ls(function(){t.g.X(e),t.h()}).X(e),this},pr.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},te("shaka.util.Timer",pr),pr.prototype.stop=pr.prototype.stop,pr.prototype.tickEvery=pr.prototype.$a,pr.prototype.tickAfter=pr.prototype.X,pr.prototype.tickNow=pr.prototype.kc;function bo(){var e=p.ManagedMediaSource||p.MediaSource;return!!(e&&e.isTypeSupported)}function cu(e){return Tc().canPlayType(e)!=""}function bl(){return!!navigator.userAgent.match(/Edge?\//)}function vs(){return Yr("Xbox One")}function Ha(){return Yr("Tizen")}function Lu(){return Yr("Tizen 3")}function ku(){return Yr("Tizen 2")}function aa(){return Yr("Web0S")}function sa(){return Yr("CrKey")}function fu(){if(!Yr("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function ys(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Ha()&&!Yr("PC=EOS")&&!Yr("PC=APL")&&!Yr("VirginMedia")&&!Yr("SOPOpenBrowser")&&!Nr()&&!Yr("AFT")&&!Yr("WPE")}function _c(){return Yr("PlayStation 5")}function Nr(){return Yr("PlayStation 4")}function Es(){return Yr("Hisense")||Yr("VIDAA")}function _s(){if(!ys())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Yr(e){return(navigator.userAgent||"").includes(e)}function Tc(){return ua||(Cl||(Cl=new pr(function(){ua=null})),(ua=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(ua=document.createElement("video")),Cl.X(1),ua)}function Ia(){var e,t,n,i,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:if(e={width:1/0,height:1/0},sa()){p.cast&&cast.__platform__&&cast.__platform__.canDisplayType&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(Ha()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch(G){He("Tizen: Error detecting screen size, default screen size 1920x1080.")}k.u(2);break}if(vs()){n=new Windows.Media.Protection.ProtectionCapabilities,i=Windows.Media.Protection.ProtectionCapabilityResult,u=null;try{do u=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(u===i.maybe)}catch(G){u=i.notSupported}u===i.probably?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(aa()){try{c=JSON.parse(p.PalmSystem.deviceInfo),e.width=Math.max(1920,c.Hj),e.height=Math.max(1080,c.Gj)}catch(G){He("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}k.u(2);break}if(Es()){p.Hisense_Get4KSupportState&&p.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(!Nr()&&!_c()){k.u(2);break}return d=!1,fe(k,8),N(k,p.msdk.device.getDisplayInfo(),10);case 10:h=k.h,d=h.resolution==="4K",he(k,9);break;case 8:return Ie(k),fe(k,11),N(k,p.msdk.device.getDisplayInfoImmediate(),13);case 13:E=k.h,d=E.resolution==="4K",he(k,9);break;case 11:A=Ie(k),He("PlayStation: Failed to get the display info:",A);case 9:d?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080);case 2:return k.return(e)}})}var Cl=null,ua=null;function Ts(){}function Vr(e){if(!e)return"";if(e=Qn(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),p.TextDecoder&&!Nr())return e=new TextDecoder().decode(e),e.includes("")&&de('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var i=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(i=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(i=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(i=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):i=e[n],65535>=i)t+=String.fromCharCode(i);else{i-=65536;var u=i&1023;t+=String.fromCharCode(55296+(i>>10)),t+=String.fromCharCode(56320+u)}}return t}function Ka(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new pt(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=tn(e);for(var u=0;u<n;u++)i[u]=e.getUint16(2*u,t);return Ch(i)}function Va(e){function t(i){return n.byteLength<=i||32<=n[i]&&126>=n[i]}if(!e)return"";var n=Qn(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Vr(n);if(n[0]==254&&n[1]==255)return Ka(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Ka(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Ka(e,!1);if(n[1]==0&&n[3]==0)return Ka(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Vr(e);throw new pt(2,2,2003)}function za(e){if(p.TextEncoder&&!Nr()){var t=new TextEncoder;return Ti(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Ti(t)}function Mf(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),u=0;u<e.length;++u)i.setUint16(2*u,e.charCodeAt(u),t);return n}function Ch(e){return lm.value()(e)}function Co(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&apos;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},n=/&(?:amp|lt|gt|quot|apos|#(0+)?39|nbsp|lrm|rlm);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(u){return t[u]||"'"}):e||""}te("shaka.util.StringUtils",Ts),Ts.resetFromCharCode=function(){lm.g=void 0},Ts.toUTF16=Mf,Ts.toUTF8=za,Ts.fromBytesAutoDetect=Va,Ts.fromUTF16=Ka,Ts.fromUTF8=Vr;var lm=new oa(function(){function e(n){try{var i=new Uint8Array(n);return 0<String.fromCharCode.apply(null,i).length}catch(u){return!1}}for(var t={Db:65536};0<t.Db;t={Db:t.Db},t.Db/=2)if(e(t.Db))return function(n){return function(i){for(var u="",c=0;c<i.length;c+=n.Db)u+=String.fromCharCode.apply(null,i.subarray(c,c+n.Db));return u}}(t);return null});function Oi(){}function Df(e){return e=Ch(Qn(e)),btoa(e)}function du(e,t){return t=t==null?!0:t,e=Df(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Ho(e){e=p.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function hu(e){for(var t=e.length/2,n=new Uint8Array(t),i=0;i<t;i++)n[i]=p.parseInt(e.substr(2*i,2),16);return n}function ks(e){var t=Qn(e);e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function li(){for(var e=Qe.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var i=n=0;i<e.length;++i){var u=e[i];u instanceof Uint8Array?t.set(u,n):t.set(Qn(u),n),n+=u.byteLength}return t}te("shaka.util.Uint8ArrayUtils",Oi),Oi.concat=li,Oi.toHex=ks,Oi.fromHex=hu,Oi.fromBase64=Ho,Oi.toBase64=du,Oi.toStandardBase64=Df;function co(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new si(e[0]);return t=new si(t[0]),[n.resolve(t).toString()]}t=t.map(function(d){return new si(d)}),n=[],e=m(e);for(var i=e.next();!i.done;i=e.next()){i=new si(i.value);for(var u=m(t),c=u.next();!c.done;c=u.next())n.push(i.resolve(c.value).toString())}return n}function Fu(e,t,n){return{keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set}}function Rh(e,t){t=t===void 0?"cenc":t;var n=[],i=[],u=[];e.forEach(function(d,h){var E=h;E.length!=22&&(E=du(hu(h),!1));var A=d;A.length!=22&&(A=du(hu(d),!1)),d={kty:"oct",kid:E,k:A},n.push(d),i.push(d.kid),u.push(h)}),e=JSON.stringify({keys:n});var c=JSON.stringify({kids:i});return c=[{initData:Qn(za(c)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+p.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:c,keyIds:new Set(u)}}function Uu(e,t){if(t.length==1)return t[0];if(e=Ro(e,t),e!=null)return e;throw new pt(2,4,4025,t)}function Ro(e,t){for(var n=m(xh[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,i.test(c.trim()))return c.trim()}return e==vr?"":null}function Nh(e,t){var n=[];e=m(xh[e]);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var u=m(t),c=u.next();!c.done;c=u.next())c=c.value,i.test(c.trim())&&n.push(c.trim())}return n}var vr="text",yi={fa:"video",S:"audio",ma:vr,ue:"image",Gi:"application"},xh={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/,/^iamf/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Sc(){}function Si(e,t){var n=e;return t&&!pu.includes(e)&&(n+='; codecs="'+t+'"'),n}function Bu(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Fs(e,t,n){var i=Si(e,t);return t=Bu(e,t),ro(t)?(e=ro(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?i.replace("video","audio"):i,n}function cm(e,t,n){var i=[t];return AE.forEach(function(u,c){var d=e[c];c=="codecs"?pu.includes(e.mimeType)||i.push('codecs="'+n+'"'):d&&i.push(u+'="'+d+'"')}),e.hdr=="PQ"&&i.push('eotf="smpte2084"'),i.join(";")}function Pf(e){return e.split(";")[0].split("/")[1]}function ba(e){var t=Mh(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="dvh1":case e==="dvhe":return"dovi"}return e}function Ya(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Mh(n.value),t.push(n[0]);return t.sort().join(",")}function Ca(e){return e.split(";")[0]}function Po(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function fm(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function Mh(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}te("shaka.util.MimeUtils",Sc),Sc.getFullTypeWithAllCodecs=Bu,Sc.getFullType=Si;var AE=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),pu=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Us(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function Rl(e){return ji[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!xt:!1}Us.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function IE(e,t,n,i,u){var c,d,h,E,A,k,G;return Oe(function(ne){if(ne.g==1)return N(ne,Promise.resolve(),2);if(!e.i||!e.j)return ne.return();if(n==null||i==null)return e.i.parseInit(Qn(t)),ne.return();for(c=e.B?n:e.s,d={periodStart:e.s,segmentStart:n,segmentEnd:i,vttOffset:c},h=e.i.parseMedia(Qn(t),d,u),E=m(h),A=E.next();!A.done;A=E.next())k=A.value,e.A(k,u||null,d);G=h.filter(function(Y){return Y.startTime>=e.l&&Y.startTime<e.m}),e.j.append(G),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(i,e.m),$(ne)})}Us.prototype.remove=function(e,t){var n=this;return Oe(function(i){if(i.g==1)return N(i,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),$(i)})};function Dh(e,t,n){e.l=t,e.m=n}function Of(e,t,n){if(e.C=t,t=e.o.get(t))for(var i=m(t.keys()),u=i.next();!u.done;u=i.next())(u=t.get(u.value).filter(function(c){return c.endTime<=n}))&&e.j.append(u)}function dm(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var i=t.next();!i.done;i=t.next())dm(e,i.value,n)}function Lf(e,t,n,i,u){var c=n+" "+i,d=new Map;t=m(t);for(var h=t.next();!h.done;h=t.next()){var E=h.value;h=E.stream,E=E.cue,d.has(h)||d.set(h,new Map),d.get(h).has(c)||d.get(h).set(c,[]),dm(e,E,u),E.startTime>=e.l&&E.startTime<e.m&&(d.get(h).get(c).push(E),h==e.C&&e.j.append([E]))}for(u=m(d.keys()),c=u.next();!c.done;c=u.next())for(c=c.value,e.o.has(c)||e.o.set(c,new Map),t=m(d.get(c).keys()),h=t.next();!h.done;h=t.next())h=h.value,E=d.get(c).get(h),e.o.get(c).set(h,E);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}te("shaka.text.TextEngine",Us),Us.prototype.destroy=Us.prototype.destroy,Us.findParser=function(e){return ji[e]},Us.unregisterParser=function(e){delete ji[e]},Us.registerParser=function(e,t){ji[e]=t};var ji={};function hm(e,t){return e.concat(t)}function pm(){}function ju(e){return e!=null}function mo(){}function Zu(e,t){return e=Cr(e),t=Cr(t),e.split("-")[0]==t.split("-")[0]}function wc(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Gu(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Cr(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=ni.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function qu(e,t){return e=Cr(e),t=Cr(t),t==e?4:wc(t,e)?3:Gu(t,e)?2:wc(e,t)?1:0}function Ph(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=ni.get(e)||e}function Hu(e){return e.language?Cr(e.language):e.audio&&e.audio.language?Cr(e.audio.language):e.video&&e.video.language?Cr(e.video.language):"und"}function Nl(e,t){e=Cr(e);var n=new Set,i=m(t);for(t=i.next();!t.done;t=i.next())n.add(Cr(t.value));for(i=m(n),t=i.next();!t.done;t=i.next())if(t=t.value,t==e)return t;for(i=m(n),t=i.next();!t.done;t=i.next())if(t=t.value,wc(t,e))return t;for(i=m(n),t=i.next();!t.done;t=i.next())if(t=t.value,Gu(t,e))return t;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,wc(e,t))return t;return null}te("shaka.util.LanguageUtils",mo),mo.findClosestLocale=Nl,mo.getLocaleForVariant=Hu,mo.getLocaleForText=function(e){return Cr(e.language||"und")},mo.getBase=Ph,mo.relatedness=qu,mo.areSiblings=function(e,t){var n=Ph(e),i=Ph(t);return e!=n&&t!=i&&n==i},mo.normalize=Cr,mo.isSiblingOf=Gu,mo.isParentOf=wc,mo.areLanguageCompatible=Zu,mo.areLocaleCompatible=function(e,t){return e=Cr(e),t=Cr(t),e==t};var ni=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Wa(e){function t(i){switch(typeof i){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return i;default:if(!i||i.buffer&&i.buffer.constructor==ArrayBuffer)return i;if(n.has(i))return null;var u=i.constructor==Array;if(i.constructor!=Object&&!u)return null;n.add(i);var c=u?[]:{},d;for(d in i)c[d]=t(i[d]);return u&&(c.length=i.length),c}}var n=new WeakSet;return t(e)}function gm(e){var t={},n;for(n in e)t[n]=e[n];return t}function Ac(){}function mm(e,t,n,i){var u=e.variants;if((t.length||n.length)&&(u=Oh(u,t,n)),i.length){for(t=new yt,n=m(u),u=n.next();!u.done;u=n.next())u=u.value,t.push(String(u.video.width||0),u);var c=[];t.forEach(function(ve,Pe){ve=0;var xe=[],Ge={};Pe=m(Pe);for(var Te=Pe.next();!Te.done;Ge={Uc:Ge.Uc},Te=Pe.next())Ge.Uc=Te.value,Te=i.filter(function(We){return function(Ue){return We.Uc.decodingInfos[0][Ue]}}(Ge)).length,Te>ve?(ve=Te,xe=[Ge.Uc]):Te==ve&&xe.push(Ge.Uc);c.push.apply(c,T(xe))}),u=c}n=new Set,t=new Set;var d=m(u);for(u=d.next();!u.done;u=d.next())u=u.value,u.audio&&n.add(u.audio),u.video&&t.add(u.video);n=Array.from(n).sort(function(ve,Pe){return ve.bandwidth-Pe.bandwidth});var h=[];for(u=new Map,n=m(n),d=n.next();!d.done;d=n.next()){d=d.value;var E=d.language+(d.channelsCount||0)+(d.audioSamplingRate||0)+d.roles.join(",")+d.label+d.groupId+d.fastSwitching,A=u.get(E)||[];if(A.length){var k=A[A.length-1],G=ba(k.codecs),ne=ba(d.codecs);G==ne&&d.bandwidth>k.bandwidth&&(A.push(d),h.push(d.id))}else A.push(d),h.push(d.id);u.set(E,A)}n=Array.from(t).sort(function(ve,Pe){return ve.bandwidth&&Pe.bandwidth?ve.bandwidth-Pe.bandwidth:ve.width-Pe.width}),t=Un();var Y=[];for(u=new Map,n=m(n),d=n.next();!d.done;d=n.next()){if(d=d.value,E=Math.round(d.frameRate||0)+(d.hdr||"")+d.fastSwitching,A=u.get(E)||[],A.length){if(k=A[A.length-1],!t&&(G=ba(k.codecs),ne=ba(d.codecs),G!==ne))continue;d.width>k.width||d.height>k.height?(A.push(d),Y.push(d.id)):d.width==k.width&&d.height==k.height&&(G=ba(k.codecs),ne=ba(d.codecs),G==ne&&d.bandwidth>k.bandwidth&&(A.push(d),Y.push(d.id)))}else A.push(d),Y.push(d.id);u.set(E,A)}e.variants=e.variants.filter(function(ve){var Pe=ve.audio;return ve=ve.video,!(Pe&&!h.includes(Pe.id)||ve&&!Y.includes(ve.id))})}function Oh(e,t,n){var i={};t=m(t);for(var u=t.next();!u.done;i={te:i.te},u=t.next())if(i.te=u.value,u=e.filter(function(c){return function(d){return d.video&&d.video.codecs.startsWith(c.te)}}(i)),u.length){e=u;break}for(i={},n=m(n),t=n.next();!t.done;i={me:i.me},t=n.next())if(i.me=t.value,t=e.filter(function(c){return function(d){return d.audio&&d.audio.codecs.startsWith(c.me)}}(i)),t.length){e=t;break}return e}function Lh(e,t,n){e.variants=e.variants.filter(function(i){return kf(i,t,n)})}function kf(e,t,n){function i(h,E,A){return h>=E&&h<=A}var u=e.video;if(u&&u.width&&u.height){var c=u.width,d=u.height;if(d>c&&(d=m([d,c]),c=d.next().value,d=d.next().value),!i(c,t.minWidth,Math.min(t.maxWidth,n.width))||!i(d,t.minHeight,Math.min(t.maxHeight,n.height))||!i(u.width*u.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Ic(e,t,n){var i=!1;e=m(e);for(var u=e.next();!u.done;u=e.next()){u=u.value;var c=u.allowedByApplication;u.allowedByApplication=kf(u,t,n),c!=u.allowedByApplication&&(i=!0)}return i}function vm(e,t,n){return n=n===void 0?[]:n,Oe(function(i){return i.g==1?N(i,ym(e,t,0<t.offlineSessionIds.length,n),2):(bE(t),N(i,Bf(t),0))})}function ym(e,t,n,i){var u,c;return Oe(function(d){if(d.g==1)return N(d,Fh(t.variants,n,!1,i),2);u=null,e&&(c=e.g)&&(u=c.keySystem),t.variants=t.variants.filter(function(h){var E=kh(h,u);if(!E){var A=[];h.audio&&A.push(Gf(h.audio)),h.video&&A.push(Gf(h.video))}return E}),$(d)})}function kh(e,t){var n=vs(),i=Yr("Firefox")&&Yr("Android"),u=e.video,c=u&&u.width||0,d=u&&u.height||0;if(n&&u&&(1920<c||1080<d)&&(u.codecs.includes("avc1.")||u.codecs.includes("avc3.")))return!1;if(u){if(n=xl(u.codecs),u.codecs.includes(",")){if(c=u.codecs.split(","),n=Uu("video",c),n=xl(n),c=Uu("audio",c),c=Ku(c),d=Fs(u.mimeType,c,"audio"),!Pt(d))return!1;n=[n,c].join()}if(c=Fs(u.mimeType,n,"video"),!Pt(c))return!1;u.codecs=n}if(u=e.audio,i&&u&&u.encrypted&&u.codecs.toLowerCase().includes("opus"))return!1;if(u){if(i=Ku(u.codecs),n=Fs(u.mimeType,i,"audio"),!Pt(n))return!1;u.codecs=i}return e.decodingInfos.some(function(h){return!(!h.supported||t&&(h=h.keySystemAccess)&&h.keySystem!=t)})}function Ff(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=m(t);for(var i=t.next();!i.done;i=t.next()){var u=i.value;i=JSON.stringify(u),u=e[u],u instanceof Object?(u=Ff(u),n.push(i+":"+u)):(u=JSON.stringify(u),n.push(i+":"+u))}return"{"+n.join(",")+"}"}function Em(e,t){var n,i,u,c,d,h,E;return Oe(function(A){if(A.g==1){for(n=function(k,G){if(k){var ne=Wa(k);return ne.supported=k.supported&&G.supported,ne.powerEfficient=k.powerEfficient&&G.powerEfficient,ne.smooth=k.smooth&&G.smooth,G.keySystemAccess&&!ne.keySystemAccess&&(ne.keySystemAccess=G.keySystemAccess),ne}return G},i=null,u=[],c={},d=m(t),h=d.next();!h.done;c={Gc:c.Gc,Hc:c.Hc},h=d.next())E=h.value,c.Hc=Ff(E),c.Gc=Uh,c.Gc[c.Hc]?i=n(i,c.Gc[c.Hc]):u.push(Uf(E).then(function(k){return function(G){var ne=null;G=m(G||[]);for(var Y=G.next();!Y.done;Y=G.next())ne=n(ne,Y.value);ne&&(k.Gc[k.Hc]=ne,i=n(i,ne))}}(c)));return N(A,Promise.all(u),2)}i&&e.decodingInfos.push(i),$(A)})}function Uf(e){var t=[""];e.video&&(t=Po(e.video.contentType).split(","));var n=[""];e.audio&&(n=Po(e.audio.contentType).split(","));var i=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var c={},d=m(n),h=d.next();!h.done;c={Mb:c.Mb},h=d.next())h=h.value,c.Mb=Wa(e),e.video&&(c.Mb.video.contentType=Si(Ca(c.Mb.video.contentType),u)),e.audio&&(c.Mb.audio.contentType=Si(Ca(c.Mb.audio.contentType),h)),i.push(new Promise(function(E){return function(A,k){navigator.mediaCapabilities.decodingInfo(E.Mb).then(function(G){A(G)}).catch(k)}}(c)))}return Promise.all(i).catch(function(){return JSON.stringify(e),null})}function Fh(e,t,n,i){var u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:if(e.some(function(mt){return mt.decodingInfos.length}))return Ue.return();u={},c=m(i),d=c.next();case 2:if(d.done){Ue.u(4);break}u.oe=d.value,h=!1,E=m(e),A=E.next();case 5:if(A.done){Ue.u(7);break}k=A.value,G=_m(k,t,n).filter(function(mt){return function(Rt){return Rt=Rt[0],(Rt.keySystemConfiguration&&Rt.keySystemConfiguration.keySystem)===mt.oe}}(u)),ne=m(G),Y=ne.next();case 8:if(Y.done){Ue.u(10);break}return ve=Y.value,N(Ue,Em(k,ve),9);case 9:Y=ne.next(),Ue.u(8);break;case 10:k.decodingInfos.length&&(h=!0),A=E.next(),Ue.u(5);break;case 7:if(h)return Ue.return();u={oe:u.oe},d=c.next(),Ue.u(2);break;case 4:Pe=m(e),A=Pe.next();case 12:if(A.done){Ue.u(0);break}xe=A.value,Ge=_m(xe,t,n).filter(function(mt){return mt=mt[0],mt=mt.keySystemConfiguration&&mt.keySystemConfiguration.keySystem,!mt||!i.includes(mt)}),Te=m(Ge),Y=Te.next();case 15:if(Y.done){A=Pe.next(),Ue.u(12);break}return We=Y.value,N(Ue,Em(xe,We),16);case 16:Y=Te.next(),Ue.u(15)}})}function _m(e,t,n){var i=e.audio,u=e.video,c=[],d=[];if(u)for(var h=m(u.fullMimeTypes),E=h.next();!E.done;E=h.next()){E=E.value;var A=Po(E);if(A.includes(",")&&!i){var k=A.split(",");A=Uu("video",k),k=Uu("audio",k),k=Ku(k),k=Fs(Ca(E),k,"audio"),d.push({contentType:k,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(A=xl(A),E={contentType:Fs(Ca(E),A,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||1},u.hdr)switch(u.hdr){case"SDR":E.transferFunction="srgb";break;case"PQ":E.transferFunction="pq";break;case"HLG":E.transferFunction="hlg"}c.push(E)}if(i)for(h=m(i.fullMimeTypes),E=h.next();!E.done;E=h.next())E=E.value,A=Ku(Po(E)),E=Fs(Ca(E),A,"audio"),d.push({contentType:E,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio});for(h=[],c.length==0&&c.push(null),d.length==0&&d.push(null),c=m(c),E=c.next();!E.done;E=c.next())for(E=E.value,A=m(d),k=A.next();!k.done;k=A.next()){k=k.value;var G={type:n?"file":"media-source"};E&&(G.video=E),k&&(G.audio=k),h.push(G)}if(d=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!d.length)return[h];e=[],n=new Map,d=m(d);for(var ne=d.next();!ne.done;ne=d.next())c=ne.value,n.get(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c);for(d=t?"required":"optional",t=t?["persistent-license"]:["temporary"],c=m(n.keys()),E=c.next();!E.done;E=c.next()){for(E=E.value,A=[],k=m(h),G=k.next();!G.done;G=k.next()){G=Object.assign({},G.value);var Y=n.get(E),ve={keySystem:E,initDataType:"cenc",persistentState:d,distinctiveIdentifier:"optional",sessionTypes:t};for(Y=m(Y),ne=Y.next();!ne.done;ne=Y.next()){if(ne=ne.value,ne.initData&&ne.initData.length){for(var Pe=new Set,xe=m(ne.initData),Ge=xe.next();!Ge.done;Ge=xe.next())Pe.add(Ge.value.initDataType);ve.initDataType=ne.initData[0].initDataType}ne.distinctiveIdentifierRequired&&(ve.distinctiveIdentifier="required"),ne.persistentStateRequired&&(ve.persistentState="required"),ne.sessionType&&(ve.sessionTypes=[ne.sessionType]),i&&(ne.audioRobustness!=""?ve.audio?ve.audio.robustness=ve.audio.robustness||ne.audioRobustness:ve.audio={robustness:ne.audioRobustness}:ve.audio||(ve.audio={})),u&&(ne.videoRobustness!=""?ve.video?ve.video.robustness=ve.video.robustness||ne.videoRobustness:ve.video={robustness:ne.videoRobustness}:ve.video||(ve.video={}))}G.keySystemConfiguration=ve,A.push(G)}e.push(A)}return e}function Ku(e){return e.toLowerCase()=="flac"?_s()?"fLaC":"flac":e==="Opus"?"opus":e}function xl(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function bE(e){e.textStreams=e.textStreams.filter(function(t){return t=Si(t.mimeType,t.codecs),Rl(t)})}function Bf(e){var t,n,i,u,c,d,h;return Oe(function(E){switch(E.g){case 1:t=[],n=m(e.imageStreams),i=n.next();case 2:if(i.done){E.u(4);break}if(u=i.value,c=u.mimeType,c=="application/mp4"&&u.codecs=="mjpg"&&(c="image/jpg"),Yu.has(c)){E.u(5);break}if(d=NE.get(c),!d){Yu.set(c,!1),E.u(5);break}return N(E,CE(d),7);case 7:h=E.h,Yu.set(c,h);case 5:Yu.get(c)&&t.push(u),i=n.next(),E.u(2);break;case 4:e.imageStreams=t,$(E)}})}function CE(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Ml(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,u=n?n.mimeType:null,c=t?t.codecs:null,d=n?n.codecs:null,h=[];d&&h.push(d),c&&h.push(c);var E=[];n&&E.push(n.mimeType),t&&E.push(t.mimeType),E=E[0]||null;var A=[];t&&A.push(t.kind),n&&A.push(n.kind),A=A[0]||null;var k=new Set;if(t)for(var G=m(t.roles),ne=G.next();!ne.done;ne=G.next())k.add(ne.value);if(n)for(G=m(n.roles),ne=G.next();!ne.done;ne=G.next())k.add(ne.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:A,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:E,audioMimeType:i,videoMimeType:u,codecs:h.join(", "),audioCodec:c,videoCodec:d,primary:e.primary,roles:Array.from(k),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.videoLayout=n.videoLayout||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Dl(e){return{id:e.id,active:!1,type:vr,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Vu(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=e.segmentIndex.get(0));var u=e.tilesLayout;return i&&(u=i.tilesLayout||u),u&&t!=null&&(t/=Number(u.split("x")[0])),u&&n!=null&&(n/=Number(u.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:u||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function bc(e){return e.__shaka_id||(e.__shaka_id=RE++),e.__shaka_id}function Tm(e){var t=Sm(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Pl(e){var t=Sm(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Sm(e){var t=e.language;return{id:bc(e),active:!1,type:"",bandwidth:0,language:Cr(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function jf(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Zf(e){return e.filter(function(t){return jf(t)})}function Cc(e,t,n,i){var u=e,c=e.filter(function(E){return E.primary});c.length&&(u=c);var d=u.length?u[0].language:"";if(u=u.filter(function(E){return E.language==d}),t){var h=Nl(Cr(t),e.map(function(E){return E.language}));h&&(u=e.filter(function(E){return Cr(E.language)==h}))}if(u=u.filter(function(E){return E.forced==i}),n){if(e=zu(u,n),e.length)return e}else if(e=u.filter(function(E){return E.roles.length==0}),e.length)return e;return e=u.map(function(E){return E.roles}).reduce(hm,[]),e.length?zu(u,e[0]):u}function zu(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Gf(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}te("shaka.util.StreamUtils",Ac),Ac.meetsRestrictions=kf;var Uh={},RE=0,Yu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),NE=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Hr(){var e=this;this.s=null,this.o=!1,this.i=new K,this.F=new _t,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=[],this.B=1,this.G=!1,this.h=this.l=this.g=this.A=null,this.C=new pr(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.j=null}g=Hr.prototype,g.stop=function(){this.s=null,this.o=!1,this.m=[],this.B=1,this.l=this.A=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.j=null},g.release=function(){this.F.release(),this.C=null},g.init=function(e){this.s=e},g.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio,t=p.screen.height*n,n*=p.screen.width),this.h&&this.g.restrictToElementSize){var i=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio;t=Math.min(t,this.l.clientHeight*i),n=Math.min(n,this.l.clientWidth*i)}var u=this.m.filter(function(A){return!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)});if(u.length||(u=this.m),i=u,e&&u.length!=this.m.length&&(i=this.m.filter(function(A){return!!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)})),e=Bh(this,this.g.restrictions,i,1/0,1/0),t!=1/0||n!=1/0){for(e=Hf(e),e=m(e),u=e.next();!u.done;u=e.next())if(u=u.value,u.height>=t&&u.width>=n){t=u.height,n=u.width;break}e=Bh(this,this.g.restrictions,i,t,n)}for(t=this.getBandwidthEstimate(),i.length&&!e.length&&(e=Bh(this,null,i,1/0,1/0),e=[e[0]]),n=e[0]||null,i=0;i<e.length;i++){u=e[i];for(var c=isNaN(this.B)?1:Math.abs(this.B),d=c*u.bandwidth/this.g.bandwidthDowngradeTarget,h={bandwidth:1/0},E=i+1;E<e.length;E++)if(u.bandwidth!=e[E].bandwidth){h=e[E];break}c=c*h.bandwidth/this.g.bandwidthUpgradeTarget,t>=d&&t<=c&&n.bandwidth!=u.bandwidth&&(n=u)}return this.A=Date.now(),n},g.enable=function(){this.o=!0},g.disable=function(){this.o=!1},g.segmentDownloaded=function(e,t,n){this.i.sample(e,t),n&&this.A!=null&&this.o&&qf(this)},g.trySuggestStreams=function(){this.A!=null&&this.o&&qf(this)},g.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.j?this.j.getBandwidthEstimate(e):e},g.setVariants=function(e){this.m=e},g.playbackRateChanged=function(e){this.B=e},g.setMediaElement=function(e){var t=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in p&&(this.h=new ResizeObserver(function(){t.C.X(xE)}),this.h.observe(this.l))},g.setCmsdManager=function(e){this.j=e},g.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function qf(e){if(e.G){if(Date.now()-e.A<1e3*e.g.switchInterval)return}else{var t=e.i;if(!(t.g>=t.i))return;e.G=!0}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function Bh(e,t,n,i,u){if(e.j){var c=e.j.dg();c&&(n=n.filter(function(d){return d.bandwidth&&c?d.bandwidth<=c:!0}))}return t&&(n=n.filter(function(d){return kf(d,t,{width:u,height:i})})),n.sort(function(d,h){return d.bandwidth-h.bandwidth})}function Hf(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(i,u){return i.width-u.width})}te("shaka.abr.SimpleAbrManager",Hr),Hr.prototype.configure=Hr.prototype.configure,Hr.prototype.setCmsdManager=Hr.prototype.setCmsdManager,Hr.prototype.setMediaElement=Hr.prototype.setMediaElement,Hr.prototype.playbackRateChanged=Hr.prototype.playbackRateChanged,Hr.prototype.setVariants=Hr.prototype.setVariants,Hr.prototype.getBandwidthEstimate=Hr.prototype.getBandwidthEstimate,Hr.prototype.trySuggestStreams=Hr.prototype.trySuggestStreams,Hr.prototype.segmentDownloaded=Hr.prototype.segmentDownloaded,Hr.prototype.disable=Hr.prototype.disable,Hr.prototype.enable=Hr.prototype.enable,Hr.prototype.chooseVariant=Hr.prototype.chooseVariant,Hr.prototype.init=Hr.prototype.init,Hr.prototype.release=Hr.prototype.release,Hr.prototype.stop=Hr.prototype.stop;var xE=1;te("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),te("shaka.config.CodecSwitchingStrategy",{hj:"reload",Og:"smooth"});function Rc(e,t,n,i){for(n=n===void 0?!0:n,i=i===void 0?!1:i,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,i)}Rc.prototype.add=function(e,t,n){return wm(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function wm(e,t,n,i){var u;if(!(u=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(u=e.audio&&t.audio)){u=e.audio;var c=t.audio;u=!!((!u.channelsCount||!c.channelsCount||2<u.channelsCount||2<c.channelsCount)&&u.channelsCount!=c.channelsCount||n&&!jh(u,c)||!Am(u.roles,c.roles)||i&&u.groupId!==c.groupId)}return!(i=u)&&(i=e.video&&t.video)&&(e=e.video,t=t.video,i=!((!n||jh(e,t))&&Am(e.roles,t.roles))),!i}Rc.prototype.values=function(){return this.g.values()};function jh(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(i){return Ya(i)}),t=t.codecs.split(",").map(function(i){return Ya(i)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Am(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Zh(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Ol(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}Zh.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Un(),i=e.filter(function(u){return wm(t.i,u,!n,t.g)});return i.length?new Rc(i[0],i,!n,this.g):this.j.create(e)};function Ol(e,t,n,i,u,c,d,h,E,A){this.s=e,this.A=t,this.h=n,this.i=i,this.B=u,this.l=c,this.g=d===void 0?"":d,this.j=h===void 0?"":h,this.m=E===void 0?"reload":E,this.o=A===void 0?!1:A}Ol.prototype.create=function(e){var t=[];t=Im(e,this.s);var n=e.filter(function(i){return i.primary});return t=t.length?t:n.length?n:e,e=bm(t,this.A),e.length&&(t=e),this.l&&(e=Rm(t,this.l),e.length&&(t=e)),this.i&&(e=PE(t,this.i),e.length&&(t=e)),this.h&&(e=Cm(t,this.h),e.length&&(t=e)),this.g&&(e=ME(t,this.g),e.length&&(t=e)),this.j&&(e=DE(t,this.j),e.length&&(t=e)),e=OE(t,this.B),e.length&&(t=e),new Rc(t[0],t,!(this.m=="smooth"&&Un()),this.o)};function Im(e,t){t=Cr(t);var n=Nl(t,e.map(function(i){return Hu(i)}));return n?e.filter(function(i){return n==Hu(i)}):[]}function bm(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function ME(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function DE(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function Cm(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function PE(e,t){return t=="AUTO"&&(t=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function Rm(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function OE(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Gh(){this.g=Nc,this.i=new Map().set(Nc,2).set(Ll,1),this.h=0}function qh(e,t,n){e.i.set(Nc,n).set(Ll,t)}var Ll=0,Nc=1;function Hh(e,t){var n=la();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function Kh(e){var t,n;return Oe(function(i){if(i.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new pt(2,7,1010);return t=e.g,e.g++,t==0?i.return():(n=e.h*(1+(2*Math.random()-1)*e.o),N(i,new Promise(function(u){new pr(u).X(n/1e3)}),2))}e.h*=e.m,$(i)})}function la(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Rr(){var e,t,n=new Promise(function(i,u){e=i,t=u});return n.resolve=e,n.reject=t,n}Rr.prototype.resolve=function(){},Rr.prototype.reject=function(){};function pi(e,t){this.promise=e,this.i=t,this.g=!1}function gu(e){return new pi(Promise.reject(e),function(){return Promise.resolve()})}function Vh(){var e=Promise.reject(new pt(2,7,7001));return e.catch(function(){}),new pi(e,function(){return Promise.resolve()})}function Wu(e){return new pi(Promise.resolve(e),function(){return Promise.resolve()})}function Nm(e){return new pi(e,function(){return e.catch(function(){})})}pi.prototype.abort=function(){return this.g=!0,this.i()};function Kf(e){return new pi(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}pi.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},pi.prototype.va=function(e,t){function n(h){return function(E){if(u.g&&h)c.reject(d);else{var A=h?e:t;A?i=zh(A,E,c):(h?c.resolve:c.reject)(E)}}}function i(){return c.reject(d),u.abort()}var u=this,c=new Rr,d=new pt(2,7,7001);return this.promise.then(n(!0),n(!1)),new pi(c,function(){return i()})};function zh(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(u){return n.reject(u),function(){return Promise.resolve()}}}te("shaka.util.AbortableOperation",pi),pi.prototype.chain=pi.prototype.va,pi.prototype.finally=pi.prototype.finally,pi.all=Kf,pi.prototype.abort=pi.prototype.abort,pi.notAbortable=Nm,pi.completed=Wu,pi.aborted=Vh,pi.failed=gu;function Wn(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:t.get(i),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=p.performance&&p.performance.now?p.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function xm(e){var t=new Wn(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Wn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Wn.prototype.stopImmediatePropagation=function(){this.g=!0},Wn.prototype.stopPropagation=function(){},te("shaka.util.FakeEvent",Wn);var xc={Ii:"abrstatuschanged",Ji:"adaptation",Ki:"buffering",Li:"complete",Mi:"downloadfailed",Ni:"downloadheadersreceived",Oi:"drmsessionupdate",Qi:"emsg",gj:"prft",Error:"error",Ri:"expirationupdated",Si:"firstquartile",Ti:"gapjumped",Wi:"keystatuschanged",Yi:"loaded",Zi:"loading",aj:"manifestparsed",bj:"manifestupdated",cj:"mediaqualitychanged",Metadata:"metadata",dj:"midpoint",ej:"nospatialvideoinfo",fj:"onstatechange",ij:"ratechange",jj:"segmentappended",kj:"sessiondata",lj:"spatialvideoinfo",mj:"stalldetected",nj:"started",oj:"statechanged",pj:"streaming",qj:"textchanged",rj:"texttrackvisibility",sj:"thirdquartile",tj:"timelineregionadded",uj:"timelineregionenter",vj:"timelineregionexit",wj:"trackschanged",yj:"unloading",Aj:"variantchanged"};function Sr(){this.ia=new yt,this.Ud=this}Sr.prototype.addEventListener=function(e,t){this.ia&&this.ia.push(e,t)},Sr.prototype.removeEventListener=function(e,t){this.ia&&this.ia.remove(e,t)},Sr.prototype.dispatchEvent=function(e){if(!this.ia)return!0;var t=this.ia.get(e.type)||[],n=this.ia.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Ud,e.currentTarget=this.Ud;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(i){}if(e.g)break}return e.defaultPrevented},Sr.prototype.release=function(){this.ia=null};function kl(){this.g=[]}function mu(e,t){e.g.push(t.finally(function(){mn(e.g,t)}))}kl.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Kr(e,t,n,i,u,c){Sr.call(this),this.i=!1,this.m=new kl,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.A=i||null,this.C=u||null,this.B=c||null,this.o=!1}z(Kr,Sr),g=Kr.prototype,g.Cf=function(e){this.o=e};function Ko(e,t,n,i){n=n||$h;var u=Dc[e];(!u||n>=u.priority)&&(Dc[e]={priority:n,ge:t,bi:i===void 0?!1:i})}g.ei=function(e){this.g.add(e)},g.Bi=function(e){this.g.delete(e)},g.$g=function(){this.g.clear()},g.fi=function(e){this.h.add(e)},g.Ci=function(e){this.h.delete(e)},g.ah=function(){this.h.clear()};function Li(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}g.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Sr.prototype.release.call(this),this.m.destroy()},g.request=function(e,t,n){var i=this,u=new Wh;if(this.i){var c=Promise.reject(new pt(2,7,7001));return c.catch(function(){}),new Mc(c,function(){return Promise.resolve()},u)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Wa(t.retryParameters):la(),t.uris=Wa(t.uris),c=Mm(this,e,t,n);var d=c.va(function(){return Yh(i,e,t,n,new Hh(t.retryParameters,!1),0,null,u)}),h=d.va(function(ne){return LE(i,e,ne,n)}),E=Date.now(),A=0;c.promise.then(function(){A=Date.now()-E},function(){});var k=0;d.promise.then(function(){k=Date.now()},function(){});var G=h.va(function(ne){var Y=Date.now()-k,ve=ne.response;return ve.timeMs+=A,ve.timeMs+=Y,ne.Ih||!i.l||ve.fromCache||t.method=="HEAD"||e!=$a||i.l(ve.timeMs,ve.data.byteLength,Dm(n)),i.B&&i.B(e,ve,n),ve},function(ne){throw ne&&(ne.severity=2),ne});return c=new Mc(G.promise,function(){return G.abort()},u),mu(this.m,c),c};function Mm(e,t,n,i){function u(h){c=c.va(function(){return n.body&&(n.body=Ti(n.body)),h(t,n,i)})}var c=Wu(void 0);e.A&&u(e.A),e=m(e.g);for(var d=e.next();!d.done;d=e.next())u(d.value);return c.va(void 0,function(h){throw h instanceof pt&&h.code==7001?h:new pt(2,1,1006,h)})}function Yh(e,t,n,i,u,c,d,h){e.o&&(n.uris[c]=n.uris[c].replace("http://","https://")),0<c&&e.C&&e.C(t,i,n.uris[c],n.uris[c-1]);var E=new si(n.uris[c]),A=E.kb,k=!1;A||(A=location.protocol,A=A.slice(0,-1),Os(E,A),n.uris[c]=E.toString()),A=A.toLowerCase();var G=(A=Dc[A])?A.ge:null;if(!G)return gu(new pt(2,1,1e3,E));var ne=A.bi,Y=null,ve=null,Pe=!1,xe=!1,Ge;return Nm(Kh(u)).va(function(){if(e.i)return Vh();Ge=Date.now();var Te=0;n.requestStartTime=Date.now();var We=G(n.uris[c],n,t,function(Rt,Ht,Ut){Y&&Y.stop(),ve&&ve.X(mt/1e3),e.l&&t==$a&&(Te++,n.packetNumber=Te,e.l(Rt,Ht,Dm(i),n),k=!0,h.g=Ut)},function(Rt){e.j&&e.j(Rt,n,t),xe=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!ne)return We;var Ue=n.retryParameters.connectionTimeout;Ue&&(Y=new pr(function(){Pe=!0,We.abort()}),Y.X(Ue/1e3));var mt=n.retryParameters.stallTimeout;return mt&&(ve=new pr(function(){Pe=!0,We.abort()})),We}).va(function(Te){Y&&Y.stop(),ve&&ve.stop(),Te.timeMs==null&&(Te.timeMs=Date.now()-Ge);var We={response:Te,Ih:k};return!xe&&e.j&&e.j(Te.headers,n,t),We},function(Te){if(Y&&Y.stop(),ve&&ve.stop(),e.s){var We=null,Ue=0;Te instanceof pt&&(We=Te,Te.code==1001&&(Ue=Te.data[1])),e.s(n,We,Ue,Pe)}if(e.i)return Vh();if(Pe&&(Te=new pt(1,1,1003,n.uris[c],t)),Te instanceof pt){if(Te.code==7001)throw Te;if(Te.code==1010)throw d;if(Te.severity==1)return We=new Map().set("error",Te),We=new Wn("retry",We),e.dispatchEvent(We),c=(c+1)%n.uris.length,Yh(e,t,n,i,u,c,Te,h)}throw Te})}function LE(e,t,n,i){var u=Wu(void 0),c={};e=m(e.h);for(var d=e.next();!d.done;c={qe:c.qe},d=e.next())c.qe=d.value,u=u.va(function(h){return function(){var E=n.response;return E.data&&(E.data=Ti(E.data)),h.qe(t,E,i)}}(c));return u.va(function(){return n},function(h){var E=2;if(h instanceof pt){if(h.code==7001)throw h;E=h.severity}throw new pt(E,1,1007,h)})}function Dm(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.md)return!1}return!0}te("shaka.net.NetworkingEngine",Kr),Kr.prototype.request=Kr.prototype.request,Kr.prototype.destroy=Kr.prototype.destroy,Kr.makeRequest=Li,Kr.defaultRetryParameters=function(){return la()},Kr.prototype.clearAllResponseFilters=Kr.prototype.ah,Kr.prototype.unregisterResponseFilter=Kr.prototype.Ci,Kr.prototype.registerResponseFilter=Kr.prototype.fi,Kr.prototype.clearAllRequestFilters=Kr.prototype.$g,Kr.prototype.unregisterRequestFilter=Kr.prototype.Bi,Kr.prototype.registerRequestFilter=Kr.prototype.ei,Kr.unregisterScheme=function(e){delete Dc[e]},Kr.registerScheme=Ko,Kr.prototype.setForceHTTPS=Kr.prototype.Cf;function Wh(){this.g=0}Kr.NumBytesRemainingClass=Wh;function Mc(e,t,n){pi.call(this,e,t),this.h=n}z(Mc,pi),Kr.PendingRequest=Mc;var $a=1;Kr.RequestType={MANIFEST:0,SEGMENT:$a,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Kr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var $h=3;Kr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:$h};var Dc={};function $u(e){this.g=!1,this.h=new Rr,this.i=e}$u.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function jr(e,t){if(e.g)throw t instanceof pt&&t.code==7003?t:new pt(2,7,7003,t)}function Vf(e,t){var n=[];e=m(e);for(var i=e.next();!i.done;i=e.next())n.push(t(i.value));return n}function kE(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Fl(e){for(var t=new Map,n=m(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Pc(e){var t={};return e.forEach(function(n,i){t[i]=n}),t}function Dr(e,t){this.h=tn(e),this.i=t==Pm,this.g=0}g=Dr.prototype,g.ka=function(){return this.g<this.h.byteLength},g.wa=function(){return this.g},g.getLength=function(){return this.h.byteLength},g.P=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw Bs()}},g.ra=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw Bs()}},g.M=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw Bs()}},g.sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw Bs()}},g.Cc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw Bs()}if(2097151<t)throw new pt(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},g.sb=function(e){if(this.g+e>this.h.byteLength)throw Bs();var t=Qn(this.h,this.g,e);return this.g+=e,t},g.skip=function(e){if(this.g+e>this.h.byteLength)throw Bs();this.g+=e},g.mi=function(e){if(this.g<e)throw Bs();this.g-=e},g.seek=function(e){if(0>e||e>this.h.byteLength)throw Bs();this.g=e},g.hc=function(){for(var e=this.g;this.ka()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Qn(this.h,e,this.g-e),this.g+=1,Vr(e)};function Bs(){return new pt(2,3,3e3)}te("shaka.util.DataViewReader",Dr),Dr.prototype.readTerminatedString=Dr.prototype.hc,Dr.prototype.seek=Dr.prototype.seek,Dr.prototype.rewind=Dr.prototype.mi,Dr.prototype.skip=Dr.prototype.skip,Dr.prototype.readBytes=Dr.prototype.sb,Dr.prototype.readUint64=Dr.prototype.Cc,Dr.prototype.readInt32=Dr.prototype.sg,Dr.prototype.readUint32=Dr.prototype.M,Dr.prototype.readUint16=Dr.prototype.ra,Dr.prototype.readUint8=Dr.prototype.P,Dr.prototype.getLength=Dr.prototype.getLength,Dr.prototype.getPosition=Dr.prototype.wa,Dr.prototype.hasMoreData=Dr.prototype.ka;var Pm=1;Dr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Pm};function kr(){this.i=[],this.h=[],this.g=!1}g=kr.prototype,g.box=function(e,t){return e=Om(e),this.i[e]=FE,this.h[e]=t,this},g.O=function(e,t){return e=Om(e),this.i[e]=Lm,this.h[e]=t,this},g.stop=function(){this.g=!0},g.parse=function(e,t,n){for(e=new Dr(e,0),this.g=!1;e.ka()&&!this.g;)this.Ac(0,e,t,n)},g.Ac=function(e,t,n,i){var u=t.wa();if(i&&u+8>t.getLength())this.g=!0;else{var c=t.M(),d=t.M(),h=zf(d),E=!1;switch(c){case 0:c=t.getLength()-u;break;case 1:if(i&&t.wa()+8>t.getLength()){this.g=!0;return}c=t.Cc(),E=!0}var A=this.h[d];if(A){var k=null,G=null;if(this.i[d]==Lm){if(i&&t.wa()+4>t.getLength()){this.g=!0;return}G=t.M(),k=G>>>24,G&=16777215}d=u+c,n&&d>t.getLength()&&(d=t.getLength()),i&&d>t.getLength()?this.g=!0:(i=d-t.wa(),t=0<i?t.sb(i):new Uint8Array(0),t=new Dr(t,0),A({name:h,parser:this,partialOkay:n||!1,version:k,flags:G,reader:t,size:c,start:u+e,has64BitSize:E}))}else t.skip(Math.min(u+c-t.wa(),t.getLength()-t.wa()))}};function yr(e){for(var t=Ul(e);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function vu(e){for(var t=Ul(e),n=e.reader.M(),i=0;i<n&&(e.parser.Ac(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function wi(e){var t=Ul(e);for(e.reader.skip(78);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function Xh(e){var t=Ul(e);e.reader.skip(8);var n=e.reader.ra();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function Xu(e){return function(t){e(t.reader.sb(t.reader.getLength()-t.reader.wa()))}}function Om(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function zf(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Ul(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}te("shaka.util.Mp4Parser",kr),kr.headerSize=Ul,kr.typeToString=zf,kr.allData=Xu,kr.audioSampleEntry=Xh,kr.visualSampleEntry=wi,kr.sampleDescription=vu,kr.children=yr,kr.prototype.parseNext=kr.prototype.Ac,kr.prototype.parse=kr.prototype.parse,kr.prototype.stop=kr.prototype.stop,kr.prototype.fullBox=kr.prototype.O,kr.prototype.box=kr.prototype.box;var FE=0,Lm=1;function km(e){var t=this;this.g=[],this.h=[],this.data=[],new kr().box("moov",yr).box("moof",yr).O("pssh",function(n){if(!(1<n.version)){var i=Qn(n.reader.h,-12,n.size);if(t.data.push(i),t.g.push(ks(n.reader.sb(16))),0<n.version){i=n.reader.M();for(var u=0;u<i;u++){var c=ks(n.reader.sb(16));t.h.push(c)}}}}).parse(e)}function Yf(e,t,n,i){var u=e.length,c=t.length+16+u;0<i&&(c+=4+16*n.size);var d=new Uint8Array(c),h=tn(d),E=0;if(h.setUint32(E,c),E+=4,h.setUint32(E,1886614376),E+=4,1>i?h.setUint32(E,0):h.setUint32(E,16777216),E+=4,d.set(t,E),E+=t.length,0<i)for(h.setUint32(E,n.size),E+=4,t=m(n),n=t.next();!n.done;n=t.next())n=hu(n.value),d.set(n,E),E+=n.length;return h.setUint32(E,u),d.set(e,E+4),d}function Qh(e,t){return e=Va(e),Bl(e,t)}function Bl(e,t){return e=UE(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function Oc(e){return kc.has(e)?kc.get(e):""}function UE(e){function t(u,c){c=c===void 0?!1:c;for(var d=[];e[i];)if(e.charCodeAt(i)==60){if(e.charCodeAt(i+1)===47){c=i+2,i=e.indexOf(">",i),c=e.substring(c,i);var h=c.indexOf(u);if(h==-1){var E=u.indexOf(".");0<E&&(h=c.indexOf(u.substring(0,E)))}if(h==-1)throw u=e.substring(0,i).split("\n"),Error("Unexpected close tag\nLine: "+(u.length-1)+"\nColumn: "+(u[u.length-1].length+1)+"\nChar: "+e[i]);i+1&&(i+=1);break}else if(e.charCodeAt(i+1)===33){if(e.charCodeAt(i+2)==45){for(;i!==-1&&(e.charCodeAt(i)!==62||e.charCodeAt(i-1)!=45||e.charCodeAt(i-2)!=45||i==-1);)i=e.indexOf(">",i+1);i===-1&&(i=e.length)}else if(e.charCodeAt(i+2)===91&&e.charCodeAt(i+8)===91&&e.substr(i+3,5).toLowerCase()==="cdata"){h=e.indexOf("]]>",i),h==-1?(d.push(e.substr(i+9)),i=e.length):(d.push(e.substring(i+9,h)),i=h+3);continue}i++;continue}e:{E=c,i++;var A=n(),k={};for(h=[];e.charCodeAt(i)!==62&&e[i];){var G=e.charCodeAt(i);if(64<G&&91>G||96<G&&123>G){G=n();for(var ne=e.charCodeAt(i);ne&&ne!==39&&ne!==34&&!(64<ne&&91>ne||96<ne&&123>ne)&&ne!==62;)i++,ne=e.charCodeAt(i);var Y=i+1;if(i=e.indexOf(e[i],Y),Y=e.slice(Y,i),ne===39||ne===34){if(i===-1){for(E={tagName:A,attributes:k,children:h,parent:null},A=0;A<h.length;A++)typeof h[A]!="string"&&(h[A].parent=E);h=E;break e}}else Y=null,i--;G.startsWith("xmlns:")&&kc.set(Y,G.split(":")[1]),A==="tt"&&G==="xml:space"&&Y==="preserve"&&(E=!0),k[G]=Y}i++}for(e.charCodeAt(i-1)!==47?(i++,h=t(A,E)):i++,E={tagName:A,attributes:k,children:h,parent:null},A=h.length,k=0;k<A;k++)G=h[k],typeof G!="string"?G.parent=E:k==A-1&&G=="\n"&&h.pop();h=E}if(d.push(h),typeof h=="string")break;h.tagName[0]==="?"&&h.children&&(d.push.apply(d,T(h.children)),h.children=[])}else h=i,i=e.indexOf("<",i)-1,i===-2&&(i=e.length),h=e.slice(h,i+1),c?0<h.length&&d.push(h):(d.length&&h.length==1&&h[0]=="\n"||0<h.trim().length)&&d.push(h),i++;return d}function n(){for(var u=i;"\r\n	>/= ".indexOf(e[i])===-1&&e[i];)i++;return e.slice(u,i)}var i=0;return t("")}function Wf(e){return typeof e=="string"}function BE(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Wr(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var i=e.next();!i.done;i=e.next())i=i.value,i.tagName===t&&n.push(i);return n}function Ri(e){return typeof e=="string"?Co(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:Co(e))}function yu(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Ri(e))&&(e=e.trim()),e):null}function Ra(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var i=e.next();!i.done;i=e.next())Ra(i.value,t,n)}return n}function ca(e,t){return e=Wr(e,t),e.length!=1?null:e[0]}function js(e,t,n){return e=$f(e,t,n),e.length!=1?null:e[0]}function _r(e,t,n,i){i=i===void 0?null:i;var u=null;return e=e.attributes[t],e!=null&&(u=n(e)),u==null?i:u}function Eu(e,t,n){return t=Oc(t),e.attributes[t+":"+n]||null}function $f(e,t,n){t=Oc(t);var i=[];if(e.children){e=m(e.children);for(var u=e.next();!u.done;u=e.next())(u=u.value)&&u.tagName===t+":"+n&&i.push(u)}return i}function fa(e,t,n){t=m(t);for(var i=t.next();!i.done;i=t.next())if(i=Eu(e,i.value,n))return i;return null}function Xf(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Xa(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Qf(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Qu(e){return e=Number(e),e%1===0?e:null}function Zs(e){return e=Number(e),e%1===0&&0<e?e:null}function No(e){return e=Number(e),e%1===0&&0<=e?e:null}function Lc(e){return e=Number(e),isNaN(e)?null:e}function Jh(e){return e?e.toLowerCase()==="true":!1}function Fm(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function ep(e,t,n){t=t===void 0?!0:t,n=n===void 0?!0:n;var i=document.createElement(e.tagName),u;for(u in e.attributes)i.setAttribute(u,e.attributes[u]);if(t&&e.parent&&e.parent.tagName!="?xml"&&ep(e.parent,!0,!1).appendChild(i),n)for(e=m(e.children),t=e.next();!t.done;t=e.next())t=t.value,n=void 0,typeof t=="string"?n=new Text(t):n=ep(t,!1,!0),i.appendChild(n);return i}var kc=new Map([]);function Fc(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.ia=this.da=!1,this.I=0,this.g=null,this.B=new _t,this.i=new Map,this.A=new Map,this.l=new Rr,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.aa=new Map,this.ea=new Map,this.L=new pr(function(){return V(t)}),this.T=!1,this.N=[],this.Y=!1,this.K=new pr(function(){Ee(t)}),this.l.catch(function(){}),this.j=new $u(function(){return jE(t)}),this.ba=!1,this.F=this.G=null}g=Fc.prototype,g.destroy=function(){return this.j.destroy()};function jE(e){return Oe(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,N(t,H(e),2);case 2:if(!e.m){t.u(3);break}return fe(t,4),N(t,e.m.setMediaKeys(null),6);case 6:he(t,5);break;case 4:Ie(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,$(t)}})}g.configure=function(e){this.h=e,this.K&&this.K.$a(this.h.updateExpirationTime)};function Um(e,t,n){return e.ia=!0,e.A=new Map,e.T=n,Zm(e,t)}function Bm(e,t,n){e.A=new Map,n=m(n);for(var i=n.next();!i.done;i=n.next())e.A.set(i.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),i=n.next();!i.done;i=n.next())i=i.value,e.A.set(i.sessionId,{initData:i.initData,initDataType:i.initDataType});return e.T=0<e.A.size,Zm(e,t)}function jm(e,t,n,i,u,c){var d=new Map;return u={audioCapabilities:u,videoCapabilities:c,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},u.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],d.set(t,u),ip(e,d,[])}function Zm(e,t){var n,i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te;return Oe(function(We){if(We.g==1){if(n=HE(e))for(i=m(t),u=i.next();!u.done;u=i.next())c=u.value,c.video&&(c.video.drmInfos=[n]),c.audio&&(c.audio.drmInfos=[n]);for(d=t.some(function(Ue){return!!(Ue.video&&Ue.video.drmInfos.length||Ue.audio&&Ue.audio.drmInfos.length)}),d||(h=Fl(e.h.servers),ge(t,h)),E=new Set,A=m(t),u=A.next();!u.done;u=A.next())for(k=u.value,G=Se(k),ne=m(G),Y=ne.next();!Y.done;Y=ne.next())ve=Y.value,E.add(ve);for(Pe=m(E),Y=Pe.next();!Y.done;Y=Pe.next())xe=Y.value,De(xe,Fl(e.h.servers),Fl(e.h.advanced||{}),e.h.keySystemsMapping);return N(We,Fh(t,e.T,e.ba,e.h.preferredKeySystems),2)}return Ge=d||Object.keys(e.h.servers).length,Ge?(Te=ip(e,void 0,t),We.return(d?Te:Te.catch(function(){}))):(e.da=!0,We.return(Promise.resolve()))})}function tp(e){var t;return Oe(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return N(n,e.G,3);case 3:return jr(e.j),n.return();case 2:return fe(n,4),e.G=e.m.setMediaKeys(e.s),N(n,e.G,6);case 6:he(n,5);break;case 4:t=Ie(n),e.o(new pt(2,6,6003,t.message));case 5:jr(e.j),$(n)}})}function ZE(e,t){return Oe(function(n){if(n.g==1)return N(n,tp(e),2);jl(e,t.initDataType,Qn(t.initData)),$(n)})}g.Vc=function(e){var t=this;return Oe(function(n){if(n.g==1)return t.s?(t.m=e,t.B.na(t.m,"play",function(){for(var i=m(t.N),u=i.next();!u.done;u=i.next())P(t,u.value);t.Y=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return H(t)}),t.F=t.g&&t.g.initData.find(function(i){return 0<i.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?N(n,tp(t),2):n.u(2)):(t.B.na(e,"encrypted",function(){t.o(new pt(2,6,6010))}),n.return());np(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(i){return ZE(t,i)}),$(n)})};function Gm(e){var t,n,i,u,c;return Oe(function(d){switch(d.g){case 1:if(!e.s||!e.g)return d.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){d.u(2);break}return t=Li([e.g.serverCertificateUri],e.h.retryParameters),fe(d,3),n=e.C.zb.request(5,t),N(d,n.promise,5);case 5:i=d.h,e.g.serverCertificate=Qn(i.data),he(d,4);break;case 3:throw u=Ie(d),new pt(2,6,6017,u);case 4:if(e.j.g)return d.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?d.return():(fe(d,6),N(d,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:he(d,0);break;case 6:throw c=Ie(d),new pt(2,6,6004,c.message)}})}function GE(e,t){var n,i,u;return Oe(function(c){if(c.g==1)return N(c,Km(e,t,{initData:null,initDataType:null}),2);if(c.g!=3)return n=c.h,n?(i=[],(u=e.i.get(n))&&(u.ab=new Rr,i.push(u.ab)),i.push(n.remove()),N(c,Promise.all(i),3)):c.return();e.i.delete(n),$(c)})}function np(e){var t,n,i,u,c;return Oe(function(d){if(d.g==1)return e.A.size?(e.A.forEach(function(h,E){Km(e,E,h)}),N(d,e.l,3)):d.u(2);if(d.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&me(e))return d.return(e.l);e.l=new Rr,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],i=m(n),u=i.next();!u.done;u=i.next())c=u.value,jl(e,c.initDataType,c.initData);return ie(e)&&e.l.resolve(),d.return(e.l)})}function jl(e,t,n){if(n.length){var i=e.i.values();i=m(i);for(var u=i.next();!u.done;u=i.next())if(zi(n,u.value.initData)&&e.h.ignoreDuplicateInitData)return;0<e.i.size&&ie(e)&&(e.l.resolve(),e.l=new Rr,e.l.catch(function(){})),L(e,t,n,e.g.sessionType)}}function qm(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function rp(e){return e=e.i.keys(),e=Vf(e,function(t){return t.sessionId}),Array.from(e)}g.Se=function(){var e=this,t=this.i.keys();return t=Vf(t,function(n){var i=e.i.get(n);return{sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType}}),Array.from(t)},g.cd=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},g.Kd=function(){return Pc(this.ea)};function ip(e,t,n){var i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge;return Oe(function(Te){switch(Te.g){case 1:if(i=new Map,n.length){u=qE(e,n,i),Te.u(2);break}return N(Te,Hm(e,t),3);case 3:u=Te.h;case 2:if(c=u,!c)throw new pt(2,6,6001);for(jr(e.j),fe(Te,4),e.H.clear(),d=c.getConfiguration(),h=d.audioCapabilities||[],E=d.videoCapabilities||[],A=m(h),k=A.next();!k.done;k=A.next())G=k.value,e.H.add(G.contentType.toLowerCase());for(ne=m(E),k=ne.next();!k.done;k=ne.next())Y=k.value,e.H.add(Y.contentType.toLowerCase());if(n.length){var We=c.keySystem,Ue=i.get(c.keySystem),mt=[],Rt=[],Ht=[],Ut=[],Et=[],jt=new Set;qe(Ue,mt,Rt,Ut,Ht,Et,jt);var ln=e.T?"persistent-license":"temporary";for(We={keySystem:We,encryptionScheme:mt[0],licenseServerUri:Rt[0],distinctiveIdentifierRequired:Ue[0].distinctiveIdentifierRequired,persistentStateRequired:Ue[0].persistentStateRequired,sessionType:Ue[0].sessionType||ln,audioRobustness:Ue[0].audioRobustness||"",videoRobustness:Ue[0].videoRobustness||"",serverCertificate:Ut[0],serverCertificateUri:Ht[0],initData:Et,keyIds:jt},Ue=m(Ue),mt=Ue.next();!mt.done;mt=Ue.next())mt=mt.value,mt.distinctiveIdentifierRequired&&(We.distinctiveIdentifierRequired=mt.distinctiveIdentifierRequired),mt.persistentStateRequired&&(We.persistentStateRequired=mt.persistentStateRequired);Ue=We}else Ue=c.keySystem,We=t.get(c.keySystem),mt=[],Rt=[],Ht=[],Ut=[],Et=[],jt=new Set,qe(We.drmInfos,mt,Rt,Ut,Ht,Et,jt),Ue={keySystem:Ue,encryptionScheme:mt[0],licenseServerUri:Rt[0],distinctiveIdentifierRequired:We.distinctiveIdentifier=="required",persistentStateRequired:We.persistentState=="required",sessionType:We.sessionTypes[0]||"temporary",audioRobustness:(We.audioCapabilities?We.audioCapabilities[0].robustness:"")||"",videoRobustness:(We.videoCapabilities?We.videoCapabilities[0].robustness:"")||"",serverCertificate:Ut[0],serverCertificateUri:Ht[0],initData:Et,keyIds:jt};if(e.g=Ue,!e.g.licenseServerUri)throw new pt(2,6,6012,e.g.keySystem);return N(Te,c.createMediaKeys(),6);case 6:if(ve=Te.h,jr(e.j),e.s=ve,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){Te.u(7);break}return fe(Te,8),N(Te,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(Pe=Te.h,Pe!="usable")throw new pt(2,6,6018);jr(e.j),he(Te,7,4);break;case 8:throw xe=Ie(Te,4),xe instanceof pt?xe:new pt(2,6,6019,xe.message);case 7:return e.da=!0,N(Te,Gm(e),11);case 11:jr(e.j),he(Te,0);break;case 4:throw Ge=Ie(Te),jr(e.j,Ge),e.g=null,e.H.clear(),Ge instanceof pt?Ge:new pt(2,6,6002,Ge.message)}})}function qE(e,t,n){for(var i=m(t),u=i.next();!u.done;u=i.next()){var c=m(Se(u.value));for(u=c.next();!u.done;u=c.next())u=u.value,n.has(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u)}if(n.size==1&&n.has(""))throw new pt(2,6,6e3);for(i={},e=m(e.h.preferredKeySystems),u=e.next();!u.done;i={pe:i.pe},u=e.next())for(i.pe=u.value,c=m(t),u=c.next();!u.done;u=c.next())if(u=u.value.decodingInfos.find(function(A){return function(k){return k.supported&&k.keySystemAccess!=null&&k.keySystemAccess.keySystem==A.pe}}(i)))return u.keySystemAccess;for(e=m([!0,!1]),u=e.next();!u.done;u=e.next())for(i=u.value,c=m(t),u=c.next();!u.done;u=c.next()){var d=m(u.value.decodingInfos);for(u=d.next();!u.done;u=d.next()){var h=u.value;if(h.supported&&h.keySystemAccess){u=n.get(h.keySystemAccess.keySystem);var E=m(u);for(u=E.next();!u.done;u=E.next())if(!!u.value.licenseServerUri==i)return h.keySystemAccess}}}return null}function Hm(e,t){var n,i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe;return Oe(function(Ge){switch(Ge.g){case 1:if(t.size==1&&t.has(""))throw new pt(2,6,6e3);for(i=m(t.values()),u=i.next();!u.done;u=i.next())c=u.value,c.audioCapabilities.length==0&&delete c.audioCapabilities,c.videoCapabilities.length==0&&delete c.videoCapabilities;d=m(e.h.preferredKeySystems),h=d.next();case 2:if(h.done){Ge.u(4);break}if(E=h.value,!t.has(E)){Ge.u(3);break}return A=t.get(E),fe(Ge,6),N(Ge,navigator.requestMediaKeySystemAccess(E,[A]),8);case 8:return n=Ge.h,Ge.return(n);case 6:Ie(Ge);case 7:jr(e.j);case 3:h=d.next(),Ge.u(2);break;case 4:k=m([!0,!1]),G=k.next();case 9:if(G.done){Ge.u(11);break}ne=G.value,Y=m(t.keys()),h=Y.next();case 12:if(h.done){G=k.next(),Ge.u(9);break}if(ve=h.value,Pe=t.get(ve),xe=Pe.drmInfos.some(function(Te){return!!Te.licenseServerUri}),xe!=ne){Ge.u(13);break}return fe(Ge,15),N(Ge,navigator.requestMediaKeySystemAccess(ve,[Pe]),17);case 17:return n=Ge.h,Ge.return(n);case 15:Ie(Ge);case 16:jr(e.j);case 13:h=Y.next(),Ge.u(12);break;case 11:return Ge.return(n)}})}function HE(e){return e=Fl(e.h.clearKeys),e.size==0?null:Rh(e)}function Uc(e){ie(e)&&e.l.resolve()}function Bc(e,t){new pr(function(){t.loaded=!0,Uc(e)}).X(ze)}function Km(e,t,n){var i,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:try{i=e.s.createSession("persistent-license")}catch(G){return u=new pt(2,6,6005,G.message),e.o(u),k.return(Promise.reject(u))}return e.B.D(i,"message",function(G){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(G):P(e,G)}),e.B.D(i,"keystatuseschange",function(G){return B(e,G)}),c={initData:n.initData,initDataType:n.initDataType,loaded:!1,lf:1/0,ab:null,type:"persistent-license"},e.i.set(i,c),fe(k,2),N(k,i.load(t),4);case 4:return d=k.h,jr(e.j),d||(e.i.delete(i),h=e.h.persistentSessionOnlinePlayback?1:2,e.o(new pt(h,6,6013)),c.loaded=!0),Bc(e,c),Uc(e),k.return(i);case 2:E=Ie(k),jr(e.j,E),e.i.delete(i),A=e.h.persistentSessionOnlinePlayback?1:2,e.o(new pt(A,6,6005,E.message)),c.loaded=!0,Uc(e);case 3:return k.return(Promise.resolve())}})}function L(e,t,n,i){try{var u=e.s.createSession(i)}catch(c){e.o(new pt(2,6,6005,c.message));return}e.B.D(u,"message",function(c){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(c):P(e,c)}),e.B.D(u,"keystatuseschange",function(c){return B(e,c)}),e.i.set(u,{initData:n,initDataType:t,loaded:!1,lf:1/0,ab:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(c){t=c,c instanceof pt||(t=new pt(2,6,6016,c)),e.o(t);return}e.h.logLicenseExchange&&du(n),u.generateRequest(t,n).catch(function(c){if(!e.j.g){e.i.delete(u);var d=c.errorCode;if(d&&d.systemCode){var h=d.systemCode;0>h&&(h+=Math.pow(2,32)),h="0x"+h.toString(16)}e.o(new pt(2,6,6006,c.message,c,h))}})}function P(e,t){var n,i,u,c,d,h,E,A,k,G,ne,Y,ve;Oe(function(Pe){switch(Pe.g){case 1:if(n=t.target,e.h.logLicenseExchange&&du(t.message),i=e.i.get(n),u=e.g.licenseServerUri,c=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&c&&c.individualizationServer&&(u=c.individualizationServer),d=Li([u],e.h.retryParameters),d.body=t.message,d.method="POST",d.licenseRequestType=t.messageType,d.sessionId=n.sessionId,d.drmInfo=e.g,i&&(d.initData=i.initData,d.initDataType=i.initDataType),qm(e.g.keySystem)){var xe=Ka(d.body,!0,!0);if(xe.includes("PlayReadyKeyMessage")){xe=Bl(xe,"PlayReadyKeyMessage");var Ge=Ra(xe,"HttpHeader");Ge=m(Ge);for(var Te=Ge.next();!Te.done;Te=Ge.next()){var We=Te.value;Te=Ra(We,"name")[0],We=Ra(We,"value")[0],d.headers[Ri(Te)]=Ri(We)}xe=Ra(xe,"Challenge")[0],d.body=Ho(Ri(xe))}else d.headers["Content-Type"]="text/xml; charset=utf-8"}return h=Date.now(),fe(Pe,2),A=e.C.zb.request(2,d),N(Pe,A.promise,4);case 4:E=Pe.h,he(Pe,3);break;case 2:return k=Ie(Pe),e.j.g||(G=new pt(2,6,6007,k),e.i.size==1?(e.o(G),i&&i.ab&&i.ab.reject(G)):(i&&i.ab&&i.ab.reject(G),e.i.delete(n),ie(e)&&(e.l.resolve(),e.L.X(.1)))),Pe.return();case 3:return e.j.g?Pe.return():(e.I+=(Date.now()-h)/1e3,e.h.logLicenseExchange&&du(E.data),fe(Pe,5),N(Pe,n.update(E.data),7));case 7:he(Pe,6);break;case 5:return ne=Ie(Pe),Y=new pt(2,6,6008,ne.message),e.o(Y),i&&i.ab&&i.ab.reject(Y),Pe.return();case 6:if(e.j.g)return Pe.return();ve=new Wn("drmsessionupdate"),e.C.onEvent(ve),i&&(i.ab&&i.ab.resolve(),Bc(e,i)),$(Pe)}})}function B(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach(function(c,d){if(typeof d=="string"){var h=d;d=c,c=h}if(qm(e.g.keySystem)&&d.byteLength==16&&(bl()||Nr())){h=tn(d);var E=h.getUint32(0,!0),A=h.getUint16(4,!0),k=h.getUint16(6,!0);h.setUint32(0,E,!1),h.setUint16(4,A,!1),h.setUint16(6,k,!1)}c!="status-pending"&&(n.loaded=!0),c=="expired"&&(i=!0),d=ks(d).slice(0,32),e.aa.set(d,c)});var u=t.expiration-Date.now();(0>u||i&&1e3>u)&&n&&!n.ab&&(e.i.delete(t),t.close().catch(function(){})),ie(e)&&(e.l.resolve(),e.L.X(_e))}function V(e){var t=e.aa,n=e.ea;n.clear(),t.forEach(function(i,u){return n.set(u,i)}),t=Array.from(n.values()),t.length&&t.every(function(i){return i=="expired"})&&e.o(new pt(2,6,6014)),e.C.ee(Pc(n))}function ee(){var e,t,n,i,u,c,d,h;return Oe(function(E){return E.g==1?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},i={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},u=[i,n],c=new Map,d=function(A){var k,G,ne;return Oe(function(Y){switch(Y.g){case 1:if(fe(Y,2),A==="org.w3.clearkey"&&_s())throw Error("Unsupported keySystem");return N(Y,navigator.requestMediaKeySystemAccess(A,u),4);case 4:return k=Y.h,ne=(G=k.getConfiguration().sessionTypes)?G.includes("persistent-license"):!1,Lu()&&(ne=!1),c.set(A,{persistentState:ne}),N(Y,k.createMediaKeys(),5);case 5:he(Y,0);break;case 2:Ie(Y),c.set(A,null),$(Y)}})},h=e.map(function(A){return d(A)}),N(E,Promise.all(h),2)):E.return(Pc(c))})}function J(e){var t;return Oe(function(n){if(n.g==1)return t=new Promise(function(i,u){new pr(u).X(Be)}),fe(n,2),N(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return he(n,0);Ie(n),$(n)})}function H(e){var t;return Oe(function(n){return t=Array.from(e.i.entries()),e.i.clear(),N(n,Promise.all(t.map(function(i){i=m(i);var u=i.next().value,c=i.next().value;return Oe(function(d){if(d.g==1)return fe(d,2),e.ia||e.A.has(u.sessionId)||c.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?N(d,J(u),5):N(d,u.remove(),5);if(d.g!=2)return he(d,0);Ie(d),$(d)})})),0)})}function re(e,t){return e.length&&t.length&&e!==t?0<ce(e,t).length:!0}function ce(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,i.keySystem==c.keySystem){u=new Map;for(var d=m((i.initData||[]).concat(c.initData||[])),h=d.next();!h.done;h=d.next())h=h.value,u.set(h.keyId,h);u=Array.from(u.values()),d=i.keyIds&&c.keyIds?new Set([].concat(T(i.keyIds),T(c.keyIds))):i.keyIds||c.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||c.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||c.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||c.persistentStateRequired,videoRobustness:i.videoRobustness||c.videoRobustness,audioRobustness:i.audioRobustness||c.audioRobustness,serverCertificate:i.serverCertificate||c.serverCertificate,serverCertificateUri:i.serverCertificateUri||c.serverCertificateUri,initData:u,keyIds:d});break}}return n}function Se(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Ee(e){e.i.forEach(function(t,n){var i=t.lf,u=n.expiration;isNaN(u)&&(u=1/0),u!=i&&(e.C.onExpirationUpdated(n.sessionId,u),t.lf=u)})}function ie(e){return e=e.i.values(),kE(e,function(t){return t.loaded})}function me(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.aa.get(n.value)!=="usable")return!1;return!0}function ge(e,t){var n=[];for(t.forEach(function(i,u){n.push({keySystem:u,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function qe(e,t,n,i,u,c,d){var h=[],E={};e=m(e);for(var A=e.next();!A.done;E={la:E.la},A=e.next()){if(E.la=A.value,t.includes(E.la.encryptionScheme)||t.push(E.la.encryptionScheme),E.la.keySystem=="org.w3.clearkey"&&E.la.licenseServerUri.startsWith("data:application/json;base64,")?h.includes(E.la.licenseServerUri)||h.push(E.la.licenseServerUri):n.includes(E.la.licenseServerUri)||n.push(E.la.licenseServerUri),u.includes(E.la.serverCertificateUri)||u.push(E.la.serverCertificateUri),E.la.serverCertificate&&(i.some(function(ne){return function(Y){return zi(Y,ne.la.serverCertificate)}}(E))||i.push(E.la.serverCertificate)),E.la.initData){A={};for(var k=m(E.la.initData),G=k.next();!G.done;A={vd:A.vd},G=k.next())A.vd=G.value,c.some(function(ne){return function(Y){var ve=ne.vd;return Y.keyId&&Y.keyId==ve.keyId?!0:Y.initDataType==ve.initDataType&&zi(Y.initData,ve.initData)}}(A))||c.push(A.vd)}if(E.la.keyIds)for(A=m(E.la.keyIds),k=A.next();!k.done;k=A.next())d.add(k.value)}if(h.length==1)n.push(h[0]);else if(0<h.length){for(t=[],h=m(h),i=h.next();!i.done;i=h.next())i=p.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),t.push.apply(t,T(i.keys));h=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+p.btoa(h))}}function De(e,t,n,i){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(u)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),i[u]&&(e.keySystem=i[u]),p.cast&&p.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Be=1,ze=5,_e=.5,Le=new oa(function(){return Ti(new Uint8Array([0]))});/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function we(e,t,n){this.h=e,this.i=t,this.g=n}function je(e,t){return Oe(function(n){return n.g==1?N(n,Z(e,t),2):n.return(ue(e,t))})}function Z(e,t){return Oe(function(n){if(n.g==1)return N(n,vm(e.g,t,e.h.drm.preferredKeySystems),2);if(!t.variants.some(jf))throw new pt(2,4,4032);$(n)})}function ue(e,t){var n=Ic(t.variants,e.h.restrictions,e.i);if(t){var i=e.g?e.g.g:null;if(i&&e.g.s)for(var u=m(t.variants),c=u.next();!c.done;c=u.next())c=c.value,ae(e,i.keySystem,c.video),ae(e,i.keySystem,c.audio);se(e,t)}return n}function ae(e,t,n){if(n){n=m(n.drmInfos);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.keySystem==t){i=m(i.initData||[]);for(var u=i.next();!u.done;u=i.next())u=u.value,jl(e.g,u.initDataType,u.initData)}}}function se(e,t){e=e.g?e.g.Kd():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var i=!1,u=!1,c=new Set,d=new Set;t=m(t.variants);for(var h=t.next();!h.done;h=t.next()){h=h.value;var E=[];h.audio&&E.push(h.audio),h.video&&E.push(h.video),E=m(E);for(var A=E.next();!A.done;A=E.next())if(A=A.value,A.keyIds.size){A=m(A.keyIds);for(var k=A.next();!k.done;k=A.next()){k=k.value;var G=e[n?"00":k];G?Q.includes(G)&&d.add(G):c.add(k)}}h.allowedByApplication?h.allowedByKeySystem&&(i=!0):u=!0}if(!i)throw e={hasAppRestrictions:u,missingKeys:Array.from(c),restrictedKeyStatuses:Array.from(d)},new pt(2,4,4012,e)}var Q=["output-restricted","internal-error"];function Me(){}function be(e,t){if(t){var n=ke[t.toLowerCase()];if(n)return n}throw new pt(2,4,4e3,e,t)}te("shaka.media.ManifestParser",Me),Me.unregisterParserByMime=function(e){delete ke[e]},Me.registerParserByMime=function(e,t){ke[e]=t},Me.registerParserByExtension=function(){dr("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Me.AccessibilityPurpose={zj:"visually impaired",Ui:"hard of hearing"};var ke={};function Re(e){function t(){i=!0}function n(A){c.push(A),yr(A)}e=Qn(e);var i=!1,u,c=[],d=[];if(new kr().box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).O("stsd",function(A){u=A,c.push(A),vu(A)}).O("encv",t).O("enca",t).O("dvav",function(A){d.push({box:A,Xa:1701733238})}).O("dva1",function(A){d.push({box:A,Xa:1701733238})}).O("dvh1",function(A){d.push({box:A,Xa:1701733238})}).O("dvhe",function(A){d.push({box:A,Xa:1701733238})}).O("hev1",function(A){d.push({box:A,Xa:1701733238})}).O("hvc1",function(A){d.push({box:A,Xa:1701733238})}).O("avc1",function(A){d.push({box:A,Xa:1701733238})}).O("avc3",function(A){d.push({box:A,Xa:1701733238})}).O("ac-3",function(A){d.push({box:A,Xa:1701733217})}).O("ec-3",function(A){d.push({box:A,Xa:1701733217})}).O("ac-4",function(A){d.push({box:A,Xa:1701733217})}).O("mp4a",function(A){d.push({box:A,Xa:1701733217})}).parse(e),i)return e;if(d.length==0||!u)throw ks(e),new pt(2,3,3019);d.reverse();for(var h=m(d),E=h.next();!E.done;E=h.next())E=E.value,e=pe(e,u,E.box,c,E.Xa);return e}function pe(e,t,n,i,u){var c=Ye.value(),d=e.subarray(n.start,n.start+n.size),h=tn(d),E=new Uint8Array(n.size+c.byteLength);for(E.set(d,0),d=tn(E),d.setUint32(4,u),E.set(c,n.size),u=h.getUint32(4),d.setUint32(n.size+16,u),Ne(E,0,E.byteLength),u=new Uint8Array(e.byteLength+E.byteLength),n=vs()?n.start:n.start+n.size,c=e.subarray(n),u.set(e.subarray(0,n)),u.set(E,n),u.set(c,n+E.byteLength),e=m(i),i=e.next();!i.done;i=e.next())i=i.value,Ne(u,i.start,i.size+E.byteLength);return E=tn(u,t.start),t=Ul(t),e=E.getUint32(t),E.setUint32(t,e+1),u}function Ne(e,t,n){e=tn(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var Ye=new oa(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function dt(e,t,n,i,u,c,d){this.$=e,this.Aa=t,this.ja=n,this.ff=i===void 0?null:i,this.timescale=u===void 0?null:u,this.g=c===void 0?null:c,this.aesKey=d===void 0?null:d,this.mimeType=this.codecs=null}dt.prototype.ac=function(){return this.Aa},dt.prototype.Yb=function(){return this.ja},dt.prototype.ed=function(){return this.g};function at(e,t){return e===t?!0:e&&t?e.ac()==t.ac()&&e.Yb()==t.Yb()&&Zn(e.$().sort(),t.$().sort())&&zi(e.ed(),t.ed()):e==t}te("shaka.media.InitSegmentReference",dt),dt.prototype.getEndByte=dt.prototype.Yb,dt.prototype.getStartByte=dt.prototype.ac;function Je(e,t,n,i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe){for(A=A===void 0?[]:A,Y=Y===void 0?Bt:Y,this.startTime=e,this.i=this.endTime=t,this.C=n,this.Aa=i,this.ja=u,this.ca=c,this.timestampOffset=d,this.appendWindowStart=h,this.appendWindowEnd=E,this.g=A,this.tilesLayout=k===void 0?"":k,this.A=G===void 0?null:G,this.h=ne===void 0?null:ne,this.status=Y,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=ve===void 0?null:ve,this.s=null,this.j=0,this.o=Pe===void 0?!1:Pe,this.Wd=this.md=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.ng();this.o&&this.g.length&&this.g[this.g.length-1].mg(),this.B=this.mimeType=this.codecs=null}g=Je.prototype,g.$=function(){return this.C()},g.getStartTime=function(){return this.startTime},g.mh=function(){return this.endTime},g.ac=function(){return this.Aa},g.Yb=function(){return this.ja},g.Dh=function(){return this.tilesLayout},g.Ch=function(){return this.A},g.bc=function(){return this.status},g.Vh=function(){this.status=Gt},g.ef=function(){this.preload=!0},g.Ph=function(){return this.preload},g.Zd=function(){this.l=!1},g.Mh=function(){return this.l},g.ng=function(){this.md=!0},g.Oh=function(){return this.md},g.mg=function(){this.Wd=!0},g.Nh=function(){return this.Wd},g.lg=function(){this.m=!0},g.Jh=function(){return this.m},g.Eg=function(e){this.s=e},g.Bh=function(){return this.s},g.offset=function(e){this.startTime+=e,this.endTime+=e,this.i+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.i+=e},g.Ff=function(e){this.h==null?de("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},g.yi=function(e){this.B=e},g.ed=function(){return this.B};function ht(e,t){e.ca=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())ht(n.value,t)}te("shaka.media.SegmentReference",Je),Je.prototype.getSegmentData=Je.prototype.ed,Je.prototype.setSegmentData=Je.prototype.yi,Je.prototype.syncAgainst=Je.prototype.Ff,Je.prototype.offset=Je.prototype.offset,Je.prototype.getThumbnailSprite=Je.prototype.Bh,Je.prototype.setThumbnailSprite=Je.prototype.Eg,Je.prototype.hasByterangeOptimization=Je.prototype.Jh,Je.prototype.markAsByterangeOptimization=Je.prototype.lg,Je.prototype.isLastPartial=Je.prototype.Nh,Je.prototype.markAsLastPartial=Je.prototype.mg,Je.prototype.isPartial=Je.prototype.Oh,Je.prototype.markAsPartial=Je.prototype.ng,Je.prototype.isIndependent=Je.prototype.Mh,Je.prototype.markAsNonIndependent=Je.prototype.Zd,Je.prototype.isPreload=Je.prototype.Ph,Je.prototype.markAsPreload=Je.prototype.ef,Je.prototype.markAsUnavailable=Je.prototype.Vh,Je.prototype.getStatus=Je.prototype.bc,Je.prototype.getTileDuration=Je.prototype.Ch,Je.prototype.getTilesLayout=Je.prototype.Dh,Je.prototype.getEndByte=Je.prototype.Yb,Je.prototype.getStartByte=Je.prototype.ac,Je.prototype.getEndTime=Je.prototype.mh,Je.prototype.getStartTime=Je.prototype.getStartTime,Je.prototype.getUris=Je.prototype.$;var Bt=0,Gt=1;Je.Status={Hi:Bt,xj:Gt,$i:2};function kt(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ft(e,t){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function An(e,t){if(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=m(vt(e));for(var i=e.next();!i.done;i=e.next()){var u=i.value;i=u.start,u=u.end,u>t&&(n+=u-Math.max(i,t))}return n}function nt(e,t,n){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)?null:(e=vt(e).findIndex(function(i,u,c){return i.start>t&&(u==0||c[u-1].end-t<=n)}),0<=e?e:null)}function vt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Wt(){}function Nt(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function en(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Jt(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function Yt(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var i=Vr(Qn(e.data,1,n)),u=e.data[2+n],c=e.data.subarray(3+n).indexOf(0);if(c===-1)return null;var d=Vr(Qn(e.data,3+n,c)),h;return i==="-->"?h=Vr(Qn(e.data,4+n+c)):h=Ti(e.data.subarray(4+n+c)),t.mimeType=i,t.pictureType=u,t.description=d,t.data=h,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=Vr(Qn(e.data,1,i)),e=Vr(Qn(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=Vr(Qn(e.data,1,i)),e=Vr(Qn(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Vr(Qn(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Ti(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Vr(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Vr(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ti(e.data),t):null}function Dn(e){for(var t=0,n=[];Nt(e,t);){var i=Jt(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,i=t+i;t+10<i;){var u=e.subarray(t),c=Jt(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:c,data:u.subarray(10,10+c)},(c=Yt(u))&&n.push(c),t+=u.size+10}en(e,t)&&(t+=10)}return n}function Nn(e,t){for(var n=t=t===void 0?0:t,i=0;Nt(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=Jt(e,t+6),en(e,t+10)&&(i+=10),t+=i;return 0<i?e.subarray(n,n+i):new Uint8Array([])}te("shaka.util.Id3Utils",Wt),Wt.getID3Data=Nn,Wt.getID3Frames=Dn;function rr(e,t){var n=null,i=null,u=null,c=e.M();return t&1&&(u=e.Cc()),t&2&&e.skip(4),t&8&&(n=e.M()),t&16&&(i=e.M()),{trackId:c,Wf:n,fh:i,Bj:u}}function ir(e,t){return t==1?(t=e.M(),e=e.M(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.M()}}function It(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.M(),e.skip(4),e=e.ra(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function $t(e,t,n){var i=e.M(),u=[],c=null;n&1&&(c=e.M()),n&4&&e.skip(4);for(var d=0;d<i;d++){var h={wf:null,sampleSize:null,he:null};n&256&&(h.wf=e.M()),n&512&&(h.sampleSize=e.M()),n&1024&&e.skip(4),n&2048&&(h.he=t==0?e.M():e.sg()),u.push(h)}return{Fj:i,vg:u,eh:c}}function Zt(e,t){t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.M();return t==1?e.skip(8):e.skip(4),e.skip(4),e.skip(8),e.skip(2),e.skip(2),e.skip(2),e.skip(2),e.skip(36),t=e.ra()+e.ra()/16,e=e.ra()+e.ra()/16,{trackId:n,width:t,height:e}}function un(e){return e=e.M(),{Ea:zf(e)}}function vn(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Pn(e){return(10>e?"0":"")+e}function xn(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,i=0;i<e.byteLength;i++)2<=i&&e[i]==3&&e[i-1]==0&&e[i-2]==0||(t[n]=e[i],n++);this.j=Qn(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Fn(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);i!==0&&(n.set(e.j.subarray(t,t+i)),e.h=new Dr(n,0).M(),e.g=8*i,e.i-=i)}function Gn(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Fn(e)}e.h<<=t,e.g-=t}function bt(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Fn(e),n=t-n,0<n?i<<n|bt(e,n):i}function Sn(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Fn(e),t+Sn(e)}function En(e){Gn(e,1+Sn(e))}function Ot(e){var t=Sn(e);return bt(e,t+1)-1}function On(e){return e=Ot(e),1&e?1+e>>>1:-1*(e>>>1)}function st(e){return bt(e,1)===1}function tt(e){return bt(e,8)}function qt(e,t){for(var n=8,i=8,u=0;u<t;u++)i!==0&&(i=On(e),i=(n+i+256)%256),n=i===0?n:i}function Ve(e){return tt(e),Ot(e),Ot(e)}te("shaka.util.ExpGolomb",xn);function Ke(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}g=Ke.prototype,g.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},g.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Ai(e)),n=e.length-(e.length+t)%188,i=!1,u=t;u<n;u+=188)if(e[u]==71){var c=!!(e[u+1]&64),d=((e[u+1]&31)<<8)+e[u+2];if(1<(e[u+3]&48)>>4){var h=u+5+e[u+4];if(h==u+188)continue}else h=u+4;switch(d){case 0:c&&(h+=e[h]+1),this.G=(e[h+10]&31)<<8|e[h+11];break;case 17:case 8191:break;case this.G:c&&(h+=e[h]+1),c=e,d={audio:-1,video:-1,Sd:-1,audioCodec:"",videoCodec:""};var E=h+3+((c[h+1]&15)<<8|c[h+2])-4;for(h+=12+((c[h+10]&15)<<8|c[h+11]);h<E;){var A=(c[h+1]&31)<<8|c[h+2],k=(c[h+3]&15)<<8|c[h+4];switch(c[h]){case 6:if(0<k)for(var G=h+5,ne=k;2<ne;){var Y=c[G+1]+2;switch(c[G]){case 5:var ve=Ch(c.subarray(G+2,G+Y));d.audio==-1&&ve==="Opus"?(d.audio=A,d.audioCodec="opus"):d.video==-1&&ve==="AV01"&&(d.video=A,d.videoCodec="av1");break;case 106:d.audio==-1&&(d.audio=A,d.audioCodec="ac3");break;case 122:d.audio==-1&&(d.audio=A,d.audioCodec="ec3");break;case 124:d.audio==-1&&(d.audio=A,d.audioCodec="aac");break;case 127:d.audioCodec=="opus"&&(ve=null,c[G+2]===128&&(ve=c[G+3]),ve!=null&&(this.F={channelCount:ve&15?ve&15:2,Zg:ve,sampleRate:48e3}))}G+=Y,ne-=Y}break;case 15:d.audio==-1&&(d.audio=A,d.audioCodec="aac");break;case 17:d.audio==-1&&(d.audio=A,d.audioCodec="aac-loas");break;case 21:d.Sd==-1&&(d.Sd=A);break;case 27:d.video==-1&&(d.video=A,d.videoCodec="avc");break;case 3:case 4:d.audio==-1&&(d.audio=A,d.audioCodec="mp3");break;case 36:d.video==-1&&(d.video=A,d.videoCodec="hvc");break;case 129:d.audio==-1&&(d.audio=A,d.audioCodec="ac3");break;case 132:case 135:d.audio==-1&&(d.audio=A,d.audioCodec="ec3")}h+=k+5}c=d,c.video!=-1&&(this.I=c.video,this.m=c.videoCodec),c.audio!=-1&&(this.B=c.audio,this.A=c.audioCodec),c.Sd!=-1&&(this.C=c.Sd),i&&!this.H&&(i=!1,u=t-188),this.H=!0;break;case this.I:h=e.subarray(h,u+188),c?this.j.push([h]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(h);break;case this.B:h=e.subarray(h,u+188),c?this.i.push([h]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(h);break;case this.C:h=e.subarray(h,u+188),c?this.l.push([h]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(h);break;default:i=!0}}return this};function Mt(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var i=t[7];if(i&192){var u=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=u),n.pts=sr(u,e.s),e.s=n.pts,n.dts=n.pts,i&64&&(i=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=i),n.dts=sr(i,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}g.ai=function(e){return dr("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.qf(e)},g.qf=function(e,t,n){var i=e.pts?e.pts/9e4:null;e=e.data;var u=e.byteLength,c=1;this.m=="hvc"&&(c=2);for(var d=n||0,h=[],E=-1,A=0,k,G=0;G<u;++G){var ne=e[G];if(ne){if(2<=d&&ne==1){if(t&&!h.length&&E==-1&&(ne=G-(3<d?3:d),n&&ne!=0&&(ne=e.subarray(0,ne),t.data=li(t.data,ne),t.fullData=li(t.fullData,ne))),0<=E?(d=G-((3<d?3:d)+1),h.push({data:e.subarray(E+c,d+1),fullData:e.subarray(E,d+1),type:A,time:i})):t&&!h.length&&(E=G-d,0<E&&(E=e.subarray(0,E),t.data=li(t.data,E),t.fullData=li(t.fullData,E))),G>=u-c)return h;G++,E=G,A=this.m=="hvc"?e[G]>>1&63:e[G]&31}d=0}else d++;G>=u-1&&0<=E&&0<=d&&(k={data:e.subarray(E+c,u),fullData:e.subarray(E,u),type:A,time:i})}return k&&h.push(k),!h.length&&t&&(t.data=li(t.data,e),t.fullData=li(t.fullData,e)),h},g.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=li.apply(Oi,T(n.value)),(n=Mt(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Dn(n.data),dts:n.dts,pts:n.pts});return e},g.Fb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=m(this.i),n=t.next();!n.done;n=t.next()){var i=li.apply(Oi,T(n.value)),u=Mt(this,i);n=this.h.length?this.h[this.h.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!n||n.pts!=u.pts&&n.dts!=u.dts)?(this.h.length&&u.dts<(n.dts||0)&&(e=!0),this.h.push(u)):this.h.length&&(i=u?u.data:i)&&(n=this.h.pop(),n.data=li(n.data,i),this.h.push(n))}e&&(this.h=this.h.sort(function(c,d){var h=(c.pts||0)-(d.pts||0);return(c.dts||0)-(d.dts||0)||h}))}return this.h},g.xc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=m(this.j),i=n.next();!i.done;i=n.next()){var u=li.apply(Oi,T(i.value)),c=Mt(this,u);i=this.g.length?this.g[this.g.length-1]:null,c&&c.pts!=null&&c.dts!=null&&(!i||i.pts!=c.pts&&i.dts!=c.dts)?(this.g.length&&c.dts<(i.dts||0)&&(t=!0),this.g.push(c)):this.g.length&&(u=c?c.data:u)&&(i=this.g.pop(),i.data=li(i.data,u),this.g.push(i))}if(e){var d;for(n=m(this.g),i=n.next();!i.done;i=n.next())i=i.value,i.nalus=this.qf(i,d,void 0),i.nalus.length&&(d=i.nalus[i.nalus.length-1]);this.g=this.g.filter(function(h){return h.nalus.length})}t&&(this.g=this.g.sort(function(h,E){var A=(h.pts||0)-(E.pts||0);return(h.dts||0)-(E.dts||0)||A}))}return e?this.g:(e=this.g,this.g=[],e)},g.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Fb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.xc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},g.bd=function(){return{audio:this.A,video:this.m}},g.Od=function(){for(var e=[],t=m(this.xc()),n=t.next();!n.done;n=t.next())e.push.apply(e,T(n.value.nalus));return e},g.Gh=function(){dr("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.We();return{height:e.height,width:e.width}},g.We=function(){return this.m=="hvc"?Tn(this):fn(this)};function fn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(ne){return ne.type==7}),!e))return t;e=new xn(e.data);var n=tt(e),i=tt(e),u=tt(e);if(En(e),zr.includes(n)){var c=Ot(e);if(c===3&&Gn(e,1),En(e),En(e),Gn(e,1),st(e)){c=c!==3?8:12;for(var d=0;d<c;d++)st(e)&&(6>d?qt(e,16):qt(e,64))}}if(En(e),c=Ot(e),c===0)Ot(e);else if(c===1)for(Gn(e,1),En(e),En(e),c=Ot(e),d=0;d<c;d++)En(e);En(e),Gn(e,1),c=Ot(e),d=Ot(e);var h=bt(e,1);h===0&&Gn(e,1),Gn(e,1);var E=0,A=0,k=0,G=0;return st(e)&&(E=Ot(e),A=Ot(e),k=Ot(e),G=Ot(e)),t.height=String((2-h)*(d+1)*16-2*k-2*G),t.width=String(16*(c+1)-2*E-2*A),t.Ea="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2),t}function Tn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(Ue){return Ue.type==33}),!e))return t;var n=new xn(e.fullData,!0);tt(n),tt(n),bt(n,4);var i=bt(n,3);st(n);var u=bt(n,2),c=bt(n,1),d=bt(n,5),h=bt(n,32);e=tt(n);for(var E=tt(n),A=tt(n),k=tt(n),G=tt(n),ne=tt(n),Y=tt(n),ve=[],Pe=[],xe=0;xe<i;xe++)ve.push(st(n)),Pe.push(st(n));if(0<i)for(xe=i;8>xe;xe++)bt(n,2);for(xe=0;xe<i;xe++)ve[xe]&&bt(n,88),Pe[xe]&&tt(n);Ot(n),i=Ot(n),i==3&&bt(n,1),ve=Ot(n),Pe=Ot(n);var Ge=xe=0,Te=0,We=0;return st(n)&&(xe+=Ot(n),Ge+=Ot(n),Te+=Ot(n),We+=Ot(n)),t.width=String(ve-(xe+Ge)*(i===1||i===2?2:1)),t.height=String(Pe-(Te+We)*(i===1?2:1)),n=function(Ue){for(var mt=0,Rt=0;32>Rt;Rt++)mt|=(Ue>>Rt&1)<<31-Rt;return mt>>>0}(h),c=c==1?"H":"L",u="hvc1"+("."+["","A","B","C"][u]+d),u+="."+n.toString(16).toUpperCase(),u+="."+c+Y,ne&&(u+="."+ne.toString(16).toUpperCase()),G&&(u+="."+G.toString(16).toUpperCase()),k&&(u+="."+k.toString(16).toUpperCase()),A&&(u+="."+A.toString(16).toUpperCase()),E&&(u+="."+E.toString(16).toUpperCase()),e&&(u+="."+e.toString(16).toUpperCase()),t.Ea=u,t}function sr(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Zr(e){return!(0>Ai(e))}function Ai(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}te("shaka.util.TsParser",Ke),Ke.syncOffset=Ai,Ke.probe=Zr,Ke.prototype.getVideoInfo=Ke.prototype.We,Ke.prototype.getVideoResolution=Ke.prototype.Gh,Ke.prototype.getVideoNalus=Ke.prototype.Od,Ke.prototype.getCodecs=Ke.prototype.bd,Ke.prototype.getStartTime=Ke.prototype.getStartTime,Ke.prototype.getVideoData=Ke.prototype.xc,Ke.prototype.getAudioData=Ke.prototype.Fb,Ke.prototype.getMetadata=Ke.prototype.getMetadata,Ke.prototype.parseNalus=Ke.prototype.qf,Ke.prototype.parseAvcNalus=Ke.prototype.ai,Ke.prototype.parse=Ke.prototype.parse,Ke.prototype.clearData=Ke.prototype.clearData,Ke.Timescale=9e4;var zr=[100,110,122,244,44,83,86,118,128,138,139,134];function io(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&He("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,dr("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{He("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(He("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||He(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Zi(e){e.g&&e.i.classList.add("shaka-hidden")}io.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Gs(e,t,n){var i=Ju,u=_u;switch(t.mimeType){case"video/webm":i=el;break;case"video/mp4":i=Qa}switch(n){case"DASH":u=Oo;break;case"HLS":u=qs}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(i),e.j||e.g.setStreamingFormat(u))}te("shaka.lcevc.Dec",io),io.prototype.release=io.prototype.release;var Ju=0,el=1,Qa=2,qs=0,Oo=1,_u=-1;function Tu(e,t,n,i){var u=this;this.i=e,this.A=null,this.F=t,this.h={},this.G={},this.qa={},this.g=null,this.ba=!1,this.ta=n||function(){},this.T=i||null,this.j={},this.o=new _t,this.m={},this.H=null,this.L=new Rr,this.N="",this.da=!1,this.l=da(this,this.L),this.C=!1,this.I=new $u(function(){return Jf(u)}),this.B=!1,this.aa="UNKNOWN",this.pa=this.sa=!1,this.ia=new Rr,this.s=!1,this.ea=!0,this.K=this.Y=null}function da(e,t){if(p.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.o.D(n,"startstreaming",function(){e.ea=!0}),e.o.D(n,"endstreaming",function(){e.ea=!1}),e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=Vm(n),e.i.src=e.N,n}return n=new MediaSource,e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=Vm(n),e.i.src=e.N,n}function jc(e,t){var n,i,u,c,d,h,E,A,k,G,ne;return Oe(function(Y){if(Y.g==1)return e.createSegmentIndex?N(Y,e.createSegmentIndex(),2):Y.u(2);if(!e.segmentIndex)return Y.return(!1);if(e.segmentIndex.getNumReferences()==0)return Y.return(!0);for(n=yi,i=new Set,u=m(e.segmentIndex),c=u.next();!c.done;c=u.next())if(d=c.value,h=d.mimeType||e.mimeType||"",E=d.codecs||e.codecs||"",A=h+":"+E,!i.has(A)){if(i.add(A),t==n.ma){if(k=Si(h,E),!Rl(k))return Y.return(!1)}else if(t==n.fa?E=xl(E):t==n.S&&(E=Ku(E)),G=cm(e,h,E),ne=Bu(h,E),!Pt(G)&&!ro(ne))return Y.return(!1)}return Y.return(!0)})}g=Tu.prototype,g.destroy=function(){return this.I.destroy()};function Jf(e){var t,n,i,u,c,d,h,E;return Oe(function(A){if(A.g==1){t=[];for(n in e.j)for(i=e.j[n],u=i[0],e.j[n]=i.slice(0,1),u&&t.push(u.p.catch(pm)),c=m(i.slice(1)),d=c.next();!d.done;d=c.next())h=d.value,h.p.reject(new pt(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(E in e.m)t.push(e.m[E].destroy());return N(A,Promise.all(t),2)}e.o&&(e.o.release(),e.o=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.l=null,e.g=null,e.F=null,e.h={},e.m={},e.H=null,e.j={},e.T=null,e.K=null,$(A)})}g.init=function(e,t,n,i){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,i=i===void 0?!1:i;var u=this,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:return c=yi,N(k,u.L,2);case 2:u.B=t,u.aa=n,u.sa=i,u.pa=!u.B&&u.aa=="HLS"&&!u.sa,u.K=null,d=m(e.keys()),h=d.next();case 3:if(h.done){k.u(0);break}return E=h.value,A=e.get(E),N(k,tl(u,E,A,A.codecs),6);case 6:u.s?(u.j[c.S]=[],u.j[c.fa]=[]):u.j[E]=[],h=d.next(),k.u(3)}})};function tl(e,t,n,i){var u,c,d,h,E,A,k,G,ne,Y,ve,Pe;return Oe(function(xe){switch(xe.g){case 1:return u=yi,c=Fe,d=O,N(xe,jc(n,t),2);case 2:if(d.call(c,xe.h,"Type negotiation should happen before MediaSourceEngine.init!"),h=Si(n.mimeType,i),t==u.ma){Ja(e,h,e.B,n.external),xe.u(0);break}if(E=e.A.forceTransmux,(!Pt(h)||!e.B&&pu.includes(h))&&(E=!0),A=Bu(n.mimeType,i),!E){xe.u(4);break}if(k=Ro(u.S,(i||"").split(",")),G=Ro(u.fa,(i||"").split(",")),!k||!G){xe.u(5);break}return e.s=!0,N(xe,tl(e,u.S,n,k),6);case 6:return N(xe,tl(e,u.fa,n,G),7);case 7:return xe.return();case 5:(ne=ro(A))&&(Y=ne(),e.m[t]=Y,h=Y.convertCodecs(t,A));case 4:ve=h+e.A.addExtraFeaturesToSourceBuffer(h),jr(e.I);try{Pe=e.l.addSourceBuffer(ve)}catch(Ge){throw new pt(2,3,3015,Ge,"The mediaSource_ status was "+e.l.readyState+" expected 'open'")}e.B&&(Pe.mode=e8),e.o.D(Pe,"error",function(){e.j[t][0].p.reject(new pt(2,3,3014,e.i.error?e.i.error.code:0))}),e.o.D(Pe,"updateend",function(){return nl(e,t)}),e.h[t]=Pe,e.G[t]=h,e.qa[t]=!!n.drmInfos.length,$(xe)}})}g.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function Ja(e,t,n,i){e.g||(e.g=new Us(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var u=e.g;i=i||e.ba,e=e.aa,t=="application/cea-608"||t=="application/cea-708"?u.i=null:(u.i=(0,ji[t])(),u.i.setSequenceMode?u.i.setSequenceMode(n):dr("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):dr("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.B=i)}function Zc(e){return e.C?!1:e.l?e.l.readyState=="ended":!0}function Hs(e,t){return e.C||!Object.keys(e.h).length?e=null:t==vr?e=e.g.g:(e=Hn(e,t),e=!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function Dt(e,t){return e.C?null:t==vr?e.g.h:kt(Hn(e,t))}function yn(e,t,n){return e.C?0:t==vr?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Hn(e,t),An(e,n))}g.ob=function(){var e={total:this.C?[]:vt(this.i.buffered),audio:this.C?[]:vt(Hn(this,"audio")),video:this.C?[]:vt(Hn(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Hn(e,t){try{return e.h[t].buffered}catch(n){return null}}function ur(e,t,n,i,u,c){var d=null,h=Qn(n);if(pu.includes(u))c=Dn(h),c.length&&i&&((t=c.find(function(G){return G.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(d=Math.round(t.data)/1e3),e.ta([{cueTime:i.startTime,data:h,frames:c,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(u.includes("/mp4")&&i&&i.timestampOffset==0&&i.ca&&i.ca.timescale){var E=i.ca.timescale;if(!isNaN(E)){var A=0,k=!1;new kr().box("moof",yr).box("traf",yr).O("tfdt",function(G){A=ir(G.reader,G.version).baseMediaDecodeTime/E,k=!0,G.parser.stop()}).parse(n,!0),k&&(d=A)}}else u.includes("/mp4")||u.includes("/webm")||!Zr(h)||(e.K?e.K.clearData():e.K=new Ke,h=e.K.parse(h),t=h.getStartTime(t),t!=null&&(d=t),h=h.getMetadata(),h.length&&e.ta(h,c,i?i.endTime:null));return d}function Tr(e,t,n,i,u,c,d,h,E,A){d=d===void 0?!1:d,h=h===void 0?!1:h,E=E===void 0?!1:E,A=A===void 0?!1:A;var k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue;return Oe(function(mt){switch(mt.g){case 1:if(k=yi,t!=k.ma){mt.u(2);break}if(!e.B){mt.u(3);break}return N(mt,e.ia,4);case 4:G=mt.h,e.g.s=G;case 3:return N(mt,IE(e.g,n,i?i.startTime:null,i?i.endTime:null,i?i.$()[0]:null),5);case 5:return mt.return();case 2:if(A||!e.s){mt.u(6);break}return N(mt,Tr(e,k.S,n,i,u,c,d,h,E,!0),7);case 7:return N(mt,Tr(e,k.fa,n,i,u,c,d,h,E,!0),8);case 8:return mt.return();case 6:if(!e.h[t])return mt.return();if(ne=e.h[t].timestampOffset,Y=e.G[t],e.m[t]&&(Y=e.m[t].getOriginalMimeType()),i&&(ve=ur(e,t,n,i,Y,ne),ve!=null&&(Pe=i.startTime-ve,xe=Math.abs(ne-Pe),(.001<=xe||d||h)&&(!E||0<Pe||!ne)&&(ne=Pe,e.pa&&($i(e,t,function(){return ed(e,t)}),$i(e,t,function(){return td(e,t,ne)}))),Ge=t==k.fa||!(k.fa in e.h),e.B&&Ge&&e.ia.resolve(ne))),c&&t==k.fa&&(e.g||Ja(e,"application/cea-608",e.B,!1),e.H||(Te=Y.split(";",1)[0],e.H=new wt(Te)),i?(We=e.H.i(n),We.length&&Lf(e.g,We,i.startTime,i.endTime,ne)):e.H.init(n)),!e.m[t]){mt.u(9);break}return N(mt,e.m[t].transmux(n,u,i,e.l.duration,t),10);case 10:n=mt.h;case 9:return n=WB(e,n,i?i.startTime:null,t),i&&e.B&&t!=k.ma&&(d||h)&&(Ue=i.startTime,$i(e,t,function(){return ed(e,t)}),$i(e,t,function(){return td(e,t,Ue)})),N(mt,$i(e,t,function(){var Rt=n;if(t=="video"&&e.T){var Ht=e.T;Ht.g&&Ht.g.appendBuffer(Rt,"video",Ht.o,-ne)}e.h[t].appendBuffer(Rt)}),11);case 11:$(mt)}})}function Ir(e,t){var n=Dt(e,"video")||0;Of(e.g,t,n)}function fr(e){e.g&&Of(e.g,"",0)}g.remove=function(e,t,n){var i=this,u;return Oe(function(c){return c.g==1?(u=yi,e==u.ma?N(c,i.g.remove(t,n),0):N(c,$i(i,e,function(){return Vs(i,e,t,n)}),4)):i.s?N(c,$i(i,u.S,function(){return Vs(i,u.S,t,n)}),0):c.u(0)})};function ri(e,t){var n;return Oe(function(i){return i.g==1?(n=yi,t==n.ma?e.g?N(i,e.g.remove(0,1/0),0):i.return():N(i,$i(e,t,function(){return Vs(e,t,0,e.l.duration)}),4)):e.s?N(i,$i(e,n.S,function(){return Vs(e,n.S,0,e.l.duration)}),0):i.u(0)})}g.flush=function(e){var t=this,n;return Oe(function(i){return i.g==1?(n=yi,e==n.ma?i.return():N(i,$i(t,e,function(){t.i.currentTime-=.001,nl(t,e)}),2)):t.s?N(i,$i(t,n.S,function(){var u=n.S;t.i.currentTime-=.001,nl(t,u)}),0):i.u(0)})};function Qr(e,t,n,i,u,c,d,h,E){var A,k,G;return Oe(function(ne){return ne.g==1?(A=yi,t==A.ma?(c||(e.g.s=n),Dh(e.g,i,u),ne.return()):(k=[],N(ne,QB(e,t,d,h,E),2))):(G=ne.h,G||(k.push($i(e,t,function(){return ed(e,t)})),e.s&&k.push($i(e,A.S,function(){return ed(e,A.S)}))),c||(k.push($i(e,t,function(){return td(e,t,n)})),e.s&&k.push($i(e,A.S,function(){return td(e,A.S,n)}))),k.push($i(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=u,e.h[t].appendWindowStart=i,nl(e,t)})),e.s&&k.push($i(e,A.S,function(){var Y=A.S;e.h[Y].appendWindowStart=0,e.h[Y].appendWindowEnd=u,e.h[Y].appendWindowStart=i,nl(e,Y)})),N(ne,Promise.all(k),0))})}function Ks(e,t,n){var i;return Oe(function(u){return u.g==1?(i=yi,t==i.ma?u.return():(t==i.fa&&(e.ia=new Rr),$i(e,t,function(){return ed(e,t)}),e.s&&$i(e,i.S,function(){return ed(e,i.S)}),N(u,$i(e,t,function(){return td(e,t,n)}),2))):e.s?N(u,$i(e,i.S,function(){return td(e,i.S,n)}),0):u.u(0)})}g.endOfStream=function(e){var t=this;return Oe(function(n){return N(n,KE(t,function(){Zc(t)||t.l.readyState==="closed"||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},g.Za=function(e){var t=this;return Oe(function(n){return N(n,KE(t,function(){if(e<t.l.duration)for(var i in t.h){var u={start:function(){},p:new Rr};t.j[i].unshift(u)}t.l.duration=e,t.Y=e}),0)})},g.getDuration=function(){return this.l.duration};function Vs(e,t,n,i){i<=n?nl(e,t):e.h[t].remove(n,i)}function ed(e,t){var n=e.h[t].appendWindowStart,i=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=i,nl(e,t)}function td(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,nl(e,t)}function nl(e,t){if(!e.C){var n=e.j[t][0];n&&(n.p.resolve(),VE(e,t))}}function $i(e,t,n){return jr(e.I),n={start:n,p:new Rr},e.j[t].push(n),e.j[t].length==1&&uR(e,t),n.p}function KE(e,t){var n,i,u,c,d,h,E;return Oe(function(A){switch(A.g){case 1:jr(e.I),n=[],i={};for(u in e.h)i.Mc=new Rr,c={start:function(k){return function(){return k.Mc.resolve()}}(i),p:i.Mc},e.j[u].push(c),n.push(i.Mc),e.j[u].length==1&&c.start(),i={Mc:i.Mc};return fe(A,2),N(A,Promise.all(n),4);case 4:he(A,3);break;case 2:throw d=Ie(A),d;case 3:return fe(A,5,6),N(A,t(),6);case 6:Xe(A);for(h in e.h)VE(e,h);Ae(A,0);break;case 5:throw E=Ie(A),new pt(2,3,3015,E,e.i.error||"No error in the media element")}})}function VE(e,t){e.j[t].shift(),uR(e,t)}function uR(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(i){i.name=="QuotaExceededError"?n.p.reject(new pt(2,3,3017,t)):n.p.reject(new pt(2,3,3015,i,e.i.error||"No error in the media element")),VE(e,t)}}function WB(e,t,n,i){var u=e.qa[i];return e.A.insertFakeEncryptionInInit&&n==null&&u&&(Ha()||vs()||Yr("SOPOpenBrowser"))&&Pf(e.G[i])=="mp4"&&(t=Re(t)),t}function $B(e,t,n,i){return $i(e,t,function(){t!==vr&&(Un()&&(e.m[t]&&(e.m[t].destroy(),delete e.m[t]),i&&(e.m[t]=i),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),nl(e,t))})}function XB(e,t){var n,i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue,mt,Rt,Ht,Ut,Et;return Oe(function(jt){switch(jt.g){case 1:n=yi,e.C=!0,e.s=!1,i=e.i.currentTime,u=e.i.autoplay,c=e.i.paused,e.da&&(e.i.autoplay=!1),oe(jt,2),e.o.ib(),d=[];for(h in e.m)d.push(e.m[h].destroy());for(E in e.j)for(A=e.j[E],k=A[0],e.j[E]=A.slice(0,1),k&&d.push(k.p.catch(pm)),G=m(A.slice(1)),ne=G.next();!ne.done;ne=G.next())Y=ne.value,Y.p.reject(new pt(2,7,7003,void 0));for(ve in e.h){Pe=e.h[ve];try{e.l.removeSourceBuffer(Pe)}catch(ln){}}return N(jt,Promise.all(d),4);case 4:return e.m={},e.h={},xe=e.l.duration,e.L=new Rr,e.l=da(e,e.L),N(jt,e.L,5);case 5:!isNaN(xe)&&xe?e.l.duration=xe:!isNaN(e.Y)&&e.Y&&(e.l.duration=e.Y),Ge=new Rr,Te=e.l.sourceBuffers,We=t.size,Ue=0,mt=function(){Ue++,Ue===We&&(Ge.resolve(),e.o.Kb(Te,"addsourcebuffer",mt))},e.o.D(Te,"addsourcebuffer",mt),Rt=m(t.keys()),Ht=Rt.next();case 6:return Ht.done?(e.i.currentTime=i,N(jt,Ge,2)):(Ut=Ht.value,Et=t.get(Ut),N(jt,tl(e,Ut,Et,Et.codecs),9));case 9:e.s?(e.j[n.S]=[],e.j[n.fa]=[]):e.j[Ut]=[],Ht=Rt.next(),jt.u(6);break;case 2:Xe(jt),e.C=!1,jr(e.I),e.o.na(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=u,c||e.i.play())}),Ae(jt,0)}})}function lR(e,t){return KE(e,function(){return XB(e,t)})}function QB(e,t,n,i,u){var c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){return Ue.g==1?(c=yi,t==c.ma||(d=Ya(Po(e.G[t])),h=Ca(e.G[t]),A=!1,k=Si(n,i),G=e.A.forceTransmux,(!Pt(k)||!e.B&&pu.includes(k))&&(G=!0),G&&(ne=Bu(n,i),Y=ro(ne))&&(E=Y(),ve=Ro(c.S,(i||"").split(",")),Pe=Ro(c.fa,(i||"").split(",")),ve&&Pe?(A=!0,xe=Pe,t==c.S&&(xe=ve),k=E.convertCodecs(t,Bu(n,xe))):k=E.convertCodecs(t,ne)),Ge=Ya(Po(k)),Te=Ca(k),d===Ge&&h===Te)?Ue.return(!1):(We=!0,(e.s||A&&E&&!e.m[t])&&(We=!1),We&&e.A.codecSwitchingStrategy==="smooth"&&Un()?N(Ue,$B(e,t,k,E),3):(E&&E.destroy(),N(Ue,lR(e,u),3)))):Ue.return(!0)})}function JB(e,t,n,i){if(t==vr)var u=!1;else{u=Ya(Po(e.G[t]));var c=Ca(e.G[t]),d=Si(n,i),h=e.A.forceTransmux;(!Pt(d)||!e.B&&pu.includes(d))&&(h=!0),n=Bu(n,i),h&&(h=ro(n))&&(h=h(),d=h.convertCodecs(t,n),h.destroy()),t=Ya(Po(d)),d=Ca(d),u=u!==t||c!==d}return u?e.A.codecSwitchingStrategy!=="smooth"||!Un()||e.s:!1}var Vm=p.URL.createObjectURL,e8="sequence";function tr(e,t,n){this.i=e,this.s=t,this.m=this.j=1/0,this.g=1,this.h=this.l=null,this.A=0,this.F=!0,this.G=0,this.C=n===void 0?!0:n,this.H=0,this.o=!1,this.B=null}g=tr.prototype,g.getDuration=function(){return this.j},g.sh=function(){return this.g},g.Cg=function(e){this.i=e},g.Za=function(e){this.j=e},g.wh=function(){return this.i},g.Ag=function(e){this.A=e},g.Ec=function(e){this.F=e},g.je=function(e){this.m=e},g.Nd=function(){return this.m},g.Bf=function(e){this.s=e},g.lh=function(){return this.s},g.qg=function(e,t){if(e.length!=0){var n=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(i,u){return Math.max(i,u.end-u.start)},this.g),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=(Date.now()+this.A)/1e3-this.h-this.g)}},g.ld=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.A)/1e3;e=m(e);for(var u=e.next();!u.done;u=e.next())u=u.value,i<u.startTime||(t=Math.min(t,u.startTime),n=Math.max(n,u.endTime),this.g=Math.max(this.g,u.endTime-u.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=i-this.h-this.g)}},g.Xd=function(){this.o=!0},g.Qh=function(){return this.o},g.Bg=function(e){this.B=e},g.ph=function(){return this.B},g.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},g.hf=function(e){this.g=Math.max(this.g,e)},g.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},g.R=function(){return this.j==1/0&&!this.F},g.dc=function(){return this.j!=1/0&&!this.F},g.qb=function(){return Math.max(this.G,this.Gb()-this.m)},g.Gg=function(e){this.G=e},g.Gb=function(){return this.R()||this.dc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.g-this.i)+this.H,this.j):this.h?Math.min(this.h,this.j):this.j},g.dd=function(e){var t=Math.max(this.l,this.G);return this.m==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Gb()-this.m+e,this.pb()))},g.$b=function(){return this.dd(0)},g.pb=function(){return Math.max(0,this.Gb()-(this.R()||this.dc()?this.s:0))},g.Kg=function(){return!(this.i==null||this.h!=null&&this.C)},g.zg=function(e){this.H=e},te("shaka.media.PresentationTimeline",tr),tr.prototype.setAvailabilityTimeOffset=tr.prototype.zg,tr.prototype.usingPresentationStartTime=tr.prototype.Kg,tr.prototype.getSeekRangeEnd=tr.prototype.pb,tr.prototype.getSeekRangeStart=tr.prototype.$b,tr.prototype.getSafeSeekRangeStart=tr.prototype.dd,tr.prototype.getSegmentAvailabilityEnd=tr.prototype.Gb,tr.prototype.setUserSeekStart=tr.prototype.Gg,tr.prototype.getSegmentAvailabilityStart=tr.prototype.qb,tr.prototype.isInProgress=tr.prototype.dc,tr.prototype.isLive=tr.prototype.R,tr.prototype.offset=tr.prototype.offset,tr.prototype.notifyMaxSegmentDuration=tr.prototype.hf,tr.prototype.notifyMinSegmentStartTime=tr.prototype.ce,tr.prototype.getInitialProgramDateTime=tr.prototype.ph,tr.prototype.setInitialProgramDateTime=tr.prototype.Bg,tr.prototype.isStartTimeLocked=tr.prototype.Qh,tr.prototype.lockStartTime=tr.prototype.Xd,tr.prototype.notifySegments=tr.prototype.ld,tr.prototype.notifyTimeRange=tr.prototype.qg,tr.prototype.getDelay=tr.prototype.lh,tr.prototype.setDelay=tr.prototype.Bf,tr.prototype.getSegmentAvailabilityDuration=tr.prototype.Nd,tr.prototype.setSegmentAvailabilityDuration=tr.prototype.je,tr.prototype.setStatic=tr.prototype.Ec,tr.prototype.setClockOffset=tr.prototype.Ag,tr.prototype.getPresentationStartTime=tr.prototype.wh,tr.prototype.setDuration=tr.prototype.Za,tr.prototype.setPresentationStartTime=tr.prototype.Cg,tr.prototype.getMaxSegmentDuration=tr.prototype.sh,tr.prototype.getDuration=tr.prototype.getDuration;function cR(e,t,n){this.j=n,this.l=e,this.s=fR(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}cR.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function t8(e,t){e.i=t}function n8(e){this.g=e}function fR(e){if(e.g.paused||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(vt(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function zE(e,t,n,i,u){var c=this;this.A=u,this.g=e,this.B=t,this.s=n,this.l=new _t,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=i,this.o=!1,this.l.D(e,"waiting",function(){return YE(c)}),this.m=new pr(function(){YE(c)}).$a(this.s.gapJumpTimerTime)}zE.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},zE.prototype.mf=function(){this.o=!0,YE(this)};function YE(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,i=fR(n),u=n.g.currentTime,c=Date.now()/1e3;(t.g!=u||t.s!=i)&&(t.m=c,t.g=u,t.s=i,t.h=!1),u=c-t.m,(i=u>=t.A&&i&&!t.h)&&(t.i(t.g,u),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new Wn("stalldetected"))),t=!i}t&&(t=e.g.currentTime,n=e.g.buffered,i=nt(n,t,e.s.gapDetectionThreshold),i==null||i==0&&!e.o||(u=n.start(i),u>=e.B.pb()||.001>u-t||(i!=0&&n.end(i-1),e.g.currentTime=u,t==e.i&&(e.i=u),e.C++,e.A(new Wn("gapjumped")))))}}}function nd(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=r8.value().get(t),n.na(e,t,i))}var r8=new oa(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function dR(e,t,n,i){var u=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return u.l==null&&(u.l=i()),u.l},this.o=!1,this.h=new _t,this.i=new mR(e),nd(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){pR(u,u.j())})}dR.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function WE(e){return e.o?e.g.currentTime:e.j()}function hR(e,t){0<e.g.readyState?vR(e.i,t):nd(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){pR(e,e.j())})}function pR(e,t){.001>Math.abs(e.g.currentTime-t)?gR(e):(e.h.na(e.g,"seeking",function(){gR(e)}),vR(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function gR(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function mR(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new pr(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}mR.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function vR(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.$a(.1)}function yR(e){this.g=e,this.j=!1,this.h=null,this.i=new _t}g=yR.prototype,g.ve=function(){function e(){t.h==null||t.h==0?t.j=!0:(t.i.na(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;nd(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},g.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},g.we=function(e){this.h=this.j?this.h:e},g.Dd=function(){return(this.j?this.g.currentTime:this.h)||0},g.Nf=function(){return 0},g.Mf=function(){return 0},g.pg=function(){};function ER(e,t,n,i,u,c){var d=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=u,this.s=null,this.o=i8(e,n,c),this.j=new zE(e,t.presentationTimeline,n,this.o,c),this.h=new dR(e,function(){e:{var h=d.j;h.j=!0,h.o=!1;var E=WE(d.h);if(h=TR(d,E),.001<Math.abs(h-E)&&(E=Date.now()/1e3,!d.s||d.s<E-1)){d.s=E,hR(d.h,h),h=void 0;break e}d.A(),h=void 0}return h},function(h){var E=d.j;E.g.seeking&&!E.j&&(E.j=!0,E.i=h)},function(){var h=i;return h==null?h=1/0>d.g.getDuration()?d.g.$b():d.g.pb():0>h&&(h=d.g.pb()+h),_R(d,SR(d,h))}),this.m=new pr(function(){if(d.i.readyState!=0&&!d.i.paused){var h=WE(d.h),E=d.g.$b(),A=d.g.pb();3>A-E&&(E=A-3),h<E&&(h=TR(d,h),d.i.currentTime=h)}})}g=ER.prototype,g.ve=function(){this.m.$a(.25)},g.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},g.we=function(e){hR(this.h,e)},g.Dd=function(){var e=WE(this.h);return 0<this.i.readyState&&!this.i.paused?SR(this,e):e},g.Nf=function(){return this.o?this.o.o:0},g.Mf=function(){return this.j.C},g.pg=function(){this.j.mf()};function _R(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function TR(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),i=e.l.safeSeekOffset,u=e.g.$b(),c=e.g.pb(),d=e.g.getDuration();3>c-u&&(u=c-3);var h=e.g.dd(n),E=e.g.dd(i);return n=e.g.dd(n+i),t>=d?_R(e,t):t>c?c:t<u?Ft(e.i.buffered,E)?E:n:t>=h||Ft(e.i.buffered,t)?t:n}function SR(e,t){var n=e.g.$b();return t<n?n:(e=e.g.pb(),t>e?e:t)}function i8(e,t,n){if(!t.stallEnabled)return null;var i=t.stallSkip;return t=new cR(new n8(e),t.stallThreshold,n),t8(t,function(){i?e.currentTime+=i:(e.pause(),e.play())}),t}function wr(e){this.g=e,this.m=null,this.j=0,this.o=!1}g=wr.prototype,g.getNumReferences=function(){return this.g.length},g.getNumEvicted=function(){return this.j},g.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},g.Wh=function(){this.o=!0},g.tc=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)},g.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],u=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<u)return n+this.j}return this.g.length&&e<this.g[0].startTime?this.j:null},g.get=function(e){return this.g.length==0?null:(e-=this.j,0>e||e>=this.g.length?null:this.g[e])},g.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},g.ae=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,T(e))}},g.kd=function(e,t){var n=this;e=e.filter(function(i){return i.endTime>t&&(n.g.length==0||i.endTime>n.g[0].startTime)}),this.ae(e),this.La(t)},g.La=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.j+=t-this.g.length}},g.sc=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.j++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new Je(e.startTime,t,e.C,e.Aa,e.ja,e.ca,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.A,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.j=e.j,this.g[this.g.length-1]=t)}},g.ke=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new pr(function(){var i=t();i?n.g.push.apply(n.g,T(i)):(n.m.stop(),n.m=null)}),this.m.$a(e))},wr.prototype[Symbol.iterator]=function(){return this.xb(0)},wr.prototype.xb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var i=this.find(e);if(i==null)return null;i--;var u=this.get(i+1),c=-1;if(u&&0<u.g.length)for(var d=u.g.length-1;0<=d;--d){var h=u.g[d];if(e>=h.startTime&&e<h.endTime){if(!t){for(;d&&!h.l;)d--,h=u.g[d];if(!h.l)return de("No independent partial segment found!"),null}i++,c=d-1;break}}return new Na(this,i,c,n)};function $E(e,t,n){return e=new Je(e,e+t,function(){return n},0,null,null,e,e,e+t),new wr([e])}te("shaka.media.SegmentIndex",wr),wr.forSingleSegment=$E,wr.prototype.getIteratorForTime=wr.prototype.xb,wr.prototype.updateEvery=wr.prototype.ke,wr.prototype.fit=wr.prototype.sc,wr.prototype.evict=wr.prototype.La,wr.prototype.mergeAndEvict=wr.prototype.kd,wr.prototype.offset=wr.prototype.offset,wr.prototype.get=wr.prototype.get,wr.prototype.find=wr.prototype.find,wr.prototype.markImmutable=wr.prototype.Wh,wr.prototype.release=wr.prototype.release,wr.prototype.getNumEvicted=wr.prototype.getNumEvicted,wr.prototype.getNumReferences=wr.prototype.getNumReferences;function Na(e,t,n,i){this.i=e,this.h=t,this.g=n,this.reverse=i}Na.prototype.ie=function(e){this.reverse=e},Na.prototype.dh=function(){return this.h},Na.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Na.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},te("shaka.media.SegmentIterator",Na),Na.prototype.next=Na.prototype.next,Na.prototype.current=Na.prototype.current,Na.prototype.currentPosition=Na.prototype.dh,Na.prototype.setReverse=Na.prototype.ie;function Ei(){wr.call(this,[]),this.h=[]}z(Ei,wr),g=Ei.prototype,g.clone=function(){var e=new Ei;return e.h=this.h.slice(),e},g.release=function(){for(var e=m(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},g.tc=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.tc(e)},g.find=function(e){for(var t=0,n=m(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var u=i.find(e);if(u!=null)return u+t;t+=i.getNumEvicted()+i.getNumReferences()}return null},g.get=function(e){for(var t=0,n=m(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var u=i.get(e-t);if(u)return u;u=i.getNumReferences(),t+=i.getNumEvicted()+u}return null},g.offset=function(){},g.ae=function(){},g.La=function(){},g.kd=function(){},g.sc=function(){},g.ke=function(){},te("shaka.media.MetaSegmentIndex",Ei),Ei.prototype.updateEvery=Ei.prototype.ke,Ei.prototype.fit=Ei.prototype.sc,Ei.prototype.mergeAndEvict=Ei.prototype.kd,Ei.prototype.evict=Ei.prototype.La,Ei.prototype.merge=Ei.prototype.ae,Ei.prototype.offset=Ei.prototype.offset,Ei.prototype.get=Ei.prototype.get,Ei.prototype.find=Ei.prototype.find,Ei.prototype.forEachTopLevelReference=Ei.prototype.tc,Ei.prototype.release=Ei.prototype.release;function op(e){var t=this;this.g=e,this.h=this.g.Md(),this.i=new pr(function(){t.g.og(.25*t.h)})}op.prototype.release=function(){this.set(this.Xb()),this.i&&(this.i.stop(),this.i=null),this.g=null},op.prototype.set=function(e){if(this.h!=e)e:{if(this.h=e,this.i.stop(),0<=this.h)try{var t=this.h;this.g.Md()!=t&&this.g.Df(t);break e}catch(n){}this.i.$a(.25),this.g.Md()!=0&&this.g.Df(0)}},op.prototype.Xb=function(){return this.g.Xb()};function wR(e){var t=this;this.h=e,this.g=new Set,this.i=new pr(function(){AR(t,!1)}).$a(.25)}wR.prototype.release=function(){this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function AR(e,t){for(var n=m(e.g),i=n.next();!i.done;i=n.next())i.value.j(e.h.currentTime,t)}function o8(){this.g=null,this.h=[]}function XE(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var i=e.next();!i.done;i=e.next())i=i.value,n+=i.state==t?i.duration:0;return n}function a8(e){function t(c){return{timestamp:c.timestamp,state:c.state,duration:c.duration}}for(var n=[],i=m(e.h),u=i.next();!u.done;u=i.next())n.push(t(u.value));return e.g&&n.push(t(e.g)),n}function s8(){this.i=this.h=null,this.g=[]}function QE(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function zm(){this.Ed=this.A=this.B=this.G=this.C=this.s=this.j=this.F=this.m=this.i=this.L=this.N=this.H=this.I=this.K=this.l=this.o=NaN,this.g=new o8,this.h=new s8}function JE(e,t,n){this.m=e,this.h=t,this.l=0,this.j=n,this.g=new Map,this.i=new Map}function u8(e,t){e.j=t,e=m(e.g.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function ap(e,t,n){if(n=n===void 0?!1:n,e.h.segmentIndex&&(t=e.h.segmentIndex.xb(Math.max(t,e.l),!0))){var i=t.next().value;if(n&&(i=t.next().value),i){for(;e.g.size<e.m&&i!=null&&(n=!0,i.preload&&i.ja!=null&&(n=!1),i.bc()==2&&(n=!1),n&&i.ca&&IR(e,i.ca),n&&!e.g.has(i)&&(n=new t_(e.j),RR(n,i,e.h),e.g.set(i,n)),e.l=i.startTime,!(e.h.fastSwitching&&i.md&&i.Wd));)i=t.next().value;e_(e)}}}function IR(e,t){if(e.h.segmentIndex&&!Array.from(e.i.keys()).some(function(i){return at(i,t)})){var n=new t_(e.j);RR(n,t,e.h),e.i.set(t,n)}}function bR(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&sp(e,n)}function rl(e){bR(e,e.g),bR(e,e.i),e.l=0}JE.prototype.La=function(e,t){t=t===void 0?!1:t;for(var n=m(this.g.keys()),i=n.next();!i.done;i=n.next())i=i.value,e>i.endTime&&sp(this,i);t&&e_(this)};function e_(e){for(var t=Array.from(e.g.keys()),n={},i=m(e.i.keys()),u=i.next();!u.done;n={wd:n.wd},u=i.next())n.wd=u.value,t.some(function(c){return function(d){return at(d.ca,c.wd)}}(n))||sp(e,n.wd)}function CR(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var i=n.pop();i&&sp(e,i)}e_(e)}function l8(e,t){t&&t!==e.h&&(rl(e),e.h=t)}function sp(e,t){var n=e.g;t instanceof dt&&(n=e.i),e=n.get(t),n.delete(t),e&&e.abort()}function t_(e){this.g=e,this.fe=this.Ef=null}function RR(e,t,n){var i=new Uint8Array(0);e.fe=e.g(t,n,function(u){return Oe(function(c){if(c.g==1)return 0<i.byteLength?i=li(i,u):i=u,e.Ef?N(c,e.Ef(i),3):c.u(0);i=new Uint8Array(0),$(c)})})}t_.prototype.abort=function(){this.fe&&this.fe.abort()};function n_(e){Sr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new pr(function(){for(var n=t.i(),i=m(t.g),u=i.next();!u.done;u=i.next())u=u.value,u.endTime<n.start&&(t.g.delete(u),u=new Wn("regionremove",new Map([["region",u]])),t.dispatchEvent(u))}).$a(2)}z(n_,Sr),n_.prototype.release=function(){this.g.clear(),this.h.stop(),Sr.prototype.release.call(this)};function Ym(e){Sr.call(this),this.g=new Map,this.h=e}z(Ym,Sr),Ym.prototype.release=function(){this.g.clear(),Sr.prototype.release.call(this)};function c8(e,t){var n=e.g.get(t);return n||(n={nd:[],Uf:null,contentType:t},e.g.set(t,n)),n}function f8(e,t,n){var i=c8(e,t.contentType);d8(e,i),e={ff:t,position:n},i=i.nd,t=i.findIndex(function(u){return u.position>=n}),0<=t?i.splice(t,i[t].position==n?1:0,e):i.push(e)}Ym.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var i=n.nd,u=i.length-1;0<=u;u--){var c=i[u];if(c.position<=e){i=c.ff;break e}}i=null}if((u=i)&&(u=n.Uf,u=!(u===i||u&&i&&u.bandwidth==i.bandwidth&&u.audioSamplingRate==i.audioSamplingRate&&u.codecs==i.codecs&&u.contentType==i.contentType&&u.frameRate==i.frameRate&&u.height==i.height&&u.mimeType==i.mimeType&&u.channelsCount==i.channelsCount&&u.pixelAspectRatio==i.pixelAspectRatio&&u.width==i.width)),u)e:{if(u=e,c=i.contentType,(c=this.h()[c])&&0<c.length){var d=c[c.length-1].end;if(u>=c[0].start&&u<d){u=!0;break e}}u=!1}u&&(n.Uf=i,JSON.stringify(i),n=new Wn("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}};function d8(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,u=t.nd;t.nd=u.filter(function(c,d){return!(c.position<=n&&d+1<u.length&&u[d+1].position<=n||c.position>=i)})}else t.nd=[]}function up(e,t,n,i,u){return e=Li(e,i,u),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function NR(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.l=new $u(function(){return h8(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null}}g=NR.prototype,g.destroy=function(){return this.l.destroy()};function h8(e){var t,n,i,u,c,d,h;return Oe(function(E){if(E.g==1){for(t=[],n=m(e.i.values()),i=n.next();!i.done;i=n.next())u=i.value,lp(u),t.push(cp(u));for(c=m(e.o.values()),d=c.next();!d.done;d=c.next())h=d.value,rl(h);return N(E,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.m=null,e.h=null,$(E)})}g.configure=function(e){if(this.h=e,this.I=new Hh({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(rl(t.W),t.W=null),t=m(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,rl(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(vr))&&t.W&&(rl(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(rl(t.W),t.W=null),t=m(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(CR(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(n.W=null)):0<e.segmentPrefetchLimit&&(n.W=r_(this,n.stream));e.disableAudioPrefetch||y8(this)},g.start=function(e){var t=this;return Oe(function(n){if(n.g==1)return N(n,v8(t,e||new Map),2);jr(t.l),t.C=!0,$(n)})};function p8(e,t){var n,i,u,c,d,h;Oe(function(E){switch(E.g){case 1:return n=yi,e.H++,i=e.H,fe(E,2),N(E,ri(e.g.V,n.ma),4);case 4:he(E,3);break;case 2:u=Ie(E),e.g&&e.g.onError(u);case 3:c=Si(t.mimeType,t.codecs),Ja(e.g.V,c,e.m.sequenceMode,t.external),d=e.g.V.F,(d.isTextVisible()||e.h.alwaysStreamText)&&e.H==i&&(h=DR(e,t),e.i.set(n.ma,h),Ss(e,h,0)),$(E)}})}function g8(e){var t=e.i.get(vr);t&&(lp(t),cp(t).catch(function(){}),e.i.delete(vr)),e.s=null}function xR(e,t){var n=0>e.g.eb(),i=e.i.get("video");i&&i.Z&&i.Z.ie(n),(i=e.i.get("audio"))&&i.Z&&i.Z.ie(n),(i=e.i.get(vr))&&i.Z&&i.Z.ie(n),(n=e.i.get("video"))&&(i=n.stream)&&(t?(t=i.trickModeVideo)&&!n.jc&&(rd(e,t,!1,0,!1),n.jc=i):(t=n.jc)&&(n.jc=null,rd(e,t,!0,0,!1)))}function MR(e,t,n,i,u,c){n=n===void 0?!1:n,i=i===void 0?0:i,u=u===void 0?!1:u,c=c===void 0?!1:c,e.j=t,e.C&&(t.video&&rd(e,t.video,n,i,u,c),t.audio&&rd(e,t.audio,n,i,u,c))}function Wm(e,t){Oe(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):N(n,t.createSegmentIndex(),2):n.return();rd(e,t,!0,0,!1),$(n)})}function rd(e,t,n,i,u,c){var d=e.i.get(t.type);d||t.type!=vr?d&&(d.jc&&(t.trickModeVideo?(d.jc=t,t=t.trickModeVideo):d.jc=null),d.stream!=t||u)&&(e.o.has(t)?d.W=e.o.get(t):d.W&&l8(d.W,t),t.type==vr&&(u=Si(t.mimeType,t.codecs),Ja(e.g.V,u,e.m.sequenceMode,t.external)),e.o.has(d.stream)||d.stream.closeSegmentIndex&&d.stream.closeSegmentIndex(),d.stream=t,d.Z=null,d.Of=!!c,n&&(d.Xc?d.le=!0:d.Qa?(d.Lb=!0,d.Id=i,d.le=!0):(lp(d),s_(e,d,!0,i).catch(function(h){e.g&&e.g.onError(h)}))),m8(e,d).catch(function(h){e.g&&e.g.onError(h)})):p8(e,t)}function m8(e,t){var n,i;return Oe(function(u){if(u.g==1)return t.Ya?(n=t.stream,i=t.Ya,n.segmentIndex?u.u(2):N(u,n.createSegmentIndex(),2)):u.return();if(t.Ya!=i||t.stream!=n)return u.return();var c=e.g.Ld(),d=Dt(e.g.V,t.type),h=t.stream.segmentIndex.find(t.Oa?t.Oa.endTime:c),E=h==null?null:t.stream.segmentIndex.get(h);h=E&&E.ja?E.ja-E.Aa:null,E&&!h&&(h=(E.endTime-E.getStartTime())*(t.stream.bandwidth||0)/8),h?((E=E.ca)&&(h+=(E.ja?E.ja-E.Aa:null)||0),E=e.g.getBandwidthEstimate(),c=8*h/E<(d||0)-c-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.Ya.h.g>h):c=!1,c&&t.Ya.abort(),$(u)})}g.od=function(){if(this.g)for(var e=this.g.Ld(),t=m(this.i.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.i.get(i);var u=null;n.Z&&(u=n.Z.current()),(!u||u.startTime>e||u.endTime<e)&&(n.Z=null),u=this.g.V,u.C?u=!1:i==vr?(u=u.g,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=Hn(u,i),u=Ft(u,e)),u||((Dt(this.g.V,i)!=null||n.Qa)&&$m(this,n),n.Ya&&(n.Ya.abort(),n.Ya=null),i===vr&&(i=this.g.V,i.H&&i.H.h()),n.od=!0)}};function $m(e,t){t.Xc||t.Lb||(t.Qa?(t.Lb=!0,t.Id=0):Hs(e.g.V,t.type)==null?t.ub==null&&Ss(e,t,0):(lp(t),s_(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function v8(e,t){var n,i,u,c,d,h,E,A,k,G;return Oe(function(ne){if(ne.g==1){if(n=yi,!e.j)throw new pt(2,5,5006);return i=new Map,u=new Set,e.j.audio&&(i.set(n.S,e.j.audio),u.add(e.j.audio)),e.j.video&&(i.set(n.fa,e.j.video),u.add(e.j.video)),e.s&&(i.set(n.ma,e.s),u.add(e.s)),c=e.g.V,N(ne,c.init(i,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(jr(e.l),e.updateDuration(),d=m(i.keys()),h=d.next();!h.done;h=d.next())E=h.value,A=i.get(E),e.i.has(E)||(k=DR(e,A),t.has(A.id)&&(G=t.get(A.id),u8(G,function(Y,ve,Pe){return Xm(Y,ve,Pe||null,e.h.retryParameters,e.g.zb)}),k.W=G),e.i.set(E,k),Ss(e,k,0));$(ne)})}function DR(e,t){return{stream:t,type:t.type,Z:null,W:r_(e,t),Oa:null,ec:null,cf:null,af:null,$e:null,jc:null,endOfStream:!1,Qa:!1,ub:null,Lb:!1,Id:0,le:!1,Xc:!1,od:!0,uf:!1,gd:!1,Ya:null}}function r_(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===vr&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===vr&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.h?n:0<e.h.segmentPrefetchLimit?new JE(e.h.segmentPrefetchLimit,t,function(i,u,c){return Xm(i,u,c||null,e.h.retryParameters,e.g.zb)}):null}function y8(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,i={},u=m(e.m.variants),c=u.next();!c.done;i={Fa:i.Fa},c=u.next())if(i.Fa=c.value,i.Fa.audio)if(e.o.has(i.Fa.audio)){if(c=e.o.get(i.Fa.audio),CR(c,t),!(0<t&&n.some(function(h){return function(E){return Zu(h.Fa.audio.language,E)}}(i)))){var d=e.i.get(i.Fa.audio.type);c!==(d&&d.W)&&rl(c),e.o.delete(i.Fa.audio)}}else 0>=t||!n.some(function(h){return function(E){return Zu(h.Fa.audio.language,E)}}(i))||!(c=r_(e,i.Fa.audio))||(i.Fa.audio.segmentIndex||i.Fa.audio.createSegmentIndex(),e.o.set(i.Fa.audio,c))}g.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.V.Za(e):this.g.V.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function E8(e,t){var n,i,u,c,d;return Oe(function(h){switch(h.g){case 1:if(jr(e.l),t.Qa||t.ub==null||t.Xc)return h.return();if(t.ub=null,!t.Lb){h.u(2);break}return N(h,s_(e,t,t.le,t.Id),3);case 3:return h.return();case 2:if(t.stream.segmentIndex){h.u(4);break}return n=t.stream,N(h,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.ub||Ss(e,t,0),h.return();case 4:fe(h,6),i=_8(e,t),i!=null&&(Ss(e,t,i),t.gd=!1),he(h,7);break;case 6:return u=Ie(h),N(h,PR(e,t,u),8);case 8:return h.return();case 7:if(c=Array.from(e.i.values()),!e.C||!c.every(function(E){return E.endOfStream})){h.u(0);break}return N(h,e.g.V.endOfStream(),10);case 10:jr(e.l),d=e.g.V.getDuration(),d!=0&&d<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Za(d),$(h)}})}function _8(e,t){if(o_(t))return Ir(e.g.V,t.stream.originalId||""),null;if(t.type==vr&&fr(e.g.V),!e.g.V.ea&&t.type!=vr)return e.h.updateIntervalSeconds/2;var n=e.g.Ld();if(t.type==="audio")for(var i=m(e.o.keys()),u=i.next();!u.done;u=i.next())u=e.o.get(u.value),u.La(n,!0),ap(u,n);i=t.Oa?t.Oa.endTime:n,u=yn(e.g.V,t.type,n);var c=Math.max(1,Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),d=e.m.presentationTimeline.getDuration()-i,h=Dt(e.g.V,t.type);if(1e-6>d&&h)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(vr))&&o_(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,u>=c)return e.h.updateIntervalSeconds/2;if(u=T8(e,t,n,h),!u)return e.h.updateIntervalSeconds;for(c=1/0,d=Array.from(e.i.values()),d=m(d),h=d.next();!h.done;h=d.next())h=h.value,o_(h)||h.Z&&!h.Z.current()||(c=Math.min(c,h.Oa?h.Oa.endTime:n));return i>=c+e.m.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.Z&&!e.o.has(t.stream)&&(t.W.La(n),ap(t.W,u.startTime)),S8(e,t,n,u).catch(function(){}),null)}function T8(e,t,n,i){if(t.Z)return t.Z.current();if(t.Oa||i)return t.Z=t.stream.segmentIndex.xb(t.Oa?t.Oa.endTime:i,!1,0>e.g.eb()),t.Z&&t.Z.next().value;i=e.h.inaccurateManifestTolerance;var u=Math.max(n-i,0);e=0>e.g.eb();var c=null;return i&&(t.Z=t.stream.segmentIndex.xb(u,!1,e),c=t.Z&&t.Z.next().value),c||(t.Z=t.stream.segmentIndex.xb(n,!1,e),c=t.Z&&t.Z.next().value),c}function S8(e,t,n,i){var u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:if(u=yi,c=t.stream,d=t.Z,t.Qa=!0,fe(Ue,2),i.bc()==2)throw new pt(1,1,1011);return N(Ue,b8(e,t,i),4);case 4:return jr(e.l),e.A?Ue.return():(h=c.mimeType=="video/mp4"||c.mimeType=="audio/mp4",E=p.ReadableStream,e.h.lowLatencyMode&&E&&h&&(e.m.type!="HLS"||i.m)?(G=new Uint8Array(0),Y=ne=!1,Pe=function(mt){var Rt,Ht,Ut;return Oe(function(Et){switch(Et.g){case 1:if(ne||(Y=!0,jr(e.l),e.A))return Et.return();if(fe(Et,2),G=A8(G,mt),Rt=!1,Ht=0,new kr().box("mdat",function(jt){Ht=jt.size+jt.start,Rt=!0}).parse(G,!1,!0),!Rt){Et.u(4);break}return Ut=G.subarray(0,Ht),G=G.subarray(Ht),N(Et,i_(e,t,n,c,i,Ut,!0),5);case 5:t.W&&t.Z&&ap(t.W,i.startTime,!0);case 4:he(Et,0);break;case 2:ve=Ie(Et),$(Et)}})},N(Ue,a_(e,t,i,Pe),9)):(A=a_(e,t,i),N(Ue,A,7)));case 7:return k=Ue.h,jr(e.l),e.A?Ue.return():(jr(e.l),t.Lb?(t.Qa=!1,Ss(e,t,0),Ue.return()):N(Ue,i_(e,t,n,c,i,k),6));case 9:if(xe=Ue.h,ve)throw ve;if(Y){Ue.u(10);break}return ne=!0,jr(e.l),e.A?Ue.return():t.Lb?(t.Qa=!1,Ss(e,t,0),Ue.return()):N(Ue,i_(e,t,n,c,i,xe),10);case 10:t.W&&t.Z&&ap(t.W,i.startTime,!0);case 6:if(jr(e.l),e.A)return Ue.return();t.Oa=i,d.next(),t.Qa=!1,t.uf=!1,Ge=e.g.V.ob(),Te=Ge[t.type],JSON.stringify(Te),t.Lb||e.g.mf(i,t.stream),Ss(e,t,0),he(Ue,0);break;case 2:if(We=Ie(Ue),jr(e.l,We),e.A)return Ue.return();if(t.Qa=!1,We.code==7001)t.Qa=!1,lp(t),Ss(e,t,0),Ue.u(0);else if(t.type==u.ma&&e.h.ignoreTextStreamFailures)e.i.delete(u.ma),Ue.u(0);else if(We.code==3017)I8(e,t,We),Ue.u(0);else return t.gd=!0,We.category==1&&t.W&&sp(t.W,i),We.severity=2,N(Ue,PR(e,t,We),0)}})}function w8(e,t,n){var i,u,c,d,h;return Oe(function(E){if(E.g==1)return i=t,i.cryptoKey?E.u(2):N(E,i.fetchKey(),3);if(u=i.iv,!u)for(u=Qn(new ArrayBuffer(16)),c=i.firstMediaSequenceNumber+n,d=u.byteLength-1;0<=d;d--)u[d]=c&255,c>>=8;return t.blockCipherMode=="CBC"?h={name:"AES-CBC",iv:u}:h={name:"AES-CTR",counter:u,length:64},E.return(p.crypto.subtle.decrypt(h,i.cryptoKey,e))})}function A8(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function I8(e,t,n){if(!Array.from(e.i.values()).some(function(u){return u!=t&&u.uf})){if(0<e.h.maxDisabledTime&&e.g.Jd(t.stream,e.h.maxDisabledTime))return;var i=Math.round(100*e.B);if(20<i)e.B-=.2;else if(4<i)e.B-=.04;else{t.gd=!0,e.A=!0,e.g.onError(n);return}t.uf=!0}Ss(e,t,4)}function b8(e,t,n){var i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe;return Oe(function(xe){switch(xe.g){case 1:if(i=yi,u=[],c=Math.max(0,n.appendWindowStart-.1),d=n.appendWindowEnd+.01,h=Ya(t.stream.codecs),E=Ca(t.stream.mimeType),A=n.timestampOffset,A==t.cf&&c==t.af&&d==t.$e&&h==t.bf&&E==t.kg){xe.u(2);break}if(k=t.bf&&t.kg&&JB(e.g.V,t.type,E,h),!k){xe.u(3);break}if(G=null,t.type===i.fa?G=e.i.get(i.S):t.type===i.S&&(G=e.i.get(i.fa)),!G){xe.u(3);break}return N(xe,cp(G).catch(function(){}),5);case 5:G.ec=null,$m(e,G);case 3:return ne=function(){var Ge,Te,We;return Oe(function(Ue){if(Ue.g==1)return Ge=new Map,e.j.audio&&Ge.set(i.S,e.j.audio),e.j.video&&Ge.set(i.fa,e.j.video),fe(Ue,2),t.af=c,t.$e=d,t.bf=h,t.kg=E,t.cf=A,Te=e.m.sequenceMode||e.m.type=="HLS",N(Ue,Qr(e.g.V,t.type,A,c,d,Te,n.mimeType||t.stream.mimeType,n.codecs||t.stream.codecs,Ge),4);if(Ue.g!=2)return he(Ue,0);throw We=Ie(Ue),t.af=null,t.$e=null,t.bf=null,t.cf=null,We})},N(xe,ne(),2);case 2:return at(n.ca,t.ec)||(t.ec=n.ca,n.l&&n.ca&&(Y=a_(e,t,n.ca),ve=function(){var Ge,Te,We,Ue,mt,Rt,Ht;return Oe(function(Ut){switch(Ut.g){case 1:return fe(Ut,2),N(Ut,Y,4);case 4:return Ge=Ut.h,jr(e.l),Te=null,We=new Map,Ue={projection:null,hfov:null},mt=new kr,mt.box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(Et){Te=It(Et.reader,Et.version).timescale}).box("hdlr",function(Et){switch(Et=Et.reader,Et.skip(8),Et.hc()){case"soun":We.set(i.S,Te);break;case"vide":We.set(i.fa,Te)}Te=null}).box("minf",yr).box("stbl",yr).O("stsd",vu).box("encv",wi).box("avc1",wi).box("avc3",wi).box("hev1",wi).box("hvc1",wi).box("dvav",wi).box("dva1",wi).box("dvh1",wi).box("dvhe",wi).box("vexu",yr).box("proj",yr).O("prji",function(Et){Et=Et.reader.hc(),Ue.projection=Et}).box("hfov",function(Et){Et=Et.reader.M()/1e3,Ue.hfov=Et}).parse(Ge),N8(e,Ue),We.has(t.type)?n.ca.timescale=We.get(t.type):Te!=null&&(n.ca.timescale=Te),Rt=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,N(Ut,e.g.Qf(t.type,Ge),5);case 5:return N(Ut,Tr(e.g.V,t.type,Ge,null,t.stream,Rt),6);case 6:he(Ut,0);break;case 2:throw Ht=Ie(Ut),t.ec=null,Ht}})},e.g.Yh(n.startTime,n.ca),u.push(ve()))),e.m.sequenceMode&&(Pe=t.Oa?t.Oa.j:null,n.j!=Pe&&u.push(Ks(e.g.V,t.type,n.startTime))),N(xe,Promise.all(u),0)}})}function i_(e,t,n,i,u,c,d){d=d===void 0?!1:d;var h,E,A,k,G,ne;return Oe(function(Y){switch(Y.g){case 1:return h=i.closedCaptions&&0<i.closedCaptions.size,A=i.emsgSchemeIdUris!=null&&0<i.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,k=e.h.parsePrftBox&&!e.F,(A||k)&&(E=new kr),A&&E.O("emsg",function(ve){var Pe=i.emsgSchemeIdUris;if(ve.version===0)var xe=ve.reader.hc(),Ge=ve.reader.hc(),Te=ve.reader.M(),We=ve.reader.M(),Ue=ve.reader.M(),mt=ve.reader.M(),Rt=u.startTime+We/Te;else Te=ve.reader.M(),Rt=ve.reader.Cc()/Te+u.timestampOffset,We=Rt-u.startTime,Ue=ve.reader.M(),mt=ve.reader.M(),xe=ve.reader.hc(),Ge=ve.reader.hc();ve=ve.reader.sb(ve.reader.getLength()-ve.reader.wa()),(Pe&&Pe.includes(xe)||e.h.dispatchAllEmsgBoxes)&&(xe=="urn:mpeg:dash:event:2012"?e.g.Zh():(Pe=new Map().set("detail",{startTime:Rt,endTime:Rt+Ue/Te,schemeIdUri:xe,value:Ge,timescale:Te,presentationTimeDelta:We,eventDuration:Ue,id:mt,messageData:ve}),Pe=new Wn("emsg",Pe),Pe.cancelable=!0,e.g.onEvent(Pe),Pe.defaultPrevented||xe!="https://aomedia.org/emsg/ID3"&&xe!="https://developer.apple.com/streaming/emsg-id3"||(xe=Dn(ve),xe.length&&u&&e.g.$h([{cueTime:u.startTime,data:ve,frames:xe,dts:u.startTime,pts:u.startTime}],0,u.endTime))))}),k&&E.O("prft",function(ve){if(!e.F&&u.ca.timescale){var Pe=ve.reader,xe=ve.version;Pe.M(),ve=Pe.M();var Ge=Pe.M();ve=1e3*ve+Ge/Math.pow(2,32)*1e3,xe===0?Pe=Pe.M():(xe=Pe.M(),Pe=Pe.M(),Pe=xe*Math.pow(2,32)+Pe),ve=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+ve).getTime(),Pe=new Map().set("detail",{wallClockTime:ve,programStartDate:new Date(ve-Pe/u.ca.timescale*1e3)}),Pe=new Wn("prft",Pe),e.g.onEvent(Pe),e.F=!0}}),(A||k)&&E.parse(c),N(Y,C8(e,t,n),2);case 2:return jr(e.l),G=t.od,t.od=!1,ne=t.Of,t.Of=!1,N(Y,e.g.Qf(t.type,c),3);case 3:return N(Y,Tr(e.g.V,t.type,c,u,i,h,G,ne,d),4);case 4:jr(e.l),$(Y)}})}function C8(e,t,n){var i,u,c,d;return Oe(function(h){if(h.g==1)return i=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),u=Hs(e.g.V,t.type),u==null?h.return():(c=n-u,d=c-i,d<=e.h.evictionGoal?h.return():N(h,e.g.V.remove(t.type,u,u+d),2));jr(e.l),$(h)})}function o_(e){return e&&e.type==vr&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function a_(e,t,n,i){var u,c,d,h,E;return Oe(function(A){switch(A.g){case 1:if(u=n.ed())return A.return(u);if(c=null,t.W){var k=t.W,G=k.g;n instanceof dt&&(G=k.i),G.has(n)?(k=G.get(n),i&&(k.Ef=i),c=k.fe):c=null}return c||(c=Xm(n,t.stream,i||null,e.h.retryParameters,e.g.zb)),d=0,t.Z&&(d=t.Z.h),t.Ya=c,N(A,c.promise,2);case 2:if(h=A.h,t.Ya=null,E=h.data,!n.aesKey){A.u(3);break}return N(A,w8(E,n.aesKey,d),4);case 4:E=A.h;case 3:return A.return(E)}})}function Xm(e,t,n,i,u){var c=e instanceof Je?e:void 0,d=c?1:0;return e=up(e.$(),e.Aa,e.ja,i,n),e.contentType=t.type,u.request($a,e,{type:d,stream:t,segment:c})}function s_(e,t,n,i){var u,c;return Oe(function(d){if(d.g==1)return t.Lb=!1,t.le=!1,t.Id=0,t.Xc=!0,t.Oa=null,t.ec=null,t.Z=null,t.W&&!e.o.has(t.stream)&&rl(t.W),i?(u=e.g.Ld(),c=e.g.V.getDuration(),N(d,e.g.V.remove(t.type,u+i,c),3)):N(d,ri(e.g.V,t.type),4);if(d.g!=3)return jr(e.l),n?N(d,e.g.V.flush(t.type),3):d.u(3);jr(e.l),t.Xc=!1,t.endOfStream=!1,t.Qa||t.ub||Ss(e,t,0),$(d)})}function Ss(e,t,n){var i=t.type;(i!=vr||e.i.has(i))&&(t.ub=new Ls(function(){var u;return Oe(function(c){if(c.g==1)return fe(c,2),N(c,E8(e,t),4);if(c.g!=2)return he(c,0);u=Ie(c),e.g&&e.g.onError(u),$(c)})}).X(n))}function lp(e){e.ub!=null&&(e.ub.stop(),e.ub=null)}function cp(e){return Oe(function(t){return e.Ya?N(t,e.Ya.abort(),0):t.u(0)})}function PR(e,t,n){var i;return Oe(function(u){if(u.g==1)return N(u,Kh(e.I),2);jr(e.l),i=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.category===1&&0<i&&(n.handled=e.g.Jd(t.stream,i),n.handled&&(n.severity=1)),e.g.onError(n),n.handled||e.h.failureCallback(n),$(u)})}function R8(e){var t,n,i,u,c,d;return Oe(function(h){return h.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?h.return(!1):(e.K=t,i=yi,(u=e.i.get(i.S))&&(u.ec=null,$m(e,u),cp(u).catch(function(){})),(c=e.i.get(i.fa))&&(c.ec=null,$m(e,c),cp(c).catch(function(){})),d=new Map,e.j.audio&&d.set(i.S,e.j.audio),e.j.video&&d.set(i.fa,e.j.video),N(h,lR(e.g.V,d),2))):h.return(!0)})}function N8(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Wn("spatialvideoinfo",n)}else n=new Wn("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function u_(){}function l_(e,t,n,i,u){var c=u in i,d=!0,h;for(h in t){var E=u+"."+h,A=c?i[u]:n[h];c||h in n?t[h]===void 0?A===void 0||c?delete e[h]:e[h]=Wa(A):A.constructor==Object&&t[h]&&t[h].constructor==Object?(e[h]||(e[h]=Wa(A)),E=l_(e[h],t[h],A,i,E),d=d&&E):typeof t[h]!=typeof A||t[h]==null||typeof t[h]!="function"&&t[h].constructor!=A.constructor?(de("Invalid config, wrong type for "+E),d=!1):(typeof n[h]=="function"&&n[h].length!=t[h].length&&He("Unexpected number of arguments for "+E),e[h]=t[h]):(de("Invalid config, unrecognized key "+E),d=!1)}return d}function Qm(e,t){for(var n={},i=n,u=0,c=0;u=e.indexOf(".",u),!(0>u);)(u==0||e[u-1]!="\\")&&(c=e.substring(c,u).replace(/\\\./g,"."),i[c]={},i=i[c],c=u+1),u+=1;return i[e.substring(c).replace(/\\\./g,".")]=t,n}function id(e,t){return e&&t}te("shaka.util.ConfigUtils",u_),u_.convertToConfigObject=Qm,u_.mergeConfigObjects=l_;function es(){}function OR(e){return e=Va(e),new si(e).wb}function fp(e,t,n){function i(h){tn(c).setUint32(d,h.byteLength,!0),d+=4,c.set(Qn(h),d),d+=h.byteLength}if(!n||!n.byteLength)throw new pt(2,6,6015);var u;typeof t=="string"?u=Mf(t,!0):u=t,e=Va(e),e=Mf(e,!0);var c=new Uint8Array(12+e.byteLength+u.byteLength+n.byteLength),d=0;return i(e),i(u),i(n),c}function LR(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Va(e).split("skd://").pop(),fp(e,n,t))}function c_(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}te("shaka.util.FairPlayUtils",es),es.commonFairPlayResponse=function(e,t){if(e===2){try{var n=Vr(t.data)}catch(u){return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch(u){}e&&(t.data=Ti(Ho(n)))}},es.expressplayFairPlayRequest=function(e,t){c_(e,t)},es.conaxFairPlayRequest=function(e,t){c_(e,t)},es.ezdrmFairPlayRequest=function(e,t){c_(e,t)},es.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Qn(t.body),e=du(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=za("spc="+e))},es.expressplayInitDataTransform=function(e,t,n){return LR(e,t,n)},es.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Va(e).split("skd://").pop().split("?").shift(),n=p.atob(n);var i=new ArrayBuffer(2*n.length);i=Ou(i);for(var u=0,c=n.length;u<c;u++)i[u]=n.charCodeAt(u);return fp(e,i,t)},es.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Va(e).split(";").pop(),fp(e,n,t))},es.verimatrixInitDataTransform=function(e,t,n){return LR(e,t,n)},es.initDataTransform=fp,es.defaultGetContentId=OR,es.isFairPlaySupported=function(){var e;return Oe(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},fe(t,2),N(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(Ie(t),t.return(!1))})};function f_(){}function od(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:la(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(E,A,k){return p.shakaMediaKeysPolyfill&&A=="skd"&&(A=k.serverCertificate,k=OR(E),E=fp(E,k,A)),E},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:vs(),minHdcpVersion:"",ignoreDuplicateInitData:!ku()};(vs()||Nr())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",i=!1;ku()||Lu()||Yr("Tizen 4")||aa()&&fu()===38||aa()&&fu()===53||aa()&&fu()===68||sa()&&(!sa()||!Yr("Android"))||(navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform&&navigator.platform.toLowerCase().includes("windows"))&&bl()||(n="smooth",i=!0),i={retryParameters:la(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:Jm,manifestPreprocessorTXml:ev,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:i,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Lu()||ku()||aa()&&fu()===38||Nr()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:Jm,manifestPreprocessorTXml:ev,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var u={retryParameters:la(),failureCallback:function(E){return id([E])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,liveSyncPanicMode:!1,liveSyncPanicThreshold:60,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1};(aa()||Ha()||sa()||Es())&&(u.stallSkip=0);var c={trackSelectionCallback:function(E){return Oe(function(A){return A.return(E)})},downloadSizeCallback:function(E){var A;return Oe(function(k){return k.g==1?navigator.storage&&navigator.storage.estimate?N(k,navigator.storage.estimate(),3):k.return(!0):(A=k.h,k.return(A.usage+E<.95*A.quota))})},progressCallback:function(E,A){return id([E,A])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(E){return id([E],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(E,A){return id([E,A])}};var d=!1;(aa()||Ha()||sa()||Es()||_c()||Nr()||vs())&&(d=!0);var h={drm:t,manifest:i,streaming:u,mediaSource:n,offline:c,abrFactory:function(){return new Hr},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1,skipPlayDetection:d}};return c.trackSelectionCallback=function(E){return Oe(function(A){return A.return(x8(E,h.preferredAudioLanguage,h.preferredVideoHdrLevel))})},h}function Gc(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return l_(e,t,n||od(),i,"")}function x8(e,t,n){var i=n;i=="AUTO"&&(i=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var u=e.filter(function(h){return!(h.type!="variant"||h.hdr&&h.hdr!=i)});n=[];var c=Nl(t,u.map(function(h){return h.language}));c&&(n=u.filter(function(h){return Cr(h.language)==c})),n.length==0&&(n=u.filter(function(h){return h.primary})),n.length==0&&(u.map(function(h){return h.language}),n=u);var d=n.filter(function(h){return h.height&&480>=h.height});for(d.length&&(d.sort(function(h,E){return E.height-h.height}),n=d.filter(function(h){return h.height==d[0].height})),t=[],n.length&&(u=Math.floor(n.length/2),n.sort(function(h,E){return h.bandwidth-E.bandwidth}),t.push(n[u])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=vr&&n.type!="image"||t.push(n);return t}function Jm(e){return id([e],e)}function ev(e){return id([e],e)}te("shaka.util.PlayerConfiguration",f_),f_.mergeConfigObjects=Gc,f_.createDefault=od;function il(e,t,n,i,u){Sr.call(this),this.K=e,this.Y=t,this.bb=u.networkingEngine,this.aa=i,this.m=null,this.Vb=n,this.Ia=0,this.Tb=u.rc,this.A=u.Th,this.Ub=u.Uh,this.g=u.config,this.j=this.B=this.h=null,this.sa=!1,this.C=u.di,this.Ga=!1,this.l=null,this.ea=!1,this.i=this.s=null,this.da=!1,this.I=new Map,this.Ha=!1,this.lb=u.ci,this.ba=new zm,this.qa=new Rr,this.pa=new Rr,this.L=new Rr,this.F=new Rr,this.F.catch(function(){}),this.N=null,this.o=!1,this.Rb=u.Vg,this.ta=null,this.mb=u.Ug,this.T=!1,this.H=[],this.G=[]}z(il,Sr);function tv(e,t,n){(e=t?e.G:e.H)?e.push(n):n()}function M8(e){if(e.G)for(var t=m(e.G),n=t.next();!n.done;n=t.next())n=n.value,n();e.G=null}function kR(e,t){if(e.N=t,e.T=!0,e.H){t=m(e.H);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.H=null}g=il.prototype,g.getStartTime=function(){return this.aa},g.ad=function(){return this.K},g.Te=function(){return this.h};function D8(e){return e.da=!0,e.i}function P8(e){return e.sa=!0,e.j}function O8(e){return e.Ga=!0,e.C}g.getStats=function(){return this.ba};function L8(e){return e.ea=!0,e.l}function k8(e){return e.Ha=!0,e.I}g.start=function(){var e=this,t;return Oe(function(n){switch(n.g){case 1:return N(n,Promise.resolve(),2);case 2:return fe(n,3),N(n,F8(e),5);case 5:return e.o?n.return():(e.qa.resolve(),N(n,U8(e),6));case 6:if(e.o)return n.return();if(e.pa.resolve(),e.m||(e.m=new Ol(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups),mm(e.h,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes)),e.mb){var i=e.g.abrFactory;e.s=i,e.i=i(),e.i.configure(e.g.abr)}if(e.Rb){i=e.h.presentationTimeline.R();var u=Zf(e.h.variants);u=e.m.create(u),e.i.configure(e.g.abr),e.i.setVariants(Array.from(u.values())),(u=e.i.chooseVariant(!0))&&(e.ta=u,u.video&&FR(e,u.video,i),u.audio&&FR(e,u.audio,i))}return N(n,void 0,7);case 7:if(e.o)return n.return();e.L.resolve(),he(n,0);break;case 3:throw t=Ie(n),e.F.reject(t),t}})},g.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Sr.prototype.dispatchEvent.call(this,e)},g.onError=function(e){e.severity===2&&(this.F.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Wn("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function d_(e,t){e.dispatchEvent(new Wn("onstatechange",new Map().set("state",t)))}function F8(e){var t,n,i,u,c;return Oe(function(d){if(d.g==1)return d_(e,"manifest-parser"),e.j||(e.B=be(e.K,e.Y),e.j=e.B(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,d_(e,"manifest"),e.h?d.u(2):(n=e,N(d,e.j.start(e.K,e.Ub),3));if(d.g!=2&&(n.h=d.h),i=new Wn("manifestparsed",void 0),e.dispatchEvent(i),e.h.variants.length==0)throw new pt(2,4,4036);B8(e.h),u=Date.now()/1e3,c=u-t,e.ba.F=c,$(d)})}function U8(e){var t,n,i,u,c;return Oe(function(d){switch(d.g){case 1:d_(e,"drm-engine"),e.Ia=Date.now()/1e3,e.l=e.Tb(),e.A.g=e.l,e.l.configure(e.g.drm);var h=e.A;if(t=Ic(e.h.variants,h.h.restrictions,h.i),!t){d.u(2);break}return n=new Wn("trackschanged",void 0),N(d,Promise.resolve(),3);case 3:e.dispatchEvent(n);case 2:return i=Zf(e.h.variants),N(d,Bm(e.l,i,e.h.offlineSessionIds),4);case 4:return N(d,je(e.A,e.h),5);case 5:if(u=d.h,!u){d.u(0);break}return c=new Wn("trackschanged",void 0),N(d,Promise.resolve(),7);case 7:e.dispatchEvent(c),$(d)}})}g.configure=function(e,t){e=Qm(e,t),Gc(this.g,e)},g.getConfiguration=function(){return Wa(this.g)};function FR(e,t,n){var i,u,c,d,h;Oe(function(E){if(E.g==1)return i=e.g.streaming.segmentPrefetchLimit||2,u=new JE(i,t,function(A,k,G){return Xm(A,k,G||null,e.g.streaming.retryParameters,e.bb)}),e.I.set(t.id,u),N(E,t.createSegmentIndex(),2);c=e.aa||0,(h=(d=t.segmentIndex.xb(c))?d.current():null)||(h=t.segmentIndex.get(0)),h&&(n?h.ca&&IR(u,h.ca):ap(u,h.startTime)),$(E)})}g.Fi=function(){return Promise.race([this.L,this.F])},g.destroy=function(){var e=this,t,n,i;return Oe(function(u){switch(u.g){case 1:if(e.o=!0,!e.j||e.sa){u.u(2);break}return N(u,e.j.stop(),2);case 2:if(!e.i||e.da){u.u(4);break}return N(u,e.i.stop(),4);case 4:if(e.C&&!e.Ga&&e.C.release(),!e.l||e.ea){u.u(6);break}return N(u,e.l.destroy(),6);case 6:if(0<e.I.size&&!e.Ha)for(t=m(e.I.values()),n=t.next();!n.done;n=t.next())i=n.value,rl(i);$(u)}})};function B8(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}te("shaka.media.PreloadManager",il),il.prototype.destroy=il.prototype.destroy,il.prototype.waitForFinish=il.prototype.Fi;function nv(e,t){Sr.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{oc:null,nc:ad,cc:function(i,u){return qc(n,"enter",i,u)}},{oc:dp,nc:ad,cc:function(i,u){return qc(n,"enter",i,u)}},{oc:hp,nc:ad,cc:function(i,u){return qc(n,"enter",i,u)}},{oc:ad,nc:dp,cc:function(i,u){return qc(n,"exit",i,u)}},{oc:ad,nc:hp,cc:function(i,u){return qc(n,"exit",i,u)}},{oc:dp,nc:hp,cc:function(i,u){return qc(n,"skip",i,u)}},{oc:hp,nc:dp,cc:function(i,u){return qc(n,"skip",i,u)}}],this.h=new _t,this.h.D(this.i,"regionremove",function(i){n.g.delete(i.region)})}z(nv,Sr),nv.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Sr.prototype.release.call(this)},nv.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.g),i=n.next();!i.done;i=n.next()){i=i.value;var u=this.g.get(i),c=e<i.startTime?dp:e>i.endTime?hp:ad;this.g.set(i,c);for(var d=m(this.m),h=d.next();!h.done;h=d.next())h=h.value,h.oc==u&&h.nc==c&&h.cc(i,t)}}};function qc(e,t,n,i){t=new Wn(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}var dp=1,ad=2,hp=3;function h_(e,t,n){var i,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:var G=new si(e).Pa.split("/").pop().split(".");return i=G.length==1?"":G.pop().toLowerCase(),(u=j8[i])?k.return(u):(c=0,d=Li([e],n),fe(k,2),d.method="HEAD",N(k,t.request(c,d).promise,4));case 4:h=k.h,u=h.headers["content-type"],he(k,3);break;case 2:if(E=Ie(k),!E||E.code!=1002&&E.code!=1001){k.u(3);break}return d.method="GET",N(k,t.request(c,d).promise,6);case 6:A=k.h,u=A.headers["content-type"];case 3:return k.return(u?u.toLowerCase().split(";").shift():"")}})}var j8={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function UR(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(d){return UR(d,e)}).join("");var n=[],i=700<=e.fontWeight,u=e.fontStyle=="italic",c=e.textDecoration.includes("underline");return i&&n.push(["b"]),u&&n.push(["i"]),c&&n.push(["u"]),u=e.color,u==""&&t&&(u=t.color),i="",(u=BR(u))&&(i+="."+u),u=e.backgroundColor,u==""&&t&&(u=t.backgroundColor),(t=BR(u))&&(i+=".bg_"+t),i&&n.push(["c",i]),n.reduceRight(function(d,h){var E=m(h);return h=E.next().value,E=E.next().value,"<"+h+(E===void 0?"":E)+">"+d+"</"+h+">"},e.payload)}function BR(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function p_(e,t){var n=[];e=m(e);for(var i=e.next();!i.done;i=e.next())if(i=i.value,i.isContainer)n.push.apply(n,T(p_(i.nestedCues,i)));else{var u=i.clone();u.nestedCues=[],u.payload=UR(i,t),n.push(u)}return n}function ha(e,t){this.g=null;for(var n=m(Array.from(e.textTracks)),i=n.next();!i.done;i=n.next())i=i.value,i.mode="disabled",i.label==t&&(this.g=i);this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}g=ha.prototype,g.configure=function(){},g.remove=function(e,t){return this.g?(jR(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},g.append=function(e){var t=p_(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];var i={};t=m(t);for(var u=t.next();!u.done;i={qc:i.qc},u=t.next())i.qc=u.value,e.some(function(c){return function(d){return d.startTime==c.qc.startTime&&d.endTime==c.qc.endTime&&d.text==c.qc.payload}}(i))||(u=Z8(i.qc))&&n.push(u);for(e=n.slice().sort(function(c,d){return c.startTime!=d.startTime?c.startTime-d.startTime:c.endTime!=d.endTime?c.endTime-d.startTime:"line"in VTTCue.prototype?n.indexOf(d)-n.indexOf(c):n.indexOf(c)-n.indexOf(d)}),e=m(e),i=e.next();!i.done;i=e.next())this.g.addCue(i.value)},g.destroy=function(){return this.g&&(jR(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},g.isTextVisible=function(){return this.g.mode=="showing"},g.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function Z8(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(n){}return e.textAlign=="center"&&t.align!="center"&&(t.align="middle"),e.writingMode=="vertical-lr"?t.vertical="lr":e.writingMode=="vertical-rl"&&(t.vertical="rl"),e.lineInterpretation==1&&(t.snapToLines=!1),e.line!=null&&(t.line=e.line),e.position!=null&&(t.position=e.position),t}function jR(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var i=m(Array.from(e.cues)),u=i.next();!u.done;u=i.next())(u=u.value)&&t(u)&&e.removeCue(u);e.mode=n}te("shaka.text.SimpleTextDisplayer",ha),ha.prototype.setTextVisibility=ha.prototype.setTextVisibility,ha.prototype.isTextVisible=ha.prototype.isTextVisible,ha.prototype.destroy=ha.prototype.destroy,ha.prototype.append=ha.prototype.append,ha.prototype.remove=ha.prototype.remove,ha.prototype.configure=ha.prototype.configure;function pa(){}g=pa.prototype,g.configure=function(){},g.remove=function(){},g.append=function(){},g.destroy=function(){},g.isTextVisible=function(){return!1},g.setTextVisibility=function(){},te("shaka.text.StubTextDisplayer",pa),pa.prototype.setTextVisibility=pa.prototype.setTextVisibility,pa.prototype.isTextVisible=pa.prototype.isTextVisible,pa.prototype.destroy=pa.prototype.destroy,pa.prototype.append=pa.prototype.append,pa.prototype.remove=pa.prototype.remove,pa.prototype.configure=pa.prototype.configure;function ZR(){}function pp(e){for(;e.firstChild;)e.removeChild(e.firstChild)}te("shaka.util.Dom",ZR),ZR.removeAllChildren=pp;function ga(e,t,n){var i=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||dr("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new pr(function(){i.A.paused||sd(i)}).$a(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new _t,this.j.D(document,"fullscreenchange",function(){sd(i,!0)}),this.j.D(this.A,"seeking",function(){sd(i,!0)}),this.j.D(this.A,"resize",function(){var u=i.A,c=u.videoWidth;u=u.videoHeight,c&&u?i.l=c/u:i.l=null}),this.o=null,"ResizeObserver"in p&&(this.o=new ResizeObserver(function(){sd(i,!0)}),this.o.observe(this.g)),this.B=new Map}g=ga.prototype,g.configure=function(e){this.C&&this.C.$a(e.captionsUpdatePeriod)},g.append=function(e){var t=[].concat(T(this.h)),n={};e=m(e);for(var i=e.next();!i.done;n={ud:n.ud},i=e.next())n.ud=i.value,t.some(function(u){return function(c){return on(c,u.ud)}}(n))||this.h.push(n.ud);sd(this)},g.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},g.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(i){return i.startTime<e||i.endTime>=t}),sd(this,n>this.h.length),!0},g.isTextVisible=function(){return this.m},g.setTextVisibility=function(e){this.m=e};function G8(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function GR(e,t,n,i,u){var c=!1,d=[],h=[];t=m(t);for(var E=t.next();!E.done;E=t.next()){E=E.value,u.push(E);var A=e.i.get(E),k=E.startTime<=i&&E.endTime>i,G=A?A.Mg:null;A&&(d.push(A.Ce),A.ic&&d.push(A.ic),k||(c=!0,e.i.delete(E),A=null)),k&&(h.push(E),A?G8(e,G)||(c=!0):(q8(e,E,u),A=e.i.get(E),G=A.Mg,c=!0)),0<E.nestedCues.length&&G&&GR(e,E.nestedCues,G,i,u),u.pop()}if(c){for(i=m(d),u=i.next();!u.done;u=i.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(h.sort(function(ne,Y){return ne.startTime!=Y.startTime?ne.startTime-Y.startTime:ne.endTime-Y.endTime}),h=m(h),E=h.next();!E.done;E=h.next())i=e.i.get(E.value),i.ic?(i.ic.contains(n)&&i.ic.removeChild(n),n.appendChild(i.ic),i.ic.appendChild(i.Ce)):n.appendChild(i.Ce)}}function sd(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=m(e.B.values());for(var i=t.next();!i.done;i=t.next())pp(i.value);pp(e.g),e.i.clear(),e.B.clear()}e.m&&GR(e,e.h,e.g,n,[])}}function q8(e,t,n){var i=1<n.length,u=i?"span":"div";t.lineBreak&&(u="br"),t.rubyTag&&(u=t.rubyTag),i=!i&&0<t.nestedCues.length;var c=document.createElement(u);if(u!="br"&&K8(e,c,t,n,i),n=null,t.region&&t.region.id){n=t.region,u=e.l===4/3?2.5:1.9;var d=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==qr?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==qr?"%":"px");if(e.B.has(d))n=e.B.get(d);else{var h=document.createElement("span"),E=n.heightUnits==qr?"%":"px",A=n.widthUnits==qr?"%":"px",k=n.viewportAnchorUnits==qr?"%":"px";h.id="shaka-text-region---"+d,h.classList.add("shaka-text-region"),h.style.position="absolute",n.heightUnits===2&&n.widthUnits===2?(h.style.height=5.33*n.height+"%",h.style.width=n.width*u+"%"):(h.style.height=n.height+E,h.style.width=n.width+A),n.viewportAnchorUnits===2?(E=n.viewportAnchorY/75*100,A=n.viewportAnchorX/(e.l===4/3?160:210)*100,E-=n.regionAnchorY*n.height*5.33/100,A-=n.regionAnchorX*n.width*u/100,h.style.top=E+"%",h.style.left=A+"%"):(h.style.top=n.viewportAnchorY-n.regionAnchorY*n.height/100+k,h.style.left=n.viewportAnchorX-n.regionAnchorX*n.width/100+k),h.style.display="flex",h.style.flexDirection="column",h.style.alignItems="center",h.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(d,h),n=h}}u=c,i&&(u=document.createElement("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=t.backgroundColor,u.style.lineHeight="normal",c.appendChild(u)),e.i.set(t,{Ce:c,Mg:u,ic:n})}function H8(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Bn?n:e==="left"||e==="start"&&t===Vn||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Vn?"line-right":"center"}function K8(e,t,n,i,u){var c=t.style,d=n.nestedCues.length==0,h=1<i.length;c.whiteSpace="pre-wrap";var E=n.payload.replace(/\s+$/g,function(k){return"".repeat(k.length)});if(c.webkitTextStrokeColor=n.textStrokeColor,c.webkitTextStrokeWidth=n.textStrokeWidth,c.color=n.color,c.direction=n.direction,c.opacity=n.opacity,c.paddingLeft=g_(n.linePadding,n,e.s),c.paddingRight=g_(n.linePadding,n,e.s),c.textCombineUpright=n.textCombineUpright,c.textShadow=n.textShadow,n.backgroundImage)c.backgroundImage="url('"+n.backgroundImage+"')",c.backgroundRepeat="no-repeat",c.backgroundSize="contain",c.backgroundPosition="center",c.width="100%",c.height="100%";else{if(n.nestedCues.length)var A=t;else A=document.createElement("span"),t.appendChild(A);n.border&&(A.style.border=n.border),!u&&((t=qR(i,function(k){return k.backgroundColor}))?A.style.backgroundColor=t:E&&(A.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=qR(i,function(k){return k.fontFamily}))&&(A.style.fontFamily=t),E&&(A.textContent=E)}h&&!i[i.length-1].isContainer?c.display="inline":(c.display="flex",c.flexDirection="column",c.alignItems="center",c.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),d||(c.margin="0"),c.fontFamily=n.fontFamily,c.fontWeight=n.fontWeight.toString(),c.fontStyle=n.fontStyle,c.letterSpacing=n.letterSpacing,c.fontSize=g_(n.fontSize,n,e.s),i=n.line,i!=null&&(d=n.lineInterpretation,d==cn&&(d=1,h=16,e.l&&1>e.l&&(h=32),i=0>i?100+i/h*100:i/h*100),d==1&&(c.position="absolute",n.writingMode==rn?(c.width="100%",n.lineAlign==bn?c.top=i+"%":n.lineAlign=="end"&&(c.bottom=100-i+"%")):n.writingMode=="vertical-lr"?(c.height="100%",n.lineAlign==bn?c.left=i+"%":n.lineAlign=="end"&&(c.right=100-i+"%")):(c.height="100%",n.lineAlign==bn?c.right=i+"%":n.lineAlign=="end"&&(c.left=100-i+"%")))),c.lineHeight=n.lineHeight,n.position!=null&&(n.writingMode==rn?c.paddingLeft=n.position:c.paddingTop=n.position),e=H8(n),e=="line-left"?c.cssFloat="left":e=="line-right"&&(c.cssFloat="right"),c.textAlign=n.textAlign,c.textDecoration=n.textDecoration.join(" "),c.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&c.writingMode==n.writingMode||(c.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==rn?c.width=n.size+"%":c.height=n.size+"%")}function g_(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;var u=i.value;switch(i.unit){case"%":return u/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*u/t.cellResolution.rows+"px";default:return e}}function qR(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||i===0)return i}return null}te("shaka.text.UITextDisplayer",ga),ga.prototype.setTextVisibility=ga.prototype.setTextVisibility,ga.prototype.isTextVisible=ga.prototype.isTextVisible,ga.prototype.remove=ga.prototype.remove,ga.prototype.destroy=ga.prototype.destroy,ga.prototype.append=ga.prototype.append,ga.prototype.configure=ga.prototype.configure;function V8(e,t){function n(c){for(var d=c,h=m(t),E=h.next();!E.done;E=h.next())E=E.value,E.end&&E.start<c&&(d+=E.end-E.start);return c=Math.floor(d/3600),h=Math.floor(d/60%60),E=Math.floor(d%60),d=Math.floor(1e3*d%1e3),(10>c?"0":"")+c+":"+(10>h?"0":"")+h+":"+(10>E?"0":"")+E+"."+(100>d?10>d?"00":"0":"")+d}var i=p_(e);e="WEBVTT\n\n",i=m(i);for(var u=i.next();!u.done;u=i.next())u=u.value,e+=n(u.startTime)+" --> "+n(u.endTime)+function(c){var d=[];switch(c.textAlign){case"left":d.push("align:left");break;case"right":d.push("align:right");break;case kn:d.push("align:middle");break;case"start":d.push("align:start");break;case"end":d.push("align:end")}switch(c.writingMode){case"vertical-lr":d.push("vertical:lr");break;case"vertical-rl":d.push("vertical:rl")}return d.length?" "+d.join(" "):""}(u)+"\n",e+=u.payload+"\n\n";return e}te("shaka.text.WebVttGenerator",function(){});function HR(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}HR.prototype.configure=function(e){this.g=e};function z8(e,t,n){try{if(!e.g.enabled)return t;var i=m_(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=iv;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=av;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=VR;break e}u=void 0}i.ot=u,i.su=!0;var c=rv(i);return v_(t,c)}catch(d){return Tt("CMCD_SRC_ERROR","Could not generate src CMCD data.",d),t}}function m_(e){return e.g.sessionId||(e.g.sessionId=p.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function ud(e,t,n){n=n===void 0?{}:n;var i=i===void 0?e.g.useHeaders:i;if(e.g.enabled){Object.assign(n,m_(e)),n.pr=e.h.eb();var u=n.ot===ov||n.ot===av;if(e.j&&u&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=Y8(e,n),i)i=Q8(e),Object.keys(i).length&&Object.assign(t.headers,i);else{var c=rv(e);c&&(t.uris=t.uris.map(function(d){return v_(d,c)}))}}}function Y8(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(i,u){return n.includes(u)&&(i[u]=t[u]),i},{}):t}function W8(e){if(e.type===0)return J8;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?av:ov;if(t=="audio")return iv;if(t=="text")return e.mimeType==="application/mp4"?sv:y_}}function $8(e,t){if(t=e.h.ob()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):NaN}function KR(e,t){if(t=e.h.ob()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):0}function X8(e,t){var n=e.h.Hb();if(!n.length)return NaN;e=n[0],n=m(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.type==="variant"&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case ov:return e.videoBandwidth||NaN;case iv:return e.audioBandwidth||NaN;default:return e.bandwidth}}function rv(e){function t(G){return 100*n(G/100)}function n(G){return Math.round(G)}function i(G){return!Number.isNaN(G)&&G!=null&&G!==""&&G!==!1}var u=[],c={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(G){return encodeURIComponent(G)},rtp:t,tb:n},d=Object.keys(e||{}).sort();d=m(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;var E=e[h];if(i(E)&&(h!=="v"||E!==1)&&(h!="pr"||E!==1)){var A=c[h];A&&(E=A(E)),A=typeof E;var k=void 0;k=A==="string"&&h!=="ot"&&h!=="sf"&&h!=="st"?h+"="+JSON.stringify(E):A==="boolean"?h:A==="symbol"?h+"="+E.description:h+"="+E,u.push(k)}}return u.join(",")}function Q8(e){var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],u=[{},{},{},{}],c={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=m(t);for(var d=t.next();!d.done;d=t.next())d=d.value,u[c[d]!=null?c[d]:1][d]=e[d];for(e=0;e<u.length;e++)(c=rv(u[e]))&&(n["CMCD-"+i[e]]=c);return n}function v_(e,t){return!t||e.includes("offline:")?e:(e=new si(e),e.g.set("CMCD",t),e.toString())}var VR="m",iv="a",ov="v",av="av",J8="i",y_="c",sv="tt";te("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Og:"s",OTHER:"o"});function ts(e){this.h=e,this.g=null}g=ts.prototype,g.configure=function(e){this.h=e},g.dg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(WR)?1e3*this.g.get(WR):null},g.cg=function(){return this.h.enabled&&this.g&&this.g.has(YR)?1e3*this.g.get(YR):null},g.xh=function(){return this.h.enabled&&this.g&&this.g.has($R)?this.g.get($R):null},g.yh=function(){return this.h.enabled&&this.g&&this.g.has(XR)?this.g.get(XR):null},g.getBandwidthEstimate=function(e){var t=this.cg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function zR(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}te("shaka.util.CmsdManager",ts),ts.prototype.getBandwidthEstimate=ts.prototype.getBandwidthEstimate,ts.prototype.getRoundTripTime=ts.prototype.yh,ts.prototype.getResponseDelay=ts.prototype.xh,ts.prototype.getEstimatedThroughput=ts.prototype.cg,ts.prototype.getMaxBitrate=ts.prototype.dg;var YR="etp",WR="mb",$R="rd",XR="rtt";function QR(){this.g=null,this.h=[]}function E_(e,t){return Oe(function(n){if(n.g==1)return e.g?N(n,new Promise(function(i){return e.h.push(i)}),2):n.u(2);e.g=t,$(n)})}QR.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function dn(e,t){Sr.call(this);var n=this;this.l=R_,this.Rd=this.g=null,this.da=!1,this.Vd=new _t,this.Rb=new _t,this.m=new _t,this.ta=new _t,this.C=this.F=this.B=this.G=null,this.Yd=0,this.Y=new QR,this.ea=this.gf=this.qa=this.i=this.Ga=this.I=this.j=this.lb=this.K=this.rg=this.aa=this.T=this.mb=this.L=this.H=this.bb=null,this.Ia=!1,this.pa=this.o=null,this.nf=1e9,this.$c=[],this.N=NaN,this.h=fd(this),this.ba={width:1/0,height:1/0},this.Pd=new we(this.h,this.ba,null),this.s=null,this.sa=new Ol(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount,this.h.preferredVideoHdrLevel,this.h.preferSpatialAudio,this.h.preferredVideoLayout,this.h.preferredAudioLabel,this.h.preferredVideoLabel,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),this.Ha=this.h.preferredTextLanguage,this.Vb=this.h.preferredTextRole,this.Ub=this.h.preferForcedSubs,this.Tb=[],t&&t(this),this.T=d6(this),this.aa=new ts(this.h.cmsd),this.G=oN(this),this.G.Cf(this.h.streaming.forceHTTPS),this.A=null,hv&&(this.A=hv(),this.A.configure(this.h.ads)),this.Vd.D(p,"online",function(){I_(n),n.vf()}),this.Td=new pr(function(){return v6(n)}),e&&(dr("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Vc(e,!0))}z(dn,Sr);function uv(e){e.K!=null&&(Zi(e.K),e.K.release(),e.K=null)}function e6(e,t){if(t.lcevc.enabled){var n=e.Hb();n&&n[0]&&n[0].videoMimeType=="video/mp2t"&&(bl()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||He("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),uv(e),e.K==null&&(e.K=new io(e.g,e.rg,t.lcevc),e.F&&(e.F.T=e.K))}else uv(e)}function Jr(e,t){return new Wn(e,t)}g=dn.prototype,g.destroy=function(){var e=this,t;return Oe(function(n){switch(n.g){case 1:return e.l==zs?n.return():(uv(e),t=e.detach(),e.l=zs,N(n,t,2));case 2:if(e.Vd&&(e.Vd.release(),e.Vd=null),e.Rb&&(e.Rb.release(),e.Rb=null),e.m&&(e.m.release(),e.m=null),e.ta&&(e.ta.release(),e.ta=null),e.pa=null,e.h=null,e.s=null,e.Rd=null,e.T=null,e.aa=null,!e.G){n.u(3);break}return N(n,e.G.destroy(),4);case 4:e.G=null;case 3:e.o&&(e.o.release(),e.o=null),Sr.prototype.release.call(e),$(n)}})};function ld(e,t){e.dispatchEvent(Jr("onstatechange",new Map().set("state",t)))}g.Vc=function(e,t){t=t===void 0?!0:t;var n=this,i,u,c;return Oe(function(d){switch(d.g){case 1:if(n.l==zs)throw new pt(2,7,7e3);if(i=n.g&&n.g==e,!n.g||n.g==e){d.u(2);break}return N(d,n.detach(),2);case 2:return N(d,__(n,"attach"),4);case 4:if(d.h)return d.return();if(fe(d,5,6),i||(ld(n,"attach"),u=function(){var h=b_(n);h&&pd(n,h)},n.Rb.D(e,"error",u),n.g=e),!t||!bo()||n.F){d.u(6);break}return N(d,T_(n),6);case 6:Xe(d),n.Y.release(),Ae(d,0);break;case 5:return c=Ie(d),N(d,n.detach(),10);case 10:throw c}})},g.Wg=function(e){this.rg=e},g.detach=function(e){e=e===void 0?!1:e;var t=this;return Oe(function(n){if(n.g==1){if(t.l==zs)throw new pt(2,7,7e3);return N(n,t.lc(!1,e),2)}if(n.g!=3)return N(n,__(t,"detach"),3);if(n.h)return n.return();try{t.g&&(t.Rb.ib(),t.g=null),ld(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Y.release()}$(n)})};function __(e,t){var n;return Oe(function(i){return i.g==1?(n=++e.Yd,N(i,E_(e.Y,t),2)):n!=e.Yd?(e.Y.release(),i.return(!0)):i.return(!1)})}g.lc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i,u,c,d,h,E,A,k,G;return Oe(function(ne){switch(ne.g){case 1:return n.l!=zs&&(n.l=R_),N(ne,__(n,"unload"),2);case 2:return ne.h?ne.return():(oe(ne,3),n.Ia=!1,ld(n,"unload"),e&&!bo()&&(e=!1),uv(n),i=n.Tb.map(function(Y){return Y()}),n.Tb=[],N(ne,Promise.all(i),5));case 5:if(n.dispatchEvent(Jr("unloading")),n.mb&&(n.mb.release(),n.mb=null),n.g&&(n.m.ib(),n.ta.ib()),n.Td.stop(),n.bb&&(n.bb.release(),n.bb=null),!n.I){ne.u(6);break}return N(ne,n.I.stop(),7);case 7:n.I=null,n.Ga=null;case 6:if(!n.o){ne.u(8);break}return N(ne,n.o.stop(),8);case 8:if(!n.j){ne.u(10);break}return N(ne,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.H&&(n.H.release(),n.H=null),n.C&&(n.C.release(),n.C=null),!n.F){ne.u(12);break}return N(ne,n.F.destroy(),13);case 13:n.F=null;case 12:if(n.A&&!t&&n.A.onAssetUnload(),n.aa&&(n.aa.g=null),n.g&&pp(n.g),!n.g||!n.g.src){ne.u(14);break}return N(ne,new Promise(function(Y){return new pr(Y).X(.1)}),15);case 15:n.g.removeAttribute("src"),n.g.load();case 14:if(!n.B){ne.u(16);break}return N(ne,n.B.destroy(),17);case 17:n.B=null;case 16:if(n.qa=null,n.gf=null,n.L=null,n.i){for(u=m(n.i.variants),c=u.next();!c.done;c=u.next())for(d=c.value,h=m([d.audio,d.video]),E=h.next();!E.done;E=h.next())(A=E.value)&&A.segmentIndex&&A.segmentIndex.release();for(k=m(n.i.textStreams),E=k.next();!E.done;E=k.next())G=E.value,G.segmentIndex&&G.segmentIndex.release()}n.i=null,n.s=new zm,n.kf=null,n.$c=[],n.N=NaN,A_(n);case 3:Xe(ne),n.Y.release(),Ae(ne,4);break;case 4:if(e&&bo()&&!n.F)return N(ne,T_(n),0);ne.u(0)}})},g.Ei=function(e){this.ea=e},g.load=function(e,t,n){t=t===void 0?null:t;var i=this,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe;return Oe(function(Ge){switch(Ge.g){case 1:if(i.l==zs)throw new pt(2,7,7e3);return u=null,c="",e instanceof il?(u=e,c=u.ad()||""):c=e||"",N(Ge,E_(i.Y,"load"),2);case 2:if(i.Y.release(),!i.g)throw new pt(2,7,7002);if(!i.qa){Ge.u(3);break}return N(Ge,i.lc(!1),3);case 3:if(d=++i.Yd,h=function(){return Oe(function(Te){if(Te.g==1)return i.Yd==d?Te.u(0):u?N(Te,u.destroy(),3):Te.u(3);throw new pt(2,7,7e3)})},E=function(Te,We){return Oe(function(Ue){switch(Ue.g){case 1:return oe(Ue,2),N(Ue,E_(i.Y,We),4);case 4:return N(Ue,h(),5);case 5:return N(Ue,Te(),6);case 6:return N(Ue,h(),7);case 7:u&&i.h&&(u.g=i.h);case 2:Xe(Ue),i.Y.release(),Ae(Ue,0)}})},fe(Ge,5,6),t==null&&u&&(t=u.getStartTime()),i.ea=t,i.Ia=!1,i.dispatchEvent(Jr("loading")),u){n=u.Y,Ge.u(8);break}if(n){Ge.u(8);break}return N(Ge,E(function(){return Oe(function(Te){if(Te.g==1)return N(Te,tN(i,c),2);n=Te.h,$(Te)})},"guessMimeType_"),8);case 8:if(A=!!u,u){kR(u,i),i.s=u.getStats(),Ge.u(11);break}return N(Ge,JR(i,c,t,n,!0),12);case 12:if(u=Ge.h,!u){i.s=new zm,Ge.u(11);break}return kR(u,i),i.s=u.getStats(),N(Ge,E(function(){return u.start()},"preload"),11);case 11:if(k=!u,G=u?u.Vb:Date.now()/1e3,i.s=u?u.getStats():new zm,i.qa=c,i.gf=n||null,k)return N(Ge,E(function(){return Oe(function(Te){return N(Te,i6(i,n),0)})},"initializeSrcEqualsDrmInner_"),24);if(i.F){Ge.u(17);break}return N(Ge,E(function(){return Oe(function(Te){return N(Te,T_(i),0)})},"initializeMediaSourceEngineInner_"),17);case 17:return N(Ge,E(function(){return u.qa},"waitForManifest"),19);case 19:return i.h=u.getConfiguration(),i.Pd=u.A,i.Ga=u.B,i.I=P8(u),i.mb=O8(u),i.lb=u.lb,i.i=u.Te(),(ne=u.m)&&(i.sa=ne),A&&i.g&&i.g.nodeName==="AUDIO"&&(t6(i),i.configure("manifest.disableVideo",!0)),N(Ge,E(function(){return u.pa},"waitForDrm"),20);case 20:return i.B=L8(u),N(Ge,E(function(){return Oe(function(Te){return N(Te,i.B.Vc(i.g),0)})},"drmEngine_.attach"),21);case 21:return N(Ge,E(function(){return u.L},"waitForChooseInitialVariant"),22);case 22:return!(Y=u.s)||i.pa&&i.pa==Y||(i.o=D8(u),i.pa=u.s,typeof i.o.setMediaElement!="function"&&(dr("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),i.o.setMediaElement=function(){}),typeof i.o.setCmsdManager!="function"&&(dr("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),i.o.setCmsdManager=function(){}),typeof i.o.trySuggestStreams!="function"&&(dr("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),i.o.trySuggestStreams=function(){})),ve=k8(u),Pe=u.ta,N(Ge,E(function(){return Oe(function(Te){return N(Te,r6(i,G,Pe,ve),0)})},"loadInner_"),23);case 23:M8(u),Ge.u(16);break;case 24:return N(Ge,E(function(){return Oe(function(Te){return N(Te,o6(i,G,n),0)})},"srcEqualsInner_"),16);case 16:i.dispatchEvent(Jr("loaded"));case 6:if(Xe(Ge),!u){Ge.u(26);break}return N(Ge,u.destroy(),26);case 26:Ae(Ge,0);break;case 5:if(xe=Ie(Ge),xe.code==7e3){Ge.u(28);break}return N(Ge,i.lc(!1),28);case 28:throw xe}})};function t6(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(i){return i.audio})}g.Ai=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i,u,c;return Oe(function(d){switch(d.g){case 1:if(i=null,!(n.i&&n.I&&n.Ga&&n.qa)){d.u(2);break}return u=n.g.currentTime,n.R()&&(u=null),c=Date.now()/1e3,N(d,eN(n,n.qa,u,n.gf,c,!0,!1,!1),3);case 3:var h=i=d.h,E=n.I,A=n.Ga;h.h=n.i,h.j=E,h.B=A,h=i,E=n.pa,h.i=n.o,h.s=E,i.m=n.sa,i.start(),n.i=null,n.I=null,n.Ga=null,n.o=null,n.pa=null;case 2:return N(d,n.lc(e,t),4);case 4:return d.return(i)}})},g.preload=function(e,t,n){t=t===void 0?null:t;var i=this,u;return Oe(function(c){return c.g==1?N(c,JR(i,e,t,n),2):((u=c.h)?u.start().catch(function(){}):pd(i,new pt(2,7,7005)),c.return(u))})};function JR(e,t,n,i,u){u=u===void 0?!1:u;var c,d,h;return Oe(function(E){return E.g==1?(c=Date.now()/1e3,i?E.u(2):N(E,tN(e,t),3)):(E.g!=2&&(i=E.h),n6(e,i)?E.return(null):(d=!1,h=!0,u&&(e.o&&e.pa==e.h.abrFactory&&(h=!1),e.g&&e.g.nodeName==="AUDIO"&&(d=!0)),E.return(eN(e,t,n,i||null,c,!u,d,h))))})}function eN(e,t,n,i,u,c,d,h){c=c===void 0?!0:c,d=d===void 0?!1:d,h=h===void 0?!0:h;var E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue,mt,Rt;return Oe(function(Ht){return Ht.g==1?(E=null,A=Wa(e.h),d&&(A.manifest.disableVideo=!0),k=function(){return E.T&&E.o?null:E},G=function(){return k()?k().getConfiguration():e.h},ne=function(Ut,Et){k()?E.configure(Ut,Et):e.configure(Ut,Et)},e.ba.width!=1/0||e.ba.height!=1/0?Ht.u(2):N(Ht,Ia(),3)):(Ht.g!=2&&(Y=Ht.h,e.ba.width=Y.width,e.ba.height=Y.height),ve=new we(A,e.ba,null),Pe={networkingEngine:e.G,filter:function(Ut){var Et,jt;return Oe(function(ln){if(ln.g==1)return N(ln,je(ve,Ut),2);if(ln.g!=4)return Et=ln.h,Et?(jt=Jr("trackschanged"),N(ln,Promise.resolve(),4)):ln.u(0);E.dispatchEvent(jt),$(ln)})},makeTextStreamsForClosedCaptions:function(Ut){return g6(e,Ut)},onTimelineRegionAdded:function(Ut){var Et=E.C;e:{for(var jt=m(Et.g),ln=jt.next();!ln.done;ln=jt.next())if(ln=ln.value,ln.schemeIdUri==Ut.schemeIdUri&&ln.id==Ut.id&&ln.startTime==Ut.startTime&&ln.endTime==Ut.endTime){jt=ln;break e}jt=null}jt==null&&(Et.g.add(Ut),Ut=new Wn("regionadd",new Map([["region",Ut]])),Et.dispatchEvent(Ut))},onEvent:function(Ut){return E.dispatchEvent(Ut)},onError:function(Ut){return E.onError(Ut)},isLowLatencyMode:function(){return G().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return G().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){ne("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&E.T&&e.j.updateDuration()},newDrmInfo:function(Ut){var Et=E.l,jt=Et?Et.g:null;jt&&Et.s&&ae(ve,jt.keySystem,Ut)},onManifestUpdated:function(){var Ut=new Map().set("isLive",e.R());E.dispatchEvent(Jr("manifestupdated",Ut)),tv(E,!1,function(){e.A&&e.A.onManifestUpdated(e.R())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()}},xe=new n_(function(){return e.Ib()}),xe.addEventListener("regionadd",function(Ut){var Et=Ut.region;mp(e,"timelineregionadded",Et,E),tv(E,!1,function(){e.A&&e.A.onDashTimedMetadata(Et)})}),Ge=null,A.streaming.observeQualityChanges&&(Ge=new Ym(function(){return e.ob()}),Ge.addEventListener("qualitychange",function(Ut){var Et=Ut.quality;Ut=Ut.position,Et=new Map().set("mediaQuality",{bandwidth:Et.bandwidth,audioSamplingRate:Et.audioSamplingRate,codecs:Et.codecs,contentType:Et.contentType,frameRate:Et.frameRate,height:Et.height,mimeType:Et.mimeType,channelsCount:Et.channelsCount,pixelAspectRatio:Et.pixelAspectRatio,width:Et.width}).set("position",Ut),e.dispatchEvent(Jr("mediaqualitychanged",Et))})),Te=!0,We={zb:e.G,onError:function(Ut){return E.onError(Ut)},ee:function(Ut){tv(E,!0,function(){e:{var Et=Jr("keystatuschanged");e.dispatchEvent(Et);var jt=Object.keys(Ut);Et=jt.length==1&&jt[0]=="00";var ln=!1;if(jt.length){jt=m(e.i.variants);for(var gn=jt.next();!gn.done;gn=jt.next()){gn=gn.value;var Ln=[];gn.audio&&Ln.push(gn.audio),gn.video&&Ln.push(gn.video),Ln=m(Ln);for(var Mn=Ln.next();!Mn.done;Mn=Ln.next()){var qn=Mn.value;if(Mn=gn.allowedByKeySystem,qn.keyIds.size){gn.allowedByKeySystem=!0,qn=m(qn.keyIds);for(var Yn=qn.next();!Yn.done;Yn=qn.next())Yn=Yn.value,((Yn=Ut[Et?"00":Yn])||e.B.F)&&(gn.allowedByKeySystem=gn.allowedByKeySystem&&!!Yn&&!Q.includes(Yn))}Mn!=gn.allowedByKeySystem&&(ln=!0)}}}if(ln&&(ns(e),!dd(e)))break e;(Et=e.j.j)&&!Et.allowedByKeySystem&&hd(e)}})},onExpirationUpdated:function(Ut,Et){var jt=Jr("expirationupdated");E.dispatchEvent(jt),(jt=E.j)&&jt.onExpirationUpdated&&jt.onExpirationUpdated(Ut,Et)},onEvent:function(Ut){E.dispatchEvent(Ut),Ut.type=="drmsessionupdate"&&Te&&(Te=!1,Ut=Date.now()/1e3-E.Ia,(e.s||E.getStats()).j=Ut,e.K&&Zi(e.K))}},Ue=oN(e,k),mt=function(){return e.rc(We)},Rt={config:A,Uh:Pe,di:xe,ci:Ge,rc:mt,Th:ve,networkingEngine:Ue,Vg:c,Ug:h},E=new il(t,i,u,n,Rt),Ht.return(E))})}function tN(e,t){var n,i;return Oe(function(u){return u.g==1?(n=e.h.manifest.retryParameters,N(u,h_(t,e.G,n),2)):(i=u.h,i=="application/x-mpegurl"&&ys()&&(i="application/vnd.apple.mpegurl"),u.return(i))})}function n6(e,t){if(!bo())return!0;if(t){if((e.g||Tc()).canPlayType(t)=="")return!1;if(!(bo()&&t in ke))return!0;if(fm(t)){if(e.h.streaming.preferNativeHls)return!0;if(ys()&&(e.h.drm.servers["com.apple.fps"]||e.h.drm.servers["com.apple.fps.1_0"]))return e.h.streaming.useNativeHlsForFairPlay;if(ys())return e.h.streaming.useNativeHlsOnSafari}}return!1}function T_(e){var t,n,i,u,c;return Oe(function(d){if(d.g==1)return ld(e,"media-source"),t=e.h.textDisplayFactory,n=t(),n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.kf=t,i=f6(e.g,n,function(h,E,A){nN(e,h,E,A)},e.K),i.configure(e.h.mediaSource),u=e.h.manifest,c=u.segmentRelativeVttTiming,i.ba=c,N(d,i.L,2);e.F=i,$(d)})}function r6(e,t,n,i){var u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue,mt,Rt,Ht,Ut;return Oe(function(Et){switch(Et.g){case 1:for(ld(e,"load"),u=e.g,e.H=new op({Md:function(){return u.playbackRate},Xb:function(){return u.defaultPlaybackRate},Df:function(jt){u.playbackRate=jt},og:function(jt){u.currentTime+=jt}}),c=function(){return lv(e)},d=function(){return dN(e)},e.m.D(u,"playing",c),e.m.D(u,"pause",c),e.m.D(u,"ended",c),e.m.D(u,"ratechange",d),e6(e,e.h),e.Ha=e.h.preferredTextLanguage,e.Vb=e.h.preferredTextRole,e.Ub=e.h.preferForcedSubs,C_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.o.init(function(jt,ln,gn){e.j&&jt!=e.j.j&&fv(e,jt,!0,ln===void 0?!1:ln,gn===void 0?0:gn)}),e.o.setMediaElement(u),e.o.setCmsdManager(e.aa),e.j=h6(e),e.j.configure(e.h.streaming),e.l=Lo,u.textTracks&&e.m.D(u.textTracks,"addtrack",function(jt){if(jt.track)switch(jt=jt.track,jt.kind){case"chapters":iN(e,jt)}}),e.dispatchEvent(Jr("streaming")),h=n,(E=e.j.j)||h||(h=pN(e,!0)),A=[],k=E||h,G=m([k.video,k.audio]),ne=G.next();!ne.done;ne=G.next())(Y=ne.value)&&!Y.segmentIndex&&A.push(Y.createSegmentIndex());if(!(0<A.length)){Et.u(2);break}return N(Et,Promise.all(A),2);case 2:if(e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(k),C_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),ve=function(jt){e.C=l6(e,jt),e.bb=c6(e,t),aN(e,u,Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal))},e.h.streaming.startAtSegmentBoundary||ve(e.ea),E){Et.u(4);break}if(!e.h.streaming.startAtSegmentBoundary){Et.u(5);break}return Pe=e.i.presentationTimeline,xe=e.ea||e.g.currentTime,Ge=Pe.$b(),Te=Pe.pb(),xe<Ge?xe=Ge:xe>Te&&(xe=Te),N(Et,m6(h,xe),6);case 6:We=Et.h,ve(We);case 5:fv(e,h,!0,!1,0);case 4:return e.C.ve(),Ue=e.wc().find(function(jt){return jt.active}),Ue||((mt=Cc(e.i.textStreams,e.Ha,e.Vb,e.Ub)[0]||null)&&QE(e.s.h,mt,!0),h&&(mt?(h.audio&&y6(e,h.audio,mt)&&(e.da=!0),e.da&&e.F.F.setTextVisibility(!0),vN(e)):e.da=!1),mt&&(e.h.streaming.alwaysStreamText||e.Ze())&&Wm(e.j,mt)),N(Et,e.j.start(i),7);case 7:e.h.abr.enabled&&(e.o.enable(),yN(e)),ns(e),dd(e),e.i.variants.some(function(jt){return jt.primary}),(Rt=e.R())&&(e.h.streaming.liveSync||e.i.serviceDescription||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(Ht=function(){return hN(e)},e.m.D(u,"timeupdate",Ht)):Rt||(Ut=function(){return cv(e)},e.m.D(u,"timeupdate",Ut),cv(e)),e.A&&e.A.onManifestUpdated(Rt),e.Ia=!0,e.m.na(u,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),$(Et)}})}function i6(e,t){var n,i,u,c;return Oe(function(d){return d.g==1?(n=yi,i=Date.now()/1e3,u=!0,e.B=e.rc({zb:e.G,onError:function(h){pd(e,h)},ee:function(){},onExpirationUpdated:function(){var h=Jr("expirationupdated");e.dispatchEvent(h)},onEvent:function(h){e.dispatchEvent(h),h.type=="drmsessionupdate"&&u&&(u=!1,e.s.j=Date.now()/1e3-i)}}),e.B.configure(e.h.drm),c={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Ca(t):"",codecs:t?Po(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.fa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},c.video.fullMimeTypes.add(Si(c.video.mimeType,c.video.codecs)),e.B.ba=!0,N(d,Bm(e.B,[c],[]),2)):N(d,e.B.Vc(e.g),0)})}function o6(e,t,n){var i,u,c,d,h,E,A,k,G,ne;return Oe(function(Y){if(Y.g==1)return ld(e,"src-equals"),i=e.g,e.C=new yR(i),u=!1,e.Tb.push(function(){u=!0}),e.ea!=null&&e.C.we(e.ea),e.H=new op({Md:function(){return i.playbackRate},Xb:function(){return i.defaultPlaybackRate},Df:function(ve){i.playbackRate=ve},og:function(ve){i.currentTime+=ve}}),c=e.h.streaming.rebufferingGoal,aN(e,i,c),d=function(){return lv(e)},h=function(){return dN(e)},e.m.D(i,"playing",d),e.m.D(i,"pause",d),e.m.D(i,"ended",d),e.m.D(i,"ratechange",h),i.preload!="none"&&e.m.na(i,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),i.audioTracks&&(e.m.D(i.audioTracks,"addtrack",function(){return ns(e)}),e.m.D(i.audioTracks,"removetrack",function(){return ns(e)}),e.m.D(i.audioTracks,"change",function(){return ns(e)})),i.textTracks&&(e.m.D(i.textTracks,"addtrack",function(ve){if(ve.track)switch(ve=ve.track,ve.kind){case"metadata":u6(e,ve);break;case"chapters":iN(e,ve);break;default:ns(e)}}),e.m.D(i.textTracks,"removetrack",function(){return ns(e)}),e.m.D(i.textTracks,"change",function(){return ns(e)})),i.src=z8(e.T,e.qa,n),(Ha()||aa())&&i.load(),i.preload!="none"&&!i.autoplay&&fm(n)&&_s()&&i.load(),e.l=ma,e.dispatchEvent(Jr("streaming")),E=new Rr,nd(i,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ve(),E.resolve()}),nd(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var ve;return Oe(function(Pe){if(Pe.g==1)return a6(e),ve=gp(e),ve.find(function(xe){return xe.mode!="disabled"})?(0<ve.length&&(e.da=!0),Pe.u(2)):N(Pe,new Promise(function(xe){e.m.na(i.textTracks,"change",xe),new pr(xe).X(1)}),2);if(u)return Pe.return();s6(e),$(Pe)})}),i.error?E.reject(b_(e)):i.preload=="none"&&(He('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),E.resolve()),e.m.na(i,"error",function(){E.reject(b_(e))}),N(Y,E,2);(A=e.R())&&(e.h.streaming.liveSync||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(k=function(){return hN(e)},e.m.D(i,"timeupdate",k)):A||(G=function(){return cv(e)},e.m.D(i,"timeupdate",G),cv(e)),e.A&&(e.A.onManifestUpdated(A),A&&(ne=e.Ib().end,e.m.D(i,"progress",function(){var ve=e.Ib().end;ne!=ve&&(e.A.onManifestUpdated(e.R()),ne=ve)}))),e.Ia=!0,$(Y)})}function a6(e){var t=e.h.preferredAudioLanguage;t!=""&&e.wg(t,e.h.preferredVariantRole)}function s6(e){var t=e.h.preferredTextLanguage;t!=""&&e.yf(t,e.h.preferredTextRole,e.h.preferForcedSubs)}function u6(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues)for(var i=m(t.activeCues),u=i.next();!u.done;u=i.next())u=u.value,rN(e,u.startTime,u.endTime,u.type,u.value),e.A&&e.A.onCueMetadataChange(u.value)});var n=new pr(function(){var i=p6(e);i=m(i);for(var u=i.next();!u.done;u=i.next())u.value.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}function nN(e,t,n,i){t=m(t);for(var u=t.next();!u.done;u=t.next())if(u=u.value,u.data&&u.cueTime&&u.frames){var c=u.cueTime+n,d=i;d&&c>d&&(d=c);for(var h=m(u.frames),E=h.next();!E.done;E=h.next())rN(e,c,d,"org.id3",E.value);e.A&&e.A.onHlsTimedMetadata(u,c)}}function rN(e,t,n,i,u){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",i).set("payload",u),e.dispatchEvent(Jr("metadata",t))}function iN(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new pr(function(){t.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}g.hi=function(){for(var e=this.Y;e.g;)e.release()},g.rc=function(e){return new Fc(e)};function oN(e,t){function n(u){t()?t().dispatchEvent(u):e.dispatchEvent(u)}function i(u){t()?tv(t(),!0,u):u()}return t||(t=function(){return null}),new Kr(function(u,c,d,h){var E=t()?t().i:e.o;E&&E.segmentDownloaded(u,c,d,h)},function(u,c,d){c=new Map().set("headers",u).set("request",c).set("requestType",d),n(Jr("downloadheadersreceived",c)),i(function(){if(e.aa){var h=e.aa;if(h.h.enabled){var E=u["cmsd-static"];if(E)try{var A=new Map,k=E.split(",");for(E=0;E<k.length;E++){var G=k[E].split("=");A.set(G[0],zR(G[1]))}}catch(xe){}if(A=u["cmsd-dynamic"]){try{var ne=new Map,Y=A.split(";");for(A=1;A<Y.length;A++){var ve=Y[A].split("=");ne.set(ve[0],zR(ve[1]))}var Pe=ne}catch(xe){Pe=null}Pe&&(h.g=Pe)}}}})},function(u,c,d,h){u=new Map().set("request",u).set("error",c).set("httpResponseCode",d).set("aborted",h),n(Jr("downloadfailed",u))},function(u,c,d){i(function(){var h=e.T,E=d;if(E=E===void 0?{}:E,h.g.enabled)if(c.method==="HEAD")ud(h,c);else switch(u){case 0:try{if(h.g.enabled){if(E.type){e:{switch(E.type){case 4:var A="d";break e;case 3:case 2:A="h";break e;case 5:A="s";break e}A=void 0}h.m=A}ud(h,c,{ot:VR,su:!h.i})}}catch(Mn){Tt("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Mn)}break;case $a:try{if(h.g.enabled){var k=E.segment;A=0,k&&(A=k.endTime-k.startTime);var G={d:1e3*A,st:h.h.R()?"l":"v"};G.ot=W8(E);var ne=G.ot===ov||G.ot===iv||G.ot===av||G.ot===sv,Y=E.stream;if(Y){var ve=h.h.eb();if(ne&&(G.bl=$8(h,Y.type),G.ot!==sv)){var Pe=KR(h,Y.type);G.dl=ve?Pe/Math.abs(ve):Pe}if(Y.bandwidth&&(G.br=Y.bandwidth/1e3),Y.segmentIndex&&k){var xe=Y.segmentIndex.xb(k.endTime,!0,0>ve);if(xe){var Ge=xe.next().value;if(Ge&&Ge!=k){if(!Zn(k.$(),Ge.$())){var Te=Ge.$()[0],We=c.uris[0],Ue=new URL(Te),mt=new URL(We);if(Ue.origin!==mt.origin)var Rt=Te;else{for(var Ht=Ue.pathname.split("/").slice(1),Ut=mt.pathname.split("/").slice(1,-1);Ht[0]===Ut[0];)Ht.shift(),Ut.shift();for(;Ut.length;)Ut.shift(),Ht.unshift("..");Rt=Ht.join("/")}G.nor=Rt}if((Ge.Aa||Ge.ja)&&(k.Aa!=Ge.Aa||k.ja!=Ge.ja)){var Et=Ge.Aa+"-";Ge.ja&&(Et+=Ge.ja),G.nrr=Et}}}var jt=h.h.eb()||1,ln=KR(h,Y.type)||500,gn=Y.bandwidth,Ln=gn?gn*(k.endTime-k.startTime)/1e3/(ln/jt/1e3)*h.g.rtpSafetyFactor:NaN;isNaN(Ln)||(G.rtp=Ln)}}ne&&G.ot!==sv&&(G.tb=X8(h,G.ot)/1e3),ud(h,c,G)}}catch(Mn){Tt("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Mn)}break;case 2:case 5:case 6:ud(h,c,{ot:"k"});break;case 4:ud(h,c,{ot:"o"})}})},function(u,c,d,h){(u=t()?t().j:e.I)&&u.banLocation&&u.banLocation(h)},function(u,c){u=c.data.byteLength,(c=t()?t().getStats():e.s)&&(c.Ed=isNaN(c.Ed)?u:c.Ed+u)})}function l6(e,t){return new ER(e.g,e.i,e.h.streaming,t,function(){e.bb&&AR(e.bb,!0),e.j&&e.j.od(),e.L&&cd(e)},function(n){return e.dispatchEvent(n)})}function c6(e,t){t=new nv(e.mb,e.R()||0<t),t.addEventListener("enter",function(i){mp(e,"timelineregionenter",i.region)}),t.addEventListener("exit",function(i){mp(e,"timelineregionexit",i.region)}),t.addEventListener("skip",function(i){var u=i.region;i.seeking||(mp(e,"timelineregionenter",u),mp(e,"timelineregionexit",u))});var n=new wR(e.g);return n.g.add(t),e.lb&&n.g.add(e.lb),n}function aN(e,t,n){e.L=new Gh,e.L.g=Ll,qh(e.L,n,Math.min(.5,n/2)),A_(e),e.m.D(t,"waiting",function(){return cd(e)}),e.m.D(t,"stalled",function(){return cd(e)}),e.m.D(t,"canplaythrough",function(){return cd(e)}),e.m.D(t,"progress",function(){return cd(e)})}function cd(e){switch(e.l){case ma:if(e.g.ended)var t=!0;else{var n=kt(e.g.buffered);t=n!=null&&n>=e.g.duration-1}break;case Lo:e:if(e.g.ended||Zc(e.F))t=!0;else{if(e.i.presentationTimeline.R()){n=e.i.presentationTimeline.Gb();var i=kt(e.g.buffered);if(i!=null&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=An(e.g.buffered,e.g.currentTime),n=e.L;var u=t,c=n.i.get(n.g);t=n.g,i=u||i>=c?Nc:Ll,n.g=i,(t=t!=i)&&i===Nc&&(n.h=Date.now()),t&&A_(e)}function f6(e,t,n,i){return new Tu(e,t,n,i)}function d6(e){return new HR({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},ob:function(){return e.ob()},getCurrentTime:function(){return e.g?e.g.currentTime:0},eb:function(){return e.eb()},Zb:function(){return e.Zb()},Hb:function(){return e.Hb()},R:function(){return e.R()}},e.h.cmcd)}function h6(e){return new NR(e.i,{Ld:function(){return e.C?e.C.Dd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},V:e.F,zb:e.G,onError:function(t){return pd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Zh:function(){e.I&&e.I.update&&e.I.update()},mf:function(t,n){var i=t.startTime,u=t.endTime,c=n.type;if(e.C){e.C.pg();var d=Hs(e.F,c);!e.R()&&e.g.paused&&d!=null&&0<d&&e.C.Dd()<d&&e.C.we(d)}cd(e),i=new Map().set("start",i).set("end",u).set("contentType",c),e.dispatchEvent(Jr("segmentappended",i)),e.o&&n.fastSwitching&&t.md&&t.Wd&&e.o.trySuggestStreams()},Yh:function(t,n){(n=n.ff)&&e.lb&&f8(e.lb,n,t)},Qf:function(t,n){var i=e.B;if(i.h.parseInbandPsshEnabled&&!i.F&&["audio","video"].includes(t)){n=new km(Qn(n));var u=0,c=m(n.data);for(t=c.next();!t.done;t=c.next())u+=t.value.length;if(u==0)i=Promise.resolve();else{for(u=new Uint8Array(u),c=0,n=m(n.data),t=n.next();!t.done;t=n.next())t=t.value,u.set(t,c),c+=t.length;jl(i,"cenc",u),i=i.l}}else i=Promise.resolve();return i},$h:function(t,n,i){nN(e,t,n,i)},Jd:function(t,n){return e.Jd(t,n)}})}g.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Qm(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(dr("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(dr("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&dr("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){dr("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var n=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return n},delete e.mediaSource.sourceBufferExtraFeatures}e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100));var i=Gc(this.h,e,fd(this));return sN(this),i};function sN(e){if(e.Pd=new we(e.h,e.ba,e.B),e.I){var t=Wa(e.h.manifest);e.g&&e.g.nodeName==="AUDIO"&&(t.disableVideo=!0),e.I.configure(t)}if(e.B&&e.B.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{e.l!=zs&&ue(e.Pd,e.i)&&ns(e)}catch(c){pd(e,c)}e.o&&dd(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||hd(e)}if(e.G&&e.G.Cf(e.h.streaming.forceHTTPS),e.F)if(e.F.configure(e.h.mediaSource),e.F.ba=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.kf!=t){var n=t();n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!');var i=e.F,u=i.F;i.F=n,u&&(n.setTextVisibility(u.isTextVisible()),u.destroy()),i.g&&(i.g.j=n),e.kf=t,e.j&&(t=e.j,(n=t.i.get(vr))&&rd(t,n.stream,!0,0,!0))}else t=e.F.F,t.configure&&t.configure(e.h.textDisplayer);e.o&&(e.o.configure(e.h.abr),e.h.abr.enabled?e.o.enable():e.o.disable(),yN(e)),e.L&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),qh(e.L,t,Math.min(.5,t/2))),e.i&&C_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.A&&e.A.configure(e.h.ads),e.T&&e.T.configure(e.h.cmcd),e.aa&&e.aa.configure(e.h.cmsd)}g.getConfiguration=function(){var e=fd(this);return Gc(e,this.h,fd(this)),e},g.ag=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.g.currentTime+t,this.Ib().end),e>=t)return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},g.li=function(){for(var e in this.h)delete this.h[e];Gc(this.h,fd(this),fd(this)),sN(this)},g.qh=function(){return this.l},g.Ue=function(){return this.i?this.i.type:null},g.th=function(){return this.g},g.Zb=function(){return this.G},g.ad=function(){return this.qa},g.$f=function(){return this.A?this.A:null},g.R=function(){return this.i?this.i.presentationTimeline.R():this.g&&this.g.src?this.g.duration==1/0:!1},g.dc=function(){return this.i?this.i.presentationTimeline.dc():!1},g.Kh=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0:!1},g.Ib=function(){if(this.i){if(!this.Ia&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.$b(),end:e.pb()}}return this.g&&this.g.src&&(e=this.g.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},g.Hh=function(){this.R()&&(this.g.currentTime=this.Ib().end)},g.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},g.drmInfo=function(){return this.B?this.B.g:null},g.cd=function(){return this.B?this.B.cd():1/0},g.Se=function(){return this.B?this.B.Se():[]},g.Kd=function(){return this.B?this.B.Kd():{}},g.Xe=function(){return this.L?this.L.g==Ll:!1},g.eb=function(){return this.g?this.H?this.H.h:1:0},g.sd=function(e){var t=this;e==0?He("A trick play rate of 0 is unsupported!"):(this.ta.ib(),this.g.paused&&this.g.play(),this.H.set(e),this.l==Lo&&(this.o.playbackRateChanged(e),xR(this.j,1<Math.abs(e))),this.R()&&this.ta.D(this.g,"timeupdate",function(){var n=t.g.currentTime,i=t.Ib(),u=t.h.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(i.end)&&t.Wc():Math.floor(n)<=Math.floor(i.start+u)&&t.Wc()}))},g.Wc=function(){var e=this.H.Xb();this.l==ma&&this.H.set(e),this.l==Lo&&(this.H.set(e),this.o.playbackRateChanged(e),xR(this.j,!1)),this.ta.ib()},g.Hb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,i=m(this.i.variants),u=i.next();!u.done;u=i.next())if(u=u.value,jf(u)){var c=Ml(u);c.active=u==e,c.active||n==1||e==null||u.video!=e.video||u.audio!=e.audio||(c.active=!0),c.active&&n++,t.push(c)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(d){return Pl(d)}):[]},g.wc=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=m(this.i.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var u=Dl(i);u.active=i==e,t.push(u)}return t}return this.g&&this.g.src&&this.g.textTracks?gp(this).map(function(c){return Tm(c)}):[]},g.oh=function(){var e=this.$c;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Vu(t)})},g.gh=function(e){var t=this,n,i,u,c;return Oe(function(d){return d.g==1?t.l!=Lo&&t.l!=ma?d.return(null):(n=t.$c,t.i&&(n=t.i.imageStreams),(i=n.find(function(h){return h.id==e}))?i.segmentIndex?d.u(2):N(d,i.createSegmentIndex(),2):d.return(null)):d.g!=4?(u=[],i.segmentIndex.tc(function(h){var E=uN(h.tilesLayout||i.tilesLayout);if(E){E=E.rows*E.Sb;for(var A=h.i-h.startTime,k=0;k<E;k++)u.push(t.fg(e,h.startTime+A*k/E))}}),N(d,Promise.all(u),4)):(c=d.h,d.return(c.filter(function(h){return h})))})};function uN(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Sb:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}g.fg=function(e,t){var n=this,i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue;return Oe(function(mt){return mt.g==1?n.l!=Lo&&n.l!=ma?mt.return(null):(i=n.$c,n.i&&(i=n.i.imageStreams),(u=i.find(function(Rt){return Rt.id==e}))?u.segmentIndex?mt.u(2):N(mt,u.createSegmentIndex(),2):mt.return(null)):(c=u.segmentIndex.find(t),c==null||(d=u.segmentIndex.get(c),h=uN(d.tilesLayout||u.tilesLayout),!h)?mt.return(null):(E=u.width||0,A=u.height||0,k=E/h.Sb,G=A/h.rows,ne=h.Sb*h.rows,Y=d.i-d.startTime,ve=d.A||Y/ne,Pe=d.startTime,Ge=xe=0,1<ne&&(Te=Math.floor((t-d.startTime)/ve),Pe=d.startTime+Te*ve,xe=Te%h.Sb*k,Ge=Math.floor(Te/h.Sb)*G),We=!1,(Ue=d.s)&&(We=!0,G=Ue.height,xe=Ue.positionX,Ge=Ue.positionY,k=Ue.width),mt.return({segment:d,imageHeight:A,imageWidth:E,height:G,positionX:xe,positionY:Ge,startTime:Pe,duration:ve,uris:d.$(),width:k,sprite:We})))})},g.xg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(i){return i.id==e.id});t&&t!=this.j.s&&(QE(this.s.h,t,!1),Wm(this.j,t),dv(this),this.Ha=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){t=gp(this),t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,bc(n)==e.id?n.mode=this.da?"showing":"hidden":n.mode="disabled";dv(this)}},g.zf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){this.h.abr.enabled&&He("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.i.variants.find(function(u){return u.id==e.id});i&&jf(i)&&(fv(this,i,!1,t,n),this.sa=new Zh(i,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),dd(this))}else if(this.g&&this.g.audioTracks){for(t=Array.from(this.g.audioTracks),t=m(t),n=t.next();!n.done;n=t.next())if(n=n.value,bc(n)==e.id){gN(this,n);break}}},g.ih=function(){return _N(this.Hb())},g.Ah=function(){return _N(this.wc())},g.hh=function(){return Array.from(EN(this.Hb()))},g.zh=function(){return Array.from(EN(this.wc()))},g.wg=function(e,t,n,i){if(n=n===void 0?0:n,i=i===void 0?0:i,this.i&&this.C){this.sa=new Ol(e,t||"",n,"",!1,"","","",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),e=function(d,h){return d.video||h.video?d.video&&h.video?Math.abs((d.video.height||0)-(h.video.height||0))+Math.abs((d.video.width||0)-(h.video.width||0)):1/0:0},t=this.j.j;var u=this.sa.create(this.i.variants);n=null,u=m(u.values());for(var c=u.next();!c.done;c=u.next())c=c.value,(!n||e(n,t)>e(c,t))&&(n=c);n?(e=Ml(n),this.zf(e,!0,i)):hd(this)}else this.g&&this.g.audioTracks&&(i=Cc(this.Hb(),e,t||"",!1)[0])&&this.zf(i)},g.yf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Ha=e,this.Vb=t||"",this.Ub=n,(e=Cc(this.i.textStreams,this.Ha,this.Vb,this.Ub)[0]||null)&&e!=this.j.s&&(QE(this.s.h,e,!1),this.h.streaming.alwaysStreamText||this.Ze())&&(Wm(this.j,e),dv(this))):(e=Cc(this.wc(),e,t||"",n)[0])&&this.xg(e)},g.si=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var i=null,u=m(this.i.variants),c=u.next();!c.done;c=u.next())if(c=c.value,c.audio.label==e){i=c;break}i!=null&&(this.sa=new Ol(i.language,"",0,"",!1,"",e,"",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),hd(this,t,n))}else if(this.g&&this.g.audioTracks){for(n=Array.from(this.g.audioTracks),t=null,n=m(n),i=n.next();!i.done;i=n.next())i=i.value,i.label==e&&(t=i);t&&gN(this,t)}},g.Ze=function(){var e=this.da;return this.F&&this.l==Lo?this.F.F.isTextVisible():this.g&&this.g.src&&this.g.textTracks?gp(this).some(function(t){return t.mode=="showing"}):e},g.bg=function(){return this.g&&this.g.src&&this.g.textTracks?lN(this).map(function(e){return Tm(e)}):[]},g.jh=function(e){if(!this.g||!this.g.src||!this.g.textTracks)return[];var t=Cr(e),n=lN(this).filter(function(h){return Cr(h.language)==t});if(!n||!n.length)return[];e=[];var i=new Set;n=m(n);for(var u=n.next();!u.done;u=n.next())if((u=u.value)&&u.cues){u=m(u.cues);for(var c=u.next();!c.done;c=u.next()){var d=c.value;(c=d.id)&&c!=""||(c=d.startTime+"-"+d.endTime+"-"+d.text),d={id:c,title:d.text,startTime:d.startTime,endTime:d.endTime},i.has(c)||(e.push(d),i.add(c))}}return e};function gp(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function p6(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="metadata"})}function lN(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="chapters"})}g.Dg=function(e){if(e=!!e,this.da!=e){if(this.da=e,this.l==Lo)this.F.F.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.s||(e=Cc(this.i.textStreams,this.Ha,this.Vb,this.Ub),0<e.length&&(Wm(this.j,e[0]),dv(this))):g8(this.j));else if(this.g&&this.g.src&&this.g.textTracks){var t=gp(this);t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}vN(this)}},g.vh=function(){if(this.C)var e=this.C.Dd();else{if(this.ea==null)return new Date;e=this.ea}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.B||t.i)+e))}return this.g&&this.g.getStartDate?(t=this.g.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},g.eg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.B||e.i))}return this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:e):null},g.Nd=function(){return this.R()&&this.i?this.i.presentationTimeline.Nd():null},g.ob=function(){if(this.l==Lo)return this.F.ob();var e={total:[],audio:[],video:[],text:[]};return this.l==ma&&(e.total=vt(this.g.buffered)),e},g.getStats=function(){if(this.l!=Lo&&this.l!=ma)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,bytesDownloaded:NaN,switchHistory:[],stateHistory:[]};lv(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.L=this.C.Mf(),this.s.N=this.C.Nf()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var i=Number(n.totalVideoFrames);t.K=Number(n.droppedVideoFrames),t.I=i,this.s.H=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==Lo){if(n=this.j.j,t=this.j.s,n){i=this.H?this.H.h:1;var u=i*n.bandwidth;t&&t.bandwidth&&(u+=i*t.bandwidth),this.s.B=u}n&&n.video&&(t=this.s,i=n.video.height||NaN,t.o=n.video.width||NaN,t.l=i),this.R()&&(n=this.eg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.s.G=this.i.presentationTimeline.g),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==ma&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var c=this.s;e=c.o,n=c.l,t=c.B,i=c.I,u=c.K;var d=c.H,h=c.N,E=c.L,A=c.A,k=c.i,G=c.m,ne=c.F,Y=c.j,ve=XE(c.g,"playing"),Pe=XE(c.g,"paused"),xe=XE(c.g,"buffering"),Ge=c.s,Te=c.C,We=c.G,Ue=c.Ed,mt=a8(c.g),Rt=[];c=m(c.h.g);for(var Ht=c.next();!Ht.done;Ht=c.next())Ht=Ht.value,Rt.push({timestamp:Ht.timestamp,id:Ht.id,type:Ht.type,fromAdaptation:Ht.fromAdaptation,bandwidth:Ht.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:u,corruptedFrames:d,stallsDetected:h,gapsJumped:E,estimatedBandwidth:A,completionPercent:k,loadLatency:G,manifestTimeSeconds:ne,drmTimeSeconds:Y,playTime:ve,pauseTime:Pe,bufferingTime:xe,licenseTime:Ge,liveLatency:Te,maxSegmentDuration:We,bytesDownloaded:Ue,stateHistory:mt,switchHistory:Rt}},g.Rg=function(e,t,n,i,u,c,d){d=d===void 0?!1:d;var h=this,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:if(h.l!=Lo&&h.l!=ma)throw new pt(1,7,7004);if(n!="subtitles"&&n!="captions"&&He("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),i){Ue.u(2);break}return N(Ue,S_(h,e),3);case 3:i=Ue.h;case 2:if(E=[],h.A&&(E=h.A.getCuePoints()),h.l!=ma){Ue.u(4);break}return d&&(n="forced"),N(Ue,cN(h,e,t,n,i,c||"",E),5);case 5:if(A=Cr(t),k=h.wc(),G=k.find(function(mt){return Cr(mt.language)==A&&mt.label==(c||"")&&mt.kind==n}))return ns(h),Ue.return(G);throw new pt(1,2,2012);case 4:if(ne=yi,Y=h.g.duration,h.i&&(Y=h.i.presentationTimeline.getDuration()),Y==1/0)throw new pt(1,4,4033);if(!E.length){Ue.u(6);break}return N(Ue,w_(h,e,h.G,h.h.streaming.retryParameters),7);case 7:ve=Ue.h,Pe=fN(h,ve,i,E),xe=new Blob([Pe],{type:"text/vtt"}),e=Vm(xe),i="text/vtt";case 6:if(Ge={id:h.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:$E(0,Y,[e]),mimeType:i||"",codecs:u||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:c||null,type:ne.ma,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!d,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Si(i||"",u||"")])},Te=Si(Ge.mimeType,Ge.codecs),We=Rl(Te),!We)throw new pt(2,2,2014,i);return h.i.textStreams.push(Ge),ns(h),Ue.return(Dl(Ge))}})},g.Sg=function(e,t){var n=this,i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te;return Oe(function(We){switch(We.g){case 1:if(n.l!=Lo&&n.l!=ma)throw new pt(1,7,7004);if(t){We.u(2);break}return N(We,S_(n,e),3);case 3:t=We.h;case 2:if(t!="text/vtt")throw new pt(1,2,2017,e);if(i=yi,u=n.g.duration,n.i&&(u=n.i.presentationTimeline.getDuration()),u==1/0)throw new pt(1,4,4045);return N(We,w_(n,e,n.G,n.h.streaming.retryParameters),4);case 4:if(c=We.h,d=ji[t],!d)throw new pt(2,2,2014,t);for(h=d(),E={periodStart:0,segmentStart:0,segmentEnd:u,vttOffset:0},A=Qn(c),k=h.parseMedia(A,E,e),G=[],ne={},Y=m(k),ve=Y.next();!ve.done;ne={Rc:ne.Rc,Nb:ne.Nb},ve=Y.next())ne.Nb=ve.value,ne.Rc=null,Pe=function(Ue){return function(){return Ue.Rc==null&&(Ue.Rc=co([e],[Ue.Nb.payload])),Ue.Rc||[]}}(ne),xe=new Je(ne.Nb.startTime,ne.Nb.endTime,Pe,0,null,null,0,0,1/0),ne.Nb.payload.includes("#xywh")&&(Ge=ne.Nb.payload.split("#xywh=")[1].split(","),Ge.length===4&&xe.Eg({height:parseInt(Ge[3],10),positionX:parseInt(Ge[0],10),positionY:parseInt(Ge[1],10),width:parseInt(Ge[2],10)})),G.push(xe);return Te={id:n.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(G),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.ue,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Si(t||"","")])},n.l==ma?n.$c.push(Te):n.i.imageStreams.push(Te),ns(n),We.return(Vu(Te))}})},g.Qg=function(e,t,n){var i=this,u,c,d,h;return Oe(function(E){switch(E.g){case 1:if(i.l!=Lo&&i.l!=ma)throw new pt(1,7,7004);if(n){E.u(2);break}return N(E,S_(i,e),3);case 3:n=E.h;case 2:return u=[],i.A&&(u=i.A.getCuePoints()),N(E,cN(i,e,t,"chapters",n,"",u),4);case 4:if(c=E.h,d=i.bg(),h=d.find(function(A){return A.language==t}),!h){E.u(5);break}return N(E,new Promise(function(A,k){i.m.na(c,"load",A),i.m.na(c,"error",function(){k(new pt(1,2,2015))})}),6);case 6:return ns(i),E.return(h);case 5:throw new pt(1,2,2012)}})};function S_(e,t){var n;return Oe(function(i){switch(i.g){case 1:return fe(i,2),N(i,h_(t,e.G,e.h.streaming.retryParameters),4);case 4:n=i.h,he(i,3);break;case 2:Ie(i);case 3:if(n)return i.return(n);throw new pt(1,2,2011,t)}})}function cN(e,t,n,i,u,c,d){var h,E,A,k;return Oe(function(G){if(G.g==1)return u!="text/vtt"||d.length?N(G,w_(e,t,e.G,e.h.streaming.retryParameters),3):G.u(2);G.g!=2&&(h=G.h,E=fN(e,h,u,d),A=new Blob([E],{type:"text/vtt"}),t=Vm(A),u="text/vtt"),k=document.createElement("track");var ne=e.T,Y=t;try{if(ne.g.enabled){var ve=m_(ne);ve.ot=y_,ve.su=!0;var Pe=rv(ve),xe=v_(Y,Pe)}else xe=Y}catch(Ge){Tt("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",Ge),xe=Y}return k.src=xe,k.label=c,k.kind=i,k.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(k),G.return(k)})}function w_(e,t,n,i){var u,c,d;return Oe(function(h){if(h.g==1){u=$a,c=Li([t],i),c.method="GET";var E=e.T;try{E.g.enabled&&ud(E,c,{ot:y_,su:!0})}catch(A){Tt("CMCD_TEXT_ERROR","Could not generate text CMCD data.",A)}return N(h,n.request(u,c).promise,2)}return d=h.h,h.return(d.data)})}function fN(e,t,n,i){var u=ji[n];if(u)return n=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=Qn(t),t=n.parseMedia(t,e,null),V8(t,i);throw new pt(2,2,2014,n)}g.xi=function(e,t){this.ba.width=e,this.ba.height=t},g.vf=function(e){if(this.l==Lo){var t=this.j;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.A)t=!1;else{for(var n=m(t.i.values()),i=n.next();!i.done;i=n.next())i=i.value,!i.gd||i.Qa||i.ub||(i.gd=!1,Ss(t,i,e));t=!0}}else t=!1;return t},g.Te=function(){return He("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},g.rh=function(){return this.Ga};function fd(e){var t=od();return t.streaming.failureCallback=function(n){if(e.R()){var i=null;n.code==1001||n.code==1002?i=1:n.code==1003&&(i=.1),i!=null&&(n.severity=1,e.vf(i))}},t.textDisplayFactory=function(){if(e.Rd){var n=e.getConfiguration();return new ga(e.g,e.Rd,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new ha(e.g,"Shaka Player TextTrack"):new pa},t}g.Hg=function(e){this.Rd=e};function g6(e,t){for(var n=new Set,i=m(t.textStreams),u=i.next();!u.done;u=i.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||n.add(u.originalId);for(i=m(t.variants),u=i.next();!u.done;u=i.next())if((u=u.value.video)&&u.closedCaptions){for(var c=m(u.closedCaptions.keys()),d=c.next();!d.done;d=c.next())if(d=d.value,!n.has(d)){var h=d.startsWith("CC")?"application/cea-608":"application/cea-708",E=new Ei,A=u.closedCaptions.get(d);h={id:e.nf++,originalId:d,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:E,mimeType:h,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:A,originalLanguage:A,label:null,type:vr,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Si(h,"")])},t.textStreams.push(h),n.add(d)}}}function m6(e,t){var n,i,u,c,d;return Oe(function(h){return h.g==1?(n=e.audio,i=e.video,u=function(E,A){var k,G,ne;return Oe(function(Y){return Y.g==1?E?N(Y,E.createSegmentIndex(),2):Y.return(null):(G=(k=E.segmentIndex.xb(A))?k.next().value:null,G?(ne=G.startTime,Y.return(ne)):Y.return(null))})},N(h,u(n,t),2)):h.g!=3?(c=h.h,N(h,u(i,t),3)):(d=h.h,d!=null&&c!=null?h.return(Math.max(d,c)):d!=null?h.return(d):c!=null?h.return(c):h.return(t))})}function A_(e){var t=e.Xe();if(e.s&&e.L&&e.C){if(e.T){var n=e.T;t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t}lv(e)}t=new Map().set("buffering",t),e.dispatchEvent(Jr("buffering",t))}function dN(e){var t=e.g.playbackRate;t!=0&&(e.H&&e.H.set(t),t=Jr("ratechange"),e.dispatchEvent(t))}function lv(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==Ll?n="buffering":e.g.paused?n="paused":e.g.ended&&(n="ended");var i=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:i,duration:0},t=!0;else{var u=Date.now()/1e3;t.g.duration=u-t.g.timestamp,t.g.state==i?t=!1:(t.h.push(t.g),t.g={timestamp:u,state:i,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Jr("statechanged",n)))}}function hN(e){var t=e.g.playbackRate,n=e.R();if(e.h.streaming.vodDynamicPlaybackRate&&!n){var i=e.h.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.ag();u<=e.h.streaming.vodDynamicPlaybackRateBufferRatio?t!=i&&e.sd(i):u==1&&t!==e.H.Xb()&&e.Wc()}if(n&&(u=e.Ib(),Number.isFinite(u.end)&&!(e.g.currentTime<u.start))){if(e.h.streaming.liveSync)var c=e.h.streaming.liveSyncMaxLatency,d=e.h.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(c=e.i.serviceDescription.maxLatency||e.h.streaming.liveSyncMaxLatency,d=e.i.serviceDescription.maxPlaybackRate||e.h.streaming.liveSyncPlaybackRate);if(e.h.streaming.liveSync)var h=e.h.streaming.liveSyncMinLatency,E=e.h.streaming.liveSyncMinPlaybackRate;else e.i&&e.i.serviceDescription&&(h=e.i.serviceDescription.minLatency||e.h.streaming.liveSyncMinLatency,E=e.i.serviceDescription.minPlaybackRate||e.h.streaming.liveSyncMinPlaybackRate);if(n=u.end-e.g.currentTime,i=0,e.l==ma){var A=e.g.buffered;0<A.length&&(i=A.end(A.length-1),i=Math.max(d,i-u.end))}u=e.h.streaming.liveSyncPanicMode,A=1e3*e.h.streaming.liveSyncPanicThreshold;var k=Date.now()-e.L.h;u&&!E&&(E=e.h.streaming.liveSyncMinPlaybackRate),u&&E&&k<=A?t!=E&&e.sd(E):c&&d&&n-i>c?t!=d&&e.sd(d):h&&E&&n-i<h?t!=E&&e.sd(E):t!==e.H.Xb()&&e.Wc()}}function cv(e){if(e.g){var t=!1,n=e.g.currentTime/e.g.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.N)?(e.N=n,t=!0):(n=Math.max(e.N,n),e.N!=n&&(e.N=n,t=!0))),t){var i;e.N==0?i=Jr("started"):e.N==25?i=Jr("firstquartile"):e.N==50?i=Jr("midpoint"):e.N==75?i=Jr("thirdquartile"):e.N==100&&(i=Jr("complete")),i&&e.dispatchEvent(i)}}}function dd(e){try{se(e.Pd,e.i)}catch(n){return pd(e,n),!1}var t=Zf(e.i.variants);return t=e.sa.create(t),e.o.setVariants(Array.from(t.values())),!0}function pN(e,t){return t=t===void 0?!1:t,dd(e)?e.o.chooseVariant(t):null}function v6(e){function t(d){var h="";return d.video&&(h+="video:"+d.video.id),d.audio&&(h=h+(h?"&":"")+("audio:"+d.audio.id)),h}for(var n=Date.now()/1e3,i=!1,u=m(e.i.variants),c=u.next();!c.done;c=u.next())c=c.value,0<c.disabledUntilTime&&c.disabledUntilTime<=n&&(c.disabledUntilTime=0,i=!0,""+t(c),void 0);e.i.variants.every(function(d){return d.disabledUntilTime===0})&&e.Td.stop(),i&&hd(e,!0,void 0,!1,!1)}function hd(e,t,n,i,u){t=t===void 0?!0:t,n=n===void 0?0:n,i=i===void 0?!1:i,u=u===void 0?!0:u;var c=pN(e);c&&fv(e,c,u,t,n,i)}function fv(e,t,n,i,u,c){c=c===void 0?!1:c;var d=e.j.j;if(t==d)i&&MR(e.j,t,i,u,!0);else{var h=e.s.h;h.h!=t&&(h.h=t,h.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),MR(e.j,t,i,u,c,n),i=null,d&&(i=Ml(d)),t=Ml(t),n?(n=new Map().set("oldTrack",i).set("newTrack",t),e.K&&Gs(e.K,t,e.Ue()),n=Jr("adaptation",n),gd(e,n)):mN(e,i,t)}}function gN(e,t){var n=Array.from(e.g.audioTracks).find(function(i){return i.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=Pl(n),t=Pl(t),mN(e,n,t)}function y6(e,t,n){if(e.h.autoShowText==0)return!1;if(e.h.autoShowText==1)return!0;var i=Cr(e.h.preferredTextLanguage);return n=Cr(n.language),e.h.autoShowText==2?Zu(n,i):e.h.autoShowText==3?(e=Cr(t.language),Zu(n,i)&&!Zu(e,n)):(He("Invalid autoShowText setting!"),!1)}function ns(e){var t=Jr("trackschanged");gd(e,t)}function mN(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&Gs(e.K,n,e.Ue()),n=Jr("variantchanged",t),gd(e,n)}function dv(e){var t=Jr("textchanged");gd(e,t)}function vN(e){var t=Jr("texttrackvisibility");gd(e,t)}function yN(e){e.h.abr.enabled||I_(e);var t=new Map().set("newStatus",e.h.abr.enabled);gd(e,Jr("abrstatuschanged",t))}function I_(e,t){if(t=t===void 0?!0:t,e.l==Lo){e.Td.stop();for(var n=m(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&dd(e)}}g.Jd=function(e,t){if(!this.h.abr.enabled||this.l===zs||!navigator.onLine)return!1;if(this.i.variants.some(function(c){return(c=c[e.type])&&c.id!==e.id?e.type=="audio"?e.language===c.language:!0:!1})){for(var n=m(this.i.variants),i=n.next();!i.done;i=n.next()){i=i.value;var u=i[e.type];u&&u.id===e.id&&(i.disabledUntilTime=Date.now()/1e3+t)}return this.Td.$a(1),t=this.ob().video.reduce(function(c,d){return c+d.end-d.start},0),hd(this,!0,t,!0,!1),!0}return!1};function pd(e,t){var n,i,u;return Oe(function(c){switch(c.g){case 1:if(e.l==zs)return c.return();if(n=!0,!(e.Ia&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){c.u(2);break}return fe(c,3),N(c,R8(e.j),5);case 5:i=c.h,n=!i,he(c,2);break;case 3:Ie(c),n=!0;case 2:if(!n)return c.return();t.severity===2&&I_(e,!1),u=Jr("error",new Map().set("detail",t)),e.dispatchEvent(u),u.defaultPrevented&&(t.handled=!0),$(c)}})}function mp(e,t,n,i){i=i===void 0?e:i,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),i.dispatchEvent(Jr(t,e))}function b_(e){if(!e.g.error)return null;var t=e.g.error.code;if(t==1)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new pt(2,3,3016,t,n,e.g.error.message)}function C_(e,t,n){0<t&&(e.R()||e.Gg(t)),t=e.getDuration(),n<t&&(e.R()||e.Za(n))}function gd(e,t){Oe(function(n){if(n.g==1)return N(n,Promise.resolve(),2);e.l!=zs&&e.dispatchEvent(t),$(n)})}function EN(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Cr(n.language)):t.add("und");return t}function _N(e){var t=new Map,n=new Map;e=m(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var u="und",c=[];i.language&&(u=Cr(i.language)),i.type=="variant"?c=i.audioRoles:c=i.roles,c&&c.length||(c=[""]),t.has(u)||t.set(u,new Set),c=m(c);for(var d=c.next();!d.done;d=c.next())d=d.value,t.get(u).add(d),i.label&&(n.has(u)||n.set(u,new Map),n.get(u).set(d,i.label))}var h=[];return t.forEach(function(E,A){E=m(E);for(var k=E.next();!k.done;k=E.next()){k=k.value;var G=null;n.has(A)&&n.get(A).has(k)&&(G=n.get(A).get(k)),h.push({language:A,role:k,label:G})}}),h}te("shaka.Player",dn),dn.prototype.setVideoContainer=dn.prototype.Hg,dn.prototype.getManifestParserFactory=dn.prototype.rh,dn.prototype.getManifest=dn.prototype.Te,dn.prototype.retryStreaming=dn.prototype.vf,dn.prototype.setMaxHardwareResolution=dn.prototype.xi,dn.prototype.addChaptersTrack=dn.prototype.Qg,dn.prototype.addThumbnailsTrack=dn.prototype.Sg,dn.prototype.addTextTrackAsync=dn.prototype.Rg,dn.prototype.getStats=dn.prototype.getStats,dn.prototype.getBufferedInfo=dn.prototype.ob,dn.prototype.getSegmentAvailabilityDuration=dn.prototype.Nd,dn.prototype.getPresentationStartTimeAsDate=dn.prototype.eg,dn.prototype.getPlayheadTimeAsDate=dn.prototype.vh,dn.prototype.setTextTrackVisibility=dn.prototype.Dg,dn.prototype.getChapters=dn.prototype.jh,dn.prototype.getChaptersTracks=dn.prototype.bg,dn.prototype.isTextTrackVisible=dn.prototype.Ze,dn.prototype.selectVariantsByLabel=dn.prototype.si,dn.prototype.selectTextLanguage=dn.prototype.yf,dn.prototype.selectAudioLanguage=dn.prototype.wg,dn.prototype.getTextLanguages=dn.prototype.zh,dn.prototype.getAudioLanguages=dn.prototype.hh,dn.prototype.getTextLanguagesAndRoles=dn.prototype.Ah,dn.prototype.getAudioLanguagesAndRoles=dn.prototype.ih,dn.prototype.selectVariantTrack=dn.prototype.zf,dn.prototype.selectTextTrack=dn.prototype.xg,dn.prototype.getThumbnails=dn.prototype.fg,dn.prototype.getAllThumbnails=dn.prototype.gh,dn.prototype.getImageTracks=dn.prototype.oh,dn.prototype.getTextTracks=dn.prototype.wc,dn.prototype.getVariantTracks=dn.prototype.Hb,dn.prototype.cancelTrickPlay=dn.prototype.Wc,dn.prototype.trickPlay=dn.prototype.sd,dn.prototype.getPlaybackRate=dn.prototype.eb,dn.prototype.isBuffering=dn.prototype.Xe,dn.prototype.getKeyStatuses=dn.prototype.Kd,dn.prototype.getActiveSessionsMetadata=dn.prototype.Se,dn.prototype.getExpiration=dn.prototype.cd,dn.prototype.drmInfo=dn.prototype.drmInfo,dn.prototype.keySystem=dn.prototype.keySystem,dn.prototype.goToLive=dn.prototype.Hh,dn.prototype.seekRange=dn.prototype.Ib,dn.prototype.isAudioOnly=dn.prototype.Kh,dn.prototype.isInProgress=dn.prototype.dc,dn.prototype.isLive=dn.prototype.R,dn.prototype.getAdManager=dn.prototype.$f,dn.prototype.getAssetUri=dn.prototype.ad,dn.prototype.getNetworkingEngine=dn.prototype.Zb,dn.prototype.getMediaElement=dn.prototype.th,dn.prototype.getManifestType=dn.prototype.Ue,dn.prototype.getLoadMode=dn.prototype.qh,dn.prototype.resetConfiguration=dn.prototype.li,dn.prototype.getBufferFullness=dn.prototype.ag,dn.prototype.getConfiguration=dn.prototype.getConfiguration,dn.prototype.configure=dn.prototype.configure,dn.prototype.releaseAllMutexes=dn.prototype.hi,dn.prototype.preload=dn.prototype.preload,dn.prototype.unloadAndSavePreload=dn.prototype.Ai,dn.prototype.load=dn.prototype.load,dn.prototype.updateStartTime=dn.prototype.Ei,dn.prototype.unload=dn.prototype.lc,dn.prototype.detach=dn.prototype.detach,dn.prototype.attachCanvas=dn.prototype.Wg,dn.prototype.attach=dn.prototype.Vc,dn.probeSupport=function(e){e=e===void 0?!0:e;var t,n,i,u,c,d;return Oe(function(h){if(h.g==1)return t={},e?N(h,ee(),3):h.u(2);h.g!=2&&(t=h.h);var E={};if(bo())for(var A in ke)E[A]=!0;A=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var k=A.next();!k.done;k=A.next())k=k.value,E[k]=bo()?!!ke[k]:cu(k);for(n=E,A='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(T(pu)),E={},A=m(A),k=A.next();!k.done;k=A.next()){k=k.value,E[k]=bo()?Rl(k)?!0:Pt(k)||!!ro(k):cu(k);var G=k.split(";")[0];E[G]=E[G]||E[k]}i=E,u={manifest:n,media:i,drm:t},c=N_;for(d in c)u[d]=c[d]();return h.return(u)})},dn.isBrowserSupported=function(){if(p.Promise||He("A Promise implementation or polyfill is required"),!(p.Promise&&p.Uint8Array&&Array.prototype.forEach)||Yr("Trident/"))return!1;var e=_s();return e&&9>e||!(p.MediaKeys&&p.navigator&&p.navigator.requestMediaKeySystemAccess&&p.MediaKeySystemAccess&&p.MediaKeySystemAccess.prototype.getConfiguration)?!1:bo()?!0:cu("application/x-mpegurl")},dn.setAdManagerFactory=function(e){hv=e},dn.registerSupportPlugin=function(e,t){N_[e]=t},dn.prototype.destroy=dn.prototype.destroy;var zs=0,R_=1,Lo=2,ma=3;dn.LoadMode={DESTROYED:zs,NOT_LOADED:R_,MEDIA_SOURCE:Lo,SRC_EQUALS:ma},dn.version="v4.8.2";var TN=["4","8"];Or=new function(e){this.g=e,this.i=ei,this.h=Ji}(new Pr(Number(TN[0]),Number(TN[1])));var N_={},hv=null;function SN(){this.h=[],this.j=this.i=this.g=0}function lr(e,t,n){var i=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new _t,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}g=lr.prototype,g.getDuration=function(){return this.g.getDuration()},g.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},g.getRemainingTime=function(){return this.h.getRemainingTime()},g.isPaused=function(){return this.i},g.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.h.getAdSkippableState()},g.skip=function(){return this.h.skip()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.resume()},g.getVolume=function(){return this.h.getVolume()},g.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},g.isMuted=function(){return this.h.getVolume()==0},g.isLinear=function(){return this.g.isLinear()},g.resize=function(e,t){var n=!1,i=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},g.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return this.g.getMediaUrl()},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.g=null},te("shaka.ads.ClientSideAd",lr),lr.prototype.release=lr.prototype.release,lr.prototype.getPodIndex=lr.prototype.getPodIndex,lr.prototype.getTimeOffset=lr.prototype.getTimeOffset,lr.prototype.getMediaUrl=lr.prototype.getMediaUrl,lr.prototype.getAdvertiserName=lr.prototype.getAdvertiserName,lr.prototype.getCreativeAdId=lr.prototype.getCreativeAdId,lr.prototype.getAdId=lr.prototype.getAdId,lr.prototype.getVastMediaWidth=lr.prototype.getVastMediaWidth,lr.prototype.getVastMediaHeight=lr.prototype.getVastMediaHeight,lr.prototype.getVastMediaBitrate=lr.prototype.getVastMediaBitrate,lr.prototype.getDescription=lr.prototype.getDescription,lr.prototype.getTitle=lr.prototype.getTitle,lr.prototype.getPositionInSequence=lr.prototype.getPositionInSequence,lr.prototype.getSequenceLength=lr.prototype.getSequenceLength,lr.prototype.setMuted=lr.prototype.setMuted,lr.prototype.resize=lr.prototype.resize,lr.prototype.isLinear=lr.prototype.isLinear,lr.prototype.isMuted=lr.prototype.isMuted,lr.prototype.setVolume=lr.prototype.setVolume,lr.prototype.getVolume=lr.prototype.getVolume,lr.prototype.play=lr.prototype.play,lr.prototype.pause=lr.prototype.pause,lr.prototype.skip=lr.prototype.skip,lr.prototype.canSkipNow=lr.prototype.canSkipNow,lr.prototype.getTimeUntilSkippable=lr.prototype.getTimeUntilSkippable,lr.prototype.isSkippable=lr.prototype.isSkippable,lr.prototype.isPaused=lr.prototype.isPaused,lr.prototype.getRemainingTime=lr.prototype.getRemainingTime,lr.prototype.getMinSuggestedDuration=lr.prototype.getMinSuggestedDuration,lr.prototype.getDuration=lr.prototype.getDuration;function pv(e,t,n,i,u){var c=this;this.o=e,this.i=t,this.C=!1,this.A=this.s=null,this.F=NaN,this.m=u,this.j=null,this.h=new _t,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),e=new google.ima.AdDisplayContainer(this.o,this.i),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v4.8.2"),this.g=null,this.B=i||new google.ima.AdsRenderingSettings,this.h.D(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(d){E6(c,d)}),this.h.D(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(d){wN(c,d)}),this.h.D(this.i,"ended",function(){c.l.contentComplete()}),this.h.na(this.i,"play",function(){c.C=!0})}pv.prototype.configure=function(e){this.s=e},pv.prototype.stop=function(){this.g&&this.g.stop(),this.o&&pp(this.o)},pv.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()};function wN(e,t){t.getError(),t=new Map().set("originalEvent",t),e.m(new Wn("ad-error",t)),mv(e,null),e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",[])))}function E6(e,t){if(e.m(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),e.s.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.m(new Wn("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var i=e.g.getCuePoints();if(i.length){t=[],i=m(i);for(var u=i.next();!u.done;u=i.next())t.push({start:u.value,end:null});e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",t)))}_6(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,gv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,gv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in p?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,gv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,gv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.C||e.s.skipPlayDetection?e.g.start():e.h.na(e.i,"play",function(){e.C=!0,e.g.start()})}catch(c){mv(e,null)}}function gv(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function _6(e){function t(n,i){n=new Map().set("originalEvent",n),e.m(new Wn(i,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){wN(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){AN(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){AN(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){mv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){mv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function AN(e,t){var n=t.getAd();n?(e.j=new lr(n,e.g,e.i),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new Wn("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.s.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):He("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function mv(e,t){e.m(new Wn("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.s.customPlayheadTracker||e.i.ended||e.i.play())}function or(e,t,n,i,u){this.h=e,this.g=u,this.i=t,this.j=n,this.l=i}g=or.prototype,g.getDuration=function(){return this.h.durationInSeconds},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},g.isPaused=function(){return this.g.paused},g.isSkippable=function(){return!!this.h.skipOffset},g.getTimeUntilSkippable=function(){if(!this.h.skipOffset)return this.getRemainingTime();var e=this.getRemainingTime()-this.h.skipOffset;return Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.g.currentTime+=this.getRemainingTime()},g.pause=function(){return this.g.pause()},g.play=function(){return this.g.play()},g.getVolume=function(){return this.g.volume},g.setVolume=function(e){this.g.volume=e},g.isMuted=function(){return this.g.muted},g.isLinear=function(){return this.l},g.resize=function(){},g.setMuted=function(e){this.g.muted=e},g.getSequenceLength=function(){return this.j?this.j:1},g.getPositionInSequence=function(){return this.i?this.i:1},g.getTitle=function(){return this.h.adTitle},g.getDescription=function(){return""},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return 0},g.getVastMediaWidth=function(){return 0},g.getAdId=function(){return this.h.adId},g.getCreativeAdId=function(){return this.h.creativeId},g.getAdvertiserName=function(){return""},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){return 0},g.getPodIndex=function(){return 0},g.release=function(){this.j=this.i=this.g=this.h=null},te("shaka.ads.MediaTailorAd",or),or.prototype.release=or.prototype.release,or.prototype.getPodIndex=or.prototype.getPodIndex,or.prototype.getTimeOffset=or.prototype.getTimeOffset,or.prototype.getMediaUrl=or.prototype.getMediaUrl,or.prototype.getAdvertiserName=or.prototype.getAdvertiserName,or.prototype.getCreativeAdId=or.prototype.getCreativeAdId,or.prototype.getAdId=or.prototype.getAdId,or.prototype.getVastMediaWidth=or.prototype.getVastMediaWidth,or.prototype.getVastMediaHeight=or.prototype.getVastMediaHeight,or.prototype.getVastMediaBitrate=or.prototype.getVastMediaBitrate,or.prototype.getDescription=or.prototype.getDescription,or.prototype.getTitle=or.prototype.getTitle,or.prototype.getPositionInSequence=or.prototype.getPositionInSequence,or.prototype.getSequenceLength=or.prototype.getSequenceLength,or.prototype.setMuted=or.prototype.setMuted,or.prototype.resize=or.prototype.resize,or.prototype.isLinear=or.prototype.isLinear,or.prototype.isMuted=or.prototype.isMuted,or.prototype.setVolume=or.prototype.setVolume,or.prototype.getVolume=or.prototype.getVolume,or.prototype.play=or.prototype.play,or.prototype.pause=or.prototype.pause,or.prototype.skip=or.prototype.skip,or.prototype.canSkipNow=or.prototype.canSkipNow,or.prototype.getTimeUntilSkippable=or.prototype.getTimeUntilSkippable,or.prototype.isSkippable=or.prototype.isSkippable,or.prototype.isPaused=or.prototype.isPaused,or.prototype.getRemainingTime=or.prototype.getRemainingTime,or.prototype.getMinSuggestedDuration=or.prototype.getMinSuggestedDuration,or.prototype.getDuration=or.prototype.getDuration;function vp(e,t,n,i){this.B=e,this.K=t,this.g=n,this.l=null,this.Y=NaN,this.i=i,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.h=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.o=new _t}vp.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Kb(t.target,t.type,t.listener);md(this),this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},vp.prototype.release=function(){this.stop(),this.o&&this.o.release()},vp.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(S6(this,this.G,this.T),this.T=!1)},vp.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var i=n.next();!i.done;i=n.next())i=i.value,e.push({start:i.startTimeInSeconds,end:i.startTimeInSeconds+i.durationInSeconds})}return e};function T6(e,t,n){var i,u,c,d,h,E,A,k,G,ne,Y;Oe(function(ve){if(ve.g==1)return i=Li([t],la()),i.method="POST",n&&(u=JSON.stringify(n),i.body=za(u)),c=e.K.request(7,i),fe(ve,2),N(ve,c.promise,4);if(ve.g!=2){if(d=ve.h,h=Vr(d.data),E=JSON.parse(h),E.manifestUrl&&E.trackingUrl)A=new si(t),k=new si(E.trackingUrl),e.G=A.resolve(k).toString(),G=Date.now()/1e3,ne=G-e.Y,e.i(new Wn("ads-loaded",new Map().set("loadTime",ne))),Y=new si(E.manifestUrl),e.l.resolve(A.resolve(Y).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return he(ve,0)}if(Ie(ve),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,ve.return();e.l.resolve(e.H),e.l=null,$(ve)})}function S6(e,t,n){var i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge;Oe(function(Te){if(Te.g==1)return i=Li([t],la()),u=e.K.request(7,i),fe(Te,2),N(Te,u.promise,4);if(Te.g!=2){if(c=Te.h,d=[],h=Vr(c.data),E=JSON.parse(h),0<E.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(E.avails)){for(e.j=E.avails,A=m(e.j),k=A.next();!k.done;k=A.next())for(G=k.value,ne=m(G.nonLinearAdsList),Y=ne.next();!Y.done;Y=ne.next())for(ve=Y.value,Pe=m(ve.nonLinearAdList),xe=Pe.next();!xe.done;xe=Pe.next())Ge=xe.value,w6(e,Ge);d=e.getCuePoints(),e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",d)))}}else e.j.length&&e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",d))),md(e),e.j=[];return n&&(e.I||0<d.length)&&A6(e),he(Te,0)}Ie(Te),$(Te)})}function w6(e,t){var n,i,u,c,d,h,E;Oe(function(A){if(A.g==1)return!t.staticResource||(n=IN(t),e.F.get(n))?A.return():(i=Li([t.staticResource],la()),u=e.K.request(7,i),fe(A,2),e.F.set(n,[]),N(A,u.promise,4));if(A.g!=2)return c=A.h,d=Vr(c.data),h=JSON.parse(d),E=h.apps,e.F.set(n,E),he(A,0);Ie(A),e.F.delete(n),$(A)})}function IN(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function A6(e){CN(e),e.I||(bN(e),e.o.D(e.g,"seeked",function(){bN(e)}),e.o.D(e.g,"ended",function(){md(e)})),e.o.D(e.g,"timeupdate",function(){CN(e)})}function bN(e){var t=e.g.currentTime;if(t!=0&&e.A==null){for(var n,i,u=m(e.j),c=u.next();!c.done;c=u.next()){c=c.value;for(var d=m(c.ads),h=d.next();!h.done;h=d.next())if(h=h.value,!i)h.startTimeInSeconds<t&&(i=h,n=c);else if(h.startTimeInSeconds<t&&h.startTimeInSeconds>i.startTimeInSeconds+i.durationInSeconds){i=h,n=c;break}}n&&i&&!e.N.includes(i.adId)&&(e.A=t,e.g.currentTime=n.startTimeInSeconds)}}function CN(e){if(e.g.duration&&(e.h||e.j.length)){var t=e.g.currentTime,n=!1;if(e.h){n=!0;var i=e.C,u=i.startTimeInSeconds+.5*i.durationInSeconds,c=i.startTimeInSeconds+.75*i.durationInSeconds;t>=i.startTimeInSeconds+.25*i.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),va(e,"firstQuartile")):t>=u&&!e.s.includes("midpoint")?(e.s.push("midpoint"),va(e,"midpoint")):t>=c&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),va(e,"thirdQuartile")),i=e.h.getRemainingTime(),u=e.h.getDuration(),0<u&&(0>=i||i>u)&&md(e)}if(!e.h||!e.h.isLinear()){e:for(i=m(e.j),u=i.next();!u.done&&(u=u.value,!(e.h&&e.h.isLinear()));u=i.next())for(c=0;c<u.ads.length;c++){var d=u.ads[c],h=d.startTimeInSeconds+d.durationInSeconds;if(d.startTimeInSeconds<=t&&h>t){if(e.N.includes(d.adId)){if(e.g.ended)continue;e.g.currentTime=h;break e}md(e),e.L=u,e.h=new or(d,c+1,u.ads.length,!0,e.g),e.C=d,c===0&&va(e,"breakStart"),RN(e);break}}if(!e.h){for(i=m(e.j),u=i.next();!u.done&&(u=u.value,!e.h);u=i.next())for(c=0;c<u.nonLinearAdsList.length;c++)if(d=u.nonLinearAdsList[c],d.nonLinearAdList.length){h=u.startTimeInSeconds;var E=e.F.get(IN(d.nonLinearAdList[0]));if(h<=t&&E&&E.length){md(e),h=e,E=m(E);for(var A=E.next();!A.done;A=E.next())if(A=A.value,A.data.source.length){var k=document.createElement("img");k.src=A.data.source[0].url,k.style.top=(A.placeholder.top||0)+"%",k.style.height=100-(A.placeholder.top||0)+"%",k.style.left=(A.placeholder.left||0)+"%",k.style.maxWidth=100-(A.placeholder.left||0)+"%",k.style.objectFit="contain",k.style.position="absolute",h.B.appendChild(k)}e.L=u,e.h=new or(d,c+1,u.ads.length,!1,e.g),e.C=d,c===0&&va(e,"breakStart"),RN(e);break}}}n&&!e.h&&(t=e.g.currentTime,e.A&&e.A>t&&(e.g.currentTime=e.A),e.A=null)}}}function md(e){if(e.h){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId),va(e,"complete");for(var t=m(e.m),n=t.next();!n.done;n=t.next())n=n.value,e.o.Kb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.h.getPositionInSequence(),n=e.h.getSequenceLength(),t===n&&va(e,"breakEnd"),e.h=null,e.C=null,e.L=null}}function RN(e){var t=!1;e.g.paused?t=!0:(va(e,"impression"),va(e,"start")),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted&&va(e,"mute")}}),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted||va(e,"unmute")}}),e.m.push({target:e.g,type:"play",listener:function(){t?(va(e,"impression"),va(e,"start"),t=!1):va(e,"resume")}}),e.m.push({target:e.g,type:"pause",listener:function(){va(e,"pause")}});for(var n=m(e.m),i=n.next();!i.done;i=n.next())i=i.value,e.o.D(i.target,i.type,i.listener)}function va(e,t){var n=e.C.trackingEvents.find(function(u){return u.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(u){return u.eventType==t})),n){n=m(n.beaconUrls);for(var i=n.next();!i.done;i=n.next())(i=i.value)&&i!=""&&(i=Li([i],la()),i.method="POST",e.K.request(7,i))}switch(t){case"impression":e.i(new Wn("ad-impression"));break;case"start":e.i(new Wn("ad-started",new Map().set("ad",e.h)));break;case"mute":e.i(new Wn("ad-muted"));break;case"unmute":e.i(new Wn("ad-volume-changed"));break;case"resume":e.i(new Wn("ad-resumed"));break;case"pause":e.i(new Wn("ad-paused"));break;case"firstQuartile":e.i(new Wn("ad-first-quartile"));break;case"midpoint":e.i(new Wn("ad-midpoint"));break;case"thirdQuartile":e.i(new Wn("ad-third-quartile"));break;case"complete":e.i(new Wn("ad-complete")),e.i(new Wn("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active")}}function cr(e,t){this.g=e,this.i=null,this.h=t}g=cr.prototype,g.getDuration=function(){return this.i?this.i.duration:-1},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},g.isPaused=function(){return this.h.paused},g.isSkippable=function(){return this.g.isSkippable()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.h.currentTime+=this.getRemainingTime()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.play()},g.getVolume=function(){return this.h.volume},g.setVolume=function(e){this.h.volume=e},g.isMuted=function(){return this.h.muted},g.isLinear=function(){return!0},g.resize=function(){},g.setMuted=function(e){this.h.muted=e},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.i=this.g=null},te("shaka.ads.ServerSideAd",cr),cr.prototype.release=cr.prototype.release,cr.prototype.getPodIndex=cr.prototype.getPodIndex,cr.prototype.getTimeOffset=cr.prototype.getTimeOffset,cr.prototype.getMediaUrl=cr.prototype.getMediaUrl,cr.prototype.getAdvertiserName=cr.prototype.getAdvertiserName,cr.prototype.getCreativeAdId=cr.prototype.getCreativeAdId,cr.prototype.getAdId=cr.prototype.getAdId,cr.prototype.getVastMediaWidth=cr.prototype.getVastMediaWidth,cr.prototype.getVastMediaHeight=cr.prototype.getVastMediaHeight,cr.prototype.getVastMediaBitrate=cr.prototype.getVastMediaBitrate,cr.prototype.getDescription=cr.prototype.getDescription,cr.prototype.getTitle=cr.prototype.getTitle,cr.prototype.getPositionInSequence=cr.prototype.getPositionInSequence,cr.prototype.getSequenceLength=cr.prototype.getSequenceLength,cr.prototype.setMuted=cr.prototype.setMuted,cr.prototype.resize=cr.prototype.resize,cr.prototype.isLinear=cr.prototype.isLinear,cr.prototype.isMuted=cr.prototype.isMuted,cr.prototype.setVolume=cr.prototype.setVolume,cr.prototype.getVolume=cr.prototype.getVolume,cr.prototype.play=cr.prototype.play,cr.prototype.pause=cr.prototype.pause,cr.prototype.skip=cr.prototype.skip,cr.prototype.canSkipNow=cr.prototype.canSkipNow,cr.prototype.getTimeUntilSkippable=cr.prototype.getTimeUntilSkippable,cr.prototype.isSkippable=cr.prototype.isSkippable,cr.prototype.isPaused=cr.prototype.isPaused,cr.prototype.getRemainingTime=cr.prototype.getRemainingTime,cr.prototype.getMinSuggestedDuration=cr.prototype.getMinSuggestedDuration,cr.prototype.getDuration=cr.prototype.getDuration;function NN(e,t,n,i){var u=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=i,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new _t,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Wn("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(c){I6(u,c)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.B.length?u.j.resolve(u.B):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(c){c=c.getAd(),u.m=new cr(c,u.l),u.A&&(u.m.i=u.A),u.i(new Wn("ad-started",new Map().set("ad",u.m))),u.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.s.removeAttribute("ad-active");var c=u.l.currentTime;u.o&&u.o>c&&(u.l.currentTime=u.o,u.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(c){u.A=c.getStreamData().adProgressData,u.m&&(u.m.i=u.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new Wn("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new Wn("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new Wn("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new Wn("ad-complete")),u.i(new Wn("ad-stopped")),u.s.removeAttribute("ad-active"),u.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new Wn("ad-skipped")),u.i(new Wn("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(c){var d=c.getStreamData();c=[],d=m(d.cuepoints);for(var h=d.next();!h.done;h=d.next())h=h.value,c.push({start:h.start,end:h.end});u.C=c,u.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",c)))})}g=NN.prototype,g.configure=function(){},g.stop=function(){this.B="",this.o=null,this.C=[]},g.release=function(){this.stop(),this.h&&this.h.release()},g.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},g.getCuePoints=function(){return this.C};function I6(e,t){e.i(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var i=e.g.previousCuePointForStreamTime(n);i&&!i.played&&(e.o=n,e.l.currentTime=i.start)}})}function $n(){Sr.call(this),this.g=this.h=this.i=null,this.j=new SN,this.m=navigator.language,this.l=null}z($n,Sr),g=$n.prototype,g.setLocale=function(e){this.m=e},g.configure=function(e){this.l=e,this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},g.initClientSide=function(e,t,n){var i=this;if(!p.google||!google.ima||!google.ima.AdsLoader)throw new pt(2,10,1e4);this.i&&this.i.release(),this.i=new pv(e,t,this.m,n,function(u){return x_(i,u)}),this.i.configure(this.l)},g.release=function(){this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Sr.prototype.release.call(this)},g.onAssetUnload=function(){this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Wn("ad-stopped")),this.j=new SN},g.requestClientSideAds=function(e){if(!this.i)throw new pt(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.F=Date.now()/1e3,t.l.requestAds(e)},g.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new pt(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},g.initMediaTailor=function(e,t,n){var i=this;this.h&&this.h.release(),this.h=new vp(e,t,n,function(u){return x_(i,u)})},g.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new pt(1,10,10005);var i=this.h;return n=n===void 0?"":n,i.l?e=Promise.reject(new pt(1,10,10004)):(i.l=new Rr,T6(i,e,t),i.H=n||"",i.Y=Date.now()/1e3,e=i.l),e},g.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new pt(1,10,10005);var t=this.h;t.G=e,t.i(new Wn("ads-loaded",new Map().set("loadTime",0)))},g.initServerSide=function(e,t){var n=this;if(!p.google||!google.ima||!google.ima.dai)throw new pt(2,10,10002);this.g&&this.g.release(),this.g=new NN(e,t,this.m,function(i){return x_(n,i)}),this.g.configure(this.l)},g.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new pt(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&He('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.8.2",n=this.g,n.j?e=Promise.reject(new pt(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Rr,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},g.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new pt(1,10,10003);(e.mpt||e.mpv)&&He('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.8.2",this.g.g.replaceAdTagParameters(e)},g.getServerSideCuePoints=function(){return dr("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},g.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},g.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},g.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},g.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},g.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},g.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)};function x_(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.j.h.push(t.loadTime);break;case"ad-started":e.j.g++;break;case"ad-complete":e.j.i++;break;case"ad-skipped":e.j.j++}e.dispatchEvent(t)}te("shaka.ads.AdManager",$n),$n.prototype.onCueMetadataChange=$n.prototype.onCueMetadataChange,$n.prototype.onHlsTimedMetadata=$n.prototype.onHlsTimedMetadata,$n.prototype.onDashTimedMetadata=$n.prototype.onDashTimedMetadata,$n.prototype.onManifestUpdated=$n.prototype.onManifestUpdated,$n.prototype.getStats=$n.prototype.getStats,$n.prototype.getCuePoints=$n.prototype.getCuePoints,$n.prototype.getServerSideCuePoints=$n.prototype.getServerSideCuePoints,$n.prototype.replaceServerSideAdTagParameters=$n.prototype.replaceServerSideAdTagParameters,$n.prototype.requestServerSideStream=$n.prototype.requestServerSideStream,$n.prototype.initServerSide=$n.prototype.initServerSide,$n.prototype.addMediaTailorTrackingUrl=$n.prototype.addMediaTailorTrackingUrl,$n.prototype.requestMediaTailorStream=$n.prototype.requestMediaTailorStream,$n.prototype.initMediaTailor=$n.prototype.initMediaTailor,$n.prototype.updateClientSideAdsRenderingSettings=$n.prototype.updateClientSideAdsRenderingSettings,$n.prototype.requestClientSideAds=$n.prototype.requestClientSideAds,$n.prototype.onAssetUnload=$n.prototype.onAssetUnload,$n.prototype.release=$n.prototype.release,$n.prototype.initClientSide=$n.prototype.initClientSide,$n.prototype.configure=$n.prototype.configure,$n.prototype.setLocale=$n.prototype.setLocale,$n.ADS_LOADED="ads-loaded",$n.AD_STARTED="ad-started",$n.AD_FIRST_QUARTILE="ad-first-quartile",$n.AD_MIDPOINT="ad-midpoint",$n.AD_THIRD_QUARTILE="ad-third-quartile",$n.AD_COMPLETE="ad-complete",$n.AD_STOPPED="ad-stopped",$n.AD_SKIPPED="ad-skipped",$n.AD_VOLUME_CHANGED="ad-volume-changed",$n.AD_MUTED="ad-muted",$n.AD_PAUSED="ad-paused",$n.AD_RESUMED="ad-resumed",$n.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",$n.CUEPOINTS_CHANGED="ad-cue-points-changed",$n.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",$n.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",$n.AD_CLICKED="ad-clicked",$n.AD_PROGRESS="ad-progress",$n.AD_BUFFERING="ad-buffering",$n.AD_IMPRESSION="ad-impression",$n.AD_DURATION_CHANGED="ad-duration-changed",$n.AD_CLOSED="ad-closed",$n.AD_LOADED="ad-loaded",$n.ALL_ADS_COMPLETED="all-ads-completed",$n.AD_LINEAR_CHANGED="ad-linear-changed",$n.AD_METADATA="ad-metadata",$n.AD_RECOVERABLE_ERROR="ad-recoverable-error",$n.AD_ERROR="ad-error",$n.AD_BREAK_READY="ad-break-ready",$n.AD_INTERACTION="ad-interaction",hv=function(){return new $n};function xN(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof Wn){var i={};for(u in n)(t=n[u])&&typeof t=="object"?u=="detail"&&(i[u]=t):u in Event||(i[u]=t);return i}if(n instanceof Error){var u=new Set(["name","message","stack"]);for(i in n)u.add(i);for(t=m(Object.getOwnPropertyNames(n)),i=t.next();!i.done;i=t.next())u.add(i.value);for(t={},u=m(u),i=u.next();!i.done;i=u.next())i=i.value,t[i]=n[i];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(u={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(vt(n)),i=n.next();!i.done;i=n.next())i=i.value,t=i.end,u.start.push(i.start),u.end.push(t);n=u}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function M_(e){return JSON.parse(e,function(t,n){if(n=="NaN")var i=NaN;else if(n=="-Infinity")i=-1/0;else if(n=="Infinity")i=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")i=b6(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")i=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(i in t)n[i]=t[i];i=n}else i=n;return i})}function b6(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var MN="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),C6="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),D_=["loop","playbackRate"],R6=["pause","play"],vv={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},yv={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},P_={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},DN=[["getConfiguration","configure"]],PN=[["isTextTrackVisible","setTextTrackVisibility"]],N6="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),x6=["attach","attachCanvas","detach","load","unload"];function O_(e,t,n,i,u,c,d){var h=this;this.G=e,this.K=d,this.l=new pr(t),this.L=n,this.s=!1,this.A=i,this.F=u,this.N=c,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return L_(h)},this.C=function(E,A){switch(E=M_(A),E.type){case"event":var k=E.targetName,G=xm(E.event);h.A(k,G);break;case"update":k=E.update;for(G in k){E=h.g[G]||{};for(var ne in k[G])E[ne]=k[G][ne]}h.s&&(h.L(),h.s=!1);break;case"asyncComplete":if(G=E.id,ne=E.error,E=h.i[G],delete h.i[G],E)if(ne){G=new pt(ne.severity,ne.category,ne.code);for(k in ne)G[k]=ne[k];E.reject(G)}else E.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,Ep.add(this)}g=O_.prototype,g.destroy=function(){return Ep.delete(this),k_(this),ws&&LN(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},g.Ua=function(){return this.h},g.tf=function(){return this.I},g.init=function(){if(this.G.length)if(p.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.kc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(Ep),i=n.next();!i.done;i=n.next()){i=i.value;var u=t;i.j=new Rr,i.s=!0,Ev(i,u)}},function(t){for(var n=m(Ep),i=n.next();!i.done;i=n.next())i=i.value,_v=t=="available",i.l.kc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),_v&&this.l.X(D6),(e=ws)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Rr,this.s=!0,Ev(this,e)):ws=null}else p.__onGCastApiAvailable!==kN&&(Tv=p.__onGCastApiAvailable||null,p.__onGCastApiAvailable=kN)},g.Af=function(e){this.o=e,this.h&&yp(this,{type:"appData",appData:this.o})},g.cast=function(){var e=this;return Oe(function(t){if(!e.m)throw new pt(1,8,8e3);if(!_v)throw new pt(1,8,8001);if(e.h)throw new pt(1,8,8002);return e.j=new Rr,chrome.cast.requestSession(function(n){return Ev(e,n)},function(n){return ON(e,n)}),N(t,e.j,0)})};function M6(e){e.h&&chrome.cast.requestSession(function(t){return Ev(e,t)},function(t){return ON(e,t)})}g.uc=function(){if(this.h){if(k_(this),ws){LN(this);try{ws.stop(function(){},function(){})}catch(e){}ws=null}L_(this)}},g.get=function(e,t){var n=this;if(e=="video"){if(R6.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))}}else if(e=="player"){if(P_[t]&&!this.get("player","isLive")())return function(){};if(N6.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))};if(x6.includes(t))return function(){return n.ii.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))};if(vv[t]||yv[t])return function(){return n.g[e][t]}}return this.g[e][t]},g.set=function(e,t,n){this.g[e][t]=n,yp(this,{type:"set",targetName:e,property:t,value:n})};function Ev(e,t){var n=e.N();ws=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),L_(e),yp(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function ON(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new pt(2,8,n,t))}g.ug=function(e,t){yp(this,{type:"call",targetName:e,methodName:t,args:Qe.apply(2,arguments)})},g.ii=function(e,t){var n=Qe.apply(2,arguments),i=new Rr,u=this.H.toString();this.H++,this.i[u]=i;try{yp(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:u})}catch(c){i.reject(c)}return i};function LN(e){var t=ws;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function L_(e){var t=ws?ws.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};k_(e)}e.h=t,e.I=t?ws.receiver.friendlyName:"",e.l.kc()}function k_(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new pt(1,7,7e3))}}function yp(e,t){t=xN(t);var n=ws;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},ot)}catch(i){throw t=new pt(2,8,8005,i),n=new Wn("error",new Map().set("detail",t)),e.A("player",n),e.uc(),t}}var D6=.02,_v=!1,ws=null,Tv=null,Ep=new Set;function kN(e){if(Tv?p.__onGCastApiAvailable=Tv:delete p.__onGCastApiAvailable,Tv=null,e)for(var t=m(Ep),n=t.next();!n.done;n=t.next())n.value.init();typeof p.__onGCastApiAvailable=="function"&&p.__onGCastApiAvailable(e)}function Ni(e,t,n,i){i=i===void 0?!1:i,Sr.call(this);var u=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=i,this.A=new Map,this.g=new O_(n,function(){return BN(u)},function(){return jN(u)},function(c,d){return GN(u,c,d)},function(){return ZN(u)},function(){return UN(u)},i),P6(this)}z(Ni,Sr),g=Ni.prototype,g.destroy=function(e){return e&&this.g.uc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Sr.prototype.release.call(this),Promise.all(e)},g.Fh=function(){return this.l},g.uh=function(){return this.s},g.Xg=function(){return this.g.m&&_v},g.Ua=function(){return this.g.Ua()},g.tf=function(){return this.g.tf()},g.cast=function(){var e=this;return Oe(function(t){return t.g==1?N(t,e.g.cast(),2):e.h?N(t,e.h.lc(),0):t.return()})},g.Af=function(e){this.g.Af(e)},g.zi=function(){M6(this.g)},g.uc=function(){this.g.uc()},g.Yg=function(e,t){t=t===void 0?!1:t;var n=this;return Oe(function(i){if(i.g==1)return e==n.C&&t==n.B?i.return():(n.C=e,n.B=t,n.g.uc(),N(i,n.g.destroy(),2));n.g=null,n.g=new O_(e,function(){return BN(n)},function(){return jN(n)},function(u,c){return GN(n,u,c)},function(){return ZN(n)},function(){return UN(n)},t),n.g.init(),$(i)})};function P6(e){e.g.init(),e.m=new _t;for(var t=m(MN),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(c){e.g.Ua()||(c=xm(c),e.j.dispatchEvent(c))});for(var i in xc)e.m.D(e.h,xc[i],function(c){e.g.Ua()||e.o.dispatchEvent(c)});e.l={},t={};for(var u in e.i)t.Kc=u,Object.defineProperty(e.l,t.Kc,{configurable:!1,enumerable:!0,get:function(c){return function(){return L6(e,c.Kc)}}(t),set:function(c){return function(d){var h=c.Kc;e.g.Ua()?e.g.set("video",h,d):e.i[h]=d}}(t)}),t={Kc:t.Kc};e.s={},FN(e,function(c){Object.defineProperty(e.s,c,{configurable:!1,enumerable:!0,get:function(){return k6(e,c)}})}),O6(e),e.j=new Sr,e.j.Ud=e.l,e.o=new Sr,e.o.Ud=e.s}function O6(e){var t=new Map;FN(e,function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.A.set(n,i):e.A.set(i,n)):t.set(i,n)})}function FN(e,t){function n(E){return E=="constructor"||typeof i[E]!="function"?!1:!u.has(E)}var i=e.h,u=new Set,c;for(c in i)n(c)&&(u.add(c),t(c,i[c]));for(e=Object.getPrototypeOf(i),c=Object.getPrototypeOf({});e&&e!=c;){for(var d=m(Object.getOwnPropertyNames(e)),h=d.next();!h.done;h=d.next())h=h.value,n(h)&&(u.add(h),t(h,i[h]));e=Object.getPrototypeOf(e)}}function UN(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.ad(),startTime:null};e.i.pause();for(var n=m(D_),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),n=m(DN),i=n.next();!i.done;i=n.next()){var u=i.value;i=u[1],u=e.h[u[0]](),t.player[i]=u}for(n=m(PN),i=n.next();!i.done;i=n.next())u=i.value,i=u[1],u=e.h[u[0]](),t.playerAfterLoad[i]=u;return t}function BN(e){var t=new Wn("caststatuschanged");e.dispatchEvent(t)}function jN(e){var t=new Wn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function ZN(e){for(var t=m(DN),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var u=e.g.get("player","getAssetUri")();i=e.g.get("video","ended"),t=Promise.resolve();var c=e.i.autoplay;n=null,i||(n=e.g.get("video","currentTime"));var d;(i=e.g.get("player","getTextTracks")())&&i.length&&(d=i.find(function(A){return A.active}));var h=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var E={};for(n=m(D_),i=n.next();!i.done;i=n.next())i=i.value,E[i]=e.g.get("video",i);t.then(function(){if(e.i){for(var A=m(D_),k=A.next();!k.done;k=A.next())k=k.value,e.i[k]=E[k];for(A=m(PN),k=A.next();!k.done;k=A.next()){var G=k.value;k=G[1],G=e.g.get("player",G[0])(),e.h[k](G)}e.h.Dg(h),d&&e.h.yf(d.language,d.roles,d.forced),e.i.autoplay=c,u&&e.i.play()}},function(A){A=new Map().set("detail",A),A=new Wn("error",A),e.h.dispatchEvent(A)})}function L6(e,t){if(t=="addEventListener")return function(i,u,c){return e.j.addEventListener(i,u,c)};if(t=="removeEventListener")return function(i,u,c){return e.j.removeEventListener(i,u,c)};if(e.g.Ua()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.Ua()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function k6(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,i,u){return e.o.addEventListener(n,i,u)};if(t=="removeEventListener")return function(n,i,u){return e.o.removeEventListener(n,i,u)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Zb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.$f()};if(t=="setVideoContainer")return function(n){return e.h.Hg(n)};if(e.g.Ua()){if(t=="getManifest"||t=="drmInfo")return function(){return He(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return He(t+"() does not work while casting!"),Promise.resolve()}}return e.g.Ua()&&Object.keys(e.g.g.video).length==0&&(vv[t]||yv[t])||!e.g.Ua()?e.h[t].bind(e.h):e.g.get("player",t)}function GN(e,t,n){e.g.Ua()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}te("shaka.cast.CastProxy",Ni),Ni.prototype.changeReceiverId=Ni.prototype.Yg,Ni.prototype.forceDisconnect=Ni.prototype.uc,Ni.prototype.suggestDisconnect=Ni.prototype.zi,Ni.prototype.setAppData=Ni.prototype.Af,Ni.prototype.cast=Ni.prototype.cast,Ni.prototype.receiverName=Ni.prototype.tf,Ni.prototype.isCasting=Ni.prototype.Ua,Ni.prototype.canCast=Ni.prototype.Xg,Ni.prototype.getPlayer=Ni.prototype.uh,Ni.prototype.getVideo=Ni.prototype.Fh,Ni.prototype.destroy=Ni.prototype.destroy;function vo(e,t,n,i){Sr.call(this);var u=this;this.g=e,this.h=t,this.j=new _t,this.H={video:e,player:t},this.C=n||function(){},this.I=i||function(c){return c},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.G=new pr(function(){F_(u)}),F6(this)}z(vo,Sr),g=vo.prototype,g.isConnected=function(){return this.F},g.Lh=function(){return this.o},g.vi=function(e){this.i=e},g.bh=function(){this.i=null},g.wi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},g.ui=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},g.ti=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},g.destroy=function(){var e=this,t,n;return Oe(function(i){if(i.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.H=null,e.C=null,e.F=!1,e.o=!0,e.l=null,e.s=null,Sr.prototype.release.call(e),N(i,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),$(i)})};function F6(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return qN(e)},t.onSenderDisconnected=function(){return qN(e)},t.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&ol(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),ol(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(u){return j6(e,u)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return B6(e,u)},t.start(),t=m(MN);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(u){return HN(e,"video",u)});for(var i in xc)e.j.D(e.h,xc[i],function(u){return HN(e,"player",u)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,vd(e)}),e.j.D(e.g,"playing",function(){e.o=!1,vd(e)}),e.j.D(e.g,"pause",function(){vd(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,vd(e)}),e.j.D(e.g,"ended",function(){new pr(function(){e.g&&e.g.ended&&(e.o=!0,vd(e))}).X(G6)})}function qN(e){e.m=0,e.A=!0,e.F=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,vd(e)}function vd(e){var t;Oe(function(n){if(n.g==1)return N(n,Promise.resolve(),2);if(!e.h)return n.return();t=new Wn("caststatuschanged"),e.dispatchEvent(t),KN(e)||al(e),$(n)})}function U6(e,t,n){var i,u,c,d,h,E,A,k,G,ne;Oe(function(Y){switch(Y.g){case 1:for(i in t.player)u=t.player[i],e.h[i](u);return e.C(n),c=e.g.autoplay,t.manifest?(e.g.autoplay=!1,fe(Y,5),N(Y,e.h.load(t.manifest,t.startTime),7)):N(Y,Promise.resolve(),3);case 7:he(Y,3);break;case 5:return d=Ie(Y),h=new Map().set("detail",d),E=new Wn("error",h),e.h&&e.h.dispatchEvent(E),Y.return();case 3:if(!e.h)return Y.return();for(A in t.video)k=t.video[A],e.g[A]=k;for(G in t.playerAfterLoad)ne=t.playerAfterLoad[G],e.h[G](ne);e.g.autoplay=c,t.manifest&&(e.g.play(),al(e)),$(Y)}})}function HN(e,t,n){e.h&&(F_(e),ol(e,{type:"event",targetName:t,event:n},e.l))}function F_(e){e.G.X(Z6);for(var t={video:{},player:{}},n=m(C6),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.g[i];if(e.h.R())for(var u in P_)e.m%P_[u]==0&&(t.player[u]=e.h[u]());for(var c in vv)e.m%vv[c]==0&&(t.player[c]=e.h[c]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),ol(e,{type:"update",update:t},e.l);for(var d in yv)e.m%yv[d]==0&&(t={player:{}},t.player[d]=e.h[d](),ol(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),KN(e)}function KN(e){return e.A&&(e.g.duration||e.h.R())?(U_(e),e.A=!1,!0):!1}function U_(e,t){var n={contentId:e.h.ad(),streamType:e.h.R()?"LIVE":"BUFFERED",contentType:""};e.h.R()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),al(e,t===void 0?0:t,n)}function B6(e,t){var n=M_(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,U6(e,n.initState,n.appData),F_(e);break;case"appData":e.C(n.appData);break;case"set":var i=n.targetName,u=n.property;if(n=n.value,i=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){t.setSystemVolumeLevel(n);break}else if(u=="muted"){t.setSystemVolumeMuted(n);break}}e.H[i][u]=n;break;case"call":i=e.H[n.targetName],i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,u=n.methodName,i=="player"&&u=="load"&&(e.m=0,e.B=!1);var c=n.id,d=t.senderId;t=e.H[i],n=t[u].apply(t,n.args),i=="player"&&u=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return VN(e,d,c,null)},function(h){return VN(e,d,c,h)})}}function j6(e,t){var n=M_(t.data);switch(n.type){case"PLAY":e.g.play(),al(e);break;case"PAUSE":e.g.pause(),al(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),i&&i=="PLAYBACK_START"?(e.g.play(),al(e)):i&&i=="PLAYBACK_PAUSE"&&(e.g.pause(),al(e));break;case"STOP":e.h.lc().then(function(){e.h&&al(e)});break;case"GET_STATUS":U_(e,Number(n.requestId));break;case"VOLUME":i=n.volume,t=i.level,i=i.muted;var u=e.g.volume,c=e.g.muted;t!=null&&(e.g.volume=Number(t)),i!=null&&(e.g.muted=i),u==e.g.volume&&c==e.g.muted||al(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,i=n.currentTime,u=e.I(t.contentId),c=n.autoplay||!0,e.C(t.customData),c&&(e.g.autoplay=!0),e.h.load(u,i).then(function(){e.h&&U_(e)}).catch(function(d){var h="LOAD_FAILED";d.category==7&&d.code==7e3&&(h="LOAD_CANCELLED"),ol(e,{requestId:Number(n.requestId),type:h},e.s)});break;default:ol(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function VN(e,t,n,i){e.h&&ol(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function ol(e,t,n,i){e.F&&(e=xN(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function al(e,t,n){n=n===void 0?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?q6:e.h.Xe()?K6:e.g.paused?V6:H6,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),ol(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[i]},e.s)}te("shaka.cast.CastReceiver",vo),vo.prototype.destroy=vo.prototype.destroy,vo.prototype.setContentArtist=vo.prototype.ti,vo.prototype.setContentImage=vo.prototype.ui,vo.prototype.setContentTitle=vo.prototype.wi,vo.prototype.clearContentMetadata=vo.prototype.bh,vo.prototype.setContentMetadata=vo.prototype.vi,vo.prototype.isIdle=vo.prototype.Lh,vo.prototype.isConnected=vo.prototype.isConnected;var Z6=.5,G6=5,q6="IDLE",H6="PLAYING",K6="BUFFERING",V6="PAUSED";function zN(e,t,n,i,u){if(i>=u)return null;for(var c=-1,d=-1,h=0;h<n.length;h++)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){c=h;break}for(h=n.length-1;0<=h;h--)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){d=h;break}if(c===-1||d===-1)return null;for(var E=h=!1,A="white",k="black",G=B_(i,u,h,E,A,k);c<=d;c++){for(var ne=n[c],Y=-1,ve=-1,Pe=0;Pe<ne.length;Pe++)if(ne[Pe]!=null&&ne[Pe].g.trim()!==""){Y=Pe;break}for(Pe=ne.length-1;0<=Pe;Pe--)if(ne[Pe]!=null&&ne[Pe].g.trim()!==""){ve=Pe;break}if(Y===-1||ve===-1)ne=YN(i,u),e.nestedCues.push(ne);else{for(;Y<=ve;Y++)if(Pe=ne[Y]){var xe=Pe.l,Ge=Pe.i,Te=Pe.j,We=Pe.h;(xe!=h||Ge!=E||Te!=A||We!=k)&&(G.payload&&e.nestedCues.push(G),G=B_(i,u,xe,Ge,Te,We),h=xe,E=Ge,A=Te,k=We),G.payload+=Pe.g}else G.payload+=" ";G.payload&&e.nestedCues.push(G),c!==d&&(G=YN(i,u),e.nestedCues.push(G)),G=B_(i,u,h,E,A,k)}}return e.nestedCues.length?{cue:e,stream:t}:null}function B_(e,t,n,i,u,c){return e=new Cn(e,t,""),n&&e.textDecoration.push("underline"),i&&(e.fontStyle="italic"),e.color=u,e.backgroundColor=c,e}function YN(e,t){return e=new Cn(e,t,""),e.lineBreak=!0,e}function WN(e,t,n,i,u){this.g=e,this.l=t,this.i=n,this.h=i,this.j=u}function j_(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",_p(this)}function Sv(e,t,n){var i="CC"+((e.A<<1|e.s)+1),u=new Cn(t,n,"");u.lineInterpretation=1;var c=$6.get(e.g);return c&&(u.line=c),zN(u,i,e.i,t,n)}function _p(e){sl(e,0,15),e.g=1}function yd(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case Tp:i=ex.has(n)?ex.get(n):String.fromCharCode(n);break;case XN:i=z6.get(n);break;case QN:e.i[e.g].pop(),i=Y6.get(n);break;case JN:e.i[e.g].pop(),i=W6.get(n)}i&&e.i[e.g].push(new WN(i,e.m,e.j,e.o,e.l))}}function $N(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map(function(c){return c});else for(var u=0;u<i;u++)e.i[t+u]=e.i[n+u].map(function(c){return c})}function sl(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var Tp=0,XN=1,QN=2,JN=3,ex=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),z6=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57," "],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Y6=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),W6=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),$6=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function wv(e,t){this.h=rx,this.o=new j_(e,t),this.i=new j_(e,t),this.g=this.j=new j_(e,t),this.l=0,this.m=null}function Z_(e,t,n){e.g=e.i;var i=e.g,u=null;return e.h!==Av&&e.h!==Sp&&(u=Sv(i,e.l,n),n=e.i,n.g=0<n.h?n.h:0,sl(n,0,15),n=e.j,n.g=0<n.h?n.h:0,sl(n,0,15),i.g=15),e.h=Av,i.h=t,u}function tx(e){e.h=X6,e.g=e.j,e.g.h=0}function nx(e){Tt("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=Sp}var rx=0,X6=1,Av=3,Sp=4,Q6="black green blue cyan red yellow magenta black".split(" "),ix="white green blue cyan red yellow magenta white_italics".split(" ");function ox(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=t5,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",G_(this)}function G_(e){e.i=[];for(var t=0;16>t;t++)e.i.push(q_())}function q_(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Hc(e,t){ax(e)&&(e.i[e.h][e.g]=new WN(t,e.C,e.A,e.s,e.B),e.g++)}function ax(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}ox.prototype.isVisible=function(){return this.l};function Kc(e,t,n){var i=new Cn(e.j,t,"");i.textAlign=e.F===J6?"left":e.F===e5?"right":kn;var u=i.region;switch(e.I&&(u.id+="svc"+e.I),u.id+="win"+e.N,u.height=e.o,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.H,u.viewportAnchorY=e.L,u.viewportAnchorUnits=e.K?qr:2,e.G){case n5:u.regionAnchorX=0,u.regionAnchorY=0;break;case r5:u.regionAnchorX=50,u.regionAnchorY=0;break;case i5:u.regionAnchorX=100,u.regionAnchorY=0;break;case o5:u.regionAnchorX=0,u.regionAnchorY=50;break;case a5:u.regionAnchorX=50,u.regionAnchorY=50;break;case s5:u.regionAnchorX=100,u.regionAnchorY=50;break;case u5:u.regionAnchorX=0,u.regionAnchorY=100;break;case l5:u.regionAnchorX=50,u.regionAnchorY=100;break;case c5:u.regionAnchorX=100,u.regionAnchorY=100}return(n=zN(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}var J6=0,e5=1,t5=2,n5=0,r5=1,i5=2,o5=3,a5=4,s5=5,u5=6,l5=7,c5=8;function f5(){this.i=[],this.h=null,this.g=0}function d5(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Iv(e.h)),e.h=null,e.g=0))}function Iv(e){this.g=0,this.h=e}Iv.prototype.ka=function(){return this.g<this.h.length},Iv.prototype.wa=function(){return this.g};function oo(e){if(!e.ka())throw new pt(2,2,3e3);return e.h[e.g++]}Iv.prototype.skip=function(e){if(this.g+e>this.h.length)throw new pt(2,2,3e3);this.g+=e};function h5(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function p5(e,t,n,i){if(128<=n&&135>=n)i=n&7,e.h[i]&&(e.g=e.h[i]);else{if(n===136){n=oo(t).value,t=null,n=m(wp(e,n));for(var u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Kc(u,i,e.i)),G_(u);return t}if(n===137)for(t=oo(t).value,t=m(wp(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.l=!0;else{if(n===138){for(n=oo(t).value,t=null,n=m(wp(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Kc(u,i,e.i)),u.l=!1;return t}if(n===139){for(n=oo(t).value,t=null,n=m(wp(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()?t=Kc(u,i,e.i):u.j=i,u.l=!u.l;return t}if(n===140)return t=oo(t).value,sx(e,t,i);if(n===143)return i=sx(e,255,i),ux(e),i;if(n===144)t.skip(1),i=oo(t).value,e.g&&(e.g.A=0<(i&128),e.g.C=0<(i&64));else if(n===145)i=oo(t).value,n=oo(t).value,t.skip(1),e.g&&(t=lx((n&48)>>4,(n&12)>>2,n&3),e.g.B=lx((i&48)>>4,(i&12)>>2,i&3),e.g.s=t);else if(n===146)i=oo(t).value,t=oo(t).value,e.g&&(e=e.g,e.h=i&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),i=oo(t).value,t.skip(1),e.g&&(e.g.F=i&3);else if(152<=n&&159>=n){if(n=(n&15)-8,u=e.h[n]!==null,!u){var c=new ox(n,e.i);c.j=i,e.h[n]=c}i=oo(t).value,c=oo(t).value;var d=oo(t).value,h=oo(t).value,E=oo(t).value;t=oo(t).value,u&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(i&32),t.L=c&127,t.H=d,t.G=(h&240)>>4,t.K=0<(c&128),t.o=(h&15)+1,t.m=(E&63)+1,e.g=e.h[n]}}}return null}function wp(e,t){for(var n=[],i=0;8>i;i++)(t&1)===1&&e.h[i]&&n.push(i),t>>=1;return n}function sx(e,t,n){var i=null;t=m(wp(e,t));for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=e.h[u];c.isVisible()&&(i=Kc(c,n,e.i)),e.h[u]=null}return i}function ux(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function lx(e,t,n){var i={0:0,1:0,2:1,3:1};return e=i[e],t=i[t],n=i[n],g5[e<<2|t<<1|n]}var cx=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),g5="black blue green cyan red magenta yellow white".split(" ");function Ed(){this.h=[],this.g=[],this.i=new f5,this.l=0,this.m=new Map([["CC1",new wv(0,0)],["CC2",new wv(0,1)],["CC3",new wv(1,0)],["CC4",new wv(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,H_(this)}Ed.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,H_(this),e=m(this.j.values());for(var t=e.next();!t.done;t=e.next())ux(t.value)};function H_(e){e.o=0,e.s=0;for(var t=m(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=rx,n.g=n.j,n.m=null,_p(n.i),_p(n.j),_p(n.o);e.B=!0}Ed.prototype.extract=function(e,t){if(this.B){for(var n=m(this.m.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.B=!1}if(e=new Dr(e,0),!(8>e.getLength())&&e.P()===181&&e.ra()===49&&e.M()===1195456820&&e.P()===3&&(n=e.P(),(n&64)!==0))for(n&=31,e.skip(1),i=0;i<n;i++){var u=e.P(),c=(u&4)>>2,d=e.P(),h=e.P();c&&(u&=3,u===0||u===1?this.h.push({pts:t,type:u,cb:d,vb:h,order:this.h.length}):(this.g.push({pts:t,type:u,value:d,order:this.g.length}),this.g.push({pts:t,type:2,value:h,order:this.g.length})))}},Ed.prototype.decode=function(){function e(u,c){return u.pts-c.pts||u.order-c.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),i=n.next();!i.done;i=n.next())(i=m5(this,i.value))&&t.push(i);for(n=m(this.g),i=n.next();!i.done;i=n.next())d5(this.i,i.value);for(n=m(this.i.i),i=n.next();!i.done;i=n.next())i=v5(this,i.value),t.push.apply(t,T(i));return this.i.i=[],this.h=[],this.g=[],t};function m5(e,t){var n=t.type;if((t.cb&112)===16){var i=t.cb>>3&1;n===0?e.o=i:e.s=i}if(i="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(i),t.cb===255&&t.vb===255||!t.cb&&!t.vb||!fx(t.cb)||!fx(t.vb))return 45<=++e.l&&H_(e),null;if(e.l=0,t.cb&=127,t.vb&=127,!t.cb&&!t.vb)return null;if(e.A.add(i),e=null,(t.cb&112)===16)e:{if(i=t.cb,e=t.vb,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,(i&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(i&7)<<1|e>>5&1];var u=(e&30)>>1;i="white";var c=!1;7>u?i=ix[u]:u===7&&(c=!0),e=(e&1)===1,n.h!==Sp&&(u=n.g,n.h===Av&&t!==u.g&&(n=1+t-u.h,$N(u,n,1+u.g-u.h,u.h),sl(u,0,n-1),sl(u,t+1,15-t)),u.g=t,u.m=e,u.j=c,u.l=i,u.o="black")}else if((i&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",yd(n.g,Tp,32),i=!1,t=ix[(e&14)>>1],t==="white_italics"&&(t="white",i=!0),n.g.m=(e&1)===1,n.g.j=i,n.g.l=t;else if((i&247)===16&&(e&240)===32||(i&247)===23&&(e&255)===45)t="black",!(i&7)&&(t=Q6[(e&14)>>1]),n.g.o=t;else if((i&247)===17&&(e&240)===48)yd(n.g,XN,e);else if((i&246)===18&&(e&224)===32)yd(n.g,i&1?JN:QN,e);else if((i&246)===20&&(e&240)===32){switch(e=t.pts,i=null,t.vb){case 32:tx(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:i=Z_(n,2,e);break;case 38:i=Z_(n,3,e);break;case 39:i=Z_(n,4,e);break;case 40:yd(n.g,Tp,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:_p(n.o),nx(n);break;case 43:nx(n);break;case 44:t=n.i,i=null,n.h!==Sp&&(i=Sv(t,n.l,e)),sl(t,0,15);break;case 45:t=n.g,n.h!==Av?i=null:(i=Sv(t,n.l,e),c=t.g-t.h+1,$N(t,c-1,c,t.h),sl(t,0,c-1),sl(t,t.g,15-t.g),n.l=e);break;case 46:sl(n.j,0,15);break;case 47:t=null,n.h!==Sp&&(t=Sv(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,tx(n),n.l=e,i=t}e=i;break e}e=null}else i=t.vb,yd(n.g,Tp,t.cb),yd(n.g,Tp,i);return e}function v5(e,t){var n=[];try{for(;t.ka();){var i=oo(t).value,u=(i&224)>>5,c=i&31;if(u===7&&c!=0&&(u=oo(t).value&63),u!=0){e.A.add("svc"+u),e.j.has(u)||e.j.set(u,new h5(u));for(var d=e.j.get(u),h=t.wa();t.wa()-h<c;){u=t;var E=oo(u),A=E.value,k=E.pts;if(A===16){var G=oo(u);A=A<<16|G.value}if(0<=A&&31>=A){var ne=k;if(d.g){var Y=d.g;switch(u=null,A){case 8:!ax(Y)||0>=Y.g&&0>=Y.h||(0>=Y.g?(Y.g=Y.m-1,Y.h--):Y.g--,Y.i[Y.h][Y.g]=null);break;case 13:if(Y.isVisible()&&(u=Kc(Y,ne,d.i)),Y.h+1>=Y.o){ne=Y;for(var ve=0,Pe=1;16>Pe;Pe++,ve++)ne.i[ve]=ne.i[Pe];for(Pe=0;1>Pe;Pe++,ve++)ne.i[ve]=q_()}else Y.h++;Y.g=0;break;case 14:Y.isVisible()&&(u=Kc(Y,ne,d.i)),Y.i[Y.h]=q_(),Y.g=0;break;case 12:Y.isVisible()&&(u=Kc(Y,ne,d.i)),G_(Y),ne=Y,ne.h=0,ne.g=0}var xe=u}else xe=null}else if(128<=A&&159>=A)xe=p5(d,u,A,k);else{if(4096<=A&&4127>=A)ne=A&255,8<=ne&&15>=ne?u.skip(1):16<=ne&&23>=ne?u.skip(2):24<=ne&&31>=ne&&u.skip(3);else if(4224<=A&&4255>=A)ne=A&255,128<=ne&&135>=ne?u.skip(4):136<=ne&&143>=ne&&u.skip(5);else if(32<=A&&127>=A)u=A,d.g&&(u===127?Hc(d.g,""):Hc(d.g,String.fromCharCode(u)));else if(160<=A&&255>=A)d.g&&Hc(d.g,String.fromCharCode(A));else if(4128<=A&&4223>=A){if(u=A&255,d.g)if(cx.has(u)){var Ge=cx.get(u);Hc(d.g,Ge)}else Hc(d.g,"_")}else 4256<=A&&4351>=A&&d.g&&((A&255)!=160?Hc(d.g,"_"):Hc(d.g,"[CC]"));xe=null}(u=xe)&&n.push(u)}}}}catch(Te){if(Te instanceof pt&&Te.code===3e3)Tt("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Te}return n}function fx(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}Ed.prototype.getStreams=function(){return Array.from(this.A)},te("shaka.cea.CeaDecoder",Ed),xt=function(){return new Ed};function dx(e){for(var t=[],n=e,i=e=0;i<n.length;)e==2&&n[i]==3?(e=0,n=[].concat(T(n)),n.splice(i,1),n=new Uint8Array(n)):n[i]==0?e++:e=0,i++;for(e=n,i=0;i<e.length;){for(n=0;e[i]==255;)n+=255,i++;n+=e[i++];for(var u=0;e[i]==255;)u+=255,i++;u+=e[i++],n==4&&t.push(e.subarray(i,i+u)),i+=u}return t}function bv(){this.j=new Map,this.i=this.h=0,this.g=K_}bv.prototype.init=function(e){function t(c){c=c.name,c in Cv&&(n.g=Cv[c])}var n=this,i=[],u=[];if(new kr().box("moov",yr).box("mvex",yr).O("trex",function(c){var d=c.reader;d.skip(4),d.skip(4),c=d.M(),d=d.M(),n.h=c,n.i=d}).box("trak",yr).O("tkhd",function(c){c=Zt(c.reader,c.version),i.push(c.trackId)}).box("mdia",yr).O("mdhd",function(c){c=It(c.reader,c.version),u.push(c.timescale)}).box("minf",yr).box("stbl",yr).O("stsd",vu).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvav",t).box("dva1",t).box("dvh1",t).box("dvhe",t).box("encv",wi).box("sinf",yr).box("frma",function(c){c=un(c.reader).Ea,c in Cv&&(n.g=Cv[c])}).parse(e,!0),!i.length||!u.length||i.length!=u.length)throw new pt(2,2,2010);this.g==K_&&He("Unable to determine bitstream format for CEA parsing!"),i.forEach(function(c,d){n.j.set(c,u[d])})},bv.prototype.parse=function(e){var t=this;if(this.g==K_)return[];var n=[],i=this.h,u=this.i,c=0,d=[],h=null,E=9e4;return new kr().box("moof",function(A){c=A.start,d=[],yr(A)}).box("traf",yr).O("trun",function(A){A=$t(A.reader,A.version,A.flags),d.push(A)}).O("tfhd",function(A){A=rr(A.reader,A.flags),i=A.Wf||t.h,u=A.fh||t.i,A=A.trackId,t.j.has(A)&&(E=t.j.get(A))}).O("tfdt",function(A){h=ir(A.reader,A.version).baseMediaDecodeTime}).box("mdat",function(A){if(h===null)throw He("Unable to find base media decode time for CEA captions!"),new pt(2,2,2010);y5(t,A.reader,h,E,i,u,c-A.start-8,d,n)}).parse(e,!1),n};function y5(e,t,n,i,u,c,d,h,E){var A=0,k=c,G=h.map(function(ve){return ve.vg});for(G=[].concat.apply([],T(G)),G.length&&(k=G[0].sampleSize||c),t.skip(d+h[0].eh);t.ka();){d=t.M();var ne=t.P(),Y=null;switch(Y=!1,h=1,e.g){case Ap:Y=ne&31,Y=Y==6;break;case Ip:h=2,t.skip(1),Y=ne>>1&63,Y=Y==39||Y==40;break;default:return}if(Y)for(ne=0,A<G.length&&(ne=G[A].he||0),ne=(n+ne)/i,h=m(dx(t.sb(d-h))),Y=h.next();!Y.done;Y=h.next())E.push({packet:Y.value,pts:ne});else try{t.skip(d-h)}catch(ve){break}k-=d+4,k==0&&(n=A<G.length?n+(G[A].wf||u):n+u,A++,A<G.length?k=G[A].sampleSize||c:k=c)}}te("shaka.cea.Mp4CeaParser",bv);var K_=0,Ap=1,Ip=2,Cv={avc1:Ap,avc3:Ap,hev1:Ip,hvc1:Ip,dvav:Ap,dva1:Ap,dvh1:Ip,dvhe:Ip};zt["video/mp4"]=function(){return new bv};function Rv(){this.g=null}Rv.prototype.init=function(){},Rv.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Ke;var t=[];if(e=Qn(e),!Zr(e))return t;e=this.g.parse(e);var n=e.bd(),i=e.Od();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(i),i=n.next();!i.done;i=n.next())if(i=i.value,e.includes(i.type)&&i.time!=null)for(var u=m(dx(i.data)),c=u.next();!c.done;c=u.next())t.push({packet:c.value,pts:i.time});return t},te("shaka.cea.TsCeaParser",Rv),zt["video/mp2t"]=function(){return new Rv};function hx(e,t,n){var i=w5(e),u=null;e=[];var c=[],d=null,h=new Set(i.map(function(A){return A.keyId}));h.delete(null);var E="cenc";if(1<h.size)throw new pt(2,4,4010);if(!t){if(c=i.filter(function(A){return A.Dc=="urn:mpeg:dash:sea:2012"}),1<c.length)throw new pt(2,4,4050);c.length&&(d=I5(c[0])),(c=i.find(function(A){return A.Dc=="urn:mpeg:dash:mp4protection:2011"}))&&c.encryptionScheme&&(E=c.encryptionScheme),c=i.filter(function(A){return A.Dc=="urn:mpeg:dash:mp4protection:2011"?(u=A.init||u,!1):A.Dc!="urn:mpeg:dash:sea:2012"}),c.length&&(e=S5(u,E,c,n,h),e.length==0&&(e=[Fu("",E,u)]))}if(i.length&&!d&&(t||!c.length))for(e=[],t=m(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(Fu(n,E,u));if(h=Array.from(h)[0]||null)for(E=m(e),t=E.next();!t.done;t=E.next())for(t=m(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=h;return{Vf:h,Cj:u,drmInfos:e,xe:d,Zf:!0}}function E5(e,t,n,i){var u=hx(e,n,i);if(t.Zf)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=u.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=u.drmInfos),t.Zf=!1;else if(0<u.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(c){return u.drmInfos.some(function(d){return d.keySystem==c.keySystem})}),t.drmInfos.length==0))throw new pt(2,4,4008);return u.Vf||t.Vf}function _5(e){var t=0,n=tn(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:i,value:c}),e+=u}n=t}return n}function T5(e){e=m(Ra(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=m(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return Ri(n)}return""}function Nv(e){var t=js(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ri(t))?t:(e=js(e.node,"urn:microsoft:playready","pro"),!e||!Ri(e)||(e=Ri(e),e=Ho(e),e=_5(e).filter(function(n){return n.type===b5})[0],!e)?"":(e=Ka(e.value,!0),(e=Bl(e,"WRMHEADER"))?T5(e):""))}function S5(e,t,n,i,u){var c=[];n=m(n);for(var d=n.next();!d.done;d=n.next()){d=d.value;var h=i[d.Dc];if(h){var E;if((E=js(d.node,"urn:microsoft:playready","pro"))&&Ri(E)){E=Ri(E),E=Ho(E);var A=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);E=[{initData:Yf(E,A,new Set,0),initDataType:"cenc",keyId:d.keyId}]}else E=null;if(A=null,d.Dc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(A=u,A.size==0)A=null;else{var k=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),G=new Uint8Array([]);A=[{initData:Yf(G,k,A,1),initDataType:"cenc",keyId:d.keyId}]}E=Fu(h,t,d.init||e||E||A),(h=C5.get(h))&&(E.licenseServerUri=h(d)),c.push(E)}}return c}function w5(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=A5(n.value))&&t.push(n);return t}function A5(e){var t=e.attributes.schemeIdUri,n=Eu(e,"urn:mpeg:cenc:2013","default_KID"),i=$f(e,"urn:mpeg:cenc:2013","pssh").map(yu),u=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new pt(2,4,4009);var c=[];try{c=i.map(function(d){return{initDataType:"cenc",initData:Ho(d),keyId:null}})}catch(d){throw new pt(2,4,4007)}return{node:e,Dc:t,keyId:n,init:0<c.length?c:null,encryptionScheme:u}}function I5(e){if(!p.crypto||!p.crypto.subtle)throw He("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new pt(2,4,4042);var t=js(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new pt(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new pt(2,4,4051);if(t=js(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new pt(2,4,4051);if(e=t.attributes.IV,t=Co(t.attributes.keyUriTemplate),!e||!t)throw new pt(2,4,4051);if(e=hu(e.substr(2)),e.byteLength!=16)throw new pt(2,4,4048);return{Rh:t,iv:e}}var b5=1,C5=new Map().set("com.widevine.alpha",function(e){var t=js(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ri(t))?t:(e=js(e.node,"urn:microsoft","laurl"))&&Co(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Nv).set("com.microsoft.playready.recommendation",Nv).set("com.microsoft.playready.software",Nv).set("com.microsoft.playready.hardware",Nv).set("org.w3.clearkey",function(e){var t=js(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ri(t))?t:(e=js(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Ri(e))?e:""});function xv(e,t,n,i,u,c){var d={RepresentationID:t,Number:n,SubNumber:i,Bandwidth:u,Time:c};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(h,E,A,k){if(h=="$$")return"$";var G=d[E];if(G==null)return h;switch(E=="RepresentationID"&&A&&(A=void 0),E=="Time"&&typeof G!="bigint"&&(.2<=Math.abs(G-Math.round(G))&&He("Calculated $Time$ values must be close to integers"),G=Math.round(G)),k){case void 0:case"d":case"i":case"u":h=G.toString();break;case"o":h=G.toString(8);break;case"x":h=G.toString(16);break;case"X":h=G.toString(16).toUpperCase();break;default:h=G.toString()}return A=p.parseInt(A,10)||1,Array(Math.max(0,A-h.length)+1).join("0")+h})}function px(e,t){var n=Su(e,t,"timescale"),i=1;n&&(i=Zs(n)||1),n=Su(e,t,"duration"),(n=Zs(n||""))&&(n/=i);var u=Su(e,t,"startNumber"),c=Number(Su(e,t,"presentationTimeOffset"))||0,d=No(u||"");(u==null||d==null)&&(d=1);var h=Mv(e,t,"SegmentTimeline");if(t=null,h){t=i,e=e.ha.duration||1/0,u=d,h=Wr(h,"S");for(var E=[],A=-c,k=0;k<h.length;++k){var G=h[k],ne=h[k+1],Y=_r(G,"t",No),ve=_r(G,"d",No),Pe=_r(G,"r",Qu);if(G=_r(G,"k",Qu)||0,Y!=null&&(Y-=c),!ve)break;if(Y=Y!=null?Y:A,Pe=Pe||0,0>Pe)if(ne){if(ne=_r(ne,"t",No),ne==null)break;if(Y>=ne)break;Pe=Math.ceil((ne-Y)/ve)-1}else{if(e==1/0)break;if(Y/t>=e)break;Pe=Math.ceil((e*t-Y)/ve)-1}for(0<E.length&&Y!=A&&(E[E.length-1].end=Y/t),ne=0;ne<=Pe;++ne)A=Y+ve,E.push({start:Y/t,end:A/t,Kf:Y,rb:G,ri:E.length+u}),Y=A}t=E}return{timescale:i,Da:n,rd:d,Bb:c/i||0,Jf:c,timeline:t}}function gx(e,t){return[t(e.J),t(e.ua),t(e.za)].filter(ju)}function Su(e,t,n){t=gx(e,t),e=null,t=m(t);for(var i=t.next();!i.done&&!(e=i.value.attributes[n]);i=t.next());return e}function Mv(e,t,n){t=gx(e,t),e=null,t=m(t);for(var i=t.next();!i.done&&!(e=ca(i.value,n));i=t.next());return e}function R5(e,t,n,i,u,c){for(var d=Eu(e,"http://www.w3.org/1999/xlink","href"),h=Eu(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",E=m(Object.keys(e.attributes)),A=E.next();!A.done;A=E.next()){A=A.value;var k=A.split(":"),G=Oc("http://www.w3.org/1999/xlink");k[0]==G&&delete e.attributes[A]}if(5<=c)return gu(new pt(2,4,4028));if(h!="onLoad")return gu(new pt(2,4,4027));var ne=co([i],[d]);return u.request(0,Li(ne,t)).va(function(Y){if(Y=Qh(Y.data,e.tagName),!Y)return gu(new pt(2,4,4001,d));for(e.children=[];Y.children.length;){var ve=Y.children.shift();ve.tagName&&(ve.parent=e),e.children.push(ve)}ve=m(Object.keys(Y.attributes));for(var Pe=ve.next();!Pe.done;Pe=ve.next())Pe=Pe.value,e.attributes[Pe]=Y.attributes[Pe];return Dv(e,t,n,ne[0],u,c+1)})}function Dv(e,t,n,i,u,c){if(c=c===void 0?0:c,Eu(e,"http://www.w3.org/1999/xlink","href")){var d=R5(e,t,n,i,u,c);return n&&(d=d.va(void 0,function(){return Dv(e,t,n,i,u,c)})),d}d=[];for(var h={},E=m(BE(e)),A=E.next();!A.done;h={pc:h.pc},A=E.next())h.pc=A.value,Eu(h.pc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(k){return function(G){return G!==k.pc}}(h)):h.pc.tagName!="SegmentTimeline"&&d.push(Dv(h.pc,t,n,i,u,c));return Kf(d).va(function(){return e})}function N5(e,t,n,i,u,c,d){var h,E=new kr().O("sidx",function(A){h=x5(t,i,u,c,d,n,A)});if(e&&E.parse(e),h)return h;throw new pt(2,3,3004)}function x5(e,t,n,i,u,c,d){var h=[];d.reader.skip(4);var E=d.reader.M();if(E==0)throw new pt(2,3,3005);if(d.version==0)var A=d.reader.M(),k=d.reader.M();else A=d.reader.Cc(),k=d.reader.Cc();d.reader.skip(2);var G=d.reader.ra();for(e=e+d.size+k,k=0;k<G;k++){var ne=d.reader.M(),Y=(ne&2147483648)>>>31;ne&=2147483647;var ve=d.reader.M();if(d.reader.skip(4),Y==1)throw new pt(2,3,3006);h.push(new Je(A/E+n,(A+ve)/E+n,function(){return c},e,e+ne-1,t,n,i,u)),A+=ve,e+=ne}return d.parser.stop(),h}function Zl(e){this.h=tn(e),this.g=new Dr(this.h,0)}Zl.prototype.ka=function(){return this.g.ka()};function ul(e){var t=mx(e);if(7<t.length)throw new pt(2,3,3002);var n=0;t=m(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=mx(e);e:{i=m(M5);for(var u=i.next();!u.done;u=i.next())if(zi(t,new Uint8Array(u.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.wa();else{if(t.length==8&&t[1]&224)throw new pt(2,3,3001);for(u=i=0;u<t.length;u++){var c=t[u];i=u==0?c&(1<<8-t.length)-1:256*i+c}t=i}return t=e.g.wa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.wa(),i=tn(e.h,e.g.wa(),t),e.g.skip(t),new D5(n,i)}function mx(e){var t=e.g.wa(),n=e.g.P();if(n==0)throw new pt(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Qn(e.h,t,n)}var M5=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function D5(e,t){this.id=e,this.g=t}function V_(e){if(8<e.g.byteLength)throw new pt(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new pt(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var i=e.g.getUint8(n);t=256*t+i}return t}function P5(e,t,n,i,u,c,d,h,E){function A(){return u}var k=[];e=new Zl(e.g);for(var G=null,ne=null;e.ka();){var Y=ul(e);if(Y.id==187){var ve=O5(Y);ve&&(Y=n*ve.Di,ve=t+ve.gi,G!=null&&k.push(new Je(G+d,Y+d,A,ne,ve-1,c,d,h,E)),G=Y,ne=ve)}}return G!=null&&k.push(new Je(G+d,i+d,A,ne,null,c,d,h,E)),k}function O5(e){var t=new Zl(e.g);if(e=ul(t),e.id!=179)throw new pt(2,3,3013);if(e=V_(e),t=ul(t),t.id!=183)throw new pt(2,3,3012);t=new Zl(t.g);for(var n=0;t.ka();){var i=ul(t);if(i.id==241){n=V_(i);break}}return{Di:e,gi:n}}function vx(e,t,n){if(t=Mv(e,t,"Initialization"),!t)return null;var i=e.J.nb(),u=t.attributes.sourceURL;u&&(i=co(i,[Co(u)])),u=0;var c=null;return(t=_r(t,"range",Qf))&&(u=t.start,c=t.end),n=new dt(function(){return i},u,c,Tx(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function L5(e,t,n){var i=Number(Su(e,_d,"presentationTimeOffset"))||0,u=Su(e,_d,"timescale"),c=1;u&&(c=Zs(u)||1);var d=i/c||0,h=vx(e,_d,n);k5(e,h);var E=gm(e);return{vc:function(){var A=Mv(E,_d,"RepresentationIndex"),k=E.J.nb();return A&&(A=Co(A.attributes.sourceURL))&&(k=co(k,[A])),A=Ex(E),yx(E,t,h,k,A.start,A.end,d)}}}function yx(e,t,n,i,u,c,d){var h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue,mt,Rt,Ht,Ut;return Oe(function(Et){if(Et.g==1)return h=e.presentationTimeline,E=!e.Eb||!e.ha.Ye,A=e.ha.start,k=e.ha.duration,G=e.J.mimeType.split("/")[1],ne=t,Y=null,ve=[ne(i,u,c,!1),G=="webm"?ne(n.$(),n.Aa,n.ja,!0):null],ne=null,N(Et,Promise.all(ve),2);if(Pe=Et.h,xe=Pe[0],Ge=Pe[1]||null,Te=null,We=A-d,Ue=A,mt=k?A+k:1/0,G=="mp4")var jt=N5(xe,u,i,n,We,Ue,mt);else{if(jt=new Zl(Ge),ul(jt).id!=440786851)throw new pt(2,3,3008);var ln=ul(jt);if(ln.id!=408125543)throw new pt(2,3,3009);jt=ln.g.byteOffset,ln=new Zl(ln.g);for(var gn=null;ln.ka();){var Ln=ul(ln);if(Ln.id==357149030){gn=Ln;break}}if(!gn)throw new pt(2,3,3010);for(gn=new Zl(gn.g),Ln=1e6,ln=null;gn.ka();){var Mn=ul(gn);if(Mn.id==2807729)Ln=V_(Mn);else if(Mn.id==17545)if(Mn.g.byteLength==4)ln=Mn.g.getFloat32(0);else if(Mn.g.byteLength==8)ln=Mn.g.getFloat64(0);else throw new pt(2,3,3003)}if(ln==null)throw new pt(2,3,3011);if(gn=Ln/1e9,ln*=gn,Ln=ul(new Zl(xe)),Ln.id!=475249515)throw new pt(2,3,3007);jt=P5(Ln,jt,gn,ln,i,n,We,Ue,mt)}for(Te=jt,Rt=m(Te),Ht=Rt.next();!Ht.done;Ht=Rt.next())Ut=Ht.value,Ut.codecs=e.J.codecs,Ut.mimeType=e.J.mimeType;return h.ld(Te),Y=new wr(Te),E&&Y.sc(Ue,mt,!0),Et.return(Y)})}function _d(e){return e.pd}function Ex(e){var t=Mv(e,_d,"RepresentationIndex");return e=Su(e,_d,"indexRange"),e=Qf(e||""),t&&(e=_r(t,"range",Qf,e)),e}function k5(e,t){if(_x(e,t),!Ex(e))throw new pt(2,4,4002)}function _x(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=vr&&n!="mp4"&&n!="webm")throw new pt(2,4,4006);if(n=="webm"&&!t)throw new pt(2,4,4005)}function Tx(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.de,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function F5(e,t,n){var i=vx(e,Sx,n),u=U5(e);if(!u.Da&&!u.timeline&&1<u.yc.length)throw new pt(2,4,4002);if(!u.Da&&!e.ha.duration&&!u.timeline&&u.yc.length==1)throw new pt(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new pt(2,4,4002);var c=null,d=null;e.za.id&&e.J.id&&(d=t[e.za.id+","+e.J.id])&&(c=d.segmentIndex);var h=B5(e.ha.start,e.ha.duration,e.J.nb,u,i,n,e.J.mimeType,e.J.codecs);return t=!c,c?c.kd(h,e.presentationTimeline.qb()):c=new wr(h),e.presentationTimeline.ld(h),e.Eb&&e.ha.Ye||c.sc(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),d&&(d.segmentIndex=c),{vc:function(){return c&&c.getNumReferences()!=0||c.ae(h),Promise.resolve(c)}}}function Sx(e){return e.Jb}function U5(e){var t=j5(e);e=px(e,Sx);var n=e.rd;n==0&&(n=1);var i=0;return e.Da?i=e.Da*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{Da:e.Da,startTime:i,rd:n,Bb:e.Bb,timeline:e.timeline,yc:t}}function B5(e,t,n,i,u,c,d,h){var E=i.yc.length;i.timeline&&i.timeline.length!=i.yc.length&&(E=Math.min(i.timeline.length,i.yc.length));for(var A=e-i.Bb,k=t?e+t:1/0,G=[],ne=i.startTime,Y={},ve=0;ve<E;Y={Sc:Y.Sc,Oc:Y.Oc},ve++){Y.Oc=i.yc[ve];var Pe=ne;ne=void 0,ne=i.Da!=null?Pe+i.Da:i.timeline?i.timeline[ve].end:Pe+t,Y.Sc=null,Pe=new Je(e+Pe,e+ne,function(xe){return function(){return xe.Sc==null&&(xe.Sc=co(n(),[xe.Oc.Xh])),xe.Sc}}(Y),Y.Oc.start,Y.Oc.end,u,A,e,k,[],"",null,null,Bt,c),Pe.codecs=h,Pe.mimeType=d,G.push(Pe)}return G}function j5(e){return[e.J.Jb,e.ua.Jb,e.za.Jb].filter(ju).map(function(t){return Wr(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.ig&&(e.ig=!0);var n=Co(t.attributes.media);return t=_r(t,"mediaRange",Qf,{start:0,end:null}),{Xh:n,start:t.start,end:t.end}})}function Z5(e,t,n,i,u,c,d,h){var E=K5(e,d),A=G5(e);q5(A);var k=gm(e);if(A.hd)return _x(e,E),{vc:function(){var Pe=xv(A.hd,k.J.id,null,null,k.bandwidth||null,null);return Pe=co(k.J.nb(),[Pe]),yx(k,t,E,Pe,0,null,A.Bb)}};if(A.Da)return i||e.ua.contentType==="image"||(e.presentationTimeline.hf(A.Da),e.presentationTimeline.ce(e.ha.start)),{vc:function(){return H5(k,A,u,E,c,d,h)}};var G=null;i=i=null,e.za.id&&e.J.id&&(i=e.za.id+","+e.J.id,i=n[i])&&(G=i.segmentIndex);var ne=e.ha.start,Y=e.ha.duration?ne+e.ha.duration:1/0,ve=!(e.Eb&&e.ha.Ye);return G?(n=G,wx(n,A,ne,Y,ve,E),n.La(e.presentationTimeline.qb())):G=new Ov(A,e.J.id,e.bandwidth,e.J.nb,ne,Y,E,ve,d,e.J.xf),A.timeline&&e.ua.contentType!=="image"&&e.presentationTimeline.qg(A.timeline,ne),i&&e.Eb&&(i.segmentIndex=G),{vc:function(){return G instanceof Ov&&G.getNumReferences()==0&&wx(G,A,ne,Y,ve,E),Promise.resolve(G)}}}function Pv(e){return e.qd}function G5(e){var t=px(e,Pv),n=Su(e,Pv,"media"),i=Su(e,Pv,"index");return{Da:t.Da,timescale:t.timescale,rd:t.rd,Bb:t.Bb,Jf:t.Jf,timeline:t.timeline,zc:n&&Co(n),hd:i,mimeType:e.J.mimeType,codecs:e.J.codecs}}function q5(e){var t=e.hd?1:0;if(t+=e.timeline?1:0,t+=e.Da?1:0,t==0)throw new pt(2,4,4002);if(t!=1&&(e.hd&&(e.timeline=null),e.Da=null),!e.hd&&!e.zc)throw new pt(2,4,4002)}function H5(e,t,n,i,u,c,d){function h(ln){var gn=(ln-Pe)*ve,Ln=gn+t.Bb,Mn=gn+G;gn=Mn+ve;var qn=Math.min(gn,A());return Mn=new Je(Mn,qn,function(){var Yn=Ln*xe;return"BigInt"in p&&Yn>Number.MAX_SAFE_INTEGER&&(Yn=BigInt(Ln)*BigInt(xe)),Yn=xv(Ge,We,ln,null,Te,Yn),co(Ue(),[Yn])},0,null,i,mt,G,A(),[],"",null,null,Bt,c),Mn.codecs=e.J.codecs,Mn.mimeType=e.J.mimeType,Mn.i=gn,Mn}function E(){var ln=[Math.max(k.qb(),G),Math.min(k.Gb(),A())].map(function(gn){return gn-G});return ln=[Math.ceil(ln[0]/ve),Math.ceil(ln[1]/ve)-1],e.J.Qb&&ln[1]++,ln.map(function(gn){return gn+Pe})}function A(){var ln=ne!=null&&u[ne]||Y;return ln?G+ln:1/0}var k=e.presentationTimeline,G=e.ha.start,ne=e.za.id,Y=e.ha.duration,ve=t.Da,Pe=t.rd,xe=t.timescale,Ge=t.zc,Te=e.bandwidth||null,We=e.J.id,Ue=e.J.nb,mt=G-t.Bb,Rt=E();n=e.Eb?Math.max(Rt[0],Rt[1]-n+1):Rt[0],d=d||Rt[1],Rt=[];for(var Ht=n;Ht<=d;++Ht){var Ut=h(Ht);Rt.push(Ut)}var Et=new wr(Rt);if(Rt=k.Gb()<A(),Ht=k.R(),Rt||Ht){var jt=Math.max(n,d+1);Et.ke(ve,function(){var ln=k.qb();Et.La(ln);var gn=m(E());gn.next(),gn=gn.next().value;for(var Ln=[];jt<=gn;){var Mn=h(jt);Ln.push(Mn),jt++}return ln>A()&&!Ln.length?null:Ln})}return Promise.resolve(Et)}function K5(e,t){var n=Su(e,Pv,"initialization");if(!n)return null;n=Co(n);var i=e.J.id,u=e.bandwidth||null,c=e.J.nb;return t=new dt(function(){var d=xv(n,i,null,null,u,null);return co(c(),[d])},0,null,Tx(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function Ov(e,t,n,i,u,c,d,h,E,A){wr.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=i,this.i=u,this.l=c,this.s=d,this.A=E,this.G=A,h&&Ax(this)}z(Ov,wr),g=Ov.prototype,g.getNumReferences=function(){return this.h?this.h.timeline.length:0},g.release=function(){wr.prototype.release.call(this),this.h=null},g.La=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length&&n[i].end+this.i<=e;i+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.j+=t,this.getNumReferences()===0&&this.release())}};function wx(e,t,n,i,u,c){if(V5(e,c),e.h){n=e.h.timeline,e.h.zc=t.zc;var d=n[n.length-1];t=t.timeline.filter(function(h){return h.start>=d.end}),0<t.length&&e.h.timeline.push.apply(e.h.timeline,T(t)),e.l!==i&&(e.l=i)}else e.h=t,e.i=n,e.l=i;u&&Ax(e)}function V5(e,t){if(e.s!==t){e.s=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&ht(n,t)}}function Ax(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.La(e.i)}}g.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var t=this.h.timeline;if(e<this.i||e>=this.l)return null;for(var n=t.length-1,i=0;i<t.length;i++){var u=t[i],c=u.start+this.i;if(u=i<n?t[i+1].start+this.i:this.l===1/0?u.end+this.i:this.l,e>=c&&e<u)return i+this.j}return null},g.get=function(e){var t=this;if(e-=this.j,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var i=this.h.zc,u=this.h.timeline[e],c=u.ri,d=this.h.Jf+u.Kf;n=this.i-this.h.Bb;var h=this.i+u.end,E=h;e===this.getNumReferences()-1&&this.l!==1/0&&(E=this.l);for(var A=this.h.codecs,k=this.h.mimeType,G=[],ne=(u.end-u.start)/u.rb,Y={},ve=0;ve<u.rb;Y={Tc:Y.Tc,se:Y.se},ve++){var Pe=u.start+ne*ve,xe=Pe+ne;Y.se=ve+1,Y.Tc=null,Pe=new Je(this.i+Pe,this.i+xe,function(Ge){return function(){return t.h?(Ge.Tc==null&&(Ge.Tc=Ix(t.h.zc,t.F,c,t.B,d,Ge.se,t.C)),Ge.Tc):[]}}(Y),0,null,this.s,n,this.i,this.l,[],"",null,null,Bt,this.A),Pe.codecs=A,Pe.mimeType=k,this.G==0?0<ve&&Pe.Zd():ve%this.G!=0&&Pe.Zd(),G.push(Pe)}n=new Je(this.i+u.start,E,function(){return 0<u.rb?[]:Ix(i,t.F,c,t.B,d,null,t.C)},0,null,this.s,n,this.i,this.l,G,"",null,null,Bt,this.A,0<u.rb),n.codecs=A,n.mimeType=k,n.i=h,this.g[e]=n}return n};function Ix(e,t,n,i,u,c,d){return e=xv(e,t,n,c,i||null,u),co(d(),[e]).map(function(h){return h.toString()})}function Td(e){this.o=null,this.A=e,this.G=new kl,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}Td.prototype.configure=function(e){this.o=e},Td.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},Td.prototype.setManifestType=function(e){this.s=e};function bp(e,t){var n,i,u,c,d,h,E;return Oe(function(A){if(A.g==1)return n=co(e.i,[z5(e,t)]),i=Li(n,e.o.retryParameters),u=e.A.networkingEngine.request(8,i),mu(e.G,u),fe(A,2),N(A,u.promise,4);if(A.g!=2)return c=A.h,d=Vr(c.data),h=JSON.parse(d),h.VERSION==1&&Y5(e,h,c.uri),he(A,0);if((E=Ie(A))&&E.code==7001)return A.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new pr(function(){bp(e,t)}),e.g.X(e.C),$(A)})}function z5(e,t){if(!e.m.length)return t;t=new si(t);var n=e.B||e.m[0],i=Math.round(e.A.getBandwidthEstimate()),u=t.g;return e.s=="DASH"?(u.add("_DASH_pathway",n),u.add("_DASH_throughput",String(i))):e.s=="HLS"&&(u.add("_HLS_pathway",n),u.add("_HLS_throughput",String(i))),ia(u)&&hr(t,u),t.toString()}function Y5(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var i=t["RELOAD-URI"]||n;e.g=new pr(function(){bp(e,i)}),(n=t.TTL)&&(e.C=n),e.g.X(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function Sd(e,t,n,i){var u=e.l.get(t);u||(u=new Map),u.set(n,i),e.l.set(t,u)}Td.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Cp(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var i=[],u={},c=m(e.m),d=c.next();!d.done;u={Pb:u.Pb},d=c.next())if(u.Pb=d.value,d=t.get(u.Pb))i.push({rf:u.Pb,location:d});else if(d=e.F.find(function(E){return function(A){return A.Vi==E.Pb}}(u))){var h=t.get(d["BASE-ID"]);h&&(d["URI-REPLACEMENT"].Ng?(h=new si(h),_n(h,d["URI-REPLACEMENT"].Ng),i.push({rf:u.Pb,location:h.toString()})):i.push({rf:u.Pb,location:h}))}for(u=Date.now(),c=m(e.j.keys()),d=c.next();!d.done;d=c.next())d=d.value,h=e.j.get(d),u>h&&e.j.delete(d);if(i=i.filter(function(E){for(var A=m(e.j.keys()),k=A.next();!k.done;k=A.next())if(k.value.includes(new si(E.location).wb))return!1;return!0}),i.length&&(e.B=i[0].rf),i=i.map(function(E){return E.location}),!i.length&&e.h)for(u=m(e.h.split(",")),d=u.next();!d.done;d=u.next())(c=t.get(d.value))&&(e.B=e.h,i.push(c));if(!i.length)for(t=m(t.values()),u=t.next();!u.done;u=t.next())i.push(u.value);return n?i:co(e.i,i)}function Vo(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.o=this.m=!1,this.s=new Set}g=Vo.prototype,g.release=function(){for(var e=m(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},g.Eh=function(){return this.j},g.Ve=function(){return this.l.slice()},g.nh=function(){return this.i};function bx(e,t){var n=[],i=[],u=[],c=[];e=m(e);for(var d=e.next();!d.done;d=e.next()){var h=d.value;d=new Map(h.audioStreams.map(function(G){return[$_(G),G]}));var E=new Map(h.videoStreams.map(function(G){return[W_(G),G]})),A=new Map(h.textStreams.map(function(G){return[Mp(G),G]}));if(h=new Map(h.imageStreams.map(function(G){return[Dp(G),G]})),t){var k=Dx(vr);A.set(Mp(k),k),k=Dx("image"),h.set(Dp(k),k)}n.push(d),i.push(E),u.push(A),c.push(h)}return{Pf:n,Lg:i,Ig:u,hg:c}}g.Sf=function(e,t){var n=this,i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue,mt,Rt,Ht,Ut,Et,jt,ln,gn,Ln,Mn,qn;return Oe(function(Yn){if(Yn.g==1){if(i=yi,!t&&e.length==1)return u=bx(e,!1),c=u.Pf,d=u.Lg,h=u.Ig,E=u.hg,n.h=Array.from(c[0].values()),n.g=Array.from(d[0].values()),n.l=Array.from(h[0].values()),n.i=Array.from(E[0].values()),Yn.u(2);for(A=-1,k=0;k<e.length;k++)G=e[k],n.s.has(G.id)||(n.s.add(G.id),A==-1&&(A=k));return A==-1?Yn.return():(ne=bx(e,!0),Y=ne.Pf,ve=ne.Lg,Pe=ne.Ig,xe=ne.hg,N(Yn,Promise.all([Gl(n,n.h,Y,A,Rp,wd),Gl(n,n.g,ve,A,Rp,wd),Gl(n,n.l,Pe,A,Rp,wd),Gl(n,n.i,xe,A,Rp,wd)]),2))}if(Ge=0,Te=[],n.g.length&&n.h.length)for(Ut=m(n.h),Et=Ut.next();!Et.done;Et=Ut.next())for(jt=Et.value,ln=m(n.g),gn=ln.next();!gn.done;gn=ln.next())Ln=gn.value,Mn=ce(jt.drmInfos,Ln.drmInfos),jt.drmInfos.length&&Ln.drmInfos.length&&!Mn.length||(qn=Ge++,Te.push({id:qn,language:jt.language,disabledUntilTime:0,primary:jt.primary,audio:jt,video:Ln,bandwidth:(jt.bandwidth||0)+(Ln.bandwidth||0),drmInfos:Mn,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(We=n.g.length?n.g:n.h,Ue=m(We),mt=Ue.next();!mt.done;mt=Ue.next())Rt=mt.value,Ht=Ge++,Te.push({id:Ht,language:Rt.language,disabledUntilTime:0,primary:Rt.primary,audio:Rt.type==i.S?Rt:null,video:Rt.type==i.fa?Rt:null,bandwidth:Rt.bandwidth||0,drmInfos:Rt.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});n.j=Te,$(Yn)})};function Cx(e){var t,n,i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue,mt,Rt,Ht,Ut,Et,jt,ln,gn,Ln,Mn;return Oe(function(qn){switch(qn.g){case 1:if(t=yi,e.length==1)return qn.return(e[0]);for(n=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.S}).map(function(Kn){return[$_(Kn),Kn]}))}),i=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.fa}).map(function(Kn){return[W_(Kn),Kn]}))}),u=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ma}).map(function(Kn){return[Mp(Kn),Kn]}))}),c=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ue}).map(function(Kn){return[Dp(Kn),Kn]}))}),d=m(u),h=d.next();!h.done;h=d.next())E=h.value,A=Mx(t.ma),E.set(Mp(A),A);for(k=m(c),G=k.next();!G.done;G=k.next())ne=G.value,Y=Mx(t.ue),ne.set(Dp(Y),Y);return ve=new Vo,N(qn,Gl(ve,[],n,0,Lv,kv),2);case 2:return Pe=qn.h,N(qn,Gl(ve,[],i,0,Lv,kv),3);case 3:return xe=qn.h,N(qn,Gl(ve,[],u,0,Lv,kv),4);case 4:return Ge=qn.h,N(qn,Gl(ve,[],c,0,Lv,kv),5);case 5:if(Te=qn.h,We=0,xe.length&&Pe.length)for(Ut=m(Pe),Et=Ut.next();!Et.done;Et=Ut.next())for(jt=Et.value,ln=m(xe),gn=ln.next();!gn.done;gn=ln.next())Ln=gn.value,Mn=We++,Ln.variantIds.push(Mn),jt.variantIds.push(Mn);else for(Ue=xe.concat(Pe),mt=m(Ue),Rt=mt.next();!Rt.done;Rt=mt.next())Ht=Rt.value,Ht.variantIds=[We++];return qn.return(xe.concat(Pe).concat(Ge).concat(Te))}})}function Gl(e,t,n,i,u,c){var d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue,mt,Rt,Ht;return Oe(function(Ut){switch(Ut.g){case 1:for(d=[],h=0;h<i;h++)d.push(new Set);for(E=i;E<n.length;E++)d.push(new Set(n[E].values()));A=m(t),k=A.next();case 2:if(k.done){Ut.u(4);break}return G=k.value,N(Ut,W5(e,G,n,i,c,d),5);case 5:if(ne=Ut.h,!ne)throw new pt(2,4,4037);k=A.next(),Ut.u(2);break;case 4:for(Y=m(d),ve=Y.next();!ve.done;ve=Y.next())for(Pe=ve.value,xe=m(Pe),Ge=xe.next();!Ge.done;Ge=xe.next())Te=Ge.value,(We=$5(e,Te,n,u,c,d))&&t.push(We);for(Ue=m(d),ve=Ue.next();!ve.done;ve=Ue.next())for(mt=ve.value,Rt={},Ht=m(mt),Ge=Ht.next();!Ge.done;Rt={Bd:Rt.Bd},Ge=Ht.next())if(Rt.Bd=Ge.value,!Y_(Rt.Bd)&&t.some(function(Et){return function(jt){return z_(e,Et.Bd,jt)}}(Rt)))throw new pt(2,4,4037);return Ut.return(t)}})}function W5(e,t,n,i,u,c){return Oe(function(d){return d.g==1?(xx(e,n,t),t.matchedStreams?t.segmentIndex?N(d,Rx(t,i),2):d.u(2):d.return(!1)):(Nx(t,i,u,c),d.return(!0))})}function Rx(e,t){var n,i,u,c,d,h,E;return Oe(function(A){if(A.g==1){for(n=[],i=e.matchedStreams,u=m(i),c=u.next();!c.done;c=u.next())d=c.value,n.push(d.createSegmentIndex()),d.trickModeVideo&&!d.trickModeVideo.segmentIndex&&n.push(d.trickModeVideo.createSegmentIndex());return N(A,Promise.all(n),2)}if(e.segmentIndex instanceof Ei)for(h=t;h<i.length;h++)E=i[h],E.segmentIndex&&e.segmentIndex.h.push(E.segmentIndex);$(A)})}function $5(e,t,n,i,u,c){if(Y_(t))return null;var d=i(t);return xx(e,n,d),d.createSegmentIndex&&(d.createSegmentIndex=function(){return Oe(function(h){return d.segmentIndex?h.u(0):(d.segmentIndex=new Ei,N(h,Rx(d,0),0))})}),!d.matchedStreams||!d.matchedStreams.length?null:(Nx(d,0,u,c),d)}function Nx(e,t,n,i){for(var u=e.matchedStreams;t<u.length;t++){var c=u[t];n(e,c);var d=!0;if(e.type=="audio"&&qu(e.language,c.language)==0&&(d=!1),d&&(i[t].delete(c),c.fullMimeTypes))for(c=m(c.fullMimeTypes.values()),d=c.next();!d.done;d=c.next())e.fullMimeTypes.add(d.value)}}function Rp(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=m(t.matchedStreams),i=n.next();!i.done;i=n.next())i=i.value,i.segmentIndex&&(i.segmentIndex.release(),i.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Lv(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function wd(e,t){function n(d,h){d||(d=[]),h=m(h);for(var E=h.next();!E.done;E=h.next())E=E.value,d.includes(E)||d.push(E);return d}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var i=m(t.keyIds),u=i.next();!u.done;u=i.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),i=ce(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new pt(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=m(t.closedCaptions),u=i.next();!u.done;u=i.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.closedCaptions.set(u,c)}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Rp(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),wd(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&wd(e.trickModeVideo,t)}function kv(e,t){var n=e.roles;n||(n=[]);for(var i=m(t.roles),u=i.next();!u.done;u=i.next())u=u.value,n.includes(u)||n.push(u);for(e.roles=n,n=m(t.keyIds),i=n.next();!i.done;i=n.next())e.keyIds.add(i.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,T(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())i=m(n.value),n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}function xx(e,t,n){var i=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){if(u=X5(e,u.value,n),!u)return;i.push(u)}n.matchedStreams=i}function X5(e,t,n){var i={audio:$_,video:W_,text:Mp,image:Dp}[n.type],u=null,c=i(n);if(t.has(c))u=t.get(c);else{c={audio:function(A,k){return z_(e,A,k)},video:function(A,k){return z_(e,A,k)},text:Q5,image:J5}[n.type];for(var d={audio:ej,video:tj,text:nj,image:rj}[n.type],h=m(t.values()),E=h.next();!E.done;E=h.next())E=E.value,!c(n,E)||n.fastSwitching!=E.fastSwitching||u&&!d(n,u,E)||(u=E)}return e.o&&!Y_(u)&&t.delete(i(u)),u}function Np(e,t){function n(i){if(!X_.has(i)){var u=ba(i);X_.set(i,u)}return X_.get(i)}return e.mimeType!=t.mimeType?!1:n(e.codecs)==n(t.codecs)}g.yg=function(e){this.m=e},g.Fg=function(e){this.o=e};function z_(e,t,n){return!(!Np(t,n)&&!e.m||t.drmInfos&&!re(t.drmInfos,n.drmInfos))}function Q5(e,t){return t.language?!(e.forced!==t.forced||qu(e.language,t.language)==0||t.kind!=e.kind):!0}function J5(){return!0}function ej(e,t,n){var i=Np(e,t),u=Np(e,n);if(i&&!u)return!1;if(!i&&u||(i=qu(e.language,t.language),u=qu(e.language,n.language),u>i))return!0;if(u<i)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}return e.roles.length?(i=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>i.length?!0:u.length<i.length?!1:n.roles.length<t.roles.length):!n.roles.length&&t.roles.length?!0:n.roles.length&&!t.roles.length?!1:!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(i=xp(e.channelsCount,t.channelsCount,n.channelsCount),i==Ys?!0:i==ll?!1:(i=xp(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),i==Ys?!0:i==ll?!1:!!(e.bandwidth&&Px(e.bandwidth,t.bandwidth,n.bandwidth)==Ys)))}function tj(e,t,n){var i=Np(e,t),u=Np(e,n);if(i&&!u)return!1;if(!i&&u||(i=xp(e.width*e.height,t.width*t.height,n.width*n.height),i==Ys))return!0;if(i==ll)return!1;if(e.frameRate){if(i=xp(e.frameRate,t.frameRate,n.frameRate),i==Ys)return!0;if(i==ll)return!1}return!!(e.bandwidth&&Px(e.bandwidth,t.bandwidth,n.bandwidth)==Ys)}function nj(e,t,n){var i=qu(e.language,t.language),u=qu(e.language,n.language);if(u>i)return!0;if(u<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>i.length)return!0;if(u.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function rj(e,t,n){return xp(e.width*e.height,t.width*t.height,n.width*n.height)==Ys}function Mx(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Dx(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function xp(e,t,n){if(t==e&&e!=n)return ll;if(n==e&&e!=t)return Ys;if(t>e){if(n<=e||n-e<t-e)return Ys;if(n-e>t-e)return ll}else{if(n>e)return ll;if(e-n<e-t)return Ys;if(e-n>e-t)return ll}return Ox}function Px(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Ys:t<e?ll:Ox}function Y_(e){switch(e.type){case vr:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function W_(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function $_(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Mp(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Dp(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}te("shaka.util.PeriodCombiner",Vo),Vo.prototype.setUseStreamOnce=Vo.prototype.Fg,Vo.prototype.setAllowMultiTypeVariants=Vo.prototype.yg,Vo.prototype.combinePeriods=Vo.prototype.Sf,Vo.prototype.getImageStreams=Vo.prototype.nh,Vo.prototype.getTextStreams=Vo.prototype.Ve,Vo.prototype.getVariants=Vo.prototype.Eh;var Ys=1,Ox=0,ll=-1,X_=new Map;function ij(e,t){var n=new DOMParser,i=oj.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch(u){return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function Lx(e,t){try{var n=Va(e);return ij(n,t)}catch(i){return null}}var oj=new oa(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Fv(){var e=this;this.i=this.g=null,this.o=[],this.j=null,this.I=1,this.m={},this.L={},this.l=new Vo,this.G=0,this.H=new M(5),this.A=new pr(function(){dj(e)}),this.F=new kl,this.B=null,this.K=[],this.C=1/0,this.s=!1,this.h=null}g=Fv.prototype,g.configure=function(e){var t=this.i&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.j&&this.j.presentationTimeline.R()&&this.A.kc(),this.h&&this.h.configure(this.g),this.l&&(this.l.yg(this.g.dash.multiTypeVariantsAllowed&&Un()),this.l.Fg(this.g.dash.useStreamOnceInPeriodFlattening))},g.start=function(e,t){var n=this,i;return Oe(function(u){if(u.g==1)return n.s=t.isLowLatencyMode(),n.o=[e],n.i=t,N(u,Q_(n),2);if(i=u.h,n.i&&J_(n,i),!n.i)throw new pt(2,7,7001);return u.return(n.j)})},g.stop=function(){for(var e=m(Object.values(this.m)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.l&&this.l.release(),this.g=this.i=null,this.o=[],this.j=null,this.m={},this.l=null,this.A!=null&&(this.A.stop(),this.A=null),this.h&&this.h.destroy(),this.F.destroy()},g.update=function(){var e=this,t;return Oe(function(n){if(n.g==1)return fe(n,2),N(n,Q_(e),4);if(n.g!=2)return he(n,0);if(t=Ie(n),!e.i||!t)return n.return();e.i.onError(t),$(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(e){if(this.j&&this.j.presentationTimeline.R()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.j.presentationTimeline.Gb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.G=t.endTime-e,J_(this,0))}}},g.banLocation=function(e){this.h&&this.h.banLocation(e)};function Q_(e){var t,n,i,u,c,d,h;return Oe(function(E){return E.g==1?(t=e.o,1<e.o.length&&e.h&&(n=Cp(e.h,"Location",!0),n.length&&(t=n)),i=Li(t,e.g.retryParameters),u=Date.now(),N(E,t1(e,i,0,{type:4}),2)):E.g!=3?(c=E.h,e.i?(c.uri&&c.uri!=c.originalUri&&!e.o.includes(c.uri)&&e.o.unshift(c.uri),N(E,aj(e,c.data,c.uri),3)):E.return(0)):(d=Date.now(),h=(d-u)/1e3,e.H.sample(1,h),E.return(h))})}function aj(e,t,n){var i,u,c,d,h,E,A,k,G,ne;return Oe(function(Y){if(Y.g==1){if(i=t,u=e.g.dash.manifestPreprocessor,c=Jm,u!=c){if(dr("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),d=Lx(i,"MPD"),!d)throw new pt(2,4,4001,n);u(d),i=za(d.outerHTML)}if(h=Qh(i,"MPD"),!h)throw new pt(2,4,4001,n);return E=e.g.dash.manifestPreprocessorTXml,A=ev,E!=A&&E(h),e.g.dash.disableXlinkProcessing?Y.return(kx(e,h,n)):(k=e.g.dash.xlinkFailGracefully,G=Dv(h,e.g.retryParameters,k,n,e.i.networkingEngine),mu(e.F,G),N(Y,G.promise,2))}return ne=Y.h,Y.return(kx(e,ne,n))})}function kx(e,t,n){var i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue,mt,Rt,Ht,Ut,Et,jt,ln,gn,Ln,Mn,qn,Yn,Kn,xr,fi,ki,ci,gi,Gr,fo,Uo,ai,$s,$c,Xc,Dd,cl,Xs,fl,zl,Pd,Od,Ey,Ld,Yp,_y;return Oe(function(As){switch(As.g){case 1:for(e.h&&e.h.l.clear(),i=[n],u=[],c=new Map,d=Wr(t,"Location"),h=m(d),E=h.next();!E.done;E=h.next())A=E.value,k=A.attributes.serviceLocation,(G=yu(A))&&(ne=co(i,[G])[0],k&&(e.h?Sd(e.h,"Location",k,ne):c.set(k,ne)),u.push(ne));if(e.h?(Y=Cp(e.h,"Location",!0),0<Y.length&&(i=e.o=Y)):u.length&&(i=e.o=u),ve=Promise.resolve(),(Pe=ca(t,"ContentSteering"))&&e.i)for(xe=Pe.attributes.defaultServiceLocation,e.h?(e.h.i=i,e.h.h=xe):(e.h=new Td(e.i),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=i,e.h.h=xe,(Ge=yu(Pe))&&(_r(Pe,"queryBeforeStart",Jh,!1)?ve=bp(e.h,Ge):bp(e.h,Ge))),Te=m(c.keys()),We=Te.next();!We.done;We=Te.next())Ue=We.value,mt=c.get(Ue),Sd(e.h,"Location",Ue,mt);if(Rt=Wr(t,"BaseURL"),Ut=!1,e.h)for(Et=m(Rt),jt=Et.next();!jt.done;jt=Et.next())ln=jt.value,gn=ln.attributes.serviceLocation,Ln=yu(ln),gn&&Ln&&(Sd(e.h,"BaseURL",gn,Ln),Ut=!0);if(Ut&&e.h||(Mn=Rt.map(yu),Ht=co(i,Mn)),qn=function(){return e.h&&Ut?Cp(e.h,"BaseURL"):Ht||[]},Yn=0,Rt&&Rt.length&&(Yn=_r(Rt[0],"availabilityTimeOffset",Lc)||0),Kn=e.g.dash.ignoreMinBufferTime,xr=0,Kn||(xr=_r(t,"minBufferTime",Xa)||0),e.G=_r(t,"minimumUpdatePeriod",Xa,-1),fi=_r(t,"availabilityStartTime",Xf),ki=_r(t,"timeShiftBufferDepth",Xa),ci=e.g.dash.ignoreSuggestedPresentationDelay,gi=null,ci||(gi=_r(t,"suggestedPresentationDelay",Xa)),Gr=e.g.dash.ignoreMaxSegmentDuration,fo=null,Gr||(fo=_r(t,"maxSegmentDuration",Xa)),Uo=t.attributes.type||"static",e.j)for(ai=e.j.presentationTimeline,$s=m(Object.values(e.m)),$c=$s.next();!$c.done;$c=$s.next())Xc=$c.value,Xc.segmentIndex&&Xc.segmentIndex.La(ai.qb());else Dd=e.g.defaultPresentationDelay||1.5*xr,cl=gi!=null?gi:Dd,ai=new tr(fi,cl,e.g.dash.autoCorrectDrift);return ai.Ec(Uo=="static"),ai.R()&&!isNaN(e.g.availabilityWindowOverride)&&(ki=e.g.availabilityWindowOverride),ki==null&&(ki=1/0),ai.je(ki),Xs=t.attributes.profiles||"",fl={Eb:Uo!="static",presentationTimeline:ai,za:null,ha:null,ua:null,J:null,bandwidth:0,ig:!1,Qb:Yn,profiles:Xs.split(",")},zl=uj(e,fl,qn,t),Pd=zl.duration,Od=zl.periods,Uo!="static"&&zl.Xf||ai.Za(Pd||1/0),e.C&&!e.s&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.s=e.i.isLowLatencyMode()),e.s?ai.zg(e.C):e.C&&He("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),ai.hf(fo||1),N(As,e.l.Sf(Od,fl.Eb),2);case 2:return N(As,ve,3);case 3:if(e.s&&(xr=0,Ey=gi!=null?gi:e.g.defaultPresentationDelay,ai.Bf(Ey)),e.j){e.j.variants=e.l.j,Ld=e.l.Ve(),0<Ld.length&&(e.j.textStreams=Ld),e.j.imageStreams=e.l.i,e.i.filter(e.j),As.u(4);break}if(e.j={presentationTimeline:ai,variants:e.l.j,textStreams:e.l.Ve(),imageStreams:e.l.i,offlineSessionIds:[],minBufferTime:xr||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:sj(t)},!ai.Kg()){As.u(5);break}return Yp=Wr(t,"UTCTiming"),N(As,mj(e,qn,Yp),6);case 6:if(_y=As.h,!e.i)return As.return();ai.Ag(_y);case 5:ai.Xd();case 4:e.i.makeTextStreamsForClosedCaptions(e.j),$(As)}})}function sj(e){var t=ca(e,"ServiceDescription");return t?(e=ca(t,"Latency"),t=ca(t,"PlaybackRate"),e&&e.attributes.max||t?{maxLatency:e&&e.attributes.max?parseInt(e.attributes.max,10)/1e3:null,maxPlaybackRate:t?parseFloat(t.attributes.max):null,minLatency:e&&e.attributes.min?parseInt(e.attributes.min,10)/1e3:null,minPlaybackRate:t?parseFloat(t.attributes.min):null}:null):null}function uj(e,t,n,i){var u=_r(i,"mediaPresentationDuration",Xa),c=[],d=0;i=Wr(i,"Period");for(var h=0;h<i.length;h++){var E=i[h],A=i[h+1],k=_r(E,"start",Xa,d),G=E.attributes.id,ne=_r(E,"duration",Xa),Y=null;if(A){var ve=_r(A,"start",Xa);ve!=null&&(Y=ve-k)}else u!=null&&(Y=u-k);if(Y==null&&(Y=ne),!(e.B!==null&&G!==null&&k!==null&&k<e.B)||e.K.includes(G)||h+1==i.length){if(k!==null&&(e.B===null||k>e.B)&&(e.B=k),d=lj(e,t,n,{start:k,duration:Y,node:E,Ye:Y==null||!A}),c.push(d),t.za.id&&Y&&(e.L[t.za.id]=Y),Y==null){d=null;break}d=k+Y}}return e.K=c.map(function(Pe){return Pe.id}),u!=null?{periods:c,duration:u,Xf:!1}:{periods:c,duration:d,Xf:!0}}function lj(e,t,n,i){t.za=e1(e,i.node,null,n),t.ha=i,t.za.Qb=t.Qb,t.za.id||(t.za.id="__shaka_period_"+i.start);var u=Wr(i.node,"EventStream");n=t.presentationTimeline.qb(),u=m(u);for(var c=u.next();!c.done;c=u.next())vj(e,i.start,i.duration,c.value,n);if(n=Wr(i.node,"AdaptationSet").map(function(k){return cj(e,t,k)}).filter(ju),t.Eb){for(i=[],u=m(n),c=u.next();!c.done;c=u.next()){c=m(c.value.ki);for(var d=c.next();!d.done;d=c.next())i.push(d.value)}if(i.length!=new Set(i).size)throw new pt(2,4,4018)}for(i=n.filter(function(k){return!k.If}),n=n.filter(function(k){return k.If}),n=m(n),u=n.next();!u.done;u=n.next()){u=u.value,c=u.If.split(" "),d=m(i);for(var h=d.next();!h.done;h=d.next()){var E=h.value;if(c.includes(E.id)){h={},E=m(E.streams);for(var A=E.next();!A.done;h={Cd:h.Cd},A=E.next())h.Cd=A.value,h.Cd.trickModeVideo=u.streams.find(function(k){return function(G){return ba(k.Cd.codecs)==ba(G.codecs)}}(h))}}}if(n=Uv(e.g.disableAudio,i,"audio"),u=Uv(e.g.disableVideo,i,"video"),c=Uv(e.g.disableText,i,vr),i=Uv(e.g.disableThumbnails,i,"image"),u.length===0&&n.length===0)throw new pt(2,4,4004);return{id:t.za.id,audioStreams:n,videoStreams:u,textStreams:c,imageStreams:i}}function Uv(e,t,n){return e||!t.length?[]:t.reduce(function(i,u){return u.contentType!=n||i.push.apply(i,T(u.streams)),i},[])}function cj(e,t,n){function i(Et){switch(Et){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ua=e1(e,n,t.za,null);var u=!1,c=Wr(n,"Role"),d=c.map(function(Et){return Et.attributes.value}).filter(ju),h=void 0,E=t.ua.contentType==vr;E&&(h="subtitle"),c=m(c);for(var A=c.next();!A.done;A=c.next()){A=A.value;var k=A.attributes.schemeIdUri;if(k==null||k=="urn:mpeg:dash:role:2011")switch(A=A.attributes.value,A){case"main":u=!0;break;case"caption":case"subtitle":h=A}}var G;k=Wr(n,"EssentialProperty"),c=null;var ne=!1;A=!1,k=m(k);for(var Y=k.next();!Y.done;Y=k.next()){Y=Y.value;var ve=Y.attributes.schemeIdUri;ve=="http://dashif.org/guidelines/trickmode"?c=Y.attributes.value:ve=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?G=i(parseInt(Y.attributes.value,10)):ve!="urn:mpeg:mpegB:cicp:ColourPrimaries"&&ve!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(ve=="urn:mpeg:dash:ssr:2023"?ne=!0:A=!0)}var Pe=null;for(k=Wr(n,"SupplementalProperty"),k=m(k),Y=k.next();!Y.done;Y=k.next())Y=Y.value,ve=Y.attributes.schemeIdUri,ve=="http://dashif.org/guidelines/last-segment-number"?Pe=parseInt(Y.attributes.value,10)-1:ve=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(G=i(parseInt(Y.attributes.value,10)));k=Wr(n,"Accessibility");var xe=new Map,Ge;for(k=m(k),Y=k.next();!Y.done;Y=k.next())if(ve=Y.value,Y=ve.attributes.schemeIdUri,ve=ve.attributes.value,Y=="urn:scte:dash:cc:cea-608:2015")if(Y=1,ve!=null){ve=ve.split(";");for(var Te=m(ve),We=Te.next();!We.done;We=Te.next()){var Ue=We.value,mt=We=void 0;Ue.includes("=")?(Ue=Ue.split("="),We=Ue[0].startsWith("CC")?Ue[0]:"CC"+Ue[0],mt=Ue[1]||"und"):(We="CC"+Y,ve.length==2?Y+=2:Y++,mt=Ue),xe.set(We,Cr(mt))}}else xe.set("CC1","und");else if(Y=="urn:scte:dash:cc:cea-708:2015")if(Y=1,ve!=null)for(ve=m(ve.split(";")),We=ve.next();!We.done;We=ve.next())We=We.value,Ue=Te=void 0,We.includes("=")?(We=We.split("="),Te="svc"+We[0],Ue=We[1].split(",")[0].split(":").pop()):(Te="svc"+Y,Y++,Ue=We),xe.set(Te,Cr(Ue));else xe.set("svc1","und");else Y=="urn:mpeg:dash:role:2011"?ve!=null&&(d.push(ve),ve=="captions"&&(h="caption")):Y=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(ve=="1"?Ge="visually impaired":ve=="2"&&(Ge="hard of hearing"));if(A)return null;A=Wr(n,"ContentProtection");var Rt=hx(A,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),Ht=Cr(t.ua.language||"und"),Ut=n.attributes.label;if((A=Wr(n,"Label"))&&A.length&&(A=Ri(A[0]))&&(Ut=A),A=Wr(n,"Representation"),n=A.map(function(Et){return(Et=fj(e,t,Rt,h,Ht,Ut,u,d,xe,Et,Ge,Pe))&&(Et.hdr=Et.hdr||G,Et.fastSwitching=ne),Et}).filter(function(Et){return!!Et}),n.length==0){if(c=t.ua.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||E||c)return null;throw new pt(2,4,4003)}if(!t.ua.contentType||t.ua.contentType=="application")for(t.ua.contentType=Ux(n[0].mimeType,n[0].codecs),E=m(n),Y=E.next();!Y.done;Y=E.next())Y.value.type=t.ua.contentType;for(E=t.ua.id||"__fake__"+e.I++,k=m(n),Y=k.next();!Y.done;Y=k.next()){for(Y=Y.value,ve=m(Rt.drmInfos),Te=ve.next();!Te.done;Te=ve.next())Te=Te.value,Te.keyIds=Te.keyIds&&Y.keyIds?new Set([].concat(T(Te.keyIds),T(Y.keyIds))):Te.keyIds||Y.keyIds;e.g.dash.enableAudioGroups&&(Y.groupId=E)}return A=A.map(function(Et){return Et.attributes.id}).filter(ju),{id:E,contentType:t.ua.contentType,language:Ht,Dj:u,streams:n,drmInfos:Rt.drmInfos,If:c,ki:A}}function fj(e,t,n,i,u,c,d,h,E,A,k,G){if(t.J=e1(e,A,t.ua,null),e.C=Math.min(e.C,t.J.Qb),!gj(t.J))return null;var ne=t.ha.start;t.bandwidth=_r(A,"bandwidth",Zs)||0;var Y=t.J.contentType,ve=Y==vr||Y=="application";Y=Y=="image";try{var Pe=void 0;if(n.xe){var xe=t.J.nb,Ge=co(xe(),[n.xe.Rh]),Te=Li(Ge,e.g.retryParameters);Pe={bitsKey:128,blockCipherMode:"CBC",iv:n.xe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var Et,jt,ln;return Oe(function(gn){if(gn.g==1)return N(gn,t1(e,Te,6),2);if(gn.g!=3){if(Et=gn.h,!Et.data||Et.data.byteLength!=16)throw new pt(2,4,4049);return jt={name:"AES-CBC"},ln=Pe,N(gn,p.crypto.subtle.importKey("raw",Et.data,jt,!0,["decrypt"]),3)}ln.cryptoKey=gn.h,Pe.fetchKey=void 0,$(gn)})}}}if(xe=function(Et,jt,ln,gn){return yj(e,Et,jt,ln,gn)},t.J.pd)var We=L5(t,xe,Pe);else if(t.J.Jb)We=F5(t,e.m,Pe);else if(t.J.qd)We=Z5(t,xe,e.m,!!e.j,e.g.dash.initialSegmentLimit,e.L,Pe,G);else{var Ue=t.ha.duration||0,mt=t.J.nb;We={vc:function(){var Et=$E(ne,Ue,mt());return Et.tc(function(jt){jt.mimeType=t.J.mimeType,jt.codecs=t.J.codecs}),Promise.resolve(Et)}}}}catch(Et){if((ve||Y)&&Et.code==4002)return null;throw Et}G=Wr(A,"ContentProtection"),G=E5(G,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),G=new Set(G?[G]:[]),xe=!1,Wr(A,"SupplementalProperty").some(function(Et){return Et.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&Et.attributes.value=="JOC"})&&(xe=!0),Ge=!1,ve&&(Ge=h.includes("forced_subtitle")||h.includes("forced-subtitle"));var Rt;if(Y&&((A=Wr(A,"EssentialProperty").find(function(Et){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(Et.attributes.schemeIdUri)}))&&(Rt=A.attributes.value),!Rt))return null;var Ht;A=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(A.includes("hvc1.2.4.L153.B0")||A.includes("hev1.2.4.L153.B0"))&&(Ht="PQ"),ve=t.J.id?t.za.id+","+t.J.id:"";var Ut=ve&&e.m[ve]?e.m[ve]:{id:e.I++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Ut.segmentIndex&&(Ut.segmentIndex.release(),Ut.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:A,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:G,language:u,originalLanguage:t.ua.language,label:c,type:t.ua.contentType,primary:d,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:h,forced:Ge,channelsCount:t.J.de,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:xe,closedCaptions:E,hdr:Ht,videoLayout:void 0,tilesLayout:Rt,accessibilityPurpose:k,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Si(t.J.mimeType,t.J.codecs)])};return Ut.createSegmentIndex=function(){var Et;return Oe(function(jt){if(jt.g==1)return Ut.segmentIndex?jt.u(0):(Et=Ut,N(jt,We.vc(),3));Et.segmentIndex=jt.h,$(jt)})},ve&&t.Eb&&!e.m[ve]&&(e.m[ve]=Ut),Ut}function dj(e){var t,n;Oe(function(i){switch(i.g){case 1:return t=0,fe(i,2),N(i,Q_(e),4);case 4:t=i.h,he(i,3);break;case 2:if(n=Ie(i),e.i){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),i.return();n.severity=1,e.i.onError(n)}case 3:if(!e.i)return i.return();e.i.onManifestUpdated(),J_(e,t),$(i)}})}function J_(e,t){if(!(0>e.G)){var n=e.G;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.A.X(Math.max(n-t,q(e.H)))}}function e1(e,t,n,i){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,de:null,audioSamplingRate:null,Qb:0,xf:0},i=i||n.nb;var u=t.attributes.id,c=Wr(t,"BaseURL"),d,h=!1;if(e.h)for(var E=m(c),A=E.next();!A.done;A=E.next()){var k=A.value;A=k.attributes.serviceLocation,k=yu(k),A&&k&&(Sd(e.h,u,A,k),h=!0)}h&&e.h||(d=c.map(yu)),E=t.attributes.contentType||n.contentType,A=t.attributes.mimeType||n.mimeType,k=t.attributes.codecs||n.codecs;var G=_r(t,"frameRate",Fm)||n.frameRate,ne=t.attributes.sar||n.pixelAspectRatio,Y=hj(Wr(t,"InbandEventStream"),n.emsgSchemeIdUris),ve=Wr(t,"AudioChannelConfiguration");ve=pj(ve)||n.de;var Pe=_r(t,"audioSamplingRate",No)||n.audioSamplingRate;E||(E=Ux(A,k));var xe=ca(t,"SegmentBase"),Ge=ca(t,"SegmentTemplate"),Te=xe&&_r(xe,"availabilityTimeOffset",Lc)||0,We=Ge&&_r(Ge,"availabilityTimeOffset",Lc)||0,Ue=c&&c.length&&_r(c[0],"availabilityTimeOffset",Lc)||0;return Te=n.Qb+Ue+Te+We,We=null,(Ue=ca(t,"SegmentSequenceProperties"))&&(Ue=ca(Ue,"SAP"))&&(We=_r(Ue,"cadence",Qu)),{nb:function(){return co(i(),c.length?e.h&&h?Cp(e.h,u):d||[]:[])},pd:xe||n.pd,Jb:ca(t,"SegmentList")||n.Jb,qd:Ge||n.qd,width:_r(t,"width",No)||n.width,height:_r(t,"height",No)||n.height,contentType:E,mimeType:A,codecs:k,frameRate:G,pixelAspectRatio:ne,emsgSchemeIdUris:Y,id:u,language:t.attributes.lang,de:ve,audioSamplingRate:Pe,Qb:Te,xf:We||n.xf}}function hj(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function pj(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function gj(e){var t=e.pd?1:0;return t+=e.Jb?1:0,t+=e.qd?1:0,t==0?e.contentType==vr||e.contentType=="application":(t!=1&&(e.pd&&(e.Jb=null),e.qd=null),!0)}function Fx(e,t,n,i){var u,c,d,h,E,A,k;return Oe(function(G){if(G.g==1)return u=[Co(n)],c=co(t(),u),d=Li(c,e.g.retryParameters),d.method=i,h=e.i.networkingEngine.request(4,d),mu(e.F,h),N(G,h.promise,2);if(E=G.h,i=="HEAD"){if(!E.headers||!E.headers.date)return G.return(0);A=E.headers.date}else A=Vr(E.data);return k=Date.parse(A),isNaN(k)?G.return(0):G.return(k-Date.now())})}function mj(e,t,n){var i,u,c,d,h,E,A,k;return Oe(function(G){switch(G.g){case 1:i=n.map(function(ne){return{scheme:ne.attributes.schemeIdUri,value:ne.attributes.value}}),u=e.g.dash.clockSyncUri,!i.length&&u&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),c=m(i),d=c.next();case 2:if(d.done){G.u(4);break}switch(h=d.value,fe(G,5),E=h.scheme,A=h.value,E){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return G.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return G.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return k=Date.parse(A),G.return(isNaN(k)?0:k-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":He("NTP UTCTiming scheme is not supported");break;default:He("Unrecognized scheme in UTCTiming element",E)}G.u(9);break;case 7:return N(G,Fx(e,t,A,"HEAD"),10);case 10:return G.return(G.h);case 8:return N(G,Fx(e,t,A,"GET"),11);case 11:return G.return(G.h);case 9:he(G,3);break;case 5:Ie(G);case 3:d=c.next(),G.u(2);break;case 4:return He("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),G.return(0)}})}function vj(e,t,n,i,u){var c=i.attributes.schemeIdUri||"",d=i.attributes.value||"",h=_r(i,"timescale",No)||1;i=m(Wr(i,"Event"));for(var E=i.next();!E.done;E=i.next()){E=E.value;var A=_r(E,"presentationTime",No)||0,k=_r(E,"duration",No)||0;A=A/h+t,k=A+k/h,n!=null&&(A=Math.min(A,t+n),k=Math.min(k,t+n)),k<u||(E={schemeIdUri:c,value:d,startTime:A,endTime:k,id:E.attributes.id||"",eventElement:ep(E),eventNode:E},e.i.onTimelineRegionAdded(E))}}function yj(e,t,n,i,u){var c,d,h,E;return Oe(function(A){return A.g==1?(c=$a,d=u?0:1,h=up(t,n,i,e.g.retryParameters),N(A,t1(e,h,c,{type:d}),2)):(E=A.h,A.return(E.data))})}function Ux(e,t){return t=Si(e,t),Rl(t)?vr:e.split("/")[0]}function t1(e,t,n,i){return t=e.i.networkingEngine.request(n,t,i),mu(e.F,t),t.promise}te("shaka.dash.DashParser",Fv),ke["application/dash+xml"]=function(){return new Fv},ke["video/vnd.mpeg.dash.mpd"]=function(){return new Fv};function Bv(){}te("shaka.dependencies",Bv),Bv.has=function(e){return n1.has(e)},Bv.add=function(e,t){if(!jx[e])throw Error(e+" is not supported");e==Bx?dr("mux.js","mux.js is no longer used in Shaka Player."):n1.set(e,function(){return t})};var Bx="muxjs",jx={Ej:Bx,ISOBoxer:"ISOBoxer"};Bv.Allowed=jx;var n1=new Map([["ISOBoxer",function(){return p.ISOBoxer}]]);function Zx(e,t,n){this.type=e,this.g=t,this.segments=n||null}function Gx(e,t,n,i){this.id=e,this.name=t,this.attributes=n,this.value=i===void 0?null:i}Gx.prototype.toString=function(e){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var n="#"+this.name,i=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(t):[];return this.value&&i.unshift(this.value),0<i.length&&(n+=":"+i.join(",")),n};function qx(e){var t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return e.toString(t)}function Pp(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function zn(e,t,n){return(e=Pp(e,t))?e.value:n||null}function ii(e,t){if(e=Pp(e,t),!e)throw new pt(2,4,4023,t);return e.value}function Hx(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.rb=n}function Kx(e,t){this.name=e,this.value=t}function Ws(e,t){return e.filter(function(n){return n.name==t})}function Vx(e,t){return e.filter(function(n){return ii(n,"TYPE")==t})}function xo(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function Ad(e,t,n){return n=n===void 0?0:n,(e=xo(e,t))?Number(e.value):n}function ql(e,t,n){return t?zx(e,[t],n):[]}function zx(e,t,n){if(!t.length)return[];t=co(e,t),e=[],t=m(t);for(var i=t.next();!i.done;i=t.next()){var u=e,c=u.push,d=i.value;if((i=n)&&i.size){d=String(d).replace(/%7B/g,"{").replace(/%7D/g,"}");var h=d.match(/{\$\w*}/g);if(h){h=m(h);for(var E=h.next();!E.done;E=h.next()){E=E.value;var A=E.slice(2,E.length-1),k=i.get(A);if(k)d=d.replace(E,k);else throw new pt(2,4,4039,A)}}i=d}else i=d;c.call(u,i)}return e}function Vc(e){this.h=e||"",this.g=0}function Id(e){Hl(e,/[ \t]+/gm)}function Hl(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function zc(e){return e.g==e.h.length?null:(e=Hl(e,/[^ \t\n]*/gm))?e[0]:null}function Ej(){this.g=0}function r1(e,t){t=Vr(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new pt(2,4,4015);t=0;for(var i=!0,u=m(n),c=u.next();!c.done;c=u.next())if(c=c.value,/^#(?!EXT)/m.test(c)||i)i=!1;else if(c=i1(e,c),--e.g,Yx.includes(c.name)){t=1;break}else c.name=="EXT-X-STREAM-INF"&&(i=!0);for(u=[],i=!0,c=0;c<n.length;c++){var d=n[c],h=n[c+1];if(/^#(?!EXT)/m.test(d)||i)i=!1;else{if(d=i1(e,d),_j.includes(d.name)){if(t!=1)throw new pt(2,4,4017);d=n.splice(c,n.length-c),n=[],i=[],c=[],h=null,d=m(d);for(var E=d.next();!E.done;E=d.next())E=E.value,/^(#EXT)/.test(E)?(E=i1(e,E),Yx.includes(E.name)?u.push(E):E.name=="EXT-X-MAP"?h=E:E.name=="EXT-X-PART"?c.push(E):E.name=="EXT-X-PRELOAD-HINT"?zn(E,"TYPE")=="PART"?c.push(E):zn(E,"TYPE")=="MAP"&&(E.name="EXT-X-MAP",h=E):i.push(E)):/^#(?!EXT)/m.test(E)||(E=E.trim(),h&&i.push(h),n.push(new Hx(E,i,c)),i=[],c=[]);return c.length&&(h&&i.push(h),n.push(new Hx("",i,c))),new Zx(t,u,n)}u.push(d),d.name=="EXT-X-STREAM-INF"&&(d.attributes.push(new Kx("URI",h)),i=!0)}}return new Zx(t,u)}function i1(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new pt(2,4,4016,t);t=n[1];var i=n[2];n=[];var u;if(i){i=new Vc(i);var c;(c=Hl(i,/^([^,=]+)(?:,|$)/g))&&(u=c[1]);for(var d=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;c=Hl(i,d);)n.push(new Kx(c[1],c[2]||c[3])),Id(i)}return new Gx(e,t,n,u)}var Yx="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),_j="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Wx(){}function $x(e){try{var t=o1(e);return Wu({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return gu(n)}}function o1(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new pt(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new pt(2,1,1004,e);var n=t[0];e=p.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var i=!1;1<t.length&&t[t.length-1]=="base64"&&(i=!0,t.pop());var u;return i?u=Ho(e):u=za(e),{data:u,contentType:n}}te("shaka.net.DataUriPlugin",Wx),Wx.parse=$x,Ko("data",$x);function Xx(e){var t=Ca(e),n=t.split("/")[0];return e=Po(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Lf:null}}function Tj(e,t){function n(Te){return i(Te.name)}function i(Te){switch(Te=Te.toLowerCase(),Te){case"avc1":case"avc3":c.push(Te+".42E01E"),h=!0;break;case"hev1":case"hvc1":c.push(Te+".1.6.L93.90"),h=!0;break;case"dvh1":case"dvhe":c.push(Te+".05.04"),h=!0;break;case"vp09":c.push(Te+".00.10.08"),h=!0;break;case"av01":c.push(Te+".0.01M.08"),h=!0;break;case"mp4a":u.push("mp4a.40.2"),d=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":u.push(Te),d=!0}}var u=[],c=[],d=!1,h=!1,E=null,A=null,k=null,G=null,ne=null,Y=null,ve;if(new kr().box("moov",yr).box("trak",yr).O("tkhd",function(Te){Te=Zt(Te.reader,Te.version),A=String(Te.height),k=String(Te.width)}).box("mdia",yr).O("mdhd",function(Te){E=It(Te.reader,Te.version).language}).box("minf",yr).box("stbl",yr).O("stsd",vu).box("mp4a",function(Te){var We=Te.reader;We.skip(6),We.skip(2),We.skip(8);var Ue=We.ra();We.skip(2),We.skip(2),We.skip(2),We=We.ra()+We.ra()/65536,G=Ue,ne=We,Te.reader.ka()?yr(Te):n(Te)}).box("esds",function(Te){Te=Te.reader;for(var We="mp4a",Ue,mt;Te.ka();){Ue=Te.P();for(var Rt=Te.P();Rt&128;)Rt=Te.P();if(Ue==3)Te.ra(),Rt=Te.P(),Rt&128&&Te.ra(),Rt&64&&Te.skip(Te.P()),Rt&32&&Te.ra();else if(Ue==4)mt=Te.P(),Te.skip(12);else if(Ue==5)break}mt&&(We+="."+vn(mt),Ue==5&&Te.ka()&&(Ue=Te.P(),mt=(Ue&248)>>3,mt===31&&Te.ka()&&(mt=32+((Ue&7)<<3)+((Te.P()&224)>>5)),We+="."+mt)),u.push(We),d=!0}).box("ac-3",n).box("ec-3",n).box("opus",n).box("Opus",n).box("fLaC",n).box("avc1",function(Te){ve=Te.name,wi(Te)}).box("avc3",function(Te){ve=Te.name,wi(Te)}).box("hev1",function(Te){ve=Te.name,wi(Te)}).box("hvc1",function(Te){ve=Te.name,wi(Te)}).box("dva1",function(Te){ve=Te.name,wi(Te)}).box("dvav",function(Te){ve=Te.name,wi(Te)}).box("dvh1",function(Te){ve=Te.name,wi(Te)}).box("dvhe",function(Te){ve=Te.name,wi(Te)}).box("vp09",function(Te){ve=Te.name,wi(Te)}).box("av01",function(Te){ve=Te.name,wi(Te)}).box("avcC",function(Te){var We=ve||"";switch(ve){case"dvav":We="avc3";break;case"dva1":We="avc1"}Te=Te.reader,Te.skip(1),Te=We+"."+vn(Te.P())+vn(Te.P())+vn(Te.P()),c.push(Te),h=!0}).box("hvcC",function(Te){var We=ve||"";switch(ve){case"dvh1":We="hvc1";break;case"dvhe":We="hev1"}var Ue=Te.reader;Ue.skip(1),Te=Ue.P();var mt=["","A","B","C"][Te>>6],Rt=Te&31,Ht=Ue.M(),Ut=(Te&32)>>5?"H":"L";Te=[Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P()],Ue=Ue.P();for(var Et=0,jt=0;32>jt&&(Et|=Ht&1,jt!=31);jt++)Et<<=1,Ht>>=1;for(We=We+("."+mt+Rt)+("."+vn(Et,!0)),We+="."+Ut+Ue,mt="",Rt=Te.length;Rt--;)((Ut=Te[Rt])||mt)&&(mt="."+Ut.toString(16).toUpperCase()+mt);We+=mt,c.push(We),h=!0}).box("dvcC",function(Te){var We=ve||"";switch(ve){case"hvc1":We="dvh1";break;case"hev1":We="dvhe";break;case"avc1":We="dva1";break;case"avc3":We="dvav"}var Ue=Te.reader;Ue.skip(2),Te=Ue.P(),Ue=Ue.P(),c.push(We+"."+Pn(Te>>1&127)+"."+Pn(Te<<5&32|Ue>>3&31)),h=!0}).O("vpcC",function(Te){var We=ve||"",Ue=Te.reader;Te=Ue.P();var mt=Ue.P();Ue=Ue.P()>>4&15,c.push(We+"."+Pn(Te)+"."+Pn(mt)+"."+Pn(Ue)),h=!0}).box("av1C",function(Te){var We=ve||"",Ue=Te.reader;Ue.skip(1),Te=Ue.P(),Ue=Ue.P();var mt=Te>>>5,Rt=(Ue&64)>>6;c.push(We+"."+mt+"."+Pn(Te&31)+(Ue>>>7?"H":"M")+"."+Pn(mt===2&&Rt?(Ue&32)>>5?12:10:Rt?10:8)+"."+((Ue&16)>>4)+"."+((Ue&8)>>3)+((Ue&4)>>2)+(Ue&3)+"."+Pn(1)+"."+Pn(1)+"."+Pn(1)+".0"),h=!0}).box("enca",Xh).box("encv",wi).box("sinf",yr).box("frma",function(Te){Te=un(Te.reader).Ea,i(Te)}).box("colr",function(Te){Te=Te.reader;var We=null,Ue=Te.sb(4),mt=String.fromCharCode(Ue[0]);if(mt+=String.fromCharCode(Ue[1]),mt+=String.fromCharCode(Ue[2]),mt+=String.fromCharCode(Ue[3]),mt==="nclx")switch(Te.ra(),Ue=Te.ra(),Te.ra(),Ue){case 1:case 6:case 13:case 14:case 15:We="SDR";break;case 16:We="PQ";break;case 18:We="HLG"}Y=We}).parse(e||t,!0),!u.length&&!c.length)return null;var Pe=d&&!h,xe=new Map;if(h){var Ge=new wt("video/mp4");for(e&&Ge.init(e),Ge.i(t),e=m(Ge.j()),t=e.next();!t.done;t=e.next())t=t.value,xe.set(t,t);Ge.h()}return{type:Pe?"audio":"video",mimeType:Pe?"audio/mp4":"video/mp4",codecs:Qx(u.concat(c)).join(", "),language:E,height:A,width:k,channelCount:G,sampleRate:ne,closedCaptions:xe,Lf:Y}}function Qx(e){var t=new Set,n=[];e=m(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var u=Ya(i);t.has(u)||(n.push(i),t.add(u))}return t=Nh("audio",n),i=Nh("video",n),e=Nh(vr,n),i=Sj(i),t=t.concat(i).concat(e),n.length&&!t.length?n:t}function Sj(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvh1.")||n.startsWith("dvhe.")});return t?Pt('video/mp4; codecs="'+t+"\"'")?[t]:e.filter(function(n){return n!=t}):e}function wj(e){var t=null;return new kr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",vu).box("encv",wi).box("enca",Xh).box("sinf",yr).box("schi",yr).O("tenc",function(n){n=n.reader,n.P(),n.P(),n.P(),n.P(),t=ks(n.sb(16))}).parse(e,!0),t}function jv(){var e=this;this.g=this.i=null,this.A=1,this.o=new Map,this.H=new Map,this.K=new Map,this.K.set("video",new Map),this.K.set("audio",new Map),this.K.set(vr,new Map),this.K.set("image",new Map),this.Ia=new Set,this.h=new Map,this.l=null,this.aa="",this.Ga=new Ej,this.I=-1,this.T=1/0,this.ea=this.mb=!1,this.s=new pr(function(){Hj(e)}),this.qa=Kv,this.C=null,this.Ha=0,this.m=1/0,this.ta=this.sa=this.L=0,this.N=new kl,this.F=new Map,this.G=new Map,this.Y=new Map,this.ba=new Map,this.da=new Map,this.ia=new Map,this.pa=new Map,this.lb=this.B=!1,this.bb=new M(5),this.j=null}g=jv.prototype,g.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},g.start=function(e,t){var n=this,i;return Oe(function(u){return u.g==1?(n.i=t,n.B=t.isLowLatencyMode(),N(u,h1(n,[e]),2)):u.g!=3?(i=u.h,n.aa=i.uri,N(u,bj(n,i.data,e),3)):u.return(n.C)})},g.stop=function(){this.s&&(this.s.stop(),this.s=null);var e=[];return this.N&&(e.push(this.N.destroy()),this.N=null),this.g=this.i=null,this.Ia.clear(),this.C=null,this.h.clear(),this.H.clear(),this.G.clear(),this.o.clear(),this.Y.clear(),this.ba.clear(),this.da.clear(),this.ia.clear(),this.pa.clear(),this.j&&this.j.destroy(),Promise.all(e)},g.update=function(){var e=this,t,n,i,u,c,d,h,E,A;return Oe(function(k){if(k.g==1){if(!xa(e))return k.return();for(t=[],n=Array.from(e.h.values()),e.m=1/0,i=n.filter(function(G){return G.stream.segmentIndex}),u=m(i),c=u.next();!c.done;c=u.next())d=c.value,t.push(Aj(e,d));return N(k,Promise.all(t),2)}lM(e,i.map(function(G){return G.stream})),h=i.some(function(G){return G.fd==0}),i.length&&!h&&(E=Kj,qv(e,E.Pg),A=i.map(function(G){return G.yb}),e.l.Za(Math.min.apply(Math,T(A))),e.i.updateDuration()),h&&s1(e),$(k)})};function a1(e,t){return xa(e)?e.K.get(t.type):t.$d}function Aj(e,t){var n,i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue,mt,Rt,Ht,Ut,Et,jt,ln,gn,Ln,Mn;return Oe(function(qn){if(qn.g==1){for(n=[],i=m(t.$()),u=i.next();!u.done;u=i.next())c=u.value,d=new si(c),h=d.g,t.Gd&&(0<=t.gb&&h.add("_HLS_msn",String(t.gb)),0<=t.hb&&h.add("_HLS_part",String(t.hb))),t.Hd&&h.add("_HLS_skip","YES"),ia(h)&&hr(d,h),n.push(d.toString());return N(qn,h1(e,n,!0),2)}if(qn.g!=3){if(E=qn.h,!t.stream.segmentIndex)return qn.return();if(A=r1(e.Ga,E.data),A.type!=1)throw new pt(2,4,4017);return k=E.uri,k==E.originalUri||t.$().includes(k)||t.tg.push(k),G=Ws(A.g,"EXT-X-DEFINE"),ne=nM(e,G,k),Y=t.stream,ve=a1(e,t),N(qn,hM(e,A,Y.mimeType,t.$,ne),3)}Pe=qn.h,xe=Pe.keyIds,Ge=Pe.drmInfos,Te=function(Yn,Kn){return Yn.size===Kn.size&&[].concat(T(Yn)).every(function(xr){return Kn.has(xr)})},Te(Y.keyIds,xe)||(Y.keyIds=xe,Y.drmInfos=Ge,e.i.newDrmInfo(Y)),We=vM(e,A,Y,ve,ne,t.$,t.type),Ue=We.segments,(mt=We.bandwidth)&&(Y.bandwidth=mt),Y.segmentIndex.kd(Ue,e.l.qb()),Ue.length&&(Rt=Ad(A.g,"EXT-X-MEDIA-SEQUENCE",0),Ut=(Ht=xo(A.g,"EXT-X-SKIP"))?Number(zn(Ht,"SKIPPED-SEGMENTS")):0,Et=fM(Rt,Ue),jt=Et.gb,ln=Et.hb,t.gb=jt+Ut,t.hb=ln,gn=ve.get(Rt),Y.segmentIndex.La(gn)),Ln=Ue[0],t.fc=Ln.startTime,Mn=Ue[Ue.length-1],t.yb=Mn.endTime,xo(A.g,"EXT-X-ENDLIST")&&(t.fd=!0),l1(e,A),$(qn)})}g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(e){this.j&&this.j.banLocation(e)};function Jx(e,t){for(var n=e.I==-1,i=m(t),u=i.next();!u.done;u=i.next()){u=u.value;var c=u.stream.segmentIndex,d=a1(e,u);if(c=c.g[0]||null){d=m(d);for(var h=d.next();!h.done;h=d.next()){h=m(h.value);var E=h.next().value;if(h.next().value==c.startTime){n&&(e.I=Math.max(e.I,E)),u.De=E;break}}}}if(!(0>e.I))for(t=m(t),u=t.next();!u.done;u=t.next())n=u.value,Gv(e,n.type)&&(i=n.stream.segmentIndex)&&(u=e.I-n.De,0<u&&(i.g.splice(0,u),i=i.g[0]||null)&&(i=-i.startTime,n.stream.segmentIndex.offset(i),eM(e,n,i)))}function Ij(e,t){if(e.T==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value.stream.segmentIndex.g[0]||null;i!=null&&i.h!=null&&(e.T=Math.min(e.T,i.h))}}if(t=e.T,t!=1/0){for(i=m(e.h.values()),n=i.next();!n.done;n=i.next())if(n=n.value,!Gv(e,n.type)){var u=n.stream.segmentIndex;if(u!=null){var c=u.g[0]||null;if(c.h==null)de("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.$(),"Expect AV sync issues!");else for(eM(e,n,c.h-t-c.startTime),n=m(u),u=n.next();!u.done;u=n.next())u.value.Ff(t)}}}}function eM(e,t,n){t.fc+=n,t.yb+=n,e=a1(e,t);for(var i=m(e),u=i.next();!u.done;u=i.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.set(u,c+n)}t.$()}function bj(e,t,n){var i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue,mt,Rt,Ht,Ut,Et,jt,ln,gn,Ln,Mn,qn,Yn,Kn,xr,fi,ki,ci,gi;return Oe(function(Gr){switch(Gr.g){case 1:return i=r1(e.Ga,t),u=Ws(i.g,"EXT-X-DEFINE"),c=[],d=[],h=[],E=function(){return[n]},i.type==1?N(Gr,tM(e,i,E),7):(Cj(e,u),A=Ws(i.g,"EXT-X-MEDIA"),k=Ws(i.g,"EXT-X-STREAM-INF"),G=Ws(i.g,"EXT-X-IMAGE-STREAM-INF"),ne=Ws(i.g,"EXT-X-I-FRAME-STREAM-INF"),Y=Ws(i.g,"EXT-X-SESSION-KEY"),ve=Ws(i.g,"EXT-X-SESSION-DATA"),Pe=Ws(i.g,"EXT-X-CONTENT-STEERING"),Nj(e,ve),N(Gr,xj(e,Pe),4));case 4:return Rj(e,k),Fj(e,A),N(Gr,Oj(e,k,Y,A,E,e.o),5);case 5:return c=Gr.h,d=Mj(e,A),N(Gr,Dj(e,G,ne),6);case 6:h=Gr.h,Gr.u(3);break;case 7:return xe=Gr.h,Ge=xe.type,Te=xe.mimeType,We=xe.codecs,Ue=xe.language,mt=xe.height,Rt=xe.width,Ht=xe.channelCount,Ut=xe.sampleRate,Et=xe.closedCaptions,jt=xe.Lf,N(Gr,cM(e,e.A++,i,E,n,We,Ge,Ue,!0,"Media Playlist",Ht,Et,null,!1,Ut,!1,Te),8);case 8:ln=Gr.h,e.h.set(n,ln),Ge=="video"&&yM(ln.stream,Rt,mt,null,jt,null),c.push({id:0,language:Cr(Ue||"und"),disabledUntilTime:0,primary:!0,audio:Ge=="audio"?ln.stream:null,video:Ge=="video"?ln.stream:null,bandwidth:ln.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new pt(2,7,7001);if(e.l=new tr(null,0),e.l.Ec(!0),i.type==1&&(xa(e)&&(gM(e,i),gn=e.m,e.s.X(gn)),Ln=Array.from(e.h.values()),u1(e,Ln),s1(e)),e.C={presentationTimeline:e.l,variants:c,textStreams:d,imageStreams:h,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},e.ea||!e.g.hls.disableCodecGuessing){Gr.u(9);break}for(Mn=[],qn=m(e.C.variants),Yn=qn.next();!Yn.done;Yn=qn.next())Kn=Yn.value,Kn.audio&&Kn.audio.codecs===""&&Mn.push(Kn.audio.createSegmentIndex()),Kn.video&&Kn.video.codecs===""&&Mn.push(Kn.video.createSegmentIndex());return N(Gr,Promise.all(Mn),9);case 9:if(e.i.makeTextStreamsForClosedCaptions(e.C),c.length==1){for(xr=[],fi=c[0],ki=m([fi.video,fi.audio]),ci=ki.next();!ci.done;ci=ki.next())(gi=ci.value)&&!gi.segmentIndex&&xr.push(gi.createSegmentIndex());if(0<xr.length)return N(Gr,Promise.all(xr),0)}Gr.u(0)}})}function tM(e,t,n){var i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue;return Oe(function(mt){switch(mt.g){case 1:if(i=Xx(e.g.hls.mediaPlaylistFullMimeType),!t.segments.length)return mt.return(i);if(u=Math.trunc((t.segments.length-1)/2),c=t.segments[u],d=ql(n(),t.segments[0].h),h=d[0],E=new si(h),A=E.Pa.split(".").pop(),k=_M[A])return mt.return(Xx(k));if(G=$a,ne=null,Y=c1(e,t,c.g,n),e.Y.clear(),!Y){mt.u(2);break}return ve=up(Y.$(),Y.ac(),Y.Yb(),e.g.retryParameters),N(mt,Kl(e,ve,G,{type:0}),3);case 3:Pe=mt.h,ne=Pe.data;case 2:return xe=Li(d,e.g.retryParameters),N(mt,Kl(e,xe,G,{type:1}),4);case 4:if(Ge=mt.h,(Te=Ge.headers["content-type"])&&(Te=Te.split(";")[0].toLowerCase()),A=="ts"||Te=="video/mp2t"){var Rt=Ge.data,Ht=Qn(Rt);Ht=new Ke().parse(Ht);var Ut=Ht.bd();Ht=Ht.We();var Et=[],jt=!1,ln=!1;switch(Ut.audio){case"aac":case"aac-loas":Et.push("mp4a.40.2"),jt=!0;break;case"mp3":Et.push("mp4a.40.34"),jt=!0;break;case"ac3":Et.push("ac-3"),jt=!0;break;case"ec3":Et.push("ec-3"),jt=!0;break;case"opus":Et.push("opus"),jt=!0}switch(Ut.video){case"avc":Ht.Ea?Et.push(Ht.Ea):Et.push("avc1.42E01E"),ln=!0;break;case"hvc":Ht.Ea?Et.push(Ht.Ea):Et.push("hvc1.1.6.L93.90"),ln=!0;break;case"av1":Et.push("av01.0.01M.08"),ln=!0}if(Et.length){if(Ut=jt&&!ln,jt=new Map,ln){ln=new wt("video/mp2t"),ln.i(Rt),Rt=m(ln.j());for(var gn=Rt.next();!gn.done;gn=Rt.next())gn=gn.value,jt.set(gn,gn);ln.h()}Ht={type:Ut?"audio":"video",mimeType:"video/mp2t",codecs:Et.join(", "),language:null,height:Ht.height,width:Ht.width,channelCount:null,sampleRate:null,closedCaptions:jt,Lf:null}}else Ht=null;if(We=Ht)return mt.return(We)}else if((A=="mp4"||A=="cmfv"||A=="m4s"||Te=="video/mp4"||Te=="audio/mp4"||Te=="video/iso.segment")&&(Ue=Tj(ne,Ge.data)))return mt.return(Ue);return mt.return(i)}})}function s1(e){if(xa(e)){if(e.qa==Vv){for(var t,n=t=1/0,i=m(e.h.values()),u=i.next();!u.done;u=i.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&(t=Math.min(t,u.yb),n=Math.min(n,u.fc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.s),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.je(t)}}else e.l.Za(uM(e));if(!e.l.o)for(t=m(e.h.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.Bg(n.h);e.l.Xd()}function Cj(e,t){var n=new si(e.aa).g;t=m(t);for(var i=t.next();!i.done;i=t.next()){var u=i.value;i=zn(u,"NAME");var c=zn(u,"VALUE");u=zn(u,"QUERYPARAM"),i&&c&&(e.o.has(i)||e.o.set(i,c)),u&&(i=n.get(u)[0])&&!e.o.has(i)&&e.o.set(u,i)}}function nM(e,t,n){n=new si(n).g;var i=new Map;t=m(t);for(var u=t.next();!u.done;u=t.next()){var c=u.value,d=zn(c,"NAME"),h=zn(c,"VALUE");u=zn(c,"QUERYPARAM"),c=zn(c,"IMPORT"),d&&h&&(i.has(d)||i.set(d,h)),u&&(d=n.get(u)[0])&&!i.has(d)&&i.set(u,d),c&&(u=e.o.get(c))&&i.set(c,u)}return i}function Rj(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,u=zn(i,"AUDIO");n=zn(i,"VIDEO");var c=zn(i,"SUBTITLES");if(i=rM(e,i),c){var d=Ro(vr,i);e.G.set(c,d),mn(i,d)}u&&(c=Ro("audio",i),c||(c=e.g.hls.defaultAudioCodec),e.G.set(u,c)),n&&(u=Ro("video",i),u||(u=e.g.hls.defaultVideoCodec),e.G.set(n,u))}}function Nj(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,u=zn(i,"DATA-ID");n=zn(i,"URI");var c=zn(i,"LANGUAGE");i=zn(i,"VALUE"),u=new Map().set("id",u),n&&u.set("uri",ql([e.aa],n,e.o)[0]),c&&u.set("language",c),i&&u.set("value",i),n=new Wn("sessiondata",u),e.i&&e.i.onEvent(n)}}function xj(e,t){var n,i,u,c,d,h;return Oe(function(E){if(!e.i||!e.g)return E.return();for(i=m(t),u=i.next();!u.done;u=i.next())if(c=u.value,d=zn(c,"PATHWAY-ID"),h=zn(c,"SERVER-URI"),d&&h){e.j=new Td(e.i),e.j.configure(e.g),e.j.i=[e.aa],e.j.setManifestType("HLS"),e.j.h=d,n=bp(e.j,h);break}return N(E,n,0)})}function Mj(e,t){var n=Vx(t,"SUBTITLES");t=n.map(function(d){if(e.g.disableText)return null;try{return sM(e,[d],new Map).stream}catch(h){if(e.g.hls.ignoreTextStreamFailures)return null;throw h}}),n=m(n);for(var i=n.next();!i.done;i=n.next()){var u=ii(i.value,"GROUP-ID");if((i=e.G.get(u))&&(u=e.H.get(u))){u=m(u);for(var c=u.next();!c.done;c=u.next())c=c.value,c.stream.codecs=i,c.stream.mimeType=f1(vr,i)||d1(vr),bd(c.stream)}}return t.filter(function(d){return d})}function bd(e){e.fullMimeTypes=new Set([Si(e.mimeType,e.codecs)])}function Dj(e,t,n){var i,u;return Oe(function(c){return c.g==1?(i=t.map(function(d){var h,E;return Oe(function(A){if(A.g==1)return e.g.disableThumbnails?A.return(null):(fe(A,2),N(A,Uj(e,d),4));if(A.g!=2)return h=A.h,A.return(h.stream);if(E=Ie(A),e.g.hls.ignoreImageStreamFailures)return A.return(null);throw E})}).concat(n.map(function(d){if(e.g.disableThumbnails)return null;try{var h=ii(d,"URI"),E=zn(d,"CODECS")||"";if(e.h.has(h))var A=e.h.get(h);else{var k=zn(d,"LANGUAGE"),G=zn(d,"NAME"),ne=zn(d,"CHARACTERISTICS"),Y=Zv(e,e.A++,[h],E,"image",k,!1,G,null,null,ne,!1,null,!1),ve=zn(d,"RESOLUTION"),Pe=m(ve?ve.split("x"):[null,null]),xe=Pe.next().value,Ge=Pe.next().value;Y.stream.width=Number(xe)||void 0,Y.stream.height=Number(Ge)||void 0;var Te=zn(d,"BANDWIDTH");Te&&(Y.stream.bandwidth=Number(Te)),e.h.set(h,Y),A=Y}return d=A,d.stream.codecs!=="mjpg"?null:d.stream}catch(We){if(e.g.hls.ignoreImageStreamFailures)return null;throw We}})),N(c,Promise.all(i),2)):(u=c.h,c.return(u.filter(function(d){return d})))})}function Pj(e,t,n){t=t.filter(function(h){var E=zn(h,"URI")||"";return zn(h,"TYPE")!="SUBTITLES"&&E!=""});var i={};t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=qx(u);i[c]?i[c].push(u):i[c]=[u]}for(var d in i)sM(e,i[d],n)}function Oj(e,t,n,i,u,c){var d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue,mt,Rt,Ht,Ut,Et,jt,ln,gn,Ln,Mn,qn,Yn,Kn,xr,fi,ki;return Oe(function(ci){switch(ci.g){case 1:if(d=[],h=new Set,!(0<n.length)){ci.u(2);break}E=m(n),A=E.next();case 3:if(A.done){ci.u(2);break}if(k=A.value,G=ii(k,"METHOD"),ne=zn(k,"KEYFORMAT")||"identity",Y=null,G=="NONE"||Hv(G)){ci.u(4);break}if(ne!="identity"){Y=(ve=SM[ne])?ve(k,""):null,ci.u(6);break}return N(ci,EM(e,k,"",u,null,c),8);case 8:Y=ci.h;case 6:if(Y){if(Y.keyIds)for(Pe=m(Y.keyIds),xe=Pe.next();!xe.done;xe=Pe.next())Ge=xe.value,h.add(Ge);d.push(Y)}case 4:A=E.next(),ci.u(3);break;case 2:for(Te={},We=m(t),Ue=We.next();!Ue.done;Ue=We.next())mt=Ue.value,Rt=qx(mt),Te[Rt]?Te[Rt].push(mt):Te[Rt]=[mt];Ht=[];for(Ut in Te)Et=Te[Ut],jt=Et[0],ln=zn(jt,"FRAME-RATE"),gn=Number(zn(jt,"AVERAGE-BANDWIDTH"))||Number(ii(jt,"BANDWIDTH")),Ln=zn(jt,"RESOLUTION"),Mn=m(Ln?Ln.split("x"):[null,null]),qn=Mn.next().value,Yn=Mn.next().value,Kn=zn(jt,"VIDEO-RANGE"),(xr=zn(jt,"REQ-VIDEO-LAYOUT"))&&xr.includes(",")&&(fi=xr.split(",").filter(function(gi){return gi=="CH-STEREO"||gi=="CH-MONO"}),xr=fi[0]),xr=xr||"CH-MONO",ki=Lj(e,Et,i,gn),Ht.push.apply(Ht,T(kj(e,ki.audio,ki.video,gn,qn,Yn,ln,Kn,xr,d,h)));return ci.return(Ht.filter(function(gi){return gi!=null}))}})}function Lj(e,t,n,i){for(var u={audio:[],video:[]},c=new Map,d=[],h=!1,E=!1,A=m(t),k=A.next();!k.done;k=A.next()){var G=k.value;k=zn(G,"AUDIO");var ne=zn(G,"VIDEO"),Y=k||ne;Y&&(d.includes(Y)||d.push(Y),(G=zn(G,"PATHWAY-ID"))&&c.set(Y,G),k?h=!0:ne&&(E=!0))}d.length&&n.length&&(A=n.filter(function(xe){return d.includes(ii(xe,"GROUP-ID"))}),Pj(e,A,c)),A=(c=d.sort().join(","))&&e.H.has(c)?e.H.get(c):[],h?u.audio.push.apply(u.audio,T(A)):E&&u.video.push.apply(u.video,T(A)),k=!1;var ve=t.map(function(xe){return ii(xe,"URI")});if(E=u.audio.find(function(xe){return xe&&xe.$().find(function(Ge){return ve.includes(Ge)})}),h=rM(e,t[0]),ne=Ro("video",h),(Y=Ro("audio",h))&&!ne?(E="audio",k=0<u.audio.length):!u.audio.length&&!u.video.length&&Y&&ne?(E="video",h=[[ne,Y].join()]):u.audio.length&&E?(E="audio",k=!0):E=u.video.length&&!u.audio.length?"audio":"video",!k){var Pe=G=Y=ne=k=null;!A.length&&(n=n.find(function(xe){var Ge=zn(xe,"URI")||"",Te=zn(xe,"TYPE");return xe=ii(xe,"GROUP-ID"),Te!="SUBTITLES"&&Ge==""&&d.includes(xe)}))&&(k=zn(n,"LANGUAGE"),ne=zn(n,"NAME"),Y=iM(n),aM(n),G=zn(n,"CHARACTERISTICS"),Pe=oM(n)),e=Bj(e,t,h,E,k,ne,Y,G,Pe),c&&(e.stream.groupId=c),A.length||(e.stream.bandwidth=i),u[e.stream.type]=[e]}return u}function rM(e,t){var n=zn(t,"CODECS")||"";return t=zn(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(i){return i.split("/")[0]}),e.push.apply(e,T(t))),Qx(e)}function iM(e){return(e=zn(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function oM(e){return(e=zn(e,"SAMPLE-RATE"))?parseInt(e,10):null}function aM(e){return(e=zn(e,"CHANNELS"))?e.includes("/JOC"):!1}function kj(e,t,n,i,u,c,d,h,E,A,k){for(var G=m(n),ne=G.next();!ne.done;ne=G.next())yM(ne.value.stream,u,c,d,h,E);for(u=e.g.disableAudio,(!t.length||u)&&(t=[null]),u=e.g.disableVideo,(!n.length||u)&&(n=[null]),u=[],t=m(t),c=t.next();!c.done;c=t.next())for(c=c.value,d=m(n),h=d.next();!h.done;h=d.next()){var Y=h.value;(h=c?c.stream:null)&&(h.drmInfos=A,h.keyIds=k),(E=Y?Y.stream:null)&&(E.drmInfos=A,E.keyIds=k),G=c?c.stream.drmInfos:null,ne=Y?Y.stream.drmInfos:null,Y=Y?Y.$().sort().join(","):"";var ve=c?c.$().sort().join(","):"";Y=Y+" - "+ve,h&&E&&!re(G,ne)||e.Ia.has(Y)||(h={id:e.A++,language:h?h.language:"und",disabledUntilTime:0,primary:!!h&&h.primary||!!E&&E.primary,audio:h,video:E,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(h),e.Ia.add(Y))}return u}function Fj(e,t){t=Vx(t,"CLOSED-CAPTIONS"),t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,u=zn(i,"LANGUAGE");n=Cr(u||"und"),u||(u=zn(i,"NAME"))&&(n=u),u=ii(i,"GROUP-ID"),i=ii(i,"INSTREAM-ID").replace("SERVICE","svc"),e.F.get(u)||e.F.set(u,new Map),e.F.get(u).set(i,n)}}function sM(e,t,n){for(var i=[],u=[],c=new Map,d=m(t),h=d.next();!h.done;h=d.next()){var E=h.value;h=ii(E,"URI"),E=ii(E,"GROUP-ID"),i.push(h),u.push(E),c.set(E,h)}if(d=u.sort().join(","),h=t[0],t="",E=ii(h,"TYPE").toLowerCase(),E=="subtitles"&&(E=vr),E==vr)t=zn(h,"CODECS")||"";else{u=m(u);for(var A=u.next();!A.done;A=u.next())if(A=A.value,e.G.has(A)){t=e.G.get(A);break}}if(u=i.sort().join(","),e.h.has(u))return e.h.get(u);if(A=e.A++,e.j){c=m(c);for(var k=c.next();!k.done;k=c.next()){var G=m(k.value);k=G.next().value,G=G.next().value,(k=n.get(k))&&Sd(e.j,A,k,G)}}n=zn(h,"LANGUAGE"),c=zn(h,"NAME"),k=zn(h,"DEFAULT")=="YES",G=E=="audio"?iM(h):null;var ne=E=="audio"?aM(h):!1,Y=zn(h,"CHARACTERISTICS"),ve=zn(h,"FORCED")=="YES";return h=E=="audio"?oM(h):null,i=Zv(e,A,i,t,E,n,k,c,G,null,Y,ve,h,ne),i.stream&&(i.stream.groupId=d),e.H.has(d)?e.H.get(d).push(i):e.H.set(d,[i]),e.h.set(u,i),i}function Uj(e,t){var n,i,u,c,d,h,E,A,k,G;return Oe(function(ne){return ne.g==1?(n=ii(t,"URI"),i=zn(t,"CODECS","jpeg")||"",e.h.has(n)?ne.return(e.h.get(n)):(u=zn(t,"LANGUAGE"),c=zn(t,"NAME"),d=zn(t,"CHARACTERISTICS"),h=Zv(e,e.A++,[n],i,"image",u,!1,c,null,null,d,!1,null,!1),(E=zn(t,"RESOLUTION"))?N(ne,h.stream.createSegmentIndex(),3):ne.u(2))):(ne.g!=2&&(A=h.stream.segmentIndex.get(0),k=A.tilesLayout)&&(h.stream.width=Number(E.split("x")[0])*Number(k.split("x")[0]),h.stream.height=Number(E.split("x")[1])*Number(k.split("x")[1])),(G=zn(t,"BANDWIDTH"))&&(h.stream.bandwidth=Number(G)),e.h.set(n,h),ne.return(h))})}function Bj(e,t,n,i,u,c,d,h,E){for(var A=e.A++,k=[],G=m(t),ne=G.next();!ne.done;ne=G.next()){var Y=ne.value;ne=ii(Y,"URI"),Y=zn(Y,"PATHWAY-ID"),e.j&&Y&&Sd(e.j,A,Y,ne),k.push(ne)}if(G=k.sort().join(","),e.h.has(G))return e.h.get(G);e:{if(t=zn(t[0],"CLOSED-CAPTIONS"),i=="video"){if(t&&t!="NONE"){t=e.F.get(t);break e}if(!t&&e.F.size)for(t=m(e.F.keys()).next();!t.done;){t=e.F.get(t.value);break e}}t=null}return n=Uu(i,n),i=Zv(e,A,k,n,i,u,!1,c,d,t,h,!1,E,!1),e.h.set(G,i),i}function Zv(e,t,n,i,u,c,d,h,E,A,k,G,ne,Y){function ve(mt){var Rt,Ht,Ut,Et,jt,ln,gn,Ln,Mn,qn,Yn,Kn,xr,fi,ki,ci,gi;return Oe(function(Gr){switch(Gr.g){case 1:return Rt=Te.$(),N(Gr,h1(e,Te.$(),!0),2);case 2:if(Ht=Gr.h,mt.aborted)return Gr.return();if(Ut=Ht.uri,Ut==Ht.originalUri||Rt.includes(Ut)||Ge.push(Ut),Et=r1(e.Ga,Ht.data),jt=void 0,e.ea||!e.g.hls.disableCodecGuessing){Gr.u(3);break}return N(Gr,tM(e,Et,Pe),4);case 4:ln=Gr.h,jt=ln.mimeType,i=ln.codecs;case 3:return gn=xa(e),N(Gr,cM(e,0,Et,Pe,Ut,i,u,c,d,h,E,A,k,G,ne,Y,jt),5);case 5:if(Ln=Gr.h,mt.aborted)return Gr.return();if(Mn=Ln.stream,xa(e)&&!gn&&gM(e,Et),Te.fc=Ln.fc,Te.yb=Ln.yb,Te.Hd=Ln.Hd,Te.Gd=Ln.Gd,Te.fd=Ln.fd,Te.$d=Ln.$d,Te.gb=Ln.gb,Te.hb=Ln.hb,Te.df=!0,xe.segmentIndex=Mn.segmentIndex,xe.encrypted=Mn.encrypted,xe.drmInfos=Mn.drmInfos,xe.keyIds=Mn.keyIds,xe.mimeType=Mn.mimeType,xe.bandwidth=xe.bandwidth||Mn.bandwidth,xe.codecs=xe.codecs||Mn.codecs,bd(xe),xe.drmInfos.length&&e.i.newDrmInfo(xe),qn=yi,u==qn.fa||u==qn.S)for(Yn=m(e.h.values()),Kn=Yn.next();!Kn.done;Kn=Yn.next())xr=Kn.value,xr.df||xr.type!=u||(xr.stream.mimeType=Mn.mimeType,bd(xr.stream));u==qn.ma&&(fi=Mn.segmentIndex.get(0))&&fi.ca&&(xe.mimeType="application/mp4",bd(xe)),jj(e)&&(e.mb?u1(e,[Te]):(e.mb=!0,ki=Array.from(e.h.values()),ci=ki.filter(function(fo){return fo.stream.segmentIndex}),u1(e,ci),s1(e),gi=e.m,0<gi&&e.s.X(gi))),$(Gr)}})}function Pe(){return e.j&&1<n.length?Cp(e.j,t):Ge.concat(zx([e.aa],n,e.o))}var xe=dM(e,i,u,c,d,h,E,A,k,G,ne,Y),Ge=[],Te={stream:xe,type:u,tg:Ge,$:Pe,fc:0,yb:0,$d:new Map,Hd:!1,Gd:!1,fd:!1,De:-1,gb:-1,hb:-1,df:!1},We=null,Ue=new AbortController;return xe.createSegmentIndex=function(){return We||(Ue=new AbortController,We=new Promise(function(mt){mt(ve(Ue.signal))}))},xe.closeSegmentIndex=function(){We&&!xe.segmentIndex&&Ue.abort(),xe.segmentIndex&&(xe.segmentIndex.release(),xe.segmentIndex=null),We=null},Te}function uM(e){var t=1/0;e=m(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.yb));return t}function lM(e,t){var n=[];t=m(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&i.segmentIndex.tc(function(u){n.push(u)});e.l.ld(n)}function u1(e,t){if(!xa(e))for(var n=uM(e),i=m(t),u=i.next();!u.done;u=i.next())u.value.stream.segmentIndex.sc(0,n);lM(e,t.map(function(c){return c.stream})),e.g.hls.ignoreManifestProgramDateTime?Jx(e,t):(Ij(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&Jx(e,t))}function Gv(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function jj(e){if(!e.C)return!1;var t=[],n=[];e=m(e.C.variants);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&t.push(i.video),i.audio&&n.push(i.audio);return!(0<t.length&&!t.some(function(u){return u.segmentIndex})||0<n.length&&!n.some(function(u){return u.segmentIndex}))}function cM(e,t,n,i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe){var Ge,Te,We,Ue,mt,Rt,Ht,Ut,Et,jt,ln,gn,Ln,Mn,qn,Yn,Kn,xr,fi,ki,ci,gi,Gr;return Oe(function(fo){switch(fo.g){case 1:if(n.type!=1)throw new pt(2,4,4017);Ge=Ws(n.g,"EXT-X-DEFINE"),Te=nM(e,Ge,u);var Uo=xo(n.g,"EXT-X-PLAYLIST-TYPE"),ai=xo(n.g,"EXT-X-ENDLIST");if(ai=Uo&&Uo.value=="VOD"||ai,Uo=Uo&&Uo.value=="EVENT"&&!ai,Uo=!ai&&!Uo,ai?qv(e,Kv):Uo?qv(e,Vv):qv(e,wM),xa(e)&&l1(e,n),xe){fo.u(2);break}return N(fo,qj(e,d,c,n,Te,i),3);case 3:xe=fo.h;case 2:return N(fo,hM(e,n,xe,i,Te),4);case 4:if(We=fo.h,Ue=We.drmInfos,mt=We.keyIds,Rt=We.encrypted,Ht=We.Tg,Rt&&!Ue.length&&!Ht)throw new pt(2,4,4026);return Ut=dM(e,c,d,h,E,A,k,G,ne,Y,ve,Pe),Ut.encrypted=Rt,Ut.drmInfos=Ue,Ut.keyIds=mt,Ut.mimeType=xe,bd(Ut),Et=xa(e)?e.K.get(d):new Map,jt=vM(e,n,Ut,Et,Te,i,d),ln=jt.segments,(gn=jt.bandwidth)&&(Ut.bandwidth=gn),xa(e)&&l1(e,n),Ln=ln[0].startTime,Mn=ln[ln.length-1],qn=Mn.endTime,Yn=new wr(ln),Ut.segmentIndex=Yn,xr=(Kn=xo(n.g,"EXT-X-SERVER-CONTROL"))?Pp(Kn,"CAN-SKIP-UNTIL")!=null:!1,fi=Kn?Pp(Kn,"CAN-BLOCK-RELOAD")!=null:!1,ki=Ad(n.g,"EXT-X-MEDIA-SEQUENCE",0),ci=fM(ki,ln),gi=ci.gb,Gr=ci.hb,fo.return({stream:Ut,type:d,tg:[],$:i,fc:Ln,yb:qn,Hd:xr,Gd:fi,fd:!1,De:-1,gb:gi,hb:Gr,$d:Et,df:!1})}})}function fM(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{gb:e,hb:n};t=t[t.length-1];var i=t.g;return t.g.length?(n=i.length-1,i[i.length-1].preload||(e++,n=0),{gb:e,hb:n}):(e++,t.m&&(n=0),{gb:e,hb:n})}function dM(e,t,n,i,u,c,d,h,E,A,k,G){var ne=f1(n,t)||d1(n),Y=[];if(E){E=m(E.split(","));for(var ve=E.next();!ve.done;ve=E.next())Y.push(ve.value)}return E=void 0,ve=null,n==vr?E=Y.includes("public.accessibility.transcribes-spoken-dialog")&&Y.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":Y.includes("public.accessibility.describes-video")&&(ve="visually impaired"),Y.length||E!=="subtitle"||Y.push("subtitle"),e={id:e.A++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:ne,codecs:t,kind:n==vr?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Cr(i||"und"),originalLanguage:i,label:c,type:n,primary:u,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:Y,forced:A,channelsCount:d,audioSamplingRate:k,spatialAudio:G,closedCaptions:h,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:ve,external:!1,fastSwitching:!1,fullMimeTypes:new Set},bd(e),e}function hM(e,t,n,i,u){var c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue,mt,Rt,Ht,Ut,Et,jt,ln,gn,Ln,Mn,qn,Yn;return Oe(function(Kn){switch(Kn.g){case 1:if(c=new Map,t.segments){for(d=m(t.segments),h=d.next();!h.done;h=d.next())if(E=h.value,A=Ws(E.g,"EXT-X-KEY"),k=null,A.length)for(k=c1(e,t,E.g,i,u),G=m(A),ne=G.next();!ne.done;ne=G.next())Y=ne.value,c.set(Y,k)}Pe=ve=!1,xe=[],Ge=new Set,Te=m(c),We=Te.next();case 2:if(We.done){Kn.u(4);break}if(Ue=We.value,mt=m(Ue),Rt=mt.next().value,Ht=mt.next().value,Ut=Rt,Et=Ht,jt=ii(Ut,"METHOD"),jt=="NONE"){Kn.u(3);break}if(ve=!0,ln=zn(Ut,"KEYFORMAT")||"identity",gn=null,Hv(jt)){Pe=!0,Kn.u(3);break}if(ln!="identity"){gn=(Ln=SM[ln])?Ln(Ut,n):null,Kn.u(6);break}return N(Kn,EM(e,Ut,n,i,Et,u),8);case 8:gn=Kn.h;case 6:if(gn){if(gn.keyIds)for(Mn=m(gn.keyIds),qn=Mn.next();!qn.done;qn=Mn.next())Yn=qn.value,Ge.add(Yn);xe.push(gn)}case 3:We=Te.next(),Kn.u(2);break;case 4:return Kn.return({drmInfos:xe,keyIds:Ge,encrypted:ve,Tg:Pe})}})}function pM(e,t,n,i,u){if(!p.crypto||!p.crypto.subtle)throw He("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new pt(2,4,4042);var c=0,d=zn(t,"IV","");if(d){var h=hu(d.substr(2));if(h.byteLength!=16)throw new pt(2,4,4048)}else c=Ad(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+c,!e.ba.has(n)){var E={bitsKey:128,blockCipherMode:"CBC",iv:h,firstMediaSequenceNumber:c};switch(ii(t,"METHOD")){case"AES-256":E.bitsKey=256;break;case"AES-256-CTR":E.bitsKey=256,E.blockCipherMode="CTR"}E.fetchKey=function(){var A,k,G,ne,Y,ve,Pe;return Oe(function(xe){if(xe.g==1)return A=ql(i(),ii(t,"URI"),u),k=A.sort().join(""),e.da.has(k)||(G=Li(A,e.g.retryParameters),ne=Kl(e,G,6),e.da.set(k,ne)),N(xe,e.da.get(k),2);if(xe.g!=3){if(Y=xe.h,!Y.data||Y.data.byteLength!=E.bitsKey/8)throw new pt(2,4,4049);return ve={name:E.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:E.bitsKey},Pe=E,N(xe,p.crypto.subtle.importKey("raw",Y.data,ve,!0,["decrypt"]),3)}Pe.cryptoKey=xe.h,E.fetchKey=void 0,$(xe)})},e.ba.set(n,E)}return e.ba.get(n)}function l1(e,t){var n=1/0,i=t.segments;if(i.length)for(var u=i.length-1;0<=u;){var c=xo(i[u].g,"EXTINF");if(c){n=Number(c.value.split(",")[0]);break}u--}if(i=xo(t.g,"EXT-X-TARGETDURATION"),!i)throw new pt(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),(u=xo(t.g,"EXT-X-PART-INF"))&&(e.L=Number(ii(u,"PART-TARGET"))),t=xo(t.g,"EXT-X-SERVER-CONTROL"),e.B&&e.L?(e.m=e.lb?5*e.L<=n?Math.min(e.L,e.m):Math.min(n,e.m):Math.min(e.L,e.m),e.ta=t?Number(ii(t,"PART-HOLD-BACK")):0):(e.m=Math.min(n,e.m),n=t?Pp(t,"HOLD-BACK"):null,e.sa=n?Number(n.value):0),e.Ha=Math.max(i,e.Ha)}function gM(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.ta)t=e.ta;else if(e.sa)t=e.sa;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.Ha*n}e.l.Cg(0),e.l.Bf(t),e.l.Ec(!1)}function c1(e,t,n,i,u){var c=xo(n,"EXT-X-MAP");if(!c)return null;var d=ii(c,"URI"),h=ql(i(),d,u);if(d=[h.toString(),zn(c,"BYTERANGE","")].join("-"),!e.Y.has(d)){var E=void 0,A=null;n=m(n);for(var k=n.next();!k.done;k=n.next())k=k.value,k.name=="EXT-X-KEY"?Hv(ii(k,"METHOD"))&&k.id<c.id&&(E=pM(e,k,t,i,u)):k.name=="EXT-X-BYTERANGE"&&k.id<c.id&&(A=k);t=Zj(h,c,A,E),e.Y.set(d,t)}return e.Y.get(d)}function Zj(e,t,n,i){var u=0,c=null;return t=zn(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(u=t.split("@"),c=Number(u[0]),u=Number(u[1]),c=u+c-1,i&&(n=c+1-u,n%16&&(c+=16-n%16))),new dt(function(){return e},u,c,null,null,null,i)}function Gj(e,t,n,i,u,c,d,h,E){var A=i.g,k=xo(A,"EXTINF"),G=0,ne=0,Y=null;i.rb.length&&!e.B&&He("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var ve=null;if(!e.g.hls.ignoreManifestProgramDateTime){var Pe=xo(A,"EXT-X-PROGRAM-DATE-TIME");Pe&&Pe.value&&(ve=Xf(Pe.value))}var xe=Bt;if(xo(A,"EXT-X-GAP")&&(xe=2),!k){if(i.rb.length==0)throw new pt(2,4,4024,"EXTINF");if(!e.B)return null}var Ge=[];Pe=!1;var Te=null,We=!1,Ue=!1;if(e.B&&i.rb.length){G=(d.mimeType=="video/mp4"||d.mimeType=="audio/mp4")&&p.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var mt=ve,Rt={},Ht=0;Ht<i.rb.length;Rt={Qc:Rt.Qc,yd:Rt.yd},Ht++){var Ut=i.rb[Ht],Et=Ht==0?n:Ge[Ge.length-1],jt=Ht==0?u:Et.endTime,ln=Number(zn(Ut,"DURATION"))||e.L;if(ln){var gn=jt+ln,Ln=0,Mn=null;if(Ut.name=="EXT-X-PRELOAD-HINT"?(Ln=(Ln=zn(Ut,"BYTERANGE-START"))?Number(Ln):0,(Et=zn(Ut,"BYTERANGE-LENGTH"))?Mn=Ln+Number(Et)-1:Ln&&(Mn=Number.MAX_SAFE_INTEGER)):(Ln=zn(Ut,"BYTERANGE"),Mn=m(mM(Et,Ln)),Ln=Mn.next().value,Mn=Mn.next().value),Rt.yd=zn(Ut,"URI"),Rt.yd){Et=Bt,zn(Ut,"GAP")=="YES"&&(Et=2,We=!0),Rt.Qc=null;var qn=function(Kn){return function(){return Kn.Qc==null&&(Kn.Qc=ql(h(),Kn.yd,c)),Kn.Qc}}(Rt);G&&0<=Ln&&Mn!=null&&(Te=qn,Pe=!0),jt=new Je(jt,gn,qn,Ln,Mn,t,0,0,1/0,[],"",null,mt,Et,E),Ut.name=="EXT-X-PRELOAD-HINT"&&(jt.ef(),Ue=!0),zn(Ut,"INDEPENDENT")!="YES"&&0<Ht&&jt.Zd(),Ge.push(jt),mt&&(mt+=ln)}}}}if(k){if(k=Number(k.value.split(",")[0]),k==0)return null;G=u+k}else if(Ge.length)G=Ge[Ge.length-1].endTime;else return null;Pe&&(We||Ge[0].Aa!=0?(Pe=!1,Te=null):Ge=[]),(k=xo(A,"EXT-X-BYTERANGE"))?(Y=m(mM(n,k.value)),ne=Y.next().value,Y=Y.next().value):Ge.length&&(ne=Ge[0].Aa,Y=Ge[Ge.length-1].ja),n="",k=null,d.type=="image"&&(n="1x1",d=xo(A,"EXT-X-TILES"))&&(n=ii(d,"LAYOUT"),(d=zn(d,"DURATION"))&&(k=Number(d)));var Yn=null;return t=new Je(u,G,function(){return Te?Te():(Yn==null&&(Yn=ql(h(),i.h,c)),Yn||[])},ne,Y,t,0,0,1/0,Ge,n,k,ve,xe,E,0<Ge.length&&!!i.h),Pe&&(e.lb=!0,t.lg(),Ue&&t.ef()),t}function mM(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.ja+1,i=n+t-1),[n,i]}function vM(e,t,n,i,u,c,d){var h=t.segments,E=void 0,A=Ad(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),k=Ad(t.g,"EXT-X-MEDIA-SEQUENCE",0),G=xo(t.g,"EXT-X-SKIP"),ne=G?Number(zn(G,"SKIPPED-SEGMENTS")):0,Y=k+ne,ve=0;xa(e)&&i.has(Y)&&(ve=i.get(Y)),ve===0&&e.qa==Vv&&0<i.size&&!i.has(Y)&&(ve=e.l.qb());var Pe=[],xe=null;G=[];for(var Ge=0;Ge<h.length;Ge++){var Te=h[Ge],We=Ge==0?ve:xe.endTime;Y=k+ne+Ge,xo(Te.g,"EXT-X-DISCONTINUITY")&&A++;for(var Ue=m(Te.g),mt=Ue.next();!mt.done;mt=Ue.next())mt=mt.value,mt.name=="EXT-X-KEY"&&(Hv(ii(mt,"METHOD"))?E=pM(e,mt,t,c,u):E=void 0);i.set(Y,We),Ue=c1(e,t,Te.g,c,u),!e.B&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.B=e.i.isLowLatencyMode()),(We=Gj(e,Ue,xe,Te,We,u,n,c,E))&&((xe=Ad(Te.g,"EXT-X-BITRATE"))?G.push({bitrate:xe,duration:We.endTime-We.startTime}):G.length&&(xe=G.pop(),xe.duration+=We.endTime-We.startTime,G.push(xe)),xe=We,We.j=A,Gv(e,d)&&e.I!=null&&Y<e.I||Pe.push(We))}if(t=void 0,G.length&&(t=G.reduce(function(Rt,Ht){return Rt+Ht.duration},0),t=Math.round(G.reduce(function(Rt,Ht){return Rt+Ht.bitrate*Ht.duration},0)/t*1e3)),G=Pe.some(function(Rt){return Rt.h!=null})){for(n={},i=0;i<Pe.length;n={Jc:n.Jc,Ic:n.Ic,td:n.td,Cb:n.Cb,Fc:n.Fc},i++)if(n.Cb=Pe[i],n.Cb.h==null)for(n.Ic=0,n.Jc=i,u=function(Rt){return function(){var Ht=Pe[Rt.Jc];if(Ht){if(Ht.h!=null)return Ht.h+Rt.Ic;Rt.Ic-=Ht.endTime-Ht.startTime,Rt.Jc+=1}return null}}(n),n.Fc=0,n.td=i,c=function(Rt){return function(){var Ht=Pe[Rt.td];if(Ht){if(Ht!=Rt.Cb&&(Rt.Fc+=Ht.endTime-Ht.startTime),Ht.h!=null)return Ht.h+Rt.Fc;--Rt.td}return null}}(n);n.Cb.h==null;)n.Cb.h=c(),n.Cb.h==null&&(n.Cb.h=u())}if(G)for(n=m(Pe),i=n.next();!i.done;i=n.next())for(u=i.value,i=u.h,u=m(u.g),c=u.next();!c.done;c=u.next())c=c.value,c.h=i,i+=c.endTime-c.startTime;if(n=e.T,G&&n!=1/0&&!Gv(e,d))for(e=m(Pe),i=e.next();!i.done;i=e.next())i.value.Ff(n);return{segments:Pe,bandwidth:t}}function f1(e,t){if(e==vr){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function d1(e){return e==vr?"text/vtt":TM[e].mp4}function qj(e,t,n,i,u,c){var d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te;return Oe(function(We){switch(We.g){case 1:return d=$a,h=Math.trunc((i.segments.length-1)/2),E=ql(c(),i.segments[h].h,u),A=new si(E[0]),k=A.Pa.split(".").pop(),G=TM[t],(ne=G[k])||(ne=_M[k])||(ne=f1(t,n))?We.return(ne):(ve=1,Pe=Li(E,e.g.retryParameters),fe(We,2),Pe.method="HEAD",N(We,Kl(e,Pe,d,{type:ve}),4));case 4:xe=We.h,Y=xe.headers["content-type"],he(We,3);break;case 2:if(Ge=Ie(We),!Ge||Ge.code!=1002&&Ge.code!=1001){We.u(3);break}return Pe.method="GET",N(We,Kl(e,Pe,d,{type:ve}),6);case 6:Te=We.h,Y=Te.headers["content-type"];case 3:return Y?We.return(Y.split(";")[0]):We.return(d1(t))}})}function yM(e,t,n,i,u,c){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=u||void 0,e.videoLayout=c||void 0)}function h1(e,t,n){return Kl(e,Li(t,e.g.retryParameters),0,{type:n?2:3})}function Hj(e){var t,n,i,u,c,d;Oe(function(h){switch(h.g){case 1:return e.i?(fe(h,2),t=Date.now(),N(h,e.update(),4)):h.return();case 4:n=Date.now(),xa(e)&&(i=(n-t)/1e3,e.bb.sample(1,i),u=e.m,c=Math.max(0,u-q(e.bb)),e.s.X(c)),he(h,3);break;case 2:if(d=Ie(h),!e.i)return h.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(d),h.return();d.severity=1,e.i.onError(d),e.s.X(.1);case 3:if(!e.i)return h.return();e.i.onManifestUpdated(),$(h)}})}function xa(e){return e.qa!=Kv}function qv(e,t){e.qa=t,e.l&&e.l.Ec(!xa(e)),xa(e)||e.s.stop()}function Kl(e,t,n,i){if(!e.N)throw new pt(2,7,7001);return t=e.i.networkingEngine.request(n,t,i),mu(e.N,t),t.promise}function Hv(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function EM(e,t,n,i,u,c){var d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue;return Oe(function(mt){switch(mt.g){case 1:if(n=="video/mp2t")throw new pt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new pt(2,4,4041);if(d=ii(t,"METHOD"),h=["SAMPLE-AES","SAMPLE-AES-CTR"],!h.includes(d))return mt.return(null);if(E=ql(i(),ii(t,"URI"),c),E[0].startsWith("data:text/plain;base64,")){A=ks(Ho(E[0].split("data:text/plain;base64,").pop())),mt.u(2);break}return k=E.sort().join(""),e.ia.has(k)||(G=Li(E,e.g.retryParameters),ne=Kl(e,G,6),e.ia.set(k,ne)),N(mt,e.ia.get(k),3);case 3:Y=mt.h,A=ks(Y.data);case 2:if(ve="00000000000000000000000000000000",!u){mt.u(4);break}if(e.pa.has(u)){Pe=e.pa.get(u),mt.u(5);break}return xe=up(u.$(),u.ac(),u.Yb(),e.g.retryParameters),Ge=$a,N(mt,Kl(e,xe,Ge,{type:0}),6);case 6:Te=mt.h,Pe=wj(Te.data),e.pa.set(u,Pe);case 5:Pe&&(ve=Pe);case 4:return We=new Map,We.set(ve,A),Ue="cenc",d=="SAMPLE-AES"&&(Ue="cbcs"),mt.return(Rh(We,Ue))}})}te("shaka.hls.HlsParser",jv);var _M={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},TM={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},SM={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new pt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new pt(2,4,4041);return e=ii(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?(t="cenc",e=="SAMPLE-AES"&&(t="cbcs"),Fu("com.apple.fps",t,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])):null},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=ii(e,"URI"),t=o1(t),t=Qn(t.data),n=Fu("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=zn(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=ii(e,"URI"),e=o1(e),e=Qn(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Yf(e,t,new Set,0),Fu("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},Kv="VOD",wM="EVENT",Vv="LIVE",Kj={Pg:Kv,Pi:wM,Xi:Vv};ke["application/x-mpegurl"]=function(){return new jv},ke["application/vnd.apple.mpegurl"]=function(){return new jv};function Vj(e){var t=0,n=tn(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:i,value:c}),e+=u}n=t}return n}function zv(e){if(e=AM(e))e:{e=m(Ra(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=ca(t.value,"LA_URL")){e=Ri(t);break e}e=""}else e="";return e}function AM(e){return e=Ho(Ri(e)),e=Vj(e).filter(function(t){return t.type===zj})[0],e?(e=Ka(e.value,!0),(e=Bl(e,"WRMHEADER"))?e:null):null}var zj=1,Yj=new Map().set("com.microsoft.playready",zv).set("com.microsoft.playready.recommendation",zv).set("com.microsoft.playready.software",zv).set("com.microsoft.playready.hardware",zv);function Cd(e){if(!RM){RM=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);Yv=mr("ftyp",t,i,t,n),t=mr("dref",oZ),p1=mr("dinf",t)}this.g=e}function Rd(e){for(var t=[],n=m(e.g),i=n.next();!i.done;i=n.next()){var u=t,c=u.push,d=i.value;i=mr;var h=d.id+1,E=d.stream.width||0,A=d.stream.height||0;d.type=="audio"&&(A=E=0);var k=d.duration*d.timescale,G=Math.floor(k/(Vl+1));switch(k=Math.floor(k%(Vl+1)),h=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(h,4)),[0,0,0,0],T(oi(G,4)),T(oi(k,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],T(oi(E,2)),[0,0],T(oi(A,2)),[0,0])),h=mr("tkhd",h),E=mr,G=d.duration*d.timescale,A=Math.floor(G/(Vl+1)),G=Math.floor(G%(Vl+1)),k=d.stream.language,k=k.charCodeAt(0)-96<<10|k.charCodeAt(1)-96<<5|k.charCodeAt(2)-96,A=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(d.timescale,4)),T(oi(A,4)),T(oi(G,4)),T(oi(k,2)),[0,0])),A=mr("mdhd",A),G=d,k=new Uint8Array([]),G.type){case"video":k=$j;break;case"audio":k=Xj}G=mr("hdlr",k);e:{switch(d.type){case"video":d=mr("minf",mr("vmhd",nZ),p1,IM(d));break e;case"audio":d=mr("minf",mr("smhd",rZ),p1,IM(d));break e}d=new Uint8Array([])}d=E("mdia",A,G,d),i=i("trak",h,d),c.call(u,i)}for(t=li.apply(Oi,T(t)),c=e.g[0],n=mr,i=c.duration*c.timescale,u=Math.floor(i/(Vl+1)),i=Math.floor(i%(Vl+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(c.timescale,4)),T(oi(u,4)),T(oi(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=mr("mvhd",u),i=[],e=m(e.g),E=e.next();!E.done;E=e.next())d=i,h=d.push,E=new Uint8Array([0,0,0,0].concat(T(oi(E.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),E=mr("trex",E),h.call(d,E);if(e=li.apply(Oi,T(i)),e=mr("mvex",e),i=[],c.encrypted){for(c=m(c.stream.drmInfos),d=c.next();!d.done;d=c.next())if(d=d.value,d.initData)for(d=m(d.initData),h=d.next();!h.done;h=d.next())i.push(h.value.initData);c=li.apply(Oi,T(i))}else c=new Uint8Array([]);return e=n("moov",u,t,e,c),t=new Uint8Array(Yv.byteLength+e.byteLength),t.set(Yv),t.set(e,Yv.byteLength),t}function IM(e){var t=mr,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var i=e.stream.height||0;if(0<e.oa.byteLength)var u=mr("avcC",e.oa);else{u=mr;for(var c=7,d=[],h=[],E=0,A=0,k=0,G=0;G<e.Sa.length;G++){var ne=CM(e.Sa[G]);switch(ne[0]&31){case 7:d.push(ne),c+=ne.length+2;break;case 8:h.push(ne),c+=ne.length+2}}for(0<d.length&&(E=d[0][1],k=d[0][2],A=d[0][3]),c=new Uint8Array(c),G=0,c[G++]=1,c[G++]=E,c[G++]=k,c[G++]=A,c[G++]=255,c[G++]=224|d.length,E=0;E<d.length;E++)c[G++]=(d[E].length&65280)>>8,c[G++]=d[E].length&255,c.set(d[E],G),G+=d[E].length;for(c[G++]=h.length,d=0;d<h.length;d++)c[G++]=(h[d].length&65280)>>8,c[G++]=h[d].length&255,c.set(h[d],G),G+=h[d].length;u=u("avcC",c)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(n,2)),T(oi(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="avc1",h=bM(e),d=new Uint8Array([]),e.encrypted&&(d=Nd(e),i="encv"),n=mr(i,n,u,h,d)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,u=e.stream.height||0,n=new Uint8Array([]),0<e.oa.byteLength&&(n=mr("hvcC",e.oa)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(i,2)),T(oi(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",h=bM(e),d=new Uint8Array([]),e.encrypted&&(d=Nd(e),u="encv"),n=mr(u,i,n,h,d));break;case"audio":e.codecs.includes("mp3")?e=mr(".mp3",Op(e)):e.codecs.includes("ac-3")?(n=mr("dac3",e.ga),i="ac-3",u=new Uint8Array([]),e.encrypted&&(u=Nd(e),i="enca"),e=mr(i,Op(e),n,u)):e.codecs.includes("ec-3")?(n=mr("dec3",e.ga),i="ec-3",u=new Uint8Array([]),e.encrypted&&(u=Nd(e),i="enca"),e=mr(i,Op(e),n,u)):e.codecs.includes("opus")?(n=mr("dOps",e.ga),i="Opus",u=new Uint8Array([]),e.encrypted&&(u=Nd(e),i="enca"),e=mr(i,Op(e),n,u)):(0<e.ga.byteLength?n=mr("esds",e.ga):(n=mr,i=e.id+1,u=e.stream.channelsCount||2,d=e.stream.audioSamplingRate||44100,E=Uu("audio",e.codecs.split(",")),A={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},h=A[d],(E==="mp4a.40.5"||E==="mp4a.40.29")&&(h=A[2*d]),d=parseInt(E.split(".").pop(),10),i=new Uint8Array([0,0,0,0,3,25].concat(T(oi(i,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,d<<3|h>>>1,h<<7|u<<3,6,1,2])),n=n("esds",i)),i="mp4a",u=new Uint8Array([]),e.encrypted&&(u=Nd(e),i="enca"),e=mr(i,Op(e),n,u)),n=e}return e=mr("stsd",iZ,n),t("stbl",e,mr("stts",Qj),mr("stsc",Jj),mr("stsz",tZ),mr("stco",eZ))}function bM(e){if(!e.xa&&!e.ya)return new Uint8Array([]);var t=e.ya;return e=new Uint8Array([].concat(T(oi(e.xa,4)),T(oi(t,4)))),mr("pasp",e)}function Op(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(T(oi(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Nd(e){for(var t=mr,n=e.codecs.substring(0,e.codecs.indexOf(".")),i=0,u=0;u<n.length;u+=1)i|=n.charCodeAt(u)<<8*(n.length-u-1);n=new Uint8Array([].concat(T(oi(i,4)))),n=mr("frma",n),i=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),i=mr("schm",i),u=mr;var c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.stream.drmInfos);for(var d=e.next();!d.done;d=e.next())if((d=d.value)&&d.keyIds&&d.keyIds.size){d=m(d.keyIds);for(var h=d.next();!h.done;h=d.next())c=CM(h.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),c=mr("tenc",e,c),t("sinf",n,i,u("schi",c))}function Lp(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=t.push,u=i.apply,c=mr,d=new Uint8Array([0,0,0,0].concat(T(oi(n.data?n.data.jb:0,4))));d=mr("mfhd",d);var h,E=n.data?n.data.Ra:[],A=new Uint8Array(4+E.length);for(h=0;h<E.length;h++){var k=E[h].flags;A[h+4]=k.Ka<<4|k.Na<<2|k.Ma}E=mr("sdtp",A);var G=E.length+92;A=mr,h=new Uint8Array([0,0,0,58].concat(T(oi(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=mr("tfhd",h),k=n.data?n.data.baseMediaDecodeTime:0;var ne=Math.floor(k%(Vl+1));k=new Uint8Array([1,0,0,0].concat(T(oi(Math.floor(k/(Vl+1)),4)),T(oi(ne,4)))),k=mr("tfdt",k);var Y=G;G=n.data?n.data.Ra:[],ne=G.length;var ve=12+16*ne,Pe=new Uint8Array(ve);for(Y+=8+ve,Pe.set([n.type==="video"?1:0,0,15,1].concat(T(oi(ne,4)),T(oi(Y,4))),0),Y=0;Y<ne;Y++){var xe=G[Y];ve=oi(xe.duration,4);var Ge=oi(xe.size,4),Te=xe.flags;xe=oi(xe.Ta,4),Pe.set([].concat(T(ve),T(Ge),[Te.Va<<2|Te.Ka,Te.Na<<6|Te.Ma<<4|Te.Wa,Te.Ja&61440,Te.Ja&15],T(xe)),12+16*Y)}G=mr("trun",Pe),E=A("traf",h,k,G,E),c=c("moof",d,E),u.call(i,t,[c,Wj(n)])}return li.apply(Oi,T(t))}function Wj(e){return e=(e.data?e.data.Ra:[]).map(function(t){return t.data}),e=li.apply(Oi,T(e)),mr("mdat",e)}function oi(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function CM(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function mr(e){var t=Qe.apply(1,arguments),n=NM[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],NM[e]=n);for(var i=8,u=t.length-1;0<=u;u--)i+=t[u].byteLength;for(u=new Uint8Array(i),u[0]=i>>24&255,u[1]=i>>16&255,u[2]=i>>8&255,u[3]=i&255,u.set(n,4),n=0,i=8;n<t.length;n++)u.set(t[n],i),i+=t[n].byteLength;return u}var RM=!1,Vl=Math.pow(2,32)-1,NM={},$j=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Xj=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Qj=new Uint8Array([0,0,0,0,0,0,0,0]),Jj=new Uint8Array([0,0,0,0,0,0,0,0]),eZ=new Uint8Array([0,0,0,0,0,0,0,0]),tZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),nZ=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),rZ=new Uint8Array([0,0,0,0,0,0,0,0]),iZ=new Uint8Array([0,0,0,0,0,0,0,1]),Yv=new Uint8Array([]),oZ=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),p1=new Uint8Array([]);function g1(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new M(5),this.o=new pr(function(){aZ(e)}),this.A=new kl,this.m=new Map}g=g1.prototype,g.configure=function(e){this.g=e},g.start=function(e,t){var n=this;return Oe(function(i){if(i.g==1)return n.l=[e],n.h=t,N(i,m1(n),2);if(!n.h)throw new pt(2,7,7001);return i.return(n.j)})};function aZ(e){var t;Oe(function(n){switch(n.g){case 1:return fe(n,2),N(n,m1(e),4);case 4:he(n,3);break;case 2:t=Ie(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();$(n)}})}g.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},g.update=function(){var e=this,t;return Oe(function(n){if(n.g==1)return fe(n,2),N(n,m1(e),4);if(n.g!=2)return he(n,0);if(t=Ie(n),!e.h||!t)return n.return();e.h.onError(t),$(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(){};function m1(e){var t,n,i,u,c,d,h;return Oe(function(E){if(E.g==1)return t=Li(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),u=n.request(0,t,{type:5}),mu(e.A,u),N(E,u.promise,2);if(c=E.h,!e.h)return E.return();c.uri&&!e.l.includes(c.uri)&&e.l.unshift(c.uri);var A=c.uri,k=c.data,G=e.g.mss.manifestPreprocessor;if(G!=Jm){if(dr("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),k=Lx(k,"SmoothStreamingMedia"),!k)throw new pt(2,4,4046,A);G(k),k=za(k.outerHTML)}var ne=Qh(k,"SmoothStreamingMedia");if(!ne)throw new pt(2,4,4046,A);if(A=e.g.mss.manifestPreprocessorTXml,A!=ev&&A(ne),e.i||(e.i=new tr(null,0)),A=_r(ne,"IsLive",Jh,!1))throw new pt(2,4,4047);e.i.Ec(!A),G=_r(ne,"TimeScale",No,1e7),k=_r(ne,"DVRWindowLength",No),A&&(k===0||isNaN(k))&&(k=1/0);var Y=_r(ne,"CanSeek",Jh,!1);k===0&&Y&&(k=1/0),Y=null,k&&0<k&&(Y=k/G),A&&!isNaN(e.g.availabilityWindowOverride)&&(Y=e.g.availabilityWindowOverride),Y==null&&(Y=1/0),e.i.je(Y),k=_r(ne,"Duration",No,1/0),A||e.i.Za(k/G),A={variants:[],textStreams:[],timescale:G,duration:k/G},Y=Wr(ne,"Protection");var ve;for(G=e.g.mss.keySystemsBySystemId,k=[],Y=m(Y),ve=Y.next();!ve.done;ve=Y.next())k=k.concat(Wr(ve.value,"ProtectionHeader"));if(k.length){for(Y=[],ve=0;ve<k.length;ve++){var Pe=k[ve],xe=Pe.attributes.SystemID.toLowerCase(),Ge=G[xe];if(Ge){var Te=AM(Pe);if(Te)e:{Te=m(Ra(Te,"DATA"));for(var We=Te.next();!We.done;We=Te.next())if(We=ca(We.value,"KID")){Te=Ho(Ri(We)),Te=new Uint8Array([Te[3],Te[2],Te[1],Te[0],Te[5],Te[4],Te[7],Te[6]].concat(T(Te.slice(8)))),Te=ks(Te);break e}Te=null}else Te=null;We=Ho(Ri(Pe)),xe=hu(xe.replace(/-/g,"")),xe=[{initData:Yf(We,xe,new Set,0),initDataType:"cenc",keyId:Te}],xe=Fu(Ge,"cenc",xe),Te&&xe.keyIds.add(Te),(Ge=Yj.get(Ge))&&(xe.licenseServerUri=Ge(Pe)),Y.push(xe)}}G=Y}else G=[];for(ve=G,Y=[],G=[],k=[],ne=Wr(ne,"StreamIndex"),ne=m(ne),Pe=ne.next();!Pe.done;Pe=ne.next()){Pe=Pe.value,Ge=Wr(Pe,"QualityLevel"),xe=A.timescale,Te=A.duration,We=Wr(Pe,"c");for(var Ue=[],mt=0,Rt=0;Rt<We.length;++Rt){var Ht=We[Rt],Ut=We[Rt+1],Et=_r(Ht,"t",No),jt=_r(Ht,"d",No);if(Ht=_r(Ht,"r",Qu),!jt)break;if(Et=Et!=null?Et:mt,Ht=Ht||0,0>Ht)if(Ut){if(Ut=_r(Ut,"t",No),Ut==null)break;if(Et>=Ut)break;Ht=Math.ceil((Ut-Et)/jt)-1}else{if(Te==1/0)break;if(Et/xe>=Te)break;Ht=Math.ceil((Te*xe-Et)/jt)-1}for(Ut=0;Ut<=Ht;++Ut)mt=Et+jt,Ue.push({start:Et/xe,end:mt/xe,Kf:Et}),Et=mt}for(xe=Ue,Ge=m(Ge),Te=Ge.next();!Te.done;Te=Ge.next())(Te=sZ(e,Pe,Te.value,xe,ve,A))&&(Te.type!="audio"||e.g.disableAudio?Te.type!="video"||e.g.disableVideo?Te.type!=vr||e.g.disableText||k.push(Te):G.push(Te):Y.push(Te))}for(ne=[],Y=m(0<Y.length?Y:[null]),ve=Y.next();!ve.done;ve=Y.next())for(ve=ve.value,Pe=m(0<G.length?G:[null]),Te=Pe.next();!Te.done;Te=Pe.next())Ge=ne,xe=Ge.push,Te=Te.value,We=0,ve&&ve.bandwidth&&0<ve.bandwidth&&(We+=ve.bandwidth),Te&&Te.bandwidth&&0<Te.bandwidth&&(We+=Te.bandwidth),Te={id:e.s++,language:ve?ve.language:"und",disabledUntilTime:0,primary:!!ve&&ve.primary||!!Te&&Te.primary,audio:ve,video:Te,bandwidth:We,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},xe.call(Ge,Te);A.variants=ne,A.textStreams=k,e.j?(e.j.variants=A.variants,e.j.textStreams=A.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:A.variants,textStreams:A.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Xd()),Promise.resolve(),d=Date.now(),h=(d-i)/1e3,e.B.sample(1,h),$(E)})}function sZ(e,t,n,i,u,c){var d=t.attributes.Type;if(d!=="audio"&&d!=="video"&&d!=="text")return He("Ignoring unrecognized type:",d),null;var h=t.attributes.Language,E=e.s++,A=_r(n,"Bitrate",Zs),k=_r(n,"MaxWidth",Zs),G=_r(n,"MaxHeight",Zs),ne=_r(n,"Channels",Zs),Y=_r(n,"SamplingRate",Zs),ve=c.duration;i.length&&(ve=i[i.length-1].end-i[0].start);var Pe=e.i.getDuration();e.i.Za(Math.min(ve,Pe));var xe={id:E,originalId:t.attributes.Name||String(E),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:A||0,width:k||void 0,height:G||void 0,kind:"",encrypted:0<u.length,drmInfos:u,keyIds:new Set,language:Cr(h||"und"),originalLanguage:h,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:ne,audioSamplingRate:Y,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:ve,timescale:c.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((u=t.attributes.Subtype)&&((u=hZ[u])&&xe.roles.push(u),u==="main"&&(xe.primary=!0)),u=n.attributes.FourCC,(u===null||u==="")&&(u=t.attributes.FourCC),!u){if(d==="audio")u="AAC";else if(d==="video")return He('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!dZ.includes(u.toUpperCase()))return He("Codec not supported:",u),null;switch(n=uZ(n,d,u,xe),xe.mssPrivateData.codecPrivateData=n,d){case"audio":if(!n)return He("Quality unsupported without CodecPrivateData",d),null;xe.type="audio",xe.mimeType="mss/audio/mp4",xe.codecs=lZ(u,n);break;case"video":if(!n)return He("Quality unsupported without CodecPrivateData",d),null;xe.type="video",xe.mimeType="mss/video/mp4",xe.codecs=cZ(n);break;case"text":xe.type=vr,xe.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(xe.codecs="stpp")}return xe.fullMimeTypes.add(Si(xe.mimeType,xe.codecs)),xe.createSegmentIndex=function(){if(xe.segmentIndex)return Promise.resolve();if(e.m.has(xe.id))var Ge=e.m.get(xe.id);else Ge=[],xe.type=="video"&&(Ge=xe.mssPrivateData.codecPrivateData.split("00000001").slice(1)),Ge={id:xe.id,type:xe.type,codecs:xe.codecs,encrypted:xe.encrypted,timescale:xe.mssPrivateData.timescale,duration:xe.mssPrivateData.duration,Sa:Ge,ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:null,stream:xe},Ge=Rd(new Cd([Ge])),e.m.set(xe.id,Ge);return Ge=fZ(e,new dt(function(){return[]},0,null,null,void 0,Ge),xe,t,i),xe.segmentIndex=new wr(Ge),Promise.resolve()},xe.closeSegmentIndex=function(){xe.segmentIndex&&(xe.segmentIndex.release(),xe.segmentIndex=null)},xe}function uZ(e,t,n,i){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=i.channelsCount||2,e=i.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return i=u[e],n==="AACH"?(n=new Uint8Array(4),e=u[2*e],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|i>>1,n[1]=i<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function lZ(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function cZ(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function fZ(e,t,n,i,u){var c=i.attributes.Url.replace("{bitrate}",String(n.bandwidth));i=[];var d={};u=m(u);for(var h=u.next();!h.done;d={Pc:d.Pc},h=u.next())d.Pc=h.value,i.push(new Je(d.Pc.start,d.Pc.end,function(E){return function(){return co(e.l,[c.replace("{start time}",String(E.Pc.Kf))])}}(d),0,null,t,0,0,n.mssPrivateData.duration));return i}te("shaka.mss.MssParser",g1);var dZ="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),hZ={CAPT:"main",SUBT:"alternate",DESC:"main"};ke["application/vnd.ms-sstr+xml"]=function(){return new g1};function xM(e,t,n,i,u,c){if(200<=n&&299>=n&&n!=202)return{uri:u||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};u=null;try{u=Va(t)}catch(d){}throw new pt(n==401||n==403?2:1,1,1001,i,n,u,e,c)}function v1(){}function Wv(e,t,n,i,u){var c=new yZ;Fl(t.headers).forEach(function(A,k){c.append(k,A)});var d=new mZ,h={Rf:!1,Jg:!1};if(e=pZ(e,n,{body:t.body||void 0,headers:c,method:t.method,signal:d.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},h,i,u,t.streamDataCallback),e=new pi(e,function(){return h.Rf=!0,d.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var E=new pr(function(){h.Jg=!0,d.abort()});E.X(t/1e3),e.finally(function(){E.stop()})}return e}function pZ(e,t,n,i,u,c,d){var h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:return h=gZ,E=vZ,ne=G=0,Y=Date.now(),fe(Ue,2),N(Ue,h(e,n),4);case 4:if(A=Ue.h,c(MM(A.headers)),n.method=="HEAD"){Ue.u(5);break}return ve=A.clone().body.getReader(),xe=(Pe=A.headers.get("Content-Length"))?parseInt(Pe,10):0,Ge=function(mt){function Rt(){var Ht,Ut;return Oe(function(Et){switch(Et.g){case 1:return fe(Et,2),N(Et,ve.read(),4);case 4:Ht=Et.h,he(Et,3);break;case 2:return Ie(Et),Et.return();case 3:if(Ht.done){Et.u(5);break}if(G+=Ht.value.byteLength,!d){Et.u(5);break}return N(Et,d(Ht.value),5);case 5:Ut=Date.now(),(100<Ut-Y||Ht.done)&&(u(Ut-Y,G-ne,xe-G),ne=G,Y=Ut),Ht.done?mt.close():(mt.enqueue(Ht.value),Rt()),$(Et)}})}Rt()},new E({start:Ge}),N(Ue,A.arrayBuffer(),6);case 6:k=Ue.h;case 5:he(Ue,3);break;case 2:throw Te=Ie(Ue),i.Rf?new pt(1,1,7001,e,t):i.Jg?new pt(1,1,1003,e,t):new pt(1,1,1002,e,Te,t);case 3:return We=MM(A.headers),Ue.return(xM(We,k,A.status,e,A.url,t))}})}function MM(e){var t={};return e.forEach(function(n,i){t[i.trim()]=n}),t}function DM(){if(p.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(p.Response){if(!new Response("").body)return!1}else return!1;return!(!p.fetch||!p.AbortController)}te("shaka.net.HttpFetchPlugin",v1),v1.isSupported=DM,v1.parse=Wv;var gZ=p.fetch,mZ=p.AbortController,vZ=p.ReadableStream,yZ=p.Headers;DM()&&(Ko("http",Wv,2,!0),Ko("https",Wv,2,!0),Ko("blob",Wv,2,!0));function PM(){}function $v(e,t,n,i,u){var c=new EZ,d=Date.now(),h=0,E=new Promise(function(A,k){c.open(t.method,e,!0),c.responseType="arraybuffer",c.timeout=t.retryParameters.timeout,c.withCredentials=t.allowCrossSiteCredentials,c.onabort=function(){k(new pt(1,1,7001,e,n))};var G=!1;c.onreadystatechange=function(){if(c.readyState==2&&!G){var Y=OM(c);u(Y),G=!0}},c.onload=function(){var Y=OM(c),ve=c.response;try{var Pe=xM(Y,ve,c.status,e,c.responseURL,n);A(Pe)}catch(xe){k(xe)}},c.onerror=function(Y){k(new pt(1,1,1002,e,Y,n))},c.ontimeout=function(){k(new pt(1,1,1003,e,n))},c.onprogress=function(Y){var ve=Date.now();(100<ve-d||Y.lengthComputable&&Y.loaded==Y.total)&&(i(ve-d,Y.loaded-h,Y.total-Y.loaded),h=Y.loaded,d=ve)};for(var ne in t.headers)c.setRequestHeader(ne.toLowerCase(),t.headers[ne]);c.send(t.body)});return new pi(E,function(){return c.abort(),Promise.resolve()})}function OM(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}te("shaka.net.HttpXHRPlugin",PM),PM.parse=$v;var EZ=p.XMLHttpRequest;Ko("http",$v,1,!0),Ko("https",$v,1,!0),Ko("blob",$v,1,!0);function LM(e,t,n,i){this.g=e,this.i=t,this.groupId=n,this.h=i}function y1(e){return e.$().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Aa+":"+e.ja}function _Z(e,t){return up(e.g.$(),e.g.Aa,e.g.ja,t.streaming.retryParameters)}function kM(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function FM(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}kM.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function UM(e){var t=this;this.o=e,this.j=new Map,this.i=new $u(function(){return E1(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new kM}UM.prototype.destroy=function(){return this.i.destroy()};function TZ(e,t,n){e.m=t,e.l=n}function E1(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function SZ(e,t,n,i,u,c){jr(e.i);var d=(e.j.get(t)||Promise.resolve()).then(function(){var h,E,A,k,G,ne,Y;return Oe(function(ve){if(ve.g==1)return N(ve,AZ(e,n),2);if(h=ve.h,e.i.g)throw new pt(2,9,7001);if(u)for(k in E=Qn(h),A=new km(E),A.data)G=Number(k),ne=A.data[G],Y=A.g[G],e.l(ne,Y);e.g.close(i,h.byteLength);var Pe=e.g;return e.m(Pe.i==0?0:Pe.j/Pe.i,e.g.h),ve.return(c(h))})});e.j.set(t,d)}function wZ(e){return Oe(function(t){return t.g==1?N(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function AZ(e,t){var n,i,u,c;return Oe(function(d){return d.g==1?(n=$a,i=e.o.request(n,t),u=function(){return i.abort()},e.h.push(u),N(d,i.promise,2)):(c=d.h,mn(e.h,u),d.return(c.data))})}function Xv(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Rr,e.onabort=function(i){i.preventDefault(),n.g.reject()},e.onerror=function(i){i.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Xv.prototype.abort=function(){var e=this;return Oe(function(t){if(t.g==1){try{e.i.abort()}catch(n){}return fe(t,2),N(t,e.g,4)}if(t.g!=2)return he(t,0);Ie(t),$(t)})};function _1(e,t){return new Promise(function(n,i){var u=e.h.openCursor();u.onerror=i,u.onsuccess=function(){var c;return Oe(function(d){if(d.g==1)return u.result==null?(n(),d.return()):(c=u.result,N(d,t(c.key,c.value,c),2));c.continue(),$(d)})}})}Xv.prototype.store=function(){return this.h},Xv.prototype.promise=function(){return this.g};function T1(e){this.h=e,this.g=[]}T1.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Yc(e,t){return Qv(e,t,"readwrite")}function Qv(e,t,n){n=e.h.transaction([t],n);var i=new Xv(n,t);return e.g.push(i),i.promise().then(function(){mn(e.g,i)},function(){mn(e.g,i)}),i}function Wc(e,t,n){this.h=new T1(e),this.i=t,this.g=n}g=Wc.prototype,g.destroy=function(){return this.h.destroy()},g.hasFixedKeySpace=function(){return!0},g.addSegments=function(){return BM(this.i)},g.removeSegments=function(e,t){return jM(this,this.i,e,t)},g.getSegments=function(e){var t=this,n;return Oe(function(i){return i.g==1?N(i,ZM(t,t.i,e),2):(n=i.h,i.return(n.map(function(u){return t.Tf(u)})))})},g.addManifests=function(){return BM(this.g)},g.updateManifest=function(){return Promise.reject(new pt(2,9,9016,"Cannot modify values in "+this.g))};function IZ(e,t,n){e=Yc(e.h,e.g);var i=e.store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}g.updateManifestExpiration=function(e,t){var n=Yc(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=t,i.put(u,e))},n.promise()},g.removeManifests=function(e,t){return jM(this,this.g,e,t)},g.getManifests=function(e){var t=this,n;return Oe(function(i){return i.g==1?N(i,ZM(t,t.g,e),2):(n=i.h,i.return(Promise.all(n.map(function(u){return t.Yc(u)}))))})},g.getAllManifests=function(){var e=this,t,n;return Oe(function(i){return i.g==1?(t=Qv(e.h,e.g,"readonly"),n=new Map,N(i,_1(t,function(u,c){var d;return Oe(function(h){if(h.g==1)return N(h,e.Yc(c),2);d=h.h,n.set(u,d),$(h)})}),2)):i.g!=3?N(i,t.promise(),3):i.return(n)})},g.Tf=function(e){return e},g.Yc=function(e){return Promise.resolve(e)};function BM(e){return Promise.reject(new pt(2,9,9011,"Cannot add new value to "+e))}g.add=function(e,t){var n=this,i,u,c,d,h,E,A;return Oe(function(k){if(k.g==1){for(i=Yc(n.h,e),u=i.store(),c=[],d={},h=m(t),E=h.next();!E.done;d={zd:d.zd},E=h.next())A=E.value,d.zd=u.add(A),d.zd.onsuccess=function(G){return function(){c.push(G.zd.result)}}(d);return N(k,i.promise(),2)}return k.return(c)})};function jM(e,t,n,i){e=Yc(e.h,t),t=e.store();var u={};n=m(n);for(var c=n.next();!c.done;u={xd:u.xd},c=n.next())u.xd=c.value,t.delete(u.xd).onsuccess=function(d){return function(){return i(d.xd)}}(u);return e.promise()}function ZM(e,t,n){var i,u,c,d,h,E,A;return Oe(function(k){if(k.g==1){for(i=Qv(e.h,t,"readonly"),u=i.store(),c={},d=[],h={},E=m(n),A=E.next();!A.done;h={Nc:h.Nc,Lc:h.Lc},A=E.next())h.Lc=A.value,h.Nc=u.get(h.Lc),h.Nc.onsuccess=function(G){return function(){G.Nc.result==null&&d.push(G.Lc),c[G.Lc]=G.Nc.result}}(h);return N(k,i.promise(),2)}if(d.length)throw new pt(2,9,9012,"Could not find values for "+d);return k.return(n.map(function(G){return c[G]}))})}function kp(e){this.g=new T1(e)}kp.prototype.destroy=function(){return this.g.destroy()},kp.prototype.getAll=function(){var e=this,t,n;return Oe(function(i){return i.g==1?(t=Qv(e.g,"session-ids","readonly"),n=[],N(i,_1(t,function(u,c){n.push(c)}),2)):i.g!=3?N(i,t.promise(),3):i.return(n)})},kp.prototype.add=function(e){var t=Yc(this.g,"session-ids"),n=t.store();e=m(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()},kp.prototype.remove=function(e){var t=this,n;return Oe(function(i){return i.g==1?(n=Yc(t.g,"session-ids"),N(i,_1(n,function(u,c,d){e.includes(c.sessionId)&&d.delete()}),2)):N(i,n.promise(),0)})};function zo(){this.g=new Map}zo.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},zo.prototype.init=function(){var e=this;Fp.forEach(function(u,c){(u=u())&&e.g.set(c,u)});for(var t=[],n=m(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)};function GM(e){var t=null;if(e.g.forEach(function(n,i){n.getCells().forEach(function(u,c){u.hasFixedKeySpace()||t||(t={path:{fb:i,Ba:c},Ba:u})})}),t)return t;throw new pt(2,9,9013,"Could not find a cell that supports add-operations")}function bZ(e,t){e.g.forEach(function(n,i){n.getCells().forEach(function(u,c){t({fb:i,Ba:c},u)})})}function Jv(e,t,n){if(e=e.g.get(t),!e)throw new pt(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new pt(2,9,9013,"Could not find cell with name "+n);return t}function CZ(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function RZ(e){var t=Array.from(e.g.keys());if(!t.length)throw new pt(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function NZ(e){var t,n,i;return Oe(function(u){return u.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(i=Fp,i.forEach(function(c){(c=c())&&t.push(c)})),N(u,Promise.all(t.map(function(c){return c.erase()})),2)):n?u.u(0):N(u,Promise.all(t.map(function(c){return c.destroy()})),0)})}function qM(e,t){Fp.set(e,t)}te("shaka.offline.StorageMuxer",zo),zo.unregister=function(e){Fp.delete(e)},zo.register=qM,zo.prototype.destroy=zo.prototype.destroy;var Fp=new Map;function Up(){Wc.apply(this,arguments)}z(Up,Wc),Up.prototype.updateManifestExpiration=function(e,t){var n=this,i,u,c;return Oe(function(d){return i=Yc(n.h,n.g),u=i.store(),c=new Rr,u.get(e).onsuccess=function(h){(h=h.target.result)?(h.expiration=t,u.put(h),c.resolve()):c.reject(new pt(2,9,9012,"Could not find values for "+e))},N(d,Promise.all([i.promise(),c]),0)})},Up.prototype.Yc=function(e){var t,n,i,u,c,d;return Oe(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=i-e.periods[n].startTime,c=xZ(e.periods[n],u),t.push(c);return N(h,Cx(t),2)}return d=h.h,h.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:d,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function xZ(e,t){DZ(e);for(var n=m(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map(function(u){return MZ(u,e.startTime,t)})}function MZ(e,t,n){var i=e.initSegmentUri?HM(e.initSegmentUri):null,u=t+e.presentationTimeOffset,c=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(d){var h=HM(d.uri);return{startTime:t+d.startTime,endTime:t+d.endTime,dataKey:h,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:c,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Up.prototype.Tf=function(e){return{data:e.data}};function HM(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new pt(2,9,9004,"Could not parse uri "+e)}function DZ(e){var t=e.streams.filter(function(h){return h.contentType=="audio"});if(e=e.streams.filter(function(h){return h.contentType=="video"}),!t.every(function(h){return h.variantIds})||!e.every(function(h){return h.variantIds})){for(var n=m(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(n=m(e),i=n.next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var u=n++,c=m(e);for(i=c.next();!i.done;i=c.next())i.value.variantIds.push(u)}if(!e.length&&t.length)for(u=n++,c=m(t),i=c.next();!i.done;i=c.next())i.value.variantIds.push(u);if(e.length&&t.length)for(t=m(t),i=t.next();!i.done;i=t.next())for(i=i.value,u=m(e),c=u.next();!c.done;c=u.next()){c=c.value;var d=n++;i.variantIds.push(d),c.variantIds.push(d)}}}function ey(){Wc.apply(this,arguments)}z(ey,Wc),ey.prototype.Yc=function(e){var t,n,i,u,c,d;return Oe(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=i-e.periods[n].startTime;for(var E=e.periods[n],A=[],k=m(E.streams),G=k.next();!G.done;G=k.next())G=G.value,G.variantIds.length!=0&&A.push(PZ(G,E.startTime,E.startTime+u));c=A,t.push(c)}return N(h,Cx(t),2)}return d=h.h,h.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:d,sequenceMode:!1})})};function PZ(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function S1(){Wc.apply(this,arguments)}z(S1,Wc),g=S1.prototype,g.hasFixedKeySpace=function(){return!1},g.addSegments=function(e){return this.add(this.i,e)},g.addManifests=function(e){return this.add(this.g,e)},g.updateManifest=function(e,t){return IZ(this,e,t)},g.Yc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function KM(){this.m=this.j=this.i=this.h=this.g=this.l=null}g=KM.prototype,g.init=function(){var e=this,t=new Rr,n=!1,i=new pr(function(){n=!0,t.reject(new pt(2,9,9017))});i.X(5);var u=p.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!n){var c=u.result;e.l=c;var d=c.objectStoreNames;d=d.contains("manifest")&&d.contains("segment")?new Up(c,"segment","manifest"):null,e.g=d,d=c.objectStoreNames,d=d.contains("manifest-v2")&&d.contains("segment-v2")?new ey(c,"segment-v2","manifest-v2"):null,e.h=d,d=c.objectStoreNames,d=d.contains("manifest-v3")&&d.contains("segment-v3")?new ey(c,"segment-v3","manifest-v3"):null,e.i=d,d=c.objectStoreNames,d=d.contains("manifest-v5")&&d.contains("segment-v5")?new S1(c,"segment-v5","manifest-v5"):null,e.j=d,c=c.objectStoreNames.contains("session-ids")?new kp(c):null,e.m=c,i.stop(),t.resolve()}},u.onupgradeneeded=function(){for(var c=u.result,d=m(["segment-v5","manifest-v5","session-ids"]),h=d.next();!h.done;h=d.next())h=h.value,c.objectStoreNames.contains(h)||c.createObjectStore(h,{autoIncrement:!0})},u.onerror=function(c){n||(t.reject(new pt(2,9,9001,u.error)),i.stop(),c.preventDefault())},t},g.destroy=function(){var e=this;return Oe(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return N(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return N(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return N(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return N(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return N(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),$(t)}})},g.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},g.getEmeSessionCell=function(){return this.m},g.erase=function(){var e=this;return Oe(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return N(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return N(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return N(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return N(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),N(t,OZ(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,N(t,e.init(),0)}})};function OZ(){var e=new Rr,t=p.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new pt(2,9,9001,t.error)),n.preventDefault()},e}qM("idb",function(){return sa()||vs()||!p.indexedDB?null:new KM});function wu(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}wu.prototype.fb=function(){return this.i},wu.prototype.Ba=function(){return this.h},wu.prototype.key=function(){return this.l},wu.prototype.toString=function(){return this.j};function w1(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var i=e[3];return i&&t!=null?new wu(t,n,i,Number(e[4])):null}function VM(e,t){this.h=e,this.g=t}function zM(e,t){var n=new tr(null,0);n.Za(t.duration);var i=t.streams.filter(function(A){return A.type=="audio"}),u=t.streams.filter(function(A){return A.type=="video"});i=LZ(e,i,u,n),u=t.streams.filter(function(A){return A.type==vr}).map(function(A){return ty(e,A,n)});var c=t.streams.filter(function(A){return A.type=="image"}).map(function(A){return ty(e,A,n)}),d=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var h=m(i.values()),E=h.next();!E.done;E=h.next())E=E.value,E.audio&&E.audio.encrypted&&(E.audio.drmInfos=d),E.video&&E.video.encrypted&&(E.video.drmInfos=d);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:u,imageStreams:c,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function LZ(e,t,n,i){for(var u=new Set,c=m(t),d=c.next();!d.done;d=c.next()){var h=m(d.value.variantIds);for(d=h.next();!d.done;d=h.next())u.add(d.value)}for(c=m(n),d=c.next();!d.done;d=c.next())for(h=m(d.value.variantIds),d=h.next();!d.done;d=h.next())u.add(d.value);for(c=new Map,u=m(u),d=u.next();!d.done;d=u.next())d=d.value,c.set(d,{id:d,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),u=t.next();!u.done;u=t.next())for(u=u.value,d=ty(e,u,i),h=m(u.variantIds),u=h.next();!u.done;u=h.next())u=c.get(u.value),u.language=d.language,u.primary=u.primary||d.primary,u.audio=d;for(n=m(n),t=n.next();!t.done;t=n.next())for(u=t.value,t=ty(e,u,i),d=m(u.variantIds),u=d.next();!u.done;u=d.next())u=c.get(u.value),u.primary=u.primary||t.primary,u.video=t;return c}function ty(e,t,n){var i=t.segments.map(function(u){return kZ(e,u,t)});return n.ld(i),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Si(t.mimeType,t.codecs)])}}function kZ(e,t,n){var i=new wu("segment",e.h,e.g,t.dataKey);return e=new Je(t.startTime,t.endTime,function(){return[i.toString()]},0,null,t.initSegmentKey!=null?FZ(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function FZ(e,t){var n=new wu("segment",e.h,e.g,t);return new dt(function(){return[n.toString()]},0,null)}function YM(){this.g=null}g=YM.prototype,g.configure=function(){},g.start=function(e,t){var n=this,i,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:if(i=w1(e),n.g=i,i==null||i.g!="manifest")throw new pt(2,1,9004,e);return u=new zo,oe(k,2),N(k,u.init(),4);case 4:return N(k,Jv(u,i.fb(),i.Ba()),5);case 5:return c=k.h,N(k,c.getManifests([i.key()]),6);case 6:return d=k.h,h=d[0],E=new VM(i.fb(),i.Ba()),A=zM(E,h),t.makeTextStreamsForClosedCaptions(A),k.return(A);case 2:return Xe(k),N(k,u.destroy(),7);case 7:Ae(k,0)}})},g.stop=function(){return Promise.resolve()},g.update=function(){},g.onExpirationUpdated=function(e,t){var n=this,i,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:return i=n.g,u=new zo,fe(k,2,3),N(k,u.init(),5);case 5:return N(k,Jv(u,i.fb(),i.Ba()),6);case 6:return c=k.h,N(k,c.getManifests([i.key()]),7);case 7:if(d=k.h,h=d[0],E=h.sessionIds.includes(e),A=h.expiration==null||h.expiration>t,!E||!A){k.u(3);break}return N(k,c.updateManifestExpiration(i.key(),t),3);case 3:return Xe(k),N(k,u.destroy(),10);case 10:Ae(k,0);break;case 2:Ie(k),k.u(3)}})},g.onInitialVariantChosen=function(){},g.banLocation=function(){},ke["application/x-offline-manifest"]=function(){return new YM};function WM(){}function $M(e){var t=w1(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Wu(e)):e=t&&t.g=="segment"?UZ(t.key(),t):gu(new pt(2,1,9004,e)),e}function UZ(e,t){var n=new zo;return Wu(void 0).va(function(){return n.init()}).va(function(){return Jv(n,t.fb(),t.Ba())}).va(function(i){return i.getSegments([t.key()])}).va(function(i){return{uri:t,data:i[0].data,headers:{}}}).finally(function(){return n.destroy()})}te("shaka.offline.OfflineScheme",WM),WM.plugin=$M,Ko("offline",$M);function XM(e,t,n){var i,u,c,d,h,E;return Oe(function(A){switch(A.g){case 1:i=[];for(var k=[],G=m(n),ne=G.next();!ne.done;ne=G.next()){ne=ne.value;for(var Y=!1,ve=m(k),Pe=ve.next();!Pe.done;Pe=ve.next())if(Pe=Pe.value,jZ(Pe.info,ne)){Pe.sessionIds.push(ne.sessionId),Y=!0;break}Y||k.push({info:ne,sessionIds:[ne.sessionId]})}u=m(k),c=u.next();case 2:if(c.done){A.u(4);break}return d=c.value,h=BZ(e,t,d),N(A,h,5);case 5:E=A.h,i=i.concat(E),c=u.next(),A.u(2);break;case 4:return A.return(i)}})}function BZ(e,t,n){var i,u;return Oe(function(c){switch(c.g){case 1:return i=new Fc({zb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),fe(c,2),i.configure(e),N(c,jm(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:he(c,3);break;case 2:return Ie(c),N(c,i.destroy(),5);case 5:return c.return([]);case 3:return u=[],N(c,Promise.all(n.sessionIds.map(function(d){return Oe(function(h){if(h.g==1)return fe(h,2),N(h,GE(i,d),4);if(h.g!=2)return u.push(d),he(h,0);Ie(h),$(h)})})),6);case 6:return N(c,i.destroy(),7);case 7:return c.return(u)}})}function jZ(e,t){function n(i,u){return i.robustness==u.robustness&&i.contentType==u.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&In(e.audioCapabilities,t.audioCapabilities,n)&&In(e.videoCapabilities,t.videoCapabilities,n)}function ZZ(e,t,n){var i=t.presentationTimeline.getDuration();return t=QM(t),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function A1(e,t){var n=zM(new VM(e.fb(),e.Ba()),t),i=t.appMetadata||{};return n=QM(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function QM(e){var t=[],n=Zf(e.variants);n=m(n);for(var i=n.next();!i.done;i=n.next())t.push(Ml(i.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Dl(n.value));return t}function GZ(){this.g={}}function qZ(e,t){var n=t.audio,i=t.video;if(n&&!i&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&i&&(e.g[i.id]=i.bandwidth||t.bandwidth),n&&i){var u=n.bandwidth||393216,c=i.bandwidth||t.bandwidth-u;0>=c&&(c=t.bandwidth),e.g[n.id]=u,e.g[i.id]=c}}function HZ(e,t){e.g[t.id]=t.bandwidth||2048}function JM(e,t){return e=e.g[t],e==null&&(e=0),e}function ao(e){var t=this;if(e&&e.constructor!=dn)throw new pt(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.Zb()):(this.h=od(),this.g=new Kr),this.i=[],this.j=[];var n=!e;this.l=new $u(function(){var i,u,c,d,h;return Oe(function(E){switch(E.g){case 1:return N(E,Promise.all(t.j.map(function(A){return E1(A)})),2);case 2:for(i=function(){},u=[],c=m(t.i),d=c.next();!d.done;d=c.next())h=d.value,u.push(h.then(i,i));return N(E,Promise.all(u),3);case 3:if(!n){E.u(4);break}return N(E,t.g.destroy(),4);case 4:t.h=null,t.g=null,$(E)}})})}function I1(){if(bo())e:{for(var e=m(Fp.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}g=ao.prototype,g.destroy=function(){return this.l.destroy()},g.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Qm(e,t)),Gc(this.h,e)},g.getConfiguration=function(){var e=od();return Gc(e,this.h,od()),e},g.Zb=function(){return this.g},g.store=function(e,t,n){var i=this,u=this.getConfiguration(),c=new UM(this.g);return this.j.push(c),t=KZ(this,e,t||{},function(){var d;return Oe(function(h){return h.g==1?n?h.u(2):N(h,h_(e,i.g,u.manifest.retryParameters),3):(h.g!=2&&(n=h.h),d=be(e,n||null),h.return(d()))})},u,c),t=new pi(t,function(){return E1(c)}),t.finally(function(){mn(i.j,c)}),iG(this,t)};function KZ(e,t,n,i,u,c){var d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:return ny(),h=d=null,E=new zo,G=k=A=null,fe(Ue,2,3),N(Ue,i(),5);case 5:return d=Ue.h,N(Ue,eG(e,t,d,u),6);case 6:if(ne=Ue.h,yo(e),Y=!ne.presentationTimeline.R()&&!ne.presentationTimeline.dc(),!Y)throw new pt(2,9,9005,t);return N(Ue,e.rc(ne,function(mt){G=G||mt},u),7);case 7:if(h=Ue.h,yo(e),G)throw G;return N(Ue,zZ(ne,h,u),8);case 8:return N(Ue,E.init(),9);case 9:return yo(e),N(Ue,GM(E),10);case 10:return A=Ue.h,yo(e),ve=YZ(h,ne,t,n,u,c),Pe=ve.Sh,xe=ve.Hf,N(Ue,A.Ba.addManifests([Pe]),11);case 11:if(Ge=Ue.h,yo(e),k=Ge[0],yo(e),G)throw G;return N(Ue,VZ(e,xe,k,Pe,c,u,A.Ba,ne,h),12);case 12:return yo(e),r2(ne,Pe,h,u),N(Ue,A.Ba.updateManifest(k,Pe),13);case 13:return yo(e),Te=new wu("manifest",A.path.fb,A.path.Ba,k),Ue.return(A1(Te,Pe));case 3:return Xe(Ue),N(Ue,E.destroy(),14);case 14:if(!d){Ue.u(15);break}return N(Ue,d.stop(),15);case 15:if(!h){Ue.u(17);break}return N(Ue,h.destroy(),17);case 17:Ae(Ue,0);break;case 2:if(We=Ie(Ue),k==null){Ue.u(19);break}return N(Ue,e2(k),19);case 19:throw G||We}})}function VZ(e,t,n,i,u,c,d,h,E){var A,k,G,ne,Y,ve,Pe,xe,Ge,Te;return Oe(function(We){switch(We.g){case 1:if(A={},k=0,G=function(Ue,mt){var Rt,Ht,Ut,Et,jt,ln,gn;return Oe(function(Ln){if(Ln.g==1){for(Rt={},Ht=m(Ue),Ut=Ht.next();!Ut.done;Rt={Ob:Rt.Ob},Ut=Ht.next())Rt.Ob=Ut.value,Et=_Z(Rt.Ob,c),jt=Rt.Ob.i,ln=Rt.Ob.h,gn=function(Mn){return function(qn){var Yn,Kn,xr;return Oe(function(fi){if(fi.g==1)return N(fi,d.addSegments([{data:qn}]),2);Yn=fi.h,yo(e),Kn=Mn.Ob.g,xr=y1(Kn),A[xr]=Yn[0],k+=qn.byteLength,$(fi)})}}(Rt),SZ(u,Rt.Ob.groupId,Et,jt,ln,gn);return N(Ln,wZ(u),2)}return mt?(yo(e),r2(h,i,E,c),N(Ln,d.updateManifest(n,i),0)):Ln.u(0)})},ne=!1,fe(We,2),!b1(h)||!ne||n2(h)){We.u(4);break}return N(We,G(t.filter(function(Ue){return Ue.h}),!0),5);case 5:return yo(e),t=t.filter(function(Ue){return!Ue.h}),Y=A,ve=k,A={},k=0,N(We,t2(d,n,i,Y,ve,function(){return yo(e)}),6);case 6:yo(e);case 4:if(ne){We.u(7);break}return N(We,G(t,!1),8);case 8:return yo(e),Pe=A,xe=k,A={},k=0,N(We,t2(d,n,i,Pe,xe,function(){return yo(e)}),9);case 9:yo(e);case 7:he(We,0);break;case 2:return Ge=Ie(We),Te=Object.values(A),N(We,d.removeSegments(Te,function(){}),10);case 10:throw Ge}})}function e2(e){var t,n,i,u;return Oe(function(c){switch(c.g){case 1:return t=new zo,N(c,t.init(),2);case 2:return N(c,GM(t),3);case 3:return n=c.h,i=new wu("manifest",n.path.fb,n.path.Ba,e),N(c,t.destroy(),4);case 4:return u=new ao,N(c,u.remove(i.toString()),0)}})}function t2(e,t,n,i,u,c){var d,h,E,A,k,G,ne,Y,ve,Pe,xe;return Oe(function(Ge){switch(Ge.g){case 1:for(d=!1,fe(Ge,2),h=!0,E=m(n.streams),A=E.next();!A.done;A=E.next())for(k=A.value,G=m(k.segments),ne=G.next();!ne.done;ne=G.next())Y=ne.value,ve=Y.pendingSegmentRefId?i[Y.pendingSegmentRefId]:null,ve!=null&&(Y.dataKey=ve,Y.pendingSegmentRefId=void 0),ve=Y.pendingInitSegmentRefId?i[Y.pendingInitSegmentRefId]:null,ve!=null&&(Y.initSegmentKey=ve,Y.pendingInitSegmentRefId=void 0),Y.pendingSegmentRefId&&(h=!1),Y.pendingInitSegmentRefId&&(h=!1);return n.size+=u,h&&(n.isIncomplete=!1),N(Ge,e.updateManifest(t,n),4);case 4:d=!0,c(),he(Ge,0);break;case 2:return Pe=Ie(Ge),N(Ge,e2(t),5);case 5:if(d){Ge.u(6);break}return xe=Object.values(i),N(Ge,e.removeSegments(xe,function(){}),6);case 6:throw Pe}})}function zZ(e,t,n){var i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We,Ue,mt,Rt,Ht,Ut,Et,jt,ln,gn,Ln,Mn;return Oe(function(qn){switch(qn.g){case 1:return i={width:1/0,height:1/0},Lh(e,n.restrictions,i),N(qn,ym(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(u=[],c=n.preferredDecodingAttributes,d=n.preferredVideoCodecs,h=n.preferredAudioCodecs,mm(e,d,h,c),E=m(e.variants),A=E.next();!A.done;A=E.next())k=A.value,u.push(Ml(k));for(G=m(e.textStreams),ne=G.next();!ne.done;ne=G.next())Y=ne.value,u.push(Dl(Y));for(ve=m(e.imageStreams),Pe=ve.next();!Pe.done;Pe=ve.next())xe=Pe.value,u.push(Vu(xe));return N(qn,n.offline.trackSelectionCallback(u),3);case 3:for(Ge=qn.h,Te=e.presentationTimeline.getDuration(),We=0,Ue=m(Ge),mt=Ue.next();!mt.done;mt=Ue.next())Rt=mt.value,Ht=Rt.bandwidth*Te/8,We+=Ht;return fe(qn,4),N(qn,n.offline.downloadSizeCallback(We),6);case 6:if(Ut=qn.h,!Ut)throw new pt(2,9,9014);he(qn,5);break;case 4:throw Et=Ie(qn),Et instanceof pt?Et:new pt(2,9,9015);case 5:for(jt=new Set,ln=new Set,gn=new Set,Ln=m(Ge),mt=Ln.next();!mt.done;mt=Ln.next())Mn=mt.value,Mn.type=="variant"&&jt.add(Mn.id),Mn.type=="text"&&ln.add(Mn.id),Mn.type=="image"&&gn.add(Mn.id);e.variants=e.variants.filter(function(Yn){return jt.has(Yn.id)}),e.textStreams=e.textStreams.filter(function(Yn){return ln.has(Yn.id)}),e.imageStreams=e.imageStreams.filter(function(Yn){return gn.has(Yn.id)}),sG(e),$(qn)}})}function YZ(e,t,n,i,u,c){var d=ZZ(n,t,i),h=u.offline.progressCallback;TZ(c,function(Y,ve){d.size=ve,h(d,Y)},function(Y,ve){E&&u.offline.usePersistentLicense&&A==ve&&jl(e,"cenc",Y)});var E=b1(t)&&!n2(t),A=null;E&&(A=uG.get(e.g.keySystem));for(var k=new GZ,G=m(t.textStreams),ne=G.next();!ne.done;ne=G.next())k.g[ne.value.id]=52;for(G=m(t.imageStreams),ne=G.next();!ne.done;ne=G.next())HZ(k,ne.value);for(ne=m(t.variants),G=ne.next();!G.done;G=ne.next())qZ(k,G.value);return k=tG(c,k,t,u),c=k.streams,k=k.Hf,ne=e.g,G=u.offline.usePersistentLicense,ne&&G&&(ne.initData=[]),{Sh:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.cd(),streams:c,sessionIds:G?rp(e):[],drmInfo:ne,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Hf:k}}function b1(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function n2(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function r2(e,t,n,i){if(t.expiration=n.cd(),n=rp(n),t.sessionIds=i.offline.usePersistentLicense?n:[],b1(e)&&i.offline.usePersistentLicense&&!n.length)throw new pt(2,9,9007)}g.remove=function(e){return C1(this,WZ(this,e))};function WZ(e,t){var n,i,u,c,d,h;return Oe(function(E){switch(E.g){case 1:if(ny(),n=w1(t),n==null||n.g!="manifest")throw new pt(2,9,9004,t);return i=n,u=new zo,oe(E,2),N(E,u.init(),4);case 4:return N(E,Jv(u,i.fb(),i.Ba()),5);case 5:return c=E.h,N(E,c.getManifests([i.key()]),6);case 6:return d=E.h,h=d[0],N(E,Promise.all([$Z(e,h,u),XZ(c,i,h)]),2);case 2:return Xe(E),N(E,u.destroy(),8);case 8:Ae(E,0)}})}function i2(e,t){for(var n=[],i=m(e.streams),u=i.next();!u.done;u=i.next())u=u.value,t&&u.type=="video"?n.push({contentType:Si(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):t||u.type!="audio"||n.push({contentType:Si(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return n}function $Z(e,t,n){return Oe(function(i){return N(i,aG(e.g,e.h.drm,n,t),0)})}function XZ(e,t,n){function i(){}var u=oG(n);return A1(t,n),Promise.all([e.removeSegments(u,i),e.removeManifests([t.key()],i)])}g.ji=function(){return C1(this,QZ(this))};function QZ(e){var t,n,i,u,c,d,h,E,A,k;return Oe(function(G){switch(G.g){case 1:return ny(),t=e.g,n=e.h.drm,i=new zo,u=!1,oe(G,2),N(G,i.init(),4);case 4:c=[],CZ(i,function(ne){return c.push(ne)}),d=m(c),h=d.next();case 5:if(h.done){G.u(2);break}return E=h.value,N(G,E.getAll(),8);case 8:return A=G.h,N(G,XM(n,t,A),9);case 9:return k=G.h,N(G,E.remove(k),10);case 10:k.length!=A.length&&(u=!0),h=d.next(),G.u(5);break;case 2:return Xe(G),N(G,i.destroy(),11);case 11:Ae(G,3);break;case 3:return G.return(!u)}})}g.list=function(){return C1(this,JZ())};function JZ(){var e,t,n;return Oe(function(i){switch(i.g){case 1:return ny(),e=[],t=new zo,oe(i,2),N(i,t.init(),4);case 4:return n=Promise.resolve(),bZ(t,function(u,c){n=n.then(function(){var d;return Oe(function(h){if(h.g==1)return N(h,c.getAllManifests(),2);d=h.h,d.forEach(function(E,A){E=A1(new wu("manifest",u.fb,u.Ba,A),E),e.push(E)}),$(h)})})}),N(i,n,2);case 2:return Xe(i),N(i,t.destroy(),6);case 6:Ae(i,3);break;case 3:return i.return(e)}})}function eG(e,t,n,i){var u,c,d,h,E;return Oe(function(A){if(A.g==1)return u=null,c=e.g,d={networkingEngine:c,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(k){u=k},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return i.abr.defaultBandwidthEstimate}},n.configure(i.manifest),yo(e),N(A,n.start(t,d),2);if(A.g!=3)return h=A.h,yo(e),E=o2(h),N(A,Promise.all(Vf(E,function(k){return k.createSegmentIndex()})),3);if(yo(e),u)throw u;return A.return(h)})}g.rc=function(e,t,n){var i=this,u;return Oe(function(c){return c.g==1?(u=new Fc({zb:i.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),u.configure(n.drm),N(c,Um(u,e.variants,n.offline.usePersistentLicense),2)):c.g!=3?N(c,np(u),3):c.return(u)})};function tG(e,t,n,i){var u=new Map,c=o2(n),d=new Map;c=m(c);for(var h=c.next();!h.done;h=c.next()){h=h.value;var E=nG(e,t,n,h,i,u);d.set(h.id,E)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&d.get(t.audio.id).variantIds.push(t.id),t.video&&d.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(d.values()),Hf:Array.from(u.values())}}function nG(e,t,n,i,u,c){var d={id:i.id,originalId:i.originalId,groupId:i.groupId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,videoLayout:i.videoLayout,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,external:i.external,fastSwitching:i.fastSwitching},h=u.offline.numberOfParallelDownloads,E=0;return rG(i,n.presentationTimeline.qb(),function(A){var k=y1(A),G=void 0;if(!c.has(k)){var ne=A.endTime-A.startTime;ne=JM(t,i.id)*ne,ne=FM(e.g,ne),c.set(k,new LM(A,ne,E,!1))}A.ca&&(G=y1(A.ca),c.has(G)||(ne=.5*JM(t,i.id),ne=FM(e.g,ne),c.set(G,new LM(A.ca,ne,E,!0)))),d.segments.push({pendingInitSegmentRefId:G,initSegmentKey:G?0:null,startTime:A.startTime,endTime:A.endTime,appendWindowStart:A.appendWindowStart,appendWindowEnd:A.appendWindowEnd,timestampOffset:A.timestampOffset,tilesLayout:A.tilesLayout,pendingSegmentRefId:k,dataKey:0,mimeType:A.mimeType,codecs:A.codecs}),E=(E+1)%h}),d}function rG(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}function yo(e){if(e.l.g)throw new pt(2,9,7001)}function ny(){if(!I1())throw new pt(2,9,9e3)}function C1(e,t){return Oe(function(n){return n.g==1?(e.i.push(t),oe(n,2),N(n,t,4)):n.g!=2?n.return(n.h):(Xe(n),mn(e.i,t),Ae(n,0))})}function iG(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){mn(e.i,n)})}function oG(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,i.initSegmentKey!=null&&t.add(i.initSegmentKey),t.add(i.dataKey)}return Array.from(t)}function aG(e,t,n,i){var u,c,d;return Oe(function(h){return h.g==1?i.drmInfo?(u=RZ(n),c=i.sessionIds.map(function(E){return{sessionId:E,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:i2(i,!1),videoCapabilities:i2(i,!0)}}),N(h,XM(t,e,c),2)):h.return():h.g!=3?(d=h.h,N(h,u.remove(d),3)):N(h,u.add(c.filter(function(E){return!d.includes(E.sessionId)})),0)})}function o2(e){for(var t=new Set,n=m(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(n=m(e.imageStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=m(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function sG(e){e.variants.map(function(c){return c.video});var t=new Set(e.variants.map(function(c){return c.audio}));e=e.textStreams;for(var n=m(t),i=n.next();!i.done;i=n.next()){i=m(t);for(var u=i.next();!u.done;u=i.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),i=n.next();!i.done;i=n.next());}te("shaka.offline.Storage",ao),ao.deleteAll=function(){var e;return Oe(function(t){return t.g==1?(e=new zo,oe(t,2),N(t,NZ(e),2)):t.g!=5?(Xe(t),N(t,e.destroy(),5)):Ae(t,0)})},ao.prototype.list=ao.prototype.list,ao.prototype.removeEmeSessions=ao.prototype.ji,ao.prototype.remove=ao.prototype.remove,ao.prototype.store=ao.prototype.store,ao.prototype.getNetworkingEngine=ao.prototype.Zb,ao.prototype.getConfiguration=ao.prototype.getConfiguration,ao.prototype.configure=ao.prototype.configure,ao.prototype.destroy=ao.prototype.destroy,ao.support=I1;var uG=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");N_.offline=I1;function Eo(){}function Yo(e,t){for(e={priority:t||0,callback:e},t=0;t<Bp.length;t++)if(Bp[t].priority<e.priority){Bp.splice(t,0,e);return}Bp.push(e)}te("shaka.polyfill",Eo),Eo.register=Yo,Eo.installAll=function(){for(var e=m(Bp),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){He("Error installing polyfill!",n)}}};var Bp=[];function jp(){this.g=new ry}function a2(){p.AbortController||(p.AbortController=jp,p.AbortSignal=ry)}jp.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Wn("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},y.Object.defineProperties(jp.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Eo.AbortController=jp,jp.install=a2;function ry(){Sr.call(this),this.h=!1,this.g=void 0,this.onabort=null}z(ry,Sr),y.Object.defineProperties(ry.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Yo(a2);function s2(){}function u2(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=m(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())lG(t.value)}function lG(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}Eo.Aria=s2,s2.install=u2,Yo(u2);function l2(){}function c2(){bD()}Eo.EncryptionScheme=l2,l2.install=c2,Yo(c2,-2);function f2(){}function d2(){if(p.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",xd),document.addEventListener("webkitfullscreenerror",xd),document.addEventListener("mozfullscreenchange",xd),document.addEventListener("mozfullscreenerror",xd),document.addEventListener("MSFullscreenChange",xd),document.addEventListener("MSFullscreenError",xd)}}function xd(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}Eo.Fullscreen=f2,f2.install=d2,Yo(d2);function Zp(){}function h2(){var e=!0;(ys()||_c()||Nr()||aa()||Ha()||sa()||Yr("PC=EOS")||Es())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),p2=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=cG)}function cG(e){var t,n,i,u,c,d,h,E,A,k,G,ne,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return Ue.return(t);if(n=e.video,i=e.audio,e.type=="media-source"){if(!bo())return Ue.return(t);if(n){if(sa())if(p.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var mt=n.contentType;if(n.width&&n.height&&(mt+="; width="+n.width+"; height="+n.height),n.framerate&&(mt+="; framerate="+n.framerate),n.transferFunction==="pq"&&(mt+="; eotf=smpte2084"),mt in oy)var Rt=oy[mt];else Rt=cast.__platform__.canDisplayType(mt),oy[mt]=Rt;u=Rt}else u=Pt(n.contentType);else Ha()?(c=n.contentType,n.width&&n.height&&(c+="; width="+n.width,c+="; height="+n.height),n.framerate&&(c+="; framerate="+n.framerate),n.bitrate&&(c+="; bitrate="+n.bitrate),u=Pt(c)):u=Pt(n.contentType);if(!u)return Ue.return(t)}if(i&&(sa()&&i.spatialRendering?(h=i.contentType+"; spatialRendering=true",d=Pt(h)):d=Pt(i.contentType),!d))return Ue.return(t)}else if(e.type=="file"){if(n&&(E=n.contentType,A=cu(E),!A)||i&&(k=i.contentType,G=cu(k),!G))return Ue.return(t)}else return Ue.return(t);if(!e.keySystemConfiguration)return t.supported=!0,Ue.return(Promise.resolve(t));if(ne=e.keySystemConfiguration,Y=[],ve=[],ne.audio&&(Pe={robustness:ne.audio.robustness||"",contentType:e.audio.contentType},Ha()&&e.audio.contentType.includes('codecs="ac-3"')&&(Pe={robustness:Pe.robustness,contentType:'audio/mp4; codecs="ec-3"'}),ne.audio.encryptionScheme&&(Pe={robustness:Pe.robustness,contentType:Pe.contentType,encryptionScheme:ne.audio.encryptionScheme}),Y.push(Pe)),ne.video&&(xe={robustness:ne.video.robustness||"",contentType:e.video.contentType},ne.video.encryptionScheme&&(xe={robustness:xe.robustness,contentType:xe.contentType,encryptionScheme:ne.video.encryptionScheme}),ve.push(xe)),Ge={initDataTypes:[ne.initDataType],distinctiveIdentifier:ne.distinctiveIdentifier,persistentState:ne.persistentState,sessionTypes:ne.sessionTypes},Y.length&&(Ge.audioCapabilities=Y),ve.length&&(Ge.videoCapabilities=ve),Te=(e.video?e.video.contentType:"")+"#"+(e.audio?e.audio.contentType:"")+"#"+e.keySystemConfiguration.keySystem,fe(Ue,3),Te in iy){We=iy[Te],Ue.u(5);break}return N(Ue,navigator.requestMediaKeySystemAccess(ne.keySystem,[Ge]),6);case 6:We=Ue.h,iy[Te]=We;case 5:he(Ue,4);break;case 3:Ie(Ue);case 4:We&&(t.supported=!0,t.keySystemAccess=We);case 2:return Ue.return(t)}})}Eo.MediaCapabilities=Zp,Zp.install=h2;var p2=null;Zp.originalMcap=p2;var iy={};Zp.memoizedMediaKeySystemAccessRequests_=iy;var oy={};Zp.memoizedCanDisplayTypeRequests_=oy,Yo(h2,-1);function g2(){}function m2(){var e=_s();(p.MediaSource||p.ManagedMediaSource)&&(e?10>=e?p.MediaSource=null:12>=e?(v2(),fG()):15>=e&&v2():(ku()||Lu()||Yr("Tizen 4"))&&hG()),(p.MediaSource||p.ManagedMediaSource)&&dG(),p.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&pG()}function v2(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Qe.apply(0,arguments));return t.abort=function(){},t}}function fG(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function dG(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Pf(n)!="mp2t"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return Pf(n)!="mp2t"&&t(n)}}}function hG(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Ya(n)!="opus"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return Ya(n)!="opus"&&t(n)}}}function pG(){var e=MediaSource.isTypeSupported;aa()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex(function(d){return d.startsWith("codecs=")});if(0>i)return e(t);var u=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),c=u.findIndex(function(d){return d.startsWith("vp09")});return 0<=c&&(u[c]="vp9",n[i]='codecs="'+u.join(",")+'"',t=n.join("; ")),e(t)})}Eo.MediaSource=g2,g2.install=m2,Yo(m2);function y2(){}function E2(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?gG():p.orientation!=null&&mG())}function gG(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function mG(){function e(){switch(p.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new ay;screen.orientation=t,e(),p.addEventListener("orientationchange",function(){e();var n=new Wn("change");t.dispatchEvent(n)})}Eo.Orientation=y2,y2.install=E2;function ay(){Sr.call(this),this.type="",this.angle=0}z(ay,Sr),ay.prototype.lock=function(e){function t(i){return screen.lockOrientation?screen.lockOrientation(i):screen.mozLockOrientation?screen.mozLockOrientation(i):screen.msLockOrientation?screen.msLockOrientation(i):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},ay.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Yo(E2);function R1(){}var N1,x1,M1,D1,P1,O1;function vG(e,t){try{var n=new sy(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function yG(e){var t=this.mediaKeys;return t&&t!=e&&_2(t,null),delete this.mediaKeys,(this.mediaKeys=e)?_2(e,this):Promise.resolve()}function EG(e){if(e=Qn(e.initData),tn(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ka(e.subarray(4),!0),e=za(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Ti(e),this.dispatchEvent(t)}Eo.PatchedMediaKeysApple=R1,R1.uninstall=function(){N1&&(N1=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",x1),HTMLMediaElement.prototype.setMediaKeys=M1,p.MediaKeys=D1,p.MediaKeySystemAccess=P1,navigator.requestMediaKeySystemAccess=O1,x1=O1=M1=P1=D1=null,p.shakaMediaKeysPolyfill=!1)},R1.install=function(e){p.HTMLVideoElement&&p.WebKitMediaKeys&&(e!==void 0&&e&&(N1=!0,x1=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),M1=HTMLMediaElement.prototype.setMediaKeys,D1=p.MediaKeys,P1=p.MediaKeySystemAccess,O1=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=yG,p.MediaKeys=Gp,p.MediaKeySystemAccess=sy,navigator.requestMediaKeySystemAccess=vG,p.shakaMediaKeysPolyfill=!0)};function sy(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,u=!1;if(n.audioCapabilities)for(var c=m(n.audioCapabilities),d=c.next();!d.done;d=c.next())d=d.value,d.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,d.contentType.split(";")[0])&&(t.audioCapabilities.push(d),u=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),d=n.next();!d.done;d=n.next())c=d.value,c.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.videoCapabilities.push(c),u=!0));i||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=u?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}sy.prototype.createMediaKeys=function(){var e=new Gp(this.keySystem);return Promise.resolve(e)},sy.prototype.getConfiguration=function(){return this.g};function Gp(e){this.h=new WebKitMediaKeys(e),this.g=new _t}Gp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new L1(this.h)},Gp.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function _2(e,t){if(e.g.ib(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",EG);try{return nd(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}Gp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function L1(e){Sr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new _t,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new T2}z(L1,Sr),g=L1.prototype,g.generateRequest=function(e,t){var n=this;this.h=new Rr;try{var i=this.l.createSession("video/mp4",Qn(t));this.i=i,this.sessionId=i.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(u){n.h&&(n.h.resolve(),n.h=null),u=new Map().set("messageType",n.keyStatuses.bc()==null?"license-request":"license-renewal").set("message",Ti(u.message)),u=new Wn("message",u),n.dispatchEvent(u)}),this.j.D(i,"webkitkeyadded",function(){n.g&&(uy(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(i,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=n.i.error,n.h!=null)n.h.reject(u),n.h=null;else if(n.g!=null)n.g.reject(u),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:uy(n,"output-not-allowed");break;default:uy(n,"internal-error")}}),uy(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},g.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},g.update=function(e){this.g=new Rr;try{this.i.update(Qn(e))}catch(t){this.g.reject(t)}return this.g},g.close=function(){try{this.i.close(),this.closed.resolve(),this.j.ib()}catch(e){this.closed.reject(e)}return this.closed},g.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function uy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}function T2(){this.size=0,this.g=void 0}g=T2.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,Le.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=Le.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};function S2(){}function w2(){!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=_G,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=TG,p.MediaKeys=ly,p.MediaKeySystemAccess=k1,p.shakaMediaKeysPolyfill=!0)}function _G(){return Promise.reject(Error("The key system specified is not supported."))}function TG(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Eo.PatchedMediaKeysNop=S2,S2.install=w2;function ly(){throw new TypeError("Illegal constructor.")}ly.prototype.createSession=function(){},ly.prototype.setServerCertificate=function(){},ly.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function k1(){throw this.keySystem="",new TypeError("Illegal constructor.")}k1.prototype.getConfiguration=function(){},k1.prototype.createMediaKeys=function(){},Yo(w2,-10);function A2(){}function I2(){if(!(!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Z1="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=SG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=wG,p.MediaKeys=qp,p.MediaKeySystemAccess=cy,p.shakaMediaKeysPolyfill=!0}}function F1(e){var t=Z1;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function SG(e,t){try{var n=new cy(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function wG(e){var t=this.mediaKeys;return t&&t!=e&&b2(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&b2(e,this),Promise.resolve()}Eo.PatchedMediaKeysWebkit=A2,A2.install=I2;function cy(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),t=m(t);for(var c=t.next();!c.done;c=t.next()){c=c.value;var d={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:c.initDataTypes,sessionTypes:["temporary"],label:c.label},h=!1;if(c.audioCapabilities)for(var E=m(c.audioCapabilities),A=E.next();!A.done;A=E.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType.split(";")[0],this.g)&&(d.audioCapabilities.push(A),i=!0));if(c.videoCapabilities)for(E=m(c.videoCapabilities),A=E.next();!A.done;A=E.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType,this.g)&&(d.videoCapabilities.push(A),i=!0));if(h||(i=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),c.persistentState=="required"&&(n?(d.persistentState="required",d.sessionTypes=["persistent-license"]):i=!1),i){this.h=d;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}cy.prototype.createMediaKeys=function(){var e=new qp(this.g);return Promise.resolve(e)},cy.prototype.getConfiguration=function(){return this.h};function qp(e){this.l=e,this.h=null,this.g=new _t,this.i=[],this.j=new Map}function b2(e,t){e.h=t,e.g.ib();var n=Z1;t&&(e.g.D(t,n+"needkey",function(i){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=Ti(i.initData),e.h.dispatchEvent(u)}),e.g.D(t,n+"keymessage",function(i){var u=U1(e,i.sessionId);u&&(i=new Map().set("messageType",u.keyStatuses.bc()==null?"licenserequest":"licenserenewal").set("message",i.message),i=new Wn("message",i),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(i))}),e.g.D(t,n+"keyadded",function(i){(i=U1(e,i.sessionId))&&(fy(i,"usable"),i.g&&i.g.resolve(),i.g=null)}),e.g.D(t,n+"keyerror",function(i){var u=U1(e,i.sessionId);if(u){var c=Error("EME v0.1b key error"),d=i.errorCode;d.systemCode=i.systemCode,c.errorCode=d,!i.sessionId&&u.h?(i.systemCode==45&&(c.message="Unsupported session type."),u.h.reject(c),u.h=null):i.sessionId&&u.g?(u.g.reject(c),u.g=null):(c=i.systemCode,i.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?fy(u,"output-restricted"):c==1?fy(u,"expired"):fy(u,"internal-error"))}}))}qp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new B1(t,this.l,e),this.i.push(e),e},qp.prototype.setServerCertificate=function(){return Promise.resolve(!1)},qp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function U1(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function B1(e,t,n){Sr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new R2}z(B1,Sr);function C2(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var i=Qn(za("LOAD_SESSION|"+n));else{var u=za("PERSISTENT|");i=li(u,t)}else i=Qn(t)}catch(d){return Promise.reject(d)}e.h=new Rr;var c=F1("generateKeyRequest");try{e.j[c](e.i,i)}catch(d){if(d.name!="InvalidStateError")return e.h=null,Promise.reject(d);new pr(function(){try{e.j[c](e.i,i)}catch(h){e.h.reject(h),e.h=null}}).X(.01)}return e.h}function j1(e,t,n){if(e.g)e.g.then(function(){return j1(e,t,n)}).catch(function(){return j1(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var i=Vr(n),u=JSON.parse(i);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=Ho(u.keys[0].k),u=Ho(u.keys[0].kid)}else i=Qn(n),u=null;var c=F1("addKey");try{e.j[c](e.i,i,u,e.sessionId)}catch(d){e.g.reject(d),e.g=null}}}function fy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}g=B1.prototype,g.generateRequest=function(e,t){return C2(this,t,null)},g.load=function(e){return this.l=="persistent-license"?C2(this,null,e):Promise.reject(Error("Not a persistent session."))},g.update=function(e){var t=new Rr;return j1(this,t,e),t},g.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=F1("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},g.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function R2(){this.size=0,this.g=void 0}g=R2.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,Le.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=Le.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};var Z1="";Yo(I2);function N2(){}function x2(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=IG,Object.defineProperty(e,"disablePictureInPicture",{get:CG,set:RG,enumerable:!0,configurable:!0}),document.exitPictureInPicture=bG,document.addEventListener("webkitpresentationmodechanged",AG,!0))}}function AG(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function IG(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function bG(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function CG(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function RG(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Eo.PiPWebkit=N2,N2.install=x2,Yo(x2);function M2(){}function D2(){p.crypto&&("randomUUID"in p.crypto||(p.crypto.randomUUID=NG))}function NG(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Eo.RandomUUID=M2,M2.install=D2,Yo(D2);function P2(){}function O2(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:xG})}function xG(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Eo.Symbol=P2,P2.install=O2,Yo(O2);function L2(){}function k2(){if(p.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Eo.VideoPlayPromise=L2,L2.install=k2,Yo(k2);function F2(){}function U2(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||aa()&&fu()===38)&&(e.getVideoPlaybackQuality=MG)}}function MG(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Eo.VideoPlaybackQuality=F2,F2.install=U2,Yo(U2);function B2(){}function j2(){if(!p.VTTCue&&p.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=G1;else if(t==6)e=DG;else{try{var n=!!G1(1,2,"")}catch(i){n=!1}n&&(e=G1)}e&&(p.VTTCue=function(i,u,c){return e(i,u,c)})}}function G1(e,t,n){return new p.TextTrackCue(e,t,n)}function DG(e,t,n){return new p.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Eo.VTTCue=B2,B2.install=j2,Yo(j2);function Ma(){}Ma.prototype.parseInit=function(){},Ma.prototype.setSequenceMode=function(){},Ma.prototype.setManifestType=function(){},Ma.prototype.parseMedia=function(e,t){var n=null,i=[];e=Vr(e).split(/\r?\n/),e=m(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=PG.exec(u))){var c=OG.exec(u[1]);c=60*parseInt(c[1],10)+parseFloat(c[2].replace(",",".")),u=new Cn(c,t.segmentEnd?t.segmentEnd:c+2,u[2]),n&&(n.endTime=c,i.push(n)),n=u}return n&&i.push(n),i},te("shaka.text.LrcTextParser",Ma),Ma.prototype.parseMedia=Ma.prototype.parseMedia,Ma.prototype.setManifestType=Ma.prototype.setManifestType,Ma.prototype.setSequenceMode=Ma.prototype.setSequenceMode,Ma.prototype.parseInit=Ma.prototype.parseInit;var PG=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,OG=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;ji["application/x-subtitle-lrc"]=function(){return new Ma};function ya(){}ya.prototype.parseInit=function(){},ya.prototype.setSequenceMode=function(){},ya.prototype.setManifestType=function(){},ya.prototype.parseMedia=function(e,t,n){var i=Vr(e);if(e=[],i=="")return e;var u=Bl(i,"tt");if(!u)throw new pt(2,2,2005,"Failed to parse TTML.");if(i=Ra(u,"body")[0],!i)return[];var c=fa(u,Hp,"frameRate"),d=fa(u,Hp,"subFrameRate"),h=fa(u,Hp,"frameRateMultiplier"),E=fa(u,Hp,"tickRate"),A=fa(u,Hp,"cellResolution"),k=u.attributes["xml:space"]||"default",G=fa(u,py,"extent");if(k!="default"&&k!="preserve")throw new pt(2,2,2005,"Invalid xml:space value: "+k);k=k=="default",c=new FG(c,d,h,E),A=A&&(A=/^(\d+) (\d+)$/.exec(A))?{Sb:parseInt(A[1],10),rows:parseInt(A[2],10)}:null,d=(d=Ra(u,"metadata")[0])?d.children:[],h=Ra(u,"style"),u=Ra(u,"region"),E=[];for(var ne=m(u),Y=ne.next();!Y.done;Y=ne.next()){var ve=Y.value;Y=new Br;var Pe=ve.attributes["xml:id"];if(Pe){Y.id=Pe;var xe=null;G&&(xe=V1.exec(G)||z1.exec(G)),Pe=xe?Number(xe[1]):null,xe=xe?Number(xe[2]):null;var Ge,Te=dy(ve,h,"extent");if(Te){var We=(Ge=V1.exec(Te))||z1.exec(Te);We!=null&&(Y.width=Number(We[1]),Y.height=Number(We[2]),Ge||(Pe!=null&&(Y.width=100*Y.width/Pe),xe!=null&&(Y.height=100*Y.height/xe)),Y.widthUnits=Ge||Pe!=null?qr:0,Y.heightUnits=Ge||xe!=null?qr:0)}(ve=dy(ve,h,"origin"))&&(We=(Ge=V1.exec(ve))||z1.exec(ve),We!=null&&(Y.viewportAnchorX=Number(We[1]),Y.viewportAnchorY=Number(We[2]),Ge?Te||(Y.width=100-Y.viewportAnchorX,Y.widthUnits=qr,Y.height=100-Y.viewportAnchorY,Y.heightUnits=qr):(xe!=null&&(Y.viewportAnchorY=100*Y.viewportAnchorY/xe),Pe!=null&&(Y.viewportAnchorX=100*Y.viewportAnchorX/Pe)),Y.viewportAnchorUnits=Ge||Pe!=null?qr:0))}else Y=null;Y&&E.push(Y)}if(Wr(i,"p").length)throw new pt(2,2,2001,"<p> can only be inside <div> in TTML");for(G=m(Wr(i,"div")),ne=G.next();!ne.done;ne=G.next())if(Wr(ne.value,"span").length)throw new pt(2,2,2001,"<span> can only be inside <p> in TTML");return(t=Z2(i,t,c,d,h,u,E,k,A,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function Z2(e,t,n,i,u,c,d,h,E,A,k,G){var ne=A;if(Wf(e)){if(!k)return null;var Y={tagName:"span",children:[Ri(e)],attributes:{},parent:null}}else Y=e;for(var ve=null,Pe=m(X2),xe=Pe.next();!xe.done&&!(ve=hy(Y,"backgroundImage",i,"#",xe.value)[0]);xe=Pe.next());Pe=null;var Ge=fa(Y,X2,"backgroundImage");if(G&&Ge&&!Ge.startsWith("#")&&(xe=new si(G),Ge=new si(Ge),(xe=xe.resolve(Ge).toString())&&(Pe=xe)),(e.tagName=="p"||ve||Pe)&&(k=!0),e=k,xe=(Y.attributes["xml:space"]||(h?"default":"preserve"))=="default",Ge=Y.children.every(Wf),h=[],!Ge)for(var Te=m(Y.children),We=Te.next();!We.done;We=Te.next())(We=Z2(We.value,t,n,i,u,c,d,xe,E,Y,k,G))&&h.push(We);if(i=A!=null,G=Ri(Y),G=Y.children.length&&G&&/\S/.test(G),We=Y.attributes.begin||Y.attributes.end||Y.attributes.dur,!(We||G||Y.tagName=="br"||h.length!=0||i&&!xe))return null;for(Te=H2(Y,n),G=Te.start,Te=Te.end;ne&&ne.tagName&&ne.tagName!="tt";)Te=kG(ne,n,G,Te),G=Te.start,Te=Te.end,ne=ne.parent;if(G==null&&(G=0),G+=t.periodStart,Te=Te==null?1/0:Te+t.periodStart,G=Math.max(G,t.segmentStart),Te=Math.min(Te,t.segmentEnd),!We&&0<h.length)for(G=1/0,Te=0,t=m(h),n=t.next();!n.done;n=t.next())n=n.value,G=Math.min(G,n.startTime),Te=Math.max(Te,n.endTime);if(Y.tagName=="br")return u=new Cn(G,Te,""),u.lineBreak=!0,u;if(t="",Ge&&(t=Co(Ri(Y)||""),xe&&(t=t.replace(/\s+/g," "))),t=new Cn(G,Te,t),t.nestedCues=h,k||(t.isContainer=!0),E&&(t.cellResolution=E),E=hy(Y,"region",c,"")[0],Y.attributes.region&&E&&E.attributes["xml:id"]){var Ue=E.attributes["xml:id"];t.region=d.filter(function(mt){return mt.id==Ue})[0]}return d=E,A&&i&&!Y.attributes.region&&!Y.attributes.style&&(d=hy(A,"region",c,"")[0]),LG(t,Y,d,ve,Pe,u,e,h.length==0),t}function LG(e,t,n,i,u,c,d,h){if(d=d||h,_o(t,n,c,"direction",d)=="rtl"&&(e.direction="rtl"),h=_o(t,n,c,"writingMode",d),h=="tb"||h=="tblr"?e.writingMode="vertical-lr":h=="tbrl"?e.writingMode="vertical-rl":h=="rltb"||h=="rl"?e.direction="rtl":h&&(e.direction=Vn),(h=_o(t,n,c,"textAlign",!0))?(e.positionAlign=jG[h],e.lineAlign=BG[h],e.textAlign=er[h.toUpperCase()]):e.textAlign=kn,(h=_o(t,n,c,"displayAlign",!0))&&(e.displayAlign=Ur[h.toUpperCase()]),(h=_o(t,n,c,"color",d))&&(e.color=h),(h=_o(t,n,c,"backgroundColor",d))&&(e.backgroundColor=h),(h=_o(t,n,c,"border",d))&&(e.border=h),h=_o(t,n,c,"fontFamily",d))switch(h){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=h}switch((h=_o(t,n,c,"fontWeight",d))&&h=="bold"&&(e.fontWeight=700),h=_o(t,n,c,"wrapOption",d),e.wrapLine=!(h&&h=="noWrap"),(h=_o(t,n,c,"lineHeight",d))&&h.match(Md)&&(e.lineHeight=h),(h=_o(t,n,c,"fontSize",d))&&(h.match(Md)||h.match(UG))&&(e.fontSize=h),(h=_o(t,n,c,"fontStyle",d))&&(e.fontStyle=no[h.toUpperCase()]),i?(u=i.attributes.imageType||i.attributes.imagetype,h=i.attributes.encoding,i=Ri(i).trim(),u=="PNG"&&h=="Base64"&&i&&(e.backgroundImage="data:image/png;base64,"+i)):u&&(e.backgroundImage=u),(i=_o(t,n,c,"textOutline",d))&&(i=i.split(" "),i[0].match(Md)?e.textStrokeColor=e.color:(e.textStrokeColor=i[0],i.shift()),i[0]&&i[0].match(Md)?e.textStrokeWidth=i[0]:e.textStrokeColor=""),(i=_o(t,n,c,"letterSpacing",d))&&i.match(Md)&&(e.letterSpacing=i),(i=_o(t,n,c,"linePadding",d))&&i.match(Md)&&(e.linePadding=i),(i=_o(t,n,c,"opacity",d))&&(e.opacity=parseFloat(i)),(i=dy(n,c,"textDecoration"))&&G2(e,i),(i=q1(t,c,"textDecoration"))&&G2(e,i),(i=_o(t,n,c,"textCombine",d))&&(e.textCombineUpright=i),_o(t,n,c,"ruby",d)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function G2(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&mn(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&mn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&mn(e.textDecoration,"overline")}}function _o(e,t,n,i,u){return u=u===void 0?!0:u,(e=q1(e,n,i))?e:u?dy(t,n,i):null}function dy(e,t,n){if(!e)return null;var i=fa(e,py,n);return i||q2(e,t,n)}function q1(e,t,n){var i=fa(e,py,n);return i||q2(e,t,n)}function q2(e,t,n){e=hy(e,"style",t,"");for(var i=null,u=0;u<e.length;u++){var c=Eu(e[u],"urn:ebu:tt:style",n);c||(c=fa(e[u],py,n)),c||(c=q1(e[u],t,n)),c&&(i=c)}return i}function hy(e,t,n,i,u){var c=[];if(!e||1>n.length)return c;var d=e;for(e=null;!e&&!(e=u?Eu(d,u,t):d.attributes[t])&&(d=d.parent,d););if(t=e){for(t=m(t.split(" ")),u=t.next();!u.done;u=t.next())for(u=u.value,e=m(n),d=e.next();!d.done;d=e.next())if(d=d.value,i+d.attributes["xml:id"]==u){c.push(d);break}}return c}function kG(e,t,n,i){return e=H2(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),i==null?i=e.end:e.start!=null&&(i+=e.start),{start:n,end:i}}function H2(e,t){var n=H1(e.attributes.begin,t),i=H1(e.attributes.end,t);return e=H1(e.attributes.dur,t),i==null&&e!=null&&(i=n+e),{start:n,end:i}}function H1(e,t){var n=null;if(K2.test(e)){e=K2.exec(e),n=Number(e[1]);var i=Number(e[2]),u=Number(e[3]),c=Number(e[4]);c+=(Number(e[5])||0)/t.h,u+=c/t.frameRate,n=u+60*i+3600*n}else if(V2.test(e))n=K1(V2,e);else if(z2.test(e))n=K1(z2,e);else if(Y2.test(e))e=Y2.exec(e),n=Number(e[1])/t.frameRate;else if(W2.test(e))e=W2.exec(e),n=Number(e[1])/t.g;else if($2.test(e))n=K1($2,e);else if(e)throw new pt(2,2,2001,"Could not parse cue time range in TTML");return n}function K1(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}te("shaka.text.TtmlTextParser",ya),ya.prototype.parseMedia=ya.prototype.parseMedia,ya.prototype.setManifestType=ya.prototype.setManifestType,ya.prototype.setSequenceMode=ya.prototype.setSequenceMode,ya.prototype.parseInit=ya.prototype.parseInit;function FG(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var V1=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,UG=/^(\d{1,2}(?:\.\d+)?|100)%$/,Md=/^(\d+px|\d+em|\d*\.?\d+c)$/,z1=/^(\d+)px (\d+)px$/,K2=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,V2=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,z2=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Y2=/^(\d*(?:\.\d*)?)f$/,W2=/^(\d*(?:\.\d*)?)t$/,$2=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),BG={left:bn,center:"center",right:"end",start:bn,end:"end"},jG={left:"line-left",center:"center",right:"line-right"},Hp=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],py=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],X2=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];ji["application/ttml+xml"]=function(){return new ya};function ko(){this.g=new ya}ko.prototype.parseInit=function(e){var t=!1;if(new kr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",vu).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new pt(2,2,2007)},ko.prototype.setSequenceMode=function(){},ko.prototype.setManifestType=function(){},ko.prototype.parseMedia=function(e,t,n){var i=this,u=!1,c=[];if(new kr().box("mdat",Xu(function(d){u=!0,c=c.concat(i.g.parseMedia(d,t,n))})).parse(e,!1),!u)throw new pt(2,2,2007);return c},te("shaka.text.Mp4TtmlParser",ko),ko.prototype.parseMedia=ko.prototype.parseMedia,ko.prototype.setManifestType=ko.prototype.setManifestType,ko.prototype.setSequenceMode=ko.prototype.setSequenceMode,ko.prototype.parseInit=ko.prototype.parseInit,ji['application/mp4; codecs="stpp"']=function(){return new ko},ji['application/mp4; codecs="stpp.ttml"']=function(){return new ko},ji['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new ko},ji['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new ko};function Fo(){this.h=!1,this.g="UNKNOWN"}Fo.prototype.parseInit=function(){},Fo.prototype.setSequenceMode=function(e){this.h=e},Fo.prototype.setManifestType=function(e){this.g=e},Fo.prototype.parseMedia=function(e,t){e=Vr(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new pt(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var i=n[0];if(e=i.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=i.match(/MPEGTS:(\d+)/m),!e||!i)throw new pt(2,2,2e3);if(e=gy(new Vc(e[1])),e==null)throw new pt(2,2,2e3);e=t.periodStart+Number(i[1])/9e4-e}else e=t.segmentStart;t=[],i=m(n[0].split("\n"));for(var u=i.next();!u.done;u=i.next())if(u=u.value,/^Region:/.test(u)){u=new Vc(u);var c=new Br;zc(u),Id(u);for(var d=zc(u);d;){var h=c,E=d;(d=/^id=(.*)$/.exec(E))?h.id=d[1]:(d=/^width=(\d{1,2}|100)%$/.exec(E))?h.width=Number(d[1]):(d=/^lines=(\d+)$/.exec(E))?(h.height=Number(d[1]),h.heightUnits=2):(d=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.regionAnchorX=Number(d[1]),h.regionAnchorY=Number(d[2])):(d=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.viewportAnchorX=Number(d[1]),h.viewportAnchorY=Number(d[2])):/^scroll=up$/.exec(E)&&(h.scroll="up"),Id(u),d=zc(u)}t.push(c)}for(i=new Map,Q2(i),u=[],n=m(n.slice(1)),c=n.next();!c.done;c=n.next()){if(c=c.value.split("\n"),(c.length!=1||c[0])&&!/^NOTE($|[ \t])/.test(c[0])&&c[0]=="STYLE"){for(h=[],d=-1,E=1;E<c.length;E++)c[E].includes("::cue")&&(h.push([]),d=h.length-1),d!=-1&&(h[d].push(c[E]),c[E].includes("}")&&(d=-1));for(h=m(h),d=h.next();!d.done;d=h.next()){var A=d.value;d="global",(E=A[0].match(/\((.*)\)/))&&(d=E.pop()),E=A.slice(1,-1),A[0].includes("}")&&(A=/\{(.*?)\}/.exec(A[0]))&&(E=A[1].split(";")),(A=i.get(d))||(A=new Cn(0,0,""));for(var k=!1,G=0;G<E.length;G++){var ne=/^\s*([^:]+):\s*(.*)/.exec(E[G]);if(ne){var Y=ne[2].trim().replace(";","");switch(ne[1].trim()){case"background-color":case"background":k=!0,A.backgroundColor=Y;break;case"color":k=!0,A.color=Y;break;case"font-family":k=!0,A.fontFamily=Y;break;case"font-size":k=!0,A.fontSize=Y;break;case"font-weight":(700<=parseInt(Y,10)||Y=="bold")&&(k=!0,A.fontWeight=700);break;case"font-style":switch(Y){case"normal":k=!0,A.fontStyle=Yi;break;case"italic":k=!0,A.fontStyle="italic";break;case"oblique":k=!0,A.fontStyle="oblique"}break;case"opacity":k=!0,A.opacity=parseFloat(Y);break;case"text-combine-upright":k=!0,A.textCombineUpright=Y;break;case"text-shadow":k=!0,A.textShadow=Y;break;case"white-space":k=!0,A.wrapLine=Y!="noWrap"}}}k&&i.set(d,A)}}if(k=e,c.length==1&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||c[0]=="STYLE"||c[0]=="REGION")c=null;else if(h=null,c[0].includes("-->")||(h=c[0],c.splice(0,1)),d=new Vc(c[0]),E=gy(d),G=Hl(d,/[ \t]+--\x3e[ \t]+/g),A=gy(d),E==null||G==null||A==null)He("Failed to parse VTT time code. Cue skipped:",h,c),c=null;else{for(E+=k,A+=k,c=c.slice(1).join("\n").trim(),i.has("global")?(k=i.get("global").clone(),k.startTime=E,k.endTime=A,k.payload=""):k=new Cn(E,A,""),Id(d),E=zc(d);E;)tD(k,E,t),Id(d),E=zc(d);J2(c,k,i),h!=null&&(k.id=h),c=k}c&&u.push(c)}return u};function Q2(e){for(var t=m(Object.entries(ar)),n=t.next();!n.done;n=t.next()){var i=m(n.value);n=i.next().value,i=i.next().value;var u=new Cn(0,0,"");u.color=i,e.set("."+n,u)}for(t=m(Object.entries(br)),n=t.next();!n.done;n=t.next())i=m(n.value),n=i.next().value,i=i.next().value,u=new Cn(0,0,""),u.backgroundColor=i,e.set("."+n,u)}function J2(e,t,n){if(e.includes("<")){n.size===0&&Q2(n);var i=e;e=[];for(var u=-1,c=0;c<i.length;c++)i[c]==="<"?u=c+1:i[c]===">"&&0<u&&(u=i.substr(u,c-u),u.match(nD)&&e.push(u),u=-1);for(e=m(e),c=e.next();!c.done;c=e.next())c=c.value,i=i.replace("<"+c+">",'<div time="'+c+'">'),i+="</div>";e=i;e:{c=e,u=[];var d=-1;e="",i=!1;for(var h=0;h<c.length;h++)if(c[h]==="/"){var E=c.indexOf(">",h);if(E===-1){e=c;break e}if((E=c.substring(h+1,E))&&E=="v"){i=!0;var A=null;if(u.length&&(A=u[u.length-1]),A){if(A===E)e+="/"+E+">";else{if(!A.startsWith("v")){e+=c[h];continue}e+="/"+A+">"}h+=E.length+1}else e+=c[h]}else e+=c[h]}else c[h]==="<"?(d=h+1,c[d]!="v"&&(d=-1)):c[h]===">"&&0<d&&(u.push(c.substr(d,h-d)),d=-1),e+=c[h];for(c=m(u),u=c.next();!u.done;u=c.next())u=u.value,d=u.replace(" ",".voice-"),e=e.replace("<"+u+">","<"+d+">"),e=e.replace("</"+u+">","</"+d+">"),i||(e+="</"+d+">")}e=ZG(e);try{var k=Bl("<span>"+e+"</span>","span")}catch(G){}if(k)if(k=k.children,k.length!=1||k[0].tagName)for(k=m(k),e=k.next();!e.done;e=k.next())eD(e.value,t,n);else t.payload=Co(e);else t.payload=Co(e)}else t.payload=Co(e)}function ZG(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(u){return t[u]||""}):e||""}function Kp(e,t){return e&&0<e.length?e:t}function eD(e,t,n){var i=t.clone();if(i.nestedCues=[],i.payload="",i.rubyTag="",i.line=null,i.region=new Br,i.position=null,i.size=0,e.tagName)for(var u=m(e.tagName.split(/(?=[ .])+/g)),c=u.next();!c.done;c=u.next()){var d=c=c.value;if(d.startsWith(".voice-")){var h=d.split("-").pop();d='v[voice="'+h+'"]',n.has(d)||(d="v[voice="+h+"]")}switch(n.has(d)&&(d=n.get(d))&&(i.backgroundColor=Kp(d.backgroundColor,i.backgroundColor),i.color=Kp(d.color,i.color),i.fontFamily=Kp(d.fontFamily,i.fontFamily),i.fontSize=Kp(d.fontSize,i.fontSize),i.textShadow=Kp(d.textShadow,i.textShadow),i.fontWeight=d.fontWeight,i.fontStyle=d.fontStyle,i.opacity=d.opacity,i.rubyTag=d.rubyTag,i.textCombineUpright=d.textCombineUpright,i.wrapLine=d.wrapLine),c){case"br":i=Rn(i.startTime,i.endTime),t.nestedCues.push(i);return;case"b":i.fontWeight=700;break;case"i":i.fontStyle="italic";break;case"u":i.textDecoration.push("underline");break;case"font":(c=e.attributes.color)&&(i.color=c);break;case"div":if(c=e.attributes.time,!c)break;(c=gy(new Vc(c)))&&(i.startTime=c);break;case"ruby":case"rp":case"rt":i.rubyTag=c}}if(u=e.children,Wf(e)||u.length==1&&Wf(u[0]))for(n=Ri(e).split("\n"),e=!0,n=m(n),u=n.next();!u.done;u=n.next())u=u.value,e||(e=Rn(i.startTime,i.endTime),t.nestedCues.push(e)),0<u.length&&(e=i.clone(),e.payload=Co(u),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(i),t=m(u),e=t.next();!e.done;e=t.next())eD(e.value,i,n)}function tD(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],t=="middle"?e.textAlign=kn:e.textAlign=er[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=i[1]=="lr"?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Bn)):(i=/^region:(.*)$/.exec(t))?(t=GG(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=cn,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()]))}function GG(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function gy(e){if(e=Hl(e,nD),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}te("shaka.text.VttTextParser",Fo),Fo.prototype.parseMedia=Fo.prototype.parseMedia,Fo.prototype.setManifestType=Fo.prototype.setManifestType,Fo.prototype.setSequenceMode=Fo.prototype.setSequenceMode,Fo.prototype.parseInit=Fo.prototype.parseInit;var nD=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;ji["text/vtt"]=function(){return new Fo},ji['text/vtt; codecs="vtt"']=function(){return new Fo},ji['text/vtt; codecs="wvtt"']=function(){return new Fo};function Da(){this.g=null}Da.prototype.parseInit=function(e){var t=this,n=!1;if(new kr().box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(i){i=It(i.reader,i.version),t.g=i.timescale}).box("minf",yr).box("stbl",yr).O("stsd",vu).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new pt(2,2,2008);if(!n)throw new pt(2,2,2008)},Da.prototype.setSequenceMode=function(){},Da.prototype.setManifestType=function(){},Da.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new pt(2,2,2008);var n=0,i=[],u,c=[],d=!1,h=!1,E=!1,A=null;if(new kr().box("moof",yr).box("traf",yr).O("tfdt",function(We){d=!0,n=ir(We.reader,We.version).baseMediaDecodeTime}).O("tfhd",function(We){A=rr(We.reader,We.flags).Wf}).O("trun",function(We){h=!0,i=$t(We.reader,We.version,We.flags).vg}).box("mdat",Xu(function(We){E=!0,u=We})).parse(e,!1),!E&&!d&&!h)throw new pt(2,2,2008);e=n;for(var k=new Dr(u,0),G=m(i),ne=G.next();!ne.done;ne=G.next()){ne=ne.value;var Y=ne.wf||A,ve=ne.he?n+ne.he:e;e=ve+(Y||0);var Pe=0;do{var xe=k.M();Pe+=xe;var Ge=k.M(),Te=null;zf(Ge)=="vttc"?8<xe&&(Te=k.sb(xe-8)):k.skip(xe-8),Y&&Te&&(xe=qG(Te,t.periodStart+ve/this.g,t.periodStart+e/this.g),c.push(xe))}while(ne.sampleSize&&Pe<ne.sampleSize)}return c.filter(ju)};function qG(e,t,n){var i,u,c;return new kr().box("payl",Xu(function(d){i=Vr(d)})).box("iden",Xu(function(d){u=Vr(d)})).box("sttg",Xu(function(d){c=Vr(d)})).parse(e),i?HG(i,u,c,t,n):null}function HG(e,t,n,i,u){if(i=new Cn(i,u,""),J2(e,i,new Map),t&&(i.id=t),n)for(e=new Vc(n),t=zc(e);t;)tD(i,t,[]),Id(e),t=zc(e);return i}te("shaka.text.Mp4VttParser",Da),Da.prototype.parseMedia=Da.prototype.parseMedia,Da.prototype.setManifestType=Da.prototype.setManifestType,Da.prototype.setSequenceMode=Da.prototype.setSequenceMode,Da.prototype.parseInit=Da.prototype.parseInit,ji['application/mp4; codecs="wvtt"']=function(){return new Da};function Pa(){}Pa.prototype.parseInit=function(){},Pa.prototype.setSequenceMode=function(){},Pa.prototype.setManifestType=function(){},Pa.prototype.parseMedia=function(e){var t=Vr(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var i=new Vc(n[0]),u=rD(i),c=Hl(i,/,/g);if(i=rD(i),u==null||c==null||i==null)throw new pt(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Cn(u,i,n.slice(1).join("\n").trim()))}return e};function rD(e){if(e=Hl(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}te("shaka.text.SbvTextParser",Pa),Pa.prototype.parseMedia=Pa.prototype.parseMedia,Pa.prototype.setManifestType=Pa.prototype.setManifestType,Pa.prototype.setSequenceMode=Pa.prototype.setSequenceMode,Pa.prototype.parseInit=Pa.prototype.parseInit,ji["text/x-subviewer"]=function(){return new Pa};function Ea(){this.g=new Fo}Ea.prototype.parseInit=function(){},Ea.prototype.setSequenceMode=function(){},Ea.prototype.setManifestType=function(){},Ea.prototype.parseMedia=function(e,t,n){return e=Vr(e),e=iD(e),e=Qn(za(e)),this.g.parseMedia(e,t,n)};function iD(e){var t="WEBVTT\n\n";if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=m(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}te("shaka.text.SrtTextParser",Ea),Ea.srt2webvtt=iD,Ea.prototype.parseMedia=Ea.prototype.parseMedia,Ea.prototype.setManifestType=Ea.prototype.setManifestType,Ea.prototype.setSequenceMode=Ea.prototype.setSequenceMode,Ea.prototype.parseInit=Ea.prototype.parseInit,ji["text/srt"]=function(){return new Ea};function Oa(){}Oa.prototype.parseInit=function(){},Oa.prototype.setSequenceMode=function(){},Oa.prototype.setManifestType=function(){},Oa.prototype.parseMedia=function(e){var t="",n="";e=Vr(e).split(/\r?\n\s*\r?\n/),e=m(e);for(var i=e.next();!i.done;i=e.next()){var u=VG.exec(i.value);u&&(i=u[1],u=u[2],i=="V4 Styles"||i=="V4+ Styles"?t=u:i=="Events"&&(n=u))}e=[],i=null,t=m(t.split(/\r?\n/));for(var c=t.next();!c.done;c=t.next())if(u=c.value,!/^\s*;/.test(u)&&(c=sD.exec(u))){if(u=c[1].trim(),c=c[2].trim(),u=="Format")i=c.split(my);else if(u=="Style"){u=c.split(my),c={};for(var d=0;d<i.length&&d<u.length;d++)c[i[d]]=u[d];e.push(c)}}for(i=[],t=null,u={},n=m(n.split(/\r?\n/)),c=n.next();!c.done;u={re:u.re},c=n.next())if(c=c.value,!/^\s*;/.test(c)&&(d=sD.exec(c))){if(c=d[1].trim(),d=d[2].trim(),c=="Format")t=d.split(my);else if(c=="Dialogue"){d=d.split(my),c={};for(var h=0;h<t.length&&h<d.length;h++)c[t[h]]=d[h];h=aD(c.Start);var E=aD(c.End);d=new Cn(h,E,d.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),u.re=c.Style,(c=e.find(function(A){return function(k){return k.Name==A.re}}(u)))&&KG(d,c),i.push(d)}}return i};function KG(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=oD(n))&&(e.color=n),(n=t.BackColour)&&(n=oD(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Er,e.textAlign="start";break;case 2:e.displayAlign=Er,e.textAlign=kn;break;case 3:e.displayAlign=Er,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=kn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=kn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function oD(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function aD(e){return e=zG.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}te("shaka.text.SsaTextParser",Oa),Oa.prototype.parseMedia=Oa.prototype.parseMedia,Oa.prototype.setManifestType=Oa.prototype.setManifestType,Oa.prototype.setSequenceMode=Oa.prototype.setSequenceMode,Oa.prototype.parseInit=Oa.prototype.parseInit;var VG=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,sD=/^\s*([^:]+):\s*(.*)/,my=/\s*,\s*/,zG=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;ji["text/x-ssa"]=function(){return new Oa};function uD(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,U:e}:null}function lD(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(e[t+2]&60)>>>2;if(i>n.length-1)return null;var u=((e[t+2]&192)>>>6)+1,c=(e[t+2]&1)<<2;return c|=(e[t+3]&192)>>>6,{sampleRate:n[i],channelCount:c,Ea:"mp4a.40."+u}}function cD(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var i=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return i<=n?!1:(t+=i,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function YG(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function La(e){this.i=e,this.h=0,this.g=new Map}g=La.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Pt(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Po(t)||"mp4a.40.2")+'"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,i){for(var u=Qn(e),c=Nn(u),d=c.length;d<u.length&&!cD(u,d);d++);if(e=1e3*n.endTime,c=Dn(c),c.length&&n&&(n=c.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=n.data),n=lD(u,d),!n)return Promise.reject(new pt(2,3,3018));for(t.audioSamplingRate=n.sampleRate,t.channelsCount=n.channelCount,c=[];d<u.length;){var h=uD(u,d);if(!h)return Promise.reject(new pt(2,3,3018));var E=h.Qd+h.U;d+E<=u.length&&c.push({data:u.subarray(d+h.Qd,d+E),size:h.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),d+=E}return u=n.sampleRate,e=Math.floor(e*u/1e3),i={id:t.id,type:"audio",codecs:n.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:i,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:c},stream:t},e=new Cd([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=Rd(e),this.g.set(t.id,i)),t=Lp(e),this.h++,t=li(i,t),Promise.resolve(t)},te("shaka.transmuxer.AacTransmuxer",La),La.prototype.transmux=La.prototype.transmux,La.prototype.getOriginalMimeType=La.prototype.getOriginalMimeType,La.prototype.convertCodecs=La.prototype.convertCodecs,La.prototype.isSupported=La.prototype.isSupported,La.prototype.destroy=La.prototype.destroy,Ao("audio/aac",function(){return new La("audio/aac")},Ci);function fD(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var i=e[t+4]&63,u=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*i+n];if(t+u>e.length)return null;var c=e[t+6]>>5,d=0;c===2?d+=2:(c&1&&c!==1&&(d+=2),c&4&&(d+=2)),d=(e[t+6]<<8|e[t+7])>>12-d&1;var h=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|h>>2,(h&3)<<6|c<<3|d<<2|i>>4,i<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][c]+d,ga:e,U:u}}function WG(e,t){if(e[t]===11&&e[t+1]===119){var n=0,i=5;t+=i;for(var u,c;0<i;){c=e[t];var d=Math.min(i,8),h=8-d;u=4278190080>>>24+h<<h,u=(c&u)>>h,n=n?n<<d|u:u,t+=1,i-=d}if(16>n)return!0}return!1}function rs(e){this.i=e,this.h=0,this.g=new Map}g=rs.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Pt(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,i){e=Qn(e);for(var u=Nn(e),c=u.length;c<e.length&&!WG(e,c);c++);var d=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(d=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=fD(e,c);if(!E)return Promise.reject(new pt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(d*n/1e3),i={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:i,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new Cd([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=Rd(e),this.g.set(t.id,i)),t=Lp(e),this.h++,t=li(i,t),Promise.resolve(t)},te("shaka.transmuxer.Ac3Transmuxer",rs),rs.prototype.transmux=rs.prototype.transmux,rs.prototype.getOriginalMimeType=rs.prototype.getOriginalMimeType,rs.prototype.convertCodecs=rs.prototype.convertCodecs,rs.prototype.isSupported=rs.prototype.isSupported,rs.prototype.destroy=rs.prototype.destroy,Ao("audio/ac3",function(){return new rs("audio/ac3")},Ci);function dD(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new xn(e.subarray(t+2));Gn(n,2),Gn(n,3);var i=bt(n,11)+1<<1,u=bt(n,2);if(u==3){u=bt(n,2),u=[24e3,22060,16e3][u];var c=3}else u=[48e3,44100,32e3][u],c=bt(n,2);var d=bt(n,3),h=bt(n,1);return n=bt(n,5),t+i>e.byteLength?null:(e=Math.floor(i*u/(16*[1,2,3,6][c])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|n<<1|0,0|d<<1|h<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][d]+h,ga:e,U:i})}function is(e){this.i=e,this.h=0,this.g=new Map}g=is.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Pt(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,i){e=Qn(e);for(var u=Nn(e),c=u.length;c<e.length&&(e[c]<<8|e[c+1]<<0)!==2935;c++);var d=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(d=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=dD(e,c);if(!E)return Promise.reject(new pt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(d*n/1e3),i={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:i,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new Cd([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=Rd(e),this.g.set(t.id,i)),t=Lp(e),this.h++,t=li(i,t),Promise.resolve(t)},te("shaka.transmuxer.Ec3Transmuxer",is),is.prototype.transmux=is.prototype.transmux,is.prototype.getOriginalMimeType=is.prototype.getOriginalMimeType,is.prototype.convertCodecs=is.prototype.convertCodecs,is.prototype.isSupported=is.prototype.isSupported,is.prototype.destroy=is.prototype.destroy,Ao("audio/ec3",function(){return new is("audio/ec3")},Ci);function $G(e){if(!e.length)return null;var t=e.find(function(Pe){return Pe.type==7});if(e=e.find(function(Pe){return Pe.type==8}),!t||!e)return null;var n=new xn(t.data),i=tt(n);if(tt(n),tt(n),En(n),QG.includes(i)&&(i=Ot(n),i===3&&Gn(n,1),En(n),En(n),Gn(n,1),st(n))){i=i!==3?8:12;for(var u=0;u<i;u++)st(n)&&(6>u?qt(n,16):qt(n,64))}if(En(n),i=Ot(n),i===0)Ot(n);else if(i===1)for(Gn(n,1),En(n),En(n),i=Ot(n),u=0;u<i;u++)En(n);En(n),Gn(n,1);var c=Ot(n),d=Ot(n),h=bt(n,1);h===0&&Gn(n,1),Gn(n,1);var E=0,A=0,k=0,G=0;if(st(n)&&(E=Ot(n),A=Ot(n),k=Ot(n),G=Ot(n)),u=i=1,st(n)&&st(n)){var ne=tt(n),Y=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ve=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<ne&&16>=ne?(i=Y[ne-1],u=ve[ne-1]):ne===255&&(i=bt(n,16),u=bt(n,16))}return n=(2-h)*(d+1)*16-2*k-2*G,c=16*(c+1)-2*E-2*A,E=[],t=t.fullData,E.push(t.byteLength>>>8&255),E.push(t.byteLength&255),E=E.concat.apply(E,T(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,T(e)),e=new Uint8Array([1,E[3],E[4],E[5],255,225].concat(E,[1],t)),{height:n,width:c,oa:e,xa:i,ya:u}}function XG(e){var t=!1,n=[],i=e.find(function(E){return E.type==7}),u=!1;e=m(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;var d=!1;switch(c.type){case 1:d=u=!0;var h=c.data;i&&4<h.length&&(h=Ve(new xn(h)),h===2||h===4||h===7||h===9)&&(t=!0);break;case 5:t=d=u=!0;break;case 6:d=!0;break;case 7:d=!0;break;case 8:d=!0;break;case 9:u=d=!0;break;case 12:d=!0;break;default:d=!1}u&&d&&(d=c.fullData.byteLength,h=new Uint8Array(4),h[0]=d>>24&255,h[1]=d>>16&255,h[2]=d>>8&255,h[3]=d&255,n.push(h),n.push(c.fullData))}return n.length?{data:li.apply(Oi,T(n)),jd:t}:null}var QG=[100,110,122,244,44,83,86,118,128,138,139,134];function JG(e){if(!e.length)return null;var t=e.find(function(d){return d.type==32}),n=e.find(function(d){return d.type==33}),i=e.find(function(d){return d.type==34});if(!t||!n||!i)return null;var u=e9(t.fullData);e=t9(n.fullData);var c=n9(i.fullData);return t=r9(t.fullData,n.fullData,i.fullData,{jf:u.jf,Gf:u.Gf,Qe:e.Qe,Re:e.Re,Ke:e.Ke,Pe:e.Pe,Le:e.Le,Me:e.Me,Ne:e.Ne,Oe:e.Oe,Ee:e.Ee,Fe:e.Fe,Ge:e.Ge,He:e.He,Ie:e.Ie,Je:e.Je,Be:e.Be,be:e.be,Ae:e.Ae,ze:e.ze,ye:e.ye,pf:c.pf}),{height:e.height,width:e.width,oa:t,xa:e.pi,ya:e.oi}}function e9(e){var t=new xn(e,!0);return tt(t),tt(t),bt(t,4),bt(t,2),bt(t,6),e=bt(t,3),t=st(t),{jf:e+1,Gf:t}}function t9(e){e=new xn(e,!0),tt(e),tt(e);var t=0,n=0,i=0,u=0;bt(e,4);var c=bt(e,3);st(e);for(var d=bt(e,2),h=bt(e,1),E=bt(e,5),A=tt(e),k=tt(e),G=tt(e),ne=tt(e),Y=tt(e),ve=tt(e),Pe=tt(e),xe=tt(e),Ge=tt(e),Te=tt(e),We=tt(e),Ue=[],mt=[],Rt=0;Rt<c;Rt++)Ue.push(st(e)),mt.push(st(e));if(0<c)for(Rt=c;8>Rt;Rt++)bt(e,2);for(Rt=0;Rt<c;Rt++)Ue[Rt]&&bt(e,88),mt[Rt]&&tt(e);Ot(e),Ue=Ot(e),Ue==3&&bt(e,1),mt=Ot(e),Rt=Ot(e),st(e)&&(t+=Ot(e),n+=Ot(e),i+=Ot(e),u+=Ot(e));var Ht=Ot(e),Ut=Ot(e),Et=Ot(e);if(st(e))for(var jt=0;jt<=c;jt++)Ot(e),Ot(e),Ot(e);else Ot(e),Ot(e),Ot(e);if(Ot(e),Ot(e),Ot(e),Ot(e),Ot(e),Ot(e),st(e)&&st(e))for(jt=0;4>jt;jt++)for(var ln=0;ln<(jt===3?2:6);ln++)if(st(e)){var gn=Math.min(64,1<<4+(jt<<1));1<jt&&On(e);for(var Ln=0;Ln<gn;Ln++)On(e)}else Ot(e);for(st(e),st(e),st(e)&&(tt(e),Ot(e),Ot(e),st(e)),jt=Ot(e),gn=ln=0;gn<jt;gn++)if(Ln=!1,gn!==0&&(Ln=st(e)),Ln){gn===jt&&Ot(e),st(e),Ot(e);for(var Mn=Ln=0;Mn<=ln;Mn++){var qn=st(e),Yn=!1;qn||(Yn=st(e)),(qn||Yn)&&Ln++}ln=Ln}else{for(Mn=Ot(e),Ln=Ot(e),ln=Mn+Ln,qn=0;qn<Mn;qn++)Ot(e),st(e);for(Mn=0;Mn<Ln;Mn++)Ot(e),st(e)}if(st(e))for(jt=Ot(e),ln=0;ln<jt;ln++){for(gn=0;gn<Et+4;gn++)bt(e,1);bt(e,1)}if(jt=Et=1,ln=0,st(e),st(e),st(e)){if(st(e)&&(gn=tt(e),Ln=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Mn=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<gn&&16>=gn?(Et=Ln[gn-1],jt=Mn[gn-1]):gn===255&&(Et=bt(e,16),jt=bt(e,16))),st(e)&&st(e),st(e)&&(bt(e,3),st(e),st(e)&&(tt(e),tt(e),tt(e))),st(e)&&(Ot(e),Ot(e)),st(e),st(e),st(e),(gn=st(e))&&(Ot(e),Ot(e),Ot(e),Ot(e)),st(e)&&(bt(e,32),bt(e,32),st(e)&&Ot(e),st(e)))for(Mn=!1,gn=st(e),Ln=st(e),(gn||Ln)&&((Mn=st(e))&&(tt(e),bt(e,5),st(e),bt(e,5)),bt(e,4),bt(e,4),Mn&&bt(e,4),bt(e,5),bt(e,5),bt(e,5)),qn=0;qn<=c;qn++){var Kn=!0;Yn=1,st(e)||(Kn=st(e));var xr=!1;if(Kn?Ot(e):xr=st(e),xr||(Yn=Ot(e)+1),gn){for(Kn=0;Kn<Yn;Kn++)Ot(e),Ot(e),Mn&&(Ot(e),Ot(e));st(e)}if(Ln){for(Kn=0;Kn<Yn;Kn++)Ot(e),Ot(e),Mn&&(Ot(e),Ot(e));st(e)}}st(e)&&(st(e),st(e),st(e),ln=Ot(e),Ot(e),Ot(e),Ot(e),Ot(e))}return{Ke:We,Qe:d,Re:h,Pe:E,Le:A,Me:k,Ne:G,Oe:ne,Ee:Y,Fe:ve,Ge:Pe,He:xe,Ie:Ge,Je:Te,be:ln,Be:0,Ae:Ue,ze:Ht,ye:Ut,width:mt-(t+n)*(Ue===1||Ue===2?2:1),height:Rt-(i+u)*(Ue===1?2:1),pi:Et,oi:jt}}function n9(e){var t=new xn(e,!0);tt(t),tt(t),Ot(t),Ot(t),st(t),st(t),bt(t,3),st(t),st(t),Ot(t),Ot(t),On(t),st(t),st(t),st(t)&&Ot(t),On(t),On(t),st(t),st(t),st(t),st(t),e=st(t),t=st(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{pf:n}}function r9(e,t,n,i){var u=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return u[0]=1,u[1]=(i.Qe&3)<<6|(i.Re?1:0)<<5|i.Pe&31,u[2]=i.Le,u[3]=i.Me,u[4]=i.Ne,u[5]=i.Oe,u[6]=i.Ee,u[7]=i.Fe,u[8]=i.Ge,u[9]=i.He,u[10]=i.Ie,u[11]=i.Je,u[12]=i.Ke,u[13]=240|(i.be&3840)>>8,u[14]=i.be&255,u[15]=252|i.pf&3,u[16]=252|i.Ae&3,u[17]=248|i.ze&7,u[18]=248|i.ye&7,u[19]=0,u[20]=0,u[21]=(i.Be&3)<<6|(i.jf&7)<<3|(i.Gf?1:0)<<2|3,u[22]=3,u[23]=160,u[24]=0,u[25]=1,u[26]=(e.byteLength&65280)>>8,u[27]=(e.byteLength&255)>>0,u.set(e,28),u[23+(5+e.byteLength)]=161,u[e.byteLength+29]=0,u[e.byteLength+30]=1,u[e.byteLength+31]=(t.byteLength&65280)>>8,u[e.byteLength+32]=(t.byteLength&255)>>0,u.set(t,e.byteLength+33),u[23+(e.byteLength+10+t.byteLength)]=162,u[e.byteLength+10+t.byteLength+24]=0,u[e.byteLength+10+t.byteLength+25]=1,u[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,u[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,u.set(n,e.byteLength+10+t.byteLength+28),u}function vy(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(n!==1&&u!==0&&u!==15&&c!==3){var d=e[t+3]>>6;u=1e3*i9[14*(n===3?3-i:i===3?3:4)+u-1],c=o9[3*(n===3?0:n===2?1:2)+c],n=a9[n][i];var h=s9[i],E=Math.floor(n*u/c+(e[t+2]>>1&1))*h,A=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(A=A?parseInt(A[1],10):0)&&87>=A&&i===2&&224e3<=u&&d===0&&(e[t+3]|=128),{sampleRate:c,channelCount:d===3?1:2,U:E,ni:8*n*h}}return null}function hD(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function pD(e,t){if(t+1<e.length&&hD(e,t)){var n=vy(e,t),i=4;return n&&n.U&&(i=n.U),t+=i,t===e.length||t+1<e.length&&hD(e,t)}return!1}var i9=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],o9=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],a9=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],s9=[0,1,1,4];function os(e){this.i=e,this.h=0,this.g=new Map}g=os.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Pt(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,i){n=Qn(e);for(var u=Nn(n).length;u<n.length&&!pD(n,u);u++);var c;for(e=[];u<n.length;){var d=vy(n,u);if(!d)return Promise.reject(new pt(2,3,3018));c||(c=d),u+d.U<=n.length&&e.push({data:n.subarray(u,u+d.U),size:d.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),u+=d.U}return c?(n=9e4*c.ni/c.sampleRate*this.h,i={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:c.sampleRate,duration:i,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:n,Ra:e},stream:t},c=new Cd([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=Rd(c),this.g.set(t.id,i)),t=Lp(c),this.h++,t=li(i,t),Promise.resolve(t)):Promise.reject(new pt(2,3,3018))},te("shaka.transmuxer.Mp3Transmuxer",os),os.prototype.transmux=os.prototype.transmux,os.prototype.getOriginalMimeType=os.prototype.getOriginalMimeType,os.prototype.convertCodecs=os.prototype.convertCodecs,os.prototype.isSupported=os.prototype.isSupported,os.prototype.destroy=os.prototype.destroy,Ao("audio/mpeg",function(){return new os("audio/mpeg")},Ci);function as(e){this.h=e,this.g=null}g=as.prototype,g.destroy=function(){},g.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Po(e).split(","),n=Ro("audio",t);return t=Ro("video",t),!n||t||ba(n)!="mp3"?!1:Pt(this.convertCodecs("audio",e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n,i,u){if(this.g?this.g.clearData():this.g=new Ke,e=Qn(e),e=this.g.parse(e),e.bd().audio!="mp3"||u!="audio")return Promise.reject(new pt(2,3,3018));for(u=new Uint8Array([]),e=m(e.Fb()),t=e.next();!t.done;t=e.next())if(t=t.value.data)for(n=0;n<t.length;)(i=vy(t,n))?(n+i.U<=t.length&&(u=li(u,t.subarray(n,n+i.U))),n+=i.U):n++;return Promise.resolve(u)},te("shaka.transmuxer.MpegTsTransmuxer",as),as.prototype.transmux=as.prototype.transmux,as.prototype.getOriginalMimeType=as.prototype.getOriginalMimeType,as.prototype.convertCodecs=as.prototype.convertCodecs,as.prototype.isSupported=as.prototype.isSupported,as.prototype.destroy=as.prototype.destroy,Ao("video/mp2t",function(){return new as("video/mp2t")},Il);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function ka(e){this.h=e,(this.g=n1.get("ISOBoxer")())&&u9(this)}function u9(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(i){this._procEntryField(i,"BytesOfClearData","uint",16),this._procEntryField(i,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,i=0;16>i;i++)this.usertype[i]!==l9[i]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}g=ka.prototype,g.destroy=function(){},g.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Pt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Pt(t)||Pt(e))},g.convertCodecs=function(e,t){return t.replace("mss/","")},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n){if(!n)return Promise.resolve(Qn(e));if(!t.mssPrivateData)return Promise.reject(new pt(2,3,3020));try{var i,u=this.g.parseBuffer(e),c=u.fetch("tfhd");c.track_ID=t.id+1;var d=u.fetch("tfdt"),h=u.fetch("traf");d===null&&(d=this.g.createFullBox("tfdt",h,c),d.version=1,d.flags=0,d.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var E=u.fetch("trun"),A=u.fetch("tfxd");A&&A._parent.boxes.splice(A._parent.boxes.indexOf(A),1);var k=u.fetch("tfrf");k&&k._parent.boxes.splice(k._parent.boxes.indexOf(k),1);var G=u.fetch("sepiff");if(G!==null){G.type="senc",G.usertype=void 0;var ne=u.fetch("saio");if(ne===null){ne=this.g.createFullBox("saio",h),ne.version=0,ne.flags=0,ne.entry_count=1,ne.offset=[0];var Y=this.g.createFullBox("saiz",h);if(Y.version=0,Y.flags=0,Y.sample_count=G.sample_count,Y.default_sample_info_size=0,Y.sample_info_size=[],G.flags&2)for(i=0;i<G.sample_count;i+=1)Y.sample_info_size[i]=10+6*G.entry[i].NumberOfEntries;else Y.default_sample_info_size=8}}c.flags&=16777214,c.flags|=131072,E.flags|=1;var ve=u.fetch("moof");E.data_offset=ve.getLength()+8;var Pe=u.fetch("saio");Pe!==null&&(Pe.offset[0]=gD(ve,"traf")+gD(h,"senc")+16);var xe=Qn(u.write());return Promise.resolve(xe)}catch(Ge){return Ge instanceof pt?Promise.reject(Ge):Promise.reject(new pt(2,3,3022))}};function gD(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}te("shaka.transmuxer.MssTransmuxer",ka),ka.prototype.transmux=ka.prototype.transmux,ka.prototype.getOriginalMimeType=ka.prototype.getOriginalMimeType,ka.prototype.convertCodecs=ka.prototype.convertCodecs,ka.prototype.isSupported=ka.prototype.isSupported,ka.prototype.destroy=ka.prototype.destroy;var l9=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Ao("mss/audio/mp4",function(){return new ka("mss/audio/mp4")},Ci),Ao("mss/video/mp4",function(){return new ka("mss/video/mp4")},Ci);function ss(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}g=ss.prototype,g.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},g.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var i=Po(n).split(",");return n=Ro("audio",i),i=Ro("video",i),n&&(n=ba(n),!c9.includes(n))||i&&(n=ba(i),!f9.includes(n))?!1:t?Pt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Pt(t)||Pt(e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Po(t).replace("mp4a.40.34","mp3").split(",").map(this.kh).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},g.kh=function(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}return e},g.getOriginalMimeType=function(){return this.l},g.transmux=function(e,t,n,i,u){var c=Qn(e);if(u=="audio"&&!Zr(c)){for(var d=Nn(c),h=d.length;h<c.length;h++)if(pD(c,h))return Promise.reject(new pt(2,3,3018));for(h=d.length;h<c.length;h++)if(cD(c,h))return this.h||(this.h=new La("audio/aac")),this.h.transmux(e,t,n,i,u);return Promise.reject(new pt(2,3,3018))}this.j?this.j.clearData():this.j=new Ke;var E=this.j.parse(c),A=[],k=E.bd();try{var G=null;if(u=="video"){switch(k.video){case"avc":var ne=[],Y=null,ve=[],Pe=E.xc();if(!Pe.length)throw new pt(2,3,3023);for(var xe=0;xe<Pe.length;xe++){var Ge=Pe[xe],Te=Ge.nalus;ve.push.apply(ve,T(Te));var We=XG(Te);if(We){Y==null&&(Y=Ge.dts);var Ue=void 0;Ue=xe+1<Pe.length?(Pe[xe+1].dts||0)-(Ge.dts||0):1<Pe.length?(Ge.dts||0)-(Pe[xe-1].dts||0):9e4*(n.endTime-n.startTime),ne.push({data:We.data,size:We.data.byteLength,duration:Ue,Ta:Math.round((Ge.pts||0)-(Ge.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:We.jd?2:1,Wa:We.jd?0:1}})}}var mt=$G(ve);if(!mt||Y==null)throw new pt(2,3,3018);t.height=mt.height,t.width=mt.width,G={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,Sa:[],ga:new Uint8Array([]),oa:mt.oa,xa:mt.xa,ya:mt.ya,data:{jb:this.g,baseMediaDecodeTime:Y,Ra:ne},stream:t};break;case"hvc":var Rt=[],Ht=null,Ut=[],Et=E.xc();if(!Et.length)throw new pt(2,3,3023);for(var jt=0;jt<Et.length;jt++){var ln=Et[jt],gn=ln.nalus;Ut.push.apply(Ut,T(gn));for(var Ln=!1,Mn=[],qn=!1,Yn=m(gn),Kn=Yn.next();!Kn.done;Kn=Yn.next()){var xr=Kn.value;switch(xr.type){case 1:case 0:var fi=qn=!0;break;case 19:case 20:case 21:Ln=fi=qn=!0;break;case 32:fi=!0;break;case 33:fi=!0;break;case 34:fi=!0;break;case 35:qn=fi=!0;break;case 39:case 40:fi=!0;break;default:fi=!1}if(qn&&fi){var ki=xr.fullData.byteLength,ci=new Uint8Array(4);ci[0]=ki>>24&255,ci[1]=ki>>16&255,ci[2]=ki>>8&255,ci[3]=ki&255,Mn.push(ci),Mn.push(xr.fullData)}}var gi=Mn.length?{data:li.apply(Oi,T(Mn)),jd:Ln}:null;if(gi){Ht==null&&ln.dts!=null&&(Ht=ln.dts);var Gr=void 0;Gr=jt+1<Et.length?(Et[jt+1].dts||0)-(ln.dts||0):1<Et.length?(ln.dts||0)-(Et[jt-1].dts||0):9e4*(n.endTime-n.startTime),Rt.push({data:gi.data,size:gi.data.byteLength,duration:Gr,Ta:Math.round((ln.pts||0)-(ln.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:gi.jd?2:1,Wa:gi.jd?0:1}})}}var fo=JG(Ut);if(!fo||Ht==null)throw new pt(2,3,3018);t.height=fo.height,t.width=fo.width,G={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,Sa:[],ga:new Uint8Array([]),oa:fo.oa,xa:fo.xa,ya:fo.ya,data:{jb:this.g,baseMediaDecodeTime:Ht,Ra:Rt},stream:t}}G&&(A.push(G),G=null)}if(u=="audio"){switch(k.audio){case"aac":for(var Uo=[],ai,$s=null,$c=m(E.Fb()),Xc=$c.next();!Xc.done;Xc=$c.next()){var Dd=Xc.value,cl=Dd.data;if(cl){var Xs=0;if(ai=lD(cl,Xs),!ai)throw new pt(2,3,3018);for(t.audioSamplingRate=ai.sampleRate,t.channelsCount=ai.channelCount,$s==null&&Dd.pts!==null&&($s=Dd.pts);Xs<cl.length;){var fl=uD(cl,Xs);if(fl){var zl=fl.Qd+fl.U;Xs+zl<=cl.length&&Uo.push({data:cl.subarray(Xs+fl.Qd,Xs+zl),size:fl.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Xs+=zl}else Xs++}}}if(!ai||$s==null){if(!E.xc().length)throw new pt(2,3,3018);$s=9e4*n.startTime;var Pd=Ro("audio",t.codecs.split(","));if(!Pd||!t.channelsCount||!t.audioSamplingRate)throw new pt(2,3,3018);ai={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,Ea:Pd};var Od=YG(Pd,t.channelsCount);if(!Od)throw new pt(2,3,3018);for(var Ey=$s+9e4*(n.endTime-n.startTime),Ld=$s;Ld<Ey;)Uo.push({data:Od,size:Od.byteLength,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Ld+=1024/ai.sampleRate*9e4}var Yp=ai.sampleRate,_y=$s/9e4*Yp;G={id:t.id,type:"audio",codecs:ai.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Yp,duration:i,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:_y,Ra:Uo},stream:t};break;case"ac3":for(var As=[],Ty=0,W1=new Uint8Array([]),Sy=null,CD=m(E.Fb()),$1=CD.next();!$1.done;$1=CD.next()){var X1=$1.value,Q1=X1.data;Sy==null&&X1.pts!==null&&(Sy=X1.pts);for(var kd=0;kd<Q1.length;){var Yl=fD(Q1,kd);Yl?(t.audioSamplingRate=Yl.sampleRate,t.channelsCount=Yl.channelCount,Ty=Yl.sampleRate,W1=Yl.ga,As.push({data:Q1.subarray(kd,kd+Yl.U),size:Yl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),kd+=Yl.U):kd++}}if(Ty==0||W1.byteLength==0||Sy==null)throw new pt(2,3,3018);var p9=Sy/9e4*Ty;G={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ty,duration:i,Sa:[],ga:W1,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:p9,Ra:As},stream:t};break;case"ec3":for(var RD=[],wy=0,J1=new Uint8Array([]),Ay=null,ND=m(E.Fb()),eT=ND.next();!eT.done;eT=ND.next()){var tT=eT.value,nT=tT.data;Ay==null&&tT.pts!==null&&(Ay=tT.pts);for(var Fd=0;Fd<nT.length;){var Wl=dD(nT,Fd);Wl?(t.audioSamplingRate=Wl.sampleRate,t.channelsCount=Wl.channelCount,wy=Wl.sampleRate,J1=Wl.ga,RD.push({data:nT.subarray(Fd,Fd+Wl.U),size:Wl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Fd+=Wl.U):Fd++}}if(wy==0||J1.byteLength==0||Ay==null)throw new pt(2,3,3018);var g9=Ay/9e4*wy;G={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:wy,duration:i,Sa:[],ga:J1,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:g9,Ra:RD},stream:t};break;case"mp3":for(var xD=[],Iy,by=null,MD=m(E.Fb()),rT=MD.next();!rT.done;rT=MD.next()){var iT=rT.value,Wp=iT.data;if(Wp){by==null&&iT.pts!==null&&(by=iT.pts);for(var Qc=0;Qc<Wp.length;){var Ud=vy(Wp,Qc);Ud?(Iy||(Iy=Ud),Qc+Ud.U<=Wp.length&&xD.push({data:Wp.subarray(Qc,Qc+Ud.U),size:Ud.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Qc+=Ud.U):Qc++}}}if(!Iy||by==null)throw new pt(2,3,3018);var DD=Iy.sampleRate,m9=by/9e4*DD;G={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:DD,duration:i,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:m9,Ra:xD},stream:t};break;case"opus":var PD=[],Cy=null,Au=E.F;if(!Au)throw new pt(2,3,3018);var Bo=[];switch(Au.Zg){case 1:case 2:Bo=[0];break;case 0:Bo=[255,1,1,0,1];break;case 128:Bo=[255,2,0,0,1];break;case 3:Bo=[1,2,1,0,2,1];break;case 4:Bo=[1,2,2,0,1,2,3];break;case 5:Bo=[1,3,2,0,4,1,2,3];break;case 6:Bo=[1,4,2,0,4,1,2,3,5];break;case 7:Bo=[1,4,2,0,4,1,2,3,5,6];break;case 8:Bo=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Bo=[1,1,2,0,1];break;case 131:Bo=[1,1,3,0,1,2];break;case 132:Bo=[1,1,4,0,1,2,3];break;case 133:Bo=[1,1,5,0,1,2,3,4];break;case 134:Bo=[1,1,6,0,1,2,3,4,5];break;case 135:Bo=[1,1,7,0,1,2,3,4,5,6];break;case 136:Bo=[1,1,8,0,1,2,3,4,5,6,7]}for(var OD=new Uint8Array([0,Au.channelCount,0,0,Au.sampleRate>>>24&255,Au.sampleRate>>>17&255,Au.sampleRate>>>8&255,Au.sampleRate>>>0&255,0,0].concat(T(Bo))),LD=Au.sampleRate,kD=m(E.Fb()),oT=kD.next();!oT.done;oT=kD.next()){var aT=oT.value,Bd=aT.data;Cy==null&&aT.pts!==null&&(Cy=aT.pts);for(var $p=0;$p<Bd.length;){for(var v9=(Bd[$p+1]&16)!==0,y9=(Bd[$p+1]&8)!==0,dl=$p+2,Ry=0;Bd[dl]===255;)Ry+=255,dl+=1;Ry+=Bd[dl],dl+=1,dl+=v9?2:0,dl+=y9?2:0;var FD=Bd.slice(dl,dl+Ry);PD.push({data:FD,size:FD.byteLength,duration:960,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),$p=dl+Ry}}if(OD.byteLength==0||Cy==null)throw new pt(2,3,3018);t.audioSamplingRate=Au.sampleRate,t.channelsCount=Au.channelCount;var E9=Cy/9e4*LD;G={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:LD,duration:i,Sa:[],ga:OD,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:E9,Ra:PD},stream:t}}G&&(A.push(G),G=null)}}catch(uT){return uT&&uT.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(uT)}if(!A.length)return Promise.reject(new pt(2,3,3018));var UD=new Cd(A);if(this.i.has(t.id))var sT=this.i.get(t.id);else sT=Rd(UD),this.i.set(t.id,sT);var _9=Lp(UD);this.g++;var T9=li(sT,_9);return Promise.resolve(T9)},te("shaka.transmuxer.TsTransmuxer",ss),ss.prototype.transmux=ss.prototype.transmux,ss.prototype.getOriginalMimeType=ss.prototype.getOriginalMimeType,ss.prototype.convertCodecs=ss.prototype.convertCodecs,ss.prototype.isSupported=ss.prototype.isSupported,ss.prototype.destroy=ss.prototype.destroy;var c9=["aac","ac-3","ec-3","mp3","opus"],f9=["avc","hevc"];Ao("video/mp2t",function(){return new ss("video/mp2t")},lu);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function mD(){}var Vp;function vD(){Vp?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Vp=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=d9):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function d9(e,t){var n=this,i;return Oe(function(u){return u.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),N(u,Vp.call(n,e,t),2)):(i=u.h,ID(i)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Vp,u.return(i)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=yD,u.return(yD.call(n,e,t))))})}function yD(e,t){var n=this,i,u,c,d,h,E,A,k,G,ne;return Oe(function(Y){if(Y.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),i=AD(e),u=[],c=m(t),d=c.next();!d.done;d=c.next())h=d.value,E=ED(h.videoCapabilities,i),A=ED(h.audioCapabilities,i),h.videoCapabilities&&h.videoCapabilities.length&&!E.length||h.audioCapabilities&&h.audioCapabilities.length&&!A.length||(k=Object.assign({},h),k.videoCapabilities=E,k.audioCapabilities=A,u.push(k));if(!u.length)throw G=Error("Unsupported keySystem or supportedConfigurations."),G.name="NotSupportedError",G.code=DOMException.NOT_SUPPORTED_ERR,G;return N(Y,Vp.call(n,e,u),2)}return ne=Y.h,Y.return(new yy(ne,i))})}function ED(e,t){return e&&e.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==t})}te("EmeEncryptionSchemePolyfill",mD),mD.install=vD;function _D(){}var zp;function TD(){zp?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(zp=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=h9):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function h9(e){var t=this,n,i,u;return Oe(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),N(c,zp.call(t,e),2);case 2:if(n=c.h,!e.keySystemConfiguration)return c.return(n);if((i=n.keySystemAccess)&&ID(i))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=zp,c.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=SD,i){c.u(3);break}return u=n,N(c,wD(e),4);case 4:return u.keySystemAccess=c.h,c.return(n);case 3:return c.return(SD.call(t,e))}})}function SD(e){var t=this,n,i,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(i=e.keySystemConfiguration,u=i.keySystem,c=i.audio&&i.audio.encryptionScheme,d=i.video&&i.video.encryptionScheme,n=AD(u),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},c&&c!=n||d&&d!=n)?k.return(h):N(k,zp.call(t,e),2);case 2:if(E=k.h,E.keySystemAccess){E.keySystemAccess=new yy(E.keySystemAccess,n),k.u(3);break}if(!e.keySystemConfiguration){k.u(3);break}return A=E,N(k,wD(e),5);case 5:A.keySystemAccess=k.h;case 3:return k.return(E)}})}function wD(e){var t,n;return Oe(function(i){if(i.g==1){var u=e.keySystemConfiguration,c=[],d=[];return u.audio&&c.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType}),u.video&&d.push({robustness:u.video.robustness||"",contentType:e.video.contentType}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},c.length&&(u.audioCapabilities=c),d.length&&(u.videoCapabilities=d),t=u,N(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)})}te("McEncryptionSchemePolyfill",_D),_D.install=TD;function yy(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}yy.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},yy.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function AD(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function ID(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function Y1(){}function bD(){vD(),TD()}te("EncryptionSchemePolyfills",Y1),Y1.install=bD,typeof b<"u"&&b.exports&&(b.exports=Y1)}).call(l,o,o,void 0);for(var f in l.shaka)r[f]=l.shaka[f]})()})(VU);const Yy=Sb(VU),of=class of{static async setup_stream(o,l,f){if(this.licenseUrl=l,this.customDrmHeaders=f,!o.mediaKeys)try{const p=await this.get_media_keys(o);if(p){await o.setMediaKeys(p.mediaKey);const S=p.mediaKey.createSession();this.on_handle_license_messageEvent=async b=>{await this.handle_license_messageEvent(p.mediaKey,S,b)},this.on_handle_encrypted_event=async b=>{await this.handle_encrypted_event(p,S,b)},S.addEventListener("message",this.on_handle_license_messageEvent),o.addEventListener("encrypted",this.on_handle_encrypted_event)}}catch(p){console.error("### DRMManager.setupStream error:",p)}}static async create_mediaKey_sessions(o){for(let l=0;l<o;l++){const p=await(await navigator.requestMediaKeySystemAccess("com.widevine.alpha",this.DRM_CONFIG)).createMediaKeys();this.mediaKey_pool.push({id:this.mediaKey_pool.length+1,mediaKey:p,htmlMediaElement:null,isInitialized:!1})}}static async release_mediaKeys(o){const l=this.mediaKey_pool.find(f=>f.htmlMediaElement===o);this.mediaKey_pool.length>0&&l&&(await o.setMediaKeys(null),l.htmlMediaElement=null,l.isInitialized=!1)}static get is_prepared(){return this.mediaKey_pool.length>1}static get_mediaKey_id(o){const l=this.mediaKey_pool.find(f=>f.mediaKey===o);return l?l.id:null}static async get_media_keys(o){let l=this.mediaKey_pool.find(f=>f.htmlMediaElement===o);if(l)return l;if((this.mediaKey_pool.length<=0||this.mediaKey_pool.every(f=>f.htmlMediaElement))&&await this.create_mediaKey_sessions(1),l=this.mediaKey_pool.find(f=>!f.htmlMediaElement),l)return l.htmlMediaElement=o,l;throw new Error("No media keys available")}static async handle_license_messageEvent(o,l,f){try{const p=f.message.byteLength;console.log(p,"byteLength");let S;p===2?S=p.toString():S="".concat(this.get_mediaKey_id(o),"-").concat(p);let b;this.license_cache.has(S)?(console.log("using cached licence"),b=this.license_cache.get(S)):(b=await(await fetch(this.licenseUrl,{method:"POST",body:f.message,headers:{"Content-Type":"application/octet-stream",...this.customDrmHeaders}})).arrayBuffer(),b?this.license_cache.set(S,b):console.error("License response is null")),b?await l.update(b):console.error("License not found in cache and could not be fetched")}catch(p){console.error("Error during license acquisition: ".concat(p))}}static async handle_encrypted_event(o,l,f){if(f.initDataType&&f.initData)try{if(!o.isInitialized){o.isInitialized=!0;const p=this.mediaKey_pool.findIndex(S=>S.id===o.id);p!==-1&&(this.mediaKey_pool[p]=o),await l.generateRequest(f.initDataType,f.initData)}}catch(p){console.error("Failed to generate a license request: ".concat(p))}else console.error("Encrypted event is missing initData or initDataType")}};of.licenseUrl="",of.customDrmHeaders={},of.license_cache=new Map,of.mediaKey_pool=[],of.DRM_CONFIG=[{keySystem:"com.widevine.alpha",initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"'},{contentType:'video/mp4; codecs="avc1.64001f"'},{contentType:'video/mp4; codecs="avc1.64001e"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}],sessionTypes:["temporary"],persistentState:"optional",distinctiveIdentifier:"optional"}];let lb=of;class Bz extends KU{constructor(o){var l;super(o),this.name="ShakaEngine",this.addPolicyToRequests=(f,p)=>{switch(f){case Yy.net.NetworkingEngine.RequestType.MANIFEST:case Yy.net.NetworkingEngine.RequestType.SEGMENT:if(!this.options.policyQuery||!this.options.policyQuery.startsWith("?"))break;p.uris[0]+=this.options.policyQuery;break;case Yy.net.NetworkingEngine.RequestType.LICENSE:if(!this.options.customLicenceRequestHeaders)break;Object.entries(this.options.customLicenceRequestHeaders).forEach(([S,b])=>{p.headers[S]=b});break}},this.addPolicyToRequests=this.addPolicyToRequests.bind(this),this.player=new Yy.Player,this.options.widevineLicenseUrl&&this.player.configure({drm:{servers:{"com.widevine.alpha":this.options.keepProtectionData===!1?this.options.widevineLicenseUrl:" "}},streaming:{bufferingGoal:120,rebufferingGoal:60,bufferBehind:0}}),(l=this.player.getNetworkingEngine())==null||l.registerRequestFilter(this.addPolicyToRequests)}destroy(){this.player&&this.player.destroy(),super.destroy()}async load(o){var l;if(this.player&&o){if(this.options.widevineLicenseUrl&&this.options.keepProtectionData!==!1)try{await this.player.unload(),await lb.setup_stream(this.options.element,this.options.widevineLicenseUrl,(l=this.options.customLicenceRequestHeaders)!=null?l:{})}catch(f){console.log(f)}await this.player.attach(this.options.element),await this.player.load(o,void 0)}}}class jz extends If{constructor(o){super(),this.options=o,this.options.preferredTech==="shaka"?this.engine=new Bz(o):this.engine=new Uz(o),this.engine.onAny(this.propagateEvent.bind(this))}get playerEngine(){return this.engine}get videoElement(){return this.engine.video}propagateEvent(o,l){this.emit(o,l)}destroy(){this.engine.destroy()}get stats(){return this.engine.getStats()}async load(o,l){this.currentSource=o,await this.engine.load(o,l)}}class Zz extends If{constructor(o){var l;super(),this.options=o,this._eventsEmitted=!1,this.eventClock=o.eventClock,this.containerElement=o.containerElement,this.videoElement=document.createElement("video"),(l=document.querySelector("video"))==null||l.remove(),this.containerElement.appendChild(this.videoElement),this.player=new jz({autoPlay:!1,...o.playerOptions,element:this.videoElement})}get currentSource(){var o;return(o=this.player)==null?void 0:o.currentSource}get currentCamera(){return this._currentCamera}get stats(){var o;return(o=this.player)==null?void 0:o.engine.getStats()}logPlayerStuff(){console.log("Bitrate",this.player.engine.video.getVideoPlaybackQuality()),console.log("Time",this.player.engine.video.currentTime),console.log("Paused",this.player.engine.video.paused)}propagateEvent(o,l){this.emit(o,l)}async load(o,l,f){return this.eventClock.loading=!0,new Promise((p,S)=>{try{if(this.eventClock.playerSyncer.disconnectMedia(),!this.player)throw new Error("Found no ImagienPlayer to use :( ");this._eventsEmitted||(this.player.onAny(this.propagateEvent.bind(this)),this._eventsEmitted=!0),this.player.load(l,f).then(()=>{this.player.once("playing",()=>{this._currentCamera=o,this.eventClock.playerSyncer.connectMediaElement(this.videoElement,((f==null?void 0:f.eventOffset)||0)-((f==null?void 0:f.reelOffset)||0))}),this.eventClock.loading=!1;const b=((f==null?void 0:f.eventOffset)||0)-((f==null?void 0:f.reelOffset)||0),g=this.eventClock.getExpectedPositionInSeconds()-b;Math.sign(g)<0?setTimeout(()=>{this.videoElement.play(),p()},Math.abs(g)*1e3):(this.videoElement.currentTime=g,this.videoElement.play(),p())})}catch(b){console.error(b),S(b)}})}async requestFullscreen(){await this.containerElement.requestFullscreen()}async exitFullscreen(){await document.exitFullscreen()}destroy(){super.destroy(),this.player.destroy()}}var ag=function(r){return r&&r.Math===Math&&r},Ga=ag(typeof globalThis=="object"&&globalThis)||ag(typeof window=="object"&&window)||ag(typeof self=="object"&&self)||ag(typeof iu=="object"&&iu)||ag(typeof iu=="object"&&iu)||function(){return this}()||Function("return this")(),BC={},ms=function(r){try{return!!r()}catch(o){return!0}},Gz=ms,vc=!Gz(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),qz=ms,jC=!qz(function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")}),Hz=jC,Wy=Function.prototype.call,Al=Hz?Wy.bind(Wy):function(){return Wy.apply(Wy,arguments)},zU={},YU={}.propertyIsEnumerable,WU=Object.getOwnPropertyDescriptor,Kz=WU&&!YU.call({1:2},1);zU.f=Kz?function(o){var l=WU(this,o);return!!l&&l.enumerable}:YU;var $U=function(r,o){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:o}},XU=jC,QU=Function.prototype,cb=QU.call,Vz=XU&&QU.bind.bind(cb,cb),Aa=XU?Vz:function(r){return function(){return cb.apply(r,arguments)}},JU=Aa,zz=JU({}.toString),Yz=JU("".slice),mE=function(r){return Yz(zz(r),8,-1)},Wz=Aa,$z=ms,Xz=mE,kA=Object,Qz=Wz("".split),Jz=$z(function(){return!kA("z").propertyIsEnumerable(0)})?function(r){return Xz(r)==="String"?Qz(r,""):kA(r)}:kA,vE=function(r){return r==null},eY=vE,tY=TypeError,am=function(r){if(eY(r))throw new tY("Can't call method on "+r);return r},nY=Jz,rY=am,yE=function(r){return nY(rY(r))},FA=typeof document=="object"&&document.all,qa=typeof FA>"u"&&FA!==void 0?function(r){return typeof r=="function"||r===FA}:function(r){return typeof r=="function"},iY=qa,bh=function(r){return typeof r=="object"?r!==null:iY(r)},UA=Ga,oY=qa,aY=function(r){return oY(r)?r:void 0},ZC=function(r,o){return arguments.length<2?aY(UA[r]):UA[r]&&UA[r][o]},sY=Aa,eB=sY({}.isPrototypeOf),uY=typeof navigator<"u"&&String(navigator.userAgent)||"",tB=Ga,BA=uY,l3=tB.process,c3=tB.Deno,f3=l3&&l3.versions||c3&&c3.version,d3=f3&&f3.v8,ru,j0;d3&&(ru=d3.split("."),j0=ru[0]>0&&ru[0]<4?1:+(ru[0]+ru[1]));!j0&&BA&&(ru=BA.match(/Edge\/(\d+)/),(!ru||ru[1]>=74)&&(ru=BA.match(/Chrome\/(\d+)/),ru&&(j0=+ru[1])));var lY=j0,h3=lY,cY=ms,fY=Ga,dY=fY.String,nB=!!Object.getOwnPropertySymbols&&!cY(function(){var r=Symbol("symbol detection");return!dY(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&h3&&h3<41}),hY=nB,rB=hY&&!Symbol.sham&&typeof Symbol.iterator=="symbol",pY=ZC,gY=qa,mY=eB,vY=rB,yY=Object,iB=vY?function(r){return typeof r=="symbol"}:function(r){var o=pY("Symbol");return gY(o)&&mY(o.prototype,yY(r))},EY=String,_Y=function(r){try{return EY(r)}catch(o){return"Object"}},TY=qa,SY=_Y,wY=TypeError,AY=function(r){if(TY(r))return r;throw new wY(SY(r)+" is not a function")},IY=AY,bY=vE,GC=function(r,o){var l=r[o];return bY(l)?void 0:IY(l)},jA=Al,ZA=qa,GA=bh,CY=TypeError,RY=function(r,o){var l,f;if(o==="string"&&ZA(l=r.toString)&&!GA(f=jA(l,r))||ZA(l=r.valueOf)&&!GA(f=jA(l,r))||o!=="string"&&ZA(l=r.toString)&&!GA(f=jA(l,r)))return f;throw new CY("Can't convert object to primitive value")},oB={exports:{}},p3=Ga,NY=Object.defineProperty,qC=function(r,o){try{NY(p3,r,{value:o,configurable:!0,writable:!0})}catch(l){p3[r]=o}return o},xY=Ga,MY=qC,g3="__core-js_shared__",m3=oB.exports=xY[g3]||MY(g3,{});(m3.versions||(m3.versions=[])).push({version:"3.37.1",mode:"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var HC=oB.exports,v3=HC,KC=function(r,o){return v3[r]||(v3[r]=o||{})},DY=am,PY=Object,aB=function(r){return PY(DY(r))},OY=Aa,LY=aB,kY=OY({}.hasOwnProperty),yc=Object.hasOwn||function(o,l){return kY(LY(o),l)},FY=Aa,UY=0,BY=Math.random(),jY=FY(1 .toString),sB=function(r){return"Symbol("+(r===void 0?"":r)+")_"+jY(++UY+BY,36)},ZY=Ga,GY=KC,y3=yc,qY=sB,HY=nB,KY=rB,rh=ZY.Symbol,qA=GY("wks"),VY=KY?rh.for||rh:rh&&rh.withoutSetter||qY,Rf=function(r){return y3(qA,r)||(qA[r]=HY&&y3(rh,r)?rh[r]:VY("Symbol."+r)),qA[r]},zY=Al,E3=bh,_3=iB,YY=GC,WY=RY,$Y=Rf,XY=TypeError,QY=$Y("toPrimitive"),JY=function(r,o){if(!E3(r)||_3(r))return r;var l=YY(r,QY),f;if(l){if(o===void 0&&(o="default"),f=zY(l,r,o),!E3(f)||_3(f))return f;throw new XY("Can't convert object to primitive value")}return o===void 0&&(o="number"),WY(r,o)},eW=JY,tW=iB,uB=function(r){var o=eW(r,"string");return tW(o)?o:o+""},nW=Ga,T3=bh,fb=nW.document,rW=T3(fb)&&T3(fb.createElement),lB=function(r){return rW?fb.createElement(r):{}},iW=vc,oW=ms,aW=lB,cB=!iW&&!oW(function(){return Object.defineProperty(aW("div"),"a",{get:function(){return 7}}).a!==7}),sW=vc,uW=Al,lW=zU,cW=$U,fW=yE,dW=uB,hW=yc,pW=cB,S3=Object.getOwnPropertyDescriptor;BC.f=sW?S3:function(o,l){if(o=fW(o),l=dW(l),pW)try{return S3(o,l)}catch(f){}if(hW(o,l))return cW(!uW(lW.f,o,l),o[l])};var sm={},gW=vc,mW=ms,fB=gW&&mW(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),vW=bh,yW=String,EW=TypeError,Nf=function(r){if(vW(r))return r;throw new EW(yW(r)+" is not an object")},_W=vc,TW=cB,SW=fB,$y=Nf,w3=uB,wW=TypeError,HA=Object.defineProperty,AW=Object.getOwnPropertyDescriptor,KA="enumerable",VA="configurable",zA="writable";sm.f=_W?SW?function(o,l,f){if($y(o),l=w3(l),$y(f),typeof o=="function"&&l==="prototype"&&"value"in f&&zA in f&&!f[zA]){var p=AW(o,l);p&&p[zA]&&(o[l]=f.value,f={configurable:VA in f?f[VA]:p[VA],enumerable:KA in f?f[KA]:p[KA],writable:!1})}return HA(o,l,f)}:HA:function(o,l,f){if($y(o),l=w3(l),$y(f),TW)try{return HA(o,l,f)}catch(p){}if("get"in f||"set"in f)throw new wW("Accessors not supported");return"value"in f&&(o[l]=f.value),o};var IW=vc,bW=sm,CW=$U,VC=IW?function(r,o,l){return bW.f(r,o,CW(1,l))}:function(r,o,l){return r[o]=l,r},dB={exports:{}},db=vc,RW=yc,hB=Function.prototype,NW=db&&Object.getOwnPropertyDescriptor,zC=RW(hB,"name"),xW=zC&&(function(){}).name==="something",MW=zC&&(!db||db&&NW(hB,"name").configurable),DW={EXISTS:zC,PROPER:xW,CONFIGURABLE:MW},PW=Aa,OW=qa,hb=HC,LW=PW(Function.toString);OW(hb.inspectSource)||(hb.inspectSource=function(r){return LW(r)});var kW=hb.inspectSource,FW=Ga,UW=qa,A3=FW.WeakMap,BW=UW(A3)&&/native code/.test(String(A3)),jW=KC,ZW=sB,I3=jW("keys"),pB=function(r){return I3[r]||(I3[r]=ZW(r))},YC={},GW=BW,gB=Ga,qW=bh,HW=VC,YA=yc,WA=HC,KW=pB,VW=YC,b3="Object already initialized",pb=gB.TypeError,zW=gB.WeakMap,Z0,zg,G0,YW=function(r){return G0(r)?zg(r):Z0(r,{})},WW=function(r){return function(o){var l;if(!qW(o)||(l=zg(o)).type!==r)throw new pb("Incompatible receiver, "+r+" required");return l}};if(GW||WA.state){var Ru=WA.state||(WA.state=new zW);Ru.get=Ru.get,Ru.has=Ru.has,Ru.set=Ru.set,Z0=function(r,o){if(Ru.has(r))throw new pb(b3);return o.facade=r,Ru.set(r,o),o},zg=function(r){return Ru.get(r)||{}},G0=function(r){return Ru.has(r)}}else{var Zd=KW("state");VW[Zd]=!0,Z0=function(r,o){if(YA(r,Zd))throw new pb(b3);return o.facade=r,HW(r,Zd,o),o},zg=function(r){return YA(r,Zd)?r[Zd]:{}},G0=function(r){return YA(r,Zd)}}var mB={set:Z0,get:zg,has:G0,enforce:YW,getterFor:WW},WC=Aa,$W=ms,XW=qa,Xy=yc,gb=vc,QW=DW.CONFIGURABLE,JW=kW,vB=mB,e$=vB.enforce,t$=vB.get,C3=String,d0=Object.defineProperty,n$=WC("".slice),r$=WC("".replace),i$=WC([].join),o$=gb&&!$W(function(){return d0(function(){},"length",{value:8}).length!==8}),a$=String(String).split("String"),s$=dB.exports=function(r,o,l){n$(C3(o),0,7)==="Symbol("&&(o="["+r$(C3(o),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),l&&l.getter&&(o="get "+o),l&&l.setter&&(o="set "+o),(!Xy(r,"name")||QW&&r.name!==o)&&(gb?d0(r,"name",{value:o,configurable:!0}):r.name=o),o$&&l&&Xy(l,"arity")&&r.length!==l.arity&&d0(r,"length",{value:l.arity});try{l&&Xy(l,"constructor")&&l.constructor?gb&&d0(r,"prototype",{writable:!1}):r.prototype&&(r.prototype=void 0)}catch(p){}var f=e$(r);return Xy(f,"source")||(f.source=i$(a$,typeof o=="string"?o:"")),r};Function.prototype.toString=s$(function(){return XW(this)&&t$(this).source||JW(this)},"toString");var u$=dB.exports,l$=qa,c$=sm,f$=u$,d$=qC,yB=function(r,o,l,f){f||(f={});var p=f.enumerable,S=f.name!==void 0?f.name:o;if(l$(l)&&f$(l,S,f),f.global)p?r[o]=l:d$(o,l);else{try{f.unsafe?r[o]&&(p=!0):delete r[o]}catch(b){}p?r[o]=l:c$.f(r,o,{value:l,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return r},EB={},h$=Math.ceil,p$=Math.floor,g$=Math.trunc||function(o){var l=+o;return(l>0?p$:h$)(l)},m$=g$,EE=function(r){var o=+r;return o!==o||o===0?0:m$(o)},v$=EE,y$=Math.max,E$=Math.min,_$=function(r,o){var l=v$(r);return l<0?y$(l+o,0):E$(l,o)},T$=EE,S$=Math.min,_B=function(r){var o=T$(r);return o>0?S$(o,9007199254740991):0},w$=_B,A$=function(r){return w$(r.length)},I$=yE,b$=_$,C$=A$,R3=function(r){return function(o,l,f){var p=I$(o),S=C$(p);if(S===0)return!r&&-1;var b=b$(f,S),g;if(r&&l!==l){for(;S>b;)if(g=p[b++],g!==g)return!0}else for(;S>b;b++)if((r||b in p)&&p[b]===l)return r||b||0;return!r&&-1}},R$={includes:R3(!0),indexOf:R3(!1)},N$=Aa,$A=yc,x$=yE,M$=R$.indexOf,D$=YC,N3=N$([].push),TB=function(r,o){var l=x$(r),f=0,p=[],S;for(S in l)!$A(D$,S)&&$A(l,S)&&N3(p,S);for(;o.length>f;)$A(l,S=o[f++])&&(~M$(p,S)||N3(p,S));return p},$C=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],P$=TB,O$=$C,L$=O$.concat("length","prototype");EB.f=Object.getOwnPropertyNames||function(o){return P$(o,L$)};var SB={};SB.f=Object.getOwnPropertySymbols;var k$=ZC,F$=Aa,U$=EB,B$=SB,j$=Nf,Z$=F$([].concat),G$=k$("Reflect","ownKeys")||function(o){var l=U$.f(j$(o)),f=B$.f;return f?Z$(l,f(o)):l},x3=yc,q$=G$,H$=BC,K$=sm,V$=function(r,o,l){for(var f=q$(o),p=K$.f,S=H$.f,b=0;b<f.length;b++){var g=f[b];!x3(r,g)&&!(l&&x3(l,g))&&p(r,g,S(o,g))}},z$=ms,Y$=qa,W$=/#|\.prototype\./,um=function(r,o){var l=X$[$$(r)];return l===J$?!0:l===Q$?!1:Y$(o)?z$(o):!!o},$$=um.normalize=function(r){return String(r).replace(W$,".").toLowerCase()},X$=um.data={},Q$=um.NATIVE="N",J$=um.POLYFILL="P",eX=um,Qy=Ga,tX=BC.f,nX=VC,rX=yB,iX=qC,oX=V$,aX=eX,wB=function(r,o){var l=r.target,f=r.global,p=r.stat,S,b,g,w,F,C;if(f?b=Qy:p?b=Qy[l]||iX(l,{}):b=Qy[l]&&Qy[l].prototype,b)for(g in o){if(F=o[g],r.dontCallGetSet?(C=tX(b,g),w=C&&C.value):w=b[g],S=aX(f?g:l+(p?".":"#")+g,r.forced),!S&&w!==void 0){if(typeof F==typeof w)continue;oX(F,w)}(r.sham||w&&w.sham)&&nX(F,"sham",!0),rX(b,g,F,r)}},sX=bh,uX=mE,lX=Rf,cX=lX("match"),fX=function(r){var o;return sX(r)&&((o=r[cX])!==void 0?!!o:uX(r)==="RegExp")},dX=Rf,hX=dX("toStringTag"),AB={};AB[hX]="z";var pX=String(AB)==="[object z]",gX=pX,mX=qa,h0=mE,vX=Rf,yX=vX("toStringTag"),EX=Object,_X=h0(function(){return arguments}())==="Arguments",TX=function(r,o){try{return r[o]}catch(l){}},SX=gX?h0:function(r){var o,l,f;return r===void 0?"Undefined":r===null?"Null":typeof(l=TX(o=EX(r),yX))=="string"?l:_X?h0(o):(f=h0(o))==="Object"&&mX(o.callee)?"Arguments":f},wX=SX,AX=String,_E=function(r){if(wX(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return AX(r)},IX=Nf,IB=function(){var r=IX(this),o="";return r.hasIndices&&(o+="d"),r.global&&(o+="g"),r.ignoreCase&&(o+="i"),r.multiline&&(o+="m"),r.dotAll&&(o+="s"),r.unicode&&(o+="u"),r.unicodeSets&&(o+="v"),r.sticky&&(o+="y"),o},bX=Al,CX=yc,RX=eB,NX=IB,M3=RegExp.prototype,xX=function(r){var o=r.flags;return o===void 0&&!("flags"in M3)&&!CX(r,"flags")&&RX(M3,r)?bX(NX,r):o},XC=Aa,MX=aB,DX=Math.floor,XA=XC("".charAt),PX=XC("".replace),QA=XC("".slice),OX=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,LX=/\$([$&'`]|\d{1,2})/g,bB=function(r,o,l,f,p,S){var b=l+r.length,g=f.length,w=LX;return p!==void 0&&(p=MX(p),w=OX),PX(S,w,function(F,C){var y;switch(XA(C,0)){case"$":return"$";case"&":return r;case"`":return QA(o,0,l);case"'":return QA(o,b);case"<":y=p[QA(C,1,-1)];break;default:var v=+C;if(v===0)return F;if(v>g){var D=DX(v/10);return D===0?F:D<=g?f[D-1]===void 0?XA(C,1):f[D-1]+XA(C,1):F}y=f[v-1]}return y===void 0?"":y})},kX=wB,FX=Al,QC=Aa,D3=am,UX=qa,BX=vE,jX=fX,sg=_E,ZX=GC,GX=xX,qX=bB,HX=Rf,KX=HX("replace"),VX=TypeError,JA=QC("".indexOf);QC("".replace);var P3=QC("".slice),zX=Math.max;kX({target:"String",proto:!0},{replaceAll:function(o,l){var f=D3(this),p,S,b,g,w,F,C,y,v,D=0,m=0,T="";if(!BX(o)){if(p=jX(o),p&&(S=sg(D3(GX(o))),!~JA(S,"g")))throw new VX("`.replaceAll` does not allow non-global regexes");if(b=ZX(o,KX),b)return FX(b,o,f,l)}for(g=sg(f),w=sg(o),F=UX(l),F||(l=sg(l)),C=w.length,y=zX(1,C),D=JA(g,w);D!==-1;)v=F?sg(l(w,D,g)):qX(w,g,D,[],void 0,l),T+=P3(g,m,D)+v,m=D+C,D=D+y>g.length?-1:JA(g,w,D+y);return m<g.length&&(T+=P3(g,m)),T}});var JC=ms,YX=Ga,eR=YX.RegExp,tR=JC(function(){var r=eR("a","y");return r.lastIndex=2,r.exec("abcd")!==null}),WX=tR||JC(function(){return!eR("a","y").sticky}),$X=tR||JC(function(){var r=eR("^r","gy");return r.lastIndex=2,r.exec("str")!==null}),XX={BROKEN_CARET:$X,MISSED_STICKY:WX,UNSUPPORTED_Y:tR},CB={},QX=TB,JX=$C,eQ=Object.keys||function(o){return QX(o,JX)},tQ=vc,nQ=fB,rQ=sm,iQ=Nf,oQ=yE,aQ=eQ;CB.f=tQ&&!nQ?Object.defineProperties:function(o,l){iQ(o);for(var f=oQ(l),p=aQ(l),S=p.length,b=0,g;S>b;)rQ.f(o,g=p[b++],f[g]);return o};var sQ=ZC,uQ=sQ("document","documentElement"),lQ=Nf,cQ=CB,O3=$C,fQ=YC,dQ=uQ,hQ=lB,pQ=pB,L3=">",k3="<",mb="prototype",vb="script",RB=pQ("IE_PROTO"),eI=function(){},NB=function(r){return k3+vb+L3+r+k3+"/"+vb+L3},F3=function(r){r.write(NB("")),r.close();var o=r.parentWindow.Object;return r=null,o},gQ=function(){var r=hQ("iframe"),o="java"+vb+":",l;return r.style.display="none",dQ.appendChild(r),r.src=String(o),l=r.contentWindow.document,l.open(),l.write(NB("document.F=Object")),l.close(),l.F},Jy,p0=function(){try{Jy=new ActiveXObject("htmlfile")}catch(o){}p0=typeof document<"u"?document.domain&&Jy?F3(Jy):gQ():F3(Jy);for(var r=O3.length;r--;)delete p0[mb][O3[r]];return p0()};fQ[RB]=!0;var mQ=Object.create||function(o,l){var f;return o!==null?(eI[mb]=lQ(o),f=new eI,eI[mb]=null,f[RB]=o):f=p0(),l===void 0?f:cQ.f(f,l)},vQ=ms,yQ=Ga,EQ=yQ.RegExp,_Q=vQ(function(){var r=EQ(".","s");return!(r.dotAll&&r.test("\n")&&r.flags==="s")}),TQ=ms,SQ=Ga,wQ=SQ.RegExp,AQ=TQ(function(){var r=wQ("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"}),ih=Al,TE=Aa,IQ=_E,bQ=IB,CQ=XX,RQ=KC,NQ=mQ,xQ=mB.get,MQ=_Q,DQ=AQ,PQ=RQ("native-string-replace",String.prototype.replace),q0=RegExp.prototype.exec,yb=q0,OQ=TE("".charAt),LQ=TE("".indexOf),kQ=TE("".replace),tI=TE("".slice),Eb=function(){var r=/a/,o=/b*/g;return ih(q0,r,"a"),ih(q0,o,"a"),r.lastIndex!==0||o.lastIndex!==0}(),xB=CQ.BROKEN_CARET,_b=/()??/.exec("")[1]!==void 0,FQ=Eb||_b||xB||MQ||DQ;FQ&&(yb=function(o){var l=this,f=xQ(l),p=IQ(o),S=f.raw,b,g,w,F,C,y,v;if(S)return S.lastIndex=l.lastIndex,b=ih(yb,S,p),l.lastIndex=S.lastIndex,b;var D=f.groups,m=xB&&l.sticky,T=ih(bQ,l),U=l.source,x=0,_=p;if(m&&(T=kQ(T,"y",""),LQ(T,"g")===-1&&(T+="g"),_=tI(p,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&OQ(p,l.lastIndex-1)!=="\n")&&(U="(?: "+U+")",_=" "+_,x++),g=new RegExp("^(?:"+U+")",T)),_b&&(g=new RegExp("^"+U+"$(?!\\s)",T)),Eb&&(w=l.lastIndex),F=ih(q0,m?g:l,_),m?F?(F.input=tI(F.input,x),F[0]=tI(F[0],x),F.index=l.lastIndex,l.lastIndex+=F[0].length):l.lastIndex=0:Eb&&F&&(l.lastIndex=l.global?F.index+F[0].length:w),_b&&F&&F.length>1&&ih(PQ,F[0],g,function(){for(C=1;C<arguments.length-2;C++)arguments[C]===void 0&&(F[C]=void 0)}),F&&D)for(F.groups=y=NQ(null),C=0;C<D.length;C++)v=D[C],y[v[0]]=F[v[1]];return F});var nR=yb,UQ=wB,U3=nR;UQ({target:"RegExp",proto:!0,forced:/./.exec!==U3},{exec:U3});var BQ=jC,MB=Function.prototype,B3=MB.apply,j3=MB.call,jQ=typeof Reflect=="object"&&Reflect.apply||(BQ?j3.bind(B3):function(){return j3.apply(B3,arguments)}),Z3=Al,G3=yB,ZQ=nR,q3=ms,DB=Rf,GQ=VC,qQ=DB("species"),nI=RegExp.prototype,HQ=function(r,o,l,f){var p=DB(r),S=!q3(function(){var F={};return F[p]=function(){return 7},""[r](F)!==7}),b=S&&!q3(function(){var F=!1,C=/a/;return r==="split"&&(C={},C.constructor={},C.constructor[qQ]=function(){return C},C.flags="",C[p]=/./[p]),C.exec=function(){return F=!0,null},C[p](""),!F});if(!S||!b||l){var g=/./[p],w=o(p,""[r],function(F,C,y,v,D){var m=C.exec;return m===ZQ||m===nI.exec?S&&!D?{done:!0,value:Z3(g,C,y,v)}:{done:!0,value:Z3(F,y,C,v)}:{done:!1}});G3(String.prototype,r,w[0]),G3(nI,p,w[1])}f&&GQ(nI[p],"sham",!0)},rR=Aa,KQ=EE,VQ=_E,zQ=am,YQ=rR("".charAt),H3=rR("".charCodeAt),WQ=rR("".slice),K3=function(r){return function(o,l){var f=VQ(zQ(o)),p=KQ(l),S=f.length,b,g;return p<0||p>=S?r?"":void 0:(b=H3(f,p),b<55296||b>56319||p+1===S||(g=H3(f,p+1))<56320||g>57343?r?YQ(f,p):b:r?WQ(f,p,p+2):(b-55296<<10)+(g-56320)+65536)}},$Q={codeAt:K3(!1),charAt:K3(!0)},XQ=$Q.charAt,QQ=function(r,o,l){return o+(l?XQ(r,o).length:1)},V3=Al,JQ=Nf,eJ=qa,tJ=mE,nJ=nR,rJ=TypeError,iJ=function(r,o){var l=r.exec;if(eJ(l)){var f=V3(l,r,o);return f!==null&&JQ(f),f}if(tJ(r)==="RegExp")return V3(nJ,r,o);throw new rJ("RegExp#exec called on incompatible receiver")},oJ=jQ,z3=Al,SE=Aa,aJ=HQ,sJ=ms,uJ=Nf,lJ=qa,cJ=vE,fJ=EE,dJ=_B,Gd=_E,hJ=am,pJ=QQ,gJ=GC,mJ=bB,vJ=iJ,yJ=Rf,Tb=yJ("replace"),EJ=Math.max,_J=Math.min,TJ=SE([].concat),rI=SE([].push),Y3=SE("".indexOf),W3=SE("".slice),SJ=function(r){return r===void 0?r:String(r)},wJ=function(){return"a".replace(/./,"$0")==="$0"}(),$3=function(){return/./[Tb]?/./[Tb]("a","$0")==="":!1}(),AJ=!sJ(function(){var r=/./;return r.exec=function(){var o=[];return o.groups={a:"7"},o},"".replace(r,"$<a>")!=="7"});aJ("replace",function(r,o,l){var f=$3?"$":"$0";return[function(S,b){var g=hJ(this),w=cJ(S)?void 0:gJ(S,Tb);return w?z3(w,S,g,b):z3(o,Gd(g),S,b)},function(p,S){var b=uJ(this),g=Gd(p);if(typeof S=="string"&&Y3(S,f)===-1&&Y3(S,"$<")===-1){var w=l(o,b,g,S);if(w.done)return w.value}var F=lJ(S);F||(S=Gd(S));var C=b.global,y;C&&(y=b.unicode,b.lastIndex=0);for(var v=[],D;D=vJ(b,g),!(D===null||(rI(v,D),!C));){var m=Gd(D[0]);m===""&&(b.lastIndex=pJ(g,dJ(b.lastIndex),y))}for(var T="",U=0,x=0;x<v.length;x++){D=v[x];for(var _=Gd(D[0]),I=EJ(_J(fJ(D.index),g.length),0),R=[],j,z=1;z<D.length;z++)rI(R,SJ(D[z]));var W=D.groups;if(F){var X=TJ([_],R,I,g);W!==void 0&&rI(X,W),j=Gd(oJ(S,void 0,X))}else j=mJ(_,g,I,R,W,S);I>=U&&(T+=W3(g,U,I)+j,U=I+_.length)}return T+W3(g,U)}]},!AJ||!wJ||$3);var IJ=Ga,bJ=Aa,CJ=function(r,o){return bJ(IJ[r].prototype[o])},RJ=CJ;RJ("String","replaceAll");function iR(){const r=Ps(),o=Cf(),[l]=qU();return pn.useCallback(async(f,p)=>{var g;if(!l||!r)return;const S=(g=o==null?void 0:o.distributionUrl)!=null?g:"";let b=l.cameraURLTemplate;if(b=b.replace("{{baseURL}}",S),b=b.replace("{{folderName}}/",p.camera.folderName?p.camera.folderName+"/":""),b=b.replaceAll("{{assetName}}",p.camera.assetName||""),b!==f.currentSource&&o)return await f.load(p,b,{startTimeSeconds:r.getExpectedPositionInSeconds()-mi(p.camera.span.time,o.frameRate),eventOffset:mi(p.camera.span.time,o.frameRate),reelOffset:mi(p.camera.reelOffset,o.frameRate)})},[r,l,o])}function NJ(){const r=iR();return pn.useCallback(async(o,l)=>await r(o,l).then(),[r])}function xJ(){const r=Ps(),o=bf(),l=FC();pn.useEffect(()=>{if(!r||!o||!l)return;const f=({command:p,reference:S,start:b})=>{r.pausePlayStream(p,S,b)};return o.on("pausePlayStream",f),()=>{o.off("pausePlayStream",f)}},[r,o,l])}function MJ(r){const o=Ps(),l=Cf(),f=bf(),p=NJ(),S=iR();pn.useEffect(()=>{if(!f||!l||!o||!r)return;let b,g=[void 0,-1];const w=()=>{const T=o.getExpectedPositionInSeconds()<=0?0:o.getExpectedPositionInSeconds();return pE(l,T)[0]},F=T=>{g[0]=S(r,T),g[1]=T.index},C=T=>{if(g[0]&&g[1]===T.index){g[0].then(()=>{}),g=[void 0,-1];return}try{p(r,T)}catch(U){console.error("failed to play stream",U)}},y=()=>{const T=w();T&&F(T)},v=()=>{const T=w();T&&C(T)},D=({index:T})=>{var x;const U=(x=sb(T,l))!=null?x:ab(T,l,o);U&&F(U)},m=({index:T})=>{var x;const U=(x=sb(T,l))!=null?x:ab(T,l,o);U&&(F(U),b=setTimeout(()=>{C(U)},1900))};return f.on("cast",m),o.on("prepareStart",y),o.on("start",v),o.isLive?(o.preparePlayback(),v()):o.isInPrepare?y():console.log("HRRR"),()=>{f.off("prepareCast",D),f.off("cast",m),o.off("prepareStart",y),o.off("start",v),clearTimeout(b)}},[f,l,o,r,p,S])}function DJ(r){const o=om();pn.useEffect(()=>{if(!r||!o)return;const l=()=>{r.currentCamera&&o.updatePlaying(r.currentCamera)};return r.on("playing",l),()=>{r.off("playing",l)}},[r,o])}function PJ(r){const o=om(),l=Ps(),f=Cf(),p=iR();pn.useEffect(()=>{if(!f||!l||!r||!o)return;const S=({remainingTime:b})=>{const g=BU(f,l.getExpectedPositionInSeconds(),b,r.currentCamera);if(g)try{const w=p(r,g);o.once("ended",()=>{w.then(()=>{})})}catch(w){console.error("failed to load stream",w)}else o.once("ended",()=>{o.endEvent()})};return o.on("nearEnd",S),()=>{o.off("nearEnd",S)}},[f,l,r,p,o])}function OJ(r,o,l){const f=Sz(),p=Ps(),[S,b]=pn.useState(null);return pn.useEffect(()=>{const g=document.querySelector(r);if(g==null||!p||!l)return;const w=new Zz({containerElement:g,playerOptions:{autoPlay:!1,widevineLicenseUrl:o,policyQuery:l,preferredTech:"dashjs",customLicenceRequestHeaders:{"Api-version":"v1",Session:f}},eventClock:p});return b(w),()=>{w.destroy()}},[f,r,o,l,p]),S}function LJ(r){const o=Ps(),l=bf(),f=Cf(),p=om(),[S,b]=pn.useState(),[g,w]=pn.useState();return pn.useEffect(()=>{if(!f||!o||!r||!l||!p)return;const F=({index:y})=>{var v;w((v=sb(y,f))!=null?v:ab(y,f,o)),b(r.currentCamera)},C=()=>{const y=r.currentCamera;(y==null?void 0:y.camera.transition)==="mapAndClosing"&&(w(BU(f,o.getExpectedPositionInSeconds(),2,y)),b(y))};return l.on("cast",F),p.on("transition",C),()=>{l.off("cast",F),p.off("transition",C)}},[f,o,r,l,p]),[S,g]}function PB({x:r,y:o,mapScale:l}){const[f,p]=pn.useState(0),[S,b]=pn.useState(0),[g,w]=pn.useState(0),[F,C]=pn.useState(0),[y,v]=pn.useState(0);return pn.useEffect(()=>{const D=window.innerWidth,m=window.innerHeight,T=D/12,U=m/12;C(m/2-m*.05),v(D/m),p(r*T),b(o*U),w(T*l)},[r,o,l]),{scaledX:f,scaledY:S,size:g,baseY:F,aspectRatio:y}}const kJ="_container_18zg0_1",FJ="_fadeIn_18zg0_1",UJ="_content_18zg0_15",BJ="_scrollWrapper_18zg0_33",jJ="_scrollContainer_18zg0_47",ZJ="_poster_18zg0_85",ug={container:kJ,fadeIn:FJ,content:UJ,scrollWrapper:BJ,scrollContainer:jJ,poster:ZJ},GJ="_logoutWrapper_1fqns_1",qJ={logoutWrapper:GJ},oR=()=>{const r=()=>{const o=new Event("logout");document.dispatchEvent(o)};return gt.jsx("div",{className:qJ.logoutWrapper,children:gt.jsx(To,{onClick:r,focusKey:"LOGOUT",selfFocus:!0,children:"Logout"})})};var HJ=Object.defineProperty,H0=Object.getOwnPropertySymbols,OB=Object.prototype.hasOwnProperty,LB=Object.prototype.propertyIsEnumerable,X3=(r,o,l)=>o in r?HJ(r,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[o]=l,Yg=(r,o)=>{for(var l in o||(o={}))OB.call(o,l)&&X3(r,l,o[l]);if(H0)for(var l of H0(o))LB.call(o,l)&&X3(r,l,o[l]);return r},aR=(r,o)=>{var l={};for(var f in r)OB.call(r,f)&&o.indexOf(f)<0&&(l[f]=r[f]);if(r!=null&&H0)for(var f of H0(r))o.indexOf(f)<0&&LB.call(r,f)&&(l[f]=r[f]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var _f;(r=>{const o=class{constructor(w,F,C,y){if(this.version=w,this.errorCorrectionLevel=F,this.modules=[],this.isFunction=[],w<o.MIN_VERSION||w>o.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let v=[];for(let m=0;m<this.size;m++)v.push(!1);for(let m=0;m<this.size;m++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const D=this.addEccAndInterleave(C);if(this.drawCodewords(D),y==-1){let m=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const U=this.getPenaltyScore();U<m&&(y=T,m=U),this.applyMask(T)}}S(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(w,F){const C=r.QrSegment.makeSegments(w);return o.encodeSegments(C,F)}static encodeBinary(w,F){const C=r.QrSegment.makeBytes(w);return o.encodeSegments([C],F)}static encodeSegments(w,F,C=1,y=40,v=-1,D=!0){if(!(o.MIN_VERSION<=C&&C<=y&&y<=o.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let m,T;for(m=C;;m++){const I=o.getNumDataCodewords(m,F)*8,R=g.getTotalBits(w,m);if(R<=I){T=R;break}if(m>=y)throw new RangeError("Data too long")}for(const I of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])D&&T<=o.getNumDataCodewords(m,I)*8&&(F=I);let U=[];for(const I of w){f(I.mode.modeBits,4,U),f(I.numChars,I.mode.numCharCountBits(m),U);for(const R of I.getData())U.push(R)}S(U.length==T);const x=o.getNumDataCodewords(m,F)*8;S(U.length<=x),f(0,Math.min(4,x-U.length),U),f(0,(8-U.length%8)%8,U),S(U.length%8==0);for(let I=236;U.length<x;I^=253)f(I,8,U);let _=[];for(;_.length*8<U.length;)_.push(0);return U.forEach((I,R)=>_[R>>>3]|=I<<7-(R&7)),new o(m,F,_,v)}getModule(w,F){return 0<=w&&w<this.size&&0<=F&&F<this.size&&this.modules[F][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),F=w.length;for(let C=0;C<F;C++)for(let y=0;y<F;y++)C==0&&y==0||C==0&&y==F-1||C==F-1&&y==0||this.drawAlignmentPattern(w[C],w[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const F=this.errorCorrectionLevel.formatBits<<3|w;let C=F;for(let v=0;v<10;v++)C=C<<1^(C>>>9)*1335;const y=(F<<10|C)^21522;S(y>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,p(y,v));this.setFunctionModule(8,7,p(y,6)),this.setFunctionModule(8,8,p(y,7)),this.setFunctionModule(7,8,p(y,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,p(y,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,p(y,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,p(y,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let C=0;C<12;C++)w=w<<1^(w>>>11)*7973;const F=this.version<<12|w;S(F>>>18==0);for(let C=0;C<18;C++){const y=p(F,C),v=this.size-11+C%3,D=Math.floor(C/3);this.setFunctionModule(v,D,y),this.setFunctionModule(D,v,y)}}drawFinderPattern(w,F){for(let C=-4;C<=4;C++)for(let y=-4;y<=4;y++){const v=Math.max(Math.abs(y),Math.abs(C)),D=w+y,m=F+C;0<=D&&D<this.size&&0<=m&&m<this.size&&this.setFunctionModule(D,m,v!=2&&v!=4)}}drawAlignmentPattern(w,F){for(let C=-2;C<=2;C++)for(let y=-2;y<=2;y++)this.setFunctionModule(w+y,F+C,Math.max(Math.abs(y),Math.abs(C))!=1)}setFunctionModule(w,F,C){this.modules[F][w]=C,this.isFunction[F][w]=!0}addEccAndInterleave(w){const F=this.version,C=this.errorCorrectionLevel;if(w.length!=o.getNumDataCodewords(F,C))throw new RangeError("Invalid argument");const y=o.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][F],v=o.ECC_CODEWORDS_PER_BLOCK[C.ordinal][F],D=Math.floor(o.getNumRawDataModules(F)/8),m=y-D%y,T=Math.floor(D/y);let U=[];const x=o.reedSolomonComputeDivisor(v);for(let I=0,R=0;I<y;I++){let j=w.slice(R,R+T-v+(I<m?0:1));R+=j.length;const z=o.reedSolomonComputeRemainder(j,x);I<m&&j.push(0),U.push(j.concat(z))}let _=[];for(let I=0;I<U[0].length;I++)U.forEach((R,j)=>{(I!=T-v||j>=m)&&_.push(R[I])});return S(_.length==D),_}drawCodewords(w){if(w.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let F=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let y=0;y<this.size;y++)for(let v=0;v<2;v++){const D=C-v,T=(C+1&2)==0?this.size-1-y:y;!this.isFunction[T][D]&&F<w.length*8&&(this.modules[T][D]=p(w[F>>>3],7-(F&7)),F++)}}S(F==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let F=0;F<this.size;F++)for(let C=0;C<this.size;C++){let y;switch(w){case 0:y=(C+F)%2==0;break;case 1:y=F%2==0;break;case 2:y=C%3==0;break;case 3:y=(C+F)%3==0;break;case 4:y=(Math.floor(C/3)+Math.floor(F/2))%2==0;break;case 5:y=C*F%2+C*F%3==0;break;case 6:y=(C*F%2+C*F%3)%2==0;break;case 7:y=((C+F)%2+C*F%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[F][C]&&y&&(this.modules[F][C]=!this.modules[F][C])}}getPenaltyScore(){let w=0;for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[v][U]==D?(m++,m==5?w+=o.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),D||(w+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),D=this.modules[v][U],m=1);w+=this.finderPenaltyTerminateAndCount(D,m,T)*o.PENALTY_N3}for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[U][v]==D?(m++,m==5?w+=o.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),D||(w+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),D=this.modules[U][v],m=1);w+=this.finderPenaltyTerminateAndCount(D,m,T)*o.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let D=0;D<this.size-1;D++){const m=this.modules[v][D];m==this.modules[v][D+1]&&m==this.modules[v+1][D]&&m==this.modules[v+1][D+1]&&(w+=o.PENALTY_N2)}let F=0;for(const v of this.modules)F=v.reduce((D,m)=>D+(m?1:0),F);const C=this.size*this.size,y=Math.ceil(Math.abs(F*20-C*10)/C)-1;return S(0<=y&&y<=9),w+=y*o.PENALTY_N4,S(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,F=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let C=[6];for(let y=this.size-7;C.length<w;y-=F)C.splice(1,0,y);return C}}static getNumRawDataModules(w){if(w<o.MIN_VERSION||w>o.MAX_VERSION)throw new RangeError("Version number out of range");let F=(16*w+128)*w+64;if(w>=2){const C=Math.floor(w/7)+2;F-=(25*C-10)*C-55,w>=7&&(F-=36)}return S(208<=F&&F<=29648),F}static getNumDataCodewords(w,F){return Math.floor(o.getNumRawDataModules(w)/8)-o.ECC_CODEWORDS_PER_BLOCK[F.ordinal][w]*o.NUM_ERROR_CORRECTION_BLOCKS[F.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let F=[];for(let y=0;y<w-1;y++)F.push(0);F.push(1);let C=1;for(let y=0;y<w;y++){for(let v=0;v<F.length;v++)F[v]=o.reedSolomonMultiply(F[v],C),v+1<F.length&&(F[v]^=F[v+1]);C=o.reedSolomonMultiply(C,2)}return F}static reedSolomonComputeRemainder(w,F){let C=F.map(y=>0);for(const y of w){const v=y^C.shift();C.push(0),F.forEach((D,m)=>C[m]^=o.reedSolomonMultiply(D,v))}return C}static reedSolomonMultiply(w,F){if(w>>>8||F>>>8)throw new RangeError("Byte out of range");let C=0;for(let y=7;y>=0;y--)C=C<<1^(C>>>7)*285,C^=(F>>>y&1)*w;return S(C>>>8==0),C}finderPenaltyCountPatterns(w){const F=w[1];S(F<=this.size*3);const C=F>0&&w[2]==F&&w[3]==F*3&&w[4]==F&&w[5]==F;return(C&&w[0]>=F*4&&w[6]>=F?1:0)+(C&&w[6]>=F*4&&w[0]>=F?1:0)}finderPenaltyTerminateAndCount(w,F,C){return w&&(this.finderPenaltyAddHistory(F,C),F=0),F+=this.size,this.finderPenaltyAddHistory(F,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(w,F){F[0]==0&&(w+=this.size),F.pop(),F.unshift(w)}};let l=o;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=l;function f(w,F,C){if(F<0||F>31||w>>>F)throw new RangeError("Value out of range");for(let y=F-1;y>=0;y--)C.push(w>>>y&1)}function p(w,F){return(w>>>F&1)!=0}function S(w){if(!w)throw new Error("Assertion error")}const b=class{constructor(w,F,C){if(this.mode=w,this.numChars=F,this.bitData=C,F<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(w){let F=[];for(const C of w)f(C,8,F);return new b(b.Mode.BYTE,w.length,F)}static makeNumeric(w){if(!b.isNumeric(w))throw new RangeError("String contains non-numeric characters");let F=[];for(let C=0;C<w.length;){const y=Math.min(w.length-C,3);f(parseInt(w.substr(C,y),10),y*3+1,F),C+=y}return new b(b.Mode.NUMERIC,w.length,F)}static makeAlphanumeric(w){if(!b.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let F=[],C;for(C=0;C+2<=w.length;C+=2){let y=b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C))*45;y+=b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C+1)),f(y,11,F)}return C<w.length&&f(b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C)),6,F),new b(b.Mode.ALPHANUMERIC,w.length,F)}static makeSegments(w){return w==""?[]:b.isNumeric(w)?[b.makeNumeric(w)]:b.isAlphanumeric(w)?[b.makeAlphanumeric(w)]:[b.makeBytes(b.toUtf8ByteArray(w))]}static makeEci(w){let F=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)f(w,8,F);else if(w<16384)f(2,2,F),f(w,14,F);else if(w<1e6)f(6,3,F),f(w,21,F);else throw new RangeError("ECI assignment value out of range");return new b(b.Mode.ECI,0,F)}static isNumeric(w){return b.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return b.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,F){let C=0;for(const y of w){const v=y.mode.numCharCountBits(F);if(y.numChars>=1<<v)return 1/0;C+=4+v+y.bitData.length}return C}static toUtf8ByteArray(w){w=encodeURI(w);let F=[];for(let C=0;C<w.length;C++)w.charAt(C)!="%"?F.push(w.charCodeAt(C)):(F.push(parseInt(w.substr(C+1,2),16)),C+=2);return F}};let g=b;g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.QrSegment=g})(_f||(_f={}));(r=>{(o=>{const l=class{constructor(p,S){this.ordinal=p,this.formatBits=S}};let f=l;f.LOW=new l(0,1),f.MEDIUM=new l(1,0),f.QUARTILE=new l(2,3),f.HIGH=new l(3,2),o.Ecc=f})(r.QrCode||(r.QrCode={}))})(_f||(_f={}));(r=>{(o=>{const l=class{constructor(p,S){this.modeBits=p,this.numBitsCharCount=S}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};let f=l;f.NUMERIC=new l(1,[10,12,14]),f.ALPHANUMERIC=new l(2,[9,11,13]),f.BYTE=new l(4,[8,16,16]),f.KANJI=new l(8,[8,10,12]),f.ECI=new l(7,[0,0,0]),o.Mode=f})(r.QrSegment||(r.QrSegment={}))})(_f||(_f={}));var oh=_f;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var kB={L:oh.QrCode.Ecc.LOW,M:oh.QrCode.Ecc.MEDIUM,Q:oh.QrCode.Ecc.QUARTILE,H:oh.QrCode.Ecc.HIGH},FB=128,UB="L",BB="#FFFFFF",jB="#000000",ZB=!1,sR=4,KJ=.1;function GB(r,o=0){const l=[];return r.forEach(function(f,p){let S=null;f.forEach(function(b,g){if(!b&&S!==null){l.push("M".concat(S+o," ").concat(p+o,"h").concat(g-S,"v1H").concat(S+o,"z")),S=null;return}if(g===f.length-1){if(!b)return;S===null?l.push("M".concat(g+o,",").concat(p+o," h1v1H").concat(g+o,"z")):l.push("M".concat(S+o,",").concat(p+o," h").concat(g+1-S,"v1H").concat(S+o,"z"));return}b&&S===null&&(S=g)})}),l.join("")}function qB(r,o){return r.slice().map((l,f)=>f<o.y||f>=o.y+o.h?l:l.map((p,S)=>S<o.x||S>=o.x+o.w?p:!1))}function HB(r,o,l,f){if(f==null)return null;const p=l?sR:0,S=r.length+p*2,b=Math.floor(o*KJ),g=S/o,w=(f.width||b)*g,F=(f.height||b)*g,C=f.x==null?r.length/2-w/2:f.x*g,y=f.y==null?r.length/2-F/2:f.y*g;let v=null;if(f.excavate){let D=Math.floor(C),m=Math.floor(y),T=Math.ceil(w+C-D),U=Math.ceil(F+y-m);v={x:D,y:m,w:T,h:U}}return{x:C,y,h:F,w,excavation:v}}var VJ=function(){try{new Path2D().addPath(new Path2D)}catch(r){return!1}return!0}();function zJ(r){const o=r,{value:l,size:f=FB,level:p=UB,bgColor:S=BB,fgColor:b=jB,includeMargin:g=ZB,style:w,imageSettings:F}=o,C=aR(o,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),y=F==null?void 0:F.src,v=Xo.useRef(null),D=Xo.useRef(null),[m,T]=Xo.useState(!1);Xo.useEffect(()=>{if(v.current!=null){const _=v.current,I=_.getContext("2d");if(!I)return;let R=oh.QrCode.encodeText(l,kB[p]).getModules();const j=g?sR:0,z=R.length+j*2,W=HB(R,f,g,F),X=D.current,le=W!=null&&X!==null&&X.complete&&X.naturalHeight!==0&&X.naturalWidth!==0;le&&W.excavation!=null&&(R=qB(R,W.excavation));const N=window.devicePixelRatio||1;_.height=_.width=f*N;const $=f/z*N;I.scale($,$),I.fillStyle=S,I.fillRect(0,0,z,z),I.fillStyle=b,VJ?I.fill(new Path2D(GB(R,j))):R.forEach(function(fe,oe){fe.forEach(function(he,Ie){he&&I.fillRect(Ie+j,oe+j,1,1)})}),le&&I.drawImage(X,W.x+j,W.y+j,W.w,W.h)}}),Xo.useEffect(()=>{T(!1)},[y]);const U=Yg({height:f,width:f},w);let x=null;return y!=null&&(x=Xo.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{T(!0)},ref:D})),Xo.createElement(Xo.Fragment,null,Xo.createElement("canvas",Yg({style:U,height:f,width:f,ref:v},C)),x)}function YJ(r){const o=r,{value:l,size:f=FB,level:p=UB,bgColor:S=BB,fgColor:b=jB,includeMargin:g=ZB,imageSettings:w}=o,F=aR(o,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let C=oh.QrCode.encodeText(l,kB[p]).getModules();const y=g?sR:0,v=C.length+y*2,D=HB(C,f,g,w);let m=null;w!=null&&D!=null&&(D.excavation!=null&&(C=qB(C,D.excavation)),m=Xo.createElement("image",{xlinkHref:w.src,height:D.h,width:D.w,x:D.x+y,y:D.y+y,preserveAspectRatio:"none"}));const T=GB(C,y);return Xo.createElement("svg",Yg({height:f,width:f,viewBox:"0 0 ".concat(v," ").concat(v)},F),Xo.createElement("path",{fill:S,d:"M0,0 h".concat(v,"v").concat(v,"H0z"),shapeRendering:"crispEdges"}),Xo.createElement("path",{fill:b,d:T,shapeRendering:"crispEdges"}),m)}var wE=r=>{const o=r,{renderAs:l}=o,f=aR(o,["renderAs"]);return l==="svg"?Xo.createElement(YJ,Yg({},f)):Xo.createElement(zJ,Yg({},f))};function WJ({selfFocus:r,focusKey:o,src:l,showQr:f,qrUrl:p,...S}){const{ref:b,focused:g,focusSelf:w}=yl.useFocusable({onEnterPress:()=>{S.onClick()},focusKey:o});return pn.useEffect(()=>{r&&w()},[w,r]),gt.jsx("button",{...S,ref:b,className:"".concat(S.className||""," ").concat(g?ub.posterFocused:""),id:"rail_".concat(o),children:f?gt.jsx(wE,{className:ub.qrCode,bgColor:"white",fgColor:"black",value:p,size:720}):gt.jsx("img",{src:l})})}const KB=()=>{const[r,o]=pn.useState(0);return pn.useEffect(()=>{const l=p=>{o(p.keyCode)},f=()=>{o(0)};return document.addEventListener("keydown",l),document.addEventListener("keyup",f),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",f)}},[]),r};function $J(){const r=kC(),[o,l]=pn.useState(null),[f,p]=pn.useState(0),S=KB();function b(){var g;return(r==null?void 0:r.postScreen.offersCollection.items.length)>2&&((g=document.getElementById("rail_".concat(yl.getCurrentFocusKey())))==null?void 0:g.offsetLeft)-13||0}return pn.useEffect(()=>{S!==0&&l(null),p(b())},[S]),gt.jsx("div",{className:ug.container,children:gt.jsxs("div",{className:ug.content,children:[gt.jsx("h1",{children:r==null?void 0:r.postScreen.title}),gt.jsx("p",{className:"body-text",style:{opacity:.5},children:r==null?void 0:r.postScreen.body}),gt.jsx(oR,{}),gt.jsx("div",{className:ug.scrollWrapper,children:gt.jsx("div",{className:ug.scrollContainer,style:{left:-(f||0)},children:r&&r.postScreen.offersCollection.items.map((g,w)=>gt.jsx(WJ,{className:ug.poster,onClick:()=>{"".concat(w)!==yl.getCurrentFocusKey()?(yl.setFocus("".concat(w)),p(b())):l(w)},src:g.image.url,focusKey:"".concat(w),selfFocus:w===0,showQr:w===o,qrUrl:g.link},w))})})]})})}const XJ="_transitionWrapper_jyngr_1",QJ="_active_jyngr_17",JJ="_transition_jyngr_1",eee="_fadeOut_jyngr_1",tee="_hidden_jyngr_57",nee="_visible_jyngr_67",ree="_videoTitle_jyngr_77",iee="_fadeIn_jyngr_1",lg={transitionWrapper:XJ,active:QJ,transition:JJ,fadeOut:eee,hidden:tee,visible:nee,videoTitle:ree,fadeIn:iee},oee="_placeContainer_ywyae_1",aee="_place_ywyae_1",see="_background_ywyae_45",uee="_activePlace_ywyae_57",lee="_fadeOut_ywyae_1",cee="_normalPlace_ywyae_79",fee="_selectedPlace_ywyae_99",dee="_fadeIn_ywyae_1",hee="_pulseEffect_ywyae_1",pee="_title_ywyae_153",Jc={placeContainer:oee,place:aee,background:see,activePlace:uee,fadeOut:lee,normalPlace:cee,selectedPlace:fee,fadeIn:dee,pulseEffect:hee,title:pee};var Cs=(r=>(r.ACTIVE_PLACE="ActivePlace",r.SELECTED_PLACE="SelectedPlace",r.NORMAL_PLACE="NormalPlace",r))(Cs||{});const gee=({place:r,mapPlacesLength:o})=>{const l=PB({x:r.mapPosition.x,y:r.mapPosition.y,mapScale:r.mapScale}),f=pn.useMemo(()=>{switch(r.placeType){case Cs.ACTIVE_PLACE:return Jc.activePlace;case Cs.SELECTED_PLACE:return Jc.selectedPlace;case Cs.NORMAL_PLACE:default:return Jc.normalPlace}},[r]);return gt.jsx("div",{className:Jc.placeContainer,children:gt.jsxs("div",{className:"".concat(Jc.place," ").concat(f),style:{width:l.size,height:l.size,left:"calc(50% + ".concat(o>1?l.scaledX:0,"px)"),top:"calc(50% + ".concat(o>1?l.scaledY:0,"px)"),transform:"translate(-50%, -50%)"},children:[gt.jsx("div",{className:Jc.background}),(r.placeType===Cs.ACTIVE_PLACE||r.placeType===Cs.SELECTED_PLACE)&&gt.jsx("div",{className:"subheader-light ".concat(Jc.title),children:r.title})]})})},mee="_followContainer_1h8ds_1",vee="_follow_1h8ds_1",yee="_selectedFollow_1h8ds_35",Eee="_pulseEffect_1h8ds_1",_ee="_notSelectedFollow_1h8ds_79",Tee="_iconContainer_1h8ds_97",See="_labelContainer_1h8ds_131",qd={followContainer:mee,follow:vee,selectedFollow:yee,pulseEffect:Eee,notSelectedFollow:_ee,iconContainer:Tee,labelContainer:See},wee="_label_svzic_1",Aee={label:wee},Iee=({content:r,classNames:o=""})=>gt.jsx("div",{className:"".concat(Aee.label," ").concat(o," label"),children:r}),bee=({style:r})=>gt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 32 32",fill:"none",style:r,children:gt.jsx("path",{d:"M24 19L16 11L8 19",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),VB=({classNames:r,styles:o,color:l,stroke:f})=>gt.jsxs("svg",{className:r,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[gt.jsx("path",{d:"M96 176C140.183 176 176 140.183 176 96C176 51.8172 140.183 16 96 16C51.8172 16 16 51.8172 16 96C16 140.183 51.8172 176 96 176Z",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round",strokeLinejoin:"round"}),gt.jsx("path",{d:"M96 64V108",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round",strokeLinejoin:"round"}),gt.jsx("circle",{cx:"96",cy:"128",r:"8",fill:l||"white"})]}),Cee=({classNames:r,styles:o,color:l,stroke:f})=>gt.jsxs("svg",{className:r,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[gt.jsx("path",{d:"M11.1475 18.5801L152.567 160",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round",strokeLinejoin:"round"}),gt.jsx("circle",{cx:"96",cy:"160",r:"4",fill:"white"}),gt.jsx("path",{d:"M180.853 75.1472C169.71 64.0041 156.481 55.165 141.922 49.1344C127.363 43.1039 111.758 40 95.9998 40C83.9607 40 72.0117 41.8116 60.55 45.3557M11.147 75.1472C20.7929 65.5013 32.0017 57.5818 44.2834 51.716",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round"}),gt.jsx("path",{d:"M152.569 103.431C145.14 96.0028 136.321 90.11 126.615 86.0896C116.909 82.0693 106.506 80 96.0002 80C95.7328 80 95.4656 80.0013 95.1984 80.004M39.4316 103.431C46.8603 96.0028 55.6795 90.11 65.3855 86.0896C68.6182 84.7506 71.9282 83.628 75.2936 82.7262",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round"}),gt.jsx("path",{d:"M124.294 131.725C120.58 128.011 116.17 125.065 111.317 123.055C106.464 121.044 101.263 120.01 96.0099 120.01C90.757 120.01 85.5555 121.044 80.7025 123.055C75.8495 125.065 71.4399 128.011 67.7256 131.726",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round"})]}),Ree=()=>gt.jsxs("svg",{width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[gt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),gt.jsx("path",{d:"M149.333 96L120 125.333L106.667 112",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),Nee=()=>gt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",children:[gt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),gt.jsx("path",{d:"M144 96L112 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),gt.jsx("path",{d:"M112 96L144 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),xee=()=>gt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[gt.jsx("path",{d:"M2 12V44L16 36L32 44L46 36V4L32 12L16 4L2 12Z",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),gt.jsx("path",{d:"M16 4V36",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),gt.jsx("path",{d:"M32 12V44",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),Mee=()=>gt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:gt.jsxs("g",{children:[gt.jsx("path",{d:"M192,64H32C14.328,64,0,78.328,0,96v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S209.672,64,192,64z"}),gt.jsx("path",{d:"M480,64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32V96\r\n		C512,78.328,497.672,64,480,64z"}),gt.jsx("path",{d:"M480,288c-17.672,0-32,14.328-32,32v64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32v-96\r\n		C512,302.328,497.672,288,480,288z"}),gt.jsx("path",{d:"M192,384H64v-64c0-17.672-14.328-32-32-32S0,302.328,0,320v96c0,17.672,14.328,32,32,32h160c17.672,0,32-14.328,32-32\r\n		S209.672,384,192,384z"})]})}),Dee=()=>gt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:gt.jsxs("g",{children:[gt.jsx("path",{d:"M192,64c-17.672,0-32,14.328-32,32v64H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32V96\r\n		C224,78.328,209.672,64,192,64z"}),gt.jsx("path",{d:"M320,224h160c17.672,0,32-14.328,32-32s-14.328-32-32-32H352V96c0-17.672-14.328-32-32-32s-32,14.328-32,32v96\r\n		C288,209.672,302.328,224,320,224z"}),gt.jsx("path",{d:"M480,288H320c-17.672,0-32,14.328-32,32v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S497.672,288,480,288z"}),gt.jsx("path",{d:"M192,288H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32v-96\r\n		C224,302.328,209.672,288,192,288z"})]})}),Pee=()=>gt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 300 150",children:gt.jsx("path",{fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:"300 385",strokeDashoffset:"0",d:"M275 75c0 31-27 50-50 50-58 0-92-100-150-100-28 0-50 22-50 50s23 50 50 50c58 0 92-100 150-100 24 0 50 19 50 50Z",children:gt.jsx("animate",{attributeName:"stroke-dashoffset",calcMode:"spline",dur:"2",values:"685;-685",keySplines:"0 0 1 1",repeatCount:"indefinite"})})}),Oee=({follow:r})=>{var p,S,b,g;const o=PB({x:(S=(p=r.mapPosition)==null?void 0:p.x)!=null?S:0,y:(g=(b=r.mapPosition)==null?void 0:b.y)!=null?g:0,mapScale:.6}),[l,f]=pn.useState(0);return pn.useEffect(()=>{function w(F,C,y){return-Math.atan2((F.x-C.x)*y,F.y-C.y)*(180/Math.PI)}r.mapPosition&&f(w(r.mapPositions[0],r.mapPositions[r.mapPositions.length-1],o.aspectRatio))},[r.mapPosition,r.mapPositions,o]),gt.jsxs("div",{className:qd.followContainer,style:{width:o.size,height:o.size,left:"calc(50% + ".concat(o.scaledX,"px)"),top:"calc(50% - ".concat(o.scaledY,"px)")},children:[gt.jsx("div",{className:"".concat(qd.follow," ").concat(r.isSelectedFollow?qd.selectedFollow:qd.notSelectedFollow," ").concat(qd.iconContainer),children:gt.jsx(bee,{style:{transform:"rotate(".concat(l,"deg)")}})}),r.isSelectedFollow&&gt.jsx(Iee,{classNames:qd.labelContainer,content:r.title})]})},Lee=({fromCamera:r,toCamera:o})=>{const l=Cf(),f=Ps(),p=4200,S=p+3950,b=1900,[g,w]=pn.useState([]),[F,C]=pn.useState([]),[y,v]=pn.useState(!1),[D,m]=pn.useState(!1),[T,U]=pn.useState(""),x=pn.useRef([]),_=pn.useMemo(()=>{function le(N,$){const fe=N.jumpSpots.map(Ze=>Ze.camera.span),he=fe.map(Ze=>Ze.time).map(Ze=>mi(Ze,$.frameRate)),Ie=Math.min(...he),Xe=fe.map(Ze=>mi(Ze.time,$.frameRate)+mi(Ze.duration,$.frameRate)),Ae=Math.max(...Xe);return{start:Ie,end:Ae}}return l==null?void 0:l.places.filter(N=>N.jumpSpots.length>0).map((N,$)=>({...N,span:le(N,l),placeType:Cs.NORMAL_PLACE,placeIndex:$}))},[l]),I=pn.useMemo(()=>(l==null?void 0:l.follows.map(le=>({...le,isSelectedFollow:!1})))||[],[l]),R=pn.useCallback((le,N)=>{const $=mi(le.camera.span.time,N.frameRate)+2;return(_==null?void 0:_.filter(fe=>fe.span.start<=$&&$<=fe.span.end))||[]},[_]),j=pn.useCallback(le=>{const N=le.mapPositions[0]||{x:0,y:0};if(l&&f){const $=f.getExpectedPositionInSeconds()-mi(le.camera.span.time,l.frameRate),fe=mi(le.camera.span.duration,l.frameRate);let oe=Math.floor($*4/fe);return $===fe&&(oe-=1),le.mapPositions[oe]||N}return N},[f,l]),z=pn.useCallback((le,N)=>{const $=mi(le.camera.span.time,N.frameRate)+2;return I.filter(fe=>mi(fe.camera.span.time,N.frameRate)<=$&&$<=mi(fe.camera.span.time,N.frameRate)+mi(fe.camera.span.duration,N.frameRate)).map(fe=>({...fe,mapPosition:j(fe)}))},[I,j]),W=pn.useCallback(le=>_==null?void 0:_.find(N=>N.jumpSpots.some($=>$.camera.assetName===le.camera.assetName)),[_]),X=(le,N)=>N.jumpSpots.some($=>$.camera.assetName===le.camera.assetName);return pn.useEffect(()=>{if(!_||!r||!o||!l||r.camera.assetName===o.camera.assetName)return;const le=x.current;let N=[],$=[],fe=[],oe=[];if(U(o.placeTitle?o.placeTitle:o.title),r.type===rf.JUMPSPOT&&o.type===rf.JUMPSPOT&&r.placeIndex===o.placeIndex)m(!1),v(!0);else{switch(m(!0),r.type){case rf.JUMPSPOT:$=z(o,l),N=R(r,l).map(Ze=>X(r,Ze)?{...Ze,placeType:Cs.ACTIVE_PLACE}:Ze);break;case rf.FOLLOW:N=R(r,l),$=z(r,l).map(Ze=>({...Ze,isSelectedFollow:r.camera.assetName===Ze.camera.assetName}));break}switch(w(N),C($),o.type){case rf.JUMPSPOT:oe=z(r,l);const Ze=N.find(ut=>X(o,ut));if(Ze)fe=N.map(ut=>({...ut,placeType:ut.placeIndex===Ze.placeIndex?Cs.SELECTED_PLACE:Cs.NORMAL_PLACE}));else{const ut=W(o);ut&&(ut.placeType=Cs.SELECTED_PLACE,fe=[...N.map($e=>({...$e,placeType:Cs.NORMAL_PLACE})),ut])}break;case rf.FOLLOW:fe=R(r,l),oe=z(r,l);const it=$.find(ut=>ut.camera.assetName===o.camera.assetName);if(it)oe=$.map(ut=>({...ut,isSelectedFollow:ut.camera.assetName===it.camera.assetName}));else{const ut=I.find($e=>$e.camera.assetName===o.camera.assetName);if(ut){const $e={...ut,isSelectedFollow:!0,mapPosition:j(ut)};oe=[...$.map(lt=>({...lt,isSelectedFollow:!1})),$e]}}break}}const he=setTimeout(()=>{C(oe)},b);le.push(he);const Ie=setTimeout(()=>{w(fe)},b);le.push(Ie);const Xe=setTimeout(()=>{m(!1),v(!0)},p);le.push(Xe);const Ae=setTimeout(()=>{v(!1)},S);return le.push(Ae),()=>{le.forEach(Ze=>{clearTimeout(Ze)}),x.current=[]}},[r,o,_,I,z,W,l,R,j,S]),gt.jsxs("div",{className:"".concat(lg.transitionWrapper," ").concat(D?lg.active:""),children:[D&&gt.jsxs("div",{className:"".concat(lg.transition," ").concat(lg.visible),children:[g.map((le,N)=>gt.jsx(gee,{place:le,mapPlacesLength:g.length},"place-".concat(N.toString()))),F.filter(le=>le.camera.assetName===(r==null?void 0:r.camera.assetName)||le.camera.assetName===(o==null?void 0:o.camera.assetName)).map((le,N)=>gt.jsx(Oee,{follow:le},"follow-".concat(N.toString())))]}),y&&gt.jsx("h1",{className:lg.videoTitle,style:{textShadow:"2px 2px 4px black"},children:T})]})},kee="_playerPage_s22qw_1",Fee="_playerContainer_s22qw_13",Uee="_fadeIn_s22qw_1",Q3={playerPage:kee,playerContainer:Fee,fadeIn:Uee},Bee="_attention_1xh5o_1",jee="_ripple1_1xh5o_1",Zee="_ripple2_1xh5o_1",Gee="_thirdRipple_1xh5o_81",qee="_ripple3_1xh5o_1",Hee="_iconWrapper_1xh5o_105",iI={attention:Bee,ripple1:jee,ripple2:Zee,thirdRipple:Gee,ripple3:qee,iconWrapper:Hee},Kee=()=>{const r=om(),[o,l]=pn.useState(!1),f=5e3;if(pn.useEffect(()=>{if(!r)return;let p;const S=()=>{l(!0),p=setTimeout(()=>{l(!1)},f)};return r.on("attention",S),()=>{r.off("attention",S),clearTimeout(p)}},[r]),!!o)return gt.jsxs("div",{className:iI.attention,children:[gt.jsx("span",{className:iI.iconWrapper,children:gt.jsx(xee,{})}),gt.jsx("span",{className:iI.thirdRipple})]})},Vee="_container_1l3tn_1",zee="_qrCode_1l3tn_25",Yee="_text_1l3tn_35",oI={container:Vee,qrCode:zee,text:Yee},Wee=({url:r})=>gt.jsxs("div",{className:oI.container,children:[gt.jsx("p",{className:"body-text ".concat(oI.text),style:{opacity:.75},children:"Scan the QR code with the app."}),gt.jsx(wE,{className:oI.qrCode,bgColor:"white",fgColor:"black",value:r,size:500})]}),$ee="_controlsWrapper_1v4q3_1",Xee="_hidden_1v4q3_21",Qee="_iconWrapper_1v4q3_29",aI={controlsWrapper:$ee,hidden:Xee,iconWrapper:Qee},Jee=({visible:r,eventPlayer:o})=>{const[l,f]=pn.useState(!1),p=()=>{o&&(l?o.exitFullscreen().then(()=>{f(!1)}):o.requestFullscreen().then(()=>{f(!0)}))};return gt.jsx("div",{className:"".concat(aI.controlsWrapper," ").concat(r?"":aI.hidden),children:gt.jsx("div",{className:aI.iconWrapper,onClick:p,children:l?gt.jsx(Dee,{}):gt.jsx(Mee,{})})})},ete="_warningContainer_1tqkb_1",tte={warningContainer:ete},zB=()=>gt.jsxs("div",{className:tte.warningContainer,children:[gt.jsx(VB,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),gt.jsx("p",{className:"label",children:"Finish setup on your mobile or tablet. "})]}),nte="_messageContainer_1jzyd_3",rte="_message_1jzyd_3",J3={messageContainer:nte,message:rte},ite=({message:r})=>gt.jsx("div",{className:J3.messageContainer,children:gt.jsx("div",{className:"".concat(J3.message," subheader-light"),children:r})});function ote(){const[r,o,l]=qU(),f=FC(),p=OJ("#playerContainer",o,l),[S,b]=pn.useState(!1),[g,w]=pn.useState(),F=UC(),C=pn.useRef(),y=pn.useMemo(()=>{const U=window.navigator.userAgent;return new RegExp("_TV_[A-Z0-9]+_([0-9]{4});").test(U)},[]);pn.useEffect(()=>{const U=F==null?void 0:F.find(x=>x.deviceId===Eh);w(U)},[F]);const v=!!(F!=null&&F.find(U=>U.deviceId!==Eh));MJ(p),DJ(p),PJ(p);const[D,m]=LJ(p);xJ();const T=()=>{y||(b(!0),clearTimeout(C.current),C.current=setTimeout(()=>{b(!1)},3e3))};return gt.jsxs("div",{className:Q3.playerPage,onMouseMove:T,children:[gt.jsxs("div",{id:"playerContainer",className:Q3.playerContainer,children:[f&&gt.jsx(xz,{eventPlayer:p}),gt.jsx(Kee,{}),gt.jsx(Jee,{visible:S,eventPlayer:p}),(g==null?void 0:g.stateInfo.state)==="showQrCode"&&gt.jsx(Wee,{url:"".concat(MC,":").concat(g.deviceId)}),gt.jsx(Lee,{fromCamera:D,toCamera:m})]}),!v&&gt.jsx(ite,{message:gt.jsx(zB,{})})]})}const ate="_gradientBackground_b6nct_1",ste="_container_b6nct_15",ute="_fadeIn_b6nct_1",lte="_connectedTV_b6nct_45",cte="_disconnectedTV_b6nct_47",fte="_popIn_b6nct_1",dte="_iconContainer_b6nct_105",hte="_connectedText_b6nct_121",Hd={gradientBackground:ate,container:ste,fadeIn:ute,connectedTV:lte,disconnectedTV:cte,popIn:fte,iconContainer:dte,connectedText:hte},eF=({isDisconnected:r})=>gt.jsx("div",{className:Hd.gradientBackground,children:gt.jsxs("div",{className:Hd.container,children:[gt.jsx("div",{className:r?Hd.disconnectedTV:Hd.connectedTV,children:gt.jsx("div",{className:Hd.iconContainer,children:r?gt.jsx(Nee,{}):gt.jsx(Ree,{})})}),gt.jsx("h1",{className:Hd.connectedText,children:r?"TV disconnected":"TV connected"})]})}),pte="_hidden_zykq7_1",gte={hidden:pte},mte="_gradientBackground_1wh80_1",vte="_container_1wh80_15",yte="_fadeIn_1wh80_1",Ete="_imageWrapper_1wh80_47",_te="_listText_1wh80_59",Tte="_boldText_1wh80_59",Ste="_image_1wh80_47",wte="_glow_1wh80_93",Ate="_dividerWrapper_1wh80_121",Ite="_divider_1wh80_121",bte="_buttonsWrapper_1wh80_151",Cte="_testButton_1wh80_179",Rte="_demoButton_1wh80_187",Nte="_title_1wh80_195",xte="_countdownWrapper_1wh80_205",Mte="_timeSectionContainer_1wh80_233",Dte="_timeSection_1wh80_233",Pte="_countdownTitle_1wh80_259",Ote="_label_1wh80_267",Lte="_logos_1wh80_275",kte="_showStartedLabel_1wh80_301",Fte="_backWrapper_1wh80_309",Ute="_warning_1wh80_337",Ii={gradientBackground:mte,container:vte,fadeIn:yte,imageWrapper:Ete,listText:_te,boldText:Tte,image:Ste,glow:wte,dividerWrapper:Ate,divider:Ite,buttonsWrapper:bte,testButton:Cte,demoButton:Rte,title:Nte,countdownWrapper:xte,timeSectionContainer:Mte,timeSection:Dte,countdownTitle:Pte,label:Ote,logos:Lte,showStartedLabel:kte,backWrapper:Fte,warning:Ute},Bte="_errorContainer_1vpqa_1",jte={errorContainer:Bte},Zte=({errorIcon:r,errorMessage:o,errorName:l})=>gt.jsxs("div",{className:jte.errorContainer,children:[r&&gt.jsx("div",{children:r}),gt.jsx("span",{className:"body-text",children:"".concat(l&&"".concat(l,".")," ").concat(o)})]}),Gte="_gradientBackground_1pfse_1",qte="_container_1pfse_19",Hte="_qrCode_1pfse_33",sI={gradientBackground:Gte,container:qte,qrCode:Hte},Kte=({url:r})=>gt.jsxs("div",{className:"".concat(sI.gradientBackground," ").concat(sI.container),children:[gt.jsx(wE,{className:sI.qrCode,bgColor:"white",fgColor:"black",value:r,size:500}),gt.jsx("p",{className:"body-text",children:"Scan the QR code with the app."})]}),Vte=({timeToLive:r,isLive:o,backToShow:l})=>{const f=Cz(),p=Ps(),S=kC(),b=FC(),g=UC(),[w,F]=pn.useState(),[C,y]=pn.useState("00:00:00:00"),[v,D]=pn.useState(!1),m=pn.useRef(null),T=5;pn.useEffect(()=>{const z=g==null?void 0:g.filter(W=>W.deviceId!==Eh);D(!!(z!=null&&z.length))},[g]),pn.useEffect(()=>{const z=g==null?void 0:g.find(W=>W.deviceId===Eh);F(z)},[g]);let U;(z=>{z.BEFORE="before",z.MIDDLE="middle",z.END="end"})(U||(U={}));const x=z=>{if(p){let W=new Date;switch(z){case"end":W=new Date(p.demoEndtime);break;case"middle":W.setMinutes(W.getMinutes()-22);break;default:case"before":W.setSeconds(W.getSeconds()+T);break}p.updateStartTime(W,!0)}};pn.useEffect(()=>{if(r&&r>0){const z=N=>{const $=Date.parse(N.toString())-Date.parse(new Date().toString()),fe=Math.floor($/1e3%60),oe=Math.floor($/1e3/60%60),he=Math.floor($/1e3/60/60%24),Ie=Math.floor($/1e3/60/60/24);return{total:$,days:Ie,hours:he,minutes:oe,seconds:fe}},W=N=>{const{total:$,days:fe,hours:oe,minutes:he,seconds:Ie}=z(N);$>=0&&y((fe>9?fe:"0"+fe)+":"+(oe>9?oe:"0"+oe)+":"+(he>9?he:"0"+he)+":"+(Ie>9?Ie:"0"+Ie))};(N=>{m.current&&clearInterval(m.current),W(N);const $=setInterval(()=>{W(N)},1e3);m.current=$})((N=>{const $=new Date;return $.setSeconds($.getSeconds()+Math.floor(N/1e3)),$})(r))}},[r]);const[_,I,R,j]=C.split(":");if(w&&w.stateInfo.state==="showQrCode"){const z="".concat(MC,":").concat(w.deviceId);return gt.jsx(Kte,{url:z})}return gt.jsxs("div",{className:Ii.container,children:[b&&gt.jsx("div",{className:Ii.buttonsWrapper,children:gt.jsxs("div",{children:[gt.jsx(To,{className:"".concat(Ii.demoButton," ").concat(Ii.testButton),onClick:()=>{x("before")},selfFocus:!0,children:"B"}),gt.jsx(To,{className:Ii.testButton,onClick:()=>{x("middle")},children:"M"}),gt.jsx(To,{className:Ii.testButton,onClick:()=>{x("end")},children:"E"})]})}),gt.jsx(oR,{}),f.map((z,W)=>gt.jsx(Zte,{errorMessage:z.toString},"".concat(z.name,"-error-").concat(W.toString()))),gt.jsxs("div",{className:Ii.imageWrapper,children:[gt.jsx("div",{className:Ii.glow}),gt.jsx("img",{className:Ii.image,src:"".concat(S==null?void 0:S.preScreen.backgroundLandscape.url)})]}),gt.jsxs("div",{className:Ii.countdownWrapper,children:[gt.jsx("div",{className:"".concat(Ii.title," subheader-bold"),children:S==null?void 0:S.preScreen.showTitle}),gt.jsx("div",{className:Ii.dividerWrapper,children:gt.jsx("div",{className:Ii.divider})}),!o&&gt.jsxs(gt.Fragment,{children:[gt.jsx("p",{className:"body-text ".concat(Ii.countdownTitle),children:"Starts in"}),gt.jsxs("div",{className:Ii.timeSectionContainer,children:[gt.jsxs("div",{className:Ii.timeSection,children:[gt.jsx("div",{className:"subheader-bold",children:_}),gt.jsx("div",{className:"".concat(Ii.label," label"),children:"days"})]}),gt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),gt.jsxs("div",{className:Ii.timeSection,children:[gt.jsx("div",{className:"subheader-bold",children:I}),gt.jsx("div",{className:"".concat(Ii.label," label"),children:"hours"})]}),gt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),gt.jsxs("div",{className:Ii.timeSection,children:[gt.jsx("div",{className:"subheader-bold",children:R}),gt.jsx("div",{className:"".concat(Ii.label," label"),children:"mins"})]}),gt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),gt.jsxs("div",{className:Ii.timeSection,children:[gt.jsx("div",{className:"subheader-bold",children:j}),gt.jsx("div",{className:"".concat(Ii.label," label"),children:"secs"})]})]})]}),o&&gt.jsxs(gt.Fragment,{children:[gt.jsx("h1",{className:Ii.showStartedLabel,children:"The show has started"}),gt.jsx("div",{className:Ii.backWrapper,children:gt.jsx(To,{onClick:()=>{l()},children:"Back to show"})})]})]}),gt.jsx("div",{className:Ii.warning,children:!v&&rb==="new"&&gt.jsx(zB,{})})]})},zte="_wrapper_ubw8g_1",Yte="_container_ubw8g_21",Wte="_qrCodeContainer_ubw8g_49",$te="_qrCode_ubw8g_49",Xte="_listContainer_ubw8g_75",Qte="_list_ubw8g_75",Jte="_listItemContainer_ubw8g_109",ene="_listNumber_ubw8g_121",tne="_listText_ubw8g_147",nne="_circleRightCorner_ubw8g_159",rne="_circleLeftCorner_ubw8g_183",ine="_circleCenter_ubw8g_205",one="_errorMessage_ubw8g_229",ane="_fadeIn_ubw8g_1",ho={wrapper:zte,container:Yte,qrCodeContainer:Wte,qrCode:$te,listContainer:Xte,list:Qte,listItemContainer:Jte,listNumber:ene,listText:tne,circleRightCorner:nne,circleLeftCorner:rne,circleCenter:ine,errorMessage:one,fadeIn:ane},sne=({url:r})=>{const o=Iz(),l=bz(),f=p=>{if(p.name===cs.NEGOTIATE)switch(p.code){case 400:p.title=o("ticket-entry","error.toManyDevices.title"),p.message=o("ticket-entry","error.toManyDevices.body");break;case 401:p.title=o("ticket-entry","error.invalidCode.title"),p.message=o("ticket-entry","error.invalidCode.body");break;case 403:p.title=o("ticket-entry","error.codeNoLongerValid.title"),p.message=o("ticket-entry","error.codeNoLongerValid.body");break;case 404:p.title="Not Found",p.message="Ticket was not found";break}else if(p.name===cs.CONTENTFUL)switch(p.code){case 400:p.message="Could not fetch contentful environment"}return p.toString};return gt.jsxs("div",{className:ho.wrapper,children:[gt.jsx("div",{className:ho.circleRightCorner}),gt.jsx("div",{className:ho.circleLeftCorner}),gt.jsx("div",{className:ho.circleCenter}),gt.jsxs("div",{className:ho.container,children:[gt.jsxs("div",{className:"".concat(ho.listContainer," body-text"),children:[gt.jsx("h1",{style:{lineHeight:"3rem"},children:"Connect your TV"}),gt.jsxs("div",{className:ho.list,children:[gt.jsxs("span",{className:ho.listItemContainer,children:[gt.jsx("span",{className:ho.listNumber,children:"1"}),gt.jsxs("span",{className:ho.listText,children:["Download the ",gt.jsx("span",{className:"bold-text",children:"Imagien Parallel"})," ","app on your mobile or tablet."]})]}),gt.jsxs("span",{className:ho.listItemContainer,children:[gt.jsx("span",{className:ho.listNumber,children:"2"}),gt.jsx("span",{className:ho.listText,children:"Enter the ticket code from your confirmation email."})]}),gt.jsxs("span",{className:ho.listItemContainer,children:[gt.jsx("span",{className:ho.listNumber,children:"3"}),gt.jsx("span",{className:ho.listText,children:"Scan the QR code with the app."})]})]})]}),gt.jsx("div",{className:ho.qrCodeContainer,children:gt.jsx("div",{className:ho.qrCode,children:gt.jsx(wE,{bgColor:"white",fgColor:"black",value:r!=null?r:"",size:512})})})]}),gt.jsx("div",{className:ho.errorMessage,children:l.map((p,S)=>gt.jsx("h3",{className:ho.errorMessage,children:f(p)},"".concat(p.name,"-error-").concat(S.toString())))})]})},une="_container_zht4e_1",lne="_fadeIn_zht4e_1",cne="_scrollWrapper_zht4e_15",fne="_scrollContainer_zht4e_29",uI={container:une,fadeIn:lne,scrollWrapper:cne,scrollContainer:fne};function dne(){const r=kC();return gt.jsxs("div",{className:uI.container,children:[gt.jsx("h1",{children:"Oh no! This event has been canceled."}),gt.jsx(oR,{}),gt.jsx("div",{className:uI.scrollWrapper,children:gt.jsx("div",{className:uI.scrollContainer,children:r&&r.postScreen.offersCollection.items.map((o,l)=>gt.jsx("img",{src:o.image.url},l))})})]})}function hne(){switch(dE()){case fc.TIZEN:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:10009,KEY_MEDIA_STOP:413};case fc.WEBOS:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:461,KEY_MEDIA_STOP:413};case fc.WEB:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83};default:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83}}}const ef=hne(),pne="_popupWrapper_5nup5_1",gne="_popup_5nup5_1",mne="_controls_5nup5_59",lI={popupWrapper:pne,popup:gne,controls:mne},YB=async(r,o=!1)=>{const l=dE();r!=null&&r.connected&&o&&await r.destroy(),o&&localStorage.removeItem("ticketCode"),setTimeout(()=>{switch(l){case fc.TIZEN:o?location.reload():window.tizen.application.getCurrentApplication().exit();break;case fc.WEBOS:o?location.reload():window.close();break;default:location.reload();break}},1e3)};function vne({close:r,shouldLogout:o}){const l=bf(),f=async()=>{await YB(l,o)};function p(S){Promise.resolve(1).then(()=>{["POPUP_CONFIRM","POPUP_CANCEL"].includes(yl.getCurrentFocusKey())||yl.setFocus(S)})}return gt.jsx("div",{className:lI.popupWrapper,children:gt.jsxs("div",{className:lI.popup,children:[gt.jsxs("h3",{children:["Would you like to ",o?"logout":"exit app","?"]}),gt.jsxs("div",{className:lI.controls,children:[gt.jsx(To,{onClick:r,selfFocus:!0,onBlur:()=>{p("POPUP_CANCEL")},focusKey:"POPUP_CANCEL",children:"Cancel"}),gt.jsx(To,{onClick:f,focusKey:"POPUP_CONFIRM",onBlur:()=>{p("POPUP_CONFIRM")},children:"Confirm"})]})]})})}const yne="_popupWrapper_5qjl5_1",Ene="_popup_5qjl5_1",tF={popupWrapper:yne,popup:Ene};function _ne({close:r}){return gt.jsx("div",{className:tF.popupWrapper,children:gt.jsxs("div",{className:tF.popup,children:[gt.jsx(Cee,{styles:{width:"96px",height:"96px"}}),gt.jsx("h3",{children:"No Internet connection"}),gt.jsx("span",{children:"Check your connection and try again."}),gt.jsx(To,{onClick:r,selfFocus:!0,children:"OK"})]})})}const Tne="_warningContainer_1q3xx_1",Sne={warningContainer:Tne},wne=()=>gt.jsxs("div",{className:Sne.warningContainer,children:[gt.jsx(VB,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),gt.jsx("p",{className:"label",children:"Unsupported key pressed "})]});function Ane({goBackFromLive:r,showLobby:o}){const l=KB(),f=Ps(),[p,S]=pn.useState(),[b,g]=pn.useState(!1),w=pn.useRef(),F=()=>{S(void 0),g(!1),Promise.resolve(1).then(()=>{yl.setFocus("LOGOUT")})};switch(pn.useEffect(()=>(window.addEventListener("offline",()=>{S("network")}),window.addEventListener("online",()=>{F()}),document.addEventListener("logout",()=>{g(!0),S("exit")}),()=>{window.removeEventListener("online",()=>{}),window.removeEventListener("offline",()=>{}),document.removeEventListener("logout",()=>{})}),[]),pn.useEffect(()=>{l===ef.KEY_BACK?f!=null&&f.isLive&&!o?r():S("exit"):[ef.KEY_UP,ef.KEY_DOWN,ef.KEY_LEFT,ef.KEY_RIGHT,ef.KEY_OK,ef.KEY_BACK,0].includes(l)||(S("key_support"),clearTimeout(w.current),w.current=setTimeout(()=>{F()},3e3))},[l]),p){case"exit":return gt.jsx(vne,{close:F,shouldLogout:b});case"network":return gt.jsx(_ne,{close:F});case"key_support":return gt.jsx(wne,{});default:return}}const Ine="_container_9btbm_1",bne={container:Ine};function Cne(){return gt.jsx("div",{className:bne.container,children:gt.jsx(Pee,{})})}function Rne(){const r=Ps();Az();const o=om(),l=Tz(),f=bf(),p=UC(),[S,b]=pn.useState(!1),[g,w]=pn.useState(!1),[F,C]=pn.useState(!1),[y,v]=pn.useState(!1),[D,m]=pn.useState(),[T,U]=pn.useState(!1),[x,_]=pn.useState(!1),[I,R]=pn.useState(!1),[j,z]=pn.useState(!1),[W,X]=pn.useState(!1),[le,N]=pn.useState(),[$,fe]=pn.useState(),oe="".concat(MC,":").concat(Eh);pn.useEffect(()=>{if(p){const Ie=p.find(Xe=>Xe.deviceId===Eh);Ie||(R(!0),setTimeout(()=>{YB(f,!0).then(()=>{}).catch(()=>{})},1500)),N(Ie||p[0])}},[p]),pn.useEffect(()=>{fe(le==null?void 0:le.stateInfo.state)},[le]),pn.useEffect(()=>{if(!r)return;const Ie=()=>{r.adjustedEndTime&&r.adjustedEndTime<Date.now()?C(!0):r.adjustedStartTime&&(C(!1),m(r.adjustedStartTime-Date.now()))},Xe=Ae=>{w(Ae)};return r.on("startTimeUpdated",Ie),r.on("playerLoadingState",Xe),()=>{r.off("startTimeUpdated",Ie),r.off("playerLoadingState",Xe)}},[r]),pn.useEffect(()=>{if(!o)return;const Ie=()=>{C(!0)};return o.on("eventEnded",Ie),()=>{o.off("eventEnded",Ie)}},[o]),pn.useEffect(()=>{if(!f)return;const Ie=()=>{v(!0)};return f.on("eventCanceled",Ie),()=>{f.off("eventCanceled",Ie)}},[f]),pn.useEffect(()=>{if(!T)return;const Ie=setTimeout(()=>{_(!0),U(!1)},1500);return()=>{clearTimeout(Ie)}},[T]),pn.useEffect(()=>{if(D)if(D>0){b(!1);const Ie=setTimeout(()=>{b(!0)},D);return()=>{clearTimeout(Ie)}}else b(!0)},[D]),pn.useEffect(()=>{$==="hostTv"?(z(!0),U(!0)):l===ib.CONNECTED_STATE&&U(!0)},[$,l]);let he;return y?he=gt.jsx(dne,{}):F?he=gt.jsx($J,{}):he=gt.jsxs(gt.Fragment,{children:[!j&&$===void 0&&gt.jsx(sne,{url:oe}),T&&!x&&gt.jsx(eF,{}),j&&x&&!I&&gt.jsxs("div",{children:[gt.jsx("div",{className:S?"":gte.hidden,children:gt.jsx(ote,{})}),(!S||W)&&gt.jsx(Vte,{timeToLive:D,isLive:S,backToShow:()=>{X(!1)}})]}),S&&!W&&g&&gt.jsx(Cne,{})]}),gt.jsxs(gt.Fragment,{children:[he,I&&gt.jsx(eF,{isDisconnected:!0}),gt.jsx(Ane,{goBackFromLive:()=>{X(!0)},showLobby:W})]})}yl.init({debug:!1,shouldUseNativeEvents:!0});function Nne(){const r=localStorage.getItem("ticketCode"),[o,l]=pn.useState(r!=null?r:"");return gt.jsx("div",{className:cV.pageContainer,children:gt.jsxs(vz,{baseUrl:rV,preferredProfile:"dash-drm",contentfulAccessToken:iV,contentfulSpaceId:oV,newSetupToggle:rb==="new",ticketCodeProp:o,children:[rb!=="new",gt.jsx(Rne,{})]})})}cI.createRoot(document.getElementById("root")).render(gt.jsx(Nne,{}));export{xne as __vite_legacy_guard};
