function Dre(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))d(g);new MutationObserver(g=>{for(const S of g)if(S.type==="childList")for(const b of S.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&d(b)}).observe(document,{childList:!0,subtree:!0});function l(g){const S={};return g.integrity&&(S.integrity=g.integrity),g.referrerPolicy&&(S.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?S.credentials="include":g.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function d(g){if(g.ep)return;g.ep=!0;const S=l(g);fetch(g.href,S)}})();var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var FF={exports:{}},nE={},NT={exports:{}},qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mP;function E9(){if(mP)return qr;mP=1;var i=Symbol.for("react.element"),o=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),b=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),F=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),E=Symbol.iterator;function y(be){return be===null||typeof be!="object"?null:(be=E&&be[E]||be["@@iterator"],typeof be=="function"?be:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,T={};function U(be,He,vt){this.props=be,this.context=He,this.refs=T,this.updater=vt||P}U.prototype.isReactComponent={},U.prototype.setState=function(be,He){if(typeof be!="object"&&typeof be!="function"&&be!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,be,He,"setState")},U.prototype.forceUpdate=function(be){this.updater.enqueueForceUpdate(this,be,"forceUpdate")};function M(){}M.prototype=U.prototype;function _(be,He,vt){this.props=be,this.context=He,this.refs=T,this.updater=vt||P}var I=_.prototype=new M;I.constructor=_,m(I,U.prototype),I.isPureReactComponent=!0;var x=Array.isArray,Z=Object.prototype.hasOwnProperty,Y={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function Q(be,He,vt){var Re,Ye={},ot=null,Ht=null;if(He!=null)for(Re in He.ref!==void 0&&(Ht=He.ref),He.key!==void 0&&(ot=""+He.key),He)Z.call(He,Re)&&!$.hasOwnProperty(Re)&&(Ye[Re]=He[Re]);var Bt=arguments.length-2;if(Bt===1)Ye.children=vt;else if(1<Bt){for(var Et=Array(Bt),Dt=0;Dt<Bt;Dt++)Et[Dt]=arguments[Dt+2];Ye.children=Et}if(be&&be.defaultProps)for(Re in Bt=be.defaultProps,Bt)Ye[Re]===void 0&&(Ye[Re]=Bt[Re]);return{$$typeof:i,type:be,key:ot,ref:Ht,props:Ye,_owner:Y.current}}function se(be,He){return{$$typeof:i,type:be.type,key:He,ref:be.ref,props:be.props,_owner:be._owner}}function R(be){return typeof be=="object"&&be!==null&&be.$$typeof===i}function X(be){var He={"=":"=0",":":"=2"};return"$"+be.replace(/[=:]/g,function(vt){return He[vt]})}var ce=/\/+/g;function oe(be,He){return typeof be=="object"&&be!==null&&be.key!=null?X(""+be.key):He.toString(36)}function me(be,He,vt,Re,Ye){var ot=typeof be;(ot==="undefined"||ot==="boolean")&&(be=null);var Ht=!1;if(be===null)Ht=!0;else switch(ot){case"string":case"number":Ht=!0;break;case"object":switch(be.$$typeof){case i:case o:Ht=!0}}if(Ht)return Ht=be,Ye=Ye(Ht),be=Re===""?"."+oe(Ht,0):Re,x(Ye)?(vt="",be!=null&&(vt=be.replace(ce,"$&/")+"/"),me(Ye,He,vt,"",function(Dt){return Dt})):Ye!=null&&(R(Ye)&&(Ye=se(Ye,vt+(!Ye.key||Ht&&Ht.key===Ye.key?"":(""+Ye.key).replace(ce,"$&/")+"/")+be)),He.push(Ye)),1;if(Ht=0,Re=Re===""?".":Re+":",x(be))for(var Bt=0;Bt<be.length;Bt++){ot=be[Bt];var Et=Re+oe(ot,Bt);Ht+=me(ot,He,vt,Et,Ye)}else if(Et=y(be),typeof Et=="function")for(be=Et.call(be),Bt=0;!(ot=be.next()).done;)ot=ot.value,Et=Re+oe(ot,Bt++),Ht+=me(ot,He,vt,Et,Ye);else if(ot==="object")throw He=String(be),Error("Objects are not valid as a React child (found: "+(He==="[object Object]"?"object with keys {"+Object.keys(be).join(", ")+"}":He)+"). If you meant to render a collection of children, use an array instead.");return Ht}function Ce(be,He,vt){if(be==null)return be;var Re=[],Ye=0;return me(be,Re,"","",function(ot){return He.call(vt,ot,Ye++)}),Re}function Je(be){if(be._status===-1){var He=be._result;He=He(),He.then(function(vt){(be._status===0||be._status===-1)&&(be._status=1,be._result=vt)},function(vt){(be._status===0||be._status===-1)&&(be._status=2,be._result=vt)}),be._status===-1&&(be._status=0,be._result=He)}if(be._status===1)return be._result.default;throw be._result}var we={current:null},qe={transition:null},st={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:qe,ReactCurrentOwner:Y};function ft(){throw Error("act(...) is not supported in production builds of React.")}return qr.Children={map:Ce,forEach:function(be,He,vt){Ce(be,function(){He.apply(this,arguments)},vt)},count:function(be){var He=0;return Ce(be,function(){He++}),He},toArray:function(be){return Ce(be,function(He){return He})||[]},only:function(be){if(!R(be))throw Error("React.Children.only expected to receive a single React element child.");return be}},qr.Component=U,qr.Fragment=l,qr.Profiler=g,qr.PureComponent=_,qr.StrictMode=d,qr.Suspense=w,qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=st,qr.act=ft,qr.cloneElement=function(be,He,vt){if(be==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+be+".");var Re=m({},be.props),Ye=be.key,ot=be.ref,Ht=be._owner;if(He!=null){if(He.ref!==void 0&&(ot=He.ref,Ht=Y.current),He.key!==void 0&&(Ye=""+He.key),be.type&&be.type.defaultProps)var Bt=be.type.defaultProps;for(Et in He)Z.call(He,Et)&&!$.hasOwnProperty(Et)&&(Re[Et]=He[Et]===void 0&&Bt!==void 0?Bt[Et]:He[Et])}var Et=arguments.length-2;if(Et===1)Re.children=vt;else if(1<Et){Bt=Array(Et);for(var Dt=0;Dt<Et;Dt++)Bt[Dt]=arguments[Dt+2];Re.children=Bt}return{$$typeof:i,type:be.type,key:Ye,ref:ot,props:Re,_owner:Ht}},qr.createContext=function(be){return be={$$typeof:b,_currentValue:be,_currentValue2:be,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},be.Provider={$$typeof:S,_context:be},be.Consumer=be},qr.createElement=Q,qr.createFactory=function(be){var He=Q.bind(null,be);return He.type=be,He},qr.createRef=function(){return{current:null}},qr.forwardRef=function(be){return{$$typeof:p,render:be}},qr.isValidElement=R,qr.lazy=function(be){return{$$typeof:C,_payload:{_status:-1,_result:be},_init:Je}},qr.memo=function(be,He){return{$$typeof:F,type:be,compare:He===void 0?null:He}},qr.startTransition=function(be){var He=qe.transition;qe.transition={};try{be()}finally{qe.transition=He}},qr.unstable_act=ft,qr.useCallback=function(be,He){return we.current.useCallback(be,He)},qr.useContext=function(be){return we.current.useContext(be)},qr.useDebugValue=function(){},qr.useDeferredValue=function(be){return we.current.useDeferredValue(be)},qr.useEffect=function(be,He){return we.current.useEffect(be,He)},qr.useId=function(){return we.current.useId()},qr.useImperativeHandle=function(be,He,vt){return we.current.useImperativeHandle(be,He,vt)},qr.useInsertionEffect=function(be,He){return we.current.useInsertionEffect(be,He)},qr.useLayoutEffect=function(be,He){return we.current.useLayoutEffect(be,He)},qr.useMemo=function(be,He){return we.current.useMemo(be,He)},qr.useReducer=function(be,He,vt){return we.current.useReducer(be,He,vt)},qr.useRef=function(be){return we.current.useRef(be)},qr.useState=function(be){return we.current.useState(be)},qr.useSyncExternalStore=function(be,He,vt){return we.current.useSyncExternalStore(be,He,vt)},qr.useTransition=function(){return we.current.useTransition()},qr.version="18.3.1",qr}var vP;function rE(){return vP||(vP=1,NT.exports=E9()),NT.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _9=rE(),T9=Symbol.for("react.element"),S9=Symbol.for("react.fragment"),w9=Object.prototype.hasOwnProperty,A9=_9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I9={key:!0,ref:!0,__self:!0,__source:!0};function UF(i,o,l){var d,g={},S=null,b=null;l!==void 0&&(S=""+l),o.key!==void 0&&(S=""+o.key),o.ref!==void 0&&(b=o.ref);for(d in o)w9.call(o,d)&&!I9.hasOwnProperty(d)&&(g[d]=o[d]);if(i&&i.defaultProps)for(d in o=i.defaultProps,o)g[d]===void 0&&(g[d]=o[d]);return{$$typeof:T9,type:i,key:S,ref:b,props:g,_owner:A9.current}}nE.Fragment=S9;nE.jsx=UF;nE.jsxs=UF;FF.exports=nE;var Rt=FF.exports,DI={},BF={exports:{}},ps={},jF={exports:{}},ZF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function o(qe,st){var ft=qe.length;qe.push(st);e:for(;0<ft;){var be=ft-1>>>1,He=qe[be];if(0<g(He,st))qe[be]=st,qe[ft]=He,ft=be;else break e}}function l(qe){return qe.length===0?null:qe[0]}function d(qe){if(qe.length===0)return null;var st=qe[0],ft=qe.pop();if(ft!==st){qe[0]=ft;e:for(var be=0,He=qe.length,vt=He>>>1;be<vt;){var Re=2*(be+1)-1,Ye=qe[Re],ot=Re+1,Ht=qe[ot];if(0>g(Ye,ft))ot<He&&0>g(Ht,Ye)?(qe[be]=Ht,qe[ot]=ft,be=ot):(qe[be]=Ye,qe[Re]=ft,be=Re);else if(ot<He&&0>g(Ht,ft))qe[be]=Ht,qe[ot]=ft,be=ot;else break e}}return st}function g(qe,st){var ft=qe.sortIndex-st.sortIndex;return ft!==0?ft:qe.id-st.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;i.unstable_now=function(){return S.now()}}else{var b=Date,p=b.now();i.unstable_now=function(){return b.now()-p}}var w=[],F=[],C=1,E=null,y=3,P=!1,m=!1,T=!1,U=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(qe){for(var st=l(F);st!==null;){if(st.callback===null)d(F);else if(st.startTime<=qe)d(F),st.sortIndex=st.expirationTime,o(w,st);else break;st=l(F)}}function x(qe){if(T=!1,I(qe),!m)if(l(w)!==null)m=!0,Je(Z);else{var st=l(F);st!==null&&we(x,st.startTime-qe)}}function Z(qe,st){m=!1,T&&(T=!1,M(Q),Q=-1),P=!0;var ft=y;try{for(I(st),E=l(w);E!==null&&(!(E.expirationTime>st)||qe&&!X());){var be=E.callback;if(typeof be=="function"){E.callback=null,y=E.priorityLevel;var He=be(E.expirationTime<=st);st=i.unstable_now(),typeof He=="function"?E.callback=He:E===l(w)&&d(w),I(st)}else d(w);E=l(w)}if(E!==null)var vt=!0;else{var Re=l(F);Re!==null&&we(x,Re.startTime-st),vt=!1}return vt}finally{E=null,y=ft,P=!1}}var Y=!1,$=null,Q=-1,se=5,R=-1;function X(){return!(i.unstable_now()-R<se)}function ce(){if($!==null){var qe=i.unstable_now();R=qe;var st=!0;try{st=$(!0,qe)}finally{st?oe():(Y=!1,$=null)}}else Y=!1}var oe;if(typeof _=="function")oe=function(){_(ce)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Ce=me.port2;me.port1.onmessage=ce,oe=function(){Ce.postMessage(null)}}else oe=function(){U(ce,0)};function Je(qe){$=qe,Y||(Y=!0,oe())}function we(qe,st){Q=U(function(){qe(i.unstable_now())},st)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(qe){qe.callback=null},i.unstable_continueExecution=function(){m||P||(m=!0,Je(Z))},i.unstable_forceFrameRate=function(qe){0>qe||125<qe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<qe?Math.floor(1e3/qe):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return l(w)},i.unstable_next=function(qe){switch(y){case 1:case 2:case 3:var st=3;break;default:st=y}var ft=y;y=st;try{return qe()}finally{y=ft}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(qe,st){switch(qe){case 1:case 2:case 3:case 4:case 5:break;default:qe=3}var ft=y;y=qe;try{return st()}finally{y=ft}},i.unstable_scheduleCallback=function(qe,st,ft){var be=i.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?be+ft:be):ft=be,qe){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=ft+He,qe={id:C++,callback:st,priorityLevel:qe,startTime:ft,expirationTime:He,sortIndex:-1},ft>be?(qe.sortIndex=ft,o(F,qe),l(w)===null&&qe===l(F)&&(T?(M(Q),Q=-1):T=!0,we(x,ft-be))):(qe.sortIndex=He,o(w,qe),m||P||(m=!0,Je(Z))),qe},i.unstable_shouldYield=X,i.unstable_wrapCallback=function(qe){var st=y;return function(){var ft=y;y=st;try{return qe.apply(this,arguments)}finally{y=ft}}}})(ZF);jF.exports=ZF;var b9=jF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C9=rE(),hs=b9;function Hn(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qF=new Set,Ng={};function uf(i,o){lh(i,o),lh(i+"Capture",o)}function lh(i,o){for(Ng[i]=o,i=0;i<o.length;i++)qF.add(o[i])}var Sl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),PI=Object.prototype.hasOwnProperty,R9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yP={},EP={};function x9(i){return PI.call(EP,i)?!0:PI.call(yP,i)?!1:R9.test(i)?EP[i]=!0:(yP[i]=!0,!1)}function N9(i,o,l,d){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function M9(i,o,l,d){if(o===null||typeof o>"u"||N9(i,o,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function Ea(i,o,l,d,g,S,b){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=S,this.removeEmptyString=b}var zo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){zo[i]=new Ea(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];zo[o]=new Ea(o,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){zo[i]=new Ea(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){zo[i]=new Ea(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){zo[i]=new Ea(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){zo[i]=new Ea(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){zo[i]=new Ea(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){zo[i]=new Ea(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){zo[i]=new Ea(i,5,!1,i.toLowerCase(),null,!1,!1)});var qb=/[\-:]([a-z])/g;function Gb(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(qb,Gb);zo[o]=new Ea(o,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(qb,Gb);zo[o]=new Ea(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(qb,Gb);zo[o]=new Ea(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){zo[i]=new Ea(i,1,!1,i.toLowerCase(),null,!1,!1)});zo.xlinkHref=new Ea("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){zo[i]=new Ea(i,1,!1,i.toLowerCase(),null,!0,!0)});function Hb(i,o,l,d){var g=zo.hasOwnProperty(o)?zo[o]:null;(g!==null?g.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(M9(o,l,g,d)&&(l=null),d||g===null?x9(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):g.mustUseProperty?i[g.propertyName]=l===null?g.type===3?!1:"":l:(o=g.attributeName,d=g.attributeNamespace,l===null?i.removeAttribute(o):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,d?i.setAttributeNS(d,o,l):i.setAttribute(o,l))))}var bl=C9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zy=Symbol.for("react.element"),Zd=Symbol.for("react.portal"),qd=Symbol.for("react.fragment"),Vb=Symbol.for("react.strict_mode"),OI=Symbol.for("react.profiler"),GF=Symbol.for("react.provider"),HF=Symbol.for("react.context"),Kb=Symbol.for("react.forward_ref"),LI=Symbol.for("react.suspense"),kI=Symbol.for("react.suspense_list"),zb=Symbol.for("react.memo"),Xl=Symbol.for("react.lazy"),VF=Symbol.for("react.offscreen"),_P=Symbol.iterator;function eg(i){return i===null||typeof i!="object"?null:(i=_P&&i[_P]||i["@@iterator"],typeof i=="function"?i:null)}var to=Object.assign,MT;function hg(i){if(MT===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);MT=o&&o[1]||""}return"\n"+MT+i}var DT=!1;function PT(i,o){if(!i||DT)return"";DT=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(F){var d=F}Reflect.construct(i,[],o)}else{try{o.call()}catch(F){d=F}i.call(o.prototype)}else{try{throw Error()}catch(F){d=F}i()}}catch(F){if(F&&d&&typeof F.stack=="string"){for(var g=F.stack.split("\n"),S=d.stack.split("\n"),b=g.length-1,p=S.length-1;1<=b&&0<=p&&g[b]!==S[p];)p--;for(;1<=b&&0<=p;b--,p--)if(g[b]!==S[p]){if(b!==1||p!==1)do if(b--,p--,0>p||g[b]!==S[p]){var w="\n"+g[b].replace(" at new "," at ");return i.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",i.displayName)),w}while(1<=b&&0<=p);break}}}finally{DT=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?hg(i):""}function D9(i){switch(i.tag){case 5:return hg(i.type);case 16:return hg("Lazy");case 13:return hg("Suspense");case 19:return hg("SuspenseList");case 0:case 2:case 15:return i=PT(i.type,!1),i;case 11:return i=PT(i.type.render,!1),i;case 1:return i=PT(i.type,!0),i;default:return""}}function FI(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case qd:return"Fragment";case Zd:return"Portal";case OI:return"Profiler";case Vb:return"StrictMode";case LI:return"Suspense";case kI:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case HF:return(i.displayName||"Context")+".Consumer";case GF:return(i._context.displayName||"Context")+".Provider";case Kb:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case zb:return o=i.displayName||null,o!==null?o:FI(i.type)||"Memo";case Xl:o=i._payload,i=i._init;try{return FI(i(o))}catch(l){}}return null}function P9(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return FI(o);case 8:return o===Vb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function fc(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function KF(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function O9(i){var o=KF(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,S=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(b){d=""+b,S.call(this,b)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(b){d=""+b},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function qy(i){i._valueTracker||(i._valueTracker=O9(i))}function zF(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return i&&(d=KF(i)?i.checked?"true":"false":i.value),i=d,i!==l?(o.setValue(i),!0):!1}function I0(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch(o){return i.body}}function UI(i,o){var l=o.checked;return to({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l!=null?l:i._wrapperState.initialChecked})}function TP(i,o){var l=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;l=fc(o.value!=null?o.value:l),i._wrapperState={initialChecked:d,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function YF(i,o){o=o.checked,o!=null&&Hb(i,"checked",o,!1)}function BI(i,o){YF(i,o);var l=fc(o.value),d=o.type;if(l!=null)d==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?jI(i,o.type,l):o.hasOwnProperty("defaultValue")&&jI(i,o.type,fc(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function SP(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function jI(i,o,l){(o!=="number"||I0(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var pg=Array.isArray;function nh(i,o,l,d){if(i=i.options,o){o={};for(var g=0;g<l.length;g++)o["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=o.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&d&&(i[l].defaultSelected=!0)}else{for(l=""+fc(l),o=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function ZI(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(Hn(91));return to({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function wP(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(Hn(92));if(pg(l)){if(1<l.length)throw Error(Hn(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:fc(l)}}function WF(i,o){var l=fc(o.value),d=fc(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),d!=null&&(i.defaultValue=""+d)}function AP(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function $F(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qI(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?$F(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Gy,XF=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,d,g){MSApp.execUnsafeLocalFunction(function(){return i(o,l,d,g)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Gy=Gy||document.createElement("div"),Gy.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Gy.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Mg(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var _g={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L9=["Webkit","ms","Moz","O"];Object.keys(_g).forEach(function(i){L9.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),_g[o]=_g[i]})});function QF(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||_g.hasOwnProperty(i)&&_g[i]?(""+o).trim():o+"px"}function JF(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var d=l.indexOf("--")===0,g=QF(l,o[l],d);l==="float"&&(l="cssFloat"),d?i.setProperty(l,g):i[l]=g}}var k9=to({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function GI(i,o){if(o){if(k9[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(Hn(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(Hn(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(Hn(61))}if(o.style!=null&&typeof o.style!="object")throw Error(Hn(62))}}function HI(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VI=null;function Yb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var KI=null,rh=null,ih=null;function IP(i){if(i=em(i)){if(typeof KI!="function")throw Error(Hn(280));var o=i.stateNode;o&&(o=uE(o),KI(i.stateNode,i.type,o))}}function e4(i){rh?ih?ih.push(i):ih=[i]:rh=i}function t4(){if(rh){var i=rh,o=ih;if(ih=rh=null,IP(i),o)for(i=0;i<o.length;i++)IP(o[i])}}function n4(i,o){return i(o)}function r4(){}var OT=!1;function i4(i,o,l){if(OT)return i(o,l);OT=!0;try{return n4(i,o,l)}finally{OT=!1,(rh!==null||ih!==null)&&(r4(),t4())}}function Dg(i,o){var l=i.stateNode;if(l===null)return null;var d=uE(l);if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(Hn(231,o,typeof l));return l}var zI=!1;if(Sl)try{var tg={};Object.defineProperty(tg,"passive",{get:function(){zI=!0}}),window.addEventListener("test",tg,tg),window.removeEventListener("test",tg,tg)}catch(i){zI=!1}function F9(i,o,l,d,g,S,b,p,w){var F=Array.prototype.slice.call(arguments,3);try{o.apply(l,F)}catch(C){this.onError(C)}}var Tg=!1,b0=null,C0=!1,YI=null,U9={onError:function(i){Tg=!0,b0=i}};function B9(i,o,l,d,g,S,b,p,w){Tg=!1,b0=null,F9.apply(U9,arguments)}function j9(i,o,l,d,g,S,b,p,w){if(B9.apply(this,arguments),Tg){if(Tg){var F=b0;Tg=!1,b0=null}else throw Error(Hn(198));C0||(C0=!0,YI=F)}}function lf(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function o4(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function bP(i){if(lf(i)!==i)throw Error(Hn(188))}function Z9(i){var o=i.alternate;if(!o){if(o=lf(i),o===null)throw Error(Hn(188));return o!==i?null:i}for(var l=i,d=o;;){var g=l.return;if(g===null)break;var S=g.alternate;if(S===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===S.child){for(S=g.child;S;){if(S===l)return bP(g),i;if(S===d)return bP(g),o;S=S.sibling}throw Error(Hn(188))}if(l.return!==d.return)l=g,d=S;else{for(var b=!1,p=g.child;p;){if(p===l){b=!0,l=g,d=S;break}if(p===d){b=!0,d=g,l=S;break}p=p.sibling}if(!b){for(p=S.child;p;){if(p===l){b=!0,l=S,d=g;break}if(p===d){b=!0,d=S,l=g;break}p=p.sibling}if(!b)throw Error(Hn(189))}}if(l.alternate!==d)throw Error(Hn(190))}if(l.tag!==3)throw Error(Hn(188));return l.stateNode.current===l?i:o}function a4(i){return i=Z9(i),i!==null?s4(i):null}function s4(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=s4(i);if(o!==null)return o;i=i.sibling}return null}var u4=hs.unstable_scheduleCallback,CP=hs.unstable_cancelCallback,q9=hs.unstable_shouldYield,G9=hs.unstable_requestPaint,vo=hs.unstable_now,H9=hs.unstable_getCurrentPriorityLevel,Wb=hs.unstable_ImmediatePriority,l4=hs.unstable_UserBlockingPriority,R0=hs.unstable_NormalPriority,V9=hs.unstable_LowPriority,c4=hs.unstable_IdlePriority,iE=null,Fu=null;function K9(i){if(Fu&&typeof Fu.onCommitFiberRoot=="function")try{Fu.onCommitFiberRoot(iE,i,void 0,(i.current.flags&128)===128)}catch(o){}}var hu=Math.clz32?Math.clz32:W9,z9=Math.log,Y9=Math.LN2;function W9(i){return i>>>=0,i===0?32:31-(z9(i)/Y9|0)|0}var Hy=64,Vy=4194304;function gg(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function x0(i,o){var l=i.pendingLanes;if(l===0)return 0;var d=0,g=i.suspendedLanes,S=i.pingedLanes,b=l&268435455;if(b!==0){var p=b&~g;p!==0?d=gg(p):(S&=b,S!==0&&(d=gg(S)))}else b=l&~g,b!==0?d=gg(b):S!==0&&(d=gg(S));if(d===0)return 0;if(o!==0&&o!==d&&!(o&g)&&(g=d&-d,S=o&-o,g>=S||g===16&&(S&4194240)!==0))return o;if(d&4&&(d|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)l=31-hu(o),g=1<<l,d|=i[l],o&=~g;return d}function $9(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X9(i,o){for(var l=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,S=i.pendingLanes;0<S;){var b=31-hu(S),p=1<<b,w=g[b];w===-1?(!(p&l)||p&d)&&(g[b]=$9(p,o)):w<=o&&(i.expiredLanes|=p),S&=~p}}function WI(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function f4(){var i=Hy;return Hy<<=1,!(Hy&4194240)&&(Hy=64),i}function LT(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function Qg(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-hu(o),i[o]=l}function Q9(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<l;){var g=31-hu(l),S=1<<g;o[g]=0,d[g]=-1,i[g]=-1,l&=~S}}function $b(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var d=31-hu(l),g=1<<d;g&o|i[d]&o&&(i[d]|=o),l&=~g}}var wi=0;function d4(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var h4,Xb,p4,g4,m4,$I=!1,Ky=[],rc=null,ic=null,oc=null,Pg=new Map,Og=new Map,Jl=[],J9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function RP(i,o){switch(i){case"focusin":case"focusout":rc=null;break;case"dragenter":case"dragleave":ic=null;break;case"mouseover":case"mouseout":oc=null;break;case"pointerover":case"pointerout":Pg.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Og.delete(o.pointerId)}}function ng(i,o,l,d,g,S){return i===null||i.nativeEvent!==S?(i={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:S,targetContainers:[g]},o!==null&&(o=em(o),o!==null&&Xb(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function eH(i,o,l,d,g){switch(o){case"focusin":return rc=ng(rc,i,o,l,d,g),!0;case"dragenter":return ic=ng(ic,i,o,l,d,g),!0;case"mouseover":return oc=ng(oc,i,o,l,d,g),!0;case"pointerover":var S=g.pointerId;return Pg.set(S,ng(Pg.get(S)||null,i,o,l,d,g)),!0;case"gotpointercapture":return S=g.pointerId,Og.set(S,ng(Og.get(S)||null,i,o,l,d,g)),!0}return!1}function v4(i){var o=Kc(i.target);if(o!==null){var l=lf(o);if(l!==null){if(o=l.tag,o===13){if(o=o4(l),o!==null){i.blockedOn=o,m4(i.priority,function(){p4(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function d0(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=XI(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);VI=d,l.target.dispatchEvent(d),VI=null}else return o=em(l),o!==null&&Xb(o),i.blockedOn=l,!1;o.shift()}return!0}function xP(i,o,l){d0(i)&&l.delete(o)}function tH(){$I=!1,rc!==null&&d0(rc)&&(rc=null),ic!==null&&d0(ic)&&(ic=null),oc!==null&&d0(oc)&&(oc=null),Pg.forEach(xP),Og.forEach(xP)}function rg(i,o){i.blockedOn===o&&(i.blockedOn=null,$I||($I=!0,hs.unstable_scheduleCallback(hs.unstable_NormalPriority,tH)))}function Lg(i){function o(g){return rg(g,i)}if(0<Ky.length){rg(Ky[0],i);for(var l=1;l<Ky.length;l++){var d=Ky[l];d.blockedOn===i&&(d.blockedOn=null)}}for(rc!==null&&rg(rc,i),ic!==null&&rg(ic,i),oc!==null&&rg(oc,i),Pg.forEach(o),Og.forEach(o),l=0;l<Jl.length;l++)d=Jl[l],d.blockedOn===i&&(d.blockedOn=null);for(;0<Jl.length&&(l=Jl[0],l.blockedOn===null);)v4(l),l.blockedOn===null&&Jl.shift()}var oh=bl.ReactCurrentBatchConfig,N0=!0;function nH(i,o,l,d){var g=wi,S=oh.transition;oh.transition=null;try{wi=1,Qb(i,o,l,d)}finally{wi=g,oh.transition=S}}function rH(i,o,l,d){var g=wi,S=oh.transition;oh.transition=null;try{wi=4,Qb(i,o,l,d)}finally{wi=g,oh.transition=S}}function Qb(i,o,l,d){if(N0){var g=XI(i,o,l,d);if(g===null)VT(i,o,d,M0,l),RP(i,d);else if(eH(g,i,o,l,d))d.stopPropagation();else if(RP(i,d),o&4&&-1<J9.indexOf(i)){for(;g!==null;){var S=em(g);if(S!==null&&h4(S),S=XI(i,o,l,d),S===null&&VT(i,o,d,M0,l),S===g)break;g=S}g!==null&&d.stopPropagation()}else VT(i,o,d,null,l)}}var M0=null;function XI(i,o,l,d){if(M0=null,i=Yb(d),i=Kc(i),i!==null)if(o=lf(i),o===null)i=null;else if(l=o.tag,l===13){if(i=o4(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return M0=i,null}function y4(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H9()){case Wb:return 1;case l4:return 4;case R0:case V9:return 16;case c4:return 536870912;default:return 16}default:return 16}}var tc=null,Jb=null,h0=null;function E4(){if(h0)return h0;var i,o=Jb,l=o.length,d,g="value"in tc?tc.value:tc.textContent,S=g.length;for(i=0;i<l&&o[i]===g[i];i++);var b=l-i;for(d=1;d<=b&&o[l-d]===g[S-d];d++);return h0=g.slice(i,1<d?1-d:void 0)}function p0(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function zy(){return!0}function NP(){return!1}function gs(i){function o(l,d,g,S,b){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=S,this.target=b,this.currentTarget=null;for(var p in i)i.hasOwnProperty(p)&&(l=i[p],this[p]=l?l(S):S[p]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?zy:NP,this.isPropagationStopped=NP,this}return to(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=zy)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=zy)},persist:function(){},isPersistent:zy}),o}var yh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eC=gs(yh),Jg=to({},yh,{view:0,detail:0}),iH=gs(Jg),kT,FT,ig,oE=to({},Jg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tC,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ig&&(ig&&i.type==="mousemove"?(kT=i.screenX-ig.screenX,FT=i.screenY-ig.screenY):FT=kT=0,ig=i),kT)},movementY:function(i){return"movementY"in i?i.movementY:FT}}),MP=gs(oE),oH=to({},oE,{dataTransfer:0}),aH=gs(oH),sH=to({},Jg,{relatedTarget:0}),UT=gs(sH),uH=to({},yh,{animationName:0,elapsedTime:0,pseudoElement:0}),lH=gs(uH),cH=to({},yh,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),fH=gs(cH),dH=to({},yh,{data:0}),DP=gs(dH),hH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mH(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=gH[i])?!!o[i]:!1}function tC(){return mH}var vH=to({},Jg,{key:function(i){if(i.key){var o=hH[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=p0(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?pH[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tC,charCode:function(i){return i.type==="keypress"?p0(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?p0(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),yH=gs(vH),EH=to({},oE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),PP=gs(EH),_H=to({},Jg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tC}),TH=gs(_H),SH=to({},yh,{propertyName:0,elapsedTime:0,pseudoElement:0}),wH=gs(SH),AH=to({},oE,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),IH=gs(AH),bH=[9,13,27,32],nC=Sl&&"CompositionEvent"in window,Sg=null;Sl&&"documentMode"in document&&(Sg=document.documentMode);var CH=Sl&&"TextEvent"in window&&!Sg,_4=Sl&&(!nC||Sg&&8<Sg&&11>=Sg),OP=" ",LP=!1;function T4(i,o){switch(i){case"keyup":return bH.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function S4(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Gd=!1;function RH(i,o){switch(i){case"compositionend":return S4(o);case"keypress":return o.which!==32?null:(LP=!0,OP);case"textInput":return i=o.data,i===OP&&LP?null:i;default:return null}}function xH(i,o){if(Gd)return i==="compositionend"||!nC&&T4(i,o)?(i=E4(),h0=Jb=tc=null,Gd=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return _4&&o.locale!=="ko"?null:o.data;default:return null}}var NH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kP(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!NH[i.type]:o==="textarea"}function w4(i,o,l,d){e4(d),o=D0(o,"onChange"),0<o.length&&(l=new eC("onChange","change",null,l,d),i.push({event:l,listeners:o}))}var wg=null,kg=null;function MH(i){O4(i,0)}function aE(i){var o=Kd(i);if(zF(o))return i}function DH(i,o){if(i==="change")return o}var A4=!1;if(Sl){var BT;if(Sl){var jT="oninput"in document;if(!jT){var FP=document.createElement("div");FP.setAttribute("oninput","return;"),jT=typeof FP.oninput=="function"}BT=jT}else BT=!1;A4=BT&&(!document.documentMode||9<document.documentMode)}function UP(){wg&&(wg.detachEvent("onpropertychange",I4),kg=wg=null)}function I4(i){if(i.propertyName==="value"&&aE(kg)){var o=[];w4(o,kg,i,Yb(i)),i4(MH,o)}}function PH(i,o,l){i==="focusin"?(UP(),wg=o,kg=l,wg.attachEvent("onpropertychange",I4)):i==="focusout"&&UP()}function OH(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return aE(kg)}function LH(i,o){if(i==="click")return aE(o)}function kH(i,o){if(i==="input"||i==="change")return aE(o)}function FH(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var gu=typeof Object.is=="function"?Object.is:FH;function Fg(i,o){if(gu(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!PI.call(o,g)||!gu(i[g],o[g]))return!1}return!0}function BP(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function jP(i,o){var l=BP(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=o&&d>=o)return{node:l,offset:o-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=BP(l)}}function b4(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?b4(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function C4(){for(var i=window,o=I0();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch(d){l=!1}if(l)i=o.contentWindow;else break;o=I0(i.document)}return o}function rC(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function UH(i){var o=C4(),l=i.focusedElem,d=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&b4(l.ownerDocument.documentElement,l)){if(d!==null&&rC(l)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=l.textContent.length,S=Math.min(d.start,g);d=d.end===void 0?S:Math.min(d.end,g),!i.extend&&S>d&&(g=d,d=S,S=g),g=jP(l,S);var b=jP(l,d);g&&b&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==b.node||i.focusOffset!==b.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),S>d?(i.addRange(o),i.extend(b.node,b.offset)):(o.setEnd(b.node,b.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var BH=Sl&&"documentMode"in document&&11>=document.documentMode,Hd=null,QI=null,Ag=null,JI=!1;function ZP(i,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;JI||Hd==null||Hd!==I0(d)||(d=Hd,"selectionStart"in d&&rC(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ag&&Fg(Ag,d)||(Ag=d,d=D0(QI,"onSelect"),0<d.length&&(o=new eC("onSelect","select",null,o,l),i.push({event:o,listeners:d}),o.target=Hd)))}function Yy(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Vd={animationend:Yy("Animation","AnimationEnd"),animationiteration:Yy("Animation","AnimationIteration"),animationstart:Yy("Animation","AnimationStart"),transitionend:Yy("Transition","TransitionEnd")},ZT={},R4={};Sl&&(R4=document.createElement("div").style,"AnimationEvent"in window||(delete Vd.animationend.animation,delete Vd.animationiteration.animation,delete Vd.animationstart.animation),"TransitionEvent"in window||delete Vd.transitionend.transition);function sE(i){if(ZT[i])return ZT[i];if(!Vd[i])return i;var o=Vd[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in R4)return ZT[i]=o[l];return i}var x4=sE("animationend"),N4=sE("animationiteration"),M4=sE("animationstart"),D4=sE("transitionend"),P4=new Map,qP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hc(i,o){P4.set(i,o),uf(o,[i])}for(var qT=0;qT<qP.length;qT++){var GT=qP[qT],jH=GT.toLowerCase(),ZH=GT[0].toUpperCase()+GT.slice(1);hc(jH,"on"+ZH)}hc(x4,"onAnimationEnd");hc(N4,"onAnimationIteration");hc(M4,"onAnimationStart");hc("dblclick","onDoubleClick");hc("focusin","onFocus");hc("focusout","onBlur");hc(D4,"onTransitionEnd");lh("onMouseEnter",["mouseout","mouseover"]);lh("onMouseLeave",["mouseout","mouseover"]);lh("onPointerEnter",["pointerout","pointerover"]);lh("onPointerLeave",["pointerout","pointerover"]);uf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uf("onBeforeInput",["compositionend","keypress","textInput","paste"]);uf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qH=new Set("cancel close invalid load scroll toggle".split(" ").concat(mg));function GP(i,o,l){var d=i.type||"unknown-event";i.currentTarget=l,j9(d,o,void 0,i),i.currentTarget=null}function O4(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],g=d.event;d=d.listeners;e:{var S=void 0;if(o)for(var b=d.length-1;0<=b;b--){var p=d[b],w=p.instance,F=p.currentTarget;if(p=p.listener,w!==S&&g.isPropagationStopped())break e;GP(g,p,F),S=w}else for(b=0;b<d.length;b++){if(p=d[b],w=p.instance,F=p.currentTarget,p=p.listener,w!==S&&g.isPropagationStopped())break e;GP(g,p,F),S=w}}}if(C0)throw i=YI,C0=!1,YI=null,i}function Li(i,o){var l=o[ib];l===void 0&&(l=o[ib]=new Set);var d=i+"__bubble";l.has(d)||(L4(o,i,2,!1),l.add(d))}function HT(i,o,l){var d=0;o&&(d|=4),L4(l,i,d,o)}var Wy="_reactListening"+Math.random().toString(36).slice(2);function Ug(i){if(!i[Wy]){i[Wy]=!0,qF.forEach(function(l){l!=="selectionchange"&&(qH.has(l)||HT(l,!1,i),HT(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Wy]||(o[Wy]=!0,HT("selectionchange",!1,o))}}function L4(i,o,l,d){switch(y4(o)){case 1:var g=nH;break;case 4:g=rH;break;default:g=Qb}l=g.bind(null,o,l,i),g=void 0,!zI||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(o,l,{capture:!0,passive:g}):i.addEventListener(o,l,!0):g!==void 0?i.addEventListener(o,l,{passive:g}):i.addEventListener(o,l,!1)}function VT(i,o,l,d,g){var S=d;if(!(o&1)&&!(o&2)&&d!==null)e:for(;;){if(d===null)return;var b=d.tag;if(b===3||b===4){var p=d.stateNode.containerInfo;if(p===g||p.nodeType===8&&p.parentNode===g)break;if(b===4)for(b=d.return;b!==null;){var w=b.tag;if((w===3||w===4)&&(w=b.stateNode.containerInfo,w===g||w.nodeType===8&&w.parentNode===g))return;b=b.return}for(;p!==null;){if(b=Kc(p),b===null)return;if(w=b.tag,w===5||w===6){d=S=b;continue e}p=p.parentNode}}d=d.return}i4(function(){var F=S,C=Yb(l),E=[];e:{var y=P4.get(i);if(y!==void 0){var P=eC,m=i;switch(i){case"keypress":if(p0(l)===0)break e;case"keydown":case"keyup":P=yH;break;case"focusin":m="focus",P=UT;break;case"focusout":m="blur",P=UT;break;case"beforeblur":case"afterblur":P=UT;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=MP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=aH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=TH;break;case x4:case N4:case M4:P=lH;break;case D4:P=wH;break;case"scroll":P=iH;break;case"wheel":P=IH;break;case"copy":case"cut":case"paste":P=fH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=PP}var T=(o&4)!==0,U=!T&&i==="scroll",M=T?y!==null?y+"Capture":null:y;T=[];for(var _=F,I;_!==null;){I=_;var x=I.stateNode;if(I.tag===5&&x!==null&&(I=x,M!==null&&(x=Dg(_,M),x!=null&&T.push(Bg(_,x,I)))),U)break;_=_.return}0<T.length&&(y=new P(y,m,null,l,C),E.push({event:y,listeners:T}))}}if(!(o&7)){e:{if(y=i==="mouseover"||i==="pointerover",P=i==="mouseout"||i==="pointerout",y&&l!==VI&&(m=l.relatedTarget||l.fromElement)&&(Kc(m)||m[wl]))break e;if((P||y)&&(y=C.window===C?C:(y=C.ownerDocument)?y.defaultView||y.parentWindow:window,P?(m=l.relatedTarget||l.toElement,P=F,m=m?Kc(m):null,m!==null&&(U=lf(m),m!==U||m.tag!==5&&m.tag!==6)&&(m=null)):(P=null,m=F),P!==m)){if(T=MP,x="onMouseLeave",M="onMouseEnter",_="mouse",(i==="pointerout"||i==="pointerover")&&(T=PP,x="onPointerLeave",M="onPointerEnter",_="pointer"),U=P==null?y:Kd(P),I=m==null?y:Kd(m),y=new T(x,_+"leave",P,l,C),y.target=U,y.relatedTarget=I,x=null,Kc(C)===F&&(T=new T(M,_+"enter",m,l,C),T.target=I,T.relatedTarget=U,x=T),U=x,P&&m)t:{for(T=P,M=m,_=0,I=T;I;I=kd(I))_++;for(I=0,x=M;x;x=kd(x))I++;for(;0<_-I;)T=kd(T),_--;for(;0<I-_;)M=kd(M),I--;for(;_--;){if(T===M||M!==null&&T===M.alternate)break t;T=kd(T),M=kd(M)}T=null}else T=null;P!==null&&HP(E,y,P,T,!1),m!==null&&U!==null&&HP(E,U,m,T,!0)}}e:{if(y=F?Kd(F):window,P=y.nodeName&&y.nodeName.toLowerCase(),P==="select"||P==="input"&&y.type==="file")var Z=DH;else if(kP(y))if(A4)Z=kH;else{Z=OH;var Y=PH}else(P=y.nodeName)&&P.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(Z=LH);if(Z&&(Z=Z(i,F))){w4(E,Z,l,C);break e}Y&&Y(i,y,F),i==="focusout"&&(Y=y._wrapperState)&&Y.controlled&&y.type==="number"&&jI(y,"number",y.value)}switch(Y=F?Kd(F):window,i){case"focusin":(kP(Y)||Y.contentEditable==="true")&&(Hd=Y,QI=F,Ag=null);break;case"focusout":Ag=QI=Hd=null;break;case"mousedown":JI=!0;break;case"contextmenu":case"mouseup":case"dragend":JI=!1,ZP(E,l,C);break;case"selectionchange":if(BH)break;case"keydown":case"keyup":ZP(E,l,C)}var $;if(nC)e:{switch(i){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else Gd?T4(i,l)&&(Q="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Q="onCompositionStart");Q&&(_4&&l.locale!=="ko"&&(Gd||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&Gd&&($=E4()):(tc=C,Jb="value"in tc?tc.value:tc.textContent,Gd=!0)),Y=D0(F,Q),0<Y.length&&(Q=new DP(Q,i,null,l,C),E.push({event:Q,listeners:Y}),$?Q.data=$:($=S4(l),$!==null&&(Q.data=$)))),($=CH?RH(i,l):xH(i,l))&&(F=D0(F,"onBeforeInput"),0<F.length&&(C=new DP("onBeforeInput","beforeinput",null,l,C),E.push({event:C,listeners:F}),C.data=$))}O4(E,o)})}function Bg(i,o,l){return{instance:i,listener:o,currentTarget:l}}function D0(i,o){for(var l=o+"Capture",d=[];i!==null;){var g=i,S=g.stateNode;g.tag===5&&S!==null&&(g=S,S=Dg(i,l),S!=null&&d.unshift(Bg(i,S,g)),S=Dg(i,o),S!=null&&d.push(Bg(i,S,g))),i=i.return}return d}function kd(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function HP(i,o,l,d,g){for(var S=o._reactName,b=[];l!==null&&l!==d;){var p=l,w=p.alternate,F=p.stateNode;if(w!==null&&w===d)break;p.tag===5&&F!==null&&(p=F,g?(w=Dg(l,S),w!=null&&b.unshift(Bg(l,w,p))):g||(w=Dg(l,S),w!=null&&b.push(Bg(l,w,p)))),l=l.return}b.length!==0&&i.push({event:o,listeners:b})}var GH=/\r\n?/g,HH=/\u0000|\uFFFD/g;function VP(i){return(typeof i=="string"?i:""+i).replace(GH,"\n").replace(HH,"")}function $y(i,o,l){if(o=VP(o),VP(i)!==o&&l)throw Error(Hn(425))}function P0(){}var eb=null,tb=null;function nb(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var rb=typeof setTimeout=="function"?setTimeout:void 0,VH=typeof clearTimeout=="function"?clearTimeout:void 0,KP=typeof Promise=="function"?Promise:void 0,KH=typeof queueMicrotask=="function"?queueMicrotask:typeof KP<"u"?function(i){return KP.resolve(null).then(i).catch(zH)}:rb;function zH(i){setTimeout(function(){throw i})}function KT(i,o){var l=o,d=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(d===0){i.removeChild(g),Lg(o);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=g}while(l);Lg(o)}function ac(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function zP(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var Eh=Math.random().toString(36).slice(2),ku="__reactFiber$"+Eh,jg="__reactProps$"+Eh,wl="__reactContainer$"+Eh,ib="__reactEvents$"+Eh,YH="__reactListeners$"+Eh,WH="__reactHandles$"+Eh;function Kc(i){var o=i[ku];if(o)return o;for(var l=i.parentNode;l;){if(o=l[wl]||l[ku]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=zP(i);i!==null;){if(l=i[ku])return l;i=zP(i)}return o}i=l,l=i.parentNode}return null}function em(i){return i=i[ku]||i[wl],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Kd(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Hn(33))}function uE(i){return i[jg]||null}var ob=[],zd=-1;function pc(i){return{current:i}}function ki(i){0>zd||(i.current=ob[zd],ob[zd]=null,zd--)}function Pi(i,o){zd++,ob[zd]=i.current,i.current=o}var dc={},ia=pc(dc),ja=pc(!1),ef=dc;function ch(i,o){var l=i.type.contextTypes;if(!l)return dc;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var g={},S;for(S in l)g[S]=o[S];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function Za(i){return i=i.childContextTypes,i!=null}function O0(){ki(ja),ki(ia)}function YP(i,o,l){if(ia.current!==dc)throw Error(Hn(168));Pi(ia,o),Pi(ja,l)}function k4(i,o,l){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var g in d)if(!(g in o))throw Error(Hn(108,P9(i)||"Unknown",g));return to({},l,d)}function L0(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||dc,ef=ia.current,Pi(ia,i),Pi(ja,ja.current),!0}function WP(i,o,l){var d=i.stateNode;if(!d)throw Error(Hn(169));l?(i=k4(i,o,ef),d.__reactInternalMemoizedMergedChildContext=i,ki(ja),ki(ia),Pi(ia,i)):ki(ja),Pi(ja,l)}var yl=null,lE=!1,zT=!1;function F4(i){yl===null?yl=[i]:yl.push(i)}function $H(i){lE=!0,F4(i)}function gc(){if(!zT&&yl!==null){zT=!0;var i=0,o=wi;try{var l=yl;for(wi=1;i<l.length;i++){var d=l[i];do d=d(!0);while(d!==null)}yl=null,lE=!1}catch(g){throw yl!==null&&(yl=yl.slice(i+1)),u4(Wb,gc),g}finally{wi=o,zT=!1}}return null}var Yd=[],Wd=0,k0=null,F0=0,Ps=[],Os=0,tf=null,El=1,_l="";function qc(i,o){Yd[Wd++]=F0,Yd[Wd++]=k0,k0=i,F0=o}function U4(i,o,l){Ps[Os++]=El,Ps[Os++]=_l,Ps[Os++]=tf,tf=i;var d=El;i=_l;var g=32-hu(d)-1;d&=~(1<<g),l+=1;var S=32-hu(o)+g;if(30<S){var b=g-g%5;S=(d&(1<<b)-1).toString(32),d>>=b,g-=b,El=1<<32-hu(o)+g|l<<g|d,_l=S+i}else El=1<<S|l<<g|d,_l=i}function iC(i){i.return!==null&&(qc(i,1),U4(i,1,0))}function oC(i){for(;i===k0;)k0=Yd[--Wd],Yd[Wd]=null,F0=Yd[--Wd],Yd[Wd]=null;for(;i===tf;)tf=Ps[--Os],Ps[Os]=null,_l=Ps[--Os],Ps[Os]=null,El=Ps[--Os],Ps[Os]=null}var ds=null,cs=null,Gi=!1,uu=null;function B4(i,o){var l=ks(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function $P(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,ds=i,cs=ac(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,ds=i,cs=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=tf!==null?{id:El,overflow:_l}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=ks(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,ds=i,cs=null,!0):!1;default:return!1}}function ab(i){return(i.mode&1)!==0&&(i.flags&128)===0}function sb(i){if(Gi){var o=cs;if(o){var l=o;if(!$P(i,o)){if(ab(i))throw Error(Hn(418));o=ac(l.nextSibling);var d=ds;o&&$P(i,o)?B4(d,l):(i.flags=i.flags&-4097|2,Gi=!1,ds=i)}}else{if(ab(i))throw Error(Hn(418));i.flags=i.flags&-4097|2,Gi=!1,ds=i}}}function XP(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ds=i}function Xy(i){if(i!==ds)return!1;if(!Gi)return XP(i),Gi=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!nb(i.type,i.memoizedProps)),o&&(o=cs)){if(ab(i))throw j4(),Error(Hn(418));for(;o;)B4(i,o),o=ac(o.nextSibling)}if(XP(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Hn(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){cs=ac(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}cs=null}}else cs=ds?ac(i.stateNode.nextSibling):null;return!0}function j4(){for(var i=cs;i;)i=ac(i.nextSibling)}function fh(){cs=ds=null,Gi=!1}function aC(i){uu===null?uu=[i]:uu.push(i)}var XH=bl.ReactCurrentBatchConfig;function og(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(Hn(309));var d=l.stateNode}if(!d)throw Error(Hn(147,i));var g=d,S=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===S?o.ref:(o=function(b){var p=g.refs;b===null?delete p[S]:p[S]=b},o._stringRef=S,o)}if(typeof i!="string")throw Error(Hn(284));if(!l._owner)throw Error(Hn(290,i))}return i}function Qy(i,o){throw i=Object.prototype.toString.call(o),Error(Hn(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function QP(i){var o=i._init;return o(i._payload)}function Z4(i){function o(M,_){if(i){var I=M.deletions;I===null?(M.deletions=[_],M.flags|=16):I.push(_)}}function l(M,_){if(!i)return null;for(;_!==null;)o(M,_),_=_.sibling;return null}function d(M,_){for(M=new Map;_!==null;)_.key!==null?M.set(_.key,_):M.set(_.index,_),_=_.sibling;return M}function g(M,_){return M=cc(M,_),M.index=0,M.sibling=null,M}function S(M,_,I){return M.index=I,i?(I=M.alternate,I!==null?(I=I.index,I<_?(M.flags|=2,_):I):(M.flags|=2,_)):(M.flags|=1048576,_)}function b(M){return i&&M.alternate===null&&(M.flags|=2),M}function p(M,_,I,x){return _===null||_.tag!==6?(_=eS(I,M.mode,x),_.return=M,_):(_=g(_,I),_.return=M,_)}function w(M,_,I,x){var Z=I.type;return Z===qd?C(M,_,I.props.children,x,I.key):_!==null&&(_.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Xl&&QP(Z)===_.type)?(x=g(_,I.props),x.ref=og(M,_,I),x.return=M,x):(x=T0(I.type,I.key,I.props,null,M.mode,x),x.ref=og(M,_,I),x.return=M,x)}function F(M,_,I,x){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=tS(I,M.mode,x),_.return=M,_):(_=g(_,I.children||[]),_.return=M,_)}function C(M,_,I,x,Z){return _===null||_.tag!==7?(_=Xc(I,M.mode,x,Z),_.return=M,_):(_=g(_,I),_.return=M,_)}function E(M,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=eS(""+_,M.mode,I),_.return=M,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Zy:return I=T0(_.type,_.key,_.props,null,M.mode,I),I.ref=og(M,null,_),I.return=M,I;case Zd:return _=tS(_,M.mode,I),_.return=M,_;case Xl:var x=_._init;return E(M,x(_._payload),I)}if(pg(_)||eg(_))return _=Xc(_,M.mode,I,null),_.return=M,_;Qy(M,_)}return null}function y(M,_,I,x){var Z=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return Z!==null?null:p(M,_,""+I,x);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Zy:return I.key===Z?w(M,_,I,x):null;case Zd:return I.key===Z?F(M,_,I,x):null;case Xl:return Z=I._init,y(M,_,Z(I._payload),x)}if(pg(I)||eg(I))return Z!==null?null:C(M,_,I,x,null);Qy(M,I)}return null}function P(M,_,I,x,Z){if(typeof x=="string"&&x!==""||typeof x=="number")return M=M.get(I)||null,p(_,M,""+x,Z);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zy:return M=M.get(x.key===null?I:x.key)||null,w(_,M,x,Z);case Zd:return M=M.get(x.key===null?I:x.key)||null,F(_,M,x,Z);case Xl:var Y=x._init;return P(M,_,I,Y(x._payload),Z)}if(pg(x)||eg(x))return M=M.get(I)||null,C(_,M,x,Z,null);Qy(_,x)}return null}function m(M,_,I,x){for(var Z=null,Y=null,$=_,Q=_=0,se=null;$!==null&&Q<I.length;Q++){$.index>Q?(se=$,$=null):se=$.sibling;var R=y(M,$,I[Q],x);if(R===null){$===null&&($=se);break}i&&$&&R.alternate===null&&o(M,$),_=S(R,_,Q),Y===null?Z=R:Y.sibling=R,Y=R,$=se}if(Q===I.length)return l(M,$),Gi&&qc(M,Q),Z;if($===null){for(;Q<I.length;Q++)$=E(M,I[Q],x),$!==null&&(_=S($,_,Q),Y===null?Z=$:Y.sibling=$,Y=$);return Gi&&qc(M,Q),Z}for($=d(M,$);Q<I.length;Q++)se=P($,M,Q,I[Q],x),se!==null&&(i&&se.alternate!==null&&$.delete(se.key===null?Q:se.key),_=S(se,_,Q),Y===null?Z=se:Y.sibling=se,Y=se);return i&&$.forEach(function(X){return o(M,X)}),Gi&&qc(M,Q),Z}function T(M,_,I,x){var Z=eg(I);if(typeof Z!="function")throw Error(Hn(150));if(I=Z.call(I),I==null)throw Error(Hn(151));for(var Y=Z=null,$=_,Q=_=0,se=null,R=I.next();$!==null&&!R.done;Q++,R=I.next()){$.index>Q?(se=$,$=null):se=$.sibling;var X=y(M,$,R.value,x);if(X===null){$===null&&($=se);break}i&&$&&X.alternate===null&&o(M,$),_=S(X,_,Q),Y===null?Z=X:Y.sibling=X,Y=X,$=se}if(R.done)return l(M,$),Gi&&qc(M,Q),Z;if($===null){for(;!R.done;Q++,R=I.next())R=E(M,R.value,x),R!==null&&(_=S(R,_,Q),Y===null?Z=R:Y.sibling=R,Y=R);return Gi&&qc(M,Q),Z}for($=d(M,$);!R.done;Q++,R=I.next())R=P($,M,Q,R.value,x),R!==null&&(i&&R.alternate!==null&&$.delete(R.key===null?Q:R.key),_=S(R,_,Q),Y===null?Z=R:Y.sibling=R,Y=R);return i&&$.forEach(function(ce){return o(M,ce)}),Gi&&qc(M,Q),Z}function U(M,_,I,x){if(typeof I=="object"&&I!==null&&I.type===qd&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Zy:e:{for(var Z=I.key,Y=_;Y!==null;){if(Y.key===Z){if(Z=I.type,Z===qd){if(Y.tag===7){l(M,Y.sibling),_=g(Y,I.props.children),_.return=M,M=_;break e}}else if(Y.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Xl&&QP(Z)===Y.type){l(M,Y.sibling),_=g(Y,I.props),_.ref=og(M,Y,I),_.return=M,M=_;break e}l(M,Y);break}else o(M,Y);Y=Y.sibling}I.type===qd?(_=Xc(I.props.children,M.mode,x,I.key),_.return=M,M=_):(x=T0(I.type,I.key,I.props,null,M.mode,x),x.ref=og(M,_,I),x.return=M,M=x)}return b(M);case Zd:e:{for(Y=I.key;_!==null;){if(_.key===Y)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){l(M,_.sibling),_=g(_,I.children||[]),_.return=M,M=_;break e}else{l(M,_);break}else o(M,_);_=_.sibling}_=tS(I,M.mode,x),_.return=M,M=_}return b(M);case Xl:return Y=I._init,U(M,_,Y(I._payload),x)}if(pg(I))return m(M,_,I,x);if(eg(I))return T(M,_,I,x);Qy(M,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(l(M,_.sibling),_=g(_,I),_.return=M,M=_):(l(M,_),_=eS(I,M.mode,x),_.return=M,M=_),b(M)):l(M,_)}return U}var dh=Z4(!0),q4=Z4(!1),U0=pc(null),B0=null,$d=null,sC=null;function uC(){sC=$d=B0=null}function lC(i){var o=U0.current;ki(U0),i._currentValue=o}function ub(i,o,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===l)break;i=i.return}}function ah(i,o){B0=i,sC=$d=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(Ba=!0),i.firstContext=null)}function Us(i){var o=i._currentValue;if(sC!==i)if(i={context:i,memoizedValue:o,next:null},$d===null){if(B0===null)throw Error(Hn(308));$d=i,B0.dependencies={lanes:0,firstContext:i}}else $d=$d.next=i;return o}var zc=null;function cC(i){zc===null?zc=[i]:zc.push(i)}function G4(i,o,l,d){var g=o.interleaved;return g===null?(l.next=l,cC(o)):(l.next=g.next,g.next=l),o.interleaved=l,Al(i,d)}function Al(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Ql=!1;function fC(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H4(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Tl(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function sc(i,o,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,ui&2){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,Al(i,l)}return g=d.interleaved,g===null?(o.next=o,cC(d)):(o.next=g.next,g.next=o),d.interleaved=o,Al(i,l)}function g0(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,$b(i,l)}}function JP(i,o){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var b={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};S===null?g=S=b:S=S.next=b,l=l.next}while(l!==null);S===null?g=S=o:S=S.next=o}else g=S=o;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:S,shared:d.shared,effects:d.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function j0(i,o,l,d){var g=i.updateQueue;Ql=!1;var S=g.firstBaseUpdate,b=g.lastBaseUpdate,p=g.shared.pending;if(p!==null){g.shared.pending=null;var w=p,F=w.next;w.next=null,b===null?S=F:b.next=F,b=w;var C=i.alternate;C!==null&&(C=C.updateQueue,p=C.lastBaseUpdate,p!==b&&(p===null?C.firstBaseUpdate=F:p.next=F,C.lastBaseUpdate=w))}if(S!==null){var E=g.baseState;b=0,C=F=w=null,p=S;do{var y=p.lane,P=p.eventTime;if((d&y)===y){C!==null&&(C=C.next={eventTime:P,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var m=i,T=p;switch(y=o,P=l,T.tag){case 1:if(m=T.payload,typeof m=="function"){E=m.call(P,E,y);break e}E=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=T.payload,y=typeof m=="function"?m.call(P,E,y):m,y==null)break e;E=to({},E,y);break e;case 2:Ql=!0}}p.callback!==null&&p.lane!==0&&(i.flags|=64,y=g.effects,y===null?g.effects=[p]:y.push(p))}else P={eventTime:P,lane:y,tag:p.tag,payload:p.payload,callback:p.callback,next:null},C===null?(F=C=P,w=E):C=C.next=P,b|=y;if(p=p.next,p===null){if(p=g.shared.pending,p===null)break;y=p,p=y.next,y.next=null,g.lastBaseUpdate=y,g.shared.pending=null}}while(!0);if(C===null&&(w=E),g.baseState=w,g.firstBaseUpdate=F,g.lastBaseUpdate=C,o=g.shared.interleaved,o!==null){g=o;do b|=g.lane,g=g.next;while(g!==o)}else S===null&&(g.shared.lanes=0);rf|=b,i.lanes=b,i.memoizedState=E}}function eO(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],g=d.callback;if(g!==null){if(d.callback=null,d=l,typeof g!="function")throw Error(Hn(191,g));g.call(d)}}}var tm={},Uu=pc(tm),Zg=pc(tm),qg=pc(tm);function Yc(i){if(i===tm)throw Error(Hn(174));return i}function dC(i,o){switch(Pi(qg,o),Pi(Zg,i),Pi(Uu,tm),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:qI(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=qI(o,i)}ki(Uu),Pi(Uu,o)}function hh(){ki(Uu),ki(Zg),ki(qg)}function V4(i){Yc(qg.current);var o=Yc(Uu.current),l=qI(o,i.type);o!==l&&(Pi(Zg,i),Pi(Uu,l))}function hC(i){Zg.current===i&&(ki(Uu),ki(Zg))}var Qi=pc(0);function Z0(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var YT=[];function pC(){for(var i=0;i<YT.length;i++)YT[i]._workInProgressVersionPrimary=null;YT.length=0}var m0=bl.ReactCurrentDispatcher,WT=bl.ReactCurrentBatchConfig,nf=0,eo=null,Mo=null,Bo=null,q0=!1,Ig=!1,Gg=0,QH=0;function Jo(){throw Error(Hn(321))}function gC(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!gu(i[l],o[l]))return!1;return!0}function mC(i,o,l,d,g,S){if(nf=S,eo=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,m0.current=i===null||i.memoizedState===null?n7:r7,i=l(d,g),Ig){S=0;do{if(Ig=!1,Gg=0,25<=S)throw Error(Hn(301));S+=1,Bo=Mo=null,o.updateQueue=null,m0.current=i7,i=l(d,g)}while(Ig)}if(m0.current=G0,o=Mo!==null&&Mo.next!==null,nf=0,Bo=Mo=eo=null,q0=!1,o)throw Error(Hn(300));return i}function vC(){var i=Gg!==0;return Gg=0,i}function Lu(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bo===null?eo.memoizedState=Bo=i:Bo=Bo.next=i,Bo}function Bs(){if(Mo===null){var i=eo.alternate;i=i!==null?i.memoizedState:null}else i=Mo.next;var o=Bo===null?eo.memoizedState:Bo.next;if(o!==null)Bo=o,Mo=i;else{if(i===null)throw Error(Hn(310));Mo=i,i={memoizedState:Mo.memoizedState,baseState:Mo.baseState,baseQueue:Mo.baseQueue,queue:Mo.queue,next:null},Bo===null?eo.memoizedState=Bo=i:Bo=Bo.next=i}return Bo}function Hg(i,o){return typeof o=="function"?o(i):o}function $T(i){var o=Bs(),l=o.queue;if(l===null)throw Error(Hn(311));l.lastRenderedReducer=i;var d=Mo,g=d.baseQueue,S=l.pending;if(S!==null){if(g!==null){var b=g.next;g.next=S.next,S.next=b}d.baseQueue=g=S,l.pending=null}if(g!==null){S=g.next,d=d.baseState;var p=b=null,w=null,F=S;do{var C=F.lane;if((nf&C)===C)w!==null&&(w=w.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),d=F.hasEagerState?F.eagerState:i(d,F.action);else{var E={lane:C,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};w===null?(p=w=E,b=d):w=w.next=E,eo.lanes|=C,rf|=C}F=F.next}while(F!==null&&F!==S);w===null?b=d:w.next=p,gu(d,o.memoizedState)||(Ba=!0),o.memoizedState=d,o.baseState=b,o.baseQueue=w,l.lastRenderedState=d}if(i=l.interleaved,i!==null){g=i;do S=g.lane,eo.lanes|=S,rf|=S,g=g.next;while(g!==i)}else g===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function XT(i){var o=Bs(),l=o.queue;if(l===null)throw Error(Hn(311));l.lastRenderedReducer=i;var d=l.dispatch,g=l.pending,S=o.memoizedState;if(g!==null){l.pending=null;var b=g=g.next;do S=i(S,b.action),b=b.next;while(b!==g);gu(S,o.memoizedState)||(Ba=!0),o.memoizedState=S,o.baseQueue===null&&(o.baseState=S),l.lastRenderedState=S}return[S,d]}function K4(){}function z4(i,o){var l=eo,d=Bs(),g=o(),S=!gu(d.memoizedState,g);if(S&&(d.memoizedState=g,Ba=!0),d=d.queue,yC($4.bind(null,l,d,i),[i]),d.getSnapshot!==o||S||Bo!==null&&Bo.memoizedState.tag&1){if(l.flags|=2048,Vg(9,W4.bind(null,l,d,g,o),void 0,null),jo===null)throw Error(Hn(349));nf&30||Y4(l,o,g)}return g}function Y4(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=eo.updateQueue,o===null?(o={lastEffect:null,stores:null},eo.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function W4(i,o,l,d){o.value=l,o.getSnapshot=d,X4(o)&&Q4(i)}function $4(i,o,l){return l(function(){X4(o)&&Q4(i)})}function X4(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!gu(i,l)}catch(d){return!0}}function Q4(i){var o=Al(i,1);o!==null&&pu(o,i,1,-1)}function tO(i){var o=Lu();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hg,lastRenderedState:i},o.queue=i,i=i.dispatch=t7.bind(null,eo,i),[o.memoizedState,i]}function Vg(i,o,l,d){return i={tag:i,create:o,destroy:l,deps:d,next:null},o=eo.updateQueue,o===null?(o={lastEffect:null,stores:null},eo.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,o.lastEffect=i)),i}function J4(){return Bs().memoizedState}function v0(i,o,l,d){var g=Lu();eo.flags|=i,g.memoizedState=Vg(1|o,l,void 0,d===void 0?null:d)}function cE(i,o,l,d){var g=Bs();d=d===void 0?null:d;var S=void 0;if(Mo!==null){var b=Mo.memoizedState;if(S=b.destroy,d!==null&&gC(d,b.deps)){g.memoizedState=Vg(o,l,S,d);return}}eo.flags|=i,g.memoizedState=Vg(1|o,l,S,d)}function nO(i,o){return v0(8390656,8,i,o)}function yC(i,o){return cE(2048,8,i,o)}function eU(i,o){return cE(4,2,i,o)}function tU(i,o){return cE(4,4,i,o)}function nU(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function rU(i,o,l){return l=l!=null?l.concat([i]):null,cE(4,4,nU.bind(null,o,i),l)}function EC(){}function iU(i,o){var l=Bs();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&gC(o,d[1])?d[0]:(l.memoizedState=[i,o],i)}function oU(i,o){var l=Bs();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&gC(o,d[1])?d[0]:(i=i(),l.memoizedState=[i,o],i)}function aU(i,o,l){return nf&21?(gu(l,o)||(l=f4(),eo.lanes|=l,rf|=l,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,Ba=!0),i.memoizedState=l)}function JH(i,o){var l=wi;wi=l!==0&&4>l?l:4,i(!0);var d=WT.transition;WT.transition={};try{i(!1),o()}finally{wi=l,WT.transition=d}}function sU(){return Bs().memoizedState}function e7(i,o,l){var d=lc(i);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},uU(i))lU(o,l);else if(l=G4(i,o,l,d),l!==null){var g=ya();pu(l,i,d,g),cU(l,o,d)}}function t7(i,o,l){var d=lc(i),g={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(uU(i))lU(o,g);else{var S=i.alternate;if(i.lanes===0&&(S===null||S.lanes===0)&&(S=o.lastRenderedReducer,S!==null))try{var b=o.lastRenderedState,p=S(b,l);if(g.hasEagerState=!0,g.eagerState=p,gu(p,b)){var w=o.interleaved;w===null?(g.next=g,cC(o)):(g.next=w.next,w.next=g),o.interleaved=g;return}}catch(F){}finally{}l=G4(i,o,g,d),l!==null&&(g=ya(),pu(l,i,d,g),cU(l,o,d))}}function uU(i){var o=i.alternate;return i===eo||o!==null&&o===eo}function lU(i,o){Ig=q0=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function cU(i,o,l){if(l&4194240){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,$b(i,l)}}var G0={readContext:Us,useCallback:Jo,useContext:Jo,useEffect:Jo,useImperativeHandle:Jo,useInsertionEffect:Jo,useLayoutEffect:Jo,useMemo:Jo,useReducer:Jo,useRef:Jo,useState:Jo,useDebugValue:Jo,useDeferredValue:Jo,useTransition:Jo,useMutableSource:Jo,useSyncExternalStore:Jo,useId:Jo,unstable_isNewReconciler:!1},n7={readContext:Us,useCallback:function(i,o){return Lu().memoizedState=[i,o===void 0?null:o],i},useContext:Us,useEffect:nO,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,v0(4194308,4,nU.bind(null,o,i),l)},useLayoutEffect:function(i,o){return v0(4194308,4,i,o)},useInsertionEffect:function(i,o){return v0(4,2,i,o)},useMemo:function(i,o){var l=Lu();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var d=Lu();return o=l!==void 0?l(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=e7.bind(null,eo,i),[d.memoizedState,i]},useRef:function(i){var o=Lu();return i={current:i},o.memoizedState=i},useState:tO,useDebugValue:EC,useDeferredValue:function(i){return Lu().memoizedState=i},useTransition:function(){var i=tO(!1),o=i[0];return i=JH.bind(null,i[1]),Lu().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var d=eo,g=Lu();if(Gi){if(l===void 0)throw Error(Hn(407));l=l()}else{if(l=o(),jo===null)throw Error(Hn(349));nf&30||Y4(d,o,l)}g.memoizedState=l;var S={value:l,getSnapshot:o};return g.queue=S,nO($4.bind(null,d,S,i),[i]),d.flags|=2048,Vg(9,W4.bind(null,d,S,l,o),void 0,null),l},useId:function(){var i=Lu(),o=jo.identifierPrefix;if(Gi){var l=_l,d=El;l=(d&~(1<<32-hu(d)-1)).toString(32)+l,o=":"+o+"R"+l,l=Gg++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=QH++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},r7={readContext:Us,useCallback:iU,useContext:Us,useEffect:yC,useImperativeHandle:rU,useInsertionEffect:eU,useLayoutEffect:tU,useMemo:oU,useReducer:$T,useRef:J4,useState:function(){return $T(Hg)},useDebugValue:EC,useDeferredValue:function(i){var o=Bs();return aU(o,Mo.memoizedState,i)},useTransition:function(){var i=$T(Hg)[0],o=Bs().memoizedState;return[i,o]},useMutableSource:K4,useSyncExternalStore:z4,useId:sU,unstable_isNewReconciler:!1},i7={readContext:Us,useCallback:iU,useContext:Us,useEffect:yC,useImperativeHandle:rU,useInsertionEffect:eU,useLayoutEffect:tU,useMemo:oU,useReducer:XT,useRef:J4,useState:function(){return XT(Hg)},useDebugValue:EC,useDeferredValue:function(i){var o=Bs();return Mo===null?o.memoizedState=i:aU(o,Mo.memoizedState,i)},useTransition:function(){var i=XT(Hg)[0],o=Bs().memoizedState;return[i,o]},useMutableSource:K4,useSyncExternalStore:z4,useId:sU,unstable_isNewReconciler:!1};function au(i,o){if(i&&i.defaultProps){o=to({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function lb(i,o,l,d){o=i.memoizedState,l=l(d,o),l=l==null?o:to({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var fE={isMounted:function(i){return(i=i._reactInternals)?lf(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var d=ya(),g=lc(i),S=Tl(d,g);S.payload=o,l!=null&&(S.callback=l),o=sc(i,S,g),o!==null&&(pu(o,i,g,d),g0(o,i,g))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var d=ya(),g=lc(i),S=Tl(d,g);S.tag=1,S.payload=o,l!=null&&(S.callback=l),o=sc(i,S,g),o!==null&&(pu(o,i,g,d),g0(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=ya(),d=lc(i),g=Tl(l,d);g.tag=2,o!=null&&(g.callback=o),o=sc(i,g,d),o!==null&&(pu(o,i,d,l),g0(o,i,d))}};function rO(i,o,l,d,g,S,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,S,b):o.prototype&&o.prototype.isPureReactComponent?!Fg(l,d)||!Fg(g,S):!0}function fU(i,o,l){var d=!1,g=dc,S=o.contextType;return typeof S=="object"&&S!==null?S=Us(S):(g=Za(o)?ef:ia.current,d=o.contextTypes,S=(d=d!=null)?ch(i,g):dc),o=new o(l,S),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=fE,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=S),o}function iO(i,o,l,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==i&&fE.enqueueReplaceState(o,o.state,null)}function cb(i,o,l,d){var g=i.stateNode;g.props=l,g.state=i.memoizedState,g.refs={},fC(i);var S=o.contextType;typeof S=="object"&&S!==null?g.context=Us(S):(S=Za(o)?ef:ia.current,g.context=ch(i,S)),g.state=i.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(lb(i,o,S,l),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&fE.enqueueReplaceState(g,g.state,null),j0(i,l,g,d),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function ph(i,o){try{var l="",d=o;do l+=D9(d),d=d.return;while(d);var g=l}catch(S){g="\nError generating stack: "+S.message+"\n"+S.stack}return{value:i,source:o,stack:g,digest:null}}function QT(i,o,l){return{value:i,source:null,stack:l!=null?l:null,digest:o!=null?o:null}}function fb(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var o7=typeof WeakMap=="function"?WeakMap:Map;function dU(i,o,l){l=Tl(-1,l),l.tag=3,l.payload={element:null};var d=o.value;return l.callback=function(){V0||(V0=!0,Tb=d),fb(i,o)},l}function hU(i,o,l){l=Tl(-1,l),l.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var g=o.value;l.payload=function(){return d(g)},l.callback=function(){fb(i,o)}}var S=i.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(l.callback=function(){fb(i,o),typeof d!="function"&&(uc===null?uc=new Set([this]):uc.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})}),l}function oO(i,o,l){var d=i.pingCache;if(d===null){d=i.pingCache=new o7;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(l)||(g.add(l),i=E7.bind(null,i,o,l),o.then(i,i))}function aO(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function sO(i,o,l,d,g){return i.mode&1?(i.flags|=65536,i.lanes=g,i):(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=Tl(-1,1),o.tag=2,sc(l,o,1))),l.lanes|=1),i)}var a7=bl.ReactCurrentOwner,Ba=!1;function va(i,o,l,d){o.child=i===null?q4(o,null,l,d):dh(o,i.child,l,d)}function uO(i,o,l,d,g){l=l.render;var S=o.ref;return ah(o,g),d=mC(i,o,l,d,S,g),l=vC(),i!==null&&!Ba?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Il(i,o,g)):(Gi&&l&&iC(o),o.flags|=1,va(i,o,d,g),o.child)}function lO(i,o,l,d,g){if(i===null){var S=l.type;return typeof S=="function"&&!CC(S)&&S.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=S,pU(i,o,S,d,g)):(i=T0(l.type,null,d,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(S=i.child,!(i.lanes&g)){var b=S.memoizedProps;if(l=l.compare,l=l!==null?l:Fg,l(b,d)&&i.ref===o.ref)return Il(i,o,g)}return o.flags|=1,i=cc(S,d),i.ref=o.ref,i.return=o,o.child=i}function pU(i,o,l,d,g){if(i!==null){var S=i.memoizedProps;if(Fg(S,d)&&i.ref===o.ref)if(Ba=!1,o.pendingProps=d=S,(i.lanes&g)!==0)i.flags&131072&&(Ba=!0);else return o.lanes=i.lanes,Il(i,o,g)}return db(i,o,l,d,g)}function gU(i,o,l){var d=o.pendingProps,g=d.children,S=i!==null?i.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pi(Qd,us),us|=l;else{if(!(l&1073741824))return i=S!==null?S.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Pi(Qd,us),us|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=S!==null?S.baseLanes:l,Pi(Qd,us),us|=d}else S!==null?(d=S.baseLanes|l,o.memoizedState=null):d=l,Pi(Qd,us),us|=d;return va(i,o,g,l),o.child}function mU(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function db(i,o,l,d,g){var S=Za(l)?ef:ia.current;return S=ch(o,S),ah(o,g),l=mC(i,o,l,d,S,g),d=vC(),i!==null&&!Ba?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Il(i,o,g)):(Gi&&d&&iC(o),o.flags|=1,va(i,o,l,g),o.child)}function cO(i,o,l,d,g){if(Za(l)){var S=!0;L0(o)}else S=!1;if(ah(o,g),o.stateNode===null)y0(i,o),fU(o,l,d),cb(o,l,d,g),d=!0;else if(i===null){var b=o.stateNode,p=o.memoizedProps;b.props=p;var w=b.context,F=l.contextType;typeof F=="object"&&F!==null?F=Us(F):(F=Za(l)?ef:ia.current,F=ch(o,F));var C=l.getDerivedStateFromProps,E=typeof C=="function"||typeof b.getSnapshotBeforeUpdate=="function";E||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(p!==d||w!==F)&&iO(o,b,d,F),Ql=!1;var y=o.memoizedState;b.state=y,j0(o,d,b,g),w=o.memoizedState,p!==d||y!==w||ja.current||Ql?(typeof C=="function"&&(lb(o,l,C,d),w=o.memoizedState),(p=Ql||rO(o,l,p,d,y,w,F))?(E||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=w),b.props=d,b.state=w,b.context=F,d=p):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,H4(i,o),p=o.memoizedProps,F=o.type===o.elementType?p:au(o.type,p),b.props=F,E=o.pendingProps,y=b.context,w=l.contextType,typeof w=="object"&&w!==null?w=Us(w):(w=Za(l)?ef:ia.current,w=ch(o,w));var P=l.getDerivedStateFromProps;(C=typeof P=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(p!==E||y!==w)&&iO(o,b,d,w),Ql=!1,y=o.memoizedState,b.state=y,j0(o,d,b,g);var m=o.memoizedState;p!==E||y!==m||ja.current||Ql?(typeof P=="function"&&(lb(o,l,P,d),m=o.memoizedState),(F=Ql||rO(o,l,F,d,y,m,w)||!1)?(C||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,m,w),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,m,w)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||p===i.memoizedProps&&y===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||p===i.memoizedProps&&y===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=m),b.props=d,b.state=m,b.context=w,d=F):(typeof b.componentDidUpdate!="function"||p===i.memoizedProps&&y===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||p===i.memoizedProps&&y===i.memoizedState||(o.flags|=1024),d=!1)}return hb(i,o,l,d,S,g)}function hb(i,o,l,d,g,S){mU(i,o);var b=(o.flags&128)!==0;if(!d&&!b)return g&&WP(o,l,!1),Il(i,o,S);d=o.stateNode,a7.current=o;var p=b&&typeof l.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&b?(o.child=dh(o,i.child,null,S),o.child=dh(o,null,p,S)):va(i,o,p,S),o.memoizedState=d.state,g&&WP(o,l,!0),o.child}function vU(i){var o=i.stateNode;o.pendingContext?YP(i,o.pendingContext,o.pendingContext!==o.context):o.context&&YP(i,o.context,!1),dC(i,o.containerInfo)}function fO(i,o,l,d,g){return fh(),aC(g),o.flags|=256,va(i,o,l,d),o.child}var pb={dehydrated:null,treeContext:null,retryLane:0};function gb(i){return{baseLanes:i,cachePool:null,transitions:null}}function yU(i,o,l){var d=o.pendingProps,g=Qi.current,S=!1,b=(o.flags&128)!==0,p;if((p=b)||(p=i!==null&&i.memoizedState===null?!1:(g&2)!==0),p?(S=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Pi(Qi,g&1),i===null)return sb(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(b=d.children,i=d.fallback,S?(d=o.mode,S=o.child,b={mode:"hidden",children:b},!(d&1)&&S!==null?(S.childLanes=0,S.pendingProps=b):S=pE(b,d,0,null),i=Xc(i,d,l,null),S.return=o,i.return=o,S.sibling=i,o.child=S,o.child.memoizedState=gb(l),o.memoizedState=pb,i):_C(o,b));if(g=i.memoizedState,g!==null&&(p=g.dehydrated,p!==null))return s7(i,o,b,d,p,g,l);if(S){S=d.fallback,b=o.mode,g=i.child,p=g.sibling;var w={mode:"hidden",children:d.children};return!(b&1)&&o.child!==g?(d=o.child,d.childLanes=0,d.pendingProps=w,o.deletions=null):(d=cc(g,w),d.subtreeFlags=g.subtreeFlags&14680064),p!==null?S=cc(p,S):(S=Xc(S,b,l,null),S.flags|=2),S.return=o,d.return=o,d.sibling=S,o.child=d,d=S,S=o.child,b=i.child.memoizedState,b=b===null?gb(l):{baseLanes:b.baseLanes|l,cachePool:null,transitions:b.transitions},S.memoizedState=b,S.childLanes=i.childLanes&~l,o.memoizedState=pb,d}return S=i.child,i=S.sibling,d=cc(S,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=l),d.return=o,d.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=d,o.memoizedState=null,d}function _C(i,o){return o=pE({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Jy(i,o,l,d){return d!==null&&aC(d),dh(o,i.child,null,l),i=_C(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function s7(i,o,l,d,g,S,b){if(l)return o.flags&256?(o.flags&=-257,d=QT(Error(Hn(422))),Jy(i,o,b,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(S=d.fallback,g=o.mode,d=pE({mode:"visible",children:d.children},g,0,null),S=Xc(S,g,b,null),S.flags|=2,d.return=o,S.return=o,d.sibling=S,o.child=d,o.mode&1&&dh(o,i.child,null,b),o.child.memoizedState=gb(b),o.memoizedState=pb,S);if(!(o.mode&1))return Jy(i,o,b,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var p=d.dgst;return d=p,S=Error(Hn(419)),d=QT(S,d,void 0),Jy(i,o,b,d)}if(p=(b&i.childLanes)!==0,Ba||p){if(d=jo,d!==null){switch(b&-b){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(d.suspendedLanes|b)?0:g,g!==0&&g!==S.retryLane&&(S.retryLane=g,Al(i,g),pu(d,i,g,-1))}return bC(),d=QT(Error(Hn(421))),Jy(i,o,b,d)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=_7.bind(null,i),g._reactRetry=o,null):(i=S.treeContext,cs=ac(g.nextSibling),ds=o,Gi=!0,uu=null,i!==null&&(Ps[Os++]=El,Ps[Os++]=_l,Ps[Os++]=tf,El=i.id,_l=i.overflow,tf=o),o=_C(o,d.children),o.flags|=4096,o)}function dO(i,o,l){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),ub(i.return,o,l)}function JT(i,o,l,d,g){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=l,S.tailMode=g)}function EU(i,o,l){var d=o.pendingProps,g=d.revealOrder,S=d.tail;if(va(i,o,d.children,l),d=Qi.current,d&2)d=d&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&dO(i,l,o);else if(i.tag===19)dO(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(Pi(Qi,d),!(o.mode&1))o.memoizedState=null;else switch(g){case"forwards":for(l=o.child,g=null;l!==null;)i=l.alternate,i!==null&&Z0(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=o.child,o.child=null):(g=l.sibling,l.sibling=null),JT(o,!1,g,l,S);break;case"backwards":for(l=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Z0(i)===null){o.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}JT(o,!0,l,null,S);break;case"together":JT(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function y0(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Il(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),rf|=o.lanes,!(l&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(Hn(153));if(o.child!==null){for(i=o.child,l=cc(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=cc(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function u7(i,o,l){switch(o.tag){case 3:vU(o),fh();break;case 5:V4(o);break;case 1:Za(o.type)&&L0(o);break;case 4:dC(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,g=o.memoizedProps.value;Pi(U0,d._currentValue),d._currentValue=g;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(Pi(Qi,Qi.current&1),o.flags|=128,null):l&o.child.childLanes?yU(i,o,l):(Pi(Qi,Qi.current&1),i=Il(i,o,l),i!==null?i.sibling:null);Pi(Qi,Qi.current&1);break;case 19:if(d=(l&o.childLanes)!==0,i.flags&128){if(d)return EU(i,o,l);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Pi(Qi,Qi.current),d)break;return null;case 22:case 23:return o.lanes=0,gU(i,o,l)}return Il(i,o,l)}var _U,mb,TU,SU;_U=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};mb=function(){};TU=function(i,o,l,d){var g=i.memoizedProps;if(g!==d){i=o.stateNode,Yc(Uu.current);var S=null;switch(l){case"input":g=UI(i,g),d=UI(i,d),S=[];break;case"select":g=to({},g,{value:void 0}),d=to({},d,{value:void 0}),S=[];break;case"textarea":g=ZI(i,g),d=ZI(i,d),S=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=P0)}GI(l,d);var b;l=null;for(F in g)if(!d.hasOwnProperty(F)&&g.hasOwnProperty(F)&&g[F]!=null)if(F==="style"){var p=g[F];for(b in p)p.hasOwnProperty(b)&&(l||(l={}),l[b]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(Ng.hasOwnProperty(F)?S||(S=[]):(S=S||[]).push(F,null));for(F in d){var w=d[F];if(p=g!=null?g[F]:void 0,d.hasOwnProperty(F)&&w!==p&&(w!=null||p!=null))if(F==="style")if(p){for(b in p)!p.hasOwnProperty(b)||w&&w.hasOwnProperty(b)||(l||(l={}),l[b]="");for(b in w)w.hasOwnProperty(b)&&p[b]!==w[b]&&(l||(l={}),l[b]=w[b])}else l||(S||(S=[]),S.push(F,l)),l=w;else F==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,p=p?p.__html:void 0,w!=null&&p!==w&&(S=S||[]).push(F,w)):F==="children"?typeof w!="string"&&typeof w!="number"||(S=S||[]).push(F,""+w):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(Ng.hasOwnProperty(F)?(w!=null&&F==="onScroll"&&Li("scroll",i),S||p===w||(S=[])):(S=S||[]).push(F,w))}l&&(S=S||[]).push("style",l);var F=S;(o.updateQueue=F)&&(o.flags|=4)}};SU=function(i,o,l,d){l!==d&&(o.flags|=4)};function ag(i,o){if(!Gi)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function ea(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(o)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=l,o}function l7(i,o,l){var d=o.pendingProps;switch(oC(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ea(o),null;case 1:return Za(o.type)&&O0(),ea(o),null;case 3:return d=o.stateNode,hh(),ki(ja),ki(ia),pC(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Xy(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,uu!==null&&(Ab(uu),uu=null))),mb(i,o),ea(o),null;case 5:hC(o);var g=Yc(qg.current);if(l=o.type,i!==null&&o.stateNode!=null)TU(i,o,l,d,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(Hn(166));return ea(o),null}if(i=Yc(Uu.current),Xy(o)){d=o.stateNode,l=o.type;var S=o.memoizedProps;switch(d[ku]=o,d[jg]=S,i=(o.mode&1)!==0,l){case"dialog":Li("cancel",d),Li("close",d);break;case"iframe":case"object":case"embed":Li("load",d);break;case"video":case"audio":for(g=0;g<mg.length;g++)Li(mg[g],d);break;case"source":Li("error",d);break;case"img":case"image":case"link":Li("error",d),Li("load",d);break;case"details":Li("toggle",d);break;case"input":TP(d,S),Li("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!S.multiple},Li("invalid",d);break;case"textarea":wP(d,S),Li("invalid",d)}GI(l,S),g=null;for(var b in S)if(S.hasOwnProperty(b)){var p=S[b];b==="children"?typeof p=="string"?d.textContent!==p&&(S.suppressHydrationWarning!==!0&&$y(d.textContent,p,i),g=["children",p]):typeof p=="number"&&d.textContent!==""+p&&(S.suppressHydrationWarning!==!0&&$y(d.textContent,p,i),g=["children",""+p]):Ng.hasOwnProperty(b)&&p!=null&&b==="onScroll"&&Li("scroll",d)}switch(l){case"input":qy(d),SP(d,S,!0);break;case"textarea":qy(d),AP(d);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(d.onclick=P0)}d=g,o.updateQueue=d,d!==null&&(o.flags|=4)}else{b=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=$F(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=b.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=b.createElement(l,{is:d.is}):(i=b.createElement(l),l==="select"&&(b=i,d.multiple?b.multiple=!0:d.size&&(b.size=d.size))):i=b.createElementNS(i,l),i[ku]=o,i[jg]=d,_U(i,o,!1,!1),o.stateNode=i;e:{switch(b=HI(l,d),l){case"dialog":Li("cancel",i),Li("close",i),g=d;break;case"iframe":case"object":case"embed":Li("load",i),g=d;break;case"video":case"audio":for(g=0;g<mg.length;g++)Li(mg[g],i);g=d;break;case"source":Li("error",i),g=d;break;case"img":case"image":case"link":Li("error",i),Li("load",i),g=d;break;case"details":Li("toggle",i),g=d;break;case"input":TP(i,d),g=UI(i,d),Li("invalid",i);break;case"option":g=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},g=to({},d,{value:void 0}),Li("invalid",i);break;case"textarea":wP(i,d),g=ZI(i,d),Li("invalid",i);break;default:g=d}GI(l,g),p=g;for(S in p)if(p.hasOwnProperty(S)){var w=p[S];S==="style"?JF(i,w):S==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&XF(i,w)):S==="children"?typeof w=="string"?(l!=="textarea"||w!=="")&&Mg(i,w):typeof w=="number"&&Mg(i,""+w):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(Ng.hasOwnProperty(S)?w!=null&&S==="onScroll"&&Li("scroll",i):w!=null&&Hb(i,S,w,b))}switch(l){case"input":qy(i),SP(i,d,!1);break;case"textarea":qy(i),AP(i);break;case"option":d.value!=null&&i.setAttribute("value",""+fc(d.value));break;case"select":i.multiple=!!d.multiple,S=d.value,S!=null?nh(i,!!d.multiple,S,!1):d.defaultValue!=null&&nh(i,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=P0)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return ea(o),null;case 6:if(i&&o.stateNode!=null)SU(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(Hn(166));if(l=Yc(qg.current),Yc(Uu.current),Xy(o)){if(d=o.stateNode,l=o.memoizedProps,d[ku]=o,(S=d.nodeValue!==l)&&(i=ds,i!==null))switch(i.tag){case 3:$y(d.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&$y(d.nodeValue,l,(i.mode&1)!==0)}S&&(o.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[ku]=o,o.stateNode=d}return ea(o),null;case 13:if(ki(Qi),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Gi&&cs!==null&&o.mode&1&&!(o.flags&128))j4(),fh(),o.flags|=98560,S=!1;else if(S=Xy(o),d!==null&&d.dehydrated!==null){if(i===null){if(!S)throw Error(Hn(318));if(S=o.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(Hn(317));S[ku]=o}else fh(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;ea(o),S=!1}else uu!==null&&(Ab(uu),uu=null),S=!0;if(!S)return o.flags&65536?o:null}return o.flags&128?(o.lanes=l,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,o.mode&1&&(i===null||Qi.current&1?Do===0&&(Do=3):bC())),o.updateQueue!==null&&(o.flags|=4),ea(o),null);case 4:return hh(),mb(i,o),i===null&&Ug(o.stateNode.containerInfo),ea(o),null;case 10:return lC(o.type._context),ea(o),null;case 17:return Za(o.type)&&O0(),ea(o),null;case 19:if(ki(Qi),S=o.memoizedState,S===null)return ea(o),null;if(d=(o.flags&128)!==0,b=S.rendering,b===null)if(d)ag(S,!1);else{if(Do!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(b=Z0(i),b!==null){for(o.flags|=128,ag(S,!1),d=b.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=l,l=o.child;l!==null;)S=l,i=d,S.flags&=14680066,b=S.alternate,b===null?(S.childLanes=0,S.lanes=i,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=b.childLanes,S.lanes=b.lanes,S.child=b.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=b.memoizedProps,S.memoizedState=b.memoizedState,S.updateQueue=b.updateQueue,S.type=b.type,i=b.dependencies,S.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Pi(Qi,Qi.current&1|2),o.child}i=i.sibling}S.tail!==null&&vo()>gh&&(o.flags|=128,d=!0,ag(S,!1),o.lanes=4194304)}else{if(!d)if(i=Z0(b),i!==null){if(o.flags|=128,d=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),ag(S,!0),S.tail===null&&S.tailMode==="hidden"&&!b.alternate&&!Gi)return ea(o),null}else 2*vo()-S.renderingStartTime>gh&&l!==1073741824&&(o.flags|=128,d=!0,ag(S,!1),o.lanes=4194304);S.isBackwards?(b.sibling=o.child,o.child=b):(l=S.last,l!==null?l.sibling=b:o.child=b,S.last=b)}return S.tail!==null?(o=S.tail,S.rendering=o,S.tail=o.sibling,S.renderingStartTime=vo(),o.sibling=null,l=Qi.current,Pi(Qi,d?l&1|2:l&1),o):(ea(o),null);case 22:case 23:return IC(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&o.mode&1?us&1073741824&&(ea(o),o.subtreeFlags&6&&(o.flags|=8192)):ea(o),null;case 24:return null;case 25:return null}throw Error(Hn(156,o.tag))}function c7(i,o){switch(oC(o),o.tag){case 1:return Za(o.type)&&O0(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return hh(),ki(ja),ki(ia),pC(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return hC(o),null;case 13:if(ki(Qi),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(Hn(340));fh()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ki(Qi),null;case 4:return hh(),null;case 10:return lC(o.type._context),null;case 22:case 23:return IC(),null;case 24:return null;default:return null}}var e0=!1,na=!1,f7=typeof WeakSet=="function"?WeakSet:Set,cr=null;function Xd(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){oo(i,o,d)}else l.current=null}function vb(i,o,l){try{l()}catch(d){oo(i,o,d)}}var hO=!1;function d7(i,o){if(eb=N0,i=C4(),rC(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,S=d.focusNode;d=d.focusOffset;try{l.nodeType,S.nodeType}catch(x){l=null;break e}var b=0,p=-1,w=-1,F=0,C=0,E=i,y=null;t:for(;;){for(var P;E!==l||g!==0&&E.nodeType!==3||(p=b+g),E!==S||d!==0&&E.nodeType!==3||(w=b+d),E.nodeType===3&&(b+=E.nodeValue.length),(P=E.firstChild)!==null;)y=E,E=P;for(;;){if(E===i)break t;if(y===l&&++F===g&&(p=b),y===S&&++C===d&&(w=b),(P=E.nextSibling)!==null)break;E=y,y=E.parentNode}E=P}l=p===-1||w===-1?null:{start:p,end:w}}else l=null}l=l||{start:0,end:0}}else l=null;for(tb={focusedElem:i,selectionRange:l},N0=!1,cr=o;cr!==null;)if(o=cr,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,cr=i;else for(;cr!==null;){o=cr;try{var m=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var T=m.memoizedProps,U=m.memoizedState,M=o.stateNode,_=M.getSnapshotBeforeUpdate(o.elementType===o.type?T:au(o.type,T),U);M.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=o.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Hn(163))}}catch(x){oo(o,o.return,x)}if(i=o.sibling,i!==null){i.return=o.return,cr=i;break}cr=o.return}return m=hO,hO=!1,m}function bg(i,o,l){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&i)===i){var S=g.destroy;g.destroy=void 0,S!==void 0&&vb(o,l,S)}g=g.next}while(g!==d)}}function dE(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var d=l.create;l.destroy=d()}l=l.next}while(l!==o)}}function yb(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function wU(i){var o=i.alternate;o!==null&&(i.alternate=null,wU(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[ku],delete o[jg],delete o[ib],delete o[YH],delete o[WH])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function AU(i){return i.tag===5||i.tag===3||i.tag===4}function pO(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||AU(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Eb(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=P0));else if(d!==4&&(i=i.child,i!==null))for(Eb(i,o,l),i=i.sibling;i!==null;)Eb(i,o,l),i=i.sibling}function _b(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(_b(i,o,l),i=i.sibling;i!==null;)_b(i,o,l),i=i.sibling}var Vo=null,su=!1;function $l(i,o,l){for(l=l.child;l!==null;)IU(i,o,l),l=l.sibling}function IU(i,o,l){if(Fu&&typeof Fu.onCommitFiberUnmount=="function")try{Fu.onCommitFiberUnmount(iE,l)}catch(p){}switch(l.tag){case 5:na||Xd(l,o);case 6:var d=Vo,g=su;Vo=null,$l(i,o,l),Vo=d,su=g,Vo!==null&&(su?(i=Vo,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Vo.removeChild(l.stateNode));break;case 18:Vo!==null&&(su?(i=Vo,l=l.stateNode,i.nodeType===8?KT(i.parentNode,l):i.nodeType===1&&KT(i,l),Lg(i)):KT(Vo,l.stateNode));break;case 4:d=Vo,g=su,Vo=l.stateNode.containerInfo,su=!0,$l(i,o,l),Vo=d,su=g;break;case 0:case 11:case 14:case 15:if(!na&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var S=g,b=S.destroy;S=S.tag,b!==void 0&&(S&2||S&4)&&vb(l,o,b),g=g.next}while(g!==d)}$l(i,o,l);break;case 1:if(!na&&(Xd(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(p){oo(l,o,p)}$l(i,o,l);break;case 21:$l(i,o,l);break;case 22:l.mode&1?(na=(d=na)||l.memoizedState!==null,$l(i,o,l),na=d):$l(i,o,l);break;default:$l(i,o,l)}}function gO(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new f7),o.forEach(function(d){var g=T7.bind(null,i,d);l.has(d)||(l.add(d),d.then(g,g))})}}function iu(i,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];try{var S=i,b=o,p=b;e:for(;p!==null;){switch(p.tag){case 5:Vo=p.stateNode,su=!1;break e;case 3:Vo=p.stateNode.containerInfo,su=!0;break e;case 4:Vo=p.stateNode.containerInfo,su=!0;break e}p=p.return}if(Vo===null)throw Error(Hn(160));IU(S,b,g),Vo=null,su=!1;var w=g.alternate;w!==null&&(w.return=null),g.return=null}catch(F){oo(g,o,F)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)bU(o,i),o=o.sibling}function bU(i,o){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(iu(o,i),Mu(i),d&4){try{bg(3,i,i.return),dE(3,i)}catch(T){oo(i,i.return,T)}try{bg(5,i,i.return)}catch(T){oo(i,i.return,T)}}break;case 1:iu(o,i),Mu(i),d&512&&l!==null&&Xd(l,l.return);break;case 5:if(iu(o,i),Mu(i),d&512&&l!==null&&Xd(l,l.return),i.flags&32){var g=i.stateNode;try{Mg(g,"")}catch(T){oo(i,i.return,T)}}if(d&4&&(g=i.stateNode,g!=null)){var S=i.memoizedProps,b=l!==null?l.memoizedProps:S,p=i.type,w=i.updateQueue;if(i.updateQueue=null,w!==null)try{p==="input"&&S.type==="radio"&&S.name!=null&&YF(g,S),HI(p,b);var F=HI(p,S);for(b=0;b<w.length;b+=2){var C=w[b],E=w[b+1];C==="style"?JF(g,E):C==="dangerouslySetInnerHTML"?XF(g,E):C==="children"?Mg(g,E):Hb(g,C,E,F)}switch(p){case"input":BI(g,S);break;case"textarea":WF(g,S);break;case"select":var y=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!S.multiple;var P=S.value;P!=null?nh(g,!!S.multiple,P,!1):y!==!!S.multiple&&(S.defaultValue!=null?nh(g,!!S.multiple,S.defaultValue,!0):nh(g,!!S.multiple,S.multiple?[]:"",!1))}g[jg]=S}catch(T){oo(i,i.return,T)}}break;case 6:if(iu(o,i),Mu(i),d&4){if(i.stateNode===null)throw Error(Hn(162));g=i.stateNode,S=i.memoizedProps;try{g.nodeValue=S}catch(T){oo(i,i.return,T)}}break;case 3:if(iu(o,i),Mu(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Lg(o.containerInfo)}catch(T){oo(i,i.return,T)}break;case 4:iu(o,i),Mu(i);break;case 13:iu(o,i),Mu(i),g=i.child,g.flags&8192&&(S=g.memoizedState!==null,g.stateNode.isHidden=S,!S||g.alternate!==null&&g.alternate.memoizedState!==null||(wC=vo())),d&4&&gO(i);break;case 22:if(C=l!==null&&l.memoizedState!==null,i.mode&1?(na=(F=na)||C,iu(o,i),na=F):iu(o,i),Mu(i),d&8192){if(F=i.memoizedState!==null,(i.stateNode.isHidden=F)&&!C&&i.mode&1)for(cr=i,C=i.child;C!==null;){for(E=cr=C;cr!==null;){switch(y=cr,P=y.child,y.tag){case 0:case 11:case 14:case 15:bg(4,y,y.return);break;case 1:Xd(y,y.return);var m=y.stateNode;if(typeof m.componentWillUnmount=="function"){d=y,l=y.return;try{o=d,m.props=o.memoizedProps,m.state=o.memoizedState,m.componentWillUnmount()}catch(T){oo(d,l,T)}}break;case 5:Xd(y,y.return);break;case 22:if(y.memoizedState!==null){vO(E);continue}}P!==null?(P.return=y,cr=P):vO(E)}C=C.sibling}e:for(C=null,E=i;;){if(E.tag===5){if(C===null){C=E;try{g=E.stateNode,F?(S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(p=E.stateNode,w=E.memoizedProps.style,b=w!=null&&w.hasOwnProperty("display")?w.display:null,p.style.display=QF("display",b))}catch(T){oo(i,i.return,T)}}}else if(E.tag===6){if(C===null)try{E.stateNode.nodeValue=F?"":E.memoizedProps}catch(T){oo(i,i.return,T)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===i)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===i)break e;for(;E.sibling===null;){if(E.return===null||E.return===i)break e;C===E&&(C=null),E=E.return}C===E&&(C=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:iu(o,i),Mu(i),d&4&&gO(i);break;case 21:break;default:iu(o,i),Mu(i)}}function Mu(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(AU(l)){var d=l;break e}l=l.return}throw Error(Hn(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(Mg(g,""),d.flags&=-33);var S=pO(i);_b(i,S,g);break;case 3:case 4:var b=d.stateNode.containerInfo,p=pO(i);Eb(i,p,b);break;default:throw Error(Hn(161))}}catch(w){oo(i,i.return,w)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function h7(i,o,l){cr=i,CU(i)}function CU(i,o,l){for(var d=(i.mode&1)!==0;cr!==null;){var g=cr,S=g.child;if(g.tag===22&&d){var b=g.memoizedState!==null||e0;if(!b){var p=g.alternate,w=p!==null&&p.memoizedState!==null||na;p=e0;var F=na;if(e0=b,(na=w)&&!F)for(cr=g;cr!==null;)b=cr,w=b.child,b.tag===22&&b.memoizedState!==null?yO(g):w!==null?(w.return=b,cr=w):yO(g);for(;S!==null;)cr=S,CU(S),S=S.sibling;cr=g,e0=p,na=F}mO(i)}else g.subtreeFlags&8772&&S!==null?(S.return=g,cr=S):mO(i)}}function mO(i){for(;cr!==null;){var o=cr;if(o.flags&8772){var l=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:na||dE(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!na)if(l===null)d.componentDidMount();else{var g=o.elementType===o.type?l.memoizedProps:au(o.type,l.memoizedProps);d.componentDidUpdate(g,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var S=o.updateQueue;S!==null&&eO(o,S,d);break;case 3:var b=o.updateQueue;if(b!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}eO(o,b,l)}break;case 5:var p=o.stateNode;if(l===null&&o.flags&4){l=p;var w=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&l.focus();break;case"img":w.src&&(l.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var F=o.alternate;if(F!==null){var C=F.memoizedState;if(C!==null){var E=C.dehydrated;E!==null&&Lg(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Hn(163))}na||o.flags&512&&yb(o)}catch(y){oo(o,o.return,y)}}if(o===i){cr=null;break}if(l=o.sibling,l!==null){l.return=o.return,cr=l;break}cr=o.return}}function vO(i){for(;cr!==null;){var o=cr;if(o===i){cr=null;break}var l=o.sibling;if(l!==null){l.return=o.return,cr=l;break}cr=o.return}}function yO(i){for(;cr!==null;){var o=cr;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{dE(4,o)}catch(w){oo(o,l,w)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var g=o.return;try{d.componentDidMount()}catch(w){oo(o,g,w)}}var S=o.return;try{yb(o)}catch(w){oo(o,S,w)}break;case 5:var b=o.return;try{yb(o)}catch(w){oo(o,b,w)}}}catch(w){oo(o,o.return,w)}if(o===i){cr=null;break}var p=o.sibling;if(p!==null){p.return=o.return,cr=p;break}cr=o.return}}var p7=Math.ceil,H0=bl.ReactCurrentDispatcher,TC=bl.ReactCurrentOwner,Fs=bl.ReactCurrentBatchConfig,ui=0,jo=null,wo=null,Ko=0,us=0,Qd=pc(0),Do=0,Kg=null,rf=0,hE=0,SC=0,Cg=null,Ua=null,wC=0,gh=1/0,vl=null,V0=!1,Tb=null,uc=null,t0=!1,nc=null,K0=0,Rg=0,Sb=null,E0=-1,_0=0;function ya(){return ui&6?vo():E0!==-1?E0:E0=vo()}function lc(i){return i.mode&1?ui&2&&Ko!==0?Ko&-Ko:XH.transition!==null?(_0===0&&(_0=f4()),_0):(i=wi,i!==0||(i=window.event,i=i===void 0?16:y4(i.type)),i):1}function pu(i,o,l,d){if(50<Rg)throw Rg=0,Sb=null,Error(Hn(185));Qg(i,l,d),(!(ui&2)||i!==jo)&&(i===jo&&(!(ui&2)&&(hE|=l),Do===4&&ec(i,Ko)),qa(i,d),l===1&&ui===0&&!(o.mode&1)&&(gh=vo()+500,lE&&gc()))}function qa(i,o){var l=i.callbackNode;X9(i,o);var d=x0(i,i===jo?Ko:0);if(d===0)l!==null&&CP(l),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(l!=null&&CP(l),o===1)i.tag===0?$H(EO.bind(null,i)):F4(EO.bind(null,i)),KH(function(){!(ui&6)&&gc()}),l=null;else{switch(d4(d)){case 1:l=Wb;break;case 4:l=l4;break;case 16:l=R0;break;case 536870912:l=c4;break;default:l=R0}l=LU(l,RU.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function RU(i,o){if(E0=-1,_0=0,ui&6)throw Error(Hn(327));var l=i.callbackNode;if(sh()&&i.callbackNode!==l)return null;var d=x0(i,i===jo?Ko:0);if(d===0)return null;if(d&30||d&i.expiredLanes||o)o=z0(i,d);else{o=d;var g=ui;ui|=2;var S=NU();(jo!==i||Ko!==o)&&(vl=null,gh=vo()+500,$c(i,o));do try{v7();break}catch(p){xU(i,p)}while(!0);uC(),H0.current=S,ui=g,wo!==null?o=0:(jo=null,Ko=0,o=Do)}if(o!==0){if(o===2&&(g=WI(i),g!==0&&(d=g,o=wb(i,g))),o===1)throw l=Kg,$c(i,0),ec(i,d),qa(i,vo()),l;if(o===6)ec(i,d);else{if(g=i.current.alternate,!(d&30)&&!g7(g)&&(o=z0(i,d),o===2&&(S=WI(i),S!==0&&(d=S,o=wb(i,S))),o===1))throw l=Kg,$c(i,0),ec(i,d),qa(i,vo()),l;switch(i.finishedWork=g,i.finishedLanes=d,o){case 0:case 1:throw Error(Hn(345));case 2:Gc(i,Ua,vl);break;case 3:if(ec(i,d),(d&130023424)===d&&(o=wC+500-vo(),10<o)){if(x0(i,0)!==0)break;if(g=i.suspendedLanes,(g&d)!==d){ya(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=rb(Gc.bind(null,i,Ua,vl),o);break}Gc(i,Ua,vl);break;case 4:if(ec(i,d),(d&4194240)===d)break;for(o=i.eventTimes,g=-1;0<d;){var b=31-hu(d);S=1<<b,b=o[b],b>g&&(g=b),d&=~S}if(d=g,d=vo()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*p7(d/1960))-d,10<d){i.timeoutHandle=rb(Gc.bind(null,i,Ua,vl),d);break}Gc(i,Ua,vl);break;case 5:Gc(i,Ua,vl);break;default:throw Error(Hn(329))}}}return qa(i,vo()),i.callbackNode===l?RU.bind(null,i):null}function wb(i,o){var l=Cg;return i.current.memoizedState.isDehydrated&&($c(i,o).flags|=256),i=z0(i,o),i!==2&&(o=Ua,Ua=l,o!==null&&Ab(o)),i}function Ab(i){Ua===null?Ua=i:Ua.push.apply(Ua,i)}function g7(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var g=l[d],S=g.getSnapshot;g=g.value;try{if(!gu(S(),g))return!1}catch(b){return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ec(i,o){for(o&=~SC,o&=~hE,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-hu(o),d=1<<l;i[l]=-1,o&=~d}}function EO(i){if(ui&6)throw Error(Hn(327));sh();var o=x0(i,0);if(!(o&1))return qa(i,vo()),null;var l=z0(i,o);if(i.tag!==0&&l===2){var d=WI(i);d!==0&&(o=d,l=wb(i,d))}if(l===1)throw l=Kg,$c(i,0),ec(i,o),qa(i,vo()),l;if(l===6)throw Error(Hn(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Gc(i,Ua,vl),qa(i,vo()),null}function AC(i,o){var l=ui;ui|=1;try{return i(o)}finally{ui=l,ui===0&&(gh=vo()+500,lE&&gc())}}function of(i){nc!==null&&nc.tag===0&&!(ui&6)&&sh();var o=ui;ui|=1;var l=Fs.transition,d=wi;try{if(Fs.transition=null,wi=1,i)return i()}finally{wi=d,Fs.transition=l,ui=o,!(ui&6)&&gc()}}function IC(){us=Qd.current,ki(Qd)}function $c(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,VH(l)),wo!==null)for(l=wo.return;l!==null;){var d=l;switch(oC(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&O0();break;case 3:hh(),ki(ja),ki(ia),pC();break;case 5:hC(d);break;case 4:hh();break;case 13:ki(Qi);break;case 19:ki(Qi);break;case 10:lC(d.type._context);break;case 22:case 23:IC()}l=l.return}if(jo=i,wo=i=cc(i.current,null),Ko=us=o,Do=0,Kg=null,SC=hE=rf=0,Ua=Cg=null,zc!==null){for(o=0;o<zc.length;o++)if(l=zc[o],d=l.interleaved,d!==null){l.interleaved=null;var g=d.next,S=l.pending;if(S!==null){var b=S.next;S.next=g,d.next=b}l.pending=d}zc=null}return i}function xU(i,o){do{var l=wo;try{if(uC(),m0.current=G0,q0){for(var d=eo.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}q0=!1}if(nf=0,Bo=Mo=eo=null,Ig=!1,Gg=0,TC.current=null,l===null||l.return===null){Do=1,Kg=o,wo=null;break}e:{var S=i,b=l.return,p=l,w=o;if(o=Ko,p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var F=w,C=p,E=C.tag;if(!(C.mode&1)&&(E===0||E===11||E===15)){var y=C.alternate;y?(C.updateQueue=y.updateQueue,C.memoizedState=y.memoizedState,C.lanes=y.lanes):(C.updateQueue=null,C.memoizedState=null)}var P=aO(b);if(P!==null){P.flags&=-257,sO(P,b,p,S,o),P.mode&1&&oO(S,F,o),o=P,w=F;var m=o.updateQueue;if(m===null){var T=new Set;T.add(w),o.updateQueue=T}else m.add(w);break e}else{if(!(o&1)){oO(S,F,o),bC();break e}w=Error(Hn(426))}}else if(Gi&&p.mode&1){var U=aO(b);if(U!==null){!(U.flags&65536)&&(U.flags|=256),sO(U,b,p,S,o),aC(ph(w,p));break e}}S=w=ph(w,p),Do!==4&&(Do=2),Cg===null?Cg=[S]:Cg.push(S),S=b;do{switch(S.tag){case 3:S.flags|=65536,o&=-o,S.lanes|=o;var M=dU(S,w,o);JP(S,M);break e;case 1:p=w;var _=S.type,I=S.stateNode;if(!(S.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(uc===null||!uc.has(I)))){S.flags|=65536,o&=-o,S.lanes|=o;var x=hU(S,p,o);JP(S,x);break e}}S=S.return}while(S!==null)}DU(l)}catch(Z){o=Z,wo===l&&l!==null&&(wo=l=l.return);continue}break}while(!0)}function NU(){var i=H0.current;return H0.current=G0,i===null?G0:i}function bC(){(Do===0||Do===3||Do===2)&&(Do=4),jo===null||!(rf&268435455)&&!(hE&268435455)||ec(jo,Ko)}function z0(i,o){var l=ui;ui|=2;var d=NU();(jo!==i||Ko!==o)&&(vl=null,$c(i,o));do try{m7();break}catch(g){xU(i,g)}while(!0);if(uC(),ui=l,H0.current=d,wo!==null)throw Error(Hn(261));return jo=null,Ko=0,Do}function m7(){for(;wo!==null;)MU(wo)}function v7(){for(;wo!==null&&!q9();)MU(wo)}function MU(i){var o=OU(i.alternate,i,us);i.memoizedProps=i.pendingProps,o===null?DU(i):wo=o,TC.current=null}function DU(i){var o=i;do{var l=o.alternate;if(i=o.return,o.flags&32768){if(l=c7(l,o),l!==null){l.flags&=32767,wo=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Do=6,wo=null;return}}else if(l=l7(l,o,us),l!==null){wo=l;return}if(o=o.sibling,o!==null){wo=o;return}wo=o=i}while(o!==null);Do===0&&(Do=5)}function Gc(i,o,l){var d=wi,g=Fs.transition;try{Fs.transition=null,wi=1,y7(i,o,l,d)}finally{Fs.transition=g,wi=d}return null}function y7(i,o,l,d){do sh();while(nc!==null);if(ui&6)throw Error(Hn(327));l=i.finishedWork;var g=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(Hn(177));i.callbackNode=null,i.callbackPriority=0;var S=l.lanes|l.childLanes;if(Q9(i,S),i===jo&&(wo=jo=null,Ko=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||t0||(t0=!0,LU(R0,function(){return sh(),null})),S=(l.flags&15990)!==0,l.subtreeFlags&15990||S){S=Fs.transition,Fs.transition=null;var b=wi;wi=1;var p=ui;ui|=4,TC.current=null,d7(i,l),bU(l,i),UH(tb),N0=!!eb,tb=eb=null,i.current=l,h7(l),G9(),ui=p,wi=b,Fs.transition=S}else i.current=l;if(t0&&(t0=!1,nc=i,K0=g),S=i.pendingLanes,S===0&&(uc=null),K9(l.stateNode),qa(i,vo()),o!==null)for(d=i.onRecoverableError,l=0;l<o.length;l++)g=o[l],d(g.value,{componentStack:g.stack,digest:g.digest});if(V0)throw V0=!1,i=Tb,Tb=null,i;return K0&1&&i.tag!==0&&sh(),S=i.pendingLanes,S&1?i===Sb?Rg++:(Rg=0,Sb=i):Rg=0,gc(),null}function sh(){if(nc!==null){var i=d4(K0),o=Fs.transition,l=wi;try{if(Fs.transition=null,wi=16>i?16:i,nc===null)var d=!1;else{if(i=nc,nc=null,K0=0,ui&6)throw Error(Hn(331));var g=ui;for(ui|=4,cr=i.current;cr!==null;){var S=cr,b=S.child;if(cr.flags&16){var p=S.deletions;if(p!==null){for(var w=0;w<p.length;w++){var F=p[w];for(cr=F;cr!==null;){var C=cr;switch(C.tag){case 0:case 11:case 15:bg(8,C,S)}var E=C.child;if(E!==null)E.return=C,cr=E;else for(;cr!==null;){C=cr;var y=C.sibling,P=C.return;if(wU(C),C===F){cr=null;break}if(y!==null){y.return=P,cr=y;break}cr=P}}}var m=S.alternate;if(m!==null){var T=m.child;if(T!==null){m.child=null;do{var U=T.sibling;T.sibling=null,T=U}while(T!==null)}}cr=S}}if(S.subtreeFlags&2064&&b!==null)b.return=S,cr=b;else e:for(;cr!==null;){if(S=cr,S.flags&2048)switch(S.tag){case 0:case 11:case 15:bg(9,S,S.return)}var M=S.sibling;if(M!==null){M.return=S.return,cr=M;break e}cr=S.return}}var _=i.current;for(cr=_;cr!==null;){b=cr;var I=b.child;if(b.subtreeFlags&2064&&I!==null)I.return=b,cr=I;else e:for(b=_;cr!==null;){if(p=cr,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:dE(9,p)}}catch(Z){oo(p,p.return,Z)}if(p===b){cr=null;break e}var x=p.sibling;if(x!==null){x.return=p.return,cr=x;break e}cr=p.return}}if(ui=g,gc(),Fu&&typeof Fu.onPostCommitFiberRoot=="function")try{Fu.onPostCommitFiberRoot(iE,i)}catch(Z){}d=!0}return d}finally{wi=l,Fs.transition=o}}return!1}function _O(i,o,l){o=ph(l,o),o=dU(i,o,1),i=sc(i,o,1),o=ya(),i!==null&&(Qg(i,1,o),qa(i,o))}function oo(i,o,l){if(i.tag===3)_O(i,i,l);else for(;o!==null;){if(o.tag===3){_O(o,i,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(uc===null||!uc.has(d))){i=ph(l,i),i=hU(o,i,1),o=sc(o,i,1),i=ya(),o!==null&&(Qg(o,1,i),qa(o,i));break}}o=o.return}}function E7(i,o,l){var d=i.pingCache;d!==null&&d.delete(o),o=ya(),i.pingedLanes|=i.suspendedLanes&l,jo===i&&(Ko&l)===l&&(Do===4||Do===3&&(Ko&130023424)===Ko&&500>vo()-wC?$c(i,0):SC|=l),qa(i,o)}function PU(i,o){o===0&&(i.mode&1?(o=Vy,Vy<<=1,!(Vy&130023424)&&(Vy=4194304)):o=1);var l=ya();i=Al(i,o),i!==null&&(Qg(i,o,l),qa(i,l))}function _7(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),PU(i,l)}function T7(i,o){var l=0;switch(i.tag){case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(Hn(314))}d!==null&&d.delete(o),PU(i,l)}var OU;OU=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||ja.current)Ba=!0;else{if(!(i.lanes&l)&&!(o.flags&128))return Ba=!1,u7(i,o,l);Ba=!!(i.flags&131072)}else Ba=!1,Gi&&o.flags&1048576&&U4(o,F0,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;y0(i,o),i=o.pendingProps;var g=ch(o,ia.current);ah(o,l),g=mC(null,o,d,i,g,l);var S=vC();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Za(d)?(S=!0,L0(o)):S=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,fC(o),g.updater=fE,o.stateNode=g,g._reactInternals=o,cb(o,d,i,l),o=hb(null,o,d,!0,S,l)):(o.tag=0,Gi&&S&&iC(o),va(null,o,g,l),o=o.child),o;case 16:d=o.elementType;e:{switch(y0(i,o),i=o.pendingProps,g=d._init,d=g(d._payload),o.type=d,g=o.tag=w7(d),i=au(d,i),g){case 0:o=db(null,o,d,i,l);break e;case 1:o=cO(null,o,d,i,l);break e;case 11:o=uO(null,o,d,i,l);break e;case 14:o=lO(null,o,d,au(d.type,i),l);break e}throw Error(Hn(306,d,""))}return o;case 0:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:au(d,g),db(i,o,d,g,l);case 1:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:au(d,g),cO(i,o,d,g,l);case 3:e:{if(vU(o),i===null)throw Error(Hn(387));d=o.pendingProps,S=o.memoizedState,g=S.element,H4(i,o),j0(o,d,null,l);var b=o.memoizedState;if(d=b.element,S.isDehydrated)if(S={element:d,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},o.updateQueue.baseState=S,o.memoizedState=S,o.flags&256){g=ph(Error(Hn(423)),o),o=fO(i,o,d,l,g);break e}else if(d!==g){g=ph(Error(Hn(424)),o),o=fO(i,o,d,l,g);break e}else for(cs=ac(o.stateNode.containerInfo.firstChild),ds=o,Gi=!0,uu=null,l=q4(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(fh(),d===g){o=Il(i,o,l);break e}va(i,o,d,l)}o=o.child}return o;case 5:return V4(o),i===null&&sb(o),d=o.type,g=o.pendingProps,S=i!==null?i.memoizedProps:null,b=g.children,nb(d,g)?b=null:S!==null&&nb(d,S)&&(o.flags|=32),mU(i,o),va(i,o,b,l),o.child;case 6:return i===null&&sb(o),null;case 13:return yU(i,o,l);case 4:return dC(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=dh(o,null,d,l):va(i,o,d,l),o.child;case 11:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:au(d,g),uO(i,o,d,g,l);case 7:return va(i,o,o.pendingProps,l),o.child;case 8:return va(i,o,o.pendingProps.children,l),o.child;case 12:return va(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(d=o.type._context,g=o.pendingProps,S=o.memoizedProps,b=g.value,Pi(U0,d._currentValue),d._currentValue=b,S!==null)if(gu(S.value,b)){if(S.children===g.children&&!ja.current){o=Il(i,o,l);break e}}else for(S=o.child,S!==null&&(S.return=o);S!==null;){var p=S.dependencies;if(p!==null){b=S.child;for(var w=p.firstContext;w!==null;){if(w.context===d){if(S.tag===1){w=Tl(-1,l&-l),w.tag=2;var F=S.updateQueue;if(F!==null){F=F.shared;var C=F.pending;C===null?w.next=w:(w.next=C.next,C.next=w),F.pending=w}}S.lanes|=l,w=S.alternate,w!==null&&(w.lanes|=l),ub(S.return,l,o),p.lanes|=l;break}w=w.next}}else if(S.tag===10)b=S.type===o.type?null:S.child;else if(S.tag===18){if(b=S.return,b===null)throw Error(Hn(341));b.lanes|=l,p=b.alternate,p!==null&&(p.lanes|=l),ub(b,l,o),b=S.sibling}else b=S.child;if(b!==null)b.return=S;else for(b=S;b!==null;){if(b===o){b=null;break}if(S=b.sibling,S!==null){S.return=b.return,b=S;break}b=b.return}S=b}va(i,o,g.children,l),o=o.child}return o;case 9:return g=o.type,d=o.pendingProps.children,ah(o,l),g=Us(g),d=d(g),o.flags|=1,va(i,o,d,l),o.child;case 14:return d=o.type,g=au(d,o.pendingProps),g=au(d.type,g),lO(i,o,d,g,l);case 15:return pU(i,o,o.type,o.pendingProps,l);case 17:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:au(d,g),y0(i,o),o.tag=1,Za(d)?(i=!0,L0(o)):i=!1,ah(o,l),fU(o,d,g),cb(o,d,g,l),hb(null,o,d,!0,i,l);case 19:return EU(i,o,l);case 22:return gU(i,o,l)}throw Error(Hn(156,o.tag))};function LU(i,o){return u4(i,o)}function S7(i,o,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(i,o,l,d){return new S7(i,o,l,d)}function CC(i){return i=i.prototype,!(!i||!i.isReactComponent)}function w7(i){if(typeof i=="function")return CC(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Kb)return 11;if(i===zb)return 14}return 2}function cc(i,o){var l=i.alternate;return l===null?(l=ks(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function T0(i,o,l,d,g,S){var b=2;if(d=i,typeof i=="function")CC(i)&&(b=1);else if(typeof i=="string")b=5;else e:switch(i){case qd:return Xc(l.children,g,S,o);case Vb:b=8,g|=8;break;case OI:return i=ks(12,l,o,g|2),i.elementType=OI,i.lanes=S,i;case LI:return i=ks(13,l,o,g),i.elementType=LI,i.lanes=S,i;case kI:return i=ks(19,l,o,g),i.elementType=kI,i.lanes=S,i;case VF:return pE(l,g,S,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case GF:b=10;break e;case HF:b=9;break e;case Kb:b=11;break e;case zb:b=14;break e;case Xl:b=16,d=null;break e}throw Error(Hn(130,i==null?i:typeof i,""))}return o=ks(b,l,o,g),o.elementType=i,o.type=d,o.lanes=S,o}function Xc(i,o,l,d){return i=ks(7,i,d,o),i.lanes=l,i}function pE(i,o,l,d){return i=ks(22,i,d,o),i.elementType=VF,i.lanes=l,i.stateNode={isHidden:!1},i}function eS(i,o,l){return i=ks(6,i,null,o),i.lanes=l,i}function tS(i,o,l){return o=ks(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function A7(i,o,l,d,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=LT(0),this.expirationTimes=LT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=LT(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function RC(i,o,l,d,g,S,b,p,w){return i=new A7(i,o,l,p,w),o===1?(o=1,S===!0&&(o|=8)):o=0,S=ks(3,null,null,o),i.current=S,S.stateNode=i,S.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},fC(S),i}function I7(i,o,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zd,key:d==null?null:""+d,children:i,containerInfo:o,implementation:l}}function kU(i){if(!i)return dc;i=i._reactInternals;e:{if(lf(i)!==i||i.tag!==1)throw Error(Hn(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Za(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(Hn(171))}if(i.tag===1){var l=i.type;if(Za(l))return k4(i,l,o)}return o}function FU(i,o,l,d,g,S,b,p,w){return i=RC(l,d,!0,i,g,S,b,p,w),i.context=kU(null),l=i.current,d=ya(),g=lc(l),S=Tl(d,g),S.callback=o!=null?o:null,sc(l,S,g),i.current.lanes=g,Qg(i,g,d),qa(i,d),i}function gE(i,o,l,d){var g=o.current,S=ya(),b=lc(g);return l=kU(l),o.context===null?o.context=l:o.pendingContext=l,o=Tl(S,b),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=sc(g,o,b),i!==null&&(pu(i,g,b,S),g0(i,g,b)),b}function Y0(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function TO(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function xC(i,o){TO(i,o),(i=i.alternate)&&TO(i,o)}function b7(){return null}var UU=typeof reportError=="function"?reportError:function(i){console.error(i)};function NC(i){this._internalRoot=i}mE.prototype.render=NC.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(Hn(409));gE(i,o,null,null)};mE.prototype.unmount=NC.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;of(function(){gE(null,i,null,null)}),o[wl]=null}};function mE(i){this._internalRoot=i}mE.prototype.unstable_scheduleHydration=function(i){if(i){var o=g4();i={blockedOn:null,target:i,priority:o};for(var l=0;l<Jl.length&&o!==0&&o<Jl[l].priority;l++);Jl.splice(l,0,i),l===0&&v4(i)}};function MC(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function vE(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function SO(){}function C7(i,o,l,d,g){if(g){if(typeof d=="function"){var S=d;d=function(){var F=Y0(b);S.call(F)}}var b=FU(o,d,i,0,null,!1,!1,"",SO);return i._reactRootContainer=b,i[wl]=b.current,Ug(i.nodeType===8?i.parentNode:i),of(),b}for(;g=i.lastChild;)i.removeChild(g);if(typeof d=="function"){var p=d;d=function(){var F=Y0(w);p.call(F)}}var w=RC(i,0,!1,null,null,!1,!1,"",SO);return i._reactRootContainer=w,i[wl]=w.current,Ug(i.nodeType===8?i.parentNode:i),of(function(){gE(o,w,l,d)}),w}function yE(i,o,l,d,g){var S=l._reactRootContainer;if(S){var b=S;if(typeof g=="function"){var p=g;g=function(){var w=Y0(b);p.call(w)}}gE(o,b,i,g)}else b=C7(l,o,i,g,d);return Y0(b)}h4=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=gg(o.pendingLanes);l!==0&&($b(o,l|1),qa(o,vo()),!(ui&6)&&(gh=vo()+500,gc()))}break;case 13:of(function(){var d=Al(i,1);if(d!==null){var g=ya();pu(d,i,1,g)}}),xC(i,1)}};Xb=function(i){if(i.tag===13){var o=Al(i,134217728);if(o!==null){var l=ya();pu(o,i,134217728,l)}xC(i,134217728)}};p4=function(i){if(i.tag===13){var o=lc(i),l=Al(i,o);if(l!==null){var d=ya();pu(l,i,o,d)}xC(i,o)}};g4=function(){return wi};m4=function(i,o){var l=wi;try{return wi=i,o()}finally{wi=l}};KI=function(i,o,l){switch(o){case"input":if(BI(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==i&&d.form===i.form){var g=uE(d);if(!g)throw Error(Hn(90));zF(d),BI(d,g)}}}break;case"textarea":WF(i,l);break;case"select":o=l.value,o!=null&&nh(i,!!l.multiple,o,!1)}};n4=AC;r4=of;var R7={usingClientEntryPoint:!1,Events:[em,Kd,uE,e4,t4,AC]},sg={findFiberByHostInstance:Kc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x7={bundleType:sg.bundleType,version:sg.version,rendererPackageName:sg.rendererPackageName,rendererConfig:sg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bl.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=a4(i),i===null?null:i.stateNode},findFiberByHostInstance:sg.findFiberByHostInstance||b7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var n0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!n0.isDisabled&&n0.supportsFiber)try{iE=n0.inject(x7),Fu=n0}catch(i){}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R7;ps.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!MC(o))throw Error(Hn(200));return I7(i,o,null,l)};ps.createRoot=function(i,o){if(!MC(i))throw Error(Hn(299));var l=!1,d="",g=UU;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=RC(i,1,!1,null,null,l,!1,d,g),i[wl]=o.current,Ug(i.nodeType===8?i.parentNode:i),new NC(o)};ps.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(Hn(188)):(i=Object.keys(i).join(","),Error(Hn(268,i)));return i=a4(o),i=i===null?null:i.stateNode,i};ps.flushSync=function(i){return of(i)};ps.hydrate=function(i,o,l){if(!vE(o))throw Error(Hn(200));return yE(null,i,o,!0,l)};ps.hydrateRoot=function(i,o,l){if(!MC(i))throw Error(Hn(405));var d=l!=null&&l.hydratedSources||null,g=!1,S="",b=UU;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(S=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),o=FU(o,null,i,1,l!=null?l:null,g,!1,S,b),i[wl]=o.current,Ug(i),d)for(i=0;i<d.length;i++)l=d[i],g=l._getVersion,g=g(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,g]:o.mutableSourceEagerHydrationData.push(l,g);return new mE(o)};ps.render=function(i,o,l){if(!vE(o))throw Error(Hn(200));return yE(null,i,o,!1,l)};ps.unmountComponentAtNode=function(i){if(!vE(i))throw Error(Hn(40));return i._reactRootContainer?(of(function(){yE(null,null,i,!1,function(){i._reactRootContainer=null,i[wl]=null})}),!0):!1};ps.unstable_batchedUpdates=AC;ps.unstable_renderSubtreeIntoContainer=function(i,o,l,d){if(!vE(l))throw Error(Hn(200));if(i==null||i._reactInternals===void 0)throw Error(Hn(38));return yE(i,o,l,!1,d)};ps.version="18.3.1-next-f1338f8080-20240426";function BU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BU)}catch(i){console.error(i)}}BU(),BF.exports=ps;var N7=BF.exports,wO=N7;DI.createRoot=wO.createRoot,DI.hydrateRoot=wO.hydrateRoot;var jU={exports:{}},nS,AO;function cf(){if(AO)return nS;AO=1;function i(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}return nS=i,nS}var rS,IO;function ZU(){if(IO)return rS;IO=1;var i=typeof cu=="object"&&cu&&cu.Object===Object&&cu;return rS=i,rS}var iS,bO;function Bu(){if(bO)return iS;bO=1;var i=ZU(),o=typeof self=="object"&&self&&self.Object===Object&&self,l=i||o||Function("return this")();return iS=l,iS}var oS,CO;function M7(){if(CO)return oS;CO=1;var i=Bu(),o=function(){return i.Date.now()};return oS=o,oS}var aS,RO;function D7(){if(RO)return aS;RO=1;var i=/\s/;function o(l){for(var d=l.length;d--&&i.test(l.charAt(d)););return d}return aS=o,aS}var sS,xO;function P7(){if(xO)return sS;xO=1;var i=D7(),o=/^\s+/;function l(d){return d&&d.slice(0,i(d)+1).replace(o,"")}return sS=l,sS}var uS,NO;function nm(){if(NO)return uS;NO=1;var i=Bu(),o=i.Symbol;return uS=o,uS}var lS,MO;function O7(){if(MO)return lS;MO=1;var i=nm(),o=Object.prototype,l=o.hasOwnProperty,d=o.toString,g=i?i.toStringTag:void 0;function S(b){var p=l.call(b,g),w=b[g];try{b[g]=void 0;var F=!0}catch(E){}var C=d.call(b);return F&&(p?b[g]=w:delete b[g]),C}return lS=S,lS}var cS,DO;function L7(){if(DO)return cS;DO=1;var i=Object.prototype,o=i.toString;function l(d){return o.call(d)}return cS=l,cS}var fS,PO;function rm(){if(PO)return fS;PO=1;var i=nm(),o=O7(),l=L7(),d="[object Null]",g="[object Undefined]",S=i?i.toStringTag:void 0;function b(p){return p==null?p===void 0?g:d:S&&S in Object(p)?o(p):l(p)}return fS=b,fS}var dS,OO;function _h(){if(OO)return dS;OO=1;function i(o){return o!=null&&typeof o=="object"}return dS=i,dS}var hS,LO;function im(){if(LO)return hS;LO=1;var i=rm(),o=_h(),l="[object Symbol]";function d(g){return typeof g=="symbol"||o(g)&&i(g)==l}return hS=d,hS}var pS,kO;function k7(){if(kO)return pS;kO=1;var i=P7(),o=cf(),l=im(),d=NaN,g=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,b=/^0o[0-7]+$/i,p=parseInt;function w(F){if(typeof F=="number")return F;if(l(F))return d;if(o(F)){var C=typeof F.valueOf=="function"?F.valueOf():F;F=o(C)?C+"":C}if(typeof F!="string")return F===0?F:+F;F=i(F);var E=S.test(F);return E||b.test(F)?p(F.slice(2),E?2:8):g.test(F)?d:+F}return pS=w,pS}var gS,FO;function qU(){if(FO)return gS;FO=1;var i=cf(),o=M7(),l=k7(),d="Expected a function",g=Math.max,S=Math.min;function b(p,w,F){var C,E,y,P,m,T,U=0,M=!1,_=!1,I=!0;if(typeof p!="function")throw new TypeError(d);w=l(w)||0,i(F)&&(M=!!F.leading,_="maxWait"in F,y=_?g(l(F.maxWait)||0,w):y,I="trailing"in F?!!F.trailing:I);function x(oe){var me=C,Ce=E;return C=E=void 0,U=oe,P=p.apply(Ce,me),P}function Z(oe){return U=oe,m=setTimeout(Q,w),M?x(oe):P}function Y(oe){var me=oe-T,Ce=oe-U,Je=w-me;return _?S(Je,y-Ce):Je}function $(oe){var me=oe-T,Ce=oe-U;return T===void 0||me>=w||me<0||_&&Ce>=y}function Q(){var oe=o();if($(oe))return se(oe);m=setTimeout(Q,Y(oe))}function se(oe){return m=void 0,I&&C?x(oe):(C=E=void 0,P)}function R(){m!==void 0&&clearTimeout(m),U=0,C=T=E=m=void 0}function X(){return m===void 0?P:se(o())}function ce(){var oe=o(),me=$(oe);if(C=arguments,E=this,T=oe,me){if(m===void 0)return Z(T);if(_)return clearTimeout(m),m=setTimeout(Q,w),x(T)}return m===void 0&&(m=setTimeout(Q,w)),P}return ce.cancel=R,ce.flush=X,ce}return gS=b,gS}var mS,UO;function GU(){if(UO)return mS;UO=1;var i=rm(),o=cf(),l="[object AsyncFunction]",d="[object Function]",g="[object GeneratorFunction]",S="[object Proxy]";function b(p){if(!o(p))return!1;var w=i(p);return w==d||w==g||w==l||w==S}return mS=b,mS}var vS,BO;function F7(){if(BO)return vS;BO=1;var i=Bu(),o=i["__core-js_shared__"];return vS=o,vS}var yS,jO;function U7(){if(jO)return yS;jO=1;var i=F7(),o=function(){var d=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}();function l(d){return!!o&&o in d}return yS=l,yS}var ES,ZO;function HU(){if(ZO)return ES;ZO=1;var i=Function.prototype,o=i.toString;function l(d){if(d!=null){try{return o.call(d)}catch(g){}try{return d+""}catch(g){}}return""}return ES=l,ES}var _S,qO;function B7(){if(qO)return _S;qO=1;var i=GU(),o=U7(),l=cf(),d=HU(),g=/[\\^$.*+?()[\]{}|]/g,S=/^\[object .+?Constructor\]$/,b=Function.prototype,p=Object.prototype,w=b.toString,F=p.hasOwnProperty,C=RegExp("^"+w.call(F).replace(g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E(y){if(!l(y)||o(y))return!1;var P=i(y)?C:S;return P.test(d(y))}return _S=E,_S}var TS,GO;function j7(){if(GO)return TS;GO=1;function i(o,l){return o==null?void 0:o[l]}return TS=i,TS}var SS,HO;function ff(){if(HO)return SS;HO=1;var i=B7(),o=j7();function l(d,g){var S=o(d,g);return i(S)?S:void 0}return SS=l,SS}var wS,VO;function EE(){if(VO)return wS;VO=1;var i=ff(),o=i(Object,"create");return wS=o,wS}var AS,KO;function Z7(){if(KO)return AS;KO=1;var i=EE();function o(){this.__data__=i?i(null):{},this.size=0}return AS=o,AS}var IS,zO;function q7(){if(zO)return IS;zO=1;function i(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}return IS=i,IS}var bS,YO;function G7(){if(YO)return bS;YO=1;var i=EE(),o="__lodash_hash_undefined__",l=Object.prototype,d=l.hasOwnProperty;function g(S){var b=this.__data__;if(i){var p=b[S];return p===o?void 0:p}return d.call(b,S)?b[S]:void 0}return bS=g,bS}var CS,WO;function H7(){if(WO)return CS;WO=1;var i=EE(),o=Object.prototype,l=o.hasOwnProperty;function d(g){var S=this.__data__;return i?S[g]!==void 0:l.call(S,g)}return CS=d,CS}var RS,$O;function V7(){if($O)return RS;$O=1;var i=EE(),o="__lodash_hash_undefined__";function l(d,g){var S=this.__data__;return this.size+=this.has(d)?0:1,S[d]=i&&g===void 0?o:g,this}return RS=l,RS}var xS,XO;function K7(){if(XO)return xS;XO=1;var i=Z7(),o=q7(),l=G7(),d=H7(),g=V7();function S(b){var p=-1,w=b==null?0:b.length;for(this.clear();++p<w;){var F=b[p];this.set(F[0],F[1])}}return S.prototype.clear=i,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=d,S.prototype.set=g,xS=S,xS}var NS,QO;function z7(){if(QO)return NS;QO=1;function i(){this.__data__=[],this.size=0}return NS=i,NS}var MS,JO;function DC(){if(JO)return MS;JO=1;function i(o,l){return o===l||o!==o&&l!==l}return MS=i,MS}var DS,eL;function _E(){if(eL)return DS;eL=1;var i=DC();function o(l,d){for(var g=l.length;g--;)if(i(l[g][0],d))return g;return-1}return DS=o,DS}var PS,tL;function Y7(){if(tL)return PS;tL=1;var i=_E(),o=Array.prototype,l=o.splice;function d(g){var S=this.__data__,b=i(S,g);if(b<0)return!1;var p=S.length-1;return b==p?S.pop():l.call(S,b,1),--this.size,!0}return PS=d,PS}var OS,nL;function W7(){if(nL)return OS;nL=1;var i=_E();function o(l){var d=this.__data__,g=i(d,l);return g<0?void 0:d[g][1]}return OS=o,OS}var LS,rL;function $7(){if(rL)return LS;rL=1;var i=_E();function o(l){return i(this.__data__,l)>-1}return LS=o,LS}var kS,iL;function X7(){if(iL)return kS;iL=1;var i=_E();function o(l,d){var g=this.__data__,S=i(g,l);return S<0?(++this.size,g.push([l,d])):g[S][1]=d,this}return kS=o,kS}var FS,oL;function TE(){if(oL)return FS;oL=1;var i=z7(),o=Y7(),l=W7(),d=$7(),g=X7();function S(b){var p=-1,w=b==null?0:b.length;for(this.clear();++p<w;){var F=b[p];this.set(F[0],F[1])}}return S.prototype.clear=i,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=d,S.prototype.set=g,FS=S,FS}var US,aL;function PC(){if(aL)return US;aL=1;var i=ff(),o=Bu(),l=i(o,"Map");return US=l,US}var BS,sL;function Q7(){if(sL)return BS;sL=1;var i=K7(),o=TE(),l=PC();function d(){this.size=0,this.__data__={hash:new i,map:new(l||o),string:new i}}return BS=d,BS}var jS,uL;function J7(){if(uL)return jS;uL=1;function i(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}return jS=i,jS}var ZS,lL;function SE(){if(lL)return ZS;lL=1;var i=J7();function o(l,d){var g=l.__data__;return i(d)?g[typeof d=="string"?"string":"hash"]:g.map}return ZS=o,ZS}var qS,cL;function eV(){if(cL)return qS;cL=1;var i=SE();function o(l){var d=i(this,l).delete(l);return this.size-=d?1:0,d}return qS=o,qS}var GS,fL;function tV(){if(fL)return GS;fL=1;var i=SE();function o(l){return i(this,l).get(l)}return GS=o,GS}var HS,dL;function nV(){if(dL)return HS;dL=1;var i=SE();function o(l){return i(this,l).has(l)}return HS=o,HS}var VS,hL;function rV(){if(hL)return VS;hL=1;var i=SE();function o(l,d){var g=i(this,l),S=g.size;return g.set(l,d),this.size+=g.size==S?0:1,this}return VS=o,VS}var KS,pL;function OC(){if(pL)return KS;pL=1;var i=Q7(),o=eV(),l=tV(),d=nV(),g=rV();function S(b){var p=-1,w=b==null?0:b.length;for(this.clear();++p<w;){var F=b[p];this.set(F[0],F[1])}}return S.prototype.clear=i,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=d,S.prototype.set=g,KS=S,KS}var zS,gL;function iV(){if(gL)return zS;gL=1;var i="__lodash_hash_undefined__";function o(l){return this.__data__.set(l,i),this}return zS=o,zS}var YS,mL;function oV(){if(mL)return YS;mL=1;function i(o){return this.__data__.has(o)}return YS=i,YS}var WS,vL;function VU(){if(vL)return WS;vL=1;var i=OC(),o=iV(),l=oV();function d(g){var S=-1,b=g==null?0:g.length;for(this.__data__=new i;++S<b;)this.add(g[S])}return d.prototype.add=d.prototype.push=o,d.prototype.has=l,WS=d,WS}var $S,yL;function aV(){if(yL)return $S;yL=1;function i(o,l,d,g){for(var S=o.length,b=d+(g?1:-1);g?b--:++b<S;)if(l(o[b],b,o))return b;return-1}return $S=i,$S}var XS,EL;function sV(){if(EL)return XS;EL=1;function i(o){return o!==o}return XS=i,XS}var QS,_L;function uV(){if(_L)return QS;_L=1;function i(o,l,d){for(var g=d-1,S=o.length;++g<S;)if(o[g]===l)return g;return-1}return QS=i,QS}var JS,TL;function lV(){if(TL)return JS;TL=1;var i=aV(),o=sV(),l=uV();function d(g,S,b){return S===S?l(g,S,b):i(g,o,b)}return JS=d,JS}var ew,SL;function cV(){if(SL)return ew;SL=1;var i=lV();function o(l,d){var g=l==null?0:l.length;return!!g&&i(l,d,0)>-1}return ew=o,ew}var tw,wL;function fV(){if(wL)return tw;wL=1;function i(o,l,d){for(var g=-1,S=o==null?0:o.length;++g<S;)if(d(l,o[g]))return!0;return!1}return tw=i,tw}var nw,AL;function LC(){if(AL)return nw;AL=1;function i(o,l){for(var d=-1,g=o==null?0:o.length,S=Array(g);++d<g;)S[d]=l(o[d],d,o);return S}return nw=i,nw}var rw,IL;function kC(){if(IL)return rw;IL=1;function i(o){return function(l){return o(l)}}return rw=i,rw}var iw,bL;function KU(){if(bL)return iw;bL=1;function i(o,l){return o.has(l)}return iw=i,iw}var ow,CL;function dV(){if(CL)return ow;CL=1;var i=VU(),o=cV(),l=fV(),d=LC(),g=kC(),S=KU(),b=200;function p(w,F,C,E){var y=-1,P=o,m=!0,T=w.length,U=[],M=F.length;if(!T)return U;C&&(F=d(F,g(C))),E?(P=l,m=!1):F.length>=b&&(P=S,m=!1,F=new i(F));e:for(;++y<T;){var _=w[y],I=C==null?_:C(_);if(_=E||_!==0?_:0,m&&I===I){for(var x=M;x--;)if(F[x]===I)continue e;U.push(_)}else P(F,I,E)||U.push(_)}return U}return ow=p,ow}var aw,RL;function zU(){if(RL)return aw;RL=1;function i(o,l){for(var d=-1,g=l.length,S=o.length;++d<g;)o[S+d]=l[d];return o}return aw=i,aw}var sw,xL;function hV(){if(xL)return sw;xL=1;var i=rm(),o=_h(),l="[object Arguments]";function d(g){return o(g)&&i(g)==l}return sw=d,sw}var uw,NL;function FC(){if(NL)return uw;NL=1;var i=hV(),o=_h(),l=Object.prototype,d=l.hasOwnProperty,g=l.propertyIsEnumerable,S=i(function(){return arguments}())?i:function(b){return o(b)&&d.call(b,"callee")&&!g.call(b,"callee")};return uw=S,uw}var lw,ML;function js(){if(ML)return lw;ML=1;var i=Array.isArray;return lw=i,lw}var cw,DL;function pV(){if(DL)return cw;DL=1;var i=nm(),o=FC(),l=js(),d=i?i.isConcatSpreadable:void 0;function g(S){return l(S)||o(S)||!!(d&&S&&S[d])}return cw=g,cw}var fw,PL;function YU(){if(PL)return fw;PL=1;var i=zU(),o=pV();function l(d,g,S,b,p){var w=-1,F=d.length;for(S||(S=o),p||(p=[]);++w<F;){var C=d[w];g>0&&S(C)?g>1?l(C,g-1,S,b,p):i(p,C):b||(p[p.length]=C)}return p}return fw=l,fw}var dw,OL;function om(){if(OL)return dw;OL=1;function i(o){return o}return dw=i,dw}var hw,LL;function gV(){if(LL)return hw;LL=1;function i(o,l,d){switch(d.length){case 0:return o.call(l);case 1:return o.call(l,d[0]);case 2:return o.call(l,d[0],d[1]);case 3:return o.call(l,d[0],d[1],d[2])}return o.apply(l,d)}return hw=i,hw}var pw,kL;function mV(){if(kL)return pw;kL=1;var i=gV(),o=Math.max;function l(d,g,S){return g=o(g===void 0?d.length-1:g,0),function(){for(var b=arguments,p=-1,w=o(b.length-g,0),F=Array(w);++p<w;)F[p]=b[g+p];p=-1;for(var C=Array(g+1);++p<g;)C[p]=b[p];return C[g]=S(F),i(d,this,C)}}return pw=l,pw}var gw,FL;function vV(){if(FL)return gw;FL=1;function i(o){return function(){return o}}return gw=i,gw}var mw,UL;function yV(){if(UL)return mw;UL=1;var i=ff(),o=function(){try{var l=i(Object,"defineProperty");return l({},"",{}),l}catch(d){}}();return mw=o,mw}var vw,BL;function EV(){if(BL)return vw;BL=1;var i=vV(),o=yV(),l=om(),d=o?function(g,S){return o(g,"toString",{configurable:!0,enumerable:!1,value:i(S),writable:!0})}:l;return vw=d,vw}var yw,jL;function _V(){if(jL)return yw;jL=1;var i=800,o=16,l=Date.now;function d(g){var S=0,b=0;return function(){var p=l(),w=o-(p-b);if(b=p,w>0){if(++S>=i)return arguments[0]}else S=0;return g.apply(void 0,arguments)}}return yw=d,yw}var Ew,ZL;function TV(){if(ZL)return Ew;ZL=1;var i=EV(),o=_V(),l=o(i);return Ew=l,Ew}var _w,qL;function WU(){if(qL)return _w;qL=1;var i=om(),o=mV(),l=TV();function d(g,S){return l(o(g,S,i),g+"")}return _w=d,_w}var Tw,GL;function UC(){if(GL)return Tw;GL=1;var i=9007199254740991;function o(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=i}return Tw=o,Tw}var Sw,HL;function am(){if(HL)return Sw;HL=1;var i=GU(),o=UC();function l(d){return d!=null&&o(d.length)&&!i(d)}return Sw=l,Sw}var ww,VL;function SV(){if(VL)return ww;VL=1;var i=am(),o=_h();function l(d){return o(d)&&i(d)}return ww=l,ww}var Aw,KL;function wV(){if(KL)return Aw;KL=1;var i=dV(),o=YU(),l=WU(),d=SV(),g=l(function(S,b){return d(S)?i(S,o(b,1,d,!0)):[]});return Aw=g,Aw}var Iw,zL;function $U(){if(zL)return Iw;zL=1;function i(o,l){for(var d=-1,g=o==null?0:o.length,S=0,b=[];++d<g;){var p=o[d];l(p,d,o)&&(b[S++]=p)}return b}return Iw=i,Iw}var bw,YL;function AV(){if(YL)return bw;YL=1;function i(o){return function(l,d,g){for(var S=-1,b=Object(l),p=g(l),w=p.length;w--;){var F=p[o?w:++S];if(d(b[F],F,b)===!1)break}return l}}return bw=i,bw}var Cw,WL;function IV(){if(WL)return Cw;WL=1;var i=AV(),o=i();return Cw=o,Cw}var Rw,$L;function bV(){if($L)return Rw;$L=1;function i(o,l){for(var d=-1,g=Array(o);++d<o;)g[d]=l(d);return g}return Rw=i,Rw}var vg={exports:{}},xw,XL;function CV(){if(XL)return xw;XL=1;function i(){return!1}return xw=i,xw}vg.exports;var QL;function XU(){return QL||(QL=1,function(i,o){var l=Bu(),d=CV(),g=o&&!o.nodeType&&o,S=g&&!0&&i&&!i.nodeType&&i,b=S&&S.exports===g,p=b?l.Buffer:void 0,w=p?p.isBuffer:void 0,F=w||d;i.exports=F}(vg,vg.exports)),vg.exports}var Nw,JL;function BC(){if(JL)return Nw;JL=1;var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;function l(d,g){var S=typeof d;return g=g==null?i:g,!!g&&(S=="number"||S!="symbol"&&o.test(d))&&d>-1&&d%1==0&&d<g}return Nw=l,Nw}var Mw,ek;function RV(){if(ek)return Mw;ek=1;var i=rm(),o=UC(),l=_h(),d="[object Arguments]",g="[object Array]",S="[object Boolean]",b="[object Date]",p="[object Error]",w="[object Function]",F="[object Map]",C="[object Number]",E="[object Object]",y="[object RegExp]",P="[object Set]",m="[object String]",T="[object WeakMap]",U="[object ArrayBuffer]",M="[object DataView]",_="[object Float32Array]",I="[object Float64Array]",x="[object Int8Array]",Z="[object Int16Array]",Y="[object Int32Array]",$="[object Uint8Array]",Q="[object Uint8ClampedArray]",se="[object Uint16Array]",R="[object Uint32Array]",X={};X[_]=X[I]=X[x]=X[Z]=X[Y]=X[$]=X[Q]=X[se]=X[R]=!0,X[d]=X[g]=X[U]=X[S]=X[M]=X[b]=X[p]=X[w]=X[F]=X[C]=X[E]=X[y]=X[P]=X[m]=X[T]=!1;function ce(oe){return l(oe)&&o(oe.length)&&!!X[i(oe)]}return Mw=ce,Mw}var yg={exports:{}};yg.exports;var tk;function xV(){return tk||(tk=1,function(i,o){var l=ZU(),d=o&&!o.nodeType&&o,g=d&&!0&&i&&!i.nodeType&&i,S=g&&g.exports===d,b=S&&l.process,p=function(){try{var w=g&&g.require&&g.require("util").types;return w||b&&b.binding&&b.binding("util")}catch(F){}}();i.exports=p}(yg,yg.exports)),yg.exports}var Dw,nk;function QU(){if(nk)return Dw;nk=1;var i=RV(),o=kC(),l=xV(),d=l&&l.isTypedArray,g=d?o(d):i;return Dw=g,Dw}var Pw,rk;function NV(){if(rk)return Pw;rk=1;var i=bV(),o=FC(),l=js(),d=XU(),g=BC(),S=QU(),b=Object.prototype,p=b.hasOwnProperty;function w(F,C){var E=l(F),y=!E&&o(F),P=!E&&!y&&d(F),m=!E&&!y&&!P&&S(F),T=E||y||P||m,U=T?i(F.length,String):[],M=U.length;for(var _ in F)(C||p.call(F,_))&&!(T&&(_=="length"||P&&(_=="offset"||_=="parent")||m&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||g(_,M)))&&U.push(_);return U}return Pw=w,Pw}var Ow,ik;function MV(){if(ik)return Ow;ik=1;var i=Object.prototype;function o(l){var d=l&&l.constructor,g=typeof d=="function"&&d.prototype||i;return l===g}return Ow=o,Ow}var Lw,ok;function DV(){if(ok)return Lw;ok=1;function i(o,l){return function(d){return o(l(d))}}return Lw=i,Lw}var kw,ak;function PV(){if(ak)return kw;ak=1;var i=DV(),o=i(Object.keys,Object);return kw=o,kw}var Fw,sk;function OV(){if(sk)return Fw;sk=1;var i=MV(),o=PV(),l=Object.prototype,d=l.hasOwnProperty;function g(S){if(!i(S))return o(S);var b=[];for(var p in Object(S))d.call(S,p)&&p!="constructor"&&b.push(p);return b}return Fw=g,Fw}var Uw,uk;function jC(){if(uk)return Uw;uk=1;var i=NV(),o=OV(),l=am();function d(g){return l(g)?i(g):o(g)}return Uw=d,Uw}var Bw,lk;function ZC(){if(lk)return Bw;lk=1;var i=IV(),o=jC();function l(d,g){return d&&i(d,g,o)}return Bw=l,Bw}var jw,ck;function LV(){if(ck)return jw;ck=1;var i=am();function o(l,d){return function(g,S){if(g==null)return g;if(!i(g))return l(g,S);for(var b=g.length,p=d?b:-1,w=Object(g);(d?p--:++p<b)&&S(w[p],p,w)!==!1;);return g}}return jw=o,jw}var Zw,fk;function qC(){if(fk)return Zw;fk=1;var i=ZC(),o=LV(),l=o(i);return Zw=l,Zw}var qw,dk;function kV(){if(dk)return qw;dk=1;var i=qC();function o(l,d){var g=[];return i(l,function(S,b,p){d(S,b,p)&&g.push(S)}),g}return qw=o,qw}var Gw,hk;function FV(){if(hk)return Gw;hk=1;var i=TE();function o(){this.__data__=new i,this.size=0}return Gw=o,Gw}var Hw,pk;function UV(){if(pk)return Hw;pk=1;function i(o){var l=this.__data__,d=l.delete(o);return this.size=l.size,d}return Hw=i,Hw}var Vw,gk;function BV(){if(gk)return Vw;gk=1;function i(o){return this.__data__.get(o)}return Vw=i,Vw}var Kw,mk;function jV(){if(mk)return Kw;mk=1;function i(o){return this.__data__.has(o)}return Kw=i,Kw}var zw,vk;function ZV(){if(vk)return zw;vk=1;var i=TE(),o=PC(),l=OC(),d=200;function g(S,b){var p=this.__data__;if(p instanceof i){var w=p.__data__;if(!o||w.length<d-1)return w.push([S,b]),this.size=++p.size,this;p=this.__data__=new l(w)}return p.set(S,b),this.size=p.size,this}return zw=g,zw}var Yw,yk;function JU(){if(yk)return Yw;yk=1;var i=TE(),o=FV(),l=UV(),d=BV(),g=jV(),S=ZV();function b(p){var w=this.__data__=new i(p);this.size=w.size}return b.prototype.clear=o,b.prototype.delete=l,b.prototype.get=d,b.prototype.has=g,b.prototype.set=S,Yw=b,Yw}var Ww,Ek;function qV(){if(Ek)return Ww;Ek=1;function i(o,l){for(var d=-1,g=o==null?0:o.length;++d<g;)if(l(o[d],d,o))return!0;return!1}return Ww=i,Ww}var $w,_k;function eB(){if(_k)return $w;_k=1;var i=VU(),o=qV(),l=KU(),d=1,g=2;function S(b,p,w,F,C,E){var y=w&d,P=b.length,m=p.length;if(P!=m&&!(y&&m>P))return!1;var T=E.get(b),U=E.get(p);if(T&&U)return T==p&&U==b;var M=-1,_=!0,I=w&g?new i:void 0;for(E.set(b,p),E.set(p,b);++M<P;){var x=b[M],Z=p[M];if(F)var Y=y?F(Z,x,M,p,b,E):F(x,Z,M,b,p,E);if(Y!==void 0){if(Y)continue;_=!1;break}if(I){if(!o(p,function($,Q){if(!l(I,Q)&&(x===$||C(x,$,w,F,E)))return I.push(Q)})){_=!1;break}}else if(!(x===Z||C(x,Z,w,F,E))){_=!1;break}}return E.delete(b),E.delete(p),_}return $w=S,$w}var Xw,Tk;function GV(){if(Tk)return Xw;Tk=1;var i=Bu(),o=i.Uint8Array;return Xw=o,Xw}var Qw,Sk;function HV(){if(Sk)return Qw;Sk=1;function i(o){var l=-1,d=Array(o.size);return o.forEach(function(g,S){d[++l]=[S,g]}),d}return Qw=i,Qw}var Jw,wk;function VV(){if(wk)return Jw;wk=1;function i(o){var l=-1,d=Array(o.size);return o.forEach(function(g){d[++l]=g}),d}return Jw=i,Jw}var eA,Ak;function KV(){if(Ak)return eA;Ak=1;var i=nm(),o=GV(),l=DC(),d=eB(),g=HV(),S=VV(),b=1,p=2,w="[object Boolean]",F="[object Date]",C="[object Error]",E="[object Map]",y="[object Number]",P="[object RegExp]",m="[object Set]",T="[object String]",U="[object Symbol]",M="[object ArrayBuffer]",_="[object DataView]",I=i?i.prototype:void 0,x=I?I.valueOf:void 0;function Z(Y,$,Q,se,R,X,ce){switch(Q){case _:if(Y.byteLength!=$.byteLength||Y.byteOffset!=$.byteOffset)return!1;Y=Y.buffer,$=$.buffer;case M:return!(Y.byteLength!=$.byteLength||!X(new o(Y),new o($)));case w:case F:case y:return l(+Y,+$);case C:return Y.name==$.name&&Y.message==$.message;case P:case T:return Y==$+"";case E:var oe=g;case m:var me=se&b;if(oe||(oe=S),Y.size!=$.size&&!me)return!1;var Ce=ce.get(Y);if(Ce)return Ce==$;se|=p,ce.set(Y,$);var Je=d(oe(Y),oe($),se,R,X,ce);return ce.delete(Y),Je;case U:if(x)return x.call(Y)==x.call($)}return!1}return eA=Z,eA}var tA,Ik;function zV(){if(Ik)return tA;Ik=1;var i=zU(),o=js();function l(d,g,S){var b=g(d);return o(d)?b:i(b,S(d))}return tA=l,tA}var nA,bk;function YV(){if(bk)return nA;bk=1;function i(){return[]}return nA=i,nA}var rA,Ck;function WV(){if(Ck)return rA;Ck=1;var i=$U(),o=YV(),l=Object.prototype,d=l.propertyIsEnumerable,g=Object.getOwnPropertySymbols,S=g?function(b){return b==null?[]:(b=Object(b),i(g(b),function(p){return d.call(b,p)}))}:o;return rA=S,rA}var iA,Rk;function $V(){if(Rk)return iA;Rk=1;var i=zV(),o=WV(),l=jC();function d(g){return i(g,l,o)}return iA=d,iA}var oA,xk;function XV(){if(xk)return oA;xk=1;var i=$V(),o=1,l=Object.prototype,d=l.hasOwnProperty;function g(S,b,p,w,F,C){var E=p&o,y=i(S),P=y.length,m=i(b),T=m.length;if(P!=T&&!E)return!1;for(var U=P;U--;){var M=y[U];if(!(E?M in b:d.call(b,M)))return!1}var _=C.get(S),I=C.get(b);if(_&&I)return _==b&&I==S;var x=!0;C.set(S,b),C.set(b,S);for(var Z=E;++U<P;){M=y[U];var Y=S[M],$=b[M];if(w)var Q=E?w($,Y,M,b,S,C):w(Y,$,M,S,b,C);if(!(Q===void 0?Y===$||F(Y,$,p,w,C):Q)){x=!1;break}Z||(Z=M=="constructor")}if(x&&!Z){var se=S.constructor,R=b.constructor;se!=R&&"constructor"in S&&"constructor"in b&&!(typeof se=="function"&&se instanceof se&&typeof R=="function"&&R instanceof R)&&(x=!1)}return C.delete(S),C.delete(b),x}return oA=g,oA}var aA,Nk;function QV(){if(Nk)return aA;Nk=1;var i=ff(),o=Bu(),l=i(o,"DataView");return aA=l,aA}var sA,Mk;function JV(){if(Mk)return sA;Mk=1;var i=ff(),o=Bu(),l=i(o,"Promise");return sA=l,sA}var uA,Dk;function eK(){if(Dk)return uA;Dk=1;var i=ff(),o=Bu(),l=i(o,"Set");return uA=l,uA}var lA,Pk;function tK(){if(Pk)return lA;Pk=1;var i=ff(),o=Bu(),l=i(o,"WeakMap");return lA=l,lA}var cA,Ok;function nK(){if(Ok)return cA;Ok=1;var i=QV(),o=PC(),l=JV(),d=eK(),g=tK(),S=rm(),b=HU(),p="[object Map]",w="[object Object]",F="[object Promise]",C="[object Set]",E="[object WeakMap]",y="[object DataView]",P=b(i),m=b(o),T=b(l),U=b(d),M=b(g),_=S;return(i&&_(new i(new ArrayBuffer(1)))!=y||o&&_(new o)!=p||l&&_(l.resolve())!=F||d&&_(new d)!=C||g&&_(new g)!=E)&&(_=function(I){var x=S(I),Z=x==w?I.constructor:void 0,Y=Z?b(Z):"";if(Y)switch(Y){case P:return y;case m:return p;case T:return F;case U:return C;case M:return E}return x}),cA=_,cA}var fA,Lk;function rK(){if(Lk)return fA;Lk=1;var i=JU(),o=eB(),l=KV(),d=XV(),g=nK(),S=js(),b=XU(),p=QU(),w=1,F="[object Arguments]",C="[object Array]",E="[object Object]",y=Object.prototype,P=y.hasOwnProperty;function m(T,U,M,_,I,x){var Z=S(T),Y=S(U),$=Z?C:g(T),Q=Y?C:g(U);$=$==F?E:$,Q=Q==F?E:Q;var se=$==E,R=Q==E,X=$==Q;if(X&&b(T)){if(!b(U))return!1;Z=!0,se=!1}if(X&&!se)return x||(x=new i),Z||p(T)?o(T,U,M,_,I,x):l(T,U,$,M,_,I,x);if(!(M&w)){var ce=se&&P.call(T,"__wrapped__"),oe=R&&P.call(U,"__wrapped__");if(ce||oe){var me=ce?T.value():T,Ce=oe?U.value():U;return x||(x=new i),I(me,Ce,M,_,x)}}return X?(x||(x=new i),d(T,U,M,_,I,x)):!1}return fA=m,fA}var dA,kk;function tB(){if(kk)return dA;kk=1;var i=rK(),o=_h();function l(d,g,S,b,p){return d===g?!0:d==null||g==null||!o(d)&&!o(g)?d!==d&&g!==g:i(d,g,S,b,l,p)}return dA=l,dA}var hA,Fk;function iK(){if(Fk)return hA;Fk=1;var i=JU(),o=tB(),l=1,d=2;function g(S,b,p,w){var F=p.length,C=F,E=!w;if(S==null)return!C;for(S=Object(S);F--;){var y=p[F];if(E&&y[2]?y[1]!==S[y[0]]:!(y[0]in S))return!1}for(;++F<C;){y=p[F];var P=y[0],m=S[P],T=y[1];if(E&&y[2]){if(m===void 0&&!(P in S))return!1}else{var U=new i;if(w)var M=w(m,T,P,S,b,U);if(!(M===void 0?o(T,m,l|d,w,U):M))return!1}}return!0}return hA=g,hA}var pA,Uk;function nB(){if(Uk)return pA;Uk=1;var i=cf();function o(l){return l===l&&!i(l)}return pA=o,pA}var gA,Bk;function oK(){if(Bk)return gA;Bk=1;var i=nB(),o=jC();function l(d){for(var g=o(d),S=g.length;S--;){var b=g[S],p=d[b];g[S]=[b,p,i(p)]}return g}return gA=l,gA}var mA,jk;function rB(){if(jk)return mA;jk=1;function i(o,l){return function(d){return d==null?!1:d[o]===l&&(l!==void 0||o in Object(d))}}return mA=i,mA}var vA,Zk;function aK(){if(Zk)return vA;Zk=1;var i=iK(),o=oK(),l=rB();function d(g){var S=o(g);return S.length==1&&S[0][2]?l(S[0][0],S[0][1]):function(b){return b===g||i(b,g,S)}}return vA=d,vA}var yA,qk;function GC(){if(qk)return yA;qk=1;var i=js(),o=im(),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function g(S,b){if(i(S))return!1;var p=typeof S;return p=="number"||p=="symbol"||p=="boolean"||S==null||o(S)?!0:d.test(S)||!l.test(S)||b!=null&&S in Object(b)}return yA=g,yA}var EA,Gk;function sK(){if(Gk)return EA;Gk=1;var i=OC(),o="Expected a function";function l(d,g){if(typeof d!="function"||g!=null&&typeof g!="function")throw new TypeError(o);var S=function(){var b=arguments,p=g?g.apply(this,b):b[0],w=S.cache;if(w.has(p))return w.get(p);var F=d.apply(this,b);return S.cache=w.set(p,F)||w,F};return S.cache=new(l.Cache||i),S}return l.Cache=i,EA=l,EA}var _A,Hk;function uK(){if(Hk)return _A;Hk=1;var i=sK(),o=500;function l(d){var g=i(d,function(b){return S.size===o&&S.clear(),b}),S=g.cache;return g}return _A=l,_A}var TA,Vk;function lK(){if(Vk)return TA;Vk=1;var i=uK(),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,d=i(function(g){var S=[];return g.charCodeAt(0)===46&&S.push(""),g.replace(o,function(b,p,w,F){S.push(w?F.replace(l,"$1"):p||b)}),S});return TA=d,TA}var SA,Kk;function cK(){if(Kk)return SA;Kk=1;var i=nm(),o=LC(),l=js(),d=im(),g=1/0,S=i?i.prototype:void 0,b=S?S.toString:void 0;function p(w){if(typeof w=="string")return w;if(l(w))return o(w,p)+"";if(d(w))return b?b.call(w):"";var F=w+"";return F=="0"&&1/w==-g?"-0":F}return SA=p,SA}var wA,zk;function iB(){if(zk)return wA;zk=1;var i=cK();function o(l){return l==null?"":i(l)}return wA=o,wA}var AA,Yk;function oB(){if(Yk)return AA;Yk=1;var i=js(),o=GC(),l=lK(),d=iB();function g(S,b){return i(S)?S:o(S,b)?[S]:l(d(S))}return AA=g,AA}var IA,Wk;function wE(){if(Wk)return IA;Wk=1;var i=im(),o=1/0;function l(d){if(typeof d=="string"||i(d))return d;var g=d+"";return g=="0"&&1/d==-o?"-0":g}return IA=l,IA}var bA,$k;function HC(){if($k)return bA;$k=1;var i=oB(),o=wE();function l(d,g){g=i(g,d);for(var S=0,b=g.length;d!=null&&S<b;)d=d[o(g[S++])];return S&&S==b?d:void 0}return bA=l,bA}var CA,Xk;function fK(){if(Xk)return CA;Xk=1;var i=HC();function o(l,d,g){var S=l==null?void 0:i(l,d);return S===void 0?g:S}return CA=o,CA}var RA,Qk;function dK(){if(Qk)return RA;Qk=1;function i(o,l){return o!=null&&l in Object(o)}return RA=i,RA}var xA,Jk;function hK(){if(Jk)return xA;Jk=1;var i=oB(),o=FC(),l=js(),d=BC(),g=UC(),S=wE();function b(p,w,F){w=i(w,p);for(var C=-1,E=w.length,y=!1;++C<E;){var P=S(w[C]);if(!(y=p!=null&&F(p,P)))break;p=p[P]}return y||++C!=E?y:(E=p==null?0:p.length,!!E&&g(E)&&d(P,E)&&(l(p)||o(p)))}return xA=b,xA}var NA,e3;function pK(){if(e3)return NA;e3=1;var i=dK(),o=hK();function l(d,g){return d!=null&&o(d,g,i)}return NA=l,NA}var MA,t3;function gK(){if(t3)return MA;t3=1;var i=tB(),o=fK(),l=pK(),d=GC(),g=nB(),S=rB(),b=wE(),p=1,w=2;function F(C,E){return d(C)&&g(E)?S(b(C),E):function(y){var P=o(y,C);return P===void 0&&P===E?l(y,C):i(E,P,p|w)}}return MA=F,MA}var DA,n3;function mK(){if(n3)return DA;n3=1;function i(o){return function(l){return l==null?void 0:l[o]}}return DA=i,DA}var PA,r3;function vK(){if(r3)return PA;r3=1;var i=HC();function o(l){return function(d){return i(d,l)}}return PA=o,PA}var OA,i3;function yK(){if(i3)return OA;i3=1;var i=mK(),o=vK(),l=GC(),d=wE();function g(S){return l(S)?i(d(S)):o(S)}return OA=g,OA}var LA,o3;function VC(){if(o3)return LA;o3=1;var i=aK(),o=gK(),l=om(),d=js(),g=yK();function S(b){return typeof b=="function"?b:b==null?l:typeof b=="object"?d(b)?o(b[0],b[1]):i(b):g(b)}return LA=S,LA}var kA,a3;function EK(){if(a3)return kA;a3=1;var i=$U(),o=kV(),l=VC(),d=js();function g(S,b){var p=d(S)?i:o;return p(S,l(b,3))}return kA=g,kA}var FA,s3;function _K(){if(s3)return FA;s3=1;function i(o,l,d){var g;return d(o,function(S,b,p){if(l(S,b,p))return g=b,!1}),g}return FA=i,FA}var UA,u3;function TK(){if(u3)return UA;u3=1;var i=_K(),o=ZC(),l=VC();function d(g,S){return i(g,l(S,3),o)}return UA=d,UA}var BA,l3;function SK(){if(l3)return BA;l3=1;function i(o){return o&&o.length?o[0]:void 0}return BA=i,BA}var jA,c3;function wK(){return c3||(c3=1,jA=SK()),jA}var ZA,f3;function AK(){if(f3)return ZA;f3=1;function i(o,l){for(var d=-1,g=o==null?0:o.length;++d<g&&l(o[d],d,o)!==!1;);return o}return ZA=i,ZA}var qA,d3;function aB(){if(d3)return qA;d3=1;var i=om();function o(l){return typeof l=="function"?l:i}return qA=o,qA}var GA,h3;function IK(){if(h3)return GA;h3=1;var i=AK(),o=qC(),l=aB(),d=js();function g(S,b){var p=d(S)?i:o;return p(S,l(b))}return GA=g,GA}var HA,p3;function bK(){if(p3)return HA;p3=1;var i=ZC(),o=aB();function l(d,g){return d&&i(d,o(g))}return HA=l,HA}var VA,g3;function CK(){if(g3)return VA;g3=1;function i(){}return VA=i,VA}var KA,m3;function RK(){if(m3)return KA;m3=1;var i=qC(),o=am();function l(d,g){var S=-1,b=o(d)?Array(d.length):[];return i(d,function(p,w,F){b[++S]=g(p,w,F)}),b}return KA=l,KA}var zA,v3;function xK(){if(v3)return zA;v3=1;function i(o,l){var d=o.length;for(o.sort(l);d--;)o[d]=o[d].value;return o}return zA=i,zA}var YA,y3;function NK(){if(y3)return YA;y3=1;var i=im();function o(l,d){if(l!==d){var g=l!==void 0,S=l===null,b=l===l,p=i(l),w=d!==void 0,F=d===null,C=d===d,E=i(d);if(!F&&!E&&!p&&l>d||p&&w&&C&&!F&&!E||S&&w&&C||!g&&C||!b)return 1;if(!S&&!p&&!E&&l<d||E&&g&&b&&!S&&!p||F&&g&&b||!w&&b||!C)return-1}return 0}return YA=o,YA}var WA,E3;function MK(){if(E3)return WA;E3=1;var i=NK();function o(l,d,g){for(var S=-1,b=l.criteria,p=d.criteria,w=b.length,F=g.length;++S<w;){var C=i(b[S],p[S]);if(C){if(S>=F)return C;var E=g[S];return C*(E=="desc"?-1:1)}}return l.index-d.index}return WA=o,WA}var $A,_3;function DK(){if(_3)return $A;_3=1;var i=LC(),o=HC(),l=VC(),d=RK(),g=xK(),S=kC(),b=MK(),p=om(),w=js();function F(C,E,y){E.length?E=i(E,function(T){return w(T)?function(U){return o(U,T.length===1?T[0]:T)}:T}):E=[p];var P=-1;E=i(E,S(l));var m=d(C,function(T,U,M){var _=i(E,function(I){return I(T)});return{criteria:_,index:++P,value:T}});return g(m,function(T,U){return b(T,U,y)})}return $A=F,$A}var XA,T3;function PK(){if(T3)return XA;T3=1;var i=DC(),o=am(),l=BC(),d=cf();function g(S,b,p){if(!d(p))return!1;var w=typeof b;return(w=="number"?o(p)&&l(b,p.length):w=="string"&&b in p)?i(p[b],S):!1}return XA=g,XA}var QA,S3;function OK(){if(S3)return QA;S3=1;var i=YU(),o=DK(),l=WU(),d=PK(),g=l(function(S,b){if(S==null)return[];var p=b.length;return p>1&&d(S,b[0],b[1])?b=[]:p>2&&d(b[0],b[1],b[2])&&(b=[b[0]]),o(S,i(b,1),[])});return QA=g,QA}var JA,w3;function LK(){if(w3)return JA;w3=1;var i=qU(),o=cf(),l="Expected a function";function d(g,S,b){var p=!0,w=!0;if(typeof g!="function")throw new TypeError(l);return o(b)&&(p="leading"in b?!!b.leading:p,w="trailing"in b?!!b.trailing:w),i(g,S,{leading:p,maxWait:S,trailing:w})}return JA=d,JA}var eI,A3;function kK(){if(A3)return eI;A3=1;var i=iB(),o=0;function l(d){var g=++o;return i(d)+g}return eI=l,eI}(function(i,o){(function(l,d){i.exports=d(qU(),wV(),EK(),TK(),wK(),IK(),bK(),CK(),OK(),LK(),kK(),rE())})(cu,function(l,d,g,S,b,p,w,F,C,E,y,P){return function(){var m={654:function(U,M,_){var I,x=this&&this.__assign||function(){return x=Object.assign||function(Ne){for(var ne,Be=1,L=arguments.length;Be<L;Be++)for(var D in ne=arguments[Be])Object.prototype.hasOwnProperty.call(ne,D)&&(Ne[D]=ne[D]);return Ne},x.apply(this,arguments)},Z=this&&this.__createBinding||(Object.create?function(Ne,ne,Be,L){L===void 0&&(L=Be);var D=Object.getOwnPropertyDescriptor(ne,Be);D&&!("get"in D?!ne.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return ne[Be]}}),Object.defineProperty(Ne,L,D)}:function(Ne,ne,Be,L){L===void 0&&(L=Be),Ne[L]=ne[Be]}),Y=this&&this.__setModuleDefault||(Object.create?function(Ne,ne){Object.defineProperty(Ne,"default",{enumerable:!0,value:ne})}:function(Ne,ne){Ne.default=ne}),$=this&&this.__importStar||function(Ne){if(Ne&&Ne.__esModule)return Ne;var ne={};if(Ne!=null)for(var Be in Ne)Be!=="default"&&Object.prototype.hasOwnProperty.call(Ne,Be)&&Z(ne,Ne,Be);return Y(ne,Ne),ne},Q=this&&this.__spreadArray||function(Ne,ne,Be){if(Be||arguments.length===2)for(var L,D=0,G=ne.length;D<G;D++)!L&&D in ne||(L||(L=Array.prototype.slice.call(ne,0,D)),L[D]=ne[D]);return Ne.concat(L||Array.prototype.slice.call(ne))},se=this&&this.__importDefault||function(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}};Object.defineProperty(M,"__esModule",{value:!0}),M.doesFocusableExist=M.getCurrentFocusKey=M.updateAllLayouts=M.resume=M.pause=M.navigateByDirection=M.setFocus=M.setKeyMap=M.destroy=M.setThrottle=M.init=M.SpatialNavigation=M.ROOT_FOCUS_KEY=void 0;var R=se(_(150)),X=se(_(117)),ce=se(_(747)),oe=se(_(23)),me=se(_(842)),Ce=se(_(682)),Je=se(_(784)),we=se(_(432)),qe=se(_(67)),st=se(_(35)),ft=se(_(119)),be=$(_(964)),He="left",vt="right",Re="up",Ye="down",ot="enter",Ht=((I={}).left=[37,"ArrowLeft"],I.up=[38,"ArrowUp"],I.right=[39,"ArrowRight"],I.down=[40,"ArrowDown"],I.enter=[13,"Enter"],I);M.ROOT_FOCUS_KEY="SN:ROOT";var Bt=["#0FF","#FF0","#F0F"],Et={leading:!0,trailing:!1},Dt=function(){function Ne(){this.focusableComponents={},this.focusKey=null,this.parentsHavingFocusedChild=[],this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.useGetBoundingClientRect=!1,this.shouldFocusDOMNode=!1,this.shouldUseNativeEvents=!1,this.writingDirection=ft.default.LTR,this.pressedKeys={},this.paused=!1,this.keyDownEventListener=null,this.keyUpEventListener=null,this.keyMap=Ht,this.onKeyEvent=this.onKeyEvent.bind(this),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.setFocus=this.setFocus.bind(this),this.updateAllLayouts=this.updateAllLayouts.bind(this),this.navigateByDirection=this.navigateByDirection.bind(this),this.init=this.init.bind(this),this.setThrottle=this.setThrottle.bind(this),this.destroy=this.destroy.bind(this),this.setKeyMap=this.setKeyMap.bind(this),this.getCurrentFocusKey=this.getCurrentFocusKey.bind(this),this.doesFocusableExist=this.doesFocusableExist.bind(this),this.setFocusDebounced=(0,R.default)(this.setFocus,300,{leading:!1,trailing:!0}),this.debug=!1,this.visualDebugger=null,this.logIndex=0}return Ne.getCutoffCoordinate=function(ne,Be,L,D,G){var K=ne?D.top:G===ft.default.LTR?D.left:D.right,ge=ne?D.bottom:G===ft.default.LTR?D.right:D.left;return Be?L?K:ge:L?ge:K},Ne.getRefCorners=function(ne,Be,L){var D={a:{x:0,y:0},b:{x:0,y:0}};switch(ne){case Re:var G=Be?L.bottom:L.top;D.a={x:L.left,y:G},D.b={x:L.right,y:G};break;case Ye:G=Be?L.top:L.bottom,D.a={x:L.left,y:G},D.b={x:L.right,y:G};break;case He:var K=Be?L.right:L.left;D.a={x:K,y:L.top},D.b={x:K,y:L.bottom};break;case vt:K=Be?L.left:L.right,D.a={x:K,y:L.top},D.b={x:K,y:L.bottom}}return D},Ne.isAdjacentSlice=function(ne,Be,L){var D=ne.a,G=ne.b,K=Be.a,ge=Be.b,de=L?"x":"y",Ke=D[de],wt=G[de],lt=K[de],ut=ge[de],nt=.2*(wt-Ke);return Math.max(0,Math.min(wt,ut)-Math.max(Ke,lt))>=nt},Ne.getPrimaryAxisDistance=function(ne,Be,L){var D=ne.a,G=Be.a,K=L?"y":"x";return Math.abs(G[K]-D[K])},Ne.getSecondaryAxisDistance=function(ne,Be,L){var D=ne.a,G=ne.b,K=Be.a,ge=Be.b,de=L?"x":"y",Ke=D[de],wt=G[de],lt=K[de],ut=ge[de],nt=[];return nt.push(Math.abs(lt-Ke)),nt.push(Math.abs(lt-wt)),nt.push(Math.abs(ut-Ke)),nt.push(Math.abs(ut-wt)),Math.min.apply(Math,nt)},Ne.prototype.sortSiblingsByPriority=function(ne,Be,L,D){var G=this,K=L===Ye||L===Re,ge=Ne.getRefCorners(L,!1,Be);return(0,we.default)(ne,function(de){var Ke=Ne.getRefCorners(L,!0,de.layout),wt=Ne.isAdjacentSlice(ge,Ke,K),lt=wt?Ne.getPrimaryAxisDistance:Ne.getSecondaryAxisDistance,ut=wt?Ne.getSecondaryAxisDistance:Ne.getPrimaryAxisDistance,nt=lt(ge,Ke,K),ht=ut(ge,Ke,K),_t=5*nt+ht,Tt=(_t+1)/(wt?5:1);return G.log("smartNavigate","distance (primary, secondary, total weighted) for ".concat(de.focusKey," relative to ").concat(D," is"),nt,ht,_t),G.log("smartNavigate","priority for ".concat(de.focusKey," relative to ").concat(D," is"),Tt),G.visualDebugger&&(G.visualDebugger.drawPoint(Ke.a.x,Ke.a.y,"yellow",6),G.visualDebugger.drawPoint(Ke.b.x,Ke.b.y,"yellow",6)),Tt})},Ne.prototype.init=function(ne){var Be=ne===void 0?{}:ne,L=Be.debug,D=L!==void 0&&L,G=Be.visualDebug,K=G!==void 0&&G,ge=Be.nativeMode,de=ge!==void 0&&ge,Ke=Be.throttle,wt=Ke===void 0?0:Ke,lt=Be.throttleKeypresses,ut=lt!==void 0&&lt,nt=Be.useGetBoundingClientRect,ht=nt!==void 0&&nt,_t=Be.shouldFocusDOMNode,Tt=_t!==void 0&&_t,Mt=Be.shouldUseNativeEvents,_n=Mt!==void 0&&Mt,rn=Be.rtl,cn=rn!==void 0&&rn;this.enabled||(this.enabled=!0,this.nativeMode=de,this.throttleKeypresses=ut,this.useGetBoundingClientRect=ht,this.shouldFocusDOMNode=Tt&&!de,this.shouldUseNativeEvents=_n,this.writingDirection=cn?ft.default.RTL:ft.default.LTR,this.debug=D,this.nativeMode||(Number.isInteger(wt)&&wt>0&&(this.throttle=wt),this.bindEventHandlers(),K&&(this.visualDebugger=new st.default(this.writingDirection),this.startDrawLayouts())))},Ne.prototype.setThrottle=function(ne){var Be=ne===void 0?{}:ne,L=Be.throttle,D=L===void 0?0:L,G=Be.throttleKeypresses,K=G!==void 0&&G;this.throttleKeypresses=K,this.nativeMode||(this.unbindEventHandlers(),Number.isInteger(D)&&(this.throttle=D),this.bindEventHandlers())},Ne.prototype.startDrawLayouts=function(){var ne=this,Be=function(){requestAnimationFrame(function(){ne.visualDebugger.clearLayouts(),(0,Je.default)(ne.focusableComponents,function(L,D){ne.visualDebugger.drawLayout(L.layout,D,L.parentFocusKey)}),Be()})};Be()},Ne.prototype.destroy=function(){this.enabled&&(this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.focusKey=null,this.parentsHavingFocusedChild=[],this.focusableComponents={},this.paused=!1,this.keyMap=Ht,this.unbindEventHandlers())},Ne.prototype.getEventType=function(ne){return(0,oe.default)(this.getKeyMap(),function(Be){return Be.includes(ne)})},Ne.getKeyCode=function(ne){return ne.keyCode||ne.code},Ne.prototype.bindEventHandlers=function(){var ne=this;typeof window<"u"&&window.addEventListener&&(this.keyDownEventListener=function(Be){if(ne.paused!==!0){ne.debug&&(ne.logIndex+=1);var L=Ne.getKeyCode(Be),D=ne.getEventType(L);if(D){ne.pressedKeys[D]=ne.pressedKeys[D]?ne.pressedKeys[D]+1:1,ne.shouldUseNativeEvents||(Be.preventDefault(),Be.stopPropagation());var G={pressedKeys:ne.pressedKeys};D===ot&&ne.focusKey?ne.onEnterPress(G):ne.onArrowPress(D,G)===!1?(ne.log("keyDownEventListener","default navigation prevented"),ne.visualDebugger&&ne.visualDebugger.clear()):ne.onKeyEvent(Be)}}},this.throttle&&(this.keyDownEventListenerThrottled=(0,qe.default)(this.keyDownEventListener.bind(this),this.throttle,Et)),this.keyUpEventListener=function(Be){var L=Ne.getKeyCode(Be),D=ne.getEventType(L);delete ne.pressedKeys[D],ne.throttle&&!ne.throttleKeypresses&&ne.keyDownEventListenerThrottled.cancel(),D===ot&&ne.focusKey&&ne.onEnterRelease()},window.addEventListener("keyup",this.keyUpEventListener),window.addEventListener("keydown",this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener))},Ne.prototype.unbindEventHandlers=function(){if(typeof window<"u"&&window.removeEventListener){window.removeEventListener("keyup",this.keyUpEventListener),this.keyUpEventListener=null;var ne=this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener;window.removeEventListener("keydown",ne),this.keyDownEventListener=null}},Ne.prototype.onEnterPress=function(ne){var Be=this.focusableComponents[this.focusKey];Be?Be.focusable?Be.onEnterPress&&Be.onEnterPress(ne):this.log("onEnterPress","componentNotFocusable"):this.log("onEnterPress","noComponent")},Ne.prototype.onEnterRelease=function(){var ne=this.focusableComponents[this.focusKey];ne?ne.focusable?ne.onEnterRelease&&ne.onEnterRelease():this.log("onEnterRelease","componentNotFocusable"):this.log("onEnterRelease","noComponent")},Ne.prototype.onArrowPress=function(ne,Be){var L=this.focusableComponents[this.focusKey];if(L)return L&&L.onArrowPress&&L.onArrowPress(ne,Be);this.log("onArrowPress","noComponent")},Ne.prototype.navigateByDirection=function(ne,Be){if(this.paused!==!0&&this.enabled&&!this.nativeMode){var L=[Ye,Re,He,vt];L.includes(ne)?(this.log("navigateByDirection","direction",ne),this.smartNavigate(ne,null,Be)):this.log("navigateByDirection","Invalid direction. You passed: `".concat(ne,"`, but you can use only these: "),L)}},Ne.prototype.onKeyEvent=function(ne){this.visualDebugger&&this.visualDebugger.clear();var Be=Ne.getKeyCode(ne),L=(0,oe.default)(this.getKeyMap(),function(D){return D.includes(Be)});this.smartNavigate(L,null,{event:ne})},Ne.prototype.smartNavigate=function(ne,Be,L){var D=this;if(!this.nativeMode){var G=ne===Ye||ne===Re,K=ne===Ye||(this.writingDirection===ft.default.LTR?ne===vt:ne===He);this.log("smartNavigate","direction",ne),this.log("smartNavigate","fromParentFocusKey",Be),this.log("smartNavigate","this.focusKey",this.focusKey),Be||(0,Je.default)(this.focusableComponents,function(_n){_n.layoutUpdated=!1});var ge=this.focusableComponents[Be||this.focusKey];if(Be||ge){if(this.log("smartNavigate","currentComponent",ge?ge.focusKey:void 0,ge?ge.node:void 0,ge),ge){this.updateLayout(ge.focusKey);var de=ge.parentFocusKey,Ke=ge.focusKey,wt=ge.layout,lt=Ne.getCutoffCoordinate(G,K,!1,wt,this.writingDirection),ut=(0,ce.default)(this.focusableComponents,function(_n){if(_n.parentFocusKey===de&&_n.focusable){D.updateLayout(_n.focusKey);var rn=Ne.getCutoffCoordinate(G,K,!0,_n.layout,D.writingDirection);return G||D.writingDirection===ft.default.LTR?K?rn>=lt:rn<=lt:K?rn<=lt:rn>=lt}return!1});if(this.debug&&(this.log("smartNavigate","currentCutoffCoordinate",lt),this.log("smartNavigate","siblings","".concat(ut.length," elements:"),ut.map(function(_n){return _n.focusKey}).join(", "),ut.map(function(_n){return _n.node}),ut.map(function(_n){return _n}))),this.visualDebugger){var nt=Ne.getRefCorners(ne,!1,wt);this.visualDebugger.drawPoint(nt.a.x,nt.a.y),this.visualDebugger.drawPoint(nt.b.x,nt.b.y)}var ht=this.sortSiblingsByPriority(ut,wt,ne,Ke),_t=(0,me.default)(ht);if(this.log("smartNavigate","nextComponent",_t?_t.focusKey:void 0,_t?_t.node:void 0,_t),_t)this.setFocus(_t.focusKey,L);else{var Tt=this.focusableComponents[de],Mt=Tt!=null&&Tt.isFocusBoundary?Tt.focusBoundaryDirections||[ne]:[];Tt&&Mt.includes(ne)||this.smartNavigate(ne,de,L)}}}else this.setFocus(this.getForcedFocusKey())}},Ne.prototype.saveLastFocusedChildKey=function(ne,Be){ne&&(this.log("saveLastFocusedChildKey","".concat(ne.focusKey," lastFocusedChildKey set"),Be),ne.lastFocusedChildKey=Be)},Ne.prototype.log=function(ne,Be){for(var L=[],D=2;D<arguments.length;D++)L[D-2]=arguments[D];this.debug&&console.log.apply(console,Q(["%c".concat(ne,"%c").concat(Be),"background: ".concat(Bt[this.logIndex%Bt.length],"; color: black; padding: 1px 5px;"),"background: #333; color: #BADA55; padding: 1px 5px;"],L,!1))},Ne.prototype.getCurrentFocusKey=function(){return this.focusKey},Ne.prototype.getForcedFocusKey=function(){var ne,Be=(0,ce.default)(this.focusableComponents,function(D){return D.focusable&&D.forceFocus}),L=this.sortSiblingsByPriority(Be,{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:null},"down",M.ROOT_FOCUS_KEY);return(ne=(0,me.default)(L))===null||ne===void 0?void 0:ne.focusKey},Ne.prototype.getNextFocusKey=function(ne){var Be=this,L=this.focusableComponents[ne];if(!L||this.nativeMode)return ne;var D=(0,ce.default)(this.focusableComponents,function(de){return de.parentFocusKey===ne&&de.focusable});if(D.length>0){var G=L.lastFocusedChildKey,K=L.preferredChildFocusKey;if(this.log("getNextFocusKey","lastFocusedChildKey is",G),this.log("getNextFocusKey","preferredChildFocusKey is",K),G&&L.saveLastFocusedChild&&this.isParticipatingFocusableComponent(G))return this.log("getNextFocusKey","lastFocusedChildKey will be focused",G),this.getNextFocusKey(G);if(K&&this.isParticipatingFocusableComponent(K))return this.log("getNextFocusKey","preferredChildFocusKey will be focused",K),this.getNextFocusKey(K);D.forEach(function(de){return Be.updateLayout(de.focusKey)});var ge=function(de,Ke){var wt=Ke===ft.default.LTR?function(ut){var nt=ut.layout;return Math.abs(nt.left)+Math.abs(nt.top)}:function(ut){var nt=ut.layout;return Math.abs(window.innerWidth-nt.right)+Math.abs(nt.top)},lt=(0,we.default)(de,wt);return(0,me.default)(lt)}(D,this.writingDirection).focusKey;return this.log("getNextFocusKey","childKey will be focused",ge),this.getNextFocusKey(ge)}return this.log("getNextFocusKey","targetFocusKey",ne),ne},Ne.prototype.addFocusable=function(ne){var Be=ne.focusKey,L=ne.node,D=ne.parentFocusKey,G=ne.onEnterPress,K=ne.onEnterRelease,ge=ne.onArrowPress,de=ne.onFocus,Ke=ne.onBlur,wt=ne.saveLastFocusedChild,lt=ne.trackChildren,ut=ne.onUpdateFocus,nt=ne.onUpdateHasFocusedChild,ht=ne.preferredChildFocusKey,_t=ne.autoRestoreFocus,Tt=ne.forceFocus,Mt=ne.focusable,_n=ne.isFocusBoundary,rn=ne.focusBoundaryDirections;if(this.focusableComponents[Be]={focusKey:Be,node:L,parentFocusKey:D,onEnterPress:G,onEnterRelease:K,onArrowPress:ge,onFocus:de,onBlur:Ke,onUpdateFocus:ut,onUpdateHasFocusedChild:nt,saveLastFocusedChild:wt,trackChildren:lt,preferredChildFocusKey:ht,focusable:Mt,isFocusBoundary:_n,focusBoundaryDirections:rn,autoRestoreFocus:_t,forceFocus:Tt,lastFocusedChildKey:null,layout:{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:L},layoutUpdated:!1},L||console.warn('Component added without a node reference. This will result in its coordinates being empty and may cause lost focus. Check the "ref" passed to "useFocusable": ',this.focusableComponents[Be]),!this.nativeMode){this.updateLayout(Be),this.log("addFocusable","Component added: ",this.focusableComponents[Be]),Be===this.focusKey&&this.setFocus(ht||Be);for(var cn=this.focusableComponents[this.focusKey];cn;){if(cn.parentFocusKey===Be){this.updateParentsHasFocusedChild(this.focusKey,{}),this.updateParentsLastFocusedChild(this.focusKey);break}cn=this.focusableComponents[cn.parentFocusKey]}}},Ne.prototype.removeFocusable=function(ne){var Be=ne.focusKey,L=this.focusableComponents[Be];if(L){var D=L.parentFocusKey;(0,L.onUpdateFocus)(!1),this.log("removeFocusable","Component removed: ",L),delete this.focusableComponents[Be];var G=this.parentsHavingFocusedChild.includes(Be);this.parentsHavingFocusedChild=this.parentsHavingFocusedChild.filter(function(de){return de!==Be});var K=this.focusableComponents[D],ge=Be===this.focusKey;if(K&&K.lastFocusedChildKey===Be&&(K.lastFocusedChildKey=null),this.nativeMode)return;(ge||G)&&K&&K.autoRestoreFocus&&(this.log("removeFocusable","Component removed: ",ge?"Leaf component":"Container component","Auto restoring focus to: ",D),this.setFocusDebounced(D))}},Ne.prototype.getNodeLayoutByFocusKey=function(ne){var Be=this.focusableComponents[ne];return Be?(this.updateLayout(Be.focusKey),Be.layout):null},Ne.prototype.setCurrentFocusedKey=function(ne,Be){if(this.isFocusableComponent(this.focusKey)&&ne!==this.focusKey){var L=this.focusableComponents[this.focusKey];L.onUpdateFocus(!1),L.onBlur(this.getNodeLayoutByFocusKey(this.focusKey),Be),this.log("setCurrentFocusedKey","onBlur",L)}if(this.focusKey=ne,this.isFocusableComponent(this.focusKey)){var D=this.focusableComponents[this.focusKey];this.shouldFocusDOMNode&&D.node&&D.node.focus(),D.onUpdateFocus(!0),D.onFocus(this.getNodeLayoutByFocusKey(this.focusKey),Be),this.log("setCurrentFocusedKey","onFocus",D)}},Ne.prototype.updateParentsHasFocusedChild=function(ne,Be){for(var L=this,D=[],G=this.focusableComponents[ne];G;){var K=G.parentFocusKey,ge=this.focusableComponents[K];if(ge){var de=ge.focusKey;D.push(de)}G=ge}var Ke=(0,X.default)(this.parentsHavingFocusedChild,D),wt=(0,X.default)(D,this.parentsHavingFocusedChild);(0,Ce.default)(Ke,function(lt){var ut=L.focusableComponents[lt];ut&&ut.trackChildren&&ut.onUpdateHasFocusedChild(!1),L.onIntermediateNodeBecameBlurred(lt,Be)}),(0,Ce.default)(wt,function(lt){var ut=L.focusableComponents[lt];ut&&ut.trackChildren&&ut.onUpdateHasFocusedChild(!0),L.onIntermediateNodeBecameFocused(lt,Be)}),this.parentsHavingFocusedChild=D},Ne.prototype.updateParentsLastFocusedChild=function(ne){for(var Be=this.focusableComponents[ne];Be;){var L=Be.parentFocusKey,D=this.focusableComponents[L];D&&this.saveLastFocusedChildKey(D,Be.focusKey),Be=D}},Ne.prototype.getKeyMap=function(){return this.keyMap},Ne.prototype.setKeyMap=function(ne){this.keyMap=x(x({},this.getKeyMap()),function(Be){var L={};return Object.entries(Be).forEach(function(D){var G=D[0],K=D[1];L[G]=Array.isArray(K)?K:[K]}),L}(ne))},Ne.prototype.isFocusableComponent=function(ne){return!!this.focusableComponents[ne]},Ne.prototype.isParticipatingFocusableComponent=function(ne){return this.isFocusableComponent(ne)&&this.focusableComponents[ne].focusable},Ne.prototype.onIntermediateNodeBecameFocused=function(ne,Be){this.isParticipatingFocusableComponent(ne)&&this.focusableComponents[ne].onFocus(this.getNodeLayoutByFocusKey(ne),Be)},Ne.prototype.onIntermediateNodeBecameBlurred=function(ne,Be){this.isParticipatingFocusableComponent(ne)&&this.focusableComponents[ne].onBlur(this.getNodeLayoutByFocusKey(ne),Be)},Ne.prototype.pause=function(){this.paused=!0},Ne.prototype.resume=function(){this.paused=!1},Ne.prototype.setFocus=function(ne,Be){if(Be===void 0&&(Be={}),this.setFocusDebounced.cancel(),this.enabled&&!this.nativeMode){this.log("setFocus","focusKey",ne),ne&&ne!==M.ROOT_FOCUS_KEY||(ne=this.getForcedFocusKey());var L=this.getNextFocusKey(ne);this.log("setFocus","newFocusKey",L),this.setCurrentFocusedKey(L,Be),this.updateParentsHasFocusedChild(L,Be),this.updateParentsLastFocusedChild(L)}},Ne.prototype.updateAllLayouts=function(){var ne=this;this.enabled&&!this.nativeMode&&(0,Je.default)(this.focusableComponents,function(Be,L){ne.updateLayout(L)})},Ne.prototype.updateLayout=function(ne){var Be=this.focusableComponents[ne];if(Be&&!this.nativeMode&&!Be.layoutUpdated){var L=Be.node,D=this.useGetBoundingClientRect?(0,be.getBoundingClientRect)(L):(0,be.default)(L);Be.layout=x(x({},D),{node:L})}},Ne.prototype.updateFocusable=function(ne,Be){var L=Be.node,D=Be.preferredChildFocusKey,G=Be.focusable,K=Be.isFocusBoundary,ge=Be.focusBoundaryDirections,de=Be.onEnterPress,Ke=Be.onEnterRelease,wt=Be.onArrowPress,lt=Be.onFocus,ut=Be.onBlur;if(!this.nativeMode){var nt=this.focusableComponents[ne];nt&&(nt.preferredChildFocusKey=D,nt.focusable=G,nt.isFocusBoundary=K,nt.focusBoundaryDirections=ge,nt.onEnterPress=de,nt.onEnterRelease=Ke,nt.onArrowPress=wt,nt.onFocus=lt,nt.onBlur=ut,L&&(nt.node=L))}},Ne.prototype.isNativeMode=function(){return this.nativeMode},Ne.prototype.doesFocusableExist=function(ne){return!!this.focusableComponents[ne]},Ne}();M.SpatialNavigation=new Dt,M.init=M.SpatialNavigation.init,M.setThrottle=M.SpatialNavigation.setThrottle,M.destroy=M.SpatialNavigation.destroy,M.setKeyMap=M.SpatialNavigation.setKeyMap,M.setFocus=M.SpatialNavigation.setFocus,M.navigateByDirection=M.SpatialNavigation.navigateByDirection,M.pause=M.SpatialNavigation.pause,M.resume=M.SpatialNavigation.resume,M.updateAllLayouts=M.SpatialNavigation.updateAllLayouts,M.getCurrentFocusKey=M.SpatialNavigation.getCurrentFocusKey,M.doesFocusableExist=M.SpatialNavigation.doesFocusableExist},35:function(U,M,_){var I=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(M,"__esModule",{value:!0});var x=I(_(119)),Z=typeof window<"u"&&window.document,Y=Z?window.innerWidth:0,$=Z?window.innerHeight:0,Q=function(){function se(R){Z&&(this.debugCtx=se.createCanvas("sn-debug","1010",R),this.layoutsCtx=se.createCanvas("sn-layouts","1000",R),this.writingDirection=R)}return se.createCanvas=function(R,X,ce){var oe=document.querySelector("#".concat(R))||document.createElement("canvas");oe.setAttribute("id",R),oe.setAttribute("dir",ce===x.default.LTR?"ltr":"rtl");var me=oe.getContext("2d");return oe.style.zIndex=X,oe.style.position="fixed",oe.style.top="0",oe.style.left="0",document.body.appendChild(oe),oe.width=Y,oe.height=$,me},se.prototype.clear=function(){Z&&this.debugCtx.clearRect(0,0,Y,$)},se.prototype.clearLayouts=function(){Z&&this.layoutsCtx.clearRect(0,0,Y,$)},se.prototype.drawLayout=function(R,X,ce){if(Z){this.layoutsCtx.strokeStyle="green",this.layoutsCtx.strokeRect(R.left,R.top,R.width,R.height),this.layoutsCtx.font="8px monospace",this.layoutsCtx.fillStyle="red";var oe=this.writingDirection===x.default.LTR?"left":"right",me=R[oe];this.layoutsCtx.fillText(X,me,R.top+10),this.layoutsCtx.fillText(ce,me,R.top+25),this.layoutsCtx.fillText("".concat(oe,": ").concat(me),me,R.top+40),this.layoutsCtx.fillText("top: ".concat(R.top),me,R.top+55)}},se.prototype.drawPoint=function(R,X,ce,oe){ce===void 0&&(ce="blue"),oe===void 0&&(oe=10),Z&&(this.debugCtx.strokeStyle=ce,this.debugCtx.lineWidth=3,this.debugCtx.strokeRect(R-oe/2,X-oe/2,oe,oe))},se}();M.default=Q},119:function(U,M){var _;Object.defineProperty(M,"__esModule",{value:!0}),function(I){I[I.LTR=0]="LTR",I[I.RTL=1]="RTL"}(_||(_={})),M.default=_},607:function(U,M,_){var I=this&&this.__createBinding||(Object.create?function(Z,Y,$,Q){Q===void 0&&(Q=$);var se=Object.getOwnPropertyDescriptor(Y,$);se&&!("get"in se?!Y.__esModule:se.writable||se.configurable)||(se={enumerable:!0,get:function(){return Y[$]}}),Object.defineProperty(Z,Q,se)}:function(Z,Y,$,Q){Q===void 0&&(Q=$),Z[Q]=Y[$]}),x=this&&this.__exportStar||function(Z,Y){for(var $ in Z)$==="default"||Object.prototype.hasOwnProperty.call(Y,$)||I(Y,Z,$)};Object.defineProperty(M,"__esModule",{value:!0}),x(_(79),M),x(_(445),M),x(_(654),M)},964:function(U,M){Object.defineProperty(M,"__esModule",{value:!0}),M.getBoundingClientRect=void 0;var _=function(I){for(var x=I.offsetParent,Z=I.offsetHeight,Y=I.offsetWidth,$=I.offsetLeft,Q=I.offsetTop;x&&x.nodeType===1;)$+=x.offsetLeft-x.scrollLeft,Q+=x.offsetTop-x.scrollTop,x=x.offsetParent;return{height:Z,left:$,top:Q,width:Y}};M.default=function(I){var x=I&&I.parentElement;if(I&&x){var Z=_(x),Y=_(I),$=Y.height,Q=Y.left,se=Y.top,R=Y.width;return{x:Q-Z.left,y:se-Z.top,width:R,height:$,left:Q,top:se,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}},M.getBoundingClientRect=function(I){if(I&&I.getBoundingClientRect){var x=I.getBoundingClientRect();return{x:x.x,y:x.y,width:x.width,height:x.height,left:x.left,top:x.top,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}}},445:function(U,M,_){Object.defineProperty(M,"__esModule",{value:!0}),M.useFocusContext=M.FocusContext=void 0;var I=_(156),x=_(654);M.FocusContext=(0,I.createContext)(x.ROOT_FOCUS_KEY),M.FocusContext.displayName="FocusContext",M.useFocusContext=function(){return(0,I.useContext)(M.FocusContext)}},79:function(U,M,_){var I=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(M,"__esModule",{value:!0}),M.useFocusable=void 0;var x=_(156),Z=I(_(604)),Y=I(_(461)),$=_(654),Q=_(445);M.useFocusable=function(se){var R=se===void 0?{}:se,X=R.focusable,ce=X===void 0||X,oe=R.saveLastFocusedChild,me=oe===void 0||oe,Ce=R.trackChildren,Je=Ce!==void 0&&Ce,we=R.autoRestoreFocus,qe=we===void 0||we,st=R.forceFocus,ft=st!==void 0&&st,be=R.isFocusBoundary,He=be!==void 0&&be,vt=R.focusBoundaryDirections,Re=R.focusKey,Ye=R.preferredChildFocusKey,ot=R.onEnterPress,Ht=ot===void 0?Z.default:ot,Bt=R.onEnterRelease,Et=Bt===void 0?Z.default:Bt,Dt=R.onArrowPress,Ne=Dt===void 0?function(){return!0}:Dt,ne=R.onFocus,Be=ne===void 0?Z.default:ne,L=R.onBlur,D=L===void 0?Z.default:L,G=R.extraProps,K=(0,x.useCallback)(function(Ft){Ht(G,Ft)},[Ht,G]),ge=(0,x.useCallback)(function(){Et(G)},[Et,G]),de=(0,x.useCallback)(function(Ft,Gn){return Ne(Ft,G,Gn)},[G,Ne]),Ke=(0,x.useCallback)(function(Ft,Gn){Be(Ft,G,Gn)},[G,Be]),wt=(0,x.useCallback)(function(Ft,Gn){D(Ft,G,Gn)},[G,D]),lt=(0,x.useRef)(null),ut=(0,x.useState)(!1),nt=ut[0],ht=ut[1],_t=(0,x.useState)(!1),Tt=_t[0],Mt=_t[1],_n=(0,Q.useFocusContext)(),rn=(0,x.useMemo)(function(){return Re||(0,Y.default)("sn:focusable-item-")},[Re]),cn=(0,x.useCallback)(function(Ft){Ft===void 0&&(Ft={}),$.SpatialNavigation.setFocus(rn,Ft)},[rn]);return(0,x.useEffect)(function(){var Ft=lt.current;return $.SpatialNavigation.addFocusable({focusKey:rn,node:Ft,parentFocusKey:_n,preferredChildFocusKey:Ye,onEnterPress:K,onEnterRelease:ge,onArrowPress:de,onFocus:Ke,onBlur:wt,onUpdateFocus:function(Gn){return Gn===void 0&&(Gn=!1),ht(Gn)},onUpdateHasFocusedChild:function(Gn){return Gn===void 0&&(Gn=!1),Mt(Gn)},saveLastFocusedChild:me,trackChildren:Je,isFocusBoundary:He,focusBoundaryDirections:vt,autoRestoreFocus:qe,forceFocus:ft,focusable:ce}),function(){$.SpatialNavigation.removeFocusable({focusKey:rn})}},[]),(0,x.useEffect)(function(){var Ft=lt.current;$.SpatialNavigation.updateFocusable(rn,{node:Ft,preferredChildFocusKey:Ye,focusable:ce,isFocusBoundary:He,focusBoundaryDirections:vt,onEnterPress:K,onEnterRelease:ge,onArrowPress:de,onFocus:Ke,onBlur:wt})},[rn,Ye,ce,He,vt,K,ge,de,Ke,wt]),{ref:lt,focusSelf:cn,focused:nt,hasFocusedChild:Tt,focusKey:rn}}},150:function(U){U.exports=l},117:function(U){U.exports=d},747:function(U){U.exports=g},23:function(U){U.exports=S},842:function(U){U.exports=b},682:function(U){U.exports=p},784:function(U){U.exports=w},604:function(U){U.exports=F},432:function(U){U.exports=C},67:function(U){U.exports=E},461:function(U){U.exports=y},156:function(U){U.exports=P}},T={};return function U(M){var _=T[M];if(_!==void 0)return _.exports;var I=T[M]={exports:{}};return m[M].call(I.exports,I,I.exports,U),I.exports}(607)}()})})(jU);var sB=jU.exports;function FK(i){return{all:i=i||new Map,on:function(o,l){var d=i.get(o);d?d.push(l):i.set(o,[l])},off:function(o,l){var d=i.get(o);d&&(l?d.splice(d.indexOf(l)>>>0,1):i.set(o,[]))},emit:function(o,l){var d=i.get(o);d&&d.slice().map(function(g){g(l)}),(d=i.get("*"))&&d.slice().map(function(g){g(o,l)})}}}class df{constructor(){this.emitter=FK()}emit(o,l){this.emitter.emit(o,l)}on(o,l){var d;(d=this.emitter)==null||d.on(o,l)}once(o,l){var g;const d=S=>{var b;(b=this.emitter)==null||b.off(o,d),l(S)};(g=this.emitter)==null||g.on(o,d)}off(o,l){var d;(d=this.emitter)==null||d.off(o,l)}onAny(o){this.emitter.on("*",o)}offAny(o){this.emitter.off("*",o)}clearAllListeners(){this.emitter.all.clear()}destroy(){this.clearAllListeners()}}var Wc=256,uB=[],I3=256,r0;for(;Wc--;)uB[Wc]=(Wc+256).toString(16).substring(1);function UK(i){var o=0,l=11;if(!r0||Wc+l>I3*2)for(r0="",Wc=0;o<I3;o++)r0+=uB[Math.random()*256|0];return r0.substring(Wc,Wc+++l)}const b3={DEVICE_ID:"deviceId"};function xg(){const i=localStorage.getItem(b3.DEVICE_ID);if(i)return i;const o=UK();return localStorage.setItem(b3.DEVICE_ID,o),o}function BK(i){i=[...i].sort((l,d)=>l-d);const o=Math.floor(i.length/2);return i.length%2?i[o]:(i[o-1]+i[o])/2}var ls=(i=>(i.NEGOTIATE="negotiate",i.NEGOTIATE_TV="negotiate-tv",i.EVENT_STATUS="eventStatus",i.EVENT_META="eventMeta",i.GENERATE="generate",i.CONTENTFUL="contentful",i))(ls||{});class ug extends Error{constructor(o,l,d,g){super(),this._name=o,this._title=l,this._code=g,this._message=d}get toString(){var o,l;return"".concat(this._name.toUpperCase()," ERROR - ").concat((o=this._title.toUpperCase())!=null?o:""," ").concat((l=this._code)!=null?l:"",": ").concat(this.message)}get name(){return this._name}set name(o){this._name=o}get message(){return this._message}set message(o){this._message=o}get title(){return this._title}set title(o){this._title=o}get code(){return this._code}set code(o){this._code=o}}const mh=xg(),jK="https://staging-api.gigset.io",W0="new",ZK="68HZuoF2PhOm4zHAJzDcwGnqUeph2JA_G9M7vW8-mbw",qK="v203lmr0b15v",KC="setup-device-id",GK="_appContainer_1isul_1",HK="_pageContainer_1isul_53",VK="_input_1isul_67",KK="_ellipsis_1isul_1",zK={appContainer:GK,pageContainer:HK,input:VK,ellipsis:KK};class Qc extends Error{constructor(o,l){const d=new.target.prototype;super("".concat(o,": Status code '").concat(l,"'")),this.statusCode=l,this.__proto__=d}}class zC extends Error{constructor(o="A timeout occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class fu extends Error{constructor(o="An abort occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class YK extends Error{constructor(o,l){const d=new.target.prototype;super(o),this.transport=l,this.errorType="UnsupportedTransportError",this.__proto__=d}}class WK extends Error{constructor(o,l){const d=new.target.prototype;super(o),this.transport=l,this.errorType="DisabledTransportError",this.__proto__=d}}class $K extends Error{constructor(o,l){const d=new.target.prototype;super(o),this.transport=l,this.errorType="FailedToStartTransportError",this.__proto__=d}}class C3 extends Error{constructor(o){const l=new.target.prototype;super(o),this.errorType="FailedToNegotiateWithServerError",this.__proto__=l}}class XK extends Error{constructor(o,l){const d=new.target.prototype;super(o),this.innerErrors=l,this.__proto__=d}}class lB{constructor(o,l,d){this.statusCode=o,this.statusText=l,this.content=d}}class AE{get(o,l){return this.send({...l,method:"GET",url:o})}post(o,l){return this.send({...l,method:"POST",url:o})}delete(o,l){return this.send({...l,method:"DELETE",url:o})}getCookieString(o){return""}}var Rn;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Information=2]="Information",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.None=6]="None"})(Rn||(Rn={}));class zg{constructor(){}log(o,l){}}zg.instance=new zg;const QK="8.0.0";class So{static isRequired(o,l){if(o==null)throw new Error("The '".concat(l,"' argument is required."))}static isNotEmpty(o,l){if(!o||o.match(/^\s*$/))throw new Error("The '".concat(l,"' argument should not be empty."))}static isIn(o,l,d){if(!(o in l))throw new Error("Unknown ".concat(d," value: ").concat(o,"."))}}class Ji{static get isBrowser(){return!Ji.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Ji.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Ji.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Yg(i,o){let l="";return af(i)?(l="Binary data of length ".concat(i.byteLength),o&&(l+=". Content: '".concat(JK(i),"'"))):typeof i=="string"&&(l="String data of length ".concat(i.length),o&&(l+=". Content: '".concat(i,"'"))),l}function JK(i){const o=new Uint8Array(i);let l="";return o.forEach(d=>{const g=d<16?"0":"";l+="0x".concat(g).concat(d.toString(16)," ")}),l.substr(0,l.length-1)}function af(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}async function cB(i,o,l,d,g,S){const b={},[p,w]=vh();b[p]=w,i.log(Rn.Trace,"(".concat(o," transport) sending data. ").concat(Yg(g,S.logMessageContent),"."));const F=af(g)?"arraybuffer":"text",C=await l.post(d,{content:g,headers:{...b,...S.headers},responseType:F,timeout:S.timeout,withCredentials:S.withCredentials});i.log(Rn.Trace,"(".concat(o," transport) request complete. Response status: ").concat(C.statusCode,"."))}function ez(i){return i===void 0?new $0(Rn.Information):i===null?zg.instance:i.log!==void 0?i:new $0(i)}class tz{constructor(o,l){this._subject=o,this._observer=l}dispose(){const o=this._subject.observers.indexOf(this._observer);o>-1&&this._subject.observers.splice(o,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(l=>{})}}class $0{constructor(o){this._minLevel=o,this.out=console}log(o,l){if(o>=this._minLevel){const d="[".concat(new Date().toISOString(),"] ").concat(Rn[o],": ").concat(l);switch(o){case Rn.Critical:case Rn.Error:this.out.error(d);break;case Rn.Warning:this.out.warn(d);break;case Rn.Information:this.out.info(d);break;default:this.out.log(d);break}}}}function vh(){let i="X-SignalR-User-Agent";return Ji.isNode&&(i="User-Agent"),[i,nz(QK,rz(),oz(),iz())]}function nz(i,o,l,d){let g="Microsoft SignalR/";const S=i.split(".");return g+="".concat(S[0],".").concat(S[1]),g+=" (".concat(i,"; "),o&&o!==""?g+="".concat(o,"; "):g+="Unknown OS; ",g+="".concat(l),d?g+="; ".concat(d):g+="; Unknown Runtime Version",g+=")",g}function rz(){if(Ji.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function iz(){if(Ji.isNode)return process.versions.node}function oz(){return Ji.isNode?"NodeJS":"Browser"}function R3(i){return i.stack?i.stack:i.message?i.message:"".concat(i)}function az(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}function sz(i){return typeof fetch>"u"||Ji.isNode?(i._jar=new(require("tough-cookie")).CookieJar,typeof fetch>"u"?i._fetchType=require("node-fetch"):i._fetchType=fetch,i._fetchType=require("fetch-cookie")(i._fetchType,i._jar),!0):!1}function uz(i){return typeof AbortController>"u"?(i._abortControllerType=require("abort-controller"),!0):!1}function lz(){return require("ws")}function cz(){return require("eventsource")}class fz extends AE{constructor(o){super(),this._logger=o;const l={_fetchType:void 0,_jar:void 0};sz(l)?(this._fetchType=l._fetchType,this._jar=l._jar):this._fetchType=fetch.bind(az()),this._abortControllerType=AbortController;const d={_abortControllerType:this._abortControllerType};uz(d)&&(this._abortControllerType=d._abortControllerType)}async send(o){if(o.abortSignal&&o.abortSignal.aborted)throw new fu;if(!o.method)throw new Error("No method defined.");if(!o.url)throw new Error("No url defined.");const l=new this._abortControllerType;let d;o.abortSignal&&(o.abortSignal.onabort=()=>{l.abort(),d=new fu});let g=null;if(o.timeout){const w=o.timeout;g=setTimeout(()=>{l.abort(),this._logger.log(Rn.Warning,"Timeout from HTTP request."),d=new zC},w)}o.content===""&&(o.content=void 0),o.content&&(o.headers=o.headers||{},af(o.content)?o.headers["Content-Type"]="application/octet-stream":o.headers["Content-Type"]="text/plain;charset=UTF-8");let S;try{S=await this._fetchType(o.url,{body:o.content,cache:"no-cache",credentials:o.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...o.headers},method:o.method,mode:"cors",redirect:"follow",signal:l.signal})}catch(w){throw d||(this._logger.log(Rn.Warning,"Error from HTTP request. ".concat(w,".")),w)}finally{g&&clearTimeout(g),o.abortSignal&&(o.abortSignal.onabort=null)}if(!S.ok){const w=await x3(S,"text");throw new Qc(w||S.statusText,S.status)}const p=await x3(S,o.responseType);return new lB(S.status,S.statusText,p)}getCookieString(o){let l="";return Ji.isNode&&this._jar&&this._jar.getCookies(o,(d,g)=>l=g.join("; ")),l}}function x3(i,o){let l;switch(o){case"arraybuffer":l=i.arrayBuffer();break;case"text":l=i.text();break;case"blob":case"document":case"json":throw new Error("".concat(o," is not supported."));default:l=i.text();break}return l}class dz extends AE{constructor(o){super(),this._logger=o}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new fu):o.method?o.url?new Promise((l,d)=>{const g=new XMLHttpRequest;g.open(o.method,o.url,!0),g.withCredentials=o.withCredentials===void 0?!0:o.withCredentials,g.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.content===""&&(o.content=void 0),o.content&&(af(o.content)?g.setRequestHeader("Content-Type","application/octet-stream"):g.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const S=o.headers;S&&Object.keys(S).forEach(b=>{g.setRequestHeader(b,S[b])}),o.responseType&&(g.responseType=o.responseType),o.abortSignal&&(o.abortSignal.onabort=()=>{g.abort(),d(new fu)}),o.timeout&&(g.timeout=o.timeout),g.onload=()=>{o.abortSignal&&(o.abortSignal.onabort=null),g.status>=200&&g.status<300?l(new lB(g.status,g.statusText,g.response||g.responseText)):d(new Qc(g.response||g.responseText||g.statusText,g.status))},g.onerror=()=>{this._logger.log(Rn.Warning,"Error from HTTP request. ".concat(g.status,": ").concat(g.statusText,".")),d(new Qc(g.statusText,g.status))},g.ontimeout=()=>{this._logger.log(Rn.Warning,"Timeout from HTTP request."),d(new zC)},g.send(o.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class hz extends AE{constructor(o){if(super(),typeof fetch<"u"||Ji.isNode)this._httpClient=new fz(o);else if(typeof XMLHttpRequest<"u")this._httpClient=new dz(o);else throw new Error("No usable HttpClient found.")}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new fu):o.method?o.url?this._httpClient.send(o):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(o){return this._httpClient.getCookieString(o)}}class fs{static write(o){return"".concat(o).concat(fs.RecordSeparator)}static parse(o){if(o[o.length-1]!==fs.RecordSeparator)throw new Error("Message is incomplete.");const l=o.split(fs.RecordSeparator);return l.pop(),l}}fs.RecordSeparatorCode=30;fs.RecordSeparator=String.fromCharCode(fs.RecordSeparatorCode);class pz{writeHandshakeRequest(o){return fs.write(JSON.stringify(o))}parseHandshakeResponse(o){let l,d;if(af(o)){const p=new Uint8Array(o),w=p.indexOf(fs.RecordSeparatorCode);if(w===-1)throw new Error("Message is incomplete.");const F=w+1;l=String.fromCharCode.apply(null,Array.prototype.slice.call(p.slice(0,F))),d=p.byteLength>F?p.slice(F).buffer:null}else{const p=o,w=p.indexOf(fs.RecordSeparator);if(w===-1)throw new Error("Message is incomplete.");const F=w+1;l=p.substring(0,F),d=p.length>F?p.substring(F):null}const g=fs.parse(l),S=JSON.parse(g[0]);if(S.type)throw new Error("Expected a handshake response from the server.");return[d,S]}}var Dr;(function(i){i[i.Invocation=1]="Invocation",i[i.StreamItem=2]="StreamItem",i[i.Completion=3]="Completion",i[i.StreamInvocation=4]="StreamInvocation",i[i.CancelInvocation=5]="CancelInvocation",i[i.Ping=6]="Ping",i[i.Close=7]="Close",i[i.Ack=8]="Ack",i[i.Sequence=9]="Sequence"})(Dr||(Dr={}));class gz{constructor(){this.observers=[]}next(o){for(const l of this.observers)l.next(o)}error(o){for(const l of this.observers)l.error&&l.error(o)}complete(){for(const o of this.observers)o.complete&&o.complete()}subscribe(o){return this.observers.push(o),new tz(this,o)}}class mz{constructor(o,l,d){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=o,this._connection=l,this._bufferSize=d}async _send(o){const l=this._protocol.writeMessage(o);let d=Promise.resolve();if(this._isInvocationMessage(o)){this._totalMessageCount++;let g=()=>{},S=()=>{};af(l)?this._bufferedByteCount+=l.byteLength:this._bufferedByteCount+=l.length,this._bufferedByteCount>=this._bufferSize&&(d=new Promise((b,p)=>{g=b,S=p})),this._messages.push(new vz(l,this._totalMessageCount,g,S))}try{this._reconnectInProgress||await this._connection.send(l)}catch(g){this._disconnected()}await d}_ack(o){let l=-1;for(let d=0;d<this._messages.length;d++){const g=this._messages[d];if(g._id<=o.sequenceId)l=d,af(g._message)?this._bufferedByteCount-=g._message.byteLength:this._bufferedByteCount-=g._message.length,g._resolver();else if(this._bufferedByteCount<this._bufferSize)g._resolver();else break}l!==-1&&(this._messages=this._messages.slice(l+1))}_shouldProcessMessage(o){if(this._waitForSequenceMessage)return o.type!==Dr.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(o))return!0;const l=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,l<=this._latestReceivedSequenceId?(l===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=l,this._ackTimer(),!0)}_resetSequence(o){if(o.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=o.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const o=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Dr.Sequence,sequenceId:o}));const l=this._messages;for(const d of l)await this._connection.send(d._message);this._reconnectInProgress=!1}_dispose(o){o!=null||(o=new Error("Unable to reconnect to server."));for(const l of this._messages)l._rejector(o)}_isInvocationMessage(o){switch(o.type){case Dr.Invocation:case Dr.StreamItem:case Dr.Completion:case Dr.StreamInvocation:case Dr.CancelInvocation:return!0;case Dr.Close:case Dr.Sequence:case Dr.Ping:case Dr.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Dr.Ack,sequenceId:this._latestReceivedSequenceId}))}catch(o){}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class vz{constructor(o,l,d,g){this._message=o,this._id=l,this._resolver=d,this._rejector=g}}const yz=30*1e3,Ez=15*1e3,_z=1e5;var qi;(function(i){i.Disconnected="Disconnected",i.Connecting="Connecting",i.Connected="Connected",i.Disconnecting="Disconnecting",i.Reconnecting="Reconnecting"})(qi||(qi={}));class YC{static create(o,l,d,g,S,b,p){return new YC(o,l,d,g,S,b,p)}constructor(o,l,d,g,S,b,p){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Rn.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},So.isRequired(o,"connection"),So.isRequired(l,"logger"),So.isRequired(d,"protocol"),this.serverTimeoutInMilliseconds=S!=null?S:yz,this.keepAliveIntervalInMilliseconds=b!=null?b:Ez,this._statefulReconnectBufferSize=p!=null?p:_z,this._logger=l,this._protocol=d,this.connection=o,this._reconnectPolicy=g,this._handshakeProtocol=new pz,this.connection.onreceive=w=>this._processIncomingData(w),this.connection.onclose=w=>this._connectionClosed(w),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=qi.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Dr.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(o){if(this._connectionState!==qi.Disconnected&&this._connectionState!==qi.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!o)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=o}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==qi.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=qi.Connecting,this._logger.log(Rn.Debug,"Starting HubConnection.");try{await this._startInternal(),Ji.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=qi.Connected,this._connectionStarted=!0,this._logger.log(Rn.Debug,"HubConnection connected successfully.")}catch(o){return this._connectionState=qi.Disconnected,this._logger.log(Rn.Debug,"HubConnection failed to start successfully because of error '".concat(o,"'.")),Promise.reject(o)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const o=new Promise((l,d)=>{this._handshakeResolver=l,this._handshakeRejecter=d});await this.connection.start(this._protocol.transferFormat);try{let l=this._protocol.version;this.connection.features.reconnect||(l=1);const d={protocol:this._protocol.name,version:l};if(this._logger.log(Rn.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(d)),this._logger.log(Rn.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await o,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new mz(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(l){throw this._logger.log(Rn.Debug,"Hub handshake failed with error '".concat(l,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(l),l}}async stop(){const o=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await o}catch(l){}}_stopInternal(o){if(this._connectionState===qi.Disconnected)return this._logger.log(Rn.Debug,"Call to HubConnection.stop(".concat(o,") ignored because it is already in the disconnected state.")),Promise.resolve();if(this._connectionState===qi.Disconnecting)return this._logger.log(Rn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;const l=this._connectionState;return this._connectionState=qi.Disconnecting,this._logger.log(Rn.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Rn.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(l===qi.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=o||new fu("The connection was stopped before the hub handshake could complete."),this.connection.stop(o))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch(o){}}stream(o,...l){const[d,g]=this._replaceStreamingParams(l),S=this._createStreamInvocation(o,l,g);let b;const p=new gz;return p.cancelCallback=()=>{const w=this._createCancelInvocation(S.invocationId);return delete this._callbacks[S.invocationId],b.then(()=>this._sendWithProtocol(w))},this._callbacks[S.invocationId]=(w,F)=>{if(F){p.error(F);return}else w&&(w.type===Dr.Completion?w.error?p.error(new Error(w.error)):p.complete():p.next(w.item))},b=this._sendWithProtocol(S).catch(w=>{p.error(w),delete this._callbacks[S.invocationId]}),this._launchStreams(d,b),p}_sendMessage(o){return this._resetKeepAliveInterval(),this.connection.send(o)}_sendWithProtocol(o){return this._messageBuffer?this._messageBuffer._send(o):this._sendMessage(this._protocol.writeMessage(o))}send(o,...l){const[d,g]=this._replaceStreamingParams(l),S=this._sendWithProtocol(this._createInvocation(o,l,!0,g));return this._launchStreams(d,S),S}invoke(o,...l){const[d,g]=this._replaceStreamingParams(l),S=this._createInvocation(o,l,!1,g);return new Promise((p,w)=>{this._callbacks[S.invocationId]=(C,E)=>{if(E){w(E);return}else C&&(C.type===Dr.Completion?C.error?w(new Error(C.error)):p(C.result):w(new Error("Unexpected message type: ".concat(C.type))))};const F=this._sendWithProtocol(S).catch(C=>{w(C),delete this._callbacks[S.invocationId]});this._launchStreams(d,F)})}on(o,l){!o||!l||(o=o.toLowerCase(),this._methods[o]||(this._methods[o]=[]),this._methods[o].indexOf(l)===-1&&this._methods[o].push(l))}off(o,l){if(!o)return;o=o.toLowerCase();const d=this._methods[o];if(d)if(l){const g=d.indexOf(l);g!==-1&&(d.splice(g,1),d.length===0&&delete this._methods[o])}else delete this._methods[o]}onclose(o){o&&this._closedCallbacks.push(o)}onreconnecting(o){o&&this._reconnectingCallbacks.push(o)}onreconnected(o){o&&this._reconnectedCallbacks.push(o)}_processIncomingData(o){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(o=this._processHandshakeResponse(o),this._receivedHandshakeResponse=!0),o){const l=this._protocol.parseMessages(o,this._logger);for(const d of l)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(d)))switch(d.type){case Dr.Invocation:this._invokeClientMethod(d);break;case Dr.StreamItem:case Dr.Completion:{const g=this._callbacks[d.invocationId];if(g){d.type===Dr.Completion&&delete this._callbacks[d.invocationId];try{g(d)}catch(S){this._logger.log(Rn.Error,"Stream callback threw error: ".concat(R3(S)))}}break}case Dr.Ping:break;case Dr.Close:{this._logger.log(Rn.Information,"Close message received from server.");const g=d.error?new Error("Server returned an error on close: "+d.error):void 0;d.allowReconnect===!0?this.connection.stop(g):this._stopPromise=this._stopInternal(g);break}case Dr.Ack:this._messageBuffer&&this._messageBuffer._ack(d);break;case Dr.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(d);break;default:this._logger.log(Rn.Warning,"Invalid message type: ".concat(d.type,"."));break}}this._resetTimeoutPeriod()}_processHandshakeResponse(o){let l,d;try{[d,l]=this._handshakeProtocol.parseHandshakeResponse(o)}catch(g){const S="Error parsing handshake response: "+g;this._logger.log(Rn.Error,S);const b=new Error(S);throw this._handshakeRejecter(b),b}if(l.error){const g="Server returned handshake error: "+l.error;this._logger.log(Rn.Error,g);const S=new Error(g);throw this._handshakeRejecter(S),S}else this._logger.log(Rn.Debug,"Server handshake complete.");return this._handshakeResolver(),d}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let o=this._nextKeepAlive-new Date().getTime();o<0&&(o=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===qi.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch(l){this._cleanupPingTimer()}},o)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(o){const l=o.target.toLowerCase(),d=this._methods[l];if(!d){this._logger.log(Rn.Warning,"No client method with the name '".concat(l,"' found.")),o.invocationId&&(this._logger.log(Rn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),await this._sendWithProtocol(this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)));return}const g=d.slice(),S=!!o.invocationId;let b,p,w;for(const F of g)try{const C=b;b=await F.apply(this,o.arguments),S&&b&&C&&(this._logger.log(Rn.Error,"Multiple results provided for '".concat(l,"'. Sending error to server.")),w=this._createCompletionMessage(o.invocationId,"Client provided multiple results.",null)),p=void 0}catch(C){p=C,this._logger.log(Rn.Error,"A callback for the method '".concat(l,"' threw error '").concat(C,"'."))}w?await this._sendWithProtocol(w):S?(p?w=this._createCompletionMessage(o.invocationId,"".concat(p),null):b!==void 0?w=this._createCompletionMessage(o.invocationId,null,b):(this._logger.log(Rn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),w=this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(w)):b&&this._logger.log(Rn.Error,"Result given for '".concat(l,"' method but server is not expecting a result."))}_connectionClosed(o){this._logger.log(Rn.Debug,"HubConnection.connectionClosed(".concat(o,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||o||new fu("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(o||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===qi.Disconnecting?this._completeClose(o):this._connectionState===qi.Connected&&this._reconnectPolicy?this._reconnect(o):this._connectionState===qi.Connected&&this._completeClose(o)}_completeClose(o){if(this._connectionStarted){this._connectionState=qi.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(o!=null?o:new Error("Connection closed.")),this._messageBuffer=void 0),Ji.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(l=>l.apply(this,[o]))}catch(l){this._logger.log(Rn.Error,"An onclose callback called with error '".concat(o,"' threw error '").concat(l,"'."))}}}async _reconnect(o){const l=Date.now();let d=0,g=o!==void 0?o:new Error("Attempting to reconnect due to a unknown error."),S=this._getNextRetryDelay(d++,0,g);if(S===null){this._logger.log(Rn.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(o);return}if(this._connectionState=qi.Reconnecting,o?this._logger.log(Rn.Information,"Connection reconnecting because of error '".concat(o,"'.")):this._logger.log(Rn.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(b=>b.apply(this,[o]))}catch(b){this._logger.log(Rn.Error,"An onreconnecting callback called with error '".concat(o,"' threw error '").concat(b,"'."))}if(this._connectionState!==qi.Reconnecting){this._logger.log(Rn.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;S!==null;){if(this._logger.log(Rn.Information,"Reconnect attempt number ".concat(d," will start in ").concat(S," ms.")),await new Promise(b=>{this._reconnectDelayHandle=setTimeout(b,S)}),this._reconnectDelayHandle=void 0,this._connectionState!==qi.Reconnecting){this._logger.log(Rn.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=qi.Connected,this._logger.log(Rn.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(b=>b.apply(this,[this.connection.connectionId]))}catch(b){this._logger.log(Rn.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(b,"'."))}return}catch(b){if(this._logger.log(Rn.Information,"Reconnect attempt failed because of error '".concat(b,"'.")),this._connectionState!==qi.Reconnecting){this._logger.log(Rn.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),this._connectionState===qi.Disconnecting&&this._completeClose();return}g=b instanceof Error?b:new Error(b.toString()),S=this._getNextRetryDelay(d++,Date.now()-l,g)}}this._logger.log(Rn.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-l," ms and ").concat(d," failed attempts. Connection disconnecting.")),this._completeClose()}_getNextRetryDelay(o,l,d){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:l,previousRetryCount:o,retryReason:d})}catch(g){return this._logger.log(Rn.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(o,", ").concat(l,") threw error '").concat(g,"'.")),null}}_cancelCallbacksWithError(o){const l=this._callbacks;this._callbacks={},Object.keys(l).forEach(d=>{const g=l[d];try{g(null,o)}catch(S){this._logger.log(Rn.Error,"Stream 'error' callback called with '".concat(o,"' threw error: ").concat(R3(S)))}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(o,l,d,g){if(d)return g.length!==0?{arguments:l,streamIds:g,target:o,type:Dr.Invocation}:{arguments:l,target:o,type:Dr.Invocation};{const S=this._invocationId;return this._invocationId++,g.length!==0?{arguments:l,invocationId:S.toString(),streamIds:g,target:o,type:Dr.Invocation}:{arguments:l,invocationId:S.toString(),target:o,type:Dr.Invocation}}}_launchStreams(o,l){if(o.length!==0){l||(l=Promise.resolve());for(const d in o)o[d].subscribe({complete:()=>{l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d)))},error:g=>{let S;g instanceof Error?S=g.message:g&&g.toString?S=g.toString():S="Unknown error",l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d,S)))},next:g=>{l=l.then(()=>this._sendWithProtocol(this._createStreamItemMessage(d,g)))}})}}_replaceStreamingParams(o){const l=[],d=[];for(let g=0;g<o.length;g++){const S=o[g];if(this._isObservable(S)){const b=this._invocationId;this._invocationId++,l[b]=S,d.push(b.toString()),o.splice(g,1)}}return[l,d]}_isObservable(o){return o&&o.subscribe&&typeof o.subscribe=="function"}_createStreamInvocation(o,l,d){const g=this._invocationId;return this._invocationId++,d.length!==0?{arguments:l,invocationId:g.toString(),streamIds:d,target:o,type:Dr.StreamInvocation}:{arguments:l,invocationId:g.toString(),target:o,type:Dr.StreamInvocation}}_createCancelInvocation(o){return{invocationId:o,type:Dr.CancelInvocation}}_createStreamItemMessage(o,l){return{invocationId:o,item:l,type:Dr.StreamItem}}_createCompletionMessage(o,l,d){return l?{error:l,invocationId:o,type:Dr.Completion}:{invocationId:o,result:d,type:Dr.Completion}}_createCloseMessage(){return{type:Dr.Close}}}const Tz=[0,2e3,1e4,3e4,null];class N3{constructor(o){this._retryDelays=o!==void 0?[...o,null]:Tz}nextRetryDelayInMilliseconds(o){return this._retryDelays[o.previousRetryCount]}}class Jc{}Jc.Authorization="Authorization";Jc.Cookie="Cookie";class Sz extends AE{constructor(o,l){super(),this._innerClient=o,this._accessTokenFactory=l}async send(o){let l=!0;this._accessTokenFactory&&(!this._accessToken||o.url&&o.url.indexOf("/negotiate?")>0)&&(l=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(o);const d=await this._innerClient.send(o);return l&&d.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(o),await this._innerClient.send(o)):d}_setAuthorizationHeader(o){o.headers||(o.headers={}),this._accessToken?o.headers[Jc.Authorization]="Bearer ".concat(this._accessToken):this._accessTokenFactory&&o.headers[Jc.Authorization]&&delete o.headers[Jc.Authorization]}getCookieString(o){return this._innerClient.getCookieString(o)}}var mo;(function(i){i[i.None=0]="None",i[i.WebSockets=1]="WebSockets",i[i.ServerSentEvents=2]="ServerSentEvents",i[i.LongPolling=4]="LongPolling"})(mo||(mo={}));var ra;(function(i){i[i.Text=1]="Text",i[i.Binary=2]="Binary"})(ra||(ra={}));let wz=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class M3{get pollAborted(){return this._pollAbort.aborted}constructor(o,l,d){this._httpClient=o,this._logger=l,this._pollAbort=new wz,this._options=d,this._running=!1,this.onreceive=null,this.onclose=null}async connect(o,l){if(So.isRequired(o,"url"),So.isRequired(l,"transferFormat"),So.isIn(l,ra,"transferFormat"),this._url=o,this._logger.log(Rn.Trace,"(LongPolling transport) Connecting."),l===ra.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[d,g]=vh(),S={[d]:g,...this._options.headers},b={abortSignal:this._pollAbort.signal,headers:S,timeout:1e5,withCredentials:this._options.withCredentials};l===ra.Binary&&(b.responseType="arraybuffer");const p="".concat(o,"&_=").concat(Date.now());this._logger.log(Rn.Trace,"(LongPolling transport) polling: ".concat(p,"."));const w=await this._httpClient.get(p,b);w.statusCode!==200?(this._logger.log(Rn.Error,"(LongPolling transport) Unexpected response code: ".concat(w.statusCode,".")),this._closeError=new Qc(w.statusText||"",w.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,b)}async _poll(o,l){try{for(;this._running;)try{const d="".concat(o,"&_=").concat(Date.now());this._logger.log(Rn.Trace,"(LongPolling transport) polling: ".concat(d,"."));const g=await this._httpClient.get(d,l);g.statusCode===204?(this._logger.log(Rn.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):g.statusCode!==200?(this._logger.log(Rn.Error,"(LongPolling transport) Unexpected response code: ".concat(g.statusCode,".")),this._closeError=new Qc(g.statusText||"",g.statusCode),this._running=!1):g.content?(this._logger.log(Rn.Trace,"(LongPolling transport) data received. ".concat(Yg(g.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(g.content)):this._logger.log(Rn.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(d){this._running?d instanceof zC?this._logger.log(Rn.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=d,this._running=!1):this._logger.log(Rn.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(d.message))}}finally{this._logger.log(Rn.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(o){return this._running?cB(this._logger,"LongPolling",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Rn.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Rn.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,"."));const o={},[l,d]=vh();o[l]=d;const g={headers:{...o,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let S;try{await this._httpClient.delete(this._url,g)}catch(b){S=b}S?S instanceof Qc&&(S.statusCode===404?this._logger.log(Rn.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Rn.Trace,"(LongPolling transport) Error sending a DELETE request: ".concat(S))):this._logger.log(Rn.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Rn.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let o="(LongPolling transport) Firing onclose event.";this._closeError&&(o+=" Error: "+this._closeError),this._logger.log(Rn.Trace,o),this.onclose(this._closeError)}}}class Az{constructor(o,l,d,g){this._httpClient=o,this._accessToken=l,this._logger=d,this._options=g,this.onreceive=null,this.onclose=null}async connect(o,l){return So.isRequired(o,"url"),So.isRequired(l,"transferFormat"),So.isIn(l,ra,"transferFormat"),this._logger.log(Rn.Trace,"(SSE transport) Connecting."),this._url=o,this._accessToken&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(this._accessToken))),new Promise((d,g)=>{let S=!1;if(l!==ra.Text){g(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let b;if(Ji.isBrowser||Ji.isWebWorker)b=new this._options.EventSource(o,{withCredentials:this._options.withCredentials});else{const p=this._httpClient.getCookieString(o),w={};w.Cookie=p;const[F,C]=vh();w[F]=C,b=new this._options.EventSource(o,{withCredentials:this._options.withCredentials,headers:{...w,...this._options.headers}})}try{b.onmessage=p=>{if(this.onreceive)try{this._logger.log(Rn.Trace,"(SSE transport) data received. ".concat(Yg(p.data,this._options.logMessageContent),".")),this.onreceive(p.data)}catch(w){this._close(w);return}},b.onerror=p=>{S?this._close():g(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},b.onopen=()=>{this._logger.log(Rn.Information,"SSE connected to ".concat(this._url)),this._eventSource=b,S=!0,d()}}catch(p){g(p);return}})}async send(o){return this._eventSource?cB(this._logger,"SSE",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(o){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(o))}}class Iz{constructor(o,l,d,g,S,b){this._logger=d,this._accessTokenFactory=l,this._logMessageContent=g,this._webSocketConstructor=S,this._httpClient=o,this.onreceive=null,this.onclose=null,this._headers=b}async connect(o,l){So.isRequired(o,"url"),So.isRequired(l,"transferFormat"),So.isIn(l,ra,"transferFormat"),this._logger.log(Rn.Trace,"(WebSockets transport) Connecting.");let d;return this._accessTokenFactory&&(d=await this._accessTokenFactory()),new Promise((g,S)=>{o=o.replace(/^http/,"ws");let b;const p=this._httpClient.getCookieString(o);let w=!1;if(Ji.isNode||Ji.isReactNative){const F={},[C,E]=vh();F[C]=E,d&&(F[Jc.Authorization]="Bearer ".concat(d)),p&&(F[Jc.Cookie]=p),b=new this._webSocketConstructor(o,void 0,{headers:{...F,...this._headers}})}else d&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(d)));b||(b=new this._webSocketConstructor(o)),l===ra.Binary&&(b.binaryType="arraybuffer"),b.onopen=F=>{this._logger.log(Rn.Information,"WebSocket connected to ".concat(o,".")),this._webSocket=b,w=!0,g()},b.onerror=F=>{let C=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?C=F.error:C="There was an error with the transport",this._logger.log(Rn.Information,"(WebSockets transport) ".concat(C,"."))},b.onmessage=F=>{if(this._logger.log(Rn.Trace,"(WebSockets transport) data received. ".concat(Yg(F.data,this._logMessageContent),".")),this.onreceive)try{this.onreceive(F.data)}catch(C){this._close(C);return}},b.onclose=F=>{if(w)this._close(F);else{let C=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?C=F.error:C="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",S(new Error(C))}}})}send(o){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Rn.Trace,"(WebSockets transport) sending data. ".concat(Yg(o,this._logMessageContent),".")),this._webSocket.send(o),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(o){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Rn.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(o)&&(o.wasClean===!1||o.code!==1e3)?this.onclose(new Error("WebSocket closed with status code: ".concat(o.code," (").concat(o.reason||"no reason given",")."))):o instanceof Error?this.onclose(o):this.onclose())}_isCloseEvent(o){return o&&typeof o.wasClean=="boolean"&&typeof o.code=="number"}}const D3=100;class bz{constructor(o,l={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,So.isRequired(o,"url"),this._logger=ez(l.logger),this.baseUrl=this._resolveUrl(o),l=l||{},l.logMessageContent=l.logMessageContent===void 0?!1:l.logMessageContent,typeof l.withCredentials=="boolean"||l.withCredentials===void 0)l.withCredentials=l.withCredentials===void 0?!0:l.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");l.timeout=l.timeout===void 0?100*1e3:l.timeout;let d=null,g=null;Ji.isNode&&typeof require<"u"&&(d=lz(),g=cz()),!Ji.isNode&&typeof WebSocket<"u"&&!l.WebSocket?l.WebSocket=WebSocket:Ji.isNode&&!l.WebSocket&&d&&(l.WebSocket=d),!Ji.isNode&&typeof EventSource<"u"&&!l.EventSource?l.EventSource=EventSource:Ji.isNode&&!l.EventSource&&typeof g<"u"&&(l.EventSource=g),this._httpClient=new Sz(l.httpClient||new hz(this._logger),l.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=l,this.onreceive=null,this.onclose=null}async start(o){if(o=o||ra.Binary,So.isIn(o,ra,"transferFormat"),this._logger.log(Rn.Debug,"Starting connection with transfer format '".concat(ra[o],"'.")),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(o),await this._startInternalPromise,this._connectionState==="Disconnecting"){const l="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Rn.Error,l),await this._stopPromise,Promise.reject(new fu(l))}else if(this._connectionState!=="Connected"){const l="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Rn.Error,l),Promise.reject(new fu(l))}this._connectionStarted=!0}send(o){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new WC(this.transport)),this._sendQueue.send(o))}async stop(o){if(this._connectionState==="Disconnected")return this._logger.log(Rn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnected state.")),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(Rn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(l=>{this._stopPromiseResolver=l}),await this._stopInternal(o),await this._stopPromise}async _stopInternal(o){this._stopError=o;try{await this._startInternalPromise}catch(l){}if(this.transport){try{await this.transport.stop()}catch(l){this._logger.log(Rn.Error,"HttpConnection.transport.stop() threw error '".concat(l,"'.")),this._stopConnection()}this.transport=void 0}else this._logger.log(Rn.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(o){let l=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===mo.WebSockets)this.transport=this._constructTransport(mo.WebSockets),await this._startTransport(l,o);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let d=null,g=0;do{if(d=await this._getNegotiationResponse(l),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new fu("The connection was stopped during negotiation.");if(d.error)throw new Error(d.error);if(d.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(d.url&&(l=d.url),d.accessToken){const S=d.accessToken;this._accessTokenFactory=()=>S,this._httpClient._accessToken=S,this._httpClient._accessTokenFactory=void 0}g++}while(d.url&&g<D3);if(g===D3&&d.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(l,this._options.transport,d,o)}this.transport instanceof M3&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(Rn.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(d){return this._logger.log(Rn.Error,"Failed to start the connection: "+d),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(d)}}async _getNegotiationResponse(o){const l={},[d,g]=vh();l[d]=g;const S=this._resolveNegotiateUrl(o);this._logger.log(Rn.Debug,"Sending negotiation request: ".concat(S,"."));try{const b=await this._httpClient.post(S,{content:"",headers:{...l,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(b.statusCode!==200)return Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(b.statusCode,"'")));const p=JSON.parse(b.content);return(!p.negotiateVersion||p.negotiateVersion<1)&&(p.connectionToken=p.connectionId),p.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new C3("Client didn't negotiate Stateful Reconnect but the server did.")):p}catch(b){let p="Failed to complete negotiation with the server: "+b;return b instanceof Qc&&b.statusCode===404&&(p=p+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Rn.Error,p),Promise.reject(new C3(p))}}_createConnectUrl(o,l){return l?o+(o.indexOf("?")===-1?"?":"&")+"id=".concat(l):o}async _createTransport(o,l,d,g){let S=this._createConnectUrl(o,d.connectionToken);if(this._isITransport(l)){this._logger.log(Rn.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=l,await this._startTransport(S,g),this.connectionId=d.connectionId;return}const b=[],p=d.availableTransports||[];let w=d;for(const F of p){const C=this._resolveTransportOrError(F,l,g,(w==null?void 0:w.useStatefulReconnect)===!0);if(C instanceof Error)b.push("".concat(F.transport," failed:")),b.push(C);else if(this._isITransport(C)){if(this.transport=C,!w){try{w=await this._getNegotiationResponse(o)}catch(E){return Promise.reject(E)}S=this._createConnectUrl(o,w.connectionToken)}try{await this._startTransport(S,g),this.connectionId=w.connectionId;return}catch(E){if(this._logger.log(Rn.Error,"Failed to start the transport '".concat(F.transport,"': ").concat(E)),w=void 0,b.push(new $K("".concat(F.transport," failed: ").concat(E),mo[F.transport])),this._connectionState!=="Connecting"){const y="Failed to select transport before stop() was called.";return this._logger.log(Rn.Debug,y),Promise.reject(new fu(y))}}}}return b.length>0?Promise.reject(new XK("Unable to connect to the server with any of the available transports. ".concat(b.join(" ")),b)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(o){switch(o){case mo.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Iz(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case mo.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Az(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case mo.LongPolling:return new M3(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(o,"."))}}_startTransport(o,l){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async d=>{let g=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(o,l),await this.features.resend()}catch(S){g=!0}else{this._stopConnection(d);return}g&&this._stopConnection(d)}:this.transport.onclose=d=>this._stopConnection(d),this.transport.connect(o,l)}_resolveTransportOrError(o,l,d,g){const S=mo[o.transport];if(S==null)return this._logger.log(Rn.Debug,"Skipping transport '".concat(o.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(o.transport,"' because it is not supported by this client."));if(Cz(l,S))if(o.transferFormats.map(p=>ra[p]).indexOf(d)>=0){if(S===mo.WebSockets&&!this._options.WebSocket||S===mo.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Rn.Debug,"Skipping transport '".concat(mo[S],"' because it is not supported in your environment.'")),new YK("'".concat(mo[S],"' is not supported in your environment."),S);this._logger.log(Rn.Debug,"Selecting transport '".concat(mo[S],"'."));try{return this.features.reconnect=S===mo.WebSockets?g:void 0,this._constructTransport(S)}catch(p){return p}}else return this._logger.log(Rn.Debug,"Skipping transport '".concat(mo[S],"' because it does not support the requested transfer format '").concat(ra[d],"'.")),new Error("'".concat(mo[S],"' does not support ").concat(ra[d],"."));else return this._logger.log(Rn.Debug,"Skipping transport '".concat(mo[S],"' because it was disabled by the client.")),new WK("'".concat(mo[S],"' is disabled by the client."),S)}_isITransport(o){return o&&typeof o=="object"&&"connect"in o}_stopConnection(o){if(this._logger.log(Rn.Debug,"HttpConnection.stopConnection(".concat(o,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,o=this._stopError||o,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(Rn.Debug,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is already in the disconnected state."));return}if(this._connectionState==="Connecting")throw this._logger.log(Rn.Warning,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(o,") was called while the connection is still in the connecting state."));if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),o?this._logger.log(Rn.Error,"Connection disconnected with error '".concat(o,"'.")):this._logger.log(Rn.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(l=>{this._logger.log(Rn.Error,"TransportSendQueue.stop() threw error '".concat(l,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(o)}catch(l){this._logger.log(Rn.Error,"HttpConnection.onclose(".concat(o,") threw error '").concat(l,"'."))}}}_resolveUrl(o){if(o.lastIndexOf("https://",0)===0||o.lastIndexOf("http://",0)===0)return o;if(!Ji.isBrowser)throw new Error("Cannot resolve '".concat(o,"'."));const l=window.document.createElement("a");return l.href=o,this._logger.log(Rn.Information,"Normalizing '".concat(o,"' to '").concat(l.href,"'.")),l.href}_resolveNegotiateUrl(o){const l=new URL(o);l.pathname.endsWith("/")?l.pathname+="negotiate":l.pathname+="/negotiate";const d=new URLSearchParams(l.searchParams);return d.has("negotiateVersion")||d.append("negotiateVersion",this._negotiateVersion.toString()),d.has("useStatefulReconnect")?d.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&d.append("useStatefulReconnect","true"),l.search=d.toString(),l.toString()}}function Cz(i,o){return!i||(o&i)!==0}class WC{constructor(o){this._transport=o,this._buffer=[],this._executing=!0,this._sendBufferedData=new i0,this._transportResult=new i0,this._sendLoopPromise=this._sendLoop()}send(o){return this._bufferData(o),this._transportResult||(this._transportResult=new i0),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(o){if(this._buffer.length&&typeof this._buffer[0]!=typeof o)throw new Error("Expected data to be of type ".concat(typeof this._buffer," but was of type ").concat(typeof o));this._buffer.push(o),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new i0;const o=this._transportResult;this._transportResult=void 0;const l=typeof this._buffer[0]=="string"?this._buffer.join(""):WC._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(l),o.resolve()}catch(d){o.reject(d)}}}static _concatBuffers(o){const l=o.map(S=>S.byteLength).reduce((S,b)=>S+b),d=new Uint8Array(l);let g=0;for(const S of o)d.set(new Uint8Array(S),g),g+=S.byteLength;return d.buffer}}class i0{constructor(){this.promise=new Promise((o,l)=>[this._resolver,this._rejecter]=[o,l])}resolve(){this._resolver()}reject(o){this._rejecter(o)}}const Rz="json";class xz{constructor(){this.name=Rz,this.version=2,this.transferFormat=ra.Text}parseMessages(o,l){if(typeof o!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!o)return[];l===null&&(l=zg.instance);const d=fs.parse(o),g=[];for(const S of d){const b=JSON.parse(S);if(typeof b.type!="number")throw new Error("Invalid payload.");switch(b.type){case Dr.Invocation:this._isInvocationMessage(b);break;case Dr.StreamItem:this._isStreamItemMessage(b);break;case Dr.Completion:this._isCompletionMessage(b);break;case Dr.Ping:break;case Dr.Close:break;case Dr.Ack:this._isAckMessage(b);break;case Dr.Sequence:this._isSequenceMessage(b);break;default:l.log(Rn.Information,"Unknown message type '"+b.type+"' ignored.");continue}g.push(b)}return g}writeMessage(o){return fs.write(JSON.stringify(o))}_isInvocationMessage(o){this._assertNotEmptyString(o.target,"Invalid payload for Invocation message."),o.invocationId!==void 0&&this._assertNotEmptyString(o.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(o){if(this._assertNotEmptyString(o.invocationId,"Invalid payload for StreamItem message."),o.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(o){if(o.result&&o.error)throw new Error("Invalid payload for Completion message.");!o.result&&o.error&&this._assertNotEmptyString(o.error,"Invalid payload for Completion message."),this._assertNotEmptyString(o.invocationId,"Invalid payload for Completion message.")}_isAckMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(o,l){if(typeof o!="string"||o==="")throw new Error(l)}}const Nz={trace:Rn.Trace,debug:Rn.Debug,info:Rn.Information,information:Rn.Information,warn:Rn.Warning,warning:Rn.Warning,error:Rn.Error,critical:Rn.Critical,none:Rn.None};function Mz(i){const o=Nz[i.toLowerCase()];if(typeof o<"u")return o;throw new Error("Unknown log level: ".concat(i))}class fB{configureLogging(o){if(So.isRequired(o,"logging"),Dz(o))this.logger=o;else if(typeof o=="string"){const l=Mz(o);this.logger=new $0(l)}else this.logger=new $0(o);return this}withUrl(o,l){return So.isRequired(o,"url"),So.isNotEmpty(o,"url"),this.url=o,typeof l=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...l}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:l},this}withHubProtocol(o){return So.isRequired(o,"protocol"),this.protocol=o,this}withAutomaticReconnect(o){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return o?Array.isArray(o)?this.reconnectPolicy=new N3(o):this.reconnectPolicy=o:this.reconnectPolicy=new N3,this}withServerTimeout(o){return So.isRequired(o,"milliseconds"),this._serverTimeoutInMilliseconds=o,this}withKeepAliveInterval(o){return So.isRequired(o,"milliseconds"),this._keepAliveIntervalInMilliseconds=o,this}withStatefulReconnect(o){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=o==null?void 0:o.bufferSize,this}build(){const o=this.httpConnectionOptions||{};if(o.logger===void 0&&(o.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const l=new bz(this.url,o);return YC.create(l,this.logger||zg.instance,this.protocol||new xz,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function Dz(i){return i.log!==void 0}class Pz extends df{constructor(o){var l;super(),this.options=o,this.hubConnection=o.hubConnection,this.updateIntervalFrequency=(l=o.updateIntervalFrequency)!=null?l:6e4*5}async getServerTimeOffset(){const o=await this.getSyncedTime();this.emit("serverTimeOffsetUpdate",{serverTimeOffset:Date.now()-o.getTime()}),!(this.updateIntervalFrequency<6e4)&&(this.timeoutInstance=setTimeout(this.getServerTimeOffset.bind(this),this.updateIntervalFrequency))}async start(){await this.getServerTimeOffset()}async getSyncedTime(){const o=this,l=12,d=1e4,g=20;let S;return await new Promise((b,p)=>{var T;const w=[];let F=0,C,E;function y(){var U;E=Date.now(),(U=o.hubConnection)==null||U.invoke("echo"),C=setTimeout(()=>{p(new Error("Did not get sufficient echoes from the server in time"))},d)}function P(U){S=U,clearTimeout(C),w.push(Date.now()-E),F++,F<l?setTimeout(y,g):m()}(T=o.hubConnection)==null||T.on("echo",P);function m(){var M;if((M=o.hubConnection)==null||M.off("echo",P),S===void 0){p(new Error("Server timestamp is undefined"));return}let U;o.options.roundtripCalcStrategy==="mean"?U=w.reduce((_,I)=>_+I)/w.length:U=BK(w),b(new Date(S+U/2))}y()})}destroy(){clearTimeout(this.timeoutInstance)}}const ou={STATE_UPDATE:"OnStateUpdated",RECIEVE_GROUP_COMMAND:"receiveGroupCommand",RECIEVE_GLOBAL_COMMAND:"receiveGlobalCommand",CLIENT_DISCONNECT:"DeviceLogOut",SETUP_REQUEST_HOST_TV_CONNECTED:"SetupRequestHostTvConnected",SETUP_STATUS_UPDATE:"SetupStatusUpdate",SETUP_ERROR_RECEIVED:"SetupErrorReceived"},Ib={WAITING_FOR_HOST:"WaitingForHostState",READY_TO_PAIR_WITH_HOST:"ShowQrCodeState",CONNECTED_STATE:"ConnectedState",SHOW_QR_CODE_STATE:"ShowQrCode",HOST_TV_STATE:"HostTVState",IDLE:"Idle"};class Oz extends df{constructor({deviceId:o,debug:l,groupName:d}){super(),this.hubConnection=null,this.serverTimeService=null,this.state=Ib.IDLE,this.deviceId=o,this.debugLogging=l!=null?l:!1,this.groupName=d}setupTimeService(){this.serverTimeService=new Pz({hubConnection:this.hubConnection}),this.serverTimeService.on("serverTimeOffsetUpdate",o=>{this.emit("serverTimeOffsetUpdate",o)}),this.serverTimeService.start()}async join(){await this.sendGroupCommand({command:"join",value:this.deviceId})}async disconnect(){var o;console.log("SignalR: disconnect",ou.CLIENT_DISCONNECT,{deviceId:this.deviceId}),await((o=this.hubConnection)==null?void 0:o.invoke(ou.CLIENT_DISCONNECT))}connect({url:o,accessToken:l}){var d;this.hubConnection=new fB().withUrl(o,{accessTokenFactory:()=>l,transport:mo.WebSockets}).configureLogging(this.debugLogging?Rn.Trace:Rn.Information).build(),(d=this.hubConnection)==null||d.start().then(()=>{this.setupTimeService(),this.connectEventHandlers(),this.join()}).catch(g=>{console.error("Connection failed:",g)})}connectEventHandlers(){var o,l,d,g,S,b;(o=this.hubConnection)==null||o.on(ou.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.on(ou.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.on(ou.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),(g=this.hubConnection)==null||g.on(ou.SETUP_STATUS_UPDATE,this.onSetupStatusUpdate.bind(this)),(S=this.hubConnection)==null||S.onclose(p=>{p?console.error("SignalR: closed with error",p):console.log("SignalR: closed")}),(b=this.hubConnection)==null||b.onreconnected(p=>{p?console.error("SignalR: Reconnected error",p):console.log("SignalR: Reconnected")})}async destroy(){var o,l,d,g,S;(o=this.hubConnection)==null||o.off(ou.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.off(ou.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.off(ou.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),await this.disconnect(),await((g=this.hubConnection)==null?void 0:g.stop()),(S=this.serverTimeService)==null||S.destroy(),super.destroy()}onReceiveGroupCommand(o){var l,d,g,S,b;switch(console.log("onReceiveGroupCommand",o),o.command){case"play":this.emit("startTimeUpdated",{startTime:new Date(o.value.startDate)}),((l=o.value.rateClockState)==null?void 0:l.rate)===0?this.emit("pausePlayStream",{command:"pause",reference:(d=o.value.rateClockState)==null?void 0:d.reference,start:(g=o.value.rateClockState)==null?void 0:g.start}):this.emit("pausePlayStream",{command:"play",reference:(S=o.value.rateClockState)==null?void 0:S.reference,start:(b=o.value.rateClockState)==null?void 0:b.start});break;case"cast":this.emit("cast",{index:o.value});break;case"prepareCast":this.emit("prepareCast",{index:o.value});break;case"cancelCast":console.log("cancelCast");break}}onReceiveGlobalCommand(o){switch(console.log("onReceiveGlobalCommand",o),o.command){case"status_changed":this.emit("eventStatusChanged",void 0);break;case"event_canceled":this.emit("eventCanceled",void 0);break}}async sendGroupCommand(o){var l;return await((l=this.hubConnection)==null?void 0:l.invoke("sendGroupCommand",{groupName:this.groupName,arguments:[o]}))}onStateUpdate(o){switch(this.state=o.state.$type,o.state.$type){case Ib.CONNECTED_STATE:if(!o.state.sessionId)return;this.emit("connected",{sessionId:o.state.sessionId}),this.emit("stateUpdated",{state:this.state});return;default:this.emit("stateUpdated",{state:this.state});break}}onSetupStatusUpdate(o){console.log("SetupStatusUpdate: ",o),this.emit("setupStatusUpdate",{deviceLists:o})}}async function Th(i,o,l){var d;try{const g=await fetch(i,o);switch(g.status){case 401:throw new ug(l==null?void 0:l.name,"Unauthorized","Unauthorized",g.status);case 403:throw new ug(l==null?void 0:l.name,"Forbidden","Forbidden",g.status)}const S=await g.json();if(!g.ok)throw new ug(l==null?void 0:l.name,(d=S.sys)==null?void 0:d.id,S.message,g.status);return S}catch(g){throw g instanceof ug?g:new ug(l.name,"Network Error",l.message||"Could not make the request")}}var bb={exports:{}};(function(i,o){(function(l,d){var g="1.0.38",S="",b="?",p="function",w="undefined",F="object",C="string",E="major",y="model",P="name",m="type",T="vendor",U="version",M="architecture",_="console",I="mobile",x="tablet",Z="smarttv",Y="wearable",$="embedded",Q=500,se="Amazon",R="Apple",X="ASUS",ce="BlackBerry",oe="Browser",me="Chrome",Ce="Edge",Je="Firefox",we="Google",qe="Huawei",st="LG",ft="Microsoft",be="Motorola",He="Opera",vt="Samsung",Re="Sharp",Ye="Sony",ot="Xiaomi",Ht="Zebra",Bt="Facebook",Et="Chromium OS",Dt="Mac OS",Ne=function(ht,_t){var Tt={};for(var Mt in ht)_t[Mt]&&_t[Mt].length%2===0?Tt[Mt]=_t[Mt].concat(ht[Mt]):Tt[Mt]=ht[Mt];return Tt},ne=function(ht){for(var _t={},Tt=0;Tt<ht.length;Tt++)_t[ht[Tt].toUpperCase()]=ht[Tt];return _t},Be=function(ht,_t){return typeof ht===C?L(_t).indexOf(L(ht))!==-1:!1},L=function(ht){return ht.toLowerCase()},D=function(ht){return typeof ht===C?ht.replace(/[^\d\.]/g,S).split(".")[0]:d},G=function(ht,_t){if(typeof ht===C)return ht=ht.replace(/^\s\s*/,S),typeof _t===w?ht:ht.substring(0,Q)},K=function(ht,_t){for(var Tt=0,Mt,_n,rn,cn,Ft,Gn;Tt<_t.length&&!Ft;){var Sr=_t[Tt],Gr=_t[Tt+1];for(Mt=_n=0;Mt<Sr.length&&!Ft&&Sr[Mt];)if(Ft=Sr[Mt++].exec(ht),Ft)for(rn=0;rn<Gr.length;rn++)Gn=Ft[++_n],cn=Gr[rn],typeof cn===F&&cn.length>0?cn.length===2?typeof cn[1]==p?this[cn[0]]=cn[1].call(this,Gn):this[cn[0]]=cn[1]:cn.length===3?typeof cn[1]===p&&!(cn[1].exec&&cn[1].test)?this[cn[0]]=Gn?cn[1].call(this,Gn,cn[2]):d:this[cn[0]]=Gn?Gn.replace(cn[1],cn[2]):d:cn.length===4&&(this[cn[0]]=Gn?cn[3].call(this,Gn.replace(cn[1],cn[2])):d):this[cn]=Gn||d;Tt+=2}},ge=function(ht,_t){for(var Tt in _t)if(typeof _t[Tt]===F&&_t[Tt].length>0){for(var Mt=0;Mt<_t[Tt].length;Mt++)if(Be(_t[Tt][Mt],ht))return Tt===b?d:Tt}else if(Be(_t[Tt],ht))return Tt===b?d:Tt;return ht},de={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},wt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[U,[P,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[U,[P,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[P,U],[/opios[\/ ]+([\w\.]+)/i],[U,[P,He+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[U,[P,He+" GX"]],[/\bopr\/([\w\.]+)/i],[U,[P,He]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[U,[P,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[P,U],[/\bddg\/([\w\.]+)/i],[U,[P,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[U,[P,"UC"+oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[U,[P,"WeChat"]],[/konqueror\/([\w\.]+)/i],[U,[P,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[U,[P,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[U,[P,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[U,[P,"Smart Lenovo "+oe]],[/(avast|avg)\/([\w\.]+)/i],[[P,/(.+)/,"$1 Secure "+oe],U],[/\bfocus\/([\w\.]+)/i],[U,[P,Je+" Focus"]],[/\bopt\/([\w\.]+)/i],[U,[P,He+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[U,[P,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[U,[P,"Dolphin"]],[/coast\/([\w\.]+)/i],[U,[P,He+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[U,[P,"MIUI "+oe]],[/fxios\/([-\w\.]+)/i],[U,[P,Je]],[/\bqihu|(qi?ho?o?|360)browser/i],[[P,"360 "+oe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[P,/(.+)/,"$1 "+oe],U],[/samsungbrowser\/([\w\.]+)/i],[U,[P,vt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[P,/_/g," "],U],[/metasr[\/ ]?([\d\.]+)/i],[U,[P,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[P,"Sogou Mobile"],U],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[P,U],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[P],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[P,Bt],U],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[P,U],[/\bgsa\/([\w\.]+) .*safari\//i],[U,[P,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[U,[P,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[U,[P,me+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[P,me+" WebView"],U],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[U,[P,"Android "+oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[P,U],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[U,[P,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[U,P],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[P,[U,ge,de]],[/(webkit|khtml)\/([\w\.]+)/i],[P,U],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[P,"Netscape"],U],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[U,[P,Je+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[P,U],[/(cobalt)\/([\w\.]+)/i],[P,[U,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[M,"amd64"]],[/(ia32(?=;))/i],[[M,L]],[/((?:i[346]|x)86)[;\)]/i],[[M,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[M,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[M,"armhf"]],[/windows (ce|mobile); ppc;/i],[[M,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[M,/ower/,S,L]],[/(sun4\w)[;\)]/i],[[M,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[M,L]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[y,[T,vt],[m,x]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[y,[T,vt],[m,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[y,[T,R],[m,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[y,[T,R],[m,x]],[/(macintosh);/i],[y,[T,R]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[y,[T,Re],[m,I]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[y,[T,qe],[m,x]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[y,[T,qe],[m,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[y,/_/g," "],[T,ot],[m,I]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[y,/_/g," "],[T,ot],[m,x]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[y,[T,"OPPO"],[m,I]],[/\b(opd2\d{3}a?) bui/i],[y,[T,"OPPO"],[m,x]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[y,[T,"Vivo"],[m,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[y,[T,"Realme"],[m,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[y,[T,be],[m,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[y,[T,be],[m,x]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[y,[T,st],[m,x]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[y,[T,st],[m,I]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[y,[T,"Lenovo"],[m,x]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[y,/_/g," "],[T,"Nokia"],[m,I]],[/(pixel c)\b/i],[y,[T,we],[m,x]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[y,[T,we],[m,I]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[y,[T,Ye],[m,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[y,"Xperia Tablet"],[T,Ye],[m,x]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[y,[T,"OnePlus"],[m,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[y,[T,se],[m,x]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[y,/(.+)/g,"Fire Phone $1"],[T,se],[m,I]],[/(playbook);[-\w\),; ]+(rim)/i],[y,T,[m,x]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[y,[T,ce],[m,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[y,[T,X],[m,x]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[y,[T,X],[m,I]],[/(nexus 9)/i],[y,[T,"HTC"],[m,x]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[y,/_/g," "],[m,I]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[y,[T,"Acer"],[m,x]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[y,[T,"Meizu"],[m,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[y,[T,"Ulefone"],[m,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,y,[m,I]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,y,[m,x]],[/(surface duo)/i],[y,[T,ft],[m,x]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[y,[T,"Fairphone"],[m,I]],[/(u304aa)/i],[y,[T,"AT&T"],[m,I]],[/\bsie-(\w*)/i],[y,[T,"Siemens"],[m,I]],[/\b(rct\w+) b/i],[y,[T,"RCA"],[m,x]],[/\b(venue[\d ]{2,7}) b/i],[y,[T,"Dell"],[m,x]],[/\b(q(?:mv|ta)\w+) b/i],[y,[T,"Verizon"],[m,x]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[y,[T,"Barnes & Noble"],[m,x]],[/\b(tm\d{3}\w+) b/i],[y,[T,"NuVision"],[m,x]],[/\b(k88) b/i],[y,[T,"ZTE"],[m,x]],[/\b(nx\d{3}j) b/i],[y,[T,"ZTE"],[m,I]],[/\b(gen\d{3}) b.+49h/i],[y,[T,"Swiss"],[m,I]],[/\b(zur\d{3}) b/i],[y,[T,"Swiss"],[m,x]],[/\b((zeki)?tb.*\b) b/i],[y,[T,"Zeki"],[m,x]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],y,[m,x]],[/\b(ns-?\w{0,9}) b/i],[y,[T,"Insignia"],[m,x]],[/\b((nxa|next)-?\w{0,9}) b/i],[y,[T,"NextBook"],[m,x]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],y,[m,I]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],y,[m,I]],[/\b(ph-1) /i],[y,[T,"Essential"],[m,I]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[y,[T,"Envizen"],[m,x]],[/\b(trio[-\w\. ]+) b/i],[y,[T,"MachSpeed"],[m,x]],[/\btu_(1491) b/i],[y,[T,"Rotor"],[m,x]],[/(shield[\w ]+) b/i],[y,[T,"Nvidia"],[m,x]],[/(sprint) (\w+)/i],[T,y,[m,I]],[/(kin\.[onetw]{3})/i],[[y,/\./g," "],[T,ft],[m,I]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[y,[T,Ht],[m,x]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[y,[T,Ht],[m,I]],[/smart-tv.+(samsung)/i],[T,[m,Z]],[/hbbtv.+maple;(\d+)/i],[[y,/^/,"SmartTV"],[T,vt],[m,Z]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,st],[m,Z]],[/(apple) ?tv/i],[T,[y,R+" TV"],[m,Z]],[/crkey/i],[[y,me+"cast"],[T,we],[m,Z]],[/droid.+aft(\w+)( bui|\))/i],[y,[T,se],[m,Z]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[y,[T,Re],[m,Z]],[/(bravia[\w ]+)( bui|\))/i],[y,[T,Ye],[m,Z]],[/(mitv-\w{5}) bui/i],[y,[T,ot],[m,Z]],[/Hbbtv.*(technisat) (.*);/i],[T,y,[m,Z]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,G],[y,G],[m,Z]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,Z]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,y,[m,_]],[/droid.+; (shield) bui/i],[y,[T,"Nvidia"],[m,_]],[/(playstation [345portablevi]+)/i],[y,[T,Ye],[m,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[y,[T,ft],[m,_]],[/((pebble))app/i],[T,y,[m,Y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[y,[T,R],[m,Y]],[/droid.+; (glass) \d/i],[y,[T,we],[m,Y]],[/droid.+; (wt63?0{2,3})\)/i],[y,[T,Ht],[m,Y]],[/(quest( \d| pro)?)/i],[y,[T,Bt],[m,Y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[m,$]],[/(aeobc)\b/i],[y,[T,se],[m,$]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[y,[m,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[y,[m,x]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,x]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,I]],[/(android[-\w\. ]{0,9});.+buil/i],[y,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[U,[P,Ce+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[U,[P,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[P,U],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[U,P]],os:[[/microsoft (windows) (vista|xp)/i],[P,U],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[P,[U,ge,Ke]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[U,ge,Ke],[P,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[U,/_/g,"."],[P,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[P,Dt],[U,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[U,P],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[P,U],[/\(bb(10);/i],[U,[P,ce]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[U,[P,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[U,[P,Je+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[U,[P,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[U,[P,"watchOS"]],[/crkey\/([\d\.]+)/i],[U,[P,me+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[P,Et],U],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[P,U],[/(sunos) ?([\w\.\d]*)/i],[[P,"Solaris"],U],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[P,U]]},lt=function(ht,_t){if(typeof ht===F&&(_t=ht,ht=d),!(this instanceof lt))return new lt(ht,_t).getResult();var Tt=typeof l!==w&&l.navigator?l.navigator:d,Mt=ht||(Tt&&Tt.userAgent?Tt.userAgent:S),_n=Tt&&Tt.userAgentData?Tt.userAgentData:d,rn=_t?Ne(wt,_t):wt,cn=Tt&&Tt.userAgent==Mt;return this.getBrowser=function(){var Ft={};return Ft[P]=d,Ft[U]=d,K.call(Ft,Mt,rn.browser),Ft[E]=D(Ft[U]),cn&&Tt&&Tt.brave&&typeof Tt.brave.isBrave==p&&(Ft[P]="Brave"),Ft},this.getCPU=function(){var Ft={};return Ft[M]=d,K.call(Ft,Mt,rn.cpu),Ft},this.getDevice=function(){var Ft={};return Ft[T]=d,Ft[y]=d,Ft[m]=d,K.call(Ft,Mt,rn.device),cn&&!Ft[m]&&_n&&_n.mobile&&(Ft[m]=I),cn&&Ft[y]=="Macintosh"&&Tt&&typeof Tt.standalone!==w&&Tt.maxTouchPoints&&Tt.maxTouchPoints>2&&(Ft[y]="iPad",Ft[m]=x),Ft},this.getEngine=function(){var Ft={};return Ft[P]=d,Ft[U]=d,K.call(Ft,Mt,rn.engine),Ft},this.getOS=function(){var Ft={};return Ft[P]=d,Ft[U]=d,K.call(Ft,Mt,rn.os),cn&&!Ft[P]&&_n&&_n.platform&&_n.platform!="Unknown"&&(Ft[P]=_n.platform.replace(/chrome os/i,Et).replace(/macos/i,Dt)),Ft},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Mt},this.setUA=function(Ft){return Mt=typeof Ft===C&&Ft.length>Q?G(Ft,Q):Ft,this},this.setUA(Mt),this};lt.VERSION=g,lt.BROWSER=ne([P,U,E]),lt.CPU=ne([M]),lt.DEVICE=ne([y,T,m,_,I,Z,x,Y,$]),lt.ENGINE=lt.OS=ne([P,U]),i.exports&&(o=i.exports=lt),o.UAParser=lt;var ut=typeof l!==w&&(l.jQuery||l.Zepto);if(ut&&!ut.ua){var nt=new lt;ut.ua=nt.getResult(),ut.ua.get=function(){return nt.getUA()},ut.ua.set=function(ht){nt.setUA(ht);var _t=nt.getResult();for(var Tt in _t)ut.ua[Tt]=_t[Tt]}}})(typeof window=="object"?window:cu)})(bb,bb.exports);var Lz=bb.exports;const P3=new Lz.UAParser;function kz(i){const o=P3.getOS(),l=P3.getBrowser();return"Gigset/".concat(i," (").concat(o.name," ").concat(o.version,"; ").concat(l.name," ").concat(l.version,")")}function Wg({sessionId:i,appVersion:o,apiVersion:l}){const d={"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*","Gigset-Client":kz(o),"Api-version":l!=null?l:"v1"};return i&&(d.Session=i),d}async function Fz({deviceId:i,appVersion:o,baseUrl:l}){const d={deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(i,")"),deviceId:i};return(await Th)("".concat(l,"/devicehub-api/negotiate-tv"),{method:"POST",body:JSON.stringify(d),headers:Wg({appVersion:o})},{name:ls.NEGOTIATE_TV,message:"could not fetch negotiate-tv data"})}async function Uz({deviceId:i,ticketCode:o,scanTvDeviceId:l,appVersion:d,baseUrl:g,ticketPrefix:S}){let b=g;S&&(b="".concat(g));const p={ticketCode:o,deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(i,")"),deviceId:i,scanTvDeviceId:l};return(await Th)("".concat(b,"/devicehub-api/negotiate"),{method:"POST",body:JSON.stringify(p),headers:Wg({appVersion:d})},{name:ls.NEGOTIATE,message:"could not fetch negotiate data"})}async function O3({sessionId:i,appVersion:o,baseUrl:l,ticketPrefix:d,ticketCode:g}){let S=l;d&&(S="".concat(l,"/").concat(d));const b=await Th("".concat(S,"/timeline-api/timeline/").concat(g,"/generate"),{method:"GET",headers:Wg({sessionId:i,appVersion:o})},{name:ls.GENERATE,message:"could not fetch generate data"});return{...await fetch("".concat(b.timelineUrl).concat(b.queryParameters),{method:"GET",headers:Wg({sessionId:i,appVersion:o})}).then(async w=>await w.json()),queryParameters:b.queryParameters,distributionUrl:b.distributionUrl}}async function L3({sessionId:i,appVersion:o,baseUrl:l,ticketCode:d}){return(await Th)("".concat(l,"/static-api/event/").concat(d,"/status"),{method:"GET",headers:Wg({sessionId:i,appVersion:o})},{name:ls.EVENT_STATUS,message:"failed to get event status data"})}function Bz(i){return"".concat(i,"/timeline-api/drm/license?drm=widevine")}var Hc=(i=>(i.JUMPSPOT="jumpspot",i.FOLLOW="follow",i))(Hc||{});function $C(i){return[...i.places.flatMap((o,l)=>o.jumpSpots.map(d=>({camera:d.camera,title:d.title,type:"jumpspot",placeIndex:l,mapPosition:o.mapPosition,mapScale:o.mapScale,placeTitle:o.title}))),...i.follows.map(o=>({camera:o.camera,title:o.title,type:"follow",mapPosition:o.mapPositions}))].map((o,l)=>({...o,index:l}))}function IE(i,o){return $C(i).filter(d=>{const g=Ci(d.camera.span.time,i.frameRate),S=Ci(d.camera.span.time,i.frameRate)+Ci(d.camera.span.duration,i.frameRate);return g<=o&&S>=o})}function dB(i,o,l,d){const g=IE(i,o+l+2);if(!g.length)return;if(d){const p=(d==null?void 0:d.placeIndex)!==void 0&&g.find(w=>w.type==="jumpspot"&&w.placeIndex===(d==null?void 0:d.placeIndex));if(p)return p}const S=g.find(p=>p.type==="jumpspot");if(S)return S;const b=g.find(p=>p.type==="follow");if(b)return b}function jz(i){const o=$C(i),l=i.frameRate;return o.sort((d,g)=>{const S=Ci(d.camera.span.time,l)+Ci(d.camera.span.duration,l);return Ci(g.camera.span.time,l)+Ci(g.camera.span.duration,l)-S}),o[0]}function Ci(i,o){if(!i)return 0;const[l,d,g,S]=i.split(":").map(Number),b=l*60*60,p=d*60;if(o){const w=S/o;return b+p+g+w}else return b+p+g}function Cb(i,o,l){return IE(o,l.getExpectedPositionInSeconds()).find(d=>d.index===i)}function k3(i,o){return $C(o).find(d=>d.camera.cameraID===i)}const Zz=i=>{if(typeof i=="string")return"String!";if(typeof i=="number")return"Int";if(typeof i=="boolean")return"Boolean";if(typeof i=="object"&&"OR"in i)return"ResourceSetFilter";throw new Error("Unknown type: ".concat(typeof i))};function hB(i,o,l){const d=i.includes("staging")||i.includes("qa"),g={...l,preview:d},b=(Array.isArray(o)?o[0]:o).replace(/#.*/g,"").replace(/\\n/g," ").replace(/\s\s+/g," ").replace(/\s*({|}|\(|\)|\.|:|,)\s*/g,"$1"),p=Object.entries(g).map(([F,C])=>"$".concat(F,": ").concat(Zz(C))).join(", "),w="query(".concat(p,")").concat(b);return JSON.stringify({query:w,variables:g})}const pB=i=>"https://graphql.contentful.com/content/v1/spaces/".concat(i,"/environments/master");function gB(i,o){return{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:i}}const qz=(i,o)=>hB(o,"\n        {\n          eventCollection(\n            limit: 1\n            preview: $preview\n            where: { ticketCodePrefix: $ticketCodePrefix }\n          ) {\n            items {\n              title\n              timeZoneInSecondsFromGmt\n              timeZoneCode\n              preScreen {\n                showTitle\n                countdownTitle\n                startTimeSubtitle\n                logoutButtonTitle\n                setupGuideButtonTitle\n                backgroundLandscape {\n                  url\n                }\n                backgroundPortrait {\n                  url\n                }\n                logoLeft {\n                  url\n                }\n                logoRight {\n                  url\n                }\n              }\n              upsell {\n                title\n                web {\n                  title\n                  body\n                  image {\n                    url\n                  }\n                  linkTitle\n                  link\n                  upsellLink {\n                    label\n                    url\n                  }\n                }\n              }\n              postScreen {\n                title\n                body\n                logoutButtonTitle\n                scanQrCodeLabel\n                offersCollection(limit: 10) {\n                  items {\n                    link\n                    image {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      ",{preview:!0,ticketCodePrefix:i});async function F3(i,o,l,d){var b,p;const g=qz(i.toUpperCase(),o),S=await Th(pB(d),gB(g,l),{name:ls.EVENT_META,message:"Could not fetch event meta."});return(p=(b=S==null?void 0:S.data)==null?void 0:b.eventCollection.items)==null?void 0:p[0]}function Gz(i,o){const l=i.reduce((d,g)=>(d.OR.push({slug:g}),d),{OR:[]});return hB(o,"\n        {\n          resourceSetCollection(preview: $preview, where: $resourceSetFilter) {\n            items {\n              slug\n              resourcesCollection {\n                items {\n                  key\n                  value\n                }\n              }\n            }\n          }\n        }\n      ",{resourceSetFilter:l})}async function Hz(i,o,l){var S,b;const d=Gz(["app-general","player","setup-guide","setup","ticket-entry","web-requirements","web-app-pair"],i);return(b=(S=(await Th(pB(l),gB(d,o),{name:ls.CONTENTFUL,message:"Could not fetch contentful data."})).data)==null?void 0:S.resourceSetCollection)==null?void 0:b.items}const Vz=i=>(o,l,d)=>{const g=i(o,l),S=i(o,d);return g!==null&&S!==null?g<S?g:S:g!==null?g:S!==null?S:null},Kz=i=>({acceleration:o,position:l,velocity:d},g)=>{const S=i(l,d,o,g);if(S.length===0)return null;if(S.length===1)return S[0]>0?S[0]:null;if(S.length===2){if(S[1]<0)return null;if(S[0]>0)return S[0];if(S[1]>0)return S[1]}return null},zz=i=>(o,l,d)=>{const g=i(o,l,d);return g===null||g===Number.POSITIVE_INFINITY?null:g},Yz=(i,o)=>class{constructor(){this._listeners=new WeakMap,this._nativeEventTarget=i()}addEventListener(d,g,S){if(g!==null){let b=this._listeners.get(g);b===void 0&&(b=o(this,g),typeof g=="function"&&this._listeners.set(g,b)),this._nativeEventTarget.addEventListener(d,b,S)}}dispatchEvent(d){return this._nativeEventTarget.dispatchEvent(d)}removeEventListener(d,g,S){const b=g===null?void 0:this._listeners.get(g);this._nativeEventTarget.removeEventListener(d,b===void 0?null:b,S)}},Wz=i=>()=>{if(i===null)throw new Error("A native EventTarget could not be created.");return i.document.createElement("p")},$z=()=>{try{return new DOMException("","IllegalValueError")}catch(i){return i.name="IllegalValueError",i}},Xz=()=>{try{return new DOMException("","InvalidStateError")}catch(i){return i.code=11,i.name="InvalidStateError",i}},Qz=(i,o,l,d,g,S,b,p)=>class extends d{constructor(w={},F=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY){super();const{timingProviderSource:E,vector:y}=w.update===void 0?{timingProviderSource:null,vector:w}:{timingProviderSource:w,vector:{}};if(this._endPosition=E===null?C:E.endPosition,this._onchange=null,this._onerror=null,this._onreadystatechange=null,this._readyState=E===null?"open":E.readyState,this._skew=E===null?0:E.skew,this._startPosition=E===null?F:E.startPosition,this._timingProviderSource=E,this._timeoutId=null,this._vector=E===null?{acceleration:0,position:0,velocity:0,...g(y),timestamp:S.now()/1e3}:E.vector,C<this._vector.position&&(this._vector={...this._vector,acceleration:0,position:C,velocity:0}),F>this._vector.position&&(this._vector={...this._vector,acceleration:0,position:F,velocity:0}),this._setInternalTimeout(),E===null)b(()=>this.dispatchEvent(new Event("readystatechange")));else{const P=()=>{this._skew=E.skew},m=()=>this._setInternalVector(E.vector),T=()=>{this._isAllowedTransition(E.readyState)?this._readyState=E.readyState:(this._readyState="closed",E.removeEventListener("adjust",P),E.removeEventListener("change",m),E.removeEventListener("readystatechange",T)),E.error!==null&&b(()=>this.dispatchEvent(new ErrorEvent("error",{error:E.error}))),b(()=>this.dispatchEvent(new Event("readystatechange")))};E.addEventListener("adjust",P),E.addEventListener("change",m),E.addEventListener("readystatechange",T)}}get endPosition(){return this._endPosition}get onchange(){return this._onchange===null?this._onchange:this._onchange[0]}set onchange(w){if(this._onchange!==null&&this.removeEventListener("change",this._onchange[1]),typeof w=="function"){const F=w.bind(this);this.addEventListener("change",F),this._onchange=[w,F]}else this._onchange=null}get onerror(){return this._onerror===null?this._onerror:this._onerror[0]}set onerror(w){if(this._onerror!==null&&this.removeEventListener("error",this._onerror[1]),typeof w=="function"){const F=w.bind(this);this.addEventListener("error",F),this._onerror=[w,F]}else this._onerror=null}get onreadystatechange(){return this._onreadystatechange===null?this._onreadystatechange:this._onreadystatechange[0]}set onreadystatechange(w){if(this._onreadystatechange!==null&&this.removeEventListener("readystatechange",this._onreadystatechange[1]),typeof w=="function"){const F=w.bind(this);this.addEventListener("readystatechange",F),this._onreadystatechange=[w,F]}else this._onreadystatechange=null}get readyState(){return this._readyState}get startPosition(){return this._startPosition}get timingProviderSource(){return this._timingProviderSource}query(){if(this._readyState!=="open")throw l();const w=S.now()/1e3,F=this._timingProviderSource===null?w-this._vector.timestamp:w+this._skew-this._vector.timestamp,C=p(this._vector,F);return this._endPosition<C.position||this._startPosition>C.position?(this._setInternalVector({...C,acceleration:0,position:this._endPosition<C.position?this._endPosition:this._startPosition,velocity:0}),this.query()):C}update(w){if(this._readyState!=="open")return Promise.reject(l());if(this._timingProviderSource!==null){const m=this._timingProviderSource.update(w);return m instanceof Promise?m:Promise.reject(new TypeError("The timingProviderSource failed to return a promise."))}const F=g(w);if(Object.keys(F).length===0)return Promise.resolve();const C={...this.query(),...F},{position:E,velocity:y,acceleration:P}=C;return E<this._startPosition||E>this._endPosition||E===this._startPosition&&(y<0||y===0&&P<0)||E===this._endPosition&&(y>0||y===0&&P>0)?Promise.reject(o()):(this._setInternalVector(C),Promise.resolve())}_isAllowedTransition(w){return this._readyState==="closing"&&w==="closed"||this._readyState==="connecting"||this._readyState==="open"&&(w==="closed"||w==="closing")}_setInternalTimeout(){if(this._timeoutId!==null&&(clearTimeout(this._timeoutId),this._timeoutId=null),this._endPosition===Number.POSITIVE_INFINITY&&this._startPosition===Number.NEGATIVE_INFINITY||this._vector.acceleration===0&&this._vector.velocity===0)return;const w=i(this._vector,this._startPosition,this._endPosition);w!==null&&(this._timeoutId=b(()=>this.query(),w))}_setInternalVector(w){this._vector=w,this._setInternalTimeout(),b(()=>this.dispatchEvent(new Event("change")))}},Jz=()=>typeof window>"u"?null:window,eY=(i,o,l,d)=>{if(l===0&&o===0)return i!==d?[]:[0];if(l===0)return[(d-i)/o];const g=o/l,S=Math.sqrt(g**2-2/l*(i-d));return[S-g,-(S+g)].filter(b=>!isNaN(b)).sort()},tY=i=>{if(i===void 0)return{};let o=i.acceleration!==null&&i.acceleration!==void 0?{acceleration:i.acceleration}:{};return i.position!==null&&i.position!==void 0&&(o={...o,position:i.position}),i.velocity!==null&&i.velocity!==void 0?{...o,velocity:i.velocity}:o},mB=(i,o)=>{const{acceleration:l,position:d,timestamp:g,velocity:S}=i;return{acceleration:l,position:d+S*o+.5*l*o**2,timestamp:g+o,velocity:S+l*o}},nY=(i,o)=>l=>{const d={value:i};return Object.defineProperties(l,{currentTarget:d,target:d}),typeof o=="function"?o.call(i,l):o.handleEvent.call(i,l)},rY=Qz(zz(Vz(Kz(eY))),$z,Xz,Yz(Wz(Jz()),nY),tY,performance,setTimeout,mB),U3=Symbol.observable||"@@observable";function iY(i){return Symbol.observable||(typeof i=="function"&&i.prototype&&i.prototype[Symbol.observable]?(i.prototype[U3]=i.prototype[Symbol.observable],delete i.prototype[Symbol.observable]):(i[U3]=i[Symbol.observable],delete i[Symbol.observable])),i}const o0=()=>{},B3=i=>{throw i};function oY(i){var o,l,d;return i?i.next&&i.error&&i.complete?i:{complete:((o=i.complete)!=null?o:o0).bind(i),error:((l=i.error)!=null?l:B3).bind(i),next:((d=i.next)!=null?d:o0).bind(i)}:{complete:o0,error:B3,next:o0}}const aY=(i,o,l)=>()=>l(d=>{if(o===null||o.cancelAnimationFrame===void 0||o.requestAnimationFrame===void 0)return i(d);let g=o.requestAnimationFrame(function S(b){g=o.requestAnimationFrame(S),d.next(b)});return()=>o.cancelAnimationFrame(g)}),sY=i=>(o,l,d)=>i(g=>{const S=b=>g.next(b);return o.addEventListener(l,S,d),()=>o.removeEventListener(l,S,d)}),uY=()=>typeof window>"u"?null:window,lY=(i,o)=>{const l=()=>{},d=g=>typeof g[0]=="function";return g=>{const S=(...b)=>{const p=g(d(b)?o({next:b[0]}):o(...b));return p!==void 0?p:l};return S[Symbol.observable]=()=>({subscribe:(...b)=>({unsubscribe:S(...b)})}),i(S)}},cY=i=>(i.error(new Error("The required browser API seems to be not supported.")),()=>{}),fY=uY(),vB=lY(iY,oY),dY=aY(cY,fY,vB),hY=sY(vB),pY=i=>(o,l,d,g)=>{const S=(Math.abs(o)+i)/i;return Math.max(l,Math.min(d,o>0?g/S:S*g))},gY=1,mY=.5,j3=.025,vY=(i,o,l,d,g,S,b)=>{const p=b!==null&&b.navigator.userAgent.includes("Safari")&&!b.navigator.userAgent.includes("Chrome")?d(j3):l(i(mY),g(b),gY,j3);return o(S,p)},yY=i=>(o,l,d)=>{const g=i.get(o);(g===void 0||Math.abs(g[0]-l)>1e-4||g[1]!==d)&&(o.currentTime=d,i.set(o,[o.currentTime,d]))},EY=(i,o,l)=>(d,g,S)=>{const b=o.get(d);(b===void 0||b[0]!==g||b[1]!==S)&&(d.playbackRate=S>1?Math.max(l,S):Math.min(i,S),o.set(d,[d.playbackRate,S]))},yB=(i,o)=>(l,d,g=null,S=null)=>i(l,d,o,g,S),_Y=(i,o,l,d,g,S)=>(b,p,w,F=null,C=null)=>{let E=null;const y=()=>{const{currentTime:M,duration:_,playbackRate:I}=b,x=p.query();E=w(F===null?x:F(x),M,E);const Z=typeof _=="number"&&!isNaN(_)?_:0,{position:Y,velocity:$}=C===null?E:C(E);return E={...E,position:Y,velocity:$},S(M,Z,b,I,Y,$),$!==0};let P;const m=()=>{y()||(P(),P=U())},T=()=>{let M=g(()=>m(),100);const _=()=>{o(M),M=g(()=>m(),100)},I=[()=>o(M),i()(()=>{_(),m()}),d(p,"change")(()=>{l.visibilityState==="hidden"&&(_(),m())})];return()=>I.forEach(x=>x())},U=()=>d(p,"change")(()=>{y()&&(P(),P=T())});return P=y()?T():U(),()=>P()},TY=(i,[o,l],d,g)=>({position:S,velocity:b},p,w)=>{let{mediaElementDelay:F}=w!=null?w:{mediaElementDelay:0};if(b<o||b>l)return{mediaElementDelay:F,position:S,velocity:0};if(S<0||b===0)return{mediaElementDelay:F,position:S,velocity:b};const C=p-S,E=Math.abs(C);if(E>d){const{position:y}=w!=null?w:{position:null};if(C<0||C>F)return y===p&&(F+=E),{mediaElementDelay:F,position:S+F,velocity:b};if(y!==p)return F-=E,{mediaElementDelay:F,position:S+F,velocity:b}}return E>g?{mediaElementDelay:F,position:p,velocity:i(C,o,l,b)}:{mediaElementDelay:F,position:p,velocity:b}},SY=(i,o,l,d)=>(g,S,b,p,w,F)=>{w<0?(g>0&&l(b,g,0),i(b)):w>=S?(g!==S&&l(b,g,S),i(b)):g!==w?(l(b,g,w),F!==0?(p!==F&&d(b,p,F),o(b)):i(b)):p!==F&&(F!==0?(d(b,p,F),o(b)):i(b))},Z3=.5,wY=i=>o=>(l,d,g)=>{let{lastAppliedPostion:S,lastAppliedTimestamp:b,lastAppliedVelocity:p,lastPlayheadDifference:w,mediaElementDelay:F,numberOfDetectedResets:C,numberOfExpectedResets:E}=g!=null?g:{lastAppliedPostion:0,lastAppliedTimestamp:0,lastAppliedVelocity:0,lastPlayheadDifference:0,mediaElementDelay:0,numberOfDetectedResets:0,numberOfExpectedResets:1};if(l.position<0||l.velocity===0)return S=l.position,p=l.velocity,{lastAppliedPostion:S,lastAppliedTimestamp:0,lastAppliedVelocity:p,lastPlayheadDifference:w,mediaElementDelay:F,numberOfDetectedResets:C,numberOfExpectedResets:E,position:S,velocity:p};if(p===l.velocity&&w<Z3){const m=Math.abs(d-S)*p;if(m<Z3)if(m+.001>w){if(w=m,C<E)return{lastAppliedPostion:S,lastAppliedTimestamp:b,lastAppliedVelocity:p,lastPlayheadDifference:w,mediaElementDelay:F,numberOfDetectedResets:C,numberOfExpectedResets:E,position:d,velocity:p}}else{if(w=m,C+=1,C<=E)return{lastAppliedPostion:S,lastAppliedTimestamp:b,lastAppliedVelocity:p,lastPlayheadDifference:w,mediaElementDelay:F,numberOfDetectedResets:C,numberOfExpectedResets:E,position:d,velocity:p};E+=1}else w=m,E=Math.max(C,1)}else b=0;const y=Math.abs(d-l.position),P=p===0||p<0&&l.velocity>0||p>0&&l.velocity<0;if(y>o||P){if(b>0){const m=l.timestamp-b,{position:T}=i({acceleration:0,position:S,timestamp:b,velocity:p},m);F=T-d}return S=l.position+F,p=l.velocity,{lastAppliedPostion:S,lastAppliedTimestamp:l.timestamp,lastAppliedVelocity:p,lastPlayheadDifference:0,mediaElementDelay:F,numberOfDetectedResets:0,numberOfExpectedResets:E,position:S,velocity:p}}return{lastAppliedPostion:S,lastAppliedTimestamp:b,lastAppliedVelocity:p,lastPlayheadDifference:w,mediaElementDelay:F,numberOfDetectedResets:C,numberOfExpectedResets:E,position:d,velocity:l.velocity}},AY=()=>typeof window>"u"?null:window,tI=[Number.MIN_VALUE,Number.MAX_VALUE],IY=i=>{if(i===null)return tI;const o=new i.Audio;try{o.playbackRate=17}catch(l){return[.0625,16]}try{o.playbackRate=-1}catch(l){return[0,tI[1]]}return tI},bY=i=>{i.paused||i.pause()},CY=i=>{i.paused&&i.play().catch(o=>console.error(o))},EB=wY(mB),RY=SY(bY,CY,yY(new WeakMap),EY(881/882,new WeakMap,882/881)),_B=_Y(dY,clearInterval,document,hY,setInterval,RY);vY(pY,yB,TY,EB,IY,_B,AY());const xY=yB(_B,EB(.4));class NY{constructor(){this.connectedSources=new Map,this.timingObject=new rY}start(){this.timingObject.update({velocity:1})}stop(){this.timingObject.update({velocity:0})}setVelocity(o){this.timingObject.update({velocity:o})}updatePosition(o){this.timingObject.update({position:o})}connectMediaElement(o,l=0){const d=this.connectedSources.get(o);d&&d();const g=xY(o,this.timingObject,({position:S,...b})=>({...b,position:S-l}));return this.connectedSources.set(o,g),g}destroy(){this.connectedSources.forEach(o=>{o()})}}class MY extends df{constructor(o){super(),this.isPaused=!1,this.playheadOffset=0,this.timelineFetchBuffer=3e5,this.prepareBuffer=1e4,this.playerSyncer=new NY,this.state="idle",this.startTime=o,this.serverTimeOffset=0}get adjustedStartTime(){return this.startTime.getTime()?this.startTime.getTime()+this.serverTimeOffset:0}get isLive(){const o=this.adjustedEndTime;return this.adjustedStartTime&&this.adjustedStartTime<Date.now()&&o&&o>Date.now()}get timeToPrepareStart(){return this.adjustedStartTime-Date.now()-this.prepareBuffer}get isInPrepare(){return this.timeToPrepareStart<0&&this.timeToPrepareStart>this.prepareBuffer*-1}get adjustedEndTime(){if(!this.adjustedStartTime||!this._timelineData)return 0;const o=this._timelineData.frameRate,l=jz(this._timelineData);return this.adjustedStartTime+(Ci(l.camera.span.time,o)+Ci(l.camera.span.duration,o))*1e3+this.playheadOffset*1e3}get demoEndtime(){return Date.now()-7047966+1e4}set timelineData(o){this._timelineData=o}pausePlayStream(o,l,d){if(o==="pause"&&!this.isPaused)this.isPaused=!0,this.playerSyncer.stop();else if(o==="play"){if(l&&d){const g=new Date(l).getTime()/1e3,S=new Date(d).getTime()/1e3;this.playheadOffset!==0&&(this.playheadOffset=0),this.playheadOffset=g-S,this.playerSyncer.updatePosition(this.getExpectedPositionInSeconds())}this.onStart()}}serverNow(){return Date.now()-this.serverTimeOffset}onStart(){this.state="started",this.emit("start",void 0),this.isPaused=!1,this.playerSyncer.start(),clearInterval(this.queryInterval),this.queryInterval=setInterval(()=>{const o=this.playerSyncer.timingObject.query().position,l=this.getExpectedPositionInSeconds();this.isPaused||o.toFixed(1)!==l.toFixed(1)&&(console.log("positon is off",o,l),this.playerSyncer.updatePosition(l))},500)}onPrepareStart(){this.emit("prepareStart",void 0)}updateStartTime(o,l=!1){this.startTime=o,this.emit("startTimeUpdated",void 0),this.preparePlayback(),l&&this.adjustedStartTime>Date.now()&&this.updateTimelineFetch()}updateTimelineFetch(){this.adjustedStartTime-this.timelineFetchBuffer>Date.now()?(clearTimeout(this.fetchTimelineTimeout),this.fetchTimelineTimeout=setTimeout(()=>{this.emit("fetchTimeline",void 0)},this.adjustedStartTime-this.timelineFetchBuffer-Date.now())):this.emit("fetchTimeline",void 0)}preparePlayback(){this.adjustedStartTime>Date.now()?(clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),this.playheadOffset=0,this.startTimeout=setTimeout(()=>{this.onStart()},this.adjustedStartTime-Date.now()),this.timeToPrepareStart>0?this.prepareStartTimeout=setTimeout(()=>{this.onPrepareStart()},this.timeToPrepareStart):this.onPrepareStart()):this.state!=="started"&&this._timelineData&&this.onStart()}updateServerTimeOffset(o){this.serverTimeOffset=o}getExpectedPositionInSeconds(){return(Date.now()-this.adjustedStartTime)/1e3-this.playheadOffset}destroy(){clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),clearInterval(this.queryInterval),clearTimeout(this.fetchTimelineTimeout),super.destroy()}}class DY extends df{constructor(o,l,d){super(),this.eventClock=o,this.timelineData=void 0,this.nearEndThreshold=l!=null?l:0,this.transitionThreshold=d!=null?d:2}updateTimelineData(o){this.timelineData=o}updatePlaying(o){var d,g,S;let l=!1;if(this.timelineData){const b=this.timelineData.frameRate,p=(S=(g=(d=o.camera.attentions)==null?void 0:d.filter(w=>w.scope==="global"))==null?void 0:g.sort((w,F)=>Ci(w.time)-Ci(F.time)))!=null?S:[];clearInterval(this.playbackInterval),this.playbackInterval=setInterval(()=>{clearTimeout(this.nearEndTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.attentionTimeout);const F=this.eventClock.getExpectedPositionInSeconds()-Ci(o.camera.span.time,b),C=Ci(o.camera.span.duration,b)-F;if(p.length){const E=p.find(P=>F<Ci(P.time)),y=E?Ci(E.time)-F:0;y>0&&y<1&&(this.attentionTimeout=setTimeout(()=>{this.emit("attention",void 0)},y))}C<=this.nearEndThreshold+1&&C>this.nearEndThreshold&&!l?this.nearEndTimeout=setTimeout(()=>{this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0},(C-this.nearEndThreshold)*1e3):C<this.nearEndThreshold&&!l&&(this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0),C<=this.transitionThreshold+1&&C>this.transitionThreshold&&(this.transitionTimeout=setTimeout(()=>{this.emit("transition",void 0)},(C-this.transitionThreshold)*1e3)),C<=1&&C>0&&(this.endedTimeout=setTimeout(()=>{this.emit("ended",void 0)},C*1e3))},1e3)}}endEvent(){this.emit("eventEnded",void 0)}destroy(){clearInterval(this.playbackInterval),clearTimeout(this.nearEndTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.attentionTimeout),super.destroy()}}const PY="1.0.0";var In=rE();const du=Zb(In);function OY({baseUrl:i,contentfulAccessToken:o,contentfulSpaceId:l}){const[d,g]=In.useState(),[S,b]=In.useState(),p=In.useCallback((w,F)=>{var C,E;return d&&((E=(C=d.find(y=>y.slug===w))==null?void 0:C.resourcesCollection.items.find(y=>y.key===F))==null?void 0:E.value)||""},[d]);return In.useEffect(()=>{i&&o&&l&&(b(void 0),Hz(i,o,l).then(w=>{g(w)}).catch(w=>{b(w)}))},[i,o,l]),{contentfulData:d,getContentfulValue:p,error:S}}const LY={ticketCode:"",preferredProfile:"dash-drm",getContentfulValue:()=>"",isDev:!1,preConnectErrors:[],postConnectErrors:[]},Ga=du.createContext(LY);function kY({children:i,baseUrl:o,preferredProfile:l,contentfulAccessToken:d,contentfulSpaceId:g,newSetupToggle:S=!1,ticketCodeProp:b}){const p=xg(),w=PY,[F,C]=In.useState(),[E,y]=In.useState(),[P,m]=In.useState(),[T,U]=In.useState(),[M,_]=In.useState(),[I,x]=In.useState(),[Z,Y]=In.useState(),[$,Q]=In.useState(b),[se,R]=In.useState(),[X,ce]=In.useState(),[oe,me]=In.useState(),[Ce,Je]=In.useState(),[we,qe]=In.useState(),[st,ft]=In.useState([]),[be,He]=In.useState([]),[vt,Re]=In.useState(!1),[Ye,ot]=In.useState(),{getContentfulValue:Ht,error:Bt}=OY({baseUrl:o,contentfulAccessToken:d,contentfulSpaceId:g}),Et=3;function Dt(Ne,ne){return ne.filter(Be=>Ne!==Be.name)}return In.useEffect(()=>{ft(Bt?Ne=>[...Ne,Bt]:Ne=>Dt(ls.CONTENTFUL,Ne))},[Bt]),In.useEffect(()=>{Q(b)},[b]),In.useEffect(()=>{o&&p&&S&&(async()=>{let ne=0;const Be=()=>Fz({deviceId:p,appVersion:w,baseUrl:o});for(;ne<Et;)await Be().then(L=>{qe(L),ne=Et}).catch(L=>{ne+=1,ne===2&&console.error(L)})})()},[w,o,p,S]),In.useEffect(()=>{if(!we)return;const Ne=new fB().withUrl(we.url,{accessTokenFactory:()=>we.accessToken,transport:mo.WebSockets}).build();Ne.start().catch(ne=>{console.error("Global signalR connection failed:",ne)}),Ne.on(ou.SETUP_REQUEST_HOST_TV_CONNECTED,({scanTvDeviceId:ne,ticketCode:Be})=>{Q(Be),R(ne),localStorage.setItem("ticketCode",Be)}),_(Ne)},[we]),In.useEffect(()=>{!$||!se||!M||(console.log("Disconnecting global signalR..."),M.invoke(ou.CLIENT_DISCONNECT))},[$,se,M]),In.useEffect(()=>{if(!$||!se&&S){Je(void 0);return}const Ne=$[0];ft(ne=>Dt(ls.NEGOTIATE,ne)),Uz({deviceId:p,deviceType:6,appVersion:w,ticketCode:$,scanTvDeviceId:se,ticketPrefix:Ne,baseUrl:o}).then(ne=>{Je(ne),Re(ne.ticketType>3)}).catch(ne=>{ft(Be=>[...Be,ne])})},[$,w,o,p,se,S]),In.useEffect(()=>{if(!(Ce!=null&&Ce.accessToken)||!Ce.url||!$)return;const Ne=new MY(new Date(0)),ne=new DY(Ne),Be=new Oz({groupName:$,deviceId:p,debug:!1});return Be.connect({url:Ce.url,accessToken:Ce.accessToken}),Be.on("setupStatusUpdate",({deviceLists:L})=>{const D=L.connectedDevices[0].sessionId;ot(L.connectedDevices),console.log("signalRClient connected with sessionId: ",D),x(D),He(ge=>Dt(ls.EVENT_STATUS,ge));const G=()=>{L3({appVersion:w,baseUrl:o,ticketCode:$,sessionId:D}).then(ge=>{if(y(ge),ge.broadcastStart)if(vt){const de=new Date;de.setHours(de.getHours()+1),Ne.updateStartTime(de,!0)}else Ne.updateStartTime(new Date(ge.broadcastStart),!0)}).catch(ge=>{He(de=>[...de,ge])})};G(),Be.on("eventStatusChanged",G),F3($[0],o,d,g).then(ge=>{m(ge)}).catch(ge=>{He(de=>[...de,ge])}),He(ge=>Dt(ls.GENERATE,ge));const K=()=>{O3({sessionId:D,appVersion:w,baseUrl:o,ticketCode:$}).then(ge=>{Ne.timelineData=ge,C(ge),ne.updateTimelineData(ge)}).catch(ge=>{He(de=>[...de,ge])})};Ne.on("fetchTimeline",K)}),Be.on("stateUpdated",({state:L})=>{console.log(L,"stateUpdate"),Y(L)}),Be.on("stateUpdated",({state:L})=>{console.log(L,"stateUpdate"),Y(L)}),Be.on("serverTimeOffsetUpdate",({serverTimeOffset:L})=>{console.log("server time offset updated",L),Ne.updateServerTimeOffset(L)}),Be.on("startTimeUpdated",({startTime:L})=>{console.log("startTimeUpdated",L),Ne.updateStartTime(L,!0)}),Be.on("connected",({sessionId:L})=>{console.log("signalRClient connected with sessionId: ",L),x(L),He(K=>Dt(ls.EVENT_STATUS,K));const D=()=>{L3({appVersion:w,baseUrl:o,ticketCode:$,sessionId:L}).then(K=>{if(y(K),K.broadcastStart)if(vt){const ge=new Date;ge.setHours(ge.getHours()+1),Ne.updateStartTime(ge,!0)}else Ne.updateStartTime(new Date(K.broadcastStart),!0)}).catch(K=>{He(ge=>[...ge,K])})};D(),Be.on("eventStatusChanged",D),F3($[0],o,d,g).then(K=>{m(K)}).catch(K=>{He(ge=>[...ge,K])}),He(K=>Dt(ls.GENERATE,K));const G=()=>{O3({sessionId:L,appVersion:w,baseUrl:o,ticketCode:$}).then(K=>{Ne.timelineData=K,C(K),ne.updateTimelineData(K)}).catch(K=>{He(ge=>[...ge,K])})};Ne.on("fetchTimeline",G)}),U(Be),ce(Ne),me(ne),()=>{Y(void 0),ot(void 0),Be.destroy(),ne.destroy(),Ne.destroy()}},[Ce,$,w,o,p,d,g,vt]),Rt.jsx(Ga.Provider,{value:{signalRClient:T,timelineData:F,eventStatus:E,eventMeta:P,hubState:Z,sessionId:I,ticketCode:$,eventClock:X,orchestrator:oe,preferredProfile:l,baseUrl:o,negotiateData:Ce,isDev:vt,getContentfulValue:Ht,preConnectErrors:st,postConnectErrors:be,connectedDevices:Ye},children:i})}const FY="_focused_tk4zu_1",UY={focused:FY};function ta({selfFocus:i,...o}){const{ref:l,focused:d,focusSelf:g}=sB.useFocusable({onEnterPress:()=>{o.onClick()}});return In.useEffect(()=>{i&&g()},[g,i]),Rt.jsx("button",{...o,ref:l,className:"".concat(o.className||""," ").concat(d?UY.focused:""," ").concat(d&&o.focusstile?o.focusstile:"")})}function Sh(){return In.useContext(Ga).signalRClient}function hf(){return In.useContext(Ga).timelineData}function XC(){return In.useContext(Ga).eventMeta}function BY(){return In.useContext(Ga).hubState}function jY(){return In.useContext(Ga).sessionId}function ZY(){return In.useContext(Ga).ticketCode[0]}function mu(){return In.useContext(Ga).eventClock}function qY(){return In.useContext(Ga).negotiateData}function QC(){return In.useContext(Ga).isDev}function GY(){return In.useContext(Ga).postConnectErrors}function sm(){return In.useContext(Ga).orchestrator}function JC(){return In.useContext(Ga).connectedDevices}function TB(){const i=hf(),o=ZY(),l=In.useContext(Ga);return In.useMemo(()=>[i==null?void 0:i.profiles.find(d=>d.name===l.preferredProfile),l.preferredProfile==="dash-drm"&&l.baseUrl?Bz(l.baseUrl):void 0,i==null?void 0:i.queryParameters],[l.preferredProfile,o,i,l.baseUrl])}const HY=()=>Rt.jsx("svg",{width:"800px",height:"800px",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:Rt.jsx("path",{d:"M36.96875 0C36.417969 0.015625 35.988281 0.480469 36 1.03125C36.011719 1.578125 36.457031 2 37 2L37.03125 2C37.160156 1.984375 40.671875 1.984375 44.28125 5.6875C47.914063 9.410156 48 12.96875 48 13C48 13.550781 48.445313 14 49 14C49.554688 14 50 13.550781 50 13C50 12.824219 49.953125 8.65625 45.71875 4.3125C41.457031 -0.0546875 37.164063 -0.0117188 36.96875 0 Z M 37 6C36.453125 6 36.007813 6.453125 36 7C35.992188 7.546875 36.453125 7.988281 37 8C37.066406 8 38.628906 8.066406 40.28125 9.71875C41.933594 11.371094 42 12.945313 42 13C42 13.550781 42.445313 14 43 14C43.554688 14 44 13.550781 44 13C44 12.902344 43.984375 10.546875 41.71875 8.28125C39.453125 6.015625 37.097656 6 37 6 Z M 28.71875 6.03125C27.644531 6.027344 26.539063 6.402344 25.6875 7.1875L1.1875 31.78125C-0.40625 33.375 -0.417969 35.984375 1.1875 37.71875L12.40625 48.90625C13.175781 49.675781 14.199219 50.09375 15.3125 50.09375C16.410156 50.09375 17.46875 49.683594 18.3125 48.90625L42.84375 24.34375C44.371094 22.558594 44.371094 19.964844 42.8125 18.40625L31.59375 7.1875C30.828125 6.421875 29.792969 6.035156 28.71875 6.03125 Z M 28 15C31.867188 15 35 18.132813 35 22C35 25.867188 31.867188 29 28 29C24.132813 29 21 25.867188 21 22C21 18.132813 24.132813 15 28 15 Z M 28 20C26.894531 20 26 20.894531 26 22C26 23.105469 26.894531 24 28 24C29.105469 24 30 23.105469 30 22C30 20.894531 29.105469 20 28 20 Z M 15 27C16.105469 27 17 27.894531 17 29C17 30.105469 16.105469 31 15 31C13.894531 31 13 30.105469 13 29C13 27.894531 13.894531 27 15 27 Z M 10 32C11.105469 32 12 32.894531 12 34C12 35.105469 11.105469 36 10 36C8.894531 36 8 35.105469 8 34C8 32.894531 8.894531 32 10 32 Z M 21 33C22.105469 33 23 33.894531 23 35C23 36.105469 22.105469 37 21 37C19.894531 37 19 36.105469 19 35C19 33.894531 19.894531 33 21 33 Z M 16 38C17.105469 38 18 38.894531 18 40C18 41.105469 17.105469 42 16 42C14.894531 42 14 41.105469 14 40C14 38.894531 14.894531 38 16 38Z"})});function VY(){const i=Sh(),o=mu(),l=In.useCallback(b=>{!o||!i||i.sendGroupCommand({command:"play",value:{senderID:xg(),startDate:new Date(o.startTime.getTime()-b).toISOString(),rateClockState:{rate:1}}})},[i,o]),d=In.useCallback(b=>{!o||!i||i.sendGroupCommand({command:"play",value:{senderID:xg(),startDate:new Date(o.serverNow()-b).toISOString(),rateClockState:{rate:1}}})},[i,o]),g=In.useCallback(()=>{if(!o||!i)return;const b=new Date;b.setSeconds(b.getSeconds()+5),i.sendGroupCommand({command:"play",value:{senderID:xg(),startDate:new Date(b).toISOString(),rateClockState:{rate:1}}})},[i,o]);return{seekBy:l,seekTo:d,disconnect:()=>{i==null||i.disconnect()},restart:g}}function KY({eventPlayer:i}){var T,U;const o=Sh(),l=mu(),[d,g]=In.useState(!1),[S,b]=In.useState(),{seekBy:p,seekTo:w,disconnect:F,restart:C}=VY(),[E,y]=In.useState([]),P=hf(),m=()=>{g(!d)};return In.useEffect(()=>{if(!l||!P)return;const M=setInterval(()=>{const _=l.getExpectedPositionInSeconds(),I=IE(P,_);y(I.map(x=>x)),b({expectedPosition:_})},500);return()=>{clearInterval(M)}},[l,P]),Rt.jsxs("div",{className:"demo-remote-container",children:[Rt.jsx("div",{className:"icon-wrapper",onClick:m,children:Rt.jsx(HY,{})}),d&&Rt.jsxs(Rt.Fragment,{children:[Rt.jsx("h2",{children:"Demo Remote"}),Rt.jsx(ta,{selfFocus:!0,onClick:()=>{i==null||i.requestFullscreen()},children:"Go to fullscreen"}),S&&Rt.jsx("div",{children:Rt.jsxs("p",{children:["Expected position in seconds"," ",S.expectedPosition.toFixed(2)]})}),Rt.jsx(ta,{onClick:()=>{w(-5e3)},children:"Start in 5 sec"}),Rt.jsx(ta,{onClick:()=>{C()},children:"Restart"}),Rt.jsx(ta,{onClick:()=>{p(1e4)},children:"Seek Forward"}),Rt.jsx(ta,{onClick:()=>{p(-1e4)},children:"Seek Backward"}),Rt.jsx(ta,{onClick:()=>{w(1e4)},children:"Seek to first video"}),Rt.jsx(ta,{onClick:()=>{w(1e5)},children:"Seek to 100"}),Rt.jsx(ta,{onClick:F,children:"Disconnect"}),Rt.jsx("h3",{children:"Available streams right now:"}),E.map(M=>Rt.jsxs("div",{className:"cast-button-group",children:[Rt.jsxs(ta,{onClick:()=>{o==null||o.sendGroupCommand({command:"cast",value:M.index})},children:[Rt.jsx("span",{style:{margin:"10px"},children:""}),M.title]}),Rt.jsxs(ta,{onClick:()=>{o==null||o.sendGroupCommand({command:"prepareCast",value:M.index})},children:[Rt.jsx("span",{style:{margin:"10px"},children:""}),"prepare cast"]}),Rt.jsxs(ta,{onClick:()=>{o==null||o.sendGroupCommand({command:"cancelCast",value:M.index})},children:[Rt.jsx("span",{style:{margin:"10px"},children:""}),"cancel cast"]})]},M.camera.assetName)),Rt.jsx("h3",{children:"Statistics:"}),Rt.jsxs("div",{className:"statistics-block",children:[Rt.jsx("label",{children:"Total frames:"}),Rt.jsx("div",{children:((T=i==null?void 0:i.stats)==null?void 0:T.totalVideoFrames)||0})]}),Rt.jsxs("div",{className:"statistics-block",children:[Rt.jsx("label",{children:"Dropped frames:"}),Rt.jsx("div",{children:((U=i==null?void 0:i.stats)==null?void 0:U.droppedVideoFrames)||0})]})]})]})}var SB={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(i,o){(function(l,d){i.exports=d()})(self,function(){return function(){var l={4593:function(b,p){var w,F,C,E,y,P=function(U){for(var M=[],_=0;_<U.length;++_){var I=U.charCodeAt(_);I<128?M.push(I):I<2048?(M.push(192|I>>6),M.push(128|63&I)):I<65536?(M.push(224|I>>12),M.push(128|63&I>>6),M.push(128|63&I)):(M.push(240|I>>18),M.push(128|63&I>>12),M.push(128|63&I>>6),M.push(128|63&I))}return M},m=function(U){for(var M=[],_=0;_<U.length;){var I=U[_++];I<128||(I<224?(I=(31&I)<<6,I|=63&U[_++]):I<240?(I=(15&I)<<12,I|=(63&U[_++])<<6,I|=63&U[_++]):(I=(7&I)<<18,I|=(63&U[_++])<<12,I|=(63&U[_++])<<6,I|=63&U[_++])),M.push(String.fromCharCode(I))}return M.join("")},T={};w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=function(U){for(var M=0,_=[],I=0|U.length/3;0<I--;){var x=(U[M]<<16)+(U[M+1]<<8)+U[M+2];M+=3,_.push(w.charAt(63&x>>18)),_.push(w.charAt(63&x>>12)),_.push(w.charAt(63&x>>6)),_.push(w.charAt(63&x))}return U.length-M==2?(x=(U[M]<<16)+(U[M+1]<<8),_.push(w.charAt(63&x>>18)),_.push(w.charAt(63&x>>12)),_.push(w.charAt(63&x>>6)),_.push("=")):U.length-M==1&&(x=U[M]<<16,_.push(w.charAt(63&x>>18)),_.push(w.charAt(63&x>>12)),_.push("==")),_.join("")},C=function(){for(var U=[],M=0;M<w.length;++M)U[w.charCodeAt(M)]=M;return U[61]=0,U}(),E=function(U){for(var M=0,_=[],I=0|U.length/4;0<I--;){var x=(C[U.charCodeAt(M)]<<18)+(C[U.charCodeAt(M+1)]<<12)+(C[U.charCodeAt(M+2)]<<6)+C[U.charCodeAt(M+3)];_.push(255&x>>16),_.push(255&x>>8),_.push(255&x),M+=4}return _&&(U.charAt(M-2)=="="?(_.pop(),_.pop()):U.charAt(M-1)=="="&&_.pop()),_},y={encode:function(U){for(var M=[],_=0;_<U.length;++_)M.push(U.charCodeAt(_));return M},decode:function(U){for(var M=0;M<s.length;++M)a[M]=String.fromCharCode(a[M]);return a.join("")}},T.decodeArray=function(U){var M=E(U);return new Uint8Array(M)},T.encodeASCII=function(U){var M=y.encode(U);return F(M)},T.decodeASCII=function(U){var M=E(U);return y.decode(M)},T.encode=function(U){var M=P(U);return F(M)},T.decode=function(U){var M=E(U);return m(M)},p.decode=T.decode,p.decodeArray=T.decodeArray,p.encode=T.encode,p.encodeASCII=T.encodeASCII},452:function(b,p){(function(w){var F={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},C=function(R){var X=R;return F.hasOwnProperty(R)&&(X=F[R]),String.fromCharCode(X)},E=15,y=32,P={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},m={17:2,18:4,21:6,22:8,23:10,19:13,20:15},T={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},U={25:2,26:4,29:6,30:8,31:10,27:13,28:15},M=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],_={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(R){this.time=R},log:function(R,X){var ce=this.verboseFilter[R];this.verboseLevel>=ce&&console.log(this.time+" ["+R+"] "+X)}},I=function(R){for(var X=[],ce=0;ce<R.length;ce++)X.push(R[ce].toString(16));return X},x=function(R,X,ce,oe,me){this.foreground=R||"white",this.underline=X||!1,this.italics=ce||!1,this.background=oe||"black",this.flash=me||!1};x.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(R){for(var X=["foreground","underline","italics","background","flash"],ce=0;ce<X.length;ce++){var oe=X[ce];R.hasOwnProperty(oe)&&(this[oe]=R[oe])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(R){return this.foreground===R.foreground&&this.underline===R.underline&&this.italics===R.italics&&this.background===R.background&&this.flash===R.flash},copy:function(R){this.foreground=R.foreground,this.underline=R.underline,this.italics=R.italics,this.background=R.background,this.flash=R.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var Z=function(R,X,ce,oe,me,Ce){this.uchar=R||" ",this.penState=new x(X,ce,oe,me,Ce)};Z.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(R,X){this.uchar=R,this.penState.copy(X)},setPenState:function(R){this.penState.copy(R)},equals:function(R){return this.uchar===R.uchar&&this.penState.equals(R.penState)},copy:function(R){this.uchar=R.uchar,this.penState.copy(R.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var Y=function(){this.chars=[];for(var R=0;R<y;R++)this.chars.push(new Z);this.pos=0,this.currPenState=new x};Y.prototype={equals:function(R){for(var X=!0,ce=0;ce<y;ce++)if(!this.chars[ce].equals(R.chars[ce])){X=!1;break}return X},copy:function(R){for(var X=0;X<y;X++)this.chars[X].copy(R.chars[X])},isEmpty:function(){for(var R=!0,X=0;X<y;X++)if(!this.chars[X].isEmpty()){R=!1;break}return R},setCursor:function(R){this.pos!==R&&(this.pos=R),this.pos<0?(_.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>y&&(_.log("ERROR","Too large cursor position "+this.pos),this.pos=y)},moveCursor:function(R){var X=this.pos+R;if(R>1)for(var ce=this.pos+1;ce<X+1;ce++)this.chars[ce].setPenState(this.currPenState);this.setCursor(X)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(R){R>=144&&this.backSpace();var X=C(R);this.pos>=y?_.log("ERROR","Cannot insert "+R.toString(16)+" ("+X+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(X,this.currPenState),this.moveCursor(1))},clearFromPos:function(R){var X;for(X=R;X<y;X++)this.chars[X].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var R=[],X=!0,ce=0;ce<y;ce++){var oe=this.chars[ce].uchar;oe!==" "&&(X=!1),R.push(oe)}return X?"":R.join("")},setPenStyles:function(R){this.currPenState.setStyles(R),this.chars[this.pos].setPenState(this.currPenState)}};var $=function(){this.rows=[];for(var R=0;R<E;R++)this.rows.push(new Y);this.currRow=14,this.nrRollUpRows=null,this.reset()};$.prototype={reset:function(){for(var R=0;R<E;R++)this.rows[R].clear();this.currRow=14},equals:function(R){for(var X=!0,ce=0;ce<E;ce++)if(!this.rows[ce].equals(R.rows[ce])){X=!1;break}return X},copy:function(R){for(var X=0;X<E;X++)this.rows[X].copy(R.rows[X])},isEmpty:function(){for(var R=!0,X=0;X<E;X++)if(!this.rows[X].isEmpty()){R=!1;break}return R},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(R){this.rows[this.currRow].insertChar(R)},setPen:function(R){this.rows[this.currRow].setPenStyles(R)},moveCursor:function(R){this.rows[this.currRow].moveCursor(R)},setCursor:function(R){_.log("INFO","setCursor: "+R),this.rows[this.currRow].setCursor(R)},setPAC:function(R){_.log("INFO","pacData = "+JSON.stringify(R));var X=R.row-1;this.nrRollUpRows&&X<this.nrRollUpRows-1&&(X=this.nrRollUpRows-1),this.currRow=X;var ce=this.rows[this.currRow];if(R.indent!==null){var oe=R.indent,me=Math.max(oe-1,0);ce.setCursor(R.indent),R.color=ce.chars[me].penState.foreground}var Ce={foreground:R.color,underline:R.underline,italics:R.italics,background:"black",flash:!1};this.setPen(Ce)},setBkgData:function(R){_.log("INFO","bkgData = "+JSON.stringify(R)),this.backSpace(),this.setPen(R),this.insertChar(32)},setRollUpRows:function(R){this.nrRollUpRows=R},rollUp:function(){if(this.nrRollUpRows!==null){_.log("TEXT",this.getDisplayText());var R=this.currRow+1-this.nrRollUpRows,X=this.rows.splice(R,1)[0];X.clear(),this.rows.splice(this.currRow,0,X),_.log("INFO","Rolling up")}else _.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(R){R=R||!1;for(var X=[],ce="",oe=-1,me=0;me<E;me++){var Ce=this.rows[me].getTextString();Ce&&(oe=me+1,R?X.push("Row "+oe+': "'+Ce+'"'):X.push(Ce.trim()))}return X.length>0&&(ce=R?"["+X.join(" | ")+"]":X.join("\n")),ce},getTextAndFormat:function(){return this.rows}};var Q=function(R,X){this.chNr=R,this.outputFilter=X,this.mode=null,this.verbose=0,this.displayedMemory=new $,this.nonDisplayedMemory=new $,this.lastOutputScreen=new $,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};Q.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(R){this.outputFilter=R},setPAC:function(R){this.writeScreen.setPAC(R)},setBkgData:function(R){this.writeScreen.setBkgData(R)},setMode:function(R){R!==this.mode&&(this.mode=R,_.log("INFO","MODE="+R),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=R)},insertChars:function(R){for(var X=0;X<R.length;X++)this.writeScreen.insertChar(R[X]);var ce=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";_.log("INFO",ce+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(_.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){_.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){_.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){_.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(R){_.log("INFO","RU("+R+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(R)},cc_FON:function(){_.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){_.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){_.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){_.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){_.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){_.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){_.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(_.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var R=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=R,this.writeScreen=this.nonDisplayedMemory,_.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(R){_.log("INFO","TO("+R+") - Tab Offset"),this.writeScreen.moveCursor(R)},cc_MIDROW:function(R){var X={flash:!1};if(X.underline=R%2==1,X.italics=R>=46,X.italics)X.foreground="white";else{var ce=Math.floor(R/2)-16;X.foreground=["white","green","blue","cyan","red","yellow","magenta"][ce]}_.log("INFO","MIDROW: "+JSON.stringify(X)),this.writeScreen.setPen(X)},outputDataUpdate:function(){var R=_.time;R!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(R,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,R,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:R):this.cueStartTime=R,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(R){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,R,this.displayedMemory),this.cueStartTime=R))}};var se=function(R,X,ce){this.field=R||1,this.outputs=[X,ce],this.channels=[new Q(1,X),new Q(2,ce)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};se.prototype={getHandler:function(R){return this.channels[R].getHandler()},setHandler:function(R,X){this.channels[R].setHandler(X)},addData:function(R,X){var ce,oe,me,Ce=!1;this.lastTime=R,_.setTime(R);for(var Je=0;Je<X.length;Je+=2)oe=127&X[Je],me=127&X[Je+1],oe>=16&&oe<=31&&oe===this.lastCmdA&&me===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,_.log("DEBUG","Repeated command ("+I([oe,me])+") is dropped")):oe!==0||me!==0?(_.log("DATA","["+I([X[Je],X[Je+1]])+"] -> ("+I([oe,me])+")"),(ce=this.parseCmd(oe,me))||(ce=this.parseMidrow(oe,me)),ce||(ce=this.parsePAC(oe,me)),ce||(ce=this.parseBackgroundAttributes(oe,me)),ce||(Ce=this.parseChars(oe,me))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(Ce):_.log("WARNING","No channel found yet. TEXT-MODE?")),ce?this.dataCounters.cmd+=2:Ce?this.dataCounters.char+=2:(this.dataCounters.other+=2,_.log("WARNING","Couldn't parse cleaned data "+I([oe,me])+" orig: "+I([X[Je],X[Je+1]])))):this.dataCounters.padding+=2},parseCmd:function(R,X){var ce;if(!((R===20||R===21||R===28||R===29)&&32<=X&&X<=47||(R===23||R===31)&&33<=X&&X<=35))return!1;ce=R===20||R===21||R===23?1:2;var oe=this.channels[ce-1];return R===20||R===21||R===28||R===29?X===32?oe.cc_RCL():X===33?oe.cc_BS():X===34?oe.cc_AOF():X===35?oe.cc_AON():X===36?oe.cc_DER():X===37?oe.cc_RU(2):X===38?oe.cc_RU(3):X===39?oe.cc_RU(4):X===40?oe.cc_FON():X===41?oe.cc_RDC():X===42?oe.cc_TR():X===43?oe.cc_RTD():X===44?oe.cc_EDM():X===45?oe.cc_CR():X===46?oe.cc_ENM():X===47&&oe.cc_EOC():oe.cc_TO(X-32),this.lastCmdA=R,this.lastCmdB=X,this.currChNr=ce,!0},parseMidrow:function(R,X){var ce=null;if((R===17||R===25)&&32<=X&&X<=47){if((ce=R===17?1:2)!==this.currChNr)return _.log("ERROR","Mismatch channel in midrow parsing"),!1;var oe=this.channels[ce-1];return oe.insertChars([32]),oe.cc_MIDROW(X),_.log("DEBUG","MIDROW ("+I([R,X])+")"),this.lastCmdA=R,this.lastCmdB=X,!0}return!1},parsePAC:function(R,X){var ce,oe;if(!((17<=R&&R<=23||25<=R&&R<=31)&&64<=X&&X<=127||(R===16||R===24)&&64<=X&&X<=95))return!1;ce=R<=23?1:2,oe=64<=X&&X<=95?ce===1?P[R]:T[R]:ce===1?m[R]:U[R];var me=this.interpretPAC(oe,X);return this.channels[ce-1].setPAC(me),this.lastCmdA=R,this.lastCmdB=X,this.currChNr=ce,!0},interpretPAC:function(R,X){var ce,oe={color:null,italics:!1,indent:null,underline:!1,row:R};return ce=X>95?X-96:X-64,oe.underline=(1&ce)==1,ce<=13?oe.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(ce/2)]:ce<=15?(oe.italics=!0,oe.color="white"):oe.indent=4*Math.floor((ce-16)/2),oe},parseChars:function(R,X){var ce=null,oe=null,me=null;if(R>=25?(ce=2,me=R-8):(ce=1,me=R),17<=me&&me<=19){var Ce;Ce=me===17?X+80:me===18?X+112:X+144,_.log("INFO","Special char '"+C(Ce)+"' in channel "+ce),oe=[Ce],this.lastCmdA=R,this.lastCmdB=X}else 32<=R&&R<=127&&(oe=X===0?[R]:[R,X],this.lastCmdA=null,this.lastCmdB=null);if(oe){var Je=I(oe);_.log("DEBUG","Char codes =  "+Je.join(","))}return oe},parseBackgroundAttributes:function(R,X){var ce,oe,me;return((R===16||R===24)&&32<=X&&X<=47||(R===23||R===31)&&45<=X&&X<=47)&&(ce={},R===16||R===24?(oe=Math.floor((X-32)/2),ce.background=M[oe],X%2==1&&(ce.background=ce.background+"_semi")):X===45?ce.background="transparent":(ce.foreground="black",X===47&&(ce.underline=!0)),me=R<24?1:2,this.channels[me-1].setBkgData(ce),this.lastCmdA=R,this.lastCmdB=X,!0)},reset:function(){for(var R=0;R<this.channels.length;R++)this.channels[R]&&this.channels[R].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(R){for(var X=0;X<this.channels.length;X++)this.channels[X]&&this.channels[X].cueSplitAtTime(R)}},w.logger=_,w.PenState=x,w.CaptionScreen=$,w.Cea608Parser=se,w.findCea608Nalus=function(R,X,ce){for(var oe=0,me=X,Ce=[],Je=function(be,He,vt,Re){if(be!==4||He<8)return null;var Ye=vt.getUint8(Re),ot=vt.getUint16(Re+1),Ht=vt.getUint32(Re+3),Bt=vt.getUint8(Re+7);return Ye==181&&ot==49&&Ht==1195456820&&Bt==3};me<X+ce;){if(oe=R.getUint32(me),(31&R.getUint8(me+4))==6)for(var we=me+5,qe=-1;we<me+4+oe-1;){qe=0;for(var st=255;st===255;)qe+=st=R.getUint8(we),we++;var ft=0;for(st=255;st===255;)ft+=st=R.getUint8(we),we++;Je(qe,ft,R,we)&&Ce.push([we,ft]),we+=ft}me+=oe+4}return Ce},w.extractCea608DataFromRange=function(R,X){var ce=X[0],oe=[[],[]];ce+=8;var me=31&R.getUint8(ce);ce+=2;for(var Ce=0;Ce<me;Ce++){var Je=R.getUint8(ce),we=4&Je,qe=3&Je;ce++;var st=R.getUint8(ce);ce++;var ft=R.getUint8(ce);ce++,we&&(127&st)+(127&ft)!=0&&(qe===0?(oe[0].push(st),oe[0].push(ft)):qe===1&&(oe[1].push(st),oe[1].push(ft)))}return oe}})(p)},8416:function(b,p,w){var F=w(1139),C=w(5448),E=w(6398),y=w(2032),P=(w(5530),typeof window<"u"&&window||w.g),m=P.dashjs;m||(m=P.dashjs={}),m.MediaPlayer=F.Z,m.FactoryMaker=C.Z,m.Debug=E.Z,m.Version=(0,y.e)()},6398:function(b,p,w){var F=w(5595),C=w(8512),E=w(5448),y=1,P=2,m=3,T=4,U=5;function M(I){I=I||{};var x,Z,Y,$,Q=this.context,se=(0,F.Z)(Q).getInstance(),R=I.settings,X=[];function ce(st){return st&&st.bind?st.bind(window.console):window.console.log.bind(window.console)}function oe(){for(var st=arguments.length,ft=new Array(st),be=0;be<st;be++)ft[be]=arguments[be];qe.apply(void 0,[y,this].concat(ft))}function me(){for(var st=arguments.length,ft=new Array(st),be=0;be<st;be++)ft[be]=arguments[be];qe.apply(void 0,[P,this].concat(ft))}function Ce(){for(var st=arguments.length,ft=new Array(st),be=0;be<st;be++)ft[be]=arguments[be];qe.apply(void 0,[m,this].concat(ft))}function Je(){for(var st=arguments.length,ft=new Array(st),be=0;be<st;be++)ft[be]=arguments[be];qe.apply(void 0,[T,this].concat(ft))}function we(){for(var st=arguments.length,ft=new Array(st),be=0;be<st;be++)ft[be]=arguments[be];qe.apply(void 0,[U,this].concat(ft))}function qe(st,ft){var be="",He=null;Z&&(He=new Date().getTime(),be+="["+(He-$)+"]"),Y&&ft&&ft.getClassName&&(be+="["+ft.getClassName()+"]",ft.getType&&(be+="["+ft.getType()+"]")),be.length>0&&(be+=" ");for(var vt=arguments.length,Re=new Array(vt>2?vt-2:0),Ye=2;Ye<vt;Ye++)Re[Ye-2]=arguments[Ye];Array.apply(null,Re).forEach(function(ot){be+=ot+" "}),X[st]&&R&&R.get().debug.logLevel>=st&&X[st](be),R&&R.get().debug.dispatchEvent&&se.trigger(C.Z.LOG,{message:be,level:st})}return x={getLogger:function(st){return{fatal:oe.bind(st),error:me.bind(st),warn:Ce.bind(st),info:Je.bind(st),debug:we.bind(st)}},setLogTimestampVisible:function(st){Z=st},setCalleeNameVisible:function(st){Y=st}},Z=!0,Y=!0,$=new Date().getTime(),typeof window<"u"&&window.console&&(X[y]=ce(window.console.error),X[P]=ce(window.console.error),X[m]=ce(window.console.warn),X[T]=ce(window.console.info),X[U]=ce(window.console.debug)),x}M.__dashjs_factory_name="Debug";var _=E.Z.getSingletonFactory(M);_.LOG_LEVEL_NONE=0,_.LOG_LEVEL_FATAL=y,_.LOG_LEVEL_ERROR=P,_.LOG_LEVEL_WARNING=m,_.LOG_LEVEL_INFO=T,_.LOG_LEVEL_DEBUG=U,E.Z.updateSingletonFactory(M.__dashjs_factory_name,_),p.Z=_},5595:function(b,p,w){var F=w(5448),C=w(8825);function E(){var P={};function m(U,M,_){var I=-1;return P[U]&&P[U].some(function(x,Z){if(x&&x.callback===M&&(!_||_===x.scope))return I=Z,!0}),I}var T={on:function(U,M,_){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!U)throw new Error("event type cannot be null or undefined");if(!M||typeof M!="function")throw new Error("listener must be a function: "+M);var x=I.priority||0;if(!(m(U,M,_)>=0)){P[U]=P[U]||[];var Z={callback:M,scope:_,priority:x};_&&_.getStreamId&&(Z.streamId=_.getStreamId()),_&&_.getType&&(Z.mediaType=_.getType()),I&&I.mode&&(Z.mode=I.mode);var Y=P[U].some(function($,Q){if($&&x>$.priority)return P[U].splice(Q,0,Z),!0});Y||P[U].push(Z)}},off:function(U,M,_){if(U&&M&&P[U]){var I=m(U,M,_);I<0||(P[U][I]=null)}},trigger:function(U){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(U&&P[U]){if((M=M||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");M.type=U,_.streamId&&(M.streamId=_.streamId),_.mediaType&&(M.mediaType=_.mediaType),P[U].filter(function(I){return!(!I||_.streamId&&I.streamId&&I.streamId!==_.streamId||_.mediaType&&I.mediaType&&I.mediaType!==_.mediaType||_.mode&&I.mode&&I.mode!==_.mode||!I.mode&&_.mode&&_.mode===C.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(I){return I&&I.callback.call(I.scope,M)})}},reset:function(){P={}}};return T}E.__dashjs_factory_name="EventBus";var y=F.Z.getSingletonFactory(E);y.EVENT_PRIORITY_LOW=0,y.EVENT_PRIORITY_HIGH=5e3,F.Z.updateSingletonFactory(E.__dashjs_factory_name,y),p.Z=y},5448:function(b,p){var w=function(){var F,C=[],E={},y={};function P(M,_){for(var I in C){var x=C[I];if(x.context===M&&x.name===_)return x.instance}return null}function m(M,_){return _[M]}function T(M,_,I){M in I&&(I[M]=_)}function U(M,_,I){var x,Z=M.__dashjs_factory_name,Y=_[Z];if(Y){var $=Y.instance;if(!Y.override)return $.apply({context:_,factory:F},I);for(var Q in x=M.apply({context:_},I),$=$.apply({context:_,factory:F,parent:x},I))x.hasOwnProperty(Q)&&(x[Q]=$[Q])}else x=M.apply({context:_},I);return x.getClassName=function(){return Z},x}return F={extend:function(M,_,I,x){!x[M]&&_&&(x[M]={instance:_,override:I})},getSingletonInstance:P,setSingletonInstance:function(M,_,I){for(var x in C){var Z=C[x];if(Z.context===M&&Z.name===_)return void(C[x].instance=I)}C.push({name:_,context:M,instance:I})},deleteSingletonInstances:function(M){C=C.filter(function(_){return _.context!==M})},getSingletonFactory:function(M){var _=m(M.__dashjs_factory_name,E);return _||(_=function(I){var x;return I===void 0&&(I={}),{getInstance:function(){return x||(x=P(I,M.__dashjs_factory_name)),x||(x=U(M,I,arguments),C.push({name:M.__dashjs_factory_name,context:I,instance:x})),x}}},E[M.__dashjs_factory_name]=_),_},getSingletonFactoryByName:function(M){return m(M,E)},updateSingletonFactory:function(M,_){T(M,_,E)},getClassFactory:function(M){var _=m(M.__dashjs_factory_name,y);return _||(_=function(I){return I===void 0&&(I={}),{create:function(){return U(M,I,arguments)}}},y[M.__dashjs_factory_name]=_),_},getClassFactoryByName:function(M){return m(M,y)},updateClassFactory:function(M,_){T(M,_,y)}},F}();p.Z=w},1264:function(b,p,w){var F=w(5448),C=w(703),E=w(6398),y=w(3393),P=w(7855),m=w(5595),T=w(8512);function U(x){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},U(x)}function M(x,Z,Y){return Z in x?Object.defineProperty(x,Z,{value:Y,enumerable:!0,configurable:!0,writable:!0}):x[Z]=Y,x}function _(){var x,Z,Y=this.context,$=(0,m.Z)(Y).getInstance(),Q={"streaming.delay.liveDelay":T.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":T.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},se={debug:{logLevel:E.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:y.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:y.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:y.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:y.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(x={},M(x,P.w.MPD_TYPE,500),M(x,P.w.XLINK_EXPANSION_TYPE,500),M(x,P.w.MEDIA_SEGMENT_TYPE,1e3),M(x,P.w.INIT_SEGMENT_TYPE,1e3),M(x,P.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),M(x,P.w.INDEX_SEGMENT_TYPE,1e3),M(x,P.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),M(x,P.w.LICENSE,1e3),M(x,P.w.OTHER_TYPE,1e3),M(x,"lowLatencyReductionFactor",10),x),retryAttempts:(Z={},M(Z,P.w.MPD_TYPE,3),M(Z,P.w.XLINK_EXPANSION_TYPE,1),M(Z,P.w.MEDIA_SEGMENT_TYPE,3),M(Z,P.w.INIT_SEGMENT_TYPE,3),M(Z,P.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),M(Z,P.w.INDEX_SEGMENT_TYPE,3),M(Z,P.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),M(Z,P.w.LICENSE,3),M(Z,P.w.OTHER_TYPE,3),M(Z,"lowLatencyMultiplyFactor",5),Z),abr:{movingAverageMethod:y.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:y.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:y.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},R=C.Z.clone(se);function X(ce,oe,me){for(var Ce in ce)ce.hasOwnProperty(Ce)&&(oe.hasOwnProperty(Ce)?U(ce[Ce])!=="object"||ce[Ce]instanceof Array||ce[Ce]===null?(oe[Ce]=C.Z.clone(ce[Ce]),Q[me+Ce]&&$.trigger(Q[me+Ce])):X(ce[Ce],oe[Ce],me.slice()+Ce+"."):console.error("Settings parameter "+me+Ce+" is not supported"))}return{get:function(){return R},update:function(ce){U(ce)==="object"&&X(ce,R,"")},reset:function(){R=C.Z.clone(se)}}}_.__dashjs_factory_name="Settings";var I=F.Z.getSingletonFactory(_);p.Z=I},703:function(b,p,w){var F=w(3875),C=w.n(F),E=w(1067);function y(T){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},y(T)}function P(T,U){for(var M=0;M<U.length;M++){var _=U[M];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var m=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T)}var U,M;return U=T,M=[{key:"mixin",value:function(_,I,x){var Z,Y={};if(_)for(var $ in I)I.hasOwnProperty($)&&(Z=I[$],$ in _&&(_[$]===Z||$ in Y&&Y[$]===Z)||(y(_[$])==="object"&&_[$]!==null?_[$]=T.mixin(_[$],Z,x):_[$]=x(Z)));return _}},{key:"clone",value:function(_){if(!_||y(_)!=="object")return _;var I;if(_ instanceof Array){I=[];for(var x=0,Z=_.length;x<Z;++x)x in _&&I.push(T.clone(_[x]))}else I={};return T.mixin(I,_,T.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(_,I){try{if(!I||I.length===0)return _;var x=new URL(_);return I.forEach(function(Z){Z.key&&Z.value&&x.searchParams.set(Z.key,Z.value)}),x.href}catch(Z){return _}}},{key:"parseHttpHeaders",value:function(_){var I={};if(!_)return I;for(var x=_.trim().split("\r\n"),Z=0,Y=x.length;Z<Y;Z++){var $=x[Z],Q=$.indexOf(": ");Q>0&&(I[$.substring(0,Q)]=$.substring(Q+2))}return I}},{key:"generateUuid",value:function(){var _=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(I){var x=(_+16*Math.random())%16|0;return _=Math.floor(_/16),(I=="x"?x:3&x|8).toString(16)})}},{key:"generateHashCode",value:function(_){var I=0;if(_.length===0)return I;for(var x=0;x<_.length;x++)I=(I<<5)-I+_.charCodeAt(x),I|=0;return I}},{key:"getRelativeUrl",value:function(_,I){try{var x=new URL(_),Z=new URL(I);if(x.protocol=Z.protocol,x.origin!==Z.origin)return I;var Y=C().relative(x.pathname.substr(0,x.pathname.lastIndexOf("/")),Z.pathname.substr(0,Z.pathname.lastIndexOf("/"))),$=Y.length===0?1:0;return Y+=Z.pathname.substr(Z.pathname.lastIndexOf("/")+$,Z.pathname.length-1),Z.pathname.length<Y.length?Z.pathname:Y}catch(Q){return I}}},{key:"parseUserAgent",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var I=_===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,E.UAParser)(I)}catch(x){return{}}}},{key:"stringHasProtocol",value:function(_){return/(http(s?)):\/\//i.test(_)}}],M&&P(U,M),T}();p.Z=m},2032:function(b,p,w){function F(){return"4.7.4"}w.d(p,{e:function(){return F}})},2230:function(b,p){function w(C,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}var F=function(){function C(){(function(P,m){if(!(P instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C)}var E,y;return E=C,(y=[{key:"extend",value:function(P,m){if(P){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var M in P)!P.hasOwnProperty(M)||this[M]&&!T||U&&P[M].indexOf("public_")===-1||(this[M]=P[M])}}}])&&w(E.prototype,y),C}();p.Z=F},4351:function(b,p,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function C(m,T){return C=Object.setPrototypeOf||function(U,M){return U.__proto__=M,U},C(m,T)}function E(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function y(m){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},y(m)}var P=function(m){(function(I,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(x&&x.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),x&&C(I,x)})(_,m);var T,U,M=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,x=y(T);if(U){var Z=y(this).constructor;I=Reflect.construct(x,arguments,Z)}else I=x.apply(this,arguments);return E(this,I)});function _(){var I;return function(x,Z){if(!(x instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(I=M.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",I.BUFFERING_COMPLETED="bufferingCompleted",I.BUFFER_CLEARED="bufferCleared",I.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",I.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",I.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",I.CMSD_STATIC_HEADER="cmsdStaticHeader",I.CURRENT_TRACK_CHANGED="currentTrackChanged",I.DATA_UPDATE_COMPLETED="dataUpdateCompleted",I.INBAND_EVENTS="inbandEvents",I.INITIAL_STREAM_SWITCH="initialStreamSwitch",I.INIT_FRAGMENT_LOADED="initFragmentLoaded",I.INIT_FRAGMENT_NEEDED="initFragmentNeeded",I.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",I.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",I.LOADING_COMPLETED="loadingCompleted",I.LOADING_PROGRESS="loadingProgress",I.LOADING_DATA_PROGRESS="loadingDataProgress",I.LOADING_ABANDONED="loadingAborted",I.MANIFEST_UPDATED="manifestUpdated",I.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",I.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",I.QUOTA_EXCEEDED="quotaExceeded",I.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",I.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",I.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",I.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",I.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",I.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",I.SOURCE_BUFFER_ERROR="sourceBufferError",I.STREAMS_COMPOSED="streamsComposed",I.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",I.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",I.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",I.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",I.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",I.URL_RESOLUTION_FAILED="urlResolutionFailed",I.VIDEO_CHUNK_RECEIVED="videoChunkReceived",I.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",I.XLINK_ELEMENT_LOADED="xlinkElementLoaded",I.XLINK_READY="xlinkReady",I.SEEK_TARGET="seekTarget",I.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",I.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",I.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",I.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",I.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",I}return _}(w(8342).Z);p.Z=P},8512:function(b,p,w){function F(U){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},F(U)}function C(U,M){if(!(U instanceof M))throw new TypeError("Cannot call a class as a function")}function E(U,M){return E=Object.setPrototypeOf||function(_,I){return _.__proto__=I,_},E(U,M)}function y(U,M){return!M||F(M)!=="object"&&typeof M!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(U):M}function P(U){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},P(U)}var m=function(U){(function(Z,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");Z.prototype=Object.create(Y&&Y.prototype,{constructor:{value:Z,writable:!0,configurable:!0}}),Y&&E(Z,Y)})(x,U);var M,_,I=(M=x,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}(),function(){var Z,Y=P(M);if(_){var $=P(this).constructor;Z=Reflect.construct(Y,arguments,$)}else Z=Y.apply(this,arguments);return y(this,Z)});function x(){return C(this,x),I.apply(this,arguments)}return x}(w(4351).Z),T=new m;p.Z=T},8342:function(b,p){function w(C,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}var F=function(){function C(){(function(P,m){if(!(P instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C)}var E,y;return E=C,(y=[{key:"extend",value:function(P,m){if(P){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var M in P)!P.hasOwnProperty(M)||this[M]&&!T||U&&P[M].indexOf("public_")===-1||(this[M]=P[M])}}}])&&w(E.prototype,y),C}();p.Z=F},9326:function(b,p,w){var F=w(3186),C=w(7855),E=w(5448),y=w(8825),P=w(7387),m=w(1553);function T(U){var M,_,I,x,Z,Y=(U=U||{}).eventBus,$=U.debug,Q=U.urlUtils,se=U.type,R=U.streamInfo,X=U.segmentsController,ce=U.timelineConverter,oe=U.baseURLController;function me(){return se}function Ce(){I=null}function Je(be,He,vt){var Re,Ye,ot=oe.resolve(vt.path),Ht={};return ot&&He!==ot.url&&Q.isRelative(He)?(Re=ot.url,Ye=ot.serviceLocation,Ht=ot.queryParams,He&&(Re=Q.resolve(He,Re))):Re=He,!Q.isRelative(Re)&&(be.url=Re,be.serviceLocation=Ye,be.queryParams=Ht,!0)}function we(be,He){if(He==null)return null;var vt=new F.Z,Re=He.representation,Ye=Re.adaptation.period.mpd.manifest.Period_asArray[Re.adaptation.period.index].AdaptationSet_asArray[Re.adaptation.index].Representation_asArray[Re.index].bandwidth,ot=He.media;return ot=(0,P.vi)(ot,"Number",He.replacementNumber),ot=(0,P.vi)(ot,"Time",He.replacementTime),ot=(0,P.vi)(ot,"Bandwidth",Ye),ot=(0,P.Aj)(ot,Re.id),ot=(0,P.eR)(ot),vt.mediaType=me(),vt.type=C.w.MEDIA_SEGMENT_TYPE,vt.range=He.mediaRange,vt.startTime=He.presentationStartTime,vt.mediaStartTime=He.mediaStartTime,vt.duration=He.duration,vt.timescale=Re.timescale,vt.availabilityStartTime=He.availabilityStartTime,vt.availabilityEndTime=He.availabilityEndTime,vt.availabilityTimeComplete=Re.availabilityTimeComplete,vt.wallStartTime=He.wallStartTime,vt.quality=Re.index,vt.index=He.index,vt.mediaInfo=be,vt.adaptationIndex=Re.adaptation.index,vt.representationId=Re.id,Je(vt,ot,Re)?vt:void 0}function qe(be,He,vt){var Re=null;if(!He||!He.segmentInfoType)return Re;var Ye=X.getSegmentByTime(He,vt);return Ye&&(I=Ye,_.debug("Index for time "+vt+" is "+Ye.index),Re=we(be,Ye)),Re}function st(be,He,vt){var Re=null,Ye=X.getSegmentByIndex(He,vt,I?I.mediaStartTime:-1);if(Ye)Re=we(be,Ye),I=Ye;else{if(x&&!Z)return _.debug(me()+" No segment found at index: "+vt+". Wait for next loop"),null;Z=!0}return Re}function ft(){_.debug("Dynamic stream complete"),Z=!0}return M={getCurrentIndex:function(){return I?I.index:-1},getInitRequest:function(be,He){return He?function(vt,Re,Ye){var ot=new F.Z,Ht=Re.adaptation.period,Bt=Ht.start;if(ot.mediaType=Ye,ot.type=C.w.INIT_SEGMENT_TYPE,ot.range=Re.range,ot.availabilityStartTime=ce.calcAvailabilityStartTimeFromPresentationTime(Bt,Re,x),ot.availabilityEndTime=ce.calcAvailabilityEndTimeFromPresentationTime(Bt+Ht.duration,Re,x),ot.quality=Re.index,ot.mediaInfo=vt,ot.representationId=Re.id,Je(ot,Re.initialization,Re))return ot.url=(0,P.vi)(ot.url,"Bandwidth",Re.bandwidth),ot}(be,He,me()):null},getNextSegmentRequest:function(be,He){return He&&He.segmentInfoType?st(be,He,I?I.index+1:0):null},getNextSegmentRequestIdempotent:function(be,He){var vt=I?I.index+1:0,Re=X.getSegmentByIndex(He,vt,I?I.mediaStartTime:-1);return Re?we(be,Re):null},getSegmentRequestForTime:qe,getStreamId:function(){return R.id},getStreamInfo:function(){return R},getType:me,getValidTimeAheadOfTargetTime:function(be,He,vt,Re){try{if(isNaN(be)||!He||!vt)return NaN;if(be<0&&(be=0),isNaN(Re)&&(Re=.5),qe(He,vt,be))return be;if(vt.adaptation.period.start+vt.adaptation.period.duration<be)return NaN;for(var Ye=isFinite(vt.adaptation.period.duration)?vt.adaptation.period.start+vt.adaptation.period.duration:be+30,ot=Math.min(be+Re,Ye),Ht=NaN,Bt=null;ot<=Ye;){var Et=null;if(ot<=Ye&&(Et=qe(He,vt,ot)),Et){Ht=ot,Bt=Et;break}ot+=Re}if(Bt){var Dt=Bt.startTime+Bt.duration;return be>Bt.startTime&&Dt-be>Re?be:!isNaN(Bt.startTime)&&be<Bt.startTime&&Ht>Bt.startTime?Bt.startTime+.001:Math.min(Dt-Re,Ht)}return Ht}catch(Ne){return NaN}},initialize:function(be){x=be,Z=!1,X.initialize(be)},isLastSegmentRequested:function(be,He){return!be||!I?!1:Z?!0:!isFinite(be.adaptation.period.duration)||I.presentationStartTime+I.duration>He?!1:be.mediaFinishedInformation&&!isNaN(be.mediaFinishedInformation.numberOfSegments)&&!isNaN(I.index)&&I.index>=be.mediaFinishedInformation.numberOfSegments-1&&(!x||be.segmentInfoType===m.Z.SEGMENT_TEMPLATE||x&&be.segmentInfoType===m.Z.SEGMENT_LIST&&be.adaptation.period.nextPeriodId)?!0:!!(x&&be.adaptation.period.nextPeriodId&&be.segmentInfoType===m.Z.SEGMENT_TIMELINE&&be.mediaFinishedInformation&&!isNaN(be.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&I&&!isNaN(I.mediaStartTime)&&!isNaN(I.duration)&&I.mediaStartTime+I.duration>=be.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(be,He){return He&&He.segmentInfoType?st(be,He,I?I.index:0):null},reset:function(){Ce(),Y.off(y.Z.DYNAMIC_TO_STATIC,ft,M)}},_=$.getLogger(M),Ce(),Y.on(y.Z.DYNAMIC_TO_STATIC,ft,M),M}T.__dashjs_factory_name="DashHandler",p.Z=E.Z.getClassFactory(T)},1553:function(b,p){function w(C,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}var F=new(function(){function C(){(function(P,m){if(!(P instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var E,y;return E=C,(y=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&w(E.prototype,y),C}());p.Z=F},7802:function(b,p,w){var F=w(5448),C=w(1724),E=w(3636),y=w(1736),P=w(5246);function m(U){U=U||{};var M,_,I=this.context,x=U.dashConstants,Z=U.type,Y=U.segmentBaseController;function $(Q){return Q?Q.segments?_[x.SEGMENT_BASE]:_[Q.segmentInfoType]:null}return M={initialize:function(Q){_[x.SEGMENT_TIMELINE]=(0,C.Z)(I).create(U,Q),_[x.SEGMENT_TEMPLATE]=(0,E.Z)(I).create(U,Q),_[x.SEGMENT_LIST]=(0,y.Z)(I).create(U,Q),_[x.SEGMENT_BASE]=(0,P.Z)(I).create(U,Q)},updateInitData:function(Q,se){return se?Promise.resolve():Y.getSegmentBaseInitSegment({representation:Q,mediaType:Z})},updateSegmentData:function(Q,se){return se?Promise.resolve():Y.getSegmentList({mimeType:Q.mimeType,representation:Q,mediaType:Z})},getSegmentByIndex:function(Q,se,R){var X=$(Q);return X?X.getSegmentByIndex(Q,se,R):null},getSegmentByTime:function(Q,se){var R=$(Q);return R?R.getSegmentByTime(Q,se):null},getMediaFinishedInformation:function(Q){var se=$(Q);return se?se.getMediaFinishedInformation(Q):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},_={},M}m.__dashjs_factory_name="SegmentsController";var T=F.Z.getClassFactory(m);p.Z=T},1736:function(b,p,w){var F=w(5448),C=w(3393),E=w(7387);function y(m,T){var U=(m=m||{}).timelineConverter;function M(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function _(I,x){if(M(),!I)return null;var Z=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,Y=Z.SegmentURL_asArray.length,$=I&&!isNaN(I.startNumber)?I.startNumber:1,Q=Math.max($-1,0),se=Math.max(x-Q,0),R=null;if(se<Y){var X=Z.SegmentURL_asArray[se];(R=(0,E.NF)(U,T,I,x))&&(R.replacementTime=($+x-1)*I.segmentDuration,R.media=X.media?X.media:"",R.mediaRange=X.mediaRange,R.indexRange=X.indexRange)}return R}return{getSegmentByIndex:_,getSegmentByTime:function(I,x){if(M(),!I)return null;var Z=I.segmentDuration;if(isNaN(Z))return null;var Y=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,x);return _(I,Math.floor(Y/Z))},getMediaFinishedInformation:function(I){var x={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return x;var Z=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,Y=I&&!isNaN(I.startNumber)?I.startNumber:1,$=Math.max(Y-1,0);return x.numberOfSegments=$+Z.SegmentURL_asArray.length,x}}}y.__dashjs_factory_name="ListSegmentsGetter";var P=F.Z.getClassFactory(y);p.Z=P},5246:function(b,p,w){var F=w(5448),C=w(3393);function E(P){var m=(P=P||{}).timelineConverter;function T(){if(!m||!m.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function U(M,_){if(T(),!M)return null;var I,x=M.segments?M.segments.length:-1;if(_<x&&(I=M.segments[_])&&I.index===_)return I;for(var Z=0;Z<x;Z++)if((I=M.segments[Z])&&I.index===_)return I;return null}return{getSegmentByIndex:U,getSegmentByTime:function(M,_){T();var I=function(x,Z){if(!x)return-1;var Y,$,Q,se,R,X=x.segments,ce=X?X.length:null,oe=-1;if(X&&ce>0){for(R=0;R<ce;R++)if(Q=($=X[R]).presentationStartTime,Z+(Y=(se=$.duration)/2)>=Q&&Z-Y<Q+se){oe=$.index;break}}return oe}(M,_);return U(M,I)},getMediaFinishedInformation:function(M){var _={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return M&&M.segments&&(_.numberOfSegments=M.segments.length),_}}}E.__dashjs_factory_name="SegmentBaseGetter";var y=F.Z.getClassFactory(E);p.Z=y},7387:function(b,p,w){w.d(p,{Aj:function(){return y},NF:function(){return U},TJ:function(){return M},eR:function(){return E},vi:function(){return P}});var F=w(2011);function C(_,I){for(;_.length<I;)_="0"+_;return _}function E(_){return _&&_.split("$$").join("$")}function y(_,I){if(!I||!_||_.indexOf("$RepresentationID$")===-1)return _;var x=I.toString();return _.split("$RepresentationID$").join(x)}function P(_,I,x){var Z,Y,$,Q,se,R,X=I.length,ce=2;if(!_)return _;for(;;){if((Z=_.indexOf("$"+I))<0||(Y=_.indexOf("$",Z+X))<0)return _;if(($=_.indexOf("%0",Z+X))>Z&&$<Y)switch(Q=_.charAt(Y-1),se=parseInt(_.substring($+ce,Y-1),10),Q){case"d":case"i":case"u":R=C(x.toString(),se);break;case"x":R=C(x.toString(16),se);break;case"X":R=C(x.toString(16),se).toUpperCase();break;case"o":R=C(x.toString(8),se);break;default:return _}else R=x;_=_.substring(0,Z)+R+_.substring(Y+1)}}function m(_,I,x,Z,Y,$,Q,se){var R,X=new F.Z;return X.representation=_,X.duration=I,X.presentationStartTime=x,X.mediaStartTime=Z,X.availabilityStartTime=Y.calcAvailabilityStartTimeFromPresentationTime($,_,Q),X.availabilityEndTime=Y.calcAvailabilityEndTimeFromPresentationTime($+I,_,Q),X.wallStartTime=Y.calcWallTimeForSegment(X,Q),X.replacementNumber=(R=se,X.representation.startNumber+R),X.index=se,X}function T(_,I,x,Z){var Y=I.adaptation.period;if(isFinite(Y.duration)&&Y.start+Y.duration<=x.presentationStartTime)return!1;if(Z){if(I.availabilityTimeOffset==="INF")return!0;var $=_.getClientReferenceTime();return x.availabilityStartTime.getTime()<=$&&(!isFinite(x.availabilityEndTime)||x.availabilityEndTime.getTime()>=$)}return!0}function U(_,I,x,Z){var Y,$,Q;Y=x.segmentDuration,isNaN(Y)&&(Y=x.adaptation.period.duration),$=parseFloat((x.adaptation.period.start+Z*Y).toFixed(5)),Q=parseFloat(($+Y).toFixed(5));var se=m(x,Y,$,_.calcMediaTimeFromPresentationTime($,x),_,Q,I,Z);return T(_,x,se,I)?se:null}function M(_,I,x,Z,Y,$,Q,se,R,X){var ce,oe,me=Z/$,Ce=Y/$;return ce=_.calcPresentationTimeFromMediaTime(me,x),T(_,x,oe=m(x,Ce,ce,me,_,ce+Ce,I,R),I)?(oe.replacementTime=X||Z,Q=P(Q,"Number",oe.replacementNumber),Q=P(Q,"Time",oe.replacementTime),oe.media=Q,oe.mediaRange=se,oe):null}},3636:function(b,p,w){var F=w(5448),C=w(3393),E=w(7387);function y(m,T){var U=(m=m||{}).timelineConverter;function M(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function _(I,x){if(M(),!I)return null;var Z=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentTemplate;x=Math.max(x,0);var Y=(0,E.NF)(U,T,I,x);if(Y){Y.replacementTime=Math.round((x-1)*I.segmentDuration*I.timescale,10);var $=Z.media;$=(0,E.vi)($,"Number",Y.replacementNumber),$=(0,E.vi)($,"Time",Y.replacementTime),Y.media=$}return Y}return{getSegmentByIndex:_,getSegmentByTime:function(I,x){if(M(),!I)return null;var Z=I.segmentDuration;if(isNaN(Z))return null;var Y=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,x);return _(I,Math.floor(Y/Z))},getMediaFinishedInformation:function(I){var x={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return x;var Z=I.segmentDuration;return isNaN(Z)?x.numberOfSegments=1:x.numberOfSegments=Math.ceil(I.adaptation.period.duration/Z),x}}}y.__dashjs_factory_name="TemplateSegmentsGetter";var P=F.Z.getClassFactory(y);p.Z=P},1724:function(b,p,w){var F=w(5448),C=w(3393),E=w(7387);function y(m,T){var U=(m=m||{}).timelineConverter,M=m.dashMetrics;function _(){if(!U)throw new Error(C.Z.MISSING_CONFIG_ERROR)}function I(Z,Y){var $,Q,se,R,X,ce,oe,me=Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentTemplate||Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentList,Ce=me.SegmentTimeline,Je=me.SegmentURL_asArray,we=0,qe=-1;oe=Z.timescale;var st=!1;for(se=0,R=($=Ce.S_asArray).length;se<R&&!st;se++)for(ce=0,(Q=$[se]).hasOwnProperty("r")&&(ce=Q.r),Q.hasOwnProperty("t")&&(we=Q.t),ce<0&&(ce=x(Z,$[se+1],Q,oe,we/oe)),X=0;X<=ce&&!st;X++)(st=Y(we,me,Je,Q,oe,++qe,se))&&(Z.segmentDuration=Q.d/oe),we+=Q.d}function x(Z,Y,$,Q,se){var R;if(Y&&Y.hasOwnProperty("t"))R=Y.t/Q;else try{var X=0;if(isNaN(Z.adaptation.period.start)||isNaN(Z.adaptation.period.duration)||!isFinite(Z.adaptation.period.duration)){var ce=M.getCurrentDVRInfo();X=isNaN(ce.end)?0:ce.end}else X=Z.adaptation.period.start+Z.adaptation.period.duration;R=U.calcMediaTimeFromPresentationTime(X,Z),Z.segmentDuration=$.d/Q}catch(oe){R=0}return Math.max(Math.ceil((R-se)/($.d/Q))-1,0)}return{getSegmentByIndex:function(Z,Y,$){if(_(),!Z)return null;var Q=null,se=!1;return I(Z,function(R,X,ce,oe,me,Ce,Je){if(se||$<0){var we=X.media,qe=oe.mediaRange;return ce&&(we=ce[Je].media||"",qe=ce[Je].mediaRange),Q=(0,E.TJ)(U,T,Z,R,oe.d,me,we,qe,Ce,oe.tManifest),!0}return R>=$*me-.5*oe.d&&(se=!0),!1}),Q},getSegmentByTime:function(Z,Y){if(_(),!Z)return null;Y===void 0&&(Y=null);var $=null,Q=U.calcMediaTimeFromPresentationTime(Y,Z);return I(Z,function(se,R,X,ce,oe,me,Ce){var Je=parseFloat((Q*oe).toPrecision(15));if(Je<se+ce.d&&Je>=se){var we=R.media,qe=ce.mediaRange;return X&&(we=X[Ce].media||"",qe=X[Ce].mediaRange),$=(0,E.TJ)(U,T,Z,se,ce.d,oe,we,qe,me,ce.tManifest),!0}return!1}),$},getMediaFinishedInformation:function(Z){if(!Z)return 0;var Y,$,Q,se,R,X,ce,oe=(Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentTemplate||Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentList).SegmentTimeline,me=0,Ce=0,Je=0;for(ce=Z.timescale,se=(Y=oe.S_asArray).length,Q=0;Q<se;Q++)for(X=0,($=Y[Q]).hasOwnProperty("r")&&(X=$.r),$.hasOwnProperty("t")&&(Ce=(me=$.t)/ce),X<0&&(X=x(Z,Y[Q+1],$,ce,Ce)),R=0;R<=X;R++)Je++,Ce=(me+=$.d)/ce;return{numberOfSegments:Je,mediaTimeOfLastSignaledSegment:Ce}}}}y.__dashjs_factory_name="TimelineSegmentsGetter";var P=F.Z.getClassFactory(y);p.Z=P},2011:function(b,p){p.Z=function w(){(function(F,C){if(!(F instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(b,p){p.Z=function w(){(function(F,C){if(!(F instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.schemeIdUri="",this.value=""}},1139:function(b,p,w){w.d(p,{Z:function(){return ip}});var F=w(452),C=w.n(F),E=w(3393),y=w(1553),P=w(3860),m=w(5595),T=w(8512),U=w(5448),M=w(6398),_=w(8825);function I(){var k,O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke,Ie,Ge,q,le,ae,ue=this.context,te=(0,m.Z)(ue).getInstance();function Pe(){ve(),ye=!1,Ae=0,Te=0,Ze=0,q=!1,We=!0,Se=!1,le=!1,ke=NaN,Oe=NaN,H&&(te.off(T.Z.DATA_UPDATE_COMPLETED,Pt,k),te.off(T.Z.LOADING_PROGRESS,On,k),te.off(T.Z.MANIFEST_UPDATED,zt,k),te.off(T.Z.STREAMS_COMPOSED,Ve,k),te.off(_.Z.PLAYBACK_ENDED,en,k),te.off(_.Z.STREAM_INITIALIZING,Ct,k),te.off(_.Z.REPRESENTATION_SWITCH,et,k),te.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Jt,k),Qt(),H.removeEventListener("canplay",un),H.removeEventListener("canplaythrough",an),H.removeEventListener("play",Bn),H.removeEventListener("waiting",kn),H.removeEventListener("playing",mr),H.removeEventListener("pause",vr),H.removeEventListener("error",Nn),H.removeEventListener("seeking",bt),H.removeEventListener("seeked",tn),H.removeEventListener("timeupdate",qt),H.removeEventListener("progress",mn),H.removeEventListener("ratechange",bn),H.removeEventListener("loadedmetadata",Zn),H.removeEventListener("loadeddata",Fn),H.removeEventListener("stalled",Dn),H.removeEventListener("ended",qn),H.removeEventListener("volumechange",Yn)),he=null,H=null,ie=null,_e=null}function xe(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((je(tt)-ct()).toFixed(5))}function je(tt){var Lt=tt||ie;return Lt.start+Lt.duration}function Me(){var tt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];ie&&H&&H.getElement()?(tt&&_e&&mt(ct()),H.play()):ye=!0}function ve(){ie&&H&&H.pause()}function De(tt){var Lt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],yn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Cn=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(ie&&H&&H.getElement()){var yr=isNaN(ke)?H.getTime():ke;tt!==yr&&((Ie=yn===!0)||(ke=tt),O.info("Requesting seek to time: "+tt+(Ie?" (internal)":"")),_e&&Cn&&mt(tt),H.setCurrentTime(tt,Lt))}}function $e(){if(ie&&H&&_e){var tt=j&&j.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Lt=W.getCurrentDVRInfo(tt);return Lt&&Lt.range?Lt.range.end:0}}function mt(tt){var Lt=new Date(re.getClientReferenceTime()),yn=ee.getRegularPeriods()[0],Cn=re.calcPresentationTimeFromWallTime(Lt,yn);Ae=Cn-tt}function ct(){return ie&&H?H.getTime():null}function yt(){return ie&&H?H.isPaused():null}function pt(){return ie&&H?H.isSeeking():null}function Gt(){return ie&&H?H.isStalled():null}function Vt(){return ie&&H?H.getPlaybackRate():null}function jt(){return ie&&H?H.getEnded():null}function Zt(){return _e}function xn(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!yt()&&_e&&H.getReadyState()!==0&&!pt()&&!q){tt||(tt=j.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO);var Lt=ct(),yn=at(Lt,tt),Cn=!isNaN(yn)&&yn!==Lt;Cn&&!pt()&&(Gt()||Ge||H.getReadyState()===1)&&(O.debug("UpdateCurrentTime: Seek to actual time: ".concat(yn," from currentTime: ").concat(Lt)),De(yn,!1,!1))}}function at(tt,Lt){var yn=W.getCurrentDVRInfo(Lt),Cn=yn?yn.range:null;return Cn?tt>Cn.end?Math.max(Cn.end-Ae,Cn.start):tt>0&&tt+.25<Cn.start&&Math.abs(tt-Cn.start)<31536e4?Se?Math.max(Cn.end-Ae,Cn.start):Cn.start:tt:NaN}function St(){he===null&&(he=setInterval(function(){(function(){if(te.trigger(T.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:_e,time:new Date}),Zt()){var tt=Date.now();(isNaN(Oe)||tt>Oe+ae.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(j.addDVRMetric(),yt()?function(){var Lt=Date.now();(!ze||Lt>ze+500)&&(ze=Lt,qt())}():xn(),Oe=tt)}})()},ae.get().streaming.wallclockTimeUpdateInterval))}function Qt(){clearInterval(he),he=null}function Pt(tt){var Lt=ee.convertRepresentationToRepresentationInfo(tt.currentRepresentation),yn=Lt?Lt.mediaInfo.streamInfo:null;yn!==null&&ie.id===yn.id&&(ie=yn)}function un(){te.trigger(T.Z.CAN_PLAY)}function an(){te.trigger(T.Z.CAN_PLAY_THROUGH)}function Jt(tt){tt.streamId===j.getActiveStreamInfo().id&&(Ge=tt.state===P.Z.BUFFER_EMPTY,ae.get().streaming.buffer.setStallState&&H.setStallState(tt.mediaType,tt.state===P.Z.BUFFER_EMPTY))}function Bn(){O.info("Native video element event: play"),xn(),St(),te.trigger(T.Z.PLAYBACK_STARTED,{startTime:ct()})}function kn(){O.info("Native video element event: waiting"),te.trigger(T.Z.PLAYBACK_WAITING,{playingTime:ct()})}function mr(){O.info("Native video element event: playing"),Ie=!1,te.trigger(T.Z.PLAYBACK_PLAYING,{playingTime:ct()})}function vr(){O.info("Native video element event: pause"),te.trigger(T.Z.PLAYBACK_PAUSED,{ended:jt()})}function bt(){if(!Ie){var tt=ct();isNaN(ke)||ke===tt||(tt=ke),ke=NaN,O.info("Seeking to: "+tt),St(),te.trigger(T.Z.PLAYBACK_SEEKING,{seekTime:tt,streamId:ie.id})}}function tn(){O.info("Native video element event: seeked"),Ie=!1,te.trigger(T.Z.PLAYBACK_SEEKED)}function qt(){ie&&te.trigger(T.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:xe(),time:ct(),streamId:ie.id})}function mn(){te.trigger(T.Z.PLAYBACK_PROGRESS,{streamId:ie.id})}function bn(){var tt=Vt();O.info("Native video element event: ratechange: ",tt),te.trigger(T.Z.PLAYBACK_RATE_CHANGED,{playbackRate:tt})}function Zn(){O.info("Native video element event: loadedmetadata"),te.trigger(T.Z.PLAYBACK_METADATA_LOADED),St()}function Fn(){O.info("Native video element event: loadeddata"),te.trigger(T.Z.PLAYBACK_LOADED_DATA)}function qn(){O.info("Native video element event: ended"),ve(),Qt();var tt=j?j.getActiveStreamInfo():null;tt&&te.trigger(T.Z.PLAYBACK_ENDED,{isLast:tt.isLast})}function Yn(){te.trigger(T.Z.PLAYBACK_VOLUME_CHANGED)}function en(tt){if(he&&tt.isLast){O.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Lt=tt.seekTime?tt.seekTime:je();H.setCurrentTime(Lt),ve(),Qt()}}function Nn(tt){var Lt=tt.target||tt.srcElement;te.trigger(T.Z.PLAYBACK_ERROR,{error:Lt.error})}function Pn(){_e=!1}function On(tt){if(tt.stream===!1&&Se&&!isNaN(tt.request.duration)){var Lt=1.2*tt.request.duration;Lt>Ae&&(O.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Lt.toFixed(2)),Ae=Lt,Te=Lt)}}function Dn(tt){te.trigger(T.Z.PLAYBACK_STALLED,{e:tt})}function Ct(tt){var Lt;(Lt=tt.mediaInfo)&&Lt.supplementalProperties&&Lt.supplementalProperties[E.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Lt.supplementalProperties[E.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(O.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),Se=!0)}function et(tt){var Lt=j.getActiveStreamInfo();tt&&Lt&&tt.currentRepresentation&&tt.streamId&&tt.streamId===Lt.id&&tt.mediaType&&(tt.mediaType===E.Z.VIDEO||tt.mediaType===E.Z.AUDIO)&&(We=tt.currentRepresentation.availabilityTimeComplete,(Se=!We)&&!le&&(le=!0))}function zt(){q=!0}function Ve(){q=!1}return k={initialize:function(tt,Lt){ie=tt,Lt!==!0&&(H.addEventListener("canplay",un),H.addEventListener("canplaythrough",an),H.addEventListener("play",Bn),H.addEventListener("waiting",kn),H.addEventListener("playing",mr),H.addEventListener("pause",vr),H.addEventListener("error",Nn),H.addEventListener("seeking",bt),H.addEventListener("seeked",tn),H.addEventListener("timeupdate",qt),H.addEventListener("progress",mn),H.addEventListener("ratechange",bn),H.addEventListener("loadedmetadata",Zn),H.addEventListener("loadeddata",Fn),H.addEventListener("stalled",Dn),H.addEventListener("ended",qn),H.addEventListener("volumechange",Yn),_e=ie.manifestInfo.isDynamic,Ge=!1,Ie=!1,te.on(T.Z.DATA_UPDATE_COMPLETED,Pt,k),te.on(T.Z.LOADING_PROGRESS,On,k),te.on(T.Z.MANIFEST_UPDATED,zt,k),te.on(T.Z.STREAMS_COMPOSED,Ve,k),te.on(_.Z.PLAYBACK_ENDED,en,k,{priority:m.Z.EVENT_PRIORITY_HIGH}),te.on(_.Z.STREAM_INITIALIZING,Ct,k),te.on(_.Z.REPRESENTATION_SWITCH,et,k),te.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Jt,k),te.on(_.Z.DYNAMIC_TO_STATIC,Pn,k),ye&&(ye=!1,Me()))},setConfig:function(tt){tt&&(tt.streamController&&(j=tt.streamController),tt.serviceDescriptionController&&(V=tt.serviceDescriptionController),tt.dashMetrics&&(W=tt.dashMetrics),tt.adapter&&(ee=tt.adapter),tt.videoModel&&(H=tt.videoModel),tt.timelineConverter&&(re=tt.timelineConverter),tt.settings&&(ae=tt.settings))},getTimeToStreamEnd:xe,getBufferLevel:function(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Lt=null;return j.getActiveStreamProcessors().forEach(function(yn){if(!tt||tt.length===0||tt.indexOf(yn.getType())===-1){var Cn=yn.getBufferLevel();Lt=Lt===null?Cn:Math.min(Lt,Cn)}}),Lt},getPlaybackStalled:function(){return Ge},getTime:ct,getLowLatencyModeEnabled:function(){return Se},getInitialCatchupModeActivated:function(){return le},getIsManifestUpdateInProgress:function(){return q},getPlaybackRate:Vt,getPlayedRanges:function(){return ie&&H?H.getPlayedRanges():null},getEnded:jt,getIsDynamic:Zt,getStreamController:function(){return j},computeAndSetLiveDelay:function(tt,Lt){var yn,Cn,yr,oi=!isNaN(tt)&&isFinite(tt)?tt:NaN,gi=ee.getSuggestedPresentationDelay(),Xr=V.getServiceDescriptionSettings();return yn=isNaN(ae.get().streaming.delay.liveDelay)?ae.get().streaming.delay.liveDelayFragmentCount===null||isNaN(ae.get().streaming.delay.liveDelayFragmentCount)||isNaN(oi)?Xr&&!isNaN(Xr.liveDelay)&&Xr.liveDelay>0?Xr.liveDelay:ae.get().streaming.delay.useSuggestedPresentationDelay===!0&&gi!==null&&!isNaN(gi)&&gi>0?gi:isNaN(oi)?Lt&&!isNaN(Lt.minBufferTime)?4*Lt.minBufferTime:4*ie.manifestInfo.minBufferTime:4*oi:oi*ae.get().streaming.delay.liveDelayFragmentCount:ae.get().streaming.delay.liveDelay,(yr=ee.getAvailabilityStartTime())!==null&&(Ze=yr),Cn=Lt&&Lt.dvrWindowSize>0?Math.min(yn,Lt.dvrWindowSize):yn,Ae=Cn,Te=Cn,Cn},getLiveDelay:function(){return Ae},getOriginalLiveDelay:function(){return Te},getCurrentLiveLatency:function(){if(!_e||isNaN(Ze))return NaN;var tt=ct();if(isNaN(tt)||tt===0)return 0;var Lt=new Date().getTime()+1e3*re.getClientTimeOffset();return Math.max(((Lt-Ze-1e3*tt)/1e3).toFixed(3),0)},play:Me,isPaused:yt,isStalled:Gt,pause:ve,isSeeking:pt,getStreamEndTime:je,seek:De,seekToOriginalLive:function(){var tt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Lt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],yn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Cn=$e();if(Cn!==0){var yr=Cn-(Ae=Te);De(yr,tt,Lt,yn)}},seekToCurrentLive:function(){var tt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Lt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],yn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Cn=$e();if(Cn!==0){var yr=Cn-Ae;De(yr,tt,Lt,yn)}},reset:Pe,updateCurrentTime:xn,getAvailabilityStartTime:function(){return Ze}},O=(0,M.Z)(ue).getInstance().getLogger(k),Pe(),k}I.__dashjs_factory_name="PlaybackController";var x=U.Z.getSingletonFactory(I),Z=w(3186),Y="loading",$="executed",Q="failed";function se(k){var O,j,V,W,ee=(k=k||{}).eventBus,H=k.events,re=k.dashMetrics,he=k.fragmentLoader,Ae=k.debug,Te=k.streamInfo,ie=k.type;function _e(q){var le;return!!q&&(le=!1,V.some(function(ae){if(ue=q,te=ae,!isNaN(ue.index)&&ue.startTime===te.startTime&&ue.adaptationIndex===te.adaptationIndex&&ue.type===te.type||function(Pe,xe){return isNaN(Pe.index)&&isNaN(xe.index)&&Pe.quality===xe.quality}(q,ae)||function(Pe,xe){return Pe.action===Z.Z.ACTION_COMPLETE&&Pe.action===xe.action}(q,ae))return le=!0;var ue,te}),le)}function ye(q){return isNaN(q.duration)?.25:Math.min(q.duration/8,.5)}function ze(q){V=V.filter(function(le){var ae=ye(le);return isNaN(le.startTime)||q!==void 0&&le.startTime>=q-ae})}function Oe(q,le){le<=q+.5||(V=V.filter(function(ae){var ue=ye(ae);return isNaN(ae.startTime)||ae.startTime>=le-ue||isNaN(ae.duration)||ae.startTime+ae.duration<=q+ue}))}function Ze(q,le,ae){for(var ue=q.length-1;ue>=0;ue--){var te=q[ue],Pe=te.startTime,xe=Pe+te.duration;if(ae=isNaN(ae)?ye(te):ae,!isNaN(Pe)&&!isNaN(xe)&&le+ae>=Pe&&le-ae<xe||isNaN(Pe)&&isNaN(le))return te}return null}function We(q,le){re.addSchedulingInfo(q,le),re.addRequestsQueue(q.mediaType,W,V)}function Se(q){q.sender===he&&(W.splice(W.indexOf(q.request),1),q.response&&!q.error&&V.push(q.request),We(q.request,q.error?Q:$),ee.trigger(H.FRAGMENT_LOADING_COMPLETED,{request:q.request,response:q.response,error:q.error,sender:this},{streamId:Te.id,mediaType:ie}))}function ke(q){q.sender===he&&ee.trigger(H.FRAGMENT_LOADING_PROGRESS,{request:q.request,response:q.response,error:q.error,sender:this},{streamId:Te.id,mediaType:ie})}function Ie(q){q.sender===he&&ee.trigger(H.FRAGMENT_LOADING_ABANDONED,{request:q.request},{streamId:Te.id,mediaType:ie})}function Ge(){V=[],W=[]}return O={getStreamId:function(){return Te.id},getType:function(){return ie},getRequests:function(q){var le=q?q.state instanceof Array?q.state:[q.state]:[],ae=[];return le.forEach(function(ue){var te=function(Pe){var xe;switch(Pe){case Y:xe=W;break;case $:xe=V;break;default:xe=[]}return xe}(ue);ae=ae.concat(function(Pe,xe){return xe.hasOwnProperty("time")?[Ze(Pe,xe.time,xe.threshold)]:Pe.filter(function(je){for(var Me in xe)if(Me!=="state"&&xe.hasOwnProperty(Me)&&je[Me]!=xe[Me])return!1;return!0})}(te,q))}),ae},isFragmentLoaded:_e,isFragmentLoadedOrPending:function(q){var le,ae=!1,ue=0;if(!(ae=_e(q)))for(ue=0;ue<W.length;ue++)le=W[ue],q.url===le.url&&q.startTime===le.startTime&&(ae=!0);return ae},removeExecutedRequestsBeforeTime:ze,removeExecutedRequestsAfterTime:function(q){V=V.filter(function(le){return isNaN(le.startTime)||q!==void 0&&le.startTime<q})},syncExecutedRequestsWithBufferedRange:function(q,le){if(q&&q.length!==0){for(var ae=0,ue=0,te=q.length;ue<te;ue++)Oe(ae,q.start(ue)),ae=q.end(ue);le>0&&Oe(ae,le)}else ze()},abortRequests:function(){j.debug("abort requests"),he.abort(),W=[]},executeRequest:function(q){q.action===Z.Z.ACTION_DOWNLOAD?(We(q,Y),W.push(q),function(le){ee.trigger(H.FRAGMENT_LOADING_STARTED,{request:le},{streamId:Te.id,mediaType:ie}),he.load(le)}(q)):j.warn("Unknown request action.")},reset:function(){ee.off(H.LOADING_COMPLETED,Se,this),ee.off(H.LOADING_DATA_PROGRESS,ke,this),ee.off(H.LOADING_ABANDONED,Ie,this),he&&he.reset(),Ge()},resetInitialSettings:Ge,addExecutedRequest:function(q){V.push(q)}},j=Ae.getLogger(O),Ge(),ee.on(H.LOADING_COMPLETED,Se,O),ee.on(H.LOADING_DATA_PROGRESS,ke,O),ee.on(H.LOADING_ABANDONED,Ie,O),O}se.__dashjs_factory_name="FragmentModel";var R=U.Z.getClassFactory(se);R.FRAGMENT_MODEL_LOADING=Y,R.FRAGMENT_MODEL_EXECUTED=$,R.FRAGMENT_MODEL_CANCELED="canceled",R.FRAGMENT_MODEL_FAILED=Q,U.Z.updateClassFactory(se.__dashjs_factory_name,R);var X=R,ce=w(5459);function oe(k){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},oe(k)}function me(k,O){return me=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},me(k,O)}function Ce(k,O){return!O||oe(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Je(k){return Je=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Je(k)}var we=new(function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&me(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Je(O);if(j){var re=Je(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Ce(this,ee)});function W(){var ee;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,W),(ee=V.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,ee.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,ee.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,ee.SEGMENT_BASE_LOADER_ERROR_CODE=15,ee.TIME_SYNC_FAILED_ERROR_CODE=16,ee.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,ee.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,ee.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,ee.APPEND_ERROR_CODE=20,ee.REMOVE_ERROR_CODE=21,ee.DATA_UPDATE_FAILED_ERROR_CODE=22,ee.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,ee.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,ee.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,ee.DOWNLOAD_ERROR_ID_SIDX_CODE=26,ee.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,ee.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,ee.DOWNLOAD_ERROR_ID_XLINK_CODE=29,ee.MANIFEST_ERROR_ID_PARSE_CODE=31,ee.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,ee.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,ee.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,ee.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,ee.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",ee.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",ee.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",ee.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",ee.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",ee.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",ee.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",ee.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",ee.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",ee.APPEND_ERROR_MESSAGE="chunk is not defined",ee.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",ee.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",ee.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",ee.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",ee.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",ee.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",ee}return W}(w(2230).Z)),qe=w(1264),st=w(7855);function ft(k){var O,j,V,W,ee,H,re=this.context,he=(0,qe.Z)(re).getInstance(),Ae=k.textController,Te=k.eventBus,ie=[],_e=[],ye=!1,ze=k.mediaSource,Oe=null;function Ze(te){return new Promise(function(Pe){ue(function(){W.changeType&&W.changeType(te),Pe()})})}function We(te){return W=Ae.getTextSourceBuffer(te),Promise.resolve()}function Se(){if(typeof W.addEventListener=="function")try{W.addEventListener("updateend",le,!1),W.addEventListener("error",ae,!1),W.addEventListener("abort",ae,!1)}catch(te){H=setInterval(le,50)}else H=setInterval(le,50)}function ke(te){return new Promise(function(Pe){W&&he.get().streaming.buffer.useAppendWindow?ue(function(){try{if(!W)return void Pe();var xe=ze.duration,je=0;te&&!isNaN(te.start)&&!isNaN(te.duration)&&isFinite(te.duration)&&(xe=te.start+te.duration),te&&!isNaN(te.start)&&(je=te.start),W.appendWindowEnd===xe&&W.appendWindowStart===je||(W.appendWindowStart=0,W.appendWindowEnd=xe+.01,W.appendWindowStart=Math.max(je-.1,0),V.debug("Updated append window for ".concat(ee.type,". Set start to ").concat(W.appendWindowStart," and end to ").concat(W.appendWindowEnd))),Pe()}catch(Me){V.warn("Failed to set append window"),Pe()}}):Pe()})}function Ie(te){return new Promise(function(Pe){W?ue(function(){try{W.timestampOffset===te||isNaN(te)||(W.timestampOffset=te,V.debug("Set MSE timestamp offset to ".concat(te))),Pe()}catch(xe){Pe()}}):Pe()})}function Ge(){if(!ye&&_e.length>0){ye=!0;var te=_e[0];_e.splice(0,1);var Pe=function(){ye=!1,_e.length>0&&Ge.call(this),te&&te.data&&te.data.segmentType&&te.data.segmentType!==st.w.INIT_SEGMENT_TYPE&&delete te.data.bytes,te.promise.resolve({chunk:te.data})};try{Oe=te.request,te.data.bytes.byteLength===0?Pe.call(this):(W.appendBuffer?W.appendBuffer(te.data.bytes):W.append(te.data.bytes,te.data),ue(Pe.bind(this)))}catch(xe){V.fatal('SourceBuffer append failed "'+xe+'"'),_e.length>0?Ge():ye=!1,delete te.data.bytes,te.promise.reject({chunk:te.data,error:new ce.Z(xe.code,xe.message)})}}}function q(){ie.length>0&&(W.updating||(ie.shift()(),q()))}function le(){W.updating||q()}function ae(te){var Pe,xe,je=te.target||{};Pe=T.Z.SOURCE_BUFFER_ERROR,xe={error:je,lastRequestAppended:Oe},Te.trigger(Pe,xe,{streamId:ee.streamInfo.id,mediaType:j})}function ue(te){ie.push(te),W.updating||q()}return O={getType:function(){return j},getAllBufferRanges:function(){try{return W.buffered}catch(te){return V.error("getAllBufferRanges exception: "+te.message),null}},getBuffer:function(){return W},append:function(te){var Pe=this,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(je,Me){te?(_e.push({data:te,promise:{resolve:je,reject:Me},request:xe}),ue(Ge.bind(Pe))):Me({chunk:te,error:new ce.Z(we.APPEND_ERROR_CODE,we.APPEND_ERROR_MESSAGE)})})},remove:function(te){return new Promise(function(Pe,xe){var je=te.start,Me=te.end;je>=0&&Me>je?ue(function(){try{W.remove(je,Me),ue(function(){Pe({from:je,to:Me,unintended:!1}),te.resolve&&te.resolve()})}catch(ve){xe({from:je,to:Me,unintended:!1,error:new ce.Z(we.REMOVE_ERROR_CODE,we.REMOVE_ERROR_MESSAGE)}),te.reject&&te.reject(ve)}}):Pe()})},abort:function(){return new Promise(function(te){try{_e=[],ze.readyState==="open"?ue(function(){try{W&&W.abort(),te()}catch(Pe){te()}}):(W&&W.setTextTrack&&ze.readyState==="ended"&&W.abort(),te())}catch(Pe){te()}})},reset:function(){if(W){try{ie=[],function(){try{typeof W.removeEventListener=="function"&&(W.removeEventListener("updateend",le,!1),W.removeEventListener("error",ae,!1),W.removeEventListener("abort",ae,!1)),clearInterval(H)}catch(te){V.error(te)}}(),ye=!1,_e=[],W.getClassName&&W.getClassName()==="TextSourceBuffer"||(V.debug("Removing sourcebuffer from media source"),ze.removeSourceBuffer(W))}catch(te){}W=null}Oe=null},updateTimestampOffset:Ie,initializeForStreamSwitch:function(te,Pe,xe){j=(ee=te).type;var je=ee.codec;(function(ve){W=ve.getBuffer()})(xe),Se();var Me=[];return Me.push(new Promise(function(ve){ue(function(){var De=W.appendWindowStart,$e=W.appendWindowEnd;W&&(W.abort(),W.appendWindowStart=De,W.appendWindowEnd=$e),ve()})})),Me.push(ke(ee.streamInfo)),he.get().streaming.buffer.useChangeTypeForTrackSwitch&&Me.push(Ze(je)),Pe&&Pe.MSETimeOffset!==void 0&&Me.push(Ie(Pe.MSETimeOffset)),Promise.all(Me)},initializeForFirstUse:function(te,Pe,xe){j=(ee=Pe).type;var je=ee.codec;try{if(je.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return We(te);W=ze.addSourceBuffer(je),Se();var Me=[];return Me.push(ke(ee.streamInfo)),xe&&xe.MSETimeOffset!==void 0&&Me.push(Ie(xe.MSETimeOffset)),Promise.all(Me)}catch(ve){return ee.type==E.Z.TEXT&&!ee.isFragmented||je.indexOf('codecs="stpp')!==-1||je.indexOf('codecs="vtt')!==-1||je.indexOf("text/vtt")!==-1?We(te):Promise.reject(ve)}},updateAppendWindow:ke,changeType:Ze},V=(0,M.Z)(re).getInstance().getLogger(O),O}ft.__dashjs_factory_name="SourceBufferSink";var be=U.Z.getClassFactory(ft);function He(k){var O,j,V,W=this.context,ee=[],H=k;function re(he,Ae){return ee=ee.filter(function(Te){return!((isNaN(Ae)||Te.start<Ae)&&(isNaN(he)||Te.end>he))}),Promise.resolve()}return O={getAllBufferRanges:function(){for(var he=[],Ae=0;Ae<ee.length;Ae++){var Te=ee[Ae];he.length===0||Te.start>he[he.length-1].end?he.push({start:Te.start,end:Te.end}):he[he.length-1].end=Te.end}var ie={start:function(_e){return he[_e].start},end:function(_e){return he[_e].end}};return Object.defineProperty(ie,"length",{get:function(){return he.length}}),ie},append:function(he){return he.segmentType!=="InitializationSegment"?(ee.push(he),ee.sort(function(Ae,Te){return Ae.start-Te.start}),V=null):V=he,j.debug("PreBufferSink appended chunk s: "+he.start+"; e: "+he.end),H&&H({chunk:he}),Promise.resolve()},remove:re,abort:function(){return Promise.resolve()},discharge:function(he,Ae){var Te=function(ie,_e){return ee.filter(function(ye){return(isNaN(_e)||ye.start<_e)&&(isNaN(ie)||ye.end>ie)})}(he,Ae);return V&&(Te.push(V),V=null),re(he,Ae),Te},reset:function(){ee=[],V=null,H=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(he){he()},getBuffer:function(){return this}},j=(0,M.Z)(W).getInstance().getLogger(O),O}He.__dashjs_factory_name="PreBufferSink";var vt=U.Z.getClassFactory(He);function Re(){var k={};return{save:function(O){var j=O.streamId,V=O.representationId;k[j]=k[j]||{},k[j][V]=O},extract:function(O,j){return k&&k[O]&&k[O][j]?k[O][j]:null},reset:function(){k={}}}}Re.__dashjs_factory_name="InitCache";var Ye=U.Z.getSingletonFactory(Re),ot=.01,Ht="BufferController";function Bt(k){k=k||{};var O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke,Ie,Ge,q=this.context,le=(0,m.Z)(q).getInstance(),ae=k.errHandler,ue=k.fragmentModel,te=k.representationController,Pe=k.adapter,xe=k.textController,je=k.abrController,Me=k.playbackController,ve=k.streamInfo,De=k.type,$e=k.settings;function mt(et){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(Ve,tt){H=et,Ae&&zt&&typeof Ae.discharge=="function"?(Te=Ae,yt(zt).then(function(){Ve()}).catch(function(Lt){tt(Lt)})):Ve()})}function ct(et){return Pe.convertRepresentationToRepresentationInfo(te.getRepresentationForQuality(et))}function yt(et){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(Ve,tt){Se&&et?H?(ie=!1,Gt(et,zt).then(function(Lt){Ve(Lt)}).catch(function(Lt){tt(Lt)})):(ie=!0,pt().then(function(Lt){Ve(Lt)}).catch(function(Lt){tt(Lt)})):Ve(null)})}function pt(){var et=this;return new Promise(function(zt,Ve){var tt=je.getQualityFor(De,ve.id);Ae=vt(q).create(at.bind(et)),Zn(ct(tt)).then(function(){zt(Ae)}).catch(function(){Ve()})})}function Gt(et,zt){return new Promise(function(Ve,tt){var Lt=je.getQualityFor(De,ve.id);Ae=be(q).create({mediaSource:H,textController:xe,eventBus:le}),function(yn,Cn,yr){var oi=ct(yr);return Cn&&Cn[De]&&(De===E.Z.VIDEO||De===E.Z.AUDIO)?Ae.initializeForStreamSwitch(yn,oi,Cn[De]):Ae.initializeForFirstUse(ve,yn,oi)}(et,zt,Lt).then(function(){return Zn(ct(Lt))}).then(function(){Ve(Ae)}).catch(function(yn){j.fatal("Caught error on create SourceBuffer: "+yn),ae.error(new ce.Z(we.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,we.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+De)),tt(yn)})})}function Vt(et){$e.get().streaming.cacheInitSegments&&(j.info("Init fragment finished loading saving to",De+"'s init cache"),Se.save(et.chunk)),j.debug("Append Init fragment",De," with representationId:",et.chunk.representationId," and quality:",et.chunk.quality,", data size:",et.chunk.bytes.byteLength),Zt(et.chunk)}function jt(et){Zt(et.chunk,et.request)}function Zt(et){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Ae&&(Ae.append(et,zt).then(function(Ve){at(Ve)}).catch(function(Ve){at(Ve)}),et.mediaInfo.type===E.Z.VIDEO&&Dn(T.Z.VIDEO_CHUNK_RECEIVED,{chunk:et}))}function xn(et){if(et&&et.length>0)for(var zt=0,Ve=et.length;zt<Ve;zt++)j.debug("Buffered range: "+et.start(zt)+" - "+et.end(zt)+", currentTime = ",Me.getTime())}function at(et){if(et.error)return et.error.code===22&&function(){if(We=!0,ee=.8*Nn(),j.warn("Quota exceeded, Critical Buffer: "+ee),ee>0){var tt=Math.max(.2*ee,1),Lt=ee-tt,yn=Math.min($e.get().streaming.buffer.bufferTimeAtTopQuality,.9*Lt),Cn=Math.min($e.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Lt),yr={streaming:{buffer:{bufferToKeep:parseFloat(tt.toFixed(5)),bufferTimeAtTopQuality:parseFloat(yn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Cn.toFixed(5))}}};$e.update(yr)}}(),void(et.error.code!==22&&On()||(j.warn("Clearing playback buffer to overcome quota exceed situation"),Dn(T.Z.QUOTA_EXCEEDED,{criticalBufferLevel:ee,quotaExceededTime:et.chunk.start}),qt(tn())));if(Ae&&(Bn(),We=!1,(ze=et.chunk)&&ze.endFragment)){ze&&!isNaN(ze.index)&&(re=Math.max(ze.index,re),kn());var zt=Ae.getAllBufferRanges();ze.segmentType===st.w.MEDIA_SEGMENT_TYPE&&(xn(zt),Pt(),function(){if(!isNaN(Ge)&&!ie)if(De===E.Z.AUDIO||De===E.Z.VIDEO){var tt=Me.getTime(),Lt=Jt(tt,0),yn=Jt(Ge,0);if(Lt&&yn&&Lt.start===yn.start)Ge=NaN;else{var Cn=te.getCurrentRepresentation().segmentDuration,yr=Jt(Ge,Cn);yr&&($e.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(tt-Ge)>Cn?Ge<=yr.end&&Me.seek(Math.max(Ge,yr.start),!1,!0):tt<yr.start&&Me.seek(yr.start,!1,!0))}}else Ge=NaN}());var Ve=!1;_e&&(_e.indexOf(ze)>0&&(Ve=!0),_e=null),ze&&!Ve&&Dn(T.Z.BYTES_APPENDED_END_FRAGMENT,{quality:ze.quality,startTime:ze.start,index:ze.index,bufferedRanges:zt,segmentType:ze.segmentType,mediaType:De})}}function St(){return new Promise(function(et,zt){var Ve=Qt();if(!Ve||Ve.length===0)return Pt(),void et();qt(Ve).then(function(){et()}).catch(function(tt){zt(tt)})})}function Qt(et){var zt=[],Ve=Ae.getAllBufferRanges();if(!Ve||Ve.length===0)return zt;if(!et&&et!==0||isNaN(et))zt.push({start:Ve.start(0),end:Ve.end(Ve.length-1)+.5});else{var tt=function(yn,Cn){var yr=$e.get().streaming.buffer.bufferToKeep,oi=Cn.start(0);if(yn-oi>yr){var gi=Math.max(0,yn-yr),Xr=ue.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:yn,threshold:ot})[0];if(Xr&&(gi=Math.min(Xr.startTime,gi)),gi>0)return{start:oi,end:gi}}return null}(et,Ve),Lt=function(yn,Cn){var yr=Cn.end(Cn.length-1)+.5,oi=Pn(yn),gi=ve.manifestInfo.duration>=$e.get().streaming.buffer.longFormContentDurationThreshold?$e.get().streaming.buffer.bufferTimeAtTopQualityLongForm:$e.get().streaming.buffer.bufferTimeAtTopQuality,Xr=isNaN(oi)?yn:Math.min(oi,yn+gi);if(Xr>=Cn.end(Cn.length-1))return null;var Lo=ue.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:yn,threshold:ot})[0];if(Lo&&(Xr=Math.max(Lo.startTime+Lo.duration,Xr)),$e.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var zi=0;zi<Cn.length;zi++)if(Cn.start(zi)<=yn&&yn<=Cn.end(zi)&&Cn.start(zi)<=Xr&&Xr<=Cn.end(zi)){var bs=Xr;Xr=zi+1<Cn.length?Cn.start(zi+1):Cn.end(zi)+1,j.debug("Buffered range ["+Cn.start(zi)+", "+Cn.end(zi)+"] overlaps with targetTime "+yn+" and range to be pruned ["+bs+", "+yr+"], using ["+Xr+", "+yr+"] instead"+(Xr<yr?"":" (no actual pruning)"));break}}return Xr<Cn.end(Cn.length-1)?{start:Xr,end:yr}:null}(et,Ve);tt&&zt.push(tt),Lt&&zt.push(Lt)}return zt}function Pt(){(!Ie||De===E.Z.TEXT&&xe.isTextEnabled())&&Bn()}function un(){mr()}function an(){mr(),Ge=NaN}function Jt(et,zt){if(!Ae)return null;var Ve,tt,Lt=Ae.getAllBufferRanges(),yn=0,Cn=0,yr=null,oi=null,gi=0,Xr=isNaN(zt)?.15:zt;if(Lt!=null){for(tt=0,Ve=Lt.length;tt<Ve;tt++)if(yn=Lt.start(tt),Cn=Lt.end(tt),yr===null)gi=Math.abs(yn-et),(et>=yn&&et<Cn||gi<=Xr)&&(yr=yn,oi=Cn);else{if(!((gi=yn-oi)<=Xr))break;oi=Cn}if(yr!==null)return{start:yr,end:oi}}return null}function Bn(){if(Me){var et=Me.getTime()||0;ie&&(et=isNaN(Ge)?0:Ge);var zt=$e.get().streaming.gaps.jumpGaps&&!isNaN($e.get().streaming.gaps.smallGapLimit)?$e.get().streaming.gaps.smallGapLimit:NaN;W=Math.max(function(Ve,tt){var Lt;return $e.get().streaming.gaps.jumpGaps&&(tt=$e.get().streaming.gaps.smallGapLimit),(Lt=Jt(Ve,tt))===null?0:Lt.end-Ve}(et,zt),0),Dn(T.Z.BUFFER_LEVEL_UPDATED,{mediaType:De,bufferLevel:W}),mr()}}function kn(){var et=re>=he-1,zt=Me.getTimeToStreamEnd(ve)-W<1e-5;!et&&!zt||V||(en(!0),j.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(ve.id," and type ").concat(De)))}function mr(){De!==E.Z.AUDIO&&De!==E.Z.VIDEO||((!Me.getLowLatencyModeEnabled()&&W<$e.get().streaming.buffer.stallThreshold||W===0)&&!V?vr(P.Z.BUFFER_EMPTY):(V||W>=$e.get().streaming.buffer.stallThreshold||Me.getLowLatencyModeEnabled()&&W>0)&&vr(P.Z.BUFFER_LOADED))}function vr(et){ye===et||et===P.Z.BUFFER_EMPTY&&Me.getTime()===0||De===E.Z.TEXT&&!xe.isTextEnabled()||(ye=et,Dn(T.Z.BUFFER_LEVEL_STATE_CHANGED,{state:et}),Dn(et===P.Z.BUFFER_LOADED?T.Z.BUFFER_LOADED:T.Z.BUFFER_EMPTY),j.debug(et===P.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function bt(){Ae&&De!==E.Z.TEXT&&(V||qt(tn()))}function tn(){var et=[],zt=Ae.getAllBufferRanges();if(!zt||zt.length===0)return et;var Ve=Me.getTime(),tt=Math.max(0,Ve-$e.get().streaming.buffer.bufferToKeep),Lt=ue.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ve,threshold:ot})[0];if(Lt)tt=Math.min(Lt.startTime,tt);else if(Ve===0&&Me.getIsDynamic())return[];if(zt.start(0)<=tt){for(var yn={start:0,end:tt},Cn=0;Cn<zt.length&&zt.end(Cn)<=tt;Cn++)yn.end=zt.end(Cn);yn.start<yn.end&&et.push(yn)}return et}function qt(et){return new Promise(function(zt,Ve){if(et&&Ae&&et.length!==0){var tt=[];et.forEach(function(Lt){tt.push(function(yn){return new Promise(function(Cn,yr){yn.resolve=Cn,yn.reject=yr,ke.push(yn)})}(Lt))}),Ze||mn(),Promise.all(tt).then(function(){zt()}).catch(function(Lt){Ve(Lt)})}else zt()})}function mn(){try{if(ke.length===0||!Ae)return j.debug("Nothing to prune, halt pruning"),ke=[],void(Ze=!1);var et=Ae.getBuffer();if(!et||!et.buffered||et.buffered.length===0)return j.debug("SourceBuffer is empty (or does not exist), halt pruning"),ke=[],void(Ze=!1);var zt=ke.shift();j.debug("".concat(De,": Removing buffer from: ").concat(zt.start," to ").concat(zt.end)),Ze=!0,Me.getTime()<zt.end&&en(!1),Ae.remove(zt).then(function(Ve){bn(Ve)}).catch(function(Ve){bn(Ve)})}catch(Ve){Ze=!1}}function bn(et){j.debug("onRemoved buffer from:",et.from,"to",et.to),Ae&&(xn(Ae.getAllBufferRanges()),ke.length===0&&(Ze=!1,Bn()),et.unintended&&(j.warn("Detected unintended removal from:",et.from,"to",et.to,"setting streamprocessor time to",et.from),Dn(T.Z.SEEK_TARGET,{time:et.from})),Ze?mn():(Ie?Ie=!1:Bn(),Dn(T.Z.BUFFER_CLEARED,{from:et.from,to:et.to,unintended:et.unintended,hasEnoughSpaceToAppend:On(),quotaExceeded:We})))}function Zn(et){return new Promise(function(zt){et&&et.MSETimeOffset!==void 0&&Ae&&Ae.updateTimestampOffset?Ae.updateTimestampOffset(et.MSETimeOffset).then(function(){zt()}).catch(function(){zt()}):zt()})}function Fn(){return Ae&&!V?Ae.updateAppendWindow(ve):Promise.resolve()}function qn(){++Oe*($e.get().streaming.wallclockTimeUpdateInterval/1e3)>=$e.get().streaming.buffer.bufferPruningInterval&&(Oe=0,bt())}function Yn(){mr()}function en(et){(V=et)?Dn(T.Z.BUFFERING_COMPLETED):he=Number.POSITIVE_INFINITY}function Nn(){try{var et,zt,Ve=Ae.getAllBufferRanges(),tt=0;if(!Ve)return tt;for(zt=0,et=Ve.length;zt<et;zt++)tt+=Ve.end(zt)-Ve.start(zt);return tt}catch(Lt){return 0}}function Pn(et){try{var zt=et,Ve=Ae.getAllBufferRanges();if(!Ve||Ve.length===0)return NaN;for(var tt=0;zt===et&&tt<Ve.length;){var Lt=Ve.start(tt),yn=Ve.end(tt);zt>=Lt&&zt<=yn&&(zt=yn),tt+=1}return zt===et?NaN:zt}catch(Cn){}}function On(){var et=Nn();return isNaN(et)||et<ee}function Dn(et,zt){var Ve=zt||{};le.trigger(et,Ve,{streamId:ve.id,mediaType:De})}function Ct(et,zt){if(ee=Number.POSITIVE_INFINITY,ye=void 0,he=Number.POSITIVE_INFINITY,re=0,ze=null,V=!1,Ze=!1,We=!1,W=0,Oe=0,ke=[],Ge=NaN,ie=!1,Ae){var Ve=Ae;Ae=null,et||zt||Ve.abort().then(function(){Ve.reset(zt),Ve=null})}Ie=!1}return O={initialize:function(et){mt(et),le.on(T.Z.INIT_FRAGMENT_LOADED,Vt,O),le.on(T.Z.MEDIA_FRAGMENT_LOADED,jt,O),le.on(T.Z.WALLCLOCK_TIME_UPDATED,qn,O),le.on(_.Z.PLAYBACK_PLAYING,an,O),le.on(_.Z.PLAYBACK_PROGRESS,Pt,O),le.on(_.Z.PLAYBACK_TIME_UPDATED,Pt,O),le.on(_.Z.PLAYBACK_RATE_CHANGED,Yn,O),le.on(_.Z.PLAYBACK_STALLED,un,O)},getStreamId:function(){return ve.id},getType:function(){return De},getBufferControllerType:function(){return Ht},createBufferSink:yt,dischargePreBuffer:function(){if(Ae&&Te&&typeof Te.discharge=="function"){var et=Te.getAllBufferRanges();if(et.length>0){for(var zt="Beginning "+De+"PreBuffer discharge, adding buffer for:",Ve=0;Ve<et.length;Ve++)zt+=" start: "+et.start(Ve)+", end: "+et.end(Ve)+";";j.debug(zt)}else j.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");_e=[];for(var tt=Te.discharge(),Lt=null,yn=0;yn<tt.length;yn++){var Cn=tt[yn];if(Cn.segmentType!==st.w.INIT_SEGMENT_TYPE){var yr=Se.extract(Cn.streamId,Cn.representationId);yr&&Lt!==yr&&(_e.push(yr),Ae.append(yr),Lt=yr)}_e.push(Cn),Ae.append(Cn)}Te.reset(),Te=null}},getBuffer:function(){return Ae},getBufferLevel:function(){return W},getRangeAt:Jt,hasBufferAtTime:function(et){try{var zt=Ae.getAllBufferRanges();if(!zt||zt.length===0)return!1;for(var Ve=0;Ve<zt.length;){var tt=zt.start(Ve),Lt=zt.end(Ve);if(et>=tt&&et<=Lt)return!0;Ve+=1}return!1}catch(yn){return j.error(yn),!1}},pruneBuffer:bt,setMediaSource:mt,getMediaSource:function(){return H},appendInitSegmentFromCache:function(et){var zt=Se.extract(ve.id,et);return!!zt&&(j.info("Append Init fragment",De," with representationId:",zt.representationId," and quality:",zt.quality,", data size:",zt.bytes.byteLength),Zt(zt),!0)},getIsBufferingCompleted:function(){return V},setIsBufferingCompleted:en,getIsPruningInProgress:function(){return Ze},reset:function(et,zt){le.off(T.Z.INIT_FRAGMENT_LOADED,Vt,this),le.off(T.Z.MEDIA_FRAGMENT_LOADED,jt,this),le.off(T.Z.WALLCLOCK_TIME_UPDATED,qn,this),le.off(_.Z.PLAYBACK_PLAYING,an,this),le.off(_.Z.PLAYBACK_PROGRESS,Pt,this),le.off(_.Z.PLAYBACK_TIME_UPDATED,Pt,this),le.off(_.Z.PLAYBACK_RATE_CHANGED,Yn,this),le.off(_.Z.PLAYBACK_STALLED,un,this),Ct(et,zt)},prepareForPlaybackSeek:function(){return V&&en(!1),Ae.abort()},prepareForReplacementTrackSwitch:function(et){return new Promise(function(zt,Ve){Ae.abort().then(function(){return Fn()}).then(function(){return $e.get().streaming.buffer.useChangeTypeForTrackSwitch?Ae.changeType(et):Promise.resolve()}).then(function(){return St()}).then(function(){en(!1),zt()}).catch(function(tt){Ve(tt)})})},prepareForNonReplacementTrackSwitch:function(et){return new Promise(function(zt,Ve){Fn().then(function(){return $e.get().streaming.buffer.useChangeTypeForTrackSwitch?Ae.changeType(et):Promise.resolve()}).then(function(){zt()}).catch(function(tt){Ve(tt)})})},prepareForForceReplacementQualitySwitch:function(et){return new Promise(function(zt,Ve){Ae.abort().then(function(){return Fn()}).then(function(){return St()}).then(function(){return Zn(et)}).then(function(){en(!1),zt()}).catch(function(tt){Ve(tt)})})},updateAppendWindow:Fn,getAllRangesWithSafetyFactor:Qt,getContinuousBufferTimeForTargetTime:Pn,clearBuffers:qt,pruneAllSafely:St,updateBufferTimestampOffset:Zn,setSeekTarget:function(et){Ge=et},segmentRequestingCompleted:function(et){isNaN(et)||(he=et,kn())}},j=(0,M.Z)(q).getInstance().getLogger(O),Se=Ye(q).getInstance(),Ct(),O}Bt.__dashjs_factory_name=Ht;var Et=U.Z.getClassFactory(Bt),Dt="NotFragmentedTextBufferController";function Ne(k){k=k||{};var O,j,V,W,ee,H,re=this.context,he=(0,m.Z)(re).getInstance(),Ae=k.textController,Te=k.errHandler,ie=k.streamInfo,_e=k.type;function ye(Ze){W=Ze}function ze(Ze){var We,Se;j!==Ze&&(j=Ze)&&(We=T.Z.BUFFERING_COMPLETED,Se={},he.trigger(We,Se,{streamId:ie.id,mediaType:_e}))}function Oe(Ze){Ze.chunk.bytes&&!j&&(H.save(Ze.chunk),ee.append(Ze.chunk),ze(!0))}return O={initialize:function(Ze){ye(Ze)},getStreamId:function(){return ie.id},getType:function(){return _e},getBufferControllerType:function(){return Dt},createBufferSink:function(Ze){return new Promise(function(We,Se){try{(ee=be(re).create({mediaSource:W,textController:Ae,eventBus:he})).initializeForFirstUse(ie,Ze),V||(ee.getBuffer()&&typeof ee.getBuffer().initialize=="function"&&ee.getBuffer().initialize(),V=!0),We(ee)}catch(ke){Te.error(new ce.Z(we.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,we.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+_e)),Se(ke)}})},dischargePreBuffer:function(){},getBuffer:function(){return ee},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:ye,getMediaSource:function(){return W},appendInitSegmentFromCache:function(Ze){return H.extract(ie.id,Ze)!==null},getIsBufferingCompleted:function(){return j},setIsBufferingCompleted:ze,getIsPruningInProgress:function(){return!1},reset:function(Ze){he.off(T.Z.INIT_FRAGMENT_LOADED,Oe,O),!Ze&&ee&&(ee.abort(),ee.reset(),ee=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return j=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},V=!1,W=null,j=!1,H=Ye(re).getInstance(),he.on(T.Z.INIT_FRAGMENT_LOADED,Oe,O),O}Ne.__dashjs_factory_name=Dt;var ne=U.Z.getClassFactory(Ne);function Be(k){k=k||{};var O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze=this.context,Oe=(0,m.Z)(ze).getInstance(),Ze=k.dashMetrics,We=k.mediaPlayerModel,Se=k.fragmentModel,ke=k.abrController,Ie=k.playbackController,Ge=k.textController,q=k.type,le=k.bufferController,ae=k.representationController,ue=k.settings;function te(){_e=!0}function Pe(){_e=!1}function xe(Gt){if(!le.getIsBufferingCompleted()){je();var Vt=isNaN(Gt)?0:Gt;ee=setTimeout(Me,Vt)}}function je(){ee&&(clearTimeout(ee),ee=null)}function Me(){try{if(function(){try{return q===E.Z.TEXT&&!Ge.isTextEnabled()||Ie.isPaused()&&(!Ie.getStreamController().getInitialPlayback()||!Ie.getStreamController().getAutoPlay())&&!ue.get().streaming.scheduling.scheduleWhilePaused}catch(jt){return!1}}())return void je();if(function(){try{return!!_e&&ae.getCurrentRepresentationInfo()&&(isNaN(Ae)||Te||(jt=j.id,Zt=ke.getMaxAllowedIndexFor(q,jt),!(!isNaN(he)&&he==Zt||(V.info("Top quality "+q+" index has changed from "+he+" to "+Zt),he=Zt,0)))||function(){var xn=ae.getCurrentRepresentationInfo();return!q||!xn||Ze.getCurrentBufferLevel(q)<ve()}())}catch(xn){return!1}var jt,Zt}()){var Gt=!1;ye&&(Gt=ke.checkPlaybackQuality(q,j.id)),Gt||(Vt=ae.getCurrentRepresentationInfo(),ie||Vt.quality!==Ae||Te?(Te?(V.debug("Switch track for "+q+", representation id = "+Vt.id),Te=!1):V.debug("Quality has changed, get init request for representationid = "+Vt.id),Oe.trigger(T.Z.INIT_FRAGMENT_NEEDED,{representationId:Vt.id,sender:O},{streamId:j.id,mediaType:q}),ye=!1,ie=!1):(V.debug("Media segment needed for ".concat(q," and stream id ").concat(j.id)),Oe.trigger(T.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:j.id,mediaType:q}),ye=!0))}else xe(Ie.getLowLatencyModeEnabled()?ue.get().streaming.scheduling.lowLatencyTimeout:ue.get().streaming.scheduling.defaultTimeout)}catch(jt){xe(Ie.getLowLatencyModeEnabled()?ue.get().streaming.scheduling.lowLatencyTimeout:ue.get().streaming.scheduling.defaultTimeout)}var Vt}function ve(){var Gt=NaN,Vt=ae.getCurrentRepresentationInfo();return q&&Vt&&(Gt=q===E.Z.TEXT?function(){try{if(Ge.isTextEnabled()){var jt=ae.getCurrentRepresentationInfo();if(isNaN(jt.fragmentDuration)){var Zt=Ze.getCurrentSchedulingInfo(P.Z.SCHEDULING_INFO);return Zt?Zt.duration:0}return jt.fragmentDuration}return 0}catch(xn){return 0}}():q===E.Z.AUDIO&&H?function(){try{var jt=Ze.getCurrentBufferLevel(E.Z.VIDEO),Zt=ae.getCurrentRepresentationInfo();return isNaN(Zt.fragmentDuration)?jt+1:Math.max(jt+1,Zt.fragmentDuration)}catch(xn){return 0}}():function(){try{var jt=ae.getCurrentRepresentationInfo().mediaInfo.streamInfo;return ke.isPlayingAtTopQuality(jt)?jt.manifestInfo.duration>=ue.get().streaming.buffer.longFormContentDurationThreshold?ue.get().streaming.buffer.bufferTimeAtTopQualityLongForm:ue.get().streaming.buffer.bufferTimeAtTopQuality:We.getStableBufferTime()}catch(Zt){return We.getStableBufferTime()}}()),Gt}function De(){$e(!0)}function $e(Gt){if(Ie&&Se){var Vt=Se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ie.getTime(),threshold:0})[0];Vt&&Ie.getTime()>=Vt.startTime&&((!re.mediaInfo||Vt.mediaInfo.type===re.mediaInfo.type&&Vt.mediaInfo.index!==re.mediaInfo.index)&&Gt&&Oe.trigger(T.Z.TRACK_CHANGE_RENDERED,{mediaType:q,oldMediaInfo:re.mediaInfo,newMediaInfo:Vt.mediaInfo,streamId:j.id}),Vt.quality===re.quality&&Vt.adaptationIndex===re.adaptationIndex||!Gt||(V.debug("Quality change rendered for streamId ".concat(j.id," and type ").concat(q)),Oe.trigger(T.Z.QUALITY_CHANGE_RENDERED,{mediaType:q,oldQuality:re.quality,newQuality:Vt.quality,streamId:j.id})),re={mediaInfo:Vt.mediaInfo,quality:Vt.quality,adaptationIndex:Vt.adaptationIndex})}}function mt(){Se.abortRequests(),je()}function ct(){ue.get().streaming.scheduling.scheduleWhilePaused||xe()}function yt(Gt){Ze.updatePlayListTraceMetrics({playbackspeed:Gt.playbackRate.toString()})}function pt(){ye=!0,W=0,Ae=NaN,re={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},he=NaN,Te=!1,ie=!1,_e=!0}return O={initialize:function(Gt){H=Gt,Oe.on(T.Z.URL_RESOLUTION_FAILED,mt,O),Oe.on(_.Z.PLAYBACK_STARTED,ct,O),Oe.on(_.Z.PLAYBACK_RATE_CHANGED,yt,O),Oe.on(_.Z.PLAYBACK_TIME_UPDATED,De,O),Oe.on(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,te,O),Oe.on(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Pe,O)},getType:function(){return q},getStreamId:function(){return j.id},setTimeToLoadDelay:function(Gt){W=Gt},getTimeToLoadDelay:function(){return W},setSwitchTrack:function(Gt){Te=Gt},getSwitchTrack:function(){return Te},startScheduleTimer:xe,clearScheduleTimer:je,reset:function(){Oe.off(T.Z.URL_RESOLUTION_FAILED,mt,O),Oe.off(_.Z.PLAYBACK_STARTED,ct,O),Oe.off(_.Z.PLAYBACK_RATE_CHANGED,yt,O),Oe.off(_.Z.PLAYBACK_TIME_UPDATED,De,O),Oe.off(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,te,O),Oe.off(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Pe,O),je(),$e(!1),pt(),j=null},getBufferTarget:ve,getPlaybackController:function(){return Ie},setCheckPlaybackQuality:function(Gt){ye=Gt},setInitSegmentRequired:function(Gt){ie=Gt},setLastInitializedQuality:function(Gt){Ae=Gt}},V=(0,M.Z)(ze).getInstance().getLogger(O),pt(),j=k.streamInfo,O}Be.__dashjs_factory_name="ScheduleController";var L=U.Z.getClassFactory(Be),D=w(7387);function G(k){var O,j,V,W,ee,H,re=(k=k||{}).eventBus,he=k.events,Ae=k.abrController,Te=k.dashMetrics,ie=k.playbackController,_e=k.timelineConverter,ye=k.type,ze=k.streamInfo,Oe=k.dashConstants,Ze=k.segmentsController,We=k.isDynamic,Se=k.adapter;function ke(){return ye}function Ie(){return V}function Ge(){return H}function q(){j=null,V=!0,W=[],ee=null}function le(je){return new Promise(function(Me,ve){var De=je.hasInitialization(),$e=je.hasSegments(),mt=[];mt.push(Ze.updateInitData(je,De)),mt.push(Ze.updateSegmentData(je,$e)),Promise.all(mt).then(function(ct){var yt;ct[0]&&!ct[0].error&&(je=function(pt,Gt){return Gt&&!Gt.error&&Gt.representation?Gt.representation:pt}(je,ct[0])),ct[1]&&!ct[1].error&&(je=function(pt,Gt){if(Gt&&!Gt.error){var Vt,jt,Zt,xn,at=Gt.segments,St=[],Qt=0;for(Vt=0,jt=at?at.length:0;Vt<jt;Vt++)Zt=at[Vt],(xn=(0,D.TJ)(_e,We,pt,Zt.startTime,Zt.duration,Zt.timescale,Zt.media,Zt.mediaRange,Qt))&&(St.push(xn),xn=null,Qt++);return St.length>0&&(pt.segments=St),pt}}(je,ct[1])),(yt=je).mediaFinishedInformation=Ze.getMediaFinishedInformation(yt),function(pt){if(Ie()){var Gt,Vt,jt=Te.getCurrentManifestUpdate(),Zt=!1;if(jt){for(var xn=0;xn<jt.representationInfo.length;xn++)if((Gt=jt.representationInfo[xn]).index===pt.index&&Gt.mediaType===ke()){Zt=!0;break}Zt||Te.addManifestUpdateRepresentationInfo(pt,ke())}if(function(){for(var St=0,Qt=W.length;St<Qt;St++){var Pt=W[St].segmentInfoType;if(!W[St].hasInitialization()||(Pt===Oe.SEGMENT_BASE||Pt===Oe.BASE_URL)&&!W[St].segments)return!1}return!0}()){Ae.setPlaybackQuality(ye,ze,(Vt=H,W.indexOf(Vt)));var at=Te.getCurrentDVRInfo(ye);at&&Te.updateManifestUpdateInfo({latency:at.range.end-ie.getTime()}),Te.getCurrentRepresentationSwitch(Ge().adaptation.type)||ae(),te()}}}(je),Me()}).catch(function(ct){ve(ct)})})}function ae(){(function(){if(!(Ae&&Te&&ie&&_e))throw new Error(E.Z.MISSING_CONFIG_ERROR)})();var je=new Date,Me=Ge(),ve=1e3*ie.getTime();Me&&Te.addRepresentationSwitch(Me.adaptation.type,je,ve,Me.id),re.trigger(_.Z.REPRESENTATION_SWITCH,{mediaType:ye,streamId:ze.id,currentRepresentation:Me,numberOfRepresentations:W.length},{streamId:ze.id,mediaType:ye})}function ue(je){return je==null||je>=W.length?null:W[je]}function te(je){V=!1,re.trigger(he.DATA_UPDATE_COMPLETED,{data:j,currentRepresentation:H,error:je},{streamId:ze.id,mediaType:ye})}function Pe(je){H=je,ee=Se.convertRepresentationToRepresentationInfo(H)}function xe(je){if(je.newDuration){var Me=Ge();Me&&Me.adaptation.period&&(Me.adaptation.period.duration=je.newDuration)}}return O={getStreamId:function(){return ze.id},getType:ke,getData:function(){return j},isUpdating:Ie,updateData:function(je,Me,ve,De,$e){return new Promise(function(mt,ct){if(V=!0,W=Me,j=je,Pe(ue($e)),ve!==E.Z.VIDEO&&ve!==E.Z.AUDIO&&(ve!==E.Z.TEXT||!De))return te(),void mt();for(var yt=[],pt=0,Gt=W.length;pt<Gt;pt++){var Vt=W[pt];yt.push(le(Vt))}Promise.all(yt).then(function(){Pe(ue($e)),mt()}).catch(function(jt){ct(jt)})})},getCurrentRepresentation:Ge,getCurrentRepresentationInfo:function(){return ee},getRepresentationForQuality:ue,prepareQualityChange:function(je){Pe(ue(je)),ae()},reset:function(){re.off(_.Z.MANIFEST_VALIDITY_CHANGED,xe,O),q()}},q(),re.on(_.Z.MANIFEST_VALIDITY_CHANGED,xe,O),O}G.__dashjs_factory_name="RepresentationController";var K=U.Z.getClassFactory(G),ge=w(3106),de=w(9326),Ke=w(7473),wt=w(2594);function lt(k,O){if(!(k instanceof O))throw new TypeError("Cannot call a class as a function")}var ut=function k(){lt(this,k),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};ut.INITIAL_PLAYOUT_START_REASON="initial_playout",ut.SEEK_START_REASON="seek",ut.RESUME_FROM_PAUSE_START_REASON="resume",ut.METRICS_COLLECTION_START_REASON="metrics_collection_start";var nt=function k(){lt(this,k),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};nt.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",nt.REBUFFERING_REASON="rebuffering",nt.USER_REQUEST_STOP_REASON="user_request",nt.END_OF_PERIOD_STOP_REASON="end_of_period",nt.END_OF_CONTENT_STOP_REASON="end_of_content",nt.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",nt.FAILURE_STOP_REASON="failure";var ht=w(7802);function _t(){return{ntpToUTC:function(k){var O=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(O.getTime()+k).getTime()}}}_t.__dashjs_factory_name="TimeUtils";var Tt=U.Z.getSingletonFactory(_t);function Mt(k){k=k||{};var O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze,Oe,Ze=this.context,We=(0,m.Z)(Ze).getInstance(),Se=k.streamInfo,ke=k.type,Ie=k.errHandler,Ge=k.mimeType,q=k.timelineConverter,le=k.adapter,ae=k.manifestModel,ue=k.mediaPlayerModel,te=k.fragmentModel,Pe=k.abrController,xe=k.playbackController,je=k.mediaController,Me=k.textController,ve=k.dashMetrics,De=k.settings,$e=k.boxParser,mt=k.segmentBlacklistController;function ct(){return Se.id}function yt(){return ke}function pt(){return le.getIsTextTrack(he.getData())}function Gt(){ee=[],W=null,ze=0,Ae=!1,Te=!1,ie=!1,Oe=null}function Vt(Ct){return!isNaN(Ct)&&!isNaN(Se.duration)&&isFinite(Se.duration)&&Ct>=Se.start+Se.duration}function jt(Ct){var et=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Ct.sender){if(xe.getIsManifestUpdateInProgress())Qt();else if((!pt()||Me.isTextEnabled())&&H&&Ct.representationId&&!H.appendInitSegmentFromCache(Ct.representationId)){var zt=he.getCurrentRepresentation();if(zt.range===0)return void Zt();var Ve=_e?_e.getInitRequest(W,zt):null;Ve?te.executeRequest(Ve):et&&(re.setInitSegmentRequired(!0),Qt())}}}function Zt(Ct){var et=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(xe.getIsManifestUpdateInProgress()||H.getIsPruningInProgress())Qt();else{var zt=St();zt?(Ae=!1,Te=!1,xn(zt)):at(et)}}function xn(Ct){isNaN(Ct.startTime+Ct.duration)||(ze=Ct.startTime+Ct.duration),Ct.delayLoadingTime=new Date().getTime()+re.getTimeToLoadDelay(),re.setTimeToLoadDelay(0),function(et){var zt=et.url;return et.range&&(zt=zt.concat("_",et.range)),mt.contains(zt)}(Ct)?(j.warn("Fragment request url ".concat(Ct.url," for stream id ").concat(Se.id," and media type ").concat(ke," is on the ignore list and will be skipped")),Qt()):(j.debug("Next fragment request url for stream id ".concat(Se.id," and media type ").concat(ke," is ").concat(Ct.url)),te.executeRequest(Ct))}function at(Ct){var et,zt=he.getCurrentRepresentation();if(!De.get().streaming.gaps.enableSeekFix||!Ae&&xe.getTime()!==0||(V?V&&zt.segmentInfoType===y.Z.SEGMENT_TIMELINE&&(et=_e.getValidTimeAheadOfTargetTime(ze,W,zt,De.get().streaming.gaps.threshold)):et=_e.getValidTimeAheadOfTargetTime(ze,W,zt,De.get().streaming.gaps.threshold),isNaN(et)||et===ze)){if(_e.isLastSegmentRequested(zt,ze)){var Ve=_e.getCurrentIndex();return j.debug("Segment requesting for stream ".concat(Se.id," has finished")),We.trigger(T.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:Ve},{streamId:Se.id,mediaType:ke}),H.segmentRequestingCompleted(Ve),void re.clearScheduleTimer()}Ct&&Qt()}else xe.isSeeking()||xe.getTime()===0?(j.warn("Adjusting playback time ".concat(et," because of gap in the manifest. Seeking by ").concat(et-ze)),xe.seek(et,!1,!1)):(j.warn("Adjusting buffering time ".concat(et," because of gap in the manifest. Adjusting time by ").concat(et-ze)),Dn(et),Ct&&Qt())}function St(){var Ct,et=Fn();if(isNaN(ze)||yt()===E.Z.TEXT&&!Me.isTextEnabled())return null;if(_e){var zt=he&&et?he.getRepresentationForQuality(et.quality):null;Ct=Ae?_e.getSegmentRequestForTime(W,zt,ze):Te?_e.repeatSegmentRequest(W,zt):_e.getNextSegmentRequest(W,zt)}return Ct}function Qt(){re.startScheduleTimer(xe.getLowLatencyModeEnabled()?De.get().streaming.scheduling.lowLatencyTimeout:De.get().streaming.scheduling.defaultTimeout)}function Pt(Ct){Ct.error||H.getIsBufferingCompleted()||H.updateBufferTimestampOffset(Ct.currentRepresentation)}function un(Ct){ve.addBufferState(ke,Ct.state,re.getBufferTarget()),Ct.state!==P.Z.BUFFER_EMPTY||xe.isSeeking()||(j.info("Buffer is empty! Stalling!"),ve.pushPlayListTraceMetrics(new Date,nt.REBUFFERING_REASON))}function an(Ct){te.syncExecutedRequestsWithBufferedRange(H.getBuffer().getAllBufferRanges(),Se.duration),Ct.quotaExceeded&&Ct.from>xe.getTime()&&Dn(Ct.from),Ct.hasEnoughSpaceToAppend&&Ct.quotaExceeded&&re.startScheduleTimer()}function Jt(Ct){if(Ct&&Ct.lastRequestAppended&&Ct.lastRequestAppended.url){var et=Ct.lastRequestAppended.url;Ct.lastRequestAppended.range&&(et=et.concat("_",Ct.lastRequestAppended.range)),j.warn("Blacklisting segment with url ".concat(et)),mt.add(et)}}function Bn(Ct){if(j.debug("Appended bytes for ".concat(Ct.mediaType," and stream id ").concat(Ct.streamId)),Ct.segmentType===st.w.INIT_SEGMENT_TYPE){var et=Ct.quality;re.setLastInitializedQuality(et),j.info("["+ke+"] lastInitializedRepresentationInfo changed to "+Ct.quality)}Oe?kn(Oe):re.startScheduleTimer(0)}function kn(Ct){var et=te.getRequests({state:X.FRAGMENT_MODEL_LOADING});if(et&&et.length>0)return j.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(Oe=Ct);H.updateBufferTimestampOffset(Ct).then(function(){re.setCheckPlaybackQuality(!1),W.segmentAlignment||W.subSegmentAlignment?re.startScheduleTimer():Pn(),Oe=null,ie=!1}).catch(function(){Oe=null,ie=!1})}function mr(Ct){j.info("onFragmentLoadingAbandoned request: "+Ct.request.url+" has been aborted"),xe.isSeeking()||re.getSwitchTrack()||ie||(j.info("onFragmentLoadingAbandoned request: "+Ct.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Ct.request&&Ct.request.isInitializationRequest()?re.setInitSegmentRequired(!0):Dn(Ct.request.startTime+Ct.request.duration/2),re.startScheduleTimer(0))}function vr(Ct){j.info("OnFragmentLoadingCompleted for stream id "+Se.id+" and media type "+ke+" - Url:",Ct.request?Ct.request.url:"undefined",Ct.request.range?", Range:"+Ct.request.range:""),pt()&&re.startScheduleTimer(0),Ct.error&&Ct.request.serviceLocation&&function(et){j.info("Fragment loading completed with an error"),et&&et.request&&et.request.type&&(et.request.type===st.w.INIT_SEGMENT_TYPE?jt({representationId:et.request.representationId,sender:{}},!1):et.request.type===st.w.MEDIA_SEGMENT_TYPE&&(Dn(et.request.startTime+et.request.duration/2),Zt({},!1)))}(Ct)}function bt(){Dn(xe.getTime()),Zn().startScheduleTimer()}function tn(Ct){var et=Ct.currentTrackInfo;if(et){var zt=ee.find(function(Ve){return Ve.index===et.index&&Ve.lang===et.lang});zt&&bn(zt).then(function(){H.setIsBufferingCompleted(!1),Dn(xe.getTime()),re.setInitSegmentRequired(!0),re.startScheduleTimer()})}}function qt(Ct){Dn(Ct.quotaExceededTime),re.clearScheduleTimer()}function mn(){return H?H.getBuffer():null}function bn(Ct){Ct===W||Ct&&W&&Ct.type!==W.type||(W=Ct);var et=le.getRealAdaptation(Se,W),zt=le.getVoRepresentations(W);if(he){var Ve,tt=he.getData(),Lt=Pe.getMaxAllowedIndexFor(ke,Se.id),yn=Pe.getMinAllowedIndexFor(ke,Se.id),Cn=null;return tt!==null&&tt.id===et.id||ke===E.Z.TEXT?Ve=Pe.getQualityFor(ke,Se.id):(Cn=Pe.getThroughputHistory().getAverageThroughput(ke,V)||Pe.getInitialBitrateFor(ke,Se.id),Ve=Pe.getQualityForBitrate(W,Cn,Se.id)),yn!==void 0&&Ve<yn&&(Ve=yn),Ve>Lt&&(Ve=Lt),he.updateData(et,zt,ke,W.isFragmented,Ve)}return Promise.resolve()}function Zn(){return re}function Fn(Ct){var et;return Ct!==void 0?((0,ge.SE)(Ct),et=he?he.getRepresentationForQuality(Ct):null):et=he?he.getCurrentRepresentation():null,le.convertRepresentationToRepresentationInfo(et)}function qn(){return!!H&&H.getIsBufferingCompleted()}function Yn(Ct){if(De.get().streaming.enableManifestTimescaleMismatchFix){var et=Ct.chunk,zt=et.bytes,Ve=Fn(et.quality),tt=he&&Ve?he.getRepresentationForQuality(Ve.quality):null;Ve&&tt&&(tt.timescale=$e.getMediaTimescaleFromMoov(zt))}}function en(Ct){var et=Ct.chunk,zt=et.bytes,Ve=et.quality,tt=Fn(Ve),Lt=he&&tt?he.getRepresentationForQuality(tt.quality):null;if(tt&&Lt){var yn;if(De.get().streaming.parseInbandPrft&&Ct.request.type===st.w.MEDIA_SEGMENT_TYPE){var Cn=function(Lo,zi){var bs=Lo.getBoxes("prft"),ol=[];return bs.forEach(function(la){ol.push(function(ko,Cs){var To="unknown";switch(ko.flags){case 0:To=y.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:To=y.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:To=y.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var $a=1e3*ko.ntp_timestamp_sec+ko.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:To,ntpTimestamp:$a=Tt(Ze).getInstance().ntpToUTC($a),mediaTime:ko.media_time/Cs}}(la,zi))}),ol}(yn=yn||$e.parse(zt),Lt.timescale);Cn&&Cn.length&&We.trigger(_.Z.INBAND_PRFT,{data:Cn},{streamId:Se.id,mediaType:ke})}var yr=le.getEventsFor(tt.mediaInfo,null,Se),oi=le.getEventsFor(tt,Lt,Se);if(yr&&yr.length>0||oi&&oi.length>0){var gi=te.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,quality:Ve,index:et.index})[0],Xr=function(Lo,zi,bs,ol){try{for(var la={},ko=[],Cs=bs.concat(ol),To=0,$a=Cs.length;To<$a;To++)la[Cs[To].schemeIdUri+"/"+Cs[To].value]=Cs[To];var Cu=Lo.getBoxes("emsg");if(!Cu||Cu.length===0)return ko;for(var ca=Lo.getBox("sidx"),Zl=!ca||isNaN(ca.earliest_presentation_time)||isNaN(ca.timescale)?zi&&!isNaN(zi.mediaStartTime)?zi.mediaStartTime:0:ca.earliest_presentation_time/ca.timescale,Xf=Math.max(Zl,0),Ru=he.getCurrentRepresentation(),ji=0,xa=Cu.length;ji<xa;ji++){var Qs=le.getEvent(Cu[ji],la,Xf,Ru);Qs&&ko.push(Qs)}return ko}catch(xt){return[]}}(yn=yn||$e.parse(zt),gi,yr,oi);We.trigger(T.Z.INBAND_EVENTS,{events:Xr},{streamId:Se.id})}}}function Nn(){var Ct=xe.getTime();De.get().streaming.buffer.flushBufferAtTrackSwitch&&xe.seek(Ct+.001,!1,!0),Dn(Ct),H.setSeekTarget(Ct),re.startScheduleTimer()}function Pn(){var Ct=xe.getTime(),et=H.getContinuousBufferTimeForTargetTime(Ct);Dn(isNaN(et)?Ct:et),re.startScheduleTimer()}function On(Ct){Ct&&!isNaN(Ct.time)&&(Dn(Ct.time),H.setSeekTarget(Ct.time))}function Dn(Ct){ze=Ct,Ae=!0}return O={initialize:function(Ct,et,zt){ye=(0,ht.Z)(Ze).create({events:T.Z,eventBus:We,streamInfo:Se,timelineConverter:q,dashConstants:y.Z,segmentBaseController:k.segmentBaseController,type:ke}),_e=(0,de.Z)(Ze).create({streamInfo:Se,type:ke,timelineConverter:q,dashMetrics:ve,mediaPlayerModel:ue,baseURLController:k.baseURLController,errHandler:Ie,segmentsController:ye,settings:De,boxParser:$e,events:T.Z,eventBus:We,errors:we,debug:(0,M.Z)(Ze).getInstance(),requestModifier:(0,Ke.Z)(Ze).getInstance(),dashConstants:y.Z,constants:E.Z,urlUtils:(0,wt.Z)(Ze).getInstance()}),V=Se.manifestInfo.isDynamic,_e.initialize(V),Pe.registerStreamType(ke,O),he=K(Ze).create({streamInfo:Se,type:ke,abrController:Pe,dashMetrics:ve,playbackController:xe,timelineConverter:q,dashConstants:y.Z,events:T.Z,eventBus:We,errors:we,isDynamic:V,adapter:le,segmentsController:ye}),H=function(Ve,tt){return Ve?Ve!==E.Z.TEXT||tt?Et(Ze).create({streamInfo:Se,type:Ve,mediaPlayerModel:ue,manifestModel:ae,fragmentModel:te,errHandler:Ie,mediaController:je,representationController:he,adapter:le,textController:Me,abrController:Pe,playbackController:xe,settings:De}):ne(Ze).create({streamInfo:Se,type:Ve,mimeType:Ge,fragmentModel:te,textController:Me,errHandler:Ie,settings:De}):(Ie.error(new ce.Z(we.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,we.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(ke,zt),H&&H.initialize(Ct),(re=L(Ze).create({streamInfo:Se,type:ke,mimeType:Ge,adapter:le,dashMetrics:ve,mediaPlayerModel:ue,fragmentModel:te,abrController:Pe,playbackController:xe,textController:Me,mediaController:je,bufferController:H,representationController:he,settings:De})).initialize(et),ze=0,Ae=!1,Te=!1},getStreamId:ct,getType:yt,isUpdating:function(){return!!he&&he.isUpdating()},getBufferController:function(){return H},dischargePreBuffer:function(){H.dischargePreBuffer()},getFragmentModel:function(){return te},getScheduleController:Zn,getRepresentationController:function(){return he},getRepresentationInfo:Fn,getBufferLevel:function(){return H?H.getBufferLevel():0},isBufferingCompleted:qn,createBufferSinks:function(Ct){var et=mn();return et?Promise.resolve(et):H?H.createBufferSink(W,Ct):Promise.resolve(null)},updateStreamInfo:function(Ct){return Se=Ct,qn()?Promise.resolve():H.updateAppendWindow()},getStreamInfo:function(){return Se},selectMediaInfo:bn,clearMediaInfoArray:function(){ee=[]},addMediaInfo:function(Ct){ee.indexOf(Ct)===-1&&ee.push(Ct)},prepareTrackSwitch:function(){return new Promise(function(Ct){j.debug("Preparing track switch for type ".concat(ke));var et=ke===E.Z.TEXT||De.get().streaming.trackSwitchMode[ke]===E.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&xe.getTimeToStreamEnd(Se)>De.get().streaming.buffer.stallThreshold;if(H.getIsBufferingCompleted()&&!et)return H.prepareForNonReplacementTrackSwitch(W.codec).then(function(){We.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:Se.id,mediaType:ke})}).catch(function(){We.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:Se.id,mediaType:ke})}),void Ct();re.clearScheduleTimer(),re.setSwitchTrack(!0),et?(We.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ke,streamId:Se.id},{mediaType:ke,streamId:Se.id}),te.abortRequests(),H.prepareForReplacementTrackSwitch(W.codec).then(function(){var zt=Fn();return H.updateBufferTimestampOffset(zt)}).then(function(){Nn(),Ct()}).catch(function(){Nn(),Ct()})):H.prepareForNonReplacementTrackSwitch(W.codec).then(function(){Pn(),Ct()}).catch(function(){Pn(),Ct()})})},prepareQualityChange:function(Ct){Oe&&j.warn("Canceling queued representation switch to ".concat(Oe.quality," for ").concat(ke)),j.debug("Preparing quality switch for type ".concat(ke));var et=Ct.newQuality;ie=!0,re.clearScheduleTimer(),he.prepareQualityChange(et);var zt=Fn(et);Ct.reason&&Ct.reason.forceReplace?function(Ve){te.abortRequests(),We.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ke,streamId:Se.id},{mediaType:ke,streamId:Se.id}),re.setCheckPlaybackQuality(!1),H.prepareForForceReplacementQualitySwitch(Ve).then(function(){Nn(),Oe=null,ie=!1}).catch(function(){Nn(),Oe=null,ie=!1})}(zt):Ct&&Ct.reason&&Ct.reason.forceAbandon?function(Ve){H.updateBufferTimestampOffset(Ve).then(function(){te.abortRequests(),Te=!0,re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1,Oe=null}).catch(function(){Oe=null,ie=!1})}(zt):De.get().streaming.buffer.fastSwitchEnabled?function(Ve){var tt=xe.getTime(),Lt=1.5*(isNaN(Ve.fragmentDuration)?1:Ve.fragmentDuration),yn=te.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:tt+Lt,threshold:0})[0];if(yn&&!pt()){var Cn=H.getBufferLevel(),yr=Pe.getAbandonmentStateFor(Se.id,ke);yn.quality<Ve.quality&&Cn>=Lt&&yr!==P.Z.ABANDON_LOAD?H.updateBufferTimestampOffset(Ve).then(function(){te.abortRequests(),Dn(tt+Lt),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1}).catch(function(){ie=!1}):kn(Ve)}else kn(Ve)}(zt):kn(zt),ve.pushPlayListTraceMetrics(new Date,nt.REPRESENTATION_SWITCH_STOP_REASON),ve.createPlaylistTraceMetrics(zt.id,1e3*xe.getTime(),xe.getPlaybackRate())},getMediaInfo:function(){return W},getMediaSource:function(){return H.getMediaSource()},setMediaSource:function(Ct){return H.setMediaSource(Ct,W)},getBuffer:mn,setExplicitBufferingTime:Dn,finalisePlayList:function(Ct,et){ve.pushPlayListTraceMetrics(Ct,et)},probeNextRequest:function(){var Ct=Fn(),et=he&&Ct?he.getRepresentationForQuality(Ct.quality):null;return _e.getNextSegmentRequestIdempotent(W,et)},prepareInnerPeriodPlaybackSeeking:function(Ct){return new Promise(function(et){if(H.hasBufferAtTime(Ct.seekTime))return H.pruneBuffer(),Vt(H.getContinuousBufferTimeForTargetTime(Ct.seekTime))&&H.setIsBufferingCompleted(!0),void et();re.clearScheduleTimer(),te.abortRequests(),H.prepareForPlaybackSeek().then(function(){var zt=H.getAllRangesWithSafetyFactor(Ct.seekTime);return H.clearBuffers(zt)}).then(function(){var zt=H.getContinuousBufferTimeForTargetTime(Ct.seekTime);if(Vt(zt))H.setIsBufferingCompleted(!0),et();else{var Ve=isNaN(zt)?Ct.seekTime:zt;Dn(Ve),H.setSeekTarget(Ve);var tt=[];tt.push(H.updateAppendWindow());var Lt=Fn();tt.push(H.updateBufferTimestampOffset(Lt)),Promise.all(tt).then(function(){re.setInitSegmentRequired(!0),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),et()})}}).catch(function(zt){j.error(zt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(Ct,et){try{re.clearScheduleTimer(),te.abortRequests(),H.prepareForPlaybackSeek().then(function(){return H.pruneAllSafely()}).then(function(){Ct()})}catch(zt){et(zt)}})},reset:function(Ct,et){_e&&_e.reset(),H&&(H.reset(Ct,et),H=null),re&&(re.reset(),re=null),he&&(he.reset(),he=null),ye&&(ye=null),Pe&&Pe.unRegisterStreamType(ct(),ke),We.off(T.Z.DATA_UPDATE_COMPLETED,Pt,O),We.off(T.Z.INIT_FRAGMENT_NEEDED,jt,O),We.off(T.Z.MEDIA_FRAGMENT_NEEDED,Zt,O),We.off(T.Z.INIT_FRAGMENT_LOADED,Yn,O),We.off(T.Z.MEDIA_FRAGMENT_LOADED,en,O),We.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,un,O),We.off(T.Z.BUFFER_CLEARED,an,O),We.off(T.Z.SEEK_TARGET,On,O),We.off(T.Z.FRAGMENT_LOADING_ABANDONED,mr,O),We.off(T.Z.FRAGMENT_LOADING_COMPLETED,vr,O),We.off(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,bt,O),We.off(T.Z.SET_NON_FRAGMENTED_TEXT,tn,O),We.off(T.Z.QUOTA_EXCEEDED,qt,O),We.off(T.Z.SOURCE_BUFFER_ERROR,Jt,O),We.off(T.Z.BYTES_APPENDED_END_FRAGMENT,Bn,O),Gt(),ke=null,Se=null}},j=(0,M.Z)(Ze).getInstance().getLogger(O),Gt(),We.on(T.Z.DATA_UPDATE_COMPLETED,Pt,O,{priority:m.Z.EVENT_PRIORITY_HIGH}),We.on(T.Z.INIT_FRAGMENT_NEEDED,jt,O),We.on(T.Z.MEDIA_FRAGMENT_NEEDED,Zt,O),We.on(T.Z.INIT_FRAGMENT_LOADED,Yn,O),We.on(T.Z.MEDIA_FRAGMENT_LOADED,en,O),We.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,un,O),We.on(T.Z.BUFFER_CLEARED,an,O),We.on(T.Z.SEEK_TARGET,On,O),We.on(T.Z.FRAGMENT_LOADING_ABANDONED,mr,O),We.on(T.Z.FRAGMENT_LOADING_COMPLETED,vr,O),We.on(T.Z.QUOTA_EXCEEDED,qt,O),We.on(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,bt,O),We.on(T.Z.SET_NON_FRAGMENTED_TEXT,tn,O),We.on(T.Z.SOURCE_BUFFER_ERROR,Jt,O),We.on(T.Z.BYTES_APPENDED_END_FRAGMENT,Bn,O),O}Mt.__dashjs_factory_name="StreamProcessor";var _n=U.Z.getClassFactory(Mt),rn=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},cn=w(9032);function Ft(k,O){if(k){if(typeof k=="string")return Gn(k,O);var j=Object.prototype.toString.call(k).slice(8,-1);return j==="Object"&&k.constructor&&(j=k.constructor.name),j==="Map"||j==="Set"?Array.from(k):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?Gn(k,O):void 0}}function Gn(k,O){(O==null||O>k.length)&&(O=k.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=k[j];return V}function Sr(k){k=k||{};var O,j,V=this.context,W=k.requestModifier,ee=k.lowLatencyThroughputModel,H=k.boxParser,re=(0,qe.Z)(V).getInstance();function he(ie){var _e,ye=new Date,ze=ie.request,Oe=new Headers;if(ze.range&&Oe.append("Range","bytes="+ze.range),ie.headers)for(var Ze in ie.headers){var We=ie.headers[Ze];We&&Oe.append(Ze,We)}ze.requestStartDate||(ze.requestStartDate=ye),W&&W.modifyRequestHeader&&W.modifyRequestHeader({setRequestHeader:function(q,le){Oe.append(q,le)}},{url:ie.url}),typeof window.AbortController=="function"&&(_e=new AbortController,ie.abortController=_e,_e.signal.onabort=ie.onabort);var Se={method:ie.method,headers:Oe,credentials:ie.withCredentials?"include":void 0,signal:_e?_e.signal:void 0},ke=re.get().streaming.abr.fetchThroughputCalculationMode,Ie=Date.now(),Ge=0;new Promise(function(q){if(ke===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&ee&&(Ge=ee.getThroughputCapacityDelayMS(ze,1e3*j.getCurrentBufferLevel(ze.mediaType))))return setTimeout(q,Ge);q()}).then(function(){var q=Date.now();fetch(ie.url,Se).then(function(le){ie.response||(ie.response={}),ie.response.status=le.status,ie.response.statusText=le.statusText,ie.response.responseURL=le.url,le.ok||ie.onerror();var ae,ue="",te=function(Pt,un){var an;if(typeof Symbol>"u"||Pt[Symbol.iterator]==null){if(Array.isArray(Pt)||(an=Ft(Pt))){an&&(Pt=an);var Jt=0,Bn=function(){};return{s:Bn,n:function(){return Jt>=Pt.length?{done:!0}:{done:!1,value:Pt[Jt++]}},e:function(bt){throw bt},f:Bn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var kn,mr=!0,vr=!1;return{s:function(){an=Pt[Symbol.iterator]()},n:function(){var bt=an.next();return mr=bt.done,bt},e:function(bt){vr=!0,kn=bt},f:function(){try{mr||an.return==null||an.return()}finally{if(vr)throw kn}}}}(le.headers.keys());try{for(te.s();!(ae=te.n()).done;){var Pe=ae.value;ue+=Pe+": "+le.headers.get(Pe)+"\r\n"}}catch(Pt){te.e(Pt)}finally{te.f()}if(ie.response.responseHeaders=ue,!le.body)return le.arrayBuffer().then(function(Pt){ie.response.response=Pt;var un={loaded:Pt.byteLength,total:Pt.byteLength,stream:!1};ie.progress(un),ie.onload(),ie.onend()});var xe,je,Me,ve,De=parseInt(le.headers.get("Content-Length"),10),$e=0,mt=!1,ct=new Uint8Array,yt=0;if(ke===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&ee){var pt=q,Gt=0,Vt=(Me=le.body.tee(),ve=2,function(Pt){if(Array.isArray(Pt))return Pt}(Me)||function(Pt,un){if(typeof Symbol<"u"&&Symbol.iterator in Object(Pt)){var an=[],Jt=!0,Bn=!1,kn=void 0;try{for(var mr,vr=Pt[Symbol.iterator]();!(Jt=(mr=vr.next()).done)&&(an.push(mr.value),!un||an.length!==un);Jt=!0);}catch(bt){Bn=!0,kn=bt}finally{try{Jt||vr.return==null||vr.return()}finally{if(Bn)throw kn}}return an}}(Me,ve)||Ft(Me,ve)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),jt=Vt[0],Zt=Vt[1];xe=jt.getReader(),je=[],xe.read().then(function Pt(un){var an=un.value,Jt=un.done;if(Gt=Date.now(),an&&an.length){var Bn=Gt-pt,kn=an.length;je.push({chunkDownloadTimeRelativeMS:Gt-q,chunkDownloadDurationMS:Bn,chunkBytes:kn,kbps:Math.round(8*kn/(Bn/1e3)),bufferLevel:j.getCurrentBufferLevel(ze.mediaType)})}if(Jt){var mr=Gt-q,vr=je.reduce(function(bt,tn){return bt+tn.chunkBytes},0);return ee.addMeasurement(ze,mr,je,Ie,Ge,ue),void ie.progress({loaded:vr,total:vr,lengthComputable:!0,time:ee.getEstimatedDownloadDurationMS(ze),stream:!0})}return pt=Date.now(),xe.read().then(Pt)}),ie.reader=Zt.getReader()}else ie.reader=le.body.getReader();var xn=[],at=[],St=[],Qt=!0;Ae(ie,function Pt(un){var an=un.value;if(un.done){if(ct){if(ke!==E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Jt=null,Bn=null;ke===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Jt=function(bt,tn){try{var qt,mn;qt=bt.filter(function(Nn,Pn){return Pn<bt.length-1}),mn=tn.filter(function(Nn,Pn){return Pn<tn.length-1});var bn=[];if(qt.length>1){for(var Zn=0,Fn=0,qn=0;qn<qt.length;qn++)if(qt[qn]&&mn[qn]){var Yn=mn[qn].ts-qt[qn].ts;if(Yn>1)bn.push(8*mn[qn].bytes/Yn),Fn=0;else{Fn===0&&(Fn=qt[qn].ts,Zn=0);var en=mn[qn].ts-Fn;en>1?(Zn+=mn[qn].bytes,bn.push(8*Zn/en),Fn=0):Zn+=mn[qn].bytes}}if(bn.length>0)return bn.reduce(function(Nn,Pn){return Nn+Pn},0)/bn.length}return null}catch(Nn){return null}}(at,St),Jt&&(Bn=8*$e/Jt)):ke===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Bn=Te(xn,$e)),ie.progress({loaded:$e,total:isNaN(De)?$e:De,lengthComputable:!0,time:Bn,stream:!0})}ie.response.response=ct.buffer}return ie.onload(),void ie.onend()}if(an&&an.length>0){ct=function(bt,tn){if(bt.length===0)return tn;var qt=new Uint8Array(bt.length+tn.length);return qt.set(bt),qt.set(tn,bt.length),qt}(ct,an),$e+=an.length,xn.push({ts:Date.now(),bytes:an.length}),ke===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&Qt&&H.findLastTopIsoBoxCompleted(["moof"],ct,yt).found&&(Qt=!1,at.push({ts:performance.now(),bytes:an.length}));var kn=H.findLastTopIsoBoxCompleted(["moov","mdat"],ct,yt);if(kn.found){var mr,vr=kn.lastCompletedOffset+kn.size;ke!==E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||Qt||(Qt=!0,St.push({ts:performance.now(),bytes:ct.length})),vr===ct.length?(mr=ct,ct=new Uint8Array):(mr=new Uint8Array(ct.subarray(0,vr)),ct=ct.subarray(vr)),ie.progress({data:mr.buffer,lengthComputable:!1,noTrace:!0}),yt=0}else yt=kn.lastCompletedOffset,mt||(ie.progress({lengthComputable:!1,noTrace:!0}),mt=!0)}Ae(ie,Pt)})}).catch(function(le){ie.onerror&&ie.onerror(le)})})}function Ae(ie,_e){ie.reader.read().then(_e).catch(function(ye){ie.onerror&&ie.response.status===200&&ie.onerror(ye)})}function Te(ie,_e){try{if((ie=ie.filter(function(Oe){return Oe.bytes>_e/4/ie.length})).length>1){var ye=0,ze=(ie[ie.length-1].ts-ie[0].ts)/ie.length;return ie.forEach(function(Oe,Ze){var We=ie[Ze+1];if(We){var Se=We.ts-Oe.ts;ye+=Se<ze?Se:0}}),ye}return null}catch(Oe){return null}}return O={load:function(ie){W&&W.modifyRequest?(0,Ke.k)(ie,W).then(function(){return he(ie)}):he(ie)},abort:function(ie){if(ie.abortController)ie.abortController.abort();else if(ie.reader)try{ie.reader.cancel(),ie.onabort()}catch(_e){}},calculateDownloadedTime:Te,setup:function(ie){j=ie.dashMetrics}},O}Sr.__dashjs_factory_name="FetchLoader";var Gr=U.Z.getClassFactory(Sr),gr=w(1180);function fi(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var ao=function(){function k(){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,k),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var O,j;return O=k,(j=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==y.Z.BASE_URL&&this.segmentInfoType!==y.Z.SEGMENT_BASE&&!this.indexRange}}])&&fi(O.prototype,j),k}(),Hr=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.period=null,this.index=-1,this.type=null},so=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};so.DEFAULT_ID="defaultId";var xi=so,Fi=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},no=w(2610),uo=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},Ni=function k(O,j,V,W){(function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")})(this,k),this.url=O||"",this.serviceLocation=j||O||"",this.dvbPriority=V||1,this.dvbWeight=W||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};Ni.DEFAULT_DVB_PRIORITY=1,Ni.DEFAULT_DVB_WEIGHT=1;var nr=Ni,ju=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},ln=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},gn=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function pn(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var At=function(){function k(){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,k),this.schemeIdUri=null,this.value=null,this.id=null}var O,j;return O=k,(j=[{key:"init",value:function(V){return V&&(this.schemeIdUri=V.schemeIdUri?V.schemeIdUri:null,this.value=V.value?V.value:null,this.id=V.id?V.id:null,V[y.Z.DVB_URL]&&(this.dvbUrl=V[y.Z.DVB_URL]),V[y.Z.DVB_MIMETYPE]&&(this.dvbMimeType=V[y.Z.DVB_MIMETYPE]),V[y.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=V[y.Z.DVB_FONTFAMILY])),this}}])&&pn(O.prototype,j),k}(),Xt=w(3101),Ot=w.n(Xt);function Yt(){return{areEqual:function(k,O){return Ot()(k,O)}}}Yt.__dashjs_factory_name="ObjectUtils";var wn=U.Z.getSingletonFactory(Yt),Mn=w(7803),zn=function k(O,j){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,k),this.url=O||"",this.serviceLocation=j||null,this.queryParams={}},Kn=function k(O,j,V){(function(W,ee){if(!(W instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,k),this.url=O||"",this.serviceLocation=j||null,this.ttl=V||NaN,this.queryParams={}};function Ln(k,O){var j=Object.keys(k);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(k);O&&(V=V.filter(function(W){return Object.getOwnPropertyDescriptor(k,W).enumerable})),j.push.apply(j,V)}return j}function fn(k){for(var O=1;O<arguments.length;O++){var j=arguments[O]!=null?arguments[O]:{};O%2?Ln(Object(j),!0).forEach(function(V){Xe(k,V,j[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(j)):Ln(Object(j)).forEach(function(V){Object.defineProperty(k,V,Object.getOwnPropertyDescriptor(j,V))})}return k}function Xe(k,O,j){return O in k?Object.defineProperty(k,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):k[O]=j,k}function Un(k,O){var j;if(typeof Symbol>"u"||k[Symbol.iterator]==null){if(Array.isArray(k)||(j=fr(k))||O){j&&(k=j);var V=0,W=function(){};return{s:W,n:function(){return V>=k.length?{done:!0}:{done:!1,value:k[V++]}},e:function(he){throw he},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ee,H=!0,re=!1;return{s:function(){j=k[Symbol.iterator]()},n:function(){var he=j.next();return H=he.done,he},e:function(he){re=!0,ee=he},f:function(){try{H||j.return==null||j.return()}finally{if(re)throw ee}}}}function fr(k,O){if(k){if(typeof k=="string")return Ir(k,O);var j=Object.prototype.toString.call(k).slice(8,-1);return j==="Object"&&k.constructor&&(j=k.constructor.name),j==="Map"||j==="Set"?Array.from(k):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?Ir(k,O):void 0}}function Ir(k,O){(O==null||O>k.length)&&(O=k.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=k[j];return V}function Vr(){var k,O,j,V,W=this.context,ee=(0,wt.Z)(W).getInstance(),H=Number.isInteger||function(q){return typeof q=="number"&&isFinite(q)&&Math.floor(q)===q};function re(q,le){if(!q)throw new Error("adaptation is not defined");if(!le)throw new Error("type is not defined");if(q.Representation_asArray&&q.Representation_asArray.length){var ae=Ze(q.Representation_asArray[0]);if(ae&&ae.length>0&&Mn.Y.indexOf(ae[0].schemeIdUri)>=0)return le===E.Z.IMAGE}if(q.ContentComponent_asArray&&q.ContentComponent_asArray.length>0){if(q.ContentComponent_asArray.length>1)return le===E.Z.MUXED;if(q.ContentComponent_asArray[0].contentType===le)return!0}var ue=le===E.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(le);if(q.Representation_asArray&&q.Representation_asArray.length){var te=q.Representation_asArray[0].codecs;if(ue.test(te))return!0}if(q.hasOwnProperty(y.Z.MIME_TYPE))return ue.test(q.mimeType);if(q.Representation_asArray){for(var Pe,xe=0;xe<q.Representation_asArray.length;xe++)if((Pe=q.Representation_asArray[xe]).hasOwnProperty(y.Z.MIME_TYPE))return ue.test(Pe.mimeType)}return!1}function he(q){if(!q)throw new Error("adaptation is not defined");if(q.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)||q.hasOwnProperty(y.Z.SEGMENT_TIMELINE)||q.hasOwnProperty(y.Z.SEGMENT_LIST)||q.hasOwnProperty(y.Z.SEGMENT_BASE))return!0;if(q.Representation_asArray&&q.Representation_asArray.length>0){var le=q.Representation_asArray[0];if(le.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)||le.hasOwnProperty(y.Z.SEGMENT_TIMELINE)||le.hasOwnProperty(y.Z.SEGMENT_LIST)||le.hasOwnProperty(y.Z.SEGMENT_BASE))return!0}return!1}function Ae(q){return re(q,E.Z.VIDEO)}function Te(q){return re(q,E.Z.TEXT)}function ie(q){return re(q,E.Z.IMAGE)}function _e(q){return q&&Array.isArray(q.Representation_asArray)&&q.Representation_asArray.sort(function(le,ae){return le.bandwidth-ae.bandwidth}),q}function ye(q,le){return q&&q.Period_asArray&&H(le)&&q.Period_asArray[le]?q.Period_asArray[le].AdaptationSet_asArray:[]}function ze(q){return q&&q.Period_asArray?q.Period_asArray:[]}function Oe(q){var le=!1;return q&&q.hasOwnProperty("type")&&(le=q.type===y.Z.DYNAMIC),le}function Ze(q){return q&&q.EssentialProperty_asArray&&q.EssentialProperty_asArray.length?q.EssentialProperty_asArray.map(function(le){return{schemeIdUri:le.schemeIdUri,value:le.value}}):null}function We(q){if(!q||!q.S_asArray)return NaN;var le=q.S_asArray[0],ae=q.S_asArray[1];return le.hasOwnProperty("d")?le.d:ae.t-le.t}function Se(q,le){if(!q)throw new Error("Period cannot be null or undefined");var ae=xi.DEFAULT_ID+"_"+le;return q.hasOwnProperty(y.Z.ID)&&q.id.length>0&&q.id!=="__proto__"&&(ae=q.id),ae}function ke(q,le,ae){var ue,te=[];if(!q)return te;for(ue=0;ue<q.length;ue++){var Pe=new ju;if(Pe.timescale=1,Pe.representation=le,!q[ue].hasOwnProperty(E.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Pe.schemeIdUri=q[ue].schemeIdUri,q[ue].hasOwnProperty(y.Z.TIMESCALE)&&(Pe.timescale=q[ue].timescale),q[ue].hasOwnProperty(y.Z.VALUE)&&(Pe.value=q[ue].value),te.push(Pe),Pe.period=ae}return te}function Ie(q){var le=[],ae=q.BaseURL_asArray||[q.baseUri],ue=!1;return ae.some(function(te){if(te){var Pe=new nr,xe=te.__text||te;return ee.isRelative(xe)&&(ue=!0,q.baseUri&&(xe=ee.resolve(xe,q.baseUri))),Pe.url=xe,te.hasOwnProperty(y.Z.SERVICE_LOCATION)&&te.serviceLocation.length?Pe.serviceLocation=te.serviceLocation:Pe.serviceLocation=xe,te.hasOwnProperty(y.Z.DVB_PRIORITY)&&(Pe.dvbPriority=te[y.Z.DVB_PRIORITY]),te.hasOwnProperty(y.Z.DVB_WEIGHT)&&(Pe.dvbWeight=te[y.Z.DVB_WEIGHT]),te.hasOwnProperty(y.Z.AVAILABILITY_TIME_OFFSET)&&(Pe.availabilityTimeOffset=te[y.Z.AVAILABILITY_TIME_OFFSET]),te.hasOwnProperty(y.Z.AVAILABILITY_TIME_COMPLETE)&&(Pe.availabilityTimeComplete=te[y.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),le.push(Pe),ue}}),le}function Ge(q){var le=new gn;return le.serverUrl=q.__text,q.hasOwnProperty(y.Z.DEFAULT_SERVICE_LOCATION)&&(le.defaultServiceLocation=q[y.Z.DEFAULT_SERVICE_LOCATION],le.defaultServiceLocationArray=le.defaultServiceLocation.split(" ")),q.hasOwnProperty(y.Z.QUERY_BEFORE_START)&&(le.queryBeforeStart=q[y.Z.QUERY_BEFORE_START].toLowerCase()==="true"),q.hasOwnProperty(y.Z.CLIENT_REQUIREMENT)&&(le.clientRequirement=q[y.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),le}return k={getIsTypeOf:re,getIsText:Te,getIsFragmented:he,getProducerReferenceTimesForAdaptation:function(q){var le=q&&q.hasOwnProperty(y.Z.PRODUCERREFERENCETIME_ASARRAY)?q[y.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(q&&q.hasOwnProperty(y.Z.REPRESENTATION_ASARRAY)?q[y.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(ue){var te;ue.hasOwnProperty(y.Z.PRODUCERREFERENCETIME_ASARRAY)&&le.push.apply(le,function(Pe){if(Array.isArray(Pe))return Ir(Pe)}(te=ue[y.Z.PRODUCERREFERENCETIME_ASARRAY])||function(Pe){if(typeof Symbol<"u"&&Symbol.iterator in Object(Pe))return Array.from(Pe)}(te)||fr(te)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var ae=[];return le.forEach(function(ue){var te=new ln;ue.hasOwnProperty(y.Z.ID)&&(te[y.Z.ID]=ue[y.Z.ID],ue.hasOwnProperty(y.Z.WALL_CLOCK_TIME)&&(te[y.Z.WALL_CLOCK_TIME]=ue[y.Z.WALL_CLOCK_TIME],ue.hasOwnProperty(y.Z.PRESENTATION_TIME)&&(te[y.Z.PRESENTATION_TIME]=ue[y.Z.PRESENTATION_TIME],ue.hasOwnProperty(y.Z.INBAND)&&(te[y.Z.INBAND]=ue[y.Z.INBAND]!=="false"),ue.hasOwnProperty(y.Z.TYPE)&&(te[y.Z.TYPE]=ue[y.Z.TYPE]),ae.push(te))))}),ae},getLanguageForAdaptation:function(q){var le="";return q&&q.hasOwnProperty(y.Z.LANG)&&(le=q.lang),le},getViewpointForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.VIEWPOINT_ASARRAY)&&q[y.Z.VIEWPOINT_ASARRAY].length?q[y.Z.VIEWPOINT_ASARRAY].map(function(le){return new At().init(le)}):[]},getRolesForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.ROLE_ASARRAY)&&q[y.Z.ROLE_ASARRAY].length?q[y.Z.ROLE_ASARRAY].map(function(le){return new At().init(le)}):[]},getAccessibilityForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.ACCESSIBILITY_ASARRAY)&&q[y.Z.ACCESSIBILITY_ASARRAY].length?q[y.Z.ACCESSIBILITY_ASARRAY].map(function(le){return new At().init(le)}):[]},getAudioChannelConfigurationForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&q[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?q[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new At().init(le)}):[]},getAudioChannelConfigurationForRepresentation:function(q){return q&&q.hasOwnProperty(y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&q[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?q[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new At().init(le)}):[]},getAdaptationForIndex:function(q,le,ae){var ue=ye(le,ae);return ue.length>0&&H(q)?ue[q]:null},getIndexForAdaptation:function(q,le,ae){if(!q)return-1;for(var ue=ye(le,ae),te=0;te<ue.length;te++)if(wn(W).getInstance().areEqual(ue[te],q))return te;return-1},getAdaptationForId:function(q,le,ae){var ue,te,Pe=ye(le,ae);for(ue=0,te=Pe.length;ue<te;ue++)if(Pe[ue].hasOwnProperty(y.Z.ID)&&Pe[ue].id===q)return Pe[ue];return null},getAdaptationsForType:function(q,le,ae){var ue,te,Pe=ye(q,le),xe=[];for(ue=0,te=Pe.length;ue<te;ue++)re(Pe[ue],ae)&&xe.push(_e(Pe[ue]));return xe},getRealPeriods:ze,getRealPeriodForIndex:function(q,le){var ae=ze(le);return ae.length>0&&H(q)?ae[q]:null},getCodec:function(q,le,ae){var ue=null;if(q&&q.Representation_asArray&&q.Representation_asArray.length>0){var te=H(le)&&le>=0&&le<q.Representation_asArray.length?q.Representation_asArray[le]:q.Representation_asArray[0];te&&(ue=te.mimeType+';codecs="'+te.codecs+'"',ae&&te.width!==void 0&&(ue+=';width="'+te.width+'";height="'+te.height+'"'))}return ue&&(ue=ue.replace(/\sprofiles=[^;]*/g,"")),ue},getSelectionPriority:function(q){try{var le=q&&q.selectionPriority!==void 0?parseInt(q.selectionPriority):1;return isNaN(le)?1:le}catch(ae){return 1}},getMimeType:function(q){return q&&q.Representation_asArray&&q.Representation_asArray.length>0?q.Representation_asArray[0].mimeType:null},getKID:function(q){return q&&q.hasOwnProperty(y.Z.CENC_DEFAULT_KID)?q[y.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(q){if(!q||!Array.isArray(q.Label_asArray))return[];for(var le=[],ae=0;ae<q.Label_asArray.length;ae++)le.push({lang:q.Label_asArray[ae].lang,text:q.Label_asArray[ae].__text||q.Label_asArray[ae]});return le},getContentProtectionData:function(q){return q&&q.hasOwnProperty(y.Z.CONTENTPROTECTION_ASARRAY)&&q.ContentProtection_asArray.length!==0?q.ContentProtection_asArray:null},getIsDynamic:Oe,getId:function(q){return q&&q[y.Z.ID]||null},hasProfile:function(q,le){var ae=!1;return q&&q.profiles&&q.profiles.length>0&&(ae=q.profiles.indexOf(le)!==-1),ae},getDuration:function(q){return q&&q.hasOwnProperty(y.Z.MEDIA_PRESENTATION_DURATION)?q.mediaPresentationDuration:q&&q.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(q){return q&&q.bandwidth?q.bandwidth:NaN},getManifestUpdatePeriod:function(q){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ae=NaN;return q&&q.hasOwnProperty(y.Z.MINIMUM_UPDATE_PERIOD)&&(ae=q.minimumUpdatePeriod),isNaN(ae)?ae:Math.max(ae-le,1)},getPublishTime:function(q){return q&&q.hasOwnProperty(y.Z.PUBLISH_TIME)?new Date(q[y.Z.PUBLISH_TIME]):null},getRepresentationCount:function(q){return q&&Array.isArray(q.Representation_asArray)?q.Representation_asArray.length:0},getBitrateListForAdaptation:function(q){var le=_e(q);return(le&&Array.isArray(le.Representation_asArray)?le.Representation_asArray:[]).map(function(ae){return{bandwidth:ae.bandwidth,width:ae.width||0,height:ae.height||0,scanType:ae.scanType||null,id:ae.id||null}})},getRepresentationFor:function(q,le){return le&&le.Representation_asArray&&le.Representation_asArray.length>0&&H(q)?le.Representation_asArray[q]:null},getRepresentationsForAdaptation:function(q){var le,ae,ue,te,Pe=[],xe=function(ct){if(ct&&ct.period&&H(ct.period.index)){var yt=ct.period.mpd.manifest.Period_asArray[ct.period.index];if(yt&&yt.AdaptationSet_asArray&&H(ct.index))return _e(yt.AdaptationSet_asArray[ct.index])}}(q);if(xe&&xe.Representation_asArray){if(q&&q.period&&H(q.period.index)){var je=Ie(q.period.mpd.manifest);je&&(ae=je[0])}for(var Me=0,ve=xe.Representation_asArray.length;Me<ve;++Me){var De=xe.Representation_asArray[Me],$e=new ao;if($e.index=Me,$e.adaptation=q,De.hasOwnProperty(y.Z.ID)&&($e.id=De.id),De.hasOwnProperty(y.Z.CODECS)&&($e.codecs=De.codecs),De.hasOwnProperty(y.Z.MIME_TYPE)&&($e.mimeType=De[y.Z.MIME_TYPE]),De.hasOwnProperty(y.Z.CODEC_PRIVATE_DATA)&&($e.codecPrivateData=De.codecPrivateData),De.hasOwnProperty(y.Z.BANDWITH)&&($e.bandwidth=De.bandwidth),De.hasOwnProperty(y.Z.WIDTH)&&($e.width=De.width),De.hasOwnProperty(y.Z.HEIGHT)&&($e.height=De.height),De.hasOwnProperty(y.Z.SCAN_TYPE)&&($e.scanType=De.scanType),De.hasOwnProperty(y.Z.MAX_PLAYOUT_RATE)&&($e.maxPlayoutRate=De.maxPlayoutRate),De.hasOwnProperty(y.Z.SEGMENT_BASE)?(le=De.SegmentBase,$e.segmentInfoType=y.Z.SEGMENT_BASE):De.hasOwnProperty(y.Z.SEGMENT_LIST)?(le=De.SegmentList).hasOwnProperty(y.Z.SEGMENT_TIMELINE)?$e.segmentInfoType=y.Z.SEGMENT_TIMELINE:$e.segmentInfoType=y.Z.SEGMENT_LIST:De.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)?((le=De.SegmentTemplate).hasOwnProperty(y.Z.SEGMENT_TIMELINE)?$e.segmentInfoType=y.Z.SEGMENT_TIMELINE:$e.segmentInfoType=y.Z.SEGMENT_TEMPLATE,le.hasOwnProperty(y.Z.INITIALIZATION_MINUS)&&($e.initialization=le.initialization.split("$Bandwidth$").join(De.bandwidth).split("$RepresentationID$").join(De.id))):$e.segmentInfoType=y.Z.BASE_URL,$e.essentialProperties=Ze(De),le){if(le.hasOwnProperty(y.Z.INITIALIZATION)){var mt=le.Initialization;mt.hasOwnProperty(y.Z.SOURCE_URL)&&($e.initialization=mt.sourceURL),mt.hasOwnProperty(y.Z.RANGE)&&($e.range=mt.range)}else Te(xe)&&he(xe)&&xe.mimeType&&xe.mimeType.indexOf("application/mp4")===-1&&($e.range=0);le.hasOwnProperty(y.Z.TIMESCALE)&&($e.timescale=le.timescale),le.hasOwnProperty(y.Z.DURATION)?$e.segmentDuration=le.duration/$e.timescale:De.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)&&(le=De.SegmentTemplate).hasOwnProperty(y.Z.SEGMENT_TIMELINE)&&($e.segmentDuration=We(le.SegmentTimeline)/$e.timescale),le.hasOwnProperty(y.Z.MEDIA)&&($e.media=le.media),le.hasOwnProperty(y.Z.START_NUMBER)&&($e.startNumber=le.startNumber),le.hasOwnProperty(y.Z.INDEX_RANGE)&&($e.indexRange=le.indexRange),le.hasOwnProperty(y.Z.PRESENTATION_TIME_OFFSET)&&($e.presentationTimeOffset=le.presentationTimeOffset/$e.timescale),le.hasOwnProperty(y.Z.AVAILABILITY_TIME_OFFSET)?$e.availabilityTimeOffset=le.availabilityTimeOffset:ae&&ae.availabilityTimeOffset!==void 0&&($e.availabilityTimeOffset=ae.availabilityTimeOffset),le.hasOwnProperty(y.Z.AVAILABILITY_TIME_COMPLETE)?$e.availabilityTimeComplete=le.availabilityTimeComplete!=="false":ae&&ae.availabilityTimeComplete!==void 0&&($e.availabilityTimeComplete=ae.availabilityTimeComplete)}$e.MSETimeOffset=(te=(ue=$e).presentationTimeOffset,ue.adaptation.period.start-te),$e.path=[q.period.index,q.index,Me],Pe.push($e)}}return Pe},getAdaptationsForPeriod:function(q){var le,ae,ue,te=q&&H(q.index)?q.mpd.manifest.Period_asArray[q.index]:null,Pe=[];if(te&&te.AdaptationSet_asArray)for(ue=0;ue<te.AdaptationSet_asArray.length;ue++)ae=te.AdaptationSet_asArray[ue],le=new Hr,ae.hasOwnProperty(y.Z.ID)&&(le.id=ae.id),le.index=ue,le.period=q,re(ae,E.Z.MUXED)?le.type=E.Z.MUXED:re(ae,E.Z.AUDIO)?le.type=E.Z.AUDIO:Ae(ae)?le.type=E.Z.VIDEO:Te(ae)?le.type=E.Z.TEXT:ie(ae)?le.type=E.Z.IMAGE:O.warn("Unknown Adaptation stream type"),Pe.push(le);return Pe},getRegularPeriods:function(q){var le,ae,ue=!!q&&Oe(q.manifest),te=[],Pe=null,xe=null,je=null,Me=null;for(ae=0,le=q&&q.manifest&&q.manifest.Period_asArray?q.manifest.Period_asArray.length:0;ae<le;ae++)(xe=q.manifest.Period_asArray[ae]).hasOwnProperty(y.Z.START)?(Me=new xi).start=xe.start:Pe!==null&&Pe.hasOwnProperty(y.Z.DURATION)&&je!==null?(Me=new xi).start=parseFloat((je.start+je.duration).toFixed(5)):ae!==0||ue||((Me=new xi).start=0),je!==null&&isNaN(je.duration)&&(Me!==null?je.duration=parseFloat((Me.start-je.start).toFixed(5)):O.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Me!==null&&(Me.id=Se(xe,ae),Me.index=ae,Me.mpd=q,xe.hasOwnProperty(y.Z.DURATION)&&(Me.duration=xe.duration),je&&(je.nextPeriodId=Me.id),te.push(Me),Pe=xe,je=Me),xe=null,Me=null;return te.length===0||je!==null&&isNaN(je.duration)&&(je.duration=parseFloat((function(ve){(function(){if(!j||!j.hasOwnProperty("error"))throw new Error(E.Z.MISSING_CONFIG_ERROR)})();var De,$e=Oe(ve.mpd.manifest);return ve.mpd.manifest.mediaPresentationDuration?De=ve.mpd.manifest.mediaPresentationDuration:ve.duration?De=ve.duration:$e?De=Number.POSITIVE_INFINITY:j.error(new ce.Z(we.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",ve)),De}(je)-je.start).toFixed(5))),te},getMpd:function(q){var le=new Fi;return q&&(le.manifest=q,q.hasOwnProperty(y.Z.AVAILABILITY_START_TIME)?le.availabilityStartTime=new Date(q.availabilityStartTime.getTime()):q.loadedTime&&(le.availabilityStartTime=new Date(q.loadedTime.getTime())),q.hasOwnProperty(y.Z.AVAILABILITY_END_TIME)&&(le.availabilityEndTime=new Date(q.availabilityEndTime.getTime())),q.hasOwnProperty(y.Z.MINIMUM_UPDATE_PERIOD)&&(le.minimumUpdatePeriod=q.minimumUpdatePeriod),q.hasOwnProperty(y.Z.MEDIA_PRESENTATION_DURATION)&&(le.mediaPresentationDuration=q.mediaPresentationDuration),q.hasOwnProperty(y.Z.SUGGESTED_PRESENTATION_DELAY)&&(le.suggestedPresentationDelay=q.suggestedPresentationDelay),q.hasOwnProperty(y.Z.TIMESHIFT_BUFFER_DEPTH)&&(le.timeShiftBufferDepth=q.timeShiftBufferDepth),q.hasOwnProperty(y.Z.MAX_SEGMENT_DURATION)&&(le.maxSegmentDuration=q.maxSegmentDuration),q.hasOwnProperty(y.Z.PUBLISH_TIME)&&(le.publishTime=new Date(q.publishTime))),le},getEventsForPeriod:function(q){var le,ae,ue=q&&q.mpd&&q.mpd.manifest?q.mpd.manifest:null,te=ue?ue.Period_asArray:null,Pe=te&&q&&H(q.index)?te[q.index].EventStream_asArray:null,xe=[];if(Pe)for(le=0;le<Pe.length;le++){var je=new ju;if(je.period=q,je.timescale=1,!Pe[le].hasOwnProperty(E.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(je.schemeIdUri=Pe[le][E.Z.SCHEME_ID_URI],Pe[le].hasOwnProperty(y.Z.TIMESCALE)&&(je.timescale=Pe[le][y.Z.TIMESCALE]),Pe[le].hasOwnProperty(y.Z.VALUE)&&(je.value=Pe[le][y.Z.VALUE]),Pe[le].hasOwnProperty(y.Z.PRESENTATION_TIME_OFFSET)&&(je.presentationTimeOffset=Pe[le][y.Z.PRESENTATION_TIME_OFFSET]),ae=0;Pe[le].Event_asArray&&ae<Pe[le].Event_asArray.length;ae++){var Me=Pe[le].Event_asArray[ae],ve=new uo;ve.presentationTime=0,ve.eventStream=je,Me.hasOwnProperty(y.Z.PRESENTATION_TIME)&&(ve.presentationTime=Me.presentationTime);var De=je.presentationTimeOffset?je.presentationTimeOffset/je.timescale:0;ve.calculatedPresentationTime=ve.presentationTime/je.timescale+q.start-De,Me.hasOwnProperty(y.Z.DURATION)&&(ve.duration=Me.duration/je.timescale),Me.hasOwnProperty(y.Z.ID)?ve.id=Me.id:ve.id=null,Me.Signal&&Me.Signal.Binary?ve.messageData=V.decodeArray(Me.Signal.Binary.toString()):ve.messageData=Me.messageData||Me.__cdata||Me.__text,xe.push(ve)}}return xe},getEssentialPropertiesForAdaptation:function(q){var le={};if(q&&q.hasOwnProperty(y.Z.ESSENTIAL_PROPERTY_ASARRAY)){var ae,ue=Un(q.EssentialProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var te=ae.value;te.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(le[te[E.Z.SCHEME_ID_URI]]=fn({},te))}}catch(Pe){ue.e(Pe)}finally{ue.f()}}return le},getEssentialPropertiesAsArrayForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.ESSENTIAL_PROPERTY_ASARRAY)&&q.EssentialProperty_asArray.length?q.EssentialProperty_asArray.map(function(le){return new At().init(le)}):[]},getEssentialPropertiesForRepresentation:Ze,getEventStreamForAdaptationSet:function(q,le,ae){var ue,te,Pe;return q&&q.Period_asArray&&le&&le.period&&H(le.period.index)&&(te=q.Period_asArray[le.period.index])&&te.AdaptationSet_asArray&&H(le.index)&&(Pe=te.AdaptationSet_asArray[le.index])&&(ue=Pe.InbandEventStream_asArray),ke(ue,null,ae)},getEventStreamForRepresentation:function(q,le,ae){var ue,te,Pe,xe;return q&&q.Period_asArray&&le&&le.adaptation&&le.adaptation.period&&H(le.adaptation.period.index)&&(te=q.Period_asArray[le.adaptation.period.index])&&te.AdaptationSet_asArray&&H(le.adaptation.index)&&(Pe=te.AdaptationSet_asArray[le.adaptation.index])&&Pe.Representation_asArray&&H(le.index)&&(xe=Pe.Representation_asArray[le.index])&&(ue=xe.InbandEventStream_asArray),ke(ue,le,ae)},getUTCTimingSources:function(q){var le=Oe(q),ae=!!q&&q.hasOwnProperty(y.Z.AVAILABILITY_START_TIME),ue=q?q.UTCTiming_asArray:null,te=[];return(le||ae)&&ue&&ue.forEach(function(Pe){var xe=new no.Z;Pe.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(xe.schemeIdUri=Pe.schemeIdUri,Pe.hasOwnProperty(y.Z.VALUE)&&(xe.value=Pe.value.toString(),te.push(xe)))}),te},getBaseURLsFromElement:Ie,getRepresentationSortFunction:function(){return function(q,le){return q.bandwidth-le.bandwidth}},getContentSteering:function(q){if(q&&q.hasOwnProperty(y.Z.CONTENT_STEERING_AS_ARRAY))return Ge(q[y.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(q){return q&&q.hasOwnProperty(y.Z.LOCATION_AS_ARRAY)?q[y.Z.LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,ue=le.hasOwnProperty(y.Z.SERVICE_LOCATION)?le[y.Z.SERVICE_LOCATION]:null;return new zn(ae,ue)}):[]},getPatchLocation:function(q){return q&&q.hasOwnProperty(y.Z.PATCH_LOCATION_AS_ARRAY)?q[y.Z.PATCH_LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,ue=le.hasOwnProperty(y.Z.SERVICE_LOCATION)?le[y.Z.SERVICE_LOCATION]:null,te=le.hasOwnProperty(y.Z.TTL)?1e3*parseFloat(le[y.Z.TTL]):NaN;return new Kn(ae,ue,te)}):[]},getSuggestedPresentationDelay:function(q){return q&&q.hasOwnProperty(y.Z.SUGGESTED_PRESENTATION_DELAY)?q.suggestedPresentationDelay:null},getAvailabilityStartTime:function(q){return q&&q.hasOwnProperty(y.Z.AVAILABILITY_START_TIME)&&q.availabilityStartTime!==null?q.availabilityStartTime.getTime():null},getServiceDescriptions:function(q){var le=[];if(q&&q.hasOwnProperty(y.Z.SERVICE_DESCRIPTION)){var ae,ue=Un(q.ServiceDescription_asArray);try{for(ue.s();!(ae=ue.n()).done;){var te=ae.value,Pe=null,xe=null,je=null,Me=null,ve=null,De=null,$e=null;for(var mt in te)te.hasOwnProperty(mt)&&(mt===y.Z.ID?Pe=te[mt]:mt===y.Z.SERVICE_DESCRIPTION_SCOPE?xe=te[mt].schemeIdUri:mt===y.Z.SERVICE_DESCRIPTION_LATENCY?je={target:parseInt(te[mt].target),max:parseInt(te[mt].max),min:parseInt(te[mt].min),referenceId:parseInt(te[mt].referenceId)}:mt===y.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?Me={max:parseFloat(te[mt].max),min:parseFloat(te[mt].min)}:mt===y.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?ve={mediaType:te[mt].mediaType,max:parseInt(te[mt].max),min:parseInt(te[mt].min),target:parseInt(te[mt].target),type:te[mt].type,maxQualityDifference:parseInt(te[mt].maxQualityDifference)}:mt===y.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?De={mediaType:te[mt].mediaType,max:parseInt(te[mt].max),min:parseInt(te[mt].min),target:parseInt(te[mt].target)}:mt===y.Z.CONTENT_STEERING&&($e=Ge(te[mt])));le.push({id:Pe,schemeIdUri:xe,latency:je,playbackRate:Me,operatingQuality:ve,operatingBandwidth:De,contentSteering:$e})}}catch(ct){ue.e(ct)}finally{ue.f()}}return le},getSegmentAlignment:function(q){return!(!q||!q.hasOwnProperty(y.Z.SEGMENT_ALIGNMENT))&&q[y.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(q){return!(!q||!q.hasOwnProperty(y.Z.SUB_SEGMENT_ALIGNMENT))&&q[y.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(q){var le={};if(q&&q.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,ue=Un(q.SupplementalProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var te=ae.value;te.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(le[te[E.Z.SCHEME_ID_URI]]=fn({},te))}}catch(Pe){ue.e(Pe)}finally{ue.f()}}return le},getSupplementalPropertiesAsArrayForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&q.SupplementalProperty_asArray.length?q.SupplementalProperty_asArray.map(function(le){return new At().init(le)}):[]},getSupplementalPropertiesForRepresentation:function(q){var le={};if(q&&q.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,ue=Un(q.SupplementalProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var te=ae.value;te.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(le[te[E.Z.SCHEME_ID_URI]]=fn({},te))}}catch(Pe){ue.e(Pe)}finally{ue.f()}}return le},getSupplementalPropertiesAsArrayForRepresentation:function(q){return q&&q.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&q.SupplementalProperty_asArray.length?q.SupplementalProperty_asArray.map(function(le){return new At().init(le)}):[]},setConfig:function(q){q&&(q.errHandler&&(j=q.errHandler),q.BASE64&&(V=q.BASE64))}},O=(0,M.Z)(W).getInstance().getLogger(k),k}Vr.__dashjs_factory_name="DashManifestModel";var er=U.Z.getSingletonFactory(Vr),dn=w(703);function vn(k,O){var j;if(typeof Symbol>"u"||k[Symbol.iterator]==null){if(Array.isArray(k)||(j=function(he,Ae){if(he){if(typeof he=="string")return on(he,Ae);var Te=Object.prototype.toString.call(he).slice(8,-1);return Te==="Object"&&he.constructor&&(Te=he.constructor.name),Te==="Map"||Te==="Set"?Array.from(he):Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te)?on(he,Ae):void 0}}(k))||O){j&&(k=j);var V=0,W=function(){};return{s:W,n:function(){return V>=k.length?{done:!0}:{done:!1,value:k[V++]}},e:function(he){throw he},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ee,H=!0,re=!1;return{s:function(){j=k[Symbol.iterator]()},n:function(){var he=j.next();return H=he.done,he},e:function(he){re=!0,ee=he},f:function(){try{H||j.return==null||j.return()}finally{if(re)throw ee}}}}function on(k,O){(O==null||O>k.length)&&(O=k.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=k[j];return V}function tr(){var k,O,j,V,W,ee,H,re,he,Ae,Te=this.context,ie=(0,m.Z)(Te).getInstance(),_e=(0,qe.Z)(Te).getInstance();function ye(){j={pr:1,nor:null,st:null,sf:null,sid:"".concat(dn.Z.generateUuid()),cid:null},he={},re={},Ae={},Oe()}function ze(){Oe()}function Oe(){if(ee){var te=ee.getStreamController();if(te&&typeof te.getActiveStream=="function"){var Pe=te.getActiveStream();Pe&&(H=Pe.getProcessors())}}}function Ze(te,Pe){var xe,je={},Me=vn(Pe);try{for(Me.s();!(xe=Me.n()).done;){var ve=xe.value;te[ve]&&(je[ve]=te[ve])}}catch(De){Me.e(De)}finally{Me.f()}return je}function We(te){var Pe=_e.get().streaming.cmcd.enabledKeys;return te.filter(function(xe){return Pe.includes(xe)})}function Se(te){try{return te.type===st.w.MPD_TYPE?((xe=ke()).ot="m",xe):te.type===st.w.MEDIA_SEGMENT_TYPE?(Pe=te.mediaType,Ae.hasOwnProperty(Pe)||(Ae[Pe]=!1),re.hasOwnProperty(Pe)||(re[Pe]=!1),he.hasOwnProperty(Pe)||(he[Pe]=!1),function(je){var Me,ve=ke(),De=function(Zt){try{var xn=Zt.quality,at=Zt.mediaInfo.bitrateList;return parseInt(at[xn].bandwidth/1e3)}catch(St){return null}}(je),$e=function(Zt){try{return isNaN(Zt.duration)?NaN:Math.round(1e3*Zt.duration)}catch(xn){return null}}(je),mt=function(Zt){try{return 100*parseInt(V.getThroughputHistory().getSafeAverageThroughput(Zt)/100)}catch(xn){return null}}(je.mediaType),ct=function(Zt){try{var xn=j.pr,at=W.getCurrentBufferLevel(Zt);return isNaN(xn)||isNaN(at)?null:100*parseInt(at/xn*10)}catch(St){return null}}(je.mediaType),yt=Ie(je.mediaType),pt=function(Zt){try{var xn=V.getTopBitrateInfoFor(Zt);return Math.round(xn.bitrate/1e3)}catch(at){return null}}(je.mediaType),Gt=j.pr,Vt=function(Zt){if(H&&H.length!==0){var xn,at=vn(H);try{for(at.s();!(xn=at.n()).done;){var St=xn.value;if(St.getType()===Zt)return St.probeNextRequest()}}catch(Qt){at.e(Qt)}finally{at.f()}}}(je.mediaType);je.mediaType===E.Z.VIDEO&&(Me="v"),je.mediaType===E.Z.AUDIO&&(Me="a"),je.mediaType===E.Z.TEXT&&(Me=je.mediaInfo.mimeType==="application/mp4"?"tt":"c");var jt=_e.get().streaming.cmcd.rtp;return jt||(jt=function(Zt){try{var xn=ee.getPlaybackRate();xn||(xn=1);var at=Zt.quality,St=Zt.mediaType,Qt=Zt.mediaInfo,Pt=Zt.duration;if(!Qt)return NaN;var un=Ie(St);un===0&&(un=500);var an=Qt.bitrateList[at].bandwidth*Pt/1e3/(un/xn/1e3),Jt=_e.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(_e.get().streaming.cmcd.rtpSafetyFactor)?_e.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(an*Jt/100)+1)}catch(Bn){return NaN}}(je)),isNaN(jt)||(ve.rtp=jt),Vt&&(je.url!==Vt.url?ve.nor=encodeURIComponent(dn.Z.getRelativeUrl(je.url,Vt.url)):Vt.range&&(ve.nrr=Vt.range)),De&&(ve.br=De),Me&&(ve.ot=Me),isNaN($e)||(ve.d=$e),isNaN(mt)||(ve.mtp=mt),isNaN(ct)||(ve.dl=ct),isNaN(yt)||(ve.bl=yt),isNaN(pt)||(ve.tb=pt),isNaN(Gt)||Gt===1||(ve.pr=Gt),he[je.mediaType]&&(ve.bs=!0,he[je.mediaType]=!1),!re[je.mediaType]&&Ae[je.mediaType]||(ve.su=!0,re[je.mediaType]=!1,Ae[je.mediaType]=!0),ve}(te)):te.type===st.w.INIT_SEGMENT_TYPE?function(){var je=ke();return je.ot="i",je.su=!0,je}():te.type===st.w.OTHER_TYPE||te.type===st.w.XLINK_EXPANSION_TYPE?function(){var je=ke();return je.ot="o",je}():te.type===st.w.LICENSE?function(je){var Me=ke();return Me.ot="k",Me}():null}catch(je){return null}var Pe,xe}function ke(){var te={},Pe=_e.get().streaming.cmcd.cid?_e.get().streaming.cmcd.cid:j.cid;return te.v=1,te.sid=_e.get().streaming.cmcd.sid?_e.get().streaming.cmcd.sid:j.sid,te.sid="".concat(te.sid),Pe&&(te.cid="".concat(Pe)),isNaN(j.pr)||j.pr===1||j.pr===null||(te.pr=j.pr),j.st&&(te.st=j.st),j.sf&&(te.sf=j.sf),te}function Ie(te){try{var Pe=W.getCurrentBufferLevel(te);return isNaN(Pe)?null:100*parseInt(10*Pe)}catch(xe){return null}}function Ge(te){try{j.pr=te.playbackRate}catch(Pe){}}function q(te){try{var Pe=k.getIsDynamic(te.data)?"l":"v",xe=te.protocol&&te.protocol==="MSS"?"s":"d";j.st="".concat(Pe),j.sf="".concat(xe)}catch(je){}}function le(te){try{te.state&&te.mediaType&&te.state===_.Z.BUFFER_EMPTY&&(he[te.mediaType]||(he[te.mediaType]=!0),re[te.mediaType]||(re[te.mediaType]=!0))}catch(Pe){}}function ae(){for(var te in he)he.hasOwnProperty(te)&&(he[te]=!0);for(var Pe in re)re.hasOwnProperty(Pe)&&(re[Pe]=!0)}function ue(te){try{if(!te)return null;var Pe=Object.keys(te).sort(function(Me,ve){return Me.localeCompare(ve)}),xe=Pe.length,je=Pe.reduce(function(Me,ve,De){return ve==="v"&&te[ve]===1||(typeof te[ve]=="string"&&ve!=="ot"&&ve!=="sf"&&ve!=="st"?Me+="".concat(ve,"=").concat(JSON.stringify(te[ve])):Me+="".concat(ve,"=").concat(te[ve]),De<xe-1&&(Me+=",")),Me},"");return(je=je.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(Me){return null}}return O={getQueryParameter:function(te){try{if(_e.get().streaming.cmcd&&_e.get().streaming.cmcd.enabled){var Pe=Se(te),xe=function(Me){try{var ve=_e.get().streaming.cmcd.enabledKeys;return Object.keys(Me).filter(function(De){return ve.includes(De)}).reduce(function(De,$e){return De[$e]=Me[$e],De},{})}catch(De){return Me}}(Pe),je=ue(xe);return ie.trigger(gr.Z.CMCD_DATA_GENERATED,{url:te.url,mediaType:te.mediaType,cmcdData:Pe,cmcdString:je}),{key:"CMCD",value:je}}return null}catch(Me){return null}},getHeaderParameters:function(te){try{if(_e.get().streaming.cmcd&&_e.get().streaming.cmcd.enabled){var Pe=Se(te),xe=Ze(Pe,We(["br","d","ot","tb"])),je=Ze(Pe,We(["bl","dl","mtp","nor","nrr","su"])),Me=Ze(Pe,We(["bs","rtp"])),ve=Ze(Pe,We(["cid","pr","sf","sid","st","v"])),De={"CMCD-Object":ue(xe),"CMCD-Request":ue(je),"CMCD-Status":ue(Me),"CMCD-Session":ue(ve)};return ie.trigger(gr.Z.CMCD_DATA_GENERATED,{url:te.url,mediaType:te.mediaType,cmcdData:Pe,headers:De}),De}return null}catch($e){return null}},setConfig:function(te){te&&(te.abrController&&(V=te.abrController),te.dashMetrics&&(W=te.dashMetrics),te.playbackController&&(ee=te.playbackController))},reset:function(){ie.off(_.Z.PLAYBACK_RATE_CHANGED,Ge,this),ie.off(_.Z.MANIFEST_LOADED,q,this),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,O),ie.off(_.Z.PLAYBACK_SEEKED,ae,O),ye()},initialize:function(){ie.on(_.Z.PLAYBACK_RATE_CHANGED,Ge,O),ie.on(_.Z.MANIFEST_LOADED,q,O),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,O),ie.on(_.Z.PLAYBACK_SEEKED,ae,O),ie.on(_.Z.PERIOD_SWITCH_COMPLETED,ze,O)}},k=er(Te).getInstance(),ye(),O}tr.__dashjs_factory_name="CmcdModel";var ur=U.Z.getSingletonFactory(tr);function xr(k){return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},xr(k)}function Rr(k,O){Rr=function(re,he){return new ee(re,void 0,he)};var j=Ui(RegExp),V=RegExp.prototype,W=new WeakMap;function ee(re,he,Ae){var Te=j.call(this,re,he);return W.set(Te,Ae||W.get(re)),Te}function H(re,he){var Ae=W.get(he);return Object.keys(Ae).reduce(function(Te,ie){return Te[ie]=re[Ae[ie]],Te},Object.create(null))}return di(ee,j),ee.prototype.exec=function(re){var he=V.exec.call(this,re);return he&&(he.groups=H(he,this)),he},ee.prototype[Symbol.replace]=function(re,he){if(typeof he=="string"){var Ae=W.get(this);return V[Symbol.replace].call(this,re,he.replace(/\$<([^>]+)>/g,function(ie,_e){return"$"+Ae[_e]}))}if(typeof he=="function"){var Te=this;return V[Symbol.replace].call(this,re,function(){var ie=[];return ie.push.apply(ie,arguments),xr(ie[ie.length-1])!=="object"&&ie.push(H(ie,Te)),he.apply(this,ie)})}return V[Symbol.replace].call(this,re,he)},Rr.apply(this,arguments)}function di(k,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(O&&O.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),O&&vi(k,O)}function Ui(k){var O=typeof Map=="function"?new Map:void 0;return Ui=function(j){if(j===null||(V=j,Function.toString.call(V).indexOf("[native code]")===-1))return j;var V;if(typeof j!="function")throw new TypeError("Super expression must either be null or a function");if(O!==void 0){if(O.has(j))return O.get(j);O.set(j,W)}function W(){return ni(j,arguments,ri(this).constructor)}return W.prototype=Object.create(j.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),vi(W,j)},Ui(k)}function ni(k,O,j){return ni=li()?Reflect.construct:function(V,W,ee){var H=[null];H.push.apply(H,W);var re=new(Function.bind.apply(V,H));return ee&&vi(re,ee.prototype),re},ni.apply(null,arguments)}function li(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(k){return!1}}function vi(k,O){return vi=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},vi(k,O)}function ri(k){return ri=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},ri(k)}var vs="static",Ao="dynamic",Yo="cmsd-",Ri=Yo+vs,Zu=Yo+Ao,vu="stream",Zs=["mb","st","sf","v"],Rl={video:"v",audio:"a",text:"tt",stream:vu},qu=/^[-0-9]/;function Gu(){var k,O,j,V,W=this.context,ee=(0,m.Z)(W).getInstance();function H(){j={},V={}}function re(ye){ye&&Object.keys(ye).forEach(function(ze){Zs.includes(ze)||delete ye[ze]})}function he(ye){return!ye||ye.toLowerCase()!=="false"&&(qu.test(ye)?parseInt(ye,10):ye.replace(/["]+/g,""))}function Ae(ye){try{for(var ze={},Oe=ye.split(","),Ze=0;Ze<Oe.length;Ze++){var We=Oe[Ze].split("="),Se=We[0],ke=he(We[1]);ze[Se]=ke}return ze}catch(Ie){O.error("Failed to parse CMSD-Static response header value:",Ie)}}function Te(ye){try{for(var ze={},Oe=ye.split(","),Ze=Oe[Oe.length-1].split(";"),We=1;We<Ze.length;We++){var Se=Ze[We].split("="),ke=Se[0],Ie=he(Se[1]);ze[ke]=Ie}return ze}catch(Ge){return O.error("Failed to parse CMSD-Dynamic response header value:",Ge),[]}}function ie(ye){return Rl[ye]||"o"}function _e(ye,ze,Oe){var Ze=ye===vs?j:V,We=Ze[ze]||{},Se=Ze[vu]||{};return We[Oe]||Se[Oe]}return k={setConfig:function(){},initialize:function(){},reset:function(){H()},parseResponseHeaders:function(ye,ze){for(var Oe=null,Ze=null,We=ye.split("\r\n"),Se=We.length-1;Se>=0;Se--){var ke=We[Se].match(Rr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(ke&&ke.groups){var Ie=ke.groups.key.toLowerCase(),Ge=ke.groups.value;switch(Ie){case Ri:Oe=Ae(Ge),ee.trigger(T.Z.CMSD_STATIC_HEADER,Oe);break;case Zu:Ze||(Ze=Te(Ge))}}}var q=vu;return Oe&&Oe.ot?q=Oe.ot:ze&&(q=ie(ze)),re(j[q]),re(V[q]),Oe&&(j[q]=Object.assign(j[q]||{},Oe)),Ze&&(V[q]=Object.assign(V[q]||{},Ze)),{static:Oe,dynamic:Ze}},getMaxBitrate:function(ye){var ze=ie(ye);return _e(Ao,ze,"mb")||-1},getEstimatedThroughput:function(ye){var ze=ie(ye);return _e(Ao,ze,"etp")||null},getResponseDelay:function(ye){var ze=ie(ye);return _e(Ao,ze,"rd")||null},getRoundTripTime:function(ye){var ze=ie(ye);return _e(Ao,ze,"rtt")||null}},O=(0,M.Z)(W).getInstance().getLogger(k),H(),k}Gu.__dashjs_factory_name="CmsdModel";var sn=U.Z.getSingletonFactory(Gu);function ir(){var k,O,j=this.context,V={};function W(){O=(0,M.Z)(j).getInstance().getLogger(k)}function ee(re){for(var he={},Ae=0,Te=0,ie=0,_e=0,ye=re.length,ze=0;ze<ye;++ze)Ae+=re[ze].chunkDownloadTimeRelativeMS,Te+=re[ze].bufferLevel,ie+=re[ze].chunkDownloadTimeRelativeMS*re[ze].bufferLevel,_e+=re[ze].chunkDownloadTimeRelativeMS*re[ze].chunkDownloadTimeRelativeMS;return he.m=(ie-Ae*Te/ye)/(_e-Ae*Ae/ye),he.b=Te/ye-he.m*Ae/ye,function(Oe){return he.m*Oe+he.b}}function H(re){var he,Ae=!0,Te=re.reduce(function(ie,_e){return ie+_e.bufferLevelAtSegmentEnd},0)/re.length;return re.forEach(function(ie){Math.abs(ie.bufferLevelAtSegmentEnd/ie.bufferLevelAtSegmentStart)<.95&&(Ae=!1),ie.bufferLevelAtSegmentEnd/Te<.8&&(Ae=!1),he?he>ie.bitrate&&(Ae=!1):he=ie.bitrate}),Ae}return k={setup:W,addMeasurement:function(re,he,Ae,Te,ie){re&&re.mediaType&&!V[re.mediaType]&&(V[re.mediaType]=[]);var _e=re.mediaInfo.bitrateList.find(function(ye){return ye.id===re.representationId});V[re.mediaType].push({index:re.index,repId:re.representationId,mediaType:re.mediaType,requestTimeMS:Te,adjustedAvailabilityStartTimeMS:re.availabilityStartTime.getTime(),segDurationMS:1e3*re.duration,chunksDurationMS:Ae.reduce(function(ye,ze){return ye+ze.chunkDownloadDurationMS},0),segmentBytes:Ae.reduce(function(ye,ze){return ye+ze.chunkBytes},0),bitrate:_e&&_e.bandwidth,bitrateList:re.mediaInfo.bitrateList,chunkMeasurements:Ae,fetchDownloadDurationMS:he,throughputCapacityDelayMS:ie,getEstimatedBufferLevel:ee(Ae.slice(1))}),V[re.mediaType].length>10&&V[re.mediaType].shift()},getThroughputCapacityDelayMS:function(re,he){var Ae=V[re.mediaType]&&V[re.mediaType].slice(-3);return!Ae||Ae.length<3?0:H(Ae)?he/4>250?250:he/4:0},getEstimatedDownloadDurationMS:function(re){var he=V[re.mediaType].slice(-1).pop(),Ae=V[re.mediaType].slice(-3),Te=he.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;he.bufferLevelAtSegmentStart=he.getEstimatedBufferLevel(Te/2),he.bufferLevelAtSegmentEnd=he.getEstimatedBufferLevel(Te);var ie=H(Ae),_e=ie?.6:.8;if(he.isBufferStable&&1.05*he.segDurationMS<he.fetchDownloadDurationMS)return he.fetchDownloadDurationMS;if(!ie||he.segDurationMS<he.fetchDownloadDurationMS||he.adjustedAvailabilityStartTimeMS<=he.requestTimeMS+he.throughputCapacityDelayMS-he.segDurationMS)return .8*he.fetchDownloadDurationMS;for(var ye=he.requestTimeMS+he.throughputCapacityDelayMS-he.adjustedAvailabilityStartTimeMS,ze=0,Oe=0,Ze=0,We=0;We<he.chunkMeasurements.length;We++){var Se=he.chunkMeasurements[We];if(ye<Oe+Se.chunkDownloadDurationMS)break;Oe+=Se.chunkDownloadDurationMS,ze+=Se.chunkBytes,Ze++}if(ye<0&&O.warn("request time was before adjusted availibitly start time"),ze&&Oe&&Ze>.2*he.chunkMeasurements.length){var ke=ze/Oe,Ie=he.segmentBytes/ke;return he.fetchDownloadDurationMS<Ie?he.fetchDownloadDurationMS*_e:Ie*_e}var Ge=he.bitrate;return he.bitrateList.some(function(q){if(q.bandwidth>he.bitrate)return Ge=q.bandwidth,!0}),Ge===he.bitrate?he.fetchDownloadDurationMS*_e:_e*he.segmentBytes*8*1e3/Ge}},W(),k}ir.__dashjs_factory_name="LowLatencyThroughputModel";var Tr=U.Z.getSingletonFactory(ir),Ai=w(5717);function Wr(k,O,j){return O in k?Object.defineProperty(k,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):k[O]=j,k}function Ii(k){k=k||{};var O,j,V,W,ee,H,re,he,Ae,Te,ie,_e=this.context,ye=k.errHandler,ze=k.dashMetrics,Oe=k.mediaPlayerModel,Ze=k.requestModifier,We=k.boxParser,Se=k.errors,ke=k.requestTimeout||0,Ie=(0,m.Z)(_e).getInstance(),Ge=(0,qe.Z)(_e).getInstance();function q(le,ae){var ue,te=le.request,Pe=[],xe=!0,je=!0,Me=new Date,ve=Me,De=0,$e=null,mt=null;if(!Ze||!ze||!ye)throw new Error("config object is not correct or missing");var ct,yt=function(un){te.requestStartDate=Me,te.requestEndDate=new Date,te.firstByteDate=te.firstByteDate||Me,te.fileLoaderType=mt;var an=ue.response?ue.response.responseURL:null,Jt=ue.response?ue.response.status:null,Bn=ue.response&&ue.response.getAllResponseHeaders?ue.response.getAllResponseHeaders():ue.response?ue.response.responseHeaders:null,kn=Bn&&Ge.get().streaming.cmsd&&Ge.get().streaming.cmsd.enabled?re.parseResponseHeaders(Bn,te.mediaType):null;ze.addHttpRequest(te,an,Jt,Bn,un?Pe:null,kn)},pt=function(un){je=!1,yt(un),te.type===st.w.MPD_TYPE&&(ze.addManifestUpdate(te),Ie.trigger(T.Z.MANIFEST_LOADING_FINISHED,{request:te}))},Gt=function(){if($e&&(clearTimeout($e),$e=null),j.indexOf(ue)!==-1&&(j.splice(j.indexOf(ue),1),je))if(pt(!1),ae>0){try{Ge.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&te.type===st.w.MEDIA_SEGMENT_TYPE&&Oe.getRetryAttemptsForType(st.w.MEDIA_SEGMENT_TYPE)===ae&&Ie.trigger(T.Z.ATTEMPT_BACKGROUND_SYNC)}catch(an){}ae--;var un={config:le};W.push(un),un.timeout=setTimeout(function(){W.indexOf(un)!==-1&&(W.splice(W.indexOf(un),1),q(le,ae))},Oe.getRetryIntervalsForType(te.type))}else{if(te.type===st.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;ye.error(new ce.Z(ee[te.type],te.url+" is not available",{request:te,response:ue.response})),le.error&&le.error(te,"error",ue.response.statusText,ue.response),le.complete&&le.complete(te,ue.response.statusText)}};te.hasOwnProperty("availabilityTimeComplete")&&te.availabilityTimeComplete===!1&&window.fetch&&te.responseType==="arraybuffer"&&te.type===st.w.MEDIA_SEGMENT_TYPE?((ct=Gr(_e).create({requestModifier:Ze,lowLatencyThroughputModel:Ae,boxParser:We})).setup({dashMetrics:ze}),mt=E.Z.FILE_LOADER_TYPES.FETCH):(ct=(0,cn.Z)(_e).create({requestModifier:Ze}),mt=E.Z.FILE_LOADER_TYPES.XHR);var Vt=null,jt=Ze.modifyRequestURL?Ze.modifyRequestURL(te.url):te.url;if(Ge.get().streaming.cmcd&&Ge.get().streaming.cmcd.enabled){var Zt=Ge.get().streaming.cmcd.mode;if(Zt===E.Z.CMCD_MODE_QUERY){var xn=function(un){try{var an=[],Jt=H.getQueryParameter(un);return Jt&&an.push(Jt),an}catch(Bn){return[]}}(te);jt=dn.Z.addAditionalQueryParameterToUrl(jt,xn)}else Zt===E.Z.CMCD_MODE_HEADER&&(Vt=H.getHeaderParameters(te))}var at=he.getXHRWithCredentialsForType(te.type);if(te.queryParams){var St=Object.keys(te.queryParams).map(function(un){return{key:un,value:te.queryParams[un]}});jt=dn.Z.addAditionalQueryParameterToUrl(jt,St)}te.url=jt,ue={url:jt,method:st.w.GET,withCredentials:at,request:te,onload:function(){ue.response.status>=200&&ue.response.status<=299&&(pt(!0),le.success&&le.success(ue.response.response,ue.response.statusText,ue.response.responseURL),le.complete&&le.complete(te,ue.response.statusText))},onend:Gt,onerror:Gt,progress:function(un){var an=new Date;xe&&(xe=!1,(!un.lengthComputable||un.lengthComputable&&un.total!==un.loaded)&&(te.firstByteDate=an)),un.lengthComputable&&(te.bytesLoaded=un.loaded,te.bytesTotal=un.total),un.noTrace||(Pe.push({s:ve,d:un.time?un.time:an.getTime()-ve.getTime(),b:[un.loaded?un.loaded-De:0]}),ve=an,De=un.loaded),$e&&(clearTimeout($e),$e=null),Ge.get().streaming.fragmentRequestProgressTimeout>0&&($e=setTimeout(function(){Te.warn("Abort request "+ue.url+" due to progress timeout"),ue.response.onabort=null,ue.loader.abort(ue),Gt()},Ge.get().streaming.fragmentRequestProgressTimeout)),le.progress&&un&&le.progress(un)},onabort:function(){yt(!0),$e&&(clearTimeout($e),$e=null),le.abort&&le.abort(te)},ontimeout:function(un){var an;if(un.lengthComputable){var Jt=un.loaded/un.total*100;an="Request timeout: loaded: "+un.loaded+", out of: "+un.total+" : "+Jt.toFixed(3)+"% Completed"}else an="Request timeout: non-computable download size";Te.warn(an)},loader:ct,timeout:ke,headers:Vt};var Qt=new Date().getTime();if(isNaN(te.delayLoadingTime)||Qt>=te.delayLoadingTime)j.push(ue),ct.load(ue);else{var Pt={httpRequest:ue};V.push(Pt),Pt.delayTimeout=setTimeout(function(){if(V.indexOf(Pt)!==-1){V.splice(V.indexOf(Pt),1);try{Me=new Date,ve=Me,j.push(Pt.httpRequest),ct.load(Pt.httpRequest)}catch(un){Pt.httpRequest.onerror()}}},te.delayLoadingTime-Qt)}}return O={load:function(le){le.request?q(le,Oe.getRetryAttemptsForType(le.request.type)):le.error&&le.error(le.request,"error")},abort:function(){W.forEach(function(le){clearTimeout(le.timeout),le.config.request&&le.config.abort&&le.config.abort(le.config.request)}),W=[],V.forEach(function(le){return clearTimeout(le.delayTimeout)}),V=[],j.forEach(function(le){le.request.type!==st.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(le.onloadend=le.onerror=le.onprogress=void 0,le.loader.abort(le))}),j=[]}},Te=(0,M.Z)(_e).getInstance().getLogger(O),j=[],V=[],W=[],H=ur(_e).getInstance(),re=sn(_e).getInstance(),Ae=Tr(_e).getInstance(),he=(0,Ai.Z)(_e).getInstance(),Wr(ie={},st.w.MPD_TYPE,Se.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Wr(ie,st.w.XLINK_EXPANSION_TYPE,Se.DOWNLOAD_ERROR_ID_XLINK_CODE),Wr(ie,st.w.INIT_SEGMENT_TYPE,Se.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Wr(ie,st.w.MEDIA_SEGMENT_TYPE,Se.DOWNLOAD_ERROR_ID_CONTENT_CODE),Wr(ie,st.w.INDEX_SEGMENT_TYPE,Se.DOWNLOAD_ERROR_ID_CONTENT_CODE),Wr(ie,st.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,Se.DOWNLOAD_ERROR_ID_CONTENT_CODE),Wr(ie,st.w.OTHER_TYPE,Se.DOWNLOAD_ERROR_ID_CONTENT_CODE),ee=ie,O}Ii.__dashjs_factory_name="HTTPLoader";var Kr=U.Z.getClassFactory(Ii);function Cr(){var k;function O(){k={}}function j(){O()}return j(),{getLoader:function(V){for(var W in k)if(k.hasOwnProperty(W)&&V.startsWith(W))return k[W];return Kr},registerLoader:function(V,W){k[V]=W},unregisterLoader:function(V){k[V]&&delete k[V]},unregisterAllLoader:O,reset:j}}Cr.__dashjs_factory_name="SchemeLoaderFactory";var ci=U.Z.getSingletonFactory(Cr);function Br(k){k=k||{};var O,j,V=this.context;return O=ci(V).getInstance(),{load:function(W){if(!j){var ee=O.getLoader(W&&W.request?W.request.url:null);j=ee(V).create({errHandler:k.errHandler,mediaPlayerModel:k.mediaPlayerModel,requestModifier:k.requestModifier,dashMetrics:k.dashMetrics,boxParser:k.boxParser?k.boxParser:null,constants:k.constants?k.constants:null,dashConstants:k.dashConstants?k.dashConstants:null,urlUtils:k.urlUtils?k.urlUtils:null,requestTimeout:isNaN(k.requestTimeout)?0:k.requestTimeout,errors:k.errors})}j.load(W)},abort:function(){j&&j.abort()}}}Br.__dashjs_factory_name="URLLoader";var bi=U.Z.getClassFactory(Br);function yo(k){return yo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},yo(k)}function oa(k,O){return oa=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},oa(k,O)}function yi(k,O){return!O||yo(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Ta(k){return Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Ta(k)}var aa=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&oa(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Ta(O);if(j){var re=Ta(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return yi(this,ee)});function W(ee){var H;return function(re,he){if(!(re instanceof he))throw new TypeError("Cannot call a class as a function")}(this,W),(H=V.call(this,ee)).checkForExistenceOnly=!0,H}return W}(Z.Z);function ys(k){k=k||{};var O,j,V=this.context,W=k.eventBus,ee=k.events,H=k.urlUtils,re=k.errors,he=k.streamId;return O={checkForExistence:function(Ae){var Te=function(_e){W.trigger(ee.CHECK_FOR_EXISTENCE_COMPLETED,{request:Ae,exists:_e})};if(Ae){var ie=new aa(Ae.url);j.load({request:ie,success:function(){Te(!0)},error:function(){Te(!1)}})}else Te(!1)},load:function(Ae){var Te=function(ie,_e){W.trigger(ee.LOADING_COMPLETED,{request:Ae,response:ie||null,error:_e||null,sender:O})};Ae?j.load({request:Ae,progress:function(ie){W.trigger(ee.LOADING_PROGRESS,{request:Ae,stream:ie.stream,streamId:he}),ie.data&&W.trigger(ee.LOADING_DATA_PROGRESS,{request:Ae,response:ie.data||null,error:null,sender:O})},success:function(ie){Te(ie)},error:function(ie,_e,ye){Te(void 0,new ce.Z(re.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ye,_e))},abort:function(ie){ie&&W.trigger(ee.LOADING_ABANDONED,{mediaType:ie.mediaType,request:ie,sender:O})}}):Te(void 0,new ce.Z(re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){j&&j.abort()},reset:function(){j&&(j.abort(),j=null)}},j=bi(V).create({errHandler:k.errHandler,errors:re,dashMetrics:k.dashMetrics,mediaPlayerModel:k.mediaPlayerModel,requestModifier:k.requestModifier,urlUtils:H,constants:E.Z,boxParser:k.boxParser,dashConstants:k.dashConstants,requestTimeout:k.settings.get().streaming.fragmentRequestTimeout}),O}ys.__dashjs_factory_name="FragmentLoader";var Sa=U.Z.getClassFactory(ys);function wa(){return{modifyResponseAsync:function(k){return Promise.resolve(k)}}}wa.__dashjs_factory_name="SegmentResponseModifier";var yu=U.Z.getSingletonFactory(wa);function Eu(k){k=k||{};var O,j,V,W=this.context,ee=(0,m.Z)(W).getInstance(),H=k.errHandler,re=k.mediaPlayerModel,he=k.dashMetrics,Ae=(0,M.Z)(W).getInstance(),Te=yu(W).getInstance(),ie=k.streamInfo;function _e(){return ie.id}function ye(){for(var Oe in V)V[Oe].reset();V={}}function ze(Oe){if(Oe.sender){var Ze=Oe.request,We=Oe.response,Se=Ze.isInitializationRequest(),ke=Ze.mediaInfo.streamInfo;if(Oe.error&&(Ze.mediaType===E.Z.AUDIO||Ze.mediaType===E.Z.VIDEO||Ze.mediaType===E.Z.TEXT&&Ze.mediaInfo.isFragmented)&&ee.trigger(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:Oe.request.serviceLocation}),We&&ke){var Ie=function(Ge,q,le,ae){var ue=new rn;return ue.streamId=le,ue.mediaInfo=q.mediaInfo,ue.segmentType=q.type,ue.start=q.startTime,ue.duration=q.duration,ue.end=ue.start+ue.duration,ue.bytes=Ge,ue.index=q.index,ue.quality=q.quality,ue.representationId=q.representationId,ue.endFragment=ae,ue}(We,Ze,ie.id,Oe.type!==T.Z.FRAGMENT_LOADING_PROGRESS);Te.modifyResponseAsync(Ie).then(function(Ge){ee.trigger(Se?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:Ge,request:Ze},{streamId:ke.id,mediaType:Ze.mediaType})}).catch(function(Ge){j.error(Ge),ee.trigger(Se?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:Ie,request:Ze},{streamId:ke.id,mediaType:Ze.mediaType})})}else j.warn("No "+Ze.mediaType+" bytes to push or stream is inactive.")}}return O={getStreamId:_e,getModel:function(Oe){var Ze=V[Oe];return Ze||(Ze=X(W).create({streamInfo:ie,type:Oe,dashMetrics:he,fragmentLoader:Sa(W).create({dashMetrics:he,mediaPlayerModel:re,errHandler:H,requestModifier:(0,Ke.Z)(W).getInstance(),settings:k.settings,boxParser:k.boxParser,eventBus:ee,events:T.Z,errors:we,dashConstants:k.dashConstants,urlUtils:k.urlUtils,streamId:_e()}),debug:Ae,eventBus:ee,events:T.Z}),V[Oe]=Ze),Ze},reset:function(){ee.off(_.Z.FRAGMENT_LOADING_COMPLETED,ze,this),ee.off(_.Z.FRAGMENT_LOADING_PROGRESS,ze,this),ye()}},j=Ae.getLogger(O),ye(),ee.on(_.Z.FRAGMENT_LOADING_COMPLETED,ze,O),ee.on(_.Z.FRAGMENT_LOADING_PROGRESS,ze,O),O}Eu.__dashjs_factory_name="FragmentController";var Ah=U.Z.getClassFactory(Eu),Aa=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},Es=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function _u(k){var O,j,V=this.context,W=k.streamInfo;function ee(re){j.setTrackByIndex(re)}function H(){j&&j.reset()}return O={getStreamId:function(){return W.id},initialize:function(){j.addTracks();var re=j.getTracks();re&&re.length>0&&ee(0)},provide:function(re,he){if(typeof he=="function"){var Ae,Te,ie=j.getCurrentTrack();if(!ie||ie.segmentDuration<=0||re==null)he(null);else{(Te=j.getThumbnailRequestForTime(re))&&(ie.segmentDuration=Te.duration),Ae=re%ie.segmentDuration;var _e=Math.floor(Ae*ie.tilesHor*ie.tilesVert/ie.segmentDuration),ye=new Aa;if(ye.width=Math.floor(ie.widthPerTile),ye.height=Math.floor(ie.heightPerTile),ye.x=Math.floor(_e%ie.tilesHor)*ie.widthPerTile,ye.y=Math.floor(_e/ie.tilesHor)*ie.heightPerTile,"readThumbnail"in ie)return ie.readThumbnail(re,function(Oe){ye.url=Oe,he(ye)});if(Te)ye.url=Te.url,ie.segmentDuration=NaN;else{var ze=Math.floor(re/ie.segmentDuration);ye.url=function(Oe,Ze){var We=Ze+Oe.startNumber,Se=(0,D.vi)(Oe.templateUrl,"Number",We);return Se=(0,D.vi)(Se,"Time",(We-1)*Oe.segmentDuration*Oe.timescale),Se=(0,D.vi)(Se,"Bandwidth",Oe.bandwidth),(0,D.eR)(Se)}(ie,ze)}he(ye)}}},setTrackByIndex:ee,getCurrentTrackIndex:function(){return j.getCurrentTrackIndex()},getBitrateList:function(){var re=j.getTracks(),he=0;return re.map(function(Ae){var Te=new Es;return Te.mediaType=E.Z.IMAGE,Te.qualityIndex=he++,Te.bitrate=Ae.bitrate,Te.width=Ae.width,Te.height=Ae.height,Te})},reset:H},H(),j=(0,Mn.Z)(V).create({streamInfo:W,adapter:k.adapter,baseURLController:k.baseURLController,timelineConverter:k.timelineConverter,debug:k.debug,eventBus:k.eventBus,events:k.events,dashConstants:k.dashConstants,dashMetrics:k.dashMetrics,segmentBaseController:k.segmentBaseController}),O}_u.__dashjs_factory_name="ThumbnailController";var Tu=U.Z.getClassFactory(_u),Hu=w(7417);function mf(k){var O;k=k||{};var j=[],V=(0,m.Z)(this.context).getInstance(),W=k.updateEventName,ee=k.addBlacklistEventName;function H(re){j.indexOf(re)===-1&&(j.push(re),V.trigger(W,{entry:re}))}return O={add:H,contains:function(re){return!!(j.length&&re&&re.length)&&j.indexOf(re)!==-1},reset:function(){j=[]}},ee&&V.on(ee,function(re){H(re.entry)},O),O}mf.__dashjs_factory_name="BlackListController";var qs=U.Z.getClassFactory(mf),vf=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT,E.Z.MUXED,E.Z.IMAGE];function sr(k){k=k||{};var O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke=this.context,Ie=(0,m.Z)(ke).getInstance(),Ge=(0,wt.Z)(ke).getInstance(),q=k.manifestModel,le=k.mediaPlayerModel,ae=k.dashMetrics,ue=k.manifestUpdater,te=k.adapter,Pe=k.timelineConverter,xe=k.capabilities,je=k.errHandler,Me=k.abrController,ve=k.playbackController,De=k.eventController,$e=k.mediaController,mt=k.protectionController,ct=k.textController,yt=k.videoModel,pt=k.streamInfo,Gt=k.settings;function Vt(en,Nn){return new Promise(function(Pn,On){an(),Te=!0,Bn();var Dn=yt.getElement(),Ct=[];vf.forEach(function(et){(et!==E.Z.TEXT||en)&&(et!==E.Z.VIDEO||!Dn||Dn&&/^VIDEO$/i.test(Dn.nodeName))&&Ct.push(jt(et,en))}),Promise.all(Ct).then(function(){return et=Nn,new Promise(function(zt){var Ve={},tt=V.map(function(Lt){return Lt.createBufferSinks(et)});Promise.all(tt).then(function(Lt){Lt.forEach(function(yn){yn&&(Ve[yn.getType()]=yn)}),zt(Ve)}).catch(function(){zt(Ve)})});var et}).then(function(et){if(Te=!1,V.length===0){var zt="No streams to play.";je.error(new ce.Z(we.MANIFEST_ERROR_ID_NOSTREAMS_CODE,zt,q.getValue())),j.fatal(zt)}else kn();en&&ct.createTracks(pt),Pn(et)}).catch(function(et){On(et)})})}function jt(en,Nn){var Pn,On=te.getAllMediaInfoForType(pt,en),Dn=[],Ct=null;if(!On||On.length===0)return j.info("No "+en+" data."),Promise.resolve();en===E.Z.VIDEO&&(re=!0),en===E.Z.AUDIO&&(he=!0);for(var et=0,zt=On.length;et<zt;et++)Ct=On[et],en===E.Z.TEXT&&Ct.isEmbedded&&(ct.addEmbeddedTrack(pt,Ct),Dn.push(Ct)),Zt(Ct)&&$e.addTrack(Ct);if(Dn.length>0&&($e.setInitialMediaSettingsForType(en,pt),ct.addMediaInfosToBuffer(pt,en,Dn)),On=On.filter(function(tt){return!tt.isEmbedded}),On.length===0)return Promise.resolve();if(en===E.Z.IMAGE)return(_e=Tu(ke).create({streamInfo:pt,adapter:te,baseURLController:k.baseURLController,timelineConverter:k.timelineConverter,debug:Ze,eventBus:Ie,events:T.Z,dashConstants:y.Z,dashMetrics:k.dashMetrics,segmentBaseController:k.segmentBaseController})).initialize(),Promise.resolve();Ie.trigger(T.Z.STREAM_INITIALIZING,{streamInfo:pt,mediaInfo:Ct}),$e.setInitialMediaSettingsForType(en,pt);var Ve=function(tt,Lt){var yn=tt&&tt.length>0?tt[0]:null,Cn=ie.getModel(yn?yn.type:null),yr=yn?yn.type:null,oi=yn?yn.mimeType:null,gi=yn?yn.isFragmented:null,Xr=_n(ke).create({streamInfo:pt,type:yr,mimeType:oi,timelineConverter:Pe,adapter:te,manifestModel:q,mediaPlayerModel:le,fragmentModel:Cn,dashMetrics:k.dashMetrics,baseURLController:k.baseURLController,segmentBaseController:k.segmentBaseController,abrController:Me,playbackController:ve,mediaController:$e,textController:ct,errHandler:je,settings:Gt,boxParser:Oe,segmentBlacklistController:ye});Xr.initialize(Lt,re,gi),V.push(Xr);for(var Lo=0;Lo<tt.length;Lo++)Xr.addMediaInfo(tt[Lo]);return yr===E.Z.TEXT&&ct.addMediaInfosToBuffer(pt,yr,tt,Cn),Xr}(On,Nn);return(Pn=$e.getCurrentTrackFor(en,pt.id))?(Me.updateTopQualityIndex(Pn),Ve.selectMediaInfo(en===E.Z.TEXT&&Pn.isEmbedded?On[0]:Pn)):Promise.resolve()}function Zt(en){var Nn,Pn=en?en.type:null;return Pn===E.Z.MUXED?(Nn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",j.fatal(Nn),je.error(new ce.Z(we.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Nn,q.getValue())),!1):!(Pn!==E.Z.TEXT&&Pn!==E.Z.IMAGE&&en.contentProtection&&!xe.supportsEncryptedMedia()&&(je.error(new ce.Z(we.CAPABILITY_MEDIAKEYS_ERROR_CODE,we.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function xn(en){for(var Nn=V?V.length:0,Pn=0;Pn<Nn;Pn++){var On=V[Pn].getFragmentModel();On.abortRequests(),On.resetInitialSettings(),V[Pn].reset(!1,en)}ct&&ct.deactivateStream(pt),V=[],ee=!1,H=!1,qn(!1),St(!1),Ie.trigger(T.Z.STREAM_DEACTIVATED,{streamInfo:pt})}function at(en){xn(en),W=!1,re=!1,he=!1,Ae={},Te=!1,We=!1,Se=[]}function St(en){We=en}function Qt(){return pt?pt.start:NaN}function Pt(){return pt?pt.id:null}function un(){return pt}function an(){if(!yt||!Me)throw new Error(E.Z.MISSING_CONFIG_ERROR)}function Jt(en){en.error&&(je.error(en.error),j.fatal(en.error.message))}function Bn(){if(De){var en=te.getEventsFor(pt);en&&en.length>0&&De.addInlineEvents(en,pt.id)}}function kn(){for(var en=V.length,Nn=Ae.audio||Ae.video?new ce.Z(we.DATA_UPDATE_FAILED_ERROR_CODE,we.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,Pn=0;Pn<en;Pn++)if(V[Pn].isUpdating()||Te)return;if(mt){mt.clearMediaInfoArray();for(var On=0;On<en&&V[On];On++){var Dn=V[On].getType(),Ct=V[On].getMediaInfo();if(Dn===E.Z.AUDIO||Dn===E.Z.VIDEO||Dn===E.Z.TEXT&&Ct.isFragmented){var et=V[On].getMediaInfo();et&&mt.initializeForMedia(et)}}mt.handleKeySystemFromManifest()}Nn?je.error(Nn):W||(W=!0,yt.waitForReadyState(E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){Ie.trigger(T.Z.STREAM_INITIALIZED,{streamInfo:pt})}))}function mr(){var en=mn(),Nn=en.length;if(Nn!==0){for(var Pn=0;Pn<Nn;Pn++)if(!en[Pn].isBufferingCompleted()&&(en[Pn].getType()===E.Z.AUDIO||en[Pn].getType()===E.Z.VIDEO))return void j.debug("onBufferingCompleted - One streamProcessor has finished but",en[Pn].getType(),"one is not buffering completed");j.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),H=!0,Ie.trigger(T.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:pt},{streamInfo:pt})}else j.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function vr(en){Ae[en.mediaType]=en.error,kn()}function bt(en){De&&De.addInbandEvents(en.events,pt.id)}function tn(en){return en&&en.type?qt(en.type):null}function qt(en){return en?mn().filter(function(Nn){return Nn.getType()===en})[0]:null}function mn(){for(var en,Nn,Pn=[],On=0;On<V.length;On++)(en=(Nn=V[On]).getType())!==E.Z.AUDIO&&en!==E.Z.VIDEO&&en!==E.Z.TEXT||Pn.push(Nn);return Pn}function bn(en,Nn){var Pn=un(),On=Nn.getStreamInfo();if(!On||!Pn)return!0;var Dn=te.getAdaptationForType(On.index,en,On),Ct=te.getAdaptationForType(Pn.index,en,Pn);return Dn&&Ct?!(!Zn(Ct)&&Zn(Dn)):!Dn&&!Ct}function Zn(en){return!!en&&!!(en.ContentProtection||en.Representation_asArray&&en.Representation_asArray.length>0&&en.Representation_asArray[0].ContentProtection)}function Fn(en,Nn){var Pn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!en||!en.hasOwnProperty("getStreamInfo"))return!1;var On=en.getStreamInfo(),Dn=Pn?Pn.getStreamInfo():un();if(!On||!Dn)return!1;var Ct=te.getAdaptationForType(On.index,Nn,On),et=te.getAdaptationForType(Dn.index,Nn,Dn);if(!Ct||!et)return!Ct&&!et;var zt=Ct&&et&&Ct.mimeType===et.mimeType,Ve=et.Representation_asArray.map(function(Cn){return Cn.codecs}),tt=Ct.Representation_asArray.map(function(Cn){return Cn.codecs}),Lt=tt.some(function(Cn){return Ve.indexOf(Cn)>-1}),yn=tt.some(function(Cn){return Ve.some(function(yr){return xe.codecRootCompatibleWithCodec(yr,Cn)})});return Lt||yn&&zt}function qn(en){ze=en}function Yn(){return ze}return O={initialize:function(){Ie.on(T.Z.BUFFERING_COMPLETED,mr,O),Ie.on(T.Z.DATA_UPDATE_COMPLETED,vr,O),Ie.on(T.Z.INBAND_EVENTS,bt,O),mt&&(Ie.on(T.Z.KEY_ERROR,Jt,O),Ie.on(T.Z.SERVER_CERTIFICATE_UPDATED,Jt,O),Ie.on(T.Z.LICENSE_REQUEST_COMPLETE,Jt,O),Ie.on(T.Z.KEY_SYSTEM_SELECTED,Jt,O),Ie.on(T.Z.KEY_SESSION_CREATED,Jt,O),Ie.on(T.Z.KEY_STATUSES_CHANGED,Jt,O)),ct.initializeForStream(pt),Ie.trigger(T.Z.STREAM_UPDATED,{streamInfo:pt})},getStreamId:function(){return pt?pt.id:null},activate:function(en,Nn){return new Promise(function(Pn,On){if(!ee)return Yn()?(ee=!0,Ie.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:pt}),void Pn(Nn)):void function(Dn,Ct){return Vt(Dn,Ct)}(en,Nn).then(function(Dn){ee=!0,Ie.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:pt}),Pn(Dn)}).catch(function(Dn){On(Dn)});Pn(Nn)})},deactivate:xn,getIsActive:function(){return ee},getDuration:function(){return pt?pt.duration:NaN},getStartTime:Qt,getId:Pt,getStreamInfo:un,getHasAudioTrack:function(){return he},getHasVideoTrack:function(){return re},startPreloading:function(en,Nn){return new Promise(function(Pn,On){Yn()?On():(j.info("[startPreloading] Preloading next stream with id ".concat(Pt())),qn(!0),Vt(en,Nn).then(function(){for(var Dn=0;Dn<V.length&&V[Dn];Dn++)V[Dn].setExplicitBufferingTime(Qt()),V[Dn].getScheduleController().startScheduleTimer();Pn()}).catch(function(){qn(!1),On()}))})},initializeForTextWithMediaSource:function(en){return new Promise(function(Nn,Pn){jt(E.Z.TEXT,en).then(function(){return(On=qt(E.Z.TEXT))?On.createBufferSinks():Promise.resolve();var On}).then(function(){ct.createTracks(pt),Nn()}).catch(function(On){Pn(On)})})},getThumbnailController:function(){return _e},getBitrateListFor:function(en){if(an(),en===E.Z.IMAGE)return _e?_e.getBitrateList():[];var Nn=function(Pn){for(var On=null,Dn=0;Dn<V.length;Dn++)if((On=V[Dn]).getType()===Pn)return On.getMediaInfo();return null}(en);return Me.getBitrateList(Nn)},updateData:function(en){return new Promise(function(Nn){Te=!0,pt=en,De&&Bn();for(var Pn=[],On=0,Dn=V.length;On<Dn;On++){var Ct=V[On],et=Ct.getMediaInfo();Pn.push(Ct.updateStreamInfo(pt));var zt=te.getAllMediaInfoForType(pt,Ct.getType());if(zt=zt.filter(function(Lt){return!Lt.isEmbedded})){Ct.clearMediaInfoArray();for(var Ve=0;Ve<zt.length;Ve++){var tt=zt[Ve];Ct.addMediaInfo(zt[Ve]),te.areMediaInfosEqual(et,tt)&&(Me.updateTopQualityIndex(tt),Pn.push(Ct.selectMediaInfo(tt)))}}}Promise.all(Pn).then(function(){for(Pn=[];Se.length>0;){var Lt=Se.pop(),yn=Lt.newMediaInfo,Cn=tn(Lt.oldMediaInfo);if(!Cn)return;Pn.push(Cn.prepareTrackSwitch()),Pn.push(Cn.selectMediaInfo(yn))}return Promise.all(Pn)}).then(function(){Te=!1,kn(),Ie.trigger(T.Z.STREAM_UPDATED,{streamInfo:pt}),Nn()})})},reset:function(en){ie&&(ie.reset(),ie=null),Me&&pt&&Me.clearDataForStream(pt.id),ye&&(ye.reset(),ye=null),at(en),pt=null,Ie.off(T.Z.DATA_UPDATE_COMPLETED,vr,O),Ie.off(T.Z.BUFFERING_COMPLETED,mr,O),Ie.off(T.Z.INBAND_EVENTS,bt,O),mt&&(Ie.off(T.Z.KEY_ERROR,Jt,O),Ie.off(T.Z.SERVER_CERTIFICATE_UPDATED,Jt,O),Ie.off(T.Z.LICENSE_REQUEST_COMPLETE,Jt,O),Ie.off(T.Z.KEY_SYSTEM_SELECTED,Jt,O),Ie.off(T.Z.KEY_SESSION_CREATED,Jt,O),Ie.off(T.Z.KEY_STATUSES_CHANGED,Jt,O))},getProcessors:mn,setMediaSource:function(en){return new Promise(function(Nn,Pn){for(var On=[],Dn=0;Dn<V.length;)Zt(V[Dn].getMediaInfo())?(On.push(V[Dn].setMediaSource(en)),Dn++):(V[Dn].reset(),V.splice(Dn,1));Promise.all(On).then(function(){for(var Ct=0;Ct<V.length;Ct++)V[Ct].dischargePreBuffer();if(V.length===0){var et="No streams to play.";je.error(new ce.Z(we.MANIFEST_ERROR_ID_NOSTREAMS_CODE,et+"nostreams",q.getValue())),j.fatal(et)}Nn()}).catch(function(Ct){j.error(Ct),Pn(Ct)})})},isMediaCodecCompatible:function(en){var Nn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Fn(en,E.Z.VIDEO,Nn)&&Fn(en,E.Z.AUDIO,Nn)},isProtectionCompatible:function(en){return!en||bn(E.Z.VIDEO,en)&&bn(E.Z.AUDIO,en)},getPreloaded:Yn,getIsEndedEventSignaled:function(){return We},setIsEndedEventSignaled:St,getAdapter:function(){return te},getHasFinishedBuffering:function(){return H},setPreloaded:qn,startScheduleControllers:function(){for(var en=V.length,Nn=0;Nn<en&&V[Nn];Nn++)V[Nn].getScheduleController().startScheduleTimer()},prepareTrackChange:function(en){if(ee&&pt){H=!1;var Nn=en.newMediaInfo,Pn=q.getValue();te.setCurrentMediaInfo(pt.id,Nn.type,Nn);var On=tn(Nn);if(On){var Dn=ve.getTime();j.info("Stream -  Process track changed at current time "+Dn),Pn.refreshManifestOnSwitchTrack?(Se.push(en),ue.getIsUpdating()||(j.debug("Stream -  Refreshing manifest for switch track"),ue.refreshManifest())):On.selectMediaInfo(Nn).then(function(){Nn.type!==E.Z.VIDEO&&Nn.type!==E.Z.AUDIO||Me.updateTopQualityIndex(Nn),On.prepareTrackSwitch()})}}},prepareQualityChange:function(en){var Nn=qt(en.mediaType);Nn&&Nn.prepareQualityChange(en)}},function(){try{Ze=(0,M.Z)(ke).getInstance(),j=Ze.getLogger(O),at(),Oe=(0,Hu.Z)(ke).getInstance(),ye=qs(ke).create({updateEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),ie=Ah(ke).create({streamInfo:pt,mediaPlayerModel:le,dashMetrics:ae,errHandler:je,settings:Gt,boxParser:Oe,dashConstants:y.Z,urlUtils:Ge})}catch(en){throw en}}(),O}sr.__dashjs_factory_name="Stream";var ei=U.Z.getClassFactory(sr),Io=function k(O){(function(j,V){if(!(j instanceof V))throw new TypeError("Cannot call a class as a function")})(this,k),this.url=O||null,this.type=st.w.CONTENT_STEERING_TYPE,this.responseType="json"},Eo=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function Hi(){var k,O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze,Oe=this.context,Ze=(0,wt.Z)(Oe).getInstance();function We(Me){q(Me,"baseUrl")}function Se(Me){q(Me,"location")}function ke(Me){if(Me&&Me.request&&Me.request.serviceLocation&&Me.request.requestStartDate&&Me.request.requestEndDate&&!isNaN(Me.request.bytesTotal)){var ve=Me.request.serviceLocation,De=Me.request.requestEndDate.getTime()-Me.request.requestStartDate.getTime();Ge(ve,parseInt(8*Me.request.bytesTotal/De*1e3))}}function Ie(Me){Me&&Me.httpRequest&&Me.httpRequest._serviceLocation&&!isNaN(Me.throughput)&&Ge(Me.httpRequest._serviceLocation,1e3*Me.throughput)}function Ge(Me,ve){W[Me]||(W[Me]=[]),W[Me].push(ve),W[Me].length>4&&W[Me].shift()}function q(Me,ve){if(Me&&Me.request&&Me.request.serviceLocation){var De=Me.request.serviceLocation;V[ve].all.indexOf(De)===-1&&V[ve].all.push(De),V[ve].current=De}}function le(){var Me=Te.getValue(),ve=ze.getContentSteering(Me);return ve||(ve=_e.getServiceDescriptionSettings().contentSteering),ve}function ae(){return new Promise(function(Me){try{var ve=le();if(!ve||!ve.serverUrl)return void Me();var De=function(mt){var ct=mt.serverUrl;j&&j.reloadUri&&(ct=Ze.isRelative(j.reloadUri)?Ze.resolve(j.reloadUri,mt.serverUrl):j.reloadUri);var yt=[],pt=V.baseUrl.all.concat(V.location.all);if(pt.length>0){var Gt=pt.map(function(Zt){var xn=function(at){if(!at||!W[at]||W[at].length===0)return-1;var St=W[at].reduce(function(Qt,Pt){return Qt+Pt})/W[at].length;return parseInt(St)}(Zt);return{serviceLocation:Zt,throughput:xn}});Gt.sort(function(Zt,xn){return xn.throughput-Zt.throughput});var Vt="",jt="";Gt.forEach(function(Zt,xn){xn!==0&&(Vt="".concat(Vt,","),Zt.throughput>-1&&(jt="".concat(jt,","))),Vt="".concat(Vt).concat(Zt.serviceLocation),Zt.throughput>-1&&(jt="".concat(jt).concat(Zt.throughput))}),yt.push({key:"_DASH_pathway",value:'"'.concat(Vt,'"')}),yt.push({key:"_DASH_throughput",value:jt})}return ct=dn.Z.addAditionalQueryParameterToUrl(ct,yt)}(ve),$e=new Io(De);H.load({request:$e,success:function(mt){(function(ct){ct&&ct[y.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(ct[y.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((j=new Eo).version=ct[y.Z.CONTENT_STEERING_RESPONSE.VERSION],ct[y.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(ct[y.Z.CONTENT_STEERING_RESPONSE.TTL])&&(j.ttl=ct[y.Z.CONTENT_STEERING_RESPONSE.TTL]),ct[y.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(j.reloadUri=ct[y.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),ct[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(j.pathwayPriority=ct[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),ct[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(j.pathwayClones=ct[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],j.pathwayClones=j.pathwayClones.filter(function(yt){return function(pt){return pt[y.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&pt[y.Z.CONTENT_STEERING_RESPONSE.ID]&&pt[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&pt[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][y.Z.CONTENT_STEERING_RESPONSE.HOST]}(yt)})),Pe())})(mt),ye.trigger(_.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:j,url:De}),Me()},error:function(mt,ct,yt,pt){(function(Gt,Vt){try{switch(O.warn("Error fetching data from content steering server",Gt),Vt.status){case 410:break;case 429:var jt=Vt&&Vt.getResponseHeader?Vt.getResponseHeader("retry-after"):null;jt!==null&&(j||(j={}),j.ttl=parseInt(jt)),Pe();break;default:Pe()}}catch(Zt){O.error(Zt)}})(mt,pt),Me(mt)},complete:function(){V.baseUrl.all=ue(V.baseUrl),V.location.all=ue(V.location)}})}catch(mt){Me(mt)}})}function ue(Me){return Me.all&&Me.all.length!==0&&Me.current?Me.all.filter(function(ve){return ve===Me.current}):[]}function te(Me){try{var ve=[];return Me&&Me.length!==0&&j&&j.pathwayClones&&j.pathwayClones.length!==0&&j.pathwayClones.forEach(function(De){var $e=Me.filter(function(Gt){return De[y.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===Gt.serviceLocation}),mt=null;if($e&&$e.length>0&&(mt=$e[0]),mt){var ct=new URL(mt.url),yt=De[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][y.Z.CONTENT_STEERING_RESPONSE.HOST];yt=dn.Z.stringHasProtocol(yt)?yt:"".concat(ct.protocol,"//").concat(yt);var pt={synthesizedUrl:"".concat(yt).concat(ct.pathname),serviceLocation:De[y.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:De[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][y.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:mt};ve.push(pt)}}),ve}catch(De){return O.error(De),[]}}function Pe(){j&&j.ttl&&!isNaN(j.ttl)&&(ee&&clearTimeout(ee),ee=setTimeout(function(){ae()},1e3*j.ttl))}function xe(){ee&&clearTimeout(ee),ee=null}function je(){j=null,W={},V={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},xe()}return k={reset:function(){je(),ye.off(_.Z.FRAGMENT_LOADING_STARTED,We,k),ye.off(_.Z.MANIFEST_LOADING_STARTED,Se,k),ye.off(_.Z.MANIFEST_LOADING_FINISHED,ke,k),ye.off(_.Z.THROUGHPUT_MEASUREMENT_STORED,Ie,k)},setConfig:function(Me){Me&&(Me.adapter&&(ze=Me.adapter),Me.errHandler&&(re=Me.errHandler),Me.dashMetrics&&(he=Me.dashMetrics),Me.mediaPlayerModel&&(Ae=Me.mediaPlayerModel),Me.requestModifier&&(ie=Me.requestModifier),Me.manifestModel&&(Te=Me.manifestModel),Me.serviceDescriptionController&&(_e=Me.serviceDescriptionController),Me.eventBus&&(ye=Me.eventBus))},loadSteeringData:ae,getCurrentSteeringResponseData:function(){return j},shouldQueryBeforeStart:function(){var Me=le();return!!Me&&Me.queryBeforeStart},getSteeringDataFromManifest:le,stopSteeringRequestTimer:xe,getSynthesizedBaseUrlElements:function(Me){try{return te(Me).map(function(ve){var De=new nr(ve.synthesizedUrl,ve.serviceLocation);return De.queryParams=ve.queryParams,De.dvbPriority=ve.reference.dvbPriority,De.dvbWeight=ve.reference.dvbWeight,De.availabilityTimeOffset=ve.reference.availabilityTimeOffset,De.availabilityTimeComplete=ve.reference.availabilityTimeComplete,De})}catch(ve){return O.error(ve),[]}},getSynthesizedLocationElements:function(Me){try{return te(Me).map(function(ve){var De=new zn(ve.synthesizedUrl,ve.serviceLocation);return De.queryParams=ve.queryParams,De})}catch(ve){return O.error(ve),[]}},initialize:function(){H=bi(Oe).create({errHandler:re,dashMetrics:he,mediaPlayerModel:Ae,requestModifier:ie,errors:we}),ye.on(_.Z.FRAGMENT_LOADING_STARTED,We,k),ye.on(_.Z.MANIFEST_LOADING_STARTED,Se,k),ye.on(_.Z.MANIFEST_LOADING_FINISHED,ke,k),ye.on(_.Z.THROUGHPUT_MEASUREMENT_STORED,Ie,k)}},O=(0,M.Z)(Oe).getInstance().getLogger(k),je(),k}Hi.__dashjs_factory_name="ContentSteeringController";var Vi=U.Z.getSingletonFactory(Hi);function Er(){var k,O,j,V=this.context,W=(0,qe.Z)(V).getInstance();return k={select:function(ee){if(!ee||ee.length===0)return null;var H=null;return W.get().streaming.applyContentSteering&&(H=function(re){var he=j.getCurrentSteeringResponseData();return he&&he.pathwayPriority&&he.pathwayPriority.length>0?function(){for(var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ie=0,_e=null,ye=function(){var ze=Ae[ie],Oe=Te.findIndex(function(Ze){return Ze.serviceLocation&&Ze.serviceLocation===ze});if(Oe!==-1&&!O.contains(Te[Oe].serviceLocation))return _e=Te[Oe],"break";ie+=1};ie<Ae.length&&ye()!=="break";);return _e}(he.pathwayPriority,re):null}(ee)),H||(H=function(re){return re[0]}(ee)),H},setConfig:function(ee){ee.blacklistController&&(O=ee.blacklistController),ee.contentSteeringController&&(j=ee.contentSteeringController)},reset:function(){O.reset()}},O=qs(V).create({updateEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),j=Vi(V).getInstance(),k}Er.__dashjs_factory_name="LocationSelector";var Po=U.Z.getClassFactory(Er);function yc(){var k,O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze=this.context,Oe=(0,m.Z)(ze).getInstance(),Ze=(0,wt.Z)(ze).getInstance();function We(){j=NaN,H=!1,W=!0,ee=!1,Se()}function Se(){V!==null&&(clearTimeout(V),V=null)}function ke(xe){Se(),ee||(isNaN(xe)&&!isNaN(j)&&(xe=1e3*j),isNaN(xe)||(O.debug("Refresh manifest in "+xe+" milliseconds."),V=setTimeout(le,xe)))}function Ie(){var xe=arguments.length>0&&arguments[0]!==void 0&&arguments[0];H=!0;var je=he.getValue(),Me=je.url,ve=null,De=Te.getPatchLocation(je),$e=Ae.select(De),mt=null;if($e&&!xe)Me=$e.url,ve=$e.serviceLocation,mt=$e.queryParams;else{var ct=Ge(je),yt=Ae.select(ct);yt&&(Me=yt.url,ve=yt.serviceLocation,mt=yt.queryParams)}Ze.isRelative(Me)&&(Me=Ze.resolve(Me,je.url)),re.load(Me,ve,mt)}function Ge(xe){var je=Te.getLocation(xe),Me=_e.getSynthesizedLocationElements(je);return je.concat(Me)}function q(xe){if(xe){if(Te.getIsPatch(xe)){var je=xe;xe=he.getValue();var Me=Te.isPatchValid(xe,je),ve=Me;if(Me){var De=Te.getPublishTime(xe);ve=Te.applyPatchToManifest(xe,je);var $e=Te.getPublishTime(xe);ve=De.getTime()!=$e.getTime()}if(!ve)return O.debug("Patch provided is invalid, performing full manifest refresh"),void Ie(!0);xe.loadedTime=new Date}}else(xe=he.getValue()).loadedTime=new Date;if(he.getValue()&&he.getValue().type===y.Z.DYNAMIC&&xe.type===y.Z.STATIC)return Oe.trigger(T.Z.DYNAMIC_TO_STATIC),H=!1,void(ee=!0);he.setValue(xe);var mt=new Date,ct=(mt.getTime()-xe.loadedTime.getTime())/1e3;1e3*(j=Te.getManifestUpdatePeriod(xe,ct))>2147483647&&(j=2147483647e-3),Oe.trigger(T.Z.MANIFEST_UPDATED,{manifest:xe}),O.info("Manifest has been refreshed at "+mt+"["+mt.getTime()/1e3+"] "),W||ke()}function le(){W||(H?ke(ye.get().streaming.manifestUpdateRetryInterval):Ie())}function ae(xe){xe.error?xe.error.code===we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ie.error(xe.error):q(xe.manifest)}function ue(){W=!1,ke()}function te(){(W=!ye.get().streaming.scheduling.scheduleWhilePaused)&&Se()}function Pe(){H=!1}return k={initialize:function(){We(),Oe.on(T.Z.STREAMS_COMPOSED,Pe,this),Oe.on(_.Z.PLAYBACK_STARTED,ue,this),Oe.on(_.Z.PLAYBACK_PAUSED,te,this),Oe.on(T.Z.INTERNAL_MANIFEST_LOADED,ae,this)},setManifest:function(xe){q(xe)},refreshManifest:Ie,getIsUpdating:function(){return H},setConfig:function(xe){xe&&(xe.manifestModel&&(he=xe.manifestModel),xe.adapter&&(Te=xe.adapter),xe.manifestLoader&&(re=xe.manifestLoader),xe.errHandler&&(ie=xe.errHandler),xe.locationSelector&&(Ae=xe.locationSelector),xe.settings&&(ye=xe.settings),xe.contentSteeringController&&(_e=xe.contentSteeringController))},reset:function(){Oe.off(_.Z.PLAYBACK_STARTED,ue,this),Oe.off(_.Z.PLAYBACK_PAUSED,te,this),Oe.off(T.Z.STREAMS_COMPOSED,Pe,this),Oe.off(T.Z.INTERNAL_MANIFEST_LOADED,ae,this),We()}},O=(0,M.Z)(ze).getInstance().getLogger(k),Ae=Po(ze).create(),k}yc.__dashjs_factory_name="ManifestUpdater";var Ka=U.Z.getClassFactory(yc);function _s(){var k,O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze,Oe,Ze=this.context,We=(0,m.Z)(Ze).getInstance(),Se=(0,wt.Z)(Ze).getInstance();function ke(){re=[],he=[],Ae=null,Te=null,_e=null,ie=NaN,j=!1,V=!1,ye=W.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Ie(){W.get().streaming.utcSynchronization.enabled&&!j&&!V&&_e&&_e.value&&_e.schemeIdUri&&!isNaN(ie)&&!isNaN(W.get().streaming.utcSynchronization.backgroundAttempts)&&(Te&&(Date.now()-Te)/1e3<30||(re=[],V=!0,Ge(isNaN(W.get().streaming.utcSynchronization.backgroundAttempts)?2:W.get().streaming.utcSynchronization.backgroundAttempts)))}function Ge(yt){try{if(yt<=0)return void mt();var pt=Date.now();ee[_e.schemeIdUri](_e.value,function(Gt){var Vt=Date.now(),jt=le(pt,Vt,Gt);re.push(jt),Ge(yt-1)},function(){mt()})}catch(Gt){mt()}}function q(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,pt=yt||0;if(!he||he.length===0||pt>=he.length)ae();else{var Gt=he[pt];if(Gt)if(ee.hasOwnProperty(Gt.schemeIdUri)){var Vt=new Date().getTime();ee[Gt.schemeIdUri](Gt.value,function(jt){var Zt=new Date().getTime(),xn=le(Vt,Zt,jt);_e=Gt,ae(xn)},function(){q(pt+1)})}else q(pt+1);else ae()}}function le(yt,pt,Gt){return Gt-(pt-(pt-yt)/2)}function ae(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,pt=isNaN(yt);pt&&W.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?De():$e(pt,yt)}function ue(yt){var pt=Date.parse(yt);return isNaN(pt)&&(pt=function(Gt){var Vt,jt,Zt=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(Gt);return Vt=Date.UTC(parseInt(Zt[1],10),parseInt(Zt[2],10)-1,parseInt(Zt[3],10),parseInt(Zt[4],10),parseInt(Zt[5],10),Zt[6]&&(parseInt(Zt[6],10)||0),Zt[7]&&1e3*parseFloat(Zt[7])||0),Zt[9]&&Zt[10]&&(jt=60*parseInt(Zt[9],10)+parseInt(Zt[10],10),Vt+=(Zt[8]==="+"?-1:1)*jt*60*1e3),new Date(Vt).getTime()}(yt)),pt}function te(yt){return Date.parse(yt)}function Pe(yt){return Date.parse(yt)}function xe(yt,pt,Gt){Gt()}function je(yt,pt,Gt){var Vt=ue(yt);isNaN(Vt)?Gt():pt(Vt)}function Me(yt,pt,Gt,Vt,jt){var Zt,xn,at=!1,St=new XMLHttpRequest,Qt=jt?st.w.HEAD:st.w.GET,Pt=pt.match(/\S+/g);if(pt=Pt.shift(),Zt=function(){at||(at=!0,Pt.length?Me(yt,Pt.join(" "),Gt,Vt,jt):Vt())},xn=function(){var an,Jt;St.status===200&&(an=jt?St.getResponseHeader("Date"):St.response,Jt=yt(an),isNaN(Jt)||(Gt(Jt),at=!0))},Se.isRelative(pt)){var un=Oe.resolve();un&&(pt=Se.resolve(pt,un.url))}St.open(Qt,pt),St.timeout=5e3,St.onload=xn,St.onloadend=Zt,St.send()}function ve(yt,pt,Gt){Me(Pe,yt,pt,Gt,!0)}function De(){var yt=H.getLatestMPDRequestHeaderValueByID("Date"),pt=yt!==null?new Date(yt).getTime():Number.NaN;isNaN(pt)?$e(!0):$e(!1,pt-Date.now())}function $e(yt,pt){if(isNaN(ie)||isNaN(pt)||yt||function(Vt){try{var jt,Zt=ct(Vt),xn=isNaN(ye)?30:ye,at=isNaN(W.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:W.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,St=isNaN(W.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:W.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Qt=isNaN(W.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:W.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Zt?(jt=Math.min(xn*at,St),O.debug("Increasing timeBetweenSyncAttempts to ".concat(jt))):(jt=Math.max(xn/at,Qt),O.debug("Decreasing timeBetweenSyncAttempts to ".concat(jt))),ye=jt}catch(Pt){}}(pt),!yt&&!isNaN(pt)){Ae=Date.now(),j=!1;var Gt=isNaN(ie);ie=pt,Gt&&Ie(),O.debug("Completed UTC sync. Setting client - server offset to ".concat(pt))}yt&&(_e=null,j=!1,ze.error(new ce.Z(we.TIME_SYNC_FAILED_ERROR_CODE,we.TIME_SYNC_FAILED_ERROR_MESSAGE))),We.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:pt}),We.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED)}function mt(){if(re&&re.length!==0){var yt=re.reduce(function(pt,Gt){return pt+Gt},0)/re.length;ct(yt)?O.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(O.debug("Completed background UTC sync. Setting client - server offset to ".concat(yt)),ie=yt,We.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ie})),V=!1,Te=Date.now()}}function ct(yt){try{if(isNaN(ie))return!0;var pt=W.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(W.get().streaming.utcSynchronization.maximumAllowedDrift)?W.get().streaming.utcSynchronization.maximumAllowedDrift:100;return yt>=ie-pt&&yt<=ie+pt}catch(Gt){return!0}}return k={initialize:function(){ke(),ee={"urn:mpeg:dash:utc:http-head:2014":ve,"urn:mpeg:dash:utc:http-xsdate:2014":Me.bind(null,ue),"urn:mpeg:dash:utc:http-iso:2014":Me.bind(null,te),"urn:mpeg:dash:utc:direct:2014":je,"urn:mpeg:dash:utc:http-head:2012":ve,"urn:mpeg:dash:utc:http-xsdate:2012":Me.bind(null,ue),"urn:mpeg:dash:utc:http-iso:2012":Me.bind(null,te),"urn:mpeg:dash:utc:direct:2012":je,"urn:mpeg:dash:utc:http-ntp:2014":xe,"urn:mpeg:dash:utc:ntp:2014":xe,"urn:mpeg:dash:utc:sntp:2014":xe}},attemptSync:function(yt,pt){he=yt,j||(function(Gt){try{if(!Gt||!W.get().streaming.utcSynchronization.enabled)return!1;var Vt=isNaN(ye)?30:ye;return!(Ae&&Vt&&!isNaN(Vt))||(Date.now()-Ae)/1e3>=Vt}catch(jt){return!0}}(pt)?(j=!0,q()):We.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(yt){yt&&(yt.dashMetrics&&(H=yt.dashMetrics),yt.baseURLController&&(Oe=yt.baseURLController),yt.errHandler&&(ze=yt.errHandler),yt.settings&&(W=yt.settings))},reset:function(){ke(),We.off(T.Z.ATTEMPT_BACKGROUND_SYNC,Ie,k)}},O=(0,M.Z)(Ze).getInstance().getLogger(k),We.on(T.Z.ATTEMPT_BACKGROUND_SYNC,Ie,k),k}_s.__dashjs_factory_name="TimeSyncController";var Ia=U.Z.getSingletonFactory(_s);Ia.HTTP_TIMEOUT_MS=5e3,U.Z.updateSingletonFactory(_s.__dashjs_factory_name,Ia);var yf=Ia;function Ec(){var k,O,j,V,W,ee=this.context,H=(0,m.Z)(ee).getInstance();return k={attachMediaSource:function(re){var he=window.URL.createObjectURL(O);return re.setSource(he),V==="managedMediaSource"&&(re.setDisableRemotePlayback(!0),O.addEventListener("startstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),O.addEventListener("endstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),he},createMediaSource:function(){var re="WebKitMediaSource"in window,he="MediaSource"in window;return"ManagedMediaSource"in window?(O=new ManagedMediaSource,V="managedMediaSource",W.info("Created ManagedMediaSource")):he?(O=new MediaSource,V="mediaSource",W.info("Created MediaSource")):re&&(O=new WebKitMediaSource,W.info("Created WebkitMediaSource")),O},detachMediaSource:function(re){re.setSource(null)},setConfig:function(re){re&&re.settings&&(j=re.settings)},setDuration:function re(he){O&&O.readyState==="open"&&(he===null&&isNaN(he)||O.duration!==he&&(he!==1/0||j.get().streaming.buffer.mediaSourceDurationInfinity||(he=Math.pow(2,32)),function(Ae){for(var Te=Ae.sourceBuffers,ie=0;ie<Te.length;ie++)if(Te[ie].updating)return!0;return!1}(O)?setTimeout(re.bind(null,he),50):(W.info("Set MediaSource duration:"+he),O.duration=he)))},setSeekable:function(re,he){O&&typeof O.setLiveSeekableRange=="function"&&typeof O.clearLiveSeekableRange=="function"&&O.readyState==="open"&&re>=0&&re<he&&(O.clearLiveSeekableRange(),O.setLiveSeekableRange(re,he))},signalEndOfStream:function(re){if(re&&re.readyState==="open"){for(var he=re.sourceBuffers,Ae=0;Ae<he.length;Ae++)if(he[Ae].updating||he[Ae].buffered.length===0)return;W.info("call to mediaSource endOfStream"),re.endOfStream()}}},W=(0,M.Z)(ee).getInstance().getLogger(k),k}Ec.__dashjs_factory_name="MediaSourceController";var Gs=U.Z.getSingletonFactory(Ec);function lo(){var k,O,j,V,W,ee,H,re,he,Ae,Te,ie="urn:mpeg:dash:event:2012",_e="discarded",ye="updated",ze="added",Oe=this.context,Ze=(0,m.Z)(Oe).getInstance();function We(){if(!H||!re)throw new Error("setConfig function has to be called previously")}function Se(){Te=!1,j={},V={},W=null,Ae=!1,ee=Date.now()/1e3}function ke(){try{if(!Ae){Ae=!0;var xe=re.getTime(),je=xe-ee;je=ee>0?Math.max(0,je):0,Ie(V,je,xe),Ie(j,je,xe),Ge(V),Ge(j),ee=xe,Ae=!1}}catch(Me){Ae=!1,O.error(Me)}}function Ie(xe,je,Me){try{ue(xe,function(ve){if(ve!==void 0){var De=isNaN(ve.duration)?0:ve.duration;ve.calculatedPresentationTime<=Me&&ve.calculatedPresentationTime+je+De>=Me?Pe(ve,_.Z.EVENT_MODE_ON_START):(te(Me,De+je,ve.calculatedPresentationTime)||function($e){try{var mt=$e.eventStream.period.start+$e.eventStream.period.duration;return $e.calculatedPresentationTime>mt}catch(ct){return O.error(ct),!1}}(ve))&&(O.debug("Removing event ".concat(ve.id," from period ").concat(ve.eventStream.period.id," as it is expired or invalid")),function($e,mt){try{var ct=mt.eventStream.schemeIdUri,yt=mt.eventStream.period.id,pt=mt.eventStream.value,Gt=mt.id;$e[yt][ct]=$e[yt][ct].filter(function(Vt){return pt&&Vt.eventStream.value&&Vt.eventStream.value!==pt||Vt.id!==Gt}),$e[yt][ct].length===0&&delete $e[yt][ct]}catch(Vt){O.error(Vt)}}(xe,ve))}})}catch(ve){O.error(ve)}}function Ge(xe){try{for(var je in xe)xe.hasOwnProperty(je)&&Object.keys(xe[je]).length===0&&delete xe[je]}catch(Me){O.error(Me)}}function q(xe,je){var Me=arguments.length>2&&arguments[2]!==void 0&&arguments[2],ve=xe.eventStream.schemeIdUri,De=xe.eventStream.value,$e=xe.id,mt=_e;je[ve]||(je[ve]=[]);var ct=je[ve].findIndex(function(pt){return(!De||pt.eventStream.value&&pt.eventStream.value===De)&&pt.id===$e});if(ct===-1)je[ve].push(xe),xe.triggeredReceivedEvent=!1,xe.triggeredStartEvent=!1,mt=ze;else if(Me){var yt=je[ve][ct];xe.triggeredReceivedEvent=yt.triggeredReceivedEvent,xe.triggeredStartEvent=yt.triggeredStartEvent,je[ve][ct]=xe,mt=ye}return mt}function le(xe){try{if(xe.eventStream.value==1){var je,Me=xe.calculatedPresentationTime;je=xe.calculatedPresentationTime==4294967295?NaN:xe.calculatedPresentationTime+xe.duration,Ze.trigger(_.Z.MANIFEST_VALIDITY_CHANGED,{id:xe.id,validUntil:Me,newDuration:je,newManifestValidAfter:NaN},{mode:_.Z.EVENT_MODE_ON_START})}}catch(ve){O.error(ve)}}function ae(xe){try{var je=re.getTime();ue(xe,function(Me){var ve=Me.eventStream&&Me.eventStream.period&&!isNaN(Me.eventStream.period.duration)?Me.eventStream.period.duration:NaN,De=Me.eventStream&&Me.eventStream.period&&!isNaN(Me.eventStream.period.start)?Me.eventStream.period.start:NaN;if(!isNaN(ve)&&!isNaN(De)){var $e=Me.calculatedPresentationTime;Math.abs($e-je)<300&&Pe(Me,_.Z.EVENT_MODE_ON_START)}})}catch(Me){O.error(Me)}}function ue(xe,je){try{if(xe)for(var Me=Object.keys(xe),ve=0;ve<Me.length;ve++)for(var De=xe[Me[ve]],$e=Object.keys(De),mt=0;mt<$e.length;mt++)De[$e[mt]].forEach(function(ct){ct!==void 0&&je(ct)})}catch(ct){O.error(ct)}}function te(xe,je,Me){try{return xe-je>Me}catch(ve){return O.error(ve),!1}}function Pe(xe,je){try{var Me=re.getTime(),ve=xe.id;if(je===_.Z.EVENT_MODE_ON_RECEIVE&&!xe.triggeredReceivedEvent)return O.debug("Received event ".concat(ve)),xe.triggeredReceivedEvent=!0,void Ze.trigger(xe.eventStream.schemeIdUri,{event:xe},{mode:je});xe.triggeredStartEvent||(xe.eventStream.schemeIdUri===ie&&xe.eventStream.value==1?xe.duration===0&&xe.presentationTimeDelta===0||(O.debug("Starting manifest refresh event ".concat(ve," at ").concat(Me)),function(){try{We(),H.refreshManifest()}catch(De){O.error(De)}}()):xe.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&xe.eventStream.value==1?(O.debug("Starting callback event ".concat(ve," at ").concat(Me)),function(De){try{(0,cn.Z)(Oe).create({}).load({method:"get",url:De,request:{responseType:"arraybuffer"}})}catch($e){O.error($e)}}(xe.messageData)):(O.debug("Starting event ".concat(ve," from period ").concat(xe.eventStream.period.id," at ").concat(Me)),Ze.trigger(xe.eventStream.schemeIdUri,{event:xe},{mode:je})),xe.triggeredStartEvent=!0)}catch(De){O.error(De)}}return k={addInlineEvents:function(xe,je){try{if(We(),j[je]||(j[je]={}),xe)for(var Me=0;Me<xe.length;Me++){var ve=xe[Me];if(!te(re.getTime(),isNaN(ve.duration)?0:ve.duration,ve.calculatedPresentationTime)){var De=q(ve,j[je],!0);De===ze?(O.debug("Added inline event with id ".concat(ve.id," from period ").concat(je)),Pe(ve,_.Z.EVENT_MODE_ON_RECEIVE)):De===ye&&O.debug("Updated inline event with id ".concat(ve.id," from period ").concat(je))}}}catch($e){throw $e}},addInbandEvents:function(xe,je){try{We(),V[je]||(V[je]={});for(var Me=0;Me<xe.length;Me++){var ve=xe[Me];te(re.getTime(),isNaN(ve.duration)?0:ve.duration,ve.calculatedPresentationTime)||(q(ve,V[je],!1)===ze?(ve.eventStream.schemeIdUri===ie&&le(ve),O.debug("Added inband event with id ".concat(ve.id," from period ").concat(je)),Pe(ve,_.Z.EVENT_MODE_ON_RECEIVE)):O.debug("Inband event with scheme_id_uri ".concat(ve.eventStream.schemeIdUri,", value ").concat(ve.eventStream.value,", period id ").concat(je," and event id ").concat(ve.id," was ignored because it has been added before.")))}ke()}catch(De){throw De}},getInbandEvents:function(){return V},getInlineEvents:function(){return j},start:function(){try{We(),O.debug("Start Event Controller");var xe=he.get().streaming.eventControllerRefreshDelay;Te||isNaN(xe)||(Te=!0,W=setInterval(ke,xe))}catch(je){throw je}},setConfig:function(xe){try{if(!xe)return;xe.manifestUpdater&&(H=xe.manifestUpdater),xe.playbackController&&(re=xe.playbackController),xe.settings&&(he=xe.settings)}catch(je){throw je}},reset:function(){(function(){try{W!==null&&Te&&(clearInterval(W),W=null,Te=!1,function(){try{ae(V),ae(j)}catch(xe){O.error(xe)}}())}catch(xe){throw xe}})(),Se()}},O=(0,M.Z)(Oe).getInstance().getLogger(k),Se(),k}lo.__dashjs_factory_name="EventController";var Ef=U.Z.getSingletonFactory(lo),Hs={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Ih(k,O){(O==null||O>k.length)&&(O=k.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=k[j];return V}function _c(){var k,O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke,Ie,Ge,q,le,ae,ue,te,Pe,xe,je,Me,ve,De,$e,mt,ct,yt,pt,Gt,Vt,jt,Zt,xn,at,St,Qt,Pt,un,an=this.context,Jt=(0,m.Z)(an).getInstance();function Bn(){if(!(ee&&ee.hasOwnProperty("load")&&Ie&&Ie.hasOwnProperty("initialize")&&Ie.hasOwnProperty("reset")&&Ie.hasOwnProperty("getClientTimeOffset")&&H&&ke&&he&&De))throw new Error(E.Z.MISSING_CONFIG_ERROR)}function kn(){if(!W||!W.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function mr(){(function(){try{var xt=re.getStreamsInfo();if(!q&&xt.length===0)throw new Error("There are no periods in the MPD");q&&xt.length>0&&he.updateManifestUpdateInfo({currentTime:De.getTime(),buffered:ve.getBufferRange(),presentationStartTime:xt[0].start,clientTimeOffset:Ie.getClientTimeOffset()}),Ge.length>0&&function(br){br.length!==0?Ge=Ge.filter(function(Sn){var or=br.filter(function(Jr){return Jr.id===Sn.getId()}).length>0||Sn.getId()===q.getId();return or||(O.debug("Removing stream ".concat(Sn.getId())),Sn.reset(!0)),or}):O.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(xt);for(var Wt=[],Xn=0,Jn=xt.length;Xn<Jn;Xn++){var Tn=xt[Xn];Wt.push(bt(Tn)),he.addManifestUpdateStreamInfo(Tn)}Promise.all(Wt).then(function(){return new Promise(function(br,Sn){q?br():tn(xt,br,Sn)})}).then(function(){Jt.trigger(T.Z.STREAMS_COMPOSED),Cn()}).catch(function(br){throw br})}catch(br){ke.error(new ce.Z(we.MANIFEST_ERROR_ID_NOSTREAMS_CODE,br.message+" nostreamscomposed",H.getValue())),je=!0,ji()}})()}function vr(){St=!0}function bt(xt){var Wt=Zl(xt.id);return Wt?Wt.updateData(xt):(Wt=ei(an).create({manifestModel:H,mediaPlayerModel:mt,dashMetrics:he,manifestUpdater:W,adapter:re,timelineConverter:Ie,capabilities:j,capabilitiesFilter:V,errHandler:ke,baseURLController:_e,segmentBaseController:ye,textController:ae,abrController:Oe,playbackController:De,eventController:We,mediaController:Ze,protectionController:le,videoModel:ve,streamInfo:xt,settings:at}),Ge.push(Wt),Wt.initialize(),Promise.resolve())}function tn(xt,Wt,Xn){try{Dn();var Jn=he.getCurrentDVRInfo().range;if(Jn.end<Jn.start){Qt&&clearTimeout(Qt);var Tn=Math.min(1e3*(-1*(Jn.end-Jn.start)+2),2147483647);return O.debug("Waiting for ".concat(Tn," ms before playback can start")),Jt.trigger(T.Z.AST_IN_FUTURE,{delay:Tn}),void(Qt=setTimeout(function(){tn(xt,Wt,Xn)},Tn))}at.get().streaming.applyProducerReferenceTime&&$e.calculateProducerReferenceTimeOffsets(xt);var br=xt[0].manifestInfo;if(at.get().streaming.applyServiceDescription&&$e.applyServiceDescription(br),re.getIsDynamic()){var Sn=ol(xt,br);De.computeAndSetLiveDelay(Sn,br)}(at.get().streaming.applyContentSteering&&ie.shouldQueryBeforeStart()?ie.loadSteeringData():Promise.resolve()).then(function(){var or=H.getValue();or&&_e.update(or),qt(),Wt()}).catch(function(or){O.error(or),qt(),Wt()})}catch(or){Xn(or)}}function qt(){var xt=function(){var Jn;if(re.getIsDynamic()){var Tn=he.getCurrentDVRInfo();Jn=(Tn&&Tn.range?Tn.range.end:0)-De.getOriginalLiveDelay();var br=Tn?Tn.range:null;if(br){if(isNaN(Pt)&&Pt.toString().indexOf("posix:")===-1){var Sn=Lo(!0);isNaN(Sn)||(O.info("Start time from URI parameters: ".concat(Sn)),Jn=Math.min(Jn,Sn))}else{O.info("Start time provided by the app: ".concat(Pt));var or=zi(!0,Pt);isNaN(or)||(Jn=Math.min(Jn,or))}var Jr=at.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;Jn=Math.max(Jn,br.start+Jr)}}else if(Jn=Qs()[0].getStreamInfo().start,isNaN(Pt)){var Js=Lo(!1);isNaN(Js)||(O.info("Start time from URI parameters: ".concat(Js)),Jn=Math.max(Jn,Js))}else{O.info("Start time provided by the app: ".concat(Pt));var kr=zi(!1,Pt);isNaN(kr)||(Jn=Math.max(Jn,kr))}return Jn}(),Wt=On(xt),Xn=Wt!==null?Wt:Ge[0];Jt.trigger(T.Z.INITIAL_STREAM_SWITCH,{startTime:xt}),mn(Xn,null,xt),Vt||(Vt=setInterval(function(){!Pe&&De.getTimeToStreamEnd()<=0&&!De.isSeeking()&&Jt.trigger(T.Z.PLAYBACK_ENDED,{isLast:ca().isLast})},200))}function mn(xt,Wt,Xn){try{if(Pe||!xt||Wt===xt&&xt.getIsActive())return;Pe=!0,Jt.trigger(T.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:Wt?Wt.getStreamInfo():null,toStreamInfo:xt.getStreamInfo()});var Jn=!1;q=xt,Wt&&(Jn=Nn(xt,Wt),Wt.deactivate(Jn)),Xn=isNaN(Xn)?!Jn&&Wt?xt.getStreamInfo().start:NaN:Xn,O.info("Switch to stream ".concat(xt.getId(),". Seektime is ").concat(Xn,", current playback time is ").concat(De.getTime(),". Seamless period switch is set to ").concat(Jn)),Zt=Zt.filter(function(Tn){return Tn.getId()!==q.getId()}),De.initialize(ca(),!!Wt),ve.getElement()?bn(Xn,Jn,!1):Zn(Xn,Jn)}catch(Tn){Pe=!1}}function bn(xt,Wt){var Xn,Jn=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function Tn(){if(Me&&Me.readyState==="open"){O.debug("MediaSource is open!"),window.URL.revokeObjectURL(Xn),Me.removeEventListener("sourceopen",Tn),Me.removeEventListener("webkitsourceopen",Tn),Xr();var Sn=he.getCurrentDVRInfo();Ae.setSeekable(Sn.range.start,Sn.range.end),Jn?(isNaN(xt)||De.seek(xt,!0,!0),q.setMediaSource(Me).then(function(){q.initializeForTextWithMediaSource(Me)})):Zn(xt,Wt)}}function br(){Me.addEventListener("sourceopen",Tn,!1),Me.addEventListener("webkitsourceopen",Tn,!1),Xn=Ae.attachMediaSource(ve),O.debug("MediaSource attached to element.  Waiting on open...")}Me?Wt?Zn(xt,Wt):(Ae.detachMediaSource(ve),br()):(Me=Ae.createMediaSource(),br())}function Zn(xt,Wt){q.activate(Me,Wt?jt:void 0,xt).then(function(Xn){if(Xn){var Jn=Object.keys(Xn);Jn.length>0&&Xn[Jn[0]].getBuffer().changeType&&(xn=!0),jt=Xn}isNaN(xt)||(Jt.trigger(T.Z.SEEK_TARGET,{time:xt},{streamId:q.getId()}),De.seek(xt,!1,!0),q.startScheduleControllers()),Pe=!1,Jt.trigger(T.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:ca()})})}function Fn(xt){var Wt=On(xt.seekTime);Wt&&Wt!==q?Wt&&Wt!==q&&(qn(),function(Xn,Jn){var Tn=Xn&&!isNaN(Xn.seekTime)?Xn.seekTime:NaN,br=q.getProcessors().map(function(Sn){return Sn.prepareOuterPeriodPlaybackSeeking(Xn)});Promise.all(br).then(function(){mn(Jn,q,Tn)}).catch(function(Sn){ke.error(Sn)})}(xt,Wt)):(qn(),function(Xn){q.getProcessors().forEach(function(Jn){return Jn.prepareInnerPeriodPlaybackSeeking(Xn)}),To(nt.USER_REQUEST_STOP_REASON)}(xt)),$a(ut.SEEK_START_REASON)}function qn(){Yn()}function Yn(){Zt&&Zt.length>0&&(Zt.forEach(function(xt){xt.deactivate(!0)}),Zt=[])}function en(xt){if(xt.newMediaInfo.streamInfo.id===q.getId()){if(Yn(),at.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&xt.oldMediaInfo&&xt.oldMediaInfo.codec!==xt.newMediaInfo.codec){var Wt=De.getTime();return q.deactivate(!1),void bn(Wt,!1,!1)}q.prepareTrackChange(xt)}}function Nn(xt,Wt){try{return at.get().streaming.buffer.reuseExistingSourceBuffers&&(Wt.isProtectionCompatible(xt)||St)&&(xn&&at.get().streaming.buffer.useChangeTypeForTrackSwitch||Wt.isMediaCodecCompatible(xt,Wt))}catch(Xn){return!1}}function Pn(xt){var Wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Me&&!xt.getPreloaded()){var Xn=Nn(xt,Wt);Xn&&xt.startPreloading(Me,jt).then(function(){Zt.push(xt)})}}function On(xt){if(isNaN(xt))return null;for(var Wt=Ge.length,Xn=0;Xn<Wt;Xn++){var Jn=Ge[Xn];if(xt<parseFloat((Jn.getStartTime()+Jn.getDuration()).toFixed(5)))return Jn}return null}function Dn(){try{var xt=re.getIsDynamic(),Wt=re.getStreamsInfo()[0].manifestInfo,Xn=De.getTime(),Jn=Ie.calcTimeShiftBufferWindow(Ge,xt),Tn=oi();if(Jn.start===void 0||Jn.end===void 0)return;Tn&&Tn.length!==0?Tn.forEach(function(br){he.addDVRInfo(br.getType(),Xn,Wt,Jn)}):he.addDVRInfo(E.Z.VIDEO,Xn,Wt,Jn)}catch(br){}}function Ct(xt){if(pt&&te){var Wt=mt.getInitialBufferLevel(),Xn=[E.Z.TEXT];(isNaN(Wt)||Wt<=De.getBufferLevel(Xn)||re.getIsDynamic()&&Wt>De.getLiveDelay())&&(pt=!1,$a(ut.INITIAL_PLAYOUT_START_REASON),De.play())}xt&&xt.mediaType&&he.addBufferLevel(xt.mediaType,new Date,1e3*xt.bufferLevel)}function et(xt){xt.streamInfo.id===q.getId()&&xt.reason&&xt.reason.forceReplace&&Yn(),Zl(xt.streamInfo.id).prepareQualityChange(xt)}function zt(){if(re.getIsDynamic()&&De.getOriginalLiveDelay()!==0&&q){var xt=re.getStreamsInfo();if(xt.length>0){var Wt=xt[0].manifestInfo,Xn=ol(xt,Wt);De.computeAndSetLiveDelay(Xn,Wt)}}}function Ve(){if(ko()){var xt=ve.getPlaybackQuality();xt&&he.addDroppedFrames(xt)}}function tt(){O.debug("[onPlaybackStarted]"),!pt&&yt&&$a(ut.RESUME_FROM_PAUSE_START_REASON),pt&&(pt=!1),Gt&&(Gt=!1,at.get().streaming.applyContentSteering&&!ie.shouldQueryBeforeStart()&&ie.loadSteeringData()),yt=!1}function Lt(xt){O.debug("[onPlaybackPaused]"),xt.ended||(yt=!0,To(nt.USER_REQUEST_STOP_REASON))}function yn(xt){O.debug("Stream with id ".concat(xt.streamInfo.id," finished buffering"));var Wt=xt.streamInfo.isLast;Me&&Wt?(O.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),Ae.signalEndOfStream(Me)):Cn()}function Cn(){if(q&&q.getHasFinishedBuffering())for(var xt=function(){var Tn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var br=Tn||q||null;if(br){var Sn=br.getStreamInfo();return Ge.filter(function(or){var Jr=or.getStreamInfo();return Jr.start>Sn.start&&Sn.id!==Jr.id})}}catch(or){return[]}}(q),Wt=0;Wt<xt.length;){var Xn=xt[Wt],Jn=Wt===0?q:xt[Wt-1];!Xn.getPreloaded()&&Jn.getHasFinishedBuffering()&&Me&&Pn(Xn,Jn),Wt+=1}}function yr(){Vt&&(clearInterval(Vt),Vt=null)}function oi(){return q?q.getProcessors():[]}function gi(xt){if(q&&!q.getIsEndedEventSignaled()){q.setIsEndedEventSignaled(!0);var Wt=function(){var Xn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Jn=Xn||q||null;if(!Jn)return null;for(var Tn=Jn.getStreamInfo(),br=Tn.start,Sn=0,or=-1,Jr=NaN;Sn<Ge.length;){var Js=Ge[Sn].getStreamInfo(),kr=Js.start-br;kr>0&&(isNaN(Jr)||kr<Jr)&&Tn.id!==Js.id&&(Jr=kr,or=Sn),Sn+=1}return or>=0?Ge[or]:null}();Wt?(O.debug("StreamController onEnded, found next stream with id ".concat(Wt.getStreamInfo().id,". Switching from ").concat(q.getStreamInfo().id," to ").concat(Wt.getStreamInfo().id)),mn(Wt,q,NaN)):(O.debug("StreamController no next stream found"),q.setIsEndedEventSignaled(!1)),To(Wt?nt.END_OF_PERIOD_STOP_REASON:nt.END_OF_CONTENT_STOP_REASON)}xt&&xt.isLast&&(yr(),ie.stopSteeringRequestTimer())}function Xr(xt){var Wt=xt||ca().manifestInfo.duration;Ae.setDuration(Wt)}function Lo(xt){var Wt=ze.getURIFragmentData();if(!Wt||!Wt.t)return NaN;var Xn=Qs()[0].getStreamInfo().start;return Wt.t=Wt.t.split(",")[0],bs(xt,Wt.t,Xn)}function zi(xt,Wt){var Xn=0;return xt||(Xn=Qs()[0].getStreamInfo().start),bs(xt,Wt,Xn)}function bs(xt,Wt,Xn){var Jn=re.getRegularPeriods()[0],Tn=Wt.toString(),br=Tn.indexOf("posix:")!==-1?Tn.substring(6)==="now"?Date.now()/1e3:parseFloat(Tn.substring(6)):NaN;return xt&&!isNaN(br)?Ie.calcPresentationTimeFromWallTime(new Date(1e3*br),Jn):parseFloat(Tn)+Xn}function ol(xt,Wt){try{var Xn=NaN;if(Wt&&!isNaN(Wt.maxFragmentDuration)&&isFinite(Wt.maxFragmentDuration))return Wt.maxFragmentDuration;if(xt&&xt.length===1){var Jn=xt[0],Tn=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT].reduce(function(Sn,or){var Jr=re.getMediaInfoForType(Jn,or);return Jr&&Jr.isFragmented!==!1&&Sn.push(Jr),Sn},[]).reduce(function(Sn,or){var Jr=re.getVoRepresentations(or);return Jr&&Jr.length>0&&Jr.forEach(function(Js){Js&&Sn.push(Js)}),Sn},[]).reduce(function(Sn,or){var Jr=re.convertRepresentationToRepresentationInfo(or);return Jr&&Jr.fragmentDuration&&!isNaN(Jr.fragmentDuration)&&Sn.push(Jr.fragmentDuration),Sn},[]);Xn=Math.max.apply(Math,function(Sn){if(Array.isArray(Sn))return Ih(Sn)}(br=Tn)||function(Sn){if(typeof Symbol<"u"&&Symbol.iterator in Object(Sn))return Array.from(Sn)}(br)||function(Sn,or){if(Sn){if(typeof Sn=="string")return Ih(Sn,or);var Jr=Object.prototype.toString.call(Sn).slice(8,-1);return Jr==="Object"&&Sn.constructor&&(Jr=Sn.constructor.name),Jr==="Map"||Jr==="Set"?Array.from(Sn):Jr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Jr)?Ih(Sn,or):void 0}}(br)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(Xn)?Xn:NaN}catch(Sn){return NaN}var br}function la(xt){if(xt.error)je=!0,ji();else{O.info("Manifest updated... updating data system wide.");var Wt=xt.manifest;re.updatePeriods(Wt);var Xn=re.getUTCTimingSources();!re.getIsDynamic()||Xn&&Xn.length!==0||Jt.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Hs.LEVELS.WARNING,event:Hs.EVENTS.NO_UTC_TIMING_ELEMENT});var Jn=re.getIsDynamic()?Xn.concat(ct.getUTCTimingSources()):Xn;V.filterUnsupportedFeatures(Wt).then(function(){_e.initialize(Wt),Te.attemptSync(Jn,re.getIsDynamic())})}}function ko(){return!!q&&q.getHasVideoTrack()}function Cs(){return!!q&&q.getHasAudioTrack()}function To(xt,Wt){Wt=Wt||new Date,oi().forEach(function(Xn){Xn.finalisePlayList(Wt,xt)}),he.addPlayList()}function $a(xt){he.createPlaylistMetrics(1e3*De.getTime(),xt)}function Cu(xt){if(xt.error){var Wt="";switch(xt.error.code){case 1:Wt="MEDIA_ERR_ABORTED";break;case 2:Wt="MEDIA_ERR_NETWORK";break;case 3:Wt="MEDIA_ERR_DECODE",un.counts.mediaErrorDecode+=1;break;case 4:Wt="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:Wt="MEDIA_ERR_ENCRYPTED";break;default:Wt="UNKNOWN"}Wt==="MEDIA_ERR_DECODE"&&at.get().errors.recoverAttempts.mediaErrorDecode>=un.counts.mediaErrorDecode?function(){O.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Xn=De.getTime();q.deactivate(!1),O.warn("MediaSource has been resetted. Resuming playback from time ".concat(Xn)),bn(Xn,!1,!1)}():(xe=!0,xt.error.message&&(Wt+=" ("+xt.error.message+")"),xt.error.msExtendedCode&&(Wt+=" (0x"+(xt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),O.fatal("Video Element Error: "+Wt),xt.error&&O.fatal(xt.error),ke.error(new ce.Z(xt.error.code,Wt)),ji())}}function ca(){return q?q.getStreamInfo():null}function Zl(xt){for(var Wt=0,Xn=Ge.length;Wt<Xn;Wt++)if(Ge[Wt].getId()===xt)return Ge[Wt];return null}function Xf(xt){isNaN(xt.newDuration)||Xr(xt.newDuration)}function Ru(){Ge=[],Pt=NaN,le=null,Pe=!1,q=null,xe=!1,je=!1,pt=!0,Gt=!0,yt=!1,te=!0,Vt=null,St=!1,xn=!1,Zt=[],Qt=null,un={counts:{mediaErrorDecode:0}}}function ji(){Bn(),Te.reset(),To(xe||je?nt.FAILURE_STOP_REASON:nt.USER_REQUEST_STOP_REASON);for(var xt=0,Wt=Ge?Ge.length:0;xt<Wt;xt++)Ge[xt].reset(xe);Jt.off(_.Z.PLAYBACK_TIME_UPDATED,Ve,k),Jt.off(_.Z.PLAYBACK_SEEKING,Fn,k),Jt.off(_.Z.PLAYBACK_ERROR,Cu,k),Jt.off(_.Z.PLAYBACK_STARTED,tt,k),Jt.off(_.Z.PLAYBACK_PAUSED,Lt,k),Jt.off(_.Z.PLAYBACK_ENDED,gi,k),Jt.off(_.Z.METRIC_ADDED,xa,k),Jt.off(_.Z.MANIFEST_VALIDITY_CHANGED,Xf,k),Jt.off(_.Z.BUFFER_LEVEL_UPDATED,Ct,k),Jt.off(_.Z.QUALITY_CHANGE_REQUESTED,et,k),T.Z.KEY_SESSION_UPDATED&&Jt.off(T.Z.KEY_SESSION_UPDATED,vr,k),Jt.off(T.Z.MANIFEST_UPDATED,la,k),Jt.off(T.Z.STREAM_BUFFERING_COMPLETED,yn,k),Jt.off(T.Z.TIME_SYNCHRONIZATION_COMPLETED,mr,k),Jt.off(T.Z.CURRENT_TRACK_CHANGED,en,k),Jt.off(T.Z.SETTING_UPDATED_LIVE_DELAY,zt,k),Jt.off(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,zt,k),_e.reset(),W.reset(),We.reset(),he.clearAllCurrentMetrics(),H.setValue(null),ee.reset(),Ie.reset(),Se.reset(),Me&&(Ae.detachMediaSource(ve),Me=null),ve=null,le&&(le=null,ue=null,H.getValue()&&Jt.trigger(T.Z.PROTECTION_DESTROYED,{data:H.getValue().url})),yr(),Jt.trigger(T.Z.STREAM_TEARDOWN_COMPLETE),Ru()}function xa(xt){if(xt.metric===P.Z.DVR_INFO){var Wt=Cs()?E.Z.AUDIO:E.Z.VIDEO;xt.mediaType===Wt&&Ae.setSeekable(xt.value.range.start,xt.value.range.end)}}function Qs(){return Ge}return k={initialize:function(xt,Wt){Bn(),te=xt,ue=Wt,Ie.initialize(),(W=Ka(an).create()).setConfig({manifestModel:H,adapter:re,manifestLoader:ee,errHandler:ke,settings:at,contentSteeringController:ie}),W.initialize(),(We=Ef(an).getInstance()).setConfig({manifestUpdater:W,playbackController:De,settings:at}),We.start(),Te.setConfig({dashMetrics:he,baseURLController:_e,errHandler:ke,settings:at}),Te.initialize(),Ae.setConfig({settings:at}),le&&(Jt.trigger(T.Z.PROTECTION_CREATED,{controller:le}),le.setMediaElement(ve.getElement()),ue&&le.setProtectionData(ue)),Jt.on(_.Z.PLAYBACK_TIME_UPDATED,Ve,k),Jt.on(_.Z.PLAYBACK_SEEKING,Fn,k),Jt.on(_.Z.PLAYBACK_ERROR,Cu,k),Jt.on(_.Z.PLAYBACK_STARTED,tt,k),Jt.on(_.Z.PLAYBACK_PAUSED,Lt,k),Jt.on(_.Z.PLAYBACK_ENDED,gi,k),Jt.on(_.Z.METRIC_ADDED,xa,k),Jt.on(_.Z.MANIFEST_VALIDITY_CHANGED,Xf,k),Jt.on(_.Z.BUFFER_LEVEL_UPDATED,Ct,k),Jt.on(_.Z.QUALITY_CHANGE_REQUESTED,et,k),T.Z.KEY_SESSION_UPDATED&&Jt.on(T.Z.KEY_SESSION_UPDATED,vr,k),Jt.on(T.Z.MANIFEST_UPDATED,la,k),Jt.on(T.Z.STREAM_BUFFERING_COMPLETED,yn,k),Jt.on(T.Z.TIME_SYNCHRONIZATION_COMPLETED,mr,k),Jt.on(T.Z.CURRENT_TRACK_CHANGED,en,k),Jt.on(T.Z.SETTING_UPDATED_LIVE_DELAY,zt,k),Jt.on(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,zt,k)},getActiveStreamInfo:ca,addDVRMetric:Dn,hasVideoTrack:ko,hasAudioTrack:Cs,getStreamById:Zl,getStreamForTime:On,getTimeRelativeToStreamId:function(xt,Wt){for(var Xn=null,Jn=0,Tn=0,br=null,Sn=0;Sn<Ge.length;Sn++){if(Tn=(Xn=Ge[Sn]).getStartTime(),br=Xn.getDuration(),Number.isFinite(Tn)&&(Jn=Tn),Xn.getId()===Wt)return xt-Jn;Number.isFinite(br)&&(Jn+=br)}return null},load:function(xt){var Wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Bn(),Pt=Wt,ee.load(xt)},loadWithManifest:function(xt){var Wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;kn(),Pt=Wt,W.setManifest(xt)},getActiveStreamProcessors:oi,setConfig:function(xt){xt&&(xt.capabilities&&(j=xt.capabilities),xt.capabilitiesFilter&&(V=xt.capabilitiesFilter),xt.manifestLoader&&(ee=xt.manifestLoader),xt.manifestModel&&(H=xt.manifestModel),xt.mediaPlayerModel&&(mt=xt.mediaPlayerModel),xt.customParametersModel&&(ct=xt.customParametersModel),xt.protectionController&&(le=xt.protectionController),xt.adapter&&(re=xt.adapter),xt.dashMetrics&&(he=xt.dashMetrics),xt.errHandler&&(ke=xt.errHandler),xt.timelineConverter&&(Ie=xt.timelineConverter),xt.videoModel&&(ve=xt.videoModel),xt.playbackController&&(De=xt.playbackController),xt.serviceDescriptionController&&($e=xt.serviceDescriptionController),xt.contentSteeringController&&(ie=xt.contentSteeringController),xt.textController&&(ae=xt.textController),xt.abrController&&(Oe=xt.abrController),xt.mediaController&&(Ze=xt.mediaController),xt.settings&&(at=xt.settings),xt.baseURLController&&(_e=xt.baseURLController),xt.uriFragmentModel&&(ze=xt.uriFragmentModel),xt.segmentBaseController&&(ye=xt.segmentBaseController),xt.manifestUpdater&&(W=xt.manifestUpdater))},setProtectionData:function(xt){ue=xt,le&&le.setProtectionData(ue)},getIsStreamSwitchInProgress:function(){return Pe},switchToVideoElement:function(xt){q&&(De.initialize(ca()),bn(xt,!1,!0))},getHasMediaOrInitialisationError:function(){return xe||je},getStreams:Qs,getActiveStream:function(){return q},getInitialPlayback:function(){return pt},getAutoPlay:function(){return te},refreshManifest:function(){W.getIsUpdating()||W.refreshManifest()},reset:ji},O=(0,M.Z)(an).getInstance().getLogger(k),Te=yf(an).getInstance(),Ae=Gs(an).getInstance(),Se=Ye(an).getInstance(),Ru(),k}_c.__dashjs_factory_name="StreamController";var bh=U.Z.getSingletonFactory(_c);function Ch(){var k,O,j,V,W,ee,H,re,he,Ae,Te,ie,_e=this.context,ye=(0,m.Z)(_e).getInstance();function ze(){ie.debug("Stopping the gap controller"),W&&(clearInterval(W),W=null),function(){ye.off(T.Z.WALLCLOCK_TIME_UPDATED,ke,this),ye.off(T.Z.INITIAL_STREAM_SWITCH,Se,this),ye.off(T.Z.PLAYBACK_SEEKING,Oe,this),ye.off(T.Z.BUFFER_REPLACEMENT_STARTED,Ze,k),ye.off(T.Z.TRACK_CHANGE_RENDERED,We,k)}(),W=null,ee=NaN,V=0,Ae=null,Te={}}function Oe(){Ae&&(clearTimeout(Ae),Ae=null)}function Ze(ue){try{if(ue.streamId!==re.getActiveStreamInfo().id||ue.mediaType!==E.Z.VIDEO&&ue.mediaType!==E.Z.AUDIO)return;ue.streamId===re.getActiveStreamInfo().id&&(Te[ue.mediaType]=!0)}catch(te){ie.error(te)}}function We(ue){ue&&ue.mediaType&&(Te[ue.mediaType]=!1)}function Se(){W||function(){try{W||(ie.debug("Starting the gap controller"),W=setInterval(function(){Ie()&&ae(H.getTime())},100))}catch(ue){}}()}function ke(){if(Ie(j.get().streaming.gaps.enableSeekFix)&&++V>=10){var ue=H.getTime();O===ue?ae(ue,!0):(O=ue,ee=NaN),V=0}}function Ie(){var ue=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!re.getActiveStream())return!1;var te=Object.keys(Te).some(function(xe){return Te[xe]}),Pe=!!ue&&Ge();return!te&&j.get().streaming.gaps.jumpGaps&&re.getActiveStreamProcessors().length>0&&(!H.isSeeking()||Pe)&&!H.isPaused()&&!re.getIsStreamSwitchInProgress()&&!re.getHasMediaOrInitialisationError()}function Ge(){var ue=re.getActiveStream(),te=parseFloat((ue.getStartTime()+ue.getDuration()).toFixed(5));return H.getTime()+j.get().streaming.gaps.threshold>=te}function q(ue,te){try{if(!ue||ue.length<=1&&te>0)return NaN;for(var Pe=NaN,xe=0;isNaN(Pe)&&xe<ue.length;){var je=xe>0?ue.end(xe-1):0;te<ue.start(xe)&&je-te<j.get().streaming.gaps.threshold&&(Pe=xe),xe+=1}return Pe}catch(Me){return null}}function le(ue,te){for(var Pe=0,xe=ue.length;Pe<xe;Pe++)if(te>=ue.start(Pe)&&te<=ue.end(Pe))return!0;return!1}function ae(ue){var te,Pe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],xe=j.get().streaming.gaps.enableStallFix,je=j.get().streaming.gaps.stallSeek,Me=j.get().streaming.gaps.smallGapLimit,ve=j.get().streaming.gaps.jumpLargeGaps,De=he.getBufferRange(),$e=NaN,mt=!1;if(te=q(De,ue),!isNaN(te)){var ct=De.start(te),yt=ct-ue;yt>0&&(yt<=Me||ve)&&($e=ct)}var pt=H.getTimeToStreamEnd();if(isNaN($e)&&Pe&&isFinite(pt)&&!isNaN(pt)&&pt<Me&&($e=parseFloat(H.getStreamEndTime().toFixed(5)),mt=!0),xe&&isNaN($e)&&Pe&&isNaN(te)&&le(De,ue)&&(je===0?(ie.warn("Toggle play pause to break stall"),he.pause(),he.play()):(ie.warn("Jumping ".concat(je,"s to break stall")),$e=ue+je)),$e>0&&ee!==$e&&$e>ue&&!Ae){var Gt=$e-ue;if(mt){var Vt=re.getStreamForTime($e),jt=Vt&&!!Vt.getPreloaded();ie.warn("Jumping to end of stream because of gap from ".concat(ue," to ").concat($e,". Gap duration: ").concat(Gt)),H.seek($e,!0,jt)}else{var Zt=H.getIsDynamic(),xn=te>0?De.end(te-1):ue,at=Zt?1e3*Math.max(0,Gt-.1):0;Ae=window.setTimeout(function(){H.seek($e,!0,!0),ie.warn("Jumping gap occuring in period ".concat(re.getActiveStream().getStreamId()," starting at ").concat(xn," and ending at ").concat($e,". Jumping by: ").concat($e-xn)),Ae=null},at)}ee=$e}}return k={reset:ze,setConfig:function(ue){ue&&(ue.settings&&(j=ue.settings),ue.playbackController&&(H=ue.playbackController),ue.streamController&&(re=ue.streamController),ue.videoModel&&(he=ue.videoModel))},initialize:function(){(function(){ye.on(T.Z.WALLCLOCK_TIME_UPDATED,ke,this),ye.on(T.Z.INITIAL_STREAM_SWITCH,Se,this),ye.on(T.Z.PLAYBACK_SEEKING,Oe,this),ye.on(T.Z.BUFFER_REPLACEMENT_STARTED,Ze,k),ye.on(T.Z.TRACK_CHANGE_RENDERED,We,k)})()}},ie=(0,M.Z)(_e).getInstance().getLogger(k),ze(),k}Ch.__dashjs_factory_name="GapController";var fm=U.Z.getSingletonFactory(Ch);function Rh(){var k,O,j,V,W,ee,H,re,he,Ae,Te=this.context,ie=(0,m.Z)(Te).getInstance();function _e(){O=!1;var Ge=dn.Z.parseUserAgent();j=Ge&&Ge.browser&&Ge.browser.name&&Ge.browser.name.toLowerCase()==="safari"}function ye(){O=!1}function ze(Ge){if(Ge.streamId===ee.getActiveStreamInfo().id&&he){var q=H.getLiveDelay();H.getBufferLevel()>q/2&&(he=!1)}}function Oe(Ge){Ge.streamId===ee.getActiveStreamInfo().id&&(he=Ge.state===P.Z.BUFFER_EMPTY)}function Ze(){re.getCatchupModeEnabled()||V.setPlaybackRate(1)}function We(){H.getIsDynamic()&&re.getCatchupModeEnabled()&&(re.getCatchupPlaybackRates().max>0||re.getCatchupPlaybackRates().min<0)&&!H.isPaused()&&!H.isSeeking()&&function(){try{return!(!H.getTime()>0||O)&&(ke()===E.Z.LIVE_CATCHUP_MODE_LOLP?function(Ge,q){try{return Math.abs(Se())>0||Ge<q}catch(le){return!1}}(H.getBufferLevel(),W.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(Se())>0}catch(Ge){return!1}}())}catch(Ge){return!1}}()&&function(){if(!O&&V){var Ge,q=V.getPlaybackRate(),le=re.getCatchupPlaybackRates(),ae=H.getBufferLevel(),ue=Se(),te=re.getCatchupMaxDrift();if(!isNaN(te)&&te>0&&ue>te)Ae.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),O=!0,H.seekToCurrentLive(!0,!1);else{var Pe=H.getCurrentLiveLatency(),xe=H.getLiveDelay();Ge=ke()===E.Z.LIVE_CATCHUP_MODE_LOLP?function(Me,ve,De,$e,mt){var ct;if(mt<$e){var yt=Math.abs(Me.min),pt=5*(mt-$e);ct=1-yt+2*yt/(1+Math.pow(Math.E,-pt)),Ae.debug("[LoL+ playback control_buffer-based] bufferLevel: "+mt+", newRate: "+ct)}else{if(Math.abs(ve-De)<=.02*De)ct=1;else{var Gt=ve-De,Vt=Gt<0?Math.abs(Me.min):Me.max,jt=5*Gt;ct=1-Vt+2*Vt/(1+Math.pow(Math.E,-jt))}Ae.debug("[LoL+ playback control_latency-based] latency: "+ve+", newRate: "+ct)}return ct}(le,Pe,xe,W.get().streaming.liveCatchup.playbackBufferMin,ae):function(Me,ve,De,$e){if(he)return 1;var mt=ve-De,ct=mt<0?Math.abs(Me.min):Me.max,yt=5*mt,pt=1-ct+2*ct/(1+Math.pow(Math.E,-yt));return H.getPlaybackStalled()&&$e<=De/2&&mt>0&&(pt=1),pt}(le,Pe,xe,ae);var je=j?.25:.02/(.5/le.max);Ge&&Math.abs(q-Ge)>=je&&(Ae.debug("[CatchupController]: Setting playback rate to ".concat(Ge)),V.setPlaybackRate(Ge))}}}()}function Se(){return H.getCurrentLiveLatency()-H.getLiveDelay()}function ke(){var Ge=W.get().streaming.liveCatchup.playbackBufferMin;return W.get().streaming.liveCatchup.mode!==E.Z.LIVE_CATCHUP_MODE_LOLP||Ge===null||isNaN(Ge)?E.Z.LIVE_CATCHUP_MODE_DEFAULT:E.Z.LIVE_CATCHUP_MODE_LOLP}function Ie(){re.getCatchupPlaybackRates(!0)}return k={reset:function(){ie.off(_.Z.BUFFER_LEVEL_UPDATED,ze,k),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,k),ie.off(_.Z.PLAYBACK_PROGRESS,We,k),ie.off(_.Z.PLAYBACK_TIME_UPDATED,We,k),ie.off(_.Z.PLAYBACK_SEEKED,ye,k),ie.off(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Ze,k),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ie,k),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ie,k),ie.off(_.Z.STREAM_INITIALIZED,Ie,k),_e(),V.setPlaybackRate(1,!0)},setConfig:function(Ge){Ge&&(Ge.settings&&(W=Ge.settings),Ge.videoModel&&(V=Ge.videoModel),Ge.streamController&&(ee=Ge.streamController),Ge.playbackController&&(H=Ge.playbackController),Ge.mediaPlayerModel&&(re=Ge.mediaPlayerModel))},initialize:function(){ie.on(_.Z.BUFFER_LEVEL_UPDATED,ze,k),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,k),ie.on(_.Z.PLAYBACK_PROGRESS,We,k),ie.on(_.Z.PLAYBACK_TIME_UPDATED,We,k),ie.on(_.Z.PLAYBACK_SEEKED,ye,k),ie.on(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Ze,k),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ie,k),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ie,k),ie.on(_.Z.STREAM_INITIALIZED,Ie,k),Ie()}},Ae=(0,M.Z)(Te).getInstance().getLogger(k),_e(),k}Rh.__dashjs_factory_name="CatchupController";var xh=U.Z.getSingletonFactory(Rh),Nh=[E.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],_f="video",jr="audio";function Mh(){var k,O,j,V,W,ee=this.context;function H(){O={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},j=[]}function re(he,Ae,Te){try{O[he][Ae]=Te/1e3}catch(ie){V.error(ie)}}return k={getServiceDescriptionSettings:function(){return O},getProducerReferenceTimeOffsets:function(){return j},calculateProducerReferenceTimeOffsets:function(he){try{var Ae=[];if(he&&he.length>0){var Te=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT],ie=W.getAvailabilityStartTime()/1e3;he.forEach(function(_e){var ye=Te.reduce(function(ze,Oe){return ze.concat(W.getAllMediaInfoForType(_e,Oe))},[]).reduce(function(ze,Oe){return W.getProducerReferenceTimes(_e,Oe).forEach(function(Ze){var We=W.getVoRepresentations(Oe);if(We&&We.length>0&&We[0].adaptation&&We[0].segmentInfoType===y.Z.SEGMENT_TEMPLATE){var Se=We[0],ke=new Date(Ze[y.Z.WALL_CLOCK_TIME]).getTime()/1e3-(Ze[y.Z.PRESENTATION_TIME]/Se[y.Z.TIMESCALE]-Se[y.Z.PRESENTATION_TIME_OFFSET]+_e.start),Ie=ie-ke;ze.push({id:Ze[y.Z.ID],to:Ie})}}),ze},[]);Ae=Ae.concat(ye)})}j=Ae}catch(_e){V.error(_e),j=[]}},applyServiceDescription:function(he){if(he&&he.serviceDescriptions){var Ae=he.serviceDescriptions.filter(function(_e){return Nh.includes(_e.schemeIdUri)}),Te=he.serviceDescriptions.filter(function(_e){return _e.schemeIdUri==null}),ie=Ae.length>0?Ae[Ae.length-1]:Te[Te.length-1];ie&&(ie.latency&&ie.latency.target>0&&function(_e){var ye;if(_e.schemeIdUri,E.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,ye=function(We){return{liveDelay:We.latency.target/1e3,maxDrift:!isNaN(We.latency.max)&&We.latency.max>We.latency.target?(We.latency.max-We.latency.target+500)/1e3:NaN,referenceId:We.latency.referenceId||NaN}}(_e),j.length>0){var ze=function(We){var Se,ke=0,Ie=j.filter(function(Ge){return Ge.id===We.referenceId});return Ie.length===0?(ke=j.length>0?j[0].to:0,Se=j[0].id||NaN):(ke=Ie[0].to||0,Se=Ie[0].id||NaN),{to:ke,id:Se}}(ye),Oe=ze.to,Ze=ze.id;O.liveDelay=ye.liveDelay-Oe,O.liveCatchup.maxDrift=ye.maxDrift,V.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(Oe," from ProducerReferenceTime element with id ").concat(Ze,".\n                Live Delay: ").concat(ye.liveDelay-Oe,", Live catchup max drift: ").concat(ye.maxDrift,"\n            "))}else O.liveDelay=ye.liveDelay,O.liveCatchup.maxDrift=ye.maxDrift,V.debug("Found latency properties coming from service description: Live Delay: ".concat(ye.liveDelay,", Live catchup max drift: ").concat(ye.maxDrift))}(ie),ie.playbackRate&&function(_e){var ye=_e.playbackRate.min?Math.round(1e3*(_e.playbackRate.min-1))/1e3:NaN,ze=_e.playbackRate.max?Math.round(1e3*(_e.playbackRate.max-1))/1e3:NaN;O.liveCatchup.playbackRate.min=ye,O.liveCatchup.playbackRate.max=ze,V.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(ye)),V.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(ze))}(ie),ie.operatingQuality,ie.operatingBandwidth&&function(_e){if(_e&&_e.operatingBandwidth&&_e.operatingBandwidth.mediaType&&_e.operatingBandwidth.mediaType!=="all"){var ye={};ye.minBandwidth=_e.operatingBandwidth.min,ye.maxBandwidth=_e.operatingBandwidth.max,ye.targetBandwidth=_e.operatingBandwidth.target;var ze=[];_e.operatingBandwidth.mediaType===_f||_e.operatingBandwidth.mediaType===jr?ze.push(_e.operatingBandwidth.mediaType):_e.operatingBandwidth.mediaType==="any"&&(ze.push(jr),ze.push(_f)),ze.forEach(function(Oe){isNaN(ye.minBandwidth)||re("minBitrate",Oe,ye.minBandwidth),isNaN(ye.maxBandwidth)||re("maxBitrate",Oe,ye.maxBandwidth),isNaN(ye.targetBandwidth)||re("initialBitrate",Oe,ye.targetBandwidth)})}}(ie),ie.contentSteering&&function(_e){O.contentSteering=_e.contentSteering}(ie))}},reset:function(){H()},setConfig:function(he){he&&he.adapter&&(W=he.adapter)}},V=(0,M.Z)(ee).getInstance().getLogger(k),H(),k}Mh.__dashjs_factory_name="ServiceDescriptionController";var Tf=U.Z.getSingletonFactory(Mh),Sf=w(3973),Tc=w.n(Sf),dm=w(3039);function wf(){var k,O,j,V,W,ee,H,re,he=this.context,Ae=(0,m.Z)(he).getInstance();function Te(ve,De){return ve&&j[De]&&j[De][ve]?j[De][ve].list:[]}function ie(ve,De){return ve&&j[De]&&j[De][ve]?j[De][ve].current:null}function _e(ve){var De=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(ve&&ve.streamInfo){var $e=ve.type,mt=ve.streamInfo,ct=mt.id,yt=ie($e,ct);if(j[ct]&&j[ct][$e]&&(j[ct][$e].current=ve,j[ct][$e].current&&($e!==E.Z.TEXT&&!Oe(ve,yt)||$e===E.Z.TEXT&&ve.isFragmented)&&Ae.trigger(T.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:yt,newMediaInfo:ve,switchMode:V.get().streaming.trackSwitchMode[$e]},{streamId:ct}),!De)){var pt=We(ve);if(!pt||!j[ct][$e].storeLastSettings)return;pt.roles&&(pt.role=pt.roles[0],delete pt.roles),pt.accessibility&&(pt.accessibility=pt.accessibility[0]),pt.audioChannelConfiguration&&(pt.audioChannelConfiguration=pt.audioChannelConfiguration[0]),ee[$e]=pt,re.setSavedMediaSettings($e,pt)}}}function ye(ve,De){ve&&De&&(W[ve]=De)}function ze(ve){return ve?W[ve]:null}function Oe(ve,De){if(!ve&&!De)return!0;if(!ve||!De)return!1;var $e=ve.id===De.id,mt=ve.viewpoint===De.viewpoint,ct=JSON.stringify(ve.viewpointsWithSchemeIdUri)===JSON.stringify(De.viewpointsWithSchemeIdUri),yt=ve.lang===De.lang,pt=ve.codec===De.codec,Gt=ve.roles.toString()===De.roles.toString(),Vt=JSON.stringify(ve.rolesWithSchemeIdUri)===JSON.stringify(De.rolesWithSchemeIdUri),jt=ve.accessibility.toString()===De.accessibility.toString(),Zt=JSON.stringify(ve.accessibilitiesWithSchemeIdUri)===JSON.stringify(De.accessibilitiesWithSchemeIdUri),xn=ve.audioChannelConfiguration.toString()===De.audioChannelConfiguration.toString(),at=JSON.stringify(ve.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(De.audioChannelConfigurationsWithSchemeIdUri);return $e&&pt&&mt&&ct&&yt&&Gt&&Vt&&jt&&Zt&&xn&&at}function Ze(){j={},ee={},W={audio:null,video:null,text:null}}function We(ve){var De={lang:ve.lang,viewpoint:ve.viewpoint,roles:ve.roles,accessibility:ve.accessibility,audioChannelConfiguration:ve.audioChannelConfiguration,codec:ve.codec};return De.lang||De.viewpoint||De.role&&De.role.length>0||De.accessibility&&De.accessibility.length>0||De.audioChannelConfiguration&&De.audioChannelConfiguration.length>0?De:null}function Se(ve,De,$e){var mt=[];return ve.forEach(function(ct){De($e,ct)&&mt.push(ct)}),mt.length!==0?mt:ve}function ke(ve,De){try{return!ve.lang||ve.lang instanceof RegExp?De.lang.match(ve.lang):De.lang!==""&&(0,dm.extendedFilter)(De.lang,Tc()(ve.lang)).length>0}catch($e){return!1}}function Ie(ve,De){return ve.index===void 0||ve.index===null||De.index===ve.index}function Ge(ve,De){return!ve.viewpoint||ve.viewpoint===De.viewpoint}function q(ve,De){var $e=arguments.length>2&&arguments[2]!==void 0&&arguments[2],mt=!ve.role||!!De.roles.filter(function(ct){return ct===ve.role})[0];return mt||De.type===E.Z.AUDIO&&$e}function le(ve,De){return ve.accessibility?!!De.accessibility.filter(function($e){return $e===ve.accessibility})[0]:!De.accessibility.length}function ae(ve,De){return!ve.audioChannelConfiguration||!!De.audioChannelConfiguration.filter(function($e){return $e===ve.audioChannelConfiguration})[0]}function ue(ve,De){return!ve.codec||ve.codec===De.codec}function te(ve){var De,$e=0,mt=[];return ve.forEach(function(ct){(De=Math.max.apply(Math,ct.bitrateList.map(function(yt){return yt.bandwidth})))>$e?($e=De,mt=[ct]):De===$e&&mt.push(ct)}),mt}function Pe(ve){var De,$e=1/0,mt=[];return ve.forEach(function(ct){var yt=ct.bitrateList.reduce(function(pt,Gt){var Vt=Math.max(1,Gt.width*Gt.height);return pt+Gt.bandwidth/Vt},0);(De=yt/ct.bitrateList.length)<$e?($e=De,mt=[ct]):De===$e&&mt.push(ct)}),mt}function xe(ve){var De,$e=0,mt=[];return ve.forEach(function(ct){(De=ct.representationCount)>$e?($e=De,mt=[ct]):De===$e&&mt.push(ct)}),mt}function je(ve,De){if(ve===E.Z.TEXT)return De[0];var $e,mt=V.get().streaming.selectionModeForInitialTrack,ct=H.getCustomInitialTrackSelectionFunction();if(ct&&typeof ct=="function")$e=ct(De);else switch(mt){case E.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:$e=function(yt){var pt,Gt,Vt=(pt=0,Gt=[],yt.forEach(function(jt){isNaN(jt.selectionPriority)||(jt.selectionPriority>pt?(pt=jt.selectionPriority,Gt=[jt]):jt.selectionPriority===pt&&Gt.push(jt))}),Gt);return Vt.length>1&&(Vt=te(Vt)),Vt.length>1&&(Vt=xe(Vt)),Vt}(De);break;case E.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:$e=function(yt){var pt=te(yt);return pt.length>1&&(pt=xe(pt)),pt}(De);break;case E.Z.TRACK_SELECTION_MODE_FIRST_TRACK:$e=Me(De);break;case E.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:$e=function(yt){var pt=Pe(yt);return pt.length>1&&(pt=te(pt)),pt}(De);break;case E.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:$e=function(yt){var pt=xe(yt);return pt.length>1&&(pt=te(yt)),pt}(De);break;default:O.warn("Track selection mode ".concat(mt," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),$e=Me(De)}return $e.length>0?$e[0]:De[0]}function Me(ve){return ve[0]}return k={setInitialMediaSettingsForType:function(ve,De){var $e=ee[ve]||ze(ve),mt=Te(ve,De.id),ct=[];$e||(($e=re.getSavedMediaSettings(ve))&&delete $e.codec,ye(ve,$e)),mt&&mt.length!==0&&($e&&(ct=Se(ct=Array.from(mt),ke,$e),ct=Se(ct,Ie,$e),ct=Se(ct,Ge,$e),ve===E.Z.AUDIO&&ee[ve]||(ct=Se(ct,q,$e)),ct=Se(ct,le,$e),ct=Se(ct,ae,$e),ct=Se(ct,ue,$e)),ct.length===0?_e(je(ve,mt),!0):ct.length>1?_e(je(ve,ct)):_e(ct[0]))},addTrack:function(ve){if(ve){var De=ve.type;if(($e=De)===E.Z.AUDIO||$e===E.Z.VIDEO||$e===E.Z.TEXT||$e===E.Z.IMAGE){var $e,mt,ct=ve.streamInfo.id;j[ct]||(j[ct]={audio:{list:[],storeLastSettings:mt=V.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:mt,current:null},text:{list:[],storeLastSettings:mt,current:null},image:{list:[],storeLastSettings:mt,current:null}});for(var yt=j[ct][De].list,pt=0,Gt=yt.length;pt<Gt;++pt)if(Oe(yt[pt],ve))return;yt.push(ve)}}},getTracksFor:Te,getCurrentTrackFor:ie,isCurrentTrack:function(ve){if(!ve)return!1;var De=ve.type,$e=ve.streamInfo.id;return j[$e]&&j[$e][De]&&Oe(j[$e][De].current,ve)},setTrack:_e,selectInitialTrack:je,setInitialSettings:ye,getInitialSettings:ze,getTracksWithHighestBitrate:te,getTracksWithHighestEfficiency:Pe,getTracksWithWidestRange:xe,isTracksEqual:Oe,matchSettings:function(ve,De){var $e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var mt=!1;if(ve.lang){if(ve.lang instanceof RegExp)mt=De.lang.match(ve.lang);else if(De.lang!==""){var ct=Tc()(ve.lang);ct&&(mt=(0,dm.extendedFilter)(De.lang,ct).length>0)}}else mt=!0;var yt=ve.index===void 0||ve.index===null||De.index===ve.index,pt=!ve.viewpoint||ve.viewpoint===De.viewpoint,Gt=!ve.role||!!De.roles.filter(function(Zt){return Zt===ve.role})[0],Vt=!ve.accessibility||!!De.accessibility.filter(function(Zt){return Zt===ve.accessibility})[0],jt=!ve.audioChannelConfiguration||!!De.audioChannelConfiguration.filter(function(Zt){return Zt===ve.audioChannelConfiguration})[0];return mt&&yt&&pt&&(Gt||De.type===E.Z.AUDIO&&$e)&&Vt&&jt}catch(Zt){return!1}},matchSettingsLang:ke,matchSettingsIndex:Ie,matchSettingsViewPoint:Ge,matchSettingsRole:q,matchSettingsAccessibility:le,matchSettingsAudioChannelConfig:ae,saveTextSettingsDisabled:function(){re.setSavedMediaSettings(E.Z.TEXT,null)},setConfig:function(ve){ve&&(ve.domStorage&&(re=ve.domStorage),ve.settings&&(V=ve.settings),ve.customParametersModel&&(H=ve.customParametersModel))},reset:Ze},O=(0,M.Z)(he).getInstance().getLogger(k),Ze(),k}wf.__dashjs_factory_name="MediaController";var xl=U.Z.getSingletonFactory(wf);U.Z.updateSingletonFactory(wf.__dashjs_factory_name,xl);var Af=xl,ba=NaN,If=function k(O,j){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,k),this.data={baseUrls:O||null,selectedIdx:j||ba},this.children=[]};function Nl(){var k,O,j,V,W=this.context,ee=wn(W).getInstance();function H(Te,ie,_e){var ye=re(_e);Te[ie]?ee.areEqual(ye,Te[ie].data.baseUrls)||(Te[ie].data.baseUrls=ye,Te[ie].data.selectedIdx=ba):Te[ie]=new If(ye)}function re(Te){var ie=j.getBaseURLsFromElement(Te),_e=V.getSynthesizedBaseUrlElements(ie);return _e&&_e.length>0&&(ie=ie.concat(_e)),ie}function he(Te,ie){var _e=ie||O;Te(_e.data),_e.children&&_e.children.forEach(function(ye){return he(Te,ye)})}function Ae(){O=new If}return k={reset:Ae,update:function(Te){(function(ie){(function(){if(!j||!j.hasOwnProperty("getBaseURLsFromElement")||!j.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var _e=re(ie);ee.areEqual(_e,O.data.baseUrls)||(O.data.baseUrls=_e,O.data.selectedIdx=ba),ie&&ie.Period_asArray&&ie.Period_asArray.forEach(function(ye,ze){H(O.children,ze,ye),ye.AdaptationSet_asArray&&ye.AdaptationSet_asArray.forEach(function(Oe,Ze){H(O.children[ze].children,Ze,Oe),Oe.Representation_asArray&&Oe.Representation_asArray.sort(j.getRepresentationSortFunction()).forEach(function(We,Se){H(O.children[ze].children[Ze].children,Se,We)})})})})(Te)},getForPath:function(Te){var ie=O,_e=[ie.data];return Te&&Te.forEach(function(ye){(ie=ie.children[ye])&&_e.push(ie.data)}),_e.filter(function(ye){return ye.baseUrls.length})},invalidateSelectedIndexes:function(Te){he(function(ie){isNaN(ie.selectedIdx)||Te===ie.baseUrls[ie.selectedIdx].serviceLocation&&(ie.selectedIdx=ba)})},setConfig:function(Te){Te.adapter&&(j=Te.adapter),Te.contentSteeringController&&(V=Te.contentSteeringController)},getBaseUrls:function(Te){return re(Te)}},Ae(),k}Nl.__dashjs_factory_name="BaseURLTreeModel";var hm=U.Z.getClassFactory(Nl);function Ml(k){var O=(k=k||{}).blacklistController;return{select:function(j){return j&&function(W){var ee,H,re=0,he=[],Ae=0;if((H=W.sort(function(Te,ie){var _e=Te.dvbPriority-ie.dvbPriority;return isNaN(_e)?0:_e}).filter(function(Te,ie,_e){return!ie||_e[0].dvbPriority&&Te.dvbPriority&&_e[0].dvbPriority===Te.dvbPriority})).length)return H.length>1&&(H.forEach(function(Te){re+=Te.dvbWeight,he.push(re)}),ee=Math.floor(Math.random()*(re-1)),he.every(function(Te,ie){return Ae=ie,!(ee<Te)})),H[Ae]}((V=[],j.filter(function(W){return!O.contains(W.serviceLocation)||(W.dvbPriority&&V.push(W.dvbPriority),!1)}).filter(function(W){return!V.length||!W.dvbPriority||V.indexOf(W.dvbPriority)===-1})));var V}}}Ml.__dashjs_factory_name="DVBSelector";var Vu=U.Z.getClassFactory(Ml);function Dl(k){var O=(k=k||{}).blacklistController;return{select:function(j){var V,W=0;return j&&j.some(function(ee,H){return W=H,!O.contains(ee.serviceLocation)})&&(V=j[W]),V}}}Dl.__dashjs_factory_name="BasicSelector";var Ku=U.Z.getClassFactory(Dl);function bf(){var k,O,j,V=this.context;function W(){for(var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],re=0,he=NaN,Ae=function(){var ie=ee[re],_e=H.findIndex(function(ye){return ye.serviceLocation&&ye.serviceLocation===ie});if(_e!==-1&&!j.contains(H[_e].serviceLocation))return he=_e,"break";re+=1};re<ee.length;){var Te=Ae();if(Te==="break")break}return he}return k={selectBaseUrlIndex:function(ee){var H=NaN;if(isNaN(ee.selectedIdx)){var re=O.getSteeringDataFromManifest();re&&re.defaultServiceLocationArray.length>0&&(H=W(re.defaultServiceLocationArray,ee.baseUrls))}var he=O.getCurrentSteeringResponseData();return ee.baseUrls&&ee.baseUrls.length&&he&&he.pathwayPriority&&he.pathwayPriority.length&&(H=W(he.pathwayPriority,ee.baseUrls)),H},setConfig:function(ee){ee.blacklistController&&(j=ee.blacklistController),ee.contentSteeringController&&(O=ee.contentSteeringController)}},O=Vi(V).getInstance(),k}bf.__dashjs_factory_name="ContentSteeringSelector";var pm=U.Z.getClassFactory(bf);function Dh(){var k,O,j,V,W,ee,H=this.context,re=(0,m.Z)(H).getInstance(),he=(0,qe.Z)(H).getInstance();function Ae(){O.reset()}return k={chooseSelector:function(Te){(0,ge.PS)(Te,"boolean"),ee=Te?V:j},select:function(Te){if(Te){if(he.get().streaming.applyContentSteering){var ie=W.selectBaseUrlIndex(Te);isNaN(ie)||ie===-1||(Te.selectedIdx=ie)}if(!isNaN(Te.selectedIdx))return Te.baseUrls[Te.selectedIdx];var _e=ee.select(Te.baseUrls);return _e?(Te.selectedIdx=Te.baseUrls.indexOf(_e),_e):(re.trigger(T.Z.URL_RESOLUTION_FAILED,{error:new ce.Z(we.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,we.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(ee===j&&Ae()))}},reset:Ae,setConfig:function(Te){Te.selector&&(ee=Te.selector),Te.contentSteeringSelector&&(W=Te.contentSteeringSelector)}},O=qs(H).create({updateEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),j=Ku(H).create({blacklistController:O}),V=Vu(H).create({blacklistController:O}),(W=pm(H).create()).setConfig({blacklistController:O}),ee=j,k}Dh.__dashjs_factory_name="BaseURLSelector";var gm=U.Z.getClassFactory(Dh);function zu(){var k,O,j,V,W,ee=this.context,H=(0,m.Z)(ee).getInstance(),re=(0,wt.Z)(ee).getInstance();function he(Te){j.update(Te),V.chooseSelector(O.getIsDVB(Te)),H.trigger(_.Z.BASE_URLS_UPDATED,{baseUrls:Ae(Te)})}function Ae(Te){return j.getBaseUrls(Te)}return k={reset:function(){j.reset(),V.reset()},initialize:function(Te){j.setConfig({adapter:O,contentSteeringController:W}),he(Te)},resolve:function(Te){var ie=j.getForPath(Te).reduce(function(_e,ye){var ze=V.select(ye);return ze?(re.isRelative(ze.url)?_e.url=re.resolve(ze.url,_e.url):(_e.url=ze.url,_e.serviceLocation=ze.serviceLocation),_e.availabilityTimeOffset=ze.availabilityTimeOffset,_e.availabilityTimeComplete=ze.availabilityTimeComplete,_e.queryParams=ze.queryParams,_e):new nr},new nr);if(!re.isRelative(ie.url))return ie},setConfig:function(Te){Te.baseURLTreeModel&&(j=Te.baseURLTreeModel),Te.baseURLSelector&&(V=Te.baseURLSelector),Te.adapter&&(O=Te.adapter),Te.contentSteeringController&&(W=Te.contentSteeringController)},getBaseUrls:Ae,update:he},j=hm(ee).create(),V=gm(ee).create(),H.on(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(Te){j.invalidateSelectedIndexes(Te.entry)},k),k}zu.__dashjs_factory_name="BaseURLController";var Ph=U.Z.getClassFactory(zu);function Su(k){return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Su(k)}function Cf(k,O){return Cf=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},Cf(k,O)}function Vs(k,O){return!O||Su(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Rf(k){return Rf=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Rf(k)}var Ks=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&Cf(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Rf(O);if(j){var re=Rf(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Vs(this,ee)});function W(ee,H){var re;return function(he,Ae){if(!(he instanceof Ae))throw new TypeError("Cannot call a class as a function")}(this,W),(re=V.call(this)).url=ee||null,re.type=H||null,re.mediaType=E.Z.STREAM,re.responseType="",re}return W}(Z.Z);function Ts(k){k=k||{};var O=this.context,j=(0,m.Z)(O).getInstance(),V=bi(O).create({errHandler:k.errHandler,dashMetrics:k.dashMetrics,mediaPlayerModel:k.mediaPlayerModel,requestModifier:k.requestModifier,errors:we});return{load:function(W,ee,H){var re=function(Ae,Te){ee.resolved=!0,ee.resolvedContent=Ae||null,j.trigger(T.Z.XLINK_ELEMENT_LOADED,{element:ee,resolveObject:H,error:Ae||Te?null:new ce.Z(we.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,we.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+W)})};if(W==="urn:mpeg:dash:resolve-to-zero:2013")re(null,!0);else{var he=new Ks(W,st.w.XLINK_EXPANSION_TYPE);V.load({request:he,success:function(Ae){re(Ae)},error:function(){re(null)}})}},reset:function(){V&&(V.abort(),V=null)}}}Ts.__dashjs_factory_name="XlinkLoader";var wu=U.Z.getClassFactory(Ts),xf=function(k){(k=k||{}).escapeMode===void 0&&(k.escapeMode=!0),k.attributePrefix===void 0&&(k.attributePrefix="_"),k.arrayAccessForm=k.arrayAccessForm||"none",k.emptyNodeForm=k.emptyNodeForm||"text",k.enableToStringFunc===void 0&&(k.enableToStringFunc=!0),k.arrayAccessFormPaths=k.arrayAccessFormPaths||[],k.skipEmptyTextNodesForObj===void 0&&(k.skipEmptyTextNodesForObj=!0),k.stripWhitespaces===void 0&&(k.stripWhitespaces=!0),k.datetimeAccessFormPaths=k.datetimeAccessFormPaths||[],k.useDoubleQuotes===void 0&&(k.useDoubleQuotes=!1),k.xmlElementsFilter=k.xmlElementsFilter||[],k.jsonPropertiesFilter=k.jsonPropertiesFilter||[],k.keepCData===void 0&&(k.keepCData=!1),k.ignoreRoot===void 0&&(k.ignoreRoot=!1);function O(Se){var ke=Se.localName;return ke==null&&(ke=Se.baseName),ke!=null&&ke!=""||(ke=Se.nodeName),ke}function j(Se){return typeof Se=="string"?Se.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):Se}function V(Se,ke,Ie,Ge){for(var q=0;q<Se.length;q++){var le=Se[q];if(typeof le=="string"){if(le==Ge)break}else if(le instanceof RegExp){if(le.test(Ge))break}else if(typeof le=="function"&&le(ke,Ie,Ge))break}return q!=Se.length}function W(Se,ke,Ie){k.arrayAccessForm==="property"&&(Se[ke]instanceof Array?Se[ke+"_asArray"]=Se[ke]:Se[ke+"_asArray"]=[Se[ke]]),!(Se[ke]instanceof Array)&&k.arrayAccessFormPaths.length>0&&V(k.arrayAccessFormPaths,Se,ke,Ie)&&(Se[ke]=[Se[ke]])}function ee(Se){var ke=Se.split(/[-T:+Z]/g),Ie=new Date(ke[0],ke[1]-1,ke[2]),Ge=ke[5].split(".");if(Ie.setHours(ke[3],ke[4],Ge[0]),Ge.length>1&&Ie.setMilliseconds(Ge[1]),ke[6]&&ke[7]){var q=60*ke[6]+Number(ke[7]);q=0+((/\d\d-\d\d:\d\d$/.test(Se)?"-":"+")=="-"?-1*q:q),Ie.setMinutes(Ie.getMinutes()-q-Ie.getTimezoneOffset())}else Se.indexOf("Z",Se.length-1)!==-1&&(Ie=new Date(Date.UTC(Ie.getFullYear(),Ie.getMonth(),Ie.getDate(),Ie.getHours(),Ie.getMinutes(),Ie.getSeconds(),Ie.getMilliseconds())));return Ie}function H(Se,ke,Ie,Ge){return!(ke==1&&k.xmlElementsFilter.length>0)||V(k.xmlElementsFilter,Se,Ie,Ge)}function re(Se,ke){if(Se.nodeType==9){for(var Ie=new Object,Ge=Se.childNodes,q=0;q<Ge.length;q++)(ae=Ge[q]).nodeType==1&&(k.ignoreRoot?Ie=re(ae):(Ie={})[ue=O(ae)]=re(ae));return Ie}if(Se.nodeType==1){(Ie=new Object).__cnt=0;var le=[];for(Ge=Se.childNodes,q=0;q<Ge.length;q++){var ae,ue=O(ae=Ge[q]);if(ae.nodeType!=8){var te=ke+"."+ue;if(H(Ie,ae.nodeType,ue,te))if(Ie.__cnt++,Ie[ue]==null){var Pe=re(ae,te);(ue!="#text"||/[^\s]/.test(Pe))&&((xe={})[ue]=Pe,le.push(xe)),Ie[ue]=Pe,W(Ie,ue,te)}else{var xe;Ie[ue]!=null&&(Ie[ue]instanceof Array||(Ie[ue]=[Ie[ue]],W(Ie,ue,te))),Pe=re(ae,te),(ue!="#text"||/[^\s]/.test(Pe))&&((xe={})[ue]=Pe,le.push(xe)),Ie[ue][Ie[ue].length]=Pe}}}Ie.__children=le;for(var je=O(Se),Me=0;Me<Se.attributes.length;Me++){var ve=Se.attributes[Me];Ie.__cnt++;for(var De=ve.value,$e=0,mt=k.matchers.length;$e<mt;$e++){var ct=k.matchers[$e];ct.test(ve,je)&&(De=ct.converter(ve.value))}Ie[k.attributePrefix+ve.name]=De}var yt=function(pt){return pt.prefix}(Se);return yt!=null&&yt!=""&&(Ie.__cnt++,Ie.__prefix=yt),Ie["#text"]!=null&&(Ie.__text=Ie["#text"],Ie.__text instanceof Array&&(Ie.__text=Ie.__text.join("\n")),k.stripWhitespaces&&(Ie.__text=Ie.__text.trim()),delete Ie["#text"],k.arrayAccessForm=="property"&&delete Ie["#text_asArray"],Ie.__text=function(pt,Gt,Vt){if(k.datetimeAccessFormPaths.length>0){var jt=Vt.split(".#")[0];return V(k.datetimeAccessFormPaths,pt,Gt,jt)?ee(pt):pt}return pt}(Ie.__text,ue,ke+"."+ue)),Ie["#cdata-section"]!=null&&(Ie.__cdata=Ie["#cdata-section"],delete Ie["#cdata-section"],k.arrayAccessForm=="property"&&delete Ie["#cdata-section_asArray"]),Ie.__cnt==0&&k.emptyNodeForm=="text"?Ie="":Ie.__cnt==1&&Ie.__text!=null?Ie=Ie.__text:Ie.__cnt!=1||Ie.__cdata==null||k.keepCData?Ie.__cnt>1&&Ie.__text!=null&&k.skipEmptyTextNodesForObj&&(k.stripWhitespaces&&Ie.__text==""||Ie.__text.trim()=="")&&delete Ie.__text:Ie=Ie.__cdata,delete Ie.__cnt,!k.enableToStringFunc||Ie.__text==null&&Ie.__cdata==null||(Ie.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),Ie}if(Se.nodeType==3||Se.nodeType==4)return Se.nodeValue}function he(Se,ke,Ie,Ge){var q="<"+(Se!=null&&Se.__prefix!=null?Se.__prefix+":":"")+ke;if(Ie!=null)for(var le=0;le<Ie.length;le++){var ae=Ie[le],ue=Se[ae];k.escapeMode&&(ue=j(ue)),q+=" "+ae.substr(k.attributePrefix.length)+"=",k.useDoubleQuotes?q+='"'+ue+'"':q+="'"+ue+"'"}return q+(Ge?"/>":">")}function Ae(Se,ke){return"</"+(Se.__prefix!=null?Se.__prefix+":":"")+ke+">"}function Te(Se,ke){return k.arrayAccessForm=="property"&&(Ge="_asArray",(Ie=ke.toString()).indexOf(Ge,Ie.length-Ge.length)!==-1)||ke.toString().indexOf(k.attributePrefix)==0||ke.toString().indexOf("__")==0||Se[ke]instanceof Function;var Ie,Ge}function ie(Se){var ke=0;if(Se instanceof Object)for(var Ie in Se)Te(Se,Ie)||ke++;return ke}function _e(Se,ke,Ie){return k.jsonPropertiesFilter.length==0||Ie==""||V(k.jsonPropertiesFilter,Se,ke,Ie)}function ye(Se){var ke=[];if(Se instanceof Object)for(var Ie in Se)Ie.toString().indexOf("__")==-1&&Ie.toString().indexOf(k.attributePrefix)==0&&ke.push(Ie);return ke}function ze(Se){var ke="";return Se instanceof Object?ke+=function(Ie){var Ge="";return Ie.__cdata!=null&&(Ge+="<![CDATA["+Ie.__cdata+"]]>"),Ie.__text!=null&&(k.escapeMode?Ge+=j(Ie.__text):Ge+=Ie.__text),Ge}(Se):Se!=null&&(k.escapeMode?ke+=j(Se):ke+=Se),ke}function Oe(Se,ke){return Se===""?ke:Se+"."+ke}function Ze(Se,ke,Ie,Ge){var q="";if(Se.length==0)q+=he(Se,ke,Ie,!0);else for(var le=0;le<Se.length;le++)q+=he(Se[le],ke,ye(Se[le]),!1),q+=We(Se[le],Oe(Ge,ke)),q+=Ae(Se[le],ke);return q}function We(Se,ke){var Ie="";if(ie(Se)>0){for(var Ge in Se)if(!Te(Se,Ge)&&(ke==""||_e(Se,Ge,Oe(ke,Ge)))){var q=Se[Ge],le=ye(q);q==null||q==null?Ie+=he(q,Ge,le,!0):q instanceof Object?q instanceof Array?Ie+=Ze(q,Ge,le,ke):q instanceof Date?(Ie+=he(q,Ge,le,!1),Ie+=q.toISOString(),Ie+=Ae(q,Ge)):ie(q)>0||q.__text!=null||q.__cdata!=null?(Ie+=he(q,Ge,le,!1),Ie+=We(q,Oe(ke,Ge)),Ie+=Ae(q,Ge)):Ie+=he(q,Ge,le,!0):(Ie+=he(q,Ge,le,!1),Ie+=ze(q),Ie+=Ae(q,Ge))}}return Ie+ze(Se)}this.parseXmlString=function(Se){var ke;if(Se===void 0)return null;if(window.DOMParser){var Ie=new window.DOMParser;try{(ke=Ie.parseFromString(Se,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(ke=null)}catch(Ge){ke=null}}else Se.indexOf("<?")==0&&(Se=Se.substr(Se.indexOf("?>")+2)),(ke=new ActiveXObject("Microsoft.XMLDOM")).async="false",ke.loadXML(Se);return ke},this.asArray=function(Se){return Se===void 0||Se==null?[]:Se instanceof Array?Se:[Se]},this.toXmlDateTime=function(Se){return Se instanceof Date?Se.toISOString():typeof Se=="number"?new Date(Se).toISOString():null},this.asDateTime=function(Se){return typeof Se=="string"?ee(Se):Se},this.xml2json=function(Se){return re(Se)},this.xml_str2json=function(Se){var ke=this.parseXmlString(Se);return ke!=null?this.xml2json(ke):null},this.json2xml_str=function(Se){return We(Se,"")},this.json2xml=function(Se){var ke=this.json2xml_str(Se);return this.parseXmlString(ke)},this.getVersion=function(){return"1.2.0"}},sa="onLoad";function Nf(k){k=k||{};var O,j,V,W,ee,H,re=this.context,he=(0,m.Z)(re).getInstance(),Ae=(0,wt.Z)(re).getInstance();function Te(Oe,Ze,We){var Se,ke,Ie={};Ie.elements=Oe,Ie.type=Ze,Ie.resolveType=We,Ie.elements.length===0&&_e(Ie);for(var Ge=0;Ge<Ie.elements.length;Ge++)Se=Ie.elements[Ge],ke=Ae.isHTTPURL(Se.url)?Se.url:Se.originalContent.BaseURL+Se.url,H.load(ke,Se,Ie)}function ie(Oe){var Ze,We,Se="";if(Ze=Oe.element,We=Oe.resolveObject,Ze.resolvedContent){var ke=0;Ze.resolvedContent.indexOf("<?xml")===0&&(ke=Ze.resolvedContent.indexOf("?>")+2),Se=Ze.resolvedContent.substr(0,ke)+"<response>"+Ze.resolvedContent.substr(ke)+"</response>",Ze.resolvedContent=ee.xml_str2json(Se)}(function(Ie){var Ge;for(Ge=0;Ge<Ie.elements.length;Ge++)if(Ie.elements[Ge].resolved===!1)return!1;return!0})(We)&&_e(We)}function _e(Oe){var Ze,We,Se=[];if(function(ke){var Ie,Ge,q,le,ae,ue,te=[];for(le=ke.elements.length-1;le>=0;le--){if(Ge=(Ie=ke.elements[le]).type+"_asArray",Ie.resolvedContent){if(Ie.resolvedContent)for(ae=0;ae<Ie.resolvedContent[Ge].length;ae++)q=Ie.resolvedContent[Ge][ae],te.push(q)}else delete Ie.originalContent["xlink:actuate"],delete Ie.originalContent["xlink:href"],te.push(Ie.originalContent);for(Ie.parentElement[Ge].splice(Ie.index,1),ue=0;ue<te.length;ue++)Ie.parentElement[Ge].splice(Ie.index+ue,0,te[ue]);te=[]}ke.elements.length>0&&V.run(W)}(Oe),Oe.resolveType==="onActuate"&&he.trigger(T.Z.XLINK_READY,{manifest:W}),Oe.resolveType===sa)switch(Oe.type){case y.Z.PERIOD:for(Ze=0;Ze<W[y.Z.PERIOD+"_asArray"].length;Ze++)(We=W[y.Z.PERIOD+"_asArray"][Ze]).hasOwnProperty(y.Z.ADAPTATION_SET+"_asArray")&&(Se=Se.concat(ye(We[y.Z.ADAPTATION_SET+"_asArray"],We,y.Z.ADAPTATION_SET,sa))),We.hasOwnProperty(y.Z.EVENT_STREAM+"_asArray")&&(Se=Se.concat(ye(We[y.Z.EVENT_STREAM+"_asArray"],We,y.Z.EVENT_STREAM,sa)));Te(Se,y.Z.ADAPTATION_SET,sa);break;case y.Z.ADAPTATION_SET:he.trigger(T.Z.XLINK_READY,{manifest:W})}}function ye(Oe,Ze,We,Se){var ke,Ie,Ge,q=[];for(Ie=Oe.length-1;Ie>=0;Ie--)(ke=Oe[Ie]).hasOwnProperty("xlink:href")&&ke["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&Oe.splice(Ie,1);for(Ie=0;Ie<Oe.length;Ie++)(ke=Oe[Ie]).hasOwnProperty("xlink:href")&&ke.hasOwnProperty("xlink:actuate")&&ke["xlink:actuate"]===Se&&(Ge=ze(ke["xlink:href"],Ze,We,Ie,Se,ke),q.push(Ge));return q}function ze(Oe,Ze,We,Se,ke,Ie){return{url:Oe,parentElement:Ze,type:We,index:Se,resolveType:ke,originalContent:Ie,resolvedContent:null,resolved:!1}}return O={resolveManifestOnLoad:function(Oe){ee=new xf({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:j}),(W=Oe).Period_asArray?Te(ye(W.Period_asArray,W,y.Z.PERIOD,sa),y.Z.PERIOD,sa):he.trigger(T.Z.XLINK_READY,{manifest:W})},setMatchers:function(Oe){Oe&&(j=Oe)},setIron:function(Oe){Oe&&(V=Oe)},reset:function(){he.off(T.Z.XLINK_ELEMENT_LOADED,ie,O),H&&(H.reset(),H=null)}},he.on(T.Z.XLINK_ELEMENT_LOADED,ie,O),H=wu(re).create({errHandler:k.errHandler,dashMetrics:k.dashMetrics,mediaPlayerModel:k.mediaPlayerModel,requestModifier:k.requestModifier,settings:k.settings}),O}Nf.__dashjs_factory_name="XlinkController";var Oh=U.Z.getClassFactory(Nf);function Pl(k){return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Pl(k)}function mm(k){function O(W,ee){for(var H in W)ee.hasOwnProperty(H)||(ee[H]=W[H])}function j(W,ee,H){for(var re=0,he=W.length;re<he;++re){var Ae=W[re];if(ee[Ae.name])if(H[Ae.name]){if(Ae.merge){var Te=ee[Ae.name],ie=H[Ae.name];Pl(Te)==="object"&&Pl(ie)==="object"?O(Te,ie):H[Ae.name]=Te+ie}}else H[Ae.name]=ee[Ae.name]}}function V(W,ee){for(var H=0,re=W.children.length;H<re;++H){var he=W.children[H],Ae=ee[he.name+"_asArray"];if(Ae)for(var Te=0,ie=Ae.length;Te<ie;++Te){var _e=Ae[Te];j(W.properties,ee,_e),V(he,_e)}}}return{run:function(W){if(W===null||Pl(W)!=="object")return W;if(W.Period_asArray&&"period"in k)for(var ee=k.period,H=W.Period_asArray,re=0,he=H.length;re<he;++re){var Ae=H[re];if(V(ee,Ae),"adaptationset"in k){var Te=Ae.AdaptationSet_asArray;if(Te)for(var ie=k.adaptationset,_e=0,ye=Te.length;_e<ye;++_e)V(ie,Te[_e])}}return W}}}mm.__dashjs_factory_name="ObjectIron";var Ei=U.Z.getClassFactory(mm);function Mf(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var Au=function(){function k(V,W){(function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")})(this,k),this._test=V,this._converter=W}var O,j;return O=k,(j=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&Mf(O.prototype,j),k}();function Sc(k){return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Sc(k)}function $r(k,O,j){return O in k?Object.defineProperty(k,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):k[O]=j,k}function Yu(k,O){return Yu=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},Yu(k,O)}function wc(k,O){return!O||Sc(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Df(k){return Df=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Df(k)}var vm=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&Yu(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Df(O);if(j){var re=Df(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return wc(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee,H){var re,he=($r(re={},y.Z.MPD,[y.Z.ID,y.Z.PROFILES]),$r(re,y.Z.PERIOD,[y.Z.ID]),$r(re,y.Z.BASE_URL,[y.Z.SERVICE_LOCATION,y.Z.BYTE_RANGE]),$r(re,y.Z.SEGMENT_BASE,[y.Z.INDEX_RANGE]),$r(re,y.Z.INITIALIZATION,[y.Z.RANGE]),$r(re,y.Z.REPRESENTATION_INDEX,[y.Z.RANGE]),$r(re,y.Z.SEGMENT_LIST,[y.Z.INDEX_RANGE]),$r(re,y.Z.BITSTREAM_SWITCHING,[y.Z.RANGE]),$r(re,y.Z.SEGMENT_URL,[y.Z.MEDIA_RANGE,y.Z.INDEX_RANGE]),$r(re,y.Z.SEGMENT_TEMPLATE,[y.Z.INDEX_RANGE,y.Z.MEDIA,y.Z.INDEX,y.Z.INITIALIZATION_MINUS,y.Z.BITSTREAM_SWITCHING_MINUS]),$r(re,y.Z.ASSET_IDENTIFIER,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.EVENT_STREAM,[y.Z.VALUE]),$r(re,y.Z.ADAPTATION_SET,[y.Z.PROFILES,y.Z.MIME_TYPE,y.Z.SEGMENT_PROFILES,y.Z.CODECS,y.Z.CONTENT_TYPE]),$r(re,y.Z.FRAME_PACKING,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.AUDIO_CHANNEL_CONFIGURATION,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.CONTENT_PROTECTION,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.ESSENTIAL_PROPERTY,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.SUPPLEMENTAL_PROPERTY,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.INBAND_EVENT_STREAM,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.ACCESSIBILITY,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.ROLE,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.RATING,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.VIEWPOINT,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.CONTENT_COMPONENT,[y.Z.CONTENT_TYPE]),$r(re,y.Z.REPRESENTATION,[y.Z.ID,y.Z.DEPENDENCY_ID,y.Z.MEDIA_STREAM_STRUCTURE_ID]),$r(re,y.Z.SUBSET,[y.Z.ID]),$r(re,y.Z.METRICS,[y.Z.METRICS_MINUS]),$r(re,y.Z.REPORTING,[y.Z.VALUE,y.Z.ID]),re);if(he.hasOwnProperty(H)){var Ae=he[H];return Ae!==void 0&&Ae.indexOf(ee.name)>=0}return!1},function(ee){return String(ee)})}return W}(Au);function Lh(k){return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Lh(k)}function kh(k,O){return kh=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},kh(k,O)}function OE(k,O){return!O||Lh(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Pf(k){return Pf=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Pf(k)}var Wu=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,Of=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&kh(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Pf(O);if(j){var re=Pf(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return OE(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee){for(var H=[y.Z.MIN_BUFFER_TIME,y.Z.MEDIA_PRESENTATION_DURATION,y.Z.MINIMUM_UPDATE_PERIOD,y.Z.TIMESHIFT_BUFFER_DEPTH,y.Z.MAX_SEGMENT_DURATION,y.Z.MAX_SUBSEGMENT_DURATION,y.Z.SUGGESTED_PRESENTATION_DELAY,y.Z.START,E.Z.START_TIME,y.Z.DURATION],re=H.length,he=0;he<re;he++)if(ee.nodeName===H[he])return Wu.test(ee.value);return!1},function(ee){var H=Wu.exec(ee),re=31536e3*parseFloat(H[3]||0)+2592e3*parseFloat(H[5]||0)+86400*parseFloat(H[7]||0)+3600*parseFloat(H[9]||0)+60*parseFloat(H[11]||0)+parseFloat(H[13]||0);return H[1]!==void 0&&(re=-re),re})}return W}(Au);function Lf(k){return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Lf(k)}function co(k,O){return co=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},co(k,O)}function Fh(k,O){return!O||Lf(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Ss(k){return Ss=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Ss(k)}var Wo=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,$u=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&co(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Ss(O);if(j){var re=Ss(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Fh(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee){return Wo.test(ee.value)},function(ee){var H,re=Wo.exec(ee);if(H=Date.UTC(parseInt(re[1],10),parseInt(re[2],10)-1,parseInt(re[3],10),parseInt(re[4],10),parseInt(re[5],10),re[6]&&parseInt(re[6],10)||0,re[7]&&1e3*parseFloat(re[7])||0),re[9]&&re[10]){var he=60*parseInt(re[9],10)+parseInt(re[10],10);H+=(re[8]==="+"?-1:1)*he*60*1e3}return new Date(H)})}return W}(Au);function za(k){return za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},za(k)}function hi(k,O){return hi=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},hi(k,O)}function Ki(k,O){return!O||za(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function ws(k){return ws=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},ws(k)}var ym=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Ol=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&hi(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=ws(O);if(j){var re=ws(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Ki(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee){return ym.test(ee.value)},function(ee){return parseFloat(ee)})}return W}(Au);function bo(k){return bo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},bo(k)}function Xu(k,O,j){return O in k?Object.defineProperty(k,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):k[O]=j,k}function _r(k,O){return _r=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},_r(k,O)}function Mi(k,O){return!O||bo(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function kf(k){return kf=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},kf(k)}var Em=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&_r(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=kf(O);if(j){var re=kf(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Mi(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee,H){var re,he=(Xu(re={},y.Z.ADAPTATION_SET,[y.Z.LANG]),Xu(re,y.Z.REPRESENTATION,[y.Z.LANG]),Xu(re,y.Z.CONTENT_COMPONENT,[y.Z.LANG]),Xu(re,y.Z.LABEL,[y.Z.LANG]),Xu(re,y.Z.GROUP_LABEL,[y.Z.LANG]),re);if(he.hasOwnProperty(H)){var Ae=he[H];return Ae!==void 0&&Ae.indexOf(ee.name)>=0}return!1},function(ee){return Tc()(ee)||String(ee)})}return W}(Au);function Uh(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var Di=function(){function k(V){var W;(function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")})(this,k),this._name=V,this._merge=(W=V)&&W.length&&W.charAt(0)===W.charAt(0).toUpperCase()}var O,j;return O=k,(j=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&Uh(O.prototype,j),k}();function Qu(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var Ya=function(){function k(V,W,ee){var H=this;(function(re,he){if(!(re instanceof he))throw new TypeError("Cannot call a class as a function")})(this,k),this._name=V||"",this._properties=[],this._children=ee||[],Array.isArray(W)&&W.forEach(function(re){H._properties.push(new Di(re))})}var O,j;return O=k,(j=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&Qu(O.prototype,j),k}();function Bh(k){return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Bh(k)}function Ll(k,O){return Ll=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},Ll(k,O)}function _o(k,O){return!O||Bh(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function zs(k){return zs=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},zs(k)}var Ca=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&Ll(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=zs(O);if(j){var re=zs(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return _o(this,ee)});function W(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,W);var ee=[y.Z.PROFILES,y.Z.WIDTH,y.Z.HEIGHT,y.Z.SAR,y.Z.FRAMERATE,y.Z.AUDIO_SAMPLING_RATE,y.Z.MIME_TYPE,y.Z.SEGMENT_PROFILES,y.Z.CODECS,y.Z.MAXIMUM_SAP_PERIOD,y.Z.START_WITH_SAP,y.Z.MAX_PLAYOUT_RATE,y.Z.CODING_DEPENDENCY,y.Z.SCAN_TYPE,y.Z.FRAME_PACKING,y.Z.AUDIO_CHANNEL_CONFIGURATION,y.Z.CONTENT_PROTECTION,y.Z.ESSENTIAL_PROPERTY,y.Z.ESSENTIAL_PROPERTY+"_asArray",y.Z.SUPPLEMENTAL_PROPERTY,y.Z.INBAND_EVENT_STREAM];return V.call(this,y.Z.ADAPTATION_SET,ee,[new Ya(y.Z.REPRESENTATION,ee,[new Ya(y.Z.SUB_REPRESENTATION,ee)])])}return W}(Ya);function Oo(k){return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Oo(k)}function Ff(k,O){return Ff=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},Ff(k,O)}function _m(k,O){return!O||Oo(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function Uf(k){return Uf=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Uf(k)}var Iu=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&Ff(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Uf(O);if(j){var re=Uf(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return _m(this,ee)});function W(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,W);var ee=[y.Z.SEGMENT_BASE,y.Z.SEGMENT_TEMPLATE,y.Z.SEGMENT_LIST];return V.call(this,y.Z.PERIOD,ee,[new Ya(y.Z.ADAPTATION_SET,ee,[new Ya(y.Z.REPRESENTATION,ee)])])}return W}(Ya);function As(k){k=k||{};var O,j,V,W,ee,H=this.context,re=k.debug;return O={parse:function(he){var Ae,Te=window.performance.now();if(!(Ae=W.xml_str2json(he)))throw new Error("parsing the manifest failed");var ie=window.performance.now();Ae.Patch?((Ae=Ae.Patch).add_asArray&&Ae.add_asArray.forEach(function(ye){return ee.run(ye)}),Ae.replace_asArray&&Ae.replace_asArray.forEach(function(ye){return ee.run(ye)})):(Ae=Ae.MPD,ee.run(Ae));var _e=window.performance.now();return j.info("Parsing complete: ( xml2json: "+(ie-Te).toPrecision(3)+"ms, objectiron: "+(_e-ie).toPrecision(3)+"ms, total: "+((_e-Te)/1e3).toPrecision(3)+"s)"),Ae.protocol="DASH",Ae},getMatchers:function(){return V},getIron:function(){return ee}},j=re.getLogger(O),V=[new Of,new $u,new Ol,new Em,new vm],W=new xf({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:V}),ee=Ei(H).create({adaptationset:new Ca,period:new Iu}),O}As.__dashjs_factory_name="DashParser";var Ac=U.Z.getClassFactory(As);function Tm(k){k=k||{};var O,j,V,W,ee,H=this.context,re=k.debug,he=k.settings,Ae=(0,m.Z)(H).getInstance(),Te=(0,wt.Z)(H).getInstance(),ie=k.mssHandler,_e=k.errHandler;function ye(Oe){Ae.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:Oe.manifest})}function ze(Oe){var Ze=null;return Oe.indexOf("SmoothStreamingMedia")>-1?(ie&&(Ze=ie.createMssParser(),ie.createMssFragmentProcessor(),ie.registerEvents()),Ze):Oe.indexOf("MPD")>-1||Oe.indexOf("Patch")>-1?Ac(H).create({debug:re}):Ze}return O={load:function(Oe){var Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,We=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Se=new Date,ke=new Ks(Oe,st.w.MPD_TYPE);Ze&&(ke.serviceLocation=Ze),We&&(ke.queryParams=We),ke.requestStartDate||(ke.requestStartDate=Se),Ae.trigger(T.Z.MANIFEST_LOADING_STARTED,{request:ke}),V.load({request:ke,success:function(Ie,Ge,q){var le,ae,ue;if(W)if(q&&q!==Oe?(ae=Te.parseBaseUrl(q),le=q):(Te.isRelative(Oe)&&(Oe=Te.resolve(Oe,window.location.href)),ae=Te.parseBaseUrl(Oe)),Ge!="No Content")if(ee===null&&(ee=ze(Ie)),ee!==null){W.setMatchers(ee.getMatchers()),W.setIron(ee.getIron());try{ue=ee.parse(Ie)}catch(Pe){return void Ae.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}if(ue){if(ue.url=le||Oe,ue.originalUrl||(ue.originalUrl=ue.url),he&&he.get().streaming.enableManifestDurationMismatchFix&&ue.mediaPresentationDuration&&ue.Period_asArray.length>1){var te=ue.Period_asArray.reduce(function(Pe,xe){return Pe+xe.duration},0);!isNaN(te)&&ue.mediaPresentationDuration>te&&(j.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),ue.mediaPresentationDuration=te)}ue.baseUri=ae,ue.loadedTime=new Date,W.resolveManifestOnLoad(ue),Ae.trigger(T.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:Ie})}else Ae.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}else Ae.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,we.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))});else Ae.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(Ie,Ge,q){Ae.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(we.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,we.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(Oe,", ").concat(q))})}})},reset:function(){Ae.off(T.Z.XLINK_READY,ye,O),ie&&ie.reset(),W&&(W.reset(),W=null),V&&(V.abort(),V=null)}},j=re.getLogger(O),Ae.on(T.Z.XLINK_READY,ye,O),V=bi(H).create({errHandler:k.errHandler,dashMetrics:k.dashMetrics,mediaPlayerModel:k.mediaPlayerModel,requestModifier:k.requestModifier,urlUtils:Te,constants:E.Z,dashConstants:y.Z,errors:we,requestTimeout:k.settings.get().streaming.manifestRequestTimeout}),W=Oh(H).create({errHandler:_e,dashMetrics:k.dashMetrics,mediaPlayerModel:k.mediaPlayerModel,requestModifier:k.requestModifier,settings:k.settings}),ee=null,O}Tm.__dashjs_factory_name="ManifestLoader";var LE=U.Z.getClassFactory(Tm);function jh(){var k=this.context,O=(0,m.Z)(k).getInstance();return{error:function(j){O.trigger(T.Z.ERROR,{error:j})}}}jh.__dashjs_factory_name="ErrorHandler";var Sm=U.Z.getSingletonFactory(jh),wm=w(1715);function _i(){var k,O,j,V,W,ee,H=this.context,re=(0,m.Z)(H).getInstance();function he(Ae,Te){if(!Te||!Te.Period_asArray||Te.Period_asArray.length===0)return Promise.resolve();var ie=[];return Te.Period_asArray.forEach(function(_e){ie.push(function(ye,ze){return new Promise(function(Oe){if(ye&&ye.AdaptationSet_asArray&&ye.AdaptationSet_asArray.length!==0){var Ze=[];ye.AdaptationSet_asArray.forEach(function(We){O.getIsTypeOf(We,ze)&&Ze.push(function(Se,ke){return new Promise(function(Ie){if(Se.Representation_asArray&&Se.Representation_asArray.length!==0){var Ge=[],q=[];Se.Representation_asArray.forEach(function(le,ae){var ue=O.getCodec(Se,ae,!1),te=function(Pe,xe,je){switch(Pe){case E.Z.VIDEO:return function(Me,ve){return{codec:ve,width:Me.width||null,height:Me.height||null,framerate:Me.frameRate||null,bitrate:Me.bandwidth||null}}(xe,je);case E.Z.AUDIO:return function(Me,ve){var De=Me.audioSamplingRate||null;return{codec:ve,bitrate:Me.bandwidth||null,samplerate:De}}(xe,je);default:return null}}(ke,le,ue);q.push(te),Ge.push(j.supportsCodec(te,ke))}),Promise.all(Ge).then(function(le){Se.Representation_asArray=Se.Representation_asArray.filter(function(ae,ue){return le[ue]||ee.debug("[Stream] Codec ".concat(q[ue].codec," not supported ")),le[ue]}),Ie()}).catch(function(){Ie()})}else Ie()})}(We,ze))}),Promise.all(Ze).then(function(){ye.AdaptationSet_asArray=ye.AdaptationSet_asArray.filter(function(We){var Se=We.Representation_asArray&&We.Representation_asArray.length>0;return Se||(re.trigger(T.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:We}),ee.warn("AdaptationSet has been removed because of no supported Representation")),Se}),Oe()}).catch(function(){Oe()})}else Oe()})}(_e,Ae))}),Promise.all(ie)}return k={setConfig:function(Ae){Ae&&(Ae.adapter&&(O=Ae.adapter),Ae.capabilities&&(j=Ae.capabilities),Ae.settings&&(V=Ae.settings),Ae.customParametersModel&&(W=Ae.customParametersModel))},filterUnsupportedFeatures:function(Ae){return new Promise(function(Te){var ie=[];ie.push(he(E.Z.VIDEO,Ae)),ie.push(he(E.Z.AUDIO,Ae)),Promise.all(ie).then(function(){V.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(_e){_e&&_e.Period_asArray&&_e.Period_asArray.length!==0&&_e.Period_asArray.forEach(function(ye){ye.AdaptationSet_asArray=ye.AdaptationSet_asArray.filter(function(ze){return!ze.Representation_asArray||ze.Representation_asArray.length===0||(ze.Representation_asArray=ze.Representation_asArray.filter(function(Oe){var Ze=O.getEssentialPropertiesForRepresentation(Oe);if(Ze&&Ze.length>0)for(var We=0;We<Ze.length;){if(!j.supportsEssentialProperty(Ze[We]))return ee.debug("[Stream] EssentialProperty not supported: "+Ze[We].schemeIdUri),!1;We+=1}return!0}),ze.Representation_asArray&&ze.Representation_asArray.length>0)})})}(Ae),function(_e){var ye=W.getCustomCapabilitiesFilters();ye&&ye.length!==0&&_e&&_e.Period_asArray&&_e.Period_asArray.length!==0&&_e.Period_asArray.forEach(function(ze){ze.AdaptationSet_asArray=ze.AdaptationSet_asArray.filter(function(Oe){return!Oe.Representation_asArray||Oe.Representation_asArray.length===0||(Oe.Representation_asArray=Oe.Representation_asArray.filter(function(Ze){return!ye.some(function(We){return!We(Ze)})}),Oe.Representation_asArray&&Oe.Representation_asArray.length>0)})})}(Ae),Te()}).catch(function(){Te()})})}},ee=(0,M.Z)(H).getInstance().getLogger(k),k}_i.__dashjs_factory_name="CapabilitiesFilter";var kE=U.Z.getSingletonFactory(_i),Am=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function Ys(){var k;return{initialize:function(O){if(k=new Am,!O)return null;var j=O.indexOf("#");if(j!==-1)for(var V=O.substr(j+1).split("&"),W=0,ee=V.length;W<ee;++W){var H=V[W],re=H.indexOf("=");if(re!==-1){var he=H.substring(0,re);k.hasOwnProperty(he)&&(k[he]=H.substr(re+1))}}},getURIFragmentData:function(){return k}}}Ys.__dashjs_factory_name="URIFragmentModel";var Ra=U.Z.getSingletonFactory(Ys);function Ju(){var k,O=this.context,j=(0,m.Z)(O).getInstance();return{getValue:function(){return k},setValue:function(V){k=V,V&&j.trigger(T.Z.MANIFEST_LOADED,{data:V})}}}Ju.__dashjs_factory_name="ManifestModel";var Ic=U.Z.getSingletonFactory(Ju),bc=-.5;function Or(){var k,O,j,V,W=this.context,ee=(0,qe.Z)(W).getInstance();function H(Ae,Te){return isNaN(Ae)?0:Ae>0?(Te&&O.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Ae<bc?(Te&&O.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(bc,": ").concat(-50,"% playback speed.")),bc):Ae}function re(Ae,Te){return isNaN(Ae)?0:Ae<0?(Te&&O.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Ae>1?(Te&&O.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):Ae}function he(){var Ae=ee.get().streaming.buffer.stableBufferTime>0?ee.get().streaming.buffer.stableBufferTime:ee.get().streaming.buffer.fastSwitchEnabled?20:12,Te=j.getLiveDelay();return!isNaN(Te)&&Te>0?Math.min(Ae,Te):Ae}return k={getCatchupMaxDrift:function(){if(!isNaN(ee.get().streaming.liveCatchup.maxDrift)&&ee.get().streaming.liveCatchup.maxDrift>0)return ee.get().streaming.liveCatchup.maxDrift;var Ae=V.getServiceDescriptionSettings();return Ae&&Ae.liveCatchup&&!isNaN(Ae.liveCatchup.maxDrift)&&Ae.liveCatchup.maxDrift>0?Ae.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return ee.get().streaming.liveCatchup.enabled!==null?ee.get().streaming.liveCatchup.enabled:j.getInitialCatchupModeActivated()},getStableBufferTime:he,getInitialBufferLevel:function(){var Ae=ee.get().streaming.buffer.initialBufferLevel;return isNaN(Ae)||Ae<0?0:Math.min(he(),Ae)},getRetryAttemptsForType:function(Ae){var Te=isNaN(ee.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:ee.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return j.getLowLatencyModeEnabled()?ee.get().streaming.retryAttempts[Ae]*Te:ee.get().streaming.retryAttempts[Ae]},getRetryIntervalsForType:function(Ae){var Te=isNaN(ee.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:ee.get().streaming.retryIntervals.lowLatencyReductionFactor;return j.getLowLatencyModeEnabled()?ee.get().streaming.retryIntervals[Ae]/Te:ee.get().streaming.retryIntervals[Ae]},getCatchupPlaybackRates:function(Ae){var Te=ee.get().streaming.liveCatchup.playbackRate;if(!isNaN(Te.min)||!isNaN(Te.max))return{min:H(Te.min,Ae),max:re(Te.max,Ae)};var ie=V.getServiceDescriptionSettings();if(ie&&ie.liveCatchup&&(!isNaN(ie.liveCatchup.playbackRate.min)||!isNaN(ie.liveCatchup.playbackRate.max))){var _e=ie.liveCatchup.playbackRate;return{min:H(_e.min,Ae),max:re(_e.max,Ae)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(Ae,Te){try{var ie=ee.get().streaming.abr[Ae][Te];if(!isNaN(ie)&&ie!==-1)return ie;var _e=V.getServiceDescriptionSettings();return _e&&_e[Ae]&&!isNaN(_e[Ae][Te])?_e[Ae][Te]:-1}catch(ye){return-1}},setConfig:function(Ae){Ae.playbackController&&(j=Ae.playbackController),Ae.serviceDescriptionController&&(V=Ae.serviceDescriptionController)},reset:function(){}},O=(0,M.Z)(W).getInstance().getLogger(k),k}Or.__dashjs_factory_name="MediaPlayerModel";var el=U.Z.getSingletonFactory(Or),Zh=w(1767);function Bf(k){var O=(k=k||{}).abrController,j=k.switchHistory,V=k.droppedFramesHistory,W=k.currentRequest,ee=k.useBufferOccupancyABR,H=k.useL2AABR,re=k.useLoLPABR,he=k.streamProcessor?k.streamProcessor.getScheduleController():null,Ae=k.streamProcessor?k.streamProcessor.getRepresentationInfo():null,Te=k.videoModel?k.videoModel:null;function ie(){return Ae?Ae.mediaInfo:null}return{getMediaType:function(){var _e=ie();return _e?_e.type:null},getMediaInfo:ie,getDroppedFramesHistory:function(){return V},getCurrentRequest:function(){return W},getSwitchHistory:function(){return j},getStreamInfo:function(){var _e=ie();return _e?_e.streamInfo:null},getScheduleController:function(){return he},getAbrController:function(){return O},getRepresentationInfo:function(){return Ae},useBufferOccupancyABR:function(){return ee},useL2AABR:function(){return H},useLoLPABR:function(){return re},getVideoModel:function(){return Te}}}Bf.__dashjs_factory_name="RulesContext";var Cc=U.Z.getClassFactory(Bf),Rc=w(2068);function qh(){var k=[],O=[];return{push:function(j){j.newValue===Rc.Z.NO_CHANGE&&(j.newValue=j.oldValue),k[j.oldValue]||(k[j.oldValue]={noDrops:0,drops:0,dropSize:0});var V=j.newValue-j.oldValue,W=V<0?1:0,ee=W?-V:0,H=W?0:1;if(k[j.oldValue].drops+=W,k[j.oldValue].dropSize+=ee,k[j.oldValue].noDrops+=H,O.push({idx:j.oldValue,noDrop:H,drop:W,dropSize:ee}),O.length>8){var re=O.shift();k[re.idx].drops-=re.drop,k[re.idx].dropSize-=re.dropSize,k[re.idx].noDrops-=re.noDrop}},getSwitchRequests:function(){return k},reset:function(){k=[],O=[]}}}qh.__dashjs_factory_name="SwitchRequestHistory";var Im=U.Z.getClassFactory(qh);function bm(){var k={},O={},j={};return{push:function(V,W,ee){if(W){k[V]||(k[V]=[],O[V]=0,j[V]=0);var H=ee&&ee.droppedVideoFrames?ee.droppedVideoFrames:0,re=ee&&ee.totalVideoFrames?ee.totalVideoFrames:0,he=H-O[V];O[V]=H;var Ae=re-j[V];j[V]=re;var Te=k[V];isNaN(W)||(Te[W]?(Te[W].droppedVideoFrames+=he,Te[W].totalVideoFrames+=Ae):Te[W]={droppedVideoFrames:he,totalVideoFrames:Ae})}},getFrameHistory:function(V){return k[V]},clearForStream:function(V){try{delete k[V],delete O[V],delete j[V]}catch(W){}},reset:function(){k={},O={},j={}}}}bm.__dashjs_factory_name="DroppedFramesHistory";var FE=U.Z.getClassFactory(bm);function xc(k){var O,j,V,W,ee,H=this.context,re=(k=k||{}).settings,he=(0,m.Z)(H).getInstance();function Ae(Oe,Ze,We,Se){var ke=Math.pow(.5,We/Se.fast);Oe.fastEstimate=(1-ke)*Ze+ke*Oe.fastEstimate;var Ie=Math.pow(.5,We/Se.slow);Oe.slowEstimate=(1-Ie)*Ze+Ie*Oe.slowEstimate,Oe.totalWeight+=We}function Te(Oe,Ze,We){return re.get().streaming.abr.movingAverageMethod!==E.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(Se,ke){var Ie=Se?ee.throughputHalfLife:ee.latencyHalfLife,Ge=Se?V[ke]:W[ke];if(!Ge||Ge.totalWeight<=0)return NaN;var q=Ge.fastEstimate/(1-Math.pow(.5,Ge.totalWeight/Ie.fast)),le=Ge.slowEstimate/(1-Math.pow(.5,Ge.totalWeight/Ie.slow));return Se?Math.min(q,le):Math.max(q,le)}(Oe,Ze):function(Se,ke,Ie){var Ge=function(le,ae,ue){var te,Pe;if(le?(te=O[ae],Pe=ue?3:4):(te=j[ae],Pe=4),te){if(Pe>=te.length)Pe=te.length;else if(le)for(var xe=1;xe<Pe;++xe){var je=te[te.length-xe]/te[te.length-xe-1];if((je>=1.3||je<=.7692307692307692)&&(Pe+=1)===te.length)break}}else Pe=0;return Pe}(Se,ke,Ie),q=(Se?O:j)[ke];return Ge!==0&&q&&q.length!==0?(q=q.slice(-Ge)).reduce(function(le,ae){return le+ae})/q.length:NaN}(Oe,Ze,We)}function ie(Oe,Ze){return Te(!0,Oe,Ze)}function _e(Oe){O[Oe]=O[Oe]||[],j[Oe]=j[Oe]||[],V[Oe]=V[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0},W[Oe]=W[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function ye(){O={},j={},V={},W={}}var ze={push:function(Oe,Ze,We){if(Ze.trace&&Ze.trace.length){var Se,ke=Ze.tresponse.getTime()-Ze.trequest.getTime()||1,Ie=Ze._tfinish.getTime()-Ze.tresponse.getTime()||1,Ge=Ze.trace.reduce(function(ue,te){return ue+te.b[0]},0),q=0;if((Se=Ze._fileLoaderType&&Ze._fileLoaderType===E.Z.FILE_LOADER_TYPES.FETCH?Ze.trace.reduce(function(ue,te){return ue+te.d},0):We?Ie:ke+Ie)!==0&&(q=Math.round(8*Ge/Se)),Ze.cmsd){var le=Ze.cmsd.dynamic&&Ze.cmsd.dynamic.etp?Ze.cmsd.dynamic.etp:null;if(le){var ae=re.get().streaming.cmsd.abr.etpWeightRatio;ae>0&&ae<=1&&(q=q*(1-ae)+le*ae)}}if(_e(Oe),function(ue,te,Pe){return ue===E.Z.VIDEO?Pe<re.get().streaming.cacheLoadThresholds[E.Z.VIDEO]:ue===E.Z.AUDIO?Pe<re.get().streaming.cacheLoadThresholds[E.Z.AUDIO]:void 0}(Oe,0,Ie)){if(O[Oe].length>0&&!O[Oe].hasCachedEntries)return;O[Oe].hasCachedEntries=!0}else O[Oe]&&O[Oe].hasCachedEntries&&function(ue){delete O[ue],delete j[ue],delete V[ue],delete W[ue],_e(ue)}(Oe);O[Oe].push(q),he.trigger(_.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:q,mediaType:Oe,httpRequest:Ze}),O[Oe].length>20&&O[Oe].shift(),j[Oe].push(ke),j[Oe].length>20&&j[Oe].shift(),Ae(V[Oe],q,.001*Ie,ee.throughputHalfLife),Ae(W[Oe],ke,1,ee.latencyHalfLife)}},getAverageThroughput:ie,getSafeAverageThroughput:function(Oe,Ze){var We=ie(Oe,Ze);return isNaN(We)||(We*=re.get().streaming.abr.bandwidthSafetyFactor),We},getAverageLatency:function(Oe){return Te(!1,Oe)},reset:ye};return ee={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},ye(),ze}xc.__dashjs_factory_name="ThroughputHistory";var UE=U.Z.getClassFactory(xc);function jf(){var k,O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke,Ie,Ge,q,le,ae,ue,te,Pe=this.context,xe=(0,M.Z)(Pe).getInstance(),je=(0,m.Z)(Pe).getInstance();function Me(){W={},ee={},re={},H={},ke={},q={},le={},ae={},Ae===void 0&&(Ae=!1),Ie&&Ie.reset(),Se=void 0,Ie=void 0,Ge=void 0,clearTimeout(he),he=null}function ve(at){var St=at.request.mediaType,Qt=at.streamId;if(St&&Qt&&H[Qt]&&te.get().streaming.abr.autoSwitchBitrate[St]){var Pt=H[Qt][St];if(Pt){var un=Cc(Pe).create({abrController:k,streamProcessor:Pt,currentRequest:at.request,useBufferOccupancyABR:q[St],useL2AABR:le[St],useLoLPABR:ae[St],videoModel:ye}),an=j.shouldAbandonFragment(un,Qt);an.quality>Rc.Z.NO_CHANGE&&Pt.getFragmentModel().getRequests({state:X.FRAGMENT_MODEL_LOADING,index:at.request.index})[0]&&(re[Qt][St].state=P.Z.ABANDON_LOAD,ke[Qt][St].reset(),ke[Qt][St].push({oldValue:yt(St,Qt),newValue:an.quality,confidence:1,reason:an.reason}),pt(St,V.getActiveStreamInfo(),an.quality,an.reason),clearTimeout(he),he=setTimeout(function(){re[Qt][St].state=P.Z.ALLOW_LOAD,he=null},te.get().streaming.abandonLoadTimeout))}}}function De(at){at.mediaType===E.Z.VIDEO&&(Se!==void 0&&Ie.push(at.streamId,Se,ye.getPlaybackQuality()),Se=at.newQuality)}function $e(at){var St,Qt;at.metric!==P.Z.HTTP_REQUEST||!at.value||at.value.type!==st.w.MEDIA_SEGMENT_TYPE||at.mediaType!==E.Z.AUDIO&&at.mediaType!==E.Z.VIDEO||Ge.push(at.mediaType,at.value,te.get().streaming.abr.useDeadTimeLatency),at.metric!==P.Z.BUFFER_LEVEL||at.mediaType!==E.Z.AUDIO&&at.mediaType!==E.Z.VIDEO||(St=at.mediaType,Qt=.001*at.value.level,te.get().streaming.abr.ABRStrategy===E.Z.ABR_STRATEGY_DYNAMIC&&function(Pt,un){try{var an=ze.getStableBufferTime(),Jt=an,Bn=.5*an,kn=q[Pt],mr=un>(kn?Bn:Jt);q[Pt]=mr,mr!==kn&&(mr?O.info("["+Pt+"] switching from throughput to buffer occupancy ABR rule (buffer: "+un.toFixed(3)+")."):O.info("["+Pt+"] switching from buffer occupancy to throughput ABR rule (buffer: "+un.toFixed(3)+")."))}catch(vr){O.error(vr)}}(St,Qt))}function mt(at,St){try{var Qt;return W[St]=W[St]||{},W[St].hasOwnProperty(at)||(W[St][at]=0),Qt=function(Pt,un){var an=W[un][Pt],Jt=an;if(!H[un]||!H[un][Pt])return Jt;var Bn=ct(Pt,un);Bn!==void 0&&(Jt=Math.max(an,Bn));var kn=function(mr,vr){try{var bt=ze.getAbrBitrateParameter("maxBitrate",mr);return bt>-1?jt(H[vr][mr].getMediaInfo(),bt,vr):void 0}catch(tn){return}}(Pt,un);return kn!==void 0&&(Jt=Math.min(Jt,kn)),Jt}(at,St),Qt=function(Pt,un,an){var Jt=W[an][un],Bn=te.get().streaming.abr.maxRepresentationRatio[un];return isNaN(Bn)||Bn>=1||Bn<0?Pt:Math.min(Pt,Math.round(Jt*Bn))}(Qt,at,St),Qt=function(Pt,un,an){if(un!==E.Z.VIDEO||!te.get().streaming.abr.limitBitrateByPortal||!H[an]||!H[an][un])return Pt;Ae||xn();var Jt=H[an][un].getStreamInfo(),Bn=_e.getAdaptationForType(Jt.index,un,Jt).Representation_asArray,kn=Pt;if(Te>0&&ie>0){for(;kn>0&&Bn[kn]&&Te<Bn[kn].width&&Te-Bn[kn-1].width<Bn[kn].width-Te;)kn-=1;for(;kn<Bn.length-1&&Bn[kn].width===Bn[kn+1].width;)kn+=1}return kn}(Qt,at,St),te.get().streaming.cmsd.enabled&&te.get().streaming.cmsd.abr.applyMb&&(Qt=function(Pt,un,an){if(un!=="video")return Pt;var Jt=Ze.getMaxBitrate(un);if(Jt<0)return Pt;var Bn=Vt(an,"audio",yt("audio",an));Jt-=Bn?Bn.bitrate/1e3:0;var kn=jt(H[an][un].getMediaInfo(),Jt,an);return O.debug("Stream ID: "+an+" ["+un+"] Apply max bit rate from CMSD: "+Jt),Math.min(Pt,kn)}(Qt,at,St)),Qt}catch(Pt){return}}function ct(at,St){try{return function(Qt,Pt){try{var un=ze.getAbrBitrateParameter("minBitrate",Qt);if(un>-1){var an=H[Pt][Qt].getMediaInfo(),Jt=Zt(an),Bn=jt(an,un,Pt);return Jt[Bn]&&Bn<Jt.length-1&&Jt[Bn].bitrate<1e3*un&&Bn++,Bn}return}catch(kn){return}}(at,St)}catch(Qt){return}}function yt(at){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return St||(St=V.getActiveStreamInfo().id),at&&H[St]&&H[St][at]&&St?(ee[St]=ee[St]||{},ee[St].hasOwnProperty(at)||(ee[St][at]=0),ee[St][at]):0}catch(Qt){return 0}}function pt(at,St,Qt){var Pt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(St&&St.id&&at){var un=St.id,an=yt(at,un);(0,ge.SE)(Qt);var Jt=mt(at,un);Qt!==an&&Qt>=0&&Qt<=Jt&&Gt(at,an,Qt,Jt,Pt,un)}}function Gt(at,St,Qt,Pt,un,an){if(at&&H[an]&&H[an][at]){var Jt=H[an][at].getStreamInfo(),Bn=Jt&&Jt.manifestInfo&&Jt.manifestInfo.isDynamic,kn=ue.getCurrentBufferLevel(at);O.info("Stream ID: "+an+" ["+at+"] switch from "+St+" to "+Qt+"/"+Pt+" (buffer: "+kn+") "+(un?JSON.stringify(un):".")),ee[an]=ee[an]||{},ee[an][at]=Qt;var mr=Vt(an,at,Qt);je.trigger(T.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:St,newQuality:Qt,reason:un,streamInfo:Jt,bitrateInfo:mr,maxIdx:Pt,mediaType:at},{streamId:Jt.id,mediaType:at});var vr=Ge.getAverageThroughput(at,Bn);isNaN(vr)||We.setSavedBitrateSettings(at,vr)}}function Vt(at,St,Qt){if(St&&H&&H[at]&&H[at][St]){var Pt=Zt(H[at][St].getMediaInfo());return Pt[Qt]?Pt[Qt]:null}return null}function jt(at,St,Qt){var Pt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,un=at&&at.type?H[Qt][at.type].getRepresentationInfo():null;if(te.get().streaming.abr.useDeadTimeLatency&&Pt&&un&&un.fragmentDuration){Pt/=1e3;var an=un.fragmentDuration;if(Pt>an)return 0;var Jt=Pt/an;St*=1-Jt}for(var Bn=Zt(at),kn=Bn.length-1;kn>=0;kn--){var mr=Bn[kn];if(1e3*St>=mr.bitrate)return kn}return 0}function Zt(at){var St=[];if(!at||!at.bitrateList)return St;for(var Qt,Pt=at.bitrateList,un=at.type,an=0,Jt=Pt.length;an<Jt;an++)(Qt=new Es).mediaType=un,Qt.qualityIndex=an,Qt.bitrate=Pt[an].bandwidth,Qt.width=Pt[an].width,Qt.height=Pt[an].height,Qt.scanType=Pt[an].scanType,St.push(Qt);return St}function xn(){if(ye){var at=te.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;Te=ye.getClientWidth()*at,ie=ye.getClientHeight()*at}}return k={initialize:function(){Ie=FE(Pe).create(),Ge=UE(Pe).create({settings:te}),(j=(0,Zh.Z)(Pe).create({dashMetrics:ue,customParametersModel:Oe,mediaPlayerModel:ze,settings:te})).initialize(),je.on(_.Z.QUALITY_CHANGE_RENDERED,De,k),je.on(_.Z.METRIC_ADDED,$e,k),je.on(T.Z.LOADING_PROGRESS,ve,k)},isPlayingAtTopQuality:function(at){var St=at?at.id:null,Qt=yt(E.Z.AUDIO,St),Pt=yt(E.Z.VIDEO,St);return Qt===mt(E.Z.AUDIO,St)&&Pt===mt(E.Z.VIDEO,St)},updateTopQualityIndex:function(at){var St=at.type,Qt=at.streamInfo.id,Pt=at.representationCount-1;return W[Qt]=W[Qt]||{},W[Qt][St]=Pt,Pt},clearDataForStream:function(at){Ie&&Ie.clearForStream(at),H[at]&&delete H[at],ke[at]&&delete ke[at],re[at]&&delete re[at]},getThroughputHistory:function(){return Ge},getBitrateList:Zt,getQualityForBitrate:jt,getTopBitrateInfoFor:function(at){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(St||(St=V.getActiveStreamInfo().id),at&&H&&H[St]&&H[St][at]){var Qt=mt(at,St),Pt=Zt(H[St][at].getMediaInfo());return Pt[Qt]?Pt[Qt]:null}return null},getMinAllowedIndexFor:ct,getMaxAllowedIndexFor:mt,getInitialBitrateFor:function(at,St){if(function(){if(!We||!We.hasOwnProperty("getSavedBitrateSettings"))throw new Error(E.Z.MISSING_CONFIG_ERROR)}(),at===E.Z.TEXT)return NaN;var Qt=We.getSavedBitrateSettings(at),Pt=ze.getAbrBitrateParameter("initialBitrate",at),un=te.get().streaming.abr.initialRepresentationRatio[at];if(Pt===-1)if(un>-1){var an=H[St][at].getStreamInfo(),Jt=_e.getAdaptationForType(an.index,at,an).Representation_asArray;Pt=Array.isArray(Jt)?Jt[Math.max(Math.round(Jt.length*un)-1,0)].bandwidth/1e3:0}else Pt=isNaN(Qt)?at===E.Z.VIDEO?1e3:100:Qt;return Pt},getQualityFor:yt,getAbandonmentStateFor:function(at,St){return re[at]&&re[at][St]?re[at][St].state:null},setPlaybackQuality:pt,checkPlaybackQuality:function(at,St){try{if(!(at&&H&&H[St]&&H[St][at]))return!1;if(Ie){var Qt=ye.getPlaybackQuality();Qt&&Ie.push(St,Se,Qt)}if(!te.get().streaming.abr.autoSwitchBitrate[at])return!1;var Pt=yt(at,St),un=Cc(Pe).create({abrController:k,switchHistory:ke[St][at],droppedFramesHistory:Ie,streamProcessor:H[St][at],currentValue:Pt,useBufferOccupancyABR:q[at],useL2AABR:le[at],useLoLPABR:ae[at],videoModel:ye}),an=ct(at,St),Jt=mt(at,St),Bn=j.getMaxQuality(un),kn=Bn.quality;return an!==void 0&&(kn>Rc.Z.NO_CHANGE?kn:Pt)<an&&(kn=an),kn>Jt&&(kn=Jt),ke[St][at].push({oldValue:Pt,newValue:kn}),kn>Rc.Z.NO_CHANGE&&kn!==Pt&&(re[St][at].state===P.Z.ALLOW_LOAD||kn<Pt)&&(Gt(at,Pt,kn,Jt,Bn.reason,St),!0)}catch(mr){return!1}},setElementSize:xn,setWindowResizeEventCalled:function(at){Ae=at},registerStreamType:function(at,St){var Qt=St.getStreamInfo().id;H[Qt]||(H[Qt]={}),ke[Qt]||(ke[Qt]={}),re[Qt]||(re[Qt]={}),ke[Qt][at]=Im(Pe).create(),H[Qt][at]=St,re[Qt][at]={},re[Qt][at].state=P.Z.ALLOW_LOAD,function(Pt){var un=te.get().streaming.abr.ABRStrategy;un===E.Z.ABR_STRATEGY_L2A?(q[Pt]=!1,ae[Pt]=!1,le[Pt]=!0):un===E.Z.ABR_STRATEGY_LoLP?(q[Pt]=!1,ae[Pt]=!0,le[Pt]=!1):un===E.Z.ABR_STRATEGY_BOLA?(q[Pt]=!0,ae[Pt]=!1,le[Pt]=!1):un===E.Z.ABR_STRATEGY_THROUGHPUT?(q[Pt]=!1,ae[Pt]=!1,le[Pt]=!1):un===E.Z.ABR_STRATEGY_DYNAMIC&&(q[Pt]=!(!q||!q[Pt])&&q[Pt],ae[Pt]=!1,le[Pt]=!1)}(at),at===E.Z.VIDEO&&xn()},unRegisterStreamType:function(at,St){try{H[at]&&H[at][St]&&delete H[at][St],ke[at]&&ke[at][St]&&delete ke[at][St],re[at]&&re[at][St]&&delete re[at][St]}catch(Qt){}},setConfig:function(at){at&&(at.streamController&&(V=at.streamController),at.domStorage&&(We=at.domStorage),at.mediaPlayerModel&&(ze=at.mediaPlayerModel),at.customParametersModel&&(Oe=at.customParametersModel),at.cmsdModel&&(Ze=at.cmsdModel),at.dashMetrics&&(ue=at.dashMetrics),at.adapter&&(_e=at.adapter),at.videoModel&&(ye=at.videoModel),at.settings&&(te=at.settings))},reset:function(){Me(),je.off(T.Z.LOADING_PROGRESS,ve,k),je.off(_.Z.QUALITY_CHANGE_RENDERED,De,k),je.off(_.Z.METRIC_ADDED,$e,k),j&&j.reset()}},O=xe.getLogger(k),Me(),k}jf.__dashjs_factory_name="AbrController";var Gh=U.Z.getSingletonFactory(jf);Gh.QUALITY_DEFAULT=0,U.Z.updateSingletonFactory(jf.__dashjs_factory_name,Gh);var BE=Gh,Cm=new Map([[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Hh(){var k,O,j,V,W,ee,H,re,he=this.context,Ae=(0,m.Z)(he).getInstance(),Te=[];function ie(){j&&(j.playbackRate=1,j.removeEventListener("canplay",ie))}function _e(){return Te.length>0}function ye(){if(j&&_e()&&j.playbackRate===0){var Ie=document.createEvent("Event");Ie.initEvent("waiting",!0,!1),j.dispatchEvent(Ie)}}function ze(Ie,Ge){j&&j.addEventListener(Ie,Ge)}function Oe(Ie,Ge){j&&j.removeEventListener(Ie,Ge)}function Ze(){return j?j.readyState:NaN}function We(){return j?j.buffered:null}function Se(Ie,Ge,q,le,ae){if(j){for(var ue=0;ue<j.textTracks.length;ue++)if(j.textTracks[ue].kind===Ie&&(!Ge||j.textTracks[ue].label==Ge)&&j.textTracks[ue].language===q&&j.textTracks[ue].isTTML===le&&j.textTracks[ue].isEmbedded===ae)return j.textTracks[ue]}return null}function ke(Ie,Ge){return Ie===E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Ze()>=Ie?(Ge(),null):function(q,le){var ae=function ue(){Oe(q,ue),le(q)};return ze(q,ae),{func:ae,event:q}}(Cm.get(Ie),Ge)}return k={addEventListener:ze,addTextTrack:function(Ie,Ge,q,le,ae){if(!j)return null;var ue=Se(Ie,Ge,q,le,ae);return ue||((ue=j.addTextTrack(Ie,Ge,q)).isEmbedded=ae,ue.isTTML=le),ue},appendChild:function(Ie){j&&(j.appendChild(Ie),Ie.isTTML!==void 0&&(j.textTracks[j.textTracks.length-1].isTTML=Ie.isTTML,j.textTracks[j.textTracks.length-1].isEmbedded=Ie.isEmbedded))},getBufferRange:We,getClientHeight:function(){return j?j.clientHeight:NaN},getClientWidth:function(){return j?j.clientWidth:NaN},getElement:function(){return j},getEnded:function(){return j?j.ended:null},getPlaybackQuality:function(){if(!j)return null;var Ie="webkitDroppedFrameCount"in j&&"webkitDecodedFrameCount"in j,Ge=null;return"getVideoPlaybackQuality"in j?Ge=j.getVideoPlaybackQuality():Ie&&(Ge={droppedVideoFrames:j.webkitDroppedFrameCount,totalVideoFrames:j.webkitDroppedFrameCount+j.webkitDecodedFrameCount,creationTime:new Date}),Ge},getPlaybackRate:function(){return j?j.playbackRate:null},getPlayedRanges:function(){return j?j.played:null},getReadyState:Ze,getSource:function(){return j?j.src:null},getTTMLRenderingDiv:function(){return ee},getTextTrack:Se,getTextTracks:function(){return j?j.textTracks:[]},getTime:function(){return j?isNaN(V)?j.currentTime:V:null},getVideoHeight:function(){return j?j.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(j){var Ie=j.parentNode.host||j.parentNode;return Ie?j.getBoundingClientRect().left-Ie.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(j){var Ie=j.parentNode.host||j.parentNode;return Ie?j.getBoundingClientRect().top-Ie.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return j?j.videoWidth:NaN},getVttRenderingDiv:function(){return H},initialize:function(){Ae.on(T.Z.PLAYBACK_PLAYING,ye,this)},isPaused:function(){return j?j.paused:null},isSeeking:function(){return j?j.seeking||!isNaN(V):null},isStalled:_e,pause:function(){j&&(j.pause(),j.autoplay=!1)},play:function(){if(j){j.autoplay=!0;var Ie=j.play();Ie&&Ie.catch&&typeof Promise<"u"&&Ie.catch(function(Ge){Ge.name==="NotAllowedError"&&Ae.trigger(T.Z.PLAYBACK_NOT_ALLOWED),O.warn("Caught pending play exception - continuing (".concat(Ge,")"))})}},removeChild:function(Ie){j&&j.removeChild(Ie)},removeEventListener:Oe,reset:function(){clearTimeout(re),Ae.off(T.Z.PLAYBACK_PLAYING,ye,this)},setCurrentTime:function(Ie,Ge){j&&(W&&W.func&&W.event&&Oe(W.event,W.func),V=Ie,W=ke(E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(j)if(j.currentTime!==V)try{V=Ge?function(q){var le=We(),ae=q,ue=9999999999;if(le)for(var te=0;te<le.length;te++){var Pe=le.start(te),xe=le.end(te),je=Math.abs(Pe-q),Me=Math.abs(xe-q);if(q>=Pe&&q<=xe)return q;je<ue&&(ue=je,ae=Pe),Me<ue&&(ue=Me,ae=xe)}return ae}(V):V,isNaN(V)||(j.currentTime=V),V=NaN}catch(q){j.readyState===0&&q.code===q.INVALID_STATE_ERR&&(re=setTimeout(function(){j.currentTime=V,V=NaN},400))}else V=NaN}))},setElement:function(Ie){if(!(Ie==null||Ie&&/^(VIDEO|AUDIO)$/i.test(Ie.nodeName)))throw"element is not video or audio DOM type!";(j=Ie)&&(j.preload="auto")},setPlaybackRate:function(Ie){var Ge=arguments.length>1&&arguments[1]!==void 0&&arguments[1];j&&(!Ge&&j.readyState<=2&&Ie>0?j.addEventListener("canplay",ie):j.playbackRate=Ie)},setSource:function(Ie){j&&(Ie?j.src=Ie:(j.removeAttribute("src"),j.load()))},setStallState:function(Ie,Ge){(function(q,le){le?function(ae){ae!==null&&j&&!j.seeking&&Te.indexOf(ae)===-1&&Te.push(ae)}(q):function(ae){var ue=Te.indexOf(ae);ae!==null&&ue!==-1&&Te.splice(ue,1)}(q)})(Ie,Ge)},setTTMLRenderingDiv:function(Ie){(ee=Ie).style.position="absolute",ee.style.display="flex",ee.style.overflow="hidden",ee.style.pointerEvents="none",ee.style.top=0,ee.style.left=0},setVttRenderingDiv:function(Ie){H=Ie},waitForReadyState:ke,setDisableRemotePlayback:function(Ie){j&&(j.disableRemotePlayback=Ie)}},O=(0,M.Z)(he).getInstance().getLogger(k),V=NaN,k}Hh.__dashjs_factory_name="VideoModel";var jE=U.Z.getSingletonFactory(Hh),Rm=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],Vh="dashjs_?_bitrate",tl="dashjs_?_settings",Is="localStorage",xm="lastBitrate",Nm="lastMediaSettings";function Mm(k){k=k||{};var O,j,V,W=this.context,ee=k.settings;function H(Te){if(V!==void 0)return V;var ie;V=!1;try{typeof window<"u"&&(ie=window[Te])}catch(_e){return j.warn("DOMStorage access denied: "+_e.message),V}if(!ie||Te!==Is)return V;try{ie.setItem("1","1"),ie.removeItem("1"),V=!0}catch(_e){j.warn("DOMStorage is supported, but cannot be used: "+_e.message)}return V}function re(){var Te=6e5;return Math.round(new Date().getTime()/Te)*Te}function he(Te,ie){return H(Te)&&ee.get().streaming[ie+"CachingInfo"].enabled}function Ae(){if(!ee)throw new Error(E.Z.MISSING_CONFIG_ERROR)}return O={getSavedBitrateSettings:function(Te){if(Ae(),!ee.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var ie=NaN;if(he(Is,xm)){var _e=Vh.replace(/\?/,Te);try{var ye=JSON.parse(localStorage.getItem(_e))||{},ze=new Date().getTime()-parseInt(ye.timestamp,10)>=ee.get().streaming.lastBitrateCachingInfo.ttl||!1,Oe=parseFloat(ye.bitrate);isNaN(Oe)||ze?ze&&localStorage.removeItem(_e):(ie=Oe,j.debug("Last saved bitrate for "+Te+" was "+Oe))}catch(Ze){return null}}return ie},setSavedBitrateSettings:function(Te,ie){if(he(Is,xm)&&ie){var _e=Vh.replace(/\?/,Te);try{localStorage.setItem(_e,JSON.stringify({bitrate:ie.toFixed(3),timestamp:re()}))}catch(ye){j.error(ye.message)}}},getSavedMediaSettings:function(Te){if(Ae(),!ee.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var ie=null;if(he(Is,Nm)){var _e=tl.replace(/\?/,Te);try{var ye=JSON.parse(localStorage.getItem(_e))||{},ze=new Date().getTime()-parseInt(ye.timestamp,10)>=ee.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;ie=ye.settings,ze&&(localStorage.removeItem(_e),ie=null)}catch(Oe){return null}}return ie},setSavedMediaSettings:function(Te,ie){if(he(Is,Nm)){var _e=tl.replace(/\?/,Te);try{localStorage.setItem(_e,JSON.stringify({settings:ie,timestamp:re()}))}catch(ye){j.error(ye.message)}}}},j=(0,M.Z)(W).getInstance().getLogger(O),H(Is)&&Rm.forEach(function(Te){var ie=localStorage.getItem(Te.oldKey);if(ie){localStorage.removeItem(Te.oldKey);try{localStorage.setItem(Te.newKey,ie)}catch(_e){j.error(_e.message)}}}),O}Mm.__dashjs_factory_name="DOMStorage";var kl=U.Z.getSingletonFactory(Mm),Zf=w(2032),qf=w(2011);function Gf(){var k,O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye=this.context;function ze(Se,ke,Ie,Ge){var q=null,le=Se?_e.resolve(Se.path):null,ae=Ge||{init:!0,url:le?le.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:ke};O.debug("Start searching for initialization.");var ue=We(ae);re.load({request:ue,success:function(te){if(ae.bytesLoaded=ae.range.end,!(q=V.findInitRange(te)))return ae.range.end=ae.bytesLoaded+ae.bytesToLoad,ze(Se,ke,Ie,ae);Se.range=q,Ie(Se)},error:function(){Ie(Se)}}),O.debug("Perform init search: "+ae.url)}function Oe(Se,ke,Ie,Ge,q,le){if(Ie&&(Ie.start===void 0||Ie.end===void 0)){var ae=Ie?Ie.toString().split("-"):null;Ie=ae?{start:parseFloat(ae[0]),end:parseFloat(ae[1])}:null}q=q||Ze;var ue=null,te=null,Pe=!!Ie,xe=Se?_e.resolve(Se.path):null,je={init:!1,url:xe?xe.url:void 0,range:Pe?Ie:{start:0,end:1500},searching:!Pe,bytesLoaded:le?le.bytesLoaded:0,bytesToLoad:1500,mediaType:ke},Me=We(je);re.load({request:Me,success:function(ve){var De=je.bytesToLoad,$e=ve.byteLength;if(je.bytesLoaded=je.range.end-je.range.start,ue=V.parse(ve),(te=ue.getBox("sidx"))&&te.isComplete){var mt,ct,yt=te.references;if(yt!=null&&yt.length>0&&(mt=yt[0].reference_type===1),mt){var pt,Gt,Vt,jt;O.debug("Initiate multiple SIDX load."),je.range.end=je.range.start+te.size;var Zt=[],xn=0,at=(te.offset||je.range.start)+te.size,St=function(Pt){Pt?(Zt=Zt.concat(Pt),++xn>=Gt&&(Zt.sort(function(un,an){return un.startTime-an.startTime<0?-1:0}),q(Zt,Se,Ge))):q(null,Se,Ge)};for(pt=0,Gt=yt.length;pt<Gt;pt++)Vt=at,jt=at+yt[pt].referenced_size-1,at+=yt[pt].referenced_size,Oe(Se,ke,{start:Vt,end:jt},Ge,St,je)}else O.debug("Parsing segments from SIDX. representation "+ke+" - id: "+Se.id+" for range : "+je.range.start+" - "+je.range.end),ct=function(Pt,un){for(var an,Jt,Bn,kn,mr=Pt.references,vr=mr.length,bt=Pt.timescale,tn=Pt.earliest_presentation_time,qt=un.range.start+Pt.offset+Pt.first_offset+Pt.size,mn=[],bn=0;bn<vr;bn++)Bn=mr[bn].subsegment_duration,kn=mr[bn].referenced_size,(an=new qf.Z).duration=Bn,an.startTime=tn,an.timescale=bt,Jt=qt+kn-1,an.mediaRange=qt+"-"+Jt,mn.push(an),tn+=Bn,qt+=kn;return mn}(te,je),q(ct,Se,Ge)}else{if(te)je.range.start=te.offset||je.range.start,je.range.end=je.range.start+(te.size||De);else{if($e<je.bytesLoaded)return void q(null,Se,Ge);var Qt=ue.getLastBox();Qt&&Qt.size?(je.range.start=Qt.offset+Qt.size,je.range.end=je.range.start+De):je.range.end+=De}Oe(Se,ke,je.range,Ge,null,je)}},error:function(){q(null,Se,Ge)}}),O.debug("Perform SIDX load for type ".concat(ke," : ").concat(je.url," with range ").concat(je.range.start," - ").concat(je.range.end))}function Ze(Se,ke,Ie){Ie({segments:Se,representation:ke,error:Se?void 0:new ce.Z(he.SEGMENT_BASE_LOADER_ERROR_CODE,he.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function We(Se){if(Se.url){var ke=new Z.Z;return ke.setInfo(Se),ke}}return k={setConfig:function(Se){Se.baseURLController&&(_e=Se.baseURLController),Se.dashMetrics&&(ee=Se.dashMetrics),Se.mediaPlayerModel&&(H=Se.mediaPlayerModel),Se.errHandler&&(j=Se.errHandler),Se.boxParser&&(V=Se.boxParser),Se.debug&&(O=Se.debug.getLogger(k)),Se.requestModifier&&(W=Se.requestModifier),Se.errors&&(he=Se.errors),Se.urlUtils&&(ie=Se.urlUtils),Se.constants&&(Ae=Se.constants),Se.dashConstants&&(Te=Se.dashConstants)},initialize:function(){re=bi(ye).create({errHandler:j,dashMetrics:ee,mediaPlayerModel:H,requestModifier:W,boxParser:V,errors:he,urlUtils:ie,constants:Ae,dashConstants:Te})},loadInitialization:function(Se,ke){return new Promise(function(Ie){ze(Se,ke,Ie)})},loadSegments:function(Se,ke,Ie){return new Promise(function(Ge){Oe(Se,ke,Ie,Ge)})},reset:function(){re&&(re.abort(),re=null)}}}Gf.__dashjs_factory_name="SegmentBaseLoader";var Dm=U.Z.getSingletonFactory(Gf);function Hf(k){var O;k=k||{};var j=new DataView(k.data),V=0;function W(H,re){var he=!0,Ae=0;if(re===void 0&&(re=!1),H.tag>16777215?(j.getUint32(V)!==H.tag&&(he=!1),Ae=4):H.tag>65535?(256*j.getUint16(V)+j.getUint8(V+2)!==H.tag&&(he=!1),Ae=3):H.tag>255?(j.getUint16(V)!==H.tag&&(he=!1),Ae=2):(j.getUint8(V)!==H.tag&&(he=!1),Ae=1),!he&&H.required&&!re)throw new Error("required tag not found");return he&&(V+=Ae),he}function ee(H){var re=1,he=128,Ae=-1,Te=0,ie=j.getUint8(V),_e=0;for(_e=0;_e<8;_e+=1){if((ie&he)===he){Te=H===void 0?ie&~he:ie,Ae=_e;break}he>>=1}for(_e=0;_e<Ae;_e+=1,re+=1)Te=Te<<8|255&j.getUint8(V+re);return V+=re,Te}return O={getPos:function(){return V},setPos:function(H){V=H},consumeTag:W,consumeTagAndSize:function(H,re){var he=W(H,re);return he&&ee(),he},parseTag:function(H){var re;return W(H),re=ee(),O[H.parse](re)},skipOverElement:function(H,re){var he,Ae=W(H,re);return Ae&&(he=ee(),V+=he),Ae},getMatroskaCodedNum:ee,getMatroskaFloat:function(H){var re;switch(H){case 4:re=j.getFloat32(V),V+=4;break;case 8:re=j.getFloat64(V),V+=8}return re},getMatroskaUint:function(H){if(H>4)return function(Ae){for(var Te=Math.floor(Number.MAX_SAFE_INTEGER/256),ie=0,_e=0;_e<Ae;_e+=1){if(ie>Te)throw new Error("Value exceeds safe integer limit");ie*=256;var ye=j.getUint8(V+_e);if(ie>Number.MAX_SAFE_INTEGER-ye)throw new Error("Value exceeds safe integer limit");ie+=ye}return V+=Ae,ie}(H);for(var re=0,he=0;he<H;he+=1)re<<=8,re|=255&j.getUint8(V+he);return V+=H,re>>>0},moreData:function(){return V<j.byteLength}}}Hf.__dashjs_factory_name="EBMLParser";var Kh=U.Z.getClassFactory(Hf);function Fl(){var k,O,j,V,W,ee,H,re,he,Ae,Te=this.context;function ie(_e){var ye=new Z.Z;return ye.setInfo(_e),ye}return k={setConfig:function(_e){if(!(_e.baseURLController&&_e.dashMetrics&&_e.mediaPlayerModel&&_e.errHandler))throw new Error(E.Z.MISSING_CONFIG_ERROR);Ae=_e.baseURLController,ee=_e.dashMetrics,H=_e.mediaPlayerModel,V=_e.errHandler,he=_e.errors,O=_e.debug.getLogger(k),W=_e.requestModifier},initialize:function(){re=bi(Te).create({errHandler:V,dashMetrics:ee,mediaPlayerModel:H,requestModifier:W,errors:he})},loadInitialization:function(_e,ye){return new Promise(function(ze){var Oe=null,Ze=_e?Ae.resolve(_e.path):null,We=_e?_e.range.split("-"):null,Se={range:{start:We?parseFloat(We[0]):null,end:We?parseFloat(We[1]):null},request:Oe,url:Ze?Ze.url:void 0,init:!0,mediaType:ye};O.info("Start loading initialization."),Oe=ie(Se),re.load({request:Oe,success:function(){ze(_e)},error:function(){ze(_e)}}),O.debug("Perform init load: "+Se.url)})},loadSegments:function(_e,ye,ze){return new Promise(function(Oe){var Ze=null,We=_e?Ae.resolve(_e.path):null,Se=We?We.url:void 0;Ze=ie({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Ze,url:Se,init:!1,mediaType:ye}),O.debug("Parsing ebml header"),re.load({request:Ze,success:function(ke){(function(Ie,Ge,q,le){if(Ie&&Ie.byteLength!==0){var ae,ue,te,Pe,xe=Kh(Te).create({data:Ie}),je=q?q.split("-"):null,Me=null,ve={url:Ge,range:{start:je?parseFloat(je[0]):null,end:je?parseFloat(je[1]):null},request:Me};for(O.debug("Parse EBML header: "+ve.url),xe.skipOverElement(j.EBML),xe.consumeTag(j.Segment),te=xe.getMatroskaCodedNum(),te+=xe.getPos(),Pe=xe.getPos();xe.moreData()&&!xe.consumeTagAndSize(j.Segment.Info,!0);)if(!(xe.skipOverElement(j.Segment.SeekHead,!0)||xe.skipOverElement(j.Segment.Tracks,!0)||xe.skipOverElement(j.Segment.Cues,!0)||xe.skipOverElement(j.Void,!0)))throw new Error("no valid top level element found");for(;ae===void 0;){var De=xe.getMatroskaCodedNum(!0),$e=xe.getMatroskaCodedNum();De===j.Segment.Info.Duration.tag?ae=xe[j.Segment.Info.Duration.parse]($e):xe.setPos(xe.getPos()+$e)}Me=ie(ve),re.load({request:Me,success:function(mt){ue=function(ct,yt,pt,Gt){var Vt,jt,Zt,xn,at,St,Qt,Pt;for(Zt=[],at=0,St=(jt=function(un){var an,Jt,Bn=[],kn=Kh(Te).create({data:un});for(kn.consumeTagAndSize(j.Segment.Cues);kn.moreData()&&kn.consumeTagAndSize(j.Segment.Cues.CuePoint,!0);){for((an={}).CueTime=kn.parseTag(j.Segment.Cues.CuePoint.CueTime),an.CueTracks=[];kn.moreData()&&kn.consumeTag(j.Segment.Cues.CuePoint.CueTrackPositions,!0);){var mr=kn.getMatroskaCodedNum(),vr=kn.getPos();if((Jt={}).Track=kn.parseTag(j.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Jt.Track===0)throw new Error("Cue track cannot be 0");Jt.ClusterPosition=kn.parseTag(j.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),an.CueTracks.push(Jt),kn.setPos(vr+mr)}if(an.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Bn.push(an)}if(Bn.length===0)throw new Error("mandatory cuepoint not found");return Bn}(ct)).length;at<St;at+=1)xn=new qf.Z,Vt=at<jt.length-1?jt[at+1].CueTime-jt[at].CueTime:Gt-jt[at].CueTime,xn.duration=Vt,xn.startTime=jt[at].CueTime,xn.timescale=1e3,Qt=jt[at].CueTracks[0].ClusterPosition+yt,Pt=at<jt.length-1?jt[at+1].CueTracks[0].ClusterPosition+yt-1:pt-1,xn.mediaRange=Qt+"-"+Pt,Zt.push(xn);return O.debug("Parsed cues: "+Zt.length+" cues."),Zt}(mt,Pe,te,ae),le(ue)},error:function(){O.error("Download Error: Cues "+ve.url),le(null)}}),O.debug("Perform cues load: "+ve.url+" bytes="+ve.range.start+"-"+ve.range.end)}else le(null)})(ke,Se,ze,function(Ie){Oe({segments:Ie,representation:_e,error:Ie?void 0:new ce.Z(he.SEGMENT_BASE_LOADER_ERROR_CODE,he.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){Oe({representation:_e,error:new ce.Z(he.SEGMENT_BASE_LOADER_ERROR_CODE,he.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){re&&(re.abort(),re=null)}},j={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},k}Fl.__dashjs_factory_name="WebmSegmentBaseLoader";var Vf=U.Z.getSingletonFactory(Fl);function Ul(k){k=k||{};var O,j,V,W=this.context,ee=k.eventBus,H=k.events,re=k.dashMetrics,he=k.mediaPlayerModel,Ae=k.errHandler,Te=k.baseURLController,ie=k.debug,_e=k.boxParser,ye=k.requestModifier,ze=k.errors;function Oe(Ze){return(Ze?Ze.split("/")[1]:"").toLowerCase()==="webm"}return O={initialize:function(){j.initialize(),V.initialize()},getSegmentBaseInitSegment:function(Ze){return Oe(Ze.representation.mimeType)?V.loadInitialization(Ze.representation,Ze.mediaType):j.loadInitialization(Ze.representation,Ze.mediaType)},getSegmentList:function(Ze){return Oe(Ze.mimeType)?V.loadSegments(Ze.representation,Ze.mediaType,Ze.representation?Ze.representation.indexRange:null):j.loadSegments(Ze.representation,Ze.mediaType,Ze.representation?Ze.representation.indexRange:null)},reset:function(){j.reset(),V.reset()}},j=Dm(W).getInstance(),V=Vf(W).getInstance(),j.setConfig({baseURLController:Te,dashMetrics:re,mediaPlayerModel:he,errHandler:Ae,eventBus:ee,events:H,errors:ze,debug:ie,boxParser:_e,requestModifier:ye}),V.setConfig({baseURLController:Te,dashMetrics:re,mediaPlayerModel:he,errHandler:Ae,eventBus:ee,events:H,errors:ze,debug:ie,requestModifier:ye}),O}Ul.__dashjs_factory_name="SegmentBaseController";var Pm=U.Z.getSingletonFactory(Ul),zh=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Kf=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},Yh=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},ZE=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function zf(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var qE=function(){function k(V){var W=this;(function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")})(this,k),this.valid=V[0]=="/",this.path=V.split("/").filter(function(ee){return ee.length!==0}).map(function(ee){var H={name:ee},re=ee.indexOf("[");if(re!=-1){H.name=ee.substring(0,re);var he=ee.substring(re+1,ee.length-1);W.valid=W.valid&&he.indexOf("[")==-1;var Ae=he.indexOf("=");Ae!=-1?(H.attribute={name:he.substring(1,Ae),value:he.substring(Ae+1)},["'",'"'].indexOf(H.attribute.value[0])!=-1&&(H.attribute.value=H.attribute.value.substring(1,H.attribute.value.length-1))):H.position=parseInt(he,10)-1}return H})}var O,j;return O=k,(j=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(V,W){for(var ee=null,H=V,re=1,he="MPD";re<this.path.length&&H!==null;){ee=H;var Ae=this.path[re];if(he=Ae.name,re!==this.path.length-1||!he.startsWith("@")&&he!=="text()"){var Te=ee[he+"_asArray"]||[];Te.length===0&&ee[he]&&Te.push(ee[he]),Ae.position?H=Te[Ae.position]||null:Ae.attribute?function(){var ie=Ae.attribute;H=Te.filter(function(_e){return _e[ie.name]==ie.value})[0]||null}():H=Te[0]||null}re++}return H===null?null:he.startsWith("@")?{name:he.substring(1),leaf:H,target:H}:he==="text()"?{name:"__text",leaf:H,target:H}:{name:he,leaf:H,target:W?ee:H}}}])&&zf(O.prototype,j),k}();function ii(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var Om=function(){function k(V,W,ee){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,k),this.action=V,this.xpath=W,this.value=ee,this.position=null}var O,j;return O=k,(j=[{key:"getMpdTarget",value:function(V){var W=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(V,W)}}])&&ii(O.prototype,j),k}();function Yf(){var k,O,j=this.context;return k={getIsPatch:function(V){return V&&V.hasOwnProperty(y.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(V){return V&&V.hasOwnProperty(y.Z.PUBLISH_TIME)?new Date(V[y.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(V){return V&&V.hasOwnProperty(y.Z.ORIGINAL_PUBLISH_TIME)?new Date(V[y.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(V){return V&&V[y.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(V){return V?(V.__children||[]).map(function(W){var ee=Object.keys(W)[0];if(ee!=="add"&&ee!=="remove"&&ee!=="replace")return O.warn("Ignoring node of invalid action: ".concat(ee)),null;var H=W[ee],re=H.sel;if(ee==="add"&&H.type){if(!H.type.startsWith("@"))return O.warn("Ignoring add action for prefixed namespace declaration: ".concat(H.type,"=").concat(H.__text)),null;re="".concat(re,"/").concat(H.type)}var he=new qE(re);if(!he.isValid())return O.warn("Ignoring action with invalid selector: ".concat(ee," - ").concat(re)),null;var Ae=null;he.findsAttribute()||he.findsTextReplace()?Ae=H.__text||"":ee!=="remove"&&(Ae=H.__children.reduce(function(ie,_e){var ye=Object.keys(_e)[0];return ye!=="#text"&&(ie[ye]=ie[ye]||[],ie[ye].push(_e[ye])),ie},{}));var Te=new Om(ee,he,Ae);return ee==="add"&&(Te.position=H.pos),Te}).filter(function(W){return!!W}):[]}},O=(0,M.Z)(j).getInstance().getLogger(k),k}Yf.__dashjs_factory_name="PatchManifestModel";var GE=U.Z.getSingletonFactory(Yf);function Lm(){var k,O,j,V,W,ee,H,re=this.context;function he(ae,ue,te){var Pe,xe=O.getAdaptationsForType(V[0].mpd.manifest,ae,ue);if(!xe||xe.length===0)return null;if(xe.length>1&&te){var je=ie(te,ue);if(W[te.id]&&W[te.id][ue]){for(var Me=0,ve=xe.length;Me<ve;Me++)if(Ae(W[te.id][ue],je[Me]))return xe[Me]}for(var De=0,$e=xe.length;De<$e;De++)if(Pe=xe[De],O.getRolesForAdaptation(Pe).filter(function(mt){return mt.value===y.Z.MAIN})[0])return xe[De]}return xe[0]}function Ae(ae,ue){if(!ae||!ue)return!1;var te=ae.id===ue.id,Pe=ae.codec===ue.codec,xe=ae.viewpoint===ue.viewpoint,je=JSON.stringify(ae.viewpointsWithSchemeIdUri)===JSON.stringify(ue.viewpointsWithSchemeIdUri),Me=ae.lang===ue.lang,ve=ae.roles.toString()===ue.roles.toString(),De=JSON.stringify(ae.rolesWithSchemeIdUri)===JSON.stringify(ue.rolesWithSchemeIdUri),$e=ae.accessibility.toString()===ue.accessibility.toString(),mt=JSON.stringify(ae.accessibilitiesWithSchemeIdUri)===JSON.stringify(ue.accessibilitiesWithSchemeIdUri),ct=ae.audioChannelConfiguration.toString()===ue.audioChannelConfiguration.toString(),yt=JSON.stringify(ae.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(ue.audioChannelConfigurationsWithSchemeIdUri);return te&&Pe&&xe&&je&&Me&&ve&&De&&$e&&mt&&ct&&yt}function Te(ae,ue,te,Pe,xe,je){var Me,ve,De,$e,mt,ct,yt=[];if(!Pe||Pe.length===0)return[];var pt=O.getAdaptationsForPeriod(ue);for($e=0,ct=Pe.length;$e<ct;$e++)if(Me=Pe[$e],ve=Se(pt[De=O.getIndexForAdaptation(Me,ae,te.index)]),je){var Gt=ve.accessibility.length;for(mt=0;mt<Gt;mt++)if(ve){var Vt=ve.accessibility[mt];if(Vt.indexOf("cea-608:")===0){var jt=Vt.substring(8).split(";");if(jt[0].substring(0,2)==="CC")for(mt=0;mt<jt.length;mt++)ve||(ve=Se.call(this,pt[De])),ke(ve,jt[mt].substring(0,3),jt[mt].substring(4)),yt.push(ve),ve=null;else for(mt=0;mt<jt.length;mt++)ve||(ve=Se.call(this,pt[De])),ke(ve,"CC"+(mt+1),jt[mt]),yt.push(ve),ve=null}else Vt.indexOf("cea-608")===0&&(ke(ve,ee.CC1,"eng"),yt.push(ve),ve=null)}}else xe===ee.IMAGE?(ve.type=ee.IMAGE,yt.push(ve),ve=null):ve&&yt.push(ve);return yt}function ie(ae,ue,te){var Pe=V,xe=te,je=[];if(xe)Ge(),Pe=_e(xe);else{if(!(V.length>0))return je;xe=V[0].mpd.manifest}var Me=We(ae,Pe),ve=O.getAdaptationsForType(xe,ae?ae.index:null,ue);return je=Te(xe,Me,ae,ve,ue),ue===ee.TEXT&&(ve=O.getAdaptationsForType(xe,ae?ae.index:null,ee.VIDEO),je=je.concat(Te(xe,Me,ae,ve,ue,!0))),je}function _e(ae){var ue=ye(ae);return O.getRegularPeriods(ue)}function ye(ae){var ue=Oe(ae);return O.getMpd(ue)}function ze(){V=[],W={}}function Oe(ae){return ae||(V.length>0?V[0].mpd.manifest:null)}function Ze(ae){try{var ue=We(ae.streamInfo,V),te=O.getAdaptationsForPeriod(ue);return ae&&ae.streamInfo&&ae.streamInfo.id!==void 0&&te?te[ae.index]:null}catch(Pe){return null}}function We(ae,ue){for(var te=ue.length,Pe=0;Pe<te;Pe++){var xe=ue[Pe];if(ae&&ae.id===xe.id)return xe}return null}function Se(ae){if(!ae)return null;var ue,te,Pe,xe,je,Me=new Kf,ve=ae.period.mpd.manifest.Period_asArray[ae.period.index].AdaptationSet_asArray[ae.index];if(Me.id=ae.id,Me.index=ae.index,Me.type=ae.type,Me.streamInfo=Ie(ae.period),Me.representationCount=O.getRepresentationCount(ve),Me.labels=O.getLabelsForAdaptation(ve),Me.lang=O.getLanguageForAdaptation(ve),Me.segmentAlignment=O.getSegmentAlignment(ve),Me.subSegmentAlignment=O.getSubSegmentAlignment(ve),ue=O.getViewpointForAdaptation(ve),Me.viewpoint=ue.length?ue[0].value:void 0,Me.viewpointsWithSchemeIdUri=ue,je=O.getAccessibilityForAdaptation(ve),Me.accessibility=je.map(function(yt){var pt=yt.value,Gt=pt;return yt.schemeIdUri&&yt.schemeIdUri.search("cea-608")>=0&&H!==void 0&&(Gt=pt?"cea-608:"+pt:"cea-608",Me.embeddedCaptions=!0),Gt}),Me.accessibilitiesWithSchemeIdUri=je,te=O.getAudioChannelConfigurationForAdaptation(ve),Me.audioChannelConfiguration=te.map(function(yt){return yt.value}),Me.audioChannelConfigurationsWithSchemeIdUri=te,Me.audioChannelConfiguration.length===0&&Array.isArray(ve.Representation_asArray)&&ve.Representation_asArray.length>0&&(Pe=O.getAudioChannelConfigurationForRepresentation(ve.Representation_asArray[0]),Me.audioChannelConfiguration=Pe.map(function(yt){return yt.value}),Me.audioChannelConfigurationsWithSchemeIdUri=Pe),xe=O.getRolesForAdaptation(ve),Me.roles=xe.map(function(yt){return yt.value}),Me.rolesWithSchemeIdUri=xe,Me.codec=O.getCodec(ve),Me.mimeType=O.getMimeType(ve),Me.contentProtection=O.getContentProtectionData(ve),Me.bitrateList=O.getBitrateListForAdaptation(ve),Me.selectionPriority=O.getSelectionPriority(ve),Me.contentProtection){var De=Me.contentProtection.map(function(yt){return O.getKID(yt)}).filter(function(yt){return yt!==null});if(De.length){var $e=De[0];Me.contentProtection.forEach(function(yt){yt.keyId=$e})}}if(Me.isText=O.getIsText(ve),Me.supplementalProperties=O.getSupplementalPropertiesForAdaptation(ve),(!Me.supplementalProperties||Object.keys(Me.supplementalProperties).length===0)&&Array.isArray(ve.Representation_asArray)&&ve.Representation_asArray.length>0){var mt=ve.Representation_asArray.map(function(yt){return O.getSupplementalPropertiesForRepresentation(yt)});mt.every(function(yt){return JSON.stringify(yt)===JSON.stringify(mt[0])})&&(Me.supplementalProperties=mt[0])}if(Me.supplementalPropertiesAsArray=O.getSupplementalPropertiesAsArrayForAdaptation(ve),(!Me.supplementalPropertiesAsArray||Me.supplementalPropertiesAsArray.length===0)&&Array.isArray(ve.Representation_asArray)&&ve.Representation_asArray.length>0){var ct=ve.Representation_asArray.map(function(yt){return O.getSupplementalPropertiesAsArrayForRepresentation(yt)});ct.every(function(yt){return JSON.stringify(yt)===JSON.stringify(ct[0])})&&(Me.supplementalPropertiesAsArray=ct[0])}return Me.essentialProperties=O.getEssentialPropertiesForAdaptation(ve),Me.essentialPropertiesAsArray=O.getEssentialPropertiesAsArrayForAdaptation(ve),Me.isFragmented=O.getIsFragmented(ve),Me.isEmbedded=!1,Me}function ke(ae,ue,te){ae.id=ue,ae.index=100+parseInt(ue.substring(2,3)),ae.type=ee.TEXT,ae.codec="cea-608-in-SEI",ae.isEmbedded=!0,ae.isFragmented=!1;var Pe=Tc()(te);ae.lang=Pe||te,ae.roles=["caption"],ae.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function Ie(ae){var ue,te,Pe=new Yh;return Pe.id=ae.id,Pe.index=ae.index,Pe.start=ae.start,Pe.duration=ae.duration,Pe.manifestInfo=(ue=ae.mpd,(te=new ZE).dvrWindowSize=ue.timeShiftBufferDepth,te.loadedTime=ue.manifest.loadedTime,te.availableFrom=ue.availabilityStartTime,te.minBufferTime=ue.manifest.minBufferTime,te.maxFragmentDuration=ue.maxSegmentDuration,te.duration=O.getDuration(ue.manifest),te.isDynamic=O.getIsDynamic(ue.manifest),te.serviceDescriptions=O.getServiceDescriptions(ue.manifest),te.protocol=ue.manifest.protocol,te),Pe.isLast=ae.mpd.manifest.Period_asArray.length===1||Math.abs(Pe.start+Pe.duration-Pe.manifestInfo.duration)<1,Pe}function Ge(){if(!ee)throw new Error("setConfig function has to be called previously")}function q(ae){return V.length>0?V[0].mpd.manifest.Period_asArray[ae]:null}function le(ae,ue,te){var Pe,xe,je,Me,ve;if(ae){for(Pe=ae.AdaptationSet_asArray,Me=0;Me<Pe.length;Me+=1)for(je=Pe[Me].Representation_asArray,ve=0;ve<je.length;ve+=1)if(ue===(xe=je[ve]).id)return te?ve:xe}return null}return k={getBandwidthForRepresentation:function(ae,ue){var te;return(te=le(q(ue),ae))?te.bandwidth:null},getIndexForRepresentation:function(ae,ue){return function(te,Pe){var xe=le(te,Pe,!0);return xe!==null?xe:-1}(q(ue),ae)},getMaxIndexForBufferType:function(ae,ue){return function(te,Pe){var xe,je,Me,ve;if(!te||!Pe)return-1;for(je=te.AdaptationSet_asArray,ve=0;ve<je.length;ve+=1)if(Me=(xe=je[ve]).Representation_asArray,O.getIsTypeOf(xe,Pe))return Me.length;return-1}(q(ue),ae)},convertRepresentationToRepresentationInfo:function(ae){if(ae){var ue=new zh,te=ae.adaptation.period.mpd.manifest.Period_asArray[ae.adaptation.period.index].AdaptationSet_asArray[ae.adaptation.index],Pe=O.getRepresentationFor(ae.index,te);return ue.id=ae.id,ue.quality=ae.index,ue.bandwidth=O.getBandwidth(Pe),ue.fragmentDuration=ae.segmentDuration||(ae.segments&&ae.segments.length>0?ae.segments[0].duration:NaN),ue.MSETimeOffset=ae.MSETimeOffset,ue.mediaInfo=Se(ae.adaptation),ue}return null},getStreamsInfo:function(ae,ue){var te=[],Pe=V;if(ae&&(Ge(),Pe=_e(ae)),Pe.length>0){(!ue||ue>Pe.length)&&(ue=Pe.length);for(var xe=0;xe<ue;xe++)te.push(Ie(Pe[xe]))}return te},getMediaInfoForType:function(ae,ue){if(V.length===0||!ae)return null;var te=We(ae,V);if(!te)return null;var Pe=O.getAdaptationsForPeriod(te),xe=he(ae.index,ue,ae);return xe?Se(Pe[O.getIndexForAdaptation(xe,V[0].mpd.manifest,ae.index)]):null},getAllMediaInfoForType:ie,getAdaptationForType:he,getRealAdaptation:function(ae,ue){var te,Pe,xe=We(ae,V);return te=ue?ue.id:null,V.length>0&&xe&&(Pe=te?O.getAdaptationForId(te,V[0].mpd.manifest,xe.index):O.getAdaptationForIndex(ue?ue.index:null,V[0].mpd.manifest,xe.index)),Pe},getProducerReferenceTimes:function(ae,ue){var te,Pe,xe=We(ae,V);return te=ue?ue.id:null,V.length>0&&xe&&(Pe=te?O.getAdaptationForId(te,V[0].mpd.manifest,xe.index):O.getAdaptationForIndex(ue?ue.index:null,V[0].mpd.manifest,xe.index)),Pe?O.getProducerReferenceTimesForAdaptation(Pe):[]},getRealPeriodByIndex:function(ae){return O.getRealPeriodForIndex(ae,V[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(ae){try{return O.getEssentialPropertiesForRepresentation(ae)}catch(ue){return[]}},getVoRepresentations:function(ae){var ue=Ze(ae);return O.getRepresentationsForAdaptation(ue)},getEventsFor:function(ae,ue,te){var Pe=[];if(V.length>0){var xe=V[0].mpd.manifest;if(ae instanceof Yh){var je=We(ae,V);Pe=O.getEventsForPeriod(je)}else if(ae instanceof Kf){var Me=We(te,V);Pe=O.getEventStreamForAdaptationSet(xe,Ze(ae),Me)}else if(ae instanceof zh){var ve=We(te,V);Pe=O.getEventStreamForRepresentation(xe,ue,ve)}}return Pe},getEvent:function(ae,ue,te,Pe){try{if(!ae||!ue||isNaN(te)||!Pe)return null;var xe=ae.scheme_id_uri,je=ae.value;if(!ue[xe+"/"+je])return null;var Me,ve=new uo,De=ae.timescale||1,$e=Pe.adaptation.period.start,mt=ue[xe+"/"+je],ct=isNaN(Pe.presentationTimeOffset)?isNaN(mt.presentationTimeOffset)?0:mt.presentationTimeOffset:Pe.presentationTimeOffset,yt=ae.presentation_time_delta/De;Me=ae.version===0?$e+te-ct+yt:$e-ct+yt;var pt=ae.event_duration/De,Gt=ae.id,Vt=ae.message_data;return ve.eventStream=mt,ve.eventStream.value=je,ve.eventStream.timescale=De,ve.duration=pt,ve.id=Gt,ve.calculatedPresentationTime=Me,ve.messageData=Vt,ve.presentationTimeDelta=yt,ve}catch(jt){return null}},getMpd:ye,setConfig:function(ae){ae&&(ae.constants&&(ee=ae.constants),ae.cea608parser&&(H=ae.cea608parser),ae.errHandler&&O.setConfig({errHandler:ae.errHandler}),ae.BASE64&&O.setConfig({BASE64:ae.BASE64}))},updatePeriods:function(ae){if(!ae)return null;Ge(),V=_e(ae)},getIsTextTrack:function(ae){return O.getIsText(ae)},getUTCTimingSources:function(){var ae=Oe();return O.getUTCTimingSources(ae)},getSuggestedPresentationDelay:function(){var ae=V.length>0?V[0].mpd:null;return O.getSuggestedPresentationDelay(ae)},getAvailabilityStartTime:function(ae){var ue=ye(ae);return O.getAvailabilityStartTime(ue)},getIsTypeOf:function(ae,ue){return O.getIsTypeOf(ae,ue)},getIsDynamic:function(ae){var ue=Oe(ae);return O.getIsDynamic(ue)},getDuration:function(ae){var ue=Oe(ae);return O.getDuration(ue)},getRegularPeriods:_e,getContentSteering:function(ae){return O.getContentSteering(ae)},getLocation:function(ae){return O.getLocation(ae)},getPatchLocation:function(ae){var ue=O.getPatchLocation(ae),te=O.getPublishTime(ae);return ue&&ue.length!==0&&te?ue.filter(function(Pe){return isNaN(Pe.ttl)||te.getTime()+Pe.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(ae){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return O.getManifestUpdatePeriod(ae,ue)},getPublishTime:function(ae){return O.getPublishTime(ae)},getIsDVB:function(ae){return O.hasProfile(ae,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(ae){return j.getIsPatch(ae)},getBaseURLsFromElement:function(ae){return O.getBaseURLsFromElement(ae)},getRepresentationSortFunction:function(){return O.getRepresentationSortFunction()},getCodec:function(ae,ue,te){return O.getCodec(ae,ue,te)},getPeriodById:function(ae){if(!ae||V.length===0)return null;var ue=V.filter(function(te){return te.id===ae});return ue&&ue.length>0?ue[0]:null},setCurrentMediaInfo:function(ae,ue,te){W[ae]=W[ae]||{},W[ae][ue]=W[ae][ue]||{},W[ae][ue]=te},isPatchValid:function(ae,ue){var te=O.getId(ae),Pe=j.getMpdId(ue),xe=O.getPublishTime(ae),je=j.getPublishTime(ue),Me=j.getOriginalPublishTime(ue);return!!(te&&Pe&&te==Pe&&xe&&Me&&xe.getTime()==Me.getTime()&&je&&xe.getTime()<je.getTime())},applyPatchToManifest:function(ae,ue){j.getPatchOperations(ue).forEach(function(te){var Pe=te.getMpdTarget(ae);if(Pe!==null){var xe=Pe.name,je=Pe.target,Me=Pe.leaf;if(te.xpath.findsAttribute()||xe==="__text")switch(te.action){case"add":case"replace":je[xe]=te.value;break;case"remove":delete je[xe]}else{var ve=(je[xe+"_asArray"]||[]).indexOf(Me),De=te.position==="prepend"||te.position==="before";if((te.action==="remove"||te.action==="replace")&&(delete je[xe],ve!=-1)){var $e=je[xe+"_asArray"];$e.splice(ve,1),$e.length>1?je[xe]=$e:$e.length==1?je[xe]=$e[0]:delete je[xe+"_asArray"]}te.action!=="add"&&te.action!=="replace"||Object.keys(te.value).forEach(function(mt){var ct=te.value[mt],yt=je[mt+"_asArray"]||[];if(yt.length===0&&je[mt]&&yt.push(je[mt]),yt.length===0)yt=ct;else{var pt=yt.length;pt=mt==xe&&ve!=-1?ve+(De?0:1)+(te.action=="replace"?-1:0):De?0:yt.length,yt.splice.apply(yt,[pt,0].concat(ct))}je[mt+"_asArray"]=yt,je[mt]=yt.length==1?yt[0]:yt})}}})},areMediaInfosEqual:Ae,reset:ze},O=er(re).getInstance(),j=GE(re).getInstance(),ze(),k}Lm.__dashjs_factory_name="DashAdapter";var Wf=U.Z.getSingletonFactory(Lm);function km(k,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}var Fm=function(){function k(){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,k)}var O,j;return O=k,j=[{key:"round10",value:function(V,W){return function(ee,H,re){return re===void 0||+re==0?Math[ee](H):(re=+re,(H=+H)===null||isNaN(H)||typeof re!="number"||re%1!=0?NaN:(H=H.toString().split("e"),+((H=(H=Math[ee](+(H[0]+"e"+(H[1]?+H[1]-re:-re)))).toString().split("e"))[0]+"e"+(H[1]?+H[1]+re:re))))}("round",V,W)}}],j&&km(O,j),k}(),Um=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Bm=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.t=null,this.mt=null,this.to=null,this.lto=null},Bl=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.t=null,this.level=null},HE=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.target=null,this.state=P.Z.BUFFER_EMPTY},VE=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.time=null,this.range=null,this.manifestInfo=null},KE=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.time=null,this.droppedFrames=null};function Wh(k,O){if(!(k instanceof O))throw new TypeError("Cannot call a class as a function")}var zE=function k(){Wh(this,k),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},YE=function k(){Wh(this,k),this.id=null,this.index=null,this.start=null,this.duration=null},WE=function k(){Wh(this,k),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},$E=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},XE=function k(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,k),this.loadingRequests=[],this.executedRequests=[]};function jm(k){var O,j,V=(k=k||{}).settings,W=this.context,ee=(0,m.Z)(W).getInstance();function H(){ee.trigger(T.Z.METRICS_CHANGED)}function re(ye){ee.trigger(T.Z.METRIC_CHANGED,{mediaType:ye}),H()}function he(ye,ze,Oe){ee.trigger(T.Z.METRIC_UPDATED,{mediaType:ye,metric:ze,value:Oe}),re(ye)}function Ae(ye,ze,Oe){ee.trigger(T.Z.METRIC_ADDED,{mediaType:ye,metric:ze,value:Oe}),re(ye)}function Te(ye,ze){var Oe=null;return ye&&(j.hasOwnProperty(ye)?Oe=j[ye]:ze||(Oe=new Um,j[ye]=Oe)),Oe}function ie(ye,ze,Oe){var Ze=Te(ye);Ze!==null&&(Ze[ze].push(Oe),Ze[ze].length>V.get().streaming.metrics.maxListDepth&&Ze[ze].shift())}function _e(ye,ze,Oe){ie(ye,ze,Oe),Ae(ye,ze,Oe)}return O={clearCurrentMetricsForType:function(ye){delete j[ye],re(ye)},clearAllCurrentMetrics:function(){j={},H()},getMetricsFor:Te,addHttpRequest:function ye(ze,Oe,Ze,We,Se,ke,Ie,Ge,q,le,ae,ue,te,Pe,xe,je,Me){var ve=new st.w;ke!=null&&ke!==We&&(ye(ze,null,Ze,We,Se,null,null,Ge,q,null,null,null,te,null,null,je,Me),ve.actualurl=ke),ve.tcpid=Oe,ve.type=Ze,ve.url=We,ve.range=Ge,ve.trequest=q,ve.tresponse=le,ve.responsecode=ue,ve.cmsd=Me,ve._tfinish=ae,ve._stream=ze,ve._mediaduration=te,ve._quality=Se,ve._responseHeaders=Pe,ve._serviceLocation=Ie,ve._fileLoaderType=je,xe?xe.forEach(function(De){(function($e,mt,ct,yt){var pt=new st.O;pt.s=mt,pt.d=ct,pt.b=yt,$e.trace.push(pt),$e.interval||($e.interval=0),$e.interval+=ct})(ve,De.s,De.d,De.b)}):(delete ve.interval,delete ve.trace),_e(ze,P.Z.HTTP_REQUEST,ve)},addRepresentationSwitch:function(ye,ze,Oe,Ze,We){var Se=new Bm;Se.t=ze,Se.mt=Oe,Se.to=Ze,We?Se.lto=We:delete Se.lto,_e(ye,P.Z.TRACK_SWITCH,Se)},addBufferLevel:function(ye,ze,Oe){var Ze=new Bl;Ze.t=ze,Ze.level=Oe,_e(ye,P.Z.BUFFER_LEVEL,Ze)},addBufferState:function(ye,ze,Oe){var Ze=new HE;Ze.target=Oe,Ze.state=ze,_e(ye,P.Z.BUFFER_STATE,Ze)},addDVRInfo:function(ye,ze,Oe,Ze){var We=new VE;We.time=ze,We.range=Ze,We.manifestInfo=Oe,_e(ye,P.Z.DVR_INFO,We)},addDroppedFrames:function(ye,ze){var Oe=new KE,Ze=Te(ye).DroppedFrames;ze&&(Oe.time=ze.creationTime,Oe.droppedFrames=ze.droppedVideoFrames,Ze.length>0&&Ze[Ze.length-1]==Oe||_e(ye,P.Z.DROPPED_FRAMES,Oe))},addSchedulingInfo:function(ye,ze,Oe,Ze,We,Se,ke,Ie,Ge){var q=new $E;q.mediaType=ye,q.t=ze,q.type=Oe,q.startTime=Ze,q.availabilityStartTime=We,q.duration=Se,q.quality=ke,q.range=Ie,q.state=Ge,_e(ye,P.Z.SCHEDULING_INFO,q)},addRequestsQueue:function(ye,ze,Oe){var Ze=new XE;Ze.loadingRequests=ze,Ze.executedRequests=Oe,Te(ye).RequestsQueue=Ze,Ae(ye,P.Z.REQUESTS_QUEUE,Ze)},addManifestUpdate:function(ye,ze,Oe,Ze,We,Se,ke,Ie,Ge,q){var le=new zE;le.mediaType=ye,le.type=ze,le.requestTime=Oe,le.fetchTime=Ze,le.availabilityStartTime=We,le.presentationStartTime=Se,le.clientTimeOffset=ke,le.currentTime=Ie,le.buffered=Ge,le.latency=q,ie(E.Z.STREAM,P.Z.MANIFEST_UPDATE,le),Ae(ye,P.Z.MANIFEST_UPDATE,le)},updateManifestUpdateInfo:function(ye,ze){if(ye){for(var Oe in ze)ye[Oe]=ze[Oe];he(ye.mediaType,P.Z.MANIFEST_UPDATE,ye)}},addManifestUpdateStreamInfo:function(ye,ze,Oe,Ze,We){if(ye){var Se=new YE;Se.id=ze,Se.index=Oe,Se.start=Ze,Se.duration=We,ye.streamInfo.push(Se),he(ye.mediaType,P.Z.MANIFEST_UPDATE_STREAM_INFO,ye)}},addManifestUpdateRepresentationInfo:function(ye,ze,Oe,Ze,We,Se,ke,Ie){if(ye&&ye.representationInfo){var Ge=new WE;Ge.id=ze,Ge.index=Oe,Ge.streamIndex=Ze,Ge.mediaType=We,Ge.startNumber=ke,Ge.fragmentInfoType=Ie,Ge.presentationTimeOffset=Se,ye.representationInfo.push(Ge),he(ye.mediaType,P.Z.MANIFEST_UPDATE_TRACK_INFO,ye)}},addPlayList:function(ye){ye.trace&&Array.isArray(ye.trace)?ye.trace.forEach(function(ze){ze.hasOwnProperty("subreplevel")&&!ze.subreplevel&&delete ze.subreplevel}):delete ye.trace,_e(E.Z.STREAM,P.Z.PLAY_LIST,ye)},addDVBErrors:function(ye){_e(E.Z.STREAM,P.Z.DVB_ERRORS,ye)}},j={},O}jm.__dashjs_factory_name="MetricsModel";var Zm=U.Z.getSingletonFactory(jm);function nl(k){k=k||{};var O,j,V,W,ee=this.context,H=k.metricsModel;function re(Te){var ie=H.getMetricsFor(Te,!0);if(!ie)return null;var _e,ye=ie.HttpList,ze=null;if(!ye||ye.length<=0)return null;for(_e=ye.length-1;_e>=0;){if(ye[_e].responsecode){ze=ye[_e];break}_e--}return ze}function he(Te){var ie=H.getMetricsFor(Te,!0);return ie&&ie.HttpList?ie.HttpList:[]}function Ae(Te,ie){if(!Te)return null;var _e=Te[ie];return _e&&_e.length!==0?_e[_e.length-1]:null}return O={getCurrentRepresentationSwitch:function(Te){return Ae(H.getMetricsFor(Te,!0),P.Z.TRACK_SWITCH)},getCurrentBufferState:function(Te){return Ae(H.getMetricsFor(Te,!0),P.Z.BUFFER_STATE)},getCurrentBufferLevel:function(Te){var ie=Ae(H.getMetricsFor(Te,!0),P.Z.BUFFER_LEVEL);return ie?Fm.round10(ie.level/1e3,-3):0},getCurrentHttpRequest:re,getHttpRequests:he,getCurrentDroppedFrames:function(){return Ae(H.getMetricsFor(E.Z.VIDEO,!0),P.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(Te){return Ae(H.getMetricsFor(Te,!0),P.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(Te){return Ae(Te?H.getMetricsFor(Te,!0):H.getMetricsFor(E.Z.VIDEO,!0)||H.getMetricsFor(E.Z.AUDIO,!0),P.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return Ae(H.getMetricsFor(E.Z.STREAM),P.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(Te,ie){if(!ie)return null;var _e={},ye=re(Te);ye&&(_e=dn.Z.parseHttpHeaders(ye._responseHeaders));var ze=_e[ie.toLowerCase()];return ze===void 0?null:ze},getLatestMPDRequestHeaderValueByID:function(Te){if(!Te)return null;var ie,_e,ye,ze={};for(ye=(ie=he(E.Z.STREAM)).length-1;ye>=0;ye--)if((_e=ie[ye]).type===st.w.MPD_TYPE){ze=dn.Z.parseHttpHeaders(_e._responseHeaders);break}var Oe=ze[Te.toLowerCase()];return Oe===void 0?null:Oe},addRepresentationSwitch:function(Te,ie,_e,ye,ze){H.addRepresentationSwitch(Te,ie,_e,ye,ze)},addDVRInfo:function(Te,ie,_e,ye){H.addDVRInfo(Te,ie,_e,ye)},updateManifestUpdateInfo:function(Te){var ie=this.getCurrentManifestUpdate();H.updateManifestUpdateInfo(ie,Te)},addManifestUpdateStreamInfo:function(Te){if(Te){var ie=this.getCurrentManifestUpdate();H.addManifestUpdateStreamInfo(ie,Te.id,Te.index,Te.start,Te.duration)}},addManifestUpdateRepresentationInfo:function(Te,ie){if(Te){var _e=this.getCurrentManifestUpdate();H.addManifestUpdateRepresentationInfo(_e,Te.id,Te.index,Te.streamIndex,ie,Te.presentationTimeOffset,Te.startNumber,Te.fragmentInfoType)}},addManifestUpdate:function(Te){H.addManifestUpdate(E.Z.STREAM,Te.type,Te.requestStartDate,Te.requestEndDate)},addHttpRequest:function(Te,ie,_e,ye,ze,Oe){H.addHttpRequest(Te.mediaType,null,Te.type,Te.url,Te.quality,ie,Te.serviceLocation||null,Te.range||null,Te.requestStartDate,Te.firstByteDate,Te.requestEndDate,_e,Te.duration,ye,ze,Te.fileLoaderType,Oe)},addSchedulingInfo:function(Te,ie){H.addSchedulingInfo(Te.mediaType,new Date,Te.type,Te.startTime,Te.availabilityStartTime,Te.duration,Te.quality,Te.range,ie)},addRequestsQueue:function(Te,ie,_e){H.addRequestsQueue(Te,ie,_e)},addBufferLevel:function(Te,ie,_e){H.addBufferLevel(Te,ie,_e)},addBufferState:function(Te,ie,_e){H.addBufferState(Te,ie,_e)},addDroppedFrames:function(Te){H.addDroppedFrames(E.Z.VIDEO,Te)},addPlayList:function(){W&&(H.addPlayList(W),W=null)},addDVBErrors:function(Te){H.addDVBErrors(Te)},createPlaylistMetrics:function(Te,ie){(W=new ut).start=new Date,W.mstart=Te,W.starttype=ie},createPlaylistTraceMetrics:function(Te,ie,_e){j===!0&&(j=!1,(V=new nt).representationid=Te,V.start=new Date,V.mstart=ie,V.playbackspeed=_e!==null?_e.toString():null)},updatePlayListTraceMetrics:function(Te){if(V)for(var ie in V)V[ie]=Te[ie]},pushPlayListTraceMetrics:function(Te,ie){if(j===!1&&W&&V&&V.start){var _e=V.start,ye=Te.getTime()-_e.getTime();V.duration=ye,V.stopreason=ie,W.trace.push(V),j=!0}},clearAllCurrentMetrics:function(){H.clearAllCurrentMetrics()}},H=H||Zm(ee).getInstance({settings:k.settings}),j=!0,V=null,W=null,O}nl.__dashjs_factory_name="DashMetrics";var Nc=U.Z.getSingletonFactory(nl);function $h(){var k,O,j,V,W=this.context,ee=(0,m.Z)(W).getInstance(),H=(0,qe.Z)(W).getInstance();function re(We){V=We}function he(We,Se,ke,Ie){var Ge,q=Se.adaptation.period.mpd,le=q.availabilityStartTime;if(Ie)Ge=ke&&q.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(le.getTime()+1e3*(We+q.timeShiftBufferDepth)):q.availabilityEndTime;else if(ke){var ae=Se.availabilityTimeOffset;Ge=new Date(le.getTime()+1e3*(We-ae))}else Ge=le;return Ge}function Ae(We,Se){return(We.getTime()-Se.mpd.availabilityStartTime.getTime()+1e3*V)/1e3}function Te(We,Se){return We+(Se.adaptation.period.start-Se.presentationTimeOffset)}function ie(We){var Se={start:NaN,end:NaN},ke=We[0].getAdapter().getRegularPeriods()[0],Ie=Ae(new Date,ke);if(!We||We.length===0)return{range:Se,now:Ie};We.forEach(function(q){var le=q.getAdapter(),ae=le.getMediaInfoForType(q.getStreamInfo(),E.Z.VIDEO)||le.getMediaInfoForType(q.getStreamInfo(),E.Z.AUDIO),ue=le.getVoRepresentations(ae)[0],te={start:NaN,end:NaN};if(ue)if(ue.segmentInfoType===y.Z.SEGMENT_TIMELINE)te=function(xe){var je,Me,ve,De,$e=xe.adaptation.period.mpd.manifest.Period_asArray[xe.adaptation.period.index].AdaptationSet_asArray[xe.adaptation.index],mt=O.getRepresentationFor(xe.index,$e),ct=mt.SegmentTemplate||mt.SegmentList,yt=ct.SegmentTimeline,pt=ct.timescale,Gt=yt.S_asArray,Vt={start:0,end:0},jt=Gt[0].t,Zt=!isNaN(jt),xn=Zt?jt:0,at=0;for(Zt&&(Vt.start=Te(xn/pt,xe)),ve=0,De=Gt.length;ve<De;ve++)Me=0,(je=Gt[ve]).hasOwnProperty("r")&&(Me=je.r),at+=je.d*(1+Me);return Vt.end=Te((xn+at)/pt,xe),Vt}(ue);else{var Pe=ue.adaptation.period;te.start=Pe.start,te.end=Math.max(Ie,Pe.start+Pe.duration)}!isNaN(te.start)&&(isNaN(Se.start)||Se.start>te.start)&&(Se.start=te.start),!isNaN(te.end)&&(isNaN(Se.end)||Se.end<te.end)&&(Se.end=te.end)}),Se.end=Math.min(Ie,Se.end);var Ge=ye(We,Se.end,!0);return Se.end=isNaN(Ge)?Se.end:Ge,Se.start=ke&&ke.mpd&&ke.mpd.timeShiftBufferDepth&&!isNaN(ke.mpd.timeShiftBufferDepth)&&!isNaN(Se.end)?Math.max(Se.end-ke.mpd.timeShiftBufferDepth,Se.start):Se.start,Se.start=ye(We,Se.start),{range:Se,now:Ie}}function _e(We,Se){j=We-Se.end}function ye(We,Se){var ke=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var Ie=0,Ge=!1,q=NaN;!Ge&&Ie<We.length;){var le=We[Ie].getStreamInfo();le.start<=Se&&(!isFinite(le.duration)||le.start+le.duration>=Se)?(q=Se,Ge=!0):!ke&&le.start>Se&&(isNaN(q)||le.start<q)?q=le.start:ke&&le.start+le.duration<Se&&(isNaN(q)||le.start+le.duration>q)&&(q=le.start+le.duration),Ie+=1}return q}catch(ae){return Se}}function ze(We){We.offset===void 0||isNaN(We.offset)||re(We.offset/1e3)}function Oe(){V=0,j=0}function Ze(){ee.off(T.Z.UPDATE_TIME_SYNC_OFFSET,ze,this),Oe()}return k={initialize:function(){Oe(),ee.on(T.Z.UPDATE_TIME_SYNC_OFFSET,ze,this)},getClientTimeOffset:function(){return V},setClientTimeOffset:re,getClientReferenceTime:function(){return Date.now()-1e3*j+1e3*V},calcAvailabilityStartTimeFromPresentationTime:function(We,Se,ke){return he(We,Se,ke)},calcAvailabilityEndTimeFromPresentationTime:function(We,Se,ke){return he(We,Se,ke,!0)},calcPresentationTimeFromWallTime:Ae,calcPresentationTimeFromMediaTime:Te,calcPeriodRelativeTimeFromMpdRelativeTime:function(We,Se){return Se-We.adaptation.period.start},calcMediaTimeFromPresentationTime:function(We,Se){return We-Se.adaptation.period.start+Se.presentationTimeOffset},calcWallTimeForSegment:function(We,Se){var ke,Ie,Ge;return Se&&(ke=We.representation.adaptation.period.mpd.suggestedPresentationDelay,Ie=We.presentationStartTime+ke,Ge=new Date(We.availabilityStartTime.getTime()+1e3*Ie)),Ge},calcTimeShiftBufferWindow:function(We,Se){if(!Se)return function(Ie){var Ge={start:NaN,end:NaN},q=0,le=NaN;return Ie.forEach(function(ae){var ue=ae.getStreamInfo();q+=ue.duration,(isNaN(le)||ue.start<le)&&(le=ue.start)}),Ge.start=le,Ge.end=le+q,Ge}(We);if(H.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var ke=ie(We);return _e(ke.now,ke.range),ke.range}return function(Ie){var Ge={start:NaN,end:NaN};if(!Ie||Ie.length===0)return Ge;var q=Ie[0].getAdapter().getRegularPeriods()[0],le=Ae(new Date,q),ae=q.mpd.timeShiftBufferDepth,ue=isNaN(ae)?0:le-ae;if(Ge.start=ye(Ie,ue),Ge.end=!isNaN(Ge.start)&&le<Ge.start?le:ye(Ie,le,!0),!isNaN(ae)&&Ge.end<le-ae&&(Ge.end=NaN),H.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var te=ie(Ie);if(te.range.end<Ge.start)return ee.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Hs.LEVELS.WARNING,event:Hs.EVENTS.INVALID_DVR_WINDOW}),_e(te.now,te.range),te.range}return Ge}(We)},reset:Ze},O=er(W).getInstance(),Ze(),k}$h.__dashjs_factory_name="TimelineConverter";var qm=U.Z.getSingletonFactory($h),ua=w(4593),Lr=w(6934);function pi(k){return pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},pi(k)}function Ws(k,O){return Ws=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},Ws(k,O)}function Xh(k,O){return!O||pi(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(k):O}function $s(k){return $s=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},$s(k)}var Gm=function(k){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&Ws(ee,H)})(W,k);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=$s(O);if(j){var re=$s(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Xh(this,ee)});function W(){var ee;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,W),(ee=V.call(this)).captionData=null,ee.label=null,ee.defaultTrack=!1,ee.kind=null,ee.isFragmented=!1,ee.isEmbedded=!1,ee.isTTML=null,ee}return W}(Kf),Hm=w(2295);function Vm(){var k=0;function O(re){for(var he="",Ae=0;Ae<re.length;++Ae)he+=re[Ae].uchar;return he.length-he.replace(/^\s+/,"").length}function j(re){return"left: "+3.125*re.x+"%; top: "+6.66*re.y1+"%; width: "+(100-3.125*re.x)+"%; height: "+6.66*Math.max(re.y2-1-re.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function V(re){return re==="red"?"rgb(255, 0, 0)":re==="green"?"rgb(0, 255, 0)":re==="blue"?"rgb(0, 0, 255)":re==="cyan"?"rgb(0, 255, 255)":re==="magenta"?"rgb(255, 0, 255)":re==="yellow"?"rgb(255, 255, 0)":re==="white"?"rgb(255, 255, 255)":re==="black"?"rgb(0, 0, 0)":re}function W(re,he){var Ae=re.videoHeight/15;return he?"font-size: "+Ae+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(he.foreground?V(he.foreground):"rgb(255, 255, 255)")+"; font-style: "+(he.italics?"italic":"normal")+"; text-decoration: "+(he.underline?"underline":"none")+"; white-space: pre; background-color: "+(he.background?V(he.background):"transparent")+";":"font-size: "+Ae+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function ee(re){return re.replace(/^\s+/g,"")}function H(re){return re.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(re,he,Ae,Te){var ie,_e,ye=null,ze=!1,Oe=-1,Ze={start:he,end:Ae,spans:[]},We="style_cea608_white_black",Se={},ke={},Ie=[];for(ie=0;ie<15;++ie){var Ge=Te.rows[ie],q="",le=null;if(Ge.isEmpty()===!1){var ae=O(Ge.chars);ye===null&&(ye={x:ae,y1:ie,y2:ie+1,p:[]}),ae!==Oe&&ze&&(ye.p.push(Ze),Ze={start:he,end:Ae,spans:[]},ye.y2=ie,ye.name="region_"+ye.x+"_"+ye.y1+"_"+ye.y2,Se.hasOwnProperty(ye.name)===!1?(Ie.push(ye),Se[ye.name]=ye):Se[ye.name].p.contat(ye.p),ye={x:ae,y1:ie,y2:ie+1,p:[]});for(var ue=0;ue<Ge.chars.length;++ue){var te=Ge.chars[ue],Pe=te.penState;if(le===null||!Pe.equals(le)){q.trim().length>0&&(Ze.spans.push({name:We,line:q,row:ie}),q="");var xe="style_cea608_"+Pe.foreground+"_"+Pe.background;Pe.underline&&(xe+="_underline"),Pe.italics&&(xe+="_italics"),ke.hasOwnProperty(xe)||(ke[xe]=JSON.parse(JSON.stringify(Pe))),le=Pe,We=xe}q+=te.uchar}q.trim().length>0&&Ze.spans.push({name:We,line:q,row:ie}),ze=!0,Oe=ae}else ze=!1,Oe=-1,ye&&(ye.p.push(Ze),Ze={start:he,end:Ae,spans:[]},ye.y2=ie,ye.name="region_"+ye.x+"_"+ye.y1+"_"+ye.y2,Se.hasOwnProperty(ye.name)===!1?(Ie.push(ye),Se[ye.name]=ye):Se[ye.name].p.contat(ye.p),ye=null)}ye&&(ye.p.push(Ze),ye.y2=ie+1,ye.name="region_"+ye.x+"_"+ye.y1+"_"+ye.y2,Se.hasOwnProperty(ye.name)===!1?(Ie.push(ye),Se[ye.name]=ye):Se[ye.name].p.contat(ye.p),ye=null);var je=[];for(ie=0;ie<Ie.length;++ie){var Me=Ie[ie],ve="sub_cea608_"+k++,De=document.createElement("div");De.id=ve;var $e=j(Me);De.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+$e;var mt=document.createElement("div");mt.className="paragraph bodyStyle",mt.style.cssText=W(re);var ct=document.createElement("div");ct.className="cueUniWrapper",ct.style.cssText="unicode-bidi: normal; direction: ltr;";for(var yt=0;yt<Me.p.length;++yt){var pt=Me.p[yt],Gt=0;for(_e=0;_e<pt.spans.length;++_e){var Vt=pt.spans[_e];if(Vt.line.length>0){if(_e!==0&&Gt!=Vt.row){var jt=document.createElement("br");jt.className="lineBreak",ct.appendChild(jt)}var Zt=!1;Gt===Vt.row&&(Zt=!0),Gt=Vt.row;var xn=ke[Vt.name],at=document.createElement("span");at.className="spanPadding "+Vt.name+" customSpanColor",at.style.cssText=W(re,xn),_e!==0&&Zt?_e===pt.spans.length-1?at.textContent=H(Vt.line):at.textContent=Vt.line:pt.spans.length>1&&_e<pt.spans.length-1&&Vt.row===pt.spans[_e+1].row?at.textContent=ee(Vt.line):at.textContent=Vt.line.trim(),ct.appendChild(at)}}}mt.appendChild(ct),De.appendChild(mt);var St={bodyStyle:["%",90]};for(var Qt in ke)ke.hasOwnProperty(Qt)&&(St[Qt]=["%",90]);je.push({type:"html",start:he,end:Ae,cueHTMLElement:De,cueID:ve,cellResolution:[32,15],isFromCEA608:!0,fontSize:St,lineHeight:{},linePadding:{}})}return je}}}Vm.__dashjs_factory_name="EmbeddedTextHtmlRender";var jn=U.Z.getSingletonFactory(Vm);function Qh(k){var O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se=k.errHandler,ke=k.manifestModel,Ie=k.mediaController,Ge=k.videoModel,q=k.textTracks,le=k.vttParser,ae=k.vttCustomRenderingParser,ue=k.ttmlParser,te=k.streamInfo,Pe=k.settings,xe=this.context,je=(0,m.Z)(xe).getInstance(),Me=!1;function ve(){H=null,he=NaN,Ae=[],Te=null,re=!1,ee=[],W=null}function De(jt){var Zt=new Gm;for(var xn in jt)Zt[xn]=jt[xn];Zt.labels=jt.labels,Zt.defaultTrack=function(at){var St=!1;return _e.length>1&&at.isEmbedded?St=at.id&&at.id===E.Z.CC1:_e.length===1?at.id&&typeof at.id=="string"&&at.id.substring(0,2)==="CC"&&(St=!0):_e.length===0&&(St=at.index===ee[0].index),St}(jt),Zt.isFragmented=jt.isFragmented,Zt.isEmbedded=!!jt.isEmbedded,Zt.isTTML=function(at){return at.codec&&at.codec.search(E.Z.STPP)>=0||at.mimeType&&at.mimeType.search(E.Z.TTML)>=0}(jt),Zt.kind=function(at,St){var Qt=at.roles&&at.roles.length>0?St[at.roles[0]]:St.caption;return Qt=Qt===St.caption||Qt===St.subtitle?Qt:St.caption}(jt,{subtitle:"subtitles",caption:"captions"}),q.addTextTrack(Zt)}function $e(jt){var Zt=jt.chunk;Zt.mediaInfo.embeddedCaptions&&ct(Zt.bytes,Zt)}function mt(jt){ie=jt}function ct(jt,Zt){var xn=Zt.mediaInfo,at=xn.type,St=xn.mimeType,Qt=xn.codec||St;Qt?xn.codec.indexOf("application/mp4")!==-1?function(Pt,un,an){var Jt;if(un.segmentType==="InitializationSegment")re=!0,he=V.getMediaTimescaleFromMoov(Pt);else{if(!re)return;(Jt=V.getSamplesInfo(Pt).sampleList).length>0&&(Te=Jt[0].cts-un.start*he),an.search(E.Z.STPP)>=0?function(Bn,kn,mr){var vr,bt;for(W=W!==null?W:Gt(mr),vr=0;vr<kn.length;vr++){var tn=kn[vr],qt=tn.cts,mn=pt(),bn=mn+qt/he,Zn=bn+tn.duration/he;O.buffered.add(bn,Zn);var Fn=new DataView(Bn,tn.offset,tn.subSizes[0]),qn=Lr.Utils.dataViewToString(Fn,E.Z.UTF8),Yn=[],en=tn.offset+tn.subSizes[0];for(bt=1;bt<tn.subSizes.length;bt++){var Nn=new Uint8Array(Bn,en,tn.subSizes[bt]),Pn=String.fromCharCode.apply(null,Nn);Yn.push(Pn),en+=tn.subSizes[bt]}try{var On=ke.getValue().ttmlTimeIsRelative?qt/he:0,Dn=W.parse(qn,On,qt/he,(qt+tn.duration)/he,Yn);q.addCaptions(ie,mn,Dn)}catch(Ct){H.removeExecutedRequestsBeforeTime(),this.remove(),j.error("TTML parser error: "+Ct.message)}}}(Pt,Jt,an):function(Bn,kn){var mr,vr,bt,tn=[];for(mr=0;mr<kn.length;mr++){var qt=kn[mr];qt.cts-=Te;var mn=pt()+qt.cts/he,bn=mn+qt.duration/he;O.buffered.add(mn,bn);var Zn=Bn.slice(qt.offset,qt.offset+qt.size),Fn=Lr.parseBuffer(Zn);for(vr=0;vr<Fn.boxes.length;vr++){var qn=Fn.boxes[vr];if(j.debug("VTT box1: "+qn.type),qn.type!=="vtte"&&qn.type==="vttc"){j.debug("VTT vttc boxes.length = "+qn.boxes.length);var Yn={styles:{}};for(bt=0;bt<qn.boxes.length;bt++){var en=qn.boxes[bt];if(j.debug("VTT box2: "+en.type),en.type==="payl")Yn.start=qt.cts/he,Yn.end=(qt.cts+qt.duration)/he,Yn.data=en.cue_text;else if(en.type==="sttg"&&en.settings&&en.settings!=="")try{var Nn=en.settings.split(" ");Yn.styles=le.getCaptionStyles(Nn)}catch(Pn){}}Yn&&Yn.data&&(tn.push(Yn),j.debug("VTT  ".concat(Yn.start," - ").concat(Yn.end," :  ").concat(Yn.data)))}}}tn.length>0&&q.addCaptions(ie,0,tn)}(Pt,Jt)}}(jt,Zt,Qt):at===E.Z.VIDEO?function(Pt,un){var an,Jt;if(un.segmentType===st.w.INIT_SEGMENT_TYPE)ye===0&&(ye=V.getMediaTimescaleFromMoov(Pt));else if(un.segmentType===st.w.MEDIA_SEGMENT_TYPE){if(ye===0)return void j.warn("CEA-608: No timescale for embeddedTextTrack yet");var Bn=(Jt=V.getSamplesInfo(Pt)).lastSequenceNumber,kn=Math.trunc(un.start),mr=Math.trunc(un.end);if(Ze[0]||Ze[1]||function(){for(var mn,bn=0;bn<_e.length;bn++){if((mn=q.getTrackIdxForId(_e[bn].id))===-1)return void j.warn("CEA-608: data before track is ready.");var Zn=yt(mn);Ze[bn]=new(C()).Cea608Parser(bn+1,{newCue:Zn},null)}}(),ye){if(function(mn,bn,Zn,Fn,qn){return mn!==null&&bn!==null&&Fn!==null&&qn!==null&&(bn===mn?Fn!==qn:bn!==mn+Zn)}(ze,Bn,Jt.numSequences,Oe,kn))for(an=0;an<Ze.length;an++)Ze[an]&&Ze[an].reset();for(var vr=function(mn,bn){if(bn.length===0)return null;for(var Zn={splits:[],fields:[[],[]]},Fn=new DataView(mn),qn=0;qn<bn.length;qn++)for(var Yn=bn[qn],en=C().findCea608Nalus(Fn,Yn.offset,Yn.size),Nn=null,Pn=0,On=0;On<en.length;On++)for(var Dn=C().extractCea608DataFromRange(Fn,en[On]),Ct=0;Ct<2;Ct++)if(Dn[Ct].length>0){Yn.cts!==Nn?Pn=0:Pn+=1;var et=pt();Zn.fields[Ct].push([Yn.cts+et*ye,Dn[Ct],Pn]),Nn=Yn.cts}return Zn.fields.forEach(function(zt){zt.sort(function(Ve,tt){return Ve[0]===tt[0]?Ve[2]-tt[2]:Ve[0]-tt[0]})}),Zn}(Pt,Jt.sampleList),bt=0;bt<Ze.length;bt++){var tn=vr.fields[bt],qt=Ze[bt];if(qt)for(an=0;an<tn.length;an++)qt.addData(tn[an][0]/ye,tn[an][1])}ze=Bn,Oe=mr}}}(jt,Zt):function(Pt,un,an){var Jt,Bn,kn=new DataView(Pt,0,Pt.byteLength);Bn=Lr.Utils.dataViewToString(kn,E.Z.UTF8);try{Jt=Gt(an).parse(Bn,0),q.addCaptions(q.getCurrentTrackIdx(),0,Jt),O.buffered&&O.buffered.add(un.start,un.end)}catch(mr){Se.error(new ce.Z(we.TIMED_TEXT_ERROR_ID_PARSE_CODE,we.TIMED_TEXT_ERROR_MESSAGE_PARSE+mr.message,Bn))}}(jt,Zt,Qt):j.error("No text type defined")}function yt(jt){return function(Zt,xn,at){var St;(St=Ge.getTTMLRenderingDiv()?We.createHTMLCaptionsFromScreen(Ge.getElement(),Zt,xn,at):[{start:Zt,end:xn,data:at.getDisplayText(),styles:{}}])&&q.addCaptions(jt,0,St)}}function pt(){return isNaN(O.timestampOffset)?0:O.timestampOffset}function Gt(jt){var Zt;return jt.search(E.Z.VTT)>=0?Zt=Pe.get().streaming.text.webvtt.customRenderingEnabled&&ae?ae:le:(jt.search(E.Z.TTML)>=0||jt.search(E.Z.STPP)>=0)&&(Zt=ue),Zt}function Vt(jt){_e.forEach(function(Zt){var xn=q.getTrackIdxForId(Zt.id);xn>=0&&q.deleteCuesFromTrackIdx(xn,jt.from,jt.to)})}return O={initialize:function(){Me||(_e=[],ie=null,ye=0,Ze=[],ze=null,Oe=null,Me=!0,We=jn(xe).getInstance(),je.on(T.Z.VIDEO_CHUNK_RECEIVED,$e,O),je.on(T.Z.BUFFER_CLEARED,Vt,O))},addMediaInfos:function(jt,Zt,xn){if(ee=ee.concat(Zt),jt===E.Z.TEXT&&Zt[0].isFragmented&&!Zt[0].isEmbedded){H=xn,O.buffered=(0,Hm.Z)(xe).create(),Ae=Ie.getTracksFor(E.Z.TEXT,te.id).filter(function(Pt){return Pt.isFragmented});for(var at=Ie.getCurrentTrackFor(E.Z.TEXT,te.id),St=0;St<Ae.length;St++)if(Ae[St]===at){mt(St);break}}for(var Qt=0;Qt<Zt.length;Qt++)De(Zt[Qt])},resetMediaInfos:function(){ee=[]},getStreamId:function(){return te.id},append:ct,abort:function(){},addEmbeddedTrack:function(jt){if(Me&&jt)if(jt.id===E.Z.CC1||jt.id===E.Z.CC3){for(var Zt=0;Zt<_e.length;Zt++)if(_e[Zt].id===jt.id)return;_e.push(jt)}else j.warn("Embedded track "+jt.id+" not supported!")},resetEmbedded:function(){je.off(T.Z.VIDEO_CHUNK_RECEIVED,$e,O),je.off(T.Z.BUFFER_CLEARED,Vt,O),q&&q.deleteAllTextTracks(),Me=!1,_e=[],Ze=[null,null],ze=null,Oe=null},getConfig:function(){return{fragmentModel:H,fragmentedTracks:Ae,videoModel:Ge}},setCurrentFragmentedTrackIdx:mt,remove:function(jt,Zt){jt===void 0&&jt===Zt&&(jt=O.buffered.start(0),Zt=O.buffered.end(O.buffered.length-1)),O.buffered.remove(jt,Zt),q.deleteCuesFromTrackIdx(ie,jt,Zt)},reset:function(){ve(),ee=[],V=null}},j=(0,M.Z)(xe).getInstance().getLogger(O),V=(0,Hu.Z)(xe).getInstance(),ve(),O}Qh.__dashjs_factory_name="TextSourceBuffer";var $f=U.Z.getClassFactory(Qh),Nr=w(4403);function rl(k,O){(O==null||O>k.length)&&(O=k.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=k[j];return V}var il=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function zr(k){var O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke,Ie,Ge=this.context,q=(0,m.Z)(Ge).getInstance(),le=k.videoModel,ae=k.streamInfo,ue=k.settings;function te(bt,tn,qt,mn,bn,Zn){var Fn=0,qn=0;bt/tn>qt/mn?Fn=(qn=tn)/mn*qt:qn=(Fn=bt)/qt*mn;var Yn,en,Nn=0,Pn=0;return Fn/qn>bn?(Pn=qn,Nn=qn*bn):(Nn=Fn,Pn=Fn/bn),Yn=(bt-Nn)/2,en=(tn-Pn)/2,Zn?{x:Yn+.1*Nn,y:en+.1*Pn,w:.8*Nn,h:.8*Pn}:{x:Yn,y:en,w:Nn,h:Pn}}function Pe(bt,tn){var qt=le.getClientWidth(),mn=le.getClientHeight(),bn=le.getVideoWidth(),Zn=le.getVideoHeight(),Fn=le.getVideoRelativeOffsetTop(),qn=le.getVideoRelativeOffsetLeft();if(bn!==0&&Zn!==0){var Yn=bn/Zn,en=!1;bt.isFromCEA608&&(Yn=1.1666666666666667,en=!0);var Nn=te.call(this,qt,mn,bn,Zn,Yn,en),Pn=Nn.w,On=Nn.h,Dn=Nn.x,Ct=Nn.y;if(Pn!=Ae||On!=Te||Dn!=re||Ct!=he||tn){if(re=Dn+qn,he=Ct+Fn,Ae=Pn,Te=On,ie){var et=ie.style;et&&(et.left=re+"px",et.top=he+"px",et.width=Ae+"px",et.height=Te+"px",et.zIndex=ze&&document[ze]||Oe?We:null,q.trigger(_.Z.CAPTION_CONTAINER_RESIZE))}var zt=bt.activeCues;if(zt)for(var Ve=zt.length,tt=0;tt<Ve;++tt){var Lt=zt[tt];Lt.scaleCue(Lt)}}}}function xe(bt){var tn,qt,mn,bn,Zn,Fn=Ae,qn=Te;if(bt.cellResolution){var Yn=[Fn/bt.cellResolution[0],qn/bt.cellResolution[1]];if(bt.linePadding){for(tn in bt.linePadding)if(bt.linePadding.hasOwnProperty(tn)){qt=(bt.linePadding[tn]*Yn[0]).toString();for(var en=document.getElementsByClassName("spanPadding"),Nn=0;Nn<en.length;Nn++)en[Nn].style.cssText=en[Nn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+qt),en[Nn].style.cssText=en[Nn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+qt)}}if(bt.fontSize){for(tn in bt.fontSize)if(bt.fontSize.hasOwnProperty(tn)){bt.fontSize[tn][0]==="%"?mn=bt.fontSize[tn][1]/100:bt.fontSize[tn][0]==="c"&&(mn=bt.fontSize[tn][1]),qt=(mn*Yn[1]).toString(),Zn=tn!=="defaultFontSize"?document.getElementsByClassName(tn):document.getElementsByClassName("paragraph");for(var Pn=0;Pn<Zn.length;Pn++)Zn[Pn].style.cssText=Zn[Pn].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+qt)}if(bt.lineHeight){for(tn in bt.lineHeight)if(bt.lineHeight.hasOwnProperty(tn)){bt.lineHeight[tn][0]==="%"?bn=bt.lineHeight[tn][1]/100:bt.fontSize[tn][0]==="c"&&(bn=bt.lineHeight[tn][1]),qt=(bn*Yn[1]).toString(),Zn=document.getElementsByClassName(tn);for(var On=0;On<Zn.length;On++)Zn[On].style.cssText=Zn[On].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+qt)}}}}if(bt.isd){var Dn=document.getElementById(bt.cueID);Dn&&ie.removeChild(Dn),Me(bt)}}function je(bt,tn){var qt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,mn=/^#(.*)$/;if(qt.test(tn)){var bn=qt.exec(tn),Zn=parseInt(bn[4],10)-1;return"data:image/png;base64,"+btoa(bt.images[Zn])}if(mn.test(tn)){var Fn=mn.exec(tn)[1];return"data:image/png;base64,"+bt.embeddedImages[Fn]}return tn}function Me(bt){if(ie){vr.call(this);var tn=document.createElement("div");ie.appendChild(tn),Ze=(0,Nr.renderHTML)(bt.isd,tn,function(qt){return je(bt,qt)},ie.clientHeight,ie.clientWidth,ue.get().streaming.text.imsc.displayForcedOnlyMode,function(qt){j.info("renderCaption :",qt)},Ze,ue.get().streaming.text.imsc.enableRollUp),tn.id=bt.cueID,q.trigger(_.Z.CAPTION_RENDERED,{captionDiv:tn,currentTrackIdx:H})}}function ve(bt,tn){return!!tn&&tn.endTime>=bt.startTime}function De(bt,tn){return!!ue.get().streaming.text.extendSegmentedCues&&!!function(qt,mn,bn){for(var Zn=0;Zn<bn.length;Zn++){var Fn=bn[Zn];if(JSON.stringify(qt[Fn])!==JSON.stringify(mn[Fn]))return!1}return!0}(tn,bt,il)&&(tn.endTime=Math.max(tn.endTime,bt.endTime),!0)}function $e(bt,tn){tn&&tn.forEach(function(qt){qt.kind&&qt.kind==="image"&&(qt.src=je(bt,qt.src)),$e(bt,qt.contents)})}function mt(bt,tn,qt){var mn=St(bt),bn=ue.get().streaming.text.dispatchForManualRendering;if(mn&&Array.isArray(qt)&&qt.length!==0)for(var Zn=0;Zn<qt.length;Zn++){var Fn=null,qn=qt[Zn];mn.cellResolution=qn.cellResolution,mn.isFromCEA608=qn.isFromCEA608,isNaN(qn.start)||isNaN(qn.end)||(bn?Fn=ct(qn,tn):jt(qn)&&ie?Fn=Gt(qn,tn,mn):qn.data&&(Fn=Vt(qn,tn,mn)));try{if(Fn){if(!un(mn,Fn))if(ue.get().streaming.text.webvtt.customRenderingEnabled)mn.manualCueList||(mn.manualCueList=[]),mn.manualCueList.push(Fn);else{var Yn=void 0;mn.cues&&mn.cues.length!==0&&(Yn=mn.cues[mn.cues.length-1]),ve(Fn,Yn)?De(Fn,Yn)||(Yn.isd&&(Yn.onexit=function(){}),mn.mode!==E.Z.TEXT_DISABLED&&mn.addCue(Fn)):mn.mode!==E.Z.TEXT_DISABLED&&mn.addCue(Fn)}var en=ue.get().streaming.buffer.bufferToKeep;Jt(mn,0,le.getTime()-en)}else j.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Nn){throw Bn(mn),mn.addCue(Fn),Nn}}}function ct(bt,tn){var qt=Zt(bt,tn);return qt.onenter=function(){jt(bt)&&Ie&&Ie.cueID!==qt.cueID&&pt(Ie),delete qt.type,Ie=qt,yt(qt)},qt.onexit=function(){pt(qt),Ie=null},qt}function yt(bt){q.trigger(_.Z.CUE_ENTER,bt)}function pt(bt){q.trigger(_.Z.CUE_EXIT,{cueID:bt.cueID})}function Gt(bt,tn,qt){var mn=this,bn=Zt(bt,tn);return ie.style.left=re+"px",ie.style.top=he+"px",ie.style.width=Ae+"px",ie.style.height=Te+"px",bn.onenter=function(){var Zn=this;qt.mode===E.Z.TEXT_SHOWING&&(this.isd?(ke?requestAnimationFrame(function(){return Me(Zn)}):Me(this),j.debug("Cue enter id:"+this.cueID)):(ie.appendChild(this.cueHTMLElement),xe.call(mn,this),q.trigger(_.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:H})))},bn.onexit=function(){if(ie)for(var Zn=ie.childNodes,Fn=0;Fn<Zn.length;++Fn)Zn[Fn].id===this.cueID&&(j.debug("Cue exit id:"+Zn[Fn].id),ie.removeChild(Zn[Fn]),--Fn)},bn}function Vt(bt,tn,qt){var mn=Zt(bt,tn);if(mn.isActive=!1,bt.styles)try{bt.styles.align!==void 0&&"align"in mn&&(mn.align=bt.styles.align),bt.styles.line!==void 0&&"line"in mn&&(mn.line=bt.styles.line),bt.styles.snapToLines!==void 0&&"snapToLines"in mn&&(mn.snapToLines=bt.styles.snapToLines),bt.styles.position!==void 0&&"position"in mn&&(mn.position=bt.styles.position),bt.styles.size!==void 0&&"size"in mn&&(mn.size=bt.styles.size)}catch(bn){j.error(bn)}return mn.onenter=function(){qt.mode===E.Z.TEXT_SHOWING&&q.trigger(_.Z.CAPTION_RENDERED,{currentTrackIdx:H})},mn}function jt(bt){return bt.type==="html"}function Zt(bt,tn){return jt(bt)?function(qt,mn){var bn=new V(qt.start+mn,qt.end+mn,"");return bn.cueHTMLElement=qt.cueHTMLElement,bn.isd=qt.isd,bn.images=qt.images,bn.embeddedImages=qt.embeddedImages,bn.cueID=qt.cueID,bn.scaleCue=xe.bind(self),bn.cellResolution=qt.cellResolution,bn.lineHeight=qt.lineHeight,bn.linePadding=qt.linePadding,bn.fontSize=qt.fontSize,bn.isd&&$e(bn,bn.isd.contents),bn}(bt,tn):function(qt,mn){var bn=new V(qt.start-mn,qt.end-mn,qt.data);return bn.cueID="".concat(bn.startTime,"_").concat(bn.endTime),bn}(bt,tn)}function xn(bt){if(_e)for(var tn=_e.childNodes,qt=0;qt<tn.length;++qt)tn[qt].id===bt.cueID&&(_e.removeChild(tn[qt]),--qt)}function at(){var bt,tn=[],qt=function(bn,Zn){var Fn;if(typeof Symbol>"u"||bn[Symbol.iterator]==null){if(Array.isArray(bn)||(Fn=function(On,Dn){if(On){if(typeof On=="string")return rl(On,Dn);var Ct=Object.prototype.toString.call(On).slice(8,-1);return Ct==="Object"&&On.constructor&&(Ct=On.constructor.name),Ct==="Map"||Ct==="Set"?Array.from(On):Ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ct)?rl(On,Dn):void 0}}(bn))||Zn){Fn&&(bn=Fn);var qn=0,Yn=function(){};return{s:Yn,n:function(){return qn>=bn.length?{done:!0}:{done:!1,value:bn[qn++]}},e:function(On){throw On},f:Yn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var en,Nn=!0,Pn=!1;return{s:function(){Fn=bn[Symbol.iterator]()},n:function(){var On=Fn.next();return Nn=On.done,On},e:function(On){Pn=!0,en=On},f:function(){try{Nn||Fn.return==null||Fn.return()}finally{if(Pn)throw en}}}}(le.getTextTracks());try{for(qt.s();!(bt=qt.n()).done;){var mn=bt.value;mn.manualMode===E.Z.TEXT_SHOWING&&tn.push(mn)}}catch(bn){qt.e(bn)}finally{qt.f()}return tn}function St(bt){return bt>=0&&W[bt]?le.getTextTrack(W[bt].kind,W[bt].id,W[bt].lang,W[bt].isTTML,W[bt].isEmbedded):null}function Qt(bt){var tn=this;if(bt!==H){var qt=St(H=bt);Pt.call(this,qt),ye&&(clearInterval(ye),ye=null),qt&&qt.renderingType==="html"&&(Pe.call(this,qt,!0),window.ResizeObserver?(Se=new window.ResizeObserver(function(){Pe.call(tn,qt,!0)})).observe(le.getElement()):ye=setInterval(Pe.bind(this,qt),500))}}function Pt(bt){vr.call(this),bt&&bt.renderingType==="html"?kn.call(this):mr.call(this)}function un(bt,tn){if(!bt.cues)return!1;for(var qt=0;qt<bt.cues.length;qt++)if(bt.cues[qt].startTime===tn.startTime&&bt.cues[qt].endTime===tn.endTime)return!0;return!1}function an(bt,tn,qt){var mn=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!bt&&(isNaN(tn)||(mn?bt.startTime:bt.endTime)>=tn)&&(isNaN(qt)||(mn?bt.endTime:bt.startTime)<=qt)}function Jt(bt,tn,qt){var mn,bn;if(!(qt<tn)&&bt&&(bt.cues||bt.manualCueList)){var Zn=bt.cues&&bt.cues.length>0?"native":"custom",Fn=Zn==="native"?bt.cues:bt.manualCueList;if(!Fn||Fn.length===0)return;for(var qn=Fn.length-1;qn>=0;qn--)!an(Fn[qn],tn,qt,!0)||(mn=Fn[qn],bn=le.getTime(),mn.startTime>=bn&&mn.endTime<=bn)||(Zn==="native"?bt.removeCue(Fn[qn]):(xn(Fn[qn]),delete bt.manualCueList[qn]))}}function Bn(bt,tn,qt){var mn=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(bt&&(bt.cues||bt.manualCueList)){var bn=bt.cues&&bt.cues.length>0?"native":"custom",Zn=bn==="native"?bt.cues:bt.manualCueList;if(!Zn||Zn.length===0)return;for(var Fn=Zn.length-1,qn=Fn;qn>=0;qn--)an(Zn[qn],tn,qt,mn)&&(bn==="native"?(Zn[qn].onexit&&Zn[qn].onexit(),bt.removeCue(Zn[qn])):(xn(Zn[qn]),delete bt.manualCueList[qn]))}}function kn(){var bt=document.getElementById("native-cue-style");if(!bt){(bt=document.createElement("style")).id="native-cue-style",document.head.appendChild(bt);var tn=bt.sheet,qt=le.getElement();try{qt&&(qt.id?tn.insertRule("#"+qt.id+"::cue {background: transparent}",0):qt.classList.length!==0?tn.insertRule("."+qt.className+"::cue {background: transparent}",0):tn.insertRule("video::cue {background: transparent}",0))}catch(mn){j.info(""+mn.message)}}}function mr(){var bt=document.getElementById("native-cue-style");bt&&document.head.removeChild(bt)}function vr(){if(ie)for(;ie.firstChild;)ie.removeChild(ie.firstChild)}return O={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(V=window.VTTCue||window.TextTrackCue,W=[],ee=[],H=-1,re=0,he=0,Ae=0,Te=0,ie=null,_e=null,ye=null,Oe=!1,We=2147483647,Ze=null,ke="requestAnimationFrame"in window,document.fullscreenElement!==void 0?ze="fullscreenElement":document.webkitIsFullScreen!==void 0?ze="webkitIsFullScreen":document.msFullscreenElement?ze="msFullscreenElement":document.mozFullScreen&&(ze="mozFullScreen"))},getStreamId:function(){return ae.id},addTextTrack:function(bt){W.push(bt)},addCaptions:mt,createTracks:function(){var bt=ue.get().streaming.text.dispatchForManualRendering;W.sort(function(Dn,Ct){return Dn.index-Ct.index}),ie=le.getTTMLRenderingDiv(),_e=le.getVttRenderingDiv();for(var tn,qt,mn,bn,Zn,Fn,qn=-1,Yn=0;Yn<W.length;Yn++){var en=(qt=(tn=W[Yn]).kind,mn=tn.id!==void 0?tn.id:tn.lang,bn=tn.lang,Zn=tn.isTTML,Fn=tn.isEmbedded,le.addTextTrack(qt,mn,bn,Zn,Fn));ee.push(en),W[Yn].defaultTrack&&(en.default=!0,qn=Yn);var Nn=St(Yn);Nn&&(Nn.mode=E.Z.TEXT_SHOWING,ie&&(W[Yn].isTTML||W[Yn].isEmbedded)?Nn.renderingType="html":Nn.renderingType="default"),mt(Yn,0,W[Yn].captionData),q.trigger(_.Z.TEXT_TRACK_ADDED)}if(Qt.call(this,qn),qn>=0){q.on(_.Z.PLAYBACK_METADATA_LOADED,function Dn(){var Ct=St(qn);Ct&&Ct.renderingType==="html"&&Pe.call(this,Ct,!0),q.off(_.Z.PLAYBACK_METADATA_LOADED,Dn,this)},this);for(var Pn=0;Pn<W.length;Pn++){var On=St(Pn);On&&(On.mode=Pn!==qn||bt?E.Z.TEXT_HIDDEN:E.Z.TEXT_SHOWING,On.manualMode=Pn===qn?E.Z.TEXT_SHOWING:E.Z.TEXT_HIDDEN)}}q.trigger(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:H,tracks:W,streamId:ae.id})},getCurrentTrackIdx:function(){return H},setCurrentTrackIdx:Qt,getTrackIdxForId:function(bt){for(var tn=-1,qt=0;qt<W.length;qt++)if(W[qt].id===bt){tn=qt;break}return tn},getCurrentTrackInfo:function(){return W[H]},setModeForTrackIdx:function(bt,tn){var qt=St(bt);qt&&qt.mode!==tn&&(qt.mode=tn),qt&&qt.manualMode!==tn&&(qt.manualMode=tn)},deleteCuesFromTrackIdx:function(bt,tn,qt){var mn=St(bt);mn&&Bn(mn,tn,qt)},deleteAllTextTracks:function(){for(var bt=ee?ee.length:0,tn=0;tn<bt;tn++){var qt=St(tn);qt&&Bn.call(this,qt,ae.start,ae.start+ae.duration,!1)}ee=[],W=[],ye&&(clearInterval(ye),ye=null),Se&&le&&(Se.unobserve(le.getElement()),Se=null),H=-1,vr.call(this)},manualCueProcessing:function(bt){var tn=at();if(tn&&tn.length>0){var qt=tn[0].manualCueList;qt&&qt.length>0&&qt.forEach(function(mn){mn.startTime<=bt&&mn.endTime>=bt&&!mn.isActive?(mn.isActive=!0,ue.get().streaming.text.dispatchForManualRendering?yt(mn):WebVTT.processCues(window,[mn],_e,mn.cueID)):mn.isActive&&(mn.startTime>bt||mn.endTime<bt)&&(mn.isActive=!1,ue.get().streaming.text.dispatchForManualRendering?pt(mn):xn(mn))})}},disableManualTracks:function(){var bt=at();if(bt&&bt.length>0){var tn=bt[0].manualCueList;tn&&tn.length>0&&tn.forEach(function(qt){if(qt.isActive){if(qt.isActive=!1,ue.get().streaming.text.dispatchForManualRendering)pt(qt);else if(_e)for(var mn=_e.childNodes,bn=0;bn<mn.length;++bn)mn[bn].id===qt.cueID&&(_e.removeChild(mn[bn]),--bn)}})}}},j=(0,M.Z)(Ge).getInstance().getLogger(O),O}zr.__dashjs_factory_name="TextTracks";var Xs=U.Z.getClassFactory(zr);function Jh(){var k,O,j,V,W,ee,H=this.context;function re(ie){var _e=ie.split(":"),ye=_e.length-1;return ie=60*parseInt(_e[ye-1],10)+parseFloat(_e[ye]),ye===2&&(ie+=3600*parseInt(_e[0],10)),ie}function he(ie){var _e=ie.split(V),ye=_e[1].split(ee);return ye.shift(),_e[1]=ye[0],ye.shift(),{cuePoints:_e,styles:Ae(ye)}}function Ae(ie){var _e={};return ie.forEach(function(ye){if(ye.split(/:/).length>1){var ze=ye.split(/:/)[1],Oe=!1;ze&&ze.search(/%/)!=-1&&(Oe=!0,ze=parseInt(ze.replace(/%/,""),10)),(ye.match(/align/)||ye.match(/A/))&&(_e.align=ze),(ye.match(/line/)||ye.match(/L/))&&(_e.line=ze==="auto"?ze:parseInt(ze,10),Oe&&(_e.snapToLines=!1)),(ye.match(/position/)||ye.match(/P/))&&(_e.position=ze),(ye.match(/size/)||ye.match(/S/))&&(_e.size=ze)}}),_e}function Te(ie,_e){for(var ye,ze=_e,Oe="",Ze="";ie[ze]!==""&&ze<ie.length;)ze++;if((ye=ze-_e)>1)for(var We=0;We<ye;We++){if((Ze=ie[_e+We]).match(V)){Oe="";break}Oe+=Ze,We!==ye-1&&(Oe+="\n")}else(Ze=ie[_e]).match(V)||(Oe=Ze);return Oe}return k={parse:function(ie){var _e,ye,ze=[];if(!ie)return ze;_e=(ie=ie.split(j)).length,ye=-1;for(var Oe=0;Oe<_e;Oe++){var Ze=ie[Oe];if(Ze.length>0&&Ze!=="WEBVTT"&&Ze.match(V)){var We=he(Ze),Se=We.cuePoints,ke=We.styles,Ie=Te(ie,Oe+1),Ge=re(Se[0].replace(W,"")),q=re(Se[1].replace(W,""));!isNaN(Ge)&&!isNaN(q)&&Ge>=ye&&q>Ge?Ie!==""?(ye=Ge,ze.push({start:Ge,end:q,data:Ie,styles:ke})):O.error("Skipping cue due to empty/malformed cue text"):O.error("Skipping cue due to incorrect cue timing")}}return ze},getCaptionStyles:Ae},O=(0,M.Z)(H).getInstance().getLogger(k),j=/(?:\r\n|\r|\n)/gm,V=/-->/,W=/(^[\s]+|[\s]+$)/g,ee=/\s\b/g,k}Jh.__dashjs_factory_name="VTTParser";var Bi=U.Z.getSingletonFactory(Jh);function Km(){var k,O;return k={parse:function(j){var V=[];return O.oncue=function(W){W.start=W.startTime,W.end=W.endTime,W.data=W.text,W.styles={align:W.align,line:W.line,position:W.position,size:W.size},V.push(W)},O.parse(j),V}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(O=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(j){}}(),k}Km.__dashjs_factory_name="VttCustomRenderingParser";var zm=U.Z.getSingletonFactory(Km);function Ym(){var k,O,j=this.context,V=(0,m.Z)(j).getInstance(),W=0;return k={parse:function(ee,H,re,he,Ae){var Te,ie,_e,ye="",ze=[],Oe={},Ze={},We="",Se="",ke={onOpenTag:function(ae,ue,te){if(te[" imagetype"]&&!te[" imageType"]&&(V.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Hs.LEVELS.ERROR,event:Hs.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),te[" imageType"]=te[" imagetype"]),ue==="image"&&(ae==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||ae==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!te[" imageType"]||te[" imageType"].value!=="PNG")return void O.warn("smpte-tt imageType != PNG. Discarded");We=te["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){We&&(Ze[We]=Se.trim()),Se="",We=""},onText:function(ae){We&&(Se+=ae)}};if(!ee)throw ye="no ttml data to parse",new Error(ye);Oe.data=ee,V.trigger(T.Z.TTML_TO_PARSE,Oe);var Ie=(0,Nr.fromXML)(Oe.data,function(ae){ye=ae},ke);V.trigger(T.Z.TTML_PARSED,{ttmlString:Oe.data,ttmlDoc:Ie});var Ge,q=Ie.getMediaTimeEvents();for(_e=0;_e<q.length;_e++){var le=(0,Nr.generateISD)(Ie,q[_e],function(ae){ye=ae});le.contents.some(function(ae){return ae.contents.length})&&(Te=q[_e]+H)<(ie=q[_e+1]+H)&&ze.push({start:Te,end:ie,type:"html",cueID:(Ge="cue_TTML_"+W,W++,Ge),isd:le,images:Ae,embeddedImages:Ze})}if(ye!=="")throw O.error(ye),new Error(ye);return ze}},O=(0,M.Z)(j).getInstance().getLogger(k),k}Ym.__dashjs_factory_name="TTMLParser";var Wm=U.Z.getSingletonFactory(Ym);function ep(k,O){var j=Object.keys(k);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(k);O&&(V=V.filter(function(W){return Object.getOwnPropertyDescriptor(k,W).enumerable})),j.push.apply(j,V)}return j}function Mc(k){for(var O=1;O<arguments.length;O++){var j=arguments[O]!=null?arguments[O]:{};O%2?ep(Object(j),!0).forEach(function(V){Wa(k,V,j[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(j)):ep(Object(j)).forEach(function(V){Object.defineProperty(k,V,Object.getOwnPropertyDescriptor(j,V))})}return k}function Wa(k,O,j){return O in k?Object.defineProperty(k,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):k[O]=j,k}function tp(k,O){(O==null||O>k.length)&&(O=k.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=k[j];return V}function Dc(k){var O,j,V,W=this.context,ee=(0,m.Z)(W).getInstance(),H=(0,wt.Z)(W).getInstance(),re=k.adapter,he=k.baseURLController;function Ae(_e,ye){var ze,Oe,Ze=!1;if(he.resolve()){var We=re.getVoRepresentations(_e);We&&We.length>0&&(ze=he.resolve(We[0].path).url)}var Se=_e.essentialPropertiesAsArray.filter(function(Ie){return Ie.schemeIdUri&&Ie.schemeIdUri===E.Z.FONT_DOWNLOAD_DVB_SCHEME}),ke=_e.supplementalPropertiesAsArray.filter(function(Ie){return Ie.schemeIdUri&&Ie.schemeIdUri===E.Z.FONT_DOWNLOAD_DVB_SCHEME});Se.length>0?(Ze=!0,Oe=Se):Oe=ke,Oe.forEach(function(Ie){if(function(ae){return!(!(ae.value&&ae.value==="1"&&ae.dvbUrl&&ae.dvbUrl.length>0&&ae.dvbFontFamily&&ae.dvbFontFamily.length>0&&ae.dvbMimeType)||ae.dvbMimeType!==E.Z.OFF_MIMETYPE&&ae.dvbMimeType!==E.Z.WOFF_MIMETYPE)}(Ie)){var Ge=(q=Ie.dvbUrl,le=ze,H.isPathAbsolute(q)?q:H.isRelative(q)?le?H.resolve(q,le):H.resolve(q):q);V.push({fontFamily:Ie.dvbFontFamily,url:Ge,mimeType:Ie.dvbMimeType,trackId:_e.id,streamId:ye,isEssential:Ze,status:"unloaded",fontFace:new FontFace(Ie.dvbFontFamily,"url(".concat(Ge,")"),{display:"swap"})})}var q,le})}function Te(_e,ye){var ze=V[_e];V[_e]=Mc(Mc({},ze),{},{status:ye})}function ie(){V=[]}return O={addFontsFromTracks:function(_e,ye){if(_e&&Array.isArray(_e)&&ye)for(var ze=0;ze<_e.length;ze++)Ae(_e[ze],ye)},downloadFonts:function(){for(var _e=function(ze){var Oe=V[ze];document.fonts.add(Oe.fontFace),ee.trigger(_.Z.DVB_FONT_DOWNLOAD_ADDED,Oe),Oe.fontFace.load().then(function(){Te(ze,"loaded"),ee.trigger(_.Z.DVB_FONT_DOWNLOAD_COMPLETE,Oe)},function(Ze){Te(ze,"error"),j.debug("Font download error: ",Ze),ee.trigger(_.Z.DVB_FONT_DOWNLOAD_FAILED,Oe)})},ye=0;ye<V.length;ye++)_e(ye)},getFonts:function(){return V},getFontsForTrackId:function(_e){return V.filter(function(ye){return ye.trackId&&ye.trackId===_e})},reset:function(){(function(){var _e,ye=function(Ze,We){var Se;if(typeof Symbol>"u"||Ze[Symbol.iterator]==null){if(Array.isArray(Ze)||(Se=function(ae,ue){if(ae){if(typeof ae=="string")return tp(ae,ue);var te=Object.prototype.toString.call(ae).slice(8,-1);return te==="Object"&&ae.constructor&&(te=ae.constructor.name),te==="Map"||te==="Set"?Array.from(ae):te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te)?tp(ae,ue):void 0}}(Ze))||We){Se&&(Ze=Se);var ke=0,Ie=function(){};return{s:Ie,n:function(){return ke>=Ze.length?{done:!0}:{done:!1,value:Ze[ke++]}},e:function(ae){throw ae},f:Ie}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ge,q=!0,le=!1;return{s:function(){Se=Ze[Symbol.iterator]()},n:function(){var ae=Se.next();return q=ae.done,ae},e:function(ae){le=!0,Ge=ae},f:function(){try{q||Se.return==null||Se.return()}finally{if(le)throw Ge}}}}(V);try{for(ye.s();!(_e=ye.n()).done;){var ze=_e.value,Oe=document.fonts.delete(ze.fontFace);j.debug("Removal of fontFamily: ".concat(ze.fontFamily," was ").concat(Oe?"successful":"unsuccessful"))}}catch(Ze){ye.e(Ze)}finally{ye.f()}})(),ie()}},j=(0,M.Z)(W).getInstance().getLogger(O),ie(),O}Dc.__dashjs_factory_name="DVBFonts";var jl=U.Z.getClassFactory(Dc);function Zr(k){var O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze,Oe=this.context,Ze=k.adapter,We=k.errHandler,Se=k.manifestModel,ke=k.mediaController,Ie=k.baseURLController,Ge=k.videoModel,q=k.settings;function le(De){if(ze.error("Could not download ".concat(De.isEssential?"an essential":"a"," font - fontFamily: ").concat(De.fontFamily,", url: ").concat(De.url)),De.isEssential){var $e=W[De.streamId].getTrackIdxForId(De.trackId);W[De.streamId].setModeForTrackIdx($e,E.Z.TEXT_DISABLED)}}function ae(De){if(ze.debug("Successfully downloaded ".concat(De.isEssential?"an essential":"a"," font - fontFamily: ").concat(De.fontFamily,", url: ").concat(De.url)),De.isEssential){var $e=W[De.streamId].getTrackIdxForId(De.trackId);$e===W[De.streamId].getCurrentTrackIdx()?W[De.streamId].setModeForTrackIdx($e,E.Z.TEXT_SHOWING):W[De.streamId].setModeForTrackIdx($e,E.Z.TEXT_HIDDEN)}}function ue(De){var $e=De.tracks,mt=De.index,ct=De.streamId;if(q.get().streaming.text.defaultEnabled===!1&&!xe()||_e)je(ct,-1);else{var yt=ke.getCurrentTrackFor(E.Z.TEXT,ct);if(yt){var pt={lang:yt.lang,role:yt.roles[0],index:yt.index,codec:yt.codec,accessibility:yt.accessibility[0]};$e.some(function(Gt,Vt){if(ke.matchSettings(pt,Gt))return je(ct,Vt),mt=Vt,!0})}Ae=!1}j[ct].lastEnabledIndex=mt,he.trigger(_.Z.TEXT_TRACKS_ADDED,{enabled:xe(),index:mt,tracks:$e,streamId:ct}),ie=!0,ye.addFontsFromTracks($e,ct),ye.getFonts().forEach(function(Gt){if(Gt.isEssential){var Vt=W[Gt.streamId].getTrackIdxForId(Gt.trackId);W[Gt.streamId].setModeForTrackIdx(Vt,E.Z.TEXT_DISABLED)}}),ye.downloadFonts()}function te(De){try{var $e=De.streamId;if(!W[$e]||isNaN(De.time))return;W[$e].manualCueProcessing(De.time)}catch(mt){}}function Pe(De){try{var $e=De.streamId;if(!W[$e])return;W[$e].disableManualTracks()}catch(mt){}}function xe(){var De=!0;return Ae&&!Te&&(De=!1),De}function je(De,$e){(Ae=$e===-1)&&ke&&ke.saveTextSettingsDisabled();var mt=Me(De);if(mt!==$e&&W[De]){W[De].disableManualTracks();var ct=W[De].getCurrentTrackInfo(),yt=ct?Ge.getTextTrack(ct.kind,ct.id,ct.lang,ct.isTTML,ct.isEmbedded):null;yt&&yt.mode!==E.Z.TEXT_DISABLED&&W[De].setModeForTrackIdx(mt,E.Z.TEXT_HIDDEN),W[De].setCurrentTrackIdx($e),ct=W[De].getCurrentTrackInfo();var pt=q.get().streaming.text.dispatchForManualRendering;ct&&!pt&&ct.mode!==E.Z.TEXT_DISABLED&&W[De].setModeForTrackIdx($e,E.Z.TEXT_SHOWING),ct&&ct.isFragmented&&!ct.isEmbedded?function(Gt,Vt,jt){if(V[Gt])for(var Zt=V[Gt].getConfig().fragmentedTracks,xn=0;xn<Zt.length;xn++){var at=Zt[xn];if(Vt.lang===at.lang&&(at.id?Vt.id===at.id:Vt.index===at.index)){var St=ke.getCurrentTrackFor(E.Z.TEXT,Gt);(at.id?St.id!==at.id:St.index!==at.index)?(W[Gt].deleteCuesFromTrackIdx(jt),V[Gt].setCurrentFragmentedTrackIdx(xn)):jt===-1&&he.trigger(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Gt,mediaType:E.Z.TEXT})}}}(De,ct,mt):ct&&!ct.isFragmented&&function(Gt,Vt){he.trigger(T.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Vt},{streamId:Gt,mediaType:E.Z.TEXT})}(De,ct),ke.setTrack(ct)}}function Me(De){return W[De].getCurrentTrackIdx()}function ve(){V={},W={},j={},Ae=!0,ie=!1,_e=!1}return O={deactivateStream:function(De){if(De){var $e=De.id;V[$e]&&V[$e].resetMediaInfos(),W[$e]&&W[$e].deleteAllTextTracks()}},initialize:function(){ye=jl(Oe).create({adapter:Ze,baseURLController:Ie}),he.on(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,ue,O),he.on(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,O),he.on(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,O),q.get().streaming.text.webvtt.customRenderingEnabled&&(he.on(T.Z.PLAYBACK_TIME_UPDATED,te,O),he.on(T.Z.PLAYBACK_SEEKING,Pe,O))},initializeForStream:function(De){var $e=De.id,mt=Xs(Oe).create({videoModel:Ge,settings:q,streamInfo:De});mt.initialize(),W[$e]=mt;var ct=$f(Oe).create({errHandler:We,adapter:Ze,dvbFonts:ye,manifestModel:Se,mediaController:ke,videoModel:Ge,textTracks:mt,vttParser:ee,vttCustomRenderingParser:H,ttmlParser:re,streamInfo:De,settings:q});ct.initialize(),V[$e]=ct,j[$e]={},j[$e].lastEnabledIndex=-1},createTracks:function(De){var $e=De.id;W[$e]&&W[$e].createTracks()},getTextSourceBuffer:function(De){var $e=De.id;if(V&&V[$e])return V[$e]},getAllTracksAreDisabled:function(){return Ae},addEmbeddedTrack:function(De,$e){var mt=De.id;V[mt]&&V[mt].addEmbeddedTrack($e)},enableText:function(De,$e){return(0,ge.PS)($e,"boolean"),xe()!==$e&&($e&&je(De,j[De].lastEnabledIndex),$e||(j[De].lastEnabledIndex=Me(De),ie?je(De,-1):_e=!0)),!0},isTextEnabled:xe,setTextTrack:je,getCurrentTrackIdx:Me,enableForcedTextStreaming:function(De){return(0,ge.PS)(De,"boolean"),Te=De,!0},addMediaInfosToBuffer:function(De,$e,mt){var ct=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,yt=De.id;V[yt]&&V[yt].addMediaInfos($e,mt,ct)},reset:function(){ye.reset(),ve(),he.off(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,ue,O),he.off(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,O),he.off(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,O),q.get().streaming.text.webvtt.customRenderingEnabled&&(he.off(T.Z.PLAYBACK_TIME_UPDATED,te,O),he.off(T.Z.PLAYBACK_SEEKING,Pe,O)),Object.keys(V).forEach(function(De){V[De].resetEmbedded(),V[De].reset()})}},Te=!1,ie=!1,_e=!1,ee=Bi(Oe).getInstance(),H=zm(Oe).getInstance(),re=Wm(Oe).getInstance(),he=(0,m.Z)(Oe).getInstance(),ze=(0,M.Z)(Oe).getInstance().getLogger(O),ve(),O}Zr.__dashjs_factory_name="TextController";var np=U.Z.getClassFactory(Zr);function rp(){var k,O,j,V,W,ee,H,re,he,Ae,Te,ie,_e,ye,ze,Oe,Ze,We,Se,ke,Ie,Ge,q,le,ae,ue,te,Pe,xe,je,Me,ve,De,$e,mt,ct,yt,pt,Gt,Vt="You must first call initialize() and set a source before calling this method",jt="You must first call initialize() and set a valid source and view before calling this method",Zt="You must first call attachView() to set the video element before calling this method",xn="You must first call attachSource() with a valid source before calling this method",at="MediaPlayer not initialized!",St=this.context,Qt=(0,m.Z)(St).getInstance(),Pt=(0,qe.Z)(St).getInstance(),un=(0,M.Z)(St).getInstance({settings:Pt});function an(){Yn(null),Fn(null),V=null,ye&&(ye.reset(),ye=null),ze&&(ze.reset(),ze=null),ke&&ke.reset(),Pt.reset(),Ze&&(Ze.reset(),Ze=null)}function Jt(){return!!j&&!!ct.getElement()}function Bn(){return(0,Zf.e)()}function kn(){if(!H)throw jt;return Pe.isPaused()}function mr(){if(!H)throw jt;return Pe.getIsDynamic()}function vr(Ve){var tt=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Lt=ve.getCurrentDVRInfo(tt);if(!Lt)return 0;var yn=Pe.getOriginalLiveDelay(),Cn=Lt.range.start+Ve;return Cn>Lt.range.end-yn&&(Cn=Lt.range.end-yn),Cn}function bt(Ve){if(!H)throw jt;var tt=Zn().currentTime;if(Ve!==void 0)tt=ae.getTimeRelativeToStreamId(tt,Ve);else if(Pe.getIsDynamic()){var Lt=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,yn=ve.getCurrentDVRInfo(Lt);tt=yn===null||tt===0?0:Math.max(0,tt-yn.range.start)}return tt}function tn(){if(!H)throw jt;var Ve=Zn().duration;if(Pe.getIsDynamic()){var tt=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Lt=ve.getCurrentDVRInfo(tt);Ve=Lt?Lt.range.end-Lt.range.start:0}return Ve}function qt(Ve){(0,ge.PS)(Ve,"boolean"),re=Ve}function mn(){ke.restoreDefaultUTCTimingSources()}function bn(){return ve}function Zn(){if(!ct.getElement())throw Zt;return ct.getElement()}function Fn(Ve){if(!W)throw at;ct.setElement(Ve),Ve&&(Dn(),function(){if(!ze){var tt=dashjs.MetricsReporting;if(typeof tt=="function"){var Lt=tt(St).create();ze=Lt.createMetricsReporting({debug:un,eventBus:Qt,mediaElement:Zn(),adapter:We,dashMetrics:ve,mediaPlayerModel:Se,events:T.Z,constants:E.Z,metricsConstants:P.Z})}}}(),function(){if(!Oe){var tt=dashjs.MssHandler;typeof tt=="function"&&(we.extend(tt.errors),Oe=tt(St).create({eventBus:Qt,mediaPlayerModel:Se,dashMetrics:ve,manifestModel:De,playbackController:Pe,streamController:ae,protectionController:ye,baseURLController:Ge,errHandler:Ie,events:T.Z,constants:E.Z,debug:un,initSegmentType:st.w.INIT_SEGMENT_TYPE,BASE64:ua,ISOBoxer:Lr,settings:Pt}))}}(),ae&&ae.switchToVideoElement(he)),H&&Nn(),zt(he)}function qn(Ve){if(!ee)throw Vt;var tt=ae.getActiveStreamInfo();return tt?_e.getTracksFor(Ve,tt.id):[]}function Yn(Ve){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!W)throw at;typeof Ve=="string"&&yt.initialize(Ve),tt==null&&(tt=NaN),isNaN(tt)||(tt=Math.max(0,tt)),he=tt,j=Ve,(ee||H)&&Nn(),Jt()&&zt(he)}function en(){if(!ee)throw Vt;var Ve=ae.getActiveStreamInfo();return Ve?ae.getStreamById(Ve.id):null}function Nn(){H=!1,ee=!1,We.reset(),ae.reset(),te.reset(),Me.reset(),Pe.reset(),xe.reset(),je.reset(),Ae.reset(),_e.reset(),Gt.reset(),ye&&(Pt.get().streaming.protection.keepProtectionMediaKeys?ye.stop():(ye.reset(),ye=null,Dn())),ue.reset(),$e.reset(),mt.reset()}function Pn(){var Ve=On();ae||(ae=bh(St).getInstance()),ue||(ue=np(St).create({errHandler:Ie,manifestModel:De,adapter:We,mediaController:_e,baseURLController:Ge,videoModel:ct,settings:Pt})),le.setConfig({capabilities:q,customParametersModel:ke,adapter:We,settings:Pt,manifestModel:De,errHandler:Ie}),ae.setConfig({capabilities:q,capabilitiesFilter:le,manifestLoader:Ve,manifestModel:De,mediaPlayerModel:Se,customParametersModel:ke,protectionController:ye,textController:ue,adapter:We,dashMetrics:ve,errHandler:Ie,timelineConverter:ie,videoModel:ct,playbackController:Pe,serviceDescriptionController:xe,contentSteeringController:je,abrController:Ae,mediaController:_e,settings:Pt,baseURLController:Ge,uriFragmentModel:yt,segmentBaseController:Gt}),te.setConfig({settings:Pt,playbackController:Pe,streamController:ae,videoModel:ct,timelineConverter:ie,adapter:We}),Pe.setConfig({streamController:ae,serviceDescriptionController:xe,dashMetrics:ve,adapter:We,videoModel:ct,timelineConverter:ie,settings:Pt}),Me.setConfig({streamController:ae,playbackController:Pe,mediaPlayerModel:Se,videoModel:ct,settings:Pt}),Ae.setConfig({streamController:ae,domStorage:pt,mediaPlayerModel:Se,customParametersModel:ke,cmsdModel:mt,dashMetrics:ve,adapter:We,videoModel:ct,settings:Pt}),$e.setConfig({abrController:Ae,dashMetrics:ve,playbackController:Pe}),mt.setConfig({}),Ae.initialize(),ae.initialize(re,V),ue.initialize(),te.initialize(),Me.initialize(),$e.initialize(),mt.initialize(),je.initialize(),Gt.initialize()}function On(){return LE(St).create({debug:un,errHandler:Ie,dashMetrics:ve,mediaPlayerModel:Se,requestModifier:(0,Ke.Z)(St).getInstance(),mssHandler:Oe,settings:Pt})}function Dn(){if(ye)return ye;var Ve=dashjs.Protection;if(typeof Ve=="function"){var tt=Ve(St).create();return T.Z.extend(Ve.events),_.Z.extend(Ve.events,{publicOnly:!0}),we.extend(Ve.errors),q||(q=(0,wm.Z)(St).getInstance()),ye=tt.createProtectionSystem({debug:un,errHandler:Ie,videoModel:ct,customParametersModel:ke,capabilities:q,eventBus:Qt,events:T.Z,BASE64:ua,constants:E.Z,cmcdModel:$e,settings:Pt})}return null}function Ct(){if(!W)throw at;if(Ze)return Ze;var Ve=dashjs.OfflineController;if(typeof Ve=="function"){T.Z.extend(Ve.events),_.Z.extend(Ve.events,{publicOnly:!0}),we.extend(Ve.errors);var tt=On(),Lt=Ka(St).create();return Lt.setConfig({manifestModel:De,adapter:We,manifestLoader:tt,errHandler:Ie,contentSteeringController:je}),Ze=Ve(St).create({debug:un,manifestUpdater:Lt,baseURLController:Ge,manifestLoader:tt,manifestModel:De,mediaPlayerModel:Se,abrController:Ae,playbackController:Pe,adapter:We,errHandler:Ie,dashMetrics:ve,timelineConverter:ie,segmentBaseController:Gt,schemeLoaderFactory:Te,eventBus:Qt,events:T.Z,errors:we,constants:E.Z,settings:Pt,dashConstants:y.Z,urlUtils:(0,wt.Z)(St).getInstance()})}return null}function et(Ve){var tt=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Lt=ve.getCurrentDVRInfo(tt);return Lt?Ve+(Lt.manifestInfo.availableFrom.getTime()/1e3+Lt.range.start):0}function zt(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Ze&&Ze.resetRecords(),!ee&&j&&(ee=!0,O.info("Streaming Initialized"),Pn(),typeof j=="string"?ae.load(j,Ve):ae.loadWithManifest(j,Ve)),!H&&Jt()&&(H=!0,O.info("Playback Initialized"))}return k={initialize:function(Ve,tt,Lt){var yn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;q||(q=(0,wm.Z)(St).getInstance()).setConfig({settings:Pt}),Ie||(Ie=Sm(St).getInstance()),q.supportsMediaSource()?(W||(W=!0,ie=qm(St).getInstance(),Ae||(Ae=BE(St).getInstance()).setConfig({settings:Pt}),Te||(Te=ci(St).getInstance()),Pe||(Pe=x(St).getInstance()),_e||(_e=Af(St).getInstance()),ae||(ae=bh(St).getInstance()),te||(te=fm(St).getInstance()),Me||(Me=xh(St).getInstance()),xe||(xe=Tf(St).getInstance()),je||(je=Vi(St).getInstance()),le||(le=kE(St).getInstance()),We=Wf(St).getInstance(),De=Ic(St).getInstance(),$e=ur(St).getInstance(),mt=sn(St).getInstance(),ve=Nc(St).getInstance({settings:Pt}),pt=kl(St).getInstance({settings:Pt}),We.setConfig({constants:E.Z,cea608parser:C(),errHandler:Ie,BASE64:ua}),Ge||(Ge=Ph(St).create()),Ge.setConfig({adapter:We,contentSteeringController:je}),xe.setConfig({adapter:We}),Gt||(Gt=Pm(St).getInstance({dashMetrics:ve,mediaPlayerModel:Se,errHandler:Ie,baseURLController:Ge,events:T.Z,eventBus:Qt,debug:un,boxParser:(0,Hu.Z)(St).getInstance(),requestModifier:(0,Ke.Z)(St).getInstance(),errors:we})),_e.setConfig({domStorage:pt,settings:Pt,customParametersModel:ke}),Se.setConfig({playbackController:Pe,serviceDescriptionController:xe}),je.setConfig({adapter:We,errHandler:Ie,dashMetrics:ve,mediaPlayerModel:Se,manifestModel:De,serviceDescriptionController:xe,eventBus:Qt,requestModifier:(0,Ke.Z)(St).getInstance()}),mn(),qt(Lt===void 0||Lt),Ct()),Ve&&Fn(Ve),tt&&Yn(tt,yn),O.info("[dash.js "+Bn()+"] MediaPlayer has been initialized")):Ie.error(new ce.Z(we.CAPABILITY_MEDIASOURCE_ERROR_CODE,we.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(Ve){Ve&&(Ve.capabilities&&(q=Ve.capabilities),Ve.capabilitiesFilter&&(le=Ve.capabilitiesFilter),Ve.streamController&&(ae=Ve.streamController),Ve.textController&&(ue=Ve.textController),Ve.gapController&&(te=Ve.gapController),Ve.playbackController&&(Pe=Ve.playbackController),Ve.serviceDescriptionController&&(xe=Ve.serviceDescriptionController),Ve.contentSteeringController&&(je=Ve.contentSteeringController),Ve.catchupController&&(Me=Ve.catchupController),Ve.mediaPlayerModel&&(Se=Ve.mediaPlayerModel),Ve.customParametersModel&&(ke=Ve.customParametersModel),Ve.abrController&&(Ae=Ve.abrController),Ve.schemeLoaderFactory&&(Te=Ve.schemeLoaderFactory),Ve.mediaController&&(_e=Ve.mediaController),Ve.settings&&(Pt=Ve.settings))},on:function(Ve,tt,Lt,yn){Qt.on(Ve,tt,Lt,yn)},off:function(Ve,tt,Lt){Qt.off(Ve,tt,Lt)},extend:function(Ve,tt,Lt){U.Z.extend(Ve,tt,Lt,St)},attachView:Fn,attachSource:Yn,refreshManifest:function(Ve){if(!W)throw at;if(!Jt())return Ve(null,xn);var tt=this;typeof Ve=="function"&&Qt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Lt(yn){Qt.off(T.Z.INTERNAL_MANIFEST_LOADED,Lt,tt),yn.error?Ve(null,yn.error):Ve(yn.manifest)},tt),ae.refreshManifest()},isReady:Jt,preload:function(){if(!ct.getElement()&&!ee){if(!j)throw xn;zt(he)}},play:function(){if(!H)throw jt;(!re||kn()&&H)&&Pe.play(!0)},isPaused:kn,pause:function(){if(!H)throw jt;Pe.pause()},isSeeking:function(){if(!H)throw jt;return Pe.isSeeking()},isDynamic:mr,getLowLatencyModeEnabled:function(){if(!H)throw jt;return Pe.getLowLatencyModeEnabled()},seek:function(Ve){if(!H)throw jt;if((0,ge.PS)(Ve,"number"),isNaN(Ve))throw E.Z.BAD_ARGUMENT_ERROR;Ve<0&&(Ve=0);var tt=Pe.getIsDynamic()?vr(Ve):Ve,Lt=Zn();!Pe.getIsDynamic()&&Lt.duration&&(tt=Math.min(Lt.duration,tt)),Pe.seek(tt,!1,!1,!0)},seekToOriginalLive:function(){H&&mr()&&Pe.seekToOriginalLive()},setPlaybackRate:function(Ve){Zn().playbackRate=Ve},getPlaybackRate:function(){return Zn().playbackRate},setMute:function(Ve){(0,ge.PS)(Ve,"boolean"),Zn().muted=Ve},isMuted:function(){return Zn().muted},setVolume:function(Ve){if(typeof Ve!="number"||isNaN(Ve)||Ve<0||Ve>1)throw E.Z.BAD_ARGUMENT_ERROR;Zn().volume=Ve},getVolume:function(){return Zn().volume},time:bt,duration:tn,timeAsUTC:function(){if(!H)throw jt;return bt()<0?NaN:et(bt())},durationAsUTC:function(){if(!H)throw jt;return et(tn())},getActiveStream:en,getDVRWindowSize:function(){var Ve=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,tt=ve.getCurrentDVRInfo(Ve);return tt?tt.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:vr,getAvailableBaseUrls:function(){var Ve=De.getValue();return Ve?Ge.getBaseUrls(Ve):[]},getAvailableLocations:function(){var Ve=De.getValue();if(!Ve)return[];var tt=We.getLocation(Ve),Lt=je.getSynthesizedLocationElements(tt);return tt.concat(Lt)},getTargetLiveDelay:function(){if(!H)throw jt;return Pe.getOriginalLiveDelay()},convertToTimeCode:function(Ve){Ve=Math.max(Ve,0);var tt=Math.floor(Ve/3600),Lt=Math.floor(Ve%3600/60),yn=Math.floor(Ve%3600%60);return(tt===0?"":tt<10?"0"+tt.toString()+":":tt.toString()+":")+(Lt<10?"0"+Lt.toString():Lt.toString())+":"+(yn<10?"0"+yn.toString():yn.toString())},formatUTC:function(Ve,tt,Lt){var yn=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Cn=new Date(1e3*Ve),yr=Cn.toLocaleDateString(tt),oi=Cn.toLocaleTimeString(tt,{hour12:Lt});return yn?oi+" "+yr:oi},getVersion:Bn,getDebug:function(){return un},getBufferLength:function(Ve){var tt=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT];if(Ve)return tt.indexOf(Ve)!==-1?bn().getCurrentBufferLevel(Ve)||NaN:(O.warn("getBufferLength requested for invalid type"),NaN);var Lt=tt.map(function(yn){return qn(yn).length>0?bn().getCurrentBufferLevel(yn):Number.MAX_VALUE}).reduce(function(yn,Cn){return Math.min(yn,Cn)});return Lt===Number.MAX_VALUE?NaN:Lt},getTTMLRenderingDiv:function(){return ct?ct.getTTMLRenderingDiv():null},getVideoElement:Zn,getSource:function(){if(!j)throw xn;return j},updateSource:function(Ve){j=Ve,ae.load(j)},getCurrentLiveLatency:function(){if(!W)throw at;return H?Pe.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(Ve){if(!ee)throw Vt;return Ae.getTopBitrateInfoFor(Ve)},setAutoPlay:qt,getAutoPlay:function(){return re},getDashMetrics:bn,getQualityFor:function(Ve){if(!ee)throw Vt;if(Ve===E.Z.IMAGE){var tt=en();if(!tt)return-1;var Lt=tt.getThumbnailController();return Lt?Lt.getCurrentTrackIndex():-1}return Ae.getQualityFor(Ve)},setQualityFor:function(Ve,tt){var Lt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!ee)throw Vt;if(Ve===E.Z.IMAGE){var yn=en();if(!yn)return;var Cn=yn.getThumbnailController();Cn&&Cn.setTrackByIndex(tt)}Ae.setPlaybackQuality(Ve,ae.getActiveStreamInfo(),tt,{forceReplace:Lt})},updatePortalSize:function(){Ae.setElementSize(),Ae.setWindowResizeEventCalled(!0)},enableText:function(Ve){var tt=ae.getActiveStreamInfo();return!(!tt||!ue)&&ue.enableText(tt.id,Ve)},enableForcedTextStreaming:function(Ve){return!(!ae.getActiveStreamInfo()||!ue)&&ue.enableForcedTextStreaming(Ve)},isTextEnabled:function(){var Ve=ae.getActiveStreamInfo();return!(!Ve||!ue)&&ue.isTextEnabled(Ve)},setTextTrack:function(Ve){if(!H)throw jt;var tt=ae.getActiveStreamInfo();tt&&ue&&ue.setTextTrack(tt.id,Ve)},getBitrateInfoListFor:function(Ve){if(!ee)throw Vt;var tt=en();return tt?tt.getBitrateListFor(Ve):[]},getStreamsFromManifest:function(Ve){if(!ee)throw Vt;return We.getStreamsInfo(Ve)},getTracksFor:qn,getTracksForTypeFromManifest:function(Ve,tt,Lt){if(!ee)throw Vt;return(Lt=Lt||We.getStreamsInfo(tt,1)[0])?We.getAllMediaInfoForType(Lt,Ve,tt):[]},getCurrentTrackFor:function(Ve){if(!ee)throw Vt;var tt=ae.getActiveStreamInfo();return _e.getCurrentTrackFor(Ve,tt.id)},setInitialMediaSettingsFor:function(Ve,tt){if(!W)throw at;_e.setInitialSettings(Ve,tt)},getInitialMediaSettingsFor:function(Ve){if(!W)throw at;return _e.getInitialSettings(Ve)},setCurrentTrack:function(Ve){var tt=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!ee)throw Vt;_e.setTrack(Ve,tt)},addABRCustomRule:function(Ve,tt,Lt){ke.addAbrCustomRule(Ve,tt,Lt)},removeABRCustomRule:function(Ve){ke.removeAbrCustomRule(Ve)},removeAllABRCustomRule:function(){ke.removeAllAbrCustomRule()},getABRCustomRules:function(){return ke.getAbrCustomRules()},getAverageThroughput:function(Ve){var tt=Ae.getThroughputHistory(),Lt=Pe.getIsDynamic();return tt?tt.getAverageThroughput(Ve,Lt):0},retrieveManifest:function(Ve,tt){var Lt=On(),yn=this;Qt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Cn(yr){yr.error?tt(null,yr.error):tt(yr.manifest),Qt.off(T.Z.INTERNAL_MANIFEST_LOADED,Cn,yn),Lt.reset()},yn),yt.initialize(Ve),Lt.load(Ve)},addUTCTimingSource:function(Ve,tt){ke.addUTCTimingSource(Ve,tt)},removeUTCTimingSource:function(Ve,tt){ke.removeUTCTimingSource(Ve,tt)},clearDefaultUTCTimingSources:function(){ke.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:mn,setXHRWithCredentialsForType:function(Ve,tt){ke.setXHRWithCredentialsForType(Ve,tt)},getXHRWithCredentialsForType:function(Ve){return ke.getXHRWithCredentialsForType(Ve)},getProtectionController:function(){return Dn()},attachProtectionController:function(Ve){ye=Ve},setProtectionData:function(Ve){V=Ve,ae&&ae.setProtectionData(V)},registerLicenseRequestFilter:function(Ve){ke.registerLicenseRequestFilter(Ve)},registerLicenseResponseFilter:function(Ve){ke.registerLicenseResponseFilter(Ve)},unregisterLicenseRequestFilter:function(Ve){ke.unregisterLicenseRequestFilter(Ve)},unregisterLicenseResponseFilter:function(Ve){ke.unregisterLicenseResponseFilter(Ve)},registerCustomCapabilitiesFilter:function(Ve){ke.registerCustomCapabilitiesFilter(Ve)},unregisterCustomCapabilitiesFilter:function(Ve){ke.unregisterCustomCapabilitiesFilter(Ve)},setCustomInitialTrackSelectionFunction:function(Ve){ke.setCustomInitialTrackSelectionFunction(Ve)},resetCustomInitialTrackSelectionFunction:function(){ke.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(Ve){if(!ct.getElement())throw Zt;ct.setTTMLRenderingDiv(Ve)},attachVttRenderingDiv:function(Ve){if(!ct.getElement())throw Zt;ct.setVttRenderingDiv(Ve)},getCurrentTextTrackIndex:function(){var Ve=ae.getActiveStreamInfo();if(Ve&&ue)return ue.getCurrentTrackIdx(Ve.id)},provideThumbnail:function(Ve,tt){if(typeof tt=="function")if(Ve<0)tt(null);else{var Lt=Pe.getIsDynamic()?vr(Ve):Ve,yn=ae.getStreamForTime(Lt);if(yn!==null){var Cn=yn.getThumbnailController();if(Cn)return Cn.provide(Lt,tt);tt(null)}else tt(null)}},getDashAdapter:function(){return We},getOfflineController:function(){return Ct()},triggerSteeringRequest:function(){if(je)return je.loadSteeringData()},getCurrentSteeringResponseData:function(){if(je)return je.getCurrentSteeringResponseData()},getSettings:function(){return Pt.get()},updateSettings:function(Ve){Pt.update(Ve)},resetSettings:function(){Pt.reset()},reset:an,destroy:function(){an(),U.Z.deleteSingletonInstances(St)}},O=un.getLogger(k),W=!1,H=!1,ee=!1,re=!0,he=NaN,ye=null,Ze=null,V=null,We=null,Gt=null,T.Z.extend(_.Z),Se=el(St).getInstance(),ke=(0,Ai.Z)(St).getInstance(),ct=jE(St).getInstance(),yt=Ra(St).getInstance(),k}rp.__dashjs_factory_name="MediaPlayer";var bu=U.Z.getClassFactory(rp);bu.events=_.Z,bu.errors=we,U.Z.updateClassFactory(rp.__dashjs_factory_name,bu);var ip=bu},8825:function(b,p,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function C(m,T){return C=Object.setPrototypeOf||function(U,M){return U.__proto__=M,U},C(m,T)}function E(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function y(m){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},y(m)}var P=new(function(m){(function(I,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(x&&x.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),x&&C(I,x)})(_,m);var T,U,M=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,x=y(T);if(U){var Z=y(this).constructor;I=Reflect.construct(x,arguments,Z)}else I=x.apply(this,arguments);return E(this,I)});function _(){var I;return function(x,Z){if(!(x instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(I=M.call(this)).AST_IN_FUTURE="astInFuture",I.BASE_URLS_UPDATED="baseUrlsUpdated",I.BUFFER_EMPTY="bufferStalled",I.BUFFER_LOADED="bufferLoaded",I.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",I.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",I.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",I.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",I.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",I.DYNAMIC_TO_STATIC="dynamicToStatic",I.ERROR="error",I.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",I.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",I.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",I.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",I.LOG="log",I.MANIFEST_LOADING_STARTED="manifestLoadingStarted",I.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",I.MANIFEST_LOADED="manifestLoaded",I.METRICS_CHANGED="metricsChanged",I.METRIC_CHANGED="metricChanged",I.METRIC_ADDED="metricAdded",I.METRIC_UPDATED="metricUpdated",I.PERIOD_SWITCH_STARTED="periodSwitchStarted",I.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",I.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",I.QUALITY_CHANGE_RENDERED="qualityChangeRendered",I.TRACK_CHANGE_RENDERED="trackChangeRendered",I.STREAM_INITIALIZING="streamInitializing",I.STREAM_UPDATED="streamUpdated",I.STREAM_ACTIVATED="streamActivated",I.STREAM_DEACTIVATED="streamDeactivated",I.STREAM_INITIALIZED="streamInitialized",I.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",I.TEXT_TRACKS_ADDED="allTextTracksAdded",I.TEXT_TRACK_ADDED="textTrackAdded",I.CUE_ENTER="cueEnter",I.CUE_EXIT="cueExit",I.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",I.TTML_PARSED="ttmlParsed",I.TTML_TO_PARSE="ttmlToParse",I.CAPTION_RENDERED="captionRendered",I.CAPTION_CONTAINER_RESIZE="captionContainerResize",I.CAN_PLAY="canPlay",I.CAN_PLAY_THROUGH="canPlayThrough",I.PLAYBACK_ENDED="playbackEnded",I.PLAYBACK_ERROR="playbackError",I.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",I.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",I.PLAYBACK_LOADED_DATA="playbackLoadedData",I.PLAYBACK_PAUSED="playbackPaused",I.PLAYBACK_PLAYING="playbackPlaying",I.PLAYBACK_PROGRESS="playbackProgress",I.PLAYBACK_RATE_CHANGED="playbackRateChanged",I.PLAYBACK_SEEKED="playbackSeeked",I.PLAYBACK_SEEKING="playbackSeeking",I.PLAYBACK_STALLED="playbackStalled",I.PLAYBACK_STARTED="playbackStarted",I.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",I.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",I.PLAYBACK_WAITING="playbackWaiting",I.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",I.EVENT_MODE_ON_START="eventModeOnStart",I.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",I.CONFORMANCE_VIOLATION="conformanceViolation",I.REPRESENTATION_SWITCH="representationSwitch",I.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",I.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",I.INBAND_PRFT="inbandPrft",I.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",I.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",I}return _}(w(8342).Z));p.Z=P},3393:function(b,p){function w(C,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}var F=new(function(){function C(){(function(P,m){if(!(P instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var E,y;return E=C,(y=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&w(E.prototype,y),C}());p.Z=F},3860:function(b,p){function w(C,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}var F=new(function(){function C(){(function(P,m){if(!(P instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var E,y;return E=C,(y=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&w(E.prototype,y),C}());p.Z=F},8080:function(b,p,w){w.d(p,{default:function(){return G}});var F=function K(){(function(ge,de){if(!(ge instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};F.SSL_CONNECTION_FAILED_PREFIX="SSL",F.DNS_RESOLUTION_FAILED="C00",F.HOST_UNREACHABLE="C01",F.CONNECTION_REFUSED="C02",F.CONNECTION_ERROR="C03",F.CORRUPT_MEDIA_ISOBMFF="M00",F.CORRUPT_MEDIA_OTHER="M01",F.BASE_URL_CHANGED="F00",F.BECAME_REPORTER="S00";var C=F,E=w(1180);function y(K){var ge,de,Ke=(K=K||{}).eventBus,wt=K.dashMetrics,lt=K.metricsConstants,ut=K.events;function nt(rn){var cn=new C;if(de){for(var Ft in rn)rn.hasOwnProperty(Ft)&&(cn[Ft]=rn[Ft]);cn.mpdurl||(cn.mpdurl=de.originalUrl||de.url),cn.terror||(cn.terror=new Date),wt.addDVBErrors(cn)}}function ht(rn){rn.error||(de=rn.manifest)}function _t(rn){nt({errorcode:C.BASE_URL_CHANGED,servicelocation:rn.entry})}function Tt(){nt({errorcode:C.BECAME_REPORTER})}function Mt(rn){var cn;rn.metric===lt.HTTP_REQUEST&&((cn=rn.value).responsecode===0||cn.responsecode==null||cn.responsecode>=400||cn.responsecode<100||cn.responsecode>=600)&&nt({errorcode:cn.responsecode||C.CONNECTION_ERROR,url:cn.url,terror:cn.tresponse,servicelocation:cn._serviceLocation})}function _n(rn){var cn;switch(rn.error?rn.error.code:0){case MediaError.MEDIA_ERR_NETWORK:cn=C.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:cn=C.CORRUPT_MEDIA_OTHER;break;default:return}nt({errorcode:cn})}return ge={initialize:function(){Ke.on(ut.MANIFEST_UPDATED,ht,ge),Ke.on(ut.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,_t,ge),Ke.on(ut.METRIC_ADDED,Mt,ge),Ke.on(ut.METRIC_UPDATED,Mt,ge),Ke.on(ut.PLAYBACK_ERROR,_n,ge),Ke.on(E.Z.BECAME_REPORTING_PLAYER,Tt,ge)},reset:function(){Ke.off(ut.MANIFEST_UPDATED,ht,ge),Ke.off(ut.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,_t,ge),Ke.off(ut.METRIC_ADDED,Mt,ge),Ke.off(ut.METRIC_UPDATED,Mt,ge),Ke.off(ut.PLAYBACK_ERROR,_n,ge),Ke.off(E.Z.BECAME_REPORTING_PLAYER,Tt,ge)}}}y.__dashjs_factory_name="DVBErrorsTranslator";var P=dashjs.FactoryMaker.getSingletonFactory(y),m=w(2295);function T(K){K=K||{};var ge,de,Ke=!1,wt=this.context,lt=K.mediaElement;return ge={initialize:function(ut){ut&&ut.length&&(ut.forEach(function(nt){var ht=nt.starttime,_t=ht+nt.duration;de.add(ht,_t)}),Ke=!!ut[0]._useWallClockTime)},reset:function(){de.clear()},isEnabled:function(){var ut,nt=de.length;if(!nt)return!0;ut=Ke?new Date().getTime()/1e3:lt.currentTime;for(var ht=0;ht<nt;ht+=1){var _t=de.start(ht),Tt=de.end(ht);if(_t<=ut&&ut<Tt)return!0}return!1}},de=(0,m.Z)(wt).create(),ge}T.__dashjs_factory_name="RangeController";var U=dashjs.FactoryMaker.getClassFactory(T);function M(){return{serialise:function K(ge){var de,Ke,wt=[],lt=[];for(de in ge)if(ge.hasOwnProperty(de)&&de.indexOf("_")!==0){if((Ke=ge[de])==null&&(Ke=""),Array.isArray(Ke)){if(!Ke.length)continue;lt=[],Ke.forEach(function(ut){var nt=Object.prototype.toString.call(ut).slice(8,-1)!=="Object";lt.push(nt?ut:K(ut))}),Ke=lt.map(encodeURIComponent).join(",")}else typeof Ke=="string"?Ke=encodeURIComponent(Ke):Ke instanceof Date?Ke=Ke.toISOString():typeof Ke=="number"&&(Ke=Math.round(Ke));wt.push(de+"="+Ke)}return wt.join("&")}}}M.__dashjs_factory_name="MetricSerialiser";var _=dashjs.FactoryMaker.getSingletonFactory(M);function I(){var K,ge,de,Ke=window.crypto||window.msCrypto,wt=Uint32Array,lt=Math.pow(2,8*wt.BYTES_PER_ELEMENT)-1;function ut(){Ke&&(K||(K=new wt(10)),Ke.getRandomValues(K),ge=0)}return de={random:function(nt,ht){var _t;return nt||(nt=0),ht||(ht=1),Ke?(ge===K.length&&ut(),_t=K[ge]/lt,ge+=1):_t=Math.random(),_t*(ht-nt)+nt}},ut(),de}I.__dashjs_factory_name="RNG";var x=dashjs.FactoryMaker.getSingletonFactory(I),Z=w(5717);function Y(K){var ge;K=K||{};var de,Ke,wt,lt,ut,nt,ht,_t=this.context,Tt=[],Mt=K.metricsConstants;function _n(){lt=!1,ut=!1,nt=null,ht=null}return ge={report:function(rn,cn){Array.isArray(cn)||(cn=[cn]),ut&&ht.isEnabled()&&cn.forEach(function(Ft){var Gn=de.serialise(Ft);rn!==Mt.DVB_ERRORS&&(Gn="metricname=".concat(rn,"&").concat(Gn)),function(Sr,Gr,gr){var fi=new XMLHttpRequest;fi.withCredentials=Ke.getXHRWithCredentialsForType(Mt.HTTP_REQUEST_DVB_REPORTING_TYPE);var ao=function(){var Hr=Tt.indexOf(fi);Hr!==-1&&(Tt.splice(Hr,1),!(fi.status>=200&&fi.status<300)&&gr&&gr())};Tt.push(fi);try{fi.open("GET",Sr),fi.onloadend=ao,fi.onerror=ao,fi.send()}catch(Hr){fi.onerror()}}(Gn="".concat(nt,"?").concat(Gn),0,function(){ut=!1})})},initialize:function(rn,cn){var Ft;if(ht=cn,!(nt=rn.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");lt||((Ft=rn.dvbProbability)&&(Ft===1e3||Ft/1e3>=wt.random())&&(ut=!0),lt=!0)},reset:function(){_n()}},de=_(_t).getInstance(),wt=x(_t).getInstance(),Ke=(0,Z.Z)(_t).getInstance(),_n(),ge}Y.__dashjs_factory_name="DVBReporting";var $=dashjs.FactoryMaker.getClassFactory(Y);function Q(K){K=K||{};var ge,de={"urn:dvb:dash:reporting:2014":$},Ke=this.context,wt=K.debug?K.debug.getLogger(ge):{},lt=K.metricsConstants,ut=K.mediaPlayerModel||{};return{create:function(nt,ht){var _t;try{(_t=de[nt.schemeIdUri](Ke).create({metricsConstants:lt,mediaPlayerModel:ut})).initialize(nt,ht)}catch(Tt){_t=null,wt.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(nt.schemeIdUri," (").concat(Tt.message,")"))}return _t},register:function(nt,ht){de[nt]=ht},unregister:function(nt){delete de[nt]}}}Q.__dashjs_factory_name="ReportingFactory";var se=dashjs.FactoryMaker.getSingletonFactory(Q);function R(K){var ge=[],de=se(this.context).getInstance(K);return{initialize:function(Ke,wt){Ke.some(function(lt){var ut=de.create(lt,wt);if(ut)return ge.push(ut),!0})},reset:function(){ge.forEach(function(Ke){return Ke.reset()}),ge=[]},report:function(Ke,wt){ge.forEach(function(lt){return lt.report(Ke,wt)})}}}R.__dashjs_factory_name="ReportingController";var X=dashjs.FactoryMaker.getClassFactory(R);function ce(){return{reconstructFullMetricName:function(K,ge,de){var Ke=K;return ge&&(Ke+="("+ge,de&&de.length&&(Ke+=","+de),Ke+=")"),Ke},validateN:function(K){if(!K)throw new Error("missing n");if(isNaN(K))throw new Error("n is NaN");if(K<0)throw new Error("n must be positive");return K}}}ce.__dashjs_factory_name="HandlerHelpers";var oe=dashjs.FactoryMaker.getSingletonFactory(ce);function me(K){var ge,de,Ke,wt,lt;K=K||{};var ut=this.context,nt=oe(ut).getInstance(),ht=[],_t=K.metricsConstants;function Tt(){var Mt=function(){try{return Object.keys(ht).map(function(_n){return ht[_n]}).reduce(function(_n,rn){return _n.level<rn.level?_n:rn})}catch(_n){return}}();Mt&&lt!==Mt.t&&(lt=Mt.t,ge.report(Ke,Mt))}return{initialize:function(Mt,_n,rn){_n&&(de=nt.validateN(rn),ge=_n,Ke=nt.reconstructFullMetricName(Mt,rn),wt=setInterval(Tt,de))},reset:function(){clearInterval(wt),wt=null,de=0,ge=null,lt=null},handleNewMetric:function(Mt,_n,rn){Mt===_t.BUFFER_LEVEL&&(ht[rn]=_n)}}}me.__dashjs_factory_name="BufferLevelHandler";var Ce=dashjs.FactoryMaker.getClassFactory(me),Je=dashjs.FactoryMaker.getClassFactory(function(K){var ge,de=(K=K||{}).eventBus,Ke=K.metricsConstants;function wt(){de.off(E.Z.METRICS_INITIALISATION_COMPLETE,wt,this),de.trigger(E.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(lt,ut){ut&&(ge=ut,de.on(E.Z.METRICS_INITIALISATION_COMPLETE,wt,this))},reset:function(){ge=null},handleNewMetric:function(lt,ut){lt===Ke.DVB_ERRORS&&ge&&ge.report(lt,ut)}}});function we(K){var ge,de,Ke,wt,lt;K=K||{};var ut=[],nt=oe(this.context).getInstance(),ht=K.metricsConstants;function _t(){var Tt=ut;Tt.length&&ge&&ge.report(wt,Tt),ut=[]}return{initialize:function(Tt,Mt,_n,rn){Mt&&(de=nt.validateN(_n),ge=Mt,rn&&rn.length&&(Ke=rn),wt=nt.reconstructFullMetricName(Tt,_n,rn),lt=setInterval(_t,de))},reset:function(){clearInterval(lt),lt=null,de=null,Ke=null,ut=[],ge=null},handleNewMetric:function(Tt,Mt){Tt===ht.HTTP_REQUEST&&(Ke&&Ke!==Mt.type||ut.push(Mt))}}}we.__dashjs_factory_name="HttpListHandler";var qe=dashjs.FactoryMaker.getClassFactory(we);function st(){var K,ge;return{initialize:function(de,Ke){K=de,ge=Ke},reset:function(){ge=null,K=void 0},handleNewMetric:function(de,Ke){de===K&&ge&&ge.report(K,Ke)}}}st.__dashjs_factory_name="GenericMetricHandler";var ft=dashjs.FactoryMaker.getClassFactory(st);function be(K){var ge,de=(K=K||{}).debug?K.debug.getLogger(ge):{},Ke=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,wt=this.context,lt={BufferLevel:Ce,DVBErrors:Je,HttpList:qe,PlayList:ft,RepSwitchList:ft,TcpList:ft};return{create:function(ut,nt){var ht,_t=ut.match(Ke);if(_t){try{(ht=lt[_t[1]](wt).create({eventBus:K.eventBus,metricsConstants:K.metricsConstants})).initialize(_t[1],nt,_t[3],_t[5])}catch(Tt){ht=null,de.error("MetricsHandlerFactory: Could not create handler for type ".concat(_t[1]," with args ").concat(_t[3],", ").concat(_t[5]," (").concat(Tt.message,")"))}return ht}},register:function(ut,nt){lt[ut]=nt},unregister:function(ut){delete lt[ut]}}}be.__dashjs_factory_name="MetricsHandlerFactory";var He=dashjs.FactoryMaker.getSingletonFactory(be);function vt(K){K=K||{};var ge,de=[],Ke=this.context,wt=K.eventBus,lt=K.events,ut=He(Ke).getInstance({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants});function nt(ht){de.forEach(function(_t){_t.handleNewMetric(ht.metric,ht.value,ht.mediaType)})}return ge={initialize:function(ht,_t){ht.split(",").forEach(function(Tt,Mt,_n){var rn;if(Tt.indexOf("(")!==-1&&Tt.indexOf(")")===-1){var cn=_n[Mt+1];cn&&cn.indexOf("(")===-1&&cn.indexOf(")")!==-1&&(Tt+=","+cn,delete _n[Mt+1])}(rn=ut.create(Tt,_t))&&de.push(rn)}),wt.on(lt.METRIC_ADDED,nt,ge),wt.on(lt.METRIC_UPDATED,nt,ge)},reset:function(){wt.off(lt.METRIC_ADDED,nt,ge),wt.off(lt.METRIC_UPDATED,nt,ge),de.forEach(function(ht){return ht.reset()}),de=[]}}}vt.__dashjs_factory_name="MetricsHandlersController";var Re=dashjs.FactoryMaker.getClassFactory(vt);function Ye(K){var ge,de,Ke;K=K||{};var wt=this.context;function lt(){ge&&ge.reset(),de&&de.reset(),Ke&&Ke.reset()}return{initialize:function(ut){try{(Ke=U(wt).create({mediaElement:K.mediaElement})).initialize(ut.Range),(de=X(wt).create({debug:K.debug,metricsConstants:K.metricsConstants,mediaPlayerModel:K.mediaPlayerModel})).initialize(ut.Reporting,Ke),(ge=Re(wt).create({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants,events:K.events})).initialize(ut.metrics,de)}catch(nt){throw lt(),nt}},reset:lt}}Ye.__dashjs_factory_name="MetricsController";var ot=dashjs.FactoryMaker.getClassFactory(Ye),Ht=function K(){(function(ge,de){if(!(ge instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.metrics="",this.Range=[],this.Reporting=[]},Bt=function K(){(function(ge,de){if(!(ge instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},Et=function K(){(function(ge,de){if(!(ge instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function Dt(K){var ge=(K=K||{}).adapter,de=K.constants;return{getMetrics:function(Ke){var wt=[];return Ke&&Ke.Metrics_asArray&&Ke.Metrics_asArray.forEach(function(lt){var ut=new Ht,nt=ge.getIsDynamic(Ke);lt.hasOwnProperty("metrics")&&(ut.metrics=lt.metrics,lt.Range_asArray&&lt.Range_asArray.forEach(function(ht){var _t=new Bt;_t.starttime=function(Tt,Mt,_n){var rn,cn,Ft=0;return Mt?Ft=ge.getAvailabilityStartTime(Tt)/1e3:(rn=ge.getRegularPeriods(Tt)).length&&(Ft=rn[0].start),cn=Ft,_n&&_n.hasOwnProperty(de.START_TIME)&&(cn+=_n.starttime),cn}(Ke,nt,ht),ht.hasOwnProperty("duration")?_t.duration=ht.duration:_t.duration=ge.getDuration(Ke),_t._useWallClockTime=nt,ut.Range.push(_t)}),lt.Reporting_asArray&&(lt.Reporting_asArray.forEach(function(ht){var _t=new Et;ht.hasOwnProperty(de.SCHEME_ID_URI)&&(_t.schemeIdUri=ht.schemeIdUri,ht.hasOwnProperty("value")&&(_t.value=ht.value),ht.hasOwnProperty(de.DVB_REPORTING_URL)&&(_t.dvbReportingUrl=ht[de.DVB_REPORTING_URL]),ht.hasOwnProperty(de.DVB_PROBABILITY)&&(_t.dvbProbability=ht[de.DVB_PROBABILITY]),ut.Reporting.push(_t))}),wt.push(ut)))}),wt}}}Dt.__dashjs_factory_name="ManifestParsing";var Ne=dashjs.FactoryMaker.getSingletonFactory(Dt);function ne(K){var ge;K=K||{};var de={},Ke=this.context,wt=K.eventBus,lt=K.events;function ut(ht){if(!ht.error){var _t=Object.keys(de);Ne(Ke).getInstance({adapter:K.adapter,constants:K.constants}).getMetrics(ht.manifest).forEach(function(Tt){var Mt=JSON.stringify(Tt);if(de.hasOwnProperty(Mt))_t.splice(Mt,1);else try{var _n=ot(Ke).create(K);_n.initialize(Tt),de[Mt]=_n}catch(rn){}}),_t.forEach(function(Tt){de[Tt].reset(),delete de[Tt]}),wt.trigger(E.Z.METRICS_INITIALISATION_COMPLETE)}}function nt(){Object.keys(de).forEach(function(ht){de[ht].reset()}),de={}}return ge={reset:function(){wt.off(lt.MANIFEST_UPDATED,ut,ge),wt.off(lt.STREAM_TEARDOWN_COMPLETE,nt,ge)}},wt.on(lt.MANIFEST_UPDATED,ut,ge),wt.on(lt.STREAM_TEARDOWN_COMPLETE,nt,ge),ge}ne.__dashjs_factory_name="MetricsCollectionController";var Be=dashjs.FactoryMaker.getClassFactory(ne);function L(){var K=this.context;return{createMetricsReporting:function(ge){return P(K).getInstance({eventBus:ge.eventBus,dashMetrics:ge.dashMetrics,metricsConstants:ge.metricsConstants,events:ge.events}).initialize(),Be(K).create(ge)},getReportingFactory:function(){return se(K).getInstance()},getMetricsHandlerFactory:function(){return He(K).getInstance()}}}L.__dashjs_factory_name="MetricsReporting";var D=dashjs.FactoryMaker.getClassFactory(L);D.events=E.Z,dashjs.FactoryMaker.updateClassFactory(L.__dashjs_factory_name,D);var G=D},1180:function(b,p,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function C(m,T){return C=Object.setPrototypeOf||function(U,M){return U.__proto__=M,U},C(m,T)}function E(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function y(m){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},y(m)}var P=new(function(m){(function(I,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(x&&x.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),x&&C(I,x)})(_,m);var T,U,M=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,x=y(T);if(U){var Z=y(this).constructor;I=Reflect.construct(x,arguments,Z)}else I=x.apply(this,arguments);return E(this,I)});function _(){var I;return function(x,Z){if(!(x instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(I=M.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",I.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",I.CMCD_DATA_GENERATED="cmcdDataGenerated",I}return _}(w(8342).Z));p.Z=P},5717:function(b,p,w){var F=w(2610),C=w(5448),E=w(1264),y=w(3106),P=w(1767),m=w(3393);function T(){var U,M,_,I,x,Z,Y,$,Q=this.context,se=(0,E.Z)(Q).getInstance();function R(){I=[],x=[],Z=[],$=[],Y=null,M=[]}function X(Ce,Je){var we=-1;Ce.some(function(qe,st){if(qe===Je)return we=st,!0}),we<0||Ce.splice(we,1)}function ce(Ce){var Je;for(Je=0;Je<$.length;Je++)if($[Je].rulename===Ce)return Je;return-1}function oe(Ce,Je){me(Ce,Je);var we=new F.Z;we.schemeIdUri=Ce,we.value=Je,M.push(we)}function me(Ce,Je){(0,y.PS)(Ce,"string"),(0,y.PS)(Je,"string"),M.forEach(function(we,qe){we.schemeIdUri===Ce&&we.value===Je&&M.splice(qe,1)})}return U={getCustomInitialTrackSelectionFunction:function(){return Y},setCustomInitialTrackSelectionFunction:function(Ce){Y=Ce},resetCustomInitialTrackSelectionFunction:function(){Y=null},getLicenseResponseFilters:function(){return x},getLicenseRequestFilters:function(){return I},getCustomCapabilitiesFilters:function(){return Z},registerCustomCapabilitiesFilter:function(Ce){Z.push(Ce)},registerLicenseResponseFilter:function(Ce){x.push(Ce)},registerLicenseRequestFilter:function(Ce){I.push(Ce)},unregisterCustomCapabilitiesFilter:function(Ce){X(Z,Ce)},unregisterLicenseResponseFilter:function(Ce){X(x,Ce)},unregisterLicenseRequestFilter:function(Ce){X(I,Ce)},addAbrCustomRule:function(Ce,Je,we){if(typeof Ce!="string"||Ce!==P.Z.ABANDON_FRAGMENT_RULES&&Ce!==P.Z.QUALITY_SWITCH_RULES||typeof Je!="string")throw m.Z.BAD_ARGUMENT_ERROR;var qe=ce(Je);qe===-1?$.push({type:Ce,rulename:Je,rule:we}):($[qe].type=Ce,$[qe].rule=we)},removeAllAbrCustomRule:function(){$=[]},removeAbrCustomRule:function(Ce){if(Ce){var Je=ce(Ce);Je!==-1&&$.splice(Je,1)}else $=[]},getAbrCustomRules:function(){return $},addUTCTimingSource:oe,removeUTCTimingSource:me,getUTCTimingSources:function(){return M},clearDefaultUTCTimingSources:function(){M=[]},restoreDefaultUTCTimingSources:function(){var Ce=se.get().streaming.utcSynchronization.defaultTimingSource;oe(Ce.scheme,Ce.value)},setXHRWithCredentialsForType:function Ce(Je,we){Je?_[Je]=!!we:Object.keys(_).forEach(function(qe){Ce(qe,we)})},getXHRWithCredentialsForType:function(Ce){var Je=_[Ce];return Je===void 0?_.default:Je},setConfig:function(){},reset:function(){R()}},_={default:!1},R(),U}T.__dashjs_factory_name="CustomParametersModel",p.Z=C.Z.getSingletonFactory(T)},9032:function(b,p,w){var F=w(5448),C=w(7473);function E(P){var m=(P=P||{}).requestModifier;function T(U){var M=new Date,_=U.request,I=new XMLHttpRequest;if(I.open(U.method,U.url,!0),_.responseType&&(I.responseType=_.responseType),_.range&&I.setRequestHeader("Range","bytes="+_.range),_.requestStartDate||(_.requestStartDate=M),m&&m.modifyRequestHeader&&(I=m.modifyRequestHeader(I,{url:U.url})),U.headers)for(var x in U.headers){var Z=U.headers[x];Z&&I.setRequestHeader(x,Z)}I.withCredentials=U.withCredentials,I.onload=U.onload,I.onloadend=U.onend,I.onerror=U.onerror,I.onprogress=U.progress,I.onabort=U.onabort,I.ontimeout=U.ontimeout,I.timeout=U.timeout,I.send(),U.response=I}return{load:function(U){m&&m.modifyRequest?(0,C.k)(U,m).then(function(){return T(U)}):T(U)},abort:function(U){var M=U.response;M.onloadend=M.onerror=M.onprogress=void 0,M.abort()}}}E.__dashjs_factory_name="XHRLoader";var y=F.Z.getClassFactory(E);p.Z=y},1737:function(b,p,w){function F(ln,gn){for(var pn=0;pn<gn.length;pn++){var At=gn[pn];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),Object.defineProperty(ln,At.key,At)}}w.d(p,{default:function(){return ju}});var C={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},E=function(){function ln(){(function(At,Xt){if(!(At instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,ln)}var gn,pn;return gn=ln,pn=[{key:"findCencContentProtection",value:function(At){for(var Xt=null,Ot=0;Ot<At.length;++Ot){var Yt=At[Ot];Yt.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||Yt.value.toLowerCase()!=="cenc"&&Yt.value.toLowerCase()!=="cbcs"||(Xt=Yt)}return Xt}},{key:"getPSSHData",value:function(At){var Xt=8,Ot=new DataView(At),Yt=Ot.getUint8(Xt);return Xt+=20,Yt>0&&(Xt+=4+16*Ot.getUint32(Xt)),Xt+=4,At.slice(Xt)}},{key:"getPSSHForKeySystem",value:function(At,Xt){var Ot=ln.parsePSSHList(Xt);return At&&Ot.hasOwnProperty(At.uuid.toLowerCase())?Ot[At.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(At,Xt){return"pssh"in At?(At.pssh.__text=At.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),Xt.decodeArray(At.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(At){if(At==null)return[];for(var Xt=new DataView(At.buffer||At),Ot={},Yt=0;;){var wn,Mn,zn=void 0,Kn=Yt;if(Yt>=Xt.buffer.byteLength)break;if(wn=Yt+Xt.getUint32(Yt),Yt+=4,Xt.getUint32(Yt)===1886614376)if(Yt+=4,(Mn=Xt.getUint8(Yt))===0||Mn===1){Yt++,Yt+=3,zn="";var Ln=void 0,fn=void 0;for(Ln=0;Ln<4;Ln++)zn+=(fn=Xt.getUint8(Yt+Ln).toString(16)).length===1?"0"+fn:fn;for(Yt+=4,zn+="-",Ln=0;Ln<2;Ln++)zn+=(fn=Xt.getUint8(Yt+Ln).toString(16)).length===1?"0"+fn:fn;for(Yt+=2,zn+="-",Ln=0;Ln<2;Ln++)zn+=(fn=Xt.getUint8(Yt+Ln).toString(16)).length===1?"0"+fn:fn;for(Yt+=2,zn+="-",Ln=0;Ln<2;Ln++)zn+=(fn=Xt.getUint8(Yt+Ln).toString(16)).length===1?"0"+fn:fn;for(Yt+=2,zn+="-",Ln=0;Ln<6;Ln++)zn+=(fn=Xt.getUint8(Yt+Ln).toString(16)).length===1?"0"+fn:fn;Yt+=6,Yt+=4,Ot[zn=zn.toLowerCase()]=Xt.buffer.slice(Kn,wn),Yt=wn}else Yt=wn;else Yt=wn}return Ot}},{key:"getLicenseServerUrlFromMediaInfo",value:function(At,Xt){try{if(!At||At.length===0)return null;for(var Ot=0,Yt=null;Ot<At.length&&!Yt;){var wn=At[Ot];if(wn&&wn.contentProtection&&wn.contentProtection.length>0){var Mn=wn.contentProtection.filter(function(fr){return fr.schemeIdUri&&fr.schemeIdUri===Xt});if(Mn&&Mn.length>0)for(var zn=0;zn<Mn.length&&!Yt;){for(var Kn=Mn[zn],Ln=0;Ln<C.attributes.length&&!Yt;){for(var fn=0,Xe=C.attributes[Ln];fn<C.prefixes.length&&!Yt;){var Un=C.prefixes[fn];Kn[Xe]&&Kn[Xe].__prefix&&Kn[Xe].__prefix===Un&&Kn[Xe].__text&&(Yt=Kn[Xe].__text),fn+=1}Ln+=1}zn+=1}}Ot+=1}return Yt}catch(fr){return null}}}],pn&&F(gn,pn),ln}(),y=function ln(gn,pn){(function(At,Xt){if(!(At instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.contentType=gn,this.robustness=pn},P=function ln(gn,pn,At,Xt,Ot){(function(Yt,wn){if(!(Yt instanceof wn))throw new TypeError("Cannot call a class as a function")})(this,ln),this.initDataTypes=["cenc"],gn&&gn.length&&(this.audioCapabilities=gn),pn&&pn.length&&(this.videoCapabilities=pn),this.distinctiveIdentifier=At,this.persistentState=Xt,this.sessionTypes=Ot};function m(ln){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gn){return typeof gn}:function(gn){return gn&&typeof Symbol=="function"&&gn.constructor===Symbol&&gn!==Symbol.prototype?"symbol":typeof gn},m(ln)}function T(ln,gn){return T=Object.setPrototypeOf||function(pn,At){return pn.__proto__=At,pn},T(ln,gn)}function U(ln,gn){return!gn||m(gn)!=="object"&&typeof gn!="function"?function(pn){if(pn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pn}(ln):gn}function M(ln){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(gn){return gn.__proto__||Object.getPrototypeOf(gn)},M(ln)}var _=new(function(ln){(function(Ot,Yt){if(typeof Yt!="function"&&Yt!==null)throw new TypeError("Super expression must either be null or a function");Ot.prototype=Object.create(Yt&&Yt.prototype,{constructor:{value:Ot,writable:!0,configurable:!0}}),Yt&&T(Ot,Yt)})(Xt,ln);var gn,pn,At=(gn=Xt,pn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Ot){return!1}}(),function(){var Ot,Yt=M(gn);if(pn){var wn=M(this).constructor;Ot=Reflect.construct(Yt,arguments,wn)}else Ot=Yt.apply(this,arguments);return U(this,Ot)});function Xt(){var Ot;return function(Yt,wn){if(!(Yt instanceof wn))throw new TypeError("Cannot call a class as a function")}(this,Xt),(Ot=At.call(this)).MEDIA_KEYERR_CODE=100,Ot.MEDIA_KEYERR_UNKNOWN_CODE=101,Ot.MEDIA_KEYERR_CLIENT_CODE=102,Ot.MEDIA_KEYERR_SERVICE_CODE=103,Ot.MEDIA_KEYERR_OUTPUT_CODE=104,Ot.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,Ot.MEDIA_KEYERR_DOMAIN_CODE=106,Ot.MEDIA_KEY_MESSAGE_ERROR_CODE=107,Ot.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,Ot.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,Ot.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,Ot.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,Ot.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,Ot.KEY_SESSION_CREATED_ERROR_CODE=113,Ot.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,Ot.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",Ot.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",Ot.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",Ot.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",Ot.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",Ot.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",Ot.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",Ot.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",Ot.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",Ot.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",Ot.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",Ot.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",Ot.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",Ot.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",Ot}return Xt}(w(2230).Z)),I=w(5459),x=function ln(gn,pn,At,Xt,Ot,Yt,wn,Mn){(function(zn,Kn){if(!(zn instanceof Kn))throw new TypeError("Cannot call a class as a function")})(this,ln),this.url=gn,this.method=pn,this.responseType=At,this.headers=Xt,this.withCredentials=Ot,this.messageType=Yt,this.sessionId=wn,this.data=Mn},Z=function ln(gn,pn,At){(function(Xt,Ot){if(!(Xt instanceof Ot))throw new TypeError("Cannot call a class as a function")})(this,ln),this.url=gn,this.headers=pn,this.data=At},Y=w(7855),$=w(703),Q=w(3393),se=w(5448);function R(ln){return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gn){return typeof gn}:function(gn){return gn&&typeof Symbol=="function"&&gn.constructor===Symbol&&gn!==Symbol.prototype?"symbol":typeof gn},R(ln)}function X(ln){var gn,pn,At,Xt,Ot,Yt,wn,Mn,zn,Kn,Ln,fn=(ln=ln||{}).protectionKeyController,Xe=ln.protectionModel,Un=ln.eventBus,fr=ln.events,Ir=ln.debug,Vr=ln.BASE64,er=ln.constants,dn=[],vn=ln.cmcdModel,on=ln.settings,tr=ln.customParametersModel;function ur(){if(!(Un&&Un.hasOwnProperty("on")&&fn&&fn.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function xr(sn,ir){Mn||zn?Mn&&Rr():function(Tr,Ai){if(!zn){zn=!0;var Wr,Ii=[];Tr=Tr.sort(function(ci,Br){return(Ot&&Ot[ci.ks.systemString]&&Ot[ci.ks.systemString].priority>=0?Ot[ci.ks.systemString].priority:Tr.length)-(Ot&&Ot[Br.ks.systemString]&&Ot[Br.ks.systemString].priority>=0?Ot[Br.ks.systemString].priority:Tr.length)});for(var Kr=0;Kr<Tr.length;Kr++){var Cr=vs(Tr[Kr]);Ii.push({ks:Tr[Kr].ks,configs:[Cr],protData:Tr[Kr].protData})}Xe.requestKeySystemAccess(Ii).then(function(ci){var Br=(Wr=ci.data).mksa&&Wr.mksa.selectedSystemString?Wr.mksa.selectedSystemString:Wr.keySystem.systemString;return pn.info("DRM: KeySystem Access Granted for system string ("+Br+")!  Selecting key system..."),Xe.selectKeySystem(Wr)}).then(function(ci){if(Mn=ci,zn=!1,Xe){Un.trigger(fr.KEY_SYSTEM_SELECTED,{data:Wr});var Br=li(Mn);Br&&Br.serverCertificate&&Br.serverCertificate.length>0&&Xe.setServerCertificate(Vr.decodeArray(Br.serverCertificate).buffer),Rr()}}).catch(function(ci){Mn=null,zn=!1,Ai||Un.trigger(fr.KEY_SYSTEM_SELECTED,{data:null,error:new I.Z(_.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,_.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+ci.error)})})}}(sn,ir)}function Rr(){for(var sn,ir=0;ir<At.length;ir++)for(sn=0;sn<At[ir].length;sn++)if(Mn===At[ir][sn].ks){di(At[ir][sn]);break}At=[]}function di(sn){if(fn.isClearKey(Mn)&&sn.protData&&sn.protData.hasOwnProperty("clearkeys")&&Object.keys(sn.protData.clearkeys).length!==0){var ir={kids:Object.keys(sn.protData.clearkeys)};sn.initData=new TextEncoder().encode(JSON.stringify(ir))}sn.sessionId?Ui(sn):sn.initData!==null&&ni(sn)}function Ui(sn){ur(),Xe.loadKeySession(sn)}function ni(sn){var ir=E.getPSSHForKeySystem(Mn,sn?sn.initData:null);if(ir){if(function(Tr){if(!Tr)return!1;try{for(var Ai=Xe.getSessions(),Wr=0;Wr<Ai.length;Wr++)if(Ai[Wr].getKeyId()===Tr)return!0;return!1}catch(Ii){return!1}}(sn.keyId)||vi(ir))return;try{sn.initData=ir,Xe.createKeySession(sn)}catch(Tr){Un.trigger(fr.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+Tr.message)})}}else sn&&sn.initData?Xe.createKeySession(sn):Un.trigger(fr.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Mn?Mn.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function li(sn){if(sn){var ir=sn.systemString;if(Ot)return ir in Ot?Ot[ir]:null}return null}function vi(sn){if(!sn)return!1;try{for(var ir=Xe.getAllInitData(),Tr=0;Tr<ir.length;Tr++)if(fn.initDataEquals(sn,ir[Tr]))return pn.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(Ai){return!1}}function ri(sn){ur(),sn?(Xe.setMediaElement(sn),Un.on(fr.NEED_KEY,Gu,gn)):sn===null&&(Xe.setMediaElement(sn),Un.off(fr.NEED_KEY,Gu,gn))}function vs(sn){var ir=sn.protData,Tr=[],Ai=[],Wr=ir&&ir.audioRobustness&&ir.audioRobustness.length>0?ir.audioRobustness:wn,Ii=ir&&ir.videoRobustness&&ir.videoRobustness.length>0?ir.videoRobustness:wn,Kr=sn.sessionType,Cr=ir&&ir.distinctiveIdentifier?ir.distinctiveIdentifier:"optional",ci=ir&&ir.persistentState?ir.persistentState:Kr==="temporary"?"optional":"required";return Xt.forEach(function(Br){Br.type===er.AUDIO?Tr.push(new y(Br.codec,Wr)):Br.type===er.VIDEO&&Ai.push(new y(Br.codec,Ii))}),new P(Tr,Ai,Cr,ci,[Kr])}function Ao(sn){sn.error?Un.trigger(fr.KEY_STATUSES_CHANGED,{data:null,error:sn.error}):pn.debug("DRM: key status = "+sn.status)}function Yo(sn){pn.debug("DRM: onKeyMessage");var ir=sn.data;Un.trigger(fr.KEY_MESSAGE,{data:ir});var Tr=ir.messageType?ir.messageType:"license-request",Ai=ir.message,Wr=ir.sessionToken,Ii=li(Mn),Kr=fn.getLicenseServerModelInstance(Mn,Ii,Tr),Cr={sessionToken:Wr,messageType:Tr};if(Ai&&Ai.byteLength!==0){if(!Kr)return pn.debug("DRM: License server request not required for this message (type = "+sn.data.messageType+").  Session ID = "+Wr.getSessionId()),void Ri(Cr);if(fn.isClearKey(Mn)){var ci=fn.processClearKeyLicenseRequest(Mn,Ii,Ai);if(ci&&ci.keyPairs&&ci.keyPairs.length>0)return pn.debug("DRM: ClearKey license request handled by application!"),Ri(Cr),void Xe.updateKeySession(Wr,ci)}(function(Br,bi,yo){var oa=Br.sessionToken,yi=Br.messageType?Br.messageType:"license-request",Ta={sessionToken:oa,messageType:yi},aa=Mn?Mn.systemString:null,ys=function(sr,ei,Io,Eo,Hi){var Vi=null,Er=Eo.message;if(sr&&sr.serverURL){var Po=sr.serverURL;typeof Po=="string"&&Po!==""?Vi=Po:R(Po)==="object"&&Po.hasOwnProperty(ei)&&(Vi=Po[ei])}else if(sr&&sr.laURL&&sr.laURL!=="")Vi=sr.laURL;else if(!(Vi=E.getLicenseServerUrlFromMediaInfo(Xt,Mn.schemeIdURI))&&!fn.isClearKey(Mn)){var yc=E.getPSSHData(Io.initData);(Vi=Mn.getLicenseServerURLFromInitData(yc))||(Vi=Eo.laURL)}return Vi=Hi.getServerURLFromMessage(Vi,Er,ei)}(yo,yi,oa,Br,bi);if(ys){var Sa={},wa=!1;yo&&Zs(Sa,yo.httpRequestHeaders);var yu=Br.message;Zs(Sa,Mn.getRequestHeadersFromMessage(yu)),Object.keys(Sa).forEach(function(sr){sr.toLowerCase()==="authorization"&&(wa=!0)}),yo&&typeof yo.withCredentials=="boolean"&&(wa=yo.withCredentials);var Eu=function(sr){if(Xe)if(sr.status>=200&&sr.status<=299){var ei=$.Z.parseHttpHeaders(sr.getAllResponseHeaders?sr.getAllResponseHeaders():null),Io=new Z(sr.responseURL,ei,sr.response);qu(tr.getLicenseResponseFilters(),Io).then(function(){var Eo=bi.getLicenseMessage(Io.data,aa,yi);Eo!==null?(Ri(Ta),Xe.updateKeySession(oa,Eo)):Rl(sr,Ta,aa,yi,bi)})}else Rl(sr,Ta,aa,yi,bi)},Ah=function(sr){Ri(Ta,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+aa+' update, XHR aborted. status is "'+sr.statusText+'" ('+sr.status+"), readyState is "+sr.readyState))},Aa=function(sr){Ri(Ta,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+aa+' update, XHR error. status is "'+sr.statusText+'" ('+sr.status+"), readyState is "+sr.readyState))},Es=Mn.getLicenseRequestFromMessage(yu),_u=bi.getHTTPMethod(yi),Tu=bi.getResponseType(aa,yi),Hu=yo&&!isNaN(yo.httpTimeout)?yo.httpTimeout:8e3,mf=oa.getSessionId()||null,qs=new x(ys,_u,Tu,Sa,wa,yi,mf,Es),vf=isNaN(on.get().streaming.retryAttempts[Y.w.LICENSE])?3:on.get().streaming.retryAttempts[Y.w.LICENSE];qu(tr.getLicenseRequestFilters(),qs).then(function(){Zu(qs,vf,Hu,Eu,Ah,Aa)})}else Ri(Ta,new I.Z(_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(ir,Kr,Ii)}else Ri(Cr,new I.Z(_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Ri(sn,ir){Un.trigger(fr.LICENSE_REQUEST_COMPLETE,{data:sn,error:ir})}function Zu(sn,ir,Tr,Ai,Wr,Ii){var Kr=new XMLHttpRequest;if(on.get().streaming.cmcd&&on.get().streaming.cmcd.enabled&&on.get().streaming.cmcd.mode===Q.Z.CMCD_MODE_QUERY){var Cr=vn.getQueryParameter({url:sn.url,type:Y.w.LICENSE});Cr&&(sn.url=$.Z.addAditionalQueryParameterToUrl(sn.url,[Cr]))}for(var ci in Kr.open(sn.method,sn.url,!0),Kr.responseType=sn.responseType,Kr.withCredentials=sn.withCredentials,Tr>0&&(Kr.timeout=Tr),sn.headers)Kr.setRequestHeader(ci,sn.headers[ci]);if(on.get().streaming.cmcd&&on.get().streaming.cmcd.enabled&&on.get().streaming.cmcd.mode===Q.Z.CMCD_MODE_HEADER){var Br=vn.getHeaderParameters({url:sn.url,type:Y.w.LICENSE});if(Br)for(var bi in Br){var yo=Br[bi];yo&&Kr.setRequestHeader(bi,yo)}}var oa=function(){ir--;var yi=isNaN(on.get().streaming.retryIntervals[Y.w.LICENSE])?1e3:on.get().streaming.retryIntervals[Y.w.LICENSE];Ln=setTimeout(function(){Zu(sn,ir,Tr,Ai,Wr,Ii)},yi)};Kr.onload=function(){Kn=null,this.status>=200&&this.status<=299||ir<=0?Ai(this):(pn.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+ir),oa())},Kr.ontimeout=Kr.onerror=function(){Kn=null,ir<=0?Ii(this):(pn.warn("License request network request failed . Retrying it... Pending retries: "+ir),oa())},Kr.onabort=function(){Wr(this)},Un.trigger(fr.LICENSE_REQUEST_SENDING,{url:sn.url,headers:sn.headers,payload:sn.data,sessionId:sn.sessionId}),Kn=Kr,Kr.send(sn.data)}function vu(){Kn&&(Kn.onloadend=Kn.onerror=Kn.onprogress=void 0,Kn.abort(),Kn=null),Ln&&(clearTimeout(Ln),Ln=null)}function Zs(sn,ir){if(ir)for(var Tr in ir)sn[Tr]=ir[Tr]}function Rl(sn,ir,Tr,Ai,Wr){var Ii="NONE",Kr=null;sn.response&&(Ii=Wr.getErrorResponse(sn.response,Tr,Ai),Kr={serverResponse:sn.response||null,responseCode:sn.status||null,responseText:sn.statusText||null}),Ri(ir,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Tr+' update, XHR complete. status is "'+sn.statusText+'" ('+sn.status+"), readyState is "+sn.readyState+".  Response is "+Ii,Kr))}function qu(sn,ir){return sn?sn.reduce(function(Tr,Ai){return Tr.then(function(){return Ai(ir)})},Promise.resolve()):Promise.resolve()}function Gu(sn,ir){if(!on.get().streaming.protection.ignoreEmeEncryptedEvent){if(pn.debug("DRM: onNeedKey"),sn.key.initDataType!=="cenc")return void pn.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+sn.key.initDataType);if(Xt.length===0&&(pn.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(ir=ir===void 0?1:ir+1)<5))return void dn.push(setTimeout(function(){Gu(sn,ir)},500));var Tr=sn.key.initData;if(ArrayBuffer.isView(Tr)&&(Tr=Tr.buffer),Mn){var Ai=E.getPSSHForKeySystem(Mn,Tr);if(Ai&&vi(Ai))return}pn.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(Tr)));var Wr=fn.getSupportedKeySystemsFromSegmentPssh(Tr,Ot,Yt);if(Wr.length===0)return void pn.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Ii){At.push(Ii),xr(Ii,!1)})(Wr)}}return gn={initializeForMedia:function(sn){if(!sn)throw new Error("mediaInfo can not be null or undefined");ur(),Xt.push(sn)},clearMediaInfoArray:function(){Xt=[]},handleKeySystemFromManifest:function(){if(Xt&&Xt.length!==0){var sn=[];Xt.forEach(function(ir){var Tr=fn.getSupportedKeySystemsFromContentProtection(ir.contentProtection,Ot,Yt);Tr.length>0&&(sn.length===0&&(sn=Tr),At.push(Tr))}),sn&&sn.length>0&&xr(sn,!0)}},createKeySession:ni,loadKeySession:Ui,removeKeySession:function(sn){ur(),Xe.removeKeySession(sn)},closeKeySession:function(sn){ur(),Xe.closeKeySession(sn)},setServerCertificate:function(sn){ur(),Xe.setServerCertificate(sn)},setMediaElement:ri,setSessionType:function(sn){Yt=sn},setRobustnessLevel:function(sn){wn=sn},setProtectionData:function(sn){Ot=sn,fn.setProtectionData(sn)},getSupportedKeySystemsFromContentProtection:function(sn){return ur(),fn.getSupportedKeySystemsFromContentProtection(sn,Ot,Yt)},getKeySystems:function(){return fn?fn.getKeySystems():[]},setKeySystems:function(sn){fn&&fn.setKeySystems(sn)},stop:function(){vu(),Xe&&Xe.stop()},reset:function(){Un.off(fr.INTERNAL_KEY_MESSAGE,Yo,gn),Un.off(fr.INTERNAL_KEY_STATUS_CHANGED,Ao,gn),ur(),vu(),ri(null),Mn=null,zn=!1,Xe&&(Xe.reset(),Xe=null),dn.forEach(function(sn){return clearTimeout(sn)}),dn=[],Xt=[],At=[]}},pn=Ir.getLogger(gn),At=[],Xt=[],Yt="temporary",wn="",Kn=null,Ln=null,Un.on(fr.INTERNAL_KEY_MESSAGE,Yo,gn),Un.on(fr.INTERNAL_KEY_STATUS_CHANGED,Ao,gn),gn}X.__dashjs_factory_name="ProtectionController";var ce=se.Z.getClassFactory(X),oe=function ln(gn,pn){(function(At,Xt){if(!(At instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.keyID=gn,this.key=pn};function me(ln,gn){for(var pn=0;pn<gn.length;pn++){var At=gn[pn];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),Object.defineProperty(ln,At.key,At)}}var Ce=function(){function ln(At,Xt){if(function(Ot,Yt){if(!(Ot instanceof Yt))throw new TypeError("Cannot call a class as a function")}(this,ln),Xt&&Xt!=="persistent"&&Xt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=At,this.type=Xt}var gn,pn;return gn=ln,(pn=[{key:"toJWK",value:function(){var At,Xt=this.keyPairs.length,Ot={keys:[]};for(At=0;At<Xt;At++){var Yt={kty:"oct",alg:"A128KW",kid:this.keyPairs[At].keyID,k:this.keyPairs[At].key};Ot.keys.push(Yt)}this.type&&(Ot.type=this.type);var wn=JSON.stringify(Ot),Mn=wn.length,zn=new ArrayBuffer(Mn),Kn=new Uint8Array(zn);for(At=0;At<Mn;At++)Kn[At]=wn.charCodeAt(At);return zn}}])&&me(gn.prototype,pn),ln}();function Je(ln,gn){for(var pn=0;pn<gn.length;pn++){var At=gn[pn];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),Object.defineProperty(ln,At.key,At)}}var we=new(function(){function ln(){(function(At,Xt){if(!(At instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.init()}var gn,pn;return gn=ln,(pn=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Je(gn.prototype,pn),ln}()),qe="e2719d58-a985-b3c9-781a-b030af78d30e",st=we.CLEARKEY_KEYSTEM_STRING,ft="urn:uuid:"+qe;function be(ln){var gn=(ln=ln||{}).BASE64;return{uuid:qe,schemeIdURI:ft,systemString:st,getInitData:function(pn,At){try{var Xt=E.parseInitDataFromContentProtection(pn,gn);if(!Xt&&At){var Ot={kids:[function(Yt){try{var wn=Yt.replace(/-/g,"");return(wn=btoa(wn.match(/\w{2}/g).map(function(Mn){return String.fromCharCode(parseInt(Mn,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(Mn){return null}}(At["cenc:default_KID"])]};Xt=new TextEncoder().encode(JSON.stringify(Ot))}return Xt}catch(Yt){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(pn){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(pn))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(pn,At){var Xt=null;if(pn){for(var Ot=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(At))),Yt=[],wn=0;wn<Ot.kids.length;wn++){var Mn=Ot.kids[wn],zn=pn.clearkeys&&pn.clearkeys.hasOwnProperty(Mn)?pn.clearkeys[Mn]:null;if(!zn)throw new Error("DRM: ClearKey keyID ("+Mn+") is not known!");Yt.push(new oe(Mn,zn))}Xt=new Ce(Yt)}return Xt}}}be.__dashjs_factory_name="KeySystemClearKey";var He=dashjs.FactoryMaker.getSingletonFactory(be),vt="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Re=we.CLEARKEY_KEYSTEM_STRING,Ye="urn:uuid:"+vt;function ot(ln){var gn,pn=ln.BASE64,At=ln.debug.getLogger(gn);return{uuid:vt,schemeIdURI:Ye,systemString:Re,getInitData:function(Xt){return E.parseInitDataFromContentProtection(Xt,pn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(Xt){return new Uint8Array(Xt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(Xt,Ot){var Yt=null;if(Xt){for(var wn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Ot))),Mn=[],zn=0;zn<wn.kids.length;zn++){var Kn=wn.kids[zn],Ln=Xt.clearkeys&&Xt.clearkeys.hasOwnProperty(Kn)?Xt.clearkeys[Kn]:null;if(!Ln)throw new Error("DRM: ClearKey keyID ("+Kn+") is not known!");Mn.push(new oe(Kn,Ln))}Yt=new Ce(Mn),At.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return Yt}}}ot.__dashjs_factory_name="KeySystemW3CClearKey";var Ht=dashjs.FactoryMaker.getSingletonFactory(ot),Bt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Et=we.WIDEVINE_KEYSTEM_STRING,Dt="urn:uuid:"+Bt;function Ne(ln){var gn=(ln=ln||{}).BASE64;return{uuid:Bt,schemeIdURI:Dt,systemString:Et,getInitData:function(pn){return E.parseInitDataFromContentProtection(pn,gn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(pn){return new Uint8Array(pn)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Ne.__dashjs_factory_name="KeySystemWidevine";var ne=dashjs.FactoryMaker.getSingletonFactory(Ne),Be="9a04f079-9840-4286-ab92-e65be0885f95",L=we.PLAYREADY_KEYSTEM_STRING,D="urn:uuid:"+Be;function G(ln){var gn="utf-16",pn=(ln=ln||{}).BASE64,At=ln.settings;function Xt(){if(!pn||!pn.hasOwnProperty("decodeArray")||!pn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Be,schemeIdURI:D,systemString:L,getInitData:function(Ot){var Yt,wn,Mn,zn,Kn,Ln=new Uint8Array([112,115,115,104,0,0,0,0]),fn=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),Xe=0,Un=null;if(Xt(),!Ot)return null;if("pssh"in Ot)return E.parseInitDataFromContentProtection(Ot,pn);if("pro"in Ot)Un=pn.decodeArray(Ot.pro.__text);else{if(!("prheader"in Ot))return null;Un=pn.decodeArray(Ot.prheader.__text)}return Yt=Un.length,wn=4+Ln.length+fn.length+4+Yt,Mn=new ArrayBuffer(wn),zn=new Uint8Array(Mn),(Kn=new DataView(Mn)).setUint32(Xe,wn),Xe+=4,zn.set(Ln,Xe),Xe+=Ln.length,zn.set(fn,Xe),Xe+=fn.length,Kn.setUint32(Xe,Yt),Xe+=4,zn.set(Un,Xe),Xe+=Yt,zn.buffer},getRequestHeadersFromMessage:function(Ot){var Yt,wn,Mn={},zn=new DOMParser;if(At&&At.get().streaming.protection.detectPlayreadyMessageFormat&&gn==="utf-16"&&Ot&&Ot.byteLength%2==1)return Mn["Content-Type"]="text/xml; charset=utf-8",Mn;var Kn=gn==="utf-16"?new Uint16Array(Ot):new Uint8Array(Ot);Yt=String.fromCharCode.apply(null,Kn);for(var Ln=(wn=zn.parseFromString(Yt,"application/xml")).getElementsByTagName("name"),fn=wn.getElementsByTagName("value"),Xe=0;Xe<Ln.length;Xe++)Mn[Ln[Xe].childNodes[0].nodeValue]=fn[Xe].childNodes[0].nodeValue;return Mn.hasOwnProperty("Content")&&(Mn["Content-Type"]=Mn.Content,delete Mn.Content),Mn.hasOwnProperty("Content-Type")||(Mn["Content-Type"]="text/xml; charset=utf-8"),Mn},getLicenseRequestFromMessage:function(Ot){var Yt=null,wn=new DOMParser;if(At&&At.get().streaming.protection.detectPlayreadyMessageFormat&&gn==="utf-16"&&Ot&&Ot.byteLength%2==1)return Ot;var Mn=gn==="utf-16"?new Uint16Array(Ot):new Uint8Array(Ot);Xt();var zn=String.fromCharCode.apply(null,Mn),Kn=wn.parseFromString(zn,"application/xml");if(!Kn.getElementsByTagName("PlayReadyKeyMessage")[0])return Ot;var Ln=Kn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Ln&&(Yt=pn.decode(Ln)),Yt},getLicenseServerURLFromInitData:function(Ot){if(Ot)for(var Yt=new DataView(Ot),wn=Yt.getUint16(4,!0),Mn=6,zn=new DOMParser,Kn=0;Kn<wn;Kn++){var Ln=Yt.getUint16(Mn,!0);Mn+=2;var fn=Yt.getUint16(Mn,!0);if(Mn+=2,Ln===1){var Xe=Ot.slice(Mn,Mn+fn),Un=String.fromCharCode.apply(null,new Uint16Array(Xe)),fr=zn.parseFromString(Un,"application/xml");if(fr.getElementsByTagName("LA_URL")[0]){var Ir=fr.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Ir)return Ir}if(fr.getElementsByTagName("LUI_URL")[0]){var Vr=fr.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Vr)return Vr}}else Mn+=fn}return null},getCDMData:function(Ot){var Yt,wn,Mn,zn;if(Xt(),!Ot)return null;for(Yt=[],zn=0;zn<Ot.length;++zn)Yt.push(Ot.charCodeAt(zn)),Yt.push(0);for(Yt=String.fromCharCode.apply(null,Yt),Yt=pn.encode(Yt),wn='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",Yt),Mn=[],zn=0;zn<wn.length;++zn)Mn.push(wn.charCodeAt(zn)),Mn.push(0);return new Uint8Array(Mn).buffer},setPlayReadyMessageFormat:function(Ot){if(Ot!=="utf-8"&&Ot!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');gn=Ot}}}G.__dashjs_factory_name="KeySystemPlayReady";var K=dashjs.FactoryMaker.getSingletonFactory(G);function ge(ln){var gn=(ln=ln||{}).BASE64,pn={};return pn[we.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(At){return gn.decodeArray(At.license)},getErrorResponse:function(At){return At}},pn[we.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(At){return At},getErrorResponse:function(At){return String.fromCharCode.apply(null,new Uint8Array(At))}},{getServerURLFromMessage:function(At){return At},getHTTPMethod:function(){return"POST"},getResponseType:function(At){return pn[At].responseType},getLicenseMessage:function(At,Xt){return function(){if(!gn||!gn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),pn[Xt].getLicenseMessage(At)},getErrorResponse:function(At,Xt){return pn[Xt].getErrorResponse(At)}}}ge.__dashjs_factory_name="DRMToday";var de=dashjs.FactoryMaker.getSingletonFactory(ge);function Ke(){var ln="http://schemas.xmlsoap.org/soap/envelope/";function gn(Xt){var Ot=String.fromCharCode.apply(null,new Uint8Array(Xt));return decodeURIComponent(escape(Ot))}function pn(Xt){if(window.DOMParser){var Ot=gn(Xt),Yt=new window.DOMParser().parseFromString(Ot,"text/xml"),wn=Yt?Yt.getElementsByTagNameNS(ln,"Envelope")[0]:null,Mn=wn?wn.getElementsByTagNameNS(ln,"Body")[0]:null;if(Mn&&Mn.getElementsByTagNameNS(ln,"Fault")[0])return null}return Xt}function At(Xt){var Ot="",Yt="",wn="",Mn=-1,zn=-1;if(window.DOMParser){var Kn=gn(Xt),Ln=new window.DOMParser().parseFromString(Kn,"text/xml"),fn=Ln?Ln.getElementsByTagNameNS(ln,"Envelope")[0]:null,Xe=fn?fn.getElementsByTagNameNS(ln,"Body")[0]:null,Un=Xe?Xe.getElementsByTagNameNS(ln,"Fault")[0]:null,fr=Un?Un.getElementsByTagName("detail")[0]:null,Ir=fr?fr.getElementsByTagName("Exception")[0]:null,Vr=null;if(Un===null)return Kn;Ot=(Vr=Un.getElementsByTagName("faultstring")[0].firstChild)?Vr.nodeValue:null,Ir!==null&&(Yt=(Vr=Ir.getElementsByTagName("StatusCode")[0])?Vr.firstChild.nodeValue:null,Mn=(wn=(Vr=Ir.getElementsByTagName("Message")[0])?Vr.firstChild.nodeValue:null)?wn.lastIndexOf("[")+1:-1,zn=wn?wn.indexOf("]"):-1,wn=wn?wn.substring(Mn,zn):"")}var er="code: ".concat(Yt,", name: ").concat(Ot);return wn&&(er+=", message: ".concat(wn)),er}return{getServerURLFromMessage:function(Xt){return Xt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(Xt){return pn.call(this,Xt)},getErrorResponse:function(Xt){return At.call(this,Xt)}}}Ke.__dashjs_factory_name="PlayReady";var wt=se.Z.getSingletonFactory(Ke);function lt(){return{getServerURLFromMessage:function(ln){return ln},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(ln){return ln},getErrorResponse:function(ln){return String.fromCharCode.apply(null,new Uint8Array(ln))}}}lt.__dashjs_factory_name="Widevine";var ut=dashjs.FactoryMaker.getSingletonFactory(lt);function nt(){return{getServerURLFromMessage:function(ln){return ln},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(ln){if(!ln.hasOwnProperty("keys"))return null;for(var gn=[],pn=0;pn<ln.keys.length;pn++){var At=ln.keys[pn],Xt=At.kid.replace(/=/g,""),Ot=At.k.replace(/=/g,"");gn.push(new oe(Xt,Ot))}return new Ce(gn)},getErrorResponse:function(ln){return String.fromCharCode.apply(null,new Uint8Array(ln))}}}nt.__dashjs_factory_name="ClearKey";var ht=dashjs.FactoryMaker.getSingletonFactory(nt);function _t(){var ln,gn,pn,At,Xt,Ot,Yt,wn,Mn=this.context;function zn(fn,Xe){return Xe&&fn in Xe?Xe[fn]:null}function Kn(fn,Xe){return fn&&fn.sessionId?fn.sessionId:Xe&&Xe.sessionId?Xe.sessionId:null}function Ln(fn,Xe){return fn&&fn.sessionType?fn.sessionType:Xe}return ln={initialize:function(){var fn;At=[],fn=K(Mn).getInstance({BASE64:Xt,settings:Ot}),At.push(fn),fn=ne(Mn).getInstance({BASE64:Xt}),At.push(fn),fn=He(Mn).getInstance({BASE64:Xt}),At.push(fn),Yt=fn,fn=Ht(Mn).getInstance({BASE64:Xt,debug:gn}),At.push(fn),wn=fn},setProtectionData:function(fn){for(var Xe,Un,fr=0;fr<At.length;fr++){var Ir=At[fr];Ir.hasOwnProperty("init")&&Ir.init((Xe=Ir.systemString,Un=void 0,Un=null,fn&&(Un=Xe in fn?fn[Xe]:null),Un))}},isClearKey:function(fn){return fn===Yt||fn===wn},initDataEquals:function(fn,Xe){if(fn.byteLength===Xe.byteLength){for(var Un=new Uint8Array(fn),fr=new Uint8Array(Xe),Ir=0;Ir<Un.length;Ir++)if(Un[Ir]!==fr[Ir])return!1;return!0}return!1},getKeySystems:function(){return At},setKeySystems:function(fn){At=fn},getKeySystemBySystemString:function(fn){for(var Xe=0;Xe<At.length;Xe++)if(At[Xe].systemString===fn)return At[Xe];return null},getSupportedKeySystemsFromContentProtection:function(fn,Xe,Un){var fr,Ir,Vr,er,dn=[];if(fn){var vn=E.findCencContentProtection(fn);for(Vr=0;Vr<At.length;++Vr){var on=zn((Ir=At[Vr]).systemString,Xe);for(er=0;er<fn.length;++er)if((fr=fn[er]).schemeIdUri.toLowerCase()===Ir.schemeIdURI){var tr=Ir.getInitData(fr,vn);dn.push({ks:At[Vr],keyId:fr.keyId,initData:tr,protData:on,cdmData:Ir.getCDMData(on?on.cdmData:null),sessionId:Kn(on,fr),sessionType:Ln(on,Un)})}}}return dn},getSupportedKeySystemsFromSegmentPssh:function(fn,Xe,Un){for(var fr,Ir=[],Vr=E.parsePSSHList(fn),er=0;er<At.length;++er){var dn=zn((fr=At[er]).systemString,Xe);fr.uuid in Vr&&Ir.push({ks:fr,initData:Vr[fr.uuid],protData:dn,cdmData:fr.getCDMData(dn?dn.cdmData:null),sessionId:Kn(dn),sessionType:Ln(dn,Un)})}return Ir},getLicenseServerModelInstance:function(fn,Xe,Un){if(Un==="license-release"||Un==="individualization-request")return null;var fr=null;return Xe&&Xe.hasOwnProperty("drmtoday")?fr=de(Mn).getInstance({BASE64:Xt}):fn.systemString===we.WIDEVINE_KEYSTEM_STRING?fr=ut(Mn).getInstance():fn.systemString===we.PLAYREADY_KEYSTEM_STRING?fr=wt(Mn).getInstance():fn.systemString===we.CLEARKEY_KEYSTEM_STRING&&(fr=ht(Mn).getInstance()),fr},processClearKeyLicenseRequest:function(fn,Xe,Un){try{return fn.getClearKeysFromProtectionData(Xe,Un)}catch(fr){return pn.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(fn){fn&&(fn.debug&&(gn=fn.debug,pn=gn.getLogger(ln)),fn.BASE64&&(Xt=fn.BASE64),fn.settings&&(Ot=fn.settings))}},ln}_t.__dashjs_factory_name="ProtectionKeyController";var Tt=dashjs.FactoryMaker.getSingletonFactory(_t);function Mt(ln){return Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gn){return typeof gn}:function(gn){return gn&&typeof Symbol=="function"&&gn.constructor===Symbol&&gn!==Symbol.prototype?"symbol":typeof gn},Mt(ln)}function _n(ln,gn){return _n=Object.setPrototypeOf||function(pn,At){return pn.__proto__=At,pn},_n(ln,gn)}function rn(ln,gn){return!gn||Mt(gn)!=="object"&&typeof gn!="function"?function(pn){if(pn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pn}(ln):gn}function cn(ln){return cn=Object.setPrototypeOf?Object.getPrototypeOf:function(gn){return gn.__proto__||Object.getPrototypeOf(gn)},cn(ln)}var Ft=new(function(ln){(function(Ot,Yt){if(typeof Yt!="function"&&Yt!==null)throw new TypeError("Super expression must either be null or a function");Ot.prototype=Object.create(Yt&&Yt.prototype,{constructor:{value:Ot,writable:!0,configurable:!0}}),Yt&&_n(Ot,Yt)})(Xt,ln);var gn,pn,At=(gn=Xt,pn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Ot){return!1}}(),function(){var Ot,Yt=cn(gn);if(pn){var wn=cn(this).constructor;Ot=Reflect.construct(Yt,arguments,wn)}else Ot=Yt.apply(this,arguments);return rn(this,Ot)});function Xt(){var Ot;return function(Yt,wn){if(!(Yt instanceof wn))throw new TypeError("Cannot call a class as a function")}(this,Xt),(Ot=At.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",Ot.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",Ot.KEY_ADDED="public_keyAdded",Ot.KEY_ERROR="public_keyError",Ot.KEY_MESSAGE="public_keyMessage",Ot.KEY_SESSION_CLOSED="public_keySessionClosed",Ot.KEY_SESSION_CREATED="public_keySessionCreated",Ot.KEY_SESSION_REMOVED="public_keySessionRemoved",Ot.KEY_STATUSES_CHANGED="public_keyStatusesChanged",Ot.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",Ot.KEY_SYSTEM_SELECTED="public_keySystemSelected",Ot.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",Ot.LICENSE_REQUEST_SENDING="public_licenseRequestSending",Ot.NEED_KEY="needkey",Ot.PROTECTION_CREATED="public_protectioncreated",Ot.PROTECTION_DESTROYED="public_protectiondestroyed",Ot.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",Ot.TEARDOWN_COMPLETE="protectionTeardownComplete",Ot.VIDEO_ELEMENT_SELECTED="videoElementSelected",Ot.KEY_SESSION_UPDATED="public_keySessionUpdated",Ot}return Xt}(w(8342).Z)),Gn=function ln(gn,pn){(function(At,Xt){if(!(At instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.initData=gn,this.initDataType=pn},Sr=function ln(gn,pn,At,Xt){(function(Ot,Yt){if(!(Ot instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.sessionToken=gn,this.message=pn,this.defaultURL=At,this.messageType=Xt||"license-request"},Gr=function ln(gn,pn){(function(At,Xt){if(!(At instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.keySystem=gn,this.ksConfiguration=pn},gr={};function fi(ln){ln=ln||{};var gn,pn,At,Xt,Ot,Yt,wn,Mn,zn=this.context,Kn=ln.eventBus,Ln=ln.events,fn=ln.debug;function Xe(dn,vn,on,tr){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var ur="Insecure origins are not allowed";return Kn.trigger(Ln.KEY_SYSTEM_ACCESS_COMPLETE,{error:ur}),void tr({error:ur})}var xr=dn[vn].protData&&dn[vn].protData.systemStringPriority?dn[vn].protData.systemStringPriority:null,Rr=dn[vn].configs,di=dn[vn].ks,Ui=di.systemString;(function(ni,li){return new Promise(function(vi,ri){Un(ni,li,0,vi,ri)})})(xr||(gr[Ui]?gr[Ui]:[Ui]),Rr).then(function(ni){var li=typeof ni.getConfiguration=="function"?ni.getConfiguration():null,vi=new Gr(di,li);vi.mksa=ni,Kn.trigger(Ln.KEY_SYSTEM_ACCESS_COMPLETE,{data:vi}),on({data:vi})}).catch(function(ni){if(vn+1<dn.length)Xe(dn,vn+1,on,tr);else{var li="Key system access denied! ";Kn.trigger(Ln.KEY_SYSTEM_ACCESS_COMPLETE,{error:li+ni.message}),tr({error:li+ni.message})}})}function Un(dn,vn,on,tr,ur){var xr=dn[on];pn.debug("Requesting key system access for system string ".concat(xr)),navigator.requestMediaKeySystemAccess(xr,vn).then(function(Rr){Rr.selectedSystemString=xr,tr(Rr)}).catch(function(Rr){on+1<dn.length?Un(dn,vn,on+1,tr,ur):ur(Rr)})}function fr(dn){if(!dn||!dn.session)return Promise.resolve;var vn=dn.session;return vn.removeEventListener("keystatuseschange",dn),vn.removeEventListener("message",dn),vn.close()}function Ir(dn){for(var vn=0;vn<Yt.length;vn++)if(Yt[vn]===dn){Yt.splice(vn,1);break}}function Vr(dn){var vn,on;return dn&&dn.length>0&&(dn[0]&&(typeof dn[0]=="string"?vn=dn[0]:on=dn[0]),dn[1]&&(typeof dn[1]=="string"?vn=dn[1]:on=dn[1])),{status:vn,keyId:on}}function er(dn,vn){var on={session:dn,keyId:vn.keyId,initData:vn.initData,sessionId:vn.sessionId,sessionType:vn.sessionType,handleEvent:function(tr){switch(tr.type){case"keystatuseschange":Kn.trigger(Ln.KEY_STATUSES_CHANGED,{data:this}),tr.target.keyStatuses.forEach(function(){var xr=Vr(arguments);xr.status==="expired"?Kn.trigger(Ln.INTERNAL_KEY_STATUS_CHANGED,{error:new I.Z(_.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):Kn.trigger(Ln.INTERNAL_KEY_STATUS_CHANGED,xr)});break;case"message":var ur=ArrayBuffer.isView(tr.message)?tr.message.buffer:tr.message;Kn.trigger(Ln.INTERNAL_KEY_MESSAGE,{data:new Sr(this,ur,void 0,tr.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return dn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return dn.expiration},getKeyStatuses:function(){return dn.keyStatuses},getUsable:function(){var tr=!1;return dn.keyStatuses.forEach(function(){var ur=Vr(arguments);ur.status==="usable"&&(tr=!0)}),tr}};return dn.addEventListener("keystatuseschange",on),dn.addEventListener("message",on),dn.closed.then(function(){Ir(on),pn.debug("DRM: Session closed.  SessionID = "+on.getSessionId()),Kn.trigger(Ln.KEY_SESSION_CLOSED,{data:on.getSessionId()})}),Yt.push(on),on}return gn={getAllInitData:function(){for(var dn=[],vn=0;vn<Yt.length;vn++)Yt[vn].initData&&dn.push(Yt[vn].initData);return dn},getSessions:function(){return Yt},requestKeySystemAccess:function(dn){return new Promise(function(vn,on){Xe(dn,0,vn,on)})},selectKeySystem:function(dn){return new Promise(function(vn,on){dn.mksa.createMediaKeys().then(function(tr){return At=dn.keySystem,Ot=tr,Xt?Xt.setMediaKeys(Ot):Promise.resolve()}).then(function(){vn(At)}).catch(function(){on({error:"Error selecting keys system ("+dn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(dn){Xt!==dn&&(Xt&&(Xt.removeEventListener("encrypted",wn),Xt.setMediaKeys&&Xt.setMediaKeys(null)),(Xt=dn)&&(Xt.addEventListener("encrypted",wn),Xt.setMediaKeys&&Ot&&Xt.setMediaKeys(Ot)))},setServerCertificate:function(dn){if(!At||!Ot)throw new Error("Can not set server certificate until you have selected a key system");Ot.setServerCertificate(dn).then(function(){pn.info("DRM: License server certificate successfully updated."),Kn.trigger(Ln.SERVER_CERTIFICATE_UPDATED)}).catch(function(vn){Kn.trigger(Ln.SERVER_CERTIFICATE_UPDATED,{error:new I.Z(_.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+vn.name)})})},createKeySession:function(dn){if(!At||!Ot)throw new Error("Can not create sessions until you have selected a key system");var vn=Ot.createSession(dn.sessionType),on=er(vn,dn),tr=At.systemString===we.CLEARKEY_KEYSTEM_STRING&&(dn.initData||dn.protData&&dn.protData.clearkeys)?we.INITIALIZATION_DATA_TYPE_KEYIDS:we.INITIALIZATION_DATA_TYPE_CENC;vn.generateRequest(tr,dn.initData).then(function(){pn.debug("DRM: Session created.  SessionID = "+on.getSessionId()),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:on})}).catch(function(ur){Ir(on),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+ur.name)})})},updateKeySession:function(dn,vn){var on=dn.session;Mn.isClearKey(At)&&(vn=vn.toJWK()),on.update(vn).then(function(){Kn.trigger(Ln.KEY_SESSION_UPDATED)}).catch(function(tr){Kn.trigger(Ln.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"Error sending update() message! "+tr.name,dn)})})},loadKeySession:function(dn){if(!At||!Ot)throw new Error("Can not load sessions until you have selected a key system");for(var vn=dn.sessionId,on=0;on<Yt.length;on++)if(vn===Yt[on].sessionId)return void pn.warn("DRM: Ignoring session ID because we have already seen it!");var tr=Ot.createSession(dn.sessionType),ur=er(tr,dn);tr.load(vn).then(function(xr){xr?(pn.debug("DRM: Session loaded.  SessionID = "+ur.getSessionId()),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:ur})):(Ir(ur),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+vn+")")}))}).catch(function(xr){Ir(ur),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+vn+")! "+xr.name)})})},removeKeySession:function(dn){dn.session.remove().then(function(){pn.debug("DRM: Session removed.  SessionID = "+dn.getSessionId()),Kn.trigger(Ln.KEY_SESSION_REMOVED,{data:dn.getSessionId()})},function(vn){Kn.trigger(Ln.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+dn.getSessionId()+"). "+vn.name})})},closeKeySession:function(dn){fr(dn).catch(function(vn){Ir(dn),Kn.trigger(Ln.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+dn.getSessionId()+") "+vn.name})})},stop:function(){for(var dn,vn=0;vn<Yt.length;vn++)(dn=Yt[vn]).getUsable()||(fr(dn),Ir(dn))},reset:function(){var dn,vn=Yt.length;vn!==0?function(){for(var on=function(ur){Ir(ur),Yt.length===0&&(Xt?(Xt.removeEventListener("encrypted",wn),Xt.setMediaKeys(null).then(function(){Kn.trigger(Ln.TEARDOWN_COMPLETE)})):Kn.trigger(Ln.TEARDOWN_COMPLETE))},tr=0;tr<vn;tr++)(function(ur){fr(dn),on(ur)})(dn=Yt[tr])}():Kn.trigger(Ln.TEARDOWN_COMPLETE)}},pn=fn.getLogger(gn),At=null,Xt=null,Ot=null,Yt=[],Mn=Tt(zn).getInstance(),wn={handleEvent:function(dn){if(dn.type==="encrypted"&&dn.initData){var vn=ArrayBuffer.isView(dn.initData)?dn.initData.buffer:dn.initData;Kn.trigger(Ln.NEED_KEY,{key:new Gn(vn,dn.initDataType)})}}},gn}gr[we.PLAYREADY_KEYSTEM_STRING]=[we.PLAYREADY_KEYSTEM_STRING,we.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],gr[we.WIDEVINE_KEYSTEM_STRING]=[we.WIDEVINE_KEYSTEM_STRING],gr[we.CLEARKEY_KEYSTEM_STRING]=[we.CLEARKEY_KEYSTEM_STRING],fi.__dashjs_factory_name="ProtectionModel_21Jan2015";var ao=dashjs.FactoryMaker.getClassFactory(fi);function Hr(ln){ln=ln||{};var gn,pn,At,Xt,Ot,Yt,wn,Mn,zn,Kn=this.context,Ln=ln.eventBus,fn=ln.events,Xe=ln.debug,Un=ln.api;function fr(){try{for(var er=0;er<wn.length;er++)Ir(wn[er]);At&&At.removeEventListener(Un.needkey,Mn),Ln.trigger(fn.TEARDOWN_COMPLETE)}catch(dn){Ln.trigger(fn.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+dn.message})}}function Ir(er){var dn=er.session;dn.removeEventListener(Un.error,er),dn.removeEventListener(Un.message,er),dn.removeEventListener(Un.ready,er),dn.removeEventListener(Un.close,er);for(var vn=0;vn<wn.length;vn++)if(wn[vn]===er){wn.splice(vn,1);break}dn[Un.release]()}function Vr(){var er=null,dn=function(){At.removeEventListener("loadedmetadata",er),At[Un.setMediaKeys](Ot),Ln.trigger(fn.VIDEO_ELEMENT_SELECTED)};At.readyState>=1?dn():(er=dn.bind(this),At.addEventListener("loadedmetadata",er))}return gn={getAllInitData:function(){for(var er=[],dn=0;dn<wn.length;dn++)er.push(wn[dn].initData);return er},getSessions:function(){return wn},requestKeySystemAccess:function(er){return new Promise(function(dn,vn){for(var on=!1,tr=0;tr<er.length;tr++)for(var ur=er[tr].ks.systemString,xr=er[tr].configs,Rr=null,di=null,Ui=0;Ui<xr.length;Ui++){var ni=xr[Ui].audioCapabilities,li=xr[Ui].videoCapabilities;if(ni&&ni.length!==0){Rr=[];for(var vi=0;vi<ni.length;vi++)window[Un.MediaKeys].isTypeSupported(ur,ni[vi].contentType)&&Rr.push(ni[vi])}if(li&&li.length!==0){di=[];for(var ri=0;ri<li.length;ri++)window[Un.MediaKeys].isTypeSupported(ur,li[ri].contentType)&&di.push(li[ri])}if(!(!Rr&&!di||Rr&&Rr.length===0||di&&di.length===0)){on=!0;var vs=new P(Rr,di),Ao=zn.getKeySystemBySystemString(ur),Yo=new Gr(Ao,vs);Ln.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{data:Yo}),dn({data:Yo});break}}if(!on){var Ri="Key system access denied! -- No valid audio/video content configurations detected!";Ln.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ri}),vn({error:Ri})}})},selectKeySystem:function(er){return new Promise(function(dn,vn){try{Ot=er.mediaKeys=new window[Un.MediaKeys](er.keySystem.systemString),Xt=er.keySystem,Yt=er,At&&Vr(),dn(Xt)}catch(on){vn({error:"Error selecting keys system ("+Xt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(er){At!==er&&(At&&At.removeEventListener(Un.needkey,Mn),(At=er)&&(At.addEventListener(Un.needkey,Mn),Ot&&Vr()))},createKeySession:function(er){if(!Xt||!Ot||!Yt)throw new Error("Can not create sessions until you have selected a key system");var dn=null;if(Yt.ksConfiguration.videoCapabilities&&Yt.ksConfiguration.videoCapabilities.length>0&&(dn=Yt.ksConfiguration.videoCapabilities[0]),dn===null&&Yt.ksConfiguration.audioCapabilities&&Yt.ksConfiguration.audioCapabilities.length>0&&(dn=Yt.ksConfiguration.audioCapabilities[0]),dn===null)throw new Error("Can not create sessions for unknown content types.");var vn=dn.contentType,on=Ot.createSession(vn,new Uint8Array(er.initData),er.cdmData?new Uint8Array(er.cdmData):null),tr=function(ur,xr){return{session:ur,keyId:xr.keyId,initData:xr.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Rr){switch(Rr.type){case Un.error:Ln.trigger(fn.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"KeyError",this)});break;case Un.message:var di=ArrayBuffer.isView(Rr.message)?Rr.message.buffer:Rr.message;Ln.trigger(fn.INTERNAL_KEY_MESSAGE,{data:new Sr(this,di,Rr.destinationURL)});break;case Un.ready:pn.debug("DRM: Key added."),Ln.trigger(fn.KEY_ADDED);break;case Un.close:pn.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Ln.trigger(fn.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(on,er);on.addEventListener(Un.error,tr),on.addEventListener(Un.message,tr),on.addEventListener(Un.ready,tr),on.addEventListener(Un.close,tr),wn.push(tr),pn.debug("DRM: Session created.  SessionID = "+tr.getSessionId()),Ln.trigger(fn.KEY_SESSION_CREATED,{data:tr})},updateKeySession:function(er,dn){var vn=er.session;zn.isClearKey(Xt)?vn.update(new Uint8Array(dn.toJWK())):vn.update(new Uint8Array(dn)),Ln.trigger(fn.KEY_SESSION_UPDATED)},closeKeySession:Ir,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:fr,reset:fr},pn=Xe.getLogger(gn),At=null,Xt=null,Ot=null,Yt=null,wn=[],zn=Tt(Kn).getInstance(),Mn={handleEvent:function(er){if(er.type===Un.needkey&&er.initData){var dn=ArrayBuffer.isView(er.initData)?er.initData.buffer:er.initData;Ln.trigger(fn.NEED_KEY,{key:new Gn(dn,"cenc")})}}},gn}Hr.__dashjs_factory_name="ProtectionModel_3Feb2014";var so=dashjs.FactoryMaker.getClassFactory(Hr);function xi(ln){ln=ln||{};var gn,pn,At,Xt,Ot,Yt,wn,Mn,zn,Kn=this.context,Ln=ln.eventBus,fn=ln.events,Xe=ln.debug,Un=ln.api,fr=ln.errHandler;function Ir(){At&&dn();for(var vn=0;vn<wn.length;vn++)Vr(wn[vn]);Ln.trigger(fn.TEARDOWN_COMPLETE)}function Vr(vn){try{At[Un.cancelKeyRequest](Xt.systemString,vn.sessionId)}catch(on){Ln.trigger(fn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+vn.sessionId+") "+on.message})}}function er(vn,on){if(on&&vn){for(var tr=vn.length,ur=0;ur<tr;ur++)if(vn[ur].sessionId==on)return vn[ur];return null}return null}function dn(){At.removeEventListener(Un.keyerror,zn),At.removeEventListener(Un.needkey,zn),At.removeEventListener(Un.keymessage,zn),At.removeEventListener(Un.keyadded,zn)}return gn={getAllInitData:function(){for(var vn=[],on=0;on<Yt.length;on++)vn.push(Yt[on].initData);for(var tr=0;tr<wn.length;tr++)vn.push(wn[tr].initData);return vn},getSessions:function(){return wn.concat(Yt)},requestKeySystemAccess:function(vn){return new Promise(function(on,tr){var ur=At;ur||(ur=document.createElement("video"));for(var xr=!1,Rr=0;Rr<vn.length;Rr++)for(var di=vn[Rr].ks.systemString,Ui=vn[Rr].configs,ni=null,li=0;li<Ui.length;li++){var vi=Ui[li].videoCapabilities;if(vi&&vi.length!==0){ni=[];for(var ri=0;ri<vi.length;ri++)ur.canPlayType(vi[ri].contentType,di)!==""&&ni.push(vi[ri])}if(ni&&(!ni||ni.length!==0)){xr=!0;var vs=new P(null,ni),Ao=Ot.getKeySystemBySystemString(di),Yo=new Gr(Ao,vs);Ln.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{data:Yo}),on({data:Yo});break}}if(!xr){var Ri="Key system access denied! -- No valid audio/video content configurations detected!";Ln.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ri}),tr({error:Ri})}})},selectKeySystem:function(vn){return Xt=vn.keySystem,Promise.resolve(Xt)},setMediaElement:function(vn){if(At!==vn){if(At){dn();for(var on=0;on<wn.length;on++)Vr(wn[on]);wn=[]}(At=vn)&&(At.addEventListener(Un.keyerror,zn),At.addEventListener(Un.needkey,zn),At.addEventListener(Un.keymessage,zn),At.addEventListener(Un.keyadded,zn),Ln.trigger(fn.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(vn){if(!Xt)throw new Error("Can not create sessions until you have selected a key system");if(Mn||wn.length===0){var on={sessionId:null,keyId:vn.keyId,initData:vn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return Yt.push(on),At[Un.generateKeyRequest](Xt.systemString,new Uint8Array(vn.initData)),on}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(vn,on){var tr=vn.sessionId;if(Ot.isClearKey(Xt))for(var ur=0;ur<on.keyPairs.length;ur++)At[Un.addKey](Xt.systemString,on.keyPairs[ur].key,on.keyPairs[ur].keyID,tr);else At[Un.addKey](Xt.systemString,new Uint8Array(on),new Uint8Array(vn.initData),tr);Ln.trigger(fn.KEY_SESSION_UPDATED)},closeKeySession:Vr,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Ir,reset:Ir},pn=Xe.getLogger(gn),At=null,Xt=null,Yt=[],wn=[],Ot=Tt(Kn).getInstance(),zn={handleEvent:function(vn){var on=null;switch(vn.type){case Un.needkey:var tr=ArrayBuffer.isView(vn.initData)?vn.initData.buffer:vn.initData;Ln.trigger(fn.NEED_KEY,{key:new Gn(tr,"cenc")});break;case Un.keyerror:if((on=er(wn,vn.sessionId))||(on=er(Yt,vn.sessionId)),on){var ur=_.MEDIA_KEYERR_CODE,xr="";switch(vn.errorCode.code){case 1:ur=_.MEDIA_KEYERR_UNKNOWN_CODE,xr+="MEDIA_KEYERR_UNKNOWN - "+_.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:ur=_.MEDIA_KEYERR_CLIENT_CODE,xr+="MEDIA_KEYERR_CLIENT - "+_.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:ur=_.MEDIA_KEYERR_SERVICE_CODE,xr+="MEDIA_KEYERR_SERVICE - "+_.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:ur=_.MEDIA_KEYERR_OUTPUT_CODE,xr+="MEDIA_KEYERR_OUTPUT - "+_.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:ur=_.MEDIA_KEYERR_HARDWARECHANGE_CODE,xr+="MEDIA_KEYERR_HARDWARECHANGE - "+_.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:ur=_.MEDIA_KEYERR_DOMAIN_CODE,xr+="MEDIA_KEYERR_DOMAIN - "+_.MEDIA_KEYERR_DOMAIN_MESSAGE}xr+="  System Code = "+vn.systemCode,Ln.trigger(fn.KEY_ERROR,{error:new I.Z(ur,xr,on)})}else pn.error("No session token found for key error");break;case Un.keyadded:(on=er(wn,vn.sessionId))||(on=er(Yt,vn.sessionId)),on?(pn.debug("DRM: Key added."),Ln.trigger(fn.KEY_ADDED,{data:on})):pn.debug("No session token found for key added");break;case Un.keymessage:if((Mn=vn.sessionId!==null&&vn.sessionId!==void 0)?!(on=er(wn,vn.sessionId))&&Yt.length>0&&(on=Yt.shift(),wn.push(on),on.sessionId=vn.sessionId,Ln.trigger(fn.KEY_SESSION_CREATED,{data:on})):Yt.length>0&&(on=Yt.shift(),wn.push(on),Yt.length!==0&&fr.error(new I.Z(_.MEDIA_KEY_MESSAGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),on){var Rr=ArrayBuffer.isView(vn.message)?vn.message.buffer:vn.message;on.keyMessage=Rr,Ln.trigger(fn.INTERNAL_KEY_MESSAGE,{data:new Sr(on,Rr,vn.defaultURL)})}else pn.warn("No session token found for key message")}}},gn}xi.__dashjs_factory_name="ProtectionModel_01b";var Fi=dashjs.FactoryMaker.getClassFactory(xi),no=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],uo=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Ni(){var ln,gn=this.context;function pn(At,Xt){for(var Ot=0;Ot<Xt.length;Ot++){var Yt=Xt[Ot];if(typeof At[Yt[Object.keys(Yt)[0]]]=="function")return Yt}return null}return ln={createProtectionSystem:function(At){var Xt=null,Ot=Tt(gn).getInstance();Ot.setConfig({debug:At.debug,BASE64:At.BASE64,settings:At.settings}),Ot.initialize();var Yt=function(wn){var Mn=wn.debug,zn=Mn.getLogger(ln),Kn=wn.eventBus,Ln=wn.errHandler,fn=wn.videoModel?wn.videoModel.getElement():null;return fn&&fn.onencrypted===void 0||fn&&fn.mediaKeys===void 0?pn(fn,uo)?(zn.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),so(gn).create({debug:Mn,eventBus:Kn,events:wn.events,api:pn(fn,uo)})):pn(fn,no)?(zn.info("EME detected on this user agent! (ProtectionModel_01b)"),Fi(gn).create({debug:Mn,eventBus:Kn,errHandler:Ln,events:wn.events,api:pn(fn,no)})):(zn.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(zn.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),ao(gn).create({debug:Mn,eventBus:Kn,events:wn.events}))}(At);return!Xt&&Yt&&(Xt=ce(gn).create({protectionModel:Yt,protectionKeyController:Ot,eventBus:At.eventBus,debug:At.debug,events:At.events,BASE64:At.BASE64,constants:At.constants,cmcdModel:At.cmcdModel,customParametersModel:At.customParametersModel,settings:At.settings}),At.capabilities.setEncryptedMediaSupported(!0)),Xt}}}Ni.__dashjs_factory_name="Protection";var nr=dashjs.FactoryMaker.getClassFactory(Ni);nr.events=Ft,nr.errors=_,dashjs.FactoryMaker.updateClassFactory(Ni.__dashjs_factory_name,nr);var ju=nr},2068:function(b,p,w){var F=w(5448),C={DEFAULT:.5,STRONG:1,WEAK:0};function E(P,m,T){var U,M;return U=P===void 0?-1:P,M=function(_){var I=C.DEFAULT;return _!==C.DEFAULT&&_!==C.STRONG&&_!==C.WEAK||(I=_),I}(T),{quality:U,reason:m===void 0?null:m,priority:M}}E.__dashjs_factory_name="SwitchRequest";var y=F.Z.getClassFactory(E);y.NO_CHANGE=-1,y.PRIORITY=C,F.Z.updateClassFactory(E.__dashjs_factory_name,y),p.Z=y},1767:function(b,p,w){var F=w(5628),C=w(6535),E=w(7423),y=w(895),P=w(6070),m=w(3112),T=w(1914),U=w(5435),M=w(5448),_=w(2068),I=w(3393),x="qualitySwitchRules",Z="abandonFragmentRules";function Y(Q){Q=Q||{};var se,R,X=this.context,ce=Q.mediaPlayerModel,oe=Q.customParametersModel,me=Q.dashMetrics,Ce=Q.settings;function Je(qe){return qe.filter(function(st){return st.quality>_.Z.NO_CHANGE})}function we(qe){var st,ft,be,He,vt,Re={},Ye=null;if(qe.length!==0){for(Re[_.Z.PRIORITY.STRONG]={quality:_.Z.NO_CHANGE,reason:null},Re[_.Z.PRIORITY.WEAK]={quality:_.Z.NO_CHANGE,reason:null},Re[_.Z.PRIORITY.DEFAULT]={quality:_.Z.NO_CHANGE,reason:null},st=0,ft=qe.length;st<ft;st+=1)(be=qe[st]).quality!==_.Z.NO_CHANGE&&(Re[be.priority].quality===_.Z.NO_CHANGE||Re[be.priority].quality>be.quality)&&(Re[be.priority].quality=be.quality,Re[be.priority].reason=be.reason||null);return Re[_.Z.PRIORITY.WEAK].quality!==_.Z.NO_CHANGE&&(Ye=Re[_.Z.PRIORITY.WEAK]),Re[_.Z.PRIORITY.DEFAULT].quality!==_.Z.NO_CHANGE&&(Ye=Re[_.Z.PRIORITY.DEFAULT]),Re[_.Z.PRIORITY.STRONG].quality!==_.Z.NO_CHANGE&&(Ye=Re[_.Z.PRIORITY.STRONG]),Ye&&(He=Ye.quality,vt=Ye.reason),(0,_.Z)(X).create(He,vt)}}return{initialize:function(){se=[],R=[],Ce.get().streaming.abr.useDefaultABRRules&&(Ce.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_L2A?se.push((0,T.Z)(X).create({dashMetrics:me,settings:Ce})):Ce.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_LoLP?se.push((0,U.Z)(X).create({dashMetrics:me})):(se.push((0,m.Z)(X).create({dashMetrics:me,mediaPlayerModel:ce,settings:Ce})),se.push((0,F.Z)(X).create({dashMetrics:me})),Ce.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&se.push((0,C.Z)(X).create({dashMetrics:me,settings:Ce})),Ce.get().streaming.abr.additionalAbrRules.switchHistoryRule&&se.push((0,P.Z)(X).create()),Ce.get().streaming.abr.additionalAbrRules.droppedFramesRule&&se.push((0,y.Z)(X).create()),Ce.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&R.push((0,E.Z)(X).create({dashMetrics:me,mediaPlayerModel:ce,settings:Ce})))),oe.getAbrCustomRules().forEach(function(qe){qe.type===x&&se.push(qe.rule(X).create()),qe.type===Z&&R.push(qe.rule(X).create())})},reset:function(){[se,R].forEach(function(qe){qe&&qe.length&&qe.forEach(function(st){return st.reset&&st.reset()})}),se=[],R=[]},getMaxQuality:function(qe){return we(Je(se.map(function(st){return st.getMaxIndex(qe)})))||(0,_.Z)(X).create()},getMinSwitchRequest:we,shouldAbandonFragment:function(qe,st){var ft=we(Je(R.map(function(be){return be.shouldAbandon(qe,st)})));return ft&&(ft.reason.forceAbandon=!0),ft||(0,_.Z)(X).create()},getQualitySwitchRules:function(){return se}}}Y.__dashjs_factory_name="ABRRulesCollection";var $=M.Z.getClassFactory(Y);$.QUALITY_SWITCH_RULES=x,$.ABANDON_FRAGMENT_RULES=Z,M.Z.updateSingletonFactory(Y.__dashjs_factory_name,$),p.Z=$},7423:function(b,p,w){var F=w(2068),C=w(5448),E=w(6398);function y(P){P=P||{};var m,T,U,M,_,I=this.context,x=P.mediaPlayerModel,Z=P.dashMetrics,Y=P.settings;function $(){U={},M={},_=[]}return m={shouldAbandon:function(Q){var se=(0,F.Z)(I).create(F.Z.NO_CHANGE,{name:y.__dashjs_factory_name});if(!(Q&&Q.hasOwnProperty("getMediaInfo")&&Q.hasOwnProperty("getMediaType")&&Q.hasOwnProperty("getCurrentRequest")&&Q.hasOwnProperty("getRepresentationInfo")&&Q.hasOwnProperty("getAbrController")))return se;var R,X,ce=Q.getMediaInfo(),oe=Q.getMediaType(),me=Q.getStreamInfo(),Ce=me?me.id:null,Je=Q.getCurrentRequest();if(!isNaN(Je.index)){R=oe,X=Je.index,U[R]=U[R]||{},U[R][X]=U[R][X]||{};var we=x.getStableBufferTime();if(Z.getCurrentBufferLevel(oe)>we)return se;var qe=U[oe][Je.index];if(qe===null||Je.firstByteDate===null||M.hasOwnProperty(qe.id))return se;if(qe.firstByteTime===void 0&&(_[oe]=[],qe.firstByteTime=Je.firstByteDate.getTime(),qe.segmentDuration=Je.duration,qe.bytesTotal=Je.bytesTotal,qe.id=Je.index),qe.bytesLoaded=Je.bytesLoaded,qe.elapsedTime=new Date().getTime()-qe.firstByteTime,qe.bytesLoaded>0&&qe.elapsedTime>0&&function(ot,Ht){_[ot]=_[ot]||[],_[ot].push(Ht)}(oe,Math.round(8*qe.bytesLoaded/qe.elapsedTime)),_[oe].length>=Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&qe.elapsedTime>Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&qe.bytesLoaded<qe.bytesTotal){var st=_[oe].reduce(function(ot,Ht){return ot+Ht},0);if(qe.measuredBandwidthInKbps=Math.round(st/_[oe].length),qe.estimatedTimeOfDownload=+(8*qe.bytesTotal/qe.measuredBandwidthInKbps/1e3).toFixed(2),qe.estimatedTimeOfDownload<qe.segmentDuration*Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||Q.getRepresentationInfo().quality===0)return se;if(!M.hasOwnProperty(qe.id)){var ft=Q.getAbrController(),be=qe.bytesTotal-qe.bytesLoaded,He=ft.getBitrateList(ce),vt=ft.getQualityForBitrate(ce,qe.measuredBandwidthInKbps*Y.get().streaming.abr.bandwidthSafetyFactor,Ce),Re=ft.getMinAllowedIndexFor(oe,Ce),Ye=Re!==void 0?Math.max(Re,vt):vt;be>qe.bytesTotal*He[Ye].bitrate/He[ft.getQualityFor(oe,Ce)].bitrate&&(se.quality=Ye,se.reason.throughput=qe.measuredBandwidthInKbps,se.reason.fragmentID=qe.id,se.reason.rule=this.getClassName(),M[qe.id]=qe,T.debug("["+oe+"] frag id",qe.id," is asking to abandon and switch to quality to ",Ye," measured bandwidth was",qe.measuredBandwidthInKbps),delete U[oe][qe.id])}}else qe.bytesLoaded===qe.bytesTotal&&delete U[oe][qe.id]}return se},reset:$},T=(0,E.Z)(I).getInstance().getLogger(m),$(),m}y.__dashjs_factory_name="AbandonRequestsRule",p.Z=C.Z.getClassFactory(y)},3112:function(b,p,w){var F=w(3860),C=w(2068),E=w(5448),y=w(7855),P=w(5595),m=w(8512),T=w(6398),U=w(8825),M=w(3393),_=10;function I(x){x=x||{};var Z,Y,$,Q=this.context,se=x.dashMetrics,R=x.mediaPlayerModel,X=(0,P.Z)(Q).getInstance();function ce(Ye,ot,Ht){var Bt=Ht.reduce(function(Ne,ne,Be){return ne>Ht[Ne]?Be:Ne},0);if(Bt===0)return null;var Et=Math.max(Ye,_+2*ot.length),Dt=(Ht[Bt]-1)/(Et/_-1);return{gp:Dt,Vp:_/Dt}}function oe(Ye){Ye.placeholderBuffer=0,Ye.mostAdvancedSegmentStart=NaN,Ye.lastSegmentWasReplacement=!1,Ye.lastSegmentStart=NaN,Ye.lastSegmentDurationS=NaN,Ye.lastSegmentRequestTimeMs=NaN,Ye.lastSegmentFinishTimeMs=NaN}function me(Ye,ot){var Ht=R.getStableBufferTime();if(Ye.stableBufferTime!==Ht){var Bt=ce(Ht,Ye.bitrates,Ye.utilities);if(Bt.Vp!==Ye.Vp||Bt.gp!==Ye.gp){var Et=se.getCurrentBufferLevel(ot),Dt=Et+Ye.placeholderBuffer;Dt-=_,Dt*=Bt.Vp/Ye.Vp,Dt+=_,Ye.stableBufferTime=Ht,Ye.Vp=Bt.Vp,Ye.gp=Bt.gp,Ye.placeholderBuffer=Math.max(0,Dt-Et)}}}function Ce(Ye,ot){return Ye.Vp*(Ye.utilities[ot]+Ye.gp)}function Je(Ye,ot){for(var Ht=Ye.bitrates[ot],Bt=Ye.utilities[ot],Et=0,Dt=ot-1;Dt>=0;--Dt)if(Ye.utilities[Dt]<Ye.utilities[ot]){var Ne=Ye.bitrates[Dt],ne=Ye.utilities[Dt],Be=Ye.Vp*(Ye.gp+(Ht*ne-Ne*Bt)/(Ht-Ne));Et=Math.max(Et,Be)}return Et}function we(Ye){var ot=Ye.mediaType===M.Z.AUDIO?[M.Z.AUDIO]:$;for(var Ht in ot)$.hasOwnProperty(Ht)&&$[Ht].state===2&&($[Ht].placeholderBuffer=0)}function qe(){for(var Ye in $)if($.hasOwnProperty(Ye)){var ot=$[Ye];ot.state!==0&&(ot.state=1,oe(ot))}}function st(Ye){if(Ye&&Ye.chunk&&Ye.chunk.mediaInfo){var ot=$[Ye.chunk.mediaInfo.type];if(ot&&ot.state!==0){var Ht=Ye.chunk.start;isNaN(ot.mostAdvancedSegmentStart)||Ht>ot.mostAdvancedSegmentStart?(ot.mostAdvancedSegmentStart=Ht,ot.lastSegmentWasReplacement=!1):ot.lastSegmentWasReplacement=!0,ot.lastSegmentStart=Ht,ot.lastSegmentDurationS=Ye.chunk.duration,ot.lastQuality=Ye.chunk.quality,be(ot,Ye.chunk.mediaInfo.type)}}}function ft(Ye){if(Ye&&Ye.metric===F.Z.HTTP_REQUEST&&Ye.value&&Ye.value.type===y.w.MEDIA_SEGMENT_TYPE&&Ye.value.trace&&Ye.value.trace.length){var ot=$[Ye.mediaType];ot&&ot.state!==0&&(ot.lastSegmentRequestTimeMs=Ye.value.trequest.getTime(),ot.lastSegmentFinishTimeMs=Ye.value._tfinish.getTime(),be(ot,Ye.mediaType))}}function be(Ye,ot){if(!isNaN(Ye.lastSegmentStart)&&!isNaN(Ye.lastSegmentRequestTimeMs)&&!isNaN(Ye.placeholderBuffer)){if(Ye.placeholderBuffer*=.99,!isNaN(Ye.lastSegmentFinishTimeMs)){var Ht=se.getCurrentBufferLevel(ot)+.001*(Ye.lastSegmentFinishTimeMs-Ye.lastSegmentRequestTimeMs),Bt=Ce(Ye,Ye.lastQuality),Et=Math.max(0,Bt-Ht);Ye.placeholderBuffer=Math.min(Et,Ye.placeholderBuffer)}Ye.lastSegmentWasReplacement&&!isNaN(Ye.lastSegmentDurationS)&&(Ye.placeholderBuffer+=Ye.lastSegmentDurationS),Ye.lastSegmentStart=NaN,Ye.lastSegmentRequestTimeMs=NaN}}function He(Ye){if(Ye){var ot=$[Ye.mediaType];ot&&ot.state!==0&&(ot.abrQuality=Ye.newQuality)}}function vt(Ye){if(Ye){var ot=$[Ye.mediaType];if(ot&&ot.state!==0){var Ht,Bt=se.getCurrentBufferLevel(Ye.mediaType);Ht=ot.abrQuality>0?Je(ot,ot.abrQuality):_;var Et=Math.max(0,Ht-Bt);ot.placeholderBuffer=Math.min(ot.placeholderBuffer,Et)}}}function Re(){$={}}return Z={getMaxIndex:function(Ye){var ot=(0,C.Z)(Q).create();if(!(Ye&&Ye.hasOwnProperty("getMediaInfo")&&Ye.hasOwnProperty("getMediaType")&&Ye.hasOwnProperty("getScheduleController")&&Ye.hasOwnProperty("getStreamInfo")&&Ye.hasOwnProperty("getAbrController")&&Ye.hasOwnProperty("useBufferOccupancyABR")))return ot;var Ht=Ye.getMediaInfo(),Bt=Ye.getMediaType(),Et=Ye.getScheduleController(),Dt=Ye.getStreamInfo(),Ne=Ye.getAbrController(),ne=Ne.getThroughputHistory(),Be=Dt?Dt.id:null,L=Dt&&Dt.manifestInfo&&Dt.manifestInfo.isDynamic,D=Ye.useBufferOccupancyABR();if(ot.reason=ot.reason||{},!D)return ot;Et.setTimeToLoadDelay(0);var G=function(nt){var ht=nt.getMediaType(),_t=$[ht];return _t?_t.state!==0&&me(_t,ht):(_t=function(Tt){var Mt={},_n=Tt.getMediaInfo().bitrateList.map(function(Gn){return Gn.bandwidth}),rn=function(Gn){return Gn.map(function(Sr){return Math.log(Sr)})}(_n);rn=rn.map(function(Gn){return Gn-rn[0]+1});var cn=R.getStableBufferTime(),Ft=ce(cn,_n,rn);return Ft?(Mt.state=1,Mt.bitrates=_n,Mt.utilities=rn,Mt.stableBufferTime=cn,Mt.Vp=Ft.Vp,Mt.gp=Ft.gp,Mt.lastQuality=0,oe(Mt)):Mt.state=0,Mt}(nt),$[ht]=_t),_t}(Ye);if(G.state===0)return ot;var K,ge=se.getCurrentBufferLevel(Bt),de=ne.getAverageThroughput(Bt,L),Ke=ne.getSafeAverageThroughput(Bt,L),wt=ne.getAverageLatency(Bt);if(ot.reason.state=G.state,ot.reason.throughput=de,ot.reason.latency=wt,isNaN(de))return ot;switch(G.state){case 1:K=Ne.getQualityForBitrate(Ht,Ke,Be,wt),ot.quality=K,ot.reason.throughput=Ke,G.placeholderBuffer=Math.max(0,Je(G,K)-ge),G.lastQuality=K,!isNaN(G.lastSegmentDurationS)&&ge>=G.lastSegmentDurationS&&(G.state=2);break;case 2:(function(nt,ht){var _t=Date.now();if(isNaN(nt.lastSegmentFinishTimeMs)){if(!isNaN(nt.lastCallTimeMs)){var Tt=.001*(_t-nt.lastCallTimeMs);nt.placeholderBuffer+=Math.max(0,Tt)}}else{var Mt=.001*(_t-nt.lastSegmentFinishTimeMs);nt.placeholderBuffer+=Math.max(0,Mt)}nt.lastCallTimeMs=_t,nt.lastSegmentStart=NaN,nt.lastSegmentRequestTimeMs=NaN,nt.lastSegmentFinishTimeMs=NaN,me(nt,ht)})(G,Bt),K=function(nt,ht){for(var _t=nt.bitrates.length,Tt=NaN,Mt=NaN,_n=0;_n<_t;++_n){var rn=(nt.Vp*(nt.utilities[_n]+nt.gp)-ht)/nt.bitrates[_n];(isNaN(Mt)||rn>=Mt)&&(Mt=rn,Tt=_n)}return Tt}(G,ge+G.placeholderBuffer);var lt=Ne.getQualityForBitrate(Ht,Ke,Be,wt);K>G.lastQuality&&K>lt&&(K=Math.max(lt,G.lastQuality));var ut=Math.max(0,ge+G.placeholderBuffer-Ce(G,K));ut<=G.placeholderBuffer?(G.placeholderBuffer-=ut,ut=0):(ut-=G.placeholderBuffer,G.placeholderBuffer=0,K<Ne.getMaxAllowedIndexFor(Bt,Be)?Et.setTimeToLoadDelay(1e3*ut):ut=0),ot.quality=K,ot.reason.throughput=de,ot.reason.latency=wt,ot.reason.bufferLevel=ge,ot.reason.placeholderBuffer=G.placeholderBuffer,ot.reason.delay=ut,G.lastQuality=K;break;default:Y.debug("BOLA ABR rule invoked in bad state."),ot.quality=Ne.getQualityForBitrate(Ht,Ke,Be,wt),ot.reason.state=G.state,ot.reason.throughput=Ke,ot.reason.latency=wt,G.state=1,oe(G)}return ot},reset:function(){Re(),X.off(U.Z.BUFFER_EMPTY,we,Z),X.off(U.Z.PLAYBACK_SEEKING,qe,Z),X.off(U.Z.METRIC_ADDED,ft,Z),X.off(U.Z.QUALITY_CHANGE_REQUESTED,He,Z),X.off(U.Z.FRAGMENT_LOADING_ABANDONED,vt,Z),X.off(m.Z.MEDIA_FRAGMENT_LOADED,st,Z)}},Y=(0,T.Z)(Q).getInstance().getLogger(Z),Re(),X.on(U.Z.BUFFER_EMPTY,we,Z),X.on(U.Z.PLAYBACK_SEEKING,qe,Z),X.on(U.Z.METRIC_ADDED,ft,Z),X.on(U.Z.QUALITY_CHANGE_REQUESTED,He,Z),X.on(U.Z.FRAGMENT_LOADING_ABANDONED,vt,Z),X.on(m.Z.MEDIA_FRAGMENT_LOADED,st,Z),Z}I.__dashjs_factory_name="BolaRule",p.Z=E.Z.getClassFactory(I)},895:function(b,p,w){var F=w(5448),C=w(2068),E=w(6398);function y(){var P,m,T=this.context;return P={getMaxIndex:function(U){var M=(0,C.Z)(T).create();if(!U||!U.hasOwnProperty("getDroppedFramesHistory"))return M;var _=U.getDroppedFramesHistory(),I=U.getStreamInfo().id;if(_){var x=_.getFrameHistory(I);if(!x||x.length===0)return M;for(var Z=0,Y=0,$=C.Z.NO_CHANGE,Q=1;Q<x.length;Q++)if(x[Q]&&(Z=x[Q].droppedVideoFrames,(Y=x[Q].totalVideoFrames)>375&&Z/Y>.15)){$=Q-1,m.debug("index: "+$+" Dropped Frames: "+Z+" Total Frames: "+Y);break}return(0,C.Z)(T).create($,{droppedFrames:Z})}return M}},m=(0,E.Z)(T).getInstance().getLogger(P),P}y.__dashjs_factory_name="DroppedFramesRule",p.Z=F.Z.getClassFactory(y)},6535:function(b,p,w){var F=w(5595),C=w(8512),E=w(5448),y=w(6398),P=w(2068),m=w(3393),T=w(3860),U=w(8825);function M(_){_=_||{};var I,x,Z,Y=this.context,$=(0,F.Z)(Y).getInstance(),Q=_.dashMetrics;function se(){(Z={})[m.Z.VIDEO]={ignoreCount:2},Z[m.Z.AUDIO]={ignoreCount:2}}function R(){se()}function X(ce){isNaN(ce.startTime)||ce.mediaType!==m.Z.AUDIO&&ce.mediaType!==m.Z.VIDEO||Z[ce.mediaType].ignoreCount>0&&Z[ce.mediaType].ignoreCount--}return I={getMaxIndex:function(ce){var oe=(0,P.Z)(Y).create();if(!ce||!ce.hasOwnProperty("getMediaType"))return oe;(function(){if(!Q||!Q.hasOwnProperty("getCurrentBufferLevel")||!Q.hasOwnProperty("getCurrentBufferState"))throw new Error(m.Z.MISSING_CONFIG_ERROR)})();var me=ce.getMediaType(),Ce=Q.getCurrentBufferState(me),Je=ce.getRepresentationInfo().fragmentDuration,we=ce.getStreamInfo(),qe=we?we.id:null,st=ce.getScheduleController(),ft=we&&we.manifestInfo&&we.manifestInfo.isDynamic;if(function(Bt,Et){return!Bt&&Z[Et].ignoreCount>0}(st.getPlaybackController().getLowLatencyModeEnabled(),me)||!Je)return oe;if(Ce&&Ce.state===T.Z.BUFFER_EMPTY)x.debug("["+me+"] Switch to index 0; buffer is empty."),oe.quality=0,oe.reason="InsufficientBufferRule: Buffer is empty";else{var be=ce.getMediaInfo(),He=ce.getAbrController(),vt=He.getThroughputHistory(),Re=Q.getCurrentBufferLevel(me),Ye=vt.getAverageThroughput(me,ft),ot=vt.getAverageLatency(me),Ht=Ye*(Re/Je)*.5;oe.quality=He.getQualityForBitrate(be,Ht,qe,ot),oe.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return oe},reset:function(){se(),$.off(U.Z.PLAYBACK_SEEKING,R,I),$.off(C.Z.BYTES_APPENDED_END_FRAGMENT,X,I)}},x=(0,y.Z)(Y).getInstance().getLogger(I),se(),$.on(U.Z.PLAYBACK_SEEKING,R,I),$.on(C.Z.BYTES_APPENDED_END_FRAGMENT,X,I),I}M.__dashjs_factory_name="InsufficientBufferRule",p.Z=E.Z.getClassFactory(M)},1914:function(b,p,w){var F=w(3860),C=w(2068),E=w(5448),y=w(7855),P=w(5595),m=w(8512),T=w(6398),U=w(3393);function M(_){_=_||{};var I,x,Z,Y,$=this.context,Q=_.dashMetrics,se=(0,P.Z)($).getInstance();function R(qe){qe.placeholderBuffer=0,qe.mostAdvancedSegmentStart=NaN,qe.lastSegmentWasReplacement=!1,qe.lastSegmentStart=NaN,qe.lastSegmentDurationS=NaN,qe.lastSegmentRequestTimeMs=NaN,qe.lastSegmentFinishTimeMs=NaN,qe.lastSegmentUrl=""}function X(){for(var qe in x)if(x.hasOwnProperty(qe)){var st=x[qe];st.state!==0&&(st.state=1,R(st))}}function ce(qe){if(qe&&qe.chunk&&qe.chunk.mediaInfo){var st=x[qe.chunk.mediaInfo.type],ft=Z[qe.chunk.mediaInfo.type];if(st&&st.state!==0){var be=qe.chunk.start;isNaN(st.mostAdvancedSegmentStart)||be>st.mostAdvancedSegmentStart?(st.mostAdvancedSegmentStart=be,st.lastSegmentWasReplacement=!1):st.lastSegmentWasReplacement=!0,st.lastSegmentStart=be,st.lastSegmentDurationS=qe.chunk.duration,st.lastQuality=qe.chunk.quality,me(st,ft)}}}function oe(qe){if(qe&&qe.metric===F.Z.HTTP_REQUEST&&qe.value&&qe.value.type===y.w.MEDIA_SEGMENT_TYPE&&qe.value.trace&&qe.value.trace.length){var st=x[qe.mediaType],ft=Z[qe.mediaType];st&&st.state!==0&&(st.lastSegmentRequestTimeMs=qe.value.trequest.getTime(),st.lastSegmentFinishTimeMs=qe.value._tfinish.getTime(),me(st,ft))}}function me(qe,st){isNaN(qe.lastSegmentStart)||isNaN(qe.lastSegmentRequestTimeMs)||(st.segment_request_start_s=.001*qe.lastSegmentRequestTimeMs,st.segment_download_finish_s=.001*qe.lastSegmentFinishTimeMs,qe.lastSegmentStart=NaN,qe.lastSegmentRequestTimeMs=NaN)}function Ce(qe){if(qe&&qe.mediaType){var st=x[qe.mediaType];st&&st.state!==0&&(st.abrQuality=qe.newQuality)}}function Je(qe,st){if(qe.length!==st.length)return-1;for(var ft=0,be=0;be<qe.length;be++)ft+=qe[be]*st[be];return ft}function we(){x={},Z={}}return I={getMaxIndex:function(qe){var st,ft=(0,C.Z)($).create(),be=Math.pow(4,.99),He=Math.max(Math.pow(4,1),be*Math.sqrt(4)),vt=qe.getMediaInfo(),Re=qe.getMediaType(),Ye=vt.bitrateList.map(function(Ft){return Ft.bandwidth}),ot=Ye.length,Ht=qe.getScheduleController(),Bt=qe.getStreamInfo(),Et=qe.getAbrController(),Dt=Et.getThroughputHistory(),Ne=Bt&&Bt.manifestInfo&&Bt.manifestInfo.isDynamic,ne=qe.useL2AABR(),Be=Q.getCurrentBufferLevel(Re,!0),L=Dt.getSafeAverageThroughput(Re,Ne),D=Dt.getAverageThroughput(Re,Ne),G=Dt.getAverageLatency(Re),K=qe.getVideoModel().getPlaybackRate();if(!(qe&&qe.hasOwnProperty("getMediaInfo")&&qe.hasOwnProperty("getMediaType")&&qe.hasOwnProperty("getScheduleController")&&qe.hasOwnProperty("getStreamInfo")&&qe.hasOwnProperty("getAbrController")&&qe.hasOwnProperty("useL2AABR"))||(ft.reason=ft.reason||{},!ne||Re===U.Z.AUDIO))return ft;Ht.setTimeToLoadDelay(0);var ge=function(Ft){var Gn=Ft.getMediaType(),Sr=x[Gn];return Sr||(Sr=function(Gr){var gr={},fi=Gr.getMediaInfo(),ao=fi.bitrateList.map(function(Hr){return Hr.bandwidth/1e3});return gr.state=1,gr.bitrates=ao,gr.lastQuality=0,function(Hr){Hr&&Hr.type&&(Z[Hr.type]={},Z[Hr.type].w=[],Z[Hr.type].prev_w=[],Z[Hr.type].Q=0,Z[Hr.type].segment_request_start_s=0,Z[Hr.type].segment_download_finish_s=0,Z[Hr.type].B_target=1.5)}(fi),R(gr),gr}(Ft),x[Gn]=Sr),Sr}(qe);if(ge.state===0)return ft;var de=Z[Re];if(!de||(ft.reason.state=ge.state,ft.reason.throughput=D,ft.reason.latency=G,isNaN(D)))return ft;switch(ge.state){case 1:if(st=Et.getQualityForBitrate(vt,L,Bt.id,G),ft.quality=st,ft.reason.throughput=L,ge.lastQuality=st,!isNaN(ge.lastSegmentDurationS)&&Be>=de.B_target){ge.state=2,de.Q=be;for(var Ke=0;Ke<ot;++Ke)Ke===ge.lastQuality?de.prev_w[Ke]=1:de.prev_w[Ke]=0}break;case 2:var wt=[],lt=Q.getCurrentHttpRequest(Re).trace.reduce(function(Ft,Gn){return Ft+Gn.d},0),ut=Q.getCurrentHttpRequest(Re).trace.reduce(function(Ft,Gn){return Ft+Gn.b[0]},0),nt=Math.round(8*ut/lt),ht=Q.getCurrentHttpRequest(Re);if(nt<1&&(nt=1),ht.url===ge.lastSegmentUrl||ht.type===y.w.INIT_SEGMENT_TYPE)st=ge.lastQuality;else{for(var _t=ge.lastSegmentDurationS,Tt=1,Mt=0;Mt<ot;++Mt)Ye[Mt]=Ye[Mt]/1e3,K*Ye[Mt]>nt&&(Tt=-1),de.w[Mt]=de.prev_w[Mt]+Tt*(_t/(2*He))*((de.Q+be)*(K*Ye[Mt]/nt));de.w=function(Ft){for(var Gn=Ft.length,Sr=!1,Gr=[],gr=0;gr<Gn;++gr)Gr[gr]=Ft[gr];for(var fi=Ft.sort(function(no,uo){return uo-no}),ao=0,Hr=0,so=[],xi=0;xi<Gn-1;++xi)if((Hr=((ao+=fi[xi])-1)/(xi+1))>=fi[xi+1]){Sr=!0;break}Sr||(Hr=(ao+fi[Gn-1]-1)/Gn);for(var Fi=0;Fi<Gn;++Fi)so[Fi]=Math.max(Gr[Fi]-Hr,0);return so}(de.w);for(var _n=0;_n<ot;++_n)wt[_n]=de.w[_n]-de.prev_w[_n],de.prev_w[_n]=de.w[_n];de.Q=Math.max(0,de.Q-_t+_t*K*((Je(Ye,de.prev_w)+Je(Ye,wt))/nt));for(var rn=[],cn=0;cn<ot;++cn)rn[cn]=Math.abs(Ye[cn]-Je(de.w,Ye));(st=rn.indexOf(Math.min.apply(Math,rn)))>ge.lastQuality&&Ye[ge.lastQuality+1]<=nt&&(st=ge.lastQuality+1),Ye[st]>=nt&&(de.Q=2*Math.max(be,de.Q)),ge.lastSegmentUrl=ht.url}ft.quality=st,ft.reason.throughput=D,ft.reason.latency=G,ft.reason.bufferLevel=Be,ge.lastQuality=ft.quality;break;default:Y.debug("L2A ABR rule invoked in bad state."),ft.quality=Et.getQualityForBitrate(vt,L,Bt.id,G),ft.reason.state=ge.state,ft.reason.throughput=L,ft.reason.latency=G,ge.state=1,R(ge)}return ft},reset:function(){we(),se.off(m.Z.PLAYBACK_SEEKING,X,I),se.off(m.Z.MEDIA_FRAGMENT_LOADED,ce,I),se.off(m.Z.METRIC_ADDED,oe,I),se.off(m.Z.QUALITY_CHANGE_REQUESTED,Ce,I)}},Y=(0,T.Z)($).getInstance().getLogger(I),we(),se.on(m.Z.PLAYBACK_SEEKING,X,I),se.on(m.Z.MEDIA_FRAGMENT_LOADED,ce,I),se.on(m.Z.METRIC_ADDED,oe,I),se.on(m.Z.QUALITY_CHANGE_REQUESTED,Ce,I),I}M.__dashjs_factory_name="L2ARule",p.Z=E.Z.getClassFactory(M)},6070:function(b,p,w){var F=w(5448),C=w(6398),E=w(2068);function y(){var P,m,T=this.context;return P={getMaxIndex:function(U){for(var M=U?U.getSwitchHistory():null,_=M?M.getSwitchRequests():[],I=0,x=0,Z=0,Y=(0,E.Z)(T).create(),$=0;$<_.length;$++)if(_[$]!==void 0&&(I+=_[$].drops,x+=_[$].noDrops,Z+=_[$].dropSize,I+x>=6&&I/x>.075)){Y.quality=$>0&&_[$].drops>0?$-1:$,Y.reason={index:Y.quality,drops:I,noDrops:x,dropSize:Z},m.debug("Switch history rule index: "+Y.quality+" samples: "+(I+x)+" drops: "+I);break}return Y}},m=(0,C.Z)(T).getInstance().getLogger(P),P}y.__dashjs_factory_name="SwitchHistoryRule",p.Z=F.Z.getClassFactory(y)},5628:function(b,p,w){var F=w(5448),C=w(2068),E=w(3393),y=w(3860);function P(m){m=m||{};var T=this.context,U=m.dashMetrics;return{getMaxIndex:function(M){var _=(0,C.Z)(T).create();if(!(M&&M.hasOwnProperty("getMediaInfo")&&M.hasOwnProperty("getMediaType")&&M.hasOwnProperty("useBufferOccupancyABR")&&M.hasOwnProperty("getAbrController")&&M.hasOwnProperty("getScheduleController")))return _;(function(){if(!U||!U.hasOwnProperty("getCurrentBufferState"))throw new Error(E.Z.MISSING_CONFIG_ERROR)})();var I=M.getMediaInfo(),x=M.getMediaType(),Z=U.getCurrentBufferState(x),Y=M.getScheduleController(),$=M.getAbrController(),Q=M.getStreamInfo(),se=Q?Q.id:null,R=Q&&Q.manifestInfo?Q.manifestInfo.isDynamic:null,X=$.getThroughputHistory(),ce=X.getSafeAverageThroughput(x,R),oe=X.getAverageLatency(x),me=M.useBufferOccupancyABR();return isNaN(ce)||!Z||me||$.getAbandonmentStateFor(se,x)!==y.Z.ABANDON_LOAD&&(Z.state===y.Z.BUFFER_LOADED||R)&&(_.quality=$.getQualityForBitrate(I,ce,se,oe),Y.setTimeToLoadDelay(0),_.reason={throughput:ce,latency:oe}),_},reset:function(){}}}P.__dashjs_factory_name="ThroughputRule",p.Z=F.Z.getClassFactory(P)},4722:function(b,p,w){var F=w(5448),C=w(6398);function E(){var y,P,m,T,U,M,_,I,x,Z=this.context;function Y(){m=null,T=1,U=100,M=0,_=null,I=null,x="dynamic_weight_selection"}function $(){var ce=0;if(m)for(var oe=0;oe<m.length;oe++){var me=m[oe];me.state.throughput>ce&&(ce=me.state.throughput)}return ce}function Q(ce,oe,me){var Ce=ce.map(function(Je,we){return me[we]*Math.pow(Je-oe[we],2)}).reduce(function(Je,we){return Je+we});return(Ce<0?-1:1)*Math.sqrt(Math.abs(Ce))}function se(ce,oe){return Q([ce.state.throughput,ce.state.latency,ce.state.rebuffer,ce.state.switch],[oe.state.throughput,oe.state.latency,oe.state.rebuffer,oe.state.switch],[1,1,1,1])}function R(ce,oe,me){for(var Ce=0;Ce<oe.length;Ce++){var Je=oe[Ce],we=se(Je,ce);X(Je,me,Math.exp(-1*Math.pow(we,2)/(2*Math.pow(.1,2))))}}function X(ce,oe,me){var Ce=ce.state,Je=[.01,.01,.01,.01];Ce.throughput=Ce.throughput+(oe[0]-Ce.throughput)*Je[0]*me,Ce.latency=Ce.latency+(oe[1]-Ce.latency)*Je[1]*me,Ce.rebuffer=Ce.rebuffer+(oe[2]-Ce.rebuffer)*Je[2]*me,Ce.switch=Ce.switch+(oe[3]-Ce.switch)*Je[3]*me}return y={getNextQuality:function(ce,oe,me,Ce,Je,we,qe){var st=me,ft=Ce,be=oe,He=function(de){if(!m){m=[];var Ke=de.bitrateList,wt=[];M=Ke[0].bandwidth,Ke.forEach(function(ht){wt.push(ht.bandwidth),ht.bandwidth<M&&(M=ht.bandwidth)}),nt=wt.map(function(ht){return Math.pow(ht,2)}).reduce(function(ht,_t){return ht+_t}),T=Math.sqrt(nt);for(var lt=0;lt<Ke.length;lt++){var ut={qualityIndex:lt,bitrate:Ke[lt].bandwidth,state:{throughput:Ke[lt].bandwidth/T,latency:0,rebuffer:0,switch:0}};m.push(ut)}I=function(ht){var _t=[],Tt=function(ju){for(var ln=[],gn=0;gn<ju;gn++){var pn=[Math.random()*$(),Math.random(),Math.random(),Math.random()];ln.push(pn)}return ln}(Math.pow(ht.length,2));_t.push(Tt[0]);for(var Mt=[1,1,1,1],_n=1;_n<ht.length;_n++){for(var rn=null,cn=null,Ft=0;Ft<Tt.length;Ft++){for(var Gn=Tt[Ft],Sr=null,Gr=0;Gr<_t.length;Gr++){var gr=Q(Gn,_t[Gr],Mt);(Sr===null||gr<Sr)&&(Sr=gr)}(cn===null||Sr>cn)&&(rn=Gn,cn=Sr)}_t.push(rn)}for(var fi=null,ao=null,Hr=0;Hr<_t.length;Hr++){for(var so=0,xi=0;xi<_t.length;xi++)Hr!==xi&&(so+=Q(_t[Hr],_t[xi],Mt));(fi===null||so>fi)&&(fi=so,ao=Hr)}var Fi=[];for(Fi.push(_t[ao]),_t.splice(ao,1);_t.length>0;){for(var no=null,uo=null,Ni=0;Ni<_t.length;Ni++){var nr=Q(Fi[0],_t[Ni],Mt);(no===null||nr<no)&&(no=nr,uo=Ni)}Fi.push(_t[uo]),_t.splice(uo,1)}return Fi}(m)}var nt;return m}(ce),vt=oe/T;vt>1&&(vt=$()),me/=U,P.debug("getNextQuality called throughput:".concat(vt," latency:").concat(me," bufferSize:").concat(Ce," currentQualityIndex:").concat(we," playbackRate:").concat(Je));var Re=He[we],Ye=Re.bitrate*qe.getSegmentDuration()/be,ot=Math.max(0,Ye-ft);if(ft-Ye<qe.getMinBuffer())return P.debug("Buffer is low for bitrate= ".concat(Re.bitrate," downloadTime=").concat(Ye," currentBuffer=").concat(ft," rebuffer=").concat(ot)),function(de,Ke){var wt=0,lt=de;if(m)for(var ut=0;ut<m.length;ut++){var nt=m[ut];nt.bitrate<de.bitrate&&nt.bitrate>wt&&Ke>nt.bitrate&&(wt=nt.bitrate,lt=nt)}return lt}(Re,be).qualityIndex;switch(x){case"manual_weight_selection":_=[.4,.4,.4,.4];break;case"random_weight_selection":(function(de){_=function(Ke,wt){for(var lt=[],ut=Math.sqrt(2/Ke),nt=0;nt<4;nt++)lt.push(Math.random()*ut);return _=lt}(de.length)})(He);break;default:(function(de,Ke,wt,lt,ut,nt,ht){_||(_=I[I.length-1]);var _t=de.findWeightVector(Ke,wt,lt,ut,nt,ht);_t!==null&&_t!==-1&&(_=_t)})(qe,He,st,ft,ot,be,Je)}for(var Ht=null,Bt=null,Et=null,Dt=0;Dt<He.length;Dt++){var Ne=He[Dt],ne=Ne.state,Be=[ne.throughput,ne.latency,ne.rebuffer,ne.switch],L=_.slice(),D=qe.getNextBufferWithBitrate(Ne.bitrate,ft,be),G=D<qe.getMinBuffer();G&&P.debug("Buffer is low for bitrate=".concat(Ne.bitrate," downloadTime=").concat(Ye," currentBuffer=").concat(ft," nextBuffer=").concat(D)),(Ne.bitrate>oe-1e4||G)&&Ne.bitrate!==M&&(L[0]=100);var K=Q(Be,[vt,0,0,0],L);(Ht===null||K<Ht)&&(Ht=K,Bt=Ne.qualityIndex,Et=Ne)}var ge=Math.abs(Re.bitrate-Et.bitrate)/T;return R(Re,He,[vt,me,ot,ge]),R(Et,He,[vt,0,0,ge]),Bt},reset:function(){Y()}},P=(0,C.Z)(Z).getInstance().getLogger(y),Y(),y}E.__dashjs_factory_name="LearningAbrController",p.Z=F.Z.getClassFactory(E)},5317:function(b,p,w){var F=w(5448),C=w(2298);function E(){var y,P,m,T,U;function M(){P=null,m=null,T=null,U=null}function _(x,Z,Y,$){var Q=new C.Z;return Q.type=x,Q.weights.bitrateReward=Z||1,Q.weights.bitrateSwitchPenalty=1,Q.weights.rebufferPenalty=Y||1e3,Q.weights.latencyPenalty=[],Q.weights.latencyPenalty.push({threshold:1.1,penalty:.05*$}),Q.weights.latencyPenalty.push({threshold:1e8,penalty:.1*Y}),Q.weights.playbackSpeedPenalty=$||200,Q}function I(x,Z,Y,$,Q){Q.bitrateWSum+=Q.weights.bitrateReward*x,Q.lastBitrate&&(Q.bitrateSwitchWSum+=Q.weights.bitrateSwitchPenalty*Math.abs(x-Q.lastBitrate)),Q.lastBitrate=x,Q.rebufferWSum+=Q.weights.rebufferPenalty*Z;for(var se=0;se<Q.weights.latencyPenalty.length;se++){var R=Q.weights.latencyPenalty[se];if(Y<=R.threshold){Q.latencyWSum+=R.penalty*Y;break}}Q.playbackSpeedWSum+=Q.weights.playbackSpeedPenalty*Math.abs(1-$),Q.totalQoe=Q.bitrateWSum-Q.bitrateSwitchWSum-Q.rebufferWSum-Q.latencyWSum-Q.playbackSpeedWSum}return y={setupPerSegmentQoe:function(x,Z,Y){P=_("segment",x,Z,Y),m=x,T=Z,U=Y},logSegmentMetrics:function(x,Z,Y,$){P&&I(x,Z,Y,$,P)},getPerSegmentQoe:function(){return P},calculateSingleUseQoe:function(x,Z,Y,$){var Q=null;return m&&T&&U&&(Q=_("segment",m,T,U)),Q?(I(x,Z,Y,$,Q),Q.totalQoe):0},reset:function(){M()}},M(),y}E.__dashjs_factory_name="LoLpQoeEvaluator",p.Z=F.Z.getClassFactory(E)},5435:function(b,p,w){var F=w(6398),C=w(5448),E=w(4722),y=w(5317),P=w(2068),m=w(3860),T=w(6523),U=w(3393);function M(_){var I,x,Z,Y,$=(_=_||{}).dashMetrics,Q=this.context;return x={getMaxIndex:function(se){try{var R=(0,P.Z)(Q).create(),X=se.getMediaInfo().type,ce=se.getAbrController(),oe=se.getStreamInfo(),me=ce.getQualityFor(X,oe.id),Ce=se.getMediaInfo(),Je=$.getCurrentBufferState(X),we=se.getScheduleController(),qe=$.getCurrentBufferLevel(X,!0),st=oe&&oe.manifestInfo?oe.manifestInfo.isDynamic:null,ft=we.getPlaybackController(),be=ft.getCurrentLiveLatency();if(!se.useLoLPABR()||X===U.Z.AUDIO)return R;be||(be=0);var He=ft.getPlaybackRate(),vt=ce.getThroughputHistory().getSafeAverageThroughput(X,st);if(I.debug("Throughput ".concat(Math.round(vt)," kbps")),isNaN(vt)||!Je||ce.getAbandonmentStateFor(oe.id,X)===m.Z.ABANDON_LOAD)return R;for(var Re=Ce.bitrateList,Ye=se.getRepresentationInfo().fragmentDuration,ot=Re[0].bandwidth/1e3,Ht=Re[Re.length-1].bandwidth/1e3,Bt=0;Bt<Re.length;Bt++){var Et=Re[Bt].bandwidth/1e3;Et>Ht?Ht=Et:Et<ot&&(ot=Et)}var Dt=Re[me].bandwidth/1e3,Ne=$.getCurrentHttpRequest(X,!0),ne=(Ne.tresponse.getTime()-Ne.trequest.getTime())/1e3,Be=ne>Ye?ne-Ye:0;Y.setupPerSegmentQoe(Ye,Ht,ot),Y.logSegmentMetrics(Dt,Be,be,He);var L=(0,T.Z)(Q).create({targetLatency:1.5,bufferMin:.3,segmentDuration:Ye,qoeEvaluator:Y});return R.quality=Z.getNextQuality(Ce,1e3*vt,be,qe,He,me,L),R.reason={throughput:vt,latency:be},R.priority=P.Z.PRIORITY.STRONG,we.setTimeToLoadDelay(0),R.quality!==me&&I.debug("[TgcLearningRule]["+X+"] requesting switch to index: ",R.quality,"Average throughput",Math.round(vt),"kbps"),R}catch(D){throw D}},reset:function(){Z.reset(),Y.reset()}},I=(0,F.Z)(Q).getInstance().getLogger(x),Z=(0,E.Z)(Q).create(),Y=(0,y.Z)(Q).create(),x}M.__dashjs_factory_name="LoLPRule",p.Z=C.Z.getClassFactory(M)},6523:function(b,p,w){var F=w(5448);function C(E){var y,P,m,T,U=E.targetLatency,M=E.bufferMin,_=E.segmentDuration,I=E.qoeEvaluator;function x(){return _}function Z(Y,$){var Q=x();return $>Q?Y-Q:Y+Q-$}return y={getMinBuffer:function(){return M},getSegmentDuration:x,getNextBufferWithBitrate:function(Y,$,Q){return Z($,Y*_/Q)},getNextBuffer:Z,findWeightVector:function(Y,$,Q,se,R,X){var ce=null,oe=null,me=null,Ce=Math.abs($-m);return Y.forEach(function(Je){P.forEach(function(we){we[0];var qe=we[1],st=we[2],ft=(we[3],Je.bitrate*_/R),be=Z(Q,ft),He=(st===0?10:1/st)*Math.max(1e-5,ft-be),vt=(qe===0?10:1/qe)*Je.state.latency,Re=I.calculateSingleUseQoe(Je.bitrate,He,vt,X);(ce===null||Re>ce)&&function(Ye,ot,Ht){return!(Ye>U+Ht)&&ot>=M}($,be,Ce)&&(ce=Re,oe=we,me=Je.bitrate)})}),oe===null&&me===null&&(oe=-1),m=$,oe}},P=function Y($,Q,se){if(se===Q)return $;for(var R=$.length,X=0;X<R;X++)for(var ce=$.shift(),oe=0;oe<T.length;oe++)$.push(ce.concat(T[oe]));return Y($,Q,se+1)}((T=[.2,.4,.6,.8,1]).map(function(Y){return[Y]}),4,1),m=0,y}C.__dashjs_factory_name="LoLpWeightSelector",p.Z=F.Z.getClassFactory(C)},2298:function(b,p){p.Z=function w(){(function(F,C){if(!(F instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(b,p,w){w.d(p,{Y:function(){return I}});var F=w(3393),C=w(1553),E=w(5448),y=w(2128),P=w(2594),m=w(7387),T=w(7417),U=w(9032),M=w(9326),_=w(7802),I=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function x(Z){var Y,$,Q,se,R,X,ce,oe,me=this.context,Ce=Z.adapter,Je=Z.baseURLController,we=Z.streamInfo,qe=Z.timelineConverter,st=Z.debug,ft=Z.eventBus,be=Z.events,He=Z.dashConstants,vt=(0,P.Z)(me).getInstance();function Re(ot,Ht){var Bt=new y.Z;Bt.id=ot.id,Bt.bitrate=ot.bandwidth,Bt.width=ot.width,Bt.height=ot.height,Bt.tilesHor=1,Bt.tilesVert=1,ot.essentialProperties&&ot.essentialProperties.forEach(function(Et){if(I.indexOf(Et.schemeIdUri)>=0&&Et.value){var Dt=Et.value.split("x");Dt.length!==2||isNaN(Dt[0])||isNaN(Dt[1])||(Bt.tilesHor=parseInt(Dt[0],10),Bt.tilesVert=parseInt(Dt[1],10))}}),Ht?X.updateSegmentData(ot).then(function(Et){(function(Dt,Ne,ne){var Be=[],L=function(D,G){var K,ge,de,Ke,wt=[],lt=0;for(K=0,ge=D.segments.length;K<ge;K++)de=D.segments[K],(Ke=(0,m.TJ)(qe,Ce.getIsDynamic(),G,de.startTime,de.duration,de.timescale,de.media,de.mediaRange,lt))&&(wt.push(Ke),Ke=null,lt++);return wt}(ne,Ne);Ne.segments=L,Dt.segmentDuration=Ne.segments[0].duration,Dt.readThumbnail=function(D,G){var K=null;Be.some(function(ge){if(ge.start<=D&&ge.end>D)return K=ge.url,!0}),K?G(K):Ne.segments.some(function(ge){if(ge.mediaStartTime<=D&&ge.mediaStartTime+ge.duration>D){var de=Je.resolve(Ne.path);return ce.load({method:"get",url:de.url,request:{range:ge.mediaRange,responseType:"arraybuffer"},onload:function(Ke){var wt=oe.getSamplesInfo(Ke.target.response),lt=new Blob([Ke.target.response.slice(wt.sampleList[0].offset,wt.sampleList[0].offset+wt.sampleList[0].size)],{type:"image/jpeg"}),ut=window.URL.createObjectURL(lt);Be.push({start:ge.mediaStartTime,end:ge.mediaStartTime+ge.duration,url:ut}),G&&G(ut)}}),!0}})}})(Bt,ot,Et)}):(Bt.startNumber=ot.startNumber,Bt.segmentDuration=ot.segmentDuration,Bt.timescale=ot.timescale,Bt.templateUrl=function(Et){var Dt=vt.isRelative(Et.media)?vt.resolve(Et.media,Je.resolve(Et.path).url):Et.media;return Dt?(0,m.Aj)(Dt,Et.id):""}(ot)),Bt.tilesHor>0&&Bt.tilesVert>0&&(Bt.widthPerTile=Bt.width/Bt.tilesHor,Bt.heightPerTile=Bt.height/Bt.tilesVert,$.push(Bt))}function Ye(){$=[],se=-1,R=null}return Y={getTracks:function(){return $},addTracks:function(){if(we&&Ce&&(R=Ce.getMediaInfoForType(we,F.Z.IMAGE))){var ot=Ce.getVoRepresentations(R);ot&&ot.length>0&&ot.forEach(function(Ht){(Ht.segmentInfoType===C.Z.SEGMENT_TEMPLATE&&Ht.segmentDuration>0&&Ht.media||Ht.segmentInfoType===C.Z.SEGMENT_TIMELINE)&&Re(Ht),Ht.segmentInfoType===C.Z.SEGMENT_BASE&&Re(Ht,!0)}),$.length>0&&$.sort(function(Ht,Bt){return Ht.bitrate-Bt.bitrate})}},reset:Ye,setTrackByIndex:function(ot){$&&$.length!==0&&(ot>=$.length&&(ot=$.length-1),se=ot)},getCurrentTrack:function(){return se<0?null:$[se]},getCurrentTrackIndex:function(){return se},getThumbnailRequestForTime:function(ot){for(var Ht,Bt=Ce.getVoRepresentations(R),Et=0;Et<Bt.length;Et++)if($[se].id===Bt[Et].id){Ht=Bt[Et];break}return Q.getSegmentRequestForTime(R,Ht,ot)}},Ye(),ce=(0,U.Z)(me).create({}),oe=(0,T.Z)(me).getInstance(),X=(0,_.Z)(me).create({events:be,eventBus:ft,streamInfo:we,timelineConverter:qe,dashConstants:He,dashMetrics:Z.dashMetrics,segmentBaseController:Z.segmentBaseController,type:F.Z.IMAGE}),(Q=(0,M.Z)(me).create({streamInfo:we,type:F.Z.IMAGE,timelineConverter:qe,segmentsController:X,baseURLController:Je,debug:st,eventBus:ft,events:be,dashConstants:He,urlUtils:vt})).initialize(!!Ce&&Ce.getIsDynamic()),Y}x.__dashjs_factory_name="ThumbnailTracks",p.Z=E.Z.getClassFactory(x)},7417:function(b,p,w){var F=w(6398),C=w(8260),E=w(5448),y=w(6934),P=w(9597);function m(){var T,U,M=this.context;function _(Z){if(!Z)return null;Z.fileStart===void 0&&(Z.fileStart=0);var Y=y.parseBuffer(Z),$=(0,C.Z)(M).create();return $.setData(Y),$}function I(Z,Y){return Z[Y+3]>>>0|Z[Y+2]<<8>>>0|Z[Y+1]<<16>>>0|Z[Y]<<24>>>0}function x(Z,Y){return String.fromCharCode(Z[Y++])+String.fromCharCode(Z[Y++])+String.fromCharCode(Z[Y++])+String.fromCharCode(Z[Y])}return U={parse:_,findLastTopIsoBoxCompleted:function(Z,Y,$){if($===void 0&&($=0),!Y||$+8>=Y.byteLength)return new P.Z(0,!1);for(var Q,se=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,R=0;$<se.byteLength;){var X=I(se,$),ce=x(se,$+4);if(X===0)break;$+X<=se.byteLength&&(Z.indexOf(ce)>=0?Q=new P.Z($,!0,X):R=$+X),$+=X}return Q||new P.Z(R,!1)},getMediaTimescaleFromMoov:function(Z){var Y=_(Z),$=Y?Y.getBox("mdhd"):void 0;return $?$.timescale:NaN},getSamplesInfo:function(Z){if(!Z||Z.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var Y,$,Q,se,R,X,ce,oe,me,Ce,Je,we,qe,st,ft,be,He=_(Z),vt=He.getBoxes("moof"),Re=He.getBoxes("mfhd");ft=He.getBoxes("moof").length,st=Re[Re.length-1].sequence_number,$=0,R=[];var Ye=-1,ot=-1;for(Ce=0;Ce<vt.length;Ce++){var Ht=vt[Ce],Bt=Ht.getChildBoxes("traf");for(oe=0;oe<Bt.length;oe++){var Et=Bt[oe],Dt=Et.getChildBox("tfhd"),Ne=Et.getChildBox("tfdt");se=Ne.baseMediaDecodeTime;var ne=Et.getChildBoxes("trun"),Be=Et.getChildBoxes("subs");for(me=0;me<ne.length;me++){var L=ne[me];for($=L.sample_count,qe=(Dt.base_data_offset||0)+(L.data_offset||0),ce=0;ce<$;ce++){Y=(X=L.samples[ce]).sample_duration!==void 0?X.sample_duration:Dt.default_sample_duration,Q=X.sample_size!==void 0?X.sample_size:Dt.default_sample_size;var D={dts:se,cts:se+(X.sample_composition_time_offset!==void 0?X.sample_composition_time_offset:0),duration:Y,offset:Ht.offset+qe,size:Q,subSizes:[Q]};if(Be)for(Je=0;Je<Be.length;Je++){var G=Be[Je];if(Ye<G.entry_count-1&&ce>ot&&(Ye++,ot+=G.entries[Ye].sample_delta),ce==ot){D.subSizes=[];var K=G.entries[Ye];for(we=0;we<K.subsample_count;we++)D.subSizes.push(K.subsamples[we].subsample_size)}}R.push(D),qe+=Q,se+=Y}}be=se-Ne.baseMediaDecodeTime}}return{sampleList:R,lastSequenceNumber:st,totalDuration:be,numSequences:ft}},findInitRange:function(Z){var Y=null,$=_(Z);if(!$)return Y;var Q=$.getBox("ftyp"),se=$.getBox("moov");return T.debug("Searching for initialization."),se&&se.isComplete&&(Y=(Q?Q.offset:se.offset)+"-"+(se.offset+se.size-1),T.debug("Found the initialization.  Range: "+Y)),Y},parsePayload:function(Z,Y,$){if($===void 0&&($=0),!Y||$+8>=Y.byteLength)return new P.Z(0,!1);for(var Q,se=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,R=0;$<se.byteLength;){var X=I(se,$),ce=x(se,$+4);if(X===0)break;$+X<=se.byteLength&&(Z.indexOf(ce)>=0?Q=new P.Z($,!0,X,ce):R=$+X),$+=X}return Q||new P.Z(R,!1)}},T=(0,F.Z)(M).getInstance().getLogger(U),U}m.__dashjs_factory_name="BoxParser",p.Z=E.Z.getSingletonFactory(m)},1715:function(b,p,w){w.d(p,{B:function(){return P}});var F=w(5448),C=w(7803),E=w(3393),y=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function P(){var T="ManagedMediaSource"in window,U="WebKitMediaSource"in window,M="MediaSource"in window;return T||U||M}function m(){var T,U,M;return T={setConfig:function(_){_&&_.settings&&(U=_.settings)},supportsMediaSource:P,supportsEncryptedMedia:function(){return M},supportsCodec:function(_,I){return I!==E.Z.AUDIO&&I!==E.Z.VIDEO?Promise.resolve(!0):function(x,Z){return U.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(x.codec&&Z===E.Z.AUDIO||Z===E.Z.VIDEO&&x.codec&&x.width&&x.height&&x.bitrate&&x.framerate)}(_,I)?function(x,Z){return new Promise(function(Y){if(x&&x.codec){var $={type:"media-source"};$[Z]={},$[Z].contentType=x.codec,$[Z].width=x.width,$[Z].height=x.height,$[Z].bitrate=parseInt(x.bitrate),$[Z].framerate=parseFloat(x.framerate),navigator.mediaCapabilities.decodingInfo($).then(function(Q){Y(Q.supported)}).catch(function(){Y(!1)})}else Y(!1)})}(_,I):function(x){return new Promise(function(Z){if(x&&x.codec){var Y=x.codec;x.width&&x.height&&(Y+=';width="'+x.width+'";height="'+x.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(Y)||"MediaSource"in window&&MediaSource.isTypeSupported(Y)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(Y)?Z(!0):Z(!1)}else Z(!1)})}(_)},setEncryptedMediaSupported:function(_){M=_},supportsEssentialProperty:function(_){try{return C.Y.indexOf(_.schemeIdUri)!==-1||E.Z.FONT_DOWNLOAD_DVB_SCHEME===_.schemeIdUri}catch(I){return!0}},codecRootCompatibleWithCodec:function(_,I){for(var x,Z=_.split(".")[0],Y=I.indexOf(Z)===0,$=0;$<y.length;$++)if(y[$].codec===Z){x=y[$];break}return x?Y||x.compatibleCodecs.some(function(Q){return I.indexOf(Q)===0}):Y}},M=!1,T}m.__dashjs_factory_name="Capabilities",p.Z=F.Z.getSingletonFactory(m)},2295:function(b,p,w){var F=w(5448),C=w(3106);function E(){return{customTimeRangeArray:[],length:0,add:function(y,P){var m;for(m=0;m<this.customTimeRangeArray.length&&y>this.customTimeRangeArray[m].start;m++);for(this.customTimeRangeArray.splice(m,0,{start:y,end:P}),m=0;m<this.customTimeRangeArray.length-1;m++)this.mergeRanges(m,m+1)&&m--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(y,P){for(var m=0;m<this.customTimeRangeArray.length;m++)if(y<=this.customTimeRangeArray[m].start&&P>=this.customTimeRangeArray[m].end)this.customTimeRangeArray.splice(m,1),m--;else{if(y>this.customTimeRangeArray[m].start&&P<this.customTimeRangeArray[m].end){this.customTimeRangeArray.splice(m+1,0,{start:P,end:this.customTimeRangeArray[m].end}),this.customTimeRangeArray[m].end=y;break}y>this.customTimeRangeArray[m].start&&y<this.customTimeRangeArray[m].end?this.customTimeRangeArray[m].end=y:P>this.customTimeRangeArray[m].start&&P<this.customTimeRangeArray[m].end&&(this.customTimeRangeArray[m].start=P)}this.length=this.customTimeRangeArray.length},mergeRanges:function(y,P){var m=this.customTimeRangeArray[y],T=this.customTimeRangeArray[P];return m.start<=T.start&&T.start<=m.end&&m.end<=T.end?(m.end=T.end,this.customTimeRangeArray.splice(P,1),!0):T.start<=m.start&&m.start<=T.end&&T.end<=m.end?(m.start=T.start,this.customTimeRangeArray.splice(P,1),!0):T.start<=m.start&&m.start<=T.end&&m.end<=T.end?(this.customTimeRangeArray.splice(y,1),!0):m.start<=T.start&&T.start<=m.end&&T.end<=m.end&&(this.customTimeRangeArray.splice(P,1),!0)},start:function(y){return(0,C.SE)(y),y>=this.customTimeRangeArray.length||y<0?NaN:this.customTimeRangeArray[y].start},end:function(y){return(0,C.SE)(y),y>=this.customTimeRangeArray.length||y<0?NaN:this.customTimeRangeArray[y].end}}}E.__dashjs_factory_name="CustomTimeRanges",p.Z=F.Z.getClassFactory(E)},5:function(b,p,w){var F=w(5448);function C(){var E,y=/^[a-z][a-z0-9+\-_.]*:/i,P=/^https?:\/\//i,m=/^https:\/\//i,T=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,U=function(Q,se){try{return new window.URL(Q,se).toString()}catch(R){return Q}},M=function(Q,se){var R=_;if(!se||!Z(Q))return Q;Y(Q)&&(R=I),$(Q)&&(R=x);var X=R(se),ce=X.charAt(X.length-1)!=="/"&&Q.charAt(0)!=="/"?"/":"";return[X,Q].join(ce)};function _(Q){var se=Q.indexOf("/"),R=Q.lastIndexOf("/");return se!==-1?R===se+1?Q:(Q.indexOf("?")!==-1&&(Q=Q.substring(0,Q.indexOf("?"))),Q.substring(0,R+1)):""}function I(Q){var se=Q.match(T);return se?se[1]:""}function x(Q){var se=Q.match(y);return se?se[0]:""}function Z(Q){return!y.test(Q)}function Y(Q){return Z(Q)&&Q.charAt(0)==="/"}function $(Q){return Q.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),E=U}catch(Q){}finally{E=E||M}}(),{parseBaseUrl:_,parseOrigin:I,parseScheme:x,isRelative:Z,isPathAbsolute:Y,isSchemeRelative:$,isHTTPURL:function(Q){return P.test(Q)},isHTTPS:function(Q){return m.test(Q)},removeHostname:function(Q){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(Q)[2].substring(1)},resolve:function(Q,se){return E(Q,se)}}}C.__dashjs_factory_name="DefaultURLUtils",p.Z=F.Z.getSingletonFactory(C)},8260:function(b,p,w){var F=w(2839),C=w(5448);function E(){var y;function P(T){var U=[];if(!T||!y||typeof y.fetchAll!="function")return U;for(var M,_=y.fetchAll(T),I=0,x=_.length;I<x;I++)(M=m(_[I]))&&U.push(M);return U}function m(T){if(!T)return null;var U=new F.Z(T);return T.hasOwnProperty("_incomplete")&&(U.isComplete=!T._incomplete),U}return{getBox:function(T){return T&&y&&y.boxes&&y.boxes.length!==0&&typeof y.fetch=="function"?m(y.fetch(T)):null},getBoxes:P,setData:function(T){y=T},getLastBox:function(){if(!y||!y.boxes||!y.boxes.length)return null;var T=P(y.boxes[y.boxes.length-1].type);return T.length>0?T[T.length-1]:null}}}E.__dashjs_factory_name="IsoFile",p.Z=C.Z.getClassFactory(E)},7473:function(b,p,w){w.d(p,{k:function(){return C}});var F=w(5448);function C(y,P){var m={url:y.url,method:y.method,headers:Object.assign({},y.headers),credentials:y.withCredentials?"include":void 0,range:y.request.range};return Promise.resolve(P.modifyRequest(m)).then(function(){return Object.assign(y,m,{withCredentials:m.credentials==="include"})})}function E(){return{modifyRequest:null,modifyRequestURL:function(y){return y},modifyRequestHeader:function(y,P){return P.url,y}}}E.__dashjs_factory_name="RequestModifier",p.Z=F.Z.getSingletonFactory(E)},3106:function(b,p,w){w.d(p,{PS:function(){return E},SE:function(){return y}});var F=w(3393);function C(P){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},C(P)}function E(P,m){if(C(P)!==m)throw F.Z.BAD_ARGUMENT_ERROR}function y(P){if(P===null||isNaN(P)||P%1!=0)throw F.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(b,p,w){var F=w(5448),C=w(5);function E(){var P,m=[],T=this.context;function U(M,_,I){var x=function(Z){var Y;for(Y=0;Y<m.length;Y++)if(m[Y].regex.test(Z))return m[Y].utils;return P}(I||_);return x&&typeof x[M]=="function"?x[M](_,I):P[M](_,I)}return P=(0,C.Z)(T).getInstance(),{registerUrlRegex:function(M,_){m.push({regex:M,utils:_})},parseBaseUrl:function(M){return U("parseBaseUrl",M)},parseOrigin:function(M){return U("parseOrigin",M)},parseScheme:function(M){return U("parseScheme",M)},isRelative:function(M){return U("isRelative",M)},isPathAbsolute:function(M){return U("isPathAbsolute",M)},isSchemeRelative:function(M){return U("isSchemeRelative",M)},isHTTPURL:function(M){return U("isHTTPURL",M)},isHTTPS:function(M){return U("isHTTPS",M)},removeHostname:function(M){return U("removeHostname",M)},resolve:function(M,_){return U("resolve",M,_)}}}E.__dashjs_factory_name="URLUtils";var y=F.Z.getSingletonFactory(E);p.Z=y},5459:function(b,p){p.Z=function w(F,C,E){(function(y,P){if(!(y instanceof P))throw new TypeError("Cannot call a class as a function")})(this,w),this.code=F||null,this.message=C||null,this.data=E||null}},3186:function(b,p,w){var F=w(7855);function C(y,P){for(var m=0;m<P.length;m++){var T=P[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(y,T.key,T)}}var E=function(){function y(T){(function(U,M){if(!(U instanceof M))throw new TypeError("Cannot call a class as a function")})(this,y),this.action=y.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=T||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var P,m;return P=y,(m=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===F.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(T){this.type=T&&T.init?F.w.INIT_SEGMENT_TYPE:F.w.MEDIA_SEGMENT_TYPE,this.url=T&&T.url?T.url:null,this.range=T&&T.range?T.range.start+"-"+T.range.end:null,this.mediaType=T&&T.mediaType?T.mediaType:null}}])&&C(P.prototype,m),y}();E.ACTION_DOWNLOAD="download",E.ACTION_COMPLETE="complete",p.Z=E},2839:function(b,p){function w(C,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}var F=function(){function C(P){if(function(x,Z){if(!(x instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,C),this.offset=P._offset,this.type=P.type,this.size=P.size,this.boxes=[],P.boxes)for(var m=0;m<P.boxes.length;m++)this.boxes.push(new C(P.boxes[m]));switch(this.isComplete=!0,P.type){case"sidx":if(this.timescale=P.timescale,this.earliest_presentation_time=P.earliest_presentation_time,this.first_offset=P.first_offset,this.references=P.references,P.references){this.references=[];for(var T=0;T<P.references.length;T++){var U={reference_type:P.references[T].reference_type,referenced_size:P.references[T].referenced_size,subsegment_duration:P.references[T].subsegment_duration};this.references.push(U)}}break;case"emsg":this.id=P.id,this.version=P.version===1?1:0,this.value=P.value,this.timescale=P.timescale,this.scheme_id_uri=P.scheme_id_uri,this.presentation_time_delta=P.version===1?P.presentation_time:P.presentation_time_delta,this.event_duration=P.event_duration,this.message_data=P.message_data;break;case"mdhd":this.timescale=P.timescale;break;case"mfhd":this.sequence_number=P.sequence_number;break;case"subs":this.entry_count=P.entry_count,this.entries=P.entries;break;case"tfhd":this.base_data_offset=P.base_data_offset,this.sample_description_index=P.sample_description_index,this.default_sample_duration=P.default_sample_duration,this.default_sample_size=P.default_sample_size,this.default_sample_flags=P.default_sample_flags,this.flags=P.flags;break;case"tfdt":this.version=P.version,this.baseMediaDecodeTime=P.baseMediaDecodeTime,this.flags=P.flags;break;case"trun":if(this.sample_count=P.sample_count,this.first_sample_flags=P.first_sample_flags,this.data_offset=P.data_offset,this.flags=P.flags,this.samples=P.samples,P.samples){this.samples=[];for(var M=0,_=P.samples.length;M<_;M++){var I={sample_size:P.samples[M].sample_size,sample_duration:P.samples[M].sample_duration,sample_composition_time_offset:P.samples[M].sample_composition_time_offset};this.samples.push(I)}}break;case"prft":this.version=P.version,this.reference_track_ID=P.reference_track_ID,this.ntp_timestamp_sec=P.ntp_timestamp_sec,this.ntp_timestamp_frac=P.ntp_timestamp_frac,this.media_time=P.media_time,this.flags=P.flags}}var E,y;return E=C,(y=[{key:"getChildBox",value:function(P){for(var m=0;m<this.boxes.length;m++)if(this.boxes[m].type===P)return this.boxes[m]}},{key:"getChildBoxes",value:function(P){for(var m=[],T=0;T<this.boxes.length;T++)this.boxes[T].type===P&&m.push(this.boxes[T]);return m}}])&&w(E.prototype,y),C}();p.Z=F},9597:function(b,p){p.Z=function w(F,C,E){(function(y,P){if(!(y instanceof P))throw new TypeError("Cannot call a class as a function")})(this,w),this.lastCompletedOffset=F,this.found=C,this.size=E}},2128:function(b,p){p.Z=function w(){(function(F,C){if(!(F instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(b,p,w){function F(y,P){if(!(y instanceof P))throw new TypeError("Cannot call a class as a function")}w.d(p,{O:function(){return E},w:function(){return C}});var C=function y(){F(this,y),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},E=function y(){F(this,y),this.s=null,this.d=null,this.b=[]};C.GET="GET",C.HEAD="HEAD",C.MPD_TYPE="MPD",C.XLINK_EXPANSION_TYPE="XLinkExpansion",C.INIT_SEGMENT_TYPE="InitializationSegment",C.INDEX_SEGMENT_TYPE="IndexSegment",C.MEDIA_SEGMENT_TYPE="MediaSegment",C.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",C.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",C.DVB_REPORTING_TYPE="DVBReporting",C.LICENSE="license",C.CONTENT_STEERING_TYPE="ContentSteering",C.OTHER_TYPE="other"},3039:function(b,p){function w(C,E){return function(y,P){for(var m,T,U,M=F(y,"tag"),_=F(P==null?"*":P,"range"),I=[],x=-1;++x<_.length;)if(m=_[x].toLowerCase(),E||m!=="*"){for(T=-1,U=[];++T<M.length;)if(C(M[T].toLowerCase(),m)){if(!E)return M[T];I.push(M[T])}else U.push(M[T]);M=U}return E?I:void 0}}function F(C,E){var y=C&&typeof C=="string"?[C]:C;if(!y||typeof y!="object"||!("length"in y))throw new Error("Invalid "+E+" `"+y+"`, expected non-empty string");return y}p.basicFilter=w(function(C,E){return E==="*"||C===E||C.indexOf(E+"-")>-1},!0),p.extendedFilter=w(function(C,E){var y=C.split("-"),P=E.split("-"),m=0,T=0;if(P[T]!=="*"&&y[m]!==P[T])return!1;for(m++,T++;T<P.length;)if(P[T]!=="*"){if(!y[m])return!1;if(y[m]!==P[T]){if(y[m].length===1)return!1;m++}else m++,T++}else T++;return!0},!0),p.lookup=w(function(C,E){for(var y,P=E;;){if(P==="*"||C===P)return!0;if((y=P.lastIndexOf("-"))<0)return!1;P.charAt(y-2)==="-"&&(y-=2),P=P.slice(0,y)}})},3973:function(b,p,w){b.exports=w(3854)},3854:function(b,p,w){var F=w(2415),C=w(3039),E=w(7778),y=w(5813),P=w(3165),m=w(9460);b.exports=function(Y,$){var Q,se=$||{},R=F.parse(String(Y||"").toLowerCase(),se),X=F.stringify(R),ce=-1;if(!X)return X;for(;++ce<E.length;)C.extendedFilter(X,E[ce].from).length&&(_(R,E[ce].from,E[ce].to),X=F.stringify(R));for(ce=-1;++ce<y.length;)I(R,y[ce].from.field,y[ce].from.value)&&x(R,y[ce].to.field,y[ce].to.value);for(X=F.stringify(Object.assign({},R,M)),ce=-1;++ce<P.length;)X===P[ce]&&(_(R,P[ce],P[ce].split("-").slice(0,-1).join("-")),X=F.stringify(Object.assign({},R,M)));if(R.extensions.sort(Z),se.warning)for(Q in m)T.call(m[Q],R[Q])&&se.warning("Deprecated "+Q+" `"+R[Q]+"`, expected one of `"+m[Q][R[Q]].join("`, `")+"`",null,7);return R.script&&(R.script=R.script.charAt(0).toUpperCase()+R.script.slice(1)),R.region&&(R.region=R.region.toUpperCase()),F.stringify(R)};var T={}.hasOwnProperty,U=new Intl.Collator,M={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function _(Y,$,Q){var se,R=F.parse($),X=F.parse(Q),ce=[];for(se in R)R[se]&&R[se].length&&I(Y,se,R[se])&&ce.push(se);for(se in X)X[se]&&X[se].length&&(ce.indexOf(se)>-1||!Y[se]||!Y[se].length)&&x(Y,se,X[se])}function I(Y,$,Q){var se,R,X,ce,oe=!1;if(Q){if(R=se=Y[$],se&&typeof se=="object")for(R=[],X=-1;++X<se.length;)ce=se[X],Q.indexOf(ce)<0?R.push(ce):oe=!0;else se===Q&&(R=null,oe=!0);Y[$]=R}return oe}function x(Y,$,Q){var se,R,X,ce=Y[$];if(ce&&typeof ce=="object")for(se=[].concat(Q),R=-1;++R<se.length;)X=se[R],ce.indexOf(X)<0&&ce.push(X);else Y[$]=Q}function Z(Y,$){return U.compare(Y.singleton,$.singleton)}},2415:function(b,p,w){p.parse=w(6903),p.stringify=w(6713)},6903:function(b,p,w){var F=w(2219),C=w(3516),E=w(395),y=w(858),P=w(8589);b.exports=function T(U,M){var _,I,x,Z=M||{},Y={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},$=String(U),Q=$.toLowerCase(),se=0;if(U==null)throw new Error("Expected string, got `"+U+"`");if(m.call(P,Q))return(Z.normalize==null||Z.normalize)&&P[Q]?T(P[Q]):(Y[y.indexOf(Q)===-1?"irregular":"regular"]=$,Y);for(;C(Q.charCodeAt(se))&&se<9;)se++;if(se>1&&se<9){if(Y.language=$.slice(0,se),se<4)for(I=0;Q.charCodeAt(se)===45&&C(Q.charCodeAt(se+1))&&C(Q.charCodeAt(se+2))&&C(Q.charCodeAt(se+3))&&!C(Q.charCodeAt(se+4));){if(I>2)return R(se,3,"Too many extended language subtags, expected at most 3 subtags");Y.extendedLanguageSubtags.push($.slice(se+1,se+4)),se+=4,I++}for(Q.charCodeAt(se)===45&&C(Q.charCodeAt(se+1))&&C(Q.charCodeAt(se+2))&&C(Q.charCodeAt(se+3))&&C(Q.charCodeAt(se+4))&&!C(Q.charCodeAt(se+5))&&(Y.script=$.slice(se+1,se+5),se+=5),Q.charCodeAt(se)===45&&(C(Q.charCodeAt(se+1))&&C(Q.charCodeAt(se+2))&&!C(Q.charCodeAt(se+3))?(Y.region=$.slice(se+1,se+3),se+=3):E(Q.charCodeAt(se+1))&&E(Q.charCodeAt(se+2))&&E(Q.charCodeAt(se+3))&&!E(Q.charCodeAt(se+4))&&(Y.region=$.slice(se+1,se+4),se+=4));Q.charCodeAt(se)===45;){for(x=_=se+1;F(Q.charCodeAt(x));){if(x-_>7)return R(x,1,"Too long variant, expected at most 8 characters");x++}if(!(x-_>4||x-_>3&&E(Q.charCodeAt(_))))break;Y.variants.push($.slice(_,x)),se=x}for(;Q.charCodeAt(se)===45&&Q.charCodeAt(se+1)!==120&&F(Q.charCodeAt(se+1))&&Q.charCodeAt(se+2)===45&&F(Q.charCodeAt(se+3));){for(x=se+2,I=0;Q.charCodeAt(x)===45&&F(Q.charCodeAt(x+1))&&F(Q.charCodeAt(x+2));)for(x=(_=x+1)+2,I++;F(Q.charCodeAt(x));){if(x-_>7)return R(x,2,"Too long extension, expected at most 8 characters");x++}if(!I)return R(x,4,"Empty extension, extensions must have at least 2 characters of content");Y.extensions.push({singleton:$.charAt(se+1),extensions:$.slice(se+3,x).split("-")}),se=x}}else se=0;if(se===0&&Q.charCodeAt(se)===120||Q.charCodeAt(se)===45&&Q.charCodeAt(se+1)===120)for(x=se=se?se+2:1;Q.charCodeAt(x)===45&&F(Q.charCodeAt(x+1));){for(x=_=se+1;F(Q.charCodeAt(x));){if(x-_>7)return R(x,5,"Too long private-use area, expected at most 8 characters");x++}Y.privateuse.push($.slice(se+1,x)),se=x}return se!==$.length?R(se,6,"Found superfluous content after tag"):Y;function R(X,ce,oe){return Z.warning&&Z.warning(oe,ce,X),Z.forgiving?Y:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var m={}.hasOwnProperty},6713:function(b){b.exports=function(p){var w,F,C,E=p||{},y=[];if(E.irregular||E.regular)return E.irregular||E.regular;if(E.language)for(y=y.concat(E.language,E.extendedLanguageSubtags||[],E.script||[],E.region||[],E.variants||[]),w=E.extensions||[],F=-1;++F<w.length;)(C=w[F]).singleton&&C.extensions&&C.extensions.length&&(y=y.concat(C.singleton,C.extensions));return E.privateuse&&E.privateuse.length&&(y=y.concat("x",E.privateuse)),y.join("-")}},1549:function(b,p,w){var F=w(6693),C=w(2165),E=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;p.Buffer=m,p.SlowBuffer=function(L){return+L!=L&&(L=0),m.alloc(+L)},p.INSPECT_MAX_BYTES=50;var y=2147483647;function P(L){if(L>y)throw new RangeError('The value "'+L+'" is invalid for option "size"');var D=new Uint8Array(L);return Object.setPrototypeOf(D,m.prototype),D}function m(L,D,G){if(typeof L=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return M(L)}return T(L,D,G)}function T(L,D,G){if(typeof L=="string")return function(de,Ke){if(typeof Ke=="string"&&Ke!==""||(Ke="utf8"),!m.isEncoding(Ke))throw new TypeError("Unknown encoding: "+Ke);var wt=0|Z(de,Ke),lt=P(wt),ut=lt.write(de,Ke);return ut!==wt&&(lt=lt.slice(0,ut)),lt}(L,D);if(ArrayBuffer.isView(L))return function(de){if(Ne(de,Uint8Array)){var Ke=new Uint8Array(de);return I(Ke.buffer,Ke.byteOffset,Ke.byteLength)}return _(de)}(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(Ne(L,ArrayBuffer)||L&&Ne(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ne(L,SharedArrayBuffer)||L&&Ne(L.buffer,SharedArrayBuffer)))return I(L,D,G);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var K=L.valueOf&&L.valueOf();if(K!=null&&K!==L)return m.from(K,D,G);var ge=function(de){if(m.isBuffer(de)){var Ke=0|x(de.length),wt=P(Ke);return wt.length===0||de.copy(wt,0,0,Ke),wt}return de.length!==void 0?typeof de.length!="number"||ne(de.length)?P(0):_(de):de.type==="Buffer"&&Array.isArray(de.data)?_(de.data):void 0}(L);if(ge)return ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return m.from(L[Symbol.toPrimitive]("string"),D,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}function U(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function M(L){return U(L),P(L<0?0:0|x(L))}function _(L){for(var D=L.length<0?0:0|x(L.length),G=P(D),K=0;K<D;K+=1)G[K]=255&L[K];return G}function I(L,D,G){if(D<0||L.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<D+(G||0))throw new RangeError('"length" is outside of buffer bounds');var K;return K=D===void 0&&G===void 0?new Uint8Array(L):G===void 0?new Uint8Array(L,D):new Uint8Array(L,D,G),Object.setPrototypeOf(K,m.prototype),K}function x(L){if(L>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return 0|L}function Z(L,D){if(m.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||Ne(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);var G=L.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&G===0)return 0;for(var ge=!1;;)switch(D){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return Bt(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return Et(L).length;default:if(ge)return K?-1:Bt(L).length;D=(""+D).toLowerCase(),ge=!0}}function Y(L,D,G){var K=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(D>>>=0))return"";for(L||(L="utf8");;)switch(L){case"hex":return ft(this,D,G);case"utf8":case"utf-8":return Je(this,D,G);case"ascii":return qe(this,D,G);case"latin1":case"binary":return st(this,D,G);case"base64":return Ce(this,D,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,D,G);default:if(K)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),K=!0}}function $(L,D,G){var K=L[D];L[D]=L[G],L[G]=K}function Q(L,D,G,K,ge){if(L.length===0)return-1;if(typeof G=="string"?(K=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),ne(G=+G)&&(G=ge?0:L.length-1),G<0&&(G=L.length+G),G>=L.length){if(ge)return-1;G=L.length-1}else if(G<0){if(!ge)return-1;G=0}if(typeof D=="string"&&(D=m.from(D,K)),m.isBuffer(D))return D.length===0?-1:se(L,D,G,K,ge);if(typeof D=="number")return D&=255,typeof Uint8Array.prototype.indexOf=="function"?ge?Uint8Array.prototype.indexOf.call(L,D,G):Uint8Array.prototype.lastIndexOf.call(L,D,G):se(L,[D],G,K,ge);throw new TypeError("val must be string, number or Buffer")}function se(L,D,G,K,ge){var de,Ke=1,wt=L.length,lt=D.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(L.length<2||D.length<2)return-1;Ke=2,wt/=2,lt/=2,G/=2}function ut(Tt,Mt){return Ke===1?Tt[Mt]:Tt.readUInt16BE(Mt*Ke)}if(ge){var nt=-1;for(de=G;de<wt;de++)if(ut(L,de)===ut(D,nt===-1?0:de-nt)){if(nt===-1&&(nt=de),de-nt+1===lt)return nt*Ke}else nt!==-1&&(de-=de-nt),nt=-1}else for(G+lt>wt&&(G=wt-lt),de=G;de>=0;de--){for(var ht=!0,_t=0;_t<lt;_t++)if(ut(L,de+_t)!==ut(D,_t)){ht=!1;break}if(ht)return de}return-1}function R(L,D,G,K){G=Number(G)||0;var ge=L.length-G;K?(K=Number(K))>ge&&(K=ge):K=ge;var de=D.length;K>de/2&&(K=de/2);for(var Ke=0;Ke<K;++Ke){var wt=parseInt(D.substr(2*Ke,2),16);if(ne(wt))return Ke;L[G+Ke]=wt}return Ke}function X(L,D,G,K){return Dt(Bt(D,L.length-G),L,G,K)}function ce(L,D,G,K){return Dt(function(ge){for(var de=[],Ke=0;Ke<ge.length;++Ke)de.push(255&ge.charCodeAt(Ke));return de}(D),L,G,K)}function oe(L,D,G,K){return Dt(Et(D),L,G,K)}function me(L,D,G,K){return Dt(function(ge,de){for(var Ke,wt,lt,ut=[],nt=0;nt<ge.length&&!((de-=2)<0);++nt)wt=(Ke=ge.charCodeAt(nt))>>8,lt=Ke%256,ut.push(lt),ut.push(wt);return ut}(D,L.length-G),L,G,K)}function Ce(L,D,G){return D===0&&G===L.length?F.fromByteArray(L):F.fromByteArray(L.slice(D,G))}function Je(L,D,G){G=Math.min(L.length,G);for(var K=[],ge=D;ge<G;){var de,Ke,wt,lt,ut=L[ge],nt=null,ht=ut>239?4:ut>223?3:ut>191?2:1;if(ge+ht<=G)switch(ht){case 1:ut<128&&(nt=ut);break;case 2:(192&(de=L[ge+1]))==128&&(lt=(31&ut)<<6|63&de)>127&&(nt=lt);break;case 3:de=L[ge+1],Ke=L[ge+2],(192&de)==128&&(192&Ke)==128&&(lt=(15&ut)<<12|(63&de)<<6|63&Ke)>2047&&(lt<55296||lt>57343)&&(nt=lt);break;case 4:de=L[ge+1],Ke=L[ge+2],wt=L[ge+3],(192&de)==128&&(192&Ke)==128&&(192&wt)==128&&(lt=(15&ut)<<18|(63&de)<<12|(63&Ke)<<6|63&wt)>65535&&lt<1114112&&(nt=lt)}nt===null?(nt=65533,ht=1):nt>65535&&(nt-=65536,K.push(nt>>>10&1023|55296),nt=56320|1023&nt),K.push(nt),ge+=ht}return function(_t){var Tt=_t.length;if(Tt<=we)return String.fromCharCode.apply(String,_t);for(var Mt="",_n=0;_n<Tt;)Mt+=String.fromCharCode.apply(String,_t.slice(_n,_n+=we));return Mt}(K)}p.kMaxLength=y,m.TYPED_ARRAY_SUPPORT=function(){try{var L=new Uint8Array(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,Uint8Array.prototype),Object.setPrototypeOf(L,D),L.foo()===42}catch(G){return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(L,D,G){return T(L,D,G)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(L,D,G){return function(K,ge,de){return U(K),K<=0?P(K):ge!==void 0?typeof de=="string"?P(K).fill(ge,de):P(K).fill(ge):P(K)}(L,D,G)},m.allocUnsafe=function(L){return M(L)},m.allocUnsafeSlow=function(L){return M(L)},m.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==m.prototype},m.compare=function(L,D){if(Ne(L,Uint8Array)&&(L=m.from(L,L.offset,L.byteLength)),Ne(D,Uint8Array)&&(D=m.from(D,D.offset,D.byteLength)),!m.isBuffer(L)||!m.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===D)return 0;for(var G=L.length,K=D.length,ge=0,de=Math.min(G,K);ge<de;++ge)if(L[ge]!==D[ge]){G=L[ge],K=D[ge];break}return G<K?-1:K<G?1:0},m.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(L,D){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return m.alloc(0);var G;if(D===void 0)for(D=0,G=0;G<L.length;++G)D+=L[G].length;var K=m.allocUnsafe(D),ge=0;for(G=0;G<L.length;++G){var de=L[G];if(Ne(de,Uint8Array))ge+de.length>K.length?m.from(de).copy(K,ge):Uint8Array.prototype.set.call(K,de,ge);else{if(!m.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(K,ge)}ge+=de.length}return K},m.byteLength=Z,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var L=this.length;if(L%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<L;D+=2)$(this,D,D+1);return this},m.prototype.swap32=function(){var L=this.length;if(L%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<L;D+=4)$(this,D,D+3),$(this,D+1,D+2);return this},m.prototype.swap64=function(){var L=this.length;if(L%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<L;D+=8)$(this,D,D+7),$(this,D+1,D+6),$(this,D+2,D+5),$(this,D+3,D+4);return this},m.prototype.toString=function(){var L=this.length;return L===0?"":arguments.length===0?Je(this,0,L):Y.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(L){if(!m.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L||m.compare(this,L)===0},m.prototype.inspect=function(){var L="",D=p.INSPECT_MAX_BYTES;return L=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(L+=" ... "),"<Buffer "+L+">"},E&&(m.prototype[E]=m.prototype.inspect),m.prototype.compare=function(L,D,G,K,ge){if(Ne(L,Uint8Array)&&(L=m.from(L,L.offset,L.byteLength)),!m.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(D===void 0&&(D=0),G===void 0&&(G=L?L.length:0),K===void 0&&(K=0),ge===void 0&&(ge=this.length),D<0||G>L.length||K<0||ge>this.length)throw new RangeError("out of range index");if(K>=ge&&D>=G)return 0;if(K>=ge)return-1;if(D>=G)return 1;if(this===L)return 0;for(var de=(ge>>>=0)-(K>>>=0),Ke=(G>>>=0)-(D>>>=0),wt=Math.min(de,Ke),lt=this.slice(K,ge),ut=L.slice(D,G),nt=0;nt<wt;++nt)if(lt[nt]!==ut[nt]){de=lt[nt],Ke=ut[nt];break}return de<Ke?-1:Ke<de?1:0},m.prototype.includes=function(L,D,G){return this.indexOf(L,D,G)!==-1},m.prototype.indexOf=function(L,D,G){return Q(this,L,D,G,!0)},m.prototype.lastIndexOf=function(L,D,G){return Q(this,L,D,G,!1)},m.prototype.write=function(L,D,G,K){if(D===void 0)K="utf8",G=this.length,D=0;else if(G===void 0&&typeof D=="string")K=D,G=this.length,D=0;else{if(!isFinite(D))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");D>>>=0,isFinite(G)?(G>>>=0,K===void 0&&(K="utf8")):(K=G,G=void 0)}var ge=this.length-D;if((G===void 0||G>ge)&&(G=ge),L.length>0&&(G<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var de=!1;;)switch(K){case"hex":return R(this,L,D,G);case"utf8":case"utf-8":return X(this,L,D,G);case"ascii":case"latin1":case"binary":return ce(this,L,D,G);case"base64":return oe(this,L,D,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,L,D,G);default:if(de)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),de=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var we=4096;function qe(L,D,G){var K="";G=Math.min(L.length,G);for(var ge=D;ge<G;++ge)K+=String.fromCharCode(127&L[ge]);return K}function st(L,D,G){var K="";G=Math.min(L.length,G);for(var ge=D;ge<G;++ge)K+=String.fromCharCode(L[ge]);return K}function ft(L,D,G){var K=L.length;(!D||D<0)&&(D=0),(!G||G<0||G>K)&&(G=K);for(var ge="",de=D;de<G;++de)ge+=Be[L[de]];return ge}function be(L,D,G){for(var K=L.slice(D,G),ge="",de=0;de<K.length-1;de+=2)ge+=String.fromCharCode(K[de]+256*K[de+1]);return ge}function He(L,D,G){if(L%1!=0||L<0)throw new RangeError("offset is not uint");if(L+D>G)throw new RangeError("Trying to access beyond buffer length")}function vt(L,D,G,K,ge,de){if(!m.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>ge||D<de)throw new RangeError('"value" argument is out of bounds');if(G+K>L.length)throw new RangeError("Index out of range")}function Re(L,D,G,K,ge,de){if(G+K>L.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function Ye(L,D,G,K,ge){return D=+D,G>>>=0,ge||Re(L,0,G,4),C.write(L,D,G,K,23,4),G+4}function ot(L,D,G,K,ge){return D=+D,G>>>=0,ge||Re(L,0,G,8),C.write(L,D,G,K,52,8),G+8}m.prototype.slice=function(L,D){var G=this.length;(L=~~L)<0?(L+=G)<0&&(L=0):L>G&&(L=G),(D=D===void 0?G:~~D)<0?(D+=G)<0&&(D=0):D>G&&(D=G),D<L&&(D=L);var K=this.subarray(L,D);return Object.setPrototypeOf(K,m.prototype),K},m.prototype.readUintLE=m.prototype.readUIntLE=function(L,D,G){L>>>=0,D>>>=0,G||He(L,D,this.length);for(var K=this[L],ge=1,de=0;++de<D&&(ge*=256);)K+=this[L+de]*ge;return K},m.prototype.readUintBE=m.prototype.readUIntBE=function(L,D,G){L>>>=0,D>>>=0,G||He(L,D,this.length);for(var K=this[L+--D],ge=1;D>0&&(ge*=256);)K+=this[L+--D]*ge;return K},m.prototype.readUint8=m.prototype.readUInt8=function(L,D){return L>>>=0,D||He(L,1,this.length),this[L]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(L,D){return L>>>=0,D||He(L,2,this.length),this[L]|this[L+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(L,D){return L>>>=0,D||He(L,2,this.length),this[L]<<8|this[L+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(L,D){return L>>>=0,D||He(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+16777216*this[L+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(L,D){return L>>>=0,D||He(L,4,this.length),16777216*this[L]+(this[L+1]<<16|this[L+2]<<8|this[L+3])},m.prototype.readIntLE=function(L,D,G){L>>>=0,D>>>=0,G||He(L,D,this.length);for(var K=this[L],ge=1,de=0;++de<D&&(ge*=256);)K+=this[L+de]*ge;return K>=(ge*=128)&&(K-=Math.pow(2,8*D)),K},m.prototype.readIntBE=function(L,D,G){L>>>=0,D>>>=0,G||He(L,D,this.length);for(var K=D,ge=1,de=this[L+--K];K>0&&(ge*=256);)de+=this[L+--K]*ge;return de>=(ge*=128)&&(de-=Math.pow(2,8*D)),de},m.prototype.readInt8=function(L,D){return L>>>=0,D||He(L,1,this.length),128&this[L]?-1*(255-this[L]+1):this[L]},m.prototype.readInt16LE=function(L,D){L>>>=0,D||He(L,2,this.length);var G=this[L]|this[L+1]<<8;return 32768&G?4294901760|G:G},m.prototype.readInt16BE=function(L,D){L>>>=0,D||He(L,2,this.length);var G=this[L+1]|this[L]<<8;return 32768&G?4294901760|G:G},m.prototype.readInt32LE=function(L,D){return L>>>=0,D||He(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},m.prototype.readInt32BE=function(L,D){return L>>>=0,D||He(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},m.prototype.readFloatLE=function(L,D){return L>>>=0,D||He(L,4,this.length),C.read(this,L,!0,23,4)},m.prototype.readFloatBE=function(L,D){return L>>>=0,D||He(L,4,this.length),C.read(this,L,!1,23,4)},m.prototype.readDoubleLE=function(L,D){return L>>>=0,D||He(L,8,this.length),C.read(this,L,!0,52,8)},m.prototype.readDoubleBE=function(L,D){return L>>>=0,D||He(L,8,this.length),C.read(this,L,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(L,D,G,K){L=+L,D>>>=0,G>>>=0,K||vt(this,L,D,G,Math.pow(2,8*G)-1,0);var ge=1,de=0;for(this[D]=255&L;++de<G&&(ge*=256);)this[D+de]=L/ge&255;return D+G},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(L,D,G,K){L=+L,D>>>=0,G>>>=0,K||vt(this,L,D,G,Math.pow(2,8*G)-1,0);var ge=G-1,de=1;for(this[D+ge]=255&L;--ge>=0&&(de*=256);)this[D+ge]=L/de&255;return D+G},m.prototype.writeUint8=m.prototype.writeUInt8=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,1,255,0),this[D]=255&L,D+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,2,65535,0),this[D]=255&L,this[D+1]=L>>>8,D+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,2,65535,0),this[D]=L>>>8,this[D+1]=255&L,D+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,4,4294967295,0),this[D+3]=L>>>24,this[D+2]=L>>>16,this[D+1]=L>>>8,this[D]=255&L,D+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,4,4294967295,0),this[D]=L>>>24,this[D+1]=L>>>16,this[D+2]=L>>>8,this[D+3]=255&L,D+4},m.prototype.writeIntLE=function(L,D,G,K){if(L=+L,D>>>=0,!K){var ge=Math.pow(2,8*G-1);vt(this,L,D,G,ge-1,-ge)}var de=0,Ke=1,wt=0;for(this[D]=255&L;++de<G&&(Ke*=256);)L<0&&wt===0&&this[D+de-1]!==0&&(wt=1),this[D+de]=(L/Ke>>0)-wt&255;return D+G},m.prototype.writeIntBE=function(L,D,G,K){if(L=+L,D>>>=0,!K){var ge=Math.pow(2,8*G-1);vt(this,L,D,G,ge-1,-ge)}var de=G-1,Ke=1,wt=0;for(this[D+de]=255&L;--de>=0&&(Ke*=256);)L<0&&wt===0&&this[D+de+1]!==0&&(wt=1),this[D+de]=(L/Ke>>0)-wt&255;return D+G},m.prototype.writeInt8=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,1,127,-128),L<0&&(L=255+L+1),this[D]=255&L,D+1},m.prototype.writeInt16LE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,2,32767,-32768),this[D]=255&L,this[D+1]=L>>>8,D+2},m.prototype.writeInt16BE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,2,32767,-32768),this[D]=L>>>8,this[D+1]=255&L,D+2},m.prototype.writeInt32LE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,4,2147483647,-2147483648),this[D]=255&L,this[D+1]=L>>>8,this[D+2]=L>>>16,this[D+3]=L>>>24,D+4},m.prototype.writeInt32BE=function(L,D,G){return L=+L,D>>>=0,G||vt(this,L,D,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[D]=L>>>24,this[D+1]=L>>>16,this[D+2]=L>>>8,this[D+3]=255&L,D+4},m.prototype.writeFloatLE=function(L,D,G){return Ye(this,L,D,!0,G)},m.prototype.writeFloatBE=function(L,D,G){return Ye(this,L,D,!1,G)},m.prototype.writeDoubleLE=function(L,D,G){return ot(this,L,D,!0,G)},m.prototype.writeDoubleBE=function(L,D,G){return ot(this,L,D,!1,G)},m.prototype.copy=function(L,D,G,K){if(!m.isBuffer(L))throw new TypeError("argument should be a Buffer");if(G||(G=0),K||K===0||(K=this.length),D>=L.length&&(D=L.length),D||(D=0),K>0&&K<G&&(K=G),K===G||L.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),L.length-D<K-G&&(K=L.length-D+G);var ge=K-G;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(D,G,K):Uint8Array.prototype.set.call(L,this.subarray(G,K),D),ge},m.prototype.fill=function(L,D,G,K){if(typeof L=="string"){if(typeof D=="string"?(K=D,D=0,G=this.length):typeof G=="string"&&(K=G,G=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!m.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(L.length===1){var ge=L.charCodeAt(0);(K==="utf8"&&ge<128||K==="latin1")&&(L=ge)}}else typeof L=="number"?L&=255:typeof L=="boolean"&&(L=Number(L));if(D<0||this.length<D||this.length<G)throw new RangeError("Out of range index");if(G<=D)return this;var de;if(D>>>=0,G=G===void 0?this.length:G>>>0,L||(L=0),typeof L=="number")for(de=D;de<G;++de)this[de]=L;else{var Ke=m.isBuffer(L)?L:m.from(L,K),wt=Ke.length;if(wt===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(de=0;de<G-D;++de)this[de+D]=Ke[de%wt]}return this};var Ht=/[^+/0-9A-Za-z-_]/g;function Bt(L,D){var G;D=D||1/0;for(var K=L.length,ge=null,de=[],Ke=0;Ke<K;++Ke){if((G=L.charCodeAt(Ke))>55295&&G<57344){if(!ge){if(G>56319){(D-=3)>-1&&de.push(239,191,189);continue}if(Ke+1===K){(D-=3)>-1&&de.push(239,191,189);continue}ge=G;continue}if(G<56320){(D-=3)>-1&&de.push(239,191,189),ge=G;continue}G=65536+(ge-55296<<10|G-56320)}else ge&&(D-=3)>-1&&de.push(239,191,189);if(ge=null,G<128){if((D-=1)<0)break;de.push(G)}else if(G<2048){if((D-=2)<0)break;de.push(G>>6|192,63&G|128)}else if(G<65536){if((D-=3)<0)break;de.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((D-=4)<0)break;de.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return de}function Et(L){return F.toByteArray(function(D){if((D=(D=D.split("=")[0]).trim().replace(Ht,"")).length<2)return"";for(;D.length%4!=0;)D+="=";return D}(L))}function Dt(L,D,G,K){for(var ge=0;ge<K&&!(ge+G>=D.length||ge>=L.length);++ge)D[ge+G]=L[ge];return ge}function Ne(L,D){return L instanceof D||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===D.name}function ne(L){return L!=L}var Be=function(){for(var L="0123456789abcdef",D=new Array(256),G=0;G<16;++G)for(var K=16*G,ge=0;ge<16;++ge)D[K+ge]=L[G]+L[ge];return D}()},6693:function(b,p){p.byteLength=function(U){var M=m(U),_=M[0],I=M[1];return 3*(_+I)/4-I},p.toByteArray=function(U){var M,_,I=m(U),x=I[0],Z=I[1],Y=new C(function(se,R,X){return 3*(R+X)/4-X}(0,x,Z)),$=0,Q=Z>0?x-4:x;for(_=0;_<Q;_+=4)M=F[U.charCodeAt(_)]<<18|F[U.charCodeAt(_+1)]<<12|F[U.charCodeAt(_+2)]<<6|F[U.charCodeAt(_+3)],Y[$++]=M>>16&255,Y[$++]=M>>8&255,Y[$++]=255&M;return Z===2&&(M=F[U.charCodeAt(_)]<<2|F[U.charCodeAt(_+1)]>>4,Y[$++]=255&M),Z===1&&(M=F[U.charCodeAt(_)]<<10|F[U.charCodeAt(_+1)]<<4|F[U.charCodeAt(_+2)]>>2,Y[$++]=M>>8&255,Y[$++]=255&M),Y},p.fromByteArray=function(U){for(var M,_=U.length,I=_%3,x=[],Z=16383,Y=0,$=_-I;Y<$;Y+=Z)x.push(T(U,Y,Y+Z>$?$:Y+Z));return I===1?(M=U[_-1],x.push(w[M>>2]+w[M<<4&63]+"==")):I===2&&(M=(U[_-2]<<8)+U[_-1],x.push(w[M>>10]+w[M>>4&63]+w[M<<2&63]+"=")),x.join("")};for(var w=[],F=[],C=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,P=E.length;y<P;++y)w[y]=E[y],F[E.charCodeAt(y)]=y;function m(U){var M=U.length;if(M%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=U.indexOf("=");return _===-1&&(_=M),[_,_===M?0:4-_%4]}function T(U,M,_){for(var I,x,Z=[],Y=M;Y<_;Y+=3)I=(U[Y]<<16&16711680)+(U[Y+1]<<8&65280)+(255&U[Y+2]),Z.push(w[(x=I)>>18&63]+w[x>>12&63]+w[x>>6&63]+w[63&x]);return Z.join("")}F[45]=62,F[95]=63},2165:function(b,p){p.read=function(w,F,C,E,y){var P,m,T=8*y-E-1,U=(1<<T)-1,M=U>>1,_=-7,I=C?y-1:0,x=C?-1:1,Z=w[F+I];for(I+=x,P=Z&(1<<-_)-1,Z>>=-_,_+=T;_>0;P=256*P+w[F+I],I+=x,_-=8);for(m=P&(1<<-_)-1,P>>=-_,_+=E;_>0;m=256*m+w[F+I],I+=x,_-=8);if(P===0)P=1-M;else{if(P===U)return m?NaN:1/0*(Z?-1:1);m+=Math.pow(2,E),P-=M}return(Z?-1:1)*m*Math.pow(2,P-E)},p.write=function(w,F,C,E,y,P){var m,T,U,M=8*P-y-1,_=(1<<M)-1,I=_>>1,x=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=E?0:P-1,Y=E?1:-1,$=F<0||F===0&&1/F<0?1:0;for(F=Math.abs(F),isNaN(F)||F===1/0?(T=isNaN(F)?1:0,m=_):(m=Math.floor(Math.log(F)/Math.LN2),F*(U=Math.pow(2,-m))<1&&(m--,U*=2),(F+=m+I>=1?x/U:x*Math.pow(2,1-I))*U>=2&&(m++,U/=2),m+I>=_?(T=0,m=_):m+I>=1?(T=(F*U-1)*Math.pow(2,y),m+=I):(T=F*Math.pow(2,I-1)*Math.pow(2,y),m=0));y>=8;w[C+Z]=255&T,Z+=Y,T/=256,y-=8);for(m=m<<y|T,M+=y;M>0;w[C+Z]=255&m,Z+=Y,m/=256,M-=8);w[C+Z-Y]|=128*$}},6934:function(b,p){var w={parseBuffer:function(E){return new F(E).parse()},addBoxProcessor:function(E,y){typeof E=="string"&&typeof y=="function"&&(C.prototype._boxProcessors[E]=y)},createFile:function(){return new F},createBox:function(E,y,P){var m=C.create(E);return y&&y.append(m,P),m},createFullBox:function(E,y,P){var m=w.createBox(E,y,P);return m.version=0,m.flags=0,m},Utils:{}};w.Utils.dataViewToString=function(E,y){var P=y||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(P).decode(E);var m=[],T=0;if(P==="utf-8")for(;T<E.byteLength;){var U=E.getUint8(T++);U<128||(U<224?(U=(31&U)<<6,U|=63&E.getUint8(T++)):U<240?(U=(15&U)<<12,U|=(63&E.getUint8(T++))<<6,U|=63&E.getUint8(T++)):(U=(7&U)<<18,U|=(63&E.getUint8(T++))<<12,U|=(63&E.getUint8(T++))<<6,U|=63&E.getUint8(T++))),m.push(String.fromCharCode(U))}else for(;T<E.byteLength;)m.push(String.fromCharCode(E.getUint8(T++)));return m.join("")},w.Utils.utf8ToByteArray=function(E){var y,P;if(typeof TextEncoder<"u")y=new TextEncoder().encode(E);else for(y=[],P=0;P<E.length;++P){var m=E.charCodeAt(P);m<128?y.push(m):m<2048?(y.push(192|m>>6),y.push(128|63&m)):m<65536?(y.push(224|m>>12),y.push(128|63&m>>6),y.push(128|63&m)):(y.push(240|m>>18),y.push(128|63&m>>12),y.push(128|63&m>>6),y.push(128|63&m))}return y},w.Utils.appendBox=function(E,y,P){if(y._offset=E._cursor.offset,y._root=E._root?E._root:E,y._raw=E._raw,y._parent=E,P!==-1)if(P!=null){var m,T=-1;if(typeof P=="number")T=P;else{if(typeof P=="string")m=P;else{if(typeof P!="object"||!P.type)return void E.boxes.push(y);m=P.type}for(var U=0;U<E.boxes.length;U++)if(m===E.boxes[U].type){T=U+1;break}}E.boxes.splice(T,0,y)}else E.boxes.push(y)},p.parseBuffer=w.parseBuffer,p.addBoxProcessor=w.addBoxProcessor,p.createFile=w.createFile,p.createBox=w.createBox,p.createFullBox=w.createFullBox,p.Utils=w.Utils,w.Cursor=function(E){this.offset=E===void 0?0:E};var F=function(E){this._cursor=new w.Cursor,this.boxes=[],E&&(this._raw=new DataView(E))};F.prototype.fetch=function(E){var y=this.fetchAll(E,!0);return y.length?y[0]:null},F.prototype.fetchAll=function(E,y){var P=[];return F._sweep.call(this,E,P,y),P},F.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var E=C.parse(this);if(E.type===void 0)break;this.boxes.push(E)}return this},F._sweep=function(E,y,P){for(var m in this.type&&this.type==E&&y.push(this),this.boxes){if(y.length&&P)return;F._sweep.call(this.boxes[m],E,y,P)}},F.prototype.write=function(){var E,y=0;for(E=0;E<this.boxes.length;E++)y+=this.boxes[E].getLength(!1);var P=new Uint8Array(y);for(this._rawo=new DataView(P.buffer),this.bytes=P,this._cursor.offset=0,E=0;E<this.boxes.length;E++)this.boxes[E].write();return P.buffer},F.prototype.append=function(E,y){w.Utils.appendBox(this,E,y)};var C=function(){this._cursor=new w.Cursor};C.parse=function(E){var y=new C;return y._offset=E._cursor.offset,y._root=E._root?E._root:E,y._raw=E._raw,y._parent=E,y._parseBox(),E._cursor.offset=y._raw.byteOffset+y._raw.byteLength,y},C.create=function(E){var y=new C;return y.type=E,y.boxes=[],y},C.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],C.prototype._boxProcessors={},C.prototype._procField=function(E,y,P){this._parsing?this[E]=this._readField(y,P):this._writeField(y,P,this[E])},C.prototype._procFieldArray=function(E,y,P,m){var T;if(this._parsing)for(this[E]=[],T=0;T<y;T++)this[E][T]=this._readField(P,m);else for(T=0;T<this[E].length;T++)this._writeField(P,m,this[E][T])},C.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},C.prototype._procEntries=function(E,y,P){var m;if(this._parsing)for(this[E]=[],m=0;m<y;m++)this[E].push({}),P.call(this,this[E][m]);else for(m=0;m<y;m++)P.call(this,this[E][m])},C.prototype._procSubEntries=function(E,y,P,m){var T;if(this._parsing)for(E[y]=[],T=0;T<P;T++)E[y].push({}),m.call(this,E[y][T]);else for(T=0;T<P;T++)m.call(this,E[y][T])},C.prototype._procEntryField=function(E,y,P,m){this._parsing?E[y]=this._readField(P,m):this._writeField(P,m,E[y])},C.prototype._procSubBoxes=function(E,y){var P;if(this._parsing)for(this[E]=[],P=0;P<y;P++)this[E].push(C.parse(this));else for(P=0;P<y;P++)this._rawo?this[E][P].write():this.size+=this[E][P].getLength()},C.prototype._readField=function(E,y){switch(E){case"uint":return this._readUint(y);case"int":return this._readInt(y);case"template":return this._readTemplate(y);case"string":return y===-1?this._readTerminatedString():this._readString(y);case"data":return this._readData(y);case"utf8":return this._readUTF8String();default:return-1}},C.prototype._readInt=function(E){var y=null,P=this._cursor.offset-this._raw.byteOffset;switch(E){case 8:y=this._raw.getInt8(P);break;case 16:y=this._raw.getInt16(P);break;case 32:y=this._raw.getInt32(P);break;case 64:var m=this._raw.getInt32(P),T=this._raw.getInt32(P+4);y=m*Math.pow(2,32)+T}return this._cursor.offset+=E>>3,y},C.prototype._readUint=function(E){var y,P,m=null,T=this._cursor.offset-this._raw.byteOffset;switch(E){case 8:m=this._raw.getUint8(T);break;case 16:m=this._raw.getUint16(T);break;case 24:m=((y=this._raw.getUint16(T))<<8)+(P=this._raw.getUint8(T+2));break;case 32:m=this._raw.getUint32(T);break;case 64:y=this._raw.getUint32(T),P=this._raw.getUint32(T+4),m=y*Math.pow(2,32)+P}return this._cursor.offset+=E>>3,m},C.prototype._readString=function(E){for(var y="",P=0;P<E;P++){var m=this._readUint(8);y+=String.fromCharCode(m)}return y},C.prototype._readTemplate=function(E){return this._readUint(E/2)+this._readUint(E/2)/Math.pow(2,E/2)},C.prototype._readTerminatedString=function(){for(var E="";this._cursor.offset-this._offset<this._raw.byteLength;){var y=this._readUint(8);if(y===0)break;E+=String.fromCharCode(y)}return E},C.prototype._readData=function(E){var y=E>0?E:this._raw.byteLength-(this._cursor.offset-this._offset);if(y>0){var P=new Uint8Array(this._raw.buffer,this._cursor.offset,y);return this._cursor.offset+=y,P}return null},C.prototype._readUTF8String=function(){var E=this._raw.byteLength-(this._cursor.offset-this._offset),y=null;return E>0&&(y=new DataView(this._raw.buffer,this._cursor.offset,E),this._cursor.offset+=E),y&&w.Utils.dataViewToString(y)},C.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},C.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},C.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(C.parse(this))},C.prototype.append=function(E,y){w.Utils.appendBox(this,E,y)},C.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var E=0;E<this.boxes.length;E++)this.size+=this.boxes[E].getLength();return this._data&&this._writeData(this._data),this.size},C.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var E=0;E<this.boxes.length;E++)this.boxes[E].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},C.prototype._writeInt=function(E,y){if(this._rawo){var P=this._cursor.offset-this._rawo.byteOffset;switch(E){case 8:this._rawo.setInt8(P,y);break;case 16:this._rawo.setInt16(P,y);break;case 32:this._rawo.setInt32(P,y);break;case 64:var m=Math.floor(y/Math.pow(2,32)),T=y-m*Math.pow(2,32);this._rawo.setUint32(P,m),this._rawo.setUint32(P+4,T)}this._cursor.offset+=E>>3}else this.size+=E>>3},C.prototype._writeUint=function(E,y){if(this._rawo){var P,m,T=this._cursor.offset-this._rawo.byteOffset;switch(E){case 8:this._rawo.setUint8(T,y);break;case 16:this._rawo.setUint16(T,y);break;case 24:P=(16776960&y)>>8,m=255&y,this._rawo.setUint16(T,P),this._rawo.setUint8(T+2,m);break;case 32:this._rawo.setUint32(T,y);break;case 64:m=y-(P=Math.floor(y/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(T,P),this._rawo.setUint32(T+4,m)}this._cursor.offset+=E>>3}else this.size+=E>>3},C.prototype._writeString=function(E,y){for(var P=0;P<E;P++)this._writeUint(8,y.charCodeAt(P))},C.prototype._writeTerminatedString=function(E){if(E.length!==0){for(var y=0;y<E.length;y++)this._writeUint(8,E.charCodeAt(y));this._writeUint(8,0)}},C.prototype._writeTemplate=function(E,y){var P=Math.floor(y),m=(y-P)*Math.pow(2,E/2);this._writeUint(E/2,P),this._writeUint(E/2,m)},C.prototype._writeData=function(E){if(E)if(this._rawo){if(E instanceof Array){for(var y=this._cursor.offset-this._rawo.byteOffset,P=0;P<E.length;P++)this._rawo.setInt8(y+P,E[P]);this._cursor.offset+=E.length}E instanceof Uint8Array&&(this._root.bytes.set(E,this._cursor.offset),this._cursor.offset+=E.length)}else this.size+=E.length},C.prototype._writeUTF8String=function(E){var y=w.Utils.utf8ToByteArray(E);if(this._rawo)for(var P=new DataView(this._rawo.buffer,this._cursor.offset,y.length),m=0;m<y.length;m++)P.setUint8(m,y[m]);else this.size+=y.length},C.prototype._writeField=function(E,y,P){switch(E){case"uint":this._writeUint(y,P);break;case"int":this._writeInt(y,P);break;case"template":this._writeTemplate(y,P);break;case"string":y==-1?this._writeTerminatedString(P):this._writeString(y,P);break;case"data":this._writeData(P);break;case"utf8":this._writeUTF8String(P)}},C.prototype._boxProcessors.avc1=C.prototype._boxProcessors.avc2=C.prototype._boxProcessors.avc3=C.prototype._boxProcessors.avc4=C.prototype._boxProcessors.hvc1=C.prototype._boxProcessors.hev1=C.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},C.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"sample_count","uint",32),this._procEntryField(E,"sample_offset",this.version===1?"int":"uint",32)})},C.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},C.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"segment_duration","uint",this.version===1?64:32),this._procEntryField(E,"media_time","int",this.version===1?64:32),this._procEntryField(E,"media_rate_integer","int",16),this._procEntryField(E,"media_rate_fraction","int",16)})},C.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},C.prototype._boxProcessors.free=C.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},C.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},C.prototype._boxProcessors.ftyp=C.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var E=-1;this._parsing&&(E=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",E,"string",4)},C.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},C.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},C.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},C.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},C.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},C.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},C.prototype._boxProcessors.mp4a=C.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},C.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},C.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},C.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},C.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},C.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},C.prototype._boxProcessors.sdtp=function(){this._procFullBox();var E=-1;this._parsing&&(E=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",E,"uint",8)},C.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(E){this._parsing||(E.reference=(1&E.reference_type)<<31,E.reference|=2147483647&E.referenced_size,E.sap=(1&E.starts_with_SAP)<<31,E.sap|=(3&E.SAP_type)<<28,E.sap|=268435455&E.SAP_delta_time),this._procEntryField(E,"reference","uint",32),this._procEntryField(E,"subsegment_duration","uint",32),this._procEntryField(E,"sap","uint",32),this._parsing&&(E.reference_type=E.reference>>31&1,E.referenced_size=2147483647&E.reference,E.starts_with_SAP=E.sap>>31&1,E.SAP_type=E.sap>>28&7,E.SAP_delta_time=268435455&E.sap)})},C.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},C.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(E){this._procEntryField(E,"ranges_count","uint",32),this._procSubEntries(E,"ranges",E.ranges_count,function(y){this._procEntryField(y,"level","uint",8),this._procEntryField(y,"range_size","uint",24)})})},C.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},C.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},C.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"sample_count","uint",32),this._procEntryField(E,"sample_delta","uint",32)})},C.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"sample_delta","uint",32),this._procEntryField(E,"subsample_count","uint",16),this._procSubEntries(E,"subsamples",E.subsample_count,function(y){this._procEntryField(y,"subsample_size","uint",this.version===1?32:16),this._procEntryField(y,"subsample_priority","uint",8),this._procEntryField(y,"discardable","uint",8),this._procEntryField(y,"codec_specific_parameters","uint",32)})})},C.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},C.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},C.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},C.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(E){this._procEntryField(E,"time","uint",this.version===1?64:32),this._procEntryField(E,"moof_offset","uint",this.version===1?64:32),this._procEntryField(E,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(E,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(E,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},C.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},C.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},C.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(E){256&this.flags&&this._procEntryField(E,"sample_duration","uint",32),512&this.flags&&this._procEntryField(E,"sample_size","uint",32),1024&this.flags&&this._procEntryField(E,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(E,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},C.prototype._boxProcessors["url "]=C.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},C.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},C.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},C.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},C.prototype._boxProcessors.vtte=function(){}},5530:function(b,p,w){b.exports=w(6146).polyfill()},6146:function(b,p,w){b.exports=function(){function F(Et){return typeof Et=="function"}var C=Array.isArray?Array.isArray:function(Et){return Object.prototype.toString.call(Et)==="[object Array]"},E=0,y=void 0,P=void 0,m=function(Et,Dt){Z[E]=Et,Z[E+1]=Dt,(E+=2)===2&&(P?P(Y):X())},T=typeof window<"u"?window:void 0,U=T||{},M=U.MutationObserver||U.WebKitMutationObserver,_=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",I=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){var Et=setTimeout;return function(){return Et(Y,1)}}var Z=new Array(1e3);function Y(){for(var Et=0;Et<E;Et+=2)(0,Z[Et])(Z[Et+1]),Z[Et]=void 0,Z[Et+1]=void 0;E=0}var $,Q,se,R,X=void 0;function ce(Et,Dt){var Ne=this,ne=new this.constructor(Ce);ne[me]===void 0&&ot(ne);var Be=Ne._state;if(Be){var L=arguments[Be-1];m(function(){return Re(Be,ne,L,Ne._result)})}else He(Ne,ne,Et,Dt);return ne}function oe(Et){if(Et&&typeof Et=="object"&&Et.constructor===this)return Et;var Dt=new this(Ce);return qe(Dt,Et),Dt}X=_?function(){return process.nextTick(Y)}:M?(Q=0,se=new M(Y),R=document.createTextNode(""),se.observe(R,{characterData:!0}),function(){R.data=Q=++Q%2}):I?(($=new MessageChannel).port1.onmessage=Y,function(){return $.port2.postMessage(0)}):T===void 0?function(){try{var Et=Function("return this")().require("vertx");return(y=Et.runOnLoop||Et.runOnContext)!==void 0?function(){y(Y)}:x()}catch(Dt){return x()}}():x();var me=Math.random().toString(36).substring(2);function Ce(){}var Je=void 0;function we(Et,Dt,Ne){Dt.constructor===Et.constructor&&Ne===ce&&Dt.constructor.resolve===oe?function(ne,Be){Be._state===1?ft(ne,Be._result):Be._state===2?be(ne,Be._result):He(Be,void 0,function(L){return qe(ne,L)},function(L){return be(ne,L)})}(Et,Dt):Ne===void 0?ft(Et,Dt):F(Ne)?function(ne,Be,L){m(function(D){var G=!1,K=function(ge,de,Ke,wt){try{ge.call(de,Ke,wt)}catch(lt){return lt}}(L,Be,function(ge){G||(G=!0,Be!==ge?qe(D,ge):ft(D,ge))},function(ge){G||(G=!0,be(D,ge))},D._label);!G&&K&&(G=!0,be(D,K))},ne)}(Et,Dt,Ne):ft(Et,Dt)}function qe(Et,Dt){if(Et===Dt)be(Et,new TypeError("You cannot resolve a promise with itself"));else if(Be=typeof(ne=Dt),ne===null||Be!=="object"&&Be!=="function")ft(Et,Dt);else{var Ne=void 0;try{Ne=Dt.then}catch(L){return void be(Et,L)}we(Et,Dt,Ne)}var ne,Be}function st(Et){Et._onerror&&Et._onerror(Et._result),vt(Et)}function ft(Et,Dt){Et._state===Je&&(Et._result=Dt,Et._state=1,Et._subscribers.length!==0&&m(vt,Et))}function be(Et,Dt){Et._state===Je&&(Et._state=2,Et._result=Dt,m(st,Et))}function He(Et,Dt,Ne,ne){var Be=Et._subscribers,L=Be.length;Et._onerror=null,Be[L]=Dt,Be[L+1]=Ne,Be[L+2]=ne,L===0&&Et._state&&m(vt,Et)}function vt(Et){var Dt=Et._subscribers,Ne=Et._state;if(Dt.length!==0){for(var ne=void 0,Be=void 0,L=Et._result,D=0;D<Dt.length;D+=3)ne=Dt[D],Be=Dt[D+Ne],ne?Re(Ne,ne,Be,L):Be(L);Et._subscribers.length=0}}function Re(Et,Dt,Ne,ne){var Be=F(Ne),L=void 0,D=void 0,G=!0;if(Be){try{L=Ne(ne)}catch(K){G=!1,D=K}if(Dt===L)return void be(Dt,new TypeError("A promises callback cannot return that same promise."))}else L=ne;Dt._state!==Je||(Be&&G?qe(Dt,L):G===!1?be(Dt,D):Et===1?ft(Dt,L):Et===2&&be(Dt,L))}var Ye=0;function ot(Et){Et[me]=Ye++,Et._state=void 0,Et._result=void 0,Et._subscribers=[]}var Ht=function(){function Et(Dt,Ne){this._instanceConstructor=Dt,this.promise=new Dt(Ce),this.promise[me]||ot(this.promise),C(Ne)?(this.length=Ne.length,this._remaining=Ne.length,this._result=new Array(this.length),this.length===0?ft(this.promise,this._result):(this.length=this.length||0,this._enumerate(Ne),this._remaining===0&&ft(this.promise,this._result))):be(this.promise,new Error("Array Methods must be provided an Array"))}return Et.prototype._enumerate=function(Dt){for(var Ne=0;this._state===Je&&Ne<Dt.length;Ne++)this._eachEntry(Dt[Ne],Ne)},Et.prototype._eachEntry=function(Dt,Ne){var ne=this._instanceConstructor,Be=ne.resolve;if(Be===oe){var L=void 0,D=void 0,G=!1;try{L=Dt.then}catch(ge){G=!0,D=ge}if(L===ce&&Dt._state!==Je)this._settledAt(Dt._state,Ne,Dt._result);else if(typeof L!="function")this._remaining--,this._result[Ne]=Dt;else if(ne===Bt){var K=new ne(Ce);G?be(K,D):we(K,Dt,L),this._willSettleAt(K,Ne)}else this._willSettleAt(new ne(function(ge){return ge(Dt)}),Ne)}else this._willSettleAt(Be(Dt),Ne)},Et.prototype._settledAt=function(Dt,Ne,ne){var Be=this.promise;Be._state===Je&&(this._remaining--,Dt===2?be(Be,ne):this._result[Ne]=ne),this._remaining===0&&ft(Be,this._result)},Et.prototype._willSettleAt=function(Dt,Ne){var ne=this;He(Dt,void 0,function(Be){return ne._settledAt(1,Ne,Be)},function(Be){return ne._settledAt(2,Ne,Be)})},Et}(),Bt=function(){function Et(Dt){this[me]=Ye++,this._result=this._state=void 0,this._subscribers=[],Ce!==Dt&&(typeof Dt!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Et?function(Ne,ne){try{ne(function(Be){qe(Ne,Be)},function(Be){be(Ne,Be)})}catch(Be){be(Ne,Be)}}(this,Dt):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Et.prototype.catch=function(Dt){return this.then(null,Dt)},Et.prototype.finally=function(Dt){var Ne=this,ne=Ne.constructor;return F(Dt)?Ne.then(function(Be){return ne.resolve(Dt()).then(function(){return Be})},function(Be){return ne.resolve(Dt()).then(function(){throw Be})}):Ne.then(Dt,Dt)},Et}();return Bt.prototype.then=ce,Bt.all=function(Et){return new Ht(this,Et).promise},Bt.race=function(Et){var Dt=this;return C(Et)?new Dt(function(Ne,ne){for(var Be=Et.length,L=0;L<Be;L++)Dt.resolve(Et[L]).then(Ne,ne)}):new Dt(function(Ne,ne){return ne(new TypeError("You must pass an array to race."))})},Bt.resolve=oe,Bt.reject=function(Et){var Dt=new this(Ce);return be(Dt,Et),Dt},Bt._setScheduler=function(Et){P=Et},Bt._setAsap=function(Et){m=Et},Bt._asap=m,Bt.polyfill=function(){var Et=void 0;if(w.g!==void 0)Et=w.g;else if(typeof self<"u")Et=self;else try{Et=Function("return this")()}catch(ne){throw new Error("polyfill failed because global object is unavailable in this environment")}var Dt=Et.Promise;if(Dt){var Ne=null;try{Ne=Object.prototype.toString.call(Dt.resolve())}catch(ne){}if(Ne==="[object Promise]"&&!Dt.cast)return}Et.Promise=Bt},Bt.Promise=Bt,Bt}()},1159:function(b){var p,w=typeof Reflect=="object"?Reflect:null,F=w&&typeof w.apply=="function"?w.apply:function(Y,$,Q){return Function.prototype.apply.call(Y,$,Q)};p=w&&typeof w.ownKeys=="function"?w.ownKeys:Object.getOwnPropertySymbols?function(Y){return Object.getOwnPropertyNames(Y).concat(Object.getOwnPropertySymbols(Y))}:function(Y){return Object.getOwnPropertyNames(Y)};var C=Number.isNaN||function(Y){return Y!=Y};function E(){E.init.call(this)}b.exports=E,b.exports.once=function(Y,$){return new Promise(function(Q,se){function R(ce){Y.removeListener($,X),se(ce)}function X(){typeof Y.removeListener=="function"&&Y.removeListener("error",R),Q([].slice.call(arguments))}Z(Y,$,X,{once:!0}),$!=="error"&&function(ce,oe,me){typeof ce.on=="function"&&Z(ce,"error",oe,{once:!0})}(Y,R)})},E.EventEmitter=E,E.prototype._events=void 0,E.prototype._eventsCount=0,E.prototype._maxListeners=void 0;var y=10;function P(Y){if(typeof Y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Y)}function m(Y){return Y._maxListeners===void 0?E.defaultMaxListeners:Y._maxListeners}function T(Y,$,Q,se){var R,X,ce,oe;if(P(Q),(X=Y._events)===void 0?(X=Y._events=Object.create(null),Y._eventsCount=0):(X.newListener!==void 0&&(Y.emit("newListener",$,Q.listener?Q.listener:Q),X=Y._events),ce=X[$]),ce===void 0)ce=X[$]=Q,++Y._eventsCount;else if(typeof ce=="function"?ce=X[$]=se?[Q,ce]:[ce,Q]:se?ce.unshift(Q):ce.push(Q),(R=m(Y))>0&&ce.length>R&&!ce.warned){ce.warned=!0;var me=new Error("Possible EventEmitter memory leak detected. "+ce.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");me.name="MaxListenersExceededWarning",me.emitter=Y,me.type=$,me.count=ce.length,oe=me,console&&console.warn&&console.warn(oe)}return Y}function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M(Y,$,Q){var se={fired:!1,wrapFn:void 0,target:Y,type:$,listener:Q},R=U.bind(se);return R.listener=Q,se.wrapFn=R,R}function _(Y,$,Q){var se=Y._events;if(se===void 0)return[];var R=se[$];return R===void 0?[]:typeof R=="function"?Q?[R.listener||R]:[R]:Q?function(X){for(var ce=new Array(X.length),oe=0;oe<ce.length;++oe)ce[oe]=X[oe].listener||X[oe];return ce}(R):x(R,R.length)}function I(Y){var $=this._events;if($!==void 0){var Q=$[Y];if(typeof Q=="function")return 1;if(Q!==void 0)return Q.length}return 0}function x(Y,$){for(var Q=new Array($),se=0;se<$;++se)Q[se]=Y[se];return Q}function Z(Y,$,Q,se){if(typeof Y.on=="function")se.once?Y.once($,Q):Y.on($,Q);else{if(typeof Y.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Y);Y.addEventListener($,function R(X){se.once&&Y.removeEventListener($,R),Q(X)})}}Object.defineProperty(E,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(Y){if(typeof Y!="number"||Y<0||C(Y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Y+".");y=Y}}),E.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},E.prototype.setMaxListeners=function(Y){if(typeof Y!="number"||Y<0||C(Y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Y+".");return this._maxListeners=Y,this},E.prototype.getMaxListeners=function(){return m(this)},E.prototype.emit=function(Y){for(var $=[],Q=1;Q<arguments.length;Q++)$.push(arguments[Q]);var se=Y==="error",R=this._events;if(R!==void 0)se=se&&R.error===void 0;else if(!se)return!1;if(se){var X;if($.length>0&&(X=$[0]),X instanceof Error)throw X;var ce=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw ce.context=X,ce}var oe=R[Y];if(oe===void 0)return!1;if(typeof oe=="function")F(oe,this,$);else{var me=oe.length,Ce=x(oe,me);for(Q=0;Q<me;++Q)F(Ce[Q],this,$)}return!0},E.prototype.addListener=function(Y,$){return T(this,Y,$,!1)},E.prototype.on=E.prototype.addListener,E.prototype.prependListener=function(Y,$){return T(this,Y,$,!0)},E.prototype.once=function(Y,$){return P($),this.on(Y,M(this,Y,$)),this},E.prototype.prependOnceListener=function(Y,$){return P($),this.prependListener(Y,M(this,Y,$)),this},E.prototype.removeListener=function(Y,$){var Q,se,R,X,ce;if(P($),(se=this._events)===void 0)return this;if((Q=se[Y])===void 0)return this;if(Q===$||Q.listener===$)--this._eventsCount==0?this._events=Object.create(null):(delete se[Y],se.removeListener&&this.emit("removeListener",Y,Q.listener||$));else if(typeof Q!="function"){for(R=-1,X=Q.length-1;X>=0;X--)if(Q[X]===$||Q[X].listener===$){ce=Q[X].listener,R=X;break}if(R<0)return this;R===0?Q.shift():function(oe,me){for(;me+1<oe.length;me++)oe[me]=oe[me+1];oe.pop()}(Q,R),Q.length===1&&(se[Y]=Q[0]),se.removeListener!==void 0&&this.emit("removeListener",Y,ce||$)}return this},E.prototype.off=E.prototype.removeListener,E.prototype.removeAllListeners=function(Y){var $,Q,se;if((Q=this._events)===void 0)return this;if(Q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Q[Y]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete Q[Y]),this;if(arguments.length===0){var R,X=Object.keys(Q);for(se=0;se<X.length;++se)(R=X[se])!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof($=Q[Y])=="function")this.removeListener(Y,$);else if($!==void 0)for(se=$.length-1;se>=0;se--)this.removeListener(Y,$[se]);return this},E.prototype.listeners=function(Y){return _(this,Y,!0)},E.prototype.rawListeners=function(Y){return _(this,Y,!1)},E.listenerCount=function(Y,$){return typeof Y.listenerCount=="function"?Y.listenerCount($):I.call(Y,$)},E.prototype.listenerCount=I,E.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},3101:function(b){var p=Array.isArray,w=Object.keys,F=Object.prototype.hasOwnProperty;b.exports=function C(E,y){if(E===y)return!0;if(E&&y&&typeof E=="object"&&typeof y=="object"){var P,m,T,U=p(E),M=p(y);if(U&&M){if((m=E.length)!=y.length)return!1;for(P=m;P--!=0;)if(!C(E[P],y[P]))return!1;return!0}if(U!=M)return!1;var _=E instanceof Date,I=y instanceof Date;if(_!=I)return!1;if(_&&I)return E.getTime()==y.getTime();var x=E instanceof RegExp,Z=y instanceof RegExp;if(x!=Z)return!1;if(x&&Z)return E.toString()==y.toString();var Y=w(E);if((m=Y.length)!==w(y).length)return!1;for(P=m;P--!=0;)if(!F.call(y,Y[P]))return!1;for(P=m;P--!=0;)if(!C(E[T=Y[P]],y[T]))return!1;return!0}return E!=E&&y!=y}},3362:function(b,p,w){(function(F,C,E,y,P){function m(D){if("contents"in D)for(var G=("styleAttrs"in D)?D.styleAttrs[y.byName.ruby.qname]:null,K=D.kind==="span"&&(G==="container"||G==="textContainer"||G==="baseContainer"),ge=D.contents.length-1;ge>=0;ge--)!K||"styleAttrs"in D.contents[ge]&&y.byName.ruby.qname in D.contents[ge].styleAttrs?m(D.contents[ge]):delete D.contents[ge]}function T(D,G,K,ge){var de=ge&&ge.timeContainer==="seq",Ke=0;ge&&(Ke=de&&K?K.end:ge.begin),G.begin=G.explicit_begin?G.explicit_begin+Ke:Ke;var wt=G.begin,lt=null;if("sets"in G)for(var ut=0;ut<G.sets.length;ut++)T(D,G.sets[ut],lt,G),wt=G.timeContainer==="seq"?G.sets[ut].end:Math.max(wt,G.sets[ut].end),lt=G.sets[ut];if("contents"in G){if("contents"in G)for(var nt=0;nt<G.contents.length;nt++)T(D,G.contents[nt],lt,G),wt=G.timeContainer==="seq"?G.contents[nt].end:Math.max(wt,G.contents[nt].end),lt=G.contents[nt]}else wt=de?G.begin:Number.POSITIVE_INFINITY;G.explicit_end!==null&&G.explicit_dur!==null?G.end=Math.min(G.begin+G.explicit_dur,Ke+G.explicit_end):G.explicit_end===null&&G.explicit_dur!==null?G.end=G.begin+G.explicit_dur:G.explicit_end!==null&&G.explicit_dur===null?G.end=Ke+G.explicit_end:G.end=wt,delete G.explicit_begin,delete G.explicit_dur,delete G.explicit_end,D._registerEvent(G)}function U(D){this.node=D}function M(){this.events=[],this.head=new _,this.body=null}function _(){this.styling=new I,this.layout=new Y}function I(){this.styles={},this.initials={}}function x(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function Z(){this.styleAttrs=null}function Y(){this.regions={}}function $(D,G){Q.call(this,"image"),this.src=D,this.type=G}function Q(D){this.kind=D}function se(D){this.id=D}function R(D){this.regionID=D}function X(D){this.styleAttrs=D}function ce(D){this.sets=D}function oe(D){this.contents=D}function me(D,G,K){this.explicit_begin=D,this.explicit_end=G,this.explicit_dur=K}function Ce(){Q.call(this,"body")}function Je(){Q.call(this,"div")}function we(){Q.call(this,"p")}function qe(){Q.call(this,"span")}function st(){Q.call(this,"span")}function ft(){Q.call(this,"br")}function be(){}function He(){}function vt(D){return D&&"xml:id"in D.attributes&&D.attributes["xml:id"].value||null}function Re(D){return D&&"style"in D.attributes?D.attributes.style.value.split(" "):[]}function Ye(D,G){var K={};if(D!==null)for(var ge in D.attributes){var de=D.attributes[ge].uri+" "+D.attributes[ge].local,Ke=y.byQName[de];if(Ke!==void 0){var wt=Ke.parse(D.attributes[ge].value);wt!==null?(K[de]=wt,Ke===y.byName.zIndex&&Ne(G,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):ne(G,"Cannot parse styling attribute "+de+" --> "+D.attributes[ge].value)}}return K}function ot(D,G,K){for(var ge in D.attributes)if(D.attributes[ge].uri===G&&D.attributes[ge].local===K)return D.attributes[ge].value;return null}function Ht(D,G,K){var ge,de=null;return(ge=/^(\d+(?:\.\d+)?)f$/.exec(K))!==null?G!==null&&(de=parseFloat(ge[1])/G):(ge=/^(\d+(?:\.\d+)?)t$/.exec(K))!==null?D!==null&&(de=parseFloat(ge[1])/D):(ge=/^(\d+(?:\.\d+)?)ms$/.exec(K))!==null?de=parseFloat(ge[1])/1e3:(ge=/^(\d+(?:\.\d+)?)s$/.exec(K))!==null?de=parseFloat(ge[1]):(ge=/^(\d+(?:\.\d+)?)h$/.exec(K))!==null?de=3600*parseFloat(ge[1]):(ge=/^(\d+(?:\.\d+)?)m$/.exec(K))!==null?de=60*parseFloat(ge[1]):(ge=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(K))!==null?de=3600*parseInt(ge[1])+60*parseInt(ge[2])+parseFloat(ge[3]):(ge=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(K))!==null&&G!==null&&(de=3600*parseInt(ge[1])+60*parseInt(ge[2])+parseInt(ge[3])+(ge[4]===null?0:parseInt(ge[4])/G)),de}function Bt(D,G,K){for(;G.styleRefs.length>0;){var ge=G.styleRefs.pop();ge in D.styles?(Bt(D,D.styles[ge],K),Dt(D.styles[ge].styleAttrs,G.styleAttrs)):ne(K,"Non-existant style id referenced")}}function Et(D,G,K,ge){for(var de=G.length-1;de>=0;de--){var Ke=G[de];Ke in D.styles?Dt(D.styles[Ke].styleAttrs,K):ne(ge,"Non-existant style id referenced")}}function Dt(D,G){for(var K in D)D.hasOwnProperty(K)&&(K in G||(G[K]=D[K]))}function Ne(D,G){if(D&&D.warn&&D.warn(G))throw G}function ne(D,G){if(D&&D.error&&D.error(G))throw G}function Be(D,G){throw D&&D.fatal&&D.fatal(G),G}function L(D,G){for(var K,ge=0,de=D.length-1;ge<=de;){var Ke=D[K=Math.floor((ge+de)/2)];if(Ke<G)ge=K+1;else{if(!(Ke>G))return{found:!0,index:K};de=K-1}}return{found:!1,index:ge}}F.fromXML=function(D,G,K){var ge=C.parser(!0,{xmlns:!0}),de=[],Ke=[],wt=[],lt=0,ut=null;ge.onclosetag=function(Mt){if(de[0]instanceof be)ut.head!==null&&ut.head.styling!==null&&Et(ut.head.styling,de[0].styleRefs,de[0].styleAttrs,G),delete de[0].styleRefs;else if(de[0]instanceof I)for(var _n in de[0].styles)de[0].styles.hasOwnProperty(_n)&&Bt(de[0],de[0].styles[_n],G);else if(de[0]instanceof we||de[0]instanceof qe){if(de[0].contents.length>1){var rn,cn=[de[0].contents[0]];for(rn=1;rn<de[0].contents.length;rn++)de[0].contents[rn]instanceof st&&cn[cn.length-1]instanceof st?cn[cn.length-1].text+=de[0].contents[rn].text:cn.push(de[0].contents[rn]);de[0].contents=cn}de[0]instanceof qe&&de[0].contents.length===1&&de[0].contents[0]instanceof st&&(de[0].text=de[0].contents[0].text,delete de[0].contents)}else de[0]instanceof U&&(de[0].node.uri===E.ns_tt&&de[0].node.local==="metadata"?lt--:lt>0&&K&&"onCloseTag"in K&&K.onCloseTag());wt.shift(),Ke.shift(),de.shift()},ge.ontext=function(Mt){if(de[0]!==void 0)if(de[0]instanceof qe||de[0]instanceof we){if(de[0]instanceof qe){var _n=de[0].styleAttrs[y.byName.ruby.qname];if(_n==="container"||_n==="textContainer"||_n==="baseContainer")return}var rn=new st;rn.initFromText(ut,de[0],Mt,Ke[0],wt[0],G),de[0].contents.push(rn)}else de[0]instanceof U&&lt>0&&K&&"onText"in K&&K.onText(Mt)},ge.onopentag=function(Mt){var _n=Mt.attributes["xml:space"];_n?wt.unshift(_n.value):wt.length===0?wt.unshift("default"):wt.unshift(wt[0]);var rn=Mt.attributes["xml:lang"];if(rn?Ke.unshift(rn.value):Ke.length===0?Ke.unshift(""):Ke.unshift(Ke[0]),Mt.uri===E.ns_tt)if(Mt.local==="tt")ut!==null&&Be(G,"Two <tt> elements at ("+this.line+","+this.column+")"),(ut=new M).initFromNode(Mt,Ke[0],G),de.unshift(ut);else if(Mt.local==="head")de[0]instanceof M||Be(G,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),de.unshift(ut.head);else if(Mt.local==="styling")de[0]instanceof _||Be(G,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),de.unshift(ut.head.styling);else if(Mt.local==="style"){var cn;de[0]instanceof I?((cn=new x).initFromNode(Mt,G),cn.id?ut.head.styling.styles[cn.id]=cn:ne(G,"<style> element missing @id attribute"),de.unshift(cn)):de[0]instanceof be?((cn=new x).initFromNode(Mt,G),Dt(cn.styleAttrs,de[0].styleAttrs),de.unshift(cn)):Be(G,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Mt.local==="initial"){var Ft;if(de[0]instanceof I){for(var Gn in(Ft=new Z).initFromNode(Mt,G),Ft.styleAttrs)Ft.styleAttrs.hasOwnProperty(Gn)&&(ut.head.styling.initials[Gn]=Ft.styleAttrs[Gn]);de.unshift(Ft)}else Be(G,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Mt.local==="layout")de[0]instanceof _||Be(G,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),de.unshift(ut.head.layout);else if(Mt.local==="region"){de[0]instanceof Y||Be(G,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var Sr=new be;Sr.initFromNode(ut,Mt,Ke[0],G),!Sr.id||Sr.id in ut.head.layout.regions?ne(G,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):ut.head.layout.regions[Sr.id]=Sr,de.unshift(Sr)}else if(Mt.local==="body"){de[0]instanceof M||Be(G,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),ut.body!==null&&Be(G,"Second <body> element at "+this.line+","+this.column+")");var Gr=new Ce;Gr.initFromNode(ut,Mt,Ke[0],G),ut.body=Gr,de.unshift(Gr)}else if(Mt.local==="div"){de[0]instanceof Je||de[0]instanceof Ce||Be(G,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var gr=new Je;gr.initFromNode(ut,de[0],Mt,Ke[0],G);var fi=gr.styleAttrs[y.byName.backgroundImage.qname];fi&&(gr.contents.push(new $(fi)),delete gr.styleAttrs[y.byName.backgroundImage.qname]),de[0].contents.push(gr),de.unshift(gr)}else if(Mt.local==="image"){de[0]instanceof Je||Be(G,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var ao=new $;ao.initFromNode(ut,de[0],Mt,Ke[0],G),de[0].contents.push(ao),de.unshift(ao)}else if(Mt.local==="p"){de[0]instanceof Je||Be(G,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Hr=new we;Hr.initFromNode(ut,de[0],Mt,Ke[0],G),de[0].contents.push(Hr),de.unshift(Hr)}else if(Mt.local==="span"){de[0]instanceof qe||de[0]instanceof we||Be(G,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var so=new qe;so.initFromNode(ut,de[0],Mt,Ke[0],wt[0],G),de[0].contents.push(so),de.unshift(so)}else if(Mt.local==="br"){de[0]instanceof qe||de[0]instanceof we||Be(G,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var xi=new ft;xi.initFromNode(ut,de[0],Mt,Ke[0],G),de[0].contents.push(xi),de.unshift(xi)}else if(Mt.local==="set"){de[0]instanceof qe||de[0]instanceof we||de[0]instanceof Je||de[0]instanceof Ce||de[0]instanceof be||de[0]instanceof ft||Be(G,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Fi=new He;Fi.initFromNode(ut,de[0],Mt,G),de[0].sets.push(Fi),de.unshift(Fi)}else de.unshift(new U(Mt));else de.unshift(new U(Mt));if(de[0]instanceof U){if(Mt.uri===E.ns_tt&&Mt.local==="metadata")lt++;else if(lt>0&&K&&"onOpenTag"in K){var no=[];for(var uo in Mt.attributes)no[Mt.attributes[uo].uri+" "+Mt.attributes[uo].local]={uri:Mt.attributes[uo].uri,local:Mt.attributes[uo].local,value:Mt.attributes[uo].value};K.onOpenTag(Mt.uri,Mt.local,no)}}},ge.write(D).close(),delete ut.head.styling.styles;var nt=!1;for(var ht in ut.head.layout.regions)if(ut.head.layout.regions.hasOwnProperty(ht)){nt=!0;break}if(!nt){var _t=be.prototype.createDefaultRegion(ut.lang);ut.head.layout.regions[_t.id]=_t}for(var Tt in ut.head.layout.regions)ut.head.layout.regions.hasOwnProperty(Tt)&&T(ut,ut.head.layout.regions[Tt],null,null);return ut.body&&T(ut,ut.body,null,null),ut.body&&m(ut.body),ut},M.prototype.initFromNode=function(D,G,K){var ge=function(lt,ut){var nt=ot(lt,E.ns_ttp,"cellResolution"),ht=15,_t=32;if(nt!==null){var Tt=/(\d+) (\d+)/.exec(nt);Tt!==null?(_t=parseInt(Tt[1]),ht=parseInt(Tt[2])):Ne(ut,"Malformed cellResolution value (using initial value instead)")}return{w:_t,h:ht}}(D,K);this.cellLength={h:new P.ComputedLength(0,1/ge.h),w:new P.ComputedLength(1/ge.w,0)};var de=function(lt,ut){var nt,ht=ot(lt,E.ns_ttp,"frameRate"),_t=30;ht!==null&&((nt=/(\d+)/.exec(ht))!==null?_t=parseInt(nt[1]):Ne(ut,"Malformed frame rate attribute (using initial value instead)"));var Tt=ot(lt,E.ns_ttp,"frameRateMultiplier"),Mt=1;Tt!==null&&((nt=/(\d+) (\d+)/.exec(Tt))!==null?Mt=parseInt(nt[1])/parseInt(nt[2]):Ne(ut,"Malformed frame rate multiplier attribute (using initial value instead)"));var _n=Mt*_t,rn=1,cn=ot(lt,E.ns_ttp,"tickRate");return cn===null?ht!==null&&(rn=_n):(nt=/(\d+)/.exec(cn))!==null?rn=parseInt(nt[1]):Ne(ut,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:_n,tickRate:rn}}(D,K);this.effectiveFrameRate=de.effectiveFrameRate,this.tickRate=de.tickRate,this.aspectRatio=function(lt,ut){var nt=ot(lt,E.ns_ittp,"aspectRatio");nt===null&&(nt=ot(lt,E.ns_ttp,"displayAspectRatio"));var ht=null;if(nt!==null){var _t=/(\d+)\s+(\d+)/.exec(nt);if(_t!==null){var Tt=parseInt(_t[1]),Mt=parseInt(_t[2]);Tt!==0&&Mt!==0?ht=Tt/Mt:ne(ut,"Illegal aspectRatio values (ignoring)")}else ne(ut,"Malformed aspectRatio attribute (ignoring)")}return ht}(D,K);var Ke=ot(D,E.ns_ttp,"timeBase");Ke!==null&&Ke!=="media"&&Be(K,"Unsupported time base");var wt=function(lt,ut){var nt=ot(lt,E.ns_tts,"extent");if(nt===null)return null;var ht=nt.split(" ");if(ht.length!==2)return Ne(ut,"Malformed extent (ignoring)"),null;var _t=P.parseLength(ht[0]),Tt=P.parseLength(ht[1]);return Tt&&_t?{h:Tt,w:_t}:(Ne(ut,"Malformed extent values (ignoring)"),null)}(D,K);wt===null?this.pxLength={h:null,w:null}:(wt.h.unit==="px"&&wt.w.unit==="px"||Be(K,"Extent on TT must be in px or absent"),this.pxLength={h:new P.ComputedLength(0,1/wt.h.value),w:new P.ComputedLength(1/wt.w.value,0)}),this.dimensions={h:new P.ComputedLength(0,1),w:new P.ComputedLength(1,0)},this.lang=G},M.prototype._registerEvent=function(D){if(!(D.end<=D.begin)){var G=L(this.events,D.begin);if(G.found||this.events.splice(G.index,0,D.begin),D.end!==Number.POSITIVE_INFINITY){var K=L(this.events,D.end);K.found||this.events.splice(K.index,0,D.end)}}},M.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},M.prototype.getMediaTimeEvents=function(){return this.events},x.prototype.initFromNode=function(D,G){this.id=vt(D),this.styleAttrs=Ye(D,G),this.styleRefs=Re(D)},Z.prototype.initFromNode=function(D,G){for(var K in this.styleAttrs={},D.attributes)if(D.attributes[K].uri===E.ns_itts||D.attributes[K].uri===E.ns_ebutts||D.attributes[K].uri===E.ns_tts){var ge=D.attributes[K].uri+" "+D.attributes[K].local;this.styleAttrs[ge]=D.attributes[K].value}},$.prototype.initFromNode=function(D,G,K,ge,de){this.src="src"in K.attributes?K.attributes.src.value:null,this.src||ne(de,"Invalid image@src attribute"),this.type="type"in K.attributes?K.attributes.type.value:null,this.type||ne(de,"Invalid image@type attribute"),X.prototype.initFromNode.call(this,D,G,K,de),me.prototype.initFromNode.call(this,D,G,K,de),ce.prototype.initFromNode.call(this,D,G,K,de),R.prototype.initFromNode.call(this,D,G,K,de),this.lang=ge},se.prototype.initFromNode=function(D,G,K,ge){this.id=vt(K)},R.prototype.initFromNode=function(D,G,K,ge){this.regionID=function(de){return de&&"region"in de.attributes?de.attributes.region.value:""}(K)},X.prototype.initFromNode=function(D,G,K,ge){this.styleAttrs=Ye(K,ge),D.head!==null&&D.head.styling!==null&&Et(D.head.styling,Re(K),this.styleAttrs,ge)},ce.prototype.initFromNode=function(D,G,K,ge){this.sets=[]},oe.prototype.initFromNode=function(D,G,K,ge){this.contents=[]},me.prototype.initFromNode=function(D,G,K,ge){var de=function(Ke,wt,lt,ut){var nt=null;lt&&"begin"in lt.attributes&&(nt=Ht(Ke.tickRate,Ke.effectiveFrameRate,lt.attributes.begin.value))===null&&Ne(ut,"Malformed begin value "+lt.attributes.begin.value+" (using 0)");var ht=null;lt&&"dur"in lt.attributes&&(ht=Ht(Ke.tickRate,Ke.effectiveFrameRate,lt.attributes.dur.value))===null&&Ne(ut,"Malformed dur value "+lt.attributes.dur.value+" (ignoring)");var _t=null;return lt&&"end"in lt.attributes&&(_t=Ht(Ke.tickRate,Ke.effectiveFrameRate,lt.attributes.end.value))===null&&Ne(ut,"Malformed end value (ignoring)"),{explicit_begin:nt,explicit_end:_t,explicit_dur:ht}}(D,0,K,ge);this.explicit_begin=de.explicit_begin,this.explicit_end=de.explicit_end,this.explicit_dur=de.explicit_dur,this.timeContainer=function(Ke,wt){var lt=Ke&&"timeContainer"in Ke.attributes?Ke.attributes.timeContainer.value:null;return lt&&lt!=="par"?lt==="seq"?"seq":(ne(wt,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(K,ge)},Ce.prototype.initFromNode=function(D,G,K,ge){X.prototype.initFromNode.call(this,D,null,G,ge),me.prototype.initFromNode.call(this,D,null,G,ge),ce.prototype.initFromNode.call(this,D,null,G,ge),R.prototype.initFromNode.call(this,D,null,G,ge),oe.prototype.initFromNode.call(this,D,null,G,ge),this.lang=K},Je.prototype.initFromNode=function(D,G,K,ge,de){X.prototype.initFromNode.call(this,D,G,K,de),me.prototype.initFromNode.call(this,D,G,K,de),ce.prototype.initFromNode.call(this,D,G,K,de),R.prototype.initFromNode.call(this,D,G,K,de),oe.prototype.initFromNode.call(this,D,G,K,de),this.lang=ge},we.prototype.initFromNode=function(D,G,K,ge,de){X.prototype.initFromNode.call(this,D,G,K,de),me.prototype.initFromNode.call(this,D,G,K,de),ce.prototype.initFromNode.call(this,D,G,K,de),R.prototype.initFromNode.call(this,D,G,K,de),oe.prototype.initFromNode.call(this,D,G,K,de),this.lang=ge},qe.prototype.initFromNode=function(D,G,K,ge,de,Ke){X.prototype.initFromNode.call(this,D,G,K,Ke),me.prototype.initFromNode.call(this,D,G,K,Ke),ce.prototype.initFromNode.call(this,D,G,K,Ke),R.prototype.initFromNode.call(this,D,G,K,Ke),oe.prototype.initFromNode.call(this,D,G,K,Ke),this.space=de,this.lang=ge},st.prototype.initFromText=function(D,G,K,ge,de,Ke){me.prototype.initFromNode.call(this,D,G,null,Ke),this.text=K,this.space=de,this.lang=ge},ft.prototype.initFromNode=function(D,G,K,ge,de){R.prototype.initFromNode.call(this,D,G,K,de),me.prototype.initFromNode.call(this,D,G,K,de),this.lang=ge},be.prototype.createDefaultRegion=function(D){var G=new be;return se.call(G,""),X.call(G,{}),ce.call(G,[]),me.call(G,0,Number.POSITIVE_INFINITY,null),this.lang=D,G},be.prototype.initFromNode=function(D,G,K,ge){se.prototype.initFromNode.call(this,D,null,G,ge),me.prototype.initFromNode.call(this,D,null,G,ge),ce.prototype.initFromNode.call(this,D,null,G,ge),this.styleAttrs=Ye(G,ge),this.styleRefs=Re(G),this.lang=K},He.prototype.initFromNode=function(D,G,K,ge){me.prototype.initFromNode.call(this,D,G,K,ge);var de=Ye(K,ge);for(var Ke in this.qname=null,this.value=null,de)if(de.hasOwnProperty(Ke)){if(this.qname){ne(ge,"More than one style specified on set");break}this.qname=Ke,this.value=de[Ke]}}})(p,typeof sax>"u"?w(5378):sax,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},506:function(b,p,w){var F=/firefox/i.test(navigator.userAgent);(function(C,E,y){function P(oe,me,Ce,Je){var we;if(Ce.kind==="region")(we=document.createElement("div")).style.position="absolute";else if(Ce.kind==="body")we=document.createElement("div");else if(Ce.kind==="div")we=document.createElement("div");else if(Ce.kind==="image"){if(we=document.createElement("img"),oe.imgResolver!==null&&Ce.src!==null){var qe=oe.imgResolver(Ce.src,we);qe&&(we.src=qe),we.height=oe.regionH,we.width=oe.regionW}}else if(Ce.kind==="p")we=document.createElement("p");else if(Ce.kind==="span")if(Ce.styleAttrs[y.byName.ruby.qname]==="container")we=document.createElement("ruby"),oe.ruby=!0;else if(Ce.styleAttrs[y.byName.ruby.qname]==="base")we=document.createElement("span");else if(Ce.styleAttrs[y.byName.ruby.qname]==="text")we=document.createElement("rt");else if(Ce.styleAttrs[y.byName.ruby.qname]==="baseContainer")we=document.createElement("rbc");else if(Ce.styleAttrs[y.byName.ruby.qname]==="textContainer")we=document.createElement("rtc");else{if(Ce.styleAttrs[y.byName.ruby.qname]==="delimiter")return;we=document.createElement("span")}else Ce.kind==="br"&&(we=document.createElement("br"));if(we){if(Ce.lang&&(Ce.kind!=="region"&&Ce.lang===Je.lang||(we.lang=Ce.lang)),me.appendChild(we),we.style.margin="0",Ce.kind==="region"){var st=Ce.styleAttrs[y.byName.writingMode.qname];st==="lrtb"||st==="lr"?(oe.ipd="lr",oe.bpd="tb"):st==="rltb"||st==="rl"?(oe.ipd="rl",oe.bpd="tb"):st==="tblr"?(oe.ipd="tb",oe.bpd="lr"):st!=="tbrl"&&st!=="tb"||(oe.ipd="tb",oe.bpd="rl")}else if(Ce.kind==="p"&&oe.bpd==="tb"){var ft=Ce.styleAttrs[y.byName.direction.qname];oe.ipd=ft==="ltr"?"lr":"rl"}for(var be=0;be<Z.length;be++){var He=Z[be],vt=Ce.styleAttrs[He.qname];vt!==void 0&&He.map!==null&&He.map(oe,we,Ce,vt)}var Re=we,Ye=Ce.styleAttrs[y.byName.linePadding.qname];if(Ye&&!Ye.isZero()){var ot=Ye.toUsedLength(oe.w,oe.h);if(ot>0){var Ht=Math.ceil(ot)+"px";oe.bpd==="tb"?(Re.style.paddingLeft=Ht,Re.style.paddingRight=Ht):(Re.style.paddingTop=Ht,Re.style.paddingBottom=Ht),oe.lp=Ye}}var Bt=Ce.styleAttrs[y.byName.multiRowAlign.qname];if(Bt&&Bt!=="auto"){var Et=document.createElement("span");Et.style.display="inline-block",Et.style.textAlign=Bt,we.appendChild(Et),Re=Et,oe.mra=Bt}var Dt=Ce.styleAttrs[y.byName.rubyReserve.qname];if(Dt&&Dt[0]!=="none"&&(oe.rubyReserve=Dt),Ce.styleAttrs[y.byName.fillLineGap.qname]&&(oe.flg=!0),Ce.kind==="span"&&Ce.text){var Ne=Ce.styleAttrs[y.byName.textEmphasis.qname];if(Ne&&Ne.style!=="none"&&(oe.textEmphasis=!0),y.byName.textCombine.qname in Ce.styleAttrs&&Ce.styleAttrs[y.byName.textCombine.qname]==="all")we.textContent=Ce.text,we._isd_element=Ce,Ne&&I(oe,we,0,Ne);else for(var ne="",Be=0;Be<Ce.text.length;Be++){ne+=Ce.text.charAt(Be);var L=Ce.text.charCodeAt(Be);if(L<55296||L>56319||Be===Ce.text.length-1){var D=document.createElement("span");D.textContent=ne,Ne&&I(oe,D,0,Ne),we.appendChild(D),ne="",D._isd_element=Ce}}}if("contents"in Ce)for(var G=0;G<Ce.contents.length;G++)P(oe,Re,Ce.contents[G],Ce);var K=[];if(Ce.kind==="p"&&(_(oe,Re,K,null),oe.rubyReserve&&(function(lt,ut){for(var nt=0;nt<lt.length;nt++){var ht,_t,Tt=document.createElement("ruby"),Mt=document.createElement("span");Mt.textContent="",Tt.appendChild(Mt);var _n,rn=ut.rubyReserve[1].toUsedLength(ut.w,ut.h)+"px";ut.rubyReserve[0]==="both"||ut.rubyReserve[0]==="outside"&&lt.length==1?((ht=document.createElement("rtc")).style[se]=Q?"after":"under",ht.textContent="",ht.style.fontSize=rn,(_t=document.createElement("rtc")).style[se]=Q?"before":"over",_t.textContent="",_t.style.fontSize=rn,Tt.appendChild(ht),Tt.appendChild(_t)):((ht=document.createElement("rtc")).textContent="",ht.style.fontSize=rn,_n=ut.rubyReserve[0]==="after"||ut.rubyReserve[0]==="outside"&&nt>0?Q?"after":ut.bpd==="tb"||ut.bpd==="rl"?"under":"over":Q?"before":ut.bpd==="tb"||ut.bpd==="rl"?"over":"under",ht.style[se]=_n,Tt.appendChild(ht));for(var cn=null,Ft=0;Ft<lt[nt].rbc.length;Ft++)if(lt[nt].rbc[Ft].localName==="ruby"){cn=lt[nt].rbc[Ft];for(var Gn=0;Gn<cn.style.length;Gn++)Tt.style.setProperty(cn.style.item(Gn),cn.style.getPropertyValue(cn.style.item(Gn)));break}(cn=cn||lt[nt].elements[0].node).parentElement.insertBefore(Tt,cn)}}(K,oe),oe.rubyReserve=null),(oe.ruby||oe.rubyReserve)&&(function(lt,ut){for(var nt=0;nt<lt.length;nt++)for(var ht=0;ht<lt[nt].rbc.length;ht++){var _t;lt[nt].rbc[ht].style[se]||(_t=Q?nt===0?"before":"after":ut.bpd==="tb"||ut.bpd==="rl"?nt===0?"over":"under":nt===0?"under":"over",lt[nt].rbc[ht].style[se]=_t)}}(K,oe),oe.ruby=null),oe.textEmphasis&&(function(lt,ut){for(var nt=0;nt<lt.length;nt++)for(var ht=0;ht<lt[nt].te.length;ht++){var _t;lt[nt].te[ht].style[X]&&lt[nt].te[ht].style[X]!=="none"||(_t=ut.bpd==="tb"?nt===0?"left over":"left under":ut.bpd==="rl"?nt===0?"right under":"left under":nt===0?"left under":"right under",lt[nt].te[ht].style[X]=_t)}}(K,oe),oe.textEmphasis=null),oe.mra&&(function(lt){for(var ut=0;ut<lt.length-1;ut++){var nt=lt[ut].elements.length;if(nt!==0&&lt[ut].br===!1){var ht=document.createElement("br"),_t=lt[ut].elements[nt-1].node;_t.parentElement.insertBefore(ht,_t.nextSibling)}}}(K),oe.mra=null),oe.lp&&(function(lt,ut,nt){if(lt!==null)for(var ht=0;ht<lt.length;ht++){var _t=lt[ht].elements.length,Tt=Math.ceil(ut)+"px",Mt="-"+Math.ceil(ut)+"px";if(_t!==0){var _n=lt[ht].elements[lt[ht].start_elem],rn=lt[ht].elements[lt[ht].end_elem];if(_n===rn){var cn=_n.node.getBoundingClientRect();if(cn.width==0||cn.height==0)continue}nt.ipd==="lr"?(_n.node.style.marginLeft=Mt,_n.node.style.paddingLeft=Tt):nt.ipd==="rl"?(_n.node.style.paddingRight=Tt,_n.node.style.marginRight=Mt):nt.ipd==="tb"&&(_n.node.style.paddingTop=Tt,_n.node.style.marginTop=Mt),nt.ipd==="lr"?(F||(rn.node.style.marginRight=Mt),rn.node.style.paddingRight=Tt):nt.ipd==="rl"?(rn.node.style.paddingLeft=Tt,F||(rn.node.style.marginLeft=Mt)):nt.ipd==="tb"&&(rn.node.style.paddingBottom=Tt,rn.node.style.marginBottom=Mt)}}}(K,oe.lp.toUsedLength(oe.w,oe.h),oe),oe.lp=null),function(lt,ut){for(var nt=0;nt<lt.length;nt++)for(var ht=lt[nt],_t=1;_t<ht.elements.length;){var Tt=ht.elements[_t-1],Mt=ht.elements[_t];T(Tt.node,Mt.node,ut)?ht.elements.splice(_t,1):_t++}for(var _n,rn,cn=[],Ft=0;Ft<lt.length;Ft++)for(var Gn=0;Gn<lt[Ft].elements.length;Gn++)(rn=m(_n=lt[Ft].elements[Gn].node,cn,!1))&&(_n.style.backgroundColor=rn);for(var Sr=0;Sr<cn.length;Sr++)cn[Sr].style.backgroundColor=""}(K,oe),oe.flg)){var ge=M(Re.getBoundingClientRect(),oe);(function(lt,ut,nt,ht,_t){for(var Tt=Math.sign(nt-ut),Mt=0;Mt<=lt.length;Mt++){var _n,rn,cn,Ft;if(_n=Mt===0?Math.round(ut):Mt===lt.length?Math.round(nt):Math.round((lt[Mt-1].after+lt[Mt].before)/2),Mt>0&&lt[Mt-1])for(cn=0;cn<lt[Mt-1].elements.length;cn++)rn=Tt*(_n-(Ft=lt[Mt-1].elements[cn]).after)+"px",ht.bpd==="lr"?Ft.node.style.paddingRight=rn:ht.bpd==="rl"?Ft.node.style.paddingLeft=rn:ht.bpd==="tb"&&(Ft.node.style.paddingBottom=rn);if(Mt<lt.length)for(cn=0;cn<lt[Mt].elements.length;cn++)rn=Tt*((Ft=lt[Mt].elements[cn]).before-_n)+"px",ht.bpd==="lr"?Ft.node.style.paddingLeft=rn:ht.bpd==="rl"?Ft.node.style.paddingRight=rn:ht.bpd==="tb"&&(Ft.node.style.paddingTop=rn)}})(K,ge.before,ge.after,oe),oe.flg=null}if(Ce.kind==="region"&&oe.bpd==="tb"&&oe.enableRollUp&&Ce.contents.length>0&&Ce.styleAttrs[y.byName.displayAlign.qname]==="after"){_(oe,Re,K,null);var de=new U(Ce.id===""?"_":Ce.id,K);if(oe.currentISDState[de.id]=de,oe.previousISDState&&de.id in oe.previousISDState&&oe.previousISDState[de.id].plist.length>0&&de.plist.length>1&&de.plist[de.plist.length-2].text===oe.previousISDState[de.id].plist[oe.previousISDState[de.id].plist.length-1].text){var Ke=we.firstElementChild,wt=de.plist[de.plist.length-1].after-de.plist[de.plist.length-1].before;Ke.style.bottom="-"+wt+"px",Ke.style.transition="transform 0.4s",Ke.style.position="relative",Ke.style.transform="translateY(-"+wt+"px)"}}}else ce(oe.errorHandler,"Error processing ISD element kind: "+Ce.kind)}function m(oe,me,Ce){return oe.style.backgroundColor?(Ce&&!me.includes(oe)&&me.push(oe),oe.style.backgroundColor):oe.parentElement.nodeName==="SPAN"||oe.parentElement.nodeName==="RUBY"||oe.parentElement.nodeName==="RBC"||oe.parentElement.nodeName==="RTC"||oe.parentElement.nodeName==="RT"?m(oe.parentElement,me,!0):void 0}function T(oe,me,Ce){if(oe.tagName==="SPAN"&&me.tagName==="SPAN"&&oe._isd_element===me._isd_element){if(!oe._isd_element)return ce(Ce.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;oe.textContent+=me.textContent;for(var Je=0;Je<me.style.length;Je++){var we=me.style[Je];(we.indexOf("border")>=0||we.indexOf("padding")>=0||we.indexOf("margin")>=0)&&(oe.style[we]=me.style[we])}return me.parentElement.removeChild(me),!0}return!1}function U(oe,me){this.id=oe,this.plist=me}function M(oe,me){var Ce={before:null,after:null,start:null,end:null};return me.bpd==="tb"?(Ce.before=oe.top,Ce.after=oe.bottom,me.ipd==="lr"?(Ce.start=oe.left,Ce.end=oe.right):(Ce.start=oe.right,Ce.end=oe.left)):me.bpd==="lr"?(Ce.before=oe.left,Ce.after=oe.right,Ce.start=oe.top,Ce.end=oe.bottom):me.bpd==="rl"&&(Ce.before=oe.right,Ce.after=oe.left,Ce.start=oe.top,Ce.end=oe.bottom),Ce}function _(oe,me,Ce,Je){if(me.localName!=="rt"&&me.localName!=="rtc"){var we,qe,st,ft,be=me.style.backgroundColor||Je;if(me.childElementCount===0)if(me.localName==="span"||me.localName==="rb"){var He=M(me.getBoundingClientRect(),oe);if(Ce.length!==0&&(we=He.before,qe=He.after,st=Ce[Ce.length-1].before,qe<(ft=Ce[Ce.length-1].after)&&we>st||ft<=qe&&st>=we)){var vt=Math.sign(He.after-He.before),Re=Math.sign(He.end-He.start);vt*(He.before-Ce[Ce.length-1].before)<0&&(Ce[Ce.length-1].before=He.before),vt*(He.after-Ce[Ce.length-1].after)>0&&(Ce[Ce.length-1].after=He.after),Re*(He.start-Ce[Ce.length-1].start)<0&&(Ce[Ce.length-1].start=He.start,Ce[Ce.length-1].start_elem=Ce[Ce.length-1].elements.length),Re*(He.end-Ce[Ce.length-1].end)>0&&(Ce[Ce.length-1].end=He.end,Ce[Ce.length-1].end_elem=Ce[Ce.length-1].elements.length)}else Ce.push({before:He.before,after:He.after,start:He.start,end:He.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});Ce[Ce.length-1].text+=me.textContent,Ce[Ce.length-1].elements.push({node:me,bgcolor:be,before:He.before,after:He.after})}else me.localName==="br"&&Ce.length!==0&&(Ce[Ce.length-1].br=!0);else for(var Ye=me.firstChild;Ye;)Ye.nodeType===Node.ELEMENT_NODE&&(_(oe,Ye,Ce,be),Ye.localName==="ruby"||Ye.localName==="rtc"?Ce.length>0&&Ce[Ce.length-1].rbc.push(Ye):Ye.localName==="span"&&Ye.style[R]&&Ye.style[R]!=="none"&&Ce.length>0&&Ce[Ce.length-1].te.push(Ye)),Ye=Ye.nextSibling}}function I(oe,me,Ce,Je){var we;Je.style!=="none"&&(Je.style==="auto"?me.style[R]="filled":me.style[R]=Je.style+" "+Je.symbol,(Je.position==="before"||Je.position==="after")&&(we=oe.bpd==="tb"?Je.position==="before"?"left over":"left under":oe.bpd==="rl"?Je.position==="before"?"right under":"left under":Je.position==="before"?"left under":"right under",me.style[X]=we))}function x(oe,me){this.qname=oe,this.map=me}C.render=function(oe,me,Ce,Je,we,qe,st,ft,be){var He=Je||me.clientHeight,vt=we||me.clientWidth;if(oe.aspectRatio!==null){var Re=He*oe.aspectRatio;Re>vt?He=Math.round(vt/oe.aspectRatio):vt=Re}var Ye=document.createElement("div");Ye.style.position="relative",Ye.style.width=vt+"px",Ye.style.height=He+"px",Ye.style.margin="auto",Ye.style.top=0,Ye.style.bottom=0,Ye.style.left=0,Ye.style.right=0,Ye.style.zIndex=0;var ot={h:He,w:vt,regionH:null,regionW:null,imgResolver:Ce,displayForcedOnlyMode:qe||!1,isd:oe,errorHandler:st,previousISDState:ft,enableRollUp:be||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(me.appendChild(Ye),"contents"in oe)for(var Ht=0;Ht<oe.contents.length;Ht++)P(ot,Ye,oe.contents[Ht],oe);return ot.currentISDState};for(var Z=[new x("http://www.w3.org/ns/ttml#styling backgroundColor",function(oe,me,Ce,Je){Je[3]!==0&&(me.style.backgroundColor="rgba("+Je[0].toString()+","+Je[1].toString()+","+Je[2].toString()+","+(Je[3]/255).toString()+")")}),new x("http://www.w3.org/ns/ttml#styling color",function(oe,me,Ce,Je){me.style.color="rgba("+Je[0].toString()+","+Je[1].toString()+","+Je[2].toString()+","+(Je[3]/255).toString()+")"}),new x("http://www.w3.org/ns/ttml#styling direction",function(oe,me,Ce,Je){me.style.direction=Je}),new x("http://www.w3.org/ns/ttml#styling display",function(oe,me,Ce,Je){}),new x("http://www.w3.org/ns/ttml#styling displayAlign",function(oe,me,Ce,Je){me.style.display="flex",me.style.flexDirection="column",Je==="before"?me.style.justifyContent="flex-start":Je==="center"?me.style.justifyContent="center":Je==="after"&&(me.style.justifyContent="flex-end")}),new x("http://www.w3.org/ns/ttml#styling extent",function(oe,me,Ce,Je){oe.regionH=Je.h.toUsedLength(oe.w,oe.h),oe.regionW=Je.w.toUsedLength(oe.w,oe.h);var we=0,qe=0,st=Ce.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];st&&(we=st[0].toUsedLength(oe.w,oe.h)+st[2].toUsedLength(oe.w,oe.h),qe=st[1].toUsedLength(oe.w,oe.h)+st[3].toUsedLength(oe.w,oe.h)),me.style.height=oe.regionH-we+"px",me.style.width=oe.regionW-qe+"px"}),new x("http://www.w3.org/ns/ttml#styling fontFamily",function(oe,me,Ce,Je){for(var we=[],qe=0;qe<Je.length;qe++)Je[qe]=Je[qe].trim(),Je[qe]==="monospaceSerif"?(we.push("Courier New"),we.push('"Liberation Mono"'),we.push("Courier"),we.push("monospace")):Je[qe]==="proportionalSansSerif"?(we.push("Arial"),we.push("Helvetica"),we.push('"Liberation Sans"'),we.push("sans-serif")):Je[qe]==="monospace"?we.push("monospace"):Je[qe]==="sansSerif"?we.push("sans-serif"):Je[qe]==="serif"?we.push("serif"):Je[qe]==="monospaceSansSerif"?(we.push("Consolas"),we.push("monospace")):Je[qe]==="proportionalSerif"?we.push("serif"):we.push(Je[qe]);if(we.length>0){for(var st=[we[0]],ft=1;ft<we.length;ft++)st.indexOf(we[ft])==-1&&st.push(we[ft]);we=st}me.style.fontFamily=we.join(",")}),new x("http://www.w3.org/ns/ttml#styling shear",function(oe,me,Ce,Je){if(Je!==0){var we=-.9*Je;oe.bpd==="tb"?me.style.transform="skewX("+we+"deg)":me.style.transform="skewY("+we+"deg)"}}),new x("http://www.w3.org/ns/ttml#styling fontSize",function(oe,me,Ce,Je){me.style.fontSize=Je.toUsedLength(oe.w,oe.h)+"px"}),new x("http://www.w3.org/ns/ttml#styling fontStyle",function(oe,me,Ce,Je){me.style.fontStyle=Je}),new x("http://www.w3.org/ns/ttml#styling fontWeight",function(oe,me,Ce,Je){me.style.fontWeight=Je}),new x("http://www.w3.org/ns/ttml#styling lineHeight",function(oe,me,Ce,Je){me.style.lineHeight=Je==="normal"?"normal":Je.toUsedLength(oe.w,oe.h)+"px"}),new x("http://www.w3.org/ns/ttml#styling opacity",function(oe,me,Ce,Je){me.style.opacity=Je}),new x("http://www.w3.org/ns/ttml#styling origin",function(oe,me,Ce,Je){me.style.top=Je.h.toUsedLength(oe.w,oe.h)+"px",me.style.left=Je.w.toUsedLength(oe.w,oe.h)+"px"}),new x("http://www.w3.org/ns/ttml#styling overflow",function(oe,me,Ce,Je){me.style.overflow=Je}),new x("http://www.w3.org/ns/ttml#styling padding",function(oe,me,Ce,Je){var we=[];we[0]=Je[0].toUsedLength(oe.w,oe.h)+"px",we[1]=Je[3].toUsedLength(oe.w,oe.h)+"px",we[2]=Je[2].toUsedLength(oe.w,oe.h)+"px",we[3]=Je[1].toUsedLength(oe.w,oe.h)+"px",me.style.padding=we.join(" ")}),new x("http://www.w3.org/ns/ttml#styling position",function(oe,me,Ce,Je){me.style.top=Je.h.toUsedLength(oe.w,oe.h)+"px",me.style.left=Je.w.toUsedLength(oe.w,oe.h)+"px"}),new x("http://www.w3.org/ns/ttml#styling rubyAlign",function(oe,me,Ce,Je){me.style.rubyAlign=Je==="spaceAround"?"space-around":"center"}),new x("http://www.w3.org/ns/ttml#styling rubyPosition",function(oe,me,Ce,Je){var we;Je!=="before"&&Je!=="after"||(we=Q?Je:oe.bpd==="tb"||oe.bpd==="rl"?Je==="before"?"over":"under":Je==="before"?"under":"over",me.parentElement.style[se]=we)}),new x("http://www.w3.org/ns/ttml#styling showBackground",null),new x("http://www.w3.org/ns/ttml#styling textAlign",function(oe,me,Ce,Je){var we;we=Je==="start"?oe.ipd==="rl"?"right":"left":Je==="end"?oe.ipd==="rl"?"left":"right":Je,me.style.textAlign=we}),new x("http://www.w3.org/ns/ttml#styling textDecoration",function(oe,me,Ce,Je){me.style.textDecoration=Je.join(" ").replace("lineThrough","line-through")}),new x("http://www.w3.org/ns/ttml#styling textOutline",function(oe,me,Ce,Je){}),new x("http://www.w3.org/ns/ttml#styling textShadow",function(oe,me,Ce,Je){var we=Ce.styleAttrs[y.byName.textOutline.qname];if(Je==="none"&&we==="none")me.style.textShadow="";else{var qe=[];if(we!=="none"){var st="rgba("+we.color[0].toString()+","+we.color[1].toString()+","+we.color[2].toString()+","+(we.color[3]/255).toString()+")";qe.push("1px 1px 1px "+st),qe.push("-1px 1px 1px "+st),qe.push("1px -1px 1px "+st),qe.push("-1px -1px 1px "+st)}if(Je!=="none")for(var ft=0;ft<Je.length;ft++)qe.push(Je[ft].x_off.toUsedLength(oe.w,oe.h)+"px "+Je[ft].y_off.toUsedLength(oe.w,oe.h)+"px "+Je[ft].b_radius.toUsedLength(oe.w,oe.h)+"px rgba("+Je[ft].color[0].toString()+","+Je[ft].color[1].toString()+","+Je[ft].color[2].toString()+","+(Je[ft].color[3]/255).toString()+")");me.style.textShadow=qe.join(",")}}),new x("http://www.w3.org/ns/ttml#styling textCombine",function(oe,me,Ce,Je){me.style.textCombineUpright=Je}),new x("http://www.w3.org/ns/ttml#styling textEmphasis",function(oe,me,Ce,Je){}),new x("http://www.w3.org/ns/ttml#styling unicodeBidi",function(oe,me,Ce,Je){var we;we=Je==="bidiOverride"?"bidi-override":Je,me.style.unicodeBidi=we}),new x("http://www.w3.org/ns/ttml#styling visibility",function(oe,me,Ce,Je){me.style.visibility=Je}),new x("http://www.w3.org/ns/ttml#styling wrapOption",function(oe,me,Ce,Je){Je==="wrap"?Ce.space==="preserve"?me.style.whiteSpace="pre-wrap":me.style.whiteSpace="normal":Ce.space==="preserve"?me.style.whiteSpace="pre":me.style.whiteSpace="noWrap"}),new x("http://www.w3.org/ns/ttml#styling writingMode",function(oe,me,Ce,Je){Je==="lrtb"||Je==="lr"||Je==="rltb"||Je==="rl"?me.style.writingMode="horizontal-tb":Je==="tblr"?me.style.writingMode="vertical-lr":Je!=="tbrl"&&Je!=="tb"||(me.style.writingMode="vertical-rl")}),new x("http://www.w3.org/ns/ttml#styling zIndex",function(oe,me,Ce,Je){me.style.zIndex=Je}),new x("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(oe,me,Ce,Je){oe.displayForcedOnlyMode&&Je===!1&&(me.style.visibility="hidden")})],Y={},$=0;$<Z.length;$++)Y[Z[$].qname]=Z[$];var Q="webkitRubyPosition"in window.getComputedStyle(document.documentElement),se=Q?"webkitRubyPosition":"rubyPosition",R="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",X="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function ce(oe,me){if(oe&&oe.error&&oe.error(me))throw me}})(p,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4080:function(b,p,w){(function(F,C,E,y){F.generateISD=function(x,Z,Y){var $,Q=new M(x),se={},R={},X=x.head.styling.initials[E.byName.showBackground.qname],ce=x.head.styling.initials[E.byName.backgroundColor.qname];for(var oe in x.head.layout.regions)if(x.head.layout.regions.hasOwnProperty(oe)){var me=x.head.layout.regions[oe],Ce=me.styleAttrs[E.byName.showBackground.qname]||X,Je=me.styleAttrs[E.byName.backgroundColor.qname]||ce;R[me.id]=(Ce==="always"||Ce===void 0)&&Je!==void 0&&!(Z<me.begin||Z>=me.end)}for(var we in x.body&&x.body.regionID&&(R[x.body.regionID]=!0),$=x.body!==null?function st(ft,be){if(be.contents){var He={};for(var vt in be)be.hasOwnProperty(vt)&&(He[vt]=be[vt]);return He.contents=[],be.contents.filter(function(Re){return!(ft<Re.begin||ft>=Re.end)}).forEach(function(Re){var Ye=st(ft,Re);Ye.regionID&&(R[Ye.regionID]=!0),Ye!==null&&He.contents.push(Ye)}),He}return be}(Z,x.body):null,R[""]!==void 0&&(R[""]=!0),R)if(R[we]){var qe=m(x,Z,x.head.layout.regions[we],$,null,"",x.head.layout.regions[we],Y,se);qe!==null&&Q.contents.push(qe.element)}return Q};var P=[E.byName.color.qname,E.byName.textCombine.qname,E.byName.textDecoration.qname,E.byName.textEmphasis.qname,E.byName.textOutline.qname,E.byName.textShadow.qname];function m(x,Z,Y,$,Q,se,R,X,ce){if(Z<R.begin||Z>=R.end)return null;var oe="regionID"in R&&R.regionID!==""?R.regionID:se;if(Q!==null&&oe!==Y.id&&(!("contents"in R)||"contents"in R&&R.contents.length===0||oe!==""))return null;var me=new _(R);if("sets"in R)for(var Ce=0;Ce<R.sets.length;Ce++)Z<R.sets[Ce].begin||Z>=R.sets[Ce].end||(me.styleAttrs[R.sets[Ce].qname]=R.sets[Ce].value);var Je={};for(var we in me.styleAttrs)if(me.styleAttrs.hasOwnProperty(we)&&(Je[we]=!0,me.kind==="region"&&we===E.byName.writingMode.qname&&!(E.byName.direction.qname in me.styleAttrs))){var qe=me.styleAttrs[we];qe==="lrtb"||qe==="lr"?me.styleAttrs[E.byName.direction.qname]="ltr":qe!=="rltb"&&qe!=="rl"||(me.styleAttrs[E.byName.direction.qname]="rtl")}if(Q!==null)for(var st=0;st<E.all.length;st++){var ft=E.all[st];if(ft.qname===E.byName.textDecoration.qname){var be=Q.styleAttrs[ft.qname],He=me.styleAttrs[ft.qname],vt=[];He===void 0?vt=be:He.indexOf("none")===-1?((He.indexOf("noUnderline")===-1&&be.indexOf("underline")!==-1||He.indexOf("underline")!==-1)&&vt.push("underline"),(He.indexOf("noLineThrough")===-1&&be.indexOf("lineThrough")!==-1||He.indexOf("lineThrough")!==-1)&&vt.push("lineThrough"),(He.indexOf("noOverline")===-1&&be.indexOf("overline")!==-1||He.indexOf("overline")!==-1)&&vt.push("overline")):vt.push("none"),me.styleAttrs[ft.qname]=vt}else if(ft.qname!==E.byName.fontSize.qname||ft.qname in me.styleAttrs||me.kind!=="span"||me.styleAttrs[E.byName.ruby.qname]!=="textContainer")if(ft.qname!==E.byName.fontSize.qname||ft.qname in me.styleAttrs||me.kind!=="span"||me.styleAttrs[E.byName.ruby.qname]!=="text")ft.inherit&&ft.qname in Q.styleAttrs&&!(ft.qname in me.styleAttrs)&&(me.styleAttrs[ft.qname]=Q.styleAttrs[ft.qname]);else{var Re=Q.styleAttrs[E.byName.fontSize.qname];Q.styleAttrs[E.byName.ruby.qname]==="textContainer"?me.styleAttrs[ft.qname]=Re:me.styleAttrs[ft.qname]=new y.ComputedLength(.5*Re.rw,.5*Re.rh)}else{var Ye=Q.styleAttrs[E.byName.fontSize.qname];me.styleAttrs[ft.qname]=new y.ComputedLength(.5*Ye.rw,.5*Ye.rh)}}for(var ot=0;ot<E.all.length;ot++){var Ht=E.all[ot];if(!(Ht.qname in me.styleAttrs)&&!(Ht.qname===E.byName.position.qname&&E.byName.origin.qname in me.styleAttrs||Ht.qname===E.byName.origin.qname&&E.byName.position.qname in me.styleAttrs)){var Bt=x.head.styling.initials[Ht.qname]||Ht.initial;if(Bt!==null&&(me.kind==="region"||Ht.inherit===!1&&Bt!==null)){var Et=Ht.parse(Bt);Et!==null?(me.styleAttrs[Ht.qname]=Et,Je[Ht.qname]=!0):I(X,"Invalid initial value for '"+Ht.qname+"' on element '"+me.kind)}}}for(var Dt=0;Dt<E.all.length;Dt++){var Ne=E.all[Dt];if(Ne.qname in Je&&Ne.compute!==null){var ne=Ne.compute(x,Q,me,me.styleAttrs[Ne.qname],ce);ne!==null?me.styleAttrs[Ne.qname]=ne:(me.styleAttrs[Ne.qname]=Ne.compute(x,Q,me,Ne.parse(Ne.initial),ce),I(X,"Style '"+Ne.qname+"' on element '"+me.kind+"' cannot be computed"))}}if(me.styleAttrs[E.byName.display.qname]==="none")return null;var Be=null;Q===null?Be=$===null?[]:[$]:"contents"in R&&(Be=R.contents);for(var L=0;Be!==null&&L<Be.length;L++){var D=m(x,Z,Y,$,me,oe,Be[L],X,ce);D!==null&&me.contents.push(D.element)}for(var G in me.styleAttrs)if(me.styleAttrs.hasOwnProperty(G)){var K=!1;if(me.kind==="span"){var ge=me.styleAttrs[E.byName.ruby.qname];(K=(ge==="container"||ge==="textContainer"||ge==="baseContainer")&&P.indexOf(G)!==-1)||(K=ge!=="container"&&G===E.byName.rubyAlign.qname),K||(K=!(ge==="textContainer"||ge==="text")&&G===E.byName.rubyPosition.qname)}if(!K){var de=E.byQName[G];"applies"in de&&(K=de.applies.indexOf(me.kind)===-1)}K&&delete me.styleAttrs[G]}var Ke=me.styleAttrs[E.byName.ruby.qname];if(me.kind==="p"||me.kind==="span"&&(Ke==="textContainer"||Ke==="text")){var wt=[];T(me,wt),function(lt){for(var ut,nt=0;nt<lt.length;)if((ut=lt[nt]).kind!=="br"&&ut.space!=="preserve"){var ht=ut.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(ht)&&(nt===0||(_t=lt[nt-1]).kind==="br"||/[\r\n\t ]$/.test(_t.text))&&(ht=ht.substring(1)),ut.text=ht,ht.length===0?lt.splice(nt,1):nt++}else nt++;var _t,Tt;for(nt=0;nt<lt.length;nt++)(ut=lt[nt]).kind!=="br"&&ut.space!=="preserve"?/[ ]$/.test(ut.text)&&(nt===lt.length-1||(Tt=lt[nt+1]).kind==="br"||Tt.space==="preserve"&&/^[\r\n]/.test(Tt.text))&&(ut.text=ut.text.slice(0,-1)):nt++}(wt),U(me)}return me.kind==="div"&&E.byName.backgroundImage.qname in me.styleAttrs||me.kind==="br"||me.kind==="image"||"contents"in me&&me.contents.length>0||me.kind==="span"&&me.text!==null||me.kind==="region"&&me.styleAttrs[E.byName.showBackground.qname]==="always"?{region_id:oe,element:me}:null}function T(x,Z){if("contents"in x)for(var Y=0;Y<x.contents.length;Y++){var $=x.contents[Y],Q=$.styleAttrs[E.byName.ruby.qname];($.kind!=="span"||Q!=="textContainer"&&Q!=="text")&&("contents"in $?T($,Z):($.kind==="span"&&$.text.length!==0||$.kind==="br")&&Z.push($))}}function U(x){if(x.kind==="br")return!1;if("text"in x)return x.text.length===0;if("contents"in x){for(var Z=x.contents.length;Z--;)U(x.contents[Z])&&x.contents.splice(Z,1);return x.contents.length===0}}function M(x){this.contents=[],this.aspectRatio=x.aspectRatio,this.lang=x.lang}function _(x){for(var Z in this.kind=x.kind||"region",this.lang=x.lang,x.id&&(this.id=x.id),this.styleAttrs={},x.styleAttrs)x.styleAttrs.hasOwnProperty(Z)&&(this.styleAttrs[Z]=x.styleAttrs[Z]);"src"in x&&(this.src=x.src),"type"in x&&(this.type=x.type),"text"in x?this.text=x.text:(this.kind==="region"||"contents"in x)&&(this.contents=[]),"space"in x&&(this.space=x.space)}function I(x,Z){if(x&&x.error&&x.error(Z))throw Z}})(p,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4403:function(b,p,w){p.generateISD=w(4080).generateISD,p.fromXML=w(3362).fromXML,p.renderHTML=w(506).render},210:function(b,p){(function(w){w.ns_tt="http://www.w3.org/ns/ttml",w.ns_tts="http://www.w3.org/ns/ttml#styling",w.ns_ttp="http://www.w3.org/ns/ttml#parameter",w.ns_xml="http://www.w3.org/XML/1998/namespace",w.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",w.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",w.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",w.ns_ebutts="urn:ebu:tt:style"})(p)},6811:function(b,p,w){(function(F,C,E){function y(T,U,M,_,I,x,Z,Y){this.name=U,this.ns=T,this.qname=T+" "+U,this.inherit=I,this.animatable=x,this.initial=M,this.applies=_,this.parse=Z,this.compute=Y}for(var P in F.all=[new y(C.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,E.parseColor,null),new y(C.ns_tts,"color","white",["span"],!0,!0,E.parseColor,null),new y(C.ns_tts,"direction","ltr",["p","span"],!0,!0,function(T){return T},null),new y(C.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(T){return T},null),new y(C.ns_tts,"displayAlign","before",["region"],!1,!0,function(T){return T},null),new y(C.ns_tts,"extent","auto",["tt","region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var M=E.parseLength(U[0]),_=E.parseLength(U[1]);return _&&M?{h:_,w:M}:null},function(T,U,M,_,I){var x,Z;if(_==="auto")x=new E.ComputedLength(0,1);else if((x=E.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")Z=new E.ComputedLength(1,0);else if((Z=E.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:x,w:Z}}),new y(C.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(T){for(var U=T.split(","),M=[],_=0;_<U.length;_++)U[_]=U[_].trim(),U[_].charAt(0)!=="'"&&U[_].charAt(0)!=='"'&&U[_]==="default"?M.push("monospaceSerif"):M.push(U[_]);return M},null),new y(C.ns_tts,"shear","0%",["p"],!0,!0,E.parseLength,function(T,U,M,_){return _.unit!=="%"?null:Math.abs(_.value)>100?100*Math.sign(_.value):_.value}),new y(C.ns_tts,"fontSize","1c",["span","p"],!0,!0,E.parseLength,function(T,U,M,_,I){return E.toComputedLength(_.value,_.unit,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,T.cellLength.h,T.pxLength.h)}),new y(C.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(T){return T},null),new y(C.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(T){return T},null),new y(C.ns_tts,"lineHeight","normal",["p"],!0,!0,function(T){return T==="normal"?T:E.parseLength(T)},function(T,U,M,_,I){var x;if(_==="normal")x=_;else if((x=E.toComputedLength(_.value,_.unit,M.styleAttrs[F.byName.fontSize.qname],M.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null)return null;return x}),new y(C.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new y(C.ns_tts,"origin","auto",["region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var M=E.parseLength(U[0]),_=E.parseLength(U[1]);return _&&M?{h:_,w:M}:null},function(T,U,M,_,I){var x,Z;if(_==="auto")x=new E.ComputedLength(0,0);else if((x=E.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")Z=new E.ComputedLength(0,0);else if((Z=E.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:x,w:Z}}),new y(C.ns_tts,"overflow","hidden",["region"],!1,!0,function(T){return T},null),new y(C.ns_tts,"padding","0px",["region"],!1,!0,function(T){var U=T.split(" ");if(U.length>4)return null;for(var M=[],_=0;_<U.length;_++){var I=E.parseLength(U[_]);if(!I)return null;M.push(I)}return M},function(T,U,M,_,I){var x;if(_.length===1)x=[_[0],_[0],_[0],_[0]];else if(_.length===2)x=[_[0],_[1],_[0],_[1]];else if(_.length===3)x=[_[0],_[1],_[2],_[1]];else{if(_.length!==4)return null;x=[_[0],_[1],_[2],_[3]]}var Z=M.styleAttrs[F.byName.writingMode.qname];if(Z==="lrtb"||Z==="lr")x=[x[0],x[3],x[2],x[1]];else if(Z==="rltb"||Z==="rl")x=[x[0],x[1],x[2],x[3]];else if(Z==="tblr")x=[x[3],x[0],x[1],x[2]];else{if(Z!=="tbrl"&&Z!=="tb")return null;x=[x[3],x[2],x[1],x[0]]}for(var Y=[],$=0;$<x.length;$++)if(x[$].value===0)Y[$]=new E.ComputedLength(0,0);else if(Y[$]=E.toComputedLength(x[$].value,x[$].unit,M.styleAttrs[F.byName.fontSize.qname],$===0||$===2?M.styleAttrs[F.byName.extent.qname].h:M.styleAttrs[F.byName.extent.qname].w,$===0||$===2?T.cellLength.h:T.cellLength.w,$===0||$===2?T.pxLength.h:T.pxLength.w),Y[$]===null)return null;return Y}),new y(C.ns_tts,"position","top left",["region"],!1,!0,function(T){return E.parsePosition(T)},function(T,U,M,_){var I,x;return(I=E.toComputedLength(_.v.offset.value,_.v.offset.unit,null,new E.ComputedLength(-M.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-M.styleAttrs[F.byName.extent.qname].h.rh),null,T.pxLength.h))===null?null:(_.v.edge==="bottom"&&(I=new E.ComputedLength(-I.rw-M.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-I.rh-M.styleAttrs[F.byName.extent.qname].h.rh)),x=E.toComputedLength(_.h.offset.value,_.h.offset.unit,null,new E.ComputedLength(T.dimensions.w.rw-M.styleAttrs[F.byName.extent.qname].w.rw,-M.styleAttrs[F.byName.extent.qname].w.rh),null,T.pxLength.w),I===null?null:(_.h.edge==="right"&&(x=new E.ComputedLength(T.dimensions.w.rw-x.rw-M.styleAttrs[F.byName.extent.qname].w.rw,-x.rh-M.styleAttrs[F.byName.extent.qname].w.rh)),{h:I,w:x}))}),new y(C.ns_tts,"ruby","none",["span"],!1,!0,function(T){return T},null),new y(C.ns_tts,"rubyAlign","center",["span"],!0,!0,function(T){return T!=="center"&&T!=="spaceAround"?null:T},null),new y(C.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(T){return T},null),new y(C.ns_tts,"rubyReserve","none",["p"],!0,!0,function(T){var U=T.split(" "),M=[null,null];if(U.length===0||U.length>2||U[0]!=="none"&&U[0]!=="both"&&U[0]!=="after"&&U[0]!=="before"&&U[0]!=="outside")return null;if(M[0]=U[0],U.length===2&&U[0]!=="none"){var _=E.parseLength(U[1]);if(!_)return null;M[1]=_}return M},function(T,U,M,_,I){if(_[0]==="none")return _;var x;return(x=_[1]===null?new E.ComputedLength(.5*M.styleAttrs[F.byName.fontSize.qname].rw,.5*M.styleAttrs[F.byName.fontSize.qname].rh):E.toComputedLength(_[1].value,_[1].unit,M.styleAttrs[F.byName.fontSize.qname],M.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null?null:[_[0],x]}),new y(C.ns_tts,"showBackground","always",["region"],!1,!0,function(T){return T},null),new y(C.ns_tts,"textAlign","start",["p"],!0,!0,function(T){return T},function(T,U,M,_,I){return _==="left"?"start":_==="right"?"end":_}),new y(C.ns_tts,"textCombine","none",["span"],!0,!0,function(T){return T==="none"||T==="all"?T:null},null),new y(C.ns_tts,"textDecoration","none",["span"],!0,!0,function(T){return T.split(" ")},null),new y(C.ns_tts,"textEmphasis","none",["span"],!0,!0,function(T){for(var U=T.split(" "),M={style:null,symbol:null,color:null,position:null},_=0;_<U.length;_++)if(U[_]==="none"||U[_]==="auto")M.style=U[_];else if(U[_]==="filled"||U[_]==="open")M.style=U[_];else if(U[_]==="circle"||U[_]==="dot"||U[_]==="sesame")M.symbol=U[_];else if(U[_]==="current")M.color=U[_];else if(U[_]==="outside"||U[_]==="before"||U[_]==="after")M.position=U[_];else if(M.color=E.parseColor(U[_]),M.color===null)return null;return M.style==null&&M.symbol==null?M.style="auto":(M.symbol=M.symbol||"circle",M.style=M.style||"filled"),M.position=M.position||"outside",M.color=M.color||"current",M},null),new y(C.ns_tts,"textOutline","none",["span"],!0,!0,function(T){if(T==="none")return T;var U={},M=T.split(" ");if(M.length===0||M.length>2)return null;var _=E.parseColor(M[0]);if(U.color=_,_!==null&&M.shift(),M.length!==1)return null;var I=E.parseLength(M[0]);return I?(U.thickness=I,U):null},function(T,U,M,_,I){if(_==="none")return _;var x={};return _.color===null?x.color=M.styleAttrs[F.byName.color.qname]:x.color=_.color,x.thickness=E.toComputedLength(_.thickness.value,_.thickness.unit,M.styleAttrs[F.byName.fontSize.qname],M.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h),x.thickness===null?null:x}),new y(C.ns_tts,"textShadow","none",["span"],!0,!0,E.parseTextShadow,function(T,U,M,_){if(_==="none")return _;for(var I=[],x=0;x<_.length;x++){var Z={};if(Z.x_off=E.toComputedLength(_[x][0].value,_[x][0].unit,null,M.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.w),Z.x_off===null||(Z.y_off=E.toComputedLength(_[x][1].value,_[x][1].unit,null,M.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),Z.y_off===null))return null;if(_[x][2]===null)Z.b_radius=0;else if(Z.b_radius=E.toComputedLength(_[x][2].value,_[x][2].unit,null,M.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),Z.b_radius===null)return null;_[x][3]===null?Z.color=M.styleAttrs[F.byName.color.qname]:Z.color=_[x][3],I.push(Z)}return I}),new y(C.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(T){return T},null),new y(C.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(T){return T},null),new y(C.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(T){return T},null),new y(C.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(T){return T},null),new y(C.ns_tts,"zIndex","auto",["region"],!1,!0,function(T){var U;return T==="auto"?U=T:(U=parseInt(T),isNaN(U)&&(U=null)),U},null),new y(C.ns_ebutts,"linePadding","0c",["p"],!0,!1,E.parseLength,function(T,U,M,_,I){return E.toComputedLength(_.value,_.unit,null,null,T.cellLength.w,null)}),new y(C.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(T){return T},null),new y(C.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(T){return T},null),new y(C.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(T){return T==="true"},null),new y(C.ns_itts,"fillLineGap","false",["p"],!0,!0,function(T){return T==="true"},null)],F.byQName={},F.all)F.byQName[F.all[P].qname]=F.all[P];for(var m in F.byName={},F.all)F.byName[F.all[m].name]=F.all[m]})(p,typeof imscNames>"u"?w(210):imscNames,typeof imscUtils>"u"?w(5926):imscUtils)},5926:function(b,p){(function(w){var F=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,C=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,E=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,y={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};w.parseColor=function(m){var T,U=null,M=y[m.toLowerCase()];return M!==void 0?U=M:(T=F.exec(m))!==null?U=[parseInt(T[1],16),parseInt(T[2],16),parseInt(T[3],16),T[4]!==void 0?parseInt(T[4],16):255]:(T=C.exec(m))!==null?U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),255]:(T=E.exec(m))!==null&&(U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),parseInt(T[4])]),U};var P=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;w.parseLength=function(m){var T,U=null;return(T=P.exec(m))!==null&&(U={value:parseFloat(T[1]),unit:T[2]}),U},w.parseTextShadow=function(m){for(var T=m.match(/([^\(,\)]|\([^\)]+\))+/g),U=[],M=0;M<T.length;M++){var _=T[M].split(" ");if(_.length===1&&_[0]==="none")return"none";if(_.length>1&&_.length<5){var I=[null,null,null,null],x=w.parseLength(_.shift());if(x===null||(I[0]=x,(x=w.parseLength(_.shift()))===null))return null;if(I[1]=x,_.length===0){U.push(I);continue}if((x=w.parseLength(_[0]))!==null&&(I[2]=x,_.shift()),_.length===0){U.push(I);continue}var Z=w.parseColor(_[0]);if(Z===null)return null;I[3]=Z,U.push(I)}}return U},w.parsePosition=function(m){var T=m.split(" "),U=function($){return $==="center"||$==="left"||$==="top"||$==="bottom"||$==="right"};if(T.length>4)return null;for(var M=0;M<T.length;M++)if(!U(T[M])){var _=w.parseLength(T[M]);if(_===null)return null;T[M]=_}for(var I={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},x=0;x<T.length;){var Z=T[x++];if(U(Z)){var Y={value:0,unit:"%"};T.length!==2&&x<T.length&&!U(T[x])&&(Y=T[x++]),Z==="right"?(I.h.edge=Z,I.h.offset=Y):Z==="bottom"?(I.v.edge=Z,I.v.offset=Y):Z==="left"?I.h.offset=Y:Z==="top"&&(I.v.offset=Y)}else{if(T.length!==1&&T.length!==2)return null;x===1?I.h.offset=Z:I.v.offset=Z}}return I},w.ComputedLength=function(m,T){this.rw=m,this.rh=T},w.ComputedLength.prototype.toUsedLength=function(m,T){return m*this.rw+T*this.rh},w.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},w.toComputedLength=function(m,T,U,M,_,I){return T==="%"&&M?new w.ComputedLength(M.rw*m/100,M.rh*m/100):T==="em"&&U?new w.ComputedLength(U.rw*m,U.rh*m):T==="c"&&_?new w.ComputedLength(m*_.rw,m*_.rh):T==="px"&&I?new w.ComputedLength(m*I.rw,m*I.rh):T==="rh"?new w.ComputedLength(0,m/100):T==="rw"?new w.ComputedLength(m/100,0):null}})(p)},3516:function(b){b.exports=function(p){var w=typeof p=="string"?p.charCodeAt(0):p;return w>=97&&w<=122||w>=65&&w<=90}},2219:function(b,p,w){var F=w(3516),C=w(395);b.exports=function(E){return F(E)||C(E)}},395:function(b){b.exports=function(p){var w=typeof p=="string"?p.charCodeAt(0):p;return w>=48&&w<=57}},3875:function(b){function p(C){if(typeof C!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(C))}function w(C,E){for(var y,P="",m=0,T=-1,U=0,M=0;M<=C.length;++M){if(M<C.length)y=C.charCodeAt(M);else{if(y===47)break;y=47}if(y===47){if(!(T===M-1||U===1))if(T!==M-1&&U===2){if(P.length<2||m!==2||P.charCodeAt(P.length-1)!==46||P.charCodeAt(P.length-2)!==46){if(P.length>2){var _=P.lastIndexOf("/");if(_!==P.length-1){_===-1?(P="",m=0):m=(P=P.slice(0,_)).length-1-P.lastIndexOf("/"),T=M,U=0;continue}}else if(P.length===2||P.length===1){P="",m=0,T=M,U=0;continue}}E&&(P.length>0?P+="/..":P="..",m=2)}else P.length>0?P+="/"+C.slice(T+1,M):P=C.slice(T+1,M),m=M-T-1;T=M,U=0}else y===46&&U!==-1?++U:U=-1}return P}var F={resolve:function(){for(var C,E="",y=!1,P=arguments.length-1;P>=-1&&!y;P--){var m;P>=0?m=arguments[P]:(C===void 0&&(C=process.cwd()),m=C),p(m),m.length!==0&&(E=m+"/"+E,y=m.charCodeAt(0)===47)}return E=w(E,!y),y?E.length>0?"/"+E:"/":E.length>0?E:"."},normalize:function(C){if(p(C),C.length===0)return".";var E=C.charCodeAt(0)===47,y=C.charCodeAt(C.length-1)===47;return(C=w(C,!E)).length!==0||E||(C="."),C.length>0&&y&&(C+="/"),E?"/"+C:C},isAbsolute:function(C){return p(C),C.length>0&&C.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var C,E=0;E<arguments.length;++E){var y=arguments[E];p(y),y.length>0&&(C===void 0?C=y:C+="/"+y)}return C===void 0?".":F.normalize(C)},relative:function(C,E){if(p(C),p(E),C===E||(C=F.resolve(C))===(E=F.resolve(E)))return"";for(var y=1;y<C.length&&C.charCodeAt(y)===47;++y);for(var P=C.length,m=P-y,T=1;T<E.length&&E.charCodeAt(T)===47;++T);for(var U=E.length-T,M=m<U?m:U,_=-1,I=0;I<=M;++I){if(I===M){if(U>M){if(E.charCodeAt(T+I)===47)return E.slice(T+I+1);if(I===0)return E.slice(T+I)}else m>M&&(C.charCodeAt(y+I)===47?_=I:I===0&&(_=0));break}var x=C.charCodeAt(y+I);if(x!==E.charCodeAt(T+I))break;x===47&&(_=I)}var Z="";for(I=y+_+1;I<=P;++I)I!==P&&C.charCodeAt(I)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+E.slice(T+_):(T+=_,E.charCodeAt(T)===47&&++T,E.slice(T))},_makeLong:function(C){return C},dirname:function(C){if(p(C),C.length===0)return".";for(var E=C.charCodeAt(0),y=E===47,P=-1,m=!0,T=C.length-1;T>=1;--T)if((E=C.charCodeAt(T))===47){if(!m){P=T;break}}else m=!1;return P===-1?y?"/":".":y&&P===1?"//":C.slice(0,P)},basename:function(C,E){if(E!==void 0&&typeof E!="string")throw new TypeError('"ext" argument must be a string');p(C);var y,P=0,m=-1,T=!0;if(E!==void 0&&E.length>0&&E.length<=C.length){if(E.length===C.length&&E===C)return"";var U=E.length-1,M=-1;for(y=C.length-1;y>=0;--y){var _=C.charCodeAt(y);if(_===47){if(!T){P=y+1;break}}else M===-1&&(T=!1,M=y+1),U>=0&&(_===E.charCodeAt(U)?--U==-1&&(m=y):(U=-1,m=M))}return P===m?m=M:m===-1&&(m=C.length),C.slice(P,m)}for(y=C.length-1;y>=0;--y)if(C.charCodeAt(y)===47){if(!T){P=y+1;break}}else m===-1&&(T=!1,m=y+1);return m===-1?"":C.slice(P,m)},extname:function(C){p(C);for(var E=-1,y=0,P=-1,m=!0,T=0,U=C.length-1;U>=0;--U){var M=C.charCodeAt(U);if(M!==47)P===-1&&(m=!1,P=U+1),M===46?E===-1?E=U:T!==1&&(T=1):E!==-1&&(T=-1);else if(!m){y=U+1;break}}return E===-1||P===-1||T===0||T===1&&E===P-1&&E===y+1?"":C.slice(E,P)},format:function(C){if(C===null||typeof C!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof C);return function(E,y){var P=y.dir||y.root,m=y.base||(y.name||"")+(y.ext||"");return P?P===y.root?P+m:P+"/"+m:m}(0,C)},parse:function(C){p(C);var E={root:"",dir:"",base:"",ext:"",name:""};if(C.length===0)return E;var y,P=C.charCodeAt(0),m=P===47;m?(E.root="/",y=1):y=0;for(var T=-1,U=0,M=-1,_=!0,I=C.length-1,x=0;I>=y;--I)if((P=C.charCodeAt(I))!==47)M===-1&&(_=!1,M=I+1),P===46?T===-1?T=I:x!==1&&(x=1):T!==-1&&(x=-1);else if(!_){U=I+1;break}return T===-1||M===-1||x===0||x===1&&T===M-1&&T===U+1?M!==-1&&(E.base=E.name=U===0&&m?C.slice(1,M):C.slice(U,M)):(U===0&&m?(E.name=C.slice(1,T),E.base=C.slice(1,M)):(E.name=C.slice(U,T),E.base=C.slice(U,M)),E.ext=C.slice(T,M)),U>0?E.dir=C.slice(0,U-1):m&&(E.dir="/"),E},sep:"/",delimiter:":",win32:null,posix:null};F.posix=F,b.exports=F},8387:function(b,p,w){var F=w(1549),C=F.Buffer;function E(P,m){for(var T in P)m[T]=P[T]}function y(P,m,T){return C(P,m,T)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?b.exports=F:(E(F,p),p.Buffer=y),E(C,y),y.from=function(P,m,T){if(typeof P=="number")throw new TypeError("Argument must not be a number");return C(P,m,T)},y.alloc=function(P,m,T){if(typeof P!="number")throw new TypeError("Argument must be a number");var U=C(P);return m!==void 0?typeof T=="string"?U.fill(m,T):U.fill(m):U.fill(0),U},y.allocUnsafe=function(P){if(typeof P!="number")throw new TypeError("Argument must be a number");return C(P)},y.allocUnsafeSlow=function(P){if(typeof P!="number")throw new TypeError("Argument must be a number");return F.SlowBuffer(P)}},5378:function(b,p,w){(function(F){F.parser=function(L,D){return new y(L,D)},F.SAXParser=y,F.SAXStream=m,F.createStream=function(L,D){return new m(L,D)},F.MAX_BUFFER_LENGTH=65536;var C,E=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function y(L,D){if(!(this instanceof y))return new y(L,D);var G=this;(function(K){for(var ge=0,de=E.length;ge<de;ge++)K[E[ge]]=""})(G),G.q=G.c="",G.bufferCheckPosition=F.MAX_BUFFER_LENGTH,G.opt=D||{},G.opt.lowercase=G.opt.lowercase||G.opt.lowercasetags,G.looseCase=G.opt.lowercase?"toLowerCase":"toUpperCase",G.tags=[],G.closed=G.closedRoot=G.sawRoot=!1,G.tag=G.error=null,G.strict=!!L,G.noscript=!(!L&&!G.opt.noscript),G.state=we.BEGIN,G.strictEntities=G.opt.strictEntities,G.ENTITIES=G.strictEntities?Object.create(F.XML_ENTITIES):Object.create(F.ENTITIES),G.attribList=[],G.opt.xmlns&&(G.ns=Object.create(Y)),G.trackPosition=G.opt.position!==!1,G.trackPosition&&(G.position=G.line=G.column=0),st(G,"onready")}F.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(L){function D(){}return D.prototype=L,new D}),Object.keys||(Object.keys=function(L){var D=[];for(var G in L)L.hasOwnProperty(G)&&D.push(G);return D}),y.prototype={end:function(){Re(this)},write:function(L){var D=this;if(this.error)throw this.error;if(D.closed)return vt(D,"Cannot write after close. Assign an onready handler.");if(L===null)return Re(D);typeof L=="object"&&(L=L.toString());for(var G=0,K="";K=Be(L,G++),D.c=K,K;)switch(D.trackPosition&&(D.position++,K==="\n"?(D.line++,D.column=0):D.column++),D.state){case we.BEGIN:if(D.state=we.BEGIN_WHITESPACE,K==="\uFEFF")continue;ne(D,K);continue;case we.BEGIN_WHITESPACE:ne(D,K);continue;case we.TEXT:if(D.sawRoot&&!D.closedRoot){for(var ge=G-1;K&&K!=="<"&&K!=="&";)(K=Be(L,G++))&&D.trackPosition&&(D.position++,K==="\n"?(D.line++,D.column=0):D.column++);D.textNode+=L.substring(ge,G-1)}K!=="<"||D.sawRoot&&D.closedRoot&&!D.strict?(!oe(T,K)||D.sawRoot&&!D.closedRoot||Ye(D,"Text data outside of root node."),K==="&"?D.state=we.TEXT_ENTITY:D.textNode+=K):(D.state=we.OPEN_WAKA,D.startTagPosition=D.position);continue;case we.SCRIPT:K==="<"?D.state=we.SCRIPT_ENDING:D.script+=K;continue;case we.SCRIPT_ENDING:K==="/"?D.state=we.CLOSE_TAG:(D.script+="<"+K,D.state=we.SCRIPT);continue;case we.OPEN_WAKA:if(K==="!")D.state=we.SGML_DECL,D.sgmlDecl="";else if(!ce(T,K))if(ce($,K))D.state=we.OPEN_TAG,D.tagName=K;else if(K==="/")D.state=we.CLOSE_TAG,D.tagName="";else if(K==="?")D.state=we.PROC_INST,D.procInstName=D.procInstBody="";else{if(Ye(D,"Unencoded <"),D.startTagPosition+1<D.position){var de=D.position-D.startTagPosition;K=new Array(de).join(" ")+K}D.textNode+="<"+K,D.state=we.TEXT}continue;case we.SGML_DECL:(D.sgmlDecl+K).toUpperCase()==="[CDATA["?(ft(D,"onopencdata"),D.state=we.CDATA,D.sgmlDecl="",D.cdata=""):D.sgmlDecl+K==="--"?(D.state=we.COMMENT,D.comment="",D.sgmlDecl=""):(D.sgmlDecl+K).toUpperCase()==="DOCTYPE"?(D.state=we.DOCTYPE,(D.doctype||D.sawRoot)&&Ye(D,"Inappropriately located doctype declaration"),D.doctype="",D.sgmlDecl=""):K===">"?(ft(D,"onsgmldeclaration",D.sgmlDecl),D.sgmlDecl="",D.state=we.TEXT):(ce(_,K)&&(D.state=we.SGML_DECL_QUOTED),D.sgmlDecl+=K);continue;case we.SGML_DECL_QUOTED:K===D.q&&(D.state=we.SGML_DECL,D.q=""),D.sgmlDecl+=K;continue;case we.DOCTYPE:K===">"?(D.state=we.TEXT,ft(D,"ondoctype",D.doctype),D.doctype=!0):(D.doctype+=K,K==="["?D.state=we.DOCTYPE_DTD:ce(_,K)&&(D.state=we.DOCTYPE_QUOTED,D.q=K));continue;case we.DOCTYPE_QUOTED:D.doctype+=K,K===D.q&&(D.q="",D.state=we.DOCTYPE);continue;case we.DOCTYPE_DTD:D.doctype+=K,K==="]"?D.state=we.DOCTYPE:ce(_,K)&&(D.state=we.DOCTYPE_DTD_QUOTED,D.q=K);continue;case we.DOCTYPE_DTD_QUOTED:D.doctype+=K,K===D.q&&(D.state=we.DOCTYPE_DTD,D.q="");continue;case we.COMMENT:K==="-"?D.state=we.COMMENT_ENDING:D.comment+=K;continue;case we.COMMENT_ENDING:K==="-"?(D.state=we.COMMENT_ENDED,D.comment=He(D.opt,D.comment),D.comment&&ft(D,"oncomment",D.comment),D.comment=""):(D.comment+="-"+K,D.state=we.COMMENT);continue;case we.COMMENT_ENDED:K!==">"?(Ye(D,"Malformed comment"),D.comment+="--"+K,D.state=we.COMMENT):D.state=we.TEXT;continue;case we.CDATA:K==="]"?D.state=we.CDATA_ENDING:D.cdata+=K;continue;case we.CDATA_ENDING:K==="]"?D.state=we.CDATA_ENDING_2:(D.cdata+="]"+K,D.state=we.CDATA);continue;case we.CDATA_ENDING_2:K===">"?(D.cdata&&ft(D,"oncdata",D.cdata),ft(D,"onclosecdata"),D.cdata="",D.state=we.TEXT):K==="]"?D.cdata+="]":(D.cdata+="]]"+K,D.state=we.CDATA);continue;case we.PROC_INST:K==="?"?D.state=we.PROC_INST_ENDING:ce(T,K)?D.state=we.PROC_INST_BODY:D.procInstName+=K;continue;case we.PROC_INST_BODY:if(!D.procInstBody&&ce(T,K))continue;K==="?"?D.state=we.PROC_INST_ENDING:D.procInstBody+=K;continue;case we.PROC_INST_ENDING:K===">"?(ft(D,"onprocessinginstruction",{name:D.procInstName,body:D.procInstBody}),D.procInstName=D.procInstBody="",D.state=we.TEXT):(D.procInstBody+="?"+K,D.state=we.PROC_INST_BODY);continue;case we.OPEN_TAG:ce(Q,K)?D.tagName+=K:(ot(D),K===">"?Et(D):K==="/"?D.state=we.OPEN_TAG_SLASH:(oe(T,K)&&Ye(D,"Invalid character in tag name"),D.state=we.ATTRIB));continue;case we.OPEN_TAG_SLASH:K===">"?(Et(D,!0),Dt(D)):(Ye(D,"Forward-slash in opening tag not followed by >"),D.state=we.ATTRIB);continue;case we.ATTRIB:if(ce(T,K))continue;K===">"?Et(D):K==="/"?D.state=we.OPEN_TAG_SLASH:ce($,K)?(D.attribName=K,D.attribValue="",D.state=we.ATTRIB_NAME):Ye(D,"Invalid attribute name");continue;case we.ATTRIB_NAME:K==="="?D.state=we.ATTRIB_VALUE:K===">"?(Ye(D,"Attribute without value"),D.attribValue=D.attribName,Bt(D),Et(D)):ce(T,K)?D.state=we.ATTRIB_NAME_SAW_WHITE:ce(Q,K)?D.attribName+=K:Ye(D,"Invalid attribute name");continue;case we.ATTRIB_NAME_SAW_WHITE:if(K==="=")D.state=we.ATTRIB_VALUE;else{if(ce(T,K))continue;Ye(D,"Attribute without value"),D.tag.attributes[D.attribName]="",D.attribValue="",ft(D,"onattribute",{name:D.attribName,value:""}),D.attribName="",K===">"?Et(D):ce($,K)?(D.attribName=K,D.state=we.ATTRIB_NAME):(Ye(D,"Invalid attribute name"),D.state=we.ATTRIB)}continue;case we.ATTRIB_VALUE:if(ce(T,K))continue;ce(_,K)?(D.q=K,D.state=we.ATTRIB_VALUE_QUOTED):(Ye(D,"Unquoted attribute value"),D.state=we.ATTRIB_VALUE_UNQUOTED,D.attribValue=K);continue;case we.ATTRIB_VALUE_QUOTED:if(K!==D.q){K==="&"?D.state=we.ATTRIB_VALUE_ENTITY_Q:D.attribValue+=K;continue}Bt(D),D.q="",D.state=we.ATTRIB_VALUE_CLOSED;continue;case we.ATTRIB_VALUE_CLOSED:ce(T,K)?D.state=we.ATTRIB:K===">"?Et(D):K==="/"?D.state=we.OPEN_TAG_SLASH:ce($,K)?(Ye(D,"No whitespace between attributes"),D.attribName=K,D.attribValue="",D.state=we.ATTRIB_NAME):Ye(D,"Invalid attribute name");continue;case we.ATTRIB_VALUE_UNQUOTED:if(oe(I,K)){K==="&"?D.state=we.ATTRIB_VALUE_ENTITY_U:D.attribValue+=K;continue}Bt(D),K===">"?Et(D):D.state=we.ATTRIB;continue;case we.CLOSE_TAG:if(D.tagName)K===">"?Dt(D):ce(Q,K)?D.tagName+=K:D.script?(D.script+="</"+D.tagName,D.tagName="",D.state=we.SCRIPT):(oe(T,K)&&Ye(D,"Invalid tagname in closing tag"),D.state=we.CLOSE_TAG_SAW_WHITE);else{if(ce(T,K))continue;oe($,K)?D.script?(D.script+="</"+K,D.state=we.SCRIPT):Ye(D,"Invalid tagname in closing tag."):D.tagName=K}continue;case we.CLOSE_TAG_SAW_WHITE:if(ce(T,K))continue;K===">"?Dt(D):Ye(D,"Invalid characters in closing tag");continue;case we.TEXT_ENTITY:case we.ATTRIB_VALUE_ENTITY_Q:case we.ATTRIB_VALUE_ENTITY_U:var Ke,wt;switch(D.state){case we.TEXT_ENTITY:Ke=we.TEXT,wt="textNode";break;case we.ATTRIB_VALUE_ENTITY_Q:Ke=we.ATTRIB_VALUE_QUOTED,wt="attribValue";break;case we.ATTRIB_VALUE_ENTITY_U:Ke=we.ATTRIB_VALUE_UNQUOTED,wt="attribValue"}K===";"?(D[wt]+=Ne(D),D.entity="",D.state=Ke):ce(D.entity.length?R:se,K)?D.entity+=K:(Ye(D,"Invalid character in entity name"),D[wt]+="&"+D.entity+K,D.entity="",D.state=Ke);continue;default:throw new Error(D,"Unknown state: "+D.state)}return D.position>=D.bufferCheckPosition&&function(lt){for(var ut=Math.max(F.MAX_BUFFER_LENGTH,10),nt=0,ht=0,_t=E.length;ht<_t;ht++){var Tt=lt[E[ht]].length;if(Tt>ut)switch(E[ht]){case"textNode":be(lt);break;case"cdata":ft(lt,"oncdata",lt.cdata),lt.cdata="";break;case"script":ft(lt,"onscript",lt.script),lt.script="";break;default:vt(lt,"Max buffer length exceeded: "+E[ht])}nt=Math.max(nt,Tt)}var Mt=F.MAX_BUFFER_LENGTH-nt;lt.bufferCheckPosition=Mt+lt.position}(D),D},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var L;be(L=this),L.cdata!==""&&(ft(L,"oncdata",L.cdata),L.cdata=""),L.script!==""&&(ft(L,"onscript",L.script),L.script="")}};try{C=w(182).Stream}catch(L){C=function(){}}var P=F.EVENTS.filter(function(L){return L!=="error"&&L!=="end"});function m(L,D){if(!(this instanceof m))return new m(L,D);C.apply(this),this._parser=new y(L,D),this.writable=!0,this.readable=!0;var G=this;this._parser.onend=function(){G.emit("end")},this._parser.onerror=function(K){G.emit("error",K),G._parser.error=null},this._decoder=null,P.forEach(function(K){Object.defineProperty(G,"on"+K,{get:function(){return G._parser["on"+K]},set:function(ge){if(!ge)return G.removeAllListeners(K),G._parser["on"+K]=ge,ge;G.on(K,ge)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(C.prototype,{constructor:{value:m}}),m.prototype.write=function(L){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(L)){if(!this._decoder){var D=w(7503).s;this._decoder=new D("utf8")}L=this._decoder.write(L)}return this._parser.write(L.toString()),this.emit("data",L),!0},m.prototype.end=function(L){return L&&L.length&&this.write(L),this._parser.end(),!0},m.prototype.on=function(L,D){var G=this;return G._parser["on"+L]||P.indexOf(L)===-1||(G._parser["on"+L]=function(){var K=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,L),G.emit.apply(G,K)}),C.prototype.on.call(G,L,D)};var T="\r\n	 ",U="0124356789",M="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",_="'\"",I=T+">",x="http://www.w3.org/XML/1998/namespace",Z="http://www.w3.org/2000/xmlns/",Y={xml:x,xmlns:Z};T=X(T),U=X(U),M=X(M);var $=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,se=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,R=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function X(L){return L.split("").reduce(function(D,G){return D[G]=!0,D},{})}function ce(L,D){return function(G){return Object.prototype.toString.call(G)==="[object RegExp]"}(L)?!!D.match(L):L[D]}function oe(L,D){return!ce(L,D)}_=X(_),I=X(I);var me,Ce,Je,we=0;for(var qe in F.STATE={BEGIN:we++,BEGIN_WHITESPACE:we++,TEXT:we++,TEXT_ENTITY:we++,OPEN_WAKA:we++,SGML_DECL:we++,SGML_DECL_QUOTED:we++,DOCTYPE:we++,DOCTYPE_QUOTED:we++,DOCTYPE_DTD:we++,DOCTYPE_DTD_QUOTED:we++,COMMENT_STARTING:we++,COMMENT:we++,COMMENT_ENDING:we++,COMMENT_ENDED:we++,CDATA:we++,CDATA_ENDING:we++,CDATA_ENDING_2:we++,PROC_INST:we++,PROC_INST_BODY:we++,PROC_INST_ENDING:we++,OPEN_TAG:we++,OPEN_TAG_SLASH:we++,ATTRIB:we++,ATTRIB_NAME:we++,ATTRIB_NAME_SAW_WHITE:we++,ATTRIB_VALUE:we++,ATTRIB_VALUE_QUOTED:we++,ATTRIB_VALUE_CLOSED:we++,ATTRIB_VALUE_UNQUOTED:we++,ATTRIB_VALUE_ENTITY_Q:we++,ATTRIB_VALUE_ENTITY_U:we++,CLOSE_TAG:we++,CLOSE_TAG_SAW_WHITE:we++,SCRIPT:we++,SCRIPT_ENDING:we++},F.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},F.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(F.ENTITIES).forEach(function(L){var D=F.ENTITIES[L],G=typeof D=="number"?String.fromCharCode(D):D;F.ENTITIES[L]=G}),F.STATE)F.STATE[F.STATE[qe]]=qe;function st(L,D,G){L[D]&&L[D](G)}function ft(L,D,G){L.textNode&&be(L),st(L,D,G)}function be(L){L.textNode=He(L.opt,L.textNode),L.textNode&&st(L,"ontext",L.textNode),L.textNode=""}function He(L,D){return L.trim&&(D=D.trim()),L.normalize&&(D=D.replace(/\s+/g," ")),D}function vt(L,D){return be(L),L.trackPosition&&(D+="\nLine: "+L.line+"\nColumn: "+L.column+"\nChar: "+L.c),D=new Error(D),L.error=D,st(L,"onerror",D),L}function Re(L){return L.sawRoot&&!L.closedRoot&&Ye(L,"Unclosed root tag"),L.state!==we.BEGIN&&L.state!==we.BEGIN_WHITESPACE&&L.state!==we.TEXT&&vt(L,"Unexpected end"),be(L),L.c="",L.closed=!0,st(L,"onend"),y.call(L,L.strict,L.opt),L}function Ye(L,D){if(typeof L!="object"||!(L instanceof y))throw new Error("bad call to strictFail");L.strict&&vt(L,D)}function ot(L){L.strict||(L.tagName=L.tagName[L.looseCase]());var D=L.tags[L.tags.length-1]||L,G=L.tag={name:L.tagName,attributes:{}};L.opt.xmlns&&(G.ns=D.ns),L.attribList.length=0,ft(L,"onopentagstart",G)}function Ht(L,D){var G=L.indexOf(":")<0?["",L]:L.split(":"),K=G[0],ge=G[1];return D&&L==="xmlns"&&(K="xmlns",ge=""),{prefix:K,local:ge}}function Bt(L){if(L.strict||(L.attribName=L.attribName[L.looseCase]()),L.attribList.indexOf(L.attribName)!==-1||L.tag.attributes.hasOwnProperty(L.attribName))L.attribName=L.attribValue="";else{if(L.opt.xmlns){var D=Ht(L.attribName,!0),G=D.prefix,K=D.local;if(G==="xmlns")if(K==="xml"&&L.attribValue!==x)Ye(L,"xml: prefix must be bound to "+x+"\nActual: "+L.attribValue);else if(K==="xmlns"&&L.attribValue!==Z)Ye(L,"xmlns: prefix must be bound to "+Z+"\nActual: "+L.attribValue);else{var ge=L.tag,de=L.tags[L.tags.length-1]||L;ge.ns===de.ns&&(ge.ns=Object.create(de.ns)),ge.ns[K]=L.attribValue}L.attribList.push([L.attribName,L.attribValue])}else L.tag.attributes[L.attribName]=L.attribValue,ft(L,"onattribute",{name:L.attribName,value:L.attribValue});L.attribName=L.attribValue=""}}function Et(L,D){if(L.opt.xmlns){var G=L.tag,K=Ht(L.tagName);G.prefix=K.prefix,G.local=K.local,G.uri=G.ns[K.prefix]||"",G.prefix&&!G.uri&&(Ye(L,"Unbound namespace prefix: "+JSON.stringify(L.tagName)),G.uri=K.prefix);var ge=L.tags[L.tags.length-1]||L;G.ns&&ge.ns!==G.ns&&Object.keys(G.ns).forEach(function(_n){ft(L,"onopennamespace",{prefix:_n,uri:G.ns[_n]})});for(var de=0,Ke=L.attribList.length;de<Ke;de++){var wt=L.attribList[de],lt=wt[0],ut=wt[1],nt=Ht(lt,!0),ht=nt.prefix,_t=nt.local,Tt=ht===""?"":G.ns[ht]||"",Mt={name:lt,value:ut,prefix:ht,local:_t,uri:Tt};ht&&ht!=="xmlns"&&!Tt&&(Ye(L,"Unbound namespace prefix: "+JSON.stringify(ht)),Mt.uri=ht),L.tag.attributes[lt]=Mt,ft(L,"onattribute",Mt)}L.attribList.length=0}L.tag.isSelfClosing=!!D,L.sawRoot=!0,L.tags.push(L.tag),ft(L,"onopentag",L.tag),D||(L.noscript||L.tagName.toLowerCase()!=="script"?L.state=we.TEXT:L.state=we.SCRIPT,L.tag=null,L.tagName=""),L.attribName=L.attribValue="",L.attribList.length=0}function Dt(L){if(!L.tagName)return Ye(L,"Weird empty close tag."),L.textNode+="</>",void(L.state=we.TEXT);if(L.script){if(L.tagName!=="script")return L.script+="</"+L.tagName+">",L.tagName="",void(L.state=we.SCRIPT);ft(L,"onscript",L.script),L.script=""}var D=L.tags.length,G=L.tagName;L.strict||(G=G[L.looseCase]());for(var K=G;D--&&L.tags[D].name!==K;)Ye(L,"Unexpected close tag");if(D<0)return Ye(L,"Unmatched closing tag: "+L.tagName),L.textNode+="</"+L.tagName+">",void(L.state=we.TEXT);L.tagName=G;for(var ge=L.tags.length;ge-- >D;){var de=L.tag=L.tags.pop();L.tagName=L.tag.name,ft(L,"onclosetag",L.tagName);var Ke={};for(var wt in de.ns)Ke[wt]=de.ns[wt];var lt=L.tags[L.tags.length-1]||L;L.opt.xmlns&&de.ns!==lt.ns&&Object.keys(de.ns).forEach(function(ut){var nt=de.ns[ut];ft(L,"onclosenamespace",{prefix:ut,uri:nt})})}D===0&&(L.closedRoot=!0),L.tagName=L.attribValue=L.attribName="",L.attribList.length=0,L.state=we.TEXT}function Ne(L){var D,G=L.entity,K=G.toLowerCase(),ge="";return L.ENTITIES[G]?L.ENTITIES[G]:L.ENTITIES[K]?L.ENTITIES[K]:((G=K).charAt(0)==="#"&&(G.charAt(1)==="x"?(G=G.slice(2),ge=(D=parseInt(G,16)).toString(16)):(G=G.slice(1),ge=(D=parseInt(G,10)).toString(10))),G=G.replace(/^0+/,""),ge.toLowerCase()!==G?(Ye(L,"Invalid character entity"),"&"+L.entity+";"):String.fromCodePoint(D))}function ne(L,D){D==="<"?(L.state=we.OPEN_WAKA,L.startTagPosition=L.position):oe(T,D)&&(Ye(L,"Non-whitespace before first tag."),L.textNode=D,L.state=we.TEXT)}function Be(L,D){var G="";return D<L.length&&(G=L.charAt(D)),G}we=F.STATE,String.fromCodePoint||(me=String.fromCharCode,Ce=Math.floor,Je=function(){var L,D,G=16384,K=[],ge=-1,de=arguments.length;if(!de)return"";for(var Ke="";++ge<de;){var wt=Number(arguments[ge]);if(!isFinite(wt)||wt<0||wt>1114111||Ce(wt)!==wt)throw RangeError("Invalid code point: "+wt);wt<=65535?K.push(wt):(L=55296+((wt-=65536)>>10),D=wt%1024+56320,K.push(L,D)),(ge+1===de||K.length>G)&&(Ke+=me.apply(null,K),K.length=0)}return Ke},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Je,configurable:!0,writable:!0}):String.fromCodePoint=Je)})(p)},182:function(b,p,w){b.exports=C;var F=w(1159).EventEmitter;function C(){F.call(this)}w(1765)(C,F),C.Readable=w(2846),C.Writable=w(8318),C.Duplex=w(6138),C.Transform=w(9798),C.PassThrough=w(5472),C.finished=w(8800),C.pipeline=w(7295),C.Stream=C,C.prototype.pipe=function(E,y){var P=this;function m(Z){E.writable&&E.write(Z)===!1&&P.pause&&P.pause()}function T(){P.readable&&P.resume&&P.resume()}P.on("data",m),E.on("drain",T),E._isStdio||y&&y.end===!1||(P.on("end",M),P.on("close",_));var U=!1;function M(){U||(U=!0,E.end())}function _(){U||(U=!0,typeof E.destroy=="function"&&E.destroy())}function I(Z){if(x(),F.listenerCount(this,"error")===0)throw Z}function x(){P.removeListener("data",m),E.removeListener("drain",T),P.removeListener("end",M),P.removeListener("close",_),P.removeListener("error",I),E.removeListener("error",I),P.removeListener("end",x),P.removeListener("close",x),E.removeListener("close",x)}return P.on("error",I),E.on("error",I),P.on("end",x),P.on("close",x),E.on("close",x),E.emit("pipe",P),E}},1765:function(b){typeof Object.create=="function"?b.exports=function(p,w){w&&(p.super_=w,p.prototype=Object.create(w.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}))}:b.exports=function(p,w){if(w){p.super_=w;var F=function(){};F.prototype=w.prototype,p.prototype=new F,p.prototype.constructor=p}}},3690:function(b){var p={};function w(C,E,y){y||(y=Error);var P=function(m){var T,U;function M(_,I,x){return m.call(this,function(Z,Y,$){return typeof E=="string"?E:E(Z,Y,$)}(_,I,x))||this}return U=m,(T=M).prototype=Object.create(U.prototype),T.prototype.constructor=T,T.__proto__=U,M}(y);P.prototype.name=y.name,P.prototype.code=C,p[C]=P}function F(C,E){if(Array.isArray(C)){var y=C.length;return C=C.map(function(P){return String(P)}),y>2?"one of ".concat(E," ").concat(C.slice(0,y-1).join(", "),", or ")+C[y-1]:y===2?"one of ".concat(E," ").concat(C[0]," or ").concat(C[1]):"of ".concat(E," ").concat(C[0])}return"of ".concat(E," ").concat(String(C))}w("ERR_INVALID_OPT_VALUE",function(C,E){return'The value "'+E+'" is invalid for option "'+C+'"'},TypeError),w("ERR_INVALID_ARG_TYPE",function(C,E,y){var P,m,T,U,M;if(typeof E=="string"&&(m="not ",E.substr(0,m.length)===m)?(P="must not be",E=E.replace(/^not /,"")):P="must be",function(I,x,Z){return(Z===void 0||Z>I.length)&&(Z=I.length),I.substring(Z-x.length,Z)===x}(C," argument"))T="The ".concat(C," ").concat(P," ").concat(F(E,"type"));else{var _=(typeof M!="number"&&(M=0),M+1>(U=C).length||U.indexOf(".",M)===-1?"argument":"property");T='The "'.concat(C,'" ').concat(_," ").concat(P," ").concat(F(E,"type"))}return T+". Received type ".concat(typeof y)},TypeError),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),w("ERR_METHOD_NOT_IMPLEMENTED",function(C){return"The "+C+" method is not implemented"}),w("ERR_STREAM_PREMATURE_CLOSE","Premature close"),w("ERR_STREAM_DESTROYED",function(C){return"Cannot call "+C+" after a stream was destroyed"}),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),w("ERR_STREAM_WRITE_AFTER_END","write after end"),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_UNKNOWN_ENCODING",function(C){return"Unknown encoding: "+C},TypeError),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),b.exports.q=p},6138:function(b,p,w){var F=Object.keys||function(_){var I=[];for(var x in _)I.push(x);return I};b.exports=T;var C=w(2846),E=w(8318);w(1765)(T,C);for(var y=F(E.prototype),P=0;P<y.length;P++){var m=y[P];T.prototype[m]||(T.prototype[m]=E.prototype[m])}function T(_){if(!(this instanceof T))return new T(_);C.call(this,_),E.call(this,_),this.allowHalfOpen=!0,_&&(_.readable===!1&&(this.readable=!1),_.writable===!1&&(this.writable=!1),_.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",U)))}function U(){this._writableState.ended||process.nextTick(M,this)}function M(_){_.end()}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=_,this._writableState.destroyed=_)}})},5472:function(b,p,w){b.exports=C;var F=w(9798);function C(E){if(!(this instanceof C))return new C(E);F.call(this,E)}w(1765)(C,F),C.prototype._transform=function(E,y,P){P(null,E)}},2846:function(b,p,w){var F;b.exports=me,me.ReadableState=oe,w(1159).EventEmitter;var C,E=function(Ne,ne){return Ne.listeners(ne).length},y=w(9299),P=w(1549).Buffer,m=w.g.Uint8Array||function(){},T=w(964);C=T&&T.debuglog?T.debuglog("stream"):function(){};var U,M,_,I=w(8393),x=w(6163),Z=w(7269).getHighWaterMark,Y=w(3690).q,$=Y.ERR_INVALID_ARG_TYPE,Q=Y.ERR_STREAM_PUSH_AFTER_EOF,se=Y.ERR_METHOD_NOT_IMPLEMENTED,R=Y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;w(1765)(me,y);var X=x.errorOrDestroy,ce=["error","close","destroy","pause","resume"];function oe(Ne,ne,Be){F=F||w(6138),Ne=Ne||{},typeof Be!="boolean"&&(Be=ne instanceof F),this.objectMode=!!Ne.objectMode,Be&&(this.objectMode=this.objectMode||!!Ne.readableObjectMode),this.highWaterMark=Z(this,Ne,"readableHighWaterMark",Be),this.buffer=new I,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ne.emitClose!==!1,this.autoDestroy=!!Ne.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ne.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ne.encoding&&(U||(U=w(7503).s),this.decoder=new U(Ne.encoding),this.encoding=Ne.encoding)}function me(Ne){if(F=F||w(6138),!(this instanceof me))return new me(Ne);var ne=this instanceof F;this._readableState=new oe(Ne,this,ne),this.readable=!0,Ne&&(typeof Ne.read=="function"&&(this._read=Ne.read),typeof Ne.destroy=="function"&&(this._destroy=Ne.destroy)),y.call(this)}function Ce(Ne,ne,Be,L,D){C("readableAddChunk",ne);var G,K=Ne._readableState;if(ne===null)K.reading=!1,function(ge,de){if(C("onEofChunk"),!de.ended){if(de.decoder){var Ke=de.decoder.end();Ke&&Ke.length&&(de.buffer.push(Ke),de.length+=de.objectMode?1:Ke.length)}de.ended=!0,de.sync?st(ge):(de.needReadable=!1,de.emittedReadable||(de.emittedReadable=!0,ft(ge)))}}(Ne,K);else if(D||(G=function(ge,de){var Ke,wt;return wt=de,P.isBuffer(wt)||wt instanceof m||typeof de=="string"||de===void 0||ge.objectMode||(Ke=new $("chunk",["string","Buffer","Uint8Array"],de)),Ke}(K,ne)),G)X(Ne,G);else if(K.objectMode||ne&&ne.length>0)if(typeof ne=="string"||K.objectMode||Object.getPrototypeOf(ne)===P.prototype||(ne=function(ge){return P.from(ge)}(ne)),L)K.endEmitted?X(Ne,new R):Je(Ne,K,ne,!0);else if(K.ended)X(Ne,new Q);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!Be?(ne=K.decoder.write(ne),K.objectMode||ne.length!==0?Je(Ne,K,ne,!1):be(Ne,K)):Je(Ne,K,ne,!1)}else L||(K.reading=!1,be(Ne,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function Je(Ne,ne,Be,L){ne.flowing&&ne.length===0&&!ne.sync?(ne.awaitDrain=0,Ne.emit("data",Be)):(ne.length+=ne.objectMode?1:Be.length,L?ne.buffer.unshift(Be):ne.buffer.push(Be),ne.needReadable&&st(Ne)),be(Ne,ne)}Object.defineProperty(me.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Ne){this._readableState&&(this._readableState.destroyed=Ne)}}),me.prototype.destroy=x.destroy,me.prototype._undestroy=x.undestroy,me.prototype._destroy=function(Ne,ne){ne(Ne)},me.prototype.push=function(Ne,ne){var Be,L=this._readableState;return L.objectMode?Be=!0:typeof Ne=="string"&&((ne=ne||L.defaultEncoding)!==L.encoding&&(Ne=P.from(Ne,ne),ne=""),Be=!0),Ce(this,Ne,ne,!1,Be)},me.prototype.unshift=function(Ne){return Ce(this,Ne,null,!0,!1)},me.prototype.isPaused=function(){return this._readableState.flowing===!1},me.prototype.setEncoding=function(Ne){U||(U=w(7503).s);var ne=new U(Ne);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;for(var Be=this._readableState.buffer.head,L="";Be!==null;)L+=ne.write(Be.data),Be=Be.next;return this._readableState.buffer.clear(),L!==""&&this._readableState.buffer.push(L),this._readableState.length=L.length,this};var we=1073741824;function qe(Ne,ne){return Ne<=0||ne.length===0&&ne.ended?0:ne.objectMode?1:Ne!=Ne?ne.flowing&&ne.length?ne.buffer.head.data.length:ne.length:(Ne>ne.highWaterMark&&(ne.highWaterMark=function(Be){return Be>=we?Be=we:(Be--,Be|=Be>>>1,Be|=Be>>>2,Be|=Be>>>4,Be|=Be>>>8,Be|=Be>>>16,Be++),Be}(Ne)),Ne<=ne.length?Ne:ne.ended?ne.length:(ne.needReadable=!0,0))}function st(Ne){var ne=Ne._readableState;C("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(C("emitReadable",ne.flowing),ne.emittedReadable=!0,process.nextTick(ft,Ne))}function ft(Ne){var ne=Ne._readableState;C("emitReadable_",ne.destroyed,ne.length,ne.ended),ne.destroyed||!ne.length&&!ne.ended||(Ne.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,ot(Ne)}function be(Ne,ne){ne.readingMore||(ne.readingMore=!0,process.nextTick(He,Ne,ne))}function He(Ne,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&ne.length===0);){var Be=ne.length;if(C("maybeReadMore read 0"),Ne.read(0),Be===ne.length)break}ne.readingMore=!1}function vt(Ne){var ne=Ne._readableState;ne.readableListening=Ne.listenerCount("readable")>0,ne.resumeScheduled&&!ne.paused?ne.flowing=!0:Ne.listenerCount("data")>0&&Ne.resume()}function Re(Ne){C("readable nexttick read 0"),Ne.read(0)}function Ye(Ne,ne){C("resume",ne.reading),ne.reading||Ne.read(0),ne.resumeScheduled=!1,Ne.emit("resume"),ot(Ne),ne.flowing&&!ne.reading&&Ne.read(0)}function ot(Ne){var ne=Ne._readableState;for(C("flow",ne.flowing);ne.flowing&&Ne.read()!==null;);}function Ht(Ne,ne){return ne.length===0?null:(ne.objectMode?Be=ne.buffer.shift():!Ne||Ne>=ne.length?(Be=ne.decoder?ne.buffer.join(""):ne.buffer.length===1?ne.buffer.first():ne.buffer.concat(ne.length),ne.buffer.clear()):Be=ne.buffer.consume(Ne,ne.decoder),Be);var Be}function Bt(Ne){var ne=Ne._readableState;C("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,process.nextTick(Et,ne,Ne))}function Et(Ne,ne){if(C("endReadableNT",Ne.endEmitted,Ne.length),!Ne.endEmitted&&Ne.length===0&&(Ne.endEmitted=!0,ne.readable=!1,ne.emit("end"),Ne.autoDestroy)){var Be=ne._writableState;(!Be||Be.autoDestroy&&Be.finished)&&ne.destroy()}}function Dt(Ne,ne){for(var Be=0,L=Ne.length;Be<L;Be++)if(Ne[Be]===ne)return Be;return-1}me.prototype.read=function(Ne){C("read",Ne),Ne=parseInt(Ne,10);var ne=this._readableState,Be=Ne;if(Ne!==0&&(ne.emittedReadable=!1),Ne===0&&ne.needReadable&&((ne.highWaterMark!==0?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return C("read: emitReadable",ne.length,ne.ended),ne.length===0&&ne.ended?Bt(this):st(this),null;if((Ne=qe(Ne,ne))===0&&ne.ended)return ne.length===0&&Bt(this),null;var L,D=ne.needReadable;return C("need readable",D),(ne.length===0||ne.length-Ne<ne.highWaterMark)&&C("length less than watermark",D=!0),ne.ended||ne.reading?C("reading or ended",D=!1):D&&(C("do read"),ne.reading=!0,ne.sync=!0,ne.length===0&&(ne.needReadable=!0),this._read(ne.highWaterMark),ne.sync=!1,ne.reading||(Ne=qe(Be,ne))),(L=Ne>0?Ht(Ne,ne):null)===null?(ne.needReadable=ne.length<=ne.highWaterMark,Ne=0):(ne.length-=Ne,ne.awaitDrain=0),ne.length===0&&(ne.ended||(ne.needReadable=!0),Be!==Ne&&ne.ended&&Bt(this)),L!==null&&this.emit("data",L),L},me.prototype._read=function(Ne){X(this,new se("_read()"))},me.prototype.pipe=function(Ne,ne){var Be=this,L=this._readableState;switch(L.pipesCount){case 0:L.pipes=Ne;break;case 1:L.pipes=[L.pipes,Ne];break;default:L.pipes.push(Ne)}L.pipesCount+=1,C("pipe count=%d opts=%j",L.pipesCount,ne);var D=ne&&ne.end===!1||Ne===process.stdout||Ne===process.stderr?ut:G;function G(){C("onend"),Ne.end()}L.endEmitted?process.nextTick(D):Be.once("end",D),Ne.on("unpipe",function nt(ht,_t){C("onunpipe"),ht===Be&&_t&&_t.hasUnpiped===!1&&(_t.hasUnpiped=!0,C("cleanup"),Ne.removeListener("close",wt),Ne.removeListener("finish",lt),Ne.removeListener("drain",K),Ne.removeListener("error",Ke),Ne.removeListener("unpipe",nt),Be.removeListener("end",G),Be.removeListener("end",ut),Be.removeListener("data",de),ge=!0,!L.awaitDrain||Ne._writableState&&!Ne._writableState.needDrain||K())});var K=function(nt){return function(){var ht=nt._readableState;C("pipeOnDrain",ht.awaitDrain),ht.awaitDrain&&ht.awaitDrain--,ht.awaitDrain===0&&E(nt,"data")&&(ht.flowing=!0,ot(nt))}}(Be);Ne.on("drain",K);var ge=!1;function de(nt){C("ondata");var ht=Ne.write(nt);C("dest.write",ht),ht===!1&&((L.pipesCount===1&&L.pipes===Ne||L.pipesCount>1&&Dt(L.pipes,Ne)!==-1)&&!ge&&(C("false write response, pause",L.awaitDrain),L.awaitDrain++),Be.pause())}function Ke(nt){C("onerror",nt),ut(),Ne.removeListener("error",Ke),E(Ne,"error")===0&&X(Ne,nt)}function wt(){Ne.removeListener("finish",lt),ut()}function lt(){C("onfinish"),Ne.removeListener("close",wt),ut()}function ut(){C("unpipe"),Be.unpipe(Ne)}return Be.on("data",de),function(nt,ht,_t){if(typeof nt.prependListener=="function")return nt.prependListener(ht,_t);nt._events&&nt._events[ht]?Array.isArray(nt._events[ht])?nt._events[ht].unshift(_t):nt._events[ht]=[_t,nt._events[ht]]:nt.on(ht,_t)}(Ne,"error",Ke),Ne.once("close",wt),Ne.once("finish",lt),Ne.emit("pipe",Be),L.flowing||(C("pipe resume"),Be.resume()),Ne},me.prototype.unpipe=function(Ne){var ne=this._readableState,Be={hasUnpiped:!1};if(ne.pipesCount===0)return this;if(ne.pipesCount===1)return Ne&&Ne!==ne.pipes||(Ne||(Ne=ne.pipes),ne.pipes=null,ne.pipesCount=0,ne.flowing=!1,Ne&&Ne.emit("unpipe",this,Be)),this;if(!Ne){var L=ne.pipes,D=ne.pipesCount;ne.pipes=null,ne.pipesCount=0,ne.flowing=!1;for(var G=0;G<D;G++)L[G].emit("unpipe",this,{hasUnpiped:!1});return this}var K=Dt(ne.pipes,Ne);return K===-1||(ne.pipes.splice(K,1),ne.pipesCount-=1,ne.pipesCount===1&&(ne.pipes=ne.pipes[0]),Ne.emit("unpipe",this,Be)),this},me.prototype.on=function(Ne,ne){var Be=y.prototype.on.call(this,Ne,ne),L=this._readableState;return Ne==="data"?(L.readableListening=this.listenerCount("readable")>0,L.flowing!==!1&&this.resume()):Ne==="readable"&&(L.endEmitted||L.readableListening||(L.readableListening=L.needReadable=!0,L.flowing=!1,L.emittedReadable=!1,C("on readable",L.length,L.reading),L.length?st(this):L.reading||process.nextTick(Re,this))),Be},me.prototype.addListener=me.prototype.on,me.prototype.removeListener=function(Ne,ne){var Be=y.prototype.removeListener.call(this,Ne,ne);return Ne==="readable"&&process.nextTick(vt,this),Be},me.prototype.removeAllListeners=function(Ne){var ne=y.prototype.removeAllListeners.apply(this,arguments);return Ne!=="readable"&&Ne!==void 0||process.nextTick(vt,this),ne},me.prototype.resume=function(){var Ne=this._readableState;return Ne.flowing||(C("resume"),Ne.flowing=!Ne.readableListening,function(ne,Be){Be.resumeScheduled||(Be.resumeScheduled=!0,process.nextTick(Ye,ne,Be))}(this,Ne)),Ne.paused=!1,this},me.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},me.prototype.wrap=function(Ne){var ne=this,Be=this._readableState,L=!1;for(var D in Ne.on("end",function(){if(C("wrapped end"),Be.decoder&&!Be.ended){var K=Be.decoder.end();K&&K.length&&ne.push(K)}ne.push(null)}),Ne.on("data",function(K){C("wrapped data"),Be.decoder&&(K=Be.decoder.write(K)),Be.objectMode&&K==null||(Be.objectMode||K&&K.length)&&(ne.push(K)||(L=!0,Ne.pause()))}),Ne)this[D]===void 0&&typeof Ne[D]=="function"&&(this[D]=function(K){return function(){return Ne[K].apply(Ne,arguments)}}(D));for(var G=0;G<ce.length;G++)Ne.on(ce[G],this.emit.bind(this,ce[G]));return this._read=function(K){C("wrapped _read",K),L&&(L=!1,Ne.resume())},this},typeof Symbol=="function"&&(me.prototype[Symbol.asyncIterator]=function(){return M===void 0&&(M=w(7299)),M(this)}),Object.defineProperty(me.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(me.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(me.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ne){this._readableState&&(this._readableState.flowing=Ne)}}),me._fromList=Ht,Object.defineProperty(me.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(me.from=function(Ne,ne){return _===void 0&&(_=w(6233)),_(me,Ne,ne)})},9798:function(b,p,w){b.exports=U;var F=w(3690).q,C=F.ERR_METHOD_NOT_IMPLEMENTED,E=F.ERR_MULTIPLE_CALLBACK,y=F.ERR_TRANSFORM_ALREADY_TRANSFORMING,P=F.ERR_TRANSFORM_WITH_LENGTH_0,m=w(6138);function T(I,x){var Z=this._transformState;Z.transforming=!1;var Y=Z.writecb;if(Y===null)return this.emit("error",new E);Z.writechunk=null,Z.writecb=null,x!=null&&this.push(x),Y(I);var $=this._readableState;$.reading=!1,($.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}function U(I){if(!(this instanceof U))return new U(I);m.call(this,I),this._transformState={afterTransform:T.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,I&&(typeof I.transform=="function"&&(this._transform=I.transform),typeof I.flush=="function"&&(this._flush=I.flush)),this.on("prefinish",M)}function M(){var I=this;typeof this._flush!="function"||this._readableState.destroyed?_(this,null,null):this._flush(function(x,Z){_(I,x,Z)})}function _(I,x,Z){if(x)return I.emit("error",x);if(Z!=null&&I.push(Z),I._writableState.length)throw new P;if(I._transformState.transforming)throw new y;return I.push(null)}w(1765)(U,m),U.prototype.push=function(I,x){return this._transformState.needTransform=!1,m.prototype.push.call(this,I,x)},U.prototype._transform=function(I,x,Z){Z(new C("_transform()"))},U.prototype._write=function(I,x,Z){var Y=this._transformState;if(Y.writecb=Z,Y.writechunk=I,Y.writeencoding=x,!Y.transforming){var $=this._readableState;(Y.needTransform||$.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}},U.prototype._read=function(I){var x=this._transformState;x.writechunk===null||x.transforming?x.needTransform=!0:(x.transforming=!0,this._transform(x.writechunk,x.writeencoding,x.afterTransform))},U.prototype._destroy=function(I,x){m.prototype._destroy.call(this,I,function(Z){x(Z)})}},8318:function(b,p,w){function F(be){var He=this;this.next=null,this.entry=null,this.finish=function(){(function(vt,Re,Ye){var ot=vt.entry;for(vt.entry=null;ot;){var Ht=ot.callback;Re.pendingcb--,Ht(void 0),ot=ot.next}Re.corkedRequestsFree.next=vt})(He,be)}}var C;b.exports=me,me.WritableState=oe;var E,y={deprecate:w(7839)},P=w(9299),m=w(1549).Buffer,T=w.g.Uint8Array||function(){},U=w(6163),M=w(7269).getHighWaterMark,_=w(3690).q,I=_.ERR_INVALID_ARG_TYPE,x=_.ERR_METHOD_NOT_IMPLEMENTED,Z=_.ERR_MULTIPLE_CALLBACK,Y=_.ERR_STREAM_CANNOT_PIPE,$=_.ERR_STREAM_DESTROYED,Q=_.ERR_STREAM_NULL_VALUES,se=_.ERR_STREAM_WRITE_AFTER_END,R=_.ERR_UNKNOWN_ENCODING,X=U.errorOrDestroy;function ce(){}function oe(be,He,vt){C=C||w(6138),be=be||{},typeof vt!="boolean"&&(vt=He instanceof C),this.objectMode=!!be.objectMode,vt&&(this.objectMode=this.objectMode||!!be.writableObjectMode),this.highWaterMark=M(this,be,"writableHighWaterMark",vt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Re=be.decodeStrings===!1;this.decodeStrings=!Re,this.defaultEncoding=be.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ye){(function(ot,Ht){var Bt=ot._writableState,Et=Bt.sync,Dt=Bt.writecb;if(typeof Dt!="function")throw new Z;if(function(ne){ne.writing=!1,ne.writecb=null,ne.length-=ne.writelen,ne.writelen=0}(Bt),Ht)(function(ne,Be,L,D,G){--Be.pendingcb,L?(process.nextTick(G,D),process.nextTick(ft,ne,Be),ne._writableState.errorEmitted=!0,X(ne,D)):(G(D),ne._writableState.errorEmitted=!0,X(ne,D),ft(ne,Be))})(ot,Bt,Et,Ht,Dt);else{var Ne=qe(Bt)||ot.destroyed;Ne||Bt.corked||Bt.bufferProcessing||!Bt.bufferedRequest||we(ot,Bt),Et?process.nextTick(Je,ot,Bt,Ne,Dt):Je(ot,Bt,Ne,Dt)}})(He,Ye)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=be.emitClose!==!1,this.autoDestroy=!!be.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new F(this)}function me(be){var He=this instanceof(C=C||w(6138));if(!He&&!E.call(me,this))return new me(be);this._writableState=new oe(be,this,He),this.writable=!0,be&&(typeof be.write=="function"&&(this._write=be.write),typeof be.writev=="function"&&(this._writev=be.writev),typeof be.destroy=="function"&&(this._destroy=be.destroy),typeof be.final=="function"&&(this._final=be.final)),P.call(this)}function Ce(be,He,vt,Re,Ye,ot,Ht){He.writelen=Re,He.writecb=Ht,He.writing=!0,He.sync=!0,He.destroyed?He.onwrite(new $("write")):vt?be._writev(Ye,He.onwrite):be._write(Ye,ot,He.onwrite),He.sync=!1}function Je(be,He,vt,Re){vt||function(Ye,ot){ot.length===0&&ot.needDrain&&(ot.needDrain=!1,Ye.emit("drain"))}(be,He),He.pendingcb--,Re(),ft(be,He)}function we(be,He){He.bufferProcessing=!0;var vt=He.bufferedRequest;if(be._writev&&vt&&vt.next){var Re=He.bufferedRequestCount,Ye=new Array(Re),ot=He.corkedRequestsFree;ot.entry=vt;for(var Ht=0,Bt=!0;vt;)Ye[Ht]=vt,vt.isBuf||(Bt=!1),vt=vt.next,Ht+=1;Ye.allBuffers=Bt,Ce(be,He,!0,He.length,Ye,"",ot.finish),He.pendingcb++,He.lastBufferedRequest=null,ot.next?(He.corkedRequestsFree=ot.next,ot.next=null):He.corkedRequestsFree=new F(He),He.bufferedRequestCount=0}else{for(;vt;){var Et=vt.chunk,Dt=vt.encoding,Ne=vt.callback;if(Ce(be,He,!1,He.objectMode?1:Et.length,Et,Dt,Ne),vt=vt.next,He.bufferedRequestCount--,He.writing)break}vt===null&&(He.lastBufferedRequest=null)}He.bufferedRequest=vt,He.bufferProcessing=!1}function qe(be){return be.ending&&be.length===0&&be.bufferedRequest===null&&!be.finished&&!be.writing}function st(be,He){be._final(function(vt){He.pendingcb--,vt&&X(be,vt),He.prefinished=!0,be.emit("prefinish"),ft(be,He)})}function ft(be,He){var vt=qe(He);if(vt&&(function(Ye,ot){ot.prefinished||ot.finalCalled||(typeof Ye._final!="function"||ot.destroyed?(ot.prefinished=!0,Ye.emit("prefinish")):(ot.pendingcb++,ot.finalCalled=!0,process.nextTick(st,Ye,ot)))}(be,He),He.pendingcb===0&&(He.finished=!0,be.emit("finish"),He.autoDestroy))){var Re=be._readableState;(!Re||Re.autoDestroy&&Re.endEmitted)&&be.destroy()}return vt}w(1765)(me,P),oe.prototype.getBuffer=function(){for(var be=this.bufferedRequest,He=[];be;)He.push(be),be=be.next;return He},function(){try{Object.defineProperty(oe.prototype,"buffer",{get:y.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(be){}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(me,Symbol.hasInstance,{value:function(be){return!!E.call(this,be)||this===me&&be&&be._writableState instanceof oe}})):E=function(be){return be instanceof this},me.prototype.pipe=function(){X(this,new Y)},me.prototype.write=function(be,He,vt){var Re,Ye=this._writableState,ot=!1,Ht=!Ye.objectMode&&(Re=be,m.isBuffer(Re)||Re instanceof T);return Ht&&!m.isBuffer(be)&&(be=function(Bt){return m.from(Bt)}(be)),typeof He=="function"&&(vt=He,He=null),Ht?He="buffer":He||(He=Ye.defaultEncoding),typeof vt!="function"&&(vt=ce),Ye.ending?function(Bt,Et){var Dt=new se;X(Bt,Dt),process.nextTick(Et,Dt)}(this,vt):(Ht||function(Bt,Et,Dt,Ne){var ne;return Dt===null?ne=new Q:typeof Dt=="string"||Et.objectMode||(ne=new I("chunk",["string","Buffer"],Dt)),!ne||(X(Bt,ne),process.nextTick(Ne,ne),!1)}(this,Ye,be,vt))&&(Ye.pendingcb++,ot=function(Bt,Et,Dt,Ne,ne,Be){if(!Dt){var L=function(ge,de,Ke){return ge.objectMode||ge.decodeStrings===!1||typeof de!="string"||(de=m.from(de,Ke)),de}(Et,Ne,ne);Ne!==L&&(Dt=!0,ne="buffer",Ne=L)}var D=Et.objectMode?1:Ne.length;Et.length+=D;var G=Et.length<Et.highWaterMark;if(G||(Et.needDrain=!0),Et.writing||Et.corked){var K=Et.lastBufferedRequest;Et.lastBufferedRequest={chunk:Ne,encoding:ne,isBuf:Dt,callback:Be,next:null},K?K.next=Et.lastBufferedRequest:Et.bufferedRequest=Et.lastBufferedRequest,Et.bufferedRequestCount+=1}else Ce(Bt,Et,!1,D,Ne,ne,Be);return G}(this,Ye,Ht,be,He,vt)),ot},me.prototype.cork=function(){this._writableState.corked++},me.prototype.uncork=function(){var be=this._writableState;be.corked&&(be.corked--,be.writing||be.corked||be.bufferProcessing||!be.bufferedRequest||we(this,be))},me.prototype.setDefaultEncoding=function(be){if(typeof be=="string"&&(be=be.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((be+"").toLowerCase())>-1))throw new R(be);return this._writableState.defaultEncoding=be,this},Object.defineProperty(me.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(me.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),me.prototype._write=function(be,He,vt){vt(new x("_write()"))},me.prototype._writev=null,me.prototype.end=function(be,He,vt){var Re=this._writableState;return typeof be=="function"?(vt=be,be=null,He=null):typeof He=="function"&&(vt=He,He=null),be!=null&&this.write(be,He),Re.corked&&(Re.corked=1,this.uncork()),Re.ending||function(Ye,ot,Ht){ot.ending=!0,ft(Ye,ot),Ht&&(ot.finished?process.nextTick(Ht):Ye.once("finish",Ht)),ot.ended=!0,Ye.writable=!1}(this,Re,vt),this},Object.defineProperty(me.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(me.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(be){this._writableState&&(this._writableState.destroyed=be)}}),me.prototype.destroy=U.destroy,me.prototype._undestroy=U.undestroy,me.prototype._destroy=function(be,He){He(be)}},7299:function(b,p,w){var F;function C(Q,se,R){return se in Q?Object.defineProperty(Q,se,{value:R,enumerable:!0,configurable:!0,writable:!0}):Q[se]=R,Q}var E=w(8800),y=Symbol("lastResolve"),P=Symbol("lastReject"),m=Symbol("error"),T=Symbol("ended"),U=Symbol("lastPromise"),M=Symbol("handlePromise"),_=Symbol("stream");function I(Q,se){return{value:Q,done:se}}function x(Q){var se=Q[y];if(se!==null){var R=Q[_].read();R!==null&&(Q[U]=null,Q[y]=null,Q[P]=null,se(I(R,!1)))}}function Z(Q){process.nextTick(x,Q)}var Y=Object.getPrototypeOf(function(){}),$=Object.setPrototypeOf((C(F={get stream(){return this[_]},next:function(){var Q=this,se=this[m];if(se!==null)return Promise.reject(se);if(this[T])return Promise.resolve(I(void 0,!0));if(this[_].destroyed)return new Promise(function(oe,me){process.nextTick(function(){Q[m]?me(Q[m]):oe(I(void 0,!0))})});var R,X=this[U];if(X)R=new Promise(function(oe,me){return function(Ce,Je){oe.then(function(){me[T]?Ce(I(void 0,!0)):me[M](Ce,Je)},Je)}}(X,this));else{var ce=this[_].read();if(ce!==null)return Promise.resolve(I(ce,!1));R=new Promise(this[M])}return this[U]=R,R}},Symbol.asyncIterator,function(){return this}),C(F,"return",function(){var Q=this;return new Promise(function(se,R){Q[_].destroy(null,function(X){X?R(X):se(I(void 0,!0))})})}),F),Y);b.exports=function(Q){var se,R=Object.create($,(C(se={},_,{value:Q,writable:!0}),C(se,y,{value:null,writable:!0}),C(se,P,{value:null,writable:!0}),C(se,m,{value:null,writable:!0}),C(se,T,{value:Q._readableState.endEmitted,writable:!0}),C(se,M,{value:function(X,ce){var oe=R[_].read();oe?(R[U]=null,R[y]=null,R[P]=null,X(I(oe,!1))):(R[y]=X,R[P]=ce)},writable:!0}),se));return R[U]=null,E(Q,function(X){if(X&&X.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ce=R[P];return ce!==null&&(R[U]=null,R[y]=null,R[P]=null,ce(X)),void(R[m]=X)}var oe=R[y];oe!==null&&(R[U]=null,R[y]=null,R[P]=null,oe(I(void 0,!0))),R[T]=!0}),Q.on("readable",Z.bind(null,R)),R}},8393:function(b,p,w){function F(T,U){var M=Object.keys(T);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(T);U&&(_=_.filter(function(I){return Object.getOwnPropertyDescriptor(T,I).enumerable})),M.push.apply(M,_)}return M}function C(T,U,M){return U in T?Object.defineProperty(T,U,{value:M,enumerable:!0,configurable:!0,writable:!0}):T[U]=M,T}function E(T,U){for(var M=0;M<U.length;M++){var _=U[M];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var y=w(1549).Buffer,P=w(9862).inspect,m=P&&P.custom||"inspect";b.exports=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T),this.head=null,this.tail=null,this.length=0}var U,M;return U=T,M=[{key:"push",value:function(_){var I={data:_,next:null};this.length>0?this.tail.next=I:this.head=I,this.tail=I,++this.length}},{key:"unshift",value:function(_){var I={data:_,next:this.head};this.length===0&&(this.tail=I),this.head=I,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var I=this.head,x=""+I.data;I=I.next;)x+=_+I.data;return x}},{key:"concat",value:function(_){if(this.length===0)return y.alloc(0);for(var I,x,Z,Y=y.allocUnsafe(_>>>0),$=this.head,Q=0;$;)I=$.data,x=Y,Z=Q,y.prototype.copy.call(I,x,Z),Q+=$.data.length,$=$.next;return Y}},{key:"consume",value:function(_,I){var x;return _<this.head.data.length?(x=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):x=_===this.head.data.length?this.shift():I?this._getString(_):this._getBuffer(_),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var I=this.head,x=1,Z=I.data;for(_-=Z.length;I=I.next;){var Y=I.data,$=_>Y.length?Y.length:_;if($===Y.length?Z+=Y:Z+=Y.slice(0,_),(_-=$)==0){$===Y.length?(++x,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=Y.slice($));break}++x}return this.length-=x,Z}},{key:"_getBuffer",value:function(_){var I=y.allocUnsafe(_),x=this.head,Z=1;for(x.data.copy(I),_-=x.data.length;x=x.next;){var Y=x.data,$=_>Y.length?Y.length:_;if(Y.copy(I,I.length-_,0,$),(_-=$)==0){$===Y.length?(++Z,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=Y.slice($));break}++Z}return this.length-=Z,I}},{key:m,value:function(_,I){return P(this,function(x){for(var Z=1;Z<arguments.length;Z++){var Y=arguments[Z]!=null?arguments[Z]:{};Z%2?F(Object(Y),!0).forEach(function($){C(x,$,Y[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(Y)):F(Object(Y)).forEach(function($){Object.defineProperty(x,$,Object.getOwnPropertyDescriptor(Y,$))})}return x}({},I,{depth:0,customInspect:!1}))}}],M&&E(U.prototype,M),T}()},6163:function(b){function p(C,E){F(C,E),w(C)}function w(C){C._writableState&&!C._writableState.emitClose||C._readableState&&!C._readableState.emitClose||C.emit("close")}function F(C,E){C.emit("error",E)}b.exports={destroy:function(C,E){var y=this,P=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return P||m?(E?E(C):C&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(F,this,C)):process.nextTick(F,this,C)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(C||null,function(T){!E&&T?y._writableState?y._writableState.errorEmitted?process.nextTick(w,y):(y._writableState.errorEmitted=!0,process.nextTick(p,y,T)):process.nextTick(p,y,T):E?(process.nextTick(w,y),E(T)):process.nextTick(w,y)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(C,E){var y=C._readableState,P=C._writableState;y&&y.autoDestroy||P&&P.autoDestroy?C.destroy(E):C.emit("error",E)}}},8800:function(b,p,w){var F=w(3690).q.ERR_STREAM_PREMATURE_CLOSE;function C(){}b.exports=function E(y,P,m){if(typeof P=="function")return E(y,null,P);P||(P={}),m=function(se){var R=!1;return function(){if(!R){R=!0;for(var X=arguments.length,ce=new Array(X),oe=0;oe<X;oe++)ce[oe]=arguments[oe];se.apply(this,ce)}}}(m||C);var T=P.readable||P.readable!==!1&&y.readable,U=P.writable||P.writable!==!1&&y.writable,M=function(){y.writable||I()},_=y._writableState&&y._writableState.finished,I=function(){U=!1,_=!0,T||m.call(y)},x=y._readableState&&y._readableState.endEmitted,Z=function(){T=!1,x=!0,U||m.call(y)},Y=function(se){m.call(y,se)},$=function(){var se;return T&&!x?(y._readableState&&y._readableState.ended||(se=new F),m.call(y,se)):U&&!_?(y._writableState&&y._writableState.ended||(se=new F),m.call(y,se)):void 0},Q=function(){y.req.on("finish",I)};return function(se){return se.setHeader&&typeof se.abort=="function"}(y)?(y.on("complete",I),y.on("abort",$),y.req?Q():y.on("request",Q)):U&&!y._writableState&&(y.on("end",M),y.on("close",M)),y.on("end",Z),y.on("finish",I),P.error!==!1&&y.on("error",Y),y.on("close",$),function(){y.removeListener("complete",I),y.removeListener("abort",$),y.removeListener("request",Q),y.req&&y.req.removeListener("finish",I),y.removeListener("end",M),y.removeListener("close",M),y.removeListener("finish",I),y.removeListener("end",Z),y.removeListener("error",Y),y.removeListener("close",$)}}},6233:function(b){b.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(b,p,w){var F,C=w(3690).q,E=C.ERR_MISSING_ARGS,y=C.ERR_STREAM_DESTROYED;function P(_){if(_)throw _}function m(_,I,x,Z){Z=function(Q){var se=!1;return function(){se||(se=!0,Q.apply(void 0,arguments))}}(Z);var Y=!1;_.on("close",function(){Y=!0}),F===void 0&&(F=w(8800)),F(_,{readable:I,writable:x},function(Q){if(Q)return Z(Q);Y=!0,Z()});var $=!1;return function(Q){if(!Y&&!$)return $=!0,function(se){return se.setHeader&&typeof se.abort=="function"}(_)?_.abort():typeof _.destroy=="function"?_.destroy():void Z(Q||new y("pipe"))}}function T(_){_()}function U(_,I){return _.pipe(I)}function M(_){return _.length?typeof _[_.length-1]!="function"?P:_.pop():P}b.exports=function(){for(var _=arguments.length,I=new Array(_),x=0;x<_;x++)I[x]=arguments[x];var Z,Y=M(I);if(Array.isArray(I[0])&&(I=I[0]),I.length<2)throw new E("streams");var $=I.map(function(Q,se){var R=se<I.length-1;return m(Q,R,se>0,function(X){Z||(Z=X),X&&$.forEach(T),R||($.forEach(T),Y(Z))})});return I.reduce(U)}},7269:function(b,p,w){var F=w(3690).q.ERR_INVALID_OPT_VALUE;b.exports={getHighWaterMark:function(C,E,y,P){var m=function(T,U,M){return T.highWaterMark!=null?T.highWaterMark:U?T[M]:null}(E,P,y);if(m!=null){if(!isFinite(m)||Math.floor(m)!==m||m<0)throw new F(P?y:"highWaterMark",m);return Math.floor(m)}return C.objectMode?16:16384}}},9299:function(b,p,w){b.exports=w(1159).EventEmitter},7503:function(b,p,w){var F=w(8387).Buffer,C=F.isEncoding||function(x){switch((x=""+x)&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function E(x){var Z;switch(this.encoding=function(Y){var $=function(Q){if(!Q)return"utf8";for(var se;;)switch(Q){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Q;default:if(se)return;Q=(""+Q).toLowerCase(),se=!0}}(Y);if(typeof $!="string"&&(F.isEncoding===C||!C(Y)))throw new Error("Unknown encoding: "+Y);return $||Y}(x),this.encoding){case"utf16le":this.text=m,this.end=T,Z=4;break;case"utf8":this.fillLast=P,Z=4;break;case"base64":this.text=U,this.end=M,Z=3;break;default:return this.write=_,void(this.end=I)}this.lastNeed=0,this.lastTotal=0,this.lastChar=F.allocUnsafe(Z)}function y(x){return x<=127?0:x>>5==6?2:x>>4==14?3:x>>3==30?4:x>>6==2?-1:-2}function P(x){var Z=this.lastTotal-this.lastNeed,Y=function($,Q,se){if((192&Q[0])!=128)return $.lastNeed=0,"";if($.lastNeed>1&&Q.length>1){if((192&Q[1])!=128)return $.lastNeed=1,"";if($.lastNeed>2&&Q.length>2&&(192&Q[2])!=128)return $.lastNeed=2,""}}(this,x);return Y!==void 0?Y:this.lastNeed<=x.length?(x.copy(this.lastChar,Z,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(x.copy(this.lastChar,Z,0,x.length),void(this.lastNeed-=x.length))}function m(x,Z){if((x.length-Z)%2==0){var Y=x.toString("utf16le",Z);if(Y){var $=Y.charCodeAt(Y.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],Y.slice(0,-1)}return Y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",Z,x.length-1)}function T(x){var Z=x&&x.length?this.write(x):"";if(this.lastNeed){var Y=this.lastTotal-this.lastNeed;return Z+this.lastChar.toString("utf16le",0,Y)}return Z}function U(x,Z){var Y=(x.length-Z)%3;return Y===0?x.toString("base64",Z):(this.lastNeed=3-Y,this.lastTotal=3,Y===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",Z,x.length-Y))}function M(x){var Z=x&&x.length?this.write(x):"";return this.lastNeed?Z+this.lastChar.toString("base64",0,3-this.lastNeed):Z}function _(x){return x.toString(this.encoding)}function I(x){return x&&x.length?this.write(x):""}p.s=E,E.prototype.write=function(x){if(x.length===0)return"";var Z,Y;if(this.lastNeed){if((Z=this.fillLast(x))===void 0)return"";Y=this.lastNeed,this.lastNeed=0}else Y=0;return Y<x.length?Z?Z+this.text(x,Y):this.text(x,Y):Z||""},E.prototype.end=function(x){var Z=x&&x.length?this.write(x):"";return this.lastNeed?Z+"":Z},E.prototype.text=function(x,Z){var Y=function(Q,se,R){var X=se.length-1;if(X<R)return 0;var ce=y(se[X]);return ce>=0?(ce>0&&(Q.lastNeed=ce-1),ce):--X<R||ce===-2?0:(ce=y(se[X]))>=0?(ce>0&&(Q.lastNeed=ce-2),ce):--X<R||ce===-2?0:(ce=y(se[X]))>=0?(ce>0&&(ce===2?ce=0:Q.lastNeed=ce-3),ce):0}(this,x,Z);if(!this.lastNeed)return x.toString("utf8",Z);this.lastTotal=Y;var $=x.length-(Y-this.lastNeed);return x.copy(this.lastChar,0,$),x.toString("utf8",Z,$)},E.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length}},1067:function(b,p,w){var F;(function(C,E){var y="function",P="undefined",m="object",T="string",U="major",M="model",_="name",I="type",x="vendor",Z="version",Y="architecture",$="console",Q="mobile",se="tablet",R="smarttv",X="wearable",ce="embedded",oe="Amazon",me="Apple",Ce="ASUS",Je="BlackBerry",we="Browser",qe="Chrome",st="Firefox",ft="Google",be="Huawei",He="LG",vt="Microsoft",Re="Motorola",Ye="Opera",ot="Samsung",Ht="Sharp",Bt="Sony",Et="Xiaomi",Dt="Zebra",Ne="Facebook",ne="Chromium OS",Be="Mac OS",L=function(ht){for(var _t={},Tt=0;Tt<ht.length;Tt++)_t[ht[Tt].toUpperCase()]=ht[Tt];return _t},D=function(ht,_t){return typeof ht===T&&G(_t).indexOf(G(ht))!==-1},G=function(ht){return ht.toLowerCase()},K=function(ht,_t){if(typeof ht===T)return ht=ht.replace(/^\s\s*/,""),typeof _t===P?ht:ht.substring(0,500)},ge=function(ht,_t){for(var Tt,Mt,_n,rn,cn,Ft,Gn=0;Gn<_t.length&&!cn;){var Sr=_t[Gn],Gr=_t[Gn+1];for(Tt=Mt=0;Tt<Sr.length&&!cn&&Sr[Tt];)if(cn=Sr[Tt++].exec(ht))for(_n=0;_n<Gr.length;_n++)Ft=cn[++Mt],typeof(rn=Gr[_n])===m&&rn.length>0?rn.length===2?typeof rn[1]==y?this[rn[0]]=rn[1].call(this,Ft):this[rn[0]]=rn[1]:rn.length===3?typeof rn[1]!==y||rn[1].exec&&rn[1].test?this[rn[0]]=Ft?Ft.replace(rn[1],rn[2]):E:this[rn[0]]=Ft?rn[1].call(this,Ft,rn[2]):E:rn.length===4&&(this[rn[0]]=Ft?rn[3].call(this,Ft.replace(rn[1],rn[2])):E):this[rn]=Ft||E;Gn+=2}},de=function(ht,_t){for(var Tt in _t)if(typeof _t[Tt]===m&&_t[Tt].length>0){for(var Mt=0;Mt<_t[Tt].length;Mt++)if(D(_t[Tt][Mt],ht))return Tt==="?"?E:Tt}else if(D(_t[Tt],ht))return Tt==="?"?E:Tt;return ht},Ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},wt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[Z,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[Z,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,Z],[/opios[\/ ]+([\w\.]+)/i],[Z,[_,Ye+" Mini"]],[/\bopr\/([\w\.]+)/i],[Z,[_,Ye]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[Z,[_,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[_,Z],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[Z,[_,"UC"+we]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[Z,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[Z,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[Z,[_,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[Z,[_,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[Z,[_,"Smart Lenovo "+we]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+we],Z],[/\bfocus\/([\w\.]+)/i],[Z,[_,st+" Focus"]],[/\bopt\/([\w\.]+)/i],[Z,[_,Ye+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[Z,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[Z,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[Z,[_,Ye+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[Z,[_,"MIUI "+we]],[/fxios\/([-\w\.]+)/i],[Z,[_,st]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+we]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+we],Z],[/samsungbrowser\/([\w\.]+)/i],[Z,[_,ot+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],Z],[/metasr[\/ ]?([\d\.]+)/i],[Z,[_,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[_,"Sogou Mobile"],Z],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[_,Z],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,Ne],Z],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[_,Z],[/\bgsa\/([\w\.]+) .*safari\//i],[Z,[_,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[Z,[_,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[Z,[_,qe+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,qe+" WebView"],Z],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[Z,[_,"Android "+we]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,Z],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[Z,[_,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[Z,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[Z,de,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[_,Z],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],Z],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[Z,[_,st+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[_,Z],[/(cobalt)\/([\w\.]+)/i],[_,[Z,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Y,"amd64"]],[/(ia32(?=;))/i],[[Y,G]],[/((?:i[346]|x)86)[;\)]/i],[[Y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Y,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[Y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Y,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[M,[x,ot],[I,se]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[M,[x,ot],[I,Q]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[M,[x,me],[I,Q]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[M,[x,me],[I,se]],[/(macintosh);/i],[M,[x,me]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[M,[x,Ht],[I,Q]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[M,[x,be],[I,se]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[M,[x,be],[I,Q]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[M,/_/g," "],[x,Et],[I,Q]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[M,/_/g," "],[x,Et],[I,se]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[M,[x,"OPPO"],[I,Q]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[M,[x,"Vivo"],[I,Q]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[M,[x,"Realme"],[I,Q]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[M,[x,Re],[I,Q]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[M,[x,Re],[I,se]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[M,[x,He],[I,se]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[M,[x,He],[I,Q]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[M,[x,"Lenovo"],[I,se]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[M,/_/g," "],[x,"Nokia"],[I,Q]],[/(pixel c)\b/i],[M,[x,ft],[I,se]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[M,[x,ft],[I,Q]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[M,[x,Bt],[I,Q]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[M,"Xperia Tablet"],[x,Bt],[I,se]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[M,[x,"OnePlus"],[I,Q]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[M,[x,oe],[I,se]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[M,/(.+)/g,"Fire Phone $1"],[x,oe],[I,Q]],[/(playbook);[-\w\),; ]+(rim)/i],[M,x,[I,se]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[M,[x,Je],[I,Q]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[M,[x,Ce],[I,se]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[M,[x,Ce],[I,Q]],[/(nexus 9)/i],[M,[x,"HTC"],[I,se]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[x,[M,/_/g," "],[I,Q]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[M,[x,"Acer"],[I,se]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[M,[x,"Meizu"],[I,Q]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[M,[x,"Ulefone"],[I,Q]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[x,M,[I,Q]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[x,M,[I,se]],[/(surface duo)/i],[M,[x,vt],[I,se]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[M,[x,"Fairphone"],[I,Q]],[/(u304aa)/i],[M,[x,"AT&T"],[I,Q]],[/\bsie-(\w*)/i],[M,[x,"Siemens"],[I,Q]],[/\b(rct\w+) b/i],[M,[x,"RCA"],[I,se]],[/\b(venue[\d ]{2,7}) b/i],[M,[x,"Dell"],[I,se]],[/\b(q(?:mv|ta)\w+) b/i],[M,[x,"Verizon"],[I,se]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[M,[x,"Barnes & Noble"],[I,se]],[/\b(tm\d{3}\w+) b/i],[M,[x,"NuVision"],[I,se]],[/\b(k88) b/i],[M,[x,"ZTE"],[I,se]],[/\b(nx\d{3}j) b/i],[M,[x,"ZTE"],[I,Q]],[/\b(gen\d{3}) b.+49h/i],[M,[x,"Swiss"],[I,Q]],[/\b(zur\d{3}) b/i],[M,[x,"Swiss"],[I,se]],[/\b((zeki)?tb.*\b) b/i],[M,[x,"Zeki"],[I,se]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[x,"Dragon Touch"],M,[I,se]],[/\b(ns-?\w{0,9}) b/i],[M,[x,"Insignia"],[I,se]],[/\b((nxa|next)-?\w{0,9}) b/i],[M,[x,"NextBook"],[I,se]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[x,"Voice"],M,[I,Q]],[/\b(lvtel\-)?(v1[12]) b/i],[[x,"LvTel"],M,[I,Q]],[/\b(ph-1) /i],[M,[x,"Essential"],[I,Q]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[M,[x,"Envizen"],[I,se]],[/\b(trio[-\w\. ]+) b/i],[M,[x,"MachSpeed"],[I,se]],[/\btu_(1491) b/i],[M,[x,"Rotor"],[I,se]],[/(shield[\w ]+) b/i],[M,[x,"Nvidia"],[I,se]],[/(sprint) (\w+)/i],[x,M,[I,Q]],[/(kin\.[onetw]{3})/i],[[M,/\./g," "],[x,vt],[I,Q]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[M,[x,Dt],[I,se]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[M,[x,Dt],[I,Q]],[/smart-tv.+(samsung)/i],[x,[I,R]],[/hbbtv.+maple;(\d+)/i],[[M,/^/,"SmartTV"],[x,ot],[I,R]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[x,He],[I,R]],[/(apple) ?tv/i],[x,[M,me+" TV"],[I,R]],[/crkey/i],[[M,qe+"cast"],[x,ft],[I,R]],[/droid.+aft(\w+)( bui|\))/i],[M,[x,oe],[I,R]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[M,[x,Ht],[I,R]],[/(bravia[\w ]+)( bui|\))/i],[M,[x,Bt],[I,R]],[/(mitv-\w{5}) bui/i],[M,[x,Et],[I,R]],[/Hbbtv.*(technisat) (.*);/i],[x,M,[I,R]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[x,K],[M,K],[I,R]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[I,R]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[x,M,[I,$]],[/droid.+; (shield) bui/i],[M,[x,"Nvidia"],[I,$]],[/(playstation [345portablevi]+)/i],[M,[x,Bt],[I,$]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[M,[x,vt],[I,$]],[/((pebble))app/i],[x,M,[I,X]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[M,[x,me],[I,X]],[/droid.+; (glass) \d/i],[M,[x,ft],[I,X]],[/droid.+; (wt63?0{2,3})\)/i],[M,[x,Dt],[I,X]],[/(quest( 2| pro)?)/i],[M,[x,Ne],[I,X]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[x,[I,ce]],[/(aeobc)\b/i],[M,[x,oe],[I,ce]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[M,[I,Q]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[M,[I,se]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[I,se]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[I,Q]],[/(android[-\w\. ]{0,9});.+buil/i],[M,[x,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[Z,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[Z,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[_,Z],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[Z,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,Z],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[_,[Z,de,Ke]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[Z,de,Ke],[_,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[Z,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,Be],[Z,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[Z,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,Z],[/\(bb(10);/i],[Z,[_,Je]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[Z,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[Z,[_,st+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[Z,[_,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[Z,[_,"watchOS"]],[/crkey\/([\d\.]+)/i],[Z,[_,qe+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[_,ne],Z],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,Z],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],Z],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[_,Z]]},lt=function(ht,_t){if(typeof ht===m&&(_t=ht,ht=E),!(this instanceof lt))return new lt(ht,_t).getResult();var Tt=typeof C!==P&&C.navigator?C.navigator:E,Mt=ht||(Tt&&Tt.userAgent?Tt.userAgent:""),_n=Tt&&Tt.userAgentData?Tt.userAgentData:E,rn=_t?function(Ft,Gn){var Sr={};for(var Gr in Ft)Gn[Gr]&&Gn[Gr].length%2==0?Sr[Gr]=Gn[Gr].concat(Ft[Gr]):Sr[Gr]=Ft[Gr];return Sr}(wt,_t):wt,cn=Tt&&Tt.userAgent==Mt;return this.getBrowser=function(){var Ft,Gn={};return Gn[_]=E,Gn[Z]=E,ge.call(Gn,Mt,rn.browser),Gn[U]=typeof(Ft=Gn[Z])===T?Ft.replace(/[^\d\.]/g,"").split(".")[0]:E,cn&&Tt&&Tt.brave&&typeof Tt.brave.isBrave==y&&(Gn[_]="Brave"),Gn},this.getCPU=function(){var Ft={};return Ft[Y]=E,ge.call(Ft,Mt,rn.cpu),Ft},this.getDevice=function(){var Ft={};return Ft[x]=E,Ft[M]=E,Ft[I]=E,ge.call(Ft,Mt,rn.device),cn&&!Ft[I]&&_n&&_n.mobile&&(Ft[I]=Q),cn&&Ft[M]=="Macintosh"&&Tt&&typeof Tt.standalone!==P&&Tt.maxTouchPoints&&Tt.maxTouchPoints>2&&(Ft[M]="iPad",Ft[I]=se),Ft},this.getEngine=function(){var Ft={};return Ft[_]=E,Ft[Z]=E,ge.call(Ft,Mt,rn.engine),Ft},this.getOS=function(){var Ft={};return Ft[_]=E,Ft[Z]=E,ge.call(Ft,Mt,rn.os),cn&&!Ft[_]&&_n&&_n.platform!="Unknown"&&(Ft[_]=_n.platform.replace(/chrome os/i,ne).replace(/macos/i,Be)),Ft},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Mt},this.setUA=function(Ft){return Mt=typeof Ft===T&&Ft.length>500?K(Ft,500):Ft,this},this.setUA(Mt),this};lt.VERSION="1.0.37",lt.BROWSER=L([_,Z,U]),lt.CPU=L([Y]),lt.DEVICE=L([M,x,I,$,Q,R,se,X,ce]),lt.ENGINE=lt.OS=L([_,Z]),typeof p!==P?(b.exports&&(p=b.exports=lt),p.UAParser=lt):w.amdO?(F=(function(){return lt}).call(p,w,p,b))===E||(b.exports=F):typeof C!==P&&(C.UAParser=lt);var ut=typeof C!==P&&(C.jQuery||C.Zepto);if(ut&&!ut.ua){var nt=new lt;ut.ua=nt.getResult(),ut.ua.get=function(){return nt.getUA()},ut.ua.set=function(ht){nt.setUA(ht);var _t=nt.getResult();for(var Tt in _t)ut.ua[Tt]=_t[Tt]}}})(typeof window=="object"?window:this)},7839:function(b,p,w){function F(C){try{if(!w.g.localStorage)return!1}catch(y){return!1}var E=w.g.localStorage[C];return E!=null&&String(E).toLowerCase()==="true"}b.exports=function(C,E){if(F("noDeprecation"))return C;var y=!1;return function(){if(!y){if(F("throwDeprecation"))throw new Error(E);F("traceDeprecation")?console.trace(E):console.warn(E),y=!0}return C.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(b){b.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(b){b.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(b){b.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(b){b.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(b){b.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(b){b.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},d={};function g(b){var p=d[b];if(p!==void 0)return p.exports;var w=d[b]={exports:{}};return l[b].call(w.exports,w,w.exports,g),w.exports}g.amdO={},g.n=function(b){var p=b&&b.__esModule?function(){return b.default}:function(){return b};return g.d(p,{a:p}),p},g.d=function(b,p){for(var w in p)g.o(p,w)&&!g.o(b,w)&&Object.defineProperty(b,w,{enumerable:!0,get:p[w]})},g.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(b){if(typeof window=="object")return window}}(),g.o=function(b,p){return Object.prototype.hasOwnProperty.call(b,p)};var S={};return function(){g.d(S,{default:function(){return m}}),g(8416);var b,p=g(1715),w=g(8080),F=g(1737),C=g(1139),E=function(){var T,U="application/dash+xml";function M(I,x,Z){if(!I||!/^VIDEO$/i.test(I.nodeName))return null;if(I._dashjs_player)return I._dashjs_player;var Y,$=I.id||I.name||"video element";if(!(x=x||[].slice.call(I.querySelectorAll("source")).filter(function(Q){return Q.type==U})[0])&&I.src)(x=document.createElement("source")).src=I.src;else if(!x&&!I.src)return null;return Z=Z||{},(Y=(0,C.Z)(Z).create()).initialize(I,x.src,I.autoplay),T||(T=Y.getDebug().getLogger()),T.debug("Converted "+$+" to dash.js player and added content: "+x.src),I._dashjs_player=Y,Y}function _(I){return/^VIDEO$/i.test(I.nodeName)?I:_(I.parentNode)}return{create:M,createAll:function(I,x){var Z=[];I=I||"[data-dashjs-player]";for(var Y=(x=x||document).querySelectorAll(I),$=0;$<Y.length;$++){var Q=M(Y[$],null);Z.push(Q)}for(var se=x.querySelectorAll('source[type="'+U+'"]'),R=0;R<se.length;R++){var X=M(_(se[R]),null);Z.push(X)}return Z}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?E.createAll():b=window.setInterval(function(){window.dashjs&&(window.clearInterval(b),E.createAll())},500):window.addEventListener("load",function T(){window.removeEventListener("load",T),E.createAll()}));var y=E,P=g(6398);dashjs.Protection=F.default,dashjs.MetricsReporting=w.default,dashjs.MediaPlayerFactory=y,dashjs.Debug=P.Z,dashjs.supportsMediaSource=p.B;var m=dashjs}(),S.default}()})})(SB);var zY=SB.exports;const YY=Zb(zY);var Du,Xi,nI,rI,Eg={};Eg.d=(i,o)=>{for(var l in o)Eg.o(o,l)&&!Eg.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:o[l]})},Eg.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o);var bE={};function q3(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,d=Array(o);l<o;l++)d[l]=i[l];return d}function io(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{},d=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(l).filter(function(g){return Object.getOwnPropertyDescriptor(l,g).enumerable}))),d.forEach(function(g){var S;S=l[g],g in i?Object.defineProperty(i,g,{value:S,enumerable:!0,configurable:!0,writable:!0}):i[g]=S})}return i}function go(i,o){return o=o!=null?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):function(l,d){var g=Object.keys(l);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(l);g.push.apply(g,S)}return g}(Object(o)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(o,l))}),i}function G3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,d){var g,S,b=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(b!=null){var p=[],w=!0,F=!1;try{for(b=b.call(l);!(w=(g=b.next()).done)&&(p.push(g.value),!d||p.length!==d);w=!0);}catch(C){F=!0,S=C}finally{try{w||b.return==null||b.return()}finally{if(F)throw S}}return p}}(i,o)||function(l,d){if(l){if(typeof l=="string")return q3(l,d);var g=Object.prototype.toString.call(l).slice(8,-1);if(g==="Object"&&l.constructor&&(g=l.constructor.name),g==="Map"||g==="Set")return Array.from(g);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return q3(l,d)}}(i,o)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Eg.d(bE,{GP:()=>nI,fZ:()=>$Y,vn:()=>rI}),(Du=nI||(nI={})).LOADED="loaded",Du.SEEKING="seeking",Du.SEEKED="seeked",Du.BUFFERING="buffering",Du.BUFFERED="buffered",Du.PLAY="play",Du.PLAYING="playing",Du.PAUSE="pause",Du.ENDED="ended",Du.TIME_UPDATE="timeupdate",(Xi=rI||(rI={})).loadstart="loadstart",Xi.progress="progress",Xi.suspend="suspend",Xi.abort="abort",Xi.error="error",Xi.emptied="emptied",Xi.stalled="stalled",Xi.loadedmetadata="loadedmetadata",Xi.loadeddata="loadeddata",Xi.canplay="canplay",Xi.canplaythrough="canplaythrough",Xi.playing="playing",Xi.waiting="waiting",Xi.seeking="seeking",Xi.seeked="seeked",Xi.ended="ended",Xi.durationchange="durationchange",Xi.timeupdate="timeupdate",Xi.play="play",Xi.pause="pause",Xi.ratechange="ratechange",Xi.resize="resize",Xi.volumechange="volumechange";var WY={paused:!1,ended:!1,loading:!0,buffering:!1,seeking:!1,initialPlayFired:!1,deferLoadedEvent:!1,deferPlayingEvent:!1,deferSeekedEvent:!1,playRequested:!1},$Y=function(i){var o=i.mediaElement,l=i.callback,d=i.allowResumeAfterEnded,g=d!==void 0&&d,S=null,b=function(){typeof S=="number"&&clearTimeout(S)},p=io({},WY),w=function(){return g?p.loading:p.loading||p.ended},F=function(){!p.loading&&p.buffering&&o.playbackRate>0&&(p=go(io({},p),{buffering:!1}),l("buffered")),p.loading&&(o.playbackRate===0?p=go(io({},p),{deferLoadedEvent:!0}):(p=go(io({},p),{loading:!1,deferLoadedEvent:!1}),l("loaded")))},C=function(){w()||(p.ended&&(p.ended=!1),p.buffering&&l("buffered"),p=go(io({},p),{seeking:!0,buffering:!1}),l("seeking"))},E=function(){if(!w()&&p.seeking){if(o.playbackRate===0){p=go(io({},p),{deferSeekedEvent:!0});return}p=go(io({},p),{seeking:!1,deferSeekedEvent:!1}),l("seeked")}},y=function(){if(b(),!w()&&!p.seeking){if(o.seeking){C();return}p.buffering||(p=go(io({},p),{buffering:!0}),l("buffering"))}},P=function(){if(b(),o.playbackRate===0){p=go(io({},p),{deferPlayingEvent:!0});return}(p=go(io({},p),{deferPlayingEvent:!1})).loading&&F(),p.initialPlayFired?p.buffering?(p=go(io({},p),{buffering:!1}),l("buffered")):p.seeking&&(p=go(io({},p),{seeking:!1,deferSeekedEvent:!1}),l("seeked")):(p=go(io({},p),{initialPlayFired:!0,paused:!1,playRequested:!1}),l("playing")),p.paused&&p.playRequested&&(p=go(io({},p),{paused:!1,playRequested:!1}),l("playing"))},m=function(){return!p.seeking&&!p.buffering&&o.playbackRate===0&&!o.seeking},T=[["canplaythrough",F],["playing",P],["waiting",y],["seeking",C],["seeked",E],["ended",function(){p=go(io({},p),{ended:!0,buffering:!1,seeking:!1,loading:!1,paused:!0}),b(),l("ended")}],["timeupdate",function(){w()||(p.buffering&&!o.paused&&(p=go(io({},p),{buffering:!1}),l("buffered")),l("timeupdate"))}],["play",function(){!w()&&p.paused&&p.initialPlayFired&&(p=go(io({},p),{playRequested:!0}),l("play"))}],["pause",function(){!o.ended&&(p.playRequested||!p.paused)&&((p=go(io({},p),{playRequested:!1})).deferLoadedEvent?(p=go(io({},p),{loading:!1,deferLoadedEvent:!1}),l("loaded"),o.paused&&(p=go(io({},p),{paused:!0}),l("pause"))):(p=go(io({},p),{paused:!0}),l("pause")))}],["ratechange",function(){b();var U=o.playbackRate>0;p.deferLoadedEvent&&U&&F(),p.deferSeekedEvent&&U&&E(),p.deferPlayingEvent&&U&&P(),!w()&&(m()?S=window.setTimeout(function(){m()&&y()},50):p.buffering&&U&&(p=go(io({},p),{buffering:!1}),l("buffered")))}]];return T.forEach(function(U){var M=G3(U,2),_=M[0],I=M[1];return o.addEventListener(_,I)}),{teardown:function(){b(),T.forEach(function(U){var M=G3(U,2),_=M[0],I=M[1];return o.removeEventListener(_,I)})}}},Pu=bE.GP;bE.vn;var XY=bE.fZ;const QY={NEAR_END:"nearend"};class wB extends df{constructor(o){var l;super(),this.options=o,this.hasEmittedNearEnd=!1,this.video=this.options.element,this.video.muted=!!this.options.muted,this.nearEndThreshold=(l=this.options.nearEndThreshold)!=null?l:10,this.setupMediaEventFilter()}createBaseEventPayload(o){return{currentTime:o.currentTime,timeStamp:Date.now()}}setupMediaEventFilter(){this.eventFilter&&(this.eventFilter.teardown(),this.eventFilter=void 0),this.eventFilter=XY({mediaElement:this.options.element,allowResumeAfterEnded:!0,callback:o=>{const l=this.createBaseEventPayload(this.video);switch(o){case Pu.LOADED:{this.emit("loaded",l);break}case Pu.SEEKING:{this.emit("seeking",l);break}case Pu.SEEKED:{this.emit("seeked",l);break}case Pu.BUFFERING:{this.emit("buffering",l);break}case Pu.BUFFERED:{this.emit("buffered",l);break}case Pu.PLAY:{this.emit("play",l);break}case Pu.PLAYING:{this.emit("playing",l);break}case Pu.PAUSE:{this.emit("pause",l);break}case Pu.ENDED:{this.emit("ended",l);break}case Pu.TIME_UPDATE:{const d=this.video.duration-this.video.currentTime;this.hasEmittedNearEnd&&d>this.nearEndThreshold&&(this.hasEmittedNearEnd=!1),!this.hasEmittedNearEnd&&d<=this.nearEndThreshold&&(this.hasEmittedNearEnd=!0,this.emit(QY.NEAR_END,{...l,remainingTime:d})),this.emit("timeupdate",l);break}}}})}destroy(){var o;(o=this.eventFilter)==null||o.teardown()}getStats(){const o=this.options.element.getVideoPlaybackQuality();return{droppedVideoFrames:o.droppedVideoFrames,totalVideoFrames:o.totalVideoFrames}}}class JY extends Error{constructor(o,l){super(o),this.rawError=l}}class eW extends wB{constructor(o){var d,g;super(o),this.name="DashJSEngine",this.player=YY.MediaPlayer().create(),this.options.policyQuery&&this.options.policyQuery.startsWith("?")&&this.player.extend("RequestModifier",function(){return{modifyRequestURL:function(S){return S+o.policyQuery}}},!0);const l={"com.widevine.alpha":{serverURL:(d=this.options)==null?void 0:d.widevineLicenseUrl,httpRequestHeaders:o.customLicenceRequestHeaders,priority:0,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO"}};this.player.updateSettings({streaming:{cacheInitSegments:!0,abr:{initialBitrate:{video:4e7},minBitrate:{video:4e6}},protection:{keepProtectionMediaKeys:this.options.keepProtectionData!==!1},buffer:{stableBufferTime:12,bufferToKeep:6}}}),this.player.initialize(this.options.element,void 0,(g=this.options.autoPlay)!=null?g:!1,void 0),this.options.widevineLicenseUrl&&this.player.setProtectionData(l)}destroy(){this.player.destroy(),super.destroy()}async load(o,l){this.setupMediaEventFilter(),await new Promise((d,g)=>{var S;this.once("loaded",()=>{d()});try{this.player.attachSource(o,(S=l==null?void 0:l.startTimeSeconds)!=null?S:0)}catch(b){g(new JY("UnknownError",b))}})}}var AB={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(i){(function(){var o=typeof window<"u"?window:cu,l={};(function(g,S,b){var p;function w(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var F=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function C(e){e=[typeof globalThis=="object"&&globalThis,e,typeof g=="object"&&g,typeof self=="object"&&self,typeof S=="object"&&S];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var E=C(this);function y(e,t){if(t)e:{var n=E;e=e.split(".");for(var r=0;r<e.length-1;r++){var u=e[r];if(!(u in n))break e;n=n[u]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&F(n,e,{configurable:!0,writable:!0,value:t})}}y("Symbol",function(e){function t(c){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(c||"")+"_"+u++,c)}function n(c,f){this.g=c,F(this,"description",{configurable:!0,writable:!0,value:f})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return t}),y("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=E[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&F(r.prototype,e,{configurable:!0,writable:!0,value:function(){return P(w(this))}})}return e});function P(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:w(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function T(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var U=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},M;if(typeof Object.setPrototypeOf=="function")M=Object.setPrototypeOf;else{var _;e:{var I={a:!0},x={};try{x.__proto__=I,_=x.a;break e}catch(e){}_=!1}M=_?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Z=M;function Y(e,t){if(e.prototype=U(t.prototype),e.prototype.constructor=e,Z)Z(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.ik=t.prototype}function $(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function Q(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}$.prototype.s=function(e){this.h=e};function se(e,t){e.i={qg:t,Cg:!0},e.g=e.m||e.j}$.prototype.return=function(e){this.i={return:e},this.g=this.j};function R(e,t,n){return e.g=n,{value:t}}$.prototype.u=function(e){this.g=e};function X(e){e.g=0}function ce(e,t,n){e.m=t,n!=null&&(e.j=n)}function oe(e,t){e.m=0,e.j=t||0}function me(e,t,n){e.g=t,e.m=n||0}function Ce(e,t){return e.m=t||0,t=e.i.qg,e.i=null,t}function Je(e){e.A=[e.i],e.m=0,e.j=0}function we(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.Cg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function qe(e){this.g=new $,this.h=e}function st(e,t){Q(e.g);var n=e.g.l;return n?ft(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),be(e))}function ft(e,t,n,r){try{var u=t.call(e.g.l,n);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.o=!1,u;var c=u.value}catch(f){return e.g.l=null,se(e.g,f),be(e)}return e.g.l=null,r.call(e.g,c),be(e)}function be(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,se(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Cg)throw t.qg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function He(e){this.next=function(t){return Q(e.g),e.g.l?t=ft(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=be(e)),t},this.throw=function(t){return Q(e.g),e.g.l?t=ft(e,e.g.l.throw,t,e.g.s):(se(e.g,t),t=be(e)),t},this.return=function(t){return st(e,t)},this[Symbol.iterator]=function(){return this}}function vt(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,u){function c(f){f.done?r(f.value):Promise.resolve(f.value).then(t,n).then(c,u)}c(e.next())})}function Re(e){return vt(new He(new qe(e)))}function Ye(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}y("Promise",function(e){function t(f){this.h=0,this.i=void 0,this.g=[],this.o=!1;var h=this.j();try{f(h.resolve,h.reject)}catch(v){h.reject(v)}}function n(){this.g=null}function r(f){return f instanceof t?f:new t(function(h){h(f)})}if(e)return e;n.prototype.h=function(f){if(this.g==null){this.g=[];var h=this;this.i(function(){h.l()})}this.g.push(f)};var u=E.setTimeout;n.prototype.i=function(f){u(f,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var h=0;h<f.length;++h){var v=f[h];f[h]=null;try{v()}catch(A){this.j(A)}}}this.g=null},n.prototype.j=function(f){this.i(function(){throw f})},t.prototype.j=function(){function f(A){return function(N){v||(v=!0,A.call(h,N))}}var h=this,v=!1;return{resolve:f(this.F),reject:f(this.l)}},t.prototype.F=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof t)this.H(f);else{e:switch(typeof f){case"object":var h=f!=null;break e;case"function":h=!0;break e;default:h=!1}h?this.C(f):this.m(f)}},t.prototype.C=function(f){var h=void 0;try{h=f.then}catch(v){this.l(v);return}typeof h=="function"?this.I(h,f):this.m(f)},t.prototype.l=function(f){this.s(2,f)},t.prototype.m=function(f){this.s(1,f)},t.prototype.s=function(f,h){if(this.h!=0)throw Error("Cannot settle("+f+", "+h+"): Promise already settled in state"+this.h);this.h=f,this.i=h,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var f=this;u(function(){if(f.B()){var h=E.console;typeof h<"u"&&h.error(f.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var f=E.CustomEvent,h=E.Event,v=E.dispatchEvent;return typeof v>"u"?!0:(typeof f=="function"?f=new f("unhandledrejection",{cancelable:!0}):typeof h=="function"?f=new h("unhandledrejection",{cancelable:!0}):(f=E.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f)),f.promise=this,f.reason=this.i,v(f))},t.prototype.A=function(){if(this.g!=null){for(var f=0;f<this.g.length;++f)c.h(this.g[f]);this.g=null}};var c=new n;return t.prototype.H=function(f){var h=this.j();f.Bd(h.resolve,h.reject)},t.prototype.I=function(f,h){var v=this.j();try{f.call(h,v.resolve,v.reject)}catch(A){v.reject(A)}},t.prototype.then=function(f,h){function v(z,J){return typeof z=="function"?function(fe){try{A(z(fe))}catch(pe){N(pe)}}:J}var A,N,B=new t(function(z,J){A=z,N=J});return this.Bd(v(f,A),v(h,N)),B},t.prototype.catch=function(f){return this.then(void 0,f)},t.prototype.Bd=function(f,h){function v(){switch(A.h){case 1:f(A.i);break;case 2:h(A.i);break;default:throw Error("Unexpected state: "+A.h)}}var A=this;this.g==null?c.h(v):this.g.push(v),this.o=!0},t.resolve=r,t.reject=function(f){return new t(function(h,v){v(f)})},t.race=function(f){return new t(function(h,v){for(var A=m(f),N=A.next();!N.done;N=A.next())r(N.value).Bd(h,v)})},t.all=function(f){var h=m(f),v=h.next();return v.done?r([]):new t(function(A,N){function B(fe){return function(pe){z[fe]=pe,J--,J==0&&A(z)}}var z=[],J=0;do z.push(void 0),J++,r(v.value).Bd(B(z.length-1),N),v=h.next();while(!v.done)})},t});function ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}y("WeakMap",function(e){function t(v){if(this.g=(h+=Math.random()+1).toString(),v){v=m(v);for(var A;!(A=v.next()).done;)A=A.value,this.set(A[0],A[1])}}function n(){}function r(v){var A=typeof v;return A==="object"&&v!==null||A==="function"}function u(v){if(!ot(v,f)){var A=new n;F(v,f,{value:A})}}function c(v){var A=Object[v];A&&(Object[v]=function(N){return N instanceof n?N:(Object.isExtensible(N)&&u(N),A(N))})}if(function(){if(!e||!Object.seal)return!1;try{var v=Object.seal({}),A=Object.seal({}),N=new e([[v,2],[A,3]]);return N.get(v)!=2||N.get(A)!=3?!1:(N.delete(v),N.set(A,4),!N.has(v)&&N.get(A)==4)}catch(B){return!1}}())return e;var f="$jscomp_hidden_"+Math.random();c("freeze"),c("preventExtensions"),c("seal");var h=0;return t.prototype.set=function(v,A){if(!r(v))throw Error("Invalid WeakMap key");if(u(v),!ot(v,f))throw Error("WeakMap key fail: "+v);return v[f][this.g]=A,this},t.prototype.get=function(v){return r(v)&&ot(v,f)?v[f][this.g]:void 0},t.prototype.has=function(v){return r(v)&&ot(v,f)&&ot(v[f],this.g)},t.prototype.delete=function(v){return r(v)&&ot(v,f)&&ot(v[f],this.g)?delete v[f][this.g]:!1},t}),y("Map",function(e){function t(){var h={};return h.Nb=h.next=h.head=h}function n(h,v){var A=h[1];return P(function(){if(A){for(;A.head!=h[1];)A=A.Nb;for(;A.next!=A.head;)return A=A.next,{done:!1,value:v(A)};A=null}return{done:!0,value:void 0}})}function r(h,v){var A=v&&typeof v;A=="object"||A=="function"?c.has(v)?A=c.get(v):(A=""+ ++f,c.set(v,A)):A="p_"+v;var N=h[0][A];if(N&&ot(h[0],A))for(h=0;h<N.length;h++){var B=N[h];if(v!==v&&B.key!==B.key||v===B.key)return{id:A,list:N,index:h,entry:B}}return{id:A,list:N,index:-1,entry:void 0}}function u(h){if(this[0]={},this[1]=t(),this.size=0,h){h=m(h);for(var v;!(v=h.next()).done;)v=v.value,this.set(v[0],v[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var h=Object.seal({x:4}),v=new e(m([[h,"s"]]));if(v.get(h)!="s"||v.size!=1||v.get({x:4})||v.set({x:4},"t")!=v||v.size!=2)return!1;var A=v.entries(),N=A.next();return N.done||N.value[0]!=h||N.value[1]!="s"?!1:(N=A.next(),!(N.done||N.value[0].x!=4||N.value[1]!="t"||!A.next().done))}catch(B){return!1}}())return e;var c=new WeakMap;u.prototype.set=function(h,v){h=h===0?0:h;var A=r(this,h);return A.list||(A.list=this[0][A.id]=[]),A.entry?A.entry.value=v:(A.entry={next:this[1],Nb:this[1].Nb,head:this[1],key:h,value:v},A.list.push(A.entry),this[1].Nb.next=A.entry,this[1].Nb=A.entry,this.size++),this},u.prototype.delete=function(h){return h=r(this,h),h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this[0][h.id],h.entry.Nb.next=h.entry.next,h.entry.next.Nb=h.entry.Nb,h.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this[0]={},this[1]=this[1].Nb=t(),this.size=0},u.prototype.has=function(h){return!!r(this,h).entry},u.prototype.get=function(h){return(h=r(this,h).entry)&&h.value},u.prototype.entries=function(){return n(this,function(h){return[h.key,h.value]})},u.prototype.keys=function(){return n(this,function(h){return h.key})},u.prototype.values=function(){return n(this,function(h){return h.value})},u.prototype.forEach=function(h,v){for(var A=this.entries(),N;!(N=A.next()).done;)N=N.value,h.call(v,N[1],N[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var f=0;return u}),y("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(m([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var u=r.entries(),c=u.next();return c.done||c.value[0]!=n||c.value[1]!=n?!1:(c=u.next(),c.done||c.value[0]==n||c.value[0].x!=4||c.value[1]!=c.value[0]?!1:u.next().done)}catch(f){return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var u=this;this.g.forEach(function(c){return n.call(r,c,c,u)})},t)});function Ht(e,t){e instanceof String&&(e+="");var n=0,r=!1,u={next:function(){if(!r&&n<e.length){var c=n++;return{value:t(c,e[c]),done:!1}}return r=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}y("Array.prototype.keys",function(e){return e||function(){return Ht(this,function(t){return t})}});function Bt(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,u=0;u<r;u++){var c=e[u];if(t.call(n,c,u,e))return{Ag:u,v:c}}return{Ag:-1,v:void 0}}y("Array.prototype.findIndex",function(e){return e||function(t,n){return Bt(this,t,n).Ag}}),y("Array.from",function(e){return e||function(t,n,r){n=n!=null?n:function(h){return h};var u=[],c=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof c=="function"){t=c.call(t);for(var f=0;!(c=t.next()).done;)u.push(n.call(r,c.value,f++))}else for(c=t.length,f=0;f<c;f++)u.push(n.call(r,t[f],f));return u}}),y("Array.prototype.values",function(e){return e||function(){return Ht(this,function(t,n){return n})}}),y("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),y("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var u=r.length;for(n=n||0,0>n&&(n=Math.max(n+u,0));n<u;n++){var c=r[n];if(c===t||Object.is(c,t))return!0}return!1}});function Et(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}y("String.prototype.includes",function(e){return e||function(t,n){return Et(this,t,"includes").indexOf(t,n||0)!==-1}}),y("String.fromCodePoint",function(e){return e||function(t){for(var n="",r=0;r<arguments.length;r++){var u=Number(arguments[r]);if(0>u||1114111<u||u!==Math.floor(u))throw new RangeError("invalid_code_point "+u);65535>=u?n+=String.fromCharCode(u):(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),n+=String.fromCharCode(u&1023|56320))}return n}}),y("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),u=new e([n]);return!u.has(n)||u.has(r)?!1:(u.delete(n),u.add(r),!u.has(n)&&u.has(r))}catch(c){return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),y("Array.prototype.find",function(e){return e||function(t,n){return Bt(this,t,n).v}}),y("String.prototype.startsWith",function(e){return e||function(t,n){var r=Et(this,t,"startsWith"),u=r.length,c=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var f=0;f<c&&n<u;)if(r[n++]!=t[f++])return!1;return f>=c}}),y("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)ot(t,r)&&n.push([r,t[r]]);return n}});var Dt=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var u in r)ot(r,u)&&(e[u]=r[u])}return e};y("Object.assign",function(e){return e||Dt}),y("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),y("Array.prototype.entries",function(e){return e||function(){return Ht(this,function(t,n){return[t,n]})}}),y("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),y("String.prototype.repeat",function(e){return e||function(t){var n=Et(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),y("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),y("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)ot(t,r)&&n.push(t[r]);return n}}),y("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),y("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),y("String.prototype.endsWith",function(e){return e||function(t,n){var r=Et(this,t,"endsWith");n===void 0&&(n=r.length),n=Math.max(0,Math.min(n|0,r.length));for(var u=t.length;0<u&&0<n;)if(r[--n]!=t[--u])return!1;return 0>=u}}),y("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}});var Ne=this||self;function ne(e,t){e=e.split(".");var n=Ne;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function Be(){}function L(){}function D(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}D.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function G(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new D(2),this.j=new D(5),this.g=0,this.i=128e3,this.l=16e3}K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(G(this.h),G(this.j))};function ge(){}function de(){}function Ke(){}function wt(e){var t=Ye.apply(1,arguments);ht.has(e)||(ht.add(e),Ke.apply(ge,T(t)))}function lt(){}function ut(){}function nt(){}var ht=new Set;g.console&&(Ke=function(){return console.warn.apply(console,T(Ye.apply(0,arguments)))},de=function(){console.error.apply(console,T(Ye.apply(0,arguments)))});function _t(){this.g={}}p=_t.prototype,p.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},p.get=function(e){return(e=this.g[e])?e.slice():null},p.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},p.forEach=function(e){for(var t in this.g)e(t,this.g[t])},p.size=function(){return Object.keys(this.g).length},p.keys=function(){return Object.keys(this.g)};function Tt(){this.g=new _t}p=Tt.prototype,p.release=function(){this.Qa(),this.g=null},p.D=function(e,t,n,r){this.g&&(e=new Mt(e,t,n,r),this.g.push(t,e))},p.pa=function(e,t,n,r){function u(f){c.$a(e,t,u),n(f)}var c=this;this.D(e,t,u,r)},p.$a=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,u.target!=e||n!=u.listener&&n||(u.$a(),this.g.remove(t,u))}},p.Qa=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,T(e.g[n]));for(e=m(t),t=e.next();!t.done;t=e.next())t.value.$a();this.g.g={}}},ne("shaka.util.EventManager",Tt),Tt.prototype.removeAll=Tt.prototype.Qa,Tt.prototype.unlisten=Tt.prototype.$a,Tt.prototype.listenOnce=Tt.prototype.pa,Tt.prototype.listen=Tt.prototype.D,Tt.prototype.release=Tt.prototype.release;function Mt(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=_n(e,r),this.target.addEventListener(t,n,this.g)}Mt.prototype.$a=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function _n(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),rn(e)?t:t.capture||!1}function rn(e){var t=cn;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(u){t=!1}cn=t}return t||!1}var cn=void 0;function Ft(e){if(Sr.has(e))return Sr.get(e);if(g.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return Sr.set(e,t),t}return g.MediaSource?(t=MediaSource.isTypeSupported(e),Sr.set(e,t),t):!1}function Gn(){return!!g.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var Sr=new Map;function Gr(e,t){this.g=e,this.h=t}Gr.prototype.toString=function(){return"v"+this.g+"."+this.h};function gr(e,t){var n=new Gr(5,0),r=Hr,u=r.g,c=n.h-u.h;(0<(n.g-u.g||c)?r.i:r.h)(r.g,n,e,t)}function fi(e,t,n,r){Ke([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function ao(e,t,n,r){de([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var Hr=null;function so(){}so.prototype.extract=function(){},so.prototype.decode=function(){return[]},so.prototype.clear=function(){},so.prototype.getStreams=function(){return[]};function xi(){}xi.prototype.init=function(){},xi.prototype.parse=function(){return[]};function Fi(){}function no(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(uo(e)==uo(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=nr(e);t=nr(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function uo(e){return e instanceof ArrayBuffer?e:e.buffer}function Ni(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function nr(e,t,n){return n=n===void 0?1/0:n,gn(e,t===void 0?0:t,n,Uint8Array)}function ju(e,t,n){return n=n===void 0?1/0:n,gn(e,t===void 0?0:t,n,Uint16Array)}function ln(e,t,n){return n=n===void 0?1/0:n,gn(e,t===void 0?0:t,n,DataView)}function gn(e,t,n,r){var u=uo(e),c=1;"BYTES_PER_ELEMENT"in r&&(c=r.BYTES_PER_ELEMENT);var f=((e.byteOffset||0)+e.byteLength)/c;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/c,f))),new r(u,e,Math.floor(Math.min(e+Math.max(n,0),f))-e)}ne("shaka.util.BufferUtils",Fi),Fi.toDataView=ln,Fi.toUint16=ju,Fi.toUint8=nr,Fi.toArrayBuffer=Ni,Fi.equal=no;function pn(){}pn.prototype.init=function(){},pn.prototype.i=function(){},pn.prototype.g=function(){},pn.prototype.j=function(){},ne("shaka.media.IClosedCaptionParser",pn);function At(e){this.l=new xi,(e=Xt[e.toLowerCase()])&&(this.l=e()),this.h=new so,(e=Ot)&&(this.h=e())}At.prototype.init=function(e,t){t!==void 0&&t||this.g(),this.l.init(e)},At.prototype.i=function(e){e=this.l.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=nr(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},At.prototype.g=function(){this.h.clear()},At.prototype.j=function(){return this.h.getStreams()},ne("shaka.media.ClosedCaptionParser",At),At.findDecoder=function(){return Ot},At.unregisterDecoder=function(){Ot=null},At.registerDecoder=function(e){Ot=e},At.findParser=function(e){return Xt[e]},At.unregisterParser=function(e){delete Xt[e]},At.registerParser=function(e,t){Xt[e]=t};var Xt={},Ot=null;function Yt(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=wn,this.scroll=Mn}ne("shaka.text.CueRegion",Yt);var wn=1;Yt.units={PX:0,PERCENTAGE:wn,LINES:2};var Mn="";Yt.scrollMode={NONE:Mn,UP:"up"};function zn(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Kn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function Ln(e,t,n){if(n||(n=zn),e.length!=t.length)return!1;t=t.slice(),e=m(e);for(var r=e.next(),u={};!r.done;u={Dg:void 0},r=e.next()){if(u.Dg=r.value,r=t.findIndex(function(c){return function(f){return n(c.Dg,f)}}(u)),r==-1)return!1;t[r]=t[t.length-1],t.pop()}return t.length==0}function fn(e,t,n){if(n||(n=zn),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Xe(e,t,n){var r=Ye.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}Xe.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},ne("shaka.util.Error",Xe),Xe.Severity={RECOVERABLE:1,CRITICAL:2},Xe.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Xe.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:4001};function Un(e){this.h=e,this.g=void 0}Un.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function fr(e,t){return e.length&&t.length&&e!==t?0<Ir(e,t).length:!0}function Ir(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.keySystem==c.keySystem){u=new Map;for(var f=m((r.initData||[]).concat(c.initData||[])),h=f.next();!h.done;h=f.next())h=h.value,u.set(h.keyId,h);u=Array.from(u.values()),f=r.keyIds&&c.keyIds?new Set([].concat(T(r.keyIds),T(c.keyIds))):r.keyIds||c.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||c.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||c.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||c.persistentStateRequired,videoRobustness:r.videoRobustness||c.videoRobustness,audioRobustness:r.audioRobustness||c.audioRobustness,serverCertificate:r.serverCertificate||c.serverCertificate,serverCertificateUri:r.serverCertificateUri||c.serverCertificateUri,initData:u,keyIds:f});break}}return n}function Vr(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}var er=new Un(function(){return Ni(new Uint8Array([0]))}),dn=new Map;function vn(e){this.h=e,this.g=null}vn.prototype.Z=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){g.clearTimeout(r),n=!1},r=g.setTimeout(function(){n&&t.h()},1e3*e),this},vn.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function on(e){this.h=e,this.g=null}on.prototype.wc=function(){return this.stop(),this.h(),this},on.prototype.Z=function(e){var t=this;return this.stop(),this.g=new vn(function(){t.h()}).Z(e),this},on.prototype.Ra=function(e){var t=this;return this.stop(),this.g=new vn(function(){t.g.Z(e),t.h()}).Z(e),this},on.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},ne("shaka.util.Timer",on),on.prototype.stop=on.prototype.stop,on.prototype.tickEvery=on.prototype.Ra,on.prototype.tickAfter=on.prototype.Z,on.prototype.tickNow=on.prototype.wc;function tr(){var e=g.ManagedMediaSource||g.MediaSource;return!!(e&&e.isTypeSupported)}function ur(e){return ir().canPlayType(e)!=""}function xr(){return!!navigator.userAgent.match(/Edge?\//)}function Rr(){return sn("Xbox One")}function di(){return sn("Tizen")}function Ui(){return sn("Tizen 3")}function ni(){return sn("Tizen 2")}function li(){return sn("Web0S")}function vi(){return li()&&vs()===38}function ri(){return sn("CrKey")}function vs(){if(!sn("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function Ao(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!di()&&!sn("PC=EOS")&&!sn("PC=APL")&&!sn("VirginMedia")&&!vu()&&!Ri()&&!sn("AFT")&&!sn("WPE")&&!sn("DT_STB_BCM")}function Yo(){return sn("PlayStation 5")}function Ri(){return sn("PlayStation 4")}function Zu(){return sn("Hisense")||sn("VIDAA")}function vu(){return sn("SOPOpenBrowser")}function Zs(){if(!Ao())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Rl(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("windows"):!1}function qu(){return sn("Android")}function Gu(){return!!(di()||li()||Rr()||Ri()||Yo()||sn("AFT")||sn("PC=EOS")||sn("PC=APL")||sn("VirginMedia")||vu()||sn("WPE")||ri()||Zu()||sn("DT_STB_BCM"))}function sn(e){return(navigator.userAgent||"").includes(e)}function ir(){return Ii||(Wr||(Wr=new on(function(){Ii=null})),(Ii=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Ii=document.createElement("video")),Wr.Z(1),Ii)}function Tr(e){return e?e===g.shakaMediaKeysPolyfill:!!g.shakaMediaKeysPolyfill}function Ai(){var e,t,n,r,u,c,f,h,v,A,N,B,z,J,fe;return Re(function(pe){switch(pe.g){case 1:if(e={width:1/0,height:1/0},ri()){if(B=g.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,ce(pe,15),!(z=B)){pe.u(17);break}return R(pe,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),18)}if(di()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch(Ee){Ke("Tizen: Error detecting screen size, default screen size 1920x1080.")}pe.u(3);break}if(Rr()){e.width=1920,e.height=1080;try{n=void 0,n=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows,r=new n.Media.Protection.ProtectionCapabilities,u=n.Media.Protection.ProtectionCapabilityResult,c=null;do c=r.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(c===u.maybe);c===u.probably&&(e.width=3840,e.height=2160)}catch(Ee){Ke("Xbox: Error detecting screen size, default screen size 1920x1080.")}pe.u(3);break}if(li()){try{f=JSON.parse(g.PalmSystem.deviceInfo),e.width=Math.max(1920,f.screenWidth),e.height=Math.max(1080,f.screenHeight)}catch(Ee){Ke("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}pe.u(3);break}if(Zu()){g.Hisense_Get4KSupportState&&g.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),pe.u(3);break}if(!Ri()&&!Yo()){pe.u(3);break}return h=!1,ce(pe,9),R(pe,g.msdk.device.getDisplayInfo(),11);case 11:v=pe.h,h=v.resolution==="4K",me(pe,10);break;case 9:return Ce(pe),ce(pe,12),R(pe,g.msdk.device.getDisplayInfoImmediate(),14);case 14:A=pe.h,h=A.resolution==="4K",me(pe,10);break;case 12:N=Ce(pe),Ke("PlayStation: Failed to get the display info:",N);case 10:h?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),pe.u(3);break;case 18:z=pe.h;case 17:if(z){e.width=3840,e.height=2160,pe.u(19);break}if(!(J=B)){pe.u(20);break}return R(pe,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),21);case 21:J=pe.h;case 20:J&&(e.width=1920,e.height=1080);case 19:me(pe,3);break;case 15:fe=Ce(pe),de("Failed to check canDisplayType:",fe);case 3:return pe.return(e)}})}var Wr=null,Ii=null;function Kr(){}function Cr(e){if(!e)return"";if(e=nr(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),g.TextDecoder&&!Ri())return e=new TextDecoder().decode(e),e.includes("")&&de('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):r=e[n],65535>=r)t+=String.fromCharCode(r);else{r-=65536;var u=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+u)}}return t}function ci(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new Xe(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=ln(e);for(var u=0;u<n;u++)r[u]=e.getUint16(2*u,t);return oa(r)}function Br(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=nr(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Cr(n);if(n[0]==254&&n[1]==255)return ci(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return ci(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return ci(e,!1);if(n[1]==0&&n[3]==0)return ci(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Cr(e);throw new Xe(2,2,2003)}function bi(e){if(g.TextEncoder&&!Ri()){var t=new TextEncoder;return Ni(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Ni(t)}function yo(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),u=0;u<e.length;++u)r.setUint16(2*u,e.charCodeAt(u),t);return n}function oa(e){return Ta.value()(e)}function yi(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return u[1]=="#"?(u=u[2]=="x"||u[2]=="X"?parseInt(u.substring(3),16):parseInt(u.substring(2),10),0<=u&&1114111>=u?String.fromCodePoint(u):""):t[u]||"'"}):e||""}ne("shaka.util.StringUtils",Kr),Kr.resetFromCharCode=function(){Ta.g=void 0},Kr.toUTF16=yo,Kr.toUTF8=bi,Kr.fromBytesAutoDetect=Br,Kr.fromUTF16=ci,Kr.fromUTF8=Cr;var Ta=new Un(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch(u){return!1}}for(var t={dc:65536};0<t.dc;t={dc:t.dc},t.dc/=2)if(e(t.dc))return function(n){return function(r){for(var u="",c=0;c<r.length;c+=n.dc)u+=String.fromCharCode.apply(null,r.subarray(c,c+n.dc));return u}}(t);return null});function aa(e){this.h=e||"",this.g=0}function ys(e){Sa(e,/[ \t]+/gm)}function Sa(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function wa(e){return e.g==e.h.length?null:(e=Sa(e,/[^ \t\n]*/gm))?e[0]:null}function yu(e){if(e=Sa(e,Ah),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function Eu(e){return e?yu(new aa(e)):null}var Ah=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Aa(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer instanceof ArrayBuffer)return r;if(n.has(r))return null;var u=r.constructor==Array;if(r.constructor!=Object&&!u)return null;n.add(r);var c=u?[]:{},f;for(f in r)c[f]=t(r[f]);return u&&(c.length=r.length),c}}var n=new WeakSet;return t(e)}function Es(e){var t={},n;for(n in e)t[n]=e[n];return t}function _u(e,t){var n=n===void 0?!1:n;return e=Br(e),Tu(e,t,n)}function Tu(e,t,n){return e=mf(e,n===void 0?!1:n),!t&&e.length?e[0]:(e=e.find(function(r){return t.split(",").includes(r.tagName)}))?e:null}function Hu(e){return Nh.has(e)?Nh.get(e):""}function mf(e,t){function n(c,f){f=f===void 0?!1:f;for(var h=[];e[u];)if(e.charCodeAt(u)==60){if(e.charCodeAt(u+1)===47){f=u+2,u=e.indexOf(">",u),f=e.substring(f,u);var v=f.indexOf(c);if(v==-1){var A=c.indexOf(".");0<A&&(v=f.indexOf(c.substring(0,A)))}if(v==-1)throw c=e.substring(0,u).split("\n"),Error("Unexpected close tag\nLine: "+(c.length-1)+"\nColumn: "+(c[c.length-1].length+1)+"\nChar: "+e[u]);u+1&&(u+=1);break}else if(e.charCodeAt(u+1)===33){if(e.charCodeAt(u+2)==45){for(;u!==-1&&(e.charCodeAt(u)!==62||e.charCodeAt(u-1)!=45||e.charCodeAt(u-2)!=45||u==-1);)u=e.indexOf(">",u+1);u===-1&&(u=e.length)}else if(e.charCodeAt(u+2)===91&&e.charCodeAt(u+8)===91&&e.substr(u+3,5).toLowerCase()==="cdata"){v=e.indexOf("]]>",u),v==-1?(h.push(e.substr(u+9)),u=e.length):(h.push(e.substring(u+9,v)),u=v+3);continue}u++;continue}e:{A=f,u++;var N=r(),B={};for(v=[];e.charCodeAt(u)!==62&&e[u];){var z=e.charCodeAt(u);if(64<z&&91>z||96<z&&123>z){z=r();for(var J=e.charCodeAt(u);J&&J!==39&&J!==34&&!(64<J&&91>J||96<J&&123>J)&&J!==62;)u++,J=e.charCodeAt(u);var fe=u+1;if(u=e.indexOf(e[u],fe),fe=e.slice(fe,u),J===39||J===34){if(u===-1){if(A={tagName:N,attributes:B,children:v,parent:null},t)for(N=0;N<v.length;N++)typeof v[N]!="string"&&(v[N].parent=A);v=A;break e}}else fe=null,u--;if(z.startsWith("xmlns:")){J=fe;var pe=z.split(":")[1];Nh.set(J,pe),_f.set(pe,J)}N==="tt"&&z==="xml:space"&&fe==="preserve"&&(A=!0),B[z]=fe}u++}for(e.charCodeAt(u-1)!==47?(u++,v=n(N,A)):u++,A={tagName:N,attributes:B,children:v,parent:null},N=v.length,B=0;B<N;B++)z=v[B],typeof z!="string"?t&&(z.parent=A):B==N-1&&z=="\n"&&v.pop();v=A}if(h.push(v),typeof v=="string")break;v.tagName[0]==="?"&&v.children&&(h.push.apply(h,T(v.children)),v.children=[])}else v=u,u=e.indexOf("<",u)-1,u===-2&&(u=e.length),v=e.slice(v,u+1),f?0<v.length&&h.push(v):(h.length&&v.length==1&&v[0]=="\n"||0<v.trim().length)&&h.push(v),u++;return h}function r(){for(var c=u;"\r\n	>/= ".indexOf(e[u])===-1&&e[u];)u++;return e.slice(c,u)}var u=0;return n("")}function qs(e){return typeof e=="string"}function vf(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function sr(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function ei(e){return typeof e=="string"?yi(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:yi(e))}function Io(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=ei(e))&&(e=e.trim()),e):null}function Eo(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var r=e.next();!r.done;r=e.next())Eo(r.value,t,n)}return n}function Hi(e,t){return e=sr(e,t),e.length!=1?null:e[0]}function Vi(e,t,n){return e=yc(e,t,n),e.length!=1?null:e[0]}function Er(e,t,n,r){r=r===void 0?null:r;var u=null;return e=e.attributes[t],e!=null&&(u=n(e)),u==null?r:u}function Po(e,t,n){return t=Hu(t),e.attributes[t+":"+n]||null}function yc(e,t,n){t=Hu(t);var r=[];if(e.children){e=m(e.children);for(var u=e.next();!u.done;u=e.next())(u=u.value)&&u.tagName===t+":"+n&&r.push(u)}return r}function Ka(e,t,n){t=m(t);for(var r=t.next();!r.done;r=t.next())if(r=Po(e,r.value,n))return r;return null}function _s(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Ia(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function yf(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Ec(e){return e=Number(e),e%1===0?e:null}function Gs(e){return e=Number(e),e%1===0&&0<e?e:null}function lo(e){return e=Number(e),e%1===0&&0<=e?e:null}function Ef(e){return e=Number(e),isNaN(e)?null:e}function Hs(e){return e?e.toLowerCase()==="true":!1}function Ih(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function _c(e){var t=[];e=yi(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=m(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=n.match(/^([\w]+)/);if(r){var u=n.match(/(@id='(.*?)')/),c=n.match(/(@t='(\d+)')/),f=n.match(/(@n='(\d+)')/),h=n.match(/\[(\d+)\]/);t.push({name:r[0],id:u?u[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:c?Number(c[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:f?Number(f[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:h?Number(h[1])-1:null,Tb:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Tb=n.slice(1))}return t}function bh(e,t){var n=_c(t.attributes.sel||"");if(n.length){var r=n[n.length-1],u=t.attributes.pos||null;n=r.position,n==null&&(r.t!==null&&(n=Ch(e,"t",r.t)),r.n!==null&&(n=Ch(e,"n",r.n))),n===null?n=u==="prepend"?0:e.length:u==="prepend"?--n:u==="after"&&++n,u=t.tagName,(r=r.Tb)&&e[n]?fm(e[n],u,r,Io(t)||""):(u!=="remove"&&u!=="replace"||e.splice(n,1),u!=="add"&&u!=="replace"||e.splice.apply(e,[n,0].concat(T(t.children))))}}function Ch(e,t,n){var r=0;e=m(e);for(var u=e.next();!u.done;u=e.next()){if(Number(u.value.attributes[t])===n)return r;r++}return null}function fm(e,t,n,r){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=r)}function Rh(e){var t="",n=e.tagName.split(":");0<n.length&&(t=n[0],t=_f.has(t)?_f.get(t):""),t=document.createElementNS(t,e.tagName);for(var r in e.attributes)t.setAttribute(r,e.attributes[r]);for(e=m(e.children),r=e.next();!r.done;r=e.next())r=r.value,n=void 0,typeof r=="string"?n=new Text(r):n=Rh(r),t.appendChild(n);return t}function xh(e){if(!e)return null;var t={tagName:e.tagName,attributes:Es(e.attributes),children:[],parent:null};e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n=="string"||(n=xh(n),n.parent=t),t.children.push(n);return t}var Nh=new Map,_f=new Map;function jr(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Yt,this.position=null,this.positionAlign=Af,this.size=0,this.textAlign=ba,this.direction=Ml,this.writingMode=Vu,this.lineInterpretation=Dl,this.line=null,this.lineHeight="",this.lineAlign=Ku,this.displayAlign=Nl,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=gm,this.fontStyle=Ph,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={ic:32,rows:15}}function Mh(e,t){return e=new jr(e,t,""),e.lineBreak=!0,e}jr.prototype.clone=function(){var e=new jr(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function Tf(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!fn(e.nestedCues,t.nestedCues,Tf))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!fn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}function Sf(e,t){t=t===void 0?new Map:t;var n=e.payload;if(n.includes("<")){t.size===0&&Tc(t);var r=n;n=[];for(var u=-1,c=0;c<r.length;c++)r[c]==="<"?u=c+1:r[c]===">"&&0<u&&(u=r.substr(u,c-u),u.match(Rf)&&n.push(u),u=-1);for(n=m(n),c=n.next();!c.done;c=n.next())c=c.value,r=r.replace("<"+c+">",'<div time="'+c+'">'),r+="</div>";e:{c=r,u=[];var f=-1;n="",r=!1;for(var h=0;h<c.length;h++)if(c[h]==="/"){var v=c.indexOf(">",h);if(v===-1){n=c;break e}if((v=c.substring(h+1,v))&&v=="v"){r=!0;var A=null;if(u.length&&(A=u[u.length-1]),A){if(A===v)n+="/"+v+">";else{if(!A.startsWith("v")){n+=c[h];continue}n+="/"+A+">"}h+=v.length+1}else n+=c[h]}else n+=c[h]}else c[h]==="<"?(f=h+1,c[f]!="v"&&(f=-1)):c[h]===">"&&0<f&&(u.push(c.substr(f,h-f)),f=-1),n+=c[h];for(c=m(u),u=c.next();!u.done;u=c.next())u=u.value,f=u.replace(" ",".voice-"),n=n.replace("<"+u+">","<"+f+">"),n=n.replace("</"+u+">","</"+f+">"),r||(n+="</"+f+">")}n=dm(n),e.payload="";try{var N=Tu("<span>"+n+"</span>","span")}catch(B){}if(N)if(N=N.children,N.length!=1||N[0].tagName)for(N=m(N),n=N.next();!n.done;n=N.next())wf(n.value,e,t);else e.payload=yi(n);else e.payload=yi(n)}else e.payload=yi(n)}function Tc(e){for(var t=m(Object.entries(pm)),n=t.next();!n.done;n=t.next()){var r=m(n.value);n=r.next().value,r=r.next().value;var u=new jr(0,0,"");u.color=r,e.set("."+n,u)}for(t=m(Object.entries(Dh)),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,u=new jr(0,0,""),u.backgroundColor=r,e.set("."+n,u)}function dm(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||""}):e||""}function wf(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Yt,r.position=null,r.size=0,e.tagName)for(var u=m(e.tagName.split(/(?=[ .])+/g)),c=u.next();!c.done;c=u.next()){var f=c=c.value;if(f.startsWith(".voice-")){var h=f.split("-").pop();f='v[voice="'+h+'"]',n.has(f)||(f="v[voice="+h+"]")}switch(n.has(f)&&(h=r,f=n.get(f))&&(h.backgroundColor=xl(f.backgroundColor,h.backgroundColor),h.color=xl(f.color,h.color),h.fontFamily=xl(f.fontFamily,h.fontFamily),h.fontSize=xl(f.fontSize,h.fontSize),h.textShadow=xl(f.textShadow,h.textShadow),h.fontWeight=f.fontWeight,h.fontStyle=f.fontStyle,h.opacity=f.opacity,h.rubyTag=f.rubyTag,h.textCombineUpright=f.textCombineUpright,h.wrapLine=f.wrapLine),c){case"br":r=Mh(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=zu;break;case"i":r.fontStyle=Su;break;case"u":r.textDecoration.push(Vs);break;case"font":(c=e.attributes.color)&&(r.color=c);break;case"div":if(c=e.attributes.time,!c)break;(c=Eu(c))&&(r.startTime=c);break;case"ruby":case"rp":case"rt":r.rubyTag=c}}if(u=e.children,qs(e)||u.length==1&&qs(u[0]))for(n=ei(e).split("\n"),e=!0,n=m(n),u=n.next();!u.done;u=n.next())u=u.value,e||(e=Mh(r.startTime,r.endTime),t.nestedCues.push(e)),0<u.length&&(e=r.clone(),e.payload=yi(u),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=m(u),e=t.next();!e.done;e=t.next())wf(e.value,r,n)}function xl(e,t){return e&&0<e.length?e:t}ne("shaka.text.Cue",jr),jr.parseCuePayload=Sf,jr.equal=Tf,jr.prototype.clone=jr.prototype.clone;var Af="auto";jr.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Af};var ba="center",If={LEFT:"left",RIGHT:"right",CENTER:ba,START:"start",END:"end"};jr.textAlign=If;var Nl="after",hm={BEFORE:"before",CENTER:"center",AFTER:Nl};jr.displayAlign=hm;var Ml="ltr";jr.direction={HORIZONTAL_LEFT_TO_RIGHT:Ml,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Vu="horizontal-tb";jr.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Vu,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Dl=0;jr.lineInterpretation={LINE_NUMBER:Dl,PERCENTAGE:1};var Ku="start",bf={CENTER:"center",START:Ku,END:"end"};jr.lineAlign=bf;var pm={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};jr.defaultTextColor=pm;var Dh={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};jr.defaultTextBackgroundColor=Dh;var gm=400,zu=700;jr.fontWeight={NORMAL:gm,BOLD:zu};var Ph="normal",Su="italic",Cf={NORMAL:Ph,ITALIC:Su,OBLIQUE:"oblique"};jr.fontStyle=Cf;var Vs="underline";jr.textDecoration={UNDERLINE:Vs,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var Rf=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Ks(){}Ks.prototype.destroy=function(){};function Ts(e,t,n){xf[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,fe:t}}function wu(e,t){for(var n=e.toLowerCase().split(";")[0],r=m([Pl,Oh,Nf,sa]),u=r.next();!u.done;u=r.next())if(u=xf[n+"-"+u.value]){var c=u.fe(),f=c.isSupported(e,t);if(c.destroy(),f)return u.fe}return null}ne("shaka.transmuxer.TransmuxerEngine",Ks),Ks.findTransmuxer=wu,Ks.unregisterTransmuxer=function(e,t){delete xf[e.toLowerCase().split(";")[0]+"-"+t]},Ks.registerTransmuxer=Ts,Ks.prototype.destroy=Ks.prototype.destroy;var xf={},sa=1,Nf=2,Oh=3,Pl=4;Ks.PluginPriority={FALLBACK:sa,PREFERRED_SECONDARY:Nf,PREFERRED:Oh,APPLICATION:Pl};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var mm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Ei(e){var t;e instanceof Ei?(Mf(this,e.Bb),this.xc=e.xc,Au(this,e.Db),Sc(this,e.Oc),this.Pa=e.Pa,$r(this,e.g.clone()),this.jc=e.jc):e&&(t=String(e).match(mm))?(Mf(this,t[1]||"",!0),this.xc=Yu(t[2]||""),Au(this,t[3]||"",!0),Sc(this,t[4]),this.Pa=Yu(t[5]||"",!0),$r(this,t[6]||"",!0),this.jc=Yu(t[7]||"")):this.g=new Wu(null)}p=Ei.prototype,p.Bb="",p.xc="",p.Db="",p.Oc=null,p.Pa="",p.jc="",p.toString=function(){var e=[],t=this.Bb;if(t&&e.push(wc(t,vm,!0),":"),t=this.Db){e.push("//");var n=this.xc;n&&e.push(wc(n,vm,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Oc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.Db&&t.charAt(0)!="/"&&e.push("/"),e.push(wc(t,t.charAt(0)=="/"?kh:Lh,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.jc)&&e.push("#",wc(t,Pf)),e.join("")},p.resolve=function(e){var t=this.clone();t.Bb==="data"&&(t=new Ei);var n=!!e.Bb;n?Mf(t,e.Bb):n=!!e.xc,n?t.xc=e.xc:n=!!e.Db,n?Au(t,e.Db):n=e.Oc!=null;var r=e.Pa;if(n)Sc(t,e.Oc);else if(n=!!e.Pa){if(r.charAt(0)!="/")if(this.Db&&!this.Pa)r="/"+r;else{var u=t.Pa.lastIndexOf("/");u!=-1&&(r=t.Pa.substr(0,u+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){u=r.lastIndexOf("/",0)==0,r=r.split("/");for(var c=[],f=0;f<r.length;){var h=r[f++];h=="."?u&&f==r.length&&c.push(""):h==".."?((1<c.length||c.length==1&&c[0]!="")&&c.pop(),u&&f==r.length&&c.push("")):(c.push(h),u=!0)}r=c.join("/")}}return n?t.Pa=r:n=e.g.toString()!=="",n?$r(t,e.g.clone()):n=!!e.jc,n&&(t.jc=e.jc),t},p.clone=function(){return new Ei(this)};function Mf(e,t,n){e.Bb=n?Yu(t,!0):t,e.Bb&&(e.Bb=e.Bb.replace(/:$/,""))}function Au(e,t,n){e.Db=n?Yu(t,!0):t}function Sc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Oc=t}else e.Oc=null}function $r(e,t,n){t instanceof Wu?e.g=t:(n||(t=wc(t,OE)),e.g=new Wu(t))}function Yu(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function wc(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Df),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Df(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var vm=/[#\/\?@]/g,Lh=/[#\?:]/g,kh=/[#\?]/g,OE=/[#\?@]/g,Pf=/#/g;function Wu(e){this.g=e||null}function Of(e){if(!e.Ka&&(e.Ka={},e.Yc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),u=null;if(0<=r){var c=t[n].substring(0,r);u=t[n].substring(r+1)}else c=t[n];c=decodeURIComponent(c.replace(/\+/g," ")),u=u||"",e.add(c,decodeURIComponent(u.replace(/\+/g," ")))}}p=Wu.prototype,p.Ka=null,p.Yc=null;function Lf(e){return Of(e),e.Yc}p.add=function(e,t){Of(this),this.g=null;var n=this.Ka.hasOwnProperty(e)?this.Ka[e]:null;return n||(this.Ka[e]=n=[]),n.push(t),this.Yc++,this},p.set=function(e,t){return Of(this),this.g=null,this.Ka.hasOwnProperty(e)?this.Ka[e]=[t]:this.add(e,t),this},p.get=function(e){return Of(this),this.Ka[e]||[]},p.toString=function(){if(this.g)return this.g;if(!this.Ka)return"";var e=[],t;for(t in this.Ka)for(var n=encodeURIComponent(t),r=this.Ka[t],u=0;u<r.length;u++){var c=n;r[u]!==""&&(c+="="+encodeURIComponent(r[u])),e.push(c)}return this.g=e.join("&")},p.clone=function(){var e=new Wu;if(e.g=this.g,this.Ka){var t={},n;for(n in this.Ka)t[n]=this.Ka[n].concat();e.Ka=t,e.Yc=this.Yc}return e};function co(){}function Fh(e){return e=oa(nr(e)),btoa(e)}function Ss(e,t){return t=t==null?!0:t,e=Fh(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Wo(e){e=g.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function $u(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=g.parseInt(e.substr(2*r,2),16);return n}function za(e){var t=nr(e);e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function hi(){for(var e=Ye.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var u=e[r];u instanceof Uint8Array?t.set(u,n):t.set(nr(u),n),n+=u.byteLength}return t}ne("shaka.util.Uint8ArrayUtils",co),co.concat=hi,co.toHex=za,co.fromHex=$u,co.fromBase64=Wo,co.toBase64=Ss,co.toStandardBase64=Fh;function Ki(e,t,n){if(n=n===void 0?"":n,t.length==0)return e;if(e.length==1&&t.length==1){var r=new Ei(e[0]);return t=new Ei(t[0]),t=r.resolve(t),n&&$r(t,n),[t.toString()]}t=t.map(function(h){return new Ei(h)}),r=[],e=m(e);for(var u=e.next();!u.done;u=e.next()){u=new Ei(u.value);for(var c=m(t),f=c.next();!f.done;f=c.next())f=u.resolve(f.value),n&&$r(f,n),r.push(f.toString())}return r}function ws(e,t,n,r){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},r&&(e.keySystemUris=new Set([r])),e}function ym(e,t){t=t===void 0?"cenc":t;var n=[],r=[],u=[];e.forEach(function(f,h){var v=h;v.length!=22&&(v=Ss($u(h),!1));var A=f;A.length!=22&&(A=Ss($u(f),!1)),f={kty:"oct",kid:v,k:A},n.push(f),r.push(f.kid),u.push(h)}),e=JSON.stringify({keys:n});var c=JSON.stringify({kids:r});return c=[{initData:nr(bi(c)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+g.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:c,keyIds:new Set(u)}}function Ol(e,t){if(t.length==1)return t[0];if(e=bo(e,t),e!=null)return e;throw new Xe(2,4,4025,t)}function bo(e,t){for(var n=m(Em[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.test(c.trim()))return c.trim()}return e==_r?"":null}function Xu(e,t){var n=[];e=m(Em[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())c=c.value,r.test(c.trim())&&n.push(c.trim())}return n}var _r="text",Mi={ja:"video",Y:"audio",wa:_r,De:"image",ej:"application"},kf=1/15,Em={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Uh(){}function Di(e,t){var n=e;return t&&!Iu.includes(e)&&(n+='; codecs="'+t+'"'),n}function Qu(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Ya(e,t,n){var r=Di(e,t);return t=Qu(e,t),wu(t)?(e=wu(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function Bh(e,t,n){var r=[t];return Uf.forEach(function(u,c){var f=e[c];c=="codecs"?Iu.includes(e.mimeType)||r.push('codecs="'+n+'"'):f&&r.push(u+'="'+f+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function Ll(e){return e.split(";")[0].split("/")[1]}function _o(e){var t=_m(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function zs(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=_m(n.value),t.push(n[0]);return t.sort().join(",")}function Ca(e){return e.split(";")[0]}function Oo(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Ff(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function _m(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}ne("shaka.util.MimeUtils",Uh),Uh.getFullTypeWithAllCodecs=Qu,Uh.getFullType=Di;var Uf=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Iu=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function As(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function Ac(e){return _i[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!Ot:!1}As.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function Tm(e,t,n,r,u){var c,f,h,v,A,N,B;return Re(function(z){if(z.g==1)return R(z,Promise.resolve(),2);if(!e.i||!e.j)return z.return();if(n==null||r==null)return e.i.parseInit(nr(t)),z.return();for(c=e.B?n:e.s,f={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:c},h=e.i.parseMedia(nr(t),f,u,[]),v=m(h),A=v.next();!A.done;A=v.next())N=A.value,e.A(N,u||null,f);B=h.filter(function(J){return J.startTime>=e.l&&J.startTime<e.m}),e.j.append(B),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),X(z)})}As.prototype.remove=function(e,t){var n=this;return Re(function(r){if(r.g==1)return R(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),X(r)})};function LE(e,t,n){e.l=t,e.m=n}function jh(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=m(t.keys()),u=r.next();!u.done;u=r.next())(u=t.get(u.value).filter(function(c){return c.endTime<=n}))&&e.j.append(u)}function Sm(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var r=t.next();!r.done;r=t.next())Sm(e,r.value,n)}function wm(e,t,n,r,u){var c=n+" "+r,f=new Map;t=m(t);for(var h=t.next();!h.done;h=t.next()){var v=h.value;h=v.stream,v=v.cue,f.has(h)||f.set(h,new Map),f.get(h).has(c)||f.get(h).set(c,[]),Sm(e,v,u),v.startTime>=e.l&&v.startTime<e.m&&(f.get(h).get(c).push(v),h==e.C&&e.j.append([v]))}for(u=m(f.keys()),c=u.next();!c.done;c=u.next())for(c=c.value,e.o.has(c)||e.o.set(c,new Map),t=m(f.get(c).keys()),h=t.next();!h.done;h=t.next())h=h.value,v=f.get(c).get(h),e.o.get(c).set(h,v);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}ne("shaka.text.TextEngine",As),As.prototype.destroy=As.prototype.destroy,As.findParser=function(e){return _i[e]},As.unregisterParser=function(e){delete _i[e]},As.registerParser=function(e,t){_i[e]=t};var _i={};function kE(e,t){return e.concat(t)}function Am(){}function Ys(e){return e!=null}function Ra(){}function Ju(e,t){return e=Or(e),t=Or(t),e.split("-")[0]==t.split("-")[0]}function Ic(e,t){return e=Or(e),t=Or(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function bc(e,t){return e=Or(e),t=Or(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Or(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Rc.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function el(e,t){return e=Or(e),t=Or(t),t==e?4:Ic(t,e)?3:bc(t,e)?2:Ic(e,t)?1:0}function Zh(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=Rc.get(e)||e}function Bf(e){return e.language?Or(e.language):e.audio&&e.audio.language?Or(e.audio.language):e.video&&e.video.language?Or(e.video.language):"und"}function Cc(e,t){e=Or(e);var n=new Set;t=m(t);for(var r=t.next();!r.done;r=t.next())n.add(Or(r.value));for(t=m(n),r=t.next();!r.done;r=t.next())if(r=r.value,r==e)return r;for(t=m(n),r=t.next();!r.done;r=t.next())if(r=r.value,Ic(r,e))return r;for(t=m(n),r=t.next();!r.done;r=t.next())if(r=r.value,bc(r,e))return r;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,Ic(e,t))return t;return null}ne("shaka.util.LanguageUtils",Ra),Ra.findClosestLocale=Cc,Ra.getLocaleForVariant=Bf,Ra.getLocaleForText=function(e){return Or(e.language||"und")},Ra.getBase=Zh,Ra.relatedness=el,Ra.areSiblings=function(e,t){var n=Zh(e),r=Zh(t);return e!=n&&t!=r&&n==r},Ra.normalize=Or,Ra.isSiblingOf=bc,Ra.isParentOf=Ic,Ra.areLanguageCompatible=Ju,Ra.areLocaleCompatible=function(e,t){return e=Or(e),t=Or(t),e==t};var Rc=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function qh(){}function Im(e,t,n,r){var u=e.variants;if((t.length||n.length)&&(u=bm(u,t,n)),r.length){for(t=new _t,u=m(u),n=u.next();!n.done;n=u.next())n=n.value,t.push(String(n.video.width||0),n);var c=[];t.forEach(function(pe,Ee){pe=0;var Le=[];Ee=m(Ee);for(var Fe=Ee.next(),it={};!Fe.done;it={xe:void 0},Fe=Ee.next())it.xe=Fe.value,Fe=r.filter(function(Ue){return function(Qe){return Ue.xe.decodingInfos[0][Qe]}}(it)).length,Fe>pe?(pe=Fe,Le=[it.xe]):Fe==pe&&Le.push(it.xe);c.push.apply(c,T(Le))}),u=c}n=new Set,t=new Set,u=m(u);for(var f=u.next();!f.done;f=u.next())f=f.value,f.audio&&n.add(f.audio),f.video&&t.add(f.video);n=Array.from(n).sort(function(pe,Ee){return pe.bandwidth-Ee.bandwidth});var h=[];for(u=new Map,n=m(n),f=n.next();!f.done;f=n.next()){f=f.value;var v=f.language+(f.channelsCount||0)+(f.audioSamplingRate||0)+f.roles.join(",")+f.label+f.groupId+f.fastSwitching,A=u.get(v)||[];if(A.length){var N=A[A.length-1],B=_o(N.codecs),z=_o(f.codecs);B!=z||f.bandwidth&&N.bandwidth&&!(f.bandwidth>N.bandwidth)||(A.push(f),h.push(f.id))}else A.push(f),h.push(f.id);u.set(v,A)}var J={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,av01:.75,"dovi-av1":.7,vvc:.65};n=Array.from(t).sort(function(pe,Ee){if(!pe.bandwidth||!Ee.bandwidth||pe.bandwidth==Ee.bandwidth){if(pe.codecs&&Ee.codecs&&pe.codecs!=Ee.codecs&&pe.width==Ee.width){var Le=_o(pe.codecs),Fe=_o(Ee.codecs);if(Le!=Fe)return(J[Le]||1)-(J[Fe]||1)}return pe.width-Ee.width}return pe.bandwidth-Ee.bandwidth}),t=Gn();var fe=[];for(u=new Map,n=m(n),f=n.next();!f.done;f=n.next()){if(f=f.value,v=Math.round(f.frameRate||0)+(f.hdr||"")+f.fastSwitching,A=u.get(v)||[],A.length){if(N=A[A.length-1],!t&&(B=_o(N.codecs),z=_o(f.codecs),B!==z))continue;f.width>N.width||f.height>N.height?(A.push(f),fe.push(f.id)):f.width==N.width&&f.height==N.height&&(B=_o(N.codecs),z=_o(f.codecs),B!=z||f.bandwidth&&N.bandwidth&&!(f.bandwidth>N.bandwidth)||(A.push(f),fe.push(f.id)))}else A.push(f),fe.push(f.id);u.set(v,A)}e.variants=e.variants.filter(function(pe){var Ee=pe.audio;return pe=pe.video,!(Ee&&!h.includes(Ee.id)||pe&&!fe.includes(pe.id))})}function bm(e,t,n){t=m(t);for(var r=t.next(),u={};!r.done;u={mh:void 0},r=t.next())if(u.mh=r.value,r=e.filter(function(c){return function(f){return f.video&&f.video.codecs.startsWith(c.mh)}}(u)),r.length){e=r;break}for(n=m(n),t=n.next(),r={};!t.done;r={fg:void 0},t=n.next())if(r.fg=t.value,t=e.filter(function(c){return function(f){return f.audio&&f.audio.codecs.startsWith(c.fg)}}(r)),t.length){e=t;break}return e}function FE(e,t,n){e.variants=e.variants.filter(function(r){return xc(r,t,n)})}function xc(e,t,n){function r(h,v,A){return h>=v&&h<=A}var u=e.video;if(u&&u.width&&u.height){var c=u.width,f=u.height;if(f>c&&(f=m([f,c]),c=f.next().value,f=f.next().value),!r(c,t.minWidth,Math.min(t.maxWidth,n.width))||!r(f,t.minHeight,Math.min(t.maxHeight,n.height))||!r(u.width*u.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function UE(e,t,n){return n=n===void 0?[]:n,Re(function(r){return r.g==1?R(r,jf(e,t,0<t.offlineSessionIds.length,n),2):(xm(t),R(r,Nm(t),0))})}function jf(e,t,n,r){var u,c;return Re(function(f){if(f.g==1)return Rr()&&Gh(t.variants),R(f,Rm(t.variants,n,!1,r),2);u=null,e&&(c=e.g)&&(u=c.keySystem),t.variants=t.variants.filter(function(h){var v=BE(h,u);if(!v){var A=[];h.audio&&A.push(Kf(h.audio)),h.video&&A.push(Kf(h.video))}return v}),X(f)})}function Gh(e){var t={dvav:"avc3",dva1:"avc1",dvhe:"hev1",dvh1:"hvc1",dvc1:"vvc1",dvi1:"vvi1"},n=new Set;e=m(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&n.add(r.video);for(n=m(n),e=n.next();!e.done;e=n.next()){e=e.value,r=m(Object.keys(t));for(var u=r.next();!u.done;u=r.next())if(u=u.value,e.codecs.includes(u)){e.codecs=e.codecs.replace(u,t[u]);break}}}function BE(e,t){var n=Rr(),r=sn("Firefox")&&qu(),u=e.video,c=u&&u.width||0,f=u&&u.height||0;if(n&&u&&(1920<c||1080<f)&&(u.codecs.includes("avc1.")||u.codecs.includes("avc3.")))return!1;if(u){if(n=Is(u.codecs),u.codecs.includes(",")){if(c=u.codecs.split(","),n=Ol("video",c),n=Is(n),c=Ol("audio",c),c=tl(c,u.mimeType),f=Ya(u.mimeType,c,"audio"),!Ft(f))return!1;n=[n,c].join()}if(c=Ya(u.mimeType,n,"video"),!Ft(c))return!1;u.codecs=n}if(u=e.audio,r&&u&&u.encrypted&&u.codecs.toLowerCase().includes("opus"))return!1;if(u){if(r=tl(u.codecs,u.mimeType),n=Ya(u.mimeType,r,"audio"),!Ft(n))return!1;u.codecs=r}return e.decodingInfos.some(function(h){return!(!h.supported||t&&(h=h.keySystemAccess)&&h.keySystem!=t)})}function Cm(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=JSON.stringify(u),u=e[u],u instanceof Object?(u=Cm(u),n.push(r+":"+u)):(u=JSON.stringify(u),n.push(r+":"+u))}return"{"+n.join(",")+"}"}function Hh(e,t){var n,r,u,c,f,h,v;return Re(function(A){if(A.g==1){for(n=function(N,B){if(N){var z=Es(N);return z.supported=N.supported&&B.supported,z.powerEfficient=N.powerEfficient&&B.powerEfficient,z.smooth=N.smooth&&B.smooth,B.keySystemAccess&&!z.keySystemAccess&&(z.keySystemAccess=B.keySystemAccess),z}return B},r=null,u=[],c=m(t),f=c.next(),h={};!f.done;h={cache:void 0,zd:void 0},f=c.next())v=f.value,h.zd=Cm(v),h.cache=Yh,h.cache[h.zd]?r=n(r,h.cache[h.zd]):u.push(jE(v).then(function(N){return function(B){var z=null;B=m(B||[]);for(var J=B.next();!J.done;J=B.next())z=n(z,J.value);z&&(N.cache[N.zd]=z,r=n(r,z))}}(h)));return R(A,Promise.all(u),2)}r&&e.decodingInfos.push(r),X(A)})}function jE(e){var t=[""];e.video&&(t=Oo(e.video.contentType).split(","));var n=[""];e.audio&&(n=Oo(e.audio.contentType).split(","));var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var c=m(n),f=c.next(),h={};!f.done;h={Ac:void 0},f=c.next())f=f.value,h.Ac=Aa(e),e.video&&(h.Ac.video.contentType=Di(Ca(h.Ac.video.contentType),u)),e.audio&&(h.Ac.audio.contentType=Di(Ca(h.Ac.audio.contentType),f)),r.push(new Promise(function(v){return function(A,N){navigator.mediaCapabilities.decodingInfo(v.Ac).then(function(B){A(B)}).catch(N)}}(h)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function Rm(e,t,n,r){var u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe;return Re(function(rt){switch(rt.g){case 1:if(e.some(function(dt){return dt.decodingInfos.length}))return rt.return();u=m(r),c=u.next(),f={};case 2:if(c.done){rt.u(4);break}f.Ng=c.value,h=!1,v=m(e),A=v.next();case 5:if(A.done){rt.u(7);break}N=A.value,B=Vh(N,t,n).filter(function(dt){return function(gt){return gt=gt[0],(gt.keySystemConfiguration&&gt.keySystemConfiguration.keySystem)===dt.Ng}}(f)),z=m(B),J=z.next();case 8:if(J.done){rt.u(10);break}return fe=J.value,R(rt,Hh(N,fe),9);case 9:J=z.next(),rt.u(8);break;case 10:N.decodingInfos.length&&(h=!0),A=v.next(),rt.u(5);break;case 7:if(h)return rt.return();f={Ng:void 0},c=u.next(),rt.u(2);break;case 4:pe=m(e),Ee=pe.next();case 12:if(Ee.done){rt.u(0);break}Le=Ee.value,Fe=Vh(Le,t,n).filter(function(dt){return dt=dt[0],dt=dt.keySystemConfiguration&&dt.keySystemConfiguration.keySystem,!dt||!r.includes(dt)}),it=m(Fe),Ue=it.next();case 15:if(Ue.done){Ee=pe.next(),rt.u(12);break}return Qe=Ue.value,R(rt,Hh(Le,Qe),16);case 16:Ue=it.next(),rt.u(15)}})}function Vh(e,t,n){var r=e.audio,u=e.video,c=[],f=[];if(u)for(var h=m(u.fullMimeTypes),v=h.next();!v.done;v=h.next()){v=v.value;var A=Oo(v);if(A.includes(",")&&!r){var N=A.split(","),B=Ca(v);A=Ol("video",N),N=Ol("audio",N),N=tl(N,B),B=Ya(B,N,"audio"),f.push({contentType:B,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(A=Is(A),v={contentType:Ya(Ca(v),A,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||1},u.hdr)switch(u.hdr){case"SDR":v.transferFunction="srgb";break;case"PQ":v.transferFunction="pq";break;case"HLG":v.transferFunction="hlg"}u.colorGamut&&(v.colorGamut=u.colorGamut),c.push(v)}if(r)for(h=m(r.fullMimeTypes),v=h.next();!v.done;v=h.next())A=v.value,v=Ca(A),A=tl(Oo(A),v),v=Ya(v,A,"audio"),f.push({contentType:v,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(h=[],c.length==0&&c.push(null),f.length==0&&f.push(null),c=m(c),v=c.next();!v.done;v=c.next())for(v=v.value,A=m(f),B=A.next();!B.done;B=A.next())B=B.value,N={type:n?"file":"media-source"},v&&(N.video=v),B&&(N.audio=B),h.push(N);if(f=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!f.length)return[h];for(e=[],n=new Map,f=m(f),c=f.next();!c.done;c=f.next())c=c.value,n.get(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c);for(f=t?"required":"optional",t=t?["persistent-license"]:["temporary"],c=m(n.keys()),v=c.next();!v.done;v=c.next()){for(v=v.value,A=[],B=m(h),N=B.next();!N.done;N=B.next()){N=Object.assign({},N.value);var z=n.get(v),J={keySystem:v,initDataType:"cenc",persistentState:f,distinctiveIdentifier:"optional",sessionTypes:t};z=m(z);for(var fe=z.next();!fe.done;fe=z.next()){if(fe=fe.value,fe.initData&&fe.initData.length){for(var pe=new Set,Ee=m(fe.initData),Le=Ee.next();!Le.done;Le=Ee.next())pe.add(Le.value.initDataType);J.initDataType=fe.initData[0].initDataType}fe.distinctiveIdentifierRequired&&(J.distinctiveIdentifier="required"),fe.persistentStateRequired&&(J.persistentState="required"),fe.sessionType&&(J.sessionTypes=[fe.sessionType]),r&&(J.audio?(fe.encryptionScheme&&(J.audio.encryptionScheme=J.audio.encryptionScheme||fe.encryptionScheme),J.audio.robustness=J.audio.robustness||fe.audioRobustness):(J.audio={robustness:fe.audioRobustness},fe.encryptionScheme&&(J.audio.encryptionScheme=fe.encryptionScheme)),J.audio.robustness==""&&delete J.audio.robustness),u&&(J.video?(fe.encryptionScheme&&(J.video.encryptionScheme=J.video.encryptionScheme||fe.encryptionScheme),J.video.robustness=J.video.robustness||fe.videoRobustness):(J.video={robustness:fe.videoRobustness},fe.encryptionScheme&&(J.video.encryptionScheme=fe.encryptionScheme)),J.video.robustness==""&&delete J.video.robustness)}N.keySystemConfiguration=J,A.push(N)}e.push(A)}return e}function tl(e,t){return e.toLowerCase()=="flac"?Zs()?"fLaC":"flac":e.toLowerCase()==="opus"?Zs()&&Ll(t)=="mp4"?"Opus":"opus":e}function Is(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function xm(e){e.textStreams=e.textStreams.filter(function(t){return t=Di(t.mimeType,t.codecs),Ac(t)})}function Nm(e){var t,n,r,u,c,f,h;return Re(function(v){switch(v.g){case 1:t=[],n=m(e.imageStreams),r=n.next();case 2:if(r.done){v.u(4);break}if(u=r.value,c=u.mimeType,c=="application/mp4"&&u.codecs=="mjpg"&&(c="image/jpg"),zf.has(c)){v.u(5);break}if(f=qE.get(c),!f){zf.set(c,!1),v.u(5);break}return R(v,Mm(f),7);case 7:h=v.h,zf.set(c,h);case 5:zf.get(c)&&t.push(u),r=n.next(),v.u(2);break;case 4:e.imageStreams=t,X(v)}})}function Mm(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function kl(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,u=n?n.mimeType:null,c=t?t.codecs:null,f=n?n.codecs:null,h=[];f&&h.push(f),c&&h.push(c);var v=[];n&&v.push(n.mimeType),t&&v.push(t.mimeType),v=v[0]||null;var A=[];t&&A.push(t.kind),n&&A.push(n.kind),A=A[0]||null;var N=new Set;if(t)for(var B=m(t.roles),z=B.next();!z.done;z=B.next())N.add(z.value);if(n)for(B=m(n.roles),z=B.next();!z.done;z=B.next())N.add(z.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:A,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:v,audioMimeType:r,videoMimeType:u,codecs:h.join(", "),audioCodec:c,videoCodec:f,primary:e.primary,roles:Array.from(N),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,f.includes(",")&&(e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage)),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Zf(e){return{id:e.id,active:!1,type:_r,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function qf(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=eu(e.segmentIndex));var u=e.tilesLayout;return r&&(u=r.tilesLayout||u),u&&t!=null&&(t/=Number(u.split("x")[0])),u&&n!=null&&(n/=Number(u.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:u||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Gf(e){return e.__shaka_id||(e.__shaka_id=ZE++),e.__shaka_id}function Dm(e){var t=Kh(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Hf(e){var t=Kh(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Kh(e){var t=e.language;return{id:Gf(e),active:!1,type:"",bandwidth:0,language:Or(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Fl(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Vf(e){return e.filter(function(t){return Fl(t)})}function Ul(e,t,n,r){var u=e,c=e.filter(function(v){return v.primary});c.length&&(u=c);var f=u.length?u[0].language:"";if(u=u.filter(function(v){return v.language==f}),t){var h=Cc(Or(t),e.map(function(v){return v.language}));h&&(u=e.filter(function(v){return Or(v.language)==h}))}if(u=u.filter(function(v){return v.forced==r}),n){if(e=Pm(u,n),e.length)return e}else if(e=u.filter(function(v){return v.roles.length==0}),e.length)return e;return e=u.map(function(v){return v.roles}).reduce(kE,[]),e.length?Pm(u,e[0]):u}function Pm(e,t){return e.filter(function(n){return n.roles.includes(t)})}function zh(e,t){t.length&&(t=t.filter(function(n){return _o(e.codecs)==_o(n.codecs)}).sort(function(n,r){return n.bandwidth&&r.bandwidth&&n.bandwidth!=r.bandwidth?n.bandwidth-r.bandwidth:(n.width||0)-(r.width||0)}),e.trickModeVideo=t[0],1<t.length&&(t=t.find(function(n){return e.width==n.width&&e.height==n.height})))&&(e.trickModeVideo=t)}function Kf(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}ne("shaka.util.StreamUtils",qh),qh.meetsRestrictions=xc;var Yh={},ZE=0,zf=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),qE=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function ii(){var e=this;this.A=null,this.j=!1,this.i=new K,this.F=new Tt,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.j&&e.g.useNetworkInformation){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.s=[],this.B=1,this.G=!1,this.h=this.o=this.g=this.l=null,this.C=new on(function(){if(e.j&&e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=null}p=ii.prototype,p.stop=function(){this.A=null,this.j=!1,this.s=[],this.B=1,this.o=this.l=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.m=null},p.release=function(){this.F.release(),this.C=null},p.init=function(e){this.A=e},p.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:g.devicePixelRatio;e=g.screen.height*n,t=g.screen.width*n}this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:g.devicePixelRatio,e=Math.min(e,this.o.clientHeight*n),t=Math.min(t,this.o.clientWidth*n)),n=this.s.filter(function(A){return A&&!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)}),n.length||(n=this.s);var r=n;if(n.length!=this.s.length&&(r=this.s.filter(function(A){return A&&!!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)})),n=Yf(this,this.g.restrictions,r,1/0,1/0),e!=1/0||t!=1/0){n=GE(n),n=m(n);for(var u=n.next();!u.done;u=n.next())if(u=u.value,u.height>=e&&u.width>=t){e=u.height,t=u.width;break}n=Yf(this,this.g.restrictions,r,e,t)}for(e=this.getBandwidthEstimate(),r.length&&!n.length&&(n=Yf(this,null,r,1/0,1/0),n=[n[0]]),t=n[0]||null,r=0;r<n.length;r++){u=n[r];for(var c=isNaN(this.B)?1:Math.abs(this.B),f=c*u.bandwidth/this.g.bandwidthDowngradeTarget,h={bandwidth:1/0},v=r+1;v<n.length;v++)if(u.bandwidth!=n[v].bandwidth){h=n[v];break}c=c*h.bandwidth/this.g.bandwidthUpgradeTarget,e>=f&&e<=c&&(t.bandwidth!=u.bandwidth||t.bandwidth==u.bandwidth&&t.video&&u.video&&(t.video.width<u.video.width||t.video.height<u.video.height))&&(t=u)}return this.l=Date.now(),t},p.enable=function(){this.j=!0},p.disable=function(){this.j=!1},p.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.i.sample(e,t),n&&this.l!=null&&this.j&&Om(this))},p.trySuggestStreams=function(){this.l!=null&&this.j&&Om(this)},p.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.i.getBandwidthEstimate(e),this.m?this.m.getBandwidthEstimate(e):e)},p.setVariants=function(e){this.s=e},p.playbackRateChanged=function(e){this.B=e},p.setMediaElement=function(e){var t=this;this.o=e,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in g&&(this.h=new ResizeObserver(function(){t.C.Z(Lm)}),this.h.observe(this.o))},p.setCmsdManager=function(e){this.m=e},p.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function Om(e){if(!e.G){var t=e.i;if(!(t.g>=t.i))return;e.G=!0,e.l-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.l<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function Yf(e,t,n,r,u){if(e.m){var c=e.m.wg();c&&(n=n.filter(function(f){return f.bandwidth&&c?f.bandwidth<=c:!0}))}return t&&(n=n.filter(function(f){return xc(f,t,{width:u,height:r})})),n.sort(function(f,h){return f.bandwidth-h.bandwidth})}function GE(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,u){return r.width-u.width})}ne("shaka.abr.SimpleAbrManager",ii),ii.prototype.configure=ii.prototype.configure,ii.prototype.setCmsdManager=ii.prototype.setCmsdManager,ii.prototype.setMediaElement=ii.prototype.setMediaElement,ii.prototype.playbackRateChanged=ii.prototype.playbackRateChanged,ii.prototype.setVariants=ii.prototype.setVariants,ii.prototype.getBandwidthEstimate=ii.prototype.getBandwidthEstimate,ii.prototype.trySuggestStreams=ii.prototype.trySuggestStreams,ii.prototype.segmentDownloaded=ii.prototype.segmentDownloaded,ii.prototype.disable=ii.prototype.disable,ii.prototype.enable=ii.prototype.enable,ii.prototype.chooseVariant=ii.prototype.chooseVariant,ii.prototype.init=ii.prototype.init,ii.prototype.release=ii.prototype.release,ii.prototype.stop=ii.prototype.stop;var Lm=1;ne("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),ne("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function Wf(e,t,n,r){for(n=n===void 0?!0:n,r=r===void 0?!1:r,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}Wf.prototype.add=function(e,t,n){return km(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function km(e,t,n,r){var u;if(!(u=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(u=e.audio&&t.audio)){u=e.audio;var c=t.audio;u=!!((!u.channelsCount||!c.channelsCount||2<u.channelsCount||2<c.channelsCount)&&u.channelsCount!=c.channelsCount||u.spatialAudio!==c.spatialAudio||n&&!Fm(u,c)||!Um(u.roles,c.roles)||r&&u.groupId!==c.groupId)}return!(r=u)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||Fm(e,t))&&Um(e.roles,t.roles))),!r}Wf.prototype.values=function(){return this.g.values()};function Fm(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return zs(r)}),t=t.codecs.split(",").map(function(r){return zs(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Um(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Bm(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Bl(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}Bm.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Gn(),r=e.filter(function(u){return km(t.i,u,!n,t.g)});return r.length?new Wf(r[0],r,!n,this.g):this.j.create(e)};function Bl(e,t,n,r,u,c,f,h,v,A,N){this.A=e,this.B=t,this.i=n,this.j=r,this.C=u,this.m=c,this.h=f===void 0?"":f,this.l=h===void 0?"":h,this.o=v===void 0?"reload":v,this.s=A===void 0?!1:A,this.g=N===void 0?"":N}Bl.prototype.create=function(e){var t=[];t=HE(e,this.A);var n=e.filter(function(r){return r.primary});return t=t.length?t:n.length?n:e,e=VE(t,this.B),e.length&&(t=e),this.m&&(e=WE(t,this.m),e.length&&(t=e)),this.j&&(e=YE(t,this.j),e.length&&(t=e)),this.i&&(e=zE(t,this.i),e.length&&(t=e)),this.h&&(e=KE(t,this.h),e.length&&(t=e)),this.l&&(e=Wh(t,this.l),e.length&&(t=e)),e=$E(t,this.C),e.length&&(t=e),this.g&&(e=XE(t,this.g),e.length&&(t=e)),new Wf(t[0],t,!(this.o=="smooth"&&Gn()),this.s)};function HE(e,t){t=Or(t);var n=Cc(t,e.map(function(r){return Bf(r)}));return n?e.filter(function(r){return n==Bf(r)}):[]}function VE(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function KE(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function Wh(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function zE(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function YE(e,t){return t=="AUTO"&&(t=g.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function WE(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function $E(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function XE(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function jm(){this.g=Nc,this.i=new Map().set(Nc,2).set(nl,1),this.h=0}function Zm(e,t,n){e.i.set(Nc,n).set(nl,t)}var nl=0,Nc=1;function $h(e,t){var n=ua();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function qm(e){var t,n;return Re(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new Xe(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),R(r,new Promise(function(u){new on(u).Z(n/1e3)}),2))}e.h*=e.m,X(r)})}function ua(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Lr(){var e,t,n=new Promise(function(r,u){e=r,t=u});return n.resolve=e,n.reject=t,n}Lr.prototype.resolve=function(){},Lr.prototype.reject=function(){};function pi(e,t){this.promise=e,this.i=t,this.g=!1}function Ws(e){return new pi(Promise.reject(e),function(){return Promise.resolve()})}function Xh(){var e=Promise.reject(new Xe(2,7,7001));return e.catch(function(){}),new pi(e,function(){return Promise.resolve()})}function $s(e){return new pi(Promise.resolve(e),function(){return Promise.resolve()})}function Gm(e){return new pi(e,function(){return e.catch(function(){})})}pi.prototype.abort=function(){return this.g=!0,this.i()};function Hm(e){return new pi(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}pi.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},pi.prototype.Aa=function(e,t){function n(h){return function(v){if(u.g&&h)c.reject(f);else{var A=h?e:t;A?r=Vm(A,v,c):(h?c.resolve:c.reject)(v)}}}function r(){return c.reject(f),u.abort()}var u=this,c=new Lr,f=new Xe(2,7,7001);return this.promise.then(n(!0),n(!1)),new pi(c,function(){return r()})};function Vm(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(u){return n.reject(u),function(){return Promise.resolve()}}}E.Object.defineProperties(pi.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),ne("shaka.util.AbortableOperation",pi),pi.prototype.chain=pi.prototype.Aa,pi.prototype.finally=pi.prototype.finally,pi.all=Hm,pi.prototype.abort=pi.prototype.abort,pi.notAbortable=Gm,pi.completed=$s,pi.aborted=Xh,pi.failed=Ws;function jn(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=g.performance&&g.performance.now?g.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Qh(e){var t=new jn(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}jn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},jn.prototype.stopImmediatePropagation=function(){this.g=!0},jn.prototype.stopPropagation=function(){},ne("shaka.util.FakeEvent",jn);var $f={gj:"abrstatuschanged",hj:"adaptation",ij:"audiotrackchanged",jj:"buffering",kj:"complete",lj:"downloadfailed",mj:"downloadheadersreceived",nj:"drmsessionupdate",pj:"emsg",Jj:"prft",Error:"error",qj:"expirationupdated",rj:"firstquartile",sj:"gapjumped",vj:"keystatuschanged",zj:"loaded",Aj:"loading",Cj:"manifestparsed",Dj:"manifestupdated",Ej:"mediaqualitychanged",Fj:"mediasourcerecovered",Metadata:"metadata",Gj:"midpoint",Hj:"nospatialvideoinfo",Ij:"onstatechange",Kj:"ratechange",Mj:"segmentappended",Nj:"sessiondata",Oj:"spatialvideoinfo",Pj:"stalldetected",Qj:"started",Rj:"statechanged",Sj:"streaming",Tj:"textchanged",Uj:"texttrackvisibility",Vj:"thirdquartile",Wj:"timelineregionadded",Xj:"timelineregionenter",Yj:"timelineregionexit",Zj:"trackschanged",ak:"unloading",ck:"variantchanged"};function Nr(){this.sa=new _t,this.oe=this}Nr.prototype.addEventListener=function(e,t){this.sa&&this.sa.push(e,t)},Nr.prototype.removeEventListener=function(e,t){this.sa&&this.sa.remove(e,t)},Nr.prototype.dispatchEvent=function(e){if(!this.sa)return!0;var t=this.sa.get(e.type)||[],n=this.sa.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.oe,e.currentTarget=this.oe;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},Nr.prototype.release=function(){this.sa=null};function rl(){this.g=[]}function il(e,t){e.g.push(t.finally(function(){Kn(e.g,t)}))}rl.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function zr(e,t,n,r,u,c){Nr.call(this),this.i=!1,this.o=new rl,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.B=n||null,this.C=r||null,this.G=u||null,this.F=c||null,this.s=this.A=!1,this.m=16e3}Y(zr,Nr),p=zr.prototype,p.Pf=function(e){this.A=e},p.Qf=function(e){this.s=e};function Xs(e,t,n,r){n=n||tp;var u=Dc[e];(!u||n>=u.priority)&&(Dc[e]={priority:n,fe:t,Bi:r===void 0?!1:r})}function Jh(e,t){for(var n=m(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(e=m(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}p.Ei=function(e){this.g.add(e)},p.$i=function(e){this.g.delete(e)},p.jg=function(){this.g.clear()},p.Fi=function(e){this.h.add(e)},p.aj=function(e){this.h.delete(e)},p.kg=function(){this.h.clear()};function Bi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}p.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Nr.prototype.release.call(this),this.o.destroy()},p.request=function(e,t,n){var r=this,u=new ep;if(this.i){var c=Promise.reject(new Xe(2,7,7001));return c.catch(function(){}),new Mc(c,function(){return Promise.resolve()},u)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Aa(t.retryParameters):ua(),t.uris=Aa(t.uris),c=Km(this,e,t,n);var f=c.Aa(function(){return zm(r,e,t,n,new $h(t.retryParameters,!1),0,null,u)}),h=f.Aa(function(z){return Ym(r,e,z,n)}),v=Date.now(),A=0;c.promise.then(function(){A=Date.now()-v},function(){});var N=0;f.promise.then(function(){N=Date.now()},function(){});var B=h.Aa(function(z){var J=Date.now()-N,fe=z.response;return fe.timeMs+=A,fe.timeMs+=J,z.gi||!r.l||fe.fromCache||t.method=="HEAD"||e!=Wa||r.l(fe.timeMs,fe.data.byteLength,Wm(n)),r.F&&r.F(e,fe,n),fe},function(z){throw z&&(z.severity=2),z});return c=new Mc(B.promise,function(){return B.abort()},u),il(this.o,c),c};function Km(e,t,n,r){function u(h){c=c.Aa(function(){return n.body&&(n.body=Ni(n.body)),h(t,n,r)})}var c=$s(void 0);e.C&&u(e.C),e=m(e.g);for(var f=e.next();!f.done;f=e.next())u(f.value);return c.Aa(void 0,function(h){throw h instanceof Xe&&h.code==7001?h:new Xe(2,1,1006,h)})}function zm(e,t,n,r,u,c,f,h){e.A&&(n.uris[c]=n.uris[c].replace("https://","http://")),e.s&&(n.uris[c]=n.uris[c].replace("http://","https://")),0<c&&e.G&&e.G(t,r,n.uris[c],n.uris[c-1]);var v=new Ei(n.uris[c]),A=v.Bb,N=!1;A||(A=location.protocol,A=A.slice(0,-1),Mf(v,A),n.uris[c]=v.toString()),A=A.toLowerCase();var B=(A=Dc[A])?A.fe:null;if(!B)return Ws(new Xe(2,1,1e3,v));var z=A.Bi,J=null,fe=null,pe=!1,Ee=!1,Le;return Gm(qm(u)).Aa(function(){if(e.i)return Xh();Le=Date.now();var Fe=0;n.requestStartTime=Date.now();var it=B(n.uris[c],n,t,function(rt,dt,gt){J&&J.stop(),fe&&fe.Z(Qe/1e3),e.l&&t==Wa&&(Fe++,n.packetNumber=Fe,e.l(rt,dt,Wm(r),n),N=!0,h.g=gt)},function(rt){e.j&&e.j(rt,n,t),Ee=!0,n.timeToFirstByte=Date.now()-n.requestStartTime},{minBytesForProgressEvents:e.m});if(!z)return it;var Ue=n.retryParameters.connectionTimeout;Ue&&(J=new on(function(){pe=!0,it.abort()}),J.Z(Ue/1e3));var Qe=n.retryParameters.stallTimeout;return Qe&&(fe=new on(function(){pe=!0,it.abort()})),it}).Aa(function(Fe){J&&J.stop(),fe&&fe.stop(),Fe.timeMs==null&&(Fe.timeMs=Date.now()-Le);var it={response:Fe,gi:N};return!Ee&&e.j&&e.j(Fe.headers,n,t),it},function(Fe){if(J&&J.stop(),fe&&fe.stop(),e.B){var it=null,Ue=0;Fe instanceof Xe&&(it=Fe,Fe.code==1001&&(Ue=Fe.data[1])),e.B(n,it,Ue,pe)}if(e.i)return Xh();if(pe&&(Fe=new Xe(1,1,1003,n.uris[c],t)),Fe instanceof Xe){if(Fe.code==7001)throw Fe;if(Fe.code==1010)throw f;if(Fe.severity==1)return it=new Map().set("error",Fe),it=new jn("retry",it),e.dispatchEvent(it),c=(c+1)%n.uris.length,zm(e,t,n,r,u,c,Fe,h)}throw Fe})}function Ym(e,t,n,r){var u=$s(void 0);e=m(e.h);for(var c=e.next(),f={};!c.done;f={Sg:void 0},c=e.next())f.Sg=c.value,u=u.Aa(function(h){return function(){var v=n.response;return v.data&&(v.data=Ni(v.data)),(0,h.Sg)(t,v,r)}}(f));return u.Aa(function(){return n},function(h){var v=2;if(h instanceof Xe){if(h.code==7001)throw h;v=h.severity}throw new Xe(v,1,1007,h)})}function Wm(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.s)return!1}return!0}ne("shaka.net.NetworkingEngine",zr),zr.prototype.request=zr.prototype.request,zr.prototype.destroy=zr.prototype.destroy,zr.makeRequest=Bi,zr.defaultRetryParameters=function(){return ua()},zr.prototype.clearAllResponseFilters=zr.prototype.kg,zr.prototype.unregisterResponseFilter=zr.prototype.aj,zr.prototype.registerResponseFilter=zr.prototype.Fi,zr.prototype.clearAllRequestFilters=zr.prototype.jg,zr.prototype.unregisterRequestFilter=zr.prototype.$i,zr.prototype.registerRequestFilter=zr.prototype.Ei,zr.unregisterScheme=function(e){delete Dc[e]},zr.registerScheme=Xs,zr.prototype.setForceHTTPS=zr.prototype.Qf,zr.prototype.setForceHTTP=zr.prototype.Pf;function ep(){this.g=0}zr.NumBytesRemainingClass=ep;function Mc(e,t,n){pi.call(this,e,t),this.h=n}Y(Mc,pi),zr.PendingRequest=Mc;var Wa=1;zr.RequestType={MANIFEST:0,SEGMENT:Wa,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},zr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var tp=3;zr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:tp};var Dc={};function jl(e){this.g=!1,this.h=new Lr,this.i=e}jl.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Zr(e,t){if(e.g)throw t instanceof Xe&&t.code==7003?t:new Xe(2,7,7003,t)}function np(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function rp(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function bu(e){for(var t=new Map,n=m(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function ip(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function k(e,t){this.h=ln(e),this.i=t==j,this.g=0}p=k.prototype,p.ra=function(){return this.g<this.h.byteLength},p.xa=function(){return this.g},p.getLength=function(){return this.h.byteLength},p.S=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw O()}},p.la=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw O()}},p.P=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw O()}},p.Pg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw O()}},p.Pc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw O()}if(2097151<t)throw new Xe(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},p.rb=function(e){if(this.g+e>this.h.byteLength)throw O();var t=nr(this.h,this.g,e);return this.g+=e,t},p.skip=function(e){if(this.g+e>this.h.byteLength)throw O();this.g+=e},p.Mi=function(e){if(this.g<e)throw O();this.g-=e},p.seek=function(e){if(0>e||e>this.h.byteLength)throw O();this.g=e},p.sc=function(){for(var e=this.g;this.ra()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=nr(this.h,e,this.g-e),this.g+=1,Cr(e)};function O(){return new Xe(2,3,3e3)}ne("shaka.util.DataViewReader",k),k.prototype.readTerminatedString=k.prototype.sc,k.prototype.seek=k.prototype.seek,k.prototype.rewind=k.prototype.Mi,k.prototype.skip=k.prototype.skip,k.prototype.readBytes=k.prototype.rb,k.prototype.readUint64=k.prototype.Pc,k.prototype.readInt32=k.prototype.Pg,k.prototype.readUint32=k.prototype.P,k.prototype.readUint16=k.prototype.la,k.prototype.readUint8=k.prototype.S,k.prototype.getLength=k.prototype.getLength,k.prototype.getPosition=k.prototype.xa,k.prototype.hasMoreData=k.prototype.ra;var j=1;k.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:j};function V(){this.i=[],this.h=[],this.g=!1}p=V.prototype,p.box=function(e,t){return e=Ae(e),this.i[e]=_e,this.h[e]=t,this},p.R=function(e,t){return e=Ae(e),this.i[e]=ye,this.h[e]=t,this},p.stop=function(){this.g=!0},p.parse=function(e,t,n){for(e=new k(e,0),this.g=!1;e.ra()&&!this.g;)this.Mc(0,e,t,n)},p.Mc=function(e,t,n,r){var u=t.xa();if(r&&u+8>t.getLength())this.g=!0;else{var c=t.P(),f=t.P(),h=Te(f),v=!1;switch(c){case 0:c=t.getLength()-u;break;case 1:if(r&&t.xa()+8>t.getLength()){this.g=!0;return}c=t.Pc(),v=!0}var A=this.h[f];if(A){var N=null,B=null;if(this.i[f]==ye){if(r&&t.xa()+4>t.getLength()){this.g=!0;return}B=t.P(),N=B>>>24,B&=16777215}f=u+c,n&&f>t.getLength()&&(f=t.getLength()),r&&f>t.getLength()?this.g=!0:(r=f-t.xa(),t=0<r?t.rb(r):new Uint8Array(0),t=new k(t,0),A({name:h,parser:this,partialOkay:n||!1,version:N,flags:B,reader:t,size:c,start:u+e,has64BitSize:v}))}else t.skip(Math.min(u+c-t.xa(),t.getLength()-t.xa()))}};function W(e){for(var t=ie(e);e.reader.ra()&&!e.parser.g;)e.parser.Mc(e.start+t,e.reader,e.partialOkay)}function ee(e){for(var t=ie(e),n=e.reader.P(),r=0;r<n&&(e.parser.Mc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function H(e){var t=ie(e);for(e.reader.skip(78);e.reader.ra()&&!e.parser.g;)e.parser.Mc(e.start+t,e.reader,e.partialOkay)}function re(e){var t=ie(e);e.reader.skip(8);var n=e.reader.la();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ra()&&!e.parser.g;)e.parser.Mc(e.start+t,e.reader,e.partialOkay)}function he(e){return function(t){e(t.reader.rb(t.reader.getLength()-t.reader.xa()))}}function Ae(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Te(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function ie(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}ne("shaka.util.Mp4Parser",V),V.headerSize=ie,V.typeToString=Te,V.allData=he,V.audioSampleEntry=re,V.visualSampleEntry=H,V.sampleDescription=ee,V.children=W,V.prototype.parseNext=V.prototype.Mc,V.prototype.parse=V.prototype.parse,V.prototype.stop=V.prototype.stop,V.prototype.fullBox=V.prototype.R,V.prototype.box=V.prototype.box;var _e=0,ye=1;function ze(e){var t=this;this.g=[],this.h=[],this.data=[],new V().box("moov",W).box("moof",W).R("pssh",function(n){if(!(1<n.version)){var r=nr(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(za(n.reader.rb(16))),0<n.version){r=n.reader.P();for(var u=0;u<r;u++){var c=za(n.reader.rb(16));t.h.push(c)}}}}).parse(e)}function Oe(e,t,n,r){var u=e.length,c=t.length+16+u;0<r&&(c+=4+16*n.size);var f=new Uint8Array(c),h=ln(f),v=0;if(h.setUint32(v,c),v+=4,h.setUint32(v,1886614376),v+=4,1>r?h.setUint32(v,0):h.setUint32(v,16777216),v+=4,f.set(t,v),v+=t.length,0<r)for(h.setUint32(v,n.size),v+=4,t=m(n),n=t.next();!n.done;n=t.next())n=$u(n.value),f.set(n,v),v+=n.length;return h.setUint32(v,u),f.set(e,v+4),f}function Ze(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.ga=this.ea=!1,this.I=0,this.g=null,this.B=new Tt,this.i=new Map,this.A=new Map,this.l=new Lr,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.aa=new Map,this.fa=new Map,this.L=new on(function(){return Vt(t)}),this.O=!1,this.N=[],this.X=!1,this.K=new on(function(){St(t)}),this.l.catch(function(){}),this.j=new jl(function(){return We(t)}),this.ba=!1,this.F=this.G=null,this.T=function(){return!1}}p=Ze.prototype,p.destroy=function(){return this.j.destroy()};function We(e){return Re(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,R(t,xn(e),2);case 2:if(!e.m){t.u(3);break}return ce(t,4),R(t,e.m.setMediaKeys(null),6);case 6:me(t,5);break;case 4:Ce(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,X(t)}})}p.configure=function(e,t){this.h=e,t&&(this.T=t),this.K&&this.K.Ra(this.h.updateExpirationTime)};function Se(e,t,n){return e.ga=!0,e.A=new Map,e.O=n,Ge(e,t)}function ke(e,t,n){e.A=new Map,n=m(n);for(var r=n.next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.O=0<e.A.size,Ge(e,t)}function Ie(e,t,n,r,u,c){var f=new Map;return u={audioCapabilities:u,videoCapabilities:c,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},u.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],f.set(t,u),je(e,f,[])}function Ge(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue;return Re(function(Qe){if(Qe.g==1){if(n=De(e))for(r=m(t),u=r.next();!u.done;u=r.next())c=u.value,c.video&&(c.video.drmInfos=[n]),c.audio&&(c.audio.drmInfos=[n]);for(f=t.some(function(rt){return!!(rt.video&&rt.video.drmInfos.length||rt.audio&&rt.audio.drmInfos.length)}),f||(h=bu(e.h.servers),un(t,h)),v=new Set,A=m(t),N=A.next();!N.done;N=A.next())for(B=N.value,z=at(B),J=m(z),fe=J.next();!fe.done;fe=J.next())pe=fe.value,v.add(pe);for(Ee=m(v),Le=Ee.next();!Le.done;Le=Ee.next())Fe=Le.value,Jt(Fe,bu(e.h.servers),bu(e.h.advanced||{}),e.h.keySystemsMapping);return R(Qe,Rm(t,e.O,e.ba,e.h.preferredKeySystems),2)}return Zr(e.j),it=f||Object.keys(e.h.servers).length,it?(Ue=je(e,void 0,t),Qe.return(f?Ue:Ue.catch(function(){}))):(e.ea=!0,Qe.return(Promise.resolve()))})}function q(e){var t;return Re(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return R(n,e.G,3);case 3:return Zr(e.j),n.return();case 2:return ce(n,4),e.G=e.m.setMediaKeys(e.s),R(n,e.G,6);case 6:me(n,5);break;case 4:t=Ce(n),e.o(new Xe(2,6,6003,t.message));case 5:Zr(e.j),X(n)}})}function le(e,t){return Re(function(n){if(n.g==1)return R(n,q(e),2);Pe(e,t.initDataType,nr(t.initData)),X(n)})}p.Sb=function(e){var t=this;return Re(function(n){if(n.g==1)return t.s?(t.m=e,t.B.pa(t.m,"play",function(){for(var r=m(t.N),u=r.next();!u.done;u=r.next())pt(t,u.value);t.X=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return xn(t)}),t.F=t.g&&t.g.initData.find(function(r){return 0<r.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?R(n,q(t),2):n.u(2)):(t.B.pa(e,"encrypted",function(){t.o(new Xe(2,6,6010))}),n.return());te(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(r){return le(t,r)}),X(n)})};function ae(e){var t,n,r,u,c;return Re(function(f){switch(f.g){case 1:if(!e.s||!e.g)return f.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){f.u(2);break}return t=Bi([e.g.serverCertificateUri],e.h.retryParameters),ce(f,3),n=e.C.Mb.request(5,t,{isPreload:e.T()}),R(f,n.promise,5);case 5:r=f.h,e.g.serverCertificate=nr(r.data),me(f,4);break;case 3:throw u=Ce(f),new Xe(2,6,6017,u);case 4:if(e.j.g)return f.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?f.return():(ce(f,6),R(f,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:me(f,0);break;case 6:throw c=Ce(f),new Xe(2,6,6004,c.message)}})}function ue(e,t){var n,r,u;return Re(function(c){if(c.g==1)return R(c,ct(e,t,{initData:null,initDataType:null}),2);if(c.g!=3)return n=c.h,n?(r=[],(u=e.i.get(n))&&(u.kb=new Lr,r.push(u.kb)),r.push(n.remove()),R(c,Promise.all(r),3)):c.return();e.i.delete(n),X(c)})}function te(e){var t,n,r,u,c;return Re(function(f){if(f.g==1)return e.A.size?(e.A.forEach(function(h,v){ct(e,v,h)}),R(f,e.l,3)):f.u(2);if(f.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&Pt(e))return f.return(e.l);e.l=new Lr,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=m(n),u=r.next();!u.done;u=r.next())c=u.value,Pe(e,c.initDataType,c.initData);return Qt(e)&&e.l.resolve(),f.return(e.l)})}function Pe(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var r=e.i.values();r=m(r);for(var u=r.next();!u.done;u=r.next())if(no(n,u.value.initData))return}0<e.i.size&&Qt(e)&&(e.l.resolve(),e.l=new Lr,e.l.catch(function(){})),yt(e,t,n,e.g.sessionType)}}function xe(e){return e=e.i.keys(),e=np(e,function(t){return t.sessionId}),Array.from(e)}p.ef=function(){var e=this,t=this.i.keys();return t=np(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},p.ad=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},p.Id=function(){return ip(this.fa)};function je(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe;return Re(function(it){switch(it.g){case 1:if(r=new Map,n.length){u=Me(e,n,r),it.u(2);break}return R(it,ve(e,t),3);case 3:u=it.h;case 2:if(c=u,!c)throw new Xe(2,6,6001);for(Zr(e.j),ce(it,4),e.H.clear(),f=c.getConfiguration(),h=f.audioCapabilities||[],v=f.videoCapabilities||[],A=m(h),N=A.next();!N.done;N=A.next())B=N.value,e.H.add(B.contentType.toLowerCase());for(z=m(v),J=z.next();!J.done;J=z.next())fe=J.value,e.H.add(fe.contentType.toLowerCase());if(n.length){var Ue=c.keySystem,Qe=r.get(c.keySystem),rt=[],dt=[],gt=[],kt=[],It=[],Ut=new Set,Nt=new Set;an(Qe,rt,dt,kt,gt,It,Ut,Nt);var nn=e.O?"persistent-license":"temporary";for(Ue={keySystem:Ue,encryptionScheme:rt[0],licenseServerUri:dt[0],distinctiveIdentifierRequired:Qe[0].distinctiveIdentifierRequired,persistentStateRequired:Qe[0].persistentStateRequired,sessionType:Qe[0].sessionType||nn,audioRobustness:Qe[0].audioRobustness||"",videoRobustness:Qe[0].videoRobustness||"",serverCertificate:kt[0],serverCertificateUri:gt[0],initData:It,keyIds:Ut},0<Nt.size&&(Ue.keySystemUris=Nt),Qe=m(Qe),Nt=Qe.next();!Nt.done;Nt=Qe.next())Nt=Nt.value,Nt.distinctiveIdentifierRequired&&(Ue.distinctiveIdentifierRequired=Nt.distinctiveIdentifierRequired),Nt.persistentStateRequired&&(Ue.persistentStateRequired=Nt.persistentStateRequired);Qe=Ue}else Qe=c.keySystem,Nt=t.get(c.keySystem),Ue=[],rt=[],dt=[],gt=[],kt=[],It=new Set,an(Nt.drmInfos,Ue,rt,gt,dt,kt,It),Qe={keySystem:Qe,encryptionScheme:Ue[0],licenseServerUri:rt[0],distinctiveIdentifierRequired:Nt.distinctiveIdentifier=="required",persistentStateRequired:Nt.persistentState=="required",sessionType:Nt.sessionTypes[0]||"temporary",audioRobustness:(Nt.audioCapabilities?Nt.audioCapabilities[0].robustness:"")||"",videoRobustness:(Nt.videoCapabilities?Nt.videoCapabilities[0].robustness:"")||"",serverCertificate:gt[0],serverCertificateUri:dt[0],initData:kt,keyIds:It};if(e.g=Qe,!e.g.licenseServerUri)throw new Xe(2,6,6012,e.g.keySystem);return R(it,c.createMediaKeys(),6);case 6:if(pe=it.h,Zr(e.j),e.s=pe,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){it.u(7);break}return ce(it,8),R(it,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(Ee=it.h,Ee!="usable")throw new Xe(2,6,6018);Zr(e.j),me(it,7,4);break;case 8:throw Le=Ce(it,4),Le instanceof Xe?Le:new Xe(2,6,6019,Le.message);case 7:return e.ea=!0,R(it,ae(e),11);case 11:Zr(e.j),me(it,0);break;case 4:throw Fe=Ce(it),Zr(e.j,Fe),e.g=null,e.H.clear(),Fe instanceof Xe?Fe:new Xe(2,6,6002,Fe.message)}})}function Me(e,t,n){for(var r=m(t),u=r.next();!u.done;u=r.next()){u=m(at(u.value));for(var c=u.next();!c.done;c=u.next())c=c.value,n.has(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c)}if(n.size==1&&n.has(""))throw new Xe(2,6,6e3);for(e=m(e.h.preferredKeySystems),u=e.next(),r={};!u.done;r={Og:void 0},u=e.next())for(r.Og=u.value,u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value.decodingInfos.find(function(A){return function(N){return N.supported&&N.keySystemAccess!=null&&N.keySystemAccess.keySystem==A.Og}}(r)))return c.keySystemAccess;for(e=m([!0,!1]),r=e.next();!r.done;r=e.next())for(r=r.value,u=m(t),c=u.next();!c.done;c=u.next()){c=m(c.value.decodingInfos);for(var f=c.next();!f.done;f=c.next())if(f=f.value,f.supported&&f.keySystemAccess){var h=n.get(f.keySystemAccess.keySystem);h=m(h);for(var v=h.next();!v.done;v=h.next())if(!!v.value.licenseServerUri==r)return f.keySystemAccess}}return null}function ve(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le;return Re(function(Fe){switch(Fe.g){case 1:if(t.size==1&&t.has(""))throw new Xe(2,6,6e3);for(r=m(t.values()),u=r.next();!u.done;u=r.next())c=u.value,c.audioCapabilities.length==0&&delete c.audioCapabilities,c.videoCapabilities.length==0&&delete c.videoCapabilities;f=m(e.h.preferredKeySystems),h=f.next();case 2:if(h.done){Fe.u(4);break}if(v=h.value,!t.has(v)){Fe.u(3);break}return A=t.get(v),ce(Fe,6),R(Fe,navigator.requestMediaKeySystemAccess(v,[A]),8);case 8:return n=Fe.h,Fe.return(n);case 6:Ce(Fe);case 7:Zr(e.j);case 3:h=f.next(),Fe.u(2);break;case 4:N=m([!0,!1]),B=N.next();case 9:if(B.done){Fe.u(11);break}z=B.value,J=m(t.keys()),fe=J.next();case 12:if(fe.done){B=N.next(),Fe.u(9);break}if(pe=fe.value,Ee=t.get(pe),Le=Ee.drmInfos.some(function(it){return!!it.licenseServerUri}),Le!=z){Fe.u(13);break}return ce(Fe,15),R(Fe,navigator.requestMediaKeySystemAccess(pe,[Ee]),17);case 17:return n=Fe.h,Fe.return(n);case 15:Ce(Fe);case 16:Zr(e.j);case 13:fe=J.next(),Fe.u(12);break;case 11:return Fe.return(n)}})}function De(e){return e=bu(e.h.clearKeys),e.size==0?null:ym(e)}function $e(e){Qt(e)&&e.l.resolve()}function mt(e,t){new on(function(){t.loaded=!0,$e(e)}).Z(kn)}function ct(e,t,n){var r,u,c,f,h,v,A;return Re(function(N){switch(N.g){case 1:try{r=e.s.createSession("persistent-license")}catch(B){return u=new Xe(2,6,6005,B.message),e.o(u),N.return(Promise.reject(u))}return e.B.D(r,"message",function(B){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.X?e.N.push(B):pt(e,B)}),e.B.D(r,"keystatuseschange",function(B){return Gt(e,B)}),c={initData:n.initData,initDataType:n.initDataType,loaded:!1,Af:1/0,kb:null,type:"persistent-license"},e.i.set(r,c),ce(N,2),R(N,r.load(t),4);case 4:return f=N.h,Zr(e.j),f||(e.i.delete(r),h=e.h.persistentSessionOnlinePlayback?1:2,e.o(new Xe(h,6,6013)),c.loaded=!0),mt(e,c),$e(e),N.return(r);case 2:v=Ce(N),Zr(e.j,v),e.i.delete(r),A=e.h.persistentSessionOnlinePlayback?1:2,e.o(new Xe(A,6,6005,v.message)),c.loaded=!0,$e(e);case 3:return N.return(Promise.resolve())}})}function yt(e,t,n,r){try{var u=e.s.createSession(r)}catch(c){e.o(new Xe(2,6,6005,c.message));return}e.B.D(u,"message",function(c){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.X?e.N.push(c):pt(e,c)}),e.B.D(u,"keystatuseschange",function(c){return Gt(e,c)}),e.i.set(u,{initData:n,initDataType:t,loaded:!1,Af:1/0,kb:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(c){t=c,c instanceof Xe||(t=new Xe(2,6,6016,c)),e.o(t);return}e.h.logLicenseExchange&&Ss(n),u.generateRequest(t,n).catch(function(c){if(!e.j.g){e.i.delete(u);var f=c.errorCode;if(f&&f.systemCode){var h=f.systemCode;0>h&&(h+=Math.pow(2,32)),h="0x"+h.toString(16)}e.o(new Xe(2,6,6006,c.message,c,h))}})}function pt(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe;Re(function(Ee){switch(Ee.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Ss(t.message),r=e.i.get(n),u=e.g.licenseServerUri,c=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&c&&c.individualizationServer&&(u=c.individualizationServer),f=Bi([u],e.h.retryParameters),f.body=t.message,f.method="POST",f.licenseRequestType=t.messageType,f.sessionId=n.sessionId,f.drmInfo=e.g,r&&(f.initData=r.initData,f.initDataType=r.initDataType),c&&c.headers)for(h in c.headers)f.headers[h]=c.headers[h];if(Vr(e.g.keySystem)){var Le=ci(f.body,!0,!0);if(Le.includes("PlayReadyKeyMessage")){Le=Tu(Le,"PlayReadyKeyMessage");var Fe=Eo(Le,"HttpHeader");Fe=m(Fe);for(var it=Fe.next();!it.done;it=Fe.next()){var Ue=it.value;it=Eo(Ue,"name")[0],Ue=Eo(Ue,"value")[0],f.headers[ei(it)]=ei(Ue)}Le=Eo(Le,"Challenge")[0],f.body=Wo(ei(Le))}else f.headers["Content-Type"]="text/xml; charset=utf-8"}return v=Date.now(),ce(Ee,2),N=e.C.Mb.request(2,f,{isPreload:e.T()}),R(Ee,N.promise,4);case 4:A=Ee.h,me(Ee,3);break;case 2:return B=Ce(Ee),e.j.g||(z=new Xe(2,6,6007,B),e.i.size==1?(e.o(z),r&&r.kb&&r.kb.reject(z)):(r&&r.kb&&r.kb.reject(z),e.i.delete(n),Qt(e)&&(e.l.resolve(),e.L.Z(.1)))),Ee.return();case 3:return e.j.g?Ee.return():(e.I+=(Date.now()-v)/1e3,e.h.logLicenseExchange&&Ss(A.data),ce(Ee,5),R(Ee,n.update(A.data),7));case 7:me(Ee,6);break;case 5:return J=Ce(Ee),fe=new Xe(2,6,6008,J.message),e.o(fe),r&&r.kb&&r.kb.reject(fe),Ee.return();case 6:if(e.j.g)return Ee.return();pe=new jn("drmsessionupdate"),e.C.onEvent(pe),r&&(r.kb&&r.kb.resolve(),mt(e,r)),X(Ee)}})}function Gt(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(c,f){if(typeof f=="string"){var h=f;f=c,c=h}if(Vr(e.g.keySystem)&&f.byteLength==16&&(xr()||Ri())){h=ln(f);var v=h.getUint32(0,!0),A=h.getUint16(4,!0),N=h.getUint16(6,!0);h.setUint32(0,v,!1),h.setUint16(4,A,!1),h.setUint16(6,N,!1)}c!="status-pending"&&(n.loaded=!0),c=="expired"&&(r=!0),f=za(f).slice(0,32),e.aa.set(f,c)});var u=t.expiration-Date.now();(0>u||r&&1e3>u)&&n&&!n.kb&&(e.i.delete(t),t.close().catch(function(){})),Qt(e)&&(e.l.resolve(),e.L.Z(mr))}function Vt(e){var t=e.aa,n=e.fa;n.clear(),t.forEach(function(r,u){return n.set(u,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.o(new Xe(2,6,6014)),e.C.be(ip(n))}function jt(){var e,t,n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut;return Re(function(Nt){if(Nt.g==1){for(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" "),t=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],n=["150","2000","3000"],r={"com.widevine.alpha":t,"com.microsoft.playready.recommendation":n},u=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],c=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],f={videoCapabilities:u,audioCapabilities:c,initDataTypes:["cenc","sinf","skd","keyids"]},h=[null,"cenc","cbcs","cbcs-1-9"],v=new Map,A=function(nn,Kt){var $t,En,An,Vn,Qn,ar,Ar,Qr;return Re(function(Yr){switch(Yr.g){case 1:return ce(Yr,2),R(Yr,Kt.createMediaKeys(),4);case 4:me(Yr,3);break;case 2:return Ce(Yr),Yr.return();case 3:En=($t=Kt.getConfiguration().sessionTypes)?$t.includes("persistent-license"):!1,Ui()&&(En=!1),An=Kt.getConfiguration().videoCapabilities,Vn=Kt.getConfiguration().audioCapabilities,Qn={persistentState:En,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[]},v.has(nn)&&v.get(nn)?Qn=v.get(nn):v.set(nn,Qn),(ar=An[0].encryptionScheme)&&!Qn.encryptionSchemes.includes(ar)&&Qn.encryptionSchemes.push(ar),(Ar=An[0].robustness)&&!Qn.videoRobustnessLevels.includes(Ar)&&Qn.videoRobustnessLevels.push(Ar),(Qr=Vn[0].robustness)&&!Qn.audioRobustnessLevels.includes(Qr)&&Qn.audioRobustnessLevels.push(Qr),X(Yr)}})},N=function(nn,Kt,$t,En){var An,Vn,Qn,ar,Ar,Qr,Yr,Si,Pr,Fr;return Re(function(si){switch(si.g){case 1:for(ce(si,2),An=Aa(f),Vn=m(An.videoCapabilities),Qn=Vn.next();!Qn.done;Qn=Vn.next())ar=Qn.value,ar.encryptionScheme=Kt,ar.robustness=$t;for(Ar=m(An.audioCapabilities),Qr=Ar.next();!Qr.done;Qr=Ar.next())Yr=Qr.value,Yr.encryptionScheme=Kt,Yr.robustness=En;return Si=Aa(An),Si.persistentState="required",Si.sessionTypes=["persistent-license"],Pr=[Si,An],R(si,navigator.requestMediaKeySystemAccess(nn,Pr),4);case 4:return Fr=si.h,R(si,A(nn,Fr),5);case 5:me(si,0);break;case 2:Ce(si),X(si)}})},B=function(nn,Kt,$t,En){var An,Vn,Qn;return Re(function(ar){switch(ar.g){case 1:return ce(ar,2),An={type:"media-source",video:{contentType:u[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:c[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:nn,video:{encryptionScheme:Kt,robustness:$t},audio:{encryptionScheme:Kt,robustness:En}}},R(ar,navigator.mediaCapabilities.decodingInfo(An),4);case 4:return Vn=ar.h,Qn=Vn.keySystemAccess,R(ar,A(nn,Qn),5);case 5:me(ar,0);break;case 2:Ce(ar),X(ar)}})},z=m(e),J=z.next();!J.done;J=z.next())fe=J.value,v.set(fe,null);for(pe=[],Ee=m(h),Le=Ee.next();!Le.done;Le=Ee.next())for(Fe=Le.value,it=m(e),Ue=it.next();!Ue.done;Ue=it.next())Qe=Ue.value,Qe==="org.w3.clearkey"&&Zs()||(pe.push(N(Qe,Fe,"","")),pe.push(B(Qe,Fe,"","")));for(rt=m(e),dt=rt.next();!dt.done;dt=rt.next())for(gt=dt.value,kt=m(r[gt]||[]),It=kt.next();!It.done;It=kt.next())Ut=It.value,pe.push(N(gt,null,Ut,"")),pe.push(N(gt,null,"",Ut)),pe.push(B(gt,null,Ut,"")),pe.push(B(gt,null,"",Ut));return R(Nt,Promise.all(pe),2)}return Nt.return(ip(v))})}function Zt(e){var t;return Re(function(n){if(n.g==1)return t=new Promise(function(r,u){new on(u).Z(Bn)}),ce(n,2),R(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return me(n,0);Ce(n),X(n)})}function xn(e){var t;return Re(function(n){return t=Array.from(e.i.entries()),e.i.clear(),R(n,Promise.all(t.map(function(r){r=m(r);var u=r.next().value,c=r.next().value;return Re(function(f){if(f.g==1)return ce(f,2),e.ga||e.A.has(u.sessionId)||c.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?R(f,Zt(u),5):R(f,u.remove(),5);if(f.g!=2)return me(f,0);Ce(f),X(f)})})),0)})}function at(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function St(e){e.i.forEach(function(t,n){var r=t.Af,u=n.expiration;isNaN(u)&&(u=1/0),u!=r&&(e.C.onExpirationUpdated(n.sessionId,u),t.Af=u)})}function Qt(e){return e=e.i.values(),rp(e,function(t){return t.loaded})}function Pt(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.aa.get(n.value)!=="usable")return!1;return!0}function un(e,t){var n=[];for(t.forEach(function(r,u){n.push({keySystem:u,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function an(e,t,n,r,u,c,f,h){var v=[];e=m(e);for(var A=e.next(),N={};!A.done;N={ua:void 0},A=e.next()){if(N.ua=A.value,t.includes(N.ua.encryptionScheme)||t.push(N.ua.encryptionScheme),N.ua.keySystem=="org.w3.clearkey"&&N.ua.licenseServerUri.startsWith("data:application/json;base64,")?v.includes(N.ua.licenseServerUri)||v.push(N.ua.licenseServerUri):n.includes(N.ua.licenseServerUri)||n.push(N.ua.licenseServerUri),u.includes(N.ua.serverCertificateUri)||u.push(N.ua.serverCertificateUri),N.ua.serverCertificate&&(r.some(function(J){return function(fe){return no(fe,J.ua.serverCertificate)}}(N))||r.push(N.ua.serverCertificate)),N.ua.initData){A=m(N.ua.initData);for(var B=A.next(),z={};!B.done;z={mf:void 0},B=A.next())z.mf=B.value,c.some(function(J){return function(fe){var pe=J.mf;return fe.keyId&&fe.keyId==pe.keyId?!0:fe.initDataType==pe.initDataType&&no(fe.initData,pe.initData)}}(z))||c.push(z.mf)}if(N.ua.keyIds)for(A=m(N.ua.keyIds),B=A.next();!B.done;B=A.next())f.add(B.value);if(N.ua.keySystemUris&&h)for(N=m(N.ua.keySystemUris),A=N.next();!A.done;A=N.next())h.add(A.value)}if(v.length==1)n.push(v[0]);else if(0<v.length){for(t=[],v=m(v),r=v.next();!r.done;r=v.next())r=g.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,T(r.keys));v=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+g.btoa(v))}}function Jt(e,t,n,r){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(u)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[u]&&(e.keySystem=r[u]),g.cast&&g.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Bn=1,kn=5,mr=.5;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function vr(e,t,n){this.h=e,this.i=t,this.g=n}function bt(e,t){return Re(function(n){if(n.g==1)return R(n,UE(e.g,t,e.h.drm.preferredKeySystems),2);if(e.h.streaming.dontChooseCodecs||Im(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes),!t.variants.some(Fl))throw new Xe(2,4,4032);return n.return(qt(e,t))})}function tn(e,t){var n=e.h.restrictions;e=e.i;var r=!1;t=m(t.variants);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=u.allowedByApplication;u.allowedByApplication=xc(u,n,e),c!=u.allowedByApplication&&(r=!0)}return r}function qt(e,t){var n=tn(e,t);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var u=m(t.variants),c=u.next();!c.done;c=u.next())c=c.value,mn(e,r.keySystem,c.video),mn(e,r.keySystem,c.audio);bn(e,t)}return n}function mn(e,t,n){if(n){n=m(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=m(r.initData||[]);for(var u=r.next();!u.done;u=r.next())u=u.value,Pe(e.g,u.initDataType,u.initData)}}}function bn(e,t){e=e.g?e.g.Id():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,u=!1,c=new Set,f=new Set;t=m(t.variants);for(var h=t.next();!h.done;h=t.next()){h=h.value;var v=[];h.audio&&v.push(h.audio),h.video&&v.push(h.video),v=m(v);for(var A=v.next();!A.done;A=v.next())if(A=A.value,A.keyIds.size){A=m(A.keyIds);for(var N=A.next();!N.done;N=A.next()){N=N.value;var B=e[n?"00":N];B?Zn.includes(B)&&f.add(B):c.add(N)}}h.allowedByApplication?h.allowedByKeySystem&&(r=!0):u=!0}if(!r)throw e={hasAppRestrictions:u,missingKeys:Array.from(c),restrictedKeyStatuses:Array.from(f)},new Xe(2,4,4012,e)}var Zn=["output-restricted","internal-error"];function Fn(){}function qn(e,t){if(t){var n=Yn[t.toLowerCase()];if(n)return n}throw new Xe(2,4,4e3,e,t)}ne("shaka.media.ManifestParser",Fn),Fn.unregisterParserByMime=function(e){delete Yn[e]},Fn.registerParserByMime=function(e,t){Yn[e]=t},Fn.registerParserByExtension=function(){gr("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Fn.AccessibilityPurpose={bk:"visually impaired",tj:"hard of hearing"};var Yn={};function en(e,t){function n(){c=!0}function r(N){h.push(N),W(N)}var u=e=nr(e),c=!1,f,h=[],v=[];if(new V().box("moov",r).box("trak",r).box("mdia",r).box("minf",r).box("stbl",r).R("stsd",function(N){f=N,h.push(N),ee(N)}).R("encv",n).R("enca",n).R("dvav",function(N){v.push({box:N,Oa:1701733238})}).R("dva1",function(N){v.push({box:N,Oa:1701733238})}).R("dvh1",function(N){v.push({box:N,Oa:1701733238})}).R("dvhe",function(N){v.push({box:N,Oa:1701733238})}).R("dvc1",function(N){v.push({box:N,Oa:1701733238})}).R("dvi1",function(N){v.push({box:N,Oa:1701733238})}).R("hev1",function(N){v.push({box:N,Oa:1701733238})}).R("hvc1",function(N){v.push({box:N,Oa:1701733238})}).R("avc1",function(N){v.push({box:N,Oa:1701733238})}).R("avc3",function(N){v.push({box:N,Oa:1701733238})}).R("ac-3",function(N){v.push({box:N,Oa:1701733217})}).R("ec-3",function(N){v.push({box:N,Oa:1701733217})}).R("ac-4",function(N){v.push({box:N,Oa:1701733217})}).R("mp4a",function(N){v.push({box:N,Oa:1701733217})}).parse(e),c)return e;if(v.length==0||!f)throw za(e),new Xe(2,3,3019,t);v.reverse(),t=m(v);for(var A=t.next();!A.done;A=t.next())A=A.value,u=Nn(u,f,A.box,h,A.Oa);return xr()&&Rl()?(t=new Uint8Array(e.byteLength+u.byteLength),t.set(u),t.set(e,u.byteLength),t):u}function Nn(e,t,n,r,u){var c=On.value(),f=e.subarray(n.start,n.start+n.size),h=ln(f),v=new Uint8Array(n.size+c.byteLength);for(v.set(f,0),f=ln(v),f.setUint32(4,u),v.set(c,n.size),u=h.getUint32(4),f.setUint32(n.size+16,u),Pn(v,0,v.byteLength),u=new Uint8Array(e.byteLength+v.byteLength),n=Rr()||xr()?n.start:n.start+n.size,c=e.subarray(n),u.set(e.subarray(0,n)),u.set(v,n),u.set(c,n+v.byteLength),e=m(r),r=e.next();!r.done;r=e.next())r=r.value,Pn(u,r.start,r.size+v.byteLength);return v=ln(u,t.start),t=ie(t),e=v.getUint32(t),v.setUint32(t,e+1),u}function Pn(e,t,n){e=ln(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var On=new Un(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function Dn(e,t,n,r,u,c,f){this.M=e,this.Ha=t,this.va=n,this.Kc=r===void 0?null:r,this.timescale=u===void 0?null:u,this.g=c===void 0?null:c,this.aesKey=f===void 0?null:f,this.mimeType=this.codecs=null}Dn.prototype.Yb=function(){return this.Ha},Dn.prototype.Wb=function(){return this.va},Dn.prototype.cd=function(){return this.g};function Ct(e,t){return e===t?!0:e&&t?e.Yb()==t.Yb()&&e.Wb()==t.Wb()&&fn(e.M().sort(),t.M().sort())&&no(e.cd(),t.cd()):e==t}ne("shaka.media.InitSegmentReference",Dn),Dn.prototype.getEndByte=Dn.prototype.Wb,Dn.prototype.getStartByte=Dn.prototype.Yb;function et(e,t,n,r,u,c,f,h,v,A,N,B,z,J,fe,pe){for(A=A===void 0?[]:A,J=J===void 0?Ve:J,this.startTime=e,this.j=this.endTime=t,this.F=n,this.Ha=r,this.va=u,this.$=c,this.timestampOffset=f,this.appendWindowStart=h,this.appendWindowEnd=v,this.g=A,this.tilesLayout=N===void 0?"":N,this.B=B===void 0?null:B,this.h=z===void 0?null:z,this.status=J,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=fe===void 0?null:fe,this.A=null,this.i=0,this.o=pe===void 0?!1:pe,this.G=this.s=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.Hg();this.o&&this.g.length&&this.g[this.g.length-1].Gg(),this.C=this.bandwidth=this.mimeType=this.codecs=null}p=et.prototype,p.M=function(){return this.F()},p.getStartTime=function(){return this.startTime},p.Kh=function(){return this.endTime},p.Yb=function(){return this.Ha},p.Wb=function(){return this.va},p.bi=function(){return this.tilesLayout},p.ai=function(){return this.B},p.Zb=function(){return this.status},p.ui=function(){this.status=tt},p.xf=function(){this.preload=!0},p.isPreload=function(){return this.preload},p.Jc=function(){this.l=!1},p.li=function(){return this.l},p.Hg=function(){this.s=!0},p.ni=function(){return this.s},p.Gg=function(){this.G=!0},p.mi=function(){return this.G},p.Fg=function(){this.m=!0},p.hi=function(){return this.m},p.bh=function(e){this.A=e},p.$h=function(){return this.A},p.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},p.Uf=function(e){this.h==null?de("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},p.Xi=function(e){this.C=e},p.cd=function(){return this.C};function zt(e,t){e.$=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())zt(n.value,t)}ne("shaka.media.SegmentReference",et),et.prototype.getSegmentData=et.prototype.cd,et.prototype.setSegmentData=et.prototype.Xi,et.prototype.syncAgainst=et.prototype.Uf,et.prototype.offset=et.prototype.offset,et.prototype.getThumbnailSprite=et.prototype.$h,et.prototype.setThumbnailSprite=et.prototype.bh,et.prototype.hasByterangeOptimization=et.prototype.hi,et.prototype.markAsByterangeOptimization=et.prototype.Fg,et.prototype.isLastPartial=et.prototype.mi,et.prototype.markAsLastPartial=et.prototype.Gg,et.prototype.isPartial=et.prototype.ni,et.prototype.markAsPartial=et.prototype.Hg,et.prototype.isIndependent=et.prototype.li,et.prototype.markAsNonIndependent=et.prototype.Jc,et.prototype.isPreload=et.prototype.isPreload,et.prototype.markAsPreload=et.prototype.xf,et.prototype.markAsUnavailable=et.prototype.ui,et.prototype.getStatus=et.prototype.Zb,et.prototype.getTileDuration=et.prototype.ai,et.prototype.getTilesLayout=et.prototype.bi,et.prototype.getEndByte=et.prototype.Wb,et.prototype.getStartByte=et.prototype.Yb,et.prototype.getEndTime=et.prototype.Kh,et.prototype.getStartTime=et.prototype.getStartTime,et.prototype.getUris=et.prototype.M;var Ve=0,tt=1;et.Status={fj:Ve,$j:tt,Bj:2};function Lt(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function yn(e){return!e||Lt(e)?null:e.length?e.end(e.length-1):null}function Cn(e,t){return!e||!e.length||Lt(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function yr(e,t){if(!e||!e.length||Lt(e))return 0;var n=0;e=m(gi(e));for(var r=e.next();!r.done;r=e.next()){var u=r.value;r=u.start,u=u.end,u>t&&(n+=u-Math.max(r,t))}return n}function oi(e,t,n){return!e||!e.length||Lt(e)?null:(e=gi(e).findIndex(function(r,u,c){return r.start>t&&(u==0||c[u-1].end-t<=n)}),0<=e?e:null)}function gi(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Xr(){}function Lo(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function zi(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function bs(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function ol(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=Cr(nr(e.data,1,n)),u=e.data[2+n],c=e.data.subarray(3+n).indexOf(0);if(c===-1)return null;var f=Cr(nr(e.data,3+n,c)),h;return r==="-->"?h=Cr(nr(e.data,4+n+c)):h=Ni(e.data.subarray(4+n+c)),t.mimeType=r,t.pictureType=u,t.description=f,t.data=h,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Cr(nr(e.data,1,r)),e=Cr(nr(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Cr(nr(e.data,1,r)),e=Cr(nr(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Cr(nr(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Ni(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Cr(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Cr(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ni(e.data),t):null}function la(e){for(var t=0,n=[];Lo(e,t);){var r=bs(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var u=e.subarray(t),c=bs(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:c,data:u.subarray(10,10+c)},(c=ol(u))&&n.push(c),t+=u.size+10}zi(e,t)&&(t+=10)}return n}function ko(e,t){for(var n=t=t===void 0?0:t,r=0;Lo(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=bs(e,t+6),zi(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}ne("shaka.util.Id3Utils",Xr),Xr.getID3Data=ko,Xr.getID3Frames=la;function Cs(e,t){var n=null,r=null,u=null,c=e.P();return t&1&&(u=e.Pc()),t&2&&e.skip(4),t&8&&(n=e.P()),t&16&&(r=e.P()),{trackId:c,Zc:n,Fd:r,dk:u}}function To(e,t){return t==1?(t=e.P(),e=e.P(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.P()}}function $a(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.P(),e.skip(4),e=e.la(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Cu(e,t,n){var r=e.P(),u=[],c=null;n&1&&(c=e.P()),n&4&&e.skip(4);for(var f=0;f<r;f++){var h={Kf:null,sampleSize:null,ke:null};n&256&&(h.Kf=e.P()),n&512&&(h.sampleSize=e.P()),n&1024&&e.skip(4),n&2048&&(h.ke=t==0?e.P():e.Pg()),u.push(h)}return{hk:r,Tg:u,Dh:c}}function ca(e){e.skip(6),e.skip(2),e.skip(8);var t=e.la();return e.skip(2),e.skip(2),e.skip(2),e=e.la()+e.la()/65536,{channelCount:t,sampleRate:e}}function Zl(e){return e=e.P(),{codec:Te(e)}}function Xf(e){var t=null,n=null,r=e.rb(4),u=String.fromCharCode(r[0]);if(u+=String.fromCharCode(r[1]),u+=String.fromCharCode(r[2]),u+=String.fromCharCode(r[3]),u==="nclx"){switch(e.la()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.la(),e.la(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,vd:n}}function Ru(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function ji(e){return(10>e?"0":"")+e}function xa(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=nr(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Qs(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new k(n,0).P(),e.g=8*r,e.i-=r)}function xt(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Qs(e)}e.h<<=t,e.g-=t}function Wt(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Qs(e),n=t-n,0<n?r<<n|Wt(e,n):r}function Xn(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Qs(e),t+Xn(e)}function Jn(e){xt(e,1+Xn(e))}function Tn(e){var t=Xn(e);return Wt(e,t+1)-1}function br(e){return e=Tn(e),1&e?1+e>>>1:-1*(e>>>1)}function Sn(e){return Wt(e,1)===1}function or(e){return Wt(e,8)}function Jr(e,t){for(var n=8,r=8,u=0;u<t;u++)r!==0&&(r=br(e),r=(n+r+256)%256),n=r===0?n:r}function Js(e){return or(e),Tn(e),Tn(e)}ne("shaka.util.ExpGolomb",xa);function kr(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}p=kr.prototype,p.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},p.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,JE(e)),n=e.length-(e.length+t)%188,r=!1,u=t;u<n;u+=188)if(e[u]==71){var c=!!(e[u+1]&64),f=((e[u+1]&31)<<8)+e[u+2];if(1<(e[u+3]&48)>>4){var h=u+5+e[u+4];if(h==u+188)continue}else h=u+4;switch(f){case 0:c&&(h+=e[h]+1),this.G=(e[h+10]&31)<<8|e[h+11];break;case 17:case 8191:break;case this.G:c&&(h+=e[h]+1),c=e,f={audio:-1,video:-1,Od:-1,audioCodec:"",videoCodec:""};var v=h+3+((c[h+1]&15)<<8|c[h+2])-4;for(h+=12+((c[h+10]&15)<<8|c[h+11]);h<v;){var A=(c[h+1]&31)<<8|c[h+2],N=(c[h+3]&15)<<8|c[h+4];switch(c[h]){case 6:if(0<N)for(var B=h+5,z=N;2<z;){var J=c[B+1]+2;switch(c[B]){case 5:var fe=oa(c.subarray(B+2,B+J));f.audio==-1&&fe==="Opus"?(f.audio=A,f.audioCodec="opus"):f.video==-1&&fe==="AV01"&&(f.video=A,f.videoCodec="av1");break;case 106:f.audio==-1&&(f.audio=A,f.audioCodec="ac3");break;case 122:f.audio==-1&&(f.audio=A,f.audioCodec="ec3");break;case 124:f.audio==-1&&(f.audio=A,f.audioCodec="aac");break;case 127:f.audioCodec=="opus"&&(fe=null,c[B+2]===128&&(fe=c[B+3]),fe!=null&&(this.F={channelCount:fe&15?fe&15:2,Ah:fe,sampleRate:48e3}))}B+=J,z-=J}break;case 15:f.audio==-1&&(f.audio=A,f.audioCodec="aac");break;case 17:f.audio==-1&&(f.audio=A,f.audioCodec="aac-loas");break;case 21:f.Od==-1&&(f.Od=A);break;case 27:f.video==-1&&(f.video=A,f.videoCodec="avc");break;case 3:case 4:f.audio==-1&&(f.audio=A,f.audioCodec="mp3");break;case 36:f.video==-1&&(f.video=A,f.videoCodec="hvc");break;case 129:f.audio==-1&&(f.audio=A,f.audioCodec="ac3");break;case 132:case 135:f.audio==-1&&(f.audio=A,f.audioCodec="ec3")}h+=N+5}c=f,c.video!=-1&&(this.I=c.video,this.m=c.videoCodec),c.audio!=-1&&(this.B=c.audio,this.A=c.audioCodec),c.Od!=-1&&(this.C=c.Od),r&&!this.H&&(r=!1,u=t-188),this.H=!0;break;case this.I:h=e.subarray(h,u+188),c?this.j.push([h]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(h);break;case this.B:h=e.subarray(h,u+188),c?this.i.push([h]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(h);break;case this.C:h=e.subarray(h,u+188),c?this.l.push([h]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(h);break;default:r=!0}}return this};function QE(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var u=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=u),n.pts=AR(u,e.s),e.s=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=AR(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}p.Ai=function(e){return gr("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Df(e)},p.Df=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var u=e.byteLength,c=1;this.m=="hvc"&&(c=2);for(var f=n||0,h=[],v=-1,A=0,N,B=0;B<u;++B){var z=e[B];if(z){if(2<=f&&z==1){if(t&&!h.length&&v==-1&&(z=B-(3<f?3:f),n&&z!=0&&(z=e.subarray(0,z),t.data=hi(t.data,z),t.fullData=hi(t.fullData,z))),0<=v?(f=B-((3<f?3:f)+1),h.push({data:e.subarray(v+c,f+1),fullData:e.subarray(v,f+1),type:A,time:r})):t&&!h.length&&(v=B-f,0<v&&(v=e.subarray(0,v),t.data=hi(t.data,v),t.fullData=hi(t.fullData,v))),B>=u-c)return h;B++,v=B,A=this.m=="hvc"?e[B]>>1&63:e[B]&31}f=0}else f++;B>=u-1&&0<=v&&0<=f&&(N={data:e.subarray(v+c,u),fullData:e.subarray(v,u),type:A,time:r})}return N&&h.push(N),!h.length&&t&&(t.data=hi(t.data,e),t.fullData=hi(t.fullData,e)),h},p.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=hi.apply(co,T(n.value)),(n=QE(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:la(n.data),dts:n.dts,pts:n.pts});return e},p.Vb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=m(this.i),n=t.next();!n.done;n=t.next()){var r=hi.apply(co,T(n.value)),u=QE(this,r);n=this.h.length?this.h[this.h.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!n||n.pts!=u.pts&&n.dts!=u.dts)?(this.h.length&&u.dts<(n.dts||0)&&(e=!0),this.h.push(u)):this.h.length&&(r=u?u.data:r)&&(n=this.h.pop(),n.data=hi(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(c,f){var h=(c.pts||0)-(f.pts||0);return(c.dts||0)-(f.dts||0)||h}))}return this.h},p.nc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=m(this.j),r=n.next();!r.done;r=n.next()){var u=hi.apply(co,T(r.value)),c=QE(this,u);r=this.g.length?this.g[this.g.length-1]:null,c&&c.pts!=null&&c.dts!=null&&(!r||r.pts!=c.pts&&r.dts!=c.dts)?(this.g.length&&c.dts<(r.dts||0)&&(t=!0),this.g.push(c)):this.g.length&&(u=c?c.data:u)&&(r=this.g.pop(),r.data=hi(r.data,u),this.g.push(r))}if(e){for(n=[],r=m(this.g),u=r.next();!u.done;u=r.next())if(u=u.value,u.nalus=this.Df(u,f,void 0),u.nalus.length){n.push(u);var f=u.nalus[u.nalus.length-1]}this.g=n}t&&(this.g=this.g.sort(function(h,v){var A=(h.pts||0)-(v.pts||0);return(h.dts||0)-(v.dts||0)||A}))}return e?this.g:(e=this.g,this.g=[],e)},p.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Vb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.nc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},p.$c=function(){return{audio:this.A,video:this.m}},p.Md=function(){for(var e=[],t=m(this.nc()),n=t.next();!n.done;n=t.next())e.push.apply(e,T(n.value.nalus));return e},p.ei=function(){gr("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.kf();return{height:e.height,width:e.width}},p.kf=function(){return this.m=="hvc"?R8(this):C8(this)};function wR(e){var t=e.nc();return 1<t.length&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function C8(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Md();if(!n.length||(n=n.find(function(J){return J.type==7}),!n))return t;n=new xa(n.data);var r=or(n),u=or(n),c=or(n);if(Jn(n),x8.includes(r)){var f=Tn(n);if(f===3&&xt(n,1),Jn(n),Jn(n),xt(n,1),Sn(n)){f=f!==3?8:12;for(var h=0;h<f;h++)Sn(n)&&(6>h?Jr(n,16):Jr(n,64))}}if(Jn(n),f=Tn(n),f===0)Tn(n);else if(f===1)for(xt(n,1),Jn(n),Jn(n),f=Tn(n),h=0;h<f;h++)Jn(n);Jn(n),xt(n,1),f=Tn(n),h=Tn(n);var v=Wt(n,1);v===0&&xt(n,1),xt(n,1);var A=0,N=0,B=0,z=0;return Sn(n)&&(A=Tn(n),N=Tn(n),B=Tn(n),z=Tn(n)),t.height=String((2-v)*(h+1)*16-2*B-2*z),t.width=String(16*(f+1)-2*A-2*N),t.codec="avc1."+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2)+("0"+c.toString(16).toUpperCase()).slice(-2),t.frameRate=wR(e),t}function R8(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Md();if(!n.length||(n=n.find(function(Qe){return Qe.type==33}),!n))return t;var r=new xa(n.fullData,!0);or(r),or(r),Wt(r,4);var u=Wt(r,3);Sn(r);var c=Wt(r,2),f=Wt(r,1),h=Wt(r,5),v=Wt(r,32);n=or(r);for(var A=or(r),N=or(r),B=or(r),z=or(r),J=or(r),fe=or(r),pe=[],Ee=[],Le=0;Le<u;Le++)pe.push(Sn(r)),Ee.push(Sn(r));if(0<u)for(Le=u;8>Le;Le++)Wt(r,2);for(Le=0;Le<u;Le++)pe[Le]&&Wt(r,88),Ee[Le]&&or(r);Tn(r),u=Tn(r),u==3&&Wt(r,1),pe=Tn(r),Ee=Tn(r);var Fe=Le=0,it=0,Ue=0;return Sn(r)&&(Le+=Tn(r),Fe+=Tn(r),it+=Tn(r),Ue+=Tn(r)),t.width=String(pe-(Le+Fe)*(u===1||u===2?2:1)),t.height=String(Ee-(it+Ue)*(u===1?2:1)),r=function(Qe){for(var rt=0,dt=0;32>dt;dt++)rt|=(Qe>>dt&1)<<31-dt;return rt>>>0}(v),f=f==1?"H":"L",c="hvc1"+("."+["","A","B","C"][c]+h),c+="."+r.toString(16).toUpperCase(),c+="."+f+fe,J&&(c+="."+J.toString(16).toUpperCase()),z&&(c+="."+z.toString(16).toUpperCase()),B&&(c+="."+B.toString(16).toUpperCase()),N&&(c+="."+N.toString(16).toUpperCase()),A&&(c+="."+A.toString(16).toUpperCase()),n&&(c+="."+n.toString(16).toUpperCase()),t.codec=c,t.frameRate=wR(e),t}function AR(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function op(e){return!(0>JE(e))}function JE(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}ne("shaka.util.TsParser",kr),kr.syncOffset=JE,kr.probe=op,kr.prototype.getVideoInfo=kr.prototype.kf,kr.prototype.getVideoResolution=kr.prototype.ei,kr.prototype.getVideoNalus=kr.prototype.Md,kr.prototype.getCodecs=kr.prototype.$c,kr.prototype.getStartTime=kr.prototype.getStartTime,kr.prototype.getVideoData=kr.prototype.nc,kr.prototype.getAudioData=kr.prototype.Vb,kr.prototype.getMetadata=kr.prototype.getMetadata,kr.prototype.parseNalus=kr.prototype.Df,kr.prototype.parseAvcNalus=kr.prototype.Ai,kr.prototype.parse=kr.prototype.parse,kr.prototype.clearData=kr.prototype.clearData,kr.Timescale=9e4;var x8=[100,110,122,244,44,83,86,118,128,138,139,134];function ap(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&Ke("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,gr("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Ke("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(Ke("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Ke(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function IR(e){e.g&&e.i.classList.add("shaka-hidden")}ap.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function bR(e,t,n){var r=0,u=-1;switch(t.mimeType){case"video/webm":r=1;break;case"video/mp4":r=2}switch(n){case"DASH":u=1;break;case"HLS":u=0}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(u))}ne("shaka.lcevc.Dec",ap),ap.prototype.release=ap.prototype.release;function CR(e,t,n,r){var u=this;this.i=e,this.aa=n,this.A=null,this.ba=t,this.h={},this.F={},this.Da={},this.g=null,this.fa=!1,this.T=r||null,this.l={},this.s=new Tt,this.j={},this.G=null,this.K=new Lr,this.L="",this.sa=!1,this.m=RR(this,this.K),this.C=!1,this.H=new jl(function(){return M8(u)}),this.B=!1,this.X="UNKNOWN",this.Ea=this.Fa=!1,this.za=new Lr,this.o=!1,this.ta=!0,this.ka=this.N=this.oa=this.O=this.I=this.ea=null,this.ga=new Lr}function RR(e,t){if(g.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.s.D(n,"startstreaming",function(){e.ta=!0}),e.s.D(n,"endstreaming",function(){e.ta=!1}),e.s.pa(n,"sourceopen",function(){URL.revokeObjectURL(e.L),t.resolve()}),e.s.pa(e.i,"playing",function(){e.sa=!0}),e.L=ev(n),e.i.src=e.L,n}return n=new MediaSource,e.s.pa(n,"sourceopen",function(){URL.revokeObjectURL(e.L),t.resolve()}),e.s.pa(e.i,"playing",function(){e.sa=!0}),e.L=ev(n),e.i.src=e.L,n}function N8(e,t){var n,r,u,c,f,h,v,A,N,B,z;return Re(function(J){if(J.g==1)return e.createSegmentIndex?R(J,e.createSegmentIndex(),2):J.u(2);if(!e.segmentIndex)return J.return(!1);if(e.segmentIndex.getNumReferences()==0)return J.return(!0);for(n=Mi,r=new Set,u=m(e.segmentIndex),c=u.next();!c.done;c=u.next())if(f=c.value,h=f.mimeType||e.mimeType||"",v=f.codecs||e.codecs||"",A=h+":"+v,!r.has(A)){if(r.add(A),t==n.wa){if(N=Di(h,v),!Ac(N))return J.return(!1)}else if(t==n.ja?v=Is(v):t==n.Y&&(v=tl(v,h)),B=Bh(e,h,v),z=Qu(h,v),!Ft(B)&&!wu(z))return J.return(!1)}return J.return(!0)})}p=CR.prototype,p.destroy=function(){return this.H.destroy()};function M8(e){var t,n,r,u,c,f,h,v;return Re(function(A){if(A.g==1){t=[];for(n in e.l)for(r=e.l[n],u=r[0],e.l[n]=r.slice(0,1),u&&t.push(u.p.catch(Am)),c=m(r.slice(1)),f=c.next();!f.done;f=c.next())h=f.value,h.p.reject(new Xe(2,7,7003,void 0));e.g&&t.push(e.g.destroy());for(v in e.j)t.push(e.j[v].destroy());return R(A,Promise.all(t),2)}e.s&&(e.s.release(),e.s=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.m=null,e.g=null,e.ba=null,e.h={},e.j={},e.G=null,e.l={},e.T=null,e.I=null,e.aa=null,X(A)})}p.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var u=this,c,f,h,v,A;return Re(function(N){switch(N.g){case 1:return c=Mi,R(N,u.K,2);case 2:u.B=t,u.X=n,u.Fa=r,u.Ea=!u.B&&u.X=="HLS"&&!u.Fa,u.I=null,f=m(e.keys()),h=f.next();case 3:if(h.done){N.u(0);break}return v=h.value,A=e.get(v),R(N,$m(u,v,A,A.codecs),6);case 6:u.o?(u.l[c.Y]=[],u.l[c.ja]=[]):u.l[v]=[],h=f.next(),N.u(3)}})};function $m(e,t,n,r){var u,c,f,h,v,A,N,B,z,J,fe,pe;return Re(function(Ee){switch(Ee.g){case 1:return u=Mi,c=Be,f=L,R(Ee,N8(n,t),2);case 2:if(f.call(c,Ee.h,"Type negotiation should happen before MediaSourceEngine.init!"),h=Di(n.mimeType,r),t==u.wa){Xm(e,h,e.B,n.external),Ee.u(0);break}if(v=e.A.forceTransmux,(!Ft(h)||!e.B&&Iu.includes(h))&&(v=!0),A=Qu(n.mimeType,r),!v){Ee.u(4);break}if(N=bo(u.Y,(r||"").split(",")),B=bo(u.ja,(r||"").split(",")),!N||!B){Ee.u(5);break}return e.o=!0,R(Ee,$m(e,u.Y,n,N),6);case 6:return R(Ee,$m(e,u.ja,n,B),7);case 7:return Ee.return();case 5:(z=wu(A))&&(J=z(),e.j[t]=J,h=J.convertCodecs(t,A));case 4:fe=h+e.A.addExtraFeaturesToSourceBuffer(h),Zr(e.H);try{pe=e.m.addSourceBuffer(fe)}catch(Le){throw new Xe(2,3,3015,Le,"The mediaSource_ status was "+e.m.readyState+" expected 'open'",null)}e.B&&(pe.mode=G8),e.s.D(pe,"error",function(){var Le=e.l[t][0];Le.p.reject(new Xe(2,3,3014,e.i.error?e.i.error.code:0,Le.uri))}),e.s.D(pe,"updateend",function(){return al(e,t)}),e.h[t]=pe,e.F[t]=h,e.Da[t]=!!n.drmInfos.length,X(Ee)}})}p.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function Xm(e,t,n,r){e.g||(e.g=new As(e.ba),e.g&&(e.g.A=e.A.modifyCueCallback));var u=e.g;r=r||e.fa,e=e.X,t=="application/cea-608"||t=="application/cea-708"?u.i=null:(u.i=(0,_i[t])(),u.i.setSequenceMode?u.i.setSequenceMode(n):gr("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):gr("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.B=r)}function xR(e){return e.C?!1:e.m?e.m.readyState=="ended":!0}function e1(e,t){return e.C||!Object.keys(e.h).length?e=null:t==_r?e=e.g.g:(e=Qf(e,t),e=!e||Lt(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function sp(e,t){return e.C?null:t==_r?e.g.h:yn(Qf(e,t))}function D8(e,t,n){return e.C?0:t==_r?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Qf(e,t),yr(e,n))}p.xb=function(){var e={total:this.C?[]:gi(this.i.buffered),audio:this.C?[]:gi(Qf(this,"audio")),video:this.C?[]:gi(Qf(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Qf(e,t){try{return e.h[t].buffered}catch(n){return null}}function P8(e,t,n,r,u,c){var f=null,h=nr(n);if(Iu.includes(u))c=la(h),c.length&&r&&((t=c.find(function(B){return B.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(f=Math.round(t.data)/1e3),e.aa.onMetadata([{cueTime:r.startTime,data:h,frames:c,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(u.includes("/mp4")&&r&&r.timestampOffset==0&&r.$&&r.$.timescale){var v=r.$.timescale;if(!isNaN(v)){var A=0,N=!1;new V().box("moof",W).box("traf",W).R("tfdt",function(B){A=To(B.reader,B.version).baseMediaDecodeTime/v,N=!0,B.parser.stop()}).parse(n,!0),N&&(f=A)}}else!u.includes("/mp4")&&!u.includes("/webm")&&op(h)&&(e.I?e.I.clearData():e.I=new kr,h=e.I.parse(h),t=h.getStartTime(t),t!=null&&(f=t),h=h.getMetadata(),h.length)&&e.aa.onMetadata(h,c,r?r.endTime:null);return f}function Qm(e,t,n,r,u,c,f,h,v,A){f=f===void 0?!1:f,h=h===void 0?!1:h,v=v===void 0?!1:v,A=A===void 0?!1:A;var N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt;return Re(function(gt){switch(gt.g){case 1:if(N=Mi,t!=N.wa){gt.u(2);break}if(!e.B){gt.u(3);break}return R(gt,e.za,4);case 4:B=gt.h,e.g.s=B;case 3:return R(gt,Tm(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.M()[0]:null),5);case 5:return gt.return();case 2:if(A||!e.o){gt.u(6);break}return R(gt,Qm(e,N.Y,n,r,u,c,f,h,v,!0),7);case 7:return R(gt,Qm(e,N.ja,n,r,u,c,f,h,v,!0),8);case 8:return gt.return();case 6:if(!e.h[t])return gt.return();if(z=e.h[t].timestampOffset,J=e.F[t],e.j[t]&&(J=e.j[t].getOriginalMimeType()),r&&(fe=P8(e,t,n,r,J,z),fe!=null&&(e.O==null&&t==N.ja&&(e.O=fe,e.oa=r.startTime,e.N!=null&&(pe=0,e.oa==e.ka&&(pe=e.O-e.N),e.ga.resolve(pe))),e.N==null&&t==N.Y&&(e.N=fe,e.ka=r.startTime,e.O!=null&&(Ee=0,e.oa==e.ka&&(Ee=e.O-e.N),e.ga.resolve(Ee))),Le=r.startTime-fe,Fe=Math.abs(z-Le),(.001<=Fe||f||h)&&(!v||0<Le||!z)&&(z=Le,e.Ea&&(ro(e,t,function(){return Jf(e,t)},null),ro(e,t,function(){return ed(e,t,z)},null))),it=t==N.ja||!(N.ja in e.h),e.B&&it&&e.za.resolve(z))),c&&t==N.ja&&(e.g||Xm(e,"application/cea-608",e.B,!1),e.G||(Ue=J.split(";",1)[0],e.G=new At(Ue)),r?(Qe=e.G.i(n),Qe.length&&wm(e.g,Qe,r.startTime,r.endTime,z)):e.G.init(n,h)),!e.j[t]){gt.u(9);break}return R(gt,e.j[t].transmux(n,u,r,e.m.duration,t),10);case 10:n=gt.h;case 9:if(n=U8(e,n,r?r.startTime:null,t,r?r.M()[0]:null),!r||!e.B||t==N.wa){gt.u(11);break}if(!f&&!h){gt.u(11);break}if(rt=r.startTime,e.X!="HLS"||e.o||t!=N.Y||!e.h[N.ja]){gt.u(13);break}return R(gt,e.ga,14);case 14:dt=gt.h,.1<Math.abs(dt)&&(rt-=dt);case 13:ro(e,t,function(){return Jf(e,t)},null),ro(e,t,function(){return ed(e,t,rt)},null);case 11:return R(gt,ro(e,t,function(){var kt=n;if(t=="video"&&e.T){var It=e.T;It.g&&It.g.appendBuffer(kt,"video",It.o,-z)}e.h[t].appendBuffer(kt)},r?r.M()[0]:null),15);case 15:X(gt)}})}function O8(e,t){var n=sp(e,"video")||0;jh(e.g,t,n)}function L8(e){e.g&&jh(e.g,"",0)}p.remove=function(e,t,n){var r=this,u;return Re(function(c){return c.g==1?(u=Mi,e==u.wa?R(c,r.g.remove(t,n),0):R(c,ro(r,e,function(){return Jm(r,e,t,n)},null),4)):r.o?R(c,ro(r,u.Y,function(){return Jm(r,u.Y,t,n)},null),0):c.u(0)})};function NR(e,t){var n;return Re(function(r){return r.g==1?(n=Mi,t==n.wa?e.g?R(r,e.g.remove(0,1/0),0):r.return():R(r,ro(e,t,function(){return Jm(e,t,0,e.m.duration)},null),4)):e.o?R(r,ro(e,n.Y,function(){return Jm(e,n.Y,0,e.m.duration)},null),0):r.u(0)})}p.flush=function(e){var t=this,n;return Re(function(r){return r.g==1?(n=Mi,e==n.wa?r.return():R(r,ro(t,e,function(){t.i.currentTime-=.001,al(t,e)},null),2)):t.o?R(r,ro(t,n.Y,function(){var u=n.Y;t.i.currentTime-=.001,al(t,u)},null),0):r.u(0)})};function k8(e,t,n,r,u,c,f,h,v){var A,N,B;return Re(function(z){return z.g==1?(A=Mi,t==A.wa?(c||(e.g.s=n),LE(e.g,r,u),z.return()):(N=[],R(z,Z8(e,t,f,h,v),2))):(B=z.h,B||(N.push(ro(e,t,function(){return Jf(e,t)},null)),e.o&&N.push(ro(e,A.Y,function(){return Jf(e,A.Y)},null))),c||(N.push(ro(e,t,function(){return ed(e,t,n)},null)),e.o&&N.push(ro(e,A.Y,function(){return ed(e,A.Y,n)},null))),N.push(ro(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=u,e.h[t].appendWindowStart=r,al(e,t)},null)),e.o&&N.push(ro(e,A.Y,function(){var J=A.Y;e.h[J].appendWindowStart=0,e.h[J].appendWindowEnd=u,e.h[J].appendWindowStart=r,al(e,J)},null)),R(z,Promise.all(N),0))})}function F8(e,t,n){var r;return Re(function(u){return u.g==1?(r=Mi,t==r.wa?u.return():(t==r.ja&&(e.za=new Lr),ro(e,t,function(){return Jf(e,t)},null),e.o&&ro(e,r.Y,function(){return Jf(e,r.Y)},null),R(u,ro(e,t,function(){return ed(e,t,n)},null),2))):e.o?R(u,ro(e,r.Y,function(){return ed(e,r.Y,n)},null),0):u.u(0)})}p.endOfStream=function(e){var t=this;return Re(function(n){return R(n,t1(t,function(){xR(t)||t.m.readyState==="closed"||(e?t.m.endOfStream(e):t.m.endOfStream())}),0)})},p.Za=function(e){var t=this;return Re(function(n){return R(n,t1(t,function(){if(e<t.m.duration)for(var r in t.h){var u={start:function(){},p:new Lr,uri:null};t.l[r].unshift(u)}t.m.duration=e,t.ea=e}),0)})},p.getDuration=function(){return this.m.duration};function Jm(e,t,n,r){r<=n?al(e,t):e.h[t].remove(n,r)}function Jf(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,al(e,t)}function ed(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,al(e,t)}function al(e,t){if(!e.C){var n=e.l[t][0];n&&(n.p.resolve(),n1(e,t))}}function ro(e,t,n,r){return Zr(e.H),n={start:n,p:new Lr,uri:r},e.l[t].push(n),e.l[t].length==1&&MR(e,t),n.p}function t1(e,t){var n,r,u,c,f,h,v;return Re(function(A){switch(A.g){case 1:Zr(e.H),n=[],r={};for(u in e.h)r={ready:void 0},r.ready=new Lr,c={start:function(N){return function(){return N.ready.resolve()}}(r),p:r.ready,uri:null},e.l[u].push(c),n.push(r.ready),e.l[u].length==1&&c.start();return ce(A,2),R(A,Promise.all(n),4);case 4:me(A,3);break;case 2:throw f=Ce(A),f;case 3:return ce(A,5,6),R(A,t(),6);case 6:Je(A);for(h in e.h)n1(e,h);we(A,0);break;case 5:throw v=Ce(A),new Xe(2,3,3015,v,e.i.error||"No error in the media element",null)}})}function n1(e,t){e.l[t].shift(),MR(e,t)}function MR(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new Xe(2,3,3017,t)):n.p.reject(new Xe(2,3,3015,r,e.i.error||"No error in the media element",n.uri)),n1(e,t)}}function U8(e,t,n,r,u){var c=n==null,f=e.Da[r];return n=e.aa.Oh(),(c=e.A.insertFakeEncryptionInInit&&c&&f)&&(n=Vr(n),c=di()||Rr()||vu()||xr()&&Rl()&&n),c&&Ll(e.F[r])=="mp4"&&(t=en(t,u)),t}function B8(e,t,n,r){return ro(e,t,function(){t!==_r&&(Gn()&&(e.j[t]&&(e.j[t].destroy(),delete e.j[t]),r&&(e.j[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.F[t]=n),al(e,t))},null)}function j8(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt;return Re(function(It){switch(It.g){case 1:n=Mi,e.C=!0,e.o=!1,r=e.i.currentTime,u=e.i.autoplay,c=e.i.paused,e.sa&&(e.i.autoplay=!1),oe(It,2),e.s.Qa(),f=[];for(h in e.j)f.push(e.j[h].destroy());for(v in e.l)for(A=e.l[v],N=A[0],e.l[v]=A.slice(0,1),N&&f.push(N.p.catch(Am)),B=m(A.slice(1)),z=B.next();!z.done;z=B.next())J=z.value,J.p.reject(new Xe(2,7,7003,void 0));for(fe in e.h){pe=e.h[fe];try{e.m.removeSourceBuffer(pe)}catch(Ut){}}return R(It,Promise.all(f),4);case 4:return e.j={},e.h={},Ee=e.m.duration,e.K=new Lr,e.m=RR(e,e.K),R(It,e.K,5);case 5:!isNaN(Ee)&&Ee?e.m.duration=Ee:!isNaN(e.ea)&&e.ea&&(e.m.duration=e.ea),Le=new Lr,Fe=e.m.sourceBuffers,it=t.size,Ue=0,Qe=function(){Ue++,Ue===it&&(Le.resolve(),e.s.$a(Fe,"addsourcebuffer",Qe))},e.s.D(Fe,"addsourcebuffer",Qe),rt=m(t.keys()),dt=rt.next();case 6:return dt.done?(e.i.currentTime=r,R(It,Le,2)):(gt=dt.value,kt=t.get(gt),R(It,$m(e,gt,kt,kt.codecs),9));case 9:e.o?(e.l[n.Y]=[],e.l[n.ja]=[]):e.l[gt]=[],dt=rt.next(),It.u(6);break;case 2:Je(It),e.C=!1,Zr(e.H),e.s.pa(e.i,"canplaythrough",function(){e.H.g||(e.i.autoplay=u,c||e.i.play())}),we(It,0)}})}function DR(e,t){return t1(e,function(){return j8(e,t)})}function Z8(e,t,n,r,u){var c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it;return Re(function(Ue){return Ue.g==1?(c=Mi,t==c.wa?Ue.return(!1):(f=_o(Oo(e.F[t])),h=Ca(e.F[t]),A=!1,N=Di(n,r),B=e.A.forceTransmux,(!Ft(N)||!e.B&&Iu.includes(N))&&(B=!0),B&&(z=Qu(n,r),J=wu(z))&&(v=J(),fe=bo(c.Y,(r||"").split(",")),pe=bo(c.ja,(r||"").split(",")),fe&&pe?(A=!0,Ee=pe,t==c.Y&&(Ee=fe),N=v.convertCodecs(t,Qu(n,Ee))):N=v.convertCodecs(t,z)),Le=_o(Oo(N)),Fe=Ca(N),f===Le&&h===Fe?(e.j[t]&&!v?(e.j[t].destroy(),delete e.j[t]):!e.j[t]&&v?e.j[t]=v:v&&(e.j[t]&&e.j[t].transmux!=v.transmux?(e.j[t].destroy(),delete e.j[t],e.j[t]=v):v.destroy()),Ue.return(!1)):(it=!0,(e.o||A&&v&&!e.j[t])&&(it=!1),it&&e.A.codecSwitchingStrategy==="smooth"&&Gn()?R(Ue,B8(e,t,N,v),3):(v&&v.destroy(),R(Ue,DR(e,u),3))))):Ue.return(!0)})}function q8(e,t,n,r){if(t==_r)var u=!1;else{u=_o(Oo(e.F[t]));var c=Ca(e.F[t]),f=Di(n,r),h=e.A.forceTransmux;(!Ft(f)||!e.B&&Iu.includes(f))&&(h=!0),n=Qu(n,r),h&&(h=wu(n))&&(h=h(),f=h.convertCodecs(t,n),h.destroy()),t=_o(Oo(f)),f=Ca(f),u=u!==t||c!==f}return u?e.A.codecSwitchingStrategy!=="smooth"||!Gn()||e.o:!1}var ev=g.URL.createObjectURL,G8="sequence";function rr(e,t,n){this.i=e,this.B=t,this.o=this.j=1/0,this.h=1,this.g=this.l=null,this.A=0,this.G=!0,this.H=0,this.C=n===void 0?!0:n,this.F=0,this.s=!1,this.m=e}p=rr.prototype,p.getDuration=function(){return this.j},p.Qh=function(){return this.h},p.$g=function(e){this.i=e},p.Za=function(e){this.j=e},p.Vh=function(){return this.i},p.Yg=function(e){this.A=e},p.vc=function(e){this.G=e},p.ne=function(e){this.o=e},p.Ld=function(){return this.o},p.Of=function(e){this.B=e},p.Jh=function(){return this.B},p.Lg=function(e,t){if(e.length!=0){var n=(Date.now()+this.A)/1e3;if(e=e.filter(function(u){return u.start+t<n}),e.length!=0){var r=e[e.length-1].end+t;this.Zd(e[0].start+t),this.h=e.reduce(function(u,c){return Math.max(u,c.end-c.start)},this.h),this.g=Math.max(this.g,r),this.i!=null&&this.C&&!this.s&&(this.i=n-this.g-this.h)}}},p.qd=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.A)/1e3;e=m(e);for(var u=e.next();!u.done;u=e.next())u=u.value,r<u.startTime||(t=Math.min(t,u.startTime),n=Math.max(n,u.endTime),this.h=Math.max(this.h,u.endTime-u.startTime));this.Zd(t),this.g=Math.max(this.g,n),this.i!=null&&this.C&&!this.s&&(this.i=r-this.g-this.h)}},p.Kg=function(e,t){this.Zd(e),t==1/0||this.U()||(this.g=Math.max(this.g,t))},p.Rh=function(){return this.g},p.Ud=function(){this.s=!0},p.oi=function(){return this.s},p.Zg=function(e){this.m=e},p.Nh=function(){return this.m},p.Zd=function(e){this.l=this.l==null?e:Math.min(this.l,e)},p.yf=function(e){this.h=Math.max(this.h,e)},p.offset=function(e){this.l!=null&&(this.l+=e),this.g!=null&&(this.g+=e)},p.U=function(){return this.j==1/0&&!this.G},p.pc=function(){return this.j!=1/0&&!this.G},p.nb=function(){return Math.max(this.H,this.Xb()-this.o)},p.eh=function(e){this.H=e},p.Xb=function(){return this.U()||this.pc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.h-this.i)+this.F,this.j):this.g?Math.min(this.g,this.j):this.j},p.bd=function(e){var t=Math.max(this.l,this.H);return this.o==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Xb()-this.o+e,this.zb()))},p.Jb=function(){return this.bd(0)},p.zb=function(){return Math.max(0,this.Xb()-(this.U()||this.pc()?this.B:0))},p.lh=function(){return!(this.i==null||this.g!=null&&this.C)},p.Xg=function(e){this.F=e},p.Hh=function(){return this.F},ne("shaka.media.PresentationTimeline",rr),rr.prototype.getAvailabilityTimeOffset=rr.prototype.Hh,rr.prototype.setAvailabilityTimeOffset=rr.prototype.Xg,rr.prototype.usingPresentationStartTime=rr.prototype.lh,rr.prototype.getSeekRangeEnd=rr.prototype.zb,rr.prototype.getSeekRangeStart=rr.prototype.Jb,rr.prototype.getSafeSeekRangeStart=rr.prototype.bd,rr.prototype.getSegmentAvailabilityEnd=rr.prototype.Xb,rr.prototype.setUserSeekStart=rr.prototype.eh,rr.prototype.getSegmentAvailabilityStart=rr.prototype.nb,rr.prototype.isInProgress=rr.prototype.pc,rr.prototype.isLive=rr.prototype.U,rr.prototype.offset=rr.prototype.offset,rr.prototype.notifyMaxSegmentDuration=rr.prototype.yf,rr.prototype.notifyMinSegmentStartTime=rr.prototype.Zd,rr.prototype.getInitialProgramDateTime=rr.prototype.Nh,rr.prototype.setInitialProgramDateTime=rr.prototype.Zg,rr.prototype.isStartTimeLocked=rr.prototype.oi,rr.prototype.lockStartTime=rr.prototype.Ud,rr.prototype.getMaxSegmentEndTime=rr.prototype.Rh,rr.prototype.notifyPeriodDuration=rr.prototype.Kg,rr.prototype.notifySegments=rr.prototype.qd,rr.prototype.notifyTimeRange=rr.prototype.Lg,rr.prototype.getDelay=rr.prototype.Jh,rr.prototype.setDelay=rr.prototype.Of,rr.prototype.getSegmentAvailabilityDuration=rr.prototype.Ld,rr.prototype.setSegmentAvailabilityDuration=rr.prototype.ne,rr.prototype.setStatic=rr.prototype.vc,rr.prototype.setClockOffset=rr.prototype.Yg,rr.prototype.getPresentationStartTime=rr.prototype.Vh,rr.prototype.setDuration=rr.prototype.Za,rr.prototype.setPresentationStartTime=rr.prototype.$g,rr.prototype.getMaxSegmentDuration=rr.prototype.Qh,rr.prototype.getDuration=rr.prototype.getDuration;function PR(e,t,n){this.j=n,this.l=e,this.s=OR(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}PR.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function H8(e,t){e.i=t}function V8(e){this.g=e}function OR(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(gi(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function r1(e,t,n,r,u){var c=this;this.A=u,this.g=e,this.B=t,this.m=n,this.l=new Tt,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.s=!1,this.l.D(e,"waiting",function(){return i1(c)}),this.o=new on(function(){i1(c)}).Ra(this.m.gapJumpTimerTime)}r1.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.o!=null&&(this.o.stop(),this.o=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},r1.prototype.Bf=function(){this.s=!0,i1(this)};function i1(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,r=OR(n),u=n.g.currentTime,c=Date.now()/1e3;(t.g!=u||t.s!=r)&&(t.m=c,t.g=u,t.s=r,t.h=!1),u=c-t.m,(r=u>=t.A&&r&&!t.h)&&(t.i(t.g,u),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new jn("stalldetected"))),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=oi(n,t,e.m.gapDetectionThreshold),r!=null&&(r!=0||e.s))&&(u=n.start(r),(navigator.userAgent.match(/Edge\//)||Rr()||di())&&(u=Math.ceil(100*(u+e.m.gapPadding))/100),u>=e.B.zb()||.001>u-t||(r!=0&&n.end(r-1),e.g.currentTime=u,t==e.i&&(e.i=u),e.C++,e.A(new jn("gapjumped"))))}}}function td(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=K8.value().get(t),n.pa(e,t,r))}var K8=new Un(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function LR(e,t,n,r){var u=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return u.l==null&&(u.l=r()),u.l},this.o=!1,this.h=new Tt,this.i=new BR(e),td(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){FR(u,u.j())})}LR.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function o1(e){return e.o?e.g.currentTime:e.j()}function kR(e,t){0<e.g.readyState?jR(e.i,t):td(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){FR(e,e.j())})}function FR(e,t){.001>Math.abs(e.g.currentTime-t)?UR(e):(e.h.pa(e.g,"seeking",function(){UR(e)}),jR(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function UR(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function BR(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new on(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}BR.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function jR(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Ra(.1)}function ZR(e){this.h=e,this.j=!1,this.g=null,this.i=new Tt}p=ZR.prototype,p.ready=function(){function e(){if(t.g==null||t.g==0&&t.h.duration!=1/0)t.j=!0;else{var n=t.h.currentTime,r=t.g;0>t.g&&(r=Math.max(0,n+t.g)),n!=r?(t.i.pa(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=r):t.j=!0}}var t=this;td(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},p.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},p.Ee=function(e){this.g=this.j?this.g:e},p.wd=function(){return(this.j?this.h.currentTime:this.g)||0},p.dg=function(){return 0},p.cg=function(){return 0},p.Jg=function(){};function qR(e,t,n,r,u,c){var f=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=u,this.s=null,this.o=z8(e,n,c),this.j=new r1(e,t.presentationTimeline,n,this.o,c),this.h=new LR(e,function(){e:{var h=f.j;h.j=!0,h.s=!1;var v=o1(f.h);if(h=HR(f,v),.001<Math.abs(h-v)){if(v=!1,!ri()||ri()&&qu())v=!0;else{var A=Date.now()/1e3;(!f.s||f.s<A-1)&&(f.s=A,v=!0)}if(v){kR(f.h,h),h=void 0;break e}}f.A(),h=void 0}return h},function(h){var v=f.j;v.g.seeking&&!v.j&&(v.j=!0,v.i=h)},function(){var h=r;return h==null?h=1/0>f.g.getDuration()?f.g.Jb():f.g.zb():0>h&&(h=f.g.zb()+h),GR(f,VR(f,h))}),this.m=new on(function(){if(f.i.readyState!=0&&!f.i.paused){var h=o1(f.h),v=f.g.Jb(),A=f.g.zb();3>A-v&&(v=A-3),h<v&&(h=HR(f,h),f.i.currentTime=h)}})}p=qR.prototype,p.ready=function(){this.m.Ra(.25)},p.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},p.Ee=function(e){kR(this.h,e)},p.wd=function(){var e=o1(this.h);return 0<this.i.readyState&&!this.i.paused?VR(this,e):e},p.dg=function(){return this.o?this.o.o:0},p.cg=function(){return this.j.C},p.Jg=function(){this.j.Bf()};function GR(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function HR(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,u=e.g.Jb(),c=e.g.zb(),f=e.g.getDuration();3>c-u&&(u=c-3);var h=e.g.bd(n),v=e.g.bd(r);return n=e.g.bd(n+r),t>=f?GR(e,t):t>c?c:t<u?Cn(e.i.buffered,v)?v:n:t>=h||Cn(e.i.buffered,t)?t:n}function VR(e,t){var n=e.g.Jb();return t<n?n:(e=e.g.zb(),t>e?e:t)}function z8(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new PR(new V8(e),t.stallThreshold,n),H8(t,function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}function Mr(e){this.g=e,this.m=null,this.i=0,this.o=!1}p=Mr.prototype,p.getNumReferences=function(){return this.g.length},p.getNumEvicted=function(){return this.i},p.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},p.vi=function(){this.o=!0},p.Gb=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)};function eu(e){return e.g[0]||null}p.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],u=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<u)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},p.get=function(e){return this.g.length==0?null:(e-=this.i,0>e||e>=this.g.length?null:this.g[e])},p.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},p.Wd=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,T(e))}},p.od=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.g.length==0||r.endTime>n.g[0].startTime)}),this.Wd(e),this.Ga(t)},p.Ga=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},p.Ec=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new et(e.startTime,t,e.F,e.Ha,e.va,e.$,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},p.re=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new on(function(){var r=t();r?n.g.push.apply(n.g,T(r)):(n.m.stop(),n.m=null)}),this.m.Ra(e))},Mr.prototype[Symbol.iterator]=function(){return this.Ib(0)},Mr.prototype.Ib=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;var u=this.get(r);n?r++:r--;var c=-1;if(u&&0<u.g.length)for(var f=u.g.length-1;0<=f;--f){var h=u.g[f];if(e>=h.startTime&&e<h.endTime){if(!t){for(;f&&!h.l;)f--,h=u.g[f];if(!h.l)return de("No independent partial segment found!"),null}n?r--:r++,c=f-1;break}}return new Na(this,r,c,n)};function a1(e,t,n){return e=new et(e,e+t,function(){return n},0,null,null,e,e,e+t),new Mr([e])}ne("shaka.media.SegmentIndex",Mr),Mr.forSingleSegment=a1,Mr.prototype.getIteratorForTime=Mr.prototype.Ib,Mr.prototype.updateEvery=Mr.prototype.re,Mr.prototype.fit=Mr.prototype.Ec,Mr.prototype.evict=Mr.prototype.Ga,Mr.prototype.mergeAndEvict=Mr.prototype.od,Mr.prototype.offset=Mr.prototype.offset,Mr.prototype.get=Mr.prototype.get,Mr.prototype.find=Mr.prototype.find,Mr.prototype.markImmutable=Mr.prototype.vi,Mr.prototype.release=Mr.prototype.release,Mr.prototype.getNumEvicted=Mr.prototype.getNumEvicted,Mr.prototype.getNumReferences=Mr.prototype.getNumReferences;function Na(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}Na.prototype.Tc=function(e){this.reverse=e},Na.prototype.Ch=function(){return this.h},Na.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Na.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},ne("shaka.media.SegmentIterator",Na),Na.prototype.next=Na.prototype.next,Na.prototype.current=Na.prototype.current,Na.prototype.currentPosition=Na.prototype.Ch,Na.prototype.setReverse=Na.prototype.Tc;function Ti(){Mr.call(this,[]),this.h=[]}Y(Ti,Mr),p=Ti.prototype,p.clone=function(){var e=new Ti;return e.h=this.h.slice(),e.i=this.i,e},p.release=function(){for(var e=m(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},p.Gb=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.Gb(e)},p.find=function(e){for(var t=this.i,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.find(e);if(u!=null)return u+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},p.get=function(e){for(var t=this.i,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.get(e-t);if(u)return u;u=r.getNumReferences(),t+=r.getNumEvicted()+u}return null},p.offset=function(){},p.Wd=function(){},p.Ga=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.Ga(e);for(;1<this.h.length&&this.h[0].getNumReferences()==0;)e=this.h.shift(),this.i+=e.getNumEvicted(),e.release()},p.od=function(){},p.Ec=function(){},p.re=function(){},ne("shaka.media.MetaSegmentIndex",Ti),Ti.prototype.updateEvery=Ti.prototype.re,Ti.prototype.fit=Ti.prototype.Ec,Ti.prototype.mergeAndEvict=Ti.prototype.od,Ti.prototype.evict=Ti.prototype.Ga,Ti.prototype.merge=Ti.prototype.Wd,Ti.prototype.offset=Ti.prototype.offset,Ti.prototype.get=Ti.prototype.get,Ti.prototype.find=Ti.prototype.find,Ti.prototype.forEachTopLevelReference=Ti.prototype.Gb,Ti.prototype.release=Ti.prototype.release;function up(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Kd(),this.h=new on(function(){t.g.Ig(.25*t.i)})}up.prototype.release=function(){this.set(this.lc()),this.h&&(this.h.stop(),this.h=null),this.g=null},up.prototype.set=function(e){this.i=e,KR(this)},up.prototype.lc=function(){return this.g.lc()};function KR(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Kd()!=t&&e.g.Rf(t);return}catch(n){}e.h.Ra(.25),e.g.Kd()!=0&&e.g.Rf(0)}function zR(e){var t=this;this.h=e,this.g=new Set,this.i=new on(function(){YR(t,!1)}).Ra(.25)}zR.prototype.release=function(){this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function YR(e,t){for(var n=m(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function Y8(){this.g=null,this.h=[]}function s1(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function W8(e){function t(c){return{timestamp:c.timestamp,state:c.state,duration:c.duration}}for(var n=[],r=m(e.h),u=r.next();!u.done;u=r.next())n.push(t(u.value));return e.g&&n.push(t(e.g)),n}function $8(){this.i=this.h=null,this.g=[]}function u1(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function tv(){this.hc=this.Eg=this.A=this.B=this.I=this.C=this.s=this.j=this.H=this.m=this.i=this.T=this.X=this.L=this.N=this.O=this.l=this.o=NaN,this.K=0,this.F=this.G=NaN,this.g=new Y8,this.h=new $8}function nv(e,t,n,r){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=r}function X8(e,t){e.l=t,e=m(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function lp(e,t,n){if(n=n===void 0?!1:n,e.i.segmentIndex&&(e.g||(e.g=e.i.segmentIndex.Ib(t,!0,e.o)),e.g)){for(n&&e.g.next();e.h.size<e.m&&(t=e.g.next().value,!!t);)n=!0,t.isPreload()&&t.va!=null&&(n=!1),t.Zb()==2&&(n=!1),n&&t.$&&WR(e,t.$),n&&!e.h.has(t)&&(n=new c1(e.l),QR(n,t,e.i),e.h.set(t,n));l1(e)}}function WR(e,t){if(e.i.segmentIndex&&!Array.from(e.j.keys()).some(function(r){return Ct(r,t)})){var n=new c1(e.l);QR(n,t,e.i),e.j.set(t,n)}}function $R(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&cp(e,n)}function tu(e){$R(e,e.h),$R(e,e.j),e.g=null}nv.prototype.Ga=function(e,t){t=t===void 0?!1:t;for(var n=m(this.h.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&cp(this,r);t&&l1(this)},nv.prototype.Tc=function(e){this.o=e,this.g&&this.g.Tc(e)};function l1(e){for(var t=Array.from(e.h.keys()),n=m(e.j.keys()),r=n.next(),u={};!r.done;u={nf:void 0},r=n.next())u.nf=r.value,t.some(function(c){return function(f){return Ct(f.$,c.nf)}}(u))||cp(e,u.nf)}function XR(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var r=n.pop();r&&cp(e,r)}l1(e)}function Q8(e,t){t&&t!==e.i&&(tu(e),e.i=t)}function cp(e,t){var n=e.h;t instanceof Dn&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function c1(e){this.g=e,this.ce=this.Tf=null}function QR(e,t,n){var r=new Uint8Array(0);e.ce=e.g(t,n,function(u){return Re(function(c){if(c.g==1)return 0<r.byteLength?r=hi(r,u):r=u,e.Tf?R(c,e.Tf(r),3):c.u(0);r=new Uint8Array(0),X(c)})})}c1.prototype.abort=function(){this.ce&&this.ce.abort()};function f1(e){Nr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new on(function(){for(var n=t.i(),r=m(t.g),u=r.next();!u.done;u=r.next())u=u.value,u.endTime<n.start&&(t.g.delete(u),u=new jn("regionremove",new Map([["region",u]])),t.dispatchEvent(u))}).Ra(2)}Y(f1,Nr),f1.prototype.release=function(){this.g.clear(),this.h.stop(),Nr.prototype.release.call(this)};function rv(e){Nr.call(this),this.g=new Map,this.h=e}Y(rv,Nr),rv.prototype.release=function(){this.g.clear(),Nr.prototype.release.call(this)};function J8(e,t){var n=e.g.get(t);return n||(n={sd:[],Oe:null,contentType:t},e.g.set(t,n)),n}function ej(e,t,n){var r=J8(e,t.contentType);tj(e,r),e={Kc:t,position:n},r=r.sd,t=r.findIndex(function(u){return u.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}rv.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var r=n.Oe;e:{for(var u=n.sd,c=u.length-1;0<=c;c--){var f=u[c];if(f.position<=e){u=f.Kc;break e}}u=null}c=u&&!(r===u||r&&u&&r.bandwidth==u.bandwidth&&r.audioSamplingRate==u.audioSamplingRate&&r.codecs==u.codecs&&r.contentType==u.contentType&&r.frameRate==u.frameRate&&r.height==u.height&&r.mimeType==u.mimeType&&r.channelsCount==u.channelsCount&&r.pixelAspectRatio==u.pixelAspectRatio&&r.width==u.width),f=u&&r&&u.label&&r.label&&r.label!==u.label;var h=u&&r&&u.language&&r.language&&r.language!==u.language;r=u&&r&&u.roles&&r.roles&&!fn(r.roles,u.roles),(f||h||r)&&JR(this,e,u.contentType)&&(n.Oe=u,r=new jn("audiotrackchange",new Map([["quality",u],["position",e]])),this.dispatchEvent(r)),c&&JR(this,e,u.contentType)&&(n.Oe=u,JSON.stringify(u),n=new jn("qualitychange",new Map([["quality",u],["position",e]])),this.dispatchEvent(n))}};function JR(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function tj(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,u=t.sd;t.sd=u.filter(function(c,f){return!(c.position<=n&&f+1<u.length&&u[f+1].position<=n||c.position>=r)})}else t.sd=[]}function iv(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function ov(e){var t=Ca(e),n=t.split("/")[0];return e=Oo(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,vd:null,colorGamut:null,frameRate:null}}function nj(e,t){function n(Ue){Ee=Ue.name;var Qe=Ue.reader;Qe.skip(24);var rt=Qe.la(),dt=Qe.la();Qe.skip(50),B=String(rt),N=String(dt),Ue.reader.ra()&&W(Ue)}function r(Ue){var Qe=ca(Ue.reader);z=Qe.channelCount,J=Qe.sampleRate,u(Ue.name)}function u(Ue){switch(Ue=Ue.toLowerCase(),Ue){case"avc1":case"avc3":f.push(Ue+".42E01E"),v=!0;break;case"hev1":case"hvc1":f.push(Ue+".1.6.L93.90"),v=!0;break;case"dvh1":case"dvhe":f.push(Ue+".05.04"),v=!0;break;case"vp09":f.push(Ue+".00.10.08"),v=!0;break;case"av01":f.push(Ue+".0.01M.08"),v=!0;break;case"mp4a":c.push("mp4a.40.2"),h=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":c.push(Ue),h=!0}}var c=[],f=[],h=!1,v=!1,A=null,N=null,B=null,z=null,J=null,fe=null,pe=null,Ee;if(new V().box("moov",W).box("trak",W).box("mdia",W).R("mdhd",function(Ue){A=$a(Ue.reader,Ue.version).language}).box("minf",W).box("stbl",W).R("stsd",ee).box("mp4a",function(Ue){var Qe=ca(Ue.reader);z=Qe.channelCount,J=Qe.sampleRate,Ue.reader.ra()?W(Ue):u(Ue.name)}).box("esds",function(Ue){Ue=Ue.reader;for(var Qe="mp4a",rt,dt;Ue.ra();){rt=Ue.S();for(var gt=Ue.S();gt&128;)gt=Ue.S();if(rt==3)Ue.la(),gt=Ue.S(),gt&128&&Ue.la(),gt&64&&Ue.skip(Ue.S()),gt&32&&Ue.la();else if(rt==4)dt=Ue.S(),Ue.skip(12);else if(rt==5)break}dt&&(Qe+="."+Ru(dt),rt==5&&Ue.ra()&&(rt=Ue.S(),dt=(rt&248)>>3,dt===31&&Ue.ra()&&(dt=32+((rt&7)<<3)+((Ue.S()&224)>>5)),Qe+="."+dt)),c.push(Qe),h=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dva1",n).box("dvav",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("avcC",function(Ue){var Qe=Ee||"";switch(Ee){case"dvav":Qe="avc3";break;case"dva1":Qe="avc1"}Ue=Ue.reader,Ue.skip(1),Ue=Qe+"."+Ru(Ue.S())+Ru(Ue.S())+Ru(Ue.S()),f.push(Ue),v=!0}).box("hvcC",function(Ue){var Qe=Ee||"";switch(Ee){case"dvh1":Qe="hvc1";break;case"dvhe":Qe="hev1"}var rt=Ue.reader;rt.skip(1),Ue=rt.S();var dt=["","A","B","C"][Ue>>6],gt=Ue&31,kt=rt.P(),It=(Ue&32)>>5?"H":"L";Ue=[rt.S(),rt.S(),rt.S(),rt.S(),rt.S(),rt.S()],rt=rt.S();for(var Ut=0,Nt=0;32>Nt&&(Ut|=kt&1,Nt!=31);Nt++)Ut<<=1,kt>>=1;for(Qe=Qe+("."+dt+gt)+("."+Ru(Ut,!0)),Qe+="."+It+rt,dt="",gt=Ue.length;gt--;)((It=Ue[gt])||dt)&&(dt="."+It.toString(16).toUpperCase()+dt);Qe+=dt,f.push(Qe),v=!0}).box("dvcC",function(Ue){var Qe=Ee||"";switch(Ee){case"hvc1":Qe="dvh1";break;case"hev1":Qe="dvhe";break;case"avc1":Qe="dva1";break;case"avc3":Qe="dvav";break;case"av01":Qe="dav1"}var rt=Ue.reader;rt.skip(2),Ue=rt.S(),rt=rt.S(),f.push(Qe+"."+ji(Ue>>1&127)+"."+ji(Ue<<5&32|rt>>3&31)),v=!0}).box("dvvC",function(Ue){var Qe=Ee||"";switch(Ee){case"hvc1":Qe="dvh1";break;case"hev1":Qe="dvhe";break;case"avc1":Qe="dva1";break;case"avc3":Qe="dvav";break;case"av01":Qe="dav1"}var rt=Ue.reader;rt.skip(2),Ue=rt.S(),rt=rt.S(),f.push(Qe+"."+ji(Ue>>1&127)+"."+ji(Ue<<5&32|rt>>3&31)),v=!0}).R("vpcC",function(Ue){var Qe=Ee||"",rt=Ue.reader;Ue=rt.S();var dt=rt.S();rt=rt.S()>>4&15,f.push(Qe+"."+ji(Ue)+"."+ji(dt)+"."+ji(rt)),v=!0}).box("av1C",function(Ue){var Qe=Ee||"";switch(Ee){case"dav1":Qe="av01"}var rt=Ue.reader;rt.skip(1),Ue=rt.S(),rt=rt.S();var dt=Ue>>>5,gt=(rt&64)>>6;f.push(Qe+"."+dt+"."+ji(Ue&31)+(rt>>>7?"H":"M")+"."+ji(dt===2&&gt?(rt&32)>>5?12:10:gt?10:8)+"."+((rt&16)>>4)+"."+((rt&8)>>3)+((rt&4)>>2)+(rt&3)+"."+ji(1)+"."+ji(1)+"."+ji(1)+".0"),v=!0}).box("enca",re).box("encv",H).box("sinf",W).box("frma",function(Ue){Ue=Zl(Ue.reader).codec,u(Ue)}).box("colr",function(Ue){f=f.map(function(dt){if(dt.startsWith("av01.")){var gt=Ue.reader,kt=gt.xa(),It=gt.rb(4),Ut=String.fromCharCode(It[0]);if(Ut+=String.fromCharCode(It[1]),Ut+=String.fromCharCode(It[2]),Ut+=String.fromCharCode(It[3]),Ut==="nclx"){It=gt.la(),Ut=gt.la();var Nt=gt.la(),nn=gt.S()>>7,Kt=dt.split(".");Kt.length==10&&(Kt[6]=ji(It),Kt[7]=ji(Ut),Kt[8]=ji(Nt),Kt[9]=String(nn),dt=Kt.join("."))}gt.seek(kt)}return dt});var Qe=Xf(Ue.reader),rt=Qe.colorGamut;fe=Qe.vd,pe=rt}).parse(e||t,!0),!c.length&&!f.length)return null;var Le=h&&!v,Fe=new Map;if(v){var it=new At("video/mp4");for(e&&it.init(e),it.i(t),e=m(it.j()),t=e.next();!t.done;t=e.next())t=t.value,Fe.set(t,t);it.g()}return{type:Le?"audio":"video",mimeType:Le?"audio/mp4":"video/mp4",codecs:d1(c.concat(f)).join(", "),language:A,height:N,width:B,channelCount:z,sampleRate:J,closedCaptions:Fe,vd:fe,colorGamut:pe,frameRate:null}}function d1(e){var t=new Set,n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u=zs(r);t.has(u)||(n.push(r),t.add(u))}return t=Xu("audio",n),r=Xu("video",n),e=Xu(_r,n),r=rj(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function rj(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?Ft('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function ij(e){var t=null;return new V().box("moov",W).box("trak",W).box("mdia",W).box("minf",W).box("stbl",W).R("stsd",ee).box("encv",H).box("enca",re).box("sinf",W).box("schi",W).R("tenc",function(n){n=n.reader,n.S(),n.S(),n.S(),n.S(),t=za(n.rb(16))}).parse(e,!0),t}function h1(e,t,n){var r,u,c,f,h;return Re(function(v){if(v.g==1)return r=t,r.cryptoKey?v.u(2):R(v,r.fetchKey(),3);if(u=r.iv,!u)for(u=nr(new ArrayBuffer(16)),c=r.firstMediaSequenceNumber+n,f=u.byteLength-1;0<=f;f--)u[f]=c&255,c>>=8;return t.blockCipherMode=="CBC"?h={name:"AES-CBC",iv:u}:h={name:"AES-CTR",counter:u,length:64},v.return(g.crypto.subtle.decrypt(h,r.cryptoKey,e))})}function nd(e,t,n,r,u){return e=Bi(e,r,u),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function ex(e,t){var n=this;this.g=t,this.l=e,this.h=null,this.F=new Map,this.B=1,this.s=this.j=null,this.I=0,this.G=!1,this.i=new Map,this.C=!1,this.K=null,this.A=!1,this.m=new jl(function(){return oj(n)}),this.L=Date.now()/1e3,this.o=new Map,this.H={projection:null,hfov:null},this.O=0,this.N=1/0}p=ex.prototype,p.destroy=function(){return this.m.destroy()};function oj(e){var t,n,r,u,c,f,h;return Re(function(v){if(v.g==1){for(t=[],n=m(e.i.values()),r=n.next();!r.done;r=n.next())u=r.value,fp(u),t.push(dp(u)),u.V&&(tu(u.V),u.V=null);for(c=m(e.o.values()),f=c.next();!f.done;f=c.next())h=f.value,tu(h);return R(v,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.l=null,e.h=null,X(v)})}p.configure=function(e){if(this.h=e,this.K=new $h({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.V&&(tu(t.V),t.V=null),t=m(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,tu(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(_r))&&t.V&&(tu(t.V),t.V=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.V&&(tu(t.V),t.V=null),t=m(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.V?(XR(n.V,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(tu(n.V),n.V=null)):0<e.segmentPrefetchLimit&&(n.V=g1(this,n.stream));e.disableAudioPrefetch||dj(this)};function aj(e,t,n){e.l.presentationTimeline.U()||(e.O=t,e.N=n)}p.start=function(e){var t=this;return Re(function(n){if(n.g==1)return R(n,fj(t,e||new Map),2);Zr(t.m),t.C=!0,X(n)})};function sj(e,t){var n,r,u,c,f,h;Re(function(v){switch(v.g){case 1:return n=Mi,e.I++,r=e.I,ce(v,2),R(v,NR(e.g.ca,n.wa),4);case 4:me(v,3);break;case 2:u=Ce(v),e.g&&e.g.onError(u);case 3:c=Di(t.mimeType,t.codecs),Xm(e.g.ca,c,e.l.sequenceMode,t.external),f=e.g.ca.ba,(f.isTextVisible()||e.h.alwaysStreamText)&&e.I==r&&(h=nx(e,t),e.i.set(n.wa,h),Xa(e,h,0)),X(v)}})}function uj(e){var t=e.i.get(_r);t&&(fp(t),dp(t).catch(function(){}),e.i.delete(_r)),e.s=null}function p1(e,t){for(var n=0>e.g.fb(),r=m(e.i.values()),u=r.next();!u.done;u=r.next())u=u.value,u.ma&&u.ma.Tc(n),u.V&&u.V.Tc(n);for(r=m(e.o.values()),u=r.next();!u.done;u=r.next())u.value.Tc(n);(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.bc&&(rd(e,t,!1,0,!1),n.bc=r):(t=n.bc)&&(n.bc=null,rd(e,t,!0,0,!1)))}function tx(e,t,n,r,u,c){n=n===void 0?!1:n,r=r===void 0?0:r,u=u===void 0?!1:u,c=c===void 0?!1:c,e.j=t,e.C&&(t.video&&rd(e,t.video,n,r,u,c),t.audio&&rd(e,t.audio,n,r,u,c))}function av(e,t){Re(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):R(n,t.createSegmentIndex(),2):n.return();rd(e,t,!0,0,!1),X(n)})}function lj(e,t){for(var n=m(e.F.entries()),r=n.next();!r.done;r=n.next()){var u=m(r.value);r=u.next().value,u=u.next().value,r.includes(t.type)&&(u(),e.F.delete(r))}}function rd(e,t,n,r,u,c){var f=e.i.get(t.type);f||t.type!=_r?f&&(f.bc&&(t.trickModeVideo?(f.bc=t,t=t.trickModeVideo):f.bc=null),f.stream!=t||u)&&(e.o.has(t)?f.V=e.o.get(t):f.V&&Q8(f.V,t),t.type==_r&&(u=Di(t.mimeType,t.codecs),Xm(e.g.ca,u,e.l.sequenceMode,t.external)),!e.o.has(f.stream)&&f.stream.closeSegmentIndex&&(f.La?(u="("+f.type+":"+f.stream.id+")",e.F.has(u)||e.F.set(u,f.stream.closeSegmentIndex)):f.stream.closeSegmentIndex()),f.stream=t,f.ma=null,f.eg=!!c,n?f.Wc?f.ze=!0:f.La?(f.fc=!0,f.Ed=r,f.ze=!0):(fp(f),E1(e,f,!0,r).catch(function(h){e.g&&e.g.onError(h)})):f.La||f.ub||Xa(e,f,0),cj(e,f).catch(function(h){e.g&&e.g.onError(h)})):sj(e,t)}function cj(e,t){var n,r;return Re(function(u){if(u.g==1)return t.jb?(n=t.stream,r=t.jb,n.segmentIndex?u.u(2):R(u,n.createSegmentIndex(),2)):u.return();if(t.jb!=r||t.stream!=n)return u.return();var c=e.g.Jd(),f=sp(e.g.ca,t.type),h=t.stream.segmentIndex.find(t.Na?t.Na.endTime:c),v=h==null?null:t.stream.segmentIndex.get(h);h=v&&v.va?v.va-v.Ha:null,v&&!h&&(h=(v.endTime-v.getStartTime())*(t.stream.bandwidth||0)/8),h?((v=v.$)&&(h+=(v.va?v.va-v.Ha:null)||0),v=e.g.getBandwidthEstimate(),c=8*h/v<(f||0)-c-Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal)||t.jb.h.g>h):c=!1,c&&t.jb.abort(),X(u)})}p.Rc=function(){if(this.g)for(var e=this.g.Jd(),t=m(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var u=this.g.ca;if(u.C?u=!1:r==_r?(u=u.g,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=Qf(u,r),u=Cn(u,e)),!u){if(n.V&&(n.V.g=null),n.type==="audio"){u=m(this.o.values());for(var c=u.next();!c.done;c=u.next())c.value.g=null}n.ma=null,(sp(this.g.ca,r)!=null||n.La)&&sv(this,n),n.jb&&(n.jb.abort(),n.jb=null),r===_r&&(r=this.g.ca,r.G&&r.G.g()),n.Rc=!0}}};function sv(e,t){t.Wc||t.fc||(t.La?(t.fc=!0,t.Ed=0):e1(e.g.ca,t.type)==null?t.ub==null&&Xa(e,t,0):(fp(t),E1(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function fj(e,t){var n,r,u,c,f,h,v,A,N,B;return Re(function(z){if(z.g==1){if(n=Mi,!e.j)throw new Xe(2,5,5006);return r=new Map,u=new Set,e.j.audio&&(r.set(n.Y,e.j.audio),u.add(e.j.audio)),e.j.video&&(r.set(n.ja,e.j.video),u.add(e.j.video)),e.s&&(r.set(n.wa,e.s),u.add(e.s)),c=e.g.ca,R(z,c.init(r,e.l.sequenceMode,e.l.type,e.l.ignoreManifestTimestampsInSegmentsMode),2)}for(Zr(e.m),e.updateDuration(),f=m(r.keys()),h=f.next();!h.done;h=f.next())v=h.value,A=r.get(v),e.i.has(v)||(N=nx(e,A),t.has(A.id)&&(B=t.get(A.id),X8(B,function(J,fe,pe){return uv(J,fe,pe||null,e.h.retryParameters,e.g.Mb)}),N.V=B),e.i.set(v,N),Xa(e,N,0));X(z)})}function nx(e,t){return{stream:t,type:t.type,ma:null,V:g1(e,t),Na:null,qc:null,Td:null,Sd:null,Rd:null,bc:null,endOfStream:!1,La:!1,ub:null,fc:!1,Ed:0,ze:!1,Wc:!1,Rc:!0,Hf:!1,ed:!1,jb:null}}function g1(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===_r&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===_r&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.V)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new nv(e.h.segmentPrefetchLimit,t,function(r,u,c){return uv(r,u,c||null,e.h.retryParameters,e.g.Mb)},0>e.g.fb()):null}function dj(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r=m(e.l.variants),u=r.next(),c={};!u.done;c={mb:void 0},u=r.next())if(c.mb=u.value,c.mb.audio)if(e.o.has(c.mb.audio)){if(u=e.o.get(c.mb.audio),XR(u,t),!(0<t&&n.some(function(h){return function(v){return Ju(h.mb.audio.language,v)}}(c)))){var f=e.i.get(c.mb.audio.type);u!==(f&&f.V)&&tu(u),e.o.delete(c.mb.audio)}}else 0>=t||!n.some(function(h){return function(v){return Ju(h.mb.audio.language,v)}}(c))||!(u=g1(e,c.mb.audio))||(c.mb.audio.segmentIndex||c.mb.audio.createSegmentIndex(),e.o.set(c.mb.audio,u))}p.updateDuration=function(){var e=this.l.presentationTimeline.getDuration();1/0>e?this.g.ca.Za(e):this.g.ca.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function hj(e,t){var n,r,u,c,f,h;return Re(function(v){switch(v.g){case 1:if(Zr(e.m),t.La||t.ub==null||t.Wc)return v.return();if(t.ub=null,!t.fc){v.u(2);break}return R(v,E1(e,t,t.ze,t.Ed),3);case 3:return v.return();case 2:if(lj(e,t),t.stream.segmentIndex){v.u(4);break}return n=t.stream,ce(v,5),R(v,t.stream.createSegmentIndex(),7);case 7:me(v,6);break;case 5:return r=Ce(v),R(v,_1(e,t,r),8);case 8:return v.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.La||t.ub||Xa(e,t,0),v.return();case 4:ce(v,9),u=pj(e,t),u!=null&&(Xa(e,t,u),t.ed=!1),me(v,10);break;case 9:return c=Ce(v),R(v,_1(e,t,c),11);case 11:return v.return();case 10:if(f=Array.from(e.i.values()),!e.C||!f.every(function(A){return A.endOfStream})){v.u(0);break}return R(v,e.g.ca.endOfStream(),13);case 13:Zr(e.m),h=e.g.ca.getDuration(),h!=0&&h<e.l.presentationTimeline.getDuration()&&e.l.presentationTimeline.Za(h),X(v)}})}function pj(e,t){if(v1(t))return O8(e.g.ca,t.stream.originalId||""),null;if(t.type==_r&&L8(e.g.ca),!e.g.ca.ta&&t.type!=_r)return e.h.updateIntervalSeconds/2;var n=e.g.Jd();if(t.type==="audio")for(var r=m(e.o.keys()),u=r.next();!u.done;u=r.next())u=e.o.get(u.value),u.Ga(n,!0),lp(u,n);r=t.Na?t.Na.endTime:n;var c=D8(e.g.ca,t.type,n),f=Math.max(1,Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),h=e.l.presentationTimeline.getDuration()-r;if(u=sp(e.g.ca,t.type),1e-6>h&&u)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(_r))&&v1(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,c>=f)return e.h.updateIntervalSeconds/2;if(f=!t.ma,u=gj(e,t,n,u),!u)return e.h.updateIntervalSeconds;c=!1,f&&t.eg&&(c=!0,t.eg=!1),f=1/0,h=Array.from(e.i.values()),h=m(h);for(var v=h.next();!v.done;v=h.next())v=v.value,v1(v)||v.ma&&!v.ma.current()||(f=Math.min(f,v.Na?v.Na.endTime:n));return r>=f+e.l.presentationTimeline.h?e.h.updateIntervalSeconds:(t.V&&t.ma&&!e.o.has(t.stream)&&(t.V.Ga(u.startTime),lp(t.V,u.startTime)),mj(e,t,n,u,c).catch(function(){}),null)}function gj(e,t,n,r){if(t.ma)return t.ma.current();if(t.Na||r)return n=t.Na?t.Na.endTime:r,e=0>e.g.fb(),t.stream.segmentIndex&&(t.ma=t.stream.segmentIndex.Ib(n,!1,e)),t.ma&&t.ma.next().value;r=e.l.sequenceMode?0:e.h.inaccurateManifestTolerance;var u=Math.max(n-r,0);e=0>e.g.fb();var c=null;return r&&(t.stream.segmentIndex&&(t.ma=t.stream.segmentIndex.Ib(u,!1,e)),c=t.ma&&t.ma.next().value),c||(t.stream.segmentIndex&&(t.ma=t.stream.segmentIndex.Ib(n,!1,e)),c=t.ma&&t.ma.next().value),c}function mj(e,t,n,r,u){var c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue;return Re(function(Qe){switch(Qe.g){case 1:if(c=Mi,f=t.stream,h=t.ma,t.La=!0,ce(Qe,2),r.Zb()==2)throw new Xe(1,1,1011);return R(Qe,Ej(e,t,r,u),4);case 4:return Zr(e.m),e.A?Qe.return():(v=f.mimeType=="video/mp4"||f.mimeType=="audio/mp4",A=g.ReadableStream,e.h.lowLatencyMode&&e.l.isLowLatency&&A&&v&&(e.l.type!="HLS"||r.m)?(z=new Uint8Array(0),fe=J=!1,Ee=function(rt){var dt,gt,kt;return Re(function(It){switch(It.g){case 1:if(J||(fe=!0,Zr(e.m),e.A))return It.return();if(ce(It,2),z=vj(z,rt),dt=!1,gt=0,new V().box("mdat",function(Ut){gt=Ut.size+Ut.start,dt=!0}).parse(z,!1,!0),!dt){It.u(4);break}return kt=z.subarray(0,gt),z=z.subarray(gt),R(It,m1(e,t,n,f,r,kt,!0,u),5);case 5:t.V&&t.ma&&lp(t.V,r.startTime,!0);case 4:me(It,0);break;case 2:pe=Ce(It),X(It)}})},R(Qe,y1(e,t,r,Ee),9)):(N=y1(e,t,r),R(Qe,N,7)));case 7:return B=Qe.h,Zr(e.m),e.A?Qe.return():(Zr(e.m),t.fc?(t.La=!1,Xa(e,t,0),Qe.return()):R(Qe,m1(e,t,n,f,r,B,!1,u),6));case 9:if(Le=Qe.h,pe)throw pe;if(fe){Qe.u(10);break}return J=!0,Zr(e.m),e.A?Qe.return():t.fc?(t.La=!1,Xa(e,t,0),Qe.return()):R(Qe,m1(e,t,n,f,r,Le,!1,u),10);case 10:t.V&&t.ma&&lp(t.V,r.startTime,!0);case 6:if(Zr(e.m),e.A)return Qe.return();t.Na=r,h.next(),t.La=!1,t.Hf=!1,Fe=e.g.ca.xb(),it=Fe[t.type],JSON.stringify(it),t.fc||e.g.Bf(r,t.stream),Xa(e,t,0),me(Qe,0);break;case 2:if(Ue=Ce(Qe),Zr(e.m,Ue),e.A)return Qe.return();if(t.La=!1,Ue.code==7001)t.La=!1,fp(t),Xa(e,t,0),Qe.u(0);else if(t.type==c.wa&&e.h.ignoreTextStreamFailures)e.i.delete(c.wa),Qe.u(0);else if(Ue.code==3017)yj(e,t,Ue),Qe.u(0);else return t.ed=!0,Ue.category==1&&t.V&&cp(t.V,r),Ue.severity=2,R(Qe,_1(e,t,Ue),0)}})}function vj(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function yj(e,t,n){if(!Array.from(e.i.values()).some(function(u){return u!=t&&u.Hf})){if(e.g.disableStream(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else if(4<r)e.B-=.04;else{t.ed=!0,e.A=!0,e.g.onError(n);return}t.Hf=!0}Xa(e,t,4)}function Ej(e,t,n,r){var u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it;return Re(function(Ue){switch(Ue.g){case 1:if(u=Mi,c=t.Na==null&&t.qc==null,f=[],h=Math.max(0,Math.max(n.appendWindowStart,e.O)-.1),v=Math.min(n.appendWindowEnd,e.N)+.01,A=n.codecs||t.stream.codecs,N=zs(A),B=Ca(n.mimeType||t.stream.mimeType),z=n.timestampOffset,z==t.Td&&h==t.Sd&&v==t.Rd&&N==t.uf&&B==t.vf){Ue.u(2);break}if(J=t.uf&&t.vf&&q8(e.g.ca,t.type,B,A),!J){Ue.u(3);break}if(fe=null,t.type===u.ja?fe=e.i.get(u.Y):t.type===u.Y&&(fe=e.i.get(u.ja)),!fe){Ue.u(3);break}return R(Ue,dp(fe).catch(function(){}),5);case 5:fe.qc=null,sv(e,fe);case 3:return R(Ue,rx(e,t,z,h,v,n,N,B),2);case 2:return Ct(n.$,t.qc)||(t.qc=n.$,n.l&&n.$&&(pe=y1(e,t,n.$),Ee=function(){var Qe,rt,dt,gt,kt,It,Ut;return Re(function(Nt){switch(Nt.g){case 1:return ce(Nt,2),R(Nt,pe,4);case 4:return Qe=Nt.h,Zr(e.m),rt=null,dt=new Map,gt={projection:null,hfov:null},kt=new V,kt.box("moov",W).box("trak",W).box("mdia",W).R("mdhd",function(nn){rt=$a(nn.reader,nn.version).timescale}).box("hdlr",function(nn){switch(nn=nn.reader,nn.skip(8),nn.sc()){case"soun":dt.set(u.Y,rt);break;case"vide":dt.set(u.ja,rt)}rt=null}).box("minf",W).box("stbl",W).R("stsd",ee).box("encv",H).box("avc1",H).box("avc3",H).box("hev1",H).box("hvc1",H).box("dvav",H).box("dva1",H).box("dvh1",H).box("dvhe",H).box("dvc1",H).box("dvi1",H).box("vexu",W).box("proj",W).R("prji",function(nn){nn=nn.reader.sc(),gt.projection=nn}).box("hfov",function(nn){nn=nn.reader.P()/1e3,gt.hfov=nn}).parse(Qe),Sj(e,gt),dt.has(t.type)?n.$.timescale=dt.get(t.type):rt!=null&&(n.$.timescale=rt),It=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,R(Nt,e.g.hg(t.type,Qe),5);case 5:return R(Nt,Qm(e.g.ca,t.type,Qe,null,t.stream,It,t.Rc,r),6);case 6:me(Nt,0);break;case 2:throw Ut=Ce(Nt),t.qc=null,Ut}})},Le=n.startTime,c&&(Fe=sp(e.g.ca,t.type),Fe!=null&&(Le=Fe)),e.g.yi(Le,n.$),f.push(Ee()))),e.l.sequenceMode&&(it=t.Na?t.Na.i:null,n.i!=it&&f.push(F8(e.g.ca,t.type,n.startTime))),R(Ue,Promise.all(f),0)}})}function rx(e,t,n,r,u,c,f,h){var v,A,N,B;return Re(function(z){if(z.g==1)return v=Mi,A=new Map,e.j.audio&&A.set(v.Y,e.j.audio),e.j.video&&A.set(v.ja,e.j.video),ce(z,2),t.Sd=r,t.Rd=u,f&&(t.uf=f),h&&(t.vf=h),t.Td=n,N=e.l.sequenceMode||e.l.type=="HLS",R(z,k8(e.g.ca,t.type,n,r,u,N,c.mimeType||t.stream.mimeType,c.codecs||t.stream.codecs,A),4);if(z.g!=2)return me(z,0);throw B=Ce(z),t.Sd=null,t.Rd=null,t.uf=null,t.vf=null,t.Td=null,B})}function m1(e,t,n,r,u,c,f,h){f=f===void 0?!1:f,h=h===void 0?!1:h;var v,A,N,B,z,J,fe,pe;return Re(function(Ee){switch(Ee.g){case 1:return v=r.closedCaptions&&0<r.closedCaptions.size,N=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,B=e.h.parsePrftBox&&!e.G,z=r.mimeType=="video/mp4"||r.mimeType=="audio/mp4",J=null,u.$&&(J=u.$.timescale),fe=z&&J&&r.type==="video"&&e.l.type=="DASH"&&e.h.shouldFixTimestampOffset,(N||B||fe)&&(A=new V),N&&A.R("emsg",function(Le){var Fe=r.emsgSchemeIdUris;if(Le.version===0)var it=Le.reader.sc(),Ue=Le.reader.sc(),Qe=Le.reader.P(),rt=Le.reader.P(),dt=Le.reader.P(),gt=Le.reader.P(),kt=u.startTime+rt/Qe;else Qe=Le.reader.P(),kt=Le.reader.Pc()/Qe+u.timestampOffset,rt=kt-u.startTime,dt=Le.reader.P(),gt=Le.reader.P(),it=Le.reader.sc(),Ue=Le.reader.sc();Le=Le.reader.rb(Le.reader.getLength()-Le.reader.xa()),(Fe&&Fe.includes(it)||e.h.dispatchAllEmsgBoxes)&&(it=="urn:mpeg:dash:event:2012"?e.g.zi():(Fe=kt+dt/Qe,Qe=new Map().set("detail",{startTime:kt,endTime:Fe,schemeIdUri:it,value:Ue,timescale:Qe,presentationTimeDelta:rt,eventDuration:dt,id:gt,messageData:Le}),Qe=new jn("emsg",Qe),Qe.cancelable=!0,e.g.onEvent(Qe),!Qe.defaultPrevented&&(it=="https://aomedia.org/emsg/ID3"||it=="https://developer.apple.com/streaming/emsg-id3")&&(it=la(Le),it.length)&&e.g.onMetadata([{cueTime:kt,data:Le,frames:it,dts:kt,pts:kt}],0,Fe)))}),B&&A.R("prft",function(Le){if(!e.G&&u.$.timescale){var Fe=Le.reader,it=Le.version;Fe.P(),Le=Fe.P();var Ue=Fe.P();Le=1e3*Le+Ue/Math.pow(2,32)*1e3,it===0?Fe=Fe.P():(it=Fe.P(),Fe=Fe.P(),Fe=it*Math.pow(2,32)+Fe),Le=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+Le).getTime(),Fe=new Map().set("detail",{wallClockTime:Le,programStartDate:new Date(Le-Fe/u.$.timescale*1e3)}),Fe=new jn("prft",Fe),e.g.onEvent(Fe),e.G=!0}}),fe&&A.box("moof",W).box("traf",W).R("tfdt",function(Le){var Fe,it,Ue,Qe,rt,dt;return Re(function(gt){return Fe=To(Le.reader,Le.version),it=Fe.baseMediaDecodeTime,it?(Ue=-it/J,Qe=Number(t.Td)||0,Qe<Ue?(rt=t.Sd,dt=t.Rd,R(gt,rx(e,t,Ue,rt,dt,u),0)):gt.u(0)):gt.return()})}),(N||B||fe)&&A.parse(c,!1,f),R(Ee,_j(e,t,n),2);case 2:return Zr(e.m),pe=t.Rc,t.Rc=!1,R(Ee,e.g.hg(t.type,c),3);case 3:return R(Ee,Qm(e.g.ca,t.type,c,u,r,v,pe,h,f),4);case 4:Zr(e.m),X(Ee)}})}function _j(e,t,n){var r,u,c,f,h;return Re(function(v){if(v.g==1)return r=t.stream.segmentIndex,r instanceof Ti&&r.Ga(e.l.presentationTimeline.Jb()),u=Math.max(e.h.bufferBehind,e.l.presentationTimeline.h),c=e1(e.g.ca,t.type),c==null?v.return():(f=n-c,h=f-u,h<=e.h.evictionGoal?v.return():R(v,e.g.ca.remove(t.type,c,c+h),2));Zr(e.m),X(v)})}function v1(e){return e&&e.type==_r&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function y1(e,t,n,r){var u,c,f,h,v;return Re(function(A){switch(A.g){case 1:if(u=n.cd())return A.return(u);if(c=null,t.V){var N=t.V,B=N.h;n instanceof Dn&&(B=N.j),B.has(n)?(N=B.get(n),r&&(N.Tf=r),c=N.ce):c=null}return c||(c=uv(n,t.stream,r||null,e.h.retryParameters,e.g.Mb)),f=0,t.ma&&(f=t.ma.h),t.jb=c,R(A,c.promise,2);case 2:if(h=A.h,t.jb=null,v=h.data,!n.aesKey){A.u(3);break}return R(A,h1(v,n.aesKey,f),4);case 4:v=A.h;case 3:return A.return(v)}})}function uv(e,t,n,r,u,c){c=c===void 0?!1:c;var f=e instanceof et?e:void 0,h=f?1:0;return e=nd(e.M(),e.Ha,e.va,r,n),e.contentType=t.type,u.request(Wa,e,{type:h,stream:t,segment:f,isPreload:c})}function E1(e,t,n,r){var u,c;return Re(function(f){if(f.g==1)return t.fc=!1,t.ze=!1,t.Ed=0,t.Wc=!0,t.Na=null,t.ma=null,t.V&&!e.o.has(t.stream)&&tu(t.V),r?(u=e.g.Jd(),c=e.g.ca.getDuration(),R(f,e.g.ca.remove(t.type,u+r,c),3)):R(f,NR(e.g.ca,t.type),4);if(f.g!=3)return Zr(e.m),n?R(f,e.g.ca.flush(t.type),3):f.u(3);Zr(e.m),t.Wc=!1,t.endOfStream=!1,t.La||t.ub||Xa(e,t,0),X(f)})}function Xa(e,t,n){var r=t.type;(r!=_r||e.i.has(r))&&(t.ub=new vn(function(){var u;return Re(function(c){if(c.g==1)return ce(c,2),R(c,hj(e,t),4);if(c.g!=2)return me(c,0);u=Ce(c),e.g&&e.g.onError(u),X(c)})}).Z(n))}function fp(e){e.ub!=null&&(e.ub.stop(),e.ub=null)}function dp(e){return Re(function(t){return e.jb?R(t,e.jb.abort(),0):t.u(0)})}function _1(e,t,n){var r;return Re(function(u){if(u.g==1)return R(u,qm(e.K),2);if(Zr(e.m),n.category===1){if(t.bc)return p1(e,!1),u.return();r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,r),n.handled&&(n.severity=1)}(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),X(u)})}function Tj(e){var t,n,r,u,c,f;return Re(function(h){return h.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.L<n?h.return(!1):(e.L=t,r=Mi,(u=e.i.get(r.Y))&&(u.qc=null,sv(e,u),dp(u).catch(function(){})),(c=e.i.get(r.ja))&&(c.qc=null,sv(e,c),dp(c).catch(function(){})),f=new Map,e.j.audio&&f.set(r.Y,e.j.audio),e.j.video&&f.set(r.ja,e.j.video),R(h,DR(e.g.ca,f),2))):h.return(!0)})}function Sj(e,t){if(e.H.projection!=t.projection||e.H.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new jn("spatialvideoinfo",n)}else n=new jn("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.H=t}}function lv(){}function T1(e,t,n,r,u){var c=u in r,f=c?n.constructor==Object&&Object.keys(r).length==0:n.constructor==Object&&Object.keys(n).length==0,h=c||f,v=!0,A;for(A in t){var N=u+"."+A,B=c?r[u]:n[A];h||A in n?t[A]===void 0?B===void 0||h?delete e[A]:e[A]=Aa(B):f?e[A]=t[A]:B.constructor==Object&&t[A]&&t[A].constructor==Object?(e[A]||(e[A]=Aa(B)),N=T1(e[A],t[A],B,r,N),v=v&&N):typeof t[A]!=typeof B||t[A]==null||typeof t[A]!="function"&&t[A].constructor!=B.constructor?(de("Invalid config, wrong type for "+N),v=!1):(typeof n[A]=="function"&&n[A].length!=t[A].length&&Ke("Unexpected number of arguments for "+N),e[A]=t[A]):(de("Invalid config, unrecognized key "+N),v=!1)}return v}function cv(e,t){for(var n={},r=n,u=0,c=0;u=e.indexOf(".",u),!(0>u);)(u==0||e[u-1]!="\\")&&(c=e.substring(c,u).replace(/\\\./g,"."),r[c]={},r=r[c],c=u+1),u+=1;return r[e.substring(c).replace(/\\\./g,".")]=t,n}function id(e,t){return e&&t}function ix(e,t){function n(f){for(var h=m(Object.keys(f)),v=h.next();!v.done;v=h.next())v=v.value,c(f[v])&&Object.keys(f[v]).length===0||u(f[v])||typeof f[v]=="function"?delete f[v]:c(f[v])&&(n(f[v]),Object.keys(f[v]).length===0&&delete f[v])}function r(f,h){return Object.keys(f).reduce(function(v,A){var N=f[A];return h.hasOwnProperty(A)?c(N)&&c(h[A])?(N=r(N,h[A]),(0<Object.keys(N).length||!c(N))&&(v[A]=N)):u(N)&&u(h[A])||Number.isNaN(N)&&Number.isNaN(h[A])||N!==h[A]&&(v[A]=N):v[A]=N,v},{})}function u(f){return Array.isArray(f)&&f.length===0}function c(f){return f&&typeof f=="object"&&!Array.isArray(f)}return e=r(e,t),n(e),e}ne("shaka.util.ConfigUtils",lv),lv.getDifferenceFromConfigObjects=ix,lv.convertToConfigObject=cv,lv.mergeConfigObjects=T1;function Qa(){}function ox(e){return e=Br(e),new Ei(e).Db}function hp(e,t,n){function r(h){ln(c).setUint32(f,h.byteLength,!0),f+=4,c.set(nr(h),f),f+=h.byteLength}if(!n||!n.byteLength)throw new Xe(2,6,6015);var u;typeof t=="string"?u=yo(t,!0):u=t,e=Br(e),e=yo(e,!0);var c=new Uint8Array(12+e.byteLength+u.byteLength+n.byteLength),f=0;return r(e),r(u),r(n),c}function ax(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Br(e).split("skd://").pop(),hp(e,n,t))}function S1(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}ne("shaka.util.FairPlayUtils",Qa),Qa.commonFairPlayResponse=function(e,t){if(e===2){try{var n=Cr(t.data)}catch(u){return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(u){}e&&(t.data=Ni(Wo(n)))}},Qa.expressplayFairPlayRequest=function(e,t){S1(e,t)},Qa.conaxFairPlayRequest=function(e,t){S1(e,t)},Qa.ezdrmFairPlayRequest=function(e,t){S1(e,t)},Qa.verimatrixFairPlayRequest=function(e,t){e===2&&(e=nr(t.body),e=Ss(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=bi("spc="+e))},Qa.expressplayInitDataTransform=function(e,t,n){return ax(e,t,n)},Qa.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Br(e).split("skd://").pop().split("?").shift(),n=g.atob(n);var r=new ArrayBuffer(2*n.length);r=ju(r);for(var u=0,c=n.length;u<c;u++)r[u]=n.charCodeAt(u);return hp(e,r,t)},Qa.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Br(e).split(";").pop(),hp(e,n,t))},Qa.verimatrixInitDataTransform=function(e,t,n){return ax(e,t,n)},Qa.initDataTransform=hp,Qa.defaultGetContentId=ox,Qa.isFairPlaySupported=function(){var e;return Re(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ce(t,2),R(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(Ce(t),t.return(!1))})};function w1(){}function od(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:ua(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(N,B,z){return Tr()&&B=="skd"&&(B=z.serverCertificate,z=ox(N),N=hp(N,z,B)),N},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Rr(),minHdcpVersion:"",ignoreDuplicateInitData:!ni()};(Rr()||Ri())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;ni()||Ui()||sn("Tizen 4")||sn("Tizen 5")||sn("Tizen 6")||vi()||li()&&vs()===53||li()&&vs()===68||!(!ri()||ri()&&qu()||ri()&&sn("Fuchsia"))||Rl()&&xr()||(n="smooth",r=!0),r={retryParameters:ua(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:fv,manifestPreprocessorTXml:dv,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:!(Ui()||ni()||vi()||Ri()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:fv,manifestPreprocessorTXml:dv,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var u={retryParameters:ua(),failureCallback:function(N){return id([N])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:.01,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:Ri()||Yo(),dontChooseCodecs:!1,shouldFixTimestampOffset:li()||di()};(li()||di()||ri()||Zu())&&(u.stallSkip=0),di()&&(u.gapPadding=2);var c={trackSelectionCallback:function(N){return Re(function(B){return B.return(N)})},downloadSizeCallback:function(N){var B;return Re(function(z){return z.g==1?navigator.storage&&navigator.storage.estimate?R(z,navigator.storage.estimate(),3):z.return(!0):(B=z.h,z.return(B.usage+N<.95*B.quota))})},progressCallback:function(N,B){return id([N,B])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:Ao()?.5:0,preferNetworkInformationBandwidth:!1},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(N){return id([N],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(N,B){return id([N,B])}};var f=!1,h=!1,v=!0;Gu()&&(h=f=!0,v=!1);var A={drm:t,manifest:r,streaming:u,mediaSource:n,offline:c,abrFactory:function(){return new ii},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:f,skipPlayDetection:h,supportsMultipleMediaElements:v}};return c.trackSelectionCallback=function(N){return Re(function(B){return B.return(wj(N,A.preferredAudioLanguage,A.preferredVideoHdrLevel))})},A}function ql(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return T1(e,t,n||od(),r,"")}function wj(e,t,n){var r=n;r=="AUTO"&&(r=g.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var u=e.filter(function(h){return!(h.type!="variant"||h.hdr&&h.hdr!=r)});n=[];var c=Cc(t,u.map(function(h){return h.language}));c&&(n=u.filter(function(h){return Or(h.language)==c})),n.length==0&&(n=u.filter(function(h){return h.primary})),n.length==0&&(u.map(function(h){return h.language}),n=u);var f=n.filter(function(h){return h.height&&480>=h.height});for(f.length&&(f.sort(function(h,v){return v.height-h.height}),n=f.filter(function(h){return h.height==f[0].height})),t=[],n.length&&(u=Math.floor(n.length/2),n.sort(function(h,v){return h.bandwidth-v.bandwidth}),t.push(n[u])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=_r&&n.type!="image"||t.push(n);return t}function fv(e){return id([e],e)}function dv(e){return id([e],e)}ne("shaka.util.PlayerConfiguration",w1),w1.mergeConfigObjects=ql,w1.createDefault=od;function sl(e,t,n,r){Nr.call(this),this.N=e,this.X=t,this.za=r.networkingEngine,this.B=n,this.o=null,this.ta=0,this.Ta=r.Bc,this.F=r.si,this.bb=r.ti,this.g=r.config,this.j=this.G=this.h=null,this.fa=!1,this.H=r.Di,this.ka=!1,this.l=null,this.ea=!1,this.i=this.C=null,this.ba=!1,this.L=new Map,this.oa=!1,this.Ea=r.Ci,this.aa=new tv,this.m=new Lr,this.O=null,this.s=!1,this.Fa=r.wh,this.ga=null,this.Da=r.vh,this.T=!1,this.K=[],this.I=[],this.A=!0}Y(sl,Nr);function pp(e,t,n){(e=t?e.I:e.K)?e.push(n):n()}function Aj(e){if(e.I)for(var t=m(e.I),n=t.next();!n.done;n=t.next())n=n.value,n();e.I=null}function sx(e,t){if(e.O=t,e.T=!0,e.K){t=m(e.K);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.K=null}p=sl.prototype,p.getStartTime=function(){return this.B},p.Gc=function(){return this.N},p.gf=function(){return this.h};function Ij(e){return e.ba=!0,e.i}function bj(e){return e.fa=!0,e.j}function Cj(e){return e.ka=!0,e.H}p.getStats=function(){return this.aa};function Rj(e){return e.ea=!0,e.l}function xj(e){return e.oa=!0,e.L}p.start=function(){var e=this;(function(){var t;return Re(function(n){switch(n.g){case 1:return R(n,Promise.resolve(),2);case 2:return ce(n,3),R(n,Nj(e),5);case 5:return gp(e),R(n,Mj(e),6);case 6:if(gp(e),e.o||(e.o=new Bl(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups)),e.Da){var r=e.g.abrFactory;e.C=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Fa){r=e.h.presentationTimeline.U();var u=Vf(e.h.variants);u=e.o.create(u),e.i.configure(e.g.abr),e.i.setVariants(Array.from(u.values())),(u=e.i.chooseVariant())&&(e.ga=u,u.video&&ux(e,u.video,r),u.audio&&ux(e,u.audio,r))}return R(n,void 0,7);case 7:gp(e),e.m.resolve(),me(n,0);break;case 3:t=Ce(n),e.m.reject(t),X(n)}})})()},p.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):Nr.prototype.dispatchEvent.call(this,e)},p.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var t=new Map().set("detail",e);t=new jn("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function gp(e){if(e.s)throw new Xe(2,7,7003)}function A1(e,t){e.dispatchEvent(new jn("onstatechange",new Map().set("state",t)))}function Nj(e){var t,n,r,u;return Re(function(c){if(c.g==1)return A1(e,"manifest-parser"),e.j||(e.G=qn(e.N,e.X),e.j=e.G(),e.j.configure(e.g.manifest,function(){return e.A})),t=Date.now()/1e3,A1(e,"manifest"),e.h?c.u(2):R(c,e.j.start(e.N,e.bb),3);if(c.g!=2&&(e.h=c.h),n=new jn("manifestparsed",void 0),e.dispatchEvent(n),e.h.variants.length==0)throw new Xe(2,4,4036);Dj(e.h),r=Date.now()/1e3,u=r-t,e.aa.H=u,X(c)})}function Mj(e){var t,n,r,u,c;return Re(function(f){switch(f.g){case 1:if(A1(e,"drm-engine"),e.ta=Date.now()/1e3,e.l=e.Ta(),e.F.g=e.l,e.l.configure(e.g.drm,function(){return e.A}),t=tn(e.F,e.h),!t){f.u(2);break}return n=new jn("trackschanged",void 0),R(f,Promise.resolve(),3);case 3:gp(e),e.dispatchEvent(n);case 2:return r=Vf(e.h.variants),R(f,ke(e.l,r,e.h.offlineSessionIds),4);case 4:return gp(e),R(f,bt(e.F,e.h),5);case 5:if(u=f.h,!u){f.u(0);break}return c=new jn("trackschanged",void 0),R(f,Promise.resolve(),7);case 7:e.dispatchEvent(c),X(f)}})}p.configure=function(e,t){e=cv(e,t),ql(this.g,e)},p.getConfiguration=function(){return Aa(this.g)};function ux(e,t,n){var r,u,c,f,h;Re(function(v){if(v.g==1)return r=e.g.streaming.segmentPrefetchLimit||2,u=new nv(r,t,function(A,N,B){return uv(A,N,B||null,e.g.streaming.retryParameters,e.za,e.A)},!1),e.L.set(t.id,u),R(v,t.createSegmentIndex(),2);c=e.B||0,(h=(f=t.segmentIndex.Ib(c))?f.current():null)||(h=eu(t.segmentIndex)),h&&(n?h.$&&WR(u,h.$):lp(u,h.startTime)),X(v)})}p.dj=function(){return this.m},p.destroy=function(){var e=this,t,n,r;return Re(function(u){switch(u.g){case 1:if(e.s=!0,!e.j||e.fa){u.u(2);break}return R(u,e.j.stop(),2);case 2:if(!e.i||e.ba){u.u(4);break}return R(u,e.i.stop(),4);case 4:if(e.H&&!e.ka&&e.H.release(),!e.l||e.ea){u.u(6);break}return R(u,e.l.destroy(),6);case 6:if(0<e.L.size&&!e.oa)for(t=m(e.L.values()),n=t.next();!n.done;n=t.next())r=n.value,tu(r);X(u)}})};function Dj(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}ne("shaka.media.PreloadManager",sl),sl.prototype.destroy=sl.prototype.destroy,sl.prototype.waitForFinish=sl.prototype.dj;function hv(e,t){Nr.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{zc:null,yc:ad,oc:function(r,u){return Pc(n,"enter",r,u)}},{zc:mp,yc:ad,oc:function(r,u){return Pc(n,"enter",r,u)}},{zc:vp,yc:ad,oc:function(r,u){return Pc(n,"enter",r,u)}},{zc:ad,yc:mp,oc:function(r,u){return Pc(n,"exit",r,u)}},{zc:ad,yc:vp,oc:function(r,u){return Pc(n,"exit",r,u)}},{zc:mp,yc:vp,oc:function(r,u){return Pc(n,"skip",r,u)}},{zc:vp,yc:mp,oc:function(r,u){return Pc(n,"skip",r,u)}}],this.h=new Tt,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}Y(hv,Nr),hv.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Nr.prototype.release.call(this)},hv.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var u=this.g.get(r),c=e<r.startTime?mp:e>r.endTime?vp:ad;this.g.set(r,c);for(var f=m(this.m),h=f.next();!h.done;h=f.next())h=h.value,h.zc==u&&h.yc==c&&h.oc(r,t)}}};function Pc(e,t,n,r){t=new jn(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var mp=1,ad=2,vp=3;function pv(e,t,n){var r,u,c,f,h,v,A;return Re(function(N){switch(N.g){case 1:var B=new Ei(e).Pa.split("/").pop().split(".");return r=B.length==1?"":B.pop().toLowerCase(),(u=Pj[r])?N.return(u):(c=0,f=Bi([e],n),ce(N,2),f.method="HEAD",R(N,t.request(c,f).promise,4));case 4:h=N.h,u=h.headers["content-type"],me(N,3);break;case 2:if(v=Ce(N),!v||v.code!=1002&&v.code!=1001){N.u(3);break}return f.method="GET",R(N,t.request(c,f).promise,6);case 6:A=N.h,u=A.headers["content-type"];case 3:return N.return(u?u.toLowerCase().split(";").shift():"")}})}var Pj={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"};function lx(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(f){return lx(f,e)}).join("");if(!e.payload)return e.payload;var n=[],r=e.fontWeight>=zu,u=e.fontStyle==Su,c=e.textDecoration.includes(Vs);return r&&n.push(["b"]),u&&n.push(["i"]),c&&n.push(["u"]),u=e.color,u==""&&t&&(u=t.color),r="",(u=cx(u))&&(r+="."+u),u=e.backgroundColor,u==""&&t&&(u=t.backgroundColor),(t=cx(u))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(f,h){var v=m(h);return h=v.next().value,v=v.next().value,"<"+h+(v===void 0?"":v)+">"+f+"</"+h+">"},e.payload)}function cx(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function I1(e,t){var n=[];e=m(fx(e));for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,T(I1(r.nestedCues,r)));else{var u=r.clone();u.nestedCues=[],u.payload=lx(r,t),n.push(u)}return n}function fx(e){var t=[];e=m(e);for(var n=e.next(),r={};!n.done;r={Le:void 0},n=e.next())r.Le=n.value,t.some(function(u){return function(c){return Tf(u.Le,c)}}(r))||t.push(r.Le);return t}function Oj(e){function t(r){for(var u=5381,c=r.length;c;)u=33*u^r.charCodeAt(--c);return(u>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch(r){}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function Lj(e){if(e.endTime===1/0||e.endTime<e.startTime)return null;var t=new jr(e.startTime,e.endTime,e.text);return t.line=typeof e.line=="number"?e.line:null,e.lineAlign&&(t.lineAlign=e.lineAlign),t.lineInterpretation=e.snapToLines?Dl:1,t.position=typeof e.position=="number"?e.position:null,e.positionAlign&&(t.positionAlign=e.positionAlign),t.size=e.size,t.textAlign=e.align,e.vertical==="lr"?t.writingMode="vertical-lr":e.vertical==="rl"&&(t.writingMode="vertical-rl"),e.region&&(t.region.id=e.region.id,t.region.height=e.region.lines,t.region.heightUnits=2,t.region.regionAnchorX=e.region.regionAnchorX,t.region.regionAnchorY=e.region.regionAnchorY,t.region.scroll=e.region.scroll,t.region.viewportAnchorX=e.region.viewportAnchorX,t.region.viewportAnchorY=e.region.viewportAnchorY,t.region.viewportAnchorUnits=wn,t.region.width=e.region.width,t.region.widthUnits=wn),Sf(t),t}function fa(e,t){this.g=null;for(var n=m(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.kind!=="metadata"&&r.kind!=="chapters"&&(r.mode="disabled",r.label==t&&(this.g=r));this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}p=fa.prototype,p.configure=function(){},p.remove=function(e,t){return this.g?(dx(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},p.append=function(e){var t=I1(e),n=[];e=this.g.cues?Array.from(this.g.cues):[],t=m(t);for(var r=t.next(),u={};!r.done;u={Ic:void 0},r=t.next())u.Ic=r.value,!e.some(function(c){return function(f){return f.startTime==c.Ic.startTime&&f.endTime==c.Ic.endTime&&f.text==c.Ic.payload}}(u))&&u.Ic.payload&&(r=Oj(u.Ic))&&n.push(r);for(e=n.slice().sort(function(c,f){return c.startTime!=f.startTime?c.startTime-f.startTime:c.endTime!=f.endTime?c.endTime-f.startTime:"line"in VTTCue.prototype?n.indexOf(f)-n.indexOf(c):n.indexOf(c)-n.indexOf(f)}),e=m(e),t=e.next();!t.done;t=e.next())this.g.addCue(t.value)},p.destroy=function(){return this.g&&(dx(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},p.isTextVisible=function(){return this.g.mode=="showing"},p.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function dx(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=m(Array.from(e.cues)),u=r.next();!u.done;u=r.next())(u=u.value)&&t(u)&&e.removeCue(u);e.mode=n}ne("shaka.text.SimpleTextDisplayer",fa),fa.prototype.setTextVisibility=fa.prototype.setTextVisibility,fa.prototype.isTextVisible=fa.prototype.isTextVisible,fa.prototype.destroy=fa.prototype.destroy,fa.prototype.append=fa.prototype.append,fa.prototype.remove=fa.prototype.remove,fa.prototype.configure=fa.prototype.configure;function da(){}p=da.prototype,p.configure=function(){},p.remove=function(){},p.append=function(){},p.destroy=function(){},p.isTextVisible=function(){return!1},p.setTextVisibility=function(){},ne("shaka.text.StubTextDisplayer",da),da.prototype.setTextVisibility=da.prototype.setTextVisibility,da.prototype.isTextVisible=da.prototype.isTextVisible,da.prototype.destroy=da.prototype.destroy,da.prototype.append=da.prototype.append,da.prototype.remove=da.prototype.remove,da.prototype.configure=da.prototype.configure;function hx(){}function sd(e){for(;e.firstChild;)e.removeChild(e.firstChild)}ne("shaka.util.Dom",hx),hx.removeAllChildren=sd;function ha(e,t,n){var r=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||gr("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new on(function(){r.A.paused||ud(r)}).Ra(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Tt,this.j.D(document,"fullscreenchange",function(){ud(r,!0)}),this.j.D(this.A,"seeking",function(){ud(r,!0)}),this.j.D(this.A,"resize",function(){var u=r.A,c=u.videoWidth;u=u.videoHeight,c&&u?r.l=c/u:r.l=null}),this.o=null,"ResizeObserver"in g&&(this.o=new ResizeObserver(function(){ud(r,!0)}),this.o.observe(this.g)),this.B=new Map}p=ha.prototype,p.configure=function(e){this.C&&this.C.Ra(e.captionsUpdatePeriod)},p.append=function(e){var t=[].concat(T(this.h));e=m(fx(e));for(var n=e.next(),r={};!n.done;r={Me:void 0},n=e.next())r.Me=n.value,t.some(function(u){return function(c){return Tf(c,u.Me)}}(r))||this.h.push(r.Me);ud(this)},p.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},p.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),ud(this,n>this.h.length),!0},p.isTextVisible=function(){return this.m},p.setTextVisibility=function(e){this.m=e};function kj(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function px(e,t,n,r,u){var c=!1,f=[],h=[];t=m(t);for(var v=t.next();!v.done;v=t.next()){v=v.value,u.push(v);var A=e.i.get(v),N=v.startTime<=r&&v.endTime>r,B=A?A.oh:null;A&&(f.push(A.Ne),A.uc&&f.push(A.uc),N||(c=!0,e.i.delete(v),A=null)),N&&(h.push(v),A?kj(e,B)||(c=!0):(Fj(e,v,u),A=e.i.get(v),B=A.oh,c=!0)),0<v.nestedCues.length&&B&&px(e,v.nestedCues,B,r,u),u.pop()}if(c){for(r=m(f),u=r.next();!u.done;u=r.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(h.sort(function(z,J){return z.startTime!=J.startTime?z.startTime-J.startTime:z.endTime-J.endTime}),h=m(h),r=h.next();!r.done;r=h.next())r=e.i.get(r.value),r.uc?(r.uc.contains(n)&&r.uc.removeChild(n),n.appendChild(r.uc),r.uc.appendChild(r.Ne)):n.appendChild(r.Ne)}}function ud(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=m(e.B.values());for(var r=t.next();!r.done;r=t.next())sd(r.value);sd(e.g),e.i.clear(),e.B.clear()}e.m&&px(e,e.h,e.g,n,[])}}function Fj(e,t,n){var r=1<n.length,u=r?"span":"div";t.lineBreak&&(u="br"),t.rubyTag&&(u=t.rubyTag),r=!r&&0<t.nestedCues.length;var c=document.createElement(u);if(u!="br"&&Bj(e,c,t,n,r),n=null,t.region&&t.region.id){var f=t.region,h=e.l===4/3?2.5:1.9;if(n=f.id+"_"+f.width+"x"+f.height+(f.heightUnits==wn?"%":"px")+"-"+f.viewportAnchorX+"x"+f.viewportAnchorY+(f.viewportAnchorUnits==wn?"%":"px"),e.B.has(n))n=e.B.get(n);else{u=document.createElement("span");var v=f.heightUnits==wn?"%":"px",A=f.widthUnits==wn?"%":"px",N=f.viewportAnchorUnits==wn?"%":"px";u.id="shaka-text-region---"+n,u.classList.add("shaka-text-region"),u.style.position="absolute";var B=f.height,z=f.width;f.heightUnits===2&&(B=5.33*f.height,v="%"),f.widthUnits===2&&(z=f.width*h,A="%"),u.style.height=B+v,u.style.width=z+A,f.viewportAnchorUnits===2?(h=f.viewportAnchorY/75*100,v=f.viewportAnchorX/(e.l===4/3?160:210)*100,h-=f.regionAnchorY*B/100,v-=f.regionAnchorX*z/100,u.style.top=h+"%",u.style.left=v+"%"):(u.style.top=f.viewportAnchorY-f.regionAnchorY*B/100+N,u.style.left=f.viewportAnchorX-f.regionAnchorX*z/100+N),f.heightUnits!==0&&f.widthUnits!==0&&f.viewportAnchorUnits!==0&&(f=Math.max(0,Math.min(100-(parseInt(u.style.width.slice(0,-1),10)||0),parseInt(u.style.left.slice(0,-1),10)||0)),u.style.top=Math.max(0,Math.min(100-(parseInt(u.style.height.slice(0,-1),10)||0),parseInt(u.style.top.slice(0,-1),10)||0))+"%",u.style.left=f+"%"),u.style.display="flex",u.style.flexDirection="column",u.style.alignItems="center",u.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(n,u),n=u}}u=c,r&&(u=document.createElement("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=t.backgroundColor,u.style.lineHeight="normal",c.appendChild(u)),e.i.set(t,{Ne:c,oh:u,uc:n})}function Uj(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Af?n:e==="left"||e==="start"&&t===Ml||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Ml?"line-right":"center"}function Bj(e,t,n,r,u){var c=t.style,f=n.nestedCues.length==0,h=1<r.length;c.whiteSpace="pre-wrap";var v=n.payload.replace(/\s+$/g,function(N){return"".repeat(N.length)});if(c.webkitTextStrokeColor=n.textStrokeColor,c.webkitTextStrokeWidth=n.textStrokeWidth,c.color=n.color,c.direction=n.direction,c.opacity=n.opacity,c.paddingLeft=b1(n.linePadding,n,e.s),c.paddingRight=b1(n.linePadding,n,e.s),c.textCombineUpright=n.textCombineUpright,c.textShadow=n.textShadow,n.backgroundImage)c.backgroundImage="url('"+n.backgroundImage+"')",c.backgroundRepeat="no-repeat",c.backgroundSize="contain",c.backgroundPosition="center",n.backgroundColor&&(c.backgroundColor=n.backgroundColor),c.width="100%",c.height="100%";else{if(n.nestedCues.length)var A=t;else A=document.createElement("span"),t.appendChild(A);n.border&&(A.style.border=n.border),u||((t=jj(r,function(N){return N.backgroundColor}))?A.style.backgroundColor=t:v&&(A.style.backgroundColor="rgba(0, 0, 0, 0.8)")),v&&(A.textContent=v)}h&&!r[r.length-1].isContainer?c.display="inline":(c.display="flex",c.flexDirection="column",c.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(c.width="100%",c.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(c.width="100%",c.alignItems="end"),c.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),f||(c.margin="0"),c.fontFamily=n.fontFamily,c.fontWeight=n.fontWeight.toString(),c.fontStyle=n.fontStyle,c.letterSpacing=n.letterSpacing,c.fontSize=b1(n.fontSize,n,e.s),r=n.line,r!=null&&(f=n.lineInterpretation,f==Dl&&(f=1,h=16,e.l&&1>e.l&&(h=32),r=0>r?100+r/h*100:r/h*100),f==1&&(c.position="absolute",n.writingMode==Vu?(c.width="100%",n.lineAlign==Ku?c.top=r+"%":n.lineAlign=="end"&&(c.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(c.height="100%",n.lineAlign==Ku?c.left=r+"%":n.lineAlign=="end"&&(c.right=100-r+"%")):(c.height="100%",n.lineAlign==Ku?c.right=r+"%":n.lineAlign=="end"&&(c.left=100-r+"%")))),c.lineHeight=n.lineHeight,e=Uj(n),e=="line-left"?(c.cssFloat="left",n.position!==null&&(c.position="absolute",n.writingMode==Vu?(c.left=n.position+"%",c.width="auto"):c.top=n.position+"%")):e=="line-right"?(c.cssFloat="right",n.position!==null&&(c.position="absolute",n.writingMode==Vu?(c.right=100-n.position+"%",c.width="auto"):c.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(c.position="absolute",n.writingMode==Vu?(c.left=n.position+"%",c.width="auto"):c.top=n.position+"%"),c.textAlign=n.textAlign,c.textDecoration=n.textDecoration.join(" "),c.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&c.writingMode==n.writingMode||(c.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Vu?c.width=n.size+"%":c.height=n.size+"%")}function b1(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var u=r.value;switch(r.unit){case"%":return u/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*u/t.cellResolution.rows+"px";default:return e}}function jj(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}ne("shaka.text.UITextDisplayer",ha),ha.prototype.setTextVisibility=ha.prototype.setTextVisibility,ha.prototype.isTextVisible=ha.prototype.isTextVisible,ha.prototype.remove=ha.prototype.remove,ha.prototype.destroy=ha.prototype.destroy,ha.prototype.append=ha.prototype.append,ha.prototype.configure=ha.prototype.configure;function Zj(e,t){function n(c){for(var f=c,h=m(t),v=h.next();!v.done;v=h.next())v=v.value,v.end&&v.start<c&&(f+=v.end-v.start);return c=Math.floor(f/3600),h=Math.floor(f/60%60),v=Math.floor(f%60),f=Math.floor(1e3*f%1e3),(10>c?"0":"")+c+":"+(10>h?"0":"")+h+":"+(10>v?"0":"")+v+"."+(100>f?10>f?"00":"0":"")+f}var r=I1(e);e="WEBVTT\n\n",r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,e+=n(u.startTime)+" --> "+n(u.endTime)+function(c){var f=[];switch(c.textAlign){case"left":f.push("align:left");break;case"right":f.push("align:right");break;case ba:f.push("align:middle");break;case"start":f.push("align:start");break;case"end":f.push("align:end")}switch(c.writingMode){case"vertical-lr":f.push("vertical:lr");break;case"vertical-rl":f.push("vertical:rl")}return f.length?" "+f.join(" "):""}(u)+"\n",e+=u.payload+"\n\n";return e}ne("shaka.text.WebVttGenerator",function(){});function gx(e,t){this.h=e,this.g=t,this.i=void 0,this.l=!1,this.o=!0,this.j=this.m=!1}gx.prototype.configure=function(e){this.g=e};function qj(e){e.l=!1,e.o=!0,e.m=!1,e.j=!1}function Gj(e,t){e.j=t,e.j?e.i==_v?e.i=Tv:e.i==Sv&&(e.i=wv):e.i==Tv?e.i=_v:e.i==wv&&(e.i=Sv)}function Hj(e,t,n){try{if(!e.g.enabled)return t;var r=C1(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=mv;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=yv;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=vx;break e}u=void 0}r.ot=u,r.su=!0;var c=gv(r);return R1(t,c)}catch(f){return wt("CMCD_SRC_ERROR","Could not generate src CMCD data.",f),t}}function C1(e){return e.g.sessionId||(e.g.sessionId=g.crypto.randomUUID()),{v:1,sf:e.i,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function ld(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,C1(e)),n.pr=e.h.fb();var u=n.ot===vv||n.ot===yv;if(e.m&&u&&(n.bs=!0,n.su=!0,e.m=!1),n.su==null&&(n.su=e.o),e=Vj(e,n),r)r=Wj(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var c=gv(e);c&&(t.uris=t.uris.map(function(f){return R1(f,c)}))}}}function Vj(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,u){return n.includes(u)&&(r[u]=t[u]),r},{}):t}function Kj(e){if(e.type===0)return $j;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?yv:vv;if(t=="audio")return mv;if(t=="text")return e.mimeType==="application/mp4"?Ev:x1}}function zj(e,t){if(t=e.h.xb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function mx(e,t){if(t=e.h.xb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function Yj(e,t){var n=e.h.mc();if(!n.length)return NaN;e=n[0],n=m(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case vv:return e.videoBandwidth||NaN;case mv:return e.audioBandwidth||NaN;default:return e.bandwidth}}function gv(e){function t(B){return 100*n(B/100)}function n(B){return Math.round(B)}function r(B){return!Number.isNaN(B)&&B!=null&&B!==""&&B!==!1}var u=[],c={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(B){return encodeURIComponent(B)},rtp:t,tb:n},f=Object.keys(e||{}).sort();f=m(f);for(var h=f.next();!h.done;h=f.next()){h=h.value;var v=e[h];if(r(v)&&(h!=="v"||v!==1)&&(h!="pr"||v!==1)){var A=c[h];A&&(v=A(v)),A=typeof v;var N=void 0;N=A==="string"&&h!=="ot"&&h!=="sf"&&h!=="st"?h+"="+JSON.stringify(v):A==="boolean"?h:A==="symbol"?h+"="+v.description:h+"="+v,u.push(N)}}return u.join(",")}function Wj(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],u=[{},{},{},{}],c={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=m(t);for(var f=t.next();!f.done;f=t.next())f=f.value,u[c[f]!=null?c[f]:1][f]=e[f];for(e=0;e<u.length;e++)(c=gv(u[e]))&&(n["CMCD-"+r[e]]=c);return n}function R1(e,t){return!t||e.includes("offline:")?e:(e=new Ei(e),e.g.set("CMCD",t),e.toString())}var vx="m",mv="a",vv="v",yv="av",$j="i",x1="c",Ev="tt",_v="d",Tv="ld",Sv="h",wv="lh";ne("shaka.util.CmcdManager.StreamingFormat",{DASH:_v,xj:Tv,HLS:Sv,yj:wv,Lj:"s",OTHER:"o"});function Ja(e){this.h=e,this.g=null}p=Ja.prototype,p.configure=function(e){this.h=e},p.wg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(_x)?1e3*this.g.get(_x):null},p.vg=function(){return this.h.enabled&&this.g&&this.g.has(Ex)?1e3*this.g.get(Ex):null},p.Wh=function(){return this.h.enabled&&this.g&&this.g.has(Tx)?this.g.get(Tx):null},p.Xh=function(){return this.h.enabled&&this.g&&this.g.has(Sx)?this.g.get(Sx):null},p.getBandwidthEstimate=function(e){var t=this.vg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function yx(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}ne("shaka.util.CmsdManager",Ja),Ja.prototype.getBandwidthEstimate=Ja.prototype.getBandwidthEstimate,Ja.prototype.getRoundTripTime=Ja.prototype.Xh,Ja.prototype.getResponseDelay=Ja.prototype.Wh,Ja.prototype.getEstimatedThroughput=Ja.prototype.vg,Ja.prototype.getMaxBitrate=Ja.prototype.wg;var Ex="etp",_x="mb",Tx="rd",Sx="rtt";function wx(){this.g=null,this.h=[]}function N1(e,t){return Re(function(n){if(n.g==1)return e.g?R(n,new Promise(function(r){return e.h.push(r)}),2):n.u(2);e.g=t,X(n)})}wx.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function hn(e,t,n){t=t===void 0?null:t,Nr.call(this);var r=this;this.m=j1,this.h=null,this.ee=t,this.oa=!1,this.qe=new Tt,this.jd=new Tt,this.l=new Tt,this.Ta=new Tt,this.vb=new Tt,this.G=this.I=this.B=this.F=null,this.ye=0,this.aa=new wx,this.ka=this.$f=this.ea=this.i=this.bb=this.H=this.j=this.$b=this.L=this.bg=this.fa=this.O=this.fd=this.N=this.ge=this.K=this.Fb=null,this.Da=!1,this.za=this.o=null,this.ag=1e9,this.pd=[],this.X=NaN,this.g=ul(this),this.T=null,this.Ae=-1,this.Fa=null,this.ga={width:1/0,height:1/0},this.ae=new vr(this.g,this.ga,null),this.je=[],this.s=null,this.Ea=new Bl(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Eb=this.g.preferredTextLanguage,this.nd=this.g.preferredTextRole,this.md=this.g.preferForcedSubs,this.ld=[],n&&n(this),this.O=l5(this),this.fa=new Ja(this.g.cmsd),this.F=Mx(this),this.F.Pf(this.g.streaming.forceHTTP),this.F.Qf(this.g.streaming.forceHTTPS),this.F.m=this.g.streaming.minBytesForProgressEvents,this.Hb=this.ba=this.A=null,this.Ce=!1,this.Be=new on(function(){return Re(function(u){if(u.g==1)return r.ba?R(u,r.Sb(r.Hb,!0),3):u.u(0);if(u.g!=4)return R(u,r.load(r.ba),4);r.Ce?r.Hb.pause():r.Hb.play(),r.ba=null,r.Ce=!1,X(u)})}),xv&&(this.A=xv(),this.A.configure(this.g.ads),this.vb.D(this.A,"ad-content-pause-requested",function(u){var c;return Re(function(f){if(f.g==1)return r.Be.stop(),r.ba?f.u(0):(r.Hb=r.h,r.Ce=r.h.ended,c=u.saveLivePosition||!1,R(f,r.og(!0,c),3));r.ba=f.h,X(f)})}),this.vb.D(this.A,"ad-content-resume-requested",function(u){if(u=u.offset||0,r.ba){var c=r.ba;c.B&&u&&(c.B+=u)}r.Be.Z(.1)}),this.vb.D(this.A,"ad-content-attach-requested",function(){return Re(function(u){return r.h||!r.Hb?u.u(0):R(u,r.Sb(r.Hb,!0),0)})})),this.qe.D(g,"online",function(){F1(r),r.Jf()}),this.he=new on(function(){for(var u=Date.now()/1e3,c=!1,f=!0,h=m(r.i.variants),v=h.next();!v.done;v=h.next())v=v.value,0<v.disabledUntilTime&&v.disabledUntilTime<=u&&(v.disabledUntilTime=0,c=!0),0<v.disabledUntilTime&&(f=!1);f&&r.he.stop(),c&&fd(r,!1,void 0,!1,!1)}),this.ta=null,e&&(gr("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Sb(e,!0)),this.C=null}Y(hn,Nr);function Av(e){e.L!=null&&(IR(e.L),e.L.release(),e.L=null)}function Xj(e,t){t.lcevc.enabled?(Av(e),e.L==null&&(e.L=new ap(e.h,e.bg,t.lcevc),e.I&&(e.I.T=e.L))):Av(e)}function ai(e,t){return new jn(e,t)}p=hn.prototype,p.destroy=function(){var e=this,t;return Re(function(n){switch(n.g){case 1:return e.m==nu?n.return():(Av(e),t=e.detach(),e.m=nu,R(n,t,2));case 2:return R(n,e.Pe(),3);case 3:if(e.qe&&(e.qe.release(),e.qe=null),e.jd&&(e.jd.release(),e.jd=null),e.l&&(e.l.release(),e.l=null),e.Ta&&(e.Ta.release(),e.Ta=null),e.vb&&(e.vb.release(),e.vb=null),e.za=null,e.g=null,e.s=null,e.ee=null,e.O=null,e.fa=null,!e.F){n.u(4);break}return R(n,e.F.destroy(),5);case 5:e.F=null;case 4:e.o&&(e.o.release(),e.o=null),Nr.prototype.release.call(e),X(n)}})};function cd(e,t){e.dispatchEvent(ai("onstatechange",new Map().set("state",t)))}p.Sb=function(e,t){t=t===void 0?!0:t;var n=this,r,u,c;return Re(function(f){switch(f.g){case 1:if(n.m==nu)throw new Xe(2,7,7e3);if(r=n.h&&n.h==e,!n.h||n.h==e){f.u(2);break}return R(f,n.detach(),2);case 2:return R(f,M1(n,"attach"),4);case 4:if(f.h)return f.return();if(ce(f,5,6),r||(cd(n,"attach"),u=function(){var h=U1(n,!1);h&&dd(n,h)},n.jd.D(e,"error",u),n.h=e),!t||!tr()||n.I){f.u(6);break}return R(f,D1(n),6);case 6:Je(f),n.aa.release(),we(f,0);break;case 5:return c=Ce(f),R(f,n.detach(),10);case 10:throw c}})},p.xh=function(e){this.bg=e},p.detach=function(e){e=e===void 0?!1:e;var t=this;return Re(function(n){if(n.g==1){if(t.m==nu)throw new Xe(2,7,7e3);return R(n,t.ec(!1,e),2)}if(n.g!=3)return R(n,M1(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.jd.Qa(),t.h=null),cd(t,"detach"),t.A&&!e&&t.A.release()}finally{t.aa.release()}X(n)})};function M1(e,t){var n;return Re(function(r){return r.g==1?(n=++e.ye,R(r,N1(e.aa,t),2)):n!=e.ye?(e.aa.release(),r.return(!0)):r.return(!1)})}p.ec=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c,f,h,v,A,N,B,z;return Re(function(J){switch(J.g){case 1:return n.m!=nu&&(n.m=j1),R(J,M1(n,"unload"),2);case 2:return J.h?J.return():(oe(J,3),n.Da=!1,cd(n,"unload"),e&&!tr()&&(e=!1),Av(n),r=n.ld.map(function(fe){return fe()}),n.ld=[],R(J,Promise.all(r),5));case 5:if(n.dispatchEvent(ai("unloading")),n.fd&&(n.fd.release(),n.fd=null),n.h&&(n.l.Qa(),n.Ta.Qa()),n.he.stop(),n.Fb&&(n.Fb.release(),n.Fb=null),n.ge&&(n.ge.stop(),n.ge=null),!n.H){J.u(6);break}return R(J,n.H.stop(),7);case 7:n.H=null,n.bb=null;case 6:if(!n.o){J.u(8);break}return R(J,n.o.stop(),8);case 8:if(!n.j){J.u(10);break}return R(J,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.K&&(n.K.release(),n.K=null),n.G&&(n.G.release(),n.G=null),!Tr("webkit")||!n.B){J.u(12);break}return R(J,n.B.destroy(),13);case 13:n.B=null;case 12:if(!n.I){J.u(14);break}return R(J,n.I.destroy(),15);case 15:n.I=null;case 14:if(n.A&&!t&&n.A.onAssetUnload(),n.ba&&!t&&(n.ba.destroy(),n.ba=null),t||n.Be.stop(),n.O&&qj(n.O),n.fa&&(n.fa.g=null),!n.C){J.u(16);break}return R(J,n.C.destroy(),17);case 17:n.C=null;case 16:if(n.h&&sd(n.h),!n.h||!n.h.src){J.u(18);break}return R(J,new Promise(function(fe){return new on(fe).Z(.1)}),19);case 19:n.h.removeAttribute("src"),n.h.load();case 18:if(!n.B){J.u(20);break}return R(J,n.B.destroy(),21);case 21:n.B=null;case 20:if(n.ta&&n.ea!=n.ta.Gc()&&(n.ta.s||n.ta.destroy(),n.ta=null),n.ea=null,n.$f=null,n.N=null,n.i){for(u=m(n.i.variants),c=u.next();!c.done;c=u.next())for(f=c.value,h=m([f.audio,f.video]),v=h.next();!v.done;v=h.next())(A=v.value)&&A.segmentIndex&&A.segmentIndex.release();for(N=m(n.i.textStreams),B=N.next();!B.done;B=N.next())z=B.value,z.segmentIndex&&z.segmentIndex.release()}n.g.streaming.clearDecodingCache&&(Yh={},dn.clear()),n.i=null,n.s=new tv,n.we=null,n.Fa=null,n.T=null,n.Ae=-1,n.pd=[],n.X=NaN,k1(n);case 3:Je(J),n.aa.release(),we(J,4);break;case 4:if(e&&tr()&&!n.I&&n.h)return R(J,D1(n),0);J.u(0)}})},p.cj=function(e){this.ka=e},p.load=function(e,t,n){t=t===void 0?null:t;var r=this,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee;return Re(function(Le){switch(Le.g){case 1:if(r.m==nu)throw new Xe(2,7,7e3);return u=null,c="",e instanceof sl?(u=e,c=u.Gc()||""):c=e||"",R(Le,N1(r.aa,"load"),2);case 2:if(r.aa.release(),!r.h)throw new Xe(2,7,7002);if(!r.ea){Le.u(3);break}return r.ea=c,R(Le,r.ec(!1),3);case 3:if(f=++r.ye,h=function(){return Re(function(Fe){if(Fe.g==1)return r.ye==f?Fe.u(0):u?R(Fe,u.destroy(),3):Fe.u(3);throw new Xe(2,7,7e3)})},v=function(Fe,it){return Re(function(Ue){switch(Ue.g){case 1:return oe(Ue,2),R(Ue,N1(r.aa,it),4);case 4:return R(Ue,h(),5);case 5:return R(Ue,Fe(),6);case 6:return R(Ue,h(),7);case 7:u&&r.g&&(u.g=r.g);case 2:Je(Ue),r.aa.release(),we(Ue,0)}})},ce(Le,5,6),t==null&&u&&(t=u.getStartTime()),r.ka=t,r.Da=!1,r.dispatchEvent(ai("loading")),u){n=u.X,Le.u(8);break}if(n){Le.u(8);break}return R(Le,v(function(){return Re(function(Fe){if(Fe.g==1)return R(Fe,Cx(r,c),2);n=Fe.h,X(Fe)})},"guessMimeType_"),8);case 8:if(A=!!u,u){sx(u,r),r.s=u.getStats(),Le.u(11);break}return R(Le,Ix(r,c,t,n,!0),12);case 12:(u=Le.h)?(u.A=!1,sx(u,r),r.s=u.getStats(),u.start(),u.m.catch(function(){})):r.s=new tv;case 11:if(N=!u,B=Date.now()/1e3,r.s=u?u.getStats():new tv,r.ea=c,r.$f=n||null,N)return R(Le,v(function(){return Re(function(Fe){return R(Fe,t5(r,n),0)})},"initializeSrcEqualsDrmInner_"),20);if(r.I){Le.u(15);break}return R(Le,v(function(){return Re(function(Fe){return R(Fe,D1(r),0)})},"initializeMediaSourceEngineInner_"),15);case 15:return R(Le,v(function(){return Re(function(Fe){return R(Fe,u.m,0)})},"waitForFinish"),17);case 17:return r.g=u.getConfiguration(),r.ae=u.F,r.bb=u.G,r.H=bj(u),r.H&&r.H.setMediaElement&&r.h&&r.H.setMediaElement(r.h),r.fd=Cj(u),r.$b=u.Ea,r.i=u.gf(),(z=u.o)&&(r.Ea=z),A&&r.h&&r.h.nodeName==="AUDIO"&&(Qj(r),r.configure("manifest.disableVideo",!0)),r.B=Rj(u),R(Le,v(function(){return Re(function(Fe){return R(Fe,r.B.Sb(r.h),0)})},"drmEngine_.attach"),18);case 18:return!(J=u.C)||r.za&&r.za==J||(r.o=Ij(u),r.za=u.C,typeof r.o.setMediaElement!="function"&&(gr("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(gr("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(gr("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),fe=xj(u),pe=u.ga,R(Le,v(function(){return Re(function(Fe){return R(Fe,e5(r,B,pe,fe),0)})},"loadInner_"),19);case 19:Aj(u),Le.u(14);break;case 20:return R(Le,v(function(){return Re(function(Fe){return R(Fe,n5(r,B,n),0)})},"srcEqualsInner_"),14);case 14:r.dispatchEvent(ai("loaded"));case 6:if(Je(Le),!u){Le.u(22);break}return R(Le,u.destroy(),22);case 22:r.ta=null,we(Le,0);break;case 5:if(Ee=Ce(Le),!Ee||Ee.code==7e3){Le.u(24);break}return R(Le,r.ec(!1),24);case 24:throw Ee}})};function Qj(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}p.Zi=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r;return Re(function(u){return u.g==1?R(u,Ax(n),2):u.g!=3?(r=u.h,R(u,n.ec(e,t),3)):u.return(r)})},p.og=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,r;return Re(function(u){return u.g==1?R(u,Ax(n,t),2):u.g!=3?(r=u.h,R(u,n.detach(e),3)):u.return(r)})};function Ax(e,t){t=t===void 0?!1:t;var n,r;return Re(function(u){if(u.g==1)return n=null,e.i&&e.H&&e.bb&&e.ea?(r=e.h.currentTime,e.U()&&!t&&(r=null),R(u,bx(e,e.ea,r,e.$f,!0,!1,!1),3)):u.u(2);if(u.g!=2){n=u.h,e.je.push(n),e.H&&e.H.setMediaElement&&e.H.setMediaElement(null);var c=n,f=e.H,h=e.bb;c.h=e.i,c.j=f,c.G=h,c=n,f=e.za,c.i=e.o,c.C=f,n.o=e.Ea,n.start(),e.i=null,e.H=null,e.bb=null,e.o=null,e.za=null}return u.return(n)})}p.preload=function(e,t,n){t=t===void 0?null:t;var r=this,u;return Re(function(c){return c.g==1?R(c,Ix(r,e,t,n),2):((u=c.h)?u.start():dd(r,new Xe(2,7,7005)),c.return(u))})},p.Pe=function(){var e=this,t,n,r,u;return Re(function(c){for(t=[],n=m(e.je),r=n.next();!r.done;r=n.next())u=r.value,u.s||t.push(u.destroy());return e.je=[],R(c,Promise.all(t),0)})};function Ix(e,t,n,r,u){u=u===void 0?!1:u;var c,f,h;return Re(function(v){return v.g==1?r?v.u(2):R(v,Cx(e,t),3):(v.g!=2&&(r=v.h),Jj(e,r)?v.return(null):(c=!1,f=!0,u&&(e.o&&e.za==e.g.abrFactory&&(f=!1),e.h&&e.h.nodeName==="AUDIO"&&(c=!0)),h=bx(e,t,n,r||null,!u,c,f),h=u?h.then(function(A){return A.A=!1,A}):h.then(function(A){return e.je.push(A),A}),v.return(h)))})}function bx(e,t,n,r,u,c,f){u=u===void 0?!0:u,c=c===void 0?!1:c,f=f===void 0?!0:f;var h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe;return Re(function(rt){return rt.g==1?(h=null,v=Aa(e.g),c&&(v.manifest.disableVideo=!0),A=function(){return h.T&&h.s?null:h},N=function(){return A()?A().getConfiguration():e.g},B=function(dt,gt){A()?h.configure(dt,gt):e.configure(dt,gt)},e.ga.width!=1/0||e.ga.height!=1/0?rt.u(2):R(rt,Ai(),3)):(rt.g!=2&&(z=rt.h,e.ga.width=z.width,e.ga.height=z.height),J=new vr(v,e.ga,null),fe={networkingEngine:e.F,filter:function(dt){var gt,kt;return Re(function(It){if(It.g==1)return R(It,bt(J,dt),2);if(It.g!=4)return gt=It.h,gt?(kt=ai("trackschanged"),R(It,Promise.resolve(),4)):It.u(0);h.dispatchEvent(kt),X(It)})},makeTextStreamsForClosedCaptions:function(dt){return d5(e,dt)},onTimelineRegionAdded:function(dt){var gt=h.H;e:{for(var kt=m(gt.g),It=kt.next();!It.done;It=kt.next())if(It=It.value,It.schemeIdUri==dt.schemeIdUri&&It.id==dt.id&&It.startTime==dt.startTime&&It.endTime==dt.endTime){kt=It;break e}kt=null}kt==null&&(gt.g.add(dt),dt=new jn("regionadd",new Map([["region",dt]])),gt.dispatchEvent(dt))},onEvent:function(dt){return h.dispatchEvent(dt)},onError:function(dt){return h.onError(dt)},isLowLatencyMode:function(){return N().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return N().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){B("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&h.T&&e.j.updateDuration()},newDrmInfo:function(dt){var gt=h.l,kt=gt?gt.g:null;kt&&gt.s&&mn(J,kt.keySystem,dt)},onManifestUpdated:function(){var dt=new Map().set("isLive",e.U());h.dispatchEvent(ai("manifestupdated",dt)),pp(h,!1,function(){e.A&&e.A.onManifestUpdated(e.U())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(dt,gt,kt,It){var Ut=dt;dt=="com.apple.hls.interstitial"&&(Ut="com.apple.quicktime.HLS",dt={startTime:gt,endTime:kt,values:It},e.A)&&e.A.onHLSInterstitialMetadata(e,e.h,dt),It=m(It),dt=It.next();for(var Nt={};!dt.done;Nt={Ff:void 0},dt=It.next())Nt.Ff=dt.value,Nt.Ff.name!="ID"&&pp(h,!1,function(nn){return function(){P1(e,gt,kt,Ut,nn.Ff)}}(Nt))},disableStream:function(dt){return e.disableStream(dt,e.g.streaming.maxDisabledTime)},addFont:function(dt,gt){return e.addFont(dt,gt)}},pe=new f1(function(){return e.Pb()}),pe.addEventListener("regionadd",function(dt){var gt=dt.region;Ep(e,"timelineregionadded",gt,h),pp(h,!1,function(){e.A&&(e.A.onDashTimedMetadata(gt),e.A.onDASHInterstitialMetadata(e,e.h,gt))})}),Ee=null,v.streaming.observeQualityChanges&&(Ee=new rv(function(){return e.xb()}),Ee.addEventListener("qualitychange",function(dt){Vx(e,dt.quality,dt.position)}),Ee.addEventListener("audiotrackchange",function(dt){Vx(e,dt.quality,dt.position,!0)})),Le=!0,Fe={Mb:e.F,onError:function(dt){return h.onError(dt)},be:function(dt){pp(h,!0,function(){e:{var gt=dt,kt=ai("keystatuschanged");e.dispatchEvent(kt);var It=Object.keys(gt);It.length==1&&It[0]==""&&(It=["00"],gt={"00":gt[""]}),kt=It.length==1&&It[0]=="00";var Ut=!1;if(It.length){It=m(e.i.variants);for(var Nt=It.next();!Nt.done;Nt=It.next()){Nt=Nt.value;var nn=[];Nt.audio&&nn.push(Nt.audio),Nt.video&&nn.push(Nt.video),nn=m(nn);for(var Kt=nn.next();!Kt.done;Kt=nn.next()){var $t=Kt.value;if(Kt=Nt.allowedByKeySystem,$t.keyIds.size){Nt.allowedByKeySystem=!0,$t=m($t.keyIds);for(var En=$t.next();!En.done;En=$t.next())En=En.value,((En=gt[kt?"00":En])||e.B.F)&&(Nt.allowedByKeySystem=Nt.allowedByKeySystem&&!!En&&!Zn.includes(En))}Kt!=Nt.allowedByKeySystem&&(Ut=!0)}}}if(Ut&&(es(e),!Lc(e)))break e;(gt=e.j.j)&&!gt.allowedByKeySystem&&fd(e)}})},onExpirationUpdated:function(dt,gt){var kt=ai("expirationupdated");h.dispatchEvent(kt),(kt=h.j)&&kt.onExpirationUpdated&&kt.onExpirationUpdated(dt,gt)},onEvent:function(dt){h.dispatchEvent(dt),dt.type=="drmsessionupdate"&&Le&&(Le=!1,dt=Date.now()/1e3-h.ta,(e.s||h.getStats()).j=dt,e.L&&IR(e.L))}},it=Mx(e,A),Jh(e.F,it),Ue=function(){return e.Bc(Fe)},Qe={config:v,ti:fe,Di:pe,Ci:Ee,Bc:Ue,si:J,networkingEngine:it,wh:u,vh:f},h=new sl(t,r,n,Qe),rt.return(h))})}function Cx(e,t){var n,r;return Re(function(u){return u.g==1?(n=e.g.manifest.retryParameters,R(u,pv(t,e.F,n),2)):(r=u.h,r=="application/x-mpegurl"&&Ao()&&(r="application/vnd.apple.mpegurl"),u.return(r))})}function Jj(e,t){if(!tr())return!0;if(t){if((e.h||ir()).canPlayType(t)=="")return!1;if(!(tr()&&t in Yn))return!0;if(Ff(t))return Ao()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls}return!1}function Rx(e){var t=e.g.textDisplayFactory;t!==e.we&&(e.C=t(),e.C.configure?e.C.configure(e.g.textDisplayer):gr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.we=t,e.C.setTextVisibility(e.oa))}function D1(e){var t,n,r;return Re(function(u){if(u.g==1)return cd(e,"media-source"),Rx(e),t=u5(e.h,e.C,{Oh:function(){return e.keySystem()},onMetadata:function(c,f,h){xx(e,c,f,h)}},e.L),t.configure(e.g.mediaSource),n=e.g.manifest,r=n.segmentRelativeVttTiming,t.fa=r,R(u,t.K,2);e.I=t,X(u)})}function e5(e,t,n,r){var u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It;return Re(function(Ut){switch(Ut.g){case 1:cd(e,"load"),u=e.h,e.K=new up({Kd:function(){return u.playbackRate},lc:function(){return u.defaultPlaybackRate},Rf:function(Nt){u.playbackRate=Nt},Ig:function(Nt){u.currentTime+=Nt}}),c=function(){return Iv(e)},f=function(){return Bx(e)},e.l.D(u,"playing",c),e.l.D(u,"pause",c),e.l.D(u,"ended",c),e.l.D(u,"ratechange",f),Xj(e,e.g),e.Eb=e.g.preferredTextLanguage,e.nd=e.g.preferredTextRole,e.md=e.g.preferForcedSubs,B1(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(Nt,nn,Kt){e.i&&e.j&&Nt!=e.j.j&&Cv(e,Nt,!0,nn===void 0?!1:nn,Kt===void 0?0:Kt)}),e.o.setMediaElement(u),e.o.setCmsdManager(e.fa),e.j=c5(e),e.j.configure(e.g.streaming),e.m=$o,u.textTracks&&e.l.D(u.textTracks,"addtrack",function(Nt){if(Nt.track)switch(Nt=Nt.track,Nt.kind){case"chapters":Nx(e,Nt)}}),e.dispatchEvent(ai("streaming")),h=n;case 2:for((A=e.j.j)||h||(h=Lc(e)?e.o.chooseVariant():null),N=[],v=A||h,B=m([v.video,v.audio]),z=B.next();!z.done;z=B.next())(J=z.value)&&!J.segmentIndex&&N.push(J.createSegmentIndex());if(!(0<N.length)){Ut.u(4);break}return R(Ut,Promise.all(N),4);case 4:if(!v||v.disabledUntilTime!=0){Ut.u(2);break}if(e.H&&e.H.onInitialVariantChosen&&e.H.onInitialVariantChosen(v),e.i.isLowLatency&&!e.g.streaming.lowLatencyMode&&Ke("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),e.O&&Gj(e.O,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),B1(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),aj(e.j,e.g.playRangeStart,e.g.playRangeEnd),fe=function(Nt){e.G=a5(e,Nt),e.Fb=s5(e,Nt),Dx(e,u,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||(pe=e.ka,pe==null&&e.i.startTime&&(pe=e.i.startTime),fe(pe)),A){Ut.u(7);break}if(!e.g.streaming.startAtSegmentBoundary){Ut.u(8);break}return Ee=e.i.presentationTimeline,Le=e.ka||e.h.currentTime,e.ka==null&&e.i.startTime&&(Le=e.i.startTime),Fe=Ee.Jb(),it=Ee.zb(),Le<Fe?Le=Fe:Le>it&&(Le=it),R(Ut,h5(h,Le),9);case 9:Ue=Ut.h,fe(Ue);case 8:Cv(e,h,!0,!1,0);case 7:return e.G.ready(),Qe=e.Hc().find(function(Nt){return Nt.active}),Qe||((rt=Ul(e.i.textStreams,e.Eb,e.nd,e.md)[0]||null)&&u1(e.s.h,rt,!0),h&&(rt?(p5(e,h.audio,rt)&&(e.oa=!0),e.oa&&e.C.setTextVisibility(!0),Gx(e)):e.oa=!1),rt&&(e.g.streaming.alwaysStreamText||e.rf())&&av(e.j,rt)),R(Ut,e.j.start(r),10);case 10:e.g.abr.enabled&&(e.o.enable(),Hx(e)),es(e),Lc(e),e.i.variants.some(function(Nt){return Nt.primary}),((dt=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(gt=function(){return jx(e)},e.l.D(u,"timeupdate",gt)),dt||(kt=function(){return bv(e)},e.l.D(u,"timeupdate",kt),bv(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(It=function(){var Nt;return Re(function(nn){if(nn.g==1)return Nt=e.h.duration-e.h.currentTime,isNaN(Nt)||!(Nt<=e.g.streaming.preloadNextUrlWindow)?nn.u(0):(e.l.$a(u,"timeupdate",It),R(nn,e.preload(e.i.nextUrl),4));e.ta=nn.h,X(nn)})},e.l.D(u,"timeupdate",It)),e.l.D(u,"ended",function(){e.load(e.ta||e.i.nextUrl)}))),e.A&&e.A.onManifestUpdated(dt),e.Da=!0,e.l.pa(u,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),X(Ut)}})}function t5(e,t){var n,r,u,c,f;return Re(function(h){return h.g==1?(n=Mi,r=Date.now()/1e3,u=!0,e.B=e.Bc({Mb:e.F,onError:function(v){dd(e,v)},be:function(){},onExpirationUpdated:function(){var v=ai("expirationupdated");e.dispatchEvent(v)},onEvent:function(v){e.dispatchEvent(v),v.type=="drmsessionupdate"&&u&&(u=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.g.drm),c={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},f={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Ca(t):"",codecs:t?Oo(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ja,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},f.fullMimeTypes.add(Di(f.mimeType,f.codecs)),t.startsWith("audio/")?(f.type=n.Y,c.audio=f):c.video=f,e.B.ba=!0,R(h,ke(e.B,[c],[]),2)):R(h,e.B.Sb(e.h),0)})}function n5(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe;return Re(function(pe){if(pe.g==1)return cd(e,"src-equals"),r=e.h,e.G=new ZR(r),u=!1,e.ld.push(function(){u=!0}),e.ka!=null&&e.G.Ee(e.ka),e.K=new up({Kd:function(){return r.playbackRate},lc:function(){return r.defaultPlaybackRate},Rf:function(Ee){r.playbackRate=Ee},Ig:function(Ee){r.currentTime+=Ee}}),c=e.g.streaming.rebufferingGoal,Dx(e,r,c),f=function(){return Iv(e)},h=function(){return Bx(e)},e.l.D(r,"playing",f),e.l.D(r,"pause",f),e.l.D(r,"ended",f),e.l.D(r,"ratechange",h),r.preload!="none"&&e.l.pa(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.l.D(r.audioTracks,"addtrack",function(){return es(e)}),e.l.D(r.audioTracks,"removetrack",function(){return es(e)}),e.l.D(r.audioTracks,"change",function(){return es(e)})),r.textTracks&&(Rx(e),e.l.D(r.textTracks,"addtrack",function(Ee){if(Ee.track)switch(Ee=Ee.track,Ee.kind){case"metadata":o5(e,Ee);break;case"chapters":Nx(e,Ee);break;default:es(e)}}),e.l.D(r.textTracks,"removetrack",function(){return es(e)}),e.l.D(r.textTracks,"change",function(){return es(e)}),e.l.D(r,"enterpictureinpicture",function(){var Ee=yp(e).find(function(Le){return Le.mode!=="disabled"});Ee&&(Ee.mode="showing")}),e.l.D(r,"leavepictureinpicture",function(){var Ee=yp(e).find(function(Le){return Le.mode!=="disabled"});Ee&&(Ee.mode="hidden")})),v=Hj(e.O,e.ea,n),!v.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(v+="#t=",0<e.g.playRangeStart&&(v+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(v+=","+e.g.playRangeEnd)),r.src=v,(di()||li())&&r.load(),r.preload!="none"&&!r.autoplay&&Ff(n)&&Zs()&&r.load(),e.m=Zo,e.dispatchEvent(ai("streaming")),A=new Lr,td(r,HTMLMediaElement.HAVE_METADATA,e.l,function(){e.G.ready(),A.resolve()}),td(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.l,function(){var Ee,Le,Fe,it,Ue;return Re(function(Qe){if(Qe.g==1)return r5(e),Ee=yp(e),Ee.find(function(rt){return rt.mode!="disabled"})?(0<Ee.length&&(e.oa=!0,e.C.setTextVisibility(!0)),Qe.u(2)):R(Qe,new Promise(function(rt){e.l.pa(r.textTracks,"change",rt),new on(rt).Z(1)}),2);if(u)return Qe.return();for(Le=!1,Fe=m(Ee),it=Fe.next();!it.done;it=Fe.next())Ue=it.value,Ue.mode!=="disabled"&&(Le?(Ue.mode="disabled",Ke("Found more than one enabled text track, disabling it",Ue)):(Lx(e,Ue),Le=!0));i5(e),X(Qe)})}),r.error?A.reject(U1(e)):r.preload=="none"&&(Ke('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),A.resolve()),e.l.pa(r,"error",function(){A.reject(U1(e))}),N=new Promise(function(Ee,Le){new on(Le).Z(e.g.streaming.loadTimeout)}),R(pe,Promise.race([A,N]),2);((B=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(z=function(){return jx(e)},e.l.D(r,"timeupdate",z)),B||(J=function(){return bv(e)},e.l.D(r,"timeupdate",J),bv(e)),e.A&&(e.A.onManifestUpdated(B),B&&(fe=e.Pb().end,e.l.D(r,"progress",function(){var Ee=e.Pb().end;fe!=Ee&&(e.A.onManifestUpdated(e.U()),fe=Ee)}))),e.Da=!0,X(pe)})}function r5(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Ug(t,e.g.preferredVariantRole)}function i5(e){var t=e.g.preferredTextLanguage;t!=""&&e.Lf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function o5(e,t){if(t.kind=="metadata"){t.mode="hidden",e.l.D(t,"cuechange",function(){if(t.activeCues)for(var r=m(t.activeCues),u=r.next();!u.done;u=r.next())u=u.value,P1(e,u.startTime,u.endTime,u.type,u.value),e.A&&e.A.onCueMetadataChange(u.value);if(t.cues){r=[],u=m(t.cues);for(var c=u.next(),f={};!c.done;f={Ub:void 0},c=u.next())f.Ub=c.value,f.Ub.type=="com.apple.quicktime.HLS"&&f.Ub.startTime!=null&&(c=r.find(function(h){return function(v){return v.startTime==h.Ub.startTime&&v.endTime==h.Ub.endTime}}(f)),c||(c={startTime:f.Ub.startTime,endTime:f.Ub.endTime,values:[]},r.push(c)),c.values.push(f.Ub.value));for(r=m(r),u=r.next();!u.done;u=r.next())u=u.value,u.values.some(function(h){return h.key=="X-ASSET-URI"||h.key=="X-ASSET-LIST"})&&e.A&&(u.values.push({key:"CUE",description:"",data:u.startTime==0?"ONCE,PRE":"ONCE",mimeType:null,pictureType:null}),e.A.onHLSInterstitialMetadata(e,e.h,u))}});var n=new on(function(){var r=f5(e);r=m(r);for(var u=r.next();!u.done;u=r.next())u.value.mode="hidden"}).wc().Z(.5);e.ld.push(function(){n.stop()})}}function xx(e,t,n,r){t=m(t);for(var u=t.next();!u.done;u=t.next())if(u=u.value,u.data&&typeof u.cueTime=="number"&&u.frames){var c=u.cueTime+n,f=r;f&&c>f&&(f=c);for(var h=m(u.frames),v=h.next();!v.done;v=h.next())P1(e,c,f,"org.id3",v.value);e.A&&e.A.onHlsTimedMetadata(u,c)}}function P1(e,t,n,r,u){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",u),e.dispatchEvent(ai("metadata",t))}function Nx(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new on(function(){t.mode="hidden"}).wc().Z(.5);e.ld.push(function(){n.stop()})}}p.Hi=function(){for(var e=this.aa;e.g;)e.release()},p.Bc=function(e){return new Ze(e)};function Mx(e,t){function n(u){t()?t().dispatchEvent(u):e.dispatchEvent(u)}function r(u){t()?pp(t(),!0,u):u()}return t||(t=function(){return null}),new zr(function(u,c,f,h){var v=t()?t().i:e.o;v&&v.segmentDownloaded(u,c,f,h)},function(u,c,f){c=new Map().set("headers",u).set("request",c).set("requestType",f),n(ai("downloadheadersreceived",c)),r(function(){if(e.fa){var h=e.fa;if(h.h.enabled){var v=u["cmsd-static"];if(v)try{var A=new Map,N=v.split(",");for(v=0;v<N.length;v++){var B=N[v].split("=");A.set(B[0],yx(B[1]))}}catch(Ee){}if(A=u["cmsd-dynamic"]){try{var z=new Map,J=A.split(";");for(A=1;A<J.length;A++){var fe=J[A].split("=");z.set(fe[0],yx(fe[1]))}var pe=z}catch(Ee){pe=null}pe&&(h.g=pe)}}}})},function(u,c,f,h){u=new Map().set("request",u).set("error",c).set("httpResponseCode",f).set("aborted",h),n(ai("downloadfailed",u))},function(u,c,f){r(function(){var h=e.O,v=f;if(v=v===void 0?{}:v,h.g.enabled)if(c.method==="HEAD")ld(h,c);else switch(u){case 0:try{if(h.g.enabled){if(v.type){e:{switch(v.type){case 4:var A=h.j?Tv:_v;break e;case 3:case 2:A=h.j?wv:Sv;break e;case 5:A="s";break e}A=void 0}h.i=A}ld(h,c,{ot:vx,su:!h.l})}}catch(Kt){wt("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Kt)}break;case Wa:try{if(h.g.enabled){var N=v.segment;A=0,N&&(A=N.endTime-N.startTime);var B={d:1e3*A,st:h.h.U()?"l":"v"};B.ot=Kj(v);var z=B.ot===vv||B.ot===mv||B.ot===yv||B.ot===Ev,J=v.stream;if(J){var fe=h.h.fb();if(z&&(B.bl=zj(h,J.type),B.ot!==Ev)){var pe=mx(h,J.type);B.dl=fe?pe/Math.abs(fe):pe}if(J.bandwidth&&(B.br=J.bandwidth/1e3),J.segmentIndex&&N){var Ee=J.segmentIndex.Ib(N.endTime,!0,0>fe);if(Ee){var Le=Ee.next().value;if(Le&&Le!=N){if(!fn(N.M(),Le.M())){var Fe=Le.M()[0],it=c.uris[0],Ue=new URL(Fe),Qe=new URL(it);if(Ue.origin!==Qe.origin)var rt=Fe;else{for(var dt=Ue.pathname.split("/").slice(1),gt=Qe.pathname.split("/").slice(1,-1);dt[0]===gt[0];)dt.shift(),gt.shift();for(;gt.length;)gt.shift(),dt.unshift("..");rt=dt.join("/")}B.nor=rt}if((Le.Ha||Le.va)&&(N.Ha!=Le.Ha||N.va!=Le.va)){var kt=Le.Ha+"-";Le.va&&(kt+=Le.va),B.nrr=kt}}}var It=h.h.fb()||1,Ut=mx(h,J.type)||500,Nt=J.bandwidth,nn=Nt?Nt*(N.endTime-N.startTime)/1e3/(Ut/It/1e3)*h.g.rtpSafetyFactor:NaN;isNaN(nn)||(B.rtp=nn)}}z&&B.ot!==Ev&&(B.tb=Yj(h,B.ot)/1e3),ld(h,c,B)}}catch(Kt){wt("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Kt)}break;case 2:case 5:case 6:ld(h,c,{ot:"k"});break;case 4:ld(h,c,{ot:"o"})}})},function(u,c,f,h){(u=t()?t().j:e.H)&&u.banLocation&&u.banLocation(h)},function(u,c){if(c.data){c=c.data.byteLength;var f=t()?t().getStats():e.s;f&&(f.hc=isNaN(f.hc)?c:f.hc+c,u===0&&(f.Eg=c))}})}function a5(e,t){return new qR(e.h,e.i,e.g.streaming,t,function(){e.Fb&&YR(e.Fb,!0),e.j&&e.j.Rc(),e.N&&Oc(e)},function(n){return e.dispatchEvent(n)})}function s5(e,t){t=new hv(e.fd,e.U()||0<t),t.addEventListener("enter",function(r){Ep(e,"timelineregionenter",r.region)}),t.addEventListener("exit",function(r){Ep(e,"timelineregionexit",r.region)}),t.addEventListener("skip",function(r){var u=r.region;r.seeking||(Ep(e,"timelineregionenter",u),Ep(e,"timelineregionexit",u))});var n=new zR(e.h);return n.g.add(t),e.$b&&n.g.add(e.$b),n}function Dx(e,t,n){e.N=new jm,e.N.g=nl,Zm(e.N,n,Math.min(.5,n/2)),k1(e),e.ge=new on(function(){Oc(e)}).Ra(.25),e.l.D(t,"waiting",function(){return Oc(e)}),e.l.D(t,"stalled",function(){return Oc(e)}),e.l.D(t,"canplaythrough",function(){return Oc(e)}),e.l.D(t,"progress",function(){return Oc(e)})}function Oc(e){switch(e.m){case Zo:if(e.h.ended)var t=!0;else{var n=yn(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case $o:e:if(e.h.ended||xR(e.I))t=!0;else{if(e.i.presentationTimeline.U()){n=e.i.presentationTimeline.Xb();var r=yn(e.h.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=yr(e.h.buffered,e.h.currentTime),n=e.N;var u=t,c=n.i.get(n.g);t=n.g,r=u||r>=c?Nc:nl,n.g=r,(t=t!=r)&&r===Nc&&(n.h=Date.now()),t&&k1(e)}function u5(e,t,n,r){return new CR(e,t,n,r)}function l5(e){return new gx({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},xb:function(){return e.xb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},fb:function(){return e.fb()},yb:function(){return e.yb()},mc:function(){return e.mc()},U:function(){return e.U()}},e.g.cmcd)}function c5(e){return new ex(e.i,{Jd:function(){return e.G?e.G.wd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},fb:function(){return e.fb()},ca:e.I,Mb:e.F,onError:function(t){return dd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},zi:function(){e.H&&e.H.update&&e.H.update()},Bf:function(t,n){var r=t.startTime;t=t.endTime;var u=n.type;if(n=n.codecs.includes(","),e.G){e.G.Jg();var c=e1(e.I,u);!e.U()&&e.h.paused&&c!=null&&u!=_r&&0<c&&e.G.wd()<c&&e.G.Ee(c)}Oc(e),r=new Map().set("start",r).set("end",t).set("contentType",u).set("isMuxed",n),e.dispatchEvent(ai("segmentappended",r))},yi:function(t,n){(n=n.Kc)&&e.$b&&ej(e.$b,n,t)},hg:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){t=new ze(nr(n)),n=0;for(var u=m(t.data),c=u.next();!c.done;c=u.next())n+=c.value.length;if(n==0)r=Promise.resolve();else{for(n=new Uint8Array(n),u=0,t=m(t.data),c=t.next();!c.done;c=t.next())c=c.value,n.set(c,u),u+=c.length;Pe(r,"cenc",n),r=r.l}}else r=Promise.resolve();return r},onMetadata:function(t,n,r){xx(e,t,n,r)},disableStream:function(t,n){return e.disableStream(t,n)}})}p.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=cv(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(gr("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(gr("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(gr("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&Ao(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){gr("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var r=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+r,e.streaming.liveSync.targetLatencyTolerance=r}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(gr("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(gr("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(gr("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(gr("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(gr("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(gr("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(gr("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(gr("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){gr("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var u=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return u},delete e.mediaSource.sourceBufferExtraFeatures}return e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(gr("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.maxDisabledTime==null&&(e.streaming.maxDisabledTime=1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.dash==null&&(e.manifest.dash={}),e.manifest.dash.autoCorrectDrift==null&&(e.manifest.dash.autoCorrectDrift=!1),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100)),n=ql(this.g,e,ul(this)),Px(this),n};function Px(e){if(e.ae=new vr(e.g,e.ga,e.B),e.H){var t=Aa(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.H.configure(t)}if(e.B&&e.B.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.m!=nu&&qt(e.ae,e.i)&&es(e)}catch(u){dd(e,u)}e.o&&Lc(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||fd(e)}if(e.F&&(e.F.Pf(e.g.streaming.forceHTTP),e.F.Qf(e.g.streaming.forceHTTPS),e.F.m=e.g.streaming.minBytesForProgressEvents),e.I&&(e.I.configure(e.g.mediaSource),e.I.fa=e.g.manifest.segmentRelativeVttTiming),e.C)if(t=e.g.textDisplayFactory,e.we!=t){var n=e.C;if(e.C=t(),e.C.configure?e.C.configure(e.g.textDisplayer):gr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.C.setTextVisibility(n.isTextVisible()),n.destroy(),e.I){n=e.I;var r=e.C;n.ba=r,n.g&&(n.g.j=r)}e.we=t,e.j&&(t=e.j,(n=t.i.get(_r))&&rd(t,n.stream,!0,0,!0))}else e.C.configure&&e.C.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),Hx(e)),e.N&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Zm(e.N,t,Math.min(.5,t/2))),e.i&&B1(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.O&&e.O.configure(e.g.cmcd),e.fa&&e.fa.configure(e.g.cmsd)}p.getConfiguration=function(){var e=ul(this);return ql(e,this.g,ul(this)),e},p.xg=function(){var e=ul(this);return ql(e,this.g,ul(this)),ix(this.g,ul(this))},p.tg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Pb().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},p.Li=function(){for(var e in this.g)delete this.g[e];ql(this.g,ul(this),ul(this)),Px(this)},p.ff=function(){return this.m},p.hf=function(){return this.i?this.i.type:null},p.Sh=function(){return this.h},p.yb=function(){return this.F},p.Gc=function(){return this.ea},p.sg=function(){return this.A?this.A:null},p.U=function(){return this.i?this.i.presentationTimeline.U():this.h&&this.h.src?this.h.duration==1/0:!1},p.pc=function(){return this.i?this.i.presentationTimeline.pc():!1},p.ii=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},p.Pb=function(){if(this.i){if(!this.Da&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Jb(),end:e.zb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},p.fi=function(){this.U()&&(this.h.currentTime=this.Pb().end)},p.ji=function(){return this.Da},p.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},p.drmInfo=function(){return this.B?this.B.g:null},p.ad=function(){return this.B?this.B.ad():1/0},p.ef=function(){return this.B?this.B.ef():[]},p.Id=function(){return this.B?this.B.Id():{}},p.pf=function(){return this.N?this.N.g==nl:!1},p.fb=function(){return this.h?this.K?this.K.i:1:0},p.ud=function(e,t){var n=this;t=t===void 0?!0:t,e==0?Ke("A trick play rate of 0 is unsupported!"):(this.Ta.Qa(),this.h.paused&&this.h.play(),this.K.set(e),this.m==$o&&(this.o.playbackRateChanged(e),p1(this.j,t&&1<Math.abs(e))),this.U()&&this.Ta.D(this.h,"timeupdate",function(){var r=n.h.currentTime,u=n.Pb(),c=n.g.streaming.safeSeekOffset;0<e?Math.floor(r)>=Math.floor(u.end)&&n.Uc():Math.floor(r)<=Math.floor(u.start+c)&&n.Uc()}))},p.Uc=function(){var e=this.K.lc();this.m==Zo&&this.K.set(e),this.m==$o&&(this.K.set(e),this.o.playbackRateChanged(e),p1(this.j,!1)),this.Ta.Qa()},p.mc=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=m(this.i.variants),u=r.next();!u.done;u=r.next())if(u=u.value,Fl(u)){var c=kl(u);c.active=u==e,c.active||n==1||e==null||u.video!=e.video||u.audio!=e.audio||(c.active=!0),c.active&&n++,t.push(c)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(f){return Hf(f)}):[]},p.Hc=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=m(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var u=Zf(r);u.active=r==e,t.push(u)}return t}return this.h&&this.h.src&&this.h.textTracks?yp(this).map(function(c){return Dm(c)}):[]},p.Mh=function(){var e=this.pd;return this.i&&(e=this.i.imageStreams),e.map(function(t){return qf(t)})},p.Eh=function(e){var t=this,n,r,u,c;return Re(function(f){return f.g==1?t.m!=$o&&t.m!=Zo?f.return(null):(n=t.pd,t.i&&(n=t.i.imageStreams),(r=n.find(function(h){return h.id==e}))?r.segmentIndex?f.u(2):R(f,r.createSegmentIndex(),2):f.return(null)):f.g!=4?(u=[],r.segmentIndex.Gb(function(h){var v=Ox(h.tilesLayout||r.tilesLayout);if(v){v=v.rows*v.ic;for(var A=h.j-h.startTime,N=0;N<v;N++)u.push(t.zg(e,h.startTime+A*N/v))}}),R(f,Promise.all(u),4)):(c=f.h,f.return(c.filter(function(h){return h})))})};function Ox(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{ic:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}p.zg=function(e,t){var n=this,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue;return Re(function(Qe){return Qe.g==1?n.m!=$o&&n.m!=Zo?Qe.return(null):(r=n.pd,n.i&&(r=n.i.imageStreams),(u=r.find(function(rt){return rt.id==e}))?u.segmentIndex?Qe.u(2):R(Qe,u.createSegmentIndex(),2):Qe.return(null)):(c=u.segmentIndex.find(t),c==null||(f=u.segmentIndex.get(c),h=Ox(f.tilesLayout||u.tilesLayout),!h)?Qe.return(null):(v=u.width||0,A=u.height||0,N=v/h.ic,B=A/h.rows,z=h.ic*h.rows,J=f.j-f.startTime,fe=f.B||J/z,pe=f.startTime,Le=Ee=0,1<z&&(Fe=Math.floor((t-f.startTime)/fe),pe=f.startTime+Fe*fe,Ee=Fe%h.ic*N,Le=Math.floor(Fe/h.ic)*B),it=!1,(Ue=f.A)&&(it=!0,B=Ue.height,Ee=Ue.positionX,Le=Ue.positionY,N=Ue.width),Qe.return({segment:f,imageHeight:A,imageWidth:v,height:B,positionX:Ee,positionY:Le,startTime:pe,duration:fe,uris:f.M(),width:N,sprite:it})))})},p.Vg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.s&&(u1(this.s.h,t,!1),av(this.j,t),Rv(this),this.Eb=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){var n=yp(this);t=n.find(function(r){return r.mode!=="disabled"}),n=n.find(function(r){return Gf(r)===e.id}),t!==n&&(t&&(t.mode="disabled",this.l.$a(t,"cuechange"),this.C.remove(0,1/0)),n&&Lx(this,n)),Rv(this)}};function Lx(e,t){e.l.D(t,"cuechange",function(){e.C.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n=Array.from(t.activeCues||[]).map(Lj).filter(Ys);e.C.append(n)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}p.Mf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){var r=this.i.variants.find(function(c){return c.id==e.id});if(r&&Fl(r)){var u=this.j.j;this.g.abr.enabled&&(u.video!=r.video||u.audio&&r.audio&&u.audio.language==r.audio.language&&u.audio.channelsCount==r.audio.channelsCount)&&Ke("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack()."),Cv(this,r,!1,t,n),this.Ea=new Bm(r,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Lc(this)}}else if(this.h&&this.h.audioTracks){for(t=Array.from(this.h.audioTracks),t=m(t),n=t.next();!n.done;n=t.next())if(n=n.value,Gf(n)==e.id){Zx(this,n);break}}},p.Gh=function(){return zx(this.mc())},p.Zh=function(){return zx(this.Hc())},p.Fh=function(){return Array.from(Kx(this.mc()))},p.Yh=function(){return Array.from(Kx(this.Hc()))},p.Ug=function(e,t,n,r,u){if(n=n===void 0?0:n,r=r===void 0?0:r,u=u===void 0?"":u,this.i&&this.G){this.Ea=new Bl(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,u),e=function(f,h){return f.video||h.video?f.video&&h.video?Math.abs((f.video.height||0)-(h.video.height||0))+Math.abs((f.video.width||0)-(h.video.width||0)):1/0:0},t=this.j.j,u=this.Ea.create(this.i.variants),n=null,u=m(u.values());for(var c=u.next();!c.done;c=u.next())c=c.value,Fl(c)&&(!n||e(n,t)>e(c,t))&&(n=c);n!=t&&(n?(e=kl(n),this.Mf(e,!0,r)):fd(this))}else this.h&&this.h.audioTracks&&(r=Ul(this.mc(),e,t||"",!1)[0])&&this.Mf(r)},p.Lf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.G?(this.Eb=e,this.nd=t||"",this.md=n,(e=Ul(this.i.textStreams,this.Eb,this.nd,this.md)[0]||null)&&e!=this.j.s&&(u1(this.s.h,e,!1),this.g.streaming.alwaysStreamText||this.rf())&&(av(this.j,e),Rv(this))):(e=Ul(this.Hc(),e,t||"",n)[0])&&this.Vg(e)},p.Ri=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.G){for(var r=null,u=m(this.i.variants),c=u.next();!c.done;c=u.next())if(c=c.value,c.audio.label==e){r=c;break}r!=null&&(this.Ea=new Bl(r.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),fd(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=m(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&Zx(this,t)}},p.rf=function(){var e=this.oa;return this.C?this.C.isTextVisible():e},p.ug=function(){return this.h&&this.h.src&&this.h.textTracks?kx(this).map(function(e){return Dm(e)}):[]},p.Ih=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=Or(e),n=kx(this).filter(function(h){return Or(h.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=m(n);for(var u=n.next();!u.done;u=n.next())if((u=u.value)&&u.cues){u=m(u.cues);for(var c=u.next();!c.done;c=u.next()){var f=c.value;(c=f.id)&&c!=""||(c=f.startTime+"-"+f.endTime+"-"+f.text),f={id:c,title:f.text,startTime:f.startTime,endTime:f.endTime},r.has(c)||(e.push(f),r.add(c))}}return e};function yp(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function f5(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}function kx(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="chapters"})}p.ah=function(e){e=!!e,this.oa!=e&&(this.oa=e,this.m==$o?(this.C.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||(e=Ul(this.i.textStreams,this.Eb,this.nd,this.md),0<e.length&&(av(this.j,e[0]),Rv(this))):uj(this.j))):this.h&&this.h.src&&this.h.textTracks&&this.C.setTextVisibility(e),Gx(this))},p.Uh=function(){if(this.G)var e=this.G.wd();else{if(this.ka==null)return new Date;e=this.ka}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},p.yg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},p.Ld=function(){return this.U()&&this.i?this.i.presentationTimeline.Ld():null},p.xb=function(){if(this.m==$o)return this.I.xb();var e={total:[],audio:[],video:[],text:[]};return this.m==Zo&&(e.total=gi(this.h.buffered)),e},p.getStats=function(){if(this.m!=$o&&this.m!=Zo)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Iv(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.U()){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.G&&(this.s.T=this.G.cg(),this.s.X=this.G.dg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.O=Number(n.droppedVideoFrames),t.N=r,this.s.L=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.m==$o){if(n=this.j.j,t=this.j.s,n){r=this.K?this.K.i:1;var u=r*n.bandwidth;t&&t.bandwidth&&(u+=r*t.bandwidth),this.s.B=u}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.U()&&(n=this.yg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&(this.s.G=this.i.periodCount,this.s.F=this.i.gapCount,this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.h)),n=this.o.getBandwidthEstimate(),this.s.A=n}this.m==Zo&&(n=this.s,n.hc=isNaN(n.hc)?NaN:n.hc+NaN,n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var c=this.s;e=c.o,n=c.l,t=c.B,r=c.N,u=c.O;var f=c.L,h=c.X,v=c.T,A=c.A,N=c.i,B=c.m,z=c.H,J=c.j,fe=s1(c.g,"playing"),pe=s1(c.g,"paused"),Ee=s1(c.g,"buffering"),Le=c.s,Fe=c.C,it=c.I,Ue=c.Eg,Qe=c.hc,rt=c.K,dt=c.G,gt=c.F,kt=W8(c.g),It=[];c=m(c.h.g);for(var Ut=c.next();!Ut.done;Ut=c.next())Ut=Ut.value,It.push({timestamp:Ut.timestamp,id:Ut.id,type:Ut.type,fromAdaptation:Ut.fromAdaptation,bandwidth:Ut.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:u,corruptedFrames:f,stallsDetected:h,gapsJumped:v,estimatedBandwidth:A,completionPercent:N,loadLatency:B,manifestTimeSeconds:z,drmTimeSeconds:J,playTime:fe,pauseTime:pe,bufferingTime:Ee,licenseTime:Le,liveLatency:Fe,maxSegmentDuration:it,manifestSizeBytes:Ue,bytesDownloaded:Qe,nonFatalErrorCount:rt,manifestPeriodCount:dt,manifestGapCount:gt,stateHistory:kt,switchHistory:It}},p.sh=function(e,t,n,r,u,c,f){f=f===void 0?!1:f;var h=this,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it;return Re(function(Ue){switch(Ue.g){case 1:if(h.m!=$o&&h.m!=Zo)throw new Xe(1,7,7004);if(n!="subtitles"&&n!="captions"&&Ke("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){Ue.u(2);break}return R(Ue,O1(h,e),3);case 3:r=Ue.h;case 2:if(v=[],h.A&&(v=h.A.getCuePoints()),h.m!=Zo){Ue.u(4);break}return f&&(n="forced"),R(Ue,Fx(h,e,t,n,r,c||"",v),5);case 5:if(A=Or(t),N=h.Hc(),B=N.find(function(Qe){return Or(Qe.language)==A&&Qe.label==(c||"")&&Qe.kind==n}))return es(h),Ue.return(B);throw new Xe(1,2,2012);case 4:if(z=Mi,J=h.h.duration,h.i&&(J=h.i.presentationTimeline.getDuration()),J==1/0)throw new Xe(1,4,4033);if(!v.length){Ue.u(6);break}return R(Ue,L1(h,e,h.F,h.g.streaming.retryParameters),7);case 7:fe=Ue.h,pe=Ux(h,fe,r,v),Ee=new Blob([pe],{type:"text/vtt"}),e=ev(Ee),r="text/vtt";case 6:if(Le={id:h.ag++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:a1(0,J,[e]),mimeType:r||"",codecs:u||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:c||null,type:z.wa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!f,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Di(r||"",u||"")])},Fe=Di(Le.mimeType,Le.codecs),it=Ac(Fe),!it)throw new Xe(2,2,2014,r);return h.i.textStreams.push(Le),es(h),Ue.return(Zf(Le))}})},p.th=function(e,t){var n=this,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it;return Re(function(Ue){switch(Ue.g){case 1:if(n.m!=$o&&n.m!=Zo)throw new Xe(1,7,7004);if(t){Ue.u(2);break}return R(Ue,O1(n,e),3);case 3:t=Ue.h;case 2:if(t!="text/vtt")throw new Xe(1,2,2017,e);if(r=Mi,u=n.h.duration,n.i&&(u=n.i.presentationTimeline.getDuration()),u==1/0)throw new Xe(1,4,4045);return R(Ue,L1(n,e,n.F,n.g.streaming.retryParameters),4);case 4:if(c=Ue.h,f=_i[t],!f)throw new Xe(2,2,2014,t);for(h=f(),v={periodStart:0,segmentStart:0,segmentEnd:u,vttOffset:0},A=nr(c),N=h.parseMedia(A,v,e,[]),B=[],z=m(N),J=z.next(),fe={};!J.done;fe={ve:void 0,Cc:void 0},J=z.next())fe.Cc=J.value,fe.ve=null,pe=function(Qe){return function(){return Qe.ve==null&&(Qe.ve=Ki([e],[Qe.Cc.payload])),Qe.ve||[]}}(fe),Ee=new et(fe.Cc.startTime,fe.Cc.endTime,pe,0,null,null,0,0,1/0),fe.Cc.payload.includes("#xywh")&&(Le=fe.Cc.payload.split("#xywh=")[1].split(","),Le.length===4&&Ee.bh({height:parseInt(Le[3],10),positionX:parseInt(Le[0],10),positionY:parseInt(Le[1],10),width:parseInt(Le[2],10)})),B.push(Ee);if(Fe=t,!B.length){Ue.u(5);break}return R(Ue,pv(B[0].M()[0],n.F,n.g.manifest.retryParameters),6);case 6:Fe=Ue.h;case 5:return it={id:n.ag++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Mr(B),mimeType:Fe||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.De,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Di(Fe||"","")])},n.m==Zo?n.pd.push(it):n.i.imageStreams.push(it),es(n),Ue.return(qf(it))}})},p.rh=function(e,t,n){var r=this,u,c,f,h;return Re(function(v){switch(v.g){case 1:if(r.m!=$o&&r.m!=Zo)throw new Xe(1,7,7004);if(n){v.u(2);break}return R(v,O1(r,e),3);case 3:n=v.h;case 2:return u=[],r.A&&(u=r.A.getCuePoints()),R(v,Fx(r,e,t,"chapters",n,"",u),4);case 4:if(c=v.h,f=r.ug(),h=f.find(function(A){return A.language==t}),!h){v.u(5);break}return R(v,new Promise(function(A,N){r.l.pa(c,"load",A),r.l.pa(c,"error",function(){N(new Xe(1,2,2015))})}),6);case 6:return es(r),v.return(h);case 5:throw new Xe(1,2,2012)}})};function O1(e,t){var n;return Re(function(r){switch(r.g){case 1:return ce(r,2),R(r,pv(t,e.F,e.g.streaming.retryParameters),4);case 4:n=r.h,me(r,3);break;case 2:Ce(r);case 3:if(n)return r.return(n);throw new Xe(1,2,2011,t)}})}function Fx(e,t,n,r,u,c,f){var h,v,A,N;return Re(function(B){if(B.g==1)return u!="text/vtt"||f.length?R(B,L1(e,t,e.F,e.g.streaming.retryParameters),3):B.u(2);B.g!=2&&(h=B.h,v=Ux(e,h,u,f),A=new Blob([v],{type:"text/vtt"}),t=ev(A),u="text/vtt"),N=document.createElement("track");var z=e.O,J=t;try{if(z.g.enabled){var fe=C1(z);fe.ot=x1,fe.su=!0;var pe=gv(fe),Ee=R1(J,pe)}else Ee=J}catch(Le){wt("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",Le),Ee=J}return N.src=Ee,N.label=c,N.kind=r,N.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(N),B.return(N)})}function L1(e,t,n,r){var u,c,f;return Re(function(h){if(h.g==1){u=Wa,c=Bi([t],r),c.method="GET";var v=e.O;try{v.g.enabled&&ld(v,c,{ot:x1,su:!0})}catch(A){wt("CMCD_TEXT_ERROR","Could not generate text CMCD data.",A)}return R(h,n.request(u,c).promise,2)}return f=h.h,h.return(f.data)})}function Ux(e,t,n,r){var u=_i[n];if(u)return n=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=nr(t),t=n.parseMedia(t,e,null,[]),Zj(t,r);throw new Xe(2,2,2014,n)}p.Wi=function(e,t){this.ga.width=e,this.ga.height=t},p.Jf=function(e){if(this.m==$o){var t=this.j;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.A)t=!1;else{for(var n=m(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.ed||r.La||r.ub||(r.ed=!1,Xa(t,r,e));t=!0}}else t=!1;return t},p.gf=function(){return Ke("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},p.Ph=function(){return this.bb};function ul(e){var t=od();return t.streaming.failureCallback=function(n){if(e.U()){var r=null;n.code==1001||n.code==1002?(r=1,e.g.streaming.lowLatencyMode&&(r=.1)):n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.Jf(r))}},t.textDisplayFactory=function(){if(e.ee){var n=e.getConfiguration();return new ha(e.h,e.ee,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new fa(e.h,"Shaka Player TextTrack"):new da},t}p.fh=function(e){this.ee=e};function d5(e,t){for(var n=new Set,r=m(t.textStreams),u=r.next();!u.done;u=r.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||n.add(u.originalId);for(r=m(t.variants),u=r.next();!u.done;u=r.next())if((u=u.value.video)&&u.closedCaptions){for(var c=m(u.closedCaptions.keys()),f=c.next();!f.done;f=c.next())if(f=f.value,!n.has(f)){var h=f.startsWith("CC")?"application/cea-608":"application/cea-708",v=new Ti,A=u.closedCaptions.get(f);h={id:e.ag++,originalId:f,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:v,mimeType:h,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:A,originalLanguage:A,label:null,type:_r,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Di(h,"")])},t.textStreams.push(h),n.add(f)}}}function h5(e,t){var n,r,u,c,f;return Re(function(h){return h.g==1?(n=e.audio,r=e.video,u=function(v,A){var N,B,z;return Re(function(J){return J.g==1?v?R(J,v.createSegmentIndex(),2):J.return(null):(B=(N=v.segmentIndex.Ib(A))?N.next().value:null,B?(z=B.startTime,J.return(z)):J.return(null))})},R(h,u(n,t),2)):h.g!=3?(c=h.h,R(h,u(r,t),3)):(f=h.h,f!=null&&c!=null?h.return(Math.max(f,c)):f!=null?h.return(f):c!=null?h.return(c):h.return(t))})}function k1(e){var t=e.pf();if(e.s&&e.N&&e.G){var n=e.K;if(n.j=t,KR(n),e.O&&(n=e.O,t||n.l||(n.l=!0),n.l&&t&&(n.m=!0),n.o=t),Iv(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Ae<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var r=e.g.streaming.liveSync.targetLatencyTolerance,u=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.T&&(e.T=Math.min(e.T+ ++e.Ae*u,n-r))}}t=new Map().set("buffering",t),e.dispatchEvent(ai("buffering",t))}function Bx(e){var t=e.h.playbackRate;t!=0&&(e.K&&e.K.set(t),t=ai("ratechange"),e.dispatchEvent(t))}function Iv(e){if(e.s&&e.N){var t=e.s.g,n="playing";e.N.g==nl?n="buffering":e.h.ended?n="ended":e.h.paused&&(n="paused");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var u=Date.now()/1e3;t.g.duration=u-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:u,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(ai("statechanged",n)))}}function jx(e){var t=e.h.playbackRate,n=e.U();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.tg();u<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.ud(r,!1):u==1&&t!==e.K.lc()&&e.Uc()}if(n&&(n=e.Pb(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start))){r=e.g.streaming.liveSync.targetLatencyTolerance,u=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var c=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var f=e.g.streaming.liveSync.targetLatency,h=f+r,v=Math.max(0,f-r),A=e.g.streaming.liveSync.maxPlaybackRate,N=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(f=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?h=e.i.serviceDescription.targetLatency+r:e.i.serviceDescription.maxLatency!=null&&(h=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?v=Math.max(0,e.i.serviceDescription.targetLatency-r):e.i.serviceDescription.minLatency!=null&&(v=e.i.serviceDescription.minLatency),A=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,N=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.T||typeof f!="number"||(e.T=f);var B=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;u&&e.Fa&&e.T!==null&&typeof f=="number"&&e.Ae<B&&Date.now()-e.Fa>1e3*c&&(c=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.T=Math.max(e.T-(f-c)/2,c+r),e.Fa=Date.now()),u&&e.T!==null&&(h=e.T+r,v=e.T-r),f=n.end-e.h.currentTime,r=0,e.m==Zo&&(u=e.h.buffered,0<u.length&&(r=u.end(u.length-1),r=Math.max(A,r-n.end))),n=e.g.streaming.liveSync.panicMode,u=1e3*e.g.streaming.liveSync.panicThreshold,c=Date.now()-e.N.h,n&&!N&&(N=e.g.streaming.liveSync.minPlaybackRate),n&&N&&c<=u?t!=N&&e.ud(N,!1):h&&A&&f-r>h?(t!=A&&e.ud(A,!1),e.Fa=null):v&&N&&f-r<v?(t!=N&&e.ud(N,!1),e.Fa=null):t!==e.K.lc()&&(e.Uc(),e.Fa=Date.now())}}function bv(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.X)?(e.X=n,t=!0):(n=Math.max(e.X,n),e.X!=n&&(e.X=n,t=!0))),t){var r;e.X==0?r=ai("started"):e.X==25?r=ai("firstquartile"):e.X==50?r=ai("midpoint"):e.X==75?r=ai("thirdquartile"):e.X==100&&(r=ai("complete")),r&&e.dispatchEvent(r)}}}function Lc(e){try{bn(e.ae,e.i)}catch(n){return dd(e,n),!1}var t=Vf(e.i.variants);return t=e.Ea.create(t),e.o.setVariants(Array.from(t.values())),!0}function fd(e,t,n,r,u){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,u=u===void 0?!0:u;var c;(c=Lc(e)?e.o.chooseVariant():null)&&Cv(e,c,u,t,n,r)}function Cv(e,t,n,r,u,c){c=c===void 0?!1:c;var f=e.j.j;if(t==f)r&&tx(e.j,t,r,u,!0);else{var h=e.s.h;h.h!=t&&(h.h=t,h.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),tx(e.j,t,r,u,c,n),r=null,f&&(r=kl(f)),t=kl(t),n?(n=new Map().set("oldTrack",r).set("newTrack",t),e.L&&bR(e.L,t,e.hf()),n=ai("adaptation",n),hd(e,n)):qx(e,r,t)}}function Zx(e,t){var n=Array.from(e.h.audioTracks).find(function(r){return r.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=Hf(n),t=Hf(t),qx(e,n,t))}function p5(e,t,n){if(e.g.autoShowText==0)return!1;if(e.g.autoShowText==1)return!0;var r=Or(e.g.preferredTextLanguage);return n=Or(n.language),e.g.autoShowText==2?Ju(n,r):e.g.autoShowText==3?t?(e=Or(t.language),Ju(n,r)&&!Ju(e,n)):!1:(Ke("Invalid autoShowText setting!"),!1)}function es(e){var t=ai("trackschanged");hd(e,t)}function qx(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.L&&bR(e.L,n,e.hf()),n=ai("variantchanged",t),hd(e,n)}function Rv(e){var t=ai("textchanged");hd(e,t)}function Gx(e){var t=ai("texttrackvisibility");hd(e,t)}function Hx(e){e.g.abr.enabled||F1(e);var t=new Map().set("newStatus",e.g.abr.enabled);hd(e,ai("abrstatuschanged",t))}function F1(e,t){if(t=t===void 0?!0:t,e.m==$o){e.he.stop();for(var n=m(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&Lc(e)}}p.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===nu||!navigator.onLine||t==0)return!1;if(this.i.variants.some(function(h){var v=h[e.type];return v&&v.id!==e.id&&!h.disabledUntilTime?e.type=="audio"?e.language===v.language:!0:!1})){for(var n=!1,r=!1,u=m(this.i.variants),c=u.next();!c.done;c=u.next()){c=c.value;var f=c[e.type];f&&(f.id===e.id?(c.disabledUntilTime=Date.now()/1e3+t,n=!0):f.trickModeVideo&&f.trickModeVideo.id==e.id&&(r=!0))}return!n&&r?!1:(this.he.Ra(1),t=this.xb().video.reduce(function(h,v){return h+v.end-v.start},0),fd(this,!1,t,!0,!1),!0)}return!1};function dd(e,t){var n,r,u,c;return Re(function(f){switch(f.g){case 1:if(e.m==nu)return f.return();if(t.severity===1&&e.s.K++,n=!0,!(e.Da&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){f.u(2);break}return ce(f,3),R(f,Tj(e.j),5);case 5:r=f.h,n=!r,r&&(u=ai("mediasourcerecovered"),e.dispatchEvent(u)),me(f,2);break;case 3:Ce(f),n=!0;case 2:if(!n)return f.return();t.severity===2&&F1(e,!1),c=ai("error",new Map().set("detail",t)),e.dispatchEvent(c),c.defaultPrevented&&(t.handled=!0),X(f)}})}p.addFont=function(e,t){var n,r,u,c,f;return Re(function(h){if(h.g==1)return"fonts"in document&&"FontFace"in g?R(h,document.fonts.ready,3):h.u(0);if(!("entries"in document.fonts))return h.return();for(n=function(v){v=v.entries();for(var A=[],N=v.next();N.done===!1;)A.push(N.value),N=v.next();return A},r=m(n(document.fonts)),u=r.next();!u.done;u=r.next())if(c=u.value,c.family==e&&c.display=="swap")return h.return();f=new FontFace(e,"url("+t+")",{display:"swap"}),document.fonts.add(f),X(h)})};function Ep(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(ai(t,e))}function Vx(e,t,n,r){r=r===void 0?!1:r,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(ai(r?"audiotrackchanged":"mediaqualitychanged",t))}function U1(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new Xe(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new Xe(2,3,3016,n,t,e.h.error.message))}function B1(e,t,n){0<t&&(e.U()||e.eh(t)),t=e.getDuration(),n<t&&(e.U()||e.Za(n))}function hd(e,t){Re(function(n){if(n.g==1)return R(n,Promise.resolve(),2);e.m!=nu&&e.dispatchEvent(t),X(n)})}function Kx(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Or(n.language)):t.add("und");return t}function zx(e){var t=new Map,n=new Map;e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u="und",c=[];r.language&&(u=Or(r.language)),r.type=="variant"?c=r.audioRoles:c=r.roles,c&&c.length||(c=[""]),t.has(u)||t.set(u,new Set),c=m(c);for(var f=c.next();!f.done;f=c.next())f=f.value,t.get(u).add(f),r.label&&(n.has(u)||n.set(u,new Map),n.get(u).set(f,r.label))}var h=[];return t.forEach(function(v,A){v=m(v);for(var N=v.next();!N.done;N=v.next()){N=N.value;var B=null;n.has(A)&&n.get(A).has(N)&&(B=n.get(A).get(N)),h.push({language:A,role:N,label:B})}}),h}ne("shaka.Player",hn),hn.prototype.addFont=hn.prototype.addFont,hn.prototype.setVideoContainer=hn.prototype.fh,hn.prototype.getManifestParserFactory=hn.prototype.Ph,hn.prototype.getManifest=hn.prototype.gf,hn.prototype.retryStreaming=hn.prototype.Jf,hn.prototype.setMaxHardwareResolution=hn.prototype.Wi,hn.prototype.addChaptersTrack=hn.prototype.rh,hn.prototype.addThumbnailsTrack=hn.prototype.th,hn.prototype.addTextTrackAsync=hn.prototype.sh,hn.prototype.getStats=hn.prototype.getStats,hn.prototype.getBufferedInfo=hn.prototype.xb,hn.prototype.getSegmentAvailabilityDuration=hn.prototype.Ld,hn.prototype.getPresentationStartTimeAsDate=hn.prototype.yg,hn.prototype.getPlayheadTimeAsDate=hn.prototype.Uh,hn.prototype.setTextTrackVisibility=hn.prototype.ah,hn.prototype.getChapters=hn.prototype.Ih,hn.prototype.getChaptersTracks=hn.prototype.ug,hn.prototype.isTextTrackVisible=hn.prototype.rf,hn.prototype.selectVariantsByLabel=hn.prototype.Ri,hn.prototype.selectTextLanguage=hn.prototype.Lf,hn.prototype.selectAudioLanguage=hn.prototype.Ug,hn.prototype.getTextLanguages=hn.prototype.Yh,hn.prototype.getAudioLanguages=hn.prototype.Fh,hn.prototype.getTextLanguagesAndRoles=hn.prototype.Zh,hn.prototype.getAudioLanguagesAndRoles=hn.prototype.Gh,hn.prototype.selectVariantTrack=hn.prototype.Mf,hn.prototype.selectTextTrack=hn.prototype.Vg,hn.prototype.getThumbnails=hn.prototype.zg,hn.prototype.getAllThumbnails=hn.prototype.Eh,hn.prototype.getImageTracks=hn.prototype.Mh,hn.prototype.getTextTracks=hn.prototype.Hc,hn.prototype.getVariantTracks=hn.prototype.mc,hn.prototype.cancelTrickPlay=hn.prototype.Uc,hn.prototype.trickPlay=hn.prototype.ud,hn.prototype.getPlaybackRate=hn.prototype.fb,hn.prototype.isBuffering=hn.prototype.pf,hn.prototype.getKeyStatuses=hn.prototype.Id,hn.prototype.getActiveSessionsMetadata=hn.prototype.ef,hn.prototype.getExpiration=hn.prototype.ad,hn.prototype.drmInfo=hn.prototype.drmInfo,hn.prototype.keySystem=hn.prototype.keySystem,hn.prototype.isFullyLoaded=hn.prototype.ji,hn.prototype.goToLive=hn.prototype.fi,hn.prototype.seekRange=hn.prototype.Pb,hn.prototype.isAudioOnly=hn.prototype.ii,hn.prototype.isInProgress=hn.prototype.pc,hn.prototype.isLive=hn.prototype.U,hn.prototype.getAdManager=hn.prototype.sg,hn.prototype.getAssetUri=hn.prototype.Gc,hn.prototype.getNetworkingEngine=hn.prototype.yb,hn.prototype.getMediaElement=hn.prototype.Sh,hn.prototype.getManifestType=hn.prototype.hf,hn.prototype.getLoadMode=hn.prototype.ff,hn.prototype.resetConfiguration=hn.prototype.Li,hn.prototype.getBufferFullness=hn.prototype.tg,hn.prototype.getNonDefaultConfiguration=hn.prototype.xg,hn.prototype.getConfiguration=hn.prototype.getConfiguration,hn.prototype.configure=hn.prototype.configure,hn.prototype.releaseAllMutexes=hn.prototype.Hi,hn.prototype.destroyAllPreloads=hn.prototype.Pe,hn.prototype.preload=hn.prototype.preload,hn.prototype.detachAndSavePreload=hn.prototype.og,hn.prototype.unloadAndSavePreload=hn.prototype.Zi,hn.prototype.load=hn.prototype.load,hn.prototype.updateStartTime=hn.prototype.cj,hn.prototype.unload=hn.prototype.ec,hn.prototype.detach=hn.prototype.detach,hn.prototype.attachCanvas=hn.prototype.xh,hn.prototype.attach=hn.prototype.Sb,hn.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,u,c,f,h;return Re(function(v){switch(v.g){case 1:if(t={},!e){v.u(2);break}return R(v,jt(),3);case 3:t=v.h;case 2:var A={};if(tr())for(var N in Yn)A[N]=!0;N=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var B=N.next();!B.done;B=N.next())B=B.value,A[B]=tr()?!!Yn[B]:ur(B);for(n=A,N='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(T(Iu)),A={},N=m(N),B=N.next();!B.done;B=N.next()){B=B.value,A[B]=Ac(B)?!0:tr()?Ft(B)||!!wu(B):ur(B);var z=B.split(";")[0];A[z]=A[z]||A[B]}return r=A,R(v,Ai(),4);case 4:u=v.h,c={manifest:n,media:r,drm:t,hardwareResolution:u},f=Z1;for(h in f)c[h]=f[h]();return v.return(c)}})},hn.isBrowserSupported=function(){if(g.Promise||Ke("A Promise implementation or polyfill is required"),!(g.Promise&&g.Uint8Array&&Array.prototype.forEach)||sn("Trident/"))return!1;var e=Zs();return e&&9>e||!(g.MediaKeys&&g.navigator&&g.navigator.requestMediaKeySystemAccess&&g.MediaKeySystemAccess&&g.MediaKeySystemAccess.prototype.getConfiguration)?!1:tr()?!0:ur("application/x-mpegurl")},hn.setAdManagerFactory=function(e){xv=e},hn.registerSupportPlugin=function(e,t){Z1[e]=t},hn.prototype.destroy=hn.prototype.destroy;var nu=0,j1=1,$o=2,Zo=3;hn.LoadMode={DESTROYED:nu,NOT_LOADED:j1,MEDIA_SOURCE:$o,SRC_EQUALS:Zo},hn.version="v4.11.4";var Yx=["4","11"];Hr=new function(e){this.g=e,this.i=fi,this.h=ao}(new Gr(Number(Yx[0]),Number(Yx[1])));var Z1={},xv=null;function Wx(){this.g=[],this.i=this.l=this.j=this.h=0}function g5(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function dr(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Tt,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}p=dr.prototype,p.needsSkipUI=function(){return!1},p.getDuration=function(){return this.g.getDuration()},p.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},p.getRemainingTime=function(){return this.h.getRemainingTime()},p.isPaused=function(){return this.i},p.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},p.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.h.getAdSkippableState()},p.skip=function(){return this.h.skip()},p.pause=function(){return this.h.pause()},p.play=function(){return this.h.resume()},p.getVolume=function(){return this.h.getVolume()},p.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},p.isMuted=function(){return this.h.getVolume()==0},p.isLinear=function(){return this.g.isLinear()},p.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},p.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},p.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},p.getTitle=function(){return this.g.getTitle()},p.getDescription=function(){return this.g.getDescription()},p.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},p.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},p.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},p.getAdId=function(){return this.g.getAdId()},p.getCreativeAdId=function(){return this.g.getCreativeAdId()},p.getAdvertiserName=function(){return this.g.getAdvertiserName()},p.getMediaUrl=function(){return this.g.getMediaUrl()},p.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},p.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},p.release=function(){this.h=this.g=null},ne("shaka.ads.ClientSideAd",dr),dr.prototype.release=dr.prototype.release,dr.prototype.getPodIndex=dr.prototype.getPodIndex,dr.prototype.getTimeOffset=dr.prototype.getTimeOffset,dr.prototype.getMediaUrl=dr.prototype.getMediaUrl,dr.prototype.getAdvertiserName=dr.prototype.getAdvertiserName,dr.prototype.getCreativeAdId=dr.prototype.getCreativeAdId,dr.prototype.getAdId=dr.prototype.getAdId,dr.prototype.getVastMediaWidth=dr.prototype.getVastMediaWidth,dr.prototype.getVastMediaHeight=dr.prototype.getVastMediaHeight,dr.prototype.getVastMediaBitrate=dr.prototype.getVastMediaBitrate,dr.prototype.getDescription=dr.prototype.getDescription,dr.prototype.getTitle=dr.prototype.getTitle,dr.prototype.getPositionInSequence=dr.prototype.getPositionInSequence,dr.prototype.getSequenceLength=dr.prototype.getSequenceLength,dr.prototype.setMuted=dr.prototype.setMuted,dr.prototype.resize=dr.prototype.resize,dr.prototype.isLinear=dr.prototype.isLinear,dr.prototype.isMuted=dr.prototype.isMuted,dr.prototype.setVolume=dr.prototype.setVolume,dr.prototype.getVolume=dr.prototype.getVolume,dr.prototype.play=dr.prototype.play,dr.prototype.pause=dr.prototype.pause,dr.prototype.skip=dr.prototype.skip,dr.prototype.canSkipNow=dr.prototype.canSkipNow,dr.prototype.getTimeUntilSkippable=dr.prototype.getTimeUntilSkippable,dr.prototype.isSkippable=dr.prototype.isSkippable,dr.prototype.isPaused=dr.prototype.isPaused,dr.prototype.getRemainingTime=dr.prototype.getRemainingTime,dr.prototype.getMinSuggestedDuration=dr.prototype.getMinSuggestedDuration,dr.prototype.getDuration=dr.prototype.getDuration,dr.prototype.needsSkipUI=dr.prototype.needsSkipUI;function ti(){}function $x(e,t){var n=[],r=0;t!=null&&(r=t),e=m(sr(e,"Ad"));for(var u=e.next();!u.done;u=e.next())if((u=Hi(u.value,"InLine"))&&(u=Hi(u,"Creatives"))){u=m(sr(u,"Creative"));for(var c=u.next();!c.done;c=u.next()){var f=Hi(c.value,"Linear");if(f&&(c=null,f.attributes.skipoffset&&(c=Eu(f.attributes.skipoffset),isNaN(c)&&(c=null)),f=Hi(f,"MediaFiles"))){var h=sr(f,"MediaFile");for(f=h,h=h.filter(function(v){return v.attributes.delivery=="streaming"}),h.length&&(f=h),f=f.sort(function(v,A){return(parseInt(A.attributes.height,10)||0)-(parseInt(v.attributes.height,10)||0)}),f=m(f),h=f.next();!h.done;h=f.next())if(h=ei(h.value)){n.push({id:null,startTime:r,endTime:null,uri:h,isSkippable:c!=null,skipOffset:c,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:t==null,post:t==1/0,timelineRange:!1});break}}}}return n}ne("shaka.ads.Utils",ti),ti.ADS_LOADED="ads-loaded",ti.AD_STARTED="ad-started",ti.AD_FIRST_QUARTILE="ad-first-quartile",ti.AD_MIDPOINT="ad-midpoint",ti.AD_THIRD_QUARTILE="ad-third-quartile",ti.AD_COMPLETE="ad-complete",ti.AD_STOPPED="ad-stopped",ti.AD_SKIPPED="ad-skipped",ti.AD_VOLUME_CHANGED="ad-volume-changed",ti.AD_MUTED="ad-muted",ti.AD_PAUSED="ad-paused",ti.AD_RESUMED="ad-resumed",ti.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",ti.CUEPOINTS_CHANGED="ad-cue-points-changed",ti.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",ti.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",ti.AD_CLICKED="ad-clicked",ti.AD_PROGRESS="ad-progress",ti.AD_BUFFERING="ad-buffering",ti.AD_IMPRESSION="ad-impression",ti.AD_DURATION_CHANGED="ad-duration-changed",ti.AD_CLOSED="ad-closed",ti.AD_LOADED="ad-loaded",ti.ALL_ADS_COMPLETED="all-ads-completed",ti.AD_LINEAR_CHANGED="ad-linear-changed",ti.AD_METADATA="ad-metadata",ti.AD_RECOVERABLE_ERROR="ad-recoverable-error",ti.AD_ERROR="ad-error",ti.AD_BREAK_READY="ad-break-ready",ti.AD_INTERACTION="ad-interaction",ti.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",ti.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",ti.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function Nv(e,t,n,r,u){var c=this;this.s=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=u,this.j=null,this.h=new Tt,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.s,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.11.4"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(f){m5(c,f)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(f){Xx(c,f)}),this.h.D(this.i,"ended",function(){c.m.contentComplete()}),this.h.pa(this.i,"play",function(){c.F=!0})}Nv.prototype.configure=function(e){this.o=e},Nv.prototype.stop=function(){this.g&&this.g.stop(),this.s&&sd(this.s)},Nv.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function Xx(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new jn("ad-error",t)),Dv(e,null),e.l(new jn("ad-cue-points-changed",new Map().set("cuepoints",[])))}function m5(e,t){if(e.l(new jn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new jn("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=m(r);for(var u=r.next();!u.done;u=r.next())t.push({start:u.value,end:null});e.l(new jn("ad-cue-points-changed",new Map().set("cuepoints",t)))}v5(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,Mv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Mv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in g?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Mv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Mv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.pa(e.i,"play",function(){e.F=!0,e.g.start()})}catch(c){Dv(e,null)}}function Mv(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function v5(e){function t(n,r){n=new Map().set("originalEvent",n),e.l(new jn(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){Xx(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){Qx(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){Qx(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Dv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){Dv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function Qx(e,t){var n=t.getAd();n?(e.j=new dr(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new jn("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new jn("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Ke("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Dv(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new jn("ad-content-resume-requested")),e.l(new jn("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function hr(e,t,n,r,u,c){this.g=e,this.h=t,this.j=n,this.l=r,this.m=u,this.i=c}p=hr.prototype,p.needsSkipUI=function(){return!0},p.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},p.isPaused=function(){return this.g.paused},p.isSkippable=function(){return this.h},p.getTimeUntilSkippable=function(){if(this.h){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.l()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.play()},p.getVolume=function(){return this.g.volume},p.setVolume=function(e){this.g.volume=e},p.isMuted=function(){return this.g.muted},p.isLinear=function(){return!0},p.resize=function(){},p.setMuted=function(e){this.g.muted=e},p.getSequenceLength=function(){return this.m},p.getPositionInSequence=function(){return this.i},p.getTitle=function(){return""},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return""},p.getCreativeAdId=function(){return""},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){this.g=null},ne("shaka.ads.InterstitialAd",hr),hr.prototype.release=hr.prototype.release,hr.prototype.getPodIndex=hr.prototype.getPodIndex,hr.prototype.getTimeOffset=hr.prototype.getTimeOffset,hr.prototype.getMediaUrl=hr.prototype.getMediaUrl,hr.prototype.getAdvertiserName=hr.prototype.getAdvertiserName,hr.prototype.getCreativeAdId=hr.prototype.getCreativeAdId,hr.prototype.getAdId=hr.prototype.getAdId,hr.prototype.getVastMediaWidth=hr.prototype.getVastMediaWidth,hr.prototype.getVastMediaHeight=hr.prototype.getVastMediaHeight,hr.prototype.getVastMediaBitrate=hr.prototype.getVastMediaBitrate,hr.prototype.getDescription=hr.prototype.getDescription,hr.prototype.getTitle=hr.prototype.getTitle,hr.prototype.getPositionInSequence=hr.prototype.getPositionInSequence,hr.prototype.getSequenceLength=hr.prototype.getSequenceLength,hr.prototype.setMuted=hr.prototype.setMuted,hr.prototype.resize=hr.prototype.resize,hr.prototype.isLinear=hr.prototype.isLinear,hr.prototype.isMuted=hr.prototype.isMuted,hr.prototype.setVolume=hr.prototype.setVolume,hr.prototype.getVolume=hr.prototype.getVolume,hr.prototype.play=hr.prototype.play,hr.prototype.pause=hr.prototype.pause,hr.prototype.skip=hr.prototype.skip,hr.prototype.canSkipNow=hr.prototype.canSkipNow,hr.prototype.getTimeUntilSkippable=hr.prototype.getTimeUntilSkippable,hr.prototype.isSkippable=hr.prototype.isSkippable,hr.prototype.isPaused=hr.prototype.isPaused,hr.prototype.getRemainingTime=hr.prototype.getRemainingTime,hr.prototype.getMinSuggestedDuration=hr.prototype.getMinSuggestedDuration,hr.prototype.getDuration=hr.prototype.getDuration,hr.prototype.needsSkipUI=hr.prototype.needsSkipUI;function _p(e,t,n,r){var u=this;this.G=e,this.B=t,this.h=n,this.F=null,this.o=!0,this.m=this.h,this.g=r,this.H=new Set,this.A=new Set,this.s=new Map,this.i=new hn,G1(this),this.K=new Tt,this.j=new Tt,this.I=!1,this.C=this.l=null,this.K.D(this.h,"timeupdate",function(){if(!u.I){var c=u.l==null||u.l==0;u.l=u.h.currentTime,u.C&&!u.C.pre&&!u.C.post&&u.l<u.C.startTime&&(u.C=null),(c=Jx(u,c,0,u.C))&&eN(u,c,1,1,Date.now())}}),new on(function(){var c,f,h,v,A,N,B,z,J,fe;return Re(function(pe){switch(pe.g){case 1:if(!u.A.size||u.I||u.l==null){pe.u(0);break}c=!1,f=Array.from(u.A),h=u.B.Pb(),v=m(f),A=v.next();case 3:if(A.done){pe.u(5);break}if(N=A.value,B=N.endTime||N.startTime,!(1<=h.start-B)){z=N.startTime-u.l,0<z&&10>=z&&(u.s.has(N)||u.s.set(N,u.i.preload(N.uri))),pe.u(4);break}if(!u.s.has(N)){pe.u(7);break}return R(pe,u.s.get(N),8);case 8:(J=pe.h)&&J.destroy(),u.s.delete(N);case 7:fe=JSON.stringify(N),u.H.has(fe)&&u.H.delete(fe),u.A.delete(N),c=!0;case 4:A=v.next(),pe.u(3);break;case 5:c&&q1(u),X(pe)}})}).Ra(1)}_p.prototype.configure=function(e){this.G&&this.o==e.supportsMultipleMediaElements&&((this.o=!e.supportsMultipleMediaElements)?(this.m=this.h,this.F&&(this.F.parentElement&&this.G.removeChild(this.F),this.F=null)):(this.F||(e=document.createElement(this.h.tagName),e.autoplay=!0,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgb(0, 0, 0)",e.setAttribute("playsinline",""),this.F=e),this.m=this.F))},_p.prototype.stop=function(){this.j&&this.j.Qa(),this.H.clear(),this.A.clear(),this.i.Pe(),this.s.clear(),this.i.detach(),this.I=!1,this.C=this.l=null},_p.prototype.release=function(){this.stop(),this.K&&this.K.release(),this.j&&this.j.release(),this.G&&sd(this.G),this.i.destroy()};function y5(e,t){var n;Re(function(r){if(r.g==1)return e.B.ff()==Zo&&e.o?(Ke("Unsupported HLS interstitial when using single media element",t),r.return()):(G1(e),R(r,E5(e,t),2));n=r.h,n.length?Pv(e,n):Ke("Unsupported HLS interstitial",t),X(r)})}_p.prototype.addAdUrlInterstitial=function(e){var t=this,n,r,u,c,f,h,v,A,N;return Re(function(B){switch(B.g){case 1:return n={type:12},R(B,H1(t,e,n),2);case 2:if(r=B.h,u=_u(r,"VAST,vmap:VMAP"),!u)throw new Xe(2,10,4001);if(c=[],u.tagName=="VAST"){c=$x(u,t.l),B.u(3);break}if(u.tagName!="vmap:VMAP"){B.u(3);break}for(var z=[],J=m(sr(u,"vmap:AdBreak")),fe=J.next();!fe.done;fe=J.next()){var pe=fe.value,Ee=pe.attributes.timeOffset;Ee&&(fe=null,Ee=="start"?fe=0:Ee=="end"?fe=1/0:fe=Eu(Ee),(pe=Hi(pe,"vmap:AdSource"))&&(pe=Hi(pe,"vmap:AdTagURI"))&&(pe=ei(pe))&&z.push({time:fe,uri:pe}))}f=m(z),h=f.next();case 5:if(h.done){B.u(3);break}return v=h.value,R(B,H1(t,v.uri,n),8);case 8:if(A=B.h,N=_u(A,"VAST"),!N)throw new Xe(2,10,4001);c.push.apply(c,T($x(N,v.time))),h=f.next(),B.u(5);break;case 3:Pv(t,c),X(B)}})};function Pv(e,t){if(e.B.ff()==Zo&&e.o)Ke("Unsupported interstitial when using single media element",t);else{var n=!1;t=m(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var u=JSON.stringify(r);if(!e.H.has(u)){if(n=!0,e.H.add(u),e.A.add(r),u=!1,r.pre&&e.l==null)u=!0;else if(r.startTime==0&&!r.canJump)u=!0;else if(e.l!=null){var c=r.startTime-e.l;0<c&&10>=c&&(u=!0)}u&&(e.s.has(r)||e.s.set(r,e.i.preload(r.uri)))}}n&&q1(e)}}function Jx(e,t,n,r){var u=0,c=null;if(e.A.size&&e.l!=null){var f=e.h.ended,h=Array.from(e.A).sort(function(B,z){return z.startTime-B.startTime});h=m(h);for(var v=h.next();!v.done;v=h.next()){v=v.value;var A=!1;if(t)A=v.pre;else if(f)A=v.post;else if(!v.pre&&!v.post){var N=e.l-Math.round(1e3*v.startTime)/1e3;0<N&&(1>=N||!v.canJump)&&(A=!(1<N&&r&&!r.pre&&!r.post&&r.startTime>=v.startTime))}if(A){if(u==n){c=v;break}u++}}}return c}function eN(e,t,n,r,u,c){c=c===void 0?0:c;var f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue;Re(function(Qe){switch(Qe.g){case 1:if(e.C=t,f=Date.now(),!e.m.parentElement&&e.G&&e.G.appendChild(e.m),r==1&&n==1&&(n=Array.from(e.A).filter(function(rt){return t.pre?rt.pre==t.pre:t.post?rt.post==t.post:.001>Math.abs(rt.startTime-t.startTime)}).length),(t.once||t.pre)&&(c++,e.A.delete(t),q1(e)),e.I=!0,!e.o||r!=1){Qe.u(2);break}return e.g(new jn("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),h=new Lr,v=function(rt){return Re(function(dt){if(dt.g==1)return rt.state!="detach"?dt.u(0):Gu()?R(dt,new Promise(function(gt){return new on(gt).Z(.1)}),3):dt.u(3);h.resolve(),e.j.$a(e.B,"onstatechange",v),X(dt)})},e.j.D(e.B,"onstatechange",v),R(Qe,h,2);case 2:return e.o||(e.h.pause(),t.resumeOffset!=null&&t.resumeOffset!=0&&(e.h.currentTime+=t.resumeOffset)),A=!1,N=null,B=function(){if(!e.o&&t.resumeOffset==null)if(t.timelineRange&&t.endTime&&t.endTime!=1/0)e.h.currentTime!=t.endTime&&(e.h.currentTime=t.endTime);else{var rt=Date.now();e.h.currentTime+=(rt-u)/1e3,u=rt}},z=function(){var rt,dt;return Re(function(gt){if(gt.g==1)return B(),N&&N.stop(),(rt=Jx(e,t.pre,r-c))?(e.g(new jn("ad-stopped")),e.j.Qa(),eN(e,rt,n,++r,u,c),gt.u(0)):e.o?R(gt,e.i.detach(),4):R(gt,e.i.ec(),4);e.o&&(dt=t.resumeOffset,dt==null&&(dt=t.timelineRange&&t.endTime&&t.endTime!=1/0?t.endTime-(e.l||0):(Date.now()-u)/1e3),e.g(new jn("ad-content-resume-requested",new Map().set("offset",dt)))),e.g(new jn("ad-stopped")),e.j.Qa(),e.I=!1,e.o||(B(),e.h.ended||e.h.play()),X(gt)})},J=function(rt){return Re(function(dt){return A?dt.return():(A=!0,e.g(new jn("ad-error",new Map().set("originalEvent",rt))),R(dt,z(),0))})},fe=function(){return Re(function(rt){if(rt.g==1)return A?rt.return():(A=!0,R(rt,z(),2));e.g(new jn("ad-complete")),X(rt)})},pe=function(){return Re(function(rt){return A?rt.return():(A=!0,e.g(new jn("ad-skipped")),R(rt,z(),0))})},Ee=new hr(e.m,t.isSkippable,t.skipOffset,pe,n,r),e.o||(Ee.setMuted(e.h.muted),Ee.setVolume(e.h.volume)),e.g(new jn("ad-started",new Map().set("ad",Ee))),Ee.canSkipNow()&&e.g(new jn("ad-skip-state-changed")),Le=new Set,e.j.pa(e.i,"error",J),e.j.D(e.m,"timeupdate",function(){var rt=e.m.duration;rt&&(t.isSkippable&&t.skipOffset&&Ee.canSkipNow()&&0<Ee.getRemainingTime()&&0<Ee.getDuration()&&e.g(new jn("ad-skip-state-changed")),rt=100*e.m.currentTime/rt,25<=rt&&!Le.has("firstquartile")?(B(),e.g(new jn("ad-first-quartile")),Le.add("firstquartile")):50<=rt&&!Le.has("midpoint")?(B(),e.g(new jn("ad-midpoint")),Le.add("midpoint")):75<=rt&&!Le.has("thirdquartile")&&(B(),e.g(new jn("ad-third-quartile")),Le.add("thirdquartile")))}),e.j.pa(e.i,"complete",fe),e.j.D(e.m,"play",function(){e.g(new jn("ad-resumed"))}),e.j.D(e.m,"pause",function(){e.g(new jn("ad-paused"))}),e.j.D(e.m,"volumechange",function(){e.m.muted?e.g(new jn("ad-muted")):e.g(new jn("ad-volume-changed"))}),ce(Qe,4),t.playoutLimit&&(N=new on(function(){Ee.skip()}).Z(t.playoutLimit)),G1(e),R(Qe,e.i.Sb(e.m),6);case 6:return e.s.has(t)?R(Qe,e.s.get(t),10):R(Qe,e.i.load(t.uri),8);case 10:return Fe=Qe.h,e.s.delete(t),Fe?R(Qe,e.i.load(Fe),8):R(Qe,e.i.load(t.uri),8);case 8:it=(Date.now()-f)/1e3,e.g(new jn("ads-loaded",new Map().set("loadTime",it))),e.o&&e.h.play(),me(Qe,0);break;case 4:Ue=Ce(Qe),J(Ue),X(Qe)}})}function E5(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An;return Re(function(Vn){switch(Vn.g){case 1:if(n=[],!t||(r=t.values.find(function(Qn){return Qn.key=="X-ASSET-URI"}),u=t.values.find(function(Qn){return Qn.key=="X-ASSET-LIST"}),!r&&!u))return Vn.return(n);if(c=null,(f=t.values.find(function(Qn){return Qn.key=="ID"}))&&(c=f.data),h=t.values.find(function(Qn){return Qn.key=="X-RESTRICT"}),A=v=!0,h&&h.data&&(N=h.data,v=!N.includes("SKIP"),A=!N.includes("JUMP")),B=null,(z=t.values.find(function(Qn){return Qn.key=="X-RESUME-OFFSET"}))&&(J=z.data,B=parseFloat(J),isNaN(B)&&(B=null)),fe=null,(pe=t.values.find(function(Qn){return Qn.key=="X-PLAYOUT-LIMIT"}))&&(Ee=pe.data,fe=parseFloat(Ee),isNaN(fe)&&(fe=null)),it=Fe=Le=!1,(Ue=t.values.find(function(Qn){return Qn.key=="CUE"}))&&(Qe=Ue.data,Le=Qe.includes("ONCE"),Fe=Qe.includes("PRE"),it=Qe.includes("POST")),rt=!1,(dt=t.values.find(function(Qn){return Qn.key=="X-TIMELINE-OCCUPIES"}))?(gt=dt.data,rt=gt.includes("RANGE")):!z&&e.B.U()&&(rt=!Fe&&!it),r){if(kt=r.data,!kt)return Vn.return(n);n.push({id:c,startTime:t.startTime,endTime:t.endTime,uri:kt,isSkippable:v,skipOffset:v?0:null,canJump:A,resumeOffset:B,playoutLimit:fe,once:Le,pre:Fe,post:it,timelineRange:rt}),Vn.u(2);break}if(!u){Vn.u(2);break}return It=u.data,It?(ce(Vn,4),Ut={type:11},R(Vn,H1(e,It,Ut),6)):Vn.return(n);case 6:for(Nt=Vn.h,nn=Cr(Nt),Kt=JSON.parse(nn),$t=m(Kt.ASSETS),En=$t.next();!En.done;En=$t.next())An=En.value,An.URI&&n.push({id:c,startTime:t.startTime,endTime:t.endTime,uri:An.URI,isSkippable:v,skipOffset:v?0:null,canJump:A,resumeOffset:B,playoutLimit:fe,once:Le,pre:Fe,post:it,timelineRange:rt});me(Vn,2);break;case 4:Ce(Vn);case 2:return Vn.return(n)}})}function q1(e){for(var t=[],n=m(e.A),r=n.next(),u={};!r.done;u={Rb:void 0},r=n.next())r=r.value,u.Rb={start:r.startTime,end:null},r.pre?(u.Rb.start=0,u.Rb.end=null):r.post?(u.Rb.start=-1,u.Rb.end=null):r.timelineRange&&(u.Rb.end=r.endTime),t.find(function(c){return function(f){return c.Rb.start==f.start&&c.Rb.end==f.end}}(u))||t.push(u.Rb);e.g(new jn("ad-cue-points-changed",new Map().set("cuepoints",t)))}function G1(e){e.i.configure(e.B.xg());var t=e.i.yb();t.jg(),t.kg(),Jh(e.B.yb(),t)}function H1(e,t,n){var r,u,c;return Re(function(f){return f.g==1?(r=Bi([t],ua()),u=e.B.yb().request(7,r,n),R(f,u.promise,2)):(c=f.h,f.return(c.data))})}function lr(e,t,n,r,u){this.h=e,this.j=Eu(this.h.skipOffset),this.g=u,this.i=t,this.l=n,this.o=r,this.m=!1}p=lr.prototype,p.needsSkipUI=function(){return!0},p.getDuration=function(){return this.h.durationInSeconds},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},p.isPaused=function(){return this.g.paused},p.isSkippable=function(){return typeof this.j=="number"},p.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.play()},p.getVolume=function(){return this.g.volume},p.setVolume=function(e){this.g.volume=e},p.isMuted=function(){return this.g.muted},p.isLinear=function(){return this.o},p.resize=function(){},p.setMuted=function(e){this.g.muted=e},p.getSequenceLength=function(){return this.l?this.l:1},p.getPositionInSequence=function(){return this.i?this.i:1},p.getTitle=function(){return this.h.adTitle},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return this.h.adId},p.getCreativeAdId=function(){return this.h.creativeId},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){this.l=this.i=this.g=this.h=null},ne("shaka.ads.MediaTailorAd",lr),lr.prototype.release=lr.prototype.release,lr.prototype.getPodIndex=lr.prototype.getPodIndex,lr.prototype.getTimeOffset=lr.prototype.getTimeOffset,lr.prototype.getMediaUrl=lr.prototype.getMediaUrl,lr.prototype.getAdvertiserName=lr.prototype.getAdvertiserName,lr.prototype.getCreativeAdId=lr.prototype.getCreativeAdId,lr.prototype.getAdId=lr.prototype.getAdId,lr.prototype.getVastMediaWidth=lr.prototype.getVastMediaWidth,lr.prototype.getVastMediaHeight=lr.prototype.getVastMediaHeight,lr.prototype.getVastMediaBitrate=lr.prototype.getVastMediaBitrate,lr.prototype.getDescription=lr.prototype.getDescription,lr.prototype.getTitle=lr.prototype.getTitle,lr.prototype.getPositionInSequence=lr.prototype.getPositionInSequence,lr.prototype.getSequenceLength=lr.prototype.getSequenceLength,lr.prototype.setMuted=lr.prototype.setMuted,lr.prototype.resize=lr.prototype.resize,lr.prototype.isLinear=lr.prototype.isLinear,lr.prototype.isMuted=lr.prototype.isMuted,lr.prototype.setVolume=lr.prototype.setVolume,lr.prototype.getVolume=lr.prototype.getVolume,lr.prototype.play=lr.prototype.play,lr.prototype.pause=lr.prototype.pause,lr.prototype.skip=lr.prototype.skip,lr.prototype.canSkipNow=lr.prototype.canSkipNow,lr.prototype.getTimeUntilSkippable=lr.prototype.getTimeUntilSkippable,lr.prototype.isSkippable=lr.prototype.isSkippable,lr.prototype.isPaused=lr.prototype.isPaused,lr.prototype.getRemainingTime=lr.prototype.getRemainingTime,lr.prototype.getMinSuggestedDuration=lr.prototype.getMinSuggestedDuration,lr.prototype.getDuration=lr.prototype.getDuration,lr.prototype.needsSkipUI=lr.prototype.needsSkipUI;function Tp(e,t,n,r){this.B=e,this.K=t,this.h=n,this.l=null,this.T=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.O=!0,this.H="",this.o=new Tt}Tp.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.$a(t.target,t.type,t.listener);pd(this),this.m=[],this.s=[],this.G="",this.O=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},Tp.prototype.release=function(){this.stop(),this.o&&this.o.release()},Tp.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(T5(this,this.G,this.O),this.O=!1)},Tp.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function _5(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe;Re(function(pe){if(pe.g==1)return r={type:7},u=Bi([t],ua()),u.method="POST",n&&(c=JSON.stringify(n),u.body=bi(c)),f=e.K.request(7,u,r),ce(pe,2),R(pe,f.promise,4);if(pe.g!=2){if(h=pe.h,v=Cr(h.data),A=JSON.parse(v),A.manifestUrl&&A.trackingUrl)N=new Ei(t),B=new Ei(A.trackingUrl),e.G=N.resolve(B).toString(),z=Date.now()/1e3,J=z-e.T,e.i(new jn("ads-loaded",new Map().set("loadTime",J))),fe=new Ei(A.manifestUrl),e.l.resolve(N.resolve(fe).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return me(pe,0)}if(Ce(pe),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,pe.return();e.l.resolve(e.H),e.l=null,X(pe)})}function T5(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe;Re(function(it){if(it.g==1)return r={type:8},u=Bi([t],ua()),c=e.K.request(7,u,r),ce(it,2),R(it,c.promise,4);if(it.g!=2){if(f=it.h,h=[],v=Cr(f.data),A=JSON.parse(v),0<A.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(A.avails)){for(e.j=A.avails,N=m(e.j),B=N.next();!B.done;B=N.next())for(z=B.value,J=m(z.nonLinearAdsList),fe=J.next();!fe.done;fe=J.next())for(pe=fe.value,Ee=m(pe.nonLinearAdList),Le=Ee.next();!Le.done;Le=Ee.next())Fe=Le.value,S5(e,Fe);h=e.getCuePoints(),e.i(new jn("ad-cue-points-changed",new Map().set("cuepoints",h)))}}else e.j.length&&e.i(new jn("ad-cue-points-changed",new Map().set("cuepoints",h))),pd(e),e.j=[];return n&&(e.I||0<h.length)&&w5(e),me(it,0)}Ce(it),X(it)})}function S5(e,t){var n,r,u,c,f,h,v,A;Re(function(N){if(N.g==1)return!t.staticResource||(n=tN(t),e.F.get(n))?N.return():(r={type:9},u=Bi([t.staticResource],ua()),c=e.K.request(7,u,r),ce(N,2),e.F.set(n,[]),R(N,c.promise,4));if(N.g!=2)return f=N.h,h=Cr(f.data),v=JSON.parse(h),A=v.apps,e.F.set(n,A),me(N,0);Ce(N),e.F.delete(n),X(N)})}function tN(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function w5(e){rN(e),e.I||(nN(e),e.o.D(e.h,"seeked",function(){nN(e)}),e.o.D(e.h,"ended",function(){pd(e)})),e.o.D(e.h,"timeupdate",function(){rN(e)})}function nN(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,r,u=m(e.j),c=u.next();!c.done;c=u.next()){c=c.value;for(var f=m(c.ads),h=f.next();!h.done;h=f.next())if(h=h.value,!r)h.startTimeInSeconds<t&&(r=h,n=c);else if(h.startTimeInSeconds<t&&h.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=h,n=c;break}}n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function rN(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.C,u=r.startTimeInSeconds+.5*r.durationInSeconds,c=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),qo(e,"firstQuartile")):t>=u&&!e.s.includes("midpoint")?(e.s.push("midpoint"),qo(e,"midpoint")):t>=c&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),qo(e,"thirdQuartile")),r=e.g.getRemainingTime(),u=e.g.getDuration(),e.g.canSkipNow()&&0<r&&0<u&&qo(e,"skipStateChanged"),0<u&&(0>=r||r>u)&&pd(e)}if(!e.g||!e.g.isLinear()){e:for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!(e.g&&e.g.isLinear()));u=r.next())for(c=0;c<u.ads.length;c++){var f=u.ads[c],h=f.startTimeInSeconds+f.durationInSeconds;if(f.startTimeInSeconds<=t&&h>t){if(e.N.includes(f.adId)){if(e.h.ended)continue;e.h.currentTime=h;break e}pd(e),e.L=u,e.g=new lr(f,c+1,u.ads.length,!0,e.h),e.C=f,c===0&&qo(e,"breakStart"),iN(e);break}}if(!e.g){for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!e.g);u=r.next())for(c=0;c<u.nonLinearAdsList.length;c++)if(f=u.nonLinearAdsList[c],f.nonLinearAdList.length){h=u.startTimeInSeconds;var v=e.F.get(tN(f.nonLinearAdList[0]));if(h<=t&&v&&v.length){pd(e),h=e,v=m(v);for(var A=v.next();!A.done;A=v.next())if(A=A.value,A.data.source.length){var N=document.createElement("img");N.src=A.data.source[0].url,N.style.top=(A.placeholder.top||0)+"%",N.style.height=100-(A.placeholder.top||0)+"%",N.style.left=(A.placeholder.left||0)+"%",N.style.maxWidth=100-(A.placeholder.left||0)+"%",N.style.objectFit="contain",N.style.position="absolute",h.B.appendChild(N)}e.L=u,e.g=new lr(f,c+1,u.ads.length,!1,e.h),e.C=f,c===0&&qo(e,"breakStart"),iN(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function pd(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId);var t=e.g.m;t!==void 0&&t?qo(e,"skip"):qo(e,"complete"),t=m(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.$a(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&qo(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function iN(e){var t=!1;e.h.paused?t=!0:(qo(e,"impression"),qo(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&qo(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||qo(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(qo(e,"impression"),qo(e,"start"),t=!1):qo(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){qo(e,"pause")}});for(var n=m(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function qo(e,t){var n=e.C.trackingEvents.find(function(c){return c.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(c){return c.eventType==t})),n){var r={type:10};n=m(n.beaconUrls);for(var u=n.next();!u.done;u=n.next())(u=u.value)&&u!=""&&(u=Bi([u],ua()),u.method="POST",e.K.request(7,u,r))}switch(t){case"impression":e.i(new jn("ad-impression"));break;case"start":e.i(new jn("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new jn("ad-muted"));break;case"unmute":e.i(new jn("ad-volume-changed"));break;case"resume":e.i(new jn("ad-resumed"));break;case"pause":e.i(new jn("ad-paused"));break;case"firstQuartile":e.i(new jn("ad-first-quartile"));break;case"midpoint":e.i(new jn("ad-midpoint"));break;case"thirdQuartile":e.i(new jn("ad-third-quartile"));break;case"complete":e.i(new jn("ad-complete")),e.i(new jn("ad-stopped"));break;case"skip":e.i(new jn("ad-skipped")),e.i(new jn("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new jn("ad-skip-state-changed"))}}function pr(e,t){this.g=e,this.i=null,this.h=t}p=pr.prototype,p.needsSkipUI=function(){return!0},p.getDuration=function(){return this.i?this.i.duration:-1},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},p.isPaused=function(){return this.h.paused},p.isSkippable=function(){return this.g.isSkippable()},p.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.h.currentTime+=this.getRemainingTime()},p.pause=function(){return this.h.pause()},p.play=function(){return this.h.play()},p.getVolume=function(){return this.h.volume},p.setVolume=function(e){this.h.volume=e},p.isMuted=function(){return this.h.muted},p.isLinear=function(){return!0},p.resize=function(){},p.setMuted=function(e){this.h.muted=e},p.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},p.getTitle=function(){return this.g.getTitle()},p.getDescription=function(){return this.g.getDescription()},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},p.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},p.getAdId=function(){return this.g.getAdId()},p.getCreativeAdId=function(){return this.g.getCreativeAdId()},p.getAdvertiserName=function(){return this.g.getAdvertiserName()},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},p.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},p.release=function(){this.h=this.i=this.g=null},ne("shaka.ads.ServerSideAd",pr),pr.prototype.release=pr.prototype.release,pr.prototype.getPodIndex=pr.prototype.getPodIndex,pr.prototype.getTimeOffset=pr.prototype.getTimeOffset,pr.prototype.getMediaUrl=pr.prototype.getMediaUrl,pr.prototype.getAdvertiserName=pr.prototype.getAdvertiserName,pr.prototype.getCreativeAdId=pr.prototype.getCreativeAdId,pr.prototype.getAdId=pr.prototype.getAdId,pr.prototype.getVastMediaWidth=pr.prototype.getVastMediaWidth,pr.prototype.getVastMediaHeight=pr.prototype.getVastMediaHeight,pr.prototype.getVastMediaBitrate=pr.prototype.getVastMediaBitrate,pr.prototype.getDescription=pr.prototype.getDescription,pr.prototype.getTitle=pr.prototype.getTitle,pr.prototype.getPositionInSequence=pr.prototype.getPositionInSequence,pr.prototype.getSequenceLength=pr.prototype.getSequenceLength,pr.prototype.setMuted=pr.prototype.setMuted,pr.prototype.resize=pr.prototype.resize,pr.prototype.isLinear=pr.prototype.isLinear,pr.prototype.isMuted=pr.prototype.isMuted,pr.prototype.setVolume=pr.prototype.setVolume,pr.prototype.getVolume=pr.prototype.getVolume,pr.prototype.play=pr.prototype.play,pr.prototype.pause=pr.prototype.pause,pr.prototype.skip=pr.prototype.skip,pr.prototype.canSkipNow=pr.prototype.canSkipNow,pr.prototype.getTimeUntilSkippable=pr.prototype.getTimeUntilSkippable,pr.prototype.isSkippable=pr.prototype.isSkippable,pr.prototype.isPaused=pr.prototype.isPaused,pr.prototype.getRemainingTime=pr.prototype.getRemainingTime,pr.prototype.getMinSuggestedDuration=pr.prototype.getMinSuggestedDuration,pr.prototype.getDuration=pr.prototype.getDuration,pr.prototype.needsSkipUI=pr.prototype.needsSkipUI;function oN(e,t,n,r){var u=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Tt,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new jn("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(c){A5(u,c)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.B.length?u.j.resolve(u.B):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(c){c=c.getAd(),u.m=new pr(c,u.l),u.A&&(u.m.i=u.A),u.i(new jn("ad-started",new Map().set("ad",u.m))),u.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.s.removeAttribute("ad-active");var c=u.l.currentTime;u.o&&u.o>c&&(u.l.currentTime=u.o,u.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(c){u.A=c.getStreamData().adProgressData,u.m&&(u.m.i=u.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new jn("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new jn("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new jn("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new jn("ad-complete")),u.i(new jn("ad-stopped")),u.s.removeAttribute("ad-active"),u.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new jn("ad-skipped")),u.i(new jn("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(c){var f=c.getStreamData();c=[],f=m(f.cuepoints);for(var h=f.next();!h.done;h=f.next())h=h.value,c.push({start:h.start,end:h.end});u.C=c,u.i(new jn("ad-cue-points-changed",new Map().set("cuepoints",c)))})}p=oN.prototype,p.configure=function(){},p.stop=function(){this.B="",this.o=null,this.C=[]},p.release=function(){this.stop(),this.h&&this.h.release()},p.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},p.getCuePoints=function(){return this.C};function A5(e,t){e.i(new jn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function Wn(){Nr.call(this),this.g=this.i=this.j=this.h=null,this.m=new Wx,this.o=navigator.language,this.l=null}Y(Wn,Nr),p=Wn.prototype,p.setLocale=function(e){this.o=e},p.configure=function(e){this.l=e,this.h&&this.h.configure(this.l),this.j&&this.j.configure(this.l),this.g&&this.g.configure(this.l)},p.initInterstitial=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new _p(e,t,n,function(u){return Ov(r,u)}),this.h.configure(this.l)},p.initClientSide=function(e,t,n){var r=this;if(!g.google||!google.ima||!google.ima.AdsLoader)throw new Xe(2,10,1e4);this.j&&this.j.release(),this.j=new Nv(e,t,this.o,n,function(u){return Ov(r,u)}),this.j.configure(this.l)},p.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),Nr.prototype.release.call(this)},p.onAssetUnload=function(){this.h&&this.h.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new jn("ad-stopped")),this.dispatchEvent(new jn("ad-content-attach-requested")),this.m=new Wx},p.requestClientSideAds=function(e){if(!this.j)throw new Xe(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},p.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new Xe(1,10,10001);var t=this.j;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},p.initMediaTailor=function(e,t,n){var r=this;this.i&&this.i.release(),this.i=new Tp(e,t,n,function(u){return Ov(r,u)})},p.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new Xe(1,10,10005);var r=this.i;return n=n===void 0?"":n,r.l?e=Promise.reject(new Xe(1,10,10004)):(r.l=new Lr,_5(r,e,t),r.H=n||"",r.T=Date.now()/1e3,e=r.l),e},p.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new Xe(1,10,10005);var t=this.i;t.G=e,t.i(new jn("ads-loaded",new Map().set("loadTime",0)))},p.initServerSide=function(e,t){var n=this;if(!g.google||!google.ima||!google.ima.dai)throw new Xe(2,10,10002);this.g&&this.g.release(),this.g=new oN(e,t,this.o,function(r){return Ov(n,r)}),this.g.configure(this.l)},p.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new Xe(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Ke('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.11.4",n=this.g,n.j?e=Promise.reject(new Xe(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Lr,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},p.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new Xe(1,10,10003);(e.mpt||e.mpv)&&Ke('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.11.4",this.g.g.replaceAdTagParameters(e)},p.getServerSideCuePoints=function(){return gr("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},p.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},p.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:g5(e),started:e.h,playedCompletely:e.j,skipped:e.l,errors:e.i}},p.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},p.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},p.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},p.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},p.onHLSInterstitialMetadata=function(e,t,n){this.h||this.initInterstitial(null,e,t),this.h&&y5(this.h,n)},p.onDASHInterstitialMetadata=function(e,t,n){if(n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:2022"&&(this.h||this.initInterstitial(null,e,t),this.h)){e=this.h,t=m(n.eventNode.children);for(var r=t.next();!r.done;r=t.next()){var u=r.value;if(u.tagName=="AlternativeMPD"&&(r=u.attributes.uri,u=u.attributes.mode,r)){var c=r,f=u;break}}c?(t=f=="replace",f=f=="insert",(t||f)&&Pv(e,[{id:null,startTime:n.startTime,endTime:t?n.endTime:null,uri:c,isSkippable:!1,skipOffset:null,canJump:!0,resumeOffset:f?0:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:t&&!f}])):Ke("Unsupported MPD alternate",n)}},p.addCustomInterstitial=function(e){if(!this.h)throw new Xe(1,10,10006);Pv(this.h,[e])},p.addAdUrlInterstitial=function(e){if(!this.h)throw new Xe(1,10,10006);return this.h.addAdUrlInterstitial(e)};function Ov(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;break;case"ad-complete":e.m.j++;break;case"ad-skipped":e.m.l++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}ne("shaka.ads.AdManager",Wn),Wn.prototype.addAdUrlInterstitial=Wn.prototype.addAdUrlInterstitial,Wn.prototype.addCustomInterstitial=Wn.prototype.addCustomInterstitial,Wn.prototype.onDASHInterstitialMetadata=Wn.prototype.onDASHInterstitialMetadata,Wn.prototype.onHLSInterstitialMetadata=Wn.prototype.onHLSInterstitialMetadata,Wn.prototype.onCueMetadataChange=Wn.prototype.onCueMetadataChange,Wn.prototype.onHlsTimedMetadata=Wn.prototype.onHlsTimedMetadata,Wn.prototype.onDashTimedMetadata=Wn.prototype.onDashTimedMetadata,Wn.prototype.onManifestUpdated=Wn.prototype.onManifestUpdated,Wn.prototype.getStats=Wn.prototype.getStats,Wn.prototype.getCuePoints=Wn.prototype.getCuePoints,Wn.prototype.getServerSideCuePoints=Wn.prototype.getServerSideCuePoints,Wn.prototype.replaceServerSideAdTagParameters=Wn.prototype.replaceServerSideAdTagParameters,Wn.prototype.requestServerSideStream=Wn.prototype.requestServerSideStream,Wn.prototype.initServerSide=Wn.prototype.initServerSide,Wn.prototype.addMediaTailorTrackingUrl=Wn.prototype.addMediaTailorTrackingUrl,Wn.prototype.requestMediaTailorStream=Wn.prototype.requestMediaTailorStream,Wn.prototype.initMediaTailor=Wn.prototype.initMediaTailor,Wn.prototype.updateClientSideAdsRenderingSettings=Wn.prototype.updateClientSideAdsRenderingSettings,Wn.prototype.requestClientSideAds=Wn.prototype.requestClientSideAds,Wn.prototype.onAssetUnload=Wn.prototype.onAssetUnload,Wn.prototype.release=Wn.prototype.release,Wn.prototype.initClientSide=Wn.prototype.initClientSide,Wn.prototype.initInterstitial=Wn.prototype.initInterstitial,Wn.prototype.configure=Wn.prototype.configure,Wn.prototype.setLocale=Wn.prototype.setLocale,Wn.ADS_LOADED="ads-loaded",Wn.AD_STARTED="ad-started",Wn.AD_FIRST_QUARTILE="ad-first-quartile",Wn.AD_MIDPOINT="ad-midpoint",Wn.AD_THIRD_QUARTILE="ad-third-quartile",Wn.AD_COMPLETE="ad-complete",Wn.AD_STOPPED="ad-stopped",Wn.AD_SKIPPED="ad-skipped",Wn.AD_VOLUME_CHANGED="ad-volume-changed",Wn.AD_MUTED="ad-muted",Wn.AD_PAUSED="ad-paused",Wn.AD_RESUMED="ad-resumed",Wn.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Wn.CUEPOINTS_CHANGED="ad-cue-points-changed",Wn.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Wn.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Wn.AD_CLICKED="ad-clicked",Wn.AD_PROGRESS="ad-progress",Wn.AD_BUFFERING="ad-buffering",Wn.AD_IMPRESSION="ad-impression",Wn.AD_DURATION_CHANGED="ad-duration-changed",Wn.AD_CLOSED="ad-closed",Wn.AD_LOADED="ad-loaded",Wn.ALL_ADS_COMPLETED="all-ads-completed",Wn.AD_LINEAR_CHANGED="ad-linear-changed",Wn.AD_METADATA="ad-metadata",Wn.AD_RECOVERABLE_ERROR="ad-recoverable-error",Wn.AD_ERROR="ad-error",Wn.AD_BREAK_READY="ad-break-ready",Wn.AD_INTERACTION="ad-interaction",Wn.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Wn.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Wn.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",xv=function(){return new Wn};function aN(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof jn){var r={};for(u in n)(t=n[u])&&typeof t=="object"?u=="detail"&&(r[u]=t):u in Event||(r[u]=t);return r}if(n instanceof Error){var u=new Set(["name","message","stack"]);for(r in n)u.add(r);for(r=m(Object.getOwnPropertyNames(n)),t=r.next();!t.done;t=r.next())u.add(t.value);for(r={},u=m(u),t=u.next();!t.done;t=u.next())t=t.value,r[t]=n[t];n={__type__:"Error",contents:r}}else if(n instanceof TimeRanges){for(u={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(gi(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,u.start.push(r.start),u.end.push(t);n=u}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function V1(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=I5(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function I5(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var sN="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),b5="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),K1=["loop","playbackRate"],C5=["pause","play"],Lv={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10,isFullyLoaded:1},kv={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},z1={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},uN=[["getConfiguration","configure"]],lN=[["isTextTrackVisible","setTextTrackVisibility"]],R5="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),x5=["attach","attachCanvas","detach","load","unload"];function Y1(e,t,n,r,u,c,f){var h=this;this.G=e,this.K=f,this.l=new on(t),this.L=n,this.s=!1,this.A=r,this.F=u,this.N=c,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return W1(h)},this.C=function(v,A){switch(v=V1(A),v.type){case"event":var N=v.targetName,B=Qh(v.event);h.A(N,B);break;case"update":N=v.update;for(B in N){v=h.g[B]||{};for(var z in N[B])v[z]=N[B][z]}h.s&&(h.L(),h.s=!1);break;case"asyncComplete":if(B=v.id,z=v.error,v=h.i[B],delete h.i[B],v)if(z){B=new Xe(z.severity,z.category,z.code);for(N in z)B[N]=z[N];v.reject(B)}else v.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,wp.add(this)}p=Y1.prototype,p.destroy=function(){return wp.delete(this),$1(this),Rs&&fN(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},p.gb=function(){return this.h},p.Gf=function(){return this.I},p.init=function(){if(this.G.length)if(g.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.wc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(wp),r=n.next();!r.done;r=n.next()){r=r.value;var u=t;r.j=new Lr,r.s=!0,Fv(r,u)}},function(t){for(var n=m(wp),r=n.next();!r.done;r=n.next())r=r.value,Uv=t=="available",r.l.wc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Uv&&this.l.Z(M5),(e=Rs)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Lr,this.s=!0,Fv(this,e)):Rs=null}else g.__onGCastApiAvailable!==dN&&(Bv=g.__onGCastApiAvailable||null,g.__onGCastApiAvailable=dN)},p.Nf=function(e){this.o=e,this.h&&Sp(this,{type:"appData",appData:this.o})},p.cast=function(){var e=this;return Re(function(t){if(!e.m)throw new Xe(1,8,8e3);if(!Uv)throw new Xe(1,8,8001);if(e.h)throw new Xe(1,8,8002);return e.j=new Lr,chrome.cast.requestSession(function(n){return Fv(e,n)},function(n){return cN(e,n)}),R(t,e.j,0)})};function N5(e){e.h&&chrome.cast.requestSession(function(t){return Fv(e,t)},function(t){return cN(e,t)})}p.Fc=function(){if(this.h){if($1(this),Rs){fN(this);try{Rs.stop(function(){},function(){})}catch(e){}Rs=null}W1(this)}},p.get=function(e,t){var n=this;if(e=="video"){if(C5.includes(t))return function(){return n.Rg.apply(n,[e,t].concat(T(Ye.apply(0,arguments))))}}else if(e=="player"){if(z1[t]&&!this.get("player","isLive")())return function(){};if(R5.includes(t))return function(){return n.Rg.apply(n,[e,t].concat(T(Ye.apply(0,arguments))))};if(x5.includes(t))return function(){return n.Ii.apply(n,[e,t].concat(T(Ye.apply(0,arguments))))};if(Lv[t]||kv[t])return function(){return n.g[e][t]}}return this.g[e][t]},p.set=function(e,t,n){this.g[e][t]=n,Sp(this,{type:"set",targetName:e,property:t,value:n})};function Fv(e,t){var n=e.N();Rs=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),W1(e),Sp(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function cN(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new Xe(2,8,n,t))}p.Rg=function(e,t){Sp(this,{type:"call",targetName:e,methodName:t,args:Ye.apply(2,arguments)})},p.Ii=function(e,t){var n=Ye.apply(2,arguments),r=new Lr,u=this.H.toString();this.H++,this.i[u]=r;try{Sp(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:u})}catch(c){r.reject(c)}return r};function fN(e){var t=Rs;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function W1(e){var t=Rs?Rs.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};$1(e)}e.h=t,e.I=t?Rs.receiver.friendlyName:"",e.l.wc()}function $1(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new Xe(1,7,7e3))}}function Sp(e,t){t=aN(t);var n=Rs;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},lt)}catch(r){throw t=new Xe(2,8,8005,r),n=new jn("error",new Map().set("detail",t)),e.A("player",n),e.Fc(),t}}var M5=.02,Uv=!1,Rs=null,Bv=null,wp=new Set;function dN(e){if(Bv?g.__onGCastApiAvailable=Bv:delete g.__onGCastApiAvailable,Bv=null,e)for(var t=m(wp),n=t.next();!n.done;n=t.next())n.value.init();typeof g.__onGCastApiAvailable=="function"&&g.__onGCastApiAvailable(e)}function Oi(e,t,n,r){r=r===void 0?!1:r,Nr.call(this);var u=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new Y1(n,function(){return gN(u)},function(){return mN(u)},function(c,f){return yN(u,c,f)},function(){return vN(u)},function(){return pN(u)},r),D5(this)}Y(Oi,Nr),p=Oi.prototype,p.destroy=function(e){return e&&this.g.Fc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Nr.prototype.release.call(this),Promise.all(e)},p.di=function(){return this.l},p.Th=function(){return this.s},p.yh=function(){return this.g.m&&Uv},p.gb=function(){return this.g.gb()},p.Gf=function(){return this.g.Gf()},p.cast=function(){var e=this;return Re(function(t){return t.g==1?R(t,e.g.cast(),2):e.h?R(t,e.h.ec(),0):t.return()})},p.Nf=function(e){this.g.Nf(e)},p.Yi=function(){N5(this.g)},p.Fc=function(){this.g.Fc()},p.zh=function(e,t){t=t===void 0?!1:t;var n=this;return Re(function(r){if(r.g==1)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.Fc(),R(r,n.g.destroy(),2));n.g=null,n.g=new Y1(e,function(){return gN(n)},function(){return mN(n)},function(u,c){return yN(n,u,c)},function(){return vN(n)},function(){return pN(n)},t),n.g.init(),X(r)})};function D5(e){e.g.init(),e.m=new Tt;for(var t=m(sN),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(c){e.g.gb()||(c=Qh(c),e.j.dispatchEvent(c))});for(var r in $f)e.m.D(e.h,$f[r],function(c){e.g.gb()||e.o.dispatchEvent(c)});e.l={},t={};for(var u in e.i)t={kd:t.kd},t.kd=u,Object.defineProperty(e.l,t.kd,{configurable:!1,enumerable:!0,get:function(c){return function(){return O5(e,c.kd)}}(t),set:function(c){return function(f){var h=c.kd;e.g.gb()?e.g.set("video",h,f):e.i[h]=f}}(t)});e.s={},hN(e,function(c){Object.defineProperty(e.s,c,{configurable:!1,enumerable:!0,get:function(){return L5(e,c)}})}),P5(e),e.j=new Nr,e.j.oe=e.l,e.o=new Nr,e.o.oe=e.s}function P5(e){var t=new Map;hN(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function hN(e,t){function n(v){return v=="constructor"||typeof r[v]!="function"?!1:!u.has(v)}var r=e.h,u=new Set,c;for(c in r)n(c)&&(u.add(c),t(c,r[c]));for(e=Object.getPrototypeOf(r),c=Object.getPrototypeOf({});e&&e!=c;){for(var f=m(Object.getOwnPropertyNames(e)),h=f.next();!h.done;h=f.next())h=h.value,n(h)&&(u.add(h),t(h,r[h]));e=Object.getPrototypeOf(e)}}function pN(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Gc(),startTime:null};e.i.pause();for(var n=m(K1),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=m(uN),r=n.next();!r.done;r=n.next()){var u=r.value;r=u[1],u=e.h[u[0]](),t.player[r]=u}for(n=m(lN),r=n.next();!r.done;r=n.next())u=r.value,r=u[1],u=e.h[u[0]](),t.playerAfterLoad[r]=u;return t}function gN(e){var t=new jn("caststatuschanged");e.dispatchEvent(t)}function mN(e){var t=new jn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function vN(e){for(var t=m(uN),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var u=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var c=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var f;(r=e.g.get("player","getTextTracks")())&&r.length&&(f=r.find(function(A){return A.active}));var h=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var v={};for(n=m(K1),r=n.next();!r.done;r=n.next())r=r.value,v[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var A=m(K1),N=A.next();!N.done;N=A.next())N=N.value,e.i[N]=v[N];for(A=m(lN),N=A.next();!N.done;N=A.next()){var B=N.value;N=B[1],B=e.g.get("player",B[0])(),e.h[N](B)}e.h.ah(h),f&&e.h.Lf(f.language,f.roles,f.forced),e.i.autoplay=c,u&&e.i.play()}},function(A){A=new Map().set("detail",A),A=new jn("error",A),e.h.dispatchEvent(A)})}function O5(e,t){if(t=="addEventListener")return function(r,u,c){return e.j.addEventListener(r,u,c)};if(t=="removeEventListener")return function(r,u,c){return e.j.removeEventListener(r,u,c)};if(e.g.gb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.gb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function L5(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,u){return e.o.addEventListener(n,r,u)};if(t=="removeEventListener")return function(n,r,u){return e.o.removeEventListener(n,r,u)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.yb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.sg()};if(t=="setVideoContainer")return function(n){return e.h.fh(n)};if(e.g.gb()){if(t=="getManifest"||t=="drmInfo")return function(){return Ke(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return Ke(t+"() does not work while casting!"),Promise.resolve()}}return e.g.gb()&&Object.keys(e.g.g.video).length==0&&(Lv[t]||kv[t])||!e.g.gb()?e.h[t].bind(e.h):e.g.get("player",t)}function yN(e,t,n){e.g.gb()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}ne("shaka.cast.CastProxy",Oi),Oi.prototype.changeReceiverId=Oi.prototype.zh,Oi.prototype.forceDisconnect=Oi.prototype.Fc,Oi.prototype.suggestDisconnect=Oi.prototype.Yi,Oi.prototype.setAppData=Oi.prototype.Nf,Oi.prototype.cast=Oi.prototype.cast,Oi.prototype.receiverName=Oi.prototype.Gf,Oi.prototype.isCasting=Oi.prototype.gb,Oi.prototype.canCast=Oi.prototype.yh,Oi.prototype.getPlayer=Oi.prototype.Th,Oi.prototype.getVideo=Oi.prototype.di,Oi.prototype.destroy=Oi.prototype.destroy;function Co(e,t,n,r){Nr.call(this);var u=this;this.g=e,this.h=t,this.j=new Tt,this.H={video:e,player:t},this.F=n||function(){},this.I=r||function(c){return c},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.C=new on(function(){X1(u)}),k5(this)}Y(Co,Nr),p=Co.prototype,p.isConnected=function(){return this.G},p.ki=function(){return this.o},p.Ui=function(e){this.i=e},p.Bh=function(){this.i=null},p.Vi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},p.Ti=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},p.Si=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},p.destroy=function(){var e=this,t,n;return Re(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.C&&(e.C.stop(),e.C=null),e.g=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.s=null,Nr.prototype.release.call(e),R(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),X(r)})};function k5(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return EN(e)},t.onSenderDisconnected=function(){return EN(e)},t.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&ll(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),ll(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(u){return B5(e,u)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return U5(e,u)},t.start(),t=m(sN);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(u){return _N(e,"video",u)});for(var r in $f)e.j.D(e.h,$f[r],function(u){return _N(e,"player",u)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,gd(e)}),e.j.D(e.g,"playing",function(){e.o=!1,gd(e)}),e.j.D(e.g,"pause",function(){gd(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,gd(e)}),e.j.D(e.g,"ended",function(){new on(function(){e.g&&e.g.ended&&(e.o=!0,gd(e))}).Z(Z5)})}function EN(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,gd(e)}function gd(e){var t;Re(function(n){if(n.g==1)return R(n,Promise.resolve(),2);if(!e.h)return n.return();t=new jn("caststatuschanged"),e.dispatchEvent(t),TN(e)||cl(e),X(n)})}function F5(e,t,n){var r,u,c,f,h,v,A,N,B,z;Re(function(J){switch(J.g){case 1:for(r in t.player)u=t.player[r],e.h[r](u);return e.F(n),c=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ce(J,5),R(J,e.h.load(t.manifest,t.startTime),7)):R(J,Promise.resolve(),3);case 7:me(J,3);break;case 5:return f=Ce(J),h=new Map().set("detail",f),v=new jn("error",h),e.h&&e.h.dispatchEvent(v),J.return();case 3:if(!e.h)return J.return();for(A in t.video)N=t.video[A],e.g[A]=N;for(B in t.playerAfterLoad)z=t.playerAfterLoad[B],e.h[B](z);e.g.autoplay=c,t.manifest&&(e.g.play(),cl(e)),X(J)}})}function _N(e,t,n){e.h&&(X1(e),ll(e,{type:"event",targetName:t,event:n},e.l))}function X1(e){e.C.Z(j5);for(var t={video:{},player:{}},n=m(b5),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.U())for(var u in z1)e.m%z1[u]==0&&(t.player[u]=e.h[u]());for(var c in Lv)e.m%Lv[c]==0&&(t.player[c]=e.h[c]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),ll(e,{type:"update",update:t},e.l);for(var f in kv)e.m%kv[f]==0&&(t={player:{}},t.player[f]=e.h[f](),ll(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),TN(e)}function TN(e){return e.A&&(e.g.duration||e.h.U())?(Q1(e),e.A=!1,!0):!1}function Q1(e,t){var n={contentId:e.h.Gc(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),cl(e,t===void 0?0:t,n)}function U5(e,t){var n=V1(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,F5(e,n.initState,n.appData),X1(e);break;case"appData":e.F(n.appData);break;case"set":var r=n.targetName,u=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){t.setSystemVolumeLevel(n);break}else if(u=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][u]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,u=n.methodName,r=="player"&&u=="load"&&(e.m=0,e.B=!1);var c=n.id,f=t.senderId;t=e.H[r],n=t[u].apply(t,n.args),r=="player"&&u=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return SN(e,f,c,null)},function(h){return SN(e,f,c,h)})}}function B5(e,t){var n=V1(t.data);switch(n.type){case"PLAY":e.g.play(),cl(e);break;case"PAUSE":e.g.pause(),cl(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),cl(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),cl(e));break;case"STOP":e.h.ec().then(function(){e.h&&cl(e)});break;case"GET_STATUS":Q1(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var u=e.g.volume,c=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),u==e.g.volume&&c==e.g.muted||cl(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,u=e.I(t.contentId),c=n.autoplay||!0,e.F(t.customData),c&&(e.g.autoplay=!0),e.h.load(u,r).then(function(){e.h&&Q1(e)}).catch(function(f){var h="LOAD_FAILED";f.category==7&&f.code==7e3&&(h="LOAD_CANCELLED"),ll(e,{requestId:Number(n.requestId),type:h},e.s)});break;default:ll(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function SN(e,t,n,r){e.h&&ll(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function ll(e,t,n,r){e.G&&(e=aN(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function cl(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?q5:e.h.pf()?H5:e.g.paused?V5:G5,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),ll(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}ne("shaka.cast.CastReceiver",Co),Co.prototype.destroy=Co.prototype.destroy,Co.prototype.setContentArtist=Co.prototype.Si,Co.prototype.setContentImage=Co.prototype.Ti,Co.prototype.setContentTitle=Co.prototype.Vi,Co.prototype.clearContentMetadata=Co.prototype.Bh,Co.prototype.setContentMetadata=Co.prototype.Ui,Co.prototype.isIdle=Co.prototype.ki,Co.prototype.isConnected=Co.prototype.isConnected;var j5=.5,Z5=5,q5="IDLE",G5="PLAYING",H5="BUFFERING",V5="PAUSED";function wN(e,t,n,r,u){if(r>=u)return null;for(var c=-1,f=-1,h=0;h<n.length;h++)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){c=h;break}for(h=n.length-1;0<=h;h--)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){f=h;break}if(c===-1||f===-1)return null;for(var v=h=!1,A="white",N="black",B=J1(r,u,h,v,A,N);c<=f;c++){for(var z=n[c],J=-1,fe=-1,pe=0;pe<z.length;pe++)if(z[pe]!=null&&z[pe].g.trim()!==""){J=pe;break}for(pe=z.length-1;0<=pe;pe--)if(z[pe]!=null&&z[pe].g.trim()!==""){fe=pe;break}if(J===-1||fe===-1)z=AN(r,u),e.nestedCues.push(z);else{for(;J<=fe;J++)if(pe=z[J]){var Ee=pe.l,Le=pe.i,Fe=pe.j,it=pe.h;(Ee!=h||Le!=v||Fe!=A||it!=N)&&(B.payload&&e.nestedCues.push(B),B=J1(r,u,Ee,Le,Fe,it),h=Ee,v=Le,A=Fe,N=it),B.payload+=pe.g}else B.payload+=" ";B.payload&&e.nestedCues.push(B),c!==f&&(B=AN(r,u),e.nestedCues.push(B)),B=J1(r,u,h,v,A,N)}}return e.nestedCues.length?{cue:e,stream:t}:null}function J1(e,t,n,r,u,c){return e=new jr(e,t,""),n&&e.textDecoration.push(Vs),r&&(e.fontStyle=Su),e.color=u,e.backgroundColor=c,e}function AN(e,t){return e=new jr(e,t,""),e.lineBreak=!0,e}function IN(e,t,n,r,u){this.g=e,this.l=t,this.i=n,this.h=r,this.j=u}function e_(e,t){this.i=[],this.g=1,this.h=0,this.C=e,this.B=t,this.j=this.m=!1,this.l="white",this.o="black",this.s=this.A=null,Ap(this)}function jv(e,t,n){var r="CC"+((e.C<<1|e.B)+1),u=new jr(t,n,"");u.lineInterpretation=1;var c=RN.get(e.g);return c&&(u.line=c),e.s!=null&&e.A!=null&&(u.position=10+Math.min(70,10*e.s)+2.5*e.A),(t=wN(u,r,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(c=RN.get(e.g+3-t.cue.nestedCues.length))&&(u.line=c),t}function Ap(e){fl(e,0,15),e.g=1}function md(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case 0:r=CN.has(n)?CN.get(n):String.fromCharCode(n);break;case 1:r=K5.get(n);break;case 2:e.i[e.g].pop(),r=z5.get(n);break;case 3:e.i[e.g].pop(),r=Y5.get(n)}r&&e.i[e.g].push(new IN(r,e.m,e.j,e.o,e.l))}}function bN(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(c){return c});else for(var u=0;u<r;u++)e.i[t+u]=e.i[n+u].map(function(c){return c})}function fl(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var CN=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),K5=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57," "],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),z5=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Y5=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),RN=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Zv(e,t){this.h=0,this.o=new e_(e,t),this.i=new e_(e,t),this.g=this.j=new e_(e,t),this.l=0,this.m=null}function t_(e,t,n){e.g=e.i;var r=e.g,u=null;return e.h!==3&&e.h!==4&&(u=jv(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,fl(n,0,15),n=e.j,n.g=0<n.h?n.h:0,fl(n,0,15),r.g=15),e.h=3,r.h=t,u}function xN(e){e.h=1,e.g=e.j,e.g.h=0}function NN(e){wt("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var W5="black green blue cyan red yellow magenta black".split(" "),MN="white green blue cyan red yellow magenta white_italics".split(" ");function n_(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",r_(this)}function r_(e){e.i=[];for(var t=0;16>t;t++)e.i.push(i_())}function i_(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function kc(e,t){DN(e)&&(e.i[e.h][e.g]=new IN(t,e.C,e.A,e.s,e.B),e.g++)}function DN(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}n_.prototype.isVisible=function(){return this.l};function Fc(e,t,n){var r=new jr(e.j,t,"");r.textAlign=e.F===0?"left":e.F===1?"right":ba;var u=r.region;switch(e.I&&(u.id+="svc"+e.I),u.id+="win"+e.N,u.height=e.o,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.H,u.viewportAnchorY=e.L,u.viewportAnchorUnits=e.K?wn:2,e.G){case 0:u.regionAnchorX=0,u.regionAnchorY=0;break;case 1:u.regionAnchorX=50,u.regionAnchorY=0;break;case 2:u.regionAnchorX=100,u.regionAnchorY=0;break;case 3:u.regionAnchorX=0,u.regionAnchorY=50;break;case 4:u.regionAnchorX=50,u.regionAnchorY=50;break;case 5:u.regionAnchorX=100,u.regionAnchorY=50;break;case 6:u.regionAnchorX=0,u.regionAnchorY=100;break;case 7:u.regionAnchorX=50,u.regionAnchorY=100;break;case 8:u.regionAnchorX=100,u.regionAnchorY=100}return(n=wN(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}n_.prototype.display=function(){this.l=!0};function $5(){this.i=[],this.h=null,this.g=0}function X5(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new qv(e.h)),e.h=null,e.g=0))}function qv(e){this.g=0,this.h=e}qv.prototype.ra=function(){return this.g<this.h.length},qv.prototype.xa=function(){return this.g};function fo(e){if(!e.ra())throw new Xe(2,2,3e3);return e.h[e.g++]}qv.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Xe(2,2,3e3);this.g+=e};function Q5(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function J5(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=fo(t).value,t=null,n=m(Ip(e,n));for(var u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Fc(u,r,e.i)),r_(u);return t}if(n===137)for(t=fo(t).value,t=m(Ip(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.display();else{if(n===138){for(n=fo(t).value,t=null,n=m(Ip(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Fc(u,r,e.i)),u.l=!1;return t}if(n===139){for(n=fo(t).value,t=null,n=m(Ip(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()?t=Fc(u,r,e.i):u.j=r,u.l=!u.l;return t}if(n===140)return t=fo(t).value,PN(e,t,r);if(n===143)return r=PN(e,255,r),ON(e),r;if(n===144)t.skip(1),r=fo(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=fo(t).value,n=fo(t).value,t.skip(1),e.g&&(t=LN((n&48)>>4,(n&12)>>2,n&3),e.g.B=LN((r&48)>>4,(r&12)>>2,r&3),e.g.s=t);else if(n===146)r=fo(t).value,t=fo(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=fo(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,u=e.h[n]!==null,!u){var c=new n_(n,e.i);c.j=r,e.h[n]=c}r=fo(t).value,c=fo(t).value;var f=fo(t).value,h=fo(t).value,v=fo(t).value;t=fo(t).value,u&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(r&32),t.L=c&127,t.H=f,t.G=(h&240)>>4,t.K=0<(c&128),t.o=(h&15)+1,t.m=(v&63)+1,e.g=e.h[n]}}}return null}function Ip(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function PN(e,t,n){var r=null;t=m(Ip(e,t));for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=e.h[u];c.isVisible()&&(r=Fc(c,n,e.i)),e.h[u]=null}return r}function ON(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function LN(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],e6[e<<2|t<<1|n]}var kN=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),e6="black blue green cyan red magenta yellow white".split(" ");function vd(){this.h=[],this.g=[],this.i=new $5,this.l=0,this.m=new Map([["CC1",new Zv(0,0)],["CC2",new Zv(0,1)],["CC3",new Zv(1,0)],["CC4",new Zv(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,o_(this)}vd.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,o_(this),e=m(this.j.values());for(var t=e.next();!t.done;t=e.next())ON(t.value)};function o_(e){e.o=0,e.s=0;for(var t=m(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Ap(n.i),Ap(n.j),Ap(n.o);e.B=!0}vd.prototype.extract=function(e,t){if(this.B){for(var n=m(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new k(e,0),!(8>e.getLength())&&e.S()===181&&e.la()===49&&e.P()===1195456820&&e.S()===3&&(n=e.S(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var u=e.S(),c=(u&4)>>2,f=e.S(),h=e.S();c&&(u&=3,u===0||u===1?this.h.push({pts:t,type:u,cb:f,Cb:h,order:this.h.length}):(this.g.push({pts:t,type:u,value:f,order:this.g.length}),this.g.push({pts:t,type:2,value:h,order:this.g.length})))}},vd.prototype.decode=function(){function e(u,c){return u.pts-c.pts||u.order-c.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),r=n.next();!r.done;r=n.next())(r=t6(this,r.value))&&t.push(r);for(n=m(this.g),r=n.next();!r.done;r=n.next())X5(this.i,r.value);for(n=m(this.i.i),r=n.next();!r.done;r=n.next())r=n6(this,r.value),t.push.apply(t,T(r));return this.i.i=[],this.h=[],this.g=[],t};function t6(e,t){var n=t.type;if((t.cb&112)===16){var r=t.cb>>3&1;n===0?e.o=r:e.s=r}if(r="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(r),t.cb===255&&t.Cb===255||!t.cb&&!t.Cb||!FN(t.cb)||!FN(t.Cb))return 45<=++e.l&&o_(e),null;e.l=0,t.cb&=127,t.Cb&=127;var u=t.cb;if(1<=u&&15>=u||!t.cb&&!t.Cb)return null;if(u=null,(t.cb&112)===16)e:{if(e.A.add(r),r=t.cb,e=t.Cb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1],r="white",u=!1;var c=null,f=95<e?e-96:e-64;13>=f?r=MN[Math.floor(f/2)]:15>=f?u=!0:c=Math.floor((f-16)/2),e=(e&1)===1,n.h!==4&&(f=n.g,n.h===3&&t!==f.g&&(n=1+t-f.h,bN(f,n,1+f.g-f.h,f.h),fl(f,0,n-1),fl(f,t+1,15-t)),f.g=t,f.m=e,f.j=u,f.l=r,f.s=c,f.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",md(n.g,0,32),r=!1,t=MN[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",!(r&7)&&(t=W5[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)md(n.g,1,e);else if((r&246)===18&&(e&224)===32)md(n.g,r&1?3:2,e);else{if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.Cb){case 32:xN(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=t_(n,2,e);break;case 38:r=t_(n,3,e);break;case 39:r=t_(n,4,e);break;case 40:md(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Ap(n.o),NN(n);break;case 43:NN(n);break;case 44:t=n.i,r=null,n.h!==4&&(r=jv(t,n.l,e)),fl(t,0,15);break;case 45:t=n.g,n.h!==3?r=null:(r=jv(t,n.l,e),u=t.g-t.h+1,bN(t,u-1,u,t.h),fl(t,0,u-1),fl(t,t.g,15-t.g),n.l=e);break;case 46:fl(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=jv(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,xN(n),n.l=e,r=t}u=r;break e}(r==23||r==31)&&33<=e&&35>=e&&(n.g.A=e-32)}u=null}else e=t.Cb,md(n.g,0,t.cb),md(n.g,0,e);return u}function n6(e,t){var n=[];try{for(;t.ra();){var r=fo(t).value,u=(r&224)>>5,c=r&31;if(u===7&&c!=0&&(u=fo(t).value&63),u!=0){e.A.add("svc"+u),e.j.has(u)||e.j.set(u,new Q5(u));for(var f=e.j.get(u),h=t.xa();t.xa()-h<c;){u=f;var v=t,A=fo(v),N=A.value,B=A.pts;if(N===16){var z=fo(v);N=N<<16|z.value}if(0<=N&&31>=N){v=u;var J=N,fe=B;if(v.g){var pe=v.g;switch(u=null,J){case 8:!DN(pe)||0>=pe.g&&0>=pe.h||(0>=pe.g?(pe.g=pe.m-1,pe.h--):pe.g--,pe.i[pe.h][pe.g]=null);break;case 13:if(pe.isVisible()&&(u=Fc(pe,fe,v.i)),pe.h+1>=pe.o){for(v=pe,J=0,fe=1;16>fe;fe++,J++)v.i[J]=v.i[fe];for(fe=0;1>fe;fe++,J++)v.i[J]=i_()}else pe.h++;pe.g=0;break;case 14:pe.isVisible()&&(u=Fc(pe,fe,v.i)),pe.i[pe.h]=i_(),pe.g=0;break;case 12:pe.isVisible()&&(u=Fc(pe,fe,v.i)),r_(pe),v=pe,v.h=0,v.g=0}var Ee=u}else Ee=null}else if(128<=N&&159>=N)Ee=J5(u,v,N,B);else{if(4096<=N&&4127>=N)u=v,v=N&255,8<=v&&15>=v?u.skip(1):16<=v&&23>=v?u.skip(2):24<=v&&31>=v&&u.skip(3);else if(4224<=N&&4255>=N)u=v,v=N&255,128<=v&&135>=v?u.skip(4):136<=v&&143>=v&&u.skip(5);else if(32<=N&&127>=N)v=N,u.g&&(v===127?kc(u.g,""):kc(u.g,String.fromCharCode(v)));else if(160<=N&&255>=N)u.g&&kc(u.g,String.fromCharCode(N));else if(4128<=N&&4223>=N){if(v=N&255,u.g)if(kN.has(v)){var Le=kN.get(v);kc(u.g,Le)}else kc(u.g,"_")}else 4256<=N&&4351>=N&&u.g&&((N&255)!=160?kc(u.g,"_"):kc(u.g,"[CC]"));Ee=null}(u=Ee)&&n.push(u)}}}}catch(Fe){if(Fe instanceof Xe&&Fe.code===3e3)wt("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Fe}return n}function FN(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}vd.prototype.getStreams=function(){return Array.from(this.A)},ne("shaka.cea.CeaDecoder",vd),Ot=function(){return new vd};function UN(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(T(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var u=0;e[r]==255;)u+=255,r++;u+=e[r++],n==4&&t.push(e.subarray(r,r+u)),r+=u}return t}function Gv(){this.j=new Map,this.i=this.h=0,this.g=a_}Gv.prototype.init=function(e){function t(c){c=c.name,c in Hv&&(n.g=Hv[c])}var n=this,r=[],u=[];if(new V().box("moov",W).box("mvex",W).R("trex",function(c){var f=c.reader;f.skip(4),f.skip(4),c=f.P(),f=f.P(),n.h=c,n.i=f}).box("trak",W).R("tkhd",function(c){var f=c.reader;c=c.version,c==1?(f.skip(8),f.skip(8)):(f.skip(4),f.skip(4));var h=f.P();c==1?f.skip(8):f.skip(4),f.skip(4),f.skip(8),f.skip(2),f.skip(2),f.skip(2),f.skip(2),f.skip(36),f.la(),f.la(),f.la(),f.la(),r.push(h)}).box("mdia",W).R("mdhd",function(c){c=$a(c.reader,c.version),u.push(c.timescale)}).box("minf",W).box("stbl",W).R("stsd",ee).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",H).box("sinf",W).box("frma",function(c){c=Zl(c.reader).codec,c in Hv&&(n.g=Hv[c])}).parse(e,!0),!r.length||!u.length||r.length!=u.length)throw new Xe(2,2,2010);this.g==a_&&Ke("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(c,f){n.j.set(c,u[f])})},Gv.prototype.parse=function(e){var t=this;if(this.g==a_)return[];var n=[],r=0,u=[];return new V().box("moof",function(c){r=c.start,u=[],W(c)}).box("traf",function(c){u.push({baseMediaDecodeTime:null,Zc:t.h,Fd:t.i,Mg:[],timescale:9e4}),W(c)}).R("trun",function(c){var f=u[u.length-1];c=Cu(c.reader,c.version,c.flags),f.Mg.push(c)}).R("tfhd",function(c){var f=u[u.length-1];c=Cs(c.reader,c.flags),f.Zc=c.Zc||t.h,f.Fd=c.Fd||t.i,c=c.trackId,t.j.has(c)&&(f.timescale=t.j.get(c))}).R("tfdt",function(c){var f=u[u.length-1];c=To(c.reader,c.version),f.baseMediaDecodeTime=c.baseMediaDecodeTime}).box("mdat",function(c){for(var f=r-c.start-8,h=c.reader.xa(),v=m(u),A=v.next();!A.done;A=v.next()){if(A=A.value,A.baseMediaDecodeTime===null)throw Ke("Unable to find base media decode time for CEA captions!"),new Xe(2,2,2010);c.reader.seek(h),r6(t,c.reader,A.baseMediaDecodeTime,A.timescale,A.Zc,A.Fd,f,A.Mg,n)}}).parse(e,!1),n};function r6(e,t,n,r,u,c,f,h,v){var A=0,N=c,B=h.map(function(fe){return fe.Tg});for(B=[].concat.apply([],T(B)),B.length&&(N=B[0].sampleSize||c),t.skip(f+h[0].Dh);t.ra();){f=t.P();var z=t.S(),J=null;switch(J=!1,h=1,e.g){case bp:J=z&31,J=J==6;break;case Cp:h=2,t.skip(1),J=z>>1&63,J=J==39||J==40;break;case Rp:h=2,t.skip(1),J=z>>1&63,J=J==23||J==24;break;default:return}if(J)for(z=0,A<B.length&&(z=B[A].ke||0),z=(n+z)/r,h=m(UN(t.rb(f-h))),J=h.next();!J.done;J=h.next())v.push({packet:J.value,pts:z});else try{t.skip(f-h)}catch(fe){break}N-=f+4,N==0&&(n=A<B.length?n+(B[A].Kf||u):n+u,A++,A<B.length?N=B[A].sampleSize||c:N=c)}}ne("shaka.cea.Mp4CeaParser",Gv);var a_=0,bp=1,Cp=2,Rp=3,Hv={avc1:bp,avc3:bp,dvav:bp,dva1:bp,hev1:Cp,hvc1:Cp,dvh1:Cp,dvhe:Cp,vvc1:Rp,vvi1:Rp,dvc1:Rp,dvi1:Rp};Xt["video/mp4"]=function(){return new Gv};function Vv(){this.g=null}Vv.prototype.init=function(){},Vv.prototype.parse=function(e){this.g?this.g.clearData():this.g=new kr;var t=[];if(e=nr(e),!op(e))return t;e=this.g.parse(e);var n=e.$c(),r=e.Md();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var u=m(UN(r.data)),c=u.next();!c.done;c=u.next())t.push({packet:c.value,pts:r.time});return t},ne("shaka.cea.TsCeaParser",Vv),Xt["video/mp2t"]=function(){return new Vv};function BN(e,t,n){var r=u6(e),u=null;e=[];var c=[],f=null,h=new Set(r.map(function(A){return A.keyId}));h.delete(null);var v="cenc";if(1<h.size)throw new Xe(2,4,4010);if(!t){if(c=r.filter(function(A){return A.Qc=="urn:mpeg:dash:sea:2012"}),1<c.length)throw new Xe(2,4,4050);c.length&&(f=c6(c[0])),(c=r.find(function(A){return A.Qc=="urn:mpeg:dash:mp4protection:2011"}))&&c.encryptionScheme&&(v=c.encryptionScheme),c=r.filter(function(A){return A.Qc=="urn:mpeg:dash:mp4protection:2011"?(u=A.init||u,!1):A.Qc!="urn:mpeg:dash:sea:2012"}),c.length&&(e=s6(u,v,c,n,h),e.length==0&&(e=[ws("",v,u)]))}if(r.length&&!f&&(t||!c.length))for(e=[],t=m(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(ws(n,v,u));if(h=Array.from(h)[0]||null)for(v=m(e),t=v.next();!t.done;t=v.next())for(t=m(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=h;return{mg:h,ek:u,drmInfos:e,Fe:f,rg:!0}}function i6(e,t,n,r){var u=BN(e,n,r);if(t.rg)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=u.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=u.drmInfos),t.rg=!1;else if(0<u.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(c){return u.drmInfos.some(function(f){return f.keySystem==c.keySystem})}),t.drmInfos.length==0))throw new Xe(2,4,4008);return u.mg||t.mg}function o6(e){var t=0,n=ln(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=nr(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function a6(e){e=m(Eo(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=m(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return ei(n)}return""}function Kv(e){var t=Vi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ei(t))?t:(e=Vi(e.node,"urn:microsoft:playready","pro"),!e||!ei(e)||(e=ei(e),e=Wo(e),e=o6(e).filter(function(n){return n.type===f6})[0],!e)?"":(e=ci(e.value,!0),(e=Tu(e,"WRMHEADER"))?a6(e):""))}function s6(e,t,n,r,u){var c=[];n=m(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var h=r[f.Qc];if(h){var v;if((v=Vi(f.node,"urn:microsoft:playready","pro"))&&ei(v)){v=ei(v),v=Wo(v);var A=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);v=[{initData:Oe(v,A,new Set,0),initDataType:"cenc",keyId:f.keyId}]}else v=null;if(A=null,f.Qc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){A=f;var N=u;if(N.size==0)A=null;else{var B=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),z=new Uint8Array([]);A=[{initData:Oe(z,B,N,1),initDataType:"cenc",keyId:A.keyId}]}}v=ws(h,t,f.init||e||v||A),(h=d6.get(h))&&(v.licenseServerUri=h(f)),c.push(v)}}return c}function u6(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=l6(n.value))&&t.push(n);return t}function l6(e){var t=e.attributes.schemeIdUri,n=Po(e,"urn:mpeg:cenc:2013","default_KID"),r=yc(e,"urn:mpeg:cenc:2013","pssh").map(Io),u=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new Xe(2,4,4009);var c=[];try{c=r.map(function(f){return{initDataType:"cenc",initData:Wo(f),keyId:null}})}catch(f){throw new Xe(2,4,4007)}return{node:e,Qc:t,keyId:n,init:0<c.length?c:null,encryptionScheme:u}}function c6(e){if(!g.crypto||!g.crypto.subtle)throw Ke("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Xe(2,4,4042);var t=Vi(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new Xe(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new Xe(2,4,4051);if(t=Vi(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new Xe(2,4,4051);if(e=t.attributes.IV,t=yi(t.attributes.keyUriTemplate),!e||!t)throw new Xe(2,4,4051);if(e=$u(e.substr(2)),e.byteLength!=16)throw new Xe(2,4,4048);return{pi:t,iv:e}}var f6=1,d6=new Map().set("com.widevine.alpha",function(e){var t=Vi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ei(t))?t:(e=Vi(e.node,"urn:microsoft","laurl"))&&yi(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Kv).set("com.microsoft.playready.recommendation",Kv).set("com.microsoft.playready.software",Kv).set("com.microsoft.playready.hardware",Kv).set("org.w3.clearkey",function(e){var t=Vi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ei(t))?t:(e=Vi(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=ei(e))?e:""});function xp(e,t,n,r,u,c){var f={RepresentationID:t,Number:n,SubNumber:r,Bandwidth:u,Time:c};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(h,v,A,N){if(h=="$$")return"$";var B=f[v];if(B==null)return h;switch(v=="RepresentationID"&&A&&(A=void 0),v=="Time"&&typeof B!="bigint"&&(.2<=Math.abs(B-Math.round(B))&&Ke("Calculated $Time$ values must be close to integers"),B=Math.round(B)),N){case void 0:case"d":case"i":case"u":h=B.toString();break;case"o":h=B.toString(8);break;case"x":h=B.toString(16);break;case"X":h=B.toString(16).toUpperCase();break;default:h=B.toString()}return A=g.parseInt(A,10)||1,Array(Math.max(0,A-h.length)+1).join("0")+h})}function jN(e,t){var n=xs(e,t,"timescale"),r=1;n&&(r=Gs(n)||1),n=xs(e,t,"duration"),(n=Gs(n||""))&&(n/=r);var u=xs(e,t,"startNumber"),c=Number(xs(e,t,"presentationTimeOffset"))||0,f=lo(u||"");if((u==null||f==null)&&(f=1),u=null,t=yd(e,t,"SegmentTimeline")){t=sr(t,"S"),u=r,e=e.ha.duration||1/0;for(var h=f,v=[],A=-c,N=0;N<t.length;++N){var B=t[N],z=t[N+1],J=Er(B,"t",lo),fe=Er(B,"d",lo),pe=Er(B,"r",Ec);if(B=Er(B,"k",Ec)||0,J!=null&&(J-=c),fe){if(J=J!=null?J:A,pe=pe||0,0>pe)if(z){if(z=Er(z,"t",lo),z==null)break;if(J>=z)break;pe=Math.ceil((z-J)/fe)-1}else{if(e==1/0)break;if(J/u>=e)break;pe=Math.ceil((e*u-J)/fe)-1}for(0<v.length&&J!=A&&(v[v.length-1].end=J/u),z=0;z<=pe;++z)A=J+fe,v.push({start:J/u,end:A/u,Zf:J,Ab:B,Qi:v.length+h}),J=A}}u=v}return{timescale:r,Ma:n,td:f,Ob:c/r||0,Yf:c,timeline:u}}function ZN(e,t){return[t(e.J),t(e.ia),t(e.na)].filter(Ys)}function xs(e,t,n){t=ZN(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function yd(e,t,n){t=ZN(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=Hi(r.value,n));r=t.next());return e}function h6(e,t,n,r,u,c){for(var f=Po(e,"http://www.w3.org/1999/xlink","href"),h=Po(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",v=m(Object.keys(e.attributes)),A=v.next();!A.done;A=v.next()){A=A.value;var N=A.split(":"),B=Hu("http://www.w3.org/1999/xlink");N[0]==B&&delete e.attributes[A]}if(5<=c)return Ws(new Xe(2,4,4028));if(h!="onLoad")return Ws(new Xe(2,4,4027));var z=Ki([r],[f]);return u.request(0,Bi(z,t)).Aa(function(J){if(J=_u(J.data,e.tagName),!J)return Ws(new Xe(2,4,4001,f));for(e.children=[];J.children.length;){var fe=J.children.shift();e.children.push(fe)}fe=m(Object.keys(J.attributes));for(var pe=fe.next();!pe.done;pe=fe.next())pe=pe.value,e.attributes[pe]=J.attributes[pe];return zv(e,t,n,z[0],u,c+1)})}function zv(e,t,n,r,u,c){if(c=c===void 0?0:c,Po(e,"http://www.w3.org/1999/xlink","href")){var f=h6(e,t,n,r,u,c);return n&&(f=f.Aa(void 0,function(){return zv(e,t,n,r,u,c)})),f}f=[];for(var h=m(vf(e)),v=h.next(),A={};!v.done;A={Vc:void 0},v=h.next())A.Vc=v.value,Po(A.Vc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(N){return function(B){return B!==N.Vc}}(A)):A.Vc.tagName!="SegmentTimeline"&&f.push(zv(A.Vc,t,n,r,u,c));return Hm(f).Aa(function(){return e})}function p6(e,t,n,r,u,c,f){var h,v=new V().R("sidx",function(A){h=g6(t,r,u,c,f,n,A)});if(e&&v.parse(e),h)return h;throw new Xe(2,3,3004)}function g6(e,t,n,r,u,c,f){var h=[];f.reader.skip(4);var v=f.reader.P();if(v==0)throw new Xe(2,3,3005);if(f.version==0)var A=f.reader.P(),N=f.reader.P();else A=f.reader.Pc(),N=f.reader.Pc();f.reader.skip(2);var B=f.reader.la();for(e=e+f.size+N,N=0;N<B;N++){var z=f.reader.P(),J=(z&2147483648)>>>31;z&=2147483647;var fe=f.reader.P();if(f.reader.skip(4),J==1)throw new Xe(2,3,3006);h.push(new et(A/v+n,(A+fe)/v+n,function(){return c},e,e+z-1,t,n,r,u)),A+=fe,e+=z}return f.parser.stop(),h}function Gl(e){this.h=ln(e),this.g=new k(this.h,0)}Gl.prototype.ra=function(){return this.g.ra()};function dl(e){var t=qN(e);if(7<t.length)throw new Xe(2,3,3002);var n=0;t=m(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=qN(e);e:{r=m(m6);for(var u=r.next();!u.done;u=r.next())if(no(t,new Uint8Array(u.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.xa();else{if(t.length==8&&t[1]&224)throw new Xe(2,3,3001);for(u=r=0;u<t.length;u++){var c=t[u];r=u==0?c&(1<<8-t.length)-1:256*r+c}t=r}return t=e.g.xa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.xa(),r=ln(e.h,e.g.xa(),t),e.g.skip(t),new v6(n,r)}function qN(e){var t=e.g.xa(),n=e.g.S();if(n==0)throw new Xe(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),nr(e.h,t,n)}var m6=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function v6(e,t){this.id=e,this.g=t}function s_(e){if(8<e.g.byteLength)throw new Xe(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new Xe(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function y6(e,t,n,r,u,c,f,h,v){function A(){return u}var N=[];e=new Gl(e.g);for(var B=null,z=null;e.ra();){var J=dl(e);if(J.id==187){var fe=E6(J);fe&&(J=n*fe.bj,fe=t+fe.Gi,B!=null&&N.push(new et(B+f,J+f,A,z,fe-1,c,f,h,v)),B=J,z=fe)}}return B!=null&&N.push(new et(B+f,r+f,A,z,null,c,f,h,v)),N}function E6(e){var t=new Gl(e.g);if(e=dl(t),e.id!=179)throw new Xe(2,3,3013);if(e=s_(e),t=dl(t),t.id!=183)throw new Xe(2,3,3012);t=new Gl(t.g);for(var n=0;t.ra();){var r=dl(t);if(r.id==241){n=s_(r);break}}return{bj:e,Gi:n}}function GN(e,t,n){if(t=yd(e,t,"Initialization"),!t)return null;var r=e.J.Ja(),u=t.attributes.sourceURL;u&&(r=Ki(r,[yi(u)],e.lb())),u=0;var c=null;return(t=Er(t,"range",yf))&&(u=t.start,c=t.end),n=new Dn(function(){return r},u,c,zN(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function _6(e,t,n){var r=Number(xs(e,Ed,"presentationTimeOffset"))||0,u=xs(e,Ed,"timescale"),c=1;u&&(c=Gs(u)||1);var f=r/c||0,h=GN(e,Ed,n);T6(e,h);var v=Es(e);return{kc:function(){var A=yd(v,Ed,"RepresentationIndex"),N=v.J.Ja();return A&&(A=yi(A.attributes.sourceURL))&&(N=Ki(N,[A],v.lb())),A=VN(v),HN(v,t,h,N,A.start,A.end,f)}}}function HN(e,t,n,r,u,c,f){var h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt;return Re(function(kt){if(kt.g==1)return h=e.presentationTimeline,v=!e.wb||!e.ha.qf,A=e.ha.start,N=e.ha.duration,B=e.J.mimeType.split("/")[1],z=t,J=null,fe=[z(r,u,c,!1),B=="webm"?z(n.M(),n.Ha,n.va,!0):null],z=null,R(kt,Promise.all(fe),2);if(pe=kt.h,Ee=pe[0],Le=pe[1]||null,Fe=null,it=A-f,Ue=A,Qe=N?A+N:1/0,B=="mp4")var It=p6(Ee,u,r,n,it,Ue,Qe);else{It=Ee;var Ut=new Gl(Le);if(dl(Ut).id!=440786851)throw new Xe(2,3,3008);var Nt=dl(Ut);if(Nt.id!=408125543)throw new Xe(2,3,3009);Ut=Nt.g.byteOffset,Nt=new Gl(Nt.g);for(var nn=null;Nt.ra();){var Kt=dl(Nt);if(Kt.id==357149030){nn=Kt;break}}if(!nn)throw new Xe(2,3,3010);for(nn=new Gl(nn.g),Kt=1e6,Nt=null;nn.ra();){var $t=dl(nn);if($t.id==2807729)Kt=s_($t);else if($t.id==17545)if($t.g.byteLength==4)Nt=$t.g.getFloat32(0);else if($t.g.byteLength==8)Nt=$t.g.getFloat64(0);else throw new Xe(2,3,3003)}if(Nt==null)throw new Xe(2,3,3011);if(nn=Kt/1e9,Nt*=nn,It=dl(new Gl(It)),It.id!=475249515)throw new Xe(2,3,3007);It=y6(It,Ut,nn,Nt,r,n,it,Ue,Qe)}for(Fe=It,rt=m(Fe),dt=rt.next();!dt.done;dt=rt.next())gt=dt.value,gt.codecs=e.J.codecs,gt.mimeType=e.J.mimeType,gt.bandwidth=e.bandwidth;return h.qd(Fe),J=new Mr(Fe),v&&J.Ec(Ue,Qe,!0),kt.return(J)})}function Ed(e){return e.Sc}function VN(e){var t=yd(e,Ed,"RepresentationIndex");return e=xs(e,Ed,"indexRange"),e=yf(e||""),t&&(e=Er(t,"range",yf,e)),e}function T6(e,t){if(KN(e,t),!VN(e))throw new Xe(2,4,4002)}function KN(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=_r&&n!="mp4"&&n!="webm")throw new Xe(2,4,4006);if(n=="webm"&&!t)throw new Xe(2,4,4005)}function zN(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.$d,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ia.label||null,roles:e.roles||null,language:e.ia.language||null}}function S6(e,t,n){var r=GN(e,YN,n),u=w6(e);if(!u.Ma&&!u.timeline&&1<u.Lc.length)throw new Xe(2,4,4002);if(!u.Ma&&!e.ha.duration&&!u.timeline&&u.Lc.length==1)throw new Xe(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new Xe(2,4,4002);var c=null,f=null;e.na.id&&e.J.id&&(f=t[e.na.id+","+e.J.id])&&(c=f.segmentIndex);var h=A6(e.ha.start,e.ha.duration,e.J.Ja,u,r,n,e.J.mimeType,e.J.codecs,e.bandwidth,e.lb);return t=!c,c?c.od(h,e.presentationTimeline.nb()):c=new Mr(h),e.presentationTimeline.qd(h),e.wb&&e.ha.qf||c.Ec(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),f&&(f.segmentIndex=c),{kc:function(){return c&&c.getNumReferences()!=0||c.Wd(h),Promise.resolve(c)}}}function YN(e){return e.Qb}function w6(e){var t=I6(e);e=jN(e,YN);var n=e.td;n==0&&(n=1);var r=0;return e.Ma?r=e.Ma*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{Ma:e.Ma,startTime:r,td:n,Ob:e.Ob,timeline:e.timeline,Lc:t}}function A6(e,t,n,r,u,c,f,h,v,A){var N=r.Lc.length;r.timeline&&r.timeline.length!=r.Lc.length&&(N=Math.min(r.timeline.length,r.Lc.length));for(var B=e-r.Ob,z=t?e+t:1/0,J=[],fe=r.startTime,pe={},Ee=0;Ee<N;pe={se:void 0,le:void 0},Ee++){pe.le=r.Lc[Ee];var Le=fe;fe=void 0,fe=r.Ma!=null?Le+r.Ma:r.timeline?r.timeline[Ee].end:Le+t,pe.se=null,pe=new et(e+Le,e+fe,function(Fe){return function(){return Fe.se==null&&(Fe.se=Ki(n(),[Fe.le.wi],A())),Fe.se}}(pe),pe.le.start,pe.le.end,u,B,e,z,[],"",null,null,Ve,c),pe.codecs=h,pe.mimeType=f,pe.bandwidth=v,J.push(pe)}return J}function I6(e){return[e.J.Qb,e.ia.Qb,e.na.Qb].filter(Ys).map(function(t){return sr(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.lf&&(e.lf=!0);var n=yi(t.attributes.media);return t=Er(t,"mediaRange",yf,{start:0,end:null}),{wi:n,start:t.start,end:t.end}})}function WN(e,t,n,r,u,c,f,h,v){v||e.J.Pd||(e.J.Pd=xs(e,Hl,"initialization"));var A=e.J.Pd?x6(e,f):null,N=b6(e);C6(N);var B=Es(e);if(N.gd)return KN(e,A),{kc:function(){var Ee=xp(N.gd,B.J.id,null,null,B.bandwidth||null,null);return Ee=Ki(B.J.Ja(),[Ee]),HN(B,t,A,Ee,0,null,N.Ob)}};if(N.Ma)return r||e.ia.contentType==="image"||(n=e.ha.start,r=e.na.id,v=e.ha.duration,r=(r=r!=null&&c[r]||v)?n+r:1/0,e.presentationTimeline.yf(N.Ma),e.presentationTimeline.Kg(n,r)),{kc:function(){return R6(B,N,u,A,c,f,h,e.J.me)}};var z=null;r=r=null,e.na.id&&e.J.id&&(r=e.na.id+","+e.J.id,r=n[r])&&(z=r.segmentIndex);var J=e.ha.start,fe=e.ha.duration?J+e.ha.duration:1/0,pe=!(e.wb&&e.ha.qf);return z?(n=z,$N(n,N,J,fe,pe,A),n.Ga(e.presentationTimeline.nb())):z=new Yv(N,e.J.id,e.bandwidth,e.J.Ja,e.lb,J,fe,A,pe,f,e.J.me),N.timeline&&e.ia.contentType!=="image"&&e.presentationTimeline.Lg(N.timeline,J),r&&e.wb&&(r.segmentIndex=z),{kc:function(){return z instanceof Yv&&z.getNumReferences()==0&&$N(z,N,J,fe,pe,A),Promise.resolve(z)}}}function Hl(e){return e.cc}function b6(e){var t=jN(e,Hl),n=xs(e,Hl,"media"),r=xs(e,Hl,"index"),u=xs(e,Hl,"k"),c=0;return u&&(c=parseInt(u,10)),{Ma:t.Ma,timescale:t.timescale,td:t.td,Ob:t.Ob,Yf:t.Yf,timeline:t.timeline,ac:n&&yi(n),gd:r,mimeType:e.J.mimeType,codecs:e.J.codecs,bandwidth:e.bandwidth,xi:c}}function C6(e){var t=e.gd?1:0;if(t+=e.timeline?1:0,t+=e.Ma?1:0,t==0)throw new Xe(2,4,4002);if(t!=1&&(e.gd&&(e.timeline=null),e.Ma=null),!e.gd&&!e.ac)throw new Xe(2,4,4002)}function R6(e,t,n,r,u,c,f,h){function v(nn){var Kt=(nn-Ee)*pe,$t=Kt+t.Ob,En=Kt+z;Kt=En+pe;var An=Math.min(Kt,N()),Vn=[],Qn=t.xi;if(Qn)for(var ar=(An-En)/Qn,Ar={},Qr=0;Qr<Qn;Ar={hh:void 0},Qr++){var Yr=En+ar*Qr,Si=Yr+ar;Ar.hh=Qr+1,Ar=new et(Yr,Si,function(Pr){return function(){var Fr=$t*Le;return"BigInt"in g&&Fr>Number.MAX_SAFE_INTEGER&&(Fr=BigInt($t)*BigInt(Le)),Fr=xp(Fe,Ue,nn,Pr.hh,it,Fr),Ki(Qe(),[Fr],rt())}}(Ar),0,null,r,dt,z,N(),[],"",null,null,Ve,c),Ar.codecs=e.J.codecs,Ar.mimeType=e.J.mimeType,h==0?0<Qr&&Ar.Jc():Qr%h!=0&&Ar.Jc(),Vn.push(Ar)}return En=new et(En,An,function(){if(Qn)return[];var Pr=$t*Le;return"BigInt"in g&&Pr>Number.MAX_SAFE_INTEGER&&(Pr=BigInt($t)*BigInt(Le)),Pr=xp(Fe,Ue,nn,null,it,Pr),Ki(Qe(),[Pr],rt())},0,null,r,dt,z,N(),Vn,"",null,null,Ve,c,0<Vn.length),En.codecs=e.J.codecs,En.mimeType=e.J.mimeType,En.bandwidth=e.bandwidth,En.j=Kt,En}function A(){var nn=[Math.max(B.nb(),z),Math.min(B.Xb(),N())].map(function(Kt){return Kt-z});return nn=[Math.ceil(nn[0]/pe),Math.ceil(nn[1]/pe)-1],e.J.Sa&&nn[1]++,nn.map(function(Kt){return Kt+Ee})}function N(){var nn=J!=null&&u[J]||fe;return nn?z+nn:1/0}var B=e.presentationTimeline,z=e.ha.start,J=e.na.id,fe=e.ha.duration,pe=t.Ma,Ee=t.td,Le=t.timescale,Fe=t.ac,it=e.bandwidth||null,Ue=e.J.id,Qe=e.J.Ja,rt=e.lb,dt=z-t.Ob,gt=A();n=e.wb?Math.max(gt[0],gt[1]-n+1):gt[0],f=f||gt[1],gt=[];for(var kt=n;kt<=f;++kt){var It=v(kt);gt.push(It)}var Ut=new Mr(gt);if(gt=B.Xb()<N(),kt=B.U(),gt||kt){var Nt=Math.max(n,f+1);n=pe,e.J.Sa&&(n=.1),Ut.re(n,function(){var nn=B.nb();Ut.Ga(nn);var Kt=m(A());Kt.next(),Kt=Kt.next().value;for(var $t=[];Nt<=Kt;){var En=v(Nt);$t.push(En),Nt++}return nn>N()&&!$t.length?null:$t})}return Promise.resolve(Ut)}function x6(e,t){var n=e.J.Pd;if(n||(n=xs(e,Hl,"initialization")),!n)return null;n=yi(n);var r=e.J.id,u=e.bandwidth||null,c=e.J.Ja,f=e.lb;return t=new Dn(function(){var h=xp(n,r,null,null,u,null);return Ki(c(),[h],f())},0,null,zN(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function Yv(e,t,n,r,u,c,f,h,v,A,N){Mr.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=r,this.H=u,this.j=c,this.l=f,this.s=h,this.A=A,this.G=N,v&&XN(this)}Y(Yv,Mr),p=Yv.prototype,p.getNumReferences=function(){return this.h?this.h.timeline.length:0},p.release=function(){Mr.prototype.release.call(this),this.h=null},p.Ga=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.j<=e;r+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function $N(e,t,n,r,u,c){if(N6(e,c),e.h){if(n=e.h.timeline,e.h.ac!==t.ac&&(e.h.ac=t.ac),n.length){var f=n[n.length-1];t=t.timeline.filter(function(h){return h.start>=f.end})}else t=t.timeline.slice();0<t.length&&e.h.timeline.push.apply(e.h.timeline,T(t)),e.l!==r&&(e.l=r)}else e.h=t,e.j=n,e.l=r;u&&XN(e)}function N6(e,t){if(e.s!==t){e.s=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&zt(n,t)}}function XN(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.Ga(e.j)}}p.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var u=t[r],c=u.start+this.j;if(u=r<n?t[r+1].start+this.j:this.l===1/0?u.end+this.j:this.l,e>=c&&e<u)return r+this.i}return null},p.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=this.h.timeline[e],u=r.Qi,c=this.h.Yf+r.Zf;n=this.j-this.h.Ob;var f=this.j+r.end,h=f;e===this.getNumReferences()-1&&this.l!==1/0&&(h=this.l);for(var v=this.h.codecs,A=this.h.mimeType,N=this.h.bandwidth,B=[],z=(r.end-r.start)/r.Ab,J={},fe=0;fe<r.Ab;J={te:void 0,ih:void 0},fe++){var pe=r.start+z*fe,Ee=pe+z;J.ih=fe+1,J.te=null,J=new et(this.j+pe,this.j+Ee,function(Le){return function(){return t.h?(Le.te==null&&(Le.te=QN(t.h.ac,t.F,u,t.B,c,Le.ih,t.C,t.H)),Le.te):[]}}(J),0,null,this.s,n,this.j,this.l,[],"",null,null,Ve,this.A),J.codecs=v,J.mimeType=A,J.bandwidth=N,this.G==0?0<fe&&J.Jc():fe%this.G!=0&&J.Jc(),B.push(J)}n=new et(this.j+r.start,h,function(){return 0<r.Ab||!t.h?[]:QN(t.h.ac,t.F,u,t.B,c,null,t.C,t.H)},0,null,this.s,n,this.j,this.l,B,"",null,null,Ve,this.A,0<r.Ab),n.codecs=v,n.mimeType=A,n.j=f,n.bandwidth=N,this.g[e]=n}return n};function QN(e,t,n,r,u,c,f,h){return e=xp(e,t,n,c,r||null,u),Ki(f(),[e],h()).map(function(v){return v.toString()})}function _d(e){this.o=null,this.A=e,this.G=new rl,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}_d.prototype.configure=function(e){this.o=e},_d.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},_d.prototype.setManifestType=function(e){this.s=e};function Np(e,t){var n,r,u,c,f,h,v;return Re(function(A){if(A.g==1)return n=Ki(e.i,[M6(e,t)]),r=Bi(n,e.o.retryParameters),u=e.A.networkingEngine.request(8,r),il(e.G,u),ce(A,2),R(A,u.promise,4);if(A.g!=2)return c=A.h,f=Cr(c.data),h=JSON.parse(f),h.VERSION==1&&D6(e,h,c.uri),me(A,0);if((v=Ce(A))&&v.code==7001)return A.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new on(function(){Np(e,t)}),e.g.Z(e.C),X(A)})}function M6(e,t){if(!e.m.length)return t;t=new Ei(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),u=t.g;return e.s=="DASH"?(u.add("_DASH_pathway",n),u.add("_DASH_throughput",String(r))):e.s=="HLS"&&(u.add("_HLS_pathway",n),u.add("_HLS_throughput",String(r))),Lf(u)&&$r(t,u),t.toString()}function D6(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new on(function(){Np(e,r)}),(n=t.TTL)&&(e.C=n),e.g.Z(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function Td(e,t,n,r){var u=e.l.get(t);u||(u=new Map),u.set(n,r),e.l.set(t,u)}_d.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Mp(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],u=m(e.m),c=u.next(),f={};!c.done;f={Nc:void 0},c=u.next())if(f.Nc=c.value,c=t.get(f.Nc))r.push({Ef:f.Nc,location:c});else if(c=e.F.find(function(v){return function(A){return A.uj==v.Nc}}(f))){var h=t.get(c["BASE-ID"]);h&&(c["URI-REPLACEMENT"].ph?(h=new Ei(h),Au(h,c["URI-REPLACEMENT"].ph),r.push({Ef:f.Nc,location:h.toString()})):r.push({Ef:f.Nc,location:h}))}for(u=Date.now(),f=m(e.j.keys()),c=f.next();!c.done;c=f.next())c=c.value,h=e.j.get(c),u>h&&e.j.delete(c);if(r=r.filter(function(v){for(var A=m(e.j.keys()),N=A.next();!N.done;N=A.next())if(N.value.includes(new Ei(v.location).Db))return!1;return!0}),r.length&&(e.B=r[0].Ef),r=r.map(function(v){return v.location}),!r.length&&e.h)for(u=m(e.h.split(",")),f=u.next();!f.done;f=u.next())(f=t.get(f.value))&&(e.B=e.h,r.push(f));if(!r.length)for(t=m(t.values()),u=t.next();!u.done;u=t.next())r.push(u.value);return n?r:Ki(e.i,r)}function Fo(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.s=this.o=!1,this.m=new Set}p=Fo.prototype,p.release=function(){for(var e=m(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[]},p.ci=function(){return this.l},p.jf=function(){return this.j.slice()},p.Lh=function(){return this.i},p.ng=function(e,t){if(e){if(e.type=="audio")for(var n=m(this.h),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(u){return u!==e});else if(e.type=="video")for(n=m(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(u){return u!==e}),r.trickModeVideo&&(r.trickModeVideo.matchedStreams=r.trickModeVideo.matchedStreams.filter(function(u){return u!==e}));else if(e.type==_r)for(n=m(this.j),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(u){return u!==e});else if(e.type=="image")for(n=m(this.i),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(u){return u!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}};function JN(e,t){var n=[],r=[],u=[],c=[];e=m(e);for(var f=e.next();!f.done;f=e.next()){var h=f.value;f=new Map(h.audioStreams.map(function(B){return[f_(B),B]}));var v=new Map(h.videoStreams.map(function(B){return[c_(B),B]})),A=new Map(h.textStreams.map(function(B){return[Lp(B),B]}));if(h=new Map(h.imageStreams.map(function(B){return[kp(B),B]})),t){var N=oM(_r);A.set(Lp(N),N),N=oM("image"),h.set(kp(N),N)}n.push(f),r.push(v),u.push(A),c.push(h)}return{gg:n,nh:r,jh:u,Bg:c}}p.Je=function(e,t,n){n=n===void 0?!1:n;var r=this,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An;return Re(function(Vn){if(Vn.g==1){if(u=Mi,!t&&e.length==1)return c=JN(e,!1),f=c.gg,h=c.nh,v=c.jh,A=c.Bg,r.h=Array.from(f[0].values()),r.g=Array.from(h[0].values()),r.j=Array.from(v[0].values()),r.i=Array.from(A[0].values()),Vn.u(2);for(N=n?r.m.size:0,B=-1,z=0;z<e.length;z++)J=e[z],r.m.has(J.id)||(r.m.add(J.id),B==-1&&(B=z));return B==-1?Vn.return():(fe=JN(e,!0),pe=fe.gg,Ee=fe.nh,Le=fe.jh,Fe=fe.Bg,R(Vn,Promise.all([Vl(r,r.h,pe,B,Dp,Sd,N),Vl(r,r.g,Ee,B,Dp,Sd,N),Vl(r,r.j,Le,B,Dp,Sd,N),Vl(r,r.i,Fe,B,Dp,Sd,N)]),2))}if(it=0,Ue=[],r.g.length&&r.h.length)for(It=m(r.h),Ut=It.next();!Ut.done;Ut=It.next())for(Nt=Ut.value,nn=m(r.g),Kt=nn.next();!Kt.done;Kt=nn.next())$t=Kt.value,En=Ir(Nt.drmInfos,$t.drmInfos),Nt.drmInfos.length&&$t.drmInfos.length&&!En.length||(An=it++,Ue.push({id:An,language:Nt.language,disabledUntilTime:0,primary:Nt.primary,audio:Nt,video:$t,bandwidth:(Nt.bandwidth||0)+($t.bandwidth||0),drmInfos:En,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(Qe=r.g.length?r.g:r.h,rt=m(Qe),dt=rt.next();!dt.done;dt=rt.next())gt=dt.value,kt=it++,Ue.push({id:kt,language:gt.language,disabledUntilTime:0,primary:gt.primary,audio:gt.type==u.Y?gt:null,video:gt.type==u.ja?gt:null,bandwidth:gt.bandwidth||0,drmInfos:gt.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});r.l=Ue,X(Vn)})};function eM(e){var t,n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt;return Re(function($t){switch($t.g){case 1:if(t=Mi,e.length==1)return $t.return(e[0]);for(n=e.map(function(En){return new Map(En.filter(function(An){return An.type===t.Y}).map(function(An){return[f_(An),An]}))}),r=e.map(function(En){return new Map(En.filter(function(An){return An.type===t.ja}).map(function(An){return[c_(An),An]}))}),u=e.map(function(En){return new Map(En.filter(function(An){return An.type===t.wa}).map(function(An){return[Lp(An),An]}))}),c=e.map(function(En){return new Map(En.filter(function(An){return An.type===t.De}).map(function(An){return[kp(An),An]}))}),f=m(u),h=f.next();!h.done;h=f.next())v=h.value,A=iM(t.wa),v.set(Lp(A),A);for(N=m(c),B=N.next();!B.done;B=N.next())z=B.value,J=iM(t.De),z.set(kp(J),J);return fe=new Fo,R($t,Vl(fe,[],n,0,Wv,$v,0),2);case 2:return pe=$t.h,R($t,Vl(fe,[],r,0,Wv,$v,0),3);case 3:return Ee=$t.h,R($t,Vl(fe,[],u,0,Wv,$v,0),4);case 4:return Le=$t.h,R($t,Vl(fe,[],c,0,Wv,$v,0),5);case 5:if(Fe=$t.h,it=0,Ee.length&&pe.length)for(gt=m(pe),kt=gt.next();!kt.done;kt=gt.next())for(It=kt.value,Ut=m(Ee),Nt=Ut.next();!Nt.done;Nt=Ut.next())nn=Nt.value,Kt=it++,nn.variantIds.push(Kt),It.variantIds.push(Kt);else for(Ue=Ee.concat(pe),Qe=m(Ue),rt=Qe.next();!rt.done;rt=Qe.next())dt=rt.value,dt.variantIds=[it++];return $t.return(Ee.concat(pe).concat(Le).concat(Fe))}})}function Vl(e,t,n,r,u,c,f){var h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt;return Re(function(It){switch(It.g){case 1:for(h=[],v=0;v<n.length;v++)v>=r?h.push(new Set(n[v].values())):h.push(new Set);A=m(t),N=A.next();case 2:if(N.done){It.u(4);break}return B=N.value,R(It,P6(e,B,n,r,c,h,f),5);case 5:if(z=It.h,!z)throw new Xe(2,4,4037);N=A.next(),It.u(2);break;case 4:for(J=m(h),fe=J.next();!fe.done;fe=J.next())for(pe=fe.value,Ee=m(pe),Le=Ee.next();!Le.done;Le=Ee.next())Fe=Le.value,(it=O6(e,Fe,n,u,c,h))&&t.push(it);for(Ue=m(h),Qe=Ue.next();!Qe.done;Qe=Ue.next())for(rt=Qe.value,dt=m(rt),gt=dt.next(),kt={};!gt.done;kt={Sf:void 0},gt=dt.next())if(kt.Sf=gt.value,!l_(kt.Sf)&&t.some(function(Ut){return function(Nt){return u_(e,Ut.Sf,Nt)}}(kt)))throw new Xe(2,4,4037);return It.return(t)}})}function P6(e,t,n,r,u,c,f){return Re(function(h){return h.g==1?(rM(e,n,t,0<f),t.matchedStreams?t.segmentIndex?R(h,tM(t,r+f),2):h.u(2):h.return(!1)):(nM(t,r,u,c,f),h.return(!0))})}function tM(e,t){var n,r,u,c,f,h;return Re(function(v){if(v.g==1){for(n=[],r=e.matchedStreams,u=t;u<r.length;u++)c=r[u],n.push(c.createSegmentIndex()),c.trickModeVideo&&!c.trickModeVideo.segmentIndex&&n.push(c.trickModeVideo.createSegmentIndex());return R(v,Promise.all(n),2)}if(e.segmentIndex instanceof Ti)for(f=t;f<r.length;f++)h=r[f],h.segmentIndex&&e.segmentIndex.h.push(h.segmentIndex);X(v)})}function O6(e,t,n,r,u,c){if(l_(t))return null;var f=r(t);return rM(e,n,f),f.createSegmentIndex&&(f.createSegmentIndex=function(){return Re(function(h){return f.segmentIndex?h.u(0):(f.segmentIndex=new Ti,R(h,tM(f,0),0))})}),!f.matchedStreams||!f.matchedStreams.length?null:(nM(f,0,u,c,0),f)}function nM(e,t,n,r,u){var c=e.matchedStreams;for(t+=u;t<c.length;t++){var f=c[t];n(e,f);var h=!0;if(e.type=="audio"&&el(e.language,f.language)==0&&(h=!1),h&&(r[t-u].delete(f),f.fullMimeTypes))for(f=m(f.fullMimeTypes.values()),h=f.next();!h.done;h=f.next())e.fullMimeTypes.add(h.value)}}function Dp(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=m(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t}function Wv(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set,t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function Sd(e,t){function n(f,h){f||(f=[]),h=m(h);for(var v=h.next();!v.done;v=h.next())v=v.value,f.includes(v)||f.push(v);return f}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=m(t.keyIds),u=r.next();!u.done;u=r.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=t.originalId:(r=t.originalId||"")&&!e.originalId.endsWith(r)&&(e.originalId+=","+r),r=Ir(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new Xe(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=m(t.closedCaptions),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.closedCaptions.set(u,c)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Dp(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var f=new Ti,h=m(e.trickModeVideo.matchedStreams),v=h.next();!v.done;v=h.next())f.h.push(v.value.segmentIndex);return e.trickModeVideo.segmentIndex=f,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),Sd(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),Sd(e.trickModeVideo,t))}function $v(e,t){var n=e.roles;n||(n=[]);for(var r=m(t.roles),u=r.next();!u.done;u=r.next())u=u.value,n.includes(u)||n.push(u);for(e.roles=n,n=m(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,T(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function rM(e,t,n,r){r=r!==void 0&&r?n.matchedStreams:[],t=m(t);for(var u=t.next();!u.done;u=t.next()){if(u=L6(e,u.value,n),!u)return;r.push(u)}n.matchedStreams=r}function L6(e,t,n){var r={audio:f_,video:c_,text:Lp,image:kp}[n.type],u=null,c=r(n);if(t.has(c))u=t.get(c);else{c={audio:function(A,N){return u_(e,A,N)},video:function(A,N){return u_(e,A,N)},text:k6,image:F6}[n.type];for(var f={audio:U6,video:B6,text:j6,image:Z6}[n.type],h=m(t.values()),v=h.next();!v.done;v=h.next())v=v.value,!c(n,v)||n.fastSwitching!=v.fastSwitching||u&&!f(n,u,v)||(u=v)}return e.s&&!l_(u)&&t.delete(r(u)),u}function Pp(e,t){return e.mimeType!=t.mimeType?!1:Xv(e.codecs)===Xv(t.codecs)}p.Wg=function(e){this.o=e},p.dh=function(e){this.s=e};function u_(e,t,n){return!(!Pp(t,n)&&!e.o||t.drmInfos&&!fr(t.drmInfos,n.drmInfos))}function k6(e,t){return t.language?!(e.forced!==t.forced||el(e.language,t.language)==0||t.kind!=e.kind):!0}function F6(){return!0}function U6(e,t,n){var r=Pp(e,t),u=Pp(e,n);if(r&&!u)return!1;if(!r&&u||(r=el(e.language,t.language),u=el(e.language,n.language),u>r))return!0;if(u<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length)return!0;if(u.length<r.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=Op(e.channelsCount,t.channelsCount,n.channelsCount),r==ru?!0:r==hl?!1:(r=Op(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==ru?!0:r==hl?!1:!!(e.bandwidth&&aM(e.bandwidth,t.bandwidth,n.bandwidth)==ru)))}function B6(e,t,n){var r=Pp(e,t),u=Pp(e,n);if(r&&!u)return!1;if(!r&&u||(r=Op(e.width*e.height,t.width*t.height,n.width*n.height),r==ru))return!0;if(r==hl)return!1;if(e.frameRate){if(r=Op(e.frameRate,t.frameRate,n.frameRate),r==ru)return!0;if(r==hl)return!1}return!!(e.bandwidth&&aM(e.bandwidth,t.bandwidth,n.bandwidth)==ru)}function j6(e,t,n){var r=el(e.language,t.language),u=el(e.language,n.language);if(u>r)return!0;if(u<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length)return!0;if(u.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function Z6(e,t,n){return Op(e.width*e.height,t.width*t.height,n.width*n.height)==ru}function iM(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function oM(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Mr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function Op(e,t,n){if(t==e&&e!=n)return hl;if(n==e&&e!=t)return ru;if(t>e){if(n<=e||n-e<t-e)return ru;if(n-e>t-e)return hl}else{if(n>e)return hl;if(e-n<e-t)return ru;if(e-n>e-t)return hl}return sM}function aM(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?ru:t<e?hl:sM}function l_(e){switch(e.type){case _r:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function c_(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,Xv(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function f_(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,Xv(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Lp(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function kp(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function Xv(e){if(!d_.has(e)){var t=_o(e);d_.set(e,t)}return d_.get(e)}ne("shaka.util.PeriodCombiner",Fo),Fo.prototype.setUseStreamOnce=Fo.prototype.dh,Fo.prototype.setAllowMultiTypeVariants=Fo.prototype.Wg,Fo.prototype.combinePeriods=Fo.prototype.Je,Fo.prototype.deleteStream=Fo.prototype.ng,Fo.prototype.getImageStreams=Fo.prototype.Lh,Fo.prototype.getTextStreams=Fo.prototype.jf,Fo.prototype.getVariants=Fo.prototype.ci;var ru=1,sM=0,hl=-1,d_=new Map;function q6(e,t){var n=new DOMParser,r=G6.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(u){return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function uM(e,t){try{var n=Br(e);return q6(n,t)}catch(r){return null}}var G6=new Un(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Qv(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.sa=1,this.F=[],this.l={Yd:"",type:"",profiles:[],Lb:null,Sa:0,Ja:null,rd:0},this.s=new Map,this.o={},this.B={},this.ka={},this.m=new Fo,this.K=0,this.oa=new D(5),this.L=new on(function(){if(e.I&&!e.g.continueLoadingWhenPaused&&(e.G.$a(e.I,"timeupdate"),e.I.paused)){e.G.pa(e.I,"timeupdate",function(){return pM(e)});return}pM(e)}),this.T=new rl,this.O=null,this.C=[],this.ba=1/0,this.H=!1,this.h=null,this.N=0,this.fa=!1,this.G=new Tt,this.I=null,this.ga=!1,this.aa="",this.ea=function(){return!1},this.X=[]}p=Qv.prototype,p.configure=function(e,t){var n=this.j&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&(this.ea=t),n&&this.i&&this.i.presentationTimeline.U()&&this.L.wc(),this.h&&this.h.configure(this.g),this.m&&(this.m.Wg(this.g.dash.multiTypeVariantsAllowed&&Gn()),this.m.dh(this.g.dash.useStreamOnceInPeriodFlattening))},p.start=function(e,t){var n=this,r;return Re(function(u){if(u.g==1)return n.H=t.isLowLatencyMode(),n.A=[e],n.j=t,R(u,h_(n),2);if(r=u.h,n.j&&p_(n,r),!n.j)throw new Xe(2,7,7001);return u.return(n.i)})},p.stop=function(){for(var e=m(Object.values(this.o)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.o={},this.B={},this.s.clear(),this.l={Yd:"",type:"",profiles:[],Lb:null,Sa:0,Ja:null,rd:0},this.m=null,this.L!=null&&(this.L.stop(),this.L=null),this.h&&this.h.destroy(),this.G&&(this.G.release(),this.G=null),this.T.destroy()},p.update=function(){var e=this,t;return Re(function(n){if(n.g==1)return ce(n,2),R(n,h_(e),4);if(n.g!=2)return me(n,0);if(t=Ce(n),!e.j||!t)return n.return();e.j.onError(t),X(n)})},p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.U()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.Xb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.K=t.endTime-e,p_(this,0))}}},p.banLocation=function(e){this.h&&this.h.banLocation(e)},p.setMediaElement=function(e){this.I=e};function h_(e){var t,n,r,u,c,f,h,v,A,N,B;return Re(function(z){return z.g==1?(t=4,n="MPD",r=aZ(e),u=e.A,r.length?(u=r,n="Patch",t=6):1<e.A.length&&e.h&&(c=Mp(e.h,"Location",!0),c.length&&(u=c)),f=Bi(u,e.g.retryParameters),h=Date.now(),R(z,m_(e,f,0,{type:t}),2)):z.g!=3?(v=z.h,e.j?(v.uri&&v.uri!=v.originalUri&&!e.A.includes(v.uri)&&e.A.unshift(v.uri),A=new Ei(v.uri),e.aa=A.g.toString(),R(z,H6(e,v.data,v.uri,n),3)):z.return(0)):(N=Date.now(),B=(N-h)/1e3,e.oa.sample(1,B),z.return(B))})}function H6(e,t,n,r){var u,c,f,h,v,A,N,B,z,J;return Re(function(fe){if(fe.g==1){if(u=t,c=e.g.dash.manifestPreprocessor,f=fv,c!=f){if(gr("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),h=uM(u,r),!h)throw new Xe(2,4,4001,n);c(h),u=bi(h.outerHTML)}if(v=_u(u,r),!v)throw new Xe(2,4,4001,n);return A=e.g.dash.manifestPreprocessorTXml,N=dv,A!=N&&A(v),r==="Patch"?fe.return(V6(e,v)):e.g.dash.disableXlinkProcessing?fe.return(lM(e,v,n)):(B=e.g.dash.xlinkFailGracefully,z=zv(v,e.g.retryParameters,B,n,e.j.networkingEngine),il(e.T,z),R(fe,z.promise,2))}return J=fe.h,fe.return(lM(e,J,n))})}function lM(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An,Vn,Qn,ar,Ar,Qr,Yr,Si,Pr,Fr,si,Ns,Wi,Fa,ss,$i,Ms,Nd,gl,Md,Dy,Xp;return Re(function(Ds){switch(Ds.g){case 1:for(e.h&&e.h.l.clear(),r=[n],u=[],c=new Map,f=sr(t,"Location"),h=m(f),v=h.next();!v.done;v=h.next())A=v.value,N=A.attributes.serviceLocation,(B=Io(A))&&(z=Ki(r,[B])[0],N&&(e.h?Td(e.h,"Location",N,z):c.set(N,z)),u.push(z));if(e.h?(J=Mp(e.h,"Location",!0),0<J.length&&(r=e.A=J)):u.length&&(r=e.A=u),e.l.Yd=t.attributes.id||"",e.l.rd=Er(t,"publishTime",_s)||0,e.F=sr(t,"PatchLocation"),fe=Promise.resolve(),(pe=Hi(t,"ContentSteering"))&&e.j)for(Ee=pe.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=Ee):(e.h=new _d(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=Ee,(Le=Io(pe))&&(Er(pe,"queryBeforeStart",Hs,!1)?fe=Np(e.h,Le):Np(e.h,Le))),Fe=m(c.keys()),it=Fe.next();!it.done;it=Fe.next())Ue=it.value,Qe=c.get(Ue),Td(e.h,"Location",Ue,Qe);if(rt=sr(t,"BaseURL"),dt=!1,e.h)for(gt=m(rt),kt=gt.next();!kt.done;kt=gt.next())It=kt.value,Ut=It.attributes.serviceLocation,Nt=Io(It),Ut&&Nt&&(Td(e.h,"BaseURL",Ut,Nt),dt=!0);if(e.X=null,dt&&e.h||(nn=rt.map(Io),e.X=Ki(r,nn)),Kt=function(){return e.h&&dt?Mp(e.h,"BaseURL"):e.X?e.X:[]},e.l.Ja=Kt,$t=0,rt&&rt.length&&($t=Er(rt[0],"availabilityTimeOffset",Ef)||0),e.l.Sa=$t,En=e.g.dash.ignoreMinBufferTime,An=0,En||(An=Er(t,"minBufferTime",Ia)||0),e.K=Er(t,"minimumUpdatePeriod",Ia,-1),Vn=Er(t,"availabilityStartTime",_s),Qn=Er(t,"timeShiftBufferDepth",Ia),ar=e.g.dash.ignoreSuggestedPresentationDelay,Ar=null,ar||(Ar=Er(t,"suggestedPresentationDelay",Ia)),Qr=e.g.dash.ignoreMaxSegmentDuration,Yr=null,Qr||(Yr=Er(t,"maxSegmentDuration",Ia)),Si=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.ga=e.i.presentationTimeline.U()&&Si=="static"),e.l.type=Si,$6(e),e.i)for(Pr=e.i.presentationTimeline,Fr=m(Object.values(e.o)),si=Fr.next();!si.done;si=Fr.next())Ns=si.value,Ns.segmentIndex&&Ns.segmentIndex.Ga(Pr.nb());else Wi=e.g.defaultPresentationDelay||1.5*An,Fa=Ar!=null?Ar:Wi,Pr=new rr(Vn,Fa,e.g.dash.autoCorrectDrift);return Pr.vc(Si=="static"),Pr.U()&&!isNaN(e.g.availabilityWindowOverride)&&(Qn=e.g.availabilityWindowOverride),Qn==null&&(Qn=1/0),Pr.ne(Qn),ss=t.attributes.profiles||"",e.l.profiles=ss.split(","),$i={wb:Si!="static",presentationTimeline:Pr,na:null,ha:null,ia:null,J:null,bandwidth:0,lf:!1,Sa:$t,Lb:null,profiles:ss.split(","),roles:null,lb:function(){return""}},e.N=0,Ms=hM(e,$i,Kt,t,!1),Nd=Ms.duration,gl=Ms.periods,(Si!="static"||e.ga)&&Ms.pg||Pr.Za(Nd||1/0),e.fa&&!e.H&&e.j.isAutoLowLatencyMode()&&(e.j.enableLowLatencyMode(),e.H=e.j.isLowLatencyMode()),e.H&&Pr.Xg(e.ba),Pr.yf(Yr||1),R(Ds,fe,2);case 2:return e.H&&(An=0,Md=Ar!=null?Ar:e.g.defaultPresentationDelay,Pr.Of(Md)),e.i?(e.i.periodCount=gl.length,e.i.gapCount=e.N,R(Ds,cM(e,gl,!1),4)):R(Ds,e.m.Je(gl,$i.wb),6);case 6:if(e.i={presentationTimeline:Pr,variants:e.m.l,textStreams:e.m.jf(),imageStreams:e.m.i,offlineSessionIds:[],minBufferTime:An||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:Y6(t),nextUrl:W6(t),periodCount:gl.length,gapCount:e.N,isLowLatency:e.fa,startTime:null},!Pr.lh()){Ds.u(7);break}return Dy=sr(t,"UTCTiming"),R(Ds,iZ(e,Kt,Dy),8);case 8:if(Xp=Ds.h,!e.j)return Ds.return();Pr.Yg(Xp);case 7:Pr.Ud();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),X(Ds)}})}function cM(e,t,n){var r;return Re(function(u){if(u.g==1)return R(u,e.m.Je(t,!0,n),2);e.i.variants=e.m.l,r=e.m.jf(),0<r.length&&(e.i.textStreams=r),e.i.imageStreams=e.m.i,e.j.filter(e.i),X(u)})}function V6(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt;return Re(function(nn){if(nn.g==1){if(n=t.attributes.mpdId,r=Er(t,"originalPublishTime",_s),!n||n!==e.l.Yd||r!==e.l.rd)throw e.F=[],new Xe(1,4,4052);for(u=[],c=[],f=new Set,h=m(vf(t)),v=h.next();!v.done;v=h.next())if(A=v.value,N=_c(A.attributes.sel||""),B=N[N.length-1],z=Io(A)||"",B.name==="MPD")if(B.Tb==="mediaPresentationDuration"){J=Io(A)||"";var Kt=Ia(J);if(Kt!=null){e.l.Lb=Kt;for(var $t=m(e.s.values()),En=$t.next();!En.done;En=$t.next())En.value.Lb=Kt}}else if(B.Tb==="type"){for(e.i.presentationTimeline.vc(z=="static"),e.l.type=z,Kt=m(e.s.values()),$t=Kt.next();!$t.done;$t=Kt.next())$t.value.wb=z=="dynamic";z=="static"&&(e.K=-1)}else B.Tb==="publishTime"?e.l.rd=_s(z)||0:B.Tb===null&&A.tagName==="add"&&c.push(A);else if(B.name==="PatchLocation")bh(e.F,A);else if(B.name==="Period")A.tagName==="add"?c.push(A):A.tagName==="remove"&&B.id&&z6(e,B.id);else if(B.name==="SegmentTemplate"){if($t=_c(A.attributes.sel||""),Kt=$t[$t.length-1],Kt.Tb){$t=fM(e,$t),En=Io(A)||"";for(var An=m($t),Vn=An.next();!Vn.done;Vn=An.next())Vn=e.s.get(Vn.value),fm(Vn.J.cc,A.tagName,Kt.Tb,En);Kt=$t}else Kt=[];for(fe=Kt,pe=m(fe),Ee=pe.next();!Ee.done;Ee=pe.next())Le=Ee.value,f.add(Le)}else if(B.name==="SegmentTimeline"||B.name==="S"){for(Kt=_c(A.attributes.sel||""),Kt=fM(e,Kt),$t=m(Kt),En=$t.next();!En.done;En=$t.next())En=e.s.get(En.value),En=yd(En,Hl,"SegmentTimeline"),An=sr(En,"S"),bh(An,A),En.children=An;for(Fe=Kt,it=m(Fe),Ue=it.next();!Ue.done;Ue=it.next())Qe=Ue.value,f.add(Qe)}for(rt=m(f),dt=rt.next();!dt.done;dt=rt.next())gt=dt.value,dM(e,gt);for(kt=m(c),It=kt.next();!It.done;It=kt.next())Ut=It.value,u.push.apply(u,T(K6(e,Ut)));return u.length?(e.i.periodCount+=u.length,e.i.gapCount=e.N,R(nn,cM(e,u,!0),2)):nn.u(2)}e.l.type=="static"&&(Nt=e.l.Lb,e.i.presentationTimeline.Za(Nt||1/0)),X(nn)})}function K6(e,t){return hM(e,{wb:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,na:null,ha:null,ia:null,J:null,bandwidth:0,lf:!1,Sa:e.l.Sa,profiles:e.l.profiles,Lb:e.l.Lb,roles:null,lb:function(){return""}},e.l.Ja,t,!0).periods}function z6(e,t){e.i.periodCount--;for(var n=m(e.s.keys()),r=n.next();!r.done;r=n.next())if(r=r.value,r.startsWith(t)){var u=e.s.get(r);yd(u,Hl,"SegmentTimeline").children=[],dM(e,r),e.s.delete(r)}e.C=e.C.filter(function(c){return c!==t})}function fM(e,t){var n="",r="",u=-1,c="";t=m(t);for(var f=t.next();!f.done;f=t.next())f=f.value,f.name==="Period"?n=f.id:f.name==="AdaptationSet"?(r=f.id,f.position!==null&&(u=f.position)):f.name==="Representation"&&(c=f.id);if(t=[],c)t.push(n+","+c);else if(r)for(u=m(e.s.values()),e=u.next();!e.done;e=u.next())e=e.value,e.na.id===n&&e.ia.id===r&&e.J.id&&t.push(n+","+e.J.id);else if(-1<u)for(r=m(e.s.values()),e=r.next();!e.done;e=r.next())e=e.value,e.na.id===n&&e.ia.position===u&&e.J.id&&t.push(n+","+e.J.id);return t}function dM(e,t){var n=e.s.get(t),r=e.o[t];r.segmentIndex&&r.segmentIndex.Ga(e.i.presentationTimeline.nb());try{var u=WN(n,function(c,f,h,v){return mM(e,c,f,h,v)},e.o,!0,e.g.dash.initialSegmentLimit,e.ka,n.J.aesKey,null,!0);r.createSegmentIndex=function(){return Re(function(c){if(c.g==1)return r.segmentIndex?c.u(0):R(c,u.kc(),3);r.segmentIndex=c.h,X(c)})}}catch(c){if(t=n.J.contentType,t!=_r&&t!="application"&&t!="image"||c.code!=4002)throw c}}function Y6(e){var t=Hi(e,"ServiceDescription");if(!t||(e=Hi(t,"Latency"),t=Hi(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function W6(e){if(e=sr(e,"SupplementalProperty"),!e.length)return null;e=m(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function hM(e,t,n,r,u){var c=t.Lb;c||(c=Er(r,"mediaPresentationDuration",Ia),e.l.Lb=c);var f=0;e.i&&e.i.presentationTimeline&&e.ga&&(f=e.i.presentationTimeline.Jb());var h=[],v=f;r=sr(r,"Period");for(var A=0;A<r.length;A++){var N=r[A],B=r[A+1],z=Er(N,"start",Ia,v),J=N.attributes.id,fe=Er(N,"duration",Ia),pe=null;if(B){var Ee=Er(B,"start",Ia);Ee!=null&&(pe=Ee-z)}else c!=null&&(pe=c-z+f);if(Ee=kf,pe&&fe&&Math.abs(pe-fe)>Ee&&pe>fe&&e.N++,pe==null&&(pe=fe),!(e.O!==null&&J!==null&&z!==null&&z<e.O)||e.C.includes(J)||A+1==r.length){if(z!==null&&(e.O===null||z>e.O)&&(e.O=z),v=X6(e,t,n,{start:z,duration:pe,node:N,qf:pe==null||!B}),h.push(v),t.na.id&&pe&&(e.ka[t.na.id]=pe),pe==null){v=null;break}v=z+pe}}if(u)for(t=m(h),n=t.next();!n.done;n=t.next())n=n.value.id,e.C.includes(n)||e.C.push(n);else e.C=h.map(function(Le){return Le.id});return c!=null?{periods:h,duration:c+f,pg:!1}:{periods:h,duration:v,pg:!0}}function $6(e){var t=Object.keys(e.B).filter(function(c){return!e.C.includes(c)});t=m(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var r=m(e.B[n]),u=r.next();!u.done;u=r.next())u=u.value,e.m&&e.m.ng(e.o[u],n),delete e.o[u];delete e.B[n]}}function X6(e,t,n,r){t.na=g_(e,r.node,null,n),t.ha=r,t.na.Sa=t.Sa,t.na.id||(t.na.id="__shaka_period_"+r.start);var u=sr(r.node,"EventStream");n=t.presentationTimeline.nb(),u=m(u);for(var c=u.next();!c.done;c=u.next())oZ(e,r.start,r.duration,c.value,n);for(n=sr(r.node,"SupplementalProperty"),n=m(n),u=n.next();!u.done;u=n.next())u=u.value,u.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(u=Fp(e,u))&&(t.lb=u);if(n=sr(r.node,"AdaptationSet").map(function(A,N){return Q6(e,t,N,A)}).filter(Ys),t.wb){for(r=[],u=m(n),c=u.next();!c.done;c=u.next()){c=m(c.value.Ki);for(var f=c.next();!f.done;f=c.next())r.push(f.value)}if(r.length!=new Set(r).size)throw new Xe(2,4,4018)}for(r=n.filter(function(A){return!A.Xf}),n=n.filter(function(A){return A.Xf}),n=m(n),u=n.next();!u.done;u=n.next()){u=u.value,c=u.Xf.split(" "),f=m(r);for(var h=f.next();!h.done;h=f.next())if(h=h.value,c.includes(h.id)){h=m(h.streams);for(var v=h.next();!v.done;v=h.next())zh(v.value,u.streams)}}if(n=Jv(e.g.disableAudio,r,"audio"),u=Jv(e.g.disableVideo,r,"video"),c=Jv(e.g.disableText,r,_r),r=Jv(e.g.disableThumbnails,r,"image"),u.length===0&&n.length===0)throw new Xe(2,4,4004);return{id:t.na.id,audioStreams:n,videoStreams:u,textStreams:c,imageStreams:r}}function Jv(e,t,n){return e||!t.length?[]:t.reduce(function(r,u){return u.contentType!=n||r.push.apply(r,T(u.streams)),r},[])}function Q6(e,t,n,r){function u(Ut){var Nt=Ut.attributes["dvb:fontFamily"];Ut=Ut.attributes["dvb:url"],Nt&&Ut&&(Ut=Ki(t.ia.Ja(),[Ut],t.lb()),e.j.addFont(Nt,Ut[0]))}function c(Ut){switch(Ut){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function f(Ut){switch(Ut){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ia=g_(e,r,t.na,null),t.ia.position=n;var h=!1;n=sr(r,"Role");var v=n.map(function(Ut){return Ut.attributes.value}).filter(Ys),A=void 0,N=t.ia.contentType==_r;N&&(A="subtitle"),n=m(n);for(var B=n.next();!B.done;B=n.next()){B=B.value;var z=B.attributes.schemeIdUri;if(z==null||z=="urn:mpeg:dash:role:2011")switch(B=B.attributes.value,B){case"main":h=!0;break;case"caption":case"subtitle":A=B}}var J=sr(r,"EssentialProperty");n=null;var fe=!1;B=null,z=!1,J=m(J);for(var pe=J.next();!pe.done;pe=J.next()){pe=pe.value;var Ee=pe.attributes.schemeIdUri;if(Ee=="http://dashif.org/guidelines/trickmode")n=pe.attributes.value;else if(Ee=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var Le=f(parseInt(pe.attributes.value,10));else if(Ee=="urn:mpeg:mpegB:cicp:ColourPrimaries")var Fe=c(parseInt(pe.attributes.value,10));else Ee!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(Ee=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?fe=!0:Ee=="urn:dvb:dash:fontdownload:2014"?u(pe):Ee=="urn:mpeg:dash:urlparam:2014"&&(B=Fp(e,pe))||(z=!0))}if(z)return null;var it=null;for(z=sr(r,"SupplementalProperty"),z=m(z),J=z.next();!J.done;J=z.next())J=J.value,pe=J.attributes.schemeIdUri,pe=="http://dashif.org/guidelines/last-segment-number"?it=parseInt(J.attributes.value,10)-1:pe=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?Le=f(parseInt(J.attributes.value,10)):pe=="urn:mpeg:mpegB:cicp:ColourPrimaries"?Fe=c(parseInt(J.attributes.value,10)):pe=="urn:dvb:dash:fontdownload:2014"?u(J):pe=="urn:mpeg:dash:urlparam:2014"&&(B=Fp(e,J));B&&(t.lb=B),B=sr(r,"Accessibility");var Ue=new Map,Qe;for(B=m(B),z=B.next();!z.done;z=B.next())if(J=z.value,z=J.attributes.schemeIdUri,J=J.attributes.value,z!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(z!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)z=="urn:mpeg:dash:role:2011"?J!=null&&(v.push(J),J=="captions"&&(A="caption")):z=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(J=="1"?Qe="visually impaired":J=="2"&&(Qe="hard of hearing"));else if(z=1,J!=null)for(J=m(J.split(";")),pe=J.next();!pe.done;pe=J.next()){Ee=pe.value;var rt=pe=void 0;Ee.includes("=")?(Ee=Ee.split("="),pe="svc"+Ee[0],rt=Ee[1].split(",")[0].split(":").pop()):(pe="svc"+z,z++,rt=Ee),Ue.set(pe,Or(rt))}else Ue.set("svc1","und");else if(z=1,J!=null)for(J=J.split(";"),pe=m(J),Ee=pe.next();!Ee.done;Ee=pe.next()){rt=Ee.value;var dt=Ee=void 0;rt.includes("=")?(rt=rt.split("="),Ee=rt[0].startsWith("CC")?rt[0]:"CC"+rt[0],dt=rt[1]||"und"):(Ee="CC"+z,J.length==2?z+=2:z++,dt=rt),Ue.set(Ee,Or(dt))}else Ue.set("CC1","und");B=sr(r,"ContentProtection");var gt=BN(B,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),kt=Or(t.ia.language||"und"),It=t.ia.label;if(B=sr(r,"Representation"),r=B.map(function(Ut){return(Ut=J6(e,t,gt,A,kt,It,h,v,Ue,Ut,Qe,it))&&(Ut.hdr=Ut.hdr||Le,Ut.colorGamut=Ut.colorGamut||Fe,Ut.fastSwitching=fe),Ut}).filter(function(Ut){return!!Ut}),r.length==0){if(n=t.ia.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||N||n)return null;throw new Xe(2,4,4003)}if(!t.ia.contentType||t.ia.contentType=="application")for(t.ia.contentType=vM(r[0].mimeType,r[0].codecs),N=m(r),z=N.next();!z.done;z=N.next())z.value.type=t.ia.contentType;for(N=t.ia.id||"__fake__"+e.sa++,z=m(r),J=z.next();!J.done;J=z.next()){for(J=J.value,pe=m(gt.drmInfos),Ee=pe.next();!Ee.done;Ee=pe.next())Ee=Ee.value,Ee.keyIds=Ee.keyIds&&J.keyIds?new Set([].concat(T(Ee.keyIds),T(J.keyIds))):Ee.keyIds||J.keyIds;e.g.dash.enableAudioGroups&&(J.groupId=N)}return B=B.map(function(Ut){return Ut.attributes.id}).filter(Ys),{id:N,contentType:t.ia.contentType,language:kt,fk:h,streams:r,drmInfos:gt.drmInfos,Xf:n,Ki:B}}function Fp(e,t){if((t=Vi(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&Er(t,"useMPDUrlQuery",Hs,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return n=="$querypart$"?e.aa:n.split("&").map(function(r){if(r=="$querypart$")return e.aa;var u=/\$query:(.*?)\$/g.exec(r);if(u&&u.length==2){u=u[1];var c=new Wu(e.aa).get(u);if(c.length)return u+"="+c[0]}return r}).join("&")}}return null}function J6(e,t,n,r,u,c,f,h,v,A,N,B){t.J=g_(e,A,t.ia,null);var z=t.J.id;if(e.ba=Math.min(e.ba,t.J.Sa),e.fa=0<e.ba,!rZ(t.J))return null;var J=t.ha.start;t.bandwidth=Er(A,"bandwidth",Gs)||0,t.roles=h;var fe=sr(A,"SupplementalProperty"),pe=sr(A,"EssentialProperty"),Ee=null,Le=pe.find(function($t){return $t.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(Le||(Le=fe.find(function($t){return $t.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(Ee=Fp(e,Le)),Ee&&(t.lb=Ee),Le=t.J.contentType,Ee=Le==_r||Le=="application",Le=Le=="image";try{var Fe=void 0;if(n.Fe){var it=t.J.Ja,Ue=t.lb,Qe=Ki(it(),[n.Fe.pi],Ue()),rt=Bi(Qe,e.g.retryParameters);Fe={bitsKey:128,blockCipherMode:"CBC",iv:n.Fe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var $t,En,An;return Re(function(Vn){if(Vn.g==1)return R(Vn,m_(e,rt,6),2);if(Vn.g!=3){if($t=Vn.h,!$t.data||$t.data.byteLength!=16)throw new Xe(2,4,4049);return En={name:"AES-CBC"},An=Fe,R(Vn,g.crypto.subtle.importKey("raw",$t.data,En,!0,["decrypt"]),3)}An.cryptoKey=Vn.h,Fe.fetchKey=void 0,X(Vn)})}}}if(t.J.aesKey=Fe,it=function($t,En,An,Vn){return mM(e,$t,En,An,Vn)},t.J.Sc)var dt=_6(t,it,Fe);else if(t.J.Qb)dt=S6(t,e.o,Fe);else if(t.J.cc)dt=WN(t,it,e.o,!!e.i,e.g.dash.initialSegmentLimit,e.ka,Fe,B,!1);else{var gt=t.ha.duration||0,kt=t.J.Ja,It=t.J.mimeType,Ut=t.J.codecs;dt={kc:function(){var $t=a1(J,gt,kt());return $t.Gb(function(En){En.mimeType=It,En.codecs=Ut}),Promise.resolve($t)}}}}catch($t){if((Ee||Le)&&$t.code==4002)return null;throw $t}A=sr(A,"ContentProtection"),A=i6(A,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),A=new Set(A?[A]:[]),B=!1,fe.some(function($t){return $t.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&$t.attributes.value=="JOC"})&&(B=!0),fe=!1,Ee&&(fe=h.includes("forced_subtitle")||h.includes("forced-subtitle"));var Nt;if(Le&&((pe=pe.find(function($t){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes($t.attributes.schemeIdUri)}))&&(Nt=pe.attributes.value),!Nt))return null;var nn;Ee=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(Ee.includes("hvc1.2.4.L153.B0")||Ee.includes("hev1.2.4.L153.B0"))&&(nn="PQ"),pe=t.J.id?t.na.id+","+t.J.id:"",e.F.length&&z&&e.s.set(t.na.id+","+z,eZ(t));var Kt=pe&&e.o[pe]?e.o[pe]:{id:e.sa++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Kt.segmentIndex&&(Kt.segmentIndex.release(),Kt.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:Ee,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:A,language:u,originalLanguage:t.ia.language,label:c,type:t.ia.contentType,primary:f,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:h,forced:fe,channelsCount:t.J.$d,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:B,closedCaptions:v,hdr:nn,colorGamut:void 0,videoLayout:void 0,tilesLayout:Nt,accessibilityPurpose:N,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Di(t.J.mimeType,t.J.codecs)])};return Kt.createSegmentIndex=function(){var $t;return Re(function(En){if(En.g==1)return Kt.segmentIndex?En.u(0):($t=Kt,R(En,dt.kc(),3));$t.segmentIndex=En.h,X(En)})},pe&&t.wb&&!e.o[pe]&&(t=t.na.id||"",e.B[t]||(e.B[t]=[]),e.o[pe]=Kt,e.B[t].push(pe)),Kt}function eZ(e){function t(n){return n?(n=Es(n),n.Sc=null,n.Qb=null,n.cc=xh(n.cc),n):null}return e=Es(e),e.na=t(e.na),e.ia=t(e.ia),e.J=t(e.J),e.ha&&(e.ha=Es(e.ha),e.ha.node=null),e}function pM(e){var t,n;return Re(function(r){switch(r.g){case 1:return t=0,ce(r,2),R(r,h_(e),4);case 4:t=r.h,me(r,3);break;case 2:if(n=Ce(r),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),r.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return r.return();e.j.onManifestUpdated(),p_(e,t),X(r)}})}function p_(e,t){if(!(0>e.K)){var n=e.K;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.L.Z(Math.max(n-t,G(e.oa)))}}function g_(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,$d:null,audioSamplingRate:null,Sa:0,me:0},r=r||n.Ja;var u=t.attributes.id,c=sr(t,"BaseURL"),f,h=!1;if(e.h)for(var v=m(c),A=v.next();!A.done;A=v.next()){var N=A.value;A=N.attributes.serviceLocation,N=Io(N),A&&N&&(Td(e.h,u,A,N),h=!0)}h&&e.h||(f=c.map(Io)),v=t.attributes.contentType||n.contentType,A=t.attributes.mimeType||n.mimeType,N=[t.attributes.codecs||n.codecs];var B=Po(t,"urn:scte:dash:scte214-extensions","supplementalCodecs");B&&N.push(B),N=d1(N).join(","),B=Er(t,"frameRate",Ih)||n.frameRate;var z=t.attributes.sar||n.pixelAspectRatio,J=tZ(sr(t,"InbandEventStream"),n.emsgSchemeIdUris),fe=sr(t,"AudioChannelConfiguration");fe=nZ(fe)||n.$d;var pe=Er(t,"audioSamplingRate",lo)||n.audioSamplingRate;v||(v=vM(A,N));var Ee=Hi(t,"SegmentBase"),Le=Hi(t,"SegmentTemplate"),Fe=Ee&&Er(Ee,"availabilityTimeOffset",Ef)||0,it=Le&&Er(Le,"availabilityTimeOffset",Ef)||0,Ue=c&&c.length&&Er(c[0],"availabilityTimeOffset",Ef)||0;Fe=n.Sa+Ue+Fe+it,it=null,(Ue=Hi(t,"SegmentSequenceProperties"))&&(Ue=Hi(Ue,"SAP"))&&(it=Er(Ue,"cadence",Ec)),Ue=t.attributes.label;var Qe=sr(t,"Label");return Qe&&Qe.length&&(Qe=Qe[0],ei(Qe)&&(Ue=ei(Qe))),{Ja:function(){return Ki(r(),c.length?e.h&&h?Mp(e.h,u):f||[]:[])},Sc:Ee||n.Sc,Qb:Hi(t,"SegmentList")||n.Qb,cc:Le||n.cc,width:Er(t,"width",lo)||n.width,height:Er(t,"height",lo)||n.height,contentType:v,mimeType:A,codecs:N,frameRate:B,pixelAspectRatio:z,emsgSchemeIdUris:J,id:u,language:t.attributes.lang,$d:fe,audioSamplingRate:pe,Sa:Fe,Pd:null,me:it||n.me,label:Ue||null}}function tZ(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function nZ(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function rZ(e){var t=e.Sc?1:0;return t+=e.Qb?1:0,t+=e.cc?1:0,t==0?e.contentType==_r||e.contentType=="application":(t!=1&&(e.Sc&&(e.Qb=null),e.cc=null),!0)}function gM(e,t,n,r){var u,c,f,h,v,A,N;return Re(function(B){if(B.g==1)return u=[yi(n)],c=Ki(t(),u),f=Bi(c,e.g.retryParameters),f.method=r,h=e.j.networkingEngine.request(4,f,{isPreload:e.ea()}),il(e.T,h),R(B,h.promise,2);if(v=B.h,r=="HEAD"){if(!v.headers||!v.headers.date)return B.return(0);A=v.headers.date}else A=Cr(v.data);return N=Date.parse(A),isNaN(N)?B.return(0):B.return(N-Date.now())})}function iZ(e,t,n){var r,u,c,f,h,v,A,N;return Re(function(B){switch(B.g){case 1:r=n.map(function(z){return{scheme:z.attributes.schemeIdUri,value:z.attributes.value}}),u=e.g.dash.clockSyncUri,!r.length&&u&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),c=m(r),f=c.next();case 2:if(f.done){B.u(4);break}switch(h=f.value,ce(B,5),v=h.scheme,A=h.value,v){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return B.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return B.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return N=Date.parse(A),B.return(isNaN(N)?0:N-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Ke("NTP UTCTiming scheme is not supported");break;default:Ke("Unrecognized scheme in UTCTiming element",v)}B.u(9);break;case 7:return R(B,gM(e,t,A,"HEAD"),10);case 10:return B.return(B.h);case 8:return R(B,gM(e,t,A,"GET"),11);case 11:return B.return(B.h);case 9:me(B,3);break;case 5:Ce(B);case 3:f=c.next(),B.u(2);break;case 4:return Ke("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),B.return(0)}})}function oZ(e,t,n,r,u){var c=r.attributes.schemeIdUri||"",f=r.attributes.value||"",h=Er(r,"timescale",lo)||1,v=Er(r,"presentationTimeOffset",lo)||0;r=m(sr(r,"Event"));for(var A=r.next();!A.done;A=r.next()){A=A.value;var N=Er(A,"presentationTime",lo)||0,B=Er(A,"duration",lo)||0;N=Math.max((N-v)/h+t,t),B=N+B/h,n!=null&&(N=Math.min(N,t+n),B=Math.min(B,t+n)),B<u||(A={schemeIdUri:c,value:f,startTime:N,endTime:B,id:A.attributes.id||"",eventElement:Rh(A),eventNode:xh(A)},e.j.onTimelineRegionAdded(A))}}function mM(e,t,n,r,u){var c,f,h,v;return Re(function(A){return A.g==1?(c=Wa,f=u?0:1,h=nd(t,n,r,e.g.retryParameters),R(A,m_(e,h,c,{type:f}),2)):(v=A.h,A.return(v.data))})}function vM(e,t){return t=Di(e,t),Ac(t)?_r:e.split("/")[0]}function m_(e,t,n,r){return r||(r={}),r.isPreload=e.ea(),t=e.j.networkingEngine.request(n,t,r),il(e.T,t),t.promise}function aZ(e){var t=e.l.rd;if(!e.l.Yd||!t||!e.F.length)return[];var n=Date.now()/1e3,r=e.F.filter(function(u){return u=lo(u.attributes.ttl),!u||t+u>n}).map(Io).filter(Ys);return r.length?Ki(e.A,r):[]}ne("shaka.dash.DashParser",Qv),Yn["application/dash+xml"]=function(){return new Qv},Yn["video/vnd.mpeg.dash.mpd"]=function(){return new Qv};function ey(){}ne("shaka.dependencies",ey),ey.has=function(e){return v_.has(e)},ey.add=function(e,t){if(!EM[e])throw Error(e+" is not supported");e==yM?gr("mux.js","mux.js is no longer used in Shaka Player."):v_.set(e,function(){return t})};var yM="muxjs",EM={gk:yM,ISOBoxer:"ISOBoxer"};ey.Allowed=EM;var v_=new Map([["ISOBoxer",function(){return g.ISOBoxer}]]);function _M(e,t,n){this.type=e,this.W=t,this.segments=n||null}function TM(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}TM.prototype.toString=function(e){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function SM(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function Up(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function $n(e,t,n){return(e=Up(e,t))?e.value:n||null}function Ur(e,t){if(e=Up(e,t),!e)throw new Xe(2,4,4023,t);return e.value}function wM(e,t,n){n=n===void 0?[]:n,this.W=t,this.g=e,this.Ab=n}function AM(e,t){this.name=e,this.value=t}function ts(e,t){return e.filter(function(n){return n.name==t})}function IM(e,t){return e.filter(function(n){return Ur(n,"TYPE")==t})}function ho(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function wd(e,t,n){return n=n===void 0?0:n,(e=ho(e,t))?Number(e.value):n}function Kl(e,t,n){return t?bM(e,[t],n):[]}function bM(e,t,n){if(!t.length)return[];t=Ki(e,t),e=[],t=m(t);for(var r=t.next();!r.done;r=t.next())e.push(CM(r.value,n));return e}function CM(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=m(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var u=r.slice(2,r.length-1),c=t.get(u);if(c)e=e.replace(r,c);else throw new Xe(2,4,4039,u)}}return e}function sZ(){this.g=0}function y_(e,t){t=Cr(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new Xe(2,4,4015);t=0;for(var r=!0,u=m(n),c=u.next();!c.done;c=u.next())if(c=c.value,/^#(?!EXT)/m.test(c)||r)r=!1;else if(c=E_(e,c),--e.g,RM.includes(c.name)){t=1;break}else c.name=="EXT-X-STREAM-INF"&&(r=!0);for(u=[],r=!0,c=0;c<n.length;c++){var f=n[c],h=n[c+1];if(/^#(?!EXT)/m.test(f)||r)r=!1;else{if(f=E_(e,f),uZ.includes(f.name)){if(t!=1)throw new Xe(2,4,4017);f=n.splice(c,n.length-c),n=[],r=[],c=[],h=null,f=m(f);for(var v=f.next();!v.done;v=f.next())v=v.value,/^(#EXT)/.test(v)?(v=E_(e,v),RM.includes(v.name)?u.push(v):v.name=="EXT-X-MAP"?h=v:v.name=="EXT-X-PART"?c.push(v):v.name=="EXT-X-PRELOAD-HINT"?$n(v,"TYPE")=="PART"?c.push(v):$n(v,"TYPE")=="MAP"&&(v.name="EXT-X-MAP",h=v):r.push(v)):/^#(?!EXT)/m.test(v)||(v=v.trim(),h&&r.push(h),n.push(new wM(v,r,c)),r=[],c=[]);return c.length&&(h&&r.push(h),n.push(new wM("",r,c))),new _M(t,u,n)}u.push(f),f.name=="EXT-X-STREAM-INF"&&(f.attributes.push(new AM("URI",h)),r=!0)}}return new _M(t,u)}function E_(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new Xe(2,4,4016,t);t=n[1];var r=n[2];n=[];var u;if(r){r=new aa(r);var c;(c=Sa(r,/^([^,=]+)(?:,|$)/g))&&(u=c[1]);for(var f=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;c=Sa(r,f);)n.push(new AM(c[1],c[2]||c[3])),ys(r)}return new TM(e,t,n,u)}var RM="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),uZ="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");function xM(){}function NM(e){try{var t=__(e);return $s({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return Ws(n)}}function __(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new Xe(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new Xe(2,1,1004,e);var n=t[0];e=g.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var u;return r?u=Wo(e):u=bi(e),{data:u,contentType:n}}ne("shaka.net.DataUriPlugin",xM),xM.parse=NM,Xs("data",NM);function ty(){var e=this;this.g=this.h=null,this.C=1,this.A=new Map,this.H=new Map,this.O=new Map,this.O.set("video",new Map),this.O.set("audio",new Map),this.O.set(_r,new Map),this.O.set("image",new Map),this.vb=new Set,this.i=new Map,this.l=null,this.N="",this.Ta=new sZ,this.I=-1,this.ga=1/0,this.fa=this.$b=!1,this.B=new on(function(){if(e.ba&&!e.g.continueLoadingWhenPaused&&(e.aa.$a(e.ba,"timeupdate"),e.ba.paused)){e.aa.pa(e.ba,"timeupdate",function(){return JM(e)});return}JM(e)}),this.za=ay,this.m=null,this.bb=0,this.o=1/0,this.Fa=this.Ea=this.X=0,this.ea=new rl,this.F=new Map,this.G=new Map,this.ta=new Map,this.ka=new Map,this.L=new Map,this.oa=new Map,this.sa=new Map,this.Hb=this.K=!1,this.Eb=new D(5),this.j=null,this.T=!0,this.Da=new Set,this.aa=new Tt,this.s=this.ba=null,this.Fb=function(){return!1}}p=ty.prototype,p.configure=function(e,t){this.g=e,t&&(this.Fb=t),this.j&&this.j.configure(this.g)},p.start=function(e,t){var n=this,r;return Re(function(u){return u.g==1?(n.h=t,n.K=t.isLowLatencyMode(),R(u,R_(n,[e]).promise,2)):u.g!=3?(r=u.h,n.N=r.uri,R(u,fZ(n,r.data,e),3)):u.return(n.m)})},p.stop=function(){this.B&&(this.B.stop(),this.B=null);var e=[];return this.ea&&(e.push(this.ea.destroy()),this.ea=null),this.g=this.h=null,this.vb.clear(),this.m=null,this.i.clear(),this.H.clear(),this.G.clear(),this.A.clear(),this.ta.clear(),this.ka.clear(),this.L.clear(),this.oa.clear(),this.sa.clear(),this.Da.clear(),this.j&&this.j.destroy(),this.aa&&(this.aa.release(),this.aa=null),Promise.all(e)},p.update=function(){var e=this,t,n,r,u,c,f,h,v,A,N,B,z;return Re(function(J){if(J.g==1){if(!pa(e))return J.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,r=n.filter(function(fe){return fe.stream.segmentIndex}),u=m(r),c=u.next();!c.done;c=u.next())f=c.value,t.push(lZ(e,f));return R(J,Promise.all(t),2)}for(jM(e,r.map(function(fe){return fe.stream})),h=r.some(function(fe){return fe.dd==0}),r.length&&!h&&(v=DZ,iy(e,v.qh),A=r.map(function(fe){return fe.Kb}),e.l.Za(Math.min.apply(Math,T(A))),e.h.updateDuration()),h&&S_(e),N=m(r),B=N.next();!B.done;B=N.next())z=B.value,z.stream.segmentIndex&&!eu(z.stream.segmentIndex)&&e.h.disableStream(z.stream);X(J)})};function T_(e,t){return pa(e)?e.O.get(t.type):t.Vd}function lZ(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An,Vn,Qn;return Re(function(ar){switch(ar.g){case 1:for(n=[],r=m(t.M()),u=r.next();!u.done;u=r.next())c=u.value,f=new Ei(c),h=f.g,t.Cd&&(0<=t.pb&&h.add("_HLS_msn",String(t.pb)),0<=t.qb&&h.add("_HLS_part",String(t.qb))),t.Dd&&h.add("_HLS_skip","YES"),Lf(h)&&$r(f,h),n.push(f.toString());return ce(ar,2),R(ar,R_(e,n,!0).promise,4);case 4:v=ar.h,me(ar,3);break;case 2:throw A=Ce(ar),e.h&&e.h.disableStream(t.stream),A;case 3:if(!t.stream.segmentIndex)return ar.return();if(N=y_(e.Ta,v.data),N.type!=1)throw new Xe(2,4,4017);return B=v.uri,B==v.originalUri||t.M().includes(B)||t.Qg.push(B),z=ts(N.W,"EXT-X-DEFINE"),J=w_(e,z,B),fe=t.stream,pe=T_(e,t),R(ar,HM(e,N,fe.mimeType,t.M,J),5);case 5:for(Ee=ar.h,Le=Ee.keyIds,Fe=Ee.drmInfos,it=function(Ar,Qr){return Ar.size===Qr.size&&[].concat(T(Ar)).every(function(Yr){return Qr.has(Yr)})},it(fe.keyIds,Le)||(fe.keyIds=Le,fe.drmInfos=Fe,e.h.newDrmInfo(fe)),Ue=$M(e,N,pe,J,t.M,t.type),Qe=Ue.segments,(rt=Ue.bandwidth)&&(fe.bandwidth=rt),dt=iv(fe),gt=m(Qe),kt=gt.next();!kt.done;kt=gt.next())It=kt.value,It.$&&(It.$.Kc=dt);fe.segmentIndex.od(Qe,e.l.nb()),Qe.length&&(Ut=wd(N.W,"EXT-X-MEDIA-SEQUENCE",0),nn=(Nt=ho(N.W,"EXT-X-SKIP"))?Number($n(Nt,"SKIPPED-SEGMENTS")):0,Kt=qM(Ut,Qe),$t=Kt.pb,En=Kt.qb,t.pb=$t+nn,t.qb=En,An=pe.get(Ut),fe.segmentIndex.Ga(An)),(Vn=eu(fe.segmentIndex))&&(t.rc=Vn.startTime,Qn=Qe[Qe.length-1],t.Kb=Qn.endTime),ho(N.W,"EXT-X-ENDLIST")&&(t.dd=!0),I_(e,N),b_(e,N.W,fe.type,J,t.M),X(ar)}})}p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(){},p.banLocation=function(e){this.j&&this.j.banLocation(e)},p.setMediaElement=function(e){this.ba=e};function MM(e,t){for(var n=e.I==-1,r=m(t),u=r.next();!u.done;u=r.next()){u=u.value;var c=u.stream.segmentIndex,f=T_(e,u);if(c=eu(c)){f=m(f);for(var h=f.next();!h.done;h=f.next()){h=m(h.value);var v=h.next().value;if(h.next().value==c.startTime){n&&(e.I=Math.max(e.I,v)),u.Qe=v;break}}}}if(!(0>e.I))for(t=m(t),n=t.next();!n.done;n=t.next())n=n.value,Bp(e,n.type)&&(r=n.stream.segmentIndex)&&(u=e.I-n.Qe,0<u&&(r.g.splice(0,u),r=eu(r))&&(r=-r.startTime,n.stream.segmentIndex.offset(r),DM(e,n,r)))}function cZ(e,t){if(e.ga==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next())n=eu(n.value.stream.segmentIndex),n!=null&&n.h!=null&&(e.ga=Math.min(e.ga,n.h))}if(t=e.ga,t!=1/0){n=m(e.i.values());for(var r=n.next();!r.done;r=n.next())if(r=r.value,!Bp(e,r.type)){var u=r.stream.segmentIndex;if(u!=null){var c=eu(u);if(c)if(c.h==null)de("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.M(),"Expect AV sync issues!");else for(DM(e,r,c.h-t-c.startTime),r=m(u),u=r.next();!u.done;u=r.next())u.value.Uf(t)}}}}function DM(e,t,n){t.rc+=n,t.Kb+=n,e=T_(e,t);for(var r=m(e),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.set(u,c+n)}t.M()}function fZ(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An,Vn,Qn;return Re(function(ar){switch(ar.g){case 1:return r=Mi,u=y_(e.Ta,t),c=ts(u.W,"EXT-X-DEFINE"),f=[],h=[],v=[],e.l=new rr(null,0),e.l.vc(!0),A=function(){return[n]},N=null,B=new Map,u.type==1?(e.T=!1,Ue=ts(u.W,"EXT-X-DEFINE"),B=w_(e,Ue,e.N),N=r.ja,Qe="",rt=new Map,R(ar,ZM(e,e.C++,B,u,A,"",N,Qe,!0,"Media Playlist",null,rt,null,!1,null,!1),7)):(hZ(e,c),z=ts(u.W,"EXT-X-MEDIA"),J=ts(u.W,"EXT-X-STREAM-INF"),fe=ts(u.W,"EXT-X-IMAGE-STREAM-INF"),pe=ts(u.W,"EXT-X-I-FRAME-STREAM-INF"),Ee=ts(u.W,"EXT-X-SESSION-KEY"),Le=ts(u.W,"EXT-X-SESSION-DATA"),Fe=ts(u.W,"EXT-X-CONTENT-STEERING"),gZ(e,Le),R(ar,mZ(e,Fe),4));case 4:return pZ(e,J),AZ(e,z),it=_Z(e,pe),R(ar,TZ(e,J,Ee,z,A,e.A,it),5);case 5:return f=ar.h,h=vZ(e,z),R(ar,yZ(e,fe,pe),6);case 6:v=ar.h,ar.u(3);break;case 7:dt=ar.h,e.i.set(n,dt),dt.stream&&(gt=iv(dt.stream),dt.stream.segmentIndex.Gb(function(Ar){Ar.$&&(Ar.$.Kc=gt)})),N=dt.stream.type,f.push({id:0,language:Or(Qe||"und"),disabledUntilTime:0,primary:!0,audio:N=="audio"?dt.stream:null,video:N=="video"?dt.stream:null,bandwidth:dt.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new Xe(2,7,7001);if(KM(e,u),u.type==1&&(pa(e)&&(zM(e,u),kt=e.o,e.B.Z(kt)),It=Array.from(e.i.values()),A_(e,It),S_(e),b_(e,u.W,N,B,A)),e.m={presentationTimeline:e.l,variants:f,textStreams:h,imageStreams:v,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.s},e.fa||!e.g.hls.disableCodecGuessing){ar.u(8);break}for(Ut=[],Nt=m(e.m.variants),nn=Nt.next();!nn.done;nn=Nt.next())Kt=nn.value,Kt.audio&&Kt.audio.codecs===""&&Ut.push(Kt.audio.createSegmentIndex()),Kt.video&&Kt.video.codecs===""&&Ut.push(Kt.video.createSegmentIndex());return R(ar,Promise.all(Ut),8);case 8:if(e.h.makeTextStreamsForClosedCaptions(e.m),f.length==1){for($t=[],En=f[0],An=m([En.video,En.audio]),Vn=An.next();!Vn.done;Vn=An.next())(Qn=Vn.value)&&!Qn.segmentIndex&&$t.push(Qn.createSegmentIndex());if(0<$t.length)return R(ar,Promise.all($t),0)}ar.u(0)}})}function dZ(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt;return Re(function(kt){switch(kt.g){case 1:if(n=ov(e.g.hls.mediaPlaylistFullMimeType),!t.length)return kt.return(n);if(r=XM(e,t),u=r.segment,c=r.segmentIndex,f=u.M(),h=f[0],v=new Ei(h),A=v.Pa.split(".").pop(),N=x_[A])return kt.return(ov(N));if(B=Wa,J=z=null,fe=u.$,!fe){kt.u(2);break}return pe=nd(fe.M(),fe.Yb(),fe.Wb(),e.g.retryParameters),R(kt,pl(e,pe,B,{type:0}).promise,3);case 3:if(Ee=kt.h,z=Ee.data,!fe.aesKey){kt.u(4);break}return R(kt,h1(z,fe.aesKey,0),5);case 5:z=kt.h;case 4:(J=Ee.headers["content-type"])&&(J=J.split(";")[0].toLowerCase());case 2:return Le=nd(u.M(),u.Yb(),u.Wb(),e.g.retryParameters),R(kt,pl(e,Le,B,{type:1}).promise,6);case 6:if(Fe=kt.h,it=Fe.data,!u.aesKey){kt.u(7);break}return R(kt,h1(it,u.aesKey,c),8);case 8:it=kt.h;case 7:if((Ue=Fe.headers["content-type"])&&(Ue=Ue.split(";")[0].toLowerCase()),Qe="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),rt=["audio/mp4","video/mp4","video/iso.segment"],op(nr(it))){var It=it,Ut=nr(It);Ut=new kr().parse(Ut);var Nt=Ut.$c();Ut=Ut.kf();var nn=[],Kt=!1,$t=!1;switch(Nt.audio){case"aac":case"aac-loas":nn.push("mp4a.40.2"),Kt=!0;break;case"mp3":nn.push("mp4a.40.34"),Kt=!0;break;case"ac3":nn.push("ac-3"),Kt=!0;break;case"ec3":nn.push("ec-3"),Kt=!0;break;case"opus":nn.push("opus"),Kt=!0}switch(Nt.video){case"avc":Ut.codec?nn.push(Ut.codec):nn.push("avc1.42E01E"),$t=!0;break;case"hvc":Ut.codec?nn.push(Ut.codec):nn.push("hvc1.1.6.L93.90"),$t=!0;break;case"av1":nn.push("av01.0.01M.08"),$t=!0}if(nn.length){if(Nt=Kt&&!$t,Kt=new Map,$t){$t=new At("video/mp2t"),$t.i(It),It=m($t.j());for(var En=It.next();!En.done;En=It.next())En=En.value,Kt.set(En,En);$t.g()}Ut={type:Nt?"audio":"video",mimeType:"video/mp2t",codecs:nn.join(", "),language:null,height:Ut.height,width:Ut.width,channelCount:null,sampleRate:null,closedCaptions:Kt,vd:null,colorGamut:null,frameRate:Ut.frameRate}}else Ut=null;if(dt=Ut)return kt.return(dt)}else if((Qe.includes(A)||rt.includes(Ue)||J&&rt.includes(J))&&(gt=nj(z,it)))return kt.return(gt);return Ue?kt.return(ov(Ue)):J?kt.return(ov(J)):kt.return(n)}})}function S_(e){if(pa(e)){if(e.za==sy){for(var t=1/0,n=1/0,r=m(e.i.values()),u=r.next();!u.done;u=r.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&(t=Math.min(t,u.Kb),n=Math.min(n,u.rc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.ne(t)}}else e.l.Za(BM(e));if(!e.l.s)for(t=m(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=eu(n.stream.segmentIndex))&&n.h&&e.l.Zg(n.h);e.l.Ud()}function hZ(e,t){var n=new Ei(e.N).g;t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=$n(u,"NAME");var c=$n(u,"VALUE");u=$n(u,"QUERYPARAM"),r&&c&&(e.A.has(r)||e.A.set(r,c)),u&&(r=n.get(u)[0])&&!e.A.has(r)&&e.A.set(u,r)}}function w_(e,t,n){n=new Ei(n).g;var r=new Map;t=m(t);for(var u=t.next();!u.done;u=t.next()){var c=u.value,f=$n(c,"NAME"),h=$n(c,"VALUE");u=$n(c,"QUERYPARAM"),c=$n(c,"IMPORT"),f&&h&&(r.has(f)||r.set(f,h)),u&&(f=n.get(u)[0])&&!r.has(f)&&r.set(u,f),c&&(u=e.A.get(c))&&r.set(c,u)}return r}function pZ(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=$n(r,"AUDIO");n=$n(r,"VIDEO");var c=$n(r,"SUBTITLES");if(r=PM(e,r),c){var f=bo(_r,r);e.G.set(c,f),Kn(r,f)}u&&(c=bo("audio",r),c||(c=e.g.hls.defaultAudioCodec),e.G.set(u,c)),n&&(u=bo("video",r),u||(u=e.g.hls.defaultVideoCodec),e.G.set(n,u))}}function gZ(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=$n(r,"DATA-ID");n=$n(r,"URI");var c=$n(r,"LANGUAGE");r=$n(r,"VALUE"),u=new Map().set("id",u),n&&u.set("uri",Kl([e.N],n,e.A)[0]),c&&u.set("language",c),r&&u.set("value",r),n=new jn("sessiondata",u),e.h&&e.h.onEvent(n)}}function mZ(e,t){var n,r,u,c,f,h;return Re(function(v){if(!e.h||!e.g)return v.return();for(r=m(t),u=r.next();!u.done;u=r.next())if(c=u.value,f=$n(c,"PATHWAY-ID"),h=$n(c,"SERVER-URI"),f&&h){e.j=new _d(e.h),e.j.configure(e.g),e.j.i=[e.N],e.j.setManifestType("HLS"),e.j.h=f,n=Np(e.j,h);break}return R(v,n,0)})}function vZ(e,t){var n=IM(t,"SUBTITLES");t=n.map(function(f){if(e.g.disableText)return null;try{return FM(e,[f],new Map).stream}catch(h){if(e.g.hls.ignoreTextStreamFailures)return null;throw h}}),n=m(n);for(var r=n.next();!r.done;r=n.next()){var u=Ur(r.value,"GROUP-ID");if((r=e.G.get(u))&&(u=e.H.get(u))){u=m(u);for(var c=u.next();!c.done;c=u.next())c=c.value,c.stream.codecs=r,c.stream.mimeType=C_(_r,r)||ry(_r),Ad(c.stream)}}return t.filter(function(f){return f})}function Ad(e){var t=new Set([Di(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Gb(function(n){n.mimeType&&t.add(Di(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function yZ(e,t,n){var r,u;return Re(function(c){return c.g==1?(r=t.map(function(f){var h,v;return Re(function(A){if(A.g==1)return e.g.disableThumbnails?A.return(null):(ce(A,2),R(A,IZ(e,f),4));if(A.g!=2)return h=A.h,A.return(h.stream);if(v=Ce(A),e.g.hls.ignoreImageStreamFailures)return A.return(null);throw v})}).concat(n.map(function(f){if(e.g.disableThumbnails)return null;try{var h=UM(e,f);return h.stream.type!=="image"?null:h.stream}catch(v){if(e.g.hls.ignoreImageStreamFailures)return null;throw v}})),R(c,Promise.all(r),2)):(u=c.h,c.return(u.filter(function(f){return f})))})}function EZ(e,t,n){t=t.filter(function(h){var v=$n(h,"URI")||"";return $n(h,"TYPE")!="SUBTITLES"&&v!=""});var r={};t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=SM(u,!e.j);r[c]?r[c].push(u):r[c]=[u]}for(var f in r)FM(e,r[f],n)}function _Z(e,t){return t.map(function(n){return n=UM(e,n),n.stream.type!=="video"?null:n.stream}).filter(function(n){return n})}function TZ(e,t,n,r,u,c,f){var h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An,Vn,Qn,ar,Ar,Qr,Yr,Si,Pr;return Re(function(Fr){switch(Fr.g){case 1:if(h=[],v=new Set,!(0<n.length)){Fr.u(2);break}A=m(n),N=A.next();case 3:if(N.done){Fr.u(2);break}if(B=N.value,z=Ur(B,"METHOD"),J=$n(B,"KEYFORMAT")||"identity",fe=null,z=="NONE"){Fr.u(4);break}if(oy(z)){pe=Kl(u(),Ur(B,"URI"),c),Ee=pe.sort().join(""),e.L.has(Ee)||(Le=Bi(pe,e.g.retryParameters),Fe=pl(e,Le,6).promise,e.L.set(Ee,Fe)),Fr.u(4);break}if(J!="identity"){fe=(it=nD[J])?it(B,""):null,Fr.u(6);break}return R(Fr,eD(e,B,"",u,null,c),9);case 9:fe=Fr.h;case 6:if(fe){if(fe.keyIds)for(Ue=m(fe.keyIds),Qe=Ue.next();!Qe.done;Qe=Ue.next())rt=Qe.value,v.add(rt);h.push(fe)}case 4:N=A.next(),Fr.u(3);break;case 2:for(dt={},gt=m(t),kt=gt.next();!kt.done;kt=gt.next())It=kt.value,Ut=SM(It,!e.j),dt[Ut]?dt[Ut].push(It):dt[Ut]=[It];Nt=[];for(nn in dt)Kt=dt[nn],$t=Kt[0],En=$n($t,"FRAME-RATE"),An=Number($n($t,"AVERAGE-BANDWIDTH"))||Number(Ur($t,"BANDWIDTH")),Vn=$n($t,"RESOLUTION"),Qn=m(Vn?Vn.split("x"):[null,null]),ar=Qn.next().value,Ar=Qn.next().value,Qr=$n($t,"VIDEO-RANGE"),(Yr=$n($t,"REQ-VIDEO-LAYOUT"))&&Yr.includes(",")&&(Si=Yr.split(",").filter(function(si){return si=="CH-STEREO"||si=="CH-MONO"}),Yr=Si[0]),Yr=Yr||"CH-MONO",Pr=SZ(e,Kt,r),Nt.push.apply(Nt,T(wZ(e,Pr.audio,Pr.video,An,ar,Ar,En,Qr,Yr,h,v,f)));return Fr.return(Nt.filter(function(si){return si!=null}))}})}function SZ(e,t,n){for(var r={audio:[],video:[]},u=new Map,c=[],f=!1,h=!1,v=m(t),A=v.next();!A.done;A=v.next()){var N=A.value;A=$n(N,"AUDIO");var B=$n(N,"VIDEO"),z=A||B;z&&(c.includes(z)||c.push(z),(N=$n(N,"PATHWAY-ID"))&&u.set(z,N),A?f=!0:B&&(h=!0))}c.length&&n.length&&(v=n.filter(function(pe){return c.includes(Ur(pe,"GROUP-ID"))}),EZ(e,v,u)),v=(u=c.sort().join(","))&&e.H.has(u)?e.H.get(u):[],f?r.audio.push.apply(r.audio,T(v)):h&&r.video.push.apply(r.video,T(v)),A=!1;var J=t.map(function(pe){return Ur(pe,"URI")});if(h=r.audio.find(function(pe){return pe&&pe.M().find(function(Ee){return J.includes(Ee)})}),f=PM(e,t[0]),B=bo("video",f),(z=bo("audio",f))&&!B?(h="audio",A=0<r.audio.length):!r.audio.length&&!r.video.length&&z&&B?(h="video",f=[[B,z].join()]):r.audio.length&&h?(h="audio",A=!0):h=r.video.length&&!r.audio.length?"audio":"video",!A){var fe=N=z=B=A=null;!v.length&&(n=n.find(function(pe){var Ee=$n(pe,"URI")||"",Le=$n(pe,"TYPE");return pe=Ur(pe,"GROUP-ID"),Le!="SUBTITLES"&&Ee==""&&c.includes(pe)}))&&(A=$n(n,"LANGUAGE"),B=$n(n,"NAME"),z=OM(n),kM(n),N=$n(n,"CHARACTERISTICS"),fe=LM(n)),e=bZ(e,t,f,h,A,B,z,N,fe),u&&(e.stream.groupId=u),r[e.stream.type]=[e]}return r}function PM(e,t){var n=$n(t,"CODECS")||"";return t=$n(t,"SUPPLEMENTAL-CODECS"),e.fa=0<n.length,e.fa||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(r){return r.split("/")[0]}),e.push.apply(e,T(t))),d1(e)}function OM(e){return(e=$n(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function LM(e){return(e=$n(e,"SAMPLE-RATE"))?parseInt(e,10):null}function kM(e){return(e=$n(e,"CHANNELS"))?e.includes("/JOC"):!1}function wZ(e,t,n,r,u,c,f,h,v,A,N,B){for(var z=m(n),J=z.next();!J.done;J=z.next())QM(J.value.stream,u,c,f,h,v,null);for(u=e.g.disableAudio,(!t.length||u)&&(t=[null]),u=e.g.disableVideo,(!n.length||u)&&(n=[null]),u=[],t=m(t),c=t.next();!c.done;c=t.next())for(c=c.value,f=m(n),h=f.next();!h.done;h=f.next()){var fe=h.value;(h=c?c.stream:null)&&(h.drmInfos=A,h.keyIds=N),(v=fe?fe.stream:null)&&(v.drmInfos=A,v.keyIds=N,zh(v,B)),v&&!h&&(v.bandwidth=r),!v&&h&&(h.bandwidth=r),z=c?c.stream.drmInfos:null,J=fe?fe.stream.drmInfos:null,fe=fe?fe.M().sort().join(","):"";var pe=c?c.M().sort().join(","):"";fe=fe+" - "+pe,h&&v&&!fr(z,J)||e.vb.has(fe)||(h={id:e.C++,language:h?h.language:"und",disabledUntilTime:0,primary:!!h&&h.primary||!!v&&v.primary,audio:h,video:v,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(h),e.vb.add(fe))}return u}function AZ(e,t){t=IM(t,"CLOSED-CAPTIONS"),e.T=t.length==0,t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=$n(r,"LANGUAGE");n=Or(u||"und"),u||(u=$n(r,"NAME"))&&(n=u),u=Ur(r,"GROUP-ID"),r=Ur(r,"INSTREAM-ID").replace("SERVICE","svc"),e.F.get(u)||e.F.set(u,new Map),e.F.get(u).set(r,n)}}function FM(e,t,n){for(var r=[],u=[],c=new Map,f=m(t),h=f.next();!h.done;h=f.next()){var v=h.value;h=Ur(v,"URI"),v=Ur(v,"GROUP-ID"),r.push(h),u.push(v),c.set(v,h)}if(f=u.sort().join(","),h=t[0],t="",v=Ur(h,"TYPE").toLowerCase(),v=="subtitles"&&(v=_r),v==_r)t=$n(h,"CODECS")||"";else{u=m(u);for(var A=u.next();!A.done;A=u.next())if(A=A.value,e.G.has(A)){t=e.G.get(A);break}}if(u=r.sort().join(","),e.i.has(u))return e.i.get(u);if(A=e.C++,e.j){c=m(c);for(var N=c.next();!N.done;N=c.next()){var B=m(N.value);N=B.next().value,B=B.next().value,(N=n.get(N))&&Td(e.j,A,N,B)}}n=$n(h,"LANGUAGE"),c=$n(h,"NAME"),N=$n(h,"DEFAULT")=="YES",B=v=="audio"?OM(h):null;var z=v=="audio"?kM(h):!1,J=$n(h,"CHARACTERISTICS"),fe=$n(h,"FORCED")=="YES";return h=v=="audio"?LM(h):null,r=ny(e,A,r,t,v,n,N,c,B,null,J,fe,h,z),r.stream&&(r.stream.groupId=f),e.H.has(f)?e.H.get(f).push(r):e.H.set(f,[r]),e.i.set(u,r),r}function IZ(e,t){var n,r,u,c,f,h,v,A,N,B;return Re(function(z){return z.g==1?(n=Ur(t,"URI"),r=$n(t,"CODECS","jpeg")||"",e.i.has(n)?z.return(e.i.get(n)):(u=$n(t,"LANGUAGE"),c=$n(t,"NAME"),f=$n(t,"CHARACTERISTICS"),h=ny(e,e.C++,[n],r,"image",u,!1,c,null,null,f,!1,null,!1),(v=$n(t,"RESOLUTION"))?R(z,h.stream.createSegmentIndex(),3):z.u(2))):(z.g!=2&&(A=eu(h.stream.segmentIndex),N=A.tilesLayout)&&(h.stream.width=Number(v.split("x")[0])*Number(N.split("x")[0]),h.stream.height=Number(v.split("x")[1])*Number(N.split("x")[1])),(B=$n(t,"BANDWIDTH"))&&(h.stream.bandwidth=Number(B)),e.i.set(n,h),z.return(h))})}function UM(e,t){var n="video",r=Ur(t,"URI"),u=$n(t,"CODECS")||"";if(u=="mjpg"&&(n="image"),e.i.has(r))return e.i.get(r);var c=$n(t,"LANGUAGE"),f=$n(t,"NAME"),h=$n(t,"CHARACTERISTICS");return n=ny(e,e.C++,[r],u,n,c,!1,f,null,null,h,!1,null,!1),u=$n(t,"RESOLUTION"),c=m(u?u.split("x"):[null,null]),u=c.next().value,c=c.next().value,n.stream.width=Number(u)||void 0,n.stream.height=Number(c)||void 0,(t=$n(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(r,n),n}function bZ(e,t,n,r,u,c,f,h,v){for(var A=e.C++,N=[],B=m(t),z=B.next();!z.done;z=B.next()){var J=z.value;z=Ur(J,"URI"),J=$n(J,"PATHWAY-ID"),e.j&&J&&Td(e.j,A,J,z),N.push(z)}if(B=N.sort().join(","),e.i.has(B))return e.i.get(B);e:{if(t=$n(t[0],"CLOSED-CAPTIONS"),r=="video"){if(e.g.disableText){e.T=!1,t=null;break e}if(t){if(t!="NONE"){t=e.F.get(t);break e}e.T=!1}else if(!t&&e.F.size)for(t=m(e.F.keys()).next();!t.done;){t=e.F.get(t.value);break e}}t=null}return n=Ol(r,n),r=ny(e,A,N,n,r,u,!1,c,f,t,h,!1,v,!1),e.i.set(B,r),r}function ny(e,t,n,r,u,c,f,h,v,A,N,B,z,J){function fe(Qe){var rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An,Vn,Qn,ar,Ar,Qr,Yr,Si,Pr,Fr,si,Ns;return Re(function(Wi){switch(Wi.g){case 1:return rt=Mi,ce(Wi,2),dt=Fe.M(),R(Wi,Qe.promise,4);case 4:if(gt=Wi.h,Qe.aborted)return Wi.return();if(kt=gt.uri,kt==gt.originalUri||dt.includes(kt)||Le.push(kt),It=y_(e.Ta,gt.data),It.type!=1)throw new Xe(2,4,4017);return Ut=ts(It.W,"EXT-X-DEFINE"),Nt=w_(e,Ut,kt),nn=!1,(!e.fa&&e.g.hls.disableCodecGuessing||e.T&&u==rt.ja&&!e.g.hls.disableClosedCaptionsDetection)&&0<It.segments.length&&(e.T=!1,nn=!0),Kt=!e.fa&&e.g.hls.disableCodecGuessing,$t=pa(e),R(Wi,ZM(e,0,Nt,It,pe,r,u,c,f,h,v,A,N,B,z,J,void 0,nn,Kt),5);case 5:if(En=Wi.h,Qe.aborted)return Wi.return();if(An=En.stream,KM(e,It),pa(e)&&!$t&&zM(e,It),Fe.rc=En.rc,Fe.Kb=En.Kb,Fe.Dd=En.Dd,Fe.Cd=En.Cd,Fe.dd=En.dd,Fe.Vd=En.Vd,Fe.pb=En.pb,Fe.qb=En.qb,Fe.wf=!0,Ee.segmentIndex=An.segmentIndex,Ee.encrypted=An.encrypted,Ee.drmInfos=An.drmInfos,Ee.keyIds=An.keyIds,Ee.mimeType=An.mimeType,Ee.bandwidth=Ee.bandwidth||An.bandwidth,Ee.codecs=Ee.codecs||An.codecs,Ee.closedCaptions=Ee.closedCaptions||An.closedCaptions,Ee.width=Ee.width||An.width,Ee.height=Ee.height||An.height,Ee.hdr=Ee.hdr||An.hdr,Ee.colorGamut=Ee.colorGamut||An.colorGamut,Ee.frameRate=Ee.frameRate||An.frameRate,Ee.language=="und"&&An.language!="und"&&(Ee.language=An.language),Ee.language=Ee.language||An.language,Ee.channelsCount=Ee.channelsCount||An.channelsCount,Ee.audioSamplingRate=Ee.audioSamplingRate||An.audioSamplingRate,Ad(Ee),Ee.drmInfos.length&&e.h.newDrmInfo(Ee),Vn=!1,(!A&&Ee.closedCaptions||A&&Ee.closedCaptions&&A.size!=Ee.closedCaptions.size)&&(Vn=!0),e.m&&Vn&&e.h.makeTextStreamsForClosedCaptions(e.m),u==rt.ja||u==rt.Y)for(Qn=m(e.i.values()),ar=Qn.next();!ar.done;ar=Qn.next())Ar=ar.value,Ar.wf||Ar.type!=u||(Ar.stream.mimeType=An.mimeType,Ad(Ar.stream));u==rt.wa&&(Qr=eu(An.segmentIndex))&&Qr.$&&(Ee.mimeType="application/mp4",Ad(Ee)),Yr=iv(Ee),Ee.segmentIndex.Gb(function(Fa){Fa.$&&(Fa.$.Kc=Yr)}),CZ(e)&&(e.$b?A_(e,[Fe]):(e.$b=!0,Si=Array.from(e.i.values()),Pr=Si.filter(function(Fa){return Fa.stream.segmentIndex}),A_(e,Pr),S_(e),Fr=e.o,0<Fr&&e.B.Z(Fr))),b_(e,It.W,Ee.type,Nt,pe),e.m&&(e.m.startTime=e.s),me(Wi,0);break;case 2:if(si=Ce(Wi),Ee.closeSegmentIndex(),si.code===7001)return Wi.return();if(Ns=e.h.disableStream(Ee),!Ns)throw si;X(Wi)}})}function pe(){return e.j&&1<n.length?Mp(e.j,t):Le.concat(bM([e.N],n,e.A))}var Ee=GM(e,r,u,c,f,h,v,A,N,B,z,J),Le=[],Fe={stream:Ee,type:u,Qg:Le,M:pe,rc:0,Kb:0,Vd:new Map,Dd:!1,Cd:!1,dd:!1,Qe:-1,pb:-1,qb:-1,wf:!1},it=null,Ue;return Ee.createSegmentIndex=function(){return it||(Ue=R_(e,Fe.M(),!0),it=new Promise(function(Qe){Qe(fe(Ue))}))},Ee.closeSegmentIndex=function(){it&&!Ee.segmentIndex&&Ue.abort(),Ee.segmentIndex&&(Ee.segmentIndex.release(),Ee.segmentIndex=null),it=null},Fe}function BM(e){var t=1/0;e=m(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.Kb));return t}function jM(e,t){var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.Gb(function(u){n.push(u)});e.l.qd(n)}function A_(e,t){if(!pa(e))for(var n=BM(e),r=m(t),u=r.next();!u.done;u=r.next())u.value.stream.segmentIndex.Ec(0,n);jM(e,t.map(function(c){return c.stream})),e.g.hls.ignoreManifestProgramDateTime?MM(e,t):(cZ(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&MM(e,t))}function Bp(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function CZ(e){if(!e.m)return!1;var t=[],n=[];e=m(e.m.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(u){return u.segmentIndex})||0<n.length&&!n.some(function(u){return u.segmentIndex}))}function ZM(e,t,n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe){Le=Le===void 0?!0:Le,Fe=Fe===void 0?!0:Fe;var it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En,An,Vn,Qn,ar,Ar,Qr,Yr,Si,Pr,Fr,si,Ns,Wi,Fa,ss;return Re(function($i){switch($i.g){case 1:if(it=r.segments||[],Ue=it.every(function(Ms){return!!ho(Ms.W,"EXT-X-GAP")}),!it.length||Ue)throw new Xe(2,4,4053);if(RZ(e,r),pa(e)&&I_(e,r),Qe=pa(e)?e.O.get(f):new Map,rt=$M(e,r,Qe,n,u,f),dt=rt.segments,gt=rt.bandwidth,nn=Nt=Ut=It=kt=null,!(0<dt.length&&Le)){$i.u(2);break}return R($i,dZ(e,dt),3);case 3:Kt=$i.h,f=Kt.type,h=Kt.language,N=Kt.channelCount,fe=Kt.sampleRate,e.g.disableText||(B=Kt.closedCaptions),It=Kt.height,kt=Kt.width,Ut=Kt.vd,Nt=Kt.colorGamut,nn=Kt.frameRate,Fe&&(Ee=Kt.mimeType,c=Kt.codecs);case 2:if(Ee){$i.u(4);break}return R($i,MZ(e,f,c,dt),5);case 5:Ee=$i.h;case 4:return R($i,HM(e,r,Ee,u,n),6);case 6:if($t=$i.h,En=$t.drmInfos,An=$t.keyIds,Vn=$t.encrypted,Qn=$t.uh,Vn&&!En.length&&!Qn)throw new Xe(2,4,4026);return ar=GM(e,c,f,h,v,A,N,B,z,J,fe,pe),ar.encrypted=Vn,ar.drmInfos=En,ar.keyIds=An,ar.mimeType=Ee,gt&&(ar.bandwidth=gt),Ad(ar),f=="video"&&(kt||It||Ut||Nt)&&QM(ar,kt,It,nn,Ut,null,Nt),pa(e)&&I_(e,r),Ar=dt[0].startTime,Qr=dt[dt.length-1],Yr=Qr.endTime,Si=new Mr(dt),ar.segmentIndex=Si,Fr=(Pr=ho(r.W,"EXT-X-SERVER-CONTROL"))?Up(Pr,"CAN-SKIP-UNTIL")!=null:!1,si=Pr?Up(Pr,"CAN-BLOCK-RELOAD")!=null:!1,Ns=wd(r.W,"EXT-X-MEDIA-SEQUENCE",0),Wi=qM(Ns,dt),Fa=Wi.pb,ss=Wi.qb,$i.return({stream:ar,type:f,Qg:[],M:u,rc:Ar,Kb:Yr,Dd:Fr,Cd:si,dd:!1,Qe:-1,pb:Fa,qb:ss,Vd:Qe,wf:!1})}})}function qM(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{pb:e,qb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].isPreload()||(e++,n=0),{pb:e,qb:n}):(e++,t.m&&(n=0),{pb:e,qb:n})}function GM(e,t,n,r,u,c,f,h,v,A,N,B){var z=C_(n,t)||ry(n),J=[];if(v){v=m(v.split(","));for(var fe=v.next();!fe.done;fe=v.next())J.push(fe.value)}return v=void 0,fe=null,n==_r?v=J.includes("public.accessibility.transcribes-spoken-dialog")&&J.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":J.includes("public.accessibility.describes-video")&&(fe="visually impaired"),J.length||v!=="subtitle"||J.push("subtitle"),e={id:e.C++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:z,codecs:t,kind:n==_r?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Or(r||"und"),originalLanguage:r,label:c,type:n,primary:u,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:J,forced:A,channelsCount:f,audioSamplingRate:N,spatialAudio:B,closedCaptions:h,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:fe,external:!1,fastSwitching:!1,fullMimeTypes:new Set},Ad(e),e}function HM(e,t,n,r,u){var c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t,En;return Re(function(An){switch(An.g){case 1:if(c=new Map,t.segments){for(f=m(t.segments),h=f.next();!h.done;h=f.next())if(v=h.value,A=ts(v.W,"EXT-X-KEY"),N=null,A.length)for(N=YM(e,t,v.W,r,u),B=m(A),z=B.next();!z.done;z=B.next())J=z.value,c.set(J,N)}pe=fe=!1,Ee=[],Le=new Set,Fe=m(c),it=Fe.next();case 2:if(it.done){An.u(4);break}if(Ue=it.value,Qe=m(Ue),rt=Qe.next().value,dt=Qe.next().value,gt=rt,kt=dt,It=Ur(gt,"METHOD"),It=="NONE"){An.u(3);break}if(fe=!0,Ut=$n(gt,"KEYFORMAT")||"identity",Nt=null,oy(It)){pe=!0,An.u(3);break}if(Ut!="identity"){Nt=(nn=nD[Ut])?nn(gt,n):null,An.u(6);break}return R(An,eD(e,gt,n,r,kt,u),8);case 8:Nt=An.h;case 6:if(Nt){if(Nt.keyIds)for(Kt=m(Nt.keyIds),$t=Kt.next();!$t.done;$t=Kt.next())En=$t.value,Le.add(En);Ee.push(Nt)}case 3:it=Fe.next(),An.u(2);break;case 4:return An.return({drmInfos:Ee,keyIds:Le,encrypted:fe,uh:pe})}})}function VM(e,t,n,r,u){if(!g.crypto||!g.crypto.subtle)throw Ke("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new Xe(2,4,4042);var c=0,f=$n(t,"IV","");if(f){var h=$u(f.substr(2));if(h.byteLength!=16)throw new Xe(2,4,4048)}else c=wd(n.W,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+c,!e.ka.has(n)){var v={bitsKey:128,blockCipherMode:"CBC",iv:h,firstMediaSequenceNumber:c};switch(Ur(t,"METHOD")){case"AES-256":v.bitsKey=256;break;case"AES-256-CTR":v.bitsKey=256,v.blockCipherMode="CTR"}v.fetchKey=function(){var A,N,B,z,J,fe;return Re(function(pe){if(pe.g==1)return A=Kl(r(),Ur(t,"URI"),u),N=A.sort().join(""),e.L.has(N)||(B=Bi(A,e.g.retryParameters),z=pl(e,B,6).promise,e.L.set(N,z)),R(pe,e.L.get(N),2);if(pe.g!=3){if(J=pe.h,!J.data||J.data.byteLength!=v.bitsKey/8)throw new Xe(2,4,4049);return fe={name:v.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:v.bitsKey},R(pe,g.crypto.subtle.importKey("raw",J.data,fe,!0,["decrypt"]),3)}v.cryptoKey=pe.h,v.fetchKey=void 0,X(pe)})},e.ka.set(n,v)}return e.ka.get(n)}function KM(e,t){e.s==null&&(t=ho(t.W,"EXT-X-START"))&&(e.s=Number(Ur(t,"TIME-OFFSET")))}function RZ(e,t){var n=ho(t.W,"EXT-X-PLAYLIST-TYPE");t=ho(t.W,"EXT-X-ENDLIST"),t=n&&n.value=="VOD"||t,n=n&&n.value=="EVENT"&&!t,n=!t&&!n,t?iy(e,ay):n?iy(e,sy):iy(e,rD)}function I_(e,t){var n=1/0,r=t.segments;if(r.length)for(var u=r.length-1;0<=u;){var c=ho(r[u].W,"EXTINF");if(c){n=Number(c.value.split(",")[0]);break}u--}if(r=ho(t.W,"EXT-X-TARGETDURATION"),!r)throw new Xe(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(u=ho(t.W,"EXT-X-PART-INF"))&&(e.X=Number(Ur(u,"PART-TARGET"))),t=ho(t.W,"EXT-X-SERVER-CONTROL"),e.K&&e.X?(e.o=e.Hb?5*e.X<=n?Math.min(e.X,e.o):Math.min(n,e.o):Math.min(e.X,e.o),e.Fa=t?Number(Ur(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?Up(t,"HOLD-BACK"):null,e.Ea=n?Number(n.value):0),e.bb=Math.max(r,e.bb)}function zM(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.Fa)n=e.Fa;else if(e.Ea)n=e.Ea;else{var r=t.segments.length,u=e.g.hls.liveSegmentsDelay;for(u>r-2&&(u=Math.max(1,r-2)),u=r-u;u<r;u++){var c=ho(t.segments[u].W,"EXTINF");n=c?n+Math.ceil(Number(c.value.split(",")[0])):n+e.bb}}e.s&&0>e.s&&(n=Math.min(-e.s,n),e.s+=n),e.l.$g(0),e.l.Of(n),e.l.vc(!1)}function YM(e,t,n,r,u){var c=ho(n,"EXT-X-MAP");if(!c)return null;var f=Ur(c,"URI"),h=Kl(r(),f,u);if(f=[h.toString(),$n(c,"BYTERANGE","")].join("-"),!e.ta.has(f)){var v=void 0,A=null;n=m(n);for(var N=n.next();!N.done;N=n.next())N=N.value,N.name=="EXT-X-KEY"?oy(Ur(N,"METHOD"))&&N.id<c.id&&(v=VM(e,N,t,r,u)):N.name=="EXT-X-BYTERANGE"&&N.id<c.id&&(A=N);t=xZ(h,c,A,v),e.ta.set(f,t)}return e.ta.get(f)}function xZ(e,t,n,r){var u=0,c=null;return t=$n(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(u=t.split("@"),c=Number(u[0]),u=Number(u[1]),c=u+c-1,r&&(n=c+1-u,n%16&&(c+=16-n%16))),new Dn(function(){return e},u,c,null,null,null,r)}function NZ(e,t,n,r,u,c,f,h,v){function A(Vn){Vn=new Ei(Vn).Pa.split(".").pop();var Qn=N_[f][Vn];return Qn||(Qn=x_[Vn]),Qn}var N=r.W,B=ho(N,"EXTINF"),z=0,J=0,fe=null;r.Ab.length&&(e.m.isLowLatency=!0);var pe=null;if(!e.g.hls.ignoreManifestProgramDateTime){var Ee=ho(N,"EXT-X-PROGRAM-DATE-TIME");Ee&&Ee.value&&(pe=_s(Ee.value))}var Le=Ve;if(ho(N,"EXT-X-GAP")&&(e.m.gapCount++,Le=2),!B){if(r.Ab.length==0)throw new Xe(2,4,4024,"EXTINF");if(!e.K)return null}var Fe=[];Ee=!1;var it=null,Ue=!1,Qe=!1;if(e.K&&r.Ab.length){z=t&&g.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var rt=pe,dt={},gt=0;gt<r.Ab.length;dt={ue:void 0,de:void 0},gt++){var kt=r.Ab[gt],It=gt==0?n:Fe[Fe.length-1],Ut=gt==0?u:It.endTime,Nt=Number($n(kt,"DURATION"))||e.X;if(Nt){var nn=Ut+Nt,Kt=0,$t=null;if(kt.name=="EXT-X-PRELOAD-HINT"?(Kt=(Kt=$n(kt,"BYTERANGE-START"))?Number(Kt):0,(It=$n(kt,"BYTERANGE-LENGTH"))?$t=Kt+Number(It)-1:Kt&&($t=Number.MAX_SAFE_INTEGER)):(Kt=$n(kt,"BYTERANGE"),$t=m(WM(It,Kt)),Kt=$t.next().value,$t=$t.next().value),dt.de=$n(kt,"URI"),dt.de){It=Ve,$n(kt,"GAP")=="YES"&&(e.m.gapCount++,It=2,Ue=!0),dt.ue=null;var En=function(Vn){return function(){return Vn.ue==null&&(Vn.ue=Kl(h(),Vn.de,c)),Vn.ue}}(dt);z&&0<=Kt&&$t!=null&&(it=En,Ee=!0),Ut=new et(Ut,nn,En,Kt,$t,t,0,0,1/0,[],"",null,rt,It,v),kt.name=="EXT-X-PRELOAD-HINT"&&(Ut.xf(),Qe=!0),$n(kt,"INDEPENDENT")!="YES"&&0<gt&&Ut.Jc(),(dt=A(dt.de))&&(Ut.mimeType=dt,tD.has(dt)&&(Ut.$=null)),Fe.push(Ut),rt&&(rt+=Nt)}}}}if(B){if(B=Number(B.value.split(",")[0]),B==0)return null;z=u+B}else if(Fe.length)z=Fe[Fe.length-1].endTime;else return null;Ee&&(Ue||Fe[0].Ha!=0?(Ee=!1,it=null):Fe=[]),(B=ho(N,"EXT-X-BYTERANGE"))?(fe=m(WM(n,B.value)),J=fe.next().value,fe=fe.next().value):Fe.length&&(J=Fe[0].Ha,fe=Fe[Fe.length-1].va),n="",B=null,f=="image"&&(n="1x1",N=ho(N,"EXT-X-TILES"))&&(n=Ur(N,"LAYOUT"),(N=$n(N,"DURATION"))&&(B=Number(N)));var An=null;return t=new et(u,z,function(){return it?it():(An==null&&(An=Kl(h(),r.g,c)),An||[])},J,fe,t,0,0,1/0,Fe,n,B,pe,Le,v,0<Fe.length&&!!r.g),(u=A(r.g))&&(t.mimeType=u,tD.has(u)&&(t.$=null)),Ee&&(e.Hb=!0,t.Fg(),Qe&&t.xf()),t}function WM(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.va+1,r=n+t-1),[n,r]}function b_(e,t,n,r,u){if(n=="video"||n=="audio"){var c=e.l.m;if(c&&!Bp(e,n))for(t=ts(t,"EXT-X-DATERANGE"),t=t.sort(function(pe,Ee){return pe=Ur(pe,"START-DATE"),Ee=Ur(Ee,"START-DATE"),pe<Ee?-1:pe>Ee?1:0}),n=0;n<t.length;n++){var f=t[n],h=Ur(f,"ID");if(!e.Da.has(h)){var v=Ur(f,"START-DATE"),A=_s(v);if(!isNaN(A)){v=Math.max(0,A-c);var N=null,B=$n(f,"END-DATE");if(B&&(B=_s(B),!isNaN(B)&&(N=B-c,0>N))||N==null&&(B=$n(f,"DURATION")||$n(f,"PLANNED-DURATION"))&&(B=parseFloat(B),isNaN(B)||(N=v+B),0>A-c+B))continue;B=$n(f,"CLASS")||"com.apple.quicktime.HLS";var z=$n(f,"END-ON-NEXT")=="YES";if(N==null&&z){for(z=n+1;z<t.length;z++){var J=$n(t[z],"CLASS")||"com.apple.quicktime.HLS";if(B==J&&(J=Ur(t[z],"START-DATE"),J=_s(J),!isNaN(J)&&J&&J>A)){N=Math.max(0,J-c);break}}if(N==null)continue}for(A=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"],z=[],f=m(f.attributes),J=f.next();!J.done;J=f.next())if(J=J.value,!A.includes(J.name)){var fe=CM(J.value,r);(J.name=="X-ASSET-URI"||J.name=="X-ASSET-LIST")&&(fe=Kl(u(),J.value,r)[0]),z.push({key:J.name,description:"",data:fe,mimeType:null,pictureType:null})}1<z.length&&e.h.onMetadata(B,v,N,z),e.Da.add(h)}}}}}function $M(e,t,n,r,u,c){var f=t.segments,h=void 0,v=wd(t.W,"EXT-X-DISCONTINUITY-SEQUENCE",0),A=wd(t.W,"EXT-X-MEDIA-SEQUENCE",0),N=ho(t.W,"EXT-X-SKIP"),B=N?Number($n(N,"SKIPPED-SEGMENTS")):0,z=A+B,J=0;pa(e)&&n.has(z)&&(J=n.get(z)),J===0&&e.za==sy&&0<n.size&&!n.has(z)&&e.l.i!=null&&(J=e.l.nb());var fe=[],pe=null;N=[];for(var Ee=0;Ee<f.length;Ee++){var Le=f[Ee],Fe=Ee==0?J:pe.endTime;z=A+B+Ee,ho(Le.W,"EXT-X-DISCONTINUITY")&&v++;for(var it=m(Le.W),Ue=it.next();!Ue.done;Ue=it.next())Ue=Ue.value,Ue.name=="EXT-X-KEY"&&(oy(Ur(Ue,"METHOD"))?h=VM(e,Ue,t,u,r):h=void 0);n.set(z,Fe),it=YM(e,t,Le.W,u,r),!e.K&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.K=e.h.isLowLatencyMode()),(Fe=NZ(e,it,pe,Le,Fe,r,c,u,h))&&((pe=wd(Le.W,"EXT-X-BITRATE"))?N.push({bitrate:pe,duration:Fe.endTime-Fe.startTime}):N.length&&(pe=N.pop(),pe.duration+=Fe.endTime-Fe.startTime,N.push(pe)),pe=Fe,Fe.i=v,Bp(e,c)&&e.I!=null&&z<e.I||fe.push(Fe))}if(t=void 0,N.length&&(t=N.reduce(function(Qe,rt){return Qe+rt.duration},0),t=Math.round(N.reduce(function(Qe,rt){return Qe+rt.bitrate*rt.duration},0)/t*1e3)),N=fe.some(function(Qe){return Qe.h!=null})){for(n={},r=0;r<fe.length;n={Hd:void 0,Gd:void 0,yd:void 0,tc:void 0,xd:void 0},r++)if(n.tc=fe[r],n.tc.h==null)for(n.Gd=0,n.Hd=r,u=function(Qe){return function(){var rt=fe[Qe.Hd];if(rt){if(rt.h!=null)return rt.h+Qe.Gd;Qe.Gd-=rt.endTime-rt.startTime,Qe.Hd+=1}return null}}(n),n.xd=0,n.yd=r,f=function(Qe){return function(){var rt=fe[Qe.yd];if(rt){if(rt!=Qe.tc&&(Qe.xd+=rt.endTime-rt.startTime),rt.h!=null)return rt.h+Qe.xd;--Qe.yd}return null}}(n);n.tc.h==null;)n.tc.h=f(),n.tc.h==null&&(n.tc.h=u())}if(N)for(n=m(fe),r=n.next();!r.done;r=n.next())for(u=r.value,r=u.h,u=m(u.g),f=u.next();!f.done;f=u.next())f=f.value,f.h=r,r+=f.endTime-f.startTime;if(n=e.ga,N&&n!=1/0&&!Bp(e,c))for(e=m(fe),c=e.next();!c.done;c=e.next())c.value.Uf(n);return{segments:fe,bandwidth:t}}function C_(e,t){if(e==_r){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function ry(e){return e==_r?"text/vtt":N_[e].mp4}function XM(e,t){e=pa(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.Zb()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function MZ(e,t,n,r){var u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le;return Re(function(Fe){switch(Fe.g){case 1:return u=Wa,c=XM(e,r),f=c.segment,f.status==2?Fe.return(ry(t)):(h=f.M(),v=new Ei(h[0]),A=v.Pa.split(".").pop(),N=N_[t],(B=N[A])||(B=x_[A])||(B=C_(t,n))?Fe.return(B):(J=1,fe=Bi(h,e.g.retryParameters),ce(Fe,2),fe.method="HEAD",R(Fe,pl(e,fe,u,{type:J}).promise,4)));case 4:pe=Fe.h,z=pe.headers["content-type"],me(Fe,3);break;case 2:if(Ee=Ce(Fe),!Ee||Ee.code!=1002&&Ee.code!=1001){Fe.u(3);break}return fe.method="GET",R(Fe,pl(e,fe,u,{type:J}).promise,6);case 6:Le=Fe.h,z=Le.headers["content-type"];case 3:return z?Fe.return(z.toLowerCase().split(";")[0]):Fe.return(ry(t))}})}function QM(e,t,n,r,u,c,f){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=u||void 0,e.videoLayout=c||void 0,e.colorGamut=f||void 0)}function R_(e,t,n){return pl(e,Bi(t,e.g.retryParameters),0,{type:n?2:3})}function JM(e){var t,n,r,u,c,f;return Re(function(h){switch(h.g){case 1:return e.h?(ce(h,2),t=Date.now(),R(h,e.update(),4)):h.return();case 4:n=Date.now(),pa(e)&&(r=(n-t)/1e3,e.Eb.sample(1,r),u=e.o,c=Math.max(0,u-G(e.Eb)),e.B.Z(c)),me(h,3);break;case 2:if(f=Ce(h),!e.h)return h.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(f),h.return();f.severity=1,e.h.onError(f),e.B.Z(.1);case 3:if(!e.h)return h.return();e.h.onManifestUpdated(),X(h)}})}function pa(e){return e.za!=ay}function iy(e,t){e.za=t,e.l&&e.l.vc(!pa(e)),pa(e)||e.B.stop()}function pl(e,t,n,r){if(!e.ea)throw new Xe(2,7,7001);return r||(r={}),r.isPreload=e.Fb(),t=e.h.networkingEngine.request(n,t,r),il(e.ea,t),t}function oy(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function eD(e,t,n,r,u,c){var f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue;return Re(function(Qe){switch(Qe.g){case 1:if(n=="video/mp2t")throw new Xe(2,4,4040);if(Tr())throw new Xe(2,4,4041);if(f=Ur(t,"METHOD"),h=["SAMPLE-AES","SAMPLE-AES-CTR"],!h.includes(f))return Qe.return(null);if(v=Kl(r(),Ur(t,"URI"),c),v[0].startsWith("data:text/plain;base64,")){A=za(Wo(v[0].split("data:text/plain;base64,").pop())),Qe.u(2);break}return N=v.sort().join(""),e.oa.has(N)||(B=Bi(v,e.g.retryParameters),z=pl(e,B,6).promise,e.oa.set(N,z)),R(Qe,e.oa.get(N),3);case 3:J=Qe.h,A=za(J.data);case 2:if(fe="00000000000000000000000000000000",!u){Qe.u(4);break}if(e.sa.has(u)){pe=e.sa.get(u),Qe.u(5);break}return Ee=nd(u.M(),u.Yb(),u.Wb(),e.g.retryParameters),Le=Wa,R(Qe,pl(e,Ee,Le,{type:0}).promise,6);case 6:Fe=Qe.h,pe=ij(Fe.data),e.sa.set(u,pe);case 5:pe&&(fe=pe);case 4:return it=new Map,it.set(fe,A),Ue="cenc",f=="SAMPLE-AES"&&(Ue="cbcs"),Qe.return(ym(it,Ue))}})}ne("shaka.hls.HlsParser",ty);var x_={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},N_={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},tD=new Set(["video/mp2t"].concat(T(Iu))),nD={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new Xe(2,4,4040);if(Tr())throw new Xe(2,4,4041);if(t=Ur(e,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),ws("com.apple.fps",n,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],Ur(e,"URI"))},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Ur(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=Ur(e,"URI"),t=__(t.split("?")[0]),t=nr(t.data),n=ws("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=$n(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=Ur(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=Ur(e,"URI"),e=__(e.split("?")[0]),e=nr(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Oe(e,t,new Set,0),ws("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},ay="VOD",rD="EVENT",sy="LIVE",DZ={qh:ay,oj:rD,wj:sy};Yn["application/x-mpegurl"]=function(){return new ty},Yn["application/vnd.apple.mpegurl"]=function(){return new ty};function PZ(e){var t=0,n=ln(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=nr(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function uy(e){if(e=iD(e))e:{e=m(Eo(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=Hi(t.value,"LA_URL")){e=ei(t);break e}e=""}else e="";return e}function iD(e){return e=Wo(ei(e)),e=PZ(e).filter(function(t){return t.type===OZ})[0],e?(e=ci(e.value,!0),(e=Tu(e,"WRMHEADER"))?e:null):null}var OZ=1,LZ=new Map().set("com.microsoft.playready",uy).set("com.microsoft.playready.recommendation",uy).set("com.microsoft.playready.software",uy).set("com.microsoft.playready.hardware",uy);function Id(e){if(!uD){uD=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);ly=wr("ftyp",t,r,t,n),t=wr("dref",KZ),M_=wr("dinf",t)}this.g=e}function bd(e){for(var t=[],n=m(e.g),r=n.next();!r.done;r=n.next()){var u=t,c=u.push,f=r.value;r=wr;var h=f.id+1,v=f.stream.width||0,A=f.stream.height||0;f.type=="audio"&&(A=v=0);var N=f.duration*f.timescale,B=Math.floor(N/(zl+1));switch(N=Math.floor(N%(zl+1)),h=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(mi(h,4)),[0,0,0,0],T(mi(B,4)),T(mi(N,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],T(mi(v,2)),[0,0],T(mi(A,2)),[0,0])),h=wr("tkhd",h),v=wr,B=f.duration*f.timescale,A=Math.floor(B/(zl+1)),B=Math.floor(B%(zl+1)),N=f.stream.language,N=N.charCodeAt(0)-96<<10|N.charCodeAt(1)-96<<5|N.charCodeAt(2)-96,A=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(mi(f.timescale,4)),T(mi(A,4)),T(mi(B,4)),T(mi(N,2)),[0,0])),A=wr("mdhd",A),B=f,N=new Uint8Array([]),B.type){case"video":N=FZ;break;case"audio":N=UZ}B=wr("hdlr",N);e:{switch(f.type){case"video":f=wr("minf",wr("vmhd",GZ),M_,oD(f));break e;case"audio":f=wr("minf",wr("smhd",HZ),M_,oD(f));break e}f=new Uint8Array([])}f=v("mdia",A,B,f),r=r("trak",h,f),c.call(u,r)}for(t=hi.apply(co,T(t)),c=e.g[0],n=wr,r=c.duration*c.timescale,u=Math.floor(r/(zl+1)),r=Math.floor(r%(zl+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(mi(c.timescale,4)),T(mi(u,4)),T(mi(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=wr("mvhd",u),r=[],e=m(e.g),v=e.next();!v.done;v=e.next())f=r,h=f.push,v=new Uint8Array([0,0,0,0].concat(T(mi(v.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),v=wr("trex",v),h.call(f,v);if(e=hi.apply(co,T(r)),e=wr("mvex",e),r=[],c.encrypted){for(c=m(c.stream.drmInfos),f=c.next();!f.done;f=c.next())if(f=f.value,f.initData)for(f=m(f.initData),h=f.next();!h.done;h=f.next())r.push(h.value.initData);c=hi.apply(co,T(r))}else c=new Uint8Array([]);return e=n("moov",u,t,e,c),t=new Uint8Array(ly.byteLength+e.byteLength),t.set(ly),t.set(e,ly.byteLength),t}function oD(e){var t=wr,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.ya.byteLength)var u=wr("avcC",e.ya);else{u=wr;for(var c=7,f=[],h=[],v=0,A=0,N=0,B=0;B<e.ab.length;B++){var z=sD(e.ab[B]);switch(z[0]&31){case 7:f.push(z),c+=z.length+2;break;case 8:h.push(z),c+=z.length+2}}for(0<f.length&&(v=f[0][1],N=f[0][2],A=f[0][3]),c=new Uint8Array(c),B=0,c[B++]=1,c[B++]=v,c[B++]=N,c[B++]=A,c[B++]=255,c[B++]=224|f.length,v=0;v<f.length;v++)c[B++]=(f[v].length&65280)>>8,c[B++]=f[v].length&255,c.set(f[v],B),B+=f[v].length;for(c[B++]=h.length,f=0;f<h.length;f++)c[B++]=(h[f].length&65280)>>8,c[B++]=h[f].length&255,c.set(h[f],B),B+=h[f].length;u=u("avcC",c)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(mi(n,2)),T(mi(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",h=aD(e),f=new Uint8Array([]),e.encrypted&&(f=Cd(e),r="encv"),n=wr(r,n,u,h,f)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,u=e.stream.height||0,n=new Uint8Array([]),0<e.ya.byteLength&&(n=wr("hvcC",e.ya)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(mi(r,2)),T(mi(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",h=aD(e),f=new Uint8Array([]),e.encrypted&&(f=Cd(e),u="encv"),n=wr(u,r,n,h,f));break;case"audio":e.codecs.includes("mp3")?e=wr(".mp3",jp(e)):e.codecs.includes("ac-3")?(n=wr("dac3",e.qa),r="ac-3",u=new Uint8Array([]),e.encrypted&&(u=Cd(e),r="enca"),e=wr(r,jp(e),n,u)):e.codecs.includes("ec-3")?(n=wr("dec3",e.qa),r="ec-3",u=new Uint8Array([]),e.encrypted&&(u=Cd(e),r="enca"),e=wr(r,jp(e),n,u)):e.codecs.includes("opus")?(n=wr("dOps",e.qa),r="Opus",u=new Uint8Array([]),e.encrypted&&(u=Cd(e),r="enca"),e=wr(r,jp(e),n,u)):(0<e.qa.byteLength?n=wr("esds",e.qa):(n=wr,r=e.id+1,u=e.stream.channelsCount||2,f=e.stream.audioSamplingRate||44100,v=Ol("audio",e.codecs.split(",")),A={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},h=A[f],(v==="mp4a.40.5"||v==="mp4a.40.29")&&(h=A[2*f]),f=parseInt(v.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(T(mi(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,f<<3|h>>>1,h<<7|u<<3,6,1,2])),n=n("esds",r)),r="mp4a",u=new Uint8Array([]),e.encrypted&&(u=Cd(e),r="enca"),e=wr(r,jp(e),n,u)),n=e}return e=wr("stsd",VZ,n),t("stbl",e,wr("stts",BZ),wr("stsc",jZ),wr("stsz",qZ),wr("stco",ZZ))}function aD(e){if(!e.Ba&&!e.Ca)return new Uint8Array([]);var t=e.Ca;return e=new Uint8Array([].concat(T(mi(e.Ba,4)),T(mi(t,4)))),wr("pasp",e)}function jp(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(T(mi(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Cd(e){for(var t=wr,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,u=0;u<n.length;u+=1)r|=n.charCodeAt(u)<<8*(n.length-u-1);n=new Uint8Array([].concat(T(mi(r,4)))),n=wr("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=wr("schm",r),u=wr;var c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.stream.drmInfos);for(var f=e.next();!f.done;f=e.next())if((f=f.value)&&f.keyIds&&f.keyIds.size){f=m(f.keyIds);for(var h=f.next();!h.done;h=f.next())c=sD(h.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),c=wr("tenc",e,c),t("sinf",n,r,u("schi",c))}function Zp(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,u=r.apply,c=wr,f=new Uint8Array([0,0,0,0].concat(T(mi(n.data?n.data.sb:0,4))));f=wr("mfhd",f);var h,v=n.data?n.data.Ya:[],A=new Uint8Array(4+v.length);for(h=0;h<v.length;h++){var N=v[h].flags;A[h+4]=N.Va<<4|N.Xa<<2|N.Wa}v=wr("sdtp",A);var B=v.length+92;A=wr,h=new Uint8Array([0,0,0,58].concat(T(mi(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=wr("tfhd",h),N=n.data?n.data.baseMediaDecodeTime:0;var z=Math.floor(N%(zl+1));N=new Uint8Array([1,0,0,0].concat(T(mi(Math.floor(N/(zl+1)),4)),T(mi(z,4)))),N=wr("tfdt",N);var J=B;B=n.data?n.data.Ya:[],z=B.length;var fe=12+16*z,pe=new Uint8Array(fe);for(J+=8+fe,pe.set([n.type==="video"?1:0,0,15,1].concat(T(mi(z,4)),T(mi(J,4))),0),J=0;J<z;J++){var Ee=B[J];fe=mi(Ee.duration,4);var Le=mi(Ee.size,4),Fe=Ee.flags;Ee=mi(Ee.eb,4),pe.set([].concat(T(fe),T(Le),[Fe.hb<<2|Fe.Va,Fe.Xa<<6|Fe.Wa<<4|Fe.ib,Fe.Ua&61440,Fe.Ua&15],T(Ee)),12+16*J)}B=wr("trun",pe),v=A("traf",h,N,B,v),c=c("moof",f,v),u.call(r,t,[c,kZ(n)])}return hi.apply(co,T(t))}function kZ(e){return e=(e.data?e.data.Ya:[]).map(function(t){return t.data}),e=hi.apply(co,T(e)),wr("mdat",e)}function mi(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function sD(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function wr(e){var t=Ye.apply(1,arguments),n=lD[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],lD[e]=n);for(var r=8,u=t.length-1;0<=u;u--)r+=t[u].byteLength;for(u=new Uint8Array(r),u[0]=r>>24&255,u[1]=r>>16&255,u[2]=r>>8&255,u[3]=r&255,u.set(n,4),n=0,r=8;n<t.length;n++)u.set(t[n],r),r+=t[n].byteLength;return u}var uD=!1,zl=Math.pow(2,32)-1,lD={},FZ=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),UZ=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),BZ=new Uint8Array([0,0,0,0,0,0,0,0]),jZ=new Uint8Array([0,0,0,0,0,0,0,0]),ZZ=new Uint8Array([0,0,0,0,0,0,0,0]),qZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),GZ=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),HZ=new Uint8Array([0,0,0,0,0,0,0,0]),VZ=new Uint8Array([0,0,0,0,0,0,0,1]),ly=new Uint8Array([]),KZ=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),M_=new Uint8Array([]);function D_(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.C=new D(5),this.o=new on(function(){zZ(e)}),this.B=new rl,this.m=new Map,this.A=function(){return!1}}p=D_.prototype,p.configure=function(e,t){this.g=e,t&&(this.A=t)},p.start=function(e,t){var n=this;return Re(function(r){if(r.g==1)return n.l=[e],n.h=t,R(r,P_(n),2);if(!n.h)throw new Xe(2,7,7001);return r.return(n.j)})};function zZ(e){var t;Re(function(n){switch(n.g){case 1:return ce(n,2),R(n,P_(e),4);case 4:me(n,3);break;case 2:t=Ce(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();X(n)}})}p.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.B.destroy()},p.update=function(){var e=this,t;return Re(function(n){if(n.g==1)return ce(n,2),R(n,P_(e),4);if(n.g!=2)return me(n,0);if(t=Ce(n),!e.h||!t)return n.return();e.h.onError(t),X(n)})},p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(){},p.banLocation=function(){},p.setMediaElement=function(){};function P_(e){var t,n,r,u,c,f,h;return Re(function(v){if(v.g==1)return t=Bi(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),u=n.request(0,t,{type:5,isPreload:e.A()}),il(e.B,u),R(v,u.promise,2);if(c=v.h,!e.h)return v.return();c.uri&&!e.l.includes(c.uri)&&e.l.unshift(c.uri);var A=c.uri,N=c.data,B=e.g.mss.manifestPreprocessor;if(B!=fv){if(gr("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),N=uM(N,"SmoothStreamingMedia"),!N)throw new Xe(2,4,4046,A);B(N),N=bi(N.outerHTML)}var z=_u(N,"SmoothStreamingMedia");if(!z)throw new Xe(2,4,4046,A);if(A=e.g.mss.manifestPreprocessorTXml,A!=dv&&A(z),e.i||(e.i=new rr(null,0)),A=Er(z,"IsLive",Hs,!1))throw new Xe(2,4,4047);e.i.vc(!A),B=Er(z,"TimeScale",lo,1e7),N=Er(z,"DVRWindowLength",lo),A&&(N===0||isNaN(N))&&(N=1/0);var J=Er(z,"CanSeek",Hs,!1);N===0&&J&&(N=1/0),J=null,N&&0<N&&(J=N/B),A&&!isNaN(e.g.availabilityWindowOverride)&&(J=e.g.availabilityWindowOverride),J==null&&(J=1/0),e.i.ne(J),N=Er(z,"Duration",lo,1/0),A||e.i.Za(N/B),A={variants:[],textStreams:[],timescale:B,duration:N/B};var fe;for(J=sr(z,"Protection"),B=e.g.mss.keySystemsBySystemId,N=[],J=m(J),fe=J.next();!fe.done;fe=J.next())N=N.concat(sr(fe.value,"ProtectionHeader"));if(N.length){for(J=[],fe=0;fe<N.length;fe++){var pe=N[fe],Ee=pe.attributes.SystemID.toLowerCase(),Le=B[Ee];if(Le){var Fe=iD(pe);if(Fe)e:{Fe=m(Eo(Fe,"DATA"));for(var it=Fe.next();!it.done;it=Fe.next())if(it=Hi(it.value,"KID")){Fe=Wo(ei(it)),Fe=new Uint8Array([Fe[3],Fe[2],Fe[1],Fe[0],Fe[5],Fe[4],Fe[7],Fe[6]].concat(T(Fe.slice(8)))),Fe=za(Fe);break e}Fe=null}else Fe=null;it=Wo(ei(pe)),Ee=$u(Ee.replace(/-/g,"")),Ee=[{initData:Oe(it,Ee,new Set,0),initDataType:"cenc",keyId:Fe}],Ee=ws(Le,"cenc",Ee),Fe&&Ee.keyIds.add(Fe),(Le=LZ.get(Le))&&(Ee.licenseServerUri=Le(pe)),J.push(Ee)}}B=J}else B=[];for(fe=B,J=[],B=[],N=[],z=sr(z,"StreamIndex"),z=m(z),pe=z.next();!pe.done;pe=z.next()){pe=pe.value,Le=sr(pe,"QualityLevel"),Ee=A.timescale,Fe=A.duration,it=sr(pe,"c");for(var Ue=[],Qe=0,rt=0;rt<it.length;++rt){var dt=it[rt],gt=it[rt+1],kt=Er(dt,"t",lo),It=Er(dt,"d",lo);if(dt=Er(dt,"r",Ec),!It)break;if(kt=kt!=null?kt:Qe,dt=dt||0,0>dt)if(gt){if(gt=Er(gt,"t",lo),gt==null)break;if(kt>=gt)break;dt=Math.ceil((gt-kt)/It)-1}else{if(Fe==1/0)break;if(kt/Ee>=Fe)break;dt=Math.ceil((Fe*Ee-kt)/It)-1}for(gt=0;gt<=dt;++gt)Qe=kt+It,Ue.push({start:kt/Ee,end:Qe/Ee,Zf:kt}),kt=Qe}for(Ee=Ue,Le=m(Le),Fe=Le.next();!Fe.done;Fe=Le.next())(Fe=YZ(e,pe,Fe.value,Ee,fe,A))&&(Fe.type!="audio"||e.g.disableAudio?Fe.type!="video"||e.g.disableVideo?Fe.type!=_r||e.g.disableText||N.push(Fe):B.push(Fe):J.push(Fe))}for(z=[],J=m(0<J.length?J:[null]),fe=J.next();!fe.done;fe=J.next())for(fe=fe.value,pe=m(0<B.length?B:[null]),Ue=pe.next();!Ue.done;Ue=pe.next())Le=z,Ee=Le.push,Fe=e,it=fe,Ue=Ue.value,rt=0,it&&it.bandwidth&&0<it.bandwidth&&(rt+=it.bandwidth),Ue&&Ue.bandwidth&&0<Ue.bandwidth&&(rt+=Ue.bandwidth),Fe={id:Fe.s++,language:it?it.language:"und",disabledUntilTime:0,primary:!!it&&it.primary||!!Ue&&Ue.primary,audio:it,video:Ue,bandwidth:rt,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},Ee.call(Le,Fe);A.variants=z,A.textStreams=N,e.j?(e.j.variants=A.variants,e.j.textStreams=A.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:A.variants,textStreams:A.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.Ud()),Promise.resolve(),f=Date.now(),h=(f-r)/1e3,e.C.sample(1,h),X(v)})}function YZ(e,t,n,r,u,c){var f=t.attributes.Type;if(f!=="audio"&&f!=="video"&&f!=="text")return Ke("Ignoring unrecognized type:",f),null;var h=t.attributes.Language,v=e.s++,A=Er(n,"Bitrate",Gs),N=Er(n,"MaxWidth",Gs),B=Er(n,"MaxHeight",Gs),z=Er(n,"Channels",Gs),J=Er(n,"SamplingRate",Gs),fe=c.duration;r.length&&(fe=r[r.length-1].end-r[0].start);var pe=e.i.getDuration();e.i.Za(Math.min(fe,pe));var Ee={id:v,originalId:t.attributes.Name||String(v),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:A||0,width:N||void 0,height:B||void 0,kind:"",encrypted:0<u.length,drmInfos:u,keyIds:new Set,language:Or(h||"und"),originalLanguage:h,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:z,audioSamplingRate:J,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:fe,timescale:c.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((u=t.attributes.Subtype)&&((u=eq[u])&&Ee.roles.push(u),u==="main"&&(Ee.primary=!0)),u=n.attributes.FourCC,(u===null||u==="")&&(u=t.attributes.FourCC),!u){if(f==="audio")u="AAC";else if(f==="video")return Ke('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!JZ.includes(u.toUpperCase()))return Ke("Codec not supported:",u),null;switch(n=WZ(n,f,u,Ee),Ee.mssPrivateData.codecPrivateData=n,f){case"audio":if(!n)return Ke("Quality unsupported without CodecPrivateData",f),null;Ee.type="audio",Ee.mimeType="mss/audio/mp4",Ee.codecs=$Z(u,n);break;case"video":if(!n)return Ke("Quality unsupported without CodecPrivateData",f),null;Ee.type="video",Ee.mimeType="mss/video/mp4",Ee.codecs=XZ(n);break;case"text":Ee.type=_r,Ee.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(Ee.codecs="stpp")}return Ee.fullMimeTypes.add(Di(Ee.mimeType,Ee.codecs)),Ee.createSegmentIndex=function(){if(Ee.segmentIndex)return Promise.resolve();if(e.m.has(Ee.id))var Le=e.m.get(Ee.id);else Le=[],Ee.type=="video"&&(Le=Ee.mssPrivateData.codecPrivateData.split("00000001").slice(1)),Le={id:Ee.id,type:Ee.type,codecs:Ee.codecs,encrypted:Ee.encrypted,timescale:Ee.mssPrivateData.timescale,duration:Ee.mssPrivateData.duration,ab:Le,qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:null,stream:Ee},Le=bd(new Id([Le])),e.m.set(Ee.id,Le);return Le=QZ(e,new Dn(function(){return[]},0,null,iv(Ee),Ee.mssPrivateData.timescale,Le),Ee,t,r),Ee.segmentIndex=new Mr(Le),Promise.resolve()},Ee.closeSegmentIndex=function(){Ee.segmentIndex&&(Ee.segmentIndex.release(),Ee.segmentIndex=null)},Ee}function WZ(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=u[e],n==="AACH"?(n=new Uint8Array(4),e=u[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function $Z(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function XZ(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function QZ(e,t,n,r,u){var c=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[],u=m(u);for(var f=u.next(),h={};!f.done;h={pe:void 0},f=u.next())h.pe=f.value,r.push(new et(h.pe.start,h.pe.end,function(v){return function(){return Ki(e.l,[c.replace("{start time}",String(v.pe.Zf))])}}(h),0,null,t,0,0,n.mssPrivateData.duration));return r}ne("shaka.mss.MssParser",D_);var JZ="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),eq={CAPT:"main",SUBT:"alternate",DESC:"main"};Yn["application/vnd.ms-sstr+xml"]=function(){return new D_};function cD(e,t,n,r,u,c){if(200<=n&&299>=n&&n!=202)return{uri:u||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};var f=null;try{f=Br(t)}catch(h){}throw new Xe(n==401||n==403?2:1,1,1001,r,n,f,e,c,u||r)}function O_(){}function cy(e,t,n,r,u,c){var f=new oq;bu(t.headers).forEach(function(N,B){f.append(B,N)});var h=new rq,v={ig:!1,kh:!1};if(e=tq(e,n,{body:t.body||void 0,headers:f,method:t.method,signal:h.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},v,r,u,t.streamDataCallback,c.minBytesForProgressEvents||0),e=new pi(e,function(){return v.ig=!0,h.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var A=new on(function(){v.kh=!0,h.abort()});A.Z(t/1e3),e.finally(function(){A.stop()})}return e}function tq(e,t,n,r,u,c,f,h){var v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue;return Re(function(Qe){switch(Qe.g){case 1:return v=nq,A=iq,J=z=0,fe=Date.now(),ce(Qe,2),R(Qe,v(e,n),4);case 4:if(N=Qe.h,c(fD(N.headers)),n.method=="HEAD"){Qe.u(5);break}return pe=N.clone().body.getReader(),Le=(Ee=N.headers.get("Content-Length"))?parseInt(Ee,10):0,Fe=function(rt){function dt(){var gt,kt,It,Ut;return Re(function(Nt){switch(Nt.g){case 1:return ce(Nt,2),R(Nt,pe.read(),4);case 4:gt=Nt.h,me(Nt,3);break;case 2:return Ce(Nt),Nt.return();case 3:if(gt.done){Nt.u(5);break}if(z+=gt.value.byteLength,!f){Nt.u(5);break}return R(Nt,f(gt.value),5);case 5:kt=Date.now(),It=z-J,(100<kt-fe&&It>=h||gt.done)&&(Ut=gt.done?0:Le-z,u(kt-fe,It,Ut),J=z,fe=kt),gt.done?rt.close():(rt.enqueue(gt.value),dt()),X(Nt)}})}dt()},new A({start:Fe}),R(Qe,N.arrayBuffer(),6);case 6:B=Qe.h;case 5:me(Qe,3);break;case 2:throw it=Ce(Qe),r.ig?new Xe(1,1,7001,e,t):r.kh?new Xe(1,1,1003,e,t):new Xe(1,1,1002,e,it,t);case 3:return Ue=fD(N.headers),Qe.return(cD(Ue,B,N.status,e,N.url,t))}})}function fD(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function dD(){if(g.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(g.Response){if(!new Response("").body)return!1}else return!1;return!(!g.fetch||"polyfill"in g.fetch||!g.AbortController)}ne("shaka.net.HttpFetchPlugin",O_),O_.isSupported=dD,O_.parse=cy;var nq=g.fetch,rq=g.AbortController,iq=g.ReadableStream,oq=g.Headers;dD()&&(Xs("http",cy,2,!0),Xs("https",cy,2,!0),Xs("blob",cy,2,!0));function hD(){}function fy(e,t,n,r,u,c){var f=new aq,h=Date.now(),v=0,A=new Promise(function(N,B){f.open(t.method,e,!0),f.responseType="arraybuffer",f.timeout=t.retryParameters.timeout,f.withCredentials=t.allowCrossSiteCredentials,f.onabort=function(){B(new Xe(1,1,7001,e,n))};var z=!1;f.onreadystatechange=function(){if(f.readyState==2&&!z){var fe=pD(f);u(fe),z=!0}},f.onload=function(fe){var pe=pD(f),Ee=f.response;try{r(Date.now()-h,fe.loaded-v,0);var Le=cD(pe,Ee,f.status,e,f.responseURL,n);N(Le)}catch(Fe){B(Fe)}},f.onerror=function(fe){B(new Xe(1,1,1002,e,fe,n))},f.ontimeout=function(){B(new Xe(1,1,1003,e,n))},f.onprogress=function(fe){var pe=Date.now(),Ee=c.minBytesForProgressEvents||0,Le=fe.loaded-v;(100<pe-h&&Le>=Ee||fe.lengthComputable&&fe.loaded==fe.total)&&(r(pe-h,Le,f.readyState==4?0:fe.total-fe.loaded),v=fe.loaded,h=pe)};for(var J in t.headers)f.setRequestHeader(J.toLowerCase(),t.headers[J]);f.send(t.body)});return new pi(A,function(){return f.abort(),Promise.resolve()})}function pD(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}ne("shaka.net.HttpXHRPlugin",hD),hD.parse=fy;var aq=g.XMLHttpRequest;Xs("http",fy,1,!0),Xs("https",fy,1,!0),Xs("blob",fy,1,!0);function gD(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function L_(e){return e.M().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Ha+":"+e.va}function sq(e,t){return nd(e.g.M(),e.g.Ha,e.g.va,t.streaming.retryParameters)}function mD(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function vD(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}mD.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function yD(e){var t=this;this.o=e,this.j=new Map,this.i=new jl(function(){return k_(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new mD}yD.prototype.destroy=function(){return this.i.destroy()};function uq(e,t,n){e.m=t,e.l=n}function k_(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function lq(e,t,n,r,u,c){Zr(e.i);var f=(e.j.get(t)||Promise.resolve()).then(function(){var h,v,A,N,B,z,J;return Re(function(fe){if(fe.g==1)return R(fe,fq(e,n),2);if(h=fe.h,e.i.g)throw new Xe(2,9,7001);if(u)for(N in v=nr(h),A=new ze(v),A.data)B=Number(N),z=A.data[B],J=A.g[B],e.l(z,J);e.g.close(r,h.byteLength);var pe=e.g;return e.m(pe.i==0?0:pe.j/pe.i,e.g.h),fe.return(c(h))})});e.j.set(t,f)}function cq(e){return Re(function(t){return t.g==1?R(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function fq(e,t){var n,r,u,c;return Re(function(f){return f.g==1?(n=Wa,r=e.o.request(n,t),u=function(){return r.abort()},e.h.push(u),R(f,r.promise,2)):(c=f.h,Kn(e.h,u),f.return(c.data))})}function dy(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Lr,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}dy.prototype.abort=function(){var e=this;return Re(function(t){if(t.g==1){try{e.i.abort()}catch(n){}return ce(t,2),R(t,e.g,4)}if(t.g!=2)return me(t,0);Ce(t),X(t)})};function F_(e,t){return new Promise(function(n,r){var u=e.h.openCursor();u.onerror=r,u.onsuccess=function(){var c;return Re(function(f){if(f.g==1)return u.result==null?(n(),f.return()):(c=u.result,R(f,t(c.key,c.value,c),2));c.continue(),X(f)})}})}dy.prototype.store=function(){return this.h},dy.prototype.promise=function(){return this.g};function U_(e){this.h=e,this.g=[]}U_.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Uc(e,t){return hy(e,t,"readwrite")}function hy(e,t,n){n=e.h.transaction([t],n);var r=new dy(n,t);return e.g.push(r),r.promise().then(function(){Kn(e.g,r)},function(){Kn(e.g,r)}),r}function Bc(e,t,n){this.h=new U_(e),this.i=t,this.g=n}p=Bc.prototype,p.destroy=function(){return this.h.destroy()},p.hasFixedKeySpace=function(){return!0},p.addSegments=function(){return ED(this.i)},p.removeSegments=function(e,t){return _D(this,this.i,e,t)},p.getSegments=function(e){var t=this,n;return Re(function(r){return r.g==1?R(r,TD(t,t.i,e),2):(n=r.h,r.return(n.map(function(u){return t.lg(u)})))})},p.addManifests=function(){return ED(this.g)},p.updateManifest=function(){return Promise.reject(new Xe(2,9,9016,"Cannot modify values in "+this.g))};function dq(e,t,n){e=Uc(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}p.updateManifestExpiration=function(e,t){var n=Uc(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=t,r.put(u,e))},n.promise()},p.removeManifests=function(e,t){return _D(this,this.g,e,t)},p.getManifests=function(e){var t=this,n;return Re(function(r){return r.g==1?R(r,TD(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(u){return t.Xc(u)}))))})},p.getAllManifests=function(){var e=this,t,n;return Re(function(r){return r.g==1?(t=hy(e.h,e.g,"readonly"),n=new Map,R(r,F_(t,function(u,c){var f;return Re(function(h){if(h.g==1)return R(h,e.Xc(c),2);f=h.h,n.set(u,f),X(h)})}),2)):r.g!=3?R(r,t.promise(),3):r.return(n)})},p.lg=function(e){return e},p.Xc=function(e){return Promise.resolve(e)};function ED(e){return Promise.reject(new Xe(2,9,9011,"Cannot add new value to "+e))}p.add=function(e,t){var n=this,r,u,c,f,h,v,A;return Re(function(N){if(N.g==1){for(r=Uc(n.h,e),u=r.store(),c=[],f=m(t),h=f.next(),v={};!h.done;v={If:void 0},h=f.next())A=h.value,v.If=u.add(A),v.If.onsuccess=function(B){return function(){c.push(B.If.result)}}(v);return R(N,r.promise(),2)}return N.return(c)})};function _D(e,t,n,r){e=Uc(e.h,t),t=e.store(),n=m(n);for(var u=n.next(),c={};!u.done;c={tf:void 0},u=n.next())c.tf=u.value,t.delete(c.tf).onsuccess=function(f){return function(){return r(f.tf)}}(c);return e.promise()}function TD(e,t,n){var r,u,c,f,h,v,A;return Re(function(N){if(N.g==1){for(r=hy(e.h,t,"readonly"),u=r.store(),c={},f=[],h=m(n),v=h.next(),A={};!v.done;A={ie:void 0,Qd:void 0},v=h.next())A.Qd=v.value,A.ie=u.get(A.Qd),A.ie.onsuccess=function(B){return function(){B.ie.result==null&&f.push(B.Qd),c[B.Qd]=B.ie.result}}(A);return R(N,r.promise(),2)}if(f.length)throw new Xe(2,9,9012,"Could not find values for "+f);return N.return(n.map(function(B){return c[B]}))})}function qp(e){this.g=new U_(e)}qp.prototype.destroy=function(){return this.g.destroy()},qp.prototype.getAll=function(){var e=this,t,n;return Re(function(r){return r.g==1?(t=hy(e.g,"session-ids","readonly"),n=[],R(r,F_(t,function(u,c){n.push(c)}),2)):r.g!=3?R(r,t.promise(),3):r.return(n)})},qp.prototype.add=function(e){var t=Uc(this.g,"session-ids"),n=t.store();e=m(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},qp.prototype.remove=function(e){var t=this,n;return Re(function(r){return r.g==1?(n=Uc(t.g,"session-ids"),R(r,F_(n,function(u,c,f){e.includes(c.sessionId)&&f.delete()}),2)):R(r,n.promise(),0)})};function Xo(){this.g=new Map}Xo.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Xo.prototype.init=function(){var e=this;Gp.forEach(function(u,c){(u=u())&&e.g.set(c,u)});for(var t=[],n=m(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function SD(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){u.hasFixedKeySpace()||t||(t={path:{ob:r,Ia:c},Ia:u})})}),t)return t;throw new Xe(2,9,9013,"Could not find a cell that supports add-operations")}function hq(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){t({ob:r,Ia:c},u)})})}function py(e,t,n){if(e=e.g.get(t),!e)throw new Xe(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new Xe(2,9,9013,"Could not find cell with name "+n);return t}function pq(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function gq(e){var t=Array.from(e.g.keys());if(!t.length)throw new Xe(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function mq(e){var t,n,r;return Re(function(u){return u.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=Gp,r.forEach(function(c){(c=c())&&t.push(c)})),R(u,Promise.all(t.map(function(c){return c.erase()})),2)):n?u.u(0):R(u,Promise.all(t.map(function(c){return c.destroy()})),0)})}function wD(e,t){Gp.set(e,t)}ne("shaka.offline.StorageMuxer",Xo),Xo.unregister=function(e){Gp.delete(e)},Xo.register=wD,Xo.prototype.destroy=Xo.prototype.destroy;var Gp=new Map;function Hp(){Bc.apply(this,arguments)}Y(Hp,Bc),Hp.prototype.updateManifestExpiration=function(e,t){var n=this,r,u,c;return Re(function(f){return r=Uc(n.h,n.g),u=r.store(),c=new Lr,u.get(e).onsuccess=function(h){(h=h.target.result)?(h.expiration=t,u.put(h),c.resolve()):c.reject(new Xe(2,9,9012,"Could not find values for "+e))},R(f,Promise.all([r.promise(),c]),0)})},Hp.prototype.Xc=function(e){var t,n,r,u,c,f;return Re(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime,c=vq(e.periods[n],u),t.push(c);return R(h,eM(t),2)}return f=h.h,h.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:f,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function vq(e,t){Eq(e);for(var n=m(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(u){return yq(u,e.startTime,t)})}function yq(e,t,n){var r=e.initSegmentUri?AD(e.initSegmentUri):null,u=t+e.presentationTimeOffset,c=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(f){var h=AD(f.uri);return{startTime:t+f.startTime,endTime:t+f.endTime,dataKey:h,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:c,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Hp.prototype.lg=function(e){return{data:e.data}};function AD(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Xe(2,9,9004,"Could not parse uri "+e)}function Eq(e){var t=e.streams.filter(function(h){return h.contentType=="audio"});if(e=e.streams.filter(function(h){return h.contentType=="video"}),!t.every(function(h){return h.variantIds})||!e.every(function(h){return h.variantIds})){for(var n=m(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=m(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){r=n++;for(var u=m(e),c=u.next();!c.done;c=u.next())c.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,u=m(t),c=u.next();!c.done;c=u.next())c.value.variantIds.push(r);if(e.length&&t.length)for(t=m(t),r=t.next();!r.done;r=t.next())for(r=r.value,u=m(e),c=u.next();!c.done;c=u.next()){c=c.value;var f=n++;r.variantIds.push(f),c.variantIds.push(f)}}}function gy(){Bc.apply(this,arguments)}Y(gy,Bc),gy.prototype.Xc=function(e){var t,n,r,u,c,f;return Re(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime;for(var v=e.periods[n],A=[],N=m(v.streams),B=N.next();!B.done;B=N.next())B=B.value,B.variantIds.length!=0&&A.push(_q(B,v.startTime,v.startTime+u));c=A,t.push(c)}return R(h,eM(t),2)}return f=h.h,h.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:f,sequenceMode:!1})})};function _q(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function B_(){Bc.apply(this,arguments)}Y(B_,Bc),p=B_.prototype,p.hasFixedKeySpace=function(){return!1},p.addSegments=function(e){return this.add(this.i,e)},p.addManifests=function(e){return this.add(this.g,e)},p.updateManifest=function(e,t){return dq(this,e,t)},p.Xc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function ID(){this.m=this.j=this.i=this.h=this.g=this.l=null}p=ID.prototype,p.init=function(){var e=this,t=new Lr,n=!1,r=new on(function(){n=!0,t.reject(new Xe(2,9,9017))});r.Z(5);var u=g.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!n){var c=u.result;e.l=c;var f=c.objectStoreNames;f=f.contains("manifest")&&f.contains("segment")?new Hp(c,"segment","manifest"):null,e.g=f,f=c.objectStoreNames,f=f.contains("manifest-v2")&&f.contains("segment-v2")?new gy(c,"segment-v2","manifest-v2"):null,e.h=f,f=c.objectStoreNames,f=f.contains("manifest-v3")&&f.contains("segment-v3")?new gy(c,"segment-v3","manifest-v3"):null,e.i=f,f=c.objectStoreNames,f=f.contains("manifest-v5")&&f.contains("segment-v5")?new B_(c,"segment-v5","manifest-v5"):null,e.j=f,c=c.objectStoreNames.contains("session-ids")?new qp(c):null,e.m=c,r.stop(),t.resolve()}},u.onupgradeneeded=function(){for(var c=u.result,f=m(["segment-v5","manifest-v5","session-ids"]),h=f.next();!h.done;h=f.next())h=h.value,c.objectStoreNames.contains(h)||c.createObjectStore(h,{autoIncrement:!0})},u.onerror=function(c){n||(t.reject(new Xe(2,9,9001,u.error)),r.stop(),c.preventDefault())},t},p.destroy=function(){var e=this;return Re(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return R(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return R(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return R(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return R(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return R(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),X(t)}})},p.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},p.getEmeSessionCell=function(){return this.m},p.erase=function(){var e=this;return Re(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return R(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return R(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return R(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return R(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),R(t,Tq(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,R(t,e.init(),0)}})};function Tq(){var e=new Lr,t=g.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new Xe(2,9,9001,t.error)),n.preventDefault()},e}wD("idb",function(){return ri()||Rr()||!g.indexedDB?null:new ID});function xu(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}xu.prototype.ob=function(){return this.i},xu.prototype.Ia=function(){return this.h},xu.prototype.key=function(){return this.l},xu.prototype.toString=function(){return this.j};function j_(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new xu(t,n,r,Number(e[4])):null}function bD(e,t){this.h=e,this.g=t}function CD(e,t){var n=new rr(null,0);n.Za(t.duration);var r=t.streams.filter(function(A){return A.type=="audio"}),u=t.streams.filter(function(A){return A.type=="video"});r=Sq(e,r,u,n),u=t.streams.filter(function(A){return A.type==_r}).map(function(A){return my(e,A,n)});var c=t.streams.filter(function(A){return A.type=="image"}).map(function(A){return my(e,A,n)}),f=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var h=m(r.values()),v=h.next();!v.done;v=h.next())v=v.value,v.audio&&v.audio.encrypted&&(v.audio.drmInfos=f),v.video&&v.video.encrypted&&(v.video.drmInfos=f);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:u,imageStreams:c,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function Sq(e,t,n,r){for(var u=new Set,c=m(t),f=c.next();!f.done;f=c.next()){f=m(f.value.variantIds);for(var h=f.next();!h.done;h=f.next())u.add(h.value)}for(c=m(n),f=c.next();!f.done;f=c.next())for(f=m(f.value.variantIds),h=f.next();!h.done;h=f.next())u.add(h.value);for(c=new Map,u=m(u),f=u.next();!f.done;f=u.next())f=f.value,c.set(f,{id:f,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),u=t.next();!u.done;u=t.next())for(f=u.value,u=my(e,f,r),f=m(f.variantIds),h=f.next();!h.done;h=f.next())h=c.get(h.value),h.language=u.language,h.primary=h.primary||u.primary,h.audio=u;for(n=m(n),t=n.next();!t.done;t=n.next())for(u=t.value,t=my(e,u,r),u=m(u.variantIds),f=u.next();!f.done;f=u.next())f=c.get(f.value),f.primary=f.primary||t.primary,f.video=t;return c}function my(e,t,n){var r=t.segments.map(function(u){return wq(e,u,t)});return n.qd(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Mr(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Di(t.mimeType,t.codecs)])}}function wq(e,t,n){var r=new xu("segment",e.h,e.g,t.dataKey);return e=new et(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?Aq(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function Aq(e,t){var n=new xu("segment",e.h,e.g,t);return new Dn(function(){return[n.toString()]},0,null)}function RD(){this.g=null}p=RD.prototype,p.configure=function(){},p.start=function(e,t){var n=this,r,u,c,f,h,v,A;return Re(function(N){switch(N.g){case 1:if(r=j_(e),n.g=r,r==null||r.g!="manifest")throw new Xe(2,1,9004,e);return u=new Xo,oe(N,2),R(N,u.init(),4);case 4:return R(N,py(u,r.ob(),r.Ia()),5);case 5:return c=N.h,R(N,c.getManifests([r.key()]),6);case 6:return f=N.h,h=f[0],v=new bD(r.ob(),r.Ia()),A=CD(v,h),t.makeTextStreamsForClosedCaptions(A),N.return(A);case 2:return Je(N),R(N,u.destroy(),7);case 7:we(N,0)}})},p.stop=function(){return Promise.resolve()},p.update=function(){},p.onExpirationUpdated=function(e,t){var n=this,r,u,c,f,h,v,A;return Re(function(N){switch(N.g){case 1:return r=n.g,u=new Xo,ce(N,2,3),R(N,u.init(),5);case 5:return R(N,py(u,r.ob(),r.Ia()),6);case 6:return c=N.h,R(N,c.getManifests([r.key()]),7);case 7:if(f=N.h,h=f[0],v=h.sessionIds.includes(e),A=h.expiration==null||h.expiration>t,!v||!A){N.u(3);break}return R(N,c.updateManifestExpiration(r.key(),t),3);case 3:return Je(N),R(N,u.destroy(),10);case 10:we(N,0);break;case 2:Ce(N),N.u(3)}})},p.onInitialVariantChosen=function(){},p.banLocation=function(){},p.setMediaElement=function(){},Yn["application/x-offline-manifest"]=function(){return new RD};function xD(){}function ND(e){var t=j_(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=$s(e)):e=t&&t.g=="segment"?Iq(t.key(),t):Ws(new Xe(2,1,9004,e)),e}function Iq(e,t){var n=new Xo;return $s(void 0).Aa(function(){return n.init()}).Aa(function(){return py(n,t.ob(),t.Ia())}).Aa(function(r){return r.getSegments([t.key()])}).Aa(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}ne("shaka.offline.OfflineScheme",xD),xD.plugin=ND,Xs("offline",ND);function MD(e,t,n){var r,u,c,f,h,v;return Re(function(A){switch(A.g){case 1:r=[];for(var N=[],B=m(n),z=B.next();!z.done;z=B.next()){z=z.value;for(var J=!1,fe=m(N),pe=fe.next();!pe.done;pe=fe.next())if(pe=pe.value,Cq(pe.info,z)){pe.sessionIds.push(z.sessionId),J=!0;break}J||N.push({info:z,sessionIds:[z.sessionId]})}u=m(N),c=u.next();case 2:if(c.done){A.u(4);break}return f=c.value,h=bq(e,t,f),R(A,h,5);case 5:v=A.h,r=r.concat(v),c=u.next(),A.u(2);break;case 4:return A.return(r)}})}function bq(e,t,n){var r,u;return Re(function(c){switch(c.g){case 1:return r=new Ze({Mb:t,onError:function(){},be:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ce(c,2),r.configure(e),R(c,Ie(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:me(c,3);break;case 2:return Ce(c),R(c,r.destroy(),5);case 5:return c.return([]);case 3:return u=[],R(c,Promise.all(n.sessionIds.map(function(f){return Re(function(h){if(h.g==1)return ce(h,2),R(h,ue(r,f),4);if(h.g!=2)return u.push(f),me(h,0);Ce(h),X(h)})})),6);case 6:return R(c,r.destroy(),7);case 7:return c.return(u)}})}function Cq(e,t){function n(r,u){return r.robustness==u.robustness&&r.contentType==u.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Ln(e.audioCapabilities,t.audioCapabilities,n)&&Ln(e.videoCapabilities,t.videoCapabilities,n)}function Rq(e,t,n){var r=t.presentationTimeline.getDuration();return t=DD(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function Z_(e,t){var n=CD(new bD(e.ob(),e.Ia()),t),r=t.appMetadata||{};return n=DD(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function DD(e){var t=[],n=Vf(e.variants);n=m(n);for(var r=n.next();!r.done;r=n.next())t.push(kl(r.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Zf(n.value));return t}function xq(){this.g={}}function Nq(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var u=n.bandwidth||393216,c=r.bandwidth||t.bandwidth-u;0>=c&&(c=t.bandwidth),e.g[n.id]=u,e.g[r.id]=c}}function Mq(e,t){e.g[t.id]=t.bandwidth||2048}function PD(e,t){return e=e.g[t],e==null&&(e=0),e}function po(e){var t=this;if(e&&e.constructor!=hn)throw new Xe(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.yb()):(this.h=od(),this.g=new zr),this.i=[],this.j=[];var n=!e;this.l=new jl(function(){var r,u,c,f,h;return Re(function(v){switch(v.g){case 1:return R(v,Promise.all(t.j.map(function(A){return k_(A)})),2);case 2:for(r=function(){},u=[],c=m(t.i),f=c.next();!f.done;f=c.next())h=f.value,u.push(h.then(r,r));return R(v,Promise.all(u),3);case 3:if(!n){v.u(4);break}return R(v,t.g.destroy(),4);case 4:t.h=null,t.g=null,X(v)}})})}function q_(){if(tr())e:{for(var e=m(Gp.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}p=po.prototype,p.destroy=function(){return this.l.destroy()},p.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=cv(e,t)),ql(this.h,e)},p.getConfiguration=function(){var e=od();return ql(e,this.h,od()),e},p.yb=function(){return this.g},p.store=function(e,t,n){var r=this,u=this.getConfiguration(),c=new yD(this.g);return this.j.push(c),t=Dq(this,e,t||{},function(){var f;return Re(function(h){return h.g==1?n?h.u(2):R(h,pv(e,r.g,u.manifest.retryParameters),3):(h.g!=2&&(n=h.h),f=qn(e,n||null),h.return(f()))})},u,c),t=new pi(t,function(){return k_(c)}),t.finally(function(){Kn(r.j,c)}),Vq(this,t)};function Dq(e,t,n,r,u,c){var f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it;return Re(function(Ue){switch(Ue.g){case 1:return vy(),h=f=null,v=new Xo,B=N=A=null,ce(Ue,2,3),R(Ue,r(),5);case 5:return f=Ue.h,R(Ue,Zq(e,t,f,u),6);case 6:if(z=Ue.h,Ro(e),J=!z.presentationTimeline.U()&&!z.presentationTimeline.pc(),!J)throw new Xe(2,9,9005,t);return R(Ue,e.Bc(z,function(Qe){B=B||Qe},u),7);case 7:if(h=Ue.h,Ro(e),B)throw B;return R(Ue,Oq(z,h,u),8);case 8:return R(Ue,v.init(),9);case 9:return Ro(e),R(Ue,SD(v),10);case 10:return A=Ue.h,Ro(e),fe=Lq(h,z,t,n,u,c),pe=fe.ri,Ee=fe.Wf,R(Ue,A.Ia.addManifests([pe]),11);case 11:if(Le=Ue.h,Ro(e),N=Le[0],Ro(e),B)throw B;return R(Ue,Pq(e,Ee,N,pe,c,u,A.Ia,z,h),12);case 12:return Ro(e),FD(z,pe,h,u),R(Ue,A.Ia.updateManifest(N,pe),13);case 13:return Ro(e),Fe=new xu("manifest",A.path.ob,A.path.Ia,N),Ue.return(Z_(Fe,pe));case 3:return Je(Ue),R(Ue,v.destroy(),14);case 14:if(!f){Ue.u(15);break}return R(Ue,f.stop(),15);case 15:if(!h){Ue.u(17);break}return R(Ue,h.destroy(),17);case 17:we(Ue,0);break;case 2:if(it=Ce(Ue),N==null){Ue.u(19);break}return R(Ue,OD(N),19);case 19:throw B||it}})}function Pq(e,t,n,r,u,c,f,h,v){var A,N,B,z,J,fe,pe,Ee,Le,Fe;return Re(function(it){switch(it.g){case 1:if(A={},N=0,B=function(Ue,Qe){var rt,dt,gt,kt,It,Ut,Nt;return Re(function(nn){if(nn.g==1){for(rt=m(Ue),dt=rt.next(),gt={};!dt.done;gt={Dc:void 0},dt=rt.next())gt.Dc=dt.value,kt=sq(gt.Dc,c),It=gt.Dc.i,Ut=gt.Dc.h,Nt=function(Kt){return function($t){var En,An,Vn;return Re(function(Qn){if(Qn.g==1)return R(Qn,f.addSegments([{data:$t}]),2);En=Qn.h,Ro(e),An=Kt.Dc.g,Vn=L_(An),A[Vn]=En[0],N+=$t.byteLength,X(Qn)})}}(gt),lq(u,gt.Dc.groupId,kt,It,Ut,Nt);return R(nn,cq(u),2)}return Qe?(Ro(e),FD(h,r,v,c),R(nn,f.updateManifest(n,r),0)):nn.u(0)})},z=!1,ce(it,2),!G_(h)||!z||kD(h)){it.u(4);break}return R(it,B(t.filter(function(Ue){return Ue.h}),!0),5);case 5:return Ro(e),t=t.filter(function(Ue){return!Ue.h}),J=A,fe=N,A={},N=0,R(it,LD(f,n,r,J,fe,function(){return Ro(e)}),6);case 6:Ro(e);case 4:if(z){it.u(7);break}return R(it,B(t,!1),8);case 8:return Ro(e),pe=A,Ee=N,A={},N=0,R(it,LD(f,n,r,pe,Ee,function(){return Ro(e)}),9);case 9:Ro(e);case 7:me(it,0);break;case 2:return Le=Ce(it),Fe=Object.values(A),R(it,f.removeSegments(Fe,function(){}),10);case 10:throw Le}})}function OD(e){var t,n,r,u;return Re(function(c){switch(c.g){case 1:return t=new Xo,R(c,t.init(),2);case 2:return R(c,SD(t),3);case 3:return n=c.h,r=new xu("manifest",n.path.ob,n.path.Ia,e),R(c,t.destroy(),4);case 4:return u=new po,R(c,u.remove(r.toString()),0)}})}function LD(e,t,n,r,u,c){var f,h,v,A,N,B,z,J,fe,pe,Ee;return Re(function(Le){switch(Le.g){case 1:for(f=!1,ce(Le,2),h=!0,v=m(n.streams),A=v.next();!A.done;A=v.next())for(N=A.value,B=m(N.segments),z=B.next();!z.done;z=B.next())J=z.value,fe=J.pendingSegmentRefId?r[J.pendingSegmentRefId]:null,fe!=null&&(J.dataKey=fe,J.pendingSegmentRefId=void 0),fe=J.pendingInitSegmentRefId?r[J.pendingInitSegmentRefId]:null,fe!=null&&(J.initSegmentKey=fe,J.pendingInitSegmentRefId=void 0),J.pendingSegmentRefId&&(h=!1),J.pendingInitSegmentRefId&&(h=!1);return n.size+=u,h&&(n.isIncomplete=!1),R(Le,e.updateManifest(t,n),4);case 4:f=!0,c(),me(Le,0);break;case 2:return pe=Ce(Le),R(Le,OD(t),5);case 5:if(f){Le.u(6);break}return Ee=Object.values(r),R(Le,e.removeSegments(Ee,function(){}),6);case 6:throw pe}})}function Oq(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Le,Fe,it,Ue,Qe,rt,dt,gt,kt,It,Ut,Nt,nn,Kt,$t;return Re(function(En){switch(En.g){case 1:return r={width:1/0,height:1/0},FE(e,n.restrictions,r),R(En,jf(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(u=[],c=n.preferredDecodingAttributes,f=n.preferredVideoCodecs,h=n.preferredAudioCodecs,Im(e,f,h,c),v=m(e.variants),A=v.next();!A.done;A=v.next())N=A.value,u.push(kl(N));for(B=m(e.textStreams),z=B.next();!z.done;z=B.next())J=z.value,u.push(Zf(J));for(fe=m(e.imageStreams),pe=fe.next();!pe.done;pe=fe.next())Ee=pe.value,u.push(qf(Ee));return R(En,n.offline.trackSelectionCallback(u),3);case 3:for(Le=En.h,Fe=e.presentationTimeline.getDuration(),it=0,Ue=m(Le),Qe=Ue.next();!Qe.done;Qe=Ue.next())rt=Qe.value,dt=rt.bandwidth*Fe/8,it+=dt;return ce(En,4),R(En,n.offline.downloadSizeCallback(it),6);case 6:if(gt=En.h,!gt)throw new Xe(2,9,9014);me(En,5);break;case 4:throw kt=Ce(En),kt instanceof Xe?kt:new Xe(2,9,9015);case 5:for(It=new Set,Ut=new Set,Nt=new Set,nn=m(Le),Kt=nn.next();!Kt.done;Kt=nn.next())$t=Kt.value,$t.type=="variant"&&It.add($t.id),$t.type=="text"&&Ut.add($t.id),$t.type=="image"&&Nt.add($t.id);e.variants=e.variants.filter(function(An){return It.has(An.id)}),e.textStreams=e.textStreams.filter(function(An){return Ut.has(An.id)}),e.imageStreams=e.imageStreams.filter(function(An){return Nt.has(An.id)}),Yq(e),X(En)}})}function Lq(e,t,n,r,u,c){var f=Rq(n,t,r),h=u.offline.progressCallback;uq(c,function(J,fe){f.size=fe,h(f,J)},function(J,fe){v&&u.offline.usePersistentLicense&&A==fe&&Pe(e,"cenc",J)});var v=G_(t)&&!kD(t),A=null;v&&(A=Wq.get(e.g.keySystem));for(var N=new xq,B=m(t.textStreams),z=B.next();!z.done;z=B.next())N.g[z.value.id]=52;for(B=m(t.imageStreams),z=B.next();!z.done;z=B.next())Mq(N,z.value);for(B=m(t.variants),z=B.next();!z.done;z=B.next())Nq(N,z.value);return N=qq(c,N,t,u),c=N.streams,N=N.Wf,B=e.g,z=u.offline.usePersistentLicense,B&&z&&(B.initData=[]),{ri:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ad(),streams:c,sessionIds:z?xe(e):[],drmInfo:B,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Wf:N}}function G_(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function kD(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function FD(e,t,n,r){if(t.expiration=n.ad(),n=xe(n),t.sessionIds=r.offline.usePersistentLicense?n:[],G_(e)&&r.offline.usePersistentLicense&&!n.length)throw new Xe(2,9,9007)}p.remove=function(e){return H_(this,kq(this,e))};function kq(e,t){var n,r,u,c,f,h;return Re(function(v){switch(v.g){case 1:if(vy(),n=j_(t),n==null||n.g!="manifest")throw new Xe(2,9,9004,t);return r=n,u=new Xo,oe(v,2),R(v,u.init(),4);case 4:return R(v,py(u,r.ob(),r.Ia()),5);case 5:return c=v.h,R(v,c.getManifests([r.key()]),6);case 6:return f=v.h,h=f[0],R(v,Promise.all([Fq(e,h,u),Uq(c,r,h)]),2);case 2:return Je(v),R(v,u.destroy(),8);case 8:we(v,0)}})}function UD(e,t){for(var n=[],r=m(e.streams),u=r.next();!u.done;u=r.next())u=u.value,t&&u.type=="video"?n.push({contentType:Di(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):t||u.type!="audio"||n.push({contentType:Di(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return n}function Fq(e,t,n){return Re(function(r){return R(r,zq(e.g,e.h.drm,n,t),0)})}function Uq(e,t,n){function r(){}var u=Kq(n);return Z_(t,n),Promise.all([e.removeSegments(u,r),e.removeManifests([t.key()],r)])}p.Ji=function(){return H_(this,Bq(this))};function Bq(e){var t,n,r,u,c,f,h,v,A,N;return Re(function(B){switch(B.g){case 1:return vy(),t=e.g,n=e.h.drm,r=new Xo,u=!1,oe(B,2),R(B,r.init(),4);case 4:c=[],pq(r,function(z){return c.push(z)}),f=m(c),h=f.next();case 5:if(h.done){B.u(2);break}return v=h.value,R(B,v.getAll(),8);case 8:return A=B.h,R(B,MD(n,t,A),9);case 9:return N=B.h,R(B,v.remove(N),10);case 10:N.length!=A.length&&(u=!0),h=f.next(),B.u(5);break;case 2:return Je(B),R(B,r.destroy(),11);case 11:we(B,3);break;case 3:return B.return(!u)}})}p.list=function(){return H_(this,jq())};function jq(){var e,t,n;return Re(function(r){switch(r.g){case 1:return vy(),e=[],t=new Xo,oe(r,2),R(r,t.init(),4);case 4:return n=Promise.resolve(),hq(t,function(u,c){n=n.then(function(){var f;return Re(function(h){if(h.g==1)return R(h,c.getAllManifests(),2);f=h.h,f.forEach(function(v,A){v=Z_(new xu("manifest",u.ob,u.Ia,A),v),e.push(v)}),X(h)})})}),R(r,n,2);case 2:return Je(r),R(r,t.destroy(),6);case 6:we(r,3);break;case 3:return r.return(e)}})}function Zq(e,t,n,r){var u,c,f,h,v;return Re(function(A){if(A.g==1)return u=null,c=e.g,f={networkingEngine:c,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(N){u=N},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(r.manifest),Ro(e),R(A,n.start(t,f),2);if(A.g!=3)return h=A.h,Ro(e),v=BD(h),R(A,Promise.all(np(v,function(N){return N.createSegmentIndex()})),3);if(Ro(e),u)throw u;return A.return(h)})}p.Bc=function(e,t,n){var r=this,u;return Re(function(c){return c.g==1?(u=new Ze({Mb:r.g,onError:t,be:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),u.configure(n.drm),R(c,Se(u,e.variants,n.offline.usePersistentLicense),2)):c.g!=3?R(c,te(u),3):c.return(u)})};function qq(e,t,n,r){var u=new Map,c=BD(n),f=new Map;c=m(c);for(var h=c.next();!h.done;h=c.next()){h=h.value;var v=Gq(e,t,n,h,r,u);f.set(h.id,v)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&f.get(t.audio.id).variantIds.push(t.id),t.video&&f.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(f.values()),Wf:Array.from(u.values())}}function Gq(e,t,n,r,u,c){var f={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},h=u.offline.numberOfParallelDownloads,v=h===0?r.id:0;return Hq(r,n.presentationTimeline.nb(),function(A){var N=L_(A),B=void 0;if(!c.has(N)){var z=A.endTime-A.startTime;z=PD(t,r.id)*z,z=vD(e.g,z),c.set(N,new gD(A,z,v,!1))}A.$&&(B=L_(A.$),c.has(B)||(z=.5*PD(t,r.id),z=vD(e.g,z),c.set(B,new gD(A.$,z,v,!0)))),f.segments.push({pendingInitSegmentRefId:B,initSegmentKey:B?0:null,startTime:A.startTime,endTime:A.endTime,appendWindowStart:A.appendWindowStart,appendWindowEnd:A.appendWindowEnd,timestampOffset:A.timestampOffset,tilesLayout:A.tilesLayout,pendingSegmentRefId:N,dataKey:0,mimeType:A.mimeType,codecs:A.codecs}),h!==0&&(v=(v+1)%h)}),f}function Hq(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function Ro(e){if(e.l.g)throw new Xe(2,9,7001)}function vy(){if(!q_())throw new Xe(2,9,9e3)}function H_(e,t){return Re(function(n){return n.g==1?(e.i.push(t),oe(n,2),R(n,t,4)):n.g!=2?n.return(n.h):(Je(n),Kn(e.i,t),we(n,0))})}function Vq(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Kn(e.i,n)})}function Kq(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function zq(e,t,n,r){var u,c,f;return Re(function(h){return h.g==1?r.drmInfo?(u=gq(n),c=r.sessionIds.map(function(v){return{sessionId:v,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:UD(r,!1),videoCapabilities:UD(r,!0)}}),R(h,MD(t,e,c),2)):h.return():h.g!=3?(f=h.h,R(h,u.remove(f),3)):R(h,u.add(c.filter(function(v){return!f.includes(v.sessionId)})),0)})}function BD(e){for(var t=new Set,n=m(e.variants),r=n.next();!r.done;r=n.next())r=r.value,r.audio&&t.add(r.audio),r.video&&t.add(r.video);for(n=m(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=m(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function Yq(e){e.variants.map(function(c){return c.video});var t=new Set(e.variants.map(function(c){return c.audio}));e=e.textStreams;for(var n=m(t),r=n.next();!r.done;r=n.next()){r=m(t);for(var u=r.next();!u.done;u=r.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),r=n.next();!r.done;r=n.next());}ne("shaka.offline.Storage",po),po.deleteAll=function(){var e;return Re(function(t){return t.g==1?(e=new Xo,oe(t,2),R(t,mq(e),2)):t.g!=5?(Je(t),R(t,e.destroy(),5)):we(t,0)})},po.prototype.list=po.prototype.list,po.prototype.removeEmeSessions=po.prototype.Ji,po.prototype.remove=po.prototype.remove,po.prototype.store=po.prototype.store,po.prototype.getNetworkingEngine=po.prototype.yb,po.prototype.getConfiguration=po.prototype.getConfiguration,po.prototype.configure=po.prototype.configure,po.prototype.destroy=po.prototype.destroy,po.support=q_;var Wq=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");Z1.offline=q_;function xo(){}function Qo(e,t){for(e={priority:t||0,callback:e},t=0;t<Vp.length;t++)if(Vp[t].priority<e.priority){Vp.splice(t,0,e);return}Vp.push(e)}ne("shaka.polyfill",xo),xo.register=Qo,xo.installAll=function(){for(var e=m(Vp),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Ke("Error installing polyfill!",n)}}};var Vp=[];function jD(){}function ZD(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=m(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())$q(t.value)}function $q(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}xo.Aria=jD,jD.install=ZD,Qo(ZD);function qD(){}function GD(){nP()}xo.EncryptionScheme=qD,qD.install=GD,Qo(GD,-2);function HD(){}function VD(){if(g.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Rd),document.addEventListener("webkitfullscreenerror",Rd),document.addEventListener("mozfullscreenchange",Rd),document.addEventListener("mozfullscreenerror",Rd),document.addEventListener("MSFullscreenChange",Rd),document.addEventListener("MSFullscreenError",Rd)}}function Rd(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}xo.Fullscreen=HD,HD.install=VD,Qo(VD);function yy(){}function KD(){var e=!0;!ri()||ri()&&qu()||ri()&&sn("Fuchsia")||(e=!1),(Ao()||Yo()||Ri()||li()||di()||sn("PC=EOS")||Zu())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),zD=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Xq)}function Xq(e){var t,n,r,u,c,f,h,v,A,N,B;return Re(function(z){switch(z.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,r=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(u=n.contentType,c=ur(u),!c)||r&&(f=r.contentType,h=ur(f),!h))return z.return(t)}else return z.return(t);z.u(2);break}if(!tr())return z.return(t);if(!n){z.u(3);break}return R(z,Qq(n),4);case 4:if(v=z.h,!v)return z.return(t);case 3:if(r){var J=r.contentType;if(ri()&&r.spatialRendering&&(J+="; spatialRendering=true"),A=Ft(J),!A)return z.return(t)}case 2:return e.keySystemConfiguration?(N=e.keySystemConfiguration,R(z,Jq(n,r,N),6)):(t.supported=!0,z.return(t));case 6:(B=z.h)&&(t.supported=!0,t.keySystemAccess=B);case 5:return z.return(t)}})}function Qq(e){var t,n;return Re(function(r){return r.g==1?ri()?R(r,eG(e),3):di()?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width,t+="; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.bitrate&&(t+="; bitrate="+e.bitrate),r.return(Ft(t))):r.u(2):r.g!=2?(n=r.h,r.return(n)):r.return(Ft(e.contentType))})}function Jq(e,t,n){var r,u,c,f,h,v,A,N,B;return Re(function(z){switch(z.g){case 1:if(r=[],u=[],n.audio&&(c={robustness:n.audio.robustness||"",contentType:t.contentType},di()&&t.contentType.includes('codecs="ac-3"')&&(c.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(c.encryptionScheme=n.audio.encryptionScheme),r.push(c)),n.video&&(f={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(f.encryptionScheme=n.video.encryptionScheme),u.push(f)),h={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(h.audioCapabilities=r),u.length&&(h.videoCapabilities=u),v=e?e.contentType:"",A=t?t.contentType:"",N=n.keySystem,B=null,ce(z,2),dn.has(v+"#"+A+"#"+N)){B=dn.get(v+"#"+A+"#"+N)||null,z.u(4);break}return R(z,navigator.requestMediaKeySystemAccess(n.keySystem,[h]),5);case 5:B=z.h,dn.set(v+"#"+A+"#"+N,B);case 4:me(z,3);break;case 2:Ce(z);case 3:return z.return(B)}})}function eG(e){var t,n;return Re(function(r){return r.g==1?g.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.transferFunction==="pq"&&(t+="; eotf=smpte2084"),n=!1,t in Ey?(n=Ey[t],r.u(2)):R(r,cast.__platform__.canDisplayType(t),3)):r.return(Ft(e.contentType)):(r.g!=2&&(n=r.h,Ey[t]=n),r.return(n))})}xo.MediaCapabilities=yy,yy.install=KD;var zD=null;yy.originalMcap=zD;var Ey={};yy.memoizedCanDisplayTypeRequests_=Ey,Qo(KD,-1);function YD(){}function WD(){var e=Zs();(g.MediaSource||g.ManagedMediaSource)&&(e&&g.MediaSource?10>=e?g.MediaSource=null:12>=e?(V_(),$D()):15>=e&&V_():sn("DT_STB_BCM")?(V_(),$D()):(ni()||Ui()||sn("Tizen 4"))&&nG()),(g.MediaSource||g.ManagedMediaSource)&&tG(),g.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&rG()}function V_(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Ye.apply(0,arguments));return t.abort=function(){},t}}function $D(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function tG(){if(g.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return Ll(n)!="mp2t"&&e(n)}}if(g.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);g.ManagedMediaSource.isTypeSupported=function(n){return Ll(n)!="mp2t"&&t(n)}}}function nG(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return zs(n)!="opus"&&e(n)},g.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);g.ManagedMediaSource.isTypeSupported=function(n){return zs(n)!="opus"&&t(n)}}}function rG(){var e=MediaSource.isTypeSupported;li()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(f){return f.startsWith("codecs=")});if(0>r)return e(t);var u=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),c=u.findIndex(function(f){return f.startsWith("vp09")});return 0<=c&&(u[c]="vp9",n[r]='codecs="'+u.join(",")+'"',t=n.join("; ")),e(t)})}xo.MediaSource=YD,YD.install=WD,Qo(WD);function XD(){}function QD(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?iG():g.orientation!=null&&oG())}function iG(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function oG(){function e(){switch(g.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new _y;screen.orientation=t,e(),g.addEventListener("orientationchange",function(){e();var n=new jn("change");t.dispatchEvent(n)})}xo.Orientation=XD,XD.install=QD;function _y(){Nr.call(this),this.type="",this.angle=0}Y(_y,Nr),_y.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},_y.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Qo(QD);function K_(){}var z_,Y_,W_,$_,X_,Q_;function aG(e,t){try{var n=new Ty(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function sG(e){var t=this.mediaKeys;return t&&t!=e&&JD(t,null),delete this.mediaKeys,(this.mediaKeys=e)?JD(e,this):Promise.resolve()}function uG(e){if(e=nr(e.initData),ln(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=ci(e.subarray(4),!0),e=bi(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Ni(e),this.dispatchEvent(t)}xo.PatchedMediaKeysApple=K_,K_.uninstall=function(){z_&&(z_=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Y_),HTMLMediaElement.prototype.setMediaKeys=W_,g.MediaKeys=$_,g.MediaKeySystemAccess=X_,navigator.requestMediaKeySystemAccess=Q_,Y_=Q_=W_=X_=$_=null,g.shakaMediaKeysPolyfill="")},K_.install=function(e){g.HTMLVideoElement&&g.WebKitMediaKeys&&(e!==void 0&&e&&(z_=!0,Y_=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),W_=HTMLMediaElement.prototype.setMediaKeys,$_=g.MediaKeys,X_=g.MediaKeySystemAccess,Q_=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=sG,g.MediaKeys=Kp,g.MediaKeySystemAccess=Ty,navigator.requestMediaKeySystemAccess=aG,g.shakaMediaKeysPolyfill=lG)};function Ty(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,u=!1;if(n.audioCapabilities)for(var c=m(n.audioCapabilities),f=c.next();!f.done;f=c.next())f=f.value,f.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,f.contentType.split(";")[0])&&(t.audioCapabilities.push(f),u=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),c=n.next();!c.done;c=n.next())c=c.value,c.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.videoCapabilities.push(c),u=!0));r||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=u?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Ty.prototype.createMediaKeys=function(){var e=new Kp(this.keySystem);return Promise.resolve(e)},Ty.prototype.getConfiguration=function(){return this.g};function Kp(e){this.h=new WebKitMediaKeys(e),this.g=new Tt}Kp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new J_(this.h)},Kp.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function JD(e,t){if(e.g.Qa(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",uG);try{return td(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}Kp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function J_(e){Nr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Tt,this.sessionId="",this.expiration=NaN,this.closed=new Lr,this.keyStatuses=new e2}Y(J_,Nr),p=J_.prototype,p.generateRequest=function(e,t){var n=this;this.h=new Lr;try{var r=this.l.createSession("video/mp4",nr(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(u){n.h&&(n.h.resolve(),n.h=null),u=new Map().set("messageType",n.keyStatuses.Zb()==null?"license-request":"license-renewal").set("message",Ni(u.message)),u=new jn("message",u),n.dispatchEvent(u)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(Sy(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=n.i.error,n.h!=null)n.h.reject(u),n.h=null;else if(n.g!=null)n.g.reject(u),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Sy(n,"output-not-allowed");break;default:Sy(n,"internal-error")}}),Sy(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},p.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},p.update=function(e){this.g=new Lr;try{this.i.update(nr(e))}catch(t){this.g.reject(t)}return this.g},p.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Qa()}catch(e){this.closed.reject(e)}return this.closed},p.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Sy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new jn("keystatuseschange"),e.dispatchEvent(t)}function e2(){this.size=0,this.g=void 0}p=e2.prototype,p.Zb=function(){return this.g},p.forEach=function(e){this.g&&e(this.g,er.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var t=er.value();return!!(this.g&&no(e,t))},p.entries=function(){},p.keys=function(){},p.values=function(){};var lG="apple";function t2(){}function n2(){g.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||Ui()||sn("Tizen 4")||sn("Tizen 5.0")||vi())&&(MediaKeys.prototype.setServerCertificate=cG)}function cG(){return Promise.resolve(!1)}xo.PatchedMediaKeysCert=t2,t2.install=n2,Qo(n2);function r2(){}function i2(){!g.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=fG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=dG,g.MediaKeys=wy,g.MediaKeySystemAccess=eT,g.shakaMediaKeysPolyfill=hG)}function fG(){return Promise.reject(Error("The key system specified is not supported."))}function dG(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}xo.PatchedMediaKeysNop=r2,r2.install=i2;function wy(){throw new TypeError("Illegal constructor.")}wy.prototype.createSession=function(){},wy.prototype.setServerCertificate=function(){},wy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function eT(){throw this.keySystem="",new TypeError("Illegal constructor.")}eT.prototype.getConfiguration=function(){},eT.prototype.createMediaKeys=function(){};var hG="nop";Qo(i2,-10);function o2(){}function a2(){if(!(!g.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)oT="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=pG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=gG,g.MediaKeys=zp,g.MediaKeySystemAccess=Ay,g.shakaMediaKeysPolyfill=mG}}function tT(e){var t=oT;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function pG(e,t){try{var n=new Ay(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function gG(e){var t=this.mediaKeys;return t&&t!=e&&s2(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&s2(e,this),Promise.resolve()}xo.PatchedMediaKeysWebkit=o2,o2.install=a2;function Ay(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),t=m(t);for(var c=t.next();!c.done;c=t.next()){c=c.value;var f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:c.initDataTypes,sessionTypes:["temporary"],label:c.label},h=!1;if(c.audioCapabilities)for(var v=m(c.audioCapabilities),A=v.next();!A.done;A=v.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType.split(";")[0],this.g)&&(f.audioCapabilities.push(A),r=!0));if(c.videoCapabilities)for(v=m(c.videoCapabilities),A=v.next();!A.done;A=v.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType,this.g)&&(f.videoCapabilities.push(A),r=!0));if(h||(r=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),c.persistentState=="required"&&(n?(f.persistentState="required",f.sessionTypes=["persistent-license"]):r=!1),r){this.h=f;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Ay.prototype.createMediaKeys=function(){var e=new zp(this.g);return Promise.resolve(e)},Ay.prototype.getConfiguration=function(){return this.h};function zp(e){this.l=e,this.h=null,this.g=new Tt,this.i=[],this.j=new Map}function s2(e,t){e.h=t,e.g.Qa();var n=oT;t&&(e.g.D(t,n+"needkey",function(r){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=Ni(r.initData),e.h.dispatchEvent(u)}),e.g.D(t,n+"keymessage",function(r){var u=nT(e,r.sessionId);u&&(r=new Map().set("messageType",u.keyStatuses.Zb()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new jn("message",r),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=nT(e,r.sessionId))&&r.ready()}),e.g.D(t,n+"keyerror",function(r){var u=nT(e,r.sessionId);if(u){var c=Error("EME v0.1b key error"),f=r.errorCode;f.systemCode=r.systemCode,c.errorCode=f,!r.sessionId&&u.h?(r.systemCode==45&&(c.message="Unsupported session type."),u.h.reject(c),u.h=null):r.sessionId&&u.g?(u.g.reject(c),u.g=null):(c=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Iy(u,"output-restricted"):c==1?Iy(u,"expired"):Iy(u,"internal-error"))}}))}zp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new rT(t,this.l,e),this.i.push(e),e},zp.prototype.setServerCertificate=function(){return Promise.resolve(!1)},zp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function nT(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function rT(e,t,n){Nr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Lr,this.keyStatuses=new l2}Y(rT,Nr),p=rT.prototype,p.ready=function(){Iy(this,"usable"),this.g&&this.g.resolve(),this.g=null};function u2(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=nr(bi("LOAD_SESSION|"+n));else{var u=bi("PERSISTENT|");r=hi(u,t)}else r=nr(t)}catch(f){return Promise.reject(f)}e.h=new Lr;var c=tT("generateKeyRequest");try{e.j[c](e.i,r)}catch(f){if(f.name!="InvalidStateError")return e.h=null,Promise.reject(f);new on(function(){try{e.j[c](e.i,r)}catch(h){e.h.reject(h),e.h=null}}).Z(.01)}return e.h}function iT(e,t,n){if(e.g)e.g.then(function(){return iT(e,t,n)}).catch(function(){return iT(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=Cr(n),u=JSON.parse(r);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Wo(u.keys[0].k),u=Wo(u.keys[0].kid)}else r=nr(n),u=null;var c=tT("addKey");try{e.j[c](e.i,r,u,e.sessionId)}catch(f){e.g.reject(f),e.g=null}}}function Iy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new jn("keystatuseschange"),e.dispatchEvent(t)}p.generateRequest=function(e,t){return u2(this,t,null)},p.load=function(e){return this.l=="persistent-license"?u2(this,null,e):Promise.reject(Error("Not a persistent session."))},p.update=function(e){var t=new Lr;return iT(this,t,e),t},p.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=tT("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},p.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function l2(){this.size=0,this.g=void 0}p=l2.prototype,p.Zb=function(){return this.g},p.forEach=function(e){this.g&&e(this.g,er.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var t=er.value();return!!(this.g&&no(e,t))},p.entries=function(){},p.keys=function(){},p.values=function(){};var oT="",mG="webkit";Qo(a2);function c2(){}function f2(){if(g.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=yG,Object.defineProperty(e,"disablePictureInPicture",{get:_G,set:TG,enumerable:!0,configurable:!0}),document.exitPictureInPicture=EG,document.addEventListener("webkitpresentationmodechanged",vG,!0))}}function vG(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function yG(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function EG(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function _G(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function TG(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}xo.PiPWebkit=c2,c2.install=f2,Qo(f2);function d2(){}function h2(){g.crypto&&("randomUUID"in g.crypto||(g.crypto.randomUUID=SG))}function SG(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}xo.RandomUUID=d2,d2.install=h2,Qo(h2);function p2(){}function g2(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:wG})}function wG(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}xo.Symbol=p2,p2.install=g2,Qo(g2);function m2(){}function v2(){if(g.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}xo.VideoPlayPromise=m2,m2.install=v2,Qo(v2);function y2(){}function E2(){if(g.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||vi())&&(e.getVideoPlaybackQuality=AG)}}function AG(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}xo.VideoPlaybackQuality=y2,y2.install=E2,Qo(E2);function _2(){}function T2(){if(!g.VTTCue&&g.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=aT;else if(t==6)e=IG;else{try{var n=!!aT(1,2,"")}catch(r){n=!1}n&&(e=aT)}e&&(g.VTTCue=function(r,u,c){return e(r,u,c)})}}function aT(e,t,n){return new g.TextTrackCue(e,t,n)}function IG(e,t,n){return new g.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}xo.VTTCue=_2,_2.install=T2,Qo(T2);function Ma(){}Ma.prototype.parseInit=function(){},Ma.prototype.setSequenceMode=function(){},Ma.prototype.setManifestType=function(){},Ma.prototype.parseMedia=function(e,t){var n=null,r=[];e=Cr(e).split(/\r?\n/),e=m(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=bG.exec(u))){var c=CG.exec(u[1]);c=60*parseInt(c[1],10)+parseFloat(c[2].replace(",",".")),u=new jr(c,t.segmentEnd?t.segmentEnd:c+2,u[2]),n&&(n.endTime=c,r.push(n)),n=u}return n&&r.push(n),r},ne("shaka.text.LrcTextParser",Ma),Ma.prototype.parseMedia=Ma.prototype.parseMedia,Ma.prototype.setManifestType=Ma.prototype.setManifestType,Ma.prototype.setSequenceMode=Ma.prototype.setSequenceMode,Ma.prototype.parseInit=Ma.prototype.parseInit;var bG=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,CG=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;_i["application/x-subtitle-lrc"]=function(){return new Ma};function ga(){}ga.prototype.parseInit=function(){},ga.prototype.setSequenceMode=function(){},ga.prototype.setManifestType=function(){},ga.prototype.parseMedia=function(e,t,n,r){var u=Cr(e);if(e=[],u=="")return e;var c=Tu(u,"tt",!0);if(!c)throw new Xe(2,2,2005,"Failed to parse TTML.");if(u=Eo(c,"body")[0],!u)return[];var f=Ka(c,Yp,"frameRate"),h=Ka(c,Yp,"subFrameRate"),v=Ka(c,Yp,"frameRateMultiplier"),A=Ka(c,Yp,"tickRate"),N=Ka(c,Yp,"cellResolution"),B=c.attributes["xml:space"]||"default",z=Ka(c,Ry,"extent");if(B!="default"&&B!="preserve")throw new Xe(2,2,2005,"Invalid xml:space value: "+B);B=B=="default",f=new DG(f,h,v,A),N=MG(N),h=Eo(c,"metadata")[0],h=(h?h.children:[]).filter(function(pe){return pe!="\n"}),v=Eo(c,"style"),c=Eo(c,"region"),A=[];for(var J=m(c),fe=J.next();!fe.done;fe=J.next())(fe=RG(fe.value,v,z))&&A.push(fe);if(sr(u,"p").length)throw new Xe(2,2,2001,"<p> can only be inside <div> in TTML");for(z=m(sr(u,"div")),J=z.next();!J.done;J=z.next())if(sr(J.value,"span").length)throw new Xe(2,2,2001,"<span> can only be inside <p> in TTML");return(t=S2(u,t,f,h,v,c,A,B,N,null,!1,n,r))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function S2(e,t,n,r,u,c,f,h,v,A,N,B,z){var J=A;if(qs(e)){if(!N)return null;var fe={tagName:"span",children:[ei(e)],attributes:{},parent:null}}else fe=e;for(var pe=null,Ee=m(D2),Le=Ee.next();!Le.done&&!(pe=Cy(fe,"backgroundImage",r,"#",Le.value)[0]);Le=Ee.next());Ee=null,Le=Ka(fe,D2,"backgroundImage");var Fe=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(Le&&Fe.test(Le)){if(Ee=parseInt(Le.split(":").pop(),10)-1,Ee>=z.length)return null;Ee=z[Ee]}else B&&Le&&!Le.startsWith("#")&&(Fe=new Ei(B),Le=new Ei(Le),(Le=Fe.resolve(Le).toString())&&(Ee=Le));if((e.tagName=="p"||pe||Ee)&&(N=!0),e=N,Le=(fe.attributes["xml:space"]||(h?"default":"preserve"))=="default",Fe=fe.children.every(qs),h=[],!Fe)for(var it=m(fe.children),Ue=it.next();!Ue.done;Ue=it.next())(Ue=S2(Ue.value,t,n,r,u,c,f,Le,v,fe,N,B,z))&&h.push(Ue);if(r=A!=null,B=ei(fe),B=fe.children.length&&B&&/\S/.test(B),it=fe.attributes.begin||fe.attributes.end||fe.attributes.dur,!(it||B||fe.tagName=="br"||h.length!=0||r&&!Le))return null;for(z=I2(fe,n),B=z.start,z=z.end;J&&J.tagName&&J.tagName!="tt";)z=NG(J,n,B,z),B=z.start,z=z.end,J=J.parent;if(B==null&&(B=0),B+=t.periodStart,z=z==null?1/0:z+t.periodStart,B=Math.max(B,t.segmentStart),z=Math.min(z,t.segmentEnd),!it&&0<h.length)for(B=1/0,z=0,t=m(h),n=t.next();!n.done;n=t.next())n=n.value,B=Math.min(B,n.startTime),z=Math.max(z,n.endTime);if(fe.tagName=="br")return u=new jr(B,z,""),u.lineBreak=!0,u;if(t="",Fe&&(t=yi(ei(fe)||""),Le&&(t=t.replace(/\s+/g," "))),t=new jr(B,z,t),t.nestedCues=h,N||(t.isContainer=!0),v&&(t.cellResolution=v),v=Cy(fe,"region",c,"")[0],fe.attributes.region&&v&&v.attributes["xml:id"]){var Qe=v.attributes["xml:id"];t.region=f.filter(function(rt){return rt.id==Qe})[0]}return f=v,A&&r&&!fe.attributes.region&&!fe.attributes.style&&(f=Cy(A,"region",c,"")[0]),xG(t,fe,f,pe,Ee,u,e,h.length==0),t}function RG(e,t,n){var r=new Yt,u=e.attributes["xml:id"];if(!u)return null;r.id=u,u=null,n&&(u=fT.exec(n)||dT.exec(n)),n=u?Number(u[1]):null,u=u?Number(u[2]):null;var c,f=by(e,t,"extent");if(f){var h=(c=fT.exec(f))||dT.exec(f);h!=null&&(r.width=Number(h[1]),r.height=Number(h[2]),c||(n!=null&&(r.width=100*r.width/n),u!=null&&(r.height=100*r.height/u)),r.widthUnits=c||n!=null?wn:0,r.heightUnits=c||u!=null?wn:0)}return(e=by(e,t,"origin"))&&(h=(c=fT.exec(e))||dT.exec(e),h!=null&&(r.viewportAnchorX=Number(h[1]),r.viewportAnchorY=Number(h[2]),c?f||(r.width=100-r.viewportAnchorX,r.widthUnits=wn,r.height=100-r.viewportAnchorY,r.heightUnits=wn):(u!=null&&(r.viewportAnchorY=100*r.viewportAnchorY/u),n!=null&&(r.viewportAnchorX=100*r.viewportAnchorX/n)),r.viewportAnchorUnits=c||n!=null?wn:0)),r}function sT(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),t.length==4)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function xG(e,t,n,r,u,c,f,h){if(f=f||h,No(t,n,c,"direction",f)=="rtl"&&(e.direction="rtl"),h=No(t,n,c,"writingMode",f),h=="tb"||h=="tblr"?e.writingMode="vertical-lr":h=="tbrl"?e.writingMode="vertical-rl":h=="rltb"||h=="rl"?e.direction="rtl":h&&(e.direction=Ml),(h=No(t,n,c,"textAlign",!0))?(e.positionAlign=LG[h],e.lineAlign=OG[h],e.textAlign=If[h.toUpperCase()]):e.textAlign=ba,(h=No(t,n,c,"displayAlign",!0))&&(e.displayAlign=hm[h.toUpperCase()]),(h=No(t,n,c,"color",f))&&(e.color=sT(h)),(h=No(t,n,c,"backgroundColor",f))&&(e.backgroundColor=sT(h)),(h=No(t,n,c,"border",f))&&(e.border=h),h=No(t,n,c,"fontFamily",f))switch(h){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=h.split(",").filter(function(v){return v!="default"}).join(",")}switch((h=No(t,n,c,"fontWeight",f))&&h=="bold"&&(e.fontWeight=zu),h=No(t,n,c,"wrapOption",f),e.wrapLine=!(h&&h=="noWrap"),(h=No(t,n,c,"lineHeight",f))&&h.match(xd)&&(e.lineHeight=h),(h=No(t,n,c,"fontSize",f))&&(h.match(xd)||h.match(PG))&&(e.fontSize=h),(h=No(t,n,c,"fontStyle",f))&&(e.fontStyle=Cf[h.toUpperCase()]),r?(u=r.attributes.imageType||r.attributes.imagetype,h=r.attributes.encoding,r=ei(r).trim(),u=="PNG"&&h=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):u&&(e.backgroundImage=u),(r=No(t,n,c,"textOutline",f))&&(r=r.split(" "),r[0].match(xd)?e.textStrokeColor=e.color:(e.textStrokeColor=sT(r[0]),r.shift()),r[0]&&r[0].match(xd)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=No(t,n,c,"letterSpacing",f))&&r.match(xd)&&(e.letterSpacing=r),(r=No(t,n,c,"linePadding",f))&&r.match(xd)&&(e.linePadding=r),(r=No(t,n,c,"opacity",f))&&(e.opacity=parseFloat(r)),(r=by(n,c,"textDecoration"))&&w2(e,r),(r=uT(t,c,"textDecoration"))&&w2(e,r),(r=No(t,n,c,"textCombine",f))&&(e.textCombineUpright=r),No(t,n,c,"ruby",f)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function w2(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(Vs)||e.textDecoration.push(Vs);break;case"noUnderline":e.textDecoration.includes(Vs)&&Kn(e.textDecoration,Vs);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Kn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Kn(e.textDecoration,"overline")}}function No(e,t,n,r,u){return u=u===void 0?!0:u,(e=uT(e,n,r))?e:u?by(t,n,r):null}function by(e,t,n){if(!e)return null;var r=Ka(e,Ry,n);return r||A2(e,t,n)}function uT(e,t,n){var r=Ka(e,Ry,n);return r||A2(e,t,n)}function A2(e,t,n){e=Cy(e,"style",t,"");for(var r=null,u=0;u<e.length;u++){var c=Po(e[u],"urn:ebu:tt:style",n);c||(c=Ka(e[u],Ry,n)),c||(c=uT(e[u],t,n)),c&&(r=c)}return r}function Cy(e,t,n,r,u){var c=[];if(!e||1>n.length)return c;var f=e;for(e=null;!e&&!(e=u?Po(f,u,t):f.attributes[t])&&(f=f.parent,f););if(t=e){for(t=m(t.split(" ")),u=t.next();!u.done;u=t.next())for(u=u.value,e=m(n),f=e.next();!f.done;f=e.next())if(f=f.value,r+f.attributes["xml:id"]==u){c.push(f);break}}return c}function NG(e,t,n,r){return e=I2(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function I2(e,t){var n=lT(e.attributes.begin,t),r=lT(e.attributes.end,t);return e=lT(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function lT(e,t){var n=null;if(b2.test(e)){e=b2.exec(e),n=Number(e[1]);var r=Number(e[2]),u=Number(e[3]),c=Number(e[4]);c+=(Number(e[5])||0)/t.h,u+=c/t.frameRate,n=u+60*r+3600*n}else if(C2.test(e))n=cT(C2,e);else if(R2.test(e))n=cT(R2,e);else if(x2.test(e))e=x2.exec(e),n=Number(e[1])/t.frameRate;else if(N2.test(e))e=N2.exec(e),n=Number(e[1])/t.g;else if(M2.test(e))n=cT(M2,e);else if(e)throw new Xe(2,2,2001,"Could not parse cue time range in TTML");return n}function cT(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function MG(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{ic:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}ne("shaka.text.TtmlTextParser",ga),ga.prototype.parseMedia=ga.prototype.parseMedia,ga.prototype.setManifestType=ga.prototype.setManifestType,ga.prototype.setSequenceMode=ga.prototype.setSequenceMode,ga.prototype.parseInit=ga.prototype.parseInit;function DG(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var fT=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,PG=/^(\d{1,4}(?:\.\d+)?|100)%$/,xd=/^(\d+px|\d+em|\d*\.?\d+c)$/,dT=/^(\d+)px (\d+)px$/,b2=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,C2=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,R2=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,x2=/^(\d*(?:\.\d*)?)f$/,N2=/^(\d*(?:\.\d*)?)t$/,M2=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),OG={left:Ku,center:"center",right:"end",start:Ku,end:"end"},LG={left:"line-left",center:"center",right:"line-right"},Yp=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Ry=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],D2=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];_i["application/ttml+xml"]=function(){return new ga};function Yi(){this.g=new ga}Yi.prototype.parseInit=function(e){var t=!1;if(new V().box("moov",W).box("trak",W).box("mdia",W).box("minf",W).box("stbl",W).R("stsd",ee).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new Xe(2,2,2007)},Yi.prototype.setSequenceMode=function(){},Yi.prototype.setManifestType=function(){},Yi.prototype.parseMedia=function(e,t,n){var r=this,u=!1,c=[],f=[];if(new V().box("moof",W).box("traf",W).R("subs",function(h){f=[];for(var v=h.reader,A=v.P(),N=0;N<A;N++){v.P();for(var B=v.la(),z=0;z<B;z++)h.version==1?f.push(v.P()):f.push(v.la()),v.S(),v.S(),v.P()}}).box("mdat",he(function(h){if(u=!0,f.length){for(var v=nr(h,0,f[0]),A=[],N=f[0],B=1;B<f.length;B++){var z=nr(h,N,f[B]);z=Fh(z),A.push("data:image/png;base64,"+z),N+=f[B]}c=c.concat(r.g.parseMedia(v,t,n,A))}else c=c.concat(r.g.parseMedia(h,t,n,[]))})).parse(e,!1),!u)throw new Xe(2,2,2007);return c},ne("shaka.text.Mp4TtmlParser",Yi),Yi.prototype.parseMedia=Yi.prototype.parseMedia,Yi.prototype.setManifestType=Yi.prototype.setManifestType,Yi.prototype.setSequenceMode=Yi.prototype.setSequenceMode,Yi.prototype.parseInit=Yi.prototype.parseInit,_i['application/mp4; codecs="stpp"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im1i"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im2i"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im2t"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.etd1"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.etd1|im1t"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im1t|etd1"']=function(){return new Yi},_i['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Yi};function Go(){this.h=!1,this.g="UNKNOWN"}Go.prototype.parseInit=function(){},Go.prototype.setSequenceMode=function(e){this.h=e},Go.prototype.setManifestType=function(e){this.g=e},Go.prototype.parseMedia=function(e,t){e=Cr(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Xe(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new Xe(2,2,2e3);if(e=Eu(e[1]),e==null)throw new Xe(2,2,2e3);r=Number(r[1]);for(var u=t.segmentStart-t.periodStart;95443.7176888889<=u;)u-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}else e=t.segmentStart;for(t=[],r=m(n[0].split("\n")),u=r.next();!u.done;u=r.next())if(u=u.value,/^Region:/.test(u)){u=new aa(u);var c=new Yt;wa(u),ys(u);for(var f=wa(u);f;){var h=c,v=f;(f=/^id=(.*)$/.exec(v))?h.id=f[1]:(f=/^width=(\d{1,2}|100)%$/.exec(v))?h.width=Number(f[1]):(f=/^lines=(\d+)$/.exec(v))?(h.height=Number(f[1]),h.heightUnits=2):(f=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(v))?(h.regionAnchorX=Number(f[1]),h.regionAnchorY=Number(f[2])):(f=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(v))?(h.viewportAnchorX=Number(f[1]),h.viewportAnchorY=Number(f[2])):/^scroll=up$/.exec(v)&&(h.scroll="up"),ys(u),f=wa(u)}t.push(c)}for(r=new Map,Tc(r),u=[],n=m(n.slice(1)),c=n.next();!c.done;c=n.next()){if(c=c.value.split("\n"),(c.length!=1||c[0])&&!/^NOTE($|[ \t])/.test(c[0])&&c[0]=="STYLE"){for(h=[],f=-1,v=1;v<c.length;v++)c[v].includes("::cue")&&(h.push([]),f=h.length-1),f!=-1&&(h[f].push(c[v]),c[v].includes("}")&&(f=-1));for(h=m(h),f=h.next();!f.done;f=h.next()){var A=f.value;f="global",(v=A[0].match(/\((.*)\)/))&&(f=v.pop()),v=A.slice(1,-1),A[0].includes("}")&&(A=/\{(.*?)\}/.exec(A[0]))&&(v=A[1].split(";")),(A=r.get(f))||(A=new jr(0,0,""));for(var N=!1,B=0;B<v.length;B++){var z=/^\s*([^:]+):\s*(.*)/.exec(v[B]);if(z){var J=z[2].trim().replace(";","");switch(z[1].trim()){case"background-color":case"background":N=!0,A.backgroundColor=J;break;case"color":N=!0,A.color=J;break;case"font-family":N=!0,A.fontFamily=J;break;case"font-size":N=!0,A.fontSize=J;break;case"font-weight":(700<=parseInt(J,10)||J=="bold")&&(N=!0,A.fontWeight=zu);break;case"font-style":switch(J){case"normal":N=!0,A.fontStyle=Ph;break;case"italic":N=!0,A.fontStyle=Su;break;case"oblique":N=!0,A.fontStyle="oblique"}break;case"opacity":N=!0,A.opacity=parseFloat(J);break;case"text-combine-upright":N=!0,A.textCombineUpright=J;break;case"text-shadow":N=!0,A.textShadow=J;break;case"white-space":N=!0,A.wrapLine=J!="noWrap"}}}N&&r.set(f,A)}}if(A=c,N=e,A.length==1&&!A[0]||/^NOTE($|[ \t])/.test(A[0])||A[0]=="STYLE"||A[0]=="REGION")c=null;else if(c=null,A[0].includes("-->")||(c=A[0],A.splice(0,1)),h=new aa(A[0]),f=yu(h),B=Sa(h,/[ \t]+--\x3e[ \t]+/g),v=yu(h),f==null||B==null||v==null)Ke("Failed to parse VTT time code. Cue skipped:",c,A),c=null;else{for(f+=N,v+=N,N=A.slice(1).join("\n").trim(),r.has("global")?(A=r.get("global").clone(),A.startTime=f,A.endTime=v,A.payload=N):A=new jr(f,v,N),ys(h),f=wa(h);f;)P2(A,f,t),ys(h),f=wa(h);Sf(A,r),c!=null&&(A.id=c),c=A}c&&u.push(c)}return u};function P2(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=ba:e.textAlign=If[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Af)):(r=/^region:(.*)$/.exec(t))?(t=kG(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=bf[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Dl,e.line=Number(n[1]),n[2]&&(e.lineAlign=bf[n[2].toUpperCase()]))}function kG(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}ne("shaka.text.VttTextParser",Go),Go.prototype.parseMedia=Go.prototype.parseMedia,Go.prototype.setManifestType=Go.prototype.setManifestType,Go.prototype.setSequenceMode=Go.prototype.setSequenceMode,Go.prototype.parseInit=Go.prototype.parseInit,_i["text/vtt"]=function(){return new Go},_i['text/vtt; codecs="vtt"']=function(){return new Go},_i['text/vtt; codecs="wvtt"']=function(){return new Go};function Da(){this.g=null}Da.prototype.parseInit=function(e){var t=this,n=!1;if(new V().box("moov",W).box("trak",W).box("mdia",W).R("mdhd",function(r){r=$a(r.reader,r.version),t.g=r.timescale}).box("minf",W).box("stbl",W).R("stsd",ee).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new Xe(2,2,2008);if(!n)throw new Xe(2,2,2008)},Da.prototype.setSequenceMode=function(){},Da.prototype.setManifestType=function(){},Da.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new Xe(2,2,2008);var n=0,r=[],u,c=[],f=!1,h=!1,v=!1,A=null;if(new V().box("moof",W).box("traf",W).R("tfdt",function(it){f=!0,n=To(it.reader,it.version).baseMediaDecodeTime}).R("tfhd",function(it){A=Cs(it.reader,it.flags).Zc}).R("trun",function(it){h=!0,r=Cu(it.reader,it.version,it.flags).Tg}).box("mdat",he(function(it){v=!0,u=it})).parse(e,!1),!v&&!f&&!h)throw new Xe(2,2,2008);e=n;for(var N=new k(u,0),B=m(r),z=B.next();!z.done;z=B.next()){z=z.value;var J=z.Kf||A,fe=z.ke?n+z.ke:e;e=fe+(J||0);var pe=0;do{var Ee=N.P();pe+=Ee;var Le=N.P(),Fe=null;Te(Le)=="vttc"?8<Ee&&(Fe=N.rb(Ee-8)):N.skip(Ee-8),J&&Fe&&(Ee=FG(Fe,t.periodStart+fe/this.g,t.periodStart+e/this.g),c.push(Ee))}while(z.sampleSize&&pe<z.sampleSize)}return c.filter(Ys)};function FG(e,t,n){var r,u,c;return new V().box("payl",he(function(f){r=Cr(f)})).box("iden",he(function(f){u=Cr(f)})).box("sttg",he(function(f){c=Cr(f)})).parse(e),r?UG(r,u,c,t,n):null}function UG(e,t,n,r,u){if(e=new jr(r,u,e),Sf(e),t&&(e.id=t),n)for(t=new aa(n),n=wa(t);n;)P2(e,n,[]),ys(t),n=wa(t);return e}ne("shaka.text.Mp4VttParser",Da),Da.prototype.parseMedia=Da.prototype.parseMedia,Da.prototype.setManifestType=Da.prototype.setManifestType,Da.prototype.setSequenceMode=Da.prototype.setSequenceMode,Da.prototype.parseInit=Da.prototype.parseInit,_i['application/mp4; codecs="wvtt"']=function(){return new Da};function Pa(){}Pa.prototype.parseInit=function(){},Pa.prototype.setSequenceMode=function(){},Pa.prototype.setManifestType=function(){},Pa.prototype.parseMedia=function(e){var t=Cr(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var r=new aa(n[0]),u=yu(r),c=Sa(r,/,/g);if(r=yu(r),u==null||c==null||r==null)throw new Xe(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new jr(u,r,n.slice(1).join("\n").trim()))}return e},ne("shaka.text.SbvTextParser",Pa),Pa.prototype.parseMedia=Pa.prototype.parseMedia,Pa.prototype.setManifestType=Pa.prototype.setManifestType,Pa.prototype.setSequenceMode=Pa.prototype.setSequenceMode,Pa.prototype.parseInit=Pa.prototype.parseInit,_i["text/x-subviewer"]=function(){return new Pa};function ma(){this.g=new Go}ma.prototype.parseInit=function(){},ma.prototype.setSequenceMode=function(){},ma.prototype.setManifestType=function(){},ma.prototype.parseMedia=function(e,t,n){return e=Cr(e),e=O2(e),e=nr(bi(e)),this.g.parseMedia(e,t,n,[])};function O2(e){var t="WEBVTT\n\n";if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=m(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}ne("shaka.text.SrtTextParser",ma),ma.srt2webvtt=O2,ma.prototype.parseMedia=ma.prototype.parseMedia,ma.prototype.setManifestType=ma.prototype.setManifestType,ma.prototype.setSequenceMode=ma.prototype.setSequenceMode,ma.prototype.parseInit=ma.prototype.parseInit,_i["text/srt"]=function(){return new ma};function Oa(){}Oa.prototype.parseInit=function(){},Oa.prototype.setSequenceMode=function(){},Oa.prototype.setManifestType=function(){},Oa.prototype.parseMedia=function(e){var t="",n="",r=null,u=null;for(u=Cr(e).split(/\r?\n\s*\r?\n/),e=m(u),u=e.next();!u.done;u=e.next()){var c=u.value;u=c,(c=jG.exec(c))&&(r=c[1],u=c[2]),r=="V4 Styles"||r=="V4+ Styles"?(t=u,t=n?t+("\n"+u):u):r=="Events"&&(n=n?n+("\n"+u):u)}for(r=[],u=null,t=m(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(c=F2.exec(e))){if(e=c[1].trim(),c=c[2].trim(),e=="Format")u=c.split(xy);else if(e=="Style"){e=c.split(xy),c={};for(var f=0;f<u.length&&f<e.length;f++)c[u[f]]=e[f];r.push(c)}}for(u=[],t=null,n=m(n.split(/\r?\n/)),c=n.next(),e={};!c.done;e={gh:void 0},c=n.next())if(c=c.value,!/^\s*;/.test(c)&&(f=F2.exec(c))){if(c=f[1].trim(),f=f[2].trim(),c=="Format")t=f.split(xy);else if(c=="Dialogue"){f=f.split(xy),c={};for(var h=0;h<t.length&&h<f.length;h++)c[t[h]]=f[h];h=k2(c.Start);var v=k2(c.End);f=new jr(h,v,f.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),e.gh=c.Style,(e=r.find(function(A){return function(N){return N.Name==A.gh}}(e)))&&BG(f,e),u.push(f)}}return u};function BG(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=L2(n))&&(e.color=n),(n=t.BackColour)&&(n=L2(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=zu),t.Italic&&(e.fontStyle=Su),t.Underline&&e.textDecoration.push(Vs),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Nl,e.textAlign="start";break;case 2:e.displayAlign=Nl,e.textAlign=ba;break;case 3:e.displayAlign=Nl,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=ba;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=ba;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function L2(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function k2(e){return e=ZG.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}ne("shaka.text.SsaTextParser",Oa),Oa.prototype.parseMedia=Oa.prototype.parseMedia,Oa.prototype.setManifestType=Oa.prototype.setManifestType,Oa.prototype.setSequenceMode=Oa.prototype.setSequenceMode,Oa.prototype.parseInit=Oa.prototype.parseInit;var jG=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,F2=/^\s*([^:]+):\s*(.*)/,xy=/\s*,\s*/,ZG=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;_i["text/x-ssa"]=function(){return new Oa};function U2(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Nd:n,da:e}:null}function B2(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var u=((e[t+2]&192)>>>6)+1,c=(e[t+2]&1)<<2;return c|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:c,codec:"mp4a.40."+u}}function j2(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function qG(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function La(e){this.i=e,this.h=0,this.g=new Map}p=La.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ft(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Oo(t)||"mp4a.40.2")+'"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,r){for(var u=nr(e),c=ko(u),f=c.length;f<u.length&&!j2(u,f);f++);if(e=1e3*n.endTime,c=la(c),c.length&&n&&(c=c.find(function(N){return N.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=c.data),c=B2(u,f),!c)return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=c.sampleRate,t.channelsCount=c.channelCount;for(var h=[];f<u.length;){var v=U2(u,f);if(!v)return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));var A=v.Nd+v.da;f+A<=u.length&&h.push({data:u.subarray(f+v.Nd,f+A),size:v.da,duration:1024,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),f+=A}return u=c.sampleRate,e=Math.floor(e*u/1e3),r={id:t.id,type:"audio",codecs:c.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,ab:[],qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.h,baseMediaDecodeTime:e,Ya:h},stream:t},r=new Id([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=bd(r),this.g.set(n,t)),n=Zp(r),this.h++,t=hi(t,n),Promise.resolve(t)},ne("shaka.transmuxer.AacTransmuxer",La),La.prototype.transmux=La.prototype.transmux,La.prototype.getOriginalMimeType=La.prototype.getOriginalMimeType,La.prototype.convertCodecs=La.prototype.convertCodecs,La.prototype.isSupported=La.prototype.isSupported,La.prototype.destroy=La.prototype.destroy,Ts("audio/aac",function(){return new La("audio/aac")},sa);function Z2(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,u=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+u>e.length)return null;var c=e[t+6]>>5,f=0;c===2?f+=2:(c&1&&c!==1&&(f+=2),c&4&&(f+=2)),f=(e[t+6]<<8|e[t+7])>>12-f&1;var h=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|h>>2,(h&3)<<6|c<<3|f<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][c]+f,qa:e,da:u}}function GG(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var u,c;0<r;){c=e[t];var f=Math.min(r,8),h=8-f;u=4278190080>>>24+h<<h,u=(c&u)>>h,n=n?n<<f|u:u,t+=1,r-=f}if(16>n)return!0}return!1}function ns(e){this.i=e,this.h=0,this.g=new Map}p=ns.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ft(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,r){e=nr(e);for(var u=ko(e),c=u.length;c<e.length&&!GG(e,c);c++);var f=1e3*n.endTime;u=la(u),u.length&&n&&(u=u.find(function(N){return N.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=u.data),u=0;for(var h=new Uint8Array([]),v=[];c<e.length;){var A=Z2(e,c);if(!A)return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=A.sampleRate,t.channelsCount=A.channelCount,u=A.sampleRate,h=A.qa,v.push({data:e.subarray(c,c+A.da),size:A.da,duration:1536,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),c+=A.da}return e=Math.floor(f*u/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,ab:[],qa:h,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.h,baseMediaDecodeTime:e,Ya:v},stream:t},r=new Id([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=bd(r),this.g.set(n,t)),n=Zp(r),this.h++,t=hi(t,n),Promise.resolve(t)},ne("shaka.transmuxer.Ac3Transmuxer",ns),ns.prototype.transmux=ns.prototype.transmux,ns.prototype.getOriginalMimeType=ns.prototype.getOriginalMimeType,ns.prototype.convertCodecs=ns.prototype.convertCodecs,ns.prototype.isSupported=ns.prototype.isSupported,ns.prototype.destroy=ns.prototype.destroy,Ts("audio/ac3",function(){return new ns("audio/ac3")},sa);function q2(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new xa(e.subarray(t+2));xt(n,2),xt(n,3);var r=Wt(n,11)+1<<1,u=Wt(n,2);if(u==3){u=Wt(n,2),u=[24e3,22060,16e3][u];var c=3}else u=[48e3,44100,32e3][u],c=Wt(n,2);var f=Wt(n,3),h=Wt(n,1);return n=Wt(n,5),t+r>e.byteLength?null:(e=Math.floor(r*u/(16*[1,2,3,6][c])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|n<<1|0,0|f<<1|h<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][f]+h,qa:e,da:r})}function rs(e){this.i=e,this.h=0,this.g=new Map}p=rs.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ft(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,r){e=nr(e);for(var u=ko(e),c=u.length;c<e.length&&(e[c]<<8|e[c+1]<<0)!==2935;c++);var f=1e3*n.endTime;u=la(u),u.length&&n&&(u=u.find(function(N){return N.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=u.data),u=0;for(var h=new Uint8Array([]),v=[];c<e.length;){var A=q2(e,c);if(!A)return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=A.sampleRate,t.channelsCount=A.channelCount,u=A.sampleRate,h=A.qa,v.push({data:e.subarray(c,c+A.da),size:A.da,duration:1536,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),c+=A.da}return e=Math.floor(f*u/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,ab:[],qa:h,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.h,baseMediaDecodeTime:e,Ya:v},stream:t},r=new Id([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=bd(r),this.g.set(n,t)),n=Zp(r),this.h++,t=hi(t,n),Promise.resolve(t)},ne("shaka.transmuxer.Ec3Transmuxer",rs),rs.prototype.transmux=rs.prototype.transmux,rs.prototype.getOriginalMimeType=rs.prototype.getOriginalMimeType,rs.prototype.convertCodecs=rs.prototype.convertCodecs,rs.prototype.isSupported=rs.prototype.isSupported,rs.prototype.destroy=rs.prototype.destroy,Ts("audio/ec3",function(){return new rs("audio/ec3")},sa);function HG(e){if(!e.length)return null;var t=e.find(function(pe){return pe.type==7});if(e=e.find(function(pe){return pe.type==8}),!t||!e)return null;var n=new xa(t.data),r=or(n);if(or(n),or(n),Jn(n),KG.includes(r)&&(r=Tn(n),r===3&&xt(n,1),Jn(n),Jn(n),xt(n,1),Sn(n))){r=r!==3?8:12;for(var u=0;u<r;u++)Sn(n)&&(6>u?Jr(n,16):Jr(n,64))}if(Jn(n),r=Tn(n),r===0)Tn(n);else if(r===1)for(xt(n,1),Jn(n),Jn(n),r=Tn(n),u=0;u<r;u++)Jn(n);Jn(n),xt(n,1);var c=Tn(n),f=Tn(n),h=Wt(n,1);h===0&&xt(n,1),xt(n,1);var v=0,A=0,N=0,B=0;if(Sn(n)&&(v=Tn(n),A=Tn(n),N=Tn(n),B=Tn(n)),u=r=1,Sn(n)&&Sn(n)){var z=or(n),J=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],fe=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<z&&16>=z?(r=J[z-1],u=fe[z-1]):z===255&&(r=Wt(n,16),u=Wt(n,16))}return n=(2-h)*(f+1)*16-2*N-2*B,c=16*(c+1)-2*v-2*A,v=[],t=t.fullData,v.push(t.byteLength>>>8&255),v.push(t.byteLength&255),v=v.concat.apply(v,T(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,T(e)),e=new Uint8Array([1,v[3],v[4],v[5],255,225].concat(v,[1],t)),{height:n,width:c,ya:e,Ba:r,Ca:u}}function VG(e){var t=!1,n=[],r=e.find(function(v){return v.type==7}),u=!1;e=m(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;var f=!1;switch(c.type){case 1:f=u=!0;var h=c.data;r&&4<h.length&&(h=Js(new xa(h)),h===2||h===4||h===7||h===9)&&(t=!0);break;case 5:t=f=u=!0;break;case 6:f=!0;break;case 7:f=!0;break;case 8:f=!0;break;case 9:u=f=!0;break;case 12:f=!0;break;default:f=!1}u&&f&&(f=c.fullData.byteLength,h=new Uint8Array(4),h[0]=f>>24&255,h[1]=f>>16&255,h[2]=f>>8&255,h[3]=f&255,n.push(h),n.push(c.fullData))}return n.length?{data:hi.apply(co,T(n)),hd:t}:null}var KG=[100,110,122,244,44,83,86,118,128,138,139,134];function zG(e){if(!e.length)return null;var t=e.find(function(f){return f.type==32}),n=e.find(function(f){return f.type==33}),r=e.find(function(f){return f.type==34});if(!t||!n||!r)return null;var u=YG(t.fullData);e=WG(n.fullData);var c=$G(r.fullData);return t=XG(t.fullData,n.fullData,r.fullData,{zf:u.zf,Vf:u.Vf,cf:e.cf,df:e.df,Xe:e.Xe,bf:e.bf,Ye:e.Ye,Ze:e.Ze,$e:e.$e,af:e.af,Re:e.Re,Se:e.Se,Te:e.Te,Ue:e.Ue,Ve:e.Ve,We:e.We,Ke:e.Ke,Xd:e.Xd,Ie:e.Ie,He:e.He,Ge:e.Ge,Cf:c.Cf}),{height:e.height,width:e.width,ya:t,Ba:e.Pi,Ca:e.Oi}}function YG(e){var t=new xa(e,!0);return or(t),or(t),Wt(t,4),Wt(t,2),Wt(t,6),e=Wt(t,3),t=Sn(t),{zf:e+1,Vf:t}}function WG(e){e=new xa(e,!0),or(e),or(e);var t=0,n=0,r=0,u=0;Wt(e,4);var c=Wt(e,3);Sn(e);for(var f=Wt(e,2),h=Wt(e,1),v=Wt(e,5),A=or(e),N=or(e),B=or(e),z=or(e),J=or(e),fe=or(e),pe=or(e),Ee=or(e),Le=or(e),Fe=or(e),it=or(e),Ue=[],Qe=[],rt=0;rt<c;rt++)Ue.push(Sn(e)),Qe.push(Sn(e));if(0<c)for(rt=c;8>rt;rt++)Wt(e,2);for(rt=0;rt<c;rt++)Ue[rt]&&Wt(e,88),Qe[rt]&&or(e);Tn(e),Ue=Tn(e),Ue==3&&Wt(e,1),Qe=Tn(e),rt=Tn(e),Sn(e)&&(t+=Tn(e),n+=Tn(e),r+=Tn(e),u+=Tn(e));var dt=Tn(e),gt=Tn(e),kt=Tn(e);if(Sn(e))for(var It=0;It<=c;It++)Tn(e),Tn(e),Tn(e);else Tn(e),Tn(e),Tn(e);if(Tn(e),Tn(e),Tn(e),Tn(e),Tn(e),Tn(e),Sn(e)&&Sn(e))for(It=0;4>It;It++)for(var Ut=0;Ut<(It===3?2:6);Ut++)if(Sn(e)){var Nt=Math.min(64,1<<4+(It<<1));1<It&&br(e);for(var nn=0;nn<Nt;nn++)br(e)}else Tn(e);for(Sn(e),Sn(e),Sn(e)&&(or(e),Tn(e),Tn(e),Sn(e)),It=Tn(e),Nt=Ut=0;Nt<It;Nt++)if(nn=!1,Nt!==0&&(nn=Sn(e)),nn){Nt===It&&Tn(e),Sn(e),Tn(e);for(var Kt=nn=0;Kt<=Ut;Kt++){var $t=Sn(e),En=!1;$t||(En=Sn(e)),($t||En)&&nn++}Ut=nn}else{for(Kt=Tn(e),nn=Tn(e),Ut=Kt+nn,$t=0;$t<Kt;$t++)Tn(e),Sn(e);for(Kt=0;Kt<nn;Kt++)Tn(e),Sn(e)}if(Sn(e))for(It=Tn(e),Ut=0;Ut<It;Ut++){for(Nt=0;Nt<kt+4;Nt++)Wt(e,1);Wt(e,1)}if(It=kt=1,Ut=0,Sn(e),Sn(e),Sn(e)){if(Sn(e)&&(Nt=or(e),nn=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Kt=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<Nt&&16>=Nt?(kt=nn[Nt-1],It=Kt[Nt-1]):Nt===255&&(kt=Wt(e,16),It=Wt(e,16))),Sn(e)&&Sn(e),Sn(e)&&(Wt(e,3),Sn(e),Sn(e)&&(or(e),or(e),or(e))),Sn(e)&&(Tn(e),Tn(e)),Sn(e),Sn(e),Sn(e),(Nt=Sn(e))&&(Tn(e),Tn(e),Tn(e),Tn(e)),Sn(e)&&(Wt(e,32),Wt(e,32),Sn(e)&&Tn(e),Sn(e)))for(Kt=!1,Nt=Sn(e),nn=Sn(e),(Nt||nn)&&((Kt=Sn(e))&&(or(e),Wt(e,5),Sn(e),Wt(e,5)),Wt(e,4),Wt(e,4),Kt&&Wt(e,4),Wt(e,5),Wt(e,5),Wt(e,5)),$t=0;$t<=c;$t++){var An=!0;En=1,Sn(e)||(An=Sn(e));var Vn=!1;if(An?Tn(e):Vn=Sn(e),Vn||(En=Tn(e)+1),Nt){for(An=0;An<En;An++)Tn(e),Tn(e),Kt&&(Tn(e),Tn(e));Sn(e)}if(nn){for(An=0;An<En;An++)Tn(e),Tn(e),Kt&&(Tn(e),Tn(e));Sn(e)}}Sn(e)&&(Sn(e),Sn(e),Sn(e),Ut=Tn(e),Tn(e),Tn(e),Tn(e),Tn(e))}return{Xe:it,cf:f,df:h,bf:v,Ye:A,Ze:N,$e:B,af:z,Re:J,Se:fe,Te:pe,Ue:Ee,Ve:Le,We:Fe,Xd:Ut,Ke:0,Ie:Ue,He:dt,Ge:gt,width:Qe-(t+n)*(Ue===1||Ue===2?2:1),height:rt-(r+u)*(Ue===1?2:1),Pi:kt,Oi:It}}function $G(e){var t=new xa(e,!0);or(t),or(t),Tn(t),Tn(t),Sn(t),Sn(t),Wt(t,3),Sn(t),Sn(t),Tn(t),Tn(t),br(t),Sn(t),Sn(t),Sn(t)&&Tn(t),br(t),br(t),Sn(t),Sn(t),Sn(t),Sn(t),e=Sn(t),t=Sn(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Cf:n}}function XG(e,t,n,r){var u=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return u[0]=1,u[1]=(r.cf&3)<<6|(r.df?1:0)<<5|r.bf&31,u[2]=r.Ye,u[3]=r.Ze,u[4]=r.$e,u[5]=r.af,u[6]=r.Re,u[7]=r.Se,u[8]=r.Te,u[9]=r.Ue,u[10]=r.Ve,u[11]=r.We,u[12]=r.Xe,u[13]=240|(r.Xd&3840)>>8,u[14]=r.Xd&255,u[15]=252|r.Cf&3,u[16]=252|r.Ie&3,u[17]=248|r.He&7,u[18]=248|r.Ge&7,u[19]=0,u[20]=0,u[21]=(r.Ke&3)<<6|(r.zf&7)<<3|(r.Vf?1:0)<<2|3,u[22]=3,u[23]=160,u[24]=0,u[25]=1,u[26]=(e.byteLength&65280)>>8,u[27]=(e.byteLength&255)>>0,u.set(e,28),u[23+(5+e.byteLength)]=161,u[e.byteLength+29]=0,u[e.byteLength+30]=1,u[e.byteLength+31]=(t.byteLength&65280)>>8,u[e.byteLength+32]=(t.byteLength&255)>>0,u.set(t,e.byteLength+33),u[23+(e.byteLength+10+t.byteLength)]=162,u[e.byteLength+10+t.byteLength+24]=0,u[e.byteLength+10+t.byteLength+25]=1,u[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,u[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,u.set(n,e.byteLength+10+t.byteLength+28),u}function Ny(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(n!==1&&u!==0&&u!==15&&c!==3){var f=e[t+3]>>6;u=1e3*QG[14*(n===3?3-r:r===3?3:4)+u-1],c=JG[3*(n===3?0:n===2?1:2)+c],n=e9[n][r];var h=t9[r],v=Math.floor(n*u/c+(e[t+2]>>1&1))*h,A=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(A=A?parseInt(A[1],10):0)&&87>=A&&r===2&&224e3<=u&&f===0&&(e[t+3]|=128),{sampleRate:c,channelCount:f===3?1:2,da:v,Ni:8*n*h}}return null}function G2(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function H2(e,t){if(t+1<e.length&&G2(e,t)){var n=Ny(e,t),r=4;return n&&n.da&&(r=n.da),t+=r,t===e.length||t+1<e.length&&G2(e,t)}return!1}var QG=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],JG=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],e9=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],t9=[0,1,1,4];function is(e){this.i=e,this.h=0,this.g=new Map}p=is.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ft(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,r){for(var u=nr(e),c=ko(u).length;c<u.length&&!H2(u,c);c++);var f;for(e=[];c<u.length;){var h=Ny(u,c);if(!h)return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));f||(f=h),c+h.da<=u.length&&e.push({data:u.subarray(c,c+h.da),size:h.da,duration:1152,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),c+=h.da}return f?(u=9e4*f.Ni/f.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:f.sampleRate,duration:r,ab:[],qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.h,baseMediaDecodeTime:u,Ya:e},stream:t},r=new Id([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=bd(r),this.g.set(n,t)),n=Zp(r),this.h++,t=hi(t,n),Promise.resolve(t)):Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null))},ne("shaka.transmuxer.Mp3Transmuxer",is),is.prototype.transmux=is.prototype.transmux,is.prototype.getOriginalMimeType=is.prototype.getOriginalMimeType,is.prototype.convertCodecs=is.prototype.convertCodecs,is.prototype.isSupported=is.prototype.isSupported,is.prototype.destroy=is.prototype.destroy,Ts("audio/mpeg",function(){return new is("audio/mpeg")},sa);function os(e){this.h=e,this.g=null}p=os.prototype,p.destroy=function(){},p.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Oo(e).split(","),n=bo("audio",t);return t=bo("video",t),!n||t||_o(n)!="mp3"?!1:Ft(this.convertCodecs("audio",e))},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},p.getOriginalMimeType=function(){return this.h},p.transmux=function(e,t,n,r,u){if(this.g?this.g.clearData():this.g=new kr,e=nr(e),e=this.g.parse(e),e.$c().audio!="mp3"||u!="audio")return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));for(n=new Uint8Array([]),u=m(e.Vb()),e=u.next();!e.done;e=u.next())if(e=e.value.data)for(t=0;t<e.length;)(r=Ny(e,t))?(t+r.da<=e.length&&(n=hi(n,e.subarray(t,t+r.da))),t+=r.da):t++;return Promise.resolve(n)},ne("shaka.transmuxer.MpegTsTransmuxer",os),os.prototype.transmux=os.prototype.transmux,os.prototype.getOriginalMimeType=os.prototype.getOriginalMimeType,os.prototype.convertCodecs=os.prototype.convertCodecs,os.prototype.isSupported=os.prototype.isSupported,os.prototype.destroy=os.prototype.destroy,Ts("video/mp2t",function(){return new os("video/mp2t")},Nf);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function ka(e){this.h=e,(this.g=v_.get("ISOBoxer")())&&n9(this)}function n9(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==r9[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}p=ka.prototype,p.destroy=function(){},p.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Ft(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ft(t)||Ft(e))},p.convertCodecs=function(e,t){return t.replace("mss/","")},p.getOriginalMimeType=function(){return this.h},p.transmux=function(e,t,n){if(!n)return Promise.resolve(nr(e));if(!t.mssPrivateData)return Promise.reject(new Xe(2,3,3020,n?n.M()[0]:null));try{var r,u=this.g.parseBuffer(e),c=u.fetch("tfhd");c.track_ID=t.id+1;var f=u.fetch("tfdt"),h=u.fetch("traf");f===null&&(f=this.g.createFullBox("tfdt",h,c),f.version=1,f.flags=0,f.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var v=u.fetch("trun"),A=u.fetch("tfxd");A&&A._parent.boxes.splice(A._parent.boxes.indexOf(A),1);var N=u.fetch("tfrf");N&&N._parent.boxes.splice(N._parent.boxes.indexOf(N),1);var B=u.fetch("sepiff");if(B!==null){B.type="senc",B.usertype=void 0;var z=u.fetch("saio");if(z===null){z=this.g.createFullBox("saio",h),z.version=0,z.flags=0,z.entry_count=1,z.offset=[0];var J=this.g.createFullBox("saiz",h);if(J.version=0,J.flags=0,J.sample_count=B.sample_count,J.default_sample_info_size=0,J.sample_info_size=[],B.flags&2)for(r=0;r<B.sample_count;r+=1)J.sample_info_size[r]=10+6*B.entry[r].NumberOfEntries;else J.default_sample_info_size=8}}c.flags&=16777214,c.flags|=131072,v.flags|=1;var fe=u.fetch("moof");v.data_offset=fe.getLength()+8;var pe=u.fetch("saio");pe!==null&&(pe.offset[0]=V2(fe,"traf")+V2(h,"senc")+16);var Ee=nr(u.write());return Promise.resolve(Ee)}catch(Le){return Le instanceof Xe?Promise.reject(Le):Promise.reject(new Xe(2,3,3022,n?n.M()[0]:null))}};function V2(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}ne("shaka.transmuxer.MssTransmuxer",ka),ka.prototype.transmux=ka.prototype.transmux,ka.prototype.getOriginalMimeType=ka.prototype.getOriginalMimeType,ka.prototype.convertCodecs=ka.prototype.convertCodecs,ka.prototype.isSupported=ka.prototype.isSupported,ka.prototype.destroy=ka.prototype.destroy;var r9=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Ts("mss/audio/mp4",function(){return new ka("mss/audio/mp4")},sa),Ts("mss/video/mp4",function(){return new ka("mss/video/mp4")},sa);function as(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}p=as.prototype,p.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},p.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Oo(n).split(",");return n=bo("audio",r),r=bo("video",r),n&&(n=_o(n),!i9.includes(n))||r&&(n=_o(r),!o9.includes(n))?!1:t?Ft(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ft(t)||Ft(e))},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Oo(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return tl(n,"audio/mp4")}).map(Is).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},p.getOriginalMimeType=function(){return this.l},p.transmux=function(e,t,n,r,u){var c=nr(e);if(u=="audio"&&!op(c)){for(var f=ko(c),h=f.length;h<c.length;h++)if(H2(c,h))return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));for(h=f.length;h<c.length;h++)if(j2(c,h))return this.h||(this.h=new La("audio/aac")),this.h.transmux(e,t,n,r,u);return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null))}this.j?this.j.clearData():this.j=new kr;var v=this.j.parse(c),A=[],N=v.$c();try{var B=null;if(u=="video"){switch(N.video){case"avc":var z=[],J=null,fe=[],pe=v.nc();if(!pe.length)throw new Xe(2,3,3023,n?n.M()[0]:null);for(var Ee=0;Ee<pe.length;Ee++){var Le=pe[Ee],Fe=Le.nalus;fe.push.apply(fe,T(Fe));var it=VG(Fe);if(it){J==null&&(J=Le.dts);var Ue=void 0;Ue=Ee+1<pe.length?(pe[Ee+1].dts||0)-(Le.dts||0):1<pe.length?(Le.dts||0)-(pe[Ee-1].dts||0):9e4*(n.endTime-n.startTime),z.push({data:it.data,size:it.data.byteLength,duration:Ue,eb:Math.round((Le.pts||0)-(Le.dts||0)),flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:it.hd?2:1,ib:it.hd?0:1}})}}var Qe=HG(fe);if(!Qe||J==null)throw new Xe(2,3,3018,n?n.M()[0]:null);t.height=Qe.height,t.width=Qe.width,B={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,ab:[],qa:new Uint8Array([]),ya:Qe.ya,Ba:Qe.Ba,Ca:Qe.Ca,data:{sb:this.g,baseMediaDecodeTime:J,Ya:z},stream:t};break;case"hvc":var rt=[],dt=null,gt=[],kt=v.nc();if(!kt.length)throw new Xe(2,3,3023,n?n.M()[0]:null);for(var It=0;It<kt.length;It++){var Ut=kt[It],Nt=Ut.nalus;gt.push.apply(gt,T(Nt));for(var nn=!1,Kt=[],$t=!1,En=m(Nt),An=En.next();!An.done;An=En.next()){var Vn=An.value;switch(Vn.type){case 1:case 0:var Qn=$t=!0;break;case 19:case 20:case 21:nn=Qn=$t=!0;break;case 32:Qn=!0;break;case 33:Qn=!0;break;case 34:Qn=!0;break;case 35:$t=Qn=!0;break;case 39:case 40:Qn=!0;break;default:Qn=!1}if($t&&Qn){var ar=Vn.fullData.byteLength,Ar=new Uint8Array(4);Ar[0]=ar>>24&255,Ar[1]=ar>>16&255,Ar[2]=ar>>8&255,Ar[3]=ar&255,Kt.push(Ar),Kt.push(Vn.fullData)}}var Qr=Kt.length?{data:hi.apply(co,T(Kt)),hd:nn}:null;if(Qr){dt==null&&Ut.dts!=null&&(dt=Ut.dts);var Yr=void 0;Yr=It+1<kt.length?(kt[It+1].dts||0)-(Ut.dts||0):1<kt.length?(Ut.dts||0)-(kt[It-1].dts||0):9e4*(n.endTime-n.startTime),rt.push({data:Qr.data,size:Qr.data.byteLength,duration:Yr,eb:Math.round((Ut.pts||0)-(Ut.dts||0)),flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:Qr.hd?2:1,ib:Qr.hd?0:1}})}}var Si=zG(gt);if(!Si||dt==null)throw new Xe(2,3,3018,n?n.M()[0]:null);t.height=Si.height,t.width=Si.width,B={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,ab:[],qa:new Uint8Array([]),ya:Si.ya,Ba:Si.Ba,Ca:Si.Ca,data:{sb:this.g,baseMediaDecodeTime:dt,Ya:rt},stream:t}}B&&(A.push(B),B=null)}if(u=="audio"){switch(N.audio){case"aac":for(var Pr=[],Fr,si=null,Ns=m(v.Vb()),Wi=Ns.next();!Wi.done;Wi=Ns.next()){var Fa=Wi.value,ss=Fa.data;if(ss){var $i=0;if(Fr=B2(ss,$i),!Fr)throw new Xe(2,3,3018,n?n.M()[0]:null);for(t.audioSamplingRate=Fr.sampleRate,t.channelsCount=Fr.channelCount,si==null&&Fa.pts!==null&&(si=Fa.pts);$i<ss.length;){var Ms=U2(ss,$i);if(Ms){var Nd=Ms.Nd+Ms.da;$i+Nd<=ss.length&&Pr.push({data:ss.subarray($i+Ms.Nd,$i+Nd),size:Ms.da,duration:1024,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),$i+=Nd}else $i++}}}if(!Fr||si==null){if(!v.nc().length)throw new Xe(2,3,3018,n?n.M()[0]:null);si=9e4*n.startTime;var gl=bo("audio",t.codecs.split(","));if(!gl||!t.channelsCount||!t.audioSamplingRate)throw new Xe(2,3,3018,n?n.M()[0]:null);Fr={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:gl};var Md=qG(gl,t.channelsCount);if(!Md)throw new Xe(2,3,3018,n?n.M()[0]:null);for(var Dy=si+9e4*(n.endTime-n.startTime),Xp=si;Xp<Dy;)Pr.push({data:Md,size:Md.byteLength,duration:1024,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),Xp+=1024/Fr.sampleRate*9e4}var Ds=Fr.sampleRate,c9=si/9e4*Ds;B={id:t.id,type:"audio",codecs:Fr.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ds,duration:r,ab:[],qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:c9,Ya:Pr},stream:t};break;case"ac3":for(var rP=[],Py=0,gT=new Uint8Array([]),Oy=null,iP=m(v.Vb()),mT=iP.next();!mT.done;mT=iP.next()){var vT=mT.value,yT=vT.data;Oy==null&&vT.pts!==null&&(Oy=vT.pts);for(var Dd=0;Dd<yT.length;){var Yl=Z2(yT,Dd);Yl?(t.audioSamplingRate=Yl.sampleRate,t.channelsCount=Yl.channelCount,Py=Yl.sampleRate,gT=Yl.qa,rP.push({data:yT.subarray(Dd,Dd+Yl.da),size:Yl.da,duration:1536,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),Dd+=Yl.da):Dd++}}if(Py==0||gT.byteLength==0||Oy==null)throw new Xe(2,3,3018,n?n.M()[0]:null);var f9=Oy/9e4*Py;B={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Py,duration:r,ab:[],qa:gT,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:f9,Ya:rP},stream:t};break;case"ec3":for(var oP=[],Ly=0,ET=new Uint8Array([]),ky=null,aP=m(v.Vb()),_T=aP.next();!_T.done;_T=aP.next()){var TT=_T.value,ST=TT.data;ky==null&&TT.pts!==null&&(ky=TT.pts);for(var Pd=0;Pd<ST.length;){var Wl=q2(ST,Pd);Wl?(t.audioSamplingRate=Wl.sampleRate,t.channelsCount=Wl.channelCount,Ly=Wl.sampleRate,ET=Wl.qa,oP.push({data:ST.subarray(Pd,Pd+Wl.da),size:Wl.da,duration:1536,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),Pd+=Wl.da):Pd++}}if(Ly==0||ET.byteLength==0||ky==null)throw new Xe(2,3,3018,n?n.M()[0]:null);var d9=ky/9e4*Ly;B={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ly,duration:r,ab:[],qa:ET,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:d9,Ya:oP},stream:t};break;case"mp3":for(var sP=[],Fy,Uy=null,uP=m(v.Vb()),wT=uP.next();!wT.done;wT=uP.next()){var AT=wT.value,Qp=AT.data;if(Qp){Uy==null&&AT.pts!==null&&(Uy=AT.pts);for(var jc=0;jc<Qp.length;){var Od=Ny(Qp,jc);Od?(Fy||(Fy=Od),jc+Od.da<=Qp.length&&sP.push({data:Qp.subarray(jc,jc+Od.da),size:Od.da,duration:1152,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),jc+=Od.da):jc++}}}if(!Fy||Uy==null)throw new Xe(2,3,3018,n?n.M()[0]:null);var lP=Fy.sampleRate,h9=Uy/9e4*lP;B={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:lP,duration:r,ab:[],qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:h9,Ya:sP},stream:t};break;case"opus":var cP=[],By=null,Nu=v.F;if(!Nu)throw new Xe(2,3,3018,n?n.M()[0]:null);var Ho=[];switch(Nu.Ah){case 1:case 2:Ho=[0];break;case 0:Ho=[255,1,1,0,1];break;case 128:Ho=[255,2,0,0,1];break;case 3:Ho=[1,2,1,0,2,1];break;case 4:Ho=[1,2,2,0,1,2,3];break;case 5:Ho=[1,3,2,0,4,1,2,3];break;case 6:Ho=[1,4,2,0,4,1,2,3,5];break;case 7:Ho=[1,4,2,0,4,1,2,3,5,6];break;case 8:Ho=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Ho=[1,1,2,0,1];break;case 131:Ho=[1,1,3,0,1,2];break;case 132:Ho=[1,1,4,0,1,2,3];break;case 133:Ho=[1,1,5,0,1,2,3,4];break;case 134:Ho=[1,1,6,0,1,2,3,4,5];break;case 135:Ho=[1,1,7,0,1,2,3,4,5,6];break;case 136:Ho=[1,1,8,0,1,2,3,4,5,6,7]}for(var fP=new Uint8Array([0,Nu.channelCount,0,0,Nu.sampleRate>>>24&255,Nu.sampleRate>>>17&255,Nu.sampleRate>>>8&255,Nu.sampleRate>>>0&255,0,0].concat(T(Ho))),dP=Nu.sampleRate,hP=m(v.Vb()),IT=hP.next();!IT.done;IT=hP.next()){var bT=IT.value,Ld=bT.data;By==null&&bT.pts!==null&&(By=bT.pts);for(var Jp=0;Jp<Ld.length;){for(var p9=(Ld[Jp+1]&16)!==0,g9=(Ld[Jp+1]&8)!==0,ml=Jp+2,jy=0;Ld[ml]===255;)jy+=255,ml+=1;jy+=Ld[ml],ml+=1,ml+=p9?2:0,ml+=g9?2:0;var pP=Ld.slice(ml,ml+jy);cP.push({data:pP,size:pP.byteLength,duration:960,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),Jp=ml+jy}}if(fP.byteLength==0||By==null)throw new Xe(2,3,3018,n?n.M()[0]:null);t.audioSamplingRate=Nu.sampleRate,t.channelsCount=Nu.channelCount;var m9=By/9e4*dP;B={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:dP,duration:r,ab:[],qa:fP,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:m9,Ya:cP},stream:t}}B&&(A.push(B),B=null)}}catch(xT){return xT&&xT.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(xT)}if(!A.length)return Promise.reject(new Xe(2,3,3018,n?n.M()[0]:null));var gP=new Id(A),CT=t.id+"_"+n.i;if(this.i.has(CT))var RT=this.i.get(CT);else RT=bd(gP),this.i.set(CT,RT);var v9=Zp(gP);this.g++;var y9=hi(RT,v9);return Promise.resolve(y9)},ne("shaka.transmuxer.TsTransmuxer",as),as.prototype.transmux=as.prototype.transmux,as.prototype.getOriginalMimeType=as.prototype.getOriginalMimeType,as.prototype.convertCodecs=as.prototype.convertCodecs,as.prototype.isSupported=as.prototype.isSupported,as.prototype.destroy=as.prototype.destroy;var i9=["aac","ac-3","ec-3","mp3","opus"],o9=["avc","hevc"];Ts("video/mp2t",function(){return new as("video/mp2t")},Oh);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function K2(){}var Wp;function z2(){Wp||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Wp=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=a9,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function a9(e,t){var n=this,r;return Re(function(u){return u.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),R(u,Wp.call(n,e,t),2)):(r=u.h,tP(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Wp,u.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Y2,u.return(Y2.call(n,e,t))))})}function Y2(e,t){var n=this,r,u,c,f,h,v,A,N,B,z,J,fe;return Re(function(pe){if(pe.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=eP(e),u=[],c=m(t),f=c.next();!f.done;f=c.next())h=f.value,v=W2(h.videoCapabilities,r),A=W2(h.audioCapabilities,r),h.videoCapabilities&&h.videoCapabilities.length&&!v.length||h.audioCapabilities&&h.audioCapabilities.length&&!A.length||(N=Object.assign({},h),N.videoCapabilities=v,N.audioCapabilities=A,u.push(N));if(!u.length)throw B=Error("Unsupported keySystem or supportedConfigurations."),B.name="NotSupportedError",B.code=DOMException.NOT_SUPPORTED_ERR,B;return R(pe,Wp.call(n,e,u),2)}return z=pe.h,fe=J=null,u[0]&&(u[0].videoCapabilities&&(J=u[0].videoCapabilities[0].encryptionScheme),u[0].audioCapabilities&&(fe=u[0].audioCapabilities[0].encryptionScheme)),pe.return(new My(z,J,fe))})}function W2(e,t){return e&&e.filter(function(n){return hT(n.encryptionScheme,t)})}ne("EmeEncryptionSchemePolyfill",K2),K2.install=z2;function $2(){}var $p;function X2(){$p||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?($p=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=s9,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function s9(e){var t=this,n,r;return Re(function(u){switch(u.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),R(u,$p.call(t,e),2);case 2:if(n=u.h,!e.keySystemConfiguration)return u.return(n);if((r=n.keySystemAccess)&&tP(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=$p,u.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Q2,r){u.u(3);break}return R(u,J2(e),4);case 4:return n.keySystemAccess=u.h,u.return(n);case 3:return u.return(Q2.call(t,e))}})}function Q2(e){var t=this,n,r,u,c,f,h,v;return Re(function(A){switch(A.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),r=n=null,!e.keySystemConfiguration||(u=e.keySystemConfiguration,c=u.keySystem,r=u.audio&&u.audio.encryptionScheme,n=u.video&&u.video.encryptionScheme,f=eP(c),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},hT(r,f)&&hT(n,f))?R(A,$p.call(t,e),2):A.return(h);case 2:if(v=A.h,v.keySystemAccess){v.keySystemAccess=new My(v.keySystemAccess,n,r),A.u(3);break}if(!e.keySystemConfiguration){A.u(3);break}return R(A,J2(e),5);case 5:v.keySystemAccess=A.h;case 3:return A.return(v)}})}function J2(e){var t,n;return Re(function(r){if(r.g==1){var u=e.keySystemConfiguration,c=[],f=[];return u.audio&&c.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:u.audio.encryptionScheme}),u.video&&f.push({robustness:u.video.robustness||"",contentType:e.video.contentType,encryptionScheme:u.video.encryptionScheme}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},c.length&&(u.audioCapabilities=c),f.length&&(u.videoCapabilities=f),t=u,R(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}ne("McEncryptionSchemePolyfill",$2),$2.install=X2;function My(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}My.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},My.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function eP(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function tP(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function hT(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&(l9||u9))}function pT(){}function nP(){z2(),X2()}ne("EncryptionSchemePolyfills",pT),pT.install=nP;var u9=navigator.userAgent.includes("CrKey"),l9=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10);typeof b<"u"&&b.exports&&(b.exports=pT)}).call(l,o,o,void 0);for(var d in l.shaka)i[d]=l.shaka[d]})()})(AB);const a0=Zb(AB),Vc=class Vc{static async setup_stream(o,l,d){if(this.licenseUrl=l,this.customDrmHeaders=d,!o.mediaKeys)try{const g=await this.get_media_keys(o);if(g){await o.setMediaKeys(g.mediaKey);const S=g.mediaKey.createSession();this.on_handle_license_messageEvent=async b=>{await this.handle_license_messageEvent(g.mediaKey,S,b)},this.on_handle_encrypted_event=async b=>{await this.handle_encrypted_event(g,S,b)},S.addEventListener("message",this.on_handle_license_messageEvent),o.addEventListener("encrypted",this.on_handle_encrypted_event)}}catch(g){console.error("### DRMManager.setupStream error:",g)}}static async create_mediaKey_sessions(o){for(let l=0;l<o;l++){const g=await(await navigator.requestMediaKeySystemAccess("com.widevine.alpha",this.DRM_CONFIG)).createMediaKeys();this.mediaKey_pool.push({id:this.mediaKey_pool.length+1,mediaKey:g,htmlMediaElement:null,isInitialized:!1})}}static async release_mediaKeys(o){const l=this.mediaKey_pool.find(d=>d.htmlMediaElement===o);this.mediaKey_pool.length>0&&l&&(await o.setMediaKeys(null),l.htmlMediaElement=null,l.isInitialized=!1)}static get is_prepared(){return this.mediaKey_pool.length>1}static get_mediaKey_id(o){const l=this.mediaKey_pool.find(d=>d.mediaKey===o);return l?l.id:null}static async get_media_keys(o){let l=this.mediaKey_pool.find(d=>d.htmlMediaElement===o);if(l)return l;if((this.mediaKey_pool.length<=0||this.mediaKey_pool.every(d=>d.htmlMediaElement))&&await this.create_mediaKey_sessions(1),l=this.mediaKey_pool.find(d=>!d.htmlMediaElement),l)return l.htmlMediaElement=o,l;throw new Error("No media keys available")}static async handle_license_messageEvent(o,l,d){try{const g=d.message.byteLength;console.log(g,"byteLength");let S;g===2?S=g.toString():S="".concat(this.get_mediaKey_id(o),"-").concat(g);let b;this.license_cache.has(S)?(console.log("using cached licence"),b=this.license_cache.get(S)):(b=await(await fetch(this.licenseUrl,{method:"POST",body:d.message,headers:{"Content-Type":"application/octet-stream",...this.customDrmHeaders}})).arrayBuffer(),b?this.license_cache.set(S,b):console.error("License response is null")),b?await l.update(b):console.error("License not found in cache and could not be fetched")}catch(g){console.error("Error during license acquisition: ".concat(g))}}static async handle_encrypted_event(o,l,d){if(d.initDataType&&d.initData)try{if(!o.isInitialized){o.isInitialized=!0;const g=this.mediaKey_pool.findIndex(S=>S.id===o.id);g!==-1&&(this.mediaKey_pool[g]=o),await l.generateRequest(d.initDataType,d.initData)}}catch(g){console.error("Failed to generate a license request: ".concat(g))}else console.error("Encrypted event is missing initData or initDataType")}};Vc.licenseUrl="",Vc.customDrmHeaders={},Vc.license_cache=new Map,Vc.mediaKey_pool=[],Vc.DRM_CONFIG=[{keySystem:"com.widevine.alpha",initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"'},{contentType:'video/mp4; codecs="avc1.64001f"'},{contentType:'video/mp4; codecs="avc1.64001e"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}],sessionTypes:["temporary"],persistentState:"optional",distinctiveIdentifier:"optional"}];let Rb=Vc;class tW extends wB{constructor(o){var l;super(o),this.name="ShakaEngine",this.addPolicyToRequests=(d,g)=>{switch(d){case a0.net.NetworkingEngine.RequestType.MANIFEST:case a0.net.NetworkingEngine.RequestType.SEGMENT:if(!this.options.policyQuery||!this.options.policyQuery.startsWith("?"))break;g.uris[0]+=this.options.policyQuery;break;case a0.net.NetworkingEngine.RequestType.LICENSE:if(!this.options.customLicenceRequestHeaders)break;Object.entries(this.options.customLicenceRequestHeaders).forEach(([S,b])=>{g.headers[S]=b});break}},this.addPolicyToRequests=this.addPolicyToRequests.bind(this),this.player=new a0.Player,this.options.widevineLicenseUrl&&this.player.configure({drm:{servers:{"com.widevine.alpha":this.options.keepProtectionData===!1?this.options.widevineLicenseUrl:" "}},streaming:{bufferingGoal:120,rebufferingGoal:60,bufferBehind:0}}),(l=this.player.getNetworkingEngine())==null||l.registerRequestFilter(this.addPolicyToRequests)}destroy(){this.player&&this.player.destroy(),super.destroy()}async load(o){var l;if(this.player&&o){if(this.options.widevineLicenseUrl&&this.options.keepProtectionData!==!1)try{await this.player.unload(),await Rb.setup_stream(this.options.element,this.options.widevineLicenseUrl,(l=this.options.customLicenceRequestHeaders)!=null?l:{})}catch(d){console.log(d)}await this.player.attach(this.options.element),await this.player.load(o,void 0)}}}class H3 extends df{constructor(o){super(),this.options=o,this.options.preferredTech==="shaka"?this.engine=new tW(o):this.engine=new eW(o),this.engine.onAny(this.propagateEvent.bind(this))}get playerEngine(){return this.engine}get videoElement(){return this.engine.video}propagateEvent(o,l){this.emit(o,l)}destroy(){this.engine.destroy()}get stats(){return this.engine.getStats()}async load(o,l){this.currentSource=o,await this.engine.load(o,l)}}class nW extends df{constructor(o){super(),this.options=o,this.playerSyncerDestroyFunctions=[],this.eventClock=o.eventClock,this.containerElement=o.containerElement,this.players=[new H3({autoPlay:!1,...o.playerOptions,element:document.createElement("video")}),new H3({autoPlay:!1,...o.playerOptions,element:document.createElement("video")})]}get currentSource(){var o;return(o=this.runningPlayer)==null?void 0:o.currentSource}get currentCamera(){return this._currentCamera}get stats(){var o;return(o=this.runningPlayer)==null?void 0:o.engine.getStats()}logPlayerStuff(){this.players.forEach((o,l)=>{console.log("Bitrate",l,o.engine.video.getVideoPlaybackQuality()),console.log("Time",l,o.engine.video.currentTime),console.log("Paused",l,o.engine.video.paused)})}propagateEvent(o,l){this.emit(o,l)}async load(o,l,d){return await new Promise((g,S)=>{const b=this.players.find(p=>p!==this.runningPlayer);if(!b)throw new Error("Found no ImagienPlayer to use :( ");try{b.onAny(this.propagateEvent.bind(this)),b.load(l,d).then(()=>{g(async()=>{await new Promise((p,w)=>{var F;b.once("playing",()=>{var y,P;(y=this.runningPlayer)==null||y.playerEngine.video.pause(),(P=this.runningPlayer)==null||P.clearAllListeners(),this.runningPlayer=b,this._currentCamera=o;const C=this.containerElement.querySelector("video");C==null||C.remove(),this.containerElement.appendChild(b.engine.video),this.playerSyncerDestroyFunctions.forEach(m=>{m()});const E=((d==null?void 0:d.eventOffset)||0)-((d==null?void 0:d.reelOffset)||0);this.playerSyncerDestroyFunctions.push(this.eventClock.playerSyncer.connectMediaElement(b.playerEngine.video,E)),p()});try{b.videoElement.currentTime=this.eventClock.getExpectedPositionInSeconds()-((F=d==null?void 0:d.eventOffset)!=null?F:0),b.playerEngine.video.play()}catch(C){w(C)}})})})}catch(p){console.error(p),S(p)}})}async requestFullscreen(){await this.containerElement.requestFullscreen()}async exitFullscreen(){await document.exitFullscreen()}destroy(){super.destroy(),this.players.forEach(o=>{o.destroy()})}}var lg=function(i){return i&&i.Math===Math&&i},Ha=lg(typeof globalThis=="object"&&globalThis)||lg(typeof window=="object"&&window)||lg(typeof self=="object"&&self)||lg(typeof cu=="object"&&cu)||lg(typeof cu=="object"&&cu)||function(){return this}()||Function("return this")(),eR={},ms=function(i){try{return!!i()}catch(o){return!0}},rW=ms,mc=!rW(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),iW=ms,tR=!iW(function(){var i=(function(){}).bind();return typeof i!="function"||i.hasOwnProperty("prototype")}),oW=tR,s0=Function.prototype.call,Cl=oW?s0.bind(s0):function(){return s0.apply(s0,arguments)},IB={},bB={}.propertyIsEnumerable,CB=Object.getOwnPropertyDescriptor,aW=CB&&!bB.call({1:2},1);IB.f=aW?function(o){var l=CB(this,o);return!!l&&l.enumerable}:bB;var RB=function(i,o){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:o}},xB=tR,NB=Function.prototype,xb=NB.call,sW=xB&&NB.bind.bind(xb,xb),_a=xB?sW:function(i){return function(){return xb.apply(i,arguments)}},MB=_a,uW=MB({}.toString),lW=MB("".slice),CE=function(i){return lW(uW(i),8,-1)},cW=_a,fW=ms,dW=CE,iI=Object,hW=cW("".split),pW=fW(function(){return!iI("z").propertyIsEnumerable(0)})?function(i){return dW(i)==="String"?hW(i,""):iI(i)}:iI,RE=function(i){return i==null},gW=RE,mW=TypeError,um=function(i){if(gW(i))throw new mW("Can't call method on "+i);return i},vW=pW,yW=um,xE=function(i){return vW(yW(i))},oI=typeof document=="object"&&document.all,Va=typeof oI>"u"&&oI!==void 0?function(i){return typeof i=="function"||i===oI}:function(i){return typeof i=="function"},EW=Va,wh=function(i){return typeof i=="object"?i!==null:EW(i)},aI=Ha,_W=Va,TW=function(i){return _W(i)?i:void 0},nR=function(i,o){return arguments.length<2?TW(aI[i]):aI[i]&&aI[i][o]},SW=_a,DB=SW({}.isPrototypeOf),wW=typeof navigator<"u"&&String(navigator.userAgent)||"",PB=Ha,sI=wW,V3=PB.process,K3=PB.Deno,z3=V3&&V3.versions||K3&&K3.version,Y3=z3&&z3.v8,lu,X0;Y3&&(lu=Y3.split("."),X0=lu[0]>0&&lu[0]<4?1:+(lu[0]+lu[1]));!X0&&sI&&(lu=sI.match(/Edge\/(\d+)/),(!lu||lu[1]>=74)&&(lu=sI.match(/Chrome\/(\d+)/),lu&&(X0=+lu[1])));var AW=X0,W3=AW,IW=ms,bW=Ha,CW=bW.String,OB=!!Object.getOwnPropertySymbols&&!IW(function(){var i=Symbol("symbol detection");return!CW(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&W3&&W3<41}),RW=OB,LB=RW&&!Symbol.sham&&typeof Symbol.iterator=="symbol",xW=nR,NW=Va,MW=DB,DW=LB,PW=Object,kB=DW?function(i){return typeof i=="symbol"}:function(i){var o=xW("Symbol");return NW(o)&&MW(o.prototype,PW(i))},OW=String,LW=function(i){try{return OW(i)}catch(o){return"Object"}},kW=Va,FW=LW,UW=TypeError,BW=function(i){if(kW(i))return i;throw new UW(FW(i)+" is not a function")},jW=BW,ZW=RE,rR=function(i,o){var l=i[o];return ZW(l)?void 0:jW(l)},uI=Cl,lI=Va,cI=wh,qW=TypeError,GW=function(i,o){var l,d;if(o==="string"&&lI(l=i.toString)&&!cI(d=uI(l,i))||lI(l=i.valueOf)&&!cI(d=uI(l,i))||o!=="string"&&lI(l=i.toString)&&!cI(d=uI(l,i)))return d;throw new qW("Can't convert object to primitive value")},FB={exports:{}},$3=Ha,HW=Object.defineProperty,iR=function(i,o){try{HW($3,i,{value:o,configurable:!0,writable:!0})}catch(l){$3[i]=o}return o},VW=Ha,KW=iR,X3="__core-js_shared__",Q3=FB.exports=VW[X3]||KW(X3,{});(Q3.versions||(Q3.versions=[])).push({version:"3.37.1",mode:"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var oR=FB.exports,J3=oR,aR=function(i,o){return J3[i]||(J3[i]=o||{})},zW=um,YW=Object,UB=function(i){return YW(zW(i))},WW=_a,$W=UB,XW=WW({}.hasOwnProperty),vc=Object.hasOwn||function(o,l){return XW($W(o),l)},QW=_a,JW=0,e$=Math.random(),t$=QW(1 .toString),BB=function(i){return"Symbol("+(i===void 0?"":i)+")_"+t$(++JW+e$,36)},n$=Ha,r$=aR,eF=vc,i$=BB,o$=OB,a$=LB,Jd=n$.Symbol,fI=r$("wks"),s$=a$?Jd.for||Jd:Jd&&Jd.withoutSetter||i$,pf=function(i){return eF(fI,i)||(fI[i]=o$&&eF(Jd,i)?Jd[i]:s$("Symbol."+i)),fI[i]},u$=Cl,tF=wh,nF=kB,l$=rR,c$=GW,f$=pf,d$=TypeError,h$=f$("toPrimitive"),p$=function(i,o){if(!tF(i)||nF(i))return i;var l=l$(i,h$),d;if(l){if(o===void 0&&(o="default"),d=u$(l,i,o),!tF(d)||nF(d))return d;throw new d$("Can't convert object to primitive value")}return o===void 0&&(o="number"),c$(i,o)},g$=p$,m$=kB,jB=function(i){var o=g$(i,"string");return m$(o)?o:o+""},v$=Ha,rF=wh,Nb=v$.document,y$=rF(Nb)&&rF(Nb.createElement),ZB=function(i){return y$?Nb.createElement(i):{}},E$=mc,_$=ms,T$=ZB,qB=!E$&&!_$(function(){return Object.defineProperty(T$("div"),"a",{get:function(){return 7}}).a!==7}),S$=mc,w$=Cl,A$=IB,I$=RB,b$=xE,C$=jB,R$=vc,x$=qB,iF=Object.getOwnPropertyDescriptor;eR.f=S$?iF:function(o,l){if(o=b$(o),l=C$(l),x$)try{return iF(o,l)}catch(d){}if(R$(o,l))return I$(!w$(A$.f,o,l),o[l])};var lm={},N$=mc,M$=ms,GB=N$&&M$(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),D$=wh,P$=String,O$=TypeError,gf=function(i){if(D$(i))return i;throw new O$(P$(i)+" is not an object")},L$=mc,k$=qB,F$=GB,u0=gf,oF=jB,U$=TypeError,dI=Object.defineProperty,B$=Object.getOwnPropertyDescriptor,hI="enumerable",pI="configurable",gI="writable";lm.f=L$?F$?function(o,l,d){if(u0(o),l=oF(l),u0(d),typeof o=="function"&&l==="prototype"&&"value"in d&&gI in d&&!d[gI]){var g=B$(o,l);g&&g[gI]&&(o[l]=d.value,d={configurable:pI in d?d[pI]:g[pI],enumerable:hI in d?d[hI]:g[hI],writable:!1})}return dI(o,l,d)}:dI:function(o,l,d){if(u0(o),l=oF(l),u0(d),k$)try{return dI(o,l,d)}catch(g){}if("get"in d||"set"in d)throw new U$("Accessors not supported");return"value"in d&&(o[l]=d.value),o};var j$=mc,Z$=lm,q$=RB,sR=j$?function(i,o,l){return Z$.f(i,o,q$(1,l))}:function(i,o,l){return i[o]=l,i},HB={exports:{}},Mb=mc,G$=vc,VB=Function.prototype,H$=Mb&&Object.getOwnPropertyDescriptor,uR=G$(VB,"name"),V$=uR&&(function(){}).name==="something",K$=uR&&(!Mb||Mb&&H$(VB,"name").configurable),z$={EXISTS:uR,PROPER:V$,CONFIGURABLE:K$},Y$=_a,W$=Va,Db=oR,$$=Y$(Function.toString);W$(Db.inspectSource)||(Db.inspectSource=function(i){return $$(i)});var X$=Db.inspectSource,Q$=Ha,J$=Va,aF=Q$.WeakMap,eX=J$(aF)&&/native code/.test(String(aF)),tX=aR,nX=BB,sF=tX("keys"),KB=function(i){return sF[i]||(sF[i]=nX(i))},lR={},rX=eX,zB=Ha,iX=wh,oX=sR,mI=vc,vI=oR,aX=KB,sX=lR,uF="Object already initialized",Pb=zB.TypeError,uX=zB.WeakMap,Q0,$g,J0,lX=function(i){return J0(i)?$g(i):Q0(i,{})},cX=function(i){return function(o){var l;if(!iX(o)||(l=$g(o)).type!==i)throw new Pb("Incompatible receiver, "+i+" required");return l}};if(rX||vI.state){var Ou=vI.state||(vI.state=new uX);Ou.get=Ou.get,Ou.has=Ou.has,Ou.set=Ou.set,Q0=function(i,o){if(Ou.has(i))throw new Pb(uF);return o.facade=i,Ou.set(i,o),o},$g=function(i){return Ou.get(i)||{}},J0=function(i){return Ou.has(i)}}else{var Fd=aX("state");sX[Fd]=!0,Q0=function(i,o){if(mI(i,Fd))throw new Pb(uF);return o.facade=i,oX(i,Fd,o),o},$g=function(i){return mI(i,Fd)?i[Fd]:{}},J0=function(i){return mI(i,Fd)}}var YB={set:Q0,get:$g,has:J0,enforce:lX,getterFor:cX},cR=_a,fX=ms,dX=Va,l0=vc,Ob=mc,hX=z$.CONFIGURABLE,pX=X$,WB=YB,gX=WB.enforce,mX=WB.get,lF=String,S0=Object.defineProperty,vX=cR("".slice),yX=cR("".replace),EX=cR([].join),_X=Ob&&!fX(function(){return S0(function(){},"length",{value:8}).length!==8}),TX=String(String).split("String"),SX=HB.exports=function(i,o,l){vX(lF(o),0,7)==="Symbol("&&(o="["+yX(lF(o),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),l&&l.getter&&(o="get "+o),l&&l.setter&&(o="set "+o),(!l0(i,"name")||hX&&i.name!==o)&&(Ob?S0(i,"name",{value:o,configurable:!0}):i.name=o),_X&&l&&l0(l,"arity")&&i.length!==l.arity&&S0(i,"length",{value:l.arity});try{l&&l0(l,"constructor")&&l.constructor?Ob&&S0(i,"prototype",{writable:!1}):i.prototype&&(i.prototype=void 0)}catch(g){}var d=gX(i);return l0(d,"source")||(d.source=EX(TX,typeof o=="string"?o:"")),i};Function.prototype.toString=SX(function(){return dX(this)&&mX(this).source||pX(this)},"toString");var wX=HB.exports,AX=Va,IX=lm,bX=wX,CX=iR,$B=function(i,o,l,d){d||(d={});var g=d.enumerable,S=d.name!==void 0?d.name:o;if(AX(l)&&bX(l,S,d),d.global)g?i[o]=l:CX(o,l);else{try{d.unsafe?i[o]&&(g=!0):delete i[o]}catch(b){}g?i[o]=l:IX.f(i,o,{value:l,enumerable:!1,configurable:!d.nonConfigurable,writable:!d.nonWritable})}return i},XB={},RX=Math.ceil,xX=Math.floor,NX=Math.trunc||function(o){var l=+o;return(l>0?xX:RX)(l)},MX=NX,NE=function(i){var o=+i;return o!==o||o===0?0:MX(o)},DX=NE,PX=Math.max,OX=Math.min,LX=function(i,o){var l=DX(i);return l<0?PX(l+o,0):OX(l,o)},kX=NE,FX=Math.min,QB=function(i){var o=kX(i);return o>0?FX(o,9007199254740991):0},UX=QB,BX=function(i){return UX(i.length)},jX=xE,ZX=LX,qX=BX,cF=function(i){return function(o,l,d){var g=jX(o),S=qX(g);if(S===0)return!i&&-1;var b=ZX(d,S),p;if(i&&l!==l){for(;S>b;)if(p=g[b++],p!==p)return!0}else for(;S>b;b++)if((i||b in g)&&g[b]===l)return i||b||0;return!i&&-1}},GX={includes:cF(!0),indexOf:cF(!1)},HX=_a,yI=vc,VX=xE,KX=GX.indexOf,zX=lR,fF=HX([].push),JB=function(i,o){var l=VX(i),d=0,g=[],S;for(S in l)!yI(zX,S)&&yI(l,S)&&fF(g,S);for(;o.length>d;)yI(l,S=o[d++])&&(~KX(g,S)||fF(g,S));return g},fR=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],YX=JB,WX=fR,$X=WX.concat("length","prototype");XB.f=Object.getOwnPropertyNames||function(o){return YX(o,$X)};var e8={};e8.f=Object.getOwnPropertySymbols;var XX=nR,QX=_a,JX=XB,eQ=e8,tQ=gf,nQ=QX([].concat),rQ=XX("Reflect","ownKeys")||function(o){var l=JX.f(tQ(o)),d=eQ.f;return d?nQ(l,d(o)):l},dF=vc,iQ=rQ,oQ=eR,aQ=lm,sQ=function(i,o,l){for(var d=iQ(o),g=aQ.f,S=oQ.f,b=0;b<d.length;b++){var p=d[b];!dF(i,p)&&!(l&&dF(l,p))&&g(i,p,S(o,p))}},uQ=ms,lQ=Va,cQ=/#|\.prototype\./,cm=function(i,o){var l=dQ[fQ(i)];return l===pQ?!0:l===hQ?!1:lQ(o)?uQ(o):!!o},fQ=cm.normalize=function(i){return String(i).replace(cQ,".").toLowerCase()},dQ=cm.data={},hQ=cm.NATIVE="N",pQ=cm.POLYFILL="P",gQ=cm,c0=Ha,mQ=eR.f,vQ=sR,yQ=$B,EQ=iR,_Q=sQ,TQ=gQ,t8=function(i,o){var l=i.target,d=i.global,g=i.stat,S,b,p,w,F,C;if(d?b=c0:g?b=c0[l]||EQ(l,{}):b=c0[l]&&c0[l].prototype,b)for(p in o){if(F=o[p],i.dontCallGetSet?(C=mQ(b,p),w=C&&C.value):w=b[p],S=TQ(d?p:l+(g?".":"#")+p,i.forced),!S&&w!==void 0){if(typeof F==typeof w)continue;_Q(F,w)}(i.sham||w&&w.sham)&&vQ(F,"sham",!0),yQ(b,p,F,i)}},SQ=wh,wQ=CE,AQ=pf,IQ=AQ("match"),bQ=function(i){var o;return SQ(i)&&((o=i[IQ])!==void 0?!!o:wQ(i)==="RegExp")},CQ=pf,RQ=CQ("toStringTag"),n8={};n8[RQ]="z";var xQ=String(n8)==="[object z]",NQ=xQ,MQ=Va,w0=CE,DQ=pf,PQ=DQ("toStringTag"),OQ=Object,LQ=w0(function(){return arguments}())==="Arguments",kQ=function(i,o){try{return i[o]}catch(l){}},FQ=NQ?w0:function(i){var o,l,d;return i===void 0?"Undefined":i===null?"Null":typeof(l=kQ(o=OQ(i),PQ))=="string"?l:LQ?w0(o):(d=w0(o))==="Object"&&MQ(o.callee)?"Arguments":d},UQ=FQ,BQ=String,ME=function(i){if(UQ(i)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return BQ(i)},jQ=gf,r8=function(){var i=jQ(this),o="";return i.hasIndices&&(o+="d"),i.global&&(o+="g"),i.ignoreCase&&(o+="i"),i.multiline&&(o+="m"),i.dotAll&&(o+="s"),i.unicode&&(o+="u"),i.unicodeSets&&(o+="v"),i.sticky&&(o+="y"),o},ZQ=Cl,qQ=vc,GQ=DB,HQ=r8,hF=RegExp.prototype,VQ=function(i){var o=i.flags;return o===void 0&&!("flags"in hF)&&!qQ(i,"flags")&&GQ(hF,i)?ZQ(HQ,i):o},dR=_a,KQ=UB,zQ=Math.floor,EI=dR("".charAt),YQ=dR("".replace),_I=dR("".slice),WQ=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,$Q=/\$([$&'`]|\d{1,2})/g,i8=function(i,o,l,d,g,S){var b=l+i.length,p=d.length,w=$Q;return g!==void 0&&(g=KQ(g),w=WQ),YQ(S,w,function(F,C){var E;switch(EI(C,0)){case"$":return"$";case"&":return i;case"`":return _I(o,0,l);case"'":return _I(o,b);case"<":E=g[_I(C,1,-1)];break;default:var y=+C;if(y===0)return F;if(y>p){var P=zQ(y/10);return P===0?F:P<=p?d[P-1]===void 0?EI(C,1):d[P-1]+EI(C,1):F}E=d[y-1]}return E===void 0?"":E})},XQ=t8,QQ=Cl,hR=_a,pF=um,JQ=Va,eJ=RE,tJ=bQ,cg=ME,nJ=rR,rJ=VQ,iJ=i8,oJ=pf,aJ=oJ("replace"),sJ=TypeError,TI=hR("".indexOf);hR("".replace);var gF=hR("".slice),uJ=Math.max;XQ({target:"String",proto:!0},{replaceAll:function(o,l){var d=pF(this),g,S,b,p,w,F,C,E,y,P=0,m=0,T="";if(!eJ(o)){if(g=tJ(o),g&&(S=cg(pF(rJ(o))),!~TI(S,"g")))throw new sJ("`.replaceAll` does not allow non-global regexes");if(b=nJ(o,aJ),b)return QQ(b,o,d,l)}for(p=cg(d),w=cg(o),F=JQ(l),F||(l=cg(l)),C=w.length,E=uJ(1,C),P=TI(p,w);P!==-1;)y=F?cg(l(w,P,p)):iJ(w,p,P,[],void 0,l),T+=gF(p,m,P)+y,m=P+C,P=P+E>p.length?-1:TI(p,w,P+E);return m<p.length&&(T+=gF(p,m)),T}});var pR=ms,lJ=Ha,gR=lJ.RegExp,mR=pR(function(){var i=gR("a","y");return i.lastIndex=2,i.exec("abcd")!==null}),cJ=mR||pR(function(){return!gR("a","y").sticky}),fJ=mR||pR(function(){var i=gR("^r","gy");return i.lastIndex=2,i.exec("str")!==null}),dJ={BROKEN_CARET:fJ,MISSED_STICKY:cJ,UNSUPPORTED_Y:mR},o8={},hJ=JB,pJ=fR,gJ=Object.keys||function(o){return hJ(o,pJ)},mJ=mc,vJ=GB,yJ=lm,EJ=gf,_J=xE,TJ=gJ;o8.f=mJ&&!vJ?Object.defineProperties:function(o,l){EJ(o);for(var d=_J(l),g=TJ(l),S=g.length,b=0,p;S>b;)yJ.f(o,p=g[b++],d[p]);return o};var SJ=nR,wJ=SJ("document","documentElement"),AJ=gf,IJ=o8,mF=fR,bJ=lR,CJ=wJ,RJ=ZB,xJ=KB,vF=">",yF="<",Lb="prototype",kb="script",a8=xJ("IE_PROTO"),SI=function(){},s8=function(i){return yF+kb+vF+i+yF+"/"+kb+vF},EF=function(i){i.write(s8("")),i.close();var o=i.parentWindow.Object;return i=null,o},NJ=function(){var i=RJ("iframe"),o="java"+kb+":",l;return i.style.display="none",CJ.appendChild(i),i.src=String(o),l=i.contentWindow.document,l.open(),l.write(s8("document.F=Object")),l.close(),l.F},f0,A0=function(){try{f0=new ActiveXObject("htmlfile")}catch(o){}A0=typeof document<"u"?document.domain&&f0?EF(f0):NJ():EF(f0);for(var i=mF.length;i--;)delete A0[Lb][mF[i]];return A0()};bJ[a8]=!0;var MJ=Object.create||function(o,l){var d;return o!==null?(SI[Lb]=AJ(o),d=new SI,SI[Lb]=null,d[a8]=o):d=A0(),l===void 0?d:IJ.f(d,l)},DJ=ms,PJ=Ha,OJ=PJ.RegExp,LJ=DJ(function(){var i=OJ(".","s");return!(i.dotAll&&i.test("\n")&&i.flags==="s")}),kJ=ms,FJ=Ha,UJ=FJ.RegExp,BJ=kJ(function(){var i=UJ("(?<a>b)","g");return i.exec("b").groups.a!=="b"||"b".replace(i,"$<a>c")!=="bc"}),eh=Cl,DE=_a,jJ=ME,ZJ=r8,qJ=dJ,GJ=aR,HJ=MJ,VJ=YB.get,KJ=LJ,zJ=BJ,YJ=GJ("native-string-replace",String.prototype.replace),eE=RegExp.prototype.exec,Fb=eE,WJ=DE("".charAt),$J=DE("".indexOf),XJ=DE("".replace),wI=DE("".slice),Ub=function(){var i=/a/,o=/b*/g;return eh(eE,i,"a"),eh(eE,o,"a"),i.lastIndex!==0||o.lastIndex!==0}(),u8=qJ.BROKEN_CARET,Bb=/()??/.exec("")[1]!==void 0,QJ=Ub||Bb||u8||KJ||zJ;QJ&&(Fb=function(o){var l=this,d=VJ(l),g=jJ(o),S=d.raw,b,p,w,F,C,E,y;if(S)return S.lastIndex=l.lastIndex,b=eh(Fb,S,g),l.lastIndex=S.lastIndex,b;var P=d.groups,m=u8&&l.sticky,T=eh(ZJ,l),U=l.source,M=0,_=g;if(m&&(T=XJ(T,"y",""),$J(T,"g")===-1&&(T+="g"),_=wI(g,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&WJ(g,l.lastIndex-1)!=="\n")&&(U="(?: "+U+")",_=" "+_,M++),p=new RegExp("^(?:"+U+")",T)),Bb&&(p=new RegExp("^"+U+"$(?!\\s)",T)),Ub&&(w=l.lastIndex),F=eh(eE,m?p:l,_),m?F?(F.input=wI(F.input,M),F[0]=wI(F[0],M),F.index=l.lastIndex,l.lastIndex+=F[0].length):l.lastIndex=0:Ub&&F&&(l.lastIndex=l.global?F.index+F[0].length:w),Bb&&F&&F.length>1&&eh(YJ,F[0],p,function(){for(C=1;C<arguments.length-2;C++)arguments[C]===void 0&&(F[C]=void 0)}),F&&P)for(F.groups=E=HJ(null),C=0;C<P.length;C++)y=P[C],E[y[0]]=F[y[1]];return F});var vR=Fb,JJ=t8,_F=vR;JJ({target:"RegExp",proto:!0,forced:/./.exec!==_F},{exec:_F});var eee=tR,l8=Function.prototype,TF=l8.apply,SF=l8.call,tee=typeof Reflect=="object"&&Reflect.apply||(eee?SF.bind(TF):function(){return SF.apply(TF,arguments)}),wF=Cl,AF=$B,nee=vR,IF=ms,c8=pf,ree=sR,iee=c8("species"),AI=RegExp.prototype,oee=function(i,o,l,d){var g=c8(i),S=!IF(function(){var F={};return F[g]=function(){return 7},""[i](F)!==7}),b=S&&!IF(function(){var F=!1,C=/a/;return i==="split"&&(C={},C.constructor={},C.constructor[iee]=function(){return C},C.flags="",C[g]=/./[g]),C.exec=function(){return F=!0,null},C[g](""),!F});if(!S||!b||l){var p=/./[g],w=o(g,""[i],function(F,C,E,y,P){var m=C.exec;return m===nee||m===AI.exec?S&&!P?{done:!0,value:wF(p,C,E,y)}:{done:!0,value:wF(F,E,C,y)}:{done:!1}});AF(String.prototype,i,w[0]),AF(AI,g,w[1])}d&&ree(AI[g],"sham",!0)},yR=_a,aee=NE,see=ME,uee=um,lee=yR("".charAt),bF=yR("".charCodeAt),cee=yR("".slice),CF=function(i){return function(o,l){var d=see(uee(o)),g=aee(l),S=d.length,b,p;return g<0||g>=S?i?"":void 0:(b=bF(d,g),b<55296||b>56319||g+1===S||(p=bF(d,g+1))<56320||p>57343?i?lee(d,g):b:i?cee(d,g,g+2):(b-55296<<10)+(p-56320)+65536)}},fee={codeAt:CF(!1),charAt:CF(!0)},dee=fee.charAt,hee=function(i,o,l){return o+(l?dee(i,o).length:1)},RF=Cl,pee=gf,gee=Va,mee=CE,vee=vR,yee=TypeError,Eee=function(i,o){var l=i.exec;if(gee(l)){var d=RF(l,i,o);return d!==null&&pee(d),d}if(mee(i)==="RegExp")return RF(vee,i,o);throw new yee("RegExp#exec called on incompatible receiver")},_ee=tee,xF=Cl,PE=_a,Tee=oee,See=ms,wee=gf,Aee=Va,Iee=RE,bee=NE,Cee=QB,Ud=ME,Ree=um,xee=hee,Nee=rR,Mee=i8,Dee=Eee,Pee=pf,jb=Pee("replace"),Oee=Math.max,Lee=Math.min,kee=PE([].concat),II=PE([].push),NF=PE("".indexOf),MF=PE("".slice),Fee=function(i){return i===void 0?i:String(i)},Uee=function(){return"a".replace(/./,"$0")==="$0"}(),DF=function(){return/./[jb]?/./[jb]("a","$0")==="":!1}(),Bee=!See(function(){var i=/./;return i.exec=function(){var o=[];return o.groups={a:"7"},o},"".replace(i,"$<a>")!=="7"});Tee("replace",function(i,o,l){var d=DF?"$":"$0";return[function(S,b){var p=Ree(this),w=Iee(S)?void 0:Nee(S,jb);return w?xF(w,S,p,b):xF(o,Ud(p),S,b)},function(g,S){var b=wee(this),p=Ud(g);if(typeof S=="string"&&NF(S,d)===-1&&NF(S,"$<")===-1){var w=l(o,b,p,S);if(w.done)return w.value}var F=Aee(S);F||(S=Ud(S));var C=b.global,E;C&&(E=b.unicode,b.lastIndex=0);for(var y=[],P;P=Dee(b,p),!(P===null||(II(y,P),!C));){var m=Ud(P[0]);m===""&&(b.lastIndex=xee(p,Cee(b.lastIndex),E))}for(var T="",U=0,M=0;M<y.length;M++){P=y[M];for(var _=Ud(P[0]),I=Oee(Lee(bee(P.index),p.length),0),x=[],Z,Y=1;Y<P.length;Y++)II(x,Fee(P[Y]));var $=P.groups;if(F){var Q=kee([_],x,I,p);$!==void 0&&II(Q,$),Z=Ud(_ee(S,void 0,Q))}else Z=Mee(_,p,I,x,$,S);I>=U&&(T+=MF(p,U,I)+Z,U=I+_.length)}return T+MF(p,U)}]},!Bee||!Uee||DF);var jee=Ha,Zee=_a,qee=function(i,o){return Zee(jee[i].prototype[o])},Gee=qee;Gee("String","replaceAll");function ER(){const i=mu(),o=hf(),[l]=TB();return In.useCallback(async(d,g)=>{var p;if(!l||!i)return;const S=(p=o==null?void 0:o.distributionUrl)!=null?p:"";let b=l.cameraURLTemplate;if(b=b.replace("{{baseURL}}",S),b=b.replace("{{folderName}}/",g.camera.folderName?g.camera.folderName+"/":""),b=b.replaceAll("{{assetName}}",g.camera.assetName||""),b!==d.currentSource&&o)return await d.load(g,b,{startTimeSeconds:i.getExpectedPositionInSeconds()-Ci(g.camera.span.time,o.frameRate),eventOffset:Ci(g.camera.span.time,o.frameRate),reelOffset:Ci(g.camera.reelOffset,o.frameRate)})},[i,l,o])}function Hee(){const i=ER();return In.useCallback(async(o,l)=>await i(o,l).then(async d=>await(d==null?void 0:d())),[i])}function Vee(){const i=mu(),o=Sh(),l=QC();In.useEffect(()=>{if(!i||!o||!l)return;const d=({command:g,reference:S,start:b})=>{i.pausePlayStream(g,S,b)};return o.on("pausePlayStream",d),()=>{o.off("pausePlayStream",d)}},[i,o,l])}function Kee(i){const o=mu(),l=hf(),d=Sh(),g=Hee(),S=ER();In.useEffect(()=>{if(!d||!l||!o||!i)return;let b,p=[void 0,-1];const w=()=>{const T=o.getExpectedPositionInSeconds()<=0?0:o.getExpectedPositionInSeconds();return IE(l,T)[0]},F=T=>{p[0]=S(i,T),p[1]=T.index},C=T=>{if(p[0]&&p[1]===T.index){p[0].then(U=>{try{U==null||U()}catch(M){console.error("failed to play loaded stream",M)}}),p=[void 0,-1];return}try{g(i,T)}catch(U){console.error("failed to play stream",U)}},E=()=>{const T=w();T&&F(T)},y=()=>{const T=w();T&&C(T)},P=({index:T})=>{var M;const U=(M=k3(T,l))!=null?M:Cb(T,l,o);U&&F(U)},m=({index:T})=>{var M;const U=(M=k3(T,l))!=null?M:Cb(T,l,o);U&&(F(U),b=setTimeout(()=>{C(U)},1900))};return d.on("prepareCast",P),d.on("cast",m),o.on("prepareStart",E),o.on("start",y),o.isLive?(o.preparePlayback(),y()):o.isInPrepare?E():console.log("HRRR"),()=>{d.off("prepareCast",P),d.off("cast",m),o.off("prepareStart",E),o.off("start",y),clearTimeout(b)}},[d,l,o,i,g,S])}function zee(i){const o=sm();In.useEffect(()=>{if(!i||!o)return;const l=()=>{i.currentCamera&&o.updatePlaying(i.currentCamera)};return i.on("playing",l),()=>{i.off("playing",l)}},[i,o])}function Yee(i){const o=sm(),l=mu(),d=hf(),g=ER();In.useEffect(()=>{if(!d||!l||!i||!o)return;const S=({remainingTime:b})=>{const p=dB(d,l.getExpectedPositionInSeconds(),b,i.currentCamera);if(p)try{const w=g(i,p);o.once("ended",()=>{w.then(F=>{F==null||F()})})}catch(w){console.error("failed to load stream",w)}else o.once("ended",()=>{o.endEvent()})};return o.on("nearEnd",S),()=>{o.off("nearEnd",S)}},[d,l,i,g,o])}function Wee(i,o,l){const d=jY(),g=mu(),[S,b]=In.useState(null);return In.useEffect(()=>{const p=document.querySelector(i);if(p==null||!g||!l)return;const w=new nW({containerElement:p,playerOptions:{autoPlay:!1,widevineLicenseUrl:o,policyQuery:l,preferredTech:"dashjs",customLicenceRequestHeaders:{"Api-version":"v1",Session:d}},eventClock:g});return b(w),()=>{w.destroy()}},[d,i,o,l,g]),S}function $ee(i){const o=mu(),l=Sh(),d=hf(),g=sm(),[S,b]=In.useState(),[p,w]=In.useState();return In.useEffect(()=>{if(!d||!o||!i||!l||!g)return;const F=({index:E})=>{w(Cb(E,d,o)),b(i.currentCamera)},C=()=>{const E=i.currentCamera;(E==null?void 0:E.camera.transition)==="mapAndClosing"&&(w(dB(d,o.getExpectedPositionInSeconds(),2,E)),b(E))};return l.on("cast",F),g.on("transition",C),()=>{l.off("cast",F),g.off("transition",C)}},[d,o,i,l,g]),[S,p]}function f8({x:i,y:o,mapScale:l}){const[d,g]=In.useState(0),[S,b]=In.useState(0),[p,w]=In.useState(0),[F,C]=In.useState(0),[E,y]=In.useState(0);return In.useEffect(()=>{const P=window.innerWidth,m=window.innerHeight,T=P/12,U=m/12;C(m/2-m*.05),y(P/m),g(i*T),b(o*U),w(T*l)},[i,o,l]),{scaledX:d,scaledY:S,size:p,baseY:F,aspectRatio:E}}const Xee="_container_zht4e_1",Qee="_fadeIn_zht4e_1",Jee="_scrollWrapper_zht4e_15",ete="_scrollContainer_zht4e_29",bI={container:Xee,fadeIn:Qee,scrollWrapper:Jee,scrollContainer:ete};function tte(){const i=XC();return Rt.jsxs("div",{className:bI.container,children:[Rt.jsx("h1",{children:i==null?void 0:i.postScreen.title}),Rt.jsx("p",{className:"body-text",style:{opacity:.5},children:i==null?void 0:i.postScreen.body}),Rt.jsx("div",{className:bI.scrollWrapper,children:Rt.jsx("div",{className:bI.scrollContainer,children:i&&i.postScreen.offersCollection.items.map((o,l)=>Rt.jsx("img",{src:o.image.url},l))})})]})}const nte="_transitionWrapper_jyngr_1",rte="_active_jyngr_17",ite="_transition_jyngr_1",ote="_fadeOut_jyngr_1",ate="_hidden_jyngr_57",ste="_visible_jyngr_67",ute="_videoTitle_jyngr_77",lte="_fadeIn_jyngr_1",fg={transitionWrapper:nte,active:rte,transition:ite,fadeOut:ote,hidden:ate,visible:ste,videoTitle:ute,fadeIn:lte},cte="_placeContainer_ywyae_1",fte="_place_ywyae_1",dte="_background_ywyae_45",hte="_activePlace_ywyae_57",pte="_fadeOut_ywyae_1",gte="_normalPlace_ywyae_79",mte="_selectedPlace_ywyae_99",vte="_fadeIn_ywyae_1",yte="_pulseEffect_ywyae_1",Ete="_title_ywyae_153",Zc={placeContainer:cte,place:fte,background:dte,activePlace:hte,fadeOut:pte,normalPlace:gte,selectedPlace:mte,fadeIn:vte,pulseEffect:yte,title:Ete};var Ls=(i=>(i.ACTIVE_PLACE="ActivePlace",i.SELECTED_PLACE="SelectedPlace",i.NORMAL_PLACE="NormalPlace",i))(Ls||{});const _te=({place:i,mapPlacesLength:o})=>{const l=f8({x:i.mapPosition.x,y:i.mapPosition.y,mapScale:i.mapScale}),d=In.useMemo(()=>{switch(i.placeType){case Ls.ACTIVE_PLACE:return Zc.activePlace;case Ls.SELECTED_PLACE:return Zc.selectedPlace;case Ls.NORMAL_PLACE:default:return Zc.normalPlace}},[i]);return Rt.jsx("div",{className:Zc.placeContainer,children:Rt.jsxs("div",{className:"".concat(Zc.place," ").concat(d),style:{width:l.size,height:l.size,left:"calc(50% + ".concat(o>1?l.scaledX:0,"px)"),top:"calc(50% + ".concat(o>1?l.scaledY:0,"px)"),transform:"translate(-50%, -50%)"},children:[Rt.jsx("div",{className:Zc.background}),(i.placeType===Ls.ACTIVE_PLACE||i.placeType===Ls.SELECTED_PLACE)&&Rt.jsx("div",{className:"subheader-light ".concat(Zc.title),children:i.title})]})})},Tte="_followContainer_1h8ds_1",Ste="_follow_1h8ds_1",wte="_selectedFollow_1h8ds_35",Ate="_pulseEffect_1h8ds_1",Ite="_notSelectedFollow_1h8ds_79",bte="_iconContainer_1h8ds_97",Cte="_labelContainer_1h8ds_131",Bd={followContainer:Tte,follow:Ste,selectedFollow:wte,pulseEffect:Ate,notSelectedFollow:Ite,iconContainer:bte,labelContainer:Cte},Rte="_label_svzic_1",xte={label:Rte},Nte=({content:i,classNames:o=""})=>Rt.jsx("div",{className:"".concat(xte.label," ").concat(o," label"),children:i}),Mte=({style:i})=>Rt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 32 32",fill:"none",style:i,children:Rt.jsx("path",{d:"M24 19L16 11L8 19",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),d8=({classNames:i,styles:o,color:l,stroke:d})=>Rt.jsxs("svg",{className:i,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[Rt.jsx("path",{d:"M96 176C140.183 176 176 140.183 176 96C176 51.8172 140.183 16 96 16C51.8172 16 16 51.8172 16 96C16 140.183 51.8172 176 96 176Z",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M96 64V108",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("circle",{cx:"96",cy:"128",r:"8",fill:l||"white"})]}),Dte=({classNames:i,styles:o,color:l,stroke:d})=>Rt.jsxs("svg",{className:i,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[Rt.jsx("path",{d:"M11.1475 18.5801L152.567 160",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("circle",{cx:"96",cy:"160",r:"4",fill:"white"}),Rt.jsx("path",{d:"M180.853 75.1472C169.71 64.0041 156.481 55.165 141.922 49.1344C127.363 43.1039 111.758 40 95.9998 40C83.9607 40 72.0117 41.8116 60.55 45.3557M11.147 75.1472C20.7929 65.5013 32.0017 57.5818 44.2834 51.716",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),Rt.jsx("path",{d:"M152.569 103.431C145.14 96.0028 136.321 90.11 126.615 86.0896C116.909 82.0693 106.506 80 96.0002 80C95.7328 80 95.4656 80.0013 95.1984 80.004M39.4316 103.431C46.8603 96.0028 55.6795 90.11 65.3855 86.0896C68.6182 84.7506 71.9282 83.628 75.2936 82.7262",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),Rt.jsx("path",{d:"M124.294 131.725C120.58 128.011 116.17 125.065 111.317 123.055C106.464 121.044 101.263 120.01 96.0099 120.01C90.757 120.01 85.5555 121.044 80.7025 123.055C75.8495 125.065 71.4399 128.011 67.7256 131.726",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"})]}),Pte=()=>Rt.jsxs("svg",{width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Rt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M149.333 96L120 125.333L106.667 112",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),Ote=()=>Rt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",children:[Rt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M144 96L112 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M112 96L144 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),Lte=()=>Rt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[Rt.jsx("path",{d:"M2 12V44L16 36L32 44L46 36V4L32 12L16 4L2 12Z",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M16 4V36",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M32 12V44",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),kte=()=>Rt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Rt.jsxs("g",{children:[Rt.jsx("path",{d:"M192,64H32C14.328,64,0,78.328,0,96v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S209.672,64,192,64z"}),Rt.jsx("path",{d:"M480,64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32V96\r\n		C512,78.328,497.672,64,480,64z"}),Rt.jsx("path",{d:"M480,288c-17.672,0-32,14.328-32,32v64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32v-96\r\n		C512,302.328,497.672,288,480,288z"}),Rt.jsx("path",{d:"M192,384H64v-64c0-17.672-14.328-32-32-32S0,302.328,0,320v96c0,17.672,14.328,32,32,32h160c17.672,0,32-14.328,32-32\r\n		S209.672,384,192,384z"})]})}),Fte=()=>Rt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Rt.jsxs("g",{children:[Rt.jsx("path",{d:"M192,64c-17.672,0-32,14.328-32,32v64H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32V96\r\n		C224,78.328,209.672,64,192,64z"}),Rt.jsx("path",{d:"M320,224h160c17.672,0,32-14.328,32-32s-14.328-32-32-32H352V96c0-17.672-14.328-32-32-32s-32,14.328-32,32v96\r\n		C288,209.672,302.328,224,320,224z"}),Rt.jsx("path",{d:"M480,288H320c-17.672,0-32,14.328-32,32v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S497.672,288,480,288z"}),Rt.jsx("path",{d:"M192,288H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32v-96\r\n		C224,302.328,209.672,288,192,288z"})]})}),Ute=({follow:i})=>{var g,S,b,p;const o=f8({x:(S=(g=i.mapPosition)==null?void 0:g.x)!=null?S:0,y:(p=(b=i.mapPosition)==null?void 0:b.y)!=null?p:0,mapScale:.6}),[l,d]=In.useState(0);return In.useEffect(()=>{function w(F,C,E){return-Math.atan2((F.x-C.x)*E,F.y-C.y)*(180/Math.PI)}i.mapPosition&&d(w(i.mapPositions[0],i.mapPositions[i.mapPositions.length-1],o.aspectRatio))},[i.mapPosition,i.mapPositions,o]),Rt.jsxs("div",{className:Bd.followContainer,style:{width:o.size,height:o.size,left:"calc(50% + ".concat(o.scaledX,"px)"),top:"calc(50% - ".concat(o.scaledY,"px)")},children:[Rt.jsx("div",{className:"".concat(Bd.follow," ").concat(i.isSelectedFollow?Bd.selectedFollow:Bd.notSelectedFollow," ").concat(Bd.iconContainer),children:Rt.jsx(Mte,{style:{transform:"rotate(".concat(l,"deg)")}})}),i.isSelectedFollow&&Rt.jsx(Nte,{classNames:Bd.labelContainer,content:i.title})]})},Bte=({fromCamera:i,toCamera:o})=>{const l=hf(),d=mu(),g=4200,S=g+3950,b=1900,[p,w]=In.useState([]),[F,C]=In.useState([]),[E,y]=In.useState(!1),[P,m]=In.useState(!1),[T,U]=In.useState(""),M=In.useRef([]),_=In.useMemo(()=>{function se(R,X){const ce=R.jumpSpots.map(qe=>qe.camera.span),me=ce.map(qe=>qe.time).map(qe=>Ci(qe,X.frameRate)),Ce=Math.min(...me),Je=ce.map(qe=>Ci(qe.time,X.frameRate)+Ci(qe.duration,X.frameRate)),we=Math.max(...Je);return{start:Ce,end:we}}return l==null?void 0:l.places.filter(R=>R.jumpSpots.length>0).map((R,X)=>({...R,span:se(R,l),placeType:Ls.NORMAL_PLACE,placeIndex:X}))},[l]),I=In.useMemo(()=>(l==null?void 0:l.follows.map(se=>({...se,isSelectedFollow:!1})))||[],[l]),x=In.useCallback((se,R)=>{const X=Ci(se.camera.span.time,R.frameRate)+2;return(_==null?void 0:_.filter(ce=>ce.span.start<=X&&X<=ce.span.end))||[]},[_]),Z=In.useCallback(se=>{const R=se.mapPositions[0]||{x:0,y:0};if(l&&d){const X=d.getExpectedPositionInSeconds()-Ci(se.camera.span.time,l.frameRate),ce=Ci(se.camera.span.duration,l.frameRate);let oe=Math.floor(X*4/ce);return X===ce&&(oe-=1),se.mapPositions[oe]||R}return R},[d,l]),Y=In.useCallback((se,R)=>{const X=Ci(se.camera.span.time,R.frameRate)+2;return I.filter(ce=>Ci(ce.camera.span.time,R.frameRate)<=X&&X<=Ci(ce.camera.span.time,R.frameRate)+Ci(ce.camera.span.duration,R.frameRate)).map(ce=>({...ce,mapPosition:Z(ce)}))},[I,Z]),$=In.useCallback(se=>_==null?void 0:_.find(R=>R.jumpSpots.some(X=>X.camera.assetName===se.camera.assetName)),[_]),Q=(se,R)=>R.jumpSpots.some(X=>X.camera.assetName===se.camera.assetName);return In.useEffect(()=>{if(!_||!i||!o||!l||i.camera.assetName===o.camera.assetName)return;const se=M.current;let R=[],X=[],ce=[],oe=[];if(U(o.placeTitle?o.placeTitle:o.title),i.type===Hc.JUMPSPOT&&o.type===Hc.JUMPSPOT&&i.placeIndex===o.placeIndex)m(!1),y(!0);else{switch(m(!0),i.type){case Hc.JUMPSPOT:X=Y(o,l),R=x(i,l).map(qe=>Q(i,qe)?{...qe,placeType:Ls.ACTIVE_PLACE}:qe);break;case Hc.FOLLOW:R=x(i,l),X=Y(i,l).map(qe=>({...qe,isSelectedFollow:i.camera.assetName===qe.camera.assetName}));break}switch(w(R),C(X),o.type){case Hc.JUMPSPOT:oe=Y(i,l);const qe=R.find(ft=>Q(o,ft));if(qe)ce=R.map(ft=>({...ft,placeType:ft.placeIndex===qe.placeIndex?Ls.SELECTED_PLACE:Ls.NORMAL_PLACE}));else{const ft=$(o);ft&&(ft.placeType=Ls.SELECTED_PLACE,ce=[...R.map(be=>({...be,placeType:Ls.NORMAL_PLACE})),ft])}break;case Hc.FOLLOW:ce=x(i,l),oe=Y(i,l);const st=X.find(ft=>ft.camera.assetName===o.camera.assetName);if(st)oe=X.map(ft=>({...ft,isSelectedFollow:ft.camera.assetName===st.camera.assetName}));else{const ft=I.find(be=>be.camera.assetName===o.camera.assetName);if(ft){const be={...ft,isSelectedFollow:!0,mapPosition:Z(ft)};oe=[...X.map(He=>({...He,isSelectedFollow:!1})),be]}}break}}const me=setTimeout(()=>{C(oe)},b);se.push(me);const Ce=setTimeout(()=>{w(ce)},b);se.push(Ce);const Je=setTimeout(()=>{m(!1),y(!0)},g);se.push(Je);const we=setTimeout(()=>{y(!1)},S);return se.push(we),()=>{se.forEach(qe=>{clearTimeout(qe)}),M.current=[]}},[i,o,_,I,Y,$,l,x,Z,S]),Rt.jsxs("div",{className:"".concat(fg.transitionWrapper," ").concat(P?fg.active:""),children:[P&&Rt.jsxs("div",{className:"".concat(fg.transition," ").concat(fg.visible),children:[p.map((se,R)=>Rt.jsx(_te,{place:se,mapPlacesLength:p.length},"place-".concat(R.toString()))),F.filter(se=>se.camera.assetName===(i==null?void 0:i.camera.assetName)||se.camera.assetName===(o==null?void 0:o.camera.assetName)).map((se,R)=>Rt.jsx(Ute,{follow:se},"follow-".concat(R.toString())))]}),E&&Rt.jsx("h1",{className:fg.videoTitle,style:{textShadow:"2px 2px 4px black"},children:T})]})},jte="_playerPage_s22qw_1",Zte="_playerContainer_s22qw_13",qte="_fadeIn_s22qw_1",PF={playerPage:jte,playerContainer:Zte,fadeIn:qte},Gte="_attention_1xh5o_1",Hte="_ripple1_1xh5o_1",Vte="_ripple2_1xh5o_1",Kte="_thirdRipple_1xh5o_81",zte="_ripple3_1xh5o_1",Yte="_iconWrapper_1xh5o_105",CI={attention:Gte,ripple1:Hte,ripple2:Vte,thirdRipple:Kte,ripple3:zte,iconWrapper:Yte},Wte=()=>{const i=sm(),[o,l]=In.useState(!1),d=5e3;if(In.useEffect(()=>{if(!i)return;let g;const S=()=>{l(!0),g=setTimeout(()=>{l(!1)},d)};return i.on("attention",S),()=>{i.off("attention",S),clearTimeout(g)}},[i]),!!o)return Rt.jsxs("div",{className:CI.attention,children:[Rt.jsx("span",{className:CI.iconWrapper,children:Rt.jsx(Lte,{})}),Rt.jsx("span",{className:CI.thirdRipple})]})};var $te=Object.defineProperty,tE=Object.getOwnPropertySymbols,h8=Object.prototype.hasOwnProperty,p8=Object.prototype.propertyIsEnumerable,OF=(i,o,l)=>o in i?$te(i,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[o]=l,Xg=(i,o)=>{for(var l in o||(o={}))h8.call(o,l)&&OF(i,l,o[l]);if(tE)for(var l of tE(o))p8.call(o,l)&&OF(i,l,o[l]);return i},_R=(i,o)=>{var l={};for(var d in i)h8.call(i,d)&&o.indexOf(d)<0&&(l[d]=i[d]);if(i!=null&&tE)for(var d of tE(i))o.indexOf(d)<0&&p8.call(i,d)&&(l[d]=i[d]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var sf;(i=>{const o=class{constructor(w,F,C,E){if(this.version=w,this.errorCorrectionLevel=F,this.modules=[],this.isFunction=[],w<o.MIN_VERSION||w>o.MAX_VERSION)throw new RangeError("Version value out of range");if(E<-1||E>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let y=[];for(let m=0;m<this.size;m++)y.push(!1);for(let m=0;m<this.size;m++)this.modules.push(y.slice()),this.isFunction.push(y.slice());this.drawFunctionPatterns();const P=this.addEccAndInterleave(C);if(this.drawCodewords(P),E==-1){let m=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const U=this.getPenaltyScore();U<m&&(E=T,m=U),this.applyMask(T)}}S(0<=E&&E<=7),this.mask=E,this.applyMask(E),this.drawFormatBits(E),this.isFunction=[]}static encodeText(w,F){const C=i.QrSegment.makeSegments(w);return o.encodeSegments(C,F)}static encodeBinary(w,F){const C=i.QrSegment.makeBytes(w);return o.encodeSegments([C],F)}static encodeSegments(w,F,C=1,E=40,y=-1,P=!0){if(!(o.MIN_VERSION<=C&&C<=E&&E<=o.MAX_VERSION)||y<-1||y>7)throw new RangeError("Invalid value");let m,T;for(m=C;;m++){const I=o.getNumDataCodewords(m,F)*8,x=p.getTotalBits(w,m);if(x<=I){T=x;break}if(m>=E)throw new RangeError("Data too long")}for(const I of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])P&&T<=o.getNumDataCodewords(m,I)*8&&(F=I);let U=[];for(const I of w){d(I.mode.modeBits,4,U),d(I.numChars,I.mode.numCharCountBits(m),U);for(const x of I.getData())U.push(x)}S(U.length==T);const M=o.getNumDataCodewords(m,F)*8;S(U.length<=M),d(0,Math.min(4,M-U.length),U),d(0,(8-U.length%8)%8,U),S(U.length%8==0);for(let I=236;U.length<M;I^=253)d(I,8,U);let _=[];for(;_.length*8<U.length;)_.push(0);return U.forEach((I,x)=>_[x>>>3]|=I<<7-(x&7)),new o(m,F,_,y)}getModule(w,F){return 0<=w&&w<this.size&&0<=F&&F<this.size&&this.modules[F][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),F=w.length;for(let C=0;C<F;C++)for(let E=0;E<F;E++)C==0&&E==0||C==0&&E==F-1||C==F-1&&E==0||this.drawAlignmentPattern(w[C],w[E]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const F=this.errorCorrectionLevel.formatBits<<3|w;let C=F;for(let y=0;y<10;y++)C=C<<1^(C>>>9)*1335;const E=(F<<10|C)^21522;S(E>>>15==0);for(let y=0;y<=5;y++)this.setFunctionModule(8,y,g(E,y));this.setFunctionModule(8,7,g(E,6)),this.setFunctionModule(8,8,g(E,7)),this.setFunctionModule(7,8,g(E,8));for(let y=9;y<15;y++)this.setFunctionModule(14-y,8,g(E,y));for(let y=0;y<8;y++)this.setFunctionModule(this.size-1-y,8,g(E,y));for(let y=8;y<15;y++)this.setFunctionModule(8,this.size-15+y,g(E,y));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let C=0;C<12;C++)w=w<<1^(w>>>11)*7973;const F=this.version<<12|w;S(F>>>18==0);for(let C=0;C<18;C++){const E=g(F,C),y=this.size-11+C%3,P=Math.floor(C/3);this.setFunctionModule(y,P,E),this.setFunctionModule(P,y,E)}}drawFinderPattern(w,F){for(let C=-4;C<=4;C++)for(let E=-4;E<=4;E++){const y=Math.max(Math.abs(E),Math.abs(C)),P=w+E,m=F+C;0<=P&&P<this.size&&0<=m&&m<this.size&&this.setFunctionModule(P,m,y!=2&&y!=4)}}drawAlignmentPattern(w,F){for(let C=-2;C<=2;C++)for(let E=-2;E<=2;E++)this.setFunctionModule(w+E,F+C,Math.max(Math.abs(E),Math.abs(C))!=1)}setFunctionModule(w,F,C){this.modules[F][w]=C,this.isFunction[F][w]=!0}addEccAndInterleave(w){const F=this.version,C=this.errorCorrectionLevel;if(w.length!=o.getNumDataCodewords(F,C))throw new RangeError("Invalid argument");const E=o.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][F],y=o.ECC_CODEWORDS_PER_BLOCK[C.ordinal][F],P=Math.floor(o.getNumRawDataModules(F)/8),m=E-P%E,T=Math.floor(P/E);let U=[];const M=o.reedSolomonComputeDivisor(y);for(let I=0,x=0;I<E;I++){let Z=w.slice(x,x+T-y+(I<m?0:1));x+=Z.length;const Y=o.reedSolomonComputeRemainder(Z,M);I<m&&Z.push(0),U.push(Z.concat(Y))}let _=[];for(let I=0;I<U[0].length;I++)U.forEach((x,Z)=>{(I!=T-y||Z>=m)&&_.push(x[I])});return S(_.length==P),_}drawCodewords(w){if(w.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let F=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let E=0;E<this.size;E++)for(let y=0;y<2;y++){const P=C-y,T=(C+1&2)==0?this.size-1-E:E;!this.isFunction[T][P]&&F<w.length*8&&(this.modules[T][P]=g(w[F>>>3],7-(F&7)),F++)}}S(F==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let F=0;F<this.size;F++)for(let C=0;C<this.size;C++){let E;switch(w){case 0:E=(C+F)%2==0;break;case 1:E=F%2==0;break;case 2:E=C%3==0;break;case 3:E=(C+F)%3==0;break;case 4:E=(Math.floor(C/3)+Math.floor(F/2))%2==0;break;case 5:E=C*F%2+C*F%3==0;break;case 6:E=(C*F%2+C*F%3)%2==0;break;case 7:E=((C+F)%2+C*F%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[F][C]&&E&&(this.modules[F][C]=!this.modules[F][C])}}getPenaltyScore(){let w=0;for(let y=0;y<this.size;y++){let P=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[y][U]==P?(m++,m==5?w+=o.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),P||(w+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),P=this.modules[y][U],m=1);w+=this.finderPenaltyTerminateAndCount(P,m,T)*o.PENALTY_N3}for(let y=0;y<this.size;y++){let P=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[U][y]==P?(m++,m==5?w+=o.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),P||(w+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),P=this.modules[U][y],m=1);w+=this.finderPenaltyTerminateAndCount(P,m,T)*o.PENALTY_N3}for(let y=0;y<this.size-1;y++)for(let P=0;P<this.size-1;P++){const m=this.modules[y][P];m==this.modules[y][P+1]&&m==this.modules[y+1][P]&&m==this.modules[y+1][P+1]&&(w+=o.PENALTY_N2)}let F=0;for(const y of this.modules)F=y.reduce((P,m)=>P+(m?1:0),F);const C=this.size*this.size,E=Math.ceil(Math.abs(F*20-C*10)/C)-1;return S(0<=E&&E<=9),w+=E*o.PENALTY_N4,S(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,F=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let C=[6];for(let E=this.size-7;C.length<w;E-=F)C.splice(1,0,E);return C}}static getNumRawDataModules(w){if(w<o.MIN_VERSION||w>o.MAX_VERSION)throw new RangeError("Version number out of range");let F=(16*w+128)*w+64;if(w>=2){const C=Math.floor(w/7)+2;F-=(25*C-10)*C-55,w>=7&&(F-=36)}return S(208<=F&&F<=29648),F}static getNumDataCodewords(w,F){return Math.floor(o.getNumRawDataModules(w)/8)-o.ECC_CODEWORDS_PER_BLOCK[F.ordinal][w]*o.NUM_ERROR_CORRECTION_BLOCKS[F.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let F=[];for(let E=0;E<w-1;E++)F.push(0);F.push(1);let C=1;for(let E=0;E<w;E++){for(let y=0;y<F.length;y++)F[y]=o.reedSolomonMultiply(F[y],C),y+1<F.length&&(F[y]^=F[y+1]);C=o.reedSolomonMultiply(C,2)}return F}static reedSolomonComputeRemainder(w,F){let C=F.map(E=>0);for(const E of w){const y=E^C.shift();C.push(0),F.forEach((P,m)=>C[m]^=o.reedSolomonMultiply(P,y))}return C}static reedSolomonMultiply(w,F){if(w>>>8||F>>>8)throw new RangeError("Byte out of range");let C=0;for(let E=7;E>=0;E--)C=C<<1^(C>>>7)*285,C^=(F>>>E&1)*w;return S(C>>>8==0),C}finderPenaltyCountPatterns(w){const F=w[1];S(F<=this.size*3);const C=F>0&&w[2]==F&&w[3]==F*3&&w[4]==F&&w[5]==F;return(C&&w[0]>=F*4&&w[6]>=F?1:0)+(C&&w[6]>=F*4&&w[0]>=F?1:0)}finderPenaltyTerminateAndCount(w,F,C){return w&&(this.finderPenaltyAddHistory(F,C),F=0),F+=this.size,this.finderPenaltyAddHistory(F,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(w,F){F[0]==0&&(w+=this.size),F.pop(),F.unshift(w)}};let l=o;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=l;function d(w,F,C){if(F<0||F>31||w>>>F)throw new RangeError("Value out of range");for(let E=F-1;E>=0;E--)C.push(w>>>E&1)}function g(w,F){return(w>>>F&1)!=0}function S(w){if(!w)throw new Error("Assertion error")}const b=class{constructor(w,F,C){if(this.mode=w,this.numChars=F,this.bitData=C,F<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(w){let F=[];for(const C of w)d(C,8,F);return new b(b.Mode.BYTE,w.length,F)}static makeNumeric(w){if(!b.isNumeric(w))throw new RangeError("String contains non-numeric characters");let F=[];for(let C=0;C<w.length;){const E=Math.min(w.length-C,3);d(parseInt(w.substr(C,E),10),E*3+1,F),C+=E}return new b(b.Mode.NUMERIC,w.length,F)}static makeAlphanumeric(w){if(!b.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let F=[],C;for(C=0;C+2<=w.length;C+=2){let E=b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C))*45;E+=b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C+1)),d(E,11,F)}return C<w.length&&d(b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C)),6,F),new b(b.Mode.ALPHANUMERIC,w.length,F)}static makeSegments(w){return w==""?[]:b.isNumeric(w)?[b.makeNumeric(w)]:b.isAlphanumeric(w)?[b.makeAlphanumeric(w)]:[b.makeBytes(b.toUtf8ByteArray(w))]}static makeEci(w){let F=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)d(w,8,F);else if(w<16384)d(2,2,F),d(w,14,F);else if(w<1e6)d(6,3,F),d(w,21,F);else throw new RangeError("ECI assignment value out of range");return new b(b.Mode.ECI,0,F)}static isNumeric(w){return b.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return b.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,F){let C=0;for(const E of w){const y=E.mode.numCharCountBits(F);if(E.numChars>=1<<y)return 1/0;C+=4+y+E.bitData.length}return C}static toUtf8ByteArray(w){w=encodeURI(w);let F=[];for(let C=0;C<w.length;C++)w.charAt(C)!="%"?F.push(w.charCodeAt(C)):(F.push(parseInt(w.substr(C+1,2),16)),C+=2);return F}};let p=b;p.NUMERIC_REGEX=/^[0-9]*$/,p.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,p.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.QrSegment=p})(sf||(sf={}));(i=>{(o=>{const l=class{constructor(g,S){this.ordinal=g,this.formatBits=S}};let d=l;d.LOW=new l(0,1),d.MEDIUM=new l(1,0),d.QUARTILE=new l(2,3),d.HIGH=new l(3,2),o.Ecc=d})(i.QrCode||(i.QrCode={}))})(sf||(sf={}));(i=>{(o=>{const l=class{constructor(g,S){this.modeBits=g,this.numBitsCharCount=S}numCharCountBits(g){return this.numBitsCharCount[Math.floor((g+7)/17)]}};let d=l;d.NUMERIC=new l(1,[10,12,14]),d.ALPHANUMERIC=new l(2,[9,11,13]),d.BYTE=new l(4,[8,16,16]),d.KANJI=new l(8,[8,10,12]),d.ECI=new l(7,[0,0,0]),o.Mode=d})(i.QrSegment||(i.QrSegment={}))})(sf||(sf={}));var th=sf;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var g8={L:th.QrCode.Ecc.LOW,M:th.QrCode.Ecc.MEDIUM,Q:th.QrCode.Ecc.QUARTILE,H:th.QrCode.Ecc.HIGH},m8=128,v8="L",y8="#FFFFFF",E8="#000000",_8=!1,TR=4,Xte=.1;function T8(i,o=0){const l=[];return i.forEach(function(d,g){let S=null;d.forEach(function(b,p){if(!b&&S!==null){l.push("M".concat(S+o," ").concat(g+o,"h").concat(p-S,"v1H").concat(S+o,"z")),S=null;return}if(p===d.length-1){if(!b)return;S===null?l.push("M".concat(p+o,",").concat(g+o," h1v1H").concat(p+o,"z")):l.push("M".concat(S+o,",").concat(g+o," h").concat(p+1-S,"v1H").concat(S+o,"z"));return}b&&S===null&&(S=p)})}),l.join("")}function S8(i,o){return i.slice().map((l,d)=>d<o.y||d>=o.y+o.h?l:l.map((g,S)=>S<o.x||S>=o.x+o.w?g:!1))}function w8(i,o,l,d){if(d==null)return null;const g=l?TR:0,S=i.length+g*2,b=Math.floor(o*Xte),p=S/o,w=(d.width||b)*p,F=(d.height||b)*p,C=d.x==null?i.length/2-w/2:d.x*p,E=d.y==null?i.length/2-F/2:d.y*p;let y=null;if(d.excavate){let P=Math.floor(C),m=Math.floor(E),T=Math.ceil(w+C-P),U=Math.ceil(F+E-m);y={x:P,y:m,w:T,h:U}}return{x:C,y:E,h:F,w,excavation:y}}var Qte=function(){try{new Path2D().addPath(new Path2D)}catch(i){return!1}return!0}();function Jte(i){const o=i,{value:l,size:d=m8,level:g=v8,bgColor:S=y8,fgColor:b=E8,includeMargin:p=_8,style:w,imageSettings:F}=o,C=_R(o,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),E=F==null?void 0:F.src,y=In.useRef(null),P=In.useRef(null),[m,T]=In.useState(!1);In.useEffect(()=>{if(y.current!=null){const _=y.current,I=_.getContext("2d");if(!I)return;let x=th.QrCode.encodeText(l,g8[g]).getModules();const Z=p?TR:0,Y=x.length+Z*2,$=w8(x,d,p,F),Q=P.current,se=$!=null&&Q!==null&&Q.complete&&Q.naturalHeight!==0&&Q.naturalWidth!==0;se&&$.excavation!=null&&(x=S8(x,$.excavation));const R=window.devicePixelRatio||1;_.height=_.width=d*R;const X=d/Y*R;I.scale(X,X),I.fillStyle=S,I.fillRect(0,0,Y,Y),I.fillStyle=b,Qte?I.fill(new Path2D(T8(x,Z))):x.forEach(function(ce,oe){ce.forEach(function(me,Ce){me&&I.fillRect(Ce+Z,oe+Z,1,1)})}),se&&I.drawImage(Q,$.x+Z,$.y+Z,$.w,$.h)}}),In.useEffect(()=>{T(!1)},[E]);const U=Xg({height:d,width:d},w);let M=null;return E!=null&&(M=du.createElement("img",{src:E,key:E,style:{display:"none"},onLoad:()=>{T(!0)},ref:P})),du.createElement(du.Fragment,null,du.createElement("canvas",Xg({style:U,height:d,width:d,ref:y},C)),M)}function ene(i){const o=i,{value:l,size:d=m8,level:g=v8,bgColor:S=y8,fgColor:b=E8,includeMargin:p=_8,imageSettings:w}=o,F=_R(o,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let C=th.QrCode.encodeText(l,g8[g]).getModules();const E=p?TR:0,y=C.length+E*2,P=w8(C,d,p,w);let m=null;w!=null&&P!=null&&(P.excavation!=null&&(C=S8(C,P.excavation)),m=du.createElement("image",{xlinkHref:w.src,height:P.h,width:P.w,x:P.x+E,y:P.y+E,preserveAspectRatio:"none"}));const T=T8(C,E);return du.createElement("svg",Xg({height:d,width:d,viewBox:"0 0 ".concat(y," ").concat(y)},F),du.createElement("path",{fill:S,d:"M0,0 h".concat(y,"v").concat(y,"H0z"),shapeRendering:"crispEdges"}),du.createElement("path",{fill:b,d:T,shapeRendering:"crispEdges"}),m)}var SR=i=>{const o=i,{renderAs:l}=o,d=_R(o,["renderAs"]);return l==="svg"?du.createElement(ene,Xg({},d)):du.createElement(Jte,Xg({},d))};const tne="_container_1l3tn_1",nne="_qrCode_1l3tn_25",rne="_text_1l3tn_35",RI={container:tne,qrCode:nne,text:rne},ine=({url:i})=>Rt.jsxs("div",{className:RI.container,children:[Rt.jsx("p",{className:"body-text ".concat(RI.text),style:{opacity:.75},children:"Scan the QR code with the app."}),Rt.jsx(SR,{className:RI.qrCode,bgColor:"white",fgColor:"black",value:i,size:500})]}),one="_controlsWrapper_1v4q3_1",ane="_hidden_1v4q3_21",sne="_iconWrapper_1v4q3_29",xI={controlsWrapper:one,hidden:ane,iconWrapper:sne},une=({visible:i,eventPlayer:o})=>{const[l,d]=In.useState(!1),g=()=>{o&&(l?o.exitFullscreen().then(()=>{d(!1)}):o.requestFullscreen().then(()=>{d(!0)}))};return Rt.jsx("div",{className:"".concat(xI.controlsWrapper," ").concat(i?"":xI.hidden),children:Rt.jsx("div",{className:xI.iconWrapper,onClick:g,children:l?Rt.jsx(Fte,{}):Rt.jsx(kte,{})})})},lne="_warningContainer_1tqkb_1",cne={warningContainer:lne},A8=()=>Rt.jsxs("div",{className:cne.warningContainer,children:[Rt.jsx(d8,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),Rt.jsx("p",{className:"label",children:"Finish setup on your mobile or tablet. "})]}),fne="_messageContainer_1jzyd_3",dne="_message_1jzyd_3",LF={messageContainer:fne,message:dne},hne=({message:i})=>Rt.jsx("div",{className:LF.messageContainer,children:Rt.jsx("div",{className:"".concat(LF.message," subheader-light"),children:i})});function pne(){const[i,o,l]=TB(),d=QC(),g=Wee("#playerContainer",o,l),[S,b]=In.useState(!1),[p,w]=In.useState(),F=JC(),C=In.useRef(),E=In.useMemo(()=>{const U=window.navigator.userAgent;return new RegExp("_TV_[A-Z0-9]+_([0-9]{4});").test(U)},[]);In.useEffect(()=>{const U=F==null?void 0:F.find(M=>M.deviceId===mh);w(U)},[F]);const y=!!(F!=null&&F.filter(U=>U.deviceId!==mh));Kee(g),zee(g),Yee(g);const[P,m]=$ee(g);Vee();const T=()=>{E||(b(!0),clearTimeout(C.current),C.current=setTimeout(()=>{b(!1)},3e3))};return Rt.jsxs("div",{className:PF.playerPage,onMouseMove:T,children:[Rt.jsxs("div",{id:"playerContainer",className:PF.playerContainer,children:[d&&Rt.jsx(KY,{eventPlayer:g}),Rt.jsx(Wte,{}),Rt.jsx(une,{visible:S,eventPlayer:g}),(p==null?void 0:p.stateInfo.state)==="showQrCode"&&Rt.jsx(ine,{url:"".concat(KC,":").concat(p.stateInfo.qrCodeDeviceId)}),Rt.jsx(Bte,{fromCamera:P,toCamera:m})]}),!y&&Rt.jsx(hne,{message:Rt.jsx(A8,{})})]})}const gne="_gradientBackground_b6nct_1",mne="_container_b6nct_15",vne="_fadeIn_b6nct_1",yne="_connectedTV_b6nct_45",Ene="_disconnectedTV_b6nct_47",_ne="_popIn_b6nct_1",Tne="_iconContainer_b6nct_105",Sne="_connectedText_b6nct_121",jd={gradientBackground:gne,container:mne,fadeIn:vne,connectedTV:yne,disconnectedTV:Ene,popIn:_ne,iconContainer:Tne,connectedText:Sne},wne=({isDisconnected:i})=>Rt.jsx("div",{className:jd.gradientBackground,children:Rt.jsxs("div",{className:jd.container,children:[Rt.jsx("div",{className:i?jd.disconnectedTV:jd.connectedTV,children:Rt.jsx("div",{className:jd.iconContainer,children:i?Rt.jsx(Ote,{}):Rt.jsx(Pte,{})})}),Rt.jsx("h1",{className:jd.connectedText,children:i?"TV disconnected":"TV connected"})]})}),Ane="_hidden_zykq7_1",Ine={hidden:Ane},bne="_gradientBackground_14xmh_1",Cne="_container_14xmh_15",Rne="_fadeIn_14xmh_1",xne="_imageWrapper_14xmh_45",Nne="_listText_14xmh_57",Mne="_boldText_14xmh_57",Dne="_image_14xmh_45",Pne="_glow_14xmh_91",One="_dividerWrapper_14xmh_119",Lne="_divider_14xmh_119",kne="_buttonsWrapper_14xmh_149",Fne="_testButton_14xmh_185",Une="_demoButton_14xmh_195",Bne="_logoutButton_14xmh_203",jne="_title_14xmh_215",Zne="_countdownWrapper_14xmh_225",qne="_timeSectionContainer_14xmh_253",Gne="_timeSection_14xmh_253",Hne="_countdownTitle_14xmh_277",Vne="_label_14xmh_285",Kne="_logos_14xmh_293",zne="_warning_14xmh_339",Zi={gradientBackground:bne,container:Cne,fadeIn:Rne,imageWrapper:xne,listText:Nne,boldText:Mne,image:Dne,glow:Pne,dividerWrapper:One,divider:Lne,buttonsWrapper:kne,testButton:Fne,demoButton:Une,logoutButton:Bne,title:jne,countdownWrapper:Zne,timeSectionContainer:qne,timeSection:Gne,countdownTitle:Hne,label:Vne,logos:Kne,warning:zne},Yne="_errorContainer_1vpqa_1",Wne={errorContainer:Yne},I8=({errorIcon:i,errorMessage:o,errorName:l})=>Rt.jsxs("div",{className:Wne.errorContainer,children:[i&&Rt.jsx("div",{children:i}),Rt.jsx("span",{className:"body-text",children:"".concat(l&&"".concat(l,".")," ").concat(o)})]}),$ne="_gradientBackground_1pfse_1",Xne="_container_1pfse_19",Qne="_qrCode_1pfse_33",NI={gradientBackground:$ne,container:Xne,qrCode:Qne},Jne=({url:i})=>Rt.jsxs("div",{className:"".concat(NI.gradientBackground," ").concat(NI.container),children:[Rt.jsx(SR,{className:NI.qrCode,bgColor:"white",fgColor:"black",value:i,size:500}),Rt.jsx("p",{className:"body-text",children:"Scan the QR code with the app."})]}),ere=({timeToLive:i})=>{const o=GY(),l=mu(),d=XC(),g=QC(),S=JC(),[b,p]=In.useState(),[w,F]=In.useState("00:00:00:00"),[C,E]=In.useState(!1),y=In.useRef(null),P=5;In.useEffect(()=>{const x=S==null?void 0:S.filter(Z=>Z.deviceId!==mh);E(!!(x!=null&&x.length))},[S]),In.useEffect(()=>{const x=S==null?void 0:S.find(Z=>Z.deviceId===mh);p(x)},[S]);let m;(x=>{x.BEFORE="before",x.MIDDLE="middle",x.END="end"})(m||(m={}));const T=x=>{if(l){let Z=new Date;switch(x){case"end":Z=new Date(l.demoEndtime);break;case"middle":Z.setMinutes(Z.getMinutes()-22);break;default:case"before":Z.setSeconds(Z.getSeconds()+P);break}l.updateStartTime(Z,!0)}};In.useEffect(()=>{if(i&&i>0){const x=Q=>{const se=Date.parse(Q.toString())-Date.parse(new Date().toString()),R=Math.floor(se/1e3%60),X=Math.floor(se/1e3/60%60),ce=Math.floor(se/1e3/60/60%24),oe=Math.floor(se/1e3/60/60/24);return{total:se,days:oe,hours:ce,minutes:X,seconds:R}},Z=Q=>{const{total:se,days:R,hours:X,minutes:ce,seconds:oe}=x(Q);se>=0&&F((R>9?R:"0"+R)+":"+(X>9?X:"0"+X)+":"+(ce>9?ce:"0"+ce)+":"+(oe>9?oe:"0"+oe))};(Q=>{y.current&&clearInterval(y.current),Z(Q);const se=setInterval(()=>{Z(Q)},1e3);y.current=se})((Q=>{const se=new Date;return se.setSeconds(se.getSeconds()+Math.floor(Q/1e3)),se})(i))}},[i]);const[U,M,_,I]=w.split(":");if(b&&b.stateInfo.state==="showQrCode"){const x="".concat(KC,":").concat(b.stateInfo.qrCodeDeviceId);return Rt.jsx(Jne,{url:x})}return Rt.jsxs("div",{className:Zi.container,children:[g&&Rt.jsx("div",{className:Zi.buttonsWrapper,children:Rt.jsxs("div",{children:[Rt.jsx(ta,{className:"".concat(Zi.demoButton," ").concat(Zi.testButton),onClick:()=>{T("before")},selfFocus:!0,children:"Before"}),Rt.jsx(ta,{className:Zi.testButton,onClick:()=>{T("middle")},children:"Middle"}),Rt.jsx(ta,{className:Zi.testButton,onClick:()=>{T("end")},children:"End"})]})}),o.map((x,Z)=>Rt.jsx(I8,{errorMessage:x.toString},"".concat(x.name,"-error-").concat(Z.toString()))),Rt.jsxs("div",{className:Zi.imageWrapper,children:[Rt.jsx("div",{className:Zi.glow}),Rt.jsx("img",{className:Zi.image,src:"".concat(d==null?void 0:d.preScreen.backgroundLandscape.url)})]}),Rt.jsxs("div",{className:Zi.countdownWrapper,children:[Rt.jsx("div",{className:"".concat(Zi.title," subheader-bold"),children:d==null?void 0:d.preScreen.showTitle}),Rt.jsx("div",{className:Zi.dividerWrapper,children:Rt.jsx("div",{className:Zi.divider})}),Rt.jsx("p",{className:"body-text ".concat(Zi.countdownTitle),children:"Starts in"}),Rt.jsxs("div",{className:Zi.timeSectionContainer,children:[Rt.jsxs("div",{className:Zi.timeSection,children:[Rt.jsx("div",{className:"subheader-bold",children:U}),Rt.jsx("div",{className:"".concat(Zi.label," label"),children:"days"})]}),Rt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),Rt.jsxs("div",{className:Zi.timeSection,children:[Rt.jsx("div",{className:"subheader-bold",children:M}),Rt.jsx("div",{className:"".concat(Zi.label," label"),children:"hours"})]}),Rt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),Rt.jsxs("div",{className:Zi.timeSection,children:[Rt.jsx("div",{className:"subheader-bold",children:_}),Rt.jsx("div",{className:"".concat(Zi.label," label"),children:"mins"})]}),Rt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),Rt.jsxs("div",{className:Zi.timeSection,children:[Rt.jsx("div",{className:"subheader-bold",children:I}),Rt.jsx("div",{className:"".concat(Zi.label," label"),children:"secs"})]})]})]}),Rt.jsx("div",{className:Zi.warning,children:!C&&W0==="new"&&Rt.jsx(A8,{})})]})},tre="_wrapper_f3bpf_1",nre="_container_f3bpf_21",rre="_qrCodeContainer_f3bpf_41",ire="_qrCode_f3bpf_41",ore="_listContainer_f3bpf_67",are="_list_f3bpf_67",sre="_listItemContainer_f3bpf_101",ure="_listNumber_f3bpf_115",lre="_listText_f3bpf_137",cre="_circleRightCorner_f3bpf_149",fre="_circleLeftCorner_f3bpf_173",dre="_circleCenter_f3bpf_195",hre="_fadeIn_f3bpf_1",Uo={wrapper:tre,container:nre,qrCodeContainer:rre,qrCode:ire,listContainer:ore,list:are,listItemContainer:sre,listNumber:ure,listText:lre,circleRightCorner:cre,circleLeftCorner:fre,circleCenter:dre,fadeIn:hre},pre=({url:i})=>Rt.jsxs("div",{className:Uo.wrapper,children:[Rt.jsx("div",{className:Uo.circleRightCorner}),Rt.jsx("div",{className:Uo.circleLeftCorner}),Rt.jsx("div",{className:Uo.circleCenter}),Rt.jsxs("div",{className:Uo.container,children:[Rt.jsxs("div",{className:"".concat(Uo.listContainer," body-text"),children:[Rt.jsx("h1",{style:{lineHeight:"3rem"},children:"Connect your TV"}),Rt.jsxs("div",{className:Uo.list,children:[Rt.jsxs("span",{className:Uo.listItemContainer,children:[Rt.jsx("span",{className:Uo.listNumber,children:"1"}),Rt.jsxs("span",{className:Uo.listText,children:["Download the ",Rt.jsx("span",{className:"bold-text",children:"Imagien Parallel"})," ","app on your mobile or tablet."]})]}),Rt.jsxs("span",{className:Uo.listItemContainer,children:[Rt.jsx("span",{className:Uo.listNumber,children:"2"}),Rt.jsx("span",{className:Uo.listText,children:"Enter the ticket code from your confirmation email."})]}),Rt.jsxs("span",{className:Uo.listItemContainer,children:[Rt.jsx("span",{className:Uo.listNumber,children:"3"}),Rt.jsx("span",{className:Uo.listText,children:"Scan the QR code with the app."})]})]})]}),Rt.jsx("div",{className:Uo.qrCodeContainer,children:Rt.jsx("div",{className:Uo.qrCode,children:Rt.jsx(SR,{bgColor:"white",fgColor:"black",value:i!=null?i:"",size:512})})})]})]}),gre="_container_zht4e_1",mre="_fadeIn_zht4e_1",vre="_scrollWrapper_zht4e_15",yre="_scrollContainer_zht4e_29",MI={container:gre,fadeIn:mre,scrollWrapper:vre,scrollContainer:yre};function Ere(){const i=XC();return Rt.jsxs("div",{className:MI.container,children:[Rt.jsx("h1",{children:"Oh no! This event has been canceled."}),Rt.jsx("div",{className:MI.scrollWrapper,children:Rt.jsx("div",{className:MI.scrollContainer,children:i&&i.postScreen.offersCollection.items.map((o,l)=>Rt.jsx("img",{src:o.image.url},l))})})]})}const _re=()=>{const[i,o]=In.useState(0);return In.useEffect(()=>{const l=g=>{o(g.keyCode)},d=()=>{o(null)};return document.addEventListener("keydown",l),document.addEventListener("keyup",d),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",d)}},[]),i};var uh=(i=>(i.TIZEN="tizen",i.WEBOS="webos",i.WEBZEROS="web0s",i.WEB="web",i))(uh||{});function b8(){const i=navigator.userAgent.toLowerCase();return i.includes("tizen")?"tizen":i.includes("webos")||i.includes("web0s")?"webos":"web"}function Tre(){const i=b8();switch(console.log("platform",i),i){case uh.TIZEN:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:10009,KEY_MEDIA_STOP:413};case uh.WEBOS:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:461,KEY_MEDIA_STOP:413};case uh.WEB:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83};default:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83}}}const Sre=Tre(),wre="_popupWrapper_1n32r_1",Are="_popup_1n32r_1",Ire="_controls_1n32r_59",bre="_focused_1n32r_91",dg={popupWrapper:wre,popup:Are,controls:Ire,focused:bre};function Cre({close:i}){const o=()=>{switch(b8()){case uh.TIZEN:window.tizen.application.getCurrentApplication().exit();break;case uh.WEBOS:webOS.platformBack();break}};return Rt.jsx("div",{className:dg.popupWrapper,children:Rt.jsxs("div",{className:dg.popup,children:[Rt.jsx("h3",{children:"Would you like to exit app?"}),Rt.jsxs("div",{className:dg.controls,children:[Rt.jsx(ta,{onClick:i,selfFocus:!0,focusstile:dg.focused,children:"Back"}),Rt.jsx(ta,{onClick:o,focusstile:dg.focused,children:"Confirm"})]})]})})}const Rre={};function xre(){return Rt.jsx("div",{className:Rre.popup,children:"Network Error Popup"})}function kF(){const i=_re(),[o,l]=In.useState(),d=()=>{l(void 0)};switch(In.useEffect(()=>{console.log("keyPressed",i),i===Sre.KEY_BACK&&l("exit")},[i]),o){case"exit":return Rt.jsx(Cre,{close:d});case"network":return Rt.jsx(xre,{});default:return}}function Nre(){const i=mu();qY();const o=sm(),l=BY(),d=Sh(),g=JC(),[S,b]=In.useState(!1),[p,w]=In.useState(!1),[F,C]=In.useState(!1),[E,y]=In.useState(),[P,m]=In.useState(!1),[T,U]=In.useState(!1),[M,_]=In.useState(!1),[I,x]=In.useState(),[Z,Y]=In.useState(),[$,Q]=In.useState(),se="".concat(KC,":").concat(mh);In.useEffect(()=>{g&&x(g.find(ce=>ce.deviceId===mh)||g[0])},[g]),In.useEffect(()=>{Y(I==null?void 0:I.stateInfo.state)},[I]);const R=$&&$.code===404?Rt.jsx(Dte,{color:"#ff4646"}):Rt.jsx(d8,{stroke:"10",color:"#ff4646",styles:{width:"5rem",height:"5rem"}}),X=$&&$.code===404?"No Internet connection. Try scanning the code again.":"".concat($==null?void 0:$.name,". Try scanning the code again.");if(In.useEffect(()=>{if(!i)return;const ce=()=>{console.log(Q),i.adjustedEndTime&&i.adjustedEndTime<Date.now()?w(!0):i.adjustedStartTime&&(w(!1),y(i.adjustedStartTime-Date.now()))};return i.on("startTimeUpdated",ce),()=>{i.off("startTimeUpdated",ce)}},[i]),In.useEffect(()=>{if(!o)return;const ce=()=>{w(!0)};return o.on("eventEnded",ce),()=>{o.off("eventEnded",ce)}},[o]),In.useEffect(()=>{if(!d)return;const ce=()=>{C(!0)};return d.on("eventCanceled",ce),()=>{d.off("eventCanceled",ce)}},[d]),In.useEffect(()=>{if(!P)return;U(!0);const ce=setTimeout(()=>{m(!1)},1500);return()=>{clearTimeout(ce)}},[P]),In.useEffect(()=>{if(E)if(E>0){b(!1);const ce=setTimeout(()=>{b(!0)},E);return()=>{clearTimeout(ce)}}else b(!0)},[E]),In.useEffect(()=>{Z==="hostTv"?(_(!0),m(!0)):l===Ib.CONNECTED_STATE&&W0!=="new"&&m(!0)},[Z,l]),F)return Rt.jsx(Ere,{});if(p)return Rt.jsx(tte,{});{if(!M&&Z===void 0)return Rt.jsxs(Rt.Fragment,{children:[Rt.jsx(pre,{url:se}),$&&Rt.jsx(I8,{errorMessage:X,errorIcon:R}),Rt.jsx(kF,{})]});if(P&&!T)return Rt.jsx(wne,{})}return Rt.jsxs("div",{children:[Rt.jsx("div",{className:S?"":Ine.hidden,children:Rt.jsx(pne,{})}),!S&&Rt.jsx(ere,{timeToLive:E}),Rt.jsx(kF,{})]})}sB.init({debug:!1,shouldUseNativeEvents:!0});function Mre(){const i=localStorage.getItem("ticketCode"),[o,l]=In.useState(i!=null?i:"");return Rt.jsx("div",{className:zK.pageContainer,children:Rt.jsxs(kY,{baseUrl:jK,preferredProfile:"dash-drm",contentfulAccessToken:ZK,contentfulSpaceId:qK,newSetupToggle:W0==="new",ticketCodeProp:o,children:[W0!=="new",Rt.jsx(Nre,{})]})})}DI.createRoot(document.getElementById("root")).render(Rt.jsx(Mre,{}));export{Dre as __vite_legacy_guard};
