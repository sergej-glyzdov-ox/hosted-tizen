function fie(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))d(g);new MutationObserver(g=>{for(const S of g)if(S.type==="childList")for(const b of S.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&d(b)}).observe(document,{childList:!0,subtree:!0});function l(g){const S={};return g.integrity&&(S.integrity=g.integrity),g.referrerPolicy&&(S.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?S.credentials="include":g.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function d(g){if(g.ep)return;g.ep=!0;const S=l(g);fetch(g.href,S)}})();var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var zF={exports:{}},uE={},YF={exports:{}},Yr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em=Symbol.for("react.element"),U9=Symbol.for("react.portal"),B9=Symbol.for("react.fragment"),j9=Symbol.for("react.strict_mode"),Z9=Symbol.for("react.profiler"),q9=Symbol.for("react.provider"),G9=Symbol.for("react.context"),H9=Symbol.for("react.forward_ref"),V9=Symbol.for("react.suspense"),K9=Symbol.for("react.memo"),z9=Symbol.for("react.lazy"),IP=Symbol.iterator;function Y9(i){return i===null||typeof i!="object"?null:(i=IP&&i[IP]||i["@@iterator"],typeof i=="function"?i:null)}var WF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$F=Object.assign,XF={};function Eh(i,o,l){this.props=i,this.context=o,this.refs=XF,this.updater=l||WF}Eh.prototype.isReactComponent={};Eh.prototype.setState=function(i,o){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,o,"setState")};Eh.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function QF(){}QF.prototype=Eh.prototype;function zb(i,o,l){this.props=i,this.context=o,this.refs=XF,this.updater=l||WF}var Yb=zb.prototype=new QF;Yb.constructor=zb;$F(Yb,Eh.prototype);Yb.isPureReactComponent=!0;var bP=Array.isArray,JF=Object.prototype.hasOwnProperty,Wb={current:null},e4={key:!0,ref:!0,__self:!0,__source:!0};function t4(i,o,l){var d,g={},S=null,b=null;if(o!=null)for(d in o.ref!==void 0&&(b=o.ref),o.key!==void 0&&(S=""+o.key),o)JF.call(o,d)&&!e4.hasOwnProperty(d)&&(g[d]=o[d]);var p=arguments.length-2;if(p===1)g.children=l;else if(1<p){for(var w=Array(p),k=0;k<p;k++)w[k]=arguments[k+2];g.children=w}if(i&&i.defaultProps)for(d in p=i.defaultProps,p)g[d]===void 0&&(g[d]=p[d]);return{$$typeof:em,type:i,key:S,ref:b,props:g,_owner:Wb.current}}function W9(i,o){return{$$typeof:em,type:i.type,key:o,ref:i.ref,props:i.props,_owner:i._owner}}function $b(i){return typeof i=="object"&&i!==null&&i.$$typeof===em}function $9(i){var o={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(l){return o[l]})}var CP=/\/+/g;function LT(i,o){return typeof i=="object"&&i!==null&&i.key!=null?$9(""+i.key):o.toString(36)}function m0(i,o,l,d,g){var S=typeof i;(S==="undefined"||S==="boolean")&&(i=null);var b=!1;if(i===null)b=!0;else switch(S){case"string":case"number":b=!0;break;case"object":switch(i.$$typeof){case em:case U9:b=!0}}if(b)return b=i,g=g(b),i=d===""?"."+LT(b,0):d,bP(g)?(l="",i!=null&&(l=i.replace(CP,"$&/")+"/"),m0(g,o,l,"",function(k){return k})):g!=null&&($b(g)&&(g=W9(g,l+(!g.key||b&&b.key===g.key?"":(""+g.key).replace(CP,"$&/")+"/")+i)),o.push(g)),1;if(b=0,d=d===""?".":d+":",bP(i))for(var p=0;p<i.length;p++){S=i[p];var w=d+LT(S,p);b+=m0(S,o,l,w,g)}else if(w=Y9(i),typeof w=="function")for(i=w.call(i),p=0;!(S=i.next()).done;)S=S.value,w=d+LT(S,p++),b+=m0(S,o,l,w,g);else if(S==="object")throw o=String(i),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return b}function Hy(i,o,l){if(i==null)return i;var d=[],g=0;return m0(i,d,"","",function(S){return o.call(l,S,g++)}),d}function X9(i){if(i._status===-1){var o=i._result;o=o(),o.then(function(l){(i._status===0||i._status===-1)&&(i._status=1,i._result=l)},function(l){(i._status===0||i._status===-1)&&(i._status=2,i._result=l)}),i._status===-1&&(i._status=0,i._result=o)}if(i._status===1)return i._result.default;throw i._result}var Ea={current:null},v0={transition:null},Q9={ReactCurrentDispatcher:Ea,ReactCurrentBatchConfig:v0,ReactCurrentOwner:Wb};function n4(){throw Error("act(...) is not supported in production builds of React.")}Yr.Children={map:Hy,forEach:function(i,o,l){Hy(i,function(){o.apply(this,arguments)},l)},count:function(i){var o=0;return Hy(i,function(){o++}),o},toArray:function(i){return Hy(i,function(o){return o})||[]},only:function(i){if(!$b(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};Yr.Component=Eh;Yr.Fragment=B9;Yr.Profiler=Z9;Yr.PureComponent=zb;Yr.StrictMode=j9;Yr.Suspense=V9;Yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q9;Yr.act=n4;Yr.cloneElement=function(i,o,l){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var d=$F({},i.props),g=i.key,S=i.ref,b=i._owner;if(o!=null){if(o.ref!==void 0&&(S=o.ref,b=Wb.current),o.key!==void 0&&(g=""+o.key),i.type&&i.type.defaultProps)var p=i.type.defaultProps;for(w in o)JF.call(o,w)&&!e4.hasOwnProperty(w)&&(d[w]=o[w]===void 0&&p!==void 0?p[w]:o[w])}var w=arguments.length-2;if(w===1)d.children=l;else if(1<w){p=Array(w);for(var k=0;k<w;k++)p[k]=arguments[k+2];d.children=p}return{$$typeof:em,type:i.type,key:g,ref:S,props:d,_owner:b}};Yr.createContext=function(i){return i={$$typeof:G9,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:q9,_context:i},i.Consumer=i};Yr.createElement=t4;Yr.createFactory=function(i){var o=t4.bind(null,i);return o.type=i,o};Yr.createRef=function(){return{current:null}};Yr.forwardRef=function(i){return{$$typeof:H9,render:i}};Yr.isValidElement=$b;Yr.lazy=function(i){return{$$typeof:z9,_payload:{_status:-1,_result:i},_init:X9}};Yr.memo=function(i,o){return{$$typeof:K9,type:i,compare:o===void 0?null:o}};Yr.startTransition=function(i){var o=v0.transition;v0.transition={};try{i()}finally{v0.transition=o}};Yr.unstable_act=n4;Yr.useCallback=function(i,o){return Ea.current.useCallback(i,o)};Yr.useContext=function(i){return Ea.current.useContext(i)};Yr.useDebugValue=function(){};Yr.useDeferredValue=function(i){return Ea.current.useDeferredValue(i)};Yr.useEffect=function(i,o){return Ea.current.useEffect(i,o)};Yr.useId=function(){return Ea.current.useId()};Yr.useImperativeHandle=function(i,o,l){return Ea.current.useImperativeHandle(i,o,l)};Yr.useInsertionEffect=function(i,o){return Ea.current.useInsertionEffect(i,o)};Yr.useLayoutEffect=function(i,o){return Ea.current.useLayoutEffect(i,o)};Yr.useMemo=function(i,o){return Ea.current.useMemo(i,o)};Yr.useReducer=function(i,o,l){return Ea.current.useReducer(i,o,l)};Yr.useRef=function(i){return Ea.current.useRef(i)};Yr.useState=function(i){return Ea.current.useState(i)};Yr.useSyncExternalStore=function(i,o,l){return Ea.current.useSyncExternalStore(i,o,l)};Yr.useTransition=function(){return Ea.current.useTransition()};Yr.version="18.3.1";YF.exports=Yr;var In=YF.exports;const du=Kb(In);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J9=In,eH=Symbol.for("react.element"),tH=Symbol.for("react.fragment"),nH=Object.prototype.hasOwnProperty,rH=J9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iH={key:!0,ref:!0,__self:!0,__source:!0};function r4(i,o,l){var d,g={},S=null,b=null;l!==void 0&&(S=""+l),o.key!==void 0&&(S=""+o.key),o.ref!==void 0&&(b=o.ref);for(d in o)nH.call(o,d)&&!iH.hasOwnProperty(d)&&(g[d]=o[d]);if(i&&i.defaultProps)for(d in o=i.defaultProps,o)g[d]===void 0&&(g[d]=o[d]);return{$$typeof:eH,type:i,key:S,ref:b,props:g,_owner:rH.current}}uE.Fragment=tH;uE.jsx=r4;uE.jsxs=r4;zF.exports=uE;var Rt=zF.exports,FI={},i4={exports:{}},gs={},o4={exports:{}},a4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function o(Ge,at){var ft=Ge.length;Ge.push(at);e:for(;0<ft;){var We=ft-1>>>1,ut=Ge[We];if(0<g(ut,at))Ge[We]=at,Ge[ft]=ut,ft=We;else break e}}function l(Ge){return Ge.length===0?null:Ge[0]}function d(Ge){if(Ge.length===0)return null;var at=Ge[0],ft=Ge.pop();if(ft!==at){Ge[0]=ft;e:for(var We=0,ut=Ge.length,At=ut>>>1;We<At;){var Ne=2*(We+1)-1,et=Ge[Ne],dt=Ne+1,rn=Ge[dt];if(0>g(et,ft))dt<ut&&0>g(rn,et)?(Ge[We]=rn,Ge[dt]=ft,We=dt):(Ge[We]=et,Ge[Ne]=ft,We=Ne);else if(dt<ut&&0>g(rn,ft))Ge[We]=rn,Ge[dt]=ft,We=dt;else break e}}return at}function g(Ge,at){var ft=Ge.sortIndex-at.sortIndex;return ft!==0?ft:Ge.id-at.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;i.unstable_now=function(){return S.now()}}else{var b=Date,p=b.now();i.unstable_now=function(){return b.now()-p}}var w=[],k=[],C=1,E=null,y=3,P=!1,m=!1,T=!1,U=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Ge){for(var at=l(k);at!==null;){if(at.callback===null)d(k);else if(at.startTime<=Ge)d(k),at.sortIndex=at.expirationTime,o(w,at);else break;at=l(k)}}function x(Ge){if(T=!1,I(Ge),!m)if(l(w)!==null)m=!0,Xe(Z);else{var at=l(k);at!==null&&Ie(x,at.startTime-Ge)}}function Z(Ge,at){m=!1,T&&(T=!1,M(Q),Q=-1),P=!0;var ft=y;try{for(I(at),E=l(w);E!==null&&(!(E.expirationTime>at)||Ge&&!X());){var We=E.callback;if(typeof We=="function"){E.callback=null,y=E.priorityLevel;var ut=We(E.expirationTime<=at);at=i.unstable_now(),typeof ut=="function"?E.callback=ut:E===l(w)&&d(w),I(at)}else d(w);E=l(w)}if(E!==null)var At=!0;else{var Ne=l(k);Ne!==null&&Ie(x,Ne.startTime-at),At=!1}return At}finally{E=null,y=ft,P=!1}}var Y=!1,$=null,Q=-1,se=5,R=-1;function X(){return!(i.unstable_now()-R<se)}function ce(){if($!==null){var Ge=i.unstable_now();R=Ge;var at=!0;try{at=$(!0,Ge)}finally{at?oe():(Y=!1,$=null)}}else Y=!1}var oe;if(typeof _=="function")oe=function(){_(ce)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,be=ye.port2;ye.port1.onmessage=ce,oe=function(){be.postMessage(null)}}else oe=function(){U(ce,0)};function Xe(Ge){$=Ge,Y||(Y=!0,oe())}function Ie(Ge,at){Q=U(function(){Ge(i.unstable_now())},at)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Ge){Ge.callback=null},i.unstable_continueExecution=function(){m||P||(m=!0,Xe(Z))},i.unstable_forceFrameRate=function(Ge){0>Ge||125<Ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<Ge?Math.floor(1e3/Ge):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return l(w)},i.unstable_next=function(Ge){switch(y){case 1:case 2:case 3:var at=3;break;default:at=y}var ft=y;y=at;try{return Ge()}finally{y=ft}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Ge,at){switch(Ge){case 1:case 2:case 3:case 4:case 5:break;default:Ge=3}var ft=y;y=Ge;try{return at()}finally{y=ft}},i.unstable_scheduleCallback=function(Ge,at,ft){var We=i.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?We+ft:We):ft=We,Ge){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=ft+ut,Ge={id:C++,callback:at,priorityLevel:Ge,startTime:ft,expirationTime:ut,sortIndex:-1},ft>We?(Ge.sortIndex=ft,o(k,Ge),l(w)===null&&Ge===l(k)&&(T?(M(Q),Q=-1):T=!0,Ie(x,ft-We))):(Ge.sortIndex=ut,o(w,Ge),m||P||(m=!0,Xe(Z))),Ge},i.unstable_shouldYield=X,i.unstable_wrapCallback=function(Ge){var at=y;return function(){var ft=y;y=at;try{return Ge.apply(this,arguments)}finally{y=ft}}}})(a4);o4.exports=a4;var oH=o4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aH=In,ps=oH;function Hn(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s4=new Set,Dg={};function lf(i,o){ch(i,o),ch(i+"Capture",o)}function ch(i,o){for(Dg[i]=o,i=0;i<o.length;i++)s4.add(o[i])}var wl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),UI=Object.prototype.hasOwnProperty,sH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RP={},xP={};function uH(i){return UI.call(xP,i)?!0:UI.call(RP,i)?!1:sH.test(i)?xP[i]=!0:(RP[i]=!0,!1)}function lH(i,o,l,d){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function cH(i,o,l,d){if(o===null||typeof o>"u"||lH(i,o,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function _a(i,o,l,d,g,S,b){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=S,this.removeEmptyString=b}var zo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){zo[i]=new _a(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];zo[o]=new _a(o,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){zo[i]=new _a(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){zo[i]=new _a(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){zo[i]=new _a(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){zo[i]=new _a(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){zo[i]=new _a(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){zo[i]=new _a(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){zo[i]=new _a(i,5,!1,i.toLowerCase(),null,!1,!1)});var Xb=/[\-:]([a-z])/g;function Qb(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(Xb,Qb);zo[o]=new _a(o,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(Xb,Qb);zo[o]=new _a(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(Xb,Qb);zo[o]=new _a(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){zo[i]=new _a(i,1,!1,i.toLowerCase(),null,!1,!1)});zo.xlinkHref=new _a("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){zo[i]=new _a(i,1,!1,i.toLowerCase(),null,!0,!0)});function Jb(i,o,l,d){var g=zo.hasOwnProperty(o)?zo[o]:null;(g!==null?g.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(cH(o,l,g,d)&&(l=null),d||g===null?uH(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):g.mustUseProperty?i[g.propertyName]=l===null?g.type===3?!1:"":l:(o=g.attributeName,d=g.attributeNamespace,l===null?i.removeAttribute(o):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,d?i.setAttributeNS(d,o,l):i.setAttribute(o,l))))}var Cl=aH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vy=Symbol.for("react.element"),qd=Symbol.for("react.portal"),Gd=Symbol.for("react.fragment"),eC=Symbol.for("react.strict_mode"),BI=Symbol.for("react.profiler"),u4=Symbol.for("react.provider"),l4=Symbol.for("react.context"),tC=Symbol.for("react.forward_ref"),jI=Symbol.for("react.suspense"),ZI=Symbol.for("react.suspense_list"),nC=Symbol.for("react.memo"),Ql=Symbol.for("react.lazy"),c4=Symbol.for("react.offscreen"),NP=Symbol.iterator;function ng(i){return i===null||typeof i!="object"?null:(i=NP&&i[NP]||i["@@iterator"],typeof i=="function"?i:null)}var to=Object.assign,kT;function gg(i){if(kT===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);kT=o&&o[1]||""}return"\n"+kT+i}var FT=!1;function UT(i,o){if(!i||FT)return"";FT=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(k){var d=k}Reflect.construct(i,[],o)}else{try{o.call()}catch(k){d=k}i.call(o.prototype)}else{try{throw Error()}catch(k){d=k}i()}}catch(k){if(k&&d&&typeof k.stack=="string"){for(var g=k.stack.split("\n"),S=d.stack.split("\n"),b=g.length-1,p=S.length-1;1<=b&&0<=p&&g[b]!==S[p];)p--;for(;1<=b&&0<=p;b--,p--)if(g[b]!==S[p]){if(b!==1||p!==1)do if(b--,p--,0>p||g[b]!==S[p]){var w="\n"+g[b].replace(" at new "," at ");return i.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",i.displayName)),w}while(1<=b&&0<=p);break}}}finally{FT=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?gg(i):""}function fH(i){switch(i.tag){case 5:return gg(i.type);case 16:return gg("Lazy");case 13:return gg("Suspense");case 19:return gg("SuspenseList");case 0:case 2:case 15:return i=UT(i.type,!1),i;case 11:return i=UT(i.type.render,!1),i;case 1:return i=UT(i.type,!0),i;default:return""}}function qI(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Gd:return"Fragment";case qd:return"Portal";case BI:return"Profiler";case eC:return"StrictMode";case jI:return"Suspense";case ZI:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case l4:return(i.displayName||"Context")+".Consumer";case u4:return(i._context.displayName||"Context")+".Provider";case tC:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case nC:return o=i.displayName||null,o!==null?o:qI(i.type)||"Memo";case Ql:o=i._payload,i=i._init;try{return qI(i(o))}catch(l){}}return null}function dH(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qI(o);case 8:return o===eC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function dc(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function f4(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function hH(i){var o=f4(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,S=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(b){d=""+b,S.call(this,b)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(b){d=""+b},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ky(i){i._valueTracker||(i._valueTracker=hH(i))}function d4(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return i&&(d=f4(i)?i.checked?"true":"false":i.value),i=d,i!==l?(o.setValue(i),!0):!1}function M0(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch(o){return i.body}}function GI(i,o){var l=o.checked;return to({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l!=null?l:i._wrapperState.initialChecked})}function MP(i,o){var l=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;l=dc(o.value!=null?o.value:l),i._wrapperState={initialChecked:d,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function h4(i,o){o=o.checked,o!=null&&Jb(i,"checked",o,!1)}function HI(i,o){h4(i,o);var l=dc(o.value),d=o.type;if(l!=null)d==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?VI(i,o.type,l):o.hasOwnProperty("defaultValue")&&VI(i,o.type,dc(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function DP(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function VI(i,o,l){(o!=="number"||M0(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var mg=Array.isArray;function rh(i,o,l,d){if(i=i.options,o){o={};for(var g=0;g<l.length;g++)o["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=o.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&d&&(i[l].defaultSelected=!0)}else{for(l=""+dc(l),o=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function KI(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(Hn(91));return to({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function PP(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(Hn(92));if(mg(l)){if(1<l.length)throw Error(Hn(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:dc(l)}}function p4(i,o){var l=dc(o.value),d=dc(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),d!=null&&(i.defaultValue=""+d)}function OP(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function g4(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zI(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?g4(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var zy,m4=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,d,g){MSApp.execUnsafeLocalFunction(function(){return i(o,l,d,g)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(zy=zy||document.createElement("div"),zy.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=zy.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Pg(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Sg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pH=["Webkit","ms","Moz","O"];Object.keys(Sg).forEach(function(i){pH.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Sg[o]=Sg[i]})});function v4(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Sg.hasOwnProperty(i)&&Sg[i]?(""+o).trim():o+"px"}function y4(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var d=l.indexOf("--")===0,g=v4(l,o[l],d);l==="float"&&(l="cssFloat"),d?i.setProperty(l,g):i[l]=g}}var gH=to({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function YI(i,o){if(o){if(gH[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(Hn(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(Hn(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(Hn(61))}if(o.style!=null&&typeof o.style!="object")throw Error(Hn(62))}}function WI(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $I=null;function rC(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var XI=null,ih=null,oh=null;function LP(i){if(i=rm(i)){if(typeof XI!="function")throw Error(Hn(280));var o=i.stateNode;o&&(o=hE(o),XI(i.stateNode,i.type,o))}}function E4(i){ih?oh?oh.push(i):oh=[i]:ih=i}function _4(){if(ih){var i=ih,o=oh;if(oh=ih=null,LP(i),o)for(i=0;i<o.length;i++)LP(o[i])}}function T4(i,o){return i(o)}function S4(){}var BT=!1;function w4(i,o,l){if(BT)return i(o,l);BT=!0;try{return T4(i,o,l)}finally{BT=!1,(ih!==null||oh!==null)&&(S4(),_4())}}function Og(i,o){var l=i.stateNode;if(l===null)return null;var d=hE(l);if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(Hn(231,o,typeof l));return l}var QI=!1;if(wl)try{var rg={};Object.defineProperty(rg,"passive",{get:function(){QI=!0}}),window.addEventListener("test",rg,rg),window.removeEventListener("test",rg,rg)}catch(i){QI=!1}function mH(i,o,l,d,g,S,b,p,w){var k=Array.prototype.slice.call(arguments,3);try{o.apply(l,k)}catch(C){this.onError(C)}}var wg=!1,D0=null,P0=!1,JI=null,vH={onError:function(i){wg=!0,D0=i}};function yH(i,o,l,d,g,S,b,p,w){wg=!1,D0=null,mH.apply(vH,arguments)}function EH(i,o,l,d,g,S,b,p,w){if(yH.apply(this,arguments),wg){if(wg){var k=D0;wg=!1,D0=null}else throw Error(Hn(198));P0||(P0=!0,JI=k)}}function cf(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function A4(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function kP(i){if(cf(i)!==i)throw Error(Hn(188))}function _H(i){var o=i.alternate;if(!o){if(o=cf(i),o===null)throw Error(Hn(188));return o!==i?null:i}for(var l=i,d=o;;){var g=l.return;if(g===null)break;var S=g.alternate;if(S===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===S.child){for(S=g.child;S;){if(S===l)return kP(g),i;if(S===d)return kP(g),o;S=S.sibling}throw Error(Hn(188))}if(l.return!==d.return)l=g,d=S;else{for(var b=!1,p=g.child;p;){if(p===l){b=!0,l=g,d=S;break}if(p===d){b=!0,d=g,l=S;break}p=p.sibling}if(!b){for(p=S.child;p;){if(p===l){b=!0,l=S,d=g;break}if(p===d){b=!0,d=S,l=g;break}p=p.sibling}if(!b)throw Error(Hn(189))}}if(l.alternate!==d)throw Error(Hn(190))}if(l.tag!==3)throw Error(Hn(188));return l.stateNode.current===l?i:o}function I4(i){return i=_H(i),i!==null?b4(i):null}function b4(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=b4(i);if(o!==null)return o;i=i.sibling}return null}var C4=ps.unstable_scheduleCallback,FP=ps.unstable_cancelCallback,TH=ps.unstable_shouldYield,SH=ps.unstable_requestPaint,vo=ps.unstable_now,wH=ps.unstable_getCurrentPriorityLevel,iC=ps.unstable_ImmediatePriority,R4=ps.unstable_UserBlockingPriority,O0=ps.unstable_NormalPriority,AH=ps.unstable_LowPriority,x4=ps.unstable_IdlePriority,lE=null,Uu=null;function IH(i){if(Uu&&typeof Uu.onCommitFiberRoot=="function")try{Uu.onCommitFiberRoot(lE,i,void 0,(i.current.flags&128)===128)}catch(o){}}var pu=Math.clz32?Math.clz32:RH,bH=Math.log,CH=Math.LN2;function RH(i){return i>>>=0,i===0?32:31-(bH(i)/CH|0)|0}var Yy=64,Wy=4194304;function vg(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function L0(i,o){var l=i.pendingLanes;if(l===0)return 0;var d=0,g=i.suspendedLanes,S=i.pingedLanes,b=l&268435455;if(b!==0){var p=b&~g;p!==0?d=vg(p):(S&=b,S!==0&&(d=vg(S)))}else b=l&~g,b!==0?d=vg(b):S!==0&&(d=vg(S));if(d===0)return 0;if(o!==0&&o!==d&&!(o&g)&&(g=d&-d,S=o&-o,g>=S||g===16&&(S&4194240)!==0))return o;if(d&4&&(d|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)l=31-pu(o),g=1<<l,d|=i[l],o&=~g;return d}function xH(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NH(i,o){for(var l=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,S=i.pendingLanes;0<S;){var b=31-pu(S),p=1<<b,w=g[b];w===-1?(!(p&l)||p&d)&&(g[b]=xH(p,o)):w<=o&&(i.expiredLanes|=p),S&=~p}}function eb(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function N4(){var i=Yy;return Yy<<=1,!(Yy&4194240)&&(Yy=64),i}function jT(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function tm(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-pu(o),i[o]=l}function MH(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<l;){var g=31-pu(l),S=1<<g;o[g]=0,d[g]=-1,i[g]=-1,l&=~S}}function oC(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var d=31-pu(l),g=1<<d;g&o|i[d]&o&&(i[d]|=o),l&=~g}}var wi=0;function M4(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var D4,aC,P4,O4,L4,tb=!1,$y=[],ic=null,oc=null,ac=null,Lg=new Map,kg=new Map,ec=[],DH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function UP(i,o){switch(i){case"focusin":case"focusout":ic=null;break;case"dragenter":case"dragleave":oc=null;break;case"mouseover":case"mouseout":ac=null;break;case"pointerover":case"pointerout":Lg.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":kg.delete(o.pointerId)}}function ig(i,o,l,d,g,S){return i===null||i.nativeEvent!==S?(i={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:S,targetContainers:[g]},o!==null&&(o=rm(o),o!==null&&aC(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function PH(i,o,l,d,g){switch(o){case"focusin":return ic=ig(ic,i,o,l,d,g),!0;case"dragenter":return oc=ig(oc,i,o,l,d,g),!0;case"mouseover":return ac=ig(ac,i,o,l,d,g),!0;case"pointerover":var S=g.pointerId;return Lg.set(S,ig(Lg.get(S)||null,i,o,l,d,g)),!0;case"gotpointercapture":return S=g.pointerId,kg.set(S,ig(kg.get(S)||null,i,o,l,d,g)),!0}return!1}function k4(i){var o=zc(i.target);if(o!==null){var l=cf(o);if(l!==null){if(o=l.tag,o===13){if(o=A4(l),o!==null){i.blockedOn=o,L4(i.priority,function(){P4(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function y0(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=nb(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);$I=d,l.target.dispatchEvent(d),$I=null}else return o=rm(l),o!==null&&aC(o),i.blockedOn=l,!1;o.shift()}return!0}function BP(i,o,l){y0(i)&&l.delete(o)}function OH(){tb=!1,ic!==null&&y0(ic)&&(ic=null),oc!==null&&y0(oc)&&(oc=null),ac!==null&&y0(ac)&&(ac=null),Lg.forEach(BP),kg.forEach(BP)}function og(i,o){i.blockedOn===o&&(i.blockedOn=null,tb||(tb=!0,ps.unstable_scheduleCallback(ps.unstable_NormalPriority,OH)))}function Fg(i){function o(g){return og(g,i)}if(0<$y.length){og($y[0],i);for(var l=1;l<$y.length;l++){var d=$y[l];d.blockedOn===i&&(d.blockedOn=null)}}for(ic!==null&&og(ic,i),oc!==null&&og(oc,i),ac!==null&&og(ac,i),Lg.forEach(o),kg.forEach(o),l=0;l<ec.length;l++)d=ec[l],d.blockedOn===i&&(d.blockedOn=null);for(;0<ec.length&&(l=ec[0],l.blockedOn===null);)k4(l),l.blockedOn===null&&ec.shift()}var ah=Cl.ReactCurrentBatchConfig,k0=!0;function LH(i,o,l,d){var g=wi,S=ah.transition;ah.transition=null;try{wi=1,sC(i,o,l,d)}finally{wi=g,ah.transition=S}}function kH(i,o,l,d){var g=wi,S=ah.transition;ah.transition=null;try{wi=4,sC(i,o,l,d)}finally{wi=g,ah.transition=S}}function sC(i,o,l,d){if(k0){var g=nb(i,o,l,d);if(g===null)$T(i,o,d,F0,l),UP(i,d);else if(PH(g,i,o,l,d))d.stopPropagation();else if(UP(i,d),o&4&&-1<DH.indexOf(i)){for(;g!==null;){var S=rm(g);if(S!==null&&D4(S),S=nb(i,o,l,d),S===null&&$T(i,o,d,F0,l),S===g)break;g=S}g!==null&&d.stopPropagation()}else $T(i,o,d,null,l)}}var F0=null;function nb(i,o,l,d){if(F0=null,i=rC(d),i=zc(i),i!==null)if(o=cf(i),o===null)i=null;else if(l=o.tag,l===13){if(i=A4(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return F0=i,null}function F4(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wH()){case iC:return 1;case R4:return 4;case O0:case AH:return 16;case x4:return 536870912;default:return 16}default:return 16}}var nc=null,uC=null,E0=null;function U4(){if(E0)return E0;var i,o=uC,l=o.length,d,g="value"in nc?nc.value:nc.textContent,S=g.length;for(i=0;i<l&&o[i]===g[i];i++);var b=l-i;for(d=1;d<=b&&o[l-d]===g[S-d];d++);return E0=g.slice(i,1<d?1-d:void 0)}function _0(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Xy(){return!0}function jP(){return!1}function ms(i){function o(l,d,g,S,b){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=S,this.target=b,this.currentTarget=null;for(var p in i)i.hasOwnProperty(p)&&(l=i[p],this[p]=l?l(S):S[p]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Xy:jP,this.isPropagationStopped=jP,this}return to(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Xy)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Xy)},persist:function(){},isPersistent:Xy}),o}var _h={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lC=ms(_h),nm=to({},_h,{view:0,detail:0}),FH=ms(nm),ZT,qT,ag,cE=to({},nm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cC,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ag&&(ag&&i.type==="mousemove"?(ZT=i.screenX-ag.screenX,qT=i.screenY-ag.screenY):qT=ZT=0,ag=i),ZT)},movementY:function(i){return"movementY"in i?i.movementY:qT}}),ZP=ms(cE),UH=to({},cE,{dataTransfer:0}),BH=ms(UH),jH=to({},nm,{relatedTarget:0}),GT=ms(jH),ZH=to({},_h,{animationName:0,elapsedTime:0,pseudoElement:0}),qH=ms(ZH),GH=to({},_h,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),HH=ms(GH),VH=to({},_h,{data:0}),qP=ms(VH),KH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WH(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=YH[i])?!!o[i]:!1}function cC(){return WH}var $H=to({},nm,{key:function(i){if(i.key){var o=KH[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=_0(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?zH[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cC,charCode:function(i){return i.type==="keypress"?_0(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?_0(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),XH=ms($H),QH=to({},cE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GP=ms(QH),JH=to({},nm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cC}),e7=ms(JH),t7=to({},_h,{propertyName:0,elapsedTime:0,pseudoElement:0}),n7=ms(t7),r7=to({},cE,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),i7=ms(r7),o7=[9,13,27,32],fC=wl&&"CompositionEvent"in window,Ag=null;wl&&"documentMode"in document&&(Ag=document.documentMode);var a7=wl&&"TextEvent"in window&&!Ag,B4=wl&&(!fC||Ag&&8<Ag&&11>=Ag),HP=" ",VP=!1;function j4(i,o){switch(i){case"keyup":return o7.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z4(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Hd=!1;function s7(i,o){switch(i){case"compositionend":return Z4(o);case"keypress":return o.which!==32?null:(VP=!0,HP);case"textInput":return i=o.data,i===HP&&VP?null:i;default:return null}}function u7(i,o){if(Hd)return i==="compositionend"||!fC&&j4(i,o)?(i=U4(),E0=uC=nc=null,Hd=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return B4&&o.locale!=="ko"?null:o.data;default:return null}}var l7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KP(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!l7[i.type]:o==="textarea"}function q4(i,o,l,d){E4(d),o=U0(o,"onChange"),0<o.length&&(l=new lC("onChange","change",null,l,d),i.push({event:l,listeners:o}))}var Ig=null,Ug=null;function c7(i){J4(i,0)}function fE(i){var o=zd(i);if(d4(o))return i}function f7(i,o){if(i==="change")return o}var G4=!1;if(wl){var HT;if(wl){var VT="oninput"in document;if(!VT){var zP=document.createElement("div");zP.setAttribute("oninput","return;"),VT=typeof zP.oninput=="function"}HT=VT}else HT=!1;G4=HT&&(!document.documentMode||9<document.documentMode)}function YP(){Ig&&(Ig.detachEvent("onpropertychange",H4),Ug=Ig=null)}function H4(i){if(i.propertyName==="value"&&fE(Ug)){var o=[];q4(o,Ug,i,rC(i)),w4(c7,o)}}function d7(i,o,l){i==="focusin"?(YP(),Ig=o,Ug=l,Ig.attachEvent("onpropertychange",H4)):i==="focusout"&&YP()}function h7(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return fE(Ug)}function p7(i,o){if(i==="click")return fE(o)}function g7(i,o){if(i==="input"||i==="change")return fE(o)}function m7(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var mu=typeof Object.is=="function"?Object.is:m7;function Bg(i,o){if(mu(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!UI.call(o,g)||!mu(i[g],o[g]))return!1}return!0}function WP(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function $P(i,o){var l=WP(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=o&&d>=o)return{node:l,offset:o-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=WP(l)}}function V4(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?V4(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function K4(){for(var i=window,o=M0();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch(d){l=!1}if(l)i=o.contentWindow;else break;o=M0(i.document)}return o}function dC(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function v7(i){var o=K4(),l=i.focusedElem,d=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&V4(l.ownerDocument.documentElement,l)){if(d!==null&&dC(l)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=l.textContent.length,S=Math.min(d.start,g);d=d.end===void 0?S:Math.min(d.end,g),!i.extend&&S>d&&(g=d,d=S,S=g),g=$P(l,S);var b=$P(l,d);g&&b&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==b.node||i.focusOffset!==b.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),S>d?(i.addRange(o),i.extend(b.node,b.offset)):(o.setEnd(b.node,b.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var y7=wl&&"documentMode"in document&&11>=document.documentMode,Vd=null,rb=null,bg=null,ib=!1;function XP(i,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ib||Vd==null||Vd!==M0(d)||(d=Vd,"selectionStart"in d&&dC(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),bg&&Bg(bg,d)||(bg=d,d=U0(rb,"onSelect"),0<d.length&&(o=new lC("onSelect","select",null,o,l),i.push({event:o,listeners:d}),o.target=Vd)))}function Qy(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Kd={animationend:Qy("Animation","AnimationEnd"),animationiteration:Qy("Animation","AnimationIteration"),animationstart:Qy("Animation","AnimationStart"),transitionend:Qy("Transition","TransitionEnd")},KT={},z4={};wl&&(z4=document.createElement("div").style,"AnimationEvent"in window||(delete Kd.animationend.animation,delete Kd.animationiteration.animation,delete Kd.animationstart.animation),"TransitionEvent"in window||delete Kd.transitionend.transition);function dE(i){if(KT[i])return KT[i];if(!Kd[i])return i;var o=Kd[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in z4)return KT[i]=o[l];return i}var Y4=dE("animationend"),W4=dE("animationiteration"),$4=dE("animationstart"),X4=dE("transitionend"),Q4=new Map,QP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pc(i,o){Q4.set(i,o),lf(o,[i])}for(var zT=0;zT<QP.length;zT++){var YT=QP[zT],E7=YT.toLowerCase(),_7=YT[0].toUpperCase()+YT.slice(1);pc(E7,"on"+_7)}pc(Y4,"onAnimationEnd");pc(W4,"onAnimationIteration");pc($4,"onAnimationStart");pc("dblclick","onDoubleClick");pc("focusin","onFocus");pc("focusout","onBlur");pc(X4,"onTransitionEnd");ch("onMouseEnter",["mouseout","mouseover"]);ch("onMouseLeave",["mouseout","mouseover"]);ch("onPointerEnter",["pointerout","pointerover"]);ch("onPointerLeave",["pointerout","pointerover"]);lf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lf("onBeforeInput",["compositionend","keypress","textInput","paste"]);lf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T7=new Set("cancel close invalid load scroll toggle".split(" ").concat(yg));function JP(i,o,l){var d=i.type||"unknown-event";i.currentTarget=l,EH(d,o,void 0,i),i.currentTarget=null}function J4(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],g=d.event;d=d.listeners;e:{var S=void 0;if(o)for(var b=d.length-1;0<=b;b--){var p=d[b],w=p.instance,k=p.currentTarget;if(p=p.listener,w!==S&&g.isPropagationStopped())break e;JP(g,p,k),S=w}else for(b=0;b<d.length;b++){if(p=d[b],w=p.instance,k=p.currentTarget,p=p.listener,w!==S&&g.isPropagationStopped())break e;JP(g,p,k),S=w}}}if(P0)throw i=JI,P0=!1,JI=null,i}function Li(i,o){var l=o[lb];l===void 0&&(l=o[lb]=new Set);var d=i+"__bubble";l.has(d)||(eU(o,i,2,!1),l.add(d))}function WT(i,o,l){var d=0;o&&(d|=4),eU(l,i,d,o)}var Jy="_reactListening"+Math.random().toString(36).slice(2);function jg(i){if(!i[Jy]){i[Jy]=!0,s4.forEach(function(l){l!=="selectionchange"&&(T7.has(l)||WT(l,!1,i),WT(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Jy]||(o[Jy]=!0,WT("selectionchange",!1,o))}}function eU(i,o,l,d){switch(F4(o)){case 1:var g=LH;break;case 4:g=kH;break;default:g=sC}l=g.bind(null,o,l,i),g=void 0,!QI||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(o,l,{capture:!0,passive:g}):i.addEventListener(o,l,!0):g!==void 0?i.addEventListener(o,l,{passive:g}):i.addEventListener(o,l,!1)}function $T(i,o,l,d,g){var S=d;if(!(o&1)&&!(o&2)&&d!==null)e:for(;;){if(d===null)return;var b=d.tag;if(b===3||b===4){var p=d.stateNode.containerInfo;if(p===g||p.nodeType===8&&p.parentNode===g)break;if(b===4)for(b=d.return;b!==null;){var w=b.tag;if((w===3||w===4)&&(w=b.stateNode.containerInfo,w===g||w.nodeType===8&&w.parentNode===g))return;b=b.return}for(;p!==null;){if(b=zc(p),b===null)return;if(w=b.tag,w===5||w===6){d=S=b;continue e}p=p.parentNode}}d=d.return}w4(function(){var k=S,C=rC(l),E=[];e:{var y=Q4.get(i);if(y!==void 0){var P=lC,m=i;switch(i){case"keypress":if(_0(l)===0)break e;case"keydown":case"keyup":P=XH;break;case"focusin":m="focus",P=GT;break;case"focusout":m="blur",P=GT;break;case"beforeblur":case"afterblur":P=GT;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=ZP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=BH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=e7;break;case Y4:case W4:case $4:P=qH;break;case X4:P=n7;break;case"scroll":P=FH;break;case"wheel":P=i7;break;case"copy":case"cut":case"paste":P=HH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=GP}var T=(o&4)!==0,U=!T&&i==="scroll",M=T?y!==null?y+"Capture":null:y;T=[];for(var _=k,I;_!==null;){I=_;var x=I.stateNode;if(I.tag===5&&x!==null&&(I=x,M!==null&&(x=Og(_,M),x!=null&&T.push(Zg(_,x,I)))),U)break;_=_.return}0<T.length&&(y=new P(y,m,null,l,C),E.push({event:y,listeners:T}))}}if(!(o&7)){e:{if(y=i==="mouseover"||i==="pointerover",P=i==="mouseout"||i==="pointerout",y&&l!==$I&&(m=l.relatedTarget||l.fromElement)&&(zc(m)||m[Al]))break e;if((P||y)&&(y=C.window===C?C:(y=C.ownerDocument)?y.defaultView||y.parentWindow:window,P?(m=l.relatedTarget||l.toElement,P=k,m=m?zc(m):null,m!==null&&(U=cf(m),m!==U||m.tag!==5&&m.tag!==6)&&(m=null)):(P=null,m=k),P!==m)){if(T=ZP,x="onMouseLeave",M="onMouseEnter",_="mouse",(i==="pointerout"||i==="pointerover")&&(T=GP,x="onPointerLeave",M="onPointerEnter",_="pointer"),U=P==null?y:zd(P),I=m==null?y:zd(m),y=new T(x,_+"leave",P,l,C),y.target=U,y.relatedTarget=I,x=null,zc(C)===k&&(T=new T(M,_+"enter",m,l,C),T.target=I,T.relatedTarget=U,x=T),U=x,P&&m)t:{for(T=P,M=m,_=0,I=T;I;I=Fd(I))_++;for(I=0,x=M;x;x=Fd(x))I++;for(;0<_-I;)T=Fd(T),_--;for(;0<I-_;)M=Fd(M),I--;for(;_--;){if(T===M||M!==null&&T===M.alternate)break t;T=Fd(T),M=Fd(M)}T=null}else T=null;P!==null&&eO(E,y,P,T,!1),m!==null&&U!==null&&eO(E,U,m,T,!0)}}e:{if(y=k?zd(k):window,P=y.nodeName&&y.nodeName.toLowerCase(),P==="select"||P==="input"&&y.type==="file")var Z=f7;else if(KP(y))if(G4)Z=g7;else{Z=h7;var Y=d7}else(P=y.nodeName)&&P.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(Z=p7);if(Z&&(Z=Z(i,k))){q4(E,Z,l,C);break e}Y&&Y(i,y,k),i==="focusout"&&(Y=y._wrapperState)&&Y.controlled&&y.type==="number"&&VI(y,"number",y.value)}switch(Y=k?zd(k):window,i){case"focusin":(KP(Y)||Y.contentEditable==="true")&&(Vd=Y,rb=k,bg=null);break;case"focusout":bg=rb=Vd=null;break;case"mousedown":ib=!0;break;case"contextmenu":case"mouseup":case"dragend":ib=!1,XP(E,l,C);break;case"selectionchange":if(y7)break;case"keydown":case"keyup":XP(E,l,C)}var $;if(fC)e:{switch(i){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else Hd?j4(i,l)&&(Q="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Q="onCompositionStart");Q&&(B4&&l.locale!=="ko"&&(Hd||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&Hd&&($=U4()):(nc=C,uC="value"in nc?nc.value:nc.textContent,Hd=!0)),Y=U0(k,Q),0<Y.length&&(Q=new qP(Q,i,null,l,C),E.push({event:Q,listeners:Y}),$?Q.data=$:($=Z4(l),$!==null&&(Q.data=$)))),($=a7?s7(i,l):u7(i,l))&&(k=U0(k,"onBeforeInput"),0<k.length&&(C=new qP("onBeforeInput","beforeinput",null,l,C),E.push({event:C,listeners:k}),C.data=$))}J4(E,o)})}function Zg(i,o,l){return{instance:i,listener:o,currentTarget:l}}function U0(i,o){for(var l=o+"Capture",d=[];i!==null;){var g=i,S=g.stateNode;g.tag===5&&S!==null&&(g=S,S=Og(i,l),S!=null&&d.unshift(Zg(i,S,g)),S=Og(i,o),S!=null&&d.push(Zg(i,S,g))),i=i.return}return d}function Fd(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function eO(i,o,l,d,g){for(var S=o._reactName,b=[];l!==null&&l!==d;){var p=l,w=p.alternate,k=p.stateNode;if(w!==null&&w===d)break;p.tag===5&&k!==null&&(p=k,g?(w=Og(l,S),w!=null&&b.unshift(Zg(l,w,p))):g||(w=Og(l,S),w!=null&&b.push(Zg(l,w,p)))),l=l.return}b.length!==0&&i.push({event:o,listeners:b})}var S7=/\r\n?/g,w7=/\u0000|\uFFFD/g;function tO(i){return(typeof i=="string"?i:""+i).replace(S7,"\n").replace(w7,"")}function e0(i,o,l){if(o=tO(o),tO(i)!==o&&l)throw Error(Hn(425))}function B0(){}var ob=null,ab=null;function sb(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ub=typeof setTimeout=="function"?setTimeout:void 0,A7=typeof clearTimeout=="function"?clearTimeout:void 0,nO=typeof Promise=="function"?Promise:void 0,I7=typeof queueMicrotask=="function"?queueMicrotask:typeof nO<"u"?function(i){return nO.resolve(null).then(i).catch(b7)}:ub;function b7(i){setTimeout(function(){throw i})}function XT(i,o){var l=o,d=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(d===0){i.removeChild(g),Fg(o);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=g}while(l);Fg(o)}function sc(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function rO(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var Th=Math.random().toString(36).slice(2),Fu="__reactFiber$"+Th,qg="__reactProps$"+Th,Al="__reactContainer$"+Th,lb="__reactEvents$"+Th,C7="__reactListeners$"+Th,R7="__reactHandles$"+Th;function zc(i){var o=i[Fu];if(o)return o;for(var l=i.parentNode;l;){if(o=l[Al]||l[Fu]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=rO(i);i!==null;){if(l=i[Fu])return l;i=rO(i)}return o}i=l,l=i.parentNode}return null}function rm(i){return i=i[Fu]||i[Al],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function zd(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Hn(33))}function hE(i){return i[qg]||null}var cb=[],Yd=-1;function gc(i){return{current:i}}function ki(i){0>Yd||(i.current=cb[Yd],cb[Yd]=null,Yd--)}function Pi(i,o){Yd++,cb[Yd]=i.current,i.current=o}var hc={},ia=gc(hc),Za=gc(!1),tf=hc;function fh(i,o){var l=i.type.contextTypes;if(!l)return hc;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var g={},S;for(S in l)g[S]=o[S];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function qa(i){return i=i.childContextTypes,i!=null}function j0(){ki(Za),ki(ia)}function iO(i,o,l){if(ia.current!==hc)throw Error(Hn(168));Pi(ia,o),Pi(Za,l)}function tU(i,o,l){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var g in d)if(!(g in o))throw Error(Hn(108,dH(i)||"Unknown",g));return to({},l,d)}function Z0(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||hc,tf=ia.current,Pi(ia,i),Pi(Za,Za.current),!0}function oO(i,o,l){var d=i.stateNode;if(!d)throw Error(Hn(169));l?(i=tU(i,o,tf),d.__reactInternalMemoizedMergedChildContext=i,ki(Za),ki(ia),Pi(ia,i)):ki(Za),Pi(Za,l)}var El=null,pE=!1,QT=!1;function nU(i){El===null?El=[i]:El.push(i)}function x7(i){pE=!0,nU(i)}function mc(){if(!QT&&El!==null){QT=!0;var i=0,o=wi;try{var l=El;for(wi=1;i<l.length;i++){var d=l[i];do d=d(!0);while(d!==null)}El=null,pE=!1}catch(g){throw El!==null&&(El=El.slice(i+1)),C4(iC,mc),g}finally{wi=o,QT=!1}}return null}var Wd=[],$d=0,q0=null,G0=0,Os=[],Ls=0,nf=null,_l=1,Tl="";function Gc(i,o){Wd[$d++]=G0,Wd[$d++]=q0,q0=i,G0=o}function rU(i,o,l){Os[Ls++]=_l,Os[Ls++]=Tl,Os[Ls++]=nf,nf=i;var d=_l;i=Tl;var g=32-pu(d)-1;d&=~(1<<g),l+=1;var S=32-pu(o)+g;if(30<S){var b=g-g%5;S=(d&(1<<b)-1).toString(32),d>>=b,g-=b,_l=1<<32-pu(o)+g|l<<g|d,Tl=S+i}else _l=1<<S|l<<g|d,Tl=i}function hC(i){i.return!==null&&(Gc(i,1),rU(i,1,0))}function pC(i){for(;i===q0;)q0=Wd[--$d],Wd[$d]=null,G0=Wd[--$d],Wd[$d]=null;for(;i===nf;)nf=Os[--Ls],Os[Ls]=null,Tl=Os[--Ls],Os[Ls]=null,_l=Os[--Ls],Os[Ls]=null}var hs=null,fs=null,Gi=!1,lu=null;function iU(i,o){var l=Fs(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function aO(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,hs=i,fs=sc(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,hs=i,fs=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=nf!==null?{id:_l,overflow:Tl}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Fs(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,hs=i,fs=null,!0):!1;default:return!1}}function fb(i){return(i.mode&1)!==0&&(i.flags&128)===0}function db(i){if(Gi){var o=fs;if(o){var l=o;if(!aO(i,o)){if(fb(i))throw Error(Hn(418));o=sc(l.nextSibling);var d=hs;o&&aO(i,o)?iU(d,l):(i.flags=i.flags&-4097|2,Gi=!1,hs=i)}}else{if(fb(i))throw Error(Hn(418));i.flags=i.flags&-4097|2,Gi=!1,hs=i}}}function sO(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;hs=i}function t0(i){if(i!==hs)return!1;if(!Gi)return sO(i),Gi=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!sb(i.type,i.memoizedProps)),o&&(o=fs)){if(fb(i))throw oU(),Error(Hn(418));for(;o;)iU(i,o),o=sc(o.nextSibling)}if(sO(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Hn(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){fs=sc(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}fs=null}}else fs=hs?sc(i.stateNode.nextSibling):null;return!0}function oU(){for(var i=fs;i;)i=sc(i.nextSibling)}function dh(){fs=hs=null,Gi=!1}function gC(i){lu===null?lu=[i]:lu.push(i)}var N7=Cl.ReactCurrentBatchConfig;function sg(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(Hn(309));var d=l.stateNode}if(!d)throw Error(Hn(147,i));var g=d,S=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===S?o.ref:(o=function(b){var p=g.refs;b===null?delete p[S]:p[S]=b},o._stringRef=S,o)}if(typeof i!="string")throw Error(Hn(284));if(!l._owner)throw Error(Hn(290,i))}return i}function n0(i,o){throw i=Object.prototype.toString.call(o),Error(Hn(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function uO(i){var o=i._init;return o(i._payload)}function aU(i){function o(M,_){if(i){var I=M.deletions;I===null?(M.deletions=[_],M.flags|=16):I.push(_)}}function l(M,_){if(!i)return null;for(;_!==null;)o(M,_),_=_.sibling;return null}function d(M,_){for(M=new Map;_!==null;)_.key!==null?M.set(_.key,_):M.set(_.index,_),_=_.sibling;return M}function g(M,_){return M=fc(M,_),M.index=0,M.sibling=null,M}function S(M,_,I){return M.index=I,i?(I=M.alternate,I!==null?(I=I.index,I<_?(M.flags|=2,_):I):(M.flags|=2,_)):(M.flags|=1048576,_)}function b(M){return i&&M.alternate===null&&(M.flags|=2),M}function p(M,_,I,x){return _===null||_.tag!==6?(_=oS(I,M.mode,x),_.return=M,_):(_=g(_,I),_.return=M,_)}function w(M,_,I,x){var Z=I.type;return Z===Gd?C(M,_,I.props.children,x,I.key):_!==null&&(_.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Ql&&uO(Z)===_.type)?(x=g(_,I.props),x.ref=sg(M,_,I),x.return=M,x):(x=C0(I.type,I.key,I.props,null,M.mode,x),x.ref=sg(M,_,I),x.return=M,x)}function k(M,_,I,x){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=aS(I,M.mode,x),_.return=M,_):(_=g(_,I.children||[]),_.return=M,_)}function C(M,_,I,x,Z){return _===null||_.tag!==7?(_=Qc(I,M.mode,x,Z),_.return=M,_):(_=g(_,I),_.return=M,_)}function E(M,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=oS(""+_,M.mode,I),_.return=M,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Vy:return I=C0(_.type,_.key,_.props,null,M.mode,I),I.ref=sg(M,null,_),I.return=M,I;case qd:return _=aS(_,M.mode,I),_.return=M,_;case Ql:var x=_._init;return E(M,x(_._payload),I)}if(mg(_)||ng(_))return _=Qc(_,M.mode,I,null),_.return=M,_;n0(M,_)}return null}function y(M,_,I,x){var Z=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return Z!==null?null:p(M,_,""+I,x);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Vy:return I.key===Z?w(M,_,I,x):null;case qd:return I.key===Z?k(M,_,I,x):null;case Ql:return Z=I._init,y(M,_,Z(I._payload),x)}if(mg(I)||ng(I))return Z!==null?null:C(M,_,I,x,null);n0(M,I)}return null}function P(M,_,I,x,Z){if(typeof x=="string"&&x!==""||typeof x=="number")return M=M.get(I)||null,p(_,M,""+x,Z);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Vy:return M=M.get(x.key===null?I:x.key)||null,w(_,M,x,Z);case qd:return M=M.get(x.key===null?I:x.key)||null,k(_,M,x,Z);case Ql:var Y=x._init;return P(M,_,I,Y(x._payload),Z)}if(mg(x)||ng(x))return M=M.get(I)||null,C(_,M,x,Z,null);n0(_,x)}return null}function m(M,_,I,x){for(var Z=null,Y=null,$=_,Q=_=0,se=null;$!==null&&Q<I.length;Q++){$.index>Q?(se=$,$=null):se=$.sibling;var R=y(M,$,I[Q],x);if(R===null){$===null&&($=se);break}i&&$&&R.alternate===null&&o(M,$),_=S(R,_,Q),Y===null?Z=R:Y.sibling=R,Y=R,$=se}if(Q===I.length)return l(M,$),Gi&&Gc(M,Q),Z;if($===null){for(;Q<I.length;Q++)$=E(M,I[Q],x),$!==null&&(_=S($,_,Q),Y===null?Z=$:Y.sibling=$,Y=$);return Gi&&Gc(M,Q),Z}for($=d(M,$);Q<I.length;Q++)se=P($,M,Q,I[Q],x),se!==null&&(i&&se.alternate!==null&&$.delete(se.key===null?Q:se.key),_=S(se,_,Q),Y===null?Z=se:Y.sibling=se,Y=se);return i&&$.forEach(function(X){return o(M,X)}),Gi&&Gc(M,Q),Z}function T(M,_,I,x){var Z=ng(I);if(typeof Z!="function")throw Error(Hn(150));if(I=Z.call(I),I==null)throw Error(Hn(151));for(var Y=Z=null,$=_,Q=_=0,se=null,R=I.next();$!==null&&!R.done;Q++,R=I.next()){$.index>Q?(se=$,$=null):se=$.sibling;var X=y(M,$,R.value,x);if(X===null){$===null&&($=se);break}i&&$&&X.alternate===null&&o(M,$),_=S(X,_,Q),Y===null?Z=X:Y.sibling=X,Y=X,$=se}if(R.done)return l(M,$),Gi&&Gc(M,Q),Z;if($===null){for(;!R.done;Q++,R=I.next())R=E(M,R.value,x),R!==null&&(_=S(R,_,Q),Y===null?Z=R:Y.sibling=R,Y=R);return Gi&&Gc(M,Q),Z}for($=d(M,$);!R.done;Q++,R=I.next())R=P($,M,Q,R.value,x),R!==null&&(i&&R.alternate!==null&&$.delete(R.key===null?Q:R.key),_=S(R,_,Q),Y===null?Z=R:Y.sibling=R,Y=R);return i&&$.forEach(function(ce){return o(M,ce)}),Gi&&Gc(M,Q),Z}function U(M,_,I,x){if(typeof I=="object"&&I!==null&&I.type===Gd&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Vy:e:{for(var Z=I.key,Y=_;Y!==null;){if(Y.key===Z){if(Z=I.type,Z===Gd){if(Y.tag===7){l(M,Y.sibling),_=g(Y,I.props.children),_.return=M,M=_;break e}}else if(Y.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Ql&&uO(Z)===Y.type){l(M,Y.sibling),_=g(Y,I.props),_.ref=sg(M,Y,I),_.return=M,M=_;break e}l(M,Y);break}else o(M,Y);Y=Y.sibling}I.type===Gd?(_=Qc(I.props.children,M.mode,x,I.key),_.return=M,M=_):(x=C0(I.type,I.key,I.props,null,M.mode,x),x.ref=sg(M,_,I),x.return=M,M=x)}return b(M);case qd:e:{for(Y=I.key;_!==null;){if(_.key===Y)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){l(M,_.sibling),_=g(_,I.children||[]),_.return=M,M=_;break e}else{l(M,_);break}else o(M,_);_=_.sibling}_=aS(I,M.mode,x),_.return=M,M=_}return b(M);case Ql:return Y=I._init,U(M,_,Y(I._payload),x)}if(mg(I))return m(M,_,I,x);if(ng(I))return T(M,_,I,x);n0(M,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(l(M,_.sibling),_=g(_,I),_.return=M,M=_):(l(M,_),_=oS(I,M.mode,x),_.return=M,M=_),b(M)):l(M,_)}return U}var hh=aU(!0),sU=aU(!1),H0=gc(null),V0=null,Xd=null,mC=null;function vC(){mC=Xd=V0=null}function yC(i){var o=H0.current;ki(H0),i._currentValue=o}function hb(i,o,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===l)break;i=i.return}}function sh(i,o){V0=i,mC=Xd=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(ja=!0),i.firstContext=null)}function Bs(i){var o=i._currentValue;if(mC!==i)if(i={context:i,memoizedValue:o,next:null},Xd===null){if(V0===null)throw Error(Hn(308));Xd=i,V0.dependencies={lanes:0,firstContext:i}}else Xd=Xd.next=i;return o}var Yc=null;function EC(i){Yc===null?Yc=[i]:Yc.push(i)}function uU(i,o,l,d){var g=o.interleaved;return g===null?(l.next=l,EC(o)):(l.next=g.next,g.next=l),o.interleaved=l,Il(i,d)}function Il(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Jl=!1;function _C(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lU(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Sl(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function uc(i,o,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,ui&2){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,Il(i,l)}return g=d.interleaved,g===null?(o.next=o,EC(d)):(o.next=g.next,g.next=o),d.interleaved=o,Il(i,l)}function T0(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,oC(i,l)}}function lO(i,o){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var b={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};S===null?g=S=b:S=S.next=b,l=l.next}while(l!==null);S===null?g=S=o:S=S.next=o}else g=S=o;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:S,shared:d.shared,effects:d.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function K0(i,o,l,d){var g=i.updateQueue;Jl=!1;var S=g.firstBaseUpdate,b=g.lastBaseUpdate,p=g.shared.pending;if(p!==null){g.shared.pending=null;var w=p,k=w.next;w.next=null,b===null?S=k:b.next=k,b=w;var C=i.alternate;C!==null&&(C=C.updateQueue,p=C.lastBaseUpdate,p!==b&&(p===null?C.firstBaseUpdate=k:p.next=k,C.lastBaseUpdate=w))}if(S!==null){var E=g.baseState;b=0,C=k=w=null,p=S;do{var y=p.lane,P=p.eventTime;if((d&y)===y){C!==null&&(C=C.next={eventTime:P,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var m=i,T=p;switch(y=o,P=l,T.tag){case 1:if(m=T.payload,typeof m=="function"){E=m.call(P,E,y);break e}E=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=T.payload,y=typeof m=="function"?m.call(P,E,y):m,y==null)break e;E=to({},E,y);break e;case 2:Jl=!0}}p.callback!==null&&p.lane!==0&&(i.flags|=64,y=g.effects,y===null?g.effects=[p]:y.push(p))}else P={eventTime:P,lane:y,tag:p.tag,payload:p.payload,callback:p.callback,next:null},C===null?(k=C=P,w=E):C=C.next=P,b|=y;if(p=p.next,p===null){if(p=g.shared.pending,p===null)break;y=p,p=y.next,y.next=null,g.lastBaseUpdate=y,g.shared.pending=null}}while(!0);if(C===null&&(w=E),g.baseState=w,g.firstBaseUpdate=k,g.lastBaseUpdate=C,o=g.shared.interleaved,o!==null){g=o;do b|=g.lane,g=g.next;while(g!==o)}else S===null&&(g.shared.lanes=0);of|=b,i.lanes=b,i.memoizedState=E}}function cO(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],g=d.callback;if(g!==null){if(d.callback=null,d=l,typeof g!="function")throw Error(Hn(191,g));g.call(d)}}}var im={},Bu=gc(im),Gg=gc(im),Hg=gc(im);function Wc(i){if(i===im)throw Error(Hn(174));return i}function TC(i,o){switch(Pi(Hg,o),Pi(Gg,i),Pi(Bu,im),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:zI(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=zI(o,i)}ki(Bu),Pi(Bu,o)}function ph(){ki(Bu),ki(Gg),ki(Hg)}function cU(i){Wc(Hg.current);var o=Wc(Bu.current),l=zI(o,i.type);o!==l&&(Pi(Gg,i),Pi(Bu,l))}function SC(i){Gg.current===i&&(ki(Bu),ki(Gg))}var Qi=gc(0);function z0(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var JT=[];function wC(){for(var i=0;i<JT.length;i++)JT[i]._workInProgressVersionPrimary=null;JT.length=0}var S0=Cl.ReactCurrentDispatcher,eS=Cl.ReactCurrentBatchConfig,rf=0,eo=null,Mo=null,Bo=null,Y0=!1,Cg=!1,Vg=0,M7=0;function Jo(){throw Error(Hn(321))}function AC(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!mu(i[l],o[l]))return!1;return!0}function IC(i,o,l,d,g,S){if(rf=S,eo=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,S0.current=i===null||i.memoizedState===null?L7:k7,i=l(d,g),Cg){S=0;do{if(Cg=!1,Vg=0,25<=S)throw Error(Hn(301));S+=1,Bo=Mo=null,o.updateQueue=null,S0.current=F7,i=l(d,g)}while(Cg)}if(S0.current=W0,o=Mo!==null&&Mo.next!==null,rf=0,Bo=Mo=eo=null,Y0=!1,o)throw Error(Hn(300));return i}function bC(){var i=Vg!==0;return Vg=0,i}function ku(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bo===null?eo.memoizedState=Bo=i:Bo=Bo.next=i,Bo}function js(){if(Mo===null){var i=eo.alternate;i=i!==null?i.memoizedState:null}else i=Mo.next;var o=Bo===null?eo.memoizedState:Bo.next;if(o!==null)Bo=o,Mo=i;else{if(i===null)throw Error(Hn(310));Mo=i,i={memoizedState:Mo.memoizedState,baseState:Mo.baseState,baseQueue:Mo.baseQueue,queue:Mo.queue,next:null},Bo===null?eo.memoizedState=Bo=i:Bo=Bo.next=i}return Bo}function Kg(i,o){return typeof o=="function"?o(i):o}function tS(i){var o=js(),l=o.queue;if(l===null)throw Error(Hn(311));l.lastRenderedReducer=i;var d=Mo,g=d.baseQueue,S=l.pending;if(S!==null){if(g!==null){var b=g.next;g.next=S.next,S.next=b}d.baseQueue=g=S,l.pending=null}if(g!==null){S=g.next,d=d.baseState;var p=b=null,w=null,k=S;do{var C=k.lane;if((rf&C)===C)w!==null&&(w=w.next={lane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),d=k.hasEagerState?k.eagerState:i(d,k.action);else{var E={lane:C,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null};w===null?(p=w=E,b=d):w=w.next=E,eo.lanes|=C,of|=C}k=k.next}while(k!==null&&k!==S);w===null?b=d:w.next=p,mu(d,o.memoizedState)||(ja=!0),o.memoizedState=d,o.baseState=b,o.baseQueue=w,l.lastRenderedState=d}if(i=l.interleaved,i!==null){g=i;do S=g.lane,eo.lanes|=S,of|=S,g=g.next;while(g!==i)}else g===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function nS(i){var o=js(),l=o.queue;if(l===null)throw Error(Hn(311));l.lastRenderedReducer=i;var d=l.dispatch,g=l.pending,S=o.memoizedState;if(g!==null){l.pending=null;var b=g=g.next;do S=i(S,b.action),b=b.next;while(b!==g);mu(S,o.memoizedState)||(ja=!0),o.memoizedState=S,o.baseQueue===null&&(o.baseState=S),l.lastRenderedState=S}return[S,d]}function fU(){}function dU(i,o){var l=eo,d=js(),g=o(),S=!mu(d.memoizedState,g);if(S&&(d.memoizedState=g,ja=!0),d=d.queue,CC(gU.bind(null,l,d,i),[i]),d.getSnapshot!==o||S||Bo!==null&&Bo.memoizedState.tag&1){if(l.flags|=2048,zg(9,pU.bind(null,l,d,g,o),void 0,null),jo===null)throw Error(Hn(349));rf&30||hU(l,o,g)}return g}function hU(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=eo.updateQueue,o===null?(o={lastEffect:null,stores:null},eo.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function pU(i,o,l,d){o.value=l,o.getSnapshot=d,mU(o)&&vU(i)}function gU(i,o,l){return l(function(){mU(o)&&vU(i)})}function mU(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!mu(i,l)}catch(d){return!0}}function vU(i){var o=Il(i,1);o!==null&&gu(o,i,1,-1)}function fO(i){var o=ku();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kg,lastRenderedState:i},o.queue=i,i=i.dispatch=O7.bind(null,eo,i),[o.memoizedState,i]}function zg(i,o,l,d){return i={tag:i,create:o,destroy:l,deps:d,next:null},o=eo.updateQueue,o===null?(o={lastEffect:null,stores:null},eo.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,o.lastEffect=i)),i}function yU(){return js().memoizedState}function w0(i,o,l,d){var g=ku();eo.flags|=i,g.memoizedState=zg(1|o,l,void 0,d===void 0?null:d)}function gE(i,o,l,d){var g=js();d=d===void 0?null:d;var S=void 0;if(Mo!==null){var b=Mo.memoizedState;if(S=b.destroy,d!==null&&AC(d,b.deps)){g.memoizedState=zg(o,l,S,d);return}}eo.flags|=i,g.memoizedState=zg(1|o,l,S,d)}function dO(i,o){return w0(8390656,8,i,o)}function CC(i,o){return gE(2048,8,i,o)}function EU(i,o){return gE(4,2,i,o)}function _U(i,o){return gE(4,4,i,o)}function TU(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function SU(i,o,l){return l=l!=null?l.concat([i]):null,gE(4,4,TU.bind(null,o,i),l)}function RC(){}function wU(i,o){var l=js();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&AC(o,d[1])?d[0]:(l.memoizedState=[i,o],i)}function AU(i,o){var l=js();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&AC(o,d[1])?d[0]:(i=i(),l.memoizedState=[i,o],i)}function IU(i,o,l){return rf&21?(mu(l,o)||(l=N4(),eo.lanes|=l,of|=l,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,ja=!0),i.memoizedState=l)}function D7(i,o){var l=wi;wi=l!==0&&4>l?l:4,i(!0);var d=eS.transition;eS.transition={};try{i(!1),o()}finally{wi=l,eS.transition=d}}function bU(){return js().memoizedState}function P7(i,o,l){var d=cc(i);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},CU(i))RU(o,l);else if(l=uU(i,o,l,d),l!==null){var g=ya();gu(l,i,d,g),xU(l,o,d)}}function O7(i,o,l){var d=cc(i),g={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(CU(i))RU(o,g);else{var S=i.alternate;if(i.lanes===0&&(S===null||S.lanes===0)&&(S=o.lastRenderedReducer,S!==null))try{var b=o.lastRenderedState,p=S(b,l);if(g.hasEagerState=!0,g.eagerState=p,mu(p,b)){var w=o.interleaved;w===null?(g.next=g,EC(o)):(g.next=w.next,w.next=g),o.interleaved=g;return}}catch(k){}finally{}l=uU(i,o,g,d),l!==null&&(g=ya(),gu(l,i,d,g),xU(l,o,d))}}function CU(i){var o=i.alternate;return i===eo||o!==null&&o===eo}function RU(i,o){Cg=Y0=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function xU(i,o,l){if(l&4194240){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,oC(i,l)}}var W0={readContext:Bs,useCallback:Jo,useContext:Jo,useEffect:Jo,useImperativeHandle:Jo,useInsertionEffect:Jo,useLayoutEffect:Jo,useMemo:Jo,useReducer:Jo,useRef:Jo,useState:Jo,useDebugValue:Jo,useDeferredValue:Jo,useTransition:Jo,useMutableSource:Jo,useSyncExternalStore:Jo,useId:Jo,unstable_isNewReconciler:!1},L7={readContext:Bs,useCallback:function(i,o){return ku().memoizedState=[i,o===void 0?null:o],i},useContext:Bs,useEffect:dO,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,w0(4194308,4,TU.bind(null,o,i),l)},useLayoutEffect:function(i,o){return w0(4194308,4,i,o)},useInsertionEffect:function(i,o){return w0(4,2,i,o)},useMemo:function(i,o){var l=ku();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var d=ku();return o=l!==void 0?l(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=P7.bind(null,eo,i),[d.memoizedState,i]},useRef:function(i){var o=ku();return i={current:i},o.memoizedState=i},useState:fO,useDebugValue:RC,useDeferredValue:function(i){return ku().memoizedState=i},useTransition:function(){var i=fO(!1),o=i[0];return i=D7.bind(null,i[1]),ku().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var d=eo,g=ku();if(Gi){if(l===void 0)throw Error(Hn(407));l=l()}else{if(l=o(),jo===null)throw Error(Hn(349));rf&30||hU(d,o,l)}g.memoizedState=l;var S={value:l,getSnapshot:o};return g.queue=S,dO(gU.bind(null,d,S,i),[i]),d.flags|=2048,zg(9,pU.bind(null,d,S,l,o),void 0,null),l},useId:function(){var i=ku(),o=jo.identifierPrefix;if(Gi){var l=Tl,d=_l;l=(d&~(1<<32-pu(d)-1)).toString(32)+l,o=":"+o+"R"+l,l=Vg++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=M7++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},k7={readContext:Bs,useCallback:wU,useContext:Bs,useEffect:CC,useImperativeHandle:SU,useInsertionEffect:EU,useLayoutEffect:_U,useMemo:AU,useReducer:tS,useRef:yU,useState:function(){return tS(Kg)},useDebugValue:RC,useDeferredValue:function(i){var o=js();return IU(o,Mo.memoizedState,i)},useTransition:function(){var i=tS(Kg)[0],o=js().memoizedState;return[i,o]},useMutableSource:fU,useSyncExternalStore:dU,useId:bU,unstable_isNewReconciler:!1},F7={readContext:Bs,useCallback:wU,useContext:Bs,useEffect:CC,useImperativeHandle:SU,useInsertionEffect:EU,useLayoutEffect:_U,useMemo:AU,useReducer:nS,useRef:yU,useState:function(){return nS(Kg)},useDebugValue:RC,useDeferredValue:function(i){var o=js();return Mo===null?o.memoizedState=i:IU(o,Mo.memoizedState,i)},useTransition:function(){var i=nS(Kg)[0],o=js().memoizedState;return[i,o]},useMutableSource:fU,useSyncExternalStore:dU,useId:bU,unstable_isNewReconciler:!1};function su(i,o){if(i&&i.defaultProps){o=to({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function pb(i,o,l,d){o=i.memoizedState,l=l(d,o),l=l==null?o:to({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var mE={isMounted:function(i){return(i=i._reactInternals)?cf(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var d=ya(),g=cc(i),S=Sl(d,g);S.payload=o,l!=null&&(S.callback=l),o=uc(i,S,g),o!==null&&(gu(o,i,g,d),T0(o,i,g))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var d=ya(),g=cc(i),S=Sl(d,g);S.tag=1,S.payload=o,l!=null&&(S.callback=l),o=uc(i,S,g),o!==null&&(gu(o,i,g,d),T0(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=ya(),d=cc(i),g=Sl(l,d);g.tag=2,o!=null&&(g.callback=o),o=uc(i,g,d),o!==null&&(gu(o,i,d,l),T0(o,i,d))}};function hO(i,o,l,d,g,S,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,S,b):o.prototype&&o.prototype.isPureReactComponent?!Bg(l,d)||!Bg(g,S):!0}function NU(i,o,l){var d=!1,g=hc,S=o.contextType;return typeof S=="object"&&S!==null?S=Bs(S):(g=qa(o)?tf:ia.current,d=o.contextTypes,S=(d=d!=null)?fh(i,g):hc),o=new o(l,S),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=mE,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=S),o}function pO(i,o,l,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==i&&mE.enqueueReplaceState(o,o.state,null)}function gb(i,o,l,d){var g=i.stateNode;g.props=l,g.state=i.memoizedState,g.refs={},_C(i);var S=o.contextType;typeof S=="object"&&S!==null?g.context=Bs(S):(S=qa(o)?tf:ia.current,g.context=fh(i,S)),g.state=i.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(pb(i,o,S,l),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&mE.enqueueReplaceState(g,g.state,null),K0(i,l,g,d),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function gh(i,o){try{var l="",d=o;do l+=fH(d),d=d.return;while(d);var g=l}catch(S){g="\nError generating stack: "+S.message+"\n"+S.stack}return{value:i,source:o,stack:g,digest:null}}function rS(i,o,l){return{value:i,source:null,stack:l!=null?l:null,digest:o!=null?o:null}}function mb(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var U7=typeof WeakMap=="function"?WeakMap:Map;function MU(i,o,l){l=Sl(-1,l),l.tag=3,l.payload={element:null};var d=o.value;return l.callback=function(){X0||(X0=!0,bb=d),mb(i,o)},l}function DU(i,o,l){l=Sl(-1,l),l.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var g=o.value;l.payload=function(){return d(g)},l.callback=function(){mb(i,o)}}var S=i.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(l.callback=function(){mb(i,o),typeof d!="function"&&(lc===null?lc=new Set([this]):lc.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})}),l}function gO(i,o,l){var d=i.pingCache;if(d===null){d=i.pingCache=new U7;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(l)||(g.add(l),i=Q7.bind(null,i,o,l),o.then(i,i))}function mO(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function vO(i,o,l,d,g){return i.mode&1?(i.flags|=65536,i.lanes=g,i):(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=Sl(-1,1),o.tag=2,uc(l,o,1))),l.lanes|=1),i)}var B7=Cl.ReactCurrentOwner,ja=!1;function va(i,o,l,d){o.child=i===null?sU(o,null,l,d):hh(o,i.child,l,d)}function yO(i,o,l,d,g){l=l.render;var S=o.ref;return sh(o,g),d=IC(i,o,l,d,S,g),l=bC(),i!==null&&!ja?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,bl(i,o,g)):(Gi&&l&&hC(o),o.flags|=1,va(i,o,d,g),o.child)}function EO(i,o,l,d,g){if(i===null){var S=l.type;return typeof S=="function"&&!kC(S)&&S.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=S,PU(i,o,S,d,g)):(i=C0(l.type,null,d,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(S=i.child,!(i.lanes&g)){var b=S.memoizedProps;if(l=l.compare,l=l!==null?l:Bg,l(b,d)&&i.ref===o.ref)return bl(i,o,g)}return o.flags|=1,i=fc(S,d),i.ref=o.ref,i.return=o,o.child=i}function PU(i,o,l,d,g){if(i!==null){var S=i.memoizedProps;if(Bg(S,d)&&i.ref===o.ref)if(ja=!1,o.pendingProps=d=S,(i.lanes&g)!==0)i.flags&131072&&(ja=!0);else return o.lanes=i.lanes,bl(i,o,g)}return vb(i,o,l,d,g)}function OU(i,o,l){var d=o.pendingProps,g=d.children,S=i!==null?i.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pi(Jd,ls),ls|=l;else{if(!(l&1073741824))return i=S!==null?S.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Pi(Jd,ls),ls|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=S!==null?S.baseLanes:l,Pi(Jd,ls),ls|=d}else S!==null?(d=S.baseLanes|l,o.memoizedState=null):d=l,Pi(Jd,ls),ls|=d;return va(i,o,g,l),o.child}function LU(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function vb(i,o,l,d,g){var S=qa(l)?tf:ia.current;return S=fh(o,S),sh(o,g),l=IC(i,o,l,d,S,g),d=bC(),i!==null&&!ja?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,bl(i,o,g)):(Gi&&d&&hC(o),o.flags|=1,va(i,o,l,g),o.child)}function _O(i,o,l,d,g){if(qa(l)){var S=!0;Z0(o)}else S=!1;if(sh(o,g),o.stateNode===null)A0(i,o),NU(o,l,d),gb(o,l,d,g),d=!0;else if(i===null){var b=o.stateNode,p=o.memoizedProps;b.props=p;var w=b.context,k=l.contextType;typeof k=="object"&&k!==null?k=Bs(k):(k=qa(l)?tf:ia.current,k=fh(o,k));var C=l.getDerivedStateFromProps,E=typeof C=="function"||typeof b.getSnapshotBeforeUpdate=="function";E||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(p!==d||w!==k)&&pO(o,b,d,k),Jl=!1;var y=o.memoizedState;b.state=y,K0(o,d,b,g),w=o.memoizedState,p!==d||y!==w||Za.current||Jl?(typeof C=="function"&&(pb(o,l,C,d),w=o.memoizedState),(p=Jl||hO(o,l,p,d,y,w,k))?(E||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=w),b.props=d,b.state=w,b.context=k,d=p):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,lU(i,o),p=o.memoizedProps,k=o.type===o.elementType?p:su(o.type,p),b.props=k,E=o.pendingProps,y=b.context,w=l.contextType,typeof w=="object"&&w!==null?w=Bs(w):(w=qa(l)?tf:ia.current,w=fh(o,w));var P=l.getDerivedStateFromProps;(C=typeof P=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(p!==E||y!==w)&&pO(o,b,d,w),Jl=!1,y=o.memoizedState,b.state=y,K0(o,d,b,g);var m=o.memoizedState;p!==E||y!==m||Za.current||Jl?(typeof P=="function"&&(pb(o,l,P,d),m=o.memoizedState),(k=Jl||hO(o,l,k,d,y,m,w)||!1)?(C||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,m,w),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,m,w)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||p===i.memoizedProps&&y===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||p===i.memoizedProps&&y===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=m),b.props=d,b.state=m,b.context=w,d=k):(typeof b.componentDidUpdate!="function"||p===i.memoizedProps&&y===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||p===i.memoizedProps&&y===i.memoizedState||(o.flags|=1024),d=!1)}return yb(i,o,l,d,S,g)}function yb(i,o,l,d,g,S){LU(i,o);var b=(o.flags&128)!==0;if(!d&&!b)return g&&oO(o,l,!1),bl(i,o,S);d=o.stateNode,B7.current=o;var p=b&&typeof l.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&b?(o.child=hh(o,i.child,null,S),o.child=hh(o,null,p,S)):va(i,o,p,S),o.memoizedState=d.state,g&&oO(o,l,!0),o.child}function kU(i){var o=i.stateNode;o.pendingContext?iO(i,o.pendingContext,o.pendingContext!==o.context):o.context&&iO(i,o.context,!1),TC(i,o.containerInfo)}function TO(i,o,l,d,g){return dh(),gC(g),o.flags|=256,va(i,o,l,d),o.child}var Eb={dehydrated:null,treeContext:null,retryLane:0};function _b(i){return{baseLanes:i,cachePool:null,transitions:null}}function FU(i,o,l){var d=o.pendingProps,g=Qi.current,S=!1,b=(o.flags&128)!==0,p;if((p=b)||(p=i!==null&&i.memoizedState===null?!1:(g&2)!==0),p?(S=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Pi(Qi,g&1),i===null)return db(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(b=d.children,i=d.fallback,S?(d=o.mode,S=o.child,b={mode:"hidden",children:b},!(d&1)&&S!==null?(S.childLanes=0,S.pendingProps=b):S=EE(b,d,0,null),i=Qc(i,d,l,null),S.return=o,i.return=o,S.sibling=i,o.child=S,o.child.memoizedState=_b(l),o.memoizedState=Eb,i):xC(o,b));if(g=i.memoizedState,g!==null&&(p=g.dehydrated,p!==null))return j7(i,o,b,d,p,g,l);if(S){S=d.fallback,b=o.mode,g=i.child,p=g.sibling;var w={mode:"hidden",children:d.children};return!(b&1)&&o.child!==g?(d=o.child,d.childLanes=0,d.pendingProps=w,o.deletions=null):(d=fc(g,w),d.subtreeFlags=g.subtreeFlags&14680064),p!==null?S=fc(p,S):(S=Qc(S,b,l,null),S.flags|=2),S.return=o,d.return=o,d.sibling=S,o.child=d,d=S,S=o.child,b=i.child.memoizedState,b=b===null?_b(l):{baseLanes:b.baseLanes|l,cachePool:null,transitions:b.transitions},S.memoizedState=b,S.childLanes=i.childLanes&~l,o.memoizedState=Eb,d}return S=i.child,i=S.sibling,d=fc(S,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=l),d.return=o,d.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=d,o.memoizedState=null,d}function xC(i,o){return o=EE({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function r0(i,o,l,d){return d!==null&&gC(d),hh(o,i.child,null,l),i=xC(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function j7(i,o,l,d,g,S,b){if(l)return o.flags&256?(o.flags&=-257,d=rS(Error(Hn(422))),r0(i,o,b,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(S=d.fallback,g=o.mode,d=EE({mode:"visible",children:d.children},g,0,null),S=Qc(S,g,b,null),S.flags|=2,d.return=o,S.return=o,d.sibling=S,o.child=d,o.mode&1&&hh(o,i.child,null,b),o.child.memoizedState=_b(b),o.memoizedState=Eb,S);if(!(o.mode&1))return r0(i,o,b,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var p=d.dgst;return d=p,S=Error(Hn(419)),d=rS(S,d,void 0),r0(i,o,b,d)}if(p=(b&i.childLanes)!==0,ja||p){if(d=jo,d!==null){switch(b&-b){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(d.suspendedLanes|b)?0:g,g!==0&&g!==S.retryLane&&(S.retryLane=g,Il(i,g),gu(d,i,g,-1))}return LC(),d=rS(Error(Hn(421))),r0(i,o,b,d)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=J7.bind(null,i),g._reactRetry=o,null):(i=S.treeContext,fs=sc(g.nextSibling),hs=o,Gi=!0,lu=null,i!==null&&(Os[Ls++]=_l,Os[Ls++]=Tl,Os[Ls++]=nf,_l=i.id,Tl=i.overflow,nf=o),o=xC(o,d.children),o.flags|=4096,o)}function SO(i,o,l){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),hb(i.return,o,l)}function iS(i,o,l,d,g){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=l,S.tailMode=g)}function UU(i,o,l){var d=o.pendingProps,g=d.revealOrder,S=d.tail;if(va(i,o,d.children,l),d=Qi.current,d&2)d=d&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&SO(i,l,o);else if(i.tag===19)SO(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(Pi(Qi,d),!(o.mode&1))o.memoizedState=null;else switch(g){case"forwards":for(l=o.child,g=null;l!==null;)i=l.alternate,i!==null&&z0(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=o.child,o.child=null):(g=l.sibling,l.sibling=null),iS(o,!1,g,l,S);break;case"backwards":for(l=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&z0(i)===null){o.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}iS(o,!0,l,null,S);break;case"together":iS(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function A0(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function bl(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),of|=o.lanes,!(l&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(Hn(153));if(o.child!==null){for(i=o.child,l=fc(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=fc(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function Z7(i,o,l){switch(o.tag){case 3:kU(o),dh();break;case 5:cU(o);break;case 1:qa(o.type)&&Z0(o);break;case 4:TC(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,g=o.memoizedProps.value;Pi(H0,d._currentValue),d._currentValue=g;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(Pi(Qi,Qi.current&1),o.flags|=128,null):l&o.child.childLanes?FU(i,o,l):(Pi(Qi,Qi.current&1),i=bl(i,o,l),i!==null?i.sibling:null);Pi(Qi,Qi.current&1);break;case 19:if(d=(l&o.childLanes)!==0,i.flags&128){if(d)return UU(i,o,l);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Pi(Qi,Qi.current),d)break;return null;case 22:case 23:return o.lanes=0,OU(i,o,l)}return bl(i,o,l)}var BU,Tb,jU,ZU;BU=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};Tb=function(){};jU=function(i,o,l,d){var g=i.memoizedProps;if(g!==d){i=o.stateNode,Wc(Bu.current);var S=null;switch(l){case"input":g=GI(i,g),d=GI(i,d),S=[];break;case"select":g=to({},g,{value:void 0}),d=to({},d,{value:void 0}),S=[];break;case"textarea":g=KI(i,g),d=KI(i,d),S=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=B0)}YI(l,d);var b;l=null;for(k in g)if(!d.hasOwnProperty(k)&&g.hasOwnProperty(k)&&g[k]!=null)if(k==="style"){var p=g[k];for(b in p)p.hasOwnProperty(b)&&(l||(l={}),l[b]="")}else k!=="dangerouslySetInnerHTML"&&k!=="children"&&k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(Dg.hasOwnProperty(k)?S||(S=[]):(S=S||[]).push(k,null));for(k in d){var w=d[k];if(p=g!=null?g[k]:void 0,d.hasOwnProperty(k)&&w!==p&&(w!=null||p!=null))if(k==="style")if(p){for(b in p)!p.hasOwnProperty(b)||w&&w.hasOwnProperty(b)||(l||(l={}),l[b]="");for(b in w)w.hasOwnProperty(b)&&p[b]!==w[b]&&(l||(l={}),l[b]=w[b])}else l||(S||(S=[]),S.push(k,l)),l=w;else k==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,p=p?p.__html:void 0,w!=null&&p!==w&&(S=S||[]).push(k,w)):k==="children"?typeof w!="string"&&typeof w!="number"||(S=S||[]).push(k,""+w):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&(Dg.hasOwnProperty(k)?(w!=null&&k==="onScroll"&&Li("scroll",i),S||p===w||(S=[])):(S=S||[]).push(k,w))}l&&(S=S||[]).push("style",l);var k=S;(o.updateQueue=k)&&(o.flags|=4)}};ZU=function(i,o,l,d){l!==d&&(o.flags|=4)};function ug(i,o){if(!Gi)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function ea(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(o)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=l,o}function q7(i,o,l){var d=o.pendingProps;switch(pC(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ea(o),null;case 1:return qa(o.type)&&j0(),ea(o),null;case 3:return d=o.stateNode,ph(),ki(Za),ki(ia),wC(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(t0(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,lu!==null&&(xb(lu),lu=null))),Tb(i,o),ea(o),null;case 5:SC(o);var g=Wc(Hg.current);if(l=o.type,i!==null&&o.stateNode!=null)jU(i,o,l,d,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(Hn(166));return ea(o),null}if(i=Wc(Bu.current),t0(o)){d=o.stateNode,l=o.type;var S=o.memoizedProps;switch(d[Fu]=o,d[qg]=S,i=(o.mode&1)!==0,l){case"dialog":Li("cancel",d),Li("close",d);break;case"iframe":case"object":case"embed":Li("load",d);break;case"video":case"audio":for(g=0;g<yg.length;g++)Li(yg[g],d);break;case"source":Li("error",d);break;case"img":case"image":case"link":Li("error",d),Li("load",d);break;case"details":Li("toggle",d);break;case"input":MP(d,S),Li("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!S.multiple},Li("invalid",d);break;case"textarea":PP(d,S),Li("invalid",d)}YI(l,S),g=null;for(var b in S)if(S.hasOwnProperty(b)){var p=S[b];b==="children"?typeof p=="string"?d.textContent!==p&&(S.suppressHydrationWarning!==!0&&e0(d.textContent,p,i),g=["children",p]):typeof p=="number"&&d.textContent!==""+p&&(S.suppressHydrationWarning!==!0&&e0(d.textContent,p,i),g=["children",""+p]):Dg.hasOwnProperty(b)&&p!=null&&b==="onScroll"&&Li("scroll",d)}switch(l){case"input":Ky(d),DP(d,S,!0);break;case"textarea":Ky(d),OP(d);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(d.onclick=B0)}d=g,o.updateQueue=d,d!==null&&(o.flags|=4)}else{b=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=g4(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=b.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=b.createElement(l,{is:d.is}):(i=b.createElement(l),l==="select"&&(b=i,d.multiple?b.multiple=!0:d.size&&(b.size=d.size))):i=b.createElementNS(i,l),i[Fu]=o,i[qg]=d,BU(i,o,!1,!1),o.stateNode=i;e:{switch(b=WI(l,d),l){case"dialog":Li("cancel",i),Li("close",i),g=d;break;case"iframe":case"object":case"embed":Li("load",i),g=d;break;case"video":case"audio":for(g=0;g<yg.length;g++)Li(yg[g],i);g=d;break;case"source":Li("error",i),g=d;break;case"img":case"image":case"link":Li("error",i),Li("load",i),g=d;break;case"details":Li("toggle",i),g=d;break;case"input":MP(i,d),g=GI(i,d),Li("invalid",i);break;case"option":g=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},g=to({},d,{value:void 0}),Li("invalid",i);break;case"textarea":PP(i,d),g=KI(i,d),Li("invalid",i);break;default:g=d}YI(l,g),p=g;for(S in p)if(p.hasOwnProperty(S)){var w=p[S];S==="style"?y4(i,w):S==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&m4(i,w)):S==="children"?typeof w=="string"?(l!=="textarea"||w!=="")&&Pg(i,w):typeof w=="number"&&Pg(i,""+w):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(Dg.hasOwnProperty(S)?w!=null&&S==="onScroll"&&Li("scroll",i):w!=null&&Jb(i,S,w,b))}switch(l){case"input":Ky(i),DP(i,d,!1);break;case"textarea":Ky(i),OP(i);break;case"option":d.value!=null&&i.setAttribute("value",""+dc(d.value));break;case"select":i.multiple=!!d.multiple,S=d.value,S!=null?rh(i,!!d.multiple,S,!1):d.defaultValue!=null&&rh(i,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=B0)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return ea(o),null;case 6:if(i&&o.stateNode!=null)ZU(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(Hn(166));if(l=Wc(Hg.current),Wc(Bu.current),t0(o)){if(d=o.stateNode,l=o.memoizedProps,d[Fu]=o,(S=d.nodeValue!==l)&&(i=hs,i!==null))switch(i.tag){case 3:e0(d.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&e0(d.nodeValue,l,(i.mode&1)!==0)}S&&(o.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[Fu]=o,o.stateNode=d}return ea(o),null;case 13:if(ki(Qi),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Gi&&fs!==null&&o.mode&1&&!(o.flags&128))oU(),dh(),o.flags|=98560,S=!1;else if(S=t0(o),d!==null&&d.dehydrated!==null){if(i===null){if(!S)throw Error(Hn(318));if(S=o.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(Hn(317));S[Fu]=o}else dh(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;ea(o),S=!1}else lu!==null&&(xb(lu),lu=null),S=!0;if(!S)return o.flags&65536?o:null}return o.flags&128?(o.lanes=l,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,o.mode&1&&(i===null||Qi.current&1?Do===0&&(Do=3):LC())),o.updateQueue!==null&&(o.flags|=4),ea(o),null);case 4:return ph(),Tb(i,o),i===null&&jg(o.stateNode.containerInfo),ea(o),null;case 10:return yC(o.type._context),ea(o),null;case 17:return qa(o.type)&&j0(),ea(o),null;case 19:if(ki(Qi),S=o.memoizedState,S===null)return ea(o),null;if(d=(o.flags&128)!==0,b=S.rendering,b===null)if(d)ug(S,!1);else{if(Do!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(b=z0(i),b!==null){for(o.flags|=128,ug(S,!1),d=b.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=l,l=o.child;l!==null;)S=l,i=d,S.flags&=14680066,b=S.alternate,b===null?(S.childLanes=0,S.lanes=i,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=b.childLanes,S.lanes=b.lanes,S.child=b.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=b.memoizedProps,S.memoizedState=b.memoizedState,S.updateQueue=b.updateQueue,S.type=b.type,i=b.dependencies,S.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Pi(Qi,Qi.current&1|2),o.child}i=i.sibling}S.tail!==null&&vo()>mh&&(o.flags|=128,d=!0,ug(S,!1),o.lanes=4194304)}else{if(!d)if(i=z0(b),i!==null){if(o.flags|=128,d=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),ug(S,!0),S.tail===null&&S.tailMode==="hidden"&&!b.alternate&&!Gi)return ea(o),null}else 2*vo()-S.renderingStartTime>mh&&l!==1073741824&&(o.flags|=128,d=!0,ug(S,!1),o.lanes=4194304);S.isBackwards?(b.sibling=o.child,o.child=b):(l=S.last,l!==null?l.sibling=b:o.child=b,S.last=b)}return S.tail!==null?(o=S.tail,S.rendering=o,S.tail=o.sibling,S.renderingStartTime=vo(),o.sibling=null,l=Qi.current,Pi(Qi,d?l&1|2:l&1),o):(ea(o),null);case 22:case 23:return OC(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&o.mode&1?ls&1073741824&&(ea(o),o.subtreeFlags&6&&(o.flags|=8192)):ea(o),null;case 24:return null;case 25:return null}throw Error(Hn(156,o.tag))}function G7(i,o){switch(pC(o),o.tag){case 1:return qa(o.type)&&j0(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ph(),ki(Za),ki(ia),wC(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return SC(o),null;case 13:if(ki(Qi),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(Hn(340));dh()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ki(Qi),null;case 4:return ph(),null;case 10:return yC(o.type._context),null;case 22:case 23:return OC(),null;case 24:return null;default:return null}}var i0=!1,na=!1,H7=typeof WeakSet=="function"?WeakSet:Set,cr=null;function Qd(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){oo(i,o,d)}else l.current=null}function Sb(i,o,l){try{l()}catch(d){oo(i,o,d)}}var wO=!1;function V7(i,o){if(ob=k0,i=K4(),dC(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,S=d.focusNode;d=d.focusOffset;try{l.nodeType,S.nodeType}catch(x){l=null;break e}var b=0,p=-1,w=-1,k=0,C=0,E=i,y=null;t:for(;;){for(var P;E!==l||g!==0&&E.nodeType!==3||(p=b+g),E!==S||d!==0&&E.nodeType!==3||(w=b+d),E.nodeType===3&&(b+=E.nodeValue.length),(P=E.firstChild)!==null;)y=E,E=P;for(;;){if(E===i)break t;if(y===l&&++k===g&&(p=b),y===S&&++C===d&&(w=b),(P=E.nextSibling)!==null)break;E=y,y=E.parentNode}E=P}l=p===-1||w===-1?null:{start:p,end:w}}else l=null}l=l||{start:0,end:0}}else l=null;for(ab={focusedElem:i,selectionRange:l},k0=!1,cr=o;cr!==null;)if(o=cr,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,cr=i;else for(;cr!==null;){o=cr;try{var m=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var T=m.memoizedProps,U=m.memoizedState,M=o.stateNode,_=M.getSnapshotBeforeUpdate(o.elementType===o.type?T:su(o.type,T),U);M.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=o.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Hn(163))}}catch(x){oo(o,o.return,x)}if(i=o.sibling,i!==null){i.return=o.return,cr=i;break}cr=o.return}return m=wO,wO=!1,m}function Rg(i,o,l){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&i)===i){var S=g.destroy;g.destroy=void 0,S!==void 0&&Sb(o,l,S)}g=g.next}while(g!==d)}}function vE(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var d=l.create;l.destroy=d()}l=l.next}while(l!==o)}}function wb(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function qU(i){var o=i.alternate;o!==null&&(i.alternate=null,qU(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Fu],delete o[qg],delete o[lb],delete o[C7],delete o[R7])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function GU(i){return i.tag===5||i.tag===3||i.tag===4}function AO(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||GU(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ab(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=B0));else if(d!==4&&(i=i.child,i!==null))for(Ab(i,o,l),i=i.sibling;i!==null;)Ab(i,o,l),i=i.sibling}function Ib(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Ib(i,o,l),i=i.sibling;i!==null;)Ib(i,o,l),i=i.sibling}var Vo=null,uu=!1;function Xl(i,o,l){for(l=l.child;l!==null;)HU(i,o,l),l=l.sibling}function HU(i,o,l){if(Uu&&typeof Uu.onCommitFiberUnmount=="function")try{Uu.onCommitFiberUnmount(lE,l)}catch(p){}switch(l.tag){case 5:na||Qd(l,o);case 6:var d=Vo,g=uu;Vo=null,Xl(i,o,l),Vo=d,uu=g,Vo!==null&&(uu?(i=Vo,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Vo.removeChild(l.stateNode));break;case 18:Vo!==null&&(uu?(i=Vo,l=l.stateNode,i.nodeType===8?XT(i.parentNode,l):i.nodeType===1&&XT(i,l),Fg(i)):XT(Vo,l.stateNode));break;case 4:d=Vo,g=uu,Vo=l.stateNode.containerInfo,uu=!0,Xl(i,o,l),Vo=d,uu=g;break;case 0:case 11:case 14:case 15:if(!na&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var S=g,b=S.destroy;S=S.tag,b!==void 0&&(S&2||S&4)&&Sb(l,o,b),g=g.next}while(g!==d)}Xl(i,o,l);break;case 1:if(!na&&(Qd(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(p){oo(l,o,p)}Xl(i,o,l);break;case 21:Xl(i,o,l);break;case 22:l.mode&1?(na=(d=na)||l.memoizedState!==null,Xl(i,o,l),na=d):Xl(i,o,l);break;default:Xl(i,o,l)}}function IO(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new H7),o.forEach(function(d){var g=eV.bind(null,i,d);l.has(d)||(l.add(d),d.then(g,g))})}}function ou(i,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];try{var S=i,b=o,p=b;e:for(;p!==null;){switch(p.tag){case 5:Vo=p.stateNode,uu=!1;break e;case 3:Vo=p.stateNode.containerInfo,uu=!0;break e;case 4:Vo=p.stateNode.containerInfo,uu=!0;break e}p=p.return}if(Vo===null)throw Error(Hn(160));HU(S,b,g),Vo=null,uu=!1;var w=g.alternate;w!==null&&(w.return=null),g.return=null}catch(k){oo(g,o,k)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)VU(o,i),o=o.sibling}function VU(i,o){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ou(o,i),Du(i),d&4){try{Rg(3,i,i.return),vE(3,i)}catch(T){oo(i,i.return,T)}try{Rg(5,i,i.return)}catch(T){oo(i,i.return,T)}}break;case 1:ou(o,i),Du(i),d&512&&l!==null&&Qd(l,l.return);break;case 5:if(ou(o,i),Du(i),d&512&&l!==null&&Qd(l,l.return),i.flags&32){var g=i.stateNode;try{Pg(g,"")}catch(T){oo(i,i.return,T)}}if(d&4&&(g=i.stateNode,g!=null)){var S=i.memoizedProps,b=l!==null?l.memoizedProps:S,p=i.type,w=i.updateQueue;if(i.updateQueue=null,w!==null)try{p==="input"&&S.type==="radio"&&S.name!=null&&h4(g,S),WI(p,b);var k=WI(p,S);for(b=0;b<w.length;b+=2){var C=w[b],E=w[b+1];C==="style"?y4(g,E):C==="dangerouslySetInnerHTML"?m4(g,E):C==="children"?Pg(g,E):Jb(g,C,E,k)}switch(p){case"input":HI(g,S);break;case"textarea":p4(g,S);break;case"select":var y=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!S.multiple;var P=S.value;P!=null?rh(g,!!S.multiple,P,!1):y!==!!S.multiple&&(S.defaultValue!=null?rh(g,!!S.multiple,S.defaultValue,!0):rh(g,!!S.multiple,S.multiple?[]:"",!1))}g[qg]=S}catch(T){oo(i,i.return,T)}}break;case 6:if(ou(o,i),Du(i),d&4){if(i.stateNode===null)throw Error(Hn(162));g=i.stateNode,S=i.memoizedProps;try{g.nodeValue=S}catch(T){oo(i,i.return,T)}}break;case 3:if(ou(o,i),Du(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Fg(o.containerInfo)}catch(T){oo(i,i.return,T)}break;case 4:ou(o,i),Du(i);break;case 13:ou(o,i),Du(i),g=i.child,g.flags&8192&&(S=g.memoizedState!==null,g.stateNode.isHidden=S,!S||g.alternate!==null&&g.alternate.memoizedState!==null||(DC=vo())),d&4&&IO(i);break;case 22:if(C=l!==null&&l.memoizedState!==null,i.mode&1?(na=(k=na)||C,ou(o,i),na=k):ou(o,i),Du(i),d&8192){if(k=i.memoizedState!==null,(i.stateNode.isHidden=k)&&!C&&i.mode&1)for(cr=i,C=i.child;C!==null;){for(E=cr=C;cr!==null;){switch(y=cr,P=y.child,y.tag){case 0:case 11:case 14:case 15:Rg(4,y,y.return);break;case 1:Qd(y,y.return);var m=y.stateNode;if(typeof m.componentWillUnmount=="function"){d=y,l=y.return;try{o=d,m.props=o.memoizedProps,m.state=o.memoizedState,m.componentWillUnmount()}catch(T){oo(d,l,T)}}break;case 5:Qd(y,y.return);break;case 22:if(y.memoizedState!==null){CO(E);continue}}P!==null?(P.return=y,cr=P):CO(E)}C=C.sibling}e:for(C=null,E=i;;){if(E.tag===5){if(C===null){C=E;try{g=E.stateNode,k?(S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(p=E.stateNode,w=E.memoizedProps.style,b=w!=null&&w.hasOwnProperty("display")?w.display:null,p.style.display=v4("display",b))}catch(T){oo(i,i.return,T)}}}else if(E.tag===6){if(C===null)try{E.stateNode.nodeValue=k?"":E.memoizedProps}catch(T){oo(i,i.return,T)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===i)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===i)break e;for(;E.sibling===null;){if(E.return===null||E.return===i)break e;C===E&&(C=null),E=E.return}C===E&&(C=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:ou(o,i),Du(i),d&4&&IO(i);break;case 21:break;default:ou(o,i),Du(i)}}function Du(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(GU(l)){var d=l;break e}l=l.return}throw Error(Hn(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(Pg(g,""),d.flags&=-33);var S=AO(i);Ib(i,S,g);break;case 3:case 4:var b=d.stateNode.containerInfo,p=AO(i);Ab(i,p,b);break;default:throw Error(Hn(161))}}catch(w){oo(i,i.return,w)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function K7(i,o,l){cr=i,KU(i)}function KU(i,o,l){for(var d=(i.mode&1)!==0;cr!==null;){var g=cr,S=g.child;if(g.tag===22&&d){var b=g.memoizedState!==null||i0;if(!b){var p=g.alternate,w=p!==null&&p.memoizedState!==null||na;p=i0;var k=na;if(i0=b,(na=w)&&!k)for(cr=g;cr!==null;)b=cr,w=b.child,b.tag===22&&b.memoizedState!==null?RO(g):w!==null?(w.return=b,cr=w):RO(g);for(;S!==null;)cr=S,KU(S),S=S.sibling;cr=g,i0=p,na=k}bO(i)}else g.subtreeFlags&8772&&S!==null?(S.return=g,cr=S):bO(i)}}function bO(i){for(;cr!==null;){var o=cr;if(o.flags&8772){var l=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:na||vE(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!na)if(l===null)d.componentDidMount();else{var g=o.elementType===o.type?l.memoizedProps:su(o.type,l.memoizedProps);d.componentDidUpdate(g,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var S=o.updateQueue;S!==null&&cO(o,S,d);break;case 3:var b=o.updateQueue;if(b!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}cO(o,b,l)}break;case 5:var p=o.stateNode;if(l===null&&o.flags&4){l=p;var w=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&l.focus();break;case"img":w.src&&(l.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var k=o.alternate;if(k!==null){var C=k.memoizedState;if(C!==null){var E=C.dehydrated;E!==null&&Fg(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Hn(163))}na||o.flags&512&&wb(o)}catch(y){oo(o,o.return,y)}}if(o===i){cr=null;break}if(l=o.sibling,l!==null){l.return=o.return,cr=l;break}cr=o.return}}function CO(i){for(;cr!==null;){var o=cr;if(o===i){cr=null;break}var l=o.sibling;if(l!==null){l.return=o.return,cr=l;break}cr=o.return}}function RO(i){for(;cr!==null;){var o=cr;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{vE(4,o)}catch(w){oo(o,l,w)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var g=o.return;try{d.componentDidMount()}catch(w){oo(o,g,w)}}var S=o.return;try{wb(o)}catch(w){oo(o,S,w)}break;case 5:var b=o.return;try{wb(o)}catch(w){oo(o,b,w)}}}catch(w){oo(o,o.return,w)}if(o===i){cr=null;break}var p=o.sibling;if(p!==null){p.return=o.return,cr=p;break}cr=o.return}}var z7=Math.ceil,$0=Cl.ReactCurrentDispatcher,NC=Cl.ReactCurrentOwner,Us=Cl.ReactCurrentBatchConfig,ui=0,jo=null,wo=null,Ko=0,ls=0,Jd=gc(0),Do=0,Yg=null,of=0,yE=0,MC=0,xg=null,Ba=null,DC=0,mh=1/0,yl=null,X0=!1,bb=null,lc=null,o0=!1,rc=null,Q0=0,Ng=0,Cb=null,I0=-1,b0=0;function ya(){return ui&6?vo():I0!==-1?I0:I0=vo()}function cc(i){return i.mode&1?ui&2&&Ko!==0?Ko&-Ko:N7.transition!==null?(b0===0&&(b0=N4()),b0):(i=wi,i!==0||(i=window.event,i=i===void 0?16:F4(i.type)),i):1}function gu(i,o,l,d){if(50<Ng)throw Ng=0,Cb=null,Error(Hn(185));tm(i,l,d),(!(ui&2)||i!==jo)&&(i===jo&&(!(ui&2)&&(yE|=l),Do===4&&tc(i,Ko)),Ga(i,d),l===1&&ui===0&&!(o.mode&1)&&(mh=vo()+500,pE&&mc()))}function Ga(i,o){var l=i.callbackNode;NH(i,o);var d=L0(i,i===jo?Ko:0);if(d===0)l!==null&&FP(l),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(l!=null&&FP(l),o===1)i.tag===0?x7(xO.bind(null,i)):nU(xO.bind(null,i)),I7(function(){!(ui&6)&&mc()}),l=null;else{switch(M4(d)){case 1:l=iC;break;case 4:l=R4;break;case 16:l=O0;break;case 536870912:l=x4;break;default:l=O0}l=eB(l,zU.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function zU(i,o){if(I0=-1,b0=0,ui&6)throw Error(Hn(327));var l=i.callbackNode;if(uh()&&i.callbackNode!==l)return null;var d=L0(i,i===jo?Ko:0);if(d===0)return null;if(d&30||d&i.expiredLanes||o)o=J0(i,d);else{o=d;var g=ui;ui|=2;var S=WU();(jo!==i||Ko!==o)&&(yl=null,mh=vo()+500,Xc(i,o));do try{$7();break}catch(p){YU(i,p)}while(!0);vC(),$0.current=S,ui=g,wo!==null?o=0:(jo=null,Ko=0,o=Do)}if(o!==0){if(o===2&&(g=eb(i),g!==0&&(d=g,o=Rb(i,g))),o===1)throw l=Yg,Xc(i,0),tc(i,d),Ga(i,vo()),l;if(o===6)tc(i,d);else{if(g=i.current.alternate,!(d&30)&&!Y7(g)&&(o=J0(i,d),o===2&&(S=eb(i),S!==0&&(d=S,o=Rb(i,S))),o===1))throw l=Yg,Xc(i,0),tc(i,d),Ga(i,vo()),l;switch(i.finishedWork=g,i.finishedLanes=d,o){case 0:case 1:throw Error(Hn(345));case 2:Hc(i,Ba,yl);break;case 3:if(tc(i,d),(d&130023424)===d&&(o=DC+500-vo(),10<o)){if(L0(i,0)!==0)break;if(g=i.suspendedLanes,(g&d)!==d){ya(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=ub(Hc.bind(null,i,Ba,yl),o);break}Hc(i,Ba,yl);break;case 4:if(tc(i,d),(d&4194240)===d)break;for(o=i.eventTimes,g=-1;0<d;){var b=31-pu(d);S=1<<b,b=o[b],b>g&&(g=b),d&=~S}if(d=g,d=vo()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*z7(d/1960))-d,10<d){i.timeoutHandle=ub(Hc.bind(null,i,Ba,yl),d);break}Hc(i,Ba,yl);break;case 5:Hc(i,Ba,yl);break;default:throw Error(Hn(329))}}}return Ga(i,vo()),i.callbackNode===l?zU.bind(null,i):null}function Rb(i,o){var l=xg;return i.current.memoizedState.isDehydrated&&(Xc(i,o).flags|=256),i=J0(i,o),i!==2&&(o=Ba,Ba=l,o!==null&&xb(o)),i}function xb(i){Ba===null?Ba=i:Ba.push.apply(Ba,i)}function Y7(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var g=l[d],S=g.getSnapshot;g=g.value;try{if(!mu(S(),g))return!1}catch(b){return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function tc(i,o){for(o&=~MC,o&=~yE,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-pu(o),d=1<<l;i[l]=-1,o&=~d}}function xO(i){if(ui&6)throw Error(Hn(327));uh();var o=L0(i,0);if(!(o&1))return Ga(i,vo()),null;var l=J0(i,o);if(i.tag!==0&&l===2){var d=eb(i);d!==0&&(o=d,l=Rb(i,d))}if(l===1)throw l=Yg,Xc(i,0),tc(i,o),Ga(i,vo()),l;if(l===6)throw Error(Hn(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Hc(i,Ba,yl),Ga(i,vo()),null}function PC(i,o){var l=ui;ui|=1;try{return i(o)}finally{ui=l,ui===0&&(mh=vo()+500,pE&&mc())}}function af(i){rc!==null&&rc.tag===0&&!(ui&6)&&uh();var o=ui;ui|=1;var l=Us.transition,d=wi;try{if(Us.transition=null,wi=1,i)return i()}finally{wi=d,Us.transition=l,ui=o,!(ui&6)&&mc()}}function OC(){ls=Jd.current,ki(Jd)}function Xc(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,A7(l)),wo!==null)for(l=wo.return;l!==null;){var d=l;switch(pC(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&j0();break;case 3:ph(),ki(Za),ki(ia),wC();break;case 5:SC(d);break;case 4:ph();break;case 13:ki(Qi);break;case 19:ki(Qi);break;case 10:yC(d.type._context);break;case 22:case 23:OC()}l=l.return}if(jo=i,wo=i=fc(i.current,null),Ko=ls=o,Do=0,Yg=null,MC=yE=of=0,Ba=xg=null,Yc!==null){for(o=0;o<Yc.length;o++)if(l=Yc[o],d=l.interleaved,d!==null){l.interleaved=null;var g=d.next,S=l.pending;if(S!==null){var b=S.next;S.next=g,d.next=b}l.pending=d}Yc=null}return i}function YU(i,o){do{var l=wo;try{if(vC(),S0.current=W0,Y0){for(var d=eo.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}Y0=!1}if(rf=0,Bo=Mo=eo=null,Cg=!1,Vg=0,NC.current=null,l===null||l.return===null){Do=1,Yg=o,wo=null;break}e:{var S=i,b=l.return,p=l,w=o;if(o=Ko,p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var k=w,C=p,E=C.tag;if(!(C.mode&1)&&(E===0||E===11||E===15)){var y=C.alternate;y?(C.updateQueue=y.updateQueue,C.memoizedState=y.memoizedState,C.lanes=y.lanes):(C.updateQueue=null,C.memoizedState=null)}var P=mO(b);if(P!==null){P.flags&=-257,vO(P,b,p,S,o),P.mode&1&&gO(S,k,o),o=P,w=k;var m=o.updateQueue;if(m===null){var T=new Set;T.add(w),o.updateQueue=T}else m.add(w);break e}else{if(!(o&1)){gO(S,k,o),LC();break e}w=Error(Hn(426))}}else if(Gi&&p.mode&1){var U=mO(b);if(U!==null){!(U.flags&65536)&&(U.flags|=256),vO(U,b,p,S,o),gC(gh(w,p));break e}}S=w=gh(w,p),Do!==4&&(Do=2),xg===null?xg=[S]:xg.push(S),S=b;do{switch(S.tag){case 3:S.flags|=65536,o&=-o,S.lanes|=o;var M=MU(S,w,o);lO(S,M);break e;case 1:p=w;var _=S.type,I=S.stateNode;if(!(S.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(lc===null||!lc.has(I)))){S.flags|=65536,o&=-o,S.lanes|=o;var x=DU(S,p,o);lO(S,x);break e}}S=S.return}while(S!==null)}XU(l)}catch(Z){o=Z,wo===l&&l!==null&&(wo=l=l.return);continue}break}while(!0)}function WU(){var i=$0.current;return $0.current=W0,i===null?W0:i}function LC(){(Do===0||Do===3||Do===2)&&(Do=4),jo===null||!(of&268435455)&&!(yE&268435455)||tc(jo,Ko)}function J0(i,o){var l=ui;ui|=2;var d=WU();(jo!==i||Ko!==o)&&(yl=null,Xc(i,o));do try{W7();break}catch(g){YU(i,g)}while(!0);if(vC(),ui=l,$0.current=d,wo!==null)throw Error(Hn(261));return jo=null,Ko=0,Do}function W7(){for(;wo!==null;)$U(wo)}function $7(){for(;wo!==null&&!TH();)$U(wo)}function $U(i){var o=JU(i.alternate,i,ls);i.memoizedProps=i.pendingProps,o===null?XU(i):wo=o,NC.current=null}function XU(i){var o=i;do{var l=o.alternate;if(i=o.return,o.flags&32768){if(l=G7(l,o),l!==null){l.flags&=32767,wo=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Do=6,wo=null;return}}else if(l=q7(l,o,ls),l!==null){wo=l;return}if(o=o.sibling,o!==null){wo=o;return}wo=o=i}while(o!==null);Do===0&&(Do=5)}function Hc(i,o,l){var d=wi,g=Us.transition;try{Us.transition=null,wi=1,X7(i,o,l,d)}finally{Us.transition=g,wi=d}return null}function X7(i,o,l,d){do uh();while(rc!==null);if(ui&6)throw Error(Hn(327));l=i.finishedWork;var g=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(Hn(177));i.callbackNode=null,i.callbackPriority=0;var S=l.lanes|l.childLanes;if(MH(i,S),i===jo&&(wo=jo=null,Ko=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||o0||(o0=!0,eB(O0,function(){return uh(),null})),S=(l.flags&15990)!==0,l.subtreeFlags&15990||S){S=Us.transition,Us.transition=null;var b=wi;wi=1;var p=ui;ui|=4,NC.current=null,V7(i,l),VU(l,i),v7(ab),k0=!!ob,ab=ob=null,i.current=l,K7(l),SH(),ui=p,wi=b,Us.transition=S}else i.current=l;if(o0&&(o0=!1,rc=i,Q0=g),S=i.pendingLanes,S===0&&(lc=null),IH(l.stateNode),Ga(i,vo()),o!==null)for(d=i.onRecoverableError,l=0;l<o.length;l++)g=o[l],d(g.value,{componentStack:g.stack,digest:g.digest});if(X0)throw X0=!1,i=bb,bb=null,i;return Q0&1&&i.tag!==0&&uh(),S=i.pendingLanes,S&1?i===Cb?Ng++:(Ng=0,Cb=i):Ng=0,mc(),null}function uh(){if(rc!==null){var i=M4(Q0),o=Us.transition,l=wi;try{if(Us.transition=null,wi=16>i?16:i,rc===null)var d=!1;else{if(i=rc,rc=null,Q0=0,ui&6)throw Error(Hn(331));var g=ui;for(ui|=4,cr=i.current;cr!==null;){var S=cr,b=S.child;if(cr.flags&16){var p=S.deletions;if(p!==null){for(var w=0;w<p.length;w++){var k=p[w];for(cr=k;cr!==null;){var C=cr;switch(C.tag){case 0:case 11:case 15:Rg(8,C,S)}var E=C.child;if(E!==null)E.return=C,cr=E;else for(;cr!==null;){C=cr;var y=C.sibling,P=C.return;if(qU(C),C===k){cr=null;break}if(y!==null){y.return=P,cr=y;break}cr=P}}}var m=S.alternate;if(m!==null){var T=m.child;if(T!==null){m.child=null;do{var U=T.sibling;T.sibling=null,T=U}while(T!==null)}}cr=S}}if(S.subtreeFlags&2064&&b!==null)b.return=S,cr=b;else e:for(;cr!==null;){if(S=cr,S.flags&2048)switch(S.tag){case 0:case 11:case 15:Rg(9,S,S.return)}var M=S.sibling;if(M!==null){M.return=S.return,cr=M;break e}cr=S.return}}var _=i.current;for(cr=_;cr!==null;){b=cr;var I=b.child;if(b.subtreeFlags&2064&&I!==null)I.return=b,cr=I;else e:for(b=_;cr!==null;){if(p=cr,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:vE(9,p)}}catch(Z){oo(p,p.return,Z)}if(p===b){cr=null;break e}var x=p.sibling;if(x!==null){x.return=p.return,cr=x;break e}cr=p.return}}if(ui=g,mc(),Uu&&typeof Uu.onPostCommitFiberRoot=="function")try{Uu.onPostCommitFiberRoot(lE,i)}catch(Z){}d=!0}return d}finally{wi=l,Us.transition=o}}return!1}function NO(i,o,l){o=gh(l,o),o=MU(i,o,1),i=uc(i,o,1),o=ya(),i!==null&&(tm(i,1,o),Ga(i,o))}function oo(i,o,l){if(i.tag===3)NO(i,i,l);else for(;o!==null;){if(o.tag===3){NO(o,i,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(lc===null||!lc.has(d))){i=gh(l,i),i=DU(o,i,1),o=uc(o,i,1),i=ya(),o!==null&&(tm(o,1,i),Ga(o,i));break}}o=o.return}}function Q7(i,o,l){var d=i.pingCache;d!==null&&d.delete(o),o=ya(),i.pingedLanes|=i.suspendedLanes&l,jo===i&&(Ko&l)===l&&(Do===4||Do===3&&(Ko&130023424)===Ko&&500>vo()-DC?Xc(i,0):MC|=l),Ga(i,o)}function QU(i,o){o===0&&(i.mode&1?(o=Wy,Wy<<=1,!(Wy&130023424)&&(Wy=4194304)):o=1);var l=ya();i=Il(i,o),i!==null&&(tm(i,o,l),Ga(i,l))}function J7(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),QU(i,l)}function eV(i,o){var l=0;switch(i.tag){case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(Hn(314))}d!==null&&d.delete(o),QU(i,l)}var JU;JU=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||Za.current)ja=!0;else{if(!(i.lanes&l)&&!(o.flags&128))return ja=!1,Z7(i,o,l);ja=!!(i.flags&131072)}else ja=!1,Gi&&o.flags&1048576&&rU(o,G0,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;A0(i,o),i=o.pendingProps;var g=fh(o,ia.current);sh(o,l),g=IC(null,o,d,i,g,l);var S=bC();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,qa(d)?(S=!0,Z0(o)):S=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,_C(o),g.updater=mE,o.stateNode=g,g._reactInternals=o,gb(o,d,i,l),o=yb(null,o,d,!0,S,l)):(o.tag=0,Gi&&S&&hC(o),va(null,o,g,l),o=o.child),o;case 16:d=o.elementType;e:{switch(A0(i,o),i=o.pendingProps,g=d._init,d=g(d._payload),o.type=d,g=o.tag=nV(d),i=su(d,i),g){case 0:o=vb(null,o,d,i,l);break e;case 1:o=_O(null,o,d,i,l);break e;case 11:o=yO(null,o,d,i,l);break e;case 14:o=EO(null,o,d,su(d.type,i),l);break e}throw Error(Hn(306,d,""))}return o;case 0:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:su(d,g),vb(i,o,d,g,l);case 1:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:su(d,g),_O(i,o,d,g,l);case 3:e:{if(kU(o),i===null)throw Error(Hn(387));d=o.pendingProps,S=o.memoizedState,g=S.element,lU(i,o),K0(o,d,null,l);var b=o.memoizedState;if(d=b.element,S.isDehydrated)if(S={element:d,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},o.updateQueue.baseState=S,o.memoizedState=S,o.flags&256){g=gh(Error(Hn(423)),o),o=TO(i,o,d,l,g);break e}else if(d!==g){g=gh(Error(Hn(424)),o),o=TO(i,o,d,l,g);break e}else for(fs=sc(o.stateNode.containerInfo.firstChild),hs=o,Gi=!0,lu=null,l=sU(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(dh(),d===g){o=bl(i,o,l);break e}va(i,o,d,l)}o=o.child}return o;case 5:return cU(o),i===null&&db(o),d=o.type,g=o.pendingProps,S=i!==null?i.memoizedProps:null,b=g.children,sb(d,g)?b=null:S!==null&&sb(d,S)&&(o.flags|=32),LU(i,o),va(i,o,b,l),o.child;case 6:return i===null&&db(o),null;case 13:return FU(i,o,l);case 4:return TC(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=hh(o,null,d,l):va(i,o,d,l),o.child;case 11:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:su(d,g),yO(i,o,d,g,l);case 7:return va(i,o,o.pendingProps,l),o.child;case 8:return va(i,o,o.pendingProps.children,l),o.child;case 12:return va(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(d=o.type._context,g=o.pendingProps,S=o.memoizedProps,b=g.value,Pi(H0,d._currentValue),d._currentValue=b,S!==null)if(mu(S.value,b)){if(S.children===g.children&&!Za.current){o=bl(i,o,l);break e}}else for(S=o.child,S!==null&&(S.return=o);S!==null;){var p=S.dependencies;if(p!==null){b=S.child;for(var w=p.firstContext;w!==null;){if(w.context===d){if(S.tag===1){w=Sl(-1,l&-l),w.tag=2;var k=S.updateQueue;if(k!==null){k=k.shared;var C=k.pending;C===null?w.next=w:(w.next=C.next,C.next=w),k.pending=w}}S.lanes|=l,w=S.alternate,w!==null&&(w.lanes|=l),hb(S.return,l,o),p.lanes|=l;break}w=w.next}}else if(S.tag===10)b=S.type===o.type?null:S.child;else if(S.tag===18){if(b=S.return,b===null)throw Error(Hn(341));b.lanes|=l,p=b.alternate,p!==null&&(p.lanes|=l),hb(b,l,o),b=S.sibling}else b=S.child;if(b!==null)b.return=S;else for(b=S;b!==null;){if(b===o){b=null;break}if(S=b.sibling,S!==null){S.return=b.return,b=S;break}b=b.return}S=b}va(i,o,g.children,l),o=o.child}return o;case 9:return g=o.type,d=o.pendingProps.children,sh(o,l),g=Bs(g),d=d(g),o.flags|=1,va(i,o,d,l),o.child;case 14:return d=o.type,g=su(d,o.pendingProps),g=su(d.type,g),EO(i,o,d,g,l);case 15:return PU(i,o,o.type,o.pendingProps,l);case 17:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:su(d,g),A0(i,o),o.tag=1,qa(d)?(i=!0,Z0(o)):i=!1,sh(o,l),NU(o,d,g),gb(o,d,g,l),yb(null,o,d,!0,i,l);case 19:return UU(i,o,l);case 22:return OU(i,o,l)}throw Error(Hn(156,o.tag))};function eB(i,o){return C4(i,o)}function tV(i,o,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fs(i,o,l,d){return new tV(i,o,l,d)}function kC(i){return i=i.prototype,!(!i||!i.isReactComponent)}function nV(i){if(typeof i=="function")return kC(i)?1:0;if(i!=null){if(i=i.$$typeof,i===tC)return 11;if(i===nC)return 14}return 2}function fc(i,o){var l=i.alternate;return l===null?(l=Fs(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function C0(i,o,l,d,g,S){var b=2;if(d=i,typeof i=="function")kC(i)&&(b=1);else if(typeof i=="string")b=5;else e:switch(i){case Gd:return Qc(l.children,g,S,o);case eC:b=8,g|=8;break;case BI:return i=Fs(12,l,o,g|2),i.elementType=BI,i.lanes=S,i;case jI:return i=Fs(13,l,o,g),i.elementType=jI,i.lanes=S,i;case ZI:return i=Fs(19,l,o,g),i.elementType=ZI,i.lanes=S,i;case c4:return EE(l,g,S,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case u4:b=10;break e;case l4:b=9;break e;case tC:b=11;break e;case nC:b=14;break e;case Ql:b=16,d=null;break e}throw Error(Hn(130,i==null?i:typeof i,""))}return o=Fs(b,l,o,g),o.elementType=i,o.type=d,o.lanes=S,o}function Qc(i,o,l,d){return i=Fs(7,i,d,o),i.lanes=l,i}function EE(i,o,l,d){return i=Fs(22,i,d,o),i.elementType=c4,i.lanes=l,i.stateNode={isHidden:!1},i}function oS(i,o,l){return i=Fs(6,i,null,o),i.lanes=l,i}function aS(i,o,l){return o=Fs(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function rV(i,o,l,d,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jT(0),this.expirationTimes=jT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jT(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function FC(i,o,l,d,g,S,b,p,w){return i=new rV(i,o,l,p,w),o===1?(o=1,S===!0&&(o|=8)):o=0,S=Fs(3,null,null,o),i.current=S,S.stateNode=i,S.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},_C(S),i}function iV(i,o,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qd,key:d==null?null:""+d,children:i,containerInfo:o,implementation:l}}function tB(i){if(!i)return hc;i=i._reactInternals;e:{if(cf(i)!==i||i.tag!==1)throw Error(Hn(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(qa(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(Hn(171))}if(i.tag===1){var l=i.type;if(qa(l))return tU(i,l,o)}return o}function nB(i,o,l,d,g,S,b,p,w){return i=FC(l,d,!0,i,g,S,b,p,w),i.context=tB(null),l=i.current,d=ya(),g=cc(l),S=Sl(d,g),S.callback=o!=null?o:null,uc(l,S,g),i.current.lanes=g,tm(i,g,d),Ga(i,d),i}function _E(i,o,l,d){var g=o.current,S=ya(),b=cc(g);return l=tB(l),o.context===null?o.context=l:o.pendingContext=l,o=Sl(S,b),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=uc(g,o,b),i!==null&&(gu(i,g,b,S),T0(i,g,b)),b}function eE(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function MO(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function UC(i,o){MO(i,o),(i=i.alternate)&&MO(i,o)}function oV(){return null}var rB=typeof reportError=="function"?reportError:function(i){console.error(i)};function BC(i){this._internalRoot=i}TE.prototype.render=BC.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(Hn(409));_E(i,o,null,null)};TE.prototype.unmount=BC.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;af(function(){_E(null,i,null,null)}),o[Al]=null}};function TE(i){this._internalRoot=i}TE.prototype.unstable_scheduleHydration=function(i){if(i){var o=O4();i={blockedOn:null,target:i,priority:o};for(var l=0;l<ec.length&&o!==0&&o<ec[l].priority;l++);ec.splice(l,0,i),l===0&&k4(i)}};function jC(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function SE(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function DO(){}function aV(i,o,l,d,g){if(g){if(typeof d=="function"){var S=d;d=function(){var k=eE(b);S.call(k)}}var b=nB(o,d,i,0,null,!1,!1,"",DO);return i._reactRootContainer=b,i[Al]=b.current,jg(i.nodeType===8?i.parentNode:i),af(),b}for(;g=i.lastChild;)i.removeChild(g);if(typeof d=="function"){var p=d;d=function(){var k=eE(w);p.call(k)}}var w=FC(i,0,!1,null,null,!1,!1,"",DO);return i._reactRootContainer=w,i[Al]=w.current,jg(i.nodeType===8?i.parentNode:i),af(function(){_E(o,w,l,d)}),w}function wE(i,o,l,d,g){var S=l._reactRootContainer;if(S){var b=S;if(typeof g=="function"){var p=g;g=function(){var w=eE(b);p.call(w)}}_E(o,b,i,g)}else b=aV(l,o,i,g,d);return eE(b)}D4=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=vg(o.pendingLanes);l!==0&&(oC(o,l|1),Ga(o,vo()),!(ui&6)&&(mh=vo()+500,mc()))}break;case 13:af(function(){var d=Il(i,1);if(d!==null){var g=ya();gu(d,i,1,g)}}),UC(i,1)}};aC=function(i){if(i.tag===13){var o=Il(i,134217728);if(o!==null){var l=ya();gu(o,i,134217728,l)}UC(i,134217728)}};P4=function(i){if(i.tag===13){var o=cc(i),l=Il(i,o);if(l!==null){var d=ya();gu(l,i,o,d)}UC(i,o)}};O4=function(){return wi};L4=function(i,o){var l=wi;try{return wi=i,o()}finally{wi=l}};XI=function(i,o,l){switch(o){case"input":if(HI(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==i&&d.form===i.form){var g=hE(d);if(!g)throw Error(Hn(90));d4(d),HI(d,g)}}}break;case"textarea":p4(i,l);break;case"select":o=l.value,o!=null&&rh(i,!!l.multiple,o,!1)}};T4=PC;S4=af;var sV={usingClientEntryPoint:!1,Events:[rm,zd,hE,E4,_4,PC]},lg={findFiberByHostInstance:zc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uV={bundleType:lg.bundleType,version:lg.version,rendererPackageName:lg.rendererPackageName,rendererConfig:lg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cl.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=I4(i),i===null?null:i.stateNode},findFiberByHostInstance:lg.findFiberByHostInstance||oV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var a0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!a0.isDisabled&&a0.supportsFiber)try{lE=a0.inject(uV),Uu=a0}catch(i){}}gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sV;gs.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jC(o))throw Error(Hn(200));return iV(i,o,null,l)};gs.createRoot=function(i,o){if(!jC(i))throw Error(Hn(299));var l=!1,d="",g=rB;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=FC(i,1,!1,null,null,l,!1,d,g),i[Al]=o.current,jg(i.nodeType===8?i.parentNode:i),new BC(o)};gs.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(Hn(188)):(i=Object.keys(i).join(","),Error(Hn(268,i)));return i=I4(o),i=i===null?null:i.stateNode,i};gs.flushSync=function(i){return af(i)};gs.hydrate=function(i,o,l){if(!SE(o))throw Error(Hn(200));return wE(null,i,o,!0,l)};gs.hydrateRoot=function(i,o,l){if(!jC(i))throw Error(Hn(405));var d=l!=null&&l.hydratedSources||null,g=!1,S="",b=rB;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(S=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),o=nB(o,null,i,1,l!=null?l:null,g,!1,S,b),i[Al]=o.current,jg(i),d)for(i=0;i<d.length;i++)l=d[i],g=l._getVersion,g=g(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,g]:o.mutableSourceEagerHydrationData.push(l,g);return new TE(o)};gs.render=function(i,o,l){if(!SE(o))throw Error(Hn(200));return wE(null,i,o,!1,l)};gs.unmountComponentAtNode=function(i){if(!SE(i))throw Error(Hn(40));return i._reactRootContainer?(af(function(){wE(null,null,i,!1,function(){i._reactRootContainer=null,i[Al]=null})}),!0):!1};gs.unstable_batchedUpdates=PC;gs.unstable_renderSubtreeIntoContainer=function(i,o,l,d){if(!SE(l))throw Error(Hn(200));if(i==null||i._reactInternals===void 0)throw Error(Hn(38));return wE(i,o,l,!1,d)};gs.version="18.3.1-next-f1338f8080-20240426";function iB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iB)}catch(i){console.error(i)}}iB(),i4.exports=gs;var lV=i4.exports,PO=lV;FI.createRoot=PO.createRoot,FI.hydrateRoot=PO.hydrateRoot;var oB={exports:{}},sS,OO;function ff(){if(OO)return sS;OO=1;function i(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}return sS=i,sS}var uS,LO;function aB(){if(LO)return uS;LO=1;var i=typeof fu=="object"&&fu&&fu.Object===Object&&fu;return uS=i,uS}var lS,kO;function ju(){if(kO)return lS;kO=1;var i=aB(),o=typeof self=="object"&&self&&self.Object===Object&&self,l=i||o||Function("return this")();return lS=l,lS}var cS,FO;function cV(){if(FO)return cS;FO=1;var i=ju(),o=function(){return i.Date.now()};return cS=o,cS}var fS,UO;function fV(){if(UO)return fS;UO=1;var i=/\s/;function o(l){for(var d=l.length;d--&&i.test(l.charAt(d)););return d}return fS=o,fS}var dS,BO;function dV(){if(BO)return dS;BO=1;var i=fV(),o=/^\s+/;function l(d){return d&&d.slice(0,i(d)+1).replace(o,"")}return dS=l,dS}var hS,jO;function om(){if(jO)return hS;jO=1;var i=ju(),o=i.Symbol;return hS=o,hS}var pS,ZO;function hV(){if(ZO)return pS;ZO=1;var i=om(),o=Object.prototype,l=o.hasOwnProperty,d=o.toString,g=i?i.toStringTag:void 0;function S(b){var p=l.call(b,g),w=b[g];try{b[g]=void 0;var k=!0}catch(E){}var C=d.call(b);return k&&(p?b[g]=w:delete b[g]),C}return pS=S,pS}var gS,qO;function pV(){if(qO)return gS;qO=1;var i=Object.prototype,o=i.toString;function l(d){return o.call(d)}return gS=l,gS}var mS,GO;function am(){if(GO)return mS;GO=1;var i=om(),o=hV(),l=pV(),d="[object Null]",g="[object Undefined]",S=i?i.toStringTag:void 0;function b(p){return p==null?p===void 0?g:d:S&&S in Object(p)?o(p):l(p)}return mS=b,mS}var vS,HO;function Sh(){if(HO)return vS;HO=1;function i(o){return o!=null&&typeof o=="object"}return vS=i,vS}var yS,VO;function sm(){if(VO)return yS;VO=1;var i=am(),o=Sh(),l="[object Symbol]";function d(g){return typeof g=="symbol"||o(g)&&i(g)==l}return yS=d,yS}var ES,KO;function gV(){if(KO)return ES;KO=1;var i=dV(),o=ff(),l=sm(),d=NaN,g=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,b=/^0o[0-7]+$/i,p=parseInt;function w(k){if(typeof k=="number")return k;if(l(k))return d;if(o(k)){var C=typeof k.valueOf=="function"?k.valueOf():k;k=o(C)?C+"":C}if(typeof k!="string")return k===0?k:+k;k=i(k);var E=S.test(k);return E||b.test(k)?p(k.slice(2),E?2:8):g.test(k)?d:+k}return ES=w,ES}var _S,zO;function sB(){if(zO)return _S;zO=1;var i=ff(),o=cV(),l=gV(),d="Expected a function",g=Math.max,S=Math.min;function b(p,w,k){var C,E,y,P,m,T,U=0,M=!1,_=!1,I=!0;if(typeof p!="function")throw new TypeError(d);w=l(w)||0,i(k)&&(M=!!k.leading,_="maxWait"in k,y=_?g(l(k.maxWait)||0,w):y,I="trailing"in k?!!k.trailing:I);function x(oe){var ye=C,be=E;return C=E=void 0,U=oe,P=p.apply(be,ye),P}function Z(oe){return U=oe,m=setTimeout(Q,w),M?x(oe):P}function Y(oe){var ye=oe-T,be=oe-U,Xe=w-ye;return _?S(Xe,y-be):Xe}function $(oe){var ye=oe-T,be=oe-U;return T===void 0||ye>=w||ye<0||_&&be>=y}function Q(){var oe=o();if($(oe))return se(oe);m=setTimeout(Q,Y(oe))}function se(oe){return m=void 0,I&&C?x(oe):(C=E=void 0,P)}function R(){m!==void 0&&clearTimeout(m),U=0,C=T=E=m=void 0}function X(){return m===void 0?P:se(o())}function ce(){var oe=o(),ye=$(oe);if(C=arguments,E=this,T=oe,ye){if(m===void 0)return Z(T);if(_)return clearTimeout(m),m=setTimeout(Q,w),x(T)}return m===void 0&&(m=setTimeout(Q,w)),P}return ce.cancel=R,ce.flush=X,ce}return _S=b,_S}var TS,YO;function uB(){if(YO)return TS;YO=1;var i=am(),o=ff(),l="[object AsyncFunction]",d="[object Function]",g="[object GeneratorFunction]",S="[object Proxy]";function b(p){if(!o(p))return!1;var w=i(p);return w==d||w==g||w==l||w==S}return TS=b,TS}var SS,WO;function mV(){if(WO)return SS;WO=1;var i=ju(),o=i["__core-js_shared__"];return SS=o,SS}var wS,$O;function vV(){if($O)return wS;$O=1;var i=mV(),o=function(){var d=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}();function l(d){return!!o&&o in d}return wS=l,wS}var AS,XO;function lB(){if(XO)return AS;XO=1;var i=Function.prototype,o=i.toString;function l(d){if(d!=null){try{return o.call(d)}catch(g){}try{return d+""}catch(g){}}return""}return AS=l,AS}var IS,QO;function yV(){if(QO)return IS;QO=1;var i=uB(),o=vV(),l=ff(),d=lB(),g=/[\\^$.*+?()[\]{}|]/g,S=/^\[object .+?Constructor\]$/,b=Function.prototype,p=Object.prototype,w=b.toString,k=p.hasOwnProperty,C=RegExp("^"+w.call(k).replace(g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E(y){if(!l(y)||o(y))return!1;var P=i(y)?C:S;return P.test(d(y))}return IS=E,IS}var bS,JO;function EV(){if(JO)return bS;JO=1;function i(o,l){return o==null?void 0:o[l]}return bS=i,bS}var CS,eL;function df(){if(eL)return CS;eL=1;var i=yV(),o=EV();function l(d,g){var S=o(d,g);return i(S)?S:void 0}return CS=l,CS}var RS,tL;function AE(){if(tL)return RS;tL=1;var i=df(),o=i(Object,"create");return RS=o,RS}var xS,nL;function _V(){if(nL)return xS;nL=1;var i=AE();function o(){this.__data__=i?i(null):{},this.size=0}return xS=o,xS}var NS,rL;function TV(){if(rL)return NS;rL=1;function i(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}return NS=i,NS}var MS,iL;function SV(){if(iL)return MS;iL=1;var i=AE(),o="__lodash_hash_undefined__",l=Object.prototype,d=l.hasOwnProperty;function g(S){var b=this.__data__;if(i){var p=b[S];return p===o?void 0:p}return d.call(b,S)?b[S]:void 0}return MS=g,MS}var DS,oL;function wV(){if(oL)return DS;oL=1;var i=AE(),o=Object.prototype,l=o.hasOwnProperty;function d(g){var S=this.__data__;return i?S[g]!==void 0:l.call(S,g)}return DS=d,DS}var PS,aL;function AV(){if(aL)return PS;aL=1;var i=AE(),o="__lodash_hash_undefined__";function l(d,g){var S=this.__data__;return this.size+=this.has(d)?0:1,S[d]=i&&g===void 0?o:g,this}return PS=l,PS}var OS,sL;function IV(){if(sL)return OS;sL=1;var i=_V(),o=TV(),l=SV(),d=wV(),g=AV();function S(b){var p=-1,w=b==null?0:b.length;for(this.clear();++p<w;){var k=b[p];this.set(k[0],k[1])}}return S.prototype.clear=i,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=d,S.prototype.set=g,OS=S,OS}var LS,uL;function bV(){if(uL)return LS;uL=1;function i(){this.__data__=[],this.size=0}return LS=i,LS}var kS,lL;function ZC(){if(lL)return kS;lL=1;function i(o,l){return o===l||o!==o&&l!==l}return kS=i,kS}var FS,cL;function IE(){if(cL)return FS;cL=1;var i=ZC();function o(l,d){for(var g=l.length;g--;)if(i(l[g][0],d))return g;return-1}return FS=o,FS}var US,fL;function CV(){if(fL)return US;fL=1;var i=IE(),o=Array.prototype,l=o.splice;function d(g){var S=this.__data__,b=i(S,g);if(b<0)return!1;var p=S.length-1;return b==p?S.pop():l.call(S,b,1),--this.size,!0}return US=d,US}var BS,dL;function RV(){if(dL)return BS;dL=1;var i=IE();function o(l){var d=this.__data__,g=i(d,l);return g<0?void 0:d[g][1]}return BS=o,BS}var jS,hL;function xV(){if(hL)return jS;hL=1;var i=IE();function o(l){return i(this.__data__,l)>-1}return jS=o,jS}var ZS,pL;function NV(){if(pL)return ZS;pL=1;var i=IE();function o(l,d){var g=this.__data__,S=i(g,l);return S<0?(++this.size,g.push([l,d])):g[S][1]=d,this}return ZS=o,ZS}var qS,gL;function bE(){if(gL)return qS;gL=1;var i=bV(),o=CV(),l=RV(),d=xV(),g=NV();function S(b){var p=-1,w=b==null?0:b.length;for(this.clear();++p<w;){var k=b[p];this.set(k[0],k[1])}}return S.prototype.clear=i,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=d,S.prototype.set=g,qS=S,qS}var GS,mL;function qC(){if(mL)return GS;mL=1;var i=df(),o=ju(),l=i(o,"Map");return GS=l,GS}var HS,vL;function MV(){if(vL)return HS;vL=1;var i=IV(),o=bE(),l=qC();function d(){this.size=0,this.__data__={hash:new i,map:new(l||o),string:new i}}return HS=d,HS}var VS,yL;function DV(){if(yL)return VS;yL=1;function i(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}return VS=i,VS}var KS,EL;function CE(){if(EL)return KS;EL=1;var i=DV();function o(l,d){var g=l.__data__;return i(d)?g[typeof d=="string"?"string":"hash"]:g.map}return KS=o,KS}var zS,_L;function PV(){if(_L)return zS;_L=1;var i=CE();function o(l){var d=i(this,l).delete(l);return this.size-=d?1:0,d}return zS=o,zS}var YS,TL;function OV(){if(TL)return YS;TL=1;var i=CE();function o(l){return i(this,l).get(l)}return YS=o,YS}var WS,SL;function LV(){if(SL)return WS;SL=1;var i=CE();function o(l){return i(this,l).has(l)}return WS=o,WS}var $S,wL;function kV(){if(wL)return $S;wL=1;var i=CE();function o(l,d){var g=i(this,l),S=g.size;return g.set(l,d),this.size+=g.size==S?0:1,this}return $S=o,$S}var XS,AL;function GC(){if(AL)return XS;AL=1;var i=MV(),o=PV(),l=OV(),d=LV(),g=kV();function S(b){var p=-1,w=b==null?0:b.length;for(this.clear();++p<w;){var k=b[p];this.set(k[0],k[1])}}return S.prototype.clear=i,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=d,S.prototype.set=g,XS=S,XS}var QS,IL;function FV(){if(IL)return QS;IL=1;var i="__lodash_hash_undefined__";function o(l){return this.__data__.set(l,i),this}return QS=o,QS}var JS,bL;function UV(){if(bL)return JS;bL=1;function i(o){return this.__data__.has(o)}return JS=i,JS}var ew,CL;function cB(){if(CL)return ew;CL=1;var i=GC(),o=FV(),l=UV();function d(g){var S=-1,b=g==null?0:g.length;for(this.__data__=new i;++S<b;)this.add(g[S])}return d.prototype.add=d.prototype.push=o,d.prototype.has=l,ew=d,ew}var tw,RL;function BV(){if(RL)return tw;RL=1;function i(o,l,d,g){for(var S=o.length,b=d+(g?1:-1);g?b--:++b<S;)if(l(o[b],b,o))return b;return-1}return tw=i,tw}var nw,xL;function jV(){if(xL)return nw;xL=1;function i(o){return o!==o}return nw=i,nw}var rw,NL;function ZV(){if(NL)return rw;NL=1;function i(o,l,d){for(var g=d-1,S=o.length;++g<S;)if(o[g]===l)return g;return-1}return rw=i,rw}var iw,ML;function qV(){if(ML)return iw;ML=1;var i=BV(),o=jV(),l=ZV();function d(g,S,b){return S===S?l(g,S,b):i(g,o,b)}return iw=d,iw}var ow,DL;function GV(){if(DL)return ow;DL=1;var i=qV();function o(l,d){var g=l==null?0:l.length;return!!g&&i(l,d,0)>-1}return ow=o,ow}var aw,PL;function HV(){if(PL)return aw;PL=1;function i(o,l,d){for(var g=-1,S=o==null?0:o.length;++g<S;)if(d(l,o[g]))return!0;return!1}return aw=i,aw}var sw,OL;function HC(){if(OL)return sw;OL=1;function i(o,l){for(var d=-1,g=o==null?0:o.length,S=Array(g);++d<g;)S[d]=l(o[d],d,o);return S}return sw=i,sw}var uw,LL;function VC(){if(LL)return uw;LL=1;function i(o){return function(l){return o(l)}}return uw=i,uw}var lw,kL;function fB(){if(kL)return lw;kL=1;function i(o,l){return o.has(l)}return lw=i,lw}var cw,FL;function VV(){if(FL)return cw;FL=1;var i=cB(),o=GV(),l=HV(),d=HC(),g=VC(),S=fB(),b=200;function p(w,k,C,E){var y=-1,P=o,m=!0,T=w.length,U=[],M=k.length;if(!T)return U;C&&(k=d(k,g(C))),E?(P=l,m=!1):k.length>=b&&(P=S,m=!1,k=new i(k));e:for(;++y<T;){var _=w[y],I=C==null?_:C(_);if(_=E||_!==0?_:0,m&&I===I){for(var x=M;x--;)if(k[x]===I)continue e;U.push(_)}else P(k,I,E)||U.push(_)}return U}return cw=p,cw}var fw,UL;function dB(){if(UL)return fw;UL=1;function i(o,l){for(var d=-1,g=l.length,S=o.length;++d<g;)o[S+d]=l[d];return o}return fw=i,fw}var dw,BL;function KV(){if(BL)return dw;BL=1;var i=am(),o=Sh(),l="[object Arguments]";function d(g){return o(g)&&i(g)==l}return dw=d,dw}var hw,jL;function KC(){if(jL)return hw;jL=1;var i=KV(),o=Sh(),l=Object.prototype,d=l.hasOwnProperty,g=l.propertyIsEnumerable,S=i(function(){return arguments}())?i:function(b){return o(b)&&d.call(b,"callee")&&!g.call(b,"callee")};return hw=S,hw}var pw,ZL;function Zs(){if(ZL)return pw;ZL=1;var i=Array.isArray;return pw=i,pw}var gw,qL;function zV(){if(qL)return gw;qL=1;var i=om(),o=KC(),l=Zs(),d=i?i.isConcatSpreadable:void 0;function g(S){return l(S)||o(S)||!!(d&&S&&S[d])}return gw=g,gw}var mw,GL;function hB(){if(GL)return mw;GL=1;var i=dB(),o=zV();function l(d,g,S,b,p){var w=-1,k=d.length;for(S||(S=o),p||(p=[]);++w<k;){var C=d[w];g>0&&S(C)?g>1?l(C,g-1,S,b,p):i(p,C):b||(p[p.length]=C)}return p}return mw=l,mw}var vw,HL;function um(){if(HL)return vw;HL=1;function i(o){return o}return vw=i,vw}var yw,VL;function YV(){if(VL)return yw;VL=1;function i(o,l,d){switch(d.length){case 0:return o.call(l);case 1:return o.call(l,d[0]);case 2:return o.call(l,d[0],d[1]);case 3:return o.call(l,d[0],d[1],d[2])}return o.apply(l,d)}return yw=i,yw}var Ew,KL;function WV(){if(KL)return Ew;KL=1;var i=YV(),o=Math.max;function l(d,g,S){return g=o(g===void 0?d.length-1:g,0),function(){for(var b=arguments,p=-1,w=o(b.length-g,0),k=Array(w);++p<w;)k[p]=b[g+p];p=-1;for(var C=Array(g+1);++p<g;)C[p]=b[p];return C[g]=S(k),i(d,this,C)}}return Ew=l,Ew}var _w,zL;function $V(){if(zL)return _w;zL=1;function i(o){return function(){return o}}return _w=i,_w}var Tw,YL;function XV(){if(YL)return Tw;YL=1;var i=df(),o=function(){try{var l=i(Object,"defineProperty");return l({},"",{}),l}catch(d){}}();return Tw=o,Tw}var Sw,WL;function QV(){if(WL)return Sw;WL=1;var i=$V(),o=XV(),l=um(),d=o?function(g,S){return o(g,"toString",{configurable:!0,enumerable:!1,value:i(S),writable:!0})}:l;return Sw=d,Sw}var ww,$L;function JV(){if($L)return ww;$L=1;var i=800,o=16,l=Date.now;function d(g){var S=0,b=0;return function(){var p=l(),w=o-(p-b);if(b=p,w>0){if(++S>=i)return arguments[0]}else S=0;return g.apply(void 0,arguments)}}return ww=d,ww}var Aw,XL;function eK(){if(XL)return Aw;XL=1;var i=QV(),o=JV(),l=o(i);return Aw=l,Aw}var Iw,QL;function pB(){if(QL)return Iw;QL=1;var i=um(),o=WV(),l=eK();function d(g,S){return l(o(g,S,i),g+"")}return Iw=d,Iw}var bw,JL;function zC(){if(JL)return bw;JL=1;var i=9007199254740991;function o(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=i}return bw=o,bw}var Cw,ek;function lm(){if(ek)return Cw;ek=1;var i=uB(),o=zC();function l(d){return d!=null&&o(d.length)&&!i(d)}return Cw=l,Cw}var Rw,tk;function tK(){if(tk)return Rw;tk=1;var i=lm(),o=Sh();function l(d){return o(d)&&i(d)}return Rw=l,Rw}var xw,nk;function nK(){if(nk)return xw;nk=1;var i=VV(),o=hB(),l=pB(),d=tK(),g=l(function(S,b){return d(S)?i(S,o(b,1,d,!0)):[]});return xw=g,xw}var Nw,rk;function gB(){if(rk)return Nw;rk=1;function i(o,l){for(var d=-1,g=o==null?0:o.length,S=0,b=[];++d<g;){var p=o[d];l(p,d,o)&&(b[S++]=p)}return b}return Nw=i,Nw}var Mw,ik;function rK(){if(ik)return Mw;ik=1;function i(o){return function(l,d,g){for(var S=-1,b=Object(l),p=g(l),w=p.length;w--;){var k=p[o?w:++S];if(d(b[k],k,b)===!1)break}return l}}return Mw=i,Mw}var Dw,ok;function iK(){if(ok)return Dw;ok=1;var i=rK(),o=i();return Dw=o,Dw}var Pw,ak;function oK(){if(ak)return Pw;ak=1;function i(o,l){for(var d=-1,g=Array(o);++d<o;)g[d]=l(d);return g}return Pw=i,Pw}var Eg={exports:{}},Ow,sk;function aK(){if(sk)return Ow;sk=1;function i(){return!1}return Ow=i,Ow}Eg.exports;var uk;function mB(){return uk||(uk=1,function(i,o){var l=ju(),d=aK(),g=o&&!o.nodeType&&o,S=g&&!0&&i&&!i.nodeType&&i,b=S&&S.exports===g,p=b?l.Buffer:void 0,w=p?p.isBuffer:void 0,k=w||d;i.exports=k}(Eg,Eg.exports)),Eg.exports}var Lw,lk;function YC(){if(lk)return Lw;lk=1;var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;function l(d,g){var S=typeof d;return g=g==null?i:g,!!g&&(S=="number"||S!="symbol"&&o.test(d))&&d>-1&&d%1==0&&d<g}return Lw=l,Lw}var kw,ck;function sK(){if(ck)return kw;ck=1;var i=am(),o=zC(),l=Sh(),d="[object Arguments]",g="[object Array]",S="[object Boolean]",b="[object Date]",p="[object Error]",w="[object Function]",k="[object Map]",C="[object Number]",E="[object Object]",y="[object RegExp]",P="[object Set]",m="[object String]",T="[object WeakMap]",U="[object ArrayBuffer]",M="[object DataView]",_="[object Float32Array]",I="[object Float64Array]",x="[object Int8Array]",Z="[object Int16Array]",Y="[object Int32Array]",$="[object Uint8Array]",Q="[object Uint8ClampedArray]",se="[object Uint16Array]",R="[object Uint32Array]",X={};X[_]=X[I]=X[x]=X[Z]=X[Y]=X[$]=X[Q]=X[se]=X[R]=!0,X[d]=X[g]=X[U]=X[S]=X[M]=X[b]=X[p]=X[w]=X[k]=X[C]=X[E]=X[y]=X[P]=X[m]=X[T]=!1;function ce(oe){return l(oe)&&o(oe.length)&&!!X[i(oe)]}return kw=ce,kw}var _g={exports:{}};_g.exports;var fk;function uK(){return fk||(fk=1,function(i,o){var l=aB(),d=o&&!o.nodeType&&o,g=d&&!0&&i&&!i.nodeType&&i,S=g&&g.exports===d,b=S&&l.process,p=function(){try{var w=g&&g.require&&g.require("util").types;return w||b&&b.binding&&b.binding("util")}catch(k){}}();i.exports=p}(_g,_g.exports)),_g.exports}var Fw,dk;function vB(){if(dk)return Fw;dk=1;var i=sK(),o=VC(),l=uK(),d=l&&l.isTypedArray,g=d?o(d):i;return Fw=g,Fw}var Uw,hk;function lK(){if(hk)return Uw;hk=1;var i=oK(),o=KC(),l=Zs(),d=mB(),g=YC(),S=vB(),b=Object.prototype,p=b.hasOwnProperty;function w(k,C){var E=l(k),y=!E&&o(k),P=!E&&!y&&d(k),m=!E&&!y&&!P&&S(k),T=E||y||P||m,U=T?i(k.length,String):[],M=U.length;for(var _ in k)(C||p.call(k,_))&&!(T&&(_=="length"||P&&(_=="offset"||_=="parent")||m&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||g(_,M)))&&U.push(_);return U}return Uw=w,Uw}var Bw,pk;function cK(){if(pk)return Bw;pk=1;var i=Object.prototype;function o(l){var d=l&&l.constructor,g=typeof d=="function"&&d.prototype||i;return l===g}return Bw=o,Bw}var jw,gk;function fK(){if(gk)return jw;gk=1;function i(o,l){return function(d){return o(l(d))}}return jw=i,jw}var Zw,mk;function dK(){if(mk)return Zw;mk=1;var i=fK(),o=i(Object.keys,Object);return Zw=o,Zw}var qw,vk;function hK(){if(vk)return qw;vk=1;var i=cK(),o=dK(),l=Object.prototype,d=l.hasOwnProperty;function g(S){if(!i(S))return o(S);var b=[];for(var p in Object(S))d.call(S,p)&&p!="constructor"&&b.push(p);return b}return qw=g,qw}var Gw,yk;function WC(){if(yk)return Gw;yk=1;var i=lK(),o=hK(),l=lm();function d(g){return l(g)?i(g):o(g)}return Gw=d,Gw}var Hw,Ek;function $C(){if(Ek)return Hw;Ek=1;var i=iK(),o=WC();function l(d,g){return d&&i(d,g,o)}return Hw=l,Hw}var Vw,_k;function pK(){if(_k)return Vw;_k=1;var i=lm();function o(l,d){return function(g,S){if(g==null)return g;if(!i(g))return l(g,S);for(var b=g.length,p=d?b:-1,w=Object(g);(d?p--:++p<b)&&S(w[p],p,w)!==!1;);return g}}return Vw=o,Vw}var Kw,Tk;function XC(){if(Tk)return Kw;Tk=1;var i=$C(),o=pK(),l=o(i);return Kw=l,Kw}var zw,Sk;function gK(){if(Sk)return zw;Sk=1;var i=XC();function o(l,d){var g=[];return i(l,function(S,b,p){d(S,b,p)&&g.push(S)}),g}return zw=o,zw}var Yw,wk;function mK(){if(wk)return Yw;wk=1;var i=bE();function o(){this.__data__=new i,this.size=0}return Yw=o,Yw}var Ww,Ak;function vK(){if(Ak)return Ww;Ak=1;function i(o){var l=this.__data__,d=l.delete(o);return this.size=l.size,d}return Ww=i,Ww}var $w,Ik;function yK(){if(Ik)return $w;Ik=1;function i(o){return this.__data__.get(o)}return $w=i,$w}var Xw,bk;function EK(){if(bk)return Xw;bk=1;function i(o){return this.__data__.has(o)}return Xw=i,Xw}var Qw,Ck;function _K(){if(Ck)return Qw;Ck=1;var i=bE(),o=qC(),l=GC(),d=200;function g(S,b){var p=this.__data__;if(p instanceof i){var w=p.__data__;if(!o||w.length<d-1)return w.push([S,b]),this.size=++p.size,this;p=this.__data__=new l(w)}return p.set(S,b),this.size=p.size,this}return Qw=g,Qw}var Jw,Rk;function yB(){if(Rk)return Jw;Rk=1;var i=bE(),o=mK(),l=vK(),d=yK(),g=EK(),S=_K();function b(p){var w=this.__data__=new i(p);this.size=w.size}return b.prototype.clear=o,b.prototype.delete=l,b.prototype.get=d,b.prototype.has=g,b.prototype.set=S,Jw=b,Jw}var eA,xk;function TK(){if(xk)return eA;xk=1;function i(o,l){for(var d=-1,g=o==null?0:o.length;++d<g;)if(l(o[d],d,o))return!0;return!1}return eA=i,eA}var tA,Nk;function EB(){if(Nk)return tA;Nk=1;var i=cB(),o=TK(),l=fB(),d=1,g=2;function S(b,p,w,k,C,E){var y=w&d,P=b.length,m=p.length;if(P!=m&&!(y&&m>P))return!1;var T=E.get(b),U=E.get(p);if(T&&U)return T==p&&U==b;var M=-1,_=!0,I=w&g?new i:void 0;for(E.set(b,p),E.set(p,b);++M<P;){var x=b[M],Z=p[M];if(k)var Y=y?k(Z,x,M,p,b,E):k(x,Z,M,b,p,E);if(Y!==void 0){if(Y)continue;_=!1;break}if(I){if(!o(p,function($,Q){if(!l(I,Q)&&(x===$||C(x,$,w,k,E)))return I.push(Q)})){_=!1;break}}else if(!(x===Z||C(x,Z,w,k,E))){_=!1;break}}return E.delete(b),E.delete(p),_}return tA=S,tA}var nA,Mk;function SK(){if(Mk)return nA;Mk=1;var i=ju(),o=i.Uint8Array;return nA=o,nA}var rA,Dk;function wK(){if(Dk)return rA;Dk=1;function i(o){var l=-1,d=Array(o.size);return o.forEach(function(g,S){d[++l]=[S,g]}),d}return rA=i,rA}var iA,Pk;function AK(){if(Pk)return iA;Pk=1;function i(o){var l=-1,d=Array(o.size);return o.forEach(function(g){d[++l]=g}),d}return iA=i,iA}var oA,Ok;function IK(){if(Ok)return oA;Ok=1;var i=om(),o=SK(),l=ZC(),d=EB(),g=wK(),S=AK(),b=1,p=2,w="[object Boolean]",k="[object Date]",C="[object Error]",E="[object Map]",y="[object Number]",P="[object RegExp]",m="[object Set]",T="[object String]",U="[object Symbol]",M="[object ArrayBuffer]",_="[object DataView]",I=i?i.prototype:void 0,x=I?I.valueOf:void 0;function Z(Y,$,Q,se,R,X,ce){switch(Q){case _:if(Y.byteLength!=$.byteLength||Y.byteOffset!=$.byteOffset)return!1;Y=Y.buffer,$=$.buffer;case M:return!(Y.byteLength!=$.byteLength||!X(new o(Y),new o($)));case w:case k:case y:return l(+Y,+$);case C:return Y.name==$.name&&Y.message==$.message;case P:case T:return Y==$+"";case E:var oe=g;case m:var ye=se&b;if(oe||(oe=S),Y.size!=$.size&&!ye)return!1;var be=ce.get(Y);if(be)return be==$;se|=p,ce.set(Y,$);var Xe=d(oe(Y),oe($),se,R,X,ce);return ce.delete(Y),Xe;case U:if(x)return x.call(Y)==x.call($)}return!1}return oA=Z,oA}var aA,Lk;function bK(){if(Lk)return aA;Lk=1;var i=dB(),o=Zs();function l(d,g,S){var b=g(d);return o(d)?b:i(b,S(d))}return aA=l,aA}var sA,kk;function CK(){if(kk)return sA;kk=1;function i(){return[]}return sA=i,sA}var uA,Fk;function RK(){if(Fk)return uA;Fk=1;var i=gB(),o=CK(),l=Object.prototype,d=l.propertyIsEnumerable,g=Object.getOwnPropertySymbols,S=g?function(b){return b==null?[]:(b=Object(b),i(g(b),function(p){return d.call(b,p)}))}:o;return uA=S,uA}var lA,Uk;function xK(){if(Uk)return lA;Uk=1;var i=bK(),o=RK(),l=WC();function d(g){return i(g,l,o)}return lA=d,lA}var cA,Bk;function NK(){if(Bk)return cA;Bk=1;var i=xK(),o=1,l=Object.prototype,d=l.hasOwnProperty;function g(S,b,p,w,k,C){var E=p&o,y=i(S),P=y.length,m=i(b),T=m.length;if(P!=T&&!E)return!1;for(var U=P;U--;){var M=y[U];if(!(E?M in b:d.call(b,M)))return!1}var _=C.get(S),I=C.get(b);if(_&&I)return _==b&&I==S;var x=!0;C.set(S,b),C.set(b,S);for(var Z=E;++U<P;){M=y[U];var Y=S[M],$=b[M];if(w)var Q=E?w($,Y,M,b,S,C):w(Y,$,M,S,b,C);if(!(Q===void 0?Y===$||k(Y,$,p,w,C):Q)){x=!1;break}Z||(Z=M=="constructor")}if(x&&!Z){var se=S.constructor,R=b.constructor;se!=R&&"constructor"in S&&"constructor"in b&&!(typeof se=="function"&&se instanceof se&&typeof R=="function"&&R instanceof R)&&(x=!1)}return C.delete(S),C.delete(b),x}return cA=g,cA}var fA,jk;function MK(){if(jk)return fA;jk=1;var i=df(),o=ju(),l=i(o,"DataView");return fA=l,fA}var dA,Zk;function DK(){if(Zk)return dA;Zk=1;var i=df(),o=ju(),l=i(o,"Promise");return dA=l,dA}var hA,qk;function PK(){if(qk)return hA;qk=1;var i=df(),o=ju(),l=i(o,"Set");return hA=l,hA}var pA,Gk;function OK(){if(Gk)return pA;Gk=1;var i=df(),o=ju(),l=i(o,"WeakMap");return pA=l,pA}var gA,Hk;function LK(){if(Hk)return gA;Hk=1;var i=MK(),o=qC(),l=DK(),d=PK(),g=OK(),S=am(),b=lB(),p="[object Map]",w="[object Object]",k="[object Promise]",C="[object Set]",E="[object WeakMap]",y="[object DataView]",P=b(i),m=b(o),T=b(l),U=b(d),M=b(g),_=S;return(i&&_(new i(new ArrayBuffer(1)))!=y||o&&_(new o)!=p||l&&_(l.resolve())!=k||d&&_(new d)!=C||g&&_(new g)!=E)&&(_=function(I){var x=S(I),Z=x==w?I.constructor:void 0,Y=Z?b(Z):"";if(Y)switch(Y){case P:return y;case m:return p;case T:return k;case U:return C;case M:return E}return x}),gA=_,gA}var mA,Vk;function kK(){if(Vk)return mA;Vk=1;var i=yB(),o=EB(),l=IK(),d=NK(),g=LK(),S=Zs(),b=mB(),p=vB(),w=1,k="[object Arguments]",C="[object Array]",E="[object Object]",y=Object.prototype,P=y.hasOwnProperty;function m(T,U,M,_,I,x){var Z=S(T),Y=S(U),$=Z?C:g(T),Q=Y?C:g(U);$=$==k?E:$,Q=Q==k?E:Q;var se=$==E,R=Q==E,X=$==Q;if(X&&b(T)){if(!b(U))return!1;Z=!0,se=!1}if(X&&!se)return x||(x=new i),Z||p(T)?o(T,U,M,_,I,x):l(T,U,$,M,_,I,x);if(!(M&w)){var ce=se&&P.call(T,"__wrapped__"),oe=R&&P.call(U,"__wrapped__");if(ce||oe){var ye=ce?T.value():T,be=oe?U.value():U;return x||(x=new i),I(ye,be,M,_,x)}}return X?(x||(x=new i),d(T,U,M,_,I,x)):!1}return mA=m,mA}var vA,Kk;function _B(){if(Kk)return vA;Kk=1;var i=kK(),o=Sh();function l(d,g,S,b,p){return d===g?!0:d==null||g==null||!o(d)&&!o(g)?d!==d&&g!==g:i(d,g,S,b,l,p)}return vA=l,vA}var yA,zk;function FK(){if(zk)return yA;zk=1;var i=yB(),o=_B(),l=1,d=2;function g(S,b,p,w){var k=p.length,C=k,E=!w;if(S==null)return!C;for(S=Object(S);k--;){var y=p[k];if(E&&y[2]?y[1]!==S[y[0]]:!(y[0]in S))return!1}for(;++k<C;){y=p[k];var P=y[0],m=S[P],T=y[1];if(E&&y[2]){if(m===void 0&&!(P in S))return!1}else{var U=new i;if(w)var M=w(m,T,P,S,b,U);if(!(M===void 0?o(T,m,l|d,w,U):M))return!1}}return!0}return yA=g,yA}var EA,Yk;function TB(){if(Yk)return EA;Yk=1;var i=ff();function o(l){return l===l&&!i(l)}return EA=o,EA}var _A,Wk;function UK(){if(Wk)return _A;Wk=1;var i=TB(),o=WC();function l(d){for(var g=o(d),S=g.length;S--;){var b=g[S],p=d[b];g[S]=[b,p,i(p)]}return g}return _A=l,_A}var TA,$k;function SB(){if($k)return TA;$k=1;function i(o,l){return function(d){return d==null?!1:d[o]===l&&(l!==void 0||o in Object(d))}}return TA=i,TA}var SA,Xk;function BK(){if(Xk)return SA;Xk=1;var i=FK(),o=UK(),l=SB();function d(g){var S=o(g);return S.length==1&&S[0][2]?l(S[0][0],S[0][1]):function(b){return b===g||i(b,g,S)}}return SA=d,SA}var wA,Qk;function QC(){if(Qk)return wA;Qk=1;var i=Zs(),o=sm(),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function g(S,b){if(i(S))return!1;var p=typeof S;return p=="number"||p=="symbol"||p=="boolean"||S==null||o(S)?!0:d.test(S)||!l.test(S)||b!=null&&S in Object(b)}return wA=g,wA}var AA,Jk;function jK(){if(Jk)return AA;Jk=1;var i=GC(),o="Expected a function";function l(d,g){if(typeof d!="function"||g!=null&&typeof g!="function")throw new TypeError(o);var S=function(){var b=arguments,p=g?g.apply(this,b):b[0],w=S.cache;if(w.has(p))return w.get(p);var k=d.apply(this,b);return S.cache=w.set(p,k)||w,k};return S.cache=new(l.Cache||i),S}return l.Cache=i,AA=l,AA}var IA,e3;function ZK(){if(e3)return IA;e3=1;var i=jK(),o=500;function l(d){var g=i(d,function(b){return S.size===o&&S.clear(),b}),S=g.cache;return g}return IA=l,IA}var bA,t3;function qK(){if(t3)return bA;t3=1;var i=ZK(),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,d=i(function(g){var S=[];return g.charCodeAt(0)===46&&S.push(""),g.replace(o,function(b,p,w,k){S.push(w?k.replace(l,"$1"):p||b)}),S});return bA=d,bA}var CA,n3;function GK(){if(n3)return CA;n3=1;var i=om(),o=HC(),l=Zs(),d=sm(),g=1/0,S=i?i.prototype:void 0,b=S?S.toString:void 0;function p(w){if(typeof w=="string")return w;if(l(w))return o(w,p)+"";if(d(w))return b?b.call(w):"";var k=w+"";return k=="0"&&1/w==-g?"-0":k}return CA=p,CA}var RA,r3;function wB(){if(r3)return RA;r3=1;var i=GK();function o(l){return l==null?"":i(l)}return RA=o,RA}var xA,i3;function AB(){if(i3)return xA;i3=1;var i=Zs(),o=QC(),l=qK(),d=wB();function g(S,b){return i(S)?S:o(S,b)?[S]:l(d(S))}return xA=g,xA}var NA,o3;function RE(){if(o3)return NA;o3=1;var i=sm(),o=1/0;function l(d){if(typeof d=="string"||i(d))return d;var g=d+"";return g=="0"&&1/d==-o?"-0":g}return NA=l,NA}var MA,a3;function JC(){if(a3)return MA;a3=1;var i=AB(),o=RE();function l(d,g){g=i(g,d);for(var S=0,b=g.length;d!=null&&S<b;)d=d[o(g[S++])];return S&&S==b?d:void 0}return MA=l,MA}var DA,s3;function HK(){if(s3)return DA;s3=1;var i=JC();function o(l,d,g){var S=l==null?void 0:i(l,d);return S===void 0?g:S}return DA=o,DA}var PA,u3;function VK(){if(u3)return PA;u3=1;function i(o,l){return o!=null&&l in Object(o)}return PA=i,PA}var OA,l3;function KK(){if(l3)return OA;l3=1;var i=AB(),o=KC(),l=Zs(),d=YC(),g=zC(),S=RE();function b(p,w,k){w=i(w,p);for(var C=-1,E=w.length,y=!1;++C<E;){var P=S(w[C]);if(!(y=p!=null&&k(p,P)))break;p=p[P]}return y||++C!=E?y:(E=p==null?0:p.length,!!E&&g(E)&&d(P,E)&&(l(p)||o(p)))}return OA=b,OA}var LA,c3;function zK(){if(c3)return LA;c3=1;var i=VK(),o=KK();function l(d,g){return d!=null&&o(d,g,i)}return LA=l,LA}var kA,f3;function YK(){if(f3)return kA;f3=1;var i=_B(),o=HK(),l=zK(),d=QC(),g=TB(),S=SB(),b=RE(),p=1,w=2;function k(C,E){return d(C)&&g(E)?S(b(C),E):function(y){var P=o(y,C);return P===void 0&&P===E?l(y,C):i(E,P,p|w)}}return kA=k,kA}var FA,d3;function WK(){if(d3)return FA;d3=1;function i(o){return function(l){return l==null?void 0:l[o]}}return FA=i,FA}var UA,h3;function $K(){if(h3)return UA;h3=1;var i=JC();function o(l){return function(d){return i(d,l)}}return UA=o,UA}var BA,p3;function XK(){if(p3)return BA;p3=1;var i=WK(),o=$K(),l=QC(),d=RE();function g(S){return l(S)?i(d(S)):o(S)}return BA=g,BA}var jA,g3;function eR(){if(g3)return jA;g3=1;var i=BK(),o=YK(),l=um(),d=Zs(),g=XK();function S(b){return typeof b=="function"?b:b==null?l:typeof b=="object"?d(b)?o(b[0],b[1]):i(b):g(b)}return jA=S,jA}var ZA,m3;function QK(){if(m3)return ZA;m3=1;var i=gB(),o=gK(),l=eR(),d=Zs();function g(S,b){var p=d(S)?i:o;return p(S,l(b,3))}return ZA=g,ZA}var qA,v3;function JK(){if(v3)return qA;v3=1;function i(o,l,d){var g;return d(o,function(S,b,p){if(l(S,b,p))return g=b,!1}),g}return qA=i,qA}var GA,y3;function ez(){if(y3)return GA;y3=1;var i=JK(),o=$C(),l=eR();function d(g,S){return i(g,l(S,3),o)}return GA=d,GA}var HA,E3;function tz(){if(E3)return HA;E3=1;function i(o){return o&&o.length?o[0]:void 0}return HA=i,HA}var VA,_3;function nz(){return _3||(_3=1,VA=tz()),VA}var KA,T3;function rz(){if(T3)return KA;T3=1;function i(o,l){for(var d=-1,g=o==null?0:o.length;++d<g&&l(o[d],d,o)!==!1;);return o}return KA=i,KA}var zA,S3;function IB(){if(S3)return zA;S3=1;var i=um();function o(l){return typeof l=="function"?l:i}return zA=o,zA}var YA,w3;function iz(){if(w3)return YA;w3=1;var i=rz(),o=XC(),l=IB(),d=Zs();function g(S,b){var p=d(S)?i:o;return p(S,l(b))}return YA=g,YA}var WA,A3;function oz(){if(A3)return WA;A3=1;var i=$C(),o=IB();function l(d,g){return d&&i(d,o(g))}return WA=l,WA}var $A,I3;function az(){if(I3)return $A;I3=1;function i(){}return $A=i,$A}var XA,b3;function sz(){if(b3)return XA;b3=1;var i=XC(),o=lm();function l(d,g){var S=-1,b=o(d)?Array(d.length):[];return i(d,function(p,w,k){b[++S]=g(p,w,k)}),b}return XA=l,XA}var QA,C3;function uz(){if(C3)return QA;C3=1;function i(o,l){var d=o.length;for(o.sort(l);d--;)o[d]=o[d].value;return o}return QA=i,QA}var JA,R3;function lz(){if(R3)return JA;R3=1;var i=sm();function o(l,d){if(l!==d){var g=l!==void 0,S=l===null,b=l===l,p=i(l),w=d!==void 0,k=d===null,C=d===d,E=i(d);if(!k&&!E&&!p&&l>d||p&&w&&C&&!k&&!E||S&&w&&C||!g&&C||!b)return 1;if(!S&&!p&&!E&&l<d||E&&g&&b&&!S&&!p||k&&g&&b||!w&&b||!C)return-1}return 0}return JA=o,JA}var eI,x3;function cz(){if(x3)return eI;x3=1;var i=lz();function o(l,d,g){for(var S=-1,b=l.criteria,p=d.criteria,w=b.length,k=g.length;++S<w;){var C=i(b[S],p[S]);if(C){if(S>=k)return C;var E=g[S];return C*(E=="desc"?-1:1)}}return l.index-d.index}return eI=o,eI}var tI,N3;function fz(){if(N3)return tI;N3=1;var i=HC(),o=JC(),l=eR(),d=sz(),g=uz(),S=VC(),b=cz(),p=um(),w=Zs();function k(C,E,y){E.length?E=i(E,function(T){return w(T)?function(U){return o(U,T.length===1?T[0]:T)}:T}):E=[p];var P=-1;E=i(E,S(l));var m=d(C,function(T,U,M){var _=i(E,function(I){return I(T)});return{criteria:_,index:++P,value:T}});return g(m,function(T,U){return b(T,U,y)})}return tI=k,tI}var nI,M3;function dz(){if(M3)return nI;M3=1;var i=ZC(),o=lm(),l=YC(),d=ff();function g(S,b,p){if(!d(p))return!1;var w=typeof b;return(w=="number"?o(p)&&l(b,p.length):w=="string"&&b in p)?i(p[b],S):!1}return nI=g,nI}var rI,D3;function hz(){if(D3)return rI;D3=1;var i=hB(),o=fz(),l=pB(),d=dz(),g=l(function(S,b){if(S==null)return[];var p=b.length;return p>1&&d(S,b[0],b[1])?b=[]:p>2&&d(b[0],b[1],b[2])&&(b=[b[0]]),o(S,i(b,1),[])});return rI=g,rI}var iI,P3;function pz(){if(P3)return iI;P3=1;var i=sB(),o=ff(),l="Expected a function";function d(g,S,b){var p=!0,w=!0;if(typeof g!="function")throw new TypeError(l);return o(b)&&(p="leading"in b?!!b.leading:p,w="trailing"in b?!!b.trailing:w),i(g,S,{leading:p,maxWait:S,trailing:w})}return iI=d,iI}var oI,O3;function gz(){if(O3)return oI;O3=1;var i=wB(),o=0;function l(d){var g=++o;return i(d)+g}return oI=l,oI}(function(i,o){(function(l,d){i.exports=d(sB(),nK(),QK(),ez(),nz(),iz(),oz(),az(),hz(),pz(),gz(),In)})(fu,function(l,d,g,S,b,p,w,k,C,E,y,P){return function(){var m={654:function(U,M,_){var I,x=this&&this.__assign||function(){return x=Object.assign||function(Re){for(var ne,Ue=1,L=arguments.length;Ue<L;Ue++)for(var D in ne=arguments[Ue])Object.prototype.hasOwnProperty.call(ne,D)&&(Re[D]=ne[D]);return Re},x.apply(this,arguments)},Z=this&&this.__createBinding||(Object.create?function(Re,ne,Ue,L){L===void 0&&(L=Ue);var D=Object.getOwnPropertyDescriptor(ne,Ue);D&&!("get"in D?!ne.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return ne[Ue]}}),Object.defineProperty(Re,L,D)}:function(Re,ne,Ue,L){L===void 0&&(L=Ue),Re[L]=ne[Ue]}),Y=this&&this.__setModuleDefault||(Object.create?function(Re,ne){Object.defineProperty(Re,"default",{enumerable:!0,value:ne})}:function(Re,ne){Re.default=ne}),$=this&&this.__importStar||function(Re){if(Re&&Re.__esModule)return Re;var ne={};if(Re!=null)for(var Ue in Re)Ue!=="default"&&Object.prototype.hasOwnProperty.call(Re,Ue)&&Z(ne,Re,Ue);return Y(ne,Re),ne},Q=this&&this.__spreadArray||function(Re,ne,Ue){if(Ue||arguments.length===2)for(var L,D=0,G=ne.length;D<G;D++)!L&&D in ne||(L||(L=Array.prototype.slice.call(ne,0,D)),L[D]=ne[D]);return Re.concat(L||Array.prototype.slice.call(ne))},se=this&&this.__importDefault||function(Re){return Re&&Re.__esModule?Re:{default:Re}};Object.defineProperty(M,"__esModule",{value:!0}),M.doesFocusableExist=M.getCurrentFocusKey=M.updateAllLayouts=M.resume=M.pause=M.navigateByDirection=M.setFocus=M.setKeyMap=M.destroy=M.setThrottle=M.init=M.SpatialNavigation=M.ROOT_FOCUS_KEY=void 0;var R=se(_(150)),X=se(_(117)),ce=se(_(747)),oe=se(_(23)),ye=se(_(842)),be=se(_(682)),Xe=se(_(784)),Ie=se(_(432)),Ge=se(_(67)),at=se(_(35)),ft=se(_(119)),We=$(_(964)),ut="left",At="right",Ne="up",et="down",dt="enter",rn=((I={}).left=[37,"ArrowLeft"],I.up=[38,"ArrowUp"],I.right=[39,"ArrowRight"],I.down=[40,"ArrowDown"],I.enter=[13,"Enter"],I);M.ROOT_FOCUS_KEY="SN:ROOT";var Yt=["#0FF","#FF0","#F0F"],St={leading:!0,trailing:!1},kt=function(){function Re(){this.focusableComponents={},this.focusKey=null,this.parentsHavingFocusedChild=[],this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.useGetBoundingClientRect=!1,this.shouldFocusDOMNode=!1,this.shouldUseNativeEvents=!1,this.writingDirection=ft.default.LTR,this.pressedKeys={},this.paused=!1,this.keyDownEventListener=null,this.keyUpEventListener=null,this.keyMap=rn,this.onKeyEvent=this.onKeyEvent.bind(this),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.setFocus=this.setFocus.bind(this),this.updateAllLayouts=this.updateAllLayouts.bind(this),this.navigateByDirection=this.navigateByDirection.bind(this),this.init=this.init.bind(this),this.setThrottle=this.setThrottle.bind(this),this.destroy=this.destroy.bind(this),this.setKeyMap=this.setKeyMap.bind(this),this.getCurrentFocusKey=this.getCurrentFocusKey.bind(this),this.doesFocusableExist=this.doesFocusableExist.bind(this),this.setFocusDebounced=(0,R.default)(this.setFocus,300,{leading:!1,trailing:!0}),this.debug=!1,this.visualDebugger=null,this.logIndex=0}return Re.getCutoffCoordinate=function(ne,Ue,L,D,G){var K=ne?D.top:G===ft.default.LTR?D.left:D.right,ge=ne?D.bottom:G===ft.default.LTR?D.right:D.left;return Ue?L?K:ge:L?ge:K},Re.getRefCorners=function(ne,Ue,L){var D={a:{x:0,y:0},b:{x:0,y:0}};switch(ne){case Ne:var G=Ue?L.bottom:L.top;D.a={x:L.left,y:G},D.b={x:L.right,y:G};break;case et:G=Ue?L.top:L.bottom,D.a={x:L.left,y:G},D.b={x:L.right,y:G};break;case ut:var K=Ue?L.right:L.left;D.a={x:K,y:L.top},D.b={x:K,y:L.bottom};break;case At:K=Ue?L.left:L.right,D.a={x:K,y:L.top},D.b={x:K,y:L.bottom}}return D},Re.isAdjacentSlice=function(ne,Ue,L){var D=ne.a,G=ne.b,K=Ue.a,ge=Ue.b,de=L?"x":"y",He=D[de],Tt=G[de],st=K[de],ot=ge[de],tt=.2*(Tt-He);return Math.max(0,Math.min(Tt,ot)-Math.max(He,st))>=tt},Re.getPrimaryAxisDistance=function(ne,Ue,L){var D=ne.a,G=Ue.a,K=L?"y":"x";return Math.abs(G[K]-D[K])},Re.getSecondaryAxisDistance=function(ne,Ue,L){var D=ne.a,G=ne.b,K=Ue.a,ge=Ue.b,de=L?"x":"y",He=D[de],Tt=G[de],st=K[de],ot=ge[de],tt=[];return tt.push(Math.abs(st-He)),tt.push(Math.abs(st-Tt)),tt.push(Math.abs(ot-He)),tt.push(Math.abs(ot-Tt)),Math.min.apply(Math,tt)},Re.prototype.sortSiblingsByPriority=function(ne,Ue,L,D){var G=this,K=L===et||L===Ne,ge=Re.getRefCorners(L,!1,Ue);return(0,Ie.default)(ne,function(de){var He=Re.getRefCorners(L,!0,de.layout),Tt=Re.isAdjacentSlice(ge,He,K),st=Tt?Re.getPrimaryAxisDistance:Re.getSecondaryAxisDistance,ot=Tt?Re.getSecondaryAxisDistance:Re.getPrimaryAxisDistance,tt=st(ge,He,K),ht=ot(ge,He,K),yt=5*tt+ht,Et=(yt+1)/(Tt?5:1);return G.log("smartNavigate","distance (primary, secondary, total weighted) for ".concat(de.focusKey," relative to ").concat(D," is"),tt,ht,yt),G.log("smartNavigate","priority for ".concat(de.focusKey," relative to ").concat(D," is"),Et),G.visualDebugger&&(G.visualDebugger.drawPoint(He.a.x,He.a.y,"yellow",6),G.visualDebugger.drawPoint(He.b.x,He.b.y,"yellow",6)),Et})},Re.prototype.init=function(ne){var Ue=ne===void 0?{}:ne,L=Ue.debug,D=L!==void 0&&L,G=Ue.visualDebug,K=G!==void 0&&G,ge=Ue.nativeMode,de=ge!==void 0&&ge,He=Ue.throttle,Tt=He===void 0?0:He,st=Ue.throttleKeypresses,ot=st!==void 0&&st,tt=Ue.useGetBoundingClientRect,ht=tt!==void 0&&tt,yt=Ue.shouldFocusDOMNode,Et=yt!==void 0&&yt,Mt=Ue.shouldUseNativeEvents,_n=Mt!==void 0&&Mt,nn=Ue.rtl,cn=nn!==void 0&&nn;this.enabled||(this.enabled=!0,this.nativeMode=de,this.throttleKeypresses=ot,this.useGetBoundingClientRect=ht,this.shouldFocusDOMNode=Et&&!de,this.shouldUseNativeEvents=_n,this.writingDirection=cn?ft.default.RTL:ft.default.LTR,this.debug=D,this.nativeMode||(Number.isInteger(Tt)&&Tt>0&&(this.throttle=Tt),this.bindEventHandlers(),K&&(this.visualDebugger=new at.default(this.writingDirection),this.startDrawLayouts())))},Re.prototype.setThrottle=function(ne){var Ue=ne===void 0?{}:ne,L=Ue.throttle,D=L===void 0?0:L,G=Ue.throttleKeypresses,K=G!==void 0&&G;this.throttleKeypresses=K,this.nativeMode||(this.unbindEventHandlers(),Number.isInteger(D)&&(this.throttle=D),this.bindEventHandlers())},Re.prototype.startDrawLayouts=function(){var ne=this,Ue=function(){requestAnimationFrame(function(){ne.visualDebugger.clearLayouts(),(0,Xe.default)(ne.focusableComponents,function(L,D){ne.visualDebugger.drawLayout(L.layout,D,L.parentFocusKey)}),Ue()})};Ue()},Re.prototype.destroy=function(){this.enabled&&(this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.focusKey=null,this.parentsHavingFocusedChild=[],this.focusableComponents={},this.paused=!1,this.keyMap=rn,this.unbindEventHandlers())},Re.prototype.getEventType=function(ne){return(0,oe.default)(this.getKeyMap(),function(Ue){return Ue.includes(ne)})},Re.getKeyCode=function(ne){return ne.keyCode||ne.code},Re.prototype.bindEventHandlers=function(){var ne=this;typeof window<"u"&&window.addEventListener&&(this.keyDownEventListener=function(Ue){if(ne.paused!==!0){ne.debug&&(ne.logIndex+=1);var L=Re.getKeyCode(Ue),D=ne.getEventType(L);if(D){ne.pressedKeys[D]=ne.pressedKeys[D]?ne.pressedKeys[D]+1:1,ne.shouldUseNativeEvents||(Ue.preventDefault(),Ue.stopPropagation());var G={pressedKeys:ne.pressedKeys};D===dt&&ne.focusKey?ne.onEnterPress(G):ne.onArrowPress(D,G)===!1?(ne.log("keyDownEventListener","default navigation prevented"),ne.visualDebugger&&ne.visualDebugger.clear()):ne.onKeyEvent(Ue)}}},this.throttle&&(this.keyDownEventListenerThrottled=(0,Ge.default)(this.keyDownEventListener.bind(this),this.throttle,St)),this.keyUpEventListener=function(Ue){var L=Re.getKeyCode(Ue),D=ne.getEventType(L);delete ne.pressedKeys[D],ne.throttle&&!ne.throttleKeypresses&&ne.keyDownEventListenerThrottled.cancel(),D===dt&&ne.focusKey&&ne.onEnterRelease()},window.addEventListener("keyup",this.keyUpEventListener),window.addEventListener("keydown",this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener))},Re.prototype.unbindEventHandlers=function(){if(typeof window<"u"&&window.removeEventListener){window.removeEventListener("keyup",this.keyUpEventListener),this.keyUpEventListener=null;var ne=this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener;window.removeEventListener("keydown",ne),this.keyDownEventListener=null}},Re.prototype.onEnterPress=function(ne){var Ue=this.focusableComponents[this.focusKey];Ue?Ue.focusable?Ue.onEnterPress&&Ue.onEnterPress(ne):this.log("onEnterPress","componentNotFocusable"):this.log("onEnterPress","noComponent")},Re.prototype.onEnterRelease=function(){var ne=this.focusableComponents[this.focusKey];ne?ne.focusable?ne.onEnterRelease&&ne.onEnterRelease():this.log("onEnterRelease","componentNotFocusable"):this.log("onEnterRelease","noComponent")},Re.prototype.onArrowPress=function(ne,Ue){var L=this.focusableComponents[this.focusKey];if(L)return L&&L.onArrowPress&&L.onArrowPress(ne,Ue);this.log("onArrowPress","noComponent")},Re.prototype.navigateByDirection=function(ne,Ue){if(this.paused!==!0&&this.enabled&&!this.nativeMode){var L=[et,Ne,ut,At];L.includes(ne)?(this.log("navigateByDirection","direction",ne),this.smartNavigate(ne,null,Ue)):this.log("navigateByDirection","Invalid direction. You passed: `".concat(ne,"`, but you can use only these: "),L)}},Re.prototype.onKeyEvent=function(ne){this.visualDebugger&&this.visualDebugger.clear();var Ue=Re.getKeyCode(ne),L=(0,oe.default)(this.getKeyMap(),function(D){return D.includes(Ue)});this.smartNavigate(L,null,{event:ne})},Re.prototype.smartNavigate=function(ne,Ue,L){var D=this;if(!this.nativeMode){var G=ne===et||ne===Ne,K=ne===et||(this.writingDirection===ft.default.LTR?ne===At:ne===ut);this.log("smartNavigate","direction",ne),this.log("smartNavigate","fromParentFocusKey",Ue),this.log("smartNavigate","this.focusKey",this.focusKey),Ue||(0,Xe.default)(this.focusableComponents,function(_n){_n.layoutUpdated=!1});var ge=this.focusableComponents[Ue||this.focusKey];if(Ue||ge){if(this.log("smartNavigate","currentComponent",ge?ge.focusKey:void 0,ge?ge.node:void 0,ge),ge){this.updateLayout(ge.focusKey);var de=ge.parentFocusKey,He=ge.focusKey,Tt=ge.layout,st=Re.getCutoffCoordinate(G,K,!1,Tt,this.writingDirection),ot=(0,ce.default)(this.focusableComponents,function(_n){if(_n.parentFocusKey===de&&_n.focusable){D.updateLayout(_n.focusKey);var nn=Re.getCutoffCoordinate(G,K,!0,_n.layout,D.writingDirection);return G||D.writingDirection===ft.default.LTR?K?nn>=st:nn<=st:K?nn<=st:nn>=st}return!1});if(this.debug&&(this.log("smartNavigate","currentCutoffCoordinate",st),this.log("smartNavigate","siblings","".concat(ot.length," elements:"),ot.map(function(_n){return _n.focusKey}).join(", "),ot.map(function(_n){return _n.node}),ot.map(function(_n){return _n}))),this.visualDebugger){var tt=Re.getRefCorners(ne,!1,Tt);this.visualDebugger.drawPoint(tt.a.x,tt.a.y),this.visualDebugger.drawPoint(tt.b.x,tt.b.y)}var ht=this.sortSiblingsByPriority(ot,Tt,ne,He),yt=(0,ye.default)(ht);if(this.log("smartNavigate","nextComponent",yt?yt.focusKey:void 0,yt?yt.node:void 0,yt),yt)this.setFocus(yt.focusKey,L);else{var Et=this.focusableComponents[de],Mt=Et!=null&&Et.isFocusBoundary?Et.focusBoundaryDirections||[ne]:[];Et&&Mt.includes(ne)||this.smartNavigate(ne,de,L)}}}else this.setFocus(this.getForcedFocusKey())}},Re.prototype.saveLastFocusedChildKey=function(ne,Ue){ne&&(this.log("saveLastFocusedChildKey","".concat(ne.focusKey," lastFocusedChildKey set"),Ue),ne.lastFocusedChildKey=Ue)},Re.prototype.log=function(ne,Ue){for(var L=[],D=2;D<arguments.length;D++)L[D-2]=arguments[D];this.debug&&console.log.apply(console,Q(["%c".concat(ne,"%c").concat(Ue),"background: ".concat(Yt[this.logIndex%Yt.length],"; color: black; padding: 1px 5px;"),"background: #333; color: #BADA55; padding: 1px 5px;"],L,!1))},Re.prototype.getCurrentFocusKey=function(){return this.focusKey},Re.prototype.getForcedFocusKey=function(){var ne,Ue=(0,ce.default)(this.focusableComponents,function(D){return D.focusable&&D.forceFocus}),L=this.sortSiblingsByPriority(Ue,{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:null},"down",M.ROOT_FOCUS_KEY);return(ne=(0,ye.default)(L))===null||ne===void 0?void 0:ne.focusKey},Re.prototype.getNextFocusKey=function(ne){var Ue=this,L=this.focusableComponents[ne];if(!L||this.nativeMode)return ne;var D=(0,ce.default)(this.focusableComponents,function(de){return de.parentFocusKey===ne&&de.focusable});if(D.length>0){var G=L.lastFocusedChildKey,K=L.preferredChildFocusKey;if(this.log("getNextFocusKey","lastFocusedChildKey is",G),this.log("getNextFocusKey","preferredChildFocusKey is",K),G&&L.saveLastFocusedChild&&this.isParticipatingFocusableComponent(G))return this.log("getNextFocusKey","lastFocusedChildKey will be focused",G),this.getNextFocusKey(G);if(K&&this.isParticipatingFocusableComponent(K))return this.log("getNextFocusKey","preferredChildFocusKey will be focused",K),this.getNextFocusKey(K);D.forEach(function(de){return Ue.updateLayout(de.focusKey)});var ge=function(de,He){var Tt=He===ft.default.LTR?function(ot){var tt=ot.layout;return Math.abs(tt.left)+Math.abs(tt.top)}:function(ot){var tt=ot.layout;return Math.abs(window.innerWidth-tt.right)+Math.abs(tt.top)},st=(0,Ie.default)(de,Tt);return(0,ye.default)(st)}(D,this.writingDirection).focusKey;return this.log("getNextFocusKey","childKey will be focused",ge),this.getNextFocusKey(ge)}return this.log("getNextFocusKey","targetFocusKey",ne),ne},Re.prototype.addFocusable=function(ne){var Ue=ne.focusKey,L=ne.node,D=ne.parentFocusKey,G=ne.onEnterPress,K=ne.onEnterRelease,ge=ne.onArrowPress,de=ne.onFocus,He=ne.onBlur,Tt=ne.saveLastFocusedChild,st=ne.trackChildren,ot=ne.onUpdateFocus,tt=ne.onUpdateHasFocusedChild,ht=ne.preferredChildFocusKey,yt=ne.autoRestoreFocus,Et=ne.forceFocus,Mt=ne.focusable,_n=ne.isFocusBoundary,nn=ne.focusBoundaryDirections;if(this.focusableComponents[Ue]={focusKey:Ue,node:L,parentFocusKey:D,onEnterPress:G,onEnterRelease:K,onArrowPress:ge,onFocus:de,onBlur:He,onUpdateFocus:ot,onUpdateHasFocusedChild:tt,saveLastFocusedChild:Tt,trackChildren:st,preferredChildFocusKey:ht,focusable:Mt,isFocusBoundary:_n,focusBoundaryDirections:nn,autoRestoreFocus:yt,forceFocus:Et,lastFocusedChildKey:null,layout:{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:L},layoutUpdated:!1},L||console.warn('Component added without a node reference. This will result in its coordinates being empty and may cause lost focus. Check the "ref" passed to "useFocusable": ',this.focusableComponents[Ue]),!this.nativeMode){this.updateLayout(Ue),this.log("addFocusable","Component added: ",this.focusableComponents[Ue]),Ue===this.focusKey&&this.setFocus(ht||Ue);for(var cn=this.focusableComponents[this.focusKey];cn;){if(cn.parentFocusKey===Ue){this.updateParentsHasFocusedChild(this.focusKey,{}),this.updateParentsLastFocusedChild(this.focusKey);break}cn=this.focusableComponents[cn.parentFocusKey]}}},Re.prototype.removeFocusable=function(ne){var Ue=ne.focusKey,L=this.focusableComponents[Ue];if(L){var D=L.parentFocusKey;(0,L.onUpdateFocus)(!1),this.log("removeFocusable","Component removed: ",L),delete this.focusableComponents[Ue];var G=this.parentsHavingFocusedChild.includes(Ue);this.parentsHavingFocusedChild=this.parentsHavingFocusedChild.filter(function(de){return de!==Ue});var K=this.focusableComponents[D],ge=Ue===this.focusKey;if(K&&K.lastFocusedChildKey===Ue&&(K.lastFocusedChildKey=null),this.nativeMode)return;(ge||G)&&K&&K.autoRestoreFocus&&(this.log("removeFocusable","Component removed: ",ge?"Leaf component":"Container component","Auto restoring focus to: ",D),this.setFocusDebounced(D))}},Re.prototype.getNodeLayoutByFocusKey=function(ne){var Ue=this.focusableComponents[ne];return Ue?(this.updateLayout(Ue.focusKey),Ue.layout):null},Re.prototype.setCurrentFocusedKey=function(ne,Ue){if(this.isFocusableComponent(this.focusKey)&&ne!==this.focusKey){var L=this.focusableComponents[this.focusKey];L.onUpdateFocus(!1),L.onBlur(this.getNodeLayoutByFocusKey(this.focusKey),Ue),this.log("setCurrentFocusedKey","onBlur",L)}if(this.focusKey=ne,this.isFocusableComponent(this.focusKey)){var D=this.focusableComponents[this.focusKey];this.shouldFocusDOMNode&&D.node&&D.node.focus(),D.onUpdateFocus(!0),D.onFocus(this.getNodeLayoutByFocusKey(this.focusKey),Ue),this.log("setCurrentFocusedKey","onFocus",D)}},Re.prototype.updateParentsHasFocusedChild=function(ne,Ue){for(var L=this,D=[],G=this.focusableComponents[ne];G;){var K=G.parentFocusKey,ge=this.focusableComponents[K];if(ge){var de=ge.focusKey;D.push(de)}G=ge}var He=(0,X.default)(this.parentsHavingFocusedChild,D),Tt=(0,X.default)(D,this.parentsHavingFocusedChild);(0,be.default)(He,function(st){var ot=L.focusableComponents[st];ot&&ot.trackChildren&&ot.onUpdateHasFocusedChild(!1),L.onIntermediateNodeBecameBlurred(st,Ue)}),(0,be.default)(Tt,function(st){var ot=L.focusableComponents[st];ot&&ot.trackChildren&&ot.onUpdateHasFocusedChild(!0),L.onIntermediateNodeBecameFocused(st,Ue)}),this.parentsHavingFocusedChild=D},Re.prototype.updateParentsLastFocusedChild=function(ne){for(var Ue=this.focusableComponents[ne];Ue;){var L=Ue.parentFocusKey,D=this.focusableComponents[L];D&&this.saveLastFocusedChildKey(D,Ue.focusKey),Ue=D}},Re.prototype.getKeyMap=function(){return this.keyMap},Re.prototype.setKeyMap=function(ne){this.keyMap=x(x({},this.getKeyMap()),function(Ue){var L={};return Object.entries(Ue).forEach(function(D){var G=D[0],K=D[1];L[G]=Array.isArray(K)?K:[K]}),L}(ne))},Re.prototype.isFocusableComponent=function(ne){return!!this.focusableComponents[ne]},Re.prototype.isParticipatingFocusableComponent=function(ne){return this.isFocusableComponent(ne)&&this.focusableComponents[ne].focusable},Re.prototype.onIntermediateNodeBecameFocused=function(ne,Ue){this.isParticipatingFocusableComponent(ne)&&this.focusableComponents[ne].onFocus(this.getNodeLayoutByFocusKey(ne),Ue)},Re.prototype.onIntermediateNodeBecameBlurred=function(ne,Ue){this.isParticipatingFocusableComponent(ne)&&this.focusableComponents[ne].onBlur(this.getNodeLayoutByFocusKey(ne),Ue)},Re.prototype.pause=function(){this.paused=!0},Re.prototype.resume=function(){this.paused=!1},Re.prototype.setFocus=function(ne,Ue){if(Ue===void 0&&(Ue={}),this.setFocusDebounced.cancel(),this.enabled&&!this.nativeMode){this.log("setFocus","focusKey",ne),ne&&ne!==M.ROOT_FOCUS_KEY||(ne=this.getForcedFocusKey());var L=this.getNextFocusKey(ne);this.log("setFocus","newFocusKey",L),this.setCurrentFocusedKey(L,Ue),this.updateParentsHasFocusedChild(L,Ue),this.updateParentsLastFocusedChild(L)}},Re.prototype.updateAllLayouts=function(){var ne=this;this.enabled&&!this.nativeMode&&(0,Xe.default)(this.focusableComponents,function(Ue,L){ne.updateLayout(L)})},Re.prototype.updateLayout=function(ne){var Ue=this.focusableComponents[ne];if(Ue&&!this.nativeMode&&!Ue.layoutUpdated){var L=Ue.node,D=this.useGetBoundingClientRect?(0,We.getBoundingClientRect)(L):(0,We.default)(L);Ue.layout=x(x({},D),{node:L})}},Re.prototype.updateFocusable=function(ne,Ue){var L=Ue.node,D=Ue.preferredChildFocusKey,G=Ue.focusable,K=Ue.isFocusBoundary,ge=Ue.focusBoundaryDirections,de=Ue.onEnterPress,He=Ue.onEnterRelease,Tt=Ue.onArrowPress,st=Ue.onFocus,ot=Ue.onBlur;if(!this.nativeMode){var tt=this.focusableComponents[ne];tt&&(tt.preferredChildFocusKey=D,tt.focusable=G,tt.isFocusBoundary=K,tt.focusBoundaryDirections=ge,tt.onEnterPress=de,tt.onEnterRelease=He,tt.onArrowPress=Tt,tt.onFocus=st,tt.onBlur=ot,L&&(tt.node=L))}},Re.prototype.isNativeMode=function(){return this.nativeMode},Re.prototype.doesFocusableExist=function(ne){return!!this.focusableComponents[ne]},Re}();M.SpatialNavigation=new kt,M.init=M.SpatialNavigation.init,M.setThrottle=M.SpatialNavigation.setThrottle,M.destroy=M.SpatialNavigation.destroy,M.setKeyMap=M.SpatialNavigation.setKeyMap,M.setFocus=M.SpatialNavigation.setFocus,M.navigateByDirection=M.SpatialNavigation.navigateByDirection,M.pause=M.SpatialNavigation.pause,M.resume=M.SpatialNavigation.resume,M.updateAllLayouts=M.SpatialNavigation.updateAllLayouts,M.getCurrentFocusKey=M.SpatialNavigation.getCurrentFocusKey,M.doesFocusableExist=M.SpatialNavigation.doesFocusableExist},35:function(U,M,_){var I=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(M,"__esModule",{value:!0});var x=I(_(119)),Z=typeof window<"u"&&window.document,Y=Z?window.innerWidth:0,$=Z?window.innerHeight:0,Q=function(){function se(R){Z&&(this.debugCtx=se.createCanvas("sn-debug","1010",R),this.layoutsCtx=se.createCanvas("sn-layouts","1000",R),this.writingDirection=R)}return se.createCanvas=function(R,X,ce){var oe=document.querySelector("#".concat(R))||document.createElement("canvas");oe.setAttribute("id",R),oe.setAttribute("dir",ce===x.default.LTR?"ltr":"rtl");var ye=oe.getContext("2d");return oe.style.zIndex=X,oe.style.position="fixed",oe.style.top="0",oe.style.left="0",document.body.appendChild(oe),oe.width=Y,oe.height=$,ye},se.prototype.clear=function(){Z&&this.debugCtx.clearRect(0,0,Y,$)},se.prototype.clearLayouts=function(){Z&&this.layoutsCtx.clearRect(0,0,Y,$)},se.prototype.drawLayout=function(R,X,ce){if(Z){this.layoutsCtx.strokeStyle="green",this.layoutsCtx.strokeRect(R.left,R.top,R.width,R.height),this.layoutsCtx.font="8px monospace",this.layoutsCtx.fillStyle="red";var oe=this.writingDirection===x.default.LTR?"left":"right",ye=R[oe];this.layoutsCtx.fillText(X,ye,R.top+10),this.layoutsCtx.fillText(ce,ye,R.top+25),this.layoutsCtx.fillText("".concat(oe,": ").concat(ye),ye,R.top+40),this.layoutsCtx.fillText("top: ".concat(R.top),ye,R.top+55)}},se.prototype.drawPoint=function(R,X,ce,oe){ce===void 0&&(ce="blue"),oe===void 0&&(oe=10),Z&&(this.debugCtx.strokeStyle=ce,this.debugCtx.lineWidth=3,this.debugCtx.strokeRect(R-oe/2,X-oe/2,oe,oe))},se}();M.default=Q},119:function(U,M){var _;Object.defineProperty(M,"__esModule",{value:!0}),function(I){I[I.LTR=0]="LTR",I[I.RTL=1]="RTL"}(_||(_={})),M.default=_},607:function(U,M,_){var I=this&&this.__createBinding||(Object.create?function(Z,Y,$,Q){Q===void 0&&(Q=$);var se=Object.getOwnPropertyDescriptor(Y,$);se&&!("get"in se?!Y.__esModule:se.writable||se.configurable)||(se={enumerable:!0,get:function(){return Y[$]}}),Object.defineProperty(Z,Q,se)}:function(Z,Y,$,Q){Q===void 0&&(Q=$),Z[Q]=Y[$]}),x=this&&this.__exportStar||function(Z,Y){for(var $ in Z)$==="default"||Object.prototype.hasOwnProperty.call(Y,$)||I(Y,Z,$)};Object.defineProperty(M,"__esModule",{value:!0}),x(_(79),M),x(_(445),M),x(_(654),M)},964:function(U,M){Object.defineProperty(M,"__esModule",{value:!0}),M.getBoundingClientRect=void 0;var _=function(I){for(var x=I.offsetParent,Z=I.offsetHeight,Y=I.offsetWidth,$=I.offsetLeft,Q=I.offsetTop;x&&x.nodeType===1;)$+=x.offsetLeft-x.scrollLeft,Q+=x.offsetTop-x.scrollTop,x=x.offsetParent;return{height:Z,left:$,top:Q,width:Y}};M.default=function(I){var x=I&&I.parentElement;if(I&&x){var Z=_(x),Y=_(I),$=Y.height,Q=Y.left,se=Y.top,R=Y.width;return{x:Q-Z.left,y:se-Z.top,width:R,height:$,left:Q,top:se,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}},M.getBoundingClientRect=function(I){if(I&&I.getBoundingClientRect){var x=I.getBoundingClientRect();return{x:x.x,y:x.y,width:x.width,height:x.height,left:x.left,top:x.top,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}}},445:function(U,M,_){Object.defineProperty(M,"__esModule",{value:!0}),M.useFocusContext=M.FocusContext=void 0;var I=_(156),x=_(654);M.FocusContext=(0,I.createContext)(x.ROOT_FOCUS_KEY),M.FocusContext.displayName="FocusContext",M.useFocusContext=function(){return(0,I.useContext)(M.FocusContext)}},79:function(U,M,_){var I=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(M,"__esModule",{value:!0}),M.useFocusable=void 0;var x=_(156),Z=I(_(604)),Y=I(_(461)),$=_(654),Q=_(445);M.useFocusable=function(se){var R=se===void 0?{}:se,X=R.focusable,ce=X===void 0||X,oe=R.saveLastFocusedChild,ye=oe===void 0||oe,be=R.trackChildren,Xe=be!==void 0&&be,Ie=R.autoRestoreFocus,Ge=Ie===void 0||Ie,at=R.forceFocus,ft=at!==void 0&&at,We=R.isFocusBoundary,ut=We!==void 0&&We,At=R.focusBoundaryDirections,Ne=R.focusKey,et=R.preferredChildFocusKey,dt=R.onEnterPress,rn=dt===void 0?Z.default:dt,Yt=R.onEnterRelease,St=Yt===void 0?Z.default:Yt,kt=R.onArrowPress,Re=kt===void 0?function(){return!0}:kt,ne=R.onFocus,Ue=ne===void 0?Z.default:ne,L=R.onBlur,D=L===void 0?Z.default:L,G=R.extraProps,K=(0,x.useCallback)(function(Ft){rn(G,Ft)},[rn,G]),ge=(0,x.useCallback)(function(){St(G)},[St,G]),de=(0,x.useCallback)(function(Ft,Gn){return Re(Ft,G,Gn)},[G,Re]),He=(0,x.useCallback)(function(Ft,Gn){Ue(Ft,G,Gn)},[G,Ue]),Tt=(0,x.useCallback)(function(Ft,Gn){D(Ft,G,Gn)},[G,D]),st=(0,x.useRef)(null),ot=(0,x.useState)(!1),tt=ot[0],ht=ot[1],yt=(0,x.useState)(!1),Et=yt[0],Mt=yt[1],_n=(0,Q.useFocusContext)(),nn=(0,x.useMemo)(function(){return Ne||(0,Y.default)("sn:focusable-item-")},[Ne]),cn=(0,x.useCallback)(function(Ft){Ft===void 0&&(Ft={}),$.SpatialNavigation.setFocus(nn,Ft)},[nn]);return(0,x.useEffect)(function(){var Ft=st.current;return $.SpatialNavigation.addFocusable({focusKey:nn,node:Ft,parentFocusKey:_n,preferredChildFocusKey:et,onEnterPress:K,onEnterRelease:ge,onArrowPress:de,onFocus:He,onBlur:Tt,onUpdateFocus:function(Gn){return Gn===void 0&&(Gn=!1),ht(Gn)},onUpdateHasFocusedChild:function(Gn){return Gn===void 0&&(Gn=!1),Mt(Gn)},saveLastFocusedChild:ye,trackChildren:Xe,isFocusBoundary:ut,focusBoundaryDirections:At,autoRestoreFocus:Ge,forceFocus:ft,focusable:ce}),function(){$.SpatialNavigation.removeFocusable({focusKey:nn})}},[]),(0,x.useEffect)(function(){var Ft=st.current;$.SpatialNavigation.updateFocusable(nn,{node:Ft,preferredChildFocusKey:et,focusable:ce,isFocusBoundary:ut,focusBoundaryDirections:At,onEnterPress:K,onEnterRelease:ge,onArrowPress:de,onFocus:He,onBlur:Tt})},[nn,et,ce,ut,At,K,ge,de,He,Tt]),{ref:st,focusSelf:cn,focused:tt,hasFocusedChild:Et,focusKey:nn}}},150:function(U){U.exports=l},117:function(U){U.exports=d},747:function(U){U.exports=g},23:function(U){U.exports=S},842:function(U){U.exports=b},682:function(U){U.exports=p},784:function(U){U.exports=w},604:function(U){U.exports=k},432:function(U){U.exports=C},67:function(U){U.exports=E},461:function(U){U.exports=y},156:function(U){U.exports=P}},T={};return function U(M){var _=T[M];if(_!==void 0)return _.exports;var I=T[M]={exports:{}};return m[M].call(I.exports,I,I.exports,U),I.exports}(607)}()})})(oB);var bB=oB.exports;function mz(i){return{all:i=i||new Map,on:function(o,l){var d=i.get(o);d?d.push(l):i.set(o,[l])},off:function(o,l){var d=i.get(o);d&&(l?d.splice(d.indexOf(l)>>>0,1):i.set(o,[]))},emit:function(o,l){var d=i.get(o);d&&d.slice().map(function(g){g(l)}),(d=i.get("*"))&&d.slice().map(function(g){g(o,l)})}}}class hf{constructor(){this.emitter=mz()}emit(o,l){this.emitter.emit(o,l)}on(o,l){var d;(d=this.emitter)==null||d.on(o,l)}once(o,l){var g;const d=S=>{var b;(b=this.emitter)==null||b.off(o,d),l(S)};(g=this.emitter)==null||g.on(o,d)}off(o,l){var d;(d=this.emitter)==null||d.off(o,l)}onAny(o){this.emitter.on("*",o)}offAny(o){this.emitter.off("*",o)}clearAllListeners(){this.emitter.all.clear()}destroy(){this.clearAllListeners()}}var $c=256,CB=[],L3=256,s0;for(;$c--;)CB[$c]=($c+256).toString(16).substring(1);function vz(i){var o=0,l=11;if(!s0||$c+l>L3*2)for(s0="",$c=0;o<L3;o++)s0+=CB[Math.random()*256|0];return s0.substring($c,$c+++l)}const k3={DEVICE_ID:"deviceId"};function Mg(){const i=localStorage.getItem(k3.DEVICE_ID);if(i)return i;const o=vz();return localStorage.setItem(k3.DEVICE_ID,o),o}function yz(i){i=[...i].sort((l,d)=>l-d);const o=Math.floor(i.length/2);return i.length%2?i[o]:(i[o-1]+i[o])/2}var cs=(i=>(i.NEGOTIATE="negotiate",i.NEGOTIATE_TV="negotiate-tv",i.EVENT_STATUS="eventStatus",i.EVENT_META="eventMeta",i.GENERATE="generate",i.CONTENTFUL="contentful",i))(cs||{});class cg extends Error{constructor(o,l,d,g){super(),this._name=o,this._title=l,this._code=g,this._message=d}get toString(){var o,l;return"".concat(this._name.toUpperCase()," ERROR - ").concat((o=this._title.toUpperCase())!=null?o:""," ").concat((l=this._code)!=null?l:"",": ").concat(this.message)}get name(){return this._name}set name(o){this._name=o}get message(){return this._message}set message(o){this._message=o}get title(){return this._title}set title(o){this._title=o}get code(){return this._code}set code(o){this._code=o}}const vh=Mg(),Ez="https://staging-api.gigset.io",tE="new",_z="68HZuoF2PhOm4zHAJzDcwGnqUeph2JA_G9M7vW8-mbw",Tz="v203lmr0b15v",tR="setup-device-id",Sz="_appContainer_1isul_1",wz="_pageContainer_1isul_53",Az="_input_1isul_67",Iz="_ellipsis_1isul_1",bz={appContainer:Sz,pageContainer:wz,input:Az,ellipsis:Iz};class Jc extends Error{constructor(o,l){const d=new.target.prototype;super("".concat(o,": Status code '").concat(l,"'")),this.statusCode=l,this.__proto__=d}}class nR extends Error{constructor(o="A timeout occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class hu extends Error{constructor(o="An abort occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class Cz extends Error{constructor(o,l){const d=new.target.prototype;super(o),this.transport=l,this.errorType="UnsupportedTransportError",this.__proto__=d}}class Rz extends Error{constructor(o,l){const d=new.target.prototype;super(o),this.transport=l,this.errorType="DisabledTransportError",this.__proto__=d}}class xz extends Error{constructor(o,l){const d=new.target.prototype;super(o),this.transport=l,this.errorType="FailedToStartTransportError",this.__proto__=d}}class F3 extends Error{constructor(o){const l=new.target.prototype;super(o),this.errorType="FailedToNegotiateWithServerError",this.__proto__=l}}class Nz extends Error{constructor(o,l){const d=new.target.prototype;super(o),this.innerErrors=l,this.__proto__=d}}class RB{constructor(o,l,d){this.statusCode=o,this.statusText=l,this.content=d}}class xE{get(o,l){return this.send({...l,method:"GET",url:o})}post(o,l){return this.send({...l,method:"POST",url:o})}delete(o,l){return this.send({...l,method:"DELETE",url:o})}getCookieString(o){return""}}var Rn;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Information=2]="Information",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.None=6]="None"})(Rn||(Rn={}));class Wg{constructor(){}log(o,l){}}Wg.instance=new Wg;const Mz="8.0.0";class So{static isRequired(o,l){if(o==null)throw new Error("The '".concat(l,"' argument is required."))}static isNotEmpty(o,l){if(!o||o.match(/^\s*$/))throw new Error("The '".concat(l,"' argument should not be empty."))}static isIn(o,l,d){if(!(o in l))throw new Error("Unknown ".concat(d," value: ").concat(o,"."))}}class Ji{static get isBrowser(){return!Ji.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Ji.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Ji.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function $g(i,o){let l="";return sf(i)?(l="Binary data of length ".concat(i.byteLength),o&&(l+=". Content: '".concat(Dz(i),"'"))):typeof i=="string"&&(l="String data of length ".concat(i.length),o&&(l+=". Content: '".concat(i,"'"))),l}function Dz(i){const o=new Uint8Array(i);let l="";return o.forEach(d=>{const g=d<16?"0":"";l+="0x".concat(g).concat(d.toString(16)," ")}),l.substr(0,l.length-1)}function sf(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}async function xB(i,o,l,d,g,S){const b={},[p,w]=yh();b[p]=w,i.log(Rn.Trace,"(".concat(o," transport) sending data. ").concat($g(g,S.logMessageContent),"."));const k=sf(g)?"arraybuffer":"text",C=await l.post(d,{content:g,headers:{...b,...S.headers},responseType:k,timeout:S.timeout,withCredentials:S.withCredentials});i.log(Rn.Trace,"(".concat(o," transport) request complete. Response status: ").concat(C.statusCode,"."))}function Pz(i){return i===void 0?new nE(Rn.Information):i===null?Wg.instance:i.log!==void 0?i:new nE(i)}class Oz{constructor(o,l){this._subject=o,this._observer=l}dispose(){const o=this._subject.observers.indexOf(this._observer);o>-1&&this._subject.observers.splice(o,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(l=>{})}}class nE{constructor(o){this._minLevel=o,this.out=console}log(o,l){if(o>=this._minLevel){const d="[".concat(new Date().toISOString(),"] ").concat(Rn[o],": ").concat(l);switch(o){case Rn.Critical:case Rn.Error:this.out.error(d);break;case Rn.Warning:this.out.warn(d);break;case Rn.Information:this.out.info(d);break;default:this.out.log(d);break}}}}function yh(){let i="X-SignalR-User-Agent";return Ji.isNode&&(i="User-Agent"),[i,Lz(Mz,kz(),Uz(),Fz())]}function Lz(i,o,l,d){let g="Microsoft SignalR/";const S=i.split(".");return g+="".concat(S[0],".").concat(S[1]),g+=" (".concat(i,"; "),o&&o!==""?g+="".concat(o,"; "):g+="Unknown OS; ",g+="".concat(l),d?g+="; ".concat(d):g+="; Unknown Runtime Version",g+=")",g}function kz(){if(Ji.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function Fz(){if(Ji.isNode)return process.versions.node}function Uz(){return Ji.isNode?"NodeJS":"Browser"}function U3(i){return i.stack?i.stack:i.message?i.message:"".concat(i)}function Bz(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}function jz(i){return typeof fetch>"u"||Ji.isNode?(i._jar=new(require("tough-cookie")).CookieJar,typeof fetch>"u"?i._fetchType=require("node-fetch"):i._fetchType=fetch,i._fetchType=require("fetch-cookie")(i._fetchType,i._jar),!0):!1}function Zz(i){return typeof AbortController>"u"?(i._abortControllerType=require("abort-controller"),!0):!1}function qz(){return require("ws")}function Gz(){return require("eventsource")}class Hz extends xE{constructor(o){super(),this._logger=o;const l={_fetchType:void 0,_jar:void 0};jz(l)?(this._fetchType=l._fetchType,this._jar=l._jar):this._fetchType=fetch.bind(Bz()),this._abortControllerType=AbortController;const d={_abortControllerType:this._abortControllerType};Zz(d)&&(this._abortControllerType=d._abortControllerType)}async send(o){if(o.abortSignal&&o.abortSignal.aborted)throw new hu;if(!o.method)throw new Error("No method defined.");if(!o.url)throw new Error("No url defined.");const l=new this._abortControllerType;let d;o.abortSignal&&(o.abortSignal.onabort=()=>{l.abort(),d=new hu});let g=null;if(o.timeout){const w=o.timeout;g=setTimeout(()=>{l.abort(),this._logger.log(Rn.Warning,"Timeout from HTTP request."),d=new nR},w)}o.content===""&&(o.content=void 0),o.content&&(o.headers=o.headers||{},sf(o.content)?o.headers["Content-Type"]="application/octet-stream":o.headers["Content-Type"]="text/plain;charset=UTF-8");let S;try{S=await this._fetchType(o.url,{body:o.content,cache:"no-cache",credentials:o.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...o.headers},method:o.method,mode:"cors",redirect:"follow",signal:l.signal})}catch(w){throw d||(this._logger.log(Rn.Warning,"Error from HTTP request. ".concat(w,".")),w)}finally{g&&clearTimeout(g),o.abortSignal&&(o.abortSignal.onabort=null)}if(!S.ok){const w=await B3(S,"text");throw new Jc(w||S.statusText,S.status)}const p=await B3(S,o.responseType);return new RB(S.status,S.statusText,p)}getCookieString(o){let l="";return Ji.isNode&&this._jar&&this._jar.getCookies(o,(d,g)=>l=g.join("; ")),l}}function B3(i,o){let l;switch(o){case"arraybuffer":l=i.arrayBuffer();break;case"text":l=i.text();break;case"blob":case"document":case"json":throw new Error("".concat(o," is not supported."));default:l=i.text();break}return l}class Vz extends xE{constructor(o){super(),this._logger=o}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new hu):o.method?o.url?new Promise((l,d)=>{const g=new XMLHttpRequest;g.open(o.method,o.url,!0),g.withCredentials=o.withCredentials===void 0?!0:o.withCredentials,g.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.content===""&&(o.content=void 0),o.content&&(sf(o.content)?g.setRequestHeader("Content-Type","application/octet-stream"):g.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const S=o.headers;S&&Object.keys(S).forEach(b=>{g.setRequestHeader(b,S[b])}),o.responseType&&(g.responseType=o.responseType),o.abortSignal&&(o.abortSignal.onabort=()=>{g.abort(),d(new hu)}),o.timeout&&(g.timeout=o.timeout),g.onload=()=>{o.abortSignal&&(o.abortSignal.onabort=null),g.status>=200&&g.status<300?l(new RB(g.status,g.statusText,g.response||g.responseText)):d(new Jc(g.response||g.responseText||g.statusText,g.status))},g.onerror=()=>{this._logger.log(Rn.Warning,"Error from HTTP request. ".concat(g.status,": ").concat(g.statusText,".")),d(new Jc(g.statusText,g.status))},g.ontimeout=()=>{this._logger.log(Rn.Warning,"Timeout from HTTP request."),d(new nR)},g.send(o.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class Kz extends xE{constructor(o){if(super(),typeof fetch<"u"||Ji.isNode)this._httpClient=new Hz(o);else if(typeof XMLHttpRequest<"u")this._httpClient=new Vz(o);else throw new Error("No usable HttpClient found.")}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new hu):o.method?o.url?this._httpClient.send(o):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(o){return this._httpClient.getCookieString(o)}}class ds{static write(o){return"".concat(o).concat(ds.RecordSeparator)}static parse(o){if(o[o.length-1]!==ds.RecordSeparator)throw new Error("Message is incomplete.");const l=o.split(ds.RecordSeparator);return l.pop(),l}}ds.RecordSeparatorCode=30;ds.RecordSeparator=String.fromCharCode(ds.RecordSeparatorCode);class zz{writeHandshakeRequest(o){return ds.write(JSON.stringify(o))}parseHandshakeResponse(o){let l,d;if(sf(o)){const p=new Uint8Array(o),w=p.indexOf(ds.RecordSeparatorCode);if(w===-1)throw new Error("Message is incomplete.");const k=w+1;l=String.fromCharCode.apply(null,Array.prototype.slice.call(p.slice(0,k))),d=p.byteLength>k?p.slice(k).buffer:null}else{const p=o,w=p.indexOf(ds.RecordSeparator);if(w===-1)throw new Error("Message is incomplete.");const k=w+1;l=p.substring(0,k),d=p.length>k?p.substring(k):null}const g=ds.parse(l),S=JSON.parse(g[0]);if(S.type)throw new Error("Expected a handshake response from the server.");return[d,S]}}var Dr;(function(i){i[i.Invocation=1]="Invocation",i[i.StreamItem=2]="StreamItem",i[i.Completion=3]="Completion",i[i.StreamInvocation=4]="StreamInvocation",i[i.CancelInvocation=5]="CancelInvocation",i[i.Ping=6]="Ping",i[i.Close=7]="Close",i[i.Ack=8]="Ack",i[i.Sequence=9]="Sequence"})(Dr||(Dr={}));class Yz{constructor(){this.observers=[]}next(o){for(const l of this.observers)l.next(o)}error(o){for(const l of this.observers)l.error&&l.error(o)}complete(){for(const o of this.observers)o.complete&&o.complete()}subscribe(o){return this.observers.push(o),new Oz(this,o)}}class Wz{constructor(o,l,d){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=o,this._connection=l,this._bufferSize=d}async _send(o){const l=this._protocol.writeMessage(o);let d=Promise.resolve();if(this._isInvocationMessage(o)){this._totalMessageCount++;let g=()=>{},S=()=>{};sf(l)?this._bufferedByteCount+=l.byteLength:this._bufferedByteCount+=l.length,this._bufferedByteCount>=this._bufferSize&&(d=new Promise((b,p)=>{g=b,S=p})),this._messages.push(new $z(l,this._totalMessageCount,g,S))}try{this._reconnectInProgress||await this._connection.send(l)}catch(g){this._disconnected()}await d}_ack(o){let l=-1;for(let d=0;d<this._messages.length;d++){const g=this._messages[d];if(g._id<=o.sequenceId)l=d,sf(g._message)?this._bufferedByteCount-=g._message.byteLength:this._bufferedByteCount-=g._message.length,g._resolver();else if(this._bufferedByteCount<this._bufferSize)g._resolver();else break}l!==-1&&(this._messages=this._messages.slice(l+1))}_shouldProcessMessage(o){if(this._waitForSequenceMessage)return o.type!==Dr.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(o))return!0;const l=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,l<=this._latestReceivedSequenceId?(l===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=l,this._ackTimer(),!0)}_resetSequence(o){if(o.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=o.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const o=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Dr.Sequence,sequenceId:o}));const l=this._messages;for(const d of l)await this._connection.send(d._message);this._reconnectInProgress=!1}_dispose(o){o!=null||(o=new Error("Unable to reconnect to server."));for(const l of this._messages)l._rejector(o)}_isInvocationMessage(o){switch(o.type){case Dr.Invocation:case Dr.StreamItem:case Dr.Completion:case Dr.StreamInvocation:case Dr.CancelInvocation:return!0;case Dr.Close:case Dr.Sequence:case Dr.Ping:case Dr.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Dr.Ack,sequenceId:this._latestReceivedSequenceId}))}catch(o){}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class $z{constructor(o,l,d,g){this._message=o,this._id=l,this._resolver=d,this._rejector=g}}const Xz=30*1e3,Qz=15*1e3,Jz=1e5;var qi;(function(i){i.Disconnected="Disconnected",i.Connecting="Connecting",i.Connected="Connected",i.Disconnecting="Disconnecting",i.Reconnecting="Reconnecting"})(qi||(qi={}));class rR{static create(o,l,d,g,S,b,p){return new rR(o,l,d,g,S,b,p)}constructor(o,l,d,g,S,b,p){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Rn.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},So.isRequired(o,"connection"),So.isRequired(l,"logger"),So.isRequired(d,"protocol"),this.serverTimeoutInMilliseconds=S!=null?S:Xz,this.keepAliveIntervalInMilliseconds=b!=null?b:Qz,this._statefulReconnectBufferSize=p!=null?p:Jz,this._logger=l,this._protocol=d,this.connection=o,this._reconnectPolicy=g,this._handshakeProtocol=new zz,this.connection.onreceive=w=>this._processIncomingData(w),this.connection.onclose=w=>this._connectionClosed(w),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=qi.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Dr.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(o){if(this._connectionState!==qi.Disconnected&&this._connectionState!==qi.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!o)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=o}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==qi.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=qi.Connecting,this._logger.log(Rn.Debug,"Starting HubConnection.");try{await this._startInternal(),Ji.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=qi.Connected,this._connectionStarted=!0,this._logger.log(Rn.Debug,"HubConnection connected successfully.")}catch(o){return this._connectionState=qi.Disconnected,this._logger.log(Rn.Debug,"HubConnection failed to start successfully because of error '".concat(o,"'.")),Promise.reject(o)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const o=new Promise((l,d)=>{this._handshakeResolver=l,this._handshakeRejecter=d});await this.connection.start(this._protocol.transferFormat);try{let l=this._protocol.version;this.connection.features.reconnect||(l=1);const d={protocol:this._protocol.name,version:l};if(this._logger.log(Rn.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(d)),this._logger.log(Rn.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await o,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new Wz(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(l){throw this._logger.log(Rn.Debug,"Hub handshake failed with error '".concat(l,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(l),l}}async stop(){const o=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await o}catch(l){}}_stopInternal(o){if(this._connectionState===qi.Disconnected)return this._logger.log(Rn.Debug,"Call to HubConnection.stop(".concat(o,") ignored because it is already in the disconnected state.")),Promise.resolve();if(this._connectionState===qi.Disconnecting)return this._logger.log(Rn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;const l=this._connectionState;return this._connectionState=qi.Disconnecting,this._logger.log(Rn.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Rn.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(l===qi.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=o||new hu("The connection was stopped before the hub handshake could complete."),this.connection.stop(o))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch(o){}}stream(o,...l){const[d,g]=this._replaceStreamingParams(l),S=this._createStreamInvocation(o,l,g);let b;const p=new Yz;return p.cancelCallback=()=>{const w=this._createCancelInvocation(S.invocationId);return delete this._callbacks[S.invocationId],b.then(()=>this._sendWithProtocol(w))},this._callbacks[S.invocationId]=(w,k)=>{if(k){p.error(k);return}else w&&(w.type===Dr.Completion?w.error?p.error(new Error(w.error)):p.complete():p.next(w.item))},b=this._sendWithProtocol(S).catch(w=>{p.error(w),delete this._callbacks[S.invocationId]}),this._launchStreams(d,b),p}_sendMessage(o){return this._resetKeepAliveInterval(),this.connection.send(o)}_sendWithProtocol(o){return this._messageBuffer?this._messageBuffer._send(o):this._sendMessage(this._protocol.writeMessage(o))}send(o,...l){const[d,g]=this._replaceStreamingParams(l),S=this._sendWithProtocol(this._createInvocation(o,l,!0,g));return this._launchStreams(d,S),S}invoke(o,...l){const[d,g]=this._replaceStreamingParams(l),S=this._createInvocation(o,l,!1,g);return new Promise((p,w)=>{this._callbacks[S.invocationId]=(C,E)=>{if(E){w(E);return}else C&&(C.type===Dr.Completion?C.error?w(new Error(C.error)):p(C.result):w(new Error("Unexpected message type: ".concat(C.type))))};const k=this._sendWithProtocol(S).catch(C=>{w(C),delete this._callbacks[S.invocationId]});this._launchStreams(d,k)})}on(o,l){!o||!l||(o=o.toLowerCase(),this._methods[o]||(this._methods[o]=[]),this._methods[o].indexOf(l)===-1&&this._methods[o].push(l))}off(o,l){if(!o)return;o=o.toLowerCase();const d=this._methods[o];if(d)if(l){const g=d.indexOf(l);g!==-1&&(d.splice(g,1),d.length===0&&delete this._methods[o])}else delete this._methods[o]}onclose(o){o&&this._closedCallbacks.push(o)}onreconnecting(o){o&&this._reconnectingCallbacks.push(o)}onreconnected(o){o&&this._reconnectedCallbacks.push(o)}_processIncomingData(o){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(o=this._processHandshakeResponse(o),this._receivedHandshakeResponse=!0),o){const l=this._protocol.parseMessages(o,this._logger);for(const d of l)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(d)))switch(d.type){case Dr.Invocation:this._invokeClientMethod(d);break;case Dr.StreamItem:case Dr.Completion:{const g=this._callbacks[d.invocationId];if(g){d.type===Dr.Completion&&delete this._callbacks[d.invocationId];try{g(d)}catch(S){this._logger.log(Rn.Error,"Stream callback threw error: ".concat(U3(S)))}}break}case Dr.Ping:break;case Dr.Close:{this._logger.log(Rn.Information,"Close message received from server.");const g=d.error?new Error("Server returned an error on close: "+d.error):void 0;d.allowReconnect===!0?this.connection.stop(g):this._stopPromise=this._stopInternal(g);break}case Dr.Ack:this._messageBuffer&&this._messageBuffer._ack(d);break;case Dr.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(d);break;default:this._logger.log(Rn.Warning,"Invalid message type: ".concat(d.type,"."));break}}this._resetTimeoutPeriod()}_processHandshakeResponse(o){let l,d;try{[d,l]=this._handshakeProtocol.parseHandshakeResponse(o)}catch(g){const S="Error parsing handshake response: "+g;this._logger.log(Rn.Error,S);const b=new Error(S);throw this._handshakeRejecter(b),b}if(l.error){const g="Server returned handshake error: "+l.error;this._logger.log(Rn.Error,g);const S=new Error(g);throw this._handshakeRejecter(S),S}else this._logger.log(Rn.Debug,"Server handshake complete.");return this._handshakeResolver(),d}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let o=this._nextKeepAlive-new Date().getTime();o<0&&(o=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===qi.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch(l){this._cleanupPingTimer()}},o)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(o){const l=o.target.toLowerCase(),d=this._methods[l];if(!d){this._logger.log(Rn.Warning,"No client method with the name '".concat(l,"' found.")),o.invocationId&&(this._logger.log(Rn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),await this._sendWithProtocol(this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)));return}const g=d.slice(),S=!!o.invocationId;let b,p,w;for(const k of g)try{const C=b;b=await k.apply(this,o.arguments),S&&b&&C&&(this._logger.log(Rn.Error,"Multiple results provided for '".concat(l,"'. Sending error to server.")),w=this._createCompletionMessage(o.invocationId,"Client provided multiple results.",null)),p=void 0}catch(C){p=C,this._logger.log(Rn.Error,"A callback for the method '".concat(l,"' threw error '").concat(C,"'."))}w?await this._sendWithProtocol(w):S?(p?w=this._createCompletionMessage(o.invocationId,"".concat(p),null):b!==void 0?w=this._createCompletionMessage(o.invocationId,null,b):(this._logger.log(Rn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),w=this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(w)):b&&this._logger.log(Rn.Error,"Result given for '".concat(l,"' method but server is not expecting a result."))}_connectionClosed(o){this._logger.log(Rn.Debug,"HubConnection.connectionClosed(".concat(o,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||o||new hu("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(o||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===qi.Disconnecting?this._completeClose(o):this._connectionState===qi.Connected&&this._reconnectPolicy?this._reconnect(o):this._connectionState===qi.Connected&&this._completeClose(o)}_completeClose(o){if(this._connectionStarted){this._connectionState=qi.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(o!=null?o:new Error("Connection closed.")),this._messageBuffer=void 0),Ji.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(l=>l.apply(this,[o]))}catch(l){this._logger.log(Rn.Error,"An onclose callback called with error '".concat(o,"' threw error '").concat(l,"'."))}}}async _reconnect(o){const l=Date.now();let d=0,g=o!==void 0?o:new Error("Attempting to reconnect due to a unknown error."),S=this._getNextRetryDelay(d++,0,g);if(S===null){this._logger.log(Rn.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(o);return}if(this._connectionState=qi.Reconnecting,o?this._logger.log(Rn.Information,"Connection reconnecting because of error '".concat(o,"'.")):this._logger.log(Rn.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(b=>b.apply(this,[o]))}catch(b){this._logger.log(Rn.Error,"An onreconnecting callback called with error '".concat(o,"' threw error '").concat(b,"'."))}if(this._connectionState!==qi.Reconnecting){this._logger.log(Rn.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;S!==null;){if(this._logger.log(Rn.Information,"Reconnect attempt number ".concat(d," will start in ").concat(S," ms.")),await new Promise(b=>{this._reconnectDelayHandle=setTimeout(b,S)}),this._reconnectDelayHandle=void 0,this._connectionState!==qi.Reconnecting){this._logger.log(Rn.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=qi.Connected,this._logger.log(Rn.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(b=>b.apply(this,[this.connection.connectionId]))}catch(b){this._logger.log(Rn.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(b,"'."))}return}catch(b){if(this._logger.log(Rn.Information,"Reconnect attempt failed because of error '".concat(b,"'.")),this._connectionState!==qi.Reconnecting){this._logger.log(Rn.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),this._connectionState===qi.Disconnecting&&this._completeClose();return}g=b instanceof Error?b:new Error(b.toString()),S=this._getNextRetryDelay(d++,Date.now()-l,g)}}this._logger.log(Rn.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-l," ms and ").concat(d," failed attempts. Connection disconnecting.")),this._completeClose()}_getNextRetryDelay(o,l,d){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:l,previousRetryCount:o,retryReason:d})}catch(g){return this._logger.log(Rn.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(o,", ").concat(l,") threw error '").concat(g,"'.")),null}}_cancelCallbacksWithError(o){const l=this._callbacks;this._callbacks={},Object.keys(l).forEach(d=>{const g=l[d];try{g(null,o)}catch(S){this._logger.log(Rn.Error,"Stream 'error' callback called with '".concat(o,"' threw error: ").concat(U3(S)))}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(o,l,d,g){if(d)return g.length!==0?{arguments:l,streamIds:g,target:o,type:Dr.Invocation}:{arguments:l,target:o,type:Dr.Invocation};{const S=this._invocationId;return this._invocationId++,g.length!==0?{arguments:l,invocationId:S.toString(),streamIds:g,target:o,type:Dr.Invocation}:{arguments:l,invocationId:S.toString(),target:o,type:Dr.Invocation}}}_launchStreams(o,l){if(o.length!==0){l||(l=Promise.resolve());for(const d in o)o[d].subscribe({complete:()=>{l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d)))},error:g=>{let S;g instanceof Error?S=g.message:g&&g.toString?S=g.toString():S="Unknown error",l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d,S)))},next:g=>{l=l.then(()=>this._sendWithProtocol(this._createStreamItemMessage(d,g)))}})}}_replaceStreamingParams(o){const l=[],d=[];for(let g=0;g<o.length;g++){const S=o[g];if(this._isObservable(S)){const b=this._invocationId;this._invocationId++,l[b]=S,d.push(b.toString()),o.splice(g,1)}}return[l,d]}_isObservable(o){return o&&o.subscribe&&typeof o.subscribe=="function"}_createStreamInvocation(o,l,d){const g=this._invocationId;return this._invocationId++,d.length!==0?{arguments:l,invocationId:g.toString(),streamIds:d,target:o,type:Dr.StreamInvocation}:{arguments:l,invocationId:g.toString(),target:o,type:Dr.StreamInvocation}}_createCancelInvocation(o){return{invocationId:o,type:Dr.CancelInvocation}}_createStreamItemMessage(o,l){return{invocationId:o,item:l,type:Dr.StreamItem}}_createCompletionMessage(o,l,d){return l?{error:l,invocationId:o,type:Dr.Completion}:{invocationId:o,result:d,type:Dr.Completion}}_createCloseMessage(){return{type:Dr.Close}}}const eY=[0,2e3,1e4,3e4,null];class j3{constructor(o){this._retryDelays=o!==void 0?[...o,null]:eY}nextRetryDelayInMilliseconds(o){return this._retryDelays[o.previousRetryCount]}}class ef{}ef.Authorization="Authorization";ef.Cookie="Cookie";class tY extends xE{constructor(o,l){super(),this._innerClient=o,this._accessTokenFactory=l}async send(o){let l=!0;this._accessTokenFactory&&(!this._accessToken||o.url&&o.url.indexOf("/negotiate?")>0)&&(l=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(o);const d=await this._innerClient.send(o);return l&&d.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(o),await this._innerClient.send(o)):d}_setAuthorizationHeader(o){o.headers||(o.headers={}),this._accessToken?o.headers[ef.Authorization]="Bearer ".concat(this._accessToken):this._accessTokenFactory&&o.headers[ef.Authorization]&&delete o.headers[ef.Authorization]}getCookieString(o){return this._innerClient.getCookieString(o)}}var mo;(function(i){i[i.None=0]="None",i[i.WebSockets=1]="WebSockets",i[i.ServerSentEvents=2]="ServerSentEvents",i[i.LongPolling=4]="LongPolling"})(mo||(mo={}));var ra;(function(i){i[i.Text=1]="Text",i[i.Binary=2]="Binary"})(ra||(ra={}));let nY=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Z3{get pollAborted(){return this._pollAbort.aborted}constructor(o,l,d){this._httpClient=o,this._logger=l,this._pollAbort=new nY,this._options=d,this._running=!1,this.onreceive=null,this.onclose=null}async connect(o,l){if(So.isRequired(o,"url"),So.isRequired(l,"transferFormat"),So.isIn(l,ra,"transferFormat"),this._url=o,this._logger.log(Rn.Trace,"(LongPolling transport) Connecting."),l===ra.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[d,g]=yh(),S={[d]:g,...this._options.headers},b={abortSignal:this._pollAbort.signal,headers:S,timeout:1e5,withCredentials:this._options.withCredentials};l===ra.Binary&&(b.responseType="arraybuffer");const p="".concat(o,"&_=").concat(Date.now());this._logger.log(Rn.Trace,"(LongPolling transport) polling: ".concat(p,"."));const w=await this._httpClient.get(p,b);w.statusCode!==200?(this._logger.log(Rn.Error,"(LongPolling transport) Unexpected response code: ".concat(w.statusCode,".")),this._closeError=new Jc(w.statusText||"",w.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,b)}async _poll(o,l){try{for(;this._running;)try{const d="".concat(o,"&_=").concat(Date.now());this._logger.log(Rn.Trace,"(LongPolling transport) polling: ".concat(d,"."));const g=await this._httpClient.get(d,l);g.statusCode===204?(this._logger.log(Rn.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):g.statusCode!==200?(this._logger.log(Rn.Error,"(LongPolling transport) Unexpected response code: ".concat(g.statusCode,".")),this._closeError=new Jc(g.statusText||"",g.statusCode),this._running=!1):g.content?(this._logger.log(Rn.Trace,"(LongPolling transport) data received. ".concat($g(g.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(g.content)):this._logger.log(Rn.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(d){this._running?d instanceof nR?this._logger.log(Rn.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=d,this._running=!1):this._logger.log(Rn.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(d.message))}}finally{this._logger.log(Rn.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(o){return this._running?xB(this._logger,"LongPolling",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Rn.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Rn.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,"."));const o={},[l,d]=yh();o[l]=d;const g={headers:{...o,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let S;try{await this._httpClient.delete(this._url,g)}catch(b){S=b}S?S instanceof Jc&&(S.statusCode===404?this._logger.log(Rn.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Rn.Trace,"(LongPolling transport) Error sending a DELETE request: ".concat(S))):this._logger.log(Rn.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Rn.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let o="(LongPolling transport) Firing onclose event.";this._closeError&&(o+=" Error: "+this._closeError),this._logger.log(Rn.Trace,o),this.onclose(this._closeError)}}}class rY{constructor(o,l,d,g){this._httpClient=o,this._accessToken=l,this._logger=d,this._options=g,this.onreceive=null,this.onclose=null}async connect(o,l){return So.isRequired(o,"url"),So.isRequired(l,"transferFormat"),So.isIn(l,ra,"transferFormat"),this._logger.log(Rn.Trace,"(SSE transport) Connecting."),this._url=o,this._accessToken&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(this._accessToken))),new Promise((d,g)=>{let S=!1;if(l!==ra.Text){g(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let b;if(Ji.isBrowser||Ji.isWebWorker)b=new this._options.EventSource(o,{withCredentials:this._options.withCredentials});else{const p=this._httpClient.getCookieString(o),w={};w.Cookie=p;const[k,C]=yh();w[k]=C,b=new this._options.EventSource(o,{withCredentials:this._options.withCredentials,headers:{...w,...this._options.headers}})}try{b.onmessage=p=>{if(this.onreceive)try{this._logger.log(Rn.Trace,"(SSE transport) data received. ".concat($g(p.data,this._options.logMessageContent),".")),this.onreceive(p.data)}catch(w){this._close(w);return}},b.onerror=p=>{S?this._close():g(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},b.onopen=()=>{this._logger.log(Rn.Information,"SSE connected to ".concat(this._url)),this._eventSource=b,S=!0,d()}}catch(p){g(p);return}})}async send(o){return this._eventSource?xB(this._logger,"SSE",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(o){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(o))}}class iY{constructor(o,l,d,g,S,b){this._logger=d,this._accessTokenFactory=l,this._logMessageContent=g,this._webSocketConstructor=S,this._httpClient=o,this.onreceive=null,this.onclose=null,this._headers=b}async connect(o,l){So.isRequired(o,"url"),So.isRequired(l,"transferFormat"),So.isIn(l,ra,"transferFormat"),this._logger.log(Rn.Trace,"(WebSockets transport) Connecting.");let d;return this._accessTokenFactory&&(d=await this._accessTokenFactory()),new Promise((g,S)=>{o=o.replace(/^http/,"ws");let b;const p=this._httpClient.getCookieString(o);let w=!1;if(Ji.isNode||Ji.isReactNative){const k={},[C,E]=yh();k[C]=E,d&&(k[ef.Authorization]="Bearer ".concat(d)),p&&(k[ef.Cookie]=p),b=new this._webSocketConstructor(o,void 0,{headers:{...k,...this._headers}})}else d&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(d)));b||(b=new this._webSocketConstructor(o)),l===ra.Binary&&(b.binaryType="arraybuffer"),b.onopen=k=>{this._logger.log(Rn.Information,"WebSocket connected to ".concat(o,".")),this._webSocket=b,w=!0,g()},b.onerror=k=>{let C=null;typeof ErrorEvent<"u"&&k instanceof ErrorEvent?C=k.error:C="There was an error with the transport",this._logger.log(Rn.Information,"(WebSockets transport) ".concat(C,"."))},b.onmessage=k=>{if(this._logger.log(Rn.Trace,"(WebSockets transport) data received. ".concat($g(k.data,this._logMessageContent),".")),this.onreceive)try{this.onreceive(k.data)}catch(C){this._close(C);return}},b.onclose=k=>{if(w)this._close(k);else{let C=null;typeof ErrorEvent<"u"&&k instanceof ErrorEvent?C=k.error:C="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",S(new Error(C))}}})}send(o){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Rn.Trace,"(WebSockets transport) sending data. ".concat($g(o,this._logMessageContent),".")),this._webSocket.send(o),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(o){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Rn.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(o)&&(o.wasClean===!1||o.code!==1e3)?this.onclose(new Error("WebSocket closed with status code: ".concat(o.code," (").concat(o.reason||"no reason given",")."))):o instanceof Error?this.onclose(o):this.onclose())}_isCloseEvent(o){return o&&typeof o.wasClean=="boolean"&&typeof o.code=="number"}}const q3=100;class oY{constructor(o,l={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,So.isRequired(o,"url"),this._logger=Pz(l.logger),this.baseUrl=this._resolveUrl(o),l=l||{},l.logMessageContent=l.logMessageContent===void 0?!1:l.logMessageContent,typeof l.withCredentials=="boolean"||l.withCredentials===void 0)l.withCredentials=l.withCredentials===void 0?!0:l.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");l.timeout=l.timeout===void 0?100*1e3:l.timeout;let d=null,g=null;Ji.isNode&&typeof require<"u"&&(d=qz(),g=Gz()),!Ji.isNode&&typeof WebSocket<"u"&&!l.WebSocket?l.WebSocket=WebSocket:Ji.isNode&&!l.WebSocket&&d&&(l.WebSocket=d),!Ji.isNode&&typeof EventSource<"u"&&!l.EventSource?l.EventSource=EventSource:Ji.isNode&&!l.EventSource&&typeof g<"u"&&(l.EventSource=g),this._httpClient=new tY(l.httpClient||new Kz(this._logger),l.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=l,this.onreceive=null,this.onclose=null}async start(o){if(o=o||ra.Binary,So.isIn(o,ra,"transferFormat"),this._logger.log(Rn.Debug,"Starting connection with transfer format '".concat(ra[o],"'.")),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(o),await this._startInternalPromise,this._connectionState==="Disconnecting"){const l="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Rn.Error,l),await this._stopPromise,Promise.reject(new hu(l))}else if(this._connectionState!=="Connected"){const l="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Rn.Error,l),Promise.reject(new hu(l))}this._connectionStarted=!0}send(o){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new iR(this.transport)),this._sendQueue.send(o))}async stop(o){if(this._connectionState==="Disconnected")return this._logger.log(Rn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnected state.")),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(Rn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(l=>{this._stopPromiseResolver=l}),await this._stopInternal(o),await this._stopPromise}async _stopInternal(o){this._stopError=o;try{await this._startInternalPromise}catch(l){}if(this.transport){try{await this.transport.stop()}catch(l){this._logger.log(Rn.Error,"HttpConnection.transport.stop() threw error '".concat(l,"'.")),this._stopConnection()}this.transport=void 0}else this._logger.log(Rn.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(o){let l=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===mo.WebSockets)this.transport=this._constructTransport(mo.WebSockets),await this._startTransport(l,o);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let d=null,g=0;do{if(d=await this._getNegotiationResponse(l),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new hu("The connection was stopped during negotiation.");if(d.error)throw new Error(d.error);if(d.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(d.url&&(l=d.url),d.accessToken){const S=d.accessToken;this._accessTokenFactory=()=>S,this._httpClient._accessToken=S,this._httpClient._accessTokenFactory=void 0}g++}while(d.url&&g<q3);if(g===q3&&d.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(l,this._options.transport,d,o)}this.transport instanceof Z3&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(Rn.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(d){return this._logger.log(Rn.Error,"Failed to start the connection: "+d),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(d)}}async _getNegotiationResponse(o){const l={},[d,g]=yh();l[d]=g;const S=this._resolveNegotiateUrl(o);this._logger.log(Rn.Debug,"Sending negotiation request: ".concat(S,"."));try{const b=await this._httpClient.post(S,{content:"",headers:{...l,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(b.statusCode!==200)return Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(b.statusCode,"'")));const p=JSON.parse(b.content);return(!p.negotiateVersion||p.negotiateVersion<1)&&(p.connectionToken=p.connectionId),p.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new F3("Client didn't negotiate Stateful Reconnect but the server did.")):p}catch(b){let p="Failed to complete negotiation with the server: "+b;return b instanceof Jc&&b.statusCode===404&&(p=p+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Rn.Error,p),Promise.reject(new F3(p))}}_createConnectUrl(o,l){return l?o+(o.indexOf("?")===-1?"?":"&")+"id=".concat(l):o}async _createTransport(o,l,d,g){let S=this._createConnectUrl(o,d.connectionToken);if(this._isITransport(l)){this._logger.log(Rn.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=l,await this._startTransport(S,g),this.connectionId=d.connectionId;return}const b=[],p=d.availableTransports||[];let w=d;for(const k of p){const C=this._resolveTransportOrError(k,l,g,(w==null?void 0:w.useStatefulReconnect)===!0);if(C instanceof Error)b.push("".concat(k.transport," failed:")),b.push(C);else if(this._isITransport(C)){if(this.transport=C,!w){try{w=await this._getNegotiationResponse(o)}catch(E){return Promise.reject(E)}S=this._createConnectUrl(o,w.connectionToken)}try{await this._startTransport(S,g),this.connectionId=w.connectionId;return}catch(E){if(this._logger.log(Rn.Error,"Failed to start the transport '".concat(k.transport,"': ").concat(E)),w=void 0,b.push(new xz("".concat(k.transport," failed: ").concat(E),mo[k.transport])),this._connectionState!=="Connecting"){const y="Failed to select transport before stop() was called.";return this._logger.log(Rn.Debug,y),Promise.reject(new hu(y))}}}}return b.length>0?Promise.reject(new Nz("Unable to connect to the server with any of the available transports. ".concat(b.join(" ")),b)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(o){switch(o){case mo.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new iY(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case mo.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new rY(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case mo.LongPolling:return new Z3(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(o,"."))}}_startTransport(o,l){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async d=>{let g=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(o,l),await this.features.resend()}catch(S){g=!0}else{this._stopConnection(d);return}g&&this._stopConnection(d)}:this.transport.onclose=d=>this._stopConnection(d),this.transport.connect(o,l)}_resolveTransportOrError(o,l,d,g){const S=mo[o.transport];if(S==null)return this._logger.log(Rn.Debug,"Skipping transport '".concat(o.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(o.transport,"' because it is not supported by this client."));if(aY(l,S))if(o.transferFormats.map(p=>ra[p]).indexOf(d)>=0){if(S===mo.WebSockets&&!this._options.WebSocket||S===mo.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Rn.Debug,"Skipping transport '".concat(mo[S],"' because it is not supported in your environment.'")),new Cz("'".concat(mo[S],"' is not supported in your environment."),S);this._logger.log(Rn.Debug,"Selecting transport '".concat(mo[S],"'."));try{return this.features.reconnect=S===mo.WebSockets?g:void 0,this._constructTransport(S)}catch(p){return p}}else return this._logger.log(Rn.Debug,"Skipping transport '".concat(mo[S],"' because it does not support the requested transfer format '").concat(ra[d],"'.")),new Error("'".concat(mo[S],"' does not support ").concat(ra[d],"."));else return this._logger.log(Rn.Debug,"Skipping transport '".concat(mo[S],"' because it was disabled by the client.")),new Rz("'".concat(mo[S],"' is disabled by the client."),S)}_isITransport(o){return o&&typeof o=="object"&&"connect"in o}_stopConnection(o){if(this._logger.log(Rn.Debug,"HttpConnection.stopConnection(".concat(o,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,o=this._stopError||o,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(Rn.Debug,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is already in the disconnected state."));return}if(this._connectionState==="Connecting")throw this._logger.log(Rn.Warning,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(o,") was called while the connection is still in the connecting state."));if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),o?this._logger.log(Rn.Error,"Connection disconnected with error '".concat(o,"'.")):this._logger.log(Rn.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(l=>{this._logger.log(Rn.Error,"TransportSendQueue.stop() threw error '".concat(l,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(o)}catch(l){this._logger.log(Rn.Error,"HttpConnection.onclose(".concat(o,") threw error '").concat(l,"'."))}}}_resolveUrl(o){if(o.lastIndexOf("https://",0)===0||o.lastIndexOf("http://",0)===0)return o;if(!Ji.isBrowser)throw new Error("Cannot resolve '".concat(o,"'."));const l=window.document.createElement("a");return l.href=o,this._logger.log(Rn.Information,"Normalizing '".concat(o,"' to '").concat(l.href,"'.")),l.href}_resolveNegotiateUrl(o){const l=new URL(o);l.pathname.endsWith("/")?l.pathname+="negotiate":l.pathname+="/negotiate";const d=new URLSearchParams(l.searchParams);return d.has("negotiateVersion")||d.append("negotiateVersion",this._negotiateVersion.toString()),d.has("useStatefulReconnect")?d.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&d.append("useStatefulReconnect","true"),l.search=d.toString(),l.toString()}}function aY(i,o){return!i||(o&i)!==0}class iR{constructor(o){this._transport=o,this._buffer=[],this._executing=!0,this._sendBufferedData=new u0,this._transportResult=new u0,this._sendLoopPromise=this._sendLoop()}send(o){return this._bufferData(o),this._transportResult||(this._transportResult=new u0),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(o){if(this._buffer.length&&typeof this._buffer[0]!=typeof o)throw new Error("Expected data to be of type ".concat(typeof this._buffer," but was of type ").concat(typeof o));this._buffer.push(o),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new u0;const o=this._transportResult;this._transportResult=void 0;const l=typeof this._buffer[0]=="string"?this._buffer.join(""):iR._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(l),o.resolve()}catch(d){o.reject(d)}}}static _concatBuffers(o){const l=o.map(S=>S.byteLength).reduce((S,b)=>S+b),d=new Uint8Array(l);let g=0;for(const S of o)d.set(new Uint8Array(S),g),g+=S.byteLength;return d.buffer}}class u0{constructor(){this.promise=new Promise((o,l)=>[this._resolver,this._rejecter]=[o,l])}resolve(){this._resolver()}reject(o){this._rejecter(o)}}const sY="json";class uY{constructor(){this.name=sY,this.version=2,this.transferFormat=ra.Text}parseMessages(o,l){if(typeof o!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!o)return[];l===null&&(l=Wg.instance);const d=ds.parse(o),g=[];for(const S of d){const b=JSON.parse(S);if(typeof b.type!="number")throw new Error("Invalid payload.");switch(b.type){case Dr.Invocation:this._isInvocationMessage(b);break;case Dr.StreamItem:this._isStreamItemMessage(b);break;case Dr.Completion:this._isCompletionMessage(b);break;case Dr.Ping:break;case Dr.Close:break;case Dr.Ack:this._isAckMessage(b);break;case Dr.Sequence:this._isSequenceMessage(b);break;default:l.log(Rn.Information,"Unknown message type '"+b.type+"' ignored.");continue}g.push(b)}return g}writeMessage(o){return ds.write(JSON.stringify(o))}_isInvocationMessage(o){this._assertNotEmptyString(o.target,"Invalid payload for Invocation message."),o.invocationId!==void 0&&this._assertNotEmptyString(o.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(o){if(this._assertNotEmptyString(o.invocationId,"Invalid payload for StreamItem message."),o.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(o){if(o.result&&o.error)throw new Error("Invalid payload for Completion message.");!o.result&&o.error&&this._assertNotEmptyString(o.error,"Invalid payload for Completion message."),this._assertNotEmptyString(o.invocationId,"Invalid payload for Completion message.")}_isAckMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(o,l){if(typeof o!="string"||o==="")throw new Error(l)}}const lY={trace:Rn.Trace,debug:Rn.Debug,info:Rn.Information,information:Rn.Information,warn:Rn.Warning,warning:Rn.Warning,error:Rn.Error,critical:Rn.Critical,none:Rn.None};function cY(i){const o=lY[i.toLowerCase()];if(typeof o<"u")return o;throw new Error("Unknown log level: ".concat(i))}class NB{configureLogging(o){if(So.isRequired(o,"logging"),fY(o))this.logger=o;else if(typeof o=="string"){const l=cY(o);this.logger=new nE(l)}else this.logger=new nE(o);return this}withUrl(o,l){return So.isRequired(o,"url"),So.isNotEmpty(o,"url"),this.url=o,typeof l=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...l}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:l},this}withHubProtocol(o){return So.isRequired(o,"protocol"),this.protocol=o,this}withAutomaticReconnect(o){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return o?Array.isArray(o)?this.reconnectPolicy=new j3(o):this.reconnectPolicy=o:this.reconnectPolicy=new j3,this}withServerTimeout(o){return So.isRequired(o,"milliseconds"),this._serverTimeoutInMilliseconds=o,this}withKeepAliveInterval(o){return So.isRequired(o,"milliseconds"),this._keepAliveIntervalInMilliseconds=o,this}withStatefulReconnect(o){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=o==null?void 0:o.bufferSize,this}build(){const o=this.httpConnectionOptions||{};if(o.logger===void 0&&(o.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const l=new oY(this.url,o);return rR.create(l,this.logger||Wg.instance,this.protocol||new uY,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function fY(i){return i.log!==void 0}class dY extends hf{constructor(o){var l;super(),this.options=o,this.hubConnection=o.hubConnection,this.updateIntervalFrequency=(l=o.updateIntervalFrequency)!=null?l:6e4*5}async getServerTimeOffset(){const o=await this.getSyncedTime();this.emit("serverTimeOffsetUpdate",{serverTimeOffset:Date.now()-o.getTime()}),!(this.updateIntervalFrequency<6e4)&&(this.timeoutInstance=setTimeout(this.getServerTimeOffset.bind(this),this.updateIntervalFrequency))}async start(){await this.getServerTimeOffset()}async getSyncedTime(){const o=this,l=12,d=1e4,g=20;let S;return await new Promise((b,p)=>{var T;const w=[];let k=0,C,E;function y(){var U;E=Date.now(),(U=o.hubConnection)==null||U.invoke("echo"),C=setTimeout(()=>{p(new Error("Did not get sufficient echoes from the server in time"))},d)}function P(U){S=U,clearTimeout(C),w.push(Date.now()-E),k++,k<l?setTimeout(y,g):m()}(T=o.hubConnection)==null||T.on("echo",P);function m(){var M;if((M=o.hubConnection)==null||M.off("echo",P),S===void 0){p(new Error("Server timestamp is undefined"));return}let U;o.options.roundtripCalcStrategy==="mean"?U=w.reduce((_,I)=>_+I)/w.length:U=yz(w),b(new Date(S+U/2))}y()})}destroy(){clearTimeout(this.timeoutInstance)}}const au={STATE_UPDATE:"OnStateUpdated",RECIEVE_GROUP_COMMAND:"receiveGroupCommand",RECIEVE_GLOBAL_COMMAND:"receiveGlobalCommand",CLIENT_DISCONNECT:"DeviceLogOut",SETUP_REQUEST_HOST_TV_CONNECTED:"SetupRequestHostTvConnected",SETUP_STATUS_UPDATE:"SetupStatusUpdate",SETUP_ERROR_RECEIVED:"SetupErrorReceived"},Nb={WAITING_FOR_HOST:"WaitingForHostState",READY_TO_PAIR_WITH_HOST:"ShowQrCodeState",CONNECTED_STATE:"ConnectedState",SHOW_QR_CODE_STATE:"ShowQrCode",HOST_TV_STATE:"HostTVState",IDLE:"Idle"};class hY extends hf{constructor({deviceId:o,debug:l,groupName:d}){super(),this.hubConnection=null,this.serverTimeService=null,this.state=Nb.IDLE,this.deviceId=o,this.debugLogging=l!=null?l:!1,this.groupName=d}setupTimeService(){this.serverTimeService=new dY({hubConnection:this.hubConnection}),this.serverTimeService.on("serverTimeOffsetUpdate",o=>{this.emit("serverTimeOffsetUpdate",o)}),this.serverTimeService.start()}async join(){await this.sendGroupCommand({command:"join",value:this.deviceId})}async disconnect(){var o;console.log("SignalR: disconnect",au.CLIENT_DISCONNECT,{deviceId:this.deviceId}),await((o=this.hubConnection)==null?void 0:o.invoke(au.CLIENT_DISCONNECT))}connect({url:o,accessToken:l}){var d;this.hubConnection=new NB().withUrl(o,{accessTokenFactory:()=>l,transport:mo.WebSockets}).configureLogging(this.debugLogging?Rn.Trace:Rn.Information).build(),(d=this.hubConnection)==null||d.start().then(()=>{this.setupTimeService(),this.connectEventHandlers(),this.join()}).catch(g=>{console.error("Connection failed:",g)})}connectEventHandlers(){var o,l,d,g,S,b;(o=this.hubConnection)==null||o.on(au.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.on(au.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.on(au.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),(g=this.hubConnection)==null||g.on(au.SETUP_STATUS_UPDATE,this.onSetupStatusUpdate.bind(this)),(S=this.hubConnection)==null||S.onclose(p=>{p?console.error("SignalR: closed with error",p):console.log("SignalR: closed")}),(b=this.hubConnection)==null||b.onreconnected(p=>{p?console.error("SignalR: Reconnected error",p):console.log("SignalR: Reconnected")})}async destroy(){var o,l,d,g,S;(o=this.hubConnection)==null||o.off(au.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.off(au.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.off(au.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),await this.disconnect(),await((g=this.hubConnection)==null?void 0:g.stop()),(S=this.serverTimeService)==null||S.destroy(),super.destroy()}onReceiveGroupCommand(o){var l,d,g,S,b;switch(console.log("onReceiveGroupCommand",o),o.command){case"play":this.emit("startTimeUpdated",{startTime:new Date(o.value.startDate)}),((l=o.value.rateClockState)==null?void 0:l.rate)===0?this.emit("pausePlayStream",{command:"pause",reference:(d=o.value.rateClockState)==null?void 0:d.reference,start:(g=o.value.rateClockState)==null?void 0:g.start}):this.emit("pausePlayStream",{command:"play",reference:(S=o.value.rateClockState)==null?void 0:S.reference,start:(b=o.value.rateClockState)==null?void 0:b.start});break;case"cast":this.emit("cast",{index:o.value});break;case"prepareCast":this.emit("prepareCast",{index:o.value});break;case"cancelCast":console.log("cancelCast");break}}onReceiveGlobalCommand(o){switch(console.log("onReceiveGlobalCommand",o),o.command){case"status_changed":this.emit("eventStatusChanged",void 0);break;case"event_canceled":this.emit("eventCanceled",void 0);break}}async sendGroupCommand(o){var l;return await((l=this.hubConnection)==null?void 0:l.invoke("sendGroupCommand",{groupName:this.groupName,arguments:[o]}))}onStateUpdate(o){switch(this.state=o.state.$type,o.state.$type){case Nb.CONNECTED_STATE:if(!o.state.sessionId)return;this.emit("connected",{sessionId:o.state.sessionId}),this.emit("stateUpdated",{state:this.state});return;default:this.emit("stateUpdated",{state:this.state});break}}onSetupStatusUpdate(o){console.log("SetupStatusUpdate: ",o),this.emit("setupStatusUpdate",{deviceLists:o})}}async function wh(i,o,l){var d;try{const g=await fetch(i,o);switch(g.status){case 401:throw new cg(l==null?void 0:l.name,"Unauthorized","Unauthorized",g.status);case 403:throw new cg(l==null?void 0:l.name,"Forbidden","Forbidden",g.status)}const S=await g.json();if(!g.ok)throw new cg(l==null?void 0:l.name,(d=S.sys)==null?void 0:d.id,S.message,g.status);return S}catch(g){throw g instanceof cg?g:new cg(l.name,"Network Error",l.message||"Could not make the request")}}var Mb={exports:{}};(function(i,o){(function(l,d){var g="1.0.38",S="",b="?",p="function",w="undefined",k="object",C="string",E="major",y="model",P="name",m="type",T="vendor",U="version",M="architecture",_="console",I="mobile",x="tablet",Z="smarttv",Y="wearable",$="embedded",Q=500,se="Amazon",R="Apple",X="ASUS",ce="BlackBerry",oe="Browser",ye="Chrome",be="Edge",Xe="Firefox",Ie="Google",Ge="Huawei",at="LG",ft="Microsoft",We="Motorola",ut="Opera",At="Samsung",Ne="Sharp",et="Sony",dt="Xiaomi",rn="Zebra",Yt="Facebook",St="Chromium OS",kt="Mac OS",Re=function(ht,yt){var Et={};for(var Mt in ht)yt[Mt]&&yt[Mt].length%2===0?Et[Mt]=yt[Mt].concat(ht[Mt]):Et[Mt]=ht[Mt];return Et},ne=function(ht){for(var yt={},Et=0;Et<ht.length;Et++)yt[ht[Et].toUpperCase()]=ht[Et];return yt},Ue=function(ht,yt){return typeof ht===C?L(yt).indexOf(L(ht))!==-1:!1},L=function(ht){return ht.toLowerCase()},D=function(ht){return typeof ht===C?ht.replace(/[^\d\.]/g,S).split(".")[0]:d},G=function(ht,yt){if(typeof ht===C)return ht=ht.replace(/^\s\s*/,S),typeof yt===w?ht:ht.substring(0,Q)},K=function(ht,yt){for(var Et=0,Mt,_n,nn,cn,Ft,Gn;Et<yt.length&&!Ft;){var Sr=yt[Et],qr=yt[Et+1];for(Mt=_n=0;Mt<Sr.length&&!Ft&&Sr[Mt];)if(Ft=Sr[Mt++].exec(ht),Ft)for(nn=0;nn<qr.length;nn++)Gn=Ft[++_n],cn=qr[nn],typeof cn===k&&cn.length>0?cn.length===2?typeof cn[1]==p?this[cn[0]]=cn[1].call(this,Gn):this[cn[0]]=cn[1]:cn.length===3?typeof cn[1]===p&&!(cn[1].exec&&cn[1].test)?this[cn[0]]=Gn?cn[1].call(this,Gn,cn[2]):d:this[cn[0]]=Gn?Gn.replace(cn[1],cn[2]):d:cn.length===4&&(this[cn[0]]=Gn?cn[3].call(this,Gn.replace(cn[1],cn[2])):d):this[cn]=Gn||d;Et+=2}},ge=function(ht,yt){for(var Et in yt)if(typeof yt[Et]===k&&yt[Et].length>0){for(var Mt=0;Mt<yt[Et].length;Mt++)if(Ue(yt[Et][Mt],ht))return Et===b?d:Et}else if(Ue(yt[Et],ht))return Et===b?d:Et;return ht},de={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},He={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Tt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[U,[P,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[U,[P,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[P,U],[/opios[\/ ]+([\w\.]+)/i],[U,[P,ut+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[U,[P,ut+" GX"]],[/\bopr\/([\w\.]+)/i],[U,[P,ut]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[U,[P,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[P,U],[/\bddg\/([\w\.]+)/i],[U,[P,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[U,[P,"UC"+oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[U,[P,"WeChat"]],[/konqueror\/([\w\.]+)/i],[U,[P,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[U,[P,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[U,[P,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[U,[P,"Smart Lenovo "+oe]],[/(avast|avg)\/([\w\.]+)/i],[[P,/(.+)/,"$1 Secure "+oe],U],[/\bfocus\/([\w\.]+)/i],[U,[P,Xe+" Focus"]],[/\bopt\/([\w\.]+)/i],[U,[P,ut+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[U,[P,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[U,[P,"Dolphin"]],[/coast\/([\w\.]+)/i],[U,[P,ut+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[U,[P,"MIUI "+oe]],[/fxios\/([-\w\.]+)/i],[U,[P,Xe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[P,"360 "+oe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[P,/(.+)/,"$1 "+oe],U],[/samsungbrowser\/([\w\.]+)/i],[U,[P,At+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[P,/_/g," "],U],[/metasr[\/ ]?([\d\.]+)/i],[U,[P,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[P,"Sogou Mobile"],U],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[P,U],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[P],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[P,Yt],U],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[P,U],[/\bgsa\/([\w\.]+) .*safari\//i],[U,[P,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[U,[P,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[U,[P,ye+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[P,ye+" WebView"],U],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[U,[P,"Android "+oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[P,U],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[U,[P,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[U,P],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[P,[U,ge,de]],[/(webkit|khtml)\/([\w\.]+)/i],[P,U],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[P,"Netscape"],U],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[U,[P,Xe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[P,U],[/(cobalt)\/([\w\.]+)/i],[P,[U,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[M,"amd64"]],[/(ia32(?=;))/i],[[M,L]],[/((?:i[346]|x)86)[;\)]/i],[[M,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[M,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[M,"armhf"]],[/windows (ce|mobile); ppc;/i],[[M,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[M,/ower/,S,L]],[/(sun4\w)[;\)]/i],[[M,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[M,L]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[y,[T,At],[m,x]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[y,[T,At],[m,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[y,[T,R],[m,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[y,[T,R],[m,x]],[/(macintosh);/i],[y,[T,R]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[y,[T,Ne],[m,I]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[y,[T,Ge],[m,x]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[y,[T,Ge],[m,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[y,/_/g," "],[T,dt],[m,I]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[y,/_/g," "],[T,dt],[m,x]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[y,[T,"OPPO"],[m,I]],[/\b(opd2\d{3}a?) bui/i],[y,[T,"OPPO"],[m,x]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[y,[T,"Vivo"],[m,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[y,[T,"Realme"],[m,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[y,[T,We],[m,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[y,[T,We],[m,x]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[y,[T,at],[m,x]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[y,[T,at],[m,I]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[y,[T,"Lenovo"],[m,x]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[y,/_/g," "],[T,"Nokia"],[m,I]],[/(pixel c)\b/i],[y,[T,Ie],[m,x]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[y,[T,Ie],[m,I]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[y,[T,et],[m,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[y,"Xperia Tablet"],[T,et],[m,x]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[y,[T,"OnePlus"],[m,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[y,[T,se],[m,x]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[y,/(.+)/g,"Fire Phone $1"],[T,se],[m,I]],[/(playbook);[-\w\),; ]+(rim)/i],[y,T,[m,x]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[y,[T,ce],[m,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[y,[T,X],[m,x]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[y,[T,X],[m,I]],[/(nexus 9)/i],[y,[T,"HTC"],[m,x]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[y,/_/g," "],[m,I]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[y,[T,"Acer"],[m,x]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[y,[T,"Meizu"],[m,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[y,[T,"Ulefone"],[m,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,y,[m,I]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,y,[m,x]],[/(surface duo)/i],[y,[T,ft],[m,x]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[y,[T,"Fairphone"],[m,I]],[/(u304aa)/i],[y,[T,"AT&T"],[m,I]],[/\bsie-(\w*)/i],[y,[T,"Siemens"],[m,I]],[/\b(rct\w+) b/i],[y,[T,"RCA"],[m,x]],[/\b(venue[\d ]{2,7}) b/i],[y,[T,"Dell"],[m,x]],[/\b(q(?:mv|ta)\w+) b/i],[y,[T,"Verizon"],[m,x]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[y,[T,"Barnes & Noble"],[m,x]],[/\b(tm\d{3}\w+) b/i],[y,[T,"NuVision"],[m,x]],[/\b(k88) b/i],[y,[T,"ZTE"],[m,x]],[/\b(nx\d{3}j) b/i],[y,[T,"ZTE"],[m,I]],[/\b(gen\d{3}) b.+49h/i],[y,[T,"Swiss"],[m,I]],[/\b(zur\d{3}) b/i],[y,[T,"Swiss"],[m,x]],[/\b((zeki)?tb.*\b) b/i],[y,[T,"Zeki"],[m,x]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],y,[m,x]],[/\b(ns-?\w{0,9}) b/i],[y,[T,"Insignia"],[m,x]],[/\b((nxa|next)-?\w{0,9}) b/i],[y,[T,"NextBook"],[m,x]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],y,[m,I]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],y,[m,I]],[/\b(ph-1) /i],[y,[T,"Essential"],[m,I]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[y,[T,"Envizen"],[m,x]],[/\b(trio[-\w\. ]+) b/i],[y,[T,"MachSpeed"],[m,x]],[/\btu_(1491) b/i],[y,[T,"Rotor"],[m,x]],[/(shield[\w ]+) b/i],[y,[T,"Nvidia"],[m,x]],[/(sprint) (\w+)/i],[T,y,[m,I]],[/(kin\.[onetw]{3})/i],[[y,/\./g," "],[T,ft],[m,I]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[y,[T,rn],[m,x]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[y,[T,rn],[m,I]],[/smart-tv.+(samsung)/i],[T,[m,Z]],[/hbbtv.+maple;(\d+)/i],[[y,/^/,"SmartTV"],[T,At],[m,Z]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,at],[m,Z]],[/(apple) ?tv/i],[T,[y,R+" TV"],[m,Z]],[/crkey/i],[[y,ye+"cast"],[T,Ie],[m,Z]],[/droid.+aft(\w+)( bui|\))/i],[y,[T,se],[m,Z]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[y,[T,Ne],[m,Z]],[/(bravia[\w ]+)( bui|\))/i],[y,[T,et],[m,Z]],[/(mitv-\w{5}) bui/i],[y,[T,dt],[m,Z]],[/Hbbtv.*(technisat) (.*);/i],[T,y,[m,Z]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,G],[y,G],[m,Z]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,Z]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,y,[m,_]],[/droid.+; (shield) bui/i],[y,[T,"Nvidia"],[m,_]],[/(playstation [345portablevi]+)/i],[y,[T,et],[m,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[y,[T,ft],[m,_]],[/((pebble))app/i],[T,y,[m,Y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[y,[T,R],[m,Y]],[/droid.+; (glass) \d/i],[y,[T,Ie],[m,Y]],[/droid.+; (wt63?0{2,3})\)/i],[y,[T,rn],[m,Y]],[/(quest( \d| pro)?)/i],[y,[T,Yt],[m,Y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[m,$]],[/(aeobc)\b/i],[y,[T,se],[m,$]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[y,[m,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[y,[m,x]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,x]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,I]],[/(android[-\w\. ]{0,9});.+buil/i],[y,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[U,[P,be+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[U,[P,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[P,U],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[U,P]],os:[[/microsoft (windows) (vista|xp)/i],[P,U],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[P,[U,ge,He]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[U,ge,He],[P,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[U,/_/g,"."],[P,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[P,kt],[U,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[U,P],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[P,U],[/\(bb(10);/i],[U,[P,ce]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[U,[P,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[U,[P,Xe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[U,[P,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[U,[P,"watchOS"]],[/crkey\/([\d\.]+)/i],[U,[P,ye+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[P,St],U],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[P,U],[/(sunos) ?([\w\.\d]*)/i],[[P,"Solaris"],U],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[P,U]]},st=function(ht,yt){if(typeof ht===k&&(yt=ht,ht=d),!(this instanceof st))return new st(ht,yt).getResult();var Et=typeof l!==w&&l.navigator?l.navigator:d,Mt=ht||(Et&&Et.userAgent?Et.userAgent:S),_n=Et&&Et.userAgentData?Et.userAgentData:d,nn=yt?Re(Tt,yt):Tt,cn=Et&&Et.userAgent==Mt;return this.getBrowser=function(){var Ft={};return Ft[P]=d,Ft[U]=d,K.call(Ft,Mt,nn.browser),Ft[E]=D(Ft[U]),cn&&Et&&Et.brave&&typeof Et.brave.isBrave==p&&(Ft[P]="Brave"),Ft},this.getCPU=function(){var Ft={};return Ft[M]=d,K.call(Ft,Mt,nn.cpu),Ft},this.getDevice=function(){var Ft={};return Ft[T]=d,Ft[y]=d,Ft[m]=d,K.call(Ft,Mt,nn.device),cn&&!Ft[m]&&_n&&_n.mobile&&(Ft[m]=I),cn&&Ft[y]=="Macintosh"&&Et&&typeof Et.standalone!==w&&Et.maxTouchPoints&&Et.maxTouchPoints>2&&(Ft[y]="iPad",Ft[m]=x),Ft},this.getEngine=function(){var Ft={};return Ft[P]=d,Ft[U]=d,K.call(Ft,Mt,nn.engine),Ft},this.getOS=function(){var Ft={};return Ft[P]=d,Ft[U]=d,K.call(Ft,Mt,nn.os),cn&&!Ft[P]&&_n&&_n.platform&&_n.platform!="Unknown"&&(Ft[P]=_n.platform.replace(/chrome os/i,St).replace(/macos/i,kt)),Ft},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Mt},this.setUA=function(Ft){return Mt=typeof Ft===C&&Ft.length>Q?G(Ft,Q):Ft,this},this.setUA(Mt),this};st.VERSION=g,st.BROWSER=ne([P,U,E]),st.CPU=ne([M]),st.DEVICE=ne([y,T,m,_,I,Z,x,Y,$]),st.ENGINE=st.OS=ne([P,U]),i.exports&&(o=i.exports=st),o.UAParser=st;var ot=typeof l!==w&&(l.jQuery||l.Zepto);if(ot&&!ot.ua){var tt=new st;ot.ua=tt.getResult(),ot.ua.get=function(){return tt.getUA()},ot.ua.set=function(ht){tt.setUA(ht);var yt=tt.getResult();for(var Et in yt)ot.ua[Et]=yt[Et]}}})(typeof window=="object"?window:fu)})(Mb,Mb.exports);var pY=Mb.exports;const G3=new pY.UAParser;function gY(i){const o=G3.getOS(),l=G3.getBrowser();return"Gigset/".concat(i," (").concat(o.name," ").concat(o.version,"; ").concat(l.name," ").concat(l.version,")")}function Xg({sessionId:i,appVersion:o,apiVersion:l}){const d={"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*","Gigset-Client":gY(o),"Api-version":l!=null?l:"v1"};return i&&(d.Session=i),d}async function mY({deviceId:i,appVersion:o,baseUrl:l}){const d={deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(i,")"),deviceId:i};return(await wh)("".concat(l,"/devicehub-api/negotiate-tv"),{method:"POST",body:JSON.stringify(d),headers:Xg({appVersion:o})},{name:cs.NEGOTIATE_TV,message:"could not fetch negotiate-tv data"})}async function vY({deviceId:i,ticketCode:o,scanTvDeviceId:l,appVersion:d,baseUrl:g,ticketPrefix:S}){let b=g;S&&(b="".concat(g));const p={ticketCode:o,deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(i,")"),deviceId:i,scanTvDeviceId:l};return(await wh)("".concat(b,"/devicehub-api/negotiate"),{method:"POST",body:JSON.stringify(p),headers:Xg({appVersion:d})},{name:cs.NEGOTIATE,message:"could not fetch negotiate data"})}async function H3({sessionId:i,appVersion:o,baseUrl:l,ticketPrefix:d,ticketCode:g}){let S=l;d&&(S="".concat(l,"/").concat(d));const b=await wh("".concat(S,"/timeline-api/timeline/").concat(g,"/generate"),{method:"GET",headers:Xg({sessionId:i,appVersion:o})},{name:cs.GENERATE,message:"could not fetch generate data"});return{...await fetch("".concat(b.timelineUrl).concat(b.queryParameters),{method:"GET",headers:Xg({sessionId:i,appVersion:o})}).then(async w=>await w.json()),queryParameters:b.queryParameters,distributionUrl:b.distributionUrl}}async function V3({sessionId:i,appVersion:o,baseUrl:l,ticketCode:d}){return(await wh)("".concat(l,"/static-api/event/").concat(d,"/status"),{method:"GET",headers:Xg({sessionId:i,appVersion:o})},{name:cs.EVENT_STATUS,message:"failed to get event status data"})}function yY(i){return"".concat(i,"/timeline-api/drm/license?drm=widevine")}var Vc=(i=>(i.JUMPSPOT="jumpspot",i.FOLLOW="follow",i))(Vc||{});function oR(i){return[...i.places.flatMap((o,l)=>o.jumpSpots.map(d=>({camera:d.camera,title:d.title,type:"jumpspot",placeIndex:l,mapPosition:o.mapPosition,mapScale:o.mapScale,placeTitle:o.title}))),...i.follows.map(o=>({camera:o.camera,title:o.title,type:"follow",mapPosition:o.mapPositions}))].map((o,l)=>({...o,index:l}))}function NE(i,o){return oR(i).filter(d=>{const g=Ci(d.camera.span.time,i.frameRate),S=Ci(d.camera.span.time,i.frameRate)+Ci(d.camera.span.duration,i.frameRate);return g<=o&&S>=o})}function MB(i,o,l,d){const g=NE(i,o+l+2);if(!g.length)return;if(d){const p=(d==null?void 0:d.placeIndex)!==void 0&&g.find(w=>w.type==="jumpspot"&&w.placeIndex===(d==null?void 0:d.placeIndex));if(p)return p}const S=g.find(p=>p.type==="jumpspot");if(S)return S;const b=g.find(p=>p.type==="follow");if(b)return b}function EY(i){const o=oR(i),l=i.frameRate;return o.sort((d,g)=>{const S=Ci(d.camera.span.time,l)+Ci(d.camera.span.duration,l);return Ci(g.camera.span.time,l)+Ci(g.camera.span.duration,l)-S}),o[0]}function Ci(i,o){if(!i)return 0;const[l,d,g,S]=i.split(":").map(Number),b=l*60*60,p=d*60;if(o){const w=S/o;return b+p+g+w}else return b+p+g}function Db(i,o,l){return NE(o,l.getExpectedPositionInSeconds()).find(d=>d.index===i)}function K3(i,o){return oR(o).find(d=>d.camera.cameraID===i)}const _Y=i=>{if(typeof i=="string")return"String!";if(typeof i=="number")return"Int";if(typeof i=="boolean")return"Boolean";if(typeof i=="object"&&"OR"in i)return"ResourceSetFilter";throw new Error("Unknown type: ".concat(typeof i))};function DB(i,o,l){const d=i.includes("staging")||i.includes("qa"),g={...l,preview:d},b=(Array.isArray(o)?o[0]:o).replace(/#.*/g,"").replace(/\\n/g," ").replace(/\s\s+/g," ").replace(/\s*({|}|\(|\)|\.|:|,)\s*/g,"$1"),p=Object.entries(g).map(([k,C])=>"$".concat(k,": ").concat(_Y(C))).join(", "),w="query(".concat(p,")").concat(b);return JSON.stringify({query:w,variables:g})}const PB=i=>"https://graphql.contentful.com/content/v1/spaces/".concat(i,"/environments/master");function OB(i,o){return{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:i}}const TY=(i,o)=>DB(o,"\n        {\n          eventCollection(\n            limit: 1\n            preview: $preview\n            where: { ticketCodePrefix: $ticketCodePrefix }\n          ) {\n            items {\n              title\n              timeZoneInSecondsFromGmt\n              timeZoneCode\n              preScreen {\n                showTitle\n                countdownTitle\n                startTimeSubtitle\n                logoutButtonTitle\n                setupGuideButtonTitle\n                backgroundLandscape {\n                  url\n                }\n                backgroundPortrait {\n                  url\n                }\n                logoLeft {\n                  url\n                }\n                logoRight {\n                  url\n                }\n              }\n              upsell {\n                title\n                web {\n                  title\n                  body\n                  image {\n                    url\n                  }\n                  linkTitle\n                  link\n                  upsellLink {\n                    label\n                    url\n                  }\n                }\n              }\n              postScreen {\n                title\n                body\n                logoutButtonTitle\n                scanQrCodeLabel\n                offersCollection(limit: 10) {\n                  items {\n                    link\n                    image {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      ",{preview:!0,ticketCodePrefix:i});async function z3(i,o,l,d){var b,p;const g=TY(i.toUpperCase(),o),S=await wh(PB(d),OB(g,l),{name:cs.EVENT_META,message:"Could not fetch event meta."});return(p=(b=S==null?void 0:S.data)==null?void 0:b.eventCollection.items)==null?void 0:p[0]}function SY(i,o){const l=i.reduce((d,g)=>(d.OR.push({slug:g}),d),{OR:[]});return DB(o,"\n        {\n          resourceSetCollection(preview: $preview, where: $resourceSetFilter) {\n            items {\n              slug\n              resourcesCollection {\n                items {\n                  key\n                  value\n                }\n              }\n            }\n          }\n        }\n      ",{resourceSetFilter:l})}async function wY(i,o,l){var S,b;const d=SY(["app-general","player","setup-guide","setup","ticket-entry","web-requirements","web-app-pair"],i);return(b=(S=(await wh(PB(l),OB(d,o),{name:cs.CONTENTFUL,message:"Could not fetch contentful data."})).data)==null?void 0:S.resourceSetCollection)==null?void 0:b.items}const AY=i=>(o,l,d)=>{const g=i(o,l),S=i(o,d);return g!==null&&S!==null?g<S?g:S:g!==null?g:S!==null?S:null},IY=i=>({acceleration:o,position:l,velocity:d},g)=>{const S=i(l,d,o,g);if(S.length===0)return null;if(S.length===1)return S[0]>0?S[0]:null;if(S.length===2){if(S[1]<0)return null;if(S[0]>0)return S[0];if(S[1]>0)return S[1]}return null},bY=i=>(o,l,d)=>{const g=i(o,l,d);return g===null||g===Number.POSITIVE_INFINITY?null:g},CY=(i,o)=>class{constructor(){this._listeners=new WeakMap,this._nativeEventTarget=i()}addEventListener(d,g,S){if(g!==null){let b=this._listeners.get(g);b===void 0&&(b=o(this,g),typeof g=="function"&&this._listeners.set(g,b)),this._nativeEventTarget.addEventListener(d,b,S)}}dispatchEvent(d){return this._nativeEventTarget.dispatchEvent(d)}removeEventListener(d,g,S){const b=g===null?void 0:this._listeners.get(g);this._nativeEventTarget.removeEventListener(d,b===void 0?null:b,S)}},RY=i=>()=>{if(i===null)throw new Error("A native EventTarget could not be created.");return i.document.createElement("p")},xY=()=>{try{return new DOMException("","IllegalValueError")}catch(i){return i.name="IllegalValueError",i}},NY=()=>{try{return new DOMException("","InvalidStateError")}catch(i){return i.code=11,i.name="InvalidStateError",i}},MY=(i,o,l,d,g,S,b,p)=>class extends d{constructor(w={},k=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY){super();const{timingProviderSource:E,vector:y}=w.update===void 0?{timingProviderSource:null,vector:w}:{timingProviderSource:w,vector:{}};if(this._endPosition=E===null?C:E.endPosition,this._onchange=null,this._onerror=null,this._onreadystatechange=null,this._readyState=E===null?"open":E.readyState,this._skew=E===null?0:E.skew,this._startPosition=E===null?k:E.startPosition,this._timingProviderSource=E,this._timeoutId=null,this._vector=E===null?{acceleration:0,position:0,velocity:0,...g(y),timestamp:S.now()/1e3}:E.vector,C<this._vector.position&&(this._vector={...this._vector,acceleration:0,position:C,velocity:0}),k>this._vector.position&&(this._vector={...this._vector,acceleration:0,position:k,velocity:0}),this._setInternalTimeout(),E===null)b(()=>this.dispatchEvent(new Event("readystatechange")));else{const P=()=>{this._skew=E.skew},m=()=>this._setInternalVector(E.vector),T=()=>{this._isAllowedTransition(E.readyState)?this._readyState=E.readyState:(this._readyState="closed",E.removeEventListener("adjust",P),E.removeEventListener("change",m),E.removeEventListener("readystatechange",T)),E.error!==null&&b(()=>this.dispatchEvent(new ErrorEvent("error",{error:E.error}))),b(()=>this.dispatchEvent(new Event("readystatechange")))};E.addEventListener("adjust",P),E.addEventListener("change",m),E.addEventListener("readystatechange",T)}}get endPosition(){return this._endPosition}get onchange(){return this._onchange===null?this._onchange:this._onchange[0]}set onchange(w){if(this._onchange!==null&&this.removeEventListener("change",this._onchange[1]),typeof w=="function"){const k=w.bind(this);this.addEventListener("change",k),this._onchange=[w,k]}else this._onchange=null}get onerror(){return this._onerror===null?this._onerror:this._onerror[0]}set onerror(w){if(this._onerror!==null&&this.removeEventListener("error",this._onerror[1]),typeof w=="function"){const k=w.bind(this);this.addEventListener("error",k),this._onerror=[w,k]}else this._onerror=null}get onreadystatechange(){return this._onreadystatechange===null?this._onreadystatechange:this._onreadystatechange[0]}set onreadystatechange(w){if(this._onreadystatechange!==null&&this.removeEventListener("readystatechange",this._onreadystatechange[1]),typeof w=="function"){const k=w.bind(this);this.addEventListener("readystatechange",k),this._onreadystatechange=[w,k]}else this._onreadystatechange=null}get readyState(){return this._readyState}get startPosition(){return this._startPosition}get timingProviderSource(){return this._timingProviderSource}query(){if(this._readyState!=="open")throw l();const w=S.now()/1e3,k=this._timingProviderSource===null?w-this._vector.timestamp:w+this._skew-this._vector.timestamp,C=p(this._vector,k);return this._endPosition<C.position||this._startPosition>C.position?(this._setInternalVector({...C,acceleration:0,position:this._endPosition<C.position?this._endPosition:this._startPosition,velocity:0}),this.query()):C}update(w){if(this._readyState!=="open")return Promise.reject(l());if(this._timingProviderSource!==null){const m=this._timingProviderSource.update(w);return m instanceof Promise?m:Promise.reject(new TypeError("The timingProviderSource failed to return a promise."))}const k=g(w);if(Object.keys(k).length===0)return Promise.resolve();const C={...this.query(),...k},{position:E,velocity:y,acceleration:P}=C;return E<this._startPosition||E>this._endPosition||E===this._startPosition&&(y<0||y===0&&P<0)||E===this._endPosition&&(y>0||y===0&&P>0)?Promise.reject(o()):(this._setInternalVector(C),Promise.resolve())}_isAllowedTransition(w){return this._readyState==="closing"&&w==="closed"||this._readyState==="connecting"||this._readyState==="open"&&(w==="closed"||w==="closing")}_setInternalTimeout(){if(this._timeoutId!==null&&(clearTimeout(this._timeoutId),this._timeoutId=null),this._endPosition===Number.POSITIVE_INFINITY&&this._startPosition===Number.NEGATIVE_INFINITY||this._vector.acceleration===0&&this._vector.velocity===0)return;const w=i(this._vector,this._startPosition,this._endPosition);w!==null&&(this._timeoutId=b(()=>this.query(),w))}_setInternalVector(w){this._vector=w,this._setInternalTimeout(),b(()=>this.dispatchEvent(new Event("change")))}},DY=()=>typeof window>"u"?null:window,PY=(i,o,l,d)=>{if(l===0&&o===0)return i!==d?[]:[0];if(l===0)return[(d-i)/o];const g=o/l,S=Math.sqrt(g**2-2/l*(i-d));return[S-g,-(S+g)].filter(b=>!isNaN(b)).sort()},OY=i=>{if(i===void 0)return{};let o=i.acceleration!==null&&i.acceleration!==void 0?{acceleration:i.acceleration}:{};return i.position!==null&&i.position!==void 0&&(o={...o,position:i.position}),i.velocity!==null&&i.velocity!==void 0?{...o,velocity:i.velocity}:o},LB=(i,o)=>{const{acceleration:l,position:d,timestamp:g,velocity:S}=i;return{acceleration:l,position:d+S*o+.5*l*o**2,timestamp:g+o,velocity:S+l*o}},LY=(i,o)=>l=>{const d={value:i};return Object.defineProperties(l,{currentTarget:d,target:d}),typeof o=="function"?o.call(i,l):o.handleEvent.call(i,l)},kY=MY(bY(AY(IY(PY))),xY,NY,CY(RY(DY()),LY),OY,performance,setTimeout,LB),Y3=Symbol.observable||"@@observable";function FY(i){return Symbol.observable||(typeof i=="function"&&i.prototype&&i.prototype[Symbol.observable]?(i.prototype[Y3]=i.prototype[Symbol.observable],delete i.prototype[Symbol.observable]):(i[Y3]=i[Symbol.observable],delete i[Symbol.observable])),i}const l0=()=>{},W3=i=>{throw i};function UY(i){var o,l,d;return i?i.next&&i.error&&i.complete?i:{complete:((o=i.complete)!=null?o:l0).bind(i),error:((l=i.error)!=null?l:W3).bind(i),next:((d=i.next)!=null?d:l0).bind(i)}:{complete:l0,error:W3,next:l0}}const BY=(i,o,l)=>()=>l(d=>{if(o===null||o.cancelAnimationFrame===void 0||o.requestAnimationFrame===void 0)return i(d);let g=o.requestAnimationFrame(function S(b){g=o.requestAnimationFrame(S),d.next(b)});return()=>o.cancelAnimationFrame(g)}),jY=i=>(o,l,d)=>i(g=>{const S=b=>g.next(b);return o.addEventListener(l,S,d),()=>o.removeEventListener(l,S,d)}),ZY=()=>typeof window>"u"?null:window,qY=(i,o)=>{const l=()=>{},d=g=>typeof g[0]=="function";return g=>{const S=(...b)=>{const p=g(d(b)?o({next:b[0]}):o(...b));return p!==void 0?p:l};return S[Symbol.observable]=()=>({subscribe:(...b)=>({unsubscribe:S(...b)})}),i(S)}},GY=i=>(i.error(new Error("The required browser API seems to be not supported.")),()=>{}),HY=ZY(),kB=qY(FY,UY),VY=BY(GY,HY,kB),KY=jY(kB),zY=i=>(o,l,d,g)=>{const S=(Math.abs(o)+i)/i;return Math.max(l,Math.min(d,o>0?g/S:S*g))},YY=1,WY=.5,$3=.025,$Y=(i,o,l,d,g,S,b)=>{const p=b!==null&&b.navigator.userAgent.includes("Safari")&&!b.navigator.userAgent.includes("Chrome")?d($3):l(i(WY),g(b),YY,$3);return o(S,p)},XY=i=>(o,l,d)=>{const g=i.get(o);(g===void 0||Math.abs(g[0]-l)>1e-4||g[1]!==d)&&(o.currentTime=d,i.set(o,[o.currentTime,d]))},QY=(i,o,l)=>(d,g,S)=>{const b=o.get(d);(b===void 0||b[0]!==g||b[1]!==S)&&(d.playbackRate=S>1?Math.max(l,S):Math.min(i,S),o.set(d,[d.playbackRate,S]))},FB=(i,o)=>(l,d,g=null,S=null)=>i(l,d,o,g,S),JY=(i,o,l,d,g,S)=>(b,p,w,k=null,C=null)=>{let E=null;const y=()=>{const{currentTime:M,duration:_,playbackRate:I}=b,x=p.query();E=w(k===null?x:k(x),M,E);const Z=typeof _=="number"&&!isNaN(_)?_:0,{position:Y,velocity:$}=C===null?E:C(E);return E={...E,position:Y,velocity:$},S(M,Z,b,I,Y,$),$!==0};let P;const m=()=>{y()||(P(),P=U())},T=()=>{let M=g(()=>m(),100);const _=()=>{o(M),M=g(()=>m(),100)},I=[()=>o(M),i()(()=>{_(),m()}),d(p,"change")(()=>{l.visibilityState==="hidden"&&(_(),m())})];return()=>I.forEach(x=>x())},U=()=>d(p,"change")(()=>{y()&&(P(),P=T())});return P=y()?T():U(),()=>P()},eW=(i,[o,l],d,g)=>({position:S,velocity:b},p,w)=>{let{mediaElementDelay:k}=w!=null?w:{mediaElementDelay:0};if(b<o||b>l)return{mediaElementDelay:k,position:S,velocity:0};if(S<0||b===0)return{mediaElementDelay:k,position:S,velocity:b};const C=p-S,E=Math.abs(C);if(E>d){const{position:y}=w!=null?w:{position:null};if(C<0||C>k)return y===p&&(k+=E),{mediaElementDelay:k,position:S+k,velocity:b};if(y!==p)return k-=E,{mediaElementDelay:k,position:S+k,velocity:b}}return E>g?{mediaElementDelay:k,position:p,velocity:i(C,o,l,b)}:{mediaElementDelay:k,position:p,velocity:b}},tW=(i,o,l,d)=>(g,S,b,p,w,k)=>{w<0?(g>0&&l(b,g,0),i(b)):w>=S?(g!==S&&l(b,g,S),i(b)):g!==w?(l(b,g,w),k!==0?(p!==k&&d(b,p,k),o(b)):i(b)):p!==k&&(k!==0?(d(b,p,k),o(b)):i(b))},X3=.5,nW=i=>o=>(l,d,g)=>{let{lastAppliedPostion:S,lastAppliedTimestamp:b,lastAppliedVelocity:p,lastPlayheadDifference:w,mediaElementDelay:k,numberOfDetectedResets:C,numberOfExpectedResets:E}=g!=null?g:{lastAppliedPostion:0,lastAppliedTimestamp:0,lastAppliedVelocity:0,lastPlayheadDifference:0,mediaElementDelay:0,numberOfDetectedResets:0,numberOfExpectedResets:1};if(l.position<0||l.velocity===0)return S=l.position,p=l.velocity,{lastAppliedPostion:S,lastAppliedTimestamp:0,lastAppliedVelocity:p,lastPlayheadDifference:w,mediaElementDelay:k,numberOfDetectedResets:C,numberOfExpectedResets:E,position:S,velocity:p};if(p===l.velocity&&w<X3){const m=Math.abs(d-S)*p;if(m<X3)if(m+.001>w){if(w=m,C<E)return{lastAppliedPostion:S,lastAppliedTimestamp:b,lastAppliedVelocity:p,lastPlayheadDifference:w,mediaElementDelay:k,numberOfDetectedResets:C,numberOfExpectedResets:E,position:d,velocity:p}}else{if(w=m,C+=1,C<=E)return{lastAppliedPostion:S,lastAppliedTimestamp:b,lastAppliedVelocity:p,lastPlayheadDifference:w,mediaElementDelay:k,numberOfDetectedResets:C,numberOfExpectedResets:E,position:d,velocity:p};E+=1}else w=m,E=Math.max(C,1)}else b=0;const y=Math.abs(d-l.position),P=p===0||p<0&&l.velocity>0||p>0&&l.velocity<0;if(y>o||P){if(b>0){const m=l.timestamp-b,{position:T}=i({acceleration:0,position:S,timestamp:b,velocity:p},m);k=T-d}return S=l.position+k,p=l.velocity,{lastAppliedPostion:S,lastAppliedTimestamp:l.timestamp,lastAppliedVelocity:p,lastPlayheadDifference:0,mediaElementDelay:k,numberOfDetectedResets:0,numberOfExpectedResets:E,position:S,velocity:p}}return{lastAppliedPostion:S,lastAppliedTimestamp:b,lastAppliedVelocity:p,lastPlayheadDifference:w,mediaElementDelay:k,numberOfDetectedResets:C,numberOfExpectedResets:E,position:d,velocity:l.velocity}},rW=()=>typeof window>"u"?null:window,aI=[Number.MIN_VALUE,Number.MAX_VALUE],iW=i=>{if(i===null)return aI;const o=new i.Audio;try{o.playbackRate=17}catch(l){return[.0625,16]}try{o.playbackRate=-1}catch(l){return[0,aI[1]]}return aI},oW=i=>{i.paused||i.pause()},aW=i=>{i.paused&&i.play().catch(o=>console.error(o))},UB=nW(LB),sW=tW(oW,aW,XY(new WeakMap),QY(881/882,new WeakMap,882/881)),BB=JY(VY,clearInterval,document,KY,setInterval,sW);$Y(zY,FB,eW,UB,iW,BB,rW());const uW=FB(BB,UB(.4));class lW{constructor(){this.connectedSources=new Map,this.timingObject=new kY}start(){this.timingObject.update({velocity:1})}stop(){this.timingObject.update({velocity:0})}setVelocity(o){this.timingObject.update({velocity:o})}updatePosition(o){this.timingObject.update({position:o})}connectMediaElement(o,l=0){const d=this.connectedSources.get(o);d&&d();const g=uW(o,this.timingObject,({position:S,...b})=>({...b,position:S-l}));return this.connectedSources.set(o,g),g}destroy(){this.connectedSources.forEach(o=>{o()})}}class cW extends hf{constructor(o){super(),this.isPaused=!1,this.playheadOffset=0,this.timelineFetchBuffer=3e5,this.prepareBuffer=1e4,this.playerSyncer=new lW,this.state="idle",this.startTime=o,this.serverTimeOffset=0}get adjustedStartTime(){return this.startTime.getTime()?this.startTime.getTime()+this.serverTimeOffset:0}get isLive(){const o=this.adjustedEndTime;return this.adjustedStartTime&&this.adjustedStartTime<Date.now()&&o&&o>Date.now()}get timeToPrepareStart(){return this.adjustedStartTime-Date.now()-this.prepareBuffer}get isInPrepare(){return this.timeToPrepareStart<0&&this.timeToPrepareStart>this.prepareBuffer*-1}get adjustedEndTime(){if(!this.adjustedStartTime||!this._timelineData)return 0;const o=this._timelineData.frameRate,l=EY(this._timelineData);return this.adjustedStartTime+(Ci(l.camera.span.time,o)+Ci(l.camera.span.duration,o))*1e3+this.playheadOffset*1e3}get demoEndtime(){return Date.now()-7047966+1e4}set timelineData(o){this._timelineData=o}pausePlayStream(o,l,d){if(o==="pause"&&!this.isPaused)this.isPaused=!0,this.playerSyncer.stop();else if(o==="play"){if(l&&d){const g=new Date(l).getTime()/1e3,S=new Date(d).getTime()/1e3;this.playheadOffset!==0&&(this.playheadOffset=0),this.playheadOffset=g-S,this.playerSyncer.updatePosition(this.getExpectedPositionInSeconds())}this.onStart()}}serverNow(){return Date.now()-this.serverTimeOffset}onStart(){this.state="started",this.emit("start",void 0),this.isPaused=!1,this.playerSyncer.start(),clearInterval(this.queryInterval),this.queryInterval=setInterval(()=>{const o=this.playerSyncer.timingObject.query().position,l=this.getExpectedPositionInSeconds();this.isPaused||o.toFixed(1)!==l.toFixed(1)&&(console.log("positon is off",o,l),this.playerSyncer.updatePosition(l))},500)}onPrepareStart(){this.emit("prepareStart",void 0)}updateStartTime(o,l=!1){this.startTime=o,this.emit("startTimeUpdated",void 0),this.preparePlayback(),l&&this.adjustedStartTime>Date.now()&&this.updateTimelineFetch()}updateTimelineFetch(){this.adjustedStartTime-this.timelineFetchBuffer>Date.now()?(clearTimeout(this.fetchTimelineTimeout),this.fetchTimelineTimeout=setTimeout(()=>{this.emit("fetchTimeline",void 0)},this.adjustedStartTime-this.timelineFetchBuffer-Date.now())):this.emit("fetchTimeline",void 0)}preparePlayback(){this.adjustedStartTime>Date.now()?(clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),this.playheadOffset=0,this.startTimeout=setTimeout(()=>{this.onStart()},this.adjustedStartTime-Date.now()),this.timeToPrepareStart>0?this.prepareStartTimeout=setTimeout(()=>{this.onPrepareStart()},this.timeToPrepareStart):this.onPrepareStart()):this.state!=="started"&&this._timelineData&&this.onStart()}updateServerTimeOffset(o){this.serverTimeOffset=o}getExpectedPositionInSeconds(){return(Date.now()-this.adjustedStartTime)/1e3-this.playheadOffset}destroy(){clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),clearInterval(this.queryInterval),clearTimeout(this.fetchTimelineTimeout),super.destroy()}}class fW extends hf{constructor(o,l,d){super(),this.eventClock=o,this.timelineData=void 0,this.nearEndThreshold=l!=null?l:0,this.transitionThreshold=d!=null?d:2}updateTimelineData(o){this.timelineData=o}updatePlaying(o){var d,g,S;let l=!1;if(this.timelineData){const b=this.timelineData.frameRate,p=(S=(g=(d=o.camera.attentions)==null?void 0:d.filter(w=>w.scope==="global"))==null?void 0:g.sort((w,k)=>Ci(w.time)-Ci(k.time)))!=null?S:[];clearInterval(this.playbackInterval),this.playbackInterval=setInterval(()=>{clearTimeout(this.nearEndTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.attentionTimeout);const k=this.eventClock.getExpectedPositionInSeconds()-Ci(o.camera.span.time,b),C=Ci(o.camera.span.duration,b)-k;if(p.length){const E=p.find(P=>k<Ci(P.time)),y=E?Ci(E.time)-k:0;y>0&&y<1&&(this.attentionTimeout=setTimeout(()=>{this.emit("attention",void 0)},y))}C<=this.nearEndThreshold+1&&C>this.nearEndThreshold&&!l?this.nearEndTimeout=setTimeout(()=>{this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0},(C-this.nearEndThreshold)*1e3):C<this.nearEndThreshold&&!l&&(this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0),C<=this.transitionThreshold+1&&C>this.transitionThreshold&&(this.transitionTimeout=setTimeout(()=>{this.emit("transition",void 0)},(C-this.transitionThreshold)*1e3)),C<=1&&C>0&&(this.endedTimeout=setTimeout(()=>{this.emit("ended",void 0)},C*1e3))},1e3)}}endEvent(){this.emit("eventEnded",void 0)}destroy(){clearInterval(this.playbackInterval),clearTimeout(this.nearEndTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.attentionTimeout),super.destroy()}}const dW="1.0.0";function hW({baseUrl:i,contentfulAccessToken:o,contentfulSpaceId:l}){const[d,g]=In.useState(),[S,b]=In.useState(),p=In.useCallback((w,k)=>{var C,E;return d&&((E=(C=d.find(y=>y.slug===w))==null?void 0:C.resourcesCollection.items.find(y=>y.key===k))==null?void 0:E.value)||""},[d]);return In.useEffect(()=>{i&&o&&l&&(b(void 0),wY(i,o,l).then(w=>{g(w)}).catch(w=>{b(w)}))},[i,o,l]),{contentfulData:d,getContentfulValue:p,error:S}}const pW={ticketCode:"",preferredProfile:"dash-drm",getContentfulValue:()=>"",isDev:!1,preConnectErrors:[],postConnectErrors:[]},Ha=du.createContext(pW);function gW({children:i,baseUrl:o,preferredProfile:l,contentfulAccessToken:d,contentfulSpaceId:g,newSetupToggle:S=!1,ticketCodeProp:b}){const p=Mg(),w=dW,[k,C]=In.useState(),[E,y]=In.useState(),[P,m]=In.useState(),[T,U]=In.useState(),[M,_]=In.useState(),[I,x]=In.useState(),[Z,Y]=In.useState(),[$,Q]=In.useState(b),[se,R]=In.useState(),[X,ce]=In.useState(),[oe,ye]=In.useState(),[be,Xe]=In.useState(),[Ie,Ge]=In.useState(),[at,ft]=In.useState([]),[We,ut]=In.useState([]),[At,Ne]=In.useState(!1),[et,dt]=In.useState(),{getContentfulValue:rn,error:Yt}=hW({baseUrl:o,contentfulAccessToken:d,contentfulSpaceId:g}),St=3;function kt(Re,ne){return ne.filter(Ue=>Re!==Ue.name)}return In.useEffect(()=>{ft(Yt?Re=>[...Re,Yt]:Re=>kt(cs.CONTENTFUL,Re))},[Yt]),In.useEffect(()=>{Q(b)},[b]),In.useEffect(()=>{o&&p&&S&&(async()=>{let ne=0;const Ue=()=>mY({deviceId:p,appVersion:w,baseUrl:o});for(;ne<St;)await Ue().then(L=>{Ge(L),ne=St}).catch(L=>{ne+=1,ne===2&&console.error(L)})})()},[w,o,p,S]),In.useEffect(()=>{if(!Ie)return;const Re=new NB().withUrl(Ie.url,{accessTokenFactory:()=>Ie.accessToken,transport:mo.WebSockets}).build();Re.start().catch(ne=>{console.error("Global signalR connection failed:",ne)}),Re.on(au.SETUP_REQUEST_HOST_TV_CONNECTED,({scanTvDeviceId:ne,ticketCode:Ue})=>{Q(Ue),R(ne),localStorage.setItem("ticketCode",Ue)}),_(Re)},[Ie]),In.useEffect(()=>{!$||!se||!M||(console.log("Disconnecting global signalR..."),M.invoke(au.CLIENT_DISCONNECT))},[$,se,M]),In.useEffect(()=>{if(!$||!se&&S){Xe(void 0);return}const Re=$[0];ft(ne=>kt(cs.NEGOTIATE,ne)),vY({deviceId:p,deviceType:6,appVersion:w,ticketCode:$,scanTvDeviceId:se,ticketPrefix:Re,baseUrl:o}).then(ne=>{Xe(ne),Ne(ne.ticketType>3)}).catch(ne=>{ft(Ue=>[...Ue,ne])})},[$,w,o,p,se,S]),In.useEffect(()=>{if(!(be!=null&&be.accessToken)||!be.url||!$)return;const Re=new cW(new Date(0)),ne=new fW(Re),Ue=new hY({groupName:$,deviceId:p,debug:!1});return Ue.connect({url:be.url,accessToken:be.accessToken}),Ue.on("setupStatusUpdate",({deviceLists:L})=>{const D=L.connectedDevices[0].sessionId;dt(L.connectedDevices),console.log("signalRClient connected with sessionId: ",D),x(D),ut(ge=>kt(cs.EVENT_STATUS,ge));const G=()=>{V3({appVersion:w,baseUrl:o,ticketCode:$,sessionId:D}).then(ge=>{if(y(ge),ge.broadcastStart)if(At){const de=new Date;de.setHours(de.getHours()+1),Re.updateStartTime(de,!0)}else Re.updateStartTime(new Date(ge.broadcastStart),!0)}).catch(ge=>{ut(de=>[...de,ge])})};G(),Ue.on("eventStatusChanged",G),z3($[0],o,d,g).then(ge=>{m(ge)}).catch(ge=>{ut(de=>[...de,ge])}),ut(ge=>kt(cs.GENERATE,ge));const K=()=>{H3({sessionId:D,appVersion:w,baseUrl:o,ticketCode:$}).then(ge=>{Re.timelineData=ge,C(ge),ne.updateTimelineData(ge)}).catch(ge=>{ut(de=>[...de,ge])})};Re.on("fetchTimeline",K)}),Ue.on("stateUpdated",({state:L})=>{console.log(L,"stateUpdate"),Y(L)}),Ue.on("stateUpdated",({state:L})=>{console.log(L,"stateUpdate"),Y(L)}),Ue.on("serverTimeOffsetUpdate",({serverTimeOffset:L})=>{console.log("server time offset updated",L),Re.updateServerTimeOffset(L)}),Ue.on("startTimeUpdated",({startTime:L})=>{console.log("startTimeUpdated",L),Re.updateStartTime(L,!0)}),Ue.on("connected",({sessionId:L})=>{console.log("signalRClient connected with sessionId: ",L),x(L),ut(K=>kt(cs.EVENT_STATUS,K));const D=()=>{V3({appVersion:w,baseUrl:o,ticketCode:$,sessionId:L}).then(K=>{if(y(K),K.broadcastStart)if(At){const ge=new Date;ge.setHours(ge.getHours()+1),Re.updateStartTime(ge,!0)}else Re.updateStartTime(new Date(K.broadcastStart),!0)}).catch(K=>{ut(ge=>[...ge,K])})};D(),Ue.on("eventStatusChanged",D),z3($[0],o,d,g).then(K=>{m(K)}).catch(K=>{ut(ge=>[...ge,K])}),ut(K=>kt(cs.GENERATE,K));const G=()=>{H3({sessionId:L,appVersion:w,baseUrl:o,ticketCode:$}).then(K=>{Re.timelineData=K,C(K),ne.updateTimelineData(K)}).catch(K=>{ut(ge=>[...ge,K])})};Re.on("fetchTimeline",G)}),U(Ue),ce(Re),ye(ne),()=>{Y(void 0),dt(void 0),Ue.destroy(),ne.destroy(),Re.destroy()}},[be,$,w,o,p,d,g,At]),Rt.jsx(Ha.Provider,{value:{signalRClient:T,timelineData:k,eventStatus:E,eventMeta:P,hubState:Z,sessionId:I,ticketCode:$,eventClock:X,orchestrator:oe,preferredProfile:l,baseUrl:o,negotiateData:be,isDev:At,getContentfulValue:rn,preConnectErrors:at,postConnectErrors:We,connectedDevices:et},children:i})}const mW="_focused_tk4zu_1",vW={focused:mW};function ta({selfFocus:i,...o}){const{ref:l,focused:d,focusSelf:g}=bB.useFocusable({onEnterPress:()=>{o.onClick()}});return In.useEffect(()=>{i&&g()},[g,i]),Rt.jsx("button",{...o,ref:l,className:"".concat(o.className||""," ").concat(d?vW.focused:""," ").concat(d&&o.focusstile?o.focusstile:"")})}function Ah(){return In.useContext(Ha).signalRClient}function pf(){return In.useContext(Ha).timelineData}function aR(){return In.useContext(Ha).eventMeta}function yW(){return In.useContext(Ha).hubState}function EW(){return In.useContext(Ha).sessionId}function _W(){return In.useContext(Ha).ticketCode[0]}function vu(){return In.useContext(Ha).eventClock}function TW(){return In.useContext(Ha).negotiateData}function sR(){return In.useContext(Ha).isDev}function SW(){return In.useContext(Ha).postConnectErrors}function cm(){return In.useContext(Ha).orchestrator}function uR(){return In.useContext(Ha).connectedDevices}function jB(){const i=pf(),o=_W(),l=In.useContext(Ha);return In.useMemo(()=>[i==null?void 0:i.profiles.find(d=>d.name===l.preferredProfile),l.preferredProfile==="dash-drm"&&l.baseUrl?yY(l.baseUrl):void 0,i==null?void 0:i.queryParameters],[l.preferredProfile,o,i,l.baseUrl])}const wW=()=>Rt.jsx("svg",{width:"800px",height:"800px",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:Rt.jsx("path",{d:"M36.96875 0C36.417969 0.015625 35.988281 0.480469 36 1.03125C36.011719 1.578125 36.457031 2 37 2L37.03125 2C37.160156 1.984375 40.671875 1.984375 44.28125 5.6875C47.914063 9.410156 48 12.96875 48 13C48 13.550781 48.445313 14 49 14C49.554688 14 50 13.550781 50 13C50 12.824219 49.953125 8.65625 45.71875 4.3125C41.457031 -0.0546875 37.164063 -0.0117188 36.96875 0 Z M 37 6C36.453125 6 36.007813 6.453125 36 7C35.992188 7.546875 36.453125 7.988281 37 8C37.066406 8 38.628906 8.066406 40.28125 9.71875C41.933594 11.371094 42 12.945313 42 13C42 13.550781 42.445313 14 43 14C43.554688 14 44 13.550781 44 13C44 12.902344 43.984375 10.546875 41.71875 8.28125C39.453125 6.015625 37.097656 6 37 6 Z M 28.71875 6.03125C27.644531 6.027344 26.539063 6.402344 25.6875 7.1875L1.1875 31.78125C-0.40625 33.375 -0.417969 35.984375 1.1875 37.71875L12.40625 48.90625C13.175781 49.675781 14.199219 50.09375 15.3125 50.09375C16.410156 50.09375 17.46875 49.683594 18.3125 48.90625L42.84375 24.34375C44.371094 22.558594 44.371094 19.964844 42.8125 18.40625L31.59375 7.1875C30.828125 6.421875 29.792969 6.035156 28.71875 6.03125 Z M 28 15C31.867188 15 35 18.132813 35 22C35 25.867188 31.867188 29 28 29C24.132813 29 21 25.867188 21 22C21 18.132813 24.132813 15 28 15 Z M 28 20C26.894531 20 26 20.894531 26 22C26 23.105469 26.894531 24 28 24C29.105469 24 30 23.105469 30 22C30 20.894531 29.105469 20 28 20 Z M 15 27C16.105469 27 17 27.894531 17 29C17 30.105469 16.105469 31 15 31C13.894531 31 13 30.105469 13 29C13 27.894531 13.894531 27 15 27 Z M 10 32C11.105469 32 12 32.894531 12 34C12 35.105469 11.105469 36 10 36C8.894531 36 8 35.105469 8 34C8 32.894531 8.894531 32 10 32 Z M 21 33C22.105469 33 23 33.894531 23 35C23 36.105469 22.105469 37 21 37C19.894531 37 19 36.105469 19 35C19 33.894531 19.894531 33 21 33 Z M 16 38C17.105469 38 18 38.894531 18 40C18 41.105469 17.105469 42 16 42C14.894531 42 14 41.105469 14 40C14 38.894531 14.894531 38 16 38Z"})});function AW(){const i=Ah(),o=vu(),l=In.useCallback(b=>{!o||!i||i.sendGroupCommand({command:"play",value:{senderID:Mg(),startDate:new Date(o.startTime.getTime()-b).toISOString(),rateClockState:{rate:1}}})},[i,o]),d=In.useCallback(b=>{!o||!i||i.sendGroupCommand({command:"play",value:{senderID:Mg(),startDate:new Date(o.serverNow()-b).toISOString(),rateClockState:{rate:1}}})},[i,o]),g=In.useCallback(()=>{if(!o||!i)return;const b=new Date;b.setSeconds(b.getSeconds()+5),i.sendGroupCommand({command:"play",value:{senderID:Mg(),startDate:new Date(b).toISOString(),rateClockState:{rate:1}}})},[i,o]);return{seekBy:l,seekTo:d,disconnect:()=>{i==null||i.disconnect()},restart:g}}function IW({eventPlayer:i}){var T,U;const o=Ah(),l=vu(),[d,g]=In.useState(!1),[S,b]=In.useState(),{seekBy:p,seekTo:w,disconnect:k,restart:C}=AW(),[E,y]=In.useState([]),P=pf(),m=()=>{g(!d)};return In.useEffect(()=>{if(!l||!P)return;const M=setInterval(()=>{const _=l.getExpectedPositionInSeconds(),I=NE(P,_);y(I.map(x=>x)),b({expectedPosition:_})},500);return()=>{clearInterval(M)}},[l,P]),Rt.jsxs("div",{className:"demo-remote-container",children:[Rt.jsx("div",{className:"icon-wrapper",onClick:m,children:Rt.jsx(wW,{})}),d&&Rt.jsxs(Rt.Fragment,{children:[Rt.jsx("h2",{children:"Demo Remote"}),Rt.jsx(ta,{selfFocus:!0,onClick:()=>{i==null||i.requestFullscreen()},children:"Go to fullscreen"}),S&&Rt.jsx("div",{children:Rt.jsxs("p",{children:["Expected position in seconds"," ",S.expectedPosition.toFixed(2)]})}),Rt.jsx(ta,{onClick:()=>{w(-5e3)},children:"Start in 5 sec"}),Rt.jsx(ta,{onClick:()=>{C()},children:"Restart"}),Rt.jsx(ta,{onClick:()=>{p(1e4)},children:"Seek Forward"}),Rt.jsx(ta,{onClick:()=>{p(-1e4)},children:"Seek Backward"}),Rt.jsx(ta,{onClick:()=>{w(1e4)},children:"Seek to first video"}),Rt.jsx(ta,{onClick:()=>{w(1e5)},children:"Seek to 100"}),Rt.jsx(ta,{onClick:k,children:"Disconnect"}),Rt.jsx("h3",{children:"Available streams right now:"}),E.map(M=>Rt.jsxs("div",{className:"cast-button-group",children:[Rt.jsxs(ta,{onClick:()=>{o==null||o.sendGroupCommand({command:"cast",value:M.index})},children:[Rt.jsx("span",{style:{margin:"10px"},children:"►"}),M.title]}),Rt.jsxs(ta,{onClick:()=>{o==null||o.sendGroupCommand({command:"prepareCast",value:M.index})},children:[Rt.jsx("span",{style:{margin:"10px"},children:"►"}),"prepare cast"]}),Rt.jsxs(ta,{onClick:()=>{o==null||o.sendGroupCommand({command:"cancelCast",value:M.index})},children:[Rt.jsx("span",{style:{margin:"10px"},children:"►"}),"cancel cast"]})]},M.camera.assetName)),Rt.jsx("h3",{children:"Statistics:"}),Rt.jsxs("div",{className:"statistics-block",children:[Rt.jsx("label",{children:"Total frames:"}),Rt.jsx("div",{children:((T=i==null?void 0:i.stats)==null?void 0:T.totalVideoFrames)||0})]}),Rt.jsxs("div",{className:"statistics-block",children:[Rt.jsx("label",{children:"Dropped frames:"}),Rt.jsx("div",{children:((U=i==null?void 0:i.stats)==null?void 0:U.droppedVideoFrames)||0})]})]})]})}var ZB={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(i,o){(function(l,d){i.exports=d()})(self,function(){return function(){var l={4593:function(b,p){var w,k,C,E,y,P=function(U){for(var M=[],_=0;_<U.length;++_){var I=U.charCodeAt(_);I<128?M.push(I):I<2048?(M.push(192|I>>6),M.push(128|63&I)):I<65536?(M.push(224|I>>12),M.push(128|63&I>>6),M.push(128|63&I)):(M.push(240|I>>18),M.push(128|63&I>>12),M.push(128|63&I>>6),M.push(128|63&I))}return M},m=function(U){for(var M=[],_=0;_<U.length;){var I=U[_++];I<128||(I<224?(I=(31&I)<<6,I|=63&U[_++]):I<240?(I=(15&I)<<12,I|=(63&U[_++])<<6,I|=63&U[_++]):(I=(7&I)<<18,I|=(63&U[_++])<<12,I|=(63&U[_++])<<6,I|=63&U[_++])),M.push(String.fromCharCode(I))}return M.join("")},T={};w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=function(U){for(var M=0,_=[],I=0|U.length/3;0<I--;){var x=(U[M]<<16)+(U[M+1]<<8)+U[M+2];M+=3,_.push(w.charAt(63&x>>18)),_.push(w.charAt(63&x>>12)),_.push(w.charAt(63&x>>6)),_.push(w.charAt(63&x))}return U.length-M==2?(x=(U[M]<<16)+(U[M+1]<<8),_.push(w.charAt(63&x>>18)),_.push(w.charAt(63&x>>12)),_.push(w.charAt(63&x>>6)),_.push("=")):U.length-M==1&&(x=U[M]<<16,_.push(w.charAt(63&x>>18)),_.push(w.charAt(63&x>>12)),_.push("==")),_.join("")},C=function(){for(var U=[],M=0;M<w.length;++M)U[w.charCodeAt(M)]=M;return U[61]=0,U}(),E=function(U){for(var M=0,_=[],I=0|U.length/4;0<I--;){var x=(C[U.charCodeAt(M)]<<18)+(C[U.charCodeAt(M+1)]<<12)+(C[U.charCodeAt(M+2)]<<6)+C[U.charCodeAt(M+3)];_.push(255&x>>16),_.push(255&x>>8),_.push(255&x),M+=4}return _&&(U.charAt(M-2)=="="?(_.pop(),_.pop()):U.charAt(M-1)=="="&&_.pop()),_},y={encode:function(U){for(var M=[],_=0;_<U.length;++_)M.push(U.charCodeAt(_));return M},decode:function(U){for(var M=0;M<s.length;++M)a[M]=String.fromCharCode(a[M]);return a.join("")}},T.decodeArray=function(U){var M=E(U);return new Uint8Array(M)},T.encodeASCII=function(U){var M=y.encode(U);return k(M)},T.decodeASCII=function(U){var M=E(U);return y.decode(M)},T.encode=function(U){var M=P(U);return k(M)},T.decode=function(U){var M=E(U);return m(M)},p.decode=T.decode,p.decodeArray=T.decodeArray,p.encode=T.encode,p.encodeASCII=T.encodeASCII},452:function(b,p){(function(w){var k={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},C=function(R){var X=R;return k.hasOwnProperty(R)&&(X=k[R]),String.fromCharCode(X)},E=15,y=32,P={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},m={17:2,18:4,21:6,22:8,23:10,19:13,20:15},T={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},U={25:2,26:4,29:6,30:8,31:10,27:13,28:15},M=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],_={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(R){this.time=R},log:function(R,X){var ce=this.verboseFilter[R];this.verboseLevel>=ce&&console.log(this.time+" ["+R+"] "+X)}},I=function(R){for(var X=[],ce=0;ce<R.length;ce++)X.push(R[ce].toString(16));return X},x=function(R,X,ce,oe,ye){this.foreground=R||"white",this.underline=X||!1,this.italics=ce||!1,this.background=oe||"black",this.flash=ye||!1};x.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(R){for(var X=["foreground","underline","italics","background","flash"],ce=0;ce<X.length;ce++){var oe=X[ce];R.hasOwnProperty(oe)&&(this[oe]=R[oe])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(R){return this.foreground===R.foreground&&this.underline===R.underline&&this.italics===R.italics&&this.background===R.background&&this.flash===R.flash},copy:function(R){this.foreground=R.foreground,this.underline=R.underline,this.italics=R.italics,this.background=R.background,this.flash=R.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var Z=function(R,X,ce,oe,ye,be){this.uchar=R||" ",this.penState=new x(X,ce,oe,ye,be)};Z.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(R,X){this.uchar=R,this.penState.copy(X)},setPenState:function(R){this.penState.copy(R)},equals:function(R){return this.uchar===R.uchar&&this.penState.equals(R.penState)},copy:function(R){this.uchar=R.uchar,this.penState.copy(R.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var Y=function(){this.chars=[];for(var R=0;R<y;R++)this.chars.push(new Z);this.pos=0,this.currPenState=new x};Y.prototype={equals:function(R){for(var X=!0,ce=0;ce<y;ce++)if(!this.chars[ce].equals(R.chars[ce])){X=!1;break}return X},copy:function(R){for(var X=0;X<y;X++)this.chars[X].copy(R.chars[X])},isEmpty:function(){for(var R=!0,X=0;X<y;X++)if(!this.chars[X].isEmpty()){R=!1;break}return R},setCursor:function(R){this.pos!==R&&(this.pos=R),this.pos<0?(_.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>y&&(_.log("ERROR","Too large cursor position "+this.pos),this.pos=y)},moveCursor:function(R){var X=this.pos+R;if(R>1)for(var ce=this.pos+1;ce<X+1;ce++)this.chars[ce].setPenState(this.currPenState);this.setCursor(X)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(R){R>=144&&this.backSpace();var X=C(R);this.pos>=y?_.log("ERROR","Cannot insert "+R.toString(16)+" ("+X+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(X,this.currPenState),this.moveCursor(1))},clearFromPos:function(R){var X;for(X=R;X<y;X++)this.chars[X].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var R=[],X=!0,ce=0;ce<y;ce++){var oe=this.chars[ce].uchar;oe!==" "&&(X=!1),R.push(oe)}return X?"":R.join("")},setPenStyles:function(R){this.currPenState.setStyles(R),this.chars[this.pos].setPenState(this.currPenState)}};var $=function(){this.rows=[];for(var R=0;R<E;R++)this.rows.push(new Y);this.currRow=14,this.nrRollUpRows=null,this.reset()};$.prototype={reset:function(){for(var R=0;R<E;R++)this.rows[R].clear();this.currRow=14},equals:function(R){for(var X=!0,ce=0;ce<E;ce++)if(!this.rows[ce].equals(R.rows[ce])){X=!1;break}return X},copy:function(R){for(var X=0;X<E;X++)this.rows[X].copy(R.rows[X])},isEmpty:function(){for(var R=!0,X=0;X<E;X++)if(!this.rows[X].isEmpty()){R=!1;break}return R},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(R){this.rows[this.currRow].insertChar(R)},setPen:function(R){this.rows[this.currRow].setPenStyles(R)},moveCursor:function(R){this.rows[this.currRow].moveCursor(R)},setCursor:function(R){_.log("INFO","setCursor: "+R),this.rows[this.currRow].setCursor(R)},setPAC:function(R){_.log("INFO","pacData = "+JSON.stringify(R));var X=R.row-1;this.nrRollUpRows&&X<this.nrRollUpRows-1&&(X=this.nrRollUpRows-1),this.currRow=X;var ce=this.rows[this.currRow];if(R.indent!==null){var oe=R.indent,ye=Math.max(oe-1,0);ce.setCursor(R.indent),R.color=ce.chars[ye].penState.foreground}var be={foreground:R.color,underline:R.underline,italics:R.italics,background:"black",flash:!1};this.setPen(be)},setBkgData:function(R){_.log("INFO","bkgData = "+JSON.stringify(R)),this.backSpace(),this.setPen(R),this.insertChar(32)},setRollUpRows:function(R){this.nrRollUpRows=R},rollUp:function(){if(this.nrRollUpRows!==null){_.log("TEXT",this.getDisplayText());var R=this.currRow+1-this.nrRollUpRows,X=this.rows.splice(R,1)[0];X.clear(),this.rows.splice(this.currRow,0,X),_.log("INFO","Rolling up")}else _.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(R){R=R||!1;for(var X=[],ce="",oe=-1,ye=0;ye<E;ye++){var be=this.rows[ye].getTextString();be&&(oe=ye+1,R?X.push("Row "+oe+': "'+be+'"'):X.push(be.trim()))}return X.length>0&&(ce=R?"["+X.join(" | ")+"]":X.join("\n")),ce},getTextAndFormat:function(){return this.rows}};var Q=function(R,X){this.chNr=R,this.outputFilter=X,this.mode=null,this.verbose=0,this.displayedMemory=new $,this.nonDisplayedMemory=new $,this.lastOutputScreen=new $,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};Q.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(R){this.outputFilter=R},setPAC:function(R){this.writeScreen.setPAC(R)},setBkgData:function(R){this.writeScreen.setBkgData(R)},setMode:function(R){R!==this.mode&&(this.mode=R,_.log("INFO","MODE="+R),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=R)},insertChars:function(R){for(var X=0;X<R.length;X++)this.writeScreen.insertChar(R[X]);var ce=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";_.log("INFO",ce+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(_.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){_.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){_.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){_.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(R){_.log("INFO","RU("+R+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(R)},cc_FON:function(){_.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){_.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){_.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){_.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){_.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){_.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){_.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(_.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var R=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=R,this.writeScreen=this.nonDisplayedMemory,_.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(R){_.log("INFO","TO("+R+") - Tab Offset"),this.writeScreen.moveCursor(R)},cc_MIDROW:function(R){var X={flash:!1};if(X.underline=R%2==1,X.italics=R>=46,X.italics)X.foreground="white";else{var ce=Math.floor(R/2)-16;X.foreground=["white","green","blue","cyan","red","yellow","magenta"][ce]}_.log("INFO","MIDROW: "+JSON.stringify(X)),this.writeScreen.setPen(X)},outputDataUpdate:function(){var R=_.time;R!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(R,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,R,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:R):this.cueStartTime=R,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(R){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,R,this.displayedMemory),this.cueStartTime=R))}};var se=function(R,X,ce){this.field=R||1,this.outputs=[X,ce],this.channels=[new Q(1,X),new Q(2,ce)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};se.prototype={getHandler:function(R){return this.channels[R].getHandler()},setHandler:function(R,X){this.channels[R].setHandler(X)},addData:function(R,X){var ce,oe,ye,be=!1;this.lastTime=R,_.setTime(R);for(var Xe=0;Xe<X.length;Xe+=2)oe=127&X[Xe],ye=127&X[Xe+1],oe>=16&&oe<=31&&oe===this.lastCmdA&&ye===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,_.log("DEBUG","Repeated command ("+I([oe,ye])+") is dropped")):oe!==0||ye!==0?(_.log("DATA","["+I([X[Xe],X[Xe+1]])+"] -> ("+I([oe,ye])+")"),(ce=this.parseCmd(oe,ye))||(ce=this.parseMidrow(oe,ye)),ce||(ce=this.parsePAC(oe,ye)),ce||(ce=this.parseBackgroundAttributes(oe,ye)),ce||(be=this.parseChars(oe,ye))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(be):_.log("WARNING","No channel found yet. TEXT-MODE?")),ce?this.dataCounters.cmd+=2:be?this.dataCounters.char+=2:(this.dataCounters.other+=2,_.log("WARNING","Couldn't parse cleaned data "+I([oe,ye])+" orig: "+I([X[Xe],X[Xe+1]])))):this.dataCounters.padding+=2},parseCmd:function(R,X){var ce;if(!((R===20||R===21||R===28||R===29)&&32<=X&&X<=47||(R===23||R===31)&&33<=X&&X<=35))return!1;ce=R===20||R===21||R===23?1:2;var oe=this.channels[ce-1];return R===20||R===21||R===28||R===29?X===32?oe.cc_RCL():X===33?oe.cc_BS():X===34?oe.cc_AOF():X===35?oe.cc_AON():X===36?oe.cc_DER():X===37?oe.cc_RU(2):X===38?oe.cc_RU(3):X===39?oe.cc_RU(4):X===40?oe.cc_FON():X===41?oe.cc_RDC():X===42?oe.cc_TR():X===43?oe.cc_RTD():X===44?oe.cc_EDM():X===45?oe.cc_CR():X===46?oe.cc_ENM():X===47&&oe.cc_EOC():oe.cc_TO(X-32),this.lastCmdA=R,this.lastCmdB=X,this.currChNr=ce,!0},parseMidrow:function(R,X){var ce=null;if((R===17||R===25)&&32<=X&&X<=47){if((ce=R===17?1:2)!==this.currChNr)return _.log("ERROR","Mismatch channel in midrow parsing"),!1;var oe=this.channels[ce-1];return oe.insertChars([32]),oe.cc_MIDROW(X),_.log("DEBUG","MIDROW ("+I([R,X])+")"),this.lastCmdA=R,this.lastCmdB=X,!0}return!1},parsePAC:function(R,X){var ce,oe;if(!((17<=R&&R<=23||25<=R&&R<=31)&&64<=X&&X<=127||(R===16||R===24)&&64<=X&&X<=95))return!1;ce=R<=23?1:2,oe=64<=X&&X<=95?ce===1?P[R]:T[R]:ce===1?m[R]:U[R];var ye=this.interpretPAC(oe,X);return this.channels[ce-1].setPAC(ye),this.lastCmdA=R,this.lastCmdB=X,this.currChNr=ce,!0},interpretPAC:function(R,X){var ce,oe={color:null,italics:!1,indent:null,underline:!1,row:R};return ce=X>95?X-96:X-64,oe.underline=(1&ce)==1,ce<=13?oe.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(ce/2)]:ce<=15?(oe.italics=!0,oe.color="white"):oe.indent=4*Math.floor((ce-16)/2),oe},parseChars:function(R,X){var ce=null,oe=null,ye=null;if(R>=25?(ce=2,ye=R-8):(ce=1,ye=R),17<=ye&&ye<=19){var be;be=ye===17?X+80:ye===18?X+112:X+144,_.log("INFO","Special char '"+C(be)+"' in channel "+ce),oe=[be],this.lastCmdA=R,this.lastCmdB=X}else 32<=R&&R<=127&&(oe=X===0?[R]:[R,X],this.lastCmdA=null,this.lastCmdB=null);if(oe){var Xe=I(oe);_.log("DEBUG","Char codes =  "+Xe.join(","))}return oe},parseBackgroundAttributes:function(R,X){var ce,oe,ye;return((R===16||R===24)&&32<=X&&X<=47||(R===23||R===31)&&45<=X&&X<=47)&&(ce={},R===16||R===24?(oe=Math.floor((X-32)/2),ce.background=M[oe],X%2==1&&(ce.background=ce.background+"_semi")):X===45?ce.background="transparent":(ce.foreground="black",X===47&&(ce.underline=!0)),ye=R<24?1:2,this.channels[ye-1].setBkgData(ce),this.lastCmdA=R,this.lastCmdB=X,!0)},reset:function(){for(var R=0;R<this.channels.length;R++)this.channels[R]&&this.channels[R].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(R){for(var X=0;X<this.channels.length;X++)this.channels[X]&&this.channels[X].cueSplitAtTime(R)}},w.logger=_,w.PenState=x,w.CaptionScreen=$,w.Cea608Parser=se,w.findCea608Nalus=function(R,X,ce){for(var oe=0,ye=X,be=[],Xe=function(We,ut,At,Ne){if(We!==4||ut<8)return null;var et=At.getUint8(Ne),dt=At.getUint16(Ne+1),rn=At.getUint32(Ne+3),Yt=At.getUint8(Ne+7);return et==181&&dt==49&&rn==1195456820&&Yt==3};ye<X+ce;){if(oe=R.getUint32(ye),(31&R.getUint8(ye+4))==6)for(var Ie=ye+5,Ge=-1;Ie<ye+4+oe-1;){Ge=0;for(var at=255;at===255;)Ge+=at=R.getUint8(Ie),Ie++;var ft=0;for(at=255;at===255;)ft+=at=R.getUint8(Ie),Ie++;Xe(Ge,ft,R,Ie)&&be.push([Ie,ft]),Ie+=ft}ye+=oe+4}return be},w.extractCea608DataFromRange=function(R,X){var ce=X[0],oe=[[],[]];ce+=8;var ye=31&R.getUint8(ce);ce+=2;for(var be=0;be<ye;be++){var Xe=R.getUint8(ce),Ie=4&Xe,Ge=3&Xe;ce++;var at=R.getUint8(ce);ce++;var ft=R.getUint8(ce);ce++,Ie&&(127&at)+(127&ft)!=0&&(Ge===0?(oe[0].push(at),oe[0].push(ft)):Ge===1&&(oe[1].push(at),oe[1].push(ft)))}return oe}})(p)},8416:function(b,p,w){var k=w(1139),C=w(5448),E=w(6398),y=w(2032),P=(w(5530),typeof window<"u"&&window||w.g),m=P.dashjs;m||(m=P.dashjs={}),m.MediaPlayer=k.Z,m.FactoryMaker=C.Z,m.Debug=E.Z,m.Version=(0,y.e)()},6398:function(b,p,w){var k=w(5595),C=w(8512),E=w(5448),y=1,P=2,m=3,T=4,U=5;function M(I){I=I||{};var x,Z,Y,$,Q=this.context,se=(0,k.Z)(Q).getInstance(),R=I.settings,X=[];function ce(at){return at&&at.bind?at.bind(window.console):window.console.log.bind(window.console)}function oe(){for(var at=arguments.length,ft=new Array(at),We=0;We<at;We++)ft[We]=arguments[We];Ge.apply(void 0,[y,this].concat(ft))}function ye(){for(var at=arguments.length,ft=new Array(at),We=0;We<at;We++)ft[We]=arguments[We];Ge.apply(void 0,[P,this].concat(ft))}function be(){for(var at=arguments.length,ft=new Array(at),We=0;We<at;We++)ft[We]=arguments[We];Ge.apply(void 0,[m,this].concat(ft))}function Xe(){for(var at=arguments.length,ft=new Array(at),We=0;We<at;We++)ft[We]=arguments[We];Ge.apply(void 0,[T,this].concat(ft))}function Ie(){for(var at=arguments.length,ft=new Array(at),We=0;We<at;We++)ft[We]=arguments[We];Ge.apply(void 0,[U,this].concat(ft))}function Ge(at,ft){var We="",ut=null;Z&&(ut=new Date().getTime(),We+="["+(ut-$)+"]"),Y&&ft&&ft.getClassName&&(We+="["+ft.getClassName()+"]",ft.getType&&(We+="["+ft.getType()+"]")),We.length>0&&(We+=" ");for(var At=arguments.length,Ne=new Array(At>2?At-2:0),et=2;et<At;et++)Ne[et-2]=arguments[et];Array.apply(null,Ne).forEach(function(dt){We+=dt+" "}),X[at]&&R&&R.get().debug.logLevel>=at&&X[at](We),R&&R.get().debug.dispatchEvent&&se.trigger(C.Z.LOG,{message:We,level:at})}return x={getLogger:function(at){return{fatal:oe.bind(at),error:ye.bind(at),warn:be.bind(at),info:Xe.bind(at),debug:Ie.bind(at)}},setLogTimestampVisible:function(at){Z=at},setCalleeNameVisible:function(at){Y=at}},Z=!0,Y=!0,$=new Date().getTime(),typeof window<"u"&&window.console&&(X[y]=ce(window.console.error),X[P]=ce(window.console.error),X[m]=ce(window.console.warn),X[T]=ce(window.console.info),X[U]=ce(window.console.debug)),x}M.__dashjs_factory_name="Debug";var _=E.Z.getSingletonFactory(M);_.LOG_LEVEL_NONE=0,_.LOG_LEVEL_FATAL=y,_.LOG_LEVEL_ERROR=P,_.LOG_LEVEL_WARNING=m,_.LOG_LEVEL_INFO=T,_.LOG_LEVEL_DEBUG=U,E.Z.updateSingletonFactory(M.__dashjs_factory_name,_),p.Z=_},5595:function(b,p,w){var k=w(5448),C=w(8825);function E(){var P={};function m(U,M,_){var I=-1;return P[U]&&P[U].some(function(x,Z){if(x&&x.callback===M&&(!_||_===x.scope))return I=Z,!0}),I}var T={on:function(U,M,_){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!U)throw new Error("event type cannot be null or undefined");if(!M||typeof M!="function")throw new Error("listener must be a function: "+M);var x=I.priority||0;if(!(m(U,M,_)>=0)){P[U]=P[U]||[];var Z={callback:M,scope:_,priority:x};_&&_.getStreamId&&(Z.streamId=_.getStreamId()),_&&_.getType&&(Z.mediaType=_.getType()),I&&I.mode&&(Z.mode=I.mode);var Y=P[U].some(function($,Q){if($&&x>$.priority)return P[U].splice(Q,0,Z),!0});Y||P[U].push(Z)}},off:function(U,M,_){if(U&&M&&P[U]){var I=m(U,M,_);I<0||(P[U][I]=null)}},trigger:function(U){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(U&&P[U]){if((M=M||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");M.type=U,_.streamId&&(M.streamId=_.streamId),_.mediaType&&(M.mediaType=_.mediaType),P[U].filter(function(I){return!(!I||_.streamId&&I.streamId&&I.streamId!==_.streamId||_.mediaType&&I.mediaType&&I.mediaType!==_.mediaType||_.mode&&I.mode&&I.mode!==_.mode||!I.mode&&_.mode&&_.mode===C.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(I){return I&&I.callback.call(I.scope,M)})}},reset:function(){P={}}};return T}E.__dashjs_factory_name="EventBus";var y=k.Z.getSingletonFactory(E);y.EVENT_PRIORITY_LOW=0,y.EVENT_PRIORITY_HIGH=5e3,k.Z.updateSingletonFactory(E.__dashjs_factory_name,y),p.Z=y},5448:function(b,p){var w=function(){var k,C=[],E={},y={};function P(M,_){for(var I in C){var x=C[I];if(x.context===M&&x.name===_)return x.instance}return null}function m(M,_){return _[M]}function T(M,_,I){M in I&&(I[M]=_)}function U(M,_,I){var x,Z=M.__dashjs_factory_name,Y=_[Z];if(Y){var $=Y.instance;if(!Y.override)return $.apply({context:_,factory:k},I);for(var Q in x=M.apply({context:_},I),$=$.apply({context:_,factory:k,parent:x},I))x.hasOwnProperty(Q)&&(x[Q]=$[Q])}else x=M.apply({context:_},I);return x.getClassName=function(){return Z},x}return k={extend:function(M,_,I,x){!x[M]&&_&&(x[M]={instance:_,override:I})},getSingletonInstance:P,setSingletonInstance:function(M,_,I){for(var x in C){var Z=C[x];if(Z.context===M&&Z.name===_)return void(C[x].instance=I)}C.push({name:_,context:M,instance:I})},deleteSingletonInstances:function(M){C=C.filter(function(_){return _.context!==M})},getSingletonFactory:function(M){var _=m(M.__dashjs_factory_name,E);return _||(_=function(I){var x;return I===void 0&&(I={}),{getInstance:function(){return x||(x=P(I,M.__dashjs_factory_name)),x||(x=U(M,I,arguments),C.push({name:M.__dashjs_factory_name,context:I,instance:x})),x}}},E[M.__dashjs_factory_name]=_),_},getSingletonFactoryByName:function(M){return m(M,E)},updateSingletonFactory:function(M,_){T(M,_,E)},getClassFactory:function(M){var _=m(M.__dashjs_factory_name,y);return _||(_=function(I){return I===void 0&&(I={}),{create:function(){return U(M,I,arguments)}}},y[M.__dashjs_factory_name]=_),_},getClassFactoryByName:function(M){return m(M,y)},updateClassFactory:function(M,_){T(M,_,y)}},k}();p.Z=w},1264:function(b,p,w){var k=w(5448),C=w(703),E=w(6398),y=w(3393),P=w(7855),m=w(5595),T=w(8512);function U(x){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},U(x)}function M(x,Z,Y){return Z in x?Object.defineProperty(x,Z,{value:Y,enumerable:!0,configurable:!0,writable:!0}):x[Z]=Y,x}function _(){var x,Z,Y=this.context,$=(0,m.Z)(Y).getInstance(),Q={"streaming.delay.liveDelay":T.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":T.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},se={debug:{logLevel:E.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:y.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:y.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:y.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:y.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(x={},M(x,P.w.MPD_TYPE,500),M(x,P.w.XLINK_EXPANSION_TYPE,500),M(x,P.w.MEDIA_SEGMENT_TYPE,1e3),M(x,P.w.INIT_SEGMENT_TYPE,1e3),M(x,P.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),M(x,P.w.INDEX_SEGMENT_TYPE,1e3),M(x,P.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),M(x,P.w.LICENSE,1e3),M(x,P.w.OTHER_TYPE,1e3),M(x,"lowLatencyReductionFactor",10),x),retryAttempts:(Z={},M(Z,P.w.MPD_TYPE,3),M(Z,P.w.XLINK_EXPANSION_TYPE,1),M(Z,P.w.MEDIA_SEGMENT_TYPE,3),M(Z,P.w.INIT_SEGMENT_TYPE,3),M(Z,P.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),M(Z,P.w.INDEX_SEGMENT_TYPE,3),M(Z,P.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),M(Z,P.w.LICENSE,3),M(Z,P.w.OTHER_TYPE,3),M(Z,"lowLatencyMultiplyFactor",5),Z),abr:{movingAverageMethod:y.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:y.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:y.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},R=C.Z.clone(se);function X(ce,oe,ye){for(var be in ce)ce.hasOwnProperty(be)&&(oe.hasOwnProperty(be)?U(ce[be])!=="object"||ce[be]instanceof Array||ce[be]===null?(oe[be]=C.Z.clone(ce[be]),Q[ye+be]&&$.trigger(Q[ye+be])):X(ce[be],oe[be],ye.slice()+be+"."):console.error("Settings parameter "+ye+be+" is not supported"))}return{get:function(){return R},update:function(ce){U(ce)==="object"&&X(ce,R,"")},reset:function(){R=C.Z.clone(se)}}}_.__dashjs_factory_name="Settings";var I=k.Z.getSingletonFactory(_);p.Z=I},703:function(b,p,w){var k=w(3875),C=w.n(k),E=w(1067);function y(T){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},y(T)}function P(T,U){for(var M=0;M<U.length;M++){var _=U[M];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var m=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T)}var U,M;return U=T,M=[{key:"mixin",value:function(_,I,x){var Z,Y={};if(_)for(var $ in I)I.hasOwnProperty($)&&(Z=I[$],$ in _&&(_[$]===Z||$ in Y&&Y[$]===Z)||(y(_[$])==="object"&&_[$]!==null?_[$]=T.mixin(_[$],Z,x):_[$]=x(Z)));return _}},{key:"clone",value:function(_){if(!_||y(_)!=="object")return _;var I;if(_ instanceof Array){I=[];for(var x=0,Z=_.length;x<Z;++x)x in _&&I.push(T.clone(_[x]))}else I={};return T.mixin(I,_,T.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(_,I){try{if(!I||I.length===0)return _;var x=new URL(_);return I.forEach(function(Z){Z.key&&Z.value&&x.searchParams.set(Z.key,Z.value)}),x.href}catch(Z){return _}}},{key:"parseHttpHeaders",value:function(_){var I={};if(!_)return I;for(var x=_.trim().split("\r\n"),Z=0,Y=x.length;Z<Y;Z++){var $=x[Z],Q=$.indexOf(": ");Q>0&&(I[$.substring(0,Q)]=$.substring(Q+2))}return I}},{key:"generateUuid",value:function(){var _=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(I){var x=(_+16*Math.random())%16|0;return _=Math.floor(_/16),(I=="x"?x:3&x|8).toString(16)})}},{key:"generateHashCode",value:function(_){var I=0;if(_.length===0)return I;for(var x=0;x<_.length;x++)I=(I<<5)-I+_.charCodeAt(x),I|=0;return I}},{key:"getRelativeUrl",value:function(_,I){try{var x=new URL(_),Z=new URL(I);if(x.protocol=Z.protocol,x.origin!==Z.origin)return I;var Y=C().relative(x.pathname.substr(0,x.pathname.lastIndexOf("/")),Z.pathname.substr(0,Z.pathname.lastIndexOf("/"))),$=Y.length===0?1:0;return Y+=Z.pathname.substr(Z.pathname.lastIndexOf("/")+$,Z.pathname.length-1),Z.pathname.length<Y.length?Z.pathname:Y}catch(Q){return I}}},{key:"parseUserAgent",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var I=_===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,E.UAParser)(I)}catch(x){return{}}}},{key:"stringHasProtocol",value:function(_){return/(http(s?)):\/\//i.test(_)}}],M&&P(U,M),T}();p.Z=m},2032:function(b,p,w){function k(){return"4.7.4"}w.d(p,{e:function(){return k}})},2230:function(b,p){function w(C,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}var k=function(){function C(){(function(P,m){if(!(P instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C)}var E,y;return E=C,(y=[{key:"extend",value:function(P,m){if(P){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var M in P)!P.hasOwnProperty(M)||this[M]&&!T||U&&P[M].indexOf("public_")===-1||(this[M]=P[M])}}}])&&w(E.prototype,y),C}();p.Z=k},4351:function(b,p,w){function k(m){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},k(m)}function C(m,T){return C=Object.setPrototypeOf||function(U,M){return U.__proto__=M,U},C(m,T)}function E(m,T){return!T||k(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function y(m){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},y(m)}var P=function(m){(function(I,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(x&&x.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),x&&C(I,x)})(_,m);var T,U,M=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,x=y(T);if(U){var Z=y(this).constructor;I=Reflect.construct(x,arguments,Z)}else I=x.apply(this,arguments);return E(this,I)});function _(){var I;return function(x,Z){if(!(x instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(I=M.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",I.BUFFERING_COMPLETED="bufferingCompleted",I.BUFFER_CLEARED="bufferCleared",I.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",I.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",I.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",I.CMSD_STATIC_HEADER="cmsdStaticHeader",I.CURRENT_TRACK_CHANGED="currentTrackChanged",I.DATA_UPDATE_COMPLETED="dataUpdateCompleted",I.INBAND_EVENTS="inbandEvents",I.INITIAL_STREAM_SWITCH="initialStreamSwitch",I.INIT_FRAGMENT_LOADED="initFragmentLoaded",I.INIT_FRAGMENT_NEEDED="initFragmentNeeded",I.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",I.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",I.LOADING_COMPLETED="loadingCompleted",I.LOADING_PROGRESS="loadingProgress",I.LOADING_DATA_PROGRESS="loadingDataProgress",I.LOADING_ABANDONED="loadingAborted",I.MANIFEST_UPDATED="manifestUpdated",I.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",I.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",I.QUOTA_EXCEEDED="quotaExceeded",I.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",I.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",I.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",I.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",I.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",I.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",I.SOURCE_BUFFER_ERROR="sourceBufferError",I.STREAMS_COMPOSED="streamsComposed",I.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",I.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",I.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",I.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",I.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",I.URL_RESOLUTION_FAILED="urlResolutionFailed",I.VIDEO_CHUNK_RECEIVED="videoChunkReceived",I.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",I.XLINK_ELEMENT_LOADED="xlinkElementLoaded",I.XLINK_READY="xlinkReady",I.SEEK_TARGET="seekTarget",I.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",I.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",I.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",I.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",I.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",I}return _}(w(8342).Z);p.Z=P},8512:function(b,p,w){function k(U){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},k(U)}function C(U,M){if(!(U instanceof M))throw new TypeError("Cannot call a class as a function")}function E(U,M){return E=Object.setPrototypeOf||function(_,I){return _.__proto__=I,_},E(U,M)}function y(U,M){return!M||k(M)!=="object"&&typeof M!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(U):M}function P(U){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},P(U)}var m=function(U){(function(Z,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");Z.prototype=Object.create(Y&&Y.prototype,{constructor:{value:Z,writable:!0,configurable:!0}}),Y&&E(Z,Y)})(x,U);var M,_,I=(M=x,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}(),function(){var Z,Y=P(M);if(_){var $=P(this).constructor;Z=Reflect.construct(Y,arguments,$)}else Z=Y.apply(this,arguments);return y(this,Z)});function x(){return C(this,x),I.apply(this,arguments)}return x}(w(4351).Z),T=new m;p.Z=T},8342:function(b,p){function w(C,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}var k=function(){function C(){(function(P,m){if(!(P instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C)}var E,y;return E=C,(y=[{key:"extend",value:function(P,m){if(P){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var M in P)!P.hasOwnProperty(M)||this[M]&&!T||U&&P[M].indexOf("public_")===-1||(this[M]=P[M])}}}])&&w(E.prototype,y),C}();p.Z=k},9326:function(b,p,w){var k=w(3186),C=w(7855),E=w(5448),y=w(8825),P=w(7387),m=w(1553);function T(U){var M,_,I,x,Z,Y=(U=U||{}).eventBus,$=U.debug,Q=U.urlUtils,se=U.type,R=U.streamInfo,X=U.segmentsController,ce=U.timelineConverter,oe=U.baseURLController;function ye(){return se}function be(){I=null}function Xe(We,ut,At){var Ne,et,dt=oe.resolve(At.path),rn={};return dt&&ut!==dt.url&&Q.isRelative(ut)?(Ne=dt.url,et=dt.serviceLocation,rn=dt.queryParams,ut&&(Ne=Q.resolve(ut,Ne))):Ne=ut,!Q.isRelative(Ne)&&(We.url=Ne,We.serviceLocation=et,We.queryParams=rn,!0)}function Ie(We,ut){if(ut==null)return null;var At=new k.Z,Ne=ut.representation,et=Ne.adaptation.period.mpd.manifest.Period_asArray[Ne.adaptation.period.index].AdaptationSet_asArray[Ne.adaptation.index].Representation_asArray[Ne.index].bandwidth,dt=ut.media;return dt=(0,P.vi)(dt,"Number",ut.replacementNumber),dt=(0,P.vi)(dt,"Time",ut.replacementTime),dt=(0,P.vi)(dt,"Bandwidth",et),dt=(0,P.Aj)(dt,Ne.id),dt=(0,P.eR)(dt),At.mediaType=ye(),At.type=C.w.MEDIA_SEGMENT_TYPE,At.range=ut.mediaRange,At.startTime=ut.presentationStartTime,At.mediaStartTime=ut.mediaStartTime,At.duration=ut.duration,At.timescale=Ne.timescale,At.availabilityStartTime=ut.availabilityStartTime,At.availabilityEndTime=ut.availabilityEndTime,At.availabilityTimeComplete=Ne.availabilityTimeComplete,At.wallStartTime=ut.wallStartTime,At.quality=Ne.index,At.index=ut.index,At.mediaInfo=We,At.adaptationIndex=Ne.adaptation.index,At.representationId=Ne.id,Xe(At,dt,Ne)?At:void 0}function Ge(We,ut,At){var Ne=null;if(!ut||!ut.segmentInfoType)return Ne;var et=X.getSegmentByTime(ut,At);return et&&(I=et,_.debug("Index for time "+At+" is "+et.index),Ne=Ie(We,et)),Ne}function at(We,ut,At){var Ne=null,et=X.getSegmentByIndex(ut,At,I?I.mediaStartTime:-1);if(et)Ne=Ie(We,et),I=et;else{if(x&&!Z)return _.debug(ye()+" No segment found at index: "+At+". Wait for next loop"),null;Z=!0}return Ne}function ft(){_.debug("Dynamic stream complete"),Z=!0}return M={getCurrentIndex:function(){return I?I.index:-1},getInitRequest:function(We,ut){return ut?function(At,Ne,et){var dt=new k.Z,rn=Ne.adaptation.period,Yt=rn.start;if(dt.mediaType=et,dt.type=C.w.INIT_SEGMENT_TYPE,dt.range=Ne.range,dt.availabilityStartTime=ce.calcAvailabilityStartTimeFromPresentationTime(Yt,Ne,x),dt.availabilityEndTime=ce.calcAvailabilityEndTimeFromPresentationTime(Yt+rn.duration,Ne,x),dt.quality=Ne.index,dt.mediaInfo=At,dt.representationId=Ne.id,Xe(dt,Ne.initialization,Ne))return dt.url=(0,P.vi)(dt.url,"Bandwidth",Ne.bandwidth),dt}(We,ut,ye()):null},getNextSegmentRequest:function(We,ut){return ut&&ut.segmentInfoType?at(We,ut,I?I.index+1:0):null},getNextSegmentRequestIdempotent:function(We,ut){var At=I?I.index+1:0,Ne=X.getSegmentByIndex(ut,At,I?I.mediaStartTime:-1);return Ne?Ie(We,Ne):null},getSegmentRequestForTime:Ge,getStreamId:function(){return R.id},getStreamInfo:function(){return R},getType:ye,getValidTimeAheadOfTargetTime:function(We,ut,At,Ne){try{if(isNaN(We)||!ut||!At)return NaN;if(We<0&&(We=0),isNaN(Ne)&&(Ne=.5),Ge(ut,At,We))return We;if(At.adaptation.period.start+At.adaptation.period.duration<We)return NaN;for(var et=isFinite(At.adaptation.period.duration)?At.adaptation.period.start+At.adaptation.period.duration:We+30,dt=Math.min(We+Ne,et),rn=NaN,Yt=null;dt<=et;){var St=null;if(dt<=et&&(St=Ge(ut,At,dt)),St){rn=dt,Yt=St;break}dt+=Ne}if(Yt){var kt=Yt.startTime+Yt.duration;return We>Yt.startTime&&kt-We>Ne?We:!isNaN(Yt.startTime)&&We<Yt.startTime&&rn>Yt.startTime?Yt.startTime+.001:Math.min(kt-Ne,rn)}return rn}catch(Re){return NaN}},initialize:function(We){x=We,Z=!1,X.initialize(We)},isLastSegmentRequested:function(We,ut){return!We||!I?!1:Z?!0:!isFinite(We.adaptation.period.duration)||I.presentationStartTime+I.duration>ut?!1:We.mediaFinishedInformation&&!isNaN(We.mediaFinishedInformation.numberOfSegments)&&!isNaN(I.index)&&I.index>=We.mediaFinishedInformation.numberOfSegments-1&&(!x||We.segmentInfoType===m.Z.SEGMENT_TEMPLATE||x&&We.segmentInfoType===m.Z.SEGMENT_LIST&&We.adaptation.period.nextPeriodId)?!0:!!(x&&We.adaptation.period.nextPeriodId&&We.segmentInfoType===m.Z.SEGMENT_TIMELINE&&We.mediaFinishedInformation&&!isNaN(We.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&I&&!isNaN(I.mediaStartTime)&&!isNaN(I.duration)&&I.mediaStartTime+I.duration>=We.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(We,ut){return ut&&ut.segmentInfoType?at(We,ut,I?I.index:0):null},reset:function(){be(),Y.off(y.Z.DYNAMIC_TO_STATIC,ft,M)}},_=$.getLogger(M),be(),Y.on(y.Z.DYNAMIC_TO_STATIC,ft,M),M}T.__dashjs_factory_name="DashHandler",p.Z=E.Z.getClassFactory(T)},1553:function(b,p){function w(C,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}var k=new(function(){function C(){(function(P,m){if(!(P instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var E,y;return E=C,(y=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&w(E.prototype,y),C}());p.Z=k},7802:function(b,p,w){var k=w(5448),C=w(1724),E=w(3636),y=w(1736),P=w(5246);function m(U){U=U||{};var M,_,I=this.context,x=U.dashConstants,Z=U.type,Y=U.segmentBaseController;function $(Q){return Q?Q.segments?_[x.SEGMENT_BASE]:_[Q.segmentInfoType]:null}return M={initialize:function(Q){_[x.SEGMENT_TIMELINE]=(0,C.Z)(I).create(U,Q),_[x.SEGMENT_TEMPLATE]=(0,E.Z)(I).create(U,Q),_[x.SEGMENT_LIST]=(0,y.Z)(I).create(U,Q),_[x.SEGMENT_BASE]=(0,P.Z)(I).create(U,Q)},updateInitData:function(Q,se){return se?Promise.resolve():Y.getSegmentBaseInitSegment({representation:Q,mediaType:Z})},updateSegmentData:function(Q,se){return se?Promise.resolve():Y.getSegmentList({mimeType:Q.mimeType,representation:Q,mediaType:Z})},getSegmentByIndex:function(Q,se,R){var X=$(Q);return X?X.getSegmentByIndex(Q,se,R):null},getSegmentByTime:function(Q,se){var R=$(Q);return R?R.getSegmentByTime(Q,se):null},getMediaFinishedInformation:function(Q){var se=$(Q);return se?se.getMediaFinishedInformation(Q):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},_={},M}m.__dashjs_factory_name="SegmentsController";var T=k.Z.getClassFactory(m);p.Z=T},1736:function(b,p,w){var k=w(5448),C=w(3393),E=w(7387);function y(m,T){var U=(m=m||{}).timelineConverter;function M(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function _(I,x){if(M(),!I)return null;var Z=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,Y=Z.SegmentURL_asArray.length,$=I&&!isNaN(I.startNumber)?I.startNumber:1,Q=Math.max($-1,0),se=Math.max(x-Q,0),R=null;if(se<Y){var X=Z.SegmentURL_asArray[se];(R=(0,E.NF)(U,T,I,x))&&(R.replacementTime=($+x-1)*I.segmentDuration,R.media=X.media?X.media:"",R.mediaRange=X.mediaRange,R.indexRange=X.indexRange)}return R}return{getSegmentByIndex:_,getSegmentByTime:function(I,x){if(M(),!I)return null;var Z=I.segmentDuration;if(isNaN(Z))return null;var Y=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,x);return _(I,Math.floor(Y/Z))},getMediaFinishedInformation:function(I){var x={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return x;var Z=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,Y=I&&!isNaN(I.startNumber)?I.startNumber:1,$=Math.max(Y-1,0);return x.numberOfSegments=$+Z.SegmentURL_asArray.length,x}}}y.__dashjs_factory_name="ListSegmentsGetter";var P=k.Z.getClassFactory(y);p.Z=P},5246:function(b,p,w){var k=w(5448),C=w(3393);function E(P){var m=(P=P||{}).timelineConverter;function T(){if(!m||!m.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function U(M,_){if(T(),!M)return null;var I,x=M.segments?M.segments.length:-1;if(_<x&&(I=M.segments[_])&&I.index===_)return I;for(var Z=0;Z<x;Z++)if((I=M.segments[Z])&&I.index===_)return I;return null}return{getSegmentByIndex:U,getSegmentByTime:function(M,_){T();var I=function(x,Z){if(!x)return-1;var Y,$,Q,se,R,X=x.segments,ce=X?X.length:null,oe=-1;if(X&&ce>0){for(R=0;R<ce;R++)if(Q=($=X[R]).presentationStartTime,Z+(Y=(se=$.duration)/2)>=Q&&Z-Y<Q+se){oe=$.index;break}}return oe}(M,_);return U(M,I)},getMediaFinishedInformation:function(M){var _={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return M&&M.segments&&(_.numberOfSegments=M.segments.length),_}}}E.__dashjs_factory_name="SegmentBaseGetter";var y=k.Z.getClassFactory(E);p.Z=y},7387:function(b,p,w){w.d(p,{Aj:function(){return y},NF:function(){return U},TJ:function(){return M},eR:function(){return E},vi:function(){return P}});var k=w(2011);function C(_,I){for(;_.length<I;)_="0"+_;return _}function E(_){return _&&_.split("$$").join("$")}function y(_,I){if(!I||!_||_.indexOf("$RepresentationID$")===-1)return _;var x=I.toString();return _.split("$RepresentationID$").join(x)}function P(_,I,x){var Z,Y,$,Q,se,R,X=I.length,ce=2;if(!_)return _;for(;;){if((Z=_.indexOf("$"+I))<0||(Y=_.indexOf("$",Z+X))<0)return _;if(($=_.indexOf("%0",Z+X))>Z&&$<Y)switch(Q=_.charAt(Y-1),se=parseInt(_.substring($+ce,Y-1),10),Q){case"d":case"i":case"u":R=C(x.toString(),se);break;case"x":R=C(x.toString(16),se);break;case"X":R=C(x.toString(16),se).toUpperCase();break;case"o":R=C(x.toString(8),se);break;default:return _}else R=x;_=_.substring(0,Z)+R+_.substring(Y+1)}}function m(_,I,x,Z,Y,$,Q,se){var R,X=new k.Z;return X.representation=_,X.duration=I,X.presentationStartTime=x,X.mediaStartTime=Z,X.availabilityStartTime=Y.calcAvailabilityStartTimeFromPresentationTime($,_,Q),X.availabilityEndTime=Y.calcAvailabilityEndTimeFromPresentationTime($+I,_,Q),X.wallStartTime=Y.calcWallTimeForSegment(X,Q),X.replacementNumber=(R=se,X.representation.startNumber+R),X.index=se,X}function T(_,I,x,Z){var Y=I.adaptation.period;if(isFinite(Y.duration)&&Y.start+Y.duration<=x.presentationStartTime)return!1;if(Z){if(I.availabilityTimeOffset==="INF")return!0;var $=_.getClientReferenceTime();return x.availabilityStartTime.getTime()<=$&&(!isFinite(x.availabilityEndTime)||x.availabilityEndTime.getTime()>=$)}return!0}function U(_,I,x,Z){var Y,$,Q;Y=x.segmentDuration,isNaN(Y)&&(Y=x.adaptation.period.duration),$=parseFloat((x.adaptation.period.start+Z*Y).toFixed(5)),Q=parseFloat(($+Y).toFixed(5));var se=m(x,Y,$,_.calcMediaTimeFromPresentationTime($,x),_,Q,I,Z);return T(_,x,se,I)?se:null}function M(_,I,x,Z,Y,$,Q,se,R,X){var ce,oe,ye=Z/$,be=Y/$;return ce=_.calcPresentationTimeFromMediaTime(ye,x),T(_,x,oe=m(x,be,ce,ye,_,ce+be,I,R),I)?(oe.replacementTime=X||Z,Q=P(Q,"Number",oe.replacementNumber),Q=P(Q,"Time",oe.replacementTime),oe.media=Q,oe.mediaRange=se,oe):null}},3636:function(b,p,w){var k=w(5448),C=w(3393),E=w(7387);function y(m,T){var U=(m=m||{}).timelineConverter;function M(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function _(I,x){if(M(),!I)return null;var Z=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentTemplate;x=Math.max(x,0);var Y=(0,E.NF)(U,T,I,x);if(Y){Y.replacementTime=Math.round((x-1)*I.segmentDuration*I.timescale,10);var $=Z.media;$=(0,E.vi)($,"Number",Y.replacementNumber),$=(0,E.vi)($,"Time",Y.replacementTime),Y.media=$}return Y}return{getSegmentByIndex:_,getSegmentByTime:function(I,x){if(M(),!I)return null;var Z=I.segmentDuration;if(isNaN(Z))return null;var Y=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,x);return _(I,Math.floor(Y/Z))},getMediaFinishedInformation:function(I){var x={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return x;var Z=I.segmentDuration;return isNaN(Z)?x.numberOfSegments=1:x.numberOfSegments=Math.ceil(I.adaptation.period.duration/Z),x}}}y.__dashjs_factory_name="TemplateSegmentsGetter";var P=k.Z.getClassFactory(y);p.Z=P},1724:function(b,p,w){var k=w(5448),C=w(3393),E=w(7387);function y(m,T){var U=(m=m||{}).timelineConverter,M=m.dashMetrics;function _(){if(!U)throw new Error(C.Z.MISSING_CONFIG_ERROR)}function I(Z,Y){var $,Q,se,R,X,ce,oe,ye=Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentTemplate||Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentList,be=ye.SegmentTimeline,Xe=ye.SegmentURL_asArray,Ie=0,Ge=-1;oe=Z.timescale;var at=!1;for(se=0,R=($=be.S_asArray).length;se<R&&!at;se++)for(ce=0,(Q=$[se]).hasOwnProperty("r")&&(ce=Q.r),Q.hasOwnProperty("t")&&(Ie=Q.t),ce<0&&(ce=x(Z,$[se+1],Q,oe,Ie/oe)),X=0;X<=ce&&!at;X++)(at=Y(Ie,ye,Xe,Q,oe,++Ge,se))&&(Z.segmentDuration=Q.d/oe),Ie+=Q.d}function x(Z,Y,$,Q,se){var R;if(Y&&Y.hasOwnProperty("t"))R=Y.t/Q;else try{var X=0;if(isNaN(Z.adaptation.period.start)||isNaN(Z.adaptation.period.duration)||!isFinite(Z.adaptation.period.duration)){var ce=M.getCurrentDVRInfo();X=isNaN(ce.end)?0:ce.end}else X=Z.adaptation.period.start+Z.adaptation.period.duration;R=U.calcMediaTimeFromPresentationTime(X,Z),Z.segmentDuration=$.d/Q}catch(oe){R=0}return Math.max(Math.ceil((R-se)/($.d/Q))-1,0)}return{getSegmentByIndex:function(Z,Y,$){if(_(),!Z)return null;var Q=null,se=!1;return I(Z,function(R,X,ce,oe,ye,be,Xe){if(se||$<0){var Ie=X.media,Ge=oe.mediaRange;return ce&&(Ie=ce[Xe].media||"",Ge=ce[Xe].mediaRange),Q=(0,E.TJ)(U,T,Z,R,oe.d,ye,Ie,Ge,be,oe.tManifest),!0}return R>=$*ye-.5*oe.d&&(se=!0),!1}),Q},getSegmentByTime:function(Z,Y){if(_(),!Z)return null;Y===void 0&&(Y=null);var $=null,Q=U.calcMediaTimeFromPresentationTime(Y,Z);return I(Z,function(se,R,X,ce,oe,ye,be){var Xe=parseFloat((Q*oe).toPrecision(15));if(Xe<se+ce.d&&Xe>=se){var Ie=R.media,Ge=ce.mediaRange;return X&&(Ie=X[be].media||"",Ge=X[be].mediaRange),$=(0,E.TJ)(U,T,Z,se,ce.d,oe,Ie,Ge,ye,ce.tManifest),!0}return!1}),$},getMediaFinishedInformation:function(Z){if(!Z)return 0;var Y,$,Q,se,R,X,ce,oe=(Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentTemplate||Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentList).SegmentTimeline,ye=0,be=0,Xe=0;for(ce=Z.timescale,se=(Y=oe.S_asArray).length,Q=0;Q<se;Q++)for(X=0,($=Y[Q]).hasOwnProperty("r")&&(X=$.r),$.hasOwnProperty("t")&&(be=(ye=$.t)/ce),X<0&&(X=x(Z,Y[Q+1],$,ce,be)),R=0;R<=X;R++)Xe++,be=(ye+=$.d)/ce;return{numberOfSegments:Xe,mediaTimeOfLastSignaledSegment:be}}}}y.__dashjs_factory_name="TimelineSegmentsGetter";var P=k.Z.getClassFactory(y);p.Z=P},2011:function(b,p){p.Z=function w(){(function(k,C){if(!(k instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(b,p){p.Z=function w(){(function(k,C){if(!(k instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.schemeIdUri="",this.value=""}},1139:function(b,p,w){w.d(p,{Z:function(){return ap}});var k=w(452),C=w.n(k),E=w(3393),y=w(1553),P=w(3860),m=w(5595),T=w(8512),U=w(5448),M=w(6398),_=w(8825);function I(){var F,O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve,Pe,je,Ke,Se,Le,Ae,Ze,q,le,ae,ue=this.context,te=(0,m.Z)(ue).getInstance();function De(){me(),ve=!1,we=0,Te=0,je=0,q=!1,Ke=!0,Se=!1,le=!1,Le=NaN,Pe=NaN,H&&(te.off(T.Z.DATA_UPDATE_COMPLETED,Dt,F),te.off(T.Z.LOADING_PROGRESS,On,F),te.off(T.Z.MANIFEST_UPDATED,Vt,F),te.off(T.Z.STREAMS_COMPOSED,qe,F),te.off(_.Z.PLAYBACK_ENDED,Jt,F),te.off(_.Z.STREAM_INITIALIZING,Ct,F),te.off(_.Z.REPRESENTATION_SWITCH,Qe,F),te.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Qt,F),Xt(),H.removeEventListener("canplay",un),H.removeEventListener("canplaythrough",an),H.removeEventListener("play",Bn),H.removeEventListener("waiting",kn),H.removeEventListener("playing",mr),H.removeEventListener("pause",vr),H.removeEventListener("error",Nn),H.removeEventListener("seeking",bt),H.removeEventListener("seeked",en),H.removeEventListener("timeupdate",Zt),H.removeEventListener("progress",mn),H.removeEventListener("ratechange",bn),H.removeEventListener("loadedmetadata",Zn),H.removeEventListener("loadeddata",Fn),H.removeEventListener("stalled",Dn),H.removeEventListener("ended",qn),H.removeEventListener("volumechange",Yn)),he=null,H=null,ie=null,_e=null}function Ce(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((Be(Je)-lt()).toFixed(5))}function Be(Je){var Ot=Je||ie;return Ot.start+Ot.duration}function xe(){var Je=arguments.length>0&&arguments[0]!==void 0&&arguments[0];ie&&H&&H.getElement()?(Je&&_e&&mt(lt()),H.play()):ve=!0}function me(){ie&&H&&H.pause()}function Me(Je){var Ot=arguments.length>1&&arguments[1]!==void 0&&arguments[1],yn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Cn=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(ie&&H&&H.getElement()){var yr=isNaN(Le)?H.getTime():Le;Je!==yr&&((Ae=yn===!0)||(Le=Je),O.info("Requesting seek to time: "+Je+(Ae?" (internal)":"")),_e&&Cn&&mt(Je),H.setCurrentTime(Je,Ot))}}function ze(){if(ie&&H&&_e){var Je=j&&j.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Ot=W.getCurrentDVRInfo(Je);return Ot&&Ot.range?Ot.range.end:0}}function mt(Je){var Ot=new Date(re.getClientReferenceTime()),yn=ee.getRegularPeriods()[0],Cn=re.calcPresentationTimeFromWallTime(Ot,yn);we=Cn-Je}function lt(){return ie&&H?H.getTime():null}function vt(){return ie&&H?H.isPaused():null}function pt(){return ie&&H?H.isSeeking():null}function qt(){return ie&&H?H.isStalled():null}function Gt(){return ie&&H?H.getPlaybackRate():null}function Bt(){return ie&&H?H.getEnded():null}function jt(){return _e}function xn(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!vt()&&_e&&H.getReadyState()!==0&&!pt()&&!q){Je||(Je=j.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO);var Ot=lt(),yn=it(Ot,Je),Cn=!isNaN(yn)&&yn!==Ot;Cn&&!pt()&&(qt()||Ze||H.getReadyState()===1)&&(O.debug("UpdateCurrentTime: Seek to actual time: ".concat(yn," from currentTime: ").concat(Ot)),Me(yn,!1,!1))}}function it(Je,Ot){var yn=W.getCurrentDVRInfo(Ot),Cn=yn?yn.range:null;return Cn?Je>Cn.end?Math.max(Cn.end-we,Cn.start):Je>0&&Je+.25<Cn.start&&Math.abs(Je-Cn.start)<31536e4?Se?Math.max(Cn.end-we,Cn.start):Cn.start:Je:NaN}function _t(){he===null&&(he=setInterval(function(){(function(){if(te.trigger(T.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:_e,time:new Date}),jt()){var Je=Date.now();(isNaN(Pe)||Je>Pe+ae.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(j.addDVRMetric(),vt()?function(){var Ot=Date.now();(!Ve||Ot>Ve+500)&&(Ve=Ot,Zt())}():xn(),Pe=Je)}})()},ae.get().streaming.wallclockTimeUpdateInterval))}function Xt(){clearInterval(he),he=null}function Dt(Je){var Ot=ee.convertRepresentationToRepresentationInfo(Je.currentRepresentation),yn=Ot?Ot.mediaInfo.streamInfo:null;yn!==null&&ie.id===yn.id&&(ie=yn)}function un(){te.trigger(T.Z.CAN_PLAY)}function an(){te.trigger(T.Z.CAN_PLAY_THROUGH)}function Qt(Je){Je.streamId===j.getActiveStreamInfo().id&&(Ze=Je.state===P.Z.BUFFER_EMPTY,ae.get().streaming.buffer.setStallState&&H.setStallState(Je.mediaType,Je.state===P.Z.BUFFER_EMPTY))}function Bn(){O.info("Native video element event: play"),xn(),_t(),te.trigger(T.Z.PLAYBACK_STARTED,{startTime:lt()})}function kn(){O.info("Native video element event: waiting"),te.trigger(T.Z.PLAYBACK_WAITING,{playingTime:lt()})}function mr(){O.info("Native video element event: playing"),Ae=!1,te.trigger(T.Z.PLAYBACK_PLAYING,{playingTime:lt()})}function vr(){O.info("Native video element event: pause"),te.trigger(T.Z.PLAYBACK_PAUSED,{ended:Bt()})}function bt(){if(!Ae){var Je=lt();isNaN(Le)||Le===Je||(Je=Le),Le=NaN,O.info("Seeking to: "+Je),_t(),te.trigger(T.Z.PLAYBACK_SEEKING,{seekTime:Je,streamId:ie.id})}}function en(){O.info("Native video element event: seeked"),Ae=!1,te.trigger(T.Z.PLAYBACK_SEEKED)}function Zt(){ie&&te.trigger(T.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:Ce(),time:lt(),streamId:ie.id})}function mn(){te.trigger(T.Z.PLAYBACK_PROGRESS,{streamId:ie.id})}function bn(){var Je=Gt();O.info("Native video element event: ratechange: ",Je),te.trigger(T.Z.PLAYBACK_RATE_CHANGED,{playbackRate:Je})}function Zn(){O.info("Native video element event: loadedmetadata"),te.trigger(T.Z.PLAYBACK_METADATA_LOADED),_t()}function Fn(){O.info("Native video element event: loadeddata"),te.trigger(T.Z.PLAYBACK_LOADED_DATA)}function qn(){O.info("Native video element event: ended"),me(),Xt();var Je=j?j.getActiveStreamInfo():null;Je&&te.trigger(T.Z.PLAYBACK_ENDED,{isLast:Je.isLast})}function Yn(){te.trigger(T.Z.PLAYBACK_VOLUME_CHANGED)}function Jt(Je){if(he&&Je.isLast){O.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Ot=Je.seekTime?Je.seekTime:Be();H.setCurrentTime(Ot),me(),Xt()}}function Nn(Je){var Ot=Je.target||Je.srcElement;te.trigger(T.Z.PLAYBACK_ERROR,{error:Ot.error})}function Pn(){_e=!1}function On(Je){if(Je.stream===!1&&Se&&!isNaN(Je.request.duration)){var Ot=1.2*Je.request.duration;Ot>we&&(O.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Ot.toFixed(2)),we=Ot,Te=Ot)}}function Dn(Je){te.trigger(T.Z.PLAYBACK_STALLED,{e:Je})}function Ct(Je){var Ot;(Ot=Je.mediaInfo)&&Ot.supplementalProperties&&Ot.supplementalProperties[E.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Ot.supplementalProperties[E.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(O.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),Se=!0)}function Qe(Je){var Ot=j.getActiveStreamInfo();Je&&Ot&&Je.currentRepresentation&&Je.streamId&&Je.streamId===Ot.id&&Je.mediaType&&(Je.mediaType===E.Z.VIDEO||Je.mediaType===E.Z.AUDIO)&&(Ke=Je.currentRepresentation.availabilityTimeComplete,(Se=!Ke)&&!le&&(le=!0))}function Vt(){q=!0}function qe(){q=!1}return F={initialize:function(Je,Ot){ie=Je,Ot!==!0&&(H.addEventListener("canplay",un),H.addEventListener("canplaythrough",an),H.addEventListener("play",Bn),H.addEventListener("waiting",kn),H.addEventListener("playing",mr),H.addEventListener("pause",vr),H.addEventListener("error",Nn),H.addEventListener("seeking",bt),H.addEventListener("seeked",en),H.addEventListener("timeupdate",Zt),H.addEventListener("progress",mn),H.addEventListener("ratechange",bn),H.addEventListener("loadedmetadata",Zn),H.addEventListener("loadeddata",Fn),H.addEventListener("stalled",Dn),H.addEventListener("ended",qn),H.addEventListener("volumechange",Yn),_e=ie.manifestInfo.isDynamic,Ze=!1,Ae=!1,te.on(T.Z.DATA_UPDATE_COMPLETED,Dt,F),te.on(T.Z.LOADING_PROGRESS,On,F),te.on(T.Z.MANIFEST_UPDATED,Vt,F),te.on(T.Z.STREAMS_COMPOSED,qe,F),te.on(_.Z.PLAYBACK_ENDED,Jt,F,{priority:m.Z.EVENT_PRIORITY_HIGH}),te.on(_.Z.STREAM_INITIALIZING,Ct,F),te.on(_.Z.REPRESENTATION_SWITCH,Qe,F),te.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Qt,F),te.on(_.Z.DYNAMIC_TO_STATIC,Pn,F),ve&&(ve=!1,xe()))},setConfig:function(Je){Je&&(Je.streamController&&(j=Je.streamController),Je.serviceDescriptionController&&(V=Je.serviceDescriptionController),Je.dashMetrics&&(W=Je.dashMetrics),Je.adapter&&(ee=Je.adapter),Je.videoModel&&(H=Je.videoModel),Je.timelineConverter&&(re=Je.timelineConverter),Je.settings&&(ae=Je.settings))},getTimeToStreamEnd:Ce,getBufferLevel:function(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Ot=null;return j.getActiveStreamProcessors().forEach(function(yn){if(!Je||Je.length===0||Je.indexOf(yn.getType())===-1){var Cn=yn.getBufferLevel();Ot=Ot===null?Cn:Math.min(Ot,Cn)}}),Ot},getPlaybackStalled:function(){return Ze},getTime:lt,getLowLatencyModeEnabled:function(){return Se},getInitialCatchupModeActivated:function(){return le},getIsManifestUpdateInProgress:function(){return q},getPlaybackRate:Gt,getPlayedRanges:function(){return ie&&H?H.getPlayedRanges():null},getEnded:Bt,getIsDynamic:jt,getStreamController:function(){return j},computeAndSetLiveDelay:function(Je,Ot){var yn,Cn,yr,oi=!isNaN(Je)&&isFinite(Je)?Je:NaN,gi=ee.getSuggestedPresentationDelay(),Xr=V.getServiceDescriptionSettings();return yn=isNaN(ae.get().streaming.delay.liveDelay)?ae.get().streaming.delay.liveDelayFragmentCount===null||isNaN(ae.get().streaming.delay.liveDelayFragmentCount)||isNaN(oi)?Xr&&!isNaN(Xr.liveDelay)&&Xr.liveDelay>0?Xr.liveDelay:ae.get().streaming.delay.useSuggestedPresentationDelay===!0&&gi!==null&&!isNaN(gi)&&gi>0?gi:isNaN(oi)?Ot&&!isNaN(Ot.minBufferTime)?4*Ot.minBufferTime:4*ie.manifestInfo.minBufferTime:4*oi:oi*ae.get().streaming.delay.liveDelayFragmentCount:ae.get().streaming.delay.liveDelay,(yr=ee.getAvailabilityStartTime())!==null&&(je=yr),Cn=Ot&&Ot.dvrWindowSize>0?Math.min(yn,Ot.dvrWindowSize):yn,we=Cn,Te=Cn,Cn},getLiveDelay:function(){return we},getOriginalLiveDelay:function(){return Te},getCurrentLiveLatency:function(){if(!_e||isNaN(je))return NaN;var Je=lt();if(isNaN(Je)||Je===0)return 0;var Ot=new Date().getTime()+1e3*re.getClientTimeOffset();return Math.max(((Ot-je-1e3*Je)/1e3).toFixed(3),0)},play:xe,isPaused:vt,isStalled:qt,pause:me,isSeeking:pt,getStreamEndTime:Be,seek:Me,seekToOriginalLive:function(){var Je=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Ot=arguments.length>1&&arguments[1]!==void 0&&arguments[1],yn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Cn=ze();if(Cn!==0){var yr=Cn-(we=Te);Me(yr,Je,Ot,yn)}},seekToCurrentLive:function(){var Je=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Ot=arguments.length>1&&arguments[1]!==void 0&&arguments[1],yn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Cn=ze();if(Cn!==0){var yr=Cn-we;Me(yr,Je,Ot,yn)}},reset:De,updateCurrentTime:xn,getAvailabilityStartTime:function(){return je}},O=(0,M.Z)(ue).getInstance().getLogger(F),De(),F}I.__dashjs_factory_name="PlaybackController";var x=U.Z.getSingletonFactory(I),Z=w(3186),Y="loading",$="executed",Q="failed";function se(F){var O,j,V,W,ee=(F=F||{}).eventBus,H=F.events,re=F.dashMetrics,he=F.fragmentLoader,we=F.debug,Te=F.streamInfo,ie=F.type;function _e(q){var le;return!!q&&(le=!1,V.some(function(ae){if(ue=q,te=ae,!isNaN(ue.index)&&ue.startTime===te.startTime&&ue.adaptationIndex===te.adaptationIndex&&ue.type===te.type||function(De,Ce){return isNaN(De.index)&&isNaN(Ce.index)&&De.quality===Ce.quality}(q,ae)||function(De,Ce){return De.action===Z.Z.ACTION_COMPLETE&&De.action===Ce.action}(q,ae))return le=!0;var ue,te}),le)}function ve(q){return isNaN(q.duration)?.25:Math.min(q.duration/8,.5)}function Ve(q){V=V.filter(function(le){var ae=ve(le);return isNaN(le.startTime)||q!==void 0&&le.startTime>=q-ae})}function Pe(q,le){le<=q+.5||(V=V.filter(function(ae){var ue=ve(ae);return isNaN(ae.startTime)||ae.startTime>=le-ue||isNaN(ae.duration)||ae.startTime+ae.duration<=q+ue}))}function je(q,le,ae){for(var ue=q.length-1;ue>=0;ue--){var te=q[ue],De=te.startTime,Ce=De+te.duration;if(ae=isNaN(ae)?ve(te):ae,!isNaN(De)&&!isNaN(Ce)&&le+ae>=De&&le-ae<Ce||isNaN(De)&&isNaN(le))return te}return null}function Ke(q,le){re.addSchedulingInfo(q,le),re.addRequestsQueue(q.mediaType,W,V)}function Se(q){q.sender===he&&(W.splice(W.indexOf(q.request),1),q.response&&!q.error&&V.push(q.request),Ke(q.request,q.error?Q:$),ee.trigger(H.FRAGMENT_LOADING_COMPLETED,{request:q.request,response:q.response,error:q.error,sender:this},{streamId:Te.id,mediaType:ie}))}function Le(q){q.sender===he&&ee.trigger(H.FRAGMENT_LOADING_PROGRESS,{request:q.request,response:q.response,error:q.error,sender:this},{streamId:Te.id,mediaType:ie})}function Ae(q){q.sender===he&&ee.trigger(H.FRAGMENT_LOADING_ABANDONED,{request:q.request},{streamId:Te.id,mediaType:ie})}function Ze(){V=[],W=[]}return O={getStreamId:function(){return Te.id},getType:function(){return ie},getRequests:function(q){var le=q?q.state instanceof Array?q.state:[q.state]:[],ae=[];return le.forEach(function(ue){var te=function(De){var Ce;switch(De){case Y:Ce=W;break;case $:Ce=V;break;default:Ce=[]}return Ce}(ue);ae=ae.concat(function(De,Ce){return Ce.hasOwnProperty("time")?[je(De,Ce.time,Ce.threshold)]:De.filter(function(Be){for(var xe in Ce)if(xe!=="state"&&Ce.hasOwnProperty(xe)&&Be[xe]!=Ce[xe])return!1;return!0})}(te,q))}),ae},isFragmentLoaded:_e,isFragmentLoadedOrPending:function(q){var le,ae=!1,ue=0;if(!(ae=_e(q)))for(ue=0;ue<W.length;ue++)le=W[ue],q.url===le.url&&q.startTime===le.startTime&&(ae=!0);return ae},removeExecutedRequestsBeforeTime:Ve,removeExecutedRequestsAfterTime:function(q){V=V.filter(function(le){return isNaN(le.startTime)||q!==void 0&&le.startTime<q})},syncExecutedRequestsWithBufferedRange:function(q,le){if(q&&q.length!==0){for(var ae=0,ue=0,te=q.length;ue<te;ue++)Pe(ae,q.start(ue)),ae=q.end(ue);le>0&&Pe(ae,le)}else Ve()},abortRequests:function(){j.debug("abort requests"),he.abort(),W=[]},executeRequest:function(q){q.action===Z.Z.ACTION_DOWNLOAD?(Ke(q,Y),W.push(q),function(le){ee.trigger(H.FRAGMENT_LOADING_STARTED,{request:le},{streamId:Te.id,mediaType:ie}),he.load(le)}(q)):j.warn("Unknown request action.")},reset:function(){ee.off(H.LOADING_COMPLETED,Se,this),ee.off(H.LOADING_DATA_PROGRESS,Le,this),ee.off(H.LOADING_ABANDONED,Ae,this),he&&he.reset(),Ze()},resetInitialSettings:Ze,addExecutedRequest:function(q){V.push(q)}},j=we.getLogger(O),Ze(),ee.on(H.LOADING_COMPLETED,Se,O),ee.on(H.LOADING_DATA_PROGRESS,Le,O),ee.on(H.LOADING_ABANDONED,Ae,O),O}se.__dashjs_factory_name="FragmentModel";var R=U.Z.getClassFactory(se);R.FRAGMENT_MODEL_LOADING=Y,R.FRAGMENT_MODEL_EXECUTED=$,R.FRAGMENT_MODEL_CANCELED="canceled",R.FRAGMENT_MODEL_FAILED=Q,U.Z.updateClassFactory(se.__dashjs_factory_name,R);var X=R,ce=w(5459);function oe(F){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},oe(F)}function ye(F,O){return ye=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},ye(F,O)}function be(F,O){return!O||oe(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(F):O}function Xe(F){return Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Xe(F)}var Ie=new(function(F){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&ye(ee,H)})(W,F);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Xe(O);if(j){var re=Xe(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return be(this,ee)});function W(){var ee;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,W),(ee=V.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,ee.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,ee.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,ee.SEGMENT_BASE_LOADER_ERROR_CODE=15,ee.TIME_SYNC_FAILED_ERROR_CODE=16,ee.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,ee.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,ee.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,ee.APPEND_ERROR_CODE=20,ee.REMOVE_ERROR_CODE=21,ee.DATA_UPDATE_FAILED_ERROR_CODE=22,ee.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,ee.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,ee.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,ee.DOWNLOAD_ERROR_ID_SIDX_CODE=26,ee.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,ee.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,ee.DOWNLOAD_ERROR_ID_XLINK_CODE=29,ee.MANIFEST_ERROR_ID_PARSE_CODE=31,ee.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,ee.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,ee.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,ee.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,ee.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",ee.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",ee.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",ee.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",ee.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",ee.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",ee.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",ee.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",ee.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",ee.APPEND_ERROR_MESSAGE="chunk is not defined",ee.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",ee.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",ee.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",ee.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",ee.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",ee.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",ee}return W}(w(2230).Z)),Ge=w(1264),at=w(7855);function ft(F){var O,j,V,W,ee,H,re=this.context,he=(0,Ge.Z)(re).getInstance(),we=F.textController,Te=F.eventBus,ie=[],_e=[],ve=!1,Ve=F.mediaSource,Pe=null;function je(te){return new Promise(function(De){ue(function(){W.changeType&&W.changeType(te),De()})})}function Ke(te){return W=we.getTextSourceBuffer(te),Promise.resolve()}function Se(){if(typeof W.addEventListener=="function")try{W.addEventListener("updateend",le,!1),W.addEventListener("error",ae,!1),W.addEventListener("abort",ae,!1)}catch(te){H=setInterval(le,50)}else H=setInterval(le,50)}function Le(te){return new Promise(function(De){W&&he.get().streaming.buffer.useAppendWindow?ue(function(){try{if(!W)return void De();var Ce=Ve.duration,Be=0;te&&!isNaN(te.start)&&!isNaN(te.duration)&&isFinite(te.duration)&&(Ce=te.start+te.duration),te&&!isNaN(te.start)&&(Be=te.start),W.appendWindowEnd===Ce&&W.appendWindowStart===Be||(W.appendWindowStart=0,W.appendWindowEnd=Ce+.01,W.appendWindowStart=Math.max(Be-.1,0),V.debug("Updated append window for ".concat(ee.type,". Set start to ").concat(W.appendWindowStart," and end to ").concat(W.appendWindowEnd))),De()}catch(xe){V.warn("Failed to set append window"),De()}}):De()})}function Ae(te){return new Promise(function(De){W?ue(function(){try{W.timestampOffset===te||isNaN(te)||(W.timestampOffset=te,V.debug("Set MSE timestamp offset to ".concat(te))),De()}catch(Ce){De()}}):De()})}function Ze(){if(!ve&&_e.length>0){ve=!0;var te=_e[0];_e.splice(0,1);var De=function(){ve=!1,_e.length>0&&Ze.call(this),te&&te.data&&te.data.segmentType&&te.data.segmentType!==at.w.INIT_SEGMENT_TYPE&&delete te.data.bytes,te.promise.resolve({chunk:te.data})};try{Pe=te.request,te.data.bytes.byteLength===0?De.call(this):(W.appendBuffer?W.appendBuffer(te.data.bytes):W.append(te.data.bytes,te.data),ue(De.bind(this)))}catch(Ce){V.fatal('SourceBuffer append failed "'+Ce+'"'),_e.length>0?Ze():ve=!1,delete te.data.bytes,te.promise.reject({chunk:te.data,error:new ce.Z(Ce.code,Ce.message)})}}}function q(){ie.length>0&&(W.updating||(ie.shift()(),q()))}function le(){W.updating||q()}function ae(te){var De,Ce,Be=te.target||{};De=T.Z.SOURCE_BUFFER_ERROR,Ce={error:Be,lastRequestAppended:Pe},Te.trigger(De,Ce,{streamId:ee.streamInfo.id,mediaType:j})}function ue(te){ie.push(te),W.updating||q()}return O={getType:function(){return j},getAllBufferRanges:function(){try{return W.buffered}catch(te){return V.error("getAllBufferRanges exception: "+te.message),null}},getBuffer:function(){return W},append:function(te){var De=this,Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(Be,xe){te?(_e.push({data:te,promise:{resolve:Be,reject:xe},request:Ce}),ue(Ze.bind(De))):xe({chunk:te,error:new ce.Z(Ie.APPEND_ERROR_CODE,Ie.APPEND_ERROR_MESSAGE)})})},remove:function(te){return new Promise(function(De,Ce){var Be=te.start,xe=te.end;Be>=0&&xe>Be?ue(function(){try{W.remove(Be,xe),ue(function(){De({from:Be,to:xe,unintended:!1}),te.resolve&&te.resolve()})}catch(me){Ce({from:Be,to:xe,unintended:!1,error:new ce.Z(Ie.REMOVE_ERROR_CODE,Ie.REMOVE_ERROR_MESSAGE)}),te.reject&&te.reject(me)}}):De()})},abort:function(){return new Promise(function(te){try{_e=[],Ve.readyState==="open"?ue(function(){try{W&&W.abort(),te()}catch(De){te()}}):(W&&W.setTextTrack&&Ve.readyState==="ended"&&W.abort(),te())}catch(De){te()}})},reset:function(){if(W){try{ie=[],function(){try{typeof W.removeEventListener=="function"&&(W.removeEventListener("updateend",le,!1),W.removeEventListener("error",ae,!1),W.removeEventListener("abort",ae,!1)),clearInterval(H)}catch(te){V.error(te)}}(),ve=!1,_e=[],W.getClassName&&W.getClassName()==="TextSourceBuffer"||(V.debug("Removing sourcebuffer from media source"),Ve.removeSourceBuffer(W))}catch(te){}W=null}Pe=null},updateTimestampOffset:Ae,initializeForStreamSwitch:function(te,De,Ce){j=(ee=te).type;var Be=ee.codec;(function(me){W=me.getBuffer()})(Ce),Se();var xe=[];return xe.push(new Promise(function(me){ue(function(){var Me=W.appendWindowStart,ze=W.appendWindowEnd;W&&(W.abort(),W.appendWindowStart=Me,W.appendWindowEnd=ze),me()})})),xe.push(Le(ee.streamInfo)),he.get().streaming.buffer.useChangeTypeForTrackSwitch&&xe.push(je(Be)),De&&De.MSETimeOffset!==void 0&&xe.push(Ae(De.MSETimeOffset)),Promise.all(xe)},initializeForFirstUse:function(te,De,Ce){j=(ee=De).type;var Be=ee.codec;try{if(Be.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return Ke(te);W=Ve.addSourceBuffer(Be),Se();var xe=[];return xe.push(Le(ee.streamInfo)),Ce&&Ce.MSETimeOffset!==void 0&&xe.push(Ae(Ce.MSETimeOffset)),Promise.all(xe)}catch(me){return ee.type==E.Z.TEXT&&!ee.isFragmented||Be.indexOf('codecs="stpp')!==-1||Be.indexOf('codecs="vtt')!==-1||Be.indexOf("text/vtt")!==-1?Ke(te):Promise.reject(me)}},updateAppendWindow:Le,changeType:je},V=(0,M.Z)(re).getInstance().getLogger(O),O}ft.__dashjs_factory_name="SourceBufferSink";var We=U.Z.getClassFactory(ft);function ut(F){var O,j,V,W=this.context,ee=[],H=F;function re(he,we){return ee=ee.filter(function(Te){return!((isNaN(we)||Te.start<we)&&(isNaN(he)||Te.end>he))}),Promise.resolve()}return O={getAllBufferRanges:function(){for(var he=[],we=0;we<ee.length;we++){var Te=ee[we];he.length===0||Te.start>he[he.length-1].end?he.push({start:Te.start,end:Te.end}):he[he.length-1].end=Te.end}var ie={start:function(_e){return he[_e].start},end:function(_e){return he[_e].end}};return Object.defineProperty(ie,"length",{get:function(){return he.length}}),ie},append:function(he){return he.segmentType!=="InitializationSegment"?(ee.push(he),ee.sort(function(we,Te){return we.start-Te.start}),V=null):V=he,j.debug("PreBufferSink appended chunk s: "+he.start+"; e: "+he.end),H&&H({chunk:he}),Promise.resolve()},remove:re,abort:function(){return Promise.resolve()},discharge:function(he,we){var Te=function(ie,_e){return ee.filter(function(ve){return(isNaN(_e)||ve.start<_e)&&(isNaN(ie)||ve.end>ie)})}(he,we);return V&&(Te.push(V),V=null),re(he,we),Te},reset:function(){ee=[],V=null,H=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(he){he()},getBuffer:function(){return this}},j=(0,M.Z)(W).getInstance().getLogger(O),O}ut.__dashjs_factory_name="PreBufferSink";var At=U.Z.getClassFactory(ut);function Ne(){var F={};return{save:function(O){var j=O.streamId,V=O.representationId;F[j]=F[j]||{},F[j][V]=O},extract:function(O,j){return F&&F[O]&&F[O][j]?F[O][j]:null},reset:function(){F={}}}}Ne.__dashjs_factory_name="InitCache";var et=U.Z.getSingletonFactory(Ne),dt=.01,rn="BufferController";function Yt(F){F=F||{};var O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve,Pe,je,Ke,Se,Le,Ae,Ze,q=this.context,le=(0,m.Z)(q).getInstance(),ae=F.errHandler,ue=F.fragmentModel,te=F.representationController,De=F.adapter,Ce=F.textController,Be=F.abrController,xe=F.playbackController,me=F.streamInfo,Me=F.type,ze=F.settings;function mt(Qe){var Vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(qe,Je){H=Qe,we&&Vt&&typeof we.discharge=="function"?(Te=we,vt(Vt).then(function(){qe()}).catch(function(Ot){Je(Ot)})):qe()})}function lt(Qe){return De.convertRepresentationToRepresentationInfo(te.getRepresentationForQuality(Qe))}function vt(Qe){var Vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(qe,Je){Se&&Qe?H?(ie=!1,qt(Qe,Vt).then(function(Ot){qe(Ot)}).catch(function(Ot){Je(Ot)})):(ie=!0,pt().then(function(Ot){qe(Ot)}).catch(function(Ot){Je(Ot)})):qe(null)})}function pt(){var Qe=this;return new Promise(function(Vt,qe){var Je=Be.getQualityFor(Me,me.id);we=At(q).create(it.bind(Qe)),Zn(lt(Je)).then(function(){Vt(we)}).catch(function(){qe()})})}function qt(Qe,Vt){return new Promise(function(qe,Je){var Ot=Be.getQualityFor(Me,me.id);we=We(q).create({mediaSource:H,textController:Ce,eventBus:le}),function(yn,Cn,yr){var oi=lt(yr);return Cn&&Cn[Me]&&(Me===E.Z.VIDEO||Me===E.Z.AUDIO)?we.initializeForStreamSwitch(yn,oi,Cn[Me]):we.initializeForFirstUse(me,yn,oi)}(Qe,Vt,Ot).then(function(){return Zn(lt(Ot))}).then(function(){qe(we)}).catch(function(yn){j.fatal("Caught error on create SourceBuffer: "+yn),ae.error(new ce.Z(Ie.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ie.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+Me)),Je(yn)})})}function Gt(Qe){ze.get().streaming.cacheInitSegments&&(j.info("Init fragment finished loading saving to",Me+"'s init cache"),Se.save(Qe.chunk)),j.debug("Append Init fragment",Me," with representationId:",Qe.chunk.representationId," and quality:",Qe.chunk.quality,", data size:",Qe.chunk.bytes.byteLength),jt(Qe.chunk)}function Bt(Qe){jt(Qe.chunk,Qe.request)}function jt(Qe){var Vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;we&&(we.append(Qe,Vt).then(function(qe){it(qe)}).catch(function(qe){it(qe)}),Qe.mediaInfo.type===E.Z.VIDEO&&Dn(T.Z.VIDEO_CHUNK_RECEIVED,{chunk:Qe}))}function xn(Qe){if(Qe&&Qe.length>0)for(var Vt=0,qe=Qe.length;Vt<qe;Vt++)j.debug("Buffered range: "+Qe.start(Vt)+" - "+Qe.end(Vt)+", currentTime = ",xe.getTime())}function it(Qe){if(Qe.error)return Qe.error.code===22&&function(){if(Ke=!0,ee=.8*Nn(),j.warn("Quota exceeded, Critical Buffer: "+ee),ee>0){var Je=Math.max(.2*ee,1),Ot=ee-Je,yn=Math.min(ze.get().streaming.buffer.bufferTimeAtTopQuality,.9*Ot),Cn=Math.min(ze.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Ot),yr={streaming:{buffer:{bufferToKeep:parseFloat(Je.toFixed(5)),bufferTimeAtTopQuality:parseFloat(yn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Cn.toFixed(5))}}};ze.update(yr)}}(),void(Qe.error.code!==22&&On()||(j.warn("Clearing playback buffer to overcome quota exceed situation"),Dn(T.Z.QUOTA_EXCEEDED,{criticalBufferLevel:ee,quotaExceededTime:Qe.chunk.start}),Zt(en())));if(we&&(Bn(),Ke=!1,(Ve=Qe.chunk)&&Ve.endFragment)){Ve&&!isNaN(Ve.index)&&(re=Math.max(Ve.index,re),kn());var Vt=we.getAllBufferRanges();Ve.segmentType===at.w.MEDIA_SEGMENT_TYPE&&(xn(Vt),Dt(),function(){if(!isNaN(Ze)&&!ie)if(Me===E.Z.AUDIO||Me===E.Z.VIDEO){var Je=xe.getTime(),Ot=Qt(Je,0),yn=Qt(Ze,0);if(Ot&&yn&&Ot.start===yn.start)Ze=NaN;else{var Cn=te.getCurrentRepresentation().segmentDuration,yr=Qt(Ze,Cn);yr&&(ze.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Je-Ze)>Cn?Ze<=yr.end&&xe.seek(Math.max(Ze,yr.start),!1,!0):Je<yr.start&&xe.seek(yr.start,!1,!0))}}else Ze=NaN}());var qe=!1;_e&&(_e.indexOf(Ve)>0&&(qe=!0),_e=null),Ve&&!qe&&Dn(T.Z.BYTES_APPENDED_END_FRAGMENT,{quality:Ve.quality,startTime:Ve.start,index:Ve.index,bufferedRanges:Vt,segmentType:Ve.segmentType,mediaType:Me})}}function _t(){return new Promise(function(Qe,Vt){var qe=Xt();if(!qe||qe.length===0)return Dt(),void Qe();Zt(qe).then(function(){Qe()}).catch(function(Je){Vt(Je)})})}function Xt(Qe){var Vt=[],qe=we.getAllBufferRanges();if(!qe||qe.length===0)return Vt;if(!Qe&&Qe!==0||isNaN(Qe))Vt.push({start:qe.start(0),end:qe.end(qe.length-1)+.5});else{var Je=function(yn,Cn){var yr=ze.get().streaming.buffer.bufferToKeep,oi=Cn.start(0);if(yn-oi>yr){var gi=Math.max(0,yn-yr),Xr=ue.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:yn,threshold:dt})[0];if(Xr&&(gi=Math.min(Xr.startTime,gi)),gi>0)return{start:oi,end:gi}}return null}(Qe,qe),Ot=function(yn,Cn){var yr=Cn.end(Cn.length-1)+.5,oi=Pn(yn),gi=me.manifestInfo.duration>=ze.get().streaming.buffer.longFormContentDurationThreshold?ze.get().streaming.buffer.bufferTimeAtTopQualityLongForm:ze.get().streaming.buffer.bufferTimeAtTopQuality,Xr=isNaN(oi)?yn:Math.min(oi,yn+gi);if(Xr>=Cn.end(Cn.length-1))return null;var Lo=ue.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:yn,threshold:dt})[0];if(Lo&&(Xr=Math.max(Lo.startTime+Lo.duration,Xr)),ze.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var zi=0;zi<Cn.length;zi++)if(Cn.start(zi)<=yn&&yn<=Cn.end(zi)&&Cn.start(zi)<=Xr&&Xr<=Cn.end(zi)){var Cs=Xr;Xr=zi+1<Cn.length?Cn.start(zi+1):Cn.end(zi)+1,j.debug("Buffered range ["+Cn.start(zi)+", "+Cn.end(zi)+"] overlaps with targetTime "+yn+" and range to be pruned ["+Cs+", "+yr+"], using ["+Xr+", "+yr+"] instead"+(Xr<yr?"":" (no actual pruning)"));break}}return Xr<Cn.end(Cn.length-1)?{start:Xr,end:yr}:null}(Qe,qe);Je&&Vt.push(Je),Ot&&Vt.push(Ot)}return Vt}function Dt(){(!Ae||Me===E.Z.TEXT&&Ce.isTextEnabled())&&Bn()}function un(){mr()}function an(){mr(),Ze=NaN}function Qt(Qe,Vt){if(!we)return null;var qe,Je,Ot=we.getAllBufferRanges(),yn=0,Cn=0,yr=null,oi=null,gi=0,Xr=isNaN(Vt)?.15:Vt;if(Ot!=null){for(Je=0,qe=Ot.length;Je<qe;Je++)if(yn=Ot.start(Je),Cn=Ot.end(Je),yr===null)gi=Math.abs(yn-Qe),(Qe>=yn&&Qe<Cn||gi<=Xr)&&(yr=yn,oi=Cn);else{if(!((gi=yn-oi)<=Xr))break;oi=Cn}if(yr!==null)return{start:yr,end:oi}}return null}function Bn(){if(xe){var Qe=xe.getTime()||0;ie&&(Qe=isNaN(Ze)?0:Ze);var Vt=ze.get().streaming.gaps.jumpGaps&&!isNaN(ze.get().streaming.gaps.smallGapLimit)?ze.get().streaming.gaps.smallGapLimit:NaN;W=Math.max(function(qe,Je){var Ot;return ze.get().streaming.gaps.jumpGaps&&(Je=ze.get().streaming.gaps.smallGapLimit),(Ot=Qt(qe,Je))===null?0:Ot.end-qe}(Qe,Vt),0),Dn(T.Z.BUFFER_LEVEL_UPDATED,{mediaType:Me,bufferLevel:W}),mr()}}function kn(){var Qe=re>=he-1,Vt=xe.getTimeToStreamEnd(me)-W<1e-5;!Qe&&!Vt||V||(Jt(!0),j.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(me.id," and type ").concat(Me)))}function mr(){Me!==E.Z.AUDIO&&Me!==E.Z.VIDEO||((!xe.getLowLatencyModeEnabled()&&W<ze.get().streaming.buffer.stallThreshold||W===0)&&!V?vr(P.Z.BUFFER_EMPTY):(V||W>=ze.get().streaming.buffer.stallThreshold||xe.getLowLatencyModeEnabled()&&W>0)&&vr(P.Z.BUFFER_LOADED))}function vr(Qe){ve===Qe||Qe===P.Z.BUFFER_EMPTY&&xe.getTime()===0||Me===E.Z.TEXT&&!Ce.isTextEnabled()||(ve=Qe,Dn(T.Z.BUFFER_LEVEL_STATE_CHANGED,{state:Qe}),Dn(Qe===P.Z.BUFFER_LOADED?T.Z.BUFFER_LOADED:T.Z.BUFFER_EMPTY),j.debug(Qe===P.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function bt(){we&&Me!==E.Z.TEXT&&(V||Zt(en()))}function en(){var Qe=[],Vt=we.getAllBufferRanges();if(!Vt||Vt.length===0)return Qe;var qe=xe.getTime(),Je=Math.max(0,qe-ze.get().streaming.buffer.bufferToKeep),Ot=ue.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:qe,threshold:dt})[0];if(Ot)Je=Math.min(Ot.startTime,Je);else if(qe===0&&xe.getIsDynamic())return[];if(Vt.start(0)<=Je){for(var yn={start:0,end:Je},Cn=0;Cn<Vt.length&&Vt.end(Cn)<=Je;Cn++)yn.end=Vt.end(Cn);yn.start<yn.end&&Qe.push(yn)}return Qe}function Zt(Qe){return new Promise(function(Vt,qe){if(Qe&&we&&Qe.length!==0){var Je=[];Qe.forEach(function(Ot){Je.push(function(yn){return new Promise(function(Cn,yr){yn.resolve=Cn,yn.reject=yr,Le.push(yn)})}(Ot))}),je||mn(),Promise.all(Je).then(function(){Vt()}).catch(function(Ot){qe(Ot)})}else Vt()})}function mn(){try{if(Le.length===0||!we)return j.debug("Nothing to prune, halt pruning"),Le=[],void(je=!1);var Qe=we.getBuffer();if(!Qe||!Qe.buffered||Qe.buffered.length===0)return j.debug("SourceBuffer is empty (or does not exist), halt pruning"),Le=[],void(je=!1);var Vt=Le.shift();j.debug("".concat(Me,": Removing buffer from: ").concat(Vt.start," to ").concat(Vt.end)),je=!0,xe.getTime()<Vt.end&&Jt(!1),we.remove(Vt).then(function(qe){bn(qe)}).catch(function(qe){bn(qe)})}catch(qe){je=!1}}function bn(Qe){j.debug("onRemoved buffer from:",Qe.from,"to",Qe.to),we&&(xn(we.getAllBufferRanges()),Le.length===0&&(je=!1,Bn()),Qe.unintended&&(j.warn("Detected unintended removal from:",Qe.from,"to",Qe.to,"setting streamprocessor time to",Qe.from),Dn(T.Z.SEEK_TARGET,{time:Qe.from})),je?mn():(Ae?Ae=!1:Bn(),Dn(T.Z.BUFFER_CLEARED,{from:Qe.from,to:Qe.to,unintended:Qe.unintended,hasEnoughSpaceToAppend:On(),quotaExceeded:Ke})))}function Zn(Qe){return new Promise(function(Vt){Qe&&Qe.MSETimeOffset!==void 0&&we&&we.updateTimestampOffset?we.updateTimestampOffset(Qe.MSETimeOffset).then(function(){Vt()}).catch(function(){Vt()}):Vt()})}function Fn(){return we&&!V?we.updateAppendWindow(me):Promise.resolve()}function qn(){++Pe*(ze.get().streaming.wallclockTimeUpdateInterval/1e3)>=ze.get().streaming.buffer.bufferPruningInterval&&(Pe=0,bt())}function Yn(){mr()}function Jt(Qe){(V=Qe)?Dn(T.Z.BUFFERING_COMPLETED):he=Number.POSITIVE_INFINITY}function Nn(){try{var Qe,Vt,qe=we.getAllBufferRanges(),Je=0;if(!qe)return Je;for(Vt=0,Qe=qe.length;Vt<Qe;Vt++)Je+=qe.end(Vt)-qe.start(Vt);return Je}catch(Ot){return 0}}function Pn(Qe){try{var Vt=Qe,qe=we.getAllBufferRanges();if(!qe||qe.length===0)return NaN;for(var Je=0;Vt===Qe&&Je<qe.length;){var Ot=qe.start(Je),yn=qe.end(Je);Vt>=Ot&&Vt<=yn&&(Vt=yn),Je+=1}return Vt===Qe?NaN:Vt}catch(Cn){}}function On(){var Qe=Nn();return isNaN(Qe)||Qe<ee}function Dn(Qe,Vt){var qe=Vt||{};le.trigger(Qe,qe,{streamId:me.id,mediaType:Me})}function Ct(Qe,Vt){if(ee=Number.POSITIVE_INFINITY,ve=void 0,he=Number.POSITIVE_INFINITY,re=0,Ve=null,V=!1,je=!1,Ke=!1,W=0,Pe=0,Le=[],Ze=NaN,ie=!1,we){var qe=we;we=null,Qe||Vt||qe.abort().then(function(){qe.reset(Vt),qe=null})}Ae=!1}return O={initialize:function(Qe){mt(Qe),le.on(T.Z.INIT_FRAGMENT_LOADED,Gt,O),le.on(T.Z.MEDIA_FRAGMENT_LOADED,Bt,O),le.on(T.Z.WALLCLOCK_TIME_UPDATED,qn,O),le.on(_.Z.PLAYBACK_PLAYING,an,O),le.on(_.Z.PLAYBACK_PROGRESS,Dt,O),le.on(_.Z.PLAYBACK_TIME_UPDATED,Dt,O),le.on(_.Z.PLAYBACK_RATE_CHANGED,Yn,O),le.on(_.Z.PLAYBACK_STALLED,un,O)},getStreamId:function(){return me.id},getType:function(){return Me},getBufferControllerType:function(){return rn},createBufferSink:vt,dischargePreBuffer:function(){if(we&&Te&&typeof Te.discharge=="function"){var Qe=Te.getAllBufferRanges();if(Qe.length>0){for(var Vt="Beginning "+Me+"PreBuffer discharge, adding buffer for:",qe=0;qe<Qe.length;qe++)Vt+=" start: "+Qe.start(qe)+", end: "+Qe.end(qe)+";";j.debug(Vt)}else j.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");_e=[];for(var Je=Te.discharge(),Ot=null,yn=0;yn<Je.length;yn++){var Cn=Je[yn];if(Cn.segmentType!==at.w.INIT_SEGMENT_TYPE){var yr=Se.extract(Cn.streamId,Cn.representationId);yr&&Ot!==yr&&(_e.push(yr),we.append(yr),Ot=yr)}_e.push(Cn),we.append(Cn)}Te.reset(),Te=null}},getBuffer:function(){return we},getBufferLevel:function(){return W},getRangeAt:Qt,hasBufferAtTime:function(Qe){try{var Vt=we.getAllBufferRanges();if(!Vt||Vt.length===0)return!1;for(var qe=0;qe<Vt.length;){var Je=Vt.start(qe),Ot=Vt.end(qe);if(Qe>=Je&&Qe<=Ot)return!0;qe+=1}return!1}catch(yn){return j.error(yn),!1}},pruneBuffer:bt,setMediaSource:mt,getMediaSource:function(){return H},appendInitSegmentFromCache:function(Qe){var Vt=Se.extract(me.id,Qe);return!!Vt&&(j.info("Append Init fragment",Me," with representationId:",Vt.representationId," and quality:",Vt.quality,", data size:",Vt.bytes.byteLength),jt(Vt),!0)},getIsBufferingCompleted:function(){return V},setIsBufferingCompleted:Jt,getIsPruningInProgress:function(){return je},reset:function(Qe,Vt){le.off(T.Z.INIT_FRAGMENT_LOADED,Gt,this),le.off(T.Z.MEDIA_FRAGMENT_LOADED,Bt,this),le.off(T.Z.WALLCLOCK_TIME_UPDATED,qn,this),le.off(_.Z.PLAYBACK_PLAYING,an,this),le.off(_.Z.PLAYBACK_PROGRESS,Dt,this),le.off(_.Z.PLAYBACK_TIME_UPDATED,Dt,this),le.off(_.Z.PLAYBACK_RATE_CHANGED,Yn,this),le.off(_.Z.PLAYBACK_STALLED,un,this),Ct(Qe,Vt)},prepareForPlaybackSeek:function(){return V&&Jt(!1),we.abort()},prepareForReplacementTrackSwitch:function(Qe){return new Promise(function(Vt,qe){we.abort().then(function(){return Fn()}).then(function(){return ze.get().streaming.buffer.useChangeTypeForTrackSwitch?we.changeType(Qe):Promise.resolve()}).then(function(){return _t()}).then(function(){Jt(!1),Vt()}).catch(function(Je){qe(Je)})})},prepareForNonReplacementTrackSwitch:function(Qe){return new Promise(function(Vt,qe){Fn().then(function(){return ze.get().streaming.buffer.useChangeTypeForTrackSwitch?we.changeType(Qe):Promise.resolve()}).then(function(){Vt()}).catch(function(Je){qe(Je)})})},prepareForForceReplacementQualitySwitch:function(Qe){return new Promise(function(Vt,qe){we.abort().then(function(){return Fn()}).then(function(){return _t()}).then(function(){return Zn(Qe)}).then(function(){Jt(!1),Vt()}).catch(function(Je){qe(Je)})})},updateAppendWindow:Fn,getAllRangesWithSafetyFactor:Xt,getContinuousBufferTimeForTargetTime:Pn,clearBuffers:Zt,pruneAllSafely:_t,updateBufferTimestampOffset:Zn,setSeekTarget:function(Qe){Ze=Qe},segmentRequestingCompleted:function(Qe){isNaN(Qe)||(he=Qe,kn())}},j=(0,M.Z)(q).getInstance().getLogger(O),Se=et(q).getInstance(),Ct(),O}Yt.__dashjs_factory_name=rn;var St=U.Z.getClassFactory(Yt),kt="NotFragmentedTextBufferController";function Re(F){F=F||{};var O,j,V,W,ee,H,re=this.context,he=(0,m.Z)(re).getInstance(),we=F.textController,Te=F.errHandler,ie=F.streamInfo,_e=F.type;function ve(je){W=je}function Ve(je){var Ke,Se;j!==je&&(j=je)&&(Ke=T.Z.BUFFERING_COMPLETED,Se={},he.trigger(Ke,Se,{streamId:ie.id,mediaType:_e}))}function Pe(je){je.chunk.bytes&&!j&&(H.save(je.chunk),ee.append(je.chunk),Ve(!0))}return O={initialize:function(je){ve(je)},getStreamId:function(){return ie.id},getType:function(){return _e},getBufferControllerType:function(){return kt},createBufferSink:function(je){return new Promise(function(Ke,Se){try{(ee=We(re).create({mediaSource:W,textController:we,eventBus:he})).initializeForFirstUse(ie,je),V||(ee.getBuffer()&&typeof ee.getBuffer().initialize=="function"&&ee.getBuffer().initialize(),V=!0),Ke(ee)}catch(Le){Te.error(new ce.Z(Ie.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ie.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+_e)),Se(Le)}})},dischargePreBuffer:function(){},getBuffer:function(){return ee},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:ve,getMediaSource:function(){return W},appendInitSegmentFromCache:function(je){return H.extract(ie.id,je)!==null},getIsBufferingCompleted:function(){return j},setIsBufferingCompleted:Ve,getIsPruningInProgress:function(){return!1},reset:function(je){he.off(T.Z.INIT_FRAGMENT_LOADED,Pe,O),!je&&ee&&(ee.abort(),ee.reset(),ee=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return j=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},V=!1,W=null,j=!1,H=et(re).getInstance(),he.on(T.Z.INIT_FRAGMENT_LOADED,Pe,O),O}Re.__dashjs_factory_name=kt;var ne=U.Z.getClassFactory(Re);function Ue(F){F=F||{};var O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve=this.context,Pe=(0,m.Z)(Ve).getInstance(),je=F.dashMetrics,Ke=F.mediaPlayerModel,Se=F.fragmentModel,Le=F.abrController,Ae=F.playbackController,Ze=F.textController,q=F.type,le=F.bufferController,ae=F.representationController,ue=F.settings;function te(){_e=!0}function De(){_e=!1}function Ce(qt){if(!le.getIsBufferingCompleted()){Be();var Gt=isNaN(qt)?0:qt;ee=setTimeout(xe,Gt)}}function Be(){ee&&(clearTimeout(ee),ee=null)}function xe(){try{if(function(){try{return q===E.Z.TEXT&&!Ze.isTextEnabled()||Ae.isPaused()&&(!Ae.getStreamController().getInitialPlayback()||!Ae.getStreamController().getAutoPlay())&&!ue.get().streaming.scheduling.scheduleWhilePaused}catch(Bt){return!1}}())return void Be();if(function(){try{return!!_e&&ae.getCurrentRepresentationInfo()&&(isNaN(we)||Te||(Bt=j.id,jt=Le.getMaxAllowedIndexFor(q,Bt),!(!isNaN(he)&&he==jt||(V.info("Top quality "+q+" index has changed from "+he+" to "+jt),he=jt,0)))||function(){var xn=ae.getCurrentRepresentationInfo();return!q||!xn||je.getCurrentBufferLevel(q)<me()}())}catch(xn){return!1}var Bt,jt}()){var qt=!1;ve&&(qt=Le.checkPlaybackQuality(q,j.id)),qt||(Gt=ae.getCurrentRepresentationInfo(),ie||Gt.quality!==we||Te?(Te?(V.debug("Switch track for "+q+", representation id = "+Gt.id),Te=!1):V.debug("Quality has changed, get init request for representationid = "+Gt.id),Pe.trigger(T.Z.INIT_FRAGMENT_NEEDED,{representationId:Gt.id,sender:O},{streamId:j.id,mediaType:q}),ve=!1,ie=!1):(V.debug("Media segment needed for ".concat(q," and stream id ").concat(j.id)),Pe.trigger(T.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:j.id,mediaType:q}),ve=!0))}else Ce(Ae.getLowLatencyModeEnabled()?ue.get().streaming.scheduling.lowLatencyTimeout:ue.get().streaming.scheduling.defaultTimeout)}catch(Bt){Ce(Ae.getLowLatencyModeEnabled()?ue.get().streaming.scheduling.lowLatencyTimeout:ue.get().streaming.scheduling.defaultTimeout)}var Gt}function me(){var qt=NaN,Gt=ae.getCurrentRepresentationInfo();return q&&Gt&&(qt=q===E.Z.TEXT?function(){try{if(Ze.isTextEnabled()){var Bt=ae.getCurrentRepresentationInfo();if(isNaN(Bt.fragmentDuration)){var jt=je.getCurrentSchedulingInfo(P.Z.SCHEDULING_INFO);return jt?jt.duration:0}return Bt.fragmentDuration}return 0}catch(xn){return 0}}():q===E.Z.AUDIO&&H?function(){try{var Bt=je.getCurrentBufferLevel(E.Z.VIDEO),jt=ae.getCurrentRepresentationInfo();return isNaN(jt.fragmentDuration)?Bt+1:Math.max(Bt+1,jt.fragmentDuration)}catch(xn){return 0}}():function(){try{var Bt=ae.getCurrentRepresentationInfo().mediaInfo.streamInfo;return Le.isPlayingAtTopQuality(Bt)?Bt.manifestInfo.duration>=ue.get().streaming.buffer.longFormContentDurationThreshold?ue.get().streaming.buffer.bufferTimeAtTopQualityLongForm:ue.get().streaming.buffer.bufferTimeAtTopQuality:Ke.getStableBufferTime()}catch(jt){return Ke.getStableBufferTime()}}()),qt}function Me(){ze(!0)}function ze(qt){if(Ae&&Se){var Gt=Se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ae.getTime(),threshold:0})[0];Gt&&Ae.getTime()>=Gt.startTime&&((!re.mediaInfo||Gt.mediaInfo.type===re.mediaInfo.type&&Gt.mediaInfo.index!==re.mediaInfo.index)&&qt&&Pe.trigger(T.Z.TRACK_CHANGE_RENDERED,{mediaType:q,oldMediaInfo:re.mediaInfo,newMediaInfo:Gt.mediaInfo,streamId:j.id}),Gt.quality===re.quality&&Gt.adaptationIndex===re.adaptationIndex||!qt||(V.debug("Quality change rendered for streamId ".concat(j.id," and type ").concat(q)),Pe.trigger(T.Z.QUALITY_CHANGE_RENDERED,{mediaType:q,oldQuality:re.quality,newQuality:Gt.quality,streamId:j.id})),re={mediaInfo:Gt.mediaInfo,quality:Gt.quality,adaptationIndex:Gt.adaptationIndex})}}function mt(){Se.abortRequests(),Be()}function lt(){ue.get().streaming.scheduling.scheduleWhilePaused||Ce()}function vt(qt){je.updatePlayListTraceMetrics({playbackspeed:qt.playbackRate.toString()})}function pt(){ve=!0,W=0,we=NaN,re={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},he=NaN,Te=!1,ie=!1,_e=!0}return O={initialize:function(qt){H=qt,Pe.on(T.Z.URL_RESOLUTION_FAILED,mt,O),Pe.on(_.Z.PLAYBACK_STARTED,lt,O),Pe.on(_.Z.PLAYBACK_RATE_CHANGED,vt,O),Pe.on(_.Z.PLAYBACK_TIME_UPDATED,Me,O),Pe.on(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,te,O),Pe.on(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,De,O)},getType:function(){return q},getStreamId:function(){return j.id},setTimeToLoadDelay:function(qt){W=qt},getTimeToLoadDelay:function(){return W},setSwitchTrack:function(qt){Te=qt},getSwitchTrack:function(){return Te},startScheduleTimer:Ce,clearScheduleTimer:Be,reset:function(){Pe.off(T.Z.URL_RESOLUTION_FAILED,mt,O),Pe.off(_.Z.PLAYBACK_STARTED,lt,O),Pe.off(_.Z.PLAYBACK_RATE_CHANGED,vt,O),Pe.off(_.Z.PLAYBACK_TIME_UPDATED,Me,O),Pe.off(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,te,O),Pe.off(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,De,O),Be(),ze(!1),pt(),j=null},getBufferTarget:me,getPlaybackController:function(){return Ae},setCheckPlaybackQuality:function(qt){ve=qt},setInitSegmentRequired:function(qt){ie=qt},setLastInitializedQuality:function(qt){we=qt}},V=(0,M.Z)(Ve).getInstance().getLogger(O),pt(),j=F.streamInfo,O}Ue.__dashjs_factory_name="ScheduleController";var L=U.Z.getClassFactory(Ue),D=w(7387);function G(F){var O,j,V,W,ee,H,re=(F=F||{}).eventBus,he=F.events,we=F.abrController,Te=F.dashMetrics,ie=F.playbackController,_e=F.timelineConverter,ve=F.type,Ve=F.streamInfo,Pe=F.dashConstants,je=F.segmentsController,Ke=F.isDynamic,Se=F.adapter;function Le(){return ve}function Ae(){return V}function Ze(){return H}function q(){j=null,V=!0,W=[],ee=null}function le(Be){return new Promise(function(xe,me){var Me=Be.hasInitialization(),ze=Be.hasSegments(),mt=[];mt.push(je.updateInitData(Be,Me)),mt.push(je.updateSegmentData(Be,ze)),Promise.all(mt).then(function(lt){var vt;lt[0]&&!lt[0].error&&(Be=function(pt,qt){return qt&&!qt.error&&qt.representation?qt.representation:pt}(Be,lt[0])),lt[1]&&!lt[1].error&&(Be=function(pt,qt){if(qt&&!qt.error){var Gt,Bt,jt,xn,it=qt.segments,_t=[],Xt=0;for(Gt=0,Bt=it?it.length:0;Gt<Bt;Gt++)jt=it[Gt],(xn=(0,D.TJ)(_e,Ke,pt,jt.startTime,jt.duration,jt.timescale,jt.media,jt.mediaRange,Xt))&&(_t.push(xn),xn=null,Xt++);return _t.length>0&&(pt.segments=_t),pt}}(Be,lt[1])),(vt=Be).mediaFinishedInformation=je.getMediaFinishedInformation(vt),function(pt){if(Ae()){var qt,Gt,Bt=Te.getCurrentManifestUpdate(),jt=!1;if(Bt){for(var xn=0;xn<Bt.representationInfo.length;xn++)if((qt=Bt.representationInfo[xn]).index===pt.index&&qt.mediaType===Le()){jt=!0;break}jt||Te.addManifestUpdateRepresentationInfo(pt,Le())}if(function(){for(var _t=0,Xt=W.length;_t<Xt;_t++){var Dt=W[_t].segmentInfoType;if(!W[_t].hasInitialization()||(Dt===Pe.SEGMENT_BASE||Dt===Pe.BASE_URL)&&!W[_t].segments)return!1}return!0}()){we.setPlaybackQuality(ve,Ve,(Gt=H,W.indexOf(Gt)));var it=Te.getCurrentDVRInfo(ve);it&&Te.updateManifestUpdateInfo({latency:it.range.end-ie.getTime()}),Te.getCurrentRepresentationSwitch(Ze().adaptation.type)||ae(),te()}}}(Be),xe()}).catch(function(lt){me(lt)})})}function ae(){(function(){if(!(we&&Te&&ie&&_e))throw new Error(E.Z.MISSING_CONFIG_ERROR)})();var Be=new Date,xe=Ze(),me=1e3*ie.getTime();xe&&Te.addRepresentationSwitch(xe.adaptation.type,Be,me,xe.id),re.trigger(_.Z.REPRESENTATION_SWITCH,{mediaType:ve,streamId:Ve.id,currentRepresentation:xe,numberOfRepresentations:W.length},{streamId:Ve.id,mediaType:ve})}function ue(Be){return Be==null||Be>=W.length?null:W[Be]}function te(Be){V=!1,re.trigger(he.DATA_UPDATE_COMPLETED,{data:j,currentRepresentation:H,error:Be},{streamId:Ve.id,mediaType:ve})}function De(Be){H=Be,ee=Se.convertRepresentationToRepresentationInfo(H)}function Ce(Be){if(Be.newDuration){var xe=Ze();xe&&xe.adaptation.period&&(xe.adaptation.period.duration=Be.newDuration)}}return O={getStreamId:function(){return Ve.id},getType:Le,getData:function(){return j},isUpdating:Ae,updateData:function(Be,xe,me,Me,ze){return new Promise(function(mt,lt){if(V=!0,W=xe,j=Be,De(ue(ze)),me!==E.Z.VIDEO&&me!==E.Z.AUDIO&&(me!==E.Z.TEXT||!Me))return te(),void mt();for(var vt=[],pt=0,qt=W.length;pt<qt;pt++){var Gt=W[pt];vt.push(le(Gt))}Promise.all(vt).then(function(){De(ue(ze)),mt()}).catch(function(Bt){lt(Bt)})})},getCurrentRepresentation:Ze,getCurrentRepresentationInfo:function(){return ee},getRepresentationForQuality:ue,prepareQualityChange:function(Be){De(ue(Be)),ae()},reset:function(){re.off(_.Z.MANIFEST_VALIDITY_CHANGED,Ce,O),q()}},q(),re.on(_.Z.MANIFEST_VALIDITY_CHANGED,Ce,O),O}G.__dashjs_factory_name="RepresentationController";var K=U.Z.getClassFactory(G),ge=w(3106),de=w(9326),He=w(7473),Tt=w(2594);function st(F,O){if(!(F instanceof O))throw new TypeError("Cannot call a class as a function")}var ot=function F(){st(this,F),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};ot.INITIAL_PLAYOUT_START_REASON="initial_playout",ot.SEEK_START_REASON="seek",ot.RESUME_FROM_PAUSE_START_REASON="resume",ot.METRICS_COLLECTION_START_REASON="metrics_collection_start";var tt=function F(){st(this,F),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};tt.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",tt.REBUFFERING_REASON="rebuffering",tt.USER_REQUEST_STOP_REASON="user_request",tt.END_OF_PERIOD_STOP_REASON="end_of_period",tt.END_OF_CONTENT_STOP_REASON="end_of_content",tt.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",tt.FAILURE_STOP_REASON="failure";var ht=w(7802);function yt(){return{ntpToUTC:function(F){var O=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(O.getTime()+F).getTime()}}}yt.__dashjs_factory_name="TimeUtils";var Et=U.Z.getSingletonFactory(yt);function Mt(F){F=F||{};var O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve,Pe,je=this.context,Ke=(0,m.Z)(je).getInstance(),Se=F.streamInfo,Le=F.type,Ae=F.errHandler,Ze=F.mimeType,q=F.timelineConverter,le=F.adapter,ae=F.manifestModel,ue=F.mediaPlayerModel,te=F.fragmentModel,De=F.abrController,Ce=F.playbackController,Be=F.mediaController,xe=F.textController,me=F.dashMetrics,Me=F.settings,ze=F.boxParser,mt=F.segmentBlacklistController;function lt(){return Se.id}function vt(){return Le}function pt(){return le.getIsTextTrack(he.getData())}function qt(){ee=[],W=null,Ve=0,we=!1,Te=!1,ie=!1,Pe=null}function Gt(Ct){return!isNaN(Ct)&&!isNaN(Se.duration)&&isFinite(Se.duration)&&Ct>=Se.start+Se.duration}function Bt(Ct){var Qe=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Ct.sender){if(Ce.getIsManifestUpdateInProgress())Xt();else if((!pt()||xe.isTextEnabled())&&H&&Ct.representationId&&!H.appendInitSegmentFromCache(Ct.representationId)){var Vt=he.getCurrentRepresentation();if(Vt.range===0)return void jt();var qe=_e?_e.getInitRequest(W,Vt):null;qe?te.executeRequest(qe):Qe&&(re.setInitSegmentRequired(!0),Xt())}}}function jt(Ct){var Qe=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Ce.getIsManifestUpdateInProgress()||H.getIsPruningInProgress())Xt();else{var Vt=_t();Vt?(we=!1,Te=!1,xn(Vt)):it(Qe)}}function xn(Ct){isNaN(Ct.startTime+Ct.duration)||(Ve=Ct.startTime+Ct.duration),Ct.delayLoadingTime=new Date().getTime()+re.getTimeToLoadDelay(),re.setTimeToLoadDelay(0),function(Qe){var Vt=Qe.url;return Qe.range&&(Vt=Vt.concat("_",Qe.range)),mt.contains(Vt)}(Ct)?(j.warn("Fragment request url ".concat(Ct.url," for stream id ").concat(Se.id," and media type ").concat(Le," is on the ignore list and will be skipped")),Xt()):(j.debug("Next fragment request url for stream id ".concat(Se.id," and media type ").concat(Le," is ").concat(Ct.url)),te.executeRequest(Ct))}function it(Ct){var Qe,Vt=he.getCurrentRepresentation();if(!Me.get().streaming.gaps.enableSeekFix||!we&&Ce.getTime()!==0||(V?V&&Vt.segmentInfoType===y.Z.SEGMENT_TIMELINE&&(Qe=_e.getValidTimeAheadOfTargetTime(Ve,W,Vt,Me.get().streaming.gaps.threshold)):Qe=_e.getValidTimeAheadOfTargetTime(Ve,W,Vt,Me.get().streaming.gaps.threshold),isNaN(Qe)||Qe===Ve)){if(_e.isLastSegmentRequested(Vt,Ve)){var qe=_e.getCurrentIndex();return j.debug("Segment requesting for stream ".concat(Se.id," has finished")),Ke.trigger(T.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:qe},{streamId:Se.id,mediaType:Le}),H.segmentRequestingCompleted(qe),void re.clearScheduleTimer()}Ct&&Xt()}else Ce.isSeeking()||Ce.getTime()===0?(j.warn("Adjusting playback time ".concat(Qe," because of gap in the manifest. Seeking by ").concat(Qe-Ve)),Ce.seek(Qe,!1,!1)):(j.warn("Adjusting buffering time ".concat(Qe," because of gap in the manifest. Adjusting time by ").concat(Qe-Ve)),Dn(Qe),Ct&&Xt())}function _t(){var Ct,Qe=Fn();if(isNaN(Ve)||vt()===E.Z.TEXT&&!xe.isTextEnabled())return null;if(_e){var Vt=he&&Qe?he.getRepresentationForQuality(Qe.quality):null;Ct=we?_e.getSegmentRequestForTime(W,Vt,Ve):Te?_e.repeatSegmentRequest(W,Vt):_e.getNextSegmentRequest(W,Vt)}return Ct}function Xt(){re.startScheduleTimer(Ce.getLowLatencyModeEnabled()?Me.get().streaming.scheduling.lowLatencyTimeout:Me.get().streaming.scheduling.defaultTimeout)}function Dt(Ct){Ct.error||H.getIsBufferingCompleted()||H.updateBufferTimestampOffset(Ct.currentRepresentation)}function un(Ct){me.addBufferState(Le,Ct.state,re.getBufferTarget()),Ct.state!==P.Z.BUFFER_EMPTY||Ce.isSeeking()||(j.info("Buffer is empty! Stalling!"),me.pushPlayListTraceMetrics(new Date,tt.REBUFFERING_REASON))}function an(Ct){te.syncExecutedRequestsWithBufferedRange(H.getBuffer().getAllBufferRanges(),Se.duration),Ct.quotaExceeded&&Ct.from>Ce.getTime()&&Dn(Ct.from),Ct.hasEnoughSpaceToAppend&&Ct.quotaExceeded&&re.startScheduleTimer()}function Qt(Ct){if(Ct&&Ct.lastRequestAppended&&Ct.lastRequestAppended.url){var Qe=Ct.lastRequestAppended.url;Ct.lastRequestAppended.range&&(Qe=Qe.concat("_",Ct.lastRequestAppended.range)),j.warn("Blacklisting segment with url ".concat(Qe)),mt.add(Qe)}}function Bn(Ct){if(j.debug("Appended bytes for ".concat(Ct.mediaType," and stream id ").concat(Ct.streamId)),Ct.segmentType===at.w.INIT_SEGMENT_TYPE){var Qe=Ct.quality;re.setLastInitializedQuality(Qe),j.info("["+Le+"] lastInitializedRepresentationInfo changed to "+Ct.quality)}Pe?kn(Pe):re.startScheduleTimer(0)}function kn(Ct){var Qe=te.getRequests({state:X.FRAGMENT_MODEL_LOADING});if(Qe&&Qe.length>0)return j.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(Pe=Ct);H.updateBufferTimestampOffset(Ct).then(function(){re.setCheckPlaybackQuality(!1),W.segmentAlignment||W.subSegmentAlignment?re.startScheduleTimer():Pn(),Pe=null,ie=!1}).catch(function(){Pe=null,ie=!1})}function mr(Ct){j.info("onFragmentLoadingAbandoned request: "+Ct.request.url+" has been aborted"),Ce.isSeeking()||re.getSwitchTrack()||ie||(j.info("onFragmentLoadingAbandoned request: "+Ct.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Ct.request&&Ct.request.isInitializationRequest()?re.setInitSegmentRequired(!0):Dn(Ct.request.startTime+Ct.request.duration/2),re.startScheduleTimer(0))}function vr(Ct){j.info("OnFragmentLoadingCompleted for stream id "+Se.id+" and media type "+Le+" - Url:",Ct.request?Ct.request.url:"undefined",Ct.request.range?", Range:"+Ct.request.range:""),pt()&&re.startScheduleTimer(0),Ct.error&&Ct.request.serviceLocation&&function(Qe){j.info("Fragment loading completed with an error"),Qe&&Qe.request&&Qe.request.type&&(Qe.request.type===at.w.INIT_SEGMENT_TYPE?Bt({representationId:Qe.request.representationId,sender:{}},!1):Qe.request.type===at.w.MEDIA_SEGMENT_TYPE&&(Dn(Qe.request.startTime+Qe.request.duration/2),jt({},!1)))}(Ct)}function bt(){Dn(Ce.getTime()),Zn().startScheduleTimer()}function en(Ct){var Qe=Ct.currentTrackInfo;if(Qe){var Vt=ee.find(function(qe){return qe.index===Qe.index&&qe.lang===Qe.lang});Vt&&bn(Vt).then(function(){H.setIsBufferingCompleted(!1),Dn(Ce.getTime()),re.setInitSegmentRequired(!0),re.startScheduleTimer()})}}function Zt(Ct){Dn(Ct.quotaExceededTime),re.clearScheduleTimer()}function mn(){return H?H.getBuffer():null}function bn(Ct){Ct===W||Ct&&W&&Ct.type!==W.type||(W=Ct);var Qe=le.getRealAdaptation(Se,W),Vt=le.getVoRepresentations(W);if(he){var qe,Je=he.getData(),Ot=De.getMaxAllowedIndexFor(Le,Se.id),yn=De.getMinAllowedIndexFor(Le,Se.id),Cn=null;return Je!==null&&Je.id===Qe.id||Le===E.Z.TEXT?qe=De.getQualityFor(Le,Se.id):(Cn=De.getThroughputHistory().getAverageThroughput(Le,V)||De.getInitialBitrateFor(Le,Se.id),qe=De.getQualityForBitrate(W,Cn,Se.id)),yn!==void 0&&qe<yn&&(qe=yn),qe>Ot&&(qe=Ot),he.updateData(Qe,Vt,Le,W.isFragmented,qe)}return Promise.resolve()}function Zn(){return re}function Fn(Ct){var Qe;return Ct!==void 0?((0,ge.SE)(Ct),Qe=he?he.getRepresentationForQuality(Ct):null):Qe=he?he.getCurrentRepresentation():null,le.convertRepresentationToRepresentationInfo(Qe)}function qn(){return!!H&&H.getIsBufferingCompleted()}function Yn(Ct){if(Me.get().streaming.enableManifestTimescaleMismatchFix){var Qe=Ct.chunk,Vt=Qe.bytes,qe=Fn(Qe.quality),Je=he&&qe?he.getRepresentationForQuality(qe.quality):null;qe&&Je&&(Je.timescale=ze.getMediaTimescaleFromMoov(Vt))}}function Jt(Ct){var Qe=Ct.chunk,Vt=Qe.bytes,qe=Qe.quality,Je=Fn(qe),Ot=he&&Je?he.getRepresentationForQuality(Je.quality):null;if(Je&&Ot){var yn;if(Me.get().streaming.parseInbandPrft&&Ct.request.type===at.w.MEDIA_SEGMENT_TYPE){var Cn=function(Lo,zi){var Cs=Lo.getBoxes("prft"),al=[];return Cs.forEach(function(la){al.push(function(ko,Rs){var To="unknown";switch(ko.flags){case 0:To=y.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:To=y.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:To=y.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var Xa=1e3*ko.ntp_timestamp_sec+ko.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:To,ntpTimestamp:Xa=Et(je).getInstance().ntpToUTC(Xa),mediaTime:ko.media_time/Rs}}(la,zi))}),al}(yn=yn||ze.parse(Vt),Ot.timescale);Cn&&Cn.length&&Ke.trigger(_.Z.INBAND_PRFT,{data:Cn},{streamId:Se.id,mediaType:Le})}var yr=le.getEventsFor(Je.mediaInfo,null,Se),oi=le.getEventsFor(Je,Ot,Se);if(yr&&yr.length>0||oi&&oi.length>0){var gi=te.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,quality:qe,index:Qe.index})[0],Xr=function(Lo,zi,Cs,al){try{for(var la={},ko=[],Rs=Cs.concat(al),To=0,Xa=Rs.length;To<Xa;To++)la[Rs[To].schemeIdUri+"/"+Rs[To].value]=Rs[To];var Ru=Lo.getBoxes("emsg");if(!Ru||Ru.length===0)return ko;for(var ca=Lo.getBox("sidx"),ql=!ca||isNaN(ca.earliest_presentation_time)||isNaN(ca.timescale)?zi&&!isNaN(zi.mediaStartTime)?zi.mediaStartTime:0:ca.earliest_presentation_time/ca.timescale,Qf=Math.max(ql,0),xu=he.getCurrentRepresentation(),ji=0,Na=Ru.length;ji<Na;ji++){var Js=le.getEvent(Ru[ji],la,Qf,xu);Js&&ko.push(Js)}return ko}catch(xt){return[]}}(yn=yn||ze.parse(Vt),gi,yr,oi);Ke.trigger(T.Z.INBAND_EVENTS,{events:Xr},{streamId:Se.id})}}}function Nn(){var Ct=Ce.getTime();Me.get().streaming.buffer.flushBufferAtTrackSwitch&&Ce.seek(Ct+.001,!1,!0),Dn(Ct),H.setSeekTarget(Ct),re.startScheduleTimer()}function Pn(){var Ct=Ce.getTime(),Qe=H.getContinuousBufferTimeForTargetTime(Ct);Dn(isNaN(Qe)?Ct:Qe),re.startScheduleTimer()}function On(Ct){Ct&&!isNaN(Ct.time)&&(Dn(Ct.time),H.setSeekTarget(Ct.time))}function Dn(Ct){Ve=Ct,we=!0}return O={initialize:function(Ct,Qe,Vt){ve=(0,ht.Z)(je).create({events:T.Z,eventBus:Ke,streamInfo:Se,timelineConverter:q,dashConstants:y.Z,segmentBaseController:F.segmentBaseController,type:Le}),_e=(0,de.Z)(je).create({streamInfo:Se,type:Le,timelineConverter:q,dashMetrics:me,mediaPlayerModel:ue,baseURLController:F.baseURLController,errHandler:Ae,segmentsController:ve,settings:Me,boxParser:ze,events:T.Z,eventBus:Ke,errors:Ie,debug:(0,M.Z)(je).getInstance(),requestModifier:(0,He.Z)(je).getInstance(),dashConstants:y.Z,constants:E.Z,urlUtils:(0,Tt.Z)(je).getInstance()}),V=Se.manifestInfo.isDynamic,_e.initialize(V),De.registerStreamType(Le,O),he=K(je).create({streamInfo:Se,type:Le,abrController:De,dashMetrics:me,playbackController:Ce,timelineConverter:q,dashConstants:y.Z,events:T.Z,eventBus:Ke,errors:Ie,isDynamic:V,adapter:le,segmentsController:ve}),H=function(qe,Je){return qe?qe!==E.Z.TEXT||Je?St(je).create({streamInfo:Se,type:qe,mediaPlayerModel:ue,manifestModel:ae,fragmentModel:te,errHandler:Ae,mediaController:Be,representationController:he,adapter:le,textController:xe,abrController:De,playbackController:Ce,settings:Me}):ne(je).create({streamInfo:Se,type:qe,mimeType:Ze,fragmentModel:te,textController:xe,errHandler:Ae,settings:Me}):(Ae.error(new ce.Z(Ie.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ie.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(Le,Vt),H&&H.initialize(Ct),(re=L(je).create({streamInfo:Se,type:Le,mimeType:Ze,adapter:le,dashMetrics:me,mediaPlayerModel:ue,fragmentModel:te,abrController:De,playbackController:Ce,textController:xe,mediaController:Be,bufferController:H,representationController:he,settings:Me})).initialize(Qe),Ve=0,we=!1,Te=!1},getStreamId:lt,getType:vt,isUpdating:function(){return!!he&&he.isUpdating()},getBufferController:function(){return H},dischargePreBuffer:function(){H.dischargePreBuffer()},getFragmentModel:function(){return te},getScheduleController:Zn,getRepresentationController:function(){return he},getRepresentationInfo:Fn,getBufferLevel:function(){return H?H.getBufferLevel():0},isBufferingCompleted:qn,createBufferSinks:function(Ct){var Qe=mn();return Qe?Promise.resolve(Qe):H?H.createBufferSink(W,Ct):Promise.resolve(null)},updateStreamInfo:function(Ct){return Se=Ct,qn()?Promise.resolve():H.updateAppendWindow()},getStreamInfo:function(){return Se},selectMediaInfo:bn,clearMediaInfoArray:function(){ee=[]},addMediaInfo:function(Ct){ee.indexOf(Ct)===-1&&ee.push(Ct)},prepareTrackSwitch:function(){return new Promise(function(Ct){j.debug("Preparing track switch for type ".concat(Le));var Qe=Le===E.Z.TEXT||Me.get().streaming.trackSwitchMode[Le]===E.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&Ce.getTimeToStreamEnd(Se)>Me.get().streaming.buffer.stallThreshold;if(H.getIsBufferingCompleted()&&!Qe)return H.prepareForNonReplacementTrackSwitch(W.codec).then(function(){Ke.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:Se.id,mediaType:Le})}).catch(function(){Ke.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:Se.id,mediaType:Le})}),void Ct();re.clearScheduleTimer(),re.setSwitchTrack(!0),Qe?(Ke.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:Se.id},{mediaType:Le,streamId:Se.id}),te.abortRequests(),H.prepareForReplacementTrackSwitch(W.codec).then(function(){var Vt=Fn();return H.updateBufferTimestampOffset(Vt)}).then(function(){Nn(),Ct()}).catch(function(){Nn(),Ct()})):H.prepareForNonReplacementTrackSwitch(W.codec).then(function(){Pn(),Ct()}).catch(function(){Pn(),Ct()})})},prepareQualityChange:function(Ct){Pe&&j.warn("Canceling queued representation switch to ".concat(Pe.quality," for ").concat(Le)),j.debug("Preparing quality switch for type ".concat(Le));var Qe=Ct.newQuality;ie=!0,re.clearScheduleTimer(),he.prepareQualityChange(Qe);var Vt=Fn(Qe);Ct.reason&&Ct.reason.forceReplace?function(qe){te.abortRequests(),Ke.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:Se.id},{mediaType:Le,streamId:Se.id}),re.setCheckPlaybackQuality(!1),H.prepareForForceReplacementQualitySwitch(qe).then(function(){Nn(),Pe=null,ie=!1}).catch(function(){Nn(),Pe=null,ie=!1})}(Vt):Ct&&Ct.reason&&Ct.reason.forceAbandon?function(qe){H.updateBufferTimestampOffset(qe).then(function(){te.abortRequests(),Te=!0,re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1,Pe=null}).catch(function(){Pe=null,ie=!1})}(Vt):Me.get().streaming.buffer.fastSwitchEnabled?function(qe){var Je=Ce.getTime(),Ot=1.5*(isNaN(qe.fragmentDuration)?1:qe.fragmentDuration),yn=te.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Je+Ot,threshold:0})[0];if(yn&&!pt()){var Cn=H.getBufferLevel(),yr=De.getAbandonmentStateFor(Se.id,Le);yn.quality<qe.quality&&Cn>=Ot&&yr!==P.Z.ABANDON_LOAD?H.updateBufferTimestampOffset(qe).then(function(){te.abortRequests(),Dn(Je+Ot),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1}).catch(function(){ie=!1}):kn(qe)}else kn(qe)}(Vt):kn(Vt),me.pushPlayListTraceMetrics(new Date,tt.REPRESENTATION_SWITCH_STOP_REASON),me.createPlaylistTraceMetrics(Vt.id,1e3*Ce.getTime(),Ce.getPlaybackRate())},getMediaInfo:function(){return W},getMediaSource:function(){return H.getMediaSource()},setMediaSource:function(Ct){return H.setMediaSource(Ct,W)},getBuffer:mn,setExplicitBufferingTime:Dn,finalisePlayList:function(Ct,Qe){me.pushPlayListTraceMetrics(Ct,Qe)},probeNextRequest:function(){var Ct=Fn(),Qe=he&&Ct?he.getRepresentationForQuality(Ct.quality):null;return _e.getNextSegmentRequestIdempotent(W,Qe)},prepareInnerPeriodPlaybackSeeking:function(Ct){return new Promise(function(Qe){if(H.hasBufferAtTime(Ct.seekTime))return H.pruneBuffer(),Gt(H.getContinuousBufferTimeForTargetTime(Ct.seekTime))&&H.setIsBufferingCompleted(!0),void Qe();re.clearScheduleTimer(),te.abortRequests(),H.prepareForPlaybackSeek().then(function(){var Vt=H.getAllRangesWithSafetyFactor(Ct.seekTime);return H.clearBuffers(Vt)}).then(function(){var Vt=H.getContinuousBufferTimeForTargetTime(Ct.seekTime);if(Gt(Vt))H.setIsBufferingCompleted(!0),Qe();else{var qe=isNaN(Vt)?Ct.seekTime:Vt;Dn(qe),H.setSeekTarget(qe);var Je=[];Je.push(H.updateAppendWindow());var Ot=Fn();Je.push(H.updateBufferTimestampOffset(Ot)),Promise.all(Je).then(function(){re.setInitSegmentRequired(!0),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),Qe()})}}).catch(function(Vt){j.error(Vt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(Ct,Qe){try{re.clearScheduleTimer(),te.abortRequests(),H.prepareForPlaybackSeek().then(function(){return H.pruneAllSafely()}).then(function(){Ct()})}catch(Vt){Qe(Vt)}})},reset:function(Ct,Qe){_e&&_e.reset(),H&&(H.reset(Ct,Qe),H=null),re&&(re.reset(),re=null),he&&(he.reset(),he=null),ve&&(ve=null),De&&De.unRegisterStreamType(lt(),Le),Ke.off(T.Z.DATA_UPDATE_COMPLETED,Dt,O),Ke.off(T.Z.INIT_FRAGMENT_NEEDED,Bt,O),Ke.off(T.Z.MEDIA_FRAGMENT_NEEDED,jt,O),Ke.off(T.Z.INIT_FRAGMENT_LOADED,Yn,O),Ke.off(T.Z.MEDIA_FRAGMENT_LOADED,Jt,O),Ke.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,un,O),Ke.off(T.Z.BUFFER_CLEARED,an,O),Ke.off(T.Z.SEEK_TARGET,On,O),Ke.off(T.Z.FRAGMENT_LOADING_ABANDONED,mr,O),Ke.off(T.Z.FRAGMENT_LOADING_COMPLETED,vr,O),Ke.off(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,bt,O),Ke.off(T.Z.SET_NON_FRAGMENTED_TEXT,en,O),Ke.off(T.Z.QUOTA_EXCEEDED,Zt,O),Ke.off(T.Z.SOURCE_BUFFER_ERROR,Qt,O),Ke.off(T.Z.BYTES_APPENDED_END_FRAGMENT,Bn,O),qt(),Le=null,Se=null}},j=(0,M.Z)(je).getInstance().getLogger(O),qt(),Ke.on(T.Z.DATA_UPDATE_COMPLETED,Dt,O,{priority:m.Z.EVENT_PRIORITY_HIGH}),Ke.on(T.Z.INIT_FRAGMENT_NEEDED,Bt,O),Ke.on(T.Z.MEDIA_FRAGMENT_NEEDED,jt,O),Ke.on(T.Z.INIT_FRAGMENT_LOADED,Yn,O),Ke.on(T.Z.MEDIA_FRAGMENT_LOADED,Jt,O),Ke.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,un,O),Ke.on(T.Z.BUFFER_CLEARED,an,O),Ke.on(T.Z.SEEK_TARGET,On,O),Ke.on(T.Z.FRAGMENT_LOADING_ABANDONED,mr,O),Ke.on(T.Z.FRAGMENT_LOADING_COMPLETED,vr,O),Ke.on(T.Z.QUOTA_EXCEEDED,Zt,O),Ke.on(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,bt,O),Ke.on(T.Z.SET_NON_FRAGMENTED_TEXT,en,O),Ke.on(T.Z.SOURCE_BUFFER_ERROR,Qt,O),Ke.on(T.Z.BYTES_APPENDED_END_FRAGMENT,Bn,O),O}Mt.__dashjs_factory_name="StreamProcessor";var _n=U.Z.getClassFactory(Mt),nn=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},cn=w(9032);function Ft(F,O){if(F){if(typeof F=="string")return Gn(F,O);var j=Object.prototype.toString.call(F).slice(8,-1);return j==="Object"&&F.constructor&&(j=F.constructor.name),j==="Map"||j==="Set"?Array.from(F):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?Gn(F,O):void 0}}function Gn(F,O){(O==null||O>F.length)&&(O=F.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=F[j];return V}function Sr(F){F=F||{};var O,j,V=this.context,W=F.requestModifier,ee=F.lowLatencyThroughputModel,H=F.boxParser,re=(0,Ge.Z)(V).getInstance();function he(ie){var _e,ve=new Date,Ve=ie.request,Pe=new Headers;if(Ve.range&&Pe.append("Range","bytes="+Ve.range),ie.headers)for(var je in ie.headers){var Ke=ie.headers[je];Ke&&Pe.append(je,Ke)}Ve.requestStartDate||(Ve.requestStartDate=ve),W&&W.modifyRequestHeader&&W.modifyRequestHeader({setRequestHeader:function(q,le){Pe.append(q,le)}},{url:ie.url}),typeof window.AbortController=="function"&&(_e=new AbortController,ie.abortController=_e,_e.signal.onabort=ie.onabort);var Se={method:ie.method,headers:Pe,credentials:ie.withCredentials?"include":void 0,signal:_e?_e.signal:void 0},Le=re.get().streaming.abr.fetchThroughputCalculationMode,Ae=Date.now(),Ze=0;new Promise(function(q){if(Le===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&ee&&(Ze=ee.getThroughputCapacityDelayMS(Ve,1e3*j.getCurrentBufferLevel(Ve.mediaType))))return setTimeout(q,Ze);q()}).then(function(){var q=Date.now();fetch(ie.url,Se).then(function(le){ie.response||(ie.response={}),ie.response.status=le.status,ie.response.statusText=le.statusText,ie.response.responseURL=le.url,le.ok||ie.onerror();var ae,ue="",te=function(Dt,un){var an;if(typeof Symbol>"u"||Dt[Symbol.iterator]==null){if(Array.isArray(Dt)||(an=Ft(Dt))){an&&(Dt=an);var Qt=0,Bn=function(){};return{s:Bn,n:function(){return Qt>=Dt.length?{done:!0}:{done:!1,value:Dt[Qt++]}},e:function(bt){throw bt},f:Bn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var kn,mr=!0,vr=!1;return{s:function(){an=Dt[Symbol.iterator]()},n:function(){var bt=an.next();return mr=bt.done,bt},e:function(bt){vr=!0,kn=bt},f:function(){try{mr||an.return==null||an.return()}finally{if(vr)throw kn}}}}(le.headers.keys());try{for(te.s();!(ae=te.n()).done;){var De=ae.value;ue+=De+": "+le.headers.get(De)+"\r\n"}}catch(Dt){te.e(Dt)}finally{te.f()}if(ie.response.responseHeaders=ue,!le.body)return le.arrayBuffer().then(function(Dt){ie.response.response=Dt;var un={loaded:Dt.byteLength,total:Dt.byteLength,stream:!1};ie.progress(un),ie.onload(),ie.onend()});var Ce,Be,xe,me,Me=parseInt(le.headers.get("Content-Length"),10),ze=0,mt=!1,lt=new Uint8Array,vt=0;if(Le===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&ee){var pt=q,qt=0,Gt=(xe=le.body.tee(),me=2,function(Dt){if(Array.isArray(Dt))return Dt}(xe)||function(Dt,un){if(typeof Symbol<"u"&&Symbol.iterator in Object(Dt)){var an=[],Qt=!0,Bn=!1,kn=void 0;try{for(var mr,vr=Dt[Symbol.iterator]();!(Qt=(mr=vr.next()).done)&&(an.push(mr.value),!un||an.length!==un);Qt=!0);}catch(bt){Bn=!0,kn=bt}finally{try{Qt||vr.return==null||vr.return()}finally{if(Bn)throw kn}}return an}}(xe,me)||Ft(xe,me)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),Bt=Gt[0],jt=Gt[1];Ce=Bt.getReader(),Be=[],Ce.read().then(function Dt(un){var an=un.value,Qt=un.done;if(qt=Date.now(),an&&an.length){var Bn=qt-pt,kn=an.length;Be.push({chunkDownloadTimeRelativeMS:qt-q,chunkDownloadDurationMS:Bn,chunkBytes:kn,kbps:Math.round(8*kn/(Bn/1e3)),bufferLevel:j.getCurrentBufferLevel(Ve.mediaType)})}if(Qt){var mr=qt-q,vr=Be.reduce(function(bt,en){return bt+en.chunkBytes},0);return ee.addMeasurement(Ve,mr,Be,Ae,Ze,ue),void ie.progress({loaded:vr,total:vr,lengthComputable:!0,time:ee.getEstimatedDownloadDurationMS(Ve),stream:!0})}return pt=Date.now(),Ce.read().then(Dt)}),ie.reader=jt.getReader()}else ie.reader=le.body.getReader();var xn=[],it=[],_t=[],Xt=!0;we(ie,function Dt(un){var an=un.value;if(un.done){if(lt){if(Le!==E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Qt=null,Bn=null;Le===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Qt=function(bt,en){try{var Zt,mn;Zt=bt.filter(function(Nn,Pn){return Pn<bt.length-1}),mn=en.filter(function(Nn,Pn){return Pn<en.length-1});var bn=[];if(Zt.length>1){for(var Zn=0,Fn=0,qn=0;qn<Zt.length;qn++)if(Zt[qn]&&mn[qn]){var Yn=mn[qn].ts-Zt[qn].ts;if(Yn>1)bn.push(8*mn[qn].bytes/Yn),Fn=0;else{Fn===0&&(Fn=Zt[qn].ts,Zn=0);var Jt=mn[qn].ts-Fn;Jt>1?(Zn+=mn[qn].bytes,bn.push(8*Zn/Jt),Fn=0):Zn+=mn[qn].bytes}}if(bn.length>0)return bn.reduce(function(Nn,Pn){return Nn+Pn},0)/bn.length}return null}catch(Nn){return null}}(it,_t),Qt&&(Bn=8*ze/Qt)):Le===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Bn=Te(xn,ze)),ie.progress({loaded:ze,total:isNaN(Me)?ze:Me,lengthComputable:!0,time:Bn,stream:!0})}ie.response.response=lt.buffer}return ie.onload(),void ie.onend()}if(an&&an.length>0){lt=function(bt,en){if(bt.length===0)return en;var Zt=new Uint8Array(bt.length+en.length);return Zt.set(bt),Zt.set(en,bt.length),Zt}(lt,an),ze+=an.length,xn.push({ts:Date.now(),bytes:an.length}),Le===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&Xt&&H.findLastTopIsoBoxCompleted(["moof"],lt,vt).found&&(Xt=!1,it.push({ts:performance.now(),bytes:an.length}));var kn=H.findLastTopIsoBoxCompleted(["moov","mdat"],lt,vt);if(kn.found){var mr,vr=kn.lastCompletedOffset+kn.size;Le!==E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||Xt||(Xt=!0,_t.push({ts:performance.now(),bytes:lt.length})),vr===lt.length?(mr=lt,lt=new Uint8Array):(mr=new Uint8Array(lt.subarray(0,vr)),lt=lt.subarray(vr)),ie.progress({data:mr.buffer,lengthComputable:!1,noTrace:!0}),vt=0}else vt=kn.lastCompletedOffset,mt||(ie.progress({lengthComputable:!1,noTrace:!0}),mt=!0)}we(ie,Dt)})}).catch(function(le){ie.onerror&&ie.onerror(le)})})}function we(ie,_e){ie.reader.read().then(_e).catch(function(ve){ie.onerror&&ie.response.status===200&&ie.onerror(ve)})}function Te(ie,_e){try{if((ie=ie.filter(function(Pe){return Pe.bytes>_e/4/ie.length})).length>1){var ve=0,Ve=(ie[ie.length-1].ts-ie[0].ts)/ie.length;return ie.forEach(function(Pe,je){var Ke=ie[je+1];if(Ke){var Se=Ke.ts-Pe.ts;ve+=Se<Ve?Se:0}}),ve}return null}catch(Pe){return null}}return O={load:function(ie){W&&W.modifyRequest?(0,He.k)(ie,W).then(function(){return he(ie)}):he(ie)},abort:function(ie){if(ie.abortController)ie.abortController.abort();else if(ie.reader)try{ie.reader.cancel(),ie.onabort()}catch(_e){}},calculateDownloadedTime:Te,setup:function(ie){j=ie.dashMetrics}},O}Sr.__dashjs_factory_name="FetchLoader";var qr=U.Z.getClassFactory(Sr),gr=w(1180);function fi(F,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(F,V.key,V)}}var ao=function(){function F(){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,F),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var O,j;return O=F,(j=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==y.Z.BASE_URL&&this.segmentInfoType!==y.Z.SEGMENT_BASE&&!this.indexRange}}])&&fi(O.prototype,j),F}(),Gr=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.period=null,this.index=-1,this.type=null},so=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};so.DEFAULT_ID="defaultId";var xi=so,Fi=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},no=w(2610),uo=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},Ni=function F(O,j,V,W){(function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")})(this,F),this.url=O||"",this.serviceLocation=j||O||"",this.dvbPriority=V||1,this.dvbWeight=W||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};Ni.DEFAULT_DVB_PRIORITY=1,Ni.DEFAULT_DVB_WEIGHT=1;var nr=Ni,Zu=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},ln=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},gn=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function pn(F,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(F,V.key,V)}}var wt=function(){function F(){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,F),this.schemeIdUri=null,this.value=null,this.id=null}var O,j;return O=F,(j=[{key:"init",value:function(V){return V&&(this.schemeIdUri=V.schemeIdUri?V.schemeIdUri:null,this.value=V.value?V.value:null,this.id=V.id?V.id:null,V[y.Z.DVB_URL]&&(this.dvbUrl=V[y.Z.DVB_URL]),V[y.Z.DVB_MIMETYPE]&&(this.dvbMimeType=V[y.Z.DVB_MIMETYPE]),V[y.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=V[y.Z.DVB_FONTFAMILY])),this}}])&&pn(O.prototype,j),F}(),$t=w(3101),Pt=w.n($t);function Kt(){return{areEqual:function(F,O){return Pt()(F,O)}}}Kt.__dashjs_factory_name="ObjectUtils";var wn=U.Z.getSingletonFactory(Kt),Mn=w(7803),zn=function F(O,j){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,F),this.url=O||"",this.serviceLocation=j||null,this.queryParams={}},Kn=function F(O,j,V){(function(W,ee){if(!(W instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,F),this.url=O||"",this.serviceLocation=j||null,this.ttl=V||NaN,this.queryParams={}};function Ln(F,O){var j=Object.keys(F);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(F);O&&(V=V.filter(function(W){return Object.getOwnPropertyDescriptor(F,W).enumerable})),j.push.apply(j,V)}return j}function fn(F){for(var O=1;O<arguments.length;O++){var j=arguments[O]!=null?arguments[O]:{};O%2?Ln(Object(j),!0).forEach(function(V){Ye(F,V,j[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(j)):Ln(Object(j)).forEach(function(V){Object.defineProperty(F,V,Object.getOwnPropertyDescriptor(j,V))})}return F}function Ye(F,O,j){return O in F?Object.defineProperty(F,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):F[O]=j,F}function Un(F,O){var j;if(typeof Symbol>"u"||F[Symbol.iterator]==null){if(Array.isArray(F)||(j=fr(F))||O){j&&(F=j);var V=0,W=function(){};return{s:W,n:function(){return V>=F.length?{done:!0}:{done:!1,value:F[V++]}},e:function(he){throw he},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ee,H=!0,re=!1;return{s:function(){j=F[Symbol.iterator]()},n:function(){var he=j.next();return H=he.done,he},e:function(he){re=!0,ee=he},f:function(){try{H||j.return==null||j.return()}finally{if(re)throw ee}}}}function fr(F,O){if(F){if(typeof F=="string")return Ir(F,O);var j=Object.prototype.toString.call(F).slice(8,-1);return j==="Object"&&F.constructor&&(j=F.constructor.name),j==="Map"||j==="Set"?Array.from(F):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?Ir(F,O):void 0}}function Ir(F,O){(O==null||O>F.length)&&(O=F.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=F[j];return V}function Hr(){var F,O,j,V,W=this.context,ee=(0,Tt.Z)(W).getInstance(),H=Number.isInteger||function(q){return typeof q=="number"&&isFinite(q)&&Math.floor(q)===q};function re(q,le){if(!q)throw new Error("adaptation is not defined");if(!le)throw new Error("type is not defined");if(q.Representation_asArray&&q.Representation_asArray.length){var ae=je(q.Representation_asArray[0]);if(ae&&ae.length>0&&Mn.Y.indexOf(ae[0].schemeIdUri)>=0)return le===E.Z.IMAGE}if(q.ContentComponent_asArray&&q.ContentComponent_asArray.length>0){if(q.ContentComponent_asArray.length>1)return le===E.Z.MUXED;if(q.ContentComponent_asArray[0].contentType===le)return!0}var ue=le===E.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(le);if(q.Representation_asArray&&q.Representation_asArray.length){var te=q.Representation_asArray[0].codecs;if(ue.test(te))return!0}if(q.hasOwnProperty(y.Z.MIME_TYPE))return ue.test(q.mimeType);if(q.Representation_asArray){for(var De,Ce=0;Ce<q.Representation_asArray.length;Ce++)if((De=q.Representation_asArray[Ce]).hasOwnProperty(y.Z.MIME_TYPE))return ue.test(De.mimeType)}return!1}function he(q){if(!q)throw new Error("adaptation is not defined");if(q.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)||q.hasOwnProperty(y.Z.SEGMENT_TIMELINE)||q.hasOwnProperty(y.Z.SEGMENT_LIST)||q.hasOwnProperty(y.Z.SEGMENT_BASE))return!0;if(q.Representation_asArray&&q.Representation_asArray.length>0){var le=q.Representation_asArray[0];if(le.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)||le.hasOwnProperty(y.Z.SEGMENT_TIMELINE)||le.hasOwnProperty(y.Z.SEGMENT_LIST)||le.hasOwnProperty(y.Z.SEGMENT_BASE))return!0}return!1}function we(q){return re(q,E.Z.VIDEO)}function Te(q){return re(q,E.Z.TEXT)}function ie(q){return re(q,E.Z.IMAGE)}function _e(q){return q&&Array.isArray(q.Representation_asArray)&&q.Representation_asArray.sort(function(le,ae){return le.bandwidth-ae.bandwidth}),q}function ve(q,le){return q&&q.Period_asArray&&H(le)&&q.Period_asArray[le]?q.Period_asArray[le].AdaptationSet_asArray:[]}function Ve(q){return q&&q.Period_asArray?q.Period_asArray:[]}function Pe(q){var le=!1;return q&&q.hasOwnProperty("type")&&(le=q.type===y.Z.DYNAMIC),le}function je(q){return q&&q.EssentialProperty_asArray&&q.EssentialProperty_asArray.length?q.EssentialProperty_asArray.map(function(le){return{schemeIdUri:le.schemeIdUri,value:le.value}}):null}function Ke(q){if(!q||!q.S_asArray)return NaN;var le=q.S_asArray[0],ae=q.S_asArray[1];return le.hasOwnProperty("d")?le.d:ae.t-le.t}function Se(q,le){if(!q)throw new Error("Period cannot be null or undefined");var ae=xi.DEFAULT_ID+"_"+le;return q.hasOwnProperty(y.Z.ID)&&q.id.length>0&&q.id!=="__proto__"&&(ae=q.id),ae}function Le(q,le,ae){var ue,te=[];if(!q)return te;for(ue=0;ue<q.length;ue++){var De=new Zu;if(De.timescale=1,De.representation=le,!q[ue].hasOwnProperty(E.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");De.schemeIdUri=q[ue].schemeIdUri,q[ue].hasOwnProperty(y.Z.TIMESCALE)&&(De.timescale=q[ue].timescale),q[ue].hasOwnProperty(y.Z.VALUE)&&(De.value=q[ue].value),te.push(De),De.period=ae}return te}function Ae(q){var le=[],ae=q.BaseURL_asArray||[q.baseUri],ue=!1;return ae.some(function(te){if(te){var De=new nr,Ce=te.__text||te;return ee.isRelative(Ce)&&(ue=!0,q.baseUri&&(Ce=ee.resolve(Ce,q.baseUri))),De.url=Ce,te.hasOwnProperty(y.Z.SERVICE_LOCATION)&&te.serviceLocation.length?De.serviceLocation=te.serviceLocation:De.serviceLocation=Ce,te.hasOwnProperty(y.Z.DVB_PRIORITY)&&(De.dvbPriority=te[y.Z.DVB_PRIORITY]),te.hasOwnProperty(y.Z.DVB_WEIGHT)&&(De.dvbWeight=te[y.Z.DVB_WEIGHT]),te.hasOwnProperty(y.Z.AVAILABILITY_TIME_OFFSET)&&(De.availabilityTimeOffset=te[y.Z.AVAILABILITY_TIME_OFFSET]),te.hasOwnProperty(y.Z.AVAILABILITY_TIME_COMPLETE)&&(De.availabilityTimeComplete=te[y.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),le.push(De),ue}}),le}function Ze(q){var le=new gn;return le.serverUrl=q.__text,q.hasOwnProperty(y.Z.DEFAULT_SERVICE_LOCATION)&&(le.defaultServiceLocation=q[y.Z.DEFAULT_SERVICE_LOCATION],le.defaultServiceLocationArray=le.defaultServiceLocation.split(" ")),q.hasOwnProperty(y.Z.QUERY_BEFORE_START)&&(le.queryBeforeStart=q[y.Z.QUERY_BEFORE_START].toLowerCase()==="true"),q.hasOwnProperty(y.Z.CLIENT_REQUIREMENT)&&(le.clientRequirement=q[y.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),le}return F={getIsTypeOf:re,getIsText:Te,getIsFragmented:he,getProducerReferenceTimesForAdaptation:function(q){var le=q&&q.hasOwnProperty(y.Z.PRODUCERREFERENCETIME_ASARRAY)?q[y.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(q&&q.hasOwnProperty(y.Z.REPRESENTATION_ASARRAY)?q[y.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(ue){var te;ue.hasOwnProperty(y.Z.PRODUCERREFERENCETIME_ASARRAY)&&le.push.apply(le,function(De){if(Array.isArray(De))return Ir(De)}(te=ue[y.Z.PRODUCERREFERENCETIME_ASARRAY])||function(De){if(typeof Symbol<"u"&&Symbol.iterator in Object(De))return Array.from(De)}(te)||fr(te)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var ae=[];return le.forEach(function(ue){var te=new ln;ue.hasOwnProperty(y.Z.ID)&&(te[y.Z.ID]=ue[y.Z.ID],ue.hasOwnProperty(y.Z.WALL_CLOCK_TIME)&&(te[y.Z.WALL_CLOCK_TIME]=ue[y.Z.WALL_CLOCK_TIME],ue.hasOwnProperty(y.Z.PRESENTATION_TIME)&&(te[y.Z.PRESENTATION_TIME]=ue[y.Z.PRESENTATION_TIME],ue.hasOwnProperty(y.Z.INBAND)&&(te[y.Z.INBAND]=ue[y.Z.INBAND]!=="false"),ue.hasOwnProperty(y.Z.TYPE)&&(te[y.Z.TYPE]=ue[y.Z.TYPE]),ae.push(te))))}),ae},getLanguageForAdaptation:function(q){var le="";return q&&q.hasOwnProperty(y.Z.LANG)&&(le=q.lang),le},getViewpointForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.VIEWPOINT_ASARRAY)&&q[y.Z.VIEWPOINT_ASARRAY].length?q[y.Z.VIEWPOINT_ASARRAY].map(function(le){return new wt().init(le)}):[]},getRolesForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.ROLE_ASARRAY)&&q[y.Z.ROLE_ASARRAY].length?q[y.Z.ROLE_ASARRAY].map(function(le){return new wt().init(le)}):[]},getAccessibilityForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.ACCESSIBILITY_ASARRAY)&&q[y.Z.ACCESSIBILITY_ASARRAY].length?q[y.Z.ACCESSIBILITY_ASARRAY].map(function(le){return new wt().init(le)}):[]},getAudioChannelConfigurationForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&q[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?q[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new wt().init(le)}):[]},getAudioChannelConfigurationForRepresentation:function(q){return q&&q.hasOwnProperty(y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&q[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?q[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new wt().init(le)}):[]},getAdaptationForIndex:function(q,le,ae){var ue=ve(le,ae);return ue.length>0&&H(q)?ue[q]:null},getIndexForAdaptation:function(q,le,ae){if(!q)return-1;for(var ue=ve(le,ae),te=0;te<ue.length;te++)if(wn(W).getInstance().areEqual(ue[te],q))return te;return-1},getAdaptationForId:function(q,le,ae){var ue,te,De=ve(le,ae);for(ue=0,te=De.length;ue<te;ue++)if(De[ue].hasOwnProperty(y.Z.ID)&&De[ue].id===q)return De[ue];return null},getAdaptationsForType:function(q,le,ae){var ue,te,De=ve(q,le),Ce=[];for(ue=0,te=De.length;ue<te;ue++)re(De[ue],ae)&&Ce.push(_e(De[ue]));return Ce},getRealPeriods:Ve,getRealPeriodForIndex:function(q,le){var ae=Ve(le);return ae.length>0&&H(q)?ae[q]:null},getCodec:function(q,le,ae){var ue=null;if(q&&q.Representation_asArray&&q.Representation_asArray.length>0){var te=H(le)&&le>=0&&le<q.Representation_asArray.length?q.Representation_asArray[le]:q.Representation_asArray[0];te&&(ue=te.mimeType+';codecs="'+te.codecs+'"',ae&&te.width!==void 0&&(ue+=';width="'+te.width+'";height="'+te.height+'"'))}return ue&&(ue=ue.replace(/\sprofiles=[^;]*/g,"")),ue},getSelectionPriority:function(q){try{var le=q&&q.selectionPriority!==void 0?parseInt(q.selectionPriority):1;return isNaN(le)?1:le}catch(ae){return 1}},getMimeType:function(q){return q&&q.Representation_asArray&&q.Representation_asArray.length>0?q.Representation_asArray[0].mimeType:null},getKID:function(q){return q&&q.hasOwnProperty(y.Z.CENC_DEFAULT_KID)?q[y.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(q){if(!q||!Array.isArray(q.Label_asArray))return[];for(var le=[],ae=0;ae<q.Label_asArray.length;ae++)le.push({lang:q.Label_asArray[ae].lang,text:q.Label_asArray[ae].__text||q.Label_asArray[ae]});return le},getContentProtectionData:function(q){return q&&q.hasOwnProperty(y.Z.CONTENTPROTECTION_ASARRAY)&&q.ContentProtection_asArray.length!==0?q.ContentProtection_asArray:null},getIsDynamic:Pe,getId:function(q){return q&&q[y.Z.ID]||null},hasProfile:function(q,le){var ae=!1;return q&&q.profiles&&q.profiles.length>0&&(ae=q.profiles.indexOf(le)!==-1),ae},getDuration:function(q){return q&&q.hasOwnProperty(y.Z.MEDIA_PRESENTATION_DURATION)?q.mediaPresentationDuration:q&&q.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(q){return q&&q.bandwidth?q.bandwidth:NaN},getManifestUpdatePeriod:function(q){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ae=NaN;return q&&q.hasOwnProperty(y.Z.MINIMUM_UPDATE_PERIOD)&&(ae=q.minimumUpdatePeriod),isNaN(ae)?ae:Math.max(ae-le,1)},getPublishTime:function(q){return q&&q.hasOwnProperty(y.Z.PUBLISH_TIME)?new Date(q[y.Z.PUBLISH_TIME]):null},getRepresentationCount:function(q){return q&&Array.isArray(q.Representation_asArray)?q.Representation_asArray.length:0},getBitrateListForAdaptation:function(q){var le=_e(q);return(le&&Array.isArray(le.Representation_asArray)?le.Representation_asArray:[]).map(function(ae){return{bandwidth:ae.bandwidth,width:ae.width||0,height:ae.height||0,scanType:ae.scanType||null,id:ae.id||null}})},getRepresentationFor:function(q,le){return le&&le.Representation_asArray&&le.Representation_asArray.length>0&&H(q)?le.Representation_asArray[q]:null},getRepresentationsForAdaptation:function(q){var le,ae,ue,te,De=[],Ce=function(lt){if(lt&&lt.period&&H(lt.period.index)){var vt=lt.period.mpd.manifest.Period_asArray[lt.period.index];if(vt&&vt.AdaptationSet_asArray&&H(lt.index))return _e(vt.AdaptationSet_asArray[lt.index])}}(q);if(Ce&&Ce.Representation_asArray){if(q&&q.period&&H(q.period.index)){var Be=Ae(q.period.mpd.manifest);Be&&(ae=Be[0])}for(var xe=0,me=Ce.Representation_asArray.length;xe<me;++xe){var Me=Ce.Representation_asArray[xe],ze=new ao;if(ze.index=xe,ze.adaptation=q,Me.hasOwnProperty(y.Z.ID)&&(ze.id=Me.id),Me.hasOwnProperty(y.Z.CODECS)&&(ze.codecs=Me.codecs),Me.hasOwnProperty(y.Z.MIME_TYPE)&&(ze.mimeType=Me[y.Z.MIME_TYPE]),Me.hasOwnProperty(y.Z.CODEC_PRIVATE_DATA)&&(ze.codecPrivateData=Me.codecPrivateData),Me.hasOwnProperty(y.Z.BANDWITH)&&(ze.bandwidth=Me.bandwidth),Me.hasOwnProperty(y.Z.WIDTH)&&(ze.width=Me.width),Me.hasOwnProperty(y.Z.HEIGHT)&&(ze.height=Me.height),Me.hasOwnProperty(y.Z.SCAN_TYPE)&&(ze.scanType=Me.scanType),Me.hasOwnProperty(y.Z.MAX_PLAYOUT_RATE)&&(ze.maxPlayoutRate=Me.maxPlayoutRate),Me.hasOwnProperty(y.Z.SEGMENT_BASE)?(le=Me.SegmentBase,ze.segmentInfoType=y.Z.SEGMENT_BASE):Me.hasOwnProperty(y.Z.SEGMENT_LIST)?(le=Me.SegmentList).hasOwnProperty(y.Z.SEGMENT_TIMELINE)?ze.segmentInfoType=y.Z.SEGMENT_TIMELINE:ze.segmentInfoType=y.Z.SEGMENT_LIST:Me.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)?((le=Me.SegmentTemplate).hasOwnProperty(y.Z.SEGMENT_TIMELINE)?ze.segmentInfoType=y.Z.SEGMENT_TIMELINE:ze.segmentInfoType=y.Z.SEGMENT_TEMPLATE,le.hasOwnProperty(y.Z.INITIALIZATION_MINUS)&&(ze.initialization=le.initialization.split("$Bandwidth$").join(Me.bandwidth).split("$RepresentationID$").join(Me.id))):ze.segmentInfoType=y.Z.BASE_URL,ze.essentialProperties=je(Me),le){if(le.hasOwnProperty(y.Z.INITIALIZATION)){var mt=le.Initialization;mt.hasOwnProperty(y.Z.SOURCE_URL)&&(ze.initialization=mt.sourceURL),mt.hasOwnProperty(y.Z.RANGE)&&(ze.range=mt.range)}else Te(Ce)&&he(Ce)&&Ce.mimeType&&Ce.mimeType.indexOf("application/mp4")===-1&&(ze.range=0);le.hasOwnProperty(y.Z.TIMESCALE)&&(ze.timescale=le.timescale),le.hasOwnProperty(y.Z.DURATION)?ze.segmentDuration=le.duration/ze.timescale:Me.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)&&(le=Me.SegmentTemplate).hasOwnProperty(y.Z.SEGMENT_TIMELINE)&&(ze.segmentDuration=Ke(le.SegmentTimeline)/ze.timescale),le.hasOwnProperty(y.Z.MEDIA)&&(ze.media=le.media),le.hasOwnProperty(y.Z.START_NUMBER)&&(ze.startNumber=le.startNumber),le.hasOwnProperty(y.Z.INDEX_RANGE)&&(ze.indexRange=le.indexRange),le.hasOwnProperty(y.Z.PRESENTATION_TIME_OFFSET)&&(ze.presentationTimeOffset=le.presentationTimeOffset/ze.timescale),le.hasOwnProperty(y.Z.AVAILABILITY_TIME_OFFSET)?ze.availabilityTimeOffset=le.availabilityTimeOffset:ae&&ae.availabilityTimeOffset!==void 0&&(ze.availabilityTimeOffset=ae.availabilityTimeOffset),le.hasOwnProperty(y.Z.AVAILABILITY_TIME_COMPLETE)?ze.availabilityTimeComplete=le.availabilityTimeComplete!=="false":ae&&ae.availabilityTimeComplete!==void 0&&(ze.availabilityTimeComplete=ae.availabilityTimeComplete)}ze.MSETimeOffset=(te=(ue=ze).presentationTimeOffset,ue.adaptation.period.start-te),ze.path=[q.period.index,q.index,xe],De.push(ze)}}return De},getAdaptationsForPeriod:function(q){var le,ae,ue,te=q&&H(q.index)?q.mpd.manifest.Period_asArray[q.index]:null,De=[];if(te&&te.AdaptationSet_asArray)for(ue=0;ue<te.AdaptationSet_asArray.length;ue++)ae=te.AdaptationSet_asArray[ue],le=new Gr,ae.hasOwnProperty(y.Z.ID)&&(le.id=ae.id),le.index=ue,le.period=q,re(ae,E.Z.MUXED)?le.type=E.Z.MUXED:re(ae,E.Z.AUDIO)?le.type=E.Z.AUDIO:we(ae)?le.type=E.Z.VIDEO:Te(ae)?le.type=E.Z.TEXT:ie(ae)?le.type=E.Z.IMAGE:O.warn("Unknown Adaptation stream type"),De.push(le);return De},getRegularPeriods:function(q){var le,ae,ue=!!q&&Pe(q.manifest),te=[],De=null,Ce=null,Be=null,xe=null;for(ae=0,le=q&&q.manifest&&q.manifest.Period_asArray?q.manifest.Period_asArray.length:0;ae<le;ae++)(Ce=q.manifest.Period_asArray[ae]).hasOwnProperty(y.Z.START)?(xe=new xi).start=Ce.start:De!==null&&De.hasOwnProperty(y.Z.DURATION)&&Be!==null?(xe=new xi).start=parseFloat((Be.start+Be.duration).toFixed(5)):ae!==0||ue||((xe=new xi).start=0),Be!==null&&isNaN(Be.duration)&&(xe!==null?Be.duration=parseFloat((xe.start-Be.start).toFixed(5)):O.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),xe!==null&&(xe.id=Se(Ce,ae),xe.index=ae,xe.mpd=q,Ce.hasOwnProperty(y.Z.DURATION)&&(xe.duration=Ce.duration),Be&&(Be.nextPeriodId=xe.id),te.push(xe),De=Ce,Be=xe),Ce=null,xe=null;return te.length===0||Be!==null&&isNaN(Be.duration)&&(Be.duration=parseFloat((function(me){(function(){if(!j||!j.hasOwnProperty("error"))throw new Error(E.Z.MISSING_CONFIG_ERROR)})();var Me,ze=Pe(me.mpd.manifest);return me.mpd.manifest.mediaPresentationDuration?Me=me.mpd.manifest.mediaPresentationDuration:me.duration?Me=me.duration:ze?Me=Number.POSITIVE_INFINITY:j.error(new ce.Z(Ie.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",me)),Me}(Be)-Be.start).toFixed(5))),te},getMpd:function(q){var le=new Fi;return q&&(le.manifest=q,q.hasOwnProperty(y.Z.AVAILABILITY_START_TIME)?le.availabilityStartTime=new Date(q.availabilityStartTime.getTime()):q.loadedTime&&(le.availabilityStartTime=new Date(q.loadedTime.getTime())),q.hasOwnProperty(y.Z.AVAILABILITY_END_TIME)&&(le.availabilityEndTime=new Date(q.availabilityEndTime.getTime())),q.hasOwnProperty(y.Z.MINIMUM_UPDATE_PERIOD)&&(le.minimumUpdatePeriod=q.minimumUpdatePeriod),q.hasOwnProperty(y.Z.MEDIA_PRESENTATION_DURATION)&&(le.mediaPresentationDuration=q.mediaPresentationDuration),q.hasOwnProperty(y.Z.SUGGESTED_PRESENTATION_DELAY)&&(le.suggestedPresentationDelay=q.suggestedPresentationDelay),q.hasOwnProperty(y.Z.TIMESHIFT_BUFFER_DEPTH)&&(le.timeShiftBufferDepth=q.timeShiftBufferDepth),q.hasOwnProperty(y.Z.MAX_SEGMENT_DURATION)&&(le.maxSegmentDuration=q.maxSegmentDuration),q.hasOwnProperty(y.Z.PUBLISH_TIME)&&(le.publishTime=new Date(q.publishTime))),le},getEventsForPeriod:function(q){var le,ae,ue=q&&q.mpd&&q.mpd.manifest?q.mpd.manifest:null,te=ue?ue.Period_asArray:null,De=te&&q&&H(q.index)?te[q.index].EventStream_asArray:null,Ce=[];if(De)for(le=0;le<De.length;le++){var Be=new Zu;if(Be.period=q,Be.timescale=1,!De[le].hasOwnProperty(E.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(Be.schemeIdUri=De[le][E.Z.SCHEME_ID_URI],De[le].hasOwnProperty(y.Z.TIMESCALE)&&(Be.timescale=De[le][y.Z.TIMESCALE]),De[le].hasOwnProperty(y.Z.VALUE)&&(Be.value=De[le][y.Z.VALUE]),De[le].hasOwnProperty(y.Z.PRESENTATION_TIME_OFFSET)&&(Be.presentationTimeOffset=De[le][y.Z.PRESENTATION_TIME_OFFSET]),ae=0;De[le].Event_asArray&&ae<De[le].Event_asArray.length;ae++){var xe=De[le].Event_asArray[ae],me=new uo;me.presentationTime=0,me.eventStream=Be,xe.hasOwnProperty(y.Z.PRESENTATION_TIME)&&(me.presentationTime=xe.presentationTime);var Me=Be.presentationTimeOffset?Be.presentationTimeOffset/Be.timescale:0;me.calculatedPresentationTime=me.presentationTime/Be.timescale+q.start-Me,xe.hasOwnProperty(y.Z.DURATION)&&(me.duration=xe.duration/Be.timescale),xe.hasOwnProperty(y.Z.ID)?me.id=xe.id:me.id=null,xe.Signal&&xe.Signal.Binary?me.messageData=V.decodeArray(xe.Signal.Binary.toString()):me.messageData=xe.messageData||xe.__cdata||xe.__text,Ce.push(me)}}return Ce},getEssentialPropertiesForAdaptation:function(q){var le={};if(q&&q.hasOwnProperty(y.Z.ESSENTIAL_PROPERTY_ASARRAY)){var ae,ue=Un(q.EssentialProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var te=ae.value;te.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(le[te[E.Z.SCHEME_ID_URI]]=fn({},te))}}catch(De){ue.e(De)}finally{ue.f()}}return le},getEssentialPropertiesAsArrayForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.ESSENTIAL_PROPERTY_ASARRAY)&&q.EssentialProperty_asArray.length?q.EssentialProperty_asArray.map(function(le){return new wt().init(le)}):[]},getEssentialPropertiesForRepresentation:je,getEventStreamForAdaptationSet:function(q,le,ae){var ue,te,De;return q&&q.Period_asArray&&le&&le.period&&H(le.period.index)&&(te=q.Period_asArray[le.period.index])&&te.AdaptationSet_asArray&&H(le.index)&&(De=te.AdaptationSet_asArray[le.index])&&(ue=De.InbandEventStream_asArray),Le(ue,null,ae)},getEventStreamForRepresentation:function(q,le,ae){var ue,te,De,Ce;return q&&q.Period_asArray&&le&&le.adaptation&&le.adaptation.period&&H(le.adaptation.period.index)&&(te=q.Period_asArray[le.adaptation.period.index])&&te.AdaptationSet_asArray&&H(le.adaptation.index)&&(De=te.AdaptationSet_asArray[le.adaptation.index])&&De.Representation_asArray&&H(le.index)&&(Ce=De.Representation_asArray[le.index])&&(ue=Ce.InbandEventStream_asArray),Le(ue,le,ae)},getUTCTimingSources:function(q){var le=Pe(q),ae=!!q&&q.hasOwnProperty(y.Z.AVAILABILITY_START_TIME),ue=q?q.UTCTiming_asArray:null,te=[];return(le||ae)&&ue&&ue.forEach(function(De){var Ce=new no.Z;De.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(Ce.schemeIdUri=De.schemeIdUri,De.hasOwnProperty(y.Z.VALUE)&&(Ce.value=De.value.toString(),te.push(Ce)))}),te},getBaseURLsFromElement:Ae,getRepresentationSortFunction:function(){return function(q,le){return q.bandwidth-le.bandwidth}},getContentSteering:function(q){if(q&&q.hasOwnProperty(y.Z.CONTENT_STEERING_AS_ARRAY))return Ze(q[y.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(q){return q&&q.hasOwnProperty(y.Z.LOCATION_AS_ARRAY)?q[y.Z.LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,ue=le.hasOwnProperty(y.Z.SERVICE_LOCATION)?le[y.Z.SERVICE_LOCATION]:null;return new zn(ae,ue)}):[]},getPatchLocation:function(q){return q&&q.hasOwnProperty(y.Z.PATCH_LOCATION_AS_ARRAY)?q[y.Z.PATCH_LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,ue=le.hasOwnProperty(y.Z.SERVICE_LOCATION)?le[y.Z.SERVICE_LOCATION]:null,te=le.hasOwnProperty(y.Z.TTL)?1e3*parseFloat(le[y.Z.TTL]):NaN;return new Kn(ae,ue,te)}):[]},getSuggestedPresentationDelay:function(q){return q&&q.hasOwnProperty(y.Z.SUGGESTED_PRESENTATION_DELAY)?q.suggestedPresentationDelay:null},getAvailabilityStartTime:function(q){return q&&q.hasOwnProperty(y.Z.AVAILABILITY_START_TIME)&&q.availabilityStartTime!==null?q.availabilityStartTime.getTime():null},getServiceDescriptions:function(q){var le=[];if(q&&q.hasOwnProperty(y.Z.SERVICE_DESCRIPTION)){var ae,ue=Un(q.ServiceDescription_asArray);try{for(ue.s();!(ae=ue.n()).done;){var te=ae.value,De=null,Ce=null,Be=null,xe=null,me=null,Me=null,ze=null;for(var mt in te)te.hasOwnProperty(mt)&&(mt===y.Z.ID?De=te[mt]:mt===y.Z.SERVICE_DESCRIPTION_SCOPE?Ce=te[mt].schemeIdUri:mt===y.Z.SERVICE_DESCRIPTION_LATENCY?Be={target:parseInt(te[mt].target),max:parseInt(te[mt].max),min:parseInt(te[mt].min),referenceId:parseInt(te[mt].referenceId)}:mt===y.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?xe={max:parseFloat(te[mt].max),min:parseFloat(te[mt].min)}:mt===y.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?me={mediaType:te[mt].mediaType,max:parseInt(te[mt].max),min:parseInt(te[mt].min),target:parseInt(te[mt].target),type:te[mt].type,maxQualityDifference:parseInt(te[mt].maxQualityDifference)}:mt===y.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?Me={mediaType:te[mt].mediaType,max:parseInt(te[mt].max),min:parseInt(te[mt].min),target:parseInt(te[mt].target)}:mt===y.Z.CONTENT_STEERING&&(ze=Ze(te[mt])));le.push({id:De,schemeIdUri:Ce,latency:Be,playbackRate:xe,operatingQuality:me,operatingBandwidth:Me,contentSteering:ze})}}catch(lt){ue.e(lt)}finally{ue.f()}}return le},getSegmentAlignment:function(q){return!(!q||!q.hasOwnProperty(y.Z.SEGMENT_ALIGNMENT))&&q[y.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(q){return!(!q||!q.hasOwnProperty(y.Z.SUB_SEGMENT_ALIGNMENT))&&q[y.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(q){var le={};if(q&&q.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,ue=Un(q.SupplementalProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var te=ae.value;te.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(le[te[E.Z.SCHEME_ID_URI]]=fn({},te))}}catch(De){ue.e(De)}finally{ue.f()}}return le},getSupplementalPropertiesAsArrayForAdaptation:function(q){return q&&q.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&q.SupplementalProperty_asArray.length?q.SupplementalProperty_asArray.map(function(le){return new wt().init(le)}):[]},getSupplementalPropertiesForRepresentation:function(q){var le={};if(q&&q.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,ue=Un(q.SupplementalProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var te=ae.value;te.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(le[te[E.Z.SCHEME_ID_URI]]=fn({},te))}}catch(De){ue.e(De)}finally{ue.f()}}return le},getSupplementalPropertiesAsArrayForRepresentation:function(q){return q&&q.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&q.SupplementalProperty_asArray.length?q.SupplementalProperty_asArray.map(function(le){return new wt().init(le)}):[]},setConfig:function(q){q&&(q.errHandler&&(j=q.errHandler),q.BASE64&&(V=q.BASE64))}},O=(0,M.Z)(W).getInstance().getLogger(F),F}Hr.__dashjs_factory_name="DashManifestModel";var er=U.Z.getSingletonFactory(Hr),dn=w(703);function vn(F,O){var j;if(typeof Symbol>"u"||F[Symbol.iterator]==null){if(Array.isArray(F)||(j=function(he,we){if(he){if(typeof he=="string")return on(he,we);var Te=Object.prototype.toString.call(he).slice(8,-1);return Te==="Object"&&he.constructor&&(Te=he.constructor.name),Te==="Map"||Te==="Set"?Array.from(he):Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te)?on(he,we):void 0}}(F))||O){j&&(F=j);var V=0,W=function(){};return{s:W,n:function(){return V>=F.length?{done:!0}:{done:!1,value:F[V++]}},e:function(he){throw he},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ee,H=!0,re=!1;return{s:function(){j=F[Symbol.iterator]()},n:function(){var he=j.next();return H=he.done,he},e:function(he){re=!0,ee=he},f:function(){try{H||j.return==null||j.return()}finally{if(re)throw ee}}}}function on(F,O){(O==null||O>F.length)&&(O=F.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=F[j];return V}function tr(){var F,O,j,V,W,ee,H,re,he,we,Te=this.context,ie=(0,m.Z)(Te).getInstance(),_e=(0,Ge.Z)(Te).getInstance();function ve(){j={pr:1,nor:null,st:null,sf:null,sid:"".concat(dn.Z.generateUuid()),cid:null},he={},re={},we={},Pe()}function Ve(){Pe()}function Pe(){if(ee){var te=ee.getStreamController();if(te&&typeof te.getActiveStream=="function"){var De=te.getActiveStream();De&&(H=De.getProcessors())}}}function je(te,De){var Ce,Be={},xe=vn(De);try{for(xe.s();!(Ce=xe.n()).done;){var me=Ce.value;te[me]&&(Be[me]=te[me])}}catch(Me){xe.e(Me)}finally{xe.f()}return Be}function Ke(te){var De=_e.get().streaming.cmcd.enabledKeys;return te.filter(function(Ce){return De.includes(Ce)})}function Se(te){try{return te.type===at.w.MPD_TYPE?((Ce=Le()).ot="m",Ce):te.type===at.w.MEDIA_SEGMENT_TYPE?(De=te.mediaType,we.hasOwnProperty(De)||(we[De]=!1),re.hasOwnProperty(De)||(re[De]=!1),he.hasOwnProperty(De)||(he[De]=!1),function(Be){var xe,me=Le(),Me=function(jt){try{var xn=jt.quality,it=jt.mediaInfo.bitrateList;return parseInt(it[xn].bandwidth/1e3)}catch(_t){return null}}(Be),ze=function(jt){try{return isNaN(jt.duration)?NaN:Math.round(1e3*jt.duration)}catch(xn){return null}}(Be),mt=function(jt){try{return 100*parseInt(V.getThroughputHistory().getSafeAverageThroughput(jt)/100)}catch(xn){return null}}(Be.mediaType),lt=function(jt){try{var xn=j.pr,it=W.getCurrentBufferLevel(jt);return isNaN(xn)||isNaN(it)?null:100*parseInt(it/xn*10)}catch(_t){return null}}(Be.mediaType),vt=Ae(Be.mediaType),pt=function(jt){try{var xn=V.getTopBitrateInfoFor(jt);return Math.round(xn.bitrate/1e3)}catch(it){return null}}(Be.mediaType),qt=j.pr,Gt=function(jt){if(H&&H.length!==0){var xn,it=vn(H);try{for(it.s();!(xn=it.n()).done;){var _t=xn.value;if(_t.getType()===jt)return _t.probeNextRequest()}}catch(Xt){it.e(Xt)}finally{it.f()}}}(Be.mediaType);Be.mediaType===E.Z.VIDEO&&(xe="v"),Be.mediaType===E.Z.AUDIO&&(xe="a"),Be.mediaType===E.Z.TEXT&&(xe=Be.mediaInfo.mimeType==="application/mp4"?"tt":"c");var Bt=_e.get().streaming.cmcd.rtp;return Bt||(Bt=function(jt){try{var xn=ee.getPlaybackRate();xn||(xn=1);var it=jt.quality,_t=jt.mediaType,Xt=jt.mediaInfo,Dt=jt.duration;if(!Xt)return NaN;var un=Ae(_t);un===0&&(un=500);var an=Xt.bitrateList[it].bandwidth*Dt/1e3/(un/xn/1e3),Qt=_e.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(_e.get().streaming.cmcd.rtpSafetyFactor)?_e.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(an*Qt/100)+1)}catch(Bn){return NaN}}(Be)),isNaN(Bt)||(me.rtp=Bt),Gt&&(Be.url!==Gt.url?me.nor=encodeURIComponent(dn.Z.getRelativeUrl(Be.url,Gt.url)):Gt.range&&(me.nrr=Gt.range)),Me&&(me.br=Me),xe&&(me.ot=xe),isNaN(ze)||(me.d=ze),isNaN(mt)||(me.mtp=mt),isNaN(lt)||(me.dl=lt),isNaN(vt)||(me.bl=vt),isNaN(pt)||(me.tb=pt),isNaN(qt)||qt===1||(me.pr=qt),he[Be.mediaType]&&(me.bs=!0,he[Be.mediaType]=!1),!re[Be.mediaType]&&we[Be.mediaType]||(me.su=!0,re[Be.mediaType]=!1,we[Be.mediaType]=!0),me}(te)):te.type===at.w.INIT_SEGMENT_TYPE?function(){var Be=Le();return Be.ot="i",Be.su=!0,Be}():te.type===at.w.OTHER_TYPE||te.type===at.w.XLINK_EXPANSION_TYPE?function(){var Be=Le();return Be.ot="o",Be}():te.type===at.w.LICENSE?function(Be){var xe=Le();return xe.ot="k",xe}():null}catch(Be){return null}var De,Ce}function Le(){var te={},De=_e.get().streaming.cmcd.cid?_e.get().streaming.cmcd.cid:j.cid;return te.v=1,te.sid=_e.get().streaming.cmcd.sid?_e.get().streaming.cmcd.sid:j.sid,te.sid="".concat(te.sid),De&&(te.cid="".concat(De)),isNaN(j.pr)||j.pr===1||j.pr===null||(te.pr=j.pr),j.st&&(te.st=j.st),j.sf&&(te.sf=j.sf),te}function Ae(te){try{var De=W.getCurrentBufferLevel(te);return isNaN(De)?null:100*parseInt(10*De)}catch(Ce){return null}}function Ze(te){try{j.pr=te.playbackRate}catch(De){}}function q(te){try{var De=F.getIsDynamic(te.data)?"l":"v",Ce=te.protocol&&te.protocol==="MSS"?"s":"d";j.st="".concat(De),j.sf="".concat(Ce)}catch(Be){}}function le(te){try{te.state&&te.mediaType&&te.state===_.Z.BUFFER_EMPTY&&(he[te.mediaType]||(he[te.mediaType]=!0),re[te.mediaType]||(re[te.mediaType]=!0))}catch(De){}}function ae(){for(var te in he)he.hasOwnProperty(te)&&(he[te]=!0);for(var De in re)re.hasOwnProperty(De)&&(re[De]=!0)}function ue(te){try{if(!te)return null;var De=Object.keys(te).sort(function(xe,me){return xe.localeCompare(me)}),Ce=De.length,Be=De.reduce(function(xe,me,Me){return me==="v"&&te[me]===1||(typeof te[me]=="string"&&me!=="ot"&&me!=="sf"&&me!=="st"?xe+="".concat(me,"=").concat(JSON.stringify(te[me])):xe+="".concat(me,"=").concat(te[me]),Me<Ce-1&&(xe+=",")),xe},"");return(Be=Be.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(xe){return null}}return O={getQueryParameter:function(te){try{if(_e.get().streaming.cmcd&&_e.get().streaming.cmcd.enabled){var De=Se(te),Ce=function(xe){try{var me=_e.get().streaming.cmcd.enabledKeys;return Object.keys(xe).filter(function(Me){return me.includes(Me)}).reduce(function(Me,ze){return Me[ze]=xe[ze],Me},{})}catch(Me){return xe}}(De),Be=ue(Ce);return ie.trigger(gr.Z.CMCD_DATA_GENERATED,{url:te.url,mediaType:te.mediaType,cmcdData:De,cmcdString:Be}),{key:"CMCD",value:Be}}return null}catch(xe){return null}},getHeaderParameters:function(te){try{if(_e.get().streaming.cmcd&&_e.get().streaming.cmcd.enabled){var De=Se(te),Ce=je(De,Ke(["br","d","ot","tb"])),Be=je(De,Ke(["bl","dl","mtp","nor","nrr","su"])),xe=je(De,Ke(["bs","rtp"])),me=je(De,Ke(["cid","pr","sf","sid","st","v"])),Me={"CMCD-Object":ue(Ce),"CMCD-Request":ue(Be),"CMCD-Status":ue(xe),"CMCD-Session":ue(me)};return ie.trigger(gr.Z.CMCD_DATA_GENERATED,{url:te.url,mediaType:te.mediaType,cmcdData:De,headers:Me}),Me}return null}catch(ze){return null}},setConfig:function(te){te&&(te.abrController&&(V=te.abrController),te.dashMetrics&&(W=te.dashMetrics),te.playbackController&&(ee=te.playbackController))},reset:function(){ie.off(_.Z.PLAYBACK_RATE_CHANGED,Ze,this),ie.off(_.Z.MANIFEST_LOADED,q,this),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,O),ie.off(_.Z.PLAYBACK_SEEKED,ae,O),ve()},initialize:function(){ie.on(_.Z.PLAYBACK_RATE_CHANGED,Ze,O),ie.on(_.Z.MANIFEST_LOADED,q,O),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,O),ie.on(_.Z.PLAYBACK_SEEKED,ae,O),ie.on(_.Z.PERIOD_SWITCH_COMPLETED,Ve,O)}},F=er(Te).getInstance(),ve(),O}tr.__dashjs_factory_name="CmcdModel";var ur=U.Z.getSingletonFactory(tr);function xr(F){return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},xr(F)}function Rr(F,O){Rr=function(re,he){return new ee(re,void 0,he)};var j=Ui(RegExp),V=RegExp.prototype,W=new WeakMap;function ee(re,he,we){var Te=j.call(this,re,he);return W.set(Te,we||W.get(re)),Te}function H(re,he){var we=W.get(he);return Object.keys(we).reduce(function(Te,ie){return Te[ie]=re[we[ie]],Te},Object.create(null))}return di(ee,j),ee.prototype.exec=function(re){var he=V.exec.call(this,re);return he&&(he.groups=H(he,this)),he},ee.prototype[Symbol.replace]=function(re,he){if(typeof he=="string"){var we=W.get(this);return V[Symbol.replace].call(this,re,he.replace(/\$<([^>]+)>/g,function(ie,_e){return"$"+we[_e]}))}if(typeof he=="function"){var Te=this;return V[Symbol.replace].call(this,re,function(){var ie=[];return ie.push.apply(ie,arguments),xr(ie[ie.length-1])!=="object"&&ie.push(H(ie,Te)),he.apply(this,ie)})}return V[Symbol.replace].call(this,re,he)},Rr.apply(this,arguments)}function di(F,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(O&&O.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),O&&vi(F,O)}function Ui(F){var O=typeof Map=="function"?new Map:void 0;return Ui=function(j){if(j===null||(V=j,Function.toString.call(V).indexOf("[native code]")===-1))return j;var V;if(typeof j!="function")throw new TypeError("Super expression must either be null or a function");if(O!==void 0){if(O.has(j))return O.get(j);O.set(j,W)}function W(){return ni(j,arguments,ri(this).constructor)}return W.prototype=Object.create(j.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),vi(W,j)},Ui(F)}function ni(F,O,j){return ni=li()?Reflect.construct:function(V,W,ee){var H=[null];H.push.apply(H,W);var re=new(Function.bind.apply(V,H));return ee&&vi(re,ee.prototype),re},ni.apply(null,arguments)}function li(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}function vi(F,O){return vi=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},vi(F,O)}function ri(F){return ri=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},ri(F)}var ys="static",Ao="dynamic",Yo="cmsd-",Ri=Yo+ys,qu=Yo+Ao,yu="stream",qs=["mb","st","sf","v"],xl={video:"v",audio:"a",text:"tt",stream:yu},Gu=/^[-0-9]/;function Hu(){var F,O,j,V,W=this.context,ee=(0,m.Z)(W).getInstance();function H(){j={},V={}}function re(ve){ve&&Object.keys(ve).forEach(function(Ve){qs.includes(Ve)||delete ve[Ve]})}function he(ve){return!ve||ve.toLowerCase()!=="false"&&(Gu.test(ve)?parseInt(ve,10):ve.replace(/["]+/g,""))}function we(ve){try{for(var Ve={},Pe=ve.split(","),je=0;je<Pe.length;je++){var Ke=Pe[je].split("="),Se=Ke[0],Le=he(Ke[1]);Ve[Se]=Le}return Ve}catch(Ae){O.error("Failed to parse CMSD-Static response header value:",Ae)}}function Te(ve){try{for(var Ve={},Pe=ve.split(","),je=Pe[Pe.length-1].split(";"),Ke=1;Ke<je.length;Ke++){var Se=je[Ke].split("="),Le=Se[0],Ae=he(Se[1]);Ve[Le]=Ae}return Ve}catch(Ze){return O.error("Failed to parse CMSD-Dynamic response header value:",Ze),[]}}function ie(ve){return xl[ve]||"o"}function _e(ve,Ve,Pe){var je=ve===ys?j:V,Ke=je[Ve]||{},Se=je[yu]||{};return Ke[Pe]||Se[Pe]}return F={setConfig:function(){},initialize:function(){},reset:function(){H()},parseResponseHeaders:function(ve,Ve){for(var Pe=null,je=null,Ke=ve.split("\r\n"),Se=Ke.length-1;Se>=0;Se--){var Le=Ke[Se].match(Rr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(Le&&Le.groups){var Ae=Le.groups.key.toLowerCase(),Ze=Le.groups.value;switch(Ae){case Ri:Pe=we(Ze),ee.trigger(T.Z.CMSD_STATIC_HEADER,Pe);break;case qu:je||(je=Te(Ze))}}}var q=yu;return Pe&&Pe.ot?q=Pe.ot:Ve&&(q=ie(Ve)),re(j[q]),re(V[q]),Pe&&(j[q]=Object.assign(j[q]||{},Pe)),je&&(V[q]=Object.assign(V[q]||{},je)),{static:Pe,dynamic:je}},getMaxBitrate:function(ve){var Ve=ie(ve);return _e(Ao,Ve,"mb")||-1},getEstimatedThroughput:function(ve){var Ve=ie(ve);return _e(Ao,Ve,"etp")||null},getResponseDelay:function(ve){var Ve=ie(ve);return _e(Ao,Ve,"rd")||null},getRoundTripTime:function(ve){var Ve=ie(ve);return _e(Ao,Ve,"rtt")||null}},O=(0,M.Z)(W).getInstance().getLogger(F),H(),F}Hu.__dashjs_factory_name="CmsdModel";var sn=U.Z.getSingletonFactory(Hu);function ir(){var F,O,j=this.context,V={};function W(){O=(0,M.Z)(j).getInstance().getLogger(F)}function ee(re){for(var he={},we=0,Te=0,ie=0,_e=0,ve=re.length,Ve=0;Ve<ve;++Ve)we+=re[Ve].chunkDownloadTimeRelativeMS,Te+=re[Ve].bufferLevel,ie+=re[Ve].chunkDownloadTimeRelativeMS*re[Ve].bufferLevel,_e+=re[Ve].chunkDownloadTimeRelativeMS*re[Ve].chunkDownloadTimeRelativeMS;return he.m=(ie-we*Te/ve)/(_e-we*we/ve),he.b=Te/ve-he.m*we/ve,function(Pe){return he.m*Pe+he.b}}function H(re){var he,we=!0,Te=re.reduce(function(ie,_e){return ie+_e.bufferLevelAtSegmentEnd},0)/re.length;return re.forEach(function(ie){Math.abs(ie.bufferLevelAtSegmentEnd/ie.bufferLevelAtSegmentStart)<.95&&(we=!1),ie.bufferLevelAtSegmentEnd/Te<.8&&(we=!1),he?he>ie.bitrate&&(we=!1):he=ie.bitrate}),we}return F={setup:W,addMeasurement:function(re,he,we,Te,ie){re&&re.mediaType&&!V[re.mediaType]&&(V[re.mediaType]=[]);var _e=re.mediaInfo.bitrateList.find(function(ve){return ve.id===re.representationId});V[re.mediaType].push({index:re.index,repId:re.representationId,mediaType:re.mediaType,requestTimeMS:Te,adjustedAvailabilityStartTimeMS:re.availabilityStartTime.getTime(),segDurationMS:1e3*re.duration,chunksDurationMS:we.reduce(function(ve,Ve){return ve+Ve.chunkDownloadDurationMS},0),segmentBytes:we.reduce(function(ve,Ve){return ve+Ve.chunkBytes},0),bitrate:_e&&_e.bandwidth,bitrateList:re.mediaInfo.bitrateList,chunkMeasurements:we,fetchDownloadDurationMS:he,throughputCapacityDelayMS:ie,getEstimatedBufferLevel:ee(we.slice(1))}),V[re.mediaType].length>10&&V[re.mediaType].shift()},getThroughputCapacityDelayMS:function(re,he){var we=V[re.mediaType]&&V[re.mediaType].slice(-3);return!we||we.length<3?0:H(we)?he/4>250?250:he/4:0},getEstimatedDownloadDurationMS:function(re){var he=V[re.mediaType].slice(-1).pop(),we=V[re.mediaType].slice(-3),Te=he.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;he.bufferLevelAtSegmentStart=he.getEstimatedBufferLevel(Te/2),he.bufferLevelAtSegmentEnd=he.getEstimatedBufferLevel(Te);var ie=H(we),_e=ie?.6:.8;if(he.isBufferStable&&1.05*he.segDurationMS<he.fetchDownloadDurationMS)return he.fetchDownloadDurationMS;if(!ie||he.segDurationMS<he.fetchDownloadDurationMS||he.adjustedAvailabilityStartTimeMS<=he.requestTimeMS+he.throughputCapacityDelayMS-he.segDurationMS)return .8*he.fetchDownloadDurationMS;for(var ve=he.requestTimeMS+he.throughputCapacityDelayMS-he.adjustedAvailabilityStartTimeMS,Ve=0,Pe=0,je=0,Ke=0;Ke<he.chunkMeasurements.length;Ke++){var Se=he.chunkMeasurements[Ke];if(ve<Pe+Se.chunkDownloadDurationMS)break;Pe+=Se.chunkDownloadDurationMS,Ve+=Se.chunkBytes,je++}if(ve<0&&O.warn("request time was before adjusted availibitly start time"),Ve&&Pe&&je>.2*he.chunkMeasurements.length){var Le=Ve/Pe,Ae=he.segmentBytes/Le;return he.fetchDownloadDurationMS<Ae?he.fetchDownloadDurationMS*_e:Ae*_e}var Ze=he.bitrate;return he.bitrateList.some(function(q){if(q.bandwidth>he.bitrate)return Ze=q.bandwidth,!0}),Ze===he.bitrate?he.fetchDownloadDurationMS*_e:_e*he.segmentBytes*8*1e3/Ze}},W(),F}ir.__dashjs_factory_name="LowLatencyThroughputModel";var Tr=U.Z.getSingletonFactory(ir),Ai=w(5717);function Wr(F,O,j){return O in F?Object.defineProperty(F,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):F[O]=j,F}function Ii(F){F=F||{};var O,j,V,W,ee,H,re,he,we,Te,ie,_e=this.context,ve=F.errHandler,Ve=F.dashMetrics,Pe=F.mediaPlayerModel,je=F.requestModifier,Ke=F.boxParser,Se=F.errors,Le=F.requestTimeout||0,Ae=(0,m.Z)(_e).getInstance(),Ze=(0,Ge.Z)(_e).getInstance();function q(le,ae){var ue,te=le.request,De=[],Ce=!0,Be=!0,xe=new Date,me=xe,Me=0,ze=null,mt=null;if(!je||!Ve||!ve)throw new Error("config object is not correct or missing");var lt,vt=function(un){te.requestStartDate=xe,te.requestEndDate=new Date,te.firstByteDate=te.firstByteDate||xe,te.fileLoaderType=mt;var an=ue.response?ue.response.responseURL:null,Qt=ue.response?ue.response.status:null,Bn=ue.response&&ue.response.getAllResponseHeaders?ue.response.getAllResponseHeaders():ue.response?ue.response.responseHeaders:null,kn=Bn&&Ze.get().streaming.cmsd&&Ze.get().streaming.cmsd.enabled?re.parseResponseHeaders(Bn,te.mediaType):null;Ve.addHttpRequest(te,an,Qt,Bn,un?De:null,kn)},pt=function(un){Be=!1,vt(un),te.type===at.w.MPD_TYPE&&(Ve.addManifestUpdate(te),Ae.trigger(T.Z.MANIFEST_LOADING_FINISHED,{request:te}))},qt=function(){if(ze&&(clearTimeout(ze),ze=null),j.indexOf(ue)!==-1&&(j.splice(j.indexOf(ue),1),Be))if(pt(!1),ae>0){try{Ze.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&te.type===at.w.MEDIA_SEGMENT_TYPE&&Pe.getRetryAttemptsForType(at.w.MEDIA_SEGMENT_TYPE)===ae&&Ae.trigger(T.Z.ATTEMPT_BACKGROUND_SYNC)}catch(an){}ae--;var un={config:le};W.push(un),un.timeout=setTimeout(function(){W.indexOf(un)!==-1&&(W.splice(W.indexOf(un),1),q(le,ae))},Pe.getRetryIntervalsForType(te.type))}else{if(te.type===at.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;ve.error(new ce.Z(ee[te.type],te.url+" is not available",{request:te,response:ue.response})),le.error&&le.error(te,"error",ue.response.statusText,ue.response),le.complete&&le.complete(te,ue.response.statusText)}};te.hasOwnProperty("availabilityTimeComplete")&&te.availabilityTimeComplete===!1&&window.fetch&&te.responseType==="arraybuffer"&&te.type===at.w.MEDIA_SEGMENT_TYPE?((lt=qr(_e).create({requestModifier:je,lowLatencyThroughputModel:we,boxParser:Ke})).setup({dashMetrics:Ve}),mt=E.Z.FILE_LOADER_TYPES.FETCH):(lt=(0,cn.Z)(_e).create({requestModifier:je}),mt=E.Z.FILE_LOADER_TYPES.XHR);var Gt=null,Bt=je.modifyRequestURL?je.modifyRequestURL(te.url):te.url;if(Ze.get().streaming.cmcd&&Ze.get().streaming.cmcd.enabled){var jt=Ze.get().streaming.cmcd.mode;if(jt===E.Z.CMCD_MODE_QUERY){var xn=function(un){try{var an=[],Qt=H.getQueryParameter(un);return Qt&&an.push(Qt),an}catch(Bn){return[]}}(te);Bt=dn.Z.addAditionalQueryParameterToUrl(Bt,xn)}else jt===E.Z.CMCD_MODE_HEADER&&(Gt=H.getHeaderParameters(te))}var it=he.getXHRWithCredentialsForType(te.type);if(te.queryParams){var _t=Object.keys(te.queryParams).map(function(un){return{key:un,value:te.queryParams[un]}});Bt=dn.Z.addAditionalQueryParameterToUrl(Bt,_t)}te.url=Bt,ue={url:Bt,method:at.w.GET,withCredentials:it,request:te,onload:function(){ue.response.status>=200&&ue.response.status<=299&&(pt(!0),le.success&&le.success(ue.response.response,ue.response.statusText,ue.response.responseURL),le.complete&&le.complete(te,ue.response.statusText))},onend:qt,onerror:qt,progress:function(un){var an=new Date;Ce&&(Ce=!1,(!un.lengthComputable||un.lengthComputable&&un.total!==un.loaded)&&(te.firstByteDate=an)),un.lengthComputable&&(te.bytesLoaded=un.loaded,te.bytesTotal=un.total),un.noTrace||(De.push({s:me,d:un.time?un.time:an.getTime()-me.getTime(),b:[un.loaded?un.loaded-Me:0]}),me=an,Me=un.loaded),ze&&(clearTimeout(ze),ze=null),Ze.get().streaming.fragmentRequestProgressTimeout>0&&(ze=setTimeout(function(){Te.warn("Abort request "+ue.url+" due to progress timeout"),ue.response.onabort=null,ue.loader.abort(ue),qt()},Ze.get().streaming.fragmentRequestProgressTimeout)),le.progress&&un&&le.progress(un)},onabort:function(){vt(!0),ze&&(clearTimeout(ze),ze=null),le.abort&&le.abort(te)},ontimeout:function(un){var an;if(un.lengthComputable){var Qt=un.loaded/un.total*100;an="Request timeout: loaded: "+un.loaded+", out of: "+un.total+" : "+Qt.toFixed(3)+"% Completed"}else an="Request timeout: non-computable download size";Te.warn(an)},loader:lt,timeout:Le,headers:Gt};var Xt=new Date().getTime();if(isNaN(te.delayLoadingTime)||Xt>=te.delayLoadingTime)j.push(ue),lt.load(ue);else{var Dt={httpRequest:ue};V.push(Dt),Dt.delayTimeout=setTimeout(function(){if(V.indexOf(Dt)!==-1){V.splice(V.indexOf(Dt),1);try{xe=new Date,me=xe,j.push(Dt.httpRequest),lt.load(Dt.httpRequest)}catch(un){Dt.httpRequest.onerror()}}},te.delayLoadingTime-Xt)}}return O={load:function(le){le.request?q(le,Pe.getRetryAttemptsForType(le.request.type)):le.error&&le.error(le.request,"error")},abort:function(){W.forEach(function(le){clearTimeout(le.timeout),le.config.request&&le.config.abort&&le.config.abort(le.config.request)}),W=[],V.forEach(function(le){return clearTimeout(le.delayTimeout)}),V=[],j.forEach(function(le){le.request.type!==at.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(le.onloadend=le.onerror=le.onprogress=void 0,le.loader.abort(le))}),j=[]}},Te=(0,M.Z)(_e).getInstance().getLogger(O),j=[],V=[],W=[],H=ur(_e).getInstance(),re=sn(_e).getInstance(),we=Tr(_e).getInstance(),he=(0,Ai.Z)(_e).getInstance(),Wr(ie={},at.w.MPD_TYPE,Se.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Wr(ie,at.w.XLINK_EXPANSION_TYPE,Se.DOWNLOAD_ERROR_ID_XLINK_CODE),Wr(ie,at.w.INIT_SEGMENT_TYPE,Se.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Wr(ie,at.w.MEDIA_SEGMENT_TYPE,Se.DOWNLOAD_ERROR_ID_CONTENT_CODE),Wr(ie,at.w.INDEX_SEGMENT_TYPE,Se.DOWNLOAD_ERROR_ID_CONTENT_CODE),Wr(ie,at.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,Se.DOWNLOAD_ERROR_ID_CONTENT_CODE),Wr(ie,at.w.OTHER_TYPE,Se.DOWNLOAD_ERROR_ID_CONTENT_CODE),ee=ie,O}Ii.__dashjs_factory_name="HTTPLoader";var Vr=U.Z.getClassFactory(Ii);function Cr(){var F;function O(){F={}}function j(){O()}return j(),{getLoader:function(V){for(var W in F)if(F.hasOwnProperty(W)&&V.startsWith(W))return F[W];return Vr},registerLoader:function(V,W){F[V]=W},unregisterLoader:function(V){F[V]&&delete F[V]},unregisterAllLoader:O,reset:j}}Cr.__dashjs_factory_name="SchemeLoaderFactory";var ci=U.Z.getSingletonFactory(Cr);function Br(F){F=F||{};var O,j,V=this.context;return O=ci(V).getInstance(),{load:function(W){if(!j){var ee=O.getLoader(W&&W.request?W.request.url:null);j=ee(V).create({errHandler:F.errHandler,mediaPlayerModel:F.mediaPlayerModel,requestModifier:F.requestModifier,dashMetrics:F.dashMetrics,boxParser:F.boxParser?F.boxParser:null,constants:F.constants?F.constants:null,dashConstants:F.dashConstants?F.dashConstants:null,urlUtils:F.urlUtils?F.urlUtils:null,requestTimeout:isNaN(F.requestTimeout)?0:F.requestTimeout,errors:F.errors})}j.load(W)},abort:function(){j&&j.abort()}}}Br.__dashjs_factory_name="URLLoader";var bi=U.Z.getClassFactory(Br);function yo(F){return yo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},yo(F)}function oa(F,O){return oa=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},oa(F,O)}function yi(F,O){return!O||yo(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(F):O}function Sa(F){return Sa=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Sa(F)}var aa=function(F){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&oa(ee,H)})(W,F);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Sa(O);if(j){var re=Sa(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return yi(this,ee)});function W(ee){var H;return function(re,he){if(!(re instanceof he))throw new TypeError("Cannot call a class as a function")}(this,W),(H=V.call(this,ee)).checkForExistenceOnly=!0,H}return W}(Z.Z);function Es(F){F=F||{};var O,j,V=this.context,W=F.eventBus,ee=F.events,H=F.urlUtils,re=F.errors,he=F.streamId;return O={checkForExistence:function(we){var Te=function(_e){W.trigger(ee.CHECK_FOR_EXISTENCE_COMPLETED,{request:we,exists:_e})};if(we){var ie=new aa(we.url);j.load({request:ie,success:function(){Te(!0)},error:function(){Te(!1)}})}else Te(!1)},load:function(we){var Te=function(ie,_e){W.trigger(ee.LOADING_COMPLETED,{request:we,response:ie||null,error:_e||null,sender:O})};we?j.load({request:we,progress:function(ie){W.trigger(ee.LOADING_PROGRESS,{request:we,stream:ie.stream,streamId:he}),ie.data&&W.trigger(ee.LOADING_DATA_PROGRESS,{request:we,response:ie.data||null,error:null,sender:O})},success:function(ie){Te(ie)},error:function(ie,_e,ve){Te(void 0,new ce.Z(re.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ve,_e))},abort:function(ie){ie&&W.trigger(ee.LOADING_ABANDONED,{mediaType:ie.mediaType,request:ie,sender:O})}}):Te(void 0,new ce.Z(re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){j&&j.abort()},reset:function(){j&&(j.abort(),j=null)}},j=bi(V).create({errHandler:F.errHandler,errors:re,dashMetrics:F.dashMetrics,mediaPlayerModel:F.mediaPlayerModel,requestModifier:F.requestModifier,urlUtils:H,constants:E.Z,boxParser:F.boxParser,dashConstants:F.dashConstants,requestTimeout:F.settings.get().streaming.fragmentRequestTimeout}),O}Es.__dashjs_factory_name="FragmentLoader";var wa=U.Z.getClassFactory(Es);function Aa(){return{modifyResponseAsync:function(F){return Promise.resolve(F)}}}Aa.__dashjs_factory_name="SegmentResponseModifier";var Eu=U.Z.getSingletonFactory(Aa);function _u(F){F=F||{};var O,j,V,W=this.context,ee=(0,m.Z)(W).getInstance(),H=F.errHandler,re=F.mediaPlayerModel,he=F.dashMetrics,we=(0,M.Z)(W).getInstance(),Te=Eu(W).getInstance(),ie=F.streamInfo;function _e(){return ie.id}function ve(){for(var Pe in V)V[Pe].reset();V={}}function Ve(Pe){if(Pe.sender){var je=Pe.request,Ke=Pe.response,Se=je.isInitializationRequest(),Le=je.mediaInfo.streamInfo;if(Pe.error&&(je.mediaType===E.Z.AUDIO||je.mediaType===E.Z.VIDEO||je.mediaType===E.Z.TEXT&&je.mediaInfo.isFragmented)&&ee.trigger(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:Pe.request.serviceLocation}),Ke&&Le){var Ae=function(Ze,q,le,ae){var ue=new nn;return ue.streamId=le,ue.mediaInfo=q.mediaInfo,ue.segmentType=q.type,ue.start=q.startTime,ue.duration=q.duration,ue.end=ue.start+ue.duration,ue.bytes=Ze,ue.index=q.index,ue.quality=q.quality,ue.representationId=q.representationId,ue.endFragment=ae,ue}(Ke,je,ie.id,Pe.type!==T.Z.FRAGMENT_LOADING_PROGRESS);Te.modifyResponseAsync(Ae).then(function(Ze){ee.trigger(Se?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:Ze,request:je},{streamId:Le.id,mediaType:je.mediaType})}).catch(function(Ze){j.error(Ze),ee.trigger(Se?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:Ae,request:je},{streamId:Le.id,mediaType:je.mediaType})})}else j.warn("No "+je.mediaType+" bytes to push or stream is inactive.")}}return O={getStreamId:_e,getModel:function(Pe){var je=V[Pe];return je||(je=X(W).create({streamInfo:ie,type:Pe,dashMetrics:he,fragmentLoader:wa(W).create({dashMetrics:he,mediaPlayerModel:re,errHandler:H,requestModifier:(0,He.Z)(W).getInstance(),settings:F.settings,boxParser:F.boxParser,eventBus:ee,events:T.Z,errors:Ie,dashConstants:F.dashConstants,urlUtils:F.urlUtils,streamId:_e()}),debug:we,eventBus:ee,events:T.Z}),V[Pe]=je),je},reset:function(){ee.off(_.Z.FRAGMENT_LOADING_COMPLETED,Ve,this),ee.off(_.Z.FRAGMENT_LOADING_PROGRESS,Ve,this),ve()}},j=we.getLogger(O),ve(),ee.on(_.Z.FRAGMENT_LOADING_COMPLETED,Ve,O),ee.on(_.Z.FRAGMENT_LOADING_PROGRESS,Ve,O),O}_u.__dashjs_factory_name="FragmentController";var bh=U.Z.getClassFactory(_u),Ia=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},_s=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function Tu(F){var O,j,V=this.context,W=F.streamInfo;function ee(re){j.setTrackByIndex(re)}function H(){j&&j.reset()}return O={getStreamId:function(){return W.id},initialize:function(){j.addTracks();var re=j.getTracks();re&&re.length>0&&ee(0)},provide:function(re,he){if(typeof he=="function"){var we,Te,ie=j.getCurrentTrack();if(!ie||ie.segmentDuration<=0||re==null)he(null);else{(Te=j.getThumbnailRequestForTime(re))&&(ie.segmentDuration=Te.duration),we=re%ie.segmentDuration;var _e=Math.floor(we*ie.tilesHor*ie.tilesVert/ie.segmentDuration),ve=new Ia;if(ve.width=Math.floor(ie.widthPerTile),ve.height=Math.floor(ie.heightPerTile),ve.x=Math.floor(_e%ie.tilesHor)*ie.widthPerTile,ve.y=Math.floor(_e/ie.tilesHor)*ie.heightPerTile,"readThumbnail"in ie)return ie.readThumbnail(re,function(Pe){ve.url=Pe,he(ve)});if(Te)ve.url=Te.url,ie.segmentDuration=NaN;else{var Ve=Math.floor(re/ie.segmentDuration);ve.url=function(Pe,je){var Ke=je+Pe.startNumber,Se=(0,D.vi)(Pe.templateUrl,"Number",Ke);return Se=(0,D.vi)(Se,"Time",(Ke-1)*Pe.segmentDuration*Pe.timescale),Se=(0,D.vi)(Se,"Bandwidth",Pe.bandwidth),(0,D.eR)(Se)}(ie,Ve)}he(ve)}}},setTrackByIndex:ee,getCurrentTrackIndex:function(){return j.getCurrentTrackIndex()},getBitrateList:function(){var re=j.getTracks(),he=0;return re.map(function(we){var Te=new _s;return Te.mediaType=E.Z.IMAGE,Te.qualityIndex=he++,Te.bitrate=we.bitrate,Te.width=we.width,Te.height=we.height,Te})},reset:H},H(),j=(0,Mn.Z)(V).create({streamInfo:W,adapter:F.adapter,baseURLController:F.baseURLController,timelineConverter:F.timelineConverter,debug:F.debug,eventBus:F.eventBus,events:F.events,dashConstants:F.dashConstants,dashMetrics:F.dashMetrics,segmentBaseController:F.segmentBaseController}),O}Tu.__dashjs_factory_name="ThumbnailController";var Su=U.Z.getClassFactory(Tu),Vu=w(7417);function vf(F){var O;F=F||{};var j=[],V=(0,m.Z)(this.context).getInstance(),W=F.updateEventName,ee=F.addBlacklistEventName;function H(re){j.indexOf(re)===-1&&(j.push(re),V.trigger(W,{entry:re}))}return O={add:H,contains:function(re){return!!(j.length&&re&&re.length)&&j.indexOf(re)!==-1},reset:function(){j=[]}},ee&&V.on(ee,function(re){H(re.entry)},O),O}vf.__dashjs_factory_name="BlackListController";var Gs=U.Z.getClassFactory(vf),yf=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT,E.Z.MUXED,E.Z.IMAGE];function sr(F){F=F||{};var O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve,Pe,je,Ke,Se,Le=this.context,Ae=(0,m.Z)(Le).getInstance(),Ze=(0,Tt.Z)(Le).getInstance(),q=F.manifestModel,le=F.mediaPlayerModel,ae=F.dashMetrics,ue=F.manifestUpdater,te=F.adapter,De=F.timelineConverter,Ce=F.capabilities,Be=F.errHandler,xe=F.abrController,me=F.playbackController,Me=F.eventController,ze=F.mediaController,mt=F.protectionController,lt=F.textController,vt=F.videoModel,pt=F.streamInfo,qt=F.settings;function Gt(Jt,Nn){return new Promise(function(Pn,On){an(),Te=!0,Bn();var Dn=vt.getElement(),Ct=[];yf.forEach(function(Qe){(Qe!==E.Z.TEXT||Jt)&&(Qe!==E.Z.VIDEO||!Dn||Dn&&/^VIDEO$/i.test(Dn.nodeName))&&Ct.push(Bt(Qe,Jt))}),Promise.all(Ct).then(function(){return Qe=Nn,new Promise(function(Vt){var qe={},Je=V.map(function(Ot){return Ot.createBufferSinks(Qe)});Promise.all(Je).then(function(Ot){Ot.forEach(function(yn){yn&&(qe[yn.getType()]=yn)}),Vt(qe)}).catch(function(){Vt(qe)})});var Qe}).then(function(Qe){if(Te=!1,V.length===0){var Vt="No streams to play.";Be.error(new ce.Z(Ie.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Vt,q.getValue())),j.fatal(Vt)}else kn();Jt&&lt.createTracks(pt),Pn(Qe)}).catch(function(Qe){On(Qe)})})}function Bt(Jt,Nn){var Pn,On=te.getAllMediaInfoForType(pt,Jt),Dn=[],Ct=null;if(!On||On.length===0)return j.info("No "+Jt+" data."),Promise.resolve();Jt===E.Z.VIDEO&&(re=!0),Jt===E.Z.AUDIO&&(he=!0);for(var Qe=0,Vt=On.length;Qe<Vt;Qe++)Ct=On[Qe],Jt===E.Z.TEXT&&Ct.isEmbedded&&(lt.addEmbeddedTrack(pt,Ct),Dn.push(Ct)),jt(Ct)&&ze.addTrack(Ct);if(Dn.length>0&&(ze.setInitialMediaSettingsForType(Jt,pt),lt.addMediaInfosToBuffer(pt,Jt,Dn)),On=On.filter(function(Je){return!Je.isEmbedded}),On.length===0)return Promise.resolve();if(Jt===E.Z.IMAGE)return(_e=Su(Le).create({streamInfo:pt,adapter:te,baseURLController:F.baseURLController,timelineConverter:F.timelineConverter,debug:je,eventBus:Ae,events:T.Z,dashConstants:y.Z,dashMetrics:F.dashMetrics,segmentBaseController:F.segmentBaseController})).initialize(),Promise.resolve();Ae.trigger(T.Z.STREAM_INITIALIZING,{streamInfo:pt,mediaInfo:Ct}),ze.setInitialMediaSettingsForType(Jt,pt);var qe=function(Je,Ot){var yn=Je&&Je.length>0?Je[0]:null,Cn=ie.getModel(yn?yn.type:null),yr=yn?yn.type:null,oi=yn?yn.mimeType:null,gi=yn?yn.isFragmented:null,Xr=_n(Le).create({streamInfo:pt,type:yr,mimeType:oi,timelineConverter:De,adapter:te,manifestModel:q,mediaPlayerModel:le,fragmentModel:Cn,dashMetrics:F.dashMetrics,baseURLController:F.baseURLController,segmentBaseController:F.segmentBaseController,abrController:xe,playbackController:me,mediaController:ze,textController:lt,errHandler:Be,settings:qt,boxParser:Pe,segmentBlacklistController:ve});Xr.initialize(Ot,re,gi),V.push(Xr);for(var Lo=0;Lo<Je.length;Lo++)Xr.addMediaInfo(Je[Lo]);return yr===E.Z.TEXT&&lt.addMediaInfosToBuffer(pt,yr,Je,Cn),Xr}(On,Nn);return(Pn=ze.getCurrentTrackFor(Jt,pt.id))?(xe.updateTopQualityIndex(Pn),qe.selectMediaInfo(Jt===E.Z.TEXT&&Pn.isEmbedded?On[0]:Pn)):Promise.resolve()}function jt(Jt){var Nn,Pn=Jt?Jt.type:null;return Pn===E.Z.MUXED?(Nn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",j.fatal(Nn),Be.error(new ce.Z(Ie.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Nn,q.getValue())),!1):!(Pn!==E.Z.TEXT&&Pn!==E.Z.IMAGE&&Jt.contentProtection&&!Ce.supportsEncryptedMedia()&&(Be.error(new ce.Z(Ie.CAPABILITY_MEDIAKEYS_ERROR_CODE,Ie.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function xn(Jt){for(var Nn=V?V.length:0,Pn=0;Pn<Nn;Pn++){var On=V[Pn].getFragmentModel();On.abortRequests(),On.resetInitialSettings(),V[Pn].reset(!1,Jt)}lt&&lt.deactivateStream(pt),V=[],ee=!1,H=!1,qn(!1),_t(!1),Ae.trigger(T.Z.STREAM_DEACTIVATED,{streamInfo:pt})}function it(Jt){xn(Jt),W=!1,re=!1,he=!1,we={},Te=!1,Ke=!1,Se=[]}function _t(Jt){Ke=Jt}function Xt(){return pt?pt.start:NaN}function Dt(){return pt?pt.id:null}function un(){return pt}function an(){if(!vt||!xe)throw new Error(E.Z.MISSING_CONFIG_ERROR)}function Qt(Jt){Jt.error&&(Be.error(Jt.error),j.fatal(Jt.error.message))}function Bn(){if(Me){var Jt=te.getEventsFor(pt);Jt&&Jt.length>0&&Me.addInlineEvents(Jt,pt.id)}}function kn(){for(var Jt=V.length,Nn=we.audio||we.video?new ce.Z(Ie.DATA_UPDATE_FAILED_ERROR_CODE,Ie.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,Pn=0;Pn<Jt;Pn++)if(V[Pn].isUpdating()||Te)return;if(mt){mt.clearMediaInfoArray();for(var On=0;On<Jt&&V[On];On++){var Dn=V[On].getType(),Ct=V[On].getMediaInfo();if(Dn===E.Z.AUDIO||Dn===E.Z.VIDEO||Dn===E.Z.TEXT&&Ct.isFragmented){var Qe=V[On].getMediaInfo();Qe&&mt.initializeForMedia(Qe)}}mt.handleKeySystemFromManifest()}Nn?Be.error(Nn):W||(W=!0,vt.waitForReadyState(E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){Ae.trigger(T.Z.STREAM_INITIALIZED,{streamInfo:pt})}))}function mr(){var Jt=mn(),Nn=Jt.length;if(Nn!==0){for(var Pn=0;Pn<Nn;Pn++)if(!Jt[Pn].isBufferingCompleted()&&(Jt[Pn].getType()===E.Z.AUDIO||Jt[Pn].getType()===E.Z.VIDEO))return void j.debug("onBufferingCompleted - One streamProcessor has finished but",Jt[Pn].getType(),"one is not buffering completed");j.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),H=!0,Ae.trigger(T.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:pt},{streamInfo:pt})}else j.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function vr(Jt){we[Jt.mediaType]=Jt.error,kn()}function bt(Jt){Me&&Me.addInbandEvents(Jt.events,pt.id)}function en(Jt){return Jt&&Jt.type?Zt(Jt.type):null}function Zt(Jt){return Jt?mn().filter(function(Nn){return Nn.getType()===Jt})[0]:null}function mn(){for(var Jt,Nn,Pn=[],On=0;On<V.length;On++)(Jt=(Nn=V[On]).getType())!==E.Z.AUDIO&&Jt!==E.Z.VIDEO&&Jt!==E.Z.TEXT||Pn.push(Nn);return Pn}function bn(Jt,Nn){var Pn=un(),On=Nn.getStreamInfo();if(!On||!Pn)return!0;var Dn=te.getAdaptationForType(On.index,Jt,On),Ct=te.getAdaptationForType(Pn.index,Jt,Pn);return Dn&&Ct?!(!Zn(Ct)&&Zn(Dn)):!Dn&&!Ct}function Zn(Jt){return!!Jt&&!!(Jt.ContentProtection||Jt.Representation_asArray&&Jt.Representation_asArray.length>0&&Jt.Representation_asArray[0].ContentProtection)}function Fn(Jt,Nn){var Pn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!Jt||!Jt.hasOwnProperty("getStreamInfo"))return!1;var On=Jt.getStreamInfo(),Dn=Pn?Pn.getStreamInfo():un();if(!On||!Dn)return!1;var Ct=te.getAdaptationForType(On.index,Nn,On),Qe=te.getAdaptationForType(Dn.index,Nn,Dn);if(!Ct||!Qe)return!Ct&&!Qe;var Vt=Ct&&Qe&&Ct.mimeType===Qe.mimeType,qe=Qe.Representation_asArray.map(function(Cn){return Cn.codecs}),Je=Ct.Representation_asArray.map(function(Cn){return Cn.codecs}),Ot=Je.some(function(Cn){return qe.indexOf(Cn)>-1}),yn=Je.some(function(Cn){return qe.some(function(yr){return Ce.codecRootCompatibleWithCodec(yr,Cn)})});return Ot||yn&&Vt}function qn(Jt){Ve=Jt}function Yn(){return Ve}return O={initialize:function(){Ae.on(T.Z.BUFFERING_COMPLETED,mr,O),Ae.on(T.Z.DATA_UPDATE_COMPLETED,vr,O),Ae.on(T.Z.INBAND_EVENTS,bt,O),mt&&(Ae.on(T.Z.KEY_ERROR,Qt,O),Ae.on(T.Z.SERVER_CERTIFICATE_UPDATED,Qt,O),Ae.on(T.Z.LICENSE_REQUEST_COMPLETE,Qt,O),Ae.on(T.Z.KEY_SYSTEM_SELECTED,Qt,O),Ae.on(T.Z.KEY_SESSION_CREATED,Qt,O),Ae.on(T.Z.KEY_STATUSES_CHANGED,Qt,O)),lt.initializeForStream(pt),Ae.trigger(T.Z.STREAM_UPDATED,{streamInfo:pt})},getStreamId:function(){return pt?pt.id:null},activate:function(Jt,Nn){return new Promise(function(Pn,On){if(!ee)return Yn()?(ee=!0,Ae.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:pt}),void Pn(Nn)):void function(Dn,Ct){return Gt(Dn,Ct)}(Jt,Nn).then(function(Dn){ee=!0,Ae.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:pt}),Pn(Dn)}).catch(function(Dn){On(Dn)});Pn(Nn)})},deactivate:xn,getIsActive:function(){return ee},getDuration:function(){return pt?pt.duration:NaN},getStartTime:Xt,getId:Dt,getStreamInfo:un,getHasAudioTrack:function(){return he},getHasVideoTrack:function(){return re},startPreloading:function(Jt,Nn){return new Promise(function(Pn,On){Yn()?On():(j.info("[startPreloading] Preloading next stream with id ".concat(Dt())),qn(!0),Gt(Jt,Nn).then(function(){for(var Dn=0;Dn<V.length&&V[Dn];Dn++)V[Dn].setExplicitBufferingTime(Xt()),V[Dn].getScheduleController().startScheduleTimer();Pn()}).catch(function(){qn(!1),On()}))})},initializeForTextWithMediaSource:function(Jt){return new Promise(function(Nn,Pn){Bt(E.Z.TEXT,Jt).then(function(){return(On=Zt(E.Z.TEXT))?On.createBufferSinks():Promise.resolve();var On}).then(function(){lt.createTracks(pt),Nn()}).catch(function(On){Pn(On)})})},getThumbnailController:function(){return _e},getBitrateListFor:function(Jt){if(an(),Jt===E.Z.IMAGE)return _e?_e.getBitrateList():[];var Nn=function(Pn){for(var On=null,Dn=0;Dn<V.length;Dn++)if((On=V[Dn]).getType()===Pn)return On.getMediaInfo();return null}(Jt);return xe.getBitrateList(Nn)},updateData:function(Jt){return new Promise(function(Nn){Te=!0,pt=Jt,Me&&Bn();for(var Pn=[],On=0,Dn=V.length;On<Dn;On++){var Ct=V[On],Qe=Ct.getMediaInfo();Pn.push(Ct.updateStreamInfo(pt));var Vt=te.getAllMediaInfoForType(pt,Ct.getType());if(Vt=Vt.filter(function(Ot){return!Ot.isEmbedded})){Ct.clearMediaInfoArray();for(var qe=0;qe<Vt.length;qe++){var Je=Vt[qe];Ct.addMediaInfo(Vt[qe]),te.areMediaInfosEqual(Qe,Je)&&(xe.updateTopQualityIndex(Je),Pn.push(Ct.selectMediaInfo(Je)))}}}Promise.all(Pn).then(function(){for(Pn=[];Se.length>0;){var Ot=Se.pop(),yn=Ot.newMediaInfo,Cn=en(Ot.oldMediaInfo);if(!Cn)return;Pn.push(Cn.prepareTrackSwitch()),Pn.push(Cn.selectMediaInfo(yn))}return Promise.all(Pn)}).then(function(){Te=!1,kn(),Ae.trigger(T.Z.STREAM_UPDATED,{streamInfo:pt}),Nn()})})},reset:function(Jt){ie&&(ie.reset(),ie=null),xe&&pt&&xe.clearDataForStream(pt.id),ve&&(ve.reset(),ve=null),it(Jt),pt=null,Ae.off(T.Z.DATA_UPDATE_COMPLETED,vr,O),Ae.off(T.Z.BUFFERING_COMPLETED,mr,O),Ae.off(T.Z.INBAND_EVENTS,bt,O),mt&&(Ae.off(T.Z.KEY_ERROR,Qt,O),Ae.off(T.Z.SERVER_CERTIFICATE_UPDATED,Qt,O),Ae.off(T.Z.LICENSE_REQUEST_COMPLETE,Qt,O),Ae.off(T.Z.KEY_SYSTEM_SELECTED,Qt,O),Ae.off(T.Z.KEY_SESSION_CREATED,Qt,O),Ae.off(T.Z.KEY_STATUSES_CHANGED,Qt,O))},getProcessors:mn,setMediaSource:function(Jt){return new Promise(function(Nn,Pn){for(var On=[],Dn=0;Dn<V.length;)jt(V[Dn].getMediaInfo())?(On.push(V[Dn].setMediaSource(Jt)),Dn++):(V[Dn].reset(),V.splice(Dn,1));Promise.all(On).then(function(){for(var Ct=0;Ct<V.length;Ct++)V[Ct].dischargePreBuffer();if(V.length===0){var Qe="No streams to play.";Be.error(new ce.Z(Ie.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Qe+"nostreams",q.getValue())),j.fatal(Qe)}Nn()}).catch(function(Ct){j.error(Ct),Pn(Ct)})})},isMediaCodecCompatible:function(Jt){var Nn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Fn(Jt,E.Z.VIDEO,Nn)&&Fn(Jt,E.Z.AUDIO,Nn)},isProtectionCompatible:function(Jt){return!Jt||bn(E.Z.VIDEO,Jt)&&bn(E.Z.AUDIO,Jt)},getPreloaded:Yn,getIsEndedEventSignaled:function(){return Ke},setIsEndedEventSignaled:_t,getAdapter:function(){return te},getHasFinishedBuffering:function(){return H},setPreloaded:qn,startScheduleControllers:function(){for(var Jt=V.length,Nn=0;Nn<Jt&&V[Nn];Nn++)V[Nn].getScheduleController().startScheduleTimer()},prepareTrackChange:function(Jt){if(ee&&pt){H=!1;var Nn=Jt.newMediaInfo,Pn=q.getValue();te.setCurrentMediaInfo(pt.id,Nn.type,Nn);var On=en(Nn);if(On){var Dn=me.getTime();j.info("Stream -  Process track changed at current time "+Dn),Pn.refreshManifestOnSwitchTrack?(Se.push(Jt),ue.getIsUpdating()||(j.debug("Stream -  Refreshing manifest for switch track"),ue.refreshManifest())):On.selectMediaInfo(Nn).then(function(){Nn.type!==E.Z.VIDEO&&Nn.type!==E.Z.AUDIO||xe.updateTopQualityIndex(Nn),On.prepareTrackSwitch()})}}},prepareQualityChange:function(Jt){var Nn=Zt(Jt.mediaType);Nn&&Nn.prepareQualityChange(Jt)}},function(){try{je=(0,M.Z)(Le).getInstance(),j=je.getLogger(O),it(),Pe=(0,Vu.Z)(Le).getInstance(),ve=Gs(Le).create({updateEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),ie=bh(Le).create({streamInfo:pt,mediaPlayerModel:le,dashMetrics:ae,errHandler:Be,settings:qt,boxParser:Pe,dashConstants:y.Z,urlUtils:Ze})}catch(Jt){throw Jt}}(),O}sr.__dashjs_factory_name="Stream";var ei=U.Z.getClassFactory(sr),Io=function F(O){(function(j,V){if(!(j instanceof V))throw new TypeError("Cannot call a class as a function")})(this,F),this.url=O||null,this.type=at.w.CONTENT_STEERING_TYPE,this.responseType="json"},Eo=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function Hi(){var F,O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve,Pe=this.context,je=(0,Tt.Z)(Pe).getInstance();function Ke(xe){q(xe,"baseUrl")}function Se(xe){q(xe,"location")}function Le(xe){if(xe&&xe.request&&xe.request.serviceLocation&&xe.request.requestStartDate&&xe.request.requestEndDate&&!isNaN(xe.request.bytesTotal)){var me=xe.request.serviceLocation,Me=xe.request.requestEndDate.getTime()-xe.request.requestStartDate.getTime();Ze(me,parseInt(8*xe.request.bytesTotal/Me*1e3))}}function Ae(xe){xe&&xe.httpRequest&&xe.httpRequest._serviceLocation&&!isNaN(xe.throughput)&&Ze(xe.httpRequest._serviceLocation,1e3*xe.throughput)}function Ze(xe,me){W[xe]||(W[xe]=[]),W[xe].push(me),W[xe].length>4&&W[xe].shift()}function q(xe,me){if(xe&&xe.request&&xe.request.serviceLocation){var Me=xe.request.serviceLocation;V[me].all.indexOf(Me)===-1&&V[me].all.push(Me),V[me].current=Me}}function le(){var xe=Te.getValue(),me=Ve.getContentSteering(xe);return me||(me=_e.getServiceDescriptionSettings().contentSteering),me}function ae(){return new Promise(function(xe){try{var me=le();if(!me||!me.serverUrl)return void xe();var Me=function(mt){var lt=mt.serverUrl;j&&j.reloadUri&&(lt=je.isRelative(j.reloadUri)?je.resolve(j.reloadUri,mt.serverUrl):j.reloadUri);var vt=[],pt=V.baseUrl.all.concat(V.location.all);if(pt.length>0){var qt=pt.map(function(jt){var xn=function(it){if(!it||!W[it]||W[it].length===0)return-1;var _t=W[it].reduce(function(Xt,Dt){return Xt+Dt})/W[it].length;return parseInt(_t)}(jt);return{serviceLocation:jt,throughput:xn}});qt.sort(function(jt,xn){return xn.throughput-jt.throughput});var Gt="",Bt="";qt.forEach(function(jt,xn){xn!==0&&(Gt="".concat(Gt,","),jt.throughput>-1&&(Bt="".concat(Bt,","))),Gt="".concat(Gt).concat(jt.serviceLocation),jt.throughput>-1&&(Bt="".concat(Bt).concat(jt.throughput))}),vt.push({key:"_DASH_pathway",value:'"'.concat(Gt,'"')}),vt.push({key:"_DASH_throughput",value:Bt})}return lt=dn.Z.addAditionalQueryParameterToUrl(lt,vt)}(me),ze=new Io(Me);H.load({request:ze,success:function(mt){(function(lt){lt&&lt[y.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(lt[y.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((j=new Eo).version=lt[y.Z.CONTENT_STEERING_RESPONSE.VERSION],lt[y.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(lt[y.Z.CONTENT_STEERING_RESPONSE.TTL])&&(j.ttl=lt[y.Z.CONTENT_STEERING_RESPONSE.TTL]),lt[y.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(j.reloadUri=lt[y.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),lt[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(j.pathwayPriority=lt[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),lt[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(j.pathwayClones=lt[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],j.pathwayClones=j.pathwayClones.filter(function(vt){return function(pt){return pt[y.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&pt[y.Z.CONTENT_STEERING_RESPONSE.ID]&&pt[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&pt[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][y.Z.CONTENT_STEERING_RESPONSE.HOST]}(vt)})),De())})(mt),ve.trigger(_.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:j,url:Me}),xe()},error:function(mt,lt,vt,pt){(function(qt,Gt){try{switch(O.warn("Error fetching data from content steering server",qt),Gt.status){case 410:break;case 429:var Bt=Gt&&Gt.getResponseHeader?Gt.getResponseHeader("retry-after"):null;Bt!==null&&(j||(j={}),j.ttl=parseInt(Bt)),De();break;default:De()}}catch(jt){O.error(jt)}})(mt,pt),xe(mt)},complete:function(){V.baseUrl.all=ue(V.baseUrl),V.location.all=ue(V.location)}})}catch(mt){xe(mt)}})}function ue(xe){return xe.all&&xe.all.length!==0&&xe.current?xe.all.filter(function(me){return me===xe.current}):[]}function te(xe){try{var me=[];return xe&&xe.length!==0&&j&&j.pathwayClones&&j.pathwayClones.length!==0&&j.pathwayClones.forEach(function(Me){var ze=xe.filter(function(qt){return Me[y.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===qt.serviceLocation}),mt=null;if(ze&&ze.length>0&&(mt=ze[0]),mt){var lt=new URL(mt.url),vt=Me[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][y.Z.CONTENT_STEERING_RESPONSE.HOST];vt=dn.Z.stringHasProtocol(vt)?vt:"".concat(lt.protocol,"//").concat(vt);var pt={synthesizedUrl:"".concat(vt).concat(lt.pathname),serviceLocation:Me[y.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:Me[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][y.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:mt};me.push(pt)}}),me}catch(Me){return O.error(Me),[]}}function De(){j&&j.ttl&&!isNaN(j.ttl)&&(ee&&clearTimeout(ee),ee=setTimeout(function(){ae()},1e3*j.ttl))}function Ce(){ee&&clearTimeout(ee),ee=null}function Be(){j=null,W={},V={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},Ce()}return F={reset:function(){Be(),ve.off(_.Z.FRAGMENT_LOADING_STARTED,Ke,F),ve.off(_.Z.MANIFEST_LOADING_STARTED,Se,F),ve.off(_.Z.MANIFEST_LOADING_FINISHED,Le,F),ve.off(_.Z.THROUGHPUT_MEASUREMENT_STORED,Ae,F)},setConfig:function(xe){xe&&(xe.adapter&&(Ve=xe.adapter),xe.errHandler&&(re=xe.errHandler),xe.dashMetrics&&(he=xe.dashMetrics),xe.mediaPlayerModel&&(we=xe.mediaPlayerModel),xe.requestModifier&&(ie=xe.requestModifier),xe.manifestModel&&(Te=xe.manifestModel),xe.serviceDescriptionController&&(_e=xe.serviceDescriptionController),xe.eventBus&&(ve=xe.eventBus))},loadSteeringData:ae,getCurrentSteeringResponseData:function(){return j},shouldQueryBeforeStart:function(){var xe=le();return!!xe&&xe.queryBeforeStart},getSteeringDataFromManifest:le,stopSteeringRequestTimer:Ce,getSynthesizedBaseUrlElements:function(xe){try{return te(xe).map(function(me){var Me=new nr(me.synthesizedUrl,me.serviceLocation);return Me.queryParams=me.queryParams,Me.dvbPriority=me.reference.dvbPriority,Me.dvbWeight=me.reference.dvbWeight,Me.availabilityTimeOffset=me.reference.availabilityTimeOffset,Me.availabilityTimeComplete=me.reference.availabilityTimeComplete,Me})}catch(me){return O.error(me),[]}},getSynthesizedLocationElements:function(xe){try{return te(xe).map(function(me){var Me=new zn(me.synthesizedUrl,me.serviceLocation);return Me.queryParams=me.queryParams,Me})}catch(me){return O.error(me),[]}},initialize:function(){H=bi(Pe).create({errHandler:re,dashMetrics:he,mediaPlayerModel:we,requestModifier:ie,errors:Ie}),ve.on(_.Z.FRAGMENT_LOADING_STARTED,Ke,F),ve.on(_.Z.MANIFEST_LOADING_STARTED,Se,F),ve.on(_.Z.MANIFEST_LOADING_FINISHED,Le,F),ve.on(_.Z.THROUGHPUT_MEASUREMENT_STORED,Ae,F)}},O=(0,M.Z)(Pe).getInstance().getLogger(F),Be(),F}Hi.__dashjs_factory_name="ContentSteeringController";var Vi=U.Z.getSingletonFactory(Hi);function Er(){var F,O,j,V=this.context,W=(0,Ge.Z)(V).getInstance();return F={select:function(ee){if(!ee||ee.length===0)return null;var H=null;return W.get().streaming.applyContentSteering&&(H=function(re){var he=j.getCurrentSteeringResponseData();return he&&he.pathwayPriority&&he.pathwayPriority.length>0?function(){for(var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ie=0,_e=null,ve=function(){var Ve=we[ie],Pe=Te.findIndex(function(je){return je.serviceLocation&&je.serviceLocation===Ve});if(Pe!==-1&&!O.contains(Te[Pe].serviceLocation))return _e=Te[Pe],"break";ie+=1};ie<we.length&&ve()!=="break";);return _e}(he.pathwayPriority,re):null}(ee)),H||(H=function(re){return re[0]}(ee)),H},setConfig:function(ee){ee.blacklistController&&(O=ee.blacklistController),ee.contentSteeringController&&(j=ee.contentSteeringController)},reset:function(){O.reset()}},O=Gs(V).create({updateEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),j=Vi(V).getInstance(),F}Er.__dashjs_factory_name="LocationSelector";var Po=U.Z.getClassFactory(Er);function Ec(){var F,O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve=this.context,Pe=(0,m.Z)(Ve).getInstance(),je=(0,Tt.Z)(Ve).getInstance();function Ke(){j=NaN,H=!1,W=!0,ee=!1,Se()}function Se(){V!==null&&(clearTimeout(V),V=null)}function Le(Ce){Se(),ee||(isNaN(Ce)&&!isNaN(j)&&(Ce=1e3*j),isNaN(Ce)||(O.debug("Refresh manifest in "+Ce+" milliseconds."),V=setTimeout(le,Ce)))}function Ae(){var Ce=arguments.length>0&&arguments[0]!==void 0&&arguments[0];H=!0;var Be=he.getValue(),xe=Be.url,me=null,Me=Te.getPatchLocation(Be),ze=we.select(Me),mt=null;if(ze&&!Ce)xe=ze.url,me=ze.serviceLocation,mt=ze.queryParams;else{var lt=Ze(Be),vt=we.select(lt);vt&&(xe=vt.url,me=vt.serviceLocation,mt=vt.queryParams)}je.isRelative(xe)&&(xe=je.resolve(xe,Be.url)),re.load(xe,me,mt)}function Ze(Ce){var Be=Te.getLocation(Ce),xe=_e.getSynthesizedLocationElements(Be);return Be.concat(xe)}function q(Ce){if(Ce){if(Te.getIsPatch(Ce)){var Be=Ce;Ce=he.getValue();var xe=Te.isPatchValid(Ce,Be),me=xe;if(xe){var Me=Te.getPublishTime(Ce);me=Te.applyPatchToManifest(Ce,Be);var ze=Te.getPublishTime(Ce);me=Me.getTime()!=ze.getTime()}if(!me)return O.debug("Patch provided is invalid, performing full manifest refresh"),void Ae(!0);Ce.loadedTime=new Date}}else(Ce=he.getValue()).loadedTime=new Date;if(he.getValue()&&he.getValue().type===y.Z.DYNAMIC&&Ce.type===y.Z.STATIC)return Pe.trigger(T.Z.DYNAMIC_TO_STATIC),H=!1,void(ee=!0);he.setValue(Ce);var mt=new Date,lt=(mt.getTime()-Ce.loadedTime.getTime())/1e3;1e3*(j=Te.getManifestUpdatePeriod(Ce,lt))>2147483647&&(j=2147483647e-3),Pe.trigger(T.Z.MANIFEST_UPDATED,{manifest:Ce}),O.info("Manifest has been refreshed at "+mt+"["+mt.getTime()/1e3+"] "),W||Le()}function le(){W||(H?Le(ve.get().streaming.manifestUpdateRetryInterval):Ae())}function ae(Ce){Ce.error?Ce.error.code===Ie.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ie.error(Ce.error):q(Ce.manifest)}function ue(){W=!1,Le()}function te(){(W=!ve.get().streaming.scheduling.scheduleWhilePaused)&&Se()}function De(){H=!1}return F={initialize:function(){Ke(),Pe.on(T.Z.STREAMS_COMPOSED,De,this),Pe.on(_.Z.PLAYBACK_STARTED,ue,this),Pe.on(_.Z.PLAYBACK_PAUSED,te,this),Pe.on(T.Z.INTERNAL_MANIFEST_LOADED,ae,this)},setManifest:function(Ce){q(Ce)},refreshManifest:Ae,getIsUpdating:function(){return H},setConfig:function(Ce){Ce&&(Ce.manifestModel&&(he=Ce.manifestModel),Ce.adapter&&(Te=Ce.adapter),Ce.manifestLoader&&(re=Ce.manifestLoader),Ce.errHandler&&(ie=Ce.errHandler),Ce.locationSelector&&(we=Ce.locationSelector),Ce.settings&&(ve=Ce.settings),Ce.contentSteeringController&&(_e=Ce.contentSteeringController))},reset:function(){Pe.off(_.Z.PLAYBACK_STARTED,ue,this),Pe.off(_.Z.PLAYBACK_PAUSED,te,this),Pe.off(T.Z.STREAMS_COMPOSED,De,this),Pe.off(T.Z.INTERNAL_MANIFEST_LOADED,ae,this),Ke()}},O=(0,M.Z)(Ve).getInstance().getLogger(F),we=Po(Ve).create(),F}Ec.__dashjs_factory_name="ManifestUpdater";var za=U.Z.getClassFactory(Ec);function Ts(){var F,O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve,Pe,je=this.context,Ke=(0,m.Z)(je).getInstance(),Se=(0,Tt.Z)(je).getInstance();function Le(){re=[],he=[],we=null,Te=null,_e=null,ie=NaN,j=!1,V=!1,ve=W.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Ae(){W.get().streaming.utcSynchronization.enabled&&!j&&!V&&_e&&_e.value&&_e.schemeIdUri&&!isNaN(ie)&&!isNaN(W.get().streaming.utcSynchronization.backgroundAttempts)&&(Te&&(Date.now()-Te)/1e3<30||(re=[],V=!0,Ze(isNaN(W.get().streaming.utcSynchronization.backgroundAttempts)?2:W.get().streaming.utcSynchronization.backgroundAttempts)))}function Ze(vt){try{if(vt<=0)return void mt();var pt=Date.now();ee[_e.schemeIdUri](_e.value,function(qt){var Gt=Date.now(),Bt=le(pt,Gt,qt);re.push(Bt),Ze(vt-1)},function(){mt()})}catch(qt){mt()}}function q(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,pt=vt||0;if(!he||he.length===0||pt>=he.length)ae();else{var qt=he[pt];if(qt)if(ee.hasOwnProperty(qt.schemeIdUri)){var Gt=new Date().getTime();ee[qt.schemeIdUri](qt.value,function(Bt){var jt=new Date().getTime(),xn=le(Gt,jt,Bt);_e=qt,ae(xn)},function(){q(pt+1)})}else q(pt+1);else ae()}}function le(vt,pt,qt){return qt-(pt-(pt-vt)/2)}function ae(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,pt=isNaN(vt);pt&&W.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?Me():ze(pt,vt)}function ue(vt){var pt=Date.parse(vt);return isNaN(pt)&&(pt=function(qt){var Gt,Bt,jt=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(qt);return Gt=Date.UTC(parseInt(jt[1],10),parseInt(jt[2],10)-1,parseInt(jt[3],10),parseInt(jt[4],10),parseInt(jt[5],10),jt[6]&&(parseInt(jt[6],10)||0),jt[7]&&1e3*parseFloat(jt[7])||0),jt[9]&&jt[10]&&(Bt=60*parseInt(jt[9],10)+parseInt(jt[10],10),Gt+=(jt[8]==="+"?-1:1)*Bt*60*1e3),new Date(Gt).getTime()}(vt)),pt}function te(vt){return Date.parse(vt)}function De(vt){return Date.parse(vt)}function Ce(vt,pt,qt){qt()}function Be(vt,pt,qt){var Gt=ue(vt);isNaN(Gt)?qt():pt(Gt)}function xe(vt,pt,qt,Gt,Bt){var jt,xn,it=!1,_t=new XMLHttpRequest,Xt=Bt?at.w.HEAD:at.w.GET,Dt=pt.match(/\S+/g);if(pt=Dt.shift(),jt=function(){it||(it=!0,Dt.length?xe(vt,Dt.join(" "),qt,Gt,Bt):Gt())},xn=function(){var an,Qt;_t.status===200&&(an=Bt?_t.getResponseHeader("Date"):_t.response,Qt=vt(an),isNaN(Qt)||(qt(Qt),it=!0))},Se.isRelative(pt)){var un=Pe.resolve();un&&(pt=Se.resolve(pt,un.url))}_t.open(Xt,pt),_t.timeout=5e3,_t.onload=xn,_t.onloadend=jt,_t.send()}function me(vt,pt,qt){xe(De,vt,pt,qt,!0)}function Me(){var vt=H.getLatestMPDRequestHeaderValueByID("Date"),pt=vt!==null?new Date(vt).getTime():Number.NaN;isNaN(pt)?ze(!0):ze(!1,pt-Date.now())}function ze(vt,pt){if(isNaN(ie)||isNaN(pt)||vt||function(Gt){try{var Bt,jt=lt(Gt),xn=isNaN(ve)?30:ve,it=isNaN(W.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:W.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,_t=isNaN(W.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:W.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Xt=isNaN(W.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:W.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;jt?(Bt=Math.min(xn*it,_t),O.debug("Increasing timeBetweenSyncAttempts to ".concat(Bt))):(Bt=Math.max(xn/it,Xt),O.debug("Decreasing timeBetweenSyncAttempts to ".concat(Bt))),ve=Bt}catch(Dt){}}(pt),!vt&&!isNaN(pt)){we=Date.now(),j=!1;var qt=isNaN(ie);ie=pt,qt&&Ae(),O.debug("Completed UTC sync. Setting client - server offset to ".concat(pt))}vt&&(_e=null,j=!1,Ve.error(new ce.Z(Ie.TIME_SYNC_FAILED_ERROR_CODE,Ie.TIME_SYNC_FAILED_ERROR_MESSAGE))),Ke.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:pt}),Ke.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED)}function mt(){if(re&&re.length!==0){var vt=re.reduce(function(pt,qt){return pt+qt},0)/re.length;lt(vt)?O.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(O.debug("Completed background UTC sync. Setting client - server offset to ".concat(vt)),ie=vt,Ke.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ie})),V=!1,Te=Date.now()}}function lt(vt){try{if(isNaN(ie))return!0;var pt=W.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(W.get().streaming.utcSynchronization.maximumAllowedDrift)?W.get().streaming.utcSynchronization.maximumAllowedDrift:100;return vt>=ie-pt&&vt<=ie+pt}catch(qt){return!0}}return F={initialize:function(){Le(),ee={"urn:mpeg:dash:utc:http-head:2014":me,"urn:mpeg:dash:utc:http-xsdate:2014":xe.bind(null,ue),"urn:mpeg:dash:utc:http-iso:2014":xe.bind(null,te),"urn:mpeg:dash:utc:direct:2014":Be,"urn:mpeg:dash:utc:http-head:2012":me,"urn:mpeg:dash:utc:http-xsdate:2012":xe.bind(null,ue),"urn:mpeg:dash:utc:http-iso:2012":xe.bind(null,te),"urn:mpeg:dash:utc:direct:2012":Be,"urn:mpeg:dash:utc:http-ntp:2014":Ce,"urn:mpeg:dash:utc:ntp:2014":Ce,"urn:mpeg:dash:utc:sntp:2014":Ce}},attemptSync:function(vt,pt){he=vt,j||(function(qt){try{if(!qt||!W.get().streaming.utcSynchronization.enabled)return!1;var Gt=isNaN(ve)?30:ve;return!(we&&Gt&&!isNaN(Gt))||(Date.now()-we)/1e3>=Gt}catch(Bt){return!0}}(pt)?(j=!0,q()):Ke.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(vt){vt&&(vt.dashMetrics&&(H=vt.dashMetrics),vt.baseURLController&&(Pe=vt.baseURLController),vt.errHandler&&(Ve=vt.errHandler),vt.settings&&(W=vt.settings))},reset:function(){Le(),Ke.off(T.Z.ATTEMPT_BACKGROUND_SYNC,Ae,F)}},O=(0,M.Z)(je).getInstance().getLogger(F),Ke.on(T.Z.ATTEMPT_BACKGROUND_SYNC,Ae,F),F}Ts.__dashjs_factory_name="TimeSyncController";var ba=U.Z.getSingletonFactory(Ts);ba.HTTP_TIMEOUT_MS=5e3,U.Z.updateSingletonFactory(Ts.__dashjs_factory_name,ba);var Ef=ba;function _c(){var F,O,j,V,W,ee=this.context,H=(0,m.Z)(ee).getInstance();return F={attachMediaSource:function(re){var he=window.URL.createObjectURL(O);return re.setSource(he),V==="managedMediaSource"&&(re.setDisableRemotePlayback(!0),O.addEventListener("startstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),O.addEventListener("endstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),he},createMediaSource:function(){var re="WebKitMediaSource"in window,he="MediaSource"in window;return"ManagedMediaSource"in window?(O=new ManagedMediaSource,V="managedMediaSource",W.info("Created ManagedMediaSource")):he?(O=new MediaSource,V="mediaSource",W.info("Created MediaSource")):re&&(O=new WebKitMediaSource,W.info("Created WebkitMediaSource")),O},detachMediaSource:function(re){re.setSource(null)},setConfig:function(re){re&&re.settings&&(j=re.settings)},setDuration:function re(he){O&&O.readyState==="open"&&(he===null&&isNaN(he)||O.duration!==he&&(he!==1/0||j.get().streaming.buffer.mediaSourceDurationInfinity||(he=Math.pow(2,32)),function(we){for(var Te=we.sourceBuffers,ie=0;ie<Te.length;ie++)if(Te[ie].updating)return!0;return!1}(O)?setTimeout(re.bind(null,he),50):(W.info("Set MediaSource duration:"+he),O.duration=he)))},setSeekable:function(re,he){O&&typeof O.setLiveSeekableRange=="function"&&typeof O.clearLiveSeekableRange=="function"&&O.readyState==="open"&&re>=0&&re<he&&(O.clearLiveSeekableRange(),O.setLiveSeekableRange(re,he))},signalEndOfStream:function(re){if(re&&re.readyState==="open"){for(var he=re.sourceBuffers,we=0;we<he.length;we++)if(he[we].updating||he[we].buffered.length===0)return;W.info("call to mediaSource endOfStream"),re.endOfStream()}}},W=(0,M.Z)(ee).getInstance().getLogger(F),F}_c.__dashjs_factory_name="MediaSourceController";var Hs=U.Z.getSingletonFactory(_c);function lo(){var F,O,j,V,W,ee,H,re,he,we,Te,ie="urn:mpeg:dash:event:2012",_e="discarded",ve="updated",Ve="added",Pe=this.context,je=(0,m.Z)(Pe).getInstance();function Ke(){if(!H||!re)throw new Error("setConfig function has to be called previously")}function Se(){Te=!1,j={},V={},W=null,we=!1,ee=Date.now()/1e3}function Le(){try{if(!we){we=!0;var Ce=re.getTime(),Be=Ce-ee;Be=ee>0?Math.max(0,Be):0,Ae(V,Be,Ce),Ae(j,Be,Ce),Ze(V),Ze(j),ee=Ce,we=!1}}catch(xe){we=!1,O.error(xe)}}function Ae(Ce,Be,xe){try{ue(Ce,function(me){if(me!==void 0){var Me=isNaN(me.duration)?0:me.duration;me.calculatedPresentationTime<=xe&&me.calculatedPresentationTime+Be+Me>=xe?De(me,_.Z.EVENT_MODE_ON_START):(te(xe,Me+Be,me.calculatedPresentationTime)||function(ze){try{var mt=ze.eventStream.period.start+ze.eventStream.period.duration;return ze.calculatedPresentationTime>mt}catch(lt){return O.error(lt),!1}}(me))&&(O.debug("Removing event ".concat(me.id," from period ").concat(me.eventStream.period.id," as it is expired or invalid")),function(ze,mt){try{var lt=mt.eventStream.schemeIdUri,vt=mt.eventStream.period.id,pt=mt.eventStream.value,qt=mt.id;ze[vt][lt]=ze[vt][lt].filter(function(Gt){return pt&&Gt.eventStream.value&&Gt.eventStream.value!==pt||Gt.id!==qt}),ze[vt][lt].length===0&&delete ze[vt][lt]}catch(Gt){O.error(Gt)}}(Ce,me))}})}catch(me){O.error(me)}}function Ze(Ce){try{for(var Be in Ce)Ce.hasOwnProperty(Be)&&Object.keys(Ce[Be]).length===0&&delete Ce[Be]}catch(xe){O.error(xe)}}function q(Ce,Be){var xe=arguments.length>2&&arguments[2]!==void 0&&arguments[2],me=Ce.eventStream.schemeIdUri,Me=Ce.eventStream.value,ze=Ce.id,mt=_e;Be[me]||(Be[me]=[]);var lt=Be[me].findIndex(function(pt){return(!Me||pt.eventStream.value&&pt.eventStream.value===Me)&&pt.id===ze});if(lt===-1)Be[me].push(Ce),Ce.triggeredReceivedEvent=!1,Ce.triggeredStartEvent=!1,mt=Ve;else if(xe){var vt=Be[me][lt];Ce.triggeredReceivedEvent=vt.triggeredReceivedEvent,Ce.triggeredStartEvent=vt.triggeredStartEvent,Be[me][lt]=Ce,mt=ve}return mt}function le(Ce){try{if(Ce.eventStream.value==1){var Be,xe=Ce.calculatedPresentationTime;Be=Ce.calculatedPresentationTime==4294967295?NaN:Ce.calculatedPresentationTime+Ce.duration,je.trigger(_.Z.MANIFEST_VALIDITY_CHANGED,{id:Ce.id,validUntil:xe,newDuration:Be,newManifestValidAfter:NaN},{mode:_.Z.EVENT_MODE_ON_START})}}catch(me){O.error(me)}}function ae(Ce){try{var Be=re.getTime();ue(Ce,function(xe){var me=xe.eventStream&&xe.eventStream.period&&!isNaN(xe.eventStream.period.duration)?xe.eventStream.period.duration:NaN,Me=xe.eventStream&&xe.eventStream.period&&!isNaN(xe.eventStream.period.start)?xe.eventStream.period.start:NaN;if(!isNaN(me)&&!isNaN(Me)){var ze=xe.calculatedPresentationTime;Math.abs(ze-Be)<300&&De(xe,_.Z.EVENT_MODE_ON_START)}})}catch(xe){O.error(xe)}}function ue(Ce,Be){try{if(Ce)for(var xe=Object.keys(Ce),me=0;me<xe.length;me++)for(var Me=Ce[xe[me]],ze=Object.keys(Me),mt=0;mt<ze.length;mt++)Me[ze[mt]].forEach(function(lt){lt!==void 0&&Be(lt)})}catch(lt){O.error(lt)}}function te(Ce,Be,xe){try{return Ce-Be>xe}catch(me){return O.error(me),!1}}function De(Ce,Be){try{var xe=re.getTime(),me=Ce.id;if(Be===_.Z.EVENT_MODE_ON_RECEIVE&&!Ce.triggeredReceivedEvent)return O.debug("Received event ".concat(me)),Ce.triggeredReceivedEvent=!0,void je.trigger(Ce.eventStream.schemeIdUri,{event:Ce},{mode:Be});Ce.triggeredStartEvent||(Ce.eventStream.schemeIdUri===ie&&Ce.eventStream.value==1?Ce.duration===0&&Ce.presentationTimeDelta===0||(O.debug("Starting manifest refresh event ".concat(me," at ").concat(xe)),function(){try{Ke(),H.refreshManifest()}catch(Me){O.error(Me)}}()):Ce.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&Ce.eventStream.value==1?(O.debug("Starting callback event ".concat(me," at ").concat(xe)),function(Me){try{(0,cn.Z)(Pe).create({}).load({method:"get",url:Me,request:{responseType:"arraybuffer"}})}catch(ze){O.error(ze)}}(Ce.messageData)):(O.debug("Starting event ".concat(me," from period ").concat(Ce.eventStream.period.id," at ").concat(xe)),je.trigger(Ce.eventStream.schemeIdUri,{event:Ce},{mode:Be})),Ce.triggeredStartEvent=!0)}catch(Me){O.error(Me)}}return F={addInlineEvents:function(Ce,Be){try{if(Ke(),j[Be]||(j[Be]={}),Ce)for(var xe=0;xe<Ce.length;xe++){var me=Ce[xe];if(!te(re.getTime(),isNaN(me.duration)?0:me.duration,me.calculatedPresentationTime)){var Me=q(me,j[Be],!0);Me===Ve?(O.debug("Added inline event with id ".concat(me.id," from period ").concat(Be)),De(me,_.Z.EVENT_MODE_ON_RECEIVE)):Me===ve&&O.debug("Updated inline event with id ".concat(me.id," from period ").concat(Be))}}}catch(ze){throw ze}},addInbandEvents:function(Ce,Be){try{Ke(),V[Be]||(V[Be]={});for(var xe=0;xe<Ce.length;xe++){var me=Ce[xe];te(re.getTime(),isNaN(me.duration)?0:me.duration,me.calculatedPresentationTime)||(q(me,V[Be],!1)===Ve?(me.eventStream.schemeIdUri===ie&&le(me),O.debug("Added inband event with id ".concat(me.id," from period ").concat(Be)),De(me,_.Z.EVENT_MODE_ON_RECEIVE)):O.debug("Inband event with scheme_id_uri ".concat(me.eventStream.schemeIdUri,", value ").concat(me.eventStream.value,", period id ").concat(Be," and event id ").concat(me.id," was ignored because it has been added before.")))}Le()}catch(Me){throw Me}},getInbandEvents:function(){return V},getInlineEvents:function(){return j},start:function(){try{Ke(),O.debug("Start Event Controller");var Ce=he.get().streaming.eventControllerRefreshDelay;Te||isNaN(Ce)||(Te=!0,W=setInterval(Le,Ce))}catch(Be){throw Be}},setConfig:function(Ce){try{if(!Ce)return;Ce.manifestUpdater&&(H=Ce.manifestUpdater),Ce.playbackController&&(re=Ce.playbackController),Ce.settings&&(he=Ce.settings)}catch(Be){throw Be}},reset:function(){(function(){try{W!==null&&Te&&(clearInterval(W),W=null,Te=!1,function(){try{ae(V),ae(j)}catch(Ce){O.error(Ce)}}())}catch(Ce){throw Ce}})(),Se()}},O=(0,M.Z)(Pe).getInstance().getLogger(F),Se(),F}lo.__dashjs_factory_name="EventController";var _f=U.Z.getSingletonFactory(lo),Vs={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Ch(F,O){(O==null||O>F.length)&&(O=F.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=F[j];return V}function Tc(){var F,O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve,Pe,je,Ke,Se,Le,Ae,Ze,q,le,ae,ue,te,De,Ce,Be,xe,me,Me,ze,mt,lt,vt,pt,qt,Gt,Bt,jt,xn,it,_t,Xt,Dt,un,an=this.context,Qt=(0,m.Z)(an).getInstance();function Bn(){if(!(ee&&ee.hasOwnProperty("load")&&Ae&&Ae.hasOwnProperty("initialize")&&Ae.hasOwnProperty("reset")&&Ae.hasOwnProperty("getClientTimeOffset")&&H&&Le&&he&&Me))throw new Error(E.Z.MISSING_CONFIG_ERROR)}function kn(){if(!W||!W.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function mr(){(function(){try{var xt=re.getStreamsInfo();if(!q&&xt.length===0)throw new Error("There are no periods in the MPD");q&&xt.length>0&&he.updateManifestUpdateInfo({currentTime:Me.getTime(),buffered:me.getBufferRange(),presentationStartTime:xt[0].start,clientTimeOffset:Ae.getClientTimeOffset()}),Ze.length>0&&function(br){br.length!==0?Ze=Ze.filter(function(Sn){var or=br.filter(function(Jr){return Jr.id===Sn.getId()}).length>0||Sn.getId()===q.getId();return or||(O.debug("Removing stream ".concat(Sn.getId())),Sn.reset(!0)),or}):O.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(xt);for(var zt=[],Xn=0,Jn=xt.length;Xn<Jn;Xn++){var Tn=xt[Xn];zt.push(bt(Tn)),he.addManifestUpdateStreamInfo(Tn)}Promise.all(zt).then(function(){return new Promise(function(br,Sn){q?br():en(xt,br,Sn)})}).then(function(){Qt.trigger(T.Z.STREAMS_COMPOSED),Cn()}).catch(function(br){throw br})}catch(br){Le.error(new ce.Z(Ie.MANIFEST_ERROR_ID_NOSTREAMS_CODE,br.message+" nostreamscomposed",H.getValue())),Be=!0,ji()}})()}function vr(){_t=!0}function bt(xt){var zt=ql(xt.id);return zt?zt.updateData(xt):(zt=ei(an).create({manifestModel:H,mediaPlayerModel:mt,dashMetrics:he,manifestUpdater:W,adapter:re,timelineConverter:Ae,capabilities:j,capabilitiesFilter:V,errHandler:Le,baseURLController:_e,segmentBaseController:ve,textController:ae,abrController:Pe,playbackController:Me,eventController:Ke,mediaController:je,protectionController:le,videoModel:me,streamInfo:xt,settings:it}),Ze.push(zt),zt.initialize(),Promise.resolve())}function en(xt,zt,Xn){try{Dn();var Jn=he.getCurrentDVRInfo().range;if(Jn.end<Jn.start){Xt&&clearTimeout(Xt);var Tn=Math.min(1e3*(-1*(Jn.end-Jn.start)+2),2147483647);return O.debug("Waiting for ".concat(Tn," ms before playback can start")),Qt.trigger(T.Z.AST_IN_FUTURE,{delay:Tn}),void(Xt=setTimeout(function(){en(xt,zt,Xn)},Tn))}it.get().streaming.applyProducerReferenceTime&&ze.calculateProducerReferenceTimeOffsets(xt);var br=xt[0].manifestInfo;if(it.get().streaming.applyServiceDescription&&ze.applyServiceDescription(br),re.getIsDynamic()){var Sn=al(xt,br);Me.computeAndSetLiveDelay(Sn,br)}(it.get().streaming.applyContentSteering&&ie.shouldQueryBeforeStart()?ie.loadSteeringData():Promise.resolve()).then(function(){var or=H.getValue();or&&_e.update(or),Zt(),zt()}).catch(function(or){O.error(or),Zt(),zt()})}catch(or){Xn(or)}}function Zt(){var xt=function(){var Jn;if(re.getIsDynamic()){var Tn=he.getCurrentDVRInfo();Jn=(Tn&&Tn.range?Tn.range.end:0)-Me.getOriginalLiveDelay();var br=Tn?Tn.range:null;if(br){if(isNaN(Dt)&&Dt.toString().indexOf("posix:")===-1){var Sn=Lo(!0);isNaN(Sn)||(O.info("Start time from URI parameters: ".concat(Sn)),Jn=Math.min(Jn,Sn))}else{O.info("Start time provided by the app: ".concat(Dt));var or=zi(!0,Dt);isNaN(or)||(Jn=Math.min(Jn,or))}var Jr=it.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;Jn=Math.max(Jn,br.start+Jr)}}else if(Jn=Js()[0].getStreamInfo().start,isNaN(Dt)){var eu=Lo(!1);isNaN(eu)||(O.info("Start time from URI parameters: ".concat(eu)),Jn=Math.max(Jn,eu))}else{O.info("Start time provided by the app: ".concat(Dt));var kr=zi(!1,Dt);isNaN(kr)||(Jn=Math.max(Jn,kr))}return Jn}(),zt=On(xt),Xn=zt!==null?zt:Ze[0];Qt.trigger(T.Z.INITIAL_STREAM_SWITCH,{startTime:xt}),mn(Xn,null,xt),Gt||(Gt=setInterval(function(){!De&&Me.getTimeToStreamEnd()<=0&&!Me.isSeeking()&&Qt.trigger(T.Z.PLAYBACK_ENDED,{isLast:ca().isLast})},200))}function mn(xt,zt,Xn){try{if(De||!xt||zt===xt&&xt.getIsActive())return;De=!0,Qt.trigger(T.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:zt?zt.getStreamInfo():null,toStreamInfo:xt.getStreamInfo()});var Jn=!1;q=xt,zt&&(Jn=Nn(xt,zt),zt.deactivate(Jn)),Xn=isNaN(Xn)?!Jn&&zt?xt.getStreamInfo().start:NaN:Xn,O.info("Switch to stream ".concat(xt.getId(),". Seektime is ").concat(Xn,", current playback time is ").concat(Me.getTime(),". Seamless period switch is set to ").concat(Jn)),jt=jt.filter(function(Tn){return Tn.getId()!==q.getId()}),Me.initialize(ca(),!!zt),me.getElement()?bn(Xn,Jn,!1):Zn(Xn,Jn)}catch(Tn){De=!1}}function bn(xt,zt){var Xn,Jn=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function Tn(){if(xe&&xe.readyState==="open"){O.debug("MediaSource is open!"),window.URL.revokeObjectURL(Xn),xe.removeEventListener("sourceopen",Tn),xe.removeEventListener("webkitsourceopen",Tn),Xr();var Sn=he.getCurrentDVRInfo();we.setSeekable(Sn.range.start,Sn.range.end),Jn?(isNaN(xt)||Me.seek(xt,!0,!0),q.setMediaSource(xe).then(function(){q.initializeForTextWithMediaSource(xe)})):Zn(xt,zt)}}function br(){xe.addEventListener("sourceopen",Tn,!1),xe.addEventListener("webkitsourceopen",Tn,!1),Xn=we.attachMediaSource(me),O.debug("MediaSource attached to element.  Waiting on open...")}xe?zt?Zn(xt,zt):(we.detachMediaSource(me),br()):(xe=we.createMediaSource(),br())}function Zn(xt,zt){q.activate(xe,zt?Bt:void 0,xt).then(function(Xn){if(Xn){var Jn=Object.keys(Xn);Jn.length>0&&Xn[Jn[0]].getBuffer().changeType&&(xn=!0),Bt=Xn}isNaN(xt)||(Qt.trigger(T.Z.SEEK_TARGET,{time:xt},{streamId:q.getId()}),Me.seek(xt,!1,!0),q.startScheduleControllers()),De=!1,Qt.trigger(T.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:ca()})})}function Fn(xt){var zt=On(xt.seekTime);zt&&zt!==q?zt&&zt!==q&&(qn(),function(Xn,Jn){var Tn=Xn&&!isNaN(Xn.seekTime)?Xn.seekTime:NaN,br=q.getProcessors().map(function(Sn){return Sn.prepareOuterPeriodPlaybackSeeking(Xn)});Promise.all(br).then(function(){mn(Jn,q,Tn)}).catch(function(Sn){Le.error(Sn)})}(xt,zt)):(qn(),function(Xn){q.getProcessors().forEach(function(Jn){return Jn.prepareInnerPeriodPlaybackSeeking(Xn)}),To(tt.USER_REQUEST_STOP_REASON)}(xt)),Xa(ot.SEEK_START_REASON)}function qn(){Yn()}function Yn(){jt&&jt.length>0&&(jt.forEach(function(xt){xt.deactivate(!0)}),jt=[])}function Jt(xt){if(xt.newMediaInfo.streamInfo.id===q.getId()){if(Yn(),it.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&xt.oldMediaInfo&&xt.oldMediaInfo.codec!==xt.newMediaInfo.codec){var zt=Me.getTime();return q.deactivate(!1),void bn(zt,!1,!1)}q.prepareTrackChange(xt)}}function Nn(xt,zt){try{return it.get().streaming.buffer.reuseExistingSourceBuffers&&(zt.isProtectionCompatible(xt)||_t)&&(xn&&it.get().streaming.buffer.useChangeTypeForTrackSwitch||zt.isMediaCodecCompatible(xt,zt))}catch(Xn){return!1}}function Pn(xt){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(xe&&!xt.getPreloaded()){var Xn=Nn(xt,zt);Xn&&xt.startPreloading(xe,Bt).then(function(){jt.push(xt)})}}function On(xt){if(isNaN(xt))return null;for(var zt=Ze.length,Xn=0;Xn<zt;Xn++){var Jn=Ze[Xn];if(xt<parseFloat((Jn.getStartTime()+Jn.getDuration()).toFixed(5)))return Jn}return null}function Dn(){try{var xt=re.getIsDynamic(),zt=re.getStreamsInfo()[0].manifestInfo,Xn=Me.getTime(),Jn=Ae.calcTimeShiftBufferWindow(Ze,xt),Tn=oi();if(Jn.start===void 0||Jn.end===void 0)return;Tn&&Tn.length!==0?Tn.forEach(function(br){he.addDVRInfo(br.getType(),Xn,zt,Jn)}):he.addDVRInfo(E.Z.VIDEO,Xn,zt,Jn)}catch(br){}}function Ct(xt){if(pt&&te){var zt=mt.getInitialBufferLevel(),Xn=[E.Z.TEXT];(isNaN(zt)||zt<=Me.getBufferLevel(Xn)||re.getIsDynamic()&&zt>Me.getLiveDelay())&&(pt=!1,Xa(ot.INITIAL_PLAYOUT_START_REASON),Me.play())}xt&&xt.mediaType&&he.addBufferLevel(xt.mediaType,new Date,1e3*xt.bufferLevel)}function Qe(xt){xt.streamInfo.id===q.getId()&&xt.reason&&xt.reason.forceReplace&&Yn(),ql(xt.streamInfo.id).prepareQualityChange(xt)}function Vt(){if(re.getIsDynamic()&&Me.getOriginalLiveDelay()!==0&&q){var xt=re.getStreamsInfo();if(xt.length>0){var zt=xt[0].manifestInfo,Xn=al(xt,zt);Me.computeAndSetLiveDelay(Xn,zt)}}}function qe(){if(ko()){var xt=me.getPlaybackQuality();xt&&he.addDroppedFrames(xt)}}function Je(){O.debug("[onPlaybackStarted]"),!pt&&vt&&Xa(ot.RESUME_FROM_PAUSE_START_REASON),pt&&(pt=!1),qt&&(qt=!1,it.get().streaming.applyContentSteering&&!ie.shouldQueryBeforeStart()&&ie.loadSteeringData()),vt=!1}function Ot(xt){O.debug("[onPlaybackPaused]"),xt.ended||(vt=!0,To(tt.USER_REQUEST_STOP_REASON))}function yn(xt){O.debug("Stream with id ".concat(xt.streamInfo.id," finished buffering"));var zt=xt.streamInfo.isLast;xe&&zt?(O.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),we.signalEndOfStream(xe)):Cn()}function Cn(){if(q&&q.getHasFinishedBuffering())for(var xt=function(){var Tn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var br=Tn||q||null;if(br){var Sn=br.getStreamInfo();return Ze.filter(function(or){var Jr=or.getStreamInfo();return Jr.start>Sn.start&&Sn.id!==Jr.id})}}catch(or){return[]}}(q),zt=0;zt<xt.length;){var Xn=xt[zt],Jn=zt===0?q:xt[zt-1];!Xn.getPreloaded()&&Jn.getHasFinishedBuffering()&&xe&&Pn(Xn,Jn),zt+=1}}function yr(){Gt&&(clearInterval(Gt),Gt=null)}function oi(){return q?q.getProcessors():[]}function gi(xt){if(q&&!q.getIsEndedEventSignaled()){q.setIsEndedEventSignaled(!0);var zt=function(){var Xn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Jn=Xn||q||null;if(!Jn)return null;for(var Tn=Jn.getStreamInfo(),br=Tn.start,Sn=0,or=-1,Jr=NaN;Sn<Ze.length;){var eu=Ze[Sn].getStreamInfo(),kr=eu.start-br;kr>0&&(isNaN(Jr)||kr<Jr)&&Tn.id!==eu.id&&(Jr=kr,or=Sn),Sn+=1}return or>=0?Ze[or]:null}();zt?(O.debug("StreamController onEnded, found next stream with id ".concat(zt.getStreamInfo().id,". Switching from ").concat(q.getStreamInfo().id," to ").concat(zt.getStreamInfo().id)),mn(zt,q,NaN)):(O.debug("StreamController no next stream found"),q.setIsEndedEventSignaled(!1)),To(zt?tt.END_OF_PERIOD_STOP_REASON:tt.END_OF_CONTENT_STOP_REASON)}xt&&xt.isLast&&(yr(),ie.stopSteeringRequestTimer())}function Xr(xt){var zt=xt||ca().manifestInfo.duration;we.setDuration(zt)}function Lo(xt){var zt=Ve.getURIFragmentData();if(!zt||!zt.t)return NaN;var Xn=Js()[0].getStreamInfo().start;return zt.t=zt.t.split(",")[0],Cs(xt,zt.t,Xn)}function zi(xt,zt){var Xn=0;return xt||(Xn=Js()[0].getStreamInfo().start),Cs(xt,zt,Xn)}function Cs(xt,zt,Xn){var Jn=re.getRegularPeriods()[0],Tn=zt.toString(),br=Tn.indexOf("posix:")!==-1?Tn.substring(6)==="now"?Date.now()/1e3:parseFloat(Tn.substring(6)):NaN;return xt&&!isNaN(br)?Ae.calcPresentationTimeFromWallTime(new Date(1e3*br),Jn):parseFloat(Tn)+Xn}function al(xt,zt){try{var Xn=NaN;if(zt&&!isNaN(zt.maxFragmentDuration)&&isFinite(zt.maxFragmentDuration))return zt.maxFragmentDuration;if(xt&&xt.length===1){var Jn=xt[0],Tn=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT].reduce(function(Sn,or){var Jr=re.getMediaInfoForType(Jn,or);return Jr&&Jr.isFragmented!==!1&&Sn.push(Jr),Sn},[]).reduce(function(Sn,or){var Jr=re.getVoRepresentations(or);return Jr&&Jr.length>0&&Jr.forEach(function(eu){eu&&Sn.push(eu)}),Sn},[]).reduce(function(Sn,or){var Jr=re.convertRepresentationToRepresentationInfo(or);return Jr&&Jr.fragmentDuration&&!isNaN(Jr.fragmentDuration)&&Sn.push(Jr.fragmentDuration),Sn},[]);Xn=Math.max.apply(Math,function(Sn){if(Array.isArray(Sn))return Ch(Sn)}(br=Tn)||function(Sn){if(typeof Symbol<"u"&&Symbol.iterator in Object(Sn))return Array.from(Sn)}(br)||function(Sn,or){if(Sn){if(typeof Sn=="string")return Ch(Sn,or);var Jr=Object.prototype.toString.call(Sn).slice(8,-1);return Jr==="Object"&&Sn.constructor&&(Jr=Sn.constructor.name),Jr==="Map"||Jr==="Set"?Array.from(Sn):Jr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Jr)?Ch(Sn,or):void 0}}(br)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(Xn)?Xn:NaN}catch(Sn){return NaN}var br}function la(xt){if(xt.error)Be=!0,ji();else{O.info("Manifest updated... updating data system wide.");var zt=xt.manifest;re.updatePeriods(zt);var Xn=re.getUTCTimingSources();!re.getIsDynamic()||Xn&&Xn.length!==0||Qt.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Vs.LEVELS.WARNING,event:Vs.EVENTS.NO_UTC_TIMING_ELEMENT});var Jn=re.getIsDynamic()?Xn.concat(lt.getUTCTimingSources()):Xn;V.filterUnsupportedFeatures(zt).then(function(){_e.initialize(zt),Te.attemptSync(Jn,re.getIsDynamic())})}}function ko(){return!!q&&q.getHasVideoTrack()}function Rs(){return!!q&&q.getHasAudioTrack()}function To(xt,zt){zt=zt||new Date,oi().forEach(function(Xn){Xn.finalisePlayList(zt,xt)}),he.addPlayList()}function Xa(xt){he.createPlaylistMetrics(1e3*Me.getTime(),xt)}function Ru(xt){if(xt.error){var zt="";switch(xt.error.code){case 1:zt="MEDIA_ERR_ABORTED";break;case 2:zt="MEDIA_ERR_NETWORK";break;case 3:zt="MEDIA_ERR_DECODE",un.counts.mediaErrorDecode+=1;break;case 4:zt="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:zt="MEDIA_ERR_ENCRYPTED";break;default:zt="UNKNOWN"}zt==="MEDIA_ERR_DECODE"&&it.get().errors.recoverAttempts.mediaErrorDecode>=un.counts.mediaErrorDecode?function(){O.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Xn=Me.getTime();q.deactivate(!1),O.warn("MediaSource has been resetted. Resuming playback from time ".concat(Xn)),bn(Xn,!1,!1)}():(Ce=!0,xt.error.message&&(zt+=" ("+xt.error.message+")"),xt.error.msExtendedCode&&(zt+=" (0x"+(xt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),O.fatal("Video Element Error: "+zt),xt.error&&O.fatal(xt.error),Le.error(new ce.Z(xt.error.code,zt)),ji())}}function ca(){return q?q.getStreamInfo():null}function ql(xt){for(var zt=0,Xn=Ze.length;zt<Xn;zt++)if(Ze[zt].getId()===xt)return Ze[zt];return null}function Qf(xt){isNaN(xt.newDuration)||Xr(xt.newDuration)}function xu(){Ze=[],Dt=NaN,le=null,De=!1,q=null,Ce=!1,Be=!1,pt=!0,qt=!0,vt=!1,te=!0,Gt=null,_t=!1,xn=!1,jt=[],Xt=null,un={counts:{mediaErrorDecode:0}}}function ji(){Bn(),Te.reset(),To(Ce||Be?tt.FAILURE_STOP_REASON:tt.USER_REQUEST_STOP_REASON);for(var xt=0,zt=Ze?Ze.length:0;xt<zt;xt++)Ze[xt].reset(Ce);Qt.off(_.Z.PLAYBACK_TIME_UPDATED,qe,F),Qt.off(_.Z.PLAYBACK_SEEKING,Fn,F),Qt.off(_.Z.PLAYBACK_ERROR,Ru,F),Qt.off(_.Z.PLAYBACK_STARTED,Je,F),Qt.off(_.Z.PLAYBACK_PAUSED,Ot,F),Qt.off(_.Z.PLAYBACK_ENDED,gi,F),Qt.off(_.Z.METRIC_ADDED,Na,F),Qt.off(_.Z.MANIFEST_VALIDITY_CHANGED,Qf,F),Qt.off(_.Z.BUFFER_LEVEL_UPDATED,Ct,F),Qt.off(_.Z.QUALITY_CHANGE_REQUESTED,Qe,F),T.Z.KEY_SESSION_UPDATED&&Qt.off(T.Z.KEY_SESSION_UPDATED,vr,F),Qt.off(T.Z.MANIFEST_UPDATED,la,F),Qt.off(T.Z.STREAM_BUFFERING_COMPLETED,yn,F),Qt.off(T.Z.TIME_SYNCHRONIZATION_COMPLETED,mr,F),Qt.off(T.Z.CURRENT_TRACK_CHANGED,Jt,F),Qt.off(T.Z.SETTING_UPDATED_LIVE_DELAY,Vt,F),Qt.off(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Vt,F),_e.reset(),W.reset(),Ke.reset(),he.clearAllCurrentMetrics(),H.setValue(null),ee.reset(),Ae.reset(),Se.reset(),xe&&(we.detachMediaSource(me),xe=null),me=null,le&&(le=null,ue=null,H.getValue()&&Qt.trigger(T.Z.PROTECTION_DESTROYED,{data:H.getValue().url})),yr(),Qt.trigger(T.Z.STREAM_TEARDOWN_COMPLETE),xu()}function Na(xt){if(xt.metric===P.Z.DVR_INFO){var zt=Rs()?E.Z.AUDIO:E.Z.VIDEO;xt.mediaType===zt&&we.setSeekable(xt.value.range.start,xt.value.range.end)}}function Js(){return Ze}return F={initialize:function(xt,zt){Bn(),te=xt,ue=zt,Ae.initialize(),(W=za(an).create()).setConfig({manifestModel:H,adapter:re,manifestLoader:ee,errHandler:Le,settings:it,contentSteeringController:ie}),W.initialize(),(Ke=_f(an).getInstance()).setConfig({manifestUpdater:W,playbackController:Me,settings:it}),Ke.start(),Te.setConfig({dashMetrics:he,baseURLController:_e,errHandler:Le,settings:it}),Te.initialize(),we.setConfig({settings:it}),le&&(Qt.trigger(T.Z.PROTECTION_CREATED,{controller:le}),le.setMediaElement(me.getElement()),ue&&le.setProtectionData(ue)),Qt.on(_.Z.PLAYBACK_TIME_UPDATED,qe,F),Qt.on(_.Z.PLAYBACK_SEEKING,Fn,F),Qt.on(_.Z.PLAYBACK_ERROR,Ru,F),Qt.on(_.Z.PLAYBACK_STARTED,Je,F),Qt.on(_.Z.PLAYBACK_PAUSED,Ot,F),Qt.on(_.Z.PLAYBACK_ENDED,gi,F),Qt.on(_.Z.METRIC_ADDED,Na,F),Qt.on(_.Z.MANIFEST_VALIDITY_CHANGED,Qf,F),Qt.on(_.Z.BUFFER_LEVEL_UPDATED,Ct,F),Qt.on(_.Z.QUALITY_CHANGE_REQUESTED,Qe,F),T.Z.KEY_SESSION_UPDATED&&Qt.on(T.Z.KEY_SESSION_UPDATED,vr,F),Qt.on(T.Z.MANIFEST_UPDATED,la,F),Qt.on(T.Z.STREAM_BUFFERING_COMPLETED,yn,F),Qt.on(T.Z.TIME_SYNCHRONIZATION_COMPLETED,mr,F),Qt.on(T.Z.CURRENT_TRACK_CHANGED,Jt,F),Qt.on(T.Z.SETTING_UPDATED_LIVE_DELAY,Vt,F),Qt.on(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Vt,F)},getActiveStreamInfo:ca,addDVRMetric:Dn,hasVideoTrack:ko,hasAudioTrack:Rs,getStreamById:ql,getStreamForTime:On,getTimeRelativeToStreamId:function(xt,zt){for(var Xn=null,Jn=0,Tn=0,br=null,Sn=0;Sn<Ze.length;Sn++){if(Tn=(Xn=Ze[Sn]).getStartTime(),br=Xn.getDuration(),Number.isFinite(Tn)&&(Jn=Tn),Xn.getId()===zt)return xt-Jn;Number.isFinite(br)&&(Jn+=br)}return null},load:function(xt){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Bn(),Dt=zt,ee.load(xt)},loadWithManifest:function(xt){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;kn(),Dt=zt,W.setManifest(xt)},getActiveStreamProcessors:oi,setConfig:function(xt){xt&&(xt.capabilities&&(j=xt.capabilities),xt.capabilitiesFilter&&(V=xt.capabilitiesFilter),xt.manifestLoader&&(ee=xt.manifestLoader),xt.manifestModel&&(H=xt.manifestModel),xt.mediaPlayerModel&&(mt=xt.mediaPlayerModel),xt.customParametersModel&&(lt=xt.customParametersModel),xt.protectionController&&(le=xt.protectionController),xt.adapter&&(re=xt.adapter),xt.dashMetrics&&(he=xt.dashMetrics),xt.errHandler&&(Le=xt.errHandler),xt.timelineConverter&&(Ae=xt.timelineConverter),xt.videoModel&&(me=xt.videoModel),xt.playbackController&&(Me=xt.playbackController),xt.serviceDescriptionController&&(ze=xt.serviceDescriptionController),xt.contentSteeringController&&(ie=xt.contentSteeringController),xt.textController&&(ae=xt.textController),xt.abrController&&(Pe=xt.abrController),xt.mediaController&&(je=xt.mediaController),xt.settings&&(it=xt.settings),xt.baseURLController&&(_e=xt.baseURLController),xt.uriFragmentModel&&(Ve=xt.uriFragmentModel),xt.segmentBaseController&&(ve=xt.segmentBaseController),xt.manifestUpdater&&(W=xt.manifestUpdater))},setProtectionData:function(xt){ue=xt,le&&le.setProtectionData(ue)},getIsStreamSwitchInProgress:function(){return De},switchToVideoElement:function(xt){q&&(Me.initialize(ca()),bn(xt,!1,!0))},getHasMediaOrInitialisationError:function(){return Ce||Be},getStreams:Js,getActiveStream:function(){return q},getInitialPlayback:function(){return pt},getAutoPlay:function(){return te},refreshManifest:function(){W.getIsUpdating()||W.refreshManifest()},reset:ji},O=(0,M.Z)(an).getInstance().getLogger(F),Te=Ef(an).getInstance(),we=Hs(an).getInstance(),Se=et(an).getInstance(),xu(),F}Tc.__dashjs_factory_name="StreamController";var Rh=U.Z.getSingletonFactory(Tc);function xh(){var F,O,j,V,W,ee,H,re,he,we,Te,ie,_e=this.context,ve=(0,m.Z)(_e).getInstance();function Ve(){ie.debug("Stopping the gap controller"),W&&(clearInterval(W),W=null),function(){ve.off(T.Z.WALLCLOCK_TIME_UPDATED,Le,this),ve.off(T.Z.INITIAL_STREAM_SWITCH,Se,this),ve.off(T.Z.PLAYBACK_SEEKING,Pe,this),ve.off(T.Z.BUFFER_REPLACEMENT_STARTED,je,F),ve.off(T.Z.TRACK_CHANGE_RENDERED,Ke,F)}(),W=null,ee=NaN,V=0,we=null,Te={}}function Pe(){we&&(clearTimeout(we),we=null)}function je(ue){try{if(ue.streamId!==re.getActiveStreamInfo().id||ue.mediaType!==E.Z.VIDEO&&ue.mediaType!==E.Z.AUDIO)return;ue.streamId===re.getActiveStreamInfo().id&&(Te[ue.mediaType]=!0)}catch(te){ie.error(te)}}function Ke(ue){ue&&ue.mediaType&&(Te[ue.mediaType]=!1)}function Se(){W||function(){try{W||(ie.debug("Starting the gap controller"),W=setInterval(function(){Ae()&&ae(H.getTime())},100))}catch(ue){}}()}function Le(){if(Ae(j.get().streaming.gaps.enableSeekFix)&&++V>=10){var ue=H.getTime();O===ue?ae(ue,!0):(O=ue,ee=NaN),V=0}}function Ae(){var ue=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!re.getActiveStream())return!1;var te=Object.keys(Te).some(function(Ce){return Te[Ce]}),De=!!ue&&Ze();return!te&&j.get().streaming.gaps.jumpGaps&&re.getActiveStreamProcessors().length>0&&(!H.isSeeking()||De)&&!H.isPaused()&&!re.getIsStreamSwitchInProgress()&&!re.getHasMediaOrInitialisationError()}function Ze(){var ue=re.getActiveStream(),te=parseFloat((ue.getStartTime()+ue.getDuration()).toFixed(5));return H.getTime()+j.get().streaming.gaps.threshold>=te}function q(ue,te){try{if(!ue||ue.length<=1&&te>0)return NaN;for(var De=NaN,Ce=0;isNaN(De)&&Ce<ue.length;){var Be=Ce>0?ue.end(Ce-1):0;te<ue.start(Ce)&&Be-te<j.get().streaming.gaps.threshold&&(De=Ce),Ce+=1}return De}catch(xe){return null}}function le(ue,te){for(var De=0,Ce=ue.length;De<Ce;De++)if(te>=ue.start(De)&&te<=ue.end(De))return!0;return!1}function ae(ue){var te,De=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Ce=j.get().streaming.gaps.enableStallFix,Be=j.get().streaming.gaps.stallSeek,xe=j.get().streaming.gaps.smallGapLimit,me=j.get().streaming.gaps.jumpLargeGaps,Me=he.getBufferRange(),ze=NaN,mt=!1;if(te=q(Me,ue),!isNaN(te)){var lt=Me.start(te),vt=lt-ue;vt>0&&(vt<=xe||me)&&(ze=lt)}var pt=H.getTimeToStreamEnd();if(isNaN(ze)&&De&&isFinite(pt)&&!isNaN(pt)&&pt<xe&&(ze=parseFloat(H.getStreamEndTime().toFixed(5)),mt=!0),Ce&&isNaN(ze)&&De&&isNaN(te)&&le(Me,ue)&&(Be===0?(ie.warn("Toggle play pause to break stall"),he.pause(),he.play()):(ie.warn("Jumping ".concat(Be,"s to break stall")),ze=ue+Be)),ze>0&&ee!==ze&&ze>ue&&!we){var qt=ze-ue;if(mt){var Gt=re.getStreamForTime(ze),Bt=Gt&&!!Gt.getPreloaded();ie.warn("Jumping to end of stream because of gap from ".concat(ue," to ").concat(ze,". Gap duration: ").concat(qt)),H.seek(ze,!0,Bt)}else{var jt=H.getIsDynamic(),xn=te>0?Me.end(te-1):ue,it=jt?1e3*Math.max(0,qt-.1):0;we=window.setTimeout(function(){H.seek(ze,!0,!0),ie.warn("Jumping gap occuring in period ".concat(re.getActiveStream().getStreamId()," starting at ").concat(xn," and ending at ").concat(ze,". Jumping by: ").concat(ze-xn)),we=null},it)}ee=ze}}return F={reset:Ve,setConfig:function(ue){ue&&(ue.settings&&(j=ue.settings),ue.playbackController&&(H=ue.playbackController),ue.streamController&&(re=ue.streamController),ue.videoModel&&(he=ue.videoModel))},initialize:function(){(function(){ve.on(T.Z.WALLCLOCK_TIME_UPDATED,Le,this),ve.on(T.Z.INITIAL_STREAM_SWITCH,Se,this),ve.on(T.Z.PLAYBACK_SEEKING,Pe,this),ve.on(T.Z.BUFFER_REPLACEMENT_STARTED,je,F),ve.on(T.Z.TRACK_CHANGE_RENDERED,Ke,F)})()}},ie=(0,M.Z)(_e).getInstance().getLogger(F),Ve(),F}xh.__dashjs_factory_name="GapController";var pm=U.Z.getSingletonFactory(xh);function Nh(){var F,O,j,V,W,ee,H,re,he,we,Te=this.context,ie=(0,m.Z)(Te).getInstance();function _e(){O=!1;var Ze=dn.Z.parseUserAgent();j=Ze&&Ze.browser&&Ze.browser.name&&Ze.browser.name.toLowerCase()==="safari"}function ve(){O=!1}function Ve(Ze){if(Ze.streamId===ee.getActiveStreamInfo().id&&he){var q=H.getLiveDelay();H.getBufferLevel()>q/2&&(he=!1)}}function Pe(Ze){Ze.streamId===ee.getActiveStreamInfo().id&&(he=Ze.state===P.Z.BUFFER_EMPTY)}function je(){re.getCatchupModeEnabled()||V.setPlaybackRate(1)}function Ke(){H.getIsDynamic()&&re.getCatchupModeEnabled()&&(re.getCatchupPlaybackRates().max>0||re.getCatchupPlaybackRates().min<0)&&!H.isPaused()&&!H.isSeeking()&&function(){try{return!(!H.getTime()>0||O)&&(Le()===E.Z.LIVE_CATCHUP_MODE_LOLP?function(Ze,q){try{return Math.abs(Se())>0||Ze<q}catch(le){return!1}}(H.getBufferLevel(),W.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(Se())>0}catch(Ze){return!1}}())}catch(Ze){return!1}}()&&function(){if(!O&&V){var Ze,q=V.getPlaybackRate(),le=re.getCatchupPlaybackRates(),ae=H.getBufferLevel(),ue=Se(),te=re.getCatchupMaxDrift();if(!isNaN(te)&&te>0&&ue>te)we.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),O=!0,H.seekToCurrentLive(!0,!1);else{var De=H.getCurrentLiveLatency(),Ce=H.getLiveDelay();Ze=Le()===E.Z.LIVE_CATCHUP_MODE_LOLP?function(xe,me,Me,ze,mt){var lt;if(mt<ze){var vt=Math.abs(xe.min),pt=5*(mt-ze);lt=1-vt+2*vt/(1+Math.pow(Math.E,-pt)),we.debug("[LoL+ playback control_buffer-based] bufferLevel: "+mt+", newRate: "+lt)}else{if(Math.abs(me-Me)<=.02*Me)lt=1;else{var qt=me-Me,Gt=qt<0?Math.abs(xe.min):xe.max,Bt=5*qt;lt=1-Gt+2*Gt/(1+Math.pow(Math.E,-Bt))}we.debug("[LoL+ playback control_latency-based] latency: "+me+", newRate: "+lt)}return lt}(le,De,Ce,W.get().streaming.liveCatchup.playbackBufferMin,ae):function(xe,me,Me,ze){if(he)return 1;var mt=me-Me,lt=mt<0?Math.abs(xe.min):xe.max,vt=5*mt,pt=1-lt+2*lt/(1+Math.pow(Math.E,-vt));return H.getPlaybackStalled()&&ze<=Me/2&&mt>0&&(pt=1),pt}(le,De,Ce,ae);var Be=j?.25:.02/(.5/le.max);Ze&&Math.abs(q-Ze)>=Be&&(we.debug("[CatchupController]: Setting playback rate to ".concat(Ze)),V.setPlaybackRate(Ze))}}}()}function Se(){return H.getCurrentLiveLatency()-H.getLiveDelay()}function Le(){var Ze=W.get().streaming.liveCatchup.playbackBufferMin;return W.get().streaming.liveCatchup.mode!==E.Z.LIVE_CATCHUP_MODE_LOLP||Ze===null||isNaN(Ze)?E.Z.LIVE_CATCHUP_MODE_DEFAULT:E.Z.LIVE_CATCHUP_MODE_LOLP}function Ae(){re.getCatchupPlaybackRates(!0)}return F={reset:function(){ie.off(_.Z.BUFFER_LEVEL_UPDATED,Ve,F),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Pe,F),ie.off(_.Z.PLAYBACK_PROGRESS,Ke,F),ie.off(_.Z.PLAYBACK_TIME_UPDATED,Ke,F),ie.off(_.Z.PLAYBACK_SEEKED,ve,F),ie.off(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,je,F),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ae,F),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ae,F),ie.off(_.Z.STREAM_INITIALIZED,Ae,F),_e(),V.setPlaybackRate(1,!0)},setConfig:function(Ze){Ze&&(Ze.settings&&(W=Ze.settings),Ze.videoModel&&(V=Ze.videoModel),Ze.streamController&&(ee=Ze.streamController),Ze.playbackController&&(H=Ze.playbackController),Ze.mediaPlayerModel&&(re=Ze.mediaPlayerModel))},initialize:function(){ie.on(_.Z.BUFFER_LEVEL_UPDATED,Ve,F),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Pe,F),ie.on(_.Z.PLAYBACK_PROGRESS,Ke,F),ie.on(_.Z.PLAYBACK_TIME_UPDATED,Ke,F),ie.on(_.Z.PLAYBACK_SEEKED,ve,F),ie.on(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,je,F),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ae,F),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ae,F),ie.on(_.Z.STREAM_INITIALIZED,Ae,F),Ae()}},we=(0,M.Z)(Te).getInstance().getLogger(F),_e(),F}Nh.__dashjs_factory_name="CatchupController";var Mh=U.Z.getSingletonFactory(Nh),Dh=[E.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],Tf="video",jr="audio";function Ph(){var F,O,j,V,W,ee=this.context;function H(){O={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},j=[]}function re(he,we,Te){try{O[he][we]=Te/1e3}catch(ie){V.error(ie)}}return F={getServiceDescriptionSettings:function(){return O},getProducerReferenceTimeOffsets:function(){return j},calculateProducerReferenceTimeOffsets:function(he){try{var we=[];if(he&&he.length>0){var Te=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT],ie=W.getAvailabilityStartTime()/1e3;he.forEach(function(_e){var ve=Te.reduce(function(Ve,Pe){return Ve.concat(W.getAllMediaInfoForType(_e,Pe))},[]).reduce(function(Ve,Pe){return W.getProducerReferenceTimes(_e,Pe).forEach(function(je){var Ke=W.getVoRepresentations(Pe);if(Ke&&Ke.length>0&&Ke[0].adaptation&&Ke[0].segmentInfoType===y.Z.SEGMENT_TEMPLATE){var Se=Ke[0],Le=new Date(je[y.Z.WALL_CLOCK_TIME]).getTime()/1e3-(je[y.Z.PRESENTATION_TIME]/Se[y.Z.TIMESCALE]-Se[y.Z.PRESENTATION_TIME_OFFSET]+_e.start),Ae=ie-Le;Ve.push({id:je[y.Z.ID],to:Ae})}}),Ve},[]);we=we.concat(ve)})}j=we}catch(_e){V.error(_e),j=[]}},applyServiceDescription:function(he){if(he&&he.serviceDescriptions){var we=he.serviceDescriptions.filter(function(_e){return Dh.includes(_e.schemeIdUri)}),Te=he.serviceDescriptions.filter(function(_e){return _e.schemeIdUri==null}),ie=we.length>0?we[we.length-1]:Te[Te.length-1];ie&&(ie.latency&&ie.latency.target>0&&function(_e){var ve;if(_e.schemeIdUri,E.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,ve=function(Ke){return{liveDelay:Ke.latency.target/1e3,maxDrift:!isNaN(Ke.latency.max)&&Ke.latency.max>Ke.latency.target?(Ke.latency.max-Ke.latency.target+500)/1e3:NaN,referenceId:Ke.latency.referenceId||NaN}}(_e),j.length>0){var Ve=function(Ke){var Se,Le=0,Ae=j.filter(function(Ze){return Ze.id===Ke.referenceId});return Ae.length===0?(Le=j.length>0?j[0].to:0,Se=j[0].id||NaN):(Le=Ae[0].to||0,Se=Ae[0].id||NaN),{to:Le,id:Se}}(ve),Pe=Ve.to,je=Ve.id;O.liveDelay=ve.liveDelay-Pe,O.liveCatchup.maxDrift=ve.maxDrift,V.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(Pe," from ProducerReferenceTime element with id ").concat(je,".\n                Live Delay: ").concat(ve.liveDelay-Pe,", Live catchup max drift: ").concat(ve.maxDrift,"\n            "))}else O.liveDelay=ve.liveDelay,O.liveCatchup.maxDrift=ve.maxDrift,V.debug("Found latency properties coming from service description: Live Delay: ".concat(ve.liveDelay,", Live catchup max drift: ").concat(ve.maxDrift))}(ie),ie.playbackRate&&function(_e){var ve=_e.playbackRate.min?Math.round(1e3*(_e.playbackRate.min-1))/1e3:NaN,Ve=_e.playbackRate.max?Math.round(1e3*(_e.playbackRate.max-1))/1e3:NaN;O.liveCatchup.playbackRate.min=ve,O.liveCatchup.playbackRate.max=Ve,V.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(ve)),V.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(Ve))}(ie),ie.operatingQuality,ie.operatingBandwidth&&function(_e){if(_e&&_e.operatingBandwidth&&_e.operatingBandwidth.mediaType&&_e.operatingBandwidth.mediaType!=="all"){var ve={};ve.minBandwidth=_e.operatingBandwidth.min,ve.maxBandwidth=_e.operatingBandwidth.max,ve.targetBandwidth=_e.operatingBandwidth.target;var Ve=[];_e.operatingBandwidth.mediaType===Tf||_e.operatingBandwidth.mediaType===jr?Ve.push(_e.operatingBandwidth.mediaType):_e.operatingBandwidth.mediaType==="any"&&(Ve.push(jr),Ve.push(Tf)),Ve.forEach(function(Pe){isNaN(ve.minBandwidth)||re("minBitrate",Pe,ve.minBandwidth),isNaN(ve.maxBandwidth)||re("maxBitrate",Pe,ve.maxBandwidth),isNaN(ve.targetBandwidth)||re("initialBitrate",Pe,ve.targetBandwidth)})}}(ie),ie.contentSteering&&function(_e){O.contentSteering=_e.contentSteering}(ie))}},reset:function(){H()},setConfig:function(he){he&&he.adapter&&(W=he.adapter)}},V=(0,M.Z)(ee).getInstance().getLogger(F),H(),F}Ph.__dashjs_factory_name="ServiceDescriptionController";var Sf=U.Z.getSingletonFactory(Ph),wf=w(3973),Sc=w.n(wf),gm=w(3039);function Af(){var F,O,j,V,W,ee,H,re,he=this.context,we=(0,m.Z)(he).getInstance();function Te(me,Me){return me&&j[Me]&&j[Me][me]?j[Me][me].list:[]}function ie(me,Me){return me&&j[Me]&&j[Me][me]?j[Me][me].current:null}function _e(me){var Me=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(me&&me.streamInfo){var ze=me.type,mt=me.streamInfo,lt=mt.id,vt=ie(ze,lt);if(j[lt]&&j[lt][ze]&&(j[lt][ze].current=me,j[lt][ze].current&&(ze!==E.Z.TEXT&&!Pe(me,vt)||ze===E.Z.TEXT&&me.isFragmented)&&we.trigger(T.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:vt,newMediaInfo:me,switchMode:V.get().streaming.trackSwitchMode[ze]},{streamId:lt}),!Me)){var pt=Ke(me);if(!pt||!j[lt][ze].storeLastSettings)return;pt.roles&&(pt.role=pt.roles[0],delete pt.roles),pt.accessibility&&(pt.accessibility=pt.accessibility[0]),pt.audioChannelConfiguration&&(pt.audioChannelConfiguration=pt.audioChannelConfiguration[0]),ee[ze]=pt,re.setSavedMediaSettings(ze,pt)}}}function ve(me,Me){me&&Me&&(W[me]=Me)}function Ve(me){return me?W[me]:null}function Pe(me,Me){if(!me&&!Me)return!0;if(!me||!Me)return!1;var ze=me.id===Me.id,mt=me.viewpoint===Me.viewpoint,lt=JSON.stringify(me.viewpointsWithSchemeIdUri)===JSON.stringify(Me.viewpointsWithSchemeIdUri),vt=me.lang===Me.lang,pt=me.codec===Me.codec,qt=me.roles.toString()===Me.roles.toString(),Gt=JSON.stringify(me.rolesWithSchemeIdUri)===JSON.stringify(Me.rolesWithSchemeIdUri),Bt=me.accessibility.toString()===Me.accessibility.toString(),jt=JSON.stringify(me.accessibilitiesWithSchemeIdUri)===JSON.stringify(Me.accessibilitiesWithSchemeIdUri),xn=me.audioChannelConfiguration.toString()===Me.audioChannelConfiguration.toString(),it=JSON.stringify(me.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(Me.audioChannelConfigurationsWithSchemeIdUri);return ze&&pt&&mt&&lt&&vt&&qt&&Gt&&Bt&&jt&&xn&&it}function je(){j={},ee={},W={audio:null,video:null,text:null}}function Ke(me){var Me={lang:me.lang,viewpoint:me.viewpoint,roles:me.roles,accessibility:me.accessibility,audioChannelConfiguration:me.audioChannelConfiguration,codec:me.codec};return Me.lang||Me.viewpoint||Me.role&&Me.role.length>0||Me.accessibility&&Me.accessibility.length>0||Me.audioChannelConfiguration&&Me.audioChannelConfiguration.length>0?Me:null}function Se(me,Me,ze){var mt=[];return me.forEach(function(lt){Me(ze,lt)&&mt.push(lt)}),mt.length!==0?mt:me}function Le(me,Me){try{return!me.lang||me.lang instanceof RegExp?Me.lang.match(me.lang):Me.lang!==""&&(0,gm.extendedFilter)(Me.lang,Sc()(me.lang)).length>0}catch(ze){return!1}}function Ae(me,Me){return me.index===void 0||me.index===null||Me.index===me.index}function Ze(me,Me){return!me.viewpoint||me.viewpoint===Me.viewpoint}function q(me,Me){var ze=arguments.length>2&&arguments[2]!==void 0&&arguments[2],mt=!me.role||!!Me.roles.filter(function(lt){return lt===me.role})[0];return mt||Me.type===E.Z.AUDIO&&ze}function le(me,Me){return me.accessibility?!!Me.accessibility.filter(function(ze){return ze===me.accessibility})[0]:!Me.accessibility.length}function ae(me,Me){return!me.audioChannelConfiguration||!!Me.audioChannelConfiguration.filter(function(ze){return ze===me.audioChannelConfiguration})[0]}function ue(me,Me){return!me.codec||me.codec===Me.codec}function te(me){var Me,ze=0,mt=[];return me.forEach(function(lt){(Me=Math.max.apply(Math,lt.bitrateList.map(function(vt){return vt.bandwidth})))>ze?(ze=Me,mt=[lt]):Me===ze&&mt.push(lt)}),mt}function De(me){var Me,ze=1/0,mt=[];return me.forEach(function(lt){var vt=lt.bitrateList.reduce(function(pt,qt){var Gt=Math.max(1,qt.width*qt.height);return pt+qt.bandwidth/Gt},0);(Me=vt/lt.bitrateList.length)<ze?(ze=Me,mt=[lt]):Me===ze&&mt.push(lt)}),mt}function Ce(me){var Me,ze=0,mt=[];return me.forEach(function(lt){(Me=lt.representationCount)>ze?(ze=Me,mt=[lt]):Me===ze&&mt.push(lt)}),mt}function Be(me,Me){if(me===E.Z.TEXT)return Me[0];var ze,mt=V.get().streaming.selectionModeForInitialTrack,lt=H.getCustomInitialTrackSelectionFunction();if(lt&&typeof lt=="function")ze=lt(Me);else switch(mt){case E.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:ze=function(vt){var pt,qt,Gt=(pt=0,qt=[],vt.forEach(function(Bt){isNaN(Bt.selectionPriority)||(Bt.selectionPriority>pt?(pt=Bt.selectionPriority,qt=[Bt]):Bt.selectionPriority===pt&&qt.push(Bt))}),qt);return Gt.length>1&&(Gt=te(Gt)),Gt.length>1&&(Gt=Ce(Gt)),Gt}(Me);break;case E.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:ze=function(vt){var pt=te(vt);return pt.length>1&&(pt=Ce(pt)),pt}(Me);break;case E.Z.TRACK_SELECTION_MODE_FIRST_TRACK:ze=xe(Me);break;case E.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:ze=function(vt){var pt=De(vt);return pt.length>1&&(pt=te(pt)),pt}(Me);break;case E.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:ze=function(vt){var pt=Ce(vt);return pt.length>1&&(pt=te(vt)),pt}(Me);break;default:O.warn("Track selection mode ".concat(mt," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),ze=xe(Me)}return ze.length>0?ze[0]:Me[0]}function xe(me){return me[0]}return F={setInitialMediaSettingsForType:function(me,Me){var ze=ee[me]||Ve(me),mt=Te(me,Me.id),lt=[];ze||((ze=re.getSavedMediaSettings(me))&&delete ze.codec,ve(me,ze)),mt&&mt.length!==0&&(ze&&(lt=Se(lt=Array.from(mt),Le,ze),lt=Se(lt,Ae,ze),lt=Se(lt,Ze,ze),me===E.Z.AUDIO&&ee[me]||(lt=Se(lt,q,ze)),lt=Se(lt,le,ze),lt=Se(lt,ae,ze),lt=Se(lt,ue,ze)),lt.length===0?_e(Be(me,mt),!0):lt.length>1?_e(Be(me,lt)):_e(lt[0]))},addTrack:function(me){if(me){var Me=me.type;if((ze=Me)===E.Z.AUDIO||ze===E.Z.VIDEO||ze===E.Z.TEXT||ze===E.Z.IMAGE){var ze,mt,lt=me.streamInfo.id;j[lt]||(j[lt]={audio:{list:[],storeLastSettings:mt=V.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:mt,current:null},text:{list:[],storeLastSettings:mt,current:null},image:{list:[],storeLastSettings:mt,current:null}});for(var vt=j[lt][Me].list,pt=0,qt=vt.length;pt<qt;++pt)if(Pe(vt[pt],me))return;vt.push(me)}}},getTracksFor:Te,getCurrentTrackFor:ie,isCurrentTrack:function(me){if(!me)return!1;var Me=me.type,ze=me.streamInfo.id;return j[ze]&&j[ze][Me]&&Pe(j[ze][Me].current,me)},setTrack:_e,selectInitialTrack:Be,setInitialSettings:ve,getInitialSettings:Ve,getTracksWithHighestBitrate:te,getTracksWithHighestEfficiency:De,getTracksWithWidestRange:Ce,isTracksEqual:Pe,matchSettings:function(me,Me){var ze=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var mt=!1;if(me.lang){if(me.lang instanceof RegExp)mt=Me.lang.match(me.lang);else if(Me.lang!==""){var lt=Sc()(me.lang);lt&&(mt=(0,gm.extendedFilter)(Me.lang,lt).length>0)}}else mt=!0;var vt=me.index===void 0||me.index===null||Me.index===me.index,pt=!me.viewpoint||me.viewpoint===Me.viewpoint,qt=!me.role||!!Me.roles.filter(function(jt){return jt===me.role})[0],Gt=!me.accessibility||!!Me.accessibility.filter(function(jt){return jt===me.accessibility})[0],Bt=!me.audioChannelConfiguration||!!Me.audioChannelConfiguration.filter(function(jt){return jt===me.audioChannelConfiguration})[0];return mt&&vt&&pt&&(qt||Me.type===E.Z.AUDIO&&ze)&&Gt&&Bt}catch(jt){return!1}},matchSettingsLang:Le,matchSettingsIndex:Ae,matchSettingsViewPoint:Ze,matchSettingsRole:q,matchSettingsAccessibility:le,matchSettingsAudioChannelConfig:ae,saveTextSettingsDisabled:function(){re.setSavedMediaSettings(E.Z.TEXT,null)},setConfig:function(me){me&&(me.domStorage&&(re=me.domStorage),me.settings&&(V=me.settings),me.customParametersModel&&(H=me.customParametersModel))},reset:je},O=(0,M.Z)(he).getInstance().getLogger(F),je(),F}Af.__dashjs_factory_name="MediaController";var Nl=U.Z.getSingletonFactory(Af);U.Z.updateSingletonFactory(Af.__dashjs_factory_name,Nl);var If=Nl,Ca=NaN,bf=function F(O,j){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,F),this.data={baseUrls:O||null,selectedIdx:j||Ca},this.children=[]};function Ml(){var F,O,j,V,W=this.context,ee=wn(W).getInstance();function H(Te,ie,_e){var ve=re(_e);Te[ie]?ee.areEqual(ve,Te[ie].data.baseUrls)||(Te[ie].data.baseUrls=ve,Te[ie].data.selectedIdx=Ca):Te[ie]=new bf(ve)}function re(Te){var ie=j.getBaseURLsFromElement(Te),_e=V.getSynthesizedBaseUrlElements(ie);return _e&&_e.length>0&&(ie=ie.concat(_e)),ie}function he(Te,ie){var _e=ie||O;Te(_e.data),_e.children&&_e.children.forEach(function(ve){return he(Te,ve)})}function we(){O=new bf}return F={reset:we,update:function(Te){(function(ie){(function(){if(!j||!j.hasOwnProperty("getBaseURLsFromElement")||!j.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var _e=re(ie);ee.areEqual(_e,O.data.baseUrls)||(O.data.baseUrls=_e,O.data.selectedIdx=Ca),ie&&ie.Period_asArray&&ie.Period_asArray.forEach(function(ve,Ve){H(O.children,Ve,ve),ve.AdaptationSet_asArray&&ve.AdaptationSet_asArray.forEach(function(Pe,je){H(O.children[Ve].children,je,Pe),Pe.Representation_asArray&&Pe.Representation_asArray.sort(j.getRepresentationSortFunction()).forEach(function(Ke,Se){H(O.children[Ve].children[je].children,Se,Ke)})})})})(Te)},getForPath:function(Te){var ie=O,_e=[ie.data];return Te&&Te.forEach(function(ve){(ie=ie.children[ve])&&_e.push(ie.data)}),_e.filter(function(ve){return ve.baseUrls.length})},invalidateSelectedIndexes:function(Te){he(function(ie){isNaN(ie.selectedIdx)||Te===ie.baseUrls[ie.selectedIdx].serviceLocation&&(ie.selectedIdx=Ca)})},setConfig:function(Te){Te.adapter&&(j=Te.adapter),Te.contentSteeringController&&(V=Te.contentSteeringController)},getBaseUrls:function(Te){return re(Te)}},we(),F}Ml.__dashjs_factory_name="BaseURLTreeModel";var mm=U.Z.getClassFactory(Ml);function Dl(F){var O=(F=F||{}).blacklistController;return{select:function(j){return j&&function(W){var ee,H,re=0,he=[],we=0;if((H=W.sort(function(Te,ie){var _e=Te.dvbPriority-ie.dvbPriority;return isNaN(_e)?0:_e}).filter(function(Te,ie,_e){return!ie||_e[0].dvbPriority&&Te.dvbPriority&&_e[0].dvbPriority===Te.dvbPriority})).length)return H.length>1&&(H.forEach(function(Te){re+=Te.dvbWeight,he.push(re)}),ee=Math.floor(Math.random()*(re-1)),he.every(function(Te,ie){return we=ie,!(ee<Te)})),H[we]}((V=[],j.filter(function(W){return!O.contains(W.serviceLocation)||(W.dvbPriority&&V.push(W.dvbPriority),!1)}).filter(function(W){return!V.length||!W.dvbPriority||V.indexOf(W.dvbPriority)===-1})));var V}}}Dl.__dashjs_factory_name="DVBSelector";var Ku=U.Z.getClassFactory(Dl);function Pl(F){var O=(F=F||{}).blacklistController;return{select:function(j){var V,W=0;return j&&j.some(function(ee,H){return W=H,!O.contains(ee.serviceLocation)})&&(V=j[W]),V}}}Pl.__dashjs_factory_name="BasicSelector";var zu=U.Z.getClassFactory(Pl);function Cf(){var F,O,j,V=this.context;function W(){for(var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],re=0,he=NaN,we=function(){var ie=ee[re],_e=H.findIndex(function(ve){return ve.serviceLocation&&ve.serviceLocation===ie});if(_e!==-1&&!j.contains(H[_e].serviceLocation))return he=_e,"break";re+=1};re<ee.length;){var Te=we();if(Te==="break")break}return he}return F={selectBaseUrlIndex:function(ee){var H=NaN;if(isNaN(ee.selectedIdx)){var re=O.getSteeringDataFromManifest();re&&re.defaultServiceLocationArray.length>0&&(H=W(re.defaultServiceLocationArray,ee.baseUrls))}var he=O.getCurrentSteeringResponseData();return ee.baseUrls&&ee.baseUrls.length&&he&&he.pathwayPriority&&he.pathwayPriority.length&&(H=W(he.pathwayPriority,ee.baseUrls)),H},setConfig:function(ee){ee.blacklistController&&(j=ee.blacklistController),ee.contentSteeringController&&(O=ee.contentSteeringController)}},O=Vi(V).getInstance(),F}Cf.__dashjs_factory_name="ContentSteeringSelector";var vm=U.Z.getClassFactory(Cf);function Oh(){var F,O,j,V,W,ee,H=this.context,re=(0,m.Z)(H).getInstance(),he=(0,Ge.Z)(H).getInstance();function we(){O.reset()}return F={chooseSelector:function(Te){(0,ge.PS)(Te,"boolean"),ee=Te?V:j},select:function(Te){if(Te){if(he.get().streaming.applyContentSteering){var ie=W.selectBaseUrlIndex(Te);isNaN(ie)||ie===-1||(Te.selectedIdx=ie)}if(!isNaN(Te.selectedIdx))return Te.baseUrls[Te.selectedIdx];var _e=ee.select(Te.baseUrls);return _e?(Te.selectedIdx=Te.baseUrls.indexOf(_e),_e):(re.trigger(T.Z.URL_RESOLUTION_FAILED,{error:new ce.Z(Ie.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Ie.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(ee===j&&we()))}},reset:we,setConfig:function(Te){Te.selector&&(ee=Te.selector),Te.contentSteeringSelector&&(W=Te.contentSteeringSelector)}},O=Gs(H).create({updateEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),j=zu(H).create({blacklistController:O}),V=Ku(H).create({blacklistController:O}),(W=vm(H).create()).setConfig({blacklistController:O}),ee=j,F}Oh.__dashjs_factory_name="BaseURLSelector";var ym=U.Z.getClassFactory(Oh);function Yu(){var F,O,j,V,W,ee=this.context,H=(0,m.Z)(ee).getInstance(),re=(0,Tt.Z)(ee).getInstance();function he(Te){j.update(Te),V.chooseSelector(O.getIsDVB(Te)),H.trigger(_.Z.BASE_URLS_UPDATED,{baseUrls:we(Te)})}function we(Te){return j.getBaseUrls(Te)}return F={reset:function(){j.reset(),V.reset()},initialize:function(Te){j.setConfig({adapter:O,contentSteeringController:W}),he(Te)},resolve:function(Te){var ie=j.getForPath(Te).reduce(function(_e,ve){var Ve=V.select(ve);return Ve?(re.isRelative(Ve.url)?_e.url=re.resolve(Ve.url,_e.url):(_e.url=Ve.url,_e.serviceLocation=Ve.serviceLocation),_e.availabilityTimeOffset=Ve.availabilityTimeOffset,_e.availabilityTimeComplete=Ve.availabilityTimeComplete,_e.queryParams=Ve.queryParams,_e):new nr},new nr);if(!re.isRelative(ie.url))return ie},setConfig:function(Te){Te.baseURLTreeModel&&(j=Te.baseURLTreeModel),Te.baseURLSelector&&(V=Te.baseURLSelector),Te.adapter&&(O=Te.adapter),Te.contentSteeringController&&(W=Te.contentSteeringController)},getBaseUrls:we,update:he},j=mm(ee).create(),V=ym(ee).create(),H.on(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(Te){j.invalidateSelectedIndexes(Te.entry)},F),F}Yu.__dashjs_factory_name="BaseURLController";var Lh=U.Z.getClassFactory(Yu);function wu(F){return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},wu(F)}function Rf(F,O){return Rf=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},Rf(F,O)}function Ks(F,O){return!O||wu(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(F):O}function xf(F){return xf=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},xf(F)}var zs=function(F){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&Rf(ee,H)})(W,F);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=xf(O);if(j){var re=xf(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Ks(this,ee)});function W(ee,H){var re;return function(he,we){if(!(he instanceof we))throw new TypeError("Cannot call a class as a function")}(this,W),(re=V.call(this)).url=ee||null,re.type=H||null,re.mediaType=E.Z.STREAM,re.responseType="",re}return W}(Z.Z);function Ss(F){F=F||{};var O=this.context,j=(0,m.Z)(O).getInstance(),V=bi(O).create({errHandler:F.errHandler,dashMetrics:F.dashMetrics,mediaPlayerModel:F.mediaPlayerModel,requestModifier:F.requestModifier,errors:Ie});return{load:function(W,ee,H){var re=function(we,Te){ee.resolved=!0,ee.resolvedContent=we||null,j.trigger(T.Z.XLINK_ELEMENT_LOADED,{element:ee,resolveObject:H,error:we||Te?null:new ce.Z(Ie.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Ie.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+W)})};if(W==="urn:mpeg:dash:resolve-to-zero:2013")re(null,!0);else{var he=new zs(W,at.w.XLINK_EXPANSION_TYPE);V.load({request:he,success:function(we){re(we)},error:function(){re(null)}})}},reset:function(){V&&(V.abort(),V=null)}}}Ss.__dashjs_factory_name="XlinkLoader";var Au=U.Z.getClassFactory(Ss),Nf=function(F){(F=F||{}).escapeMode===void 0&&(F.escapeMode=!0),F.attributePrefix===void 0&&(F.attributePrefix="_"),F.arrayAccessForm=F.arrayAccessForm||"none",F.emptyNodeForm=F.emptyNodeForm||"text",F.enableToStringFunc===void 0&&(F.enableToStringFunc=!0),F.arrayAccessFormPaths=F.arrayAccessFormPaths||[],F.skipEmptyTextNodesForObj===void 0&&(F.skipEmptyTextNodesForObj=!0),F.stripWhitespaces===void 0&&(F.stripWhitespaces=!0),F.datetimeAccessFormPaths=F.datetimeAccessFormPaths||[],F.useDoubleQuotes===void 0&&(F.useDoubleQuotes=!1),F.xmlElementsFilter=F.xmlElementsFilter||[],F.jsonPropertiesFilter=F.jsonPropertiesFilter||[],F.keepCData===void 0&&(F.keepCData=!1),F.ignoreRoot===void 0&&(F.ignoreRoot=!1);function O(Se){var Le=Se.localName;return Le==null&&(Le=Se.baseName),Le!=null&&Le!=""||(Le=Se.nodeName),Le}function j(Se){return typeof Se=="string"?Se.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):Se}function V(Se,Le,Ae,Ze){for(var q=0;q<Se.length;q++){var le=Se[q];if(typeof le=="string"){if(le==Ze)break}else if(le instanceof RegExp){if(le.test(Ze))break}else if(typeof le=="function"&&le(Le,Ae,Ze))break}return q!=Se.length}function W(Se,Le,Ae){F.arrayAccessForm==="property"&&(Se[Le]instanceof Array?Se[Le+"_asArray"]=Se[Le]:Se[Le+"_asArray"]=[Se[Le]]),!(Se[Le]instanceof Array)&&F.arrayAccessFormPaths.length>0&&V(F.arrayAccessFormPaths,Se,Le,Ae)&&(Se[Le]=[Se[Le]])}function ee(Se){var Le=Se.split(/[-T:+Z]/g),Ae=new Date(Le[0],Le[1]-1,Le[2]),Ze=Le[5].split(".");if(Ae.setHours(Le[3],Le[4],Ze[0]),Ze.length>1&&Ae.setMilliseconds(Ze[1]),Le[6]&&Le[7]){var q=60*Le[6]+Number(Le[7]);q=0+((/\d\d-\d\d:\d\d$/.test(Se)?"-":"+")=="-"?-1*q:q),Ae.setMinutes(Ae.getMinutes()-q-Ae.getTimezoneOffset())}else Se.indexOf("Z",Se.length-1)!==-1&&(Ae=new Date(Date.UTC(Ae.getFullYear(),Ae.getMonth(),Ae.getDate(),Ae.getHours(),Ae.getMinutes(),Ae.getSeconds(),Ae.getMilliseconds())));return Ae}function H(Se,Le,Ae,Ze){return!(Le==1&&F.xmlElementsFilter.length>0)||V(F.xmlElementsFilter,Se,Ae,Ze)}function re(Se,Le){if(Se.nodeType==9){for(var Ae=new Object,Ze=Se.childNodes,q=0;q<Ze.length;q++)(ae=Ze[q]).nodeType==1&&(F.ignoreRoot?Ae=re(ae):(Ae={})[ue=O(ae)]=re(ae));return Ae}if(Se.nodeType==1){(Ae=new Object).__cnt=0;var le=[];for(Ze=Se.childNodes,q=0;q<Ze.length;q++){var ae,ue=O(ae=Ze[q]);if(ae.nodeType!=8){var te=Le+"."+ue;if(H(Ae,ae.nodeType,ue,te))if(Ae.__cnt++,Ae[ue]==null){var De=re(ae,te);(ue!="#text"||/[^\s]/.test(De))&&((Ce={})[ue]=De,le.push(Ce)),Ae[ue]=De,W(Ae,ue,te)}else{var Ce;Ae[ue]!=null&&(Ae[ue]instanceof Array||(Ae[ue]=[Ae[ue]],W(Ae,ue,te))),De=re(ae,te),(ue!="#text"||/[^\s]/.test(De))&&((Ce={})[ue]=De,le.push(Ce)),Ae[ue][Ae[ue].length]=De}}}Ae.__children=le;for(var Be=O(Se),xe=0;xe<Se.attributes.length;xe++){var me=Se.attributes[xe];Ae.__cnt++;for(var Me=me.value,ze=0,mt=F.matchers.length;ze<mt;ze++){var lt=F.matchers[ze];lt.test(me,Be)&&(Me=lt.converter(me.value))}Ae[F.attributePrefix+me.name]=Me}var vt=function(pt){return pt.prefix}(Se);return vt!=null&&vt!=""&&(Ae.__cnt++,Ae.__prefix=vt),Ae["#text"]!=null&&(Ae.__text=Ae["#text"],Ae.__text instanceof Array&&(Ae.__text=Ae.__text.join("\n")),F.stripWhitespaces&&(Ae.__text=Ae.__text.trim()),delete Ae["#text"],F.arrayAccessForm=="property"&&delete Ae["#text_asArray"],Ae.__text=function(pt,qt,Gt){if(F.datetimeAccessFormPaths.length>0){var Bt=Gt.split(".#")[0];return V(F.datetimeAccessFormPaths,pt,qt,Bt)?ee(pt):pt}return pt}(Ae.__text,ue,Le+"."+ue)),Ae["#cdata-section"]!=null&&(Ae.__cdata=Ae["#cdata-section"],delete Ae["#cdata-section"],F.arrayAccessForm=="property"&&delete Ae["#cdata-section_asArray"]),Ae.__cnt==0&&F.emptyNodeForm=="text"?Ae="":Ae.__cnt==1&&Ae.__text!=null?Ae=Ae.__text:Ae.__cnt!=1||Ae.__cdata==null||F.keepCData?Ae.__cnt>1&&Ae.__text!=null&&F.skipEmptyTextNodesForObj&&(F.stripWhitespaces&&Ae.__text==""||Ae.__text.trim()=="")&&delete Ae.__text:Ae=Ae.__cdata,delete Ae.__cnt,!F.enableToStringFunc||Ae.__text==null&&Ae.__cdata==null||(Ae.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),Ae}if(Se.nodeType==3||Se.nodeType==4)return Se.nodeValue}function he(Se,Le,Ae,Ze){var q="<"+(Se!=null&&Se.__prefix!=null?Se.__prefix+":":"")+Le;if(Ae!=null)for(var le=0;le<Ae.length;le++){var ae=Ae[le],ue=Se[ae];F.escapeMode&&(ue=j(ue)),q+=" "+ae.substr(F.attributePrefix.length)+"=",F.useDoubleQuotes?q+='"'+ue+'"':q+="'"+ue+"'"}return q+(Ze?"/>":">")}function we(Se,Le){return"</"+(Se.__prefix!=null?Se.__prefix+":":"")+Le+">"}function Te(Se,Le){return F.arrayAccessForm=="property"&&(Ze="_asArray",(Ae=Le.toString()).indexOf(Ze,Ae.length-Ze.length)!==-1)||Le.toString().indexOf(F.attributePrefix)==0||Le.toString().indexOf("__")==0||Se[Le]instanceof Function;var Ae,Ze}function ie(Se){var Le=0;if(Se instanceof Object)for(var Ae in Se)Te(Se,Ae)||Le++;return Le}function _e(Se,Le,Ae){return F.jsonPropertiesFilter.length==0||Ae==""||V(F.jsonPropertiesFilter,Se,Le,Ae)}function ve(Se){var Le=[];if(Se instanceof Object)for(var Ae in Se)Ae.toString().indexOf("__")==-1&&Ae.toString().indexOf(F.attributePrefix)==0&&Le.push(Ae);return Le}function Ve(Se){var Le="";return Se instanceof Object?Le+=function(Ae){var Ze="";return Ae.__cdata!=null&&(Ze+="<![CDATA["+Ae.__cdata+"]]>"),Ae.__text!=null&&(F.escapeMode?Ze+=j(Ae.__text):Ze+=Ae.__text),Ze}(Se):Se!=null&&(F.escapeMode?Le+=j(Se):Le+=Se),Le}function Pe(Se,Le){return Se===""?Le:Se+"."+Le}function je(Se,Le,Ae,Ze){var q="";if(Se.length==0)q+=he(Se,Le,Ae,!0);else for(var le=0;le<Se.length;le++)q+=he(Se[le],Le,ve(Se[le]),!1),q+=Ke(Se[le],Pe(Ze,Le)),q+=we(Se[le],Le);return q}function Ke(Se,Le){var Ae="";if(ie(Se)>0){for(var Ze in Se)if(!Te(Se,Ze)&&(Le==""||_e(Se,Ze,Pe(Le,Ze)))){var q=Se[Ze],le=ve(q);q==null||q==null?Ae+=he(q,Ze,le,!0):q instanceof Object?q instanceof Array?Ae+=je(q,Ze,le,Le):q instanceof Date?(Ae+=he(q,Ze,le,!1),Ae+=q.toISOString(),Ae+=we(q,Ze)):ie(q)>0||q.__text!=null||q.__cdata!=null?(Ae+=he(q,Ze,le,!1),Ae+=Ke(q,Pe(Le,Ze)),Ae+=we(q,Ze)):Ae+=he(q,Ze,le,!0):(Ae+=he(q,Ze,le,!1),Ae+=Ve(q),Ae+=we(q,Ze))}}return Ae+Ve(Se)}this.parseXmlString=function(Se){var Le;if(Se===void 0)return null;if(window.DOMParser){var Ae=new window.DOMParser;try{(Le=Ae.parseFromString(Se,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(Le=null)}catch(Ze){Le=null}}else Se.indexOf("<?")==0&&(Se=Se.substr(Se.indexOf("?>")+2)),(Le=new ActiveXObject("Microsoft.XMLDOM")).async="false",Le.loadXML(Se);return Le},this.asArray=function(Se){return Se===void 0||Se==null?[]:Se instanceof Array?Se:[Se]},this.toXmlDateTime=function(Se){return Se instanceof Date?Se.toISOString():typeof Se=="number"?new Date(Se).toISOString():null},this.asDateTime=function(Se){return typeof Se=="string"?ee(Se):Se},this.xml2json=function(Se){return re(Se)},this.xml_str2json=function(Se){var Le=this.parseXmlString(Se);return Le!=null?this.xml2json(Le):null},this.json2xml_str=function(Se){return Ke(Se,"")},this.json2xml=function(Se){var Le=this.json2xml_str(Se);return this.parseXmlString(Le)},this.getVersion=function(){return"1.2.0"}},sa="onLoad";function Mf(F){F=F||{};var O,j,V,W,ee,H,re=this.context,he=(0,m.Z)(re).getInstance(),we=(0,Tt.Z)(re).getInstance();function Te(Pe,je,Ke){var Se,Le,Ae={};Ae.elements=Pe,Ae.type=je,Ae.resolveType=Ke,Ae.elements.length===0&&_e(Ae);for(var Ze=0;Ze<Ae.elements.length;Ze++)Se=Ae.elements[Ze],Le=we.isHTTPURL(Se.url)?Se.url:Se.originalContent.BaseURL+Se.url,H.load(Le,Se,Ae)}function ie(Pe){var je,Ke,Se="";if(je=Pe.element,Ke=Pe.resolveObject,je.resolvedContent){var Le=0;je.resolvedContent.indexOf("<?xml")===0&&(Le=je.resolvedContent.indexOf("?>")+2),Se=je.resolvedContent.substr(0,Le)+"<response>"+je.resolvedContent.substr(Le)+"</response>",je.resolvedContent=ee.xml_str2json(Se)}(function(Ae){var Ze;for(Ze=0;Ze<Ae.elements.length;Ze++)if(Ae.elements[Ze].resolved===!1)return!1;return!0})(Ke)&&_e(Ke)}function _e(Pe){var je,Ke,Se=[];if(function(Le){var Ae,Ze,q,le,ae,ue,te=[];for(le=Le.elements.length-1;le>=0;le--){if(Ze=(Ae=Le.elements[le]).type+"_asArray",Ae.resolvedContent){if(Ae.resolvedContent)for(ae=0;ae<Ae.resolvedContent[Ze].length;ae++)q=Ae.resolvedContent[Ze][ae],te.push(q)}else delete Ae.originalContent["xlink:actuate"],delete Ae.originalContent["xlink:href"],te.push(Ae.originalContent);for(Ae.parentElement[Ze].splice(Ae.index,1),ue=0;ue<te.length;ue++)Ae.parentElement[Ze].splice(Ae.index+ue,0,te[ue]);te=[]}Le.elements.length>0&&V.run(W)}(Pe),Pe.resolveType==="onActuate"&&he.trigger(T.Z.XLINK_READY,{manifest:W}),Pe.resolveType===sa)switch(Pe.type){case y.Z.PERIOD:for(je=0;je<W[y.Z.PERIOD+"_asArray"].length;je++)(Ke=W[y.Z.PERIOD+"_asArray"][je]).hasOwnProperty(y.Z.ADAPTATION_SET+"_asArray")&&(Se=Se.concat(ve(Ke[y.Z.ADAPTATION_SET+"_asArray"],Ke,y.Z.ADAPTATION_SET,sa))),Ke.hasOwnProperty(y.Z.EVENT_STREAM+"_asArray")&&(Se=Se.concat(ve(Ke[y.Z.EVENT_STREAM+"_asArray"],Ke,y.Z.EVENT_STREAM,sa)));Te(Se,y.Z.ADAPTATION_SET,sa);break;case y.Z.ADAPTATION_SET:he.trigger(T.Z.XLINK_READY,{manifest:W})}}function ve(Pe,je,Ke,Se){var Le,Ae,Ze,q=[];for(Ae=Pe.length-1;Ae>=0;Ae--)(Le=Pe[Ae]).hasOwnProperty("xlink:href")&&Le["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&Pe.splice(Ae,1);for(Ae=0;Ae<Pe.length;Ae++)(Le=Pe[Ae]).hasOwnProperty("xlink:href")&&Le.hasOwnProperty("xlink:actuate")&&Le["xlink:actuate"]===Se&&(Ze=Ve(Le["xlink:href"],je,Ke,Ae,Se,Le),q.push(Ze));return q}function Ve(Pe,je,Ke,Se,Le,Ae){return{url:Pe,parentElement:je,type:Ke,index:Se,resolveType:Le,originalContent:Ae,resolvedContent:null,resolved:!1}}return O={resolveManifestOnLoad:function(Pe){ee=new Nf({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:j}),(W=Pe).Period_asArray?Te(ve(W.Period_asArray,W,y.Z.PERIOD,sa),y.Z.PERIOD,sa):he.trigger(T.Z.XLINK_READY,{manifest:W})},setMatchers:function(Pe){Pe&&(j=Pe)},setIron:function(Pe){Pe&&(V=Pe)},reset:function(){he.off(T.Z.XLINK_ELEMENT_LOADED,ie,O),H&&(H.reset(),H=null)}},he.on(T.Z.XLINK_ELEMENT_LOADED,ie,O),H=Au(re).create({errHandler:F.errHandler,dashMetrics:F.dashMetrics,mediaPlayerModel:F.mediaPlayerModel,requestModifier:F.requestModifier,settings:F.settings}),O}Mf.__dashjs_factory_name="XlinkController";var kh=U.Z.getClassFactory(Mf);function Ol(F){return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Ol(F)}function Em(F){function O(W,ee){for(var H in W)ee.hasOwnProperty(H)||(ee[H]=W[H])}function j(W,ee,H){for(var re=0,he=W.length;re<he;++re){var we=W[re];if(ee[we.name])if(H[we.name]){if(we.merge){var Te=ee[we.name],ie=H[we.name];Ol(Te)==="object"&&Ol(ie)==="object"?O(Te,ie):H[we.name]=Te+ie}}else H[we.name]=ee[we.name]}}function V(W,ee){for(var H=0,re=W.children.length;H<re;++H){var he=W.children[H],we=ee[he.name+"_asArray"];if(we)for(var Te=0,ie=we.length;Te<ie;++Te){var _e=we[Te];j(W.properties,ee,_e),V(he,_e)}}}return{run:function(W){if(W===null||Ol(W)!=="object")return W;if(W.Period_asArray&&"period"in F)for(var ee=F.period,H=W.Period_asArray,re=0,he=H.length;re<he;++re){var we=H[re];if(V(ee,we),"adaptationset"in F){var Te=we.AdaptationSet_asArray;if(Te)for(var ie=F.adaptationset,_e=0,ve=Te.length;_e<ve;++_e)V(ie,Te[_e])}}return W}}}Em.__dashjs_factory_name="ObjectIron";var Ei=U.Z.getClassFactory(Em);function Df(F,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(F,V.key,V)}}var Iu=function(){function F(V,W){(function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")})(this,F),this._test=V,this._converter=W}var O,j;return O=F,(j=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&Df(O.prototype,j),F}();function wc(F){return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},wc(F)}function $r(F,O,j){return O in F?Object.defineProperty(F,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):F[O]=j,F}function Wu(F,O){return Wu=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},Wu(F,O)}function Ac(F,O){return!O||wc(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(F):O}function Pf(F){return Pf=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Pf(F)}var _m=function(F){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&Wu(ee,H)})(W,F);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Pf(O);if(j){var re=Pf(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Ac(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee,H){var re,he=($r(re={},y.Z.MPD,[y.Z.ID,y.Z.PROFILES]),$r(re,y.Z.PERIOD,[y.Z.ID]),$r(re,y.Z.BASE_URL,[y.Z.SERVICE_LOCATION,y.Z.BYTE_RANGE]),$r(re,y.Z.SEGMENT_BASE,[y.Z.INDEX_RANGE]),$r(re,y.Z.INITIALIZATION,[y.Z.RANGE]),$r(re,y.Z.REPRESENTATION_INDEX,[y.Z.RANGE]),$r(re,y.Z.SEGMENT_LIST,[y.Z.INDEX_RANGE]),$r(re,y.Z.BITSTREAM_SWITCHING,[y.Z.RANGE]),$r(re,y.Z.SEGMENT_URL,[y.Z.MEDIA_RANGE,y.Z.INDEX_RANGE]),$r(re,y.Z.SEGMENT_TEMPLATE,[y.Z.INDEX_RANGE,y.Z.MEDIA,y.Z.INDEX,y.Z.INITIALIZATION_MINUS,y.Z.BITSTREAM_SWITCHING_MINUS]),$r(re,y.Z.ASSET_IDENTIFIER,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.EVENT_STREAM,[y.Z.VALUE]),$r(re,y.Z.ADAPTATION_SET,[y.Z.PROFILES,y.Z.MIME_TYPE,y.Z.SEGMENT_PROFILES,y.Z.CODECS,y.Z.CONTENT_TYPE]),$r(re,y.Z.FRAME_PACKING,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.AUDIO_CHANNEL_CONFIGURATION,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.CONTENT_PROTECTION,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.ESSENTIAL_PROPERTY,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.SUPPLEMENTAL_PROPERTY,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.INBAND_EVENT_STREAM,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.ACCESSIBILITY,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.ROLE,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.RATING,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.VIEWPOINT,[y.Z.VALUE,y.Z.ID]),$r(re,y.Z.CONTENT_COMPONENT,[y.Z.CONTENT_TYPE]),$r(re,y.Z.REPRESENTATION,[y.Z.ID,y.Z.DEPENDENCY_ID,y.Z.MEDIA_STREAM_STRUCTURE_ID]),$r(re,y.Z.SUBSET,[y.Z.ID]),$r(re,y.Z.METRICS,[y.Z.METRICS_MINUS]),$r(re,y.Z.REPORTING,[y.Z.VALUE,y.Z.ID]),re);if(he.hasOwnProperty(H)){var we=he[H];return we!==void 0&&we.indexOf(ee.name)>=0}return!1},function(ee){return String(ee)})}return W}(Iu);function Fh(F){return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Fh(F)}function Uh(F,O){return Uh=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},Uh(F,O)}function BE(F,O){return!O||Fh(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(F):O}function Of(F){return Of=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Of(F)}var $u=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,Lf=function(F){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&Uh(ee,H)})(W,F);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Of(O);if(j){var re=Of(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return BE(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee){for(var H=[y.Z.MIN_BUFFER_TIME,y.Z.MEDIA_PRESENTATION_DURATION,y.Z.MINIMUM_UPDATE_PERIOD,y.Z.TIMESHIFT_BUFFER_DEPTH,y.Z.MAX_SEGMENT_DURATION,y.Z.MAX_SUBSEGMENT_DURATION,y.Z.SUGGESTED_PRESENTATION_DELAY,y.Z.START,E.Z.START_TIME,y.Z.DURATION],re=H.length,he=0;he<re;he++)if(ee.nodeName===H[he])return $u.test(ee.value);return!1},function(ee){var H=$u.exec(ee),re=31536e3*parseFloat(H[3]||0)+2592e3*parseFloat(H[5]||0)+86400*parseFloat(H[7]||0)+3600*parseFloat(H[9]||0)+60*parseFloat(H[11]||0)+parseFloat(H[13]||0);return H[1]!==void 0&&(re=-re),re})}return W}(Iu);function kf(F){return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},kf(F)}function co(F,O){return co=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},co(F,O)}function Bh(F,O){return!O||kf(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(F):O}function ws(F){return ws=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},ws(F)}var Wo=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,Xu=function(F){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&co(ee,H)})(W,F);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=ws(O);if(j){var re=ws(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Bh(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee){return Wo.test(ee.value)},function(ee){var H,re=Wo.exec(ee);if(H=Date.UTC(parseInt(re[1],10),parseInt(re[2],10)-1,parseInt(re[3],10),parseInt(re[4],10),parseInt(re[5],10),re[6]&&parseInt(re[6],10)||0,re[7]&&1e3*parseFloat(re[7])||0),re[9]&&re[10]){var he=60*parseInt(re[9],10)+parseInt(re[10],10);H+=(re[8]==="+"?-1:1)*he*60*1e3}return new Date(H)})}return W}(Iu);function Ya(F){return Ya=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Ya(F)}function hi(F,O){return hi=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},hi(F,O)}function Ki(F,O){return!O||Ya(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(F):O}function As(F){return As=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},As(F)}var Tm=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Ll=function(F){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&hi(ee,H)})(W,F);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=As(O);if(j){var re=As(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Ki(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee){return Tm.test(ee.value)},function(ee){return parseFloat(ee)})}return W}(Iu);function bo(F){return bo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},bo(F)}function Qu(F,O,j){return O in F?Object.defineProperty(F,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):F[O]=j,F}function _r(F,O){return _r=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},_r(F,O)}function Mi(F,O){return!O||bo(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(F):O}function Ff(F){return Ff=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Ff(F)}var Sm=function(F){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&_r(ee,H)})(W,F);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Ff(O);if(j){var re=Ff(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Mi(this,ee)});function W(){return function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}(this,W),V.call(this,function(ee,H){var re,he=(Qu(re={},y.Z.ADAPTATION_SET,[y.Z.LANG]),Qu(re,y.Z.REPRESENTATION,[y.Z.LANG]),Qu(re,y.Z.CONTENT_COMPONENT,[y.Z.LANG]),Qu(re,y.Z.LABEL,[y.Z.LANG]),Qu(re,y.Z.GROUP_LABEL,[y.Z.LANG]),re);if(he.hasOwnProperty(H)){var we=he[H];return we!==void 0&&we.indexOf(ee.name)>=0}return!1},function(ee){return Sc()(ee)||String(ee)})}return W}(Iu);function jh(F,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(F,V.key,V)}}var Di=function(){function F(V){var W;(function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")})(this,F),this._name=V,this._merge=(W=V)&&W.length&&W.charAt(0)===W.charAt(0).toUpperCase()}var O,j;return O=F,(j=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&jh(O.prototype,j),F}();function Ju(F,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(F,V.key,V)}}var Wa=function(){function F(V,W,ee){var H=this;(function(re,he){if(!(re instanceof he))throw new TypeError("Cannot call a class as a function")})(this,F),this._name=V||"",this._properties=[],this._children=ee||[],Array.isArray(W)&&W.forEach(function(re){H._properties.push(new Di(re))})}var O,j;return O=F,(j=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&Ju(O.prototype,j),F}();function Zh(F){return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Zh(F)}function kl(F,O){return kl=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},kl(F,O)}function _o(F,O){return!O||Zh(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(F):O}function Ys(F){return Ys=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Ys(F)}var Ra=function(F){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&kl(ee,H)})(W,F);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Ys(O);if(j){var re=Ys(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return _o(this,ee)});function W(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,W);var ee=[y.Z.PROFILES,y.Z.WIDTH,y.Z.HEIGHT,y.Z.SAR,y.Z.FRAMERATE,y.Z.AUDIO_SAMPLING_RATE,y.Z.MIME_TYPE,y.Z.SEGMENT_PROFILES,y.Z.CODECS,y.Z.MAXIMUM_SAP_PERIOD,y.Z.START_WITH_SAP,y.Z.MAX_PLAYOUT_RATE,y.Z.CODING_DEPENDENCY,y.Z.SCAN_TYPE,y.Z.FRAME_PACKING,y.Z.AUDIO_CHANNEL_CONFIGURATION,y.Z.CONTENT_PROTECTION,y.Z.ESSENTIAL_PROPERTY,y.Z.ESSENTIAL_PROPERTY+"_asArray",y.Z.SUPPLEMENTAL_PROPERTY,y.Z.INBAND_EVENT_STREAM];return V.call(this,y.Z.ADAPTATION_SET,ee,[new Wa(y.Z.REPRESENTATION,ee,[new Wa(y.Z.SUB_REPRESENTATION,ee)])])}return W}(Wa);function Oo(F){return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Oo(F)}function Uf(F,O){return Uf=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},Uf(F,O)}function wm(F,O){return!O||Oo(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(F):O}function Bf(F){return Bf=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Bf(F)}var bu=function(F){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&Uf(ee,H)})(W,F);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Bf(O);if(j){var re=Bf(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return wm(this,ee)});function W(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,W);var ee=[y.Z.SEGMENT_BASE,y.Z.SEGMENT_TEMPLATE,y.Z.SEGMENT_LIST];return V.call(this,y.Z.PERIOD,ee,[new Wa(y.Z.ADAPTATION_SET,ee,[new Wa(y.Z.REPRESENTATION,ee)])])}return W}(Wa);function Is(F){F=F||{};var O,j,V,W,ee,H=this.context,re=F.debug;return O={parse:function(he){var we,Te=window.performance.now();if(!(we=W.xml_str2json(he)))throw new Error("parsing the manifest failed");var ie=window.performance.now();we.Patch?((we=we.Patch).add_asArray&&we.add_asArray.forEach(function(ve){return ee.run(ve)}),we.replace_asArray&&we.replace_asArray.forEach(function(ve){return ee.run(ve)})):(we=we.MPD,ee.run(we));var _e=window.performance.now();return j.info("Parsing complete: ( xml2json: "+(ie-Te).toPrecision(3)+"ms, objectiron: "+(_e-ie).toPrecision(3)+"ms, total: "+((_e-Te)/1e3).toPrecision(3)+"s)"),we.protocol="DASH",we},getMatchers:function(){return V},getIron:function(){return ee}},j=re.getLogger(O),V=[new Lf,new Xu,new Ll,new Sm,new _m],W=new Nf({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:V}),ee=Ei(H).create({adaptationset:new Ra,period:new bu}),O}Is.__dashjs_factory_name="DashParser";var Ic=U.Z.getClassFactory(Is);function Am(F){F=F||{};var O,j,V,W,ee,H=this.context,re=F.debug,he=F.settings,we=(0,m.Z)(H).getInstance(),Te=(0,Tt.Z)(H).getInstance(),ie=F.mssHandler,_e=F.errHandler;function ve(Pe){we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:Pe.manifest})}function Ve(Pe){var je=null;return Pe.indexOf("SmoothStreamingMedia")>-1?(ie&&(je=ie.createMssParser(),ie.createMssFragmentProcessor(),ie.registerEvents()),je):Pe.indexOf("MPD")>-1||Pe.indexOf("Patch")>-1?Ic(H).create({debug:re}):je}return O={load:function(Pe){var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Se=new Date,Le=new zs(Pe,at.w.MPD_TYPE);je&&(Le.serviceLocation=je),Ke&&(Le.queryParams=Ke),Le.requestStartDate||(Le.requestStartDate=Se),we.trigger(T.Z.MANIFEST_LOADING_STARTED,{request:Le}),V.load({request:Le,success:function(Ae,Ze,q){var le,ae,ue;if(W)if(q&&q!==Pe?(ae=Te.parseBaseUrl(q),le=q):(Te.isRelative(Pe)&&(Pe=Te.resolve(Pe,window.location.href)),ae=Te.parseBaseUrl(Pe)),Ze!="No Content")if(ee===null&&(ee=Ve(Ae)),ee!==null){W.setMatchers(ee.getMatchers()),W.setIron(ee.getIron());try{ue=ee.parse(Ae)}catch(De){return void we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ie.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ie.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Pe))})}if(ue){if(ue.url=le||Pe,ue.originalUrl||(ue.originalUrl=ue.url),he&&he.get().streaming.enableManifestDurationMismatchFix&&ue.mediaPresentationDuration&&ue.Period_asArray.length>1){var te=ue.Period_asArray.reduce(function(De,Ce){return De+Ce.duration},0);!isNaN(te)&&ue.mediaPresentationDuration>te&&(j.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),ue.mediaPresentationDuration=te)}ue.baseUri=ae,ue.loadedTime=new Date,W.resolveManifestOnLoad(ue),we.trigger(T.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:Ae})}else we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ie.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ie.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Pe))})}else we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ie.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ie.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Pe))});else we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(Ae,Ze,q){we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ie.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Ie.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(Pe,", ").concat(q))})}})},reset:function(){we.off(T.Z.XLINK_READY,ve,O),ie&&ie.reset(),W&&(W.reset(),W=null),V&&(V.abort(),V=null)}},j=re.getLogger(O),we.on(T.Z.XLINK_READY,ve,O),V=bi(H).create({errHandler:F.errHandler,dashMetrics:F.dashMetrics,mediaPlayerModel:F.mediaPlayerModel,requestModifier:F.requestModifier,urlUtils:Te,constants:E.Z,dashConstants:y.Z,errors:Ie,requestTimeout:F.settings.get().streaming.manifestRequestTimeout}),W=kh(H).create({errHandler:_e,dashMetrics:F.dashMetrics,mediaPlayerModel:F.mediaPlayerModel,requestModifier:F.requestModifier,settings:F.settings}),ee=null,O}Am.__dashjs_factory_name="ManifestLoader";var jE=U.Z.getClassFactory(Am);function qh(){var F=this.context,O=(0,m.Z)(F).getInstance();return{error:function(j){O.trigger(T.Z.ERROR,{error:j})}}}qh.__dashjs_factory_name="ErrorHandler";var Im=U.Z.getSingletonFactory(qh),bm=w(1715);function _i(){var F,O,j,V,W,ee,H=this.context,re=(0,m.Z)(H).getInstance();function he(we,Te){if(!Te||!Te.Period_asArray||Te.Period_asArray.length===0)return Promise.resolve();var ie=[];return Te.Period_asArray.forEach(function(_e){ie.push(function(ve,Ve){return new Promise(function(Pe){if(ve&&ve.AdaptationSet_asArray&&ve.AdaptationSet_asArray.length!==0){var je=[];ve.AdaptationSet_asArray.forEach(function(Ke){O.getIsTypeOf(Ke,Ve)&&je.push(function(Se,Le){return new Promise(function(Ae){if(Se.Representation_asArray&&Se.Representation_asArray.length!==0){var Ze=[],q=[];Se.Representation_asArray.forEach(function(le,ae){var ue=O.getCodec(Se,ae,!1),te=function(De,Ce,Be){switch(De){case E.Z.VIDEO:return function(xe,me){return{codec:me,width:xe.width||null,height:xe.height||null,framerate:xe.frameRate||null,bitrate:xe.bandwidth||null}}(Ce,Be);case E.Z.AUDIO:return function(xe,me){var Me=xe.audioSamplingRate||null;return{codec:me,bitrate:xe.bandwidth||null,samplerate:Me}}(Ce,Be);default:return null}}(Le,le,ue);q.push(te),Ze.push(j.supportsCodec(te,Le))}),Promise.all(Ze).then(function(le){Se.Representation_asArray=Se.Representation_asArray.filter(function(ae,ue){return le[ue]||ee.debug("[Stream] Codec ".concat(q[ue].codec," not supported ")),le[ue]}),Ae()}).catch(function(){Ae()})}else Ae()})}(Ke,Ve))}),Promise.all(je).then(function(){ve.AdaptationSet_asArray=ve.AdaptationSet_asArray.filter(function(Ke){var Se=Ke.Representation_asArray&&Ke.Representation_asArray.length>0;return Se||(re.trigger(T.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:Ke}),ee.warn("AdaptationSet has been removed because of no supported Representation")),Se}),Pe()}).catch(function(){Pe()})}else Pe()})}(_e,we))}),Promise.all(ie)}return F={setConfig:function(we){we&&(we.adapter&&(O=we.adapter),we.capabilities&&(j=we.capabilities),we.settings&&(V=we.settings),we.customParametersModel&&(W=we.customParametersModel))},filterUnsupportedFeatures:function(we){return new Promise(function(Te){var ie=[];ie.push(he(E.Z.VIDEO,we)),ie.push(he(E.Z.AUDIO,we)),Promise.all(ie).then(function(){V.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(_e){_e&&_e.Period_asArray&&_e.Period_asArray.length!==0&&_e.Period_asArray.forEach(function(ve){ve.AdaptationSet_asArray=ve.AdaptationSet_asArray.filter(function(Ve){return!Ve.Representation_asArray||Ve.Representation_asArray.length===0||(Ve.Representation_asArray=Ve.Representation_asArray.filter(function(Pe){var je=O.getEssentialPropertiesForRepresentation(Pe);if(je&&je.length>0)for(var Ke=0;Ke<je.length;){if(!j.supportsEssentialProperty(je[Ke]))return ee.debug("[Stream] EssentialProperty not supported: "+je[Ke].schemeIdUri),!1;Ke+=1}return!0}),Ve.Representation_asArray&&Ve.Representation_asArray.length>0)})})}(we),function(_e){var ve=W.getCustomCapabilitiesFilters();ve&&ve.length!==0&&_e&&_e.Period_asArray&&_e.Period_asArray.length!==0&&_e.Period_asArray.forEach(function(Ve){Ve.AdaptationSet_asArray=Ve.AdaptationSet_asArray.filter(function(Pe){return!Pe.Representation_asArray||Pe.Representation_asArray.length===0||(Pe.Representation_asArray=Pe.Representation_asArray.filter(function(je){return!ve.some(function(Ke){return!Ke(je)})}),Pe.Representation_asArray&&Pe.Representation_asArray.length>0)})})}(we),Te()}).catch(function(){Te()})})}},ee=(0,M.Z)(H).getInstance().getLogger(F),F}_i.__dashjs_factory_name="CapabilitiesFilter";var ZE=U.Z.getSingletonFactory(_i),Cm=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function Ws(){var F;return{initialize:function(O){if(F=new Cm,!O)return null;var j=O.indexOf("#");if(j!==-1)for(var V=O.substr(j+1).split("&"),W=0,ee=V.length;W<ee;++W){var H=V[W],re=H.indexOf("=");if(re!==-1){var he=H.substring(0,re);F.hasOwnProperty(he)&&(F[he]=H.substr(re+1))}}},getURIFragmentData:function(){return F}}}Ws.__dashjs_factory_name="URIFragmentModel";var xa=U.Z.getSingletonFactory(Ws);function el(){var F,O=this.context,j=(0,m.Z)(O).getInstance();return{getValue:function(){return F},setValue:function(V){F=V,V&&j.trigger(T.Z.MANIFEST_LOADED,{data:V})}}}el.__dashjs_factory_name="ManifestModel";var bc=U.Z.getSingletonFactory(el),Cc=-.5;function Or(){var F,O,j,V,W=this.context,ee=(0,Ge.Z)(W).getInstance();function H(we,Te){return isNaN(we)?0:we>0?(Te&&O.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):we<Cc?(Te&&O.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(Cc,": ").concat(-50,"% playback speed.")),Cc):we}function re(we,Te){return isNaN(we)?0:we<0?(Te&&O.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):we>1?(Te&&O.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):we}function he(){var we=ee.get().streaming.buffer.stableBufferTime>0?ee.get().streaming.buffer.stableBufferTime:ee.get().streaming.buffer.fastSwitchEnabled?20:12,Te=j.getLiveDelay();return!isNaN(Te)&&Te>0?Math.min(we,Te):we}return F={getCatchupMaxDrift:function(){if(!isNaN(ee.get().streaming.liveCatchup.maxDrift)&&ee.get().streaming.liveCatchup.maxDrift>0)return ee.get().streaming.liveCatchup.maxDrift;var we=V.getServiceDescriptionSettings();return we&&we.liveCatchup&&!isNaN(we.liveCatchup.maxDrift)&&we.liveCatchup.maxDrift>0?we.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return ee.get().streaming.liveCatchup.enabled!==null?ee.get().streaming.liveCatchup.enabled:j.getInitialCatchupModeActivated()},getStableBufferTime:he,getInitialBufferLevel:function(){var we=ee.get().streaming.buffer.initialBufferLevel;return isNaN(we)||we<0?0:Math.min(he(),we)},getRetryAttemptsForType:function(we){var Te=isNaN(ee.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:ee.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return j.getLowLatencyModeEnabled()?ee.get().streaming.retryAttempts[we]*Te:ee.get().streaming.retryAttempts[we]},getRetryIntervalsForType:function(we){var Te=isNaN(ee.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:ee.get().streaming.retryIntervals.lowLatencyReductionFactor;return j.getLowLatencyModeEnabled()?ee.get().streaming.retryIntervals[we]/Te:ee.get().streaming.retryIntervals[we]},getCatchupPlaybackRates:function(we){var Te=ee.get().streaming.liveCatchup.playbackRate;if(!isNaN(Te.min)||!isNaN(Te.max))return{min:H(Te.min,we),max:re(Te.max,we)};var ie=V.getServiceDescriptionSettings();if(ie&&ie.liveCatchup&&(!isNaN(ie.liveCatchup.playbackRate.min)||!isNaN(ie.liveCatchup.playbackRate.max))){var _e=ie.liveCatchup.playbackRate;return{min:H(_e.min,we),max:re(_e.max,we)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(we,Te){try{var ie=ee.get().streaming.abr[we][Te];if(!isNaN(ie)&&ie!==-1)return ie;var _e=V.getServiceDescriptionSettings();return _e&&_e[we]&&!isNaN(_e[we][Te])?_e[we][Te]:-1}catch(ve){return-1}},setConfig:function(we){we.playbackController&&(j=we.playbackController),we.serviceDescriptionController&&(V=we.serviceDescriptionController)},reset:function(){}},O=(0,M.Z)(W).getInstance().getLogger(F),F}Or.__dashjs_factory_name="MediaPlayerModel";var tl=U.Z.getSingletonFactory(Or),Gh=w(1767);function jf(F){var O=(F=F||{}).abrController,j=F.switchHistory,V=F.droppedFramesHistory,W=F.currentRequest,ee=F.useBufferOccupancyABR,H=F.useL2AABR,re=F.useLoLPABR,he=F.streamProcessor?F.streamProcessor.getScheduleController():null,we=F.streamProcessor?F.streamProcessor.getRepresentationInfo():null,Te=F.videoModel?F.videoModel:null;function ie(){return we?we.mediaInfo:null}return{getMediaType:function(){var _e=ie();return _e?_e.type:null},getMediaInfo:ie,getDroppedFramesHistory:function(){return V},getCurrentRequest:function(){return W},getSwitchHistory:function(){return j},getStreamInfo:function(){var _e=ie();return _e?_e.streamInfo:null},getScheduleController:function(){return he},getAbrController:function(){return O},getRepresentationInfo:function(){return we},useBufferOccupancyABR:function(){return ee},useL2AABR:function(){return H},useLoLPABR:function(){return re},getVideoModel:function(){return Te}}}jf.__dashjs_factory_name="RulesContext";var Rc=U.Z.getClassFactory(jf),xc=w(2068);function Hh(){var F=[],O=[];return{push:function(j){j.newValue===xc.Z.NO_CHANGE&&(j.newValue=j.oldValue),F[j.oldValue]||(F[j.oldValue]={noDrops:0,drops:0,dropSize:0});var V=j.newValue-j.oldValue,W=V<0?1:0,ee=W?-V:0,H=W?0:1;if(F[j.oldValue].drops+=W,F[j.oldValue].dropSize+=ee,F[j.oldValue].noDrops+=H,O.push({idx:j.oldValue,noDrop:H,drop:W,dropSize:ee}),O.length>8){var re=O.shift();F[re.idx].drops-=re.drop,F[re.idx].dropSize-=re.dropSize,F[re.idx].noDrops-=re.noDrop}},getSwitchRequests:function(){return F},reset:function(){F=[],O=[]}}}Hh.__dashjs_factory_name="SwitchRequestHistory";var Rm=U.Z.getClassFactory(Hh);function xm(){var F={},O={},j={};return{push:function(V,W,ee){if(W){F[V]||(F[V]=[],O[V]=0,j[V]=0);var H=ee&&ee.droppedVideoFrames?ee.droppedVideoFrames:0,re=ee&&ee.totalVideoFrames?ee.totalVideoFrames:0,he=H-O[V];O[V]=H;var we=re-j[V];j[V]=re;var Te=F[V];isNaN(W)||(Te[W]?(Te[W].droppedVideoFrames+=he,Te[W].totalVideoFrames+=we):Te[W]={droppedVideoFrames:he,totalVideoFrames:we})}},getFrameHistory:function(V){return F[V]},clearForStream:function(V){try{delete F[V],delete O[V],delete j[V]}catch(W){}},reset:function(){F={},O={},j={}}}}xm.__dashjs_factory_name="DroppedFramesHistory";var qE=U.Z.getClassFactory(xm);function Nc(F){var O,j,V,W,ee,H=this.context,re=(F=F||{}).settings,he=(0,m.Z)(H).getInstance();function we(Pe,je,Ke,Se){var Le=Math.pow(.5,Ke/Se.fast);Pe.fastEstimate=(1-Le)*je+Le*Pe.fastEstimate;var Ae=Math.pow(.5,Ke/Se.slow);Pe.slowEstimate=(1-Ae)*je+Ae*Pe.slowEstimate,Pe.totalWeight+=Ke}function Te(Pe,je,Ke){return re.get().streaming.abr.movingAverageMethod!==E.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(Se,Le){var Ae=Se?ee.throughputHalfLife:ee.latencyHalfLife,Ze=Se?V[Le]:W[Le];if(!Ze||Ze.totalWeight<=0)return NaN;var q=Ze.fastEstimate/(1-Math.pow(.5,Ze.totalWeight/Ae.fast)),le=Ze.slowEstimate/(1-Math.pow(.5,Ze.totalWeight/Ae.slow));return Se?Math.min(q,le):Math.max(q,le)}(Pe,je):function(Se,Le,Ae){var Ze=function(le,ae,ue){var te,De;if(le?(te=O[ae],De=ue?3:4):(te=j[ae],De=4),te){if(De>=te.length)De=te.length;else if(le)for(var Ce=1;Ce<De;++Ce){var Be=te[te.length-Ce]/te[te.length-Ce-1];if((Be>=1.3||Be<=.7692307692307692)&&(De+=1)===te.length)break}}else De=0;return De}(Se,Le,Ae),q=(Se?O:j)[Le];return Ze!==0&&q&&q.length!==0?(q=q.slice(-Ze)).reduce(function(le,ae){return le+ae})/q.length:NaN}(Pe,je,Ke)}function ie(Pe,je){return Te(!0,Pe,je)}function _e(Pe){O[Pe]=O[Pe]||[],j[Pe]=j[Pe]||[],V[Pe]=V[Pe]||{fastEstimate:0,slowEstimate:0,totalWeight:0},W[Pe]=W[Pe]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function ve(){O={},j={},V={},W={}}var Ve={push:function(Pe,je,Ke){if(je.trace&&je.trace.length){var Se,Le=je.tresponse.getTime()-je.trequest.getTime()||1,Ae=je._tfinish.getTime()-je.tresponse.getTime()||1,Ze=je.trace.reduce(function(ue,te){return ue+te.b[0]},0),q=0;if((Se=je._fileLoaderType&&je._fileLoaderType===E.Z.FILE_LOADER_TYPES.FETCH?je.trace.reduce(function(ue,te){return ue+te.d},0):Ke?Ae:Le+Ae)!==0&&(q=Math.round(8*Ze/Se)),je.cmsd){var le=je.cmsd.dynamic&&je.cmsd.dynamic.etp?je.cmsd.dynamic.etp:null;if(le){var ae=re.get().streaming.cmsd.abr.etpWeightRatio;ae>0&&ae<=1&&(q=q*(1-ae)+le*ae)}}if(_e(Pe),function(ue,te,De){return ue===E.Z.VIDEO?De<re.get().streaming.cacheLoadThresholds[E.Z.VIDEO]:ue===E.Z.AUDIO?De<re.get().streaming.cacheLoadThresholds[E.Z.AUDIO]:void 0}(Pe,0,Ae)){if(O[Pe].length>0&&!O[Pe].hasCachedEntries)return;O[Pe].hasCachedEntries=!0}else O[Pe]&&O[Pe].hasCachedEntries&&function(ue){delete O[ue],delete j[ue],delete V[ue],delete W[ue],_e(ue)}(Pe);O[Pe].push(q),he.trigger(_.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:q,mediaType:Pe,httpRequest:je}),O[Pe].length>20&&O[Pe].shift(),j[Pe].push(Le),j[Pe].length>20&&j[Pe].shift(),we(V[Pe],q,.001*Ae,ee.throughputHalfLife),we(W[Pe],Le,1,ee.latencyHalfLife)}},getAverageThroughput:ie,getSafeAverageThroughput:function(Pe,je){var Ke=ie(Pe,je);return isNaN(Ke)||(Ke*=re.get().streaming.abr.bandwidthSafetyFactor),Ke},getAverageLatency:function(Pe){return Te(!1,Pe)},reset:ve};return ee={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},ve(),Ve}Nc.__dashjs_factory_name="ThroughputHistory";var GE=U.Z.getClassFactory(Nc);function Zf(){var F,O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve,Pe,je,Ke,Se,Le,Ae,Ze,q,le,ae,ue,te,De=this.context,Ce=(0,M.Z)(De).getInstance(),Be=(0,m.Z)(De).getInstance();function xe(){W={},ee={},re={},H={},Le={},q={},le={},ae={},we===void 0&&(we=!1),Ae&&Ae.reset(),Se=void 0,Ae=void 0,Ze=void 0,clearTimeout(he),he=null}function me(it){var _t=it.request.mediaType,Xt=it.streamId;if(_t&&Xt&&H[Xt]&&te.get().streaming.abr.autoSwitchBitrate[_t]){var Dt=H[Xt][_t];if(Dt){var un=Rc(De).create({abrController:F,streamProcessor:Dt,currentRequest:it.request,useBufferOccupancyABR:q[_t],useL2AABR:le[_t],useLoLPABR:ae[_t],videoModel:ve}),an=j.shouldAbandonFragment(un,Xt);an.quality>xc.Z.NO_CHANGE&&Dt.getFragmentModel().getRequests({state:X.FRAGMENT_MODEL_LOADING,index:it.request.index})[0]&&(re[Xt][_t].state=P.Z.ABANDON_LOAD,Le[Xt][_t].reset(),Le[Xt][_t].push({oldValue:vt(_t,Xt),newValue:an.quality,confidence:1,reason:an.reason}),pt(_t,V.getActiveStreamInfo(),an.quality,an.reason),clearTimeout(he),he=setTimeout(function(){re[Xt][_t].state=P.Z.ALLOW_LOAD,he=null},te.get().streaming.abandonLoadTimeout))}}}function Me(it){it.mediaType===E.Z.VIDEO&&(Se!==void 0&&Ae.push(it.streamId,Se,ve.getPlaybackQuality()),Se=it.newQuality)}function ze(it){var _t,Xt;it.metric!==P.Z.HTTP_REQUEST||!it.value||it.value.type!==at.w.MEDIA_SEGMENT_TYPE||it.mediaType!==E.Z.AUDIO&&it.mediaType!==E.Z.VIDEO||Ze.push(it.mediaType,it.value,te.get().streaming.abr.useDeadTimeLatency),it.metric!==P.Z.BUFFER_LEVEL||it.mediaType!==E.Z.AUDIO&&it.mediaType!==E.Z.VIDEO||(_t=it.mediaType,Xt=.001*it.value.level,te.get().streaming.abr.ABRStrategy===E.Z.ABR_STRATEGY_DYNAMIC&&function(Dt,un){try{var an=Ve.getStableBufferTime(),Qt=an,Bn=.5*an,kn=q[Dt],mr=un>(kn?Bn:Qt);q[Dt]=mr,mr!==kn&&(mr?O.info("["+Dt+"] switching from throughput to buffer occupancy ABR rule (buffer: "+un.toFixed(3)+")."):O.info("["+Dt+"] switching from buffer occupancy to throughput ABR rule (buffer: "+un.toFixed(3)+")."))}catch(vr){O.error(vr)}}(_t,Xt))}function mt(it,_t){try{var Xt;return W[_t]=W[_t]||{},W[_t].hasOwnProperty(it)||(W[_t][it]=0),Xt=function(Dt,un){var an=W[un][Dt],Qt=an;if(!H[un]||!H[un][Dt])return Qt;var Bn=lt(Dt,un);Bn!==void 0&&(Qt=Math.max(an,Bn));var kn=function(mr,vr){try{var bt=Ve.getAbrBitrateParameter("maxBitrate",mr);return bt>-1?Bt(H[vr][mr].getMediaInfo(),bt,vr):void 0}catch(en){return}}(Dt,un);return kn!==void 0&&(Qt=Math.min(Qt,kn)),Qt}(it,_t),Xt=function(Dt,un,an){var Qt=W[an][un],Bn=te.get().streaming.abr.maxRepresentationRatio[un];return isNaN(Bn)||Bn>=1||Bn<0?Dt:Math.min(Dt,Math.round(Qt*Bn))}(Xt,it,_t),Xt=function(Dt,un,an){if(un!==E.Z.VIDEO||!te.get().streaming.abr.limitBitrateByPortal||!H[an]||!H[an][un])return Dt;we||xn();var Qt=H[an][un].getStreamInfo(),Bn=_e.getAdaptationForType(Qt.index,un,Qt).Representation_asArray,kn=Dt;if(Te>0&&ie>0){for(;kn>0&&Bn[kn]&&Te<Bn[kn].width&&Te-Bn[kn-1].width<Bn[kn].width-Te;)kn-=1;for(;kn<Bn.length-1&&Bn[kn].width===Bn[kn+1].width;)kn+=1}return kn}(Xt,it,_t),te.get().streaming.cmsd.enabled&&te.get().streaming.cmsd.abr.applyMb&&(Xt=function(Dt,un,an){if(un!=="video")return Dt;var Qt=je.getMaxBitrate(un);if(Qt<0)return Dt;var Bn=Gt(an,"audio",vt("audio",an));Qt-=Bn?Bn.bitrate/1e3:0;var kn=Bt(H[an][un].getMediaInfo(),Qt,an);return O.debug("Stream ID: "+an+" ["+un+"] Apply max bit rate from CMSD: "+Qt),Math.min(Dt,kn)}(Xt,it,_t)),Xt}catch(Dt){return}}function lt(it,_t){try{return function(Xt,Dt){try{var un=Ve.getAbrBitrateParameter("minBitrate",Xt);if(un>-1){var an=H[Dt][Xt].getMediaInfo(),Qt=jt(an),Bn=Bt(an,un,Dt);return Qt[Bn]&&Bn<Qt.length-1&&Qt[Bn].bitrate<1e3*un&&Bn++,Bn}return}catch(kn){return}}(it,_t)}catch(Xt){return}}function vt(it){var _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return _t||(_t=V.getActiveStreamInfo().id),it&&H[_t]&&H[_t][it]&&_t?(ee[_t]=ee[_t]||{},ee[_t].hasOwnProperty(it)||(ee[_t][it]=0),ee[_t][it]):0}catch(Xt){return 0}}function pt(it,_t,Xt){var Dt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(_t&&_t.id&&it){var un=_t.id,an=vt(it,un);(0,ge.SE)(Xt);var Qt=mt(it,un);Xt!==an&&Xt>=0&&Xt<=Qt&&qt(it,an,Xt,Qt,Dt,un)}}function qt(it,_t,Xt,Dt,un,an){if(it&&H[an]&&H[an][it]){var Qt=H[an][it].getStreamInfo(),Bn=Qt&&Qt.manifestInfo&&Qt.manifestInfo.isDynamic,kn=ue.getCurrentBufferLevel(it);O.info("Stream ID: "+an+" ["+it+"] switch from "+_t+" to "+Xt+"/"+Dt+" (buffer: "+kn+") "+(un?JSON.stringify(un):".")),ee[an]=ee[an]||{},ee[an][it]=Xt;var mr=Gt(an,it,Xt);Be.trigger(T.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:_t,newQuality:Xt,reason:un,streamInfo:Qt,bitrateInfo:mr,maxIdx:Dt,mediaType:it},{streamId:Qt.id,mediaType:it});var vr=Ze.getAverageThroughput(it,Bn);isNaN(vr)||Ke.setSavedBitrateSettings(it,vr)}}function Gt(it,_t,Xt){if(_t&&H&&H[it]&&H[it][_t]){var Dt=jt(H[it][_t].getMediaInfo());return Dt[Xt]?Dt[Xt]:null}return null}function Bt(it,_t,Xt){var Dt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,un=it&&it.type?H[Xt][it.type].getRepresentationInfo():null;if(te.get().streaming.abr.useDeadTimeLatency&&Dt&&un&&un.fragmentDuration){Dt/=1e3;var an=un.fragmentDuration;if(Dt>an)return 0;var Qt=Dt/an;_t*=1-Qt}for(var Bn=jt(it),kn=Bn.length-1;kn>=0;kn--){var mr=Bn[kn];if(1e3*_t>=mr.bitrate)return kn}return 0}function jt(it){var _t=[];if(!it||!it.bitrateList)return _t;for(var Xt,Dt=it.bitrateList,un=it.type,an=0,Qt=Dt.length;an<Qt;an++)(Xt=new _s).mediaType=un,Xt.qualityIndex=an,Xt.bitrate=Dt[an].bandwidth,Xt.width=Dt[an].width,Xt.height=Dt[an].height,Xt.scanType=Dt[an].scanType,_t.push(Xt);return _t}function xn(){if(ve){var it=te.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;Te=ve.getClientWidth()*it,ie=ve.getClientHeight()*it}}return F={initialize:function(){Ae=qE(De).create(),Ze=GE(De).create({settings:te}),(j=(0,Gh.Z)(De).create({dashMetrics:ue,customParametersModel:Pe,mediaPlayerModel:Ve,settings:te})).initialize(),Be.on(_.Z.QUALITY_CHANGE_RENDERED,Me,F),Be.on(_.Z.METRIC_ADDED,ze,F),Be.on(T.Z.LOADING_PROGRESS,me,F)},isPlayingAtTopQuality:function(it){var _t=it?it.id:null,Xt=vt(E.Z.AUDIO,_t),Dt=vt(E.Z.VIDEO,_t);return Xt===mt(E.Z.AUDIO,_t)&&Dt===mt(E.Z.VIDEO,_t)},updateTopQualityIndex:function(it){var _t=it.type,Xt=it.streamInfo.id,Dt=it.representationCount-1;return W[Xt]=W[Xt]||{},W[Xt][_t]=Dt,Dt},clearDataForStream:function(it){Ae&&Ae.clearForStream(it),H[it]&&delete H[it],Le[it]&&delete Le[it],re[it]&&delete re[it]},getThroughputHistory:function(){return Ze},getBitrateList:jt,getQualityForBitrate:Bt,getTopBitrateInfoFor:function(it){var _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(_t||(_t=V.getActiveStreamInfo().id),it&&H&&H[_t]&&H[_t][it]){var Xt=mt(it,_t),Dt=jt(H[_t][it].getMediaInfo());return Dt[Xt]?Dt[Xt]:null}return null},getMinAllowedIndexFor:lt,getMaxAllowedIndexFor:mt,getInitialBitrateFor:function(it,_t){if(function(){if(!Ke||!Ke.hasOwnProperty("getSavedBitrateSettings"))throw new Error(E.Z.MISSING_CONFIG_ERROR)}(),it===E.Z.TEXT)return NaN;var Xt=Ke.getSavedBitrateSettings(it),Dt=Ve.getAbrBitrateParameter("initialBitrate",it),un=te.get().streaming.abr.initialRepresentationRatio[it];if(Dt===-1)if(un>-1){var an=H[_t][it].getStreamInfo(),Qt=_e.getAdaptationForType(an.index,it,an).Representation_asArray;Dt=Array.isArray(Qt)?Qt[Math.max(Math.round(Qt.length*un)-1,0)].bandwidth/1e3:0}else Dt=isNaN(Xt)?it===E.Z.VIDEO?1e3:100:Xt;return Dt},getQualityFor:vt,getAbandonmentStateFor:function(it,_t){return re[it]&&re[it][_t]?re[it][_t].state:null},setPlaybackQuality:pt,checkPlaybackQuality:function(it,_t){try{if(!(it&&H&&H[_t]&&H[_t][it]))return!1;if(Ae){var Xt=ve.getPlaybackQuality();Xt&&Ae.push(_t,Se,Xt)}if(!te.get().streaming.abr.autoSwitchBitrate[it])return!1;var Dt=vt(it,_t),un=Rc(De).create({abrController:F,switchHistory:Le[_t][it],droppedFramesHistory:Ae,streamProcessor:H[_t][it],currentValue:Dt,useBufferOccupancyABR:q[it],useL2AABR:le[it],useLoLPABR:ae[it],videoModel:ve}),an=lt(it,_t),Qt=mt(it,_t),Bn=j.getMaxQuality(un),kn=Bn.quality;return an!==void 0&&(kn>xc.Z.NO_CHANGE?kn:Dt)<an&&(kn=an),kn>Qt&&(kn=Qt),Le[_t][it].push({oldValue:Dt,newValue:kn}),kn>xc.Z.NO_CHANGE&&kn!==Dt&&(re[_t][it].state===P.Z.ALLOW_LOAD||kn<Dt)&&(qt(it,Dt,kn,Qt,Bn.reason,_t),!0)}catch(mr){return!1}},setElementSize:xn,setWindowResizeEventCalled:function(it){we=it},registerStreamType:function(it,_t){var Xt=_t.getStreamInfo().id;H[Xt]||(H[Xt]={}),Le[Xt]||(Le[Xt]={}),re[Xt]||(re[Xt]={}),Le[Xt][it]=Rm(De).create(),H[Xt][it]=_t,re[Xt][it]={},re[Xt][it].state=P.Z.ALLOW_LOAD,function(Dt){var un=te.get().streaming.abr.ABRStrategy;un===E.Z.ABR_STRATEGY_L2A?(q[Dt]=!1,ae[Dt]=!1,le[Dt]=!0):un===E.Z.ABR_STRATEGY_LoLP?(q[Dt]=!1,ae[Dt]=!0,le[Dt]=!1):un===E.Z.ABR_STRATEGY_BOLA?(q[Dt]=!0,ae[Dt]=!1,le[Dt]=!1):un===E.Z.ABR_STRATEGY_THROUGHPUT?(q[Dt]=!1,ae[Dt]=!1,le[Dt]=!1):un===E.Z.ABR_STRATEGY_DYNAMIC&&(q[Dt]=!(!q||!q[Dt])&&q[Dt],ae[Dt]=!1,le[Dt]=!1)}(it),it===E.Z.VIDEO&&xn()},unRegisterStreamType:function(it,_t){try{H[it]&&H[it][_t]&&delete H[it][_t],Le[it]&&Le[it][_t]&&delete Le[it][_t],re[it]&&re[it][_t]&&delete re[it][_t]}catch(Xt){}},setConfig:function(it){it&&(it.streamController&&(V=it.streamController),it.domStorage&&(Ke=it.domStorage),it.mediaPlayerModel&&(Ve=it.mediaPlayerModel),it.customParametersModel&&(Pe=it.customParametersModel),it.cmsdModel&&(je=it.cmsdModel),it.dashMetrics&&(ue=it.dashMetrics),it.adapter&&(_e=it.adapter),it.videoModel&&(ve=it.videoModel),it.settings&&(te=it.settings))},reset:function(){xe(),Be.off(T.Z.LOADING_PROGRESS,me,F),Be.off(_.Z.QUALITY_CHANGE_RENDERED,Me,F),Be.off(_.Z.METRIC_ADDED,ze,F),j&&j.reset()}},O=Ce.getLogger(F),xe(),F}Zf.__dashjs_factory_name="AbrController";var Vh=U.Z.getSingletonFactory(Zf);Vh.QUALITY_DEFAULT=0,U.Z.updateSingletonFactory(Zf.__dashjs_factory_name,Vh);var HE=Vh,Nm=new Map([[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Kh(){var F,O,j,V,W,ee,H,re,he=this.context,we=(0,m.Z)(he).getInstance(),Te=[];function ie(){j&&(j.playbackRate=1,j.removeEventListener("canplay",ie))}function _e(){return Te.length>0}function ve(){if(j&&_e()&&j.playbackRate===0){var Ae=document.createEvent("Event");Ae.initEvent("waiting",!0,!1),j.dispatchEvent(Ae)}}function Ve(Ae,Ze){j&&j.addEventListener(Ae,Ze)}function Pe(Ae,Ze){j&&j.removeEventListener(Ae,Ze)}function je(){return j?j.readyState:NaN}function Ke(){return j?j.buffered:null}function Se(Ae,Ze,q,le,ae){if(j){for(var ue=0;ue<j.textTracks.length;ue++)if(j.textTracks[ue].kind===Ae&&(!Ze||j.textTracks[ue].label==Ze)&&j.textTracks[ue].language===q&&j.textTracks[ue].isTTML===le&&j.textTracks[ue].isEmbedded===ae)return j.textTracks[ue]}return null}function Le(Ae,Ze){return Ae===E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||je()>=Ae?(Ze(),null):function(q,le){var ae=function ue(){Pe(q,ue),le(q)};return Ve(q,ae),{func:ae,event:q}}(Nm.get(Ae),Ze)}return F={addEventListener:Ve,addTextTrack:function(Ae,Ze,q,le,ae){if(!j)return null;var ue=Se(Ae,Ze,q,le,ae);return ue||((ue=j.addTextTrack(Ae,Ze,q)).isEmbedded=ae,ue.isTTML=le),ue},appendChild:function(Ae){j&&(j.appendChild(Ae),Ae.isTTML!==void 0&&(j.textTracks[j.textTracks.length-1].isTTML=Ae.isTTML,j.textTracks[j.textTracks.length-1].isEmbedded=Ae.isEmbedded))},getBufferRange:Ke,getClientHeight:function(){return j?j.clientHeight:NaN},getClientWidth:function(){return j?j.clientWidth:NaN},getElement:function(){return j},getEnded:function(){return j?j.ended:null},getPlaybackQuality:function(){if(!j)return null;var Ae="webkitDroppedFrameCount"in j&&"webkitDecodedFrameCount"in j,Ze=null;return"getVideoPlaybackQuality"in j?Ze=j.getVideoPlaybackQuality():Ae&&(Ze={droppedVideoFrames:j.webkitDroppedFrameCount,totalVideoFrames:j.webkitDroppedFrameCount+j.webkitDecodedFrameCount,creationTime:new Date}),Ze},getPlaybackRate:function(){return j?j.playbackRate:null},getPlayedRanges:function(){return j?j.played:null},getReadyState:je,getSource:function(){return j?j.src:null},getTTMLRenderingDiv:function(){return ee},getTextTrack:Se,getTextTracks:function(){return j?j.textTracks:[]},getTime:function(){return j?isNaN(V)?j.currentTime:V:null},getVideoHeight:function(){return j?j.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(j){var Ae=j.parentNode.host||j.parentNode;return Ae?j.getBoundingClientRect().left-Ae.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(j){var Ae=j.parentNode.host||j.parentNode;return Ae?j.getBoundingClientRect().top-Ae.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return j?j.videoWidth:NaN},getVttRenderingDiv:function(){return H},initialize:function(){we.on(T.Z.PLAYBACK_PLAYING,ve,this)},isPaused:function(){return j?j.paused:null},isSeeking:function(){return j?j.seeking||!isNaN(V):null},isStalled:_e,pause:function(){j&&(j.pause(),j.autoplay=!1)},play:function(){if(j){j.autoplay=!0;var Ae=j.play();Ae&&Ae.catch&&typeof Promise<"u"&&Ae.catch(function(Ze){Ze.name==="NotAllowedError"&&we.trigger(T.Z.PLAYBACK_NOT_ALLOWED),O.warn("Caught pending play exception - continuing (".concat(Ze,")"))})}},removeChild:function(Ae){j&&j.removeChild(Ae)},removeEventListener:Pe,reset:function(){clearTimeout(re),we.off(T.Z.PLAYBACK_PLAYING,ve,this)},setCurrentTime:function(Ae,Ze){j&&(W&&W.func&&W.event&&Pe(W.event,W.func),V=Ae,W=Le(E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(j)if(j.currentTime!==V)try{V=Ze?function(q){var le=Ke(),ae=q,ue=9999999999;if(le)for(var te=0;te<le.length;te++){var De=le.start(te),Ce=le.end(te),Be=Math.abs(De-q),xe=Math.abs(Ce-q);if(q>=De&&q<=Ce)return q;Be<ue&&(ue=Be,ae=De),xe<ue&&(ue=xe,ae=Ce)}return ae}(V):V,isNaN(V)||(j.currentTime=V),V=NaN}catch(q){j.readyState===0&&q.code===q.INVALID_STATE_ERR&&(re=setTimeout(function(){j.currentTime=V,V=NaN},400))}else V=NaN}))},setElement:function(Ae){if(!(Ae==null||Ae&&/^(VIDEO|AUDIO)$/i.test(Ae.nodeName)))throw"element is not video or audio DOM type!";(j=Ae)&&(j.preload="auto")},setPlaybackRate:function(Ae){var Ze=arguments.length>1&&arguments[1]!==void 0&&arguments[1];j&&(!Ze&&j.readyState<=2&&Ae>0?j.addEventListener("canplay",ie):j.playbackRate=Ae)},setSource:function(Ae){j&&(Ae?j.src=Ae:(j.removeAttribute("src"),j.load()))},setStallState:function(Ae,Ze){(function(q,le){le?function(ae){ae!==null&&j&&!j.seeking&&Te.indexOf(ae)===-1&&Te.push(ae)}(q):function(ae){var ue=Te.indexOf(ae);ae!==null&&ue!==-1&&Te.splice(ue,1)}(q)})(Ae,Ze)},setTTMLRenderingDiv:function(Ae){(ee=Ae).style.position="absolute",ee.style.display="flex",ee.style.overflow="hidden",ee.style.pointerEvents="none",ee.style.top=0,ee.style.left=0},setVttRenderingDiv:function(Ae){H=Ae},waitForReadyState:Le,setDisableRemotePlayback:function(Ae){j&&(j.disableRemotePlayback=Ae)}},O=(0,M.Z)(he).getInstance().getLogger(F),V=NaN,F}Kh.__dashjs_factory_name="VideoModel";var VE=U.Z.getSingletonFactory(Kh),Mm=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],zh="dashjs_?_bitrate",nl="dashjs_?_settings",bs="localStorage",Dm="lastBitrate",Pm="lastMediaSettings";function Om(F){F=F||{};var O,j,V,W=this.context,ee=F.settings;function H(Te){if(V!==void 0)return V;var ie;V=!1;try{typeof window<"u"&&(ie=window[Te])}catch(_e){return j.warn("DOMStorage access denied: "+_e.message),V}if(!ie||Te!==bs)return V;try{ie.setItem("1","1"),ie.removeItem("1"),V=!0}catch(_e){j.warn("DOMStorage is supported, but cannot be used: "+_e.message)}return V}function re(){var Te=6e5;return Math.round(new Date().getTime()/Te)*Te}function he(Te,ie){return H(Te)&&ee.get().streaming[ie+"CachingInfo"].enabled}function we(){if(!ee)throw new Error(E.Z.MISSING_CONFIG_ERROR)}return O={getSavedBitrateSettings:function(Te){if(we(),!ee.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var ie=NaN;if(he(bs,Dm)){var _e=zh.replace(/\?/,Te);try{var ve=JSON.parse(localStorage.getItem(_e))||{},Ve=new Date().getTime()-parseInt(ve.timestamp,10)>=ee.get().streaming.lastBitrateCachingInfo.ttl||!1,Pe=parseFloat(ve.bitrate);isNaN(Pe)||Ve?Ve&&localStorage.removeItem(_e):(ie=Pe,j.debug("Last saved bitrate for "+Te+" was "+Pe))}catch(je){return null}}return ie},setSavedBitrateSettings:function(Te,ie){if(he(bs,Dm)&&ie){var _e=zh.replace(/\?/,Te);try{localStorage.setItem(_e,JSON.stringify({bitrate:ie.toFixed(3),timestamp:re()}))}catch(ve){j.error(ve.message)}}},getSavedMediaSettings:function(Te){if(we(),!ee.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var ie=null;if(he(bs,Pm)){var _e=nl.replace(/\?/,Te);try{var ve=JSON.parse(localStorage.getItem(_e))||{},Ve=new Date().getTime()-parseInt(ve.timestamp,10)>=ee.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;ie=ve.settings,Ve&&(localStorage.removeItem(_e),ie=null)}catch(Pe){return null}}return ie},setSavedMediaSettings:function(Te,ie){if(he(bs,Pm)){var _e=nl.replace(/\?/,Te);try{localStorage.setItem(_e,JSON.stringify({settings:ie,timestamp:re()}))}catch(ve){j.error(ve.message)}}}},j=(0,M.Z)(W).getInstance().getLogger(O),H(bs)&&Mm.forEach(function(Te){var ie=localStorage.getItem(Te.oldKey);if(ie){localStorage.removeItem(Te.oldKey);try{localStorage.setItem(Te.newKey,ie)}catch(_e){j.error(_e.message)}}}),O}Om.__dashjs_factory_name="DOMStorage";var Fl=U.Z.getSingletonFactory(Om),qf=w(2032),Gf=w(2011);function Hf(){var F,O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve=this.context;function Ve(Se,Le,Ae,Ze){var q=null,le=Se?_e.resolve(Se.path):null,ae=Ze||{init:!0,url:le?le.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:Le};O.debug("Start searching for initialization.");var ue=Ke(ae);re.load({request:ue,success:function(te){if(ae.bytesLoaded=ae.range.end,!(q=V.findInitRange(te)))return ae.range.end=ae.bytesLoaded+ae.bytesToLoad,Ve(Se,Le,Ae,ae);Se.range=q,Ae(Se)},error:function(){Ae(Se)}}),O.debug("Perform init search: "+ae.url)}function Pe(Se,Le,Ae,Ze,q,le){if(Ae&&(Ae.start===void 0||Ae.end===void 0)){var ae=Ae?Ae.toString().split("-"):null;Ae=ae?{start:parseFloat(ae[0]),end:parseFloat(ae[1])}:null}q=q||je;var ue=null,te=null,De=!!Ae,Ce=Se?_e.resolve(Se.path):null,Be={init:!1,url:Ce?Ce.url:void 0,range:De?Ae:{start:0,end:1500},searching:!De,bytesLoaded:le?le.bytesLoaded:0,bytesToLoad:1500,mediaType:Le},xe=Ke(Be);re.load({request:xe,success:function(me){var Me=Be.bytesToLoad,ze=me.byteLength;if(Be.bytesLoaded=Be.range.end-Be.range.start,ue=V.parse(me),(te=ue.getBox("sidx"))&&te.isComplete){var mt,lt,vt=te.references;if(vt!=null&&vt.length>0&&(mt=vt[0].reference_type===1),mt){var pt,qt,Gt,Bt;O.debug("Initiate multiple SIDX load."),Be.range.end=Be.range.start+te.size;var jt=[],xn=0,it=(te.offset||Be.range.start)+te.size,_t=function(Dt){Dt?(jt=jt.concat(Dt),++xn>=qt&&(jt.sort(function(un,an){return un.startTime-an.startTime<0?-1:0}),q(jt,Se,Ze))):q(null,Se,Ze)};for(pt=0,qt=vt.length;pt<qt;pt++)Gt=it,Bt=it+vt[pt].referenced_size-1,it+=vt[pt].referenced_size,Pe(Se,Le,{start:Gt,end:Bt},Ze,_t,Be)}else O.debug("Parsing segments from SIDX. representation "+Le+" - id: "+Se.id+" for range : "+Be.range.start+" - "+Be.range.end),lt=function(Dt,un){for(var an,Qt,Bn,kn,mr=Dt.references,vr=mr.length,bt=Dt.timescale,en=Dt.earliest_presentation_time,Zt=un.range.start+Dt.offset+Dt.first_offset+Dt.size,mn=[],bn=0;bn<vr;bn++)Bn=mr[bn].subsegment_duration,kn=mr[bn].referenced_size,(an=new Gf.Z).duration=Bn,an.startTime=en,an.timescale=bt,Qt=Zt+kn-1,an.mediaRange=Zt+"-"+Qt,mn.push(an),en+=Bn,Zt+=kn;return mn}(te,Be),q(lt,Se,Ze)}else{if(te)Be.range.start=te.offset||Be.range.start,Be.range.end=Be.range.start+(te.size||Me);else{if(ze<Be.bytesLoaded)return void q(null,Se,Ze);var Xt=ue.getLastBox();Xt&&Xt.size?(Be.range.start=Xt.offset+Xt.size,Be.range.end=Be.range.start+Me):Be.range.end+=Me}Pe(Se,Le,Be.range,Ze,null,Be)}},error:function(){q(null,Se,Ze)}}),O.debug("Perform SIDX load for type ".concat(Le," : ").concat(Be.url," with range ").concat(Be.range.start," - ").concat(Be.range.end))}function je(Se,Le,Ae){Ae({segments:Se,representation:Le,error:Se?void 0:new ce.Z(he.SEGMENT_BASE_LOADER_ERROR_CODE,he.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function Ke(Se){if(Se.url){var Le=new Z.Z;return Le.setInfo(Se),Le}}return F={setConfig:function(Se){Se.baseURLController&&(_e=Se.baseURLController),Se.dashMetrics&&(ee=Se.dashMetrics),Se.mediaPlayerModel&&(H=Se.mediaPlayerModel),Se.errHandler&&(j=Se.errHandler),Se.boxParser&&(V=Se.boxParser),Se.debug&&(O=Se.debug.getLogger(F)),Se.requestModifier&&(W=Se.requestModifier),Se.errors&&(he=Se.errors),Se.urlUtils&&(ie=Se.urlUtils),Se.constants&&(we=Se.constants),Se.dashConstants&&(Te=Se.dashConstants)},initialize:function(){re=bi(ve).create({errHandler:j,dashMetrics:ee,mediaPlayerModel:H,requestModifier:W,boxParser:V,errors:he,urlUtils:ie,constants:we,dashConstants:Te})},loadInitialization:function(Se,Le){return new Promise(function(Ae){Ve(Se,Le,Ae)})},loadSegments:function(Se,Le,Ae){return new Promise(function(Ze){Pe(Se,Le,Ae,Ze)})},reset:function(){re&&(re.abort(),re=null)}}}Hf.__dashjs_factory_name="SegmentBaseLoader";var Lm=U.Z.getSingletonFactory(Hf);function Vf(F){var O;F=F||{};var j=new DataView(F.data),V=0;function W(H,re){var he=!0,we=0;if(re===void 0&&(re=!1),H.tag>16777215?(j.getUint32(V)!==H.tag&&(he=!1),we=4):H.tag>65535?(256*j.getUint16(V)+j.getUint8(V+2)!==H.tag&&(he=!1),we=3):H.tag>255?(j.getUint16(V)!==H.tag&&(he=!1),we=2):(j.getUint8(V)!==H.tag&&(he=!1),we=1),!he&&H.required&&!re)throw new Error("required tag not found");return he&&(V+=we),he}function ee(H){var re=1,he=128,we=-1,Te=0,ie=j.getUint8(V),_e=0;for(_e=0;_e<8;_e+=1){if((ie&he)===he){Te=H===void 0?ie&~he:ie,we=_e;break}he>>=1}for(_e=0;_e<we;_e+=1,re+=1)Te=Te<<8|255&j.getUint8(V+re);return V+=re,Te}return O={getPos:function(){return V},setPos:function(H){V=H},consumeTag:W,consumeTagAndSize:function(H,re){var he=W(H,re);return he&&ee(),he},parseTag:function(H){var re;return W(H),re=ee(),O[H.parse](re)},skipOverElement:function(H,re){var he,we=W(H,re);return we&&(he=ee(),V+=he),we},getMatroskaCodedNum:ee,getMatroskaFloat:function(H){var re;switch(H){case 4:re=j.getFloat32(V),V+=4;break;case 8:re=j.getFloat64(V),V+=8}return re},getMatroskaUint:function(H){if(H>4)return function(we){for(var Te=Math.floor(Number.MAX_SAFE_INTEGER/256),ie=0,_e=0;_e<we;_e+=1){if(ie>Te)throw new Error("Value exceeds safe integer limit");ie*=256;var ve=j.getUint8(V+_e);if(ie>Number.MAX_SAFE_INTEGER-ve)throw new Error("Value exceeds safe integer limit");ie+=ve}return V+=we,ie}(H);for(var re=0,he=0;he<H;he+=1)re<<=8,re|=255&j.getUint8(V+he);return V+=H,re>>>0},moreData:function(){return V<j.byteLength}}}Vf.__dashjs_factory_name="EBMLParser";var Yh=U.Z.getClassFactory(Vf);function Ul(){var F,O,j,V,W,ee,H,re,he,we,Te=this.context;function ie(_e){var ve=new Z.Z;return ve.setInfo(_e),ve}return F={setConfig:function(_e){if(!(_e.baseURLController&&_e.dashMetrics&&_e.mediaPlayerModel&&_e.errHandler))throw new Error(E.Z.MISSING_CONFIG_ERROR);we=_e.baseURLController,ee=_e.dashMetrics,H=_e.mediaPlayerModel,V=_e.errHandler,he=_e.errors,O=_e.debug.getLogger(F),W=_e.requestModifier},initialize:function(){re=bi(Te).create({errHandler:V,dashMetrics:ee,mediaPlayerModel:H,requestModifier:W,errors:he})},loadInitialization:function(_e,ve){return new Promise(function(Ve){var Pe=null,je=_e?we.resolve(_e.path):null,Ke=_e?_e.range.split("-"):null,Se={range:{start:Ke?parseFloat(Ke[0]):null,end:Ke?parseFloat(Ke[1]):null},request:Pe,url:je?je.url:void 0,init:!0,mediaType:ve};O.info("Start loading initialization."),Pe=ie(Se),re.load({request:Pe,success:function(){Ve(_e)},error:function(){Ve(_e)}}),O.debug("Perform init load: "+Se.url)})},loadSegments:function(_e,ve,Ve){return new Promise(function(Pe){var je=null,Ke=_e?we.resolve(_e.path):null,Se=Ke?Ke.url:void 0;je=ie({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:je,url:Se,init:!1,mediaType:ve}),O.debug("Parsing ebml header"),re.load({request:je,success:function(Le){(function(Ae,Ze,q,le){if(Ae&&Ae.byteLength!==0){var ae,ue,te,De,Ce=Yh(Te).create({data:Ae}),Be=q?q.split("-"):null,xe=null,me={url:Ze,range:{start:Be?parseFloat(Be[0]):null,end:Be?parseFloat(Be[1]):null},request:xe};for(O.debug("Parse EBML header: "+me.url),Ce.skipOverElement(j.EBML),Ce.consumeTag(j.Segment),te=Ce.getMatroskaCodedNum(),te+=Ce.getPos(),De=Ce.getPos();Ce.moreData()&&!Ce.consumeTagAndSize(j.Segment.Info,!0);)if(!(Ce.skipOverElement(j.Segment.SeekHead,!0)||Ce.skipOverElement(j.Segment.Tracks,!0)||Ce.skipOverElement(j.Segment.Cues,!0)||Ce.skipOverElement(j.Void,!0)))throw new Error("no valid top level element found");for(;ae===void 0;){var Me=Ce.getMatroskaCodedNum(!0),ze=Ce.getMatroskaCodedNum();Me===j.Segment.Info.Duration.tag?ae=Ce[j.Segment.Info.Duration.parse](ze):Ce.setPos(Ce.getPos()+ze)}xe=ie(me),re.load({request:xe,success:function(mt){ue=function(lt,vt,pt,qt){var Gt,Bt,jt,xn,it,_t,Xt,Dt;for(jt=[],it=0,_t=(Bt=function(un){var an,Qt,Bn=[],kn=Yh(Te).create({data:un});for(kn.consumeTagAndSize(j.Segment.Cues);kn.moreData()&&kn.consumeTagAndSize(j.Segment.Cues.CuePoint,!0);){for((an={}).CueTime=kn.parseTag(j.Segment.Cues.CuePoint.CueTime),an.CueTracks=[];kn.moreData()&&kn.consumeTag(j.Segment.Cues.CuePoint.CueTrackPositions,!0);){var mr=kn.getMatroskaCodedNum(),vr=kn.getPos();if((Qt={}).Track=kn.parseTag(j.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Qt.Track===0)throw new Error("Cue track cannot be 0");Qt.ClusterPosition=kn.parseTag(j.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),an.CueTracks.push(Qt),kn.setPos(vr+mr)}if(an.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Bn.push(an)}if(Bn.length===0)throw new Error("mandatory cuepoint not found");return Bn}(lt)).length;it<_t;it+=1)xn=new Gf.Z,Gt=it<Bt.length-1?Bt[it+1].CueTime-Bt[it].CueTime:qt-Bt[it].CueTime,xn.duration=Gt,xn.startTime=Bt[it].CueTime,xn.timescale=1e3,Xt=Bt[it].CueTracks[0].ClusterPosition+vt,Dt=it<Bt.length-1?Bt[it+1].CueTracks[0].ClusterPosition+vt-1:pt-1,xn.mediaRange=Xt+"-"+Dt,jt.push(xn);return O.debug("Parsed cues: "+jt.length+" cues."),jt}(mt,De,te,ae),le(ue)},error:function(){O.error("Download Error: Cues "+me.url),le(null)}}),O.debug("Perform cues load: "+me.url+" bytes="+me.range.start+"-"+me.range.end)}else le(null)})(Le,Se,Ve,function(Ae){Pe({segments:Ae,representation:_e,error:Ae?void 0:new ce.Z(he.SEGMENT_BASE_LOADER_ERROR_CODE,he.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){Pe({representation:_e,error:new ce.Z(he.SEGMENT_BASE_LOADER_ERROR_CODE,he.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){re&&(re.abort(),re=null)}},j={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},F}Ul.__dashjs_factory_name="WebmSegmentBaseLoader";var Kf=U.Z.getSingletonFactory(Ul);function Bl(F){F=F||{};var O,j,V,W=this.context,ee=F.eventBus,H=F.events,re=F.dashMetrics,he=F.mediaPlayerModel,we=F.errHandler,Te=F.baseURLController,ie=F.debug,_e=F.boxParser,ve=F.requestModifier,Ve=F.errors;function Pe(je){return(je?je.split("/")[1]:"").toLowerCase()==="webm"}return O={initialize:function(){j.initialize(),V.initialize()},getSegmentBaseInitSegment:function(je){return Pe(je.representation.mimeType)?V.loadInitialization(je.representation,je.mediaType):j.loadInitialization(je.representation,je.mediaType)},getSegmentList:function(je){return Pe(je.mimeType)?V.loadSegments(je.representation,je.mediaType,je.representation?je.representation.indexRange:null):j.loadSegments(je.representation,je.mediaType,je.representation?je.representation.indexRange:null)},reset:function(){j.reset(),V.reset()}},j=Lm(W).getInstance(),V=Kf(W).getInstance(),j.setConfig({baseURLController:Te,dashMetrics:re,mediaPlayerModel:he,errHandler:we,eventBus:ee,events:H,errors:Ve,debug:ie,boxParser:_e,requestModifier:ve}),V.setConfig({baseURLController:Te,dashMetrics:re,mediaPlayerModel:he,errHandler:we,eventBus:ee,events:H,errors:Ve,debug:ie,requestModifier:ve}),O}Bl.__dashjs_factory_name="SegmentBaseController";var km=U.Z.getSingletonFactory(Bl),Wh=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},zf=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},$h=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},KE=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function Yf(F,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(F,V.key,V)}}var zE=function(){function F(V){var W=this;(function(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")})(this,F),this.valid=V[0]=="/",this.path=V.split("/").filter(function(ee){return ee.length!==0}).map(function(ee){var H={name:ee},re=ee.indexOf("[");if(re!=-1){H.name=ee.substring(0,re);var he=ee.substring(re+1,ee.length-1);W.valid=W.valid&&he.indexOf("[")==-1;var we=he.indexOf("=");we!=-1?(H.attribute={name:he.substring(1,we),value:he.substring(we+1)},["'",'"'].indexOf(H.attribute.value[0])!=-1&&(H.attribute.value=H.attribute.value.substring(1,H.attribute.value.length-1))):H.position=parseInt(he,10)-1}return H})}var O,j;return O=F,(j=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(V,W){for(var ee=null,H=V,re=1,he="MPD";re<this.path.length&&H!==null;){ee=H;var we=this.path[re];if(he=we.name,re!==this.path.length-1||!he.startsWith("@")&&he!=="text()"){var Te=ee[he+"_asArray"]||[];Te.length===0&&ee[he]&&Te.push(ee[he]),we.position?H=Te[we.position]||null:we.attribute?function(){var ie=we.attribute;H=Te.filter(function(_e){return _e[ie.name]==ie.value})[0]||null}():H=Te[0]||null}re++}return H===null?null:he.startsWith("@")?{name:he.substring(1),leaf:H,target:H}:he==="text()"?{name:"__text",leaf:H,target:H}:{name:he,leaf:H,target:W?ee:H}}}])&&Yf(O.prototype,j),F}();function ii(F,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(F,V.key,V)}}var Fm=function(){function F(V,W,ee){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,F),this.action=V,this.xpath=W,this.value=ee,this.position=null}var O,j;return O=F,(j=[{key:"getMpdTarget",value:function(V){var W=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(V,W)}}])&&ii(O.prototype,j),F}();function Wf(){var F,O,j=this.context;return F={getIsPatch:function(V){return V&&V.hasOwnProperty(y.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(V){return V&&V.hasOwnProperty(y.Z.PUBLISH_TIME)?new Date(V[y.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(V){return V&&V.hasOwnProperty(y.Z.ORIGINAL_PUBLISH_TIME)?new Date(V[y.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(V){return V&&V[y.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(V){return V?(V.__children||[]).map(function(W){var ee=Object.keys(W)[0];if(ee!=="add"&&ee!=="remove"&&ee!=="replace")return O.warn("Ignoring node of invalid action: ".concat(ee)),null;var H=W[ee],re=H.sel;if(ee==="add"&&H.type){if(!H.type.startsWith("@"))return O.warn("Ignoring add action for prefixed namespace declaration: ".concat(H.type,"=").concat(H.__text)),null;re="".concat(re,"/").concat(H.type)}var he=new zE(re);if(!he.isValid())return O.warn("Ignoring action with invalid selector: ".concat(ee," - ").concat(re)),null;var we=null;he.findsAttribute()||he.findsTextReplace()?we=H.__text||"":ee!=="remove"&&(we=H.__children.reduce(function(ie,_e){var ve=Object.keys(_e)[0];return ve!=="#text"&&(ie[ve]=ie[ve]||[],ie[ve].push(_e[ve])),ie},{}));var Te=new Fm(ee,he,we);return ee==="add"&&(Te.position=H.pos),Te}).filter(function(W){return!!W}):[]}},O=(0,M.Z)(j).getInstance().getLogger(F),F}Wf.__dashjs_factory_name="PatchManifestModel";var YE=U.Z.getSingletonFactory(Wf);function Um(){var F,O,j,V,W,ee,H,re=this.context;function he(ae,ue,te){var De,Ce=O.getAdaptationsForType(V[0].mpd.manifest,ae,ue);if(!Ce||Ce.length===0)return null;if(Ce.length>1&&te){var Be=ie(te,ue);if(W[te.id]&&W[te.id][ue]){for(var xe=0,me=Ce.length;xe<me;xe++)if(we(W[te.id][ue],Be[xe]))return Ce[xe]}for(var Me=0,ze=Ce.length;Me<ze;Me++)if(De=Ce[Me],O.getRolesForAdaptation(De).filter(function(mt){return mt.value===y.Z.MAIN})[0])return Ce[Me]}return Ce[0]}function we(ae,ue){if(!ae||!ue)return!1;var te=ae.id===ue.id,De=ae.codec===ue.codec,Ce=ae.viewpoint===ue.viewpoint,Be=JSON.stringify(ae.viewpointsWithSchemeIdUri)===JSON.stringify(ue.viewpointsWithSchemeIdUri),xe=ae.lang===ue.lang,me=ae.roles.toString()===ue.roles.toString(),Me=JSON.stringify(ae.rolesWithSchemeIdUri)===JSON.stringify(ue.rolesWithSchemeIdUri),ze=ae.accessibility.toString()===ue.accessibility.toString(),mt=JSON.stringify(ae.accessibilitiesWithSchemeIdUri)===JSON.stringify(ue.accessibilitiesWithSchemeIdUri),lt=ae.audioChannelConfiguration.toString()===ue.audioChannelConfiguration.toString(),vt=JSON.stringify(ae.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(ue.audioChannelConfigurationsWithSchemeIdUri);return te&&De&&Ce&&Be&&xe&&me&&Me&&ze&&mt&&lt&&vt}function Te(ae,ue,te,De,Ce,Be){var xe,me,Me,ze,mt,lt,vt=[];if(!De||De.length===0)return[];var pt=O.getAdaptationsForPeriod(ue);for(ze=0,lt=De.length;ze<lt;ze++)if(xe=De[ze],me=Se(pt[Me=O.getIndexForAdaptation(xe,ae,te.index)]),Be){var qt=me.accessibility.length;for(mt=0;mt<qt;mt++)if(me){var Gt=me.accessibility[mt];if(Gt.indexOf("cea-608:")===0){var Bt=Gt.substring(8).split(";");if(Bt[0].substring(0,2)==="CC")for(mt=0;mt<Bt.length;mt++)me||(me=Se.call(this,pt[Me])),Le(me,Bt[mt].substring(0,3),Bt[mt].substring(4)),vt.push(me),me=null;else for(mt=0;mt<Bt.length;mt++)me||(me=Se.call(this,pt[Me])),Le(me,"CC"+(mt+1),Bt[mt]),vt.push(me),me=null}else Gt.indexOf("cea-608")===0&&(Le(me,ee.CC1,"eng"),vt.push(me),me=null)}}else Ce===ee.IMAGE?(me.type=ee.IMAGE,vt.push(me),me=null):me&&vt.push(me);return vt}function ie(ae,ue,te){var De=V,Ce=te,Be=[];if(Ce)Ze(),De=_e(Ce);else{if(!(V.length>0))return Be;Ce=V[0].mpd.manifest}var xe=Ke(ae,De),me=O.getAdaptationsForType(Ce,ae?ae.index:null,ue);return Be=Te(Ce,xe,ae,me,ue),ue===ee.TEXT&&(me=O.getAdaptationsForType(Ce,ae?ae.index:null,ee.VIDEO),Be=Be.concat(Te(Ce,xe,ae,me,ue,!0))),Be}function _e(ae){var ue=ve(ae);return O.getRegularPeriods(ue)}function ve(ae){var ue=Pe(ae);return O.getMpd(ue)}function Ve(){V=[],W={}}function Pe(ae){return ae||(V.length>0?V[0].mpd.manifest:null)}function je(ae){try{var ue=Ke(ae.streamInfo,V),te=O.getAdaptationsForPeriod(ue);return ae&&ae.streamInfo&&ae.streamInfo.id!==void 0&&te?te[ae.index]:null}catch(De){return null}}function Ke(ae,ue){for(var te=ue.length,De=0;De<te;De++){var Ce=ue[De];if(ae&&ae.id===Ce.id)return Ce}return null}function Se(ae){if(!ae)return null;var ue,te,De,Ce,Be,xe=new zf,me=ae.period.mpd.manifest.Period_asArray[ae.period.index].AdaptationSet_asArray[ae.index];if(xe.id=ae.id,xe.index=ae.index,xe.type=ae.type,xe.streamInfo=Ae(ae.period),xe.representationCount=O.getRepresentationCount(me),xe.labels=O.getLabelsForAdaptation(me),xe.lang=O.getLanguageForAdaptation(me),xe.segmentAlignment=O.getSegmentAlignment(me),xe.subSegmentAlignment=O.getSubSegmentAlignment(me),ue=O.getViewpointForAdaptation(me),xe.viewpoint=ue.length?ue[0].value:void 0,xe.viewpointsWithSchemeIdUri=ue,Be=O.getAccessibilityForAdaptation(me),xe.accessibility=Be.map(function(vt){var pt=vt.value,qt=pt;return vt.schemeIdUri&&vt.schemeIdUri.search("cea-608")>=0&&H!==void 0&&(qt=pt?"cea-608:"+pt:"cea-608",xe.embeddedCaptions=!0),qt}),xe.accessibilitiesWithSchemeIdUri=Be,te=O.getAudioChannelConfigurationForAdaptation(me),xe.audioChannelConfiguration=te.map(function(vt){return vt.value}),xe.audioChannelConfigurationsWithSchemeIdUri=te,xe.audioChannelConfiguration.length===0&&Array.isArray(me.Representation_asArray)&&me.Representation_asArray.length>0&&(De=O.getAudioChannelConfigurationForRepresentation(me.Representation_asArray[0]),xe.audioChannelConfiguration=De.map(function(vt){return vt.value}),xe.audioChannelConfigurationsWithSchemeIdUri=De),Ce=O.getRolesForAdaptation(me),xe.roles=Ce.map(function(vt){return vt.value}),xe.rolesWithSchemeIdUri=Ce,xe.codec=O.getCodec(me),xe.mimeType=O.getMimeType(me),xe.contentProtection=O.getContentProtectionData(me),xe.bitrateList=O.getBitrateListForAdaptation(me),xe.selectionPriority=O.getSelectionPriority(me),xe.contentProtection){var Me=xe.contentProtection.map(function(vt){return O.getKID(vt)}).filter(function(vt){return vt!==null});if(Me.length){var ze=Me[0];xe.contentProtection.forEach(function(vt){vt.keyId=ze})}}if(xe.isText=O.getIsText(me),xe.supplementalProperties=O.getSupplementalPropertiesForAdaptation(me),(!xe.supplementalProperties||Object.keys(xe.supplementalProperties).length===0)&&Array.isArray(me.Representation_asArray)&&me.Representation_asArray.length>0){var mt=me.Representation_asArray.map(function(vt){return O.getSupplementalPropertiesForRepresentation(vt)});mt.every(function(vt){return JSON.stringify(vt)===JSON.stringify(mt[0])})&&(xe.supplementalProperties=mt[0])}if(xe.supplementalPropertiesAsArray=O.getSupplementalPropertiesAsArrayForAdaptation(me),(!xe.supplementalPropertiesAsArray||xe.supplementalPropertiesAsArray.length===0)&&Array.isArray(me.Representation_asArray)&&me.Representation_asArray.length>0){var lt=me.Representation_asArray.map(function(vt){return O.getSupplementalPropertiesAsArrayForRepresentation(vt)});lt.every(function(vt){return JSON.stringify(vt)===JSON.stringify(lt[0])})&&(xe.supplementalPropertiesAsArray=lt[0])}return xe.essentialProperties=O.getEssentialPropertiesForAdaptation(me),xe.essentialPropertiesAsArray=O.getEssentialPropertiesAsArrayForAdaptation(me),xe.isFragmented=O.getIsFragmented(me),xe.isEmbedded=!1,xe}function Le(ae,ue,te){ae.id=ue,ae.index=100+parseInt(ue.substring(2,3)),ae.type=ee.TEXT,ae.codec="cea-608-in-SEI",ae.isEmbedded=!0,ae.isFragmented=!1;var De=Sc()(te);ae.lang=De||te,ae.roles=["caption"],ae.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function Ae(ae){var ue,te,De=new $h;return De.id=ae.id,De.index=ae.index,De.start=ae.start,De.duration=ae.duration,De.manifestInfo=(ue=ae.mpd,(te=new KE).dvrWindowSize=ue.timeShiftBufferDepth,te.loadedTime=ue.manifest.loadedTime,te.availableFrom=ue.availabilityStartTime,te.minBufferTime=ue.manifest.minBufferTime,te.maxFragmentDuration=ue.maxSegmentDuration,te.duration=O.getDuration(ue.manifest),te.isDynamic=O.getIsDynamic(ue.manifest),te.serviceDescriptions=O.getServiceDescriptions(ue.manifest),te.protocol=ue.manifest.protocol,te),De.isLast=ae.mpd.manifest.Period_asArray.length===1||Math.abs(De.start+De.duration-De.manifestInfo.duration)<1,De}function Ze(){if(!ee)throw new Error("setConfig function has to be called previously")}function q(ae){return V.length>0?V[0].mpd.manifest.Period_asArray[ae]:null}function le(ae,ue,te){var De,Ce,Be,xe,me;if(ae){for(De=ae.AdaptationSet_asArray,xe=0;xe<De.length;xe+=1)for(Be=De[xe].Representation_asArray,me=0;me<Be.length;me+=1)if(ue===(Ce=Be[me]).id)return te?me:Ce}return null}return F={getBandwidthForRepresentation:function(ae,ue){var te;return(te=le(q(ue),ae))?te.bandwidth:null},getIndexForRepresentation:function(ae,ue){return function(te,De){var Ce=le(te,De,!0);return Ce!==null?Ce:-1}(q(ue),ae)},getMaxIndexForBufferType:function(ae,ue){return function(te,De){var Ce,Be,xe,me;if(!te||!De)return-1;for(Be=te.AdaptationSet_asArray,me=0;me<Be.length;me+=1)if(xe=(Ce=Be[me]).Representation_asArray,O.getIsTypeOf(Ce,De))return xe.length;return-1}(q(ue),ae)},convertRepresentationToRepresentationInfo:function(ae){if(ae){var ue=new Wh,te=ae.adaptation.period.mpd.manifest.Period_asArray[ae.adaptation.period.index].AdaptationSet_asArray[ae.adaptation.index],De=O.getRepresentationFor(ae.index,te);return ue.id=ae.id,ue.quality=ae.index,ue.bandwidth=O.getBandwidth(De),ue.fragmentDuration=ae.segmentDuration||(ae.segments&&ae.segments.length>0?ae.segments[0].duration:NaN),ue.MSETimeOffset=ae.MSETimeOffset,ue.mediaInfo=Se(ae.adaptation),ue}return null},getStreamsInfo:function(ae,ue){var te=[],De=V;if(ae&&(Ze(),De=_e(ae)),De.length>0){(!ue||ue>De.length)&&(ue=De.length);for(var Ce=0;Ce<ue;Ce++)te.push(Ae(De[Ce]))}return te},getMediaInfoForType:function(ae,ue){if(V.length===0||!ae)return null;var te=Ke(ae,V);if(!te)return null;var De=O.getAdaptationsForPeriod(te),Ce=he(ae.index,ue,ae);return Ce?Se(De[O.getIndexForAdaptation(Ce,V[0].mpd.manifest,ae.index)]):null},getAllMediaInfoForType:ie,getAdaptationForType:he,getRealAdaptation:function(ae,ue){var te,De,Ce=Ke(ae,V);return te=ue?ue.id:null,V.length>0&&Ce&&(De=te?O.getAdaptationForId(te,V[0].mpd.manifest,Ce.index):O.getAdaptationForIndex(ue?ue.index:null,V[0].mpd.manifest,Ce.index)),De},getProducerReferenceTimes:function(ae,ue){var te,De,Ce=Ke(ae,V);return te=ue?ue.id:null,V.length>0&&Ce&&(De=te?O.getAdaptationForId(te,V[0].mpd.manifest,Ce.index):O.getAdaptationForIndex(ue?ue.index:null,V[0].mpd.manifest,Ce.index)),De?O.getProducerReferenceTimesForAdaptation(De):[]},getRealPeriodByIndex:function(ae){return O.getRealPeriodForIndex(ae,V[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(ae){try{return O.getEssentialPropertiesForRepresentation(ae)}catch(ue){return[]}},getVoRepresentations:function(ae){var ue=je(ae);return O.getRepresentationsForAdaptation(ue)},getEventsFor:function(ae,ue,te){var De=[];if(V.length>0){var Ce=V[0].mpd.manifest;if(ae instanceof $h){var Be=Ke(ae,V);De=O.getEventsForPeriod(Be)}else if(ae instanceof zf){var xe=Ke(te,V);De=O.getEventStreamForAdaptationSet(Ce,je(ae),xe)}else if(ae instanceof Wh){var me=Ke(te,V);De=O.getEventStreamForRepresentation(Ce,ue,me)}}return De},getEvent:function(ae,ue,te,De){try{if(!ae||!ue||isNaN(te)||!De)return null;var Ce=ae.scheme_id_uri,Be=ae.value;if(!ue[Ce+"/"+Be])return null;var xe,me=new uo,Me=ae.timescale||1,ze=De.adaptation.period.start,mt=ue[Ce+"/"+Be],lt=isNaN(De.presentationTimeOffset)?isNaN(mt.presentationTimeOffset)?0:mt.presentationTimeOffset:De.presentationTimeOffset,vt=ae.presentation_time_delta/Me;xe=ae.version===0?ze+te-lt+vt:ze-lt+vt;var pt=ae.event_duration/Me,qt=ae.id,Gt=ae.message_data;return me.eventStream=mt,me.eventStream.value=Be,me.eventStream.timescale=Me,me.duration=pt,me.id=qt,me.calculatedPresentationTime=xe,me.messageData=Gt,me.presentationTimeDelta=vt,me}catch(Bt){return null}},getMpd:ve,setConfig:function(ae){ae&&(ae.constants&&(ee=ae.constants),ae.cea608parser&&(H=ae.cea608parser),ae.errHandler&&O.setConfig({errHandler:ae.errHandler}),ae.BASE64&&O.setConfig({BASE64:ae.BASE64}))},updatePeriods:function(ae){if(!ae)return null;Ze(),V=_e(ae)},getIsTextTrack:function(ae){return O.getIsText(ae)},getUTCTimingSources:function(){var ae=Pe();return O.getUTCTimingSources(ae)},getSuggestedPresentationDelay:function(){var ae=V.length>0?V[0].mpd:null;return O.getSuggestedPresentationDelay(ae)},getAvailabilityStartTime:function(ae){var ue=ve(ae);return O.getAvailabilityStartTime(ue)},getIsTypeOf:function(ae,ue){return O.getIsTypeOf(ae,ue)},getIsDynamic:function(ae){var ue=Pe(ae);return O.getIsDynamic(ue)},getDuration:function(ae){var ue=Pe(ae);return O.getDuration(ue)},getRegularPeriods:_e,getContentSteering:function(ae){return O.getContentSteering(ae)},getLocation:function(ae){return O.getLocation(ae)},getPatchLocation:function(ae){var ue=O.getPatchLocation(ae),te=O.getPublishTime(ae);return ue&&ue.length!==0&&te?ue.filter(function(De){return isNaN(De.ttl)||te.getTime()+De.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(ae){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return O.getManifestUpdatePeriod(ae,ue)},getPublishTime:function(ae){return O.getPublishTime(ae)},getIsDVB:function(ae){return O.hasProfile(ae,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(ae){return j.getIsPatch(ae)},getBaseURLsFromElement:function(ae){return O.getBaseURLsFromElement(ae)},getRepresentationSortFunction:function(){return O.getRepresentationSortFunction()},getCodec:function(ae,ue,te){return O.getCodec(ae,ue,te)},getPeriodById:function(ae){if(!ae||V.length===0)return null;var ue=V.filter(function(te){return te.id===ae});return ue&&ue.length>0?ue[0]:null},setCurrentMediaInfo:function(ae,ue,te){W[ae]=W[ae]||{},W[ae][ue]=W[ae][ue]||{},W[ae][ue]=te},isPatchValid:function(ae,ue){var te=O.getId(ae),De=j.getMpdId(ue),Ce=O.getPublishTime(ae),Be=j.getPublishTime(ue),xe=j.getOriginalPublishTime(ue);return!!(te&&De&&te==De&&Ce&&xe&&Ce.getTime()==xe.getTime()&&Be&&Ce.getTime()<Be.getTime())},applyPatchToManifest:function(ae,ue){j.getPatchOperations(ue).forEach(function(te){var De=te.getMpdTarget(ae);if(De!==null){var Ce=De.name,Be=De.target,xe=De.leaf;if(te.xpath.findsAttribute()||Ce==="__text")switch(te.action){case"add":case"replace":Be[Ce]=te.value;break;case"remove":delete Be[Ce]}else{var me=(Be[Ce+"_asArray"]||[]).indexOf(xe),Me=te.position==="prepend"||te.position==="before";if((te.action==="remove"||te.action==="replace")&&(delete Be[Ce],me!=-1)){var ze=Be[Ce+"_asArray"];ze.splice(me,1),ze.length>1?Be[Ce]=ze:ze.length==1?Be[Ce]=ze[0]:delete Be[Ce+"_asArray"]}te.action!=="add"&&te.action!=="replace"||Object.keys(te.value).forEach(function(mt){var lt=te.value[mt],vt=Be[mt+"_asArray"]||[];if(vt.length===0&&Be[mt]&&vt.push(Be[mt]),vt.length===0)vt=lt;else{var pt=vt.length;pt=mt==Ce&&me!=-1?me+(Me?0:1)+(te.action=="replace"?-1:0):Me?0:vt.length,vt.splice.apply(vt,[pt,0].concat(lt))}Be[mt+"_asArray"]=vt,Be[mt]=vt.length==1?vt[0]:vt})}}})},areMediaInfosEqual:we,reset:Ve},O=er(re).getInstance(),j=YE(re).getInstance(),Ve(),F}Um.__dashjs_factory_name="DashAdapter";var $f=U.Z.getSingletonFactory(Um);function Bm(F,O){for(var j=0;j<O.length;j++){var V=O[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(F,V.key,V)}}var jm=function(){function F(){(function(V,W){if(!(V instanceof W))throw new TypeError("Cannot call a class as a function")})(this,F)}var O,j;return O=F,j=[{key:"round10",value:function(V,W){return function(ee,H,re){return re===void 0||+re==0?Math[ee](H):(re=+re,(H=+H)===null||isNaN(H)||typeof re!="number"||re%1!=0?NaN:(H=H.toString().split("e"),+((H=(H=Math[ee](+(H[0]+"e"+(H[1]?+H[1]-re:-re)))).toString().split("e"))[0]+"e"+(H[1]?+H[1]+re:re))))}("round",V,W)}}],j&&Bm(O,j),F}(),Zm=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},qm=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.t=null,this.mt=null,this.to=null,this.lto=null},jl=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.t=null,this.level=null},WE=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.target=null,this.state=P.Z.BUFFER_EMPTY},$E=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.time=null,this.range=null,this.manifestInfo=null},XE=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.time=null,this.droppedFrames=null};function Xh(F,O){if(!(F instanceof O))throw new TypeError("Cannot call a class as a function")}var QE=function F(){Xh(this,F),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},JE=function F(){Xh(this,F),this.id=null,this.index=null,this.start=null,this.duration=null},e1=function F(){Xh(this,F),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},t1=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},n1=function F(){(function(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")})(this,F),this.loadingRequests=[],this.executedRequests=[]};function Gm(F){var O,j,V=(F=F||{}).settings,W=this.context,ee=(0,m.Z)(W).getInstance();function H(){ee.trigger(T.Z.METRICS_CHANGED)}function re(ve){ee.trigger(T.Z.METRIC_CHANGED,{mediaType:ve}),H()}function he(ve,Ve,Pe){ee.trigger(T.Z.METRIC_UPDATED,{mediaType:ve,metric:Ve,value:Pe}),re(ve)}function we(ve,Ve,Pe){ee.trigger(T.Z.METRIC_ADDED,{mediaType:ve,metric:Ve,value:Pe}),re(ve)}function Te(ve,Ve){var Pe=null;return ve&&(j.hasOwnProperty(ve)?Pe=j[ve]:Ve||(Pe=new Zm,j[ve]=Pe)),Pe}function ie(ve,Ve,Pe){var je=Te(ve);je!==null&&(je[Ve].push(Pe),je[Ve].length>V.get().streaming.metrics.maxListDepth&&je[Ve].shift())}function _e(ve,Ve,Pe){ie(ve,Ve,Pe),we(ve,Ve,Pe)}return O={clearCurrentMetricsForType:function(ve){delete j[ve],re(ve)},clearAllCurrentMetrics:function(){j={},H()},getMetricsFor:Te,addHttpRequest:function ve(Ve,Pe,je,Ke,Se,Le,Ae,Ze,q,le,ae,ue,te,De,Ce,Be,xe){var me=new at.w;Le!=null&&Le!==Ke&&(ve(Ve,null,je,Ke,Se,null,null,Ze,q,null,null,null,te,null,null,Be,xe),me.actualurl=Le),me.tcpid=Pe,me.type=je,me.url=Ke,me.range=Ze,me.trequest=q,me.tresponse=le,me.responsecode=ue,me.cmsd=xe,me._tfinish=ae,me._stream=Ve,me._mediaduration=te,me._quality=Se,me._responseHeaders=De,me._serviceLocation=Ae,me._fileLoaderType=Be,Ce?Ce.forEach(function(Me){(function(ze,mt,lt,vt){var pt=new at.O;pt.s=mt,pt.d=lt,pt.b=vt,ze.trace.push(pt),ze.interval||(ze.interval=0),ze.interval+=lt})(me,Me.s,Me.d,Me.b)}):(delete me.interval,delete me.trace),_e(Ve,P.Z.HTTP_REQUEST,me)},addRepresentationSwitch:function(ve,Ve,Pe,je,Ke){var Se=new qm;Se.t=Ve,Se.mt=Pe,Se.to=je,Ke?Se.lto=Ke:delete Se.lto,_e(ve,P.Z.TRACK_SWITCH,Se)},addBufferLevel:function(ve,Ve,Pe){var je=new jl;je.t=Ve,je.level=Pe,_e(ve,P.Z.BUFFER_LEVEL,je)},addBufferState:function(ve,Ve,Pe){var je=new WE;je.target=Pe,je.state=Ve,_e(ve,P.Z.BUFFER_STATE,je)},addDVRInfo:function(ve,Ve,Pe,je){var Ke=new $E;Ke.time=Ve,Ke.range=je,Ke.manifestInfo=Pe,_e(ve,P.Z.DVR_INFO,Ke)},addDroppedFrames:function(ve,Ve){var Pe=new XE,je=Te(ve).DroppedFrames;Ve&&(Pe.time=Ve.creationTime,Pe.droppedFrames=Ve.droppedVideoFrames,je.length>0&&je[je.length-1]==Pe||_e(ve,P.Z.DROPPED_FRAMES,Pe))},addSchedulingInfo:function(ve,Ve,Pe,je,Ke,Se,Le,Ae,Ze){var q=new t1;q.mediaType=ve,q.t=Ve,q.type=Pe,q.startTime=je,q.availabilityStartTime=Ke,q.duration=Se,q.quality=Le,q.range=Ae,q.state=Ze,_e(ve,P.Z.SCHEDULING_INFO,q)},addRequestsQueue:function(ve,Ve,Pe){var je=new n1;je.loadingRequests=Ve,je.executedRequests=Pe,Te(ve).RequestsQueue=je,we(ve,P.Z.REQUESTS_QUEUE,je)},addManifestUpdate:function(ve,Ve,Pe,je,Ke,Se,Le,Ae,Ze,q){var le=new QE;le.mediaType=ve,le.type=Ve,le.requestTime=Pe,le.fetchTime=je,le.availabilityStartTime=Ke,le.presentationStartTime=Se,le.clientTimeOffset=Le,le.currentTime=Ae,le.buffered=Ze,le.latency=q,ie(E.Z.STREAM,P.Z.MANIFEST_UPDATE,le),we(ve,P.Z.MANIFEST_UPDATE,le)},updateManifestUpdateInfo:function(ve,Ve){if(ve){for(var Pe in Ve)ve[Pe]=Ve[Pe];he(ve.mediaType,P.Z.MANIFEST_UPDATE,ve)}},addManifestUpdateStreamInfo:function(ve,Ve,Pe,je,Ke){if(ve){var Se=new JE;Se.id=Ve,Se.index=Pe,Se.start=je,Se.duration=Ke,ve.streamInfo.push(Se),he(ve.mediaType,P.Z.MANIFEST_UPDATE_STREAM_INFO,ve)}},addManifestUpdateRepresentationInfo:function(ve,Ve,Pe,je,Ke,Se,Le,Ae){if(ve&&ve.representationInfo){var Ze=new e1;Ze.id=Ve,Ze.index=Pe,Ze.streamIndex=je,Ze.mediaType=Ke,Ze.startNumber=Le,Ze.fragmentInfoType=Ae,Ze.presentationTimeOffset=Se,ve.representationInfo.push(Ze),he(ve.mediaType,P.Z.MANIFEST_UPDATE_TRACK_INFO,ve)}},addPlayList:function(ve){ve.trace&&Array.isArray(ve.trace)?ve.trace.forEach(function(Ve){Ve.hasOwnProperty("subreplevel")&&!Ve.subreplevel&&delete Ve.subreplevel}):delete ve.trace,_e(E.Z.STREAM,P.Z.PLAY_LIST,ve)},addDVBErrors:function(ve){_e(E.Z.STREAM,P.Z.DVB_ERRORS,ve)}},j={},O}Gm.__dashjs_factory_name="MetricsModel";var Hm=U.Z.getSingletonFactory(Gm);function rl(F){F=F||{};var O,j,V,W,ee=this.context,H=F.metricsModel;function re(Te){var ie=H.getMetricsFor(Te,!0);if(!ie)return null;var _e,ve=ie.HttpList,Ve=null;if(!ve||ve.length<=0)return null;for(_e=ve.length-1;_e>=0;){if(ve[_e].responsecode){Ve=ve[_e];break}_e--}return Ve}function he(Te){var ie=H.getMetricsFor(Te,!0);return ie&&ie.HttpList?ie.HttpList:[]}function we(Te,ie){if(!Te)return null;var _e=Te[ie];return _e&&_e.length!==0?_e[_e.length-1]:null}return O={getCurrentRepresentationSwitch:function(Te){return we(H.getMetricsFor(Te,!0),P.Z.TRACK_SWITCH)},getCurrentBufferState:function(Te){return we(H.getMetricsFor(Te,!0),P.Z.BUFFER_STATE)},getCurrentBufferLevel:function(Te){var ie=we(H.getMetricsFor(Te,!0),P.Z.BUFFER_LEVEL);return ie?jm.round10(ie.level/1e3,-3):0},getCurrentHttpRequest:re,getHttpRequests:he,getCurrentDroppedFrames:function(){return we(H.getMetricsFor(E.Z.VIDEO,!0),P.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(Te){return we(H.getMetricsFor(Te,!0),P.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(Te){return we(Te?H.getMetricsFor(Te,!0):H.getMetricsFor(E.Z.VIDEO,!0)||H.getMetricsFor(E.Z.AUDIO,!0),P.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return we(H.getMetricsFor(E.Z.STREAM),P.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(Te,ie){if(!ie)return null;var _e={},ve=re(Te);ve&&(_e=dn.Z.parseHttpHeaders(ve._responseHeaders));var Ve=_e[ie.toLowerCase()];return Ve===void 0?null:Ve},getLatestMPDRequestHeaderValueByID:function(Te){if(!Te)return null;var ie,_e,ve,Ve={};for(ve=(ie=he(E.Z.STREAM)).length-1;ve>=0;ve--)if((_e=ie[ve]).type===at.w.MPD_TYPE){Ve=dn.Z.parseHttpHeaders(_e._responseHeaders);break}var Pe=Ve[Te.toLowerCase()];return Pe===void 0?null:Pe},addRepresentationSwitch:function(Te,ie,_e,ve,Ve){H.addRepresentationSwitch(Te,ie,_e,ve,Ve)},addDVRInfo:function(Te,ie,_e,ve){H.addDVRInfo(Te,ie,_e,ve)},updateManifestUpdateInfo:function(Te){var ie=this.getCurrentManifestUpdate();H.updateManifestUpdateInfo(ie,Te)},addManifestUpdateStreamInfo:function(Te){if(Te){var ie=this.getCurrentManifestUpdate();H.addManifestUpdateStreamInfo(ie,Te.id,Te.index,Te.start,Te.duration)}},addManifestUpdateRepresentationInfo:function(Te,ie){if(Te){var _e=this.getCurrentManifestUpdate();H.addManifestUpdateRepresentationInfo(_e,Te.id,Te.index,Te.streamIndex,ie,Te.presentationTimeOffset,Te.startNumber,Te.fragmentInfoType)}},addManifestUpdate:function(Te){H.addManifestUpdate(E.Z.STREAM,Te.type,Te.requestStartDate,Te.requestEndDate)},addHttpRequest:function(Te,ie,_e,ve,Ve,Pe){H.addHttpRequest(Te.mediaType,null,Te.type,Te.url,Te.quality,ie,Te.serviceLocation||null,Te.range||null,Te.requestStartDate,Te.firstByteDate,Te.requestEndDate,_e,Te.duration,ve,Ve,Te.fileLoaderType,Pe)},addSchedulingInfo:function(Te,ie){H.addSchedulingInfo(Te.mediaType,new Date,Te.type,Te.startTime,Te.availabilityStartTime,Te.duration,Te.quality,Te.range,ie)},addRequestsQueue:function(Te,ie,_e){H.addRequestsQueue(Te,ie,_e)},addBufferLevel:function(Te,ie,_e){H.addBufferLevel(Te,ie,_e)},addBufferState:function(Te,ie,_e){H.addBufferState(Te,ie,_e)},addDroppedFrames:function(Te){H.addDroppedFrames(E.Z.VIDEO,Te)},addPlayList:function(){W&&(H.addPlayList(W),W=null)},addDVBErrors:function(Te){H.addDVBErrors(Te)},createPlaylistMetrics:function(Te,ie){(W=new ot).start=new Date,W.mstart=Te,W.starttype=ie},createPlaylistTraceMetrics:function(Te,ie,_e){j===!0&&(j=!1,(V=new tt).representationid=Te,V.start=new Date,V.mstart=ie,V.playbackspeed=_e!==null?_e.toString():null)},updatePlayListTraceMetrics:function(Te){if(V)for(var ie in V)V[ie]=Te[ie]},pushPlayListTraceMetrics:function(Te,ie){if(j===!1&&W&&V&&V.start){var _e=V.start,ve=Te.getTime()-_e.getTime();V.duration=ve,V.stopreason=ie,W.trace.push(V),j=!0}},clearAllCurrentMetrics:function(){H.clearAllCurrentMetrics()}},H=H||Hm(ee).getInstance({settings:F.settings}),j=!0,V=null,W=null,O}rl.__dashjs_factory_name="DashMetrics";var Mc=U.Z.getSingletonFactory(rl);function Qh(){var F,O,j,V,W=this.context,ee=(0,m.Z)(W).getInstance(),H=(0,Ge.Z)(W).getInstance();function re(Ke){V=Ke}function he(Ke,Se,Le,Ae){var Ze,q=Se.adaptation.period.mpd,le=q.availabilityStartTime;if(Ae)Ze=Le&&q.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(le.getTime()+1e3*(Ke+q.timeShiftBufferDepth)):q.availabilityEndTime;else if(Le){var ae=Se.availabilityTimeOffset;Ze=new Date(le.getTime()+1e3*(Ke-ae))}else Ze=le;return Ze}function we(Ke,Se){return(Ke.getTime()-Se.mpd.availabilityStartTime.getTime()+1e3*V)/1e3}function Te(Ke,Se){return Ke+(Se.adaptation.period.start-Se.presentationTimeOffset)}function ie(Ke){var Se={start:NaN,end:NaN},Le=Ke[0].getAdapter().getRegularPeriods()[0],Ae=we(new Date,Le);if(!Ke||Ke.length===0)return{range:Se,now:Ae};Ke.forEach(function(q){var le=q.getAdapter(),ae=le.getMediaInfoForType(q.getStreamInfo(),E.Z.VIDEO)||le.getMediaInfoForType(q.getStreamInfo(),E.Z.AUDIO),ue=le.getVoRepresentations(ae)[0],te={start:NaN,end:NaN};if(ue)if(ue.segmentInfoType===y.Z.SEGMENT_TIMELINE)te=function(Ce){var Be,xe,me,Me,ze=Ce.adaptation.period.mpd.manifest.Period_asArray[Ce.adaptation.period.index].AdaptationSet_asArray[Ce.adaptation.index],mt=O.getRepresentationFor(Ce.index,ze),lt=mt.SegmentTemplate||mt.SegmentList,vt=lt.SegmentTimeline,pt=lt.timescale,qt=vt.S_asArray,Gt={start:0,end:0},Bt=qt[0].t,jt=!isNaN(Bt),xn=jt?Bt:0,it=0;for(jt&&(Gt.start=Te(xn/pt,Ce)),me=0,Me=qt.length;me<Me;me++)xe=0,(Be=qt[me]).hasOwnProperty("r")&&(xe=Be.r),it+=Be.d*(1+xe);return Gt.end=Te((xn+it)/pt,Ce),Gt}(ue);else{var De=ue.adaptation.period;te.start=De.start,te.end=Math.max(Ae,De.start+De.duration)}!isNaN(te.start)&&(isNaN(Se.start)||Se.start>te.start)&&(Se.start=te.start),!isNaN(te.end)&&(isNaN(Se.end)||Se.end<te.end)&&(Se.end=te.end)}),Se.end=Math.min(Ae,Se.end);var Ze=ve(Ke,Se.end,!0);return Se.end=isNaN(Ze)?Se.end:Ze,Se.start=Le&&Le.mpd&&Le.mpd.timeShiftBufferDepth&&!isNaN(Le.mpd.timeShiftBufferDepth)&&!isNaN(Se.end)?Math.max(Se.end-Le.mpd.timeShiftBufferDepth,Se.start):Se.start,Se.start=ve(Ke,Se.start),{range:Se,now:Ae}}function _e(Ke,Se){j=Ke-Se.end}function ve(Ke,Se){var Le=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var Ae=0,Ze=!1,q=NaN;!Ze&&Ae<Ke.length;){var le=Ke[Ae].getStreamInfo();le.start<=Se&&(!isFinite(le.duration)||le.start+le.duration>=Se)?(q=Se,Ze=!0):!Le&&le.start>Se&&(isNaN(q)||le.start<q)?q=le.start:Le&&le.start+le.duration<Se&&(isNaN(q)||le.start+le.duration>q)&&(q=le.start+le.duration),Ae+=1}return q}catch(ae){return Se}}function Ve(Ke){Ke.offset===void 0||isNaN(Ke.offset)||re(Ke.offset/1e3)}function Pe(){V=0,j=0}function je(){ee.off(T.Z.UPDATE_TIME_SYNC_OFFSET,Ve,this),Pe()}return F={initialize:function(){Pe(),ee.on(T.Z.UPDATE_TIME_SYNC_OFFSET,Ve,this)},getClientTimeOffset:function(){return V},setClientTimeOffset:re,getClientReferenceTime:function(){return Date.now()-1e3*j+1e3*V},calcAvailabilityStartTimeFromPresentationTime:function(Ke,Se,Le){return he(Ke,Se,Le)},calcAvailabilityEndTimeFromPresentationTime:function(Ke,Se,Le){return he(Ke,Se,Le,!0)},calcPresentationTimeFromWallTime:we,calcPresentationTimeFromMediaTime:Te,calcPeriodRelativeTimeFromMpdRelativeTime:function(Ke,Se){return Se-Ke.adaptation.period.start},calcMediaTimeFromPresentationTime:function(Ke,Se){return Ke-Se.adaptation.period.start+Se.presentationTimeOffset},calcWallTimeForSegment:function(Ke,Se){var Le,Ae,Ze;return Se&&(Le=Ke.representation.adaptation.period.mpd.suggestedPresentationDelay,Ae=Ke.presentationStartTime+Le,Ze=new Date(Ke.availabilityStartTime.getTime()+1e3*Ae)),Ze},calcTimeShiftBufferWindow:function(Ke,Se){if(!Se)return function(Ae){var Ze={start:NaN,end:NaN},q=0,le=NaN;return Ae.forEach(function(ae){var ue=ae.getStreamInfo();q+=ue.duration,(isNaN(le)||ue.start<le)&&(le=ue.start)}),Ze.start=le,Ze.end=le+q,Ze}(Ke);if(H.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var Le=ie(Ke);return _e(Le.now,Le.range),Le.range}return function(Ae){var Ze={start:NaN,end:NaN};if(!Ae||Ae.length===0)return Ze;var q=Ae[0].getAdapter().getRegularPeriods()[0],le=we(new Date,q),ae=q.mpd.timeShiftBufferDepth,ue=isNaN(ae)?0:le-ae;if(Ze.start=ve(Ae,ue),Ze.end=!isNaN(Ze.start)&&le<Ze.start?le:ve(Ae,le,!0),!isNaN(ae)&&Ze.end<le-ae&&(Ze.end=NaN),H.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var te=ie(Ae);if(te.range.end<Ze.start)return ee.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Vs.LEVELS.WARNING,event:Vs.EVENTS.INVALID_DVR_WINDOW}),_e(te.now,te.range),te.range}return Ze}(Ke)},reset:je},O=er(W).getInstance(),je(),F}Qh.__dashjs_factory_name="TimelineConverter";var Vm=U.Z.getSingletonFactory(Qh),ua=w(4593),Lr=w(6934);function pi(F){return pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},pi(F)}function $s(F,O){return $s=Object.setPrototypeOf||function(j,V){return j.__proto__=V,j},$s(F,O)}function Jh(F,O){return!O||pi(O)!=="object"&&typeof O!="function"?function(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(F):O}function Xs(F){return Xs=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},Xs(F)}var Km=function(F){(function(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),H&&$s(ee,H)})(W,F);var O,j,V=(O=W,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}(),function(){var ee,H=Xs(O);if(j){var re=Xs(this).constructor;ee=Reflect.construct(H,arguments,re)}else ee=H.apply(this,arguments);return Jh(this,ee)});function W(){var ee;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,W),(ee=V.call(this)).captionData=null,ee.label=null,ee.defaultTrack=!1,ee.kind=null,ee.isFragmented=!1,ee.isEmbedded=!1,ee.isTTML=null,ee}return W}(zf),zm=w(2295);function Ym(){var F=0;function O(re){for(var he="",we=0;we<re.length;++we)he+=re[we].uchar;return he.length-he.replace(/^\s+/,"").length}function j(re){return"left: "+3.125*re.x+"%; top: "+6.66*re.y1+"%; width: "+(100-3.125*re.x)+"%; height: "+6.66*Math.max(re.y2-1-re.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function V(re){return re==="red"?"rgb(255, 0, 0)":re==="green"?"rgb(0, 255, 0)":re==="blue"?"rgb(0, 0, 255)":re==="cyan"?"rgb(0, 255, 255)":re==="magenta"?"rgb(255, 0, 255)":re==="yellow"?"rgb(255, 255, 0)":re==="white"?"rgb(255, 255, 255)":re==="black"?"rgb(0, 0, 0)":re}function W(re,he){var we=re.videoHeight/15;return he?"font-size: "+we+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(he.foreground?V(he.foreground):"rgb(255, 255, 255)")+"; font-style: "+(he.italics?"italic":"normal")+"; text-decoration: "+(he.underline?"underline":"none")+"; white-space: pre; background-color: "+(he.background?V(he.background):"transparent")+";":"font-size: "+we+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function ee(re){return re.replace(/^\s+/g,"")}function H(re){return re.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(re,he,we,Te){var ie,_e,ve=null,Ve=!1,Pe=-1,je={start:he,end:we,spans:[]},Ke="style_cea608_white_black",Se={},Le={},Ae=[];for(ie=0;ie<15;++ie){var Ze=Te.rows[ie],q="",le=null;if(Ze.isEmpty()===!1){var ae=O(Ze.chars);ve===null&&(ve={x:ae,y1:ie,y2:ie+1,p:[]}),ae!==Pe&&Ve&&(ve.p.push(je),je={start:he,end:we,spans:[]},ve.y2=ie,ve.name="region_"+ve.x+"_"+ve.y1+"_"+ve.y2,Se.hasOwnProperty(ve.name)===!1?(Ae.push(ve),Se[ve.name]=ve):Se[ve.name].p.contat(ve.p),ve={x:ae,y1:ie,y2:ie+1,p:[]});for(var ue=0;ue<Ze.chars.length;++ue){var te=Ze.chars[ue],De=te.penState;if(le===null||!De.equals(le)){q.trim().length>0&&(je.spans.push({name:Ke,line:q,row:ie}),q="");var Ce="style_cea608_"+De.foreground+"_"+De.background;De.underline&&(Ce+="_underline"),De.italics&&(Ce+="_italics"),Le.hasOwnProperty(Ce)||(Le[Ce]=JSON.parse(JSON.stringify(De))),le=De,Ke=Ce}q+=te.uchar}q.trim().length>0&&je.spans.push({name:Ke,line:q,row:ie}),Ve=!0,Pe=ae}else Ve=!1,Pe=-1,ve&&(ve.p.push(je),je={start:he,end:we,spans:[]},ve.y2=ie,ve.name="region_"+ve.x+"_"+ve.y1+"_"+ve.y2,Se.hasOwnProperty(ve.name)===!1?(Ae.push(ve),Se[ve.name]=ve):Se[ve.name].p.contat(ve.p),ve=null)}ve&&(ve.p.push(je),ve.y2=ie+1,ve.name="region_"+ve.x+"_"+ve.y1+"_"+ve.y2,Se.hasOwnProperty(ve.name)===!1?(Ae.push(ve),Se[ve.name]=ve):Se[ve.name].p.contat(ve.p),ve=null);var Be=[];for(ie=0;ie<Ae.length;++ie){var xe=Ae[ie],me="sub_cea608_"+F++,Me=document.createElement("div");Me.id=me;var ze=j(xe);Me.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+ze;var mt=document.createElement("div");mt.className="paragraph bodyStyle",mt.style.cssText=W(re);var lt=document.createElement("div");lt.className="cueUniWrapper",lt.style.cssText="unicode-bidi: normal; direction: ltr;";for(var vt=0;vt<xe.p.length;++vt){var pt=xe.p[vt],qt=0;for(_e=0;_e<pt.spans.length;++_e){var Gt=pt.spans[_e];if(Gt.line.length>0){if(_e!==0&&qt!=Gt.row){var Bt=document.createElement("br");Bt.className="lineBreak",lt.appendChild(Bt)}var jt=!1;qt===Gt.row&&(jt=!0),qt=Gt.row;var xn=Le[Gt.name],it=document.createElement("span");it.className="spanPadding "+Gt.name+" customSpanColor",it.style.cssText=W(re,xn),_e!==0&&jt?_e===pt.spans.length-1?it.textContent=H(Gt.line):it.textContent=Gt.line:pt.spans.length>1&&_e<pt.spans.length-1&&Gt.row===pt.spans[_e+1].row?it.textContent=ee(Gt.line):it.textContent=Gt.line.trim(),lt.appendChild(it)}}}mt.appendChild(lt),Me.appendChild(mt);var _t={bodyStyle:["%",90]};for(var Xt in Le)Le.hasOwnProperty(Xt)&&(_t[Xt]=["%",90]);Be.push({type:"html",start:he,end:we,cueHTMLElement:Me,cueID:me,cellResolution:[32,15],isFromCEA608:!0,fontSize:_t,lineHeight:{},linePadding:{}})}return Be}}}Ym.__dashjs_factory_name="EmbeddedTextHtmlRender";var jn=U.Z.getSingletonFactory(Ym);function ep(F){var O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve,Pe,je,Ke,Se=F.errHandler,Le=F.manifestModel,Ae=F.mediaController,Ze=F.videoModel,q=F.textTracks,le=F.vttParser,ae=F.vttCustomRenderingParser,ue=F.ttmlParser,te=F.streamInfo,De=F.settings,Ce=this.context,Be=(0,m.Z)(Ce).getInstance(),xe=!1;function me(){H=null,he=NaN,we=[],Te=null,re=!1,ee=[],W=null}function Me(Bt){var jt=new Km;for(var xn in Bt)jt[xn]=Bt[xn];jt.labels=Bt.labels,jt.defaultTrack=function(it){var _t=!1;return _e.length>1&&it.isEmbedded?_t=it.id&&it.id===E.Z.CC1:_e.length===1?it.id&&typeof it.id=="string"&&it.id.substring(0,2)==="CC"&&(_t=!0):_e.length===0&&(_t=it.index===ee[0].index),_t}(Bt),jt.isFragmented=Bt.isFragmented,jt.isEmbedded=!!Bt.isEmbedded,jt.isTTML=function(it){return it.codec&&it.codec.search(E.Z.STPP)>=0||it.mimeType&&it.mimeType.search(E.Z.TTML)>=0}(Bt),jt.kind=function(it,_t){var Xt=it.roles&&it.roles.length>0?_t[it.roles[0]]:_t.caption;return Xt=Xt===_t.caption||Xt===_t.subtitle?Xt:_t.caption}(Bt,{subtitle:"subtitles",caption:"captions"}),q.addTextTrack(jt)}function ze(Bt){var jt=Bt.chunk;jt.mediaInfo.embeddedCaptions&&lt(jt.bytes,jt)}function mt(Bt){ie=Bt}function lt(Bt,jt){var xn=jt.mediaInfo,it=xn.type,_t=xn.mimeType,Xt=xn.codec||_t;Xt?xn.codec.indexOf("application/mp4")!==-1?function(Dt,un,an){var Qt;if(un.segmentType==="InitializationSegment")re=!0,he=V.getMediaTimescaleFromMoov(Dt);else{if(!re)return;(Qt=V.getSamplesInfo(Dt).sampleList).length>0&&(Te=Qt[0].cts-un.start*he),an.search(E.Z.STPP)>=0?function(Bn,kn,mr){var vr,bt;for(W=W!==null?W:qt(mr),vr=0;vr<kn.length;vr++){var en=kn[vr],Zt=en.cts,mn=pt(),bn=mn+Zt/he,Zn=bn+en.duration/he;O.buffered.add(bn,Zn);var Fn=new DataView(Bn,en.offset,en.subSizes[0]),qn=Lr.Utils.dataViewToString(Fn,E.Z.UTF8),Yn=[],Jt=en.offset+en.subSizes[0];for(bt=1;bt<en.subSizes.length;bt++){var Nn=new Uint8Array(Bn,Jt,en.subSizes[bt]),Pn=String.fromCharCode.apply(null,Nn);Yn.push(Pn),Jt+=en.subSizes[bt]}try{var On=Le.getValue().ttmlTimeIsRelative?Zt/he:0,Dn=W.parse(qn,On,Zt/he,(Zt+en.duration)/he,Yn);q.addCaptions(ie,mn,Dn)}catch(Ct){H.removeExecutedRequestsBeforeTime(),this.remove(),j.error("TTML parser error: "+Ct.message)}}}(Dt,Qt,an):function(Bn,kn){var mr,vr,bt,en=[];for(mr=0;mr<kn.length;mr++){var Zt=kn[mr];Zt.cts-=Te;var mn=pt()+Zt.cts/he,bn=mn+Zt.duration/he;O.buffered.add(mn,bn);var Zn=Bn.slice(Zt.offset,Zt.offset+Zt.size),Fn=Lr.parseBuffer(Zn);for(vr=0;vr<Fn.boxes.length;vr++){var qn=Fn.boxes[vr];if(j.debug("VTT box1: "+qn.type),qn.type!=="vtte"&&qn.type==="vttc"){j.debug("VTT vttc boxes.length = "+qn.boxes.length);var Yn={styles:{}};for(bt=0;bt<qn.boxes.length;bt++){var Jt=qn.boxes[bt];if(j.debug("VTT box2: "+Jt.type),Jt.type==="payl")Yn.start=Zt.cts/he,Yn.end=(Zt.cts+Zt.duration)/he,Yn.data=Jt.cue_text;else if(Jt.type==="sttg"&&Jt.settings&&Jt.settings!=="")try{var Nn=Jt.settings.split(" ");Yn.styles=le.getCaptionStyles(Nn)}catch(Pn){}}Yn&&Yn.data&&(en.push(Yn),j.debug("VTT  ".concat(Yn.start," - ").concat(Yn.end," :  ").concat(Yn.data)))}}}en.length>0&&q.addCaptions(ie,0,en)}(Dt,Qt)}}(Bt,jt,Xt):it===E.Z.VIDEO?function(Dt,un){var an,Qt;if(un.segmentType===at.w.INIT_SEGMENT_TYPE)ve===0&&(ve=V.getMediaTimescaleFromMoov(Dt));else if(un.segmentType===at.w.MEDIA_SEGMENT_TYPE){if(ve===0)return void j.warn("CEA-608: No timescale for embeddedTextTrack yet");var Bn=(Qt=V.getSamplesInfo(Dt)).lastSequenceNumber,kn=Math.trunc(un.start),mr=Math.trunc(un.end);if(je[0]||je[1]||function(){for(var mn,bn=0;bn<_e.length;bn++){if((mn=q.getTrackIdxForId(_e[bn].id))===-1)return void j.warn("CEA-608: data before track is ready.");var Zn=vt(mn);je[bn]=new(C()).Cea608Parser(bn+1,{newCue:Zn},null)}}(),ve){if(function(mn,bn,Zn,Fn,qn){return mn!==null&&bn!==null&&Fn!==null&&qn!==null&&(bn===mn?Fn!==qn:bn!==mn+Zn)}(Ve,Bn,Qt.numSequences,Pe,kn))for(an=0;an<je.length;an++)je[an]&&je[an].reset();for(var vr=function(mn,bn){if(bn.length===0)return null;for(var Zn={splits:[],fields:[[],[]]},Fn=new DataView(mn),qn=0;qn<bn.length;qn++)for(var Yn=bn[qn],Jt=C().findCea608Nalus(Fn,Yn.offset,Yn.size),Nn=null,Pn=0,On=0;On<Jt.length;On++)for(var Dn=C().extractCea608DataFromRange(Fn,Jt[On]),Ct=0;Ct<2;Ct++)if(Dn[Ct].length>0){Yn.cts!==Nn?Pn=0:Pn+=1;var Qe=pt();Zn.fields[Ct].push([Yn.cts+Qe*ve,Dn[Ct],Pn]),Nn=Yn.cts}return Zn.fields.forEach(function(Vt){Vt.sort(function(qe,Je){return qe[0]===Je[0]?qe[2]-Je[2]:qe[0]-Je[0]})}),Zn}(Dt,Qt.sampleList),bt=0;bt<je.length;bt++){var en=vr.fields[bt],Zt=je[bt];if(Zt)for(an=0;an<en.length;an++)Zt.addData(en[an][0]/ve,en[an][1])}Ve=Bn,Pe=mr}}}(Bt,jt):function(Dt,un,an){var Qt,Bn,kn=new DataView(Dt,0,Dt.byteLength);Bn=Lr.Utils.dataViewToString(kn,E.Z.UTF8);try{Qt=qt(an).parse(Bn,0),q.addCaptions(q.getCurrentTrackIdx(),0,Qt),O.buffered&&O.buffered.add(un.start,un.end)}catch(mr){Se.error(new ce.Z(Ie.TIMED_TEXT_ERROR_ID_PARSE_CODE,Ie.TIMED_TEXT_ERROR_MESSAGE_PARSE+mr.message,Bn))}}(Bt,jt,Xt):j.error("No text type defined")}function vt(Bt){return function(jt,xn,it){var _t;(_t=Ze.getTTMLRenderingDiv()?Ke.createHTMLCaptionsFromScreen(Ze.getElement(),jt,xn,it):[{start:jt,end:xn,data:it.getDisplayText(),styles:{}}])&&q.addCaptions(Bt,0,_t)}}function pt(){return isNaN(O.timestampOffset)?0:O.timestampOffset}function qt(Bt){var jt;return Bt.search(E.Z.VTT)>=0?jt=De.get().streaming.text.webvtt.customRenderingEnabled&&ae?ae:le:(Bt.search(E.Z.TTML)>=0||Bt.search(E.Z.STPP)>=0)&&(jt=ue),jt}function Gt(Bt){_e.forEach(function(jt){var xn=q.getTrackIdxForId(jt.id);xn>=0&&q.deleteCuesFromTrackIdx(xn,Bt.from,Bt.to)})}return O={initialize:function(){xe||(_e=[],ie=null,ve=0,je=[],Ve=null,Pe=null,xe=!0,Ke=jn(Ce).getInstance(),Be.on(T.Z.VIDEO_CHUNK_RECEIVED,ze,O),Be.on(T.Z.BUFFER_CLEARED,Gt,O))},addMediaInfos:function(Bt,jt,xn){if(ee=ee.concat(jt),Bt===E.Z.TEXT&&jt[0].isFragmented&&!jt[0].isEmbedded){H=xn,O.buffered=(0,zm.Z)(Ce).create(),we=Ae.getTracksFor(E.Z.TEXT,te.id).filter(function(Dt){return Dt.isFragmented});for(var it=Ae.getCurrentTrackFor(E.Z.TEXT,te.id),_t=0;_t<we.length;_t++)if(we[_t]===it){mt(_t);break}}for(var Xt=0;Xt<jt.length;Xt++)Me(jt[Xt])},resetMediaInfos:function(){ee=[]},getStreamId:function(){return te.id},append:lt,abort:function(){},addEmbeddedTrack:function(Bt){if(xe&&Bt)if(Bt.id===E.Z.CC1||Bt.id===E.Z.CC3){for(var jt=0;jt<_e.length;jt++)if(_e[jt].id===Bt.id)return;_e.push(Bt)}else j.warn("Embedded track "+Bt.id+" not supported!")},resetEmbedded:function(){Be.off(T.Z.VIDEO_CHUNK_RECEIVED,ze,O),Be.off(T.Z.BUFFER_CLEARED,Gt,O),q&&q.deleteAllTextTracks(),xe=!1,_e=[],je=[null,null],Ve=null,Pe=null},getConfig:function(){return{fragmentModel:H,fragmentedTracks:we,videoModel:Ze}},setCurrentFragmentedTrackIdx:mt,remove:function(Bt,jt){Bt===void 0&&Bt===jt&&(Bt=O.buffered.start(0),jt=O.buffered.end(O.buffered.length-1)),O.buffered.remove(Bt,jt),q.deleteCuesFromTrackIdx(ie,Bt,jt)},reset:function(){me(),ee=[],V=null}},j=(0,M.Z)(Ce).getInstance().getLogger(O),V=(0,Vu.Z)(Ce).getInstance(),me(),O}ep.__dashjs_factory_name="TextSourceBuffer";var Xf=U.Z.getClassFactory(ep),Nr=w(4403);function il(F,O){(O==null||O>F.length)&&(O=F.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=F[j];return V}var ol=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function Kr(F){var O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve,Pe,je,Ke,Se,Le,Ae,Ze=this.context,q=(0,m.Z)(Ze).getInstance(),le=F.videoModel,ae=F.streamInfo,ue=F.settings;function te(bt,en,Zt,mn,bn,Zn){var Fn=0,qn=0;bt/en>Zt/mn?Fn=(qn=en)/mn*Zt:qn=(Fn=bt)/Zt*mn;var Yn,Jt,Nn=0,Pn=0;return Fn/qn>bn?(Pn=qn,Nn=qn*bn):(Nn=Fn,Pn=Fn/bn),Yn=(bt-Nn)/2,Jt=(en-Pn)/2,Zn?{x:Yn+.1*Nn,y:Jt+.1*Pn,w:.8*Nn,h:.8*Pn}:{x:Yn,y:Jt,w:Nn,h:Pn}}function De(bt,en){var Zt=le.getClientWidth(),mn=le.getClientHeight(),bn=le.getVideoWidth(),Zn=le.getVideoHeight(),Fn=le.getVideoRelativeOffsetTop(),qn=le.getVideoRelativeOffsetLeft();if(bn!==0&&Zn!==0){var Yn=bn/Zn,Jt=!1;bt.isFromCEA608&&(Yn=1.1666666666666667,Jt=!0);var Nn=te.call(this,Zt,mn,bn,Zn,Yn,Jt),Pn=Nn.w,On=Nn.h,Dn=Nn.x,Ct=Nn.y;if(Pn!=we||On!=Te||Dn!=re||Ct!=he||en){if(re=Dn+qn,he=Ct+Fn,we=Pn,Te=On,ie){var Qe=ie.style;Qe&&(Qe.left=re+"px",Qe.top=he+"px",Qe.width=we+"px",Qe.height=Te+"px",Qe.zIndex=Ve&&document[Ve]||Pe?Ke:null,q.trigger(_.Z.CAPTION_CONTAINER_RESIZE))}var Vt=bt.activeCues;if(Vt)for(var qe=Vt.length,Je=0;Je<qe;++Je){var Ot=Vt[Je];Ot.scaleCue(Ot)}}}}function Ce(bt){var en,Zt,mn,bn,Zn,Fn=we,qn=Te;if(bt.cellResolution){var Yn=[Fn/bt.cellResolution[0],qn/bt.cellResolution[1]];if(bt.linePadding){for(en in bt.linePadding)if(bt.linePadding.hasOwnProperty(en)){Zt=(bt.linePadding[en]*Yn[0]).toString();for(var Jt=document.getElementsByClassName("spanPadding"),Nn=0;Nn<Jt.length;Nn++)Jt[Nn].style.cssText=Jt[Nn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt),Jt[Nn].style.cssText=Jt[Nn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}if(bt.fontSize){for(en in bt.fontSize)if(bt.fontSize.hasOwnProperty(en)){bt.fontSize[en][0]==="%"?mn=bt.fontSize[en][1]/100:bt.fontSize[en][0]==="c"&&(mn=bt.fontSize[en][1]),Zt=(mn*Yn[1]).toString(),Zn=en!=="defaultFontSize"?document.getElementsByClassName(en):document.getElementsByClassName("paragraph");for(var Pn=0;Pn<Zn.length;Pn++)Zn[Pn].style.cssText=Zn[Pn].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}if(bt.lineHeight){for(en in bt.lineHeight)if(bt.lineHeight.hasOwnProperty(en)){bt.lineHeight[en][0]==="%"?bn=bt.lineHeight[en][1]/100:bt.fontSize[en][0]==="c"&&(bn=bt.lineHeight[en][1]),Zt=(bn*Yn[1]).toString(),Zn=document.getElementsByClassName(en);for(var On=0;On<Zn.length;On++)Zn[On].style.cssText=Zn[On].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}}}if(bt.isd){var Dn=document.getElementById(bt.cueID);Dn&&ie.removeChild(Dn),xe(bt)}}function Be(bt,en){var Zt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,mn=/^#(.*)$/;if(Zt.test(en)){var bn=Zt.exec(en),Zn=parseInt(bn[4],10)-1;return"data:image/png;base64,"+btoa(bt.images[Zn])}if(mn.test(en)){var Fn=mn.exec(en)[1];return"data:image/png;base64,"+bt.embeddedImages[Fn]}return en}function xe(bt){if(ie){vr.call(this);var en=document.createElement("div");ie.appendChild(en),je=(0,Nr.renderHTML)(bt.isd,en,function(Zt){return Be(bt,Zt)},ie.clientHeight,ie.clientWidth,ue.get().streaming.text.imsc.displayForcedOnlyMode,function(Zt){j.info("renderCaption :",Zt)},je,ue.get().streaming.text.imsc.enableRollUp),en.id=bt.cueID,q.trigger(_.Z.CAPTION_RENDERED,{captionDiv:en,currentTrackIdx:H})}}function me(bt,en){return!!en&&en.endTime>=bt.startTime}function Me(bt,en){return!!ue.get().streaming.text.extendSegmentedCues&&!!function(Zt,mn,bn){for(var Zn=0;Zn<bn.length;Zn++){var Fn=bn[Zn];if(JSON.stringify(Zt[Fn])!==JSON.stringify(mn[Fn]))return!1}return!0}(en,bt,ol)&&(en.endTime=Math.max(en.endTime,bt.endTime),!0)}function ze(bt,en){en&&en.forEach(function(Zt){Zt.kind&&Zt.kind==="image"&&(Zt.src=Be(bt,Zt.src)),ze(bt,Zt.contents)})}function mt(bt,en,Zt){var mn=_t(bt),bn=ue.get().streaming.text.dispatchForManualRendering;if(mn&&Array.isArray(Zt)&&Zt.length!==0)for(var Zn=0;Zn<Zt.length;Zn++){var Fn=null,qn=Zt[Zn];mn.cellResolution=qn.cellResolution,mn.isFromCEA608=qn.isFromCEA608,isNaN(qn.start)||isNaN(qn.end)||(bn?Fn=lt(qn,en):Bt(qn)&&ie?Fn=qt(qn,en,mn):qn.data&&(Fn=Gt(qn,en,mn)));try{if(Fn){if(!un(mn,Fn))if(ue.get().streaming.text.webvtt.customRenderingEnabled)mn.manualCueList||(mn.manualCueList=[]),mn.manualCueList.push(Fn);else{var Yn=void 0;mn.cues&&mn.cues.length!==0&&(Yn=mn.cues[mn.cues.length-1]),me(Fn,Yn)?Me(Fn,Yn)||(Yn.isd&&(Yn.onexit=function(){}),mn.mode!==E.Z.TEXT_DISABLED&&mn.addCue(Fn)):mn.mode!==E.Z.TEXT_DISABLED&&mn.addCue(Fn)}var Jt=ue.get().streaming.buffer.bufferToKeep;Qt(mn,0,le.getTime()-Jt)}else j.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Nn){throw Bn(mn),mn.addCue(Fn),Nn}}}function lt(bt,en){var Zt=jt(bt,en);return Zt.onenter=function(){Bt(bt)&&Ae&&Ae.cueID!==Zt.cueID&&pt(Ae),delete Zt.type,Ae=Zt,vt(Zt)},Zt.onexit=function(){pt(Zt),Ae=null},Zt}function vt(bt){q.trigger(_.Z.CUE_ENTER,bt)}function pt(bt){q.trigger(_.Z.CUE_EXIT,{cueID:bt.cueID})}function qt(bt,en,Zt){var mn=this,bn=jt(bt,en);return ie.style.left=re+"px",ie.style.top=he+"px",ie.style.width=we+"px",ie.style.height=Te+"px",bn.onenter=function(){var Zn=this;Zt.mode===E.Z.TEXT_SHOWING&&(this.isd?(Le?requestAnimationFrame(function(){return xe(Zn)}):xe(this),j.debug("Cue enter id:"+this.cueID)):(ie.appendChild(this.cueHTMLElement),Ce.call(mn,this),q.trigger(_.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:H})))},bn.onexit=function(){if(ie)for(var Zn=ie.childNodes,Fn=0;Fn<Zn.length;++Fn)Zn[Fn].id===this.cueID&&(j.debug("Cue exit id:"+Zn[Fn].id),ie.removeChild(Zn[Fn]),--Fn)},bn}function Gt(bt,en,Zt){var mn=jt(bt,en);if(mn.isActive=!1,bt.styles)try{bt.styles.align!==void 0&&"align"in mn&&(mn.align=bt.styles.align),bt.styles.line!==void 0&&"line"in mn&&(mn.line=bt.styles.line),bt.styles.snapToLines!==void 0&&"snapToLines"in mn&&(mn.snapToLines=bt.styles.snapToLines),bt.styles.position!==void 0&&"position"in mn&&(mn.position=bt.styles.position),bt.styles.size!==void 0&&"size"in mn&&(mn.size=bt.styles.size)}catch(bn){j.error(bn)}return mn.onenter=function(){Zt.mode===E.Z.TEXT_SHOWING&&q.trigger(_.Z.CAPTION_RENDERED,{currentTrackIdx:H})},mn}function Bt(bt){return bt.type==="html"}function jt(bt,en){return Bt(bt)?function(Zt,mn){var bn=new V(Zt.start+mn,Zt.end+mn,"");return bn.cueHTMLElement=Zt.cueHTMLElement,bn.isd=Zt.isd,bn.images=Zt.images,bn.embeddedImages=Zt.embeddedImages,bn.cueID=Zt.cueID,bn.scaleCue=Ce.bind(self),bn.cellResolution=Zt.cellResolution,bn.lineHeight=Zt.lineHeight,bn.linePadding=Zt.linePadding,bn.fontSize=Zt.fontSize,bn.isd&&ze(bn,bn.isd.contents),bn}(bt,en):function(Zt,mn){var bn=new V(Zt.start-mn,Zt.end-mn,Zt.data);return bn.cueID="".concat(bn.startTime,"_").concat(bn.endTime),bn}(bt,en)}function xn(bt){if(_e)for(var en=_e.childNodes,Zt=0;Zt<en.length;++Zt)en[Zt].id===bt.cueID&&(_e.removeChild(en[Zt]),--Zt)}function it(){var bt,en=[],Zt=function(bn,Zn){var Fn;if(typeof Symbol>"u"||bn[Symbol.iterator]==null){if(Array.isArray(bn)||(Fn=function(On,Dn){if(On){if(typeof On=="string")return il(On,Dn);var Ct=Object.prototype.toString.call(On).slice(8,-1);return Ct==="Object"&&On.constructor&&(Ct=On.constructor.name),Ct==="Map"||Ct==="Set"?Array.from(On):Ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ct)?il(On,Dn):void 0}}(bn))||Zn){Fn&&(bn=Fn);var qn=0,Yn=function(){};return{s:Yn,n:function(){return qn>=bn.length?{done:!0}:{done:!1,value:bn[qn++]}},e:function(On){throw On},f:Yn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Jt,Nn=!0,Pn=!1;return{s:function(){Fn=bn[Symbol.iterator]()},n:function(){var On=Fn.next();return Nn=On.done,On},e:function(On){Pn=!0,Jt=On},f:function(){try{Nn||Fn.return==null||Fn.return()}finally{if(Pn)throw Jt}}}}(le.getTextTracks());try{for(Zt.s();!(bt=Zt.n()).done;){var mn=bt.value;mn.manualMode===E.Z.TEXT_SHOWING&&en.push(mn)}}catch(bn){Zt.e(bn)}finally{Zt.f()}return en}function _t(bt){return bt>=0&&W[bt]?le.getTextTrack(W[bt].kind,W[bt].id,W[bt].lang,W[bt].isTTML,W[bt].isEmbedded):null}function Xt(bt){var en=this;if(bt!==H){var Zt=_t(H=bt);Dt.call(this,Zt),ve&&(clearInterval(ve),ve=null),Zt&&Zt.renderingType==="html"&&(De.call(this,Zt,!0),window.ResizeObserver?(Se=new window.ResizeObserver(function(){De.call(en,Zt,!0)})).observe(le.getElement()):ve=setInterval(De.bind(this,Zt),500))}}function Dt(bt){vr.call(this),bt&&bt.renderingType==="html"?kn.call(this):mr.call(this)}function un(bt,en){if(!bt.cues)return!1;for(var Zt=0;Zt<bt.cues.length;Zt++)if(bt.cues[Zt].startTime===en.startTime&&bt.cues[Zt].endTime===en.endTime)return!0;return!1}function an(bt,en,Zt){var mn=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!bt&&(isNaN(en)||(mn?bt.startTime:bt.endTime)>=en)&&(isNaN(Zt)||(mn?bt.endTime:bt.startTime)<=Zt)}function Qt(bt,en,Zt){var mn,bn;if(!(Zt<en)&&bt&&(bt.cues||bt.manualCueList)){var Zn=bt.cues&&bt.cues.length>0?"native":"custom",Fn=Zn==="native"?bt.cues:bt.manualCueList;if(!Fn||Fn.length===0)return;for(var qn=Fn.length-1;qn>=0;qn--)!an(Fn[qn],en,Zt,!0)||(mn=Fn[qn],bn=le.getTime(),mn.startTime>=bn&&mn.endTime<=bn)||(Zn==="native"?bt.removeCue(Fn[qn]):(xn(Fn[qn]),delete bt.manualCueList[qn]))}}function Bn(bt,en,Zt){var mn=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(bt&&(bt.cues||bt.manualCueList)){var bn=bt.cues&&bt.cues.length>0?"native":"custom",Zn=bn==="native"?bt.cues:bt.manualCueList;if(!Zn||Zn.length===0)return;for(var Fn=Zn.length-1,qn=Fn;qn>=0;qn--)an(Zn[qn],en,Zt,mn)&&(bn==="native"?(Zn[qn].onexit&&Zn[qn].onexit(),bt.removeCue(Zn[qn])):(xn(Zn[qn]),delete bt.manualCueList[qn]))}}function kn(){var bt=document.getElementById("native-cue-style");if(!bt){(bt=document.createElement("style")).id="native-cue-style",document.head.appendChild(bt);var en=bt.sheet,Zt=le.getElement();try{Zt&&(Zt.id?en.insertRule("#"+Zt.id+"::cue {background: transparent}",0):Zt.classList.length!==0?en.insertRule("."+Zt.className+"::cue {background: transparent}",0):en.insertRule("video::cue {background: transparent}",0))}catch(mn){j.info(""+mn.message)}}}function mr(){var bt=document.getElementById("native-cue-style");bt&&document.head.removeChild(bt)}function vr(){if(ie)for(;ie.firstChild;)ie.removeChild(ie.firstChild)}return O={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(V=window.VTTCue||window.TextTrackCue,W=[],ee=[],H=-1,re=0,he=0,we=0,Te=0,ie=null,_e=null,ve=null,Pe=!1,Ke=2147483647,je=null,Le="requestAnimationFrame"in window,document.fullscreenElement!==void 0?Ve="fullscreenElement":document.webkitIsFullScreen!==void 0?Ve="webkitIsFullScreen":document.msFullscreenElement?Ve="msFullscreenElement":document.mozFullScreen&&(Ve="mozFullScreen"))},getStreamId:function(){return ae.id},addTextTrack:function(bt){W.push(bt)},addCaptions:mt,createTracks:function(){var bt=ue.get().streaming.text.dispatchForManualRendering;W.sort(function(Dn,Ct){return Dn.index-Ct.index}),ie=le.getTTMLRenderingDiv(),_e=le.getVttRenderingDiv();for(var en,Zt,mn,bn,Zn,Fn,qn=-1,Yn=0;Yn<W.length;Yn++){var Jt=(Zt=(en=W[Yn]).kind,mn=en.id!==void 0?en.id:en.lang,bn=en.lang,Zn=en.isTTML,Fn=en.isEmbedded,le.addTextTrack(Zt,mn,bn,Zn,Fn));ee.push(Jt),W[Yn].defaultTrack&&(Jt.default=!0,qn=Yn);var Nn=_t(Yn);Nn&&(Nn.mode=E.Z.TEXT_SHOWING,ie&&(W[Yn].isTTML||W[Yn].isEmbedded)?Nn.renderingType="html":Nn.renderingType="default"),mt(Yn,0,W[Yn].captionData),q.trigger(_.Z.TEXT_TRACK_ADDED)}if(Xt.call(this,qn),qn>=0){q.on(_.Z.PLAYBACK_METADATA_LOADED,function Dn(){var Ct=_t(qn);Ct&&Ct.renderingType==="html"&&De.call(this,Ct,!0),q.off(_.Z.PLAYBACK_METADATA_LOADED,Dn,this)},this);for(var Pn=0;Pn<W.length;Pn++){var On=_t(Pn);On&&(On.mode=Pn!==qn||bt?E.Z.TEXT_HIDDEN:E.Z.TEXT_SHOWING,On.manualMode=Pn===qn?E.Z.TEXT_SHOWING:E.Z.TEXT_HIDDEN)}}q.trigger(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:H,tracks:W,streamId:ae.id})},getCurrentTrackIdx:function(){return H},setCurrentTrackIdx:Xt,getTrackIdxForId:function(bt){for(var en=-1,Zt=0;Zt<W.length;Zt++)if(W[Zt].id===bt){en=Zt;break}return en},getCurrentTrackInfo:function(){return W[H]},setModeForTrackIdx:function(bt,en){var Zt=_t(bt);Zt&&Zt.mode!==en&&(Zt.mode=en),Zt&&Zt.manualMode!==en&&(Zt.manualMode=en)},deleteCuesFromTrackIdx:function(bt,en,Zt){var mn=_t(bt);mn&&Bn(mn,en,Zt)},deleteAllTextTracks:function(){for(var bt=ee?ee.length:0,en=0;en<bt;en++){var Zt=_t(en);Zt&&Bn.call(this,Zt,ae.start,ae.start+ae.duration,!1)}ee=[],W=[],ve&&(clearInterval(ve),ve=null),Se&&le&&(Se.unobserve(le.getElement()),Se=null),H=-1,vr.call(this)},manualCueProcessing:function(bt){var en=it();if(en&&en.length>0){var Zt=en[0].manualCueList;Zt&&Zt.length>0&&Zt.forEach(function(mn){mn.startTime<=bt&&mn.endTime>=bt&&!mn.isActive?(mn.isActive=!0,ue.get().streaming.text.dispatchForManualRendering?vt(mn):WebVTT.processCues(window,[mn],_e,mn.cueID)):mn.isActive&&(mn.startTime>bt||mn.endTime<bt)&&(mn.isActive=!1,ue.get().streaming.text.dispatchForManualRendering?pt(mn):xn(mn))})}},disableManualTracks:function(){var bt=it();if(bt&&bt.length>0){var en=bt[0].manualCueList;en&&en.length>0&&en.forEach(function(Zt){if(Zt.isActive){if(Zt.isActive=!1,ue.get().streaming.text.dispatchForManualRendering)pt(Zt);else if(_e)for(var mn=_e.childNodes,bn=0;bn<mn.length;++bn)mn[bn].id===Zt.cueID&&(_e.removeChild(mn[bn]),--bn)}})}}},j=(0,M.Z)(Ze).getInstance().getLogger(O),O}Kr.__dashjs_factory_name="TextTracks";var Qs=U.Z.getClassFactory(Kr);function tp(){var F,O,j,V,W,ee,H=this.context;function re(ie){var _e=ie.split(":"),ve=_e.length-1;return ie=60*parseInt(_e[ve-1],10)+parseFloat(_e[ve]),ve===2&&(ie+=3600*parseInt(_e[0],10)),ie}function he(ie){var _e=ie.split(V),ve=_e[1].split(ee);return ve.shift(),_e[1]=ve[0],ve.shift(),{cuePoints:_e,styles:we(ve)}}function we(ie){var _e={};return ie.forEach(function(ve){if(ve.split(/:/).length>1){var Ve=ve.split(/:/)[1],Pe=!1;Ve&&Ve.search(/%/)!=-1&&(Pe=!0,Ve=parseInt(Ve.replace(/%/,""),10)),(ve.match(/align/)||ve.match(/A/))&&(_e.align=Ve),(ve.match(/line/)||ve.match(/L/))&&(_e.line=Ve==="auto"?Ve:parseInt(Ve,10),Pe&&(_e.snapToLines=!1)),(ve.match(/position/)||ve.match(/P/))&&(_e.position=Ve),(ve.match(/size/)||ve.match(/S/))&&(_e.size=Ve)}}),_e}function Te(ie,_e){for(var ve,Ve=_e,Pe="",je="";ie[Ve]!==""&&Ve<ie.length;)Ve++;if((ve=Ve-_e)>1)for(var Ke=0;Ke<ve;Ke++){if((je=ie[_e+Ke]).match(V)){Pe="";break}Pe+=je,Ke!==ve-1&&(Pe+="\n")}else(je=ie[_e]).match(V)||(Pe=je);return Pe}return F={parse:function(ie){var _e,ve,Ve=[];if(!ie)return Ve;_e=(ie=ie.split(j)).length,ve=-1;for(var Pe=0;Pe<_e;Pe++){var je=ie[Pe];if(je.length>0&&je!=="WEBVTT"&&je.match(V)){var Ke=he(je),Se=Ke.cuePoints,Le=Ke.styles,Ae=Te(ie,Pe+1),Ze=re(Se[0].replace(W,"")),q=re(Se[1].replace(W,""));!isNaN(Ze)&&!isNaN(q)&&Ze>=ve&&q>Ze?Ae!==""?(ve=Ze,Ve.push({start:Ze,end:q,data:Ae,styles:Le})):O.error("Skipping cue due to empty/malformed cue text"):O.error("Skipping cue due to incorrect cue timing")}}return Ve},getCaptionStyles:we},O=(0,M.Z)(H).getInstance().getLogger(F),j=/(?:\r\n|\r|\n)/gm,V=/-->/,W=/(^[\s]+|[\s]+$)/g,ee=/\s\b/g,F}tp.__dashjs_factory_name="VTTParser";var Bi=U.Z.getSingletonFactory(tp);function Wm(){var F,O;return F={parse:function(j){var V=[];return O.oncue=function(W){W.start=W.startTime,W.end=W.endTime,W.data=W.text,W.styles={align:W.align,line:W.line,position:W.position,size:W.size},V.push(W)},O.parse(j),V}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(O=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(j){}}(),F}Wm.__dashjs_factory_name="VttCustomRenderingParser";var $m=U.Z.getSingletonFactory(Wm);function Xm(){var F,O,j=this.context,V=(0,m.Z)(j).getInstance(),W=0;return F={parse:function(ee,H,re,he,we){var Te,ie,_e,ve="",Ve=[],Pe={},je={},Ke="",Se="",Le={onOpenTag:function(ae,ue,te){if(te[" imagetype"]&&!te[" imageType"]&&(V.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Vs.LEVELS.ERROR,event:Vs.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),te[" imageType"]=te[" imagetype"]),ue==="image"&&(ae==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||ae==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!te[" imageType"]||te[" imageType"].value!=="PNG")return void O.warn("smpte-tt imageType != PNG. Discarded");Ke=te["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){Ke&&(je[Ke]=Se.trim()),Se="",Ke=""},onText:function(ae){Ke&&(Se+=ae)}};if(!ee)throw ve="no ttml data to parse",new Error(ve);Pe.data=ee,V.trigger(T.Z.TTML_TO_PARSE,Pe);var Ae=(0,Nr.fromXML)(Pe.data,function(ae){ve=ae},Le);V.trigger(T.Z.TTML_PARSED,{ttmlString:Pe.data,ttmlDoc:Ae});var Ze,q=Ae.getMediaTimeEvents();for(_e=0;_e<q.length;_e++){var le=(0,Nr.generateISD)(Ae,q[_e],function(ae){ve=ae});le.contents.some(function(ae){return ae.contents.length})&&(Te=q[_e]+H)<(ie=q[_e+1]+H)&&Ve.push({start:Te,end:ie,type:"html",cueID:(Ze="cue_TTML_"+W,W++,Ze),isd:le,images:we,embeddedImages:je})}if(ve!=="")throw O.error(ve),new Error(ve);return Ve}},O=(0,M.Z)(j).getInstance().getLogger(F),F}Xm.__dashjs_factory_name="TTMLParser";var Qm=U.Z.getSingletonFactory(Xm);function np(F,O){var j=Object.keys(F);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(F);O&&(V=V.filter(function(W){return Object.getOwnPropertyDescriptor(F,W).enumerable})),j.push.apply(j,V)}return j}function Dc(F){for(var O=1;O<arguments.length;O++){var j=arguments[O]!=null?arguments[O]:{};O%2?np(Object(j),!0).forEach(function(V){$a(F,V,j[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(j)):np(Object(j)).forEach(function(V){Object.defineProperty(F,V,Object.getOwnPropertyDescriptor(j,V))})}return F}function $a(F,O,j){return O in F?Object.defineProperty(F,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):F[O]=j,F}function rp(F,O){(O==null||O>F.length)&&(O=F.length);for(var j=0,V=new Array(O);j<O;j++)V[j]=F[j];return V}function Pc(F){var O,j,V,W=this.context,ee=(0,m.Z)(W).getInstance(),H=(0,Tt.Z)(W).getInstance(),re=F.adapter,he=F.baseURLController;function we(_e,ve){var Ve,Pe,je=!1;if(he.resolve()){var Ke=re.getVoRepresentations(_e);Ke&&Ke.length>0&&(Ve=he.resolve(Ke[0].path).url)}var Se=_e.essentialPropertiesAsArray.filter(function(Ae){return Ae.schemeIdUri&&Ae.schemeIdUri===E.Z.FONT_DOWNLOAD_DVB_SCHEME}),Le=_e.supplementalPropertiesAsArray.filter(function(Ae){return Ae.schemeIdUri&&Ae.schemeIdUri===E.Z.FONT_DOWNLOAD_DVB_SCHEME});Se.length>0?(je=!0,Pe=Se):Pe=Le,Pe.forEach(function(Ae){if(function(ae){return!(!(ae.value&&ae.value==="1"&&ae.dvbUrl&&ae.dvbUrl.length>0&&ae.dvbFontFamily&&ae.dvbFontFamily.length>0&&ae.dvbMimeType)||ae.dvbMimeType!==E.Z.OFF_MIMETYPE&&ae.dvbMimeType!==E.Z.WOFF_MIMETYPE)}(Ae)){var Ze=(q=Ae.dvbUrl,le=Ve,H.isPathAbsolute(q)?q:H.isRelative(q)?le?H.resolve(q,le):H.resolve(q):q);V.push({fontFamily:Ae.dvbFontFamily,url:Ze,mimeType:Ae.dvbMimeType,trackId:_e.id,streamId:ve,isEssential:je,status:"unloaded",fontFace:new FontFace(Ae.dvbFontFamily,"url(".concat(Ze,")"),{display:"swap"})})}var q,le})}function Te(_e,ve){var Ve=V[_e];V[_e]=Dc(Dc({},Ve),{},{status:ve})}function ie(){V=[]}return O={addFontsFromTracks:function(_e,ve){if(_e&&Array.isArray(_e)&&ve)for(var Ve=0;Ve<_e.length;Ve++)we(_e[Ve],ve)},downloadFonts:function(){for(var _e=function(Ve){var Pe=V[Ve];document.fonts.add(Pe.fontFace),ee.trigger(_.Z.DVB_FONT_DOWNLOAD_ADDED,Pe),Pe.fontFace.load().then(function(){Te(Ve,"loaded"),ee.trigger(_.Z.DVB_FONT_DOWNLOAD_COMPLETE,Pe)},function(je){Te(Ve,"error"),j.debug("Font download error: ",je),ee.trigger(_.Z.DVB_FONT_DOWNLOAD_FAILED,Pe)})},ve=0;ve<V.length;ve++)_e(ve)},getFonts:function(){return V},getFontsForTrackId:function(_e){return V.filter(function(ve){return ve.trackId&&ve.trackId===_e})},reset:function(){(function(){var _e,ve=function(je,Ke){var Se;if(typeof Symbol>"u"||je[Symbol.iterator]==null){if(Array.isArray(je)||(Se=function(ae,ue){if(ae){if(typeof ae=="string")return rp(ae,ue);var te=Object.prototype.toString.call(ae).slice(8,-1);return te==="Object"&&ae.constructor&&(te=ae.constructor.name),te==="Map"||te==="Set"?Array.from(ae):te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te)?rp(ae,ue):void 0}}(je))||Ke){Se&&(je=Se);var Le=0,Ae=function(){};return{s:Ae,n:function(){return Le>=je.length?{done:!0}:{done:!1,value:je[Le++]}},e:function(ae){throw ae},f:Ae}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ze,q=!0,le=!1;return{s:function(){Se=je[Symbol.iterator]()},n:function(){var ae=Se.next();return q=ae.done,ae},e:function(ae){le=!0,Ze=ae},f:function(){try{q||Se.return==null||Se.return()}finally{if(le)throw Ze}}}}(V);try{for(ve.s();!(_e=ve.n()).done;){var Ve=_e.value,Pe=document.fonts.delete(Ve.fontFace);j.debug("Removal of fontFamily: ".concat(Ve.fontFamily," was ").concat(Pe?"successful":"unsuccessful"))}}catch(je){ve.e(je)}finally{ve.f()}})(),ie()}},j=(0,M.Z)(W).getInstance().getLogger(O),ie(),O}Pc.__dashjs_factory_name="DVBFonts";var Zl=U.Z.getClassFactory(Pc);function Zr(F){var O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve,Pe=this.context,je=F.adapter,Ke=F.errHandler,Se=F.manifestModel,Le=F.mediaController,Ae=F.baseURLController,Ze=F.videoModel,q=F.settings;function le(Me){if(Ve.error("Could not download ".concat(Me.isEssential?"an essential":"a"," font - fontFamily: ").concat(Me.fontFamily,", url: ").concat(Me.url)),Me.isEssential){var ze=W[Me.streamId].getTrackIdxForId(Me.trackId);W[Me.streamId].setModeForTrackIdx(ze,E.Z.TEXT_DISABLED)}}function ae(Me){if(Ve.debug("Successfully downloaded ".concat(Me.isEssential?"an essential":"a"," font - fontFamily: ").concat(Me.fontFamily,", url: ").concat(Me.url)),Me.isEssential){var ze=W[Me.streamId].getTrackIdxForId(Me.trackId);ze===W[Me.streamId].getCurrentTrackIdx()?W[Me.streamId].setModeForTrackIdx(ze,E.Z.TEXT_SHOWING):W[Me.streamId].setModeForTrackIdx(ze,E.Z.TEXT_HIDDEN)}}function ue(Me){var ze=Me.tracks,mt=Me.index,lt=Me.streamId;if(q.get().streaming.text.defaultEnabled===!1&&!Ce()||_e)Be(lt,-1);else{var vt=Le.getCurrentTrackFor(E.Z.TEXT,lt);if(vt){var pt={lang:vt.lang,role:vt.roles[0],index:vt.index,codec:vt.codec,accessibility:vt.accessibility[0]};ze.some(function(qt,Gt){if(Le.matchSettings(pt,qt))return Be(lt,Gt),mt=Gt,!0})}we=!1}j[lt].lastEnabledIndex=mt,he.trigger(_.Z.TEXT_TRACKS_ADDED,{enabled:Ce(),index:mt,tracks:ze,streamId:lt}),ie=!0,ve.addFontsFromTracks(ze,lt),ve.getFonts().forEach(function(qt){if(qt.isEssential){var Gt=W[qt.streamId].getTrackIdxForId(qt.trackId);W[qt.streamId].setModeForTrackIdx(Gt,E.Z.TEXT_DISABLED)}}),ve.downloadFonts()}function te(Me){try{var ze=Me.streamId;if(!W[ze]||isNaN(Me.time))return;W[ze].manualCueProcessing(Me.time)}catch(mt){}}function De(Me){try{var ze=Me.streamId;if(!W[ze])return;W[ze].disableManualTracks()}catch(mt){}}function Ce(){var Me=!0;return we&&!Te&&(Me=!1),Me}function Be(Me,ze){(we=ze===-1)&&Le&&Le.saveTextSettingsDisabled();var mt=xe(Me);if(mt!==ze&&W[Me]){W[Me].disableManualTracks();var lt=W[Me].getCurrentTrackInfo(),vt=lt?Ze.getTextTrack(lt.kind,lt.id,lt.lang,lt.isTTML,lt.isEmbedded):null;vt&&vt.mode!==E.Z.TEXT_DISABLED&&W[Me].setModeForTrackIdx(mt,E.Z.TEXT_HIDDEN),W[Me].setCurrentTrackIdx(ze),lt=W[Me].getCurrentTrackInfo();var pt=q.get().streaming.text.dispatchForManualRendering;lt&&!pt&&lt.mode!==E.Z.TEXT_DISABLED&&W[Me].setModeForTrackIdx(ze,E.Z.TEXT_SHOWING),lt&&lt.isFragmented&&!lt.isEmbedded?function(qt,Gt,Bt){if(V[qt])for(var jt=V[qt].getConfig().fragmentedTracks,xn=0;xn<jt.length;xn++){var it=jt[xn];if(Gt.lang===it.lang&&(it.id?Gt.id===it.id:Gt.index===it.index)){var _t=Le.getCurrentTrackFor(E.Z.TEXT,qt);(it.id?_t.id!==it.id:_t.index!==it.index)?(W[qt].deleteCuesFromTrackIdx(Bt),V[qt].setCurrentFragmentedTrackIdx(xn)):Bt===-1&&he.trigger(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:qt,mediaType:E.Z.TEXT})}}}(Me,lt,mt):lt&&!lt.isFragmented&&function(qt,Gt){he.trigger(T.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Gt},{streamId:qt,mediaType:E.Z.TEXT})}(Me,lt),Le.setTrack(lt)}}function xe(Me){return W[Me].getCurrentTrackIdx()}function me(){V={},W={},j={},we=!0,ie=!1,_e=!1}return O={deactivateStream:function(Me){if(Me){var ze=Me.id;V[ze]&&V[ze].resetMediaInfos(),W[ze]&&W[ze].deleteAllTextTracks()}},initialize:function(){ve=Zl(Pe).create({adapter:je,baseURLController:Ae}),he.on(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,ue,O),he.on(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,O),he.on(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,O),q.get().streaming.text.webvtt.customRenderingEnabled&&(he.on(T.Z.PLAYBACK_TIME_UPDATED,te,O),he.on(T.Z.PLAYBACK_SEEKING,De,O))},initializeForStream:function(Me){var ze=Me.id,mt=Qs(Pe).create({videoModel:Ze,settings:q,streamInfo:Me});mt.initialize(),W[ze]=mt;var lt=Xf(Pe).create({errHandler:Ke,adapter:je,dvbFonts:ve,manifestModel:Se,mediaController:Le,videoModel:Ze,textTracks:mt,vttParser:ee,vttCustomRenderingParser:H,ttmlParser:re,streamInfo:Me,settings:q});lt.initialize(),V[ze]=lt,j[ze]={},j[ze].lastEnabledIndex=-1},createTracks:function(Me){var ze=Me.id;W[ze]&&W[ze].createTracks()},getTextSourceBuffer:function(Me){var ze=Me.id;if(V&&V[ze])return V[ze]},getAllTracksAreDisabled:function(){return we},addEmbeddedTrack:function(Me,ze){var mt=Me.id;V[mt]&&V[mt].addEmbeddedTrack(ze)},enableText:function(Me,ze){return(0,ge.PS)(ze,"boolean"),Ce()!==ze&&(ze&&Be(Me,j[Me].lastEnabledIndex),ze||(j[Me].lastEnabledIndex=xe(Me),ie?Be(Me,-1):_e=!0)),!0},isTextEnabled:Ce,setTextTrack:Be,getCurrentTrackIdx:xe,enableForcedTextStreaming:function(Me){return(0,ge.PS)(Me,"boolean"),Te=Me,!0},addMediaInfosToBuffer:function(Me,ze,mt){var lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,vt=Me.id;V[vt]&&V[vt].addMediaInfos(ze,mt,lt)},reset:function(){ve.reset(),me(),he.off(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,ue,O),he.off(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,O),he.off(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,O),q.get().streaming.text.webvtt.customRenderingEnabled&&(he.off(T.Z.PLAYBACK_TIME_UPDATED,te,O),he.off(T.Z.PLAYBACK_SEEKING,De,O)),Object.keys(V).forEach(function(Me){V[Me].resetEmbedded(),V[Me].reset()})}},Te=!1,ie=!1,_e=!1,ee=Bi(Pe).getInstance(),H=$m(Pe).getInstance(),re=Qm(Pe).getInstance(),he=(0,m.Z)(Pe).getInstance(),Ve=(0,M.Z)(Pe).getInstance().getLogger(O),me(),O}Zr.__dashjs_factory_name="TextController";var ip=U.Z.getClassFactory(Zr);function op(){var F,O,j,V,W,ee,H,re,he,we,Te,ie,_e,ve,Ve,Pe,je,Ke,Se,Le,Ae,Ze,q,le,ae,ue,te,De,Ce,Be,xe,me,Me,ze,mt,lt,vt,pt,qt,Gt="You must first call initialize() and set a source before calling this method",Bt="You must first call initialize() and set a valid source and view before calling this method",jt="You must first call attachView() to set the video element before calling this method",xn="You must first call attachSource() with a valid source before calling this method",it="MediaPlayer not initialized!",_t=this.context,Xt=(0,m.Z)(_t).getInstance(),Dt=(0,Ge.Z)(_t).getInstance(),un=(0,M.Z)(_t).getInstance({settings:Dt});function an(){Yn(null),Fn(null),V=null,ve&&(ve.reset(),ve=null),Ve&&(Ve.reset(),Ve=null),Le&&Le.reset(),Dt.reset(),je&&(je.reset(),je=null)}function Qt(){return!!j&&!!lt.getElement()}function Bn(){return(0,qf.e)()}function kn(){if(!H)throw Bt;return De.isPaused()}function mr(){if(!H)throw Bt;return De.getIsDynamic()}function vr(qe){var Je=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Ot=me.getCurrentDVRInfo(Je);if(!Ot)return 0;var yn=De.getOriginalLiveDelay(),Cn=Ot.range.start+qe;return Cn>Ot.range.end-yn&&(Cn=Ot.range.end-yn),Cn}function bt(qe){if(!H)throw Bt;var Je=Zn().currentTime;if(qe!==void 0)Je=ae.getTimeRelativeToStreamId(Je,qe);else if(De.getIsDynamic()){var Ot=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,yn=me.getCurrentDVRInfo(Ot);Je=yn===null||Je===0?0:Math.max(0,Je-yn.range.start)}return Je}function en(){if(!H)throw Bt;var qe=Zn().duration;if(De.getIsDynamic()){var Je=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Ot=me.getCurrentDVRInfo(Je);qe=Ot?Ot.range.end-Ot.range.start:0}return qe}function Zt(qe){(0,ge.PS)(qe,"boolean"),re=qe}function mn(){Le.restoreDefaultUTCTimingSources()}function bn(){return me}function Zn(){if(!lt.getElement())throw jt;return lt.getElement()}function Fn(qe){if(!W)throw it;lt.setElement(qe),qe&&(Dn(),function(){if(!Ve){var Je=dashjs.MetricsReporting;if(typeof Je=="function"){var Ot=Je(_t).create();Ve=Ot.createMetricsReporting({debug:un,eventBus:Xt,mediaElement:Zn(),adapter:Ke,dashMetrics:me,mediaPlayerModel:Se,events:T.Z,constants:E.Z,metricsConstants:P.Z})}}}(),function(){if(!Pe){var Je=dashjs.MssHandler;typeof Je=="function"&&(Ie.extend(Je.errors),Pe=Je(_t).create({eventBus:Xt,mediaPlayerModel:Se,dashMetrics:me,manifestModel:Me,playbackController:De,streamController:ae,protectionController:ve,baseURLController:Ze,errHandler:Ae,events:T.Z,constants:E.Z,debug:un,initSegmentType:at.w.INIT_SEGMENT_TYPE,BASE64:ua,ISOBoxer:Lr,settings:Dt}))}}(),ae&&ae.switchToVideoElement(he)),H&&Nn(),Vt(he)}function qn(qe){if(!ee)throw Gt;var Je=ae.getActiveStreamInfo();return Je?_e.getTracksFor(qe,Je.id):[]}function Yn(qe){var Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!W)throw it;typeof qe=="string"&&vt.initialize(qe),Je==null&&(Je=NaN),isNaN(Je)||(Je=Math.max(0,Je)),he=Je,j=qe,(ee||H)&&Nn(),Qt()&&Vt(he)}function Jt(){if(!ee)throw Gt;var qe=ae.getActiveStreamInfo();return qe?ae.getStreamById(qe.id):null}function Nn(){H=!1,ee=!1,Ke.reset(),ae.reset(),te.reset(),xe.reset(),De.reset(),Ce.reset(),Be.reset(),we.reset(),_e.reset(),qt.reset(),ve&&(Dt.get().streaming.protection.keepProtectionMediaKeys?ve.stop():(ve.reset(),ve=null,Dn())),ue.reset(),ze.reset(),mt.reset()}function Pn(){var qe=On();ae||(ae=Rh(_t).getInstance()),ue||(ue=ip(_t).create({errHandler:Ae,manifestModel:Me,adapter:Ke,mediaController:_e,baseURLController:Ze,videoModel:lt,settings:Dt})),le.setConfig({capabilities:q,customParametersModel:Le,adapter:Ke,settings:Dt,manifestModel:Me,errHandler:Ae}),ae.setConfig({capabilities:q,capabilitiesFilter:le,manifestLoader:qe,manifestModel:Me,mediaPlayerModel:Se,customParametersModel:Le,protectionController:ve,textController:ue,adapter:Ke,dashMetrics:me,errHandler:Ae,timelineConverter:ie,videoModel:lt,playbackController:De,serviceDescriptionController:Ce,contentSteeringController:Be,abrController:we,mediaController:_e,settings:Dt,baseURLController:Ze,uriFragmentModel:vt,segmentBaseController:qt}),te.setConfig({settings:Dt,playbackController:De,streamController:ae,videoModel:lt,timelineConverter:ie,adapter:Ke}),De.setConfig({streamController:ae,serviceDescriptionController:Ce,dashMetrics:me,adapter:Ke,videoModel:lt,timelineConverter:ie,settings:Dt}),xe.setConfig({streamController:ae,playbackController:De,mediaPlayerModel:Se,videoModel:lt,settings:Dt}),we.setConfig({streamController:ae,domStorage:pt,mediaPlayerModel:Se,customParametersModel:Le,cmsdModel:mt,dashMetrics:me,adapter:Ke,videoModel:lt,settings:Dt}),ze.setConfig({abrController:we,dashMetrics:me,playbackController:De}),mt.setConfig({}),we.initialize(),ae.initialize(re,V),ue.initialize(),te.initialize(),xe.initialize(),ze.initialize(),mt.initialize(),Be.initialize(),qt.initialize()}function On(){return jE(_t).create({debug:un,errHandler:Ae,dashMetrics:me,mediaPlayerModel:Se,requestModifier:(0,He.Z)(_t).getInstance(),mssHandler:Pe,settings:Dt})}function Dn(){if(ve)return ve;var qe=dashjs.Protection;if(typeof qe=="function"){var Je=qe(_t).create();return T.Z.extend(qe.events),_.Z.extend(qe.events,{publicOnly:!0}),Ie.extend(qe.errors),q||(q=(0,bm.Z)(_t).getInstance()),ve=Je.createProtectionSystem({debug:un,errHandler:Ae,videoModel:lt,customParametersModel:Le,capabilities:q,eventBus:Xt,events:T.Z,BASE64:ua,constants:E.Z,cmcdModel:ze,settings:Dt})}return null}function Ct(){if(!W)throw it;if(je)return je;var qe=dashjs.OfflineController;if(typeof qe=="function"){T.Z.extend(qe.events),_.Z.extend(qe.events,{publicOnly:!0}),Ie.extend(qe.errors);var Je=On(),Ot=za(_t).create();return Ot.setConfig({manifestModel:Me,adapter:Ke,manifestLoader:Je,errHandler:Ae,contentSteeringController:Be}),je=qe(_t).create({debug:un,manifestUpdater:Ot,baseURLController:Ze,manifestLoader:Je,manifestModel:Me,mediaPlayerModel:Se,abrController:we,playbackController:De,adapter:Ke,errHandler:Ae,dashMetrics:me,timelineConverter:ie,segmentBaseController:qt,schemeLoaderFactory:Te,eventBus:Xt,events:T.Z,errors:Ie,constants:E.Z,settings:Dt,dashConstants:y.Z,urlUtils:(0,Tt.Z)(_t).getInstance()})}return null}function Qe(qe){var Je=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Ot=me.getCurrentDVRInfo(Je);return Ot?qe+(Ot.manifestInfo.availableFrom.getTime()/1e3+Ot.range.start):0}function Vt(){var qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;je&&je.resetRecords(),!ee&&j&&(ee=!0,O.info("Streaming Initialized"),Pn(),typeof j=="string"?ae.load(j,qe):ae.loadWithManifest(j,qe)),!H&&Qt()&&(H=!0,O.info("Playback Initialized"))}return F={initialize:function(qe,Je,Ot){var yn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;q||(q=(0,bm.Z)(_t).getInstance()).setConfig({settings:Dt}),Ae||(Ae=Im(_t).getInstance()),q.supportsMediaSource()?(W||(W=!0,ie=Vm(_t).getInstance(),we||(we=HE(_t).getInstance()).setConfig({settings:Dt}),Te||(Te=ci(_t).getInstance()),De||(De=x(_t).getInstance()),_e||(_e=If(_t).getInstance()),ae||(ae=Rh(_t).getInstance()),te||(te=pm(_t).getInstance()),xe||(xe=Mh(_t).getInstance()),Ce||(Ce=Sf(_t).getInstance()),Be||(Be=Vi(_t).getInstance()),le||(le=ZE(_t).getInstance()),Ke=$f(_t).getInstance(),Me=bc(_t).getInstance(),ze=ur(_t).getInstance(),mt=sn(_t).getInstance(),me=Mc(_t).getInstance({settings:Dt}),pt=Fl(_t).getInstance({settings:Dt}),Ke.setConfig({constants:E.Z,cea608parser:C(),errHandler:Ae,BASE64:ua}),Ze||(Ze=Lh(_t).create()),Ze.setConfig({adapter:Ke,contentSteeringController:Be}),Ce.setConfig({adapter:Ke}),qt||(qt=km(_t).getInstance({dashMetrics:me,mediaPlayerModel:Se,errHandler:Ae,baseURLController:Ze,events:T.Z,eventBus:Xt,debug:un,boxParser:(0,Vu.Z)(_t).getInstance(),requestModifier:(0,He.Z)(_t).getInstance(),errors:Ie})),_e.setConfig({domStorage:pt,settings:Dt,customParametersModel:Le}),Se.setConfig({playbackController:De,serviceDescriptionController:Ce}),Be.setConfig({adapter:Ke,errHandler:Ae,dashMetrics:me,mediaPlayerModel:Se,manifestModel:Me,serviceDescriptionController:Ce,eventBus:Xt,requestModifier:(0,He.Z)(_t).getInstance()}),mn(),Zt(Ot===void 0||Ot),Ct()),qe&&Fn(qe),Je&&Yn(Je,yn),O.info("[dash.js "+Bn()+"] MediaPlayer has been initialized")):Ae.error(new ce.Z(Ie.CAPABILITY_MEDIASOURCE_ERROR_CODE,Ie.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(qe){qe&&(qe.capabilities&&(q=qe.capabilities),qe.capabilitiesFilter&&(le=qe.capabilitiesFilter),qe.streamController&&(ae=qe.streamController),qe.textController&&(ue=qe.textController),qe.gapController&&(te=qe.gapController),qe.playbackController&&(De=qe.playbackController),qe.serviceDescriptionController&&(Ce=qe.serviceDescriptionController),qe.contentSteeringController&&(Be=qe.contentSteeringController),qe.catchupController&&(xe=qe.catchupController),qe.mediaPlayerModel&&(Se=qe.mediaPlayerModel),qe.customParametersModel&&(Le=qe.customParametersModel),qe.abrController&&(we=qe.abrController),qe.schemeLoaderFactory&&(Te=qe.schemeLoaderFactory),qe.mediaController&&(_e=qe.mediaController),qe.settings&&(Dt=qe.settings))},on:function(qe,Je,Ot,yn){Xt.on(qe,Je,Ot,yn)},off:function(qe,Je,Ot){Xt.off(qe,Je,Ot)},extend:function(qe,Je,Ot){U.Z.extend(qe,Je,Ot,_t)},attachView:Fn,attachSource:Yn,refreshManifest:function(qe){if(!W)throw it;if(!Qt())return qe(null,xn);var Je=this;typeof qe=="function"&&Xt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Ot(yn){Xt.off(T.Z.INTERNAL_MANIFEST_LOADED,Ot,Je),yn.error?qe(null,yn.error):qe(yn.manifest)},Je),ae.refreshManifest()},isReady:Qt,preload:function(){if(!lt.getElement()&&!ee){if(!j)throw xn;Vt(he)}},play:function(){if(!H)throw Bt;(!re||kn()&&H)&&De.play(!0)},isPaused:kn,pause:function(){if(!H)throw Bt;De.pause()},isSeeking:function(){if(!H)throw Bt;return De.isSeeking()},isDynamic:mr,getLowLatencyModeEnabled:function(){if(!H)throw Bt;return De.getLowLatencyModeEnabled()},seek:function(qe){if(!H)throw Bt;if((0,ge.PS)(qe,"number"),isNaN(qe))throw E.Z.BAD_ARGUMENT_ERROR;qe<0&&(qe=0);var Je=De.getIsDynamic()?vr(qe):qe,Ot=Zn();!De.getIsDynamic()&&Ot.duration&&(Je=Math.min(Ot.duration,Je)),De.seek(Je,!1,!1,!0)},seekToOriginalLive:function(){H&&mr()&&De.seekToOriginalLive()},setPlaybackRate:function(qe){Zn().playbackRate=qe},getPlaybackRate:function(){return Zn().playbackRate},setMute:function(qe){(0,ge.PS)(qe,"boolean"),Zn().muted=qe},isMuted:function(){return Zn().muted},setVolume:function(qe){if(typeof qe!="number"||isNaN(qe)||qe<0||qe>1)throw E.Z.BAD_ARGUMENT_ERROR;Zn().volume=qe},getVolume:function(){return Zn().volume},time:bt,duration:en,timeAsUTC:function(){if(!H)throw Bt;return bt()<0?NaN:Qe(bt())},durationAsUTC:function(){if(!H)throw Bt;return Qe(en())},getActiveStream:Jt,getDVRWindowSize:function(){var qe=ae&&ae.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Je=me.getCurrentDVRInfo(qe);return Je?Je.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:vr,getAvailableBaseUrls:function(){var qe=Me.getValue();return qe?Ze.getBaseUrls(qe):[]},getAvailableLocations:function(){var qe=Me.getValue();if(!qe)return[];var Je=Ke.getLocation(qe),Ot=Be.getSynthesizedLocationElements(Je);return Je.concat(Ot)},getTargetLiveDelay:function(){if(!H)throw Bt;return De.getOriginalLiveDelay()},convertToTimeCode:function(qe){qe=Math.max(qe,0);var Je=Math.floor(qe/3600),Ot=Math.floor(qe%3600/60),yn=Math.floor(qe%3600%60);return(Je===0?"":Je<10?"0"+Je.toString()+":":Je.toString()+":")+(Ot<10?"0"+Ot.toString():Ot.toString())+":"+(yn<10?"0"+yn.toString():yn.toString())},formatUTC:function(qe,Je,Ot){var yn=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Cn=new Date(1e3*qe),yr=Cn.toLocaleDateString(Je),oi=Cn.toLocaleTimeString(Je,{hour12:Ot});return yn?oi+" "+yr:oi},getVersion:Bn,getDebug:function(){return un},getBufferLength:function(qe){var Je=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT];if(qe)return Je.indexOf(qe)!==-1?bn().getCurrentBufferLevel(qe)||NaN:(O.warn("getBufferLength requested for invalid type"),NaN);var Ot=Je.map(function(yn){return qn(yn).length>0?bn().getCurrentBufferLevel(yn):Number.MAX_VALUE}).reduce(function(yn,Cn){return Math.min(yn,Cn)});return Ot===Number.MAX_VALUE?NaN:Ot},getTTMLRenderingDiv:function(){return lt?lt.getTTMLRenderingDiv():null},getVideoElement:Zn,getSource:function(){if(!j)throw xn;return j},updateSource:function(qe){j=qe,ae.load(j)},getCurrentLiveLatency:function(){if(!W)throw it;return H?De.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(qe){if(!ee)throw Gt;return we.getTopBitrateInfoFor(qe)},setAutoPlay:Zt,getAutoPlay:function(){return re},getDashMetrics:bn,getQualityFor:function(qe){if(!ee)throw Gt;if(qe===E.Z.IMAGE){var Je=Jt();if(!Je)return-1;var Ot=Je.getThumbnailController();return Ot?Ot.getCurrentTrackIndex():-1}return we.getQualityFor(qe)},setQualityFor:function(qe,Je){var Ot=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!ee)throw Gt;if(qe===E.Z.IMAGE){var yn=Jt();if(!yn)return;var Cn=yn.getThumbnailController();Cn&&Cn.setTrackByIndex(Je)}we.setPlaybackQuality(qe,ae.getActiveStreamInfo(),Je,{forceReplace:Ot})},updatePortalSize:function(){we.setElementSize(),we.setWindowResizeEventCalled(!0)},enableText:function(qe){var Je=ae.getActiveStreamInfo();return!(!Je||!ue)&&ue.enableText(Je.id,qe)},enableForcedTextStreaming:function(qe){return!(!ae.getActiveStreamInfo()||!ue)&&ue.enableForcedTextStreaming(qe)},isTextEnabled:function(){var qe=ae.getActiveStreamInfo();return!(!qe||!ue)&&ue.isTextEnabled(qe)},setTextTrack:function(qe){if(!H)throw Bt;var Je=ae.getActiveStreamInfo();Je&&ue&&ue.setTextTrack(Je.id,qe)},getBitrateInfoListFor:function(qe){if(!ee)throw Gt;var Je=Jt();return Je?Je.getBitrateListFor(qe):[]},getStreamsFromManifest:function(qe){if(!ee)throw Gt;return Ke.getStreamsInfo(qe)},getTracksFor:qn,getTracksForTypeFromManifest:function(qe,Je,Ot){if(!ee)throw Gt;return(Ot=Ot||Ke.getStreamsInfo(Je,1)[0])?Ke.getAllMediaInfoForType(Ot,qe,Je):[]},getCurrentTrackFor:function(qe){if(!ee)throw Gt;var Je=ae.getActiveStreamInfo();return _e.getCurrentTrackFor(qe,Je.id)},setInitialMediaSettingsFor:function(qe,Je){if(!W)throw it;_e.setInitialSettings(qe,Je)},getInitialMediaSettingsFor:function(qe){if(!W)throw it;return _e.getInitialSettings(qe)},setCurrentTrack:function(qe){var Je=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!ee)throw Gt;_e.setTrack(qe,Je)},addABRCustomRule:function(qe,Je,Ot){Le.addAbrCustomRule(qe,Je,Ot)},removeABRCustomRule:function(qe){Le.removeAbrCustomRule(qe)},removeAllABRCustomRule:function(){Le.removeAllAbrCustomRule()},getABRCustomRules:function(){return Le.getAbrCustomRules()},getAverageThroughput:function(qe){var Je=we.getThroughputHistory(),Ot=De.getIsDynamic();return Je?Je.getAverageThroughput(qe,Ot):0},retrieveManifest:function(qe,Je){var Ot=On(),yn=this;Xt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Cn(yr){yr.error?Je(null,yr.error):Je(yr.manifest),Xt.off(T.Z.INTERNAL_MANIFEST_LOADED,Cn,yn),Ot.reset()},yn),vt.initialize(qe),Ot.load(qe)},addUTCTimingSource:function(qe,Je){Le.addUTCTimingSource(qe,Je)},removeUTCTimingSource:function(qe,Je){Le.removeUTCTimingSource(qe,Je)},clearDefaultUTCTimingSources:function(){Le.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:mn,setXHRWithCredentialsForType:function(qe,Je){Le.setXHRWithCredentialsForType(qe,Je)},getXHRWithCredentialsForType:function(qe){return Le.getXHRWithCredentialsForType(qe)},getProtectionController:function(){return Dn()},attachProtectionController:function(qe){ve=qe},setProtectionData:function(qe){V=qe,ae&&ae.setProtectionData(V)},registerLicenseRequestFilter:function(qe){Le.registerLicenseRequestFilter(qe)},registerLicenseResponseFilter:function(qe){Le.registerLicenseResponseFilter(qe)},unregisterLicenseRequestFilter:function(qe){Le.unregisterLicenseRequestFilter(qe)},unregisterLicenseResponseFilter:function(qe){Le.unregisterLicenseResponseFilter(qe)},registerCustomCapabilitiesFilter:function(qe){Le.registerCustomCapabilitiesFilter(qe)},unregisterCustomCapabilitiesFilter:function(qe){Le.unregisterCustomCapabilitiesFilter(qe)},setCustomInitialTrackSelectionFunction:function(qe){Le.setCustomInitialTrackSelectionFunction(qe)},resetCustomInitialTrackSelectionFunction:function(){Le.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(qe){if(!lt.getElement())throw jt;lt.setTTMLRenderingDiv(qe)},attachVttRenderingDiv:function(qe){if(!lt.getElement())throw jt;lt.setVttRenderingDiv(qe)},getCurrentTextTrackIndex:function(){var qe=ae.getActiveStreamInfo();if(qe&&ue)return ue.getCurrentTrackIdx(qe.id)},provideThumbnail:function(qe,Je){if(typeof Je=="function")if(qe<0)Je(null);else{var Ot=De.getIsDynamic()?vr(qe):qe,yn=ae.getStreamForTime(Ot);if(yn!==null){var Cn=yn.getThumbnailController();if(Cn)return Cn.provide(Ot,Je);Je(null)}else Je(null)}},getDashAdapter:function(){return Ke},getOfflineController:function(){return Ct()},triggerSteeringRequest:function(){if(Be)return Be.loadSteeringData()},getCurrentSteeringResponseData:function(){if(Be)return Be.getCurrentSteeringResponseData()},getSettings:function(){return Dt.get()},updateSettings:function(qe){Dt.update(qe)},resetSettings:function(){Dt.reset()},reset:an,destroy:function(){an(),U.Z.deleteSingletonInstances(_t)}},O=un.getLogger(F),W=!1,H=!1,ee=!1,re=!0,he=NaN,ve=null,je=null,V=null,Ke=null,qt=null,T.Z.extend(_.Z),Se=tl(_t).getInstance(),Le=(0,Ai.Z)(_t).getInstance(),lt=VE(_t).getInstance(),vt=xa(_t).getInstance(),F}op.__dashjs_factory_name="MediaPlayer";var Cu=U.Z.getClassFactory(op);Cu.events=_.Z,Cu.errors=Ie,U.Z.updateClassFactory(op.__dashjs_factory_name,Cu);var ap=Cu},8825:function(b,p,w){function k(m){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},k(m)}function C(m,T){return C=Object.setPrototypeOf||function(U,M){return U.__proto__=M,U},C(m,T)}function E(m,T){return!T||k(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function y(m){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},y(m)}var P=new(function(m){(function(I,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(x&&x.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),x&&C(I,x)})(_,m);var T,U,M=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,x=y(T);if(U){var Z=y(this).constructor;I=Reflect.construct(x,arguments,Z)}else I=x.apply(this,arguments);return E(this,I)});function _(){var I;return function(x,Z){if(!(x instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(I=M.call(this)).AST_IN_FUTURE="astInFuture",I.BASE_URLS_UPDATED="baseUrlsUpdated",I.BUFFER_EMPTY="bufferStalled",I.BUFFER_LOADED="bufferLoaded",I.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",I.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",I.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",I.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",I.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",I.DYNAMIC_TO_STATIC="dynamicToStatic",I.ERROR="error",I.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",I.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",I.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",I.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",I.LOG="log",I.MANIFEST_LOADING_STARTED="manifestLoadingStarted",I.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",I.MANIFEST_LOADED="manifestLoaded",I.METRICS_CHANGED="metricsChanged",I.METRIC_CHANGED="metricChanged",I.METRIC_ADDED="metricAdded",I.METRIC_UPDATED="metricUpdated",I.PERIOD_SWITCH_STARTED="periodSwitchStarted",I.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",I.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",I.QUALITY_CHANGE_RENDERED="qualityChangeRendered",I.TRACK_CHANGE_RENDERED="trackChangeRendered",I.STREAM_INITIALIZING="streamInitializing",I.STREAM_UPDATED="streamUpdated",I.STREAM_ACTIVATED="streamActivated",I.STREAM_DEACTIVATED="streamDeactivated",I.STREAM_INITIALIZED="streamInitialized",I.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",I.TEXT_TRACKS_ADDED="allTextTracksAdded",I.TEXT_TRACK_ADDED="textTrackAdded",I.CUE_ENTER="cueEnter",I.CUE_EXIT="cueExit",I.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",I.TTML_PARSED="ttmlParsed",I.TTML_TO_PARSE="ttmlToParse",I.CAPTION_RENDERED="captionRendered",I.CAPTION_CONTAINER_RESIZE="captionContainerResize",I.CAN_PLAY="canPlay",I.CAN_PLAY_THROUGH="canPlayThrough",I.PLAYBACK_ENDED="playbackEnded",I.PLAYBACK_ERROR="playbackError",I.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",I.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",I.PLAYBACK_LOADED_DATA="playbackLoadedData",I.PLAYBACK_PAUSED="playbackPaused",I.PLAYBACK_PLAYING="playbackPlaying",I.PLAYBACK_PROGRESS="playbackProgress",I.PLAYBACK_RATE_CHANGED="playbackRateChanged",I.PLAYBACK_SEEKED="playbackSeeked",I.PLAYBACK_SEEKING="playbackSeeking",I.PLAYBACK_STALLED="playbackStalled",I.PLAYBACK_STARTED="playbackStarted",I.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",I.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",I.PLAYBACK_WAITING="playbackWaiting",I.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",I.EVENT_MODE_ON_START="eventModeOnStart",I.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",I.CONFORMANCE_VIOLATION="conformanceViolation",I.REPRESENTATION_SWITCH="representationSwitch",I.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",I.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",I.INBAND_PRFT="inbandPrft",I.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",I.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",I}return _}(w(8342).Z));p.Z=P},3393:function(b,p){function w(C,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}var k=new(function(){function C(){(function(P,m){if(!(P instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var E,y;return E=C,(y=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&w(E.prototype,y),C}());p.Z=k},3860:function(b,p){function w(C,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}var k=new(function(){function C(){(function(P,m){if(!(P instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var E,y;return E=C,(y=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&w(E.prototype,y),C}());p.Z=k},8080:function(b,p,w){w.d(p,{default:function(){return G}});var k=function K(){(function(ge,de){if(!(ge instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};k.SSL_CONNECTION_FAILED_PREFIX="SSL",k.DNS_RESOLUTION_FAILED="C00",k.HOST_UNREACHABLE="C01",k.CONNECTION_REFUSED="C02",k.CONNECTION_ERROR="C03",k.CORRUPT_MEDIA_ISOBMFF="M00",k.CORRUPT_MEDIA_OTHER="M01",k.BASE_URL_CHANGED="F00",k.BECAME_REPORTER="S00";var C=k,E=w(1180);function y(K){var ge,de,He=(K=K||{}).eventBus,Tt=K.dashMetrics,st=K.metricsConstants,ot=K.events;function tt(nn){var cn=new C;if(de){for(var Ft in nn)nn.hasOwnProperty(Ft)&&(cn[Ft]=nn[Ft]);cn.mpdurl||(cn.mpdurl=de.originalUrl||de.url),cn.terror||(cn.terror=new Date),Tt.addDVBErrors(cn)}}function ht(nn){nn.error||(de=nn.manifest)}function yt(nn){tt({errorcode:C.BASE_URL_CHANGED,servicelocation:nn.entry})}function Et(){tt({errorcode:C.BECAME_REPORTER})}function Mt(nn){var cn;nn.metric===st.HTTP_REQUEST&&((cn=nn.value).responsecode===0||cn.responsecode==null||cn.responsecode>=400||cn.responsecode<100||cn.responsecode>=600)&&tt({errorcode:cn.responsecode||C.CONNECTION_ERROR,url:cn.url,terror:cn.tresponse,servicelocation:cn._serviceLocation})}function _n(nn){var cn;switch(nn.error?nn.error.code:0){case MediaError.MEDIA_ERR_NETWORK:cn=C.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:cn=C.CORRUPT_MEDIA_OTHER;break;default:return}tt({errorcode:cn})}return ge={initialize:function(){He.on(ot.MANIFEST_UPDATED,ht,ge),He.on(ot.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,yt,ge),He.on(ot.METRIC_ADDED,Mt,ge),He.on(ot.METRIC_UPDATED,Mt,ge),He.on(ot.PLAYBACK_ERROR,_n,ge),He.on(E.Z.BECAME_REPORTING_PLAYER,Et,ge)},reset:function(){He.off(ot.MANIFEST_UPDATED,ht,ge),He.off(ot.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,yt,ge),He.off(ot.METRIC_ADDED,Mt,ge),He.off(ot.METRIC_UPDATED,Mt,ge),He.off(ot.PLAYBACK_ERROR,_n,ge),He.off(E.Z.BECAME_REPORTING_PLAYER,Et,ge)}}}y.__dashjs_factory_name="DVBErrorsTranslator";var P=dashjs.FactoryMaker.getSingletonFactory(y),m=w(2295);function T(K){K=K||{};var ge,de,He=!1,Tt=this.context,st=K.mediaElement;return ge={initialize:function(ot){ot&&ot.length&&(ot.forEach(function(tt){var ht=tt.starttime,yt=ht+tt.duration;de.add(ht,yt)}),He=!!ot[0]._useWallClockTime)},reset:function(){de.clear()},isEnabled:function(){var ot,tt=de.length;if(!tt)return!0;ot=He?new Date().getTime()/1e3:st.currentTime;for(var ht=0;ht<tt;ht+=1){var yt=de.start(ht),Et=de.end(ht);if(yt<=ot&&ot<Et)return!0}return!1}},de=(0,m.Z)(Tt).create(),ge}T.__dashjs_factory_name="RangeController";var U=dashjs.FactoryMaker.getClassFactory(T);function M(){return{serialise:function K(ge){var de,He,Tt=[],st=[];for(de in ge)if(ge.hasOwnProperty(de)&&de.indexOf("_")!==0){if((He=ge[de])==null&&(He=""),Array.isArray(He)){if(!He.length)continue;st=[],He.forEach(function(ot){var tt=Object.prototype.toString.call(ot).slice(8,-1)!=="Object";st.push(tt?ot:K(ot))}),He=st.map(encodeURIComponent).join(",")}else typeof He=="string"?He=encodeURIComponent(He):He instanceof Date?He=He.toISOString():typeof He=="number"&&(He=Math.round(He));Tt.push(de+"="+He)}return Tt.join("&")}}}M.__dashjs_factory_name="MetricSerialiser";var _=dashjs.FactoryMaker.getSingletonFactory(M);function I(){var K,ge,de,He=window.crypto||window.msCrypto,Tt=Uint32Array,st=Math.pow(2,8*Tt.BYTES_PER_ELEMENT)-1;function ot(){He&&(K||(K=new Tt(10)),He.getRandomValues(K),ge=0)}return de={random:function(tt,ht){var yt;return tt||(tt=0),ht||(ht=1),He?(ge===K.length&&ot(),yt=K[ge]/st,ge+=1):yt=Math.random(),yt*(ht-tt)+tt}},ot(),de}I.__dashjs_factory_name="RNG";var x=dashjs.FactoryMaker.getSingletonFactory(I),Z=w(5717);function Y(K){var ge;K=K||{};var de,He,Tt,st,ot,tt,ht,yt=this.context,Et=[],Mt=K.metricsConstants;function _n(){st=!1,ot=!1,tt=null,ht=null}return ge={report:function(nn,cn){Array.isArray(cn)||(cn=[cn]),ot&&ht.isEnabled()&&cn.forEach(function(Ft){var Gn=de.serialise(Ft);nn!==Mt.DVB_ERRORS&&(Gn="metricname=".concat(nn,"&").concat(Gn)),function(Sr,qr,gr){var fi=new XMLHttpRequest;fi.withCredentials=He.getXHRWithCredentialsForType(Mt.HTTP_REQUEST_DVB_REPORTING_TYPE);var ao=function(){var Gr=Et.indexOf(fi);Gr!==-1&&(Et.splice(Gr,1),!(fi.status>=200&&fi.status<300)&&gr&&gr())};Et.push(fi);try{fi.open("GET",Sr),fi.onloadend=ao,fi.onerror=ao,fi.send()}catch(Gr){fi.onerror()}}(Gn="".concat(tt,"?").concat(Gn),0,function(){ot=!1})})},initialize:function(nn,cn){var Ft;if(ht=cn,!(tt=nn.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");st||((Ft=nn.dvbProbability)&&(Ft===1e3||Ft/1e3>=Tt.random())&&(ot=!0),st=!0)},reset:function(){_n()}},de=_(yt).getInstance(),Tt=x(yt).getInstance(),He=(0,Z.Z)(yt).getInstance(),_n(),ge}Y.__dashjs_factory_name="DVBReporting";var $=dashjs.FactoryMaker.getClassFactory(Y);function Q(K){K=K||{};var ge,de={"urn:dvb:dash:reporting:2014":$},He=this.context,Tt=K.debug?K.debug.getLogger(ge):{},st=K.metricsConstants,ot=K.mediaPlayerModel||{};return{create:function(tt,ht){var yt;try{(yt=de[tt.schemeIdUri](He).create({metricsConstants:st,mediaPlayerModel:ot})).initialize(tt,ht)}catch(Et){yt=null,Tt.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(tt.schemeIdUri," (").concat(Et.message,")"))}return yt},register:function(tt,ht){de[tt]=ht},unregister:function(tt){delete de[tt]}}}Q.__dashjs_factory_name="ReportingFactory";var se=dashjs.FactoryMaker.getSingletonFactory(Q);function R(K){var ge=[],de=se(this.context).getInstance(K);return{initialize:function(He,Tt){He.some(function(st){var ot=de.create(st,Tt);if(ot)return ge.push(ot),!0})},reset:function(){ge.forEach(function(He){return He.reset()}),ge=[]},report:function(He,Tt){ge.forEach(function(st){return st.report(He,Tt)})}}}R.__dashjs_factory_name="ReportingController";var X=dashjs.FactoryMaker.getClassFactory(R);function ce(){return{reconstructFullMetricName:function(K,ge,de){var He=K;return ge&&(He+="("+ge,de&&de.length&&(He+=","+de),He+=")"),He},validateN:function(K){if(!K)throw new Error("missing n");if(isNaN(K))throw new Error("n is NaN");if(K<0)throw new Error("n must be positive");return K}}}ce.__dashjs_factory_name="HandlerHelpers";var oe=dashjs.FactoryMaker.getSingletonFactory(ce);function ye(K){var ge,de,He,Tt,st;K=K||{};var ot=this.context,tt=oe(ot).getInstance(),ht=[],yt=K.metricsConstants;function Et(){var Mt=function(){try{return Object.keys(ht).map(function(_n){return ht[_n]}).reduce(function(_n,nn){return _n.level<nn.level?_n:nn})}catch(_n){return}}();Mt&&st!==Mt.t&&(st=Mt.t,ge.report(He,Mt))}return{initialize:function(Mt,_n,nn){_n&&(de=tt.validateN(nn),ge=_n,He=tt.reconstructFullMetricName(Mt,nn),Tt=setInterval(Et,de))},reset:function(){clearInterval(Tt),Tt=null,de=0,ge=null,st=null},handleNewMetric:function(Mt,_n,nn){Mt===yt.BUFFER_LEVEL&&(ht[nn]=_n)}}}ye.__dashjs_factory_name="BufferLevelHandler";var be=dashjs.FactoryMaker.getClassFactory(ye),Xe=dashjs.FactoryMaker.getClassFactory(function(K){var ge,de=(K=K||{}).eventBus,He=K.metricsConstants;function Tt(){de.off(E.Z.METRICS_INITIALISATION_COMPLETE,Tt,this),de.trigger(E.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(st,ot){ot&&(ge=ot,de.on(E.Z.METRICS_INITIALISATION_COMPLETE,Tt,this))},reset:function(){ge=null},handleNewMetric:function(st,ot){st===He.DVB_ERRORS&&ge&&ge.report(st,ot)}}});function Ie(K){var ge,de,He,Tt,st;K=K||{};var ot=[],tt=oe(this.context).getInstance(),ht=K.metricsConstants;function yt(){var Et=ot;Et.length&&ge&&ge.report(Tt,Et),ot=[]}return{initialize:function(Et,Mt,_n,nn){Mt&&(de=tt.validateN(_n),ge=Mt,nn&&nn.length&&(He=nn),Tt=tt.reconstructFullMetricName(Et,_n,nn),st=setInterval(yt,de))},reset:function(){clearInterval(st),st=null,de=null,He=null,ot=[],ge=null},handleNewMetric:function(Et,Mt){Et===ht.HTTP_REQUEST&&(He&&He!==Mt.type||ot.push(Mt))}}}Ie.__dashjs_factory_name="HttpListHandler";var Ge=dashjs.FactoryMaker.getClassFactory(Ie);function at(){var K,ge;return{initialize:function(de,He){K=de,ge=He},reset:function(){ge=null,K=void 0},handleNewMetric:function(de,He){de===K&&ge&&ge.report(K,He)}}}at.__dashjs_factory_name="GenericMetricHandler";var ft=dashjs.FactoryMaker.getClassFactory(at);function We(K){var ge,de=(K=K||{}).debug?K.debug.getLogger(ge):{},He=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,Tt=this.context,st={BufferLevel:be,DVBErrors:Xe,HttpList:Ge,PlayList:ft,RepSwitchList:ft,TcpList:ft};return{create:function(ot,tt){var ht,yt=ot.match(He);if(yt){try{(ht=st[yt[1]](Tt).create({eventBus:K.eventBus,metricsConstants:K.metricsConstants})).initialize(yt[1],tt,yt[3],yt[5])}catch(Et){ht=null,de.error("MetricsHandlerFactory: Could not create handler for type ".concat(yt[1]," with args ").concat(yt[3],", ").concat(yt[5]," (").concat(Et.message,")"))}return ht}},register:function(ot,tt){st[ot]=tt},unregister:function(ot){delete st[ot]}}}We.__dashjs_factory_name="MetricsHandlerFactory";var ut=dashjs.FactoryMaker.getSingletonFactory(We);function At(K){K=K||{};var ge,de=[],He=this.context,Tt=K.eventBus,st=K.events,ot=ut(He).getInstance({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants});function tt(ht){de.forEach(function(yt){yt.handleNewMetric(ht.metric,ht.value,ht.mediaType)})}return ge={initialize:function(ht,yt){ht.split(",").forEach(function(Et,Mt,_n){var nn;if(Et.indexOf("(")!==-1&&Et.indexOf(")")===-1){var cn=_n[Mt+1];cn&&cn.indexOf("(")===-1&&cn.indexOf(")")!==-1&&(Et+=","+cn,delete _n[Mt+1])}(nn=ot.create(Et,yt))&&de.push(nn)}),Tt.on(st.METRIC_ADDED,tt,ge),Tt.on(st.METRIC_UPDATED,tt,ge)},reset:function(){Tt.off(st.METRIC_ADDED,tt,ge),Tt.off(st.METRIC_UPDATED,tt,ge),de.forEach(function(ht){return ht.reset()}),de=[]}}}At.__dashjs_factory_name="MetricsHandlersController";var Ne=dashjs.FactoryMaker.getClassFactory(At);function et(K){var ge,de,He;K=K||{};var Tt=this.context;function st(){ge&&ge.reset(),de&&de.reset(),He&&He.reset()}return{initialize:function(ot){try{(He=U(Tt).create({mediaElement:K.mediaElement})).initialize(ot.Range),(de=X(Tt).create({debug:K.debug,metricsConstants:K.metricsConstants,mediaPlayerModel:K.mediaPlayerModel})).initialize(ot.Reporting,He),(ge=Ne(Tt).create({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants,events:K.events})).initialize(ot.metrics,de)}catch(tt){throw st(),tt}},reset:st}}et.__dashjs_factory_name="MetricsController";var dt=dashjs.FactoryMaker.getClassFactory(et),rn=function K(){(function(ge,de){if(!(ge instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.metrics="",this.Range=[],this.Reporting=[]},Yt=function K(){(function(ge,de){if(!(ge instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},St=function K(){(function(ge,de){if(!(ge instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function kt(K){var ge=(K=K||{}).adapter,de=K.constants;return{getMetrics:function(He){var Tt=[];return He&&He.Metrics_asArray&&He.Metrics_asArray.forEach(function(st){var ot=new rn,tt=ge.getIsDynamic(He);st.hasOwnProperty("metrics")&&(ot.metrics=st.metrics,st.Range_asArray&&st.Range_asArray.forEach(function(ht){var yt=new Yt;yt.starttime=function(Et,Mt,_n){var nn,cn,Ft=0;return Mt?Ft=ge.getAvailabilityStartTime(Et)/1e3:(nn=ge.getRegularPeriods(Et)).length&&(Ft=nn[0].start),cn=Ft,_n&&_n.hasOwnProperty(de.START_TIME)&&(cn+=_n.starttime),cn}(He,tt,ht),ht.hasOwnProperty("duration")?yt.duration=ht.duration:yt.duration=ge.getDuration(He),yt._useWallClockTime=tt,ot.Range.push(yt)}),st.Reporting_asArray&&(st.Reporting_asArray.forEach(function(ht){var yt=new St;ht.hasOwnProperty(de.SCHEME_ID_URI)&&(yt.schemeIdUri=ht.schemeIdUri,ht.hasOwnProperty("value")&&(yt.value=ht.value),ht.hasOwnProperty(de.DVB_REPORTING_URL)&&(yt.dvbReportingUrl=ht[de.DVB_REPORTING_URL]),ht.hasOwnProperty(de.DVB_PROBABILITY)&&(yt.dvbProbability=ht[de.DVB_PROBABILITY]),ot.Reporting.push(yt))}),Tt.push(ot)))}),Tt}}}kt.__dashjs_factory_name="ManifestParsing";var Re=dashjs.FactoryMaker.getSingletonFactory(kt);function ne(K){var ge;K=K||{};var de={},He=this.context,Tt=K.eventBus,st=K.events;function ot(ht){if(!ht.error){var yt=Object.keys(de);Re(He).getInstance({adapter:K.adapter,constants:K.constants}).getMetrics(ht.manifest).forEach(function(Et){var Mt=JSON.stringify(Et);if(de.hasOwnProperty(Mt))yt.splice(Mt,1);else try{var _n=dt(He).create(K);_n.initialize(Et),de[Mt]=_n}catch(nn){}}),yt.forEach(function(Et){de[Et].reset(),delete de[Et]}),Tt.trigger(E.Z.METRICS_INITIALISATION_COMPLETE)}}function tt(){Object.keys(de).forEach(function(ht){de[ht].reset()}),de={}}return ge={reset:function(){Tt.off(st.MANIFEST_UPDATED,ot,ge),Tt.off(st.STREAM_TEARDOWN_COMPLETE,tt,ge)}},Tt.on(st.MANIFEST_UPDATED,ot,ge),Tt.on(st.STREAM_TEARDOWN_COMPLETE,tt,ge),ge}ne.__dashjs_factory_name="MetricsCollectionController";var Ue=dashjs.FactoryMaker.getClassFactory(ne);function L(){var K=this.context;return{createMetricsReporting:function(ge){return P(K).getInstance({eventBus:ge.eventBus,dashMetrics:ge.dashMetrics,metricsConstants:ge.metricsConstants,events:ge.events}).initialize(),Ue(K).create(ge)},getReportingFactory:function(){return se(K).getInstance()},getMetricsHandlerFactory:function(){return ut(K).getInstance()}}}L.__dashjs_factory_name="MetricsReporting";var D=dashjs.FactoryMaker.getClassFactory(L);D.events=E.Z,dashjs.FactoryMaker.updateClassFactory(L.__dashjs_factory_name,D);var G=D},1180:function(b,p,w){function k(m){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},k(m)}function C(m,T){return C=Object.setPrototypeOf||function(U,M){return U.__proto__=M,U},C(m,T)}function E(m,T){return!T||k(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function y(m){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},y(m)}var P=new(function(m){(function(I,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(x&&x.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),x&&C(I,x)})(_,m);var T,U,M=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,x=y(T);if(U){var Z=y(this).constructor;I=Reflect.construct(x,arguments,Z)}else I=x.apply(this,arguments);return E(this,I)});function _(){var I;return function(x,Z){if(!(x instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(I=M.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",I.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",I.CMCD_DATA_GENERATED="cmcdDataGenerated",I}return _}(w(8342).Z));p.Z=P},5717:function(b,p,w){var k=w(2610),C=w(5448),E=w(1264),y=w(3106),P=w(1767),m=w(3393);function T(){var U,M,_,I,x,Z,Y,$,Q=this.context,se=(0,E.Z)(Q).getInstance();function R(){I=[],x=[],Z=[],$=[],Y=null,M=[]}function X(be,Xe){var Ie=-1;be.some(function(Ge,at){if(Ge===Xe)return Ie=at,!0}),Ie<0||be.splice(Ie,1)}function ce(be){var Xe;for(Xe=0;Xe<$.length;Xe++)if($[Xe].rulename===be)return Xe;return-1}function oe(be,Xe){ye(be,Xe);var Ie=new k.Z;Ie.schemeIdUri=be,Ie.value=Xe,M.push(Ie)}function ye(be,Xe){(0,y.PS)(be,"string"),(0,y.PS)(Xe,"string"),M.forEach(function(Ie,Ge){Ie.schemeIdUri===be&&Ie.value===Xe&&M.splice(Ge,1)})}return U={getCustomInitialTrackSelectionFunction:function(){return Y},setCustomInitialTrackSelectionFunction:function(be){Y=be},resetCustomInitialTrackSelectionFunction:function(){Y=null},getLicenseResponseFilters:function(){return x},getLicenseRequestFilters:function(){return I},getCustomCapabilitiesFilters:function(){return Z},registerCustomCapabilitiesFilter:function(be){Z.push(be)},registerLicenseResponseFilter:function(be){x.push(be)},registerLicenseRequestFilter:function(be){I.push(be)},unregisterCustomCapabilitiesFilter:function(be){X(Z,be)},unregisterLicenseResponseFilter:function(be){X(x,be)},unregisterLicenseRequestFilter:function(be){X(I,be)},addAbrCustomRule:function(be,Xe,Ie){if(typeof be!="string"||be!==P.Z.ABANDON_FRAGMENT_RULES&&be!==P.Z.QUALITY_SWITCH_RULES||typeof Xe!="string")throw m.Z.BAD_ARGUMENT_ERROR;var Ge=ce(Xe);Ge===-1?$.push({type:be,rulename:Xe,rule:Ie}):($[Ge].type=be,$[Ge].rule=Ie)},removeAllAbrCustomRule:function(){$=[]},removeAbrCustomRule:function(be){if(be){var Xe=ce(be);Xe!==-1&&$.splice(Xe,1)}else $=[]},getAbrCustomRules:function(){return $},addUTCTimingSource:oe,removeUTCTimingSource:ye,getUTCTimingSources:function(){return M},clearDefaultUTCTimingSources:function(){M=[]},restoreDefaultUTCTimingSources:function(){var be=se.get().streaming.utcSynchronization.defaultTimingSource;oe(be.scheme,be.value)},setXHRWithCredentialsForType:function be(Xe,Ie){Xe?_[Xe]=!!Ie:Object.keys(_).forEach(function(Ge){be(Ge,Ie)})},getXHRWithCredentialsForType:function(be){var Xe=_[be];return Xe===void 0?_.default:Xe},setConfig:function(){},reset:function(){R()}},_={default:!1},R(),U}T.__dashjs_factory_name="CustomParametersModel",p.Z=C.Z.getSingletonFactory(T)},9032:function(b,p,w){var k=w(5448),C=w(7473);function E(P){var m=(P=P||{}).requestModifier;function T(U){var M=new Date,_=U.request,I=new XMLHttpRequest;if(I.open(U.method,U.url,!0),_.responseType&&(I.responseType=_.responseType),_.range&&I.setRequestHeader("Range","bytes="+_.range),_.requestStartDate||(_.requestStartDate=M),m&&m.modifyRequestHeader&&(I=m.modifyRequestHeader(I,{url:U.url})),U.headers)for(var x in U.headers){var Z=U.headers[x];Z&&I.setRequestHeader(x,Z)}I.withCredentials=U.withCredentials,I.onload=U.onload,I.onloadend=U.onend,I.onerror=U.onerror,I.onprogress=U.progress,I.onabort=U.onabort,I.ontimeout=U.ontimeout,I.timeout=U.timeout,I.send(),U.response=I}return{load:function(U){m&&m.modifyRequest?(0,C.k)(U,m).then(function(){return T(U)}):T(U)},abort:function(U){var M=U.response;M.onloadend=M.onerror=M.onprogress=void 0,M.abort()}}}E.__dashjs_factory_name="XHRLoader";var y=k.Z.getClassFactory(E);p.Z=y},1737:function(b,p,w){function k(ln,gn){for(var pn=0;pn<gn.length;pn++){var wt=gn[pn];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(ln,wt.key,wt)}}w.d(p,{default:function(){return Zu}});var C={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},E=function(){function ln(){(function(wt,$t){if(!(wt instanceof $t))throw new TypeError("Cannot call a class as a function")})(this,ln)}var gn,pn;return gn=ln,pn=[{key:"findCencContentProtection",value:function(wt){for(var $t=null,Pt=0;Pt<wt.length;++Pt){var Kt=wt[Pt];Kt.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||Kt.value.toLowerCase()!=="cenc"&&Kt.value.toLowerCase()!=="cbcs"||($t=Kt)}return $t}},{key:"getPSSHData",value:function(wt){var $t=8,Pt=new DataView(wt),Kt=Pt.getUint8($t);return $t+=20,Kt>0&&($t+=4+16*Pt.getUint32($t)),$t+=4,wt.slice($t)}},{key:"getPSSHForKeySystem",value:function(wt,$t){var Pt=ln.parsePSSHList($t);return wt&&Pt.hasOwnProperty(wt.uuid.toLowerCase())?Pt[wt.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(wt,$t){return"pssh"in wt?(wt.pssh.__text=wt.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),$t.decodeArray(wt.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(wt){if(wt==null)return[];for(var $t=new DataView(wt.buffer||wt),Pt={},Kt=0;;){var wn,Mn,zn=void 0,Kn=Kt;if(Kt>=$t.buffer.byteLength)break;if(wn=Kt+$t.getUint32(Kt),Kt+=4,$t.getUint32(Kt)===1886614376)if(Kt+=4,(Mn=$t.getUint8(Kt))===0||Mn===1){Kt++,Kt+=3,zn="";var Ln=void 0,fn=void 0;for(Ln=0;Ln<4;Ln++)zn+=(fn=$t.getUint8(Kt+Ln).toString(16)).length===1?"0"+fn:fn;for(Kt+=4,zn+="-",Ln=0;Ln<2;Ln++)zn+=(fn=$t.getUint8(Kt+Ln).toString(16)).length===1?"0"+fn:fn;for(Kt+=2,zn+="-",Ln=0;Ln<2;Ln++)zn+=(fn=$t.getUint8(Kt+Ln).toString(16)).length===1?"0"+fn:fn;for(Kt+=2,zn+="-",Ln=0;Ln<2;Ln++)zn+=(fn=$t.getUint8(Kt+Ln).toString(16)).length===1?"0"+fn:fn;for(Kt+=2,zn+="-",Ln=0;Ln<6;Ln++)zn+=(fn=$t.getUint8(Kt+Ln).toString(16)).length===1?"0"+fn:fn;Kt+=6,Kt+=4,Pt[zn=zn.toLowerCase()]=$t.buffer.slice(Kn,wn),Kt=wn}else Kt=wn;else Kt=wn}return Pt}},{key:"getLicenseServerUrlFromMediaInfo",value:function(wt,$t){try{if(!wt||wt.length===0)return null;for(var Pt=0,Kt=null;Pt<wt.length&&!Kt;){var wn=wt[Pt];if(wn&&wn.contentProtection&&wn.contentProtection.length>0){var Mn=wn.contentProtection.filter(function(fr){return fr.schemeIdUri&&fr.schemeIdUri===$t});if(Mn&&Mn.length>0)for(var zn=0;zn<Mn.length&&!Kt;){for(var Kn=Mn[zn],Ln=0;Ln<C.attributes.length&&!Kt;){for(var fn=0,Ye=C.attributes[Ln];fn<C.prefixes.length&&!Kt;){var Un=C.prefixes[fn];Kn[Ye]&&Kn[Ye].__prefix&&Kn[Ye].__prefix===Un&&Kn[Ye].__text&&(Kt=Kn[Ye].__text),fn+=1}Ln+=1}zn+=1}}Pt+=1}return Kt}catch(fr){return null}}}],pn&&k(gn,pn),ln}(),y=function ln(gn,pn){(function(wt,$t){if(!(wt instanceof $t))throw new TypeError("Cannot call a class as a function")})(this,ln),this.contentType=gn,this.robustness=pn},P=function ln(gn,pn,wt,$t,Pt){(function(Kt,wn){if(!(Kt instanceof wn))throw new TypeError("Cannot call a class as a function")})(this,ln),this.initDataTypes=["cenc"],gn&&gn.length&&(this.audioCapabilities=gn),pn&&pn.length&&(this.videoCapabilities=pn),this.distinctiveIdentifier=wt,this.persistentState=$t,this.sessionTypes=Pt};function m(ln){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gn){return typeof gn}:function(gn){return gn&&typeof Symbol=="function"&&gn.constructor===Symbol&&gn!==Symbol.prototype?"symbol":typeof gn},m(ln)}function T(ln,gn){return T=Object.setPrototypeOf||function(pn,wt){return pn.__proto__=wt,pn},T(ln,gn)}function U(ln,gn){return!gn||m(gn)!=="object"&&typeof gn!="function"?function(pn){if(pn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pn}(ln):gn}function M(ln){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(gn){return gn.__proto__||Object.getPrototypeOf(gn)},M(ln)}var _=new(function(ln){(function(Pt,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function");Pt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:Pt,writable:!0,configurable:!0}}),Kt&&T(Pt,Kt)})($t,ln);var gn,pn,wt=(gn=$t,pn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Pt){return!1}}(),function(){var Pt,Kt=M(gn);if(pn){var wn=M(this).constructor;Pt=Reflect.construct(Kt,arguments,wn)}else Pt=Kt.apply(this,arguments);return U(this,Pt)});function $t(){var Pt;return function(Kt,wn){if(!(Kt instanceof wn))throw new TypeError("Cannot call a class as a function")}(this,$t),(Pt=wt.call(this)).MEDIA_KEYERR_CODE=100,Pt.MEDIA_KEYERR_UNKNOWN_CODE=101,Pt.MEDIA_KEYERR_CLIENT_CODE=102,Pt.MEDIA_KEYERR_SERVICE_CODE=103,Pt.MEDIA_KEYERR_OUTPUT_CODE=104,Pt.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,Pt.MEDIA_KEYERR_DOMAIN_CODE=106,Pt.MEDIA_KEY_MESSAGE_ERROR_CODE=107,Pt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,Pt.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,Pt.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,Pt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,Pt.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,Pt.KEY_SESSION_CREATED_ERROR_CODE=113,Pt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,Pt.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",Pt.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",Pt.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",Pt.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",Pt.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",Pt.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",Pt.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",Pt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",Pt.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",Pt.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",Pt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",Pt.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",Pt.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",Pt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",Pt}return $t}(w(2230).Z)),I=w(5459),x=function ln(gn,pn,wt,$t,Pt,Kt,wn,Mn){(function(zn,Kn){if(!(zn instanceof Kn))throw new TypeError("Cannot call a class as a function")})(this,ln),this.url=gn,this.method=pn,this.responseType=wt,this.headers=$t,this.withCredentials=Pt,this.messageType=Kt,this.sessionId=wn,this.data=Mn},Z=function ln(gn,pn,wt){(function($t,Pt){if(!($t instanceof Pt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.url=gn,this.headers=pn,this.data=wt},Y=w(7855),$=w(703),Q=w(3393),se=w(5448);function R(ln){return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gn){return typeof gn}:function(gn){return gn&&typeof Symbol=="function"&&gn.constructor===Symbol&&gn!==Symbol.prototype?"symbol":typeof gn},R(ln)}function X(ln){var gn,pn,wt,$t,Pt,Kt,wn,Mn,zn,Kn,Ln,fn=(ln=ln||{}).protectionKeyController,Ye=ln.protectionModel,Un=ln.eventBus,fr=ln.events,Ir=ln.debug,Hr=ln.BASE64,er=ln.constants,dn=[],vn=ln.cmcdModel,on=ln.settings,tr=ln.customParametersModel;function ur(){if(!(Un&&Un.hasOwnProperty("on")&&fn&&fn.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function xr(sn,ir){Mn||zn?Mn&&Rr():function(Tr,Ai){if(!zn){zn=!0;var Wr,Ii=[];Tr=Tr.sort(function(ci,Br){return(Pt&&Pt[ci.ks.systemString]&&Pt[ci.ks.systemString].priority>=0?Pt[ci.ks.systemString].priority:Tr.length)-(Pt&&Pt[Br.ks.systemString]&&Pt[Br.ks.systemString].priority>=0?Pt[Br.ks.systemString].priority:Tr.length)});for(var Vr=0;Vr<Tr.length;Vr++){var Cr=ys(Tr[Vr]);Ii.push({ks:Tr[Vr].ks,configs:[Cr],protData:Tr[Vr].protData})}Ye.requestKeySystemAccess(Ii).then(function(ci){var Br=(Wr=ci.data).mksa&&Wr.mksa.selectedSystemString?Wr.mksa.selectedSystemString:Wr.keySystem.systemString;return pn.info("DRM: KeySystem Access Granted for system string ("+Br+")!  Selecting key system..."),Ye.selectKeySystem(Wr)}).then(function(ci){if(Mn=ci,zn=!1,Ye){Un.trigger(fr.KEY_SYSTEM_SELECTED,{data:Wr});var Br=li(Mn);Br&&Br.serverCertificate&&Br.serverCertificate.length>0&&Ye.setServerCertificate(Hr.decodeArray(Br.serverCertificate).buffer),Rr()}}).catch(function(ci){Mn=null,zn=!1,Ai||Un.trigger(fr.KEY_SYSTEM_SELECTED,{data:null,error:new I.Z(_.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,_.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+ci.error)})})}}(sn,ir)}function Rr(){for(var sn,ir=0;ir<wt.length;ir++)for(sn=0;sn<wt[ir].length;sn++)if(Mn===wt[ir][sn].ks){di(wt[ir][sn]);break}wt=[]}function di(sn){if(fn.isClearKey(Mn)&&sn.protData&&sn.protData.hasOwnProperty("clearkeys")&&Object.keys(sn.protData.clearkeys).length!==0){var ir={kids:Object.keys(sn.protData.clearkeys)};sn.initData=new TextEncoder().encode(JSON.stringify(ir))}sn.sessionId?Ui(sn):sn.initData!==null&&ni(sn)}function Ui(sn){ur(),Ye.loadKeySession(sn)}function ni(sn){var ir=E.getPSSHForKeySystem(Mn,sn?sn.initData:null);if(ir){if(function(Tr){if(!Tr)return!1;try{for(var Ai=Ye.getSessions(),Wr=0;Wr<Ai.length;Wr++)if(Ai[Wr].getKeyId()===Tr)return!0;return!1}catch(Ii){return!1}}(sn.keyId)||vi(ir))return;try{sn.initData=ir,Ye.createKeySession(sn)}catch(Tr){Un.trigger(fr.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+Tr.message)})}}else sn&&sn.initData?Ye.createKeySession(sn):Un.trigger(fr.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Mn?Mn.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function li(sn){if(sn){var ir=sn.systemString;if(Pt)return ir in Pt?Pt[ir]:null}return null}function vi(sn){if(!sn)return!1;try{for(var ir=Ye.getAllInitData(),Tr=0;Tr<ir.length;Tr++)if(fn.initDataEquals(sn,ir[Tr]))return pn.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(Ai){return!1}}function ri(sn){ur(),sn?(Ye.setMediaElement(sn),Un.on(fr.NEED_KEY,Hu,gn)):sn===null&&(Ye.setMediaElement(sn),Un.off(fr.NEED_KEY,Hu,gn))}function ys(sn){var ir=sn.protData,Tr=[],Ai=[],Wr=ir&&ir.audioRobustness&&ir.audioRobustness.length>0?ir.audioRobustness:wn,Ii=ir&&ir.videoRobustness&&ir.videoRobustness.length>0?ir.videoRobustness:wn,Vr=sn.sessionType,Cr=ir&&ir.distinctiveIdentifier?ir.distinctiveIdentifier:"optional",ci=ir&&ir.persistentState?ir.persistentState:Vr==="temporary"?"optional":"required";return $t.forEach(function(Br){Br.type===er.AUDIO?Tr.push(new y(Br.codec,Wr)):Br.type===er.VIDEO&&Ai.push(new y(Br.codec,Ii))}),new P(Tr,Ai,Cr,ci,[Vr])}function Ao(sn){sn.error?Un.trigger(fr.KEY_STATUSES_CHANGED,{data:null,error:sn.error}):pn.debug("DRM: key status = "+sn.status)}function Yo(sn){pn.debug("DRM: onKeyMessage");var ir=sn.data;Un.trigger(fr.KEY_MESSAGE,{data:ir});var Tr=ir.messageType?ir.messageType:"license-request",Ai=ir.message,Wr=ir.sessionToken,Ii=li(Mn),Vr=fn.getLicenseServerModelInstance(Mn,Ii,Tr),Cr={sessionToken:Wr,messageType:Tr};if(Ai&&Ai.byteLength!==0){if(!Vr)return pn.debug("DRM: License server request not required for this message (type = "+sn.data.messageType+").  Session ID = "+Wr.getSessionId()),void Ri(Cr);if(fn.isClearKey(Mn)){var ci=fn.processClearKeyLicenseRequest(Mn,Ii,Ai);if(ci&&ci.keyPairs&&ci.keyPairs.length>0)return pn.debug("DRM: ClearKey license request handled by application!"),Ri(Cr),void Ye.updateKeySession(Wr,ci)}(function(Br,bi,yo){var oa=Br.sessionToken,yi=Br.messageType?Br.messageType:"license-request",Sa={sessionToken:oa,messageType:yi},aa=Mn?Mn.systemString:null,Es=function(sr,ei,Io,Eo,Hi){var Vi=null,Er=Eo.message;if(sr&&sr.serverURL){var Po=sr.serverURL;typeof Po=="string"&&Po!==""?Vi=Po:R(Po)==="object"&&Po.hasOwnProperty(ei)&&(Vi=Po[ei])}else if(sr&&sr.laURL&&sr.laURL!=="")Vi=sr.laURL;else if(!(Vi=E.getLicenseServerUrlFromMediaInfo($t,Mn.schemeIdURI))&&!fn.isClearKey(Mn)){var Ec=E.getPSSHData(Io.initData);(Vi=Mn.getLicenseServerURLFromInitData(Ec))||(Vi=Eo.laURL)}return Vi=Hi.getServerURLFromMessage(Vi,Er,ei)}(yo,yi,oa,Br,bi);if(Es){var wa={},Aa=!1;yo&&qs(wa,yo.httpRequestHeaders);var Eu=Br.message;qs(wa,Mn.getRequestHeadersFromMessage(Eu)),Object.keys(wa).forEach(function(sr){sr.toLowerCase()==="authorization"&&(Aa=!0)}),yo&&typeof yo.withCredentials=="boolean"&&(Aa=yo.withCredentials);var _u=function(sr){if(Ye)if(sr.status>=200&&sr.status<=299){var ei=$.Z.parseHttpHeaders(sr.getAllResponseHeaders?sr.getAllResponseHeaders():null),Io=new Z(sr.responseURL,ei,sr.response);Gu(tr.getLicenseResponseFilters(),Io).then(function(){var Eo=bi.getLicenseMessage(Io.data,aa,yi);Eo!==null?(Ri(Sa),Ye.updateKeySession(oa,Eo)):xl(sr,Sa,aa,yi,bi)})}else xl(sr,Sa,aa,yi,bi)},bh=function(sr){Ri(Sa,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+aa+' update, XHR aborted. status is "'+sr.statusText+'" ('+sr.status+"), readyState is "+sr.readyState))},Ia=function(sr){Ri(Sa,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+aa+' update, XHR error. status is "'+sr.statusText+'" ('+sr.status+"), readyState is "+sr.readyState))},_s=Mn.getLicenseRequestFromMessage(Eu),Tu=bi.getHTTPMethod(yi),Su=bi.getResponseType(aa,yi),Vu=yo&&!isNaN(yo.httpTimeout)?yo.httpTimeout:8e3,vf=oa.getSessionId()||null,Gs=new x(Es,Tu,Su,wa,Aa,yi,vf,_s),yf=isNaN(on.get().streaming.retryAttempts[Y.w.LICENSE])?3:on.get().streaming.retryAttempts[Y.w.LICENSE];Gu(tr.getLicenseRequestFilters(),Gs).then(function(){qu(Gs,yf,Vu,_u,bh,Ia)})}else Ri(Sa,new I.Z(_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(ir,Vr,Ii)}else Ri(Cr,new I.Z(_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Ri(sn,ir){Un.trigger(fr.LICENSE_REQUEST_COMPLETE,{data:sn,error:ir})}function qu(sn,ir,Tr,Ai,Wr,Ii){var Vr=new XMLHttpRequest;if(on.get().streaming.cmcd&&on.get().streaming.cmcd.enabled&&on.get().streaming.cmcd.mode===Q.Z.CMCD_MODE_QUERY){var Cr=vn.getQueryParameter({url:sn.url,type:Y.w.LICENSE});Cr&&(sn.url=$.Z.addAditionalQueryParameterToUrl(sn.url,[Cr]))}for(var ci in Vr.open(sn.method,sn.url,!0),Vr.responseType=sn.responseType,Vr.withCredentials=sn.withCredentials,Tr>0&&(Vr.timeout=Tr),sn.headers)Vr.setRequestHeader(ci,sn.headers[ci]);if(on.get().streaming.cmcd&&on.get().streaming.cmcd.enabled&&on.get().streaming.cmcd.mode===Q.Z.CMCD_MODE_HEADER){var Br=vn.getHeaderParameters({url:sn.url,type:Y.w.LICENSE});if(Br)for(var bi in Br){var yo=Br[bi];yo&&Vr.setRequestHeader(bi,yo)}}var oa=function(){ir--;var yi=isNaN(on.get().streaming.retryIntervals[Y.w.LICENSE])?1e3:on.get().streaming.retryIntervals[Y.w.LICENSE];Ln=setTimeout(function(){qu(sn,ir,Tr,Ai,Wr,Ii)},yi)};Vr.onload=function(){Kn=null,this.status>=200&&this.status<=299||ir<=0?Ai(this):(pn.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+ir),oa())},Vr.ontimeout=Vr.onerror=function(){Kn=null,ir<=0?Ii(this):(pn.warn("License request network request failed . Retrying it... Pending retries: "+ir),oa())},Vr.onabort=function(){Wr(this)},Un.trigger(fr.LICENSE_REQUEST_SENDING,{url:sn.url,headers:sn.headers,payload:sn.data,sessionId:sn.sessionId}),Kn=Vr,Vr.send(sn.data)}function yu(){Kn&&(Kn.onloadend=Kn.onerror=Kn.onprogress=void 0,Kn.abort(),Kn=null),Ln&&(clearTimeout(Ln),Ln=null)}function qs(sn,ir){if(ir)for(var Tr in ir)sn[Tr]=ir[Tr]}function xl(sn,ir,Tr,Ai,Wr){var Ii="NONE",Vr=null;sn.response&&(Ii=Wr.getErrorResponse(sn.response,Tr,Ai),Vr={serverResponse:sn.response||null,responseCode:sn.status||null,responseText:sn.statusText||null}),Ri(ir,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Tr+' update, XHR complete. status is "'+sn.statusText+'" ('+sn.status+"), readyState is "+sn.readyState+".  Response is "+Ii,Vr))}function Gu(sn,ir){return sn?sn.reduce(function(Tr,Ai){return Tr.then(function(){return Ai(ir)})},Promise.resolve()):Promise.resolve()}function Hu(sn,ir){if(!on.get().streaming.protection.ignoreEmeEncryptedEvent){if(pn.debug("DRM: onNeedKey"),sn.key.initDataType!=="cenc")return void pn.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+sn.key.initDataType);if($t.length===0&&(pn.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(ir=ir===void 0?1:ir+1)<5))return void dn.push(setTimeout(function(){Hu(sn,ir)},500));var Tr=sn.key.initData;if(ArrayBuffer.isView(Tr)&&(Tr=Tr.buffer),Mn){var Ai=E.getPSSHForKeySystem(Mn,Tr);if(Ai&&vi(Ai))return}pn.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(Tr)));var Wr=fn.getSupportedKeySystemsFromSegmentPssh(Tr,Pt,Kt);if(Wr.length===0)return void pn.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Ii){wt.push(Ii),xr(Ii,!1)})(Wr)}}return gn={initializeForMedia:function(sn){if(!sn)throw new Error("mediaInfo can not be null or undefined");ur(),$t.push(sn)},clearMediaInfoArray:function(){$t=[]},handleKeySystemFromManifest:function(){if($t&&$t.length!==0){var sn=[];$t.forEach(function(ir){var Tr=fn.getSupportedKeySystemsFromContentProtection(ir.contentProtection,Pt,Kt);Tr.length>0&&(sn.length===0&&(sn=Tr),wt.push(Tr))}),sn&&sn.length>0&&xr(sn,!0)}},createKeySession:ni,loadKeySession:Ui,removeKeySession:function(sn){ur(),Ye.removeKeySession(sn)},closeKeySession:function(sn){ur(),Ye.closeKeySession(sn)},setServerCertificate:function(sn){ur(),Ye.setServerCertificate(sn)},setMediaElement:ri,setSessionType:function(sn){Kt=sn},setRobustnessLevel:function(sn){wn=sn},setProtectionData:function(sn){Pt=sn,fn.setProtectionData(sn)},getSupportedKeySystemsFromContentProtection:function(sn){return ur(),fn.getSupportedKeySystemsFromContentProtection(sn,Pt,Kt)},getKeySystems:function(){return fn?fn.getKeySystems():[]},setKeySystems:function(sn){fn&&fn.setKeySystems(sn)},stop:function(){yu(),Ye&&Ye.stop()},reset:function(){Un.off(fr.INTERNAL_KEY_MESSAGE,Yo,gn),Un.off(fr.INTERNAL_KEY_STATUS_CHANGED,Ao,gn),ur(),yu(),ri(null),Mn=null,zn=!1,Ye&&(Ye.reset(),Ye=null),dn.forEach(function(sn){return clearTimeout(sn)}),dn=[],$t=[],wt=[]}},pn=Ir.getLogger(gn),wt=[],$t=[],Kt="temporary",wn="",Kn=null,Ln=null,Un.on(fr.INTERNAL_KEY_MESSAGE,Yo,gn),Un.on(fr.INTERNAL_KEY_STATUS_CHANGED,Ao,gn),gn}X.__dashjs_factory_name="ProtectionController";var ce=se.Z.getClassFactory(X),oe=function ln(gn,pn){(function(wt,$t){if(!(wt instanceof $t))throw new TypeError("Cannot call a class as a function")})(this,ln),this.keyID=gn,this.key=pn};function ye(ln,gn){for(var pn=0;pn<gn.length;pn++){var wt=gn[pn];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(ln,wt.key,wt)}}var be=function(){function ln(wt,$t){if(function(Pt,Kt){if(!(Pt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,ln),$t&&$t!=="persistent"&&$t!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=wt,this.type=$t}var gn,pn;return gn=ln,(pn=[{key:"toJWK",value:function(){var wt,$t=this.keyPairs.length,Pt={keys:[]};for(wt=0;wt<$t;wt++){var Kt={kty:"oct",alg:"A128KW",kid:this.keyPairs[wt].keyID,k:this.keyPairs[wt].key};Pt.keys.push(Kt)}this.type&&(Pt.type=this.type);var wn=JSON.stringify(Pt),Mn=wn.length,zn=new ArrayBuffer(Mn),Kn=new Uint8Array(zn);for(wt=0;wt<Mn;wt++)Kn[wt]=wn.charCodeAt(wt);return zn}}])&&ye(gn.prototype,pn),ln}();function Xe(ln,gn){for(var pn=0;pn<gn.length;pn++){var wt=gn[pn];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(ln,wt.key,wt)}}var Ie=new(function(){function ln(){(function(wt,$t){if(!(wt instanceof $t))throw new TypeError("Cannot call a class as a function")})(this,ln),this.init()}var gn,pn;return gn=ln,(pn=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Xe(gn.prototype,pn),ln}()),Ge="e2719d58-a985-b3c9-781a-b030af78d30e",at=Ie.CLEARKEY_KEYSTEM_STRING,ft="urn:uuid:"+Ge;function We(ln){var gn=(ln=ln||{}).BASE64;return{uuid:Ge,schemeIdURI:ft,systemString:at,getInitData:function(pn,wt){try{var $t=E.parseInitDataFromContentProtection(pn,gn);if(!$t&&wt){var Pt={kids:[function(Kt){try{var wn=Kt.replace(/-/g,"");return(wn=btoa(wn.match(/\w{2}/g).map(function(Mn){return String.fromCharCode(parseInt(Mn,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(Mn){return null}}(wt["cenc:default_KID"])]};$t=new TextEncoder().encode(JSON.stringify(Pt))}return $t}catch(Kt){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(pn){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(pn))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(pn,wt){var $t=null;if(pn){for(var Pt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(wt))),Kt=[],wn=0;wn<Pt.kids.length;wn++){var Mn=Pt.kids[wn],zn=pn.clearkeys&&pn.clearkeys.hasOwnProperty(Mn)?pn.clearkeys[Mn]:null;if(!zn)throw new Error("DRM: ClearKey keyID ("+Mn+") is not known!");Kt.push(new oe(Mn,zn))}$t=new be(Kt)}return $t}}}We.__dashjs_factory_name="KeySystemClearKey";var ut=dashjs.FactoryMaker.getSingletonFactory(We),At="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Ne=Ie.CLEARKEY_KEYSTEM_STRING,et="urn:uuid:"+At;function dt(ln){var gn,pn=ln.BASE64,wt=ln.debug.getLogger(gn);return{uuid:At,schemeIdURI:et,systemString:Ne,getInitData:function($t){return E.parseInitDataFromContentProtection($t,pn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function($t){return new Uint8Array($t)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function($t,Pt){var Kt=null;if($t){for(var wn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Pt))),Mn=[],zn=0;zn<wn.kids.length;zn++){var Kn=wn.kids[zn],Ln=$t.clearkeys&&$t.clearkeys.hasOwnProperty(Kn)?$t.clearkeys[Kn]:null;if(!Ln)throw new Error("DRM: ClearKey keyID ("+Kn+") is not known!");Mn.push(new oe(Kn,Ln))}Kt=new be(Mn),wt.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return Kt}}}dt.__dashjs_factory_name="KeySystemW3CClearKey";var rn=dashjs.FactoryMaker.getSingletonFactory(dt),Yt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",St=Ie.WIDEVINE_KEYSTEM_STRING,kt="urn:uuid:"+Yt;function Re(ln){var gn=(ln=ln||{}).BASE64;return{uuid:Yt,schemeIdURI:kt,systemString:St,getInitData:function(pn){return E.parseInitDataFromContentProtection(pn,gn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(pn){return new Uint8Array(pn)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Re.__dashjs_factory_name="KeySystemWidevine";var ne=dashjs.FactoryMaker.getSingletonFactory(Re),Ue="9a04f079-9840-4286-ab92-e65be0885f95",L=Ie.PLAYREADY_KEYSTEM_STRING,D="urn:uuid:"+Ue;function G(ln){var gn="utf-16",pn=(ln=ln||{}).BASE64,wt=ln.settings;function $t(){if(!pn||!pn.hasOwnProperty("decodeArray")||!pn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Ue,schemeIdURI:D,systemString:L,getInitData:function(Pt){var Kt,wn,Mn,zn,Kn,Ln=new Uint8Array([112,115,115,104,0,0,0,0]),fn=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),Ye=0,Un=null;if($t(),!Pt)return null;if("pssh"in Pt)return E.parseInitDataFromContentProtection(Pt,pn);if("pro"in Pt)Un=pn.decodeArray(Pt.pro.__text);else{if(!("prheader"in Pt))return null;Un=pn.decodeArray(Pt.prheader.__text)}return Kt=Un.length,wn=4+Ln.length+fn.length+4+Kt,Mn=new ArrayBuffer(wn),zn=new Uint8Array(Mn),(Kn=new DataView(Mn)).setUint32(Ye,wn),Ye+=4,zn.set(Ln,Ye),Ye+=Ln.length,zn.set(fn,Ye),Ye+=fn.length,Kn.setUint32(Ye,Kt),Ye+=4,zn.set(Un,Ye),Ye+=Kt,zn.buffer},getRequestHeadersFromMessage:function(Pt){var Kt,wn,Mn={},zn=new DOMParser;if(wt&&wt.get().streaming.protection.detectPlayreadyMessageFormat&&gn==="utf-16"&&Pt&&Pt.byteLength%2==1)return Mn["Content-Type"]="text/xml; charset=utf-8",Mn;var Kn=gn==="utf-16"?new Uint16Array(Pt):new Uint8Array(Pt);Kt=String.fromCharCode.apply(null,Kn);for(var Ln=(wn=zn.parseFromString(Kt,"application/xml")).getElementsByTagName("name"),fn=wn.getElementsByTagName("value"),Ye=0;Ye<Ln.length;Ye++)Mn[Ln[Ye].childNodes[0].nodeValue]=fn[Ye].childNodes[0].nodeValue;return Mn.hasOwnProperty("Content")&&(Mn["Content-Type"]=Mn.Content,delete Mn.Content),Mn.hasOwnProperty("Content-Type")||(Mn["Content-Type"]="text/xml; charset=utf-8"),Mn},getLicenseRequestFromMessage:function(Pt){var Kt=null,wn=new DOMParser;if(wt&&wt.get().streaming.protection.detectPlayreadyMessageFormat&&gn==="utf-16"&&Pt&&Pt.byteLength%2==1)return Pt;var Mn=gn==="utf-16"?new Uint16Array(Pt):new Uint8Array(Pt);$t();var zn=String.fromCharCode.apply(null,Mn),Kn=wn.parseFromString(zn,"application/xml");if(!Kn.getElementsByTagName("PlayReadyKeyMessage")[0])return Pt;var Ln=Kn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Ln&&(Kt=pn.decode(Ln)),Kt},getLicenseServerURLFromInitData:function(Pt){if(Pt)for(var Kt=new DataView(Pt),wn=Kt.getUint16(4,!0),Mn=6,zn=new DOMParser,Kn=0;Kn<wn;Kn++){var Ln=Kt.getUint16(Mn,!0);Mn+=2;var fn=Kt.getUint16(Mn,!0);if(Mn+=2,Ln===1){var Ye=Pt.slice(Mn,Mn+fn),Un=String.fromCharCode.apply(null,new Uint16Array(Ye)),fr=zn.parseFromString(Un,"application/xml");if(fr.getElementsByTagName("LA_URL")[0]){var Ir=fr.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Ir)return Ir}if(fr.getElementsByTagName("LUI_URL")[0]){var Hr=fr.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Hr)return Hr}}else Mn+=fn}return null},getCDMData:function(Pt){var Kt,wn,Mn,zn;if($t(),!Pt)return null;for(Kt=[],zn=0;zn<Pt.length;++zn)Kt.push(Pt.charCodeAt(zn)),Kt.push(0);for(Kt=String.fromCharCode.apply(null,Kt),Kt=pn.encode(Kt),wn='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",Kt),Mn=[],zn=0;zn<wn.length;++zn)Mn.push(wn.charCodeAt(zn)),Mn.push(0);return new Uint8Array(Mn).buffer},setPlayReadyMessageFormat:function(Pt){if(Pt!=="utf-8"&&Pt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');gn=Pt}}}G.__dashjs_factory_name="KeySystemPlayReady";var K=dashjs.FactoryMaker.getSingletonFactory(G);function ge(ln){var gn=(ln=ln||{}).BASE64,pn={};return pn[Ie.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(wt){return gn.decodeArray(wt.license)},getErrorResponse:function(wt){return wt}},pn[Ie.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(wt){return wt},getErrorResponse:function(wt){return String.fromCharCode.apply(null,new Uint8Array(wt))}},{getServerURLFromMessage:function(wt){return wt},getHTTPMethod:function(){return"POST"},getResponseType:function(wt){return pn[wt].responseType},getLicenseMessage:function(wt,$t){return function(){if(!gn||!gn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),pn[$t].getLicenseMessage(wt)},getErrorResponse:function(wt,$t){return pn[$t].getErrorResponse(wt)}}}ge.__dashjs_factory_name="DRMToday";var de=dashjs.FactoryMaker.getSingletonFactory(ge);function He(){var ln="http://schemas.xmlsoap.org/soap/envelope/";function gn($t){var Pt=String.fromCharCode.apply(null,new Uint8Array($t));return decodeURIComponent(escape(Pt))}function pn($t){if(window.DOMParser){var Pt=gn($t),Kt=new window.DOMParser().parseFromString(Pt,"text/xml"),wn=Kt?Kt.getElementsByTagNameNS(ln,"Envelope")[0]:null,Mn=wn?wn.getElementsByTagNameNS(ln,"Body")[0]:null;if(Mn&&Mn.getElementsByTagNameNS(ln,"Fault")[0])return null}return $t}function wt($t){var Pt="",Kt="",wn="",Mn=-1,zn=-1;if(window.DOMParser){var Kn=gn($t),Ln=new window.DOMParser().parseFromString(Kn,"text/xml"),fn=Ln?Ln.getElementsByTagNameNS(ln,"Envelope")[0]:null,Ye=fn?fn.getElementsByTagNameNS(ln,"Body")[0]:null,Un=Ye?Ye.getElementsByTagNameNS(ln,"Fault")[0]:null,fr=Un?Un.getElementsByTagName("detail")[0]:null,Ir=fr?fr.getElementsByTagName("Exception")[0]:null,Hr=null;if(Un===null)return Kn;Pt=(Hr=Un.getElementsByTagName("faultstring")[0].firstChild)?Hr.nodeValue:null,Ir!==null&&(Kt=(Hr=Ir.getElementsByTagName("StatusCode")[0])?Hr.firstChild.nodeValue:null,Mn=(wn=(Hr=Ir.getElementsByTagName("Message")[0])?Hr.firstChild.nodeValue:null)?wn.lastIndexOf("[")+1:-1,zn=wn?wn.indexOf("]"):-1,wn=wn?wn.substring(Mn,zn):"")}var er="code: ".concat(Kt,", name: ").concat(Pt);return wn&&(er+=", message: ".concat(wn)),er}return{getServerURLFromMessage:function($t){return $t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function($t){return pn.call(this,$t)},getErrorResponse:function($t){return wt.call(this,$t)}}}He.__dashjs_factory_name="PlayReady";var Tt=se.Z.getSingletonFactory(He);function st(){return{getServerURLFromMessage:function(ln){return ln},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(ln){return ln},getErrorResponse:function(ln){return String.fromCharCode.apply(null,new Uint8Array(ln))}}}st.__dashjs_factory_name="Widevine";var ot=dashjs.FactoryMaker.getSingletonFactory(st);function tt(){return{getServerURLFromMessage:function(ln){return ln},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(ln){if(!ln.hasOwnProperty("keys"))return null;for(var gn=[],pn=0;pn<ln.keys.length;pn++){var wt=ln.keys[pn],$t=wt.kid.replace(/=/g,""),Pt=wt.k.replace(/=/g,"");gn.push(new oe($t,Pt))}return new be(gn)},getErrorResponse:function(ln){return String.fromCharCode.apply(null,new Uint8Array(ln))}}}tt.__dashjs_factory_name="ClearKey";var ht=dashjs.FactoryMaker.getSingletonFactory(tt);function yt(){var ln,gn,pn,wt,$t,Pt,Kt,wn,Mn=this.context;function zn(fn,Ye){return Ye&&fn in Ye?Ye[fn]:null}function Kn(fn,Ye){return fn&&fn.sessionId?fn.sessionId:Ye&&Ye.sessionId?Ye.sessionId:null}function Ln(fn,Ye){return fn&&fn.sessionType?fn.sessionType:Ye}return ln={initialize:function(){var fn;wt=[],fn=K(Mn).getInstance({BASE64:$t,settings:Pt}),wt.push(fn),fn=ne(Mn).getInstance({BASE64:$t}),wt.push(fn),fn=ut(Mn).getInstance({BASE64:$t}),wt.push(fn),Kt=fn,fn=rn(Mn).getInstance({BASE64:$t,debug:gn}),wt.push(fn),wn=fn},setProtectionData:function(fn){for(var Ye,Un,fr=0;fr<wt.length;fr++){var Ir=wt[fr];Ir.hasOwnProperty("init")&&Ir.init((Ye=Ir.systemString,Un=void 0,Un=null,fn&&(Un=Ye in fn?fn[Ye]:null),Un))}},isClearKey:function(fn){return fn===Kt||fn===wn},initDataEquals:function(fn,Ye){if(fn.byteLength===Ye.byteLength){for(var Un=new Uint8Array(fn),fr=new Uint8Array(Ye),Ir=0;Ir<Un.length;Ir++)if(Un[Ir]!==fr[Ir])return!1;return!0}return!1},getKeySystems:function(){return wt},setKeySystems:function(fn){wt=fn},getKeySystemBySystemString:function(fn){for(var Ye=0;Ye<wt.length;Ye++)if(wt[Ye].systemString===fn)return wt[Ye];return null},getSupportedKeySystemsFromContentProtection:function(fn,Ye,Un){var fr,Ir,Hr,er,dn=[];if(fn){var vn=E.findCencContentProtection(fn);for(Hr=0;Hr<wt.length;++Hr){var on=zn((Ir=wt[Hr]).systemString,Ye);for(er=0;er<fn.length;++er)if((fr=fn[er]).schemeIdUri.toLowerCase()===Ir.schemeIdURI){var tr=Ir.getInitData(fr,vn);dn.push({ks:wt[Hr],keyId:fr.keyId,initData:tr,protData:on,cdmData:Ir.getCDMData(on?on.cdmData:null),sessionId:Kn(on,fr),sessionType:Ln(on,Un)})}}}return dn},getSupportedKeySystemsFromSegmentPssh:function(fn,Ye,Un){for(var fr,Ir=[],Hr=E.parsePSSHList(fn),er=0;er<wt.length;++er){var dn=zn((fr=wt[er]).systemString,Ye);fr.uuid in Hr&&Ir.push({ks:fr,initData:Hr[fr.uuid],protData:dn,cdmData:fr.getCDMData(dn?dn.cdmData:null),sessionId:Kn(dn),sessionType:Ln(dn,Un)})}return Ir},getLicenseServerModelInstance:function(fn,Ye,Un){if(Un==="license-release"||Un==="individualization-request")return null;var fr=null;return Ye&&Ye.hasOwnProperty("drmtoday")?fr=de(Mn).getInstance({BASE64:$t}):fn.systemString===Ie.WIDEVINE_KEYSTEM_STRING?fr=ot(Mn).getInstance():fn.systemString===Ie.PLAYREADY_KEYSTEM_STRING?fr=Tt(Mn).getInstance():fn.systemString===Ie.CLEARKEY_KEYSTEM_STRING&&(fr=ht(Mn).getInstance()),fr},processClearKeyLicenseRequest:function(fn,Ye,Un){try{return fn.getClearKeysFromProtectionData(Ye,Un)}catch(fr){return pn.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(fn){fn&&(fn.debug&&(gn=fn.debug,pn=gn.getLogger(ln)),fn.BASE64&&($t=fn.BASE64),fn.settings&&(Pt=fn.settings))}},ln}yt.__dashjs_factory_name="ProtectionKeyController";var Et=dashjs.FactoryMaker.getSingletonFactory(yt);function Mt(ln){return Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gn){return typeof gn}:function(gn){return gn&&typeof Symbol=="function"&&gn.constructor===Symbol&&gn!==Symbol.prototype?"symbol":typeof gn},Mt(ln)}function _n(ln,gn){return _n=Object.setPrototypeOf||function(pn,wt){return pn.__proto__=wt,pn},_n(ln,gn)}function nn(ln,gn){return!gn||Mt(gn)!=="object"&&typeof gn!="function"?function(pn){if(pn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pn}(ln):gn}function cn(ln){return cn=Object.setPrototypeOf?Object.getPrototypeOf:function(gn){return gn.__proto__||Object.getPrototypeOf(gn)},cn(ln)}var Ft=new(function(ln){(function(Pt,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function");Pt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:Pt,writable:!0,configurable:!0}}),Kt&&_n(Pt,Kt)})($t,ln);var gn,pn,wt=(gn=$t,pn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Pt){return!1}}(),function(){var Pt,Kt=cn(gn);if(pn){var wn=cn(this).constructor;Pt=Reflect.construct(Kt,arguments,wn)}else Pt=Kt.apply(this,arguments);return nn(this,Pt)});function $t(){var Pt;return function(Kt,wn){if(!(Kt instanceof wn))throw new TypeError("Cannot call a class as a function")}(this,$t),(Pt=wt.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",Pt.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",Pt.KEY_ADDED="public_keyAdded",Pt.KEY_ERROR="public_keyError",Pt.KEY_MESSAGE="public_keyMessage",Pt.KEY_SESSION_CLOSED="public_keySessionClosed",Pt.KEY_SESSION_CREATED="public_keySessionCreated",Pt.KEY_SESSION_REMOVED="public_keySessionRemoved",Pt.KEY_STATUSES_CHANGED="public_keyStatusesChanged",Pt.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",Pt.KEY_SYSTEM_SELECTED="public_keySystemSelected",Pt.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",Pt.LICENSE_REQUEST_SENDING="public_licenseRequestSending",Pt.NEED_KEY="needkey",Pt.PROTECTION_CREATED="public_protectioncreated",Pt.PROTECTION_DESTROYED="public_protectiondestroyed",Pt.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",Pt.TEARDOWN_COMPLETE="protectionTeardownComplete",Pt.VIDEO_ELEMENT_SELECTED="videoElementSelected",Pt.KEY_SESSION_UPDATED="public_keySessionUpdated",Pt}return $t}(w(8342).Z)),Gn=function ln(gn,pn){(function(wt,$t){if(!(wt instanceof $t))throw new TypeError("Cannot call a class as a function")})(this,ln),this.initData=gn,this.initDataType=pn},Sr=function ln(gn,pn,wt,$t){(function(Pt,Kt){if(!(Pt instanceof Kt))throw new TypeError("Cannot call a class as a function")})(this,ln),this.sessionToken=gn,this.message=pn,this.defaultURL=wt,this.messageType=$t||"license-request"},qr=function ln(gn,pn){(function(wt,$t){if(!(wt instanceof $t))throw new TypeError("Cannot call a class as a function")})(this,ln),this.keySystem=gn,this.ksConfiguration=pn},gr={};function fi(ln){ln=ln||{};var gn,pn,wt,$t,Pt,Kt,wn,Mn,zn=this.context,Kn=ln.eventBus,Ln=ln.events,fn=ln.debug;function Ye(dn,vn,on,tr){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var ur="Insecure origins are not allowed";return Kn.trigger(Ln.KEY_SYSTEM_ACCESS_COMPLETE,{error:ur}),void tr({error:ur})}var xr=dn[vn].protData&&dn[vn].protData.systemStringPriority?dn[vn].protData.systemStringPriority:null,Rr=dn[vn].configs,di=dn[vn].ks,Ui=di.systemString;(function(ni,li){return new Promise(function(vi,ri){Un(ni,li,0,vi,ri)})})(xr||(gr[Ui]?gr[Ui]:[Ui]),Rr).then(function(ni){var li=typeof ni.getConfiguration=="function"?ni.getConfiguration():null,vi=new qr(di,li);vi.mksa=ni,Kn.trigger(Ln.KEY_SYSTEM_ACCESS_COMPLETE,{data:vi}),on({data:vi})}).catch(function(ni){if(vn+1<dn.length)Ye(dn,vn+1,on,tr);else{var li="Key system access denied! ";Kn.trigger(Ln.KEY_SYSTEM_ACCESS_COMPLETE,{error:li+ni.message}),tr({error:li+ni.message})}})}function Un(dn,vn,on,tr,ur){var xr=dn[on];pn.debug("Requesting key system access for system string ".concat(xr)),navigator.requestMediaKeySystemAccess(xr,vn).then(function(Rr){Rr.selectedSystemString=xr,tr(Rr)}).catch(function(Rr){on+1<dn.length?Un(dn,vn,on+1,tr,ur):ur(Rr)})}function fr(dn){if(!dn||!dn.session)return Promise.resolve;var vn=dn.session;return vn.removeEventListener("keystatuseschange",dn),vn.removeEventListener("message",dn),vn.close()}function Ir(dn){for(var vn=0;vn<Kt.length;vn++)if(Kt[vn]===dn){Kt.splice(vn,1);break}}function Hr(dn){var vn,on;return dn&&dn.length>0&&(dn[0]&&(typeof dn[0]=="string"?vn=dn[0]:on=dn[0]),dn[1]&&(typeof dn[1]=="string"?vn=dn[1]:on=dn[1])),{status:vn,keyId:on}}function er(dn,vn){var on={session:dn,keyId:vn.keyId,initData:vn.initData,sessionId:vn.sessionId,sessionType:vn.sessionType,handleEvent:function(tr){switch(tr.type){case"keystatuseschange":Kn.trigger(Ln.KEY_STATUSES_CHANGED,{data:this}),tr.target.keyStatuses.forEach(function(){var xr=Hr(arguments);xr.status==="expired"?Kn.trigger(Ln.INTERNAL_KEY_STATUS_CHANGED,{error:new I.Z(_.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):Kn.trigger(Ln.INTERNAL_KEY_STATUS_CHANGED,xr)});break;case"message":var ur=ArrayBuffer.isView(tr.message)?tr.message.buffer:tr.message;Kn.trigger(Ln.INTERNAL_KEY_MESSAGE,{data:new Sr(this,ur,void 0,tr.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return dn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return dn.expiration},getKeyStatuses:function(){return dn.keyStatuses},getUsable:function(){var tr=!1;return dn.keyStatuses.forEach(function(){var ur=Hr(arguments);ur.status==="usable"&&(tr=!0)}),tr}};return dn.addEventListener("keystatuseschange",on),dn.addEventListener("message",on),dn.closed.then(function(){Ir(on),pn.debug("DRM: Session closed.  SessionID = "+on.getSessionId()),Kn.trigger(Ln.KEY_SESSION_CLOSED,{data:on.getSessionId()})}),Kt.push(on),on}return gn={getAllInitData:function(){for(var dn=[],vn=0;vn<Kt.length;vn++)Kt[vn].initData&&dn.push(Kt[vn].initData);return dn},getSessions:function(){return Kt},requestKeySystemAccess:function(dn){return new Promise(function(vn,on){Ye(dn,0,vn,on)})},selectKeySystem:function(dn){return new Promise(function(vn,on){dn.mksa.createMediaKeys().then(function(tr){return wt=dn.keySystem,Pt=tr,$t?$t.setMediaKeys(Pt):Promise.resolve()}).then(function(){vn(wt)}).catch(function(){on({error:"Error selecting keys system ("+dn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(dn){$t!==dn&&($t&&($t.removeEventListener("encrypted",wn),$t.setMediaKeys&&$t.setMediaKeys(null)),($t=dn)&&($t.addEventListener("encrypted",wn),$t.setMediaKeys&&Pt&&$t.setMediaKeys(Pt)))},setServerCertificate:function(dn){if(!wt||!Pt)throw new Error("Can not set server certificate until you have selected a key system");Pt.setServerCertificate(dn).then(function(){pn.info("DRM: License server certificate successfully updated."),Kn.trigger(Ln.SERVER_CERTIFICATE_UPDATED)}).catch(function(vn){Kn.trigger(Ln.SERVER_CERTIFICATE_UPDATED,{error:new I.Z(_.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+vn.name)})})},createKeySession:function(dn){if(!wt||!Pt)throw new Error("Can not create sessions until you have selected a key system");var vn=Pt.createSession(dn.sessionType),on=er(vn,dn),tr=wt.systemString===Ie.CLEARKEY_KEYSTEM_STRING&&(dn.initData||dn.protData&&dn.protData.clearkeys)?Ie.INITIALIZATION_DATA_TYPE_KEYIDS:Ie.INITIALIZATION_DATA_TYPE_CENC;vn.generateRequest(tr,dn.initData).then(function(){pn.debug("DRM: Session created.  SessionID = "+on.getSessionId()),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:on})}).catch(function(ur){Ir(on),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+ur.name)})})},updateKeySession:function(dn,vn){var on=dn.session;Mn.isClearKey(wt)&&(vn=vn.toJWK()),on.update(vn).then(function(){Kn.trigger(Ln.KEY_SESSION_UPDATED)}).catch(function(tr){Kn.trigger(Ln.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"Error sending update() message! "+tr.name,dn)})})},loadKeySession:function(dn){if(!wt||!Pt)throw new Error("Can not load sessions until you have selected a key system");for(var vn=dn.sessionId,on=0;on<Kt.length;on++)if(vn===Kt[on].sessionId)return void pn.warn("DRM: Ignoring session ID because we have already seen it!");var tr=Pt.createSession(dn.sessionType),ur=er(tr,dn);tr.load(vn).then(function(xr){xr?(pn.debug("DRM: Session loaded.  SessionID = "+ur.getSessionId()),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:ur})):(Ir(ur),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+vn+")")}))}).catch(function(xr){Ir(ur),Kn.trigger(Ln.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+vn+")! "+xr.name)})})},removeKeySession:function(dn){dn.session.remove().then(function(){pn.debug("DRM: Session removed.  SessionID = "+dn.getSessionId()),Kn.trigger(Ln.KEY_SESSION_REMOVED,{data:dn.getSessionId()})},function(vn){Kn.trigger(Ln.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+dn.getSessionId()+"). "+vn.name})})},closeKeySession:function(dn){fr(dn).catch(function(vn){Ir(dn),Kn.trigger(Ln.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+dn.getSessionId()+") "+vn.name})})},stop:function(){for(var dn,vn=0;vn<Kt.length;vn++)(dn=Kt[vn]).getUsable()||(fr(dn),Ir(dn))},reset:function(){var dn,vn=Kt.length;vn!==0?function(){for(var on=function(ur){Ir(ur),Kt.length===0&&($t?($t.removeEventListener("encrypted",wn),$t.setMediaKeys(null).then(function(){Kn.trigger(Ln.TEARDOWN_COMPLETE)})):Kn.trigger(Ln.TEARDOWN_COMPLETE))},tr=0;tr<vn;tr++)(function(ur){fr(dn),on(ur)})(dn=Kt[tr])}():Kn.trigger(Ln.TEARDOWN_COMPLETE)}},pn=fn.getLogger(gn),wt=null,$t=null,Pt=null,Kt=[],Mn=Et(zn).getInstance(),wn={handleEvent:function(dn){if(dn.type==="encrypted"&&dn.initData){var vn=ArrayBuffer.isView(dn.initData)?dn.initData.buffer:dn.initData;Kn.trigger(Ln.NEED_KEY,{key:new Gn(vn,dn.initDataType)})}}},gn}gr[Ie.PLAYREADY_KEYSTEM_STRING]=[Ie.PLAYREADY_KEYSTEM_STRING,Ie.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],gr[Ie.WIDEVINE_KEYSTEM_STRING]=[Ie.WIDEVINE_KEYSTEM_STRING],gr[Ie.CLEARKEY_KEYSTEM_STRING]=[Ie.CLEARKEY_KEYSTEM_STRING],fi.__dashjs_factory_name="ProtectionModel_21Jan2015";var ao=dashjs.FactoryMaker.getClassFactory(fi);function Gr(ln){ln=ln||{};var gn,pn,wt,$t,Pt,Kt,wn,Mn,zn,Kn=this.context,Ln=ln.eventBus,fn=ln.events,Ye=ln.debug,Un=ln.api;function fr(){try{for(var er=0;er<wn.length;er++)Ir(wn[er]);wt&&wt.removeEventListener(Un.needkey,Mn),Ln.trigger(fn.TEARDOWN_COMPLETE)}catch(dn){Ln.trigger(fn.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+dn.message})}}function Ir(er){var dn=er.session;dn.removeEventListener(Un.error,er),dn.removeEventListener(Un.message,er),dn.removeEventListener(Un.ready,er),dn.removeEventListener(Un.close,er);for(var vn=0;vn<wn.length;vn++)if(wn[vn]===er){wn.splice(vn,1);break}dn[Un.release]()}function Hr(){var er=null,dn=function(){wt.removeEventListener("loadedmetadata",er),wt[Un.setMediaKeys](Pt),Ln.trigger(fn.VIDEO_ELEMENT_SELECTED)};wt.readyState>=1?dn():(er=dn.bind(this),wt.addEventListener("loadedmetadata",er))}return gn={getAllInitData:function(){for(var er=[],dn=0;dn<wn.length;dn++)er.push(wn[dn].initData);return er},getSessions:function(){return wn},requestKeySystemAccess:function(er){return new Promise(function(dn,vn){for(var on=!1,tr=0;tr<er.length;tr++)for(var ur=er[tr].ks.systemString,xr=er[tr].configs,Rr=null,di=null,Ui=0;Ui<xr.length;Ui++){var ni=xr[Ui].audioCapabilities,li=xr[Ui].videoCapabilities;if(ni&&ni.length!==0){Rr=[];for(var vi=0;vi<ni.length;vi++)window[Un.MediaKeys].isTypeSupported(ur,ni[vi].contentType)&&Rr.push(ni[vi])}if(li&&li.length!==0){di=[];for(var ri=0;ri<li.length;ri++)window[Un.MediaKeys].isTypeSupported(ur,li[ri].contentType)&&di.push(li[ri])}if(!(!Rr&&!di||Rr&&Rr.length===0||di&&di.length===0)){on=!0;var ys=new P(Rr,di),Ao=zn.getKeySystemBySystemString(ur),Yo=new qr(Ao,ys);Ln.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{data:Yo}),dn({data:Yo});break}}if(!on){var Ri="Key system access denied! -- No valid audio/video content configurations detected!";Ln.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ri}),vn({error:Ri})}})},selectKeySystem:function(er){return new Promise(function(dn,vn){try{Pt=er.mediaKeys=new window[Un.MediaKeys](er.keySystem.systemString),$t=er.keySystem,Kt=er,wt&&Hr(),dn($t)}catch(on){vn({error:"Error selecting keys system ("+$t.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(er){wt!==er&&(wt&&wt.removeEventListener(Un.needkey,Mn),(wt=er)&&(wt.addEventListener(Un.needkey,Mn),Pt&&Hr()))},createKeySession:function(er){if(!$t||!Pt||!Kt)throw new Error("Can not create sessions until you have selected a key system");var dn=null;if(Kt.ksConfiguration.videoCapabilities&&Kt.ksConfiguration.videoCapabilities.length>0&&(dn=Kt.ksConfiguration.videoCapabilities[0]),dn===null&&Kt.ksConfiguration.audioCapabilities&&Kt.ksConfiguration.audioCapabilities.length>0&&(dn=Kt.ksConfiguration.audioCapabilities[0]),dn===null)throw new Error("Can not create sessions for unknown content types.");var vn=dn.contentType,on=Pt.createSession(vn,new Uint8Array(er.initData),er.cdmData?new Uint8Array(er.cdmData):null),tr=function(ur,xr){return{session:ur,keyId:xr.keyId,initData:xr.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Rr){switch(Rr.type){case Un.error:Ln.trigger(fn.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"KeyError",this)});break;case Un.message:var di=ArrayBuffer.isView(Rr.message)?Rr.message.buffer:Rr.message;Ln.trigger(fn.INTERNAL_KEY_MESSAGE,{data:new Sr(this,di,Rr.destinationURL)});break;case Un.ready:pn.debug("DRM: Key added."),Ln.trigger(fn.KEY_ADDED);break;case Un.close:pn.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Ln.trigger(fn.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(on,er);on.addEventListener(Un.error,tr),on.addEventListener(Un.message,tr),on.addEventListener(Un.ready,tr),on.addEventListener(Un.close,tr),wn.push(tr),pn.debug("DRM: Session created.  SessionID = "+tr.getSessionId()),Ln.trigger(fn.KEY_SESSION_CREATED,{data:tr})},updateKeySession:function(er,dn){var vn=er.session;zn.isClearKey($t)?vn.update(new Uint8Array(dn.toJWK())):vn.update(new Uint8Array(dn)),Ln.trigger(fn.KEY_SESSION_UPDATED)},closeKeySession:Ir,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:fr,reset:fr},pn=Ye.getLogger(gn),wt=null,$t=null,Pt=null,Kt=null,wn=[],zn=Et(Kn).getInstance(),Mn={handleEvent:function(er){if(er.type===Un.needkey&&er.initData){var dn=ArrayBuffer.isView(er.initData)?er.initData.buffer:er.initData;Ln.trigger(fn.NEED_KEY,{key:new Gn(dn,"cenc")})}}},gn}Gr.__dashjs_factory_name="ProtectionModel_3Feb2014";var so=dashjs.FactoryMaker.getClassFactory(Gr);function xi(ln){ln=ln||{};var gn,pn,wt,$t,Pt,Kt,wn,Mn,zn,Kn=this.context,Ln=ln.eventBus,fn=ln.events,Ye=ln.debug,Un=ln.api,fr=ln.errHandler;function Ir(){wt&&dn();for(var vn=0;vn<wn.length;vn++)Hr(wn[vn]);Ln.trigger(fn.TEARDOWN_COMPLETE)}function Hr(vn){try{wt[Un.cancelKeyRequest]($t.systemString,vn.sessionId)}catch(on){Ln.trigger(fn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+vn.sessionId+") "+on.message})}}function er(vn,on){if(on&&vn){for(var tr=vn.length,ur=0;ur<tr;ur++)if(vn[ur].sessionId==on)return vn[ur];return null}return null}function dn(){wt.removeEventListener(Un.keyerror,zn),wt.removeEventListener(Un.needkey,zn),wt.removeEventListener(Un.keymessage,zn),wt.removeEventListener(Un.keyadded,zn)}return gn={getAllInitData:function(){for(var vn=[],on=0;on<Kt.length;on++)vn.push(Kt[on].initData);for(var tr=0;tr<wn.length;tr++)vn.push(wn[tr].initData);return vn},getSessions:function(){return wn.concat(Kt)},requestKeySystemAccess:function(vn){return new Promise(function(on,tr){var ur=wt;ur||(ur=document.createElement("video"));for(var xr=!1,Rr=0;Rr<vn.length;Rr++)for(var di=vn[Rr].ks.systemString,Ui=vn[Rr].configs,ni=null,li=0;li<Ui.length;li++){var vi=Ui[li].videoCapabilities;if(vi&&vi.length!==0){ni=[];for(var ri=0;ri<vi.length;ri++)ur.canPlayType(vi[ri].contentType,di)!==""&&ni.push(vi[ri])}if(ni&&(!ni||ni.length!==0)){xr=!0;var ys=new P(null,ni),Ao=Pt.getKeySystemBySystemString(di),Yo=new qr(Ao,ys);Ln.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{data:Yo}),on({data:Yo});break}}if(!xr){var Ri="Key system access denied! -- No valid audio/video content configurations detected!";Ln.trigger(fn.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ri}),tr({error:Ri})}})},selectKeySystem:function(vn){return $t=vn.keySystem,Promise.resolve($t)},setMediaElement:function(vn){if(wt!==vn){if(wt){dn();for(var on=0;on<wn.length;on++)Hr(wn[on]);wn=[]}(wt=vn)&&(wt.addEventListener(Un.keyerror,zn),wt.addEventListener(Un.needkey,zn),wt.addEventListener(Un.keymessage,zn),wt.addEventListener(Un.keyadded,zn),Ln.trigger(fn.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(vn){if(!$t)throw new Error("Can not create sessions until you have selected a key system");if(Mn||wn.length===0){var on={sessionId:null,keyId:vn.keyId,initData:vn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return Kt.push(on),wt[Un.generateKeyRequest]($t.systemString,new Uint8Array(vn.initData)),on}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(vn,on){var tr=vn.sessionId;if(Pt.isClearKey($t))for(var ur=0;ur<on.keyPairs.length;ur++)wt[Un.addKey]($t.systemString,on.keyPairs[ur].key,on.keyPairs[ur].keyID,tr);else wt[Un.addKey]($t.systemString,new Uint8Array(on),new Uint8Array(vn.initData),tr);Ln.trigger(fn.KEY_SESSION_UPDATED)},closeKeySession:Hr,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Ir,reset:Ir},pn=Ye.getLogger(gn),wt=null,$t=null,Kt=[],wn=[],Pt=Et(Kn).getInstance(),zn={handleEvent:function(vn){var on=null;switch(vn.type){case Un.needkey:var tr=ArrayBuffer.isView(vn.initData)?vn.initData.buffer:vn.initData;Ln.trigger(fn.NEED_KEY,{key:new Gn(tr,"cenc")});break;case Un.keyerror:if((on=er(wn,vn.sessionId))||(on=er(Kt,vn.sessionId)),on){var ur=_.MEDIA_KEYERR_CODE,xr="";switch(vn.errorCode.code){case 1:ur=_.MEDIA_KEYERR_UNKNOWN_CODE,xr+="MEDIA_KEYERR_UNKNOWN - "+_.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:ur=_.MEDIA_KEYERR_CLIENT_CODE,xr+="MEDIA_KEYERR_CLIENT - "+_.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:ur=_.MEDIA_KEYERR_SERVICE_CODE,xr+="MEDIA_KEYERR_SERVICE - "+_.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:ur=_.MEDIA_KEYERR_OUTPUT_CODE,xr+="MEDIA_KEYERR_OUTPUT - "+_.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:ur=_.MEDIA_KEYERR_HARDWARECHANGE_CODE,xr+="MEDIA_KEYERR_HARDWARECHANGE - "+_.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:ur=_.MEDIA_KEYERR_DOMAIN_CODE,xr+="MEDIA_KEYERR_DOMAIN - "+_.MEDIA_KEYERR_DOMAIN_MESSAGE}xr+="  System Code = "+vn.systemCode,Ln.trigger(fn.KEY_ERROR,{error:new I.Z(ur,xr,on)})}else pn.error("No session token found for key error");break;case Un.keyadded:(on=er(wn,vn.sessionId))||(on=er(Kt,vn.sessionId)),on?(pn.debug("DRM: Key added."),Ln.trigger(fn.KEY_ADDED,{data:on})):pn.debug("No session token found for key added");break;case Un.keymessage:if((Mn=vn.sessionId!==null&&vn.sessionId!==void 0)?!(on=er(wn,vn.sessionId))&&Kt.length>0&&(on=Kt.shift(),wn.push(on),on.sessionId=vn.sessionId,Ln.trigger(fn.KEY_SESSION_CREATED,{data:on})):Kt.length>0&&(on=Kt.shift(),wn.push(on),Kt.length!==0&&fr.error(new I.Z(_.MEDIA_KEY_MESSAGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),on){var Rr=ArrayBuffer.isView(vn.message)?vn.message.buffer:vn.message;on.keyMessage=Rr,Ln.trigger(fn.INTERNAL_KEY_MESSAGE,{data:new Sr(on,Rr,vn.defaultURL)})}else pn.warn("No session token found for key message")}}},gn}xi.__dashjs_factory_name="ProtectionModel_01b";var Fi=dashjs.FactoryMaker.getClassFactory(xi),no=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],uo=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Ni(){var ln,gn=this.context;function pn(wt,$t){for(var Pt=0;Pt<$t.length;Pt++){var Kt=$t[Pt];if(typeof wt[Kt[Object.keys(Kt)[0]]]=="function")return Kt}return null}return ln={createProtectionSystem:function(wt){var $t=null,Pt=Et(gn).getInstance();Pt.setConfig({debug:wt.debug,BASE64:wt.BASE64,settings:wt.settings}),Pt.initialize();var Kt=function(wn){var Mn=wn.debug,zn=Mn.getLogger(ln),Kn=wn.eventBus,Ln=wn.errHandler,fn=wn.videoModel?wn.videoModel.getElement():null;return fn&&fn.onencrypted===void 0||fn&&fn.mediaKeys===void 0?pn(fn,uo)?(zn.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),so(gn).create({debug:Mn,eventBus:Kn,events:wn.events,api:pn(fn,uo)})):pn(fn,no)?(zn.info("EME detected on this user agent! (ProtectionModel_01b)"),Fi(gn).create({debug:Mn,eventBus:Kn,errHandler:Ln,events:wn.events,api:pn(fn,no)})):(zn.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(zn.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),ao(gn).create({debug:Mn,eventBus:Kn,events:wn.events}))}(wt);return!$t&&Kt&&($t=ce(gn).create({protectionModel:Kt,protectionKeyController:Pt,eventBus:wt.eventBus,debug:wt.debug,events:wt.events,BASE64:wt.BASE64,constants:wt.constants,cmcdModel:wt.cmcdModel,customParametersModel:wt.customParametersModel,settings:wt.settings}),wt.capabilities.setEncryptedMediaSupported(!0)),$t}}}Ni.__dashjs_factory_name="Protection";var nr=dashjs.FactoryMaker.getClassFactory(Ni);nr.events=Ft,nr.errors=_,dashjs.FactoryMaker.updateClassFactory(Ni.__dashjs_factory_name,nr);var Zu=nr},2068:function(b,p,w){var k=w(5448),C={DEFAULT:.5,STRONG:1,WEAK:0};function E(P,m,T){var U,M;return U=P===void 0?-1:P,M=function(_){var I=C.DEFAULT;return _!==C.DEFAULT&&_!==C.STRONG&&_!==C.WEAK||(I=_),I}(T),{quality:U,reason:m===void 0?null:m,priority:M}}E.__dashjs_factory_name="SwitchRequest";var y=k.Z.getClassFactory(E);y.NO_CHANGE=-1,y.PRIORITY=C,k.Z.updateClassFactory(E.__dashjs_factory_name,y),p.Z=y},1767:function(b,p,w){var k=w(5628),C=w(6535),E=w(7423),y=w(895),P=w(6070),m=w(3112),T=w(1914),U=w(5435),M=w(5448),_=w(2068),I=w(3393),x="qualitySwitchRules",Z="abandonFragmentRules";function Y(Q){Q=Q||{};var se,R,X=this.context,ce=Q.mediaPlayerModel,oe=Q.customParametersModel,ye=Q.dashMetrics,be=Q.settings;function Xe(Ge){return Ge.filter(function(at){return at.quality>_.Z.NO_CHANGE})}function Ie(Ge){var at,ft,We,ut,At,Ne={},et=null;if(Ge.length!==0){for(Ne[_.Z.PRIORITY.STRONG]={quality:_.Z.NO_CHANGE,reason:null},Ne[_.Z.PRIORITY.WEAK]={quality:_.Z.NO_CHANGE,reason:null},Ne[_.Z.PRIORITY.DEFAULT]={quality:_.Z.NO_CHANGE,reason:null},at=0,ft=Ge.length;at<ft;at+=1)(We=Ge[at]).quality!==_.Z.NO_CHANGE&&(Ne[We.priority].quality===_.Z.NO_CHANGE||Ne[We.priority].quality>We.quality)&&(Ne[We.priority].quality=We.quality,Ne[We.priority].reason=We.reason||null);return Ne[_.Z.PRIORITY.WEAK].quality!==_.Z.NO_CHANGE&&(et=Ne[_.Z.PRIORITY.WEAK]),Ne[_.Z.PRIORITY.DEFAULT].quality!==_.Z.NO_CHANGE&&(et=Ne[_.Z.PRIORITY.DEFAULT]),Ne[_.Z.PRIORITY.STRONG].quality!==_.Z.NO_CHANGE&&(et=Ne[_.Z.PRIORITY.STRONG]),et&&(ut=et.quality,At=et.reason),(0,_.Z)(X).create(ut,At)}}return{initialize:function(){se=[],R=[],be.get().streaming.abr.useDefaultABRRules&&(be.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_L2A?se.push((0,T.Z)(X).create({dashMetrics:ye,settings:be})):be.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_LoLP?se.push((0,U.Z)(X).create({dashMetrics:ye})):(se.push((0,m.Z)(X).create({dashMetrics:ye,mediaPlayerModel:ce,settings:be})),se.push((0,k.Z)(X).create({dashMetrics:ye})),be.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&se.push((0,C.Z)(X).create({dashMetrics:ye,settings:be})),be.get().streaming.abr.additionalAbrRules.switchHistoryRule&&se.push((0,P.Z)(X).create()),be.get().streaming.abr.additionalAbrRules.droppedFramesRule&&se.push((0,y.Z)(X).create()),be.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&R.push((0,E.Z)(X).create({dashMetrics:ye,mediaPlayerModel:ce,settings:be})))),oe.getAbrCustomRules().forEach(function(Ge){Ge.type===x&&se.push(Ge.rule(X).create()),Ge.type===Z&&R.push(Ge.rule(X).create())})},reset:function(){[se,R].forEach(function(Ge){Ge&&Ge.length&&Ge.forEach(function(at){return at.reset&&at.reset()})}),se=[],R=[]},getMaxQuality:function(Ge){return Ie(Xe(se.map(function(at){return at.getMaxIndex(Ge)})))||(0,_.Z)(X).create()},getMinSwitchRequest:Ie,shouldAbandonFragment:function(Ge,at){var ft=Ie(Xe(R.map(function(We){return We.shouldAbandon(Ge,at)})));return ft&&(ft.reason.forceAbandon=!0),ft||(0,_.Z)(X).create()},getQualitySwitchRules:function(){return se}}}Y.__dashjs_factory_name="ABRRulesCollection";var $=M.Z.getClassFactory(Y);$.QUALITY_SWITCH_RULES=x,$.ABANDON_FRAGMENT_RULES=Z,M.Z.updateSingletonFactory(Y.__dashjs_factory_name,$),p.Z=$},7423:function(b,p,w){var k=w(2068),C=w(5448),E=w(6398);function y(P){P=P||{};var m,T,U,M,_,I=this.context,x=P.mediaPlayerModel,Z=P.dashMetrics,Y=P.settings;function $(){U={},M={},_=[]}return m={shouldAbandon:function(Q){var se=(0,k.Z)(I).create(k.Z.NO_CHANGE,{name:y.__dashjs_factory_name});if(!(Q&&Q.hasOwnProperty("getMediaInfo")&&Q.hasOwnProperty("getMediaType")&&Q.hasOwnProperty("getCurrentRequest")&&Q.hasOwnProperty("getRepresentationInfo")&&Q.hasOwnProperty("getAbrController")))return se;var R,X,ce=Q.getMediaInfo(),oe=Q.getMediaType(),ye=Q.getStreamInfo(),be=ye?ye.id:null,Xe=Q.getCurrentRequest();if(!isNaN(Xe.index)){R=oe,X=Xe.index,U[R]=U[R]||{},U[R][X]=U[R][X]||{};var Ie=x.getStableBufferTime();if(Z.getCurrentBufferLevel(oe)>Ie)return se;var Ge=U[oe][Xe.index];if(Ge===null||Xe.firstByteDate===null||M.hasOwnProperty(Ge.id))return se;if(Ge.firstByteTime===void 0&&(_[oe]=[],Ge.firstByteTime=Xe.firstByteDate.getTime(),Ge.segmentDuration=Xe.duration,Ge.bytesTotal=Xe.bytesTotal,Ge.id=Xe.index),Ge.bytesLoaded=Xe.bytesLoaded,Ge.elapsedTime=new Date().getTime()-Ge.firstByteTime,Ge.bytesLoaded>0&&Ge.elapsedTime>0&&function(dt,rn){_[dt]=_[dt]||[],_[dt].push(rn)}(oe,Math.round(8*Ge.bytesLoaded/Ge.elapsedTime)),_[oe].length>=Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&Ge.elapsedTime>Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&Ge.bytesLoaded<Ge.bytesTotal){var at=_[oe].reduce(function(dt,rn){return dt+rn},0);if(Ge.measuredBandwidthInKbps=Math.round(at/_[oe].length),Ge.estimatedTimeOfDownload=+(8*Ge.bytesTotal/Ge.measuredBandwidthInKbps/1e3).toFixed(2),Ge.estimatedTimeOfDownload<Ge.segmentDuration*Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||Q.getRepresentationInfo().quality===0)return se;if(!M.hasOwnProperty(Ge.id)){var ft=Q.getAbrController(),We=Ge.bytesTotal-Ge.bytesLoaded,ut=ft.getBitrateList(ce),At=ft.getQualityForBitrate(ce,Ge.measuredBandwidthInKbps*Y.get().streaming.abr.bandwidthSafetyFactor,be),Ne=ft.getMinAllowedIndexFor(oe,be),et=Ne!==void 0?Math.max(Ne,At):At;We>Ge.bytesTotal*ut[et].bitrate/ut[ft.getQualityFor(oe,be)].bitrate&&(se.quality=et,se.reason.throughput=Ge.measuredBandwidthInKbps,se.reason.fragmentID=Ge.id,se.reason.rule=this.getClassName(),M[Ge.id]=Ge,T.debug("["+oe+"] frag id",Ge.id," is asking to abandon and switch to quality to ",et," measured bandwidth was",Ge.measuredBandwidthInKbps),delete U[oe][Ge.id])}}else Ge.bytesLoaded===Ge.bytesTotal&&delete U[oe][Ge.id]}return se},reset:$},T=(0,E.Z)(I).getInstance().getLogger(m),$(),m}y.__dashjs_factory_name="AbandonRequestsRule",p.Z=C.Z.getClassFactory(y)},3112:function(b,p,w){var k=w(3860),C=w(2068),E=w(5448),y=w(7855),P=w(5595),m=w(8512),T=w(6398),U=w(8825),M=w(3393),_=10;function I(x){x=x||{};var Z,Y,$,Q=this.context,se=x.dashMetrics,R=x.mediaPlayerModel,X=(0,P.Z)(Q).getInstance();function ce(et,dt,rn){var Yt=rn.reduce(function(Re,ne,Ue){return ne>rn[Re]?Ue:Re},0);if(Yt===0)return null;var St=Math.max(et,_+2*dt.length),kt=(rn[Yt]-1)/(St/_-1);return{gp:kt,Vp:_/kt}}function oe(et){et.placeholderBuffer=0,et.mostAdvancedSegmentStart=NaN,et.lastSegmentWasReplacement=!1,et.lastSegmentStart=NaN,et.lastSegmentDurationS=NaN,et.lastSegmentRequestTimeMs=NaN,et.lastSegmentFinishTimeMs=NaN}function ye(et,dt){var rn=R.getStableBufferTime();if(et.stableBufferTime!==rn){var Yt=ce(rn,et.bitrates,et.utilities);if(Yt.Vp!==et.Vp||Yt.gp!==et.gp){var St=se.getCurrentBufferLevel(dt),kt=St+et.placeholderBuffer;kt-=_,kt*=Yt.Vp/et.Vp,kt+=_,et.stableBufferTime=rn,et.Vp=Yt.Vp,et.gp=Yt.gp,et.placeholderBuffer=Math.max(0,kt-St)}}}function be(et,dt){return et.Vp*(et.utilities[dt]+et.gp)}function Xe(et,dt){for(var rn=et.bitrates[dt],Yt=et.utilities[dt],St=0,kt=dt-1;kt>=0;--kt)if(et.utilities[kt]<et.utilities[dt]){var Re=et.bitrates[kt],ne=et.utilities[kt],Ue=et.Vp*(et.gp+(rn*ne-Re*Yt)/(rn-Re));St=Math.max(St,Ue)}return St}function Ie(et){var dt=et.mediaType===M.Z.AUDIO?[M.Z.AUDIO]:$;for(var rn in dt)$.hasOwnProperty(rn)&&$[rn].state===2&&($[rn].placeholderBuffer=0)}function Ge(){for(var et in $)if($.hasOwnProperty(et)){var dt=$[et];dt.state!==0&&(dt.state=1,oe(dt))}}function at(et){if(et&&et.chunk&&et.chunk.mediaInfo){var dt=$[et.chunk.mediaInfo.type];if(dt&&dt.state!==0){var rn=et.chunk.start;isNaN(dt.mostAdvancedSegmentStart)||rn>dt.mostAdvancedSegmentStart?(dt.mostAdvancedSegmentStart=rn,dt.lastSegmentWasReplacement=!1):dt.lastSegmentWasReplacement=!0,dt.lastSegmentStart=rn,dt.lastSegmentDurationS=et.chunk.duration,dt.lastQuality=et.chunk.quality,We(dt,et.chunk.mediaInfo.type)}}}function ft(et){if(et&&et.metric===k.Z.HTTP_REQUEST&&et.value&&et.value.type===y.w.MEDIA_SEGMENT_TYPE&&et.value.trace&&et.value.trace.length){var dt=$[et.mediaType];dt&&dt.state!==0&&(dt.lastSegmentRequestTimeMs=et.value.trequest.getTime(),dt.lastSegmentFinishTimeMs=et.value._tfinish.getTime(),We(dt,et.mediaType))}}function We(et,dt){if(!isNaN(et.lastSegmentStart)&&!isNaN(et.lastSegmentRequestTimeMs)&&!isNaN(et.placeholderBuffer)){if(et.placeholderBuffer*=.99,!isNaN(et.lastSegmentFinishTimeMs)){var rn=se.getCurrentBufferLevel(dt)+.001*(et.lastSegmentFinishTimeMs-et.lastSegmentRequestTimeMs),Yt=be(et,et.lastQuality),St=Math.max(0,Yt-rn);et.placeholderBuffer=Math.min(St,et.placeholderBuffer)}et.lastSegmentWasReplacement&&!isNaN(et.lastSegmentDurationS)&&(et.placeholderBuffer+=et.lastSegmentDurationS),et.lastSegmentStart=NaN,et.lastSegmentRequestTimeMs=NaN}}function ut(et){if(et){var dt=$[et.mediaType];dt&&dt.state!==0&&(dt.abrQuality=et.newQuality)}}function At(et){if(et){var dt=$[et.mediaType];if(dt&&dt.state!==0){var rn,Yt=se.getCurrentBufferLevel(et.mediaType);rn=dt.abrQuality>0?Xe(dt,dt.abrQuality):_;var St=Math.max(0,rn-Yt);dt.placeholderBuffer=Math.min(dt.placeholderBuffer,St)}}}function Ne(){$={}}return Z={getMaxIndex:function(et){var dt=(0,C.Z)(Q).create();if(!(et&&et.hasOwnProperty("getMediaInfo")&&et.hasOwnProperty("getMediaType")&&et.hasOwnProperty("getScheduleController")&&et.hasOwnProperty("getStreamInfo")&&et.hasOwnProperty("getAbrController")&&et.hasOwnProperty("useBufferOccupancyABR")))return dt;var rn=et.getMediaInfo(),Yt=et.getMediaType(),St=et.getScheduleController(),kt=et.getStreamInfo(),Re=et.getAbrController(),ne=Re.getThroughputHistory(),Ue=kt?kt.id:null,L=kt&&kt.manifestInfo&&kt.manifestInfo.isDynamic,D=et.useBufferOccupancyABR();if(dt.reason=dt.reason||{},!D)return dt;St.setTimeToLoadDelay(0);var G=function(tt){var ht=tt.getMediaType(),yt=$[ht];return yt?yt.state!==0&&ye(yt,ht):(yt=function(Et){var Mt={},_n=Et.getMediaInfo().bitrateList.map(function(Gn){return Gn.bandwidth}),nn=function(Gn){return Gn.map(function(Sr){return Math.log(Sr)})}(_n);nn=nn.map(function(Gn){return Gn-nn[0]+1});var cn=R.getStableBufferTime(),Ft=ce(cn,_n,nn);return Ft?(Mt.state=1,Mt.bitrates=_n,Mt.utilities=nn,Mt.stableBufferTime=cn,Mt.Vp=Ft.Vp,Mt.gp=Ft.gp,Mt.lastQuality=0,oe(Mt)):Mt.state=0,Mt}(tt),$[ht]=yt),yt}(et);if(G.state===0)return dt;var K,ge=se.getCurrentBufferLevel(Yt),de=ne.getAverageThroughput(Yt,L),He=ne.getSafeAverageThroughput(Yt,L),Tt=ne.getAverageLatency(Yt);if(dt.reason.state=G.state,dt.reason.throughput=de,dt.reason.latency=Tt,isNaN(de))return dt;switch(G.state){case 1:K=Re.getQualityForBitrate(rn,He,Ue,Tt),dt.quality=K,dt.reason.throughput=He,G.placeholderBuffer=Math.max(0,Xe(G,K)-ge),G.lastQuality=K,!isNaN(G.lastSegmentDurationS)&&ge>=G.lastSegmentDurationS&&(G.state=2);break;case 2:(function(tt,ht){var yt=Date.now();if(isNaN(tt.lastSegmentFinishTimeMs)){if(!isNaN(tt.lastCallTimeMs)){var Et=.001*(yt-tt.lastCallTimeMs);tt.placeholderBuffer+=Math.max(0,Et)}}else{var Mt=.001*(yt-tt.lastSegmentFinishTimeMs);tt.placeholderBuffer+=Math.max(0,Mt)}tt.lastCallTimeMs=yt,tt.lastSegmentStart=NaN,tt.lastSegmentRequestTimeMs=NaN,tt.lastSegmentFinishTimeMs=NaN,ye(tt,ht)})(G,Yt),K=function(tt,ht){for(var yt=tt.bitrates.length,Et=NaN,Mt=NaN,_n=0;_n<yt;++_n){var nn=(tt.Vp*(tt.utilities[_n]+tt.gp)-ht)/tt.bitrates[_n];(isNaN(Mt)||nn>=Mt)&&(Mt=nn,Et=_n)}return Et}(G,ge+G.placeholderBuffer);var st=Re.getQualityForBitrate(rn,He,Ue,Tt);K>G.lastQuality&&K>st&&(K=Math.max(st,G.lastQuality));var ot=Math.max(0,ge+G.placeholderBuffer-be(G,K));ot<=G.placeholderBuffer?(G.placeholderBuffer-=ot,ot=0):(ot-=G.placeholderBuffer,G.placeholderBuffer=0,K<Re.getMaxAllowedIndexFor(Yt,Ue)?St.setTimeToLoadDelay(1e3*ot):ot=0),dt.quality=K,dt.reason.throughput=de,dt.reason.latency=Tt,dt.reason.bufferLevel=ge,dt.reason.placeholderBuffer=G.placeholderBuffer,dt.reason.delay=ot,G.lastQuality=K;break;default:Y.debug("BOLA ABR rule invoked in bad state."),dt.quality=Re.getQualityForBitrate(rn,He,Ue,Tt),dt.reason.state=G.state,dt.reason.throughput=He,dt.reason.latency=Tt,G.state=1,oe(G)}return dt},reset:function(){Ne(),X.off(U.Z.BUFFER_EMPTY,Ie,Z),X.off(U.Z.PLAYBACK_SEEKING,Ge,Z),X.off(U.Z.METRIC_ADDED,ft,Z),X.off(U.Z.QUALITY_CHANGE_REQUESTED,ut,Z),X.off(U.Z.FRAGMENT_LOADING_ABANDONED,At,Z),X.off(m.Z.MEDIA_FRAGMENT_LOADED,at,Z)}},Y=(0,T.Z)(Q).getInstance().getLogger(Z),Ne(),X.on(U.Z.BUFFER_EMPTY,Ie,Z),X.on(U.Z.PLAYBACK_SEEKING,Ge,Z),X.on(U.Z.METRIC_ADDED,ft,Z),X.on(U.Z.QUALITY_CHANGE_REQUESTED,ut,Z),X.on(U.Z.FRAGMENT_LOADING_ABANDONED,At,Z),X.on(m.Z.MEDIA_FRAGMENT_LOADED,at,Z),Z}I.__dashjs_factory_name="BolaRule",p.Z=E.Z.getClassFactory(I)},895:function(b,p,w){var k=w(5448),C=w(2068),E=w(6398);function y(){var P,m,T=this.context;return P={getMaxIndex:function(U){var M=(0,C.Z)(T).create();if(!U||!U.hasOwnProperty("getDroppedFramesHistory"))return M;var _=U.getDroppedFramesHistory(),I=U.getStreamInfo().id;if(_){var x=_.getFrameHistory(I);if(!x||x.length===0)return M;for(var Z=0,Y=0,$=C.Z.NO_CHANGE,Q=1;Q<x.length;Q++)if(x[Q]&&(Z=x[Q].droppedVideoFrames,(Y=x[Q].totalVideoFrames)>375&&Z/Y>.15)){$=Q-1,m.debug("index: "+$+" Dropped Frames: "+Z+" Total Frames: "+Y);break}return(0,C.Z)(T).create($,{droppedFrames:Z})}return M}},m=(0,E.Z)(T).getInstance().getLogger(P),P}y.__dashjs_factory_name="DroppedFramesRule",p.Z=k.Z.getClassFactory(y)},6535:function(b,p,w){var k=w(5595),C=w(8512),E=w(5448),y=w(6398),P=w(2068),m=w(3393),T=w(3860),U=w(8825);function M(_){_=_||{};var I,x,Z,Y=this.context,$=(0,k.Z)(Y).getInstance(),Q=_.dashMetrics;function se(){(Z={})[m.Z.VIDEO]={ignoreCount:2},Z[m.Z.AUDIO]={ignoreCount:2}}function R(){se()}function X(ce){isNaN(ce.startTime)||ce.mediaType!==m.Z.AUDIO&&ce.mediaType!==m.Z.VIDEO||Z[ce.mediaType].ignoreCount>0&&Z[ce.mediaType].ignoreCount--}return I={getMaxIndex:function(ce){var oe=(0,P.Z)(Y).create();if(!ce||!ce.hasOwnProperty("getMediaType"))return oe;(function(){if(!Q||!Q.hasOwnProperty("getCurrentBufferLevel")||!Q.hasOwnProperty("getCurrentBufferState"))throw new Error(m.Z.MISSING_CONFIG_ERROR)})();var ye=ce.getMediaType(),be=Q.getCurrentBufferState(ye),Xe=ce.getRepresentationInfo().fragmentDuration,Ie=ce.getStreamInfo(),Ge=Ie?Ie.id:null,at=ce.getScheduleController(),ft=Ie&&Ie.manifestInfo&&Ie.manifestInfo.isDynamic;if(function(Yt,St){return!Yt&&Z[St].ignoreCount>0}(at.getPlaybackController().getLowLatencyModeEnabled(),ye)||!Xe)return oe;if(be&&be.state===T.Z.BUFFER_EMPTY)x.debug("["+ye+"] Switch to index 0; buffer is empty."),oe.quality=0,oe.reason="InsufficientBufferRule: Buffer is empty";else{var We=ce.getMediaInfo(),ut=ce.getAbrController(),At=ut.getThroughputHistory(),Ne=Q.getCurrentBufferLevel(ye),et=At.getAverageThroughput(ye,ft),dt=At.getAverageLatency(ye),rn=et*(Ne/Xe)*.5;oe.quality=ut.getQualityForBitrate(We,rn,Ge,dt),oe.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return oe},reset:function(){se(),$.off(U.Z.PLAYBACK_SEEKING,R,I),$.off(C.Z.BYTES_APPENDED_END_FRAGMENT,X,I)}},x=(0,y.Z)(Y).getInstance().getLogger(I),se(),$.on(U.Z.PLAYBACK_SEEKING,R,I),$.on(C.Z.BYTES_APPENDED_END_FRAGMENT,X,I),I}M.__dashjs_factory_name="InsufficientBufferRule",p.Z=E.Z.getClassFactory(M)},1914:function(b,p,w){var k=w(3860),C=w(2068),E=w(5448),y=w(7855),P=w(5595),m=w(8512),T=w(6398),U=w(3393);function M(_){_=_||{};var I,x,Z,Y,$=this.context,Q=_.dashMetrics,se=(0,P.Z)($).getInstance();function R(Ge){Ge.placeholderBuffer=0,Ge.mostAdvancedSegmentStart=NaN,Ge.lastSegmentWasReplacement=!1,Ge.lastSegmentStart=NaN,Ge.lastSegmentDurationS=NaN,Ge.lastSegmentRequestTimeMs=NaN,Ge.lastSegmentFinishTimeMs=NaN,Ge.lastSegmentUrl=""}function X(){for(var Ge in x)if(x.hasOwnProperty(Ge)){var at=x[Ge];at.state!==0&&(at.state=1,R(at))}}function ce(Ge){if(Ge&&Ge.chunk&&Ge.chunk.mediaInfo){var at=x[Ge.chunk.mediaInfo.type],ft=Z[Ge.chunk.mediaInfo.type];if(at&&at.state!==0){var We=Ge.chunk.start;isNaN(at.mostAdvancedSegmentStart)||We>at.mostAdvancedSegmentStart?(at.mostAdvancedSegmentStart=We,at.lastSegmentWasReplacement=!1):at.lastSegmentWasReplacement=!0,at.lastSegmentStart=We,at.lastSegmentDurationS=Ge.chunk.duration,at.lastQuality=Ge.chunk.quality,ye(at,ft)}}}function oe(Ge){if(Ge&&Ge.metric===k.Z.HTTP_REQUEST&&Ge.value&&Ge.value.type===y.w.MEDIA_SEGMENT_TYPE&&Ge.value.trace&&Ge.value.trace.length){var at=x[Ge.mediaType],ft=Z[Ge.mediaType];at&&at.state!==0&&(at.lastSegmentRequestTimeMs=Ge.value.trequest.getTime(),at.lastSegmentFinishTimeMs=Ge.value._tfinish.getTime(),ye(at,ft))}}function ye(Ge,at){isNaN(Ge.lastSegmentStart)||isNaN(Ge.lastSegmentRequestTimeMs)||(at.segment_request_start_s=.001*Ge.lastSegmentRequestTimeMs,at.segment_download_finish_s=.001*Ge.lastSegmentFinishTimeMs,Ge.lastSegmentStart=NaN,Ge.lastSegmentRequestTimeMs=NaN)}function be(Ge){if(Ge&&Ge.mediaType){var at=x[Ge.mediaType];at&&at.state!==0&&(at.abrQuality=Ge.newQuality)}}function Xe(Ge,at){if(Ge.length!==at.length)return-1;for(var ft=0,We=0;We<Ge.length;We++)ft+=Ge[We]*at[We];return ft}function Ie(){x={},Z={}}return I={getMaxIndex:function(Ge){var at,ft=(0,C.Z)($).create(),We=Math.pow(4,.99),ut=Math.max(Math.pow(4,1),We*Math.sqrt(4)),At=Ge.getMediaInfo(),Ne=Ge.getMediaType(),et=At.bitrateList.map(function(Ft){return Ft.bandwidth}),dt=et.length,rn=Ge.getScheduleController(),Yt=Ge.getStreamInfo(),St=Ge.getAbrController(),kt=St.getThroughputHistory(),Re=Yt&&Yt.manifestInfo&&Yt.manifestInfo.isDynamic,ne=Ge.useL2AABR(),Ue=Q.getCurrentBufferLevel(Ne,!0),L=kt.getSafeAverageThroughput(Ne,Re),D=kt.getAverageThroughput(Ne,Re),G=kt.getAverageLatency(Ne),K=Ge.getVideoModel().getPlaybackRate();if(!(Ge&&Ge.hasOwnProperty("getMediaInfo")&&Ge.hasOwnProperty("getMediaType")&&Ge.hasOwnProperty("getScheduleController")&&Ge.hasOwnProperty("getStreamInfo")&&Ge.hasOwnProperty("getAbrController")&&Ge.hasOwnProperty("useL2AABR"))||(ft.reason=ft.reason||{},!ne||Ne===U.Z.AUDIO))return ft;rn.setTimeToLoadDelay(0);var ge=function(Ft){var Gn=Ft.getMediaType(),Sr=x[Gn];return Sr||(Sr=function(qr){var gr={},fi=qr.getMediaInfo(),ao=fi.bitrateList.map(function(Gr){return Gr.bandwidth/1e3});return gr.state=1,gr.bitrates=ao,gr.lastQuality=0,function(Gr){Gr&&Gr.type&&(Z[Gr.type]={},Z[Gr.type].w=[],Z[Gr.type].prev_w=[],Z[Gr.type].Q=0,Z[Gr.type].segment_request_start_s=0,Z[Gr.type].segment_download_finish_s=0,Z[Gr.type].B_target=1.5)}(fi),R(gr),gr}(Ft),x[Gn]=Sr),Sr}(Ge);if(ge.state===0)return ft;var de=Z[Ne];if(!de||(ft.reason.state=ge.state,ft.reason.throughput=D,ft.reason.latency=G,isNaN(D)))return ft;switch(ge.state){case 1:if(at=St.getQualityForBitrate(At,L,Yt.id,G),ft.quality=at,ft.reason.throughput=L,ge.lastQuality=at,!isNaN(ge.lastSegmentDurationS)&&Ue>=de.B_target){ge.state=2,de.Q=We;for(var He=0;He<dt;++He)He===ge.lastQuality?de.prev_w[He]=1:de.prev_w[He]=0}break;case 2:var Tt=[],st=Q.getCurrentHttpRequest(Ne).trace.reduce(function(Ft,Gn){return Ft+Gn.d},0),ot=Q.getCurrentHttpRequest(Ne).trace.reduce(function(Ft,Gn){return Ft+Gn.b[0]},0),tt=Math.round(8*ot/st),ht=Q.getCurrentHttpRequest(Ne);if(tt<1&&(tt=1),ht.url===ge.lastSegmentUrl||ht.type===y.w.INIT_SEGMENT_TYPE)at=ge.lastQuality;else{for(var yt=ge.lastSegmentDurationS,Et=1,Mt=0;Mt<dt;++Mt)et[Mt]=et[Mt]/1e3,K*et[Mt]>tt&&(Et=-1),de.w[Mt]=de.prev_w[Mt]+Et*(yt/(2*ut))*((de.Q+We)*(K*et[Mt]/tt));de.w=function(Ft){for(var Gn=Ft.length,Sr=!1,qr=[],gr=0;gr<Gn;++gr)qr[gr]=Ft[gr];for(var fi=Ft.sort(function(no,uo){return uo-no}),ao=0,Gr=0,so=[],xi=0;xi<Gn-1;++xi)if((Gr=((ao+=fi[xi])-1)/(xi+1))>=fi[xi+1]){Sr=!0;break}Sr||(Gr=(ao+fi[Gn-1]-1)/Gn);for(var Fi=0;Fi<Gn;++Fi)so[Fi]=Math.max(qr[Fi]-Gr,0);return so}(de.w);for(var _n=0;_n<dt;++_n)Tt[_n]=de.w[_n]-de.prev_w[_n],de.prev_w[_n]=de.w[_n];de.Q=Math.max(0,de.Q-yt+yt*K*((Xe(et,de.prev_w)+Xe(et,Tt))/tt));for(var nn=[],cn=0;cn<dt;++cn)nn[cn]=Math.abs(et[cn]-Xe(de.w,et));(at=nn.indexOf(Math.min.apply(Math,nn)))>ge.lastQuality&&et[ge.lastQuality+1]<=tt&&(at=ge.lastQuality+1),et[at]>=tt&&(de.Q=2*Math.max(We,de.Q)),ge.lastSegmentUrl=ht.url}ft.quality=at,ft.reason.throughput=D,ft.reason.latency=G,ft.reason.bufferLevel=Ue,ge.lastQuality=ft.quality;break;default:Y.debug("L2A ABR rule invoked in bad state."),ft.quality=St.getQualityForBitrate(At,L,Yt.id,G),ft.reason.state=ge.state,ft.reason.throughput=L,ft.reason.latency=G,ge.state=1,R(ge)}return ft},reset:function(){Ie(),se.off(m.Z.PLAYBACK_SEEKING,X,I),se.off(m.Z.MEDIA_FRAGMENT_LOADED,ce,I),se.off(m.Z.METRIC_ADDED,oe,I),se.off(m.Z.QUALITY_CHANGE_REQUESTED,be,I)}},Y=(0,T.Z)($).getInstance().getLogger(I),Ie(),se.on(m.Z.PLAYBACK_SEEKING,X,I),se.on(m.Z.MEDIA_FRAGMENT_LOADED,ce,I),se.on(m.Z.METRIC_ADDED,oe,I),se.on(m.Z.QUALITY_CHANGE_REQUESTED,be,I),I}M.__dashjs_factory_name="L2ARule",p.Z=E.Z.getClassFactory(M)},6070:function(b,p,w){var k=w(5448),C=w(6398),E=w(2068);function y(){var P,m,T=this.context;return P={getMaxIndex:function(U){for(var M=U?U.getSwitchHistory():null,_=M?M.getSwitchRequests():[],I=0,x=0,Z=0,Y=(0,E.Z)(T).create(),$=0;$<_.length;$++)if(_[$]!==void 0&&(I+=_[$].drops,x+=_[$].noDrops,Z+=_[$].dropSize,I+x>=6&&I/x>.075)){Y.quality=$>0&&_[$].drops>0?$-1:$,Y.reason={index:Y.quality,drops:I,noDrops:x,dropSize:Z},m.debug("Switch history rule index: "+Y.quality+" samples: "+(I+x)+" drops: "+I);break}return Y}},m=(0,C.Z)(T).getInstance().getLogger(P),P}y.__dashjs_factory_name="SwitchHistoryRule",p.Z=k.Z.getClassFactory(y)},5628:function(b,p,w){var k=w(5448),C=w(2068),E=w(3393),y=w(3860);function P(m){m=m||{};var T=this.context,U=m.dashMetrics;return{getMaxIndex:function(M){var _=(0,C.Z)(T).create();if(!(M&&M.hasOwnProperty("getMediaInfo")&&M.hasOwnProperty("getMediaType")&&M.hasOwnProperty("useBufferOccupancyABR")&&M.hasOwnProperty("getAbrController")&&M.hasOwnProperty("getScheduleController")))return _;(function(){if(!U||!U.hasOwnProperty("getCurrentBufferState"))throw new Error(E.Z.MISSING_CONFIG_ERROR)})();var I=M.getMediaInfo(),x=M.getMediaType(),Z=U.getCurrentBufferState(x),Y=M.getScheduleController(),$=M.getAbrController(),Q=M.getStreamInfo(),se=Q?Q.id:null,R=Q&&Q.manifestInfo?Q.manifestInfo.isDynamic:null,X=$.getThroughputHistory(),ce=X.getSafeAverageThroughput(x,R),oe=X.getAverageLatency(x),ye=M.useBufferOccupancyABR();return isNaN(ce)||!Z||ye||$.getAbandonmentStateFor(se,x)!==y.Z.ABANDON_LOAD&&(Z.state===y.Z.BUFFER_LOADED||R)&&(_.quality=$.getQualityForBitrate(I,ce,se,oe),Y.setTimeToLoadDelay(0),_.reason={throughput:ce,latency:oe}),_},reset:function(){}}}P.__dashjs_factory_name="ThroughputRule",p.Z=k.Z.getClassFactory(P)},4722:function(b,p,w){var k=w(5448),C=w(6398);function E(){var y,P,m,T,U,M,_,I,x,Z=this.context;function Y(){m=null,T=1,U=100,M=0,_=null,I=null,x="dynamic_weight_selection"}function $(){var ce=0;if(m)for(var oe=0;oe<m.length;oe++){var ye=m[oe];ye.state.throughput>ce&&(ce=ye.state.throughput)}return ce}function Q(ce,oe,ye){var be=ce.map(function(Xe,Ie){return ye[Ie]*Math.pow(Xe-oe[Ie],2)}).reduce(function(Xe,Ie){return Xe+Ie});return(be<0?-1:1)*Math.sqrt(Math.abs(be))}function se(ce,oe){return Q([ce.state.throughput,ce.state.latency,ce.state.rebuffer,ce.state.switch],[oe.state.throughput,oe.state.latency,oe.state.rebuffer,oe.state.switch],[1,1,1,1])}function R(ce,oe,ye){for(var be=0;be<oe.length;be++){var Xe=oe[be],Ie=se(Xe,ce);X(Xe,ye,Math.exp(-1*Math.pow(Ie,2)/(2*Math.pow(.1,2))))}}function X(ce,oe,ye){var be=ce.state,Xe=[.01,.01,.01,.01];be.throughput=be.throughput+(oe[0]-be.throughput)*Xe[0]*ye,be.latency=be.latency+(oe[1]-be.latency)*Xe[1]*ye,be.rebuffer=be.rebuffer+(oe[2]-be.rebuffer)*Xe[2]*ye,be.switch=be.switch+(oe[3]-be.switch)*Xe[3]*ye}return y={getNextQuality:function(ce,oe,ye,be,Xe,Ie,Ge){var at=ye,ft=be,We=oe,ut=function(de){if(!m){m=[];var He=de.bitrateList,Tt=[];M=He[0].bandwidth,He.forEach(function(ht){Tt.push(ht.bandwidth),ht.bandwidth<M&&(M=ht.bandwidth)}),tt=Tt.map(function(ht){return Math.pow(ht,2)}).reduce(function(ht,yt){return ht+yt}),T=Math.sqrt(tt);for(var st=0;st<He.length;st++){var ot={qualityIndex:st,bitrate:He[st].bandwidth,state:{throughput:He[st].bandwidth/T,latency:0,rebuffer:0,switch:0}};m.push(ot)}I=function(ht){var yt=[],Et=function(Zu){for(var ln=[],gn=0;gn<Zu;gn++){var pn=[Math.random()*$(),Math.random(),Math.random(),Math.random()];ln.push(pn)}return ln}(Math.pow(ht.length,2));yt.push(Et[0]);for(var Mt=[1,1,1,1],_n=1;_n<ht.length;_n++){for(var nn=null,cn=null,Ft=0;Ft<Et.length;Ft++){for(var Gn=Et[Ft],Sr=null,qr=0;qr<yt.length;qr++){var gr=Q(Gn,yt[qr],Mt);(Sr===null||gr<Sr)&&(Sr=gr)}(cn===null||Sr>cn)&&(nn=Gn,cn=Sr)}yt.push(nn)}for(var fi=null,ao=null,Gr=0;Gr<yt.length;Gr++){for(var so=0,xi=0;xi<yt.length;xi++)Gr!==xi&&(so+=Q(yt[Gr],yt[xi],Mt));(fi===null||so>fi)&&(fi=so,ao=Gr)}var Fi=[];for(Fi.push(yt[ao]),yt.splice(ao,1);yt.length>0;){for(var no=null,uo=null,Ni=0;Ni<yt.length;Ni++){var nr=Q(Fi[0],yt[Ni],Mt);(no===null||nr<no)&&(no=nr,uo=Ni)}Fi.push(yt[uo]),yt.splice(uo,1)}return Fi}(m)}var tt;return m}(ce),At=oe/T;At>1&&(At=$()),ye/=U,P.debug("getNextQuality called throughput:".concat(At," latency:").concat(ye," bufferSize:").concat(be," currentQualityIndex:").concat(Ie," playbackRate:").concat(Xe));var Ne=ut[Ie],et=Ne.bitrate*Ge.getSegmentDuration()/We,dt=Math.max(0,et-ft);if(ft-et<Ge.getMinBuffer())return P.debug("Buffer is low for bitrate= ".concat(Ne.bitrate," downloadTime=").concat(et," currentBuffer=").concat(ft," rebuffer=").concat(dt)),function(de,He){var Tt=0,st=de;if(m)for(var ot=0;ot<m.length;ot++){var tt=m[ot];tt.bitrate<de.bitrate&&tt.bitrate>Tt&&He>tt.bitrate&&(Tt=tt.bitrate,st=tt)}return st}(Ne,We).qualityIndex;switch(x){case"manual_weight_selection":_=[.4,.4,.4,.4];break;case"random_weight_selection":(function(de){_=function(He,Tt){for(var st=[],ot=Math.sqrt(2/He),tt=0;tt<4;tt++)st.push(Math.random()*ot);return _=st}(de.length)})(ut);break;default:(function(de,He,Tt,st,ot,tt,ht){_||(_=I[I.length-1]);var yt=de.findWeightVector(He,Tt,st,ot,tt,ht);yt!==null&&yt!==-1&&(_=yt)})(Ge,ut,at,ft,dt,We,Xe)}for(var rn=null,Yt=null,St=null,kt=0;kt<ut.length;kt++){var Re=ut[kt],ne=Re.state,Ue=[ne.throughput,ne.latency,ne.rebuffer,ne.switch],L=_.slice(),D=Ge.getNextBufferWithBitrate(Re.bitrate,ft,We),G=D<Ge.getMinBuffer();G&&P.debug("Buffer is low for bitrate=".concat(Re.bitrate," downloadTime=").concat(et," currentBuffer=").concat(ft," nextBuffer=").concat(D)),(Re.bitrate>oe-1e4||G)&&Re.bitrate!==M&&(L[0]=100);var K=Q(Ue,[At,0,0,0],L);(rn===null||K<rn)&&(rn=K,Yt=Re.qualityIndex,St=Re)}var ge=Math.abs(Ne.bitrate-St.bitrate)/T;return R(Ne,ut,[At,ye,dt,ge]),R(St,ut,[At,0,0,ge]),Yt},reset:function(){Y()}},P=(0,C.Z)(Z).getInstance().getLogger(y),Y(),y}E.__dashjs_factory_name="LearningAbrController",p.Z=k.Z.getClassFactory(E)},5317:function(b,p,w){var k=w(5448),C=w(2298);function E(){var y,P,m,T,U;function M(){P=null,m=null,T=null,U=null}function _(x,Z,Y,$){var Q=new C.Z;return Q.type=x,Q.weights.bitrateReward=Z||1,Q.weights.bitrateSwitchPenalty=1,Q.weights.rebufferPenalty=Y||1e3,Q.weights.latencyPenalty=[],Q.weights.latencyPenalty.push({threshold:1.1,penalty:.05*$}),Q.weights.latencyPenalty.push({threshold:1e8,penalty:.1*Y}),Q.weights.playbackSpeedPenalty=$||200,Q}function I(x,Z,Y,$,Q){Q.bitrateWSum+=Q.weights.bitrateReward*x,Q.lastBitrate&&(Q.bitrateSwitchWSum+=Q.weights.bitrateSwitchPenalty*Math.abs(x-Q.lastBitrate)),Q.lastBitrate=x,Q.rebufferWSum+=Q.weights.rebufferPenalty*Z;for(var se=0;se<Q.weights.latencyPenalty.length;se++){var R=Q.weights.latencyPenalty[se];if(Y<=R.threshold){Q.latencyWSum+=R.penalty*Y;break}}Q.playbackSpeedWSum+=Q.weights.playbackSpeedPenalty*Math.abs(1-$),Q.totalQoe=Q.bitrateWSum-Q.bitrateSwitchWSum-Q.rebufferWSum-Q.latencyWSum-Q.playbackSpeedWSum}return y={setupPerSegmentQoe:function(x,Z,Y){P=_("segment",x,Z,Y),m=x,T=Z,U=Y},logSegmentMetrics:function(x,Z,Y,$){P&&I(x,Z,Y,$,P)},getPerSegmentQoe:function(){return P},calculateSingleUseQoe:function(x,Z,Y,$){var Q=null;return m&&T&&U&&(Q=_("segment",m,T,U)),Q?(I(x,Z,Y,$,Q),Q.totalQoe):0},reset:function(){M()}},M(),y}E.__dashjs_factory_name="LoLpQoeEvaluator",p.Z=k.Z.getClassFactory(E)},5435:function(b,p,w){var k=w(6398),C=w(5448),E=w(4722),y=w(5317),P=w(2068),m=w(3860),T=w(6523),U=w(3393);function M(_){var I,x,Z,Y,$=(_=_||{}).dashMetrics,Q=this.context;return x={getMaxIndex:function(se){try{var R=(0,P.Z)(Q).create(),X=se.getMediaInfo().type,ce=se.getAbrController(),oe=se.getStreamInfo(),ye=ce.getQualityFor(X,oe.id),be=se.getMediaInfo(),Xe=$.getCurrentBufferState(X),Ie=se.getScheduleController(),Ge=$.getCurrentBufferLevel(X,!0),at=oe&&oe.manifestInfo?oe.manifestInfo.isDynamic:null,ft=Ie.getPlaybackController(),We=ft.getCurrentLiveLatency();if(!se.useLoLPABR()||X===U.Z.AUDIO)return R;We||(We=0);var ut=ft.getPlaybackRate(),At=ce.getThroughputHistory().getSafeAverageThroughput(X,at);if(I.debug("Throughput ".concat(Math.round(At)," kbps")),isNaN(At)||!Xe||ce.getAbandonmentStateFor(oe.id,X)===m.Z.ABANDON_LOAD)return R;for(var Ne=be.bitrateList,et=se.getRepresentationInfo().fragmentDuration,dt=Ne[0].bandwidth/1e3,rn=Ne[Ne.length-1].bandwidth/1e3,Yt=0;Yt<Ne.length;Yt++){var St=Ne[Yt].bandwidth/1e3;St>rn?rn=St:St<dt&&(dt=St)}var kt=Ne[ye].bandwidth/1e3,Re=$.getCurrentHttpRequest(X,!0),ne=(Re.tresponse.getTime()-Re.trequest.getTime())/1e3,Ue=ne>et?ne-et:0;Y.setupPerSegmentQoe(et,rn,dt),Y.logSegmentMetrics(kt,Ue,We,ut);var L=(0,T.Z)(Q).create({targetLatency:1.5,bufferMin:.3,segmentDuration:et,qoeEvaluator:Y});return R.quality=Z.getNextQuality(be,1e3*At,We,Ge,ut,ye,L),R.reason={throughput:At,latency:We},R.priority=P.Z.PRIORITY.STRONG,Ie.setTimeToLoadDelay(0),R.quality!==ye&&I.debug("[TgcLearningRule]["+X+"] requesting switch to index: ",R.quality,"Average throughput",Math.round(At),"kbps"),R}catch(D){throw D}},reset:function(){Z.reset(),Y.reset()}},I=(0,k.Z)(Q).getInstance().getLogger(x),Z=(0,E.Z)(Q).create(),Y=(0,y.Z)(Q).create(),x}M.__dashjs_factory_name="LoLPRule",p.Z=C.Z.getClassFactory(M)},6523:function(b,p,w){var k=w(5448);function C(E){var y,P,m,T,U=E.targetLatency,M=E.bufferMin,_=E.segmentDuration,I=E.qoeEvaluator;function x(){return _}function Z(Y,$){var Q=x();return $>Q?Y-Q:Y+Q-$}return y={getMinBuffer:function(){return M},getSegmentDuration:x,getNextBufferWithBitrate:function(Y,$,Q){return Z($,Y*_/Q)},getNextBuffer:Z,findWeightVector:function(Y,$,Q,se,R,X){var ce=null,oe=null,ye=null,be=Math.abs($-m);return Y.forEach(function(Xe){P.forEach(function(Ie){Ie[0];var Ge=Ie[1],at=Ie[2],ft=(Ie[3],Xe.bitrate*_/R),We=Z(Q,ft),ut=(at===0?10:1/at)*Math.max(1e-5,ft-We),At=(Ge===0?10:1/Ge)*Xe.state.latency,Ne=I.calculateSingleUseQoe(Xe.bitrate,ut,At,X);(ce===null||Ne>ce)&&function(et,dt,rn){return!(et>U+rn)&&dt>=M}($,We,be)&&(ce=Ne,oe=Ie,ye=Xe.bitrate)})}),oe===null&&ye===null&&(oe=-1),m=$,oe}},P=function Y($,Q,se){if(se===Q)return $;for(var R=$.length,X=0;X<R;X++)for(var ce=$.shift(),oe=0;oe<T.length;oe++)$.push(ce.concat(T[oe]));return Y($,Q,se+1)}((T=[.2,.4,.6,.8,1]).map(function(Y){return[Y]}),4,1),m=0,y}C.__dashjs_factory_name="LoLpWeightSelector",p.Z=k.Z.getClassFactory(C)},2298:function(b,p){p.Z=function w(){(function(k,C){if(!(k instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(b,p,w){w.d(p,{Y:function(){return I}});var k=w(3393),C=w(1553),E=w(5448),y=w(2128),P=w(2594),m=w(7387),T=w(7417),U=w(9032),M=w(9326),_=w(7802),I=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function x(Z){var Y,$,Q,se,R,X,ce,oe,ye=this.context,be=Z.adapter,Xe=Z.baseURLController,Ie=Z.streamInfo,Ge=Z.timelineConverter,at=Z.debug,ft=Z.eventBus,We=Z.events,ut=Z.dashConstants,At=(0,P.Z)(ye).getInstance();function Ne(dt,rn){var Yt=new y.Z;Yt.id=dt.id,Yt.bitrate=dt.bandwidth,Yt.width=dt.width,Yt.height=dt.height,Yt.tilesHor=1,Yt.tilesVert=1,dt.essentialProperties&&dt.essentialProperties.forEach(function(St){if(I.indexOf(St.schemeIdUri)>=0&&St.value){var kt=St.value.split("x");kt.length!==2||isNaN(kt[0])||isNaN(kt[1])||(Yt.tilesHor=parseInt(kt[0],10),Yt.tilesVert=parseInt(kt[1],10))}}),rn?X.updateSegmentData(dt).then(function(St){(function(kt,Re,ne){var Ue=[],L=function(D,G){var K,ge,de,He,Tt=[],st=0;for(K=0,ge=D.segments.length;K<ge;K++)de=D.segments[K],(He=(0,m.TJ)(Ge,be.getIsDynamic(),G,de.startTime,de.duration,de.timescale,de.media,de.mediaRange,st))&&(Tt.push(He),He=null,st++);return Tt}(ne,Re);Re.segments=L,kt.segmentDuration=Re.segments[0].duration,kt.readThumbnail=function(D,G){var K=null;Ue.some(function(ge){if(ge.start<=D&&ge.end>D)return K=ge.url,!0}),K?G(K):Re.segments.some(function(ge){if(ge.mediaStartTime<=D&&ge.mediaStartTime+ge.duration>D){var de=Xe.resolve(Re.path);return ce.load({method:"get",url:de.url,request:{range:ge.mediaRange,responseType:"arraybuffer"},onload:function(He){var Tt=oe.getSamplesInfo(He.target.response),st=new Blob([He.target.response.slice(Tt.sampleList[0].offset,Tt.sampleList[0].offset+Tt.sampleList[0].size)],{type:"image/jpeg"}),ot=window.URL.createObjectURL(st);Ue.push({start:ge.mediaStartTime,end:ge.mediaStartTime+ge.duration,url:ot}),G&&G(ot)}}),!0}})}})(Yt,dt,St)}):(Yt.startNumber=dt.startNumber,Yt.segmentDuration=dt.segmentDuration,Yt.timescale=dt.timescale,Yt.templateUrl=function(St){var kt=At.isRelative(St.media)?At.resolve(St.media,Xe.resolve(St.path).url):St.media;return kt?(0,m.Aj)(kt,St.id):""}(dt)),Yt.tilesHor>0&&Yt.tilesVert>0&&(Yt.widthPerTile=Yt.width/Yt.tilesHor,Yt.heightPerTile=Yt.height/Yt.tilesVert,$.push(Yt))}function et(){$=[],se=-1,R=null}return Y={getTracks:function(){return $},addTracks:function(){if(Ie&&be&&(R=be.getMediaInfoForType(Ie,k.Z.IMAGE))){var dt=be.getVoRepresentations(R);dt&&dt.length>0&&dt.forEach(function(rn){(rn.segmentInfoType===C.Z.SEGMENT_TEMPLATE&&rn.segmentDuration>0&&rn.media||rn.segmentInfoType===C.Z.SEGMENT_TIMELINE)&&Ne(rn),rn.segmentInfoType===C.Z.SEGMENT_BASE&&Ne(rn,!0)}),$.length>0&&$.sort(function(rn,Yt){return rn.bitrate-Yt.bitrate})}},reset:et,setTrackByIndex:function(dt){$&&$.length!==0&&(dt>=$.length&&(dt=$.length-1),se=dt)},getCurrentTrack:function(){return se<0?null:$[se]},getCurrentTrackIndex:function(){return se},getThumbnailRequestForTime:function(dt){for(var rn,Yt=be.getVoRepresentations(R),St=0;St<Yt.length;St++)if($[se].id===Yt[St].id){rn=Yt[St];break}return Q.getSegmentRequestForTime(R,rn,dt)}},et(),ce=(0,U.Z)(ye).create({}),oe=(0,T.Z)(ye).getInstance(),X=(0,_.Z)(ye).create({events:We,eventBus:ft,streamInfo:Ie,timelineConverter:Ge,dashConstants:ut,dashMetrics:Z.dashMetrics,segmentBaseController:Z.segmentBaseController,type:k.Z.IMAGE}),(Q=(0,M.Z)(ye).create({streamInfo:Ie,type:k.Z.IMAGE,timelineConverter:Ge,segmentsController:X,baseURLController:Xe,debug:at,eventBus:ft,events:We,dashConstants:ut,urlUtils:At})).initialize(!!be&&be.getIsDynamic()),Y}x.__dashjs_factory_name="ThumbnailTracks",p.Z=E.Z.getClassFactory(x)},7417:function(b,p,w){var k=w(6398),C=w(8260),E=w(5448),y=w(6934),P=w(9597);function m(){var T,U,M=this.context;function _(Z){if(!Z)return null;Z.fileStart===void 0&&(Z.fileStart=0);var Y=y.parseBuffer(Z),$=(0,C.Z)(M).create();return $.setData(Y),$}function I(Z,Y){return Z[Y+3]>>>0|Z[Y+2]<<8>>>0|Z[Y+1]<<16>>>0|Z[Y]<<24>>>0}function x(Z,Y){return String.fromCharCode(Z[Y++])+String.fromCharCode(Z[Y++])+String.fromCharCode(Z[Y++])+String.fromCharCode(Z[Y])}return U={parse:_,findLastTopIsoBoxCompleted:function(Z,Y,$){if($===void 0&&($=0),!Y||$+8>=Y.byteLength)return new P.Z(0,!1);for(var Q,se=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,R=0;$<se.byteLength;){var X=I(se,$),ce=x(se,$+4);if(X===0)break;$+X<=se.byteLength&&(Z.indexOf(ce)>=0?Q=new P.Z($,!0,X):R=$+X),$+=X}return Q||new P.Z(R,!1)},getMediaTimescaleFromMoov:function(Z){var Y=_(Z),$=Y?Y.getBox("mdhd"):void 0;return $?$.timescale:NaN},getSamplesInfo:function(Z){if(!Z||Z.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var Y,$,Q,se,R,X,ce,oe,ye,be,Xe,Ie,Ge,at,ft,We,ut=_(Z),At=ut.getBoxes("moof"),Ne=ut.getBoxes("mfhd");ft=ut.getBoxes("moof").length,at=Ne[Ne.length-1].sequence_number,$=0,R=[];var et=-1,dt=-1;for(be=0;be<At.length;be++){var rn=At[be],Yt=rn.getChildBoxes("traf");for(oe=0;oe<Yt.length;oe++){var St=Yt[oe],kt=St.getChildBox("tfhd"),Re=St.getChildBox("tfdt");se=Re.baseMediaDecodeTime;var ne=St.getChildBoxes("trun"),Ue=St.getChildBoxes("subs");for(ye=0;ye<ne.length;ye++){var L=ne[ye];for($=L.sample_count,Ge=(kt.base_data_offset||0)+(L.data_offset||0),ce=0;ce<$;ce++){Y=(X=L.samples[ce]).sample_duration!==void 0?X.sample_duration:kt.default_sample_duration,Q=X.sample_size!==void 0?X.sample_size:kt.default_sample_size;var D={dts:se,cts:se+(X.sample_composition_time_offset!==void 0?X.sample_composition_time_offset:0),duration:Y,offset:rn.offset+Ge,size:Q,subSizes:[Q]};if(Ue)for(Xe=0;Xe<Ue.length;Xe++){var G=Ue[Xe];if(et<G.entry_count-1&&ce>dt&&(et++,dt+=G.entries[et].sample_delta),ce==dt){D.subSizes=[];var K=G.entries[et];for(Ie=0;Ie<K.subsample_count;Ie++)D.subSizes.push(K.subsamples[Ie].subsample_size)}}R.push(D),Ge+=Q,se+=Y}}We=se-Re.baseMediaDecodeTime}}return{sampleList:R,lastSequenceNumber:at,totalDuration:We,numSequences:ft}},findInitRange:function(Z){var Y=null,$=_(Z);if(!$)return Y;var Q=$.getBox("ftyp"),se=$.getBox("moov");return T.debug("Searching for initialization."),se&&se.isComplete&&(Y=(Q?Q.offset:se.offset)+"-"+(se.offset+se.size-1),T.debug("Found the initialization.  Range: "+Y)),Y},parsePayload:function(Z,Y,$){if($===void 0&&($=0),!Y||$+8>=Y.byteLength)return new P.Z(0,!1);for(var Q,se=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,R=0;$<se.byteLength;){var X=I(se,$),ce=x(se,$+4);if(X===0)break;$+X<=se.byteLength&&(Z.indexOf(ce)>=0?Q=new P.Z($,!0,X,ce):R=$+X),$+=X}return Q||new P.Z(R,!1)}},T=(0,k.Z)(M).getInstance().getLogger(U),U}m.__dashjs_factory_name="BoxParser",p.Z=E.Z.getSingletonFactory(m)},1715:function(b,p,w){w.d(p,{B:function(){return P}});var k=w(5448),C=w(7803),E=w(3393),y=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function P(){var T="ManagedMediaSource"in window,U="WebKitMediaSource"in window,M="MediaSource"in window;return T||U||M}function m(){var T,U,M;return T={setConfig:function(_){_&&_.settings&&(U=_.settings)},supportsMediaSource:P,supportsEncryptedMedia:function(){return M},supportsCodec:function(_,I){return I!==E.Z.AUDIO&&I!==E.Z.VIDEO?Promise.resolve(!0):function(x,Z){return U.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(x.codec&&Z===E.Z.AUDIO||Z===E.Z.VIDEO&&x.codec&&x.width&&x.height&&x.bitrate&&x.framerate)}(_,I)?function(x,Z){return new Promise(function(Y){if(x&&x.codec){var $={type:"media-source"};$[Z]={},$[Z].contentType=x.codec,$[Z].width=x.width,$[Z].height=x.height,$[Z].bitrate=parseInt(x.bitrate),$[Z].framerate=parseFloat(x.framerate),navigator.mediaCapabilities.decodingInfo($).then(function(Q){Y(Q.supported)}).catch(function(){Y(!1)})}else Y(!1)})}(_,I):function(x){return new Promise(function(Z){if(x&&x.codec){var Y=x.codec;x.width&&x.height&&(Y+=';width="'+x.width+'";height="'+x.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(Y)||"MediaSource"in window&&MediaSource.isTypeSupported(Y)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(Y)?Z(!0):Z(!1)}else Z(!1)})}(_)},setEncryptedMediaSupported:function(_){M=_},supportsEssentialProperty:function(_){try{return C.Y.indexOf(_.schemeIdUri)!==-1||E.Z.FONT_DOWNLOAD_DVB_SCHEME===_.schemeIdUri}catch(I){return!0}},codecRootCompatibleWithCodec:function(_,I){for(var x,Z=_.split(".")[0],Y=I.indexOf(Z)===0,$=0;$<y.length;$++)if(y[$].codec===Z){x=y[$];break}return x?Y||x.compatibleCodecs.some(function(Q){return I.indexOf(Q)===0}):Y}},M=!1,T}m.__dashjs_factory_name="Capabilities",p.Z=k.Z.getSingletonFactory(m)},2295:function(b,p,w){var k=w(5448),C=w(3106);function E(){return{customTimeRangeArray:[],length:0,add:function(y,P){var m;for(m=0;m<this.customTimeRangeArray.length&&y>this.customTimeRangeArray[m].start;m++);for(this.customTimeRangeArray.splice(m,0,{start:y,end:P}),m=0;m<this.customTimeRangeArray.length-1;m++)this.mergeRanges(m,m+1)&&m--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(y,P){for(var m=0;m<this.customTimeRangeArray.length;m++)if(y<=this.customTimeRangeArray[m].start&&P>=this.customTimeRangeArray[m].end)this.customTimeRangeArray.splice(m,1),m--;else{if(y>this.customTimeRangeArray[m].start&&P<this.customTimeRangeArray[m].end){this.customTimeRangeArray.splice(m+1,0,{start:P,end:this.customTimeRangeArray[m].end}),this.customTimeRangeArray[m].end=y;break}y>this.customTimeRangeArray[m].start&&y<this.customTimeRangeArray[m].end?this.customTimeRangeArray[m].end=y:P>this.customTimeRangeArray[m].start&&P<this.customTimeRangeArray[m].end&&(this.customTimeRangeArray[m].start=P)}this.length=this.customTimeRangeArray.length},mergeRanges:function(y,P){var m=this.customTimeRangeArray[y],T=this.customTimeRangeArray[P];return m.start<=T.start&&T.start<=m.end&&m.end<=T.end?(m.end=T.end,this.customTimeRangeArray.splice(P,1),!0):T.start<=m.start&&m.start<=T.end&&T.end<=m.end?(m.start=T.start,this.customTimeRangeArray.splice(P,1),!0):T.start<=m.start&&m.start<=T.end&&m.end<=T.end?(this.customTimeRangeArray.splice(y,1),!0):m.start<=T.start&&T.start<=m.end&&T.end<=m.end&&(this.customTimeRangeArray.splice(P,1),!0)},start:function(y){return(0,C.SE)(y),y>=this.customTimeRangeArray.length||y<0?NaN:this.customTimeRangeArray[y].start},end:function(y){return(0,C.SE)(y),y>=this.customTimeRangeArray.length||y<0?NaN:this.customTimeRangeArray[y].end}}}E.__dashjs_factory_name="CustomTimeRanges",p.Z=k.Z.getClassFactory(E)},5:function(b,p,w){var k=w(5448);function C(){var E,y=/^[a-z][a-z0-9+\-_.]*:/i,P=/^https?:\/\//i,m=/^https:\/\//i,T=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,U=function(Q,se){try{return new window.URL(Q,se).toString()}catch(R){return Q}},M=function(Q,se){var R=_;if(!se||!Z(Q))return Q;Y(Q)&&(R=I),$(Q)&&(R=x);var X=R(se),ce=X.charAt(X.length-1)!=="/"&&Q.charAt(0)!=="/"?"/":"";return[X,Q].join(ce)};function _(Q){var se=Q.indexOf("/"),R=Q.lastIndexOf("/");return se!==-1?R===se+1?Q:(Q.indexOf("?")!==-1&&(Q=Q.substring(0,Q.indexOf("?"))),Q.substring(0,R+1)):""}function I(Q){var se=Q.match(T);return se?se[1]:""}function x(Q){var se=Q.match(y);return se?se[0]:""}function Z(Q){return!y.test(Q)}function Y(Q){return Z(Q)&&Q.charAt(0)==="/"}function $(Q){return Q.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),E=U}catch(Q){}finally{E=E||M}}(),{parseBaseUrl:_,parseOrigin:I,parseScheme:x,isRelative:Z,isPathAbsolute:Y,isSchemeRelative:$,isHTTPURL:function(Q){return P.test(Q)},isHTTPS:function(Q){return m.test(Q)},removeHostname:function(Q){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(Q)[2].substring(1)},resolve:function(Q,se){return E(Q,se)}}}C.__dashjs_factory_name="DefaultURLUtils",p.Z=k.Z.getSingletonFactory(C)},8260:function(b,p,w){var k=w(2839),C=w(5448);function E(){var y;function P(T){var U=[];if(!T||!y||typeof y.fetchAll!="function")return U;for(var M,_=y.fetchAll(T),I=0,x=_.length;I<x;I++)(M=m(_[I]))&&U.push(M);return U}function m(T){if(!T)return null;var U=new k.Z(T);return T.hasOwnProperty("_incomplete")&&(U.isComplete=!T._incomplete),U}return{getBox:function(T){return T&&y&&y.boxes&&y.boxes.length!==0&&typeof y.fetch=="function"?m(y.fetch(T)):null},getBoxes:P,setData:function(T){y=T},getLastBox:function(){if(!y||!y.boxes||!y.boxes.length)return null;var T=P(y.boxes[y.boxes.length-1].type);return T.length>0?T[T.length-1]:null}}}E.__dashjs_factory_name="IsoFile",p.Z=C.Z.getClassFactory(E)},7473:function(b,p,w){w.d(p,{k:function(){return C}});var k=w(5448);function C(y,P){var m={url:y.url,method:y.method,headers:Object.assign({},y.headers),credentials:y.withCredentials?"include":void 0,range:y.request.range};return Promise.resolve(P.modifyRequest(m)).then(function(){return Object.assign(y,m,{withCredentials:m.credentials==="include"})})}function E(){return{modifyRequest:null,modifyRequestURL:function(y){return y},modifyRequestHeader:function(y,P){return P.url,y}}}E.__dashjs_factory_name="RequestModifier",p.Z=k.Z.getSingletonFactory(E)},3106:function(b,p,w){w.d(p,{PS:function(){return E},SE:function(){return y}});var k=w(3393);function C(P){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},C(P)}function E(P,m){if(C(P)!==m)throw k.Z.BAD_ARGUMENT_ERROR}function y(P){if(P===null||isNaN(P)||P%1!=0)throw k.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(b,p,w){var k=w(5448),C=w(5);function E(){var P,m=[],T=this.context;function U(M,_,I){var x=function(Z){var Y;for(Y=0;Y<m.length;Y++)if(m[Y].regex.test(Z))return m[Y].utils;return P}(I||_);return x&&typeof x[M]=="function"?x[M](_,I):P[M](_,I)}return P=(0,C.Z)(T).getInstance(),{registerUrlRegex:function(M,_){m.push({regex:M,utils:_})},parseBaseUrl:function(M){return U("parseBaseUrl",M)},parseOrigin:function(M){return U("parseOrigin",M)},parseScheme:function(M){return U("parseScheme",M)},isRelative:function(M){return U("isRelative",M)},isPathAbsolute:function(M){return U("isPathAbsolute",M)},isSchemeRelative:function(M){return U("isSchemeRelative",M)},isHTTPURL:function(M){return U("isHTTPURL",M)},isHTTPS:function(M){return U("isHTTPS",M)},removeHostname:function(M){return U("removeHostname",M)},resolve:function(M,_){return U("resolve",M,_)}}}E.__dashjs_factory_name="URLUtils";var y=k.Z.getSingletonFactory(E);p.Z=y},5459:function(b,p){p.Z=function w(k,C,E){(function(y,P){if(!(y instanceof P))throw new TypeError("Cannot call a class as a function")})(this,w),this.code=k||null,this.message=C||null,this.data=E||null}},3186:function(b,p,w){var k=w(7855);function C(y,P){for(var m=0;m<P.length;m++){var T=P[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(y,T.key,T)}}var E=function(){function y(T){(function(U,M){if(!(U instanceof M))throw new TypeError("Cannot call a class as a function")})(this,y),this.action=y.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=T||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var P,m;return P=y,(m=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===k.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(T){this.type=T&&T.init?k.w.INIT_SEGMENT_TYPE:k.w.MEDIA_SEGMENT_TYPE,this.url=T&&T.url?T.url:null,this.range=T&&T.range?T.range.start+"-"+T.range.end:null,this.mediaType=T&&T.mediaType?T.mediaType:null}}])&&C(P.prototype,m),y}();E.ACTION_DOWNLOAD="download",E.ACTION_COMPLETE="complete",p.Z=E},2839:function(b,p){function w(C,E){for(var y=0;y<E.length;y++){var P=E[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}var k=function(){function C(P){if(function(x,Z){if(!(x instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,C),this.offset=P._offset,this.type=P.type,this.size=P.size,this.boxes=[],P.boxes)for(var m=0;m<P.boxes.length;m++)this.boxes.push(new C(P.boxes[m]));switch(this.isComplete=!0,P.type){case"sidx":if(this.timescale=P.timescale,this.earliest_presentation_time=P.earliest_presentation_time,this.first_offset=P.first_offset,this.references=P.references,P.references){this.references=[];for(var T=0;T<P.references.length;T++){var U={reference_type:P.references[T].reference_type,referenced_size:P.references[T].referenced_size,subsegment_duration:P.references[T].subsegment_duration};this.references.push(U)}}break;case"emsg":this.id=P.id,this.version=P.version===1?1:0,this.value=P.value,this.timescale=P.timescale,this.scheme_id_uri=P.scheme_id_uri,this.presentation_time_delta=P.version===1?P.presentation_time:P.presentation_time_delta,this.event_duration=P.event_duration,this.message_data=P.message_data;break;case"mdhd":this.timescale=P.timescale;break;case"mfhd":this.sequence_number=P.sequence_number;break;case"subs":this.entry_count=P.entry_count,this.entries=P.entries;break;case"tfhd":this.base_data_offset=P.base_data_offset,this.sample_description_index=P.sample_description_index,this.default_sample_duration=P.default_sample_duration,this.default_sample_size=P.default_sample_size,this.default_sample_flags=P.default_sample_flags,this.flags=P.flags;break;case"tfdt":this.version=P.version,this.baseMediaDecodeTime=P.baseMediaDecodeTime,this.flags=P.flags;break;case"trun":if(this.sample_count=P.sample_count,this.first_sample_flags=P.first_sample_flags,this.data_offset=P.data_offset,this.flags=P.flags,this.samples=P.samples,P.samples){this.samples=[];for(var M=0,_=P.samples.length;M<_;M++){var I={sample_size:P.samples[M].sample_size,sample_duration:P.samples[M].sample_duration,sample_composition_time_offset:P.samples[M].sample_composition_time_offset};this.samples.push(I)}}break;case"prft":this.version=P.version,this.reference_track_ID=P.reference_track_ID,this.ntp_timestamp_sec=P.ntp_timestamp_sec,this.ntp_timestamp_frac=P.ntp_timestamp_frac,this.media_time=P.media_time,this.flags=P.flags}}var E,y;return E=C,(y=[{key:"getChildBox",value:function(P){for(var m=0;m<this.boxes.length;m++)if(this.boxes[m].type===P)return this.boxes[m]}},{key:"getChildBoxes",value:function(P){for(var m=[],T=0;T<this.boxes.length;T++)this.boxes[T].type===P&&m.push(this.boxes[T]);return m}}])&&w(E.prototype,y),C}();p.Z=k},9597:function(b,p){p.Z=function w(k,C,E){(function(y,P){if(!(y instanceof P))throw new TypeError("Cannot call a class as a function")})(this,w),this.lastCompletedOffset=k,this.found=C,this.size=E}},2128:function(b,p){p.Z=function w(){(function(k,C){if(!(k instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(b,p,w){function k(y,P){if(!(y instanceof P))throw new TypeError("Cannot call a class as a function")}w.d(p,{O:function(){return E},w:function(){return C}});var C=function y(){k(this,y),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},E=function y(){k(this,y),this.s=null,this.d=null,this.b=[]};C.GET="GET",C.HEAD="HEAD",C.MPD_TYPE="MPD",C.XLINK_EXPANSION_TYPE="XLinkExpansion",C.INIT_SEGMENT_TYPE="InitializationSegment",C.INDEX_SEGMENT_TYPE="IndexSegment",C.MEDIA_SEGMENT_TYPE="MediaSegment",C.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",C.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",C.DVB_REPORTING_TYPE="DVBReporting",C.LICENSE="license",C.CONTENT_STEERING_TYPE="ContentSteering",C.OTHER_TYPE="other"},3039:function(b,p){function w(C,E){return function(y,P){for(var m,T,U,M=k(y,"tag"),_=k(P==null?"*":P,"range"),I=[],x=-1;++x<_.length;)if(m=_[x].toLowerCase(),E||m!=="*"){for(T=-1,U=[];++T<M.length;)if(C(M[T].toLowerCase(),m)){if(!E)return M[T];I.push(M[T])}else U.push(M[T]);M=U}return E?I:void 0}}function k(C,E){var y=C&&typeof C=="string"?[C]:C;if(!y||typeof y!="object"||!("length"in y))throw new Error("Invalid "+E+" `"+y+"`, expected non-empty string");return y}p.basicFilter=w(function(C,E){return E==="*"||C===E||C.indexOf(E+"-")>-1},!0),p.extendedFilter=w(function(C,E){var y=C.split("-"),P=E.split("-"),m=0,T=0;if(P[T]!=="*"&&y[m]!==P[T])return!1;for(m++,T++;T<P.length;)if(P[T]!=="*"){if(!y[m])return!1;if(y[m]!==P[T]){if(y[m].length===1)return!1;m++}else m++,T++}else T++;return!0},!0),p.lookup=w(function(C,E){for(var y,P=E;;){if(P==="*"||C===P)return!0;if((y=P.lastIndexOf("-"))<0)return!1;P.charAt(y-2)==="-"&&(y-=2),P=P.slice(0,y)}})},3973:function(b,p,w){b.exports=w(3854)},3854:function(b,p,w){var k=w(2415),C=w(3039),E=w(7778),y=w(5813),P=w(3165),m=w(9460);b.exports=function(Y,$){var Q,se=$||{},R=k.parse(String(Y||"").toLowerCase(),se),X=k.stringify(R),ce=-1;if(!X)return X;for(;++ce<E.length;)C.extendedFilter(X,E[ce].from).length&&(_(R,E[ce].from,E[ce].to),X=k.stringify(R));for(ce=-1;++ce<y.length;)I(R,y[ce].from.field,y[ce].from.value)&&x(R,y[ce].to.field,y[ce].to.value);for(X=k.stringify(Object.assign({},R,M)),ce=-1;++ce<P.length;)X===P[ce]&&(_(R,P[ce],P[ce].split("-").slice(0,-1).join("-")),X=k.stringify(Object.assign({},R,M)));if(R.extensions.sort(Z),se.warning)for(Q in m)T.call(m[Q],R[Q])&&se.warning("Deprecated "+Q+" `"+R[Q]+"`, expected one of `"+m[Q][R[Q]].join("`, `")+"`",null,7);return R.script&&(R.script=R.script.charAt(0).toUpperCase()+R.script.slice(1)),R.region&&(R.region=R.region.toUpperCase()),k.stringify(R)};var T={}.hasOwnProperty,U=new Intl.Collator,M={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function _(Y,$,Q){var se,R=k.parse($),X=k.parse(Q),ce=[];for(se in R)R[se]&&R[se].length&&I(Y,se,R[se])&&ce.push(se);for(se in X)X[se]&&X[se].length&&(ce.indexOf(se)>-1||!Y[se]||!Y[se].length)&&x(Y,se,X[se])}function I(Y,$,Q){var se,R,X,ce,oe=!1;if(Q){if(R=se=Y[$],se&&typeof se=="object")for(R=[],X=-1;++X<se.length;)ce=se[X],Q.indexOf(ce)<0?R.push(ce):oe=!0;else se===Q&&(R=null,oe=!0);Y[$]=R}return oe}function x(Y,$,Q){var se,R,X,ce=Y[$];if(ce&&typeof ce=="object")for(se=[].concat(Q),R=-1;++R<se.length;)X=se[R],ce.indexOf(X)<0&&ce.push(X);else Y[$]=Q}function Z(Y,$){return U.compare(Y.singleton,$.singleton)}},2415:function(b,p,w){p.parse=w(6903),p.stringify=w(6713)},6903:function(b,p,w){var k=w(2219),C=w(3516),E=w(395),y=w(858),P=w(8589);b.exports=function T(U,M){var _,I,x,Z=M||{},Y={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},$=String(U),Q=$.toLowerCase(),se=0;if(U==null)throw new Error("Expected string, got `"+U+"`");if(m.call(P,Q))return(Z.normalize==null||Z.normalize)&&P[Q]?T(P[Q]):(Y[y.indexOf(Q)===-1?"irregular":"regular"]=$,Y);for(;C(Q.charCodeAt(se))&&se<9;)se++;if(se>1&&se<9){if(Y.language=$.slice(0,se),se<4)for(I=0;Q.charCodeAt(se)===45&&C(Q.charCodeAt(se+1))&&C(Q.charCodeAt(se+2))&&C(Q.charCodeAt(se+3))&&!C(Q.charCodeAt(se+4));){if(I>2)return R(se,3,"Too many extended language subtags, expected at most 3 subtags");Y.extendedLanguageSubtags.push($.slice(se+1,se+4)),se+=4,I++}for(Q.charCodeAt(se)===45&&C(Q.charCodeAt(se+1))&&C(Q.charCodeAt(se+2))&&C(Q.charCodeAt(se+3))&&C(Q.charCodeAt(se+4))&&!C(Q.charCodeAt(se+5))&&(Y.script=$.slice(se+1,se+5),se+=5),Q.charCodeAt(se)===45&&(C(Q.charCodeAt(se+1))&&C(Q.charCodeAt(se+2))&&!C(Q.charCodeAt(se+3))?(Y.region=$.slice(se+1,se+3),se+=3):E(Q.charCodeAt(se+1))&&E(Q.charCodeAt(se+2))&&E(Q.charCodeAt(se+3))&&!E(Q.charCodeAt(se+4))&&(Y.region=$.slice(se+1,se+4),se+=4));Q.charCodeAt(se)===45;){for(x=_=se+1;k(Q.charCodeAt(x));){if(x-_>7)return R(x,1,"Too long variant, expected at most 8 characters");x++}if(!(x-_>4||x-_>3&&E(Q.charCodeAt(_))))break;Y.variants.push($.slice(_,x)),se=x}for(;Q.charCodeAt(se)===45&&Q.charCodeAt(se+1)!==120&&k(Q.charCodeAt(se+1))&&Q.charCodeAt(se+2)===45&&k(Q.charCodeAt(se+3));){for(x=se+2,I=0;Q.charCodeAt(x)===45&&k(Q.charCodeAt(x+1))&&k(Q.charCodeAt(x+2));)for(x=(_=x+1)+2,I++;k(Q.charCodeAt(x));){if(x-_>7)return R(x,2,"Too long extension, expected at most 8 characters");x++}if(!I)return R(x,4,"Empty extension, extensions must have at least 2 characters of content");Y.extensions.push({singleton:$.charAt(se+1),extensions:$.slice(se+3,x).split("-")}),se=x}}else se=0;if(se===0&&Q.charCodeAt(se)===120||Q.charCodeAt(se)===45&&Q.charCodeAt(se+1)===120)for(x=se=se?se+2:1;Q.charCodeAt(x)===45&&k(Q.charCodeAt(x+1));){for(x=_=se+1;k(Q.charCodeAt(x));){if(x-_>7)return R(x,5,"Too long private-use area, expected at most 8 characters");x++}Y.privateuse.push($.slice(se+1,x)),se=x}return se!==$.length?R(se,6,"Found superfluous content after tag"):Y;function R(X,ce,oe){return Z.warning&&Z.warning(oe,ce,X),Z.forgiving?Y:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var m={}.hasOwnProperty},6713:function(b){b.exports=function(p){var w,k,C,E=p||{},y=[];if(E.irregular||E.regular)return E.irregular||E.regular;if(E.language)for(y=y.concat(E.language,E.extendedLanguageSubtags||[],E.script||[],E.region||[],E.variants||[]),w=E.extensions||[],k=-1;++k<w.length;)(C=w[k]).singleton&&C.extensions&&C.extensions.length&&(y=y.concat(C.singleton,C.extensions));return E.privateuse&&E.privateuse.length&&(y=y.concat("x",E.privateuse)),y.join("-")}},1549:function(b,p,w){var k=w(6693),C=w(2165),E=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;p.Buffer=m,p.SlowBuffer=function(L){return+L!=L&&(L=0),m.alloc(+L)},p.INSPECT_MAX_BYTES=50;var y=2147483647;function P(L){if(L>y)throw new RangeError('The value "'+L+'" is invalid for option "size"');var D=new Uint8Array(L);return Object.setPrototypeOf(D,m.prototype),D}function m(L,D,G){if(typeof L=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return M(L)}return T(L,D,G)}function T(L,D,G){if(typeof L=="string")return function(de,He){if(typeof He=="string"&&He!==""||(He="utf8"),!m.isEncoding(He))throw new TypeError("Unknown encoding: "+He);var Tt=0|Z(de,He),st=P(Tt),ot=st.write(de,He);return ot!==Tt&&(st=st.slice(0,ot)),st}(L,D);if(ArrayBuffer.isView(L))return function(de){if(Re(de,Uint8Array)){var He=new Uint8Array(de);return I(He.buffer,He.byteOffset,He.byteLength)}return _(de)}(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(Re(L,ArrayBuffer)||L&&Re(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Re(L,SharedArrayBuffer)||L&&Re(L.buffer,SharedArrayBuffer)))return I(L,D,G);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var K=L.valueOf&&L.valueOf();if(K!=null&&K!==L)return m.from(K,D,G);var ge=function(de){if(m.isBuffer(de)){var He=0|x(de.length),Tt=P(He);return Tt.length===0||de.copy(Tt,0,0,He),Tt}return de.length!==void 0?typeof de.length!="number"||ne(de.length)?P(0):_(de):de.type==="Buffer"&&Array.isArray(de.data)?_(de.data):void 0}(L);if(ge)return ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return m.from(L[Symbol.toPrimitive]("string"),D,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}function U(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function M(L){return U(L),P(L<0?0:0|x(L))}function _(L){for(var D=L.length<0?0:0|x(L.length),G=P(D),K=0;K<D;K+=1)G[K]=255&L[K];return G}function I(L,D,G){if(D<0||L.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<D+(G||0))throw new RangeError('"length" is outside of buffer bounds');var K;return K=D===void 0&&G===void 0?new Uint8Array(L):G===void 0?new Uint8Array(L,D):new Uint8Array(L,D,G),Object.setPrototypeOf(K,m.prototype),K}function x(L){if(L>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return 0|L}function Z(L,D){if(m.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||Re(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);var G=L.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&G===0)return 0;for(var ge=!1;;)switch(D){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return Yt(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return St(L).length;default:if(ge)return K?-1:Yt(L).length;D=(""+D).toLowerCase(),ge=!0}}function Y(L,D,G){var K=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(D>>>=0))return"";for(L||(L="utf8");;)switch(L){case"hex":return ft(this,D,G);case"utf8":case"utf-8":return Xe(this,D,G);case"ascii":return Ge(this,D,G);case"latin1":case"binary":return at(this,D,G);case"base64":return be(this,D,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return We(this,D,G);default:if(K)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),K=!0}}function $(L,D,G){var K=L[D];L[D]=L[G],L[G]=K}function Q(L,D,G,K,ge){if(L.length===0)return-1;if(typeof G=="string"?(K=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),ne(G=+G)&&(G=ge?0:L.length-1),G<0&&(G=L.length+G),G>=L.length){if(ge)return-1;G=L.length-1}else if(G<0){if(!ge)return-1;G=0}if(typeof D=="string"&&(D=m.from(D,K)),m.isBuffer(D))return D.length===0?-1:se(L,D,G,K,ge);if(typeof D=="number")return D&=255,typeof Uint8Array.prototype.indexOf=="function"?ge?Uint8Array.prototype.indexOf.call(L,D,G):Uint8Array.prototype.lastIndexOf.call(L,D,G):se(L,[D],G,K,ge);throw new TypeError("val must be string, number or Buffer")}function se(L,D,G,K,ge){var de,He=1,Tt=L.length,st=D.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(L.length<2||D.length<2)return-1;He=2,Tt/=2,st/=2,G/=2}function ot(Et,Mt){return He===1?Et[Mt]:Et.readUInt16BE(Mt*He)}if(ge){var tt=-1;for(de=G;de<Tt;de++)if(ot(L,de)===ot(D,tt===-1?0:de-tt)){if(tt===-1&&(tt=de),de-tt+1===st)return tt*He}else tt!==-1&&(de-=de-tt),tt=-1}else for(G+st>Tt&&(G=Tt-st),de=G;de>=0;de--){for(var ht=!0,yt=0;yt<st;yt++)if(ot(L,de+yt)!==ot(D,yt)){ht=!1;break}if(ht)return de}return-1}function R(L,D,G,K){G=Number(G)||0;var ge=L.length-G;K?(K=Number(K))>ge&&(K=ge):K=ge;var de=D.length;K>de/2&&(K=de/2);for(var He=0;He<K;++He){var Tt=parseInt(D.substr(2*He,2),16);if(ne(Tt))return He;L[G+He]=Tt}return He}function X(L,D,G,K){return kt(Yt(D,L.length-G),L,G,K)}function ce(L,D,G,K){return kt(function(ge){for(var de=[],He=0;He<ge.length;++He)de.push(255&ge.charCodeAt(He));return de}(D),L,G,K)}function oe(L,D,G,K){return kt(St(D),L,G,K)}function ye(L,D,G,K){return kt(function(ge,de){for(var He,Tt,st,ot=[],tt=0;tt<ge.length&&!((de-=2)<0);++tt)Tt=(He=ge.charCodeAt(tt))>>8,st=He%256,ot.push(st),ot.push(Tt);return ot}(D,L.length-G),L,G,K)}function be(L,D,G){return D===0&&G===L.length?k.fromByteArray(L):k.fromByteArray(L.slice(D,G))}function Xe(L,D,G){G=Math.min(L.length,G);for(var K=[],ge=D;ge<G;){var de,He,Tt,st,ot=L[ge],tt=null,ht=ot>239?4:ot>223?3:ot>191?2:1;if(ge+ht<=G)switch(ht){case 1:ot<128&&(tt=ot);break;case 2:(192&(de=L[ge+1]))==128&&(st=(31&ot)<<6|63&de)>127&&(tt=st);break;case 3:de=L[ge+1],He=L[ge+2],(192&de)==128&&(192&He)==128&&(st=(15&ot)<<12|(63&de)<<6|63&He)>2047&&(st<55296||st>57343)&&(tt=st);break;case 4:de=L[ge+1],He=L[ge+2],Tt=L[ge+3],(192&de)==128&&(192&He)==128&&(192&Tt)==128&&(st=(15&ot)<<18|(63&de)<<12|(63&He)<<6|63&Tt)>65535&&st<1114112&&(tt=st)}tt===null?(tt=65533,ht=1):tt>65535&&(tt-=65536,K.push(tt>>>10&1023|55296),tt=56320|1023&tt),K.push(tt),ge+=ht}return function(yt){var Et=yt.length;if(Et<=Ie)return String.fromCharCode.apply(String,yt);for(var Mt="",_n=0;_n<Et;)Mt+=String.fromCharCode.apply(String,yt.slice(_n,_n+=Ie));return Mt}(K)}p.kMaxLength=y,m.TYPED_ARRAY_SUPPORT=function(){try{var L=new Uint8Array(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,Uint8Array.prototype),Object.setPrototypeOf(L,D),L.foo()===42}catch(G){return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(L,D,G){return T(L,D,G)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(L,D,G){return function(K,ge,de){return U(K),K<=0?P(K):ge!==void 0?typeof de=="string"?P(K).fill(ge,de):P(K).fill(ge):P(K)}(L,D,G)},m.allocUnsafe=function(L){return M(L)},m.allocUnsafeSlow=function(L){return M(L)},m.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==m.prototype},m.compare=function(L,D){if(Re(L,Uint8Array)&&(L=m.from(L,L.offset,L.byteLength)),Re(D,Uint8Array)&&(D=m.from(D,D.offset,D.byteLength)),!m.isBuffer(L)||!m.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===D)return 0;for(var G=L.length,K=D.length,ge=0,de=Math.min(G,K);ge<de;++ge)if(L[ge]!==D[ge]){G=L[ge],K=D[ge];break}return G<K?-1:K<G?1:0},m.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(L,D){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return m.alloc(0);var G;if(D===void 0)for(D=0,G=0;G<L.length;++G)D+=L[G].length;var K=m.allocUnsafe(D),ge=0;for(G=0;G<L.length;++G){var de=L[G];if(Re(de,Uint8Array))ge+de.length>K.length?m.from(de).copy(K,ge):Uint8Array.prototype.set.call(K,de,ge);else{if(!m.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(K,ge)}ge+=de.length}return K},m.byteLength=Z,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var L=this.length;if(L%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<L;D+=2)$(this,D,D+1);return this},m.prototype.swap32=function(){var L=this.length;if(L%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<L;D+=4)$(this,D,D+3),$(this,D+1,D+2);return this},m.prototype.swap64=function(){var L=this.length;if(L%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<L;D+=8)$(this,D,D+7),$(this,D+1,D+6),$(this,D+2,D+5),$(this,D+3,D+4);return this},m.prototype.toString=function(){var L=this.length;return L===0?"":arguments.length===0?Xe(this,0,L):Y.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(L){if(!m.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L||m.compare(this,L)===0},m.prototype.inspect=function(){var L="",D=p.INSPECT_MAX_BYTES;return L=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(L+=" ... "),"<Buffer "+L+">"},E&&(m.prototype[E]=m.prototype.inspect),m.prototype.compare=function(L,D,G,K,ge){if(Re(L,Uint8Array)&&(L=m.from(L,L.offset,L.byteLength)),!m.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(D===void 0&&(D=0),G===void 0&&(G=L?L.length:0),K===void 0&&(K=0),ge===void 0&&(ge=this.length),D<0||G>L.length||K<0||ge>this.length)throw new RangeError("out of range index");if(K>=ge&&D>=G)return 0;if(K>=ge)return-1;if(D>=G)return 1;if(this===L)return 0;for(var de=(ge>>>=0)-(K>>>=0),He=(G>>>=0)-(D>>>=0),Tt=Math.min(de,He),st=this.slice(K,ge),ot=L.slice(D,G),tt=0;tt<Tt;++tt)if(st[tt]!==ot[tt]){de=st[tt],He=ot[tt];break}return de<He?-1:He<de?1:0},m.prototype.includes=function(L,D,G){return this.indexOf(L,D,G)!==-1},m.prototype.indexOf=function(L,D,G){return Q(this,L,D,G,!0)},m.prototype.lastIndexOf=function(L,D,G){return Q(this,L,D,G,!1)},m.prototype.write=function(L,D,G,K){if(D===void 0)K="utf8",G=this.length,D=0;else if(G===void 0&&typeof D=="string")K=D,G=this.length,D=0;else{if(!isFinite(D))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");D>>>=0,isFinite(G)?(G>>>=0,K===void 0&&(K="utf8")):(K=G,G=void 0)}var ge=this.length-D;if((G===void 0||G>ge)&&(G=ge),L.length>0&&(G<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var de=!1;;)switch(K){case"hex":return R(this,L,D,G);case"utf8":case"utf-8":return X(this,L,D,G);case"ascii":case"latin1":case"binary":return ce(this,L,D,G);case"base64":return oe(this,L,D,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,L,D,G);default:if(de)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),de=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ie=4096;function Ge(L,D,G){var K="";G=Math.min(L.length,G);for(var ge=D;ge<G;++ge)K+=String.fromCharCode(127&L[ge]);return K}function at(L,D,G){var K="";G=Math.min(L.length,G);for(var ge=D;ge<G;++ge)K+=String.fromCharCode(L[ge]);return K}function ft(L,D,G){var K=L.length;(!D||D<0)&&(D=0),(!G||G<0||G>K)&&(G=K);for(var ge="",de=D;de<G;++de)ge+=Ue[L[de]];return ge}function We(L,D,G){for(var K=L.slice(D,G),ge="",de=0;de<K.length-1;de+=2)ge+=String.fromCharCode(K[de]+256*K[de+1]);return ge}function ut(L,D,G){if(L%1!=0||L<0)throw new RangeError("offset is not uint");if(L+D>G)throw new RangeError("Trying to access beyond buffer length")}function At(L,D,G,K,ge,de){if(!m.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>ge||D<de)throw new RangeError('"value" argument is out of bounds');if(G+K>L.length)throw new RangeError("Index out of range")}function Ne(L,D,G,K,ge,de){if(G+K>L.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function et(L,D,G,K,ge){return D=+D,G>>>=0,ge||Ne(L,0,G,4),C.write(L,D,G,K,23,4),G+4}function dt(L,D,G,K,ge){return D=+D,G>>>=0,ge||Ne(L,0,G,8),C.write(L,D,G,K,52,8),G+8}m.prototype.slice=function(L,D){var G=this.length;(L=~~L)<0?(L+=G)<0&&(L=0):L>G&&(L=G),(D=D===void 0?G:~~D)<0?(D+=G)<0&&(D=0):D>G&&(D=G),D<L&&(D=L);var K=this.subarray(L,D);return Object.setPrototypeOf(K,m.prototype),K},m.prototype.readUintLE=m.prototype.readUIntLE=function(L,D,G){L>>>=0,D>>>=0,G||ut(L,D,this.length);for(var K=this[L],ge=1,de=0;++de<D&&(ge*=256);)K+=this[L+de]*ge;return K},m.prototype.readUintBE=m.prototype.readUIntBE=function(L,D,G){L>>>=0,D>>>=0,G||ut(L,D,this.length);for(var K=this[L+--D],ge=1;D>0&&(ge*=256);)K+=this[L+--D]*ge;return K},m.prototype.readUint8=m.prototype.readUInt8=function(L,D){return L>>>=0,D||ut(L,1,this.length),this[L]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(L,D){return L>>>=0,D||ut(L,2,this.length),this[L]|this[L+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(L,D){return L>>>=0,D||ut(L,2,this.length),this[L]<<8|this[L+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(L,D){return L>>>=0,D||ut(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+16777216*this[L+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(L,D){return L>>>=0,D||ut(L,4,this.length),16777216*this[L]+(this[L+1]<<16|this[L+2]<<8|this[L+3])},m.prototype.readIntLE=function(L,D,G){L>>>=0,D>>>=0,G||ut(L,D,this.length);for(var K=this[L],ge=1,de=0;++de<D&&(ge*=256);)K+=this[L+de]*ge;return K>=(ge*=128)&&(K-=Math.pow(2,8*D)),K},m.prototype.readIntBE=function(L,D,G){L>>>=0,D>>>=0,G||ut(L,D,this.length);for(var K=D,ge=1,de=this[L+--K];K>0&&(ge*=256);)de+=this[L+--K]*ge;return de>=(ge*=128)&&(de-=Math.pow(2,8*D)),de},m.prototype.readInt8=function(L,D){return L>>>=0,D||ut(L,1,this.length),128&this[L]?-1*(255-this[L]+1):this[L]},m.prototype.readInt16LE=function(L,D){L>>>=0,D||ut(L,2,this.length);var G=this[L]|this[L+1]<<8;return 32768&G?4294901760|G:G},m.prototype.readInt16BE=function(L,D){L>>>=0,D||ut(L,2,this.length);var G=this[L+1]|this[L]<<8;return 32768&G?4294901760|G:G},m.prototype.readInt32LE=function(L,D){return L>>>=0,D||ut(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},m.prototype.readInt32BE=function(L,D){return L>>>=0,D||ut(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},m.prototype.readFloatLE=function(L,D){return L>>>=0,D||ut(L,4,this.length),C.read(this,L,!0,23,4)},m.prototype.readFloatBE=function(L,D){return L>>>=0,D||ut(L,4,this.length),C.read(this,L,!1,23,4)},m.prototype.readDoubleLE=function(L,D){return L>>>=0,D||ut(L,8,this.length),C.read(this,L,!0,52,8)},m.prototype.readDoubleBE=function(L,D){return L>>>=0,D||ut(L,8,this.length),C.read(this,L,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(L,D,G,K){L=+L,D>>>=0,G>>>=0,K||At(this,L,D,G,Math.pow(2,8*G)-1,0);var ge=1,de=0;for(this[D]=255&L;++de<G&&(ge*=256);)this[D+de]=L/ge&255;return D+G},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(L,D,G,K){L=+L,D>>>=0,G>>>=0,K||At(this,L,D,G,Math.pow(2,8*G)-1,0);var ge=G-1,de=1;for(this[D+ge]=255&L;--ge>=0&&(de*=256);)this[D+ge]=L/de&255;return D+G},m.prototype.writeUint8=m.prototype.writeUInt8=function(L,D,G){return L=+L,D>>>=0,G||At(this,L,D,1,255,0),this[D]=255&L,D+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(L,D,G){return L=+L,D>>>=0,G||At(this,L,D,2,65535,0),this[D]=255&L,this[D+1]=L>>>8,D+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(L,D,G){return L=+L,D>>>=0,G||At(this,L,D,2,65535,0),this[D]=L>>>8,this[D+1]=255&L,D+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(L,D,G){return L=+L,D>>>=0,G||At(this,L,D,4,4294967295,0),this[D+3]=L>>>24,this[D+2]=L>>>16,this[D+1]=L>>>8,this[D]=255&L,D+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(L,D,G){return L=+L,D>>>=0,G||At(this,L,D,4,4294967295,0),this[D]=L>>>24,this[D+1]=L>>>16,this[D+2]=L>>>8,this[D+3]=255&L,D+4},m.prototype.writeIntLE=function(L,D,G,K){if(L=+L,D>>>=0,!K){var ge=Math.pow(2,8*G-1);At(this,L,D,G,ge-1,-ge)}var de=0,He=1,Tt=0;for(this[D]=255&L;++de<G&&(He*=256);)L<0&&Tt===0&&this[D+de-1]!==0&&(Tt=1),this[D+de]=(L/He>>0)-Tt&255;return D+G},m.prototype.writeIntBE=function(L,D,G,K){if(L=+L,D>>>=0,!K){var ge=Math.pow(2,8*G-1);At(this,L,D,G,ge-1,-ge)}var de=G-1,He=1,Tt=0;for(this[D+de]=255&L;--de>=0&&(He*=256);)L<0&&Tt===0&&this[D+de+1]!==0&&(Tt=1),this[D+de]=(L/He>>0)-Tt&255;return D+G},m.prototype.writeInt8=function(L,D,G){return L=+L,D>>>=0,G||At(this,L,D,1,127,-128),L<0&&(L=255+L+1),this[D]=255&L,D+1},m.prototype.writeInt16LE=function(L,D,G){return L=+L,D>>>=0,G||At(this,L,D,2,32767,-32768),this[D]=255&L,this[D+1]=L>>>8,D+2},m.prototype.writeInt16BE=function(L,D,G){return L=+L,D>>>=0,G||At(this,L,D,2,32767,-32768),this[D]=L>>>8,this[D+1]=255&L,D+2},m.prototype.writeInt32LE=function(L,D,G){return L=+L,D>>>=0,G||At(this,L,D,4,2147483647,-2147483648),this[D]=255&L,this[D+1]=L>>>8,this[D+2]=L>>>16,this[D+3]=L>>>24,D+4},m.prototype.writeInt32BE=function(L,D,G){return L=+L,D>>>=0,G||At(this,L,D,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[D]=L>>>24,this[D+1]=L>>>16,this[D+2]=L>>>8,this[D+3]=255&L,D+4},m.prototype.writeFloatLE=function(L,D,G){return et(this,L,D,!0,G)},m.prototype.writeFloatBE=function(L,D,G){return et(this,L,D,!1,G)},m.prototype.writeDoubleLE=function(L,D,G){return dt(this,L,D,!0,G)},m.prototype.writeDoubleBE=function(L,D,G){return dt(this,L,D,!1,G)},m.prototype.copy=function(L,D,G,K){if(!m.isBuffer(L))throw new TypeError("argument should be a Buffer");if(G||(G=0),K||K===0||(K=this.length),D>=L.length&&(D=L.length),D||(D=0),K>0&&K<G&&(K=G),K===G||L.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),L.length-D<K-G&&(K=L.length-D+G);var ge=K-G;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(D,G,K):Uint8Array.prototype.set.call(L,this.subarray(G,K),D),ge},m.prototype.fill=function(L,D,G,K){if(typeof L=="string"){if(typeof D=="string"?(K=D,D=0,G=this.length):typeof G=="string"&&(K=G,G=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!m.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(L.length===1){var ge=L.charCodeAt(0);(K==="utf8"&&ge<128||K==="latin1")&&(L=ge)}}else typeof L=="number"?L&=255:typeof L=="boolean"&&(L=Number(L));if(D<0||this.length<D||this.length<G)throw new RangeError("Out of range index");if(G<=D)return this;var de;if(D>>>=0,G=G===void 0?this.length:G>>>0,L||(L=0),typeof L=="number")for(de=D;de<G;++de)this[de]=L;else{var He=m.isBuffer(L)?L:m.from(L,K),Tt=He.length;if(Tt===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(de=0;de<G-D;++de)this[de+D]=He[de%Tt]}return this};var rn=/[^+/0-9A-Za-z-_]/g;function Yt(L,D){var G;D=D||1/0;for(var K=L.length,ge=null,de=[],He=0;He<K;++He){if((G=L.charCodeAt(He))>55295&&G<57344){if(!ge){if(G>56319){(D-=3)>-1&&de.push(239,191,189);continue}if(He+1===K){(D-=3)>-1&&de.push(239,191,189);continue}ge=G;continue}if(G<56320){(D-=3)>-1&&de.push(239,191,189),ge=G;continue}G=65536+(ge-55296<<10|G-56320)}else ge&&(D-=3)>-1&&de.push(239,191,189);if(ge=null,G<128){if((D-=1)<0)break;de.push(G)}else if(G<2048){if((D-=2)<0)break;de.push(G>>6|192,63&G|128)}else if(G<65536){if((D-=3)<0)break;de.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((D-=4)<0)break;de.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return de}function St(L){return k.toByteArray(function(D){if((D=(D=D.split("=")[0]).trim().replace(rn,"")).length<2)return"";for(;D.length%4!=0;)D+="=";return D}(L))}function kt(L,D,G,K){for(var ge=0;ge<K&&!(ge+G>=D.length||ge>=L.length);++ge)D[ge+G]=L[ge];return ge}function Re(L,D){return L instanceof D||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===D.name}function ne(L){return L!=L}var Ue=function(){for(var L="0123456789abcdef",D=new Array(256),G=0;G<16;++G)for(var K=16*G,ge=0;ge<16;++ge)D[K+ge]=L[G]+L[ge];return D}()},6693:function(b,p){p.byteLength=function(U){var M=m(U),_=M[0],I=M[1];return 3*(_+I)/4-I},p.toByteArray=function(U){var M,_,I=m(U),x=I[0],Z=I[1],Y=new C(function(se,R,X){return 3*(R+X)/4-X}(0,x,Z)),$=0,Q=Z>0?x-4:x;for(_=0;_<Q;_+=4)M=k[U.charCodeAt(_)]<<18|k[U.charCodeAt(_+1)]<<12|k[U.charCodeAt(_+2)]<<6|k[U.charCodeAt(_+3)],Y[$++]=M>>16&255,Y[$++]=M>>8&255,Y[$++]=255&M;return Z===2&&(M=k[U.charCodeAt(_)]<<2|k[U.charCodeAt(_+1)]>>4,Y[$++]=255&M),Z===1&&(M=k[U.charCodeAt(_)]<<10|k[U.charCodeAt(_+1)]<<4|k[U.charCodeAt(_+2)]>>2,Y[$++]=M>>8&255,Y[$++]=255&M),Y},p.fromByteArray=function(U){for(var M,_=U.length,I=_%3,x=[],Z=16383,Y=0,$=_-I;Y<$;Y+=Z)x.push(T(U,Y,Y+Z>$?$:Y+Z));return I===1?(M=U[_-1],x.push(w[M>>2]+w[M<<4&63]+"==")):I===2&&(M=(U[_-2]<<8)+U[_-1],x.push(w[M>>10]+w[M>>4&63]+w[M<<2&63]+"=")),x.join("")};for(var w=[],k=[],C=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,P=E.length;y<P;++y)w[y]=E[y],k[E.charCodeAt(y)]=y;function m(U){var M=U.length;if(M%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=U.indexOf("=");return _===-1&&(_=M),[_,_===M?0:4-_%4]}function T(U,M,_){for(var I,x,Z=[],Y=M;Y<_;Y+=3)I=(U[Y]<<16&16711680)+(U[Y+1]<<8&65280)+(255&U[Y+2]),Z.push(w[(x=I)>>18&63]+w[x>>12&63]+w[x>>6&63]+w[63&x]);return Z.join("")}k[45]=62,k[95]=63},2165:function(b,p){p.read=function(w,k,C,E,y){var P,m,T=8*y-E-1,U=(1<<T)-1,M=U>>1,_=-7,I=C?y-1:0,x=C?-1:1,Z=w[k+I];for(I+=x,P=Z&(1<<-_)-1,Z>>=-_,_+=T;_>0;P=256*P+w[k+I],I+=x,_-=8);for(m=P&(1<<-_)-1,P>>=-_,_+=E;_>0;m=256*m+w[k+I],I+=x,_-=8);if(P===0)P=1-M;else{if(P===U)return m?NaN:1/0*(Z?-1:1);m+=Math.pow(2,E),P-=M}return(Z?-1:1)*m*Math.pow(2,P-E)},p.write=function(w,k,C,E,y,P){var m,T,U,M=8*P-y-1,_=(1<<M)-1,I=_>>1,x=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=E?0:P-1,Y=E?1:-1,$=k<0||k===0&&1/k<0?1:0;for(k=Math.abs(k),isNaN(k)||k===1/0?(T=isNaN(k)?1:0,m=_):(m=Math.floor(Math.log(k)/Math.LN2),k*(U=Math.pow(2,-m))<1&&(m--,U*=2),(k+=m+I>=1?x/U:x*Math.pow(2,1-I))*U>=2&&(m++,U/=2),m+I>=_?(T=0,m=_):m+I>=1?(T=(k*U-1)*Math.pow(2,y),m+=I):(T=k*Math.pow(2,I-1)*Math.pow(2,y),m=0));y>=8;w[C+Z]=255&T,Z+=Y,T/=256,y-=8);for(m=m<<y|T,M+=y;M>0;w[C+Z]=255&m,Z+=Y,m/=256,M-=8);w[C+Z-Y]|=128*$}},6934:function(b,p){var w={parseBuffer:function(E){return new k(E).parse()},addBoxProcessor:function(E,y){typeof E=="string"&&typeof y=="function"&&(C.prototype._boxProcessors[E]=y)},createFile:function(){return new k},createBox:function(E,y,P){var m=C.create(E);return y&&y.append(m,P),m},createFullBox:function(E,y,P){var m=w.createBox(E,y,P);return m.version=0,m.flags=0,m},Utils:{}};w.Utils.dataViewToString=function(E,y){var P=y||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(P).decode(E);var m=[],T=0;if(P==="utf-8")for(;T<E.byteLength;){var U=E.getUint8(T++);U<128||(U<224?(U=(31&U)<<6,U|=63&E.getUint8(T++)):U<240?(U=(15&U)<<12,U|=(63&E.getUint8(T++))<<6,U|=63&E.getUint8(T++)):(U=(7&U)<<18,U|=(63&E.getUint8(T++))<<12,U|=(63&E.getUint8(T++))<<6,U|=63&E.getUint8(T++))),m.push(String.fromCharCode(U))}else for(;T<E.byteLength;)m.push(String.fromCharCode(E.getUint8(T++)));return m.join("")},w.Utils.utf8ToByteArray=function(E){var y,P;if(typeof TextEncoder<"u")y=new TextEncoder().encode(E);else for(y=[],P=0;P<E.length;++P){var m=E.charCodeAt(P);m<128?y.push(m):m<2048?(y.push(192|m>>6),y.push(128|63&m)):m<65536?(y.push(224|m>>12),y.push(128|63&m>>6),y.push(128|63&m)):(y.push(240|m>>18),y.push(128|63&m>>12),y.push(128|63&m>>6),y.push(128|63&m))}return y},w.Utils.appendBox=function(E,y,P){if(y._offset=E._cursor.offset,y._root=E._root?E._root:E,y._raw=E._raw,y._parent=E,P!==-1)if(P!=null){var m,T=-1;if(typeof P=="number")T=P;else{if(typeof P=="string")m=P;else{if(typeof P!="object"||!P.type)return void E.boxes.push(y);m=P.type}for(var U=0;U<E.boxes.length;U++)if(m===E.boxes[U].type){T=U+1;break}}E.boxes.splice(T,0,y)}else E.boxes.push(y)},p.parseBuffer=w.parseBuffer,p.addBoxProcessor=w.addBoxProcessor,p.createFile=w.createFile,p.createBox=w.createBox,p.createFullBox=w.createFullBox,p.Utils=w.Utils,w.Cursor=function(E){this.offset=E===void 0?0:E};var k=function(E){this._cursor=new w.Cursor,this.boxes=[],E&&(this._raw=new DataView(E))};k.prototype.fetch=function(E){var y=this.fetchAll(E,!0);return y.length?y[0]:null},k.prototype.fetchAll=function(E,y){var P=[];return k._sweep.call(this,E,P,y),P},k.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var E=C.parse(this);if(E.type===void 0)break;this.boxes.push(E)}return this},k._sweep=function(E,y,P){for(var m in this.type&&this.type==E&&y.push(this),this.boxes){if(y.length&&P)return;k._sweep.call(this.boxes[m],E,y,P)}},k.prototype.write=function(){var E,y=0;for(E=0;E<this.boxes.length;E++)y+=this.boxes[E].getLength(!1);var P=new Uint8Array(y);for(this._rawo=new DataView(P.buffer),this.bytes=P,this._cursor.offset=0,E=0;E<this.boxes.length;E++)this.boxes[E].write();return P.buffer},k.prototype.append=function(E,y){w.Utils.appendBox(this,E,y)};var C=function(){this._cursor=new w.Cursor};C.parse=function(E){var y=new C;return y._offset=E._cursor.offset,y._root=E._root?E._root:E,y._raw=E._raw,y._parent=E,y._parseBox(),E._cursor.offset=y._raw.byteOffset+y._raw.byteLength,y},C.create=function(E){var y=new C;return y.type=E,y.boxes=[],y},C.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],C.prototype._boxProcessors={},C.prototype._procField=function(E,y,P){this._parsing?this[E]=this._readField(y,P):this._writeField(y,P,this[E])},C.prototype._procFieldArray=function(E,y,P,m){var T;if(this._parsing)for(this[E]=[],T=0;T<y;T++)this[E][T]=this._readField(P,m);else for(T=0;T<this[E].length;T++)this._writeField(P,m,this[E][T])},C.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},C.prototype._procEntries=function(E,y,P){var m;if(this._parsing)for(this[E]=[],m=0;m<y;m++)this[E].push({}),P.call(this,this[E][m]);else for(m=0;m<y;m++)P.call(this,this[E][m])},C.prototype._procSubEntries=function(E,y,P,m){var T;if(this._parsing)for(E[y]=[],T=0;T<P;T++)E[y].push({}),m.call(this,E[y][T]);else for(T=0;T<P;T++)m.call(this,E[y][T])},C.prototype._procEntryField=function(E,y,P,m){this._parsing?E[y]=this._readField(P,m):this._writeField(P,m,E[y])},C.prototype._procSubBoxes=function(E,y){var P;if(this._parsing)for(this[E]=[],P=0;P<y;P++)this[E].push(C.parse(this));else for(P=0;P<y;P++)this._rawo?this[E][P].write():this.size+=this[E][P].getLength()},C.prototype._readField=function(E,y){switch(E){case"uint":return this._readUint(y);case"int":return this._readInt(y);case"template":return this._readTemplate(y);case"string":return y===-1?this._readTerminatedString():this._readString(y);case"data":return this._readData(y);case"utf8":return this._readUTF8String();default:return-1}},C.prototype._readInt=function(E){var y=null,P=this._cursor.offset-this._raw.byteOffset;switch(E){case 8:y=this._raw.getInt8(P);break;case 16:y=this._raw.getInt16(P);break;case 32:y=this._raw.getInt32(P);break;case 64:var m=this._raw.getInt32(P),T=this._raw.getInt32(P+4);y=m*Math.pow(2,32)+T}return this._cursor.offset+=E>>3,y},C.prototype._readUint=function(E){var y,P,m=null,T=this._cursor.offset-this._raw.byteOffset;switch(E){case 8:m=this._raw.getUint8(T);break;case 16:m=this._raw.getUint16(T);break;case 24:m=((y=this._raw.getUint16(T))<<8)+(P=this._raw.getUint8(T+2));break;case 32:m=this._raw.getUint32(T);break;case 64:y=this._raw.getUint32(T),P=this._raw.getUint32(T+4),m=y*Math.pow(2,32)+P}return this._cursor.offset+=E>>3,m},C.prototype._readString=function(E){for(var y="",P=0;P<E;P++){var m=this._readUint(8);y+=String.fromCharCode(m)}return y},C.prototype._readTemplate=function(E){return this._readUint(E/2)+this._readUint(E/2)/Math.pow(2,E/2)},C.prototype._readTerminatedString=function(){for(var E="";this._cursor.offset-this._offset<this._raw.byteLength;){var y=this._readUint(8);if(y===0)break;E+=String.fromCharCode(y)}return E},C.prototype._readData=function(E){var y=E>0?E:this._raw.byteLength-(this._cursor.offset-this._offset);if(y>0){var P=new Uint8Array(this._raw.buffer,this._cursor.offset,y);return this._cursor.offset+=y,P}return null},C.prototype._readUTF8String=function(){var E=this._raw.byteLength-(this._cursor.offset-this._offset),y=null;return E>0&&(y=new DataView(this._raw.buffer,this._cursor.offset,E),this._cursor.offset+=E),y&&w.Utils.dataViewToString(y)},C.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},C.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},C.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(C.parse(this))},C.prototype.append=function(E,y){w.Utils.appendBox(this,E,y)},C.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var E=0;E<this.boxes.length;E++)this.size+=this.boxes[E].getLength();return this._data&&this._writeData(this._data),this.size},C.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var E=0;E<this.boxes.length;E++)this.boxes[E].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},C.prototype._writeInt=function(E,y){if(this._rawo){var P=this._cursor.offset-this._rawo.byteOffset;switch(E){case 8:this._rawo.setInt8(P,y);break;case 16:this._rawo.setInt16(P,y);break;case 32:this._rawo.setInt32(P,y);break;case 64:var m=Math.floor(y/Math.pow(2,32)),T=y-m*Math.pow(2,32);this._rawo.setUint32(P,m),this._rawo.setUint32(P+4,T)}this._cursor.offset+=E>>3}else this.size+=E>>3},C.prototype._writeUint=function(E,y){if(this._rawo){var P,m,T=this._cursor.offset-this._rawo.byteOffset;switch(E){case 8:this._rawo.setUint8(T,y);break;case 16:this._rawo.setUint16(T,y);break;case 24:P=(16776960&y)>>8,m=255&y,this._rawo.setUint16(T,P),this._rawo.setUint8(T+2,m);break;case 32:this._rawo.setUint32(T,y);break;case 64:m=y-(P=Math.floor(y/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(T,P),this._rawo.setUint32(T+4,m)}this._cursor.offset+=E>>3}else this.size+=E>>3},C.prototype._writeString=function(E,y){for(var P=0;P<E;P++)this._writeUint(8,y.charCodeAt(P))},C.prototype._writeTerminatedString=function(E){if(E.length!==0){for(var y=0;y<E.length;y++)this._writeUint(8,E.charCodeAt(y));this._writeUint(8,0)}},C.prototype._writeTemplate=function(E,y){var P=Math.floor(y),m=(y-P)*Math.pow(2,E/2);this._writeUint(E/2,P),this._writeUint(E/2,m)},C.prototype._writeData=function(E){if(E)if(this._rawo){if(E instanceof Array){for(var y=this._cursor.offset-this._rawo.byteOffset,P=0;P<E.length;P++)this._rawo.setInt8(y+P,E[P]);this._cursor.offset+=E.length}E instanceof Uint8Array&&(this._root.bytes.set(E,this._cursor.offset),this._cursor.offset+=E.length)}else this.size+=E.length},C.prototype._writeUTF8String=function(E){var y=w.Utils.utf8ToByteArray(E);if(this._rawo)for(var P=new DataView(this._rawo.buffer,this._cursor.offset,y.length),m=0;m<y.length;m++)P.setUint8(m,y[m]);else this.size+=y.length},C.prototype._writeField=function(E,y,P){switch(E){case"uint":this._writeUint(y,P);break;case"int":this._writeInt(y,P);break;case"template":this._writeTemplate(y,P);break;case"string":y==-1?this._writeTerminatedString(P):this._writeString(y,P);break;case"data":this._writeData(P);break;case"utf8":this._writeUTF8String(P)}},C.prototype._boxProcessors.avc1=C.prototype._boxProcessors.avc2=C.prototype._boxProcessors.avc3=C.prototype._boxProcessors.avc4=C.prototype._boxProcessors.hvc1=C.prototype._boxProcessors.hev1=C.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},C.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"sample_count","uint",32),this._procEntryField(E,"sample_offset",this.version===1?"int":"uint",32)})},C.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},C.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"segment_duration","uint",this.version===1?64:32),this._procEntryField(E,"media_time","int",this.version===1?64:32),this._procEntryField(E,"media_rate_integer","int",16),this._procEntryField(E,"media_rate_fraction","int",16)})},C.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},C.prototype._boxProcessors.free=C.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},C.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},C.prototype._boxProcessors.ftyp=C.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var E=-1;this._parsing&&(E=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",E,"string",4)},C.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},C.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},C.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},C.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},C.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},C.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},C.prototype._boxProcessors.mp4a=C.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},C.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},C.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},C.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},C.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},C.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},C.prototype._boxProcessors.sdtp=function(){this._procFullBox();var E=-1;this._parsing&&(E=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",E,"uint",8)},C.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(E){this._parsing||(E.reference=(1&E.reference_type)<<31,E.reference|=2147483647&E.referenced_size,E.sap=(1&E.starts_with_SAP)<<31,E.sap|=(3&E.SAP_type)<<28,E.sap|=268435455&E.SAP_delta_time),this._procEntryField(E,"reference","uint",32),this._procEntryField(E,"subsegment_duration","uint",32),this._procEntryField(E,"sap","uint",32),this._parsing&&(E.reference_type=E.reference>>31&1,E.referenced_size=2147483647&E.reference,E.starts_with_SAP=E.sap>>31&1,E.SAP_type=E.sap>>28&7,E.SAP_delta_time=268435455&E.sap)})},C.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},C.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(E){this._procEntryField(E,"ranges_count","uint",32),this._procSubEntries(E,"ranges",E.ranges_count,function(y){this._procEntryField(y,"level","uint",8),this._procEntryField(y,"range_size","uint",24)})})},C.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},C.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},C.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"sample_count","uint",32),this._procEntryField(E,"sample_delta","uint",32)})},C.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"sample_delta","uint",32),this._procEntryField(E,"subsample_count","uint",16),this._procSubEntries(E,"subsamples",E.subsample_count,function(y){this._procEntryField(y,"subsample_size","uint",this.version===1?32:16),this._procEntryField(y,"subsample_priority","uint",8),this._procEntryField(y,"discardable","uint",8),this._procEntryField(y,"codec_specific_parameters","uint",32)})})},C.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},C.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},C.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},C.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(E){this._procEntryField(E,"time","uint",this.version===1?64:32),this._procEntryField(E,"moof_offset","uint",this.version===1?64:32),this._procEntryField(E,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(E,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(E,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},C.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},C.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},C.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(E){256&this.flags&&this._procEntryField(E,"sample_duration","uint",32),512&this.flags&&this._procEntryField(E,"sample_size","uint",32),1024&this.flags&&this._procEntryField(E,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(E,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},C.prototype._boxProcessors["url "]=C.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},C.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},C.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},C.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},C.prototype._boxProcessors.vtte=function(){}},5530:function(b,p,w){b.exports=w(6146).polyfill()},6146:function(b,p,w){b.exports=function(){function k(St){return typeof St=="function"}var C=Array.isArray?Array.isArray:function(St){return Object.prototype.toString.call(St)==="[object Array]"},E=0,y=void 0,P=void 0,m=function(St,kt){Z[E]=St,Z[E+1]=kt,(E+=2)===2&&(P?P(Y):X())},T=typeof window<"u"?window:void 0,U=T||{},M=U.MutationObserver||U.WebKitMutationObserver,_=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",I=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){var St=setTimeout;return function(){return St(Y,1)}}var Z=new Array(1e3);function Y(){for(var St=0;St<E;St+=2)(0,Z[St])(Z[St+1]),Z[St]=void 0,Z[St+1]=void 0;E=0}var $,Q,se,R,X=void 0;function ce(St,kt){var Re=this,ne=new this.constructor(be);ne[ye]===void 0&&dt(ne);var Ue=Re._state;if(Ue){var L=arguments[Ue-1];m(function(){return Ne(Ue,ne,L,Re._result)})}else ut(Re,ne,St,kt);return ne}function oe(St){if(St&&typeof St=="object"&&St.constructor===this)return St;var kt=new this(be);return Ge(kt,St),kt}X=_?function(){return process.nextTick(Y)}:M?(Q=0,se=new M(Y),R=document.createTextNode(""),se.observe(R,{characterData:!0}),function(){R.data=Q=++Q%2}):I?(($=new MessageChannel).port1.onmessage=Y,function(){return $.port2.postMessage(0)}):T===void 0?function(){try{var St=Function("return this")().require("vertx");return(y=St.runOnLoop||St.runOnContext)!==void 0?function(){y(Y)}:x()}catch(kt){return x()}}():x();var ye=Math.random().toString(36).substring(2);function be(){}var Xe=void 0;function Ie(St,kt,Re){kt.constructor===St.constructor&&Re===ce&&kt.constructor.resolve===oe?function(ne,Ue){Ue._state===1?ft(ne,Ue._result):Ue._state===2?We(ne,Ue._result):ut(Ue,void 0,function(L){return Ge(ne,L)},function(L){return We(ne,L)})}(St,kt):Re===void 0?ft(St,kt):k(Re)?function(ne,Ue,L){m(function(D){var G=!1,K=function(ge,de,He,Tt){try{ge.call(de,He,Tt)}catch(st){return st}}(L,Ue,function(ge){G||(G=!0,Ue!==ge?Ge(D,ge):ft(D,ge))},function(ge){G||(G=!0,We(D,ge))},D._label);!G&&K&&(G=!0,We(D,K))},ne)}(St,kt,Re):ft(St,kt)}function Ge(St,kt){if(St===kt)We(St,new TypeError("You cannot resolve a promise with itself"));else if(Ue=typeof(ne=kt),ne===null||Ue!=="object"&&Ue!=="function")ft(St,kt);else{var Re=void 0;try{Re=kt.then}catch(L){return void We(St,L)}Ie(St,kt,Re)}var ne,Ue}function at(St){St._onerror&&St._onerror(St._result),At(St)}function ft(St,kt){St._state===Xe&&(St._result=kt,St._state=1,St._subscribers.length!==0&&m(At,St))}function We(St,kt){St._state===Xe&&(St._state=2,St._result=kt,m(at,St))}function ut(St,kt,Re,ne){var Ue=St._subscribers,L=Ue.length;St._onerror=null,Ue[L]=kt,Ue[L+1]=Re,Ue[L+2]=ne,L===0&&St._state&&m(At,St)}function At(St){var kt=St._subscribers,Re=St._state;if(kt.length!==0){for(var ne=void 0,Ue=void 0,L=St._result,D=0;D<kt.length;D+=3)ne=kt[D],Ue=kt[D+Re],ne?Ne(Re,ne,Ue,L):Ue(L);St._subscribers.length=0}}function Ne(St,kt,Re,ne){var Ue=k(Re),L=void 0,D=void 0,G=!0;if(Ue){try{L=Re(ne)}catch(K){G=!1,D=K}if(kt===L)return void We(kt,new TypeError("A promises callback cannot return that same promise."))}else L=ne;kt._state!==Xe||(Ue&&G?Ge(kt,L):G===!1?We(kt,D):St===1?ft(kt,L):St===2&&We(kt,L))}var et=0;function dt(St){St[ye]=et++,St._state=void 0,St._result=void 0,St._subscribers=[]}var rn=function(){function St(kt,Re){this._instanceConstructor=kt,this.promise=new kt(be),this.promise[ye]||dt(this.promise),C(Re)?(this.length=Re.length,this._remaining=Re.length,this._result=new Array(this.length),this.length===0?ft(this.promise,this._result):(this.length=this.length||0,this._enumerate(Re),this._remaining===0&&ft(this.promise,this._result))):We(this.promise,new Error("Array Methods must be provided an Array"))}return St.prototype._enumerate=function(kt){for(var Re=0;this._state===Xe&&Re<kt.length;Re++)this._eachEntry(kt[Re],Re)},St.prototype._eachEntry=function(kt,Re){var ne=this._instanceConstructor,Ue=ne.resolve;if(Ue===oe){var L=void 0,D=void 0,G=!1;try{L=kt.then}catch(ge){G=!0,D=ge}if(L===ce&&kt._state!==Xe)this._settledAt(kt._state,Re,kt._result);else if(typeof L!="function")this._remaining--,this._result[Re]=kt;else if(ne===Yt){var K=new ne(be);G?We(K,D):Ie(K,kt,L),this._willSettleAt(K,Re)}else this._willSettleAt(new ne(function(ge){return ge(kt)}),Re)}else this._willSettleAt(Ue(kt),Re)},St.prototype._settledAt=function(kt,Re,ne){var Ue=this.promise;Ue._state===Xe&&(this._remaining--,kt===2?We(Ue,ne):this._result[Re]=ne),this._remaining===0&&ft(Ue,this._result)},St.prototype._willSettleAt=function(kt,Re){var ne=this;ut(kt,void 0,function(Ue){return ne._settledAt(1,Re,Ue)},function(Ue){return ne._settledAt(2,Re,Ue)})},St}(),Yt=function(){function St(kt){this[ye]=et++,this._result=this._state=void 0,this._subscribers=[],be!==kt&&(typeof kt!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof St?function(Re,ne){try{ne(function(Ue){Ge(Re,Ue)},function(Ue){We(Re,Ue)})}catch(Ue){We(Re,Ue)}}(this,kt):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return St.prototype.catch=function(kt){return this.then(null,kt)},St.prototype.finally=function(kt){var Re=this,ne=Re.constructor;return k(kt)?Re.then(function(Ue){return ne.resolve(kt()).then(function(){return Ue})},function(Ue){return ne.resolve(kt()).then(function(){throw Ue})}):Re.then(kt,kt)},St}();return Yt.prototype.then=ce,Yt.all=function(St){return new rn(this,St).promise},Yt.race=function(St){var kt=this;return C(St)?new kt(function(Re,ne){for(var Ue=St.length,L=0;L<Ue;L++)kt.resolve(St[L]).then(Re,ne)}):new kt(function(Re,ne){return ne(new TypeError("You must pass an array to race."))})},Yt.resolve=oe,Yt.reject=function(St){var kt=new this(be);return We(kt,St),kt},Yt._setScheduler=function(St){P=St},Yt._setAsap=function(St){m=St},Yt._asap=m,Yt.polyfill=function(){var St=void 0;if(w.g!==void 0)St=w.g;else if(typeof self<"u")St=self;else try{St=Function("return this")()}catch(ne){throw new Error("polyfill failed because global object is unavailable in this environment")}var kt=St.Promise;if(kt){var Re=null;try{Re=Object.prototype.toString.call(kt.resolve())}catch(ne){}if(Re==="[object Promise]"&&!kt.cast)return}St.Promise=Yt},Yt.Promise=Yt,Yt}()},1159:function(b){var p,w=typeof Reflect=="object"?Reflect:null,k=w&&typeof w.apply=="function"?w.apply:function(Y,$,Q){return Function.prototype.apply.call(Y,$,Q)};p=w&&typeof w.ownKeys=="function"?w.ownKeys:Object.getOwnPropertySymbols?function(Y){return Object.getOwnPropertyNames(Y).concat(Object.getOwnPropertySymbols(Y))}:function(Y){return Object.getOwnPropertyNames(Y)};var C=Number.isNaN||function(Y){return Y!=Y};function E(){E.init.call(this)}b.exports=E,b.exports.once=function(Y,$){return new Promise(function(Q,se){function R(ce){Y.removeListener($,X),se(ce)}function X(){typeof Y.removeListener=="function"&&Y.removeListener("error",R),Q([].slice.call(arguments))}Z(Y,$,X,{once:!0}),$!=="error"&&function(ce,oe,ye){typeof ce.on=="function"&&Z(ce,"error",oe,{once:!0})}(Y,R)})},E.EventEmitter=E,E.prototype._events=void 0,E.prototype._eventsCount=0,E.prototype._maxListeners=void 0;var y=10;function P(Y){if(typeof Y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Y)}function m(Y){return Y._maxListeners===void 0?E.defaultMaxListeners:Y._maxListeners}function T(Y,$,Q,se){var R,X,ce,oe;if(P(Q),(X=Y._events)===void 0?(X=Y._events=Object.create(null),Y._eventsCount=0):(X.newListener!==void 0&&(Y.emit("newListener",$,Q.listener?Q.listener:Q),X=Y._events),ce=X[$]),ce===void 0)ce=X[$]=Q,++Y._eventsCount;else if(typeof ce=="function"?ce=X[$]=se?[Q,ce]:[ce,Q]:se?ce.unshift(Q):ce.push(Q),(R=m(Y))>0&&ce.length>R&&!ce.warned){ce.warned=!0;var ye=new Error("Possible EventEmitter memory leak detected. "+ce.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");ye.name="MaxListenersExceededWarning",ye.emitter=Y,ye.type=$,ye.count=ce.length,oe=ye,console&&console.warn&&console.warn(oe)}return Y}function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M(Y,$,Q){var se={fired:!1,wrapFn:void 0,target:Y,type:$,listener:Q},R=U.bind(se);return R.listener=Q,se.wrapFn=R,R}function _(Y,$,Q){var se=Y._events;if(se===void 0)return[];var R=se[$];return R===void 0?[]:typeof R=="function"?Q?[R.listener||R]:[R]:Q?function(X){for(var ce=new Array(X.length),oe=0;oe<ce.length;++oe)ce[oe]=X[oe].listener||X[oe];return ce}(R):x(R,R.length)}function I(Y){var $=this._events;if($!==void 0){var Q=$[Y];if(typeof Q=="function")return 1;if(Q!==void 0)return Q.length}return 0}function x(Y,$){for(var Q=new Array($),se=0;se<$;++se)Q[se]=Y[se];return Q}function Z(Y,$,Q,se){if(typeof Y.on=="function")se.once?Y.once($,Q):Y.on($,Q);else{if(typeof Y.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Y);Y.addEventListener($,function R(X){se.once&&Y.removeEventListener($,R),Q(X)})}}Object.defineProperty(E,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(Y){if(typeof Y!="number"||Y<0||C(Y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Y+".");y=Y}}),E.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},E.prototype.setMaxListeners=function(Y){if(typeof Y!="number"||Y<0||C(Y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Y+".");return this._maxListeners=Y,this},E.prototype.getMaxListeners=function(){return m(this)},E.prototype.emit=function(Y){for(var $=[],Q=1;Q<arguments.length;Q++)$.push(arguments[Q]);var se=Y==="error",R=this._events;if(R!==void 0)se=se&&R.error===void 0;else if(!se)return!1;if(se){var X;if($.length>0&&(X=$[0]),X instanceof Error)throw X;var ce=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw ce.context=X,ce}var oe=R[Y];if(oe===void 0)return!1;if(typeof oe=="function")k(oe,this,$);else{var ye=oe.length,be=x(oe,ye);for(Q=0;Q<ye;++Q)k(be[Q],this,$)}return!0},E.prototype.addListener=function(Y,$){return T(this,Y,$,!1)},E.prototype.on=E.prototype.addListener,E.prototype.prependListener=function(Y,$){return T(this,Y,$,!0)},E.prototype.once=function(Y,$){return P($),this.on(Y,M(this,Y,$)),this},E.prototype.prependOnceListener=function(Y,$){return P($),this.prependListener(Y,M(this,Y,$)),this},E.prototype.removeListener=function(Y,$){var Q,se,R,X,ce;if(P($),(se=this._events)===void 0)return this;if((Q=se[Y])===void 0)return this;if(Q===$||Q.listener===$)--this._eventsCount==0?this._events=Object.create(null):(delete se[Y],se.removeListener&&this.emit("removeListener",Y,Q.listener||$));else if(typeof Q!="function"){for(R=-1,X=Q.length-1;X>=0;X--)if(Q[X]===$||Q[X].listener===$){ce=Q[X].listener,R=X;break}if(R<0)return this;R===0?Q.shift():function(oe,ye){for(;ye+1<oe.length;ye++)oe[ye]=oe[ye+1];oe.pop()}(Q,R),Q.length===1&&(se[Y]=Q[0]),se.removeListener!==void 0&&this.emit("removeListener",Y,ce||$)}return this},E.prototype.off=E.prototype.removeListener,E.prototype.removeAllListeners=function(Y){var $,Q,se;if((Q=this._events)===void 0)return this;if(Q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Q[Y]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete Q[Y]),this;if(arguments.length===0){var R,X=Object.keys(Q);for(se=0;se<X.length;++se)(R=X[se])!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof($=Q[Y])=="function")this.removeListener(Y,$);else if($!==void 0)for(se=$.length-1;se>=0;se--)this.removeListener(Y,$[se]);return this},E.prototype.listeners=function(Y){return _(this,Y,!0)},E.prototype.rawListeners=function(Y){return _(this,Y,!1)},E.listenerCount=function(Y,$){return typeof Y.listenerCount=="function"?Y.listenerCount($):I.call(Y,$)},E.prototype.listenerCount=I,E.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},3101:function(b){var p=Array.isArray,w=Object.keys,k=Object.prototype.hasOwnProperty;b.exports=function C(E,y){if(E===y)return!0;if(E&&y&&typeof E=="object"&&typeof y=="object"){var P,m,T,U=p(E),M=p(y);if(U&&M){if((m=E.length)!=y.length)return!1;for(P=m;P--!=0;)if(!C(E[P],y[P]))return!1;return!0}if(U!=M)return!1;var _=E instanceof Date,I=y instanceof Date;if(_!=I)return!1;if(_&&I)return E.getTime()==y.getTime();var x=E instanceof RegExp,Z=y instanceof RegExp;if(x!=Z)return!1;if(x&&Z)return E.toString()==y.toString();var Y=w(E);if((m=Y.length)!==w(y).length)return!1;for(P=m;P--!=0;)if(!k.call(y,Y[P]))return!1;for(P=m;P--!=0;)if(!C(E[T=Y[P]],y[T]))return!1;return!0}return E!=E&&y!=y}},3362:function(b,p,w){(function(k,C,E,y,P){function m(D){if("contents"in D)for(var G=("styleAttrs"in D)?D.styleAttrs[y.byName.ruby.qname]:null,K=D.kind==="span"&&(G==="container"||G==="textContainer"||G==="baseContainer"),ge=D.contents.length-1;ge>=0;ge--)!K||"styleAttrs"in D.contents[ge]&&y.byName.ruby.qname in D.contents[ge].styleAttrs?m(D.contents[ge]):delete D.contents[ge]}function T(D,G,K,ge){var de=ge&&ge.timeContainer==="seq",He=0;ge&&(He=de&&K?K.end:ge.begin),G.begin=G.explicit_begin?G.explicit_begin+He:He;var Tt=G.begin,st=null;if("sets"in G)for(var ot=0;ot<G.sets.length;ot++)T(D,G.sets[ot],st,G),Tt=G.timeContainer==="seq"?G.sets[ot].end:Math.max(Tt,G.sets[ot].end),st=G.sets[ot];if("contents"in G){if("contents"in G)for(var tt=0;tt<G.contents.length;tt++)T(D,G.contents[tt],st,G),Tt=G.timeContainer==="seq"?G.contents[tt].end:Math.max(Tt,G.contents[tt].end),st=G.contents[tt]}else Tt=de?G.begin:Number.POSITIVE_INFINITY;G.explicit_end!==null&&G.explicit_dur!==null?G.end=Math.min(G.begin+G.explicit_dur,He+G.explicit_end):G.explicit_end===null&&G.explicit_dur!==null?G.end=G.begin+G.explicit_dur:G.explicit_end!==null&&G.explicit_dur===null?G.end=He+G.explicit_end:G.end=Tt,delete G.explicit_begin,delete G.explicit_dur,delete G.explicit_end,D._registerEvent(G)}function U(D){this.node=D}function M(){this.events=[],this.head=new _,this.body=null}function _(){this.styling=new I,this.layout=new Y}function I(){this.styles={},this.initials={}}function x(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function Z(){this.styleAttrs=null}function Y(){this.regions={}}function $(D,G){Q.call(this,"image"),this.src=D,this.type=G}function Q(D){this.kind=D}function se(D){this.id=D}function R(D){this.regionID=D}function X(D){this.styleAttrs=D}function ce(D){this.sets=D}function oe(D){this.contents=D}function ye(D,G,K){this.explicit_begin=D,this.explicit_end=G,this.explicit_dur=K}function be(){Q.call(this,"body")}function Xe(){Q.call(this,"div")}function Ie(){Q.call(this,"p")}function Ge(){Q.call(this,"span")}function at(){Q.call(this,"span")}function ft(){Q.call(this,"br")}function We(){}function ut(){}function At(D){return D&&"xml:id"in D.attributes&&D.attributes["xml:id"].value||null}function Ne(D){return D&&"style"in D.attributes?D.attributes.style.value.split(" "):[]}function et(D,G){var K={};if(D!==null)for(var ge in D.attributes){var de=D.attributes[ge].uri+" "+D.attributes[ge].local,He=y.byQName[de];if(He!==void 0){var Tt=He.parse(D.attributes[ge].value);Tt!==null?(K[de]=Tt,He===y.byName.zIndex&&Re(G,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):ne(G,"Cannot parse styling attribute "+de+" --> "+D.attributes[ge].value)}}return K}function dt(D,G,K){for(var ge in D.attributes)if(D.attributes[ge].uri===G&&D.attributes[ge].local===K)return D.attributes[ge].value;return null}function rn(D,G,K){var ge,de=null;return(ge=/^(\d+(?:\.\d+)?)f$/.exec(K))!==null?G!==null&&(de=parseFloat(ge[1])/G):(ge=/^(\d+(?:\.\d+)?)t$/.exec(K))!==null?D!==null&&(de=parseFloat(ge[1])/D):(ge=/^(\d+(?:\.\d+)?)ms$/.exec(K))!==null?de=parseFloat(ge[1])/1e3:(ge=/^(\d+(?:\.\d+)?)s$/.exec(K))!==null?de=parseFloat(ge[1]):(ge=/^(\d+(?:\.\d+)?)h$/.exec(K))!==null?de=3600*parseFloat(ge[1]):(ge=/^(\d+(?:\.\d+)?)m$/.exec(K))!==null?de=60*parseFloat(ge[1]):(ge=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(K))!==null?de=3600*parseInt(ge[1])+60*parseInt(ge[2])+parseFloat(ge[3]):(ge=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(K))!==null&&G!==null&&(de=3600*parseInt(ge[1])+60*parseInt(ge[2])+parseInt(ge[3])+(ge[4]===null?0:parseInt(ge[4])/G)),de}function Yt(D,G,K){for(;G.styleRefs.length>0;){var ge=G.styleRefs.pop();ge in D.styles?(Yt(D,D.styles[ge],K),kt(D.styles[ge].styleAttrs,G.styleAttrs)):ne(K,"Non-existant style id referenced")}}function St(D,G,K,ge){for(var de=G.length-1;de>=0;de--){var He=G[de];He in D.styles?kt(D.styles[He].styleAttrs,K):ne(ge,"Non-existant style id referenced")}}function kt(D,G){for(var K in D)D.hasOwnProperty(K)&&(K in G||(G[K]=D[K]))}function Re(D,G){if(D&&D.warn&&D.warn(G))throw G}function ne(D,G){if(D&&D.error&&D.error(G))throw G}function Ue(D,G){throw D&&D.fatal&&D.fatal(G),G}function L(D,G){for(var K,ge=0,de=D.length-1;ge<=de;){var He=D[K=Math.floor((ge+de)/2)];if(He<G)ge=K+1;else{if(!(He>G))return{found:!0,index:K};de=K-1}}return{found:!1,index:ge}}k.fromXML=function(D,G,K){var ge=C.parser(!0,{xmlns:!0}),de=[],He=[],Tt=[],st=0,ot=null;ge.onclosetag=function(Mt){if(de[0]instanceof We)ot.head!==null&&ot.head.styling!==null&&St(ot.head.styling,de[0].styleRefs,de[0].styleAttrs,G),delete de[0].styleRefs;else if(de[0]instanceof I)for(var _n in de[0].styles)de[0].styles.hasOwnProperty(_n)&&Yt(de[0],de[0].styles[_n],G);else if(de[0]instanceof Ie||de[0]instanceof Ge){if(de[0].contents.length>1){var nn,cn=[de[0].contents[0]];for(nn=1;nn<de[0].contents.length;nn++)de[0].contents[nn]instanceof at&&cn[cn.length-1]instanceof at?cn[cn.length-1].text+=de[0].contents[nn].text:cn.push(de[0].contents[nn]);de[0].contents=cn}de[0]instanceof Ge&&de[0].contents.length===1&&de[0].contents[0]instanceof at&&(de[0].text=de[0].contents[0].text,delete de[0].contents)}else de[0]instanceof U&&(de[0].node.uri===E.ns_tt&&de[0].node.local==="metadata"?st--:st>0&&K&&"onCloseTag"in K&&K.onCloseTag());Tt.shift(),He.shift(),de.shift()},ge.ontext=function(Mt){if(de[0]!==void 0)if(de[0]instanceof Ge||de[0]instanceof Ie){if(de[0]instanceof Ge){var _n=de[0].styleAttrs[y.byName.ruby.qname];if(_n==="container"||_n==="textContainer"||_n==="baseContainer")return}var nn=new at;nn.initFromText(ot,de[0],Mt,He[0],Tt[0],G),de[0].contents.push(nn)}else de[0]instanceof U&&st>0&&K&&"onText"in K&&K.onText(Mt)},ge.onopentag=function(Mt){var _n=Mt.attributes["xml:space"];_n?Tt.unshift(_n.value):Tt.length===0?Tt.unshift("default"):Tt.unshift(Tt[0]);var nn=Mt.attributes["xml:lang"];if(nn?He.unshift(nn.value):He.length===0?He.unshift(""):He.unshift(He[0]),Mt.uri===E.ns_tt)if(Mt.local==="tt")ot!==null&&Ue(G,"Two <tt> elements at ("+this.line+","+this.column+")"),(ot=new M).initFromNode(Mt,He[0],G),de.unshift(ot);else if(Mt.local==="head")de[0]instanceof M||Ue(G,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),de.unshift(ot.head);else if(Mt.local==="styling")de[0]instanceof _||Ue(G,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),de.unshift(ot.head.styling);else if(Mt.local==="style"){var cn;de[0]instanceof I?((cn=new x).initFromNode(Mt,G),cn.id?ot.head.styling.styles[cn.id]=cn:ne(G,"<style> element missing @id attribute"),de.unshift(cn)):de[0]instanceof We?((cn=new x).initFromNode(Mt,G),kt(cn.styleAttrs,de[0].styleAttrs),de.unshift(cn)):Ue(G,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Mt.local==="initial"){var Ft;if(de[0]instanceof I){for(var Gn in(Ft=new Z).initFromNode(Mt,G),Ft.styleAttrs)Ft.styleAttrs.hasOwnProperty(Gn)&&(ot.head.styling.initials[Gn]=Ft.styleAttrs[Gn]);de.unshift(Ft)}else Ue(G,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Mt.local==="layout")de[0]instanceof _||Ue(G,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),de.unshift(ot.head.layout);else if(Mt.local==="region"){de[0]instanceof Y||Ue(G,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var Sr=new We;Sr.initFromNode(ot,Mt,He[0],G),!Sr.id||Sr.id in ot.head.layout.regions?ne(G,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):ot.head.layout.regions[Sr.id]=Sr,de.unshift(Sr)}else if(Mt.local==="body"){de[0]instanceof M||Ue(G,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),ot.body!==null&&Ue(G,"Second <body> element at "+this.line+","+this.column+")");var qr=new be;qr.initFromNode(ot,Mt,He[0],G),ot.body=qr,de.unshift(qr)}else if(Mt.local==="div"){de[0]instanceof Xe||de[0]instanceof be||Ue(G,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var gr=new Xe;gr.initFromNode(ot,de[0],Mt,He[0],G);var fi=gr.styleAttrs[y.byName.backgroundImage.qname];fi&&(gr.contents.push(new $(fi)),delete gr.styleAttrs[y.byName.backgroundImage.qname]),de[0].contents.push(gr),de.unshift(gr)}else if(Mt.local==="image"){de[0]instanceof Xe||Ue(G,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var ao=new $;ao.initFromNode(ot,de[0],Mt,He[0],G),de[0].contents.push(ao),de.unshift(ao)}else if(Mt.local==="p"){de[0]instanceof Xe||Ue(G,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Gr=new Ie;Gr.initFromNode(ot,de[0],Mt,He[0],G),de[0].contents.push(Gr),de.unshift(Gr)}else if(Mt.local==="span"){de[0]instanceof Ge||de[0]instanceof Ie||Ue(G,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var so=new Ge;so.initFromNode(ot,de[0],Mt,He[0],Tt[0],G),de[0].contents.push(so),de.unshift(so)}else if(Mt.local==="br"){de[0]instanceof Ge||de[0]instanceof Ie||Ue(G,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var xi=new ft;xi.initFromNode(ot,de[0],Mt,He[0],G),de[0].contents.push(xi),de.unshift(xi)}else if(Mt.local==="set"){de[0]instanceof Ge||de[0]instanceof Ie||de[0]instanceof Xe||de[0]instanceof be||de[0]instanceof We||de[0]instanceof ft||Ue(G,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Fi=new ut;Fi.initFromNode(ot,de[0],Mt,G),de[0].sets.push(Fi),de.unshift(Fi)}else de.unshift(new U(Mt));else de.unshift(new U(Mt));if(de[0]instanceof U){if(Mt.uri===E.ns_tt&&Mt.local==="metadata")st++;else if(st>0&&K&&"onOpenTag"in K){var no=[];for(var uo in Mt.attributes)no[Mt.attributes[uo].uri+" "+Mt.attributes[uo].local]={uri:Mt.attributes[uo].uri,local:Mt.attributes[uo].local,value:Mt.attributes[uo].value};K.onOpenTag(Mt.uri,Mt.local,no)}}},ge.write(D).close(),delete ot.head.styling.styles;var tt=!1;for(var ht in ot.head.layout.regions)if(ot.head.layout.regions.hasOwnProperty(ht)){tt=!0;break}if(!tt){var yt=We.prototype.createDefaultRegion(ot.lang);ot.head.layout.regions[yt.id]=yt}for(var Et in ot.head.layout.regions)ot.head.layout.regions.hasOwnProperty(Et)&&T(ot,ot.head.layout.regions[Et],null,null);return ot.body&&T(ot,ot.body,null,null),ot.body&&m(ot.body),ot},M.prototype.initFromNode=function(D,G,K){var ge=function(st,ot){var tt=dt(st,E.ns_ttp,"cellResolution"),ht=15,yt=32;if(tt!==null){var Et=/(\d+) (\d+)/.exec(tt);Et!==null?(yt=parseInt(Et[1]),ht=parseInt(Et[2])):Re(ot,"Malformed cellResolution value (using initial value instead)")}return{w:yt,h:ht}}(D,K);this.cellLength={h:new P.ComputedLength(0,1/ge.h),w:new P.ComputedLength(1/ge.w,0)};var de=function(st,ot){var tt,ht=dt(st,E.ns_ttp,"frameRate"),yt=30;ht!==null&&((tt=/(\d+)/.exec(ht))!==null?yt=parseInt(tt[1]):Re(ot,"Malformed frame rate attribute (using initial value instead)"));var Et=dt(st,E.ns_ttp,"frameRateMultiplier"),Mt=1;Et!==null&&((tt=/(\d+) (\d+)/.exec(Et))!==null?Mt=parseInt(tt[1])/parseInt(tt[2]):Re(ot,"Malformed frame rate multiplier attribute (using initial value instead)"));var _n=Mt*yt,nn=1,cn=dt(st,E.ns_ttp,"tickRate");return cn===null?ht!==null&&(nn=_n):(tt=/(\d+)/.exec(cn))!==null?nn=parseInt(tt[1]):Re(ot,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:_n,tickRate:nn}}(D,K);this.effectiveFrameRate=de.effectiveFrameRate,this.tickRate=de.tickRate,this.aspectRatio=function(st,ot){var tt=dt(st,E.ns_ittp,"aspectRatio");tt===null&&(tt=dt(st,E.ns_ttp,"displayAspectRatio"));var ht=null;if(tt!==null){var yt=/(\d+)\s+(\d+)/.exec(tt);if(yt!==null){var Et=parseInt(yt[1]),Mt=parseInt(yt[2]);Et!==0&&Mt!==0?ht=Et/Mt:ne(ot,"Illegal aspectRatio values (ignoring)")}else ne(ot,"Malformed aspectRatio attribute (ignoring)")}return ht}(D,K);var He=dt(D,E.ns_ttp,"timeBase");He!==null&&He!=="media"&&Ue(K,"Unsupported time base");var Tt=function(st,ot){var tt=dt(st,E.ns_tts,"extent");if(tt===null)return null;var ht=tt.split(" ");if(ht.length!==2)return Re(ot,"Malformed extent (ignoring)"),null;var yt=P.parseLength(ht[0]),Et=P.parseLength(ht[1]);return Et&&yt?{h:Et,w:yt}:(Re(ot,"Malformed extent values (ignoring)"),null)}(D,K);Tt===null?this.pxLength={h:null,w:null}:(Tt.h.unit==="px"&&Tt.w.unit==="px"||Ue(K,"Extent on TT must be in px or absent"),this.pxLength={h:new P.ComputedLength(0,1/Tt.h.value),w:new P.ComputedLength(1/Tt.w.value,0)}),this.dimensions={h:new P.ComputedLength(0,1),w:new P.ComputedLength(1,0)},this.lang=G},M.prototype._registerEvent=function(D){if(!(D.end<=D.begin)){var G=L(this.events,D.begin);if(G.found||this.events.splice(G.index,0,D.begin),D.end!==Number.POSITIVE_INFINITY){var K=L(this.events,D.end);K.found||this.events.splice(K.index,0,D.end)}}},M.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},M.prototype.getMediaTimeEvents=function(){return this.events},x.prototype.initFromNode=function(D,G){this.id=At(D),this.styleAttrs=et(D,G),this.styleRefs=Ne(D)},Z.prototype.initFromNode=function(D,G){for(var K in this.styleAttrs={},D.attributes)if(D.attributes[K].uri===E.ns_itts||D.attributes[K].uri===E.ns_ebutts||D.attributes[K].uri===E.ns_tts){var ge=D.attributes[K].uri+" "+D.attributes[K].local;this.styleAttrs[ge]=D.attributes[K].value}},$.prototype.initFromNode=function(D,G,K,ge,de){this.src="src"in K.attributes?K.attributes.src.value:null,this.src||ne(de,"Invalid image@src attribute"),this.type="type"in K.attributes?K.attributes.type.value:null,this.type||ne(de,"Invalid image@type attribute"),X.prototype.initFromNode.call(this,D,G,K,de),ye.prototype.initFromNode.call(this,D,G,K,de),ce.prototype.initFromNode.call(this,D,G,K,de),R.prototype.initFromNode.call(this,D,G,K,de),this.lang=ge},se.prototype.initFromNode=function(D,G,K,ge){this.id=At(K)},R.prototype.initFromNode=function(D,G,K,ge){this.regionID=function(de){return de&&"region"in de.attributes?de.attributes.region.value:""}(K)},X.prototype.initFromNode=function(D,G,K,ge){this.styleAttrs=et(K,ge),D.head!==null&&D.head.styling!==null&&St(D.head.styling,Ne(K),this.styleAttrs,ge)},ce.prototype.initFromNode=function(D,G,K,ge){this.sets=[]},oe.prototype.initFromNode=function(D,G,K,ge){this.contents=[]},ye.prototype.initFromNode=function(D,G,K,ge){var de=function(He,Tt,st,ot){var tt=null;st&&"begin"in st.attributes&&(tt=rn(He.tickRate,He.effectiveFrameRate,st.attributes.begin.value))===null&&Re(ot,"Malformed begin value "+st.attributes.begin.value+" (using 0)");var ht=null;st&&"dur"in st.attributes&&(ht=rn(He.tickRate,He.effectiveFrameRate,st.attributes.dur.value))===null&&Re(ot,"Malformed dur value "+st.attributes.dur.value+" (ignoring)");var yt=null;return st&&"end"in st.attributes&&(yt=rn(He.tickRate,He.effectiveFrameRate,st.attributes.end.value))===null&&Re(ot,"Malformed end value (ignoring)"),{explicit_begin:tt,explicit_end:yt,explicit_dur:ht}}(D,0,K,ge);this.explicit_begin=de.explicit_begin,this.explicit_end=de.explicit_end,this.explicit_dur=de.explicit_dur,this.timeContainer=function(He,Tt){var st=He&&"timeContainer"in He.attributes?He.attributes.timeContainer.value:null;return st&&st!=="par"?st==="seq"?"seq":(ne(Tt,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(K,ge)},be.prototype.initFromNode=function(D,G,K,ge){X.prototype.initFromNode.call(this,D,null,G,ge),ye.prototype.initFromNode.call(this,D,null,G,ge),ce.prototype.initFromNode.call(this,D,null,G,ge),R.prototype.initFromNode.call(this,D,null,G,ge),oe.prototype.initFromNode.call(this,D,null,G,ge),this.lang=K},Xe.prototype.initFromNode=function(D,G,K,ge,de){X.prototype.initFromNode.call(this,D,G,K,de),ye.prototype.initFromNode.call(this,D,G,K,de),ce.prototype.initFromNode.call(this,D,G,K,de),R.prototype.initFromNode.call(this,D,G,K,de),oe.prototype.initFromNode.call(this,D,G,K,de),this.lang=ge},Ie.prototype.initFromNode=function(D,G,K,ge,de){X.prototype.initFromNode.call(this,D,G,K,de),ye.prototype.initFromNode.call(this,D,G,K,de),ce.prototype.initFromNode.call(this,D,G,K,de),R.prototype.initFromNode.call(this,D,G,K,de),oe.prototype.initFromNode.call(this,D,G,K,de),this.lang=ge},Ge.prototype.initFromNode=function(D,G,K,ge,de,He){X.prototype.initFromNode.call(this,D,G,K,He),ye.prototype.initFromNode.call(this,D,G,K,He),ce.prototype.initFromNode.call(this,D,G,K,He),R.prototype.initFromNode.call(this,D,G,K,He),oe.prototype.initFromNode.call(this,D,G,K,He),this.space=de,this.lang=ge},at.prototype.initFromText=function(D,G,K,ge,de,He){ye.prototype.initFromNode.call(this,D,G,null,He),this.text=K,this.space=de,this.lang=ge},ft.prototype.initFromNode=function(D,G,K,ge,de){R.prototype.initFromNode.call(this,D,G,K,de),ye.prototype.initFromNode.call(this,D,G,K,de),this.lang=ge},We.prototype.createDefaultRegion=function(D){var G=new We;return se.call(G,""),X.call(G,{}),ce.call(G,[]),ye.call(G,0,Number.POSITIVE_INFINITY,null),this.lang=D,G},We.prototype.initFromNode=function(D,G,K,ge){se.prototype.initFromNode.call(this,D,null,G,ge),ye.prototype.initFromNode.call(this,D,null,G,ge),ce.prototype.initFromNode.call(this,D,null,G,ge),this.styleAttrs=et(G,ge),this.styleRefs=Ne(G),this.lang=K},ut.prototype.initFromNode=function(D,G,K,ge){ye.prototype.initFromNode.call(this,D,G,K,ge);var de=et(K,ge);for(var He in this.qname=null,this.value=null,de)if(de.hasOwnProperty(He)){if(this.qname){ne(ge,"More than one style specified on set");break}this.qname=He,this.value=de[He]}}})(p,typeof sax>"u"?w(5378):sax,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},506:function(b,p,w){var k=/firefox/i.test(navigator.userAgent);(function(C,E,y){function P(oe,ye,be,Xe){var Ie;if(be.kind==="region")(Ie=document.createElement("div")).style.position="absolute";else if(be.kind==="body")Ie=document.createElement("div");else if(be.kind==="div")Ie=document.createElement("div");else if(be.kind==="image"){if(Ie=document.createElement("img"),oe.imgResolver!==null&&be.src!==null){var Ge=oe.imgResolver(be.src,Ie);Ge&&(Ie.src=Ge),Ie.height=oe.regionH,Ie.width=oe.regionW}}else if(be.kind==="p")Ie=document.createElement("p");else if(be.kind==="span")if(be.styleAttrs[y.byName.ruby.qname]==="container")Ie=document.createElement("ruby"),oe.ruby=!0;else if(be.styleAttrs[y.byName.ruby.qname]==="base")Ie=document.createElement("span");else if(be.styleAttrs[y.byName.ruby.qname]==="text")Ie=document.createElement("rt");else if(be.styleAttrs[y.byName.ruby.qname]==="baseContainer")Ie=document.createElement("rbc");else if(be.styleAttrs[y.byName.ruby.qname]==="textContainer")Ie=document.createElement("rtc");else{if(be.styleAttrs[y.byName.ruby.qname]==="delimiter")return;Ie=document.createElement("span")}else be.kind==="br"&&(Ie=document.createElement("br"));if(Ie){if(be.lang&&(be.kind!=="region"&&be.lang===Xe.lang||(Ie.lang=be.lang)),ye.appendChild(Ie),Ie.style.margin="0",be.kind==="region"){var at=be.styleAttrs[y.byName.writingMode.qname];at==="lrtb"||at==="lr"?(oe.ipd="lr",oe.bpd="tb"):at==="rltb"||at==="rl"?(oe.ipd="rl",oe.bpd="tb"):at==="tblr"?(oe.ipd="tb",oe.bpd="lr"):at!=="tbrl"&&at!=="tb"||(oe.ipd="tb",oe.bpd="rl")}else if(be.kind==="p"&&oe.bpd==="tb"){var ft=be.styleAttrs[y.byName.direction.qname];oe.ipd=ft==="ltr"?"lr":"rl"}for(var We=0;We<Z.length;We++){var ut=Z[We],At=be.styleAttrs[ut.qname];At!==void 0&&ut.map!==null&&ut.map(oe,Ie,be,At)}var Ne=Ie,et=be.styleAttrs[y.byName.linePadding.qname];if(et&&!et.isZero()){var dt=et.toUsedLength(oe.w,oe.h);if(dt>0){var rn=Math.ceil(dt)+"px";oe.bpd==="tb"?(Ne.style.paddingLeft=rn,Ne.style.paddingRight=rn):(Ne.style.paddingTop=rn,Ne.style.paddingBottom=rn),oe.lp=et}}var Yt=be.styleAttrs[y.byName.multiRowAlign.qname];if(Yt&&Yt!=="auto"){var St=document.createElement("span");St.style.display="inline-block",St.style.textAlign=Yt,Ie.appendChild(St),Ne=St,oe.mra=Yt}var kt=be.styleAttrs[y.byName.rubyReserve.qname];if(kt&&kt[0]!=="none"&&(oe.rubyReserve=kt),be.styleAttrs[y.byName.fillLineGap.qname]&&(oe.flg=!0),be.kind==="span"&&be.text){var Re=be.styleAttrs[y.byName.textEmphasis.qname];if(Re&&Re.style!=="none"&&(oe.textEmphasis=!0),y.byName.textCombine.qname in be.styleAttrs&&be.styleAttrs[y.byName.textCombine.qname]==="all")Ie.textContent=be.text,Ie._isd_element=be,Re&&I(oe,Ie,0,Re);else for(var ne="",Ue=0;Ue<be.text.length;Ue++){ne+=be.text.charAt(Ue);var L=be.text.charCodeAt(Ue);if(L<55296||L>56319||Ue===be.text.length-1){var D=document.createElement("span");D.textContent=ne,Re&&I(oe,D,0,Re),Ie.appendChild(D),ne="",D._isd_element=be}}}if("contents"in be)for(var G=0;G<be.contents.length;G++)P(oe,Ne,be.contents[G],be);var K=[];if(be.kind==="p"&&(_(oe,Ne,K,null),oe.rubyReserve&&(function(st,ot){for(var tt=0;tt<st.length;tt++){var ht,yt,Et=document.createElement("ruby"),Mt=document.createElement("span");Mt.textContent="​",Et.appendChild(Mt);var _n,nn=ot.rubyReserve[1].toUsedLength(ot.w,ot.h)+"px";ot.rubyReserve[0]==="both"||ot.rubyReserve[0]==="outside"&&st.length==1?((ht=document.createElement("rtc")).style[se]=Q?"after":"under",ht.textContent="​",ht.style.fontSize=nn,(yt=document.createElement("rtc")).style[se]=Q?"before":"over",yt.textContent="​",yt.style.fontSize=nn,Et.appendChild(ht),Et.appendChild(yt)):((ht=document.createElement("rtc")).textContent="​",ht.style.fontSize=nn,_n=ot.rubyReserve[0]==="after"||ot.rubyReserve[0]==="outside"&&tt>0?Q?"after":ot.bpd==="tb"||ot.bpd==="rl"?"under":"over":Q?"before":ot.bpd==="tb"||ot.bpd==="rl"?"over":"under",ht.style[se]=_n,Et.appendChild(ht));for(var cn=null,Ft=0;Ft<st[tt].rbc.length;Ft++)if(st[tt].rbc[Ft].localName==="ruby"){cn=st[tt].rbc[Ft];for(var Gn=0;Gn<cn.style.length;Gn++)Et.style.setProperty(cn.style.item(Gn),cn.style.getPropertyValue(cn.style.item(Gn)));break}(cn=cn||st[tt].elements[0].node).parentElement.insertBefore(Et,cn)}}(K,oe),oe.rubyReserve=null),(oe.ruby||oe.rubyReserve)&&(function(st,ot){for(var tt=0;tt<st.length;tt++)for(var ht=0;ht<st[tt].rbc.length;ht++){var yt;st[tt].rbc[ht].style[se]||(yt=Q?tt===0?"before":"after":ot.bpd==="tb"||ot.bpd==="rl"?tt===0?"over":"under":tt===0?"under":"over",st[tt].rbc[ht].style[se]=yt)}}(K,oe),oe.ruby=null),oe.textEmphasis&&(function(st,ot){for(var tt=0;tt<st.length;tt++)for(var ht=0;ht<st[tt].te.length;ht++){var yt;st[tt].te[ht].style[X]&&st[tt].te[ht].style[X]!=="none"||(yt=ot.bpd==="tb"?tt===0?"left over":"left under":ot.bpd==="rl"?tt===0?"right under":"left under":tt===0?"left under":"right under",st[tt].te[ht].style[X]=yt)}}(K,oe),oe.textEmphasis=null),oe.mra&&(function(st){for(var ot=0;ot<st.length-1;ot++){var tt=st[ot].elements.length;if(tt!==0&&st[ot].br===!1){var ht=document.createElement("br"),yt=st[ot].elements[tt-1].node;yt.parentElement.insertBefore(ht,yt.nextSibling)}}}(K),oe.mra=null),oe.lp&&(function(st,ot,tt){if(st!==null)for(var ht=0;ht<st.length;ht++){var yt=st[ht].elements.length,Et=Math.ceil(ot)+"px",Mt="-"+Math.ceil(ot)+"px";if(yt!==0){var _n=st[ht].elements[st[ht].start_elem],nn=st[ht].elements[st[ht].end_elem];if(_n===nn){var cn=_n.node.getBoundingClientRect();if(cn.width==0||cn.height==0)continue}tt.ipd==="lr"?(_n.node.style.marginLeft=Mt,_n.node.style.paddingLeft=Et):tt.ipd==="rl"?(_n.node.style.paddingRight=Et,_n.node.style.marginRight=Mt):tt.ipd==="tb"&&(_n.node.style.paddingTop=Et,_n.node.style.marginTop=Mt),tt.ipd==="lr"?(k||(nn.node.style.marginRight=Mt),nn.node.style.paddingRight=Et):tt.ipd==="rl"?(nn.node.style.paddingLeft=Et,k||(nn.node.style.marginLeft=Mt)):tt.ipd==="tb"&&(nn.node.style.paddingBottom=Et,nn.node.style.marginBottom=Mt)}}}(K,oe.lp.toUsedLength(oe.w,oe.h),oe),oe.lp=null),function(st,ot){for(var tt=0;tt<st.length;tt++)for(var ht=st[tt],yt=1;yt<ht.elements.length;){var Et=ht.elements[yt-1],Mt=ht.elements[yt];T(Et.node,Mt.node,ot)?ht.elements.splice(yt,1):yt++}for(var _n,nn,cn=[],Ft=0;Ft<st.length;Ft++)for(var Gn=0;Gn<st[Ft].elements.length;Gn++)(nn=m(_n=st[Ft].elements[Gn].node,cn,!1))&&(_n.style.backgroundColor=nn);for(var Sr=0;Sr<cn.length;Sr++)cn[Sr].style.backgroundColor=""}(K,oe),oe.flg)){var ge=M(Ne.getBoundingClientRect(),oe);(function(st,ot,tt,ht,yt){for(var Et=Math.sign(tt-ot),Mt=0;Mt<=st.length;Mt++){var _n,nn,cn,Ft;if(_n=Mt===0?Math.round(ot):Mt===st.length?Math.round(tt):Math.round((st[Mt-1].after+st[Mt].before)/2),Mt>0&&st[Mt-1])for(cn=0;cn<st[Mt-1].elements.length;cn++)nn=Et*(_n-(Ft=st[Mt-1].elements[cn]).after)+"px",ht.bpd==="lr"?Ft.node.style.paddingRight=nn:ht.bpd==="rl"?Ft.node.style.paddingLeft=nn:ht.bpd==="tb"&&(Ft.node.style.paddingBottom=nn);if(Mt<st.length)for(cn=0;cn<st[Mt].elements.length;cn++)nn=Et*((Ft=st[Mt].elements[cn]).before-_n)+"px",ht.bpd==="lr"?Ft.node.style.paddingLeft=nn:ht.bpd==="rl"?Ft.node.style.paddingRight=nn:ht.bpd==="tb"&&(Ft.node.style.paddingTop=nn)}})(K,ge.before,ge.after,oe),oe.flg=null}if(be.kind==="region"&&oe.bpd==="tb"&&oe.enableRollUp&&be.contents.length>0&&be.styleAttrs[y.byName.displayAlign.qname]==="after"){_(oe,Ne,K,null);var de=new U(be.id===""?"_":be.id,K);if(oe.currentISDState[de.id]=de,oe.previousISDState&&de.id in oe.previousISDState&&oe.previousISDState[de.id].plist.length>0&&de.plist.length>1&&de.plist[de.plist.length-2].text===oe.previousISDState[de.id].plist[oe.previousISDState[de.id].plist.length-1].text){var He=Ie.firstElementChild,Tt=de.plist[de.plist.length-1].after-de.plist[de.plist.length-1].before;He.style.bottom="-"+Tt+"px",He.style.transition="transform 0.4s",He.style.position="relative",He.style.transform="translateY(-"+Tt+"px)"}}}else ce(oe.errorHandler,"Error processing ISD element kind: "+be.kind)}function m(oe,ye,be){return oe.style.backgroundColor?(be&&!ye.includes(oe)&&ye.push(oe),oe.style.backgroundColor):oe.parentElement.nodeName==="SPAN"||oe.parentElement.nodeName==="RUBY"||oe.parentElement.nodeName==="RBC"||oe.parentElement.nodeName==="RTC"||oe.parentElement.nodeName==="RT"?m(oe.parentElement,ye,!0):void 0}function T(oe,ye,be){if(oe.tagName==="SPAN"&&ye.tagName==="SPAN"&&oe._isd_element===ye._isd_element){if(!oe._isd_element)return ce(be.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;oe.textContent+=ye.textContent;for(var Xe=0;Xe<ye.style.length;Xe++){var Ie=ye.style[Xe];(Ie.indexOf("border")>=0||Ie.indexOf("padding")>=0||Ie.indexOf("margin")>=0)&&(oe.style[Ie]=ye.style[Ie])}return ye.parentElement.removeChild(ye),!0}return!1}function U(oe,ye){this.id=oe,this.plist=ye}function M(oe,ye){var be={before:null,after:null,start:null,end:null};return ye.bpd==="tb"?(be.before=oe.top,be.after=oe.bottom,ye.ipd==="lr"?(be.start=oe.left,be.end=oe.right):(be.start=oe.right,be.end=oe.left)):ye.bpd==="lr"?(be.before=oe.left,be.after=oe.right,be.start=oe.top,be.end=oe.bottom):ye.bpd==="rl"&&(be.before=oe.right,be.after=oe.left,be.start=oe.top,be.end=oe.bottom),be}function _(oe,ye,be,Xe){if(ye.localName!=="rt"&&ye.localName!=="rtc"){var Ie,Ge,at,ft,We=ye.style.backgroundColor||Xe;if(ye.childElementCount===0)if(ye.localName==="span"||ye.localName==="rb"){var ut=M(ye.getBoundingClientRect(),oe);if(be.length!==0&&(Ie=ut.before,Ge=ut.after,at=be[be.length-1].before,Ge<(ft=be[be.length-1].after)&&Ie>at||ft<=Ge&&at>=Ie)){var At=Math.sign(ut.after-ut.before),Ne=Math.sign(ut.end-ut.start);At*(ut.before-be[be.length-1].before)<0&&(be[be.length-1].before=ut.before),At*(ut.after-be[be.length-1].after)>0&&(be[be.length-1].after=ut.after),Ne*(ut.start-be[be.length-1].start)<0&&(be[be.length-1].start=ut.start,be[be.length-1].start_elem=be[be.length-1].elements.length),Ne*(ut.end-be[be.length-1].end)>0&&(be[be.length-1].end=ut.end,be[be.length-1].end_elem=be[be.length-1].elements.length)}else be.push({before:ut.before,after:ut.after,start:ut.start,end:ut.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});be[be.length-1].text+=ye.textContent,be[be.length-1].elements.push({node:ye,bgcolor:We,before:ut.before,after:ut.after})}else ye.localName==="br"&&be.length!==0&&(be[be.length-1].br=!0);else for(var et=ye.firstChild;et;)et.nodeType===Node.ELEMENT_NODE&&(_(oe,et,be,We),et.localName==="ruby"||et.localName==="rtc"?be.length>0&&be[be.length-1].rbc.push(et):et.localName==="span"&&et.style[R]&&et.style[R]!=="none"&&be.length>0&&be[be.length-1].te.push(et)),et=et.nextSibling}}function I(oe,ye,be,Xe){var Ie;Xe.style!=="none"&&(Xe.style==="auto"?ye.style[R]="filled":ye.style[R]=Xe.style+" "+Xe.symbol,(Xe.position==="before"||Xe.position==="after")&&(Ie=oe.bpd==="tb"?Xe.position==="before"?"left over":"left under":oe.bpd==="rl"?Xe.position==="before"?"right under":"left under":Xe.position==="before"?"left under":"right under",ye.style[X]=Ie))}function x(oe,ye){this.qname=oe,this.map=ye}C.render=function(oe,ye,be,Xe,Ie,Ge,at,ft,We){var ut=Xe||ye.clientHeight,At=Ie||ye.clientWidth;if(oe.aspectRatio!==null){var Ne=ut*oe.aspectRatio;Ne>At?ut=Math.round(At/oe.aspectRatio):At=Ne}var et=document.createElement("div");et.style.position="relative",et.style.width=At+"px",et.style.height=ut+"px",et.style.margin="auto",et.style.top=0,et.style.bottom=0,et.style.left=0,et.style.right=0,et.style.zIndex=0;var dt={h:ut,w:At,regionH:null,regionW:null,imgResolver:be,displayForcedOnlyMode:Ge||!1,isd:oe,errorHandler:at,previousISDState:ft,enableRollUp:We||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(ye.appendChild(et),"contents"in oe)for(var rn=0;rn<oe.contents.length;rn++)P(dt,et,oe.contents[rn],oe);return dt.currentISDState};for(var Z=[new x("http://www.w3.org/ns/ttml#styling backgroundColor",function(oe,ye,be,Xe){Xe[3]!==0&&(ye.style.backgroundColor="rgba("+Xe[0].toString()+","+Xe[1].toString()+","+Xe[2].toString()+","+(Xe[3]/255).toString()+")")}),new x("http://www.w3.org/ns/ttml#styling color",function(oe,ye,be,Xe){ye.style.color="rgba("+Xe[0].toString()+","+Xe[1].toString()+","+Xe[2].toString()+","+(Xe[3]/255).toString()+")"}),new x("http://www.w3.org/ns/ttml#styling direction",function(oe,ye,be,Xe){ye.style.direction=Xe}),new x("http://www.w3.org/ns/ttml#styling display",function(oe,ye,be,Xe){}),new x("http://www.w3.org/ns/ttml#styling displayAlign",function(oe,ye,be,Xe){ye.style.display="flex",ye.style.flexDirection="column",Xe==="before"?ye.style.justifyContent="flex-start":Xe==="center"?ye.style.justifyContent="center":Xe==="after"&&(ye.style.justifyContent="flex-end")}),new x("http://www.w3.org/ns/ttml#styling extent",function(oe,ye,be,Xe){oe.regionH=Xe.h.toUsedLength(oe.w,oe.h),oe.regionW=Xe.w.toUsedLength(oe.w,oe.h);var Ie=0,Ge=0,at=be.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];at&&(Ie=at[0].toUsedLength(oe.w,oe.h)+at[2].toUsedLength(oe.w,oe.h),Ge=at[1].toUsedLength(oe.w,oe.h)+at[3].toUsedLength(oe.w,oe.h)),ye.style.height=oe.regionH-Ie+"px",ye.style.width=oe.regionW-Ge+"px"}),new x("http://www.w3.org/ns/ttml#styling fontFamily",function(oe,ye,be,Xe){for(var Ie=[],Ge=0;Ge<Xe.length;Ge++)Xe[Ge]=Xe[Ge].trim(),Xe[Ge]==="monospaceSerif"?(Ie.push("Courier New"),Ie.push('"Liberation Mono"'),Ie.push("Courier"),Ie.push("monospace")):Xe[Ge]==="proportionalSansSerif"?(Ie.push("Arial"),Ie.push("Helvetica"),Ie.push('"Liberation Sans"'),Ie.push("sans-serif")):Xe[Ge]==="monospace"?Ie.push("monospace"):Xe[Ge]==="sansSerif"?Ie.push("sans-serif"):Xe[Ge]==="serif"?Ie.push("serif"):Xe[Ge]==="monospaceSansSerif"?(Ie.push("Consolas"),Ie.push("monospace")):Xe[Ge]==="proportionalSerif"?Ie.push("serif"):Ie.push(Xe[Ge]);if(Ie.length>0){for(var at=[Ie[0]],ft=1;ft<Ie.length;ft++)at.indexOf(Ie[ft])==-1&&at.push(Ie[ft]);Ie=at}ye.style.fontFamily=Ie.join(",")}),new x("http://www.w3.org/ns/ttml#styling shear",function(oe,ye,be,Xe){if(Xe!==0){var Ie=-.9*Xe;oe.bpd==="tb"?ye.style.transform="skewX("+Ie+"deg)":ye.style.transform="skewY("+Ie+"deg)"}}),new x("http://www.w3.org/ns/ttml#styling fontSize",function(oe,ye,be,Xe){ye.style.fontSize=Xe.toUsedLength(oe.w,oe.h)+"px"}),new x("http://www.w3.org/ns/ttml#styling fontStyle",function(oe,ye,be,Xe){ye.style.fontStyle=Xe}),new x("http://www.w3.org/ns/ttml#styling fontWeight",function(oe,ye,be,Xe){ye.style.fontWeight=Xe}),new x("http://www.w3.org/ns/ttml#styling lineHeight",function(oe,ye,be,Xe){ye.style.lineHeight=Xe==="normal"?"normal":Xe.toUsedLength(oe.w,oe.h)+"px"}),new x("http://www.w3.org/ns/ttml#styling opacity",function(oe,ye,be,Xe){ye.style.opacity=Xe}),new x("http://www.w3.org/ns/ttml#styling origin",function(oe,ye,be,Xe){ye.style.top=Xe.h.toUsedLength(oe.w,oe.h)+"px",ye.style.left=Xe.w.toUsedLength(oe.w,oe.h)+"px"}),new x("http://www.w3.org/ns/ttml#styling overflow",function(oe,ye,be,Xe){ye.style.overflow=Xe}),new x("http://www.w3.org/ns/ttml#styling padding",function(oe,ye,be,Xe){var Ie=[];Ie[0]=Xe[0].toUsedLength(oe.w,oe.h)+"px",Ie[1]=Xe[3].toUsedLength(oe.w,oe.h)+"px",Ie[2]=Xe[2].toUsedLength(oe.w,oe.h)+"px",Ie[3]=Xe[1].toUsedLength(oe.w,oe.h)+"px",ye.style.padding=Ie.join(" ")}),new x("http://www.w3.org/ns/ttml#styling position",function(oe,ye,be,Xe){ye.style.top=Xe.h.toUsedLength(oe.w,oe.h)+"px",ye.style.left=Xe.w.toUsedLength(oe.w,oe.h)+"px"}),new x("http://www.w3.org/ns/ttml#styling rubyAlign",function(oe,ye,be,Xe){ye.style.rubyAlign=Xe==="spaceAround"?"space-around":"center"}),new x("http://www.w3.org/ns/ttml#styling rubyPosition",function(oe,ye,be,Xe){var Ie;Xe!=="before"&&Xe!=="after"||(Ie=Q?Xe:oe.bpd==="tb"||oe.bpd==="rl"?Xe==="before"?"over":"under":Xe==="before"?"under":"over",ye.parentElement.style[se]=Ie)}),new x("http://www.w3.org/ns/ttml#styling showBackground",null),new x("http://www.w3.org/ns/ttml#styling textAlign",function(oe,ye,be,Xe){var Ie;Ie=Xe==="start"?oe.ipd==="rl"?"right":"left":Xe==="end"?oe.ipd==="rl"?"left":"right":Xe,ye.style.textAlign=Ie}),new x("http://www.w3.org/ns/ttml#styling textDecoration",function(oe,ye,be,Xe){ye.style.textDecoration=Xe.join(" ").replace("lineThrough","line-through")}),new x("http://www.w3.org/ns/ttml#styling textOutline",function(oe,ye,be,Xe){}),new x("http://www.w3.org/ns/ttml#styling textShadow",function(oe,ye,be,Xe){var Ie=be.styleAttrs[y.byName.textOutline.qname];if(Xe==="none"&&Ie==="none")ye.style.textShadow="";else{var Ge=[];if(Ie!=="none"){var at="rgba("+Ie.color[0].toString()+","+Ie.color[1].toString()+","+Ie.color[2].toString()+","+(Ie.color[3]/255).toString()+")";Ge.push("1px 1px 1px "+at),Ge.push("-1px 1px 1px "+at),Ge.push("1px -1px 1px "+at),Ge.push("-1px -1px 1px "+at)}if(Xe!=="none")for(var ft=0;ft<Xe.length;ft++)Ge.push(Xe[ft].x_off.toUsedLength(oe.w,oe.h)+"px "+Xe[ft].y_off.toUsedLength(oe.w,oe.h)+"px "+Xe[ft].b_radius.toUsedLength(oe.w,oe.h)+"px rgba("+Xe[ft].color[0].toString()+","+Xe[ft].color[1].toString()+","+Xe[ft].color[2].toString()+","+(Xe[ft].color[3]/255).toString()+")");ye.style.textShadow=Ge.join(",")}}),new x("http://www.w3.org/ns/ttml#styling textCombine",function(oe,ye,be,Xe){ye.style.textCombineUpright=Xe}),new x("http://www.w3.org/ns/ttml#styling textEmphasis",function(oe,ye,be,Xe){}),new x("http://www.w3.org/ns/ttml#styling unicodeBidi",function(oe,ye,be,Xe){var Ie;Ie=Xe==="bidiOverride"?"bidi-override":Xe,ye.style.unicodeBidi=Ie}),new x("http://www.w3.org/ns/ttml#styling visibility",function(oe,ye,be,Xe){ye.style.visibility=Xe}),new x("http://www.w3.org/ns/ttml#styling wrapOption",function(oe,ye,be,Xe){Xe==="wrap"?be.space==="preserve"?ye.style.whiteSpace="pre-wrap":ye.style.whiteSpace="normal":be.space==="preserve"?ye.style.whiteSpace="pre":ye.style.whiteSpace="noWrap"}),new x("http://www.w3.org/ns/ttml#styling writingMode",function(oe,ye,be,Xe){Xe==="lrtb"||Xe==="lr"||Xe==="rltb"||Xe==="rl"?ye.style.writingMode="horizontal-tb":Xe==="tblr"?ye.style.writingMode="vertical-lr":Xe!=="tbrl"&&Xe!=="tb"||(ye.style.writingMode="vertical-rl")}),new x("http://www.w3.org/ns/ttml#styling zIndex",function(oe,ye,be,Xe){ye.style.zIndex=Xe}),new x("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(oe,ye,be,Xe){oe.displayForcedOnlyMode&&Xe===!1&&(ye.style.visibility="hidden")})],Y={},$=0;$<Z.length;$++)Y[Z[$].qname]=Z[$];var Q="webkitRubyPosition"in window.getComputedStyle(document.documentElement),se=Q?"webkitRubyPosition":"rubyPosition",R="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",X="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function ce(oe,ye){if(oe&&oe.error&&oe.error(ye))throw ye}})(p,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4080:function(b,p,w){(function(k,C,E,y){k.generateISD=function(x,Z,Y){var $,Q=new M(x),se={},R={},X=x.head.styling.initials[E.byName.showBackground.qname],ce=x.head.styling.initials[E.byName.backgroundColor.qname];for(var oe in x.head.layout.regions)if(x.head.layout.regions.hasOwnProperty(oe)){var ye=x.head.layout.regions[oe],be=ye.styleAttrs[E.byName.showBackground.qname]||X,Xe=ye.styleAttrs[E.byName.backgroundColor.qname]||ce;R[ye.id]=(be==="always"||be===void 0)&&Xe!==void 0&&!(Z<ye.begin||Z>=ye.end)}for(var Ie in x.body&&x.body.regionID&&(R[x.body.regionID]=!0),$=x.body!==null?function at(ft,We){if(We.contents){var ut={};for(var At in We)We.hasOwnProperty(At)&&(ut[At]=We[At]);return ut.contents=[],We.contents.filter(function(Ne){return!(ft<Ne.begin||ft>=Ne.end)}).forEach(function(Ne){var et=at(ft,Ne);et.regionID&&(R[et.regionID]=!0),et!==null&&ut.contents.push(et)}),ut}return We}(Z,x.body):null,R[""]!==void 0&&(R[""]=!0),R)if(R[Ie]){var Ge=m(x,Z,x.head.layout.regions[Ie],$,null,"",x.head.layout.regions[Ie],Y,se);Ge!==null&&Q.contents.push(Ge.element)}return Q};var P=[E.byName.color.qname,E.byName.textCombine.qname,E.byName.textDecoration.qname,E.byName.textEmphasis.qname,E.byName.textOutline.qname,E.byName.textShadow.qname];function m(x,Z,Y,$,Q,se,R,X,ce){if(Z<R.begin||Z>=R.end)return null;var oe="regionID"in R&&R.regionID!==""?R.regionID:se;if(Q!==null&&oe!==Y.id&&(!("contents"in R)||"contents"in R&&R.contents.length===0||oe!==""))return null;var ye=new _(R);if("sets"in R)for(var be=0;be<R.sets.length;be++)Z<R.sets[be].begin||Z>=R.sets[be].end||(ye.styleAttrs[R.sets[be].qname]=R.sets[be].value);var Xe={};for(var Ie in ye.styleAttrs)if(ye.styleAttrs.hasOwnProperty(Ie)&&(Xe[Ie]=!0,ye.kind==="region"&&Ie===E.byName.writingMode.qname&&!(E.byName.direction.qname in ye.styleAttrs))){var Ge=ye.styleAttrs[Ie];Ge==="lrtb"||Ge==="lr"?ye.styleAttrs[E.byName.direction.qname]="ltr":Ge!=="rltb"&&Ge!=="rl"||(ye.styleAttrs[E.byName.direction.qname]="rtl")}if(Q!==null)for(var at=0;at<E.all.length;at++){var ft=E.all[at];if(ft.qname===E.byName.textDecoration.qname){var We=Q.styleAttrs[ft.qname],ut=ye.styleAttrs[ft.qname],At=[];ut===void 0?At=We:ut.indexOf("none")===-1?((ut.indexOf("noUnderline")===-1&&We.indexOf("underline")!==-1||ut.indexOf("underline")!==-1)&&At.push("underline"),(ut.indexOf("noLineThrough")===-1&&We.indexOf("lineThrough")!==-1||ut.indexOf("lineThrough")!==-1)&&At.push("lineThrough"),(ut.indexOf("noOverline")===-1&&We.indexOf("overline")!==-1||ut.indexOf("overline")!==-1)&&At.push("overline")):At.push("none"),ye.styleAttrs[ft.qname]=At}else if(ft.qname!==E.byName.fontSize.qname||ft.qname in ye.styleAttrs||ye.kind!=="span"||ye.styleAttrs[E.byName.ruby.qname]!=="textContainer")if(ft.qname!==E.byName.fontSize.qname||ft.qname in ye.styleAttrs||ye.kind!=="span"||ye.styleAttrs[E.byName.ruby.qname]!=="text")ft.inherit&&ft.qname in Q.styleAttrs&&!(ft.qname in ye.styleAttrs)&&(ye.styleAttrs[ft.qname]=Q.styleAttrs[ft.qname]);else{var Ne=Q.styleAttrs[E.byName.fontSize.qname];Q.styleAttrs[E.byName.ruby.qname]==="textContainer"?ye.styleAttrs[ft.qname]=Ne:ye.styleAttrs[ft.qname]=new y.ComputedLength(.5*Ne.rw,.5*Ne.rh)}else{var et=Q.styleAttrs[E.byName.fontSize.qname];ye.styleAttrs[ft.qname]=new y.ComputedLength(.5*et.rw,.5*et.rh)}}for(var dt=0;dt<E.all.length;dt++){var rn=E.all[dt];if(!(rn.qname in ye.styleAttrs)&&!(rn.qname===E.byName.position.qname&&E.byName.origin.qname in ye.styleAttrs||rn.qname===E.byName.origin.qname&&E.byName.position.qname in ye.styleAttrs)){var Yt=x.head.styling.initials[rn.qname]||rn.initial;if(Yt!==null&&(ye.kind==="region"||rn.inherit===!1&&Yt!==null)){var St=rn.parse(Yt);St!==null?(ye.styleAttrs[rn.qname]=St,Xe[rn.qname]=!0):I(X,"Invalid initial value for '"+rn.qname+"' on element '"+ye.kind)}}}for(var kt=0;kt<E.all.length;kt++){var Re=E.all[kt];if(Re.qname in Xe&&Re.compute!==null){var ne=Re.compute(x,Q,ye,ye.styleAttrs[Re.qname],ce);ne!==null?ye.styleAttrs[Re.qname]=ne:(ye.styleAttrs[Re.qname]=Re.compute(x,Q,ye,Re.parse(Re.initial),ce),I(X,"Style '"+Re.qname+"' on element '"+ye.kind+"' cannot be computed"))}}if(ye.styleAttrs[E.byName.display.qname]==="none")return null;var Ue=null;Q===null?Ue=$===null?[]:[$]:"contents"in R&&(Ue=R.contents);for(var L=0;Ue!==null&&L<Ue.length;L++){var D=m(x,Z,Y,$,ye,oe,Ue[L],X,ce);D!==null&&ye.contents.push(D.element)}for(var G in ye.styleAttrs)if(ye.styleAttrs.hasOwnProperty(G)){var K=!1;if(ye.kind==="span"){var ge=ye.styleAttrs[E.byName.ruby.qname];(K=(ge==="container"||ge==="textContainer"||ge==="baseContainer")&&P.indexOf(G)!==-1)||(K=ge!=="container"&&G===E.byName.rubyAlign.qname),K||(K=!(ge==="textContainer"||ge==="text")&&G===E.byName.rubyPosition.qname)}if(!K){var de=E.byQName[G];"applies"in de&&(K=de.applies.indexOf(ye.kind)===-1)}K&&delete ye.styleAttrs[G]}var He=ye.styleAttrs[E.byName.ruby.qname];if(ye.kind==="p"||ye.kind==="span"&&(He==="textContainer"||He==="text")){var Tt=[];T(ye,Tt),function(st){for(var ot,tt=0;tt<st.length;)if((ot=st[tt]).kind!=="br"&&ot.space!=="preserve"){var ht=ot.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(ht)&&(tt===0||(yt=st[tt-1]).kind==="br"||/[\r\n\t ]$/.test(yt.text))&&(ht=ht.substring(1)),ot.text=ht,ht.length===0?st.splice(tt,1):tt++}else tt++;var yt,Et;for(tt=0;tt<st.length;tt++)(ot=st[tt]).kind!=="br"&&ot.space!=="preserve"?/[ ]$/.test(ot.text)&&(tt===st.length-1||(Et=st[tt+1]).kind==="br"||Et.space==="preserve"&&/^[\r\n]/.test(Et.text))&&(ot.text=ot.text.slice(0,-1)):tt++}(Tt),U(ye)}return ye.kind==="div"&&E.byName.backgroundImage.qname in ye.styleAttrs||ye.kind==="br"||ye.kind==="image"||"contents"in ye&&ye.contents.length>0||ye.kind==="span"&&ye.text!==null||ye.kind==="region"&&ye.styleAttrs[E.byName.showBackground.qname]==="always"?{region_id:oe,element:ye}:null}function T(x,Z){if("contents"in x)for(var Y=0;Y<x.contents.length;Y++){var $=x.contents[Y],Q=$.styleAttrs[E.byName.ruby.qname];($.kind!=="span"||Q!=="textContainer"&&Q!=="text")&&("contents"in $?T($,Z):($.kind==="span"&&$.text.length!==0||$.kind==="br")&&Z.push($))}}function U(x){if(x.kind==="br")return!1;if("text"in x)return x.text.length===0;if("contents"in x){for(var Z=x.contents.length;Z--;)U(x.contents[Z])&&x.contents.splice(Z,1);return x.contents.length===0}}function M(x){this.contents=[],this.aspectRatio=x.aspectRatio,this.lang=x.lang}function _(x){for(var Z in this.kind=x.kind||"region",this.lang=x.lang,x.id&&(this.id=x.id),this.styleAttrs={},x.styleAttrs)x.styleAttrs.hasOwnProperty(Z)&&(this.styleAttrs[Z]=x.styleAttrs[Z]);"src"in x&&(this.src=x.src),"type"in x&&(this.type=x.type),"text"in x?this.text=x.text:(this.kind==="region"||"contents"in x)&&(this.contents=[]),"space"in x&&(this.space=x.space)}function I(x,Z){if(x&&x.error&&x.error(Z))throw Z}})(p,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4403:function(b,p,w){p.generateISD=w(4080).generateISD,p.fromXML=w(3362).fromXML,p.renderHTML=w(506).render},210:function(b,p){(function(w){w.ns_tt="http://www.w3.org/ns/ttml",w.ns_tts="http://www.w3.org/ns/ttml#styling",w.ns_ttp="http://www.w3.org/ns/ttml#parameter",w.ns_xml="http://www.w3.org/XML/1998/namespace",w.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",w.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",w.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",w.ns_ebutts="urn:ebu:tt:style"})(p)},6811:function(b,p,w){(function(k,C,E){function y(T,U,M,_,I,x,Z,Y){this.name=U,this.ns=T,this.qname=T+" "+U,this.inherit=I,this.animatable=x,this.initial=M,this.applies=_,this.parse=Z,this.compute=Y}for(var P in k.all=[new y(C.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,E.parseColor,null),new y(C.ns_tts,"color","white",["span"],!0,!0,E.parseColor,null),new y(C.ns_tts,"direction","ltr",["p","span"],!0,!0,function(T){return T},null),new y(C.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(T){return T},null),new y(C.ns_tts,"displayAlign","before",["region"],!1,!0,function(T){return T},null),new y(C.ns_tts,"extent","auto",["tt","region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var M=E.parseLength(U[0]),_=E.parseLength(U[1]);return _&&M?{h:_,w:M}:null},function(T,U,M,_,I){var x,Z;if(_==="auto")x=new E.ComputedLength(0,1);else if((x=E.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")Z=new E.ComputedLength(1,0);else if((Z=E.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:x,w:Z}}),new y(C.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(T){for(var U=T.split(","),M=[],_=0;_<U.length;_++)U[_]=U[_].trim(),U[_].charAt(0)!=="'"&&U[_].charAt(0)!=='"'&&U[_]==="default"?M.push("monospaceSerif"):M.push(U[_]);return M},null),new y(C.ns_tts,"shear","0%",["p"],!0,!0,E.parseLength,function(T,U,M,_){return _.unit!=="%"?null:Math.abs(_.value)>100?100*Math.sign(_.value):_.value}),new y(C.ns_tts,"fontSize","1c",["span","p"],!0,!0,E.parseLength,function(T,U,M,_,I){return E.toComputedLength(_.value,_.unit,U!==null?U.styleAttrs[k.byName.fontSize.qname]:T.cellLength.h,U!==null?U.styleAttrs[k.byName.fontSize.qname]:T.cellLength.h,T.cellLength.h,T.pxLength.h)}),new y(C.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(T){return T},null),new y(C.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(T){return T},null),new y(C.ns_tts,"lineHeight","normal",["p"],!0,!0,function(T){return T==="normal"?T:E.parseLength(T)},function(T,U,M,_,I){var x;if(_==="normal")x=_;else if((x=E.toComputedLength(_.value,_.unit,M.styleAttrs[k.byName.fontSize.qname],M.styleAttrs[k.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null)return null;return x}),new y(C.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new y(C.ns_tts,"origin","auto",["region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var M=E.parseLength(U[0]),_=E.parseLength(U[1]);return _&&M?{h:_,w:M}:null},function(T,U,M,_,I){var x,Z;if(_==="auto")x=new E.ComputedLength(0,0);else if((x=E.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")Z=new E.ComputedLength(0,0);else if((Z=E.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:x,w:Z}}),new y(C.ns_tts,"overflow","hidden",["region"],!1,!0,function(T){return T},null),new y(C.ns_tts,"padding","0px",["region"],!1,!0,function(T){var U=T.split(" ");if(U.length>4)return null;for(var M=[],_=0;_<U.length;_++){var I=E.parseLength(U[_]);if(!I)return null;M.push(I)}return M},function(T,U,M,_,I){var x;if(_.length===1)x=[_[0],_[0],_[0],_[0]];else if(_.length===2)x=[_[0],_[1],_[0],_[1]];else if(_.length===3)x=[_[0],_[1],_[2],_[1]];else{if(_.length!==4)return null;x=[_[0],_[1],_[2],_[3]]}var Z=M.styleAttrs[k.byName.writingMode.qname];if(Z==="lrtb"||Z==="lr")x=[x[0],x[3],x[2],x[1]];else if(Z==="rltb"||Z==="rl")x=[x[0],x[1],x[2],x[3]];else if(Z==="tblr")x=[x[3],x[0],x[1],x[2]];else{if(Z!=="tbrl"&&Z!=="tb")return null;x=[x[3],x[2],x[1],x[0]]}for(var Y=[],$=0;$<x.length;$++)if(x[$].value===0)Y[$]=new E.ComputedLength(0,0);else if(Y[$]=E.toComputedLength(x[$].value,x[$].unit,M.styleAttrs[k.byName.fontSize.qname],$===0||$===2?M.styleAttrs[k.byName.extent.qname].h:M.styleAttrs[k.byName.extent.qname].w,$===0||$===2?T.cellLength.h:T.cellLength.w,$===0||$===2?T.pxLength.h:T.pxLength.w),Y[$]===null)return null;return Y}),new y(C.ns_tts,"position","top left",["region"],!1,!0,function(T){return E.parsePosition(T)},function(T,U,M,_){var I,x;return(I=E.toComputedLength(_.v.offset.value,_.v.offset.unit,null,new E.ComputedLength(-M.styleAttrs[k.byName.extent.qname].h.rw,T.dimensions.h.rh-M.styleAttrs[k.byName.extent.qname].h.rh),null,T.pxLength.h))===null?null:(_.v.edge==="bottom"&&(I=new E.ComputedLength(-I.rw-M.styleAttrs[k.byName.extent.qname].h.rw,T.dimensions.h.rh-I.rh-M.styleAttrs[k.byName.extent.qname].h.rh)),x=E.toComputedLength(_.h.offset.value,_.h.offset.unit,null,new E.ComputedLength(T.dimensions.w.rw-M.styleAttrs[k.byName.extent.qname].w.rw,-M.styleAttrs[k.byName.extent.qname].w.rh),null,T.pxLength.w),I===null?null:(_.h.edge==="right"&&(x=new E.ComputedLength(T.dimensions.w.rw-x.rw-M.styleAttrs[k.byName.extent.qname].w.rw,-x.rh-M.styleAttrs[k.byName.extent.qname].w.rh)),{h:I,w:x}))}),new y(C.ns_tts,"ruby","none",["span"],!1,!0,function(T){return T},null),new y(C.ns_tts,"rubyAlign","center",["span"],!0,!0,function(T){return T!=="center"&&T!=="spaceAround"?null:T},null),new y(C.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(T){return T},null),new y(C.ns_tts,"rubyReserve","none",["p"],!0,!0,function(T){var U=T.split(" "),M=[null,null];if(U.length===0||U.length>2||U[0]!=="none"&&U[0]!=="both"&&U[0]!=="after"&&U[0]!=="before"&&U[0]!=="outside")return null;if(M[0]=U[0],U.length===2&&U[0]!=="none"){var _=E.parseLength(U[1]);if(!_)return null;M[1]=_}return M},function(T,U,M,_,I){if(_[0]==="none")return _;var x;return(x=_[1]===null?new E.ComputedLength(.5*M.styleAttrs[k.byName.fontSize.qname].rw,.5*M.styleAttrs[k.byName.fontSize.qname].rh):E.toComputedLength(_[1].value,_[1].unit,M.styleAttrs[k.byName.fontSize.qname],M.styleAttrs[k.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null?null:[_[0],x]}),new y(C.ns_tts,"showBackground","always",["region"],!1,!0,function(T){return T},null),new y(C.ns_tts,"textAlign","start",["p"],!0,!0,function(T){return T},function(T,U,M,_,I){return _==="left"?"start":_==="right"?"end":_}),new y(C.ns_tts,"textCombine","none",["span"],!0,!0,function(T){return T==="none"||T==="all"?T:null},null),new y(C.ns_tts,"textDecoration","none",["span"],!0,!0,function(T){return T.split(" ")},null),new y(C.ns_tts,"textEmphasis","none",["span"],!0,!0,function(T){for(var U=T.split(" "),M={style:null,symbol:null,color:null,position:null},_=0;_<U.length;_++)if(U[_]==="none"||U[_]==="auto")M.style=U[_];else if(U[_]==="filled"||U[_]==="open")M.style=U[_];else if(U[_]==="circle"||U[_]==="dot"||U[_]==="sesame")M.symbol=U[_];else if(U[_]==="current")M.color=U[_];else if(U[_]==="outside"||U[_]==="before"||U[_]==="after")M.position=U[_];else if(M.color=E.parseColor(U[_]),M.color===null)return null;return M.style==null&&M.symbol==null?M.style="auto":(M.symbol=M.symbol||"circle",M.style=M.style||"filled"),M.position=M.position||"outside",M.color=M.color||"current",M},null),new y(C.ns_tts,"textOutline","none",["span"],!0,!0,function(T){if(T==="none")return T;var U={},M=T.split(" ");if(M.length===0||M.length>2)return null;var _=E.parseColor(M[0]);if(U.color=_,_!==null&&M.shift(),M.length!==1)return null;var I=E.parseLength(M[0]);return I?(U.thickness=I,U):null},function(T,U,M,_,I){if(_==="none")return _;var x={};return _.color===null?x.color=M.styleAttrs[k.byName.color.qname]:x.color=_.color,x.thickness=E.toComputedLength(_.thickness.value,_.thickness.unit,M.styleAttrs[k.byName.fontSize.qname],M.styleAttrs[k.byName.fontSize.qname],T.cellLength.h,T.pxLength.h),x.thickness===null?null:x}),new y(C.ns_tts,"textShadow","none",["span"],!0,!0,E.parseTextShadow,function(T,U,M,_){if(_==="none")return _;for(var I=[],x=0;x<_.length;x++){var Z={};if(Z.x_off=E.toComputedLength(_[x][0].value,_[x][0].unit,null,M.styleAttrs[k.byName.fontSize.qname],null,T.pxLength.w),Z.x_off===null||(Z.y_off=E.toComputedLength(_[x][1].value,_[x][1].unit,null,M.styleAttrs[k.byName.fontSize.qname],null,T.pxLength.h),Z.y_off===null))return null;if(_[x][2]===null)Z.b_radius=0;else if(Z.b_radius=E.toComputedLength(_[x][2].value,_[x][2].unit,null,M.styleAttrs[k.byName.fontSize.qname],null,T.pxLength.h),Z.b_radius===null)return null;_[x][3]===null?Z.color=M.styleAttrs[k.byName.color.qname]:Z.color=_[x][3],I.push(Z)}return I}),new y(C.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(T){return T},null),new y(C.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(T){return T},null),new y(C.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(T){return T},null),new y(C.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(T){return T},null),new y(C.ns_tts,"zIndex","auto",["region"],!1,!0,function(T){var U;return T==="auto"?U=T:(U=parseInt(T),isNaN(U)&&(U=null)),U},null),new y(C.ns_ebutts,"linePadding","0c",["p"],!0,!1,E.parseLength,function(T,U,M,_,I){return E.toComputedLength(_.value,_.unit,null,null,T.cellLength.w,null)}),new y(C.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(T){return T},null),new y(C.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(T){return T},null),new y(C.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(T){return T==="true"},null),new y(C.ns_itts,"fillLineGap","false",["p"],!0,!0,function(T){return T==="true"},null)],k.byQName={},k.all)k.byQName[k.all[P].qname]=k.all[P];for(var m in k.byName={},k.all)k.byName[k.all[m].name]=k.all[m]})(p,typeof imscNames>"u"?w(210):imscNames,typeof imscUtils>"u"?w(5926):imscUtils)},5926:function(b,p){(function(w){var k=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,C=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,E=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,y={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};w.parseColor=function(m){var T,U=null,M=y[m.toLowerCase()];return M!==void 0?U=M:(T=k.exec(m))!==null?U=[parseInt(T[1],16),parseInt(T[2],16),parseInt(T[3],16),T[4]!==void 0?parseInt(T[4],16):255]:(T=C.exec(m))!==null?U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),255]:(T=E.exec(m))!==null&&(U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),parseInt(T[4])]),U};var P=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;w.parseLength=function(m){var T,U=null;return(T=P.exec(m))!==null&&(U={value:parseFloat(T[1]),unit:T[2]}),U},w.parseTextShadow=function(m){for(var T=m.match(/([^\(,\)]|\([^\)]+\))+/g),U=[],M=0;M<T.length;M++){var _=T[M].split(" ");if(_.length===1&&_[0]==="none")return"none";if(_.length>1&&_.length<5){var I=[null,null,null,null],x=w.parseLength(_.shift());if(x===null||(I[0]=x,(x=w.parseLength(_.shift()))===null))return null;if(I[1]=x,_.length===0){U.push(I);continue}if((x=w.parseLength(_[0]))!==null&&(I[2]=x,_.shift()),_.length===0){U.push(I);continue}var Z=w.parseColor(_[0]);if(Z===null)return null;I[3]=Z,U.push(I)}}return U},w.parsePosition=function(m){var T=m.split(" "),U=function($){return $==="center"||$==="left"||$==="top"||$==="bottom"||$==="right"};if(T.length>4)return null;for(var M=0;M<T.length;M++)if(!U(T[M])){var _=w.parseLength(T[M]);if(_===null)return null;T[M]=_}for(var I={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},x=0;x<T.length;){var Z=T[x++];if(U(Z)){var Y={value:0,unit:"%"};T.length!==2&&x<T.length&&!U(T[x])&&(Y=T[x++]),Z==="right"?(I.h.edge=Z,I.h.offset=Y):Z==="bottom"?(I.v.edge=Z,I.v.offset=Y):Z==="left"?I.h.offset=Y:Z==="top"&&(I.v.offset=Y)}else{if(T.length!==1&&T.length!==2)return null;x===1?I.h.offset=Z:I.v.offset=Z}}return I},w.ComputedLength=function(m,T){this.rw=m,this.rh=T},w.ComputedLength.prototype.toUsedLength=function(m,T){return m*this.rw+T*this.rh},w.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},w.toComputedLength=function(m,T,U,M,_,I){return T==="%"&&M?new w.ComputedLength(M.rw*m/100,M.rh*m/100):T==="em"&&U?new w.ComputedLength(U.rw*m,U.rh*m):T==="c"&&_?new w.ComputedLength(m*_.rw,m*_.rh):T==="px"&&I?new w.ComputedLength(m*I.rw,m*I.rh):T==="rh"?new w.ComputedLength(0,m/100):T==="rw"?new w.ComputedLength(m/100,0):null}})(p)},3516:function(b){b.exports=function(p){var w=typeof p=="string"?p.charCodeAt(0):p;return w>=97&&w<=122||w>=65&&w<=90}},2219:function(b,p,w){var k=w(3516),C=w(395);b.exports=function(E){return k(E)||C(E)}},395:function(b){b.exports=function(p){var w=typeof p=="string"?p.charCodeAt(0):p;return w>=48&&w<=57}},3875:function(b){function p(C){if(typeof C!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(C))}function w(C,E){for(var y,P="",m=0,T=-1,U=0,M=0;M<=C.length;++M){if(M<C.length)y=C.charCodeAt(M);else{if(y===47)break;y=47}if(y===47){if(!(T===M-1||U===1))if(T!==M-1&&U===2){if(P.length<2||m!==2||P.charCodeAt(P.length-1)!==46||P.charCodeAt(P.length-2)!==46){if(P.length>2){var _=P.lastIndexOf("/");if(_!==P.length-1){_===-1?(P="",m=0):m=(P=P.slice(0,_)).length-1-P.lastIndexOf("/"),T=M,U=0;continue}}else if(P.length===2||P.length===1){P="",m=0,T=M,U=0;continue}}E&&(P.length>0?P+="/..":P="..",m=2)}else P.length>0?P+="/"+C.slice(T+1,M):P=C.slice(T+1,M),m=M-T-1;T=M,U=0}else y===46&&U!==-1?++U:U=-1}return P}var k={resolve:function(){for(var C,E="",y=!1,P=arguments.length-1;P>=-1&&!y;P--){var m;P>=0?m=arguments[P]:(C===void 0&&(C=process.cwd()),m=C),p(m),m.length!==0&&(E=m+"/"+E,y=m.charCodeAt(0)===47)}return E=w(E,!y),y?E.length>0?"/"+E:"/":E.length>0?E:"."},normalize:function(C){if(p(C),C.length===0)return".";var E=C.charCodeAt(0)===47,y=C.charCodeAt(C.length-1)===47;return(C=w(C,!E)).length!==0||E||(C="."),C.length>0&&y&&(C+="/"),E?"/"+C:C},isAbsolute:function(C){return p(C),C.length>0&&C.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var C,E=0;E<arguments.length;++E){var y=arguments[E];p(y),y.length>0&&(C===void 0?C=y:C+="/"+y)}return C===void 0?".":k.normalize(C)},relative:function(C,E){if(p(C),p(E),C===E||(C=k.resolve(C))===(E=k.resolve(E)))return"";for(var y=1;y<C.length&&C.charCodeAt(y)===47;++y);for(var P=C.length,m=P-y,T=1;T<E.length&&E.charCodeAt(T)===47;++T);for(var U=E.length-T,M=m<U?m:U,_=-1,I=0;I<=M;++I){if(I===M){if(U>M){if(E.charCodeAt(T+I)===47)return E.slice(T+I+1);if(I===0)return E.slice(T+I)}else m>M&&(C.charCodeAt(y+I)===47?_=I:I===0&&(_=0));break}var x=C.charCodeAt(y+I);if(x!==E.charCodeAt(T+I))break;x===47&&(_=I)}var Z="";for(I=y+_+1;I<=P;++I)I!==P&&C.charCodeAt(I)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+E.slice(T+_):(T+=_,E.charCodeAt(T)===47&&++T,E.slice(T))},_makeLong:function(C){return C},dirname:function(C){if(p(C),C.length===0)return".";for(var E=C.charCodeAt(0),y=E===47,P=-1,m=!0,T=C.length-1;T>=1;--T)if((E=C.charCodeAt(T))===47){if(!m){P=T;break}}else m=!1;return P===-1?y?"/":".":y&&P===1?"//":C.slice(0,P)},basename:function(C,E){if(E!==void 0&&typeof E!="string")throw new TypeError('"ext" argument must be a string');p(C);var y,P=0,m=-1,T=!0;if(E!==void 0&&E.length>0&&E.length<=C.length){if(E.length===C.length&&E===C)return"";var U=E.length-1,M=-1;for(y=C.length-1;y>=0;--y){var _=C.charCodeAt(y);if(_===47){if(!T){P=y+1;break}}else M===-1&&(T=!1,M=y+1),U>=0&&(_===E.charCodeAt(U)?--U==-1&&(m=y):(U=-1,m=M))}return P===m?m=M:m===-1&&(m=C.length),C.slice(P,m)}for(y=C.length-1;y>=0;--y)if(C.charCodeAt(y)===47){if(!T){P=y+1;break}}else m===-1&&(T=!1,m=y+1);return m===-1?"":C.slice(P,m)},extname:function(C){p(C);for(var E=-1,y=0,P=-1,m=!0,T=0,U=C.length-1;U>=0;--U){var M=C.charCodeAt(U);if(M!==47)P===-1&&(m=!1,P=U+1),M===46?E===-1?E=U:T!==1&&(T=1):E!==-1&&(T=-1);else if(!m){y=U+1;break}}return E===-1||P===-1||T===0||T===1&&E===P-1&&E===y+1?"":C.slice(E,P)},format:function(C){if(C===null||typeof C!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof C);return function(E,y){var P=y.dir||y.root,m=y.base||(y.name||"")+(y.ext||"");return P?P===y.root?P+m:P+"/"+m:m}(0,C)},parse:function(C){p(C);var E={root:"",dir:"",base:"",ext:"",name:""};if(C.length===0)return E;var y,P=C.charCodeAt(0),m=P===47;m?(E.root="/",y=1):y=0;for(var T=-1,U=0,M=-1,_=!0,I=C.length-1,x=0;I>=y;--I)if((P=C.charCodeAt(I))!==47)M===-1&&(_=!1,M=I+1),P===46?T===-1?T=I:x!==1&&(x=1):T!==-1&&(x=-1);else if(!_){U=I+1;break}return T===-1||M===-1||x===0||x===1&&T===M-1&&T===U+1?M!==-1&&(E.base=E.name=U===0&&m?C.slice(1,M):C.slice(U,M)):(U===0&&m?(E.name=C.slice(1,T),E.base=C.slice(1,M)):(E.name=C.slice(U,T),E.base=C.slice(U,M)),E.ext=C.slice(T,M)),U>0?E.dir=C.slice(0,U-1):m&&(E.dir="/"),E},sep:"/",delimiter:":",win32:null,posix:null};k.posix=k,b.exports=k},8387:function(b,p,w){var k=w(1549),C=k.Buffer;function E(P,m){for(var T in P)m[T]=P[T]}function y(P,m,T){return C(P,m,T)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?b.exports=k:(E(k,p),p.Buffer=y),E(C,y),y.from=function(P,m,T){if(typeof P=="number")throw new TypeError("Argument must not be a number");return C(P,m,T)},y.alloc=function(P,m,T){if(typeof P!="number")throw new TypeError("Argument must be a number");var U=C(P);return m!==void 0?typeof T=="string"?U.fill(m,T):U.fill(m):U.fill(0),U},y.allocUnsafe=function(P){if(typeof P!="number")throw new TypeError("Argument must be a number");return C(P)},y.allocUnsafeSlow=function(P){if(typeof P!="number")throw new TypeError("Argument must be a number");return k.SlowBuffer(P)}},5378:function(b,p,w){(function(k){k.parser=function(L,D){return new y(L,D)},k.SAXParser=y,k.SAXStream=m,k.createStream=function(L,D){return new m(L,D)},k.MAX_BUFFER_LENGTH=65536;var C,E=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function y(L,D){if(!(this instanceof y))return new y(L,D);var G=this;(function(K){for(var ge=0,de=E.length;ge<de;ge++)K[E[ge]]=""})(G),G.q=G.c="",G.bufferCheckPosition=k.MAX_BUFFER_LENGTH,G.opt=D||{},G.opt.lowercase=G.opt.lowercase||G.opt.lowercasetags,G.looseCase=G.opt.lowercase?"toLowerCase":"toUpperCase",G.tags=[],G.closed=G.closedRoot=G.sawRoot=!1,G.tag=G.error=null,G.strict=!!L,G.noscript=!(!L&&!G.opt.noscript),G.state=Ie.BEGIN,G.strictEntities=G.opt.strictEntities,G.ENTITIES=G.strictEntities?Object.create(k.XML_ENTITIES):Object.create(k.ENTITIES),G.attribList=[],G.opt.xmlns&&(G.ns=Object.create(Y)),G.trackPosition=G.opt.position!==!1,G.trackPosition&&(G.position=G.line=G.column=0),at(G,"onready")}k.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(L){function D(){}return D.prototype=L,new D}),Object.keys||(Object.keys=function(L){var D=[];for(var G in L)L.hasOwnProperty(G)&&D.push(G);return D}),y.prototype={end:function(){Ne(this)},write:function(L){var D=this;if(this.error)throw this.error;if(D.closed)return At(D,"Cannot write after close. Assign an onready handler.");if(L===null)return Ne(D);typeof L=="object"&&(L=L.toString());for(var G=0,K="";K=Ue(L,G++),D.c=K,K;)switch(D.trackPosition&&(D.position++,K==="\n"?(D.line++,D.column=0):D.column++),D.state){case Ie.BEGIN:if(D.state=Ie.BEGIN_WHITESPACE,K==="\uFEFF")continue;ne(D,K);continue;case Ie.BEGIN_WHITESPACE:ne(D,K);continue;case Ie.TEXT:if(D.sawRoot&&!D.closedRoot){for(var ge=G-1;K&&K!=="<"&&K!=="&";)(K=Ue(L,G++))&&D.trackPosition&&(D.position++,K==="\n"?(D.line++,D.column=0):D.column++);D.textNode+=L.substring(ge,G-1)}K!=="<"||D.sawRoot&&D.closedRoot&&!D.strict?(!oe(T,K)||D.sawRoot&&!D.closedRoot||et(D,"Text data outside of root node."),K==="&"?D.state=Ie.TEXT_ENTITY:D.textNode+=K):(D.state=Ie.OPEN_WAKA,D.startTagPosition=D.position);continue;case Ie.SCRIPT:K==="<"?D.state=Ie.SCRIPT_ENDING:D.script+=K;continue;case Ie.SCRIPT_ENDING:K==="/"?D.state=Ie.CLOSE_TAG:(D.script+="<"+K,D.state=Ie.SCRIPT);continue;case Ie.OPEN_WAKA:if(K==="!")D.state=Ie.SGML_DECL,D.sgmlDecl="";else if(!ce(T,K))if(ce($,K))D.state=Ie.OPEN_TAG,D.tagName=K;else if(K==="/")D.state=Ie.CLOSE_TAG,D.tagName="";else if(K==="?")D.state=Ie.PROC_INST,D.procInstName=D.procInstBody="";else{if(et(D,"Unencoded <"),D.startTagPosition+1<D.position){var de=D.position-D.startTagPosition;K=new Array(de).join(" ")+K}D.textNode+="<"+K,D.state=Ie.TEXT}continue;case Ie.SGML_DECL:(D.sgmlDecl+K).toUpperCase()==="[CDATA["?(ft(D,"onopencdata"),D.state=Ie.CDATA,D.sgmlDecl="",D.cdata=""):D.sgmlDecl+K==="--"?(D.state=Ie.COMMENT,D.comment="",D.sgmlDecl=""):(D.sgmlDecl+K).toUpperCase()==="DOCTYPE"?(D.state=Ie.DOCTYPE,(D.doctype||D.sawRoot)&&et(D,"Inappropriately located doctype declaration"),D.doctype="",D.sgmlDecl=""):K===">"?(ft(D,"onsgmldeclaration",D.sgmlDecl),D.sgmlDecl="",D.state=Ie.TEXT):(ce(_,K)&&(D.state=Ie.SGML_DECL_QUOTED),D.sgmlDecl+=K);continue;case Ie.SGML_DECL_QUOTED:K===D.q&&(D.state=Ie.SGML_DECL,D.q=""),D.sgmlDecl+=K;continue;case Ie.DOCTYPE:K===">"?(D.state=Ie.TEXT,ft(D,"ondoctype",D.doctype),D.doctype=!0):(D.doctype+=K,K==="["?D.state=Ie.DOCTYPE_DTD:ce(_,K)&&(D.state=Ie.DOCTYPE_QUOTED,D.q=K));continue;case Ie.DOCTYPE_QUOTED:D.doctype+=K,K===D.q&&(D.q="",D.state=Ie.DOCTYPE);continue;case Ie.DOCTYPE_DTD:D.doctype+=K,K==="]"?D.state=Ie.DOCTYPE:ce(_,K)&&(D.state=Ie.DOCTYPE_DTD_QUOTED,D.q=K);continue;case Ie.DOCTYPE_DTD_QUOTED:D.doctype+=K,K===D.q&&(D.state=Ie.DOCTYPE_DTD,D.q="");continue;case Ie.COMMENT:K==="-"?D.state=Ie.COMMENT_ENDING:D.comment+=K;continue;case Ie.COMMENT_ENDING:K==="-"?(D.state=Ie.COMMENT_ENDED,D.comment=ut(D.opt,D.comment),D.comment&&ft(D,"oncomment",D.comment),D.comment=""):(D.comment+="-"+K,D.state=Ie.COMMENT);continue;case Ie.COMMENT_ENDED:K!==">"?(et(D,"Malformed comment"),D.comment+="--"+K,D.state=Ie.COMMENT):D.state=Ie.TEXT;continue;case Ie.CDATA:K==="]"?D.state=Ie.CDATA_ENDING:D.cdata+=K;continue;case Ie.CDATA_ENDING:K==="]"?D.state=Ie.CDATA_ENDING_2:(D.cdata+="]"+K,D.state=Ie.CDATA);continue;case Ie.CDATA_ENDING_2:K===">"?(D.cdata&&ft(D,"oncdata",D.cdata),ft(D,"onclosecdata"),D.cdata="",D.state=Ie.TEXT):K==="]"?D.cdata+="]":(D.cdata+="]]"+K,D.state=Ie.CDATA);continue;case Ie.PROC_INST:K==="?"?D.state=Ie.PROC_INST_ENDING:ce(T,K)?D.state=Ie.PROC_INST_BODY:D.procInstName+=K;continue;case Ie.PROC_INST_BODY:if(!D.procInstBody&&ce(T,K))continue;K==="?"?D.state=Ie.PROC_INST_ENDING:D.procInstBody+=K;continue;case Ie.PROC_INST_ENDING:K===">"?(ft(D,"onprocessinginstruction",{name:D.procInstName,body:D.procInstBody}),D.procInstName=D.procInstBody="",D.state=Ie.TEXT):(D.procInstBody+="?"+K,D.state=Ie.PROC_INST_BODY);continue;case Ie.OPEN_TAG:ce(Q,K)?D.tagName+=K:(dt(D),K===">"?St(D):K==="/"?D.state=Ie.OPEN_TAG_SLASH:(oe(T,K)&&et(D,"Invalid character in tag name"),D.state=Ie.ATTRIB));continue;case Ie.OPEN_TAG_SLASH:K===">"?(St(D,!0),kt(D)):(et(D,"Forward-slash in opening tag not followed by >"),D.state=Ie.ATTRIB);continue;case Ie.ATTRIB:if(ce(T,K))continue;K===">"?St(D):K==="/"?D.state=Ie.OPEN_TAG_SLASH:ce($,K)?(D.attribName=K,D.attribValue="",D.state=Ie.ATTRIB_NAME):et(D,"Invalid attribute name");continue;case Ie.ATTRIB_NAME:K==="="?D.state=Ie.ATTRIB_VALUE:K===">"?(et(D,"Attribute without value"),D.attribValue=D.attribName,Yt(D),St(D)):ce(T,K)?D.state=Ie.ATTRIB_NAME_SAW_WHITE:ce(Q,K)?D.attribName+=K:et(D,"Invalid attribute name");continue;case Ie.ATTRIB_NAME_SAW_WHITE:if(K==="=")D.state=Ie.ATTRIB_VALUE;else{if(ce(T,K))continue;et(D,"Attribute without value"),D.tag.attributes[D.attribName]="",D.attribValue="",ft(D,"onattribute",{name:D.attribName,value:""}),D.attribName="",K===">"?St(D):ce($,K)?(D.attribName=K,D.state=Ie.ATTRIB_NAME):(et(D,"Invalid attribute name"),D.state=Ie.ATTRIB)}continue;case Ie.ATTRIB_VALUE:if(ce(T,K))continue;ce(_,K)?(D.q=K,D.state=Ie.ATTRIB_VALUE_QUOTED):(et(D,"Unquoted attribute value"),D.state=Ie.ATTRIB_VALUE_UNQUOTED,D.attribValue=K);continue;case Ie.ATTRIB_VALUE_QUOTED:if(K!==D.q){K==="&"?D.state=Ie.ATTRIB_VALUE_ENTITY_Q:D.attribValue+=K;continue}Yt(D),D.q="",D.state=Ie.ATTRIB_VALUE_CLOSED;continue;case Ie.ATTRIB_VALUE_CLOSED:ce(T,K)?D.state=Ie.ATTRIB:K===">"?St(D):K==="/"?D.state=Ie.OPEN_TAG_SLASH:ce($,K)?(et(D,"No whitespace between attributes"),D.attribName=K,D.attribValue="",D.state=Ie.ATTRIB_NAME):et(D,"Invalid attribute name");continue;case Ie.ATTRIB_VALUE_UNQUOTED:if(oe(I,K)){K==="&"?D.state=Ie.ATTRIB_VALUE_ENTITY_U:D.attribValue+=K;continue}Yt(D),K===">"?St(D):D.state=Ie.ATTRIB;continue;case Ie.CLOSE_TAG:if(D.tagName)K===">"?kt(D):ce(Q,K)?D.tagName+=K:D.script?(D.script+="</"+D.tagName,D.tagName="",D.state=Ie.SCRIPT):(oe(T,K)&&et(D,"Invalid tagname in closing tag"),D.state=Ie.CLOSE_TAG_SAW_WHITE);else{if(ce(T,K))continue;oe($,K)?D.script?(D.script+="</"+K,D.state=Ie.SCRIPT):et(D,"Invalid tagname in closing tag."):D.tagName=K}continue;case Ie.CLOSE_TAG_SAW_WHITE:if(ce(T,K))continue;K===">"?kt(D):et(D,"Invalid characters in closing tag");continue;case Ie.TEXT_ENTITY:case Ie.ATTRIB_VALUE_ENTITY_Q:case Ie.ATTRIB_VALUE_ENTITY_U:var He,Tt;switch(D.state){case Ie.TEXT_ENTITY:He=Ie.TEXT,Tt="textNode";break;case Ie.ATTRIB_VALUE_ENTITY_Q:He=Ie.ATTRIB_VALUE_QUOTED,Tt="attribValue";break;case Ie.ATTRIB_VALUE_ENTITY_U:He=Ie.ATTRIB_VALUE_UNQUOTED,Tt="attribValue"}K===";"?(D[Tt]+=Re(D),D.entity="",D.state=He):ce(D.entity.length?R:se,K)?D.entity+=K:(et(D,"Invalid character in entity name"),D[Tt]+="&"+D.entity+K,D.entity="",D.state=He);continue;default:throw new Error(D,"Unknown state: "+D.state)}return D.position>=D.bufferCheckPosition&&function(st){for(var ot=Math.max(k.MAX_BUFFER_LENGTH,10),tt=0,ht=0,yt=E.length;ht<yt;ht++){var Et=st[E[ht]].length;if(Et>ot)switch(E[ht]){case"textNode":We(st);break;case"cdata":ft(st,"oncdata",st.cdata),st.cdata="";break;case"script":ft(st,"onscript",st.script),st.script="";break;default:At(st,"Max buffer length exceeded: "+E[ht])}tt=Math.max(tt,Et)}var Mt=k.MAX_BUFFER_LENGTH-tt;st.bufferCheckPosition=Mt+st.position}(D),D},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var L;We(L=this),L.cdata!==""&&(ft(L,"oncdata",L.cdata),L.cdata=""),L.script!==""&&(ft(L,"onscript",L.script),L.script="")}};try{C=w(182).Stream}catch(L){C=function(){}}var P=k.EVENTS.filter(function(L){return L!=="error"&&L!=="end"});function m(L,D){if(!(this instanceof m))return new m(L,D);C.apply(this),this._parser=new y(L,D),this.writable=!0,this.readable=!0;var G=this;this._parser.onend=function(){G.emit("end")},this._parser.onerror=function(K){G.emit("error",K),G._parser.error=null},this._decoder=null,P.forEach(function(K){Object.defineProperty(G,"on"+K,{get:function(){return G._parser["on"+K]},set:function(ge){if(!ge)return G.removeAllListeners(K),G._parser["on"+K]=ge,ge;G.on(K,ge)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(C.prototype,{constructor:{value:m}}),m.prototype.write=function(L){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(L)){if(!this._decoder){var D=w(7503).s;this._decoder=new D("utf8")}L=this._decoder.write(L)}return this._parser.write(L.toString()),this.emit("data",L),!0},m.prototype.end=function(L){return L&&L.length&&this.write(L),this._parser.end(),!0},m.prototype.on=function(L,D){var G=this;return G._parser["on"+L]||P.indexOf(L)===-1||(G._parser["on"+L]=function(){var K=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,L),G.emit.apply(G,K)}),C.prototype.on.call(G,L,D)};var T="\r\n	 ",U="0124356789",M="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",_="'\"",I=T+">",x="http://www.w3.org/XML/1998/namespace",Z="http://www.w3.org/2000/xmlns/",Y={xml:x,xmlns:Z};T=X(T),U=X(U),M=X(M);var $=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,se=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,R=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function X(L){return L.split("").reduce(function(D,G){return D[G]=!0,D},{})}function ce(L,D){return function(G){return Object.prototype.toString.call(G)==="[object RegExp]"}(L)?!!D.match(L):L[D]}function oe(L,D){return!ce(L,D)}_=X(_),I=X(I);var ye,be,Xe,Ie=0;for(var Ge in k.STATE={BEGIN:Ie++,BEGIN_WHITESPACE:Ie++,TEXT:Ie++,TEXT_ENTITY:Ie++,OPEN_WAKA:Ie++,SGML_DECL:Ie++,SGML_DECL_QUOTED:Ie++,DOCTYPE:Ie++,DOCTYPE_QUOTED:Ie++,DOCTYPE_DTD:Ie++,DOCTYPE_DTD_QUOTED:Ie++,COMMENT_STARTING:Ie++,COMMENT:Ie++,COMMENT_ENDING:Ie++,COMMENT_ENDED:Ie++,CDATA:Ie++,CDATA_ENDING:Ie++,CDATA_ENDING_2:Ie++,PROC_INST:Ie++,PROC_INST_BODY:Ie++,PROC_INST_ENDING:Ie++,OPEN_TAG:Ie++,OPEN_TAG_SLASH:Ie++,ATTRIB:Ie++,ATTRIB_NAME:Ie++,ATTRIB_NAME_SAW_WHITE:Ie++,ATTRIB_VALUE:Ie++,ATTRIB_VALUE_QUOTED:Ie++,ATTRIB_VALUE_CLOSED:Ie++,ATTRIB_VALUE_UNQUOTED:Ie++,ATTRIB_VALUE_ENTITY_Q:Ie++,ATTRIB_VALUE_ENTITY_U:Ie++,CLOSE_TAG:Ie++,CLOSE_TAG_SAW_WHITE:Ie++,SCRIPT:Ie++,SCRIPT_ENDING:Ie++},k.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},k.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(k.ENTITIES).forEach(function(L){var D=k.ENTITIES[L],G=typeof D=="number"?String.fromCharCode(D):D;k.ENTITIES[L]=G}),k.STATE)k.STATE[k.STATE[Ge]]=Ge;function at(L,D,G){L[D]&&L[D](G)}function ft(L,D,G){L.textNode&&We(L),at(L,D,G)}function We(L){L.textNode=ut(L.opt,L.textNode),L.textNode&&at(L,"ontext",L.textNode),L.textNode=""}function ut(L,D){return L.trim&&(D=D.trim()),L.normalize&&(D=D.replace(/\s+/g," ")),D}function At(L,D){return We(L),L.trackPosition&&(D+="\nLine: "+L.line+"\nColumn: "+L.column+"\nChar: "+L.c),D=new Error(D),L.error=D,at(L,"onerror",D),L}function Ne(L){return L.sawRoot&&!L.closedRoot&&et(L,"Unclosed root tag"),L.state!==Ie.BEGIN&&L.state!==Ie.BEGIN_WHITESPACE&&L.state!==Ie.TEXT&&At(L,"Unexpected end"),We(L),L.c="",L.closed=!0,at(L,"onend"),y.call(L,L.strict,L.opt),L}function et(L,D){if(typeof L!="object"||!(L instanceof y))throw new Error("bad call to strictFail");L.strict&&At(L,D)}function dt(L){L.strict||(L.tagName=L.tagName[L.looseCase]());var D=L.tags[L.tags.length-1]||L,G=L.tag={name:L.tagName,attributes:{}};L.opt.xmlns&&(G.ns=D.ns),L.attribList.length=0,ft(L,"onopentagstart",G)}function rn(L,D){var G=L.indexOf(":")<0?["",L]:L.split(":"),K=G[0],ge=G[1];return D&&L==="xmlns"&&(K="xmlns",ge=""),{prefix:K,local:ge}}function Yt(L){if(L.strict||(L.attribName=L.attribName[L.looseCase]()),L.attribList.indexOf(L.attribName)!==-1||L.tag.attributes.hasOwnProperty(L.attribName))L.attribName=L.attribValue="";else{if(L.opt.xmlns){var D=rn(L.attribName,!0),G=D.prefix,K=D.local;if(G==="xmlns")if(K==="xml"&&L.attribValue!==x)et(L,"xml: prefix must be bound to "+x+"\nActual: "+L.attribValue);else if(K==="xmlns"&&L.attribValue!==Z)et(L,"xmlns: prefix must be bound to "+Z+"\nActual: "+L.attribValue);else{var ge=L.tag,de=L.tags[L.tags.length-1]||L;ge.ns===de.ns&&(ge.ns=Object.create(de.ns)),ge.ns[K]=L.attribValue}L.attribList.push([L.attribName,L.attribValue])}else L.tag.attributes[L.attribName]=L.attribValue,ft(L,"onattribute",{name:L.attribName,value:L.attribValue});L.attribName=L.attribValue=""}}function St(L,D){if(L.opt.xmlns){var G=L.tag,K=rn(L.tagName);G.prefix=K.prefix,G.local=K.local,G.uri=G.ns[K.prefix]||"",G.prefix&&!G.uri&&(et(L,"Unbound namespace prefix: "+JSON.stringify(L.tagName)),G.uri=K.prefix);var ge=L.tags[L.tags.length-1]||L;G.ns&&ge.ns!==G.ns&&Object.keys(G.ns).forEach(function(_n){ft(L,"onopennamespace",{prefix:_n,uri:G.ns[_n]})});for(var de=0,He=L.attribList.length;de<He;de++){var Tt=L.attribList[de],st=Tt[0],ot=Tt[1],tt=rn(st,!0),ht=tt.prefix,yt=tt.local,Et=ht===""?"":G.ns[ht]||"",Mt={name:st,value:ot,prefix:ht,local:yt,uri:Et};ht&&ht!=="xmlns"&&!Et&&(et(L,"Unbound namespace prefix: "+JSON.stringify(ht)),Mt.uri=ht),L.tag.attributes[st]=Mt,ft(L,"onattribute",Mt)}L.attribList.length=0}L.tag.isSelfClosing=!!D,L.sawRoot=!0,L.tags.push(L.tag),ft(L,"onopentag",L.tag),D||(L.noscript||L.tagName.toLowerCase()!=="script"?L.state=Ie.TEXT:L.state=Ie.SCRIPT,L.tag=null,L.tagName=""),L.attribName=L.attribValue="",L.attribList.length=0}function kt(L){if(!L.tagName)return et(L,"Weird empty close tag."),L.textNode+="</>",void(L.state=Ie.TEXT);if(L.script){if(L.tagName!=="script")return L.script+="</"+L.tagName+">",L.tagName="",void(L.state=Ie.SCRIPT);ft(L,"onscript",L.script),L.script=""}var D=L.tags.length,G=L.tagName;L.strict||(G=G[L.looseCase]());for(var K=G;D--&&L.tags[D].name!==K;)et(L,"Unexpected close tag");if(D<0)return et(L,"Unmatched closing tag: "+L.tagName),L.textNode+="</"+L.tagName+">",void(L.state=Ie.TEXT);L.tagName=G;for(var ge=L.tags.length;ge-- >D;){var de=L.tag=L.tags.pop();L.tagName=L.tag.name,ft(L,"onclosetag",L.tagName);var He={};for(var Tt in de.ns)He[Tt]=de.ns[Tt];var st=L.tags[L.tags.length-1]||L;L.opt.xmlns&&de.ns!==st.ns&&Object.keys(de.ns).forEach(function(ot){var tt=de.ns[ot];ft(L,"onclosenamespace",{prefix:ot,uri:tt})})}D===0&&(L.closedRoot=!0),L.tagName=L.attribValue=L.attribName="",L.attribList.length=0,L.state=Ie.TEXT}function Re(L){var D,G=L.entity,K=G.toLowerCase(),ge="";return L.ENTITIES[G]?L.ENTITIES[G]:L.ENTITIES[K]?L.ENTITIES[K]:((G=K).charAt(0)==="#"&&(G.charAt(1)==="x"?(G=G.slice(2),ge=(D=parseInt(G,16)).toString(16)):(G=G.slice(1),ge=(D=parseInt(G,10)).toString(10))),G=G.replace(/^0+/,""),ge.toLowerCase()!==G?(et(L,"Invalid character entity"),"&"+L.entity+";"):String.fromCodePoint(D))}function ne(L,D){D==="<"?(L.state=Ie.OPEN_WAKA,L.startTagPosition=L.position):oe(T,D)&&(et(L,"Non-whitespace before first tag."),L.textNode=D,L.state=Ie.TEXT)}function Ue(L,D){var G="";return D<L.length&&(G=L.charAt(D)),G}Ie=k.STATE,String.fromCodePoint||(ye=String.fromCharCode,be=Math.floor,Xe=function(){var L,D,G=16384,K=[],ge=-1,de=arguments.length;if(!de)return"";for(var He="";++ge<de;){var Tt=Number(arguments[ge]);if(!isFinite(Tt)||Tt<0||Tt>1114111||be(Tt)!==Tt)throw RangeError("Invalid code point: "+Tt);Tt<=65535?K.push(Tt):(L=55296+((Tt-=65536)>>10),D=Tt%1024+56320,K.push(L,D)),(ge+1===de||K.length>G)&&(He+=ye.apply(null,K),K.length=0)}return He},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Xe,configurable:!0,writable:!0}):String.fromCodePoint=Xe)})(p)},182:function(b,p,w){b.exports=C;var k=w(1159).EventEmitter;function C(){k.call(this)}w(1765)(C,k),C.Readable=w(2846),C.Writable=w(8318),C.Duplex=w(6138),C.Transform=w(9798),C.PassThrough=w(5472),C.finished=w(8800),C.pipeline=w(7295),C.Stream=C,C.prototype.pipe=function(E,y){var P=this;function m(Z){E.writable&&E.write(Z)===!1&&P.pause&&P.pause()}function T(){P.readable&&P.resume&&P.resume()}P.on("data",m),E.on("drain",T),E._isStdio||y&&y.end===!1||(P.on("end",M),P.on("close",_));var U=!1;function M(){U||(U=!0,E.end())}function _(){U||(U=!0,typeof E.destroy=="function"&&E.destroy())}function I(Z){if(x(),k.listenerCount(this,"error")===0)throw Z}function x(){P.removeListener("data",m),E.removeListener("drain",T),P.removeListener("end",M),P.removeListener("close",_),P.removeListener("error",I),E.removeListener("error",I),P.removeListener("end",x),P.removeListener("close",x),E.removeListener("close",x)}return P.on("error",I),E.on("error",I),P.on("end",x),P.on("close",x),E.on("close",x),E.emit("pipe",P),E}},1765:function(b){typeof Object.create=="function"?b.exports=function(p,w){w&&(p.super_=w,p.prototype=Object.create(w.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}))}:b.exports=function(p,w){if(w){p.super_=w;var k=function(){};k.prototype=w.prototype,p.prototype=new k,p.prototype.constructor=p}}},3690:function(b){var p={};function w(C,E,y){y||(y=Error);var P=function(m){var T,U;function M(_,I,x){return m.call(this,function(Z,Y,$){return typeof E=="string"?E:E(Z,Y,$)}(_,I,x))||this}return U=m,(T=M).prototype=Object.create(U.prototype),T.prototype.constructor=T,T.__proto__=U,M}(y);P.prototype.name=y.name,P.prototype.code=C,p[C]=P}function k(C,E){if(Array.isArray(C)){var y=C.length;return C=C.map(function(P){return String(P)}),y>2?"one of ".concat(E," ").concat(C.slice(0,y-1).join(", "),", or ")+C[y-1]:y===2?"one of ".concat(E," ").concat(C[0]," or ").concat(C[1]):"of ".concat(E," ").concat(C[0])}return"of ".concat(E," ").concat(String(C))}w("ERR_INVALID_OPT_VALUE",function(C,E){return'The value "'+E+'" is invalid for option "'+C+'"'},TypeError),w("ERR_INVALID_ARG_TYPE",function(C,E,y){var P,m,T,U,M;if(typeof E=="string"&&(m="not ",E.substr(0,m.length)===m)?(P="must not be",E=E.replace(/^not /,"")):P="must be",function(I,x,Z){return(Z===void 0||Z>I.length)&&(Z=I.length),I.substring(Z-x.length,Z)===x}(C," argument"))T="The ".concat(C," ").concat(P," ").concat(k(E,"type"));else{var _=(typeof M!="number"&&(M=0),M+1>(U=C).length||U.indexOf(".",M)===-1?"argument":"property");T='The "'.concat(C,'" ').concat(_," ").concat(P," ").concat(k(E,"type"))}return T+". Received type ".concat(typeof y)},TypeError),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),w("ERR_METHOD_NOT_IMPLEMENTED",function(C){return"The "+C+" method is not implemented"}),w("ERR_STREAM_PREMATURE_CLOSE","Premature close"),w("ERR_STREAM_DESTROYED",function(C){return"Cannot call "+C+" after a stream was destroyed"}),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),w("ERR_STREAM_WRITE_AFTER_END","write after end"),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_UNKNOWN_ENCODING",function(C){return"Unknown encoding: "+C},TypeError),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),b.exports.q=p},6138:function(b,p,w){var k=Object.keys||function(_){var I=[];for(var x in _)I.push(x);return I};b.exports=T;var C=w(2846),E=w(8318);w(1765)(T,C);for(var y=k(E.prototype),P=0;P<y.length;P++){var m=y[P];T.prototype[m]||(T.prototype[m]=E.prototype[m])}function T(_){if(!(this instanceof T))return new T(_);C.call(this,_),E.call(this,_),this.allowHalfOpen=!0,_&&(_.readable===!1&&(this.readable=!1),_.writable===!1&&(this.writable=!1),_.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",U)))}function U(){this._writableState.ended||process.nextTick(M,this)}function M(_){_.end()}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=_,this._writableState.destroyed=_)}})},5472:function(b,p,w){b.exports=C;var k=w(9798);function C(E){if(!(this instanceof C))return new C(E);k.call(this,E)}w(1765)(C,k),C.prototype._transform=function(E,y,P){P(null,E)}},2846:function(b,p,w){var k;b.exports=ye,ye.ReadableState=oe,w(1159).EventEmitter;var C,E=function(Re,ne){return Re.listeners(ne).length},y=w(9299),P=w(1549).Buffer,m=w.g.Uint8Array||function(){},T=w(964);C=T&&T.debuglog?T.debuglog("stream"):function(){};var U,M,_,I=w(8393),x=w(6163),Z=w(7269).getHighWaterMark,Y=w(3690).q,$=Y.ERR_INVALID_ARG_TYPE,Q=Y.ERR_STREAM_PUSH_AFTER_EOF,se=Y.ERR_METHOD_NOT_IMPLEMENTED,R=Y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;w(1765)(ye,y);var X=x.errorOrDestroy,ce=["error","close","destroy","pause","resume"];function oe(Re,ne,Ue){k=k||w(6138),Re=Re||{},typeof Ue!="boolean"&&(Ue=ne instanceof k),this.objectMode=!!Re.objectMode,Ue&&(this.objectMode=this.objectMode||!!Re.readableObjectMode),this.highWaterMark=Z(this,Re,"readableHighWaterMark",Ue),this.buffer=new I,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Re.emitClose!==!1,this.autoDestroy=!!Re.autoDestroy,this.destroyed=!1,this.defaultEncoding=Re.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Re.encoding&&(U||(U=w(7503).s),this.decoder=new U(Re.encoding),this.encoding=Re.encoding)}function ye(Re){if(k=k||w(6138),!(this instanceof ye))return new ye(Re);var ne=this instanceof k;this._readableState=new oe(Re,this,ne),this.readable=!0,Re&&(typeof Re.read=="function"&&(this._read=Re.read),typeof Re.destroy=="function"&&(this._destroy=Re.destroy)),y.call(this)}function be(Re,ne,Ue,L,D){C("readableAddChunk",ne);var G,K=Re._readableState;if(ne===null)K.reading=!1,function(ge,de){if(C("onEofChunk"),!de.ended){if(de.decoder){var He=de.decoder.end();He&&He.length&&(de.buffer.push(He),de.length+=de.objectMode?1:He.length)}de.ended=!0,de.sync?at(ge):(de.needReadable=!1,de.emittedReadable||(de.emittedReadable=!0,ft(ge)))}}(Re,K);else if(D||(G=function(ge,de){var He,Tt;return Tt=de,P.isBuffer(Tt)||Tt instanceof m||typeof de=="string"||de===void 0||ge.objectMode||(He=new $("chunk",["string","Buffer","Uint8Array"],de)),He}(K,ne)),G)X(Re,G);else if(K.objectMode||ne&&ne.length>0)if(typeof ne=="string"||K.objectMode||Object.getPrototypeOf(ne)===P.prototype||(ne=function(ge){return P.from(ge)}(ne)),L)K.endEmitted?X(Re,new R):Xe(Re,K,ne,!0);else if(K.ended)X(Re,new Q);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!Ue?(ne=K.decoder.write(ne),K.objectMode||ne.length!==0?Xe(Re,K,ne,!1):We(Re,K)):Xe(Re,K,ne,!1)}else L||(K.reading=!1,We(Re,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function Xe(Re,ne,Ue,L){ne.flowing&&ne.length===0&&!ne.sync?(ne.awaitDrain=0,Re.emit("data",Ue)):(ne.length+=ne.objectMode?1:Ue.length,L?ne.buffer.unshift(Ue):ne.buffer.push(Ue),ne.needReadable&&at(Re)),We(Re,ne)}Object.defineProperty(ye.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Re){this._readableState&&(this._readableState.destroyed=Re)}}),ye.prototype.destroy=x.destroy,ye.prototype._undestroy=x.undestroy,ye.prototype._destroy=function(Re,ne){ne(Re)},ye.prototype.push=function(Re,ne){var Ue,L=this._readableState;return L.objectMode?Ue=!0:typeof Re=="string"&&((ne=ne||L.defaultEncoding)!==L.encoding&&(Re=P.from(Re,ne),ne=""),Ue=!0),be(this,Re,ne,!1,Ue)},ye.prototype.unshift=function(Re){return be(this,Re,null,!0,!1)},ye.prototype.isPaused=function(){return this._readableState.flowing===!1},ye.prototype.setEncoding=function(Re){U||(U=w(7503).s);var ne=new U(Re);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;for(var Ue=this._readableState.buffer.head,L="";Ue!==null;)L+=ne.write(Ue.data),Ue=Ue.next;return this._readableState.buffer.clear(),L!==""&&this._readableState.buffer.push(L),this._readableState.length=L.length,this};var Ie=1073741824;function Ge(Re,ne){return Re<=0||ne.length===0&&ne.ended?0:ne.objectMode?1:Re!=Re?ne.flowing&&ne.length?ne.buffer.head.data.length:ne.length:(Re>ne.highWaterMark&&(ne.highWaterMark=function(Ue){return Ue>=Ie?Ue=Ie:(Ue--,Ue|=Ue>>>1,Ue|=Ue>>>2,Ue|=Ue>>>4,Ue|=Ue>>>8,Ue|=Ue>>>16,Ue++),Ue}(Re)),Re<=ne.length?Re:ne.ended?ne.length:(ne.needReadable=!0,0))}function at(Re){var ne=Re._readableState;C("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(C("emitReadable",ne.flowing),ne.emittedReadable=!0,process.nextTick(ft,Re))}function ft(Re){var ne=Re._readableState;C("emitReadable_",ne.destroyed,ne.length,ne.ended),ne.destroyed||!ne.length&&!ne.ended||(Re.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,dt(Re)}function We(Re,ne){ne.readingMore||(ne.readingMore=!0,process.nextTick(ut,Re,ne))}function ut(Re,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&ne.length===0);){var Ue=ne.length;if(C("maybeReadMore read 0"),Re.read(0),Ue===ne.length)break}ne.readingMore=!1}function At(Re){var ne=Re._readableState;ne.readableListening=Re.listenerCount("readable")>0,ne.resumeScheduled&&!ne.paused?ne.flowing=!0:Re.listenerCount("data")>0&&Re.resume()}function Ne(Re){C("readable nexttick read 0"),Re.read(0)}function et(Re,ne){C("resume",ne.reading),ne.reading||Re.read(0),ne.resumeScheduled=!1,Re.emit("resume"),dt(Re),ne.flowing&&!ne.reading&&Re.read(0)}function dt(Re){var ne=Re._readableState;for(C("flow",ne.flowing);ne.flowing&&Re.read()!==null;);}function rn(Re,ne){return ne.length===0?null:(ne.objectMode?Ue=ne.buffer.shift():!Re||Re>=ne.length?(Ue=ne.decoder?ne.buffer.join(""):ne.buffer.length===1?ne.buffer.first():ne.buffer.concat(ne.length),ne.buffer.clear()):Ue=ne.buffer.consume(Re,ne.decoder),Ue);var Ue}function Yt(Re){var ne=Re._readableState;C("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,process.nextTick(St,ne,Re))}function St(Re,ne){if(C("endReadableNT",Re.endEmitted,Re.length),!Re.endEmitted&&Re.length===0&&(Re.endEmitted=!0,ne.readable=!1,ne.emit("end"),Re.autoDestroy)){var Ue=ne._writableState;(!Ue||Ue.autoDestroy&&Ue.finished)&&ne.destroy()}}function kt(Re,ne){for(var Ue=0,L=Re.length;Ue<L;Ue++)if(Re[Ue]===ne)return Ue;return-1}ye.prototype.read=function(Re){C("read",Re),Re=parseInt(Re,10);var ne=this._readableState,Ue=Re;if(Re!==0&&(ne.emittedReadable=!1),Re===0&&ne.needReadable&&((ne.highWaterMark!==0?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return C("read: emitReadable",ne.length,ne.ended),ne.length===0&&ne.ended?Yt(this):at(this),null;if((Re=Ge(Re,ne))===0&&ne.ended)return ne.length===0&&Yt(this),null;var L,D=ne.needReadable;return C("need readable",D),(ne.length===0||ne.length-Re<ne.highWaterMark)&&C("length less than watermark",D=!0),ne.ended||ne.reading?C("reading or ended",D=!1):D&&(C("do read"),ne.reading=!0,ne.sync=!0,ne.length===0&&(ne.needReadable=!0),this._read(ne.highWaterMark),ne.sync=!1,ne.reading||(Re=Ge(Ue,ne))),(L=Re>0?rn(Re,ne):null)===null?(ne.needReadable=ne.length<=ne.highWaterMark,Re=0):(ne.length-=Re,ne.awaitDrain=0),ne.length===0&&(ne.ended||(ne.needReadable=!0),Ue!==Re&&ne.ended&&Yt(this)),L!==null&&this.emit("data",L),L},ye.prototype._read=function(Re){X(this,new se("_read()"))},ye.prototype.pipe=function(Re,ne){var Ue=this,L=this._readableState;switch(L.pipesCount){case 0:L.pipes=Re;break;case 1:L.pipes=[L.pipes,Re];break;default:L.pipes.push(Re)}L.pipesCount+=1,C("pipe count=%d opts=%j",L.pipesCount,ne);var D=ne&&ne.end===!1||Re===process.stdout||Re===process.stderr?ot:G;function G(){C("onend"),Re.end()}L.endEmitted?process.nextTick(D):Ue.once("end",D),Re.on("unpipe",function tt(ht,yt){C("onunpipe"),ht===Ue&&yt&&yt.hasUnpiped===!1&&(yt.hasUnpiped=!0,C("cleanup"),Re.removeListener("close",Tt),Re.removeListener("finish",st),Re.removeListener("drain",K),Re.removeListener("error",He),Re.removeListener("unpipe",tt),Ue.removeListener("end",G),Ue.removeListener("end",ot),Ue.removeListener("data",de),ge=!0,!L.awaitDrain||Re._writableState&&!Re._writableState.needDrain||K())});var K=function(tt){return function(){var ht=tt._readableState;C("pipeOnDrain",ht.awaitDrain),ht.awaitDrain&&ht.awaitDrain--,ht.awaitDrain===0&&E(tt,"data")&&(ht.flowing=!0,dt(tt))}}(Ue);Re.on("drain",K);var ge=!1;function de(tt){C("ondata");var ht=Re.write(tt);C("dest.write",ht),ht===!1&&((L.pipesCount===1&&L.pipes===Re||L.pipesCount>1&&kt(L.pipes,Re)!==-1)&&!ge&&(C("false write response, pause",L.awaitDrain),L.awaitDrain++),Ue.pause())}function He(tt){C("onerror",tt),ot(),Re.removeListener("error",He),E(Re,"error")===0&&X(Re,tt)}function Tt(){Re.removeListener("finish",st),ot()}function st(){C("onfinish"),Re.removeListener("close",Tt),ot()}function ot(){C("unpipe"),Ue.unpipe(Re)}return Ue.on("data",de),function(tt,ht,yt){if(typeof tt.prependListener=="function")return tt.prependListener(ht,yt);tt._events&&tt._events[ht]?Array.isArray(tt._events[ht])?tt._events[ht].unshift(yt):tt._events[ht]=[yt,tt._events[ht]]:tt.on(ht,yt)}(Re,"error",He),Re.once("close",Tt),Re.once("finish",st),Re.emit("pipe",Ue),L.flowing||(C("pipe resume"),Ue.resume()),Re},ye.prototype.unpipe=function(Re){var ne=this._readableState,Ue={hasUnpiped:!1};if(ne.pipesCount===0)return this;if(ne.pipesCount===1)return Re&&Re!==ne.pipes||(Re||(Re=ne.pipes),ne.pipes=null,ne.pipesCount=0,ne.flowing=!1,Re&&Re.emit("unpipe",this,Ue)),this;if(!Re){var L=ne.pipes,D=ne.pipesCount;ne.pipes=null,ne.pipesCount=0,ne.flowing=!1;for(var G=0;G<D;G++)L[G].emit("unpipe",this,{hasUnpiped:!1});return this}var K=kt(ne.pipes,Re);return K===-1||(ne.pipes.splice(K,1),ne.pipesCount-=1,ne.pipesCount===1&&(ne.pipes=ne.pipes[0]),Re.emit("unpipe",this,Ue)),this},ye.prototype.on=function(Re,ne){var Ue=y.prototype.on.call(this,Re,ne),L=this._readableState;return Re==="data"?(L.readableListening=this.listenerCount("readable")>0,L.flowing!==!1&&this.resume()):Re==="readable"&&(L.endEmitted||L.readableListening||(L.readableListening=L.needReadable=!0,L.flowing=!1,L.emittedReadable=!1,C("on readable",L.length,L.reading),L.length?at(this):L.reading||process.nextTick(Ne,this))),Ue},ye.prototype.addListener=ye.prototype.on,ye.prototype.removeListener=function(Re,ne){var Ue=y.prototype.removeListener.call(this,Re,ne);return Re==="readable"&&process.nextTick(At,this),Ue},ye.prototype.removeAllListeners=function(Re){var ne=y.prototype.removeAllListeners.apply(this,arguments);return Re!=="readable"&&Re!==void 0||process.nextTick(At,this),ne},ye.prototype.resume=function(){var Re=this._readableState;return Re.flowing||(C("resume"),Re.flowing=!Re.readableListening,function(ne,Ue){Ue.resumeScheduled||(Ue.resumeScheduled=!0,process.nextTick(et,ne,Ue))}(this,Re)),Re.paused=!1,this},ye.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ye.prototype.wrap=function(Re){var ne=this,Ue=this._readableState,L=!1;for(var D in Re.on("end",function(){if(C("wrapped end"),Ue.decoder&&!Ue.ended){var K=Ue.decoder.end();K&&K.length&&ne.push(K)}ne.push(null)}),Re.on("data",function(K){C("wrapped data"),Ue.decoder&&(K=Ue.decoder.write(K)),Ue.objectMode&&K==null||(Ue.objectMode||K&&K.length)&&(ne.push(K)||(L=!0,Re.pause()))}),Re)this[D]===void 0&&typeof Re[D]=="function"&&(this[D]=function(K){return function(){return Re[K].apply(Re,arguments)}}(D));for(var G=0;G<ce.length;G++)Re.on(ce[G],this.emit.bind(this,ce[G]));return this._read=function(K){C("wrapped _read",K),L&&(L=!1,Re.resume())},this},typeof Symbol=="function"&&(ye.prototype[Symbol.asyncIterator]=function(){return M===void 0&&(M=w(7299)),M(this)}),Object.defineProperty(ye.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ye.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ye.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Re){this._readableState&&(this._readableState.flowing=Re)}}),ye._fromList=rn,Object.defineProperty(ye.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(ye.from=function(Re,ne){return _===void 0&&(_=w(6233)),_(ye,Re,ne)})},9798:function(b,p,w){b.exports=U;var k=w(3690).q,C=k.ERR_METHOD_NOT_IMPLEMENTED,E=k.ERR_MULTIPLE_CALLBACK,y=k.ERR_TRANSFORM_ALREADY_TRANSFORMING,P=k.ERR_TRANSFORM_WITH_LENGTH_0,m=w(6138);function T(I,x){var Z=this._transformState;Z.transforming=!1;var Y=Z.writecb;if(Y===null)return this.emit("error",new E);Z.writechunk=null,Z.writecb=null,x!=null&&this.push(x),Y(I);var $=this._readableState;$.reading=!1,($.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}function U(I){if(!(this instanceof U))return new U(I);m.call(this,I),this._transformState={afterTransform:T.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,I&&(typeof I.transform=="function"&&(this._transform=I.transform),typeof I.flush=="function"&&(this._flush=I.flush)),this.on("prefinish",M)}function M(){var I=this;typeof this._flush!="function"||this._readableState.destroyed?_(this,null,null):this._flush(function(x,Z){_(I,x,Z)})}function _(I,x,Z){if(x)return I.emit("error",x);if(Z!=null&&I.push(Z),I._writableState.length)throw new P;if(I._transformState.transforming)throw new y;return I.push(null)}w(1765)(U,m),U.prototype.push=function(I,x){return this._transformState.needTransform=!1,m.prototype.push.call(this,I,x)},U.prototype._transform=function(I,x,Z){Z(new C("_transform()"))},U.prototype._write=function(I,x,Z){var Y=this._transformState;if(Y.writecb=Z,Y.writechunk=I,Y.writeencoding=x,!Y.transforming){var $=this._readableState;(Y.needTransform||$.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}},U.prototype._read=function(I){var x=this._transformState;x.writechunk===null||x.transforming?x.needTransform=!0:(x.transforming=!0,this._transform(x.writechunk,x.writeencoding,x.afterTransform))},U.prototype._destroy=function(I,x){m.prototype._destroy.call(this,I,function(Z){x(Z)})}},8318:function(b,p,w){function k(We){var ut=this;this.next=null,this.entry=null,this.finish=function(){(function(At,Ne,et){var dt=At.entry;for(At.entry=null;dt;){var rn=dt.callback;Ne.pendingcb--,rn(void 0),dt=dt.next}Ne.corkedRequestsFree.next=At})(ut,We)}}var C;b.exports=ye,ye.WritableState=oe;var E,y={deprecate:w(7839)},P=w(9299),m=w(1549).Buffer,T=w.g.Uint8Array||function(){},U=w(6163),M=w(7269).getHighWaterMark,_=w(3690).q,I=_.ERR_INVALID_ARG_TYPE,x=_.ERR_METHOD_NOT_IMPLEMENTED,Z=_.ERR_MULTIPLE_CALLBACK,Y=_.ERR_STREAM_CANNOT_PIPE,$=_.ERR_STREAM_DESTROYED,Q=_.ERR_STREAM_NULL_VALUES,se=_.ERR_STREAM_WRITE_AFTER_END,R=_.ERR_UNKNOWN_ENCODING,X=U.errorOrDestroy;function ce(){}function oe(We,ut,At){C=C||w(6138),We=We||{},typeof At!="boolean"&&(At=ut instanceof C),this.objectMode=!!We.objectMode,At&&(this.objectMode=this.objectMode||!!We.writableObjectMode),this.highWaterMark=M(this,We,"writableHighWaterMark",At),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ne=We.decodeStrings===!1;this.decodeStrings=!Ne,this.defaultEncoding=We.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(et){(function(dt,rn){var Yt=dt._writableState,St=Yt.sync,kt=Yt.writecb;if(typeof kt!="function")throw new Z;if(function(ne){ne.writing=!1,ne.writecb=null,ne.length-=ne.writelen,ne.writelen=0}(Yt),rn)(function(ne,Ue,L,D,G){--Ue.pendingcb,L?(process.nextTick(G,D),process.nextTick(ft,ne,Ue),ne._writableState.errorEmitted=!0,X(ne,D)):(G(D),ne._writableState.errorEmitted=!0,X(ne,D),ft(ne,Ue))})(dt,Yt,St,rn,kt);else{var Re=Ge(Yt)||dt.destroyed;Re||Yt.corked||Yt.bufferProcessing||!Yt.bufferedRequest||Ie(dt,Yt),St?process.nextTick(Xe,dt,Yt,Re,kt):Xe(dt,Yt,Re,kt)}})(ut,et)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=We.emitClose!==!1,this.autoDestroy=!!We.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new k(this)}function ye(We){var ut=this instanceof(C=C||w(6138));if(!ut&&!E.call(ye,this))return new ye(We);this._writableState=new oe(We,this,ut),this.writable=!0,We&&(typeof We.write=="function"&&(this._write=We.write),typeof We.writev=="function"&&(this._writev=We.writev),typeof We.destroy=="function"&&(this._destroy=We.destroy),typeof We.final=="function"&&(this._final=We.final)),P.call(this)}function be(We,ut,At,Ne,et,dt,rn){ut.writelen=Ne,ut.writecb=rn,ut.writing=!0,ut.sync=!0,ut.destroyed?ut.onwrite(new $("write")):At?We._writev(et,ut.onwrite):We._write(et,dt,ut.onwrite),ut.sync=!1}function Xe(We,ut,At,Ne){At||function(et,dt){dt.length===0&&dt.needDrain&&(dt.needDrain=!1,et.emit("drain"))}(We,ut),ut.pendingcb--,Ne(),ft(We,ut)}function Ie(We,ut){ut.bufferProcessing=!0;var At=ut.bufferedRequest;if(We._writev&&At&&At.next){var Ne=ut.bufferedRequestCount,et=new Array(Ne),dt=ut.corkedRequestsFree;dt.entry=At;for(var rn=0,Yt=!0;At;)et[rn]=At,At.isBuf||(Yt=!1),At=At.next,rn+=1;et.allBuffers=Yt,be(We,ut,!0,ut.length,et,"",dt.finish),ut.pendingcb++,ut.lastBufferedRequest=null,dt.next?(ut.corkedRequestsFree=dt.next,dt.next=null):ut.corkedRequestsFree=new k(ut),ut.bufferedRequestCount=0}else{for(;At;){var St=At.chunk,kt=At.encoding,Re=At.callback;if(be(We,ut,!1,ut.objectMode?1:St.length,St,kt,Re),At=At.next,ut.bufferedRequestCount--,ut.writing)break}At===null&&(ut.lastBufferedRequest=null)}ut.bufferedRequest=At,ut.bufferProcessing=!1}function Ge(We){return We.ending&&We.length===0&&We.bufferedRequest===null&&!We.finished&&!We.writing}function at(We,ut){We._final(function(At){ut.pendingcb--,At&&X(We,At),ut.prefinished=!0,We.emit("prefinish"),ft(We,ut)})}function ft(We,ut){var At=Ge(ut);if(At&&(function(et,dt){dt.prefinished||dt.finalCalled||(typeof et._final!="function"||dt.destroyed?(dt.prefinished=!0,et.emit("prefinish")):(dt.pendingcb++,dt.finalCalled=!0,process.nextTick(at,et,dt)))}(We,ut),ut.pendingcb===0&&(ut.finished=!0,We.emit("finish"),ut.autoDestroy))){var Ne=We._readableState;(!Ne||Ne.autoDestroy&&Ne.endEmitted)&&We.destroy()}return At}w(1765)(ye,P),oe.prototype.getBuffer=function(){for(var We=this.bufferedRequest,ut=[];We;)ut.push(We),We=We.next;return ut},function(){try{Object.defineProperty(oe.prototype,"buffer",{get:y.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(We){}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(ye,Symbol.hasInstance,{value:function(We){return!!E.call(this,We)||this===ye&&We&&We._writableState instanceof oe}})):E=function(We){return We instanceof this},ye.prototype.pipe=function(){X(this,new Y)},ye.prototype.write=function(We,ut,At){var Ne,et=this._writableState,dt=!1,rn=!et.objectMode&&(Ne=We,m.isBuffer(Ne)||Ne instanceof T);return rn&&!m.isBuffer(We)&&(We=function(Yt){return m.from(Yt)}(We)),typeof ut=="function"&&(At=ut,ut=null),rn?ut="buffer":ut||(ut=et.defaultEncoding),typeof At!="function"&&(At=ce),et.ending?function(Yt,St){var kt=new se;X(Yt,kt),process.nextTick(St,kt)}(this,At):(rn||function(Yt,St,kt,Re){var ne;return kt===null?ne=new Q:typeof kt=="string"||St.objectMode||(ne=new I("chunk",["string","Buffer"],kt)),!ne||(X(Yt,ne),process.nextTick(Re,ne),!1)}(this,et,We,At))&&(et.pendingcb++,dt=function(Yt,St,kt,Re,ne,Ue){if(!kt){var L=function(ge,de,He){return ge.objectMode||ge.decodeStrings===!1||typeof de!="string"||(de=m.from(de,He)),de}(St,Re,ne);Re!==L&&(kt=!0,ne="buffer",Re=L)}var D=St.objectMode?1:Re.length;St.length+=D;var G=St.length<St.highWaterMark;if(G||(St.needDrain=!0),St.writing||St.corked){var K=St.lastBufferedRequest;St.lastBufferedRequest={chunk:Re,encoding:ne,isBuf:kt,callback:Ue,next:null},K?K.next=St.lastBufferedRequest:St.bufferedRequest=St.lastBufferedRequest,St.bufferedRequestCount+=1}else be(Yt,St,!1,D,Re,ne,Ue);return G}(this,et,rn,We,ut,At)),dt},ye.prototype.cork=function(){this._writableState.corked++},ye.prototype.uncork=function(){var We=this._writableState;We.corked&&(We.corked--,We.writing||We.corked||We.bufferProcessing||!We.bufferedRequest||Ie(this,We))},ye.prototype.setDefaultEncoding=function(We){if(typeof We=="string"&&(We=We.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((We+"").toLowerCase())>-1))throw new R(We);return this._writableState.defaultEncoding=We,this},Object.defineProperty(ye.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ye.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ye.prototype._write=function(We,ut,At){At(new x("_write()"))},ye.prototype._writev=null,ye.prototype.end=function(We,ut,At){var Ne=this._writableState;return typeof We=="function"?(At=We,We=null,ut=null):typeof ut=="function"&&(At=ut,ut=null),We!=null&&this.write(We,ut),Ne.corked&&(Ne.corked=1,this.uncork()),Ne.ending||function(et,dt,rn){dt.ending=!0,ft(et,dt),rn&&(dt.finished?process.nextTick(rn):et.once("finish",rn)),dt.ended=!0,et.writable=!1}(this,Ne,At),this},Object.defineProperty(ye.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ye.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(We){this._writableState&&(this._writableState.destroyed=We)}}),ye.prototype.destroy=U.destroy,ye.prototype._undestroy=U.undestroy,ye.prototype._destroy=function(We,ut){ut(We)}},7299:function(b,p,w){var k;function C(Q,se,R){return se in Q?Object.defineProperty(Q,se,{value:R,enumerable:!0,configurable:!0,writable:!0}):Q[se]=R,Q}var E=w(8800),y=Symbol("lastResolve"),P=Symbol("lastReject"),m=Symbol("error"),T=Symbol("ended"),U=Symbol("lastPromise"),M=Symbol("handlePromise"),_=Symbol("stream");function I(Q,se){return{value:Q,done:se}}function x(Q){var se=Q[y];if(se!==null){var R=Q[_].read();R!==null&&(Q[U]=null,Q[y]=null,Q[P]=null,se(I(R,!1)))}}function Z(Q){process.nextTick(x,Q)}var Y=Object.getPrototypeOf(function(){}),$=Object.setPrototypeOf((C(k={get stream(){return this[_]},next:function(){var Q=this,se=this[m];if(se!==null)return Promise.reject(se);if(this[T])return Promise.resolve(I(void 0,!0));if(this[_].destroyed)return new Promise(function(oe,ye){process.nextTick(function(){Q[m]?ye(Q[m]):oe(I(void 0,!0))})});var R,X=this[U];if(X)R=new Promise(function(oe,ye){return function(be,Xe){oe.then(function(){ye[T]?be(I(void 0,!0)):ye[M](be,Xe)},Xe)}}(X,this));else{var ce=this[_].read();if(ce!==null)return Promise.resolve(I(ce,!1));R=new Promise(this[M])}return this[U]=R,R}},Symbol.asyncIterator,function(){return this}),C(k,"return",function(){var Q=this;return new Promise(function(se,R){Q[_].destroy(null,function(X){X?R(X):se(I(void 0,!0))})})}),k),Y);b.exports=function(Q){var se,R=Object.create($,(C(se={},_,{value:Q,writable:!0}),C(se,y,{value:null,writable:!0}),C(se,P,{value:null,writable:!0}),C(se,m,{value:null,writable:!0}),C(se,T,{value:Q._readableState.endEmitted,writable:!0}),C(se,M,{value:function(X,ce){var oe=R[_].read();oe?(R[U]=null,R[y]=null,R[P]=null,X(I(oe,!1))):(R[y]=X,R[P]=ce)},writable:!0}),se));return R[U]=null,E(Q,function(X){if(X&&X.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ce=R[P];return ce!==null&&(R[U]=null,R[y]=null,R[P]=null,ce(X)),void(R[m]=X)}var oe=R[y];oe!==null&&(R[U]=null,R[y]=null,R[P]=null,oe(I(void 0,!0))),R[T]=!0}),Q.on("readable",Z.bind(null,R)),R}},8393:function(b,p,w){function k(T,U){var M=Object.keys(T);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(T);U&&(_=_.filter(function(I){return Object.getOwnPropertyDescriptor(T,I).enumerable})),M.push.apply(M,_)}return M}function C(T,U,M){return U in T?Object.defineProperty(T,U,{value:M,enumerable:!0,configurable:!0,writable:!0}):T[U]=M,T}function E(T,U){for(var M=0;M<U.length;M++){var _=U[M];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var y=w(1549).Buffer,P=w(9862).inspect,m=P&&P.custom||"inspect";b.exports=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T),this.head=null,this.tail=null,this.length=0}var U,M;return U=T,M=[{key:"push",value:function(_){var I={data:_,next:null};this.length>0?this.tail.next=I:this.head=I,this.tail=I,++this.length}},{key:"unshift",value:function(_){var I={data:_,next:this.head};this.length===0&&(this.tail=I),this.head=I,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var I=this.head,x=""+I.data;I=I.next;)x+=_+I.data;return x}},{key:"concat",value:function(_){if(this.length===0)return y.alloc(0);for(var I,x,Z,Y=y.allocUnsafe(_>>>0),$=this.head,Q=0;$;)I=$.data,x=Y,Z=Q,y.prototype.copy.call(I,x,Z),Q+=$.data.length,$=$.next;return Y}},{key:"consume",value:function(_,I){var x;return _<this.head.data.length?(x=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):x=_===this.head.data.length?this.shift():I?this._getString(_):this._getBuffer(_),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var I=this.head,x=1,Z=I.data;for(_-=Z.length;I=I.next;){var Y=I.data,$=_>Y.length?Y.length:_;if($===Y.length?Z+=Y:Z+=Y.slice(0,_),(_-=$)==0){$===Y.length?(++x,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=Y.slice($));break}++x}return this.length-=x,Z}},{key:"_getBuffer",value:function(_){var I=y.allocUnsafe(_),x=this.head,Z=1;for(x.data.copy(I),_-=x.data.length;x=x.next;){var Y=x.data,$=_>Y.length?Y.length:_;if(Y.copy(I,I.length-_,0,$),(_-=$)==0){$===Y.length?(++Z,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=Y.slice($));break}++Z}return this.length-=Z,I}},{key:m,value:function(_,I){return P(this,function(x){for(var Z=1;Z<arguments.length;Z++){var Y=arguments[Z]!=null?arguments[Z]:{};Z%2?k(Object(Y),!0).forEach(function($){C(x,$,Y[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(Y)):k(Object(Y)).forEach(function($){Object.defineProperty(x,$,Object.getOwnPropertyDescriptor(Y,$))})}return x}({},I,{depth:0,customInspect:!1}))}}],M&&E(U.prototype,M),T}()},6163:function(b){function p(C,E){k(C,E),w(C)}function w(C){C._writableState&&!C._writableState.emitClose||C._readableState&&!C._readableState.emitClose||C.emit("close")}function k(C,E){C.emit("error",E)}b.exports={destroy:function(C,E){var y=this,P=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return P||m?(E?E(C):C&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(k,this,C)):process.nextTick(k,this,C)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(C||null,function(T){!E&&T?y._writableState?y._writableState.errorEmitted?process.nextTick(w,y):(y._writableState.errorEmitted=!0,process.nextTick(p,y,T)):process.nextTick(p,y,T):E?(process.nextTick(w,y),E(T)):process.nextTick(w,y)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(C,E){var y=C._readableState,P=C._writableState;y&&y.autoDestroy||P&&P.autoDestroy?C.destroy(E):C.emit("error",E)}}},8800:function(b,p,w){var k=w(3690).q.ERR_STREAM_PREMATURE_CLOSE;function C(){}b.exports=function E(y,P,m){if(typeof P=="function")return E(y,null,P);P||(P={}),m=function(se){var R=!1;return function(){if(!R){R=!0;for(var X=arguments.length,ce=new Array(X),oe=0;oe<X;oe++)ce[oe]=arguments[oe];se.apply(this,ce)}}}(m||C);var T=P.readable||P.readable!==!1&&y.readable,U=P.writable||P.writable!==!1&&y.writable,M=function(){y.writable||I()},_=y._writableState&&y._writableState.finished,I=function(){U=!1,_=!0,T||m.call(y)},x=y._readableState&&y._readableState.endEmitted,Z=function(){T=!1,x=!0,U||m.call(y)},Y=function(se){m.call(y,se)},$=function(){var se;return T&&!x?(y._readableState&&y._readableState.ended||(se=new k),m.call(y,se)):U&&!_?(y._writableState&&y._writableState.ended||(se=new k),m.call(y,se)):void 0},Q=function(){y.req.on("finish",I)};return function(se){return se.setHeader&&typeof se.abort=="function"}(y)?(y.on("complete",I),y.on("abort",$),y.req?Q():y.on("request",Q)):U&&!y._writableState&&(y.on("end",M),y.on("close",M)),y.on("end",Z),y.on("finish",I),P.error!==!1&&y.on("error",Y),y.on("close",$),function(){y.removeListener("complete",I),y.removeListener("abort",$),y.removeListener("request",Q),y.req&&y.req.removeListener("finish",I),y.removeListener("end",M),y.removeListener("close",M),y.removeListener("finish",I),y.removeListener("end",Z),y.removeListener("error",Y),y.removeListener("close",$)}}},6233:function(b){b.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(b,p,w){var k,C=w(3690).q,E=C.ERR_MISSING_ARGS,y=C.ERR_STREAM_DESTROYED;function P(_){if(_)throw _}function m(_,I,x,Z){Z=function(Q){var se=!1;return function(){se||(se=!0,Q.apply(void 0,arguments))}}(Z);var Y=!1;_.on("close",function(){Y=!0}),k===void 0&&(k=w(8800)),k(_,{readable:I,writable:x},function(Q){if(Q)return Z(Q);Y=!0,Z()});var $=!1;return function(Q){if(!Y&&!$)return $=!0,function(se){return se.setHeader&&typeof se.abort=="function"}(_)?_.abort():typeof _.destroy=="function"?_.destroy():void Z(Q||new y("pipe"))}}function T(_){_()}function U(_,I){return _.pipe(I)}function M(_){return _.length?typeof _[_.length-1]!="function"?P:_.pop():P}b.exports=function(){for(var _=arguments.length,I=new Array(_),x=0;x<_;x++)I[x]=arguments[x];var Z,Y=M(I);if(Array.isArray(I[0])&&(I=I[0]),I.length<2)throw new E("streams");var $=I.map(function(Q,se){var R=se<I.length-1;return m(Q,R,se>0,function(X){Z||(Z=X),X&&$.forEach(T),R||($.forEach(T),Y(Z))})});return I.reduce(U)}},7269:function(b,p,w){var k=w(3690).q.ERR_INVALID_OPT_VALUE;b.exports={getHighWaterMark:function(C,E,y,P){var m=function(T,U,M){return T.highWaterMark!=null?T.highWaterMark:U?T[M]:null}(E,P,y);if(m!=null){if(!isFinite(m)||Math.floor(m)!==m||m<0)throw new k(P?y:"highWaterMark",m);return Math.floor(m)}return C.objectMode?16:16384}}},9299:function(b,p,w){b.exports=w(1159).EventEmitter},7503:function(b,p,w){var k=w(8387).Buffer,C=k.isEncoding||function(x){switch((x=""+x)&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function E(x){var Z;switch(this.encoding=function(Y){var $=function(Q){if(!Q)return"utf8";for(var se;;)switch(Q){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Q;default:if(se)return;Q=(""+Q).toLowerCase(),se=!0}}(Y);if(typeof $!="string"&&(k.isEncoding===C||!C(Y)))throw new Error("Unknown encoding: "+Y);return $||Y}(x),this.encoding){case"utf16le":this.text=m,this.end=T,Z=4;break;case"utf8":this.fillLast=P,Z=4;break;case"base64":this.text=U,this.end=M,Z=3;break;default:return this.write=_,void(this.end=I)}this.lastNeed=0,this.lastTotal=0,this.lastChar=k.allocUnsafe(Z)}function y(x){return x<=127?0:x>>5==6?2:x>>4==14?3:x>>3==30?4:x>>6==2?-1:-2}function P(x){var Z=this.lastTotal-this.lastNeed,Y=function($,Q,se){if((192&Q[0])!=128)return $.lastNeed=0,"�";if($.lastNeed>1&&Q.length>1){if((192&Q[1])!=128)return $.lastNeed=1,"�";if($.lastNeed>2&&Q.length>2&&(192&Q[2])!=128)return $.lastNeed=2,"�"}}(this,x);return Y!==void 0?Y:this.lastNeed<=x.length?(x.copy(this.lastChar,Z,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(x.copy(this.lastChar,Z,0,x.length),void(this.lastNeed-=x.length))}function m(x,Z){if((x.length-Z)%2==0){var Y=x.toString("utf16le",Z);if(Y){var $=Y.charCodeAt(Y.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],Y.slice(0,-1)}return Y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",Z,x.length-1)}function T(x){var Z=x&&x.length?this.write(x):"";if(this.lastNeed){var Y=this.lastTotal-this.lastNeed;return Z+this.lastChar.toString("utf16le",0,Y)}return Z}function U(x,Z){var Y=(x.length-Z)%3;return Y===0?x.toString("base64",Z):(this.lastNeed=3-Y,this.lastTotal=3,Y===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",Z,x.length-Y))}function M(x){var Z=x&&x.length?this.write(x):"";return this.lastNeed?Z+this.lastChar.toString("base64",0,3-this.lastNeed):Z}function _(x){return x.toString(this.encoding)}function I(x){return x&&x.length?this.write(x):""}p.s=E,E.prototype.write=function(x){if(x.length===0)return"";var Z,Y;if(this.lastNeed){if((Z=this.fillLast(x))===void 0)return"";Y=this.lastNeed,this.lastNeed=0}else Y=0;return Y<x.length?Z?Z+this.text(x,Y):this.text(x,Y):Z||""},E.prototype.end=function(x){var Z=x&&x.length?this.write(x):"";return this.lastNeed?Z+"�":Z},E.prototype.text=function(x,Z){var Y=function(Q,se,R){var X=se.length-1;if(X<R)return 0;var ce=y(se[X]);return ce>=0?(ce>0&&(Q.lastNeed=ce-1),ce):--X<R||ce===-2?0:(ce=y(se[X]))>=0?(ce>0&&(Q.lastNeed=ce-2),ce):--X<R||ce===-2?0:(ce=y(se[X]))>=0?(ce>0&&(ce===2?ce=0:Q.lastNeed=ce-3),ce):0}(this,x,Z);if(!this.lastNeed)return x.toString("utf8",Z);this.lastTotal=Y;var $=x.length-(Y-this.lastNeed);return x.copy(this.lastChar,0,$),x.toString("utf8",Z,$)},E.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length}},1067:function(b,p,w){var k;(function(C,E){var y="function",P="undefined",m="object",T="string",U="major",M="model",_="name",I="type",x="vendor",Z="version",Y="architecture",$="console",Q="mobile",se="tablet",R="smarttv",X="wearable",ce="embedded",oe="Amazon",ye="Apple",be="ASUS",Xe="BlackBerry",Ie="Browser",Ge="Chrome",at="Firefox",ft="Google",We="Huawei",ut="LG",At="Microsoft",Ne="Motorola",et="Opera",dt="Samsung",rn="Sharp",Yt="Sony",St="Xiaomi",kt="Zebra",Re="Facebook",ne="Chromium OS",Ue="Mac OS",L=function(ht){for(var yt={},Et=0;Et<ht.length;Et++)yt[ht[Et].toUpperCase()]=ht[Et];return yt},D=function(ht,yt){return typeof ht===T&&G(yt).indexOf(G(ht))!==-1},G=function(ht){return ht.toLowerCase()},K=function(ht,yt){if(typeof ht===T)return ht=ht.replace(/^\s\s*/,""),typeof yt===P?ht:ht.substring(0,500)},ge=function(ht,yt){for(var Et,Mt,_n,nn,cn,Ft,Gn=0;Gn<yt.length&&!cn;){var Sr=yt[Gn],qr=yt[Gn+1];for(Et=Mt=0;Et<Sr.length&&!cn&&Sr[Et];)if(cn=Sr[Et++].exec(ht))for(_n=0;_n<qr.length;_n++)Ft=cn[++Mt],typeof(nn=qr[_n])===m&&nn.length>0?nn.length===2?typeof nn[1]==y?this[nn[0]]=nn[1].call(this,Ft):this[nn[0]]=nn[1]:nn.length===3?typeof nn[1]!==y||nn[1].exec&&nn[1].test?this[nn[0]]=Ft?Ft.replace(nn[1],nn[2]):E:this[nn[0]]=Ft?nn[1].call(this,Ft,nn[2]):E:nn.length===4&&(this[nn[0]]=Ft?nn[3].call(this,Ft.replace(nn[1],nn[2])):E):this[nn]=Ft||E;Gn+=2}},de=function(ht,yt){for(var Et in yt)if(typeof yt[Et]===m&&yt[Et].length>0){for(var Mt=0;Mt<yt[Et].length;Mt++)if(D(yt[Et][Mt],ht))return Et==="?"?E:Et}else if(D(yt[Et],ht))return Et==="?"?E:Et;return ht},He={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Tt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[Z,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[Z,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,Z],[/opios[\/ ]+([\w\.]+)/i],[Z,[_,et+" Mini"]],[/\bopr\/([\w\.]+)/i],[Z,[_,et]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[Z,[_,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[_,Z],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[Z,[_,"UC"+Ie]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[Z,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[Z,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[Z,[_,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[Z,[_,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[Z,[_,"Smart Lenovo "+Ie]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+Ie],Z],[/\bfocus\/([\w\.]+)/i],[Z,[_,at+" Focus"]],[/\bopt\/([\w\.]+)/i],[Z,[_,et+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[Z,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[Z,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[Z,[_,et+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[Z,[_,"MIUI "+Ie]],[/fxios\/([-\w\.]+)/i],[Z,[_,at]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+Ie]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+Ie],Z],[/samsungbrowser\/([\w\.]+)/i],[Z,[_,dt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],Z],[/metasr[\/ ]?([\d\.]+)/i],[Z,[_,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[_,"Sogou Mobile"],Z],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[_,Z],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,Re],Z],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[_,Z],[/\bgsa\/([\w\.]+) .*safari\//i],[Z,[_,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[Z,[_,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[Z,[_,Ge+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,Ge+" WebView"],Z],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[Z,[_,"Android "+Ie]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,Z],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[Z,[_,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[Z,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[Z,de,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[_,Z],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],Z],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[Z,[_,at+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[_,Z],[/(cobalt)\/([\w\.]+)/i],[_,[Z,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Y,"amd64"]],[/(ia32(?=;))/i],[[Y,G]],[/((?:i[346]|x)86)[;\)]/i],[[Y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Y,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[Y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Y,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[M,[x,dt],[I,se]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[M,[x,dt],[I,Q]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[M,[x,ye],[I,Q]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[M,[x,ye],[I,se]],[/(macintosh);/i],[M,[x,ye]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[M,[x,rn],[I,Q]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[M,[x,We],[I,se]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[M,[x,We],[I,Q]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[M,/_/g," "],[x,St],[I,Q]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[M,/_/g," "],[x,St],[I,se]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[M,[x,"OPPO"],[I,Q]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[M,[x,"Vivo"],[I,Q]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[M,[x,"Realme"],[I,Q]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[M,[x,Ne],[I,Q]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[M,[x,Ne],[I,se]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[M,[x,ut],[I,se]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[M,[x,ut],[I,Q]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[M,[x,"Lenovo"],[I,se]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[M,/_/g," "],[x,"Nokia"],[I,Q]],[/(pixel c)\b/i],[M,[x,ft],[I,se]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[M,[x,ft],[I,Q]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[M,[x,Yt],[I,Q]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[M,"Xperia Tablet"],[x,Yt],[I,se]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[M,[x,"OnePlus"],[I,Q]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[M,[x,oe],[I,se]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[M,/(.+)/g,"Fire Phone $1"],[x,oe],[I,Q]],[/(playbook);[-\w\),; ]+(rim)/i],[M,x,[I,se]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[M,[x,Xe],[I,Q]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[M,[x,be],[I,se]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[M,[x,be],[I,Q]],[/(nexus 9)/i],[M,[x,"HTC"],[I,se]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[x,[M,/_/g," "],[I,Q]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[M,[x,"Acer"],[I,se]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[M,[x,"Meizu"],[I,Q]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[M,[x,"Ulefone"],[I,Q]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[x,M,[I,Q]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[x,M,[I,se]],[/(surface duo)/i],[M,[x,At],[I,se]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[M,[x,"Fairphone"],[I,Q]],[/(u304aa)/i],[M,[x,"AT&T"],[I,Q]],[/\bsie-(\w*)/i],[M,[x,"Siemens"],[I,Q]],[/\b(rct\w+) b/i],[M,[x,"RCA"],[I,se]],[/\b(venue[\d ]{2,7}) b/i],[M,[x,"Dell"],[I,se]],[/\b(q(?:mv|ta)\w+) b/i],[M,[x,"Verizon"],[I,se]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[M,[x,"Barnes & Noble"],[I,se]],[/\b(tm\d{3}\w+) b/i],[M,[x,"NuVision"],[I,se]],[/\b(k88) b/i],[M,[x,"ZTE"],[I,se]],[/\b(nx\d{3}j) b/i],[M,[x,"ZTE"],[I,Q]],[/\b(gen\d{3}) b.+49h/i],[M,[x,"Swiss"],[I,Q]],[/\b(zur\d{3}) b/i],[M,[x,"Swiss"],[I,se]],[/\b((zeki)?tb.*\b) b/i],[M,[x,"Zeki"],[I,se]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[x,"Dragon Touch"],M,[I,se]],[/\b(ns-?\w{0,9}) b/i],[M,[x,"Insignia"],[I,se]],[/\b((nxa|next)-?\w{0,9}) b/i],[M,[x,"NextBook"],[I,se]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[x,"Voice"],M,[I,Q]],[/\b(lvtel\-)?(v1[12]) b/i],[[x,"LvTel"],M,[I,Q]],[/\b(ph-1) /i],[M,[x,"Essential"],[I,Q]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[M,[x,"Envizen"],[I,se]],[/\b(trio[-\w\. ]+) b/i],[M,[x,"MachSpeed"],[I,se]],[/\btu_(1491) b/i],[M,[x,"Rotor"],[I,se]],[/(shield[\w ]+) b/i],[M,[x,"Nvidia"],[I,se]],[/(sprint) (\w+)/i],[x,M,[I,Q]],[/(kin\.[onetw]{3})/i],[[M,/\./g," "],[x,At],[I,Q]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[M,[x,kt],[I,se]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[M,[x,kt],[I,Q]],[/smart-tv.+(samsung)/i],[x,[I,R]],[/hbbtv.+maple;(\d+)/i],[[M,/^/,"SmartTV"],[x,dt],[I,R]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[x,ut],[I,R]],[/(apple) ?tv/i],[x,[M,ye+" TV"],[I,R]],[/crkey/i],[[M,Ge+"cast"],[x,ft],[I,R]],[/droid.+aft(\w+)( bui|\))/i],[M,[x,oe],[I,R]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[M,[x,rn],[I,R]],[/(bravia[\w ]+)( bui|\))/i],[M,[x,Yt],[I,R]],[/(mitv-\w{5}) bui/i],[M,[x,St],[I,R]],[/Hbbtv.*(technisat) (.*);/i],[x,M,[I,R]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[x,K],[M,K],[I,R]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[I,R]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[x,M,[I,$]],[/droid.+; (shield) bui/i],[M,[x,"Nvidia"],[I,$]],[/(playstation [345portablevi]+)/i],[M,[x,Yt],[I,$]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[M,[x,At],[I,$]],[/((pebble))app/i],[x,M,[I,X]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[M,[x,ye],[I,X]],[/droid.+; (glass) \d/i],[M,[x,ft],[I,X]],[/droid.+; (wt63?0{2,3})\)/i],[M,[x,kt],[I,X]],[/(quest( 2| pro)?)/i],[M,[x,Re],[I,X]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[x,[I,ce]],[/(aeobc)\b/i],[M,[x,oe],[I,ce]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[M,[I,Q]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[M,[I,se]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[I,se]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[I,Q]],[/(android[-\w\. ]{0,9});.+buil/i],[M,[x,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[Z,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[Z,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[_,Z],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[Z,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,Z],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[_,[Z,de,He]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[Z,de,He],[_,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[Z,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,Ue],[Z,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[Z,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,Z],[/\(bb(10);/i],[Z,[_,Xe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[Z,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[Z,[_,at+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[Z,[_,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[Z,[_,"watchOS"]],[/crkey\/([\d\.]+)/i],[Z,[_,Ge+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[_,ne],Z],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,Z],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],Z],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[_,Z]]},st=function(ht,yt){if(typeof ht===m&&(yt=ht,ht=E),!(this instanceof st))return new st(ht,yt).getResult();var Et=typeof C!==P&&C.navigator?C.navigator:E,Mt=ht||(Et&&Et.userAgent?Et.userAgent:""),_n=Et&&Et.userAgentData?Et.userAgentData:E,nn=yt?function(Ft,Gn){var Sr={};for(var qr in Ft)Gn[qr]&&Gn[qr].length%2==0?Sr[qr]=Gn[qr].concat(Ft[qr]):Sr[qr]=Ft[qr];return Sr}(Tt,yt):Tt,cn=Et&&Et.userAgent==Mt;return this.getBrowser=function(){var Ft,Gn={};return Gn[_]=E,Gn[Z]=E,ge.call(Gn,Mt,nn.browser),Gn[U]=typeof(Ft=Gn[Z])===T?Ft.replace(/[^\d\.]/g,"").split(".")[0]:E,cn&&Et&&Et.brave&&typeof Et.brave.isBrave==y&&(Gn[_]="Brave"),Gn},this.getCPU=function(){var Ft={};return Ft[Y]=E,ge.call(Ft,Mt,nn.cpu),Ft},this.getDevice=function(){var Ft={};return Ft[x]=E,Ft[M]=E,Ft[I]=E,ge.call(Ft,Mt,nn.device),cn&&!Ft[I]&&_n&&_n.mobile&&(Ft[I]=Q),cn&&Ft[M]=="Macintosh"&&Et&&typeof Et.standalone!==P&&Et.maxTouchPoints&&Et.maxTouchPoints>2&&(Ft[M]="iPad",Ft[I]=se),Ft},this.getEngine=function(){var Ft={};return Ft[_]=E,Ft[Z]=E,ge.call(Ft,Mt,nn.engine),Ft},this.getOS=function(){var Ft={};return Ft[_]=E,Ft[Z]=E,ge.call(Ft,Mt,nn.os),cn&&!Ft[_]&&_n&&_n.platform!="Unknown"&&(Ft[_]=_n.platform.replace(/chrome os/i,ne).replace(/macos/i,Ue)),Ft},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Mt},this.setUA=function(Ft){return Mt=typeof Ft===T&&Ft.length>500?K(Ft,500):Ft,this},this.setUA(Mt),this};st.VERSION="1.0.37",st.BROWSER=L([_,Z,U]),st.CPU=L([Y]),st.DEVICE=L([M,x,I,$,Q,R,se,X,ce]),st.ENGINE=st.OS=L([_,Z]),typeof p!==P?(b.exports&&(p=b.exports=st),p.UAParser=st):w.amdO?(k=(function(){return st}).call(p,w,p,b))===E||(b.exports=k):typeof C!==P&&(C.UAParser=st);var ot=typeof C!==P&&(C.jQuery||C.Zepto);if(ot&&!ot.ua){var tt=new st;ot.ua=tt.getResult(),ot.ua.get=function(){return tt.getUA()},ot.ua.set=function(ht){tt.setUA(ht);var yt=tt.getResult();for(var Et in yt)ot.ua[Et]=yt[Et]}}})(typeof window=="object"?window:this)},7839:function(b,p,w){function k(C){try{if(!w.g.localStorage)return!1}catch(y){return!1}var E=w.g.localStorage[C];return E!=null&&String(E).toLowerCase()==="true"}b.exports=function(C,E){if(k("noDeprecation"))return C;var y=!1;return function(){if(!y){if(k("throwDeprecation"))throw new Error(E);k("traceDeprecation")?console.trace(E):console.warn(E),y=!0}return C.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(b){b.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(b){b.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(b){b.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(b){b.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(b){b.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(b){b.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},d={};function g(b){var p=d[b];if(p!==void 0)return p.exports;var w=d[b]={exports:{}};return l[b].call(w.exports,w,w.exports,g),w.exports}g.amdO={},g.n=function(b){var p=b&&b.__esModule?function(){return b.default}:function(){return b};return g.d(p,{a:p}),p},g.d=function(b,p){for(var w in p)g.o(p,w)&&!g.o(b,w)&&Object.defineProperty(b,w,{enumerable:!0,get:p[w]})},g.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(b){if(typeof window=="object")return window}}(),g.o=function(b,p){return Object.prototype.hasOwnProperty.call(b,p)};var S={};return function(){g.d(S,{default:function(){return m}}),g(8416);var b,p=g(1715),w=g(8080),k=g(1737),C=g(1139),E=function(){var T,U="application/dash+xml";function M(I,x,Z){if(!I||!/^VIDEO$/i.test(I.nodeName))return null;if(I._dashjs_player)return I._dashjs_player;var Y,$=I.id||I.name||"video element";if(!(x=x||[].slice.call(I.querySelectorAll("source")).filter(function(Q){return Q.type==U})[0])&&I.src)(x=document.createElement("source")).src=I.src;else if(!x&&!I.src)return null;return Z=Z||{},(Y=(0,C.Z)(Z).create()).initialize(I,x.src,I.autoplay),T||(T=Y.getDebug().getLogger()),T.debug("Converted "+$+" to dash.js player and added content: "+x.src),I._dashjs_player=Y,Y}function _(I){return/^VIDEO$/i.test(I.nodeName)?I:_(I.parentNode)}return{create:M,createAll:function(I,x){var Z=[];I=I||"[data-dashjs-player]";for(var Y=(x=x||document).querySelectorAll(I),$=0;$<Y.length;$++){var Q=M(Y[$],null);Z.push(Q)}for(var se=x.querySelectorAll('source[type="'+U+'"]'),R=0;R<se.length;R++){var X=M(_(se[R]),null);Z.push(X)}return Z}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?E.createAll():b=window.setInterval(function(){window.dashjs&&(window.clearInterval(b),E.createAll())},500):window.addEventListener("load",function T(){window.removeEventListener("load",T),E.createAll()}));var y=E,P=g(6398);dashjs.Protection=k.default,dashjs.MetricsReporting=w.default,dashjs.MediaPlayerFactory=y,dashjs.Debug=P.Z,dashjs.supportsMediaSource=p.B;var m=dashjs}(),S.default}()})})(ZB);var bW=ZB.exports;const CW=Kb(bW);var Pu,Xi,sI,uI,Tg={};Tg.d=(i,o)=>{for(var l in o)Tg.o(o,l)&&!Tg.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:o[l]})},Tg.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o);var ME={};function Q3(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,d=Array(o);l<o;l++)d[l]=i[l];return d}function io(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{},d=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(l).filter(function(g){return Object.getOwnPropertyDescriptor(l,g).enumerable}))),d.forEach(function(g){var S;S=l[g],g in i?Object.defineProperty(i,g,{value:S,enumerable:!0,configurable:!0,writable:!0}):i[g]=S})}return i}function go(i,o){return o=o!=null?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):function(l,d){var g=Object.keys(l);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(l);g.push.apply(g,S)}return g}(Object(o)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(o,l))}),i}function J3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,d){var g,S,b=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(b!=null){var p=[],w=!0,k=!1;try{for(b=b.call(l);!(w=(g=b.next()).done)&&(p.push(g.value),!d||p.length!==d);w=!0);}catch(C){k=!0,S=C}finally{try{w||b.return==null||b.return()}finally{if(k)throw S}}return p}}(i,o)||function(l,d){if(l){if(typeof l=="string")return Q3(l,d);var g=Object.prototype.toString.call(l).slice(8,-1);if(g==="Object"&&l.constructor&&(g=l.constructor.name),g==="Map"||g==="Set")return Array.from(g);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return Q3(l,d)}}(i,o)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Tg.d(ME,{GP:()=>sI,fZ:()=>xW,vn:()=>uI}),(Pu=sI||(sI={})).LOADED="loaded",Pu.SEEKING="seeking",Pu.SEEKED="seeked",Pu.BUFFERING="buffering",Pu.BUFFERED="buffered",Pu.PLAY="play",Pu.PLAYING="playing",Pu.PAUSE="pause",Pu.ENDED="ended",Pu.TIME_UPDATE="timeupdate",(Xi=uI||(uI={})).loadstart="loadstart",Xi.progress="progress",Xi.suspend="suspend",Xi.abort="abort",Xi.error="error",Xi.emptied="emptied",Xi.stalled="stalled",Xi.loadedmetadata="loadedmetadata",Xi.loadeddata="loadeddata",Xi.canplay="canplay",Xi.canplaythrough="canplaythrough",Xi.playing="playing",Xi.waiting="waiting",Xi.seeking="seeking",Xi.seeked="seeked",Xi.ended="ended",Xi.durationchange="durationchange",Xi.timeupdate="timeupdate",Xi.play="play",Xi.pause="pause",Xi.ratechange="ratechange",Xi.resize="resize",Xi.volumechange="volumechange";var RW={paused:!1,ended:!1,loading:!0,buffering:!1,seeking:!1,initialPlayFired:!1,deferLoadedEvent:!1,deferPlayingEvent:!1,deferSeekedEvent:!1,playRequested:!1},xW=function(i){var o=i.mediaElement,l=i.callback,d=i.allowResumeAfterEnded,g=d!==void 0&&d,S=null,b=function(){typeof S=="number"&&clearTimeout(S)},p=io({},RW),w=function(){return g?p.loading:p.loading||p.ended},k=function(){!p.loading&&p.buffering&&o.playbackRate>0&&(p=go(io({},p),{buffering:!1}),l("buffered")),p.loading&&(o.playbackRate===0?p=go(io({},p),{deferLoadedEvent:!0}):(p=go(io({},p),{loading:!1,deferLoadedEvent:!1}),l("loaded")))},C=function(){w()||(p.ended&&(p.ended=!1),p.buffering&&l("buffered"),p=go(io({},p),{seeking:!0,buffering:!1}),l("seeking"))},E=function(){if(!w()&&p.seeking){if(o.playbackRate===0){p=go(io({},p),{deferSeekedEvent:!0});return}p=go(io({},p),{seeking:!1,deferSeekedEvent:!1}),l("seeked")}},y=function(){if(b(),!w()&&!p.seeking){if(o.seeking){C();return}p.buffering||(p=go(io({},p),{buffering:!0}),l("buffering"))}},P=function(){if(b(),o.playbackRate===0){p=go(io({},p),{deferPlayingEvent:!0});return}(p=go(io({},p),{deferPlayingEvent:!1})).loading&&k(),p.initialPlayFired?p.buffering?(p=go(io({},p),{buffering:!1}),l("buffered")):p.seeking&&(p=go(io({},p),{seeking:!1,deferSeekedEvent:!1}),l("seeked")):(p=go(io({},p),{initialPlayFired:!0,paused:!1,playRequested:!1}),l("playing")),p.paused&&p.playRequested&&(p=go(io({},p),{paused:!1,playRequested:!1}),l("playing"))},m=function(){return!p.seeking&&!p.buffering&&o.playbackRate===0&&!o.seeking},T=[["canplaythrough",k],["playing",P],["waiting",y],["seeking",C],["seeked",E],["ended",function(){p=go(io({},p),{ended:!0,buffering:!1,seeking:!1,loading:!1,paused:!0}),b(),l("ended")}],["timeupdate",function(){w()||(p.buffering&&!o.paused&&(p=go(io({},p),{buffering:!1}),l("buffered")),l("timeupdate"))}],["play",function(){!w()&&p.paused&&p.initialPlayFired&&(p=go(io({},p),{playRequested:!0}),l("play"))}],["pause",function(){!o.ended&&(p.playRequested||!p.paused)&&((p=go(io({},p),{playRequested:!1})).deferLoadedEvent?(p=go(io({},p),{loading:!1,deferLoadedEvent:!1}),l("loaded"),o.paused&&(p=go(io({},p),{paused:!0}),l("pause"))):(p=go(io({},p),{paused:!0}),l("pause")))}],["ratechange",function(){b();var U=o.playbackRate>0;p.deferLoadedEvent&&U&&k(),p.deferSeekedEvent&&U&&E(),p.deferPlayingEvent&&U&&P(),!w()&&(m()?S=window.setTimeout(function(){m()&&y()},50):p.buffering&&U&&(p=go(io({},p),{buffering:!1}),l("buffered")))}]];return T.forEach(function(U){var M=J3(U,2),_=M[0],I=M[1];return o.addEventListener(_,I)}),{teardown:function(){b(),T.forEach(function(U){var M=J3(U,2),_=M[0],I=M[1];return o.removeEventListener(_,I)})}}},Ou=ME.GP;ME.vn;var NW=ME.fZ;const MW={NEAR_END:"nearend"};class qB extends hf{constructor(o){var l;super(),this.options=o,this.hasEmittedNearEnd=!1,this.video=this.options.element,this.video.muted=!!this.options.muted,this.nearEndThreshold=(l=this.options.nearEndThreshold)!=null?l:10,this.setupMediaEventFilter()}createBaseEventPayload(o){return{currentTime:o.currentTime,timeStamp:Date.now()}}setupMediaEventFilter(){this.eventFilter&&(this.eventFilter.teardown(),this.eventFilter=void 0),this.eventFilter=NW({mediaElement:this.options.element,allowResumeAfterEnded:!0,callback:o=>{const l=this.createBaseEventPayload(this.video);switch(o){case Ou.LOADED:{this.emit("loaded",l);break}case Ou.SEEKING:{this.emit("seeking",l);break}case Ou.SEEKED:{this.emit("seeked",l);break}case Ou.BUFFERING:{this.emit("buffering",l);break}case Ou.BUFFERED:{this.emit("buffered",l);break}case Ou.PLAY:{this.emit("play",l);break}case Ou.PLAYING:{this.emit("playing",l);break}case Ou.PAUSE:{this.emit("pause",l);break}case Ou.ENDED:{this.emit("ended",l);break}case Ou.TIME_UPDATE:{const d=this.video.duration-this.video.currentTime;this.hasEmittedNearEnd&&d>this.nearEndThreshold&&(this.hasEmittedNearEnd=!1),!this.hasEmittedNearEnd&&d<=this.nearEndThreshold&&(this.hasEmittedNearEnd=!0,this.emit(MW.NEAR_END,{...l,remainingTime:d})),this.emit("timeupdate",l);break}}}})}destroy(){var o;(o=this.eventFilter)==null||o.teardown()}getStats(){const o=this.options.element.getVideoPlaybackQuality();return{droppedVideoFrames:o.droppedVideoFrames,totalVideoFrames:o.totalVideoFrames}}}class DW extends Error{constructor(o,l){super(o),this.rawError=l}}class PW extends qB{constructor(o){var d,g;super(o),this.name="DashJSEngine",this.player=CW.MediaPlayer().create(),this.options.policyQuery&&this.options.policyQuery.startsWith("?")&&this.player.extend("RequestModifier",function(){return{modifyRequestURL:function(S){return S+o.policyQuery}}},!0);const l={"com.widevine.alpha":{serverURL:(d=this.options)==null?void 0:d.widevineLicenseUrl,httpRequestHeaders:o.customLicenceRequestHeaders,priority:0,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO"}};this.player.updateSettings({streaming:{cacheInitSegments:!0,abr:{initialBitrate:{video:4e7},minBitrate:{video:4e6}},protection:{keepProtectionMediaKeys:this.options.keepProtectionData!==!1},buffer:{stableBufferTime:12,bufferToKeep:6}}}),this.player.initialize(this.options.element,void 0,(g=this.options.autoPlay)!=null?g:!1,void 0),this.options.widevineLicenseUrl&&this.player.setProtectionData(l)}destroy(){this.player.destroy(),super.destroy()}async load(o,l){this.setupMediaEventFilter(),await new Promise((d,g)=>{var S;this.once("loaded",()=>{d()});try{this.player.attachSource(o,(S=l==null?void 0:l.startTimeSeconds)!=null?S:0)}catch(b){g(new DW("UnknownError",b))}})}}var GB={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(i){(function(){var o=typeof window<"u"?window:fu,l={};(function(g,S,b){var p;function w(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var k=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function C(e){e=[typeof globalThis=="object"&&globalThis,e,typeof g=="object"&&g,typeof self=="object"&&self,typeof S=="object"&&S];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var E=C(this);function y(e,t){if(t)e:{var n=E;e=e.split(".");for(var r=0;r<e.length-1;r++){var u=e[r];if(!(u in n))break e;n=n[u]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&k(n,e,{configurable:!0,writable:!0,value:t})}}y("Symbol",function(e){function t(c){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(c||"")+"_"+u++,c)}function n(c,f){this.g=c,k(this,"description",{configurable:!0,writable:!0,value:f})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return t}),y("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=E[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&k(r.prototype,e,{configurable:!0,writable:!0,value:function(){return P(w(this))}})}return e});function P(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:w(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function T(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var U=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},M;if(typeof Object.setPrototypeOf=="function")M=Object.setPrototypeOf;else{var _;e:{var I={a:!0},x={};try{x.__proto__=I,_=x.a;break e}catch(e){}_=!1}M=_?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Z=M;function Y(e,t){if(e.prototype=U(t.prototype),e.prototype.constructor=e,Z)Z(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.ik=t.prototype}function $(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function Q(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}$.prototype.s=function(e){this.h=e};function se(e,t){e.i={qg:t,Cg:!0},e.g=e.m||e.j}$.prototype.return=function(e){this.i={return:e},this.g=this.j};function R(e,t,n){return e.g=n,{value:t}}$.prototype.u=function(e){this.g=e};function X(e){e.g=0}function ce(e,t,n){e.m=t,n!=null&&(e.j=n)}function oe(e,t){e.m=0,e.j=t||0}function ye(e,t,n){e.g=t,e.m=n||0}function be(e,t){return e.m=t||0,t=e.i.qg,e.i=null,t}function Xe(e){e.A=[e.i],e.m=0,e.j=0}function Ie(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.Cg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function Ge(e){this.g=new $,this.h=e}function at(e,t){Q(e.g);var n=e.g.l;return n?ft(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),We(e))}function ft(e,t,n,r){try{var u=t.call(e.g.l,n);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.o=!1,u;var c=u.value}catch(f){return e.g.l=null,se(e.g,f),We(e)}return e.g.l=null,r.call(e.g,c),We(e)}function We(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,se(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Cg)throw t.qg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function ut(e){this.next=function(t){return Q(e.g),e.g.l?t=ft(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=We(e)),t},this.throw=function(t){return Q(e.g),e.g.l?t=ft(e,e.g.l.throw,t,e.g.s):(se(e.g,t),t=We(e)),t},this.return=function(t){return at(e,t)},this[Symbol.iterator]=function(){return this}}function At(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,u){function c(f){f.done?r(f.value):Promise.resolve(f.value).then(t,n).then(c,u)}c(e.next())})}function Ne(e){return At(new ut(new Ge(e)))}function et(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}y("Promise",function(e){function t(f){this.h=0,this.i=void 0,this.g=[],this.o=!1;var h=this.j();try{f(h.resolve,h.reject)}catch(v){h.reject(v)}}function n(){this.g=null}function r(f){return f instanceof t?f:new t(function(h){h(f)})}if(e)return e;n.prototype.h=function(f){if(this.g==null){this.g=[];var h=this;this.i(function(){h.l()})}this.g.push(f)};var u=E.setTimeout;n.prototype.i=function(f){u(f,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var h=0;h<f.length;++h){var v=f[h];f[h]=null;try{v()}catch(A){this.j(A)}}}this.g=null},n.prototype.j=function(f){this.i(function(){throw f})},t.prototype.j=function(){function f(A){return function(N){v||(v=!0,A.call(h,N))}}var h=this,v=!1;return{resolve:f(this.F),reject:f(this.l)}},t.prototype.F=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof t)this.H(f);else{e:switch(typeof f){case"object":var h=f!=null;break e;case"function":h=!0;break e;default:h=!1}h?this.C(f):this.m(f)}},t.prototype.C=function(f){var h=void 0;try{h=f.then}catch(v){this.l(v);return}typeof h=="function"?this.I(h,f):this.m(f)},t.prototype.l=function(f){this.s(2,f)},t.prototype.m=function(f){this.s(1,f)},t.prototype.s=function(f,h){if(this.h!=0)throw Error("Cannot settle("+f+", "+h+"): Promise already settled in state"+this.h);this.h=f,this.i=h,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var f=this;u(function(){if(f.B()){var h=E.console;typeof h<"u"&&h.error(f.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var f=E.CustomEvent,h=E.Event,v=E.dispatchEvent;return typeof v>"u"?!0:(typeof f=="function"?f=new f("unhandledrejection",{cancelable:!0}):typeof h=="function"?f=new h("unhandledrejection",{cancelable:!0}):(f=E.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f)),f.promise=this,f.reason=this.i,v(f))},t.prototype.A=function(){if(this.g!=null){for(var f=0;f<this.g.length;++f)c.h(this.g[f]);this.g=null}};var c=new n;return t.prototype.H=function(f){var h=this.j();f.Bd(h.resolve,h.reject)},t.prototype.I=function(f,h){var v=this.j();try{f.call(h,v.resolve,v.reject)}catch(A){v.reject(A)}},t.prototype.then=function(f,h){function v(z,J){return typeof z=="function"?function(fe){try{A(z(fe))}catch(pe){N(pe)}}:J}var A,N,B=new t(function(z,J){A=z,N=J});return this.Bd(v(f,A),v(h,N)),B},t.prototype.catch=function(f){return this.then(void 0,f)},t.prototype.Bd=function(f,h){function v(){switch(A.h){case 1:f(A.i);break;case 2:h(A.i);break;default:throw Error("Unexpected state: "+A.h)}}var A=this;this.g==null?c.h(v):this.g.push(v),this.o=!0},t.resolve=r,t.reject=function(f){return new t(function(h,v){v(f)})},t.race=function(f){return new t(function(h,v){for(var A=m(f),N=A.next();!N.done;N=A.next())r(N.value).Bd(h,v)})},t.all=function(f){var h=m(f),v=h.next();return v.done?r([]):new t(function(A,N){function B(fe){return function(pe){z[fe]=pe,J--,J==0&&A(z)}}var z=[],J=0;do z.push(void 0),J++,r(v.value).Bd(B(z.length-1),N),v=h.next();while(!v.done)})},t});function dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}y("WeakMap",function(e){function t(v){if(this.g=(h+=Math.random()+1).toString(),v){v=m(v);for(var A;!(A=v.next()).done;)A=A.value,this.set(A[0],A[1])}}function n(){}function r(v){var A=typeof v;return A==="object"&&v!==null||A==="function"}function u(v){if(!dt(v,f)){var A=new n;k(v,f,{value:A})}}function c(v){var A=Object[v];A&&(Object[v]=function(N){return N instanceof n?N:(Object.isExtensible(N)&&u(N),A(N))})}if(function(){if(!e||!Object.seal)return!1;try{var v=Object.seal({}),A=Object.seal({}),N=new e([[v,2],[A,3]]);return N.get(v)!=2||N.get(A)!=3?!1:(N.delete(v),N.set(A,4),!N.has(v)&&N.get(A)==4)}catch(B){return!1}}())return e;var f="$jscomp_hidden_"+Math.random();c("freeze"),c("preventExtensions"),c("seal");var h=0;return t.prototype.set=function(v,A){if(!r(v))throw Error("Invalid WeakMap key");if(u(v),!dt(v,f))throw Error("WeakMap key fail: "+v);return v[f][this.g]=A,this},t.prototype.get=function(v){return r(v)&&dt(v,f)?v[f][this.g]:void 0},t.prototype.has=function(v){return r(v)&&dt(v,f)&&dt(v[f],this.g)},t.prototype.delete=function(v){return r(v)&&dt(v,f)&&dt(v[f],this.g)?delete v[f][this.g]:!1},t}),y("Map",function(e){function t(){var h={};return h.Nb=h.next=h.head=h}function n(h,v){var A=h[1];return P(function(){if(A){for(;A.head!=h[1];)A=A.Nb;for(;A.next!=A.head;)return A=A.next,{done:!1,value:v(A)};A=null}return{done:!0,value:void 0}})}function r(h,v){var A=v&&typeof v;A=="object"||A=="function"?c.has(v)?A=c.get(v):(A=""+ ++f,c.set(v,A)):A="p_"+v;var N=h[0][A];if(N&&dt(h[0],A))for(h=0;h<N.length;h++){var B=N[h];if(v!==v&&B.key!==B.key||v===B.key)return{id:A,list:N,index:h,entry:B}}return{id:A,list:N,index:-1,entry:void 0}}function u(h){if(this[0]={},this[1]=t(),this.size=0,h){h=m(h);for(var v;!(v=h.next()).done;)v=v.value,this.set(v[0],v[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var h=Object.seal({x:4}),v=new e(m([[h,"s"]]));if(v.get(h)!="s"||v.size!=1||v.get({x:4})||v.set({x:4},"t")!=v||v.size!=2)return!1;var A=v.entries(),N=A.next();return N.done||N.value[0]!=h||N.value[1]!="s"?!1:(N=A.next(),!(N.done||N.value[0].x!=4||N.value[1]!="t"||!A.next().done))}catch(B){return!1}}())return e;var c=new WeakMap;u.prototype.set=function(h,v){h=h===0?0:h;var A=r(this,h);return A.list||(A.list=this[0][A.id]=[]),A.entry?A.entry.value=v:(A.entry={next:this[1],Nb:this[1].Nb,head:this[1],key:h,value:v},A.list.push(A.entry),this[1].Nb.next=A.entry,this[1].Nb=A.entry,this.size++),this},u.prototype.delete=function(h){return h=r(this,h),h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this[0][h.id],h.entry.Nb.next=h.entry.next,h.entry.next.Nb=h.entry.Nb,h.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this[0]={},this[1]=this[1].Nb=t(),this.size=0},u.prototype.has=function(h){return!!r(this,h).entry},u.prototype.get=function(h){return(h=r(this,h).entry)&&h.value},u.prototype.entries=function(){return n(this,function(h){return[h.key,h.value]})},u.prototype.keys=function(){return n(this,function(h){return h.key})},u.prototype.values=function(){return n(this,function(h){return h.value})},u.prototype.forEach=function(h,v){for(var A=this.entries(),N;!(N=A.next()).done;)N=N.value,h.call(v,N[1],N[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var f=0;return u}),y("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(m([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var u=r.entries(),c=u.next();return c.done||c.value[0]!=n||c.value[1]!=n?!1:(c=u.next(),c.done||c.value[0]==n||c.value[0].x!=4||c.value[1]!=c.value[0]?!1:u.next().done)}catch(f){return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var u=this;this.g.forEach(function(c){return n.call(r,c,c,u)})},t)});function rn(e,t){e instanceof String&&(e+="");var n=0,r=!1,u={next:function(){if(!r&&n<e.length){var c=n++;return{value:t(c,e[c]),done:!1}}return r=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}y("Array.prototype.keys",function(e){return e||function(){return rn(this,function(t){return t})}});function Yt(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,u=0;u<r;u++){var c=e[u];if(t.call(n,c,u,e))return{Ag:u,v:c}}return{Ag:-1,v:void 0}}y("Array.prototype.findIndex",function(e){return e||function(t,n){return Yt(this,t,n).Ag}}),y("Array.from",function(e){return e||function(t,n,r){n=n!=null?n:function(h){return h};var u=[],c=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof c=="function"){t=c.call(t);for(var f=0;!(c=t.next()).done;)u.push(n.call(r,c.value,f++))}else for(c=t.length,f=0;f<c;f++)u.push(n.call(r,t[f],f));return u}}),y("Array.prototype.values",function(e){return e||function(){return rn(this,function(t,n){return n})}}),y("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),y("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var u=r.length;for(n=n||0,0>n&&(n=Math.max(n+u,0));n<u;n++){var c=r[n];if(c===t||Object.is(c,t))return!0}return!1}});function St(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}y("String.prototype.includes",function(e){return e||function(t,n){return St(this,t,"includes").indexOf(t,n||0)!==-1}}),y("String.fromCodePoint",function(e){return e||function(t){for(var n="",r=0;r<arguments.length;r++){var u=Number(arguments[r]);if(0>u||1114111<u||u!==Math.floor(u))throw new RangeError("invalid_code_point "+u);65535>=u?n+=String.fromCharCode(u):(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),n+=String.fromCharCode(u&1023|56320))}return n}}),y("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),u=new e([n]);return!u.has(n)||u.has(r)?!1:(u.delete(n),u.add(r),!u.has(n)&&u.has(r))}catch(c){return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),y("Array.prototype.find",function(e){return e||function(t,n){return Yt(this,t,n).v}}),y("String.prototype.startsWith",function(e){return e||function(t,n){var r=St(this,t,"startsWith"),u=r.length,c=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var f=0;f<c&&n<u;)if(r[n++]!=t[f++])return!1;return f>=c}}),y("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)dt(t,r)&&n.push([r,t[r]]);return n}});var kt=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var u in r)dt(r,u)&&(e[u]=r[u])}return e};y("Object.assign",function(e){return e||kt}),y("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),y("Array.prototype.entries",function(e){return e||function(){return rn(this,function(t,n){return[t,n]})}}),y("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),y("String.prototype.repeat",function(e){return e||function(t){var n=St(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),y("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),y("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)dt(t,r)&&n.push(t[r]);return n}}),y("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),y("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),y("String.prototype.endsWith",function(e){return e||function(t,n){var r=St(this,t,"endsWith");n===void 0&&(n=r.length),n=Math.max(0,Math.min(n|0,r.length));for(var u=t.length;0<u&&0<n;)if(r[--n]!=t[--u])return!1;return 0>=u}}),y("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}});var Re=this||self;function ne(e,t){e=e.split(".");var n=Re;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function Ue(){}function L(){}function D(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}D.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function G(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new D(2),this.j=new D(5),this.g=0,this.i=128e3,this.l=16e3}K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(G(this.h),G(this.j))};function ge(){}function de(){}function He(){}function Tt(e){var t=et.apply(1,arguments);ht.has(e)||(ht.add(e),He.apply(ge,T(t)))}function st(){}function ot(){}function tt(){}var ht=new Set;g.console&&(He=function(){return console.warn.apply(console,T(et.apply(0,arguments)))},de=function(){console.error.apply(console,T(et.apply(0,arguments)))});function yt(){this.g={}}p=yt.prototype,p.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},p.get=function(e){return(e=this.g[e])?e.slice():null},p.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},p.forEach=function(e){for(var t in this.g)e(t,this.g[t])},p.size=function(){return Object.keys(this.g).length},p.keys=function(){return Object.keys(this.g)};function Et(){this.g=new yt}p=Et.prototype,p.release=function(){this.Qa(),this.g=null},p.D=function(e,t,n,r){this.g&&(e=new Mt(e,t,n,r),this.g.push(t,e))},p.pa=function(e,t,n,r){function u(f){c.$a(e,t,u),n(f)}var c=this;this.D(e,t,u,r)},p.$a=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,u.target!=e||n!=u.listener&&n||(u.$a(),this.g.remove(t,u))}},p.Qa=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,T(e.g[n]));for(e=m(t),t=e.next();!t.done;t=e.next())t.value.$a();this.g.g={}}},ne("shaka.util.EventManager",Et),Et.prototype.removeAll=Et.prototype.Qa,Et.prototype.unlisten=Et.prototype.$a,Et.prototype.listenOnce=Et.prototype.pa,Et.prototype.listen=Et.prototype.D,Et.prototype.release=Et.prototype.release;function Mt(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=_n(e,r),this.target.addEventListener(t,n,this.g)}Mt.prototype.$a=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function _n(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),nn(e)?t:t.capture||!1}function nn(e){var t=cn;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(u){t=!1}cn=t}return t||!1}var cn=void 0;function Ft(e){if(Sr.has(e))return Sr.get(e);if(g.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return Sr.set(e,t),t}return g.MediaSource?(t=MediaSource.isTypeSupported(e),Sr.set(e,t),t):!1}function Gn(){return!!g.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var Sr=new Map;function qr(e,t){this.g=e,this.h=t}qr.prototype.toString=function(){return"v"+this.g+"."+this.h};function gr(e,t){var n=new qr(5,0),r=Gr,u=r.g,c=n.h-u.h;(0<(n.g-u.g||c)?r.i:r.h)(r.g,n,e,t)}function fi(e,t,n,r){He([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function ao(e,t,n,r){de([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var Gr=null;function so(){}so.prototype.extract=function(){},so.prototype.decode=function(){return[]},so.prototype.clear=function(){},so.prototype.getStreams=function(){return[]};function xi(){}xi.prototype.init=function(){},xi.prototype.parse=function(){return[]};function Fi(){}function no(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(uo(e)==uo(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=nr(e);t=nr(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function uo(e){return e instanceof ArrayBuffer?e:e.buffer}function Ni(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function nr(e,t,n){return n=n===void 0?1/0:n,gn(e,t===void 0?0:t,n,Uint8Array)}function Zu(e,t,n){return n=n===void 0?1/0:n,gn(e,t===void 0?0:t,n,Uint16Array)}function ln(e,t,n){return n=n===void 0?1/0:n,gn(e,t===void 0?0:t,n,DataView)}function gn(e,t,n,r){var u=uo(e),c=1;"BYTES_PER_ELEMENT"in r&&(c=r.BYTES_PER_ELEMENT);var f=((e.byteOffset||0)+e.byteLength)/c;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/c,f))),new r(u,e,Math.floor(Math.min(e+Math.max(n,0),f))-e)}ne("shaka.util.BufferUtils",Fi),Fi.toDataView=ln,Fi.toUint16=Zu,Fi.toUint8=nr,Fi.toArrayBuffer=Ni,Fi.equal=no;function pn(){}pn.prototype.init=function(){},pn.prototype.i=function(){},pn.prototype.g=function(){},pn.prototype.j=function(){},ne("shaka.media.IClosedCaptionParser",pn);function wt(e){this.l=new xi,(e=$t[e.toLowerCase()])&&(this.l=e()),this.h=new so,(e=Pt)&&(this.h=e())}wt.prototype.init=function(e,t){t!==void 0&&t||this.g(),this.l.init(e)},wt.prototype.i=function(e){e=this.l.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=nr(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},wt.prototype.g=function(){this.h.clear()},wt.prototype.j=function(){return this.h.getStreams()},ne("shaka.media.ClosedCaptionParser",wt),wt.findDecoder=function(){return Pt},wt.unregisterDecoder=function(){Pt=null},wt.registerDecoder=function(e){Pt=e},wt.findParser=function(e){return $t[e]},wt.unregisterParser=function(e){delete $t[e]},wt.registerParser=function(e,t){$t[e]=t};var $t={},Pt=null;function Kt(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=wn,this.scroll=Mn}ne("shaka.text.CueRegion",Kt);var wn=1;Kt.units={PX:0,PERCENTAGE:wn,LINES:2};var Mn="";Kt.scrollMode={NONE:Mn,UP:"up"};function zn(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Kn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function Ln(e,t,n){if(n||(n=zn),e.length!=t.length)return!1;t=t.slice(),e=m(e);for(var r=e.next(),u={};!r.done;u={Dg:void 0},r=e.next()){if(u.Dg=r.value,r=t.findIndex(function(c){return function(f){return n(c.Dg,f)}}(u)),r==-1)return!1;t[r]=t[t.length-1],t.pop()}return t.length==0}function fn(e,t,n){if(n||(n=zn),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Ye(e,t,n){var r=et.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}Ye.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},ne("shaka.util.Error",Ye),Ye.Severity={RECOVERABLE:1,CRITICAL:2},Ye.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Ye.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:4001};function Un(e){this.h=e,this.g=void 0}Un.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function fr(e,t){return e.length&&t.length&&e!==t?0<Ir(e,t).length:!0}function Ir(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.keySystem==c.keySystem){u=new Map;for(var f=m((r.initData||[]).concat(c.initData||[])),h=f.next();!h.done;h=f.next())h=h.value,u.set(h.keyId,h);u=Array.from(u.values()),f=r.keyIds&&c.keyIds?new Set([].concat(T(r.keyIds),T(c.keyIds))):r.keyIds||c.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||c.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||c.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||c.persistentStateRequired,videoRobustness:r.videoRobustness||c.videoRobustness,audioRobustness:r.audioRobustness||c.audioRobustness,serverCertificate:r.serverCertificate||c.serverCertificate,serverCertificateUri:r.serverCertificateUri||c.serverCertificateUri,initData:u,keyIds:f});break}}return n}function Hr(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}var er=new Un(function(){return Ni(new Uint8Array([0]))}),dn=new Map;function vn(e){this.h=e,this.g=null}vn.prototype.Z=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){g.clearTimeout(r),n=!1},r=g.setTimeout(function(){n&&t.h()},1e3*e),this},vn.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function on(e){this.h=e,this.g=null}on.prototype.wc=function(){return this.stop(),this.h(),this},on.prototype.Z=function(e){var t=this;return this.stop(),this.g=new vn(function(){t.h()}).Z(e),this},on.prototype.Ra=function(e){var t=this;return this.stop(),this.g=new vn(function(){t.g.Z(e),t.h()}).Z(e),this},on.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},ne("shaka.util.Timer",on),on.prototype.stop=on.prototype.stop,on.prototype.tickEvery=on.prototype.Ra,on.prototype.tickAfter=on.prototype.Z,on.prototype.tickNow=on.prototype.wc;function tr(){var e=g.ManagedMediaSource||g.MediaSource;return!!(e&&e.isTypeSupported)}function ur(e){return ir().canPlayType(e)!=""}function xr(){return!!navigator.userAgent.match(/Edge?\//)}function Rr(){return sn("Xbox One")}function di(){return sn("Tizen")}function Ui(){return sn("Tizen 3")}function ni(){return sn("Tizen 2")}function li(){return sn("Web0S")}function vi(){return li()&&ys()===38}function ri(){return sn("CrKey")}function ys(){if(!sn("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function Ao(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!di()&&!sn("PC=EOS")&&!sn("PC=APL")&&!sn("VirginMedia")&&!yu()&&!Ri()&&!sn("AFT")&&!sn("WPE")&&!sn("DT_STB_BCM")}function Yo(){return sn("PlayStation 5")}function Ri(){return sn("PlayStation 4")}function qu(){return sn("Hisense")||sn("VIDAA")}function yu(){return sn("SOPOpenBrowser")}function qs(){if(!Ao())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function xl(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("windows"):!1}function Gu(){return sn("Android")}function Hu(){return!!(di()||li()||Rr()||Ri()||Yo()||sn("AFT")||sn("PC=EOS")||sn("PC=APL")||sn("VirginMedia")||yu()||sn("WPE")||ri()||qu()||sn("DT_STB_BCM"))}function sn(e){return(navigator.userAgent||"").includes(e)}function ir(){return Ii||(Wr||(Wr=new on(function(){Ii=null})),(Ii=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Ii=document.createElement("video")),Wr.Z(1),Ii)}function Tr(e){return e?e===g.shakaMediaKeysPolyfill:!!g.shakaMediaKeysPolyfill}function Ai(){var e,t,n,r,u,c,f,h,v,A,N,B,z,J,fe;return Ne(function(pe){switch(pe.g){case 1:if(e={width:1/0,height:1/0},ri()){if(B=g.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,ce(pe,15),!(z=B)){pe.u(17);break}return R(pe,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),18)}if(di()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch(Ee){He("Tizen: Error detecting screen size, default screen size 1920x1080.")}pe.u(3);break}if(Rr()){e.width=1920,e.height=1080;try{n=void 0,n=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows,r=new n.Media.Protection.ProtectionCapabilities,u=n.Media.Protection.ProtectionCapabilityResult,c=null;do c=r.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(c===u.maybe);c===u.probably&&(e.width=3840,e.height=2160)}catch(Ee){He("Xbox: Error detecting screen size, default screen size 1920x1080.")}pe.u(3);break}if(li()){try{f=JSON.parse(g.PalmSystem.deviceInfo),e.width=Math.max(1920,f.screenWidth),e.height=Math.max(1080,f.screenHeight)}catch(Ee){He("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}pe.u(3);break}if(qu()){g.Hisense_Get4KSupportState&&g.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),pe.u(3);break}if(!Ri()&&!Yo()){pe.u(3);break}return h=!1,ce(pe,9),R(pe,g.msdk.device.getDisplayInfo(),11);case 11:v=pe.h,h=v.resolution==="4K",ye(pe,10);break;case 9:return be(pe),ce(pe,12),R(pe,g.msdk.device.getDisplayInfoImmediate(),14);case 14:A=pe.h,h=A.resolution==="4K",ye(pe,10);break;case 12:N=be(pe),He("PlayStation: Failed to get the display info:",N);case 10:h?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),pe.u(3);break;case 18:z=pe.h;case 17:if(z){e.width=3840,e.height=2160,pe.u(19);break}if(!(J=B)){pe.u(20);break}return R(pe,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),21);case 21:J=pe.h;case 20:J&&(e.width=1920,e.height=1080);case 19:ye(pe,3);break;case 15:fe=be(pe),de("Failed to check canDisplayType:",fe);case 3:return pe.return(e)}})}var Wr=null,Ii=null;function Vr(){}function Cr(e){if(!e)return"";if(e=nr(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),g.TextDecoder&&!Ri())return e=new TextDecoder().decode(e),e.includes("�")&&de('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):r=e[n],65535>=r)t+=String.fromCharCode(r);else{r-=65536;var u=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+u)}}return t}function ci(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new Ye(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=ln(e);for(var u=0;u<n;u++)r[u]=e.getUint16(2*u,t);return oa(r)}function Br(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=nr(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Cr(n);if(n[0]==254&&n[1]==255)return ci(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return ci(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return ci(e,!1);if(n[1]==0&&n[3]==0)return ci(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Cr(e);throw new Ye(2,2,2003)}function bi(e){if(g.TextEncoder&&!Ri()){var t=new TextEncoder;return Ni(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Ni(t)}function yo(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),u=0;u<e.length;++u)r.setUint16(2*u,e.charCodeAt(u),t);return n}function oa(e){return Sa.value()(e)}function yi(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return u[1]=="#"?(u=u[2]=="x"||u[2]=="X"?parseInt(u.substring(3),16):parseInt(u.substring(2),10),0<=u&&1114111>=u?String.fromCodePoint(u):""):t[u]||"'"}):e||""}ne("shaka.util.StringUtils",Vr),Vr.resetFromCharCode=function(){Sa.g=void 0},Vr.toUTF16=yo,Vr.toUTF8=bi,Vr.fromBytesAutoDetect=Br,Vr.fromUTF16=ci,Vr.fromUTF8=Cr;var Sa=new Un(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch(u){return!1}}for(var t={dc:65536};0<t.dc;t={dc:t.dc},t.dc/=2)if(e(t.dc))return function(n){return function(r){for(var u="",c=0;c<r.length;c+=n.dc)u+=String.fromCharCode.apply(null,r.subarray(c,c+n.dc));return u}}(t);return null});function aa(e){this.h=e||"",this.g=0}function Es(e){wa(e,/[ \t]+/gm)}function wa(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Aa(e){return e.g==e.h.length?null:(e=wa(e,/[^ \t\n]*/gm))?e[0]:null}function Eu(e){if(e=wa(e,bh),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function _u(e){return e?Eu(new aa(e)):null}var bh=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Ia(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer instanceof ArrayBuffer)return r;if(n.has(r))return null;var u=r.constructor==Array;if(r.constructor!=Object&&!u)return null;n.add(r);var c=u?[]:{},f;for(f in r)c[f]=t(r[f]);return u&&(c.length=r.length),c}}var n=new WeakSet;return t(e)}function _s(e){var t={},n;for(n in e)t[n]=e[n];return t}function Tu(e,t){var n=n===void 0?!1:n;return e=Br(e),Su(e,t,n)}function Su(e,t,n){return e=vf(e,n===void 0?!1:n),!t&&e.length?e[0]:(e=e.find(function(r){return t.split(",").includes(r.tagName)}))?e:null}function Vu(e){return Dh.has(e)?Dh.get(e):""}function vf(e,t){function n(c,f){f=f===void 0?!1:f;for(var h=[];e[u];)if(e.charCodeAt(u)==60){if(e.charCodeAt(u+1)===47){f=u+2,u=e.indexOf(">",u),f=e.substring(f,u);var v=f.indexOf(c);if(v==-1){var A=c.indexOf(".");0<A&&(v=f.indexOf(c.substring(0,A)))}if(v==-1)throw c=e.substring(0,u).split("\n"),Error("Unexpected close tag\nLine: "+(c.length-1)+"\nColumn: "+(c[c.length-1].length+1)+"\nChar: "+e[u]);u+1&&(u+=1);break}else if(e.charCodeAt(u+1)===33){if(e.charCodeAt(u+2)==45){for(;u!==-1&&(e.charCodeAt(u)!==62||e.charCodeAt(u-1)!=45||e.charCodeAt(u-2)!=45||u==-1);)u=e.indexOf(">",u+1);u===-1&&(u=e.length)}else if(e.charCodeAt(u+2)===91&&e.charCodeAt(u+8)===91&&e.substr(u+3,5).toLowerCase()==="cdata"){v=e.indexOf("]]>",u),v==-1?(h.push(e.substr(u+9)),u=e.length):(h.push(e.substring(u+9,v)),u=v+3);continue}u++;continue}e:{A=f,u++;var N=r(),B={};for(v=[];e.charCodeAt(u)!==62&&e[u];){var z=e.charCodeAt(u);if(64<z&&91>z||96<z&&123>z){z=r();for(var J=e.charCodeAt(u);J&&J!==39&&J!==34&&!(64<J&&91>J||96<J&&123>J)&&J!==62;)u++,J=e.charCodeAt(u);var fe=u+1;if(u=e.indexOf(e[u],fe),fe=e.slice(fe,u),J===39||J===34){if(u===-1){if(A={tagName:N,attributes:B,children:v,parent:null},t)for(N=0;N<v.length;N++)typeof v[N]!="string"&&(v[N].parent=A);v=A;break e}}else fe=null,u--;if(z.startsWith("xmlns:")){J=fe;var pe=z.split(":")[1];Dh.set(J,pe),Tf.set(pe,J)}N==="tt"&&z==="xml:space"&&fe==="preserve"&&(A=!0),B[z]=fe}u++}for(e.charCodeAt(u-1)!==47?(u++,v=n(N,A)):u++,A={tagName:N,attributes:B,children:v,parent:null},N=v.length,B=0;B<N;B++)z=v[B],typeof z!="string"?t&&(z.parent=A):B==N-1&&z=="\n"&&v.pop();v=A}if(h.push(v),typeof v=="string")break;v.tagName[0]==="?"&&v.children&&(h.push.apply(h,T(v.children)),v.children=[])}else v=u,u=e.indexOf("<",u)-1,u===-2&&(u=e.length),v=e.slice(v,u+1),f?0<v.length&&h.push(v):(h.length&&v.length==1&&v[0]=="\n"||0<v.trim().length)&&h.push(v),u++;return h}function r(){for(var c=u;"\r\n	>/= ".indexOf(e[u])===-1&&e[u];)u++;return e.slice(c,u)}var u=0;return n("")}function Gs(e){return typeof e=="string"}function yf(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function sr(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function ei(e){return typeof e=="string"?yi(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:yi(e))}function Io(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=ei(e))&&(e=e.trim()),e):null}function Eo(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var r=e.next();!r.done;r=e.next())Eo(r.value,t,n)}return n}function Hi(e,t){return e=sr(e,t),e.length!=1?null:e[0]}function Vi(e,t,n){return e=Ec(e,t,n),e.length!=1?null:e[0]}function Er(e,t,n,r){r=r===void 0?null:r;var u=null;return e=e.attributes[t],e!=null&&(u=n(e)),u==null?r:u}function Po(e,t,n){return t=Vu(t),e.attributes[t+":"+n]||null}function Ec(e,t,n){t=Vu(t);var r=[];if(e.children){e=m(e.children);for(var u=e.next();!u.done;u=e.next())(u=u.value)&&u.tagName===t+":"+n&&r.push(u)}return r}function za(e,t,n){t=m(t);for(var r=t.next();!r.done;r=t.next())if(r=Po(e,r.value,n))return r;return null}function Ts(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function ba(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Ef(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function _c(e){return e=Number(e),e%1===0?e:null}function Hs(e){return e=Number(e),e%1===0&&0<e?e:null}function lo(e){return e=Number(e),e%1===0&&0<=e?e:null}function _f(e){return e=Number(e),isNaN(e)?null:e}function Vs(e){return e?e.toLowerCase()==="true":!1}function Ch(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Tc(e){var t=[];e=yi(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=m(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=n.match(/^([\w]+)/);if(r){var u=n.match(/(@id='(.*?)')/),c=n.match(/(@t='(\d+)')/),f=n.match(/(@n='(\d+)')/),h=n.match(/\[(\d+)\]/);t.push({name:r[0],id:u?u[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:c?Number(c[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:f?Number(f[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:h?Number(h[1])-1:null,Tb:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Tb=n.slice(1))}return t}function Rh(e,t){var n=Tc(t.attributes.sel||"");if(n.length){var r=n[n.length-1],u=t.attributes.pos||null;n=r.position,n==null&&(r.t!==null&&(n=xh(e,"t",r.t)),r.n!==null&&(n=xh(e,"n",r.n))),n===null?n=u==="prepend"?0:e.length:u==="prepend"?--n:u==="after"&&++n,u=t.tagName,(r=r.Tb)&&e[n]?pm(e[n],u,r,Io(t)||""):(u!=="remove"&&u!=="replace"||e.splice(n,1),u!=="add"&&u!=="replace"||e.splice.apply(e,[n,0].concat(T(t.children))))}}function xh(e,t,n){var r=0;e=m(e);for(var u=e.next();!u.done;u=e.next()){if(Number(u.value.attributes[t])===n)return r;r++}return null}function pm(e,t,n,r){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=r)}function Nh(e){var t="",n=e.tagName.split(":");0<n.length&&(t=n[0],t=Tf.has(t)?Tf.get(t):""),t=document.createElementNS(t,e.tagName);for(var r in e.attributes)t.setAttribute(r,e.attributes[r]);for(e=m(e.children),r=e.next();!r.done;r=e.next())r=r.value,n=void 0,typeof r=="string"?n=new Text(r):n=Nh(r),t.appendChild(n);return t}function Mh(e){if(!e)return null;var t={tagName:e.tagName,attributes:_s(e.attributes),children:[],parent:null};e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n=="string"||(n=Mh(n),n.parent=t),t.children.push(n);return t}var Dh=new Map,Tf=new Map;function jr(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Kt,this.position=null,this.positionAlign=If,this.size=0,this.textAlign=Ca,this.direction=Dl,this.writingMode=Ku,this.lineInterpretation=Pl,this.line=null,this.lineHeight="",this.lineAlign=zu,this.displayAlign=Ml,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=ym,this.fontStyle=Lh,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={ic:32,rows:15}}function Ph(e,t){return e=new jr(e,t,""),e.lineBreak=!0,e}jr.prototype.clone=function(){var e=new jr(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function Sf(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!fn(e.nestedCues,t.nestedCues,Sf))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!fn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}function wf(e,t){t=t===void 0?new Map:t;var n=e.payload;if(n.includes("<")){t.size===0&&Sc(t);var r=n;n=[];for(var u=-1,c=0;c<r.length;c++)r[c]==="<"?u=c+1:r[c]===">"&&0<u&&(u=r.substr(u,c-u),u.match(xf)&&n.push(u),u=-1);for(n=m(n),c=n.next();!c.done;c=n.next())c=c.value,r=r.replace("<"+c+">",'<div time="'+c+'">'),r+="</div>";e:{c=r,u=[];var f=-1;n="",r=!1;for(var h=0;h<c.length;h++)if(c[h]==="/"){var v=c.indexOf(">",h);if(v===-1){n=c;break e}if((v=c.substring(h+1,v))&&v=="v"){r=!0;var A=null;if(u.length&&(A=u[u.length-1]),A){if(A===v)n+="/"+v+">";else{if(!A.startsWith("v")){n+=c[h];continue}n+="/"+A+">"}h+=v.length+1}else n+=c[h]}else n+=c[h]}else c[h]==="<"?(f=h+1,c[f]!="v"&&(f=-1)):c[h]===">"&&0<f&&(u.push(c.substr(f,h-f)),f=-1),n+=c[h];for(c=m(u),u=c.next();!u.done;u=c.next())u=u.value,f=u.replace(" ",".voice-"),n=n.replace("<"+u+">","<"+f+">"),n=n.replace("</"+u+">","</"+f+">"),r||(n+="</"+f+">")}n=gm(n),e.payload="";try{var N=Su("<span>"+n+"</span>","span")}catch(B){}if(N)if(N=N.children,N.length!=1||N[0].tagName)for(N=m(N),n=N.next();!n.done;n=N.next())Af(n.value,e,t);else e.payload=yi(n);else e.payload=yi(n)}else e.payload=yi(n)}function Sc(e){for(var t=m(Object.entries(vm)),n=t.next();!n.done;n=t.next()){var r=m(n.value);n=r.next().value,r=r.next().value;var u=new jr(0,0,"");u.color=r,e.set("."+n,u)}for(t=m(Object.entries(Oh)),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,u=new jr(0,0,""),u.backgroundColor=r,e.set("."+n,u)}function gm(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||""}):e||""}function Af(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Kt,r.position=null,r.size=0,e.tagName)for(var u=m(e.tagName.split(/(?=[ .])+/g)),c=u.next();!c.done;c=u.next()){var f=c=c.value;if(f.startsWith(".voice-")){var h=f.split("-").pop();f='v[voice="'+h+'"]',n.has(f)||(f="v[voice="+h+"]")}switch(n.has(f)&&(h=r,f=n.get(f))&&(h.backgroundColor=Nl(f.backgroundColor,h.backgroundColor),h.color=Nl(f.color,h.color),h.fontFamily=Nl(f.fontFamily,h.fontFamily),h.fontSize=Nl(f.fontSize,h.fontSize),h.textShadow=Nl(f.textShadow,h.textShadow),h.fontWeight=f.fontWeight,h.fontStyle=f.fontStyle,h.opacity=f.opacity,h.rubyTag=f.rubyTag,h.textCombineUpright=f.textCombineUpright,h.wrapLine=f.wrapLine),c){case"br":r=Ph(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=Yu;break;case"i":r.fontStyle=wu;break;case"u":r.textDecoration.push(Ks);break;case"font":(c=e.attributes.color)&&(r.color=c);break;case"div":if(c=e.attributes.time,!c)break;(c=_u(c))&&(r.startTime=c);break;case"ruby":case"rp":case"rt":r.rubyTag=c}}if(u=e.children,Gs(e)||u.length==1&&Gs(u[0]))for(n=ei(e).split("\n"),e=!0,n=m(n),u=n.next();!u.done;u=n.next())u=u.value,e||(e=Ph(r.startTime,r.endTime),t.nestedCues.push(e)),0<u.length&&(e=r.clone(),e.payload=yi(u),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=m(u),e=t.next();!e.done;e=t.next())Af(e.value,r,n)}function Nl(e,t){return e&&0<e.length?e:t}ne("shaka.text.Cue",jr),jr.parseCuePayload=wf,jr.equal=Sf,jr.prototype.clone=jr.prototype.clone;var If="auto";jr.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:If};var Ca="center",bf={LEFT:"left",RIGHT:"right",CENTER:Ca,START:"start",END:"end"};jr.textAlign=bf;var Ml="after",mm={BEFORE:"before",CENTER:"center",AFTER:Ml};jr.displayAlign=mm;var Dl="ltr";jr.direction={HORIZONTAL_LEFT_TO_RIGHT:Dl,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Ku="horizontal-tb";jr.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Ku,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Pl=0;jr.lineInterpretation={LINE_NUMBER:Pl,PERCENTAGE:1};var zu="start",Cf={CENTER:"center",START:zu,END:"end"};jr.lineAlign=Cf;var vm={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};jr.defaultTextColor=vm;var Oh={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};jr.defaultTextBackgroundColor=Oh;var ym=400,Yu=700;jr.fontWeight={NORMAL:ym,BOLD:Yu};var Lh="normal",wu="italic",Rf={NORMAL:Lh,ITALIC:wu,OBLIQUE:"oblique"};jr.fontStyle=Rf;var Ks="underline";jr.textDecoration={UNDERLINE:Ks,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var xf=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function zs(){}zs.prototype.destroy=function(){};function Ss(e,t,n){Nf[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,fe:t}}function Au(e,t){for(var n=e.toLowerCase().split(";")[0],r=m([Ol,kh,Mf,sa]),u=r.next();!u.done;u=r.next())if(u=Nf[n+"-"+u.value]){var c=u.fe(),f=c.isSupported(e,t);if(c.destroy(),f)return u.fe}return null}ne("shaka.transmuxer.TransmuxerEngine",zs),zs.findTransmuxer=Au,zs.unregisterTransmuxer=function(e,t){delete Nf[e.toLowerCase().split(";")[0]+"-"+t]},zs.registerTransmuxer=Ss,zs.prototype.destroy=zs.prototype.destroy;var Nf={},sa=1,Mf=2,kh=3,Ol=4;zs.PluginPriority={FALLBACK:sa,PREFERRED_SECONDARY:Mf,PREFERRED:kh,APPLICATION:Ol};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var Em=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Ei(e){var t;e instanceof Ei?(Df(this,e.Bb),this.xc=e.xc,Iu(this,e.Db),wc(this,e.Oc),this.Pa=e.Pa,$r(this,e.g.clone()),this.jc=e.jc):e&&(t=String(e).match(Em))?(Df(this,t[1]||"",!0),this.xc=Wu(t[2]||""),Iu(this,t[3]||"",!0),wc(this,t[4]),this.Pa=Wu(t[5]||"",!0),$r(this,t[6]||"",!0),this.jc=Wu(t[7]||"")):this.g=new $u(null)}p=Ei.prototype,p.Bb="",p.xc="",p.Db="",p.Oc=null,p.Pa="",p.jc="",p.toString=function(){var e=[],t=this.Bb;if(t&&e.push(Ac(t,_m,!0),":"),t=this.Db){e.push("//");var n=this.xc;n&&e.push(Ac(n,_m,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Oc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.Db&&t.charAt(0)!="/"&&e.push("/"),e.push(Ac(t,t.charAt(0)=="/"?Uh:Fh,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.jc)&&e.push("#",Ac(t,Of)),e.join("")},p.resolve=function(e){var t=this.clone();t.Bb==="data"&&(t=new Ei);var n=!!e.Bb;n?Df(t,e.Bb):n=!!e.xc,n?t.xc=e.xc:n=!!e.Db,n?Iu(t,e.Db):n=e.Oc!=null;var r=e.Pa;if(n)wc(t,e.Oc);else if(n=!!e.Pa){if(r.charAt(0)!="/")if(this.Db&&!this.Pa)r="/"+r;else{var u=t.Pa.lastIndexOf("/");u!=-1&&(r=t.Pa.substr(0,u+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){u=r.lastIndexOf("/",0)==0,r=r.split("/");for(var c=[],f=0;f<r.length;){var h=r[f++];h=="."?u&&f==r.length&&c.push(""):h==".."?((1<c.length||c.length==1&&c[0]!="")&&c.pop(),u&&f==r.length&&c.push("")):(c.push(h),u=!0)}r=c.join("/")}}return n?t.Pa=r:n=e.g.toString()!=="",n?$r(t,e.g.clone()):n=!!e.jc,n&&(t.jc=e.jc),t},p.clone=function(){return new Ei(this)};function Df(e,t,n){e.Bb=n?Wu(t,!0):t,e.Bb&&(e.Bb=e.Bb.replace(/:$/,""))}function Iu(e,t,n){e.Db=n?Wu(t,!0):t}function wc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Oc=t}else e.Oc=null}function $r(e,t,n){t instanceof $u?e.g=t:(n||(t=Ac(t,BE)),e.g=new $u(t))}function Wu(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Ac(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Pf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Pf(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var _m=/[#\/\?@]/g,Fh=/[#\?:]/g,Uh=/[#\?]/g,BE=/[#\?@]/g,Of=/#/g;function $u(e){this.g=e||null}function Lf(e){if(!e.Ka&&(e.Ka={},e.Yc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),u=null;if(0<=r){var c=t[n].substring(0,r);u=t[n].substring(r+1)}else c=t[n];c=decodeURIComponent(c.replace(/\+/g," ")),u=u||"",e.add(c,decodeURIComponent(u.replace(/\+/g," ")))}}p=$u.prototype,p.Ka=null,p.Yc=null;function kf(e){return Lf(e),e.Yc}p.add=function(e,t){Lf(this),this.g=null;var n=this.Ka.hasOwnProperty(e)?this.Ka[e]:null;return n||(this.Ka[e]=n=[]),n.push(t),this.Yc++,this},p.set=function(e,t){return Lf(this),this.g=null,this.Ka.hasOwnProperty(e)?this.Ka[e]=[t]:this.add(e,t),this},p.get=function(e){return Lf(this),this.Ka[e]||[]},p.toString=function(){if(this.g)return this.g;if(!this.Ka)return"";var e=[],t;for(t in this.Ka)for(var n=encodeURIComponent(t),r=this.Ka[t],u=0;u<r.length;u++){var c=n;r[u]!==""&&(c+="="+encodeURIComponent(r[u])),e.push(c)}return this.g=e.join("&")},p.clone=function(){var e=new $u;if(e.g=this.g,this.Ka){var t={},n;for(n in this.Ka)t[n]=this.Ka[n].concat();e.Ka=t,e.Yc=this.Yc}return e};function co(){}function Bh(e){return e=oa(nr(e)),btoa(e)}function ws(e,t){return t=t==null?!0:t,e=Bh(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Wo(e){e=g.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function Xu(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=g.parseInt(e.substr(2*r,2),16);return n}function Ya(e){var t=nr(e);e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function hi(){for(var e=et.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var u=e[r];u instanceof Uint8Array?t.set(u,n):t.set(nr(u),n),n+=u.byteLength}return t}ne("shaka.util.Uint8ArrayUtils",co),co.concat=hi,co.toHex=Ya,co.fromHex=Xu,co.fromBase64=Wo,co.toBase64=ws,co.toStandardBase64=Bh;function Ki(e,t,n){if(n=n===void 0?"":n,t.length==0)return e;if(e.length==1&&t.length==1){var r=new Ei(e[0]);return t=new Ei(t[0]),t=r.resolve(t),n&&$r(t,n),[t.toString()]}t=t.map(function(h){return new Ei(h)}),r=[],e=m(e);for(var u=e.next();!u.done;u=e.next()){u=new Ei(u.value);for(var c=m(t),f=c.next();!f.done;f=c.next())f=u.resolve(f.value),n&&$r(f,n),r.push(f.toString())}return r}function As(e,t,n,r){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},r&&(e.keySystemUris=new Set([r])),e}function Tm(e,t){t=t===void 0?"cenc":t;var n=[],r=[],u=[];e.forEach(function(f,h){var v=h;v.length!=22&&(v=ws(Xu(h),!1));var A=f;A.length!=22&&(A=ws(Xu(f),!1)),f={kty:"oct",kid:v,k:A},n.push(f),r.push(f.kid),u.push(h)}),e=JSON.stringify({keys:n});var c=JSON.stringify({kids:r});return c=[{initData:nr(bi(c)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+g.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:c,keyIds:new Set(u)}}function Ll(e,t){if(t.length==1)return t[0];if(e=bo(e,t),e!=null)return e;throw new Ye(2,4,4025,t)}function bo(e,t){for(var n=m(Sm[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.test(c.trim()))return c.trim()}return e==_r?"":null}function Qu(e,t){var n=[];e=m(Sm[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())c=c.value,r.test(c.trim())&&n.push(c.trim())}return n}var _r="text",Mi={ja:"video",Y:"audio",wa:_r,De:"image",ej:"application"},Ff=1/15,Sm={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function jh(){}function Di(e,t){var n=e;return t&&!bu.includes(e)&&(n+='; codecs="'+t+'"'),n}function Ju(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Wa(e,t,n){var r=Di(e,t);return t=Ju(e,t),Au(t)?(e=Au(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function Zh(e,t,n){var r=[t];return Bf.forEach(function(u,c){var f=e[c];c=="codecs"?bu.includes(e.mimeType)||r.push('codecs="'+n+'"'):f&&r.push(u+'="'+f+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function kl(e){return e.split(";")[0].split("/")[1]}function _o(e){var t=wm(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function Ys(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=wm(n.value),t.push(n[0]);return t.sort().join(",")}function Ra(e){return e.split(";")[0]}function Oo(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Uf(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function wm(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}ne("shaka.util.MimeUtils",jh),jh.getFullTypeWithAllCodecs=Ju,jh.getFullType=Di;var Bf=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),bu=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Is(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function Ic(e){return _i[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!Pt:!1}Is.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function Am(e,t,n,r,u){var c,f,h,v,A,N,B;return Ne(function(z){if(z.g==1)return R(z,Promise.resolve(),2);if(!e.i||!e.j)return z.return();if(n==null||r==null)return e.i.parseInit(nr(t)),z.return();for(c=e.B?n:e.s,f={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:c},h=e.i.parseMedia(nr(t),f,u,[]),v=m(h),A=v.next();!A.done;A=v.next())N=A.value,e.A(N,u||null,f);B=h.filter(function(J){return J.startTime>=e.l&&J.startTime<e.m}),e.j.append(B),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),X(z)})}Is.prototype.remove=function(e,t){var n=this;return Ne(function(r){if(r.g==1)return R(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),X(r)})};function jE(e,t,n){e.l=t,e.m=n}function qh(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=m(t.keys()),u=r.next();!u.done;u=r.next())(u=t.get(u.value).filter(function(c){return c.endTime<=n}))&&e.j.append(u)}function Im(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var r=t.next();!r.done;r=t.next())Im(e,r.value,n)}function bm(e,t,n,r,u){var c=n+" "+r,f=new Map;t=m(t);for(var h=t.next();!h.done;h=t.next()){var v=h.value;h=v.stream,v=v.cue,f.has(h)||f.set(h,new Map),f.get(h).has(c)||f.get(h).set(c,[]),Im(e,v,u),v.startTime>=e.l&&v.startTime<e.m&&(f.get(h).get(c).push(v),h==e.C&&e.j.append([v]))}for(u=m(f.keys()),c=u.next();!c.done;c=u.next())for(c=c.value,e.o.has(c)||e.o.set(c,new Map),t=m(f.get(c).keys()),h=t.next();!h.done;h=t.next())h=h.value,v=f.get(c).get(h),e.o.get(c).set(h,v);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}ne("shaka.text.TextEngine",Is),Is.prototype.destroy=Is.prototype.destroy,Is.findParser=function(e){return _i[e]},Is.unregisterParser=function(e){delete _i[e]},Is.registerParser=function(e,t){_i[e]=t};var _i={};function ZE(e,t){return e.concat(t)}function Cm(){}function Ws(e){return e!=null}function xa(){}function el(e,t){return e=Or(e),t=Or(t),e.split("-")[0]==t.split("-")[0]}function bc(e,t){return e=Or(e),t=Or(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Cc(e,t){return e=Or(e),t=Or(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Or(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=xc.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function tl(e,t){return e=Or(e),t=Or(t),t==e?4:bc(t,e)?3:Cc(t,e)?2:bc(e,t)?1:0}function Gh(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=xc.get(e)||e}function jf(e){return e.language?Or(e.language):e.audio&&e.audio.language?Or(e.audio.language):e.video&&e.video.language?Or(e.video.language):"und"}function Rc(e,t){e=Or(e);var n=new Set;t=m(t);for(var r=t.next();!r.done;r=t.next())n.add(Or(r.value));for(t=m(n),r=t.next();!r.done;r=t.next())if(r=r.value,r==e)return r;for(t=m(n),r=t.next();!r.done;r=t.next())if(r=r.value,bc(r,e))return r;for(t=m(n),r=t.next();!r.done;r=t.next())if(r=r.value,Cc(r,e))return r;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,bc(e,t))return t;return null}ne("shaka.util.LanguageUtils",xa),xa.findClosestLocale=Rc,xa.getLocaleForVariant=jf,xa.getLocaleForText=function(e){return Or(e.language||"und")},xa.getBase=Gh,xa.relatedness=tl,xa.areSiblings=function(e,t){var n=Gh(e),r=Gh(t);return e!=n&&t!=r&&n==r},xa.normalize=Or,xa.isSiblingOf=Cc,xa.isParentOf=bc,xa.areLanguageCompatible=el,xa.areLocaleCompatible=function(e,t){return e=Or(e),t=Or(t),e==t};var xc=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Hh(){}function Rm(e,t,n,r){var u=e.variants;if((t.length||n.length)&&(u=xm(u,t,n)),r.length){for(t=new yt,u=m(u),n=u.next();!n.done;n=u.next())n=n.value,t.push(String(n.video.width||0),n);var c=[];t.forEach(function(pe,Ee){pe=0;var Oe=[];Ee=m(Ee);for(var ke=Ee.next(),rt={};!ke.done;rt={xe:void 0},ke=Ee.next())rt.xe=ke.value,ke=r.filter(function(Fe){return function($e){return Fe.xe.decodingInfos[0][$e]}}(rt)).length,ke>pe?(pe=ke,Oe=[rt.xe]):ke==pe&&Oe.push(rt.xe);c.push.apply(c,T(Oe))}),u=c}n=new Set,t=new Set,u=m(u);for(var f=u.next();!f.done;f=u.next())f=f.value,f.audio&&n.add(f.audio),f.video&&t.add(f.video);n=Array.from(n).sort(function(pe,Ee){return pe.bandwidth-Ee.bandwidth});var h=[];for(u=new Map,n=m(n),f=n.next();!f.done;f=n.next()){f=f.value;var v=f.language+(f.channelsCount||0)+(f.audioSamplingRate||0)+f.roles.join(",")+f.label+f.groupId+f.fastSwitching,A=u.get(v)||[];if(A.length){var N=A[A.length-1],B=_o(N.codecs),z=_o(f.codecs);B!=z||f.bandwidth&&N.bandwidth&&!(f.bandwidth>N.bandwidth)||(A.push(f),h.push(f.id))}else A.push(f),h.push(f.id);u.set(v,A)}var J={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,av01:.75,"dovi-av1":.7,vvc:.65};n=Array.from(t).sort(function(pe,Ee){if(!pe.bandwidth||!Ee.bandwidth||pe.bandwidth==Ee.bandwidth){if(pe.codecs&&Ee.codecs&&pe.codecs!=Ee.codecs&&pe.width==Ee.width){var Oe=_o(pe.codecs),ke=_o(Ee.codecs);if(Oe!=ke)return(J[Oe]||1)-(J[ke]||1)}return pe.width-Ee.width}return pe.bandwidth-Ee.bandwidth}),t=Gn();var fe=[];for(u=new Map,n=m(n),f=n.next();!f.done;f=n.next()){if(f=f.value,v=Math.round(f.frameRate||0)+(f.hdr||"")+f.fastSwitching,A=u.get(v)||[],A.length){if(N=A[A.length-1],!t&&(B=_o(N.codecs),z=_o(f.codecs),B!==z))continue;f.width>N.width||f.height>N.height?(A.push(f),fe.push(f.id)):f.width==N.width&&f.height==N.height&&(B=_o(N.codecs),z=_o(f.codecs),B!=z||f.bandwidth&&N.bandwidth&&!(f.bandwidth>N.bandwidth)||(A.push(f),fe.push(f.id)))}else A.push(f),fe.push(f.id);u.set(v,A)}e.variants=e.variants.filter(function(pe){var Ee=pe.audio;return pe=pe.video,!(Ee&&!h.includes(Ee.id)||pe&&!fe.includes(pe.id))})}function xm(e,t,n){t=m(t);for(var r=t.next(),u={};!r.done;u={mh:void 0},r=t.next())if(u.mh=r.value,r=e.filter(function(c){return function(f){return f.video&&f.video.codecs.startsWith(c.mh)}}(u)),r.length){e=r;break}for(n=m(n),t=n.next(),r={};!t.done;r={fg:void 0},t=n.next())if(r.fg=t.value,t=e.filter(function(c){return function(f){return f.audio&&f.audio.codecs.startsWith(c.fg)}}(r)),t.length){e=t;break}return e}function qE(e,t,n){e.variants=e.variants.filter(function(r){return Nc(r,t,n)})}function Nc(e,t,n){function r(h,v,A){return h>=v&&h<=A}var u=e.video;if(u&&u.width&&u.height){var c=u.width,f=u.height;if(f>c&&(f=m([f,c]),c=f.next().value,f=f.next().value),!r(c,t.minWidth,Math.min(t.maxWidth,n.width))||!r(f,t.minHeight,Math.min(t.maxHeight,n.height))||!r(u.width*u.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function GE(e,t,n){return n=n===void 0?[]:n,Ne(function(r){return r.g==1?R(r,Zf(e,t,0<t.offlineSessionIds.length,n),2):(Dm(t),R(r,Pm(t),0))})}function Zf(e,t,n,r){var u,c;return Ne(function(f){if(f.g==1)return Rr()&&Vh(t.variants),R(f,Mm(t.variants,n,!1,r),2);u=null,e&&(c=e.g)&&(u=c.keySystem),t.variants=t.variants.filter(function(h){var v=HE(h,u);if(!v){var A=[];h.audio&&A.push(zf(h.audio)),h.video&&A.push(zf(h.video))}return v}),X(f)})}function Vh(e){var t={dvav:"avc3",dva1:"avc1",dvhe:"hev1",dvh1:"hvc1",dvc1:"vvc1",dvi1:"vvi1"},n=new Set;e=m(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&n.add(r.video);for(n=m(n),e=n.next();!e.done;e=n.next()){e=e.value,r=m(Object.keys(t));for(var u=r.next();!u.done;u=r.next())if(u=u.value,e.codecs.includes(u)){e.codecs=e.codecs.replace(u,t[u]);break}}}function HE(e,t){var n=Rr(),r=sn("Firefox")&&Gu(),u=e.video,c=u&&u.width||0,f=u&&u.height||0;if(n&&u&&(1920<c||1080<f)&&(u.codecs.includes("avc1.")||u.codecs.includes("avc3.")))return!1;if(u){if(n=bs(u.codecs),u.codecs.includes(",")){if(c=u.codecs.split(","),n=Ll("video",c),n=bs(n),c=Ll("audio",c),c=nl(c,u.mimeType),f=Wa(u.mimeType,c,"audio"),!Ft(f))return!1;n=[n,c].join()}if(c=Wa(u.mimeType,n,"video"),!Ft(c))return!1;u.codecs=n}if(u=e.audio,r&&u&&u.encrypted&&u.codecs.toLowerCase().includes("opus"))return!1;if(u){if(r=nl(u.codecs,u.mimeType),n=Wa(u.mimeType,r,"audio"),!Ft(n))return!1;u.codecs=r}return e.decodingInfos.some(function(h){return!(!h.supported||t&&(h=h.keySystemAccess)&&h.keySystem!=t)})}function Nm(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=JSON.stringify(u),u=e[u],u instanceof Object?(u=Nm(u),n.push(r+":"+u)):(u=JSON.stringify(u),n.push(r+":"+u))}return"{"+n.join(",")+"}"}function Kh(e,t){var n,r,u,c,f,h,v;return Ne(function(A){if(A.g==1){for(n=function(N,B){if(N){var z=_s(N);return z.supported=N.supported&&B.supported,z.powerEfficient=N.powerEfficient&&B.powerEfficient,z.smooth=N.smooth&&B.smooth,B.keySystemAccess&&!z.keySystemAccess&&(z.keySystemAccess=B.keySystemAccess),z}return B},r=null,u=[],c=m(t),f=c.next(),h={};!f.done;h={cache:void 0,zd:void 0},f=c.next())v=f.value,h.zd=Nm(v),h.cache=$h,h.cache[h.zd]?r=n(r,h.cache[h.zd]):u.push(VE(v).then(function(N){return function(B){var z=null;B=m(B||[]);for(var J=B.next();!J.done;J=B.next())z=n(z,J.value);z&&(N.cache[N.zd]=z,r=n(r,z))}}(h)));return R(A,Promise.all(u),2)}r&&e.decodingInfos.push(r),X(A)})}function VE(e){var t=[""];e.video&&(t=Oo(e.video.contentType).split(","));var n=[""];e.audio&&(n=Oo(e.audio.contentType).split(","));var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var c=m(n),f=c.next(),h={};!f.done;h={Ac:void 0},f=c.next())f=f.value,h.Ac=Ia(e),e.video&&(h.Ac.video.contentType=Di(Ra(h.Ac.video.contentType),u)),e.audio&&(h.Ac.audio.contentType=Di(Ra(h.Ac.audio.contentType),f)),r.push(new Promise(function(v){return function(A,N){navigator.mediaCapabilities.decodingInfo(v.Ac).then(function(B){A(B)}).catch(N)}}(h)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function Mm(e,t,n,r){var u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e;return Ne(function(nt){switch(nt.g){case 1:if(e.some(function(ct){return ct.decodingInfos.length}))return nt.return();u=m(r),c=u.next(),f={};case 2:if(c.done){nt.u(4);break}f.Ng=c.value,h=!1,v=m(e),A=v.next();case 5:if(A.done){nt.u(7);break}N=A.value,B=zh(N,t,n).filter(function(ct){return function(gt){return gt=gt[0],(gt.keySystemConfiguration&&gt.keySystemConfiguration.keySystem)===ct.Ng}}(f)),z=m(B),J=z.next();case 8:if(J.done){nt.u(10);break}return fe=J.value,R(nt,Kh(N,fe),9);case 9:J=z.next(),nt.u(8);break;case 10:N.decodingInfos.length&&(h=!0),A=v.next(),nt.u(5);break;case 7:if(h)return nt.return();f={Ng:void 0},c=u.next(),nt.u(2);break;case 4:pe=m(e),Ee=pe.next();case 12:if(Ee.done){nt.u(0);break}Oe=Ee.value,ke=zh(Oe,t,n).filter(function(ct){return ct=ct[0],ct=ct.keySystemConfiguration&&ct.keySystemConfiguration.keySystem,!ct||!r.includes(ct)}),rt=m(ke),Fe=rt.next();case 15:if(Fe.done){Ee=pe.next(),nt.u(12);break}return $e=Fe.value,R(nt,Kh(Oe,$e),16);case 16:Fe=rt.next(),nt.u(15)}})}function zh(e,t,n){var r=e.audio,u=e.video,c=[],f=[];if(u)for(var h=m(u.fullMimeTypes),v=h.next();!v.done;v=h.next()){v=v.value;var A=Oo(v);if(A.includes(",")&&!r){var N=A.split(","),B=Ra(v);A=Ll("video",N),N=Ll("audio",N),N=nl(N,B),B=Wa(B,N,"audio"),f.push({contentType:B,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(A=bs(A),v={contentType:Wa(Ra(v),A,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||1},u.hdr)switch(u.hdr){case"SDR":v.transferFunction="srgb";break;case"PQ":v.transferFunction="pq";break;case"HLG":v.transferFunction="hlg"}u.colorGamut&&(v.colorGamut=u.colorGamut),c.push(v)}if(r)for(h=m(r.fullMimeTypes),v=h.next();!v.done;v=h.next())A=v.value,v=Ra(A),A=nl(Oo(A),v),v=Wa(v,A,"audio"),f.push({contentType:v,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(h=[],c.length==0&&c.push(null),f.length==0&&f.push(null),c=m(c),v=c.next();!v.done;v=c.next())for(v=v.value,A=m(f),B=A.next();!B.done;B=A.next())B=B.value,N={type:n?"file":"media-source"},v&&(N.video=v),B&&(N.audio=B),h.push(N);if(f=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!f.length)return[h];for(e=[],n=new Map,f=m(f),c=f.next();!c.done;c=f.next())c=c.value,n.get(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c);for(f=t?"required":"optional",t=t?["persistent-license"]:["temporary"],c=m(n.keys()),v=c.next();!v.done;v=c.next()){for(v=v.value,A=[],B=m(h),N=B.next();!N.done;N=B.next()){N=Object.assign({},N.value);var z=n.get(v),J={keySystem:v,initDataType:"cenc",persistentState:f,distinctiveIdentifier:"optional",sessionTypes:t};z=m(z);for(var fe=z.next();!fe.done;fe=z.next()){if(fe=fe.value,fe.initData&&fe.initData.length){for(var pe=new Set,Ee=m(fe.initData),Oe=Ee.next();!Oe.done;Oe=Ee.next())pe.add(Oe.value.initDataType);J.initDataType=fe.initData[0].initDataType}fe.distinctiveIdentifierRequired&&(J.distinctiveIdentifier="required"),fe.persistentStateRequired&&(J.persistentState="required"),fe.sessionType&&(J.sessionTypes=[fe.sessionType]),r&&(J.audio?(fe.encryptionScheme&&(J.audio.encryptionScheme=J.audio.encryptionScheme||fe.encryptionScheme),J.audio.robustness=J.audio.robustness||fe.audioRobustness):(J.audio={robustness:fe.audioRobustness},fe.encryptionScheme&&(J.audio.encryptionScheme=fe.encryptionScheme)),J.audio.robustness==""&&delete J.audio.robustness),u&&(J.video?(fe.encryptionScheme&&(J.video.encryptionScheme=J.video.encryptionScheme||fe.encryptionScheme),J.video.robustness=J.video.robustness||fe.videoRobustness):(J.video={robustness:fe.videoRobustness},fe.encryptionScheme&&(J.video.encryptionScheme=fe.encryptionScheme)),J.video.robustness==""&&delete J.video.robustness)}N.keySystemConfiguration=J,A.push(N)}e.push(A)}return e}function nl(e,t){return e.toLowerCase()=="flac"?qs()?"fLaC":"flac":e.toLowerCase()==="opus"?qs()&&kl(t)=="mp4"?"Opus":"opus":e}function bs(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function Dm(e){e.textStreams=e.textStreams.filter(function(t){return t=Di(t.mimeType,t.codecs),Ic(t)})}function Pm(e){var t,n,r,u,c,f,h;return Ne(function(v){switch(v.g){case 1:t=[],n=m(e.imageStreams),r=n.next();case 2:if(r.done){v.u(4);break}if(u=r.value,c=u.mimeType,c=="application/mp4"&&u.codecs=="mjpg"&&(c="image/jpg"),Yf.has(c)){v.u(5);break}if(f=zE.get(c),!f){Yf.set(c,!1),v.u(5);break}return R(v,Om(f),7);case 7:h=v.h,Yf.set(c,h);case 5:Yf.get(c)&&t.push(u),r=n.next(),v.u(2);break;case 4:e.imageStreams=t,X(v)}})}function Om(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Fl(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,u=n?n.mimeType:null,c=t?t.codecs:null,f=n?n.codecs:null,h=[];f&&h.push(f),c&&h.push(c);var v=[];n&&v.push(n.mimeType),t&&v.push(t.mimeType),v=v[0]||null;var A=[];t&&A.push(t.kind),n&&A.push(n.kind),A=A[0]||null;var N=new Set;if(t)for(var B=m(t.roles),z=B.next();!z.done;z=B.next())N.add(z.value);if(n)for(B=m(n.roles),z=B.next();!z.done;z=B.next())N.add(z.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:A,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:v,audioMimeType:r,videoMimeType:u,codecs:h.join(", "),audioCodec:c,videoCodec:f,primary:e.primary,roles:Array.from(N),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,f.includes(",")&&(e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage)),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function qf(e){return{id:e.id,active:!1,type:_r,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Gf(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=tu(e.segmentIndex));var u=e.tilesLayout;return r&&(u=r.tilesLayout||u),u&&t!=null&&(t/=Number(u.split("x")[0])),u&&n!=null&&(n/=Number(u.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:u||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Hf(e){return e.__shaka_id||(e.__shaka_id=KE++),e.__shaka_id}function Lm(e){var t=Yh(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Vf(e){var t=Yh(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Yh(e){var t=e.language;return{id:Hf(e),active:!1,type:"",bandwidth:0,language:Or(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Ul(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Kf(e){return e.filter(function(t){return Ul(t)})}function Bl(e,t,n,r){var u=e,c=e.filter(function(v){return v.primary});c.length&&(u=c);var f=u.length?u[0].language:"";if(u=u.filter(function(v){return v.language==f}),t){var h=Rc(Or(t),e.map(function(v){return v.language}));h&&(u=e.filter(function(v){return Or(v.language)==h}))}if(u=u.filter(function(v){return v.forced==r}),n){if(e=km(u,n),e.length)return e}else if(e=u.filter(function(v){return v.roles.length==0}),e.length)return e;return e=u.map(function(v){return v.roles}).reduce(ZE,[]),e.length?km(u,e[0]):u}function km(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Wh(e,t){t.length&&(t=t.filter(function(n){return _o(e.codecs)==_o(n.codecs)}).sort(function(n,r){return n.bandwidth&&r.bandwidth&&n.bandwidth!=r.bandwidth?n.bandwidth-r.bandwidth:(n.width||0)-(r.width||0)}),e.trickModeVideo=t[0],1<t.length&&(t=t.find(function(n){return e.width==n.width&&e.height==n.height})))&&(e.trickModeVideo=t)}function zf(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}ne("shaka.util.StreamUtils",Hh),Hh.meetsRestrictions=Nc;var $h={},KE=0,Yf=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),zE=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function ii(){var e=this;this.A=null,this.j=!1,this.i=new K,this.F=new Et,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.j&&e.g.useNetworkInformation){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.s=[],this.B=1,this.G=!1,this.h=this.o=this.g=this.l=null,this.C=new on(function(){if(e.j&&e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=null}p=ii.prototype,p.stop=function(){this.A=null,this.j=!1,this.s=[],this.B=1,this.o=this.l=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.m=null},p.release=function(){this.F.release(),this.C=null},p.init=function(e){this.A=e},p.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:g.devicePixelRatio;e=g.screen.height*n,t=g.screen.width*n}this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:g.devicePixelRatio,e=Math.min(e,this.o.clientHeight*n),t=Math.min(t,this.o.clientWidth*n)),n=this.s.filter(function(A){return A&&!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)}),n.length||(n=this.s);var r=n;if(n.length!=this.s.length&&(r=this.s.filter(function(A){return A&&!!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)})),n=Wf(this,this.g.restrictions,r,1/0,1/0),e!=1/0||t!=1/0){n=YE(n),n=m(n);for(var u=n.next();!u.done;u=n.next())if(u=u.value,u.height>=e&&u.width>=t){e=u.height,t=u.width;break}n=Wf(this,this.g.restrictions,r,e,t)}for(e=this.getBandwidthEstimate(),r.length&&!n.length&&(n=Wf(this,null,r,1/0,1/0),n=[n[0]]),t=n[0]||null,r=0;r<n.length;r++){u=n[r];for(var c=isNaN(this.B)?1:Math.abs(this.B),f=c*u.bandwidth/this.g.bandwidthDowngradeTarget,h={bandwidth:1/0},v=r+1;v<n.length;v++)if(u.bandwidth!=n[v].bandwidth){h=n[v];break}c=c*h.bandwidth/this.g.bandwidthUpgradeTarget,e>=f&&e<=c&&(t.bandwidth!=u.bandwidth||t.bandwidth==u.bandwidth&&t.video&&u.video&&(t.video.width<u.video.width||t.video.height<u.video.height))&&(t=u)}return this.l=Date.now(),t},p.enable=function(){this.j=!0},p.disable=function(){this.j=!1},p.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.i.sample(e,t),n&&this.l!=null&&this.j&&Fm(this))},p.trySuggestStreams=function(){this.l!=null&&this.j&&Fm(this)},p.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.i.getBandwidthEstimate(e),this.m?this.m.getBandwidthEstimate(e):e)},p.setVariants=function(e){this.s=e},p.playbackRateChanged=function(e){this.B=e},p.setMediaElement=function(e){var t=this;this.o=e,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in g&&(this.h=new ResizeObserver(function(){t.C.Z(Um)}),this.h.observe(this.o))},p.setCmsdManager=function(e){this.m=e},p.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function Fm(e){if(!e.G){var t=e.i;if(!(t.g>=t.i))return;e.G=!0,e.l-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.l<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function Wf(e,t,n,r,u){if(e.m){var c=e.m.wg();c&&(n=n.filter(function(f){return f.bandwidth&&c?f.bandwidth<=c:!0}))}return t&&(n=n.filter(function(f){return Nc(f,t,{width:u,height:r})})),n.sort(function(f,h){return f.bandwidth-h.bandwidth})}function YE(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,u){return r.width-u.width})}ne("shaka.abr.SimpleAbrManager",ii),ii.prototype.configure=ii.prototype.configure,ii.prototype.setCmsdManager=ii.prototype.setCmsdManager,ii.prototype.setMediaElement=ii.prototype.setMediaElement,ii.prototype.playbackRateChanged=ii.prototype.playbackRateChanged,ii.prototype.setVariants=ii.prototype.setVariants,ii.prototype.getBandwidthEstimate=ii.prototype.getBandwidthEstimate,ii.prototype.trySuggestStreams=ii.prototype.trySuggestStreams,ii.prototype.segmentDownloaded=ii.prototype.segmentDownloaded,ii.prototype.disable=ii.prototype.disable,ii.prototype.enable=ii.prototype.enable,ii.prototype.chooseVariant=ii.prototype.chooseVariant,ii.prototype.init=ii.prototype.init,ii.prototype.release=ii.prototype.release,ii.prototype.stop=ii.prototype.stop;var Um=1;ne("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),ne("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function $f(e,t,n,r){for(n=n===void 0?!0:n,r=r===void 0?!1:r,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}$f.prototype.add=function(e,t,n){return Bm(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function Bm(e,t,n,r){var u;if(!(u=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(u=e.audio&&t.audio)){u=e.audio;var c=t.audio;u=!!((!u.channelsCount||!c.channelsCount||2<u.channelsCount||2<c.channelsCount)&&u.channelsCount!=c.channelsCount||u.spatialAudio!==c.spatialAudio||n&&!jm(u,c)||!Zm(u.roles,c.roles)||r&&u.groupId!==c.groupId)}return!(r=u)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||jm(e,t))&&Zm(e.roles,t.roles))),!r}$f.prototype.values=function(){return this.g.values()};function jm(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return Ys(r)}),t=t.codecs.split(",").map(function(r){return Ys(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Zm(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function qm(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new jl(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}qm.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Gn(),r=e.filter(function(u){return Bm(t.i,u,!n,t.g)});return r.length?new $f(r[0],r,!n,this.g):this.j.create(e)};function jl(e,t,n,r,u,c,f,h,v,A,N){this.A=e,this.B=t,this.i=n,this.j=r,this.C=u,this.m=c,this.h=f===void 0?"":f,this.l=h===void 0?"":h,this.o=v===void 0?"reload":v,this.s=A===void 0?!1:A,this.g=N===void 0?"":N}jl.prototype.create=function(e){var t=[];t=WE(e,this.A);var n=e.filter(function(r){return r.primary});return t=t.length?t:n.length?n:e,e=$E(t,this.B),e.length&&(t=e),this.m&&(e=e1(t,this.m),e.length&&(t=e)),this.j&&(e=JE(t,this.j),e.length&&(t=e)),this.i&&(e=QE(t,this.i),e.length&&(t=e)),this.h&&(e=XE(t,this.h),e.length&&(t=e)),this.l&&(e=Xh(t,this.l),e.length&&(t=e)),e=t1(t,this.C),e.length&&(t=e),this.g&&(e=n1(t,this.g),e.length&&(t=e)),new $f(t[0],t,!(this.o=="smooth"&&Gn()),this.s)};function WE(e,t){t=Or(t);var n=Rc(t,e.map(function(r){return jf(r)}));return n?e.filter(function(r){return n==jf(r)}):[]}function $E(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function XE(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function Xh(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function QE(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function JE(e,t){return t=="AUTO"&&(t=g.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function e1(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function t1(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function n1(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function Gm(){this.g=Mc,this.i=new Map().set(Mc,2).set(rl,1),this.h=0}function Hm(e,t,n){e.i.set(Mc,n).set(rl,t)}var rl=0,Mc=1;function Qh(e,t){var n=ua();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function Vm(e){var t,n;return Ne(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new Ye(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),R(r,new Promise(function(u){new on(u).Z(n/1e3)}),2))}e.h*=e.m,X(r)})}function ua(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Lr(){var e,t,n=new Promise(function(r,u){e=r,t=u});return n.resolve=e,n.reject=t,n}Lr.prototype.resolve=function(){},Lr.prototype.reject=function(){};function pi(e,t){this.promise=e,this.i=t,this.g=!1}function $s(e){return new pi(Promise.reject(e),function(){return Promise.resolve()})}function Jh(){var e=Promise.reject(new Ye(2,7,7001));return e.catch(function(){}),new pi(e,function(){return Promise.resolve()})}function Xs(e){return new pi(Promise.resolve(e),function(){return Promise.resolve()})}function Km(e){return new pi(e,function(){return e.catch(function(){})})}pi.prototype.abort=function(){return this.g=!0,this.i()};function zm(e){return new pi(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}pi.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},pi.prototype.Aa=function(e,t){function n(h){return function(v){if(u.g&&h)c.reject(f);else{var A=h?e:t;A?r=Ym(A,v,c):(h?c.resolve:c.reject)(v)}}}function r(){return c.reject(f),u.abort()}var u=this,c=new Lr,f=new Ye(2,7,7001);return this.promise.then(n(!0),n(!1)),new pi(c,function(){return r()})};function Ym(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(u){return n.reject(u),function(){return Promise.resolve()}}}E.Object.defineProperties(pi.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),ne("shaka.util.AbortableOperation",pi),pi.prototype.chain=pi.prototype.Aa,pi.prototype.finally=pi.prototype.finally,pi.all=zm,pi.prototype.abort=pi.prototype.abort,pi.notAbortable=Km,pi.completed=Xs,pi.aborted=Jh,pi.failed=$s;function jn(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=g.performance&&g.performance.now?g.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function ep(e){var t=new jn(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}jn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},jn.prototype.stopImmediatePropagation=function(){this.g=!0},jn.prototype.stopPropagation=function(){},ne("shaka.util.FakeEvent",jn);var Xf={gj:"abrstatuschanged",hj:"adaptation",ij:"audiotrackchanged",jj:"buffering",kj:"complete",lj:"downloadfailed",mj:"downloadheadersreceived",nj:"drmsessionupdate",pj:"emsg",Jj:"prft",Error:"error",qj:"expirationupdated",rj:"firstquartile",sj:"gapjumped",vj:"keystatuschanged",zj:"loaded",Aj:"loading",Cj:"manifestparsed",Dj:"manifestupdated",Ej:"mediaqualitychanged",Fj:"mediasourcerecovered",Metadata:"metadata",Gj:"midpoint",Hj:"nospatialvideoinfo",Ij:"onstatechange",Kj:"ratechange",Mj:"segmentappended",Nj:"sessiondata",Oj:"spatialvideoinfo",Pj:"stalldetected",Qj:"started",Rj:"statechanged",Sj:"streaming",Tj:"textchanged",Uj:"texttrackvisibility",Vj:"thirdquartile",Wj:"timelineregionadded",Xj:"timelineregionenter",Yj:"timelineregionexit",Zj:"trackschanged",ak:"unloading",ck:"variantchanged"};function Nr(){this.sa=new yt,this.oe=this}Nr.prototype.addEventListener=function(e,t){this.sa&&this.sa.push(e,t)},Nr.prototype.removeEventListener=function(e,t){this.sa&&this.sa.remove(e,t)},Nr.prototype.dispatchEvent=function(e){if(!this.sa)return!0;var t=this.sa.get(e.type)||[],n=this.sa.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.oe,e.currentTarget=this.oe;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},Nr.prototype.release=function(){this.sa=null};function il(){this.g=[]}function ol(e,t){e.g.push(t.finally(function(){Kn(e.g,t)}))}il.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Kr(e,t,n,r,u,c){Nr.call(this),this.i=!1,this.o=new il,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.B=n||null,this.C=r||null,this.G=u||null,this.F=c||null,this.s=this.A=!1,this.m=16e3}Y(Kr,Nr),p=Kr.prototype,p.Pf=function(e){this.A=e},p.Qf=function(e){this.s=e};function Qs(e,t,n,r){n=n||rp;var u=Pc[e];(!u||n>=u.priority)&&(Pc[e]={priority:n,fe:t,Bi:r===void 0?!1:r})}function tp(e,t){for(var n=m(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(e=m(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}p.Ei=function(e){this.g.add(e)},p.$i=function(e){this.g.delete(e)},p.jg=function(){this.g.clear()},p.Fi=function(e){this.h.add(e)},p.aj=function(e){this.h.delete(e)},p.kg=function(){this.h.clear()};function Bi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}p.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Nr.prototype.release.call(this),this.o.destroy()},p.request=function(e,t,n){var r=this,u=new np;if(this.i){var c=Promise.reject(new Ye(2,7,7001));return c.catch(function(){}),new Dc(c,function(){return Promise.resolve()},u)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ia(t.retryParameters):ua(),t.uris=Ia(t.uris),c=Wm(this,e,t,n);var f=c.Aa(function(){return $m(r,e,t,n,new Qh(t.retryParameters,!1),0,null,u)}),h=f.Aa(function(z){return Xm(r,e,z,n)}),v=Date.now(),A=0;c.promise.then(function(){A=Date.now()-v},function(){});var N=0;f.promise.then(function(){N=Date.now()},function(){});var B=h.Aa(function(z){var J=Date.now()-N,fe=z.response;return fe.timeMs+=A,fe.timeMs+=J,z.gi||!r.l||fe.fromCache||t.method=="HEAD"||e!=$a||r.l(fe.timeMs,fe.data.byteLength,Qm(n)),r.F&&r.F(e,fe,n),fe},function(z){throw z&&(z.severity=2),z});return c=new Dc(B.promise,function(){return B.abort()},u),ol(this.o,c),c};function Wm(e,t,n,r){function u(h){c=c.Aa(function(){return n.body&&(n.body=Ni(n.body)),h(t,n,r)})}var c=Xs(void 0);e.C&&u(e.C),e=m(e.g);for(var f=e.next();!f.done;f=e.next())u(f.value);return c.Aa(void 0,function(h){throw h instanceof Ye&&h.code==7001?h:new Ye(2,1,1006,h)})}function $m(e,t,n,r,u,c,f,h){e.A&&(n.uris[c]=n.uris[c].replace("https://","http://")),e.s&&(n.uris[c]=n.uris[c].replace("http://","https://")),0<c&&e.G&&e.G(t,r,n.uris[c],n.uris[c-1]);var v=new Ei(n.uris[c]),A=v.Bb,N=!1;A||(A=location.protocol,A=A.slice(0,-1),Df(v,A),n.uris[c]=v.toString()),A=A.toLowerCase();var B=(A=Pc[A])?A.fe:null;if(!B)return $s(new Ye(2,1,1e3,v));var z=A.Bi,J=null,fe=null,pe=!1,Ee=!1,Oe;return Km(Vm(u)).Aa(function(){if(e.i)return Jh();Oe=Date.now();var ke=0;n.requestStartTime=Date.now();var rt=B(n.uris[c],n,t,function(nt,ct,gt){J&&J.stop(),fe&&fe.Z($e/1e3),e.l&&t==$a&&(ke++,n.packetNumber=ke,e.l(nt,ct,Qm(r),n),N=!0,h.g=gt)},function(nt){e.j&&e.j(nt,n,t),Ee=!0,n.timeToFirstByte=Date.now()-n.requestStartTime},{minBytesForProgressEvents:e.m});if(!z)return rt;var Fe=n.retryParameters.connectionTimeout;Fe&&(J=new on(function(){pe=!0,rt.abort()}),J.Z(Fe/1e3));var $e=n.retryParameters.stallTimeout;return $e&&(fe=new on(function(){pe=!0,rt.abort()})),rt}).Aa(function(ke){J&&J.stop(),fe&&fe.stop(),ke.timeMs==null&&(ke.timeMs=Date.now()-Oe);var rt={response:ke,gi:N};return!Ee&&e.j&&e.j(ke.headers,n,t),rt},function(ke){if(J&&J.stop(),fe&&fe.stop(),e.B){var rt=null,Fe=0;ke instanceof Ye&&(rt=ke,ke.code==1001&&(Fe=ke.data[1])),e.B(n,rt,Fe,pe)}if(e.i)return Jh();if(pe&&(ke=new Ye(1,1,1003,n.uris[c],t)),ke instanceof Ye){if(ke.code==7001)throw ke;if(ke.code==1010)throw f;if(ke.severity==1)return rt=new Map().set("error",ke),rt=new jn("retry",rt),e.dispatchEvent(rt),c=(c+1)%n.uris.length,$m(e,t,n,r,u,c,ke,h)}throw ke})}function Xm(e,t,n,r){var u=Xs(void 0);e=m(e.h);for(var c=e.next(),f={};!c.done;f={Sg:void 0},c=e.next())f.Sg=c.value,u=u.Aa(function(h){return function(){var v=n.response;return v.data&&(v.data=Ni(v.data)),(0,h.Sg)(t,v,r)}}(f));return u.Aa(function(){return n},function(h){var v=2;if(h instanceof Ye){if(h.code==7001)throw h;v=h.severity}throw new Ye(v,1,1007,h)})}function Qm(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.s)return!1}return!0}ne("shaka.net.NetworkingEngine",Kr),Kr.prototype.request=Kr.prototype.request,Kr.prototype.destroy=Kr.prototype.destroy,Kr.makeRequest=Bi,Kr.defaultRetryParameters=function(){return ua()},Kr.prototype.clearAllResponseFilters=Kr.prototype.kg,Kr.prototype.unregisterResponseFilter=Kr.prototype.aj,Kr.prototype.registerResponseFilter=Kr.prototype.Fi,Kr.prototype.clearAllRequestFilters=Kr.prototype.jg,Kr.prototype.unregisterRequestFilter=Kr.prototype.$i,Kr.prototype.registerRequestFilter=Kr.prototype.Ei,Kr.unregisterScheme=function(e){delete Pc[e]},Kr.registerScheme=Qs,Kr.prototype.setForceHTTPS=Kr.prototype.Qf,Kr.prototype.setForceHTTP=Kr.prototype.Pf;function np(){this.g=0}Kr.NumBytesRemainingClass=np;function Dc(e,t,n){pi.call(this,e,t),this.h=n}Y(Dc,pi),Kr.PendingRequest=Dc;var $a=1;Kr.RequestType={MANIFEST:0,SEGMENT:$a,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Kr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var rp=3;Kr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:rp};var Pc={};function Zl(e){this.g=!1,this.h=new Lr,this.i=e}Zl.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Zr(e,t){if(e.g)throw t instanceof Ye&&t.code==7003?t:new Ye(2,7,7003,t)}function ip(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function op(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Cu(e){for(var t=new Map,n=m(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function ap(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function F(e,t){this.h=ln(e),this.i=t==j,this.g=0}p=F.prototype,p.ra=function(){return this.g<this.h.byteLength},p.xa=function(){return this.g},p.getLength=function(){return this.h.byteLength},p.S=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw O()}},p.la=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw O()}},p.P=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw O()}},p.Pg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw O()}},p.Pc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw O()}if(2097151<t)throw new Ye(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},p.rb=function(e){if(this.g+e>this.h.byteLength)throw O();var t=nr(this.h,this.g,e);return this.g+=e,t},p.skip=function(e){if(this.g+e>this.h.byteLength)throw O();this.g+=e},p.Mi=function(e){if(this.g<e)throw O();this.g-=e},p.seek=function(e){if(0>e||e>this.h.byteLength)throw O();this.g=e},p.sc=function(){for(var e=this.g;this.ra()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=nr(this.h,e,this.g-e),this.g+=1,Cr(e)};function O(){return new Ye(2,3,3e3)}ne("shaka.util.DataViewReader",F),F.prototype.readTerminatedString=F.prototype.sc,F.prototype.seek=F.prototype.seek,F.prototype.rewind=F.prototype.Mi,F.prototype.skip=F.prototype.skip,F.prototype.readBytes=F.prototype.rb,F.prototype.readUint64=F.prototype.Pc,F.prototype.readInt32=F.prototype.Pg,F.prototype.readUint32=F.prototype.P,F.prototype.readUint16=F.prototype.la,F.prototype.readUint8=F.prototype.S,F.prototype.getLength=F.prototype.getLength,F.prototype.getPosition=F.prototype.xa,F.prototype.hasMoreData=F.prototype.ra;var j=1;F.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:j};function V(){this.i=[],this.h=[],this.g=!1}p=V.prototype,p.box=function(e,t){return e=we(e),this.i[e]=_e,this.h[e]=t,this},p.R=function(e,t){return e=we(e),this.i[e]=ve,this.h[e]=t,this},p.stop=function(){this.g=!0},p.parse=function(e,t,n){for(e=new F(e,0),this.g=!1;e.ra()&&!this.g;)this.Mc(0,e,t,n)},p.Mc=function(e,t,n,r){var u=t.xa();if(r&&u+8>t.getLength())this.g=!0;else{var c=t.P(),f=t.P(),h=Te(f),v=!1;switch(c){case 0:c=t.getLength()-u;break;case 1:if(r&&t.xa()+8>t.getLength()){this.g=!0;return}c=t.Pc(),v=!0}var A=this.h[f];if(A){var N=null,B=null;if(this.i[f]==ve){if(r&&t.xa()+4>t.getLength()){this.g=!0;return}B=t.P(),N=B>>>24,B&=16777215}f=u+c,n&&f>t.getLength()&&(f=t.getLength()),r&&f>t.getLength()?this.g=!0:(r=f-t.xa(),t=0<r?t.rb(r):new Uint8Array(0),t=new F(t,0),A({name:h,parser:this,partialOkay:n||!1,version:N,flags:B,reader:t,size:c,start:u+e,has64BitSize:v}))}else t.skip(Math.min(u+c-t.xa(),t.getLength()-t.xa()))}};function W(e){for(var t=ie(e);e.reader.ra()&&!e.parser.g;)e.parser.Mc(e.start+t,e.reader,e.partialOkay)}function ee(e){for(var t=ie(e),n=e.reader.P(),r=0;r<n&&(e.parser.Mc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function H(e){var t=ie(e);for(e.reader.skip(78);e.reader.ra()&&!e.parser.g;)e.parser.Mc(e.start+t,e.reader,e.partialOkay)}function re(e){var t=ie(e);e.reader.skip(8);var n=e.reader.la();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ra()&&!e.parser.g;)e.parser.Mc(e.start+t,e.reader,e.partialOkay)}function he(e){return function(t){e(t.reader.rb(t.reader.getLength()-t.reader.xa()))}}function we(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Te(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function ie(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}ne("shaka.util.Mp4Parser",V),V.headerSize=ie,V.typeToString=Te,V.allData=he,V.audioSampleEntry=re,V.visualSampleEntry=H,V.sampleDescription=ee,V.children=W,V.prototype.parseNext=V.prototype.Mc,V.prototype.parse=V.prototype.parse,V.prototype.stop=V.prototype.stop,V.prototype.fullBox=V.prototype.R,V.prototype.box=V.prototype.box;var _e=0,ve=1;function Ve(e){var t=this;this.g=[],this.h=[],this.data=[],new V().box("moov",W).box("moof",W).R("pssh",function(n){if(!(1<n.version)){var r=nr(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(Ya(n.reader.rb(16))),0<n.version){r=n.reader.P();for(var u=0;u<r;u++){var c=Ya(n.reader.rb(16));t.h.push(c)}}}}).parse(e)}function Pe(e,t,n,r){var u=e.length,c=t.length+16+u;0<r&&(c+=4+16*n.size);var f=new Uint8Array(c),h=ln(f),v=0;if(h.setUint32(v,c),v+=4,h.setUint32(v,1886614376),v+=4,1>r?h.setUint32(v,0):h.setUint32(v,16777216),v+=4,f.set(t,v),v+=t.length,0<r)for(h.setUint32(v,n.size),v+=4,t=m(n),n=t.next();!n.done;n=t.next())n=Xu(n.value),f.set(n,v),v+=n.length;return h.setUint32(v,u),f.set(e,v+4),f}function je(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.ga=this.ea=!1,this.I=0,this.g=null,this.B=new Et,this.i=new Map,this.A=new Map,this.l=new Lr,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.aa=new Map,this.fa=new Map,this.L=new on(function(){return Gt(t)}),this.O=!1,this.N=[],this.X=!1,this.K=new on(function(){_t(t)}),this.l.catch(function(){}),this.j=new Zl(function(){return Ke(t)}),this.ba=!1,this.F=this.G=null,this.T=function(){return!1}}p=je.prototype,p.destroy=function(){return this.j.destroy()};function Ke(e){return Ne(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,R(t,xn(e),2);case 2:if(!e.m){t.u(3);break}return ce(t,4),R(t,e.m.setMediaKeys(null),6);case 6:ye(t,5);break;case 4:be(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,X(t)}})}p.configure=function(e,t){this.h=e,t&&(this.T=t),this.K&&this.K.Ra(this.h.updateExpirationTime)};function Se(e,t,n){return e.ga=!0,e.A=new Map,e.O=n,Ze(e,t)}function Le(e,t,n){e.A=new Map,n=m(n);for(var r=n.next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.O=0<e.A.size,Ze(e,t)}function Ae(e,t,n,r,u,c){var f=new Map;return u={audioCapabilities:u,videoCapabilities:c,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},u.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],f.set(t,u),Be(e,f,[])}function Ze(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe;return Ne(function($e){if($e.g==1){if(n=Me(e))for(r=m(t),u=r.next();!u.done;u=r.next())c=u.value,c.video&&(c.video.drmInfos=[n]),c.audio&&(c.audio.drmInfos=[n]);for(f=t.some(function(nt){return!!(nt.video&&nt.video.drmInfos.length||nt.audio&&nt.audio.drmInfos.length)}),f||(h=Cu(e.h.servers),un(t,h)),v=new Set,A=m(t),N=A.next();!N.done;N=A.next())for(B=N.value,z=it(B),J=m(z),fe=J.next();!fe.done;fe=J.next())pe=fe.value,v.add(pe);for(Ee=m(v),Oe=Ee.next();!Oe.done;Oe=Ee.next())ke=Oe.value,Qt(ke,Cu(e.h.servers),Cu(e.h.advanced||{}),e.h.keySystemsMapping);return R($e,Mm(t,e.O,e.ba,e.h.preferredKeySystems),2)}return Zr(e.j),rt=f||Object.keys(e.h.servers).length,rt?(Fe=Be(e,void 0,t),$e.return(f?Fe:Fe.catch(function(){}))):(e.ea=!0,$e.return(Promise.resolve()))})}function q(e){var t;return Ne(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return R(n,e.G,3);case 3:return Zr(e.j),n.return();case 2:return ce(n,4),e.G=e.m.setMediaKeys(e.s),R(n,e.G,6);case 6:ye(n,5);break;case 4:t=be(n),e.o(new Ye(2,6,6003,t.message));case 5:Zr(e.j),X(n)}})}function le(e,t){return Ne(function(n){if(n.g==1)return R(n,q(e),2);De(e,t.initDataType,nr(t.initData)),X(n)})}p.Sb=function(e){var t=this;return Ne(function(n){if(n.g==1)return t.s?(t.m=e,t.B.pa(t.m,"play",function(){for(var r=m(t.N),u=r.next();!u.done;u=r.next())pt(t,u.value);t.X=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return xn(t)}),t.F=t.g&&t.g.initData.find(function(r){return 0<r.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?R(n,q(t),2):n.u(2)):(t.B.pa(e,"encrypted",function(){t.o(new Ye(2,6,6010))}),n.return());te(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(r){return le(t,r)}),X(n)})};function ae(e){var t,n,r,u,c;return Ne(function(f){switch(f.g){case 1:if(!e.s||!e.g)return f.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){f.u(2);break}return t=Bi([e.g.serverCertificateUri],e.h.retryParameters),ce(f,3),n=e.C.Mb.request(5,t,{isPreload:e.T()}),R(f,n.promise,5);case 5:r=f.h,e.g.serverCertificate=nr(r.data),ye(f,4);break;case 3:throw u=be(f),new Ye(2,6,6017,u);case 4:if(e.j.g)return f.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?f.return():(ce(f,6),R(f,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:ye(f,0);break;case 6:throw c=be(f),new Ye(2,6,6004,c.message)}})}function ue(e,t){var n,r,u;return Ne(function(c){if(c.g==1)return R(c,lt(e,t,{initData:null,initDataType:null}),2);if(c.g!=3)return n=c.h,n?(r=[],(u=e.i.get(n))&&(u.kb=new Lr,r.push(u.kb)),r.push(n.remove()),R(c,Promise.all(r),3)):c.return();e.i.delete(n),X(c)})}function te(e){var t,n,r,u,c;return Ne(function(f){if(f.g==1)return e.A.size?(e.A.forEach(function(h,v){lt(e,v,h)}),R(f,e.l,3)):f.u(2);if(f.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&Dt(e))return f.return(e.l);e.l=new Lr,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=m(n),u=r.next();!u.done;u=r.next())c=u.value,De(e,c.initDataType,c.initData);return Xt(e)&&e.l.resolve(),f.return(e.l)})}function De(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var r=e.i.values();r=m(r);for(var u=r.next();!u.done;u=r.next())if(no(n,u.value.initData))return}0<e.i.size&&Xt(e)&&(e.l.resolve(),e.l=new Lr,e.l.catch(function(){})),vt(e,t,n,e.g.sessionType)}}function Ce(e){return e=e.i.keys(),e=ip(e,function(t){return t.sessionId}),Array.from(e)}p.ef=function(){var e=this,t=this.i.keys();return t=ip(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},p.ad=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},p.Id=function(){return ap(this.fa)};function Be(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke;return Ne(function(rt){switch(rt.g){case 1:if(r=new Map,n.length){u=xe(e,n,r),rt.u(2);break}return R(rt,me(e,t),3);case 3:u=rt.h;case 2:if(c=u,!c)throw new Ye(2,6,6001);for(Zr(e.j),ce(rt,4),e.H.clear(),f=c.getConfiguration(),h=f.audioCapabilities||[],v=f.videoCapabilities||[],A=m(h),N=A.next();!N.done;N=A.next())B=N.value,e.H.add(B.contentType.toLowerCase());for(z=m(v),J=z.next();!J.done;J=z.next())fe=J.value,e.H.add(fe.contentType.toLowerCase());if(n.length){var Fe=c.keySystem,$e=r.get(c.keySystem),nt=[],ct=[],gt=[],Lt=[],It=[],Ut=new Set,Nt=new Set;an($e,nt,ct,Lt,gt,It,Ut,Nt);var tn=e.O?"persistent-license":"temporary";for(Fe={keySystem:Fe,encryptionScheme:nt[0],licenseServerUri:ct[0],distinctiveIdentifierRequired:$e[0].distinctiveIdentifierRequired,persistentStateRequired:$e[0].persistentStateRequired,sessionType:$e[0].sessionType||tn,audioRobustness:$e[0].audioRobustness||"",videoRobustness:$e[0].videoRobustness||"",serverCertificate:Lt[0],serverCertificateUri:gt[0],initData:It,keyIds:Ut},0<Nt.size&&(Fe.keySystemUris=Nt),$e=m($e),Nt=$e.next();!Nt.done;Nt=$e.next())Nt=Nt.value,Nt.distinctiveIdentifierRequired&&(Fe.distinctiveIdentifierRequired=Nt.distinctiveIdentifierRequired),Nt.persistentStateRequired&&(Fe.persistentStateRequired=Nt.persistentStateRequired);$e=Fe}else $e=c.keySystem,Nt=t.get(c.keySystem),Fe=[],nt=[],ct=[],gt=[],Lt=[],It=new Set,an(Nt.drmInfos,Fe,nt,gt,ct,Lt,It),$e={keySystem:$e,encryptionScheme:Fe[0],licenseServerUri:nt[0],distinctiveIdentifierRequired:Nt.distinctiveIdentifier=="required",persistentStateRequired:Nt.persistentState=="required",sessionType:Nt.sessionTypes[0]||"temporary",audioRobustness:(Nt.audioCapabilities?Nt.audioCapabilities[0].robustness:"")||"",videoRobustness:(Nt.videoCapabilities?Nt.videoCapabilities[0].robustness:"")||"",serverCertificate:gt[0],serverCertificateUri:ct[0],initData:Lt,keyIds:It};if(e.g=$e,!e.g.licenseServerUri)throw new Ye(2,6,6012,e.g.keySystem);return R(rt,c.createMediaKeys(),6);case 6:if(pe=rt.h,Zr(e.j),e.s=pe,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){rt.u(7);break}return ce(rt,8),R(rt,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(Ee=rt.h,Ee!="usable")throw new Ye(2,6,6018);Zr(e.j),ye(rt,7,4);break;case 8:throw Oe=be(rt,4),Oe instanceof Ye?Oe:new Ye(2,6,6019,Oe.message);case 7:return e.ea=!0,R(rt,ae(e),11);case 11:Zr(e.j),ye(rt,0);break;case 4:throw ke=be(rt),Zr(e.j,ke),e.g=null,e.H.clear(),ke instanceof Ye?ke:new Ye(2,6,6002,ke.message)}})}function xe(e,t,n){for(var r=m(t),u=r.next();!u.done;u=r.next()){u=m(it(u.value));for(var c=u.next();!c.done;c=u.next())c=c.value,n.has(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c)}if(n.size==1&&n.has(""))throw new Ye(2,6,6e3);for(e=m(e.h.preferredKeySystems),u=e.next(),r={};!u.done;r={Og:void 0},u=e.next())for(r.Og=u.value,u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value.decodingInfos.find(function(A){return function(N){return N.supported&&N.keySystemAccess!=null&&N.keySystemAccess.keySystem==A.Og}}(r)))return c.keySystemAccess;for(e=m([!0,!1]),r=e.next();!r.done;r=e.next())for(r=r.value,u=m(t),c=u.next();!c.done;c=u.next()){c=m(c.value.decodingInfos);for(var f=c.next();!f.done;f=c.next())if(f=f.value,f.supported&&f.keySystemAccess){var h=n.get(f.keySystemAccess.keySystem);h=m(h);for(var v=h.next();!v.done;v=h.next())if(!!v.value.licenseServerUri==r)return f.keySystemAccess}}return null}function me(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe;return Ne(function(ke){switch(ke.g){case 1:if(t.size==1&&t.has(""))throw new Ye(2,6,6e3);for(r=m(t.values()),u=r.next();!u.done;u=r.next())c=u.value,c.audioCapabilities.length==0&&delete c.audioCapabilities,c.videoCapabilities.length==0&&delete c.videoCapabilities;f=m(e.h.preferredKeySystems),h=f.next();case 2:if(h.done){ke.u(4);break}if(v=h.value,!t.has(v)){ke.u(3);break}return A=t.get(v),ce(ke,6),R(ke,navigator.requestMediaKeySystemAccess(v,[A]),8);case 8:return n=ke.h,ke.return(n);case 6:be(ke);case 7:Zr(e.j);case 3:h=f.next(),ke.u(2);break;case 4:N=m([!0,!1]),B=N.next();case 9:if(B.done){ke.u(11);break}z=B.value,J=m(t.keys()),fe=J.next();case 12:if(fe.done){B=N.next(),ke.u(9);break}if(pe=fe.value,Ee=t.get(pe),Oe=Ee.drmInfos.some(function(rt){return!!rt.licenseServerUri}),Oe!=z){ke.u(13);break}return ce(ke,15),R(ke,navigator.requestMediaKeySystemAccess(pe,[Ee]),17);case 17:return n=ke.h,ke.return(n);case 15:be(ke);case 16:Zr(e.j);case 13:fe=J.next(),ke.u(12);break;case 11:return ke.return(n)}})}function Me(e){return e=Cu(e.h.clearKeys),e.size==0?null:Tm(e)}function ze(e){Xt(e)&&e.l.resolve()}function mt(e,t){new on(function(){t.loaded=!0,ze(e)}).Z(kn)}function lt(e,t,n){var r,u,c,f,h,v,A;return Ne(function(N){switch(N.g){case 1:try{r=e.s.createSession("persistent-license")}catch(B){return u=new Ye(2,6,6005,B.message),e.o(u),N.return(Promise.reject(u))}return e.B.D(r,"message",function(B){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.X?e.N.push(B):pt(e,B)}),e.B.D(r,"keystatuseschange",function(B){return qt(e,B)}),c={initData:n.initData,initDataType:n.initDataType,loaded:!1,Af:1/0,kb:null,type:"persistent-license"},e.i.set(r,c),ce(N,2),R(N,r.load(t),4);case 4:return f=N.h,Zr(e.j),f||(e.i.delete(r),h=e.h.persistentSessionOnlinePlayback?1:2,e.o(new Ye(h,6,6013)),c.loaded=!0),mt(e,c),ze(e),N.return(r);case 2:v=be(N),Zr(e.j,v),e.i.delete(r),A=e.h.persistentSessionOnlinePlayback?1:2,e.o(new Ye(A,6,6005,v.message)),c.loaded=!0,ze(e);case 3:return N.return(Promise.resolve())}})}function vt(e,t,n,r){try{var u=e.s.createSession(r)}catch(c){e.o(new Ye(2,6,6005,c.message));return}e.B.D(u,"message",function(c){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.X?e.N.push(c):pt(e,c)}),e.B.D(u,"keystatuseschange",function(c){return qt(e,c)}),e.i.set(u,{initData:n,initDataType:t,loaded:!1,Af:1/0,kb:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(c){t=c,c instanceof Ye||(t=new Ye(2,6,6016,c)),e.o(t);return}e.h.logLicenseExchange&&ws(n),u.generateRequest(t,n).catch(function(c){if(!e.j.g){e.i.delete(u);var f=c.errorCode;if(f&&f.systemCode){var h=f.systemCode;0>h&&(h+=Math.pow(2,32)),h="0x"+h.toString(16)}e.o(new Ye(2,6,6006,c.message,c,h))}})}function pt(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe;Ne(function(Ee){switch(Ee.g){case 1:if(n=t.target,e.h.logLicenseExchange&&ws(t.message),r=e.i.get(n),u=e.g.licenseServerUri,c=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&c&&c.individualizationServer&&(u=c.individualizationServer),f=Bi([u],e.h.retryParameters),f.body=t.message,f.method="POST",f.licenseRequestType=t.messageType,f.sessionId=n.sessionId,f.drmInfo=e.g,r&&(f.initData=r.initData,f.initDataType=r.initDataType),c&&c.headers)for(h in c.headers)f.headers[h]=c.headers[h];if(Hr(e.g.keySystem)){var Oe=ci(f.body,!0,!0);if(Oe.includes("PlayReadyKeyMessage")){Oe=Su(Oe,"PlayReadyKeyMessage");var ke=Eo(Oe,"HttpHeader");ke=m(ke);for(var rt=ke.next();!rt.done;rt=ke.next()){var Fe=rt.value;rt=Eo(Fe,"name")[0],Fe=Eo(Fe,"value")[0],f.headers[ei(rt)]=ei(Fe)}Oe=Eo(Oe,"Challenge")[0],f.body=Wo(ei(Oe))}else f.headers["Content-Type"]="text/xml; charset=utf-8"}return v=Date.now(),ce(Ee,2),N=e.C.Mb.request(2,f,{isPreload:e.T()}),R(Ee,N.promise,4);case 4:A=Ee.h,ye(Ee,3);break;case 2:return B=be(Ee),e.j.g||(z=new Ye(2,6,6007,B),e.i.size==1?(e.o(z),r&&r.kb&&r.kb.reject(z)):(r&&r.kb&&r.kb.reject(z),e.i.delete(n),Xt(e)&&(e.l.resolve(),e.L.Z(.1)))),Ee.return();case 3:return e.j.g?Ee.return():(e.I+=(Date.now()-v)/1e3,e.h.logLicenseExchange&&ws(A.data),ce(Ee,5),R(Ee,n.update(A.data),7));case 7:ye(Ee,6);break;case 5:return J=be(Ee),fe=new Ye(2,6,6008,J.message),e.o(fe),r&&r.kb&&r.kb.reject(fe),Ee.return();case 6:if(e.j.g)return Ee.return();pe=new jn("drmsessionupdate"),e.C.onEvent(pe),r&&(r.kb&&r.kb.resolve(),mt(e,r)),X(Ee)}})}function qt(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(c,f){if(typeof f=="string"){var h=f;f=c,c=h}if(Hr(e.g.keySystem)&&f.byteLength==16&&(xr()||Ri())){h=ln(f);var v=h.getUint32(0,!0),A=h.getUint16(4,!0),N=h.getUint16(6,!0);h.setUint32(0,v,!1),h.setUint16(4,A,!1),h.setUint16(6,N,!1)}c!="status-pending"&&(n.loaded=!0),c=="expired"&&(r=!0),f=Ya(f).slice(0,32),e.aa.set(f,c)});var u=t.expiration-Date.now();(0>u||r&&1e3>u)&&n&&!n.kb&&(e.i.delete(t),t.close().catch(function(){})),Xt(e)&&(e.l.resolve(),e.L.Z(mr))}function Gt(e){var t=e.aa,n=e.fa;n.clear(),t.forEach(function(r,u){return n.set(u,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.o(new Ye(2,6,6014)),e.C.be(ap(n))}function Bt(){var e,t,n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt,It,Ut;return Ne(function(Nt){if(Nt.g==1){for(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" "),t=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],n=["150","2000","3000"],r={"com.widevine.alpha":t,"com.microsoft.playready.recommendation":n},u=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],c=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],f={videoCapabilities:u,audioCapabilities:c,initDataTypes:["cenc","sinf","skd","keyids"]},h=[null,"cenc","cbcs","cbcs-1-9"],v=new Map,A=function(tn,Ht){var Wt,En,An,Vn,Qn,ar,Ar,Qr;return Ne(function(zr){switch(zr.g){case 1:return ce(zr,2),R(zr,Ht.createMediaKeys(),4);case 4:ye(zr,3);break;case 2:return be(zr),zr.return();case 3:En=(Wt=Ht.getConfiguration().sessionTypes)?Wt.includes("persistent-license"):!1,Ui()&&(En=!1),An=Ht.getConfiguration().videoCapabilities,Vn=Ht.getConfiguration().audioCapabilities,Qn={persistentState:En,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[]},v.has(tn)&&v.get(tn)?Qn=v.get(tn):v.set(tn,Qn),(ar=An[0].encryptionScheme)&&!Qn.encryptionSchemes.includes(ar)&&Qn.encryptionSchemes.push(ar),(Ar=An[0].robustness)&&!Qn.videoRobustnessLevels.includes(Ar)&&Qn.videoRobustnessLevels.push(Ar),(Qr=Vn[0].robustness)&&!Qn.audioRobustnessLevels.includes(Qr)&&Qn.audioRobustnessLevels.push(Qr),X(zr)}})},N=function(tn,Ht,Wt,En){var An,Vn,Qn,ar,Ar,Qr,zr,Si,Pr,Fr;return Ne(function(si){switch(si.g){case 1:for(ce(si,2),An=Ia(f),Vn=m(An.videoCapabilities),Qn=Vn.next();!Qn.done;Qn=Vn.next())ar=Qn.value,ar.encryptionScheme=Ht,ar.robustness=Wt;for(Ar=m(An.audioCapabilities),Qr=Ar.next();!Qr.done;Qr=Ar.next())zr=Qr.value,zr.encryptionScheme=Ht,zr.robustness=En;return Si=Ia(An),Si.persistentState="required",Si.sessionTypes=["persistent-license"],Pr=[Si,An],R(si,navigator.requestMediaKeySystemAccess(tn,Pr),4);case 4:return Fr=si.h,R(si,A(tn,Fr),5);case 5:ye(si,0);break;case 2:be(si),X(si)}})},B=function(tn,Ht,Wt,En){var An,Vn,Qn;return Ne(function(ar){switch(ar.g){case 1:return ce(ar,2),An={type:"media-source",video:{contentType:u[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:c[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:tn,video:{encryptionScheme:Ht,robustness:Wt},audio:{encryptionScheme:Ht,robustness:En}}},R(ar,navigator.mediaCapabilities.decodingInfo(An),4);case 4:return Vn=ar.h,Qn=Vn.keySystemAccess,R(ar,A(tn,Qn),5);case 5:ye(ar,0);break;case 2:be(ar),X(ar)}})},z=m(e),J=z.next();!J.done;J=z.next())fe=J.value,v.set(fe,null);for(pe=[],Ee=m(h),Oe=Ee.next();!Oe.done;Oe=Ee.next())for(ke=Oe.value,rt=m(e),Fe=rt.next();!Fe.done;Fe=rt.next())$e=Fe.value,$e==="org.w3.clearkey"&&qs()||(pe.push(N($e,ke,"","")),pe.push(B($e,ke,"","")));for(nt=m(e),ct=nt.next();!ct.done;ct=nt.next())for(gt=ct.value,Lt=m(r[gt]||[]),It=Lt.next();!It.done;It=Lt.next())Ut=It.value,pe.push(N(gt,null,Ut,"")),pe.push(N(gt,null,"",Ut)),pe.push(B(gt,null,Ut,"")),pe.push(B(gt,null,"",Ut));return R(Nt,Promise.all(pe),2)}return Nt.return(ap(v))})}function jt(e){var t;return Ne(function(n){if(n.g==1)return t=new Promise(function(r,u){new on(u).Z(Bn)}),ce(n,2),R(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return ye(n,0);be(n),X(n)})}function xn(e){var t;return Ne(function(n){return t=Array.from(e.i.entries()),e.i.clear(),R(n,Promise.all(t.map(function(r){r=m(r);var u=r.next().value,c=r.next().value;return Ne(function(f){if(f.g==1)return ce(f,2),e.ga||e.A.has(u.sessionId)||c.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?R(f,jt(u),5):R(f,u.remove(),5);if(f.g!=2)return ye(f,0);be(f),X(f)})})),0)})}function it(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function _t(e){e.i.forEach(function(t,n){var r=t.Af,u=n.expiration;isNaN(u)&&(u=1/0),u!=r&&(e.C.onExpirationUpdated(n.sessionId,u),t.Af=u)})}function Xt(e){return e=e.i.values(),op(e,function(t){return t.loaded})}function Dt(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.aa.get(n.value)!=="usable")return!1;return!0}function un(e,t){var n=[];for(t.forEach(function(r,u){n.push({keySystem:u,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function an(e,t,n,r,u,c,f,h){var v=[];e=m(e);for(var A=e.next(),N={};!A.done;N={ua:void 0},A=e.next()){if(N.ua=A.value,t.includes(N.ua.encryptionScheme)||t.push(N.ua.encryptionScheme),N.ua.keySystem=="org.w3.clearkey"&&N.ua.licenseServerUri.startsWith("data:application/json;base64,")?v.includes(N.ua.licenseServerUri)||v.push(N.ua.licenseServerUri):n.includes(N.ua.licenseServerUri)||n.push(N.ua.licenseServerUri),u.includes(N.ua.serverCertificateUri)||u.push(N.ua.serverCertificateUri),N.ua.serverCertificate&&(r.some(function(J){return function(fe){return no(fe,J.ua.serverCertificate)}}(N))||r.push(N.ua.serverCertificate)),N.ua.initData){A=m(N.ua.initData);for(var B=A.next(),z={};!B.done;z={mf:void 0},B=A.next())z.mf=B.value,c.some(function(J){return function(fe){var pe=J.mf;return fe.keyId&&fe.keyId==pe.keyId?!0:fe.initDataType==pe.initDataType&&no(fe.initData,pe.initData)}}(z))||c.push(z.mf)}if(N.ua.keyIds)for(A=m(N.ua.keyIds),B=A.next();!B.done;B=A.next())f.add(B.value);if(N.ua.keySystemUris&&h)for(N=m(N.ua.keySystemUris),A=N.next();!A.done;A=N.next())h.add(A.value)}if(v.length==1)n.push(v[0]);else if(0<v.length){for(t=[],v=m(v),r=v.next();!r.done;r=v.next())r=g.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,T(r.keys));v=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+g.btoa(v))}}function Qt(e,t,n,r){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(u)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[u]&&(e.keySystem=r[u]),g.cast&&g.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Bn=1,kn=5,mr=.5;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function vr(e,t,n){this.h=e,this.i=t,this.g=n}function bt(e,t){return Ne(function(n){if(n.g==1)return R(n,GE(e.g,t,e.h.drm.preferredKeySystems),2);if(e.h.streaming.dontChooseCodecs||Rm(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes),!t.variants.some(Ul))throw new Ye(2,4,4032);return n.return(Zt(e,t))})}function en(e,t){var n=e.h.restrictions;e=e.i;var r=!1;t=m(t.variants);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=u.allowedByApplication;u.allowedByApplication=Nc(u,n,e),c!=u.allowedByApplication&&(r=!0)}return r}function Zt(e,t){var n=en(e,t);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var u=m(t.variants),c=u.next();!c.done;c=u.next())c=c.value,mn(e,r.keySystem,c.video),mn(e,r.keySystem,c.audio);bn(e,t)}return n}function mn(e,t,n){if(n){n=m(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=m(r.initData||[]);for(var u=r.next();!u.done;u=r.next())u=u.value,De(e.g,u.initDataType,u.initData)}}}function bn(e,t){e=e.g?e.g.Id():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,u=!1,c=new Set,f=new Set;t=m(t.variants);for(var h=t.next();!h.done;h=t.next()){h=h.value;var v=[];h.audio&&v.push(h.audio),h.video&&v.push(h.video),v=m(v);for(var A=v.next();!A.done;A=v.next())if(A=A.value,A.keyIds.size){A=m(A.keyIds);for(var N=A.next();!N.done;N=A.next()){N=N.value;var B=e[n?"00":N];B?Zn.includes(B)&&f.add(B):c.add(N)}}h.allowedByApplication?h.allowedByKeySystem&&(r=!0):u=!0}if(!r)throw e={hasAppRestrictions:u,missingKeys:Array.from(c),restrictedKeyStatuses:Array.from(f)},new Ye(2,4,4012,e)}var Zn=["output-restricted","internal-error"];function Fn(){}function qn(e,t){if(t){var n=Yn[t.toLowerCase()];if(n)return n}throw new Ye(2,4,4e3,e,t)}ne("shaka.media.ManifestParser",Fn),Fn.unregisterParserByMime=function(e){delete Yn[e]},Fn.registerParserByMime=function(e,t){Yn[e]=t},Fn.registerParserByExtension=function(){gr("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Fn.AccessibilityPurpose={bk:"visually impaired",tj:"hard of hearing"};var Yn={};function Jt(e,t){function n(){c=!0}function r(N){h.push(N),W(N)}var u=e=nr(e),c=!1,f,h=[],v=[];if(new V().box("moov",r).box("trak",r).box("mdia",r).box("minf",r).box("stbl",r).R("stsd",function(N){f=N,h.push(N),ee(N)}).R("encv",n).R("enca",n).R("dvav",function(N){v.push({box:N,Oa:1701733238})}).R("dva1",function(N){v.push({box:N,Oa:1701733238})}).R("dvh1",function(N){v.push({box:N,Oa:1701733238})}).R("dvhe",function(N){v.push({box:N,Oa:1701733238})}).R("dvc1",function(N){v.push({box:N,Oa:1701733238})}).R("dvi1",function(N){v.push({box:N,Oa:1701733238})}).R("hev1",function(N){v.push({box:N,Oa:1701733238})}).R("hvc1",function(N){v.push({box:N,Oa:1701733238})}).R("avc1",function(N){v.push({box:N,Oa:1701733238})}).R("avc3",function(N){v.push({box:N,Oa:1701733238})}).R("ac-3",function(N){v.push({box:N,Oa:1701733217})}).R("ec-3",function(N){v.push({box:N,Oa:1701733217})}).R("ac-4",function(N){v.push({box:N,Oa:1701733217})}).R("mp4a",function(N){v.push({box:N,Oa:1701733217})}).parse(e),c)return e;if(v.length==0||!f)throw Ya(e),new Ye(2,3,3019,t);v.reverse(),t=m(v);for(var A=t.next();!A.done;A=t.next())A=A.value,u=Nn(u,f,A.box,h,A.Oa);return xr()&&xl()?(t=new Uint8Array(e.byteLength+u.byteLength),t.set(u),t.set(e,u.byteLength),t):u}function Nn(e,t,n,r,u){var c=On.value(),f=e.subarray(n.start,n.start+n.size),h=ln(f),v=new Uint8Array(n.size+c.byteLength);for(v.set(f,0),f=ln(v),f.setUint32(4,u),v.set(c,n.size),u=h.getUint32(4),f.setUint32(n.size+16,u),Pn(v,0,v.byteLength),u=new Uint8Array(e.byteLength+v.byteLength),n=Rr()||xr()?n.start:n.start+n.size,c=e.subarray(n),u.set(e.subarray(0,n)),u.set(v,n),u.set(c,n+v.byteLength),e=m(r),r=e.next();!r.done;r=e.next())r=r.value,Pn(u,r.start,r.size+v.byteLength);return v=ln(u,t.start),t=ie(t),e=v.getUint32(t),v.setUint32(t,e+1),u}function Pn(e,t,n){e=ln(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var On=new Un(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function Dn(e,t,n,r,u,c,f){this.M=e,this.Ha=t,this.va=n,this.Kc=r===void 0?null:r,this.timescale=u===void 0?null:u,this.g=c===void 0?null:c,this.aesKey=f===void 0?null:f,this.mimeType=this.codecs=null}Dn.prototype.Yb=function(){return this.Ha},Dn.prototype.Wb=function(){return this.va},Dn.prototype.cd=function(){return this.g};function Ct(e,t){return e===t?!0:e&&t?e.Yb()==t.Yb()&&e.Wb()==t.Wb()&&fn(e.M().sort(),t.M().sort())&&no(e.cd(),t.cd()):e==t}ne("shaka.media.InitSegmentReference",Dn),Dn.prototype.getEndByte=Dn.prototype.Wb,Dn.prototype.getStartByte=Dn.prototype.Yb;function Qe(e,t,n,r,u,c,f,h,v,A,N,B,z,J,fe,pe){for(A=A===void 0?[]:A,J=J===void 0?qe:J,this.startTime=e,this.j=this.endTime=t,this.F=n,this.Ha=r,this.va=u,this.$=c,this.timestampOffset=f,this.appendWindowStart=h,this.appendWindowEnd=v,this.g=A,this.tilesLayout=N===void 0?"":N,this.B=B===void 0?null:B,this.h=z===void 0?null:z,this.status=J,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=fe===void 0?null:fe,this.A=null,this.i=0,this.o=pe===void 0?!1:pe,this.G=this.s=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.Hg();this.o&&this.g.length&&this.g[this.g.length-1].Gg(),this.C=this.bandwidth=this.mimeType=this.codecs=null}p=Qe.prototype,p.M=function(){return this.F()},p.getStartTime=function(){return this.startTime},p.Kh=function(){return this.endTime},p.Yb=function(){return this.Ha},p.Wb=function(){return this.va},p.bi=function(){return this.tilesLayout},p.ai=function(){return this.B},p.Zb=function(){return this.status},p.ui=function(){this.status=Je},p.xf=function(){this.preload=!0},p.isPreload=function(){return this.preload},p.Jc=function(){this.l=!1},p.li=function(){return this.l},p.Hg=function(){this.s=!0},p.ni=function(){return this.s},p.Gg=function(){this.G=!0},p.mi=function(){return this.G},p.Fg=function(){this.m=!0},p.hi=function(){return this.m},p.bh=function(e){this.A=e},p.$h=function(){return this.A},p.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},p.Uf=function(e){this.h==null?de("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},p.Xi=function(e){this.C=e},p.cd=function(){return this.C};function Vt(e,t){e.$=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())Vt(n.value,t)}ne("shaka.media.SegmentReference",Qe),Qe.prototype.getSegmentData=Qe.prototype.cd,Qe.prototype.setSegmentData=Qe.prototype.Xi,Qe.prototype.syncAgainst=Qe.prototype.Uf,Qe.prototype.offset=Qe.prototype.offset,Qe.prototype.getThumbnailSprite=Qe.prototype.$h,Qe.prototype.setThumbnailSprite=Qe.prototype.bh,Qe.prototype.hasByterangeOptimization=Qe.prototype.hi,Qe.prototype.markAsByterangeOptimization=Qe.prototype.Fg,Qe.prototype.isLastPartial=Qe.prototype.mi,Qe.prototype.markAsLastPartial=Qe.prototype.Gg,Qe.prototype.isPartial=Qe.prototype.ni,Qe.prototype.markAsPartial=Qe.prototype.Hg,Qe.prototype.isIndependent=Qe.prototype.li,Qe.prototype.markAsNonIndependent=Qe.prototype.Jc,Qe.prototype.isPreload=Qe.prototype.isPreload,Qe.prototype.markAsPreload=Qe.prototype.xf,Qe.prototype.markAsUnavailable=Qe.prototype.ui,Qe.prototype.getStatus=Qe.prototype.Zb,Qe.prototype.getTileDuration=Qe.prototype.ai,Qe.prototype.getTilesLayout=Qe.prototype.bi,Qe.prototype.getEndByte=Qe.prototype.Wb,Qe.prototype.getStartByte=Qe.prototype.Yb,Qe.prototype.getEndTime=Qe.prototype.Kh,Qe.prototype.getStartTime=Qe.prototype.getStartTime,Qe.prototype.getUris=Qe.prototype.M;var qe=0,Je=1;Qe.Status={fj:qe,$j:Je,Bj:2};function Ot(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function yn(e){return!e||Ot(e)?null:e.length?e.end(e.length-1):null}function Cn(e,t){return!e||!e.length||Ot(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function yr(e,t){if(!e||!e.length||Ot(e))return 0;var n=0;e=m(gi(e));for(var r=e.next();!r.done;r=e.next()){var u=r.value;r=u.start,u=u.end,u>t&&(n+=u-Math.max(r,t))}return n}function oi(e,t,n){return!e||!e.length||Ot(e)?null:(e=gi(e).findIndex(function(r,u,c){return r.start>t&&(u==0||c[u-1].end-t<=n)}),0<=e?e:null)}function gi(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Xr(){}function Lo(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function zi(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Cs(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function al(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=Cr(nr(e.data,1,n)),u=e.data[2+n],c=e.data.subarray(3+n).indexOf(0);if(c===-1)return null;var f=Cr(nr(e.data,3+n,c)),h;return r==="-->"?h=Cr(nr(e.data,4+n+c)):h=Ni(e.data.subarray(4+n+c)),t.mimeType=r,t.pictureType=u,t.description=f,t.data=h,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Cr(nr(e.data,1,r)),e=Cr(nr(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Cr(nr(e.data,1,r)),e=Cr(nr(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Cr(nr(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Ni(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Cr(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Cr(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ni(e.data),t):null}function la(e){for(var t=0,n=[];Lo(e,t);){var r=Cs(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var u=e.subarray(t),c=Cs(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:c,data:u.subarray(10,10+c)},(c=al(u))&&n.push(c),t+=u.size+10}zi(e,t)&&(t+=10)}return n}function ko(e,t){for(var n=t=t===void 0?0:t,r=0;Lo(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=Cs(e,t+6),zi(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}ne("shaka.util.Id3Utils",Xr),Xr.getID3Data=ko,Xr.getID3Frames=la;function Rs(e,t){var n=null,r=null,u=null,c=e.P();return t&1&&(u=e.Pc()),t&2&&e.skip(4),t&8&&(n=e.P()),t&16&&(r=e.P()),{trackId:c,Zc:n,Fd:r,dk:u}}function To(e,t){return t==1?(t=e.P(),e=e.P(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.P()}}function Xa(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.P(),e.skip(4),e=e.la(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Ru(e,t,n){var r=e.P(),u=[],c=null;n&1&&(c=e.P()),n&4&&e.skip(4);for(var f=0;f<r;f++){var h={Kf:null,sampleSize:null,ke:null};n&256&&(h.Kf=e.P()),n&512&&(h.sampleSize=e.P()),n&1024&&e.skip(4),n&2048&&(h.ke=t==0?e.P():e.Pg()),u.push(h)}return{hk:r,Tg:u,Dh:c}}function ca(e){e.skip(6),e.skip(2),e.skip(8);var t=e.la();return e.skip(2),e.skip(2),e.skip(2),e=e.la()+e.la()/65536,{channelCount:t,sampleRate:e}}function ql(e){return e=e.P(),{codec:Te(e)}}function Qf(e){var t=null,n=null,r=e.rb(4),u=String.fromCharCode(r[0]);if(u+=String.fromCharCode(r[1]),u+=String.fromCharCode(r[2]),u+=String.fromCharCode(r[3]),u==="nclx"){switch(e.la()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.la(),e.la(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,vd:n}}function xu(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function ji(e){return(10>e?"0":"")+e}function Na(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=nr(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Js(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new F(n,0).P(),e.g=8*r,e.i-=r)}function xt(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Js(e)}e.h<<=t,e.g-=t}function zt(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Js(e),n=t-n,0<n?r<<n|zt(e,n):r}function Xn(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Js(e),t+Xn(e)}function Jn(e){xt(e,1+Xn(e))}function Tn(e){var t=Xn(e);return zt(e,t+1)-1}function br(e){return e=Tn(e),1&e?1+e>>>1:-1*(e>>>1)}function Sn(e){return zt(e,1)===1}function or(e){return zt(e,8)}function Jr(e,t){for(var n=8,r=8,u=0;u<t;u++)r!==0&&(r=br(e),r=(n+r+256)%256),n=r===0?n:r}function eu(e){return or(e),Tn(e),Tn(e)}ne("shaka.util.ExpGolomb",Na);function kr(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}p=kr.prototype,p.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},p.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,i1(e)),n=e.length-(e.length+t)%188,r=!1,u=t;u<n;u+=188)if(e[u]==71){var c=!!(e[u+1]&64),f=((e[u+1]&31)<<8)+e[u+2];if(1<(e[u+3]&48)>>4){var h=u+5+e[u+4];if(h==u+188)continue}else h=u+4;switch(f){case 0:c&&(h+=e[h]+1),this.G=(e[h+10]&31)<<8|e[h+11];break;case 17:case 8191:break;case this.G:c&&(h+=e[h]+1),c=e,f={audio:-1,video:-1,Od:-1,audioCodec:"",videoCodec:""};var v=h+3+((c[h+1]&15)<<8|c[h+2])-4;for(h+=12+((c[h+10]&15)<<8|c[h+11]);h<v;){var A=(c[h+1]&31)<<8|c[h+2],N=(c[h+3]&15)<<8|c[h+4];switch(c[h]){case 6:if(0<N)for(var B=h+5,z=N;2<z;){var J=c[B+1]+2;switch(c[B]){case 5:var fe=oa(c.subarray(B+2,B+J));f.audio==-1&&fe==="Opus"?(f.audio=A,f.audioCodec="opus"):f.video==-1&&fe==="AV01"&&(f.video=A,f.videoCodec="av1");break;case 106:f.audio==-1&&(f.audio=A,f.audioCodec="ac3");break;case 122:f.audio==-1&&(f.audio=A,f.audioCodec="ec3");break;case 124:f.audio==-1&&(f.audio=A,f.audioCodec="aac");break;case 127:f.audioCodec=="opus"&&(fe=null,c[B+2]===128&&(fe=c[B+3]),fe!=null&&(this.F={channelCount:fe&15?fe&15:2,Ah:fe,sampleRate:48e3}))}B+=J,z-=J}break;case 15:f.audio==-1&&(f.audio=A,f.audioCodec="aac");break;case 17:f.audio==-1&&(f.audio=A,f.audioCodec="aac-loas");break;case 21:f.Od==-1&&(f.Od=A);break;case 27:f.video==-1&&(f.video=A,f.videoCodec="avc");break;case 3:case 4:f.audio==-1&&(f.audio=A,f.audioCodec="mp3");break;case 36:f.video==-1&&(f.video=A,f.videoCodec="hvc");break;case 129:f.audio==-1&&(f.audio=A,f.audioCodec="ac3");break;case 132:case 135:f.audio==-1&&(f.audio=A,f.audioCodec="ec3")}h+=N+5}c=f,c.video!=-1&&(this.I=c.video,this.m=c.videoCodec),c.audio!=-1&&(this.B=c.audio,this.A=c.audioCodec),c.Od!=-1&&(this.C=c.Od),r&&!this.H&&(r=!1,u=t-188),this.H=!0;break;case this.I:h=e.subarray(h,u+188),c?this.j.push([h]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(h);break;case this.B:h=e.subarray(h,u+188),c?this.i.push([h]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(h);break;case this.C:h=e.subarray(h,u+188),c?this.l.push([h]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(h);break;default:r=!0}}return this};function r1(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var u=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=u),n.pts=PR(u,e.s),e.s=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=PR(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}p.Ai=function(e){return gr("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Df(e)},p.Df=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var u=e.byteLength,c=1;this.m=="hvc"&&(c=2);for(var f=n||0,h=[],v=-1,A=0,N,B=0;B<u;++B){var z=e[B];if(z){if(2<=f&&z==1){if(t&&!h.length&&v==-1&&(z=B-(3<f?3:f),n&&z!=0&&(z=e.subarray(0,z),t.data=hi(t.data,z),t.fullData=hi(t.fullData,z))),0<=v?(f=B-((3<f?3:f)+1),h.push({data:e.subarray(v+c,f+1),fullData:e.subarray(v,f+1),type:A,time:r})):t&&!h.length&&(v=B-f,0<v&&(v=e.subarray(0,v),t.data=hi(t.data,v),t.fullData=hi(t.fullData,v))),B>=u-c)return h;B++,v=B,A=this.m=="hvc"?e[B]>>1&63:e[B]&31}f=0}else f++;B>=u-1&&0<=v&&0<=f&&(N={data:e.subarray(v+c,u),fullData:e.subarray(v,u),type:A,time:r})}return N&&h.push(N),!h.length&&t&&(t.data=hi(t.data,e),t.fullData=hi(t.fullData,e)),h},p.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=hi.apply(co,T(n.value)),(n=r1(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:la(n.data),dts:n.dts,pts:n.pts});return e},p.Vb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=m(this.i),n=t.next();!n.done;n=t.next()){var r=hi.apply(co,T(n.value)),u=r1(this,r);n=this.h.length?this.h[this.h.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!n||n.pts!=u.pts&&n.dts!=u.dts)?(this.h.length&&u.dts<(n.dts||0)&&(e=!0),this.h.push(u)):this.h.length&&(r=u?u.data:r)&&(n=this.h.pop(),n.data=hi(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(c,f){var h=(c.pts||0)-(f.pts||0);return(c.dts||0)-(f.dts||0)||h}))}return this.h},p.nc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=m(this.j),r=n.next();!r.done;r=n.next()){var u=hi.apply(co,T(r.value)),c=r1(this,u);r=this.g.length?this.g[this.g.length-1]:null,c&&c.pts!=null&&c.dts!=null&&(!r||r.pts!=c.pts&&r.dts!=c.dts)?(this.g.length&&c.dts<(r.dts||0)&&(t=!0),this.g.push(c)):this.g.length&&(u=c?c.data:u)&&(r=this.g.pop(),r.data=hi(r.data,u),this.g.push(r))}if(e){for(n=[],r=m(this.g),u=r.next();!u.done;u=r.next())if(u=u.value,u.nalus=this.Df(u,f,void 0),u.nalus.length){n.push(u);var f=u.nalus[u.nalus.length-1]}this.g=n}t&&(this.g=this.g.sort(function(h,v){var A=(h.pts||0)-(v.pts||0);return(h.dts||0)-(v.dts||0)||A}))}return e?this.g:(e=this.g,this.g=[],e)},p.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Vb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.nc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},p.$c=function(){return{audio:this.A,video:this.m}},p.Md=function(){for(var e=[],t=m(this.nc()),n=t.next();!n.done;n=t.next())e.push.apply(e,T(n.value.nalus));return e},p.ei=function(){gr("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.kf();return{height:e.height,width:e.width}},p.kf=function(){return this.m=="hvc"?z8(this):K8(this)};function DR(e){var t=e.nc();return 1<t.length&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function K8(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Md();if(!n.length||(n=n.find(function(J){return J.type==7}),!n))return t;n=new Na(n.data);var r=or(n),u=or(n),c=or(n);if(Jn(n),Y8.includes(r)){var f=Tn(n);if(f===3&&xt(n,1),Jn(n),Jn(n),xt(n,1),Sn(n)){f=f!==3?8:12;for(var h=0;h<f;h++)Sn(n)&&(6>h?Jr(n,16):Jr(n,64))}}if(Jn(n),f=Tn(n),f===0)Tn(n);else if(f===1)for(xt(n,1),Jn(n),Jn(n),f=Tn(n),h=0;h<f;h++)Jn(n);Jn(n),xt(n,1),f=Tn(n),h=Tn(n);var v=zt(n,1);v===0&&xt(n,1),xt(n,1);var A=0,N=0,B=0,z=0;return Sn(n)&&(A=Tn(n),N=Tn(n),B=Tn(n),z=Tn(n)),t.height=String((2-v)*(h+1)*16-2*B-2*z),t.width=String(16*(f+1)-2*A-2*N),t.codec="avc1."+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2)+("0"+c.toString(16).toUpperCase()).slice(-2),t.frameRate=DR(e),t}function z8(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Md();if(!n.length||(n=n.find(function($e){return $e.type==33}),!n))return t;var r=new Na(n.fullData,!0);or(r),or(r),zt(r,4);var u=zt(r,3);Sn(r);var c=zt(r,2),f=zt(r,1),h=zt(r,5),v=zt(r,32);n=or(r);for(var A=or(r),N=or(r),B=or(r),z=or(r),J=or(r),fe=or(r),pe=[],Ee=[],Oe=0;Oe<u;Oe++)pe.push(Sn(r)),Ee.push(Sn(r));if(0<u)for(Oe=u;8>Oe;Oe++)zt(r,2);for(Oe=0;Oe<u;Oe++)pe[Oe]&&zt(r,88),Ee[Oe]&&or(r);Tn(r),u=Tn(r),u==3&&zt(r,1),pe=Tn(r),Ee=Tn(r);var ke=Oe=0,rt=0,Fe=0;return Sn(r)&&(Oe+=Tn(r),ke+=Tn(r),rt+=Tn(r),Fe+=Tn(r)),t.width=String(pe-(Oe+ke)*(u===1||u===2?2:1)),t.height=String(Ee-(rt+Fe)*(u===1?2:1)),r=function($e){for(var nt=0,ct=0;32>ct;ct++)nt|=($e>>ct&1)<<31-ct;return nt>>>0}(v),f=f==1?"H":"L",c="hvc1"+("."+["","A","B","C"][c]+h),c+="."+r.toString(16).toUpperCase(),c+="."+f+fe,J&&(c+="."+J.toString(16).toUpperCase()),z&&(c+="."+z.toString(16).toUpperCase()),B&&(c+="."+B.toString(16).toUpperCase()),N&&(c+="."+N.toString(16).toUpperCase()),A&&(c+="."+A.toString(16).toUpperCase()),n&&(c+="."+n.toString(16).toUpperCase()),t.codec=c,t.frameRate=DR(e),t}function PR(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function sp(e){return!(0>i1(e))}function i1(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}ne("shaka.util.TsParser",kr),kr.syncOffset=i1,kr.probe=sp,kr.prototype.getVideoInfo=kr.prototype.kf,kr.prototype.getVideoResolution=kr.prototype.ei,kr.prototype.getVideoNalus=kr.prototype.Md,kr.prototype.getCodecs=kr.prototype.$c,kr.prototype.getStartTime=kr.prototype.getStartTime,kr.prototype.getVideoData=kr.prototype.nc,kr.prototype.getAudioData=kr.prototype.Vb,kr.prototype.getMetadata=kr.prototype.getMetadata,kr.prototype.parseNalus=kr.prototype.Df,kr.prototype.parseAvcNalus=kr.prototype.Ai,kr.prototype.parse=kr.prototype.parse,kr.prototype.clearData=kr.prototype.clearData,kr.Timescale=9e4;var Y8=[100,110,122,244,44,83,86,118,128,138,139,134];function up(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&He("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,gr("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{He("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(He("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||He(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function OR(e){e.g&&e.i.classList.add("shaka-hidden")}up.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function LR(e,t,n){var r=0,u=-1;switch(t.mimeType){case"video/webm":r=1;break;case"video/mp4":r=2}switch(n){case"DASH":u=1;break;case"HLS":u=0}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(u))}ne("shaka.lcevc.Dec",up),up.prototype.release=up.prototype.release;function kR(e,t,n,r){var u=this;this.i=e,this.aa=n,this.A=null,this.ba=t,this.h={},this.F={},this.Da={},this.g=null,this.fa=!1,this.T=r||null,this.l={},this.s=new Et,this.j={},this.G=null,this.K=new Lr,this.L="",this.sa=!1,this.m=FR(this,this.K),this.C=!1,this.H=new Zl(function(){return $8(u)}),this.B=!1,this.X="UNKNOWN",this.Ea=this.Fa=!1,this.za=new Lr,this.o=!1,this.ta=!0,this.ka=this.N=this.oa=this.O=this.I=this.ea=null,this.ga=new Lr}function FR(e,t){if(g.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.s.D(n,"startstreaming",function(){e.ta=!0}),e.s.D(n,"endstreaming",function(){e.ta=!1}),e.s.pa(n,"sourceopen",function(){URL.revokeObjectURL(e.L),t.resolve()}),e.s.pa(e.i,"playing",function(){e.sa=!0}),e.L=rv(n),e.i.src=e.L,n}return n=new MediaSource,e.s.pa(n,"sourceopen",function(){URL.revokeObjectURL(e.L),t.resolve()}),e.s.pa(e.i,"playing",function(){e.sa=!0}),e.L=rv(n),e.i.src=e.L,n}function W8(e,t){var n,r,u,c,f,h,v,A,N,B,z;return Ne(function(J){if(J.g==1)return e.createSegmentIndex?R(J,e.createSegmentIndex(),2):J.u(2);if(!e.segmentIndex)return J.return(!1);if(e.segmentIndex.getNumReferences()==0)return J.return(!0);for(n=Mi,r=new Set,u=m(e.segmentIndex),c=u.next();!c.done;c=u.next())if(f=c.value,h=f.mimeType||e.mimeType||"",v=f.codecs||e.codecs||"",A=h+":"+v,!r.has(A)){if(r.add(A),t==n.wa){if(N=Di(h,v),!Ic(N))return J.return(!1)}else if(t==n.ja?v=bs(v):t==n.Y&&(v=nl(v,h)),B=Zh(e,h,v),z=Ju(h,v),!Ft(B)&&!Au(z))return J.return(!1)}return J.return(!0)})}p=kR.prototype,p.destroy=function(){return this.H.destroy()};function $8(e){var t,n,r,u,c,f,h,v;return Ne(function(A){if(A.g==1){t=[];for(n in e.l)for(r=e.l[n],u=r[0],e.l[n]=r.slice(0,1),u&&t.push(u.p.catch(Cm)),c=m(r.slice(1)),f=c.next();!f.done;f=c.next())h=f.value,h.p.reject(new Ye(2,7,7003,void 0));e.g&&t.push(e.g.destroy());for(v in e.j)t.push(e.j[v].destroy());return R(A,Promise.all(t),2)}e.s&&(e.s.release(),e.s=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.m=null,e.g=null,e.ba=null,e.h={},e.j={},e.G=null,e.l={},e.T=null,e.I=null,e.aa=null,X(A)})}p.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var u=this,c,f,h,v,A;return Ne(function(N){switch(N.g){case 1:return c=Mi,R(N,u.K,2);case 2:u.B=t,u.X=n,u.Fa=r,u.Ea=!u.B&&u.X=="HLS"&&!u.Fa,u.I=null,f=m(e.keys()),h=f.next();case 3:if(h.done){N.u(0);break}return v=h.value,A=e.get(v),R(N,Jm(u,v,A,A.codecs),6);case 6:u.o?(u.l[c.Y]=[],u.l[c.ja]=[]):u.l[v]=[],h=f.next(),N.u(3)}})};function Jm(e,t,n,r){var u,c,f,h,v,A,N,B,z,J,fe,pe;return Ne(function(Ee){switch(Ee.g){case 1:return u=Mi,c=Ue,f=L,R(Ee,W8(n,t),2);case 2:if(f.call(c,Ee.h,"Type negotiation should happen before MediaSourceEngine.init!"),h=Di(n.mimeType,r),t==u.wa){ev(e,h,e.B,n.external),Ee.u(0);break}if(v=e.A.forceTransmux,(!Ft(h)||!e.B&&bu.includes(h))&&(v=!0),A=Ju(n.mimeType,r),!v){Ee.u(4);break}if(N=bo(u.Y,(r||"").split(",")),B=bo(u.ja,(r||"").split(",")),!N||!B){Ee.u(5);break}return e.o=!0,R(Ee,Jm(e,u.Y,n,N),6);case 6:return R(Ee,Jm(e,u.ja,n,B),7);case 7:return Ee.return();case 5:(z=Au(A))&&(J=z(),e.j[t]=J,h=J.convertCodecs(t,A));case 4:fe=h+e.A.addExtraFeaturesToSourceBuffer(h),Zr(e.H);try{pe=e.m.addSourceBuffer(fe)}catch(Oe){throw new Ye(2,3,3015,Oe,"The mediaSource_ status was "+e.m.readyState+" expected 'open'",null)}e.B&&(pe.mode=uj),e.s.D(pe,"error",function(){var Oe=e.l[t][0];Oe.p.reject(new Ye(2,3,3014,e.i.error?e.i.error.code:0,Oe.uri))}),e.s.D(pe,"updateend",function(){return sl(e,t)}),e.h[t]=pe,e.F[t]=h,e.Da[t]=!!n.drmInfos.length,X(Ee)}})}p.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function ev(e,t,n,r){e.g||(e.g=new Is(e.ba),e.g&&(e.g.A=e.A.modifyCueCallback));var u=e.g;r=r||e.fa,e=e.X,t=="application/cea-608"||t=="application/cea-708"?u.i=null:(u.i=(0,_i[t])(),u.i.setSequenceMode?u.i.setSequenceMode(n):gr("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):gr("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.B=r)}function UR(e){return e.C?!1:e.m?e.m.readyState=="ended":!0}function o1(e,t){return e.C||!Object.keys(e.h).length?e=null:t==_r?e=e.g.g:(e=Jf(e,t),e=!e||Ot(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function lp(e,t){return e.C?null:t==_r?e.g.h:yn(Jf(e,t))}function X8(e,t,n){return e.C?0:t==_r?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Jf(e,t),yr(e,n))}p.xb=function(){var e={total:this.C?[]:gi(this.i.buffered),audio:this.C?[]:gi(Jf(this,"audio")),video:this.C?[]:gi(Jf(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Jf(e,t){try{return e.h[t].buffered}catch(n){return null}}function Q8(e,t,n,r,u,c){var f=null,h=nr(n);if(bu.includes(u))c=la(h),c.length&&r&&((t=c.find(function(B){return B.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(f=Math.round(t.data)/1e3),e.aa.onMetadata([{cueTime:r.startTime,data:h,frames:c,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(u.includes("/mp4")&&r&&r.timestampOffset==0&&r.$&&r.$.timescale){var v=r.$.timescale;if(!isNaN(v)){var A=0,N=!1;new V().box("moof",W).box("traf",W).R("tfdt",function(B){A=To(B.reader,B.version).baseMediaDecodeTime/v,N=!0,B.parser.stop()}).parse(n,!0),N&&(f=A)}}else!u.includes("/mp4")&&!u.includes("/webm")&&sp(h)&&(e.I?e.I.clearData():e.I=new kr,h=e.I.parse(h),t=h.getStartTime(t),t!=null&&(f=t),h=h.getMetadata(),h.length)&&e.aa.onMetadata(h,c,r?r.endTime:null);return f}function tv(e,t,n,r,u,c,f,h,v,A){f=f===void 0?!1:f,h=h===void 0?!1:h,v=v===void 0?!1:v,A=A===void 0?!1:A;var N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct;return Ne(function(gt){switch(gt.g){case 1:if(N=Mi,t!=N.wa){gt.u(2);break}if(!e.B){gt.u(3);break}return R(gt,e.za,4);case 4:B=gt.h,e.g.s=B;case 3:return R(gt,Am(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.M()[0]:null),5);case 5:return gt.return();case 2:if(A||!e.o){gt.u(6);break}return R(gt,tv(e,N.Y,n,r,u,c,f,h,v,!0),7);case 7:return R(gt,tv(e,N.ja,n,r,u,c,f,h,v,!0),8);case 8:return gt.return();case 6:if(!e.h[t])return gt.return();if(z=e.h[t].timestampOffset,J=e.F[t],e.j[t]&&(J=e.j[t].getOriginalMimeType()),r&&(fe=Q8(e,t,n,r,J,z),fe!=null&&(e.O==null&&t==N.ja&&(e.O=fe,e.oa=r.startTime,e.N!=null&&(pe=0,e.oa==e.ka&&(pe=e.O-e.N),e.ga.resolve(pe))),e.N==null&&t==N.Y&&(e.N=fe,e.ka=r.startTime,e.O!=null&&(Ee=0,e.oa==e.ka&&(Ee=e.O-e.N),e.ga.resolve(Ee))),Oe=r.startTime-fe,ke=Math.abs(z-Oe),(.001<=ke||f||h)&&(!v||0<Oe||!z)&&(z=Oe,e.Ea&&(ro(e,t,function(){return ed(e,t)},null),ro(e,t,function(){return td(e,t,z)},null))),rt=t==N.ja||!(N.ja in e.h),e.B&&rt&&e.za.resolve(z))),c&&t==N.ja&&(e.g||ev(e,"application/cea-608",e.B,!1),e.G||(Fe=J.split(";",1)[0],e.G=new wt(Fe)),r?($e=e.G.i(n),$e.length&&bm(e.g,$e,r.startTime,r.endTime,z)):e.G.init(n,h)),!e.j[t]){gt.u(9);break}return R(gt,e.j[t].transmux(n,u,r,e.m.duration,t),10);case 10:n=gt.h;case 9:if(n=rj(e,n,r?r.startTime:null,t,r?r.M()[0]:null),!r||!e.B||t==N.wa){gt.u(11);break}if(!f&&!h){gt.u(11);break}if(nt=r.startTime,e.X!="HLS"||e.o||t!=N.Y||!e.h[N.ja]){gt.u(13);break}return R(gt,e.ga,14);case 14:ct=gt.h,.1<Math.abs(ct)&&(nt-=ct);case 13:ro(e,t,function(){return ed(e,t)},null),ro(e,t,function(){return td(e,t,nt)},null);case 11:return R(gt,ro(e,t,function(){var Lt=n;if(t=="video"&&e.T){var It=e.T;It.g&&It.g.appendBuffer(Lt,"video",It.o,-z)}e.h[t].appendBuffer(Lt)},r?r.M()[0]:null),15);case 15:X(gt)}})}function J8(e,t){var n=lp(e,"video")||0;qh(e.g,t,n)}function ej(e){e.g&&qh(e.g,"",0)}p.remove=function(e,t,n){var r=this,u;return Ne(function(c){return c.g==1?(u=Mi,e==u.wa?R(c,r.g.remove(t,n),0):R(c,ro(r,e,function(){return nv(r,e,t,n)},null),4)):r.o?R(c,ro(r,u.Y,function(){return nv(r,u.Y,t,n)},null),0):c.u(0)})};function BR(e,t){var n;return Ne(function(r){return r.g==1?(n=Mi,t==n.wa?e.g?R(r,e.g.remove(0,1/0),0):r.return():R(r,ro(e,t,function(){return nv(e,t,0,e.m.duration)},null),4)):e.o?R(r,ro(e,n.Y,function(){return nv(e,n.Y,0,e.m.duration)},null),0):r.u(0)})}p.flush=function(e){var t=this,n;return Ne(function(r){return r.g==1?(n=Mi,e==n.wa?r.return():R(r,ro(t,e,function(){t.i.currentTime-=.001,sl(t,e)},null),2)):t.o?R(r,ro(t,n.Y,function(){var u=n.Y;t.i.currentTime-=.001,sl(t,u)},null),0):r.u(0)})};function tj(e,t,n,r,u,c,f,h,v){var A,N,B;return Ne(function(z){return z.g==1?(A=Mi,t==A.wa?(c||(e.g.s=n),jE(e.g,r,u),z.return()):(N=[],R(z,aj(e,t,f,h,v),2))):(B=z.h,B||(N.push(ro(e,t,function(){return ed(e,t)},null)),e.o&&N.push(ro(e,A.Y,function(){return ed(e,A.Y)},null))),c||(N.push(ro(e,t,function(){return td(e,t,n)},null)),e.o&&N.push(ro(e,A.Y,function(){return td(e,A.Y,n)},null))),N.push(ro(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=u,e.h[t].appendWindowStart=r,sl(e,t)},null)),e.o&&N.push(ro(e,A.Y,function(){var J=A.Y;e.h[J].appendWindowStart=0,e.h[J].appendWindowEnd=u,e.h[J].appendWindowStart=r,sl(e,J)},null)),R(z,Promise.all(N),0))})}function nj(e,t,n){var r;return Ne(function(u){return u.g==1?(r=Mi,t==r.wa?u.return():(t==r.ja&&(e.za=new Lr),ro(e,t,function(){return ed(e,t)},null),e.o&&ro(e,r.Y,function(){return ed(e,r.Y)},null),R(u,ro(e,t,function(){return td(e,t,n)},null),2))):e.o?R(u,ro(e,r.Y,function(){return td(e,r.Y,n)},null),0):u.u(0)})}p.endOfStream=function(e){var t=this;return Ne(function(n){return R(n,a1(t,function(){UR(t)||t.m.readyState==="closed"||(e?t.m.endOfStream(e):t.m.endOfStream())}),0)})},p.Za=function(e){var t=this;return Ne(function(n){return R(n,a1(t,function(){if(e<t.m.duration)for(var r in t.h){var u={start:function(){},p:new Lr,uri:null};t.l[r].unshift(u)}t.m.duration=e,t.ea=e}),0)})},p.getDuration=function(){return this.m.duration};function nv(e,t,n,r){r<=n?sl(e,t):e.h[t].remove(n,r)}function ed(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,sl(e,t)}function td(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,sl(e,t)}function sl(e,t){if(!e.C){var n=e.l[t][0];n&&(n.p.resolve(),s1(e,t))}}function ro(e,t,n,r){return Zr(e.H),n={start:n,p:new Lr,uri:r},e.l[t].push(n),e.l[t].length==1&&jR(e,t),n.p}function a1(e,t){var n,r,u,c,f,h,v;return Ne(function(A){switch(A.g){case 1:Zr(e.H),n=[],r={};for(u in e.h)r={ready:void 0},r.ready=new Lr,c={start:function(N){return function(){return N.ready.resolve()}}(r),p:r.ready,uri:null},e.l[u].push(c),n.push(r.ready),e.l[u].length==1&&c.start();return ce(A,2),R(A,Promise.all(n),4);case 4:ye(A,3);break;case 2:throw f=be(A),f;case 3:return ce(A,5,6),R(A,t(),6);case 6:Xe(A);for(h in e.h)s1(e,h);Ie(A,0);break;case 5:throw v=be(A),new Ye(2,3,3015,v,e.i.error||"No error in the media element",null)}})}function s1(e,t){e.l[t].shift(),jR(e,t)}function jR(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new Ye(2,3,3017,t)):n.p.reject(new Ye(2,3,3015,r,e.i.error||"No error in the media element",n.uri)),s1(e,t)}}function rj(e,t,n,r,u){var c=n==null,f=e.Da[r];return n=e.aa.Oh(),(c=e.A.insertFakeEncryptionInInit&&c&&f)&&(n=Hr(n),c=di()||Rr()||yu()||xr()&&xl()&&n),c&&kl(e.F[r])=="mp4"&&(t=Jt(t,u)),t}function ij(e,t,n,r){return ro(e,t,function(){t!==_r&&(Gn()&&(e.j[t]&&(e.j[t].destroy(),delete e.j[t]),r&&(e.j[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.F[t]=n),sl(e,t))},null)}function oj(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt;return Ne(function(It){switch(It.g){case 1:n=Mi,e.C=!0,e.o=!1,r=e.i.currentTime,u=e.i.autoplay,c=e.i.paused,e.sa&&(e.i.autoplay=!1),oe(It,2),e.s.Qa(),f=[];for(h in e.j)f.push(e.j[h].destroy());for(v in e.l)for(A=e.l[v],N=A[0],e.l[v]=A.slice(0,1),N&&f.push(N.p.catch(Cm)),B=m(A.slice(1)),z=B.next();!z.done;z=B.next())J=z.value,J.p.reject(new Ye(2,7,7003,void 0));for(fe in e.h){pe=e.h[fe];try{e.m.removeSourceBuffer(pe)}catch(Ut){}}return R(It,Promise.all(f),4);case 4:return e.j={},e.h={},Ee=e.m.duration,e.K=new Lr,e.m=FR(e,e.K),R(It,e.K,5);case 5:!isNaN(Ee)&&Ee?e.m.duration=Ee:!isNaN(e.ea)&&e.ea&&(e.m.duration=e.ea),Oe=new Lr,ke=e.m.sourceBuffers,rt=t.size,Fe=0,$e=function(){Fe++,Fe===rt&&(Oe.resolve(),e.s.$a(ke,"addsourcebuffer",$e))},e.s.D(ke,"addsourcebuffer",$e),nt=m(t.keys()),ct=nt.next();case 6:return ct.done?(e.i.currentTime=r,R(It,Oe,2)):(gt=ct.value,Lt=t.get(gt),R(It,Jm(e,gt,Lt,Lt.codecs),9));case 9:e.o?(e.l[n.Y]=[],e.l[n.ja]=[]):e.l[gt]=[],ct=nt.next(),It.u(6);break;case 2:Xe(It),e.C=!1,Zr(e.H),e.s.pa(e.i,"canplaythrough",function(){e.H.g||(e.i.autoplay=u,c||e.i.play())}),Ie(It,0)}})}function ZR(e,t){return a1(e,function(){return oj(e,t)})}function aj(e,t,n,r,u){var c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt;return Ne(function(Fe){return Fe.g==1?(c=Mi,t==c.wa?Fe.return(!1):(f=_o(Oo(e.F[t])),h=Ra(e.F[t]),A=!1,N=Di(n,r),B=e.A.forceTransmux,(!Ft(N)||!e.B&&bu.includes(N))&&(B=!0),B&&(z=Ju(n,r),J=Au(z))&&(v=J(),fe=bo(c.Y,(r||"").split(",")),pe=bo(c.ja,(r||"").split(",")),fe&&pe?(A=!0,Ee=pe,t==c.Y&&(Ee=fe),N=v.convertCodecs(t,Ju(n,Ee))):N=v.convertCodecs(t,z)),Oe=_o(Oo(N)),ke=Ra(N),f===Oe&&h===ke?(e.j[t]&&!v?(e.j[t].destroy(),delete e.j[t]):!e.j[t]&&v?e.j[t]=v:v&&(e.j[t]&&e.j[t].transmux!=v.transmux?(e.j[t].destroy(),delete e.j[t],e.j[t]=v):v.destroy()),Fe.return(!1)):(rt=!0,(e.o||A&&v&&!e.j[t])&&(rt=!1),rt&&e.A.codecSwitchingStrategy==="smooth"&&Gn()?R(Fe,ij(e,t,N,v),3):(v&&v.destroy(),R(Fe,ZR(e,u),3))))):Fe.return(!0)})}function sj(e,t,n,r){if(t==_r)var u=!1;else{u=_o(Oo(e.F[t]));var c=Ra(e.F[t]),f=Di(n,r),h=e.A.forceTransmux;(!Ft(f)||!e.B&&bu.includes(f))&&(h=!0),n=Ju(n,r),h&&(h=Au(n))&&(h=h(),f=h.convertCodecs(t,n),h.destroy()),t=_o(Oo(f)),f=Ra(f),u=u!==t||c!==f}return u?e.A.codecSwitchingStrategy!=="smooth"||!Gn()||e.o:!1}var rv=g.URL.createObjectURL,uj="sequence";function rr(e,t,n){this.i=e,this.B=t,this.o=this.j=1/0,this.h=1,this.g=this.l=null,this.A=0,this.G=!0,this.H=0,this.C=n===void 0?!0:n,this.F=0,this.s=!1,this.m=e}p=rr.prototype,p.getDuration=function(){return this.j},p.Qh=function(){return this.h},p.$g=function(e){this.i=e},p.Za=function(e){this.j=e},p.Vh=function(){return this.i},p.Yg=function(e){this.A=e},p.vc=function(e){this.G=e},p.ne=function(e){this.o=e},p.Ld=function(){return this.o},p.Of=function(e){this.B=e},p.Jh=function(){return this.B},p.Lg=function(e,t){if(e.length!=0){var n=(Date.now()+this.A)/1e3;if(e=e.filter(function(u){return u.start+t<n}),e.length!=0){var r=e[e.length-1].end+t;this.Zd(e[0].start+t),this.h=e.reduce(function(u,c){return Math.max(u,c.end-c.start)},this.h),this.g=Math.max(this.g,r),this.i!=null&&this.C&&!this.s&&(this.i=n-this.g-this.h)}}},p.qd=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.A)/1e3;e=m(e);for(var u=e.next();!u.done;u=e.next())u=u.value,r<u.startTime||(t=Math.min(t,u.startTime),n=Math.max(n,u.endTime),this.h=Math.max(this.h,u.endTime-u.startTime));this.Zd(t),this.g=Math.max(this.g,n),this.i!=null&&this.C&&!this.s&&(this.i=r-this.g-this.h)}},p.Kg=function(e,t){this.Zd(e),t==1/0||this.U()||(this.g=Math.max(this.g,t))},p.Rh=function(){return this.g},p.Ud=function(){this.s=!0},p.oi=function(){return this.s},p.Zg=function(e){this.m=e},p.Nh=function(){return this.m},p.Zd=function(e){this.l=this.l==null?e:Math.min(this.l,e)},p.yf=function(e){this.h=Math.max(this.h,e)},p.offset=function(e){this.l!=null&&(this.l+=e),this.g!=null&&(this.g+=e)},p.U=function(){return this.j==1/0&&!this.G},p.pc=function(){return this.j!=1/0&&!this.G},p.nb=function(){return Math.max(this.H,this.Xb()-this.o)},p.eh=function(e){this.H=e},p.Xb=function(){return this.U()||this.pc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.h-this.i)+this.F,this.j):this.g?Math.min(this.g,this.j):this.j},p.bd=function(e){var t=Math.max(this.l,this.H);return this.o==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Xb()-this.o+e,this.zb()))},p.Jb=function(){return this.bd(0)},p.zb=function(){return Math.max(0,this.Xb()-(this.U()||this.pc()?this.B:0))},p.lh=function(){return!(this.i==null||this.g!=null&&this.C)},p.Xg=function(e){this.F=e},p.Hh=function(){return this.F},ne("shaka.media.PresentationTimeline",rr),rr.prototype.getAvailabilityTimeOffset=rr.prototype.Hh,rr.prototype.setAvailabilityTimeOffset=rr.prototype.Xg,rr.prototype.usingPresentationStartTime=rr.prototype.lh,rr.prototype.getSeekRangeEnd=rr.prototype.zb,rr.prototype.getSeekRangeStart=rr.prototype.Jb,rr.prototype.getSafeSeekRangeStart=rr.prototype.bd,rr.prototype.getSegmentAvailabilityEnd=rr.prototype.Xb,rr.prototype.setUserSeekStart=rr.prototype.eh,rr.prototype.getSegmentAvailabilityStart=rr.prototype.nb,rr.prototype.isInProgress=rr.prototype.pc,rr.prototype.isLive=rr.prototype.U,rr.prototype.offset=rr.prototype.offset,rr.prototype.notifyMaxSegmentDuration=rr.prototype.yf,rr.prototype.notifyMinSegmentStartTime=rr.prototype.Zd,rr.prototype.getInitialProgramDateTime=rr.prototype.Nh,rr.prototype.setInitialProgramDateTime=rr.prototype.Zg,rr.prototype.isStartTimeLocked=rr.prototype.oi,rr.prototype.lockStartTime=rr.prototype.Ud,rr.prototype.getMaxSegmentEndTime=rr.prototype.Rh,rr.prototype.notifyPeriodDuration=rr.prototype.Kg,rr.prototype.notifySegments=rr.prototype.qd,rr.prototype.notifyTimeRange=rr.prototype.Lg,rr.prototype.getDelay=rr.prototype.Jh,rr.prototype.setDelay=rr.prototype.Of,rr.prototype.getSegmentAvailabilityDuration=rr.prototype.Ld,rr.prototype.setSegmentAvailabilityDuration=rr.prototype.ne,rr.prototype.setStatic=rr.prototype.vc,rr.prototype.setClockOffset=rr.prototype.Yg,rr.prototype.getPresentationStartTime=rr.prototype.Vh,rr.prototype.setDuration=rr.prototype.Za,rr.prototype.setPresentationStartTime=rr.prototype.$g,rr.prototype.getMaxSegmentDuration=rr.prototype.Qh,rr.prototype.getDuration=rr.prototype.getDuration;function qR(e,t,n){this.j=n,this.l=e,this.s=GR(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}qR.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function lj(e,t){e.i=t}function cj(e){this.g=e}function GR(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(gi(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function u1(e,t,n,r,u){var c=this;this.A=u,this.g=e,this.B=t,this.m=n,this.l=new Et,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.s=!1,this.l.D(e,"waiting",function(){return l1(c)}),this.o=new on(function(){l1(c)}).Ra(this.m.gapJumpTimerTime)}u1.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.o!=null&&(this.o.stop(),this.o=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},u1.prototype.Bf=function(){this.s=!0,l1(this)};function l1(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,r=GR(n),u=n.g.currentTime,c=Date.now()/1e3;(t.g!=u||t.s!=r)&&(t.m=c,t.g=u,t.s=r,t.h=!1),u=c-t.m,(r=u>=t.A&&r&&!t.h)&&(t.i(t.g,u),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new jn("stalldetected"))),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=oi(n,t,e.m.gapDetectionThreshold),r!=null&&(r!=0||e.s))&&(u=n.start(r),(navigator.userAgent.match(/Edge\//)||Rr()||di())&&(u=Math.ceil(100*(u+e.m.gapPadding))/100),u>=e.B.zb()||.001>u-t||(r!=0&&n.end(r-1),e.g.currentTime=u,t==e.i&&(e.i=u),e.C++,e.A(new jn("gapjumped"))))}}}function nd(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=fj.value().get(t),n.pa(e,t,r))}var fj=new Un(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function HR(e,t,n,r){var u=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return u.l==null&&(u.l=r()),u.l},this.o=!1,this.h=new Et,this.i=new YR(e),nd(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){KR(u,u.j())})}HR.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function c1(e){return e.o?e.g.currentTime:e.j()}function VR(e,t){0<e.g.readyState?WR(e.i,t):nd(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){KR(e,e.j())})}function KR(e,t){.001>Math.abs(e.g.currentTime-t)?zR(e):(e.h.pa(e.g,"seeking",function(){zR(e)}),WR(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function zR(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function YR(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new on(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}YR.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function WR(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Ra(.1)}function $R(e){this.h=e,this.j=!1,this.g=null,this.i=new Et}p=$R.prototype,p.ready=function(){function e(){if(t.g==null||t.g==0&&t.h.duration!=1/0)t.j=!0;else{var n=t.h.currentTime,r=t.g;0>t.g&&(r=Math.max(0,n+t.g)),n!=r?(t.i.pa(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=r):t.j=!0}}var t=this;nd(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},p.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},p.Ee=function(e){this.g=this.j?this.g:e},p.wd=function(){return(this.j?this.h.currentTime:this.g)||0},p.dg=function(){return 0},p.cg=function(){return 0},p.Jg=function(){};function XR(e,t,n,r,u,c){var f=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=u,this.s=null,this.o=dj(e,n,c),this.j=new u1(e,t.presentationTimeline,n,this.o,c),this.h=new HR(e,function(){e:{var h=f.j;h.j=!0,h.s=!1;var v=c1(f.h);if(h=JR(f,v),.001<Math.abs(h-v)){if(v=!1,!ri()||ri()&&Gu())v=!0;else{var A=Date.now()/1e3;(!f.s||f.s<A-1)&&(f.s=A,v=!0)}if(v){VR(f.h,h),h=void 0;break e}}f.A(),h=void 0}return h},function(h){var v=f.j;v.g.seeking&&!v.j&&(v.j=!0,v.i=h)},function(){var h=r;return h==null?h=1/0>f.g.getDuration()?f.g.Jb():f.g.zb():0>h&&(h=f.g.zb()+h),QR(f,ex(f,h))}),this.m=new on(function(){if(f.i.readyState!=0&&!f.i.paused){var h=c1(f.h),v=f.g.Jb(),A=f.g.zb();3>A-v&&(v=A-3),h<v&&(h=JR(f,h),f.i.currentTime=h)}})}p=XR.prototype,p.ready=function(){this.m.Ra(.25)},p.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},p.Ee=function(e){VR(this.h,e)},p.wd=function(){var e=c1(this.h);return 0<this.i.readyState&&!this.i.paused?ex(this,e):e},p.dg=function(){return this.o?this.o.o:0},p.cg=function(){return this.j.C},p.Jg=function(){this.j.Bf()};function QR(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function JR(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,u=e.g.Jb(),c=e.g.zb(),f=e.g.getDuration();3>c-u&&(u=c-3);var h=e.g.bd(n),v=e.g.bd(r);return n=e.g.bd(n+r),t>=f?QR(e,t):t>c?c:t<u?Cn(e.i.buffered,v)?v:n:t>=h||Cn(e.i.buffered,t)?t:n}function ex(e,t){var n=e.g.Jb();return t<n?n:(e=e.g.zb(),t>e?e:t)}function dj(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new qR(new cj(e),t.stallThreshold,n),lj(t,function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}function Mr(e){this.g=e,this.m=null,this.i=0,this.o=!1}p=Mr.prototype,p.getNumReferences=function(){return this.g.length},p.getNumEvicted=function(){return this.i},p.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},p.vi=function(){this.o=!0},p.Gb=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)};function tu(e){return e.g[0]||null}p.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],u=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<u)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},p.get=function(e){return this.g.length==0?null:(e-=this.i,0>e||e>=this.g.length?null:this.g[e])},p.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},p.Wd=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,T(e))}},p.od=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.g.length==0||r.endTime>n.g[0].startTime)}),this.Wd(e),this.Ga(t)},p.Ga=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},p.Ec=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new Qe(e.startTime,t,e.F,e.Ha,e.va,e.$,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},p.re=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new on(function(){var r=t();r?n.g.push.apply(n.g,T(r)):(n.m.stop(),n.m=null)}),this.m.Ra(e))},Mr.prototype[Symbol.iterator]=function(){return this.Ib(0)},Mr.prototype.Ib=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;var u=this.get(r);n?r++:r--;var c=-1;if(u&&0<u.g.length)for(var f=u.g.length-1;0<=f;--f){var h=u.g[f];if(e>=h.startTime&&e<h.endTime){if(!t){for(;f&&!h.l;)f--,h=u.g[f];if(!h.l)return de("No independent partial segment found!"),null}n?r--:r++,c=f-1;break}}return new Ma(this,r,c,n)};function f1(e,t,n){return e=new Qe(e,e+t,function(){return n},0,null,null,e,e,e+t),new Mr([e])}ne("shaka.media.SegmentIndex",Mr),Mr.forSingleSegment=f1,Mr.prototype.getIteratorForTime=Mr.prototype.Ib,Mr.prototype.updateEvery=Mr.prototype.re,Mr.prototype.fit=Mr.prototype.Ec,Mr.prototype.evict=Mr.prototype.Ga,Mr.prototype.mergeAndEvict=Mr.prototype.od,Mr.prototype.offset=Mr.prototype.offset,Mr.prototype.get=Mr.prototype.get,Mr.prototype.find=Mr.prototype.find,Mr.prototype.markImmutable=Mr.prototype.vi,Mr.prototype.release=Mr.prototype.release,Mr.prototype.getNumEvicted=Mr.prototype.getNumEvicted,Mr.prototype.getNumReferences=Mr.prototype.getNumReferences;function Ma(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}Ma.prototype.Tc=function(e){this.reverse=e},Ma.prototype.Ch=function(){return this.h},Ma.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Ma.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},ne("shaka.media.SegmentIterator",Ma),Ma.prototype.next=Ma.prototype.next,Ma.prototype.current=Ma.prototype.current,Ma.prototype.currentPosition=Ma.prototype.Ch,Ma.prototype.setReverse=Ma.prototype.Tc;function Ti(){Mr.call(this,[]),this.h=[]}Y(Ti,Mr),p=Ti.prototype,p.clone=function(){var e=new Ti;return e.h=this.h.slice(),e.i=this.i,e},p.release=function(){for(var e=m(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},p.Gb=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.Gb(e)},p.find=function(e){for(var t=this.i,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.find(e);if(u!=null)return u+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},p.get=function(e){for(var t=this.i,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.get(e-t);if(u)return u;u=r.getNumReferences(),t+=r.getNumEvicted()+u}return null},p.offset=function(){},p.Wd=function(){},p.Ga=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.Ga(e);for(;1<this.h.length&&this.h[0].getNumReferences()==0;)e=this.h.shift(),this.i+=e.getNumEvicted(),e.release()},p.od=function(){},p.Ec=function(){},p.re=function(){},ne("shaka.media.MetaSegmentIndex",Ti),Ti.prototype.updateEvery=Ti.prototype.re,Ti.prototype.fit=Ti.prototype.Ec,Ti.prototype.mergeAndEvict=Ti.prototype.od,Ti.prototype.evict=Ti.prototype.Ga,Ti.prototype.merge=Ti.prototype.Wd,Ti.prototype.offset=Ti.prototype.offset,Ti.prototype.get=Ti.prototype.get,Ti.prototype.find=Ti.prototype.find,Ti.prototype.forEachTopLevelReference=Ti.prototype.Gb,Ti.prototype.release=Ti.prototype.release;function cp(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Kd(),this.h=new on(function(){t.g.Ig(.25*t.i)})}cp.prototype.release=function(){this.set(this.lc()),this.h&&(this.h.stop(),this.h=null),this.g=null},cp.prototype.set=function(e){this.i=e,tx(this)},cp.prototype.lc=function(){return this.g.lc()};function tx(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Kd()!=t&&e.g.Rf(t);return}catch(n){}e.h.Ra(.25),e.g.Kd()!=0&&e.g.Rf(0)}function nx(e){var t=this;this.h=e,this.g=new Set,this.i=new on(function(){rx(t,!1)}).Ra(.25)}nx.prototype.release=function(){this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function rx(e,t){for(var n=m(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function hj(){this.g=null,this.h=[]}function d1(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function pj(e){function t(c){return{timestamp:c.timestamp,state:c.state,duration:c.duration}}for(var n=[],r=m(e.h),u=r.next();!u.done;u=r.next())n.push(t(u.value));return e.g&&n.push(t(e.g)),n}function gj(){this.i=this.h=null,this.g=[]}function h1(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function iv(){this.hc=this.Eg=this.A=this.B=this.I=this.C=this.s=this.j=this.H=this.m=this.i=this.T=this.X=this.L=this.N=this.O=this.l=this.o=NaN,this.K=0,this.F=this.G=NaN,this.g=new hj,this.h=new gj}function ov(e,t,n,r){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=r}function mj(e,t){e.l=t,e=m(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function fp(e,t,n){if(n=n===void 0?!1:n,e.i.segmentIndex&&(e.g||(e.g=e.i.segmentIndex.Ib(t,!0,e.o)),e.g)){for(n&&e.g.next();e.h.size<e.m&&(t=e.g.next().value,!!t);)n=!0,t.isPreload()&&t.va!=null&&(n=!1),t.Zb()==2&&(n=!1),n&&t.$&&ix(e,t.$),n&&!e.h.has(t)&&(n=new g1(e.l),sx(n,t,e.i),e.h.set(t,n));p1(e)}}function ix(e,t){if(e.i.segmentIndex&&!Array.from(e.j.keys()).some(function(r){return Ct(r,t)})){var n=new g1(e.l);sx(n,t,e.i),e.j.set(t,n)}}function ox(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&dp(e,n)}function nu(e){ox(e,e.h),ox(e,e.j),e.g=null}ov.prototype.Ga=function(e,t){t=t===void 0?!1:t;for(var n=m(this.h.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&dp(this,r);t&&p1(this)},ov.prototype.Tc=function(e){this.o=e,this.g&&this.g.Tc(e)};function p1(e){for(var t=Array.from(e.h.keys()),n=m(e.j.keys()),r=n.next(),u={};!r.done;u={nf:void 0},r=n.next())u.nf=r.value,t.some(function(c){return function(f){return Ct(f.$,c.nf)}}(u))||dp(e,u.nf)}function ax(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var r=n.pop();r&&dp(e,r)}p1(e)}function vj(e,t){t&&t!==e.i&&(nu(e),e.i=t)}function dp(e,t){var n=e.h;t instanceof Dn&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function g1(e){this.g=e,this.ce=this.Tf=null}function sx(e,t,n){var r=new Uint8Array(0);e.ce=e.g(t,n,function(u){return Ne(function(c){if(c.g==1)return 0<r.byteLength?r=hi(r,u):r=u,e.Tf?R(c,e.Tf(r),3):c.u(0);r=new Uint8Array(0),X(c)})})}g1.prototype.abort=function(){this.ce&&this.ce.abort()};function m1(e){Nr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new on(function(){for(var n=t.i(),r=m(t.g),u=r.next();!u.done;u=r.next())u=u.value,u.endTime<n.start&&(t.g.delete(u),u=new jn("regionremove",new Map([["region",u]])),t.dispatchEvent(u))}).Ra(2)}Y(m1,Nr),m1.prototype.release=function(){this.g.clear(),this.h.stop(),Nr.prototype.release.call(this)};function av(e){Nr.call(this),this.g=new Map,this.h=e}Y(av,Nr),av.prototype.release=function(){this.g.clear(),Nr.prototype.release.call(this)};function yj(e,t){var n=e.g.get(t);return n||(n={sd:[],Oe:null,contentType:t},e.g.set(t,n)),n}function Ej(e,t,n){var r=yj(e,t.contentType);_j(e,r),e={Kc:t,position:n},r=r.sd,t=r.findIndex(function(u){return u.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}av.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var r=n.Oe;e:{for(var u=n.sd,c=u.length-1;0<=c;c--){var f=u[c];if(f.position<=e){u=f.Kc;break e}}u=null}c=u&&!(r===u||r&&u&&r.bandwidth==u.bandwidth&&r.audioSamplingRate==u.audioSamplingRate&&r.codecs==u.codecs&&r.contentType==u.contentType&&r.frameRate==u.frameRate&&r.height==u.height&&r.mimeType==u.mimeType&&r.channelsCount==u.channelsCount&&r.pixelAspectRatio==u.pixelAspectRatio&&r.width==u.width),f=u&&r&&u.label&&r.label&&r.label!==u.label;var h=u&&r&&u.language&&r.language&&r.language!==u.language;r=u&&r&&u.roles&&r.roles&&!fn(r.roles,u.roles),(f||h||r)&&ux(this,e,u.contentType)&&(n.Oe=u,r=new jn("audiotrackchange",new Map([["quality",u],["position",e]])),this.dispatchEvent(r)),c&&ux(this,e,u.contentType)&&(n.Oe=u,JSON.stringify(u),n=new jn("qualitychange",new Map([["quality",u],["position",e]])),this.dispatchEvent(n))}};function ux(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function _j(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,u=t.sd;t.sd=u.filter(function(c,f){return!(c.position<=n&&f+1<u.length&&u[f+1].position<=n||c.position>=r)})}else t.sd=[]}function sv(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function uv(e){var t=Ra(e),n=t.split("/")[0];return e=Oo(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,vd:null,colorGamut:null,frameRate:null}}function Tj(e,t){function n(Fe){Ee=Fe.name;var $e=Fe.reader;$e.skip(24);var nt=$e.la(),ct=$e.la();$e.skip(50),B=String(nt),N=String(ct),Fe.reader.ra()&&W(Fe)}function r(Fe){var $e=ca(Fe.reader);z=$e.channelCount,J=$e.sampleRate,u(Fe.name)}function u(Fe){switch(Fe=Fe.toLowerCase(),Fe){case"avc1":case"avc3":f.push(Fe+".42E01E"),v=!0;break;case"hev1":case"hvc1":f.push(Fe+".1.6.L93.90"),v=!0;break;case"dvh1":case"dvhe":f.push(Fe+".05.04"),v=!0;break;case"vp09":f.push(Fe+".00.10.08"),v=!0;break;case"av01":f.push(Fe+".0.01M.08"),v=!0;break;case"mp4a":c.push("mp4a.40.2"),h=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":c.push(Fe),h=!0}}var c=[],f=[],h=!1,v=!1,A=null,N=null,B=null,z=null,J=null,fe=null,pe=null,Ee;if(new V().box("moov",W).box("trak",W).box("mdia",W).R("mdhd",function(Fe){A=Xa(Fe.reader,Fe.version).language}).box("minf",W).box("stbl",W).R("stsd",ee).box("mp4a",function(Fe){var $e=ca(Fe.reader);z=$e.channelCount,J=$e.sampleRate,Fe.reader.ra()?W(Fe):u(Fe.name)}).box("esds",function(Fe){Fe=Fe.reader;for(var $e="mp4a",nt,ct;Fe.ra();){nt=Fe.S();for(var gt=Fe.S();gt&128;)gt=Fe.S();if(nt==3)Fe.la(),gt=Fe.S(),gt&128&&Fe.la(),gt&64&&Fe.skip(Fe.S()),gt&32&&Fe.la();else if(nt==4)ct=Fe.S(),Fe.skip(12);else if(nt==5)break}ct&&($e+="."+xu(ct),nt==5&&Fe.ra()&&(nt=Fe.S(),ct=(nt&248)>>3,ct===31&&Fe.ra()&&(ct=32+((nt&7)<<3)+((Fe.S()&224)>>5)),$e+="."+ct)),c.push($e),h=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dva1",n).box("dvav",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("avcC",function(Fe){var $e=Ee||"";switch(Ee){case"dvav":$e="avc3";break;case"dva1":$e="avc1"}Fe=Fe.reader,Fe.skip(1),Fe=$e+"."+xu(Fe.S())+xu(Fe.S())+xu(Fe.S()),f.push(Fe),v=!0}).box("hvcC",function(Fe){var $e=Ee||"";switch(Ee){case"dvh1":$e="hvc1";break;case"dvhe":$e="hev1"}var nt=Fe.reader;nt.skip(1),Fe=nt.S();var ct=["","A","B","C"][Fe>>6],gt=Fe&31,Lt=nt.P(),It=(Fe&32)>>5?"H":"L";Fe=[nt.S(),nt.S(),nt.S(),nt.S(),nt.S(),nt.S()],nt=nt.S();for(var Ut=0,Nt=0;32>Nt&&(Ut|=Lt&1,Nt!=31);Nt++)Ut<<=1,Lt>>=1;for($e=$e+("."+ct+gt)+("."+xu(Ut,!0)),$e+="."+It+nt,ct="",gt=Fe.length;gt--;)((It=Fe[gt])||ct)&&(ct="."+It.toString(16).toUpperCase()+ct);$e+=ct,f.push($e),v=!0}).box("dvcC",function(Fe){var $e=Ee||"";switch(Ee){case"hvc1":$e="dvh1";break;case"hev1":$e="dvhe";break;case"avc1":$e="dva1";break;case"avc3":$e="dvav";break;case"av01":$e="dav1"}var nt=Fe.reader;nt.skip(2),Fe=nt.S(),nt=nt.S(),f.push($e+"."+ji(Fe>>1&127)+"."+ji(Fe<<5&32|nt>>3&31)),v=!0}).box("dvvC",function(Fe){var $e=Ee||"";switch(Ee){case"hvc1":$e="dvh1";break;case"hev1":$e="dvhe";break;case"avc1":$e="dva1";break;case"avc3":$e="dvav";break;case"av01":$e="dav1"}var nt=Fe.reader;nt.skip(2),Fe=nt.S(),nt=nt.S(),f.push($e+"."+ji(Fe>>1&127)+"."+ji(Fe<<5&32|nt>>3&31)),v=!0}).R("vpcC",function(Fe){var $e=Ee||"",nt=Fe.reader;Fe=nt.S();var ct=nt.S();nt=nt.S()>>4&15,f.push($e+"."+ji(Fe)+"."+ji(ct)+"."+ji(nt)),v=!0}).box("av1C",function(Fe){var $e=Ee||"";switch(Ee){case"dav1":$e="av01"}var nt=Fe.reader;nt.skip(1),Fe=nt.S(),nt=nt.S();var ct=Fe>>>5,gt=(nt&64)>>6;f.push($e+"."+ct+"."+ji(Fe&31)+(nt>>>7?"H":"M")+"."+ji(ct===2&&gt?(nt&32)>>5?12:10:gt?10:8)+"."+((nt&16)>>4)+"."+((nt&8)>>3)+((nt&4)>>2)+(nt&3)+"."+ji(1)+"."+ji(1)+"."+ji(1)+".0"),v=!0}).box("enca",re).box("encv",H).box("sinf",W).box("frma",function(Fe){Fe=ql(Fe.reader).codec,u(Fe)}).box("colr",function(Fe){f=f.map(function(ct){if(ct.startsWith("av01.")){var gt=Fe.reader,Lt=gt.xa(),It=gt.rb(4),Ut=String.fromCharCode(It[0]);if(Ut+=String.fromCharCode(It[1]),Ut+=String.fromCharCode(It[2]),Ut+=String.fromCharCode(It[3]),Ut==="nclx"){It=gt.la(),Ut=gt.la();var Nt=gt.la(),tn=gt.S()>>7,Ht=ct.split(".");Ht.length==10&&(Ht[6]=ji(It),Ht[7]=ji(Ut),Ht[8]=ji(Nt),Ht[9]=String(tn),ct=Ht.join("."))}gt.seek(Lt)}return ct});var $e=Qf(Fe.reader),nt=$e.colorGamut;fe=$e.vd,pe=nt}).parse(e||t,!0),!c.length&&!f.length)return null;var Oe=h&&!v,ke=new Map;if(v){var rt=new wt("video/mp4");for(e&&rt.init(e),rt.i(t),e=m(rt.j()),t=e.next();!t.done;t=e.next())t=t.value,ke.set(t,t);rt.g()}return{type:Oe?"audio":"video",mimeType:Oe?"audio/mp4":"video/mp4",codecs:v1(c.concat(f)).join(", "),language:A,height:N,width:B,channelCount:z,sampleRate:J,closedCaptions:ke,vd:fe,colorGamut:pe,frameRate:null}}function v1(e){var t=new Set,n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u=Ys(r);t.has(u)||(n.push(r),t.add(u))}return t=Qu("audio",n),r=Qu("video",n),e=Qu(_r,n),r=Sj(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function Sj(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?Ft('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function wj(e){var t=null;return new V().box("moov",W).box("trak",W).box("mdia",W).box("minf",W).box("stbl",W).R("stsd",ee).box("encv",H).box("enca",re).box("sinf",W).box("schi",W).R("tenc",function(n){n=n.reader,n.S(),n.S(),n.S(),n.S(),t=Ya(n.rb(16))}).parse(e,!0),t}function y1(e,t,n){var r,u,c,f,h;return Ne(function(v){if(v.g==1)return r=t,r.cryptoKey?v.u(2):R(v,r.fetchKey(),3);if(u=r.iv,!u)for(u=nr(new ArrayBuffer(16)),c=r.firstMediaSequenceNumber+n,f=u.byteLength-1;0<=f;f--)u[f]=c&255,c>>=8;return t.blockCipherMode=="CBC"?h={name:"AES-CBC",iv:u}:h={name:"AES-CTR",counter:u,length:64},v.return(g.crypto.subtle.decrypt(h,r.cryptoKey,e))})}function rd(e,t,n,r,u){return e=Bi(e,r,u),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function lx(e,t){var n=this;this.g=t,this.l=e,this.h=null,this.F=new Map,this.B=1,this.s=this.j=null,this.I=0,this.G=!1,this.i=new Map,this.C=!1,this.K=null,this.A=!1,this.m=new Zl(function(){return Aj(n)}),this.L=Date.now()/1e3,this.o=new Map,this.H={projection:null,hfov:null},this.O=0,this.N=1/0}p=lx.prototype,p.destroy=function(){return this.m.destroy()};function Aj(e){var t,n,r,u,c,f,h;return Ne(function(v){if(v.g==1){for(t=[],n=m(e.i.values()),r=n.next();!r.done;r=n.next())u=r.value,hp(u),t.push(pp(u)),u.V&&(nu(u.V),u.V=null);for(c=m(e.o.values()),f=c.next();!f.done;f=c.next())h=f.value,nu(h);return R(v,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.l=null,e.h=null,X(v)})}p.configure=function(e){if(this.h=e,this.K=new Qh({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.V&&(nu(t.V),t.V=null),t=m(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,nu(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(_r))&&t.V&&(nu(t.V),t.V=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.V&&(nu(t.V),t.V=null),t=m(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.V?(ax(n.V,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(nu(n.V),n.V=null)):0<e.segmentPrefetchLimit&&(n.V=_1(this,n.stream));e.disableAudioPrefetch||Mj(this)};function Ij(e,t,n){e.l.presentationTimeline.U()||(e.O=t,e.N=n)}p.start=function(e){var t=this;return Ne(function(n){if(n.g==1)return R(n,Nj(t,e||new Map),2);Zr(t.m),t.C=!0,X(n)})};function bj(e,t){var n,r,u,c,f,h;Ne(function(v){switch(v.g){case 1:return n=Mi,e.I++,r=e.I,ce(v,2),R(v,BR(e.g.ca,n.wa),4);case 4:ye(v,3);break;case 2:u=be(v),e.g&&e.g.onError(u);case 3:c=Di(t.mimeType,t.codecs),ev(e.g.ca,c,e.l.sequenceMode,t.external),f=e.g.ca.ba,(f.isTextVisible()||e.h.alwaysStreamText)&&e.I==r&&(h=fx(e,t),e.i.set(n.wa,h),Qa(e,h,0)),X(v)}})}function Cj(e){var t=e.i.get(_r);t&&(hp(t),pp(t).catch(function(){}),e.i.delete(_r)),e.s=null}function E1(e,t){for(var n=0>e.g.fb(),r=m(e.i.values()),u=r.next();!u.done;u=r.next())u=u.value,u.ma&&u.ma.Tc(n),u.V&&u.V.Tc(n);for(r=m(e.o.values()),u=r.next();!u.done;u=r.next())u.value.Tc(n);(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.bc&&(id(e,t,!1,0,!1),n.bc=r):(t=n.bc)&&(n.bc=null,id(e,t,!0,0,!1)))}function cx(e,t,n,r,u,c){n=n===void 0?!1:n,r=r===void 0?0:r,u=u===void 0?!1:u,c=c===void 0?!1:c,e.j=t,e.C&&(t.video&&id(e,t.video,n,r,u,c),t.audio&&id(e,t.audio,n,r,u,c))}function lv(e,t){Ne(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):R(n,t.createSegmentIndex(),2):n.return();id(e,t,!0,0,!1),X(n)})}function Rj(e,t){for(var n=m(e.F.entries()),r=n.next();!r.done;r=n.next()){var u=m(r.value);r=u.next().value,u=u.next().value,r.includes(t.type)&&(u(),e.F.delete(r))}}function id(e,t,n,r,u,c){var f=e.i.get(t.type);f||t.type!=_r?f&&(f.bc&&(t.trickModeVideo?(f.bc=t,t=t.trickModeVideo):f.bc=null),f.stream!=t||u)&&(e.o.has(t)?f.V=e.o.get(t):f.V&&vj(f.V,t),t.type==_r&&(u=Di(t.mimeType,t.codecs),ev(e.g.ca,u,e.l.sequenceMode,t.external)),!e.o.has(f.stream)&&f.stream.closeSegmentIndex&&(f.La?(u="("+f.type+":"+f.stream.id+")",e.F.has(u)||e.F.set(u,f.stream.closeSegmentIndex)):f.stream.closeSegmentIndex()),f.stream=t,f.ma=null,f.eg=!!c,n?f.Wc?f.ze=!0:f.La?(f.fc=!0,f.Ed=r,f.ze=!0):(hp(f),A1(e,f,!0,r).catch(function(h){e.g&&e.g.onError(h)})):f.La||f.ub||Qa(e,f,0),xj(e,f).catch(function(h){e.g&&e.g.onError(h)})):bj(e,t)}function xj(e,t){var n,r;return Ne(function(u){if(u.g==1)return t.jb?(n=t.stream,r=t.jb,n.segmentIndex?u.u(2):R(u,n.createSegmentIndex(),2)):u.return();if(t.jb!=r||t.stream!=n)return u.return();var c=e.g.Jd(),f=lp(e.g.ca,t.type),h=t.stream.segmentIndex.find(t.Na?t.Na.endTime:c),v=h==null?null:t.stream.segmentIndex.get(h);h=v&&v.va?v.va-v.Ha:null,v&&!h&&(h=(v.endTime-v.getStartTime())*(t.stream.bandwidth||0)/8),h?((v=v.$)&&(h+=(v.va?v.va-v.Ha:null)||0),v=e.g.getBandwidthEstimate(),c=8*h/v<(f||0)-c-Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal)||t.jb.h.g>h):c=!1,c&&t.jb.abort(),X(u)})}p.Rc=function(){if(this.g)for(var e=this.g.Jd(),t=m(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var u=this.g.ca;if(u.C?u=!1:r==_r?(u=u.g,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=Jf(u,r),u=Cn(u,e)),!u){if(n.V&&(n.V.g=null),n.type==="audio"){u=m(this.o.values());for(var c=u.next();!c.done;c=u.next())c.value.g=null}n.ma=null,(lp(this.g.ca,r)!=null||n.La)&&cv(this,n),n.jb&&(n.jb.abort(),n.jb=null),r===_r&&(r=this.g.ca,r.G&&r.G.g()),n.Rc=!0}}};function cv(e,t){t.Wc||t.fc||(t.La?(t.fc=!0,t.Ed=0):o1(e.g.ca,t.type)==null?t.ub==null&&Qa(e,t,0):(hp(t),A1(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function Nj(e,t){var n,r,u,c,f,h,v,A,N,B;return Ne(function(z){if(z.g==1){if(n=Mi,!e.j)throw new Ye(2,5,5006);return r=new Map,u=new Set,e.j.audio&&(r.set(n.Y,e.j.audio),u.add(e.j.audio)),e.j.video&&(r.set(n.ja,e.j.video),u.add(e.j.video)),e.s&&(r.set(n.wa,e.s),u.add(e.s)),c=e.g.ca,R(z,c.init(r,e.l.sequenceMode,e.l.type,e.l.ignoreManifestTimestampsInSegmentsMode),2)}for(Zr(e.m),e.updateDuration(),f=m(r.keys()),h=f.next();!h.done;h=f.next())v=h.value,A=r.get(v),e.i.has(v)||(N=fx(e,A),t.has(A.id)&&(B=t.get(A.id),mj(B,function(J,fe,pe){return fv(J,fe,pe||null,e.h.retryParameters,e.g.Mb)}),N.V=B),e.i.set(v,N),Qa(e,N,0));X(z)})}function fx(e,t){return{stream:t,type:t.type,ma:null,V:_1(e,t),Na:null,qc:null,Td:null,Sd:null,Rd:null,bc:null,endOfStream:!1,La:!1,ub:null,fc:!1,Ed:0,ze:!1,Wc:!1,Rc:!0,Hf:!1,ed:!1,jb:null}}function _1(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===_r&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===_r&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.V)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new ov(e.h.segmentPrefetchLimit,t,function(r,u,c){return fv(r,u,c||null,e.h.retryParameters,e.g.Mb)},0>e.g.fb()):null}function Mj(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r=m(e.l.variants),u=r.next(),c={};!u.done;c={mb:void 0},u=r.next())if(c.mb=u.value,c.mb.audio)if(e.o.has(c.mb.audio)){if(u=e.o.get(c.mb.audio),ax(u,t),!(0<t&&n.some(function(h){return function(v){return el(h.mb.audio.language,v)}}(c)))){var f=e.i.get(c.mb.audio.type);u!==(f&&f.V)&&nu(u),e.o.delete(c.mb.audio)}}else 0>=t||!n.some(function(h){return function(v){return el(h.mb.audio.language,v)}}(c))||!(u=_1(e,c.mb.audio))||(c.mb.audio.segmentIndex||c.mb.audio.createSegmentIndex(),e.o.set(c.mb.audio,u))}p.updateDuration=function(){var e=this.l.presentationTimeline.getDuration();1/0>e?this.g.ca.Za(e):this.g.ca.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function Dj(e,t){var n,r,u,c,f,h;return Ne(function(v){switch(v.g){case 1:if(Zr(e.m),t.La||t.ub==null||t.Wc)return v.return();if(t.ub=null,!t.fc){v.u(2);break}return R(v,A1(e,t,t.ze,t.Ed),3);case 3:return v.return();case 2:if(Rj(e,t),t.stream.segmentIndex){v.u(4);break}return n=t.stream,ce(v,5),R(v,t.stream.createSegmentIndex(),7);case 7:ye(v,6);break;case 5:return r=be(v),R(v,I1(e,t,r),8);case 8:return v.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.La||t.ub||Qa(e,t,0),v.return();case 4:ce(v,9),u=Pj(e,t),u!=null&&(Qa(e,t,u),t.ed=!1),ye(v,10);break;case 9:return c=be(v),R(v,I1(e,t,c),11);case 11:return v.return();case 10:if(f=Array.from(e.i.values()),!e.C||!f.every(function(A){return A.endOfStream})){v.u(0);break}return R(v,e.g.ca.endOfStream(),13);case 13:Zr(e.m),h=e.g.ca.getDuration(),h!=0&&h<e.l.presentationTimeline.getDuration()&&e.l.presentationTimeline.Za(h),X(v)}})}function Pj(e,t){if(S1(t))return J8(e.g.ca,t.stream.originalId||""),null;if(t.type==_r&&ej(e.g.ca),!e.g.ca.ta&&t.type!=_r)return e.h.updateIntervalSeconds/2;var n=e.g.Jd();if(t.type==="audio")for(var r=m(e.o.keys()),u=r.next();!u.done;u=r.next())u=e.o.get(u.value),u.Ga(n,!0),fp(u,n);r=t.Na?t.Na.endTime:n;var c=X8(e.g.ca,t.type,n),f=Math.max(1,Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),h=e.l.presentationTimeline.getDuration()-r;if(u=lp(e.g.ca,t.type),1e-6>h&&u)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(_r))&&S1(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,c>=f)return e.h.updateIntervalSeconds/2;if(f=!t.ma,u=Oj(e,t,n,u),!u)return e.h.updateIntervalSeconds;c=!1,f&&t.eg&&(c=!0,t.eg=!1),f=1/0,h=Array.from(e.i.values()),h=m(h);for(var v=h.next();!v.done;v=h.next())v=v.value,S1(v)||v.ma&&!v.ma.current()||(f=Math.min(f,v.Na?v.Na.endTime:n));return r>=f+e.l.presentationTimeline.h?e.h.updateIntervalSeconds:(t.V&&t.ma&&!e.o.has(t.stream)&&(t.V.Ga(u.startTime),fp(t.V,u.startTime)),Lj(e,t,n,u,c).catch(function(){}),null)}function Oj(e,t,n,r){if(t.ma)return t.ma.current();if(t.Na||r)return n=t.Na?t.Na.endTime:r,e=0>e.g.fb(),t.stream.segmentIndex&&(t.ma=t.stream.segmentIndex.Ib(n,!1,e)),t.ma&&t.ma.next().value;r=e.l.sequenceMode?0:e.h.inaccurateManifestTolerance;var u=Math.max(n-r,0);e=0>e.g.fb();var c=null;return r&&(t.stream.segmentIndex&&(t.ma=t.stream.segmentIndex.Ib(u,!1,e)),c=t.ma&&t.ma.next().value),c||(t.stream.segmentIndex&&(t.ma=t.stream.segmentIndex.Ib(n,!1,e)),c=t.ma&&t.ma.next().value),c}function Lj(e,t,n,r,u){var c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe;return Ne(function($e){switch($e.g){case 1:if(c=Mi,f=t.stream,h=t.ma,t.La=!0,ce($e,2),r.Zb()==2)throw new Ye(1,1,1011);return R($e,Uj(e,t,r,u),4);case 4:return Zr(e.m),e.A?$e.return():(v=f.mimeType=="video/mp4"||f.mimeType=="audio/mp4",A=g.ReadableStream,e.h.lowLatencyMode&&e.l.isLowLatency&&A&&v&&(e.l.type!="HLS"||r.m)?(z=new Uint8Array(0),fe=J=!1,Ee=function(nt){var ct,gt,Lt;return Ne(function(It){switch(It.g){case 1:if(J||(fe=!0,Zr(e.m),e.A))return It.return();if(ce(It,2),z=kj(z,nt),ct=!1,gt=0,new V().box("mdat",function(Ut){gt=Ut.size+Ut.start,ct=!0}).parse(z,!1,!0),!ct){It.u(4);break}return Lt=z.subarray(0,gt),z=z.subarray(gt),R(It,T1(e,t,n,f,r,Lt,!0,u),5);case 5:t.V&&t.ma&&fp(t.V,r.startTime,!0);case 4:ye(It,0);break;case 2:pe=be(It),X(It)}})},R($e,w1(e,t,r,Ee),9)):(N=w1(e,t,r),R($e,N,7)));case 7:return B=$e.h,Zr(e.m),e.A?$e.return():(Zr(e.m),t.fc?(t.La=!1,Qa(e,t,0),$e.return()):R($e,T1(e,t,n,f,r,B,!1,u),6));case 9:if(Oe=$e.h,pe)throw pe;if(fe){$e.u(10);break}return J=!0,Zr(e.m),e.A?$e.return():t.fc?(t.La=!1,Qa(e,t,0),$e.return()):R($e,T1(e,t,n,f,r,Oe,!1,u),10);case 10:t.V&&t.ma&&fp(t.V,r.startTime,!0);case 6:if(Zr(e.m),e.A)return $e.return();t.Na=r,h.next(),t.La=!1,t.Hf=!1,ke=e.g.ca.xb(),rt=ke[t.type],JSON.stringify(rt),t.fc||e.g.Bf(r,t.stream),Qa(e,t,0),ye($e,0);break;case 2:if(Fe=be($e),Zr(e.m,Fe),e.A)return $e.return();if(t.La=!1,Fe.code==7001)t.La=!1,hp(t),Qa(e,t,0),$e.u(0);else if(t.type==c.wa&&e.h.ignoreTextStreamFailures)e.i.delete(c.wa),$e.u(0);else if(Fe.code==3017)Fj(e,t,Fe),$e.u(0);else return t.ed=!0,Fe.category==1&&t.V&&dp(t.V,r),Fe.severity=2,R($e,I1(e,t,Fe),0)}})}function kj(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Fj(e,t,n){if(!Array.from(e.i.values()).some(function(u){return u!=t&&u.Hf})){if(e.g.disableStream(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else if(4<r)e.B-=.04;else{t.ed=!0,e.A=!0,e.g.onError(n);return}t.Hf=!0}Qa(e,t,4)}function Uj(e,t,n,r){var u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt;return Ne(function(Fe){switch(Fe.g){case 1:if(u=Mi,c=t.Na==null&&t.qc==null,f=[],h=Math.max(0,Math.max(n.appendWindowStart,e.O)-.1),v=Math.min(n.appendWindowEnd,e.N)+.01,A=n.codecs||t.stream.codecs,N=Ys(A),B=Ra(n.mimeType||t.stream.mimeType),z=n.timestampOffset,z==t.Td&&h==t.Sd&&v==t.Rd&&N==t.uf&&B==t.vf){Fe.u(2);break}if(J=t.uf&&t.vf&&sj(e.g.ca,t.type,B,A),!J){Fe.u(3);break}if(fe=null,t.type===u.ja?fe=e.i.get(u.Y):t.type===u.Y&&(fe=e.i.get(u.ja)),!fe){Fe.u(3);break}return R(Fe,pp(fe).catch(function(){}),5);case 5:fe.qc=null,cv(e,fe);case 3:return R(Fe,dx(e,t,z,h,v,n,N,B),2);case 2:return Ct(n.$,t.qc)||(t.qc=n.$,n.l&&n.$&&(pe=w1(e,t,n.$),Ee=function(){var $e,nt,ct,gt,Lt,It,Ut;return Ne(function(Nt){switch(Nt.g){case 1:return ce(Nt,2),R(Nt,pe,4);case 4:return $e=Nt.h,Zr(e.m),nt=null,ct=new Map,gt={projection:null,hfov:null},Lt=new V,Lt.box("moov",W).box("trak",W).box("mdia",W).R("mdhd",function(tn){nt=Xa(tn.reader,tn.version).timescale}).box("hdlr",function(tn){switch(tn=tn.reader,tn.skip(8),tn.sc()){case"soun":ct.set(u.Y,nt);break;case"vide":ct.set(u.ja,nt)}nt=null}).box("minf",W).box("stbl",W).R("stsd",ee).box("encv",H).box("avc1",H).box("avc3",H).box("hev1",H).box("hvc1",H).box("dvav",H).box("dva1",H).box("dvh1",H).box("dvhe",H).box("dvc1",H).box("dvi1",H).box("vexu",W).box("proj",W).R("prji",function(tn){tn=tn.reader.sc(),gt.projection=tn}).box("hfov",function(tn){tn=tn.reader.P()/1e3,gt.hfov=tn}).parse($e),Zj(e,gt),ct.has(t.type)?n.$.timescale=ct.get(t.type):nt!=null&&(n.$.timescale=nt),It=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,R(Nt,e.g.hg(t.type,$e),5);case 5:return R(Nt,tv(e.g.ca,t.type,$e,null,t.stream,It,t.Rc,r),6);case 6:ye(Nt,0);break;case 2:throw Ut=be(Nt),t.qc=null,Ut}})},Oe=n.startTime,c&&(ke=lp(e.g.ca,t.type),ke!=null&&(Oe=ke)),e.g.yi(Oe,n.$),f.push(Ee()))),e.l.sequenceMode&&(rt=t.Na?t.Na.i:null,n.i!=rt&&f.push(nj(e.g.ca,t.type,n.startTime))),R(Fe,Promise.all(f),0)}})}function dx(e,t,n,r,u,c,f,h){var v,A,N,B;return Ne(function(z){if(z.g==1)return v=Mi,A=new Map,e.j.audio&&A.set(v.Y,e.j.audio),e.j.video&&A.set(v.ja,e.j.video),ce(z,2),t.Sd=r,t.Rd=u,f&&(t.uf=f),h&&(t.vf=h),t.Td=n,N=e.l.sequenceMode||e.l.type=="HLS",R(z,tj(e.g.ca,t.type,n,r,u,N,c.mimeType||t.stream.mimeType,c.codecs||t.stream.codecs,A),4);if(z.g!=2)return ye(z,0);throw B=be(z),t.Sd=null,t.Rd=null,t.uf=null,t.vf=null,t.Td=null,B})}function T1(e,t,n,r,u,c,f,h){f=f===void 0?!1:f,h=h===void 0?!1:h;var v,A,N,B,z,J,fe,pe;return Ne(function(Ee){switch(Ee.g){case 1:return v=r.closedCaptions&&0<r.closedCaptions.size,N=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,B=e.h.parsePrftBox&&!e.G,z=r.mimeType=="video/mp4"||r.mimeType=="audio/mp4",J=null,u.$&&(J=u.$.timescale),fe=z&&J&&r.type==="video"&&e.l.type=="DASH"&&e.h.shouldFixTimestampOffset,(N||B||fe)&&(A=new V),N&&A.R("emsg",function(Oe){var ke=r.emsgSchemeIdUris;if(Oe.version===0)var rt=Oe.reader.sc(),Fe=Oe.reader.sc(),$e=Oe.reader.P(),nt=Oe.reader.P(),ct=Oe.reader.P(),gt=Oe.reader.P(),Lt=u.startTime+nt/$e;else $e=Oe.reader.P(),Lt=Oe.reader.Pc()/$e+u.timestampOffset,nt=Lt-u.startTime,ct=Oe.reader.P(),gt=Oe.reader.P(),rt=Oe.reader.sc(),Fe=Oe.reader.sc();Oe=Oe.reader.rb(Oe.reader.getLength()-Oe.reader.xa()),(ke&&ke.includes(rt)||e.h.dispatchAllEmsgBoxes)&&(rt=="urn:mpeg:dash:event:2012"?e.g.zi():(ke=Lt+ct/$e,$e=new Map().set("detail",{startTime:Lt,endTime:ke,schemeIdUri:rt,value:Fe,timescale:$e,presentationTimeDelta:nt,eventDuration:ct,id:gt,messageData:Oe}),$e=new jn("emsg",$e),$e.cancelable=!0,e.g.onEvent($e),!$e.defaultPrevented&&(rt=="https://aomedia.org/emsg/ID3"||rt=="https://developer.apple.com/streaming/emsg-id3")&&(rt=la(Oe),rt.length)&&e.g.onMetadata([{cueTime:Lt,data:Oe,frames:rt,dts:Lt,pts:Lt}],0,ke)))}),B&&A.R("prft",function(Oe){if(!e.G&&u.$.timescale){var ke=Oe.reader,rt=Oe.version;ke.P(),Oe=ke.P();var Fe=ke.P();Oe=1e3*Oe+Fe/Math.pow(2,32)*1e3,rt===0?ke=ke.P():(rt=ke.P(),ke=ke.P(),ke=rt*Math.pow(2,32)+ke),Oe=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+Oe).getTime(),ke=new Map().set("detail",{wallClockTime:Oe,programStartDate:new Date(Oe-ke/u.$.timescale*1e3)}),ke=new jn("prft",ke),e.g.onEvent(ke),e.G=!0}}),fe&&A.box("moof",W).box("traf",W).R("tfdt",function(Oe){var ke,rt,Fe,$e,nt,ct;return Ne(function(gt){return ke=To(Oe.reader,Oe.version),rt=ke.baseMediaDecodeTime,rt?(Fe=-rt/J,$e=Number(t.Td)||0,$e<Fe?(nt=t.Sd,ct=t.Rd,R(gt,dx(e,t,Fe,nt,ct,u),0)):gt.u(0)):gt.return()})}),(N||B||fe)&&A.parse(c,!1,f),R(Ee,Bj(e,t,n),2);case 2:return Zr(e.m),pe=t.Rc,t.Rc=!1,R(Ee,e.g.hg(t.type,c),3);case 3:return R(Ee,tv(e.g.ca,t.type,c,u,r,v,pe,h,f),4);case 4:Zr(e.m),X(Ee)}})}function Bj(e,t,n){var r,u,c,f,h;return Ne(function(v){if(v.g==1)return r=t.stream.segmentIndex,r instanceof Ti&&r.Ga(e.l.presentationTimeline.Jb()),u=Math.max(e.h.bufferBehind,e.l.presentationTimeline.h),c=o1(e.g.ca,t.type),c==null?v.return():(f=n-c,h=f-u,h<=e.h.evictionGoal?v.return():R(v,e.g.ca.remove(t.type,c,c+h),2));Zr(e.m),X(v)})}function S1(e){return e&&e.type==_r&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function w1(e,t,n,r){var u,c,f,h,v;return Ne(function(A){switch(A.g){case 1:if(u=n.cd())return A.return(u);if(c=null,t.V){var N=t.V,B=N.h;n instanceof Dn&&(B=N.j),B.has(n)?(N=B.get(n),r&&(N.Tf=r),c=N.ce):c=null}return c||(c=fv(n,t.stream,r||null,e.h.retryParameters,e.g.Mb)),f=0,t.ma&&(f=t.ma.h),t.jb=c,R(A,c.promise,2);case 2:if(h=A.h,t.jb=null,v=h.data,!n.aesKey){A.u(3);break}return R(A,y1(v,n.aesKey,f),4);case 4:v=A.h;case 3:return A.return(v)}})}function fv(e,t,n,r,u,c){c=c===void 0?!1:c;var f=e instanceof Qe?e:void 0,h=f?1:0;return e=rd(e.M(),e.Ha,e.va,r,n),e.contentType=t.type,u.request($a,e,{type:h,stream:t,segment:f,isPreload:c})}function A1(e,t,n,r){var u,c;return Ne(function(f){if(f.g==1)return t.fc=!1,t.ze=!1,t.Ed=0,t.Wc=!0,t.Na=null,t.ma=null,t.V&&!e.o.has(t.stream)&&nu(t.V),r?(u=e.g.Jd(),c=e.g.ca.getDuration(),R(f,e.g.ca.remove(t.type,u+r,c),3)):R(f,BR(e.g.ca,t.type),4);if(f.g!=3)return Zr(e.m),n?R(f,e.g.ca.flush(t.type),3):f.u(3);Zr(e.m),t.Wc=!1,t.endOfStream=!1,t.La||t.ub||Qa(e,t,0),X(f)})}function Qa(e,t,n){var r=t.type;(r!=_r||e.i.has(r))&&(t.ub=new vn(function(){var u;return Ne(function(c){if(c.g==1)return ce(c,2),R(c,Dj(e,t),4);if(c.g!=2)return ye(c,0);u=be(c),e.g&&e.g.onError(u),X(c)})}).Z(n))}function hp(e){e.ub!=null&&(e.ub.stop(),e.ub=null)}function pp(e){return Ne(function(t){return e.jb?R(t,e.jb.abort(),0):t.u(0)})}function I1(e,t,n){var r;return Ne(function(u){if(u.g==1)return R(u,Vm(e.K),2);if(Zr(e.m),n.category===1){if(t.bc)return E1(e,!1),u.return();r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,r),n.handled&&(n.severity=1)}(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),X(u)})}function jj(e){var t,n,r,u,c,f;return Ne(function(h){return h.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.L<n?h.return(!1):(e.L=t,r=Mi,(u=e.i.get(r.Y))&&(u.qc=null,cv(e,u),pp(u).catch(function(){})),(c=e.i.get(r.ja))&&(c.qc=null,cv(e,c),pp(c).catch(function(){})),f=new Map,e.j.audio&&f.set(r.Y,e.j.audio),e.j.video&&f.set(r.ja,e.j.video),R(h,ZR(e.g.ca,f),2))):h.return(!0)})}function Zj(e,t){if(e.H.projection!=t.projection||e.H.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new jn("spatialvideoinfo",n)}else n=new jn("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.H=t}}function dv(){}function b1(e,t,n,r,u){var c=u in r,f=c?n.constructor==Object&&Object.keys(r).length==0:n.constructor==Object&&Object.keys(n).length==0,h=c||f,v=!0,A;for(A in t){var N=u+"."+A,B=c?r[u]:n[A];h||A in n?t[A]===void 0?B===void 0||h?delete e[A]:e[A]=Ia(B):f?e[A]=t[A]:B.constructor==Object&&t[A]&&t[A].constructor==Object?(e[A]||(e[A]=Ia(B)),N=b1(e[A],t[A],B,r,N),v=v&&N):typeof t[A]!=typeof B||t[A]==null||typeof t[A]!="function"&&t[A].constructor!=B.constructor?(de("Invalid config, wrong type for "+N),v=!1):(typeof n[A]=="function"&&n[A].length!=t[A].length&&He("Unexpected number of arguments for "+N),e[A]=t[A]):(de("Invalid config, unrecognized key "+N),v=!1)}return v}function hv(e,t){for(var n={},r=n,u=0,c=0;u=e.indexOf(".",u),!(0>u);)(u==0||e[u-1]!="\\")&&(c=e.substring(c,u).replace(/\\\./g,"."),r[c]={},r=r[c],c=u+1),u+=1;return r[e.substring(c).replace(/\\\./g,".")]=t,n}function od(e,t){return e&&t}function hx(e,t){function n(f){for(var h=m(Object.keys(f)),v=h.next();!v.done;v=h.next())v=v.value,c(f[v])&&Object.keys(f[v]).length===0||u(f[v])||typeof f[v]=="function"?delete f[v]:c(f[v])&&(n(f[v]),Object.keys(f[v]).length===0&&delete f[v])}function r(f,h){return Object.keys(f).reduce(function(v,A){var N=f[A];return h.hasOwnProperty(A)?c(N)&&c(h[A])?(N=r(N,h[A]),(0<Object.keys(N).length||!c(N))&&(v[A]=N)):u(N)&&u(h[A])||Number.isNaN(N)&&Number.isNaN(h[A])||N!==h[A]&&(v[A]=N):v[A]=N,v},{})}function u(f){return Array.isArray(f)&&f.length===0}function c(f){return f&&typeof f=="object"&&!Array.isArray(f)}return e=r(e,t),n(e),e}ne("shaka.util.ConfigUtils",dv),dv.getDifferenceFromConfigObjects=hx,dv.convertToConfigObject=hv,dv.mergeConfigObjects=b1;function Ja(){}function px(e){return e=Br(e),new Ei(e).Db}function gp(e,t,n){function r(h){ln(c).setUint32(f,h.byteLength,!0),f+=4,c.set(nr(h),f),f+=h.byteLength}if(!n||!n.byteLength)throw new Ye(2,6,6015);var u;typeof t=="string"?u=yo(t,!0):u=t,e=Br(e),e=yo(e,!0);var c=new Uint8Array(12+e.byteLength+u.byteLength+n.byteLength),f=0;return r(e),r(u),r(n),c}function gx(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Br(e).split("skd://").pop(),gp(e,n,t))}function C1(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}ne("shaka.util.FairPlayUtils",Ja),Ja.commonFairPlayResponse=function(e,t){if(e===2){try{var n=Cr(t.data)}catch(u){return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(u){}e&&(t.data=Ni(Wo(n)))}},Ja.expressplayFairPlayRequest=function(e,t){C1(e,t)},Ja.conaxFairPlayRequest=function(e,t){C1(e,t)},Ja.ezdrmFairPlayRequest=function(e,t){C1(e,t)},Ja.verimatrixFairPlayRequest=function(e,t){e===2&&(e=nr(t.body),e=ws(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=bi("spc="+e))},Ja.expressplayInitDataTransform=function(e,t,n){return gx(e,t,n)},Ja.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Br(e).split("skd://").pop().split("?").shift(),n=g.atob(n);var r=new ArrayBuffer(2*n.length);r=Zu(r);for(var u=0,c=n.length;u<c;u++)r[u]=n.charCodeAt(u);return gp(e,r,t)},Ja.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Br(e).split(";").pop(),gp(e,n,t))},Ja.verimatrixInitDataTransform=function(e,t,n){return gx(e,t,n)},Ja.initDataTransform=gp,Ja.defaultGetContentId=px,Ja.isFairPlaySupported=function(){var e;return Ne(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ce(t,2),R(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(be(t),t.return(!1))})};function R1(){}function ad(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:ua(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(N,B,z){return Tr()&&B=="skd"&&(B=z.serverCertificate,z=px(N),N=gp(N,z,B)),N},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Rr(),minHdcpVersion:"",ignoreDuplicateInitData:!ni()};(Rr()||Ri())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;ni()||Ui()||sn("Tizen 4")||sn("Tizen 5")||sn("Tizen 6")||vi()||li()&&ys()===53||li()&&ys()===68||!(!ri()||ri()&&Gu()||ri()&&sn("Fuchsia"))||xl()&&xr()||(n="smooth",r=!0),r={retryParameters:ua(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:pv,manifestPreprocessorTXml:gv,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:!(Ui()||ni()||vi()||Ri()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:pv,manifestPreprocessorTXml:gv,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var u={retryParameters:ua(),failureCallback:function(N){return od([N])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:.01,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:Ri()||Yo(),dontChooseCodecs:!1,shouldFixTimestampOffset:li()||di()};(li()||di()||ri()||qu())&&(u.stallSkip=0),di()&&(u.gapPadding=2);var c={trackSelectionCallback:function(N){return Ne(function(B){return B.return(N)})},downloadSizeCallback:function(N){var B;return Ne(function(z){return z.g==1?navigator.storage&&navigator.storage.estimate?R(z,navigator.storage.estimate(),3):z.return(!0):(B=z.h,z.return(B.usage+N<.95*B.quota))})},progressCallback:function(N,B){return od([N,B])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:Ao()?.5:0,preferNetworkInformationBandwidth:!1},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(N){return od([N],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(N,B){return od([N,B])}};var f=!1,h=!1,v=!0;Hu()&&(h=f=!0,v=!1);var A={drm:t,manifest:r,streaming:u,mediaSource:n,offline:c,abrFactory:function(){return new ii},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:f,skipPlayDetection:h,supportsMultipleMediaElements:v}};return c.trackSelectionCallback=function(N){return Ne(function(B){return B.return(qj(N,A.preferredAudioLanguage,A.preferredVideoHdrLevel))})},A}function Gl(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return b1(e,t,n||ad(),r,"")}function qj(e,t,n){var r=n;r=="AUTO"&&(r=g.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var u=e.filter(function(h){return!(h.type!="variant"||h.hdr&&h.hdr!=r)});n=[];var c=Rc(t,u.map(function(h){return h.language}));c&&(n=u.filter(function(h){return Or(h.language)==c})),n.length==0&&(n=u.filter(function(h){return h.primary})),n.length==0&&(u.map(function(h){return h.language}),n=u);var f=n.filter(function(h){return h.height&&480>=h.height});for(f.length&&(f.sort(function(h,v){return v.height-h.height}),n=f.filter(function(h){return h.height==f[0].height})),t=[],n.length&&(u=Math.floor(n.length/2),n.sort(function(h,v){return h.bandwidth-v.bandwidth}),t.push(n[u])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=_r&&n.type!="image"||t.push(n);return t}function pv(e){return od([e],e)}function gv(e){return od([e],e)}ne("shaka.util.PlayerConfiguration",R1),R1.mergeConfigObjects=Gl,R1.createDefault=ad;function ul(e,t,n,r){Nr.call(this),this.N=e,this.X=t,this.za=r.networkingEngine,this.B=n,this.o=null,this.ta=0,this.Ta=r.Bc,this.F=r.si,this.bb=r.ti,this.g=r.config,this.j=this.G=this.h=null,this.fa=!1,this.H=r.Di,this.ka=!1,this.l=null,this.ea=!1,this.i=this.C=null,this.ba=!1,this.L=new Map,this.oa=!1,this.Ea=r.Ci,this.aa=new iv,this.m=new Lr,this.O=null,this.s=!1,this.Fa=r.wh,this.ga=null,this.Da=r.vh,this.T=!1,this.K=[],this.I=[],this.A=!0}Y(ul,Nr);function mp(e,t,n){(e=t?e.I:e.K)?e.push(n):n()}function Gj(e){if(e.I)for(var t=m(e.I),n=t.next();!n.done;n=t.next())n=n.value,n();e.I=null}function mx(e,t){if(e.O=t,e.T=!0,e.K){t=m(e.K);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.K=null}p=ul.prototype,p.getStartTime=function(){return this.B},p.Gc=function(){return this.N},p.gf=function(){return this.h};function Hj(e){return e.ba=!0,e.i}function Vj(e){return e.fa=!0,e.j}function Kj(e){return e.ka=!0,e.H}p.getStats=function(){return this.aa};function zj(e){return e.ea=!0,e.l}function Yj(e){return e.oa=!0,e.L}p.start=function(){var e=this;(function(){var t;return Ne(function(n){switch(n.g){case 1:return R(n,Promise.resolve(),2);case 2:return ce(n,3),R(n,Wj(e),5);case 5:return vp(e),R(n,$j(e),6);case 6:if(vp(e),e.o||(e.o=new jl(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups)),e.Da){var r=e.g.abrFactory;e.C=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Fa){r=e.h.presentationTimeline.U();var u=Kf(e.h.variants);u=e.o.create(u),e.i.configure(e.g.abr),e.i.setVariants(Array.from(u.values())),(u=e.i.chooseVariant())&&(e.ga=u,u.video&&vx(e,u.video,r),u.audio&&vx(e,u.audio,r))}return R(n,void 0,7);case 7:vp(e),e.m.resolve(),ye(n,0);break;case 3:t=be(n),e.m.reject(t),X(n)}})})()},p.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):Nr.prototype.dispatchEvent.call(this,e)},p.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var t=new Map().set("detail",e);t=new jn("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function vp(e){if(e.s)throw new Ye(2,7,7003)}function x1(e,t){e.dispatchEvent(new jn("onstatechange",new Map().set("state",t)))}function Wj(e){var t,n,r,u;return Ne(function(c){if(c.g==1)return x1(e,"manifest-parser"),e.j||(e.G=qn(e.N,e.X),e.j=e.G(),e.j.configure(e.g.manifest,function(){return e.A})),t=Date.now()/1e3,x1(e,"manifest"),e.h?c.u(2):R(c,e.j.start(e.N,e.bb),3);if(c.g!=2&&(e.h=c.h),n=new jn("manifestparsed",void 0),e.dispatchEvent(n),e.h.variants.length==0)throw new Ye(2,4,4036);Xj(e.h),r=Date.now()/1e3,u=r-t,e.aa.H=u,X(c)})}function $j(e){var t,n,r,u,c;return Ne(function(f){switch(f.g){case 1:if(x1(e,"drm-engine"),e.ta=Date.now()/1e3,e.l=e.Ta(),e.F.g=e.l,e.l.configure(e.g.drm,function(){return e.A}),t=en(e.F,e.h),!t){f.u(2);break}return n=new jn("trackschanged",void 0),R(f,Promise.resolve(),3);case 3:vp(e),e.dispatchEvent(n);case 2:return r=Kf(e.h.variants),R(f,Le(e.l,r,e.h.offlineSessionIds),4);case 4:return vp(e),R(f,bt(e.F,e.h),5);case 5:if(u=f.h,!u){f.u(0);break}return c=new jn("trackschanged",void 0),R(f,Promise.resolve(),7);case 7:e.dispatchEvent(c),X(f)}})}p.configure=function(e,t){e=hv(e,t),Gl(this.g,e)},p.getConfiguration=function(){return Ia(this.g)};function vx(e,t,n){var r,u,c,f,h;Ne(function(v){if(v.g==1)return r=e.g.streaming.segmentPrefetchLimit||2,u=new ov(r,t,function(A,N,B){return fv(A,N,B||null,e.g.streaming.retryParameters,e.za,e.A)},!1),e.L.set(t.id,u),R(v,t.createSegmentIndex(),2);c=e.B||0,(h=(f=t.segmentIndex.Ib(c))?f.current():null)||(h=tu(t.segmentIndex)),h&&(n?h.$&&ix(u,h.$):fp(u,h.startTime)),X(v)})}p.dj=function(){return this.m},p.destroy=function(){var e=this,t,n,r;return Ne(function(u){switch(u.g){case 1:if(e.s=!0,!e.j||e.fa){u.u(2);break}return R(u,e.j.stop(),2);case 2:if(!e.i||e.ba){u.u(4);break}return R(u,e.i.stop(),4);case 4:if(e.H&&!e.ka&&e.H.release(),!e.l||e.ea){u.u(6);break}return R(u,e.l.destroy(),6);case 6:if(0<e.L.size&&!e.oa)for(t=m(e.L.values()),n=t.next();!n.done;n=t.next())r=n.value,nu(r);X(u)}})};function Xj(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}ne("shaka.media.PreloadManager",ul),ul.prototype.destroy=ul.prototype.destroy,ul.prototype.waitForFinish=ul.prototype.dj;function mv(e,t){Nr.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{zc:null,yc:sd,oc:function(r,u){return Oc(n,"enter",r,u)}},{zc:yp,yc:sd,oc:function(r,u){return Oc(n,"enter",r,u)}},{zc:Ep,yc:sd,oc:function(r,u){return Oc(n,"enter",r,u)}},{zc:sd,yc:yp,oc:function(r,u){return Oc(n,"exit",r,u)}},{zc:sd,yc:Ep,oc:function(r,u){return Oc(n,"exit",r,u)}},{zc:yp,yc:Ep,oc:function(r,u){return Oc(n,"skip",r,u)}},{zc:Ep,yc:yp,oc:function(r,u){return Oc(n,"skip",r,u)}}],this.h=new Et,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}Y(mv,Nr),mv.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Nr.prototype.release.call(this)},mv.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var u=this.g.get(r),c=e<r.startTime?yp:e>r.endTime?Ep:sd;this.g.set(r,c);for(var f=m(this.m),h=f.next();!h.done;h=f.next())h=h.value,h.zc==u&&h.yc==c&&h.oc(r,t)}}};function Oc(e,t,n,r){t=new jn(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var yp=1,sd=2,Ep=3;function vv(e,t,n){var r,u,c,f,h,v,A;return Ne(function(N){switch(N.g){case 1:var B=new Ei(e).Pa.split("/").pop().split(".");return r=B.length==1?"":B.pop().toLowerCase(),(u=Qj[r])?N.return(u):(c=0,f=Bi([e],n),ce(N,2),f.method="HEAD",R(N,t.request(c,f).promise,4));case 4:h=N.h,u=h.headers["content-type"],ye(N,3);break;case 2:if(v=be(N),!v||v.code!=1002&&v.code!=1001){N.u(3);break}return f.method="GET",R(N,t.request(c,f).promise,6);case 6:A=N.h,u=A.headers["content-type"];case 3:return N.return(u?u.toLowerCase().split(";").shift():"")}})}var Qj={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"};function yx(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(f){return yx(f,e)}).join("");if(!e.payload)return e.payload;var n=[],r=e.fontWeight>=Yu,u=e.fontStyle==wu,c=e.textDecoration.includes(Ks);return r&&n.push(["b"]),u&&n.push(["i"]),c&&n.push(["u"]),u=e.color,u==""&&t&&(u=t.color),r="",(u=Ex(u))&&(r+="."+u),u=e.backgroundColor,u==""&&t&&(u=t.backgroundColor),(t=Ex(u))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(f,h){var v=m(h);return h=v.next().value,v=v.next().value,"<"+h+(v===void 0?"":v)+">"+f+"</"+h+">"},e.payload)}function Ex(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function N1(e,t){var n=[];e=m(_x(e));for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,T(N1(r.nestedCues,r)));else{var u=r.clone();u.nestedCues=[],u.payload=yx(r,t),n.push(u)}return n}function _x(e){var t=[];e=m(e);for(var n=e.next(),r={};!n.done;r={Le:void 0},n=e.next())r.Le=n.value,t.some(function(u){return function(c){return Sf(u.Le,c)}}(r))||t.push(r.Le);return t}function Jj(e){function t(r){for(var u=5381,c=r.length;c;)u=33*u^r.charCodeAt(--c);return(u>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch(r){}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function e5(e){if(e.endTime===1/0||e.endTime<e.startTime)return null;var t=new jr(e.startTime,e.endTime,e.text);return t.line=typeof e.line=="number"?e.line:null,e.lineAlign&&(t.lineAlign=e.lineAlign),t.lineInterpretation=e.snapToLines?Pl:1,t.position=typeof e.position=="number"?e.position:null,e.positionAlign&&(t.positionAlign=e.positionAlign),t.size=e.size,t.textAlign=e.align,e.vertical==="lr"?t.writingMode="vertical-lr":e.vertical==="rl"&&(t.writingMode="vertical-rl"),e.region&&(t.region.id=e.region.id,t.region.height=e.region.lines,t.region.heightUnits=2,t.region.regionAnchorX=e.region.regionAnchorX,t.region.regionAnchorY=e.region.regionAnchorY,t.region.scroll=e.region.scroll,t.region.viewportAnchorX=e.region.viewportAnchorX,t.region.viewportAnchorY=e.region.viewportAnchorY,t.region.viewportAnchorUnits=wn,t.region.width=e.region.width,t.region.widthUnits=wn),wf(t),t}function fa(e,t){this.g=null;for(var n=m(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.kind!=="metadata"&&r.kind!=="chapters"&&(r.mode="disabled",r.label==t&&(this.g=r));this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}p=fa.prototype,p.configure=function(){},p.remove=function(e,t){return this.g?(Tx(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},p.append=function(e){var t=N1(e),n=[];e=this.g.cues?Array.from(this.g.cues):[],t=m(t);for(var r=t.next(),u={};!r.done;u={Ic:void 0},r=t.next())u.Ic=r.value,!e.some(function(c){return function(f){return f.startTime==c.Ic.startTime&&f.endTime==c.Ic.endTime&&f.text==c.Ic.payload}}(u))&&u.Ic.payload&&(r=Jj(u.Ic))&&n.push(r);for(e=n.slice().sort(function(c,f){return c.startTime!=f.startTime?c.startTime-f.startTime:c.endTime!=f.endTime?c.endTime-f.startTime:"line"in VTTCue.prototype?n.indexOf(f)-n.indexOf(c):n.indexOf(c)-n.indexOf(f)}),e=m(e),t=e.next();!t.done;t=e.next())this.g.addCue(t.value)},p.destroy=function(){return this.g&&(Tx(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},p.isTextVisible=function(){return this.g.mode=="showing"},p.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function Tx(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=m(Array.from(e.cues)),u=r.next();!u.done;u=r.next())(u=u.value)&&t(u)&&e.removeCue(u);e.mode=n}ne("shaka.text.SimpleTextDisplayer",fa),fa.prototype.setTextVisibility=fa.prototype.setTextVisibility,fa.prototype.isTextVisible=fa.prototype.isTextVisible,fa.prototype.destroy=fa.prototype.destroy,fa.prototype.append=fa.prototype.append,fa.prototype.remove=fa.prototype.remove,fa.prototype.configure=fa.prototype.configure;function da(){}p=da.prototype,p.configure=function(){},p.remove=function(){},p.append=function(){},p.destroy=function(){},p.isTextVisible=function(){return!1},p.setTextVisibility=function(){},ne("shaka.text.StubTextDisplayer",da),da.prototype.setTextVisibility=da.prototype.setTextVisibility,da.prototype.isTextVisible=da.prototype.isTextVisible,da.prototype.destroy=da.prototype.destroy,da.prototype.append=da.prototype.append,da.prototype.remove=da.prototype.remove,da.prototype.configure=da.prototype.configure;function Sx(){}function ud(e){for(;e.firstChild;)e.removeChild(e.firstChild)}ne("shaka.util.Dom",Sx),Sx.removeAllChildren=ud;function ha(e,t,n){var r=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||gr("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new on(function(){r.A.paused||ld(r)}).Ra(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Et,this.j.D(document,"fullscreenchange",function(){ld(r,!0)}),this.j.D(this.A,"seeking",function(){ld(r,!0)}),this.j.D(this.A,"resize",function(){var u=r.A,c=u.videoWidth;u=u.videoHeight,c&&u?r.l=c/u:r.l=null}),this.o=null,"ResizeObserver"in g&&(this.o=new ResizeObserver(function(){ld(r,!0)}),this.o.observe(this.g)),this.B=new Map}p=ha.prototype,p.configure=function(e){this.C&&this.C.Ra(e.captionsUpdatePeriod)},p.append=function(e){var t=[].concat(T(this.h));e=m(_x(e));for(var n=e.next(),r={};!n.done;r={Me:void 0},n=e.next())r.Me=n.value,t.some(function(u){return function(c){return Sf(c,u.Me)}}(r))||this.h.push(r.Me);ld(this)},p.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},p.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),ld(this,n>this.h.length),!0},p.isTextVisible=function(){return this.m},p.setTextVisibility=function(e){this.m=e};function t5(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function wx(e,t,n,r,u){var c=!1,f=[],h=[];t=m(t);for(var v=t.next();!v.done;v=t.next()){v=v.value,u.push(v);var A=e.i.get(v),N=v.startTime<=r&&v.endTime>r,B=A?A.oh:null;A&&(f.push(A.Ne),A.uc&&f.push(A.uc),N||(c=!0,e.i.delete(v),A=null)),N&&(h.push(v),A?t5(e,B)||(c=!0):(n5(e,v,u),A=e.i.get(v),B=A.oh,c=!0)),0<v.nestedCues.length&&B&&wx(e,v.nestedCues,B,r,u),u.pop()}if(c){for(r=m(f),u=r.next();!u.done;u=r.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(h.sort(function(z,J){return z.startTime!=J.startTime?z.startTime-J.startTime:z.endTime-J.endTime}),h=m(h),r=h.next();!r.done;r=h.next())r=e.i.get(r.value),r.uc?(r.uc.contains(n)&&r.uc.removeChild(n),n.appendChild(r.uc),r.uc.appendChild(r.Ne)):n.appendChild(r.Ne)}}function ld(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=m(e.B.values());for(var r=t.next();!r.done;r=t.next())ud(r.value);ud(e.g),e.i.clear(),e.B.clear()}e.m&&wx(e,e.h,e.g,n,[])}}function n5(e,t,n){var r=1<n.length,u=r?"span":"div";t.lineBreak&&(u="br"),t.rubyTag&&(u=t.rubyTag),r=!r&&0<t.nestedCues.length;var c=document.createElement(u);if(u!="br"&&i5(e,c,t,n,r),n=null,t.region&&t.region.id){var f=t.region,h=e.l===4/3?2.5:1.9;if(n=f.id+"_"+f.width+"x"+f.height+(f.heightUnits==wn?"%":"px")+"-"+f.viewportAnchorX+"x"+f.viewportAnchorY+(f.viewportAnchorUnits==wn?"%":"px"),e.B.has(n))n=e.B.get(n);else{u=document.createElement("span");var v=f.heightUnits==wn?"%":"px",A=f.widthUnits==wn?"%":"px",N=f.viewportAnchorUnits==wn?"%":"px";u.id="shaka-text-region---"+n,u.classList.add("shaka-text-region"),u.style.position="absolute";var B=f.height,z=f.width;f.heightUnits===2&&(B=5.33*f.height,v="%"),f.widthUnits===2&&(z=f.width*h,A="%"),u.style.height=B+v,u.style.width=z+A,f.viewportAnchorUnits===2?(h=f.viewportAnchorY/75*100,v=f.viewportAnchorX/(e.l===4/3?160:210)*100,h-=f.regionAnchorY*B/100,v-=f.regionAnchorX*z/100,u.style.top=h+"%",u.style.left=v+"%"):(u.style.top=f.viewportAnchorY-f.regionAnchorY*B/100+N,u.style.left=f.viewportAnchorX-f.regionAnchorX*z/100+N),f.heightUnits!==0&&f.widthUnits!==0&&f.viewportAnchorUnits!==0&&(f=Math.max(0,Math.min(100-(parseInt(u.style.width.slice(0,-1),10)||0),parseInt(u.style.left.slice(0,-1),10)||0)),u.style.top=Math.max(0,Math.min(100-(parseInt(u.style.height.slice(0,-1),10)||0),parseInt(u.style.top.slice(0,-1),10)||0))+"%",u.style.left=f+"%"),u.style.display="flex",u.style.flexDirection="column",u.style.alignItems="center",u.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(n,u),n=u}}u=c,r&&(u=document.createElement("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=t.backgroundColor,u.style.lineHeight="normal",c.appendChild(u)),e.i.set(t,{Ne:c,oh:u,uc:n})}function r5(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==If?n:e==="left"||e==="start"&&t===Dl||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Dl?"line-right":"center"}function i5(e,t,n,r,u){var c=t.style,f=n.nestedCues.length==0,h=1<r.length;c.whiteSpace="pre-wrap";var v=n.payload.replace(/\s+$/g,function(N){return" ".repeat(N.length)});if(c.webkitTextStrokeColor=n.textStrokeColor,c.webkitTextStrokeWidth=n.textStrokeWidth,c.color=n.color,c.direction=n.direction,c.opacity=n.opacity,c.paddingLeft=M1(n.linePadding,n,e.s),c.paddingRight=M1(n.linePadding,n,e.s),c.textCombineUpright=n.textCombineUpright,c.textShadow=n.textShadow,n.backgroundImage)c.backgroundImage="url('"+n.backgroundImage+"')",c.backgroundRepeat="no-repeat",c.backgroundSize="contain",c.backgroundPosition="center",n.backgroundColor&&(c.backgroundColor=n.backgroundColor),c.width="100%",c.height="100%";else{if(n.nestedCues.length)var A=t;else A=document.createElement("span"),t.appendChild(A);n.border&&(A.style.border=n.border),u||((t=o5(r,function(N){return N.backgroundColor}))?A.style.backgroundColor=t:v&&(A.style.backgroundColor="rgba(0, 0, 0, 0.8)")),v&&(A.textContent=v)}h&&!r[r.length-1].isContainer?c.display="inline":(c.display="flex",c.flexDirection="column",c.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(c.width="100%",c.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(c.width="100%",c.alignItems="end"),c.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),f||(c.margin="0"),c.fontFamily=n.fontFamily,c.fontWeight=n.fontWeight.toString(),c.fontStyle=n.fontStyle,c.letterSpacing=n.letterSpacing,c.fontSize=M1(n.fontSize,n,e.s),r=n.line,r!=null&&(f=n.lineInterpretation,f==Pl&&(f=1,h=16,e.l&&1>e.l&&(h=32),r=0>r?100+r/h*100:r/h*100),f==1&&(c.position="absolute",n.writingMode==Ku?(c.width="100%",n.lineAlign==zu?c.top=r+"%":n.lineAlign=="end"&&(c.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(c.height="100%",n.lineAlign==zu?c.left=r+"%":n.lineAlign=="end"&&(c.right=100-r+"%")):(c.height="100%",n.lineAlign==zu?c.right=r+"%":n.lineAlign=="end"&&(c.left=100-r+"%")))),c.lineHeight=n.lineHeight,e=r5(n),e=="line-left"?(c.cssFloat="left",n.position!==null&&(c.position="absolute",n.writingMode==Ku?(c.left=n.position+"%",c.width="auto"):c.top=n.position+"%")):e=="line-right"?(c.cssFloat="right",n.position!==null&&(c.position="absolute",n.writingMode==Ku?(c.right=100-n.position+"%",c.width="auto"):c.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(c.position="absolute",n.writingMode==Ku?(c.left=n.position+"%",c.width="auto"):c.top=n.position+"%"),c.textAlign=n.textAlign,c.textDecoration=n.textDecoration.join(" "),c.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&c.writingMode==n.writingMode||(c.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Ku?c.width=n.size+"%":c.height=n.size+"%")}function M1(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var u=r.value;switch(r.unit){case"%":return u/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*u/t.cellResolution.rows+"px";default:return e}}function o5(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}ne("shaka.text.UITextDisplayer",ha),ha.prototype.setTextVisibility=ha.prototype.setTextVisibility,ha.prototype.isTextVisible=ha.prototype.isTextVisible,ha.prototype.remove=ha.prototype.remove,ha.prototype.destroy=ha.prototype.destroy,ha.prototype.append=ha.prototype.append,ha.prototype.configure=ha.prototype.configure;function a5(e,t){function n(c){for(var f=c,h=m(t),v=h.next();!v.done;v=h.next())v=v.value,v.end&&v.start<c&&(f+=v.end-v.start);return c=Math.floor(f/3600),h=Math.floor(f/60%60),v=Math.floor(f%60),f=Math.floor(1e3*f%1e3),(10>c?"0":"")+c+":"+(10>h?"0":"")+h+":"+(10>v?"0":"")+v+"."+(100>f?10>f?"00":"0":"")+f}var r=N1(e);e="WEBVTT\n\n",r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,e+=n(u.startTime)+" --> "+n(u.endTime)+function(c){var f=[];switch(c.textAlign){case"left":f.push("align:left");break;case"right":f.push("align:right");break;case Ca:f.push("align:middle");break;case"start":f.push("align:start");break;case"end":f.push("align:end")}switch(c.writingMode){case"vertical-lr":f.push("vertical:lr");break;case"vertical-rl":f.push("vertical:rl")}return f.length?" "+f.join(" "):""}(u)+"\n",e+=u.payload+"\n\n";return e}ne("shaka.text.WebVttGenerator",function(){});function Ax(e,t){this.h=e,this.g=t,this.i=void 0,this.l=!1,this.o=!0,this.j=this.m=!1}Ax.prototype.configure=function(e){this.g=e};function s5(e){e.l=!1,e.o=!0,e.m=!1,e.j=!1}function u5(e,t){e.j=t,e.j?e.i==wv?e.i=Av:e.i==Iv&&(e.i=bv):e.i==Av?e.i=wv:e.i==bv&&(e.i=Iv)}function l5(e,t,n){try{if(!e.g.enabled)return t;var r=D1(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=Ev;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=Tv;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=bx;break e}u=void 0}r.ot=u,r.su=!0;var c=yv(r);return P1(t,c)}catch(f){return Tt("CMCD_SRC_ERROR","Could not generate src CMCD data.",f),t}}function D1(e){return e.g.sessionId||(e.g.sessionId=g.crypto.randomUUID()),{v:1,sf:e.i,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function cd(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,D1(e)),n.pr=e.h.fb();var u=n.ot===_v||n.ot===Tv;if(e.m&&u&&(n.bs=!0,n.su=!0,e.m=!1),n.su==null&&(n.su=e.o),e=c5(e,n),r)r=p5(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var c=yv(e);c&&(t.uris=t.uris.map(function(f){return P1(f,c)}))}}}function c5(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,u){return n.includes(u)&&(r[u]=t[u]),r},{}):t}function f5(e){if(e.type===0)return g5;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?Tv:_v;if(t=="audio")return Ev;if(t=="text")return e.mimeType==="application/mp4"?Sv:O1}}function d5(e,t){if(t=e.h.xb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function Ix(e,t){if(t=e.h.xb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function h5(e,t){var n=e.h.mc();if(!n.length)return NaN;e=n[0],n=m(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case _v:return e.videoBandwidth||NaN;case Ev:return e.audioBandwidth||NaN;default:return e.bandwidth}}function yv(e){function t(B){return 100*n(B/100)}function n(B){return Math.round(B)}function r(B){return!Number.isNaN(B)&&B!=null&&B!==""&&B!==!1}var u=[],c={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(B){return encodeURIComponent(B)},rtp:t,tb:n},f=Object.keys(e||{}).sort();f=m(f);for(var h=f.next();!h.done;h=f.next()){h=h.value;var v=e[h];if(r(v)&&(h!=="v"||v!==1)&&(h!="pr"||v!==1)){var A=c[h];A&&(v=A(v)),A=typeof v;var N=void 0;N=A==="string"&&h!=="ot"&&h!=="sf"&&h!=="st"?h+"="+JSON.stringify(v):A==="boolean"?h:A==="symbol"?h+"="+v.description:h+"="+v,u.push(N)}}return u.join(",")}function p5(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],u=[{},{},{},{}],c={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=m(t);for(var f=t.next();!f.done;f=t.next())f=f.value,u[c[f]!=null?c[f]:1][f]=e[f];for(e=0;e<u.length;e++)(c=yv(u[e]))&&(n["CMCD-"+r[e]]=c);return n}function P1(e,t){return!t||e.includes("offline:")?e:(e=new Ei(e),e.g.set("CMCD",t),e.toString())}var bx="m",Ev="a",_v="v",Tv="av",g5="i",O1="c",Sv="tt",wv="d",Av="ld",Iv="h",bv="lh";ne("shaka.util.CmcdManager.StreamingFormat",{DASH:wv,xj:Av,HLS:Iv,yj:bv,Lj:"s",OTHER:"o"});function es(e){this.h=e,this.g=null}p=es.prototype,p.configure=function(e){this.h=e},p.wg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(xx)?1e3*this.g.get(xx):null},p.vg=function(){return this.h.enabled&&this.g&&this.g.has(Rx)?1e3*this.g.get(Rx):null},p.Wh=function(){return this.h.enabled&&this.g&&this.g.has(Nx)?this.g.get(Nx):null},p.Xh=function(){return this.h.enabled&&this.g&&this.g.has(Mx)?this.g.get(Mx):null},p.getBandwidthEstimate=function(e){var t=this.vg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function Cx(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}ne("shaka.util.CmsdManager",es),es.prototype.getBandwidthEstimate=es.prototype.getBandwidthEstimate,es.prototype.getRoundTripTime=es.prototype.Xh,es.prototype.getResponseDelay=es.prototype.Wh,es.prototype.getEstimatedThroughput=es.prototype.vg,es.prototype.getMaxBitrate=es.prototype.wg;var Rx="etp",xx="mb",Nx="rd",Mx="rtt";function Dx(){this.g=null,this.h=[]}function L1(e,t){return Ne(function(n){if(n.g==1)return e.g?R(n,new Promise(function(r){return e.h.push(r)}),2):n.u(2);e.g=t,X(n)})}Dx.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function hn(e,t,n){t=t===void 0?null:t,Nr.call(this);var r=this;this.m=V1,this.h=null,this.ee=t,this.oa=!1,this.qe=new Et,this.jd=new Et,this.l=new Et,this.Ta=new Et,this.vb=new Et,this.G=this.I=this.B=this.F=null,this.ye=0,this.aa=new Dx,this.ka=this.$f=this.ea=this.i=this.bb=this.H=this.j=this.$b=this.L=this.bg=this.fa=this.O=this.fd=this.N=this.ge=this.K=this.Fb=null,this.Da=!1,this.za=this.o=null,this.ag=1e9,this.pd=[],this.X=NaN,this.g=ll(this),this.T=null,this.Ae=-1,this.Fa=null,this.ga={width:1/0,height:1/0},this.ae=new vr(this.g,this.ga,null),this.je=[],this.s=null,this.Ea=new jl(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Eb=this.g.preferredTextLanguage,this.nd=this.g.preferredTextRole,this.md=this.g.preferForcedSubs,this.ld=[],n&&n(this),this.O=R5(this),this.fa=new es(this.g.cmsd),this.F=jx(this),this.F.Pf(this.g.streaming.forceHTTP),this.F.Qf(this.g.streaming.forceHTTPS),this.F.m=this.g.streaming.minBytesForProgressEvents,this.Hb=this.ba=this.A=null,this.Ce=!1,this.Be=new on(function(){return Ne(function(u){if(u.g==1)return r.ba?R(u,r.Sb(r.Hb,!0),3):u.u(0);if(u.g!=4)return R(u,r.load(r.ba),4);r.Ce?r.Hb.pause():r.Hb.play(),r.ba=null,r.Ce=!1,X(u)})}),Dv&&(this.A=Dv(),this.A.configure(this.g.ads),this.vb.D(this.A,"ad-content-pause-requested",function(u){var c;return Ne(function(f){if(f.g==1)return r.Be.stop(),r.ba?f.u(0):(r.Hb=r.h,r.Ce=r.h.ended,c=u.saveLivePosition||!1,R(f,r.og(!0,c),3));r.ba=f.h,X(f)})}),this.vb.D(this.A,"ad-content-resume-requested",function(u){if(u=u.offset||0,r.ba){var c=r.ba;c.B&&u&&(c.B+=u)}r.Be.Z(.1)}),this.vb.D(this.A,"ad-content-attach-requested",function(){return Ne(function(u){return r.h||!r.Hb?u.u(0):R(u,r.Sb(r.Hb,!0),0)})})),this.qe.D(g,"online",function(){q1(r),r.Jf()}),this.he=new on(function(){for(var u=Date.now()/1e3,c=!1,f=!0,h=m(r.i.variants),v=h.next();!v.done;v=h.next())v=v.value,0<v.disabledUntilTime&&v.disabledUntilTime<=u&&(v.disabledUntilTime=0,c=!0),0<v.disabledUntilTime&&(f=!1);f&&r.he.stop(),c&&dd(r,!1,void 0,!1,!1)}),this.ta=null,e&&(gr("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Sb(e,!0)),this.C=null}Y(hn,Nr);function Cv(e){e.L!=null&&(OR(e.L),e.L.release(),e.L=null)}function m5(e,t){t.lcevc.enabled?(Cv(e),e.L==null&&(e.L=new up(e.h,e.bg,t.lcevc),e.I&&(e.I.T=e.L))):Cv(e)}function ai(e,t){return new jn(e,t)}p=hn.prototype,p.destroy=function(){var e=this,t;return Ne(function(n){switch(n.g){case 1:return e.m==ru?n.return():(Cv(e),t=e.detach(),e.m=ru,R(n,t,2));case 2:return R(n,e.Pe(),3);case 3:if(e.qe&&(e.qe.release(),e.qe=null),e.jd&&(e.jd.release(),e.jd=null),e.l&&(e.l.release(),e.l=null),e.Ta&&(e.Ta.release(),e.Ta=null),e.vb&&(e.vb.release(),e.vb=null),e.za=null,e.g=null,e.s=null,e.ee=null,e.O=null,e.fa=null,!e.F){n.u(4);break}return R(n,e.F.destroy(),5);case 5:e.F=null;case 4:e.o&&(e.o.release(),e.o=null),Nr.prototype.release.call(e),X(n)}})};function fd(e,t){e.dispatchEvent(ai("onstatechange",new Map().set("state",t)))}p.Sb=function(e,t){t=t===void 0?!0:t;var n=this,r,u,c;return Ne(function(f){switch(f.g){case 1:if(n.m==ru)throw new Ye(2,7,7e3);if(r=n.h&&n.h==e,!n.h||n.h==e){f.u(2);break}return R(f,n.detach(),2);case 2:return R(f,k1(n,"attach"),4);case 4:if(f.h)return f.return();if(ce(f,5,6),r||(fd(n,"attach"),u=function(){var h=G1(n,!1);h&&hd(n,h)},n.jd.D(e,"error",u),n.h=e),!t||!tr()||n.I){f.u(6);break}return R(f,F1(n),6);case 6:Xe(f),n.aa.release(),Ie(f,0);break;case 5:return c=be(f),R(f,n.detach(),10);case 10:throw c}})},p.xh=function(e){this.bg=e},p.detach=function(e){e=e===void 0?!1:e;var t=this;return Ne(function(n){if(n.g==1){if(t.m==ru)throw new Ye(2,7,7e3);return R(n,t.ec(!1,e),2)}if(n.g!=3)return R(n,k1(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.jd.Qa(),t.h=null),fd(t,"detach"),t.A&&!e&&t.A.release()}finally{t.aa.release()}X(n)})};function k1(e,t){var n;return Ne(function(r){return r.g==1?(n=++e.ye,R(r,L1(e.aa,t),2)):n!=e.ye?(e.aa.release(),r.return(!0)):r.return(!1)})}p.ec=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c,f,h,v,A,N,B,z;return Ne(function(J){switch(J.g){case 1:return n.m!=ru&&(n.m=V1),R(J,k1(n,"unload"),2);case 2:return J.h?J.return():(oe(J,3),n.Da=!1,fd(n,"unload"),e&&!tr()&&(e=!1),Cv(n),r=n.ld.map(function(fe){return fe()}),n.ld=[],R(J,Promise.all(r),5));case 5:if(n.dispatchEvent(ai("unloading")),n.fd&&(n.fd.release(),n.fd=null),n.h&&(n.l.Qa(),n.Ta.Qa()),n.he.stop(),n.Fb&&(n.Fb.release(),n.Fb=null),n.ge&&(n.ge.stop(),n.ge=null),!n.H){J.u(6);break}return R(J,n.H.stop(),7);case 7:n.H=null,n.bb=null;case 6:if(!n.o){J.u(8);break}return R(J,n.o.stop(),8);case 8:if(!n.j){J.u(10);break}return R(J,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.K&&(n.K.release(),n.K=null),n.G&&(n.G.release(),n.G=null),!Tr("webkit")||!n.B){J.u(12);break}return R(J,n.B.destroy(),13);case 13:n.B=null;case 12:if(!n.I){J.u(14);break}return R(J,n.I.destroy(),15);case 15:n.I=null;case 14:if(n.A&&!t&&n.A.onAssetUnload(),n.ba&&!t&&(n.ba.destroy(),n.ba=null),t||n.Be.stop(),n.O&&s5(n.O),n.fa&&(n.fa.g=null),!n.C){J.u(16);break}return R(J,n.C.destroy(),17);case 17:n.C=null;case 16:if(n.h&&ud(n.h),!n.h||!n.h.src){J.u(18);break}return R(J,new Promise(function(fe){return new on(fe).Z(.1)}),19);case 19:n.h.removeAttribute("src"),n.h.load();case 18:if(!n.B){J.u(20);break}return R(J,n.B.destroy(),21);case 21:n.B=null;case 20:if(n.ta&&n.ea!=n.ta.Gc()&&(n.ta.s||n.ta.destroy(),n.ta=null),n.ea=null,n.$f=null,n.N=null,n.i){for(u=m(n.i.variants),c=u.next();!c.done;c=u.next())for(f=c.value,h=m([f.audio,f.video]),v=h.next();!v.done;v=h.next())(A=v.value)&&A.segmentIndex&&A.segmentIndex.release();for(N=m(n.i.textStreams),B=N.next();!B.done;B=N.next())z=B.value,z.segmentIndex&&z.segmentIndex.release()}n.g.streaming.clearDecodingCache&&($h={},dn.clear()),n.i=null,n.s=new iv,n.we=null,n.Fa=null,n.T=null,n.Ae=-1,n.pd=[],n.X=NaN,Z1(n);case 3:Xe(J),n.aa.release(),Ie(J,4);break;case 4:if(e&&tr()&&!n.I&&n.h)return R(J,F1(n),0);J.u(0)}})},p.cj=function(e){this.ka=e},p.load=function(e,t,n){t=t===void 0?null:t;var r=this,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee;return Ne(function(Oe){switch(Oe.g){case 1:if(r.m==ru)throw new Ye(2,7,7e3);return u=null,c="",e instanceof ul?(u=e,c=u.Gc()||""):c=e||"",R(Oe,L1(r.aa,"load"),2);case 2:if(r.aa.release(),!r.h)throw new Ye(2,7,7002);if(!r.ea){Oe.u(3);break}return r.ea=c,R(Oe,r.ec(!1),3);case 3:if(f=++r.ye,h=function(){return Ne(function(ke){if(ke.g==1)return r.ye==f?ke.u(0):u?R(ke,u.destroy(),3):ke.u(3);throw new Ye(2,7,7e3)})},v=function(ke,rt){return Ne(function(Fe){switch(Fe.g){case 1:return oe(Fe,2),R(Fe,L1(r.aa,rt),4);case 4:return R(Fe,h(),5);case 5:return R(Fe,ke(),6);case 6:return R(Fe,h(),7);case 7:u&&r.g&&(u.g=r.g);case 2:Xe(Fe),r.aa.release(),Ie(Fe,0)}})},ce(Oe,5,6),t==null&&u&&(t=u.getStartTime()),r.ka=t,r.Da=!1,r.dispatchEvent(ai("loading")),u){n=u.X,Oe.u(8);break}if(n){Oe.u(8);break}return R(Oe,v(function(){return Ne(function(ke){if(ke.g==1)return R(ke,kx(r,c),2);n=ke.h,X(ke)})},"guessMimeType_"),8);case 8:if(A=!!u,u){mx(u,r),r.s=u.getStats(),Oe.u(11);break}return R(Oe,Ox(r,c,t,n,!0),12);case 12:(u=Oe.h)?(u.A=!1,mx(u,r),r.s=u.getStats(),u.start(),u.m.catch(function(){})):r.s=new iv;case 11:if(N=!u,B=Date.now()/1e3,r.s=u?u.getStats():new iv,r.ea=c,r.$f=n||null,N)return R(Oe,v(function(){return Ne(function(ke){return R(ke,_5(r,n),0)})},"initializeSrcEqualsDrmInner_"),20);if(r.I){Oe.u(15);break}return R(Oe,v(function(){return Ne(function(ke){return R(ke,F1(r),0)})},"initializeMediaSourceEngineInner_"),15);case 15:return R(Oe,v(function(){return Ne(function(ke){return R(ke,u.m,0)})},"waitForFinish"),17);case 17:return r.g=u.getConfiguration(),r.ae=u.F,r.bb=u.G,r.H=Vj(u),r.H&&r.H.setMediaElement&&r.h&&r.H.setMediaElement(r.h),r.fd=Kj(u),r.$b=u.Ea,r.i=u.gf(),(z=u.o)&&(r.Ea=z),A&&r.h&&r.h.nodeName==="AUDIO"&&(v5(r),r.configure("manifest.disableVideo",!0)),r.B=zj(u),R(Oe,v(function(){return Ne(function(ke){return R(ke,r.B.Sb(r.h),0)})},"drmEngine_.attach"),18);case 18:return!(J=u.C)||r.za&&r.za==J||(r.o=Hj(u),r.za=u.C,typeof r.o.setMediaElement!="function"&&(gr("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(gr("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(gr("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),fe=Yj(u),pe=u.ga,R(Oe,v(function(){return Ne(function(ke){return R(ke,E5(r,B,pe,fe),0)})},"loadInner_"),19);case 19:Gj(u),Oe.u(14);break;case 20:return R(Oe,v(function(){return Ne(function(ke){return R(ke,T5(r,B,n),0)})},"srcEqualsInner_"),14);case 14:r.dispatchEvent(ai("loaded"));case 6:if(Xe(Oe),!u){Oe.u(22);break}return R(Oe,u.destroy(),22);case 22:r.ta=null,Ie(Oe,0);break;case 5:if(Ee=be(Oe),!Ee||Ee.code==7e3){Oe.u(24);break}return R(Oe,r.ec(!1),24);case 24:throw Ee}})};function v5(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}p.Zi=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r;return Ne(function(u){return u.g==1?R(u,Px(n),2):u.g!=3?(r=u.h,R(u,n.ec(e,t),3)):u.return(r)})},p.og=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,r;return Ne(function(u){return u.g==1?R(u,Px(n,t),2):u.g!=3?(r=u.h,R(u,n.detach(e),3)):u.return(r)})};function Px(e,t){t=t===void 0?!1:t;var n,r;return Ne(function(u){if(u.g==1)return n=null,e.i&&e.H&&e.bb&&e.ea?(r=e.h.currentTime,e.U()&&!t&&(r=null),R(u,Lx(e,e.ea,r,e.$f,!0,!1,!1),3)):u.u(2);if(u.g!=2){n=u.h,e.je.push(n),e.H&&e.H.setMediaElement&&e.H.setMediaElement(null);var c=n,f=e.H,h=e.bb;c.h=e.i,c.j=f,c.G=h,c=n,f=e.za,c.i=e.o,c.C=f,n.o=e.Ea,n.start(),e.i=null,e.H=null,e.bb=null,e.o=null,e.za=null}return u.return(n)})}p.preload=function(e,t,n){t=t===void 0?null:t;var r=this,u;return Ne(function(c){return c.g==1?R(c,Ox(r,e,t,n),2):((u=c.h)?u.start():hd(r,new Ye(2,7,7005)),c.return(u))})},p.Pe=function(){var e=this,t,n,r,u;return Ne(function(c){for(t=[],n=m(e.je),r=n.next();!r.done;r=n.next())u=r.value,u.s||t.push(u.destroy());return e.je=[],R(c,Promise.all(t),0)})};function Ox(e,t,n,r,u){u=u===void 0?!1:u;var c,f,h;return Ne(function(v){return v.g==1?r?v.u(2):R(v,kx(e,t),3):(v.g!=2&&(r=v.h),y5(e,r)?v.return(null):(c=!1,f=!0,u&&(e.o&&e.za==e.g.abrFactory&&(f=!1),e.h&&e.h.nodeName==="AUDIO"&&(c=!0)),h=Lx(e,t,n,r||null,!u,c,f),h=u?h.then(function(A){return A.A=!1,A}):h.then(function(A){return e.je.push(A),A}),v.return(h)))})}function Lx(e,t,n,r,u,c,f){u=u===void 0?!0:u,c=c===void 0?!1:c,f=f===void 0?!0:f;var h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e;return Ne(function(nt){return nt.g==1?(h=null,v=Ia(e.g),c&&(v.manifest.disableVideo=!0),A=function(){return h.T&&h.s?null:h},N=function(){return A()?A().getConfiguration():e.g},B=function(ct,gt){A()?h.configure(ct,gt):e.configure(ct,gt)},e.ga.width!=1/0||e.ga.height!=1/0?nt.u(2):R(nt,Ai(),3)):(nt.g!=2&&(z=nt.h,e.ga.width=z.width,e.ga.height=z.height),J=new vr(v,e.ga,null),fe={networkingEngine:e.F,filter:function(ct){var gt,Lt;return Ne(function(It){if(It.g==1)return R(It,bt(J,ct),2);if(It.g!=4)return gt=It.h,gt?(Lt=ai("trackschanged"),R(It,Promise.resolve(),4)):It.u(0);h.dispatchEvent(Lt),X(It)})},makeTextStreamsForClosedCaptions:function(ct){return M5(e,ct)},onTimelineRegionAdded:function(ct){var gt=h.H;e:{for(var Lt=m(gt.g),It=Lt.next();!It.done;It=Lt.next())if(It=It.value,It.schemeIdUri==ct.schemeIdUri&&It.id==ct.id&&It.startTime==ct.startTime&&It.endTime==ct.endTime){Lt=It;break e}Lt=null}Lt==null&&(gt.g.add(ct),ct=new jn("regionadd",new Map([["region",ct]])),gt.dispatchEvent(ct))},onEvent:function(ct){return h.dispatchEvent(ct)},onError:function(ct){return h.onError(ct)},isLowLatencyMode:function(){return N().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return N().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){B("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&h.T&&e.j.updateDuration()},newDrmInfo:function(ct){var gt=h.l,Lt=gt?gt.g:null;Lt&&gt.s&&mn(J,Lt.keySystem,ct)},onManifestUpdated:function(){var ct=new Map().set("isLive",e.U());h.dispatchEvent(ai("manifestupdated",ct)),mp(h,!1,function(){e.A&&e.A.onManifestUpdated(e.U())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(ct,gt,Lt,It){var Ut=ct;ct=="com.apple.hls.interstitial"&&(Ut="com.apple.quicktime.HLS",ct={startTime:gt,endTime:Lt,values:It},e.A)&&e.A.onHLSInterstitialMetadata(e,e.h,ct),It=m(It),ct=It.next();for(var Nt={};!ct.done;Nt={Ff:void 0},ct=It.next())Nt.Ff=ct.value,Nt.Ff.name!="ID"&&mp(h,!1,function(tn){return function(){U1(e,gt,Lt,Ut,tn.Ff)}}(Nt))},disableStream:function(ct){return e.disableStream(ct,e.g.streaming.maxDisabledTime)},addFont:function(ct,gt){return e.addFont(ct,gt)}},pe=new m1(function(){return e.Pb()}),pe.addEventListener("regionadd",function(ct){var gt=ct.region;Tp(e,"timelineregionadded",gt,h),mp(h,!1,function(){e.A&&(e.A.onDashTimedMetadata(gt),e.A.onDASHInterstitialMetadata(e,e.h,gt))})}),Ee=null,v.streaming.observeQualityChanges&&(Ee=new av(function(){return e.xb()}),Ee.addEventListener("qualitychange",function(ct){eN(e,ct.quality,ct.position)}),Ee.addEventListener("audiotrackchange",function(ct){eN(e,ct.quality,ct.position,!0)})),Oe=!0,ke={Mb:e.F,onError:function(ct){return h.onError(ct)},be:function(ct){mp(h,!0,function(){e:{var gt=ct,Lt=ai("keystatuschanged");e.dispatchEvent(Lt);var It=Object.keys(gt);It.length==1&&It[0]==""&&(It=["00"],gt={"00":gt[""]}),Lt=It.length==1&&It[0]=="00";var Ut=!1;if(It.length){It=m(e.i.variants);for(var Nt=It.next();!Nt.done;Nt=It.next()){Nt=Nt.value;var tn=[];Nt.audio&&tn.push(Nt.audio),Nt.video&&tn.push(Nt.video),tn=m(tn);for(var Ht=tn.next();!Ht.done;Ht=tn.next()){var Wt=Ht.value;if(Ht=Nt.allowedByKeySystem,Wt.keyIds.size){Nt.allowedByKeySystem=!0,Wt=m(Wt.keyIds);for(var En=Wt.next();!En.done;En=Wt.next())En=En.value,((En=gt[Lt?"00":En])||e.B.F)&&(Nt.allowedByKeySystem=Nt.allowedByKeySystem&&!!En&&!Zn.includes(En))}Ht!=Nt.allowedByKeySystem&&(Ut=!0)}}}if(Ut&&(ts(e),!kc(e)))break e;(gt=e.j.j)&&!gt.allowedByKeySystem&&dd(e)}})},onExpirationUpdated:function(ct,gt){var Lt=ai("expirationupdated");h.dispatchEvent(Lt),(Lt=h.j)&&Lt.onExpirationUpdated&&Lt.onExpirationUpdated(ct,gt)},onEvent:function(ct){h.dispatchEvent(ct),ct.type=="drmsessionupdate"&&Oe&&(Oe=!1,ct=Date.now()/1e3-h.ta,(e.s||h.getStats()).j=ct,e.L&&OR(e.L))}},rt=jx(e,A),tp(e.F,rt),Fe=function(){return e.Bc(ke)},$e={config:v,ti:fe,Di:pe,Ci:Ee,Bc:Fe,si:J,networkingEngine:rt,wh:u,vh:f},h=new ul(t,r,n,$e),nt.return(h))})}function kx(e,t){var n,r;return Ne(function(u){return u.g==1?(n=e.g.manifest.retryParameters,R(u,vv(t,e.F,n),2)):(r=u.h,r=="application/x-mpegurl"&&Ao()&&(r="application/vnd.apple.mpegurl"),u.return(r))})}function y5(e,t){if(!tr())return!0;if(t){if((e.h||ir()).canPlayType(t)=="")return!1;if(!(tr()&&t in Yn))return!0;if(Uf(t))return Ao()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls}return!1}function Fx(e){var t=e.g.textDisplayFactory;t!==e.we&&(e.C=t(),e.C.configure?e.C.configure(e.g.textDisplayer):gr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.we=t,e.C.setTextVisibility(e.oa))}function F1(e){var t,n,r;return Ne(function(u){if(u.g==1)return fd(e,"media-source"),Fx(e),t=C5(e.h,e.C,{Oh:function(){return e.keySystem()},onMetadata:function(c,f,h){Ux(e,c,f,h)}},e.L),t.configure(e.g.mediaSource),n=e.g.manifest,r=n.segmentRelativeVttTiming,t.fa=r,R(u,t.K,2);e.I=t,X(u)})}function E5(e,t,n,r){var u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt,It;return Ne(function(Ut){switch(Ut.g){case 1:fd(e,"load"),u=e.h,e.K=new cp({Kd:function(){return u.playbackRate},lc:function(){return u.defaultPlaybackRate},Rf:function(Nt){u.playbackRate=Nt},Ig:function(Nt){u.currentTime+=Nt}}),c=function(){return Rv(e)},f=function(){return Yx(e)},e.l.D(u,"playing",c),e.l.D(u,"pause",c),e.l.D(u,"ended",c),e.l.D(u,"ratechange",f),m5(e,e.g),e.Eb=e.g.preferredTextLanguage,e.nd=e.g.preferredTextRole,e.md=e.g.preferForcedSubs,H1(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(Nt,tn,Ht){e.i&&e.j&&Nt!=e.j.j&&Nv(e,Nt,!0,tn===void 0?!1:tn,Ht===void 0?0:Ht)}),e.o.setMediaElement(u),e.o.setCmsdManager(e.fa),e.j=x5(e),e.j.configure(e.g.streaming),e.m=$o,u.textTracks&&e.l.D(u.textTracks,"addtrack",function(Nt){if(Nt.track)switch(Nt=Nt.track,Nt.kind){case"chapters":Bx(e,Nt)}}),e.dispatchEvent(ai("streaming")),h=n;case 2:for((A=e.j.j)||h||(h=kc(e)?e.o.chooseVariant():null),N=[],v=A||h,B=m([v.video,v.audio]),z=B.next();!z.done;z=B.next())(J=z.value)&&!J.segmentIndex&&N.push(J.createSegmentIndex());if(!(0<N.length)){Ut.u(4);break}return R(Ut,Promise.all(N),4);case 4:if(!v||v.disabledUntilTime!=0){Ut.u(2);break}if(e.H&&e.H.onInitialVariantChosen&&e.H.onInitialVariantChosen(v),e.i.isLowLatency&&!e.g.streaming.lowLatencyMode&&He("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),e.O&&u5(e.O,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),H1(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),Ij(e.j,e.g.playRangeStart,e.g.playRangeEnd),fe=function(Nt){e.G=I5(e,Nt),e.Fb=b5(e,Nt),Zx(e,u,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||(pe=e.ka,pe==null&&e.i.startTime&&(pe=e.i.startTime),fe(pe)),A){Ut.u(7);break}if(!e.g.streaming.startAtSegmentBoundary){Ut.u(8);break}return Ee=e.i.presentationTimeline,Oe=e.ka||e.h.currentTime,e.ka==null&&e.i.startTime&&(Oe=e.i.startTime),ke=Ee.Jb(),rt=Ee.zb(),Oe<ke?Oe=ke:Oe>rt&&(Oe=rt),R(Ut,D5(h,Oe),9);case 9:Fe=Ut.h,fe(Fe);case 8:Nv(e,h,!0,!1,0);case 7:return e.G.ready(),$e=e.Hc().find(function(Nt){return Nt.active}),$e||((nt=Bl(e.i.textStreams,e.Eb,e.nd,e.md)[0]||null)&&h1(e.s.h,nt,!0),h&&(nt?(P5(e,h.audio,nt)&&(e.oa=!0),e.oa&&e.C.setTextVisibility(!0),Qx(e)):e.oa=!1),nt&&(e.g.streaming.alwaysStreamText||e.rf())&&lv(e.j,nt)),R(Ut,e.j.start(r),10);case 10:e.g.abr.enabled&&(e.o.enable(),Jx(e)),ts(e),kc(e),e.i.variants.some(function(Nt){return Nt.primary}),((ct=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(gt=function(){return Wx(e)},e.l.D(u,"timeupdate",gt)),ct||(Lt=function(){return xv(e)},e.l.D(u,"timeupdate",Lt),xv(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(It=function(){var Nt;return Ne(function(tn){if(tn.g==1)return Nt=e.h.duration-e.h.currentTime,isNaN(Nt)||!(Nt<=e.g.streaming.preloadNextUrlWindow)?tn.u(0):(e.l.$a(u,"timeupdate",It),R(tn,e.preload(e.i.nextUrl),4));e.ta=tn.h,X(tn)})},e.l.D(u,"timeupdate",It)),e.l.D(u,"ended",function(){e.load(e.ta||e.i.nextUrl)}))),e.A&&e.A.onManifestUpdated(ct),e.Da=!0,e.l.pa(u,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),X(Ut)}})}function _5(e,t){var n,r,u,c,f;return Ne(function(h){return h.g==1?(n=Mi,r=Date.now()/1e3,u=!0,e.B=e.Bc({Mb:e.F,onError:function(v){hd(e,v)},be:function(){},onExpirationUpdated:function(){var v=ai("expirationupdated");e.dispatchEvent(v)},onEvent:function(v){e.dispatchEvent(v),v.type=="drmsessionupdate"&&u&&(u=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.g.drm),c={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},f={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Ra(t):"",codecs:t?Oo(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ja,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},f.fullMimeTypes.add(Di(f.mimeType,f.codecs)),t.startsWith("audio/")?(f.type=n.Y,c.audio=f):c.video=f,e.B.ba=!0,R(h,Le(e.B,[c],[]),2)):R(h,e.B.Sb(e.h),0)})}function T5(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe;return Ne(function(pe){if(pe.g==1)return fd(e,"src-equals"),r=e.h,e.G=new $R(r),u=!1,e.ld.push(function(){u=!0}),e.ka!=null&&e.G.Ee(e.ka),e.K=new cp({Kd:function(){return r.playbackRate},lc:function(){return r.defaultPlaybackRate},Rf:function(Ee){r.playbackRate=Ee},Ig:function(Ee){r.currentTime+=Ee}}),c=e.g.streaming.rebufferingGoal,Zx(e,r,c),f=function(){return Rv(e)},h=function(){return Yx(e)},e.l.D(r,"playing",f),e.l.D(r,"pause",f),e.l.D(r,"ended",f),e.l.D(r,"ratechange",h),r.preload!="none"&&e.l.pa(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.l.D(r.audioTracks,"addtrack",function(){return ts(e)}),e.l.D(r.audioTracks,"removetrack",function(){return ts(e)}),e.l.D(r.audioTracks,"change",function(){return ts(e)})),r.textTracks&&(Fx(e),e.l.D(r.textTracks,"addtrack",function(Ee){if(Ee.track)switch(Ee=Ee.track,Ee.kind){case"metadata":A5(e,Ee);break;case"chapters":Bx(e,Ee);break;default:ts(e)}}),e.l.D(r.textTracks,"removetrack",function(){return ts(e)}),e.l.D(r.textTracks,"change",function(){return ts(e)}),e.l.D(r,"enterpictureinpicture",function(){var Ee=_p(e).find(function(Oe){return Oe.mode!=="disabled"});Ee&&(Ee.mode="showing")}),e.l.D(r,"leavepictureinpicture",function(){var Ee=_p(e).find(function(Oe){return Oe.mode!=="disabled"});Ee&&(Ee.mode="hidden")})),v=l5(e.O,e.ea,n),!v.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(v+="#t=",0<e.g.playRangeStart&&(v+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(v+=","+e.g.playRangeEnd)),r.src=v,(di()||li())&&r.load(),r.preload!="none"&&!r.autoplay&&Uf(n)&&qs()&&r.load(),e.m=Zo,e.dispatchEvent(ai("streaming")),A=new Lr,nd(r,HTMLMediaElement.HAVE_METADATA,e.l,function(){e.G.ready(),A.resolve()}),nd(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.l,function(){var Ee,Oe,ke,rt,Fe;return Ne(function($e){if($e.g==1)return S5(e),Ee=_p(e),Ee.find(function(nt){return nt.mode!="disabled"})?(0<Ee.length&&(e.oa=!0,e.C.setTextVisibility(!0)),$e.u(2)):R($e,new Promise(function(nt){e.l.pa(r.textTracks,"change",nt),new on(nt).Z(1)}),2);if(u)return $e.return();for(Oe=!1,ke=m(Ee),rt=ke.next();!rt.done;rt=ke.next())Fe=rt.value,Fe.mode!=="disabled"&&(Oe?(Fe.mode="disabled",He("Found more than one enabled text track, disabling it",Fe)):(Hx(e,Fe),Oe=!0));w5(e),X($e)})}),r.error?A.reject(G1(e)):r.preload=="none"&&(He('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),A.resolve()),e.l.pa(r,"error",function(){A.reject(G1(e))}),N=new Promise(function(Ee,Oe){new on(Oe).Z(e.g.streaming.loadTimeout)}),R(pe,Promise.race([A,N]),2);((B=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(z=function(){return Wx(e)},e.l.D(r,"timeupdate",z)),B||(J=function(){return xv(e)},e.l.D(r,"timeupdate",J),xv(e)),e.A&&(e.A.onManifestUpdated(B),B&&(fe=e.Pb().end,e.l.D(r,"progress",function(){var Ee=e.Pb().end;fe!=Ee&&(e.A.onManifestUpdated(e.U()),fe=Ee)}))),e.Da=!0,X(pe)})}function S5(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Ug(t,e.g.preferredVariantRole)}function w5(e){var t=e.g.preferredTextLanguage;t!=""&&e.Lf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function A5(e,t){if(t.kind=="metadata"){t.mode="hidden",e.l.D(t,"cuechange",function(){if(t.activeCues)for(var r=m(t.activeCues),u=r.next();!u.done;u=r.next())u=u.value,U1(e,u.startTime,u.endTime,u.type,u.value),e.A&&e.A.onCueMetadataChange(u.value);if(t.cues){r=[],u=m(t.cues);for(var c=u.next(),f={};!c.done;f={Ub:void 0},c=u.next())f.Ub=c.value,f.Ub.type=="com.apple.quicktime.HLS"&&f.Ub.startTime!=null&&(c=r.find(function(h){return function(v){return v.startTime==h.Ub.startTime&&v.endTime==h.Ub.endTime}}(f)),c||(c={startTime:f.Ub.startTime,endTime:f.Ub.endTime,values:[]},r.push(c)),c.values.push(f.Ub.value));for(r=m(r),u=r.next();!u.done;u=r.next())u=u.value,u.values.some(function(h){return h.key=="X-ASSET-URI"||h.key=="X-ASSET-LIST"})&&e.A&&(u.values.push({key:"CUE",description:"",data:u.startTime==0?"ONCE,PRE":"ONCE",mimeType:null,pictureType:null}),e.A.onHLSInterstitialMetadata(e,e.h,u))}});var n=new on(function(){var r=N5(e);r=m(r);for(var u=r.next();!u.done;u=r.next())u.value.mode="hidden"}).wc().Z(.5);e.ld.push(function(){n.stop()})}}function Ux(e,t,n,r){t=m(t);for(var u=t.next();!u.done;u=t.next())if(u=u.value,u.data&&typeof u.cueTime=="number"&&u.frames){var c=u.cueTime+n,f=r;f&&c>f&&(f=c);for(var h=m(u.frames),v=h.next();!v.done;v=h.next())U1(e,c,f,"org.id3",v.value);e.A&&e.A.onHlsTimedMetadata(u,c)}}function U1(e,t,n,r,u){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",u),e.dispatchEvent(ai("metadata",t))}function Bx(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new on(function(){t.mode="hidden"}).wc().Z(.5);e.ld.push(function(){n.stop()})}}p.Hi=function(){for(var e=this.aa;e.g;)e.release()},p.Bc=function(e){return new je(e)};function jx(e,t){function n(u){t()?t().dispatchEvent(u):e.dispatchEvent(u)}function r(u){t()?mp(t(),!0,u):u()}return t||(t=function(){return null}),new Kr(function(u,c,f,h){var v=t()?t().i:e.o;v&&v.segmentDownloaded(u,c,f,h)},function(u,c,f){c=new Map().set("headers",u).set("request",c).set("requestType",f),n(ai("downloadheadersreceived",c)),r(function(){if(e.fa){var h=e.fa;if(h.h.enabled){var v=u["cmsd-static"];if(v)try{var A=new Map,N=v.split(",");for(v=0;v<N.length;v++){var B=N[v].split("=");A.set(B[0],Cx(B[1]))}}catch(Ee){}if(A=u["cmsd-dynamic"]){try{var z=new Map,J=A.split(";");for(A=1;A<J.length;A++){var fe=J[A].split("=");z.set(fe[0],Cx(fe[1]))}var pe=z}catch(Ee){pe=null}pe&&(h.g=pe)}}}})},function(u,c,f,h){u=new Map().set("request",u).set("error",c).set("httpResponseCode",f).set("aborted",h),n(ai("downloadfailed",u))},function(u,c,f){r(function(){var h=e.O,v=f;if(v=v===void 0?{}:v,h.g.enabled)if(c.method==="HEAD")cd(h,c);else switch(u){case 0:try{if(h.g.enabled){if(v.type){e:{switch(v.type){case 4:var A=h.j?Av:wv;break e;case 3:case 2:A=h.j?bv:Iv;break e;case 5:A="s";break e}A=void 0}h.i=A}cd(h,c,{ot:bx,su:!h.l})}}catch(Ht){Tt("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Ht)}break;case $a:try{if(h.g.enabled){var N=v.segment;A=0,N&&(A=N.endTime-N.startTime);var B={d:1e3*A,st:h.h.U()?"l":"v"};B.ot=f5(v);var z=B.ot===_v||B.ot===Ev||B.ot===Tv||B.ot===Sv,J=v.stream;if(J){var fe=h.h.fb();if(z&&(B.bl=d5(h,J.type),B.ot!==Sv)){var pe=Ix(h,J.type);B.dl=fe?pe/Math.abs(fe):pe}if(J.bandwidth&&(B.br=J.bandwidth/1e3),J.segmentIndex&&N){var Ee=J.segmentIndex.Ib(N.endTime,!0,0>fe);if(Ee){var Oe=Ee.next().value;if(Oe&&Oe!=N){if(!fn(N.M(),Oe.M())){var ke=Oe.M()[0],rt=c.uris[0],Fe=new URL(ke),$e=new URL(rt);if(Fe.origin!==$e.origin)var nt=ke;else{for(var ct=Fe.pathname.split("/").slice(1),gt=$e.pathname.split("/").slice(1,-1);ct[0]===gt[0];)ct.shift(),gt.shift();for(;gt.length;)gt.shift(),ct.unshift("..");nt=ct.join("/")}B.nor=nt}if((Oe.Ha||Oe.va)&&(N.Ha!=Oe.Ha||N.va!=Oe.va)){var Lt=Oe.Ha+"-";Oe.va&&(Lt+=Oe.va),B.nrr=Lt}}}var It=h.h.fb()||1,Ut=Ix(h,J.type)||500,Nt=J.bandwidth,tn=Nt?Nt*(N.endTime-N.startTime)/1e3/(Ut/It/1e3)*h.g.rtpSafetyFactor:NaN;isNaN(tn)||(B.rtp=tn)}}z&&B.ot!==Sv&&(B.tb=h5(h,B.ot)/1e3),cd(h,c,B)}}catch(Ht){Tt("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Ht)}break;case 2:case 5:case 6:cd(h,c,{ot:"k"});break;case 4:cd(h,c,{ot:"o"})}})},function(u,c,f,h){(u=t()?t().j:e.H)&&u.banLocation&&u.banLocation(h)},function(u,c){if(c.data){c=c.data.byteLength;var f=t()?t().getStats():e.s;f&&(f.hc=isNaN(f.hc)?c:f.hc+c,u===0&&(f.Eg=c))}})}function I5(e,t){return new XR(e.h,e.i,e.g.streaming,t,function(){e.Fb&&rx(e.Fb,!0),e.j&&e.j.Rc(),e.N&&Lc(e)},function(n){return e.dispatchEvent(n)})}function b5(e,t){t=new mv(e.fd,e.U()||0<t),t.addEventListener("enter",function(r){Tp(e,"timelineregionenter",r.region)}),t.addEventListener("exit",function(r){Tp(e,"timelineregionexit",r.region)}),t.addEventListener("skip",function(r){var u=r.region;r.seeking||(Tp(e,"timelineregionenter",u),Tp(e,"timelineregionexit",u))});var n=new nx(e.h);return n.g.add(t),e.$b&&n.g.add(e.$b),n}function Zx(e,t,n){e.N=new Gm,e.N.g=rl,Hm(e.N,n,Math.min(.5,n/2)),Z1(e),e.ge=new on(function(){Lc(e)}).Ra(.25),e.l.D(t,"waiting",function(){return Lc(e)}),e.l.D(t,"stalled",function(){return Lc(e)}),e.l.D(t,"canplaythrough",function(){return Lc(e)}),e.l.D(t,"progress",function(){return Lc(e)})}function Lc(e){switch(e.m){case Zo:if(e.h.ended)var t=!0;else{var n=yn(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case $o:e:if(e.h.ended||UR(e.I))t=!0;else{if(e.i.presentationTimeline.U()){n=e.i.presentationTimeline.Xb();var r=yn(e.h.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=yr(e.h.buffered,e.h.currentTime),n=e.N;var u=t,c=n.i.get(n.g);t=n.g,r=u||r>=c?Mc:rl,n.g=r,(t=t!=r)&&r===Mc&&(n.h=Date.now()),t&&Z1(e)}function C5(e,t,n,r){return new kR(e,t,n,r)}function R5(e){return new Ax({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},xb:function(){return e.xb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},fb:function(){return e.fb()},yb:function(){return e.yb()},mc:function(){return e.mc()},U:function(){return e.U()}},e.g.cmcd)}function x5(e){return new lx(e.i,{Jd:function(){return e.G?e.G.wd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},fb:function(){return e.fb()},ca:e.I,Mb:e.F,onError:function(t){return hd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},zi:function(){e.H&&e.H.update&&e.H.update()},Bf:function(t,n){var r=t.startTime;t=t.endTime;var u=n.type;if(n=n.codecs.includes(","),e.G){e.G.Jg();var c=o1(e.I,u);!e.U()&&e.h.paused&&c!=null&&u!=_r&&0<c&&e.G.wd()<c&&e.G.Ee(c)}Lc(e),r=new Map().set("start",r).set("end",t).set("contentType",u).set("isMuxed",n),e.dispatchEvent(ai("segmentappended",r))},yi:function(t,n){(n=n.Kc)&&e.$b&&Ej(e.$b,n,t)},hg:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){t=new Ve(nr(n)),n=0;for(var u=m(t.data),c=u.next();!c.done;c=u.next())n+=c.value.length;if(n==0)r=Promise.resolve();else{for(n=new Uint8Array(n),u=0,t=m(t.data),c=t.next();!c.done;c=t.next())c=c.value,n.set(c,u),u+=c.length;De(r,"cenc",n),r=r.l}}else r=Promise.resolve();return r},onMetadata:function(t,n,r){Ux(e,t,n,r)},disableStream:function(t,n){return e.disableStream(t,n)}})}p.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=hv(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(gr("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(gr("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(gr("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&Ao(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){gr("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var r=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+r,e.streaming.liveSync.targetLatencyTolerance=r}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(gr("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(gr("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(gr("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(gr("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(gr("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(gr("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(gr("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(gr("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){gr("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var u=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return u},delete e.mediaSource.sourceBufferExtraFeatures}return e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(gr("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.maxDisabledTime==null&&(e.streaming.maxDisabledTime=1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.dash==null&&(e.manifest.dash={}),e.manifest.dash.autoCorrectDrift==null&&(e.manifest.dash.autoCorrectDrift=!1),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100)),n=Gl(this.g,e,ll(this)),qx(this),n};function qx(e){if(e.ae=new vr(e.g,e.ga,e.B),e.H){var t=Ia(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.H.configure(t)}if(e.B&&e.B.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.m!=ru&&Zt(e.ae,e.i)&&ts(e)}catch(u){hd(e,u)}e.o&&kc(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||dd(e)}if(e.F&&(e.F.Pf(e.g.streaming.forceHTTP),e.F.Qf(e.g.streaming.forceHTTPS),e.F.m=e.g.streaming.minBytesForProgressEvents),e.I&&(e.I.configure(e.g.mediaSource),e.I.fa=e.g.manifest.segmentRelativeVttTiming),e.C)if(t=e.g.textDisplayFactory,e.we!=t){var n=e.C;if(e.C=t(),e.C.configure?e.C.configure(e.g.textDisplayer):gr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.C.setTextVisibility(n.isTextVisible()),n.destroy(),e.I){n=e.I;var r=e.C;n.ba=r,n.g&&(n.g.j=r)}e.we=t,e.j&&(t=e.j,(n=t.i.get(_r))&&id(t,n.stream,!0,0,!0))}else e.C.configure&&e.C.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),Jx(e)),e.N&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Hm(e.N,t,Math.min(.5,t/2))),e.i&&H1(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.O&&e.O.configure(e.g.cmcd),e.fa&&e.fa.configure(e.g.cmsd)}p.getConfiguration=function(){var e=ll(this);return Gl(e,this.g,ll(this)),e},p.xg=function(){var e=ll(this);return Gl(e,this.g,ll(this)),hx(this.g,ll(this))},p.tg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Pb().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},p.Li=function(){for(var e in this.g)delete this.g[e];Gl(this.g,ll(this),ll(this)),qx(this)},p.ff=function(){return this.m},p.hf=function(){return this.i?this.i.type:null},p.Sh=function(){return this.h},p.yb=function(){return this.F},p.Gc=function(){return this.ea},p.sg=function(){return this.A?this.A:null},p.U=function(){return this.i?this.i.presentationTimeline.U():this.h&&this.h.src?this.h.duration==1/0:!1},p.pc=function(){return this.i?this.i.presentationTimeline.pc():!1},p.ii=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},p.Pb=function(){if(this.i){if(!this.Da&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Jb(),end:e.zb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},p.fi=function(){this.U()&&(this.h.currentTime=this.Pb().end)},p.ji=function(){return this.Da},p.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},p.drmInfo=function(){return this.B?this.B.g:null},p.ad=function(){return this.B?this.B.ad():1/0},p.ef=function(){return this.B?this.B.ef():[]},p.Id=function(){return this.B?this.B.Id():{}},p.pf=function(){return this.N?this.N.g==rl:!1},p.fb=function(){return this.h?this.K?this.K.i:1:0},p.ud=function(e,t){var n=this;t=t===void 0?!0:t,e==0?He("A trick play rate of 0 is unsupported!"):(this.Ta.Qa(),this.h.paused&&this.h.play(),this.K.set(e),this.m==$o&&(this.o.playbackRateChanged(e),E1(this.j,t&&1<Math.abs(e))),this.U()&&this.Ta.D(this.h,"timeupdate",function(){var r=n.h.currentTime,u=n.Pb(),c=n.g.streaming.safeSeekOffset;0<e?Math.floor(r)>=Math.floor(u.end)&&n.Uc():Math.floor(r)<=Math.floor(u.start+c)&&n.Uc()}))},p.Uc=function(){var e=this.K.lc();this.m==Zo&&this.K.set(e),this.m==$o&&(this.K.set(e),this.o.playbackRateChanged(e),E1(this.j,!1)),this.Ta.Qa()},p.mc=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=m(this.i.variants),u=r.next();!u.done;u=r.next())if(u=u.value,Ul(u)){var c=Fl(u);c.active=u==e,c.active||n==1||e==null||u.video!=e.video||u.audio!=e.audio||(c.active=!0),c.active&&n++,t.push(c)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(f){return Vf(f)}):[]},p.Hc=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=m(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var u=qf(r);u.active=r==e,t.push(u)}return t}return this.h&&this.h.src&&this.h.textTracks?_p(this).map(function(c){return Lm(c)}):[]},p.Mh=function(){var e=this.pd;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Gf(t)})},p.Eh=function(e){var t=this,n,r,u,c;return Ne(function(f){return f.g==1?t.m!=$o&&t.m!=Zo?f.return(null):(n=t.pd,t.i&&(n=t.i.imageStreams),(r=n.find(function(h){return h.id==e}))?r.segmentIndex?f.u(2):R(f,r.createSegmentIndex(),2):f.return(null)):f.g!=4?(u=[],r.segmentIndex.Gb(function(h){var v=Gx(h.tilesLayout||r.tilesLayout);if(v){v=v.rows*v.ic;for(var A=h.j-h.startTime,N=0;N<v;N++)u.push(t.zg(e,h.startTime+A*N/v))}}),R(f,Promise.all(u),4)):(c=f.h,f.return(c.filter(function(h){return h})))})};function Gx(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{ic:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}p.zg=function(e,t){var n=this,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe;return Ne(function($e){return $e.g==1?n.m!=$o&&n.m!=Zo?$e.return(null):(r=n.pd,n.i&&(r=n.i.imageStreams),(u=r.find(function(nt){return nt.id==e}))?u.segmentIndex?$e.u(2):R($e,u.createSegmentIndex(),2):$e.return(null)):(c=u.segmentIndex.find(t),c==null||(f=u.segmentIndex.get(c),h=Gx(f.tilesLayout||u.tilesLayout),!h)?$e.return(null):(v=u.width||0,A=u.height||0,N=v/h.ic,B=A/h.rows,z=h.ic*h.rows,J=f.j-f.startTime,fe=f.B||J/z,pe=f.startTime,Oe=Ee=0,1<z&&(ke=Math.floor((t-f.startTime)/fe),pe=f.startTime+ke*fe,Ee=ke%h.ic*N,Oe=Math.floor(ke/h.ic)*B),rt=!1,(Fe=f.A)&&(rt=!0,B=Fe.height,Ee=Fe.positionX,Oe=Fe.positionY,N=Fe.width),$e.return({segment:f,imageHeight:A,imageWidth:v,height:B,positionX:Ee,positionY:Oe,startTime:pe,duration:fe,uris:f.M(),width:N,sprite:rt})))})},p.Vg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.s&&(h1(this.s.h,t,!1),lv(this.j,t),Mv(this),this.Eb=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){var n=_p(this);t=n.find(function(r){return r.mode!=="disabled"}),n=n.find(function(r){return Hf(r)===e.id}),t!==n&&(t&&(t.mode="disabled",this.l.$a(t,"cuechange"),this.C.remove(0,1/0)),n&&Hx(this,n)),Mv(this)}};function Hx(e,t){e.l.D(t,"cuechange",function(){e.C.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n=Array.from(t.activeCues||[]).map(e5).filter(Ws);e.C.append(n)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}p.Mf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){var r=this.i.variants.find(function(c){return c.id==e.id});if(r&&Ul(r)){var u=this.j.j;this.g.abr.enabled&&(u.video!=r.video||u.audio&&r.audio&&u.audio.language==r.audio.language&&u.audio.channelsCount==r.audio.channelsCount)&&He("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack()."),Nv(this,r,!1,t,n),this.Ea=new qm(r,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),kc(this)}}else if(this.h&&this.h.audioTracks){for(t=Array.from(this.h.audioTracks),t=m(t),n=t.next();!n.done;n=t.next())if(n=n.value,Hf(n)==e.id){$x(this,n);break}}},p.Gh=function(){return nN(this.mc())},p.Zh=function(){return nN(this.Hc())},p.Fh=function(){return Array.from(tN(this.mc()))},p.Yh=function(){return Array.from(tN(this.Hc()))},p.Ug=function(e,t,n,r,u){if(n=n===void 0?0:n,r=r===void 0?0:r,u=u===void 0?"":u,this.i&&this.G){this.Ea=new jl(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,u),e=function(f,h){return f.video||h.video?f.video&&h.video?Math.abs((f.video.height||0)-(h.video.height||0))+Math.abs((f.video.width||0)-(h.video.width||0)):1/0:0},t=this.j.j,u=this.Ea.create(this.i.variants),n=null,u=m(u.values());for(var c=u.next();!c.done;c=u.next())c=c.value,Ul(c)&&(!n||e(n,t)>e(c,t))&&(n=c);n!=t&&(n?(e=Fl(n),this.Mf(e,!0,r)):dd(this))}else this.h&&this.h.audioTracks&&(r=Bl(this.mc(),e,t||"",!1)[0])&&this.Mf(r)},p.Lf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.G?(this.Eb=e,this.nd=t||"",this.md=n,(e=Bl(this.i.textStreams,this.Eb,this.nd,this.md)[0]||null)&&e!=this.j.s&&(h1(this.s.h,e,!1),this.g.streaming.alwaysStreamText||this.rf())&&(lv(this.j,e),Mv(this))):(e=Bl(this.Hc(),e,t||"",n)[0])&&this.Vg(e)},p.Ri=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.G){for(var r=null,u=m(this.i.variants),c=u.next();!c.done;c=u.next())if(c=c.value,c.audio.label==e){r=c;break}r!=null&&(this.Ea=new jl(r.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),dd(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=m(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&$x(this,t)}},p.rf=function(){var e=this.oa;return this.C?this.C.isTextVisible():e},p.ug=function(){return this.h&&this.h.src&&this.h.textTracks?Vx(this).map(function(e){return Lm(e)}):[]},p.Ih=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=Or(e),n=Vx(this).filter(function(h){return Or(h.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=m(n);for(var u=n.next();!u.done;u=n.next())if((u=u.value)&&u.cues){u=m(u.cues);for(var c=u.next();!c.done;c=u.next()){var f=c.value;(c=f.id)&&c!=""||(c=f.startTime+"-"+f.endTime+"-"+f.text),f={id:c,title:f.text,startTime:f.startTime,endTime:f.endTime},r.has(c)||(e.push(f),r.add(c))}}return e};function _p(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function N5(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}function Vx(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="chapters"})}p.ah=function(e){e=!!e,this.oa!=e&&(this.oa=e,this.m==$o?(this.C.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||(e=Bl(this.i.textStreams,this.Eb,this.nd,this.md),0<e.length&&(lv(this.j,e[0]),Mv(this))):Cj(this.j))):this.h&&this.h.src&&this.h.textTracks&&this.C.setTextVisibility(e),Qx(this))},p.Uh=function(){if(this.G)var e=this.G.wd();else{if(this.ka==null)return new Date;e=this.ka}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},p.yg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},p.Ld=function(){return this.U()&&this.i?this.i.presentationTimeline.Ld():null},p.xb=function(){if(this.m==$o)return this.I.xb();var e={total:[],audio:[],video:[],text:[]};return this.m==Zo&&(e.total=gi(this.h.buffered)),e},p.getStats=function(){if(this.m!=$o&&this.m!=Zo)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Rv(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.U()){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.G&&(this.s.T=this.G.cg(),this.s.X=this.G.dg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.O=Number(n.droppedVideoFrames),t.N=r,this.s.L=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.m==$o){if(n=this.j.j,t=this.j.s,n){r=this.K?this.K.i:1;var u=r*n.bandwidth;t&&t.bandwidth&&(u+=r*t.bandwidth),this.s.B=u}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.U()&&(n=this.yg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&(this.s.G=this.i.periodCount,this.s.F=this.i.gapCount,this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.h)),n=this.o.getBandwidthEstimate(),this.s.A=n}this.m==Zo&&(n=this.s,n.hc=isNaN(n.hc)?NaN:n.hc+NaN,n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var c=this.s;e=c.o,n=c.l,t=c.B,r=c.N,u=c.O;var f=c.L,h=c.X,v=c.T,A=c.A,N=c.i,B=c.m,z=c.H,J=c.j,fe=d1(c.g,"playing"),pe=d1(c.g,"paused"),Ee=d1(c.g,"buffering"),Oe=c.s,ke=c.C,rt=c.I,Fe=c.Eg,$e=c.hc,nt=c.K,ct=c.G,gt=c.F,Lt=pj(c.g),It=[];c=m(c.h.g);for(var Ut=c.next();!Ut.done;Ut=c.next())Ut=Ut.value,It.push({timestamp:Ut.timestamp,id:Ut.id,type:Ut.type,fromAdaptation:Ut.fromAdaptation,bandwidth:Ut.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:u,corruptedFrames:f,stallsDetected:h,gapsJumped:v,estimatedBandwidth:A,completionPercent:N,loadLatency:B,manifestTimeSeconds:z,drmTimeSeconds:J,playTime:fe,pauseTime:pe,bufferingTime:Ee,licenseTime:Oe,liveLatency:ke,maxSegmentDuration:rt,manifestSizeBytes:Fe,bytesDownloaded:$e,nonFatalErrorCount:nt,manifestPeriodCount:ct,manifestGapCount:gt,stateHistory:Lt,switchHistory:It}},p.sh=function(e,t,n,r,u,c,f){f=f===void 0?!1:f;var h=this,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt;return Ne(function(Fe){switch(Fe.g){case 1:if(h.m!=$o&&h.m!=Zo)throw new Ye(1,7,7004);if(n!="subtitles"&&n!="captions"&&He("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){Fe.u(2);break}return R(Fe,B1(h,e),3);case 3:r=Fe.h;case 2:if(v=[],h.A&&(v=h.A.getCuePoints()),h.m!=Zo){Fe.u(4);break}return f&&(n="forced"),R(Fe,Kx(h,e,t,n,r,c||"",v),5);case 5:if(A=Or(t),N=h.Hc(),B=N.find(function($e){return Or($e.language)==A&&$e.label==(c||"")&&$e.kind==n}))return ts(h),Fe.return(B);throw new Ye(1,2,2012);case 4:if(z=Mi,J=h.h.duration,h.i&&(J=h.i.presentationTimeline.getDuration()),J==1/0)throw new Ye(1,4,4033);if(!v.length){Fe.u(6);break}return R(Fe,j1(h,e,h.F,h.g.streaming.retryParameters),7);case 7:fe=Fe.h,pe=zx(h,fe,r,v),Ee=new Blob([pe],{type:"text/vtt"}),e=rv(Ee),r="text/vtt";case 6:if(Oe={id:h.ag++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:f1(0,J,[e]),mimeType:r||"",codecs:u||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:c||null,type:z.wa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!f,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Di(r||"",u||"")])},ke=Di(Oe.mimeType,Oe.codecs),rt=Ic(ke),!rt)throw new Ye(2,2,2014,r);return h.i.textStreams.push(Oe),ts(h),Fe.return(qf(Oe))}})},p.th=function(e,t){var n=this,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt;return Ne(function(Fe){switch(Fe.g){case 1:if(n.m!=$o&&n.m!=Zo)throw new Ye(1,7,7004);if(t){Fe.u(2);break}return R(Fe,B1(n,e),3);case 3:t=Fe.h;case 2:if(t!="text/vtt")throw new Ye(1,2,2017,e);if(r=Mi,u=n.h.duration,n.i&&(u=n.i.presentationTimeline.getDuration()),u==1/0)throw new Ye(1,4,4045);return R(Fe,j1(n,e,n.F,n.g.streaming.retryParameters),4);case 4:if(c=Fe.h,f=_i[t],!f)throw new Ye(2,2,2014,t);for(h=f(),v={periodStart:0,segmentStart:0,segmentEnd:u,vttOffset:0},A=nr(c),N=h.parseMedia(A,v,e,[]),B=[],z=m(N),J=z.next(),fe={};!J.done;fe={ve:void 0,Cc:void 0},J=z.next())fe.Cc=J.value,fe.ve=null,pe=function($e){return function(){return $e.ve==null&&($e.ve=Ki([e],[$e.Cc.payload])),$e.ve||[]}}(fe),Ee=new Qe(fe.Cc.startTime,fe.Cc.endTime,pe,0,null,null,0,0,1/0),fe.Cc.payload.includes("#xywh")&&(Oe=fe.Cc.payload.split("#xywh=")[1].split(","),Oe.length===4&&Ee.bh({height:parseInt(Oe[3],10),positionX:parseInt(Oe[0],10),positionY:parseInt(Oe[1],10),width:parseInt(Oe[2],10)})),B.push(Ee);if(ke=t,!B.length){Fe.u(5);break}return R(Fe,vv(B[0].M()[0],n.F,n.g.manifest.retryParameters),6);case 6:ke=Fe.h;case 5:return rt={id:n.ag++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Mr(B),mimeType:ke||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.De,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Di(ke||"","")])},n.m==Zo?n.pd.push(rt):n.i.imageStreams.push(rt),ts(n),Fe.return(Gf(rt))}})},p.rh=function(e,t,n){var r=this,u,c,f,h;return Ne(function(v){switch(v.g){case 1:if(r.m!=$o&&r.m!=Zo)throw new Ye(1,7,7004);if(n){v.u(2);break}return R(v,B1(r,e),3);case 3:n=v.h;case 2:return u=[],r.A&&(u=r.A.getCuePoints()),R(v,Kx(r,e,t,"chapters",n,"",u),4);case 4:if(c=v.h,f=r.ug(),h=f.find(function(A){return A.language==t}),!h){v.u(5);break}return R(v,new Promise(function(A,N){r.l.pa(c,"load",A),r.l.pa(c,"error",function(){N(new Ye(1,2,2015))})}),6);case 6:return ts(r),v.return(h);case 5:throw new Ye(1,2,2012)}})};function B1(e,t){var n;return Ne(function(r){switch(r.g){case 1:return ce(r,2),R(r,vv(t,e.F,e.g.streaming.retryParameters),4);case 4:n=r.h,ye(r,3);break;case 2:be(r);case 3:if(n)return r.return(n);throw new Ye(1,2,2011,t)}})}function Kx(e,t,n,r,u,c,f){var h,v,A,N;return Ne(function(B){if(B.g==1)return u!="text/vtt"||f.length?R(B,j1(e,t,e.F,e.g.streaming.retryParameters),3):B.u(2);B.g!=2&&(h=B.h,v=zx(e,h,u,f),A=new Blob([v],{type:"text/vtt"}),t=rv(A),u="text/vtt"),N=document.createElement("track");var z=e.O,J=t;try{if(z.g.enabled){var fe=D1(z);fe.ot=O1,fe.su=!0;var pe=yv(fe),Ee=P1(J,pe)}else Ee=J}catch(Oe){Tt("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",Oe),Ee=J}return N.src=Ee,N.label=c,N.kind=r,N.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(N),B.return(N)})}function j1(e,t,n,r){var u,c,f;return Ne(function(h){if(h.g==1){u=$a,c=Bi([t],r),c.method="GET";var v=e.O;try{v.g.enabled&&cd(v,c,{ot:O1,su:!0})}catch(A){Tt("CMCD_TEXT_ERROR","Could not generate text CMCD data.",A)}return R(h,n.request(u,c).promise,2)}return f=h.h,h.return(f.data)})}function zx(e,t,n,r){var u=_i[n];if(u)return n=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=nr(t),t=n.parseMedia(t,e,null,[]),a5(t,r);throw new Ye(2,2,2014,n)}p.Wi=function(e,t){this.ga.width=e,this.ga.height=t},p.Jf=function(e){if(this.m==$o){var t=this.j;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.A)t=!1;else{for(var n=m(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.ed||r.La||r.ub||(r.ed=!1,Qa(t,r,e));t=!0}}else t=!1;return t},p.gf=function(){return He("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},p.Ph=function(){return this.bb};function ll(e){var t=ad();return t.streaming.failureCallback=function(n){if(e.U()){var r=null;n.code==1001||n.code==1002?(r=1,e.g.streaming.lowLatencyMode&&(r=.1)):n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.Jf(r))}},t.textDisplayFactory=function(){if(e.ee){var n=e.getConfiguration();return new ha(e.h,e.ee,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new fa(e.h,"Shaka Player TextTrack"):new da},t}p.fh=function(e){this.ee=e};function M5(e,t){for(var n=new Set,r=m(t.textStreams),u=r.next();!u.done;u=r.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||n.add(u.originalId);for(r=m(t.variants),u=r.next();!u.done;u=r.next())if((u=u.value.video)&&u.closedCaptions){for(var c=m(u.closedCaptions.keys()),f=c.next();!f.done;f=c.next())if(f=f.value,!n.has(f)){var h=f.startsWith("CC")?"application/cea-608":"application/cea-708",v=new Ti,A=u.closedCaptions.get(f);h={id:e.ag++,originalId:f,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:v,mimeType:h,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:A,originalLanguage:A,label:null,type:_r,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Di(h,"")])},t.textStreams.push(h),n.add(f)}}}function D5(e,t){var n,r,u,c,f;return Ne(function(h){return h.g==1?(n=e.audio,r=e.video,u=function(v,A){var N,B,z;return Ne(function(J){return J.g==1?v?R(J,v.createSegmentIndex(),2):J.return(null):(B=(N=v.segmentIndex.Ib(A))?N.next().value:null,B?(z=B.startTime,J.return(z)):J.return(null))})},R(h,u(n,t),2)):h.g!=3?(c=h.h,R(h,u(r,t),3)):(f=h.h,f!=null&&c!=null?h.return(Math.max(f,c)):f!=null?h.return(f):c!=null?h.return(c):h.return(t))})}function Z1(e){var t=e.pf();if(e.s&&e.N&&e.G){var n=e.K;if(n.j=t,tx(n),e.O&&(n=e.O,t||n.l||(n.l=!0),n.l&&t&&(n.m=!0),n.o=t),Rv(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Ae<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var r=e.g.streaming.liveSync.targetLatencyTolerance,u=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.T&&(e.T=Math.min(e.T+ ++e.Ae*u,n-r))}}t=new Map().set("buffering",t),e.dispatchEvent(ai("buffering",t))}function Yx(e){var t=e.h.playbackRate;t!=0&&(e.K&&e.K.set(t),t=ai("ratechange"),e.dispatchEvent(t))}function Rv(e){if(e.s&&e.N){var t=e.s.g,n="playing";e.N.g==rl?n="buffering":e.h.ended?n="ended":e.h.paused&&(n="paused");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var u=Date.now()/1e3;t.g.duration=u-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:u,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(ai("statechanged",n)))}}function Wx(e){var t=e.h.playbackRate,n=e.U();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.tg();u<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.ud(r,!1):u==1&&t!==e.K.lc()&&e.Uc()}if(n&&(n=e.Pb(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start))){r=e.g.streaming.liveSync.targetLatencyTolerance,u=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var c=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var f=e.g.streaming.liveSync.targetLatency,h=f+r,v=Math.max(0,f-r),A=e.g.streaming.liveSync.maxPlaybackRate,N=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(f=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?h=e.i.serviceDescription.targetLatency+r:e.i.serviceDescription.maxLatency!=null&&(h=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?v=Math.max(0,e.i.serviceDescription.targetLatency-r):e.i.serviceDescription.minLatency!=null&&(v=e.i.serviceDescription.minLatency),A=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,N=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.T||typeof f!="number"||(e.T=f);var B=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;u&&e.Fa&&e.T!==null&&typeof f=="number"&&e.Ae<B&&Date.now()-e.Fa>1e3*c&&(c=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.T=Math.max(e.T-(f-c)/2,c+r),e.Fa=Date.now()),u&&e.T!==null&&(h=e.T+r,v=e.T-r),f=n.end-e.h.currentTime,r=0,e.m==Zo&&(u=e.h.buffered,0<u.length&&(r=u.end(u.length-1),r=Math.max(A,r-n.end))),n=e.g.streaming.liveSync.panicMode,u=1e3*e.g.streaming.liveSync.panicThreshold,c=Date.now()-e.N.h,n&&!N&&(N=e.g.streaming.liveSync.minPlaybackRate),n&&N&&c<=u?t!=N&&e.ud(N,!1):h&&A&&f-r>h?(t!=A&&e.ud(A,!1),e.Fa=null):v&&N&&f-r<v?(t!=N&&e.ud(N,!1),e.Fa=null):t!==e.K.lc()&&(e.Uc(),e.Fa=Date.now())}}function xv(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.X)?(e.X=n,t=!0):(n=Math.max(e.X,n),e.X!=n&&(e.X=n,t=!0))),t){var r;e.X==0?r=ai("started"):e.X==25?r=ai("firstquartile"):e.X==50?r=ai("midpoint"):e.X==75?r=ai("thirdquartile"):e.X==100&&(r=ai("complete")),r&&e.dispatchEvent(r)}}}function kc(e){try{bn(e.ae,e.i)}catch(n){return hd(e,n),!1}var t=Kf(e.i.variants);return t=e.Ea.create(t),e.o.setVariants(Array.from(t.values())),!0}function dd(e,t,n,r,u){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,u=u===void 0?!0:u;var c;(c=kc(e)?e.o.chooseVariant():null)&&Nv(e,c,u,t,n,r)}function Nv(e,t,n,r,u,c){c=c===void 0?!1:c;var f=e.j.j;if(t==f)r&&cx(e.j,t,r,u,!0);else{var h=e.s.h;h.h!=t&&(h.h=t,h.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),cx(e.j,t,r,u,c,n),r=null,f&&(r=Fl(f)),t=Fl(t),n?(n=new Map().set("oldTrack",r).set("newTrack",t),e.L&&LR(e.L,t,e.hf()),n=ai("adaptation",n),pd(e,n)):Xx(e,r,t)}}function $x(e,t){var n=Array.from(e.h.audioTracks).find(function(r){return r.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=Vf(n),t=Vf(t),Xx(e,n,t))}function P5(e,t,n){if(e.g.autoShowText==0)return!1;if(e.g.autoShowText==1)return!0;var r=Or(e.g.preferredTextLanguage);return n=Or(n.language),e.g.autoShowText==2?el(n,r):e.g.autoShowText==3?t?(e=Or(t.language),el(n,r)&&!el(e,n)):!1:(He("Invalid autoShowText setting!"),!1)}function ts(e){var t=ai("trackschanged");pd(e,t)}function Xx(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.L&&LR(e.L,n,e.hf()),n=ai("variantchanged",t),pd(e,n)}function Mv(e){var t=ai("textchanged");pd(e,t)}function Qx(e){var t=ai("texttrackvisibility");pd(e,t)}function Jx(e){e.g.abr.enabled||q1(e);var t=new Map().set("newStatus",e.g.abr.enabled);pd(e,ai("abrstatuschanged",t))}function q1(e,t){if(t=t===void 0?!0:t,e.m==$o){e.he.stop();for(var n=m(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&kc(e)}}p.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===ru||!navigator.onLine||t==0)return!1;if(this.i.variants.some(function(h){var v=h[e.type];return v&&v.id!==e.id&&!h.disabledUntilTime?e.type=="audio"?e.language===v.language:!0:!1})){for(var n=!1,r=!1,u=m(this.i.variants),c=u.next();!c.done;c=u.next()){c=c.value;var f=c[e.type];f&&(f.id===e.id?(c.disabledUntilTime=Date.now()/1e3+t,n=!0):f.trickModeVideo&&f.trickModeVideo.id==e.id&&(r=!0))}return!n&&r?!1:(this.he.Ra(1),t=this.xb().video.reduce(function(h,v){return h+v.end-v.start},0),dd(this,!1,t,!0,!1),!0)}return!1};function hd(e,t){var n,r,u,c;return Ne(function(f){switch(f.g){case 1:if(e.m==ru)return f.return();if(t.severity===1&&e.s.K++,n=!0,!(e.Da&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){f.u(2);break}return ce(f,3),R(f,jj(e.j),5);case 5:r=f.h,n=!r,r&&(u=ai("mediasourcerecovered"),e.dispatchEvent(u)),ye(f,2);break;case 3:be(f),n=!0;case 2:if(!n)return f.return();t.severity===2&&q1(e,!1),c=ai("error",new Map().set("detail",t)),e.dispatchEvent(c),c.defaultPrevented&&(t.handled=!0),X(f)}})}p.addFont=function(e,t){var n,r,u,c,f;return Ne(function(h){if(h.g==1)return"fonts"in document&&"FontFace"in g?R(h,document.fonts.ready,3):h.u(0);if(!("entries"in document.fonts))return h.return();for(n=function(v){v=v.entries();for(var A=[],N=v.next();N.done===!1;)A.push(N.value),N=v.next();return A},r=m(n(document.fonts)),u=r.next();!u.done;u=r.next())if(c=u.value,c.family==e&&c.display=="swap")return h.return();f=new FontFace(e,"url("+t+")",{display:"swap"}),document.fonts.add(f),X(h)})};function Tp(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(ai(t,e))}function eN(e,t,n,r){r=r===void 0?!1:r,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(ai(r?"audiotrackchanged":"mediaqualitychanged",t))}function G1(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new Ye(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new Ye(2,3,3016,n,t,e.h.error.message))}function H1(e,t,n){0<t&&(e.U()||e.eh(t)),t=e.getDuration(),n<t&&(e.U()||e.Za(n))}function pd(e,t){Ne(function(n){if(n.g==1)return R(n,Promise.resolve(),2);e.m!=ru&&e.dispatchEvent(t),X(n)})}function tN(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Or(n.language)):t.add("und");return t}function nN(e){var t=new Map,n=new Map;e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u="und",c=[];r.language&&(u=Or(r.language)),r.type=="variant"?c=r.audioRoles:c=r.roles,c&&c.length||(c=[""]),t.has(u)||t.set(u,new Set),c=m(c);for(var f=c.next();!f.done;f=c.next())f=f.value,t.get(u).add(f),r.label&&(n.has(u)||n.set(u,new Map),n.get(u).set(f,r.label))}var h=[];return t.forEach(function(v,A){v=m(v);for(var N=v.next();!N.done;N=v.next()){N=N.value;var B=null;n.has(A)&&n.get(A).has(N)&&(B=n.get(A).get(N)),h.push({language:A,role:N,label:B})}}),h}ne("shaka.Player",hn),hn.prototype.addFont=hn.prototype.addFont,hn.prototype.setVideoContainer=hn.prototype.fh,hn.prototype.getManifestParserFactory=hn.prototype.Ph,hn.prototype.getManifest=hn.prototype.gf,hn.prototype.retryStreaming=hn.prototype.Jf,hn.prototype.setMaxHardwareResolution=hn.prototype.Wi,hn.prototype.addChaptersTrack=hn.prototype.rh,hn.prototype.addThumbnailsTrack=hn.prototype.th,hn.prototype.addTextTrackAsync=hn.prototype.sh,hn.prototype.getStats=hn.prototype.getStats,hn.prototype.getBufferedInfo=hn.prototype.xb,hn.prototype.getSegmentAvailabilityDuration=hn.prototype.Ld,hn.prototype.getPresentationStartTimeAsDate=hn.prototype.yg,hn.prototype.getPlayheadTimeAsDate=hn.prototype.Uh,hn.prototype.setTextTrackVisibility=hn.prototype.ah,hn.prototype.getChapters=hn.prototype.Ih,hn.prototype.getChaptersTracks=hn.prototype.ug,hn.prototype.isTextTrackVisible=hn.prototype.rf,hn.prototype.selectVariantsByLabel=hn.prototype.Ri,hn.prototype.selectTextLanguage=hn.prototype.Lf,hn.prototype.selectAudioLanguage=hn.prototype.Ug,hn.prototype.getTextLanguages=hn.prototype.Yh,hn.prototype.getAudioLanguages=hn.prototype.Fh,hn.prototype.getTextLanguagesAndRoles=hn.prototype.Zh,hn.prototype.getAudioLanguagesAndRoles=hn.prototype.Gh,hn.prototype.selectVariantTrack=hn.prototype.Mf,hn.prototype.selectTextTrack=hn.prototype.Vg,hn.prototype.getThumbnails=hn.prototype.zg,hn.prototype.getAllThumbnails=hn.prototype.Eh,hn.prototype.getImageTracks=hn.prototype.Mh,hn.prototype.getTextTracks=hn.prototype.Hc,hn.prototype.getVariantTracks=hn.prototype.mc,hn.prototype.cancelTrickPlay=hn.prototype.Uc,hn.prototype.trickPlay=hn.prototype.ud,hn.prototype.getPlaybackRate=hn.prototype.fb,hn.prototype.isBuffering=hn.prototype.pf,hn.prototype.getKeyStatuses=hn.prototype.Id,hn.prototype.getActiveSessionsMetadata=hn.prototype.ef,hn.prototype.getExpiration=hn.prototype.ad,hn.prototype.drmInfo=hn.prototype.drmInfo,hn.prototype.keySystem=hn.prototype.keySystem,hn.prototype.isFullyLoaded=hn.prototype.ji,hn.prototype.goToLive=hn.prototype.fi,hn.prototype.seekRange=hn.prototype.Pb,hn.prototype.isAudioOnly=hn.prototype.ii,hn.prototype.isInProgress=hn.prototype.pc,hn.prototype.isLive=hn.prototype.U,hn.prototype.getAdManager=hn.prototype.sg,hn.prototype.getAssetUri=hn.prototype.Gc,hn.prototype.getNetworkingEngine=hn.prototype.yb,hn.prototype.getMediaElement=hn.prototype.Sh,hn.prototype.getManifestType=hn.prototype.hf,hn.prototype.getLoadMode=hn.prototype.ff,hn.prototype.resetConfiguration=hn.prototype.Li,hn.prototype.getBufferFullness=hn.prototype.tg,hn.prototype.getNonDefaultConfiguration=hn.prototype.xg,hn.prototype.getConfiguration=hn.prototype.getConfiguration,hn.prototype.configure=hn.prototype.configure,hn.prototype.releaseAllMutexes=hn.prototype.Hi,hn.prototype.destroyAllPreloads=hn.prototype.Pe,hn.prototype.preload=hn.prototype.preload,hn.prototype.detachAndSavePreload=hn.prototype.og,hn.prototype.unloadAndSavePreload=hn.prototype.Zi,hn.prototype.load=hn.prototype.load,hn.prototype.updateStartTime=hn.prototype.cj,hn.prototype.unload=hn.prototype.ec,hn.prototype.detach=hn.prototype.detach,hn.prototype.attachCanvas=hn.prototype.xh,hn.prototype.attach=hn.prototype.Sb,hn.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,u,c,f,h;return Ne(function(v){switch(v.g){case 1:if(t={},!e){v.u(2);break}return R(v,Bt(),3);case 3:t=v.h;case 2:var A={};if(tr())for(var N in Yn)A[N]=!0;N=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var B=N.next();!B.done;B=N.next())B=B.value,A[B]=tr()?!!Yn[B]:ur(B);for(n=A,N='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(T(bu)),A={},N=m(N),B=N.next();!B.done;B=N.next()){B=B.value,A[B]=Ic(B)?!0:tr()?Ft(B)||!!Au(B):ur(B);var z=B.split(";")[0];A[z]=A[z]||A[B]}return r=A,R(v,Ai(),4);case 4:u=v.h,c={manifest:n,media:r,drm:t,hardwareResolution:u},f=K1;for(h in f)c[h]=f[h]();return v.return(c)}})},hn.isBrowserSupported=function(){if(g.Promise||He("A Promise implementation or polyfill is required"),!(g.Promise&&g.Uint8Array&&Array.prototype.forEach)||sn("Trident/"))return!1;var e=qs();return e&&9>e||!(g.MediaKeys&&g.navigator&&g.navigator.requestMediaKeySystemAccess&&g.MediaKeySystemAccess&&g.MediaKeySystemAccess.prototype.getConfiguration)?!1:tr()?!0:ur("application/x-mpegurl")},hn.setAdManagerFactory=function(e){Dv=e},hn.registerSupportPlugin=function(e,t){K1[e]=t},hn.prototype.destroy=hn.prototype.destroy;var ru=0,V1=1,$o=2,Zo=3;hn.LoadMode={DESTROYED:ru,NOT_LOADED:V1,MEDIA_SOURCE:$o,SRC_EQUALS:Zo},hn.version="v4.11.4";var rN=["4","11"];Gr=new function(e){this.g=e,this.i=fi,this.h=ao}(new qr(Number(rN[0]),Number(rN[1])));var K1={},Dv=null;function iN(){this.g=[],this.i=this.l=this.j=this.h=0}function O5(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function dr(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Et,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}p=dr.prototype,p.needsSkipUI=function(){return!1},p.getDuration=function(){return this.g.getDuration()},p.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},p.getRemainingTime=function(){return this.h.getRemainingTime()},p.isPaused=function(){return this.i},p.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},p.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.h.getAdSkippableState()},p.skip=function(){return this.h.skip()},p.pause=function(){return this.h.pause()},p.play=function(){return this.h.resume()},p.getVolume=function(){return this.h.getVolume()},p.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},p.isMuted=function(){return this.h.getVolume()==0},p.isLinear=function(){return this.g.isLinear()},p.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},p.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},p.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},p.getTitle=function(){return this.g.getTitle()},p.getDescription=function(){return this.g.getDescription()},p.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},p.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},p.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},p.getAdId=function(){return this.g.getAdId()},p.getCreativeAdId=function(){return this.g.getCreativeAdId()},p.getAdvertiserName=function(){return this.g.getAdvertiserName()},p.getMediaUrl=function(){return this.g.getMediaUrl()},p.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},p.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},p.release=function(){this.h=this.g=null},ne("shaka.ads.ClientSideAd",dr),dr.prototype.release=dr.prototype.release,dr.prototype.getPodIndex=dr.prototype.getPodIndex,dr.prototype.getTimeOffset=dr.prototype.getTimeOffset,dr.prototype.getMediaUrl=dr.prototype.getMediaUrl,dr.prototype.getAdvertiserName=dr.prototype.getAdvertiserName,dr.prototype.getCreativeAdId=dr.prototype.getCreativeAdId,dr.prototype.getAdId=dr.prototype.getAdId,dr.prototype.getVastMediaWidth=dr.prototype.getVastMediaWidth,dr.prototype.getVastMediaHeight=dr.prototype.getVastMediaHeight,dr.prototype.getVastMediaBitrate=dr.prototype.getVastMediaBitrate,dr.prototype.getDescription=dr.prototype.getDescription,dr.prototype.getTitle=dr.prototype.getTitle,dr.prototype.getPositionInSequence=dr.prototype.getPositionInSequence,dr.prototype.getSequenceLength=dr.prototype.getSequenceLength,dr.prototype.setMuted=dr.prototype.setMuted,dr.prototype.resize=dr.prototype.resize,dr.prototype.isLinear=dr.prototype.isLinear,dr.prototype.isMuted=dr.prototype.isMuted,dr.prototype.setVolume=dr.prototype.setVolume,dr.prototype.getVolume=dr.prototype.getVolume,dr.prototype.play=dr.prototype.play,dr.prototype.pause=dr.prototype.pause,dr.prototype.skip=dr.prototype.skip,dr.prototype.canSkipNow=dr.prototype.canSkipNow,dr.prototype.getTimeUntilSkippable=dr.prototype.getTimeUntilSkippable,dr.prototype.isSkippable=dr.prototype.isSkippable,dr.prototype.isPaused=dr.prototype.isPaused,dr.prototype.getRemainingTime=dr.prototype.getRemainingTime,dr.prototype.getMinSuggestedDuration=dr.prototype.getMinSuggestedDuration,dr.prototype.getDuration=dr.prototype.getDuration,dr.prototype.needsSkipUI=dr.prototype.needsSkipUI;function ti(){}function oN(e,t){var n=[],r=0;t!=null&&(r=t),e=m(sr(e,"Ad"));for(var u=e.next();!u.done;u=e.next())if((u=Hi(u.value,"InLine"))&&(u=Hi(u,"Creatives"))){u=m(sr(u,"Creative"));for(var c=u.next();!c.done;c=u.next()){var f=Hi(c.value,"Linear");if(f&&(c=null,f.attributes.skipoffset&&(c=_u(f.attributes.skipoffset),isNaN(c)&&(c=null)),f=Hi(f,"MediaFiles"))){var h=sr(f,"MediaFile");for(f=h,h=h.filter(function(v){return v.attributes.delivery=="streaming"}),h.length&&(f=h),f=f.sort(function(v,A){return(parseInt(A.attributes.height,10)||0)-(parseInt(v.attributes.height,10)||0)}),f=m(f),h=f.next();!h.done;h=f.next())if(h=ei(h.value)){n.push({id:null,startTime:r,endTime:null,uri:h,isSkippable:c!=null,skipOffset:c,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:t==null,post:t==1/0,timelineRange:!1});break}}}}return n}ne("shaka.ads.Utils",ti),ti.ADS_LOADED="ads-loaded",ti.AD_STARTED="ad-started",ti.AD_FIRST_QUARTILE="ad-first-quartile",ti.AD_MIDPOINT="ad-midpoint",ti.AD_THIRD_QUARTILE="ad-third-quartile",ti.AD_COMPLETE="ad-complete",ti.AD_STOPPED="ad-stopped",ti.AD_SKIPPED="ad-skipped",ti.AD_VOLUME_CHANGED="ad-volume-changed",ti.AD_MUTED="ad-muted",ti.AD_PAUSED="ad-paused",ti.AD_RESUMED="ad-resumed",ti.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",ti.CUEPOINTS_CHANGED="ad-cue-points-changed",ti.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",ti.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",ti.AD_CLICKED="ad-clicked",ti.AD_PROGRESS="ad-progress",ti.AD_BUFFERING="ad-buffering",ti.AD_IMPRESSION="ad-impression",ti.AD_DURATION_CHANGED="ad-duration-changed",ti.AD_CLOSED="ad-closed",ti.AD_LOADED="ad-loaded",ti.ALL_ADS_COMPLETED="all-ads-completed",ti.AD_LINEAR_CHANGED="ad-linear-changed",ti.AD_METADATA="ad-metadata",ti.AD_RECOVERABLE_ERROR="ad-recoverable-error",ti.AD_ERROR="ad-error",ti.AD_BREAK_READY="ad-break-ready",ti.AD_INTERACTION="ad-interaction",ti.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",ti.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",ti.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function Pv(e,t,n,r,u){var c=this;this.s=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=u,this.j=null,this.h=new Et,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.s,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.11.4"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(f){L5(c,f)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(f){aN(c,f)}),this.h.D(this.i,"ended",function(){c.m.contentComplete()}),this.h.pa(this.i,"play",function(){c.F=!0})}Pv.prototype.configure=function(e){this.o=e},Pv.prototype.stop=function(){this.g&&this.g.stop(),this.s&&ud(this.s)},Pv.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function aN(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new jn("ad-error",t)),Lv(e,null),e.l(new jn("ad-cue-points-changed",new Map().set("cuepoints",[])))}function L5(e,t){if(e.l(new jn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new jn("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=m(r);for(var u=r.next();!u.done;u=r.next())t.push({start:u.value,end:null});e.l(new jn("ad-cue-points-changed",new Map().set("cuepoints",t)))}k5(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,Ov(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Ov(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in g?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Ov(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Ov(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.pa(e.i,"play",function(){e.F=!0,e.g.start()})}catch(c){Lv(e,null)}}function Ov(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function k5(e){function t(n,r){n=new Map().set("originalEvent",n),e.l(new jn(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){aN(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){sN(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){sN(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Lv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){Lv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function sN(e,t){var n=t.getAd();n?(e.j=new dr(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new jn("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new jn("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):He("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Lv(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new jn("ad-content-resume-requested")),e.l(new jn("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function hr(e,t,n,r,u,c){this.g=e,this.h=t,this.j=n,this.l=r,this.m=u,this.i=c}p=hr.prototype,p.needsSkipUI=function(){return!0},p.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},p.isPaused=function(){return this.g.paused},p.isSkippable=function(){return this.h},p.getTimeUntilSkippable=function(){if(this.h){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.l()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.play()},p.getVolume=function(){return this.g.volume},p.setVolume=function(e){this.g.volume=e},p.isMuted=function(){return this.g.muted},p.isLinear=function(){return!0},p.resize=function(){},p.setMuted=function(e){this.g.muted=e},p.getSequenceLength=function(){return this.m},p.getPositionInSequence=function(){return this.i},p.getTitle=function(){return""},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return""},p.getCreativeAdId=function(){return""},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){this.g=null},ne("shaka.ads.InterstitialAd",hr),hr.prototype.release=hr.prototype.release,hr.prototype.getPodIndex=hr.prototype.getPodIndex,hr.prototype.getTimeOffset=hr.prototype.getTimeOffset,hr.prototype.getMediaUrl=hr.prototype.getMediaUrl,hr.prototype.getAdvertiserName=hr.prototype.getAdvertiserName,hr.prototype.getCreativeAdId=hr.prototype.getCreativeAdId,hr.prototype.getAdId=hr.prototype.getAdId,hr.prototype.getVastMediaWidth=hr.prototype.getVastMediaWidth,hr.prototype.getVastMediaHeight=hr.prototype.getVastMediaHeight,hr.prototype.getVastMediaBitrate=hr.prototype.getVastMediaBitrate,hr.prototype.getDescription=hr.prototype.getDescription,hr.prototype.getTitle=hr.prototype.getTitle,hr.prototype.getPositionInSequence=hr.prototype.getPositionInSequence,hr.prototype.getSequenceLength=hr.prototype.getSequenceLength,hr.prototype.setMuted=hr.prototype.setMuted,hr.prototype.resize=hr.prototype.resize,hr.prototype.isLinear=hr.prototype.isLinear,hr.prototype.isMuted=hr.prototype.isMuted,hr.prototype.setVolume=hr.prototype.setVolume,hr.prototype.getVolume=hr.prototype.getVolume,hr.prototype.play=hr.prototype.play,hr.prototype.pause=hr.prototype.pause,hr.prototype.skip=hr.prototype.skip,hr.prototype.canSkipNow=hr.prototype.canSkipNow,hr.prototype.getTimeUntilSkippable=hr.prototype.getTimeUntilSkippable,hr.prototype.isSkippable=hr.prototype.isSkippable,hr.prototype.isPaused=hr.prototype.isPaused,hr.prototype.getRemainingTime=hr.prototype.getRemainingTime,hr.prototype.getMinSuggestedDuration=hr.prototype.getMinSuggestedDuration,hr.prototype.getDuration=hr.prototype.getDuration,hr.prototype.needsSkipUI=hr.prototype.needsSkipUI;function Sp(e,t,n,r){var u=this;this.G=e,this.B=t,this.h=n,this.F=null,this.o=!0,this.m=this.h,this.g=r,this.H=new Set,this.A=new Set,this.s=new Map,this.i=new hn,Y1(this),this.K=new Et,this.j=new Et,this.I=!1,this.C=this.l=null,this.K.D(this.h,"timeupdate",function(){if(!u.I){var c=u.l==null||u.l==0;u.l=u.h.currentTime,u.C&&!u.C.pre&&!u.C.post&&u.l<u.C.startTime&&(u.C=null),(c=uN(u,c,0,u.C))&&lN(u,c,1,1,Date.now())}}),new on(function(){var c,f,h,v,A,N,B,z,J,fe;return Ne(function(pe){switch(pe.g){case 1:if(!u.A.size||u.I||u.l==null){pe.u(0);break}c=!1,f=Array.from(u.A),h=u.B.Pb(),v=m(f),A=v.next();case 3:if(A.done){pe.u(5);break}if(N=A.value,B=N.endTime||N.startTime,!(1<=h.start-B)){z=N.startTime-u.l,0<z&&10>=z&&(u.s.has(N)||u.s.set(N,u.i.preload(N.uri))),pe.u(4);break}if(!u.s.has(N)){pe.u(7);break}return R(pe,u.s.get(N),8);case 8:(J=pe.h)&&J.destroy(),u.s.delete(N);case 7:fe=JSON.stringify(N),u.H.has(fe)&&u.H.delete(fe),u.A.delete(N),c=!0;case 4:A=v.next(),pe.u(3);break;case 5:c&&z1(u),X(pe)}})}).Ra(1)}Sp.prototype.configure=function(e){this.G&&this.o==e.supportsMultipleMediaElements&&((this.o=!e.supportsMultipleMediaElements)?(this.m=this.h,this.F&&(this.F.parentElement&&this.G.removeChild(this.F),this.F=null)):(this.F||(e=document.createElement(this.h.tagName),e.autoplay=!0,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgb(0, 0, 0)",e.setAttribute("playsinline",""),this.F=e),this.m=this.F))},Sp.prototype.stop=function(){this.j&&this.j.Qa(),this.H.clear(),this.A.clear(),this.i.Pe(),this.s.clear(),this.i.detach(),this.I=!1,this.C=this.l=null},Sp.prototype.release=function(){this.stop(),this.K&&this.K.release(),this.j&&this.j.release(),this.G&&ud(this.G),this.i.destroy()};function F5(e,t){var n;Ne(function(r){if(r.g==1)return e.B.ff()==Zo&&e.o?(He("Unsupported HLS interstitial when using single media element",t),r.return()):(Y1(e),R(r,U5(e,t),2));n=r.h,n.length?kv(e,n):He("Unsupported HLS interstitial",t),X(r)})}Sp.prototype.addAdUrlInterstitial=function(e){var t=this,n,r,u,c,f,h,v,A,N;return Ne(function(B){switch(B.g){case 1:return n={type:12},R(B,W1(t,e,n),2);case 2:if(r=B.h,u=Tu(r,"VAST,vmap:VMAP"),!u)throw new Ye(2,10,4001);if(c=[],u.tagName=="VAST"){c=oN(u,t.l),B.u(3);break}if(u.tagName!="vmap:VMAP"){B.u(3);break}for(var z=[],J=m(sr(u,"vmap:AdBreak")),fe=J.next();!fe.done;fe=J.next()){var pe=fe.value,Ee=pe.attributes.timeOffset;Ee&&(fe=null,Ee=="start"?fe=0:Ee=="end"?fe=1/0:fe=_u(Ee),(pe=Hi(pe,"vmap:AdSource"))&&(pe=Hi(pe,"vmap:AdTagURI"))&&(pe=ei(pe))&&z.push({time:fe,uri:pe}))}f=m(z),h=f.next();case 5:if(h.done){B.u(3);break}return v=h.value,R(B,W1(t,v.uri,n),8);case 8:if(A=B.h,N=Tu(A,"VAST"),!N)throw new Ye(2,10,4001);c.push.apply(c,T(oN(N,v.time))),h=f.next(),B.u(5);break;case 3:kv(t,c),X(B)}})};function kv(e,t){if(e.B.ff()==Zo&&e.o)He("Unsupported interstitial when using single media element",t);else{var n=!1;t=m(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var u=JSON.stringify(r);if(!e.H.has(u)){if(n=!0,e.H.add(u),e.A.add(r),u=!1,r.pre&&e.l==null)u=!0;else if(r.startTime==0&&!r.canJump)u=!0;else if(e.l!=null){var c=r.startTime-e.l;0<c&&10>=c&&(u=!0)}u&&(e.s.has(r)||e.s.set(r,e.i.preload(r.uri)))}}n&&z1(e)}}function uN(e,t,n,r){var u=0,c=null;if(e.A.size&&e.l!=null){var f=e.h.ended,h=Array.from(e.A).sort(function(B,z){return z.startTime-B.startTime});h=m(h);for(var v=h.next();!v.done;v=h.next()){v=v.value;var A=!1;if(t)A=v.pre;else if(f)A=v.post;else if(!v.pre&&!v.post){var N=e.l-Math.round(1e3*v.startTime)/1e3;0<N&&(1>=N||!v.canJump)&&(A=!(1<N&&r&&!r.pre&&!r.post&&r.startTime>=v.startTime))}if(A){if(u==n){c=v;break}u++}}}return c}function lN(e,t,n,r,u,c){c=c===void 0?0:c;var f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe;Ne(function($e){switch($e.g){case 1:if(e.C=t,f=Date.now(),!e.m.parentElement&&e.G&&e.G.appendChild(e.m),r==1&&n==1&&(n=Array.from(e.A).filter(function(nt){return t.pre?nt.pre==t.pre:t.post?nt.post==t.post:.001>Math.abs(nt.startTime-t.startTime)}).length),(t.once||t.pre)&&(c++,e.A.delete(t),z1(e)),e.I=!0,!e.o||r!=1){$e.u(2);break}return e.g(new jn("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),h=new Lr,v=function(nt){return Ne(function(ct){if(ct.g==1)return nt.state!="detach"?ct.u(0):Hu()?R(ct,new Promise(function(gt){return new on(gt).Z(.1)}),3):ct.u(3);h.resolve(),e.j.$a(e.B,"onstatechange",v),X(ct)})},e.j.D(e.B,"onstatechange",v),R($e,h,2);case 2:return e.o||(e.h.pause(),t.resumeOffset!=null&&t.resumeOffset!=0&&(e.h.currentTime+=t.resumeOffset)),A=!1,N=null,B=function(){if(!e.o&&t.resumeOffset==null)if(t.timelineRange&&t.endTime&&t.endTime!=1/0)e.h.currentTime!=t.endTime&&(e.h.currentTime=t.endTime);else{var nt=Date.now();e.h.currentTime+=(nt-u)/1e3,u=nt}},z=function(){var nt,ct;return Ne(function(gt){if(gt.g==1)return B(),N&&N.stop(),(nt=uN(e,t.pre,r-c))?(e.g(new jn("ad-stopped")),e.j.Qa(),lN(e,nt,n,++r,u,c),gt.u(0)):e.o?R(gt,e.i.detach(),4):R(gt,e.i.ec(),4);e.o&&(ct=t.resumeOffset,ct==null&&(ct=t.timelineRange&&t.endTime&&t.endTime!=1/0?t.endTime-(e.l||0):(Date.now()-u)/1e3),e.g(new jn("ad-content-resume-requested",new Map().set("offset",ct)))),e.g(new jn("ad-stopped")),e.j.Qa(),e.I=!1,e.o||(B(),e.h.ended||e.h.play()),X(gt)})},J=function(nt){return Ne(function(ct){return A?ct.return():(A=!0,e.g(new jn("ad-error",new Map().set("originalEvent",nt))),R(ct,z(),0))})},fe=function(){return Ne(function(nt){if(nt.g==1)return A?nt.return():(A=!0,R(nt,z(),2));e.g(new jn("ad-complete")),X(nt)})},pe=function(){return Ne(function(nt){return A?nt.return():(A=!0,e.g(new jn("ad-skipped")),R(nt,z(),0))})},Ee=new hr(e.m,t.isSkippable,t.skipOffset,pe,n,r),e.o||(Ee.setMuted(e.h.muted),Ee.setVolume(e.h.volume)),e.g(new jn("ad-started",new Map().set("ad",Ee))),Ee.canSkipNow()&&e.g(new jn("ad-skip-state-changed")),Oe=new Set,e.j.pa(e.i,"error",J),e.j.D(e.m,"timeupdate",function(){var nt=e.m.duration;nt&&(t.isSkippable&&t.skipOffset&&Ee.canSkipNow()&&0<Ee.getRemainingTime()&&0<Ee.getDuration()&&e.g(new jn("ad-skip-state-changed")),nt=100*e.m.currentTime/nt,25<=nt&&!Oe.has("firstquartile")?(B(),e.g(new jn("ad-first-quartile")),Oe.add("firstquartile")):50<=nt&&!Oe.has("midpoint")?(B(),e.g(new jn("ad-midpoint")),Oe.add("midpoint")):75<=nt&&!Oe.has("thirdquartile")&&(B(),e.g(new jn("ad-third-quartile")),Oe.add("thirdquartile")))}),e.j.pa(e.i,"complete",fe),e.j.D(e.m,"play",function(){e.g(new jn("ad-resumed"))}),e.j.D(e.m,"pause",function(){e.g(new jn("ad-paused"))}),e.j.D(e.m,"volumechange",function(){e.m.muted?e.g(new jn("ad-muted")):e.g(new jn("ad-volume-changed"))}),ce($e,4),t.playoutLimit&&(N=new on(function(){Ee.skip()}).Z(t.playoutLimit)),Y1(e),R($e,e.i.Sb(e.m),6);case 6:return e.s.has(t)?R($e,e.s.get(t),10):R($e,e.i.load(t.uri),8);case 10:return ke=$e.h,e.s.delete(t),ke?R($e,e.i.load(ke),8):R($e,e.i.load(t.uri),8);case 8:rt=(Date.now()-f)/1e3,e.g(new jn("ads-loaded",new Map().set("loadTime",rt))),e.o&&e.h.play(),ye($e,0);break;case 4:Fe=be($e),J(Fe),X($e)}})}function U5(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt,It,Ut,Nt,tn,Ht,Wt,En,An;return Ne(function(Vn){switch(Vn.g){case 1:if(n=[],!t||(r=t.values.find(function(Qn){return Qn.key=="X-ASSET-URI"}),u=t.values.find(function(Qn){return Qn.key=="X-ASSET-LIST"}),!r&&!u))return Vn.return(n);if(c=null,(f=t.values.find(function(Qn){return Qn.key=="ID"}))&&(c=f.data),h=t.values.find(function(Qn){return Qn.key=="X-RESTRICT"}),A=v=!0,h&&h.data&&(N=h.data,v=!N.includes("SKIP"),A=!N.includes("JUMP")),B=null,(z=t.values.find(function(Qn){return Qn.key=="X-RESUME-OFFSET"}))&&(J=z.data,B=parseFloat(J),isNaN(B)&&(B=null)),fe=null,(pe=t.values.find(function(Qn){return Qn.key=="X-PLAYOUT-LIMIT"}))&&(Ee=pe.data,fe=parseFloat(Ee),isNaN(fe)&&(fe=null)),rt=ke=Oe=!1,(Fe=t.values.find(function(Qn){return Qn.key=="CUE"}))&&($e=Fe.data,Oe=$e.includes("ONCE"),ke=$e.includes("PRE"),rt=$e.includes("POST")),nt=!1,(ct=t.values.find(function(Qn){return Qn.key=="X-TIMELINE-OCCUPIES"}))?(gt=ct.data,nt=gt.includes("RANGE")):!z&&e.B.U()&&(nt=!ke&&!rt),r){if(Lt=r.data,!Lt)return Vn.return(n);n.push({id:c,startTime:t.startTime,endTime:t.endTime,uri:Lt,isSkippable:v,skipOffset:v?0:null,canJump:A,resumeOffset:B,playoutLimit:fe,once:Oe,pre:ke,post:rt,timelineRange:nt}),Vn.u(2);break}if(!u){Vn.u(2);break}return It=u.data,It?(ce(Vn,4),Ut={type:11},R(Vn,W1(e,It,Ut),6)):Vn.return(n);case 6:for(Nt=Vn.h,tn=Cr(Nt),Ht=JSON.parse(tn),Wt=m(Ht.ASSETS),En=Wt.next();!En.done;En=Wt.next())An=En.value,An.URI&&n.push({id:c,startTime:t.startTime,endTime:t.endTime,uri:An.URI,isSkippable:v,skipOffset:v?0:null,canJump:A,resumeOffset:B,playoutLimit:fe,once:Oe,pre:ke,post:rt,timelineRange:nt});ye(Vn,2);break;case 4:be(Vn);case 2:return Vn.return(n)}})}function z1(e){for(var t=[],n=m(e.A),r=n.next(),u={};!r.done;u={Rb:void 0},r=n.next())r=r.value,u.Rb={start:r.startTime,end:null},r.pre?(u.Rb.start=0,u.Rb.end=null):r.post?(u.Rb.start=-1,u.Rb.end=null):r.timelineRange&&(u.Rb.end=r.endTime),t.find(function(c){return function(f){return c.Rb.start==f.start&&c.Rb.end==f.end}}(u))||t.push(u.Rb);e.g(new jn("ad-cue-points-changed",new Map().set("cuepoints",t)))}function Y1(e){e.i.configure(e.B.xg());var t=e.i.yb();t.jg(),t.kg(),tp(e.B.yb(),t)}function W1(e,t,n){var r,u,c;return Ne(function(f){return f.g==1?(r=Bi([t],ua()),u=e.B.yb().request(7,r,n),R(f,u.promise,2)):(c=f.h,f.return(c.data))})}function lr(e,t,n,r,u){this.h=e,this.j=_u(this.h.skipOffset),this.g=u,this.i=t,this.l=n,this.o=r,this.m=!1}p=lr.prototype,p.needsSkipUI=function(){return!0},p.getDuration=function(){return this.h.durationInSeconds},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},p.isPaused=function(){return this.g.paused},p.isSkippable=function(){return typeof this.j=="number"},p.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.play()},p.getVolume=function(){return this.g.volume},p.setVolume=function(e){this.g.volume=e},p.isMuted=function(){return this.g.muted},p.isLinear=function(){return this.o},p.resize=function(){},p.setMuted=function(e){this.g.muted=e},p.getSequenceLength=function(){return this.l?this.l:1},p.getPositionInSequence=function(){return this.i?this.i:1},p.getTitle=function(){return this.h.adTitle},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return this.h.adId},p.getCreativeAdId=function(){return this.h.creativeId},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){this.l=this.i=this.g=this.h=null},ne("shaka.ads.MediaTailorAd",lr),lr.prototype.release=lr.prototype.release,lr.prototype.getPodIndex=lr.prototype.getPodIndex,lr.prototype.getTimeOffset=lr.prototype.getTimeOffset,lr.prototype.getMediaUrl=lr.prototype.getMediaUrl,lr.prototype.getAdvertiserName=lr.prototype.getAdvertiserName,lr.prototype.getCreativeAdId=lr.prototype.getCreativeAdId,lr.prototype.getAdId=lr.prototype.getAdId,lr.prototype.getVastMediaWidth=lr.prototype.getVastMediaWidth,lr.prototype.getVastMediaHeight=lr.prototype.getVastMediaHeight,lr.prototype.getVastMediaBitrate=lr.prototype.getVastMediaBitrate,lr.prototype.getDescription=lr.prototype.getDescription,lr.prototype.getTitle=lr.prototype.getTitle,lr.prototype.getPositionInSequence=lr.prototype.getPositionInSequence,lr.prototype.getSequenceLength=lr.prototype.getSequenceLength,lr.prototype.setMuted=lr.prototype.setMuted,lr.prototype.resize=lr.prototype.resize,lr.prototype.isLinear=lr.prototype.isLinear,lr.prototype.isMuted=lr.prototype.isMuted,lr.prototype.setVolume=lr.prototype.setVolume,lr.prototype.getVolume=lr.prototype.getVolume,lr.prototype.play=lr.prototype.play,lr.prototype.pause=lr.prototype.pause,lr.prototype.skip=lr.prototype.skip,lr.prototype.canSkipNow=lr.prototype.canSkipNow,lr.prototype.getTimeUntilSkippable=lr.prototype.getTimeUntilSkippable,lr.prototype.isSkippable=lr.prototype.isSkippable,lr.prototype.isPaused=lr.prototype.isPaused,lr.prototype.getRemainingTime=lr.prototype.getRemainingTime,lr.prototype.getMinSuggestedDuration=lr.prototype.getMinSuggestedDuration,lr.prototype.getDuration=lr.prototype.getDuration,lr.prototype.needsSkipUI=lr.prototype.needsSkipUI;function wp(e,t,n,r){this.B=e,this.K=t,this.h=n,this.l=null,this.T=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.O=!0,this.H="",this.o=new Et}wp.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.$a(t.target,t.type,t.listener);gd(this),this.m=[],this.s=[],this.G="",this.O=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},wp.prototype.release=function(){this.stop(),this.o&&this.o.release()},wp.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(j5(this,this.G,this.O),this.O=!1)},wp.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function B5(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe;Ne(function(pe){if(pe.g==1)return r={type:7},u=Bi([t],ua()),u.method="POST",n&&(c=JSON.stringify(n),u.body=bi(c)),f=e.K.request(7,u,r),ce(pe,2),R(pe,f.promise,4);if(pe.g!=2){if(h=pe.h,v=Cr(h.data),A=JSON.parse(v),A.manifestUrl&&A.trackingUrl)N=new Ei(t),B=new Ei(A.trackingUrl),e.G=N.resolve(B).toString(),z=Date.now()/1e3,J=z-e.T,e.i(new jn("ads-loaded",new Map().set("loadTime",J))),fe=new Ei(A.manifestUrl),e.l.resolve(N.resolve(fe).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return ye(pe,0)}if(be(pe),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,pe.return();e.l.resolve(e.H),e.l=null,X(pe)})}function j5(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke;Ne(function(rt){if(rt.g==1)return r={type:8},u=Bi([t],ua()),c=e.K.request(7,u,r),ce(rt,2),R(rt,c.promise,4);if(rt.g!=2){if(f=rt.h,h=[],v=Cr(f.data),A=JSON.parse(v),0<A.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(A.avails)){for(e.j=A.avails,N=m(e.j),B=N.next();!B.done;B=N.next())for(z=B.value,J=m(z.nonLinearAdsList),fe=J.next();!fe.done;fe=J.next())for(pe=fe.value,Ee=m(pe.nonLinearAdList),Oe=Ee.next();!Oe.done;Oe=Ee.next())ke=Oe.value,Z5(e,ke);h=e.getCuePoints(),e.i(new jn("ad-cue-points-changed",new Map().set("cuepoints",h)))}}else e.j.length&&e.i(new jn("ad-cue-points-changed",new Map().set("cuepoints",h))),gd(e),e.j=[];return n&&(e.I||0<h.length)&&q5(e),ye(rt,0)}be(rt),X(rt)})}function Z5(e,t){var n,r,u,c,f,h,v,A;Ne(function(N){if(N.g==1)return!t.staticResource||(n=cN(t),e.F.get(n))?N.return():(r={type:9},u=Bi([t.staticResource],ua()),c=e.K.request(7,u,r),ce(N,2),e.F.set(n,[]),R(N,c.promise,4));if(N.g!=2)return f=N.h,h=Cr(f.data),v=JSON.parse(h),A=v.apps,e.F.set(n,A),ye(N,0);be(N),e.F.delete(n),X(N)})}function cN(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function q5(e){dN(e),e.I||(fN(e),e.o.D(e.h,"seeked",function(){fN(e)}),e.o.D(e.h,"ended",function(){gd(e)})),e.o.D(e.h,"timeupdate",function(){dN(e)})}function fN(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,r,u=m(e.j),c=u.next();!c.done;c=u.next()){c=c.value;for(var f=m(c.ads),h=f.next();!h.done;h=f.next())if(h=h.value,!r)h.startTimeInSeconds<t&&(r=h,n=c);else if(h.startTimeInSeconds<t&&h.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=h,n=c;break}}n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function dN(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.C,u=r.startTimeInSeconds+.5*r.durationInSeconds,c=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),qo(e,"firstQuartile")):t>=u&&!e.s.includes("midpoint")?(e.s.push("midpoint"),qo(e,"midpoint")):t>=c&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),qo(e,"thirdQuartile")),r=e.g.getRemainingTime(),u=e.g.getDuration(),e.g.canSkipNow()&&0<r&&0<u&&qo(e,"skipStateChanged"),0<u&&(0>=r||r>u)&&gd(e)}if(!e.g||!e.g.isLinear()){e:for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!(e.g&&e.g.isLinear()));u=r.next())for(c=0;c<u.ads.length;c++){var f=u.ads[c],h=f.startTimeInSeconds+f.durationInSeconds;if(f.startTimeInSeconds<=t&&h>t){if(e.N.includes(f.adId)){if(e.h.ended)continue;e.h.currentTime=h;break e}gd(e),e.L=u,e.g=new lr(f,c+1,u.ads.length,!0,e.h),e.C=f,c===0&&qo(e,"breakStart"),hN(e);break}}if(!e.g){for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!e.g);u=r.next())for(c=0;c<u.nonLinearAdsList.length;c++)if(f=u.nonLinearAdsList[c],f.nonLinearAdList.length){h=u.startTimeInSeconds;var v=e.F.get(cN(f.nonLinearAdList[0]));if(h<=t&&v&&v.length){gd(e),h=e,v=m(v);for(var A=v.next();!A.done;A=v.next())if(A=A.value,A.data.source.length){var N=document.createElement("img");N.src=A.data.source[0].url,N.style.top=(A.placeholder.top||0)+"%",N.style.height=100-(A.placeholder.top||0)+"%",N.style.left=(A.placeholder.left||0)+"%",N.style.maxWidth=100-(A.placeholder.left||0)+"%",N.style.objectFit="contain",N.style.position="absolute",h.B.appendChild(N)}e.L=u,e.g=new lr(f,c+1,u.ads.length,!1,e.h),e.C=f,c===0&&qo(e,"breakStart"),hN(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function gd(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId);var t=e.g.m;t!==void 0&&t?qo(e,"skip"):qo(e,"complete"),t=m(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.$a(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&qo(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function hN(e){var t=!1;e.h.paused?t=!0:(qo(e,"impression"),qo(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&qo(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||qo(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(qo(e,"impression"),qo(e,"start"),t=!1):qo(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){qo(e,"pause")}});for(var n=m(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function qo(e,t){var n=e.C.trackingEvents.find(function(c){return c.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(c){return c.eventType==t})),n){var r={type:10};n=m(n.beaconUrls);for(var u=n.next();!u.done;u=n.next())(u=u.value)&&u!=""&&(u=Bi([u],ua()),u.method="POST",e.K.request(7,u,r))}switch(t){case"impression":e.i(new jn("ad-impression"));break;case"start":e.i(new jn("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new jn("ad-muted"));break;case"unmute":e.i(new jn("ad-volume-changed"));break;case"resume":e.i(new jn("ad-resumed"));break;case"pause":e.i(new jn("ad-paused"));break;case"firstQuartile":e.i(new jn("ad-first-quartile"));break;case"midpoint":e.i(new jn("ad-midpoint"));break;case"thirdQuartile":e.i(new jn("ad-third-quartile"));break;case"complete":e.i(new jn("ad-complete")),e.i(new jn("ad-stopped"));break;case"skip":e.i(new jn("ad-skipped")),e.i(new jn("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new jn("ad-skip-state-changed"))}}function pr(e,t){this.g=e,this.i=null,this.h=t}p=pr.prototype,p.needsSkipUI=function(){return!0},p.getDuration=function(){return this.i?this.i.duration:-1},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},p.isPaused=function(){return this.h.paused},p.isSkippable=function(){return this.g.isSkippable()},p.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.h.currentTime+=this.getRemainingTime()},p.pause=function(){return this.h.pause()},p.play=function(){return this.h.play()},p.getVolume=function(){return this.h.volume},p.setVolume=function(e){this.h.volume=e},p.isMuted=function(){return this.h.muted},p.isLinear=function(){return!0},p.resize=function(){},p.setMuted=function(e){this.h.muted=e},p.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},p.getTitle=function(){return this.g.getTitle()},p.getDescription=function(){return this.g.getDescription()},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},p.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},p.getAdId=function(){return this.g.getAdId()},p.getCreativeAdId=function(){return this.g.getCreativeAdId()},p.getAdvertiserName=function(){return this.g.getAdvertiserName()},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},p.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},p.release=function(){this.h=this.i=this.g=null},ne("shaka.ads.ServerSideAd",pr),pr.prototype.release=pr.prototype.release,pr.prototype.getPodIndex=pr.prototype.getPodIndex,pr.prototype.getTimeOffset=pr.prototype.getTimeOffset,pr.prototype.getMediaUrl=pr.prototype.getMediaUrl,pr.prototype.getAdvertiserName=pr.prototype.getAdvertiserName,pr.prototype.getCreativeAdId=pr.prototype.getCreativeAdId,pr.prototype.getAdId=pr.prototype.getAdId,pr.prototype.getVastMediaWidth=pr.prototype.getVastMediaWidth,pr.prototype.getVastMediaHeight=pr.prototype.getVastMediaHeight,pr.prototype.getVastMediaBitrate=pr.prototype.getVastMediaBitrate,pr.prototype.getDescription=pr.prototype.getDescription,pr.prototype.getTitle=pr.prototype.getTitle,pr.prototype.getPositionInSequence=pr.prototype.getPositionInSequence,pr.prototype.getSequenceLength=pr.prototype.getSequenceLength,pr.prototype.setMuted=pr.prototype.setMuted,pr.prototype.resize=pr.prototype.resize,pr.prototype.isLinear=pr.prototype.isLinear,pr.prototype.isMuted=pr.prototype.isMuted,pr.prototype.setVolume=pr.prototype.setVolume,pr.prototype.getVolume=pr.prototype.getVolume,pr.prototype.play=pr.prototype.play,pr.prototype.pause=pr.prototype.pause,pr.prototype.skip=pr.prototype.skip,pr.prototype.canSkipNow=pr.prototype.canSkipNow,pr.prototype.getTimeUntilSkippable=pr.prototype.getTimeUntilSkippable,pr.prototype.isSkippable=pr.prototype.isSkippable,pr.prototype.isPaused=pr.prototype.isPaused,pr.prototype.getRemainingTime=pr.prototype.getRemainingTime,pr.prototype.getMinSuggestedDuration=pr.prototype.getMinSuggestedDuration,pr.prototype.getDuration=pr.prototype.getDuration,pr.prototype.needsSkipUI=pr.prototype.needsSkipUI;function pN(e,t,n,r){var u=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Et,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new jn("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(c){G5(u,c)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.B.length?u.j.resolve(u.B):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(c){c=c.getAd(),u.m=new pr(c,u.l),u.A&&(u.m.i=u.A),u.i(new jn("ad-started",new Map().set("ad",u.m))),u.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.s.removeAttribute("ad-active");var c=u.l.currentTime;u.o&&u.o>c&&(u.l.currentTime=u.o,u.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(c){u.A=c.getStreamData().adProgressData,u.m&&(u.m.i=u.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new jn("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new jn("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new jn("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new jn("ad-complete")),u.i(new jn("ad-stopped")),u.s.removeAttribute("ad-active"),u.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new jn("ad-skipped")),u.i(new jn("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(c){var f=c.getStreamData();c=[],f=m(f.cuepoints);for(var h=f.next();!h.done;h=f.next())h=h.value,c.push({start:h.start,end:h.end});u.C=c,u.i(new jn("ad-cue-points-changed",new Map().set("cuepoints",c)))})}p=pN.prototype,p.configure=function(){},p.stop=function(){this.B="",this.o=null,this.C=[]},p.release=function(){this.stop(),this.h&&this.h.release()},p.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},p.getCuePoints=function(){return this.C};function G5(e,t){e.i(new jn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function Wn(){Nr.call(this),this.g=this.i=this.j=this.h=null,this.m=new iN,this.o=navigator.language,this.l=null}Y(Wn,Nr),p=Wn.prototype,p.setLocale=function(e){this.o=e},p.configure=function(e){this.l=e,this.h&&this.h.configure(this.l),this.j&&this.j.configure(this.l),this.g&&this.g.configure(this.l)},p.initInterstitial=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new Sp(e,t,n,function(u){return Fv(r,u)}),this.h.configure(this.l)},p.initClientSide=function(e,t,n){var r=this;if(!g.google||!google.ima||!google.ima.AdsLoader)throw new Ye(2,10,1e4);this.j&&this.j.release(),this.j=new Pv(e,t,this.o,n,function(u){return Fv(r,u)}),this.j.configure(this.l)},p.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),Nr.prototype.release.call(this)},p.onAssetUnload=function(){this.h&&this.h.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new jn("ad-stopped")),this.dispatchEvent(new jn("ad-content-attach-requested")),this.m=new iN},p.requestClientSideAds=function(e){if(!this.j)throw new Ye(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},p.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new Ye(1,10,10001);var t=this.j;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},p.initMediaTailor=function(e,t,n){var r=this;this.i&&this.i.release(),this.i=new wp(e,t,n,function(u){return Fv(r,u)})},p.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new Ye(1,10,10005);var r=this.i;return n=n===void 0?"":n,r.l?e=Promise.reject(new Ye(1,10,10004)):(r.l=new Lr,B5(r,e,t),r.H=n||"",r.T=Date.now()/1e3,e=r.l),e},p.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new Ye(1,10,10005);var t=this.i;t.G=e,t.i(new jn("ads-loaded",new Map().set("loadTime",0)))},p.initServerSide=function(e,t){var n=this;if(!g.google||!google.ima||!google.ima.dai)throw new Ye(2,10,10002);this.g&&this.g.release(),this.g=new pN(e,t,this.o,function(r){return Fv(n,r)}),this.g.configure(this.l)},p.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new Ye(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&He('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.11.4",n=this.g,n.j?e=Promise.reject(new Ye(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Lr,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},p.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new Ye(1,10,10003);(e.mpt||e.mpv)&&He('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.11.4",this.g.g.replaceAdTagParameters(e)},p.getServerSideCuePoints=function(){return gr("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},p.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},p.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:O5(e),started:e.h,playedCompletely:e.j,skipped:e.l,errors:e.i}},p.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},p.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},p.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},p.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},p.onHLSInterstitialMetadata=function(e,t,n){this.h||this.initInterstitial(null,e,t),this.h&&F5(this.h,n)},p.onDASHInterstitialMetadata=function(e,t,n){if(n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:2022"&&(this.h||this.initInterstitial(null,e,t),this.h)){e=this.h,t=m(n.eventNode.children);for(var r=t.next();!r.done;r=t.next()){var u=r.value;if(u.tagName=="AlternativeMPD"&&(r=u.attributes.uri,u=u.attributes.mode,r)){var c=r,f=u;break}}c?(t=f=="replace",f=f=="insert",(t||f)&&kv(e,[{id:null,startTime:n.startTime,endTime:t?n.endTime:null,uri:c,isSkippable:!1,skipOffset:null,canJump:!0,resumeOffset:f?0:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:t&&!f}])):He("Unsupported MPD alternate",n)}},p.addCustomInterstitial=function(e){if(!this.h)throw new Ye(1,10,10006);kv(this.h,[e])},p.addAdUrlInterstitial=function(e){if(!this.h)throw new Ye(1,10,10006);return this.h.addAdUrlInterstitial(e)};function Fv(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;break;case"ad-complete":e.m.j++;break;case"ad-skipped":e.m.l++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}ne("shaka.ads.AdManager",Wn),Wn.prototype.addAdUrlInterstitial=Wn.prototype.addAdUrlInterstitial,Wn.prototype.addCustomInterstitial=Wn.prototype.addCustomInterstitial,Wn.prototype.onDASHInterstitialMetadata=Wn.prototype.onDASHInterstitialMetadata,Wn.prototype.onHLSInterstitialMetadata=Wn.prototype.onHLSInterstitialMetadata,Wn.prototype.onCueMetadataChange=Wn.prototype.onCueMetadataChange,Wn.prototype.onHlsTimedMetadata=Wn.prototype.onHlsTimedMetadata,Wn.prototype.onDashTimedMetadata=Wn.prototype.onDashTimedMetadata,Wn.prototype.onManifestUpdated=Wn.prototype.onManifestUpdated,Wn.prototype.getStats=Wn.prototype.getStats,Wn.prototype.getCuePoints=Wn.prototype.getCuePoints,Wn.prototype.getServerSideCuePoints=Wn.prototype.getServerSideCuePoints,Wn.prototype.replaceServerSideAdTagParameters=Wn.prototype.replaceServerSideAdTagParameters,Wn.prototype.requestServerSideStream=Wn.prototype.requestServerSideStream,Wn.prototype.initServerSide=Wn.prototype.initServerSide,Wn.prototype.addMediaTailorTrackingUrl=Wn.prototype.addMediaTailorTrackingUrl,Wn.prototype.requestMediaTailorStream=Wn.prototype.requestMediaTailorStream,Wn.prototype.initMediaTailor=Wn.prototype.initMediaTailor,Wn.prototype.updateClientSideAdsRenderingSettings=Wn.prototype.updateClientSideAdsRenderingSettings,Wn.prototype.requestClientSideAds=Wn.prototype.requestClientSideAds,Wn.prototype.onAssetUnload=Wn.prototype.onAssetUnload,Wn.prototype.release=Wn.prototype.release,Wn.prototype.initClientSide=Wn.prototype.initClientSide,Wn.prototype.initInterstitial=Wn.prototype.initInterstitial,Wn.prototype.configure=Wn.prototype.configure,Wn.prototype.setLocale=Wn.prototype.setLocale,Wn.ADS_LOADED="ads-loaded",Wn.AD_STARTED="ad-started",Wn.AD_FIRST_QUARTILE="ad-first-quartile",Wn.AD_MIDPOINT="ad-midpoint",Wn.AD_THIRD_QUARTILE="ad-third-quartile",Wn.AD_COMPLETE="ad-complete",Wn.AD_STOPPED="ad-stopped",Wn.AD_SKIPPED="ad-skipped",Wn.AD_VOLUME_CHANGED="ad-volume-changed",Wn.AD_MUTED="ad-muted",Wn.AD_PAUSED="ad-paused",Wn.AD_RESUMED="ad-resumed",Wn.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Wn.CUEPOINTS_CHANGED="ad-cue-points-changed",Wn.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Wn.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Wn.AD_CLICKED="ad-clicked",Wn.AD_PROGRESS="ad-progress",Wn.AD_BUFFERING="ad-buffering",Wn.AD_IMPRESSION="ad-impression",Wn.AD_DURATION_CHANGED="ad-duration-changed",Wn.AD_CLOSED="ad-closed",Wn.AD_LOADED="ad-loaded",Wn.ALL_ADS_COMPLETED="all-ads-completed",Wn.AD_LINEAR_CHANGED="ad-linear-changed",Wn.AD_METADATA="ad-metadata",Wn.AD_RECOVERABLE_ERROR="ad-recoverable-error",Wn.AD_ERROR="ad-error",Wn.AD_BREAK_READY="ad-break-ready",Wn.AD_INTERACTION="ad-interaction",Wn.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Wn.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Wn.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Dv=function(){return new Wn};function gN(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof jn){var r={};for(u in n)(t=n[u])&&typeof t=="object"?u=="detail"&&(r[u]=t):u in Event||(r[u]=t);return r}if(n instanceof Error){var u=new Set(["name","message","stack"]);for(r in n)u.add(r);for(r=m(Object.getOwnPropertyNames(n)),t=r.next();!t.done;t=r.next())u.add(t.value);for(r={},u=m(u),t=u.next();!t.done;t=u.next())t=t.value,r[t]=n[t];n={__type__:"Error",contents:r}}else if(n instanceof TimeRanges){for(u={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(gi(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,u.start.push(r.start),u.end.push(t);n=u}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function $1(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=H5(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function H5(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var mN="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),V5="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),X1=["loop","playbackRate"],K5=["pause","play"],Uv={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10,isFullyLoaded:1},Bv={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Q1={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},vN=[["getConfiguration","configure"]],yN=[["isTextTrackVisible","setTextTrackVisibility"]],z5="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Y5=["attach","attachCanvas","detach","load","unload"];function J1(e,t,n,r,u,c,f){var h=this;this.G=e,this.K=f,this.l=new on(t),this.L=n,this.s=!1,this.A=r,this.F=u,this.N=c,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return e_(h)},this.C=function(v,A){switch(v=$1(A),v.type){case"event":var N=v.targetName,B=ep(v.event);h.A(N,B);break;case"update":N=v.update;for(B in N){v=h.g[B]||{};for(var z in N[B])v[z]=N[B][z]}h.s&&(h.L(),h.s=!1);break;case"asyncComplete":if(B=v.id,z=v.error,v=h.i[B],delete h.i[B],v)if(z){B=new Ye(z.severity,z.category,z.code);for(N in z)B[N]=z[N];v.reject(B)}else v.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,Ip.add(this)}p=J1.prototype,p.destroy=function(){return Ip.delete(this),t_(this),xs&&_N(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},p.gb=function(){return this.h},p.Gf=function(){return this.I},p.init=function(){if(this.G.length)if(g.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.wc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(Ip),r=n.next();!r.done;r=n.next()){r=r.value;var u=t;r.j=new Lr,r.s=!0,jv(r,u)}},function(t){for(var n=m(Ip),r=n.next();!r.done;r=n.next())r=r.value,Zv=t=="available",r.l.wc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Zv&&this.l.Z($5),(e=xs)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Lr,this.s=!0,jv(this,e)):xs=null}else g.__onGCastApiAvailable!==TN&&(qv=g.__onGCastApiAvailable||null,g.__onGCastApiAvailable=TN)},p.Nf=function(e){this.o=e,this.h&&Ap(this,{type:"appData",appData:this.o})},p.cast=function(){var e=this;return Ne(function(t){if(!e.m)throw new Ye(1,8,8e3);if(!Zv)throw new Ye(1,8,8001);if(e.h)throw new Ye(1,8,8002);return e.j=new Lr,chrome.cast.requestSession(function(n){return jv(e,n)},function(n){return EN(e,n)}),R(t,e.j,0)})};function W5(e){e.h&&chrome.cast.requestSession(function(t){return jv(e,t)},function(t){return EN(e,t)})}p.Fc=function(){if(this.h){if(t_(this),xs){_N(this);try{xs.stop(function(){},function(){})}catch(e){}xs=null}e_(this)}},p.get=function(e,t){var n=this;if(e=="video"){if(K5.includes(t))return function(){return n.Rg.apply(n,[e,t].concat(T(et.apply(0,arguments))))}}else if(e=="player"){if(Q1[t]&&!this.get("player","isLive")())return function(){};if(z5.includes(t))return function(){return n.Rg.apply(n,[e,t].concat(T(et.apply(0,arguments))))};if(Y5.includes(t))return function(){return n.Ii.apply(n,[e,t].concat(T(et.apply(0,arguments))))};if(Uv[t]||Bv[t])return function(){return n.g[e][t]}}return this.g[e][t]},p.set=function(e,t,n){this.g[e][t]=n,Ap(this,{type:"set",targetName:e,property:t,value:n})};function jv(e,t){var n=e.N();xs=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),e_(e),Ap(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function EN(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new Ye(2,8,n,t))}p.Rg=function(e,t){Ap(this,{type:"call",targetName:e,methodName:t,args:et.apply(2,arguments)})},p.Ii=function(e,t){var n=et.apply(2,arguments),r=new Lr,u=this.H.toString();this.H++,this.i[u]=r;try{Ap(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:u})}catch(c){r.reject(c)}return r};function _N(e){var t=xs;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function e_(e){var t=xs?xs.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};t_(e)}e.h=t,e.I=t?xs.receiver.friendlyName:"",e.l.wc()}function t_(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new Ye(1,7,7e3))}}function Ap(e,t){t=gN(t);var n=xs;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},st)}catch(r){throw t=new Ye(2,8,8005,r),n=new jn("error",new Map().set("detail",t)),e.A("player",n),e.Fc(),t}}var $5=.02,Zv=!1,xs=null,qv=null,Ip=new Set;function TN(e){if(qv?g.__onGCastApiAvailable=qv:delete g.__onGCastApiAvailable,qv=null,e)for(var t=m(Ip),n=t.next();!n.done;n=t.next())n.value.init();typeof g.__onGCastApiAvailable=="function"&&g.__onGCastApiAvailable(e)}function Oi(e,t,n,r){r=r===void 0?!1:r,Nr.call(this);var u=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new J1(n,function(){return AN(u)},function(){return IN(u)},function(c,f){return CN(u,c,f)},function(){return bN(u)},function(){return wN(u)},r),X5(this)}Y(Oi,Nr),p=Oi.prototype,p.destroy=function(e){return e&&this.g.Fc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Nr.prototype.release.call(this),Promise.all(e)},p.di=function(){return this.l},p.Th=function(){return this.s},p.yh=function(){return this.g.m&&Zv},p.gb=function(){return this.g.gb()},p.Gf=function(){return this.g.Gf()},p.cast=function(){var e=this;return Ne(function(t){return t.g==1?R(t,e.g.cast(),2):e.h?R(t,e.h.ec(),0):t.return()})},p.Nf=function(e){this.g.Nf(e)},p.Yi=function(){W5(this.g)},p.Fc=function(){this.g.Fc()},p.zh=function(e,t){t=t===void 0?!1:t;var n=this;return Ne(function(r){if(r.g==1)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.Fc(),R(r,n.g.destroy(),2));n.g=null,n.g=new J1(e,function(){return AN(n)},function(){return IN(n)},function(u,c){return CN(n,u,c)},function(){return bN(n)},function(){return wN(n)},t),n.g.init(),X(r)})};function X5(e){e.g.init(),e.m=new Et;for(var t=m(mN),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(c){e.g.gb()||(c=ep(c),e.j.dispatchEvent(c))});for(var r in Xf)e.m.D(e.h,Xf[r],function(c){e.g.gb()||e.o.dispatchEvent(c)});e.l={},t={};for(var u in e.i)t={kd:t.kd},t.kd=u,Object.defineProperty(e.l,t.kd,{configurable:!1,enumerable:!0,get:function(c){return function(){return J5(e,c.kd)}}(t),set:function(c){return function(f){var h=c.kd;e.g.gb()?e.g.set("video",h,f):e.i[h]=f}}(t)});e.s={},SN(e,function(c){Object.defineProperty(e.s,c,{configurable:!1,enumerable:!0,get:function(){return e6(e,c)}})}),Q5(e),e.j=new Nr,e.j.oe=e.l,e.o=new Nr,e.o.oe=e.s}function Q5(e){var t=new Map;SN(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function SN(e,t){function n(v){return v=="constructor"||typeof r[v]!="function"?!1:!u.has(v)}var r=e.h,u=new Set,c;for(c in r)n(c)&&(u.add(c),t(c,r[c]));for(e=Object.getPrototypeOf(r),c=Object.getPrototypeOf({});e&&e!=c;){for(var f=m(Object.getOwnPropertyNames(e)),h=f.next();!h.done;h=f.next())h=h.value,n(h)&&(u.add(h),t(h,r[h]));e=Object.getPrototypeOf(e)}}function wN(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Gc(),startTime:null};e.i.pause();for(var n=m(X1),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=m(vN),r=n.next();!r.done;r=n.next()){var u=r.value;r=u[1],u=e.h[u[0]](),t.player[r]=u}for(n=m(yN),r=n.next();!r.done;r=n.next())u=r.value,r=u[1],u=e.h[u[0]](),t.playerAfterLoad[r]=u;return t}function AN(e){var t=new jn("caststatuschanged");e.dispatchEvent(t)}function IN(e){var t=new jn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function bN(e){for(var t=m(vN),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var u=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var c=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var f;(r=e.g.get("player","getTextTracks")())&&r.length&&(f=r.find(function(A){return A.active}));var h=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var v={};for(n=m(X1),r=n.next();!r.done;r=n.next())r=r.value,v[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var A=m(X1),N=A.next();!N.done;N=A.next())N=N.value,e.i[N]=v[N];for(A=m(yN),N=A.next();!N.done;N=A.next()){var B=N.value;N=B[1],B=e.g.get("player",B[0])(),e.h[N](B)}e.h.ah(h),f&&e.h.Lf(f.language,f.roles,f.forced),e.i.autoplay=c,u&&e.i.play()}},function(A){A=new Map().set("detail",A),A=new jn("error",A),e.h.dispatchEvent(A)})}function J5(e,t){if(t=="addEventListener")return function(r,u,c){return e.j.addEventListener(r,u,c)};if(t=="removeEventListener")return function(r,u,c){return e.j.removeEventListener(r,u,c)};if(e.g.gb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.gb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function e6(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,u){return e.o.addEventListener(n,r,u)};if(t=="removeEventListener")return function(n,r,u){return e.o.removeEventListener(n,r,u)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.yb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.sg()};if(t=="setVideoContainer")return function(n){return e.h.fh(n)};if(e.g.gb()){if(t=="getManifest"||t=="drmInfo")return function(){return He(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return He(t+"() does not work while casting!"),Promise.resolve()}}return e.g.gb()&&Object.keys(e.g.g.video).length==0&&(Uv[t]||Bv[t])||!e.g.gb()?e.h[t].bind(e.h):e.g.get("player",t)}function CN(e,t,n){e.g.gb()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}ne("shaka.cast.CastProxy",Oi),Oi.prototype.changeReceiverId=Oi.prototype.zh,Oi.prototype.forceDisconnect=Oi.prototype.Fc,Oi.prototype.suggestDisconnect=Oi.prototype.Yi,Oi.prototype.setAppData=Oi.prototype.Nf,Oi.prototype.cast=Oi.prototype.cast,Oi.prototype.receiverName=Oi.prototype.Gf,Oi.prototype.isCasting=Oi.prototype.gb,Oi.prototype.canCast=Oi.prototype.yh,Oi.prototype.getPlayer=Oi.prototype.Th,Oi.prototype.getVideo=Oi.prototype.di,Oi.prototype.destroy=Oi.prototype.destroy;function Co(e,t,n,r){Nr.call(this);var u=this;this.g=e,this.h=t,this.j=new Et,this.H={video:e,player:t},this.F=n||function(){},this.I=r||function(c){return c},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.C=new on(function(){n_(u)}),t6(this)}Y(Co,Nr),p=Co.prototype,p.isConnected=function(){return this.G},p.ki=function(){return this.o},p.Ui=function(e){this.i=e},p.Bh=function(){this.i=null},p.Vi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},p.Ti=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},p.Si=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},p.destroy=function(){var e=this,t,n;return Ne(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.C&&(e.C.stop(),e.C=null),e.g=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.s=null,Nr.prototype.release.call(e),R(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),X(r)})};function t6(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return RN(e)},t.onSenderDisconnected=function(){return RN(e)},t.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&cl(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),cl(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(u){return i6(e,u)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return r6(e,u)},t.start(),t=m(mN);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(u){return xN(e,"video",u)});for(var r in Xf)e.j.D(e.h,Xf[r],function(u){return xN(e,"player",u)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,md(e)}),e.j.D(e.g,"playing",function(){e.o=!1,md(e)}),e.j.D(e.g,"pause",function(){md(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,md(e)}),e.j.D(e.g,"ended",function(){new on(function(){e.g&&e.g.ended&&(e.o=!0,md(e))}).Z(a6)})}function RN(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,md(e)}function md(e){var t;Ne(function(n){if(n.g==1)return R(n,Promise.resolve(),2);if(!e.h)return n.return();t=new jn("caststatuschanged"),e.dispatchEvent(t),NN(e)||fl(e),X(n)})}function n6(e,t,n){var r,u,c,f,h,v,A,N,B,z;Ne(function(J){switch(J.g){case 1:for(r in t.player)u=t.player[r],e.h[r](u);return e.F(n),c=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ce(J,5),R(J,e.h.load(t.manifest,t.startTime),7)):R(J,Promise.resolve(),3);case 7:ye(J,3);break;case 5:return f=be(J),h=new Map().set("detail",f),v=new jn("error",h),e.h&&e.h.dispatchEvent(v),J.return();case 3:if(!e.h)return J.return();for(A in t.video)N=t.video[A],e.g[A]=N;for(B in t.playerAfterLoad)z=t.playerAfterLoad[B],e.h[B](z);e.g.autoplay=c,t.manifest&&(e.g.play(),fl(e)),X(J)}})}function xN(e,t,n){e.h&&(n_(e),cl(e,{type:"event",targetName:t,event:n},e.l))}function n_(e){e.C.Z(o6);for(var t={video:{},player:{}},n=m(V5),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.U())for(var u in Q1)e.m%Q1[u]==0&&(t.player[u]=e.h[u]());for(var c in Uv)e.m%Uv[c]==0&&(t.player[c]=e.h[c]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),cl(e,{type:"update",update:t},e.l);for(var f in Bv)e.m%Bv[f]==0&&(t={player:{}},t.player[f]=e.h[f](),cl(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),NN(e)}function NN(e){return e.A&&(e.g.duration||e.h.U())?(r_(e),e.A=!1,!0):!1}function r_(e,t){var n={contentId:e.h.Gc(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),fl(e,t===void 0?0:t,n)}function r6(e,t){var n=$1(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,n6(e,n.initState,n.appData),n_(e);break;case"appData":e.F(n.appData);break;case"set":var r=n.targetName,u=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){t.setSystemVolumeLevel(n);break}else if(u=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][u]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,u=n.methodName,r=="player"&&u=="load"&&(e.m=0,e.B=!1);var c=n.id,f=t.senderId;t=e.H[r],n=t[u].apply(t,n.args),r=="player"&&u=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return MN(e,f,c,null)},function(h){return MN(e,f,c,h)})}}function i6(e,t){var n=$1(t.data);switch(n.type){case"PLAY":e.g.play(),fl(e);break;case"PAUSE":e.g.pause(),fl(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),fl(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),fl(e));break;case"STOP":e.h.ec().then(function(){e.h&&fl(e)});break;case"GET_STATUS":r_(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var u=e.g.volume,c=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),u==e.g.volume&&c==e.g.muted||fl(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,u=e.I(t.contentId),c=n.autoplay||!0,e.F(t.customData),c&&(e.g.autoplay=!0),e.h.load(u,r).then(function(){e.h&&r_(e)}).catch(function(f){var h="LOAD_FAILED";f.category==7&&f.code==7e3&&(h="LOAD_CANCELLED"),cl(e,{requestId:Number(n.requestId),type:h},e.s)});break;default:cl(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function MN(e,t,n,r){e.h&&cl(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function cl(e,t,n,r){e.G&&(e=gN(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function fl(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?s6:e.h.pf()?l6:e.g.paused?c6:u6,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),cl(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}ne("shaka.cast.CastReceiver",Co),Co.prototype.destroy=Co.prototype.destroy,Co.prototype.setContentArtist=Co.prototype.Si,Co.prototype.setContentImage=Co.prototype.Ti,Co.prototype.setContentTitle=Co.prototype.Vi,Co.prototype.clearContentMetadata=Co.prototype.Bh,Co.prototype.setContentMetadata=Co.prototype.Ui,Co.prototype.isIdle=Co.prototype.ki,Co.prototype.isConnected=Co.prototype.isConnected;var o6=.5,a6=5,s6="IDLE",u6="PLAYING",l6="BUFFERING",c6="PAUSED";function DN(e,t,n,r,u){if(r>=u)return null;for(var c=-1,f=-1,h=0;h<n.length;h++)if(n[h].some(function(Fe){return Fe!=null&&Fe.g.trim()!=""})){c=h;break}for(h=n.length-1;0<=h;h--)if(n[h].some(function(Fe){return Fe!=null&&Fe.g.trim()!=""})){f=h;break}if(c===-1||f===-1)return null;for(var v=h=!1,A="white",N="black",B=i_(r,u,h,v,A,N);c<=f;c++){for(var z=n[c],J=-1,fe=-1,pe=0;pe<z.length;pe++)if(z[pe]!=null&&z[pe].g.trim()!==""){J=pe;break}for(pe=z.length-1;0<=pe;pe--)if(z[pe]!=null&&z[pe].g.trim()!==""){fe=pe;break}if(J===-1||fe===-1)z=PN(r,u),e.nestedCues.push(z);else{for(;J<=fe;J++)if(pe=z[J]){var Ee=pe.l,Oe=pe.i,ke=pe.j,rt=pe.h;(Ee!=h||Oe!=v||ke!=A||rt!=N)&&(B.payload&&e.nestedCues.push(B),B=i_(r,u,Ee,Oe,ke,rt),h=Ee,v=Oe,A=ke,N=rt),B.payload+=pe.g}else B.payload+=" ";B.payload&&e.nestedCues.push(B),c!==f&&(B=PN(r,u),e.nestedCues.push(B)),B=i_(r,u,h,v,A,N)}}return e.nestedCues.length?{cue:e,stream:t}:null}function i_(e,t,n,r,u,c){return e=new jr(e,t,""),n&&e.textDecoration.push(Ks),r&&(e.fontStyle=wu),e.color=u,e.backgroundColor=c,e}function PN(e,t){return e=new jr(e,t,""),e.lineBreak=!0,e}function ON(e,t,n,r,u){this.g=e,this.l=t,this.i=n,this.h=r,this.j=u}function o_(e,t){this.i=[],this.g=1,this.h=0,this.C=e,this.B=t,this.j=this.m=!1,this.l="white",this.o="black",this.s=this.A=null,bp(this)}function Gv(e,t,n){var r="CC"+((e.C<<1|e.B)+1),u=new jr(t,n,"");u.lineInterpretation=1;var c=FN.get(e.g);return c&&(u.line=c),e.s!=null&&e.A!=null&&(u.position=10+Math.min(70,10*e.s)+2.5*e.A),(t=DN(u,r,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(c=FN.get(e.g+3-t.cue.nestedCues.length))&&(u.line=c),t}function bp(e){dl(e,0,15),e.g=1}function vd(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case 0:r=kN.has(n)?kN.get(n):String.fromCharCode(n);break;case 1:r=f6.get(n);break;case 2:e.i[e.g].pop(),r=d6.get(n);break;case 3:e.i[e.g].pop(),r=h6.get(n)}r&&e.i[e.g].push(new ON(r,e.m,e.j,e.o,e.l))}}function LN(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(c){return c});else for(var u=0;u<r;u++)e.i[t+u]=e.i[n+u].map(function(c){return c})}function dl(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var kN=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),f6=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),d6=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),h6=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),FN=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Hv(e,t){this.h=0,this.o=new o_(e,t),this.i=new o_(e,t),this.g=this.j=new o_(e,t),this.l=0,this.m=null}function a_(e,t,n){e.g=e.i;var r=e.g,u=null;return e.h!==3&&e.h!==4&&(u=Gv(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,dl(n,0,15),n=e.j,n.g=0<n.h?n.h:0,dl(n,0,15),r.g=15),e.h=3,r.h=t,u}function UN(e){e.h=1,e.g=e.j,e.g.h=0}function BN(e){Tt("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var p6="black green blue cyan red yellow magenta black".split(" "),jN="white green blue cyan red yellow magenta white_italics".split(" ");function s_(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",u_(this)}function u_(e){e.i=[];for(var t=0;16>t;t++)e.i.push(l_())}function l_(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Fc(e,t){ZN(e)&&(e.i[e.h][e.g]=new ON(t,e.C,e.A,e.s,e.B),e.g++)}function ZN(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}s_.prototype.isVisible=function(){return this.l};function Uc(e,t,n){var r=new jr(e.j,t,"");r.textAlign=e.F===0?"left":e.F===1?"right":Ca;var u=r.region;switch(e.I&&(u.id+="svc"+e.I),u.id+="win"+e.N,u.height=e.o,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.H,u.viewportAnchorY=e.L,u.viewportAnchorUnits=e.K?wn:2,e.G){case 0:u.regionAnchorX=0,u.regionAnchorY=0;break;case 1:u.regionAnchorX=50,u.regionAnchorY=0;break;case 2:u.regionAnchorX=100,u.regionAnchorY=0;break;case 3:u.regionAnchorX=0,u.regionAnchorY=50;break;case 4:u.regionAnchorX=50,u.regionAnchorY=50;break;case 5:u.regionAnchorX=100,u.regionAnchorY=50;break;case 6:u.regionAnchorX=0,u.regionAnchorY=100;break;case 7:u.regionAnchorX=50,u.regionAnchorY=100;break;case 8:u.regionAnchorX=100,u.regionAnchorY=100}return(n=DN(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}s_.prototype.display=function(){this.l=!0};function g6(){this.i=[],this.h=null,this.g=0}function m6(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Vv(e.h)),e.h=null,e.g=0))}function Vv(e){this.g=0,this.h=e}Vv.prototype.ra=function(){return this.g<this.h.length},Vv.prototype.xa=function(){return this.g};function fo(e){if(!e.ra())throw new Ye(2,2,3e3);return e.h[e.g++]}Vv.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Ye(2,2,3e3);this.g+=e};function v6(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function y6(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=fo(t).value,t=null,n=m(Cp(e,n));for(var u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Uc(u,r,e.i)),u_(u);return t}if(n===137)for(t=fo(t).value,t=m(Cp(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.display();else{if(n===138){for(n=fo(t).value,t=null,n=m(Cp(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Uc(u,r,e.i)),u.l=!1;return t}if(n===139){for(n=fo(t).value,t=null,n=m(Cp(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()?t=Uc(u,r,e.i):u.j=r,u.l=!u.l;return t}if(n===140)return t=fo(t).value,qN(e,t,r);if(n===143)return r=qN(e,255,r),GN(e),r;if(n===144)t.skip(1),r=fo(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=fo(t).value,n=fo(t).value,t.skip(1),e.g&&(t=HN((n&48)>>4,(n&12)>>2,n&3),e.g.B=HN((r&48)>>4,(r&12)>>2,r&3),e.g.s=t);else if(n===146)r=fo(t).value,t=fo(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=fo(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,u=e.h[n]!==null,!u){var c=new s_(n,e.i);c.j=r,e.h[n]=c}r=fo(t).value,c=fo(t).value;var f=fo(t).value,h=fo(t).value,v=fo(t).value;t=fo(t).value,u&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(r&32),t.L=c&127,t.H=f,t.G=(h&240)>>4,t.K=0<(c&128),t.o=(h&15)+1,t.m=(v&63)+1,e.g=e.h[n]}}}return null}function Cp(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function qN(e,t,n){var r=null;t=m(Cp(e,t));for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=e.h[u];c.isVisible()&&(r=Uc(c,n,e.i)),e.h[u]=null}return r}function GN(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function HN(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],E6[e<<2|t<<1|n]}var VN=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),E6="black blue green cyan red magenta yellow white".split(" ");function yd(){this.h=[],this.g=[],this.i=new g6,this.l=0,this.m=new Map([["CC1",new Hv(0,0)],["CC2",new Hv(0,1)],["CC3",new Hv(1,0)],["CC4",new Hv(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,c_(this)}yd.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,c_(this),e=m(this.j.values());for(var t=e.next();!t.done;t=e.next())GN(t.value)};function c_(e){e.o=0,e.s=0;for(var t=m(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,bp(n.i),bp(n.j),bp(n.o);e.B=!0}yd.prototype.extract=function(e,t){if(this.B){for(var n=m(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new F(e,0),!(8>e.getLength())&&e.S()===181&&e.la()===49&&e.P()===1195456820&&e.S()===3&&(n=e.S(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var u=e.S(),c=(u&4)>>2,f=e.S(),h=e.S();c&&(u&=3,u===0||u===1?this.h.push({pts:t,type:u,cb:f,Cb:h,order:this.h.length}):(this.g.push({pts:t,type:u,value:f,order:this.g.length}),this.g.push({pts:t,type:2,value:h,order:this.g.length})))}},yd.prototype.decode=function(){function e(u,c){return u.pts-c.pts||u.order-c.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),r=n.next();!r.done;r=n.next())(r=_6(this,r.value))&&t.push(r);for(n=m(this.g),r=n.next();!r.done;r=n.next())m6(this.i,r.value);for(n=m(this.i.i),r=n.next();!r.done;r=n.next())r=T6(this,r.value),t.push.apply(t,T(r));return this.i.i=[],this.h=[],this.g=[],t};function _6(e,t){var n=t.type;if((t.cb&112)===16){var r=t.cb>>3&1;n===0?e.o=r:e.s=r}if(r="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(r),t.cb===255&&t.Cb===255||!t.cb&&!t.Cb||!KN(t.cb)||!KN(t.Cb))return 45<=++e.l&&c_(e),null;e.l=0,t.cb&=127,t.Cb&=127;var u=t.cb;if(1<=u&&15>=u||!t.cb&&!t.Cb)return null;if(u=null,(t.cb&112)===16)e:{if(e.A.add(r),r=t.cb,e=t.Cb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1],r="white",u=!1;var c=null,f=95<e?e-96:e-64;13>=f?r=jN[Math.floor(f/2)]:15>=f?u=!0:c=Math.floor((f-16)/2),e=(e&1)===1,n.h!==4&&(f=n.g,n.h===3&&t!==f.g&&(n=1+t-f.h,LN(f,n,1+f.g-f.h,f.h),dl(f,0,n-1),dl(f,t+1,15-t)),f.g=t,f.m=e,f.j=u,f.l=r,f.s=c,f.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",vd(n.g,0,32),r=!1,t=jN[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",!(r&7)&&(t=p6[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)vd(n.g,1,e);else if((r&246)===18&&(e&224)===32)vd(n.g,r&1?3:2,e);else{if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.Cb){case 32:UN(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=a_(n,2,e);break;case 38:r=a_(n,3,e);break;case 39:r=a_(n,4,e);break;case 40:vd(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:bp(n.o),BN(n);break;case 43:BN(n);break;case 44:t=n.i,r=null,n.h!==4&&(r=Gv(t,n.l,e)),dl(t,0,15);break;case 45:t=n.g,n.h!==3?r=null:(r=Gv(t,n.l,e),u=t.g-t.h+1,LN(t,u-1,u,t.h),dl(t,0,u-1),dl(t,t.g,15-t.g),n.l=e);break;case 46:dl(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=Gv(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,UN(n),n.l=e,r=t}u=r;break e}(r==23||r==31)&&33<=e&&35>=e&&(n.g.A=e-32)}u=null}else e=t.Cb,vd(n.g,0,t.cb),vd(n.g,0,e);return u}function T6(e,t){var n=[];try{for(;t.ra();){var r=fo(t).value,u=(r&224)>>5,c=r&31;if(u===7&&c!=0&&(u=fo(t).value&63),u!=0){e.A.add("svc"+u),e.j.has(u)||e.j.set(u,new v6(u));for(var f=e.j.get(u),h=t.xa();t.xa()-h<c;){u=f;var v=t,A=fo(v),N=A.value,B=A.pts;if(N===16){var z=fo(v);N=N<<16|z.value}if(0<=N&&31>=N){v=u;var J=N,fe=B;if(v.g){var pe=v.g;switch(u=null,J){case 8:!ZN(pe)||0>=pe.g&&0>=pe.h||(0>=pe.g?(pe.g=pe.m-1,pe.h--):pe.g--,pe.i[pe.h][pe.g]=null);break;case 13:if(pe.isVisible()&&(u=Uc(pe,fe,v.i)),pe.h+1>=pe.o){for(v=pe,J=0,fe=1;16>fe;fe++,J++)v.i[J]=v.i[fe];for(fe=0;1>fe;fe++,J++)v.i[J]=l_()}else pe.h++;pe.g=0;break;case 14:pe.isVisible()&&(u=Uc(pe,fe,v.i)),pe.i[pe.h]=l_(),pe.g=0;break;case 12:pe.isVisible()&&(u=Uc(pe,fe,v.i)),u_(pe),v=pe,v.h=0,v.g=0}var Ee=u}else Ee=null}else if(128<=N&&159>=N)Ee=y6(u,v,N,B);else{if(4096<=N&&4127>=N)u=v,v=N&255,8<=v&&15>=v?u.skip(1):16<=v&&23>=v?u.skip(2):24<=v&&31>=v&&u.skip(3);else if(4224<=N&&4255>=N)u=v,v=N&255,128<=v&&135>=v?u.skip(4):136<=v&&143>=v&&u.skip(5);else if(32<=N&&127>=N)v=N,u.g&&(v===127?Fc(u.g,"♪"):Fc(u.g,String.fromCharCode(v)));else if(160<=N&&255>=N)u.g&&Fc(u.g,String.fromCharCode(N));else if(4128<=N&&4223>=N){if(v=N&255,u.g)if(VN.has(v)){var Oe=VN.get(v);Fc(u.g,Oe)}else Fc(u.g,"_")}else 4256<=N&&4351>=N&&u.g&&((N&255)!=160?Fc(u.g,"_"):Fc(u.g,"[CC]"));Ee=null}(u=Ee)&&n.push(u)}}}}catch(ke){if(ke instanceof Ye&&ke.code===3e3)Tt("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw ke}return n}function KN(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}yd.prototype.getStreams=function(){return Array.from(this.A)},ne("shaka.cea.CeaDecoder",yd),Pt=function(){return new yd};function zN(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(T(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var u=0;e[r]==255;)u+=255,r++;u+=e[r++],n==4&&t.push(e.subarray(r,r+u)),r+=u}return t}function Kv(){this.j=new Map,this.i=this.h=0,this.g=f_}Kv.prototype.init=function(e){function t(c){c=c.name,c in zv&&(n.g=zv[c])}var n=this,r=[],u=[];if(new V().box("moov",W).box("mvex",W).R("trex",function(c){var f=c.reader;f.skip(4),f.skip(4),c=f.P(),f=f.P(),n.h=c,n.i=f}).box("trak",W).R("tkhd",function(c){var f=c.reader;c=c.version,c==1?(f.skip(8),f.skip(8)):(f.skip(4),f.skip(4));var h=f.P();c==1?f.skip(8):f.skip(4),f.skip(4),f.skip(8),f.skip(2),f.skip(2),f.skip(2),f.skip(2),f.skip(36),f.la(),f.la(),f.la(),f.la(),r.push(h)}).box("mdia",W).R("mdhd",function(c){c=Xa(c.reader,c.version),u.push(c.timescale)}).box("minf",W).box("stbl",W).R("stsd",ee).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",H).box("sinf",W).box("frma",function(c){c=ql(c.reader).codec,c in zv&&(n.g=zv[c])}).parse(e,!0),!r.length||!u.length||r.length!=u.length)throw new Ye(2,2,2010);this.g==f_&&He("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(c,f){n.j.set(c,u[f])})},Kv.prototype.parse=function(e){var t=this;if(this.g==f_)return[];var n=[],r=0,u=[];return new V().box("moof",function(c){r=c.start,u=[],W(c)}).box("traf",function(c){u.push({baseMediaDecodeTime:null,Zc:t.h,Fd:t.i,Mg:[],timescale:9e4}),W(c)}).R("trun",function(c){var f=u[u.length-1];c=Ru(c.reader,c.version,c.flags),f.Mg.push(c)}).R("tfhd",function(c){var f=u[u.length-1];c=Rs(c.reader,c.flags),f.Zc=c.Zc||t.h,f.Fd=c.Fd||t.i,c=c.trackId,t.j.has(c)&&(f.timescale=t.j.get(c))}).R("tfdt",function(c){var f=u[u.length-1];c=To(c.reader,c.version),f.baseMediaDecodeTime=c.baseMediaDecodeTime}).box("mdat",function(c){for(var f=r-c.start-8,h=c.reader.xa(),v=m(u),A=v.next();!A.done;A=v.next()){if(A=A.value,A.baseMediaDecodeTime===null)throw He("Unable to find base media decode time for CEA captions!"),new Ye(2,2,2010);c.reader.seek(h),S6(t,c.reader,A.baseMediaDecodeTime,A.timescale,A.Zc,A.Fd,f,A.Mg,n)}}).parse(e,!1),n};function S6(e,t,n,r,u,c,f,h,v){var A=0,N=c,B=h.map(function(fe){return fe.Tg});for(B=[].concat.apply([],T(B)),B.length&&(N=B[0].sampleSize||c),t.skip(f+h[0].Dh);t.ra();){f=t.P();var z=t.S(),J=null;switch(J=!1,h=1,e.g){case Rp:J=z&31,J=J==6;break;case xp:h=2,t.skip(1),J=z>>1&63,J=J==39||J==40;break;case Np:h=2,t.skip(1),J=z>>1&63,J=J==23||J==24;break;default:return}if(J)for(z=0,A<B.length&&(z=B[A].ke||0),z=(n+z)/r,h=m(zN(t.rb(f-h))),J=h.next();!J.done;J=h.next())v.push({packet:J.value,pts:z});else try{t.skip(f-h)}catch(fe){break}N-=f+4,N==0&&(n=A<B.length?n+(B[A].Kf||u):n+u,A++,A<B.length?N=B[A].sampleSize||c:N=c)}}ne("shaka.cea.Mp4CeaParser",Kv);var f_=0,Rp=1,xp=2,Np=3,zv={avc1:Rp,avc3:Rp,dvav:Rp,dva1:Rp,hev1:xp,hvc1:xp,dvh1:xp,dvhe:xp,vvc1:Np,vvi1:Np,dvc1:Np,dvi1:Np};$t["video/mp4"]=function(){return new Kv};function Yv(){this.g=null}Yv.prototype.init=function(){},Yv.prototype.parse=function(e){this.g?this.g.clearData():this.g=new kr;var t=[];if(e=nr(e),!sp(e))return t;e=this.g.parse(e);var n=e.$c(),r=e.Md();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var u=m(zN(r.data)),c=u.next();!c.done;c=u.next())t.push({packet:c.value,pts:r.time});return t},ne("shaka.cea.TsCeaParser",Yv),$t["video/mp2t"]=function(){return new Yv};function YN(e,t,n){var r=C6(e),u=null;e=[];var c=[],f=null,h=new Set(r.map(function(A){return A.keyId}));h.delete(null);var v="cenc";if(1<h.size)throw new Ye(2,4,4010);if(!t){if(c=r.filter(function(A){return A.Qc=="urn:mpeg:dash:sea:2012"}),1<c.length)throw new Ye(2,4,4050);c.length&&(f=x6(c[0])),(c=r.find(function(A){return A.Qc=="urn:mpeg:dash:mp4protection:2011"}))&&c.encryptionScheme&&(v=c.encryptionScheme),c=r.filter(function(A){return A.Qc=="urn:mpeg:dash:mp4protection:2011"?(u=A.init||u,!1):A.Qc!="urn:mpeg:dash:sea:2012"}),c.length&&(e=b6(u,v,c,n,h),e.length==0&&(e=[As("",v,u)]))}if(r.length&&!f&&(t||!c.length))for(e=[],t=m(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(As(n,v,u));if(h=Array.from(h)[0]||null)for(v=m(e),t=v.next();!t.done;t=v.next())for(t=m(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=h;return{mg:h,ek:u,drmInfos:e,Fe:f,rg:!0}}function w6(e,t,n,r){var u=YN(e,n,r);if(t.rg)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=u.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=u.drmInfos),t.rg=!1;else if(0<u.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(c){return u.drmInfos.some(function(f){return f.keySystem==c.keySystem})}),t.drmInfos.length==0))throw new Ye(2,4,4008);return u.mg||t.mg}function A6(e){var t=0,n=ln(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=nr(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function I6(e){e=m(Eo(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=m(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return ei(n)}return""}function Wv(e){var t=Vi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ei(t))?t:(e=Vi(e.node,"urn:microsoft:playready","pro"),!e||!ei(e)||(e=ei(e),e=Wo(e),e=A6(e).filter(function(n){return n.type===N6})[0],!e)?"":(e=ci(e.value,!0),(e=Su(e,"WRMHEADER"))?I6(e):""))}function b6(e,t,n,r,u){var c=[];n=m(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var h=r[f.Qc];if(h){var v;if((v=Vi(f.node,"urn:microsoft:playready","pro"))&&ei(v)){v=ei(v),v=Wo(v);var A=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);v=[{initData:Pe(v,A,new Set,0),initDataType:"cenc",keyId:f.keyId}]}else v=null;if(A=null,f.Qc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){A=f;var N=u;if(N.size==0)A=null;else{var B=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),z=new Uint8Array([]);A=[{initData:Pe(z,B,N,1),initDataType:"cenc",keyId:A.keyId}]}}v=As(h,t,f.init||e||v||A),(h=M6.get(h))&&(v.licenseServerUri=h(f)),c.push(v)}}return c}function C6(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=R6(n.value))&&t.push(n);return t}function R6(e){var t=e.attributes.schemeIdUri,n=Po(e,"urn:mpeg:cenc:2013","default_KID"),r=Ec(e,"urn:mpeg:cenc:2013","pssh").map(Io),u=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new Ye(2,4,4009);var c=[];try{c=r.map(function(f){return{initDataType:"cenc",initData:Wo(f),keyId:null}})}catch(f){throw new Ye(2,4,4007)}return{node:e,Qc:t,keyId:n,init:0<c.length?c:null,encryptionScheme:u}}function x6(e){if(!g.crypto||!g.crypto.subtle)throw He("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Ye(2,4,4042);var t=Vi(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new Ye(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new Ye(2,4,4051);if(t=Vi(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new Ye(2,4,4051);if(e=t.attributes.IV,t=yi(t.attributes.keyUriTemplate),!e||!t)throw new Ye(2,4,4051);if(e=Xu(e.substr(2)),e.byteLength!=16)throw new Ye(2,4,4048);return{pi:t,iv:e}}var N6=1,M6=new Map().set("com.widevine.alpha",function(e){var t=Vi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ei(t))?t:(e=Vi(e.node,"urn:microsoft","laurl"))&&yi(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Wv).set("com.microsoft.playready.recommendation",Wv).set("com.microsoft.playready.software",Wv).set("com.microsoft.playready.hardware",Wv).set("org.w3.clearkey",function(e){var t=Vi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ei(t))?t:(e=Vi(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=ei(e))?e:""});function Mp(e,t,n,r,u,c){var f={RepresentationID:t,Number:n,SubNumber:r,Bandwidth:u,Time:c};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(h,v,A,N){if(h=="$$")return"$";var B=f[v];if(B==null)return h;switch(v=="RepresentationID"&&A&&(A=void 0),v=="Time"&&typeof B!="bigint"&&(.2<=Math.abs(B-Math.round(B))&&He("Calculated $Time$ values must be close to integers"),B=Math.round(B)),N){case void 0:case"d":case"i":case"u":h=B.toString();break;case"o":h=B.toString(8);break;case"x":h=B.toString(16);break;case"X":h=B.toString(16).toUpperCase();break;default:h=B.toString()}return A=g.parseInt(A,10)||1,Array(Math.max(0,A-h.length)+1).join("0")+h})}function WN(e,t){var n=Ns(e,t,"timescale"),r=1;n&&(r=Hs(n)||1),n=Ns(e,t,"duration"),(n=Hs(n||""))&&(n/=r);var u=Ns(e,t,"startNumber"),c=Number(Ns(e,t,"presentationTimeOffset"))||0,f=lo(u||"");if((u==null||f==null)&&(f=1),u=null,t=Ed(e,t,"SegmentTimeline")){t=sr(t,"S"),u=r,e=e.ha.duration||1/0;for(var h=f,v=[],A=-c,N=0;N<t.length;++N){var B=t[N],z=t[N+1],J=Er(B,"t",lo),fe=Er(B,"d",lo),pe=Er(B,"r",_c);if(B=Er(B,"k",_c)||0,J!=null&&(J-=c),fe){if(J=J!=null?J:A,pe=pe||0,0>pe)if(z){if(z=Er(z,"t",lo),z==null)break;if(J>=z)break;pe=Math.ceil((z-J)/fe)-1}else{if(e==1/0)break;if(J/u>=e)break;pe=Math.ceil((e*u-J)/fe)-1}for(0<v.length&&J!=A&&(v[v.length-1].end=J/u),z=0;z<=pe;++z)A=J+fe,v.push({start:J/u,end:A/u,Zf:J,Ab:B,Qi:v.length+h}),J=A}}u=v}return{timescale:r,Ma:n,td:f,Ob:c/r||0,Yf:c,timeline:u}}function $N(e,t){return[t(e.J),t(e.ia),t(e.na)].filter(Ws)}function Ns(e,t,n){t=$N(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function Ed(e,t,n){t=$N(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=Hi(r.value,n));r=t.next());return e}function D6(e,t,n,r,u,c){for(var f=Po(e,"http://www.w3.org/1999/xlink","href"),h=Po(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",v=m(Object.keys(e.attributes)),A=v.next();!A.done;A=v.next()){A=A.value;var N=A.split(":"),B=Vu("http://www.w3.org/1999/xlink");N[0]==B&&delete e.attributes[A]}if(5<=c)return $s(new Ye(2,4,4028));if(h!="onLoad")return $s(new Ye(2,4,4027));var z=Ki([r],[f]);return u.request(0,Bi(z,t)).Aa(function(J){if(J=Tu(J.data,e.tagName),!J)return $s(new Ye(2,4,4001,f));for(e.children=[];J.children.length;){var fe=J.children.shift();e.children.push(fe)}fe=m(Object.keys(J.attributes));for(var pe=fe.next();!pe.done;pe=fe.next())pe=pe.value,e.attributes[pe]=J.attributes[pe];return $v(e,t,n,z[0],u,c+1)})}function $v(e,t,n,r,u,c){if(c=c===void 0?0:c,Po(e,"http://www.w3.org/1999/xlink","href")){var f=D6(e,t,n,r,u,c);return n&&(f=f.Aa(void 0,function(){return $v(e,t,n,r,u,c)})),f}f=[];for(var h=m(yf(e)),v=h.next(),A={};!v.done;A={Vc:void 0},v=h.next())A.Vc=v.value,Po(A.Vc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(N){return function(B){return B!==N.Vc}}(A)):A.Vc.tagName!="SegmentTimeline"&&f.push($v(A.Vc,t,n,r,u,c));return zm(f).Aa(function(){return e})}function P6(e,t,n,r,u,c,f){var h,v=new V().R("sidx",function(A){h=O6(t,r,u,c,f,n,A)});if(e&&v.parse(e),h)return h;throw new Ye(2,3,3004)}function O6(e,t,n,r,u,c,f){var h=[];f.reader.skip(4);var v=f.reader.P();if(v==0)throw new Ye(2,3,3005);if(f.version==0)var A=f.reader.P(),N=f.reader.P();else A=f.reader.Pc(),N=f.reader.Pc();f.reader.skip(2);var B=f.reader.la();for(e=e+f.size+N,N=0;N<B;N++){var z=f.reader.P(),J=(z&2147483648)>>>31;z&=2147483647;var fe=f.reader.P();if(f.reader.skip(4),J==1)throw new Ye(2,3,3006);h.push(new Qe(A/v+n,(A+fe)/v+n,function(){return c},e,e+z-1,t,n,r,u)),A+=fe,e+=z}return f.parser.stop(),h}function Hl(e){this.h=ln(e),this.g=new F(this.h,0)}Hl.prototype.ra=function(){return this.g.ra()};function hl(e){var t=XN(e);if(7<t.length)throw new Ye(2,3,3002);var n=0;t=m(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=XN(e);e:{r=m(L6);for(var u=r.next();!u.done;u=r.next())if(no(t,new Uint8Array(u.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.xa();else{if(t.length==8&&t[1]&224)throw new Ye(2,3,3001);for(u=r=0;u<t.length;u++){var c=t[u];r=u==0?c&(1<<8-t.length)-1:256*r+c}t=r}return t=e.g.xa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.xa(),r=ln(e.h,e.g.xa(),t),e.g.skip(t),new k6(n,r)}function XN(e){var t=e.g.xa(),n=e.g.S();if(n==0)throw new Ye(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),nr(e.h,t,n)}var L6=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function k6(e,t){this.id=e,this.g=t}function d_(e){if(8<e.g.byteLength)throw new Ye(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new Ye(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function F6(e,t,n,r,u,c,f,h,v){function A(){return u}var N=[];e=new Hl(e.g);for(var B=null,z=null;e.ra();){var J=hl(e);if(J.id==187){var fe=U6(J);fe&&(J=n*fe.bj,fe=t+fe.Gi,B!=null&&N.push(new Qe(B+f,J+f,A,z,fe-1,c,f,h,v)),B=J,z=fe)}}return B!=null&&N.push(new Qe(B+f,r+f,A,z,null,c,f,h,v)),N}function U6(e){var t=new Hl(e.g);if(e=hl(t),e.id!=179)throw new Ye(2,3,3013);if(e=d_(e),t=hl(t),t.id!=183)throw new Ye(2,3,3012);t=new Hl(t.g);for(var n=0;t.ra();){var r=hl(t);if(r.id==241){n=d_(r);break}}return{bj:e,Gi:n}}function QN(e,t,n){if(t=Ed(e,t,"Initialization"),!t)return null;var r=e.J.Ja(),u=t.attributes.sourceURL;u&&(r=Ki(r,[yi(u)],e.lb())),u=0;var c=null;return(t=Er(t,"range",Ef))&&(u=t.start,c=t.end),n=new Dn(function(){return r},u,c,nM(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function B6(e,t,n){var r=Number(Ns(e,_d,"presentationTimeOffset"))||0,u=Ns(e,_d,"timescale"),c=1;u&&(c=Hs(u)||1);var f=r/c||0,h=QN(e,_d,n);j6(e,h);var v=_s(e);return{kc:function(){var A=Ed(v,_d,"RepresentationIndex"),N=v.J.Ja();return A&&(A=yi(A.attributes.sourceURL))&&(N=Ki(N,[A],v.lb())),A=eM(v),JN(v,t,h,N,A.start,A.end,f)}}}function JN(e,t,n,r,u,c,f){var h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt;return Ne(function(Lt){if(Lt.g==1)return h=e.presentationTimeline,v=!e.wb||!e.ha.qf,A=e.ha.start,N=e.ha.duration,B=e.J.mimeType.split("/")[1],z=t,J=null,fe=[z(r,u,c,!1),B=="webm"?z(n.M(),n.Ha,n.va,!0):null],z=null,R(Lt,Promise.all(fe),2);if(pe=Lt.h,Ee=pe[0],Oe=pe[1]||null,ke=null,rt=A-f,Fe=A,$e=N?A+N:1/0,B=="mp4")var It=P6(Ee,u,r,n,rt,Fe,$e);else{It=Ee;var Ut=new Hl(Oe);if(hl(Ut).id!=440786851)throw new Ye(2,3,3008);var Nt=hl(Ut);if(Nt.id!=408125543)throw new Ye(2,3,3009);Ut=Nt.g.byteOffset,Nt=new Hl(Nt.g);for(var tn=null;Nt.ra();){var Ht=hl(Nt);if(Ht.id==357149030){tn=Ht;break}}if(!tn)throw new Ye(2,3,3010);for(tn=new Hl(tn.g),Ht=1e6,Nt=null;tn.ra();){var Wt=hl(tn);if(Wt.id==2807729)Ht=d_(Wt);else if(Wt.id==17545)if(Wt.g.byteLength==4)Nt=Wt.g.getFloat32(0);else if(Wt.g.byteLength==8)Nt=Wt.g.getFloat64(0);else throw new Ye(2,3,3003)}if(Nt==null)throw new Ye(2,3,3011);if(tn=Ht/1e9,Nt*=tn,It=hl(new Hl(It)),It.id!=475249515)throw new Ye(2,3,3007);It=F6(It,Ut,tn,Nt,r,n,rt,Fe,$e)}for(ke=It,nt=m(ke),ct=nt.next();!ct.done;ct=nt.next())gt=ct.value,gt.codecs=e.J.codecs,gt.mimeType=e.J.mimeType,gt.bandwidth=e.bandwidth;return h.qd(ke),J=new Mr(ke),v&&J.Ec(Fe,$e,!0),Lt.return(J)})}function _d(e){return e.Sc}function eM(e){var t=Ed(e,_d,"RepresentationIndex");return e=Ns(e,_d,"indexRange"),e=Ef(e||""),t&&(e=Er(t,"range",Ef,e)),e}function j6(e,t){if(tM(e,t),!eM(e))throw new Ye(2,4,4002)}function tM(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=_r&&n!="mp4"&&n!="webm")throw new Ye(2,4,4006);if(n=="webm"&&!t)throw new Ye(2,4,4005)}function nM(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.$d,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ia.label||null,roles:e.roles||null,language:e.ia.language||null}}function Z6(e,t,n){var r=QN(e,rM,n),u=q6(e);if(!u.Ma&&!u.timeline&&1<u.Lc.length)throw new Ye(2,4,4002);if(!u.Ma&&!e.ha.duration&&!u.timeline&&u.Lc.length==1)throw new Ye(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new Ye(2,4,4002);var c=null,f=null;e.na.id&&e.J.id&&(f=t[e.na.id+","+e.J.id])&&(c=f.segmentIndex);var h=G6(e.ha.start,e.ha.duration,e.J.Ja,u,r,n,e.J.mimeType,e.J.codecs,e.bandwidth,e.lb);return t=!c,c?c.od(h,e.presentationTimeline.nb()):c=new Mr(h),e.presentationTimeline.qd(h),e.wb&&e.ha.qf||c.Ec(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),f&&(f.segmentIndex=c),{kc:function(){return c&&c.getNumReferences()!=0||c.Wd(h),Promise.resolve(c)}}}function rM(e){return e.Qb}function q6(e){var t=H6(e);e=WN(e,rM);var n=e.td;n==0&&(n=1);var r=0;return e.Ma?r=e.Ma*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{Ma:e.Ma,startTime:r,td:n,Ob:e.Ob,timeline:e.timeline,Lc:t}}function G6(e,t,n,r,u,c,f,h,v,A){var N=r.Lc.length;r.timeline&&r.timeline.length!=r.Lc.length&&(N=Math.min(r.timeline.length,r.Lc.length));for(var B=e-r.Ob,z=t?e+t:1/0,J=[],fe=r.startTime,pe={},Ee=0;Ee<N;pe={se:void 0,le:void 0},Ee++){pe.le=r.Lc[Ee];var Oe=fe;fe=void 0,fe=r.Ma!=null?Oe+r.Ma:r.timeline?r.timeline[Ee].end:Oe+t,pe.se=null,pe=new Qe(e+Oe,e+fe,function(ke){return function(){return ke.se==null&&(ke.se=Ki(n(),[ke.le.wi],A())),ke.se}}(pe),pe.le.start,pe.le.end,u,B,e,z,[],"",null,null,qe,c),pe.codecs=h,pe.mimeType=f,pe.bandwidth=v,J.push(pe)}return J}function H6(e){return[e.J.Qb,e.ia.Qb,e.na.Qb].filter(Ws).map(function(t){return sr(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.lf&&(e.lf=!0);var n=yi(t.attributes.media);return t=Er(t,"mediaRange",Ef,{start:0,end:null}),{wi:n,start:t.start,end:t.end}})}function iM(e,t,n,r,u,c,f,h,v){v||e.J.Pd||(e.J.Pd=Ns(e,Vl,"initialization"));var A=e.J.Pd?Y6(e,f):null,N=V6(e);K6(N);var B=_s(e);if(N.gd)return tM(e,A),{kc:function(){var Ee=Mp(N.gd,B.J.id,null,null,B.bandwidth||null,null);return Ee=Ki(B.J.Ja(),[Ee]),JN(B,t,A,Ee,0,null,N.Ob)}};if(N.Ma)return r||e.ia.contentType==="image"||(n=e.ha.start,r=e.na.id,v=e.ha.duration,r=(r=r!=null&&c[r]||v)?n+r:1/0,e.presentationTimeline.yf(N.Ma),e.presentationTimeline.Kg(n,r)),{kc:function(){return z6(B,N,u,A,c,f,h,e.J.me)}};var z=null;r=r=null,e.na.id&&e.J.id&&(r=e.na.id+","+e.J.id,r=n[r])&&(z=r.segmentIndex);var J=e.ha.start,fe=e.ha.duration?J+e.ha.duration:1/0,pe=!(e.wb&&e.ha.qf);return z?(n=z,oM(n,N,J,fe,pe,A),n.Ga(e.presentationTimeline.nb())):z=new Xv(N,e.J.id,e.bandwidth,e.J.Ja,e.lb,J,fe,A,pe,f,e.J.me),N.timeline&&e.ia.contentType!=="image"&&e.presentationTimeline.Lg(N.timeline,J),r&&e.wb&&(r.segmentIndex=z),{kc:function(){return z instanceof Xv&&z.getNumReferences()==0&&oM(z,N,J,fe,pe,A),Promise.resolve(z)}}}function Vl(e){return e.cc}function V6(e){var t=WN(e,Vl),n=Ns(e,Vl,"media"),r=Ns(e,Vl,"index"),u=Ns(e,Vl,"k"),c=0;return u&&(c=parseInt(u,10)),{Ma:t.Ma,timescale:t.timescale,td:t.td,Ob:t.Ob,Yf:t.Yf,timeline:t.timeline,ac:n&&yi(n),gd:r,mimeType:e.J.mimeType,codecs:e.J.codecs,bandwidth:e.bandwidth,xi:c}}function K6(e){var t=e.gd?1:0;if(t+=e.timeline?1:0,t+=e.Ma?1:0,t==0)throw new Ye(2,4,4002);if(t!=1&&(e.gd&&(e.timeline=null),e.Ma=null),!e.gd&&!e.ac)throw new Ye(2,4,4002)}function z6(e,t,n,r,u,c,f,h){function v(tn){var Ht=(tn-Ee)*pe,Wt=Ht+t.Ob,En=Ht+z;Ht=En+pe;var An=Math.min(Ht,N()),Vn=[],Qn=t.xi;if(Qn)for(var ar=(An-En)/Qn,Ar={},Qr=0;Qr<Qn;Ar={hh:void 0},Qr++){var zr=En+ar*Qr,Si=zr+ar;Ar.hh=Qr+1,Ar=new Qe(zr,Si,function(Pr){return function(){var Fr=Wt*Oe;return"BigInt"in g&&Fr>Number.MAX_SAFE_INTEGER&&(Fr=BigInt(Wt)*BigInt(Oe)),Fr=Mp(ke,Fe,tn,Pr.hh,rt,Fr),Ki($e(),[Fr],nt())}}(Ar),0,null,r,ct,z,N(),[],"",null,null,qe,c),Ar.codecs=e.J.codecs,Ar.mimeType=e.J.mimeType,h==0?0<Qr&&Ar.Jc():Qr%h!=0&&Ar.Jc(),Vn.push(Ar)}return En=new Qe(En,An,function(){if(Qn)return[];var Pr=Wt*Oe;return"BigInt"in g&&Pr>Number.MAX_SAFE_INTEGER&&(Pr=BigInt(Wt)*BigInt(Oe)),Pr=Mp(ke,Fe,tn,null,rt,Pr),Ki($e(),[Pr],nt())},0,null,r,ct,z,N(),Vn,"",null,null,qe,c,0<Vn.length),En.codecs=e.J.codecs,En.mimeType=e.J.mimeType,En.bandwidth=e.bandwidth,En.j=Ht,En}function A(){var tn=[Math.max(B.nb(),z),Math.min(B.Xb(),N())].map(function(Ht){return Ht-z});return tn=[Math.ceil(tn[0]/pe),Math.ceil(tn[1]/pe)-1],e.J.Sa&&tn[1]++,tn.map(function(Ht){return Ht+Ee})}function N(){var tn=J!=null&&u[J]||fe;return tn?z+tn:1/0}var B=e.presentationTimeline,z=e.ha.start,J=e.na.id,fe=e.ha.duration,pe=t.Ma,Ee=t.td,Oe=t.timescale,ke=t.ac,rt=e.bandwidth||null,Fe=e.J.id,$e=e.J.Ja,nt=e.lb,ct=z-t.Ob,gt=A();n=e.wb?Math.max(gt[0],gt[1]-n+1):gt[0],f=f||gt[1],gt=[];for(var Lt=n;Lt<=f;++Lt){var It=v(Lt);gt.push(It)}var Ut=new Mr(gt);if(gt=B.Xb()<N(),Lt=B.U(),gt||Lt){var Nt=Math.max(n,f+1);n=pe,e.J.Sa&&(n=.1),Ut.re(n,function(){var tn=B.nb();Ut.Ga(tn);var Ht=m(A());Ht.next(),Ht=Ht.next().value;for(var Wt=[];Nt<=Ht;){var En=v(Nt);Wt.push(En),Nt++}return tn>N()&&!Wt.length?null:Wt})}return Promise.resolve(Ut)}function Y6(e,t){var n=e.J.Pd;if(n||(n=Ns(e,Vl,"initialization")),!n)return null;n=yi(n);var r=e.J.id,u=e.bandwidth||null,c=e.J.Ja,f=e.lb;return t=new Dn(function(){var h=Mp(n,r,null,null,u,null);return Ki(c(),[h],f())},0,null,nM(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function Xv(e,t,n,r,u,c,f,h,v,A,N){Mr.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=r,this.H=u,this.j=c,this.l=f,this.s=h,this.A=A,this.G=N,v&&aM(this)}Y(Xv,Mr),p=Xv.prototype,p.getNumReferences=function(){return this.h?this.h.timeline.length:0},p.release=function(){Mr.prototype.release.call(this),this.h=null},p.Ga=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.j<=e;r+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function oM(e,t,n,r,u,c){if(W6(e,c),e.h){if(n=e.h.timeline,e.h.ac!==t.ac&&(e.h.ac=t.ac),n.length){var f=n[n.length-1];t=t.timeline.filter(function(h){return h.start>=f.end})}else t=t.timeline.slice();0<t.length&&e.h.timeline.push.apply(e.h.timeline,T(t)),e.l!==r&&(e.l=r)}else e.h=t,e.j=n,e.l=r;u&&aM(e)}function W6(e,t){if(e.s!==t){e.s=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&Vt(n,t)}}function aM(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.Ga(e.j)}}p.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var u=t[r],c=u.start+this.j;if(u=r<n?t[r+1].start+this.j:this.l===1/0?u.end+this.j:this.l,e>=c&&e<u)return r+this.i}return null},p.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=this.h.timeline[e],u=r.Qi,c=this.h.Yf+r.Zf;n=this.j-this.h.Ob;var f=this.j+r.end,h=f;e===this.getNumReferences()-1&&this.l!==1/0&&(h=this.l);for(var v=this.h.codecs,A=this.h.mimeType,N=this.h.bandwidth,B=[],z=(r.end-r.start)/r.Ab,J={},fe=0;fe<r.Ab;J={te:void 0,ih:void 0},fe++){var pe=r.start+z*fe,Ee=pe+z;J.ih=fe+1,J.te=null,J=new Qe(this.j+pe,this.j+Ee,function(Oe){return function(){return t.h?(Oe.te==null&&(Oe.te=sM(t.h.ac,t.F,u,t.B,c,Oe.ih,t.C,t.H)),Oe.te):[]}}(J),0,null,this.s,n,this.j,this.l,[],"",null,null,qe,this.A),J.codecs=v,J.mimeType=A,J.bandwidth=N,this.G==0?0<fe&&J.Jc():fe%this.G!=0&&J.Jc(),B.push(J)}n=new Qe(this.j+r.start,h,function(){return 0<r.Ab||!t.h?[]:sM(t.h.ac,t.F,u,t.B,c,null,t.C,t.H)},0,null,this.s,n,this.j,this.l,B,"",null,null,qe,this.A,0<r.Ab),n.codecs=v,n.mimeType=A,n.j=f,n.bandwidth=N,this.g[e]=n}return n};function sM(e,t,n,r,u,c,f,h){return e=Mp(e,t,n,c,r||null,u),Ki(f(),[e],h()).map(function(v){return v.toString()})}function Td(e){this.o=null,this.A=e,this.G=new il,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}Td.prototype.configure=function(e){this.o=e},Td.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},Td.prototype.setManifestType=function(e){this.s=e};function Dp(e,t){var n,r,u,c,f,h,v;return Ne(function(A){if(A.g==1)return n=Ki(e.i,[$6(e,t)]),r=Bi(n,e.o.retryParameters),u=e.A.networkingEngine.request(8,r),ol(e.G,u),ce(A,2),R(A,u.promise,4);if(A.g!=2)return c=A.h,f=Cr(c.data),h=JSON.parse(f),h.VERSION==1&&X6(e,h,c.uri),ye(A,0);if((v=be(A))&&v.code==7001)return A.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new on(function(){Dp(e,t)}),e.g.Z(e.C),X(A)})}function $6(e,t){if(!e.m.length)return t;t=new Ei(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),u=t.g;return e.s=="DASH"?(u.add("_DASH_pathway",n),u.add("_DASH_throughput",String(r))):e.s=="HLS"&&(u.add("_HLS_pathway",n),u.add("_HLS_throughput",String(r))),kf(u)&&$r(t,u),t.toString()}function X6(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new on(function(){Dp(e,r)}),(n=t.TTL)&&(e.C=n),e.g.Z(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function Sd(e,t,n,r){var u=e.l.get(t);u||(u=new Map),u.set(n,r),e.l.set(t,u)}Td.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Pp(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],u=m(e.m),c=u.next(),f={};!c.done;f={Nc:void 0},c=u.next())if(f.Nc=c.value,c=t.get(f.Nc))r.push({Ef:f.Nc,location:c});else if(c=e.F.find(function(v){return function(A){return A.uj==v.Nc}}(f))){var h=t.get(c["BASE-ID"]);h&&(c["URI-REPLACEMENT"].ph?(h=new Ei(h),Iu(h,c["URI-REPLACEMENT"].ph),r.push({Ef:f.Nc,location:h.toString()})):r.push({Ef:f.Nc,location:h}))}for(u=Date.now(),f=m(e.j.keys()),c=f.next();!c.done;c=f.next())c=c.value,h=e.j.get(c),u>h&&e.j.delete(c);if(r=r.filter(function(v){for(var A=m(e.j.keys()),N=A.next();!N.done;N=A.next())if(N.value.includes(new Ei(v.location).Db))return!1;return!0}),r.length&&(e.B=r[0].Ef),r=r.map(function(v){return v.location}),!r.length&&e.h)for(u=m(e.h.split(",")),f=u.next();!f.done;f=u.next())(f=t.get(f.value))&&(e.B=e.h,r.push(f));if(!r.length)for(t=m(t.values()),u=t.next();!u.done;u=t.next())r.push(u.value);return n?r:Ki(e.i,r)}function Fo(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.s=this.o=!1,this.m=new Set}p=Fo.prototype,p.release=function(){for(var e=m(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[]},p.ci=function(){return this.l},p.jf=function(){return this.j.slice()},p.Lh=function(){return this.i},p.ng=function(e,t){if(e){if(e.type=="audio")for(var n=m(this.h),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(u){return u!==e});else if(e.type=="video")for(n=m(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(u){return u!==e}),r.trickModeVideo&&(r.trickModeVideo.matchedStreams=r.trickModeVideo.matchedStreams.filter(function(u){return u!==e}));else if(e.type==_r)for(n=m(this.j),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(u){return u!==e});else if(e.type=="image")for(n=m(this.i),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(u){return u!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}};function uM(e,t){var n=[],r=[],u=[],c=[];e=m(e);for(var f=e.next();!f.done;f=e.next()){var h=f.value;f=new Map(h.audioStreams.map(function(B){return[m_(B),B]}));var v=new Map(h.videoStreams.map(function(B){return[g_(B),B]})),A=new Map(h.textStreams.map(function(B){return[Fp(B),B]}));if(h=new Map(h.imageStreams.map(function(B){return[Up(B),B]})),t){var N=pM(_r);A.set(Fp(N),N),N=pM("image"),h.set(Up(N),N)}n.push(f),r.push(v),u.push(A),c.push(h)}return{gg:n,nh:r,jh:u,Bg:c}}p.Je=function(e,t,n){n=n===void 0?!1:n;var r=this,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt,It,Ut,Nt,tn,Ht,Wt,En,An;return Ne(function(Vn){if(Vn.g==1){if(u=Mi,!t&&e.length==1)return c=uM(e,!1),f=c.gg,h=c.nh,v=c.jh,A=c.Bg,r.h=Array.from(f[0].values()),r.g=Array.from(h[0].values()),r.j=Array.from(v[0].values()),r.i=Array.from(A[0].values()),Vn.u(2);for(N=n?r.m.size:0,B=-1,z=0;z<e.length;z++)J=e[z],r.m.has(J.id)||(r.m.add(J.id),B==-1&&(B=z));return B==-1?Vn.return():(fe=uM(e,!0),pe=fe.gg,Ee=fe.nh,Oe=fe.jh,ke=fe.Bg,R(Vn,Promise.all([Kl(r,r.h,pe,B,Op,wd,N),Kl(r,r.g,Ee,B,Op,wd,N),Kl(r,r.j,Oe,B,Op,wd,N),Kl(r,r.i,ke,B,Op,wd,N)]),2))}if(rt=0,Fe=[],r.g.length&&r.h.length)for(It=m(r.h),Ut=It.next();!Ut.done;Ut=It.next())for(Nt=Ut.value,tn=m(r.g),Ht=tn.next();!Ht.done;Ht=tn.next())Wt=Ht.value,En=Ir(Nt.drmInfos,Wt.drmInfos),Nt.drmInfos.length&&Wt.drmInfos.length&&!En.length||(An=rt++,Fe.push({id:An,language:Nt.language,disabledUntilTime:0,primary:Nt.primary,audio:Nt,video:Wt,bandwidth:(Nt.bandwidth||0)+(Wt.bandwidth||0),drmInfos:En,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for($e=r.g.length?r.g:r.h,nt=m($e),ct=nt.next();!ct.done;ct=nt.next())gt=ct.value,Lt=rt++,Fe.push({id:Lt,language:gt.language,disabledUntilTime:0,primary:gt.primary,audio:gt.type==u.Y?gt:null,video:gt.type==u.ja?gt:null,bandwidth:gt.bandwidth||0,drmInfos:gt.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});r.l=Fe,X(Vn)})};function lM(e){var t,n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt,It,Ut,Nt,tn,Ht;return Ne(function(Wt){switch(Wt.g){case 1:if(t=Mi,e.length==1)return Wt.return(e[0]);for(n=e.map(function(En){return new Map(En.filter(function(An){return An.type===t.Y}).map(function(An){return[m_(An),An]}))}),r=e.map(function(En){return new Map(En.filter(function(An){return An.type===t.ja}).map(function(An){return[g_(An),An]}))}),u=e.map(function(En){return new Map(En.filter(function(An){return An.type===t.wa}).map(function(An){return[Fp(An),An]}))}),c=e.map(function(En){return new Map(En.filter(function(An){return An.type===t.De}).map(function(An){return[Up(An),An]}))}),f=m(u),h=f.next();!h.done;h=f.next())v=h.value,A=hM(t.wa),v.set(Fp(A),A);for(N=m(c),B=N.next();!B.done;B=N.next())z=B.value,J=hM(t.De),z.set(Up(J),J);return fe=new Fo,R(Wt,Kl(fe,[],n,0,Qv,Jv,0),2);case 2:return pe=Wt.h,R(Wt,Kl(fe,[],r,0,Qv,Jv,0),3);case 3:return Ee=Wt.h,R(Wt,Kl(fe,[],u,0,Qv,Jv,0),4);case 4:return Oe=Wt.h,R(Wt,Kl(fe,[],c,0,Qv,Jv,0),5);case 5:if(ke=Wt.h,rt=0,Ee.length&&pe.length)for(gt=m(pe),Lt=gt.next();!Lt.done;Lt=gt.next())for(It=Lt.value,Ut=m(Ee),Nt=Ut.next();!Nt.done;Nt=Ut.next())tn=Nt.value,Ht=rt++,tn.variantIds.push(Ht),It.variantIds.push(Ht);else for(Fe=Ee.concat(pe),$e=m(Fe),nt=$e.next();!nt.done;nt=$e.next())ct=nt.value,ct.variantIds=[rt++];return Wt.return(Ee.concat(pe).concat(Oe).concat(ke))}})}function Kl(e,t,n,r,u,c,f){var h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt;return Ne(function(It){switch(It.g){case 1:for(h=[],v=0;v<n.length;v++)v>=r?h.push(new Set(n[v].values())):h.push(new Set);A=m(t),N=A.next();case 2:if(N.done){It.u(4);break}return B=N.value,R(It,Q6(e,B,n,r,c,h,f),5);case 5:if(z=It.h,!z)throw new Ye(2,4,4037);N=A.next(),It.u(2);break;case 4:for(J=m(h),fe=J.next();!fe.done;fe=J.next())for(pe=fe.value,Ee=m(pe),Oe=Ee.next();!Oe.done;Oe=Ee.next())ke=Oe.value,(rt=J6(e,ke,n,u,c,h))&&t.push(rt);for(Fe=m(h),$e=Fe.next();!$e.done;$e=Fe.next())for(nt=$e.value,ct=m(nt),gt=ct.next(),Lt={};!gt.done;Lt={Sf:void 0},gt=ct.next())if(Lt.Sf=gt.value,!p_(Lt.Sf)&&t.some(function(Ut){return function(Nt){return h_(e,Ut.Sf,Nt)}}(Lt)))throw new Ye(2,4,4037);return It.return(t)}})}function Q6(e,t,n,r,u,c,f){return Ne(function(h){return h.g==1?(dM(e,n,t,0<f),t.matchedStreams?t.segmentIndex?R(h,cM(t,r+f),2):h.u(2):h.return(!1)):(fM(t,r,u,c,f),h.return(!0))})}function cM(e,t){var n,r,u,c,f,h;return Ne(function(v){if(v.g==1){for(n=[],r=e.matchedStreams,u=t;u<r.length;u++)c=r[u],n.push(c.createSegmentIndex()),c.trickModeVideo&&!c.trickModeVideo.segmentIndex&&n.push(c.trickModeVideo.createSegmentIndex());return R(v,Promise.all(n),2)}if(e.segmentIndex instanceof Ti)for(f=t;f<r.length;f++)h=r[f],h.segmentIndex&&e.segmentIndex.h.push(h.segmentIndex);X(v)})}function J6(e,t,n,r,u,c){if(p_(t))return null;var f=r(t);return dM(e,n,f),f.createSegmentIndex&&(f.createSegmentIndex=function(){return Ne(function(h){return f.segmentIndex?h.u(0):(f.segmentIndex=new Ti,R(h,cM(f,0),0))})}),!f.matchedStreams||!f.matchedStreams.length?null:(fM(f,0,u,c,0),f)}function fM(e,t,n,r,u){var c=e.matchedStreams;for(t+=u;t<c.length;t++){var f=c[t];n(e,f);var h=!0;if(e.type=="audio"&&tl(e.language,f.language)==0&&(h=!1),h&&(r[t-u].delete(f),f.fullMimeTypes))for(f=m(f.fullMimeTypes.values()),h=f.next();!h.done;h=f.next())e.fullMimeTypes.add(h.value)}}function Op(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=m(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t}function Qv(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set,t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function wd(e,t){function n(f,h){f||(f=[]),h=m(h);for(var v=h.next();!v.done;v=h.next())v=v.value,f.includes(v)||f.push(v);return f}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=m(t.keyIds),u=r.next();!u.done;u=r.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=t.originalId:(r=t.originalId||"")&&!e.originalId.endsWith(r)&&(e.originalId+=","+r),r=Ir(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new Ye(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=m(t.closedCaptions),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.closedCaptions.set(u,c)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Op(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var f=new Ti,h=m(e.trickModeVideo.matchedStreams),v=h.next();!v.done;v=h.next())f.h.push(v.value.segmentIndex);return e.trickModeVideo.segmentIndex=f,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),wd(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),wd(e.trickModeVideo,t))}function Jv(e,t){var n=e.roles;n||(n=[]);for(var r=m(t.roles),u=r.next();!u.done;u=r.next())u=u.value,n.includes(u)||n.push(u);for(e.roles=n,n=m(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,T(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function dM(e,t,n,r){r=r!==void 0&&r?n.matchedStreams:[],t=m(t);for(var u=t.next();!u.done;u=t.next()){if(u=eZ(e,u.value,n),!u)return;r.push(u)}n.matchedStreams=r}function eZ(e,t,n){var r={audio:m_,video:g_,text:Fp,image:Up}[n.type],u=null,c=r(n);if(t.has(c))u=t.get(c);else{c={audio:function(A,N){return h_(e,A,N)},video:function(A,N){return h_(e,A,N)},text:tZ,image:nZ}[n.type];for(var f={audio:rZ,video:iZ,text:oZ,image:aZ}[n.type],h=m(t.values()),v=h.next();!v.done;v=h.next())v=v.value,!c(n,v)||n.fastSwitching!=v.fastSwitching||u&&!f(n,u,v)||(u=v)}return e.s&&!p_(u)&&t.delete(r(u)),u}function Lp(e,t){return e.mimeType!=t.mimeType?!1:ey(e.codecs)===ey(t.codecs)}p.Wg=function(e){this.o=e},p.dh=function(e){this.s=e};function h_(e,t,n){return!(!Lp(t,n)&&!e.o||t.drmInfos&&!fr(t.drmInfos,n.drmInfos))}function tZ(e,t){return t.language?!(e.forced!==t.forced||tl(e.language,t.language)==0||t.kind!=e.kind):!0}function nZ(){return!0}function rZ(e,t,n){var r=Lp(e,t),u=Lp(e,n);if(r&&!u)return!1;if(!r&&u||(r=tl(e.language,t.language),u=tl(e.language,n.language),u>r))return!0;if(u<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length)return!0;if(u.length<r.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=kp(e.channelsCount,t.channelsCount,n.channelsCount),r==iu?!0:r==pl?!1:(r=kp(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==iu?!0:r==pl?!1:!!(e.bandwidth&&gM(e.bandwidth,t.bandwidth,n.bandwidth)==iu)))}function iZ(e,t,n){var r=Lp(e,t),u=Lp(e,n);if(r&&!u)return!1;if(!r&&u||(r=kp(e.width*e.height,t.width*t.height,n.width*n.height),r==iu))return!0;if(r==pl)return!1;if(e.frameRate){if(r=kp(e.frameRate,t.frameRate,n.frameRate),r==iu)return!0;if(r==pl)return!1}return!!(e.bandwidth&&gM(e.bandwidth,t.bandwidth,n.bandwidth)==iu)}function oZ(e,t,n){var r=tl(e.language,t.language),u=tl(e.language,n.language);if(u>r)return!0;if(u<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length)return!0;if(u.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function aZ(e,t,n){return kp(e.width*e.height,t.width*t.height,n.width*n.height)==iu}function hM(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function pM(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Mr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function kp(e,t,n){if(t==e&&e!=n)return pl;if(n==e&&e!=t)return iu;if(t>e){if(n<=e||n-e<t-e)return iu;if(n-e>t-e)return pl}else{if(n>e)return pl;if(e-n<e-t)return iu;if(e-n>e-t)return pl}return mM}function gM(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?iu:t<e?pl:mM}function p_(e){switch(e.type){case _r:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function g_(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,ey(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function m_(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,ey(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Fp(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Up(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function ey(e){if(!v_.has(e)){var t=_o(e);v_.set(e,t)}return v_.get(e)}ne("shaka.util.PeriodCombiner",Fo),Fo.prototype.setUseStreamOnce=Fo.prototype.dh,Fo.prototype.setAllowMultiTypeVariants=Fo.prototype.Wg,Fo.prototype.combinePeriods=Fo.prototype.Je,Fo.prototype.deleteStream=Fo.prototype.ng,Fo.prototype.getImageStreams=Fo.prototype.Lh,Fo.prototype.getTextStreams=Fo.prototype.jf,Fo.prototype.getVariants=Fo.prototype.ci;var iu=1,mM=0,pl=-1,v_=new Map;function sZ(e,t){var n=new DOMParser,r=uZ.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(u){return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function vM(e,t){try{var n=Br(e);return sZ(n,t)}catch(r){return null}}var uZ=new Un(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function ty(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.sa=1,this.F=[],this.l={Yd:"",type:"",profiles:[],Lb:null,Sa:0,Ja:null,rd:0},this.s=new Map,this.o={},this.B={},this.ka={},this.m=new Fo,this.K=0,this.oa=new D(5),this.L=new on(function(){if(e.I&&!e.g.continueLoadingWhenPaused&&(e.G.$a(e.I,"timeupdate"),e.I.paused)){e.G.pa(e.I,"timeupdate",function(){return wM(e)});return}wM(e)}),this.T=new il,this.O=null,this.C=[],this.ba=1/0,this.H=!1,this.h=null,this.N=0,this.fa=!1,this.G=new Et,this.I=null,this.ga=!1,this.aa="",this.ea=function(){return!1},this.X=[]}p=ty.prototype,p.configure=function(e,t){var n=this.j&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&(this.ea=t),n&&this.i&&this.i.presentationTimeline.U()&&this.L.wc(),this.h&&this.h.configure(this.g),this.m&&(this.m.Wg(this.g.dash.multiTypeVariantsAllowed&&Gn()),this.m.dh(this.g.dash.useStreamOnceInPeriodFlattening))},p.start=function(e,t){var n=this,r;return Ne(function(u){if(u.g==1)return n.H=t.isLowLatencyMode(),n.A=[e],n.j=t,R(u,y_(n),2);if(r=u.h,n.j&&E_(n,r),!n.j)throw new Ye(2,7,7001);return u.return(n.i)})},p.stop=function(){for(var e=m(Object.values(this.o)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.o={},this.B={},this.s.clear(),this.l={Yd:"",type:"",profiles:[],Lb:null,Sa:0,Ja:null,rd:0},this.m=null,this.L!=null&&(this.L.stop(),this.L=null),this.h&&this.h.destroy(),this.G&&(this.G.release(),this.G=null),this.T.destroy()},p.update=function(){var e=this,t;return Ne(function(n){if(n.g==1)return ce(n,2),R(n,y_(e),4);if(n.g!=2)return ye(n,0);if(t=be(n),!e.j||!t)return n.return();e.j.onError(t),X(n)})},p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.U()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.Xb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.K=t.endTime-e,E_(this,0))}}},p.banLocation=function(e){this.h&&this.h.banLocation(e)},p.setMediaElement=function(e){this.I=e};function y_(e){var t,n,r,u,c,f,h,v,A,N,B;return Ne(function(z){return z.g==1?(t=4,n="MPD",r=IZ(e),u=e.A,r.length?(u=r,n="Patch",t=6):1<e.A.length&&e.h&&(c=Pp(e.h,"Location",!0),c.length&&(u=c)),f=Bi(u,e.g.retryParameters),h=Date.now(),R(z,T_(e,f,0,{type:t}),2)):z.g!=3?(v=z.h,e.j?(v.uri&&v.uri!=v.originalUri&&!e.A.includes(v.uri)&&e.A.unshift(v.uri),A=new Ei(v.uri),e.aa=A.g.toString(),R(z,lZ(e,v.data,v.uri,n),3)):z.return(0)):(N=Date.now(),B=(N-h)/1e3,e.oa.sample(1,B),z.return(B))})}function lZ(e,t,n,r){var u,c,f,h,v,A,N,B,z,J;return Ne(function(fe){if(fe.g==1){if(u=t,c=e.g.dash.manifestPreprocessor,f=pv,c!=f){if(gr("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),h=vM(u,r),!h)throw new Ye(2,4,4001,n);c(h),u=bi(h.outerHTML)}if(v=Tu(u,r),!v)throw new Ye(2,4,4001,n);return A=e.g.dash.manifestPreprocessorTXml,N=gv,A!=N&&A(v),r==="Patch"?fe.return(cZ(e,v)):e.g.dash.disableXlinkProcessing?fe.return(yM(e,v,n)):(B=e.g.dash.xlinkFailGracefully,z=$v(v,e.g.retryParameters,B,n,e.j.networkingEngine),ol(e.T,z),R(fe,z.promise,2))}return J=fe.h,fe.return(yM(e,J,n))})}function yM(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt,It,Ut,Nt,tn,Ht,Wt,En,An,Vn,Qn,ar,Ar,Qr,zr,Si,Pr,Fr,si,Ms,Wi,Ua,us,$i,Ds,Md,ml,Dd,Ly,Jp;return Ne(function(Ps){switch(Ps.g){case 1:for(e.h&&e.h.l.clear(),r=[n],u=[],c=new Map,f=sr(t,"Location"),h=m(f),v=h.next();!v.done;v=h.next())A=v.value,N=A.attributes.serviceLocation,(B=Io(A))&&(z=Ki(r,[B])[0],N&&(e.h?Sd(e.h,"Location",N,z):c.set(N,z)),u.push(z));if(e.h?(J=Pp(e.h,"Location",!0),0<J.length&&(r=e.A=J)):u.length&&(r=e.A=u),e.l.Yd=t.attributes.id||"",e.l.rd=Er(t,"publishTime",Ts)||0,e.F=sr(t,"PatchLocation"),fe=Promise.resolve(),(pe=Hi(t,"ContentSteering"))&&e.j)for(Ee=pe.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=Ee):(e.h=new Td(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=Ee,(Oe=Io(pe))&&(Er(pe,"queryBeforeStart",Vs,!1)?fe=Dp(e.h,Oe):Dp(e.h,Oe))),ke=m(c.keys()),rt=ke.next();!rt.done;rt=ke.next())Fe=rt.value,$e=c.get(Fe),Sd(e.h,"Location",Fe,$e);if(nt=sr(t,"BaseURL"),ct=!1,e.h)for(gt=m(nt),Lt=gt.next();!Lt.done;Lt=gt.next())It=Lt.value,Ut=It.attributes.serviceLocation,Nt=Io(It),Ut&&Nt&&(Sd(e.h,"BaseURL",Ut,Nt),ct=!0);if(e.X=null,ct&&e.h||(tn=nt.map(Io),e.X=Ki(r,tn)),Ht=function(){return e.h&&ct?Pp(e.h,"BaseURL"):e.X?e.X:[]},e.l.Ja=Ht,Wt=0,nt&&nt.length&&(Wt=Er(nt[0],"availabilityTimeOffset",_f)||0),e.l.Sa=Wt,En=e.g.dash.ignoreMinBufferTime,An=0,En||(An=Er(t,"minBufferTime",ba)||0),e.K=Er(t,"minimumUpdatePeriod",ba,-1),Vn=Er(t,"availabilityStartTime",Ts),Qn=Er(t,"timeShiftBufferDepth",ba),ar=e.g.dash.ignoreSuggestedPresentationDelay,Ar=null,ar||(Ar=Er(t,"suggestedPresentationDelay",ba)),Qr=e.g.dash.ignoreMaxSegmentDuration,zr=null,Qr||(zr=Er(t,"maxSegmentDuration",ba)),Si=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.ga=e.i.presentationTimeline.U()&&Si=="static"),e.l.type=Si,gZ(e),e.i)for(Pr=e.i.presentationTimeline,Fr=m(Object.values(e.o)),si=Fr.next();!si.done;si=Fr.next())Ms=si.value,Ms.segmentIndex&&Ms.segmentIndex.Ga(Pr.nb());else Wi=e.g.defaultPresentationDelay||1.5*An,Ua=Ar!=null?Ar:Wi,Pr=new rr(Vn,Ua,e.g.dash.autoCorrectDrift);return Pr.vc(Si=="static"),Pr.U()&&!isNaN(e.g.availabilityWindowOverride)&&(Qn=e.g.availabilityWindowOverride),Qn==null&&(Qn=1/0),Pr.ne(Qn),us=t.attributes.profiles||"",e.l.profiles=us.split(","),$i={wb:Si!="static",presentationTimeline:Pr,na:null,ha:null,ia:null,J:null,bandwidth:0,lf:!1,Sa:Wt,Lb:null,profiles:us.split(","),roles:null,lb:function(){return""}},e.N=0,Ds=SM(e,$i,Ht,t,!1),Md=Ds.duration,ml=Ds.periods,(Si!="static"||e.ga)&&Ds.pg||Pr.Za(Md||1/0),e.fa&&!e.H&&e.j.isAutoLowLatencyMode()&&(e.j.enableLowLatencyMode(),e.H=e.j.isLowLatencyMode()),e.H&&Pr.Xg(e.ba),Pr.yf(zr||1),R(Ps,fe,2);case 2:return e.H&&(An=0,Dd=Ar!=null?Ar:e.g.defaultPresentationDelay,Pr.Of(Dd)),e.i?(e.i.periodCount=ml.length,e.i.gapCount=e.N,R(Ps,EM(e,ml,!1),4)):R(Ps,e.m.Je(ml,$i.wb),6);case 6:if(e.i={presentationTimeline:Pr,variants:e.m.l,textStreams:e.m.jf(),imageStreams:e.m.i,offlineSessionIds:[],minBufferTime:An||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:hZ(t),nextUrl:pZ(t),periodCount:ml.length,gapCount:e.N,isLowLatency:e.fa,startTime:null},!Pr.lh()){Ps.u(7);break}return Ly=sr(t,"UTCTiming"),R(Ps,wZ(e,Ht,Ly),8);case 8:if(Jp=Ps.h,!e.j)return Ps.return();Pr.Yg(Jp);case 7:Pr.Ud();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),X(Ps)}})}function EM(e,t,n){var r;return Ne(function(u){if(u.g==1)return R(u,e.m.Je(t,!0,n),2);e.i.variants=e.m.l,r=e.m.jf(),0<r.length&&(e.i.textStreams=r),e.i.imageStreams=e.m.i,e.j.filter(e.i),X(u)})}function cZ(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt,It,Ut,Nt;return Ne(function(tn){if(tn.g==1){if(n=t.attributes.mpdId,r=Er(t,"originalPublishTime",Ts),!n||n!==e.l.Yd||r!==e.l.rd)throw e.F=[],new Ye(1,4,4052);for(u=[],c=[],f=new Set,h=m(yf(t)),v=h.next();!v.done;v=h.next())if(A=v.value,N=Tc(A.attributes.sel||""),B=N[N.length-1],z=Io(A)||"",B.name==="MPD")if(B.Tb==="mediaPresentationDuration"){J=Io(A)||"";var Ht=ba(J);if(Ht!=null){e.l.Lb=Ht;for(var Wt=m(e.s.values()),En=Wt.next();!En.done;En=Wt.next())En.value.Lb=Ht}}else if(B.Tb==="type"){for(e.i.presentationTimeline.vc(z=="static"),e.l.type=z,Ht=m(e.s.values()),Wt=Ht.next();!Wt.done;Wt=Ht.next())Wt.value.wb=z=="dynamic";z=="static"&&(e.K=-1)}else B.Tb==="publishTime"?e.l.rd=Ts(z)||0:B.Tb===null&&A.tagName==="add"&&c.push(A);else if(B.name==="PatchLocation")Rh(e.F,A);else if(B.name==="Period")A.tagName==="add"?c.push(A):A.tagName==="remove"&&B.id&&dZ(e,B.id);else if(B.name==="SegmentTemplate"){if(Wt=Tc(A.attributes.sel||""),Ht=Wt[Wt.length-1],Ht.Tb){Wt=_M(e,Wt),En=Io(A)||"";for(var An=m(Wt),Vn=An.next();!Vn.done;Vn=An.next())Vn=e.s.get(Vn.value),pm(Vn.J.cc,A.tagName,Ht.Tb,En);Ht=Wt}else Ht=[];for(fe=Ht,pe=m(fe),Ee=pe.next();!Ee.done;Ee=pe.next())Oe=Ee.value,f.add(Oe)}else if(B.name==="SegmentTimeline"||B.name==="S"){for(Ht=Tc(A.attributes.sel||""),Ht=_M(e,Ht),Wt=m(Ht),En=Wt.next();!En.done;En=Wt.next())En=e.s.get(En.value),En=Ed(En,Vl,"SegmentTimeline"),An=sr(En,"S"),Rh(An,A),En.children=An;for(ke=Ht,rt=m(ke),Fe=rt.next();!Fe.done;Fe=rt.next())$e=Fe.value,f.add($e)}for(nt=m(f),ct=nt.next();!ct.done;ct=nt.next())gt=ct.value,TM(e,gt);for(Lt=m(c),It=Lt.next();!It.done;It=Lt.next())Ut=It.value,u.push.apply(u,T(fZ(e,Ut)));return u.length?(e.i.periodCount+=u.length,e.i.gapCount=e.N,R(tn,EM(e,u,!0),2)):tn.u(2)}e.l.type=="static"&&(Nt=e.l.Lb,e.i.presentationTimeline.Za(Nt||1/0)),X(tn)})}function fZ(e,t){return SM(e,{wb:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,na:null,ha:null,ia:null,J:null,bandwidth:0,lf:!1,Sa:e.l.Sa,profiles:e.l.profiles,Lb:e.l.Lb,roles:null,lb:function(){return""}},e.l.Ja,t,!0).periods}function dZ(e,t){e.i.periodCount--;for(var n=m(e.s.keys()),r=n.next();!r.done;r=n.next())if(r=r.value,r.startsWith(t)){var u=e.s.get(r);Ed(u,Vl,"SegmentTimeline").children=[],TM(e,r),e.s.delete(r)}e.C=e.C.filter(function(c){return c!==t})}function _M(e,t){var n="",r="",u=-1,c="";t=m(t);for(var f=t.next();!f.done;f=t.next())f=f.value,f.name==="Period"?n=f.id:f.name==="AdaptationSet"?(r=f.id,f.position!==null&&(u=f.position)):f.name==="Representation"&&(c=f.id);if(t=[],c)t.push(n+","+c);else if(r)for(u=m(e.s.values()),e=u.next();!e.done;e=u.next())e=e.value,e.na.id===n&&e.ia.id===r&&e.J.id&&t.push(n+","+e.J.id);else if(-1<u)for(r=m(e.s.values()),e=r.next();!e.done;e=r.next())e=e.value,e.na.id===n&&e.ia.position===u&&e.J.id&&t.push(n+","+e.J.id);return t}function TM(e,t){var n=e.s.get(t),r=e.o[t];r.segmentIndex&&r.segmentIndex.Ga(e.i.presentationTimeline.nb());try{var u=iM(n,function(c,f,h,v){return IM(e,c,f,h,v)},e.o,!0,e.g.dash.initialSegmentLimit,e.ka,n.J.aesKey,null,!0);r.createSegmentIndex=function(){return Ne(function(c){if(c.g==1)return r.segmentIndex?c.u(0):R(c,u.kc(),3);r.segmentIndex=c.h,X(c)})}}catch(c){if(t=n.J.contentType,t!=_r&&t!="application"&&t!="image"||c.code!=4002)throw c}}function hZ(e){var t=Hi(e,"ServiceDescription");if(!t||(e=Hi(t,"Latency"),t=Hi(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function pZ(e){if(e=sr(e,"SupplementalProperty"),!e.length)return null;e=m(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function SM(e,t,n,r,u){var c=t.Lb;c||(c=Er(r,"mediaPresentationDuration",ba),e.l.Lb=c);var f=0;e.i&&e.i.presentationTimeline&&e.ga&&(f=e.i.presentationTimeline.Jb());var h=[],v=f;r=sr(r,"Period");for(var A=0;A<r.length;A++){var N=r[A],B=r[A+1],z=Er(N,"start",ba,v),J=N.attributes.id,fe=Er(N,"duration",ba),pe=null;if(B){var Ee=Er(B,"start",ba);Ee!=null&&(pe=Ee-z)}else c!=null&&(pe=c-z+f);if(Ee=Ff,pe&&fe&&Math.abs(pe-fe)>Ee&&pe>fe&&e.N++,pe==null&&(pe=fe),!(e.O!==null&&J!==null&&z!==null&&z<e.O)||e.C.includes(J)||A+1==r.length){if(z!==null&&(e.O===null||z>e.O)&&(e.O=z),v=mZ(e,t,n,{start:z,duration:pe,node:N,qf:pe==null||!B}),h.push(v),t.na.id&&pe&&(e.ka[t.na.id]=pe),pe==null){v=null;break}v=z+pe}}if(u)for(t=m(h),n=t.next();!n.done;n=t.next())n=n.value.id,e.C.includes(n)||e.C.push(n);else e.C=h.map(function(Oe){return Oe.id});return c!=null?{periods:h,duration:c+f,pg:!1}:{periods:h,duration:v,pg:!0}}function gZ(e){var t=Object.keys(e.B).filter(function(c){return!e.C.includes(c)});t=m(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var r=m(e.B[n]),u=r.next();!u.done;u=r.next())u=u.value,e.m&&e.m.ng(e.o[u],n),delete e.o[u];delete e.B[n]}}function mZ(e,t,n,r){t.na=__(e,r.node,null,n),t.ha=r,t.na.Sa=t.Sa,t.na.id||(t.na.id="__shaka_period_"+r.start);var u=sr(r.node,"EventStream");n=t.presentationTimeline.nb(),u=m(u);for(var c=u.next();!c.done;c=u.next())AZ(e,r.start,r.duration,c.value,n);for(n=sr(r.node,"SupplementalProperty"),n=m(n),u=n.next();!u.done;u=n.next())u=u.value,u.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(u=Bp(e,u))&&(t.lb=u);if(n=sr(r.node,"AdaptationSet").map(function(A,N){return vZ(e,t,N,A)}).filter(Ws),t.wb){for(r=[],u=m(n),c=u.next();!c.done;c=u.next()){c=m(c.value.Ki);for(var f=c.next();!f.done;f=c.next())r.push(f.value)}if(r.length!=new Set(r).size)throw new Ye(2,4,4018)}for(r=n.filter(function(A){return!A.Xf}),n=n.filter(function(A){return A.Xf}),n=m(n),u=n.next();!u.done;u=n.next()){u=u.value,c=u.Xf.split(" "),f=m(r);for(var h=f.next();!h.done;h=f.next())if(h=h.value,c.includes(h.id)){h=m(h.streams);for(var v=h.next();!v.done;v=h.next())Wh(v.value,u.streams)}}if(n=ny(e.g.disableAudio,r,"audio"),u=ny(e.g.disableVideo,r,"video"),c=ny(e.g.disableText,r,_r),r=ny(e.g.disableThumbnails,r,"image"),u.length===0&&n.length===0)throw new Ye(2,4,4004);return{id:t.na.id,audioStreams:n,videoStreams:u,textStreams:c,imageStreams:r}}function ny(e,t,n){return e||!t.length?[]:t.reduce(function(r,u){return u.contentType!=n||r.push.apply(r,T(u.streams)),r},[])}function vZ(e,t,n,r){function u(Ut){var Nt=Ut.attributes["dvb:fontFamily"];Ut=Ut.attributes["dvb:url"],Nt&&Ut&&(Ut=Ki(t.ia.Ja(),[Ut],t.lb()),e.j.addFont(Nt,Ut[0]))}function c(Ut){switch(Ut){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function f(Ut){switch(Ut){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ia=__(e,r,t.na,null),t.ia.position=n;var h=!1;n=sr(r,"Role");var v=n.map(function(Ut){return Ut.attributes.value}).filter(Ws),A=void 0,N=t.ia.contentType==_r;N&&(A="subtitle"),n=m(n);for(var B=n.next();!B.done;B=n.next()){B=B.value;var z=B.attributes.schemeIdUri;if(z==null||z=="urn:mpeg:dash:role:2011")switch(B=B.attributes.value,B){case"main":h=!0;break;case"caption":case"subtitle":A=B}}var J=sr(r,"EssentialProperty");n=null;var fe=!1;B=null,z=!1,J=m(J);for(var pe=J.next();!pe.done;pe=J.next()){pe=pe.value;var Ee=pe.attributes.schemeIdUri;if(Ee=="http://dashif.org/guidelines/trickmode")n=pe.attributes.value;else if(Ee=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var Oe=f(parseInt(pe.attributes.value,10));else if(Ee=="urn:mpeg:mpegB:cicp:ColourPrimaries")var ke=c(parseInt(pe.attributes.value,10));else Ee!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(Ee=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?fe=!0:Ee=="urn:dvb:dash:fontdownload:2014"?u(pe):Ee=="urn:mpeg:dash:urlparam:2014"&&(B=Bp(e,pe))||(z=!0))}if(z)return null;var rt=null;for(z=sr(r,"SupplementalProperty"),z=m(z),J=z.next();!J.done;J=z.next())J=J.value,pe=J.attributes.schemeIdUri,pe=="http://dashif.org/guidelines/last-segment-number"?rt=parseInt(J.attributes.value,10)-1:pe=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?Oe=f(parseInt(J.attributes.value,10)):pe=="urn:mpeg:mpegB:cicp:ColourPrimaries"?ke=c(parseInt(J.attributes.value,10)):pe=="urn:dvb:dash:fontdownload:2014"?u(J):pe=="urn:mpeg:dash:urlparam:2014"&&(B=Bp(e,J));B&&(t.lb=B),B=sr(r,"Accessibility");var Fe=new Map,$e;for(B=m(B),z=B.next();!z.done;z=B.next())if(J=z.value,z=J.attributes.schemeIdUri,J=J.attributes.value,z!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(z!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)z=="urn:mpeg:dash:role:2011"?J!=null&&(v.push(J),J=="captions"&&(A="caption")):z=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(J=="1"?$e="visually impaired":J=="2"&&($e="hard of hearing"));else if(z=1,J!=null)for(J=m(J.split(";")),pe=J.next();!pe.done;pe=J.next()){Ee=pe.value;var nt=pe=void 0;Ee.includes("=")?(Ee=Ee.split("="),pe="svc"+Ee[0],nt=Ee[1].split(",")[0].split(":").pop()):(pe="svc"+z,z++,nt=Ee),Fe.set(pe,Or(nt))}else Fe.set("svc1","und");else if(z=1,J!=null)for(J=J.split(";"),pe=m(J),Ee=pe.next();!Ee.done;Ee=pe.next()){nt=Ee.value;var ct=Ee=void 0;nt.includes("=")?(nt=nt.split("="),Ee=nt[0].startsWith("CC")?nt[0]:"CC"+nt[0],ct=nt[1]||"und"):(Ee="CC"+z,J.length==2?z+=2:z++,ct=nt),Fe.set(Ee,Or(ct))}else Fe.set("CC1","und");B=sr(r,"ContentProtection");var gt=YN(B,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),Lt=Or(t.ia.language||"und"),It=t.ia.label;if(B=sr(r,"Representation"),r=B.map(function(Ut){return(Ut=yZ(e,t,gt,A,Lt,It,h,v,Fe,Ut,$e,rt))&&(Ut.hdr=Ut.hdr||Oe,Ut.colorGamut=Ut.colorGamut||ke,Ut.fastSwitching=fe),Ut}).filter(function(Ut){return!!Ut}),r.length==0){if(n=t.ia.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||N||n)return null;throw new Ye(2,4,4003)}if(!t.ia.contentType||t.ia.contentType=="application")for(t.ia.contentType=bM(r[0].mimeType,r[0].codecs),N=m(r),z=N.next();!z.done;z=N.next())z.value.type=t.ia.contentType;for(N=t.ia.id||"__fake__"+e.sa++,z=m(r),J=z.next();!J.done;J=z.next()){for(J=J.value,pe=m(gt.drmInfos),Ee=pe.next();!Ee.done;Ee=pe.next())Ee=Ee.value,Ee.keyIds=Ee.keyIds&&J.keyIds?new Set([].concat(T(Ee.keyIds),T(J.keyIds))):Ee.keyIds||J.keyIds;e.g.dash.enableAudioGroups&&(J.groupId=N)}return B=B.map(function(Ut){return Ut.attributes.id}).filter(Ws),{id:N,contentType:t.ia.contentType,language:Lt,fk:h,streams:r,drmInfos:gt.drmInfos,Xf:n,Ki:B}}function Bp(e,t){if((t=Vi(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&Er(t,"useMPDUrlQuery",Vs,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return n=="$querypart$"?e.aa:n.split("&").map(function(r){if(r=="$querypart$")return e.aa;var u=/\$query:(.*?)\$/g.exec(r);if(u&&u.length==2){u=u[1];var c=new $u(e.aa).get(u);if(c.length)return u+"="+c[0]}return r}).join("&")}}return null}function yZ(e,t,n,r,u,c,f,h,v,A,N,B){t.J=__(e,A,t.ia,null);var z=t.J.id;if(e.ba=Math.min(e.ba,t.J.Sa),e.fa=0<e.ba,!SZ(t.J))return null;var J=t.ha.start;t.bandwidth=Er(A,"bandwidth",Hs)||0,t.roles=h;var fe=sr(A,"SupplementalProperty"),pe=sr(A,"EssentialProperty"),Ee=null,Oe=pe.find(function(Wt){return Wt.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(Oe||(Oe=fe.find(function(Wt){return Wt.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(Ee=Bp(e,Oe)),Ee&&(t.lb=Ee),Oe=t.J.contentType,Ee=Oe==_r||Oe=="application",Oe=Oe=="image";try{var ke=void 0;if(n.Fe){var rt=t.J.Ja,Fe=t.lb,$e=Ki(rt(),[n.Fe.pi],Fe()),nt=Bi($e,e.g.retryParameters);ke={bitsKey:128,blockCipherMode:"CBC",iv:n.Fe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var Wt,En,An;return Ne(function(Vn){if(Vn.g==1)return R(Vn,T_(e,nt,6),2);if(Vn.g!=3){if(Wt=Vn.h,!Wt.data||Wt.data.byteLength!=16)throw new Ye(2,4,4049);return En={name:"AES-CBC"},An=ke,R(Vn,g.crypto.subtle.importKey("raw",Wt.data,En,!0,["decrypt"]),3)}An.cryptoKey=Vn.h,ke.fetchKey=void 0,X(Vn)})}}}if(t.J.aesKey=ke,rt=function(Wt,En,An,Vn){return IM(e,Wt,En,An,Vn)},t.J.Sc)var ct=B6(t,rt,ke);else if(t.J.Qb)ct=Z6(t,e.o,ke);else if(t.J.cc)ct=iM(t,rt,e.o,!!e.i,e.g.dash.initialSegmentLimit,e.ka,ke,B,!1);else{var gt=t.ha.duration||0,Lt=t.J.Ja,It=t.J.mimeType,Ut=t.J.codecs;ct={kc:function(){var Wt=f1(J,gt,Lt());return Wt.Gb(function(En){En.mimeType=It,En.codecs=Ut}),Promise.resolve(Wt)}}}}catch(Wt){if((Ee||Oe)&&Wt.code==4002)return null;throw Wt}A=sr(A,"ContentProtection"),A=w6(A,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),A=new Set(A?[A]:[]),B=!1,fe.some(function(Wt){return Wt.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&Wt.attributes.value=="JOC"})&&(B=!0),fe=!1,Ee&&(fe=h.includes("forced_subtitle")||h.includes("forced-subtitle"));var Nt;if(Oe&&((pe=pe.find(function(Wt){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(Wt.attributes.schemeIdUri)}))&&(Nt=pe.attributes.value),!Nt))return null;var tn;Ee=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(Ee.includes("hvc1.2.4.L153.B0")||Ee.includes("hev1.2.4.L153.B0"))&&(tn="PQ"),pe=t.J.id?t.na.id+","+t.J.id:"",e.F.length&&z&&e.s.set(t.na.id+","+z,EZ(t));var Ht=pe&&e.o[pe]?e.o[pe]:{id:e.sa++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Ht.segmentIndex&&(Ht.segmentIndex.release(),Ht.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:Ee,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:A,language:u,originalLanguage:t.ia.language,label:c,type:t.ia.contentType,primary:f,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:h,forced:fe,channelsCount:t.J.$d,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:B,closedCaptions:v,hdr:tn,colorGamut:void 0,videoLayout:void 0,tilesLayout:Nt,accessibilityPurpose:N,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Di(t.J.mimeType,t.J.codecs)])};return Ht.createSegmentIndex=function(){var Wt;return Ne(function(En){if(En.g==1)return Ht.segmentIndex?En.u(0):(Wt=Ht,R(En,ct.kc(),3));Wt.segmentIndex=En.h,X(En)})},pe&&t.wb&&!e.o[pe]&&(t=t.na.id||"",e.B[t]||(e.B[t]=[]),e.o[pe]=Ht,e.B[t].push(pe)),Ht}function EZ(e){function t(n){return n?(n=_s(n),n.Sc=null,n.Qb=null,n.cc=Mh(n.cc),n):null}return e=_s(e),e.na=t(e.na),e.ia=t(e.ia),e.J=t(e.J),e.ha&&(e.ha=_s(e.ha),e.ha.node=null),e}function wM(e){var t,n;return Ne(function(r){switch(r.g){case 1:return t=0,ce(r,2),R(r,y_(e),4);case 4:t=r.h,ye(r,3);break;case 2:if(n=be(r),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),r.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return r.return();e.j.onManifestUpdated(),E_(e,t),X(r)}})}function E_(e,t){if(!(0>e.K)){var n=e.K;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.L.Z(Math.max(n-t,G(e.oa)))}}function __(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,$d:null,audioSamplingRate:null,Sa:0,me:0},r=r||n.Ja;var u=t.attributes.id,c=sr(t,"BaseURL"),f,h=!1;if(e.h)for(var v=m(c),A=v.next();!A.done;A=v.next()){var N=A.value;A=N.attributes.serviceLocation,N=Io(N),A&&N&&(Sd(e.h,u,A,N),h=!0)}h&&e.h||(f=c.map(Io)),v=t.attributes.contentType||n.contentType,A=t.attributes.mimeType||n.mimeType,N=[t.attributes.codecs||n.codecs];var B=Po(t,"urn:scte:dash:scte214-extensions","supplementalCodecs");B&&N.push(B),N=v1(N).join(","),B=Er(t,"frameRate",Ch)||n.frameRate;var z=t.attributes.sar||n.pixelAspectRatio,J=_Z(sr(t,"InbandEventStream"),n.emsgSchemeIdUris),fe=sr(t,"AudioChannelConfiguration");fe=TZ(fe)||n.$d;var pe=Er(t,"audioSamplingRate",lo)||n.audioSamplingRate;v||(v=bM(A,N));var Ee=Hi(t,"SegmentBase"),Oe=Hi(t,"SegmentTemplate"),ke=Ee&&Er(Ee,"availabilityTimeOffset",_f)||0,rt=Oe&&Er(Oe,"availabilityTimeOffset",_f)||0,Fe=c&&c.length&&Er(c[0],"availabilityTimeOffset",_f)||0;ke=n.Sa+Fe+ke+rt,rt=null,(Fe=Hi(t,"SegmentSequenceProperties"))&&(Fe=Hi(Fe,"SAP"))&&(rt=Er(Fe,"cadence",_c)),Fe=t.attributes.label;var $e=sr(t,"Label");return $e&&$e.length&&($e=$e[0],ei($e)&&(Fe=ei($e))),{Ja:function(){return Ki(r(),c.length?e.h&&h?Pp(e.h,u):f||[]:[])},Sc:Ee||n.Sc,Qb:Hi(t,"SegmentList")||n.Qb,cc:Oe||n.cc,width:Er(t,"width",lo)||n.width,height:Er(t,"height",lo)||n.height,contentType:v,mimeType:A,codecs:N,frameRate:B,pixelAspectRatio:z,emsgSchemeIdUris:J,id:u,language:t.attributes.lang,$d:fe,audioSamplingRate:pe,Sa:ke,Pd:null,me:rt||n.me,label:Fe||null}}function _Z(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function TZ(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function SZ(e){var t=e.Sc?1:0;return t+=e.Qb?1:0,t+=e.cc?1:0,t==0?e.contentType==_r||e.contentType=="application":(t!=1&&(e.Sc&&(e.Qb=null),e.cc=null),!0)}function AM(e,t,n,r){var u,c,f,h,v,A,N;return Ne(function(B){if(B.g==1)return u=[yi(n)],c=Ki(t(),u),f=Bi(c,e.g.retryParameters),f.method=r,h=e.j.networkingEngine.request(4,f,{isPreload:e.ea()}),ol(e.T,h),R(B,h.promise,2);if(v=B.h,r=="HEAD"){if(!v.headers||!v.headers.date)return B.return(0);A=v.headers.date}else A=Cr(v.data);return N=Date.parse(A),isNaN(N)?B.return(0):B.return(N-Date.now())})}function wZ(e,t,n){var r,u,c,f,h,v,A,N;return Ne(function(B){switch(B.g){case 1:r=n.map(function(z){return{scheme:z.attributes.schemeIdUri,value:z.attributes.value}}),u=e.g.dash.clockSyncUri,!r.length&&u&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),c=m(r),f=c.next();case 2:if(f.done){B.u(4);break}switch(h=f.value,ce(B,5),v=h.scheme,A=h.value,v){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return B.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return B.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return N=Date.parse(A),B.return(isNaN(N)?0:N-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":He("NTP UTCTiming scheme is not supported");break;default:He("Unrecognized scheme in UTCTiming element",v)}B.u(9);break;case 7:return R(B,AM(e,t,A,"HEAD"),10);case 10:return B.return(B.h);case 8:return R(B,AM(e,t,A,"GET"),11);case 11:return B.return(B.h);case 9:ye(B,3);break;case 5:be(B);case 3:f=c.next(),B.u(2);break;case 4:return He("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),B.return(0)}})}function AZ(e,t,n,r,u){var c=r.attributes.schemeIdUri||"",f=r.attributes.value||"",h=Er(r,"timescale",lo)||1,v=Er(r,"presentationTimeOffset",lo)||0;r=m(sr(r,"Event"));for(var A=r.next();!A.done;A=r.next()){A=A.value;var N=Er(A,"presentationTime",lo)||0,B=Er(A,"duration",lo)||0;N=Math.max((N-v)/h+t,t),B=N+B/h,n!=null&&(N=Math.min(N,t+n),B=Math.min(B,t+n)),B<u||(A={schemeIdUri:c,value:f,startTime:N,endTime:B,id:A.attributes.id||"",eventElement:Nh(A),eventNode:Mh(A)},e.j.onTimelineRegionAdded(A))}}function IM(e,t,n,r,u){var c,f,h,v;return Ne(function(A){return A.g==1?(c=$a,f=u?0:1,h=rd(t,n,r,e.g.retryParameters),R(A,T_(e,h,c,{type:f}),2)):(v=A.h,A.return(v.data))})}function bM(e,t){return t=Di(e,t),Ic(t)?_r:e.split("/")[0]}function T_(e,t,n,r){return r||(r={}),r.isPreload=e.ea(),t=e.j.networkingEngine.request(n,t,r),ol(e.T,t),t.promise}function IZ(e){var t=e.l.rd;if(!e.l.Yd||!t||!e.F.length)return[];var n=Date.now()/1e3,r=e.F.filter(function(u){return u=lo(u.attributes.ttl),!u||t+u>n}).map(Io).filter(Ws);return r.length?Ki(e.A,r):[]}ne("shaka.dash.DashParser",ty),Yn["application/dash+xml"]=function(){return new ty},Yn["video/vnd.mpeg.dash.mpd"]=function(){return new ty};function ry(){}ne("shaka.dependencies",ry),ry.has=function(e){return S_.has(e)},ry.add=function(e,t){if(!RM[e])throw Error(e+" is not supported");e==CM?gr("mux.js","mux.js is no longer used in Shaka Player."):S_.set(e,function(){return t})};var CM="muxjs",RM={gk:CM,ISOBoxer:"ISOBoxer"};ry.Allowed=RM;var S_=new Map([["ISOBoxer",function(){return g.ISOBoxer}]]);function xM(e,t,n){this.type=e,this.W=t,this.segments=n||null}function NM(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}NM.prototype.toString=function(e){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function MM(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function jp(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function $n(e,t,n){return(e=jp(e,t))?e.value:n||null}function Ur(e,t){if(e=jp(e,t),!e)throw new Ye(2,4,4023,t);return e.value}function DM(e,t,n){n=n===void 0?[]:n,this.W=t,this.g=e,this.Ab=n}function PM(e,t){this.name=e,this.value=t}function ns(e,t){return e.filter(function(n){return n.name==t})}function OM(e,t){return e.filter(function(n){return Ur(n,"TYPE")==t})}function ho(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function Ad(e,t,n){return n=n===void 0?0:n,(e=ho(e,t))?Number(e.value):n}function zl(e,t,n){return t?LM(e,[t],n):[]}function LM(e,t,n){if(!t.length)return[];t=Ki(e,t),e=[],t=m(t);for(var r=t.next();!r.done;r=t.next())e.push(kM(r.value,n));return e}function kM(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=m(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var u=r.slice(2,r.length-1),c=t.get(u);if(c)e=e.replace(r,c);else throw new Ye(2,4,4039,u)}}return e}function bZ(){this.g=0}function w_(e,t){t=Cr(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new Ye(2,4,4015);t=0;for(var r=!0,u=m(n),c=u.next();!c.done;c=u.next())if(c=c.value,/^#(?!EXT)/m.test(c)||r)r=!1;else if(c=A_(e,c),--e.g,FM.includes(c.name)){t=1;break}else c.name=="EXT-X-STREAM-INF"&&(r=!0);for(u=[],r=!0,c=0;c<n.length;c++){var f=n[c],h=n[c+1];if(/^#(?!EXT)/m.test(f)||r)r=!1;else{if(f=A_(e,f),CZ.includes(f.name)){if(t!=1)throw new Ye(2,4,4017);f=n.splice(c,n.length-c),n=[],r=[],c=[],h=null,f=m(f);for(var v=f.next();!v.done;v=f.next())v=v.value,/^(#EXT)/.test(v)?(v=A_(e,v),FM.includes(v.name)?u.push(v):v.name=="EXT-X-MAP"?h=v:v.name=="EXT-X-PART"?c.push(v):v.name=="EXT-X-PRELOAD-HINT"?$n(v,"TYPE")=="PART"?c.push(v):$n(v,"TYPE")=="MAP"&&(v.name="EXT-X-MAP",h=v):r.push(v)):/^#(?!EXT)/m.test(v)||(v=v.trim(),h&&r.push(h),n.push(new DM(v,r,c)),r=[],c=[]);return c.length&&(h&&r.push(h),n.push(new DM("",r,c))),new xM(t,u,n)}u.push(f),f.name=="EXT-X-STREAM-INF"&&(f.attributes.push(new PM("URI",h)),r=!0)}}return new xM(t,u)}function A_(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new Ye(2,4,4016,t);t=n[1];var r=n[2];n=[];var u;if(r){r=new aa(r);var c;(c=wa(r,/^([^,=]+)(?:,|$)/g))&&(u=c[1]);for(var f=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;c=wa(r,f);)n.push(new PM(c[1],c[2]||c[3])),Es(r)}return new NM(e,t,n,u)}var FM="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),CZ="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");function UM(){}function BM(e){try{var t=I_(e);return Xs({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return $s(n)}}function I_(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new Ye(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new Ye(2,1,1004,e);var n=t[0];e=g.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var u;return r?u=Wo(e):u=bi(e),{data:u,contentType:n}}ne("shaka.net.DataUriPlugin",UM),UM.parse=BM,Qs("data",BM);function iy(){var e=this;this.g=this.h=null,this.C=1,this.A=new Map,this.H=new Map,this.O=new Map,this.O.set("video",new Map),this.O.set("audio",new Map),this.O.set(_r,new Map),this.O.set("image",new Map),this.vb=new Set,this.i=new Map,this.l=null,this.N="",this.Ta=new bZ,this.I=-1,this.ga=1/0,this.fa=this.$b=!1,this.B=new on(function(){if(e.ba&&!e.g.continueLoadingWhenPaused&&(e.aa.$a(e.ba,"timeupdate"),e.ba.paused)){e.aa.pa(e.ba,"timeupdate",function(){return uD(e)});return}uD(e)}),this.za=ly,this.m=null,this.bb=0,this.o=1/0,this.Fa=this.Ea=this.X=0,this.ea=new il,this.F=new Map,this.G=new Map,this.ta=new Map,this.ka=new Map,this.L=new Map,this.oa=new Map,this.sa=new Map,this.Hb=this.K=!1,this.Eb=new D(5),this.j=null,this.T=!0,this.Da=new Set,this.aa=new Et,this.s=this.ba=null,this.Fb=function(){return!1}}p=iy.prototype,p.configure=function(e,t){this.g=e,t&&(this.Fb=t),this.j&&this.j.configure(this.g)},p.start=function(e,t){var n=this,r;return Ne(function(u){return u.g==1?(n.h=t,n.K=t.isLowLatencyMode(),R(u,P_(n,[e]).promise,2)):u.g!=3?(r=u.h,n.N=r.uri,R(u,NZ(n,r.data,e),3)):u.return(n.m)})},p.stop=function(){this.B&&(this.B.stop(),this.B=null);var e=[];return this.ea&&(e.push(this.ea.destroy()),this.ea=null),this.g=this.h=null,this.vb.clear(),this.m=null,this.i.clear(),this.H.clear(),this.G.clear(),this.A.clear(),this.ta.clear(),this.ka.clear(),this.L.clear(),this.oa.clear(),this.sa.clear(),this.Da.clear(),this.j&&this.j.destroy(),this.aa&&(this.aa.release(),this.aa=null),Promise.all(e)},p.update=function(){var e=this,t,n,r,u,c,f,h,v,A,N,B,z;return Ne(function(J){if(J.g==1){if(!pa(e))return J.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,r=n.filter(function(fe){return fe.stream.segmentIndex}),u=m(r),c=u.next();!c.done;c=u.next())f=c.value,t.push(RZ(e,f));return R(J,Promise.all(t),2)}for(WM(e,r.map(function(fe){return fe.stream})),h=r.some(function(fe){return fe.dd==0}),r.length&&!h&&(v=XZ,sy(e,v.qh),A=r.map(function(fe){return fe.Kb}),e.l.Za(Math.min.apply(Math,T(A))),e.h.updateDuration()),h&&C_(e),N=m(r),B=N.next();!B.done;B=N.next())z=B.value,z.stream.segmentIndex&&!tu(z.stream.segmentIndex)&&e.h.disableStream(z.stream);X(J)})};function b_(e,t){return pa(e)?e.O.get(t.type):t.Vd}function RZ(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt,It,Ut,Nt,tn,Ht,Wt,En,An,Vn,Qn;return Ne(function(ar){switch(ar.g){case 1:for(n=[],r=m(t.M()),u=r.next();!u.done;u=r.next())c=u.value,f=new Ei(c),h=f.g,t.Cd&&(0<=t.pb&&h.add("_HLS_msn",String(t.pb)),0<=t.qb&&h.add("_HLS_part",String(t.qb))),t.Dd&&h.add("_HLS_skip","YES"),kf(h)&&$r(f,h),n.push(f.toString());return ce(ar,2),R(ar,P_(e,n,!0).promise,4);case 4:v=ar.h,ye(ar,3);break;case 2:throw A=be(ar),e.h&&e.h.disableStream(t.stream),A;case 3:if(!t.stream.segmentIndex)return ar.return();if(N=w_(e.Ta,v.data),N.type!=1)throw new Ye(2,4,4017);return B=v.uri,B==v.originalUri||t.M().includes(B)||t.Qg.push(B),z=ns(N.W,"EXT-X-DEFINE"),J=R_(e,z,B),fe=t.stream,pe=b_(e,t),R(ar,JM(e,N,fe.mimeType,t.M,J),5);case 5:for(Ee=ar.h,Oe=Ee.keyIds,ke=Ee.drmInfos,rt=function(Ar,Qr){return Ar.size===Qr.size&&[].concat(T(Ar)).every(function(zr){return Qr.has(zr)})},rt(fe.keyIds,Oe)||(fe.keyIds=Oe,fe.drmInfos=ke,e.h.newDrmInfo(fe)),Fe=oD(e,N,pe,J,t.M,t.type),$e=Fe.segments,(nt=Fe.bandwidth)&&(fe.bandwidth=nt),ct=sv(fe),gt=m($e),Lt=gt.next();!Lt.done;Lt=gt.next())It=Lt.value,It.$&&(It.$.Kc=ct);fe.segmentIndex.od($e,e.l.nb()),$e.length&&(Ut=Ad(N.W,"EXT-X-MEDIA-SEQUENCE",0),tn=(Nt=ho(N.W,"EXT-X-SKIP"))?Number($n(Nt,"SKIPPED-SEGMENTS")):0,Ht=XM(Ut,$e),Wt=Ht.pb,En=Ht.qb,t.pb=Wt+tn,t.qb=En,An=pe.get(Ut),fe.segmentIndex.Ga(An)),(Vn=tu(fe.segmentIndex))&&(t.rc=Vn.startTime,Qn=$e[$e.length-1],t.Kb=Qn.endTime),ho(N.W,"EXT-X-ENDLIST")&&(t.dd=!0),N_(e,N),M_(e,N.W,fe.type,J,t.M),X(ar)}})}p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(){},p.banLocation=function(e){this.j&&this.j.banLocation(e)},p.setMediaElement=function(e){this.ba=e};function jM(e,t){for(var n=e.I==-1,r=m(t),u=r.next();!u.done;u=r.next()){u=u.value;var c=u.stream.segmentIndex,f=b_(e,u);if(c=tu(c)){f=m(f);for(var h=f.next();!h.done;h=f.next()){h=m(h.value);var v=h.next().value;if(h.next().value==c.startTime){n&&(e.I=Math.max(e.I,v)),u.Qe=v;break}}}}if(!(0>e.I))for(t=m(t),n=t.next();!n.done;n=t.next())n=n.value,Zp(e,n.type)&&(r=n.stream.segmentIndex)&&(u=e.I-n.Qe,0<u&&(r.g.splice(0,u),r=tu(r))&&(r=-r.startTime,n.stream.segmentIndex.offset(r),ZM(e,n,r)))}function xZ(e,t){if(e.ga==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next())n=tu(n.value.stream.segmentIndex),n!=null&&n.h!=null&&(e.ga=Math.min(e.ga,n.h))}if(t=e.ga,t!=1/0){n=m(e.i.values());for(var r=n.next();!r.done;r=n.next())if(r=r.value,!Zp(e,r.type)){var u=r.stream.segmentIndex;if(u!=null){var c=tu(u);if(c)if(c.h==null)de("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.M(),"Expect AV sync issues!");else for(ZM(e,r,c.h-t-c.startTime),r=m(u),u=r.next();!u.done;u=r.next())u.value.Uf(t)}}}}function ZM(e,t,n){t.rc+=n,t.Kb+=n,e=b_(e,t);for(var r=m(e),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.set(u,c+n)}t.M()}function NZ(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt,It,Ut,Nt,tn,Ht,Wt,En,An,Vn,Qn;return Ne(function(ar){switch(ar.g){case 1:return r=Mi,u=w_(e.Ta,t),c=ns(u.W,"EXT-X-DEFINE"),f=[],h=[],v=[],e.l=new rr(null,0),e.l.vc(!0),A=function(){return[n]},N=null,B=new Map,u.type==1?(e.T=!1,Fe=ns(u.W,"EXT-X-DEFINE"),B=R_(e,Fe,e.N),N=r.ja,$e="",nt=new Map,R(ar,$M(e,e.C++,B,u,A,"",N,$e,!0,"Media Playlist",null,nt,null,!1,null,!1),7)):(DZ(e,c),z=ns(u.W,"EXT-X-MEDIA"),J=ns(u.W,"EXT-X-STREAM-INF"),fe=ns(u.W,"EXT-X-IMAGE-STREAM-INF"),pe=ns(u.W,"EXT-X-I-FRAME-STREAM-INF"),Ee=ns(u.W,"EXT-X-SESSION-KEY"),Oe=ns(u.W,"EXT-X-SESSION-DATA"),ke=ns(u.W,"EXT-X-CONTENT-STEERING"),OZ(e,Oe),R(ar,LZ(e,ke),4));case 4:return PZ(e,J),GZ(e,z),rt=BZ(e,pe),R(ar,jZ(e,J,Ee,z,A,e.A,rt),5);case 5:return f=ar.h,h=kZ(e,z),R(ar,FZ(e,fe,pe),6);case 6:v=ar.h,ar.u(3);break;case 7:ct=ar.h,e.i.set(n,ct),ct.stream&&(gt=sv(ct.stream),ct.stream.segmentIndex.Gb(function(Ar){Ar.$&&(Ar.$.Kc=gt)})),N=ct.stream.type,f.push({id:0,language:Or($e||"und"),disabledUntilTime:0,primary:!0,audio:N=="audio"?ct.stream:null,video:N=="video"?ct.stream:null,bandwidth:ct.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new Ye(2,7,7001);if(tD(e,u),u.type==1&&(pa(e)&&(nD(e,u),Lt=e.o,e.B.Z(Lt)),It=Array.from(e.i.values()),x_(e,It),C_(e),M_(e,u.W,N,B,A)),e.m={presentationTimeline:e.l,variants:f,textStreams:h,imageStreams:v,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.s},e.fa||!e.g.hls.disableCodecGuessing){ar.u(8);break}for(Ut=[],Nt=m(e.m.variants),tn=Nt.next();!tn.done;tn=Nt.next())Ht=tn.value,Ht.audio&&Ht.audio.codecs===""&&Ut.push(Ht.audio.createSegmentIndex()),Ht.video&&Ht.video.codecs===""&&Ut.push(Ht.video.createSegmentIndex());return R(ar,Promise.all(Ut),8);case 8:if(e.h.makeTextStreamsForClosedCaptions(e.m),f.length==1){for(Wt=[],En=f[0],An=m([En.video,En.audio]),Vn=An.next();!Vn.done;Vn=An.next())(Qn=Vn.value)&&!Qn.segmentIndex&&Wt.push(Qn.createSegmentIndex());if(0<Wt.length)return R(ar,Promise.all(Wt),0)}ar.u(0)}})}function MZ(e,t){var n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt;return Ne(function(Lt){switch(Lt.g){case 1:if(n=uv(e.g.hls.mediaPlaylistFullMimeType),!t.length)return Lt.return(n);if(r=aD(e,t),u=r.segment,c=r.segmentIndex,f=u.M(),h=f[0],v=new Ei(h),A=v.Pa.split(".").pop(),N=O_[A])return Lt.return(uv(N));if(B=$a,J=z=null,fe=u.$,!fe){Lt.u(2);break}return pe=rd(fe.M(),fe.Yb(),fe.Wb(),e.g.retryParameters),R(Lt,gl(e,pe,B,{type:0}).promise,3);case 3:if(Ee=Lt.h,z=Ee.data,!fe.aesKey){Lt.u(4);break}return R(Lt,y1(z,fe.aesKey,0),5);case 5:z=Lt.h;case 4:(J=Ee.headers["content-type"])&&(J=J.split(";")[0].toLowerCase());case 2:return Oe=rd(u.M(),u.Yb(),u.Wb(),e.g.retryParameters),R(Lt,gl(e,Oe,B,{type:1}).promise,6);case 6:if(ke=Lt.h,rt=ke.data,!u.aesKey){Lt.u(7);break}return R(Lt,y1(rt,u.aesKey,c),8);case 8:rt=Lt.h;case 7:if((Fe=ke.headers["content-type"])&&(Fe=Fe.split(";")[0].toLowerCase()),$e="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),nt=["audio/mp4","video/mp4","video/iso.segment"],sp(nr(rt))){var It=rt,Ut=nr(It);Ut=new kr().parse(Ut);var Nt=Ut.$c();Ut=Ut.kf();var tn=[],Ht=!1,Wt=!1;switch(Nt.audio){case"aac":case"aac-loas":tn.push("mp4a.40.2"),Ht=!0;break;case"mp3":tn.push("mp4a.40.34"),Ht=!0;break;case"ac3":tn.push("ac-3"),Ht=!0;break;case"ec3":tn.push("ec-3"),Ht=!0;break;case"opus":tn.push("opus"),Ht=!0}switch(Nt.video){case"avc":Ut.codec?tn.push(Ut.codec):tn.push("avc1.42E01E"),Wt=!0;break;case"hvc":Ut.codec?tn.push(Ut.codec):tn.push("hvc1.1.6.L93.90"),Wt=!0;break;case"av1":tn.push("av01.0.01M.08"),Wt=!0}if(tn.length){if(Nt=Ht&&!Wt,Ht=new Map,Wt){Wt=new wt("video/mp2t"),Wt.i(It),It=m(Wt.j());for(var En=It.next();!En.done;En=It.next())En=En.value,Ht.set(En,En);Wt.g()}Ut={type:Nt?"audio":"video",mimeType:"video/mp2t",codecs:tn.join(", "),language:null,height:Ut.height,width:Ut.width,channelCount:null,sampleRate:null,closedCaptions:Ht,vd:null,colorGamut:null,frameRate:Ut.frameRate}}else Ut=null;if(ct=Ut)return Lt.return(ct)}else if(($e.includes(A)||nt.includes(Fe)||J&&nt.includes(J))&&(gt=Tj(z,rt)))return Lt.return(gt);return Fe?Lt.return(uv(Fe)):J?Lt.return(uv(J)):Lt.return(n)}})}function C_(e){if(pa(e)){if(e.za==cy){for(var t=1/0,n=1/0,r=m(e.i.values()),u=r.next();!u.done;u=r.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&(t=Math.min(t,u.Kb),n=Math.min(n,u.rc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.ne(t)}}else e.l.Za(YM(e));if(!e.l.s)for(t=m(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=tu(n.stream.segmentIndex))&&n.h&&e.l.Zg(n.h);e.l.Ud()}function DZ(e,t){var n=new Ei(e.N).g;t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=$n(u,"NAME");var c=$n(u,"VALUE");u=$n(u,"QUERYPARAM"),r&&c&&(e.A.has(r)||e.A.set(r,c)),u&&(r=n.get(u)[0])&&!e.A.has(r)&&e.A.set(u,r)}}function R_(e,t,n){n=new Ei(n).g;var r=new Map;t=m(t);for(var u=t.next();!u.done;u=t.next()){var c=u.value,f=$n(c,"NAME"),h=$n(c,"VALUE");u=$n(c,"QUERYPARAM"),c=$n(c,"IMPORT"),f&&h&&(r.has(f)||r.set(f,h)),u&&(f=n.get(u)[0])&&!r.has(f)&&r.set(u,f),c&&(u=e.A.get(c))&&r.set(c,u)}return r}function PZ(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=$n(r,"AUDIO");n=$n(r,"VIDEO");var c=$n(r,"SUBTITLES");if(r=qM(e,r),c){var f=bo(_r,r);e.G.set(c,f),Kn(r,f)}u&&(c=bo("audio",r),c||(c=e.g.hls.defaultAudioCodec),e.G.set(u,c)),n&&(u=bo("video",r),u||(u=e.g.hls.defaultVideoCodec),e.G.set(n,u))}}function OZ(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=$n(r,"DATA-ID");n=$n(r,"URI");var c=$n(r,"LANGUAGE");r=$n(r,"VALUE"),u=new Map().set("id",u),n&&u.set("uri",zl([e.N],n,e.A)[0]),c&&u.set("language",c),r&&u.set("value",r),n=new jn("sessiondata",u),e.h&&e.h.onEvent(n)}}function LZ(e,t){var n,r,u,c,f,h;return Ne(function(v){if(!e.h||!e.g)return v.return();for(r=m(t),u=r.next();!u.done;u=r.next())if(c=u.value,f=$n(c,"PATHWAY-ID"),h=$n(c,"SERVER-URI"),f&&h){e.j=new Td(e.h),e.j.configure(e.g),e.j.i=[e.N],e.j.setManifestType("HLS"),e.j.h=f,n=Dp(e.j,h);break}return R(v,n,0)})}function kZ(e,t){var n=OM(t,"SUBTITLES");t=n.map(function(f){if(e.g.disableText)return null;try{return KM(e,[f],new Map).stream}catch(h){if(e.g.hls.ignoreTextStreamFailures)return null;throw h}}),n=m(n);for(var r=n.next();!r.done;r=n.next()){var u=Ur(r.value,"GROUP-ID");if((r=e.G.get(u))&&(u=e.H.get(u))){u=m(u);for(var c=u.next();!c.done;c=u.next())c=c.value,c.stream.codecs=r,c.stream.mimeType=D_(_r,r)||ay(_r),Id(c.stream)}}return t.filter(function(f){return f})}function Id(e){var t=new Set([Di(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Gb(function(n){n.mimeType&&t.add(Di(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function FZ(e,t,n){var r,u;return Ne(function(c){return c.g==1?(r=t.map(function(f){var h,v;return Ne(function(A){if(A.g==1)return e.g.disableThumbnails?A.return(null):(ce(A,2),R(A,HZ(e,f),4));if(A.g!=2)return h=A.h,A.return(h.stream);if(v=be(A),e.g.hls.ignoreImageStreamFailures)return A.return(null);throw v})}).concat(n.map(function(f){if(e.g.disableThumbnails)return null;try{var h=zM(e,f);return h.stream.type!=="image"?null:h.stream}catch(v){if(e.g.hls.ignoreImageStreamFailures)return null;throw v}})),R(c,Promise.all(r),2)):(u=c.h,c.return(u.filter(function(f){return f})))})}function UZ(e,t,n){t=t.filter(function(h){var v=$n(h,"URI")||"";return $n(h,"TYPE")!="SUBTITLES"&&v!=""});var r={};t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=MM(u,!e.j);r[c]?r[c].push(u):r[c]=[u]}for(var f in r)KM(e,r[f],n)}function BZ(e,t){return t.map(function(n){return n=zM(e,n),n.stream.type!=="video"?null:n.stream}).filter(function(n){return n})}function jZ(e,t,n,r,u,c,f){var h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt,It,Ut,Nt,tn,Ht,Wt,En,An,Vn,Qn,ar,Ar,Qr,zr,Si,Pr;return Ne(function(Fr){switch(Fr.g){case 1:if(h=[],v=new Set,!(0<n.length)){Fr.u(2);break}A=m(n),N=A.next();case 3:if(N.done){Fr.u(2);break}if(B=N.value,z=Ur(B,"METHOD"),J=$n(B,"KEYFORMAT")||"identity",fe=null,z=="NONE"){Fr.u(4);break}if(uy(z)){pe=zl(u(),Ur(B,"URI"),c),Ee=pe.sort().join(""),e.L.has(Ee)||(Oe=Bi(pe,e.g.retryParameters),ke=gl(e,Oe,6).promise,e.L.set(Ee,ke)),Fr.u(4);break}if(J!="identity"){fe=(rt=fD[J])?rt(B,""):null,Fr.u(6);break}return R(Fr,lD(e,B,"",u,null,c),9);case 9:fe=Fr.h;case 6:if(fe){if(fe.keyIds)for(Fe=m(fe.keyIds),$e=Fe.next();!$e.done;$e=Fe.next())nt=$e.value,v.add(nt);h.push(fe)}case 4:N=A.next(),Fr.u(3);break;case 2:for(ct={},gt=m(t),Lt=gt.next();!Lt.done;Lt=gt.next())It=Lt.value,Ut=MM(It,!e.j),ct[Ut]?ct[Ut].push(It):ct[Ut]=[It];Nt=[];for(tn in ct)Ht=ct[tn],Wt=Ht[0],En=$n(Wt,"FRAME-RATE"),An=Number($n(Wt,"AVERAGE-BANDWIDTH"))||Number(Ur(Wt,"BANDWIDTH")),Vn=$n(Wt,"RESOLUTION"),Qn=m(Vn?Vn.split("x"):[null,null]),ar=Qn.next().value,Ar=Qn.next().value,Qr=$n(Wt,"VIDEO-RANGE"),(zr=$n(Wt,"REQ-VIDEO-LAYOUT"))&&zr.includes(",")&&(Si=zr.split(",").filter(function(si){return si=="CH-STEREO"||si=="CH-MONO"}),zr=Si[0]),zr=zr||"CH-MONO",Pr=ZZ(e,Ht,r),Nt.push.apply(Nt,T(qZ(e,Pr.audio,Pr.video,An,ar,Ar,En,Qr,zr,h,v,f)));return Fr.return(Nt.filter(function(si){return si!=null}))}})}function ZZ(e,t,n){for(var r={audio:[],video:[]},u=new Map,c=[],f=!1,h=!1,v=m(t),A=v.next();!A.done;A=v.next()){var N=A.value;A=$n(N,"AUDIO");var B=$n(N,"VIDEO"),z=A||B;z&&(c.includes(z)||c.push(z),(N=$n(N,"PATHWAY-ID"))&&u.set(z,N),A?f=!0:B&&(h=!0))}c.length&&n.length&&(v=n.filter(function(pe){return c.includes(Ur(pe,"GROUP-ID"))}),UZ(e,v,u)),v=(u=c.sort().join(","))&&e.H.has(u)?e.H.get(u):[],f?r.audio.push.apply(r.audio,T(v)):h&&r.video.push.apply(r.video,T(v)),A=!1;var J=t.map(function(pe){return Ur(pe,"URI")});if(h=r.audio.find(function(pe){return pe&&pe.M().find(function(Ee){return J.includes(Ee)})}),f=qM(e,t[0]),B=bo("video",f),(z=bo("audio",f))&&!B?(h="audio",A=0<r.audio.length):!r.audio.length&&!r.video.length&&z&&B?(h="video",f=[[B,z].join()]):r.audio.length&&h?(h="audio",A=!0):h=r.video.length&&!r.audio.length?"audio":"video",!A){var fe=N=z=B=A=null;!v.length&&(n=n.find(function(pe){var Ee=$n(pe,"URI")||"",Oe=$n(pe,"TYPE");return pe=Ur(pe,"GROUP-ID"),Oe!="SUBTITLES"&&Ee==""&&c.includes(pe)}))&&(A=$n(n,"LANGUAGE"),B=$n(n,"NAME"),z=GM(n),VM(n),N=$n(n,"CHARACTERISTICS"),fe=HM(n)),e=VZ(e,t,f,h,A,B,z,N,fe),u&&(e.stream.groupId=u),r[e.stream.type]=[e]}return r}function qM(e,t){var n=$n(t,"CODECS")||"";return t=$n(t,"SUPPLEMENTAL-CODECS"),e.fa=0<n.length,e.fa||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(r){return r.split("/")[0]}),e.push.apply(e,T(t))),v1(e)}function GM(e){return(e=$n(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function HM(e){return(e=$n(e,"SAMPLE-RATE"))?parseInt(e,10):null}function VM(e){return(e=$n(e,"CHANNELS"))?e.includes("/JOC"):!1}function qZ(e,t,n,r,u,c,f,h,v,A,N,B){for(var z=m(n),J=z.next();!J.done;J=z.next())sD(J.value.stream,u,c,f,h,v,null);for(u=e.g.disableAudio,(!t.length||u)&&(t=[null]),u=e.g.disableVideo,(!n.length||u)&&(n=[null]),u=[],t=m(t),c=t.next();!c.done;c=t.next())for(c=c.value,f=m(n),h=f.next();!h.done;h=f.next()){var fe=h.value;(h=c?c.stream:null)&&(h.drmInfos=A,h.keyIds=N),(v=fe?fe.stream:null)&&(v.drmInfos=A,v.keyIds=N,Wh(v,B)),v&&!h&&(v.bandwidth=r),!v&&h&&(h.bandwidth=r),z=c?c.stream.drmInfos:null,J=fe?fe.stream.drmInfos:null,fe=fe?fe.M().sort().join(","):"";var pe=c?c.M().sort().join(","):"";fe=fe+" - "+pe,h&&v&&!fr(z,J)||e.vb.has(fe)||(h={id:e.C++,language:h?h.language:"und",disabledUntilTime:0,primary:!!h&&h.primary||!!v&&v.primary,audio:h,video:v,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(h),e.vb.add(fe))}return u}function GZ(e,t){t=OM(t,"CLOSED-CAPTIONS"),e.T=t.length==0,t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=$n(r,"LANGUAGE");n=Or(u||"und"),u||(u=$n(r,"NAME"))&&(n=u),u=Ur(r,"GROUP-ID"),r=Ur(r,"INSTREAM-ID").replace("SERVICE","svc"),e.F.get(u)||e.F.set(u,new Map),e.F.get(u).set(r,n)}}function KM(e,t,n){for(var r=[],u=[],c=new Map,f=m(t),h=f.next();!h.done;h=f.next()){var v=h.value;h=Ur(v,"URI"),v=Ur(v,"GROUP-ID"),r.push(h),u.push(v),c.set(v,h)}if(f=u.sort().join(","),h=t[0],t="",v=Ur(h,"TYPE").toLowerCase(),v=="subtitles"&&(v=_r),v==_r)t=$n(h,"CODECS")||"";else{u=m(u);for(var A=u.next();!A.done;A=u.next())if(A=A.value,e.G.has(A)){t=e.G.get(A);break}}if(u=r.sort().join(","),e.i.has(u))return e.i.get(u);if(A=e.C++,e.j){c=m(c);for(var N=c.next();!N.done;N=c.next()){var B=m(N.value);N=B.next().value,B=B.next().value,(N=n.get(N))&&Sd(e.j,A,N,B)}}n=$n(h,"LANGUAGE"),c=$n(h,"NAME"),N=$n(h,"DEFAULT")=="YES",B=v=="audio"?GM(h):null;var z=v=="audio"?VM(h):!1,J=$n(h,"CHARACTERISTICS"),fe=$n(h,"FORCED")=="YES";return h=v=="audio"?HM(h):null,r=oy(e,A,r,t,v,n,N,c,B,null,J,fe,h,z),r.stream&&(r.stream.groupId=f),e.H.has(f)?e.H.get(f).push(r):e.H.set(f,[r]),e.i.set(u,r),r}function HZ(e,t){var n,r,u,c,f,h,v,A,N,B;return Ne(function(z){return z.g==1?(n=Ur(t,"URI"),r=$n(t,"CODECS","jpeg")||"",e.i.has(n)?z.return(e.i.get(n)):(u=$n(t,"LANGUAGE"),c=$n(t,"NAME"),f=$n(t,"CHARACTERISTICS"),h=oy(e,e.C++,[n],r,"image",u,!1,c,null,null,f,!1,null,!1),(v=$n(t,"RESOLUTION"))?R(z,h.stream.createSegmentIndex(),3):z.u(2))):(z.g!=2&&(A=tu(h.stream.segmentIndex),N=A.tilesLayout)&&(h.stream.width=Number(v.split("x")[0])*Number(N.split("x")[0]),h.stream.height=Number(v.split("x")[1])*Number(N.split("x")[1])),(B=$n(t,"BANDWIDTH"))&&(h.stream.bandwidth=Number(B)),e.i.set(n,h),z.return(h))})}function zM(e,t){var n="video",r=Ur(t,"URI"),u=$n(t,"CODECS")||"";if(u=="mjpg"&&(n="image"),e.i.has(r))return e.i.get(r);var c=$n(t,"LANGUAGE"),f=$n(t,"NAME"),h=$n(t,"CHARACTERISTICS");return n=oy(e,e.C++,[r],u,n,c,!1,f,null,null,h,!1,null,!1),u=$n(t,"RESOLUTION"),c=m(u?u.split("x"):[null,null]),u=c.next().value,c=c.next().value,n.stream.width=Number(u)||void 0,n.stream.height=Number(c)||void 0,(t=$n(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(r,n),n}function VZ(e,t,n,r,u,c,f,h,v){for(var A=e.C++,N=[],B=m(t),z=B.next();!z.done;z=B.next()){var J=z.value;z=Ur(J,"URI"),J=$n(J,"PATHWAY-ID"),e.j&&J&&Sd(e.j,A,J,z),N.push(z)}if(B=N.sort().join(","),e.i.has(B))return e.i.get(B);e:{if(t=$n(t[0],"CLOSED-CAPTIONS"),r=="video"){if(e.g.disableText){e.T=!1,t=null;break e}if(t){if(t!="NONE"){t=e.F.get(t);break e}e.T=!1}else if(!t&&e.F.size)for(t=m(e.F.keys()).next();!t.done;){t=e.F.get(t.value);break e}}t=null}return n=Ll(r,n),r=oy(e,A,N,n,r,u,!1,c,f,t,h,!1,v,!1),e.i.set(B,r),r}function oy(e,t,n,r,u,c,f,h,v,A,N,B,z,J){function fe($e){var nt,ct,gt,Lt,It,Ut,Nt,tn,Ht,Wt,En,An,Vn,Qn,ar,Ar,Qr,zr,Si,Pr,Fr,si,Ms;return Ne(function(Wi){switch(Wi.g){case 1:return nt=Mi,ce(Wi,2),ct=ke.M(),R(Wi,$e.promise,4);case 4:if(gt=Wi.h,$e.aborted)return Wi.return();if(Lt=gt.uri,Lt==gt.originalUri||ct.includes(Lt)||Oe.push(Lt),It=w_(e.Ta,gt.data),It.type!=1)throw new Ye(2,4,4017);return Ut=ns(It.W,"EXT-X-DEFINE"),Nt=R_(e,Ut,Lt),tn=!1,(!e.fa&&e.g.hls.disableCodecGuessing||e.T&&u==nt.ja&&!e.g.hls.disableClosedCaptionsDetection)&&0<It.segments.length&&(e.T=!1,tn=!0),Ht=!e.fa&&e.g.hls.disableCodecGuessing,Wt=pa(e),R(Wi,$M(e,0,Nt,It,pe,r,u,c,f,h,v,A,N,B,z,J,void 0,tn,Ht),5);case 5:if(En=Wi.h,$e.aborted)return Wi.return();if(An=En.stream,tD(e,It),pa(e)&&!Wt&&nD(e,It),ke.rc=En.rc,ke.Kb=En.Kb,ke.Dd=En.Dd,ke.Cd=En.Cd,ke.dd=En.dd,ke.Vd=En.Vd,ke.pb=En.pb,ke.qb=En.qb,ke.wf=!0,Ee.segmentIndex=An.segmentIndex,Ee.encrypted=An.encrypted,Ee.drmInfos=An.drmInfos,Ee.keyIds=An.keyIds,Ee.mimeType=An.mimeType,Ee.bandwidth=Ee.bandwidth||An.bandwidth,Ee.codecs=Ee.codecs||An.codecs,Ee.closedCaptions=Ee.closedCaptions||An.closedCaptions,Ee.width=Ee.width||An.width,Ee.height=Ee.height||An.height,Ee.hdr=Ee.hdr||An.hdr,Ee.colorGamut=Ee.colorGamut||An.colorGamut,Ee.frameRate=Ee.frameRate||An.frameRate,Ee.language=="und"&&An.language!="und"&&(Ee.language=An.language),Ee.language=Ee.language||An.language,Ee.channelsCount=Ee.channelsCount||An.channelsCount,Ee.audioSamplingRate=Ee.audioSamplingRate||An.audioSamplingRate,Id(Ee),Ee.drmInfos.length&&e.h.newDrmInfo(Ee),Vn=!1,(!A&&Ee.closedCaptions||A&&Ee.closedCaptions&&A.size!=Ee.closedCaptions.size)&&(Vn=!0),e.m&&Vn&&e.h.makeTextStreamsForClosedCaptions(e.m),u==nt.ja||u==nt.Y)for(Qn=m(e.i.values()),ar=Qn.next();!ar.done;ar=Qn.next())Ar=ar.value,Ar.wf||Ar.type!=u||(Ar.stream.mimeType=An.mimeType,Id(Ar.stream));u==nt.wa&&(Qr=tu(An.segmentIndex))&&Qr.$&&(Ee.mimeType="application/mp4",Id(Ee)),zr=sv(Ee),Ee.segmentIndex.Gb(function(Ua){Ua.$&&(Ua.$.Kc=zr)}),KZ(e)&&(e.$b?x_(e,[ke]):(e.$b=!0,Si=Array.from(e.i.values()),Pr=Si.filter(function(Ua){return Ua.stream.segmentIndex}),x_(e,Pr),C_(e),Fr=e.o,0<Fr&&e.B.Z(Fr))),M_(e,It.W,Ee.type,Nt,pe),e.m&&(e.m.startTime=e.s),ye(Wi,0);break;case 2:if(si=be(Wi),Ee.closeSegmentIndex(),si.code===7001)return Wi.return();if(Ms=e.h.disableStream(Ee),!Ms)throw si;X(Wi)}})}function pe(){return e.j&&1<n.length?Pp(e.j,t):Oe.concat(LM([e.N],n,e.A))}var Ee=QM(e,r,u,c,f,h,v,A,N,B,z,J),Oe=[],ke={stream:Ee,type:u,Qg:Oe,M:pe,rc:0,Kb:0,Vd:new Map,Dd:!1,Cd:!1,dd:!1,Qe:-1,pb:-1,qb:-1,wf:!1},rt=null,Fe;return Ee.createSegmentIndex=function(){return rt||(Fe=P_(e,ke.M(),!0),rt=new Promise(function($e){$e(fe(Fe))}))},Ee.closeSegmentIndex=function(){rt&&!Ee.segmentIndex&&Fe.abort(),Ee.segmentIndex&&(Ee.segmentIndex.release(),Ee.segmentIndex=null),rt=null},ke}function YM(e){var t=1/0;e=m(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.Kb));return t}function WM(e,t){var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.Gb(function(u){n.push(u)});e.l.qd(n)}function x_(e,t){if(!pa(e))for(var n=YM(e),r=m(t),u=r.next();!u.done;u=r.next())u.value.stream.segmentIndex.Ec(0,n);WM(e,t.map(function(c){return c.stream})),e.g.hls.ignoreManifestProgramDateTime?jM(e,t):(xZ(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&jM(e,t))}function Zp(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function KZ(e){if(!e.m)return!1;var t=[],n=[];e=m(e.m.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(u){return u.segmentIndex})||0<n.length&&!n.some(function(u){return u.segmentIndex}))}function $M(e,t,n,r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke){Oe=Oe===void 0?!0:Oe,ke=ke===void 0?!0:ke;var rt,Fe,$e,nt,ct,gt,Lt,It,Ut,Nt,tn,Ht,Wt,En,An,Vn,Qn,ar,Ar,Qr,zr,Si,Pr,Fr,si,Ms,Wi,Ua,us;return Ne(function($i){switch($i.g){case 1:if(rt=r.segments||[],Fe=rt.every(function(Ds){return!!ho(Ds.W,"EXT-X-GAP")}),!rt.length||Fe)throw new Ye(2,4,4053);if(zZ(e,r),pa(e)&&N_(e,r),$e=pa(e)?e.O.get(f):new Map,nt=oD(e,r,$e,n,u,f),ct=nt.segments,gt=nt.bandwidth,tn=Nt=Ut=It=Lt=null,!(0<ct.length&&Oe)){$i.u(2);break}return R($i,MZ(e,ct),3);case 3:Ht=$i.h,f=Ht.type,h=Ht.language,N=Ht.channelCount,fe=Ht.sampleRate,e.g.disableText||(B=Ht.closedCaptions),It=Ht.height,Lt=Ht.width,Ut=Ht.vd,Nt=Ht.colorGamut,tn=Ht.frameRate,ke&&(Ee=Ht.mimeType,c=Ht.codecs);case 2:if(Ee){$i.u(4);break}return R($i,$Z(e,f,c,ct),5);case 5:Ee=$i.h;case 4:return R($i,JM(e,r,Ee,u,n),6);case 6:if(Wt=$i.h,En=Wt.drmInfos,An=Wt.keyIds,Vn=Wt.encrypted,Qn=Wt.uh,Vn&&!En.length&&!Qn)throw new Ye(2,4,4026);return ar=QM(e,c,f,h,v,A,N,B,z,J,fe,pe),ar.encrypted=Vn,ar.drmInfos=En,ar.keyIds=An,ar.mimeType=Ee,gt&&(ar.bandwidth=gt),Id(ar),f=="video"&&(Lt||It||Ut||Nt)&&sD(ar,Lt,It,tn,Ut,null,Nt),pa(e)&&N_(e,r),Ar=ct[0].startTime,Qr=ct[ct.length-1],zr=Qr.endTime,Si=new Mr(ct),ar.segmentIndex=Si,Fr=(Pr=ho(r.W,"EXT-X-SERVER-CONTROL"))?jp(Pr,"CAN-SKIP-UNTIL")!=null:!1,si=Pr?jp(Pr,"CAN-BLOCK-RELOAD")!=null:!1,Ms=Ad(r.W,"EXT-X-MEDIA-SEQUENCE",0),Wi=XM(Ms,ct),Ua=Wi.pb,us=Wi.qb,$i.return({stream:ar,type:f,Qg:[],M:u,rc:Ar,Kb:zr,Dd:Fr,Cd:si,dd:!1,Qe:-1,pb:Ua,qb:us,Vd:$e,wf:!1})}})}function XM(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{pb:e,qb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].isPreload()||(e++,n=0),{pb:e,qb:n}):(e++,t.m&&(n=0),{pb:e,qb:n})}function QM(e,t,n,r,u,c,f,h,v,A,N,B){var z=D_(n,t)||ay(n),J=[];if(v){v=m(v.split(","));for(var fe=v.next();!fe.done;fe=v.next())J.push(fe.value)}return v=void 0,fe=null,n==_r?v=J.includes("public.accessibility.transcribes-spoken-dialog")&&J.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":J.includes("public.accessibility.describes-video")&&(fe="visually impaired"),J.length||v!=="subtitle"||J.push("subtitle"),e={id:e.C++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:z,codecs:t,kind:n==_r?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Or(r||"und"),originalLanguage:r,label:c,type:n,primary:u,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:J,forced:A,channelsCount:f,audioSamplingRate:N,spatialAudio:B,closedCaptions:h,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:fe,external:!1,fastSwitching:!1,fullMimeTypes:new Set},Id(e),e}function JM(e,t,n,r,u){var c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt,It,Ut,Nt,tn,Ht,Wt,En;return Ne(function(An){switch(An.g){case 1:if(c=new Map,t.segments){for(f=m(t.segments),h=f.next();!h.done;h=f.next())if(v=h.value,A=ns(v.W,"EXT-X-KEY"),N=null,A.length)for(N=rD(e,t,v.W,r,u),B=m(A),z=B.next();!z.done;z=B.next())J=z.value,c.set(J,N)}pe=fe=!1,Ee=[],Oe=new Set,ke=m(c),rt=ke.next();case 2:if(rt.done){An.u(4);break}if(Fe=rt.value,$e=m(Fe),nt=$e.next().value,ct=$e.next().value,gt=nt,Lt=ct,It=Ur(gt,"METHOD"),It=="NONE"){An.u(3);break}if(fe=!0,Ut=$n(gt,"KEYFORMAT")||"identity",Nt=null,uy(It)){pe=!0,An.u(3);break}if(Ut!="identity"){Nt=(tn=fD[Ut])?tn(gt,n):null,An.u(6);break}return R(An,lD(e,gt,n,r,Lt,u),8);case 8:Nt=An.h;case 6:if(Nt){if(Nt.keyIds)for(Ht=m(Nt.keyIds),Wt=Ht.next();!Wt.done;Wt=Ht.next())En=Wt.value,Oe.add(En);Ee.push(Nt)}case 3:rt=ke.next(),An.u(2);break;case 4:return An.return({drmInfos:Ee,keyIds:Oe,encrypted:fe,uh:pe})}})}function eD(e,t,n,r,u){if(!g.crypto||!g.crypto.subtle)throw He("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new Ye(2,4,4042);var c=0,f=$n(t,"IV","");if(f){var h=Xu(f.substr(2));if(h.byteLength!=16)throw new Ye(2,4,4048)}else c=Ad(n.W,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+c,!e.ka.has(n)){var v={bitsKey:128,blockCipherMode:"CBC",iv:h,firstMediaSequenceNumber:c};switch(Ur(t,"METHOD")){case"AES-256":v.bitsKey=256;break;case"AES-256-CTR":v.bitsKey=256,v.blockCipherMode="CTR"}v.fetchKey=function(){var A,N,B,z,J,fe;return Ne(function(pe){if(pe.g==1)return A=zl(r(),Ur(t,"URI"),u),N=A.sort().join(""),e.L.has(N)||(B=Bi(A,e.g.retryParameters),z=gl(e,B,6).promise,e.L.set(N,z)),R(pe,e.L.get(N),2);if(pe.g!=3){if(J=pe.h,!J.data||J.data.byteLength!=v.bitsKey/8)throw new Ye(2,4,4049);return fe={name:v.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:v.bitsKey},R(pe,g.crypto.subtle.importKey("raw",J.data,fe,!0,["decrypt"]),3)}v.cryptoKey=pe.h,v.fetchKey=void 0,X(pe)})},e.ka.set(n,v)}return e.ka.get(n)}function tD(e,t){e.s==null&&(t=ho(t.W,"EXT-X-START"))&&(e.s=Number(Ur(t,"TIME-OFFSET")))}function zZ(e,t){var n=ho(t.W,"EXT-X-PLAYLIST-TYPE");t=ho(t.W,"EXT-X-ENDLIST"),t=n&&n.value=="VOD"||t,n=n&&n.value=="EVENT"&&!t,n=!t&&!n,t?sy(e,ly):n?sy(e,cy):sy(e,dD)}function N_(e,t){var n=1/0,r=t.segments;if(r.length)for(var u=r.length-1;0<=u;){var c=ho(r[u].W,"EXTINF");if(c){n=Number(c.value.split(",")[0]);break}u--}if(r=ho(t.W,"EXT-X-TARGETDURATION"),!r)throw new Ye(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(u=ho(t.W,"EXT-X-PART-INF"))&&(e.X=Number(Ur(u,"PART-TARGET"))),t=ho(t.W,"EXT-X-SERVER-CONTROL"),e.K&&e.X?(e.o=e.Hb?5*e.X<=n?Math.min(e.X,e.o):Math.min(n,e.o):Math.min(e.X,e.o),e.Fa=t?Number(Ur(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?jp(t,"HOLD-BACK"):null,e.Ea=n?Number(n.value):0),e.bb=Math.max(r,e.bb)}function nD(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.Fa)n=e.Fa;else if(e.Ea)n=e.Ea;else{var r=t.segments.length,u=e.g.hls.liveSegmentsDelay;for(u>r-2&&(u=Math.max(1,r-2)),u=r-u;u<r;u++){var c=ho(t.segments[u].W,"EXTINF");n=c?n+Math.ceil(Number(c.value.split(",")[0])):n+e.bb}}e.s&&0>e.s&&(n=Math.min(-e.s,n),e.s+=n),e.l.$g(0),e.l.Of(n),e.l.vc(!1)}function rD(e,t,n,r,u){var c=ho(n,"EXT-X-MAP");if(!c)return null;var f=Ur(c,"URI"),h=zl(r(),f,u);if(f=[h.toString(),$n(c,"BYTERANGE","")].join("-"),!e.ta.has(f)){var v=void 0,A=null;n=m(n);for(var N=n.next();!N.done;N=n.next())N=N.value,N.name=="EXT-X-KEY"?uy(Ur(N,"METHOD"))&&N.id<c.id&&(v=eD(e,N,t,r,u)):N.name=="EXT-X-BYTERANGE"&&N.id<c.id&&(A=N);t=YZ(h,c,A,v),e.ta.set(f,t)}return e.ta.get(f)}function YZ(e,t,n,r){var u=0,c=null;return t=$n(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(u=t.split("@"),c=Number(u[0]),u=Number(u[1]),c=u+c-1,r&&(n=c+1-u,n%16&&(c+=16-n%16))),new Dn(function(){return e},u,c,null,null,null,r)}function WZ(e,t,n,r,u,c,f,h,v){function A(Vn){Vn=new Ei(Vn).Pa.split(".").pop();var Qn=L_[f][Vn];return Qn||(Qn=O_[Vn]),Qn}var N=r.W,B=ho(N,"EXTINF"),z=0,J=0,fe=null;r.Ab.length&&(e.m.isLowLatency=!0);var pe=null;if(!e.g.hls.ignoreManifestProgramDateTime){var Ee=ho(N,"EXT-X-PROGRAM-DATE-TIME");Ee&&Ee.value&&(pe=Ts(Ee.value))}var Oe=qe;if(ho(N,"EXT-X-GAP")&&(e.m.gapCount++,Oe=2),!B){if(r.Ab.length==0)throw new Ye(2,4,4024,"EXTINF");if(!e.K)return null}var ke=[];Ee=!1;var rt=null,Fe=!1,$e=!1;if(e.K&&r.Ab.length){z=t&&g.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var nt=pe,ct={},gt=0;gt<r.Ab.length;ct={ue:void 0,de:void 0},gt++){var Lt=r.Ab[gt],It=gt==0?n:ke[ke.length-1],Ut=gt==0?u:It.endTime,Nt=Number($n(Lt,"DURATION"))||e.X;if(Nt){var tn=Ut+Nt,Ht=0,Wt=null;if(Lt.name=="EXT-X-PRELOAD-HINT"?(Ht=(Ht=$n(Lt,"BYTERANGE-START"))?Number(Ht):0,(It=$n(Lt,"BYTERANGE-LENGTH"))?Wt=Ht+Number(It)-1:Ht&&(Wt=Number.MAX_SAFE_INTEGER)):(Ht=$n(Lt,"BYTERANGE"),Wt=m(iD(It,Ht)),Ht=Wt.next().value,Wt=Wt.next().value),ct.de=$n(Lt,"URI"),ct.de){It=qe,$n(Lt,"GAP")=="YES"&&(e.m.gapCount++,It=2,Fe=!0),ct.ue=null;var En=function(Vn){return function(){return Vn.ue==null&&(Vn.ue=zl(h(),Vn.de,c)),Vn.ue}}(ct);z&&0<=Ht&&Wt!=null&&(rt=En,Ee=!0),Ut=new Qe(Ut,tn,En,Ht,Wt,t,0,0,1/0,[],"",null,nt,It,v),Lt.name=="EXT-X-PRELOAD-HINT"&&(Ut.xf(),$e=!0),$n(Lt,"INDEPENDENT")!="YES"&&0<gt&&Ut.Jc(),(ct=A(ct.de))&&(Ut.mimeType=ct,cD.has(ct)&&(Ut.$=null)),ke.push(Ut),nt&&(nt+=Nt)}}}}if(B){if(B=Number(B.value.split(",")[0]),B==0)return null;z=u+B}else if(ke.length)z=ke[ke.length-1].endTime;else return null;Ee&&(Fe||ke[0].Ha!=0?(Ee=!1,rt=null):ke=[]),(B=ho(N,"EXT-X-BYTERANGE"))?(fe=m(iD(n,B.value)),J=fe.next().value,fe=fe.next().value):ke.length&&(J=ke[0].Ha,fe=ke[ke.length-1].va),n="",B=null,f=="image"&&(n="1x1",N=ho(N,"EXT-X-TILES"))&&(n=Ur(N,"LAYOUT"),(N=$n(N,"DURATION"))&&(B=Number(N)));var An=null;return t=new Qe(u,z,function(){return rt?rt():(An==null&&(An=zl(h(),r.g,c)),An||[])},J,fe,t,0,0,1/0,ke,n,B,pe,Oe,v,0<ke.length&&!!r.g),(u=A(r.g))&&(t.mimeType=u,cD.has(u)&&(t.$=null)),Ee&&(e.Hb=!0,t.Fg(),$e&&t.xf()),t}function iD(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.va+1,r=n+t-1),[n,r]}function M_(e,t,n,r,u){if(n=="video"||n=="audio"){var c=e.l.m;if(c&&!Zp(e,n))for(t=ns(t,"EXT-X-DATERANGE"),t=t.sort(function(pe,Ee){return pe=Ur(pe,"START-DATE"),Ee=Ur(Ee,"START-DATE"),pe<Ee?-1:pe>Ee?1:0}),n=0;n<t.length;n++){var f=t[n],h=Ur(f,"ID");if(!e.Da.has(h)){var v=Ur(f,"START-DATE"),A=Ts(v);if(!isNaN(A)){v=Math.max(0,A-c);var N=null,B=$n(f,"END-DATE");if(B&&(B=Ts(B),!isNaN(B)&&(N=B-c,0>N))||N==null&&(B=$n(f,"DURATION")||$n(f,"PLANNED-DURATION"))&&(B=parseFloat(B),isNaN(B)||(N=v+B),0>A-c+B))continue;B=$n(f,"CLASS")||"com.apple.quicktime.HLS";var z=$n(f,"END-ON-NEXT")=="YES";if(N==null&&z){for(z=n+1;z<t.length;z++){var J=$n(t[z],"CLASS")||"com.apple.quicktime.HLS";if(B==J&&(J=Ur(t[z],"START-DATE"),J=Ts(J),!isNaN(J)&&J&&J>A)){N=Math.max(0,J-c);break}}if(N==null)continue}for(A=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"],z=[],f=m(f.attributes),J=f.next();!J.done;J=f.next())if(J=J.value,!A.includes(J.name)){var fe=kM(J.value,r);(J.name=="X-ASSET-URI"||J.name=="X-ASSET-LIST")&&(fe=zl(u(),J.value,r)[0]),z.push({key:J.name,description:"",data:fe,mimeType:null,pictureType:null})}1<z.length&&e.h.onMetadata(B,v,N,z),e.Da.add(h)}}}}}function oD(e,t,n,r,u,c){var f=t.segments,h=void 0,v=Ad(t.W,"EXT-X-DISCONTINUITY-SEQUENCE",0),A=Ad(t.W,"EXT-X-MEDIA-SEQUENCE",0),N=ho(t.W,"EXT-X-SKIP"),B=N?Number($n(N,"SKIPPED-SEGMENTS")):0,z=A+B,J=0;pa(e)&&n.has(z)&&(J=n.get(z)),J===0&&e.za==cy&&0<n.size&&!n.has(z)&&e.l.i!=null&&(J=e.l.nb());var fe=[],pe=null;N=[];for(var Ee=0;Ee<f.length;Ee++){var Oe=f[Ee],ke=Ee==0?J:pe.endTime;z=A+B+Ee,ho(Oe.W,"EXT-X-DISCONTINUITY")&&v++;for(var rt=m(Oe.W),Fe=rt.next();!Fe.done;Fe=rt.next())Fe=Fe.value,Fe.name=="EXT-X-KEY"&&(uy(Ur(Fe,"METHOD"))?h=eD(e,Fe,t,u,r):h=void 0);n.set(z,ke),rt=rD(e,t,Oe.W,u,r),!e.K&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.K=e.h.isLowLatencyMode()),(ke=WZ(e,rt,pe,Oe,ke,r,c,u,h))&&((pe=Ad(Oe.W,"EXT-X-BITRATE"))?N.push({bitrate:pe,duration:ke.endTime-ke.startTime}):N.length&&(pe=N.pop(),pe.duration+=ke.endTime-ke.startTime,N.push(pe)),pe=ke,ke.i=v,Zp(e,c)&&e.I!=null&&z<e.I||fe.push(ke))}if(t=void 0,N.length&&(t=N.reduce(function($e,nt){return $e+nt.duration},0),t=Math.round(N.reduce(function($e,nt){return $e+nt.bitrate*nt.duration},0)/t*1e3)),N=fe.some(function($e){return $e.h!=null})){for(n={},r=0;r<fe.length;n={Hd:void 0,Gd:void 0,yd:void 0,tc:void 0,xd:void 0},r++)if(n.tc=fe[r],n.tc.h==null)for(n.Gd=0,n.Hd=r,u=function($e){return function(){var nt=fe[$e.Hd];if(nt){if(nt.h!=null)return nt.h+$e.Gd;$e.Gd-=nt.endTime-nt.startTime,$e.Hd+=1}return null}}(n),n.xd=0,n.yd=r,f=function($e){return function(){var nt=fe[$e.yd];if(nt){if(nt!=$e.tc&&($e.xd+=nt.endTime-nt.startTime),nt.h!=null)return nt.h+$e.xd;--$e.yd}return null}}(n);n.tc.h==null;)n.tc.h=f(),n.tc.h==null&&(n.tc.h=u())}if(N)for(n=m(fe),r=n.next();!r.done;r=n.next())for(u=r.value,r=u.h,u=m(u.g),f=u.next();!f.done;f=u.next())f=f.value,f.h=r,r+=f.endTime-f.startTime;if(n=e.ga,N&&n!=1/0&&!Zp(e,c))for(e=m(fe),c=e.next();!c.done;c=e.next())c.value.Uf(n);return{segments:fe,bandwidth:t}}function D_(e,t){if(e==_r){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function ay(e){return e==_r?"text/vtt":L_[e].mp4}function aD(e,t){e=pa(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.Zb()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function $Z(e,t,n,r){var u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe;return Ne(function(ke){switch(ke.g){case 1:return u=$a,c=aD(e,r),f=c.segment,f.status==2?ke.return(ay(t)):(h=f.M(),v=new Ei(h[0]),A=v.Pa.split(".").pop(),N=L_[t],(B=N[A])||(B=O_[A])||(B=D_(t,n))?ke.return(B):(J=1,fe=Bi(h,e.g.retryParameters),ce(ke,2),fe.method="HEAD",R(ke,gl(e,fe,u,{type:J}).promise,4)));case 4:pe=ke.h,z=pe.headers["content-type"],ye(ke,3);break;case 2:if(Ee=be(ke),!Ee||Ee.code!=1002&&Ee.code!=1001){ke.u(3);break}return fe.method="GET",R(ke,gl(e,fe,u,{type:J}).promise,6);case 6:Oe=ke.h,z=Oe.headers["content-type"];case 3:return z?ke.return(z.toLowerCase().split(";")[0]):ke.return(ay(t))}})}function sD(e,t,n,r,u,c,f){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=u||void 0,e.videoLayout=c||void 0,e.colorGamut=f||void 0)}function P_(e,t,n){return gl(e,Bi(t,e.g.retryParameters),0,{type:n?2:3})}function uD(e){var t,n,r,u,c,f;return Ne(function(h){switch(h.g){case 1:return e.h?(ce(h,2),t=Date.now(),R(h,e.update(),4)):h.return();case 4:n=Date.now(),pa(e)&&(r=(n-t)/1e3,e.Eb.sample(1,r),u=e.o,c=Math.max(0,u-G(e.Eb)),e.B.Z(c)),ye(h,3);break;case 2:if(f=be(h),!e.h)return h.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(f),h.return();f.severity=1,e.h.onError(f),e.B.Z(.1);case 3:if(!e.h)return h.return();e.h.onManifestUpdated(),X(h)}})}function pa(e){return e.za!=ly}function sy(e,t){e.za=t,e.l&&e.l.vc(!pa(e)),pa(e)||e.B.stop()}function gl(e,t,n,r){if(!e.ea)throw new Ye(2,7,7001);return r||(r={}),r.isPreload=e.Fb(),t=e.h.networkingEngine.request(n,t,r),ol(e.ea,t),t}function uy(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function lD(e,t,n,r,u,c){var f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe;return Ne(function($e){switch($e.g){case 1:if(n=="video/mp2t")throw new Ye(2,4,4040);if(Tr())throw new Ye(2,4,4041);if(f=Ur(t,"METHOD"),h=["SAMPLE-AES","SAMPLE-AES-CTR"],!h.includes(f))return $e.return(null);if(v=zl(r(),Ur(t,"URI"),c),v[0].startsWith("data:text/plain;base64,")){A=Ya(Wo(v[0].split("data:text/plain;base64,").pop())),$e.u(2);break}return N=v.sort().join(""),e.oa.has(N)||(B=Bi(v,e.g.retryParameters),z=gl(e,B,6).promise,e.oa.set(N,z)),R($e,e.oa.get(N),3);case 3:J=$e.h,A=Ya(J.data);case 2:if(fe="00000000000000000000000000000000",!u){$e.u(4);break}if(e.sa.has(u)){pe=e.sa.get(u),$e.u(5);break}return Ee=rd(u.M(),u.Yb(),u.Wb(),e.g.retryParameters),Oe=$a,R($e,gl(e,Ee,Oe,{type:0}).promise,6);case 6:ke=$e.h,pe=wj(ke.data),e.sa.set(u,pe);case 5:pe&&(fe=pe);case 4:return rt=new Map,rt.set(fe,A),Fe="cenc",f=="SAMPLE-AES"&&(Fe="cbcs"),$e.return(Tm(rt,Fe))}})}ne("shaka.hls.HlsParser",iy);var O_={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},L_={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},cD=new Set(["video/mp2t"].concat(T(bu))),fD={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new Ye(2,4,4040);if(Tr())throw new Ye(2,4,4041);if(t=Ur(e,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),As("com.apple.fps",n,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],Ur(e,"URI"))},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Ur(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=Ur(e,"URI"),t=I_(t.split("?")[0]),t=nr(t.data),n=As("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=$n(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=Ur(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=Ur(e,"URI"),e=I_(e.split("?")[0]),e=nr(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Pe(e,t,new Set,0),As("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},ly="VOD",dD="EVENT",cy="LIVE",XZ={qh:ly,oj:dD,wj:cy};Yn["application/x-mpegurl"]=function(){return new iy},Yn["application/vnd.apple.mpegurl"]=function(){return new iy};function QZ(e){var t=0,n=ln(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=nr(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function fy(e){if(e=hD(e))e:{e=m(Eo(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=Hi(t.value,"LA_URL")){e=ei(t);break e}e=""}else e="";return e}function hD(e){return e=Wo(ei(e)),e=QZ(e).filter(function(t){return t.type===JZ})[0],e?(e=ci(e.value,!0),(e=Su(e,"WRMHEADER"))?e:null):null}var JZ=1,eq=new Map().set("com.microsoft.playready",fy).set("com.microsoft.playready.recommendation",fy).set("com.microsoft.playready.software",fy).set("com.microsoft.playready.hardware",fy);function bd(e){if(!vD){vD=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);dy=wr("ftyp",t,r,t,n),t=wr("dref",fq),k_=wr("dinf",t)}this.g=e}function Cd(e){for(var t=[],n=m(e.g),r=n.next();!r.done;r=n.next()){var u=t,c=u.push,f=r.value;r=wr;var h=f.id+1,v=f.stream.width||0,A=f.stream.height||0;f.type=="audio"&&(A=v=0);var N=f.duration*f.timescale,B=Math.floor(N/(Yl+1));switch(N=Math.floor(N%(Yl+1)),h=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(mi(h,4)),[0,0,0,0],T(mi(B,4)),T(mi(N,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],T(mi(v,2)),[0,0],T(mi(A,2)),[0,0])),h=wr("tkhd",h),v=wr,B=f.duration*f.timescale,A=Math.floor(B/(Yl+1)),B=Math.floor(B%(Yl+1)),N=f.stream.language,N=N.charCodeAt(0)-96<<10|N.charCodeAt(1)-96<<5|N.charCodeAt(2)-96,A=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(mi(f.timescale,4)),T(mi(A,4)),T(mi(B,4)),T(mi(N,2)),[0,0])),A=wr("mdhd",A),B=f,N=new Uint8Array([]),B.type){case"video":N=nq;break;case"audio":N=rq}B=wr("hdlr",N);e:{switch(f.type){case"video":f=wr("minf",wr("vmhd",uq),k_,pD(f));break e;case"audio":f=wr("minf",wr("smhd",lq),k_,pD(f));break e}f=new Uint8Array([])}f=v("mdia",A,B,f),r=r("trak",h,f),c.call(u,r)}for(t=hi.apply(co,T(t)),c=e.g[0],n=wr,r=c.duration*c.timescale,u=Math.floor(r/(Yl+1)),r=Math.floor(r%(Yl+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(mi(c.timescale,4)),T(mi(u,4)),T(mi(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=wr("mvhd",u),r=[],e=m(e.g),v=e.next();!v.done;v=e.next())f=r,h=f.push,v=new Uint8Array([0,0,0,0].concat(T(mi(v.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),v=wr("trex",v),h.call(f,v);if(e=hi.apply(co,T(r)),e=wr("mvex",e),r=[],c.encrypted){for(c=m(c.stream.drmInfos),f=c.next();!f.done;f=c.next())if(f=f.value,f.initData)for(f=m(f.initData),h=f.next();!h.done;h=f.next())r.push(h.value.initData);c=hi.apply(co,T(r))}else c=new Uint8Array([]);return e=n("moov",u,t,e,c),t=new Uint8Array(dy.byteLength+e.byteLength),t.set(dy),t.set(e,dy.byteLength),t}function pD(e){var t=wr,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.ya.byteLength)var u=wr("avcC",e.ya);else{u=wr;for(var c=7,f=[],h=[],v=0,A=0,N=0,B=0;B<e.ab.length;B++){var z=mD(e.ab[B]);switch(z[0]&31){case 7:f.push(z),c+=z.length+2;break;case 8:h.push(z),c+=z.length+2}}for(0<f.length&&(v=f[0][1],N=f[0][2],A=f[0][3]),c=new Uint8Array(c),B=0,c[B++]=1,c[B++]=v,c[B++]=N,c[B++]=A,c[B++]=255,c[B++]=224|f.length,v=0;v<f.length;v++)c[B++]=(f[v].length&65280)>>8,c[B++]=f[v].length&255,c.set(f[v],B),B+=f[v].length;for(c[B++]=h.length,f=0;f<h.length;f++)c[B++]=(h[f].length&65280)>>8,c[B++]=h[f].length&255,c.set(h[f],B),B+=h[f].length;u=u("avcC",c)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(mi(n,2)),T(mi(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",h=gD(e),f=new Uint8Array([]),e.encrypted&&(f=Rd(e),r="encv"),n=wr(r,n,u,h,f)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,u=e.stream.height||0,n=new Uint8Array([]),0<e.ya.byteLength&&(n=wr("hvcC",e.ya)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(mi(r,2)),T(mi(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",h=gD(e),f=new Uint8Array([]),e.encrypted&&(f=Rd(e),u="encv"),n=wr(u,r,n,h,f));break;case"audio":e.codecs.includes("mp3")?e=wr(".mp3",qp(e)):e.codecs.includes("ac-3")?(n=wr("dac3",e.qa),r="ac-3",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=wr(r,qp(e),n,u)):e.codecs.includes("ec-3")?(n=wr("dec3",e.qa),r="ec-3",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=wr(r,qp(e),n,u)):e.codecs.includes("opus")?(n=wr("dOps",e.qa),r="Opus",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=wr(r,qp(e),n,u)):(0<e.qa.byteLength?n=wr("esds",e.qa):(n=wr,r=e.id+1,u=e.stream.channelsCount||2,f=e.stream.audioSamplingRate||44100,v=Ll("audio",e.codecs.split(",")),A={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},h=A[f],(v==="mp4a.40.5"||v==="mp4a.40.29")&&(h=A[2*f]),f=parseInt(v.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(T(mi(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,f<<3|h>>>1,h<<7|u<<3,6,1,2])),n=n("esds",r)),r="mp4a",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=wr(r,qp(e),n,u)),n=e}return e=wr("stsd",cq,n),t("stbl",e,wr("stts",iq),wr("stsc",oq),wr("stsz",sq),wr("stco",aq))}function gD(e){if(!e.Ba&&!e.Ca)return new Uint8Array([]);var t=e.Ca;return e=new Uint8Array([].concat(T(mi(e.Ba,4)),T(mi(t,4)))),wr("pasp",e)}function qp(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(T(mi(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Rd(e){for(var t=wr,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,u=0;u<n.length;u+=1)r|=n.charCodeAt(u)<<8*(n.length-u-1);n=new Uint8Array([].concat(T(mi(r,4)))),n=wr("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=wr("schm",r),u=wr;var c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.stream.drmInfos);for(var f=e.next();!f.done;f=e.next())if((f=f.value)&&f.keyIds&&f.keyIds.size){f=m(f.keyIds);for(var h=f.next();!h.done;h=f.next())c=mD(h.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),c=wr("tenc",e,c),t("sinf",n,r,u("schi",c))}function Gp(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,u=r.apply,c=wr,f=new Uint8Array([0,0,0,0].concat(T(mi(n.data?n.data.sb:0,4))));f=wr("mfhd",f);var h,v=n.data?n.data.Ya:[],A=new Uint8Array(4+v.length);for(h=0;h<v.length;h++){var N=v[h].flags;A[h+4]=N.Va<<4|N.Xa<<2|N.Wa}v=wr("sdtp",A);var B=v.length+92;A=wr,h=new Uint8Array([0,0,0,58].concat(T(mi(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=wr("tfhd",h),N=n.data?n.data.baseMediaDecodeTime:0;var z=Math.floor(N%(Yl+1));N=new Uint8Array([1,0,0,0].concat(T(mi(Math.floor(N/(Yl+1)),4)),T(mi(z,4)))),N=wr("tfdt",N);var J=B;B=n.data?n.data.Ya:[],z=B.length;var fe=12+16*z,pe=new Uint8Array(fe);for(J+=8+fe,pe.set([n.type==="video"?1:0,0,15,1].concat(T(mi(z,4)),T(mi(J,4))),0),J=0;J<z;J++){var Ee=B[J];fe=mi(Ee.duration,4);var Oe=mi(Ee.size,4),ke=Ee.flags;Ee=mi(Ee.eb,4),pe.set([].concat(T(fe),T(Oe),[ke.hb<<2|ke.Va,ke.Xa<<6|ke.Wa<<4|ke.ib,ke.Ua&61440,ke.Ua&15],T(Ee)),12+16*J)}B=wr("trun",pe),v=A("traf",h,N,B,v),c=c("moof",f,v),u.call(r,t,[c,tq(n)])}return hi.apply(co,T(t))}function tq(e){return e=(e.data?e.data.Ya:[]).map(function(t){return t.data}),e=hi.apply(co,T(e)),wr("mdat",e)}function mi(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function mD(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function wr(e){var t=et.apply(1,arguments),n=yD[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],yD[e]=n);for(var r=8,u=t.length-1;0<=u;u--)r+=t[u].byteLength;for(u=new Uint8Array(r),u[0]=r>>24&255,u[1]=r>>16&255,u[2]=r>>8&255,u[3]=r&255,u.set(n,4),n=0,r=8;n<t.length;n++)u.set(t[n],r),r+=t[n].byteLength;return u}var vD=!1,Yl=Math.pow(2,32)-1,yD={},nq=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),rq=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),iq=new Uint8Array([0,0,0,0,0,0,0,0]),oq=new Uint8Array([0,0,0,0,0,0,0,0]),aq=new Uint8Array([0,0,0,0,0,0,0,0]),sq=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),uq=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),lq=new Uint8Array([0,0,0,0,0,0,0,0]),cq=new Uint8Array([0,0,0,0,0,0,0,1]),dy=new Uint8Array([]),fq=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),k_=new Uint8Array([]);function F_(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.C=new D(5),this.o=new on(function(){dq(e)}),this.B=new il,this.m=new Map,this.A=function(){return!1}}p=F_.prototype,p.configure=function(e,t){this.g=e,t&&(this.A=t)},p.start=function(e,t){var n=this;return Ne(function(r){if(r.g==1)return n.l=[e],n.h=t,R(r,U_(n),2);if(!n.h)throw new Ye(2,7,7001);return r.return(n.j)})};function dq(e){var t;Ne(function(n){switch(n.g){case 1:return ce(n,2),R(n,U_(e),4);case 4:ye(n,3);break;case 2:t=be(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();X(n)}})}p.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.B.destroy()},p.update=function(){var e=this,t;return Ne(function(n){if(n.g==1)return ce(n,2),R(n,U_(e),4);if(n.g!=2)return ye(n,0);if(t=be(n),!e.h||!t)return n.return();e.h.onError(t),X(n)})},p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(){},p.banLocation=function(){},p.setMediaElement=function(){};function U_(e){var t,n,r,u,c,f,h;return Ne(function(v){if(v.g==1)return t=Bi(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),u=n.request(0,t,{type:5,isPreload:e.A()}),ol(e.B,u),R(v,u.promise,2);if(c=v.h,!e.h)return v.return();c.uri&&!e.l.includes(c.uri)&&e.l.unshift(c.uri);var A=c.uri,N=c.data,B=e.g.mss.manifestPreprocessor;if(B!=pv){if(gr("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),N=vM(N,"SmoothStreamingMedia"),!N)throw new Ye(2,4,4046,A);B(N),N=bi(N.outerHTML)}var z=Tu(N,"SmoothStreamingMedia");if(!z)throw new Ye(2,4,4046,A);if(A=e.g.mss.manifestPreprocessorTXml,A!=gv&&A(z),e.i||(e.i=new rr(null,0)),A=Er(z,"IsLive",Vs,!1))throw new Ye(2,4,4047);e.i.vc(!A),B=Er(z,"TimeScale",lo,1e7),N=Er(z,"DVRWindowLength",lo),A&&(N===0||isNaN(N))&&(N=1/0);var J=Er(z,"CanSeek",Vs,!1);N===0&&J&&(N=1/0),J=null,N&&0<N&&(J=N/B),A&&!isNaN(e.g.availabilityWindowOverride)&&(J=e.g.availabilityWindowOverride),J==null&&(J=1/0),e.i.ne(J),N=Er(z,"Duration",lo,1/0),A||e.i.Za(N/B),A={variants:[],textStreams:[],timescale:B,duration:N/B};var fe;for(J=sr(z,"Protection"),B=e.g.mss.keySystemsBySystemId,N=[],J=m(J),fe=J.next();!fe.done;fe=J.next())N=N.concat(sr(fe.value,"ProtectionHeader"));if(N.length){for(J=[],fe=0;fe<N.length;fe++){var pe=N[fe],Ee=pe.attributes.SystemID.toLowerCase(),Oe=B[Ee];if(Oe){var ke=hD(pe);if(ke)e:{ke=m(Eo(ke,"DATA"));for(var rt=ke.next();!rt.done;rt=ke.next())if(rt=Hi(rt.value,"KID")){ke=Wo(ei(rt)),ke=new Uint8Array([ke[3],ke[2],ke[1],ke[0],ke[5],ke[4],ke[7],ke[6]].concat(T(ke.slice(8)))),ke=Ya(ke);break e}ke=null}else ke=null;rt=Wo(ei(pe)),Ee=Xu(Ee.replace(/-/g,"")),Ee=[{initData:Pe(rt,Ee,new Set,0),initDataType:"cenc",keyId:ke}],Ee=As(Oe,"cenc",Ee),ke&&Ee.keyIds.add(ke),(Oe=eq.get(Oe))&&(Ee.licenseServerUri=Oe(pe)),J.push(Ee)}}B=J}else B=[];for(fe=B,J=[],B=[],N=[],z=sr(z,"StreamIndex"),z=m(z),pe=z.next();!pe.done;pe=z.next()){pe=pe.value,Oe=sr(pe,"QualityLevel"),Ee=A.timescale,ke=A.duration,rt=sr(pe,"c");for(var Fe=[],$e=0,nt=0;nt<rt.length;++nt){var ct=rt[nt],gt=rt[nt+1],Lt=Er(ct,"t",lo),It=Er(ct,"d",lo);if(ct=Er(ct,"r",_c),!It)break;if(Lt=Lt!=null?Lt:$e,ct=ct||0,0>ct)if(gt){if(gt=Er(gt,"t",lo),gt==null)break;if(Lt>=gt)break;ct=Math.ceil((gt-Lt)/It)-1}else{if(ke==1/0)break;if(Lt/Ee>=ke)break;ct=Math.ceil((ke*Ee-Lt)/It)-1}for(gt=0;gt<=ct;++gt)$e=Lt+It,Fe.push({start:Lt/Ee,end:$e/Ee,Zf:Lt}),Lt=$e}for(Ee=Fe,Oe=m(Oe),ke=Oe.next();!ke.done;ke=Oe.next())(ke=hq(e,pe,ke.value,Ee,fe,A))&&(ke.type!="audio"||e.g.disableAudio?ke.type!="video"||e.g.disableVideo?ke.type!=_r||e.g.disableText||N.push(ke):B.push(ke):J.push(ke))}for(z=[],J=m(0<J.length?J:[null]),fe=J.next();!fe.done;fe=J.next())for(fe=fe.value,pe=m(0<B.length?B:[null]),Fe=pe.next();!Fe.done;Fe=pe.next())Oe=z,Ee=Oe.push,ke=e,rt=fe,Fe=Fe.value,nt=0,rt&&rt.bandwidth&&0<rt.bandwidth&&(nt+=rt.bandwidth),Fe&&Fe.bandwidth&&0<Fe.bandwidth&&(nt+=Fe.bandwidth),ke={id:ke.s++,language:rt?rt.language:"und",disabledUntilTime:0,primary:!!rt&&rt.primary||!!Fe&&Fe.primary,audio:rt,video:Fe,bandwidth:nt,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},Ee.call(Oe,ke);A.variants=z,A.textStreams=N,e.j?(e.j.variants=A.variants,e.j.textStreams=A.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:A.variants,textStreams:A.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.Ud()),Promise.resolve(),f=Date.now(),h=(f-r)/1e3,e.C.sample(1,h),X(v)})}function hq(e,t,n,r,u,c){var f=t.attributes.Type;if(f!=="audio"&&f!=="video"&&f!=="text")return He("Ignoring unrecognized type:",f),null;var h=t.attributes.Language,v=e.s++,A=Er(n,"Bitrate",Hs),N=Er(n,"MaxWidth",Hs),B=Er(n,"MaxHeight",Hs),z=Er(n,"Channels",Hs),J=Er(n,"SamplingRate",Hs),fe=c.duration;r.length&&(fe=r[r.length-1].end-r[0].start);var pe=e.i.getDuration();e.i.Za(Math.min(fe,pe));var Ee={id:v,originalId:t.attributes.Name||String(v),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:A||0,width:N||void 0,height:B||void 0,kind:"",encrypted:0<u.length,drmInfos:u,keyIds:new Set,language:Or(h||"und"),originalLanguage:h,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:z,audioSamplingRate:J,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:fe,timescale:c.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((u=t.attributes.Subtype)&&((u=Eq[u])&&Ee.roles.push(u),u==="main"&&(Ee.primary=!0)),u=n.attributes.FourCC,(u===null||u==="")&&(u=t.attributes.FourCC),!u){if(f==="audio")u="AAC";else if(f==="video")return He('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!yq.includes(u.toUpperCase()))return He("Codec not supported:",u),null;switch(n=pq(n,f,u,Ee),Ee.mssPrivateData.codecPrivateData=n,f){case"audio":if(!n)return He("Quality unsupported without CodecPrivateData",f),null;Ee.type="audio",Ee.mimeType="mss/audio/mp4",Ee.codecs=gq(u,n);break;case"video":if(!n)return He("Quality unsupported without CodecPrivateData",f),null;Ee.type="video",Ee.mimeType="mss/video/mp4",Ee.codecs=mq(n);break;case"text":Ee.type=_r,Ee.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(Ee.codecs="stpp")}return Ee.fullMimeTypes.add(Di(Ee.mimeType,Ee.codecs)),Ee.createSegmentIndex=function(){if(Ee.segmentIndex)return Promise.resolve();if(e.m.has(Ee.id))var Oe=e.m.get(Ee.id);else Oe=[],Ee.type=="video"&&(Oe=Ee.mssPrivateData.codecPrivateData.split("00000001").slice(1)),Oe={id:Ee.id,type:Ee.type,codecs:Ee.codecs,encrypted:Ee.encrypted,timescale:Ee.mssPrivateData.timescale,duration:Ee.mssPrivateData.duration,ab:Oe,qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:null,stream:Ee},Oe=Cd(new bd([Oe])),e.m.set(Ee.id,Oe);return Oe=vq(e,new Dn(function(){return[]},0,null,sv(Ee),Ee.mssPrivateData.timescale,Oe),Ee,t,r),Ee.segmentIndex=new Mr(Oe),Promise.resolve()},Ee.closeSegmentIndex=function(){Ee.segmentIndex&&(Ee.segmentIndex.release(),Ee.segmentIndex=null)},Ee}function pq(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=u[e],n==="AACH"?(n=new Uint8Array(4),e=u[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function gq(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function mq(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function vq(e,t,n,r,u){var c=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[],u=m(u);for(var f=u.next(),h={};!f.done;h={pe:void 0},f=u.next())h.pe=f.value,r.push(new Qe(h.pe.start,h.pe.end,function(v){return function(){return Ki(e.l,[c.replace("{start time}",String(v.pe.Zf))])}}(h),0,null,t,0,0,n.mssPrivateData.duration));return r}ne("shaka.mss.MssParser",F_);var yq="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),Eq={CAPT:"main",SUBT:"alternate",DESC:"main"};Yn["application/vnd.ms-sstr+xml"]=function(){return new F_};function ED(e,t,n,r,u,c){if(200<=n&&299>=n&&n!=202)return{uri:u||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};var f=null;try{f=Br(t)}catch(h){}throw new Ye(n==401||n==403?2:1,1,1001,r,n,f,e,c,u||r)}function B_(){}function hy(e,t,n,r,u,c){var f=new Aq;Cu(t.headers).forEach(function(N,B){f.append(B,N)});var h=new Sq,v={ig:!1,kh:!1};if(e=_q(e,n,{body:t.body||void 0,headers:f,method:t.method,signal:h.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},v,r,u,t.streamDataCallback,c.minBytesForProgressEvents||0),e=new pi(e,function(){return v.ig=!0,h.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var A=new on(function(){v.kh=!0,h.abort()});A.Z(t/1e3),e.finally(function(){A.stop()})}return e}function _q(e,t,n,r,u,c,f,h){var v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe;return Ne(function($e){switch($e.g){case 1:return v=Tq,A=wq,J=z=0,fe=Date.now(),ce($e,2),R($e,v(e,n),4);case 4:if(N=$e.h,c(_D(N.headers)),n.method=="HEAD"){$e.u(5);break}return pe=N.clone().body.getReader(),Oe=(Ee=N.headers.get("Content-Length"))?parseInt(Ee,10):0,ke=function(nt){function ct(){var gt,Lt,It,Ut;return Ne(function(Nt){switch(Nt.g){case 1:return ce(Nt,2),R(Nt,pe.read(),4);case 4:gt=Nt.h,ye(Nt,3);break;case 2:return be(Nt),Nt.return();case 3:if(gt.done){Nt.u(5);break}if(z+=gt.value.byteLength,!f){Nt.u(5);break}return R(Nt,f(gt.value),5);case 5:Lt=Date.now(),It=z-J,(100<Lt-fe&&It>=h||gt.done)&&(Ut=gt.done?0:Oe-z,u(Lt-fe,It,Ut),J=z,fe=Lt),gt.done?nt.close():(nt.enqueue(gt.value),ct()),X(Nt)}})}ct()},new A({start:ke}),R($e,N.arrayBuffer(),6);case 6:B=$e.h;case 5:ye($e,3);break;case 2:throw rt=be($e),r.ig?new Ye(1,1,7001,e,t):r.kh?new Ye(1,1,1003,e,t):new Ye(1,1,1002,e,rt,t);case 3:return Fe=_D(N.headers),$e.return(ED(Fe,B,N.status,e,N.url,t))}})}function _D(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function TD(){if(g.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(g.Response){if(!new Response("").body)return!1}else return!1;return!(!g.fetch||"polyfill"in g.fetch||!g.AbortController)}ne("shaka.net.HttpFetchPlugin",B_),B_.isSupported=TD,B_.parse=hy;var Tq=g.fetch,Sq=g.AbortController,wq=g.ReadableStream,Aq=g.Headers;TD()&&(Qs("http",hy,2,!0),Qs("https",hy,2,!0),Qs("blob",hy,2,!0));function SD(){}function py(e,t,n,r,u,c){var f=new Iq,h=Date.now(),v=0,A=new Promise(function(N,B){f.open(t.method,e,!0),f.responseType="arraybuffer",f.timeout=t.retryParameters.timeout,f.withCredentials=t.allowCrossSiteCredentials,f.onabort=function(){B(new Ye(1,1,7001,e,n))};var z=!1;f.onreadystatechange=function(){if(f.readyState==2&&!z){var fe=wD(f);u(fe),z=!0}},f.onload=function(fe){var pe=wD(f),Ee=f.response;try{r(Date.now()-h,fe.loaded-v,0);var Oe=ED(pe,Ee,f.status,e,f.responseURL,n);N(Oe)}catch(ke){B(ke)}},f.onerror=function(fe){B(new Ye(1,1,1002,e,fe,n))},f.ontimeout=function(){B(new Ye(1,1,1003,e,n))},f.onprogress=function(fe){var pe=Date.now(),Ee=c.minBytesForProgressEvents||0,Oe=fe.loaded-v;(100<pe-h&&Oe>=Ee||fe.lengthComputable&&fe.loaded==fe.total)&&(r(pe-h,Oe,f.readyState==4?0:fe.total-fe.loaded),v=fe.loaded,h=pe)};for(var J in t.headers)f.setRequestHeader(J.toLowerCase(),t.headers[J]);f.send(t.body)});return new pi(A,function(){return f.abort(),Promise.resolve()})}function wD(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}ne("shaka.net.HttpXHRPlugin",SD),SD.parse=py;var Iq=g.XMLHttpRequest;Qs("http",py,1,!0),Qs("https",py,1,!0),Qs("blob",py,1,!0);function AD(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function j_(e){return e.M().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Ha+":"+e.va}function bq(e,t){return rd(e.g.M(),e.g.Ha,e.g.va,t.streaming.retryParameters)}function ID(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function bD(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}ID.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function CD(e){var t=this;this.o=e,this.j=new Map,this.i=new Zl(function(){return Z_(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new ID}CD.prototype.destroy=function(){return this.i.destroy()};function Cq(e,t,n){e.m=t,e.l=n}function Z_(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function Rq(e,t,n,r,u,c){Zr(e.i);var f=(e.j.get(t)||Promise.resolve()).then(function(){var h,v,A,N,B,z,J;return Ne(function(fe){if(fe.g==1)return R(fe,Nq(e,n),2);if(h=fe.h,e.i.g)throw new Ye(2,9,7001);if(u)for(N in v=nr(h),A=new Ve(v),A.data)B=Number(N),z=A.data[B],J=A.g[B],e.l(z,J);e.g.close(r,h.byteLength);var pe=e.g;return e.m(pe.i==0?0:pe.j/pe.i,e.g.h),fe.return(c(h))})});e.j.set(t,f)}function xq(e){return Ne(function(t){return t.g==1?R(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function Nq(e,t){var n,r,u,c;return Ne(function(f){return f.g==1?(n=$a,r=e.o.request(n,t),u=function(){return r.abort()},e.h.push(u),R(f,r.promise,2)):(c=f.h,Kn(e.h,u),f.return(c.data))})}function gy(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Lr,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}gy.prototype.abort=function(){var e=this;return Ne(function(t){if(t.g==1){try{e.i.abort()}catch(n){}return ce(t,2),R(t,e.g,4)}if(t.g!=2)return ye(t,0);be(t),X(t)})};function q_(e,t){return new Promise(function(n,r){var u=e.h.openCursor();u.onerror=r,u.onsuccess=function(){var c;return Ne(function(f){if(f.g==1)return u.result==null?(n(),f.return()):(c=u.result,R(f,t(c.key,c.value,c),2));c.continue(),X(f)})}})}gy.prototype.store=function(){return this.h},gy.prototype.promise=function(){return this.g};function G_(e){this.h=e,this.g=[]}G_.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Bc(e,t){return my(e,t,"readwrite")}function my(e,t,n){n=e.h.transaction([t],n);var r=new gy(n,t);return e.g.push(r),r.promise().then(function(){Kn(e.g,r)},function(){Kn(e.g,r)}),r}function jc(e,t,n){this.h=new G_(e),this.i=t,this.g=n}p=jc.prototype,p.destroy=function(){return this.h.destroy()},p.hasFixedKeySpace=function(){return!0},p.addSegments=function(){return RD(this.i)},p.removeSegments=function(e,t){return xD(this,this.i,e,t)},p.getSegments=function(e){var t=this,n;return Ne(function(r){return r.g==1?R(r,ND(t,t.i,e),2):(n=r.h,r.return(n.map(function(u){return t.lg(u)})))})},p.addManifests=function(){return RD(this.g)},p.updateManifest=function(){return Promise.reject(new Ye(2,9,9016,"Cannot modify values in "+this.g))};function Mq(e,t,n){e=Bc(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}p.updateManifestExpiration=function(e,t){var n=Bc(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=t,r.put(u,e))},n.promise()},p.removeManifests=function(e,t){return xD(this,this.g,e,t)},p.getManifests=function(e){var t=this,n;return Ne(function(r){return r.g==1?R(r,ND(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(u){return t.Xc(u)}))))})},p.getAllManifests=function(){var e=this,t,n;return Ne(function(r){return r.g==1?(t=my(e.h,e.g,"readonly"),n=new Map,R(r,q_(t,function(u,c){var f;return Ne(function(h){if(h.g==1)return R(h,e.Xc(c),2);f=h.h,n.set(u,f),X(h)})}),2)):r.g!=3?R(r,t.promise(),3):r.return(n)})},p.lg=function(e){return e},p.Xc=function(e){return Promise.resolve(e)};function RD(e){return Promise.reject(new Ye(2,9,9011,"Cannot add new value to "+e))}p.add=function(e,t){var n=this,r,u,c,f,h,v,A;return Ne(function(N){if(N.g==1){for(r=Bc(n.h,e),u=r.store(),c=[],f=m(t),h=f.next(),v={};!h.done;v={If:void 0},h=f.next())A=h.value,v.If=u.add(A),v.If.onsuccess=function(B){return function(){c.push(B.If.result)}}(v);return R(N,r.promise(),2)}return N.return(c)})};function xD(e,t,n,r){e=Bc(e.h,t),t=e.store(),n=m(n);for(var u=n.next(),c={};!u.done;c={tf:void 0},u=n.next())c.tf=u.value,t.delete(c.tf).onsuccess=function(f){return function(){return r(f.tf)}}(c);return e.promise()}function ND(e,t,n){var r,u,c,f,h,v,A;return Ne(function(N){if(N.g==1){for(r=my(e.h,t,"readonly"),u=r.store(),c={},f=[],h=m(n),v=h.next(),A={};!v.done;A={ie:void 0,Qd:void 0},v=h.next())A.Qd=v.value,A.ie=u.get(A.Qd),A.ie.onsuccess=function(B){return function(){B.ie.result==null&&f.push(B.Qd),c[B.Qd]=B.ie.result}}(A);return R(N,r.promise(),2)}if(f.length)throw new Ye(2,9,9012,"Could not find values for "+f);return N.return(n.map(function(B){return c[B]}))})}function Hp(e){this.g=new G_(e)}Hp.prototype.destroy=function(){return this.g.destroy()},Hp.prototype.getAll=function(){var e=this,t,n;return Ne(function(r){return r.g==1?(t=my(e.g,"session-ids","readonly"),n=[],R(r,q_(t,function(u,c){n.push(c)}),2)):r.g!=3?R(r,t.promise(),3):r.return(n)})},Hp.prototype.add=function(e){var t=Bc(this.g,"session-ids"),n=t.store();e=m(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},Hp.prototype.remove=function(e){var t=this,n;return Ne(function(r){return r.g==1?(n=Bc(t.g,"session-ids"),R(r,q_(n,function(u,c,f){e.includes(c.sessionId)&&f.delete()}),2)):R(r,n.promise(),0)})};function Xo(){this.g=new Map}Xo.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Xo.prototype.init=function(){var e=this;Vp.forEach(function(u,c){(u=u())&&e.g.set(c,u)});for(var t=[],n=m(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function MD(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){u.hasFixedKeySpace()||t||(t={path:{ob:r,Ia:c},Ia:u})})}),t)return t;throw new Ye(2,9,9013,"Could not find a cell that supports add-operations")}function Dq(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){t({ob:r,Ia:c},u)})})}function vy(e,t,n){if(e=e.g.get(t),!e)throw new Ye(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new Ye(2,9,9013,"Could not find cell with name "+n);return t}function Pq(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function Oq(e){var t=Array.from(e.g.keys());if(!t.length)throw new Ye(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function Lq(e){var t,n,r;return Ne(function(u){return u.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=Vp,r.forEach(function(c){(c=c())&&t.push(c)})),R(u,Promise.all(t.map(function(c){return c.erase()})),2)):n?u.u(0):R(u,Promise.all(t.map(function(c){return c.destroy()})),0)})}function DD(e,t){Vp.set(e,t)}ne("shaka.offline.StorageMuxer",Xo),Xo.unregister=function(e){Vp.delete(e)},Xo.register=DD,Xo.prototype.destroy=Xo.prototype.destroy;var Vp=new Map;function Kp(){jc.apply(this,arguments)}Y(Kp,jc),Kp.prototype.updateManifestExpiration=function(e,t){var n=this,r,u,c;return Ne(function(f){return r=Bc(n.h,n.g),u=r.store(),c=new Lr,u.get(e).onsuccess=function(h){(h=h.target.result)?(h.expiration=t,u.put(h),c.resolve()):c.reject(new Ye(2,9,9012,"Could not find values for "+e))},R(f,Promise.all([r.promise(),c]),0)})},Kp.prototype.Xc=function(e){var t,n,r,u,c,f;return Ne(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime,c=kq(e.periods[n],u),t.push(c);return R(h,lM(t),2)}return f=h.h,h.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:f,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function kq(e,t){Uq(e);for(var n=m(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(u){return Fq(u,e.startTime,t)})}function Fq(e,t,n){var r=e.initSegmentUri?PD(e.initSegmentUri):null,u=t+e.presentationTimeOffset,c=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(f){var h=PD(f.uri);return{startTime:t+f.startTime,endTime:t+f.endTime,dataKey:h,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:c,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Kp.prototype.lg=function(e){return{data:e.data}};function PD(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Ye(2,9,9004,"Could not parse uri "+e)}function Uq(e){var t=e.streams.filter(function(h){return h.contentType=="audio"});if(e=e.streams.filter(function(h){return h.contentType=="video"}),!t.every(function(h){return h.variantIds})||!e.every(function(h){return h.variantIds})){for(var n=m(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=m(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){r=n++;for(var u=m(e),c=u.next();!c.done;c=u.next())c.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,u=m(t),c=u.next();!c.done;c=u.next())c.value.variantIds.push(r);if(e.length&&t.length)for(t=m(t),r=t.next();!r.done;r=t.next())for(r=r.value,u=m(e),c=u.next();!c.done;c=u.next()){c=c.value;var f=n++;r.variantIds.push(f),c.variantIds.push(f)}}}function yy(){jc.apply(this,arguments)}Y(yy,jc),yy.prototype.Xc=function(e){var t,n,r,u,c,f;return Ne(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime;for(var v=e.periods[n],A=[],N=m(v.streams),B=N.next();!B.done;B=N.next())B=B.value,B.variantIds.length!=0&&A.push(Bq(B,v.startTime,v.startTime+u));c=A,t.push(c)}return R(h,lM(t),2)}return f=h.h,h.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:f,sequenceMode:!1})})};function Bq(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function H_(){jc.apply(this,arguments)}Y(H_,jc),p=H_.prototype,p.hasFixedKeySpace=function(){return!1},p.addSegments=function(e){return this.add(this.i,e)},p.addManifests=function(e){return this.add(this.g,e)},p.updateManifest=function(e,t){return Mq(this,e,t)},p.Xc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function OD(){this.m=this.j=this.i=this.h=this.g=this.l=null}p=OD.prototype,p.init=function(){var e=this,t=new Lr,n=!1,r=new on(function(){n=!0,t.reject(new Ye(2,9,9017))});r.Z(5);var u=g.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!n){var c=u.result;e.l=c;var f=c.objectStoreNames;f=f.contains("manifest")&&f.contains("segment")?new Kp(c,"segment","manifest"):null,e.g=f,f=c.objectStoreNames,f=f.contains("manifest-v2")&&f.contains("segment-v2")?new yy(c,"segment-v2","manifest-v2"):null,e.h=f,f=c.objectStoreNames,f=f.contains("manifest-v3")&&f.contains("segment-v3")?new yy(c,"segment-v3","manifest-v3"):null,e.i=f,f=c.objectStoreNames,f=f.contains("manifest-v5")&&f.contains("segment-v5")?new H_(c,"segment-v5","manifest-v5"):null,e.j=f,c=c.objectStoreNames.contains("session-ids")?new Hp(c):null,e.m=c,r.stop(),t.resolve()}},u.onupgradeneeded=function(){for(var c=u.result,f=m(["segment-v5","manifest-v5","session-ids"]),h=f.next();!h.done;h=f.next())h=h.value,c.objectStoreNames.contains(h)||c.createObjectStore(h,{autoIncrement:!0})},u.onerror=function(c){n||(t.reject(new Ye(2,9,9001,u.error)),r.stop(),c.preventDefault())},t},p.destroy=function(){var e=this;return Ne(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return R(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return R(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return R(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return R(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return R(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),X(t)}})},p.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},p.getEmeSessionCell=function(){return this.m},p.erase=function(){var e=this;return Ne(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return R(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return R(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return R(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return R(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),R(t,jq(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,R(t,e.init(),0)}})};function jq(){var e=new Lr,t=g.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new Ye(2,9,9001,t.error)),n.preventDefault()},e}DD("idb",function(){return ri()||Rr()||!g.indexedDB?null:new OD});function Nu(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}Nu.prototype.ob=function(){return this.i},Nu.prototype.Ia=function(){return this.h},Nu.prototype.key=function(){return this.l},Nu.prototype.toString=function(){return this.j};function V_(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new Nu(t,n,r,Number(e[4])):null}function LD(e,t){this.h=e,this.g=t}function kD(e,t){var n=new rr(null,0);n.Za(t.duration);var r=t.streams.filter(function(A){return A.type=="audio"}),u=t.streams.filter(function(A){return A.type=="video"});r=Zq(e,r,u,n),u=t.streams.filter(function(A){return A.type==_r}).map(function(A){return Ey(e,A,n)});var c=t.streams.filter(function(A){return A.type=="image"}).map(function(A){return Ey(e,A,n)}),f=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var h=m(r.values()),v=h.next();!v.done;v=h.next())v=v.value,v.audio&&v.audio.encrypted&&(v.audio.drmInfos=f),v.video&&v.video.encrypted&&(v.video.drmInfos=f);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:u,imageStreams:c,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function Zq(e,t,n,r){for(var u=new Set,c=m(t),f=c.next();!f.done;f=c.next()){f=m(f.value.variantIds);for(var h=f.next();!h.done;h=f.next())u.add(h.value)}for(c=m(n),f=c.next();!f.done;f=c.next())for(f=m(f.value.variantIds),h=f.next();!h.done;h=f.next())u.add(h.value);for(c=new Map,u=m(u),f=u.next();!f.done;f=u.next())f=f.value,c.set(f,{id:f,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),u=t.next();!u.done;u=t.next())for(f=u.value,u=Ey(e,f,r),f=m(f.variantIds),h=f.next();!h.done;h=f.next())h=c.get(h.value),h.language=u.language,h.primary=h.primary||u.primary,h.audio=u;for(n=m(n),t=n.next();!t.done;t=n.next())for(u=t.value,t=Ey(e,u,r),u=m(u.variantIds),f=u.next();!f.done;f=u.next())f=c.get(f.value),f.primary=f.primary||t.primary,f.video=t;return c}function Ey(e,t,n){var r=t.segments.map(function(u){return qq(e,u,t)});return n.qd(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Mr(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Di(t.mimeType,t.codecs)])}}function qq(e,t,n){var r=new Nu("segment",e.h,e.g,t.dataKey);return e=new Qe(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?Gq(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function Gq(e,t){var n=new Nu("segment",e.h,e.g,t);return new Dn(function(){return[n.toString()]},0,null)}function FD(){this.g=null}p=FD.prototype,p.configure=function(){},p.start=function(e,t){var n=this,r,u,c,f,h,v,A;return Ne(function(N){switch(N.g){case 1:if(r=V_(e),n.g=r,r==null||r.g!="manifest")throw new Ye(2,1,9004,e);return u=new Xo,oe(N,2),R(N,u.init(),4);case 4:return R(N,vy(u,r.ob(),r.Ia()),5);case 5:return c=N.h,R(N,c.getManifests([r.key()]),6);case 6:return f=N.h,h=f[0],v=new LD(r.ob(),r.Ia()),A=kD(v,h),t.makeTextStreamsForClosedCaptions(A),N.return(A);case 2:return Xe(N),R(N,u.destroy(),7);case 7:Ie(N,0)}})},p.stop=function(){return Promise.resolve()},p.update=function(){},p.onExpirationUpdated=function(e,t){var n=this,r,u,c,f,h,v,A;return Ne(function(N){switch(N.g){case 1:return r=n.g,u=new Xo,ce(N,2,3),R(N,u.init(),5);case 5:return R(N,vy(u,r.ob(),r.Ia()),6);case 6:return c=N.h,R(N,c.getManifests([r.key()]),7);case 7:if(f=N.h,h=f[0],v=h.sessionIds.includes(e),A=h.expiration==null||h.expiration>t,!v||!A){N.u(3);break}return R(N,c.updateManifestExpiration(r.key(),t),3);case 3:return Xe(N),R(N,u.destroy(),10);case 10:Ie(N,0);break;case 2:be(N),N.u(3)}})},p.onInitialVariantChosen=function(){},p.banLocation=function(){},p.setMediaElement=function(){},Yn["application/x-offline-manifest"]=function(){return new FD};function UD(){}function BD(e){var t=V_(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Xs(e)):e=t&&t.g=="segment"?Hq(t.key(),t):$s(new Ye(2,1,9004,e)),e}function Hq(e,t){var n=new Xo;return Xs(void 0).Aa(function(){return n.init()}).Aa(function(){return vy(n,t.ob(),t.Ia())}).Aa(function(r){return r.getSegments([t.key()])}).Aa(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}ne("shaka.offline.OfflineScheme",UD),UD.plugin=BD,Qs("offline",BD);function jD(e,t,n){var r,u,c,f,h,v;return Ne(function(A){switch(A.g){case 1:r=[];for(var N=[],B=m(n),z=B.next();!z.done;z=B.next()){z=z.value;for(var J=!1,fe=m(N),pe=fe.next();!pe.done;pe=fe.next())if(pe=pe.value,Kq(pe.info,z)){pe.sessionIds.push(z.sessionId),J=!0;break}J||N.push({info:z,sessionIds:[z.sessionId]})}u=m(N),c=u.next();case 2:if(c.done){A.u(4);break}return f=c.value,h=Vq(e,t,f),R(A,h,5);case 5:v=A.h,r=r.concat(v),c=u.next(),A.u(2);break;case 4:return A.return(r)}})}function Vq(e,t,n){var r,u;return Ne(function(c){switch(c.g){case 1:return r=new je({Mb:t,onError:function(){},be:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ce(c,2),r.configure(e),R(c,Ae(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:ye(c,3);break;case 2:return be(c),R(c,r.destroy(),5);case 5:return c.return([]);case 3:return u=[],R(c,Promise.all(n.sessionIds.map(function(f){return Ne(function(h){if(h.g==1)return ce(h,2),R(h,ue(r,f),4);if(h.g!=2)return u.push(f),ye(h,0);be(h),X(h)})})),6);case 6:return R(c,r.destroy(),7);case 7:return c.return(u)}})}function Kq(e,t){function n(r,u){return r.robustness==u.robustness&&r.contentType==u.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Ln(e.audioCapabilities,t.audioCapabilities,n)&&Ln(e.videoCapabilities,t.videoCapabilities,n)}function zq(e,t,n){var r=t.presentationTimeline.getDuration();return t=ZD(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function K_(e,t){var n=kD(new LD(e.ob(),e.Ia()),t),r=t.appMetadata||{};return n=ZD(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function ZD(e){var t=[],n=Kf(e.variants);n=m(n);for(var r=n.next();!r.done;r=n.next())t.push(Fl(r.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(qf(n.value));return t}function Yq(){this.g={}}function Wq(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var u=n.bandwidth||393216,c=r.bandwidth||t.bandwidth-u;0>=c&&(c=t.bandwidth),e.g[n.id]=u,e.g[r.id]=c}}function $q(e,t){e.g[t.id]=t.bandwidth||2048}function qD(e,t){return e=e.g[t],e==null&&(e=0),e}function po(e){var t=this;if(e&&e.constructor!=hn)throw new Ye(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.yb()):(this.h=ad(),this.g=new Kr),this.i=[],this.j=[];var n=!e;this.l=new Zl(function(){var r,u,c,f,h;return Ne(function(v){switch(v.g){case 1:return R(v,Promise.all(t.j.map(function(A){return Z_(A)})),2);case 2:for(r=function(){},u=[],c=m(t.i),f=c.next();!f.done;f=c.next())h=f.value,u.push(h.then(r,r));return R(v,Promise.all(u),3);case 3:if(!n){v.u(4);break}return R(v,t.g.destroy(),4);case 4:t.h=null,t.g=null,X(v)}})})}function z_(){if(tr())e:{for(var e=m(Vp.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}p=po.prototype,p.destroy=function(){return this.l.destroy()},p.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=hv(e,t)),Gl(this.h,e)},p.getConfiguration=function(){var e=ad();return Gl(e,this.h,ad()),e},p.yb=function(){return this.g},p.store=function(e,t,n){var r=this,u=this.getConfiguration(),c=new CD(this.g);return this.j.push(c),t=Xq(this,e,t||{},function(){var f;return Ne(function(h){return h.g==1?n?h.u(2):R(h,vv(e,r.g,u.manifest.retryParameters),3):(h.g!=2&&(n=h.h),f=qn(e,n||null),h.return(f()))})},u,c),t=new pi(t,function(){return Z_(c)}),t.finally(function(){Kn(r.j,c)}),cG(this,t)};function Xq(e,t,n,r,u,c){var f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt;return Ne(function(Fe){switch(Fe.g){case 1:return _y(),h=f=null,v=new Xo,B=N=A=null,ce(Fe,2,3),R(Fe,r(),5);case 5:return f=Fe.h,R(Fe,aG(e,t,f,u),6);case 6:if(z=Fe.h,Ro(e),J=!z.presentationTimeline.U()&&!z.presentationTimeline.pc(),!J)throw new Ye(2,9,9005,t);return R(Fe,e.Bc(z,function($e){B=B||$e},u),7);case 7:if(h=Fe.h,Ro(e),B)throw B;return R(Fe,Jq(z,h,u),8);case 8:return R(Fe,v.init(),9);case 9:return Ro(e),R(Fe,MD(v),10);case 10:return A=Fe.h,Ro(e),fe=eG(h,z,t,n,u,c),pe=fe.ri,Ee=fe.Wf,R(Fe,A.Ia.addManifests([pe]),11);case 11:if(Oe=Fe.h,Ro(e),N=Oe[0],Ro(e),B)throw B;return R(Fe,Qq(e,Ee,N,pe,c,u,A.Ia,z,h),12);case 12:return Ro(e),KD(z,pe,h,u),R(Fe,A.Ia.updateManifest(N,pe),13);case 13:return Ro(e),ke=new Nu("manifest",A.path.ob,A.path.Ia,N),Fe.return(K_(ke,pe));case 3:return Xe(Fe),R(Fe,v.destroy(),14);case 14:if(!f){Fe.u(15);break}return R(Fe,f.stop(),15);case 15:if(!h){Fe.u(17);break}return R(Fe,h.destroy(),17);case 17:Ie(Fe,0);break;case 2:if(rt=be(Fe),N==null){Fe.u(19);break}return R(Fe,GD(N),19);case 19:throw B||rt}})}function Qq(e,t,n,r,u,c,f,h,v){var A,N,B,z,J,fe,pe,Ee,Oe,ke;return Ne(function(rt){switch(rt.g){case 1:if(A={},N=0,B=function(Fe,$e){var nt,ct,gt,Lt,It,Ut,Nt;return Ne(function(tn){if(tn.g==1){for(nt=m(Fe),ct=nt.next(),gt={};!ct.done;gt={Dc:void 0},ct=nt.next())gt.Dc=ct.value,Lt=bq(gt.Dc,c),It=gt.Dc.i,Ut=gt.Dc.h,Nt=function(Ht){return function(Wt){var En,An,Vn;return Ne(function(Qn){if(Qn.g==1)return R(Qn,f.addSegments([{data:Wt}]),2);En=Qn.h,Ro(e),An=Ht.Dc.g,Vn=j_(An),A[Vn]=En[0],N+=Wt.byteLength,X(Qn)})}}(gt),Rq(u,gt.Dc.groupId,Lt,It,Ut,Nt);return R(tn,xq(u),2)}return $e?(Ro(e),KD(h,r,v,c),R(tn,f.updateManifest(n,r),0)):tn.u(0)})},z=!1,ce(rt,2),!Y_(h)||!z||VD(h)){rt.u(4);break}return R(rt,B(t.filter(function(Fe){return Fe.h}),!0),5);case 5:return Ro(e),t=t.filter(function(Fe){return!Fe.h}),J=A,fe=N,A={},N=0,R(rt,HD(f,n,r,J,fe,function(){return Ro(e)}),6);case 6:Ro(e);case 4:if(z){rt.u(7);break}return R(rt,B(t,!1),8);case 8:return Ro(e),pe=A,Ee=N,A={},N=0,R(rt,HD(f,n,r,pe,Ee,function(){return Ro(e)}),9);case 9:Ro(e);case 7:ye(rt,0);break;case 2:return Oe=be(rt),ke=Object.values(A),R(rt,f.removeSegments(ke,function(){}),10);case 10:throw Oe}})}function GD(e){var t,n,r,u;return Ne(function(c){switch(c.g){case 1:return t=new Xo,R(c,t.init(),2);case 2:return R(c,MD(t),3);case 3:return n=c.h,r=new Nu("manifest",n.path.ob,n.path.Ia,e),R(c,t.destroy(),4);case 4:return u=new po,R(c,u.remove(r.toString()),0)}})}function HD(e,t,n,r,u,c){var f,h,v,A,N,B,z,J,fe,pe,Ee;return Ne(function(Oe){switch(Oe.g){case 1:for(f=!1,ce(Oe,2),h=!0,v=m(n.streams),A=v.next();!A.done;A=v.next())for(N=A.value,B=m(N.segments),z=B.next();!z.done;z=B.next())J=z.value,fe=J.pendingSegmentRefId?r[J.pendingSegmentRefId]:null,fe!=null&&(J.dataKey=fe,J.pendingSegmentRefId=void 0),fe=J.pendingInitSegmentRefId?r[J.pendingInitSegmentRefId]:null,fe!=null&&(J.initSegmentKey=fe,J.pendingInitSegmentRefId=void 0),J.pendingSegmentRefId&&(h=!1),J.pendingInitSegmentRefId&&(h=!1);return n.size+=u,h&&(n.isIncomplete=!1),R(Oe,e.updateManifest(t,n),4);case 4:f=!0,c(),ye(Oe,0);break;case 2:return pe=be(Oe),R(Oe,GD(t),5);case 5:if(f){Oe.u(6);break}return Ee=Object.values(r),R(Oe,e.removeSegments(Ee,function(){}),6);case 6:throw pe}})}function Jq(e,t,n){var r,u,c,f,h,v,A,N,B,z,J,fe,pe,Ee,Oe,ke,rt,Fe,$e,nt,ct,gt,Lt,It,Ut,Nt,tn,Ht,Wt;return Ne(function(En){switch(En.g){case 1:return r={width:1/0,height:1/0},qE(e,n.restrictions,r),R(En,Zf(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(u=[],c=n.preferredDecodingAttributes,f=n.preferredVideoCodecs,h=n.preferredAudioCodecs,Rm(e,f,h,c),v=m(e.variants),A=v.next();!A.done;A=v.next())N=A.value,u.push(Fl(N));for(B=m(e.textStreams),z=B.next();!z.done;z=B.next())J=z.value,u.push(qf(J));for(fe=m(e.imageStreams),pe=fe.next();!pe.done;pe=fe.next())Ee=pe.value,u.push(Gf(Ee));return R(En,n.offline.trackSelectionCallback(u),3);case 3:for(Oe=En.h,ke=e.presentationTimeline.getDuration(),rt=0,Fe=m(Oe),$e=Fe.next();!$e.done;$e=Fe.next())nt=$e.value,ct=nt.bandwidth*ke/8,rt+=ct;return ce(En,4),R(En,n.offline.downloadSizeCallback(rt),6);case 6:if(gt=En.h,!gt)throw new Ye(2,9,9014);ye(En,5);break;case 4:throw Lt=be(En),Lt instanceof Ye?Lt:new Ye(2,9,9015);case 5:for(It=new Set,Ut=new Set,Nt=new Set,tn=m(Oe),Ht=tn.next();!Ht.done;Ht=tn.next())Wt=Ht.value,Wt.type=="variant"&&It.add(Wt.id),Wt.type=="text"&&Ut.add(Wt.id),Wt.type=="image"&&Nt.add(Wt.id);e.variants=e.variants.filter(function(An){return It.has(An.id)}),e.textStreams=e.textStreams.filter(function(An){return Ut.has(An.id)}),e.imageStreams=e.imageStreams.filter(function(An){return Nt.has(An.id)}),hG(e),X(En)}})}function eG(e,t,n,r,u,c){var f=zq(n,t,r),h=u.offline.progressCallback;Cq(c,function(J,fe){f.size=fe,h(f,J)},function(J,fe){v&&u.offline.usePersistentLicense&&A==fe&&De(e,"cenc",J)});var v=Y_(t)&&!VD(t),A=null;v&&(A=pG.get(e.g.keySystem));for(var N=new Yq,B=m(t.textStreams),z=B.next();!z.done;z=B.next())N.g[z.value.id]=52;for(B=m(t.imageStreams),z=B.next();!z.done;z=B.next())$q(N,z.value);for(B=m(t.variants),z=B.next();!z.done;z=B.next())Wq(N,z.value);return N=sG(c,N,t,u),c=N.streams,N=N.Wf,B=e.g,z=u.offline.usePersistentLicense,B&&z&&(B.initData=[]),{ri:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ad(),streams:c,sessionIds:z?Ce(e):[],drmInfo:B,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Wf:N}}function Y_(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function VD(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function KD(e,t,n,r){if(t.expiration=n.ad(),n=Ce(n),t.sessionIds=r.offline.usePersistentLicense?n:[],Y_(e)&&r.offline.usePersistentLicense&&!n.length)throw new Ye(2,9,9007)}p.remove=function(e){return W_(this,tG(this,e))};function tG(e,t){var n,r,u,c,f,h;return Ne(function(v){switch(v.g){case 1:if(_y(),n=V_(t),n==null||n.g!="manifest")throw new Ye(2,9,9004,t);return r=n,u=new Xo,oe(v,2),R(v,u.init(),4);case 4:return R(v,vy(u,r.ob(),r.Ia()),5);case 5:return c=v.h,R(v,c.getManifests([r.key()]),6);case 6:return f=v.h,h=f[0],R(v,Promise.all([nG(e,h,u),rG(c,r,h)]),2);case 2:return Xe(v),R(v,u.destroy(),8);case 8:Ie(v,0)}})}function zD(e,t){for(var n=[],r=m(e.streams),u=r.next();!u.done;u=r.next())u=u.value,t&&u.type=="video"?n.push({contentType:Di(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):t||u.type!="audio"||n.push({contentType:Di(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return n}function nG(e,t,n){return Ne(function(r){return R(r,dG(e.g,e.h.drm,n,t),0)})}function rG(e,t,n){function r(){}var u=fG(n);return K_(t,n),Promise.all([e.removeSegments(u,r),e.removeManifests([t.key()],r)])}p.Ji=function(){return W_(this,iG(this))};function iG(e){var t,n,r,u,c,f,h,v,A,N;return Ne(function(B){switch(B.g){case 1:return _y(),t=e.g,n=e.h.drm,r=new Xo,u=!1,oe(B,2),R(B,r.init(),4);case 4:c=[],Pq(r,function(z){return c.push(z)}),f=m(c),h=f.next();case 5:if(h.done){B.u(2);break}return v=h.value,R(B,v.getAll(),8);case 8:return A=B.h,R(B,jD(n,t,A),9);case 9:return N=B.h,R(B,v.remove(N),10);case 10:N.length!=A.length&&(u=!0),h=f.next(),B.u(5);break;case 2:return Xe(B),R(B,r.destroy(),11);case 11:Ie(B,3);break;case 3:return B.return(!u)}})}p.list=function(){return W_(this,oG())};function oG(){var e,t,n;return Ne(function(r){switch(r.g){case 1:return _y(),e=[],t=new Xo,oe(r,2),R(r,t.init(),4);case 4:return n=Promise.resolve(),Dq(t,function(u,c){n=n.then(function(){var f;return Ne(function(h){if(h.g==1)return R(h,c.getAllManifests(),2);f=h.h,f.forEach(function(v,A){v=K_(new Nu("manifest",u.ob,u.Ia,A),v),e.push(v)}),X(h)})})}),R(r,n,2);case 2:return Xe(r),R(r,t.destroy(),6);case 6:Ie(r,3);break;case 3:return r.return(e)}})}function aG(e,t,n,r){var u,c,f,h,v;return Ne(function(A){if(A.g==1)return u=null,c=e.g,f={networkingEngine:c,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(N){u=N},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(r.manifest),Ro(e),R(A,n.start(t,f),2);if(A.g!=3)return h=A.h,Ro(e),v=YD(h),R(A,Promise.all(ip(v,function(N){return N.createSegmentIndex()})),3);if(Ro(e),u)throw u;return A.return(h)})}p.Bc=function(e,t,n){var r=this,u;return Ne(function(c){return c.g==1?(u=new je({Mb:r.g,onError:t,be:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),u.configure(n.drm),R(c,Se(u,e.variants,n.offline.usePersistentLicense),2)):c.g!=3?R(c,te(u),3):c.return(u)})};function sG(e,t,n,r){var u=new Map,c=YD(n),f=new Map;c=m(c);for(var h=c.next();!h.done;h=c.next()){h=h.value;var v=uG(e,t,n,h,r,u);f.set(h.id,v)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&f.get(t.audio.id).variantIds.push(t.id),t.video&&f.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(f.values()),Wf:Array.from(u.values())}}function uG(e,t,n,r,u,c){var f={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},h=u.offline.numberOfParallelDownloads,v=h===0?r.id:0;return lG(r,n.presentationTimeline.nb(),function(A){var N=j_(A),B=void 0;if(!c.has(N)){var z=A.endTime-A.startTime;z=qD(t,r.id)*z,z=bD(e.g,z),c.set(N,new AD(A,z,v,!1))}A.$&&(B=j_(A.$),c.has(B)||(z=.5*qD(t,r.id),z=bD(e.g,z),c.set(B,new AD(A.$,z,v,!0)))),f.segments.push({pendingInitSegmentRefId:B,initSegmentKey:B?0:null,startTime:A.startTime,endTime:A.endTime,appendWindowStart:A.appendWindowStart,appendWindowEnd:A.appendWindowEnd,timestampOffset:A.timestampOffset,tilesLayout:A.tilesLayout,pendingSegmentRefId:N,dataKey:0,mimeType:A.mimeType,codecs:A.codecs}),h!==0&&(v=(v+1)%h)}),f}function lG(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function Ro(e){if(e.l.g)throw new Ye(2,9,7001)}function _y(){if(!z_())throw new Ye(2,9,9e3)}function W_(e,t){return Ne(function(n){return n.g==1?(e.i.push(t),oe(n,2),R(n,t,4)):n.g!=2?n.return(n.h):(Xe(n),Kn(e.i,t),Ie(n,0))})}function cG(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Kn(e.i,n)})}function fG(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function dG(e,t,n,r){var u,c,f;return Ne(function(h){return h.g==1?r.drmInfo?(u=Oq(n),c=r.sessionIds.map(function(v){return{sessionId:v,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:zD(r,!1),videoCapabilities:zD(r,!0)}}),R(h,jD(t,e,c),2)):h.return():h.g!=3?(f=h.h,R(h,u.remove(f),3)):R(h,u.add(c.filter(function(v){return!f.includes(v.sessionId)})),0)})}function YD(e){for(var t=new Set,n=m(e.variants),r=n.next();!r.done;r=n.next())r=r.value,r.audio&&t.add(r.audio),r.video&&t.add(r.video);for(n=m(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=m(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function hG(e){e.variants.map(function(c){return c.video});var t=new Set(e.variants.map(function(c){return c.audio}));e=e.textStreams;for(var n=m(t),r=n.next();!r.done;r=n.next()){r=m(t);for(var u=r.next();!u.done;u=r.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),r=n.next();!r.done;r=n.next());}ne("shaka.offline.Storage",po),po.deleteAll=function(){var e;return Ne(function(t){return t.g==1?(e=new Xo,oe(t,2),R(t,Lq(e),2)):t.g!=5?(Xe(t),R(t,e.destroy(),5)):Ie(t,0)})},po.prototype.list=po.prototype.list,po.prototype.removeEmeSessions=po.prototype.Ji,po.prototype.remove=po.prototype.remove,po.prototype.store=po.prototype.store,po.prototype.getNetworkingEngine=po.prototype.yb,po.prototype.getConfiguration=po.prototype.getConfiguration,po.prototype.configure=po.prototype.configure,po.prototype.destroy=po.prototype.destroy,po.support=z_;var pG=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");K1.offline=z_;function xo(){}function Qo(e,t){for(e={priority:t||0,callback:e},t=0;t<zp.length;t++)if(zp[t].priority<e.priority){zp.splice(t,0,e);return}zp.push(e)}ne("shaka.polyfill",xo),xo.register=Qo,xo.installAll=function(){for(var e=m(zp),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){He("Error installing polyfill!",n)}}};var zp=[];function WD(){}function $D(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=m(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())gG(t.value)}function gG(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}xo.Aria=WD,WD.install=$D,Qo($D);function XD(){}function QD(){fP()}xo.EncryptionScheme=XD,XD.install=QD,Qo(QD,-2);function JD(){}function e2(){if(g.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",xd),document.addEventListener("webkitfullscreenerror",xd),document.addEventListener("mozfullscreenchange",xd),document.addEventListener("mozfullscreenerror",xd),document.addEventListener("MSFullscreenChange",xd),document.addEventListener("MSFullscreenError",xd)}}function xd(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}xo.Fullscreen=JD,JD.install=e2,Qo(e2);function Ty(){}function t2(){var e=!0;!ri()||ri()&&Gu()||ri()&&sn("Fuchsia")||(e=!1),(Ao()||Yo()||Ri()||li()||di()||sn("PC=EOS")||qu())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),n2=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=mG)}function mG(e){var t,n,r,u,c,f,h,v,A,N,B;return Ne(function(z){switch(z.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,r=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(u=n.contentType,c=ur(u),!c)||r&&(f=r.contentType,h=ur(f),!h))return z.return(t)}else return z.return(t);z.u(2);break}if(!tr())return z.return(t);if(!n){z.u(3);break}return R(z,vG(n),4);case 4:if(v=z.h,!v)return z.return(t);case 3:if(r){var J=r.contentType;if(ri()&&r.spatialRendering&&(J+="; spatialRendering=true"),A=Ft(J),!A)return z.return(t)}case 2:return e.keySystemConfiguration?(N=e.keySystemConfiguration,R(z,yG(n,r,N),6)):(t.supported=!0,z.return(t));case 6:(B=z.h)&&(t.supported=!0,t.keySystemAccess=B);case 5:return z.return(t)}})}function vG(e){var t,n;return Ne(function(r){return r.g==1?ri()?R(r,EG(e),3):di()?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width,t+="; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.bitrate&&(t+="; bitrate="+e.bitrate),r.return(Ft(t))):r.u(2):r.g!=2?(n=r.h,r.return(n)):r.return(Ft(e.contentType))})}function yG(e,t,n){var r,u,c,f,h,v,A,N,B;return Ne(function(z){switch(z.g){case 1:if(r=[],u=[],n.audio&&(c={robustness:n.audio.robustness||"",contentType:t.contentType},di()&&t.contentType.includes('codecs="ac-3"')&&(c.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(c.encryptionScheme=n.audio.encryptionScheme),r.push(c)),n.video&&(f={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(f.encryptionScheme=n.video.encryptionScheme),u.push(f)),h={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(h.audioCapabilities=r),u.length&&(h.videoCapabilities=u),v=e?e.contentType:"",A=t?t.contentType:"",N=n.keySystem,B=null,ce(z,2),dn.has(v+"#"+A+"#"+N)){B=dn.get(v+"#"+A+"#"+N)||null,z.u(4);break}return R(z,navigator.requestMediaKeySystemAccess(n.keySystem,[h]),5);case 5:B=z.h,dn.set(v+"#"+A+"#"+N,B);case 4:ye(z,3);break;case 2:be(z);case 3:return z.return(B)}})}function EG(e){var t,n;return Ne(function(r){return r.g==1?g.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.transferFunction==="pq"&&(t+="; eotf=smpte2084"),n=!1,t in Sy?(n=Sy[t],r.u(2)):R(r,cast.__platform__.canDisplayType(t),3)):r.return(Ft(e.contentType)):(r.g!=2&&(n=r.h,Sy[t]=n),r.return(n))})}xo.MediaCapabilities=Ty,Ty.install=t2;var n2=null;Ty.originalMcap=n2;var Sy={};Ty.memoizedCanDisplayTypeRequests_=Sy,Qo(t2,-1);function r2(){}function i2(){var e=qs();(g.MediaSource||g.ManagedMediaSource)&&(e&&g.MediaSource?10>=e?g.MediaSource=null:12>=e?($_(),o2()):15>=e&&$_():sn("DT_STB_BCM")?($_(),o2()):(ni()||Ui()||sn("Tizen 4"))&&TG()),(g.MediaSource||g.ManagedMediaSource)&&_G(),g.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&SG()}function $_(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,et.apply(0,arguments));return t.abort=function(){},t}}function o2(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function _G(){if(g.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return kl(n)!="mp2t"&&e(n)}}if(g.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);g.ManagedMediaSource.isTypeSupported=function(n){return kl(n)!="mp2t"&&t(n)}}}function TG(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Ys(n)!="opus"&&e(n)},g.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);g.ManagedMediaSource.isTypeSupported=function(n){return Ys(n)!="opus"&&t(n)}}}function SG(){var e=MediaSource.isTypeSupported;li()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(f){return f.startsWith("codecs=")});if(0>r)return e(t);var u=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),c=u.findIndex(function(f){return f.startsWith("vp09")});return 0<=c&&(u[c]="vp9",n[r]='codecs="'+u.join(",")+'"',t=n.join("; ")),e(t)})}xo.MediaSource=r2,r2.install=i2,Qo(i2);function a2(){}function s2(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?wG():g.orientation!=null&&AG())}function wG(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function AG(){function e(){switch(g.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new wy;screen.orientation=t,e(),g.addEventListener("orientationchange",function(){e();var n=new jn("change");t.dispatchEvent(n)})}xo.Orientation=a2,a2.install=s2;function wy(){Nr.call(this),this.type="",this.angle=0}Y(wy,Nr),wy.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},wy.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Qo(s2);function X_(){}var Q_,J_,eT,tT,nT,rT;function IG(e,t){try{var n=new Ay(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function bG(e){var t=this.mediaKeys;return t&&t!=e&&u2(t,null),delete this.mediaKeys,(this.mediaKeys=e)?u2(e,this):Promise.resolve()}function CG(e){if(e=nr(e.initData),ln(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=ci(e.subarray(4),!0),e=bi(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Ni(e),this.dispatchEvent(t)}xo.PatchedMediaKeysApple=X_,X_.uninstall=function(){Q_&&(Q_=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",J_),HTMLMediaElement.prototype.setMediaKeys=eT,g.MediaKeys=tT,g.MediaKeySystemAccess=nT,navigator.requestMediaKeySystemAccess=rT,J_=rT=eT=nT=tT=null,g.shakaMediaKeysPolyfill="")},X_.install=function(e){g.HTMLVideoElement&&g.WebKitMediaKeys&&(e!==void 0&&e&&(Q_=!0,J_=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),eT=HTMLMediaElement.prototype.setMediaKeys,tT=g.MediaKeys,nT=g.MediaKeySystemAccess,rT=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=bG,g.MediaKeys=Yp,g.MediaKeySystemAccess=Ay,navigator.requestMediaKeySystemAccess=IG,g.shakaMediaKeysPolyfill=RG)};function Ay(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,u=!1;if(n.audioCapabilities)for(var c=m(n.audioCapabilities),f=c.next();!f.done;f=c.next())f=f.value,f.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,f.contentType.split(";")[0])&&(t.audioCapabilities.push(f),u=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),c=n.next();!c.done;c=n.next())c=c.value,c.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.videoCapabilities.push(c),u=!0));r||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=u?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Ay.prototype.createMediaKeys=function(){var e=new Yp(this.keySystem);return Promise.resolve(e)},Ay.prototype.getConfiguration=function(){return this.g};function Yp(e){this.h=new WebKitMediaKeys(e),this.g=new Et}Yp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new iT(this.h)},Yp.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function u2(e,t){if(e.g.Qa(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",CG);try{return nd(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}Yp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function iT(e){Nr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Et,this.sessionId="",this.expiration=NaN,this.closed=new Lr,this.keyStatuses=new l2}Y(iT,Nr),p=iT.prototype,p.generateRequest=function(e,t){var n=this;this.h=new Lr;try{var r=this.l.createSession("video/mp4",nr(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(u){n.h&&(n.h.resolve(),n.h=null),u=new Map().set("messageType",n.keyStatuses.Zb()==null?"license-request":"license-renewal").set("message",Ni(u.message)),u=new jn("message",u),n.dispatchEvent(u)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(Iy(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=n.i.error,n.h!=null)n.h.reject(u),n.h=null;else if(n.g!=null)n.g.reject(u),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Iy(n,"output-not-allowed");break;default:Iy(n,"internal-error")}}),Iy(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},p.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},p.update=function(e){this.g=new Lr;try{this.i.update(nr(e))}catch(t){this.g.reject(t)}return this.g},p.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Qa()}catch(e){this.closed.reject(e)}return this.closed},p.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Iy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new jn("keystatuseschange"),e.dispatchEvent(t)}function l2(){this.size=0,this.g=void 0}p=l2.prototype,p.Zb=function(){return this.g},p.forEach=function(e){this.g&&e(this.g,er.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var t=er.value();return!!(this.g&&no(e,t))},p.entries=function(){},p.keys=function(){},p.values=function(){};var RG="apple";function c2(){}function f2(){g.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||Ui()||sn("Tizen 4")||sn("Tizen 5.0")||vi())&&(MediaKeys.prototype.setServerCertificate=xG)}function xG(){return Promise.resolve(!1)}xo.PatchedMediaKeysCert=c2,c2.install=f2,Qo(f2);function d2(){}function h2(){!g.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=NG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=MG,g.MediaKeys=by,g.MediaKeySystemAccess=oT,g.shakaMediaKeysPolyfill=DG)}function NG(){return Promise.reject(Error("The key system specified is not supported."))}function MG(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}xo.PatchedMediaKeysNop=d2,d2.install=h2;function by(){throw new TypeError("Illegal constructor.")}by.prototype.createSession=function(){},by.prototype.setServerCertificate=function(){},by.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function oT(){throw this.keySystem="",new TypeError("Illegal constructor.")}oT.prototype.getConfiguration=function(){},oT.prototype.createMediaKeys=function(){};var DG="nop";Qo(h2,-10);function p2(){}function g2(){if(!(!g.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)cT="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=PG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=OG,g.MediaKeys=Wp,g.MediaKeySystemAccess=Cy,g.shakaMediaKeysPolyfill=LG}}function aT(e){var t=cT;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function PG(e,t){try{var n=new Cy(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function OG(e){var t=this.mediaKeys;return t&&t!=e&&m2(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&m2(e,this),Promise.resolve()}xo.PatchedMediaKeysWebkit=p2,p2.install=g2;function Cy(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),t=m(t);for(var c=t.next();!c.done;c=t.next()){c=c.value;var f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:c.initDataTypes,sessionTypes:["temporary"],label:c.label},h=!1;if(c.audioCapabilities)for(var v=m(c.audioCapabilities),A=v.next();!A.done;A=v.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType.split(";")[0],this.g)&&(f.audioCapabilities.push(A),r=!0));if(c.videoCapabilities)for(v=m(c.videoCapabilities),A=v.next();!A.done;A=v.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType,this.g)&&(f.videoCapabilities.push(A),r=!0));if(h||(r=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),c.persistentState=="required"&&(n?(f.persistentState="required",f.sessionTypes=["persistent-license"]):r=!1),r){this.h=f;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Cy.prototype.createMediaKeys=function(){var e=new Wp(this.g);return Promise.resolve(e)},Cy.prototype.getConfiguration=function(){return this.h};function Wp(e){this.l=e,this.h=null,this.g=new Et,this.i=[],this.j=new Map}function m2(e,t){e.h=t,e.g.Qa();var n=cT;t&&(e.g.D(t,n+"needkey",function(r){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=Ni(r.initData),e.h.dispatchEvent(u)}),e.g.D(t,n+"keymessage",function(r){var u=sT(e,r.sessionId);u&&(r=new Map().set("messageType",u.keyStatuses.Zb()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new jn("message",r),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=sT(e,r.sessionId))&&r.ready()}),e.g.D(t,n+"keyerror",function(r){var u=sT(e,r.sessionId);if(u){var c=Error("EME v0.1b key error"),f=r.errorCode;f.systemCode=r.systemCode,c.errorCode=f,!r.sessionId&&u.h?(r.systemCode==45&&(c.message="Unsupported session type."),u.h.reject(c),u.h=null):r.sessionId&&u.g?(u.g.reject(c),u.g=null):(c=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ry(u,"output-restricted"):c==1?Ry(u,"expired"):Ry(u,"internal-error"))}}))}Wp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new uT(t,this.l,e),this.i.push(e),e},Wp.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Wp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function sT(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function uT(e,t,n){Nr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Lr,this.keyStatuses=new y2}Y(uT,Nr),p=uT.prototype,p.ready=function(){Ry(this,"usable"),this.g&&this.g.resolve(),this.g=null};function v2(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=nr(bi("LOAD_SESSION|"+n));else{var u=bi("PERSISTENT|");r=hi(u,t)}else r=nr(t)}catch(f){return Promise.reject(f)}e.h=new Lr;var c=aT("generateKeyRequest");try{e.j[c](e.i,r)}catch(f){if(f.name!="InvalidStateError")return e.h=null,Promise.reject(f);new on(function(){try{e.j[c](e.i,r)}catch(h){e.h.reject(h),e.h=null}}).Z(.01)}return e.h}function lT(e,t,n){if(e.g)e.g.then(function(){return lT(e,t,n)}).catch(function(){return lT(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=Cr(n),u=JSON.parse(r);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Wo(u.keys[0].k),u=Wo(u.keys[0].kid)}else r=nr(n),u=null;var c=aT("addKey");try{e.j[c](e.i,r,u,e.sessionId)}catch(f){e.g.reject(f),e.g=null}}}function Ry(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new jn("keystatuseschange"),e.dispatchEvent(t)}p.generateRequest=function(e,t){return v2(this,t,null)},p.load=function(e){return this.l=="persistent-license"?v2(this,null,e):Promise.reject(Error("Not a persistent session."))},p.update=function(e){var t=new Lr;return lT(this,t,e),t},p.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=aT("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},p.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function y2(){this.size=0,this.g=void 0}p=y2.prototype,p.Zb=function(){return this.g},p.forEach=function(e){this.g&&e(this.g,er.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var t=er.value();return!!(this.g&&no(e,t))},p.entries=function(){},p.keys=function(){},p.values=function(){};var cT="",LG="webkit";Qo(g2);function E2(){}function _2(){if(g.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=FG,Object.defineProperty(e,"disablePictureInPicture",{get:BG,set:jG,enumerable:!0,configurable:!0}),document.exitPictureInPicture=UG,document.addEventListener("webkitpresentationmodechanged",kG,!0))}}function kG(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function FG(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function UG(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function BG(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function jG(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}xo.PiPWebkit=E2,E2.install=_2,Qo(_2);function T2(){}function S2(){g.crypto&&("randomUUID"in g.crypto||(g.crypto.randomUUID=ZG))}function ZG(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}xo.RandomUUID=T2,T2.install=S2,Qo(S2);function w2(){}function A2(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:qG})}function qG(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}xo.Symbol=w2,w2.install=A2,Qo(A2);function I2(){}function b2(){if(g.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}xo.VideoPlayPromise=I2,I2.install=b2,Qo(b2);function C2(){}function R2(){if(g.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||vi())&&(e.getVideoPlaybackQuality=GG)}}function GG(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}xo.VideoPlaybackQuality=C2,C2.install=R2,Qo(R2);function x2(){}function N2(){if(!g.VTTCue&&g.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=fT;else if(t==6)e=HG;else{try{var n=!!fT(1,2,"")}catch(r){n=!1}n&&(e=fT)}e&&(g.VTTCue=function(r,u,c){return e(r,u,c)})}}function fT(e,t,n){return new g.TextTrackCue(e,t,n)}function HG(e,t,n){return new g.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}xo.VTTCue=x2,x2.install=N2,Qo(N2);function Da(){}Da.prototype.parseInit=function(){},Da.prototype.setSequenceMode=function(){},Da.prototype.setManifestType=function(){},Da.prototype.parseMedia=function(e,t){var n=null,r=[];e=Cr(e).split(/\r?\n/),e=m(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=VG.exec(u))){var c=KG.exec(u[1]);c=60*parseInt(c[1],10)+parseFloat(c[2].replace(",",".")),u=new jr(c,t.segmentEnd?t.segmentEnd:c+2,u[2]),n&&(n.endTime=c,r.push(n)),n=u}return n&&r.push(n),r},ne("shaka.text.LrcTextParser",Da),Da.prototype.parseMedia=Da.prototype.parseMedia,Da.prototype.setManifestType=Da.prototype.setManifestType,Da.prototype.setSequenceMode=Da.prototype.setSequenceMode,Da.prototype.parseInit=Da.prototype.parseInit;var VG=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,KG=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;_i["application/x-subtitle-lrc"]=function(){return new Da};function ga(){}ga.prototype.parseInit=function(){},ga.prototype.setSequenceMode=function(){},ga.prototype.setManifestType=function(){},ga.prototype.parseMedia=function(e,t,n,r){var u=Cr(e);if(e=[],u=="")return e;var c=Su(u,"tt",!0);if(!c)throw new Ye(2,2,2005,"Failed to parse TTML.");if(u=Eo(c,"body")[0],!u)return[];var f=za(c,$p,"frameRate"),h=za(c,$p,"subFrameRate"),v=za(c,$p,"frameRateMultiplier"),A=za(c,$p,"tickRate"),N=za(c,$p,"cellResolution"),B=c.attributes["xml:space"]||"default",z=za(c,My,"extent");if(B!="default"&&B!="preserve")throw new Ye(2,2,2005,"Invalid xml:space value: "+B);B=B=="default",f=new XG(f,h,v,A),N=$G(N),h=Eo(c,"metadata")[0],h=(h?h.children:[]).filter(function(pe){return pe!="\n"}),v=Eo(c,"style"),c=Eo(c,"region"),A=[];for(var J=m(c),fe=J.next();!fe.done;fe=J.next())(fe=zG(fe.value,v,z))&&A.push(fe);if(sr(u,"p").length)throw new Ye(2,2,2001,"<p> can only be inside <div> in TTML");for(z=m(sr(u,"div")),J=z.next();!J.done;J=z.next())if(sr(J.value,"span").length)throw new Ye(2,2,2001,"<span> can only be inside <p> in TTML");return(t=M2(u,t,f,h,v,c,A,B,N,null,!1,n,r))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function M2(e,t,n,r,u,c,f,h,v,A,N,B,z){var J=A;if(Gs(e)){if(!N)return null;var fe={tagName:"span",children:[ei(e)],attributes:{},parent:null}}else fe=e;for(var pe=null,Ee=m(Z2),Oe=Ee.next();!Oe.done&&!(pe=Ny(fe,"backgroundImage",r,"#",Oe.value)[0]);Oe=Ee.next());Ee=null,Oe=za(fe,Z2,"backgroundImage");var ke=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(Oe&&ke.test(Oe)){if(Ee=parseInt(Oe.split(":").pop(),10)-1,Ee>=z.length)return null;Ee=z[Ee]}else B&&Oe&&!Oe.startsWith("#")&&(ke=new Ei(B),Oe=new Ei(Oe),(Oe=ke.resolve(Oe).toString())&&(Ee=Oe));if((e.tagName=="p"||pe||Ee)&&(N=!0),e=N,Oe=(fe.attributes["xml:space"]||(h?"default":"preserve"))=="default",ke=fe.children.every(Gs),h=[],!ke)for(var rt=m(fe.children),Fe=rt.next();!Fe.done;Fe=rt.next())(Fe=M2(Fe.value,t,n,r,u,c,f,Oe,v,fe,N,B,z))&&h.push(Fe);if(r=A!=null,B=ei(fe),B=fe.children.length&&B&&/\S/.test(B),rt=fe.attributes.begin||fe.attributes.end||fe.attributes.dur,!(rt||B||fe.tagName=="br"||h.length!=0||r&&!Oe))return null;for(z=O2(fe,n),B=z.start,z=z.end;J&&J.tagName&&J.tagName!="tt";)z=WG(J,n,B,z),B=z.start,z=z.end,J=J.parent;if(B==null&&(B=0),B+=t.periodStart,z=z==null?1/0:z+t.periodStart,B=Math.max(B,t.segmentStart),z=Math.min(z,t.segmentEnd),!rt&&0<h.length)for(B=1/0,z=0,t=m(h),n=t.next();!n.done;n=t.next())n=n.value,B=Math.min(B,n.startTime),z=Math.max(z,n.endTime);if(fe.tagName=="br")return u=new jr(B,z,""),u.lineBreak=!0,u;if(t="",ke&&(t=yi(ei(fe)||""),Oe&&(t=t.replace(/\s+/g," "))),t=new jr(B,z,t),t.nestedCues=h,N||(t.isContainer=!0),v&&(t.cellResolution=v),v=Ny(fe,"region",c,"")[0],fe.attributes.region&&v&&v.attributes["xml:id"]){var $e=v.attributes["xml:id"];t.region=f.filter(function(nt){return nt.id==$e})[0]}return f=v,A&&r&&!fe.attributes.region&&!fe.attributes.style&&(f=Ny(A,"region",c,"")[0]),YG(t,fe,f,pe,Ee,u,e,h.length==0),t}function zG(e,t,n){var r=new Kt,u=e.attributes["xml:id"];if(!u)return null;r.id=u,u=null,n&&(u=mT.exec(n)||vT.exec(n)),n=u?Number(u[1]):null,u=u?Number(u[2]):null;var c,f=xy(e,t,"extent");if(f){var h=(c=mT.exec(f))||vT.exec(f);h!=null&&(r.width=Number(h[1]),r.height=Number(h[2]),c||(n!=null&&(r.width=100*r.width/n),u!=null&&(r.height=100*r.height/u)),r.widthUnits=c||n!=null?wn:0,r.heightUnits=c||u!=null?wn:0)}return(e=xy(e,t,"origin"))&&(h=(c=mT.exec(e))||vT.exec(e),h!=null&&(r.viewportAnchorX=Number(h[1]),r.viewportAnchorY=Number(h[2]),c?f||(r.width=100-r.viewportAnchorX,r.widthUnits=wn,r.height=100-r.viewportAnchorY,r.heightUnits=wn):(u!=null&&(r.viewportAnchorY=100*r.viewportAnchorY/u),n!=null&&(r.viewportAnchorX=100*r.viewportAnchorX/n)),r.viewportAnchorUnits=c||n!=null?wn:0)),r}function dT(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),t.length==4)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function YG(e,t,n,r,u,c,f,h){if(f=f||h,No(t,n,c,"direction",f)=="rtl"&&(e.direction="rtl"),h=No(t,n,c,"writingMode",f),h=="tb"||h=="tblr"?e.writingMode="vertical-lr":h=="tbrl"?e.writingMode="vertical-rl":h=="rltb"||h=="rl"?e.direction="rtl":h&&(e.direction=Dl),(h=No(t,n,c,"textAlign",!0))?(e.positionAlign=e9[h],e.lineAlign=JG[h],e.textAlign=bf[h.toUpperCase()]):e.textAlign=Ca,(h=No(t,n,c,"displayAlign",!0))&&(e.displayAlign=mm[h.toUpperCase()]),(h=No(t,n,c,"color",f))&&(e.color=dT(h)),(h=No(t,n,c,"backgroundColor",f))&&(e.backgroundColor=dT(h)),(h=No(t,n,c,"border",f))&&(e.border=h),h=No(t,n,c,"fontFamily",f))switch(h){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=h.split(",").filter(function(v){return v!="default"}).join(",")}switch((h=No(t,n,c,"fontWeight",f))&&h=="bold"&&(e.fontWeight=Yu),h=No(t,n,c,"wrapOption",f),e.wrapLine=!(h&&h=="noWrap"),(h=No(t,n,c,"lineHeight",f))&&h.match(Nd)&&(e.lineHeight=h),(h=No(t,n,c,"fontSize",f))&&(h.match(Nd)||h.match(QG))&&(e.fontSize=h),(h=No(t,n,c,"fontStyle",f))&&(e.fontStyle=Rf[h.toUpperCase()]),r?(u=r.attributes.imageType||r.attributes.imagetype,h=r.attributes.encoding,r=ei(r).trim(),u=="PNG"&&h=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):u&&(e.backgroundImage=u),(r=No(t,n,c,"textOutline",f))&&(r=r.split(" "),r[0].match(Nd)?e.textStrokeColor=e.color:(e.textStrokeColor=dT(r[0]),r.shift()),r[0]&&r[0].match(Nd)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=No(t,n,c,"letterSpacing",f))&&r.match(Nd)&&(e.letterSpacing=r),(r=No(t,n,c,"linePadding",f))&&r.match(Nd)&&(e.linePadding=r),(r=No(t,n,c,"opacity",f))&&(e.opacity=parseFloat(r)),(r=xy(n,c,"textDecoration"))&&D2(e,r),(r=hT(t,c,"textDecoration"))&&D2(e,r),(r=No(t,n,c,"textCombine",f))&&(e.textCombineUpright=r),No(t,n,c,"ruby",f)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function D2(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(Ks)||e.textDecoration.push(Ks);break;case"noUnderline":e.textDecoration.includes(Ks)&&Kn(e.textDecoration,Ks);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Kn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Kn(e.textDecoration,"overline")}}function No(e,t,n,r,u){return u=u===void 0?!0:u,(e=hT(e,n,r))?e:u?xy(t,n,r):null}function xy(e,t,n){if(!e)return null;var r=za(e,My,n);return r||P2(e,t,n)}function hT(e,t,n){var r=za(e,My,n);return r||P2(e,t,n)}function P2(e,t,n){e=Ny(e,"style",t,"");for(var r=null,u=0;u<e.length;u++){var c=Po(e[u],"urn:ebu:tt:style",n);c||(c=za(e[u],My,n)),c||(c=hT(e[u],t,n)),c&&(r=c)}return r}function Ny(e,t,n,r,u){var c=[];if(!e||1>n.length)return c;var f=e;for(e=null;!e&&!(e=u?Po(f,u,t):f.attributes[t])&&(f=f.parent,f););if(t=e){for(t=m(t.split(" ")),u=t.next();!u.done;u=t.next())for(u=u.value,e=m(n),f=e.next();!f.done;f=e.next())if(f=f.value,r+f.attributes["xml:id"]==u){c.push(f);break}}return c}function WG(e,t,n,r){return e=O2(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function O2(e,t){var n=pT(e.attributes.begin,t),r=pT(e.attributes.end,t);return e=pT(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function pT(e,t){var n=null;if(L2.test(e)){e=L2.exec(e),n=Number(e[1]);var r=Number(e[2]),u=Number(e[3]),c=Number(e[4]);c+=(Number(e[5])||0)/t.h,u+=c/t.frameRate,n=u+60*r+3600*n}else if(k2.test(e))n=gT(k2,e);else if(F2.test(e))n=gT(F2,e);else if(U2.test(e))e=U2.exec(e),n=Number(e[1])/t.frameRate;else if(B2.test(e))e=B2.exec(e),n=Number(e[1])/t.g;else if(j2.test(e))n=gT(j2,e);else if(e)throw new Ye(2,2,2001,"Could not parse cue time range in TTML");return n}function gT(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function $G(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{ic:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}ne("shaka.text.TtmlTextParser",ga),ga.prototype.parseMedia=ga.prototype.parseMedia,ga.prototype.setManifestType=ga.prototype.setManifestType,ga.prototype.setSequenceMode=ga.prototype.setSequenceMode,ga.prototype.parseInit=ga.prototype.parseInit;function XG(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var mT=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,QG=/^(\d{1,4}(?:\.\d+)?|100)%$/,Nd=/^(\d+px|\d+em|\d*\.?\d+c)$/,vT=/^(\d+)px (\d+)px$/,L2=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,k2=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,F2=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,U2=/^(\d*(?:\.\d*)?)f$/,B2=/^(\d*(?:\.\d*)?)t$/,j2=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),JG={left:zu,center:"center",right:"end",start:zu,end:"end"},e9={left:"line-left",center:"center",right:"line-right"},$p=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],My=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],Z2=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];_i["application/ttml+xml"]=function(){return new ga};function Yi(){this.g=new ga}Yi.prototype.parseInit=function(e){var t=!1;if(new V().box("moov",W).box("trak",W).box("mdia",W).box("minf",W).box("stbl",W).R("stsd",ee).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new Ye(2,2,2007)},Yi.prototype.setSequenceMode=function(){},Yi.prototype.setManifestType=function(){},Yi.prototype.parseMedia=function(e,t,n){var r=this,u=!1,c=[],f=[];if(new V().box("moof",W).box("traf",W).R("subs",function(h){f=[];for(var v=h.reader,A=v.P(),N=0;N<A;N++){v.P();for(var B=v.la(),z=0;z<B;z++)h.version==1?f.push(v.P()):f.push(v.la()),v.S(),v.S(),v.P()}}).box("mdat",he(function(h){if(u=!0,f.length){for(var v=nr(h,0,f[0]),A=[],N=f[0],B=1;B<f.length;B++){var z=nr(h,N,f[B]);z=Bh(z),A.push("data:image/png;base64,"+z),N+=f[B]}c=c.concat(r.g.parseMedia(v,t,n,A))}else c=c.concat(r.g.parseMedia(h,t,n,[]))})).parse(e,!1),!u)throw new Ye(2,2,2007);return c},ne("shaka.text.Mp4TtmlParser",Yi),Yi.prototype.parseMedia=Yi.prototype.parseMedia,Yi.prototype.setManifestType=Yi.prototype.setManifestType,Yi.prototype.setSequenceMode=Yi.prototype.setSequenceMode,Yi.prototype.parseInit=Yi.prototype.parseInit,_i['application/mp4; codecs="stpp"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im1i"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im2i"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im2t"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.etd1"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.etd1|im1t"']=function(){return new Yi},_i['application/mp4; codecs="stpp.ttml.im1t|etd1"']=function(){return new Yi},_i['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Yi};function Go(){this.h=!1,this.g="UNKNOWN"}Go.prototype.parseInit=function(){},Go.prototype.setSequenceMode=function(e){this.h=e},Go.prototype.setManifestType=function(e){this.g=e},Go.prototype.parseMedia=function(e,t){e=Cr(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Ye(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new Ye(2,2,2e3);if(e=_u(e[1]),e==null)throw new Ye(2,2,2e3);r=Number(r[1]);for(var u=t.segmentStart-t.periodStart;95443.7176888889<=u;)u-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}else e=t.segmentStart;for(t=[],r=m(n[0].split("\n")),u=r.next();!u.done;u=r.next())if(u=u.value,/^Region:/.test(u)){u=new aa(u);var c=new Kt;Aa(u),Es(u);for(var f=Aa(u);f;){var h=c,v=f;(f=/^id=(.*)$/.exec(v))?h.id=f[1]:(f=/^width=(\d{1,2}|100)%$/.exec(v))?h.width=Number(f[1]):(f=/^lines=(\d+)$/.exec(v))?(h.height=Number(f[1]),h.heightUnits=2):(f=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(v))?(h.regionAnchorX=Number(f[1]),h.regionAnchorY=Number(f[2])):(f=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(v))?(h.viewportAnchorX=Number(f[1]),h.viewportAnchorY=Number(f[2])):/^scroll=up$/.exec(v)&&(h.scroll="up"),Es(u),f=Aa(u)}t.push(c)}for(r=new Map,Sc(r),u=[],n=m(n.slice(1)),c=n.next();!c.done;c=n.next()){if(c=c.value.split("\n"),(c.length!=1||c[0])&&!/^NOTE($|[ \t])/.test(c[0])&&c[0]=="STYLE"){for(h=[],f=-1,v=1;v<c.length;v++)c[v].includes("::cue")&&(h.push([]),f=h.length-1),f!=-1&&(h[f].push(c[v]),c[v].includes("}")&&(f=-1));for(h=m(h),f=h.next();!f.done;f=h.next()){var A=f.value;f="global",(v=A[0].match(/\((.*)\)/))&&(f=v.pop()),v=A.slice(1,-1),A[0].includes("}")&&(A=/\{(.*?)\}/.exec(A[0]))&&(v=A[1].split(";")),(A=r.get(f))||(A=new jr(0,0,""));for(var N=!1,B=0;B<v.length;B++){var z=/^\s*([^:]+):\s*(.*)/.exec(v[B]);if(z){var J=z[2].trim().replace(";","");switch(z[1].trim()){case"background-color":case"background":N=!0,A.backgroundColor=J;break;case"color":N=!0,A.color=J;break;case"font-family":N=!0,A.fontFamily=J;break;case"font-size":N=!0,A.fontSize=J;break;case"font-weight":(700<=parseInt(J,10)||J=="bold")&&(N=!0,A.fontWeight=Yu);break;case"font-style":switch(J){case"normal":N=!0,A.fontStyle=Lh;break;case"italic":N=!0,A.fontStyle=wu;break;case"oblique":N=!0,A.fontStyle="oblique"}break;case"opacity":N=!0,A.opacity=parseFloat(J);break;case"text-combine-upright":N=!0,A.textCombineUpright=J;break;case"text-shadow":N=!0,A.textShadow=J;break;case"white-space":N=!0,A.wrapLine=J!="noWrap"}}}N&&r.set(f,A)}}if(A=c,N=e,A.length==1&&!A[0]||/^NOTE($|[ \t])/.test(A[0])||A[0]=="STYLE"||A[0]=="REGION")c=null;else if(c=null,A[0].includes("-->")||(c=A[0],A.splice(0,1)),h=new aa(A[0]),f=Eu(h),B=wa(h,/[ \t]+--\x3e[ \t]+/g),v=Eu(h),f==null||B==null||v==null)He("Failed to parse VTT time code. Cue skipped:",c,A),c=null;else{for(f+=N,v+=N,N=A.slice(1).join("\n").trim(),r.has("global")?(A=r.get("global").clone(),A.startTime=f,A.endTime=v,A.payload=N):A=new jr(f,v,N),Es(h),f=Aa(h);f;)q2(A,f,t),Es(h),f=Aa(h);wf(A,r),c!=null&&(A.id=c),c=A}c&&u.push(c)}return u};function q2(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=Ca:e.textAlign=bf[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":If)):(r=/^region:(.*)$/.exec(t))?(t=t9(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Cf[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Pl,e.line=Number(n[1]),n[2]&&(e.lineAlign=Cf[n[2].toUpperCase()]))}function t9(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}ne("shaka.text.VttTextParser",Go),Go.prototype.parseMedia=Go.prototype.parseMedia,Go.prototype.setManifestType=Go.prototype.setManifestType,Go.prototype.setSequenceMode=Go.prototype.setSequenceMode,Go.prototype.parseInit=Go.prototype.parseInit,_i["text/vtt"]=function(){return new Go},_i['text/vtt; codecs="vtt"']=function(){return new Go},_i['text/vtt; codecs="wvtt"']=function(){return new Go};function Pa(){this.g=null}Pa.prototype.parseInit=function(e){var t=this,n=!1;if(new V().box("moov",W).box("trak",W).box("mdia",W).R("mdhd",function(r){r=Xa(r.reader,r.version),t.g=r.timescale}).box("minf",W).box("stbl",W).R("stsd",ee).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new Ye(2,2,2008);if(!n)throw new Ye(2,2,2008)},Pa.prototype.setSequenceMode=function(){},Pa.prototype.setManifestType=function(){},Pa.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new Ye(2,2,2008);var n=0,r=[],u,c=[],f=!1,h=!1,v=!1,A=null;if(new V().box("moof",W).box("traf",W).R("tfdt",function(rt){f=!0,n=To(rt.reader,rt.version).baseMediaDecodeTime}).R("tfhd",function(rt){A=Rs(rt.reader,rt.flags).Zc}).R("trun",function(rt){h=!0,r=Ru(rt.reader,rt.version,rt.flags).Tg}).box("mdat",he(function(rt){v=!0,u=rt})).parse(e,!1),!v&&!f&&!h)throw new Ye(2,2,2008);e=n;for(var N=new F(u,0),B=m(r),z=B.next();!z.done;z=B.next()){z=z.value;var J=z.Kf||A,fe=z.ke?n+z.ke:e;e=fe+(J||0);var pe=0;do{var Ee=N.P();pe+=Ee;var Oe=N.P(),ke=null;Te(Oe)=="vttc"?8<Ee&&(ke=N.rb(Ee-8)):N.skip(Ee-8),J&&ke&&(Ee=n9(ke,t.periodStart+fe/this.g,t.periodStart+e/this.g),c.push(Ee))}while(z.sampleSize&&pe<z.sampleSize)}return c.filter(Ws)};function n9(e,t,n){var r,u,c;return new V().box("payl",he(function(f){r=Cr(f)})).box("iden",he(function(f){u=Cr(f)})).box("sttg",he(function(f){c=Cr(f)})).parse(e),r?r9(r,u,c,t,n):null}function r9(e,t,n,r,u){if(e=new jr(r,u,e),wf(e),t&&(e.id=t),n)for(t=new aa(n),n=Aa(t);n;)q2(e,n,[]),Es(t),n=Aa(t);return e}ne("shaka.text.Mp4VttParser",Pa),Pa.prototype.parseMedia=Pa.prototype.parseMedia,Pa.prototype.setManifestType=Pa.prototype.setManifestType,Pa.prototype.setSequenceMode=Pa.prototype.setSequenceMode,Pa.prototype.parseInit=Pa.prototype.parseInit,_i['application/mp4; codecs="wvtt"']=function(){return new Pa};function Oa(){}Oa.prototype.parseInit=function(){},Oa.prototype.setSequenceMode=function(){},Oa.prototype.setManifestType=function(){},Oa.prototype.parseMedia=function(e){var t=Cr(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var r=new aa(n[0]),u=Eu(r),c=wa(r,/,/g);if(r=Eu(r),u==null||c==null||r==null)throw new Ye(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new jr(u,r,n.slice(1).join("\n").trim()))}return e},ne("shaka.text.SbvTextParser",Oa),Oa.prototype.parseMedia=Oa.prototype.parseMedia,Oa.prototype.setManifestType=Oa.prototype.setManifestType,Oa.prototype.setSequenceMode=Oa.prototype.setSequenceMode,Oa.prototype.parseInit=Oa.prototype.parseInit,_i["text/x-subviewer"]=function(){return new Oa};function ma(){this.g=new Go}ma.prototype.parseInit=function(){},ma.prototype.setSequenceMode=function(){},ma.prototype.setManifestType=function(){},ma.prototype.parseMedia=function(e,t,n){return e=Cr(e),e=G2(e),e=nr(bi(e)),this.g.parseMedia(e,t,n,[])};function G2(e){var t="WEBVTT\n\n";if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=m(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}ne("shaka.text.SrtTextParser",ma),ma.srt2webvtt=G2,ma.prototype.parseMedia=ma.prototype.parseMedia,ma.prototype.setManifestType=ma.prototype.setManifestType,ma.prototype.setSequenceMode=ma.prototype.setSequenceMode,ma.prototype.parseInit=ma.prototype.parseInit,_i["text/srt"]=function(){return new ma};function La(){}La.prototype.parseInit=function(){},La.prototype.setSequenceMode=function(){},La.prototype.setManifestType=function(){},La.prototype.parseMedia=function(e){var t="",n="",r=null,u=null;for(u=Cr(e).split(/\r?\n\s*\r?\n/),e=m(u),u=e.next();!u.done;u=e.next()){var c=u.value;u=c,(c=o9.exec(c))&&(r=c[1],u=c[2]),r=="V4 Styles"||r=="V4+ Styles"?(t=u,t=n?t+("\n"+u):u):r=="Events"&&(n=n?n+("\n"+u):u)}for(r=[],u=null,t=m(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(c=K2.exec(e))){if(e=c[1].trim(),c=c[2].trim(),e=="Format")u=c.split(Dy);else if(e=="Style"){e=c.split(Dy),c={};for(var f=0;f<u.length&&f<e.length;f++)c[u[f]]=e[f];r.push(c)}}for(u=[],t=null,n=m(n.split(/\r?\n/)),c=n.next(),e={};!c.done;e={gh:void 0},c=n.next())if(c=c.value,!/^\s*;/.test(c)&&(f=K2.exec(c))){if(c=f[1].trim(),f=f[2].trim(),c=="Format")t=f.split(Dy);else if(c=="Dialogue"){f=f.split(Dy),c={};for(var h=0;h<t.length&&h<f.length;h++)c[t[h]]=f[h];h=V2(c.Start);var v=V2(c.End);f=new jr(h,v,f.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),e.gh=c.Style,(e=r.find(function(A){return function(N){return N.Name==A.gh}}(e)))&&i9(f,e),u.push(f)}}return u};function i9(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=H2(n))&&(e.color=n),(n=t.BackColour)&&(n=H2(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=Yu),t.Italic&&(e.fontStyle=wu),t.Underline&&e.textDecoration.push(Ks),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Ml,e.textAlign="start";break;case 2:e.displayAlign=Ml,e.textAlign=Ca;break;case 3:e.displayAlign=Ml,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=Ca;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=Ca;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function H2(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function V2(e){return e=a9.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}ne("shaka.text.SsaTextParser",La),La.prototype.parseMedia=La.prototype.parseMedia,La.prototype.setManifestType=La.prototype.setManifestType,La.prototype.setSequenceMode=La.prototype.setSequenceMode,La.prototype.parseInit=La.prototype.parseInit;var o9=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,K2=/^\s*([^:]+):\s*(.*)/,Dy=/\s*,\s*/,a9=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;_i["text/x-ssa"]=function(){return new La};function z2(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Nd:n,da:e}:null}function Y2(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var u=((e[t+2]&192)>>>6)+1,c=(e[t+2]&1)<<2;return c|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:c,codec:"mp4a.40."+u}}function W2(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function s9(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function ka(e){this.i=e,this.h=0,this.g=new Map}p=ka.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ft(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Oo(t)||"mp4a.40.2")+'"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,r){for(var u=nr(e),c=ko(u),f=c.length;f<u.length&&!W2(u,f);f++);if(e=1e3*n.endTime,c=la(c),c.length&&n&&(c=c.find(function(N){return N.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=c.data),c=Y2(u,f),!c)return Promise.reject(new Ye(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=c.sampleRate,t.channelsCount=c.channelCount;for(var h=[];f<u.length;){var v=z2(u,f);if(!v)return Promise.reject(new Ye(2,3,3018,n?n.M()[0]:null));var A=v.Nd+v.da;f+A<=u.length&&h.push({data:u.subarray(f+v.Nd,f+A),size:v.da,duration:1024,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),f+=A}return u=c.sampleRate,e=Math.floor(e*u/1e3),r={id:t.id,type:"audio",codecs:c.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,ab:[],qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.h,baseMediaDecodeTime:e,Ya:h},stream:t},r=new bd([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Cd(r),this.g.set(n,t)),n=Gp(r),this.h++,t=hi(t,n),Promise.resolve(t)},ne("shaka.transmuxer.AacTransmuxer",ka),ka.prototype.transmux=ka.prototype.transmux,ka.prototype.getOriginalMimeType=ka.prototype.getOriginalMimeType,ka.prototype.convertCodecs=ka.prototype.convertCodecs,ka.prototype.isSupported=ka.prototype.isSupported,ka.prototype.destroy=ka.prototype.destroy,Ss("audio/aac",function(){return new ka("audio/aac")},sa);function $2(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,u=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+u>e.length)return null;var c=e[t+6]>>5,f=0;c===2?f+=2:(c&1&&c!==1&&(f+=2),c&4&&(f+=2)),f=(e[t+6]<<8|e[t+7])>>12-f&1;var h=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|h>>2,(h&3)<<6|c<<3|f<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][c]+f,qa:e,da:u}}function u9(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var u,c;0<r;){c=e[t];var f=Math.min(r,8),h=8-f;u=4278190080>>>24+h<<h,u=(c&u)>>h,n=n?n<<f|u:u,t+=1,r-=f}if(16>n)return!0}return!1}function rs(e){this.i=e,this.h=0,this.g=new Map}p=rs.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ft(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,r){e=nr(e);for(var u=ko(e),c=u.length;c<e.length&&!u9(e,c);c++);var f=1e3*n.endTime;u=la(u),u.length&&n&&(u=u.find(function(N){return N.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=u.data),u=0;for(var h=new Uint8Array([]),v=[];c<e.length;){var A=$2(e,c);if(!A)return Promise.reject(new Ye(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=A.sampleRate,t.channelsCount=A.channelCount,u=A.sampleRate,h=A.qa,v.push({data:e.subarray(c,c+A.da),size:A.da,duration:1536,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),c+=A.da}return e=Math.floor(f*u/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,ab:[],qa:h,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.h,baseMediaDecodeTime:e,Ya:v},stream:t},r=new bd([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Cd(r),this.g.set(n,t)),n=Gp(r),this.h++,t=hi(t,n),Promise.resolve(t)},ne("shaka.transmuxer.Ac3Transmuxer",rs),rs.prototype.transmux=rs.prototype.transmux,rs.prototype.getOriginalMimeType=rs.prototype.getOriginalMimeType,rs.prototype.convertCodecs=rs.prototype.convertCodecs,rs.prototype.isSupported=rs.prototype.isSupported,rs.prototype.destroy=rs.prototype.destroy,Ss("audio/ac3",function(){return new rs("audio/ac3")},sa);function X2(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Na(e.subarray(t+2));xt(n,2),xt(n,3);var r=zt(n,11)+1<<1,u=zt(n,2);if(u==3){u=zt(n,2),u=[24e3,22060,16e3][u];var c=3}else u=[48e3,44100,32e3][u],c=zt(n,2);var f=zt(n,3),h=zt(n,1);return n=zt(n,5),t+r>e.byteLength?null:(e=Math.floor(r*u/(16*[1,2,3,6][c])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|n<<1|0,0|f<<1|h<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][f]+h,qa:e,da:r})}function is(e){this.i=e,this.h=0,this.g=new Map}p=is.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ft(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,r){e=nr(e);for(var u=ko(e),c=u.length;c<e.length&&(e[c]<<8|e[c+1]<<0)!==2935;c++);var f=1e3*n.endTime;u=la(u),u.length&&n&&(u=u.find(function(N){return N.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=u.data),u=0;for(var h=new Uint8Array([]),v=[];c<e.length;){var A=X2(e,c);if(!A)return Promise.reject(new Ye(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=A.sampleRate,t.channelsCount=A.channelCount,u=A.sampleRate,h=A.qa,v.push({data:e.subarray(c,c+A.da),size:A.da,duration:1536,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),c+=A.da}return e=Math.floor(f*u/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,ab:[],qa:h,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.h,baseMediaDecodeTime:e,Ya:v},stream:t},r=new bd([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Cd(r),this.g.set(n,t)),n=Gp(r),this.h++,t=hi(t,n),Promise.resolve(t)},ne("shaka.transmuxer.Ec3Transmuxer",is),is.prototype.transmux=is.prototype.transmux,is.prototype.getOriginalMimeType=is.prototype.getOriginalMimeType,is.prototype.convertCodecs=is.prototype.convertCodecs,is.prototype.isSupported=is.prototype.isSupported,is.prototype.destroy=is.prototype.destroy,Ss("audio/ec3",function(){return new is("audio/ec3")},sa);function l9(e){if(!e.length)return null;var t=e.find(function(pe){return pe.type==7});if(e=e.find(function(pe){return pe.type==8}),!t||!e)return null;var n=new Na(t.data),r=or(n);if(or(n),or(n),Jn(n),f9.includes(r)&&(r=Tn(n),r===3&&xt(n,1),Jn(n),Jn(n),xt(n,1),Sn(n))){r=r!==3?8:12;for(var u=0;u<r;u++)Sn(n)&&(6>u?Jr(n,16):Jr(n,64))}if(Jn(n),r=Tn(n),r===0)Tn(n);else if(r===1)for(xt(n,1),Jn(n),Jn(n),r=Tn(n),u=0;u<r;u++)Jn(n);Jn(n),xt(n,1);var c=Tn(n),f=Tn(n),h=zt(n,1);h===0&&xt(n,1),xt(n,1);var v=0,A=0,N=0,B=0;if(Sn(n)&&(v=Tn(n),A=Tn(n),N=Tn(n),B=Tn(n)),u=r=1,Sn(n)&&Sn(n)){var z=or(n),J=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],fe=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<z&&16>=z?(r=J[z-1],u=fe[z-1]):z===255&&(r=zt(n,16),u=zt(n,16))}return n=(2-h)*(f+1)*16-2*N-2*B,c=16*(c+1)-2*v-2*A,v=[],t=t.fullData,v.push(t.byteLength>>>8&255),v.push(t.byteLength&255),v=v.concat.apply(v,T(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,T(e)),e=new Uint8Array([1,v[3],v[4],v[5],255,225].concat(v,[1],t)),{height:n,width:c,ya:e,Ba:r,Ca:u}}function c9(e){var t=!1,n=[],r=e.find(function(v){return v.type==7}),u=!1;e=m(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;var f=!1;switch(c.type){case 1:f=u=!0;var h=c.data;r&&4<h.length&&(h=eu(new Na(h)),h===2||h===4||h===7||h===9)&&(t=!0);break;case 5:t=f=u=!0;break;case 6:f=!0;break;case 7:f=!0;break;case 8:f=!0;break;case 9:u=f=!0;break;case 12:f=!0;break;default:f=!1}u&&f&&(f=c.fullData.byteLength,h=new Uint8Array(4),h[0]=f>>24&255,h[1]=f>>16&255,h[2]=f>>8&255,h[3]=f&255,n.push(h),n.push(c.fullData))}return n.length?{data:hi.apply(co,T(n)),hd:t}:null}var f9=[100,110,122,244,44,83,86,118,128,138,139,134];function d9(e){if(!e.length)return null;var t=e.find(function(f){return f.type==32}),n=e.find(function(f){return f.type==33}),r=e.find(function(f){return f.type==34});if(!t||!n||!r)return null;var u=h9(t.fullData);e=p9(n.fullData);var c=g9(r.fullData);return t=m9(t.fullData,n.fullData,r.fullData,{zf:u.zf,Vf:u.Vf,cf:e.cf,df:e.df,Xe:e.Xe,bf:e.bf,Ye:e.Ye,Ze:e.Ze,$e:e.$e,af:e.af,Re:e.Re,Se:e.Se,Te:e.Te,Ue:e.Ue,Ve:e.Ve,We:e.We,Ke:e.Ke,Xd:e.Xd,Ie:e.Ie,He:e.He,Ge:e.Ge,Cf:c.Cf}),{height:e.height,width:e.width,ya:t,Ba:e.Pi,Ca:e.Oi}}function h9(e){var t=new Na(e,!0);return or(t),or(t),zt(t,4),zt(t,2),zt(t,6),e=zt(t,3),t=Sn(t),{zf:e+1,Vf:t}}function p9(e){e=new Na(e,!0),or(e),or(e);var t=0,n=0,r=0,u=0;zt(e,4);var c=zt(e,3);Sn(e);for(var f=zt(e,2),h=zt(e,1),v=zt(e,5),A=or(e),N=or(e),B=or(e),z=or(e),J=or(e),fe=or(e),pe=or(e),Ee=or(e),Oe=or(e),ke=or(e),rt=or(e),Fe=[],$e=[],nt=0;nt<c;nt++)Fe.push(Sn(e)),$e.push(Sn(e));if(0<c)for(nt=c;8>nt;nt++)zt(e,2);for(nt=0;nt<c;nt++)Fe[nt]&&zt(e,88),$e[nt]&&or(e);Tn(e),Fe=Tn(e),Fe==3&&zt(e,1),$e=Tn(e),nt=Tn(e),Sn(e)&&(t+=Tn(e),n+=Tn(e),r+=Tn(e),u+=Tn(e));var ct=Tn(e),gt=Tn(e),Lt=Tn(e);if(Sn(e))for(var It=0;It<=c;It++)Tn(e),Tn(e),Tn(e);else Tn(e),Tn(e),Tn(e);if(Tn(e),Tn(e),Tn(e),Tn(e),Tn(e),Tn(e),Sn(e)&&Sn(e))for(It=0;4>It;It++)for(var Ut=0;Ut<(It===3?2:6);Ut++)if(Sn(e)){var Nt=Math.min(64,1<<4+(It<<1));1<It&&br(e);for(var tn=0;tn<Nt;tn++)br(e)}else Tn(e);for(Sn(e),Sn(e),Sn(e)&&(or(e),Tn(e),Tn(e),Sn(e)),It=Tn(e),Nt=Ut=0;Nt<It;Nt++)if(tn=!1,Nt!==0&&(tn=Sn(e)),tn){Nt===It&&Tn(e),Sn(e),Tn(e);for(var Ht=tn=0;Ht<=Ut;Ht++){var Wt=Sn(e),En=!1;Wt||(En=Sn(e)),(Wt||En)&&tn++}Ut=tn}else{for(Ht=Tn(e),tn=Tn(e),Ut=Ht+tn,Wt=0;Wt<Ht;Wt++)Tn(e),Sn(e);for(Ht=0;Ht<tn;Ht++)Tn(e),Sn(e)}if(Sn(e))for(It=Tn(e),Ut=0;Ut<It;Ut++){for(Nt=0;Nt<Lt+4;Nt++)zt(e,1);zt(e,1)}if(It=Lt=1,Ut=0,Sn(e),Sn(e),Sn(e)){if(Sn(e)&&(Nt=or(e),tn=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Ht=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<Nt&&16>=Nt?(Lt=tn[Nt-1],It=Ht[Nt-1]):Nt===255&&(Lt=zt(e,16),It=zt(e,16))),Sn(e)&&Sn(e),Sn(e)&&(zt(e,3),Sn(e),Sn(e)&&(or(e),or(e),or(e))),Sn(e)&&(Tn(e),Tn(e)),Sn(e),Sn(e),Sn(e),(Nt=Sn(e))&&(Tn(e),Tn(e),Tn(e),Tn(e)),Sn(e)&&(zt(e,32),zt(e,32),Sn(e)&&Tn(e),Sn(e)))for(Ht=!1,Nt=Sn(e),tn=Sn(e),(Nt||tn)&&((Ht=Sn(e))&&(or(e),zt(e,5),Sn(e),zt(e,5)),zt(e,4),zt(e,4),Ht&&zt(e,4),zt(e,5),zt(e,5),zt(e,5)),Wt=0;Wt<=c;Wt++){var An=!0;En=1,Sn(e)||(An=Sn(e));var Vn=!1;if(An?Tn(e):Vn=Sn(e),Vn||(En=Tn(e)+1),Nt){for(An=0;An<En;An++)Tn(e),Tn(e),Ht&&(Tn(e),Tn(e));Sn(e)}if(tn){for(An=0;An<En;An++)Tn(e),Tn(e),Ht&&(Tn(e),Tn(e));Sn(e)}}Sn(e)&&(Sn(e),Sn(e),Sn(e),Ut=Tn(e),Tn(e),Tn(e),Tn(e),Tn(e))}return{Xe:rt,cf:f,df:h,bf:v,Ye:A,Ze:N,$e:B,af:z,Re:J,Se:fe,Te:pe,Ue:Ee,Ve:Oe,We:ke,Xd:Ut,Ke:0,Ie:Fe,He:ct,Ge:gt,width:$e-(t+n)*(Fe===1||Fe===2?2:1),height:nt-(r+u)*(Fe===1?2:1),Pi:Lt,Oi:It}}function g9(e){var t=new Na(e,!0);or(t),or(t),Tn(t),Tn(t),Sn(t),Sn(t),zt(t,3),Sn(t),Sn(t),Tn(t),Tn(t),br(t),Sn(t),Sn(t),Sn(t)&&Tn(t),br(t),br(t),Sn(t),Sn(t),Sn(t),Sn(t),e=Sn(t),t=Sn(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Cf:n}}function m9(e,t,n,r){var u=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return u[0]=1,u[1]=(r.cf&3)<<6|(r.df?1:0)<<5|r.bf&31,u[2]=r.Ye,u[3]=r.Ze,u[4]=r.$e,u[5]=r.af,u[6]=r.Re,u[7]=r.Se,u[8]=r.Te,u[9]=r.Ue,u[10]=r.Ve,u[11]=r.We,u[12]=r.Xe,u[13]=240|(r.Xd&3840)>>8,u[14]=r.Xd&255,u[15]=252|r.Cf&3,u[16]=252|r.Ie&3,u[17]=248|r.He&7,u[18]=248|r.Ge&7,u[19]=0,u[20]=0,u[21]=(r.Ke&3)<<6|(r.zf&7)<<3|(r.Vf?1:0)<<2|3,u[22]=3,u[23]=160,u[24]=0,u[25]=1,u[26]=(e.byteLength&65280)>>8,u[27]=(e.byteLength&255)>>0,u.set(e,28),u[23+(5+e.byteLength)]=161,u[e.byteLength+29]=0,u[e.byteLength+30]=1,u[e.byteLength+31]=(t.byteLength&65280)>>8,u[e.byteLength+32]=(t.byteLength&255)>>0,u.set(t,e.byteLength+33),u[23+(e.byteLength+10+t.byteLength)]=162,u[e.byteLength+10+t.byteLength+24]=0,u[e.byteLength+10+t.byteLength+25]=1,u[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,u[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,u.set(n,e.byteLength+10+t.byteLength+28),u}function Py(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(n!==1&&u!==0&&u!==15&&c!==3){var f=e[t+3]>>6;u=1e3*v9[14*(n===3?3-r:r===3?3:4)+u-1],c=y9[3*(n===3?0:n===2?1:2)+c],n=E9[n][r];var h=_9[r],v=Math.floor(n*u/c+(e[t+2]>>1&1))*h,A=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(A=A?parseInt(A[1],10):0)&&87>=A&&r===2&&224e3<=u&&f===0&&(e[t+3]|=128),{sampleRate:c,channelCount:f===3?1:2,da:v,Ni:8*n*h}}return null}function Q2(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function J2(e,t){if(t+1<e.length&&Q2(e,t)){var n=Py(e,t),r=4;return n&&n.da&&(r=n.da),t+=r,t===e.length||t+1<e.length&&Q2(e,t)}return!1}var v9=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],y9=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],E9=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],_9=[0,1,1,4];function os(e){this.i=e,this.h=0,this.g=new Map}p=os.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ft(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},p.getOriginalMimeType=function(){return this.i},p.transmux=function(e,t,n,r){for(var u=nr(e),c=ko(u).length;c<u.length&&!J2(u,c);c++);var f;for(e=[];c<u.length;){var h=Py(u,c);if(!h)return Promise.reject(new Ye(2,3,3018,n?n.M()[0]:null));f||(f=h),c+h.da<=u.length&&e.push({data:u.subarray(c,c+h.da),size:h.da,duration:1152,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),c+=h.da}return f?(u=9e4*f.Ni/f.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:f.sampleRate,duration:r,ab:[],qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.h,baseMediaDecodeTime:u,Ya:e},stream:t},r=new bd([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Cd(r),this.g.set(n,t)),n=Gp(r),this.h++,t=hi(t,n),Promise.resolve(t)):Promise.reject(new Ye(2,3,3018,n?n.M()[0]:null))},ne("shaka.transmuxer.Mp3Transmuxer",os),os.prototype.transmux=os.prototype.transmux,os.prototype.getOriginalMimeType=os.prototype.getOriginalMimeType,os.prototype.convertCodecs=os.prototype.convertCodecs,os.prototype.isSupported=os.prototype.isSupported,os.prototype.destroy=os.prototype.destroy,Ss("audio/mpeg",function(){return new os("audio/mpeg")},sa);function as(e){this.h=e,this.g=null}p=as.prototype,p.destroy=function(){},p.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Oo(e).split(","),n=bo("audio",t);return t=bo("video",t),!n||t||_o(n)!="mp3"?!1:Ft(this.convertCodecs("audio",e))},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},p.getOriginalMimeType=function(){return this.h},p.transmux=function(e,t,n,r,u){if(this.g?this.g.clearData():this.g=new kr,e=nr(e),e=this.g.parse(e),e.$c().audio!="mp3"||u!="audio")return Promise.reject(new Ye(2,3,3018,n?n.M()[0]:null));for(n=new Uint8Array([]),u=m(e.Vb()),e=u.next();!e.done;e=u.next())if(e=e.value.data)for(t=0;t<e.length;)(r=Py(e,t))?(t+r.da<=e.length&&(n=hi(n,e.subarray(t,t+r.da))),t+=r.da):t++;return Promise.resolve(n)},ne("shaka.transmuxer.MpegTsTransmuxer",as),as.prototype.transmux=as.prototype.transmux,as.prototype.getOriginalMimeType=as.prototype.getOriginalMimeType,as.prototype.convertCodecs=as.prototype.convertCodecs,as.prototype.isSupported=as.prototype.isSupported,as.prototype.destroy=as.prototype.destroy,Ss("video/mp2t",function(){return new as("video/mp2t")},Mf);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function Fa(e){this.h=e,(this.g=S_.get("ISOBoxer")())&&T9(this)}function T9(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==S9[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}p=Fa.prototype,p.destroy=function(){},p.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Ft(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ft(t)||Ft(e))},p.convertCodecs=function(e,t){return t.replace("mss/","")},p.getOriginalMimeType=function(){return this.h},p.transmux=function(e,t,n){if(!n)return Promise.resolve(nr(e));if(!t.mssPrivateData)return Promise.reject(new Ye(2,3,3020,n?n.M()[0]:null));try{var r,u=this.g.parseBuffer(e),c=u.fetch("tfhd");c.track_ID=t.id+1;var f=u.fetch("tfdt"),h=u.fetch("traf");f===null&&(f=this.g.createFullBox("tfdt",h,c),f.version=1,f.flags=0,f.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var v=u.fetch("trun"),A=u.fetch("tfxd");A&&A._parent.boxes.splice(A._parent.boxes.indexOf(A),1);var N=u.fetch("tfrf");N&&N._parent.boxes.splice(N._parent.boxes.indexOf(N),1);var B=u.fetch("sepiff");if(B!==null){B.type="senc",B.usertype=void 0;var z=u.fetch("saio");if(z===null){z=this.g.createFullBox("saio",h),z.version=0,z.flags=0,z.entry_count=1,z.offset=[0];var J=this.g.createFullBox("saiz",h);if(J.version=0,J.flags=0,J.sample_count=B.sample_count,J.default_sample_info_size=0,J.sample_info_size=[],B.flags&2)for(r=0;r<B.sample_count;r+=1)J.sample_info_size[r]=10+6*B.entry[r].NumberOfEntries;else J.default_sample_info_size=8}}c.flags&=16777214,c.flags|=131072,v.flags|=1;var fe=u.fetch("moof");v.data_offset=fe.getLength()+8;var pe=u.fetch("saio");pe!==null&&(pe.offset[0]=eP(fe,"traf")+eP(h,"senc")+16);var Ee=nr(u.write());return Promise.resolve(Ee)}catch(Oe){return Oe instanceof Ye?Promise.reject(Oe):Promise.reject(new Ye(2,3,3022,n?n.M()[0]:null))}};function eP(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}ne("shaka.transmuxer.MssTransmuxer",Fa),Fa.prototype.transmux=Fa.prototype.transmux,Fa.prototype.getOriginalMimeType=Fa.prototype.getOriginalMimeType,Fa.prototype.convertCodecs=Fa.prototype.convertCodecs,Fa.prototype.isSupported=Fa.prototype.isSupported,Fa.prototype.destroy=Fa.prototype.destroy;var S9=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Ss("mss/audio/mp4",function(){return new Fa("mss/audio/mp4")},sa),Ss("mss/video/mp4",function(){return new Fa("mss/video/mp4")},sa);function ss(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}p=ss.prototype,p.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},p.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Oo(n).split(",");return n=bo("audio",r),r=bo("video",r),n&&(n=_o(n),!w9.includes(n))||r&&(n=_o(r),!A9.includes(n))?!1:t?Ft(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ft(t)||Ft(e))},p.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Oo(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return nl(n,"audio/mp4")}).map(bs).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},p.getOriginalMimeType=function(){return this.l},p.transmux=function(e,t,n,r,u){var c=nr(e);if(u=="audio"&&!sp(c)){for(var f=ko(c),h=f.length;h<c.length;h++)if(J2(c,h))return Promise.reject(new Ye(2,3,3018,n?n.M()[0]:null));for(h=f.length;h<c.length;h++)if(W2(c,h))return this.h||(this.h=new ka("audio/aac")),this.h.transmux(e,t,n,r,u);return Promise.reject(new Ye(2,3,3018,n?n.M()[0]:null))}this.j?this.j.clearData():this.j=new kr;var v=this.j.parse(c),A=[],N=v.$c();try{var B=null;if(u=="video"){switch(N.video){case"avc":var z=[],J=null,fe=[],pe=v.nc();if(!pe.length)throw new Ye(2,3,3023,n?n.M()[0]:null);for(var Ee=0;Ee<pe.length;Ee++){var Oe=pe[Ee],ke=Oe.nalus;fe.push.apply(fe,T(ke));var rt=c9(ke);if(rt){J==null&&(J=Oe.dts);var Fe=void 0;Fe=Ee+1<pe.length?(pe[Ee+1].dts||0)-(Oe.dts||0):1<pe.length?(Oe.dts||0)-(pe[Ee-1].dts||0):9e4*(n.endTime-n.startTime),z.push({data:rt.data,size:rt.data.byteLength,duration:Fe,eb:Math.round((Oe.pts||0)-(Oe.dts||0)),flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:rt.hd?2:1,ib:rt.hd?0:1}})}}var $e=l9(fe);if(!$e||J==null)throw new Ye(2,3,3018,n?n.M()[0]:null);t.height=$e.height,t.width=$e.width,B={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,ab:[],qa:new Uint8Array([]),ya:$e.ya,Ba:$e.Ba,Ca:$e.Ca,data:{sb:this.g,baseMediaDecodeTime:J,Ya:z},stream:t};break;case"hvc":var nt=[],ct=null,gt=[],Lt=v.nc();if(!Lt.length)throw new Ye(2,3,3023,n?n.M()[0]:null);for(var It=0;It<Lt.length;It++){var Ut=Lt[It],Nt=Ut.nalus;gt.push.apply(gt,T(Nt));for(var tn=!1,Ht=[],Wt=!1,En=m(Nt),An=En.next();!An.done;An=En.next()){var Vn=An.value;switch(Vn.type){case 1:case 0:var Qn=Wt=!0;break;case 19:case 20:case 21:tn=Qn=Wt=!0;break;case 32:Qn=!0;break;case 33:Qn=!0;break;case 34:Qn=!0;break;case 35:Wt=Qn=!0;break;case 39:case 40:Qn=!0;break;default:Qn=!1}if(Wt&&Qn){var ar=Vn.fullData.byteLength,Ar=new Uint8Array(4);Ar[0]=ar>>24&255,Ar[1]=ar>>16&255,Ar[2]=ar>>8&255,Ar[3]=ar&255,Ht.push(Ar),Ht.push(Vn.fullData)}}var Qr=Ht.length?{data:hi.apply(co,T(Ht)),hd:tn}:null;if(Qr){ct==null&&Ut.dts!=null&&(ct=Ut.dts);var zr=void 0;zr=It+1<Lt.length?(Lt[It+1].dts||0)-(Ut.dts||0):1<Lt.length?(Ut.dts||0)-(Lt[It-1].dts||0):9e4*(n.endTime-n.startTime),nt.push({data:Qr.data,size:Qr.data.byteLength,duration:zr,eb:Math.round((Ut.pts||0)-(Ut.dts||0)),flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:Qr.hd?2:1,ib:Qr.hd?0:1}})}}var Si=d9(gt);if(!Si||ct==null)throw new Ye(2,3,3018,n?n.M()[0]:null);t.height=Si.height,t.width=Si.width,B={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,ab:[],qa:new Uint8Array([]),ya:Si.ya,Ba:Si.Ba,Ca:Si.Ca,data:{sb:this.g,baseMediaDecodeTime:ct,Ya:nt},stream:t}}B&&(A.push(B),B=null)}if(u=="audio"){switch(N.audio){case"aac":for(var Pr=[],Fr,si=null,Ms=m(v.Vb()),Wi=Ms.next();!Wi.done;Wi=Ms.next()){var Ua=Wi.value,us=Ua.data;if(us){var $i=0;if(Fr=Y2(us,$i),!Fr)throw new Ye(2,3,3018,n?n.M()[0]:null);for(t.audioSamplingRate=Fr.sampleRate,t.channelsCount=Fr.channelCount,si==null&&Ua.pts!==null&&(si=Ua.pts);$i<us.length;){var Ds=z2(us,$i);if(Ds){var Md=Ds.Nd+Ds.da;$i+Md<=us.length&&Pr.push({data:us.subarray($i+Ds.Nd,$i+Md),size:Ds.da,duration:1024,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),$i+=Md}else $i++}}}if(!Fr||si==null){if(!v.nc().length)throw new Ye(2,3,3018,n?n.M()[0]:null);si=9e4*n.startTime;var ml=bo("audio",t.codecs.split(","));if(!ml||!t.channelsCount||!t.audioSamplingRate)throw new Ye(2,3,3018,n?n.M()[0]:null);Fr={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:ml};var Dd=s9(ml,t.channelsCount);if(!Dd)throw new Ye(2,3,3018,n?n.M()[0]:null);for(var Ly=si+9e4*(n.endTime-n.startTime),Jp=si;Jp<Ly;)Pr.push({data:Dd,size:Dd.byteLength,duration:1024,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),Jp+=1024/Fr.sampleRate*9e4}var Ps=Fr.sampleRate,x9=si/9e4*Ps;B={id:t.id,type:"audio",codecs:Fr.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ps,duration:r,ab:[],qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:x9,Ya:Pr},stream:t};break;case"ac3":for(var dP=[],ky=0,_T=new Uint8Array([]),Fy=null,hP=m(v.Vb()),TT=hP.next();!TT.done;TT=hP.next()){var ST=TT.value,wT=ST.data;Fy==null&&ST.pts!==null&&(Fy=ST.pts);for(var Pd=0;Pd<wT.length;){var Wl=$2(wT,Pd);Wl?(t.audioSamplingRate=Wl.sampleRate,t.channelsCount=Wl.channelCount,ky=Wl.sampleRate,_T=Wl.qa,dP.push({data:wT.subarray(Pd,Pd+Wl.da),size:Wl.da,duration:1536,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),Pd+=Wl.da):Pd++}}if(ky==0||_T.byteLength==0||Fy==null)throw new Ye(2,3,3018,n?n.M()[0]:null);var N9=Fy/9e4*ky;B={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ky,duration:r,ab:[],qa:_T,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:N9,Ya:dP},stream:t};break;case"ec3":for(var pP=[],Uy=0,AT=new Uint8Array([]),By=null,gP=m(v.Vb()),IT=gP.next();!IT.done;IT=gP.next()){var bT=IT.value,CT=bT.data;By==null&&bT.pts!==null&&(By=bT.pts);for(var Od=0;Od<CT.length;){var $l=X2(CT,Od);$l?(t.audioSamplingRate=$l.sampleRate,t.channelsCount=$l.channelCount,Uy=$l.sampleRate,AT=$l.qa,pP.push({data:CT.subarray(Od,Od+$l.da),size:$l.da,duration:1536,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),Od+=$l.da):Od++}}if(Uy==0||AT.byteLength==0||By==null)throw new Ye(2,3,3018,n?n.M()[0]:null);var M9=By/9e4*Uy;B={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Uy,duration:r,ab:[],qa:AT,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:M9,Ya:pP},stream:t};break;case"mp3":for(var mP=[],jy,Zy=null,vP=m(v.Vb()),RT=vP.next();!RT.done;RT=vP.next()){var xT=RT.value,eg=xT.data;if(eg){Zy==null&&xT.pts!==null&&(Zy=xT.pts);for(var Zc=0;Zc<eg.length;){var Ld=Py(eg,Zc);Ld?(jy||(jy=Ld),Zc+Ld.da<=eg.length&&mP.push({data:eg.subarray(Zc,Zc+Ld.da),size:Ld.da,duration:1152,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),Zc+=Ld.da):Zc++}}}if(!jy||Zy==null)throw new Ye(2,3,3018,n?n.M()[0]:null);var yP=jy.sampleRate,D9=Zy/9e4*yP;B={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:yP,duration:r,ab:[],qa:new Uint8Array([]),ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:D9,Ya:mP},stream:t};break;case"opus":var EP=[],qy=null,Mu=v.F;if(!Mu)throw new Ye(2,3,3018,n?n.M()[0]:null);var Ho=[];switch(Mu.Ah){case 1:case 2:Ho=[0];break;case 0:Ho=[255,1,1,0,1];break;case 128:Ho=[255,2,0,0,1];break;case 3:Ho=[1,2,1,0,2,1];break;case 4:Ho=[1,2,2,0,1,2,3];break;case 5:Ho=[1,3,2,0,4,1,2,3];break;case 6:Ho=[1,4,2,0,4,1,2,3,5];break;case 7:Ho=[1,4,2,0,4,1,2,3,5,6];break;case 8:Ho=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Ho=[1,1,2,0,1];break;case 131:Ho=[1,1,3,0,1,2];break;case 132:Ho=[1,1,4,0,1,2,3];break;case 133:Ho=[1,1,5,0,1,2,3,4];break;case 134:Ho=[1,1,6,0,1,2,3,4,5];break;case 135:Ho=[1,1,7,0,1,2,3,4,5,6];break;case 136:Ho=[1,1,8,0,1,2,3,4,5,6,7]}for(var _P=new Uint8Array([0,Mu.channelCount,0,0,Mu.sampleRate>>>24&255,Mu.sampleRate>>>17&255,Mu.sampleRate>>>8&255,Mu.sampleRate>>>0&255,0,0].concat(T(Ho))),TP=Mu.sampleRate,SP=m(v.Vb()),NT=SP.next();!NT.done;NT=SP.next()){var MT=NT.value,kd=MT.data;qy==null&&MT.pts!==null&&(qy=MT.pts);for(var tg=0;tg<kd.length;){for(var P9=(kd[tg+1]&16)!==0,O9=(kd[tg+1]&8)!==0,vl=tg+2,Gy=0;kd[vl]===255;)Gy+=255,vl+=1;Gy+=kd[vl],vl+=1,vl+=P9?2:0,vl+=O9?2:0;var wP=kd.slice(vl,vl+Gy);EP.push({data:wP,size:wP.byteLength,duration:960,eb:0,flags:{hb:0,Xa:0,Wa:0,Ua:0,Va:2,ib:0}}),tg=vl+Gy}}if(_P.byteLength==0||qy==null)throw new Ye(2,3,3018,n?n.M()[0]:null);t.audioSamplingRate=Mu.sampleRate,t.channelsCount=Mu.channelCount;var L9=qy/9e4*TP;B={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:TP,duration:r,ab:[],qa:_P,ya:new Uint8Array([]),Ba:0,Ca:0,data:{sb:this.g,baseMediaDecodeTime:L9,Ya:EP},stream:t}}B&&(A.push(B),B=null)}}catch(OT){return OT&&OT.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(OT)}if(!A.length)return Promise.reject(new Ye(2,3,3018,n?n.M()[0]:null));var AP=new bd(A),DT=t.id+"_"+n.i;if(this.i.has(DT))var PT=this.i.get(DT);else PT=Cd(AP),this.i.set(DT,PT);var k9=Gp(AP);this.g++;var F9=hi(PT,k9);return Promise.resolve(F9)},ne("shaka.transmuxer.TsTransmuxer",ss),ss.prototype.transmux=ss.prototype.transmux,ss.prototype.getOriginalMimeType=ss.prototype.getOriginalMimeType,ss.prototype.convertCodecs=ss.prototype.convertCodecs,ss.prototype.isSupported=ss.prototype.isSupported,ss.prototype.destroy=ss.prototype.destroy;var w9=["aac","ac-3","ec-3","mp3","opus"],A9=["avc","hevc"];Ss("video/mp2t",function(){return new ss("video/mp2t")},kh);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function tP(){}var Xp;function nP(){Xp||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Xp=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=I9,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function I9(e,t){var n=this,r;return Ne(function(u){return u.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),R(u,Xp.call(n,e,t),2)):(r=u.h,cP(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Xp,u.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=rP,u.return(rP.call(n,e,t))))})}function rP(e,t){var n=this,r,u,c,f,h,v,A,N,B,z,J,fe;return Ne(function(pe){if(pe.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=lP(e),u=[],c=m(t),f=c.next();!f.done;f=c.next())h=f.value,v=iP(h.videoCapabilities,r),A=iP(h.audioCapabilities,r),h.videoCapabilities&&h.videoCapabilities.length&&!v.length||h.audioCapabilities&&h.audioCapabilities.length&&!A.length||(N=Object.assign({},h),N.videoCapabilities=v,N.audioCapabilities=A,u.push(N));if(!u.length)throw B=Error("Unsupported keySystem or supportedConfigurations."),B.name="NotSupportedError",B.code=DOMException.NOT_SUPPORTED_ERR,B;return R(pe,Xp.call(n,e,u),2)}return z=pe.h,fe=J=null,u[0]&&(u[0].videoCapabilities&&(J=u[0].videoCapabilities[0].encryptionScheme),u[0].audioCapabilities&&(fe=u[0].audioCapabilities[0].encryptionScheme)),pe.return(new Oy(z,J,fe))})}function iP(e,t){return e&&e.filter(function(n){return yT(n.encryptionScheme,t)})}ne("EmeEncryptionSchemePolyfill",tP),tP.install=nP;function oP(){}var Qp;function aP(){Qp||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Qp=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=b9,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function b9(e){var t=this,n,r;return Ne(function(u){switch(u.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),R(u,Qp.call(t,e),2);case 2:if(n=u.h,!e.keySystemConfiguration)return u.return(n);if((r=n.keySystemAccess)&&cP(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Qp,u.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=sP,r){u.u(3);break}return R(u,uP(e),4);case 4:return n.keySystemAccess=u.h,u.return(n);case 3:return u.return(sP.call(t,e))}})}function sP(e){var t=this,n,r,u,c,f,h,v;return Ne(function(A){switch(A.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),r=n=null,!e.keySystemConfiguration||(u=e.keySystemConfiguration,c=u.keySystem,r=u.audio&&u.audio.encryptionScheme,n=u.video&&u.video.encryptionScheme,f=lP(c),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},yT(r,f)&&yT(n,f))?R(A,Qp.call(t,e),2):A.return(h);case 2:if(v=A.h,v.keySystemAccess){v.keySystemAccess=new Oy(v.keySystemAccess,n,r),A.u(3);break}if(!e.keySystemConfiguration){A.u(3);break}return R(A,uP(e),5);case 5:v.keySystemAccess=A.h;case 3:return A.return(v)}})}function uP(e){var t,n;return Ne(function(r){if(r.g==1){var u=e.keySystemConfiguration,c=[],f=[];return u.audio&&c.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:u.audio.encryptionScheme}),u.video&&f.push({robustness:u.video.robustness||"",contentType:e.video.contentType,encryptionScheme:u.video.encryptionScheme}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},c.length&&(u.audioCapabilities=c),f.length&&(u.videoCapabilities=f),t=u,R(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}ne("McEncryptionSchemePolyfill",oP),oP.install=aP;function Oy(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}Oy.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},Oy.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function lP(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function cP(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function yT(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&(R9||C9))}function ET(){}function fP(){nP(),aP()}ne("EncryptionSchemePolyfills",ET),ET.install=fP;var C9=navigator.userAgent.includes("CrKey"),R9=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10);typeof b<"u"&&b.exports&&(b.exports=ET)}).call(l,o,o,void 0);for(var d in l.shaka)i[d]=l.shaka[d]})()})(GB);const c0=Kb(GB),Kc=class Kc{static async setup_stream(o,l,d){if(this.licenseUrl=l,this.customDrmHeaders=d,!o.mediaKeys)try{const g=await this.get_media_keys(o);if(g){await o.setMediaKeys(g.mediaKey);const S=g.mediaKey.createSession();this.on_handle_license_messageEvent=async b=>{await this.handle_license_messageEvent(g.mediaKey,S,b)},this.on_handle_encrypted_event=async b=>{await this.handle_encrypted_event(g,S,b)},S.addEventListener("message",this.on_handle_license_messageEvent),o.addEventListener("encrypted",this.on_handle_encrypted_event)}}catch(g){console.error("### DRMManager.setupStream error:",g)}}static async create_mediaKey_sessions(o){for(let l=0;l<o;l++){const g=await(await navigator.requestMediaKeySystemAccess("com.widevine.alpha",this.DRM_CONFIG)).createMediaKeys();this.mediaKey_pool.push({id:this.mediaKey_pool.length+1,mediaKey:g,htmlMediaElement:null,isInitialized:!1})}}static async release_mediaKeys(o){const l=this.mediaKey_pool.find(d=>d.htmlMediaElement===o);this.mediaKey_pool.length>0&&l&&(await o.setMediaKeys(null),l.htmlMediaElement=null,l.isInitialized=!1)}static get is_prepared(){return this.mediaKey_pool.length>1}static get_mediaKey_id(o){const l=this.mediaKey_pool.find(d=>d.mediaKey===o);return l?l.id:null}static async get_media_keys(o){let l=this.mediaKey_pool.find(d=>d.htmlMediaElement===o);if(l)return l;if((this.mediaKey_pool.length<=0||this.mediaKey_pool.every(d=>d.htmlMediaElement))&&await this.create_mediaKey_sessions(1),l=this.mediaKey_pool.find(d=>!d.htmlMediaElement),l)return l.htmlMediaElement=o,l;throw new Error("No media keys available")}static async handle_license_messageEvent(o,l,d){try{const g=d.message.byteLength;console.log(g,"byteLength");let S;g===2?S=g.toString():S="".concat(this.get_mediaKey_id(o),"-").concat(g);let b;this.license_cache.has(S)?(console.log("using cached licence"),b=this.license_cache.get(S)):(b=await(await fetch(this.licenseUrl,{method:"POST",body:d.message,headers:{"Content-Type":"application/octet-stream",...this.customDrmHeaders}})).arrayBuffer(),b?this.license_cache.set(S,b):console.error("License response is null")),b?await l.update(b):console.error("License not found in cache and could not be fetched")}catch(g){console.error("Error during license acquisition: ".concat(g))}}static async handle_encrypted_event(o,l,d){if(d.initDataType&&d.initData)try{if(!o.isInitialized){o.isInitialized=!0;const g=this.mediaKey_pool.findIndex(S=>S.id===o.id);g!==-1&&(this.mediaKey_pool[g]=o),await l.generateRequest(d.initDataType,d.initData)}}catch(g){console.error("Failed to generate a license request: ".concat(g))}else console.error("Encrypted event is missing initData or initDataType")}};Kc.licenseUrl="",Kc.customDrmHeaders={},Kc.license_cache=new Map,Kc.mediaKey_pool=[],Kc.DRM_CONFIG=[{keySystem:"com.widevine.alpha",initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"'},{contentType:'video/mp4; codecs="avc1.64001f"'},{contentType:'video/mp4; codecs="avc1.64001e"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}],sessionTypes:["temporary"],persistentState:"optional",distinctiveIdentifier:"optional"}];let Pb=Kc;class OW extends qB{constructor(o){var l;super(o),this.name="ShakaEngine",this.addPolicyToRequests=(d,g)=>{switch(d){case c0.net.NetworkingEngine.RequestType.MANIFEST:case c0.net.NetworkingEngine.RequestType.SEGMENT:if(!this.options.policyQuery||!this.options.policyQuery.startsWith("?"))break;g.uris[0]+=this.options.policyQuery;break;case c0.net.NetworkingEngine.RequestType.LICENSE:if(!this.options.customLicenceRequestHeaders)break;Object.entries(this.options.customLicenceRequestHeaders).forEach(([S,b])=>{g.headers[S]=b});break}},this.addPolicyToRequests=this.addPolicyToRequests.bind(this),this.player=new c0.Player,this.options.widevineLicenseUrl&&this.player.configure({drm:{servers:{"com.widevine.alpha":this.options.keepProtectionData===!1?this.options.widevineLicenseUrl:" "}},streaming:{bufferingGoal:120,rebufferingGoal:60,bufferBehind:0}}),(l=this.player.getNetworkingEngine())==null||l.registerRequestFilter(this.addPolicyToRequests)}destroy(){this.player&&this.player.destroy(),super.destroy()}async load(o){var l;if(this.player&&o){if(this.options.widevineLicenseUrl&&this.options.keepProtectionData!==!1)try{await this.player.unload(),await Pb.setup_stream(this.options.element,this.options.widevineLicenseUrl,(l=this.options.customLicenceRequestHeaders)!=null?l:{})}catch(d){console.log(d)}await this.player.attach(this.options.element),await this.player.load(o,void 0)}}}class eF extends hf{constructor(o){super(),this.options=o,this.options.preferredTech==="shaka"?this.engine=new OW(o):this.engine=new PW(o),this.engine.onAny(this.propagateEvent.bind(this))}get playerEngine(){return this.engine}get videoElement(){return this.engine.video}propagateEvent(o,l){this.emit(o,l)}destroy(){this.engine.destroy()}get stats(){return this.engine.getStats()}async load(o,l){this.currentSource=o,await this.engine.load(o,l)}}class LW extends hf{constructor(o){super(),this.options=o,this.playerSyncerDestroyFunctions=[],this.eventClock=o.eventClock,this.containerElement=o.containerElement,this.players=[new eF({autoPlay:!1,...o.playerOptions,element:document.createElement("video")}),new eF({autoPlay:!1,...o.playerOptions,element:document.createElement("video")})]}get currentSource(){var o;return(o=this.runningPlayer)==null?void 0:o.currentSource}get currentCamera(){return this._currentCamera}get stats(){var o;return(o=this.runningPlayer)==null?void 0:o.engine.getStats()}logPlayerStuff(){this.players.forEach((o,l)=>{console.log("Bitrate",l,o.engine.video.getVideoPlaybackQuality()),console.log("Time",l,o.engine.video.currentTime),console.log("Paused",l,o.engine.video.paused)})}propagateEvent(o,l){this.emit(o,l)}async load(o,l,d){return await new Promise((g,S)=>{const b=this.players.find(p=>p!==this.runningPlayer);if(!b)throw new Error("Found no ImagienPlayer to use :( ");try{b.onAny(this.propagateEvent.bind(this)),b.load(l,d).then(()=>{g(async()=>{await new Promise((p,w)=>{var k;b.once("playing",()=>{var y,P;(y=this.runningPlayer)==null||y.playerEngine.video.pause(),(P=this.runningPlayer)==null||P.clearAllListeners(),this.runningPlayer=b,this._currentCamera=o;const C=this.containerElement.querySelector("video");C==null||C.remove(),this.containerElement.appendChild(b.engine.video),this.playerSyncerDestroyFunctions.forEach(m=>{m()});const E=((d==null?void 0:d.eventOffset)||0)-((d==null?void 0:d.reelOffset)||0);this.playerSyncerDestroyFunctions.push(this.eventClock.playerSyncer.connectMediaElement(b.playerEngine.video,E)),p()});try{b.videoElement.currentTime=this.eventClock.getExpectedPositionInSeconds()-((k=d==null?void 0:d.eventOffset)!=null?k:0),b.playerEngine.video.play()}catch(C){w(C)}})})})}catch(p){console.error(p),S(p)}})}async requestFullscreen(){await this.containerElement.requestFullscreen()}async exitFullscreen(){await document.exitFullscreen()}destroy(){super.destroy(),this.players.forEach(o=>{o.destroy()})}}var fg=function(i){return i&&i.Math===Math&&i},Va=fg(typeof globalThis=="object"&&globalThis)||fg(typeof window=="object"&&window)||fg(typeof self=="object"&&self)||fg(typeof fu=="object"&&fu)||fg(typeof fu=="object"&&fu)||function(){return this}()||Function("return this")(),lR={},vs=function(i){try{return!!i()}catch(o){return!0}},kW=vs,vc=!kW(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),FW=vs,cR=!FW(function(){var i=(function(){}).bind();return typeof i!="function"||i.hasOwnProperty("prototype")}),UW=cR,f0=Function.prototype.call,Rl=UW?f0.bind(f0):function(){return f0.apply(f0,arguments)},HB={},VB={}.propertyIsEnumerable,KB=Object.getOwnPropertyDescriptor,BW=KB&&!VB.call({1:2},1);HB.f=BW?function(o){var l=KB(this,o);return!!l&&l.enumerable}:VB;var zB=function(i,o){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:o}},YB=cR,WB=Function.prototype,Ob=WB.call,jW=YB&&WB.bind.bind(Ob,Ob),Ta=YB?jW:function(i){return function(){return Ob.apply(i,arguments)}},$B=Ta,ZW=$B({}.toString),qW=$B("".slice),DE=function(i){return qW(ZW(i),8,-1)},GW=Ta,HW=vs,VW=DE,lI=Object,KW=GW("".split),zW=HW(function(){return!lI("z").propertyIsEnumerable(0)})?function(i){return VW(i)==="String"?KW(i,""):lI(i)}:lI,PE=function(i){return i==null},YW=PE,WW=TypeError,fm=function(i){if(YW(i))throw new WW("Can't call method on "+i);return i},$W=zW,XW=fm,OE=function(i){return $W(XW(i))},cI=typeof document=="object"&&document.all,Ka=typeof cI>"u"&&cI!==void 0?function(i){return typeof i=="function"||i===cI}:function(i){return typeof i=="function"},QW=Ka,Ih=function(i){return typeof i=="object"?i!==null:QW(i)},fI=Va,JW=Ka,e$=function(i){return JW(i)?i:void 0},fR=function(i,o){return arguments.length<2?e$(fI[i]):fI[i]&&fI[i][o]},t$=Ta,XB=t$({}.isPrototypeOf),n$=typeof navigator<"u"&&String(navigator.userAgent)||"",QB=Va,dI=n$,tF=QB.process,nF=QB.Deno,rF=tF&&tF.versions||nF&&nF.version,iF=rF&&rF.v8,cu,rE;iF&&(cu=iF.split("."),rE=cu[0]>0&&cu[0]<4?1:+(cu[0]+cu[1]));!rE&&dI&&(cu=dI.match(/Edge\/(\d+)/),(!cu||cu[1]>=74)&&(cu=dI.match(/Chrome\/(\d+)/),cu&&(rE=+cu[1])));var r$=rE,oF=r$,i$=vs,o$=Va,a$=o$.String,JB=!!Object.getOwnPropertySymbols&&!i$(function(){var i=Symbol("symbol detection");return!a$(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&oF&&oF<41}),s$=JB,e8=s$&&!Symbol.sham&&typeof Symbol.iterator=="symbol",u$=fR,l$=Ka,c$=XB,f$=e8,d$=Object,t8=f$?function(i){return typeof i=="symbol"}:function(i){var o=u$("Symbol");return l$(o)&&c$(o.prototype,d$(i))},h$=String,p$=function(i){try{return h$(i)}catch(o){return"Object"}},g$=Ka,m$=p$,v$=TypeError,y$=function(i){if(g$(i))return i;throw new v$(m$(i)+" is not a function")},E$=y$,_$=PE,dR=function(i,o){var l=i[o];return _$(l)?void 0:E$(l)},hI=Rl,pI=Ka,gI=Ih,T$=TypeError,S$=function(i,o){var l,d;if(o==="string"&&pI(l=i.toString)&&!gI(d=hI(l,i))||pI(l=i.valueOf)&&!gI(d=hI(l,i))||o!=="string"&&pI(l=i.toString)&&!gI(d=hI(l,i)))return d;throw new T$("Can't convert object to primitive value")},n8={exports:{}},aF=Va,w$=Object.defineProperty,hR=function(i,o){try{w$(aF,i,{value:o,configurable:!0,writable:!0})}catch(l){aF[i]=o}return o},A$=Va,I$=hR,sF="__core-js_shared__",uF=n8.exports=A$[sF]||I$(sF,{});(uF.versions||(uF.versions=[])).push({version:"3.37.1",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var pR=n8.exports,lF=pR,gR=function(i,o){return lF[i]||(lF[i]=o||{})},b$=fm,C$=Object,r8=function(i){return C$(b$(i))},R$=Ta,x$=r8,N$=R$({}.hasOwnProperty),yc=Object.hasOwn||function(o,l){return N$(x$(o),l)},M$=Ta,D$=0,P$=Math.random(),O$=M$(1 .toString),i8=function(i){return"Symbol("+(i===void 0?"":i)+")_"+O$(++D$+P$,36)},L$=Va,k$=gR,cF=yc,F$=i8,U$=JB,B$=e8,eh=L$.Symbol,mI=k$("wks"),j$=B$?eh.for||eh:eh&&eh.withoutSetter||F$,gf=function(i){return cF(mI,i)||(mI[i]=U$&&cF(eh,i)?eh[i]:j$("Symbol."+i)),mI[i]},Z$=Rl,fF=Ih,dF=t8,q$=dR,G$=S$,H$=gf,V$=TypeError,K$=H$("toPrimitive"),z$=function(i,o){if(!fF(i)||dF(i))return i;var l=q$(i,K$),d;if(l){if(o===void 0&&(o="default"),d=Z$(l,i,o),!fF(d)||dF(d))return d;throw new V$("Can't convert object to primitive value")}return o===void 0&&(o="number"),G$(i,o)},Y$=z$,W$=t8,o8=function(i){var o=Y$(i,"string");return W$(o)?o:o+""},$$=Va,hF=Ih,Lb=$$.document,X$=hF(Lb)&&hF(Lb.createElement),a8=function(i){return X$?Lb.createElement(i):{}},Q$=vc,J$=vs,eX=a8,s8=!Q$&&!J$(function(){return Object.defineProperty(eX("div"),"a",{get:function(){return 7}}).a!==7}),tX=vc,nX=Rl,rX=HB,iX=zB,oX=OE,aX=o8,sX=yc,uX=s8,pF=Object.getOwnPropertyDescriptor;lR.f=tX?pF:function(o,l){if(o=oX(o),l=aX(l),uX)try{return pF(o,l)}catch(d){}if(sX(o,l))return iX(!nX(rX.f,o,l),o[l])};var dm={},lX=vc,cX=vs,u8=lX&&cX(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),fX=Ih,dX=String,hX=TypeError,mf=function(i){if(fX(i))return i;throw new hX(dX(i)+" is not an object")},pX=vc,gX=s8,mX=u8,d0=mf,gF=o8,vX=TypeError,vI=Object.defineProperty,yX=Object.getOwnPropertyDescriptor,yI="enumerable",EI="configurable",_I="writable";dm.f=pX?mX?function(o,l,d){if(d0(o),l=gF(l),d0(d),typeof o=="function"&&l==="prototype"&&"value"in d&&_I in d&&!d[_I]){var g=yX(o,l);g&&g[_I]&&(o[l]=d.value,d={configurable:EI in d?d[EI]:g[EI],enumerable:yI in d?d[yI]:g[yI],writable:!1})}return vI(o,l,d)}:vI:function(o,l,d){if(d0(o),l=gF(l),d0(d),gX)try{return vI(o,l,d)}catch(g){}if("get"in d||"set"in d)throw new vX("Accessors not supported");return"value"in d&&(o[l]=d.value),o};var EX=vc,_X=dm,TX=zB,mR=EX?function(i,o,l){return _X.f(i,o,TX(1,l))}:function(i,o,l){return i[o]=l,i},l8={exports:{}},kb=vc,SX=yc,c8=Function.prototype,wX=kb&&Object.getOwnPropertyDescriptor,vR=SX(c8,"name"),AX=vR&&(function(){}).name==="something",IX=vR&&(!kb||kb&&wX(c8,"name").configurable),bX={EXISTS:vR,PROPER:AX,CONFIGURABLE:IX},CX=Ta,RX=Ka,Fb=pR,xX=CX(Function.toString);RX(Fb.inspectSource)||(Fb.inspectSource=function(i){return xX(i)});var NX=Fb.inspectSource,MX=Va,DX=Ka,mF=MX.WeakMap,PX=DX(mF)&&/native code/.test(String(mF)),OX=gR,LX=i8,vF=OX("keys"),f8=function(i){return vF[i]||(vF[i]=LX(i))},yR={},kX=PX,d8=Va,FX=Ih,UX=mR,TI=yc,SI=pR,BX=f8,jX=yR,yF="Object already initialized",Ub=d8.TypeError,ZX=d8.WeakMap,iE,Qg,oE,qX=function(i){return oE(i)?Qg(i):iE(i,{})},GX=function(i){return function(o){var l;if(!FX(o)||(l=Qg(o)).type!==i)throw new Ub("Incompatible receiver, "+i+" required");return l}};if(kX||SI.state){var Lu=SI.state||(SI.state=new ZX);Lu.get=Lu.get,Lu.has=Lu.has,Lu.set=Lu.set,iE=function(i,o){if(Lu.has(i))throw new Ub(yF);return o.facade=i,Lu.set(i,o),o},Qg=function(i){return Lu.get(i)||{}},oE=function(i){return Lu.has(i)}}else{var Ud=BX("state");jX[Ud]=!0,iE=function(i,o){if(TI(i,Ud))throw new Ub(yF);return o.facade=i,UX(i,Ud,o),o},Qg=function(i){return TI(i,Ud)?i[Ud]:{}},oE=function(i){return TI(i,Ud)}}var h8={set:iE,get:Qg,has:oE,enforce:qX,getterFor:GX},ER=Ta,HX=vs,VX=Ka,h0=yc,Bb=vc,KX=bX.CONFIGURABLE,zX=NX,p8=h8,YX=p8.enforce,WX=p8.get,EF=String,R0=Object.defineProperty,$X=ER("".slice),XX=ER("".replace),QX=ER([].join),JX=Bb&&!HX(function(){return R0(function(){},"length",{value:8}).length!==8}),eQ=String(String).split("String"),tQ=l8.exports=function(i,o,l){$X(EF(o),0,7)==="Symbol("&&(o="["+XX(EF(o),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),l&&l.getter&&(o="get "+o),l&&l.setter&&(o="set "+o),(!h0(i,"name")||KX&&i.name!==o)&&(Bb?R0(i,"name",{value:o,configurable:!0}):i.name=o),JX&&l&&h0(l,"arity")&&i.length!==l.arity&&R0(i,"length",{value:l.arity});try{l&&h0(l,"constructor")&&l.constructor?Bb&&R0(i,"prototype",{writable:!1}):i.prototype&&(i.prototype=void 0)}catch(g){}var d=YX(i);return h0(d,"source")||(d.source=QX(eQ,typeof o=="string"?o:"")),i};Function.prototype.toString=tQ(function(){return VX(this)&&WX(this).source||zX(this)},"toString");var nQ=l8.exports,rQ=Ka,iQ=dm,oQ=nQ,aQ=hR,g8=function(i,o,l,d){d||(d={});var g=d.enumerable,S=d.name!==void 0?d.name:o;if(rQ(l)&&oQ(l,S,d),d.global)g?i[o]=l:aQ(o,l);else{try{d.unsafe?i[o]&&(g=!0):delete i[o]}catch(b){}g?i[o]=l:iQ.f(i,o,{value:l,enumerable:!1,configurable:!d.nonConfigurable,writable:!d.nonWritable})}return i},m8={},sQ=Math.ceil,uQ=Math.floor,lQ=Math.trunc||function(o){var l=+o;return(l>0?uQ:sQ)(l)},cQ=lQ,LE=function(i){var o=+i;return o!==o||o===0?0:cQ(o)},fQ=LE,dQ=Math.max,hQ=Math.min,pQ=function(i,o){var l=fQ(i);return l<0?dQ(l+o,0):hQ(l,o)},gQ=LE,mQ=Math.min,v8=function(i){var o=gQ(i);return o>0?mQ(o,9007199254740991):0},vQ=v8,yQ=function(i){return vQ(i.length)},EQ=OE,_Q=pQ,TQ=yQ,_F=function(i){return function(o,l,d){var g=EQ(o),S=TQ(g);if(S===0)return!i&&-1;var b=_Q(d,S),p;if(i&&l!==l){for(;S>b;)if(p=g[b++],p!==p)return!0}else for(;S>b;b++)if((i||b in g)&&g[b]===l)return i||b||0;return!i&&-1}},SQ={includes:_F(!0),indexOf:_F(!1)},wQ=Ta,wI=yc,AQ=OE,IQ=SQ.indexOf,bQ=yR,TF=wQ([].push),y8=function(i,o){var l=AQ(i),d=0,g=[],S;for(S in l)!wI(bQ,S)&&wI(l,S)&&TF(g,S);for(;o.length>d;)wI(l,S=o[d++])&&(~IQ(g,S)||TF(g,S));return g},_R=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],CQ=y8,RQ=_R,xQ=RQ.concat("length","prototype");m8.f=Object.getOwnPropertyNames||function(o){return CQ(o,xQ)};var E8={};E8.f=Object.getOwnPropertySymbols;var NQ=fR,MQ=Ta,DQ=m8,PQ=E8,OQ=mf,LQ=MQ([].concat),kQ=NQ("Reflect","ownKeys")||function(o){var l=DQ.f(OQ(o)),d=PQ.f;return d?LQ(l,d(o)):l},SF=yc,FQ=kQ,UQ=lR,BQ=dm,jQ=function(i,o,l){for(var d=FQ(o),g=BQ.f,S=UQ.f,b=0;b<d.length;b++){var p=d[b];!SF(i,p)&&!(l&&SF(l,p))&&g(i,p,S(o,p))}},ZQ=vs,qQ=Ka,GQ=/#|\.prototype\./,hm=function(i,o){var l=VQ[HQ(i)];return l===zQ?!0:l===KQ?!1:qQ(o)?ZQ(o):!!o},HQ=hm.normalize=function(i){return String(i).replace(GQ,".").toLowerCase()},VQ=hm.data={},KQ=hm.NATIVE="N",zQ=hm.POLYFILL="P",YQ=hm,p0=Va,WQ=lR.f,$Q=mR,XQ=g8,QQ=hR,JQ=jQ,eJ=YQ,_8=function(i,o){var l=i.target,d=i.global,g=i.stat,S,b,p,w,k,C;if(d?b=p0:g?b=p0[l]||QQ(l,{}):b=p0[l]&&p0[l].prototype,b)for(p in o){if(k=o[p],i.dontCallGetSet?(C=WQ(b,p),w=C&&C.value):w=b[p],S=eJ(d?p:l+(g?".":"#")+p,i.forced),!S&&w!==void 0){if(typeof k==typeof w)continue;JQ(k,w)}(i.sham||w&&w.sham)&&$Q(k,"sham",!0),XQ(b,p,k,i)}},tJ=Ih,nJ=DE,rJ=gf,iJ=rJ("match"),oJ=function(i){var o;return tJ(i)&&((o=i[iJ])!==void 0?!!o:nJ(i)==="RegExp")},aJ=gf,sJ=aJ("toStringTag"),T8={};T8[sJ]="z";var uJ=String(T8)==="[object z]",lJ=uJ,cJ=Ka,x0=DE,fJ=gf,dJ=fJ("toStringTag"),hJ=Object,pJ=x0(function(){return arguments}())==="Arguments",gJ=function(i,o){try{return i[o]}catch(l){}},mJ=lJ?x0:function(i){var o,l,d;return i===void 0?"Undefined":i===null?"Null":typeof(l=gJ(o=hJ(i),dJ))=="string"?l:pJ?x0(o):(d=x0(o))==="Object"&&cJ(o.callee)?"Arguments":d},vJ=mJ,yJ=String,kE=function(i){if(vJ(i)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return yJ(i)},EJ=mf,S8=function(){var i=EJ(this),o="";return i.hasIndices&&(o+="d"),i.global&&(o+="g"),i.ignoreCase&&(o+="i"),i.multiline&&(o+="m"),i.dotAll&&(o+="s"),i.unicode&&(o+="u"),i.unicodeSets&&(o+="v"),i.sticky&&(o+="y"),o},_J=Rl,TJ=yc,SJ=XB,wJ=S8,wF=RegExp.prototype,AJ=function(i){var o=i.flags;return o===void 0&&!("flags"in wF)&&!TJ(i,"flags")&&SJ(wF,i)?_J(wJ,i):o},TR=Ta,IJ=r8,bJ=Math.floor,AI=TR("".charAt),CJ=TR("".replace),II=TR("".slice),RJ=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,xJ=/\$([$&'`]|\d{1,2})/g,w8=function(i,o,l,d,g,S){var b=l+i.length,p=d.length,w=xJ;return g!==void 0&&(g=IJ(g),w=RJ),CJ(S,w,function(k,C){var E;switch(AI(C,0)){case"$":return"$";case"&":return i;case"`":return II(o,0,l);case"'":return II(o,b);case"<":E=g[II(C,1,-1)];break;default:var y=+C;if(y===0)return k;if(y>p){var P=bJ(y/10);return P===0?k:P<=p?d[P-1]===void 0?AI(C,1):d[P-1]+AI(C,1):k}E=d[y-1]}return E===void 0?"":E})},NJ=_8,MJ=Rl,SR=Ta,AF=fm,DJ=Ka,PJ=PE,OJ=oJ,dg=kE,LJ=dR,kJ=AJ,FJ=w8,UJ=gf,BJ=UJ("replace"),jJ=TypeError,bI=SR("".indexOf);SR("".replace);var IF=SR("".slice),ZJ=Math.max;NJ({target:"String",proto:!0},{replaceAll:function(o,l){var d=AF(this),g,S,b,p,w,k,C,E,y,P=0,m=0,T="";if(!PJ(o)){if(g=OJ(o),g&&(S=dg(AF(kJ(o))),!~bI(S,"g")))throw new jJ("`.replaceAll` does not allow non-global regexes");if(b=LJ(o,BJ),b)return MJ(b,o,d,l)}for(p=dg(d),w=dg(o),k=DJ(l),k||(l=dg(l)),C=w.length,E=ZJ(1,C),P=bI(p,w);P!==-1;)y=k?dg(l(w,P,p)):FJ(w,p,P,[],void 0,l),T+=IF(p,m,P)+y,m=P+C,P=P+E>p.length?-1:bI(p,w,P+E);return m<p.length&&(T+=IF(p,m)),T}});var wR=vs,qJ=Va,AR=qJ.RegExp,IR=wR(function(){var i=AR("a","y");return i.lastIndex=2,i.exec("abcd")!==null}),GJ=IR||wR(function(){return!AR("a","y").sticky}),HJ=IR||wR(function(){var i=AR("^r","gy");return i.lastIndex=2,i.exec("str")!==null}),VJ={BROKEN_CARET:HJ,MISSED_STICKY:GJ,UNSUPPORTED_Y:IR},A8={},KJ=y8,zJ=_R,YJ=Object.keys||function(o){return KJ(o,zJ)},WJ=vc,$J=u8,XJ=dm,QJ=mf,JJ=OE,eee=YJ;A8.f=WJ&&!$J?Object.defineProperties:function(o,l){QJ(o);for(var d=JJ(l),g=eee(l),S=g.length,b=0,p;S>b;)XJ.f(o,p=g[b++],d[p]);return o};var tee=fR,nee=tee("document","documentElement"),ree=mf,iee=A8,bF=_R,oee=yR,aee=nee,see=a8,uee=f8,CF=">",RF="<",jb="prototype",Zb="script",I8=uee("IE_PROTO"),CI=function(){},b8=function(i){return RF+Zb+CF+i+RF+"/"+Zb+CF},xF=function(i){i.write(b8("")),i.close();var o=i.parentWindow.Object;return i=null,o},lee=function(){var i=see("iframe"),o="java"+Zb+":",l;return i.style.display="none",aee.appendChild(i),i.src=String(o),l=i.contentWindow.document,l.open(),l.write(b8("document.F=Object")),l.close(),l.F},g0,N0=function(){try{g0=new ActiveXObject("htmlfile")}catch(o){}N0=typeof document<"u"?document.domain&&g0?xF(g0):lee():xF(g0);for(var i=bF.length;i--;)delete N0[jb][bF[i]];return N0()};oee[I8]=!0;var cee=Object.create||function(o,l){var d;return o!==null?(CI[jb]=ree(o),d=new CI,CI[jb]=null,d[I8]=o):d=N0(),l===void 0?d:iee.f(d,l)},fee=vs,dee=Va,hee=dee.RegExp,pee=fee(function(){var i=hee(".","s");return!(i.dotAll&&i.test("\n")&&i.flags==="s")}),gee=vs,mee=Va,vee=mee.RegExp,yee=gee(function(){var i=vee("(?<a>b)","g");return i.exec("b").groups.a!=="b"||"b".replace(i,"$<a>c")!=="bc"}),th=Rl,FE=Ta,Eee=kE,_ee=S8,Tee=VJ,See=gR,wee=cee,Aee=h8.get,Iee=pee,bee=yee,Cee=See("native-string-replace",String.prototype.replace),aE=RegExp.prototype.exec,qb=aE,Ree=FE("".charAt),xee=FE("".indexOf),Nee=FE("".replace),RI=FE("".slice),Gb=function(){var i=/a/,o=/b*/g;return th(aE,i,"a"),th(aE,o,"a"),i.lastIndex!==0||o.lastIndex!==0}(),C8=Tee.BROKEN_CARET,Hb=/()??/.exec("")[1]!==void 0,Mee=Gb||Hb||C8||Iee||bee;Mee&&(qb=function(o){var l=this,d=Aee(l),g=Eee(o),S=d.raw,b,p,w,k,C,E,y;if(S)return S.lastIndex=l.lastIndex,b=th(qb,S,g),l.lastIndex=S.lastIndex,b;var P=d.groups,m=C8&&l.sticky,T=th(_ee,l),U=l.source,M=0,_=g;if(m&&(T=Nee(T,"y",""),xee(T,"g")===-1&&(T+="g"),_=RI(g,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&Ree(g,l.lastIndex-1)!=="\n")&&(U="(?: "+U+")",_=" "+_,M++),p=new RegExp("^(?:"+U+")",T)),Hb&&(p=new RegExp("^"+U+"$(?!\\s)",T)),Gb&&(w=l.lastIndex),k=th(aE,m?p:l,_),m?k?(k.input=RI(k.input,M),k[0]=RI(k[0],M),k.index=l.lastIndex,l.lastIndex+=k[0].length):l.lastIndex=0:Gb&&k&&(l.lastIndex=l.global?k.index+k[0].length:w),Hb&&k&&k.length>1&&th(Cee,k[0],p,function(){for(C=1;C<arguments.length-2;C++)arguments[C]===void 0&&(k[C]=void 0)}),k&&P)for(k.groups=E=wee(null),C=0;C<P.length;C++)y=P[C],E[y[0]]=k[y[1]];return k});var bR=qb,Dee=_8,NF=bR;Dee({target:"RegExp",proto:!0,forced:/./.exec!==NF},{exec:NF});var Pee=cR,R8=Function.prototype,MF=R8.apply,DF=R8.call,Oee=typeof Reflect=="object"&&Reflect.apply||(Pee?DF.bind(MF):function(){return DF.apply(MF,arguments)}),PF=Rl,OF=g8,Lee=bR,LF=vs,x8=gf,kee=mR,Fee=x8("species"),xI=RegExp.prototype,Uee=function(i,o,l,d){var g=x8(i),S=!LF(function(){var k={};return k[g]=function(){return 7},""[i](k)!==7}),b=S&&!LF(function(){var k=!1,C=/a/;return i==="split"&&(C={},C.constructor={},C.constructor[Fee]=function(){return C},C.flags="",C[g]=/./[g]),C.exec=function(){return k=!0,null},C[g](""),!k});if(!S||!b||l){var p=/./[g],w=o(g,""[i],function(k,C,E,y,P){var m=C.exec;return m===Lee||m===xI.exec?S&&!P?{done:!0,value:PF(p,C,E,y)}:{done:!0,value:PF(k,E,C,y)}:{done:!1}});OF(String.prototype,i,w[0]),OF(xI,g,w[1])}d&&kee(xI[g],"sham",!0)},CR=Ta,Bee=LE,jee=kE,Zee=fm,qee=CR("".charAt),kF=CR("".charCodeAt),Gee=CR("".slice),FF=function(i){return function(o,l){var d=jee(Zee(o)),g=Bee(l),S=d.length,b,p;return g<0||g>=S?i?"":void 0:(b=kF(d,g),b<55296||b>56319||g+1===S||(p=kF(d,g+1))<56320||p>57343?i?qee(d,g):b:i?Gee(d,g,g+2):(b-55296<<10)+(p-56320)+65536)}},Hee={codeAt:FF(!1),charAt:FF(!0)},Vee=Hee.charAt,Kee=function(i,o,l){return o+(l?Vee(i,o).length:1)},UF=Rl,zee=mf,Yee=Ka,Wee=DE,$ee=bR,Xee=TypeError,Qee=function(i,o){var l=i.exec;if(Yee(l)){var d=UF(l,i,o);return d!==null&&zee(d),d}if(Wee(i)==="RegExp")return UF($ee,i,o);throw new Xee("RegExp#exec called on incompatible receiver")},Jee=Oee,BF=Rl,UE=Ta,ete=Uee,tte=vs,nte=mf,rte=Ka,ite=PE,ote=LE,ate=v8,Bd=kE,ste=fm,ute=Kee,lte=dR,cte=w8,fte=Qee,dte=gf,Vb=dte("replace"),hte=Math.max,pte=Math.min,gte=UE([].concat),NI=UE([].push),jF=UE("".indexOf),ZF=UE("".slice),mte=function(i){return i===void 0?i:String(i)},vte=function(){return"a".replace(/./,"$0")==="$0"}(),qF=function(){return/./[Vb]?/./[Vb]("a","$0")==="":!1}(),yte=!tte(function(){var i=/./;return i.exec=function(){var o=[];return o.groups={a:"7"},o},"".replace(i,"$<a>")!=="7"});ete("replace",function(i,o,l){var d=qF?"$":"$0";return[function(S,b){var p=ste(this),w=ite(S)?void 0:lte(S,Vb);return w?BF(w,S,p,b):BF(o,Bd(p),S,b)},function(g,S){var b=nte(this),p=Bd(g);if(typeof S=="string"&&jF(S,d)===-1&&jF(S,"$<")===-1){var w=l(o,b,p,S);if(w.done)return w.value}var k=rte(S);k||(S=Bd(S));var C=b.global,E;C&&(E=b.unicode,b.lastIndex=0);for(var y=[],P;P=fte(b,p),!(P===null||(NI(y,P),!C));){var m=Bd(P[0]);m===""&&(b.lastIndex=ute(p,ate(b.lastIndex),E))}for(var T="",U=0,M=0;M<y.length;M++){P=y[M];for(var _=Bd(P[0]),I=hte(pte(ote(P.index),p.length),0),x=[],Z,Y=1;Y<P.length;Y++)NI(x,mte(P[Y]));var $=P.groups;if(k){var Q=gte([_],x,I,p);$!==void 0&&NI(Q,$),Z=Bd(Jee(S,void 0,Q))}else Z=cte(_,p,I,x,$,S);I>=U&&(T+=ZF(p,U,I)+Z,U=I+_.length)}return T+ZF(p,U)}]},!yte||!vte||qF);var Ete=Va,_te=Ta,Tte=function(i,o){return _te(Ete[i].prototype[o])},Ste=Tte;Ste("String","replaceAll");function RR(){const i=vu(),o=pf(),[l]=jB();return In.useCallback(async(d,g)=>{var p;if(!l||!i)return;const S=(p=o==null?void 0:o.distributionUrl)!=null?p:"";let b=l.cameraURLTemplate;if(b=b.replace("{{baseURL}}",S),b=b.replace("{{folderName}}/",g.camera.folderName?g.camera.folderName+"/":""),b=b.replaceAll("{{assetName}}",g.camera.assetName||""),b!==d.currentSource&&o)return await d.load(g,b,{startTimeSeconds:i.getExpectedPositionInSeconds()-Ci(g.camera.span.time,o.frameRate),eventOffset:Ci(g.camera.span.time,o.frameRate),reelOffset:Ci(g.camera.reelOffset,o.frameRate)})},[i,l,o])}function wte(){const i=RR();return In.useCallback(async(o,l)=>await i(o,l).then(async d=>await(d==null?void 0:d())),[i])}function Ate(){const i=vu(),o=Ah(),l=sR();In.useEffect(()=>{if(!i||!o||!l)return;const d=({command:g,reference:S,start:b})=>{i.pausePlayStream(g,S,b)};return o.on("pausePlayStream",d),()=>{o.off("pausePlayStream",d)}},[i,o,l])}function Ite(i){const o=vu(),l=pf(),d=Ah(),g=wte(),S=RR();In.useEffect(()=>{if(!d||!l||!o||!i)return;let b,p=[void 0,-1];const w=()=>{const T=o.getExpectedPositionInSeconds()<=0?0:o.getExpectedPositionInSeconds();return NE(l,T)[0]},k=T=>{p[0]=S(i,T),p[1]=T.index},C=T=>{if(p[0]&&p[1]===T.index){p[0].then(U=>{try{U==null||U()}catch(M){console.error("failed to play loaded stream",M)}}),p=[void 0,-1];return}try{g(i,T)}catch(U){console.error("failed to play stream",U)}},E=()=>{const T=w();T&&k(T)},y=()=>{const T=w();T&&C(T)},P=({index:T})=>{var M;const U=(M=K3(T,l))!=null?M:Db(T,l,o);U&&k(U)},m=({index:T})=>{var M;const U=(M=K3(T,l))!=null?M:Db(T,l,o);U&&(k(U),b=setTimeout(()=>{C(U)},1900))};return d.on("prepareCast",P),d.on("cast",m),o.on("prepareStart",E),o.on("start",y),o.isLive?(o.preparePlayback(),y()):o.isInPrepare?E():console.log("HÄÄRRR"),()=>{d.off("prepareCast",P),d.off("cast",m),o.off("prepareStart",E),o.off("start",y),clearTimeout(b)}},[d,l,o,i,g,S])}function bte(i){const o=cm();In.useEffect(()=>{if(!i||!o)return;const l=()=>{i.currentCamera&&o.updatePlaying(i.currentCamera)};return i.on("playing",l),()=>{i.off("playing",l)}},[i,o])}function Cte(i){const o=cm(),l=vu(),d=pf(),g=RR();In.useEffect(()=>{if(!d||!l||!i||!o)return;const S=({remainingTime:b})=>{const p=MB(d,l.getExpectedPositionInSeconds(),b,i.currentCamera);if(p)try{const w=g(i,p);o.once("ended",()=>{w.then(k=>{k==null||k()})})}catch(w){console.error("failed to load stream",w)}else o.once("ended",()=>{o.endEvent()})};return o.on("nearEnd",S),()=>{o.off("nearEnd",S)}},[d,l,i,g,o])}function Rte(i,o,l){const d=EW(),g=vu(),[S,b]=In.useState(null);return In.useEffect(()=>{const p=document.querySelector(i);if(p==null||!g||!l)return;const w=new LW({containerElement:p,playerOptions:{autoPlay:!1,widevineLicenseUrl:o,policyQuery:l,preferredTech:"dashjs",customLicenceRequestHeaders:{"Api-version":"v1",Session:d}},eventClock:g});return b(w),()=>{w.destroy()}},[d,i,o,l,g]),S}function xte(i){const o=vu(),l=Ah(),d=pf(),g=cm(),[S,b]=In.useState(),[p,w]=In.useState();return In.useEffect(()=>{if(!d||!o||!i||!l||!g)return;const k=({index:E})=>{w(Db(E,d,o)),b(i.currentCamera)},C=()=>{const E=i.currentCamera;(E==null?void 0:E.camera.transition)==="mapAndClosing"&&(w(MB(d,o.getExpectedPositionInSeconds(),2,E)),b(E))};return l.on("cast",k),g.on("transition",C),()=>{l.off("cast",k),g.off("transition",C)}},[d,o,i,l,g]),[S,p]}function N8({x:i,y:o,mapScale:l}){const[d,g]=In.useState(0),[S,b]=In.useState(0),[p,w]=In.useState(0),[k,C]=In.useState(0),[E,y]=In.useState(0);return In.useEffect(()=>{const P=window.innerWidth,m=window.innerHeight,T=P/12,U=m/12;C(m/2-m*.05),y(P/m),g(i*T),b(o*U),w(T*l)},[i,o,l]),{scaledX:d,scaledY:S,size:p,baseY:k,aspectRatio:E}}const Nte="_container_zht4e_1",Mte="_fadeIn_zht4e_1",Dte="_scrollWrapper_zht4e_15",Pte="_scrollContainer_zht4e_29",MI={container:Nte,fadeIn:Mte,scrollWrapper:Dte,scrollContainer:Pte};function Ote(){const i=aR();return Rt.jsxs("div",{className:MI.container,children:[Rt.jsx("h1",{children:i==null?void 0:i.postScreen.title}),Rt.jsx("p",{className:"body-text",style:{opacity:.5},children:i==null?void 0:i.postScreen.body}),Rt.jsx("div",{className:MI.scrollWrapper,children:Rt.jsx("div",{className:MI.scrollContainer,children:i&&i.postScreen.offersCollection.items.map((o,l)=>Rt.jsx("img",{src:o.image.url},l))})})]})}const Lte="_transitionWrapper_jyngr_1",kte="_active_jyngr_17",Fte="_transition_jyngr_1",Ute="_fadeOut_jyngr_1",Bte="_hidden_jyngr_57",jte="_visible_jyngr_67",Zte="_videoTitle_jyngr_77",qte="_fadeIn_jyngr_1",hg={transitionWrapper:Lte,active:kte,transition:Fte,fadeOut:Ute,hidden:Bte,visible:jte,videoTitle:Zte,fadeIn:qte},Gte="_placeContainer_ywyae_1",Hte="_place_ywyae_1",Vte="_background_ywyae_45",Kte="_activePlace_ywyae_57",zte="_fadeOut_ywyae_1",Yte="_normalPlace_ywyae_79",Wte="_selectedPlace_ywyae_99",$te="_fadeIn_ywyae_1",Xte="_pulseEffect_ywyae_1",Qte="_title_ywyae_153",qc={placeContainer:Gte,place:Hte,background:Vte,activePlace:Kte,fadeOut:zte,normalPlace:Yte,selectedPlace:Wte,fadeIn:$te,pulseEffect:Xte,title:Qte};var ks=(i=>(i.ACTIVE_PLACE="ActivePlace",i.SELECTED_PLACE="SelectedPlace",i.NORMAL_PLACE="NormalPlace",i))(ks||{});const Jte=({place:i,mapPlacesLength:o})=>{const l=N8({x:i.mapPosition.x,y:i.mapPosition.y,mapScale:i.mapScale}),d=In.useMemo(()=>{switch(i.placeType){case ks.ACTIVE_PLACE:return qc.activePlace;case ks.SELECTED_PLACE:return qc.selectedPlace;case ks.NORMAL_PLACE:default:return qc.normalPlace}},[i]);return Rt.jsx("div",{className:qc.placeContainer,children:Rt.jsxs("div",{className:"".concat(qc.place," ").concat(d),style:{width:l.size,height:l.size,left:"calc(50% + ".concat(o>1?l.scaledX:0,"px)"),top:"calc(50% + ".concat(o>1?l.scaledY:0,"px)"),transform:"translate(-50%, -50%)"},children:[Rt.jsx("div",{className:qc.background}),(i.placeType===ks.ACTIVE_PLACE||i.placeType===ks.SELECTED_PLACE)&&Rt.jsx("div",{className:"subheader-light ".concat(qc.title),children:i.title})]})})},ene="_followContainer_1h8ds_1",tne="_follow_1h8ds_1",nne="_selectedFollow_1h8ds_35",rne="_pulseEffect_1h8ds_1",ine="_notSelectedFollow_1h8ds_79",one="_iconContainer_1h8ds_97",ane="_labelContainer_1h8ds_131",jd={followContainer:ene,follow:tne,selectedFollow:nne,pulseEffect:rne,notSelectedFollow:ine,iconContainer:one,labelContainer:ane},sne="_label_svzic_1",une={label:sne},lne=({content:i,classNames:o=""})=>Rt.jsx("div",{className:"".concat(une.label," ").concat(o," label"),children:i}),cne=({style:i})=>Rt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 32 32",fill:"none",style:i,children:Rt.jsx("path",{d:"M24 19L16 11L8 19",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),M8=({classNames:i,styles:o,color:l,stroke:d})=>Rt.jsxs("svg",{className:i,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[Rt.jsx("path",{d:"M96 176C140.183 176 176 140.183 176 96C176 51.8172 140.183 16 96 16C51.8172 16 16 51.8172 16 96C16 140.183 51.8172 176 96 176Z",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M96 64V108",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("circle",{cx:"96",cy:"128",r:"8",fill:l||"white"})]}),fne=({classNames:i,styles:o,color:l,stroke:d})=>Rt.jsxs("svg",{className:i,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[Rt.jsx("path",{d:"M11.1475 18.5801L152.567 160",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("circle",{cx:"96",cy:"160",r:"4",fill:"white"}),Rt.jsx("path",{d:"M180.853 75.1472C169.71 64.0041 156.481 55.165 141.922 49.1344C127.363 43.1039 111.758 40 95.9998 40C83.9607 40 72.0117 41.8116 60.55 45.3557M11.147 75.1472C20.7929 65.5013 32.0017 57.5818 44.2834 51.716",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),Rt.jsx("path",{d:"M152.569 103.431C145.14 96.0028 136.321 90.11 126.615 86.0896C116.909 82.0693 106.506 80 96.0002 80C95.7328 80 95.4656 80.0013 95.1984 80.004M39.4316 103.431C46.8603 96.0028 55.6795 90.11 65.3855 86.0896C68.6182 84.7506 71.9282 83.628 75.2936 82.7262",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),Rt.jsx("path",{d:"M124.294 131.725C120.58 128.011 116.17 125.065 111.317 123.055C106.464 121.044 101.263 120.01 96.0099 120.01C90.757 120.01 85.5555 121.044 80.7025 123.055C75.8495 125.065 71.4399 128.011 67.7256 131.726",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"})]}),dne=()=>Rt.jsxs("svg",{width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Rt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M149.333 96L120 125.333L106.667 112",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),hne=()=>Rt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",children:[Rt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M144 96L112 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M112 96L144 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),pne=()=>Rt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[Rt.jsx("path",{d:"M2 12V44L16 36L32 44L46 36V4L32 12L16 4L2 12Z",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M16 4V36",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M32 12V44",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),gne=()=>Rt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Rt.jsxs("g",{children:[Rt.jsx("path",{d:"M192,64H32C14.328,64,0,78.328,0,96v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S209.672,64,192,64z"}),Rt.jsx("path",{d:"M480,64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32V96\r\n		C512,78.328,497.672,64,480,64z"}),Rt.jsx("path",{d:"M480,288c-17.672,0-32,14.328-32,32v64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32v-96\r\n		C512,302.328,497.672,288,480,288z"}),Rt.jsx("path",{d:"M192,384H64v-64c0-17.672-14.328-32-32-32S0,302.328,0,320v96c0,17.672,14.328,32,32,32h160c17.672,0,32-14.328,32-32\r\n		S209.672,384,192,384z"})]})}),mne=()=>Rt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Rt.jsxs("g",{children:[Rt.jsx("path",{d:"M192,64c-17.672,0-32,14.328-32,32v64H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32V96\r\n		C224,78.328,209.672,64,192,64z"}),Rt.jsx("path",{d:"M320,224h160c17.672,0,32-14.328,32-32s-14.328-32-32-32H352V96c0-17.672-14.328-32-32-32s-32,14.328-32,32v96\r\n		C288,209.672,302.328,224,320,224z"}),Rt.jsx("path",{d:"M480,288H320c-17.672,0-32,14.328-32,32v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S497.672,288,480,288z"}),Rt.jsx("path",{d:"M192,288H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32v-96\r\n		C224,302.328,209.672,288,192,288z"})]})}),vne=({follow:i})=>{var g,S,b,p;const o=N8({x:(S=(g=i.mapPosition)==null?void 0:g.x)!=null?S:0,y:(p=(b=i.mapPosition)==null?void 0:b.y)!=null?p:0,mapScale:.6}),[l,d]=In.useState(0);return In.useEffect(()=>{function w(k,C,E){return-Math.atan2((k.x-C.x)*E,k.y-C.y)*(180/Math.PI)}i.mapPosition&&d(w(i.mapPositions[0],i.mapPositions[i.mapPositions.length-1],o.aspectRatio))},[i.mapPosition,i.mapPositions,o]),Rt.jsxs("div",{className:jd.followContainer,style:{width:o.size,height:o.size,left:"calc(50% + ".concat(o.scaledX,"px)"),top:"calc(50% - ".concat(o.scaledY,"px)")},children:[Rt.jsx("div",{className:"".concat(jd.follow," ").concat(i.isSelectedFollow?jd.selectedFollow:jd.notSelectedFollow," ").concat(jd.iconContainer),children:Rt.jsx(cne,{style:{transform:"rotate(".concat(l,"deg)")}})}),i.isSelectedFollow&&Rt.jsx(lne,{classNames:jd.labelContainer,content:i.title})]})},yne=({fromCamera:i,toCamera:o})=>{const l=pf(),d=vu(),g=4200,S=g+3950,b=1900,[p,w]=In.useState([]),[k,C]=In.useState([]),[E,y]=In.useState(!1),[P,m]=In.useState(!1),[T,U]=In.useState(""),M=In.useRef([]),_=In.useMemo(()=>{function se(R,X){const ce=R.jumpSpots.map(Ge=>Ge.camera.span),ye=ce.map(Ge=>Ge.time).map(Ge=>Ci(Ge,X.frameRate)),be=Math.min(...ye),Xe=ce.map(Ge=>Ci(Ge.time,X.frameRate)+Ci(Ge.duration,X.frameRate)),Ie=Math.max(...Xe);return{start:be,end:Ie}}return l==null?void 0:l.places.filter(R=>R.jumpSpots.length>0).map((R,X)=>({...R,span:se(R,l),placeType:ks.NORMAL_PLACE,placeIndex:X}))},[l]),I=In.useMemo(()=>(l==null?void 0:l.follows.map(se=>({...se,isSelectedFollow:!1})))||[],[l]),x=In.useCallback((se,R)=>{const X=Ci(se.camera.span.time,R.frameRate)+2;return(_==null?void 0:_.filter(ce=>ce.span.start<=X&&X<=ce.span.end))||[]},[_]),Z=In.useCallback(se=>{const R=se.mapPositions[0]||{x:0,y:0};if(l&&d){const X=d.getExpectedPositionInSeconds()-Ci(se.camera.span.time,l.frameRate),ce=Ci(se.camera.span.duration,l.frameRate);let oe=Math.floor(X*4/ce);return X===ce&&(oe-=1),se.mapPositions[oe]||R}return R},[d,l]),Y=In.useCallback((se,R)=>{const X=Ci(se.camera.span.time,R.frameRate)+2;return I.filter(ce=>Ci(ce.camera.span.time,R.frameRate)<=X&&X<=Ci(ce.camera.span.time,R.frameRate)+Ci(ce.camera.span.duration,R.frameRate)).map(ce=>({...ce,mapPosition:Z(ce)}))},[I,Z]),$=In.useCallback(se=>_==null?void 0:_.find(R=>R.jumpSpots.some(X=>X.camera.assetName===se.camera.assetName)),[_]),Q=(se,R)=>R.jumpSpots.some(X=>X.camera.assetName===se.camera.assetName);return In.useEffect(()=>{if(!_||!i||!o||!l||i.camera.assetName===o.camera.assetName)return;const se=M.current;let R=[],X=[],ce=[],oe=[];if(U(o.placeTitle?o.placeTitle:o.title),i.type===Vc.JUMPSPOT&&o.type===Vc.JUMPSPOT&&i.placeIndex===o.placeIndex)m(!1),y(!0);else{switch(m(!0),i.type){case Vc.JUMPSPOT:X=Y(o,l),R=x(i,l).map(Ge=>Q(i,Ge)?{...Ge,placeType:ks.ACTIVE_PLACE}:Ge);break;case Vc.FOLLOW:R=x(i,l),X=Y(i,l).map(Ge=>({...Ge,isSelectedFollow:i.camera.assetName===Ge.camera.assetName}));break}switch(w(R),C(X),o.type){case Vc.JUMPSPOT:oe=Y(i,l);const Ge=R.find(ft=>Q(o,ft));if(Ge)ce=R.map(ft=>({...ft,placeType:ft.placeIndex===Ge.placeIndex?ks.SELECTED_PLACE:ks.NORMAL_PLACE}));else{const ft=$(o);ft&&(ft.placeType=ks.SELECTED_PLACE,ce=[...R.map(We=>({...We,placeType:ks.NORMAL_PLACE})),ft])}break;case Vc.FOLLOW:ce=x(i,l),oe=Y(i,l);const at=X.find(ft=>ft.camera.assetName===o.camera.assetName);if(at)oe=X.map(ft=>({...ft,isSelectedFollow:ft.camera.assetName===at.camera.assetName}));else{const ft=I.find(We=>We.camera.assetName===o.camera.assetName);if(ft){const We={...ft,isSelectedFollow:!0,mapPosition:Z(ft)};oe=[...X.map(ut=>({...ut,isSelectedFollow:!1})),We]}}break}}const ye=setTimeout(()=>{C(oe)},b);se.push(ye);const be=setTimeout(()=>{w(ce)},b);se.push(be);const Xe=setTimeout(()=>{m(!1),y(!0)},g);se.push(Xe);const Ie=setTimeout(()=>{y(!1)},S);return se.push(Ie),()=>{se.forEach(Ge=>{clearTimeout(Ge)}),M.current=[]}},[i,o,_,I,Y,$,l,x,Z,S]),Rt.jsxs("div",{className:"".concat(hg.transitionWrapper," ").concat(P?hg.active:""),children:[P&&Rt.jsxs("div",{className:"".concat(hg.transition," ").concat(hg.visible),children:[p.map((se,R)=>Rt.jsx(Jte,{place:se,mapPlacesLength:p.length},"place-".concat(R.toString()))),k.filter(se=>se.camera.assetName===(i==null?void 0:i.camera.assetName)||se.camera.assetName===(o==null?void 0:o.camera.assetName)).map((se,R)=>Rt.jsx(vne,{follow:se},"follow-".concat(R.toString())))]}),E&&Rt.jsx("h1",{className:hg.videoTitle,style:{textShadow:"2px 2px 4px black"},children:T})]})},Ene="_playerPage_s22qw_1",_ne="_playerContainer_s22qw_13",Tne="_fadeIn_s22qw_1",GF={playerPage:Ene,playerContainer:_ne,fadeIn:Tne},Sne="_attention_1xh5o_1",wne="_ripple1_1xh5o_1",Ane="_ripple2_1xh5o_1",Ine="_thirdRipple_1xh5o_81",bne="_ripple3_1xh5o_1",Cne="_iconWrapper_1xh5o_105",DI={attention:Sne,ripple1:wne,ripple2:Ane,thirdRipple:Ine,ripple3:bne,iconWrapper:Cne},Rne=()=>{const i=cm(),[o,l]=In.useState(!1),d=5e3;if(In.useEffect(()=>{if(!i)return;let g;const S=()=>{l(!0),g=setTimeout(()=>{l(!1)},d)};return i.on("attention",S),()=>{i.off("attention",S),clearTimeout(g)}},[i]),!!o)return Rt.jsxs("div",{className:DI.attention,children:[Rt.jsx("span",{className:DI.iconWrapper,children:Rt.jsx(pne,{})}),Rt.jsx("span",{className:DI.thirdRipple})]})};var xne=Object.defineProperty,sE=Object.getOwnPropertySymbols,D8=Object.prototype.hasOwnProperty,P8=Object.prototype.propertyIsEnumerable,HF=(i,o,l)=>o in i?xne(i,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[o]=l,Jg=(i,o)=>{for(var l in o||(o={}))D8.call(o,l)&&HF(i,l,o[l]);if(sE)for(var l of sE(o))P8.call(o,l)&&HF(i,l,o[l]);return i},xR=(i,o)=>{var l={};for(var d in i)D8.call(i,d)&&o.indexOf(d)<0&&(l[d]=i[d]);if(i!=null&&sE)for(var d of sE(i))o.indexOf(d)<0&&P8.call(i,d)&&(l[d]=i[d]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var uf;(i=>{const o=class{constructor(w,k,C,E){if(this.version=w,this.errorCorrectionLevel=k,this.modules=[],this.isFunction=[],w<o.MIN_VERSION||w>o.MAX_VERSION)throw new RangeError("Version value out of range");if(E<-1||E>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let y=[];for(let m=0;m<this.size;m++)y.push(!1);for(let m=0;m<this.size;m++)this.modules.push(y.slice()),this.isFunction.push(y.slice());this.drawFunctionPatterns();const P=this.addEccAndInterleave(C);if(this.drawCodewords(P),E==-1){let m=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const U=this.getPenaltyScore();U<m&&(E=T,m=U),this.applyMask(T)}}S(0<=E&&E<=7),this.mask=E,this.applyMask(E),this.drawFormatBits(E),this.isFunction=[]}static encodeText(w,k){const C=i.QrSegment.makeSegments(w);return o.encodeSegments(C,k)}static encodeBinary(w,k){const C=i.QrSegment.makeBytes(w);return o.encodeSegments([C],k)}static encodeSegments(w,k,C=1,E=40,y=-1,P=!0){if(!(o.MIN_VERSION<=C&&C<=E&&E<=o.MAX_VERSION)||y<-1||y>7)throw new RangeError("Invalid value");let m,T;for(m=C;;m++){const I=o.getNumDataCodewords(m,k)*8,x=p.getTotalBits(w,m);if(x<=I){T=x;break}if(m>=E)throw new RangeError("Data too long")}for(const I of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])P&&T<=o.getNumDataCodewords(m,I)*8&&(k=I);let U=[];for(const I of w){d(I.mode.modeBits,4,U),d(I.numChars,I.mode.numCharCountBits(m),U);for(const x of I.getData())U.push(x)}S(U.length==T);const M=o.getNumDataCodewords(m,k)*8;S(U.length<=M),d(0,Math.min(4,M-U.length),U),d(0,(8-U.length%8)%8,U),S(U.length%8==0);for(let I=236;U.length<M;I^=253)d(I,8,U);let _=[];for(;_.length*8<U.length;)_.push(0);return U.forEach((I,x)=>_[x>>>3]|=I<<7-(x&7)),new o(m,k,_,y)}getModule(w,k){return 0<=w&&w<this.size&&0<=k&&k<this.size&&this.modules[k][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),k=w.length;for(let C=0;C<k;C++)for(let E=0;E<k;E++)C==0&&E==0||C==0&&E==k-1||C==k-1&&E==0||this.drawAlignmentPattern(w[C],w[E]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const k=this.errorCorrectionLevel.formatBits<<3|w;let C=k;for(let y=0;y<10;y++)C=C<<1^(C>>>9)*1335;const E=(k<<10|C)^21522;S(E>>>15==0);for(let y=0;y<=5;y++)this.setFunctionModule(8,y,g(E,y));this.setFunctionModule(8,7,g(E,6)),this.setFunctionModule(8,8,g(E,7)),this.setFunctionModule(7,8,g(E,8));for(let y=9;y<15;y++)this.setFunctionModule(14-y,8,g(E,y));for(let y=0;y<8;y++)this.setFunctionModule(this.size-1-y,8,g(E,y));for(let y=8;y<15;y++)this.setFunctionModule(8,this.size-15+y,g(E,y));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let C=0;C<12;C++)w=w<<1^(w>>>11)*7973;const k=this.version<<12|w;S(k>>>18==0);for(let C=0;C<18;C++){const E=g(k,C),y=this.size-11+C%3,P=Math.floor(C/3);this.setFunctionModule(y,P,E),this.setFunctionModule(P,y,E)}}drawFinderPattern(w,k){for(let C=-4;C<=4;C++)for(let E=-4;E<=4;E++){const y=Math.max(Math.abs(E),Math.abs(C)),P=w+E,m=k+C;0<=P&&P<this.size&&0<=m&&m<this.size&&this.setFunctionModule(P,m,y!=2&&y!=4)}}drawAlignmentPattern(w,k){for(let C=-2;C<=2;C++)for(let E=-2;E<=2;E++)this.setFunctionModule(w+E,k+C,Math.max(Math.abs(E),Math.abs(C))!=1)}setFunctionModule(w,k,C){this.modules[k][w]=C,this.isFunction[k][w]=!0}addEccAndInterleave(w){const k=this.version,C=this.errorCorrectionLevel;if(w.length!=o.getNumDataCodewords(k,C))throw new RangeError("Invalid argument");const E=o.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][k],y=o.ECC_CODEWORDS_PER_BLOCK[C.ordinal][k],P=Math.floor(o.getNumRawDataModules(k)/8),m=E-P%E,T=Math.floor(P/E);let U=[];const M=o.reedSolomonComputeDivisor(y);for(let I=0,x=0;I<E;I++){let Z=w.slice(x,x+T-y+(I<m?0:1));x+=Z.length;const Y=o.reedSolomonComputeRemainder(Z,M);I<m&&Z.push(0),U.push(Z.concat(Y))}let _=[];for(let I=0;I<U[0].length;I++)U.forEach((x,Z)=>{(I!=T-y||Z>=m)&&_.push(x[I])});return S(_.length==P),_}drawCodewords(w){if(w.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let k=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let E=0;E<this.size;E++)for(let y=0;y<2;y++){const P=C-y,T=(C+1&2)==0?this.size-1-E:E;!this.isFunction[T][P]&&k<w.length*8&&(this.modules[T][P]=g(w[k>>>3],7-(k&7)),k++)}}S(k==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let k=0;k<this.size;k++)for(let C=0;C<this.size;C++){let E;switch(w){case 0:E=(C+k)%2==0;break;case 1:E=k%2==0;break;case 2:E=C%3==0;break;case 3:E=(C+k)%3==0;break;case 4:E=(Math.floor(C/3)+Math.floor(k/2))%2==0;break;case 5:E=C*k%2+C*k%3==0;break;case 6:E=(C*k%2+C*k%3)%2==0;break;case 7:E=((C+k)%2+C*k%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[k][C]&&E&&(this.modules[k][C]=!this.modules[k][C])}}getPenaltyScore(){let w=0;for(let y=0;y<this.size;y++){let P=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[y][U]==P?(m++,m==5?w+=o.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),P||(w+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),P=this.modules[y][U],m=1);w+=this.finderPenaltyTerminateAndCount(P,m,T)*o.PENALTY_N3}for(let y=0;y<this.size;y++){let P=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[U][y]==P?(m++,m==5?w+=o.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),P||(w+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),P=this.modules[U][y],m=1);w+=this.finderPenaltyTerminateAndCount(P,m,T)*o.PENALTY_N3}for(let y=0;y<this.size-1;y++)for(let P=0;P<this.size-1;P++){const m=this.modules[y][P];m==this.modules[y][P+1]&&m==this.modules[y+1][P]&&m==this.modules[y+1][P+1]&&(w+=o.PENALTY_N2)}let k=0;for(const y of this.modules)k=y.reduce((P,m)=>P+(m?1:0),k);const C=this.size*this.size,E=Math.ceil(Math.abs(k*20-C*10)/C)-1;return S(0<=E&&E<=9),w+=E*o.PENALTY_N4,S(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,k=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let C=[6];for(let E=this.size-7;C.length<w;E-=k)C.splice(1,0,E);return C}}static getNumRawDataModules(w){if(w<o.MIN_VERSION||w>o.MAX_VERSION)throw new RangeError("Version number out of range");let k=(16*w+128)*w+64;if(w>=2){const C=Math.floor(w/7)+2;k-=(25*C-10)*C-55,w>=7&&(k-=36)}return S(208<=k&&k<=29648),k}static getNumDataCodewords(w,k){return Math.floor(o.getNumRawDataModules(w)/8)-o.ECC_CODEWORDS_PER_BLOCK[k.ordinal][w]*o.NUM_ERROR_CORRECTION_BLOCKS[k.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let k=[];for(let E=0;E<w-1;E++)k.push(0);k.push(1);let C=1;for(let E=0;E<w;E++){for(let y=0;y<k.length;y++)k[y]=o.reedSolomonMultiply(k[y],C),y+1<k.length&&(k[y]^=k[y+1]);C=o.reedSolomonMultiply(C,2)}return k}static reedSolomonComputeRemainder(w,k){let C=k.map(E=>0);for(const E of w){const y=E^C.shift();C.push(0),k.forEach((P,m)=>C[m]^=o.reedSolomonMultiply(P,y))}return C}static reedSolomonMultiply(w,k){if(w>>>8||k>>>8)throw new RangeError("Byte out of range");let C=0;for(let E=7;E>=0;E--)C=C<<1^(C>>>7)*285,C^=(k>>>E&1)*w;return S(C>>>8==0),C}finderPenaltyCountPatterns(w){const k=w[1];S(k<=this.size*3);const C=k>0&&w[2]==k&&w[3]==k*3&&w[4]==k&&w[5]==k;return(C&&w[0]>=k*4&&w[6]>=k?1:0)+(C&&w[6]>=k*4&&w[0]>=k?1:0)}finderPenaltyTerminateAndCount(w,k,C){return w&&(this.finderPenaltyAddHistory(k,C),k=0),k+=this.size,this.finderPenaltyAddHistory(k,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(w,k){k[0]==0&&(w+=this.size),k.pop(),k.unshift(w)}};let l=o;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=l;function d(w,k,C){if(k<0||k>31||w>>>k)throw new RangeError("Value out of range");for(let E=k-1;E>=0;E--)C.push(w>>>E&1)}function g(w,k){return(w>>>k&1)!=0}function S(w){if(!w)throw new Error("Assertion error")}const b=class{constructor(w,k,C){if(this.mode=w,this.numChars=k,this.bitData=C,k<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(w){let k=[];for(const C of w)d(C,8,k);return new b(b.Mode.BYTE,w.length,k)}static makeNumeric(w){if(!b.isNumeric(w))throw new RangeError("String contains non-numeric characters");let k=[];for(let C=0;C<w.length;){const E=Math.min(w.length-C,3);d(parseInt(w.substr(C,E),10),E*3+1,k),C+=E}return new b(b.Mode.NUMERIC,w.length,k)}static makeAlphanumeric(w){if(!b.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let k=[],C;for(C=0;C+2<=w.length;C+=2){let E=b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C))*45;E+=b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C+1)),d(E,11,k)}return C<w.length&&d(b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C)),6,k),new b(b.Mode.ALPHANUMERIC,w.length,k)}static makeSegments(w){return w==""?[]:b.isNumeric(w)?[b.makeNumeric(w)]:b.isAlphanumeric(w)?[b.makeAlphanumeric(w)]:[b.makeBytes(b.toUtf8ByteArray(w))]}static makeEci(w){let k=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)d(w,8,k);else if(w<16384)d(2,2,k),d(w,14,k);else if(w<1e6)d(6,3,k),d(w,21,k);else throw new RangeError("ECI assignment value out of range");return new b(b.Mode.ECI,0,k)}static isNumeric(w){return b.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return b.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,k){let C=0;for(const E of w){const y=E.mode.numCharCountBits(k);if(E.numChars>=1<<y)return 1/0;C+=4+y+E.bitData.length}return C}static toUtf8ByteArray(w){w=encodeURI(w);let k=[];for(let C=0;C<w.length;C++)w.charAt(C)!="%"?k.push(w.charCodeAt(C)):(k.push(parseInt(w.substr(C+1,2),16)),C+=2);return k}};let p=b;p.NUMERIC_REGEX=/^[0-9]*$/,p.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,p.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.QrSegment=p})(uf||(uf={}));(i=>{(o=>{const l=class{constructor(g,S){this.ordinal=g,this.formatBits=S}};let d=l;d.LOW=new l(0,1),d.MEDIUM=new l(1,0),d.QUARTILE=new l(2,3),d.HIGH=new l(3,2),o.Ecc=d})(i.QrCode||(i.QrCode={}))})(uf||(uf={}));(i=>{(o=>{const l=class{constructor(g,S){this.modeBits=g,this.numBitsCharCount=S}numCharCountBits(g){return this.numBitsCharCount[Math.floor((g+7)/17)]}};let d=l;d.NUMERIC=new l(1,[10,12,14]),d.ALPHANUMERIC=new l(2,[9,11,13]),d.BYTE=new l(4,[8,16,16]),d.KANJI=new l(8,[8,10,12]),d.ECI=new l(7,[0,0,0]),o.Mode=d})(i.QrSegment||(i.QrSegment={}))})(uf||(uf={}));var nh=uf;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var O8={L:nh.QrCode.Ecc.LOW,M:nh.QrCode.Ecc.MEDIUM,Q:nh.QrCode.Ecc.QUARTILE,H:nh.QrCode.Ecc.HIGH},L8=128,k8="L",F8="#FFFFFF",U8="#000000",B8=!1,NR=4,Nne=.1;function j8(i,o=0){const l=[];return i.forEach(function(d,g){let S=null;d.forEach(function(b,p){if(!b&&S!==null){l.push("M".concat(S+o," ").concat(g+o,"h").concat(p-S,"v1H").concat(S+o,"z")),S=null;return}if(p===d.length-1){if(!b)return;S===null?l.push("M".concat(p+o,",").concat(g+o," h1v1H").concat(p+o,"z")):l.push("M".concat(S+o,",").concat(g+o," h").concat(p+1-S,"v1H").concat(S+o,"z"));return}b&&S===null&&(S=p)})}),l.join("")}function Z8(i,o){return i.slice().map((l,d)=>d<o.y||d>=o.y+o.h?l:l.map((g,S)=>S<o.x||S>=o.x+o.w?g:!1))}function q8(i,o,l,d){if(d==null)return null;const g=l?NR:0,S=i.length+g*2,b=Math.floor(o*Nne),p=S/o,w=(d.width||b)*p,k=(d.height||b)*p,C=d.x==null?i.length/2-w/2:d.x*p,E=d.y==null?i.length/2-k/2:d.y*p;let y=null;if(d.excavate){let P=Math.floor(C),m=Math.floor(E),T=Math.ceil(w+C-P),U=Math.ceil(k+E-m);y={x:P,y:m,w:T,h:U}}return{x:C,y:E,h:k,w,excavation:y}}var Mne=function(){try{new Path2D().addPath(new Path2D)}catch(i){return!1}return!0}();function Dne(i){const o=i,{value:l,size:d=L8,level:g=k8,bgColor:S=F8,fgColor:b=U8,includeMargin:p=B8,style:w,imageSettings:k}=o,C=xR(o,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),E=k==null?void 0:k.src,y=In.useRef(null),P=In.useRef(null),[m,T]=In.useState(!1);In.useEffect(()=>{if(y.current!=null){const _=y.current,I=_.getContext("2d");if(!I)return;let x=nh.QrCode.encodeText(l,O8[g]).getModules();const Z=p?NR:0,Y=x.length+Z*2,$=q8(x,d,p,k),Q=P.current,se=$!=null&&Q!==null&&Q.complete&&Q.naturalHeight!==0&&Q.naturalWidth!==0;se&&$.excavation!=null&&(x=Z8(x,$.excavation));const R=window.devicePixelRatio||1;_.height=_.width=d*R;const X=d/Y*R;I.scale(X,X),I.fillStyle=S,I.fillRect(0,0,Y,Y),I.fillStyle=b,Mne?I.fill(new Path2D(j8(x,Z))):x.forEach(function(ce,oe){ce.forEach(function(ye,be){ye&&I.fillRect(be+Z,oe+Z,1,1)})}),se&&I.drawImage(Q,$.x+Z,$.y+Z,$.w,$.h)}}),In.useEffect(()=>{T(!1)},[E]);const U=Jg({height:d,width:d},w);let M=null;return E!=null&&(M=du.createElement("img",{src:E,key:E,style:{display:"none"},onLoad:()=>{T(!0)},ref:P})),du.createElement(du.Fragment,null,du.createElement("canvas",Jg({style:U,height:d,width:d,ref:y},C)),M)}function Pne(i){const o=i,{value:l,size:d=L8,level:g=k8,bgColor:S=F8,fgColor:b=U8,includeMargin:p=B8,imageSettings:w}=o,k=xR(o,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let C=nh.QrCode.encodeText(l,O8[g]).getModules();const E=p?NR:0,y=C.length+E*2,P=q8(C,d,p,w);let m=null;w!=null&&P!=null&&(P.excavation!=null&&(C=Z8(C,P.excavation)),m=du.createElement("image",{xlinkHref:w.src,height:P.h,width:P.w,x:P.x+E,y:P.y+E,preserveAspectRatio:"none"}));const T=j8(C,E);return du.createElement("svg",Jg({height:d,width:d,viewBox:"0 0 ".concat(y," ").concat(y)},k),du.createElement("path",{fill:S,d:"M0,0 h".concat(y,"v").concat(y,"H0z"),shapeRendering:"crispEdges"}),du.createElement("path",{fill:b,d:T,shapeRendering:"crispEdges"}),m)}var MR=i=>{const o=i,{renderAs:l}=o,d=xR(o,["renderAs"]);return l==="svg"?du.createElement(Pne,Jg({},d)):du.createElement(Dne,Jg({},d))};const One="_container_1l3tn_1",Lne="_qrCode_1l3tn_25",kne="_text_1l3tn_35",PI={container:One,qrCode:Lne,text:kne},Fne=({url:i})=>Rt.jsxs("div",{className:PI.container,children:[Rt.jsx("p",{className:"body-text ".concat(PI.text),style:{opacity:.75},children:"Scan the QR code with the app."}),Rt.jsx(MR,{className:PI.qrCode,bgColor:"white",fgColor:"black",value:i,size:500})]}),Une="_controlsWrapper_1v4q3_1",Bne="_hidden_1v4q3_21",jne="_iconWrapper_1v4q3_29",OI={controlsWrapper:Une,hidden:Bne,iconWrapper:jne},Zne=({visible:i,eventPlayer:o})=>{const[l,d]=In.useState(!1),g=()=>{o&&(l?o.exitFullscreen().then(()=>{d(!1)}):o.requestFullscreen().then(()=>{d(!0)}))};return Rt.jsx("div",{className:"".concat(OI.controlsWrapper," ").concat(i?"":OI.hidden),children:Rt.jsx("div",{className:OI.iconWrapper,onClick:g,children:l?Rt.jsx(mne,{}):Rt.jsx(gne,{})})})},qne="_warningContainer_1tqkb_1",Gne={warningContainer:qne},G8=()=>Rt.jsxs("div",{className:Gne.warningContainer,children:[Rt.jsx(M8,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),Rt.jsx("p",{className:"label",children:"Finish setup on your mobile or tablet. "})]}),Hne="_messageContainer_1jzyd_3",Vne="_message_1jzyd_3",VF={messageContainer:Hne,message:Vne},Kne=({message:i})=>Rt.jsx("div",{className:VF.messageContainer,children:Rt.jsx("div",{className:"".concat(VF.message," subheader-light"),children:i})});function zne(){const[i,o,l]=jB(),d=sR(),g=Rte("#playerContainer",o,l),[S,b]=In.useState(!1),[p,w]=In.useState(),k=uR(),C=In.useRef(),E=In.useMemo(()=>{const U=window.navigator.userAgent;return new RegExp("_TV_[A-Z0-9]+_([0-9]{4});").test(U)},[]);In.useEffect(()=>{const U=k==null?void 0:k.find(M=>M.deviceId===vh);w(U)},[k]);const y=!!(k!=null&&k.filter(U=>U.deviceId!==vh));Ite(g),bte(g),Cte(g);const[P,m]=xte(g);Ate();const T=()=>{E||(b(!0),clearTimeout(C.current),C.current=setTimeout(()=>{b(!1)},3e3))};return Rt.jsxs("div",{className:GF.playerPage,onMouseMove:T,children:[Rt.jsxs("div",{id:"playerContainer",className:GF.playerContainer,children:[d&&Rt.jsx(IW,{eventPlayer:g}),Rt.jsx(Rne,{}),Rt.jsx(Zne,{visible:S,eventPlayer:g}),(p==null?void 0:p.stateInfo.state)==="showQrCode"&&Rt.jsx(Fne,{url:"".concat(tR,":").concat(p.stateInfo.qrCodeDeviceId)}),Rt.jsx(yne,{fromCamera:P,toCamera:m})]}),!y&&Rt.jsx(Kne,{message:Rt.jsx(G8,{})})]})}const Yne="_gradientBackground_b6nct_1",Wne="_container_b6nct_15",$ne="_fadeIn_b6nct_1",Xne="_connectedTV_b6nct_45",Qne="_disconnectedTV_b6nct_47",Jne="_popIn_b6nct_1",ere="_iconContainer_b6nct_105",tre="_connectedText_b6nct_121",Zd={gradientBackground:Yne,container:Wne,fadeIn:$ne,connectedTV:Xne,disconnectedTV:Qne,popIn:Jne,iconContainer:ere,connectedText:tre},nre=({isDisconnected:i})=>Rt.jsx("div",{className:Zd.gradientBackground,children:Rt.jsxs("div",{className:Zd.container,children:[Rt.jsx("div",{className:i?Zd.disconnectedTV:Zd.connectedTV,children:Rt.jsx("div",{className:Zd.iconContainer,children:i?Rt.jsx(hne,{}):Rt.jsx(dne,{})})}),Rt.jsx("h1",{className:Zd.connectedText,children:i?"TV disconnected":"TV connected"})]})}),rre="_hidden_zykq7_1",ire={hidden:rre},ore="_gradientBackground_14xmh_1",are="_container_14xmh_15",sre="_fadeIn_14xmh_1",ure="_imageWrapper_14xmh_45",lre="_listText_14xmh_57",cre="_boldText_14xmh_57",fre="_image_14xmh_45",dre="_glow_14xmh_91",hre="_dividerWrapper_14xmh_119",pre="_divider_14xmh_119",gre="_buttonsWrapper_14xmh_149",mre="_testButton_14xmh_185",vre="_demoButton_14xmh_195",yre="_logoutButton_14xmh_203",Ere="_title_14xmh_215",_re="_countdownWrapper_14xmh_225",Tre="_timeSectionContainer_14xmh_253",Sre="_timeSection_14xmh_253",wre="_countdownTitle_14xmh_277",Are="_label_14xmh_285",Ire="_logos_14xmh_293",bre="_warning_14xmh_339",Zi={gradientBackground:ore,container:are,fadeIn:sre,imageWrapper:ure,listText:lre,boldText:cre,image:fre,glow:dre,dividerWrapper:hre,divider:pre,buttonsWrapper:gre,testButton:mre,demoButton:vre,logoutButton:yre,title:Ere,countdownWrapper:_re,timeSectionContainer:Tre,timeSection:Sre,countdownTitle:wre,label:Are,logos:Ire,warning:bre},Cre="_errorContainer_1vpqa_1",Rre={errorContainer:Cre},H8=({errorIcon:i,errorMessage:o,errorName:l})=>Rt.jsxs("div",{className:Rre.errorContainer,children:[i&&Rt.jsx("div",{children:i}),Rt.jsx("span",{className:"body-text",children:"".concat(l&&"".concat(l,".")," ").concat(o)})]}),xre="_gradientBackground_1pfse_1",Nre="_container_1pfse_19",Mre="_qrCode_1pfse_33",LI={gradientBackground:xre,container:Nre,qrCode:Mre},Dre=({url:i})=>Rt.jsxs("div",{className:"".concat(LI.gradientBackground," ").concat(LI.container),children:[Rt.jsx(MR,{className:LI.qrCode,bgColor:"white",fgColor:"black",value:i,size:500}),Rt.jsx("p",{className:"body-text",children:"Scan the QR code with the app."})]}),Pre=({timeToLive:i})=>{const o=SW(),l=vu(),d=aR(),g=sR(),S=uR(),[b,p]=In.useState(),[w,k]=In.useState("00:00:00:00"),[C,E]=In.useState(!1),y=In.useRef(null),P=5;In.useEffect(()=>{const x=S==null?void 0:S.filter(Z=>Z.deviceId!==vh);E(!!(x!=null&&x.length))},[S]),In.useEffect(()=>{const x=S==null?void 0:S.find(Z=>Z.deviceId===vh);p(x)},[S]);let m;(x=>{x.BEFORE="before",x.MIDDLE="middle",x.END="end"})(m||(m={}));const T=x=>{if(l){let Z=new Date;switch(x){case"end":Z=new Date(l.demoEndtime);break;case"middle":Z.setMinutes(Z.getMinutes()-22);break;default:case"before":Z.setSeconds(Z.getSeconds()+P);break}l.updateStartTime(Z,!0)}};In.useEffect(()=>{if(i&&i>0){const x=Q=>{const se=Date.parse(Q.toString())-Date.parse(new Date().toString()),R=Math.floor(se/1e3%60),X=Math.floor(se/1e3/60%60),ce=Math.floor(se/1e3/60/60%24),oe=Math.floor(se/1e3/60/60/24);return{total:se,days:oe,hours:ce,minutes:X,seconds:R}},Z=Q=>{const{total:se,days:R,hours:X,minutes:ce,seconds:oe}=x(Q);se>=0&&k((R>9?R:"0"+R)+":"+(X>9?X:"0"+X)+":"+(ce>9?ce:"0"+ce)+":"+(oe>9?oe:"0"+oe))};(Q=>{y.current&&clearInterval(y.current),Z(Q);const se=setInterval(()=>{Z(Q)},1e3);y.current=se})((Q=>{const se=new Date;return se.setSeconds(se.getSeconds()+Math.floor(Q/1e3)),se})(i))}},[i]);const[U,M,_,I]=w.split(":");if(b&&b.stateInfo.state==="showQrCode"){const x="".concat(tR,":").concat(b.stateInfo.qrCodeDeviceId);return Rt.jsx(Dre,{url:x})}return Rt.jsxs("div",{className:Zi.container,children:[g&&Rt.jsx("div",{className:Zi.buttonsWrapper,children:Rt.jsxs("div",{children:[Rt.jsx(ta,{className:"".concat(Zi.demoButton," ").concat(Zi.testButton),onClick:()=>{T("before")},selfFocus:!0,children:"Before"}),Rt.jsx(ta,{className:Zi.testButton,onClick:()=>{T("middle")},children:"Middle"}),Rt.jsx(ta,{className:Zi.testButton,onClick:()=>{T("end")},children:"End"})]})}),o.map((x,Z)=>Rt.jsx(H8,{errorMessage:x.toString},"".concat(x.name,"-error-").concat(Z.toString()))),Rt.jsxs("div",{className:Zi.imageWrapper,children:[Rt.jsx("div",{className:Zi.glow}),Rt.jsx("img",{className:Zi.image,src:"".concat(d==null?void 0:d.preScreen.backgroundLandscape.url)})]}),Rt.jsxs("div",{className:Zi.countdownWrapper,children:[Rt.jsx("div",{className:"".concat(Zi.title," subheader-bold"),children:d==null?void 0:d.preScreen.showTitle}),Rt.jsx("div",{className:Zi.dividerWrapper,children:Rt.jsx("div",{className:Zi.divider})}),Rt.jsx("p",{className:"body-text ".concat(Zi.countdownTitle),children:"Starts in"}),Rt.jsxs("div",{className:Zi.timeSectionContainer,children:[Rt.jsxs("div",{className:Zi.timeSection,children:[Rt.jsx("div",{className:"subheader-bold",children:U}),Rt.jsx("div",{className:"".concat(Zi.label," label"),children:"days"})]}),Rt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),Rt.jsxs("div",{className:Zi.timeSection,children:[Rt.jsx("div",{className:"subheader-bold",children:M}),Rt.jsx("div",{className:"".concat(Zi.label," label"),children:"hours"})]}),Rt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),Rt.jsxs("div",{className:Zi.timeSection,children:[Rt.jsx("div",{className:"subheader-bold",children:_}),Rt.jsx("div",{className:"".concat(Zi.label," label"),children:"mins"})]}),Rt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),Rt.jsxs("div",{className:Zi.timeSection,children:[Rt.jsx("div",{className:"subheader-bold",children:I}),Rt.jsx("div",{className:"".concat(Zi.label," label"),children:"secs"})]})]})]}),Rt.jsx("div",{className:Zi.warning,children:!C&&tE==="new"&&Rt.jsx(G8,{})})]})},Ore="_wrapper_f3bpf_1",Lre="_container_f3bpf_21",kre="_qrCodeContainer_f3bpf_41",Fre="_qrCode_f3bpf_41",Ure="_listContainer_f3bpf_67",Bre="_list_f3bpf_67",jre="_listItemContainer_f3bpf_101",Zre="_listNumber_f3bpf_115",qre="_listText_f3bpf_137",Gre="_circleRightCorner_f3bpf_149",Hre="_circleLeftCorner_f3bpf_173",Vre="_circleCenter_f3bpf_195",Kre="_fadeIn_f3bpf_1",Uo={wrapper:Ore,container:Lre,qrCodeContainer:kre,qrCode:Fre,listContainer:Ure,list:Bre,listItemContainer:jre,listNumber:Zre,listText:qre,circleRightCorner:Gre,circleLeftCorner:Hre,circleCenter:Vre,fadeIn:Kre},zre=({url:i})=>Rt.jsxs("div",{className:Uo.wrapper,children:[Rt.jsx("div",{className:Uo.circleRightCorner}),Rt.jsx("div",{className:Uo.circleLeftCorner}),Rt.jsx("div",{className:Uo.circleCenter}),Rt.jsxs("div",{className:Uo.container,children:[Rt.jsxs("div",{className:"".concat(Uo.listContainer," body-text"),children:[Rt.jsx("h1",{style:{lineHeight:"3rem"},children:"Connect your TV"}),Rt.jsxs("div",{className:Uo.list,children:[Rt.jsxs("span",{className:Uo.listItemContainer,children:[Rt.jsx("span",{className:Uo.listNumber,children:"1"}),Rt.jsxs("span",{className:Uo.listText,children:["Download the ",Rt.jsx("span",{className:"bold-text",children:"Imagien Parallel"})," ","app on your mobile or tablet."]})]}),Rt.jsxs("span",{className:Uo.listItemContainer,children:[Rt.jsx("span",{className:Uo.listNumber,children:"2"}),Rt.jsx("span",{className:Uo.listText,children:"Enter the ticket code from your confirmation email."})]}),Rt.jsxs("span",{className:Uo.listItemContainer,children:[Rt.jsx("span",{className:Uo.listNumber,children:"3"}),Rt.jsx("span",{className:Uo.listText,children:"Scan the QR code with the app."})]})]})]}),Rt.jsx("div",{className:Uo.qrCodeContainer,children:Rt.jsx("div",{className:Uo.qrCode,children:Rt.jsx(MR,{bgColor:"white",fgColor:"black",value:i!=null?i:"",size:512})})})]})]}),Yre="_container_zht4e_1",Wre="_fadeIn_zht4e_1",$re="_scrollWrapper_zht4e_15",Xre="_scrollContainer_zht4e_29",kI={container:Yre,fadeIn:Wre,scrollWrapper:$re,scrollContainer:Xre};function Qre(){const i=aR();return Rt.jsxs("div",{className:kI.container,children:[Rt.jsx("h1",{children:"Oh no! This event has been canceled."}),Rt.jsx("div",{className:kI.scrollWrapper,children:Rt.jsx("div",{className:kI.scrollContainer,children:i&&i.postScreen.offersCollection.items.map((o,l)=>Rt.jsx("img",{src:o.image.url},l))})})]})}const Jre=()=>{const[i,o]=In.useState(0);return In.useEffect(()=>{const l=g=>{o(g.keyCode)},d=()=>{o(null)};return document.addEventListener("keydown",l),document.addEventListener("keyup",d),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",d)}},[]),i};var lh=(i=>(i.TIZEN="tizen",i.WEBOS="webos",i.WEBZEROS="web0s",i.WEB="web",i))(lh||{});function V8(){const i=navigator.userAgent.toLowerCase();return i.includes("tizen")?"tizen":i.includes("webos")||i.includes("web0s")?"webos":"web"}function eie(){const i=V8();switch(console.log("platform",i),i){case lh.TIZEN:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:10009,KEY_MEDIA_STOP:413};case lh.WEBOS:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:461,KEY_MEDIA_STOP:413};case lh.WEB:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83};default:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83}}}const tie=eie(),nie="_popupWrapper_19u5b_1",rie="_popup_19u5b_1",iie="_controls_19u5b_59",oie="_focused_19u5b_93",pg={popupWrapper:nie,popup:rie,controls:iie,focused:oie};function aie({close:i}){const o=()=>{switch(V8()){case lh.TIZEN:window.tizen.application.getCurrentApplication().exit();break;case lh.WEBOS:window.close(),webOS.platformBack();break}};return Rt.jsx("div",{className:pg.popupWrapper,children:Rt.jsxs("div",{className:pg.popup,children:[Rt.jsx("h3",{children:"Would you like to exit app?"}),Rt.jsxs("div",{className:pg.controls,children:[Rt.jsx(ta,{onClick:i,selfFocus:!0,focusstile:pg.focused,children:"Back"}),Rt.jsx(ta,{onClick:o,focusstile:pg.focused,children:"Confirm"})]})]})})}const sie={};function uie(){return Rt.jsx("div",{className:sie.popup,children:"Network Error Popup"})}function KF(){const i=Jre(),[o,l]=In.useState(),d=()=>{l(void 0)};switch(In.useEffect(()=>{console.log("keyPressed",i),i===tie.KEY_BACK&&l("exit")},[i]),o){case"exit":return Rt.jsx(aie,{close:d});case"network":return Rt.jsx(uie,{});default:return}}function lie(){const i=vu();TW();const o=cm(),l=yW(),d=Ah(),g=uR(),[S,b]=In.useState(!1),[p,w]=In.useState(!1),[k,C]=In.useState(!1),[E,y]=In.useState(),[P,m]=In.useState(!1),[T,U]=In.useState(!1),[M,_]=In.useState(!1),[I,x]=In.useState(),[Z,Y]=In.useState(),[$,Q]=In.useState(),se="".concat(tR,":").concat(vh);In.useEffect(()=>{g&&x(g.find(ce=>ce.deviceId===vh)||g[0])},[g]),In.useEffect(()=>{Y(I==null?void 0:I.stateInfo.state)},[I]);const R=$&&$.code===404?Rt.jsx(fne,{color:"#ff4646"}):Rt.jsx(M8,{stroke:"10",color:"#ff4646",styles:{width:"5rem",height:"5rem"}}),X=$&&$.code===404?"No Internet connection. Try scanning the code again.":"".concat($==null?void 0:$.name,". Try scanning the code again.");if(In.useEffect(()=>{if(!i)return;const ce=()=>{console.log(Q),i.adjustedEndTime&&i.adjustedEndTime<Date.now()?w(!0):i.adjustedStartTime&&(w(!1),y(i.adjustedStartTime-Date.now()))};return i.on("startTimeUpdated",ce),()=>{i.off("startTimeUpdated",ce)}},[i]),In.useEffect(()=>{if(!o)return;const ce=()=>{w(!0)};return o.on("eventEnded",ce),()=>{o.off("eventEnded",ce)}},[o]),In.useEffect(()=>{if(!d)return;const ce=()=>{C(!0)};return d.on("eventCanceled",ce),()=>{d.off("eventCanceled",ce)}},[d]),In.useEffect(()=>{if(!P)return;U(!0);const ce=setTimeout(()=>{m(!1)},1500);return()=>{clearTimeout(ce)}},[P]),In.useEffect(()=>{if(E)if(E>0){b(!1);const ce=setTimeout(()=>{b(!0)},E);return()=>{clearTimeout(ce)}}else b(!0)},[E]),In.useEffect(()=>{Z==="hostTv"?(_(!0),m(!0)):l===Nb.CONNECTED_STATE&&tE!=="new"&&m(!0)},[Z,l]),k)return Rt.jsx(Qre,{});if(p)return Rt.jsx(Ote,{});{if(!M&&Z===void 0)return Rt.jsxs(Rt.Fragment,{children:[Rt.jsx(zre,{url:se}),$&&Rt.jsx(H8,{errorMessage:X,errorIcon:R}),Rt.jsx(KF,{})]});if(P&&!T)return Rt.jsx(nre,{})}return Rt.jsxs("div",{children:[Rt.jsx("div",{className:S?"":ire.hidden,children:Rt.jsx(zne,{})}),!S&&Rt.jsx(Pre,{timeToLive:E}),Rt.jsx(KF,{})]})}bB.init({debug:!1,shouldUseNativeEvents:!0});function cie(){const i=localStorage.getItem("ticketCode"),[o,l]=In.useState(i!=null?i:"");return Rt.jsx("div",{className:bz.pageContainer,children:Rt.jsxs(gW,{baseUrl:Ez,preferredProfile:"dash-drm",contentfulAccessToken:_z,contentfulSpaceId:Tz,newSetupToggle:tE==="new",ticketCodeProp:o,children:[tE!=="new",Rt.jsx(lie,{})]})})}FI.createRoot(document.getElementById("root")).render(Rt.jsx(cie,{}));export{fie as __vite_legacy_guard};
