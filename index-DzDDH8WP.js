function sne(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const S of p)if(S.type==="childList")for(const b of S.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&d(b)}).observe(document,{childList:!0,subtree:!0});function l(p){const S={};return p.integrity&&(S.integrity=p.integrity),p.referrerPolicy&&(S.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?S.credentials="include":p.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function d(p){if(p.ep)return;p.ep=!0;const S=l(p);fetch(p.href,S)}})();var tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mb(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var KF={exports:{}},j0={},o1={exports:{}},Pr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CP;function aq(){if(CP)return Pr;CP=1;var o=Symbol.for("react.element"),i=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),b=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),F=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),y=Symbol.iterator;function v(Ie){return Ie===null||typeof Ie!="object"?null:(Ie=y&&Ie[y]||Ie["@@iterator"],typeof Ie=="function"?Ie:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,T={};function U(Ie,Ye,mt){this.props=Ie,this.context=Ye,this.refs=T,this.updater=mt||D}U.prototype.isReactComponent={},U.prototype.setState=function(Ie,Ye){if(typeof Ie!="object"&&typeof Ie!="function"&&Ie!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ie,Ye,"setState")},U.prototype.forceUpdate=function(Ie){this.updater.enqueueForceUpdate(this,Ie,"forceUpdate")};function x(){}x.prototype=U.prototype;function _(Ie,Ye,mt){this.props=Ie,this.context=Ye,this.refs=T,this.updater=mt||D}var I=_.prototype=new x;I.constructor=_,m(I,U.prototype),I.isPureReactComponent=!0;var C=Array.isArray,j=Object.prototype.hasOwnProperty,z={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function W(Ie,Ye,mt){var xe,We={},it=null,qt=null;if(Ye!=null)for(xe in Ye.ref!==void 0&&(qt=Ye.ref),Ye.key!==void 0&&(it=""+Ye.key),Ye)j.call(Ye,xe)&&!$.hasOwnProperty(xe)&&(We[xe]=Ye[xe]);var Ft=arguments.length-2;if(Ft===1)We.children=mt;else if(1<Ft){for(var gt=Array(Ft),St=0;St<Ft;St++)gt[St]=arguments[St+2];We.children=gt}if(Ie&&Ie.defaultProps)for(xe in Ft=Ie.defaultProps,Ft)We[xe]===void 0&&(We[xe]=Ft[xe]);return{$$typeof:o,type:Ie,key:it,ref:qt,props:We,_owner:z.current}}function ue(Ie,Ye){return{$$typeof:o,type:Ie.type,key:Ye,ref:Ie.ref,props:Ie.props,_owner:Ie._owner}}function N(Ie){return typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===o}function X(Ie){var Ye={"=":"=0",":":"=2"};return"$"+Ie.replace(/[=:]/g,function(mt){return Ye[mt]})}var ce=/\/+/g;function oe(Ie,Ye){return typeof Ie=="object"&&Ie!==null&&Ie.key!=null?X(""+Ie.key):Ye.toString(36)}function de(Ie,Ye,mt,xe,We){var it=typeof Ie;(it==="undefined"||it==="boolean")&&(Ie=null);var qt=!1;if(Ie===null)qt=!0;else switch(it){case"string":case"number":qt=!0;break;case"object":switch(Ie.$$typeof){case o:case i:qt=!0}}if(qt)return qt=Ie,We=We(qt),Ie=xe===""?"."+oe(qt,0):xe,C(We)?(mt="",Ie!=null&&(mt=Ie.replace(ce,"$&/")+"/"),de(We,Ye,mt,"",function(St){return St})):We!=null&&(N(We)&&(We=ue(We,mt+(!We.key||qt&&qt.key===We.key?"":(""+We.key).replace(ce,"$&/")+"/")+Ie)),Ye.push(We)),1;if(qt=0,xe=xe===""?".":xe+":",C(Ie))for(var Ft=0;Ft<Ie.length;Ft++){it=Ie[Ft];var gt=xe+oe(it,Ft);qt+=de(it,Ye,mt,gt,We)}else if(gt=v(Ie),typeof gt=="function")for(Ie=gt.call(Ie),Ft=0;!(it=Ie.next()).done;)it=it.value,gt=xe+oe(it,Ft++),qt+=de(it,Ye,mt,gt,We);else if(it==="object")throw Ye=String(Ie),Error("Objects are not valid as a React child (found: "+(Ye==="[object Object]"?"object with keys {"+Object.keys(Ie).join(", ")+"}":Ye)+"). If you meant to render a collection of children, use an array instead.");return qt}function Ce(Ie,Ye,mt){if(Ie==null)return Ie;var xe=[],We=0;return de(Ie,xe,"","",function(it){return Ye.call(mt,it,We++)}),xe}function Je(Ie){if(Ie._status===-1){var Ye=Ie._result;Ye=Ye(),Ye.then(function(mt){(Ie._status===0||Ie._status===-1)&&(Ie._status=1,Ie._result=mt)},function(mt){(Ie._status===0||Ie._status===-1)&&(Ie._status=2,Ie._result=mt)}),Ie._status===-1&&(Ie._status=0,Ie._result=Ye)}if(Ie._status===1)return Ie._result.default;throw Ie._result}var Te={current:null},je={transition:null},nt={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:je,ReactCurrentOwner:z};function ct(){throw Error("act(...) is not supported in production builds of React.")}return Pr.Children={map:Ce,forEach:function(Ie,Ye,mt){Ce(Ie,function(){Ye.apply(this,arguments)},mt)},count:function(Ie){var Ye=0;return Ce(Ie,function(){Ye++}),Ye},toArray:function(Ie){return Ce(Ie,function(Ye){return Ye})||[]},only:function(Ie){if(!N(Ie))throw Error("React.Children.only expected to receive a single React element child.");return Ie}},Pr.Component=U,Pr.Fragment=l,Pr.Profiler=p,Pr.PureComponent=_,Pr.StrictMode=d,Pr.Suspense=w,Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nt,Pr.act=ct,Pr.cloneElement=function(Ie,Ye,mt){if(Ie==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ie+".");var xe=m({},Ie.props),We=Ie.key,it=Ie.ref,qt=Ie._owner;if(Ye!=null){if(Ye.ref!==void 0&&(it=Ye.ref,qt=z.current),Ye.key!==void 0&&(We=""+Ye.key),Ie.type&&Ie.type.defaultProps)var Ft=Ie.type.defaultProps;for(gt in Ye)j.call(Ye,gt)&&!$.hasOwnProperty(gt)&&(xe[gt]=Ye[gt]===void 0&&Ft!==void 0?Ft[gt]:Ye[gt])}var gt=arguments.length-2;if(gt===1)xe.children=mt;else if(1<gt){Ft=Array(gt);for(var St=0;St<gt;St++)Ft[St]=arguments[St+2];xe.children=Ft}return{$$typeof:o,type:Ie.type,key:We,ref:it,props:xe,_owner:qt}},Pr.createContext=function(Ie){return Ie={$$typeof:b,_currentValue:Ie,_currentValue2:Ie,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ie.Provider={$$typeof:S,_context:Ie},Ie.Consumer=Ie},Pr.createElement=W,Pr.createFactory=function(Ie){var Ye=W.bind(null,Ie);return Ye.type=Ie,Ye},Pr.createRef=function(){return{current:null}},Pr.forwardRef=function(Ie){return{$$typeof:g,render:Ie}},Pr.isValidElement=N,Pr.lazy=function(Ie){return{$$typeof:R,_payload:{_status:-1,_result:Ie},_init:Je}},Pr.memo=function(Ie,Ye){return{$$typeof:F,type:Ie,compare:Ye===void 0?null:Ye}},Pr.startTransition=function(Ie){var Ye=je.transition;je.transition={};try{Ie()}finally{je.transition=Ye}},Pr.unstable_act=ct,Pr.useCallback=function(Ie,Ye){return Te.current.useCallback(Ie,Ye)},Pr.useContext=function(Ie){return Te.current.useContext(Ie)},Pr.useDebugValue=function(){},Pr.useDeferredValue=function(Ie){return Te.current.useDeferredValue(Ie)},Pr.useEffect=function(Ie,Ye){return Te.current.useEffect(Ie,Ye)},Pr.useId=function(){return Te.current.useId()},Pr.useImperativeHandle=function(Ie,Ye,mt){return Te.current.useImperativeHandle(Ie,Ye,mt)},Pr.useInsertionEffect=function(Ie,Ye){return Te.current.useInsertionEffect(Ie,Ye)},Pr.useLayoutEffect=function(Ie,Ye){return Te.current.useLayoutEffect(Ie,Ye)},Pr.useMemo=function(Ie,Ye){return Te.current.useMemo(Ie,Ye)},Pr.useReducer=function(Ie,Ye,mt){return Te.current.useReducer(Ie,Ye,mt)},Pr.useRef=function(Ie){return Te.current.useRef(Ie)},Pr.useState=function(Ie){return Te.current.useState(Ie)},Pr.useSyncExternalStore=function(Ie,Ye,mt){return Te.current.useSyncExternalStore(Ie,Ye,mt)},Pr.useTransition=function(){return Te.current.useTransition()},Pr.version="18.3.1",Pr}var RP;function Z0(){return RP||(RP=1,o1.exports=aq()),o1.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sq=Z0(),uq=Symbol.for("react.element"),lq=Symbol.for("react.fragment"),cq=Object.prototype.hasOwnProperty,fq=sq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dq={key:!0,ref:!0,__self:!0,__source:!0};function VF(o,i,l){var d,p={},S=null,b=null;l!==void 0&&(S=""+l),i.key!==void 0&&(S=""+i.key),i.ref!==void 0&&(b=i.ref);for(d in i)cq.call(i,d)&&!dq.hasOwnProperty(d)&&(p[d]=i[d]);if(o&&o.defaultProps)for(d in i=o.defaultProps,i)p[d]===void 0&&(p[d]=i[d]);return{$$typeof:uq,type:o,key:S,ref:b,props:p,_owner:fq.current}}j0.Fragment=lq;j0.jsx=VF;j0.jsxs=VF;KF.exports=j0;var Rt=KF.exports,oI={},zF={exports:{}},ds={},YF={exports:{}},WF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function i(je,nt){var ct=je.length;je.push(nt);e:for(;0<ct;){var Ie=ct-1>>>1,Ye=je[Ie];if(0<p(Ye,nt))je[Ie]=nt,je[ct]=Ye,ct=Ie;else break e}}function l(je){return je.length===0?null:je[0]}function d(je){if(je.length===0)return null;var nt=je[0],ct=je.pop();if(ct!==nt){je[0]=ct;e:for(var Ie=0,Ye=je.length,mt=Ye>>>1;Ie<mt;){var xe=2*(Ie+1)-1,We=je[xe],it=xe+1,qt=je[it];if(0>p(We,ct))it<Ye&&0>p(qt,We)?(je[Ie]=qt,je[it]=ct,Ie=it):(je[Ie]=We,je[xe]=ct,Ie=xe);else if(it<Ye&&0>p(qt,ct))je[Ie]=qt,je[it]=ct,Ie=it;else break e}}return nt}function p(je,nt){var ct=je.sortIndex-nt.sortIndex;return ct!==0?ct:je.id-nt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;o.unstable_now=function(){return S.now()}}else{var b=Date,g=b.now();o.unstable_now=function(){return b.now()-g}}var w=[],F=[],R=1,y=null,v=3,D=!1,m=!1,T=!1,U=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(je){for(var nt=l(F);nt!==null;){if(nt.callback===null)d(F);else if(nt.startTime<=je)d(F),nt.sortIndex=nt.expirationTime,i(w,nt);else break;nt=l(F)}}function C(je){if(T=!1,I(je),!m)if(l(w)!==null)m=!0,Je(j);else{var nt=l(F);nt!==null&&Te(C,nt.startTime-je)}}function j(je,nt){m=!1,T&&(T=!1,x(W),W=-1),D=!0;var ct=v;try{for(I(nt),y=l(w);y!==null&&(!(y.expirationTime>nt)||je&&!X());){var Ie=y.callback;if(typeof Ie=="function"){y.callback=null,v=y.priorityLevel;var Ye=Ie(y.expirationTime<=nt);nt=o.unstable_now(),typeof Ye=="function"?y.callback=Ye:y===l(w)&&d(w),I(nt)}else d(w);y=l(w)}if(y!==null)var mt=!0;else{var xe=l(F);xe!==null&&Te(C,xe.startTime-nt),mt=!1}return mt}finally{y=null,v=ct,D=!1}}var z=!1,$=null,W=-1,ue=5,N=-1;function X(){return!(o.unstable_now()-N<ue)}function ce(){if($!==null){var je=o.unstable_now();N=je;var nt=!0;try{nt=$(!0,je)}finally{nt?oe():(z=!1,$=null)}}else z=!1}var oe;if(typeof _=="function")oe=function(){_(ce)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Ce=de.port2;de.port1.onmessage=ce,oe=function(){Ce.postMessage(null)}}else oe=function(){U(ce,0)};function Je(je){$=je,z||(z=!0,oe())}function Te(je,nt){W=U(function(){je(o.unstable_now())},nt)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(je){je.callback=null},o.unstable_continueExecution=function(){m||D||(m=!0,Je(j))},o.unstable_forceFrameRate=function(je){0>je||125<je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<je?Math.floor(1e3/je):5},o.unstable_getCurrentPriorityLevel=function(){return v},o.unstable_getFirstCallbackNode=function(){return l(w)},o.unstable_next=function(je){switch(v){case 1:case 2:case 3:var nt=3;break;default:nt=v}var ct=v;v=nt;try{return je()}finally{v=ct}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(je,nt){switch(je){case 1:case 2:case 3:case 4:case 5:break;default:je=3}var ct=v;v=je;try{return nt()}finally{v=ct}},o.unstable_scheduleCallback=function(je,nt,ct){var Ie=o.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?Ie+ct:Ie):ct=Ie,je){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=ct+Ye,je={id:R++,callback:nt,priorityLevel:je,startTime:ct,expirationTime:Ye,sortIndex:-1},ct>Ie?(je.sortIndex=ct,i(F,je),l(w)===null&&je===l(F)&&(T?(x(W),W=-1):T=!0,Te(C,ct-Ie))):(je.sortIndex=Ye,i(w,je),m||D||(m=!0,Je(j))),je},o.unstable_shouldYield=X,o.unstable_wrapCallback=function(je){var nt=v;return function(){var ct=v;v=nt;try{return je.apply(this,arguments)}finally{v=ct}}}})(WF);YF.exports=WF;var hq=YF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pq=Z0(),fs=hq;function jn(o){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+o,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+o+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $F=new Set,Ig={};function Tf(o,i){dh(o,i),dh(o+"Capture",i)}function dh(o,i){for(Ig[o]=i,o=0;o<i.length;o++)$F.add(i[o])}var vl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aI=Object.prototype.hasOwnProperty,gq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,NP={},xP={};function mq(o){return aI.call(xP,o)?!0:aI.call(NP,o)?!1:gq.test(o)?xP[o]=!0:(NP[o]=!0,!1)}function vq(o,i,l,d){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function yq(o,i,l,d){if(i===null||typeof i>"u"||vq(o,i,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function Ta(o,i,l,d,p,S,b){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=o,this.type=i,this.sanitizeURL=S,this.removeEmptyString=b}var Zo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){Zo[o]=new Ta(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var i=o[0];Zo[i]=new Ta(i,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){Zo[o]=new Ta(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){Zo[o]=new Ta(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){Zo[o]=new Ta(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){Zo[o]=new Ta(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){Zo[o]=new Ta(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){Zo[o]=new Ta(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){Zo[o]=new Ta(o,5,!1,o.toLowerCase(),null,!1,!1)});var vb=/[\-:]([a-z])/g;function yb(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var i=o.replace(vb,yb);Zo[i]=new Ta(i,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var i=o.replace(vb,yb);Zo[i]=new Ta(i,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var i=o.replace(vb,yb);Zo[i]=new Ta(i,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){Zo[o]=new Ta(o,1,!1,o.toLowerCase(),null,!1,!1)});Zo.xlinkHref=new Ta("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){Zo[o]=new Ta(o,1,!1,o.toLowerCase(),null,!0,!0)});function Eb(o,i,l,d){var p=Zo.hasOwnProperty(i)?Zo[i]:null;(p!==null?p.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(yq(i,l,p,d)&&(l=null),d||p===null?mq(i)&&(l===null?o.removeAttribute(i):o.setAttribute(i,""+l)):p.mustUseProperty?o[p.propertyName]=l===null?p.type===3?!1:"":l:(i=p.attributeName,d=p.attributeNamespace,l===null?o.removeAttribute(i):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?o.setAttributeNS(d,i,l):o.setAttribute(i,l))))}var Sl=pq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,by=Symbol.for("react.element"),Kd=Symbol.for("react.portal"),Vd=Symbol.for("react.fragment"),_b=Symbol.for("react.strict_mode"),sI=Symbol.for("react.profiler"),XF=Symbol.for("react.provider"),QF=Symbol.for("react.context"),Tb=Symbol.for("react.forward_ref"),uI=Symbol.for("react.suspense"),lI=Symbol.for("react.suspense_list"),Sb=Symbol.for("react.memo"),Xl=Symbol.for("react.lazy"),JF=Symbol.for("react.offscreen"),MP=Symbol.iterator;function Xp(o){return o===null||typeof o!="object"?null:(o=MP&&o[MP]||o["@@iterator"],typeof o=="function"?o:null)}var Vi=Object.assign,a1;function lg(o){if(a1===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);a1=i&&i[1]||""}return"\n"+a1+o}var s1=!1;function u1(o,i){if(!o||s1)return"";s1=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(F){var d=F}Reflect.construct(o,[],i)}else{try{i.call()}catch(F){d=F}o.call(i.prototype)}else{try{throw Error()}catch(F){d=F}o()}}catch(F){if(F&&d&&typeof F.stack=="string"){for(var p=F.stack.split("\n"),S=d.stack.split("\n"),b=p.length-1,g=S.length-1;1<=b&&0<=g&&p[b]!==S[g];)g--;for(;1<=b&&0<=g;b--,g--)if(p[b]!==S[g]){if(b!==1||g!==1)do if(b--,g--,0>g||p[b]!==S[g]){var w="\n"+p[b].replace(" at new "," at ");return o.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",o.displayName)),w}while(1<=b&&0<=g);break}}}finally{s1=!1,Error.prepareStackTrace=l}return(o=o?o.displayName||o.name:"")?lg(o):""}function Eq(o){switch(o.tag){case 5:return lg(o.type);case 16:return lg("Lazy");case 13:return lg("Suspense");case 19:return lg("SuspenseList");case 0:case 2:case 15:return o=u1(o.type,!1),o;case 11:return o=u1(o.type.render,!1),o;case 1:return o=u1(o.type,!0),o;default:return""}}function cI(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case Vd:return"Fragment";case Kd:return"Portal";case sI:return"Profiler";case _b:return"StrictMode";case uI:return"Suspense";case lI:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case QF:return(o.displayName||"Context")+".Consumer";case XF:return(o._context.displayName||"Context")+".Provider";case Tb:var i=o.render;return o=o.displayName,o||(o=i.displayName||i.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Sb:return i=o.displayName||null,i!==null?i:cI(o.type)||"Memo";case Xl:i=o._payload,o=o._init;try{return cI(o(i))}catch(l){}}return null}function _q(o){var i=o.type;switch(o.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=i.render,o=o.displayName||o.name||"",i.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cI(i);case 8:return i===_b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function dc(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function e3(o){var i=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Tq(o){var i=e3(o)?"checked":"value",l=Object.getOwnPropertyDescriptor(o.constructor.prototype,i),d=""+o[i];if(!o.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,S=l.set;return Object.defineProperty(o,i,{configurable:!0,get:function(){return p.call(this)},set:function(b){d=""+b,S.call(this,b)}}),Object.defineProperty(o,i,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(b){d=""+b},stopTracking:function(){o._valueTracker=null,delete o[i]}}}}function Cy(o){o._valueTracker||(o._valueTracker=Tq(o))}function t3(o){if(!o)return!1;var i=o._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return o&&(d=e3(o)?o.checked?"true":"false":o.value),o=d,o!==l?(i.setValue(o),!0):!1}function l0(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch(i){return o.body}}function fI(o,i){var l=i.checked;return Vi({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l!=null?l:o._wrapperState.initialChecked})}function DP(o,i){var l=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;l=dc(i.value!=null?i.value:l),o._wrapperState={initialChecked:d,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function n3(o,i){i=i.checked,i!=null&&Eb(o,"checked",i,!1)}function dI(o,i){n3(o,i);var l=dc(i.value),d=i.type;if(l!=null)d==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+l):o.value!==""+l&&(o.value=""+l);else if(d==="submit"||d==="reset"){o.removeAttribute("value");return}i.hasOwnProperty("value")?hI(o,i.type,l):i.hasOwnProperty("defaultValue")&&hI(o,i.type,dc(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(o.defaultChecked=!!i.defaultChecked)}function PP(o,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+o._wrapperState.initialValue,l||i===o.value||(o.value=i),o.defaultValue=i}l=o.name,l!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,l!==""&&(o.name=l)}function hI(o,i,l){(i!=="number"||l0(o.ownerDocument)!==o)&&(l==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+l&&(o.defaultValue=""+l))}var cg=Array.isArray;function ah(o,i,l,d){if(o=o.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<o.length;l++)p=i.hasOwnProperty("$"+o[l].value),o[l].selected!==p&&(o[l].selected=p),p&&d&&(o[l].defaultSelected=!0)}else{for(l=""+dc(l),i=null,p=0;p<o.length;p++){if(o[p].value===l){o[p].selected=!0,d&&(o[p].defaultSelected=!0);return}i!==null||o[p].disabled||(i=o[p])}i!==null&&(i.selected=!0)}}function pI(o,i){if(i.dangerouslySetInnerHTML!=null)throw Error(jn(91));return Vi({},i,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function OP(o,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(jn(92));if(cg(l)){if(1<l.length)throw Error(jn(93));l=l[0]}i=l}i==null&&(i=""),l=i}o._wrapperState={initialValue:dc(l)}}function r3(o,i){var l=dc(i.value),d=dc(i.defaultValue);l!=null&&(l=""+l,l!==o.value&&(o.value=l),i.defaultValue==null&&o.defaultValue!==l&&(o.defaultValue=l)),d!=null&&(o.defaultValue=""+d)}function LP(o){var i=o.textContent;i===o._wrapperState.initialValue&&i!==""&&i!==null&&(o.value=i)}function i3(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gI(o,i){return o==null||o==="http://www.w3.org/1999/xhtml"?i3(i):o==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ry,o3=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,d,p){MSApp.execUnsafeLocalFunction(function(){return o(i,l,d,p)})}:o}(function(o,i){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=i;else{for(Ry=Ry||document.createElement("div"),Ry.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Ry.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;i.firstChild;)o.appendChild(i.firstChild)}});function bg(o,i){if(i){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=i;return}}o.textContent=i}var mg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sq=["Webkit","ms","Moz","O"];Object.keys(mg).forEach(function(o){Sq.forEach(function(i){i=i+o.charAt(0).toUpperCase()+o.substring(1),mg[i]=mg[o]})});function a3(o,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||mg.hasOwnProperty(o)&&mg[o]?(""+i).trim():i+"px"}function s3(o,i){o=o.style;for(var l in i)if(i.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=a3(l,i[l],d);l==="float"&&(l="cssFloat"),d?o.setProperty(l,p):o[l]=p}}var wq=Vi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mI(o,i){if(i){if(wq[o]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(jn(137,o));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(jn(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(jn(61))}if(i.style!=null&&typeof i.style!="object")throw Error(jn(62))}}function vI(o,i){if(o.indexOf("-")===-1)return typeof i.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yI=null;function wb(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var EI=null,sh=null,uh=null;function kP(o){if(o=Wg(o)){if(typeof EI!="function")throw Error(jn(280));var i=o.stateNode;i&&(i=V0(i),EI(o.stateNode,o.type,i))}}function u3(o){sh?uh?uh.push(o):uh=[o]:sh=o}function l3(){if(sh){var o=sh,i=uh;if(uh=sh=null,kP(o),i)for(o=0;o<i.length;o++)kP(i[o])}}function c3(o,i){return o(i)}function f3(){}var l1=!1;function d3(o,i,l){if(l1)return o(i,l);l1=!0;try{return c3(o,i,l)}finally{l1=!1,(sh!==null||uh!==null)&&(f3(),l3())}}function Cg(o,i){var l=o.stateNode;if(l===null)return null;var d=V0(l);if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(jn(231,i,typeof l));return l}var _I=!1;if(vl)try{var Qp={};Object.defineProperty(Qp,"passive",{get:function(){_I=!0}}),window.addEventListener("test",Qp,Qp),window.removeEventListener("test",Qp,Qp)}catch(o){_I=!1}function Aq(o,i,l,d,p,S,b,g,w){var F=Array.prototype.slice.call(arguments,3);try{i.apply(l,F)}catch(R){this.onError(R)}}var vg=!1,c0=null,f0=!1,TI=null,Iq={onError:function(o){vg=!0,c0=o}};function bq(o,i,l,d,p,S,b,g,w){vg=!1,c0=null,Aq.apply(Iq,arguments)}function Cq(o,i,l,d,p,S,b,g,w){if(bq.apply(this,arguments),vg){if(vg){var F=c0;vg=!1,c0=null}else throw Error(jn(198));f0||(f0=!0,TI=F)}}function Sf(o){var i=o,l=o;if(o.alternate)for(;i.return;)i=i.return;else{o=i;do i=o,i.flags&4098&&(l=i.return),o=i.return;while(o)}return i.tag===3?l:null}function h3(o){if(o.tag===13){var i=o.memoizedState;if(i===null&&(o=o.alternate,o!==null&&(i=o.memoizedState)),i!==null)return i.dehydrated}return null}function FP(o){if(Sf(o)!==o)throw Error(jn(188))}function Rq(o){var i=o.alternate;if(!i){if(i=Sf(o),i===null)throw Error(jn(188));return i!==o?null:o}for(var l=o,d=i;;){var p=l.return;if(p===null)break;var S=p.alternate;if(S===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===S.child){for(S=p.child;S;){if(S===l)return FP(p),o;if(S===d)return FP(p),i;S=S.sibling}throw Error(jn(188))}if(l.return!==d.return)l=p,d=S;else{for(var b=!1,g=p.child;g;){if(g===l){b=!0,l=p,d=S;break}if(g===d){b=!0,d=p,l=S;break}g=g.sibling}if(!b){for(g=S.child;g;){if(g===l){b=!0,l=S,d=p;break}if(g===d){b=!0,d=S,l=p;break}g=g.sibling}if(!b)throw Error(jn(189))}}if(l.alternate!==d)throw Error(jn(190))}if(l.tag!==3)throw Error(jn(188));return l.stateNode.current===l?o:i}function p3(o){return o=Rq(o),o!==null?g3(o):null}function g3(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var i=g3(o);if(i!==null)return i;o=o.sibling}return null}var m3=fs.unstable_scheduleCallback,UP=fs.unstable_cancelCallback,Nq=fs.unstable_shouldYield,xq=fs.unstable_requestPaint,co=fs.unstable_now,Mq=fs.unstable_getCurrentPriorityLevel,Ab=fs.unstable_ImmediatePriority,v3=fs.unstable_UserBlockingPriority,d0=fs.unstable_NormalPriority,Dq=fs.unstable_LowPriority,y3=fs.unstable_IdlePriority,G0=null,Nu=null;function Pq(o){if(Nu&&typeof Nu.onCommitFiberRoot=="function")try{Nu.onCommitFiberRoot(G0,o,void 0,(o.current.flags&128)===128)}catch(i){}}var ru=Math.clz32?Math.clz32:kq,Oq=Math.log,Lq=Math.LN2;function kq(o){return o>>>=0,o===0?32:31-(Oq(o)/Lq|0)|0}var Ny=64,xy=4194304;function fg(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function h0(o,i){var l=o.pendingLanes;if(l===0)return 0;var d=0,p=o.suspendedLanes,S=o.pingedLanes,b=l&268435455;if(b!==0){var g=b&~p;g!==0?d=fg(g):(S&=b,S!==0&&(d=fg(S)))}else b=l&~p,b!==0?d=fg(b):S!==0&&(d=fg(S));if(d===0)return 0;if(i!==0&&i!==d&&!(i&p)&&(p=d&-d,S=i&-i,p>=S||p===16&&(S&4194240)!==0))return i;if(d&4&&(d|=l&16),i=o.entangledLanes,i!==0)for(o=o.entanglements,i&=d;0<i;)l=31-ru(i),p=1<<l,d|=o[l],i&=~p;return d}function Fq(o,i){switch(o){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uq(o,i){for(var l=o.suspendedLanes,d=o.pingedLanes,p=o.expirationTimes,S=o.pendingLanes;0<S;){var b=31-ru(S),g=1<<b,w=p[b];w===-1?(!(g&l)||g&d)&&(p[b]=Fq(g,i)):w<=i&&(o.expiredLanes|=g),S&=~g}}function SI(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function E3(){var o=Ny;return Ny<<=1,!(Ny&4194240)&&(Ny=64),o}function c1(o){for(var i=[],l=0;31>l;l++)i.push(o);return i}function zg(o,i,l){o.pendingLanes|=i,i!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,i=31-ru(i),o[i]=l}function Bq(o,i){var l=o.pendingLanes&~i;o.pendingLanes=i,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=i,o.mutableReadLanes&=i,o.entangledLanes&=i,i=o.entanglements;var d=o.eventTimes;for(o=o.expirationTimes;0<l;){var p=31-ru(l),S=1<<p;i[p]=0,d[p]=-1,o[p]=-1,l&=~S}}function Ib(o,i){var l=o.entangledLanes|=i;for(o=o.entanglements;l;){var d=31-ru(l),p=1<<d;p&i|o[d]&i&&(o[d]|=i),l&=~p}}var hi=0;function _3(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var T3,bb,S3,w3,A3,wI=!1,My=[],rc=null,ic=null,oc=null,Rg=new Map,Ng=new Map,Jl=[],jq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function BP(o,i){switch(o){case"focusin":case"focusout":rc=null;break;case"dragenter":case"dragleave":ic=null;break;case"mouseover":case"mouseout":oc=null;break;case"pointerover":case"pointerout":Rg.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ng.delete(i.pointerId)}}function Jp(o,i,l,d,p,S){return o===null||o.nativeEvent!==S?(o={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:S,targetContainers:[p]},i!==null&&(i=Wg(i),i!==null&&bb(i)),o):(o.eventSystemFlags|=d,i=o.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),o)}function Zq(o,i,l,d,p){switch(i){case"focusin":return rc=Jp(rc,o,i,l,d,p),!0;case"dragenter":return ic=Jp(ic,o,i,l,d,p),!0;case"mouseover":return oc=Jp(oc,o,i,l,d,p),!0;case"pointerover":var S=p.pointerId;return Rg.set(S,Jp(Rg.get(S)||null,o,i,l,d,p)),!0;case"gotpointercapture":return S=p.pointerId,Ng.set(S,Jp(Ng.get(S)||null,o,i,l,d,p)),!0}return!1}function I3(o){var i=af(o.target);if(i!==null){var l=Sf(i);if(l!==null){if(i=l.tag,i===13){if(i=h3(l),i!==null){o.blockedOn=i,A3(o.priority,function(){S3(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function $y(o){if(o.blockedOn!==null)return!1;for(var i=o.targetContainers;0<i.length;){var l=AI(o.domEventName,o.eventSystemFlags,i[0],o.nativeEvent);if(l===null){l=o.nativeEvent;var d=new l.constructor(l.type,l);yI=d,l.target.dispatchEvent(d),yI=null}else return i=Wg(l),i!==null&&bb(i),o.blockedOn=l,!1;i.shift()}return!0}function jP(o,i,l){$y(o)&&l.delete(i)}function Gq(){wI=!1,rc!==null&&$y(rc)&&(rc=null),ic!==null&&$y(ic)&&(ic=null),oc!==null&&$y(oc)&&(oc=null),Rg.forEach(jP),Ng.forEach(jP)}function eg(o,i){o.blockedOn===i&&(o.blockedOn=null,wI||(wI=!0,fs.unstable_scheduleCallback(fs.unstable_NormalPriority,Gq)))}function xg(o){function i(p){return eg(p,o)}if(0<My.length){eg(My[0],o);for(var l=1;l<My.length;l++){var d=My[l];d.blockedOn===o&&(d.blockedOn=null)}}for(rc!==null&&eg(rc,o),ic!==null&&eg(ic,o),oc!==null&&eg(oc,o),Rg.forEach(i),Ng.forEach(i),l=0;l<Jl.length;l++)d=Jl[l],d.blockedOn===o&&(d.blockedOn=null);for(;0<Jl.length&&(l=Jl[0],l.blockedOn===null);)I3(l),l.blockedOn===null&&Jl.shift()}var lh=Sl.ReactCurrentBatchConfig,p0=!0;function qq(o,i,l,d){var p=hi,S=lh.transition;lh.transition=null;try{hi=1,Cb(o,i,l,d)}finally{hi=p,lh.transition=S}}function Hq(o,i,l,d){var p=hi,S=lh.transition;lh.transition=null;try{hi=4,Cb(o,i,l,d)}finally{hi=p,lh.transition=S}}function Cb(o,i,l,d){if(p0){var p=AI(o,i,l,d);if(p===null)_1(o,i,d,g0,l),BP(o,d);else if(Zq(p,o,i,l,d))d.stopPropagation();else if(BP(o,d),i&4&&-1<jq.indexOf(o)){for(;p!==null;){var S=Wg(p);if(S!==null&&T3(S),S=AI(o,i,l,d),S===null&&_1(o,i,d,g0,l),S===p)break;p=S}p!==null&&d.stopPropagation()}else _1(o,i,d,null,l)}}var g0=null;function AI(o,i,l,d){if(g0=null,o=wb(d),o=af(o),o!==null)if(i=Sf(o),i===null)o=null;else if(l=i.tag,l===13){if(o=h3(i),o!==null)return o;o=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null);return g0=o,null}function b3(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mq()){case Ab:return 1;case v3:return 4;case d0:case Dq:return 16;case y3:return 536870912;default:return 16}default:return 16}}var tc=null,Rb=null,Xy=null;function C3(){if(Xy)return Xy;var o,i=Rb,l=i.length,d,p="value"in tc?tc.value:tc.textContent,S=p.length;for(o=0;o<l&&i[o]===p[o];o++);var b=l-o;for(d=1;d<=b&&i[l-d]===p[S-d];d++);return Xy=p.slice(o,1<d?1-d:void 0)}function Qy(o){var i=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&i===13&&(o=13)):o=i,o===10&&(o=13),32<=o||o===13?o:0}function Dy(){return!0}function ZP(){return!1}function hs(o){function i(l,d,p,S,b){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=S,this.target=b,this.currentTarget=null;for(var g in o)o.hasOwnProperty(g)&&(l=o[g],this[g]=l?l(S):S[g]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Dy:ZP,this.isPropagationStopped=ZP,this}return Vi(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Dy)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Dy)},persist:function(){},isPersistent:Dy}),i}var Th={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nb=hs(Th),Yg=Vi({},Th,{view:0,detail:0}),Kq=hs(Yg),f1,d1,tg,q0=Vi({},Yg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xb,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==tg&&(tg&&o.type==="mousemove"?(f1=o.screenX-tg.screenX,d1=o.screenY-tg.screenY):d1=f1=0,tg=o),f1)},movementY:function(o){return"movementY"in o?o.movementY:d1}}),GP=hs(q0),Vq=Vi({},q0,{dataTransfer:0}),zq=hs(Vq),Yq=Vi({},Yg,{relatedTarget:0}),h1=hs(Yq),Wq=Vi({},Th,{animationName:0,elapsedTime:0,pseudoElement:0}),$q=hs(Wq),Xq=Vi({},Th,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Qq=hs(Xq),Jq=Vi({},Th,{data:0}),qP=hs(Jq),e9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r9(o){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(o):(o=n9[o])?!!i[o]:!1}function xb(){return r9}var i9=Vi({},Yg,{key:function(o){if(o.key){var i=e9[o.key]||o.key;if(i!=="Unidentified")return i}return o.type==="keypress"?(o=Qy(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?t9[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xb,charCode:function(o){return o.type==="keypress"?Qy(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Qy(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),o9=hs(i9),a9=Vi({},q0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HP=hs(a9),s9=Vi({},Yg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xb}),u9=hs(s9),l9=Vi({},Th,{propertyName:0,elapsedTime:0,pseudoElement:0}),c9=hs(l9),f9=Vi({},q0,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),d9=hs(f9),h9=[9,13,27,32],Mb=vl&&"CompositionEvent"in window,yg=null;vl&&"documentMode"in document&&(yg=document.documentMode);var p9=vl&&"TextEvent"in window&&!yg,R3=vl&&(!Mb||yg&&8<yg&&11>=yg),KP=" ",VP=!1;function N3(o,i){switch(o){case"keyup":return h9.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x3(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var zd=!1;function g9(o,i){switch(o){case"compositionend":return x3(i);case"keypress":return i.which!==32?null:(VP=!0,KP);case"textInput":return o=i.data,o===KP&&VP?null:o;default:return null}}function m9(o,i){if(zd)return o==="compositionend"||!Mb&&N3(o,i)?(o=C3(),Xy=Rb=tc=null,zd=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return R3&&i.locale!=="ko"?null:i.data;default:return null}}var v9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zP(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i==="input"?!!v9[o.type]:i==="textarea"}function M3(o,i,l,d){u3(d),i=m0(i,"onChange"),0<i.length&&(l=new Nb("onChange","change",null,l,d),o.push({event:l,listeners:i}))}var Eg=null,Mg=null;function y9(o){G3(o,0)}function H0(o){var i=$d(o);if(t3(i))return o}function E9(o,i){if(o==="change")return i}var D3=!1;if(vl){var p1;if(vl){var g1="oninput"in document;if(!g1){var YP=document.createElement("div");YP.setAttribute("oninput","return;"),g1=typeof YP.oninput=="function"}p1=g1}else p1=!1;D3=p1&&(!document.documentMode||9<document.documentMode)}function WP(){Eg&&(Eg.detachEvent("onpropertychange",P3),Mg=Eg=null)}function P3(o){if(o.propertyName==="value"&&H0(Mg)){var i=[];M3(i,Mg,o,wb(o)),d3(y9,i)}}function _9(o,i,l){o==="focusin"?(WP(),Eg=i,Mg=l,Eg.attachEvent("onpropertychange",P3)):o==="focusout"&&WP()}function T9(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return H0(Mg)}function S9(o,i){if(o==="click")return H0(i)}function w9(o,i){if(o==="input"||o==="change")return H0(i)}function A9(o,i){return o===i&&(o!==0||1/o===1/i)||o!==o&&i!==i}var au=typeof Object.is=="function"?Object.is:A9;function Dg(o,i){if(au(o,i))return!0;if(typeof o!="object"||o===null||typeof i!="object"||i===null)return!1;var l=Object.keys(o),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!aI.call(i,p)||!au(o[p],i[p]))return!1}return!0}function $P(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function XP(o,i){var l=$P(o);o=0;for(var d;l;){if(l.nodeType===3){if(d=o+l.textContent.length,o<=i&&d>=i)return{node:l,offset:i-o};o=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=$P(l)}}function O3(o,i){return o&&i?o===i?!0:o&&o.nodeType===3?!1:i&&i.nodeType===3?O3(o,i.parentNode):"contains"in o?o.contains(i):o.compareDocumentPosition?!!(o.compareDocumentPosition(i)&16):!1:!1}function L3(){for(var o=window,i=l0();i instanceof o.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch(d){l=!1}if(l)o=i.contentWindow;else break;i=l0(o.document)}return i}function Db(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i&&(i==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||i==="textarea"||o.contentEditable==="true")}function I9(o){var i=L3(),l=o.focusedElem,d=o.selectionRange;if(i!==l&&l&&l.ownerDocument&&O3(l.ownerDocument.documentElement,l)){if(d!==null&&Db(l)){if(i=d.start,o=d.end,o===void 0&&(o=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(o,l.value.length);else if(o=(i=l.ownerDocument||document)&&i.defaultView||window,o.getSelection){o=o.getSelection();var p=l.textContent.length,S=Math.min(d.start,p);d=d.end===void 0?S:Math.min(d.end,p),!o.extend&&S>d&&(p=d,d=S,S=p),p=XP(l,S);var b=XP(l,d);p&&b&&(o.rangeCount!==1||o.anchorNode!==p.node||o.anchorOffset!==p.offset||o.focusNode!==b.node||o.focusOffset!==b.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),o.removeAllRanges(),S>d?(o.addRange(i),o.extend(b.node,b.offset)):(i.setEnd(b.node,b.offset),o.addRange(i)))}}for(i=[],o=l;o=o.parentNode;)o.nodeType===1&&i.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)o=i[l],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var b9=vl&&"documentMode"in document&&11>=document.documentMode,Yd=null,II=null,_g=null,bI=!1;function QP(o,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;bI||Yd==null||Yd!==l0(d)||(d=Yd,"selectionStart"in d&&Db(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),_g&&Dg(_g,d)||(_g=d,d=m0(II,"onSelect"),0<d.length&&(i=new Nb("onSelect","select",null,i,l),o.push({event:i,listeners:d}),i.target=Yd)))}function Py(o,i){var l={};return l[o.toLowerCase()]=i.toLowerCase(),l["Webkit"+o]="webkit"+i,l["Moz"+o]="moz"+i,l}var Wd={animationend:Py("Animation","AnimationEnd"),animationiteration:Py("Animation","AnimationIteration"),animationstart:Py("Animation","AnimationStart"),transitionend:Py("Transition","TransitionEnd")},m1={},k3={};vl&&(k3=document.createElement("div").style,"AnimationEvent"in window||(delete Wd.animationend.animation,delete Wd.animationiteration.animation,delete Wd.animationstart.animation),"TransitionEvent"in window||delete Wd.transitionend.transition);function K0(o){if(m1[o])return m1[o];if(!Wd[o])return o;var i=Wd[o],l;for(l in i)if(i.hasOwnProperty(l)&&l in k3)return m1[o]=i[l];return o}var F3=K0("animationend"),U3=K0("animationiteration"),B3=K0("animationstart"),j3=K0("transitionend"),Z3=new Map,JP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pc(o,i){Z3.set(o,i),Tf(i,[o])}for(var v1=0;v1<JP.length;v1++){var y1=JP[v1],C9=y1.toLowerCase(),R9=y1[0].toUpperCase()+y1.slice(1);pc(C9,"on"+R9)}pc(F3,"onAnimationEnd");pc(U3,"onAnimationIteration");pc(B3,"onAnimationStart");pc("dblclick","onDoubleClick");pc("focusin","onFocus");pc("focusout","onBlur");pc(j3,"onTransitionEnd");dh("onMouseEnter",["mouseout","mouseover"]);dh("onMouseLeave",["mouseout","mouseover"]);dh("onPointerEnter",["pointerout","pointerover"]);dh("onPointerLeave",["pointerout","pointerover"]);Tf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N9=new Set("cancel close invalid load scroll toggle".split(" ").concat(dg));function e2(o,i,l){var d=o.type||"unknown-event";o.currentTarget=l,Cq(d,i,void 0,o),o.currentTarget=null}function G3(o,i){i=(i&4)!==0;for(var l=0;l<o.length;l++){var d=o[l],p=d.event;d=d.listeners;e:{var S=void 0;if(i)for(var b=d.length-1;0<=b;b--){var g=d[b],w=g.instance,F=g.currentTarget;if(g=g.listener,w!==S&&p.isPropagationStopped())break e;e2(p,g,F),S=w}else for(b=0;b<d.length;b++){if(g=d[b],w=g.instance,F=g.currentTarget,g=g.listener,w!==S&&p.isPropagationStopped())break e;e2(p,g,F),S=w}}}if(f0)throw o=TI,f0=!1,TI=null,o}function xi(o,i){var l=i[MI];l===void 0&&(l=i[MI]=new Set);var d=o+"__bubble";l.has(d)||(q3(i,o,2,!1),l.add(d))}function E1(o,i,l){var d=0;i&&(d|=4),q3(l,o,d,i)}var Oy="_reactListening"+Math.random().toString(36).slice(2);function Pg(o){if(!o[Oy]){o[Oy]=!0,$F.forEach(function(l){l!=="selectionchange"&&(N9.has(l)||E1(l,!1,o),E1(l,!0,o))});var i=o.nodeType===9?o:o.ownerDocument;i===null||i[Oy]||(i[Oy]=!0,E1("selectionchange",!1,i))}}function q3(o,i,l,d){switch(b3(i)){case 1:var p=qq;break;case 4:p=Hq;break;default:p=Cb}l=p.bind(null,i,l,o),p=void 0,!_I||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),d?p!==void 0?o.addEventListener(i,l,{capture:!0,passive:p}):o.addEventListener(i,l,!0):p!==void 0?o.addEventListener(i,l,{passive:p}):o.addEventListener(i,l,!1)}function _1(o,i,l,d,p){var S=d;if(!(i&1)&&!(i&2)&&d!==null)e:for(;;){if(d===null)return;var b=d.tag;if(b===3||b===4){var g=d.stateNode.containerInfo;if(g===p||g.nodeType===8&&g.parentNode===p)break;if(b===4)for(b=d.return;b!==null;){var w=b.tag;if((w===3||w===4)&&(w=b.stateNode.containerInfo,w===p||w.nodeType===8&&w.parentNode===p))return;b=b.return}for(;g!==null;){if(b=af(g),b===null)return;if(w=b.tag,w===5||w===6){d=S=b;continue e}g=g.parentNode}}d=d.return}d3(function(){var F=S,R=wb(l),y=[];e:{var v=Z3.get(o);if(v!==void 0){var D=Nb,m=o;switch(o){case"keypress":if(Qy(l)===0)break e;case"keydown":case"keyup":D=o9;break;case"focusin":m="focus",D=h1;break;case"focusout":m="blur",D=h1;break;case"beforeblur":case"afterblur":D=h1;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=GP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=zq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=u9;break;case F3:case U3:case B3:D=$q;break;case j3:D=c9;break;case"scroll":D=Kq;break;case"wheel":D=d9;break;case"copy":case"cut":case"paste":D=Qq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=HP}var T=(i&4)!==0,U=!T&&o==="scroll",x=T?v!==null?v+"Capture":null:v;T=[];for(var _=F,I;_!==null;){I=_;var C=I.stateNode;if(I.tag===5&&C!==null&&(I=C,x!==null&&(C=Cg(_,x),C!=null&&T.push(Og(_,C,I)))),U)break;_=_.return}0<T.length&&(v=new D(v,m,null,l,R),y.push({event:v,listeners:T}))}}if(!(i&7)){e:{if(v=o==="mouseover"||o==="pointerover",D=o==="mouseout"||o==="pointerout",v&&l!==yI&&(m=l.relatedTarget||l.fromElement)&&(af(m)||m[yl]))break e;if((D||v)&&(v=R.window===R?R:(v=R.ownerDocument)?v.defaultView||v.parentWindow:window,D?(m=l.relatedTarget||l.toElement,D=F,m=m?af(m):null,m!==null&&(U=Sf(m),m!==U||m.tag!==5&&m.tag!==6)&&(m=null)):(D=null,m=F),D!==m)){if(T=GP,C="onMouseLeave",x="onMouseEnter",_="mouse",(o==="pointerout"||o==="pointerover")&&(T=HP,C="onPointerLeave",x="onPointerEnter",_="pointer"),U=D==null?v:$d(D),I=m==null?v:$d(m),v=new T(C,_+"leave",D,l,R),v.target=U,v.relatedTarget=I,C=null,af(R)===F&&(T=new T(x,_+"enter",m,l,R),T.target=I,T.relatedTarget=U,C=T),U=C,D&&m)t:{for(T=D,x=m,_=0,I=T;I;I=Bd(I))_++;for(I=0,C=x;C;C=Bd(C))I++;for(;0<_-I;)T=Bd(T),_--;for(;0<I-_;)x=Bd(x),I--;for(;_--;){if(T===x||x!==null&&T===x.alternate)break t;T=Bd(T),x=Bd(x)}T=null}else T=null;D!==null&&t2(y,v,D,T,!1),m!==null&&U!==null&&t2(y,U,m,T,!0)}}e:{if(v=F?$d(F):window,D=v.nodeName&&v.nodeName.toLowerCase(),D==="select"||D==="input"&&v.type==="file")var j=E9;else if(zP(v))if(D3)j=w9;else{j=T9;var z=_9}else(D=v.nodeName)&&D.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(j=S9);if(j&&(j=j(o,F))){M3(y,j,l,R);break e}z&&z(o,v,F),o==="focusout"&&(z=v._wrapperState)&&z.controlled&&v.type==="number"&&hI(v,"number",v.value)}switch(z=F?$d(F):window,o){case"focusin":(zP(z)||z.contentEditable==="true")&&(Yd=z,II=F,_g=null);break;case"focusout":_g=II=Yd=null;break;case"mousedown":bI=!0;break;case"contextmenu":case"mouseup":case"dragend":bI=!1,QP(y,l,R);break;case"selectionchange":if(b9)break;case"keydown":case"keyup":QP(y,l,R)}var $;if(Mb)e:{switch(o){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else zd?N3(o,l)&&(W="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(W="onCompositionStart");W&&(R3&&l.locale!=="ko"&&(zd||W!=="onCompositionStart"?W==="onCompositionEnd"&&zd&&($=C3()):(tc=R,Rb="value"in tc?tc.value:tc.textContent,zd=!0)),z=m0(F,W),0<z.length&&(W=new qP(W,o,null,l,R),y.push({event:W,listeners:z}),$?W.data=$:($=x3(l),$!==null&&(W.data=$)))),($=p9?g9(o,l):m9(o,l))&&(F=m0(F,"onBeforeInput"),0<F.length&&(R=new qP("onBeforeInput","beforeinput",null,l,R),y.push({event:R,listeners:F}),R.data=$))}G3(y,i)})}function Og(o,i,l){return{instance:o,listener:i,currentTarget:l}}function m0(o,i){for(var l=i+"Capture",d=[];o!==null;){var p=o,S=p.stateNode;p.tag===5&&S!==null&&(p=S,S=Cg(o,l),S!=null&&d.unshift(Og(o,S,p)),S=Cg(o,i),S!=null&&d.push(Og(o,S,p))),o=o.return}return d}function Bd(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function t2(o,i,l,d,p){for(var S=i._reactName,b=[];l!==null&&l!==d;){var g=l,w=g.alternate,F=g.stateNode;if(w!==null&&w===d)break;g.tag===5&&F!==null&&(g=F,p?(w=Cg(l,S),w!=null&&b.unshift(Og(l,w,g))):p||(w=Cg(l,S),w!=null&&b.push(Og(l,w,g)))),l=l.return}b.length!==0&&o.push({event:i,listeners:b})}var x9=/\r\n?/g,M9=/\u0000|\uFFFD/g;function n2(o){return(typeof o=="string"?o:""+o).replace(x9,"\n").replace(M9,"")}function Ly(o,i,l){if(i=n2(i),n2(o)!==i&&l)throw Error(jn(425))}function v0(){}var CI=null,RI=null;function NI(o,i){return o==="textarea"||o==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var xI=typeof setTimeout=="function"?setTimeout:void 0,D9=typeof clearTimeout=="function"?clearTimeout:void 0,r2=typeof Promise=="function"?Promise:void 0,P9=typeof queueMicrotask=="function"?queueMicrotask:typeof r2<"u"?function(o){return r2.resolve(null).then(o).catch(O9)}:xI;function O9(o){setTimeout(function(){throw o})}function T1(o,i){var l=i,d=0;do{var p=l.nextSibling;if(o.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){o.removeChild(p),xg(i);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);xg(i)}function ac(o){for(;o!=null;o=o.nextSibling){var i=o.nodeType;if(i===1||i===3)break;if(i===8){if(i=o.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return o}function i2(o){o=o.previousSibling;for(var i=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return o;i--}else l==="/$"&&i++}o=o.previousSibling}return null}var Sh=Math.random().toString(36).slice(2),Ru="__reactFiber$"+Sh,Lg="__reactProps$"+Sh,yl="__reactContainer$"+Sh,MI="__reactEvents$"+Sh,L9="__reactListeners$"+Sh,k9="__reactHandles$"+Sh;function af(o){var i=o[Ru];if(i)return i;for(var l=o.parentNode;l;){if(i=l[yl]||l[Ru]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(o=i2(o);o!==null;){if(l=o[Ru])return l;o=i2(o)}return i}o=l,l=o.parentNode}return null}function Wg(o){return o=o[Ru]||o[yl],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function $d(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(jn(33))}function V0(o){return o[Lg]||null}var DI=[],Xd=-1;function gc(o){return{current:o}}function Mi(o){0>Xd||(o.current=DI[Xd],DI[Xd]=null,Xd--)}function bi(o,i){Xd++,DI[Xd]=o.current,o.current=i}var hc={},Jo=gc(hc),Ua=gc(!1),pf=hc;function hh(o,i){var l=o.type.contextTypes;if(!l)return hc;var d=o.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var p={},S;for(S in l)p[S]=i[S];return d&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=i,o.__reactInternalMemoizedMaskedChildContext=p),p}function Ba(o){return o=o.childContextTypes,o!=null}function y0(){Mi(Ua),Mi(Jo)}function o2(o,i,l){if(Jo.current!==hc)throw Error(jn(168));bi(Jo,i),bi(Ua,l)}function H3(o,i,l){var d=o.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in i))throw Error(jn(108,_q(o)||"Unknown",p));return Vi({},l,d)}function E0(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||hc,pf=Jo.current,bi(Jo,o),bi(Ua,Ua.current),!0}function a2(o,i,l){var d=o.stateNode;if(!d)throw Error(jn(169));l?(o=H3(o,i,pf),d.__reactInternalMemoizedMergedChildContext=o,Mi(Ua),Mi(Jo),bi(Jo,o)):Mi(Ua),bi(Ua,l)}var hl=null,z0=!1,S1=!1;function K3(o){hl===null?hl=[o]:hl.push(o)}function F9(o){z0=!0,K3(o)}function mc(){if(!S1&&hl!==null){S1=!0;var o=0,i=hi;try{var l=hl;for(hi=1;o<l.length;o++){var d=l[o];do d=d(!0);while(d!==null)}hl=null,z0=!1}catch(p){throw hl!==null&&(hl=hl.slice(o+1)),m3(Ab,mc),p}finally{hi=i,S1=!1}}return null}var Qd=[],Jd=0,_0=null,T0=0,ws=[],As=0,gf=null,pl=1,gl="";function tf(o,i){Qd[Jd++]=T0,Qd[Jd++]=_0,_0=o,T0=i}function V3(o,i,l){ws[As++]=pl,ws[As++]=gl,ws[As++]=gf,gf=o;var d=pl;o=gl;var p=32-ru(d)-1;d&=~(1<<p),l+=1;var S=32-ru(i)+p;if(30<S){var b=p-p%5;S=(d&(1<<b)-1).toString(32),d>>=b,p-=b,pl=1<<32-ru(i)+p|l<<p|d,gl=S+o}else pl=1<<S|l<<p|d,gl=o}function Pb(o){o.return!==null&&(tf(o,1),V3(o,1,0))}function Ob(o){for(;o===_0;)_0=Qd[--Jd],Qd[Jd]=null,T0=Qd[--Jd],Qd[Jd]=null;for(;o===gf;)gf=ws[--As],ws[As]=null,gl=ws[--As],ws[As]=null,pl=ws[--As],ws[As]=null}var cs=null,us=null,Ui=!1,Js=null;function z3(o,i){var l=bs(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=o,i=o.deletions,i===null?(o.deletions=[l],o.flags|=16):i.push(l)}function s2(o,i){switch(o.tag){case 5:var l=o.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(o.stateNode=i,cs=o,us=ac(i.firstChild),!0):!1;case 6:return i=o.pendingProps===""||i.nodeType!==3?null:i,i!==null?(o.stateNode=i,cs=o,us=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=gf!==null?{id:pl,overflow:gl}:null,o.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=bs(18,null,null,0),l.stateNode=i,l.return=o,o.child=l,cs=o,us=null,!0):!1;default:return!1}}function PI(o){return(o.mode&1)!==0&&(o.flags&128)===0}function OI(o){if(Ui){var i=us;if(i){var l=i;if(!s2(o,i)){if(PI(o))throw Error(jn(418));i=ac(l.nextSibling);var d=cs;i&&s2(o,i)?z3(d,l):(o.flags=o.flags&-4097|2,Ui=!1,cs=o)}}else{if(PI(o))throw Error(jn(418));o.flags=o.flags&-4097|2,Ui=!1,cs=o}}}function u2(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;cs=o}function ky(o){if(o!==cs)return!1;if(!Ui)return u2(o),Ui=!0,!1;var i;if((i=o.tag!==3)&&!(i=o.tag!==5)&&(i=o.type,i=i!=="head"&&i!=="body"&&!NI(o.type,o.memoizedProps)),i&&(i=us)){if(PI(o))throw Y3(),Error(jn(418));for(;i;)z3(o,i),i=ac(i.nextSibling)}if(u2(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(jn(317));e:{for(o=o.nextSibling,i=0;o;){if(o.nodeType===8){var l=o.data;if(l==="/$"){if(i===0){us=ac(o.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}o=o.nextSibling}us=null}}else us=cs?ac(o.stateNode.nextSibling):null;return!0}function Y3(){for(var o=us;o;)o=ac(o.nextSibling)}function ph(){us=cs=null,Ui=!1}function Lb(o){Js===null?Js=[o]:Js.push(o)}var U9=Sl.ReactCurrentBatchConfig;function ng(o,i,l){if(o=l.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(jn(309));var d=l.stateNode}if(!d)throw Error(jn(147,o));var p=d,S=""+o;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===S?i.ref:(i=function(b){var g=p.refs;b===null?delete g[S]:g[S]=b},i._stringRef=S,i)}if(typeof o!="string")throw Error(jn(284));if(!l._owner)throw Error(jn(290,o))}return o}function Fy(o,i){throw o=Object.prototype.toString.call(i),Error(jn(31,o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o))}function l2(o){var i=o._init;return i(o._payload)}function W3(o){function i(x,_){if(o){var I=x.deletions;I===null?(x.deletions=[_],x.flags|=16):I.push(_)}}function l(x,_){if(!o)return null;for(;_!==null;)i(x,_),_=_.sibling;return null}function d(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function p(x,_){return x=cc(x,_),x.index=0,x.sibling=null,x}function S(x,_,I){return x.index=I,o?(I=x.alternate,I!==null?(I=I.index,I<_?(x.flags|=2,_):I):(x.flags|=2,_)):(x.flags|=1048576,_)}function b(x){return o&&x.alternate===null&&(x.flags|=2),x}function g(x,_,I,C){return _===null||_.tag!==6?(_=N1(I,x.mode,C),_.return=x,_):(_=p(_,I),_.return=x,_)}function w(x,_,I,C){var j=I.type;return j===Vd?R(x,_,I.props.children,C,I.key):_!==null&&(_.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Xl&&l2(j)===_.type)?(C=p(_,I.props),C.ref=ng(x,_,I),C.return=x,C):(C=o0(I.type,I.key,I.props,null,x.mode,C),C.ref=ng(x,_,I),C.return=x,C)}function F(x,_,I,C){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=x1(I,x.mode,C),_.return=x,_):(_=p(_,I.children||[]),_.return=x,_)}function R(x,_,I,C,j){return _===null||_.tag!==7?(_=ff(I,x.mode,C,j),_.return=x,_):(_=p(_,I),_.return=x,_)}function y(x,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=N1(""+_,x.mode,I),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case by:return I=o0(_.type,_.key,_.props,null,x.mode,I),I.ref=ng(x,null,_),I.return=x,I;case Kd:return _=x1(_,x.mode,I),_.return=x,_;case Xl:var C=_._init;return y(x,C(_._payload),I)}if(cg(_)||Xp(_))return _=ff(_,x.mode,I,null),_.return=x,_;Fy(x,_)}return null}function v(x,_,I,C){var j=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return j!==null?null:g(x,_,""+I,C);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case by:return I.key===j?w(x,_,I,C):null;case Kd:return I.key===j?F(x,_,I,C):null;case Xl:return j=I._init,v(x,_,j(I._payload),C)}if(cg(I)||Xp(I))return j!==null?null:R(x,_,I,C,null);Fy(x,I)}return null}function D(x,_,I,C,j){if(typeof C=="string"&&C!==""||typeof C=="number")return x=x.get(I)||null,g(_,x,""+C,j);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case by:return x=x.get(C.key===null?I:C.key)||null,w(_,x,C,j);case Kd:return x=x.get(C.key===null?I:C.key)||null,F(_,x,C,j);case Xl:var z=C._init;return D(x,_,I,z(C._payload),j)}if(cg(C)||Xp(C))return x=x.get(I)||null,R(_,x,C,j,null);Fy(_,C)}return null}function m(x,_,I,C){for(var j=null,z=null,$=_,W=_=0,ue=null;$!==null&&W<I.length;W++){$.index>W?(ue=$,$=null):ue=$.sibling;var N=v(x,$,I[W],C);if(N===null){$===null&&($=ue);break}o&&$&&N.alternate===null&&i(x,$),_=S(N,_,W),z===null?j=N:z.sibling=N,z=N,$=ue}if(W===I.length)return l(x,$),Ui&&tf(x,W),j;if($===null){for(;W<I.length;W++)$=y(x,I[W],C),$!==null&&(_=S($,_,W),z===null?j=$:z.sibling=$,z=$);return Ui&&tf(x,W),j}for($=d(x,$);W<I.length;W++)ue=D($,x,W,I[W],C),ue!==null&&(o&&ue.alternate!==null&&$.delete(ue.key===null?W:ue.key),_=S(ue,_,W),z===null?j=ue:z.sibling=ue,z=ue);return o&&$.forEach(function(X){return i(x,X)}),Ui&&tf(x,W),j}function T(x,_,I,C){var j=Xp(I);if(typeof j!="function")throw Error(jn(150));if(I=j.call(I),I==null)throw Error(jn(151));for(var z=j=null,$=_,W=_=0,ue=null,N=I.next();$!==null&&!N.done;W++,N=I.next()){$.index>W?(ue=$,$=null):ue=$.sibling;var X=v(x,$,N.value,C);if(X===null){$===null&&($=ue);break}o&&$&&X.alternate===null&&i(x,$),_=S(X,_,W),z===null?j=X:z.sibling=X,z=X,$=ue}if(N.done)return l(x,$),Ui&&tf(x,W),j;if($===null){for(;!N.done;W++,N=I.next())N=y(x,N.value,C),N!==null&&(_=S(N,_,W),z===null?j=N:z.sibling=N,z=N);return Ui&&tf(x,W),j}for($=d(x,$);!N.done;W++,N=I.next())N=D($,x,W,N.value,C),N!==null&&(o&&N.alternate!==null&&$.delete(N.key===null?W:N.key),_=S(N,_,W),z===null?j=N:z.sibling=N,z=N);return o&&$.forEach(function(ce){return i(x,ce)}),Ui&&tf(x,W),j}function U(x,_,I,C){if(typeof I=="object"&&I!==null&&I.type===Vd&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case by:e:{for(var j=I.key,z=_;z!==null;){if(z.key===j){if(j=I.type,j===Vd){if(z.tag===7){l(x,z.sibling),_=p(z,I.props.children),_.return=x,x=_;break e}}else if(z.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Xl&&l2(j)===z.type){l(x,z.sibling),_=p(z,I.props),_.ref=ng(x,z,I),_.return=x,x=_;break e}l(x,z);break}else i(x,z);z=z.sibling}I.type===Vd?(_=ff(I.props.children,x.mode,C,I.key),_.return=x,x=_):(C=o0(I.type,I.key,I.props,null,x.mode,C),C.ref=ng(x,_,I),C.return=x,x=C)}return b(x);case Kd:e:{for(z=I.key;_!==null;){if(_.key===z)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){l(x,_.sibling),_=p(_,I.children||[]),_.return=x,x=_;break e}else{l(x,_);break}else i(x,_);_=_.sibling}_=x1(I,x.mode,C),_.return=x,x=_}return b(x);case Xl:return z=I._init,U(x,_,z(I._payload),C)}if(cg(I))return m(x,_,I,C);if(Xp(I))return T(x,_,I,C);Fy(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(l(x,_.sibling),_=p(_,I),_.return=x,x=_):(l(x,_),_=N1(I,x.mode,C),_.return=x,x=_),b(x)):l(x,_)}return U}var gh=W3(!0),$3=W3(!1),S0=gc(null),w0=null,eh=null,kb=null;function Fb(){kb=eh=w0=null}function Ub(o){var i=S0.current;Mi(S0),o._currentValue=i}function LI(o,i,l){for(;o!==null;){var d=o.alternate;if((o.childLanes&i)!==i?(o.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),o===l)break;o=o.return}}function ch(o,i){w0=o,kb=eh=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&i&&(Fa=!0),o.firstContext=null)}function Rs(o){var i=o._currentValue;if(kb!==o)if(o={context:o,memoizedValue:i,next:null},eh===null){if(w0===null)throw Error(jn(308));eh=o,w0.dependencies={lanes:0,firstContext:o}}else eh=eh.next=o;return i}var sf=null;function Bb(o){sf===null?sf=[o]:sf.push(o)}function X3(o,i,l,d){var p=i.interleaved;return p===null?(l.next=l,Bb(i)):(l.next=p.next,p.next=l),i.interleaved=l,El(o,d)}function El(o,i){o.lanes|=i;var l=o.alternate;for(l!==null&&(l.lanes|=i),l=o,o=o.return;o!==null;)o.childLanes|=i,l=o.alternate,l!==null&&(l.childLanes|=i),l=o,o=o.return;return l.tag===3?l.stateNode:null}var Ql=!1;function jb(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q3(o,i){o=o.updateQueue,i.updateQueue===o&&(i.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ml(o,i){return{eventTime:o,lane:i,tag:0,payload:null,callback:null,next:null}}function sc(o,i,l){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,$r&2){var p=d.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),d.pending=i,El(o,l)}return p=d.interleaved,p===null?(i.next=i,Bb(d)):(i.next=p.next,p.next=i),d.interleaved=i,El(o,l)}function Jy(o,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var d=i.lanes;d&=o.pendingLanes,l|=d,i.lanes=l,Ib(o,l)}}function c2(o,i){var l=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var b={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};S===null?p=S=b:S=S.next=b,l=l.next}while(l!==null);S===null?p=S=i:S=S.next=i}else p=S=i;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:S,shared:d.shared,effects:d.effects},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=i:o.next=i,l.lastBaseUpdate=i}function A0(o,i,l,d){var p=o.updateQueue;Ql=!1;var S=p.firstBaseUpdate,b=p.lastBaseUpdate,g=p.shared.pending;if(g!==null){p.shared.pending=null;var w=g,F=w.next;w.next=null,b===null?S=F:b.next=F,b=w;var R=o.alternate;R!==null&&(R=R.updateQueue,g=R.lastBaseUpdate,g!==b&&(g===null?R.firstBaseUpdate=F:g.next=F,R.lastBaseUpdate=w))}if(S!==null){var y=p.baseState;b=0,R=F=w=null,g=S;do{var v=g.lane,D=g.eventTime;if((d&v)===v){R!==null&&(R=R.next={eventTime:D,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var m=o,T=g;switch(v=i,D=l,T.tag){case 1:if(m=T.payload,typeof m=="function"){y=m.call(D,y,v);break e}y=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=T.payload,v=typeof m=="function"?m.call(D,y,v):m,v==null)break e;y=Vi({},y,v);break e;case 2:Ql=!0}}g.callback!==null&&g.lane!==0&&(o.flags|=64,v=p.effects,v===null?p.effects=[g]:v.push(g))}else D={eventTime:D,lane:v,tag:g.tag,payload:g.payload,callback:g.callback,next:null},R===null?(F=R=D,w=y):R=R.next=D,b|=v;if(g=g.next,g===null){if(g=p.shared.pending,g===null)break;v=g,g=v.next,v.next=null,p.lastBaseUpdate=v,p.shared.pending=null}}while(!0);if(R===null&&(w=y),p.baseState=w,p.firstBaseUpdate=F,p.lastBaseUpdate=R,i=p.shared.interleaved,i!==null){p=i;do b|=p.lane,p=p.next;while(p!==i)}else S===null&&(p.shared.lanes=0);vf|=b,o.lanes=b,o.memoizedState=y}}function f2(o,i,l){if(o=i.effects,i.effects=null,o!==null)for(i=0;i<o.length;i++){var d=o[i],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(jn(191,p));p.call(d)}}}var $g={},xu=gc($g),kg=gc($g),Fg=gc($g);function uf(o){if(o===$g)throw Error(jn(174));return o}function Zb(o,i){switch(bi(Fg,i),bi(kg,o),bi(xu,$g),o=i.nodeType,o){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:gI(null,"");break;default:o=o===8?i.parentNode:i,i=o.namespaceURI||null,o=o.tagName,i=gI(i,o)}Mi(xu),bi(xu,i)}function mh(){Mi(xu),Mi(kg),Mi(Fg)}function J3(o){uf(Fg.current);var i=uf(xu.current),l=gI(i,o.type);i!==l&&(bi(kg,o),bi(xu,l))}function Gb(o){kg.current===o&&(Mi(xu),Mi(kg))}var qi=gc(0);function I0(o){for(var i=o;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var w1=[];function qb(){for(var o=0;o<w1.length;o++)w1[o]._workInProgressVersionPrimary=null;w1.length=0}var e0=Sl.ReactCurrentDispatcher,A1=Sl.ReactCurrentBatchConfig,mf=0,Ki=null,To=null,xo=null,b0=!1,Tg=!1,Ug=0,B9=0;function Yo(){throw Error(jn(321))}function Hb(o,i){if(i===null)return!1;for(var l=0;l<i.length&&l<o.length;l++)if(!au(o[l],i[l]))return!1;return!0}function Kb(o,i,l,d,p,S){if(mf=S,Ki=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,e0.current=o===null||o.memoizedState===null?q9:H9,o=l(d,p),Tg){S=0;do{if(Tg=!1,Ug=0,25<=S)throw Error(jn(301));S+=1,xo=To=null,i.updateQueue=null,e0.current=K9,o=l(d,p)}while(Tg)}if(e0.current=C0,i=To!==null&&To.next!==null,mf=0,xo=To=Ki=null,b0=!1,i)throw Error(jn(300));return o}function Vb(){var o=Ug!==0;return Ug=0,o}function Cu(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xo===null?Ki.memoizedState=xo=o:xo=xo.next=o,xo}function Ns(){if(To===null){var o=Ki.alternate;o=o!==null?o.memoizedState:null}else o=To.next;var i=xo===null?Ki.memoizedState:xo.next;if(i!==null)xo=i,To=o;else{if(o===null)throw Error(jn(310));To=o,o={memoizedState:To.memoizedState,baseState:To.baseState,baseQueue:To.baseQueue,queue:To.queue,next:null},xo===null?Ki.memoizedState=xo=o:xo=xo.next=o}return xo}function Bg(o,i){return typeof i=="function"?i(o):i}function I1(o){var i=Ns(),l=i.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=o;var d=To,p=d.baseQueue,S=l.pending;if(S!==null){if(p!==null){var b=p.next;p.next=S.next,S.next=b}d.baseQueue=p=S,l.pending=null}if(p!==null){S=p.next,d=d.baseState;var g=b=null,w=null,F=S;do{var R=F.lane;if((mf&R)===R)w!==null&&(w=w.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),d=F.hasEagerState?F.eagerState:o(d,F.action);else{var y={lane:R,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};w===null?(g=w=y,b=d):w=w.next=y,Ki.lanes|=R,vf|=R}F=F.next}while(F!==null&&F!==S);w===null?b=d:w.next=g,au(d,i.memoizedState)||(Fa=!0),i.memoizedState=d,i.baseState=b,i.baseQueue=w,l.lastRenderedState=d}if(o=l.interleaved,o!==null){p=o;do S=p.lane,Ki.lanes|=S,vf|=S,p=p.next;while(p!==o)}else p===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function b1(o){var i=Ns(),l=i.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=o;var d=l.dispatch,p=l.pending,S=i.memoizedState;if(p!==null){l.pending=null;var b=p=p.next;do S=o(S,b.action),b=b.next;while(b!==p);au(S,i.memoizedState)||(Fa=!0),i.memoizedState=S,i.baseQueue===null&&(i.baseState=S),l.lastRenderedState=S}return[S,d]}function eU(){}function tU(o,i){var l=Ki,d=Ns(),p=i(),S=!au(d.memoizedState,p);if(S&&(d.memoizedState=p,Fa=!0),d=d.queue,zb(iU.bind(null,l,d,o),[o]),d.getSnapshot!==i||S||xo!==null&&xo.memoizedState.tag&1){if(l.flags|=2048,jg(9,rU.bind(null,l,d,p,i),void 0,null),Mo===null)throw Error(jn(349));mf&30||nU(l,i,p)}return p}function nU(o,i,l){o.flags|=16384,o={getSnapshot:i,value:l},i=Ki.updateQueue,i===null?(i={lastEffect:null,stores:null},Ki.updateQueue=i,i.stores=[o]):(l=i.stores,l===null?i.stores=[o]:l.push(o))}function rU(o,i,l,d){i.value=l,i.getSnapshot=d,oU(i)&&aU(o)}function iU(o,i,l){return l(function(){oU(i)&&aU(o)})}function oU(o){var i=o.getSnapshot;o=o.value;try{var l=i();return!au(o,l)}catch(d){return!0}}function aU(o){var i=El(o,1);i!==null&&iu(i,o,1,-1)}function d2(o){var i=Cu();return typeof o=="function"&&(o=o()),i.memoizedState=i.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bg,lastRenderedState:o},i.queue=o,o=o.dispatch=G9.bind(null,Ki,o),[i.memoizedState,o]}function jg(o,i,l,d){return o={tag:o,create:i,destroy:l,deps:d,next:null},i=Ki.updateQueue,i===null?(i={lastEffect:null,stores:null},Ki.updateQueue=i,i.lastEffect=o.next=o):(l=i.lastEffect,l===null?i.lastEffect=o.next=o:(d=l.next,l.next=o,o.next=d,i.lastEffect=o)),o}function sU(){return Ns().memoizedState}function t0(o,i,l,d){var p=Cu();Ki.flags|=o,p.memoizedState=jg(1|i,l,void 0,d===void 0?null:d)}function Y0(o,i,l,d){var p=Ns();d=d===void 0?null:d;var S=void 0;if(To!==null){var b=To.memoizedState;if(S=b.destroy,d!==null&&Hb(d,b.deps)){p.memoizedState=jg(i,l,S,d);return}}Ki.flags|=o,p.memoizedState=jg(1|i,l,S,d)}function h2(o,i){return t0(8390656,8,o,i)}function zb(o,i){return Y0(2048,8,o,i)}function uU(o,i){return Y0(4,2,o,i)}function lU(o,i){return Y0(4,4,o,i)}function cU(o,i){if(typeof i=="function")return o=o(),i(o),function(){i(null)};if(i!=null)return o=o(),i.current=o,function(){i.current=null}}function fU(o,i,l){return l=l!=null?l.concat([o]):null,Y0(4,4,cU.bind(null,i,o),l)}function Yb(){}function dU(o,i){var l=Ns();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&Hb(i,d[1])?d[0]:(l.memoizedState=[o,i],o)}function hU(o,i){var l=Ns();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&Hb(i,d[1])?d[0]:(o=o(),l.memoizedState=[o,i],o)}function pU(o,i,l){return mf&21?(au(l,i)||(l=E3(),Ki.lanes|=l,vf|=l,o.baseState=!0),i):(o.baseState&&(o.baseState=!1,Fa=!0),o.memoizedState=l)}function j9(o,i){var l=hi;hi=l!==0&&4>l?l:4,o(!0);var d=A1.transition;A1.transition={};try{o(!1),i()}finally{hi=l,A1.transition=d}}function gU(){return Ns().memoizedState}function Z9(o,i,l){var d=lc(o);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},mU(o))vU(i,l);else if(l=X3(o,i,l,d),l!==null){var p=_a();iu(l,o,d,p),yU(l,i,d)}}function G9(o,i,l){var d=lc(o),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(mU(o))vU(i,p);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=i.lastRenderedReducer,S!==null))try{var b=i.lastRenderedState,g=S(b,l);if(p.hasEagerState=!0,p.eagerState=g,au(g,b)){var w=i.interleaved;w===null?(p.next=p,Bb(i)):(p.next=w.next,w.next=p),i.interleaved=p;return}}catch(F){}finally{}l=X3(o,i,p,d),l!==null&&(p=_a(),iu(l,o,d,p),yU(l,i,d))}}function mU(o){var i=o.alternate;return o===Ki||i!==null&&i===Ki}function vU(o,i){Tg=b0=!0;var l=o.pending;l===null?i.next=i:(i.next=l.next,l.next=i),o.pending=i}function yU(o,i,l){if(l&4194240){var d=i.lanes;d&=o.pendingLanes,l|=d,i.lanes=l,Ib(o,l)}}var C0={readContext:Rs,useCallback:Yo,useContext:Yo,useEffect:Yo,useImperativeHandle:Yo,useInsertionEffect:Yo,useLayoutEffect:Yo,useMemo:Yo,useReducer:Yo,useRef:Yo,useState:Yo,useDebugValue:Yo,useDeferredValue:Yo,useTransition:Yo,useMutableSource:Yo,useSyncExternalStore:Yo,useId:Yo,unstable_isNewReconciler:!1},q9={readContext:Rs,useCallback:function(o,i){return Cu().memoizedState=[o,i===void 0?null:i],o},useContext:Rs,useEffect:h2,useImperativeHandle:function(o,i,l){return l=l!=null?l.concat([o]):null,t0(4194308,4,cU.bind(null,i,o),l)},useLayoutEffect:function(o,i){return t0(4194308,4,o,i)},useInsertionEffect:function(o,i){return t0(4,2,o,i)},useMemo:function(o,i){var l=Cu();return i=i===void 0?null:i,o=o(),l.memoizedState=[o,i],o},useReducer:function(o,i,l){var d=Cu();return i=l!==void 0?l(i):i,d.memoizedState=d.baseState=i,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:i},d.queue=o,o=o.dispatch=Z9.bind(null,Ki,o),[d.memoizedState,o]},useRef:function(o){var i=Cu();return o={current:o},i.memoizedState=o},useState:d2,useDebugValue:Yb,useDeferredValue:function(o){return Cu().memoizedState=o},useTransition:function(){var o=d2(!1),i=o[0];return o=j9.bind(null,o[1]),Cu().memoizedState=o,[i,o]},useMutableSource:function(){},useSyncExternalStore:function(o,i,l){var d=Ki,p=Cu();if(Ui){if(l===void 0)throw Error(jn(407));l=l()}else{if(l=i(),Mo===null)throw Error(jn(349));mf&30||nU(d,i,l)}p.memoizedState=l;var S={value:l,getSnapshot:i};return p.queue=S,h2(iU.bind(null,d,S,o),[o]),d.flags|=2048,jg(9,rU.bind(null,d,S,l,i),void 0,null),l},useId:function(){var o=Cu(),i=Mo.identifierPrefix;if(Ui){var l=gl,d=pl;l=(d&~(1<<32-ru(d)-1)).toString(32)+l,i=":"+i+"R"+l,l=Ug++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=B9++,i=":"+i+"r"+l.toString(32)+":";return o.memoizedState=i},unstable_isNewReconciler:!1},H9={readContext:Rs,useCallback:dU,useContext:Rs,useEffect:zb,useImperativeHandle:fU,useInsertionEffect:uU,useLayoutEffect:lU,useMemo:hU,useReducer:I1,useRef:sU,useState:function(){return I1(Bg)},useDebugValue:Yb,useDeferredValue:function(o){var i=Ns();return pU(i,To.memoizedState,o)},useTransition:function(){var o=I1(Bg)[0],i=Ns().memoizedState;return[o,i]},useMutableSource:eU,useSyncExternalStore:tU,useId:gU,unstable_isNewReconciler:!1},K9={readContext:Rs,useCallback:dU,useContext:Rs,useEffect:zb,useImperativeHandle:fU,useInsertionEffect:uU,useLayoutEffect:lU,useMemo:hU,useReducer:b1,useRef:sU,useState:function(){return b1(Bg)},useDebugValue:Yb,useDeferredValue:function(o){var i=Ns();return To===null?i.memoizedState=o:pU(i,To.memoizedState,o)},useTransition:function(){var o=b1(Bg)[0],i=Ns().memoizedState;return[o,i]},useMutableSource:eU,useSyncExternalStore:tU,useId:gU,unstable_isNewReconciler:!1};function Xs(o,i){if(o&&o.defaultProps){i=Vi({},i),o=o.defaultProps;for(var l in o)i[l]===void 0&&(i[l]=o[l]);return i}return i}function kI(o,i,l,d){i=o.memoizedState,l=l(d,i),l=l==null?i:Vi({},i,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var W0={isMounted:function(o){return(o=o._reactInternals)?Sf(o)===o:!1},enqueueSetState:function(o,i,l){o=o._reactInternals;var d=_a(),p=lc(o),S=ml(d,p);S.payload=i,l!=null&&(S.callback=l),i=sc(o,S,p),i!==null&&(iu(i,o,p,d),Jy(i,o,p))},enqueueReplaceState:function(o,i,l){o=o._reactInternals;var d=_a(),p=lc(o),S=ml(d,p);S.tag=1,S.payload=i,l!=null&&(S.callback=l),i=sc(o,S,p),i!==null&&(iu(i,o,p,d),Jy(i,o,p))},enqueueForceUpdate:function(o,i){o=o._reactInternals;var l=_a(),d=lc(o),p=ml(l,d);p.tag=2,i!=null&&(p.callback=i),i=sc(o,p,d),i!==null&&(iu(i,o,d,l),Jy(i,o,d))}};function p2(o,i,l,d,p,S,b){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,S,b):i.prototype&&i.prototype.isPureReactComponent?!Dg(l,d)||!Dg(p,S):!0}function EU(o,i,l){var d=!1,p=hc,S=i.contextType;return typeof S=="object"&&S!==null?S=Rs(S):(p=Ba(i)?pf:Jo.current,d=i.contextTypes,S=(d=d!=null)?hh(o,p):hc),i=new i(l,S),o.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=W0,o.stateNode=i,i._reactInternals=o,d&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=p,o.__reactInternalMemoizedMaskedChildContext=S),i}function g2(o,i,l,d){o=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==o&&W0.enqueueReplaceState(i,i.state,null)}function FI(o,i,l,d){var p=o.stateNode;p.props=l,p.state=o.memoizedState,p.refs={},jb(o);var S=i.contextType;typeof S=="object"&&S!==null?p.context=Rs(S):(S=Ba(i)?pf:Jo.current,p.context=hh(o,S)),p.state=o.memoizedState,S=i.getDerivedStateFromProps,typeof S=="function"&&(kI(o,i,S,l),p.state=o.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&W0.enqueueReplaceState(p,p.state,null),A0(o,l,p,d),p.state=o.memoizedState),typeof p.componentDidMount=="function"&&(o.flags|=4194308)}function vh(o,i){try{var l="",d=i;do l+=Eq(d),d=d.return;while(d);var p=l}catch(S){p="\nError generating stack: "+S.message+"\n"+S.stack}return{value:o,source:i,stack:p,digest:null}}function C1(o,i,l){return{value:o,source:null,stack:l!=null?l:null,digest:i!=null?i:null}}function UI(o,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var V9=typeof WeakMap=="function"?WeakMap:Map;function _U(o,i,l){l=ml(-1,l),l.tag=3,l.payload={element:null};var d=i.value;return l.callback=function(){N0||(N0=!0,YI=d),UI(o,i)},l}function TU(o,i,l){l=ml(-1,l),l.tag=3;var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=i.value;l.payload=function(){return d(p)},l.callback=function(){UI(o,i)}}var S=o.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(l.callback=function(){UI(o,i),typeof d!="function"&&(uc===null?uc=new Set([this]):uc.add(this));var b=i.stack;this.componentDidCatch(i.value,{componentStack:b!==null?b:""})}),l}function m2(o,i,l){var d=o.pingCache;if(d===null){d=o.pingCache=new V9;var p=new Set;d.set(i,p)}else p=d.get(i),p===void 0&&(p=new Set,d.set(i,p));p.has(l)||(p.add(l),o=aH.bind(null,o,i,l),i.then(o,o))}function v2(o){do{var i;if((i=o.tag===13)&&(i=o.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return o;o=o.return}while(o!==null);return null}function y2(o,i,l,d,p){return o.mode&1?(o.flags|=65536,o.lanes=p,o):(o===i?o.flags|=65536:(o.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=ml(-1,1),i.tag=2,sc(l,i,1))),l.lanes|=1),o)}var z9=Sl.ReactCurrentOwner,Fa=!1;function ya(o,i,l,d){i.child=o===null?$3(i,null,l,d):gh(i,o.child,l,d)}function E2(o,i,l,d,p){l=l.render;var S=i.ref;return ch(i,p),d=Kb(o,i,l,d,S,p),l=Vb(),o!==null&&!Fa?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~p,_l(o,i,p)):(Ui&&l&&Pb(i),i.flags|=1,ya(o,i,d,p),i.child)}function _2(o,i,l,d,p){if(o===null){var S=l.type;return typeof S=="function"&&!nC(S)&&S.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=S,SU(o,i,S,d,p)):(o=o0(l.type,null,d,i,i.mode,p),o.ref=i.ref,o.return=i,i.child=o)}if(S=o.child,!(o.lanes&p)){var b=S.memoizedProps;if(l=l.compare,l=l!==null?l:Dg,l(b,d)&&o.ref===i.ref)return _l(o,i,p)}return i.flags|=1,o=cc(S,d),o.ref=i.ref,o.return=i,i.child=o}function SU(o,i,l,d,p){if(o!==null){var S=o.memoizedProps;if(Dg(S,d)&&o.ref===i.ref)if(Fa=!1,i.pendingProps=d=S,(o.lanes&p)!==0)o.flags&131072&&(Fa=!0);else return i.lanes=o.lanes,_l(o,i,p)}return BI(o,i,l,d,p)}function wU(o,i,l){var d=i.pendingProps,p=d.children,S=o!==null?o.memoizedState:null;if(d.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},bi(nh,ss),ss|=l;else{if(!(l&1073741824))return o=S!==null?S.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:o,cachePool:null,transitions:null},i.updateQueue=null,bi(nh,ss),ss|=o,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=S!==null?S.baseLanes:l,bi(nh,ss),ss|=d}else S!==null?(d=S.baseLanes|l,i.memoizedState=null):d=l,bi(nh,ss),ss|=d;return ya(o,i,p,l),i.child}function AU(o,i){var l=i.ref;(o===null&&l!==null||o!==null&&o.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function BI(o,i,l,d,p){var S=Ba(l)?pf:Jo.current;return S=hh(i,S),ch(i,p),l=Kb(o,i,l,d,S,p),d=Vb(),o!==null&&!Fa?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~p,_l(o,i,p)):(Ui&&d&&Pb(i),i.flags|=1,ya(o,i,l,p),i.child)}function T2(o,i,l,d,p){if(Ba(l)){var S=!0;E0(i)}else S=!1;if(ch(i,p),i.stateNode===null)n0(o,i),EU(i,l,d),FI(i,l,d,p),d=!0;else if(o===null){var b=i.stateNode,g=i.memoizedProps;b.props=g;var w=b.context,F=l.contextType;typeof F=="object"&&F!==null?F=Rs(F):(F=Ba(l)?pf:Jo.current,F=hh(i,F));var R=l.getDerivedStateFromProps,y=typeof R=="function"||typeof b.getSnapshotBeforeUpdate=="function";y||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(g!==d||w!==F)&&g2(i,b,d,F),Ql=!1;var v=i.memoizedState;b.state=v,A0(i,d,b,p),w=i.memoizedState,g!==d||v!==w||Ua.current||Ql?(typeof R=="function"&&(kI(i,l,R,d),w=i.memoizedState),(g=Ql||p2(i,l,g,d,v,w,F))?(y||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(i.flags|=4194308)):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=w),b.props=d,b.state=w,b.context=F,d=g):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{b=i.stateNode,Q3(o,i),g=i.memoizedProps,F=i.type===i.elementType?g:Xs(i.type,g),b.props=F,y=i.pendingProps,v=b.context,w=l.contextType,typeof w=="object"&&w!==null?w=Rs(w):(w=Ba(l)?pf:Jo.current,w=hh(i,w));var D=l.getDerivedStateFromProps;(R=typeof D=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(g!==y||v!==w)&&g2(i,b,d,w),Ql=!1,v=i.memoizedState,b.state=v,A0(i,d,b,p);var m=i.memoizedState;g!==y||v!==m||Ua.current||Ql?(typeof D=="function"&&(kI(i,l,D,d),m=i.memoizedState),(F=Ql||p2(i,l,F,d,v,m,w)||!1)?(R||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,m,w),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,m,w)),typeof b.componentDidUpdate=="function"&&(i.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof b.componentDidUpdate!="function"||g===o.memoizedProps&&v===o.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||g===o.memoizedProps&&v===o.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=m),b.props=d,b.state=m,b.context=w,d=F):(typeof b.componentDidUpdate!="function"||g===o.memoizedProps&&v===o.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||g===o.memoizedProps&&v===o.memoizedState||(i.flags|=1024),d=!1)}return jI(o,i,l,d,S,p)}function jI(o,i,l,d,p,S){AU(o,i);var b=(i.flags&128)!==0;if(!d&&!b)return p&&a2(i,l,!1),_l(o,i,S);d=i.stateNode,z9.current=i;var g=b&&typeof l.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,o!==null&&b?(i.child=gh(i,o.child,null,S),i.child=gh(i,null,g,S)):ya(o,i,g,S),i.memoizedState=d.state,p&&a2(i,l,!0),i.child}function IU(o){var i=o.stateNode;i.pendingContext?o2(o,i.pendingContext,i.pendingContext!==i.context):i.context&&o2(o,i.context,!1),Zb(o,i.containerInfo)}function S2(o,i,l,d,p){return ph(),Lb(p),i.flags|=256,ya(o,i,l,d),i.child}var ZI={dehydrated:null,treeContext:null,retryLane:0};function GI(o){return{baseLanes:o,cachePool:null,transitions:null}}function bU(o,i,l){var d=i.pendingProps,p=qi.current,S=!1,b=(i.flags&128)!==0,g;if((g=b)||(g=o!==null&&o.memoizedState===null?!1:(p&2)!==0),g?(S=!0,i.flags&=-129):(o===null||o.memoizedState!==null)&&(p|=1),bi(qi,p&1),o===null)return OI(i),o=i.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(i.mode&1?o.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(b=d.children,o=d.fallback,S?(d=i.mode,S=i.child,b={mode:"hidden",children:b},!(d&1)&&S!==null?(S.childLanes=0,S.pendingProps=b):S=Q0(b,d,0,null),o=ff(o,d,l,null),S.return=i,o.return=i,S.sibling=o,i.child=S,i.child.memoizedState=GI(l),i.memoizedState=ZI,o):Wb(i,b));if(p=o.memoizedState,p!==null&&(g=p.dehydrated,g!==null))return Y9(o,i,b,d,g,p,l);if(S){S=d.fallback,b=i.mode,p=o.child,g=p.sibling;var w={mode:"hidden",children:d.children};return!(b&1)&&i.child!==p?(d=i.child,d.childLanes=0,d.pendingProps=w,i.deletions=null):(d=cc(p,w),d.subtreeFlags=p.subtreeFlags&14680064),g!==null?S=cc(g,S):(S=ff(S,b,l,null),S.flags|=2),S.return=i,d.return=i,d.sibling=S,i.child=d,d=S,S=i.child,b=o.child.memoizedState,b=b===null?GI(l):{baseLanes:b.baseLanes|l,cachePool:null,transitions:b.transitions},S.memoizedState=b,S.childLanes=o.childLanes&~l,i.memoizedState=ZI,d}return S=o.child,o=S.sibling,d=cc(S,{mode:"visible",children:d.children}),!(i.mode&1)&&(d.lanes=l),d.return=i,d.sibling=null,o!==null&&(l=i.deletions,l===null?(i.deletions=[o],i.flags|=16):l.push(o)),i.child=d,i.memoizedState=null,d}function Wb(o,i){return i=Q0({mode:"visible",children:i},o.mode,0,null),i.return=o,o.child=i}function Uy(o,i,l,d){return d!==null&&Lb(d),gh(i,o.child,null,l),o=Wb(i,i.pendingProps.children),o.flags|=2,i.memoizedState=null,o}function Y9(o,i,l,d,p,S,b){if(l)return i.flags&256?(i.flags&=-257,d=C1(Error(jn(422))),Uy(o,i,b,d)):i.memoizedState!==null?(i.child=o.child,i.flags|=128,null):(S=d.fallback,p=i.mode,d=Q0({mode:"visible",children:d.children},p,0,null),S=ff(S,p,b,null),S.flags|=2,d.return=i,S.return=i,d.sibling=S,i.child=d,i.mode&1&&gh(i,o.child,null,b),i.child.memoizedState=GI(b),i.memoizedState=ZI,S);if(!(i.mode&1))return Uy(o,i,b,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var g=d.dgst;return d=g,S=Error(jn(419)),d=C1(S,d,void 0),Uy(o,i,b,d)}if(g=(b&o.childLanes)!==0,Fa||g){if(d=Mo,d!==null){switch(b&-b){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(d.suspendedLanes|b)?0:p,p!==0&&p!==S.retryLane&&(S.retryLane=p,El(o,p),iu(d,o,p,-1))}return tC(),d=C1(Error(jn(421))),Uy(o,i,b,d)}return p.data==="$?"?(i.flags|=128,i.child=o.child,i=sH.bind(null,o),p._reactRetry=i,null):(o=S.treeContext,us=ac(p.nextSibling),cs=i,Ui=!0,Js=null,o!==null&&(ws[As++]=pl,ws[As++]=gl,ws[As++]=gf,pl=o.id,gl=o.overflow,gf=i),i=Wb(i,d.children),i.flags|=4096,i)}function w2(o,i,l){o.lanes|=i;var d=o.alternate;d!==null&&(d.lanes|=i),LI(o.return,i,l)}function R1(o,i,l,d,p){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=l,S.tailMode=p)}function CU(o,i,l){var d=i.pendingProps,p=d.revealOrder,S=d.tail;if(ya(o,i,d.children,l),d=qi.current,d&2)d=d&1|2,i.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=i.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&w2(o,l,i);else if(o.tag===19)w2(o,l,i);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}if(bi(qi,d),!(i.mode&1))i.memoizedState=null;else switch(p){case"forwards":for(l=i.child,p=null;l!==null;)o=l.alternate,o!==null&&I0(o)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),R1(i,!1,p,l,S);break;case"backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(o=p.alternate,o!==null&&I0(o)===null){i.child=p;break}o=p.sibling,p.sibling=l,l=p,p=o}R1(i,!0,l,null,S);break;case"together":R1(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function n0(o,i){!(i.mode&1)&&o!==null&&(o.alternate=null,i.alternate=null,i.flags|=2)}function _l(o,i,l){if(o!==null&&(i.dependencies=o.dependencies),vf|=i.lanes,!(l&i.childLanes))return null;if(o!==null&&i.child!==o.child)throw Error(jn(153));if(i.child!==null){for(o=i.child,l=cc(o,o.pendingProps),i.child=l,l.return=i;o.sibling!==null;)o=o.sibling,l=l.sibling=cc(o,o.pendingProps),l.return=i;l.sibling=null}return i.child}function W9(o,i,l){switch(i.tag){case 3:IU(i),ph();break;case 5:J3(i);break;case 1:Ba(i.type)&&E0(i);break;case 4:Zb(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,p=i.memoizedProps.value;bi(S0,d._currentValue),d._currentValue=p;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(bi(qi,qi.current&1),i.flags|=128,null):l&i.child.childLanes?bU(o,i,l):(bi(qi,qi.current&1),o=_l(o,i,l),o!==null?o.sibling:null);bi(qi,qi.current&1);break;case 19:if(d=(l&i.childLanes)!==0,o.flags&128){if(d)return CU(o,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),bi(qi,qi.current),d)break;return null;case 22:case 23:return i.lanes=0,wU(o,i,l)}return _l(o,i,l)}var RU,qI,NU,xU;RU=function(o,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)o.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};qI=function(){};NU=function(o,i,l,d){var p=o.memoizedProps;if(p!==d){o=i.stateNode,uf(xu.current);var S=null;switch(l){case"input":p=fI(o,p),d=fI(o,d),S=[];break;case"select":p=Vi({},p,{value:void 0}),d=Vi({},d,{value:void 0}),S=[];break;case"textarea":p=pI(o,p),d=pI(o,d),S=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(o.onclick=v0)}mI(l,d);var b;l=null;for(F in p)if(!d.hasOwnProperty(F)&&p.hasOwnProperty(F)&&p[F]!=null)if(F==="style"){var g=p[F];for(b in g)g.hasOwnProperty(b)&&(l||(l={}),l[b]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(Ig.hasOwnProperty(F)?S||(S=[]):(S=S||[]).push(F,null));for(F in d){var w=d[F];if(g=p!=null?p[F]:void 0,d.hasOwnProperty(F)&&w!==g&&(w!=null||g!=null))if(F==="style")if(g){for(b in g)!g.hasOwnProperty(b)||w&&w.hasOwnProperty(b)||(l||(l={}),l[b]="");for(b in w)w.hasOwnProperty(b)&&g[b]!==w[b]&&(l||(l={}),l[b]=w[b])}else l||(S||(S=[]),S.push(F,l)),l=w;else F==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,g=g?g.__html:void 0,w!=null&&g!==w&&(S=S||[]).push(F,w)):F==="children"?typeof w!="string"&&typeof w!="number"||(S=S||[]).push(F,""+w):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(Ig.hasOwnProperty(F)?(w!=null&&F==="onScroll"&&xi("scroll",o),S||g===w||(S=[])):(S=S||[]).push(F,w))}l&&(S=S||[]).push("style",l);var F=S;(i.updateQueue=F)&&(i.flags|=4)}};xU=function(o,i,l,d){l!==d&&(i.flags|=4)};function rg(o,i){if(!Ui)switch(o.tailMode){case"hidden":i=o.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function Wo(o){var i=o.alternate!==null&&o.alternate.child===o.child,l=0,d=0;if(i)for(var p=o.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=o,p=p.sibling;else for(p=o.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=o,p=p.sibling;return o.subtreeFlags|=d,o.childLanes=l,i}function $9(o,i,l){var d=i.pendingProps;switch(Ob(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(i),null;case 1:return Ba(i.type)&&y0(),Wo(i),null;case 3:return d=i.stateNode,mh(),Mi(Ua),Mi(Jo),qb(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(ky(i)?i.flags|=4:o===null||o.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Js!==null&&(XI(Js),Js=null))),qI(o,i),Wo(i),null;case 5:Gb(i);var p=uf(Fg.current);if(l=i.type,o!==null&&i.stateNode!=null)NU(o,i,l,d,p),o.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(jn(166));return Wo(i),null}if(o=uf(xu.current),ky(i)){d=i.stateNode,l=i.type;var S=i.memoizedProps;switch(d[Ru]=i,d[Lg]=S,o=(i.mode&1)!==0,l){case"dialog":xi("cancel",d),xi("close",d);break;case"iframe":case"object":case"embed":xi("load",d);break;case"video":case"audio":for(p=0;p<dg.length;p++)xi(dg[p],d);break;case"source":xi("error",d);break;case"img":case"image":case"link":xi("error",d),xi("load",d);break;case"details":xi("toggle",d);break;case"input":DP(d,S),xi("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!S.multiple},xi("invalid",d);break;case"textarea":OP(d,S),xi("invalid",d)}mI(l,S),p=null;for(var b in S)if(S.hasOwnProperty(b)){var g=S[b];b==="children"?typeof g=="string"?d.textContent!==g&&(S.suppressHydrationWarning!==!0&&Ly(d.textContent,g,o),p=["children",g]):typeof g=="number"&&d.textContent!==""+g&&(S.suppressHydrationWarning!==!0&&Ly(d.textContent,g,o),p=["children",""+g]):Ig.hasOwnProperty(b)&&g!=null&&b==="onScroll"&&xi("scroll",d)}switch(l){case"input":Cy(d),PP(d,S,!0);break;case"textarea":Cy(d),LP(d);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(d.onclick=v0)}d=p,i.updateQueue=d,d!==null&&(i.flags|=4)}else{b=p.nodeType===9?p:p.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=i3(l)),o==="http://www.w3.org/1999/xhtml"?l==="script"?(o=b.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof d.is=="string"?o=b.createElement(l,{is:d.is}):(o=b.createElement(l),l==="select"&&(b=o,d.multiple?b.multiple=!0:d.size&&(b.size=d.size))):o=b.createElementNS(o,l),o[Ru]=i,o[Lg]=d,RU(o,i,!1,!1),i.stateNode=o;e:{switch(b=vI(l,d),l){case"dialog":xi("cancel",o),xi("close",o),p=d;break;case"iframe":case"object":case"embed":xi("load",o),p=d;break;case"video":case"audio":for(p=0;p<dg.length;p++)xi(dg[p],o);p=d;break;case"source":xi("error",o),p=d;break;case"img":case"image":case"link":xi("error",o),xi("load",o),p=d;break;case"details":xi("toggle",o),p=d;break;case"input":DP(o,d),p=fI(o,d),xi("invalid",o);break;case"option":p=d;break;case"select":o._wrapperState={wasMultiple:!!d.multiple},p=Vi({},d,{value:void 0}),xi("invalid",o);break;case"textarea":OP(o,d),p=pI(o,d),xi("invalid",o);break;default:p=d}mI(l,p),g=p;for(S in g)if(g.hasOwnProperty(S)){var w=g[S];S==="style"?s3(o,w):S==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&o3(o,w)):S==="children"?typeof w=="string"?(l!=="textarea"||w!=="")&&bg(o,w):typeof w=="number"&&bg(o,""+w):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(Ig.hasOwnProperty(S)?w!=null&&S==="onScroll"&&xi("scroll",o):w!=null&&Eb(o,S,w,b))}switch(l){case"input":Cy(o),PP(o,d,!1);break;case"textarea":Cy(o),LP(o);break;case"option":d.value!=null&&o.setAttribute("value",""+dc(d.value));break;case"select":o.multiple=!!d.multiple,S=d.value,S!=null?ah(o,!!d.multiple,S,!1):d.defaultValue!=null&&ah(o,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(o.onclick=v0)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Wo(i),null;case 6:if(o&&i.stateNode!=null)xU(o,i,o.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(jn(166));if(l=uf(Fg.current),uf(xu.current),ky(i)){if(d=i.stateNode,l=i.memoizedProps,d[Ru]=i,(S=d.nodeValue!==l)&&(o=cs,o!==null))switch(o.tag){case 3:Ly(d.nodeValue,l,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Ly(d.nodeValue,l,(o.mode&1)!==0)}S&&(i.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[Ru]=i,i.stateNode=d}return Wo(i),null;case 13:if(Mi(qi),d=i.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ui&&us!==null&&i.mode&1&&!(i.flags&128))Y3(),ph(),i.flags|=98560,S=!1;else if(S=ky(i),d!==null&&d.dehydrated!==null){if(o===null){if(!S)throw Error(jn(318));if(S=i.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(jn(317));S[Ru]=i}else ph(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;Wo(i),S=!1}else Js!==null&&(XI(Js),Js=null),S=!0;if(!S)return i.flags&65536?i:null}return i.flags&128?(i.lanes=l,i):(d=d!==null,d!==(o!==null&&o.memoizedState!==null)&&d&&(i.child.flags|=8192,i.mode&1&&(o===null||qi.current&1?So===0&&(So=3):tC())),i.updateQueue!==null&&(i.flags|=4),Wo(i),null);case 4:return mh(),qI(o,i),o===null&&Pg(i.stateNode.containerInfo),Wo(i),null;case 10:return Ub(i.type._context),Wo(i),null;case 17:return Ba(i.type)&&y0(),Wo(i),null;case 19:if(Mi(qi),S=i.memoizedState,S===null)return Wo(i),null;if(d=(i.flags&128)!==0,b=S.rendering,b===null)if(d)rg(S,!1);else{if(So!==0||o!==null&&o.flags&128)for(o=i.child;o!==null;){if(b=I0(o),b!==null){for(i.flags|=128,rg(S,!1),d=b.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=l,l=i.child;l!==null;)S=l,o=d,S.flags&=14680066,b=S.alternate,b===null?(S.childLanes=0,S.lanes=o,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=b.childLanes,S.lanes=b.lanes,S.child=b.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=b.memoizedProps,S.memoizedState=b.memoizedState,S.updateQueue=b.updateQueue,S.type=b.type,o=b.dependencies,S.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),l=l.sibling;return bi(qi,qi.current&1|2),i.child}o=o.sibling}S.tail!==null&&co()>yh&&(i.flags|=128,d=!0,rg(S,!1),i.lanes=4194304)}else{if(!d)if(o=I0(b),o!==null){if(i.flags|=128,d=!0,l=o.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),rg(S,!0),S.tail===null&&S.tailMode==="hidden"&&!b.alternate&&!Ui)return Wo(i),null}else 2*co()-S.renderingStartTime>yh&&l!==1073741824&&(i.flags|=128,d=!0,rg(S,!1),i.lanes=4194304);S.isBackwards?(b.sibling=i.child,i.child=b):(l=S.last,l!==null?l.sibling=b:i.child=b,S.last=b)}return S.tail!==null?(i=S.tail,S.rendering=i,S.tail=i.sibling,S.renderingStartTime=co(),i.sibling=null,l=qi.current,bi(qi,d?l&1|2:l&1),i):(Wo(i),null);case 22:case 23:return eC(),d=i.memoizedState!==null,o!==null&&o.memoizedState!==null!==d&&(i.flags|=8192),d&&i.mode&1?ss&1073741824&&(Wo(i),i.subtreeFlags&6&&(i.flags|=8192)):Wo(i),null;case 24:return null;case 25:return null}throw Error(jn(156,i.tag))}function X9(o,i){switch(Ob(i),i.tag){case 1:return Ba(i.type)&&y0(),o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 3:return mh(),Mi(Ua),Mi(Jo),qb(),o=i.flags,o&65536&&!(o&128)?(i.flags=o&-65537|128,i):null;case 5:return Gb(i),null;case 13:if(Mi(qi),o=i.memoizedState,o!==null&&o.dehydrated!==null){if(i.alternate===null)throw Error(jn(340));ph()}return o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 19:return Mi(qi),null;case 4:return mh(),null;case 10:return Ub(i.type._context),null;case 22:case 23:return eC(),null;case 24:return null;default:return null}}var By=!1,Xo=!1,Q9=typeof WeakSet=="function"?WeakSet:Set,nr=null;function th(o,i){var l=o.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){Qi(o,i,d)}else l.current=null}function HI(o,i,l){try{l()}catch(d){Qi(o,i,d)}}var A2=!1;function J9(o,i){if(CI=p0,o=L3(),Db(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,S=d.focusNode;d=d.focusOffset;try{l.nodeType,S.nodeType}catch(C){l=null;break e}var b=0,g=-1,w=-1,F=0,R=0,y=o,v=null;t:for(;;){for(var D;y!==l||p!==0&&y.nodeType!==3||(g=b+p),y!==S||d!==0&&y.nodeType!==3||(w=b+d),y.nodeType===3&&(b+=y.nodeValue.length),(D=y.firstChild)!==null;)v=y,y=D;for(;;){if(y===o)break t;if(v===l&&++F===p&&(g=b),v===S&&++R===d&&(w=b),(D=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=D}l=g===-1||w===-1?null:{start:g,end:w}}else l=null}l=l||{start:0,end:0}}else l=null;for(RI={focusedElem:o,selectionRange:l},p0=!1,nr=i;nr!==null;)if(i=nr,o=i.child,(i.subtreeFlags&1028)!==0&&o!==null)o.return=i,nr=o;else for(;nr!==null;){i=nr;try{var m=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var T=m.memoizedProps,U=m.memoizedState,x=i.stateNode,_=x.getSnapshotBeforeUpdate(i.elementType===i.type?T:Xs(i.type,T),U);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=i.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jn(163))}}catch(C){Qi(i,i.return,C)}if(o=i.sibling,o!==null){o.return=i.return,nr=o;break}nr=i.return}return m=A2,A2=!1,m}function Sg(o,i,l){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&o)===o){var S=p.destroy;p.destroy=void 0,S!==void 0&&HI(i,l,S)}p=p.next}while(p!==d)}}function $0(o,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&o)===o){var d=l.create;l.destroy=d()}l=l.next}while(l!==i)}}function KI(o){var i=o.ref;if(i!==null){var l=o.stateNode;switch(o.tag){case 5:o=l;break;default:o=l}typeof i=="function"?i(o):i.current=o}}function MU(o){var i=o.alternate;i!==null&&(o.alternate=null,MU(i)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(i=o.stateNode,i!==null&&(delete i[Ru],delete i[Lg],delete i[MI],delete i[L9],delete i[k9])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function DU(o){return o.tag===5||o.tag===3||o.tag===4}function I2(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||DU(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function VI(o,i,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(o,i):l.insertBefore(o,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(o,l)):(i=l,i.appendChild(o)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=v0));else if(d!==4&&(o=o.child,o!==null))for(VI(o,i,l),o=o.sibling;o!==null;)VI(o,i,l),o=o.sibling}function zI(o,i,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,i?l.insertBefore(o,i):l.appendChild(o);else if(d!==4&&(o=o.child,o!==null))for(zI(o,i,l),o=o.sibling;o!==null;)zI(o,i,l),o=o.sibling}var Bo=null,Qs=!1;function Wl(o,i,l){for(l=l.child;l!==null;)PU(o,i,l),l=l.sibling}function PU(o,i,l){if(Nu&&typeof Nu.onCommitFiberUnmount=="function")try{Nu.onCommitFiberUnmount(G0,l)}catch(g){}switch(l.tag){case 5:Xo||th(l,i);case 6:var d=Bo,p=Qs;Bo=null,Wl(o,i,l),Bo=d,Qs=p,Bo!==null&&(Qs?(o=Bo,l=l.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):Bo.removeChild(l.stateNode));break;case 18:Bo!==null&&(Qs?(o=Bo,l=l.stateNode,o.nodeType===8?T1(o.parentNode,l):o.nodeType===1&&T1(o,l),xg(o)):T1(Bo,l.stateNode));break;case 4:d=Bo,p=Qs,Bo=l.stateNode.containerInfo,Qs=!0,Wl(o,i,l),Bo=d,Qs=p;break;case 0:case 11:case 14:case 15:if(!Xo&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var S=p,b=S.destroy;S=S.tag,b!==void 0&&(S&2||S&4)&&HI(l,i,b),p=p.next}while(p!==d)}Wl(o,i,l);break;case 1:if(!Xo&&(th(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(g){Qi(l,i,g)}Wl(o,i,l);break;case 21:Wl(o,i,l);break;case 22:l.mode&1?(Xo=(d=Xo)||l.memoizedState!==null,Wl(o,i,l),Xo=d):Wl(o,i,l);break;default:Wl(o,i,l)}}function b2(o){var i=o.updateQueue;if(i!==null){o.updateQueue=null;var l=o.stateNode;l===null&&(l=o.stateNode=new Q9),i.forEach(function(d){var p=uH.bind(null,o,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Ws(o,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var S=o,b=i,g=b;e:for(;g!==null;){switch(g.tag){case 5:Bo=g.stateNode,Qs=!1;break e;case 3:Bo=g.stateNode.containerInfo,Qs=!0;break e;case 4:Bo=g.stateNode.containerInfo,Qs=!0;break e}g=g.return}if(Bo===null)throw Error(jn(160));PU(S,b,p),Bo=null,Qs=!1;var w=p.alternate;w!==null&&(w.return=null),p.return=null}catch(F){Qi(p,i,F)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)OU(i,o),i=i.sibling}function OU(o,i){var l=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ws(i,o),wu(o),d&4){try{Sg(3,o,o.return),$0(3,o)}catch(T){Qi(o,o.return,T)}try{Sg(5,o,o.return)}catch(T){Qi(o,o.return,T)}}break;case 1:Ws(i,o),wu(o),d&512&&l!==null&&th(l,l.return);break;case 5:if(Ws(i,o),wu(o),d&512&&l!==null&&th(l,l.return),o.flags&32){var p=o.stateNode;try{bg(p,"")}catch(T){Qi(o,o.return,T)}}if(d&4&&(p=o.stateNode,p!=null)){var S=o.memoizedProps,b=l!==null?l.memoizedProps:S,g=o.type,w=o.updateQueue;if(o.updateQueue=null,w!==null)try{g==="input"&&S.type==="radio"&&S.name!=null&&n3(p,S),vI(g,b);var F=vI(g,S);for(b=0;b<w.length;b+=2){var R=w[b],y=w[b+1];R==="style"?s3(p,y):R==="dangerouslySetInnerHTML"?o3(p,y):R==="children"?bg(p,y):Eb(p,R,y,F)}switch(g){case"input":dI(p,S);break;case"textarea":r3(p,S);break;case"select":var v=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!S.multiple;var D=S.value;D!=null?ah(p,!!S.multiple,D,!1):v!==!!S.multiple&&(S.defaultValue!=null?ah(p,!!S.multiple,S.defaultValue,!0):ah(p,!!S.multiple,S.multiple?[]:"",!1))}p[Lg]=S}catch(T){Qi(o,o.return,T)}}break;case 6:if(Ws(i,o),wu(o),d&4){if(o.stateNode===null)throw Error(jn(162));p=o.stateNode,S=o.memoizedProps;try{p.nodeValue=S}catch(T){Qi(o,o.return,T)}}break;case 3:if(Ws(i,o),wu(o),d&4&&l!==null&&l.memoizedState.isDehydrated)try{xg(i.containerInfo)}catch(T){Qi(o,o.return,T)}break;case 4:Ws(i,o),wu(o);break;case 13:Ws(i,o),wu(o),p=o.child,p.flags&8192&&(S=p.memoizedState!==null,p.stateNode.isHidden=S,!S||p.alternate!==null&&p.alternate.memoizedState!==null||(Qb=co())),d&4&&b2(o);break;case 22:if(R=l!==null&&l.memoizedState!==null,o.mode&1?(Xo=(F=Xo)||R,Ws(i,o),Xo=F):Ws(i,o),wu(o),d&8192){if(F=o.memoizedState!==null,(o.stateNode.isHidden=F)&&!R&&o.mode&1)for(nr=o,R=o.child;R!==null;){for(y=nr=R;nr!==null;){switch(v=nr,D=v.child,v.tag){case 0:case 11:case 14:case 15:Sg(4,v,v.return);break;case 1:th(v,v.return);var m=v.stateNode;if(typeof m.componentWillUnmount=="function"){d=v,l=v.return;try{i=d,m.props=i.memoizedProps,m.state=i.memoizedState,m.componentWillUnmount()}catch(T){Qi(d,l,T)}}break;case 5:th(v,v.return);break;case 22:if(v.memoizedState!==null){R2(y);continue}}D!==null?(D.return=v,nr=D):R2(y)}R=R.sibling}e:for(R=null,y=o;;){if(y.tag===5){if(R===null){R=y;try{p=y.stateNode,F?(S=p.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(g=y.stateNode,w=y.memoizedProps.style,b=w!=null&&w.hasOwnProperty("display")?w.display:null,g.style.display=a3("display",b))}catch(T){Qi(o,o.return,T)}}}else if(y.tag===6){if(R===null)try{y.stateNode.nodeValue=F?"":y.memoizedProps}catch(T){Qi(o,o.return,T)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===o)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===o)break e;for(;y.sibling===null;){if(y.return===null||y.return===o)break e;R===y&&(R=null),y=y.return}R===y&&(R=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Ws(i,o),wu(o),d&4&&b2(o);break;case 21:break;default:Ws(i,o),wu(o)}}function wu(o){var i=o.flags;if(i&2){try{e:{for(var l=o.return;l!==null;){if(DU(l)){var d=l;break e}l=l.return}throw Error(jn(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(bg(p,""),d.flags&=-33);var S=I2(o);zI(o,S,p);break;case 3:case 4:var b=d.stateNode.containerInfo,g=I2(o);VI(o,g,b);break;default:throw Error(jn(161))}}catch(w){Qi(o,o.return,w)}o.flags&=-3}i&4096&&(o.flags&=-4097)}function eH(o,i,l){nr=o,LU(o)}function LU(o,i,l){for(var d=(o.mode&1)!==0;nr!==null;){var p=nr,S=p.child;if(p.tag===22&&d){var b=p.memoizedState!==null||By;if(!b){var g=p.alternate,w=g!==null&&g.memoizedState!==null||Xo;g=By;var F=Xo;if(By=b,(Xo=w)&&!F)for(nr=p;nr!==null;)b=nr,w=b.child,b.tag===22&&b.memoizedState!==null?N2(p):w!==null?(w.return=b,nr=w):N2(p);for(;S!==null;)nr=S,LU(S),S=S.sibling;nr=p,By=g,Xo=F}C2(o)}else p.subtreeFlags&8772&&S!==null?(S.return=p,nr=S):C2(o)}}function C2(o){for(;nr!==null;){var i=nr;if(i.flags&8772){var l=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Xo||$0(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Xo)if(l===null)d.componentDidMount();else{var p=i.elementType===i.type?l.memoizedProps:Xs(i.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var S=i.updateQueue;S!==null&&f2(i,S,d);break;case 3:var b=i.updateQueue;if(b!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}f2(i,b,l)}break;case 5:var g=i.stateNode;if(l===null&&i.flags&4){l=g;var w=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&l.focus();break;case"img":w.src&&(l.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var F=i.alternate;if(F!==null){var R=F.memoizedState;if(R!==null){var y=R.dehydrated;y!==null&&xg(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jn(163))}Xo||i.flags&512&&KI(i)}catch(v){Qi(i,i.return,v)}}if(i===o){nr=null;break}if(l=i.sibling,l!==null){l.return=i.return,nr=l;break}nr=i.return}}function R2(o){for(;nr!==null;){var i=nr;if(i===o){nr=null;break}var l=i.sibling;if(l!==null){l.return=i.return,nr=l;break}nr=i.return}}function N2(o){for(;nr!==null;){var i=nr;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{$0(4,i)}catch(w){Qi(i,l,w)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var p=i.return;try{d.componentDidMount()}catch(w){Qi(i,p,w)}}var S=i.return;try{KI(i)}catch(w){Qi(i,S,w)}break;case 5:var b=i.return;try{KI(i)}catch(w){Qi(i,b,w)}}}catch(w){Qi(i,i.return,w)}if(i===o){nr=null;break}var g=i.sibling;if(g!==null){g.return=i.return,nr=g;break}nr=i.return}}var tH=Math.ceil,R0=Sl.ReactCurrentDispatcher,$b=Sl.ReactCurrentOwner,Cs=Sl.ReactCurrentBatchConfig,$r=0,Mo=null,go=null,jo=0,ss=0,nh=gc(0),So=0,Zg=null,vf=0,X0=0,Xb=0,wg=null,ka=null,Qb=0,yh=1/0,dl=null,N0=!1,YI=null,uc=null,jy=!1,nc=null,x0=0,Ag=0,WI=null,r0=-1,i0=0;function _a(){return $r&6?co():r0!==-1?r0:r0=co()}function lc(o){return o.mode&1?$r&2&&jo!==0?jo&-jo:U9.transition!==null?(i0===0&&(i0=E3()),i0):(o=hi,o!==0||(o=window.event,o=o===void 0?16:b3(o.type)),o):1}function iu(o,i,l,d){if(50<Ag)throw Ag=0,WI=null,Error(jn(185));zg(o,l,d),(!($r&2)||o!==Mo)&&(o===Mo&&(!($r&2)&&(X0|=l),So===4&&ec(o,jo)),ja(o,d),l===1&&$r===0&&!(i.mode&1)&&(yh=co()+500,z0&&mc()))}function ja(o,i){var l=o.callbackNode;Uq(o,i);var d=h0(o,o===Mo?jo:0);if(d===0)l!==null&&UP(l),o.callbackNode=null,o.callbackPriority=0;else if(i=d&-d,o.callbackPriority!==i){if(l!=null&&UP(l),i===1)o.tag===0?F9(x2.bind(null,o)):K3(x2.bind(null,o)),P9(function(){!($r&6)&&mc()}),l=null;else{switch(_3(d)){case 1:l=Ab;break;case 4:l=v3;break;case 16:l=d0;break;case 536870912:l=y3;break;default:l=d0}l=qU(l,kU.bind(null,o))}o.callbackPriority=i,o.callbackNode=l}}function kU(o,i){if(r0=-1,i0=0,$r&6)throw Error(jn(327));var l=o.callbackNode;if(fh()&&o.callbackNode!==l)return null;var d=h0(o,o===Mo?jo:0);if(d===0)return null;if(d&30||d&o.expiredLanes||i)i=M0(o,d);else{i=d;var p=$r;$r|=2;var S=UU();(Mo!==o||jo!==i)&&(dl=null,yh=co()+500,cf(o,i));do try{iH();break}catch(g){FU(o,g)}while(!0);Fb(),R0.current=S,$r=p,go!==null?i=0:(Mo=null,jo=0,i=So)}if(i!==0){if(i===2&&(p=SI(o),p!==0&&(d=p,i=$I(o,p))),i===1)throw l=Zg,cf(o,0),ec(o,d),ja(o,co()),l;if(i===6)ec(o,d);else{if(p=o.current.alternate,!(d&30)&&!nH(p)&&(i=M0(o,d),i===2&&(S=SI(o),S!==0&&(d=S,i=$I(o,S))),i===1))throw l=Zg,cf(o,0),ec(o,d),ja(o,co()),l;switch(o.finishedWork=p,o.finishedLanes=d,i){case 0:case 1:throw Error(jn(345));case 2:nf(o,ka,dl);break;case 3:if(ec(o,d),(d&130023424)===d&&(i=Qb+500-co(),10<i)){if(h0(o,0)!==0)break;if(p=o.suspendedLanes,(p&d)!==d){_a(),o.pingedLanes|=o.suspendedLanes&p;break}o.timeoutHandle=xI(nf.bind(null,o,ka,dl),i);break}nf(o,ka,dl);break;case 4:if(ec(o,d),(d&4194240)===d)break;for(i=o.eventTimes,p=-1;0<d;){var b=31-ru(d);S=1<<b,b=i[b],b>p&&(p=b),d&=~S}if(d=p,d=co()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*tH(d/1960))-d,10<d){o.timeoutHandle=xI(nf.bind(null,o,ka,dl),d);break}nf(o,ka,dl);break;case 5:nf(o,ka,dl);break;default:throw Error(jn(329))}}}return ja(o,co()),o.callbackNode===l?kU.bind(null,o):null}function $I(o,i){var l=wg;return o.current.memoizedState.isDehydrated&&(cf(o,i).flags|=256),o=M0(o,i),o!==2&&(i=ka,ka=l,i!==null&&XI(i)),o}function XI(o){ka===null?ka=o:ka.push.apply(ka,o)}function nH(o){for(var i=o;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],S=p.getSnapshot;p=p.value;try{if(!au(S(),p))return!1}catch(b){return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ec(o,i){for(i&=~Xb,i&=~X0,o.suspendedLanes|=i,o.pingedLanes&=~i,o=o.expirationTimes;0<i;){var l=31-ru(i),d=1<<l;o[l]=-1,i&=~d}}function x2(o){if($r&6)throw Error(jn(327));fh();var i=h0(o,0);if(!(i&1))return ja(o,co()),null;var l=M0(o,i);if(o.tag!==0&&l===2){var d=SI(o);d!==0&&(i=d,l=$I(o,d))}if(l===1)throw l=Zg,cf(o,0),ec(o,i),ja(o,co()),l;if(l===6)throw Error(jn(345));return o.finishedWork=o.current.alternate,o.finishedLanes=i,nf(o,ka,dl),ja(o,co()),null}function Jb(o,i){var l=$r;$r|=1;try{return o(i)}finally{$r=l,$r===0&&(yh=co()+500,z0&&mc())}}function yf(o){nc!==null&&nc.tag===0&&!($r&6)&&fh();var i=$r;$r|=1;var l=Cs.transition,d=hi;try{if(Cs.transition=null,hi=1,o)return o()}finally{hi=d,Cs.transition=l,$r=i,!($r&6)&&mc()}}function eC(){ss=nh.current,Mi(nh)}function cf(o,i){o.finishedWork=null,o.finishedLanes=0;var l=o.timeoutHandle;if(l!==-1&&(o.timeoutHandle=-1,D9(l)),go!==null)for(l=go.return;l!==null;){var d=l;switch(Ob(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&y0();break;case 3:mh(),Mi(Ua),Mi(Jo),qb();break;case 5:Gb(d);break;case 4:mh();break;case 13:Mi(qi);break;case 19:Mi(qi);break;case 10:Ub(d.type._context);break;case 22:case 23:eC()}l=l.return}if(Mo=o,go=o=cc(o.current,null),jo=ss=i,So=0,Zg=null,Xb=X0=vf=0,ka=wg=null,sf!==null){for(i=0;i<sf.length;i++)if(l=sf[i],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,S=l.pending;if(S!==null){var b=S.next;S.next=p,d.next=b}l.pending=d}sf=null}return o}function FU(o,i){do{var l=go;try{if(Fb(),e0.current=C0,b0){for(var d=Ki.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}b0=!1}if(mf=0,xo=To=Ki=null,Tg=!1,Ug=0,$b.current=null,l===null||l.return===null){So=1,Zg=i,go=null;break}e:{var S=o,b=l.return,g=l,w=i;if(i=jo,g.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var F=w,R=g,y=R.tag;if(!(R.mode&1)&&(y===0||y===11||y===15)){var v=R.alternate;v?(R.updateQueue=v.updateQueue,R.memoizedState=v.memoizedState,R.lanes=v.lanes):(R.updateQueue=null,R.memoizedState=null)}var D=v2(b);if(D!==null){D.flags&=-257,y2(D,b,g,S,i),D.mode&1&&m2(S,F,i),i=D,w=F;var m=i.updateQueue;if(m===null){var T=new Set;T.add(w),i.updateQueue=T}else m.add(w);break e}else{if(!(i&1)){m2(S,F,i),tC();break e}w=Error(jn(426))}}else if(Ui&&g.mode&1){var U=v2(b);if(U!==null){!(U.flags&65536)&&(U.flags|=256),y2(U,b,g,S,i),Lb(vh(w,g));break e}}S=w=vh(w,g),So!==4&&(So=2),wg===null?wg=[S]:wg.push(S),S=b;do{switch(S.tag){case 3:S.flags|=65536,i&=-i,S.lanes|=i;var x=_U(S,w,i);c2(S,x);break e;case 1:g=w;var _=S.type,I=S.stateNode;if(!(S.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(uc===null||!uc.has(I)))){S.flags|=65536,i&=-i,S.lanes|=i;var C=TU(S,g,i);c2(S,C);break e}}S=S.return}while(S!==null)}jU(l)}catch(j){i=j,go===l&&l!==null&&(go=l=l.return);continue}break}while(!0)}function UU(){var o=R0.current;return R0.current=C0,o===null?C0:o}function tC(){(So===0||So===3||So===2)&&(So=4),Mo===null||!(vf&268435455)&&!(X0&268435455)||ec(Mo,jo)}function M0(o,i){var l=$r;$r|=2;var d=UU();(Mo!==o||jo!==i)&&(dl=null,cf(o,i));do try{rH();break}catch(p){FU(o,p)}while(!0);if(Fb(),$r=l,R0.current=d,go!==null)throw Error(jn(261));return Mo=null,jo=0,So}function rH(){for(;go!==null;)BU(go)}function iH(){for(;go!==null&&!Nq();)BU(go)}function BU(o){var i=GU(o.alternate,o,ss);o.memoizedProps=o.pendingProps,i===null?jU(o):go=i,$b.current=null}function jU(o){var i=o;do{var l=i.alternate;if(o=i.return,i.flags&32768){if(l=X9(l,i),l!==null){l.flags&=32767,go=l;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{So=6,go=null;return}}else if(l=$9(l,i,ss),l!==null){go=l;return}if(i=i.sibling,i!==null){go=i;return}go=i=o}while(i!==null);So===0&&(So=5)}function nf(o,i,l){var d=hi,p=Cs.transition;try{Cs.transition=null,hi=1,oH(o,i,l,d)}finally{Cs.transition=p,hi=d}return null}function oH(o,i,l,d){do fh();while(nc!==null);if($r&6)throw Error(jn(327));l=o.finishedWork;var p=o.finishedLanes;if(l===null)return null;if(o.finishedWork=null,o.finishedLanes=0,l===o.current)throw Error(jn(177));o.callbackNode=null,o.callbackPriority=0;var S=l.lanes|l.childLanes;if(Bq(o,S),o===Mo&&(go=Mo=null,jo=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||jy||(jy=!0,qU(d0,function(){return fh(),null})),S=(l.flags&15990)!==0,l.subtreeFlags&15990||S){S=Cs.transition,Cs.transition=null;var b=hi;hi=1;var g=$r;$r|=4,$b.current=null,J9(o,l),OU(l,o),I9(RI),p0=!!CI,RI=CI=null,o.current=l,eH(l),xq(),$r=g,hi=b,Cs.transition=S}else o.current=l;if(jy&&(jy=!1,nc=o,x0=p),S=o.pendingLanes,S===0&&(uc=null),Pq(l.stateNode),ja(o,co()),i!==null)for(d=o.onRecoverableError,l=0;l<i.length;l++)p=i[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(N0)throw N0=!1,o=YI,YI=null,o;return x0&1&&o.tag!==0&&fh(),S=o.pendingLanes,S&1?o===WI?Ag++:(Ag=0,WI=o):Ag=0,mc(),null}function fh(){if(nc!==null){var o=_3(x0),i=Cs.transition,l=hi;try{if(Cs.transition=null,hi=16>o?16:o,nc===null)var d=!1;else{if(o=nc,nc=null,x0=0,$r&6)throw Error(jn(331));var p=$r;for($r|=4,nr=o.current;nr!==null;){var S=nr,b=S.child;if(nr.flags&16){var g=S.deletions;if(g!==null){for(var w=0;w<g.length;w++){var F=g[w];for(nr=F;nr!==null;){var R=nr;switch(R.tag){case 0:case 11:case 15:Sg(8,R,S)}var y=R.child;if(y!==null)y.return=R,nr=y;else for(;nr!==null;){R=nr;var v=R.sibling,D=R.return;if(MU(R),R===F){nr=null;break}if(v!==null){v.return=D,nr=v;break}nr=D}}}var m=S.alternate;if(m!==null){var T=m.child;if(T!==null){m.child=null;do{var U=T.sibling;T.sibling=null,T=U}while(T!==null)}}nr=S}}if(S.subtreeFlags&2064&&b!==null)b.return=S,nr=b;else e:for(;nr!==null;){if(S=nr,S.flags&2048)switch(S.tag){case 0:case 11:case 15:Sg(9,S,S.return)}var x=S.sibling;if(x!==null){x.return=S.return,nr=x;break e}nr=S.return}}var _=o.current;for(nr=_;nr!==null;){b=nr;var I=b.child;if(b.subtreeFlags&2064&&I!==null)I.return=b,nr=I;else e:for(b=_;nr!==null;){if(g=nr,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:$0(9,g)}}catch(j){Qi(g,g.return,j)}if(g===b){nr=null;break e}var C=g.sibling;if(C!==null){C.return=g.return,nr=C;break e}nr=g.return}}if($r=p,mc(),Nu&&typeof Nu.onPostCommitFiberRoot=="function")try{Nu.onPostCommitFiberRoot(G0,o)}catch(j){}d=!0}return d}finally{hi=l,Cs.transition=i}}return!1}function M2(o,i,l){i=vh(l,i),i=_U(o,i,1),o=sc(o,i,1),i=_a(),o!==null&&(zg(o,1,i),ja(o,i))}function Qi(o,i,l){if(o.tag===3)M2(o,o,l);else for(;i!==null;){if(i.tag===3){M2(i,o,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(uc===null||!uc.has(d))){o=vh(l,o),o=TU(i,o,1),i=sc(i,o,1),o=_a(),i!==null&&(zg(i,1,o),ja(i,o));break}}i=i.return}}function aH(o,i,l){var d=o.pingCache;d!==null&&d.delete(i),i=_a(),o.pingedLanes|=o.suspendedLanes&l,Mo===o&&(jo&l)===l&&(So===4||So===3&&(jo&130023424)===jo&&500>co()-Qb?cf(o,0):Xb|=l),ja(o,i)}function ZU(o,i){i===0&&(o.mode&1?(i=xy,xy<<=1,!(xy&130023424)&&(xy=4194304)):i=1);var l=_a();o=El(o,i),o!==null&&(zg(o,i,l),ja(o,l))}function sH(o){var i=o.memoizedState,l=0;i!==null&&(l=i.retryLane),ZU(o,l)}function uH(o,i){var l=0;switch(o.tag){case 13:var d=o.stateNode,p=o.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=o.stateNode;break;default:throw Error(jn(314))}d!==null&&d.delete(i),ZU(o,l)}var GU;GU=function(o,i,l){if(o!==null)if(o.memoizedProps!==i.pendingProps||Ua.current)Fa=!0;else{if(!(o.lanes&l)&&!(i.flags&128))return Fa=!1,W9(o,i,l);Fa=!!(o.flags&131072)}else Fa=!1,Ui&&i.flags&1048576&&V3(i,T0,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;n0(o,i),o=i.pendingProps;var p=hh(i,Jo.current);ch(i,l),p=Kb(null,i,d,o,p,l);var S=Vb();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ba(d)?(S=!0,E0(i)):S=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,jb(i),p.updater=W0,i.stateNode=p,p._reactInternals=i,FI(i,d,o,l),i=jI(null,i,d,!0,S,l)):(i.tag=0,Ui&&S&&Pb(i),ya(null,i,p,l),i=i.child),i;case 16:d=i.elementType;e:{switch(n0(o,i),o=i.pendingProps,p=d._init,d=p(d._payload),i.type=d,p=i.tag=cH(d),o=Xs(d,o),p){case 0:i=BI(null,i,d,o,l);break e;case 1:i=T2(null,i,d,o,l);break e;case 11:i=E2(null,i,d,o,l);break e;case 14:i=_2(null,i,d,Xs(d.type,o),l);break e}throw Error(jn(306,d,""))}return i;case 0:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Xs(d,p),BI(o,i,d,p,l);case 1:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Xs(d,p),T2(o,i,d,p,l);case 3:e:{if(IU(i),o===null)throw Error(jn(387));d=i.pendingProps,S=i.memoizedState,p=S.element,Q3(o,i),A0(i,d,null,l);var b=i.memoizedState;if(d=b.element,S.isDehydrated)if(S={element:d,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},i.updateQueue.baseState=S,i.memoizedState=S,i.flags&256){p=vh(Error(jn(423)),i),i=S2(o,i,d,l,p);break e}else if(d!==p){p=vh(Error(jn(424)),i),i=S2(o,i,d,l,p);break e}else for(us=ac(i.stateNode.containerInfo.firstChild),cs=i,Ui=!0,Js=null,l=$3(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ph(),d===p){i=_l(o,i,l);break e}ya(o,i,d,l)}i=i.child}return i;case 5:return J3(i),o===null&&OI(i),d=i.type,p=i.pendingProps,S=o!==null?o.memoizedProps:null,b=p.children,NI(d,p)?b=null:S!==null&&NI(d,S)&&(i.flags|=32),AU(o,i),ya(o,i,b,l),i.child;case 6:return o===null&&OI(i),null;case 13:return bU(o,i,l);case 4:return Zb(i,i.stateNode.containerInfo),d=i.pendingProps,o===null?i.child=gh(i,null,d,l):ya(o,i,d,l),i.child;case 11:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Xs(d,p),E2(o,i,d,p,l);case 7:return ya(o,i,i.pendingProps,l),i.child;case 8:return ya(o,i,i.pendingProps.children,l),i.child;case 12:return ya(o,i,i.pendingProps.children,l),i.child;case 10:e:{if(d=i.type._context,p=i.pendingProps,S=i.memoizedProps,b=p.value,bi(S0,d._currentValue),d._currentValue=b,S!==null)if(au(S.value,b)){if(S.children===p.children&&!Ua.current){i=_l(o,i,l);break e}}else for(S=i.child,S!==null&&(S.return=i);S!==null;){var g=S.dependencies;if(g!==null){b=S.child;for(var w=g.firstContext;w!==null;){if(w.context===d){if(S.tag===1){w=ml(-1,l&-l),w.tag=2;var F=S.updateQueue;if(F!==null){F=F.shared;var R=F.pending;R===null?w.next=w:(w.next=R.next,R.next=w),F.pending=w}}S.lanes|=l,w=S.alternate,w!==null&&(w.lanes|=l),LI(S.return,l,i),g.lanes|=l;break}w=w.next}}else if(S.tag===10)b=S.type===i.type?null:S.child;else if(S.tag===18){if(b=S.return,b===null)throw Error(jn(341));b.lanes|=l,g=b.alternate,g!==null&&(g.lanes|=l),LI(b,l,i),b=S.sibling}else b=S.child;if(b!==null)b.return=S;else for(b=S;b!==null;){if(b===i){b=null;break}if(S=b.sibling,S!==null){S.return=b.return,b=S;break}b=b.return}S=b}ya(o,i,p.children,l),i=i.child}return i;case 9:return p=i.type,d=i.pendingProps.children,ch(i,l),p=Rs(p),d=d(p),i.flags|=1,ya(o,i,d,l),i.child;case 14:return d=i.type,p=Xs(d,i.pendingProps),p=Xs(d.type,p),_2(o,i,d,p,l);case 15:return SU(o,i,i.type,i.pendingProps,l);case 17:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Xs(d,p),n0(o,i),i.tag=1,Ba(d)?(o=!0,E0(i)):o=!1,ch(i,l),EU(i,d,p),FI(i,d,p,l),jI(null,i,d,!0,o,l);case 19:return CU(o,i,l);case 22:return wU(o,i,l)}throw Error(jn(156,i.tag))};function qU(o,i){return m3(o,i)}function lH(o,i,l,d){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(o,i,l,d){return new lH(o,i,l,d)}function nC(o){return o=o.prototype,!(!o||!o.isReactComponent)}function cH(o){if(typeof o=="function")return nC(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Tb)return 11;if(o===Sb)return 14}return 2}function cc(o,i){var l=o.alternate;return l===null?(l=bs(o.tag,i,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=i,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&14680064,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,i=o.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l}function o0(o,i,l,d,p,S){var b=2;if(d=o,typeof o=="function")nC(o)&&(b=1);else if(typeof o=="string")b=5;else e:switch(o){case Vd:return ff(l.children,p,S,i);case _b:b=8,p|=8;break;case sI:return o=bs(12,l,i,p|2),o.elementType=sI,o.lanes=S,o;case uI:return o=bs(13,l,i,p),o.elementType=uI,o.lanes=S,o;case lI:return o=bs(19,l,i,p),o.elementType=lI,o.lanes=S,o;case JF:return Q0(l,p,S,i);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case XF:b=10;break e;case QF:b=9;break e;case Tb:b=11;break e;case Sb:b=14;break e;case Xl:b=16,d=null;break e}throw Error(jn(130,o==null?o:typeof o,""))}return i=bs(b,l,i,p),i.elementType=o,i.type=d,i.lanes=S,i}function ff(o,i,l,d){return o=bs(7,o,d,i),o.lanes=l,o}function Q0(o,i,l,d){return o=bs(22,o,d,i),o.elementType=JF,o.lanes=l,o.stateNode={isHidden:!1},o}function N1(o,i,l){return o=bs(6,o,null,i),o.lanes=l,o}function x1(o,i,l){return i=bs(4,o.children!==null?o.children:[],o.key,i),i.lanes=l,i.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},i}function fH(o,i,l,d,p){this.tag=i,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=c1(0),this.expirationTimes=c1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=c1(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function rC(o,i,l,d,p,S,b,g,w){return o=new fH(o,i,l,g,w),i===1?(i=1,S===!0&&(i|=8)):i=0,S=bs(3,null,null,i),o.current=S,S.stateNode=o,S.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},jb(S),o}function dH(o,i,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kd,key:d==null?null:""+d,children:o,containerInfo:i,implementation:l}}function HU(o){if(!o)return hc;o=o._reactInternals;e:{if(Sf(o)!==o||o.tag!==1)throw Error(jn(170));var i=o;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Ba(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(jn(171))}if(o.tag===1){var l=o.type;if(Ba(l))return H3(o,l,i)}return i}function KU(o,i,l,d,p,S,b,g,w){return o=rC(l,d,!0,o,p,S,b,g,w),o.context=HU(null),l=o.current,d=_a(),p=lc(l),S=ml(d,p),S.callback=i!=null?i:null,sc(l,S,p),o.current.lanes=p,zg(o,p,d),ja(o,d),o}function J0(o,i,l,d){var p=i.current,S=_a(),b=lc(p);return l=HU(l),i.context===null?i.context=l:i.pendingContext=l,i=ml(S,b),i.payload={element:o},d=d===void 0?null:d,d!==null&&(i.callback=d),o=sc(p,i,b),o!==null&&(iu(o,p,b,S),Jy(o,p,b)),b}function D0(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function D2(o,i){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<i?l:i}}function iC(o,i){D2(o,i),(o=o.alternate)&&D2(o,i)}function hH(){return null}var VU=typeof reportError=="function"?reportError:function(o){console.error(o)};function oC(o){this._internalRoot=o}eE.prototype.render=oC.prototype.render=function(o){var i=this._internalRoot;if(i===null)throw Error(jn(409));J0(o,i,null,null)};eE.prototype.unmount=oC.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var i=o.containerInfo;yf(function(){J0(null,o,null,null)}),i[yl]=null}};function eE(o){this._internalRoot=o}eE.prototype.unstable_scheduleHydration=function(o){if(o){var i=w3();o={blockedOn:null,target:o,priority:i};for(var l=0;l<Jl.length&&i!==0&&i<Jl[l].priority;l++);Jl.splice(l,0,o),l===0&&I3(o)}};function aC(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function tE(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function P2(){}function pH(o,i,l,d,p){if(p){if(typeof d=="function"){var S=d;d=function(){var F=D0(b);S.call(F)}}var b=KU(i,d,o,0,null,!1,!1,"",P2);return o._reactRootContainer=b,o[yl]=b.current,Pg(o.nodeType===8?o.parentNode:o),yf(),b}for(;p=o.lastChild;)o.removeChild(p);if(typeof d=="function"){var g=d;d=function(){var F=D0(w);g.call(F)}}var w=rC(o,0,!1,null,null,!1,!1,"",P2);return o._reactRootContainer=w,o[yl]=w.current,Pg(o.nodeType===8?o.parentNode:o),yf(function(){J0(i,w,l,d)}),w}function nE(o,i,l,d,p){var S=l._reactRootContainer;if(S){var b=S;if(typeof p=="function"){var g=p;p=function(){var w=D0(b);g.call(w)}}J0(i,b,o,p)}else b=pH(l,i,o,p,d);return D0(b)}T3=function(o){switch(o.tag){case 3:var i=o.stateNode;if(i.current.memoizedState.isDehydrated){var l=fg(i.pendingLanes);l!==0&&(Ib(i,l|1),ja(i,co()),!($r&6)&&(yh=co()+500,mc()))}break;case 13:yf(function(){var d=El(o,1);if(d!==null){var p=_a();iu(d,o,1,p)}}),iC(o,1)}};bb=function(o){if(o.tag===13){var i=El(o,134217728);if(i!==null){var l=_a();iu(i,o,134217728,l)}iC(o,134217728)}};S3=function(o){if(o.tag===13){var i=lc(o),l=El(o,i);if(l!==null){var d=_a();iu(l,o,i,d)}iC(o,i)}};w3=function(){return hi};A3=function(o,i){var l=hi;try{return hi=o,i()}finally{hi=l}};EI=function(o,i,l){switch(i){case"input":if(dI(o,l),i=l.name,l.type==="radio"&&i!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==o&&d.form===o.form){var p=V0(d);if(!p)throw Error(jn(90));t3(d),dI(d,p)}}}break;case"textarea":r3(o,l);break;case"select":i=l.value,i!=null&&ah(o,!!l.multiple,i,!1)}};c3=Jb;f3=yf;var gH={usingClientEntryPoint:!1,Events:[Wg,$d,V0,u3,l3,Jb]},ig={findFiberByHostInstance:af,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mH={bundleType:ig.bundleType,version:ig.version,rendererPackageName:ig.rendererPackageName,rendererConfig:ig.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sl.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=p3(o),o===null?null:o.stateNode},findFiberByHostInstance:ig.findFiberByHostInstance||hH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zy.isDisabled&&Zy.supportsFiber)try{G0=Zy.inject(mH),Nu=Zy}catch(o){}}ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gH;ds.createPortal=function(o,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aC(i))throw Error(jn(200));return dH(o,i,null,l)};ds.createRoot=function(o,i){if(!aC(o))throw Error(jn(299));var l=!1,d="",p=VU;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=rC(o,1,!1,null,null,l,!1,d,p),o[yl]=i.current,Pg(o.nodeType===8?o.parentNode:o),new oC(i)};ds.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var i=o._reactInternals;if(i===void 0)throw typeof o.render=="function"?Error(jn(188)):(o=Object.keys(o).join(","),Error(jn(268,o)));return o=p3(i),o=o===null?null:o.stateNode,o};ds.flushSync=function(o){return yf(o)};ds.hydrate=function(o,i,l){if(!tE(i))throw Error(jn(200));return nE(null,o,i,!0,l)};ds.hydrateRoot=function(o,i,l){if(!aC(o))throw Error(jn(405));var d=l!=null&&l.hydratedSources||null,p=!1,S="",b=VU;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(S=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),i=KU(i,null,o,1,l!=null?l:null,p,!1,S,b),o[yl]=i.current,Pg(o),d)for(o=0;o<d.length;o++)l=d[o],p=l._getVersion,p=p(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,p]:i.mutableSourceEagerHydrationData.push(l,p);return new eE(i)};ds.render=function(o,i,l){if(!tE(i))throw Error(jn(200));return nE(null,o,i,!1,l)};ds.unmountComponentAtNode=function(o){if(!tE(o))throw Error(jn(40));return o._reactRootContainer?(yf(function(){nE(null,null,o,!1,function(){o._reactRootContainer=null,o[yl]=null})}),!0):!1};ds.unstable_batchedUpdates=Jb;ds.unstable_renderSubtreeIntoContainer=function(o,i,l,d){if(!tE(l))throw Error(jn(200));if(o==null||o._reactInternals===void 0)throw Error(jn(38));return nE(o,i,l,!1,d)};ds.version="18.3.1-next-f1338f8080-20240426";function zU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zU)}catch(o){console.error(o)}}zU(),zF.exports=ds;var vH=zF.exports,O2=vH;oI.createRoot=O2.createRoot,oI.hydrateRoot=O2.hydrateRoot;var YU={exports:{}},M1,L2;function wf(){if(L2)return M1;L2=1;function o(i){var l=typeof i;return i!=null&&(l=="object"||l=="function")}return M1=o,M1}var D1,k2;function WU(){if(k2)return D1;k2=1;var o=typeof tu=="object"&&tu&&tu.Object===Object&&tu;return D1=o,D1}var P1,F2;function Mu(){if(F2)return P1;F2=1;var o=WU(),i=typeof self=="object"&&self&&self.Object===Object&&self,l=o||i||Function("return this")();return P1=l,P1}var O1,U2;function yH(){if(U2)return O1;U2=1;var o=Mu(),i=function(){return o.Date.now()};return O1=i,O1}var L1,B2;function EH(){if(B2)return L1;B2=1;var o=/\s/;function i(l){for(var d=l.length;d--&&o.test(l.charAt(d)););return d}return L1=i,L1}var k1,j2;function _H(){if(j2)return k1;j2=1;var o=EH(),i=/^\s+/;function l(d){return d&&d.slice(0,o(d)+1).replace(i,"")}return k1=l,k1}var F1,Z2;function Xg(){if(Z2)return F1;Z2=1;var o=Mu(),i=o.Symbol;return F1=i,F1}var U1,G2;function TH(){if(G2)return U1;G2=1;var o=Xg(),i=Object.prototype,l=i.hasOwnProperty,d=i.toString,p=o?o.toStringTag:void 0;function S(b){var g=l.call(b,p),w=b[p];try{b[p]=void 0;var F=!0}catch(y){}var R=d.call(b);return F&&(g?b[p]=w:delete b[p]),R}return U1=S,U1}var B1,q2;function SH(){if(q2)return B1;q2=1;var o=Object.prototype,i=o.toString;function l(d){return i.call(d)}return B1=l,B1}var j1,H2;function Qg(){if(H2)return j1;H2=1;var o=Xg(),i=TH(),l=SH(),d="[object Null]",p="[object Undefined]",S=o?o.toStringTag:void 0;function b(g){return g==null?g===void 0?p:d:S&&S in Object(g)?i(g):l(g)}return j1=b,j1}var Z1,K2;function wh(){if(K2)return Z1;K2=1;function o(i){return i!=null&&typeof i=="object"}return Z1=o,Z1}var G1,V2;function Jg(){if(V2)return G1;V2=1;var o=Qg(),i=wh(),l="[object Symbol]";function d(p){return typeof p=="symbol"||i(p)&&o(p)==l}return G1=d,G1}var q1,z2;function wH(){if(z2)return q1;z2=1;var o=_H(),i=wf(),l=Jg(),d=NaN,p=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,b=/^0o[0-7]+$/i,g=parseInt;function w(F){if(typeof F=="number")return F;if(l(F))return d;if(i(F)){var R=typeof F.valueOf=="function"?F.valueOf():F;F=i(R)?R+"":R}if(typeof F!="string")return F===0?F:+F;F=o(F);var y=S.test(F);return y||b.test(F)?g(F.slice(2),y?2:8):p.test(F)?d:+F}return q1=w,q1}var H1,Y2;function $U(){if(Y2)return H1;Y2=1;var o=wf(),i=yH(),l=wH(),d="Expected a function",p=Math.max,S=Math.min;function b(g,w,F){var R,y,v,D,m,T,U=0,x=!1,_=!1,I=!0;if(typeof g!="function")throw new TypeError(d);w=l(w)||0,o(F)&&(x=!!F.leading,_="maxWait"in F,v=_?p(l(F.maxWait)||0,w):v,I="trailing"in F?!!F.trailing:I);function C(oe){var de=R,Ce=y;return R=y=void 0,U=oe,D=g.apply(Ce,de),D}function j(oe){return U=oe,m=setTimeout(W,w),x?C(oe):D}function z(oe){var de=oe-T,Ce=oe-U,Je=w-de;return _?S(Je,v-Ce):Je}function $(oe){var de=oe-T,Ce=oe-U;return T===void 0||de>=w||de<0||_&&Ce>=v}function W(){var oe=i();if($(oe))return ue(oe);m=setTimeout(W,z(oe))}function ue(oe){return m=void 0,I&&R?C(oe):(R=y=void 0,D)}function N(){m!==void 0&&clearTimeout(m),U=0,R=T=y=m=void 0}function X(){return m===void 0?D:ue(i())}function ce(){var oe=i(),de=$(oe);if(R=arguments,y=this,T=oe,de){if(m===void 0)return j(T);if(_)return clearTimeout(m),m=setTimeout(W,w),C(T)}return m===void 0&&(m=setTimeout(W,w)),D}return ce.cancel=N,ce.flush=X,ce}return H1=b,H1}var K1,W2;function XU(){if(W2)return K1;W2=1;var o=Qg(),i=wf(),l="[object AsyncFunction]",d="[object Function]",p="[object GeneratorFunction]",S="[object Proxy]";function b(g){if(!i(g))return!1;var w=o(g);return w==d||w==p||w==l||w==S}return K1=b,K1}var V1,$2;function AH(){if($2)return V1;$2=1;var o=Mu(),i=o["__core-js_shared__"];return V1=i,V1}var z1,X2;function IH(){if(X2)return z1;X2=1;var o=AH(),i=function(){var d=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}();function l(d){return!!i&&i in d}return z1=l,z1}var Y1,Q2;function QU(){if(Q2)return Y1;Q2=1;var o=Function.prototype,i=o.toString;function l(d){if(d!=null){try{return i.call(d)}catch(p){}try{return d+""}catch(p){}}return""}return Y1=l,Y1}var W1,J2;function bH(){if(J2)return W1;J2=1;var o=XU(),i=IH(),l=wf(),d=QU(),p=/[\\^$.*+?()[\]{}|]/g,S=/^\[object .+?Constructor\]$/,b=Function.prototype,g=Object.prototype,w=b.toString,F=g.hasOwnProperty,R=RegExp("^"+w.call(F).replace(p,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y(v){if(!l(v)||i(v))return!1;var D=o(v)?R:S;return D.test(d(v))}return W1=y,W1}var $1,eO;function CH(){if(eO)return $1;eO=1;function o(i,l){return i==null?void 0:i[l]}return $1=o,$1}var X1,tO;function Af(){if(tO)return X1;tO=1;var o=bH(),i=CH();function l(d,p){var S=i(d,p);return o(S)?S:void 0}return X1=l,X1}var Q1,nO;function rE(){if(nO)return Q1;nO=1;var o=Af(),i=o(Object,"create");return Q1=i,Q1}var J1,rO;function RH(){if(rO)return J1;rO=1;var o=rE();function i(){this.__data__=o?o(null):{},this.size=0}return J1=i,J1}var eS,iO;function NH(){if(iO)return eS;iO=1;function o(i){var l=this.has(i)&&delete this.__data__[i];return this.size-=l?1:0,l}return eS=o,eS}var tS,oO;function xH(){if(oO)return tS;oO=1;var o=rE(),i="__lodash_hash_undefined__",l=Object.prototype,d=l.hasOwnProperty;function p(S){var b=this.__data__;if(o){var g=b[S];return g===i?void 0:g}return d.call(b,S)?b[S]:void 0}return tS=p,tS}var nS,aO;function MH(){if(aO)return nS;aO=1;var o=rE(),i=Object.prototype,l=i.hasOwnProperty;function d(p){var S=this.__data__;return o?S[p]!==void 0:l.call(S,p)}return nS=d,nS}var rS,sO;function DH(){if(sO)return rS;sO=1;var o=rE(),i="__lodash_hash_undefined__";function l(d,p){var S=this.__data__;return this.size+=this.has(d)?0:1,S[d]=o&&p===void 0?i:p,this}return rS=l,rS}var iS,uO;function PH(){if(uO)return iS;uO=1;var o=RH(),i=NH(),l=xH(),d=MH(),p=DH();function S(b){var g=-1,w=b==null?0:b.length;for(this.clear();++g<w;){var F=b[g];this.set(F[0],F[1])}}return S.prototype.clear=o,S.prototype.delete=i,S.prototype.get=l,S.prototype.has=d,S.prototype.set=p,iS=S,iS}var oS,lO;function OH(){if(lO)return oS;lO=1;function o(){this.__data__=[],this.size=0}return oS=o,oS}var aS,cO;function sC(){if(cO)return aS;cO=1;function o(i,l){return i===l||i!==i&&l!==l}return aS=o,aS}var sS,fO;function iE(){if(fO)return sS;fO=1;var o=sC();function i(l,d){for(var p=l.length;p--;)if(o(l[p][0],d))return p;return-1}return sS=i,sS}var uS,dO;function LH(){if(dO)return uS;dO=1;var o=iE(),i=Array.prototype,l=i.splice;function d(p){var S=this.__data__,b=o(S,p);if(b<0)return!1;var g=S.length-1;return b==g?S.pop():l.call(S,b,1),--this.size,!0}return uS=d,uS}var lS,hO;function kH(){if(hO)return lS;hO=1;var o=iE();function i(l){var d=this.__data__,p=o(d,l);return p<0?void 0:d[p][1]}return lS=i,lS}var cS,pO;function FH(){if(pO)return cS;pO=1;var o=iE();function i(l){return o(this.__data__,l)>-1}return cS=i,cS}var fS,gO;function UH(){if(gO)return fS;gO=1;var o=iE();function i(l,d){var p=this.__data__,S=o(p,l);return S<0?(++this.size,p.push([l,d])):p[S][1]=d,this}return fS=i,fS}var dS,mO;function oE(){if(mO)return dS;mO=1;var o=OH(),i=LH(),l=kH(),d=FH(),p=UH();function S(b){var g=-1,w=b==null?0:b.length;for(this.clear();++g<w;){var F=b[g];this.set(F[0],F[1])}}return S.prototype.clear=o,S.prototype.delete=i,S.prototype.get=l,S.prototype.has=d,S.prototype.set=p,dS=S,dS}var hS,vO;function uC(){if(vO)return hS;vO=1;var o=Af(),i=Mu(),l=o(i,"Map");return hS=l,hS}var pS,yO;function BH(){if(yO)return pS;yO=1;var o=PH(),i=oE(),l=uC();function d(){this.size=0,this.__data__={hash:new o,map:new(l||i),string:new o}}return pS=d,pS}var gS,EO;function jH(){if(EO)return gS;EO=1;function o(i){var l=typeof i;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?i!=="__proto__":i===null}return gS=o,gS}var mS,_O;function aE(){if(_O)return mS;_O=1;var o=jH();function i(l,d){var p=l.__data__;return o(d)?p[typeof d=="string"?"string":"hash"]:p.map}return mS=i,mS}var vS,TO;function ZH(){if(TO)return vS;TO=1;var o=aE();function i(l){var d=o(this,l).delete(l);return this.size-=d?1:0,d}return vS=i,vS}var yS,SO;function GH(){if(SO)return yS;SO=1;var o=aE();function i(l){return o(this,l).get(l)}return yS=i,yS}var ES,wO;function qH(){if(wO)return ES;wO=1;var o=aE();function i(l){return o(this,l).has(l)}return ES=i,ES}var _S,AO;function HH(){if(AO)return _S;AO=1;var o=aE();function i(l,d){var p=o(this,l),S=p.size;return p.set(l,d),this.size+=p.size==S?0:1,this}return _S=i,_S}var TS,IO;function lC(){if(IO)return TS;IO=1;var o=BH(),i=ZH(),l=GH(),d=qH(),p=HH();function S(b){var g=-1,w=b==null?0:b.length;for(this.clear();++g<w;){var F=b[g];this.set(F[0],F[1])}}return S.prototype.clear=o,S.prototype.delete=i,S.prototype.get=l,S.prototype.has=d,S.prototype.set=p,TS=S,TS}var SS,bO;function KH(){if(bO)return SS;bO=1;var o="__lodash_hash_undefined__";function i(l){return this.__data__.set(l,o),this}return SS=i,SS}var wS,CO;function VH(){if(CO)return wS;CO=1;function o(i){return this.__data__.has(i)}return wS=o,wS}var AS,RO;function JU(){if(RO)return AS;RO=1;var o=lC(),i=KH(),l=VH();function d(p){var S=-1,b=p==null?0:p.length;for(this.__data__=new o;++S<b;)this.add(p[S])}return d.prototype.add=d.prototype.push=i,d.prototype.has=l,AS=d,AS}var IS,NO;function zH(){if(NO)return IS;NO=1;function o(i,l,d,p){for(var S=i.length,b=d+(p?1:-1);p?b--:++b<S;)if(l(i[b],b,i))return b;return-1}return IS=o,IS}var bS,xO;function YH(){if(xO)return bS;xO=1;function o(i){return i!==i}return bS=o,bS}var CS,MO;function WH(){if(MO)return CS;MO=1;function o(i,l,d){for(var p=d-1,S=i.length;++p<S;)if(i[p]===l)return p;return-1}return CS=o,CS}var RS,DO;function $H(){if(DO)return RS;DO=1;var o=zH(),i=YH(),l=WH();function d(p,S,b){return S===S?l(p,S,b):o(p,i,b)}return RS=d,RS}var NS,PO;function XH(){if(PO)return NS;PO=1;var o=$H();function i(l,d){var p=l==null?0:l.length;return!!p&&o(l,d,0)>-1}return NS=i,NS}var xS,OO;function QH(){if(OO)return xS;OO=1;function o(i,l,d){for(var p=-1,S=i==null?0:i.length;++p<S;)if(d(l,i[p]))return!0;return!1}return xS=o,xS}var MS,LO;function cC(){if(LO)return MS;LO=1;function o(i,l){for(var d=-1,p=i==null?0:i.length,S=Array(p);++d<p;)S[d]=l(i[d],d,i);return S}return MS=o,MS}var DS,kO;function fC(){if(kO)return DS;kO=1;function o(i){return function(l){return i(l)}}return DS=o,DS}var PS,FO;function e4(){if(FO)return PS;FO=1;function o(i,l){return i.has(l)}return PS=o,PS}var OS,UO;function JH(){if(UO)return OS;UO=1;var o=JU(),i=XH(),l=QH(),d=cC(),p=fC(),S=e4(),b=200;function g(w,F,R,y){var v=-1,D=i,m=!0,T=w.length,U=[],x=F.length;if(!T)return U;R&&(F=d(F,p(R))),y?(D=l,m=!1):F.length>=b&&(D=S,m=!1,F=new o(F));e:for(;++v<T;){var _=w[v],I=R==null?_:R(_);if(_=y||_!==0?_:0,m&&I===I){for(var C=x;C--;)if(F[C]===I)continue e;U.push(_)}else D(F,I,y)||U.push(_)}return U}return OS=g,OS}var LS,BO;function t4(){if(BO)return LS;BO=1;function o(i,l){for(var d=-1,p=l.length,S=i.length;++d<p;)i[S+d]=l[d];return i}return LS=o,LS}var kS,jO;function eK(){if(jO)return kS;jO=1;var o=Qg(),i=wh(),l="[object Arguments]";function d(p){return i(p)&&o(p)==l}return kS=d,kS}var FS,ZO;function dC(){if(ZO)return FS;ZO=1;var o=eK(),i=wh(),l=Object.prototype,d=l.hasOwnProperty,p=l.propertyIsEnumerable,S=o(function(){return arguments}())?o:function(b){return i(b)&&d.call(b,"callee")&&!p.call(b,"callee")};return FS=S,FS}var US,GO;function xs(){if(GO)return US;GO=1;var o=Array.isArray;return US=o,US}var BS,qO;function tK(){if(qO)return BS;qO=1;var o=Xg(),i=dC(),l=xs(),d=o?o.isConcatSpreadable:void 0;function p(S){return l(S)||i(S)||!!(d&&S&&S[d])}return BS=p,BS}var jS,HO;function n4(){if(HO)return jS;HO=1;var o=t4(),i=tK();function l(d,p,S,b,g){var w=-1,F=d.length;for(S||(S=i),g||(g=[]);++w<F;){var R=d[w];p>0&&S(R)?p>1?l(R,p-1,S,b,g):o(g,R):b||(g[g.length]=R)}return g}return jS=l,jS}var ZS,KO;function em(){if(KO)return ZS;KO=1;function o(i){return i}return ZS=o,ZS}var GS,VO;function nK(){if(VO)return GS;VO=1;function o(i,l,d){switch(d.length){case 0:return i.call(l);case 1:return i.call(l,d[0]);case 2:return i.call(l,d[0],d[1]);case 3:return i.call(l,d[0],d[1],d[2])}return i.apply(l,d)}return GS=o,GS}var qS,zO;function rK(){if(zO)return qS;zO=1;var o=nK(),i=Math.max;function l(d,p,S){return p=i(p===void 0?d.length-1:p,0),function(){for(var b=arguments,g=-1,w=i(b.length-p,0),F=Array(w);++g<w;)F[g]=b[p+g];g=-1;for(var R=Array(p+1);++g<p;)R[g]=b[g];return R[p]=S(F),o(d,this,R)}}return qS=l,qS}var HS,YO;function iK(){if(YO)return HS;YO=1;function o(i){return function(){return i}}return HS=o,HS}var KS,WO;function oK(){if(WO)return KS;WO=1;var o=Af(),i=function(){try{var l=o(Object,"defineProperty");return l({},"",{}),l}catch(d){}}();return KS=i,KS}var VS,$O;function aK(){if($O)return VS;$O=1;var o=iK(),i=oK(),l=em(),d=i?function(p,S){return i(p,"toString",{configurable:!0,enumerable:!1,value:o(S),writable:!0})}:l;return VS=d,VS}var zS,XO;function sK(){if(XO)return zS;XO=1;var o=800,i=16,l=Date.now;function d(p){var S=0,b=0;return function(){var g=l(),w=i-(g-b);if(b=g,w>0){if(++S>=o)return arguments[0]}else S=0;return p.apply(void 0,arguments)}}return zS=d,zS}var YS,QO;function uK(){if(QO)return YS;QO=1;var o=aK(),i=sK(),l=i(o);return YS=l,YS}var WS,JO;function r4(){if(JO)return WS;JO=1;var o=em(),i=rK(),l=uK();function d(p,S){return l(i(p,S,o),p+"")}return WS=d,WS}var $S,eL;function hC(){if(eL)return $S;eL=1;var o=9007199254740991;function i(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=o}return $S=i,$S}var XS,tL;function tm(){if(tL)return XS;tL=1;var o=XU(),i=hC();function l(d){return d!=null&&i(d.length)&&!o(d)}return XS=l,XS}var QS,nL;function lK(){if(nL)return QS;nL=1;var o=tm(),i=wh();function l(d){return i(d)&&o(d)}return QS=l,QS}var JS,rL;function cK(){if(rL)return JS;rL=1;var o=JH(),i=n4(),l=r4(),d=lK(),p=l(function(S,b){return d(S)?o(S,i(b,1,d,!0)):[]});return JS=p,JS}var ew,iL;function i4(){if(iL)return ew;iL=1;function o(i,l){for(var d=-1,p=i==null?0:i.length,S=0,b=[];++d<p;){var g=i[d];l(g,d,i)&&(b[S++]=g)}return b}return ew=o,ew}var tw,oL;function fK(){if(oL)return tw;oL=1;function o(i){return function(l,d,p){for(var S=-1,b=Object(l),g=p(l),w=g.length;w--;){var F=g[i?w:++S];if(d(b[F],F,b)===!1)break}return l}}return tw=o,tw}var nw,aL;function dK(){if(aL)return nw;aL=1;var o=fK(),i=o();return nw=i,nw}var rw,sL;function hK(){if(sL)return rw;sL=1;function o(i,l){for(var d=-1,p=Array(i);++d<i;)p[d]=l(d);return p}return rw=o,rw}var hg={exports:{}},iw,uL;function pK(){if(uL)return iw;uL=1;function o(){return!1}return iw=o,iw}hg.exports;var lL;function o4(){return lL||(lL=1,function(o,i){var l=Mu(),d=pK(),p=i&&!i.nodeType&&i,S=p&&!0&&o&&!o.nodeType&&o,b=S&&S.exports===p,g=b?l.Buffer:void 0,w=g?g.isBuffer:void 0,F=w||d;o.exports=F}(hg,hg.exports)),hg.exports}var ow,cL;function pC(){if(cL)return ow;cL=1;var o=9007199254740991,i=/^(?:0|[1-9]\d*)$/;function l(d,p){var S=typeof d;return p=p==null?o:p,!!p&&(S=="number"||S!="symbol"&&i.test(d))&&d>-1&&d%1==0&&d<p}return ow=l,ow}var aw,fL;function gK(){if(fL)return aw;fL=1;var o=Qg(),i=hC(),l=wh(),d="[object Arguments]",p="[object Array]",S="[object Boolean]",b="[object Date]",g="[object Error]",w="[object Function]",F="[object Map]",R="[object Number]",y="[object Object]",v="[object RegExp]",D="[object Set]",m="[object String]",T="[object WeakMap]",U="[object ArrayBuffer]",x="[object DataView]",_="[object Float32Array]",I="[object Float64Array]",C="[object Int8Array]",j="[object Int16Array]",z="[object Int32Array]",$="[object Uint8Array]",W="[object Uint8ClampedArray]",ue="[object Uint16Array]",N="[object Uint32Array]",X={};X[_]=X[I]=X[C]=X[j]=X[z]=X[$]=X[W]=X[ue]=X[N]=!0,X[d]=X[p]=X[U]=X[S]=X[x]=X[b]=X[g]=X[w]=X[F]=X[R]=X[y]=X[v]=X[D]=X[m]=X[T]=!1;function ce(oe){return l(oe)&&i(oe.length)&&!!X[o(oe)]}return aw=ce,aw}var pg={exports:{}};pg.exports;var dL;function mK(){return dL||(dL=1,function(o,i){var l=WU(),d=i&&!i.nodeType&&i,p=d&&!0&&o&&!o.nodeType&&o,S=p&&p.exports===d,b=S&&l.process,g=function(){try{var w=p&&p.require&&p.require("util").types;return w||b&&b.binding&&b.binding("util")}catch(F){}}();o.exports=g}(pg,pg.exports)),pg.exports}var sw,hL;function a4(){if(hL)return sw;hL=1;var o=gK(),i=fC(),l=mK(),d=l&&l.isTypedArray,p=d?i(d):o;return sw=p,sw}var uw,pL;function vK(){if(pL)return uw;pL=1;var o=hK(),i=dC(),l=xs(),d=o4(),p=pC(),S=a4(),b=Object.prototype,g=b.hasOwnProperty;function w(F,R){var y=l(F),v=!y&&i(F),D=!y&&!v&&d(F),m=!y&&!v&&!D&&S(F),T=y||v||D||m,U=T?o(F.length,String):[],x=U.length;for(var _ in F)(R||g.call(F,_))&&!(T&&(_=="length"||D&&(_=="offset"||_=="parent")||m&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||p(_,x)))&&U.push(_);return U}return uw=w,uw}var lw,gL;function yK(){if(gL)return lw;gL=1;var o=Object.prototype;function i(l){var d=l&&l.constructor,p=typeof d=="function"&&d.prototype||o;return l===p}return lw=i,lw}var cw,mL;function EK(){if(mL)return cw;mL=1;function o(i,l){return function(d){return i(l(d))}}return cw=o,cw}var fw,vL;function _K(){if(vL)return fw;vL=1;var o=EK(),i=o(Object.keys,Object);return fw=i,fw}var dw,yL;function TK(){if(yL)return dw;yL=1;var o=yK(),i=_K(),l=Object.prototype,d=l.hasOwnProperty;function p(S){if(!o(S))return i(S);var b=[];for(var g in Object(S))d.call(S,g)&&g!="constructor"&&b.push(g);return b}return dw=p,dw}var hw,EL;function gC(){if(EL)return hw;EL=1;var o=vK(),i=TK(),l=tm();function d(p){return l(p)?o(p):i(p)}return hw=d,hw}var pw,_L;function mC(){if(_L)return pw;_L=1;var o=dK(),i=gC();function l(d,p){return d&&o(d,p,i)}return pw=l,pw}var gw,TL;function SK(){if(TL)return gw;TL=1;var o=tm();function i(l,d){return function(p,S){if(p==null)return p;if(!o(p))return l(p,S);for(var b=p.length,g=d?b:-1,w=Object(p);(d?g--:++g<b)&&S(w[g],g,w)!==!1;);return p}}return gw=i,gw}var mw,SL;function vC(){if(SL)return mw;SL=1;var o=mC(),i=SK(),l=i(o);return mw=l,mw}var vw,wL;function wK(){if(wL)return vw;wL=1;var o=vC();function i(l,d){var p=[];return o(l,function(S,b,g){d(S,b,g)&&p.push(S)}),p}return vw=i,vw}var yw,AL;function AK(){if(AL)return yw;AL=1;var o=oE();function i(){this.__data__=new o,this.size=0}return yw=i,yw}var Ew,IL;function IK(){if(IL)return Ew;IL=1;function o(i){var l=this.__data__,d=l.delete(i);return this.size=l.size,d}return Ew=o,Ew}var _w,bL;function bK(){if(bL)return _w;bL=1;function o(i){return this.__data__.get(i)}return _w=o,_w}var Tw,CL;function CK(){if(CL)return Tw;CL=1;function o(i){return this.__data__.has(i)}return Tw=o,Tw}var Sw,RL;function RK(){if(RL)return Sw;RL=1;var o=oE(),i=uC(),l=lC(),d=200;function p(S,b){var g=this.__data__;if(g instanceof o){var w=g.__data__;if(!i||w.length<d-1)return w.push([S,b]),this.size=++g.size,this;g=this.__data__=new l(w)}return g.set(S,b),this.size=g.size,this}return Sw=p,Sw}var ww,NL;function s4(){if(NL)return ww;NL=1;var o=oE(),i=AK(),l=IK(),d=bK(),p=CK(),S=RK();function b(g){var w=this.__data__=new o(g);this.size=w.size}return b.prototype.clear=i,b.prototype.delete=l,b.prototype.get=d,b.prototype.has=p,b.prototype.set=S,ww=b,ww}var Aw,xL;function NK(){if(xL)return Aw;xL=1;function o(i,l){for(var d=-1,p=i==null?0:i.length;++d<p;)if(l(i[d],d,i))return!0;return!1}return Aw=o,Aw}var Iw,ML;function u4(){if(ML)return Iw;ML=1;var o=JU(),i=NK(),l=e4(),d=1,p=2;function S(b,g,w,F,R,y){var v=w&d,D=b.length,m=g.length;if(D!=m&&!(v&&m>D))return!1;var T=y.get(b),U=y.get(g);if(T&&U)return T==g&&U==b;var x=-1,_=!0,I=w&p?new o:void 0;for(y.set(b,g),y.set(g,b);++x<D;){var C=b[x],j=g[x];if(F)var z=v?F(j,C,x,g,b,y):F(C,j,x,b,g,y);if(z!==void 0){if(z)continue;_=!1;break}if(I){if(!i(g,function($,W){if(!l(I,W)&&(C===$||R(C,$,w,F,y)))return I.push(W)})){_=!1;break}}else if(!(C===j||R(C,j,w,F,y))){_=!1;break}}return y.delete(b),y.delete(g),_}return Iw=S,Iw}var bw,DL;function xK(){if(DL)return bw;DL=1;var o=Mu(),i=o.Uint8Array;return bw=i,bw}var Cw,PL;function MK(){if(PL)return Cw;PL=1;function o(i){var l=-1,d=Array(i.size);return i.forEach(function(p,S){d[++l]=[S,p]}),d}return Cw=o,Cw}var Rw,OL;function DK(){if(OL)return Rw;OL=1;function o(i){var l=-1,d=Array(i.size);return i.forEach(function(p){d[++l]=p}),d}return Rw=o,Rw}var Nw,LL;function PK(){if(LL)return Nw;LL=1;var o=Xg(),i=xK(),l=sC(),d=u4(),p=MK(),S=DK(),b=1,g=2,w="[object Boolean]",F="[object Date]",R="[object Error]",y="[object Map]",v="[object Number]",D="[object RegExp]",m="[object Set]",T="[object String]",U="[object Symbol]",x="[object ArrayBuffer]",_="[object DataView]",I=o?o.prototype:void 0,C=I?I.valueOf:void 0;function j(z,$,W,ue,N,X,ce){switch(W){case _:if(z.byteLength!=$.byteLength||z.byteOffset!=$.byteOffset)return!1;z=z.buffer,$=$.buffer;case x:return!(z.byteLength!=$.byteLength||!X(new i(z),new i($)));case w:case F:case v:return l(+z,+$);case R:return z.name==$.name&&z.message==$.message;case D:case T:return z==$+"";case y:var oe=p;case m:var de=ue&b;if(oe||(oe=S),z.size!=$.size&&!de)return!1;var Ce=ce.get(z);if(Ce)return Ce==$;ue|=g,ce.set(z,$);var Je=d(oe(z),oe($),ue,N,X,ce);return ce.delete(z),Je;case U:if(C)return C.call(z)==C.call($)}return!1}return Nw=j,Nw}var xw,kL;function OK(){if(kL)return xw;kL=1;var o=t4(),i=xs();function l(d,p,S){var b=p(d);return i(d)?b:o(b,S(d))}return xw=l,xw}var Mw,FL;function LK(){if(FL)return Mw;FL=1;function o(){return[]}return Mw=o,Mw}var Dw,UL;function kK(){if(UL)return Dw;UL=1;var o=i4(),i=LK(),l=Object.prototype,d=l.propertyIsEnumerable,p=Object.getOwnPropertySymbols,S=p?function(b){return b==null?[]:(b=Object(b),o(p(b),function(g){return d.call(b,g)}))}:i;return Dw=S,Dw}var Pw,BL;function FK(){if(BL)return Pw;BL=1;var o=OK(),i=kK(),l=gC();function d(p){return o(p,l,i)}return Pw=d,Pw}var Ow,jL;function UK(){if(jL)return Ow;jL=1;var o=FK(),i=1,l=Object.prototype,d=l.hasOwnProperty;function p(S,b,g,w,F,R){var y=g&i,v=o(S),D=v.length,m=o(b),T=m.length;if(D!=T&&!y)return!1;for(var U=D;U--;){var x=v[U];if(!(y?x in b:d.call(b,x)))return!1}var _=R.get(S),I=R.get(b);if(_&&I)return _==b&&I==S;var C=!0;R.set(S,b),R.set(b,S);for(var j=y;++U<D;){x=v[U];var z=S[x],$=b[x];if(w)var W=y?w($,z,x,b,S,R):w(z,$,x,S,b,R);if(!(W===void 0?z===$||F(z,$,g,w,R):W)){C=!1;break}j||(j=x=="constructor")}if(C&&!j){var ue=S.constructor,N=b.constructor;ue!=N&&"constructor"in S&&"constructor"in b&&!(typeof ue=="function"&&ue instanceof ue&&typeof N=="function"&&N instanceof N)&&(C=!1)}return R.delete(S),R.delete(b),C}return Ow=p,Ow}var Lw,ZL;function BK(){if(ZL)return Lw;ZL=1;var o=Af(),i=Mu(),l=o(i,"DataView");return Lw=l,Lw}var kw,GL;function jK(){if(GL)return kw;GL=1;var o=Af(),i=Mu(),l=o(i,"Promise");return kw=l,kw}var Fw,qL;function ZK(){if(qL)return Fw;qL=1;var o=Af(),i=Mu(),l=o(i,"Set");return Fw=l,Fw}var Uw,HL;function GK(){if(HL)return Uw;HL=1;var o=Af(),i=Mu(),l=o(i,"WeakMap");return Uw=l,Uw}var Bw,KL;function qK(){if(KL)return Bw;KL=1;var o=BK(),i=uC(),l=jK(),d=ZK(),p=GK(),S=Qg(),b=QU(),g="[object Map]",w="[object Object]",F="[object Promise]",R="[object Set]",y="[object WeakMap]",v="[object DataView]",D=b(o),m=b(i),T=b(l),U=b(d),x=b(p),_=S;return(o&&_(new o(new ArrayBuffer(1)))!=v||i&&_(new i)!=g||l&&_(l.resolve())!=F||d&&_(new d)!=R||p&&_(new p)!=y)&&(_=function(I){var C=S(I),j=C==w?I.constructor:void 0,z=j?b(j):"";if(z)switch(z){case D:return v;case m:return g;case T:return F;case U:return R;case x:return y}return C}),Bw=_,Bw}var jw,VL;function HK(){if(VL)return jw;VL=1;var o=s4(),i=u4(),l=PK(),d=UK(),p=qK(),S=xs(),b=o4(),g=a4(),w=1,F="[object Arguments]",R="[object Array]",y="[object Object]",v=Object.prototype,D=v.hasOwnProperty;function m(T,U,x,_,I,C){var j=S(T),z=S(U),$=j?R:p(T),W=z?R:p(U);$=$==F?y:$,W=W==F?y:W;var ue=$==y,N=W==y,X=$==W;if(X&&b(T)){if(!b(U))return!1;j=!0,ue=!1}if(X&&!ue)return C||(C=new o),j||g(T)?i(T,U,x,_,I,C):l(T,U,$,x,_,I,C);if(!(x&w)){var ce=ue&&D.call(T,"__wrapped__"),oe=N&&D.call(U,"__wrapped__");if(ce||oe){var de=ce?T.value():T,Ce=oe?U.value():U;return C||(C=new o),I(de,Ce,x,_,C)}}return X?(C||(C=new o),d(T,U,x,_,I,C)):!1}return jw=m,jw}var Zw,zL;function l4(){if(zL)return Zw;zL=1;var o=HK(),i=wh();function l(d,p,S,b,g){return d===p?!0:d==null||p==null||!i(d)&&!i(p)?d!==d&&p!==p:o(d,p,S,b,l,g)}return Zw=l,Zw}var Gw,YL;function KK(){if(YL)return Gw;YL=1;var o=s4(),i=l4(),l=1,d=2;function p(S,b,g,w){var F=g.length,R=F,y=!w;if(S==null)return!R;for(S=Object(S);F--;){var v=g[F];if(y&&v[2]?v[1]!==S[v[0]]:!(v[0]in S))return!1}for(;++F<R;){v=g[F];var D=v[0],m=S[D],T=v[1];if(y&&v[2]){if(m===void 0&&!(D in S))return!1}else{var U=new o;if(w)var x=w(m,T,D,S,b,U);if(!(x===void 0?i(T,m,l|d,w,U):x))return!1}}return!0}return Gw=p,Gw}var qw,WL;function c4(){if(WL)return qw;WL=1;var o=wf();function i(l){return l===l&&!o(l)}return qw=i,qw}var Hw,$L;function VK(){if($L)return Hw;$L=1;var o=c4(),i=gC();function l(d){for(var p=i(d),S=p.length;S--;){var b=p[S],g=d[b];p[S]=[b,g,o(g)]}return p}return Hw=l,Hw}var Kw,XL;function f4(){if(XL)return Kw;XL=1;function o(i,l){return function(d){return d==null?!1:d[i]===l&&(l!==void 0||i in Object(d))}}return Kw=o,Kw}var Vw,QL;function zK(){if(QL)return Vw;QL=1;var o=KK(),i=VK(),l=f4();function d(p){var S=i(p);return S.length==1&&S[0][2]?l(S[0][0],S[0][1]):function(b){return b===p||o(b,p,S)}}return Vw=d,Vw}var zw,JL;function yC(){if(JL)return zw;JL=1;var o=xs(),i=Jg(),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function p(S,b){if(o(S))return!1;var g=typeof S;return g=="number"||g=="symbol"||g=="boolean"||S==null||i(S)?!0:d.test(S)||!l.test(S)||b!=null&&S in Object(b)}return zw=p,zw}var Yw,ek;function YK(){if(ek)return Yw;ek=1;var o=lC(),i="Expected a function";function l(d,p){if(typeof d!="function"||p!=null&&typeof p!="function")throw new TypeError(i);var S=function(){var b=arguments,g=p?p.apply(this,b):b[0],w=S.cache;if(w.has(g))return w.get(g);var F=d.apply(this,b);return S.cache=w.set(g,F)||w,F};return S.cache=new(l.Cache||o),S}return l.Cache=o,Yw=l,Yw}var Ww,tk;function WK(){if(tk)return Ww;tk=1;var o=YK(),i=500;function l(d){var p=o(d,function(b){return S.size===i&&S.clear(),b}),S=p.cache;return p}return Ww=l,Ww}var $w,nk;function $K(){if(nk)return $w;nk=1;var o=WK(),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,d=o(function(p){var S=[];return p.charCodeAt(0)===46&&S.push(""),p.replace(i,function(b,g,w,F){S.push(w?F.replace(l,"$1"):g||b)}),S});return $w=d,$w}var Xw,rk;function XK(){if(rk)return Xw;rk=1;var o=Xg(),i=cC(),l=xs(),d=Jg(),p=1/0,S=o?o.prototype:void 0,b=S?S.toString:void 0;function g(w){if(typeof w=="string")return w;if(l(w))return i(w,g)+"";if(d(w))return b?b.call(w):"";var F=w+"";return F=="0"&&1/w==-p?"-0":F}return Xw=g,Xw}var Qw,ik;function d4(){if(ik)return Qw;ik=1;var o=XK();function i(l){return l==null?"":o(l)}return Qw=i,Qw}var Jw,ok;function h4(){if(ok)return Jw;ok=1;var o=xs(),i=yC(),l=$K(),d=d4();function p(S,b){return o(S)?S:i(S,b)?[S]:l(d(S))}return Jw=p,Jw}var eA,ak;function sE(){if(ak)return eA;ak=1;var o=Jg(),i=1/0;function l(d){if(typeof d=="string"||o(d))return d;var p=d+"";return p=="0"&&1/d==-i?"-0":p}return eA=l,eA}var tA,sk;function EC(){if(sk)return tA;sk=1;var o=h4(),i=sE();function l(d,p){p=o(p,d);for(var S=0,b=p.length;d!=null&&S<b;)d=d[i(p[S++])];return S&&S==b?d:void 0}return tA=l,tA}var nA,uk;function QK(){if(uk)return nA;uk=1;var o=EC();function i(l,d,p){var S=l==null?void 0:o(l,d);return S===void 0?p:S}return nA=i,nA}var rA,lk;function JK(){if(lk)return rA;lk=1;function o(i,l){return i!=null&&l in Object(i)}return rA=o,rA}var iA,ck;function eV(){if(ck)return iA;ck=1;var o=h4(),i=dC(),l=xs(),d=pC(),p=hC(),S=sE();function b(g,w,F){w=o(w,g);for(var R=-1,y=w.length,v=!1;++R<y;){var D=S(w[R]);if(!(v=g!=null&&F(g,D)))break;g=g[D]}return v||++R!=y?v:(y=g==null?0:g.length,!!y&&p(y)&&d(D,y)&&(l(g)||i(g)))}return iA=b,iA}var oA,fk;function tV(){if(fk)return oA;fk=1;var o=JK(),i=eV();function l(d,p){return d!=null&&i(d,p,o)}return oA=l,oA}var aA,dk;function nV(){if(dk)return aA;dk=1;var o=l4(),i=QK(),l=tV(),d=yC(),p=c4(),S=f4(),b=sE(),g=1,w=2;function F(R,y){return d(R)&&p(y)?S(b(R),y):function(v){var D=i(v,R);return D===void 0&&D===y?l(v,R):o(y,D,g|w)}}return aA=F,aA}var sA,hk;function rV(){if(hk)return sA;hk=1;function o(i){return function(l){return l==null?void 0:l[i]}}return sA=o,sA}var uA,pk;function iV(){if(pk)return uA;pk=1;var o=EC();function i(l){return function(d){return o(d,l)}}return uA=i,uA}var lA,gk;function oV(){if(gk)return lA;gk=1;var o=rV(),i=iV(),l=yC(),d=sE();function p(S){return l(S)?o(d(S)):i(S)}return lA=p,lA}var cA,mk;function _C(){if(mk)return cA;mk=1;var o=zK(),i=nV(),l=em(),d=xs(),p=oV();function S(b){return typeof b=="function"?b:b==null?l:typeof b=="object"?d(b)?i(b[0],b[1]):o(b):p(b)}return cA=S,cA}var fA,vk;function aV(){if(vk)return fA;vk=1;var o=i4(),i=wK(),l=_C(),d=xs();function p(S,b){var g=d(S)?o:i;return g(S,l(b,3))}return fA=p,fA}var dA,yk;function sV(){if(yk)return dA;yk=1;function o(i,l,d){var p;return d(i,function(S,b,g){if(l(S,b,g))return p=b,!1}),p}return dA=o,dA}var hA,Ek;function uV(){if(Ek)return hA;Ek=1;var o=sV(),i=mC(),l=_C();function d(p,S){return o(p,l(S,3),i)}return hA=d,hA}var pA,_k;function lV(){if(_k)return pA;_k=1;function o(i){return i&&i.length?i[0]:void 0}return pA=o,pA}var gA,Tk;function cV(){return Tk||(Tk=1,gA=lV()),gA}var mA,Sk;function fV(){if(Sk)return mA;Sk=1;function o(i,l){for(var d=-1,p=i==null?0:i.length;++d<p&&l(i[d],d,i)!==!1;);return i}return mA=o,mA}var vA,wk;function p4(){if(wk)return vA;wk=1;var o=em();function i(l){return typeof l=="function"?l:o}return vA=i,vA}var yA,Ak;function dV(){if(Ak)return yA;Ak=1;var o=fV(),i=vC(),l=p4(),d=xs();function p(S,b){var g=d(S)?o:i;return g(S,l(b))}return yA=p,yA}var EA,Ik;function hV(){if(Ik)return EA;Ik=1;var o=mC(),i=p4();function l(d,p){return d&&o(d,i(p))}return EA=l,EA}var _A,bk;function pV(){if(bk)return _A;bk=1;function o(){}return _A=o,_A}var TA,Ck;function gV(){if(Ck)return TA;Ck=1;var o=vC(),i=tm();function l(d,p){var S=-1,b=i(d)?Array(d.length):[];return o(d,function(g,w,F){b[++S]=p(g,w,F)}),b}return TA=l,TA}var SA,Rk;function mV(){if(Rk)return SA;Rk=1;function o(i,l){var d=i.length;for(i.sort(l);d--;)i[d]=i[d].value;return i}return SA=o,SA}var wA,Nk;function vV(){if(Nk)return wA;Nk=1;var o=Jg();function i(l,d){if(l!==d){var p=l!==void 0,S=l===null,b=l===l,g=o(l),w=d!==void 0,F=d===null,R=d===d,y=o(d);if(!F&&!y&&!g&&l>d||g&&w&&R&&!F&&!y||S&&w&&R||!p&&R||!b)return 1;if(!S&&!g&&!y&&l<d||y&&p&&b&&!S&&!g||F&&p&&b||!w&&b||!R)return-1}return 0}return wA=i,wA}var AA,xk;function yV(){if(xk)return AA;xk=1;var o=vV();function i(l,d,p){for(var S=-1,b=l.criteria,g=d.criteria,w=b.length,F=p.length;++S<w;){var R=o(b[S],g[S]);if(R){if(S>=F)return R;var y=p[S];return R*(y=="desc"?-1:1)}}return l.index-d.index}return AA=i,AA}var IA,Mk;function EV(){if(Mk)return IA;Mk=1;var o=cC(),i=EC(),l=_C(),d=gV(),p=mV(),S=fC(),b=yV(),g=em(),w=xs();function F(R,y,v){y.length?y=o(y,function(T){return w(T)?function(U){return i(U,T.length===1?T[0]:T)}:T}):y=[g];var D=-1;y=o(y,S(l));var m=d(R,function(T,U,x){var _=o(y,function(I){return I(T)});return{criteria:_,index:++D,value:T}});return p(m,function(T,U){return b(T,U,v)})}return IA=F,IA}var bA,Dk;function _V(){if(Dk)return bA;Dk=1;var o=sC(),i=tm(),l=pC(),d=wf();function p(S,b,g){if(!d(g))return!1;var w=typeof b;return(w=="number"?i(g)&&l(b,g.length):w=="string"&&b in g)?o(g[b],S):!1}return bA=p,bA}var CA,Pk;function TV(){if(Pk)return CA;Pk=1;var o=n4(),i=EV(),l=r4(),d=_V(),p=l(function(S,b){if(S==null)return[];var g=b.length;return g>1&&d(S,b[0],b[1])?b=[]:g>2&&d(b[0],b[1],b[2])&&(b=[b[0]]),i(S,o(b,1),[])});return CA=p,CA}var RA,Ok;function SV(){if(Ok)return RA;Ok=1;var o=$U(),i=wf(),l="Expected a function";function d(p,S,b){var g=!0,w=!0;if(typeof p!="function")throw new TypeError(l);return i(b)&&(g="leading"in b?!!b.leading:g,w="trailing"in b?!!b.trailing:w),o(p,S,{leading:g,maxWait:S,trailing:w})}return RA=d,RA}var NA,Lk;function wV(){if(Lk)return NA;Lk=1;var o=d4(),i=0;function l(d){var p=++i;return o(d)+p}return NA=l,NA}(function(o,i){(function(l,d){o.exports=d($U(),cK(),aV(),uV(),cV(),dV(),hV(),pV(),TV(),SV(),wV(),Z0())})(tu,function(l,d,p,S,b,g,w,F,R,y,v,D){return function(){var m={654:function(U,x,_){var I,C=this&&this.__assign||function(){return C=Object.assign||function(Re){for(var re,Be=1,O=arguments.length;Be<O;Be++)for(var M in re=arguments[Be])Object.prototype.hasOwnProperty.call(re,M)&&(Re[M]=re[M]);return Re},C.apply(this,arguments)},j=this&&this.__createBinding||(Object.create?function(Re,re,Be,O){O===void 0&&(O=Be);var M=Object.getOwnPropertyDescriptor(re,Be);M&&!("get"in M?!re.__esModule:M.writable||M.configurable)||(M={enumerable:!0,get:function(){return re[Be]}}),Object.defineProperty(Re,O,M)}:function(Re,re,Be,O){O===void 0&&(O=Be),Re[O]=re[Be]}),z=this&&this.__setModuleDefault||(Object.create?function(Re,re){Object.defineProperty(Re,"default",{enumerable:!0,value:re})}:function(Re,re){Re.default=re}),$=this&&this.__importStar||function(Re){if(Re&&Re.__esModule)return Re;var re={};if(Re!=null)for(var Be in Re)Be!=="default"&&Object.prototype.hasOwnProperty.call(Re,Be)&&j(re,Re,Be);return z(re,Re),re},W=this&&this.__spreadArray||function(Re,re,Be){if(Be||arguments.length===2)for(var O,M=0,q=re.length;M<q;M++)!O&&M in re||(O||(O=Array.prototype.slice.call(re,0,M)),O[M]=re[M]);return Re.concat(O||Array.prototype.slice.call(re))},ue=this&&this.__importDefault||function(Re){return Re&&Re.__esModule?Re:{default:Re}};Object.defineProperty(x,"__esModule",{value:!0}),x.doesFocusableExist=x.getCurrentFocusKey=x.updateAllLayouts=x.resume=x.pause=x.navigateByDirection=x.setFocus=x.setKeyMap=x.destroy=x.setThrottle=x.init=x.SpatialNavigation=x.ROOT_FOCUS_KEY=void 0;var N=ue(_(150)),X=ue(_(117)),ce=ue(_(747)),oe=ue(_(23)),de=ue(_(842)),Ce=ue(_(682)),Je=ue(_(784)),Te=ue(_(432)),je=ue(_(67)),nt=ue(_(35)),ct=ue(_(119)),Ie=$(_(964)),Ye="left",mt="right",xe="up",We="down",it="enter",qt=((I={}).left=[37,"ArrowLeft"],I.up=[38,"ArrowUp"],I.right=[39,"ArrowRight"],I.down=[40,"ArrowDown"],I.enter=[13,"Enter"],I);x.ROOT_FOCUS_KEY="SN:ROOT";var Ft=["#0FF","#FF0","#F0F"],gt={leading:!0,trailing:!1},St=function(){function Re(){this.focusableComponents={},this.focusKey=null,this.parentsHavingFocusedChild=[],this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.useGetBoundingClientRect=!1,this.shouldFocusDOMNode=!1,this.shouldUseNativeEvents=!1,this.writingDirection=ct.default.LTR,this.pressedKeys={},this.paused=!1,this.keyDownEventListener=null,this.keyUpEventListener=null,this.keyMap=qt,this.onKeyEvent=this.onKeyEvent.bind(this),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.setFocus=this.setFocus.bind(this),this.updateAllLayouts=this.updateAllLayouts.bind(this),this.navigateByDirection=this.navigateByDirection.bind(this),this.init=this.init.bind(this),this.setThrottle=this.setThrottle.bind(this),this.destroy=this.destroy.bind(this),this.setKeyMap=this.setKeyMap.bind(this),this.getCurrentFocusKey=this.getCurrentFocusKey.bind(this),this.doesFocusableExist=this.doesFocusableExist.bind(this),this.setFocusDebounced=(0,N.default)(this.setFocus,300,{leading:!1,trailing:!0}),this.debug=!1,this.visualDebugger=null,this.logIndex=0}return Re.getCutoffCoordinate=function(re,Be,O,M,q){var K=re?M.top:q===ct.default.LTR?M.left:M.right,ye=re?M.bottom:q===ct.default.LTR?M.right:M.left;return Be?O?K:ye:O?ye:K},Re.getRefCorners=function(re,Be,O){var M={a:{x:0,y:0},b:{x:0,y:0}};switch(re){case xe:var q=Be?O.bottom:O.top;M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case We:q=Be?O.top:O.bottom,M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case Ye:var K=Be?O.right:O.left;M.a={x:K,y:O.top},M.b={x:K,y:O.bottom};break;case mt:K=Be?O.left:O.right,M.a={x:K,y:O.top},M.b={x:K,y:O.bottom}}return M},Re.isAdjacentSlice=function(re,Be,O){var M=re.a,q=re.b,K=Be.a,ye=Be.b,he=O?"x":"y",Ke=M[he],wt=q[he],st=K[he],at=ye[he],tt=.2*(wt-Ke);return Math.max(0,Math.min(wt,at)-Math.max(Ke,st))>=tt},Re.getPrimaryAxisDistance=function(re,Be,O){var M=re.a,q=Be.a,K=O?"y":"x";return Math.abs(q[K]-M[K])},Re.getSecondaryAxisDistance=function(re,Be,O){var M=re.a,q=re.b,K=Be.a,ye=Be.b,he=O?"x":"y",Ke=M[he],wt=q[he],st=K[he],at=ye[he],tt=[];return tt.push(Math.abs(st-Ke)),tt.push(Math.abs(st-wt)),tt.push(Math.abs(at-Ke)),tt.push(Math.abs(at-wt)),Math.min.apply(Math,tt)},Re.prototype.sortSiblingsByPriority=function(re,Be,O,M){var q=this,K=O===We||O===xe,ye=Re.getRefCorners(O,!1,Be);return(0,Te.default)(re,function(he){var Ke=Re.getRefCorners(O,!0,he.layout),wt=Re.isAdjacentSlice(ye,Ke,K),st=wt?Re.getPrimaryAxisDistance:Re.getSecondaryAxisDistance,at=wt?Re.getSecondaryAxisDistance:Re.getPrimaryAxisDistance,tt=st(ye,Ke,K),ft=at(ye,Ke,K),Et=5*tt+ft,Tt=(Et+1)/(wt?5:1);return q.log("smartNavigate","distance (primary, secondary, total weighted) for ".concat(he.focusKey," relative to ").concat(M," is"),tt,ft,Et),q.log("smartNavigate","priority for ".concat(he.focusKey," relative to ").concat(M," is"),Tt),q.visualDebugger&&(q.visualDebugger.drawPoint(Ke.a.x,Ke.a.y,"yellow",6),q.visualDebugger.drawPoint(Ke.b.x,Ke.b.y,"yellow",6)),Tt})},Re.prototype.init=function(re){var Be=re===void 0?{}:re,O=Be.debug,M=O!==void 0&&O,q=Be.visualDebug,K=q!==void 0&&q,ye=Be.nativeMode,he=ye!==void 0&&ye,Ke=Be.throttle,wt=Ke===void 0?0:Ke,st=Be.throttleKeypresses,at=st!==void 0&&st,tt=Be.useGetBoundingClientRect,ft=tt!==void 0&&tt,Et=Be.shouldFocusDOMNode,Tt=Et!==void 0&&Et,Ct=Be.shouldUseNativeEvents,hn=Ct!==void 0&&Ct,Qt=Be.rtl,nn=Qt!==void 0&&Qt;this.enabled||(this.enabled=!0,this.nativeMode=he,this.throttleKeypresses=at,this.useGetBoundingClientRect=ft,this.shouldFocusDOMNode=Tt&&!he,this.shouldUseNativeEvents=hn,this.writingDirection=nn?ct.default.RTL:ct.default.LTR,this.debug=M,this.nativeMode||(Number.isInteger(wt)&&wt>0&&(this.throttle=wt),this.bindEventHandlers(),K&&(this.visualDebugger=new nt.default(this.writingDirection),this.startDrawLayouts())))},Re.prototype.setThrottle=function(re){var Be=re===void 0?{}:re,O=Be.throttle,M=O===void 0?0:O,q=Be.throttleKeypresses,K=q!==void 0&&q;this.throttleKeypresses=K,this.nativeMode||(this.unbindEventHandlers(),Number.isInteger(M)&&(this.throttle=M),this.bindEventHandlers())},Re.prototype.startDrawLayouts=function(){var re=this,Be=function(){requestAnimationFrame(function(){re.visualDebugger.clearLayouts(),(0,Je.default)(re.focusableComponents,function(O,M){re.visualDebugger.drawLayout(O.layout,M,O.parentFocusKey)}),Be()})};Be()},Re.prototype.destroy=function(){this.enabled&&(this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.focusKey=null,this.parentsHavingFocusedChild=[],this.focusableComponents={},this.paused=!1,this.keyMap=qt,this.unbindEventHandlers())},Re.prototype.getEventType=function(re){return(0,oe.default)(this.getKeyMap(),function(Be){return Be.includes(re)})},Re.getKeyCode=function(re){return re.keyCode||re.code},Re.prototype.bindEventHandlers=function(){var re=this;typeof window<"u"&&window.addEventListener&&(this.keyDownEventListener=function(Be){if(re.paused!==!0){re.debug&&(re.logIndex+=1);var O=Re.getKeyCode(Be),M=re.getEventType(O);if(M){re.pressedKeys[M]=re.pressedKeys[M]?re.pressedKeys[M]+1:1,re.shouldUseNativeEvents||(Be.preventDefault(),Be.stopPropagation());var q={pressedKeys:re.pressedKeys};M===it&&re.focusKey?re.onEnterPress(q):re.onArrowPress(M,q)===!1?(re.log("keyDownEventListener","default navigation prevented"),re.visualDebugger&&re.visualDebugger.clear()):re.onKeyEvent(Be)}}},this.throttle&&(this.keyDownEventListenerThrottled=(0,je.default)(this.keyDownEventListener.bind(this),this.throttle,gt)),this.keyUpEventListener=function(Be){var O=Re.getKeyCode(Be),M=re.getEventType(O);delete re.pressedKeys[M],re.throttle&&!re.throttleKeypresses&&re.keyDownEventListenerThrottled.cancel(),M===it&&re.focusKey&&re.onEnterRelease()},window.addEventListener("keyup",this.keyUpEventListener),window.addEventListener("keydown",this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener))},Re.prototype.unbindEventHandlers=function(){if(typeof window<"u"&&window.removeEventListener){window.removeEventListener("keyup",this.keyUpEventListener),this.keyUpEventListener=null;var re=this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener;window.removeEventListener("keydown",re),this.keyDownEventListener=null}},Re.prototype.onEnterPress=function(re){var Be=this.focusableComponents[this.focusKey];Be?Be.focusable?Be.onEnterPress&&Be.onEnterPress(re):this.log("onEnterPress","componentNotFocusable"):this.log("onEnterPress","noComponent")},Re.prototype.onEnterRelease=function(){var re=this.focusableComponents[this.focusKey];re?re.focusable?re.onEnterRelease&&re.onEnterRelease():this.log("onEnterRelease","componentNotFocusable"):this.log("onEnterRelease","noComponent")},Re.prototype.onArrowPress=function(re,Be){var O=this.focusableComponents[this.focusKey];if(O)return O&&O.onArrowPress&&O.onArrowPress(re,Be);this.log("onArrowPress","noComponent")},Re.prototype.navigateByDirection=function(re,Be){if(this.paused!==!0&&this.enabled&&!this.nativeMode){var O=[We,xe,Ye,mt];O.includes(re)?(this.log("navigateByDirection","direction",re),this.smartNavigate(re,null,Be)):this.log("navigateByDirection","Invalid direction. You passed: `".concat(re,"`, but you can use only these: "),O)}},Re.prototype.onKeyEvent=function(re){this.visualDebugger&&this.visualDebugger.clear();var Be=Re.getKeyCode(re),O=(0,oe.default)(this.getKeyMap(),function(M){return M.includes(Be)});this.smartNavigate(O,null,{event:re})},Re.prototype.smartNavigate=function(re,Be,O){var M=this;if(!this.nativeMode){var q=re===We||re===xe,K=re===We||(this.writingDirection===ct.default.LTR?re===mt:re===Ye);this.log("smartNavigate","direction",re),this.log("smartNavigate","fromParentFocusKey",Be),this.log("smartNavigate","this.focusKey",this.focusKey),Be||(0,Je.default)(this.focusableComponents,function(hn){hn.layoutUpdated=!1});var ye=this.focusableComponents[Be||this.focusKey];if(Be||ye){if(this.log("smartNavigate","currentComponent",ye?ye.focusKey:void 0,ye?ye.node:void 0,ye),ye){this.updateLayout(ye.focusKey);var he=ye.parentFocusKey,Ke=ye.focusKey,wt=ye.layout,st=Re.getCutoffCoordinate(q,K,!1,wt,this.writingDirection),at=(0,ce.default)(this.focusableComponents,function(hn){if(hn.parentFocusKey===he&&hn.focusable){M.updateLayout(hn.focusKey);var Qt=Re.getCutoffCoordinate(q,K,!0,hn.layout,M.writingDirection);return q||M.writingDirection===ct.default.LTR?K?Qt>=st:Qt<=st:K?Qt<=st:Qt>=st}return!1});if(this.debug&&(this.log("smartNavigate","currentCutoffCoordinate",st),this.log("smartNavigate","siblings","".concat(at.length," elements:"),at.map(function(hn){return hn.focusKey}).join(", "),at.map(function(hn){return hn.node}),at.map(function(hn){return hn}))),this.visualDebugger){var tt=Re.getRefCorners(re,!1,wt);this.visualDebugger.drawPoint(tt.a.x,tt.a.y),this.visualDebugger.drawPoint(tt.b.x,tt.b.y)}var ft=this.sortSiblingsByPriority(at,wt,re,Ke),Et=(0,de.default)(ft);if(this.log("smartNavigate","nextComponent",Et?Et.focusKey:void 0,Et?Et.node:void 0,Et),Et)this.setFocus(Et.focusKey,O);else{var Tt=this.focusableComponents[he],Ct=Tt!=null&&Tt.isFocusBoundary?Tt.focusBoundaryDirections||[re]:[];Tt&&Ct.includes(re)||this.smartNavigate(re,he,O)}}}else this.setFocus(this.getForcedFocusKey())}},Re.prototype.saveLastFocusedChildKey=function(re,Be){re&&(this.log("saveLastFocusedChildKey","".concat(re.focusKey," lastFocusedChildKey set"),Be),re.lastFocusedChildKey=Be)},Re.prototype.log=function(re,Be){for(var O=[],M=2;M<arguments.length;M++)O[M-2]=arguments[M];this.debug&&console.log.apply(console,W(["%c".concat(re,"%c").concat(Be),"background: ".concat(Ft[this.logIndex%Ft.length],"; color: black; padding: 1px 5px;"),"background: #333; color: #BADA55; padding: 1px 5px;"],O,!1))},Re.prototype.getCurrentFocusKey=function(){return this.focusKey},Re.prototype.getForcedFocusKey=function(){var re,Be=(0,ce.default)(this.focusableComponents,function(M){return M.focusable&&M.forceFocus}),O=this.sortSiblingsByPriority(Be,{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:null},"down",x.ROOT_FOCUS_KEY);return(re=(0,de.default)(O))===null||re===void 0?void 0:re.focusKey},Re.prototype.getNextFocusKey=function(re){var Be=this,O=this.focusableComponents[re];if(!O||this.nativeMode)return re;var M=(0,ce.default)(this.focusableComponents,function(he){return he.parentFocusKey===re&&he.focusable});if(M.length>0){var q=O.lastFocusedChildKey,K=O.preferredChildFocusKey;if(this.log("getNextFocusKey","lastFocusedChildKey is",q),this.log("getNextFocusKey","preferredChildFocusKey is",K),q&&O.saveLastFocusedChild&&this.isParticipatingFocusableComponent(q))return this.log("getNextFocusKey","lastFocusedChildKey will be focused",q),this.getNextFocusKey(q);if(K&&this.isParticipatingFocusableComponent(K))return this.log("getNextFocusKey","preferredChildFocusKey will be focused",K),this.getNextFocusKey(K);M.forEach(function(he){return Be.updateLayout(he.focusKey)});var ye=function(he,Ke){var wt=Ke===ct.default.LTR?function(at){var tt=at.layout;return Math.abs(tt.left)+Math.abs(tt.top)}:function(at){var tt=at.layout;return Math.abs(window.innerWidth-tt.right)+Math.abs(tt.top)},st=(0,Te.default)(he,wt);return(0,de.default)(st)}(M,this.writingDirection).focusKey;return this.log("getNextFocusKey","childKey will be focused",ye),this.getNextFocusKey(ye)}return this.log("getNextFocusKey","targetFocusKey",re),re},Re.prototype.addFocusable=function(re){var Be=re.focusKey,O=re.node,M=re.parentFocusKey,q=re.onEnterPress,K=re.onEnterRelease,ye=re.onArrowPress,he=re.onFocus,Ke=re.onBlur,wt=re.saveLastFocusedChild,st=re.trackChildren,at=re.onUpdateFocus,tt=re.onUpdateHasFocusedChild,ft=re.preferredChildFocusKey,Et=re.autoRestoreFocus,Tt=re.forceFocus,Ct=re.focusable,hn=re.isFocusBoundary,Qt=re.focusBoundaryDirections;if(this.focusableComponents[Be]={focusKey:Be,node:O,parentFocusKey:M,onEnterPress:q,onEnterRelease:K,onArrowPress:ye,onFocus:he,onBlur:Ke,onUpdateFocus:at,onUpdateHasFocusedChild:tt,saveLastFocusedChild:wt,trackChildren:st,preferredChildFocusKey:ft,focusable:Ct,isFocusBoundary:hn,focusBoundaryDirections:Qt,autoRestoreFocus:Et,forceFocus:Tt,lastFocusedChildKey:null,layout:{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:O},layoutUpdated:!1},O||console.warn('Component added without a node reference. This will result in its coordinates being empty and may cause lost focus. Check the "ref" passed to "useFocusable": ',this.focusableComponents[Be]),!this.nativeMode){this.updateLayout(Be),this.log("addFocusable","Component added: ",this.focusableComponents[Be]),Be===this.focusKey&&this.setFocus(ft||Be);for(var nn=this.focusableComponents[this.focusKey];nn;){if(nn.parentFocusKey===Be){this.updateParentsHasFocusedChild(this.focusKey,{}),this.updateParentsLastFocusedChild(this.focusKey);break}nn=this.focusableComponents[nn.parentFocusKey]}}},Re.prototype.removeFocusable=function(re){var Be=re.focusKey,O=this.focusableComponents[Be];if(O){var M=O.parentFocusKey;(0,O.onUpdateFocus)(!1),this.log("removeFocusable","Component removed: ",O),delete this.focusableComponents[Be];var q=this.parentsHavingFocusedChild.includes(Be);this.parentsHavingFocusedChild=this.parentsHavingFocusedChild.filter(function(he){return he!==Be});var K=this.focusableComponents[M],ye=Be===this.focusKey;if(K&&K.lastFocusedChildKey===Be&&(K.lastFocusedChildKey=null),this.nativeMode)return;(ye||q)&&K&&K.autoRestoreFocus&&(this.log("removeFocusable","Component removed: ",ye?"Leaf component":"Container component","Auto restoring focus to: ",M),this.setFocusDebounced(M))}},Re.prototype.getNodeLayoutByFocusKey=function(re){var Be=this.focusableComponents[re];return Be?(this.updateLayout(Be.focusKey),Be.layout):null},Re.prototype.setCurrentFocusedKey=function(re,Be){if(this.isFocusableComponent(this.focusKey)&&re!==this.focusKey){var O=this.focusableComponents[this.focusKey];O.onUpdateFocus(!1),O.onBlur(this.getNodeLayoutByFocusKey(this.focusKey),Be),this.log("setCurrentFocusedKey","onBlur",O)}if(this.focusKey=re,this.isFocusableComponent(this.focusKey)){var M=this.focusableComponents[this.focusKey];this.shouldFocusDOMNode&&M.node&&M.node.focus(),M.onUpdateFocus(!0),M.onFocus(this.getNodeLayoutByFocusKey(this.focusKey),Be),this.log("setCurrentFocusedKey","onFocus",M)}},Re.prototype.updateParentsHasFocusedChild=function(re,Be){for(var O=this,M=[],q=this.focusableComponents[re];q;){var K=q.parentFocusKey,ye=this.focusableComponents[K];if(ye){var he=ye.focusKey;M.push(he)}q=ye}var Ke=(0,X.default)(this.parentsHavingFocusedChild,M),wt=(0,X.default)(M,this.parentsHavingFocusedChild);(0,Ce.default)(Ke,function(st){var at=O.focusableComponents[st];at&&at.trackChildren&&at.onUpdateHasFocusedChild(!1),O.onIntermediateNodeBecameBlurred(st,Be)}),(0,Ce.default)(wt,function(st){var at=O.focusableComponents[st];at&&at.trackChildren&&at.onUpdateHasFocusedChild(!0),O.onIntermediateNodeBecameFocused(st,Be)}),this.parentsHavingFocusedChild=M},Re.prototype.updateParentsLastFocusedChild=function(re){for(var Be=this.focusableComponents[re];Be;){var O=Be.parentFocusKey,M=this.focusableComponents[O];M&&this.saveLastFocusedChildKey(M,Be.focusKey),Be=M}},Re.prototype.getKeyMap=function(){return this.keyMap},Re.prototype.setKeyMap=function(re){this.keyMap=C(C({},this.getKeyMap()),function(Be){var O={};return Object.entries(Be).forEach(function(M){var q=M[0],K=M[1];O[q]=Array.isArray(K)?K:[K]}),O}(re))},Re.prototype.isFocusableComponent=function(re){return!!this.focusableComponents[re]},Re.prototype.isParticipatingFocusableComponent=function(re){return this.isFocusableComponent(re)&&this.focusableComponents[re].focusable},Re.prototype.onIntermediateNodeBecameFocused=function(re,Be){this.isParticipatingFocusableComponent(re)&&this.focusableComponents[re].onFocus(this.getNodeLayoutByFocusKey(re),Be)},Re.prototype.onIntermediateNodeBecameBlurred=function(re,Be){this.isParticipatingFocusableComponent(re)&&this.focusableComponents[re].onBlur(this.getNodeLayoutByFocusKey(re),Be)},Re.prototype.pause=function(){this.paused=!0},Re.prototype.resume=function(){this.paused=!1},Re.prototype.setFocus=function(re,Be){if(Be===void 0&&(Be={}),this.setFocusDebounced.cancel(),this.enabled&&!this.nativeMode){this.log("setFocus","focusKey",re),re&&re!==x.ROOT_FOCUS_KEY||(re=this.getForcedFocusKey());var O=this.getNextFocusKey(re);this.log("setFocus","newFocusKey",O),this.setCurrentFocusedKey(O,Be),this.updateParentsHasFocusedChild(O,Be),this.updateParentsLastFocusedChild(O)}},Re.prototype.updateAllLayouts=function(){var re=this;this.enabled&&!this.nativeMode&&(0,Je.default)(this.focusableComponents,function(Be,O){re.updateLayout(O)})},Re.prototype.updateLayout=function(re){var Be=this.focusableComponents[re];if(Be&&!this.nativeMode&&!Be.layoutUpdated){var O=Be.node,M=this.useGetBoundingClientRect?(0,Ie.getBoundingClientRect)(O):(0,Ie.default)(O);Be.layout=C(C({},M),{node:O})}},Re.prototype.updateFocusable=function(re,Be){var O=Be.node,M=Be.preferredChildFocusKey,q=Be.focusable,K=Be.isFocusBoundary,ye=Be.focusBoundaryDirections,he=Be.onEnterPress,Ke=Be.onEnterRelease,wt=Be.onArrowPress,st=Be.onFocus,at=Be.onBlur;if(!this.nativeMode){var tt=this.focusableComponents[re];tt&&(tt.preferredChildFocusKey=M,tt.focusable=q,tt.isFocusBoundary=K,tt.focusBoundaryDirections=ye,tt.onEnterPress=he,tt.onEnterRelease=Ke,tt.onArrowPress=wt,tt.onFocus=st,tt.onBlur=at,O&&(tt.node=O))}},Re.prototype.isNativeMode=function(){return this.nativeMode},Re.prototype.doesFocusableExist=function(re){return!!this.focusableComponents[re]},Re}();x.SpatialNavigation=new St,x.init=x.SpatialNavigation.init,x.setThrottle=x.SpatialNavigation.setThrottle,x.destroy=x.SpatialNavigation.destroy,x.setKeyMap=x.SpatialNavigation.setKeyMap,x.setFocus=x.SpatialNavigation.setFocus,x.navigateByDirection=x.SpatialNavigation.navigateByDirection,x.pause=x.SpatialNavigation.pause,x.resume=x.SpatialNavigation.resume,x.updateAllLayouts=x.SpatialNavigation.updateAllLayouts,x.getCurrentFocusKey=x.SpatialNavigation.getCurrentFocusKey,x.doesFocusableExist=x.SpatialNavigation.doesFocusableExist},35:function(U,x,_){var I=this&&this.__importDefault||function(ue){return ue&&ue.__esModule?ue:{default:ue}};Object.defineProperty(x,"__esModule",{value:!0});var C=I(_(119)),j=typeof window<"u"&&window.document,z=j?window.innerWidth:0,$=j?window.innerHeight:0,W=function(){function ue(N){j&&(this.debugCtx=ue.createCanvas("sn-debug","1010",N),this.layoutsCtx=ue.createCanvas("sn-layouts","1000",N),this.writingDirection=N)}return ue.createCanvas=function(N,X,ce){var oe=document.querySelector("#".concat(N))||document.createElement("canvas");oe.setAttribute("id",N),oe.setAttribute("dir",ce===C.default.LTR?"ltr":"rtl");var de=oe.getContext("2d");return oe.style.zIndex=X,oe.style.position="fixed",oe.style.top="0",oe.style.left="0",document.body.appendChild(oe),oe.width=z,oe.height=$,de},ue.prototype.clear=function(){j&&this.debugCtx.clearRect(0,0,z,$)},ue.prototype.clearLayouts=function(){j&&this.layoutsCtx.clearRect(0,0,z,$)},ue.prototype.drawLayout=function(N,X,ce){if(j){this.layoutsCtx.strokeStyle="green",this.layoutsCtx.strokeRect(N.left,N.top,N.width,N.height),this.layoutsCtx.font="8px monospace",this.layoutsCtx.fillStyle="red";var oe=this.writingDirection===C.default.LTR?"left":"right",de=N[oe];this.layoutsCtx.fillText(X,de,N.top+10),this.layoutsCtx.fillText(ce,de,N.top+25),this.layoutsCtx.fillText("".concat(oe,": ").concat(de),de,N.top+40),this.layoutsCtx.fillText("top: ".concat(N.top),de,N.top+55)}},ue.prototype.drawPoint=function(N,X,ce,oe){ce===void 0&&(ce="blue"),oe===void 0&&(oe=10),j&&(this.debugCtx.strokeStyle=ce,this.debugCtx.lineWidth=3,this.debugCtx.strokeRect(N-oe/2,X-oe/2,oe,oe))},ue}();x.default=W},119:function(U,x){var _;Object.defineProperty(x,"__esModule",{value:!0}),function(I){I[I.LTR=0]="LTR",I[I.RTL=1]="RTL"}(_||(_={})),x.default=_},607:function(U,x,_){var I=this&&this.__createBinding||(Object.create?function(j,z,$,W){W===void 0&&(W=$);var ue=Object.getOwnPropertyDescriptor(z,$);ue&&!("get"in ue?!z.__esModule:ue.writable||ue.configurable)||(ue={enumerable:!0,get:function(){return z[$]}}),Object.defineProperty(j,W,ue)}:function(j,z,$,W){W===void 0&&(W=$),j[W]=z[$]}),C=this&&this.__exportStar||function(j,z){for(var $ in j)$==="default"||Object.prototype.hasOwnProperty.call(z,$)||I(z,j,$)};Object.defineProperty(x,"__esModule",{value:!0}),C(_(79),x),C(_(445),x),C(_(654),x)},964:function(U,x){Object.defineProperty(x,"__esModule",{value:!0}),x.getBoundingClientRect=void 0;var _=function(I){for(var C=I.offsetParent,j=I.offsetHeight,z=I.offsetWidth,$=I.offsetLeft,W=I.offsetTop;C&&C.nodeType===1;)$+=C.offsetLeft-C.scrollLeft,W+=C.offsetTop-C.scrollTop,C=C.offsetParent;return{height:j,left:$,top:W,width:z}};x.default=function(I){var C=I&&I.parentElement;if(I&&C){var j=_(C),z=_(I),$=z.height,W=z.left,ue=z.top,N=z.width;return{x:W-j.left,y:ue-j.top,width:N,height:$,left:W,top:ue,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}},x.getBoundingClientRect=function(I){if(I&&I.getBoundingClientRect){var C=I.getBoundingClientRect();return{x:C.x,y:C.y,width:C.width,height:C.height,left:C.left,top:C.top,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}}},445:function(U,x,_){Object.defineProperty(x,"__esModule",{value:!0}),x.useFocusContext=x.FocusContext=void 0;var I=_(156),C=_(654);x.FocusContext=(0,I.createContext)(C.ROOT_FOCUS_KEY),x.FocusContext.displayName="FocusContext",x.useFocusContext=function(){return(0,I.useContext)(x.FocusContext)}},79:function(U,x,_){var I=this&&this.__importDefault||function(ue){return ue&&ue.__esModule?ue:{default:ue}};Object.defineProperty(x,"__esModule",{value:!0}),x.useFocusable=void 0;var C=_(156),j=I(_(604)),z=I(_(461)),$=_(654),W=_(445);x.useFocusable=function(ue){var N=ue===void 0?{}:ue,X=N.focusable,ce=X===void 0||X,oe=N.saveLastFocusedChild,de=oe===void 0||oe,Ce=N.trackChildren,Je=Ce!==void 0&&Ce,Te=N.autoRestoreFocus,je=Te===void 0||Te,nt=N.forceFocus,ct=nt!==void 0&&nt,Ie=N.isFocusBoundary,Ye=Ie!==void 0&&Ie,mt=N.focusBoundaryDirections,xe=N.focusKey,We=N.preferredChildFocusKey,it=N.onEnterPress,qt=it===void 0?j.default:it,Ft=N.onEnterRelease,gt=Ft===void 0?j.default:Ft,St=N.onArrowPress,Re=St===void 0?function(){return!0}:St,re=N.onFocus,Be=re===void 0?j.default:re,O=N.onBlur,M=O===void 0?j.default:O,q=N.extraProps,K=(0,C.useCallback)(function(Ot){qt(q,Ot)},[qt,q]),ye=(0,C.useCallback)(function(){gt(q)},[gt,q]),he=(0,C.useCallback)(function(Ot,Un){return Re(Ot,q,Un)},[q,Re]),Ke=(0,C.useCallback)(function(Ot,Un){Be(Ot,q,Un)},[q,Be]),wt=(0,C.useCallback)(function(Ot,Un){M(Ot,q,Un)},[q,M]),st=(0,C.useRef)(null),at=(0,C.useState)(!1),tt=at[0],ft=at[1],Et=(0,C.useState)(!1),Tt=Et[0],Ct=Et[1],hn=(0,W.useFocusContext)(),Qt=(0,C.useMemo)(function(){return xe||(0,z.default)("sn:focusable-item-")},[xe]),nn=(0,C.useCallback)(function(Ot){Ot===void 0&&(Ot={}),$.SpatialNavigation.setFocus(Qt,Ot)},[Qt]);return(0,C.useEffect)(function(){var Ot=st.current;return $.SpatialNavigation.addFocusable({focusKey:Qt,node:Ot,parentFocusKey:hn,preferredChildFocusKey:We,onEnterPress:K,onEnterRelease:ye,onArrowPress:he,onFocus:Ke,onBlur:wt,onUpdateFocus:function(Un){return Un===void 0&&(Un=!1),ft(Un)},onUpdateHasFocusedChild:function(Un){return Un===void 0&&(Un=!1),Ct(Un)},saveLastFocusedChild:de,trackChildren:Je,isFocusBoundary:Ye,focusBoundaryDirections:mt,autoRestoreFocus:je,forceFocus:ct,focusable:ce}),function(){$.SpatialNavigation.removeFocusable({focusKey:Qt})}},[]),(0,C.useEffect)(function(){var Ot=st.current;$.SpatialNavigation.updateFocusable(Qt,{node:Ot,preferredChildFocusKey:We,focusable:ce,isFocusBoundary:Ye,focusBoundaryDirections:mt,onEnterPress:K,onEnterRelease:ye,onArrowPress:he,onFocus:Ke,onBlur:wt})},[Qt,We,ce,Ye,mt,K,ye,he,Ke,wt]),{ref:st,focusSelf:nn,focused:tt,hasFocusedChild:Tt,focusKey:Qt}}},150:function(U){U.exports=l},117:function(U){U.exports=d},747:function(U){U.exports=p},23:function(U){U.exports=S},842:function(U){U.exports=b},682:function(U){U.exports=g},784:function(U){U.exports=w},604:function(U){U.exports=F},432:function(U){U.exports=R},67:function(U){U.exports=y},461:function(U){U.exports=v},156:function(U){U.exports=D}},T={};return function U(x){var _=T[x];if(_!==void 0)return _.exports;var I=T[x]={exports:{}};return m[x].call(I.exports,I,I.exports,U),I.exports}(607)}()})})(YU);var ou=YU.exports;function AV(o){return{all:o=o||new Map,on:function(i,l){var d=o.get(i);d?d.push(l):o.set(i,[l])},off:function(i,l){var d=o.get(i);d&&(l?d.splice(d.indexOf(l)>>>0,1):o.set(i,[]))},emit:function(i,l){var d=o.get(i);d&&d.slice().map(function(p){p(l)}),(d=o.get("*"))&&d.slice().map(function(p){p(i,l)})}}}class If{constructor(){this.emitter=AV()}emit(i,l){this.emitter.emit(i,l)}on(i,l){var d;(d=this.emitter)==null||d.on(i,l)}once(i,l){var p;const d=S=>{var b;(b=this.emitter)==null||b.off(i,d),l(S)};(p=this.emitter)==null||p.on(i,d)}off(i,l){var d;(d=this.emitter)==null||d.off(i,l)}onAny(i){this.emitter.on("*",i)}offAny(i){this.emitter.off("*",i)}clearAllListeners(){this.emitter.all.clear()}destroy(){this.clearAllListeners()}}var lf=256,g4=[],kk=256,Gy;for(;lf--;)g4[lf]=(lf+256).toString(16).substring(1);function IV(o){var i=0,l=11;if(!Gy||lf+l>kk*2)for(Gy="",lf=0;i<kk;i++)Gy+=g4[Math.random()*256|0];return Gy.substring(lf,lf+++l)}const Fk={DEVICE_ID:"deviceId"};function P0(){const o=localStorage.getItem(Fk.DEVICE_ID);if(o)return o;const i=IV();return localStorage.setItem(Fk.DEVICE_ID,i),i}function bV(o){o=[...o].sort((l,d)=>l-d);const i=Math.floor(o.length/2);return o.length%2?o[i]:(o[i-1]+o[i])/2}var Ea=(o=>(o.NEGOTIATE="negotiate",o.NEGOTIATE_TV="negotiate-tv",o.EVENT_STATUS="eventStatus",o.EVENT_META="eventMeta",o.GENERATE="generate",o.CONTENTFUL="contentful",o))(Ea||{});class og extends Error{constructor(i,l,d,p){super(),this._name=i,this._title=l,this._code=p,this._message=d}get toString(){var i,l;return"".concat(this._name.toUpperCase()," ERROR - ").concat((i=this._title.toUpperCase())!=null?i:""," ").concat((l=this._code)!=null?l:"",": ").concat(this.message)}get name(){return this._name}set name(i){this._name=i}get message(){return this._message}set message(i){this._message=i}get title(){return this._title}set title(i){this._title=i}get code(){return this._code}set code(i){this._code=i}}var fc=(o=>(o.TIZEN="tizen",o.WEBOS="webos",o.WEBZEROS="web0s",o.WEB="web",o))(fc||{});function uE(){const o=navigator.userAgent.toLowerCase();return o.includes("tizen")?"tizen":o.includes("webos")||o.includes("web0s")?"webos":"web"}const m4=uE()==="webos"?"LG TV":"Samsung TV",Eh=P0(),CV="https://staging-api.gigset.io",RV="new",NV="68HZuoF2PhOm4zHAJzDcwGnqUeph2JA_G9M7vW8-mbw",xV="v203lmr0b15v",TC="setup-device-id",MV="_appContainer_1isul_1",DV="_pageContainer_1isul_53",PV="_input_1isul_67",OV="_ellipsis_1isul_1",LV={appContainer:MV,pageContainer:DV,input:PV,ellipsis:OV};class df extends Error{constructor(i,l){const d=new.target.prototype;super("".concat(i,": Status code '").concat(l,"'")),this.statusCode=l,this.__proto__=d}}class SC extends Error{constructor(i="A timeout occurred."){const l=new.target.prototype;super(i),this.__proto__=l}}class nu extends Error{constructor(i="An abort occurred."){const l=new.target.prototype;super(i),this.__proto__=l}}class kV extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.transport=l,this.errorType="UnsupportedTransportError",this.__proto__=d}}class FV extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.transport=l,this.errorType="DisabledTransportError",this.__proto__=d}}class UV extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.transport=l,this.errorType="FailedToStartTransportError",this.__proto__=d}}class Uk extends Error{constructor(i){const l=new.target.prototype;super(i),this.errorType="FailedToNegotiateWithServerError",this.__proto__=l}}class BV extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.innerErrors=l,this.__proto__=d}}class v4{constructor(i,l,d){this.statusCode=i,this.statusText=l,this.content=d}}class lE{get(i,l){return this.send({...l,method:"GET",url:i})}post(i,l){return this.send({...l,method:"POST",url:i})}delete(i,l){return this.send({...l,method:"DELETE",url:i})}getCookieString(i){return""}}var wn;(function(o){o[o.Trace=0]="Trace",o[o.Debug=1]="Debug",o[o.Information=2]="Information",o[o.Warning=3]="Warning",o[o.Error=4]="Error",o[o.Critical=5]="Critical",o[o.None=6]="None"})(wn||(wn={}));class Gg{constructor(){}log(i,l){}}Gg.instance=new Gg;const jV="8.0.0";class po{static isRequired(i,l){if(i==null)throw new Error("The '".concat(l,"' argument is required."))}static isNotEmpty(i,l){if(!i||i.match(/^\s*$/))throw new Error("The '".concat(l,"' argument should not be empty."))}static isIn(i,l,d){if(!(i in l))throw new Error("Unknown ".concat(d," value: ").concat(i,"."))}}class Hi{static get isBrowser(){return!Hi.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Hi.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Hi.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function qg(o,i){let l="";return Ef(o)?(l="Binary data of length ".concat(o.byteLength),i&&(l+=". Content: '".concat(ZV(o),"'"))):typeof o=="string"&&(l="String data of length ".concat(o.length),i&&(l+=". Content: '".concat(o,"'"))),l}function ZV(o){const i=new Uint8Array(o);let l="";return i.forEach(d=>{const p=d<16?"0":"";l+="0x".concat(p).concat(d.toString(16)," ")}),l.substr(0,l.length-1)}function Ef(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}async function y4(o,i,l,d,p,S){const b={},[g,w]=_h();b[g]=w,o.log(wn.Trace,"(".concat(i," transport) sending data. ").concat(qg(p,S.logMessageContent),"."));const F=Ef(p)?"arraybuffer":"text",R=await l.post(d,{content:p,headers:{...b,...S.headers},responseType:F,timeout:S.timeout,withCredentials:S.withCredentials});o.log(wn.Trace,"(".concat(i," transport) request complete. Response status: ").concat(R.statusCode,"."))}function GV(o){return o===void 0?new O0(wn.Information):o===null?Gg.instance:o.log!==void 0?o:new O0(o)}class qV{constructor(i,l){this._subject=i,this._observer=l}dispose(){const i=this._subject.observers.indexOf(this._observer);i>-1&&this._subject.observers.splice(i,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(l=>{})}}class O0{constructor(i){this._minLevel=i,this.out=console}log(i,l){if(i>=this._minLevel){const d="[".concat(new Date().toISOString(),"] ").concat(wn[i],": ").concat(l);switch(i){case wn.Critical:case wn.Error:this.out.error(d);break;case wn.Warning:this.out.warn(d);break;case wn.Information:this.out.info(d);break;default:this.out.log(d);break}}}}function _h(){let o="X-SignalR-User-Agent";return Hi.isNode&&(o="User-Agent"),[o,HV(jV,KV(),zV(),VV())]}function HV(o,i,l,d){let p="Microsoft SignalR/";const S=o.split(".");return p+="".concat(S[0],".").concat(S[1]),p+=" (".concat(o,"; "),i&&i!==""?p+="".concat(i,"; "):p+="Unknown OS; ",p+="".concat(l),d?p+="; ".concat(d):p+="; Unknown Runtime Version",p+=")",p}function KV(){if(Hi.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function VV(){if(Hi.isNode)return process.versions.node}function zV(){return Hi.isNode?"NodeJS":"Browser"}function Bk(o){return o.stack?o.stack:o.message?o.message:"".concat(o)}function YV(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}function WV(o){return typeof fetch>"u"||Hi.isNode?(o._jar=new(require("tough-cookie")).CookieJar,typeof fetch>"u"?o._fetchType=require("node-fetch"):o._fetchType=fetch,o._fetchType=require("fetch-cookie")(o._fetchType,o._jar),!0):!1}function $V(o){return typeof AbortController>"u"?(o._abortControllerType=require("abort-controller"),!0):!1}function XV(){return require("ws")}function QV(){return require("eventsource")}class JV extends lE{constructor(i){super(),this._logger=i;const l={_fetchType:void 0,_jar:void 0};WV(l)?(this._fetchType=l._fetchType,this._jar=l._jar):this._fetchType=fetch.bind(YV()),this._abortControllerType=AbortController;const d={_abortControllerType:this._abortControllerType};$V(d)&&(this._abortControllerType=d._abortControllerType)}async send(i){if(i.abortSignal&&i.abortSignal.aborted)throw new nu;if(!i.method)throw new Error("No method defined.");if(!i.url)throw new Error("No url defined.");const l=new this._abortControllerType;let d;i.abortSignal&&(i.abortSignal.onabort=()=>{l.abort(),d=new nu});let p=null;if(i.timeout){const w=i.timeout;p=setTimeout(()=>{l.abort(),this._logger.log(wn.Warning,"Timeout from HTTP request."),d=new SC},w)}i.content===""&&(i.content=void 0),i.content&&(i.headers=i.headers||{},Ef(i.content)?i.headers["Content-Type"]="application/octet-stream":i.headers["Content-Type"]="text/plain;charset=UTF-8");let S;try{S=await this._fetchType(i.url,{body:i.content,cache:"no-cache",credentials:i.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...i.headers},method:i.method,mode:"cors",redirect:"follow",signal:l.signal})}catch(w){throw d||(this._logger.log(wn.Warning,"Error from HTTP request. ".concat(w,".")),w)}finally{p&&clearTimeout(p),i.abortSignal&&(i.abortSignal.onabort=null)}if(!S.ok){const w=await jk(S,"text");throw new df(w||S.statusText,S.status)}const g=await jk(S,i.responseType);return new v4(S.status,S.statusText,g)}getCookieString(i){let l="";return Hi.isNode&&this._jar&&this._jar.getCookies(i,(d,p)=>l=p.join("; ")),l}}function jk(o,i){let l;switch(i){case"arraybuffer":l=o.arrayBuffer();break;case"text":l=o.text();break;case"blob":case"document":case"json":throw new Error("".concat(i," is not supported."));default:l=o.text();break}return l}class e7 extends lE{constructor(i){super(),this._logger=i}send(i){return i.abortSignal&&i.abortSignal.aborted?Promise.reject(new nu):i.method?i.url?new Promise((l,d)=>{const p=new XMLHttpRequest;p.open(i.method,i.url,!0),p.withCredentials=i.withCredentials===void 0?!0:i.withCredentials,p.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.content===""&&(i.content=void 0),i.content&&(Ef(i.content)?p.setRequestHeader("Content-Type","application/octet-stream"):p.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const S=i.headers;S&&Object.keys(S).forEach(b=>{p.setRequestHeader(b,S[b])}),i.responseType&&(p.responseType=i.responseType),i.abortSignal&&(i.abortSignal.onabort=()=>{p.abort(),d(new nu)}),i.timeout&&(p.timeout=i.timeout),p.onload=()=>{i.abortSignal&&(i.abortSignal.onabort=null),p.status>=200&&p.status<300?l(new v4(p.status,p.statusText,p.response||p.responseText)):d(new df(p.response||p.responseText||p.statusText,p.status))},p.onerror=()=>{this._logger.log(wn.Warning,"Error from HTTP request. ".concat(p.status,": ").concat(p.statusText,".")),d(new df(p.statusText,p.status))},p.ontimeout=()=>{this._logger.log(wn.Warning,"Timeout from HTTP request."),d(new SC)},p.send(i.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class t7 extends lE{constructor(i){if(super(),typeof fetch<"u"||Hi.isNode)this._httpClient=new JV(i);else if(typeof XMLHttpRequest<"u")this._httpClient=new e7(i);else throw new Error("No usable HttpClient found.")}send(i){return i.abortSignal&&i.abortSignal.aborted?Promise.reject(new nu):i.method?i.url?this._httpClient.send(i):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(i){return this._httpClient.getCookieString(i)}}class ls{static write(i){return"".concat(i).concat(ls.RecordSeparator)}static parse(i){if(i[i.length-1]!==ls.RecordSeparator)throw new Error("Message is incomplete.");const l=i.split(ls.RecordSeparator);return l.pop(),l}}ls.RecordSeparatorCode=30;ls.RecordSeparator=String.fromCharCode(ls.RecordSeparatorCode);class n7{writeHandshakeRequest(i){return ls.write(JSON.stringify(i))}parseHandshakeResponse(i){let l,d;if(Ef(i)){const g=new Uint8Array(i),w=g.indexOf(ls.RecordSeparatorCode);if(w===-1)throw new Error("Message is incomplete.");const F=w+1;l=String.fromCharCode.apply(null,Array.prototype.slice.call(g.slice(0,F))),d=g.byteLength>F?g.slice(F).buffer:null}else{const g=i,w=g.indexOf(ls.RecordSeparator);if(w===-1)throw new Error("Message is incomplete.");const F=w+1;l=g.substring(0,F),d=g.length>F?g.substring(F):null}const p=ls.parse(l),S=JSON.parse(p[0]);if(S.type)throw new Error("Expected a handshake response from the server.");return[d,S]}}var Ar;(function(o){o[o.Invocation=1]="Invocation",o[o.StreamItem=2]="StreamItem",o[o.Completion=3]="Completion",o[o.StreamInvocation=4]="StreamInvocation",o[o.CancelInvocation=5]="CancelInvocation",o[o.Ping=6]="Ping",o[o.Close=7]="Close",o[o.Ack=8]="Ack",o[o.Sequence=9]="Sequence"})(Ar||(Ar={}));class r7{constructor(){this.observers=[]}next(i){for(const l of this.observers)l.next(i)}error(i){for(const l of this.observers)l.error&&l.error(i)}complete(){for(const i of this.observers)i.complete&&i.complete()}subscribe(i){return this.observers.push(i),new qV(this,i)}}class i7{constructor(i,l,d){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=i,this._connection=l,this._bufferSize=d}async _send(i){const l=this._protocol.writeMessage(i);let d=Promise.resolve();if(this._isInvocationMessage(i)){this._totalMessageCount++;let p=()=>{},S=()=>{};Ef(l)?this._bufferedByteCount+=l.byteLength:this._bufferedByteCount+=l.length,this._bufferedByteCount>=this._bufferSize&&(d=new Promise((b,g)=>{p=b,S=g})),this._messages.push(new o7(l,this._totalMessageCount,p,S))}try{this._reconnectInProgress||await this._connection.send(l)}catch(p){this._disconnected()}await d}_ack(i){let l=-1;for(let d=0;d<this._messages.length;d++){const p=this._messages[d];if(p._id<=i.sequenceId)l=d,Ef(p._message)?this._bufferedByteCount-=p._message.byteLength:this._bufferedByteCount-=p._message.length,p._resolver();else if(this._bufferedByteCount<this._bufferSize)p._resolver();else break}l!==-1&&(this._messages=this._messages.slice(l+1))}_shouldProcessMessage(i){if(this._waitForSequenceMessage)return i.type!==Ar.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(i))return!0;const l=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,l<=this._latestReceivedSequenceId?(l===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=l,this._ackTimer(),!0)}_resetSequence(i){if(i.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=i.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const i=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ar.Sequence,sequenceId:i}));const l=this._messages;for(const d of l)await this._connection.send(d._message);this._reconnectInProgress=!1}_dispose(i){i!=null||(i=new Error("Unable to reconnect to server."));for(const l of this._messages)l._rejector(i)}_isInvocationMessage(i){switch(i.type){case Ar.Invocation:case Ar.StreamItem:case Ar.Completion:case Ar.StreamInvocation:case Ar.CancelInvocation:return!0;case Ar.Close:case Ar.Sequence:case Ar.Ping:case Ar.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ar.Ack,sequenceId:this._latestReceivedSequenceId}))}catch(i){}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class o7{constructor(i,l,d,p){this._message=i,this._id=l,this._resolver=d,this._rejector=p}}const a7=30*1e3,s7=15*1e3,u7=1e5;var Fi;(function(o){o.Disconnected="Disconnected",o.Connecting="Connecting",o.Connected="Connected",o.Disconnecting="Disconnecting",o.Reconnecting="Reconnecting"})(Fi||(Fi={}));class wC{static create(i,l,d,p,S,b,g){return new wC(i,l,d,p,S,b,g)}constructor(i,l,d,p,S,b,g){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(wn.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},po.isRequired(i,"connection"),po.isRequired(l,"logger"),po.isRequired(d,"protocol"),this.serverTimeoutInMilliseconds=S!=null?S:a7,this.keepAliveIntervalInMilliseconds=b!=null?b:s7,this._statefulReconnectBufferSize=g!=null?g:u7,this._logger=l,this._protocol=d,this.connection=i,this._reconnectPolicy=p,this._handshakeProtocol=new n7,this.connection.onreceive=w=>this._processIncomingData(w),this.connection.onclose=w=>this._connectionClosed(w),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ar.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(i){if(this._connectionState!==Fi.Disconnected&&this._connectionState!==Fi.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!i)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=i}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Fi.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Fi.Connecting,this._logger.log(wn.Debug,"Starting HubConnection.");try{await this._startInternal(),Hi.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Fi.Connected,this._connectionStarted=!0,this._logger.log(wn.Debug,"HubConnection connected successfully.")}catch(i){return this._connectionState=Fi.Disconnected,this._logger.log(wn.Debug,"HubConnection failed to start successfully because of error '".concat(i,"'.")),Promise.reject(i)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const i=new Promise((l,d)=>{this._handshakeResolver=l,this._handshakeRejecter=d});await this.connection.start(this._protocol.transferFormat);try{let l=this._protocol.version;this.connection.features.reconnect||(l=1);const d={protocol:this._protocol.name,version:l};if(this._logger.log(wn.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(d)),this._logger.log(wn.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await i,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new i7(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(l){throw this._logger.log(wn.Debug,"Hub handshake failed with error '".concat(l,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(l),l}}async stop(){const i=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await i}catch(l){}}_stopInternal(i){if(this._connectionState===Fi.Disconnected)return this._logger.log(wn.Debug,"Call to HubConnection.stop(".concat(i,") ignored because it is already in the disconnected state.")),Promise.resolve();if(this._connectionState===Fi.Disconnecting)return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(i,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;const l=this._connectionState;return this._connectionState=Fi.Disconnecting,this._logger.log(wn.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(wn.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(l===Fi.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=i||new nu("The connection was stopped before the hub handshake could complete."),this.connection.stop(i))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch(i){}}stream(i,...l){const[d,p]=this._replaceStreamingParams(l),S=this._createStreamInvocation(i,l,p);let b;const g=new r7;return g.cancelCallback=()=>{const w=this._createCancelInvocation(S.invocationId);return delete this._callbacks[S.invocationId],b.then(()=>this._sendWithProtocol(w))},this._callbacks[S.invocationId]=(w,F)=>{if(F){g.error(F);return}else w&&(w.type===Ar.Completion?w.error?g.error(new Error(w.error)):g.complete():g.next(w.item))},b=this._sendWithProtocol(S).catch(w=>{g.error(w),delete this._callbacks[S.invocationId]}),this._launchStreams(d,b),g}_sendMessage(i){return this._resetKeepAliveInterval(),this.connection.send(i)}_sendWithProtocol(i){return this._messageBuffer?this._messageBuffer._send(i):this._sendMessage(this._protocol.writeMessage(i))}send(i,...l){const[d,p]=this._replaceStreamingParams(l),S=this._sendWithProtocol(this._createInvocation(i,l,!0,p));return this._launchStreams(d,S),S}invoke(i,...l){const[d,p]=this._replaceStreamingParams(l),S=this._createInvocation(i,l,!1,p);return new Promise((g,w)=>{this._callbacks[S.invocationId]=(R,y)=>{if(y){w(y);return}else R&&(R.type===Ar.Completion?R.error?w(new Error(R.error)):g(R.result):w(new Error("Unexpected message type: ".concat(R.type))))};const F=this._sendWithProtocol(S).catch(R=>{w(R),delete this._callbacks[S.invocationId]});this._launchStreams(d,F)})}on(i,l){!i||!l||(i=i.toLowerCase(),this._methods[i]||(this._methods[i]=[]),this._methods[i].indexOf(l)===-1&&this._methods[i].push(l))}off(i,l){if(!i)return;i=i.toLowerCase();const d=this._methods[i];if(d)if(l){const p=d.indexOf(l);p!==-1&&(d.splice(p,1),d.length===0&&delete this._methods[i])}else delete this._methods[i]}onclose(i){i&&this._closedCallbacks.push(i)}onreconnecting(i){i&&this._reconnectingCallbacks.push(i)}onreconnected(i){i&&this._reconnectedCallbacks.push(i)}_processIncomingData(i){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(i=this._processHandshakeResponse(i),this._receivedHandshakeResponse=!0),i){const l=this._protocol.parseMessages(i,this._logger);for(const d of l)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(d)))switch(d.type){case Ar.Invocation:this._invokeClientMethod(d);break;case Ar.StreamItem:case Ar.Completion:{const p=this._callbacks[d.invocationId];if(p){d.type===Ar.Completion&&delete this._callbacks[d.invocationId];try{p(d)}catch(S){this._logger.log(wn.Error,"Stream callback threw error: ".concat(Bk(S)))}}break}case Ar.Ping:break;case Ar.Close:{this._logger.log(wn.Information,"Close message received from server.");const p=d.error?new Error("Server returned an error on close: "+d.error):void 0;d.allowReconnect===!0?this.connection.stop(p):this._stopPromise=this._stopInternal(p);break}case Ar.Ack:this._messageBuffer&&this._messageBuffer._ack(d);break;case Ar.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(d);break;default:this._logger.log(wn.Warning,"Invalid message type: ".concat(d.type,"."));break}}this._resetTimeoutPeriod()}_processHandshakeResponse(i){let l,d;try{[d,l]=this._handshakeProtocol.parseHandshakeResponse(i)}catch(p){const S="Error parsing handshake response: "+p;this._logger.log(wn.Error,S);const b=new Error(S);throw this._handshakeRejecter(b),b}if(l.error){const p="Server returned handshake error: "+l.error;this._logger.log(wn.Error,p);const S=new Error(p);throw this._handshakeRejecter(S),S}else this._logger.log(wn.Debug,"Server handshake complete.");return this._handshakeResolver(),d}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let i=this._nextKeepAlive-new Date().getTime();i<0&&(i=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===Fi.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch(l){this._cleanupPingTimer()}},i)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(i){const l=i.target.toLowerCase(),d=this._methods[l];if(!d){this._logger.log(wn.Warning,"No client method with the name '".concat(l,"' found.")),i.invocationId&&(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(i.invocationId,"'.")),await this._sendWithProtocol(this._createCompletionMessage(i.invocationId,"Client didn't provide a result.",null)));return}const p=d.slice(),S=!!i.invocationId;let b,g,w;for(const F of p)try{const R=b;b=await F.apply(this,i.arguments),S&&b&&R&&(this._logger.log(wn.Error,"Multiple results provided for '".concat(l,"'. Sending error to server.")),w=this._createCompletionMessage(i.invocationId,"Client provided multiple results.",null)),g=void 0}catch(R){g=R,this._logger.log(wn.Error,"A callback for the method '".concat(l,"' threw error '").concat(R,"'."))}w?await this._sendWithProtocol(w):S?(g?w=this._createCompletionMessage(i.invocationId,"".concat(g),null):b!==void 0?w=this._createCompletionMessage(i.invocationId,null,b):(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(i.invocationId,"'.")),w=this._createCompletionMessage(i.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(w)):b&&this._logger.log(wn.Error,"Result given for '".concat(l,"' method but server is not expecting a result."))}_connectionClosed(i){this._logger.log(wn.Debug,"HubConnection.connectionClosed(".concat(i,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||i||new nu("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(i||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Fi.Disconnecting?this._completeClose(i):this._connectionState===Fi.Connected&&this._reconnectPolicy?this._reconnect(i):this._connectionState===Fi.Connected&&this._completeClose(i)}_completeClose(i){if(this._connectionStarted){this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(i!=null?i:new Error("Connection closed.")),this._messageBuffer=void 0),Hi.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(l=>l.apply(this,[i]))}catch(l){this._logger.log(wn.Error,"An onclose callback called with error '".concat(i,"' threw error '").concat(l,"'."))}}}async _reconnect(i){const l=Date.now();let d=0,p=i!==void 0?i:new Error("Attempting to reconnect due to a unknown error."),S=this._getNextRetryDelay(d++,0,p);if(S===null){this._logger.log(wn.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(i);return}if(this._connectionState=Fi.Reconnecting,i?this._logger.log(wn.Information,"Connection reconnecting because of error '".concat(i,"'.")):this._logger.log(wn.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(b=>b.apply(this,[i]))}catch(b){this._logger.log(wn.Error,"An onreconnecting callback called with error '".concat(i,"' threw error '").concat(b,"'."))}if(this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;S!==null;){if(this._logger.log(wn.Information,"Reconnect attempt number ".concat(d," will start in ").concat(S," ms.")),await new Promise(b=>{this._reconnectDelayHandle=setTimeout(b,S)}),this._reconnectDelayHandle=void 0,this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Fi.Connected,this._logger.log(wn.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(b=>b.apply(this,[this.connection.connectionId]))}catch(b){this._logger.log(wn.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(b,"'."))}return}catch(b){if(this._logger.log(wn.Information,"Reconnect attempt failed because of error '".concat(b,"'.")),this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),this._connectionState===Fi.Disconnecting&&this._completeClose();return}p=b instanceof Error?b:new Error(b.toString()),S=this._getNextRetryDelay(d++,Date.now()-l,p)}}this._logger.log(wn.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-l," ms and ").concat(d," failed attempts. Connection disconnecting.")),this._completeClose()}_getNextRetryDelay(i,l,d){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:l,previousRetryCount:i,retryReason:d})}catch(p){return this._logger.log(wn.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(i,", ").concat(l,") threw error '").concat(p,"'.")),null}}_cancelCallbacksWithError(i){const l=this._callbacks;this._callbacks={},Object.keys(l).forEach(d=>{const p=l[d];try{p(null,i)}catch(S){this._logger.log(wn.Error,"Stream 'error' callback called with '".concat(i,"' threw error: ").concat(Bk(S)))}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(i,l,d,p){if(d)return p.length!==0?{arguments:l,streamIds:p,target:i,type:Ar.Invocation}:{arguments:l,target:i,type:Ar.Invocation};{const S=this._invocationId;return this._invocationId++,p.length!==0?{arguments:l,invocationId:S.toString(),streamIds:p,target:i,type:Ar.Invocation}:{arguments:l,invocationId:S.toString(),target:i,type:Ar.Invocation}}}_launchStreams(i,l){if(i.length!==0){l||(l=Promise.resolve());for(const d in i)i[d].subscribe({complete:()=>{l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d)))},error:p=>{let S;p instanceof Error?S=p.message:p&&p.toString?S=p.toString():S="Unknown error",l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d,S)))},next:p=>{l=l.then(()=>this._sendWithProtocol(this._createStreamItemMessage(d,p)))}})}}_replaceStreamingParams(i){const l=[],d=[];for(let p=0;p<i.length;p++){const S=i[p];if(this._isObservable(S)){const b=this._invocationId;this._invocationId++,l[b]=S,d.push(b.toString()),i.splice(p,1)}}return[l,d]}_isObservable(i){return i&&i.subscribe&&typeof i.subscribe=="function"}_createStreamInvocation(i,l,d){const p=this._invocationId;return this._invocationId++,d.length!==0?{arguments:l,invocationId:p.toString(),streamIds:d,target:i,type:Ar.StreamInvocation}:{arguments:l,invocationId:p.toString(),target:i,type:Ar.StreamInvocation}}_createCancelInvocation(i){return{invocationId:i,type:Ar.CancelInvocation}}_createStreamItemMessage(i,l){return{invocationId:i,item:l,type:Ar.StreamItem}}_createCompletionMessage(i,l,d){return l?{error:l,invocationId:i,type:Ar.Completion}:{invocationId:i,result:d,type:Ar.Completion}}_createCloseMessage(){return{type:Ar.Close}}}const l7=[0,2e3,1e4,3e4,null];class Zk{constructor(i){this._retryDelays=i!==void 0?[...i,null]:l7}nextRetryDelayInMilliseconds(i){return this._retryDelays[i.previousRetryCount]}}class hf{}hf.Authorization="Authorization";hf.Cookie="Cookie";class c7 extends lE{constructor(i,l){super(),this._innerClient=i,this._accessTokenFactory=l}async send(i){let l=!0;this._accessTokenFactory&&(!this._accessToken||i.url&&i.url.indexOf("/negotiate?")>0)&&(l=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(i);const d=await this._innerClient.send(i);return l&&d.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(i),await this._innerClient.send(i)):d}_setAuthorizationHeader(i){i.headers||(i.headers={}),this._accessToken?i.headers[hf.Authorization]="Bearer ".concat(this._accessToken):this._accessTokenFactory&&i.headers[hf.Authorization]&&delete i.headers[hf.Authorization]}getCookieString(i){return this._innerClient.getCookieString(i)}}var lo;(function(o){o[o.None=0]="None",o[o.WebSockets=1]="WebSockets",o[o.ServerSentEvents=2]="ServerSentEvents",o[o.LongPolling=4]="LongPolling"})(lo||(lo={}));var Qo;(function(o){o[o.Text=1]="Text",o[o.Binary=2]="Binary"})(Qo||(Qo={}));let f7=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Gk{get pollAborted(){return this._pollAbort.aborted}constructor(i,l,d){this._httpClient=i,this._logger=l,this._pollAbort=new f7,this._options=d,this._running=!1,this.onreceive=null,this.onclose=null}async connect(i,l){if(po.isRequired(i,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Qo,"transferFormat"),this._url=i,this._logger.log(wn.Trace,"(LongPolling transport) Connecting."),l===Qo.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[d,p]=_h(),S={[d]:p,...this._options.headers},b={abortSignal:this._pollAbort.signal,headers:S,timeout:1e5,withCredentials:this._options.withCredentials};l===Qo.Binary&&(b.responseType="arraybuffer");const g="".concat(i,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(g,"."));const w=await this._httpClient.get(g,b);w.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(w.statusCode,".")),this._closeError=new df(w.statusText||"",w.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,b)}async _poll(i,l){try{for(;this._running;)try{const d="".concat(i,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(d,"."));const p=await this._httpClient.get(d,l);p.statusCode===204?(this._logger.log(wn.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):p.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(p.statusCode,".")),this._closeError=new df(p.statusText||"",p.statusCode),this._running=!1):p.content?(this._logger.log(wn.Trace,"(LongPolling transport) data received. ".concat(qg(p.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(p.content)):this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(d){this._running?d instanceof SC?this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=d,this._running=!1):this._logger.log(wn.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(d.message))}}finally{this._logger.log(wn.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(i){return this._running?y4(this._logger,"LongPolling",this._httpClient,this._url,i,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(wn.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(wn.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,"."));const i={},[l,d]=_h();i[l]=d;const p={headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let S;try{await this._httpClient.delete(this._url,p)}catch(b){S=b}S?S instanceof df&&(S.statusCode===404?this._logger.log(wn.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(wn.Trace,"(LongPolling transport) Error sending a DELETE request: ".concat(S))):this._logger.log(wn.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(wn.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let i="(LongPolling transport) Firing onclose event.";this._closeError&&(i+=" Error: "+this._closeError),this._logger.log(wn.Trace,i),this.onclose(this._closeError)}}}class d7{constructor(i,l,d,p){this._httpClient=i,this._accessToken=l,this._logger=d,this._options=p,this.onreceive=null,this.onclose=null}async connect(i,l){return po.isRequired(i,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Qo,"transferFormat"),this._logger.log(wn.Trace,"(SSE transport) Connecting."),this._url=i,this._accessToken&&(i+=(i.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(this._accessToken))),new Promise((d,p)=>{let S=!1;if(l!==Qo.Text){p(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let b;if(Hi.isBrowser||Hi.isWebWorker)b=new this._options.EventSource(i,{withCredentials:this._options.withCredentials});else{const g=this._httpClient.getCookieString(i),w={};w.Cookie=g;const[F,R]=_h();w[F]=R,b=new this._options.EventSource(i,{withCredentials:this._options.withCredentials,headers:{...w,...this._options.headers}})}try{b.onmessage=g=>{if(this.onreceive)try{this._logger.log(wn.Trace,"(SSE transport) data received. ".concat(qg(g.data,this._options.logMessageContent),".")),this.onreceive(g.data)}catch(w){this._close(w);return}},b.onerror=g=>{S?this._close():p(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},b.onopen=()=>{this._logger.log(wn.Information,"SSE connected to ".concat(this._url)),this._eventSource=b,S=!0,d()}}catch(g){p(g);return}})}async send(i){return this._eventSource?y4(this._logger,"SSE",this._httpClient,this._url,i,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(i){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(i))}}class h7{constructor(i,l,d,p,S,b){this._logger=d,this._accessTokenFactory=l,this._logMessageContent=p,this._webSocketConstructor=S,this._httpClient=i,this.onreceive=null,this.onclose=null,this._headers=b}async connect(i,l){po.isRequired(i,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Qo,"transferFormat"),this._logger.log(wn.Trace,"(WebSockets transport) Connecting.");let d;return this._accessTokenFactory&&(d=await this._accessTokenFactory()),new Promise((p,S)=>{i=i.replace(/^http/,"ws");let b;const g=this._httpClient.getCookieString(i);let w=!1;if(Hi.isNode||Hi.isReactNative){const F={},[R,y]=_h();F[R]=y,d&&(F[hf.Authorization]="Bearer ".concat(d)),g&&(F[hf.Cookie]=g),b=new this._webSocketConstructor(i,void 0,{headers:{...F,...this._headers}})}else d&&(i+=(i.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(d)));b||(b=new this._webSocketConstructor(i)),l===Qo.Binary&&(b.binaryType="arraybuffer"),b.onopen=F=>{this._logger.log(wn.Information,"WebSocket connected to ".concat(i,".")),this._webSocket=b,w=!0,p()},b.onerror=F=>{let R=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?R=F.error:R="There was an error with the transport",this._logger.log(wn.Information,"(WebSockets transport) ".concat(R,"."))},b.onmessage=F=>{if(this._logger.log(wn.Trace,"(WebSockets transport) data received. ".concat(qg(F.data,this._logMessageContent),".")),this.onreceive)try{this.onreceive(F.data)}catch(R){this._close(R);return}},b.onclose=F=>{if(w)this._close(F);else{let R=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?R=F.error:R="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",S(new Error(R))}}})}send(i){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(wn.Trace,"(WebSockets transport) sending data. ".concat(qg(i,this._logMessageContent),".")),this._webSocket.send(i),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(i){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(wn.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(i)&&(i.wasClean===!1||i.code!==1e3)?this.onclose(new Error("WebSocket closed with status code: ".concat(i.code," (").concat(i.reason||"no reason given",")."))):i instanceof Error?this.onclose(i):this.onclose())}_isCloseEvent(i){return i&&typeof i.wasClean=="boolean"&&typeof i.code=="number"}}const qk=100;class p7{constructor(i,l={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,po.isRequired(i,"url"),this._logger=GV(l.logger),this.baseUrl=this._resolveUrl(i),l=l||{},l.logMessageContent=l.logMessageContent===void 0?!1:l.logMessageContent,typeof l.withCredentials=="boolean"||l.withCredentials===void 0)l.withCredentials=l.withCredentials===void 0?!0:l.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");l.timeout=l.timeout===void 0?100*1e3:l.timeout;let d=null,p=null;Hi.isNode&&typeof require<"u"&&(d=XV(),p=QV()),!Hi.isNode&&typeof WebSocket<"u"&&!l.WebSocket?l.WebSocket=WebSocket:Hi.isNode&&!l.WebSocket&&d&&(l.WebSocket=d),!Hi.isNode&&typeof EventSource<"u"&&!l.EventSource?l.EventSource=EventSource:Hi.isNode&&!l.EventSource&&typeof p<"u"&&(l.EventSource=p),this._httpClient=new c7(l.httpClient||new t7(this._logger),l.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=l,this.onreceive=null,this.onclose=null}async start(i){if(i=i||Qo.Binary,po.isIn(i,Qo,"transferFormat"),this._logger.log(wn.Debug,"Starting connection with transfer format '".concat(Qo[i],"'.")),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(i),await this._startInternalPromise,this._connectionState==="Disconnecting"){const l="Failed to start the HttpConnection before stop() was called.";return this._logger.log(wn.Error,l),await this._stopPromise,Promise.reject(new nu(l))}else if(this._connectionState!=="Connected"){const l="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(wn.Error,l),Promise.reject(new nu(l))}this._connectionStarted=!0}send(i){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new AC(this.transport)),this._sendQueue.send(i))}async stop(i){if(this._connectionState==="Disconnected")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(i,") ignored because the connection is already in the disconnected state.")),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(i,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(l=>{this._stopPromiseResolver=l}),await this._stopInternal(i),await this._stopPromise}async _stopInternal(i){this._stopError=i;try{await this._startInternalPromise}catch(l){}if(this.transport){try{await this.transport.stop()}catch(l){this._logger.log(wn.Error,"HttpConnection.transport.stop() threw error '".concat(l,"'.")),this._stopConnection()}this.transport=void 0}else this._logger.log(wn.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(i){let l=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===lo.WebSockets)this.transport=this._constructTransport(lo.WebSockets),await this._startTransport(l,i);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let d=null,p=0;do{if(d=await this._getNegotiationResponse(l),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new nu("The connection was stopped during negotiation.");if(d.error)throw new Error(d.error);if(d.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(d.url&&(l=d.url),d.accessToken){const S=d.accessToken;this._accessTokenFactory=()=>S,this._httpClient._accessToken=S,this._httpClient._accessTokenFactory=void 0}p++}while(d.url&&p<qk);if(p===qk&&d.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(l,this._options.transport,d,i)}this.transport instanceof Gk&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(wn.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(d){return this._logger.log(wn.Error,"Failed to start the connection: "+d),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(d)}}async _getNegotiationResponse(i){const l={},[d,p]=_h();l[d]=p;const S=this._resolveNegotiateUrl(i);this._logger.log(wn.Debug,"Sending negotiation request: ".concat(S,"."));try{const b=await this._httpClient.post(S,{content:"",headers:{...l,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(b.statusCode!==200)return Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(b.statusCode,"'")));const g=JSON.parse(b.content);return(!g.negotiateVersion||g.negotiateVersion<1)&&(g.connectionToken=g.connectionId),g.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Uk("Client didn't negotiate Stateful Reconnect but the server did.")):g}catch(b){let g="Failed to complete negotiation with the server: "+b;return b instanceof df&&b.statusCode===404&&(g=g+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(wn.Error,g),Promise.reject(new Uk(g))}}_createConnectUrl(i,l){return l?i+(i.indexOf("?")===-1?"?":"&")+"id=".concat(l):i}async _createTransport(i,l,d,p){let S=this._createConnectUrl(i,d.connectionToken);if(this._isITransport(l)){this._logger.log(wn.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=l,await this._startTransport(S,p),this.connectionId=d.connectionId;return}const b=[],g=d.availableTransports||[];let w=d;for(const F of g){const R=this._resolveTransportOrError(F,l,p,(w==null?void 0:w.useStatefulReconnect)===!0);if(R instanceof Error)b.push("".concat(F.transport," failed:")),b.push(R);else if(this._isITransport(R)){if(this.transport=R,!w){try{w=await this._getNegotiationResponse(i)}catch(y){return Promise.reject(y)}S=this._createConnectUrl(i,w.connectionToken)}try{await this._startTransport(S,p),this.connectionId=w.connectionId;return}catch(y){if(this._logger.log(wn.Error,"Failed to start the transport '".concat(F.transport,"': ").concat(y)),w=void 0,b.push(new UV("".concat(F.transport," failed: ").concat(y),lo[F.transport])),this._connectionState!=="Connecting"){const v="Failed to select transport before stop() was called.";return this._logger.log(wn.Debug,v),Promise.reject(new nu(v))}}}}return b.length>0?Promise.reject(new BV("Unable to connect to the server with any of the available transports. ".concat(b.join(" ")),b)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(i){switch(i){case lo.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new h7(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case lo.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new d7(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case lo.LongPolling:return new Gk(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(i,"."))}}_startTransport(i,l){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async d=>{let p=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(i,l),await this.features.resend()}catch(S){p=!0}else{this._stopConnection(d);return}p&&this._stopConnection(d)}:this.transport.onclose=d=>this._stopConnection(d),this.transport.connect(i,l)}_resolveTransportOrError(i,l,d,p){const S=lo[i.transport];if(S==null)return this._logger.log(wn.Debug,"Skipping transport '".concat(i.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(i.transport,"' because it is not supported by this client."));if(g7(l,S))if(i.transferFormats.map(g=>Qo[g]).indexOf(d)>=0){if(S===lo.WebSockets&&!this._options.WebSocket||S===lo.ServerSentEvents&&!this._options.EventSource)return this._logger.log(wn.Debug,"Skipping transport '".concat(lo[S],"' because it is not supported in your environment.'")),new kV("'".concat(lo[S],"' is not supported in your environment."),S);this._logger.log(wn.Debug,"Selecting transport '".concat(lo[S],"'."));try{return this.features.reconnect=S===lo.WebSockets?p:void 0,this._constructTransport(S)}catch(g){return g}}else return this._logger.log(wn.Debug,"Skipping transport '".concat(lo[S],"' because it does not support the requested transfer format '").concat(Qo[d],"'.")),new Error("'".concat(lo[S],"' does not support ").concat(Qo[d],"."));else return this._logger.log(wn.Debug,"Skipping transport '".concat(lo[S],"' because it was disabled by the client.")),new FV("'".concat(lo[S],"' is disabled by the client."),S)}_isITransport(i){return i&&typeof i=="object"&&"connect"in i}_stopConnection(i){if(this._logger.log(wn.Debug,"HttpConnection.stopConnection(".concat(i,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,i=this._stopError||i,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(wn.Debug,"Call to HttpConnection.stopConnection(".concat(i,") was ignored because the connection is already in the disconnected state."));return}if(this._connectionState==="Connecting")throw this._logger.log(wn.Warning,"Call to HttpConnection.stopConnection(".concat(i,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(i,") was called while the connection is still in the connecting state."));if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),i?this._logger.log(wn.Error,"Connection disconnected with error '".concat(i,"'.")):this._logger.log(wn.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(l=>{this._logger.log(wn.Error,"TransportSendQueue.stop() threw error '".concat(l,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(i)}catch(l){this._logger.log(wn.Error,"HttpConnection.onclose(".concat(i,") threw error '").concat(l,"'."))}}}_resolveUrl(i){if(i.lastIndexOf("https://",0)===0||i.lastIndexOf("http://",0)===0)return i;if(!Hi.isBrowser)throw new Error("Cannot resolve '".concat(i,"'."));const l=window.document.createElement("a");return l.href=i,this._logger.log(wn.Information,"Normalizing '".concat(i,"' to '").concat(l.href,"'.")),l.href}_resolveNegotiateUrl(i){const l=new URL(i);l.pathname.endsWith("/")?l.pathname+="negotiate":l.pathname+="/negotiate";const d=new URLSearchParams(l.searchParams);return d.has("negotiateVersion")||d.append("negotiateVersion",this._negotiateVersion.toString()),d.has("useStatefulReconnect")?d.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&d.append("useStatefulReconnect","true"),l.search=d.toString(),l.toString()}}function g7(o,i){return!o||(i&o)!==0}class AC{constructor(i){this._transport=i,this._buffer=[],this._executing=!0,this._sendBufferedData=new qy,this._transportResult=new qy,this._sendLoopPromise=this._sendLoop()}send(i){return this._bufferData(i),this._transportResult||(this._transportResult=new qy),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(i){if(this._buffer.length&&typeof this._buffer[0]!=typeof i)throw new Error("Expected data to be of type ".concat(typeof this._buffer," but was of type ").concat(typeof i));this._buffer.push(i),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new qy;const i=this._transportResult;this._transportResult=void 0;const l=typeof this._buffer[0]=="string"?this._buffer.join(""):AC._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(l),i.resolve()}catch(d){i.reject(d)}}}static _concatBuffers(i){const l=i.map(S=>S.byteLength).reduce((S,b)=>S+b),d=new Uint8Array(l);let p=0;for(const S of i)d.set(new Uint8Array(S),p),p+=S.byteLength;return d.buffer}}class qy{constructor(){this.promise=new Promise((i,l)=>[this._resolver,this._rejecter]=[i,l])}resolve(){this._resolver()}reject(i){this._rejecter(i)}}const m7="json";class v7{constructor(){this.name=m7,this.version=2,this.transferFormat=Qo.Text}parseMessages(i,l){if(typeof i!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!i)return[];l===null&&(l=Gg.instance);const d=ls.parse(i),p=[];for(const S of d){const b=JSON.parse(S);if(typeof b.type!="number")throw new Error("Invalid payload.");switch(b.type){case Ar.Invocation:this._isInvocationMessage(b);break;case Ar.StreamItem:this._isStreamItemMessage(b);break;case Ar.Completion:this._isCompletionMessage(b);break;case Ar.Ping:break;case Ar.Close:break;case Ar.Ack:this._isAckMessage(b);break;case Ar.Sequence:this._isSequenceMessage(b);break;default:l.log(wn.Information,"Unknown message type '"+b.type+"' ignored.");continue}p.push(b)}return p}writeMessage(i){return ls.write(JSON.stringify(i))}_isInvocationMessage(i){this._assertNotEmptyString(i.target,"Invalid payload for Invocation message."),i.invocationId!==void 0&&this._assertNotEmptyString(i.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(i){if(this._assertNotEmptyString(i.invocationId,"Invalid payload for StreamItem message."),i.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(i){if(i.result&&i.error)throw new Error("Invalid payload for Completion message.");!i.result&&i.error&&this._assertNotEmptyString(i.error,"Invalid payload for Completion message."),this._assertNotEmptyString(i.invocationId,"Invalid payload for Completion message.")}_isAckMessage(i){if(typeof i.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(i){if(typeof i.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(i,l){if(typeof i!="string"||i==="")throw new Error(l)}}const y7={trace:wn.Trace,debug:wn.Debug,info:wn.Information,information:wn.Information,warn:wn.Warning,warning:wn.Warning,error:wn.Error,critical:wn.Critical,none:wn.None};function E7(o){const i=y7[o.toLowerCase()];if(typeof i<"u")return i;throw new Error("Unknown log level: ".concat(o))}class Hk{configureLogging(i){if(po.isRequired(i,"logging"),_7(i))this.logger=i;else if(typeof i=="string"){const l=E7(i);this.logger=new O0(l)}else this.logger=new O0(i);return this}withUrl(i,l){return po.isRequired(i,"url"),po.isNotEmpty(i,"url"),this.url=i,typeof l=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...l}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:l},this}withHubProtocol(i){return po.isRequired(i,"protocol"),this.protocol=i,this}withAutomaticReconnect(i){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return i?Array.isArray(i)?this.reconnectPolicy=new Zk(i):this.reconnectPolicy=i:this.reconnectPolicy=new Zk,this}withServerTimeout(i){return po.isRequired(i,"milliseconds"),this._serverTimeoutInMilliseconds=i,this}withKeepAliveInterval(i){return po.isRequired(i,"milliseconds"),this._keepAliveIntervalInMilliseconds=i,this}withStatefulReconnect(i){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=i==null?void 0:i.bufferSize,this}build(){const i=this.httpConnectionOptions||{};if(i.logger===void 0&&(i.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const l=new p7(this.url,i);return wC.create(l,this.logger||Gg.instance,this.protocol||new v7,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function _7(o){return o.log!==void 0}class T7 extends If{constructor(i){var l;super(),this.options=i,this.hubConnection=i.hubConnection,this.updateIntervalFrequency=(l=i.updateIntervalFrequency)!=null?l:6e4*5}async getServerTimeOffset(){const i=await this.getSyncedTime();this.emit("serverTimeOffsetUpdate",{serverTimeOffset:Date.now()-i.getTime()}),!(this.updateIntervalFrequency<6e4)&&(this.timeoutInstance=setTimeout(this.getServerTimeOffset.bind(this),this.updateIntervalFrequency))}async start(){await this.getServerTimeOffset()}async getSyncedTime(){const i=this,l=12,d=1e4,p=20;let S;return await new Promise((b,g)=>{var T;const w=[];let F=0,R,y;function v(){var U;y=Date.now(),(U=i.hubConnection)==null||U.invoke("echo"),R=setTimeout(()=>{g(new Error("Did not get sufficient echoes from the server in time"))},d)}function D(U){S=U,clearTimeout(R),w.push(Date.now()-y),F++,F<l?setTimeout(v,p):m()}(T=i.hubConnection)==null||T.on("echo",D);function m(){var x;if((x=i.hubConnection)==null||x.off("echo",D),S===void 0){g(new Error("Server timestamp is undefined"));return}let U;i.options.roundtripCalcStrategy==="mean"?U=w.reduce((_,I)=>_+I)/w.length:U=bV(w),b(new Date(S+U/2))}v()})}destroy(){clearTimeout(this.timeoutInstance)}}const $s={STATE_UPDATE:"OnStateUpdated",RECIEVE_GROUP_COMMAND:"receiveGroupCommand",RECIEVE_GLOBAL_COMMAND:"receiveGlobalCommand",CLIENT_DISCONNECT:"DeviceLogOut",SETUP_REQUEST_HOST_TV_CONNECTED:"SetupRequestHostTvConnected",SETUP_STATUS_UPDATE:"SetupStatusUpdate",SETUP_ERROR_RECEIVED:"SetupErrorReceived"},QI={WAITING_FOR_HOST:"WaitingForHostState",READY_TO_PAIR_WITH_HOST:"ShowQrCodeState",CONNECTED_STATE:"ConnectedState",SHOW_QR_CODE_STATE:"ShowQrCode",HOST_TV_STATE:"HostTVState",IDLE:"Idle"};class S7 extends If{constructor({deviceId:i,debug:l}){super(),this.hubConnection=null,this.globalHubConnection=null,this.connected=!1,this.serverTimeService=null,this.state=QI.IDLE,this.deviceId=i,this.debugLogging=l!=null?l:!1}setupTimeService(){this.serverTimeService=new T7({hubConnection:this.hubConnection}),this.serverTimeService.on("serverTimeOffsetUpdate",i=>{this.emit("serverTimeOffsetUpdate",i)}),this.serverTimeService.start()}async join(){await this.sendGroupCommand({command:"join",value:this.deviceId})}async disconnect(){var i;console.log("SignalR: disconnect",$s.CLIENT_DISCONNECT,{deviceId:this.deviceId}),this.connected=!1,await((i=this.hubConnection)==null?void 0:i.invoke($s.CLIENT_DISCONNECT))}globalDisconnect(){var i;console.log("Disconnecting global signalR...",this.deviceId),(i=this.globalHubConnection)==null||i.invoke($s.CLIENT_DISCONNECT)}connect({url:i,accessToken:l,groupName:d}){var p;this.groupName=d,this.hubConnection=new Hk().withUrl(i,{accessTokenFactory:()=>l,transport:lo.WebSockets}).withAutomaticReconnect().configureLogging(this.debugLogging?wn.Trace:wn.Information).build(),(p=this.hubConnection)==null||p.start().then(()=>{this.setupTimeService(),this.connectEventHandlers(),this.connected=!0,this.join()}).catch(S=>{console.error("Connection failed:",S)})}async globalConnect({url:i,accessToken:l}){return new Promise((d,p)=>{this.globalHubConnection=new Hk().withUrl(i,{accessTokenFactory:()=>l,transport:lo.WebSockets}).withAutomaticReconnect().build(),this.globalHubConnection.start().catch(S=>{console.error("Global signalR connection failed:",S),p()}),this.globalHubConnection.on($s.SETUP_REQUEST_HOST_TV_CONNECTED,({scanTvDeviceId:S,ticketCode:b})=>{localStorage.setItem("ticketCode",b),d({ticketCode:b,scanTvDeviceId:S})})})}connectEventHandlers(){var i,l,d,p,S,b;(i=this.hubConnection)==null||i.on($s.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.on($s.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.on($s.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),(p=this.hubConnection)==null||p.on($s.SETUP_STATUS_UPDATE,this.onSetupStatusUpdate.bind(this)),(S=this.hubConnection)==null||S.onclose(g=>{g?console.error("SignalR: closed with error",g):console.log("SignalR: closed")}),(b=this.hubConnection)==null||b.onreconnected(g=>{g?console.error("SignalR: Reconnected error",g):console.log("SignalR: Reconnected")})}async destroy(){var i,l,d,p;(i=this.hubConnection)==null||i.off($s.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.off($s.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.off($s.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),await this.disconnect(),(p=this.serverTimeService)==null||p.destroy(),super.destroy()}onReceiveGroupCommand(i){var l,d,p,S,b;switch(console.log("onReceiveGroupCommand",i),i.command){case"play":if(this.emit("startTimeUpdated",{startTime:new Date(i.value.startDate)}),i.value.senderID===this.deviceId)return;((l=i.value.rateClockState)==null?void 0:l.rate)===0?this.emit("pausePlayStream",{command:"pause",reference:(d=i.value.rateClockState)==null?void 0:d.reference,start:(p=i.value.rateClockState)==null?void 0:p.start}):this.emit("pausePlayStream",{command:"play",reference:(S=i.value.rateClockState)==null?void 0:S.reference,start:(b=i.value.rateClockState)==null?void 0:b.start});break;case"join":this.emit("join",void 0);break;case"cast":this.emit("cast",{index:i.value});break;case"prepareCast":this.emit("prepareCast",{index:i.value});break;case"cancelCast":console.log("cancelCast");break}}onReceiveGlobalCommand(i){switch(console.log("onReceiveGlobalCommand",i),i.command){case"status_changed":this.emit("eventStatusChanged",void 0);break;case"event_canceled":this.emit("eventCanceled",void 0);break}}async sendGroupCommand(i){var l;return await((l=this.hubConnection)==null?void 0:l.invoke("sendGroupCommand",{groupName:this.groupName,arguments:[i]}))}emitCast(i){this.emit("cast",{index:i})}onStateUpdate(i){switch(this.state=i.state.$type,i.state.$type){case QI.CONNECTED_STATE:if(!i.state.sessionId)return;this.emit("connected",{sessionId:i.state.sessionId}),this.emit("stateUpdated",{state:this.state});return;default:this.emit("stateUpdated",{state:this.state});break}}onSetupStatusUpdate(i){console.log("SetupStatusUpdate: ",i),this.emit("setupStatusUpdate",{deviceLists:i})}}async function Ah(o,i,l){var d;try{const p=await fetch(o,i);switch(p.status){case 401:throw new og(l==null?void 0:l.name,"Unauthorized","Unauthorized",p.status);case 403:throw new og(l==null?void 0:l.name,"Forbidden","Forbidden",p.status)}const S=await p.json();if(!p.ok)throw new og(l==null?void 0:l.name,(d=S.sys)==null?void 0:d.id,S.message,p.status);return S}catch(p){throw p instanceof og?p:new og(l.name,"Network Error",l.message||"Could not make the request")}}var JI={exports:{}};(function(o,i){(function(l,d){var p="1.0.38",S="",b="?",g="function",w="undefined",F="object",R="string",y="major",v="model",D="name",m="type",T="vendor",U="version",x="architecture",_="console",I="mobile",C="tablet",j="smarttv",z="wearable",$="embedded",W=500,ue="Amazon",N="Apple",X="ASUS",ce="BlackBerry",oe="Browser",de="Chrome",Ce="Edge",Je="Firefox",Te="Google",je="Huawei",nt="LG",ct="Microsoft",Ie="Motorola",Ye="Opera",mt="Samsung",xe="Sharp",We="Sony",it="Xiaomi",qt="Zebra",Ft="Facebook",gt="Chromium OS",St="Mac OS",Re=function(ft,Et){var Tt={};for(var Ct in ft)Et[Ct]&&Et[Ct].length%2===0?Tt[Ct]=Et[Ct].concat(ft[Ct]):Tt[Ct]=ft[Ct];return Tt},re=function(ft){for(var Et={},Tt=0;Tt<ft.length;Tt++)Et[ft[Tt].toUpperCase()]=ft[Tt];return Et},Be=function(ft,Et){return typeof ft===R?O(Et).indexOf(O(ft))!==-1:!1},O=function(ft){return ft.toLowerCase()},M=function(ft){return typeof ft===R?ft.replace(/[^\d\.]/g,S).split(".")[0]:d},q=function(ft,Et){if(typeof ft===R)return ft=ft.replace(/^\s\s*/,S),typeof Et===w?ft:ft.substring(0,W)},K=function(ft,Et){for(var Tt=0,Ct,hn,Qt,nn,Ot,Un;Tt<Et.length&&!Ot;){var gr=Et[Tt],Or=Et[Tt+1];for(Ct=hn=0;Ct<gr.length&&!Ot&&gr[Ct];)if(Ot=gr[Ct++].exec(ft),Ot)for(Qt=0;Qt<Or.length;Qt++)Un=Ot[++hn],nn=Or[Qt],typeof nn===F&&nn.length>0?nn.length===2?typeof nn[1]==g?this[nn[0]]=nn[1].call(this,Un):this[nn[0]]=nn[1]:nn.length===3?typeof nn[1]===g&&!(nn[1].exec&&nn[1].test)?this[nn[0]]=Un?nn[1].call(this,Un,nn[2]):d:this[nn[0]]=Un?Un.replace(nn[1],nn[2]):d:nn.length===4&&(this[nn[0]]=Un?nn[3].call(this,Un.replace(nn[1],nn[2])):d):this[nn]=Un||d;Tt+=2}},ye=function(ft,Et){for(var Tt in Et)if(typeof Et[Tt]===F&&Et[Tt].length>0){for(var Ct=0;Ct<Et[Tt].length;Ct++)if(Be(Et[Tt][Ct],ft))return Tt===b?d:Tt}else if(Be(Et[Tt],ft))return Tt===b?d:Tt;return ft},he={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},wt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[U,[D,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[U,[D,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[D,U],[/opios[\/ ]+([\w\.]+)/i],[U,[D,Ye+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[U,[D,Ye+" GX"]],[/\bopr\/([\w\.]+)/i],[U,[D,Ye]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[U,[D,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[D,U],[/\bddg\/([\w\.]+)/i],[U,[D,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[U,[D,"UC"+oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[U,[D,"WeChat"]],[/konqueror\/([\w\.]+)/i],[U,[D,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[U,[D,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[U,[D,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[U,[D,"Smart Lenovo "+oe]],[/(avast|avg)\/([\w\.]+)/i],[[D,/(.+)/,"$1 Secure "+oe],U],[/\bfocus\/([\w\.]+)/i],[U,[D,Je+" Focus"]],[/\bopt\/([\w\.]+)/i],[U,[D,Ye+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[U,[D,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[U,[D,"Dolphin"]],[/coast\/([\w\.]+)/i],[U,[D,Ye+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[U,[D,"MIUI "+oe]],[/fxios\/([-\w\.]+)/i],[U,[D,Je]],[/\bqihu|(qi?ho?o?|360)browser/i],[[D,"360 "+oe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[D,/(.+)/,"$1 "+oe],U],[/samsungbrowser\/([\w\.]+)/i],[U,[D,mt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[D,/_/g," "],U],[/metasr[\/ ]?([\d\.]+)/i],[U,[D,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[D,"Sogou Mobile"],U],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[D,U],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[D],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[D,Ft],U],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[D,U],[/\bgsa\/([\w\.]+) .*safari\//i],[U,[D,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[U,[D,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[U,[D,de+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[D,de+" WebView"],U],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[U,[D,"Android "+oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[D,U],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[U,[D,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[U,D],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[D,[U,ye,he]],[/(webkit|khtml)\/([\w\.]+)/i],[D,U],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[D,"Netscape"],U],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[U,[D,Je+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[D,U],[/(cobalt)\/([\w\.]+)/i],[D,[U,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[x,"amd64"]],[/(ia32(?=;))/i],[[x,O]],[/((?:i[346]|x)86)[;\)]/i],[[x,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[x,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[x,"armhf"]],[/windows (ce|mobile); ppc;/i],[[x,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[x,/ower/,S,O]],[/(sun4\w)[;\)]/i],[[x,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[x,O]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[v,[T,mt],[m,C]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[v,[T,mt],[m,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[v,[T,N],[m,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[T,N],[m,C]],[/(macintosh);/i],[v,[T,N]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[v,[T,xe],[m,I]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[v,[T,je],[m,C]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[v,[T,je],[m,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[v,/_/g," "],[T,it],[m,I]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[v,/_/g," "],[T,it],[m,C]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[v,[T,"OPPO"],[m,I]],[/\b(opd2\d{3}a?) bui/i],[v,[T,"OPPO"],[m,C]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[v,[T,"Vivo"],[m,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[v,[T,"Realme"],[m,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[v,[T,Ie],[m,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[v,[T,Ie],[m,C]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[v,[T,nt],[m,C]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[v,[T,nt],[m,I]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[v,[T,"Lenovo"],[m,C]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[v,/_/g," "],[T,"Nokia"],[m,I]],[/(pixel c)\b/i],[v,[T,Te],[m,C]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[v,[T,Te],[m,I]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[T,We],[m,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[v,"Xperia Tablet"],[T,We],[m,C]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[v,[T,"OnePlus"],[m,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[v,[T,ue],[m,C]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[v,/(.+)/g,"Fire Phone $1"],[T,ue],[m,I]],[/(playbook);[-\w\),; ]+(rim)/i],[v,T,[m,C]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[v,[T,ce],[m,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[v,[T,X],[m,C]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[v,[T,X],[m,I]],[/(nexus 9)/i],[v,[T,"HTC"],[m,C]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[v,/_/g," "],[m,I]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[v,[T,"Acer"],[m,C]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[v,[T,"Meizu"],[m,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[v,[T,"Ulefone"],[m,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,v,[m,I]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,v,[m,C]],[/(surface duo)/i],[v,[T,ct],[m,C]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[v,[T,"Fairphone"],[m,I]],[/(u304aa)/i],[v,[T,"AT&T"],[m,I]],[/\bsie-(\w*)/i],[v,[T,"Siemens"],[m,I]],[/\b(rct\w+) b/i],[v,[T,"RCA"],[m,C]],[/\b(venue[\d ]{2,7}) b/i],[v,[T,"Dell"],[m,C]],[/\b(q(?:mv|ta)\w+) b/i],[v,[T,"Verizon"],[m,C]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[v,[T,"Barnes & Noble"],[m,C]],[/\b(tm\d{3}\w+) b/i],[v,[T,"NuVision"],[m,C]],[/\b(k88) b/i],[v,[T,"ZTE"],[m,C]],[/\b(nx\d{3}j) b/i],[v,[T,"ZTE"],[m,I]],[/\b(gen\d{3}) b.+49h/i],[v,[T,"Swiss"],[m,I]],[/\b(zur\d{3}) b/i],[v,[T,"Swiss"],[m,C]],[/\b((zeki)?tb.*\b) b/i],[v,[T,"Zeki"],[m,C]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],v,[m,C]],[/\b(ns-?\w{0,9}) b/i],[v,[T,"Insignia"],[m,C]],[/\b((nxa|next)-?\w{0,9}) b/i],[v,[T,"NextBook"],[m,C]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],v,[m,I]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],v,[m,I]],[/\b(ph-1) /i],[v,[T,"Essential"],[m,I]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[v,[T,"Envizen"],[m,C]],[/\b(trio[-\w\. ]+) b/i],[v,[T,"MachSpeed"],[m,C]],[/\btu_(1491) b/i],[v,[T,"Rotor"],[m,C]],[/(shield[\w ]+) b/i],[v,[T,"Nvidia"],[m,C]],[/(sprint) (\w+)/i],[T,v,[m,I]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[T,ct],[m,I]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[T,qt],[m,C]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[T,qt],[m,I]],[/smart-tv.+(samsung)/i],[T,[m,j]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[T,mt],[m,j]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,nt],[m,j]],[/(apple) ?tv/i],[T,[v,N+" TV"],[m,j]],[/crkey/i],[[v,de+"cast"],[T,Te],[m,j]],[/droid.+aft(\w+)( bui|\))/i],[v,[T,ue],[m,j]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[v,[T,xe],[m,j]],[/(bravia[\w ]+)( bui|\))/i],[v,[T,We],[m,j]],[/(mitv-\w{5}) bui/i],[v,[T,it],[m,j]],[/Hbbtv.*(technisat) (.*);/i],[T,v,[m,j]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,q],[v,q],[m,j]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,j]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,v,[m,_]],[/droid.+; (shield) bui/i],[v,[T,"Nvidia"],[m,_]],[/(playstation [345portablevi]+)/i],[v,[T,We],[m,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[v,[T,ct],[m,_]],[/((pebble))app/i],[T,v,[m,z]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[v,[T,N],[m,z]],[/droid.+; (glass) \d/i],[v,[T,Te],[m,z]],[/droid.+; (wt63?0{2,3})\)/i],[v,[T,qt],[m,z]],[/(quest( \d| pro)?)/i],[v,[T,Ft],[m,z]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[m,$]],[/(aeobc)\b/i],[v,[T,ue],[m,$]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[v,[m,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[v,[m,C]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,C]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,I]],[/(android[-\w\. ]{0,9});.+buil/i],[v,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[U,[D,Ce+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[U,[D,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[D,U],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[U,D]],os:[[/microsoft (windows) (vista|xp)/i],[D,U],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[D,[U,ye,Ke]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[U,ye,Ke],[D,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[U,/_/g,"."],[D,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[D,St],[U,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[U,D],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[D,U],[/\(bb(10);/i],[U,[D,ce]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[U,[D,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[U,[D,Je+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[U,[D,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[U,[D,"watchOS"]],[/crkey\/([\d\.]+)/i],[U,[D,de+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[D,gt],U],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[D,U],[/(sunos) ?([\w\.\d]*)/i],[[D,"Solaris"],U],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[D,U]]},st=function(ft,Et){if(typeof ft===F&&(Et=ft,ft=d),!(this instanceof st))return new st(ft,Et).getResult();var Tt=typeof l!==w&&l.navigator?l.navigator:d,Ct=ft||(Tt&&Tt.userAgent?Tt.userAgent:S),hn=Tt&&Tt.userAgentData?Tt.userAgentData:d,Qt=Et?Re(wt,Et):wt,nn=Tt&&Tt.userAgent==Ct;return this.getBrowser=function(){var Ot={};return Ot[D]=d,Ot[U]=d,K.call(Ot,Ct,Qt.browser),Ot[y]=M(Ot[U]),nn&&Tt&&Tt.brave&&typeof Tt.brave.isBrave==g&&(Ot[D]="Brave"),Ot},this.getCPU=function(){var Ot={};return Ot[x]=d,K.call(Ot,Ct,Qt.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[T]=d,Ot[v]=d,Ot[m]=d,K.call(Ot,Ct,Qt.device),nn&&!Ot[m]&&hn&&hn.mobile&&(Ot[m]=I),nn&&Ot[v]=="Macintosh"&&Tt&&typeof Tt.standalone!==w&&Tt.maxTouchPoints&&Tt.maxTouchPoints>2&&(Ot[v]="iPad",Ot[m]=C),Ot},this.getEngine=function(){var Ot={};return Ot[D]=d,Ot[U]=d,K.call(Ot,Ct,Qt.engine),Ot},this.getOS=function(){var Ot={};return Ot[D]=d,Ot[U]=d,K.call(Ot,Ct,Qt.os),nn&&!Ot[D]&&hn&&hn.platform&&hn.platform!="Unknown"&&(Ot[D]=hn.platform.replace(/chrome os/i,gt).replace(/macos/i,St)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(Ot){return Ct=typeof Ot===R&&Ot.length>W?q(Ot,W):Ot,this},this.setUA(Ct),this};st.VERSION=p,st.BROWSER=re([D,U,y]),st.CPU=re([x]),st.DEVICE=re([v,T,m,_,I,j,C,z,$]),st.ENGINE=st.OS=re([D,U]),o.exports&&(i=o.exports=st),i.UAParser=st;var at=typeof l!==w&&(l.jQuery||l.Zepto);if(at&&!at.ua){var tt=new st;at.ua=tt.getResult(),at.ua.get=function(){return tt.getUA()},at.ua.set=function(ft){tt.setUA(ft);var Et=tt.getResult();for(var Tt in Et)at.ua[Tt]=Et[Tt]}}})(typeof window=="object"?window:tu)})(JI,JI.exports);var w7=JI.exports;const Kk=new w7.UAParser;function A7(o){const i=Kk.getOS(),l=Kk.getBrowser();return"Gigset/".concat(o," (").concat(i.name," ").concat(i.version,"; ").concat(l.name," ").concat(l.version,")")}function Hg({sessionId:o,appVersion:i,apiVersion:l}){const d={"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*","Gigset-Client":A7(i),"Api-version":l!=null?l:"v1"};return o&&(d.Session=o),d}async function I7({deviceId:o,appVersion:i,baseUrl:l}){const d={deviceOsVersion:window.navigator.userAgent,deviceName:m4,deviceId:o};return(await Ah)("".concat(l,"/devicehub-api/negotiate-tv"),{method:"POST",body:JSON.stringify(d),headers:Hg({appVersion:i})},{name:Ea.NEGOTIATE_TV,message:"could not fetch negotiate-tv data"})}async function b7({deviceId:o,ticketCode:i,scanTvDeviceId:l,appVersion:d,baseUrl:p,ticketPrefix:S}){let b=p;S&&(b="".concat(p));const g={ticketCode:i,deviceOsVersion:window.navigator.userAgent,deviceName:m4,deviceId:o,scanTvDeviceId:l};return(await Ah)("".concat(b,"/devicehub-api/negotiate"),{method:"POST",body:JSON.stringify(g),headers:Hg({appVersion:d})},{name:Ea.NEGOTIATE,message:"could not fetch negotiate data"})}async function C7({sessionId:o,appVersion:i,baseUrl:l,ticketPrefix:d,ticketCode:p}){let S=l;d&&(S="".concat(l,"/").concat(d));const b=await Ah("".concat(S,"/timeline-api/timeline/").concat(p,"/generate"),{method:"GET",headers:Hg({sessionId:o,appVersion:i})},{name:Ea.GENERATE,message:"could not fetch generate data"});return{...await fetch("".concat(b.timelineUrl).concat(b.queryParameters),{method:"GET",headers:Hg({sessionId:o,appVersion:i})}).then(async w=>await w.json()),queryParameters:b.queryParameters,distributionUrl:b.distributionUrl}}async function R7({sessionId:o,appVersion:i,baseUrl:l,ticketCode:d}){return(await Ah)("".concat(l,"/static-api/event/").concat(d,"/status"),{method:"GET",headers:Hg({sessionId:o,appVersion:i})},{name:Ea.EVENT_STATUS,message:"failed to get event status data"})}function N7(o){return"".concat(o,"/timeline-api/drm/license?drm=widevine")}var rf=(o=>(o.JUMPSPOT="jumpspot",o.FOLLOW="follow",o))(rf||{});function IC(o){return[...o.places.flatMap((i,l)=>i.jumpSpots.map(d=>({camera:d.camera,title:d.title,type:"jumpspot",placeIndex:l,mapPosition:i.mapPosition,mapScale:i.mapScale,placeTitle:i.title}))),...o.follows.map(i=>({camera:i.camera,title:i.title,type:"follow",mapPosition:i.mapPositions}))].map((i,l)=>({...i,index:l}))}function bC(o,i){return IC(o).filter(d=>{const p=vi(d.camera.span.time,o.frameRate),S=vi(d.camera.span.time,o.frameRate)+vi(d.camera.span.duration,o.frameRate);return p<=i&&S>=i})}function E4(o,i,l,d){const p=bC(o,i+l+2);if(!p.length)return;if(d){const g=(d==null?void 0:d.placeIndex)!==void 0&&p.find(w=>w.type==="jumpspot"&&w.placeIndex===(d==null?void 0:d.placeIndex));if(g)return g}const S=p.find(g=>g.type==="jumpspot");if(S)return S;const b=p.find(g=>g.type==="follow");if(b)return b}function x7(o){const i=IC(o),l=o.frameRate;return i.sort((d,p)=>{const S=vi(d.camera.span.time,l)+vi(d.camera.span.duration,l);return vi(p.camera.span.time,l)+vi(p.camera.span.duration,l)-S}),i[0]}function vi(o,i){if(!o)return 0;const[l,d,p,S]=o.split(":").map(Number),b=l*60*60,g=d*60;if(i){const w=S/i;return b+g+p+w}else return b+g+p}function eb(o,i,l){return bC(i,l.getExpectedPositionInSeconds()).find(d=>d.index===o)}function tb(o,i){return IC(i).find(d=>d.camera.cameraID===o)}const M7=o=>{if(typeof o=="string")return"String!";if(typeof o=="number")return"Int";if(typeof o=="boolean")return"Boolean";if(typeof o=="object"&&"OR"in o)return"ResourceSetFilter";throw new Error("Unknown type: ".concat(typeof o))};function _4(o,i,l){const d=o.includes("staging")||o.includes("qa"),p={...l,preview:d},b=(Array.isArray(i)?i[0]:i).replace(/#.*/g,"").replace(/\\n/g," ").replace(/\s\s+/g," ").replace(/\s*({|}|\(|\)|\.|:|,)\s*/g,"$1"),g=Object.entries(p).map(([F,R])=>"$".concat(F,": ").concat(M7(R))).join(", "),w="query(".concat(g,")").concat(b);return JSON.stringify({query:w,variables:p})}const T4=o=>"https://graphql.contentful.com/content/v1/spaces/".concat(o,"/environments/master");function S4(o,i){return{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:o}}const D7=(o,i)=>_4(i,"\n        {\n          eventCollection(\n            limit: 1\n            preview: $preview\n            where: { ticketCodePrefix: $ticketCodePrefix }\n          ) {\n            items {\n              title\n              timeZoneInSecondsFromGmt\n              timeZoneCode\n              preScreen {\n                showTitle\n                countdownTitle\n                startTimeSubtitle\n                logoutButtonTitle\n                setupGuideButtonTitle\n                backgroundLandscape {\n                  url\n                }\n                backgroundPortrait {\n                  url\n                }\n                logoLeft {\n                  url\n                }\n                logoRight {\n                  url\n                }\n              }\n              upsell {\n                title\n                web {\n                  title\n                  body\n                  image {\n                    url\n                  }\n                  linkTitle\n                  link\n                  upsellLink {\n                    label\n                    url\n                  }\n                }\n              }\n              postScreen {\n                title\n                body\n                logoutButtonTitle\n                scanQrCodeLabel\n                offersCollection(limit: 10) {\n                  items {\n                    link\n                    image {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      ",{preview:!0,ticketCodePrefix:o});async function P7(o,i,l,d){var b,g;const p=D7(o.toUpperCase(),i),S=await Ah(T4(d),S4(p,l),{name:Ea.EVENT_META,message:"Could not fetch event meta."});return(g=(b=S==null?void 0:S.data)==null?void 0:b.eventCollection.items)==null?void 0:g[0]}function O7(o,i){const l=o.reduce((d,p)=>(d.OR.push({slug:p}),d),{OR:[]});return _4(i,"\n        {\n          resourceSetCollection(preview: $preview, where: $resourceSetFilter) {\n            items {\n              slug\n              resourcesCollection {\n                items {\n                  key\n                  value\n                }\n              }\n            }\n          }\n        }\n      ",{resourceSetFilter:l})}async function L7(o,i,l){var S,b;const d=O7(["app-general","player","setup-guide","setup","ticket-entry","web-requirements","web-app-pair"],o);return(b=(S=(await Ah(T4(l),S4(d,i),{name:Ea.CONTENTFUL,message:"Could not fetch contentful data."})).data)==null?void 0:S.resourceSetCollection)==null?void 0:b.items}const Vk=.4,zk=.2;class k7{constructor(){switch(this._algorithmArray=[l=>{const d=this._videoElement;if(d){const p=l-d.currentTime-this._offset+.14;if((p>zk||p<-zk)&&!this._switchingInProgress)if(this._switchingInProgress=!0,setTimeout(()=>{this._switchingInProgress=!1},2e3),p>1||p<-1)d.currentTime=d.currentTime+p+(p<0?0:1.8);else{const S=p/2;d.playbackRate=Math.sign(p)===1?2:.5,setTimeout(()=>{d.playbackRate=1},Math.abs(S)*2200)}}},l=>{if(this._videoElement&&!this._switchingInProgress){const d=this._videoElement,p=l-d.currentTime-this._offset+.9;(p>Vk||p<-Vk)&&!this._switchingInProgress&&(this._switchingInProgress=!0,d.currentTime=d.currentTime+p,setTimeout(()=>{this._switchingInProgress=!1},3e3))}}],this._offset=0,this._switchingInProgress=!1,uE()){case fc.TIZEN:this._algorithm=0;break;case fc.WEBOS:this._algorithm=1;break;default:this._algorithm=0;break}}connectMediaElement(i,l=0){this._videoElement=i,this._offset=l}disconnectMedia(){this._videoElement=null,this._offset=0}sync(i){this._algorithmArray[this._algorithm](i)}destroy(){}}class F7 extends If{constructor(i){super(),this.isPaused=!1,this.playheadOffset=0,this.timelineFetchBuffer=3e5,this.prepareBuffer=1e4,this.playerSyncer=new k7,this.state="idle",this.startTime=i,this.serverTimeOffset=0}get adjustedStartTime(){return this.startTime.getTime()?this.startTime.getTime()+this.serverTimeOffset:0}get isLive(){const i=this.adjustedEndTime;return this.adjustedStartTime&&this.adjustedStartTime<Date.now()&&i&&i>Date.now()}set loading(i){this.emit("playerLoadingState",i)}get timeToPrepareStart(){return this.adjustedStartTime-Date.now()-this.prepareBuffer}get isInPrepare(){return this.timeToPrepareStart<0&&this.timeToPrepareStart>this.prepareBuffer*-1}get adjustedEndTime(){if(!this.adjustedStartTime||!this._timelineData)return 0;const i=this._timelineData.frameRate,l=x7(this._timelineData);return this.adjustedStartTime+(vi(l.camera.span.time,i)+vi(l.camera.span.duration,i))*1e3+this.playheadOffset*1e3}get demoEndtime(){return Date.now()-7047966+1e4}set timelineData(i){this._timelineData=i}pausePlayStream(i,l,d){if(i==="pause"&&!this.isPaused)this.isPaused=!0;else if(i==="play"){if(l&&d){const p=new Date(l).getTime()/1e3,S=new Date(d).getTime()/1e3;this.playheadOffset!==0&&(this.playheadOffset=0),this.playheadOffset=p-S}this.onStart()}}serverNow(){return Date.now()-this.serverTimeOffset}onStart(){this.state="started",this.emit("start",void 0),this.isPaused=!1,clearInterval(this.queryInterval),this.queryInterval=setInterval(()=>{const i=this.getExpectedPositionInSeconds();this.isPaused||this.playerSyncer.sync(i)},500)}onPrepareStart(){this.emit("prepareStart",void 0)}updateStartTime(i,l=!1){this.startTime=i,this.emit("startTimeUpdated",void 0),this.preparePlayback(),l&&this.adjustedStartTime>Date.now()&&this.updateTimelineFetch()}updateTimelineFetch(){this.adjustedStartTime-this.timelineFetchBuffer>Date.now()?(clearTimeout(this.fetchTimelineTimeout),this.fetchTimelineTimeout=setTimeout(()=>{this.emit("fetchTimeline",void 0)},this.adjustedStartTime-this.timelineFetchBuffer-Date.now())):this.emit("fetchTimeline",void 0)}preparePlayback(){this.adjustedStartTime>Date.now()?(clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),this.playheadOffset=0,this.startTimeout=setTimeout(()=>{this.onStart()},this.adjustedStartTime-Date.now()),this.timeToPrepareStart>0?this.prepareStartTimeout=setTimeout(()=>{this.onPrepareStart()},this.timeToPrepareStart):this.onPrepareStart()):this.adjustedStartTime<Date.now()&&this.state!=="started"?(this.emit("fetchTimeline",void 0),this.onStart()):this.state!=="started"&&this._timelineData&&this.onStart()}updateServerTimeOffset(i){this.serverTimeOffset=i,this.emit("startTimeUpdated",void 0),this.preparePlayback()}getExpectedPositionInSeconds(){return(Date.now()-this.adjustedStartTime)/1e3-this.playheadOffset}destroy(){clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),clearInterval(this.queryInterval),clearTimeout(this.fetchTimelineTimeout),super.destroy()}}class U7 extends If{constructor(i,l,d){super(),this.eventClock=i,this.timelineData=void 0,this.nearEndThreshold=l!=null?l:0,this.transitionThreshold=d!=null?d:2}updateTimelineData(i){this.timelineData=i}updatePlaying(i){var d,p,S;let l=!1;if(this.timelineData){const b=this.timelineData.frameRate,g=(S=(p=(d=i.camera.attentions)==null?void 0:d.filter(w=>w.scope==="global"))==null?void 0:p.sort((w,F)=>vi(w.time)-vi(F.time)))!=null?S:[];clearInterval(this.playbackInterval),this.playbackInterval=setInterval(()=>{clearTimeout(this.nearEndTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.attentionTimeout);const F=this.eventClock.getExpectedPositionInSeconds()-vi(i.camera.span.time,b),R=vi(i.camera.span.duration,b)-F;if(g.length){const y=g.find(D=>F<vi(D.time)),v=y?vi(y.time)-F:0;v>0&&v<1&&(this.attentionTimeout=setTimeout(()=>{this.emit("attention",void 0)},v))}R<=this.nearEndThreshold+1&&R>this.nearEndThreshold&&!l?this.nearEndTimeout=setTimeout(()=>{this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0},(R-this.nearEndThreshold)*1e3):R<this.nearEndThreshold&&!l&&(this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0),R<=this.transitionThreshold+1&&R>this.transitionThreshold&&(this.transitionTimeout=setTimeout(()=>{this.emit("transition",void 0)},(R-this.transitionThreshold)*1e3)),R<=1&&R>0&&(this.endedTimeout=setTimeout(()=>{this.emit("ended",void 0)},R*1e3))},1e3)}}endEvent(){this.emit("eventEnded",void 0)}destroy(){clearInterval(this.playbackInterval),clearTimeout(this.nearEndTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.attentionTimeout),super.destroy()}}const B7="1.0.0";var gn=Z0();const $o=mb(gn);function j7({baseUrl:o,contentfulAccessToken:i,contentfulSpaceId:l}){const[d,p]=gn.useState(),[S,b]=gn.useState(),g=gn.useCallback((w,F)=>{var R,y;return d&&((y=(R=d.find(v=>v.slug===w))==null?void 0:R.resourcesCollection.items.find(v=>v.key===F))==null?void 0:y.value)||""},[d]);return gn.useEffect(()=>{o&&i&&l&&(b(void 0),L7(o,i,l).then(w=>{p(w)}).catch(w=>{b(w)}))},[o,i,l]),{contentfulData:d,getContentfulValue:g,error:S}}const Z7={ticketCode:"",preferredProfile:"dash-drm",getContentfulValue:()=>"",isDev:!1,preConnectErrors:[],postConnectErrors:[]},Sa=$o.createContext(Z7);function G7({children:o,baseUrl:i,preferredProfile:l,contentfulAccessToken:d,contentfulSpaceId:p,ticketCodeProp:S}){const b=P0(),g=B7,[w,F]=gn.useState(),[R,y]=gn.useState(),[v,D]=gn.useState(),[m,T]=gn.useState(),[U,x]=gn.useState(),[_,I]=gn.useState(),[C,j]=gn.useState(""),[z,$]=gn.useState(),[W,ue]=gn.useState(),[N,X]=gn.useState(),[ce,oe]=gn.useState(),[de,Ce]=gn.useState(),[Je,Te]=gn.useState([]),[je,nt]=gn.useState([]),[ct,Ie]=gn.useState(!1),[Ye,mt]=gn.useState(),xe=gn.useRef(),We=gn.useRef(),{getContentfulValue:it,error:qt}=j7({baseUrl:i,contentfulAccessToken:d,contentfulSpaceId:p}),Ft=3;function gt(St,Re){return Re.filter(re=>St!==re.name)}return gn.useEffect(()=>{Te(qt?St=>[...St,qt]:St=>gt(Ea.CONTENTFUL,St))},[qt]),gn.useEffect(()=>{j(S),$("SCAN_DEVICE_ID")},[S]),gn.useEffect(()=>{const St=()=>{Te([])};return document.addEventListener("clearPreConnectErrors",St),()=>{document.removeEventListener("clearPreConnectErrors",St)}},[]),gn.useEffect(()=>{i&&b&&(async()=>{let Re=0;const re=()=>I7({deviceId:b,appVersion:g,baseUrl:i});for(;Re<Ft;)await re().then(Be=>{Ce(Be),Re=Ft}).catch(Be=>{Re+=1,Re===2&&console.error(Be)})})()},[g,i,b]),gn.useEffect(()=>{if(!de)return;const St=new S7({deviceId:b,debug:!1});T(St),St.globalConnect(de).then(({ticketCode:Re,scanTvDeviceId:re})=>{j(Re),$(re)})},[de]),gn.useEffect(()=>{!C||!z||!(m!=null&&m.globalHubConnection)||m.globalDisconnect()},[C,z,m==null?void 0:m.globalHubConnection]),gn.useEffect(()=>{if(!C||!z){oe(void 0);return}const St=C[0];Te(Re=>gt(Ea.NEGOTIATE,Re)),b7({deviceId:b,deviceType:6,appVersion:g,ticketCode:C,scanTvDeviceId:z,ticketPrefix:St,baseUrl:i}).then(Re=>{oe(Re),Ie(Re.ticketType>3)}).catch(Re=>{Te(re=>[...re,Re])})},[C,g,i,b,z]),gn.useEffect(()=>{if(!(ce!=null&&ce.accessToken)||!ce.url||!C)return;const St=new F7(new Date(0)),Re=new U7(St);localStorage.setItem("ticketCode",C),m==null||m.connect({url:ce.url,accessToken:ce.accessToken,groupName:C});function re(O){x(O),nt(K=>gt(Ea.EVENT_STATUS,K));const M=()=>{R7({appVersion:g,baseUrl:i,ticketCode:C,sessionId:O}).then(K=>{if(y(K),K.broadcastStart&&xe.current!==K.broadcastStart&&!We.current)if(xe.current=K.broadcastStart,ct){const ye=new Date;ye.setHours(ye.getHours()+1),St.updateStartTime(ye,!0)}else St.updateStartTime(new Date(K.broadcastStart),!0)}).catch(K=>{nt(ye=>[...ye,K])})};M(),m==null||m.on("eventStatusChanged",M),P7(C[0],i,d,p).then(K=>{D(K)}).catch(K=>{nt(ye=>[...ye,K])}),nt(K=>gt(Ea.GENERATE,K));const q=()=>{C7({sessionId:O,appVersion:g,baseUrl:i,ticketCode:C}).then(K=>{St.timelineData=K,F(K),Re.updateTimelineData(K)}).catch(K=>{nt(ye=>[...ye,K])})};!w&&!St.playerSyncer._videoElement&&q(),St.on("fetchTimeline",q)}function Be(){if(St.adjustedStartTime){const O=new Date(St.adjustedStartTime-St.serverTimeOffset);m==null||m.sendGroupCommand({command:"play",value:{senderID:P0(),startDate:O.toISOString()}})}}return m==null||m.on("setupStatusUpdate",({deviceLists:O})=>{var q;const M=(q=O.connectedDevices[0])==null?void 0:q.sessionId;mt(O.connectedDevices),console.log("signalRClient `setupStatusUpdate` connected with sessionId: ",M),re(M),Be()}),m==null||m.on("join",Be),m==null||m.on("stateUpdated",({state:O})=>{console.log(O,"stateUpdate"),I(O)}),m==null||m.on("serverTimeOffsetUpdate",({serverTimeOffset:O})=>{console.log("signalRClient: server time offset updated",O),St.updateServerTimeOffset(O)}),m==null||m.on("startTimeUpdated",({startTime:O})=>{xe.current=O.toString(),We.current=O.toString(),St.updateStartTime(O,!0)}),m==null||m.on("connected",({sessionId:O})=>{console.log("signalRClient: `connected` with sessionId: ",O),x(O),re(O)}),ue(St),X(Re),()=>{I(void 0),mt(void 0),m==null||m.destroy(),Re.destroy(),St.destroy()}},[ce,C,g,i,b,d,p,ct]),Rt.jsx(Sa.Provider,{value:{signalRClient:m,timelineData:w,eventStatus:R,eventMeta:v,hubState:_,sessionId:U,ticketCode:C,eventClock:W,orchestrator:N,preferredProfile:l,baseUrl:i,negotiateData:ce,isDev:ct,getContentfulValue:it,preConnectErrors:Je,postConnectErrors:je,connectedDevices:Ye},children:o})}const q7="_focused_17p1l_1",H7="_posterFocused_17p1l_11",K7="_qrCode_17p1l_31",nb={focused:q7,posterFocused:H7,qrCode:K7};function Tl({selfFocus:o,focusKey:i,...l}){const{ref:d,focused:p,focusSelf:S}=ou.useFocusable({onEnterPress:()=>{l.onClick()},onBlur:()=>{l.onBlur&&l.onBlur()},focusKey:i});return gn.useEffect(()=>{o&&S()},[S,o]),Rt.jsx("button",{...l,ref:d,className:"".concat(l.className||""," ").concat(p?nb.focused:"")})}function bf(){return gn.useContext(Sa).signalRClient}function Ih(){return gn.useContext(Sa).timelineData}function w4(){return gn.useContext(Sa).eventMeta}function V7(){return gn.useContext(Sa).hubState}function z7(){return gn.useContext(Sa).sessionId}function Y7(){return gn.useContext(Sa).ticketCode?[0]:null}function Du(){return gn.useContext(Sa).eventClock}function A4(){return gn.useContext(Sa).isDev}function I4(){return gn.useContext(Sa).getContentfulValue}function b4(){return gn.useContext(Sa).preConnectErrors}function W7(){return gn.useContext(Sa).postConnectErrors}function nm(){return gn.useContext(Sa).orchestrator}function CC(){return gn.useContext(Sa).connectedDevices}function C4(){const o=Ih(),i=Y7(),l=gn.useContext(Sa);return gn.useMemo(()=>[o==null?void 0:o.profiles.find(d=>d.name===l.preferredProfile),l.preferredProfile==="dash-drm"&&l.baseUrl?N7(l.baseUrl):void 0,o==null?void 0:o.queryParameters],[l.preferredProfile,i,o,l.baseUrl])}var R4={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(o,i){(function(l,d){o.exports=d()})(self,function(){return function(){var l={4593:function(b,g){var w,F,R,y,v,D=function(U){for(var x=[],_=0;_<U.length;++_){var I=U.charCodeAt(_);I<128?x.push(I):I<2048?(x.push(192|I>>6),x.push(128|63&I)):I<65536?(x.push(224|I>>12),x.push(128|63&I>>6),x.push(128|63&I)):(x.push(240|I>>18),x.push(128|63&I>>12),x.push(128|63&I>>6),x.push(128|63&I))}return x},m=function(U){for(var x=[],_=0;_<U.length;){var I=U[_++];I<128||(I<224?(I=(31&I)<<6,I|=63&U[_++]):I<240?(I=(15&I)<<12,I|=(63&U[_++])<<6,I|=63&U[_++]):(I=(7&I)<<18,I|=(63&U[_++])<<12,I|=(63&U[_++])<<6,I|=63&U[_++])),x.push(String.fromCharCode(I))}return x.join("")},T={};w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=function(U){for(var x=0,_=[],I=0|U.length/3;0<I--;){var C=(U[x]<<16)+(U[x+1]<<8)+U[x+2];x+=3,_.push(w.charAt(63&C>>18)),_.push(w.charAt(63&C>>12)),_.push(w.charAt(63&C>>6)),_.push(w.charAt(63&C))}return U.length-x==2?(C=(U[x]<<16)+(U[x+1]<<8),_.push(w.charAt(63&C>>18)),_.push(w.charAt(63&C>>12)),_.push(w.charAt(63&C>>6)),_.push("=")):U.length-x==1&&(C=U[x]<<16,_.push(w.charAt(63&C>>18)),_.push(w.charAt(63&C>>12)),_.push("==")),_.join("")},R=function(){for(var U=[],x=0;x<w.length;++x)U[w.charCodeAt(x)]=x;return U[61]=0,U}(),y=function(U){for(var x=0,_=[],I=0|U.length/4;0<I--;){var C=(R[U.charCodeAt(x)]<<18)+(R[U.charCodeAt(x+1)]<<12)+(R[U.charCodeAt(x+2)]<<6)+R[U.charCodeAt(x+3)];_.push(255&C>>16),_.push(255&C>>8),_.push(255&C),x+=4}return _&&(U.charAt(x-2)=="="?(_.pop(),_.pop()):U.charAt(x-1)=="="&&_.pop()),_},v={encode:function(U){for(var x=[],_=0;_<U.length;++_)x.push(U.charCodeAt(_));return x},decode:function(U){for(var x=0;x<s.length;++x)a[x]=String.fromCharCode(a[x]);return a.join("")}},T.decodeArray=function(U){var x=y(U);return new Uint8Array(x)},T.encodeASCII=function(U){var x=v.encode(U);return F(x)},T.decodeASCII=function(U){var x=y(U);return v.decode(x)},T.encode=function(U){var x=D(U);return F(x)},T.decode=function(U){var x=y(U);return m(x)},g.decode=T.decode,g.decodeArray=T.decodeArray,g.encode=T.encode,g.encodeASCII=T.encodeASCII},452:function(b,g){(function(w){var F={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},R=function(N){var X=N;return F.hasOwnProperty(N)&&(X=F[N]),String.fromCharCode(X)},y=15,v=32,D={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},m={17:2,18:4,21:6,22:8,23:10,19:13,20:15},T={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},U={25:2,26:4,29:6,30:8,31:10,27:13,28:15},x=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],_={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(N){this.time=N},log:function(N,X){var ce=this.verboseFilter[N];this.verboseLevel>=ce&&console.log(this.time+" ["+N+"] "+X)}},I=function(N){for(var X=[],ce=0;ce<N.length;ce++)X.push(N[ce].toString(16));return X},C=function(N,X,ce,oe,de){this.foreground=N||"white",this.underline=X||!1,this.italics=ce||!1,this.background=oe||"black",this.flash=de||!1};C.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(N){for(var X=["foreground","underline","italics","background","flash"],ce=0;ce<X.length;ce++){var oe=X[ce];N.hasOwnProperty(oe)&&(this[oe]=N[oe])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(N){return this.foreground===N.foreground&&this.underline===N.underline&&this.italics===N.italics&&this.background===N.background&&this.flash===N.flash},copy:function(N){this.foreground=N.foreground,this.underline=N.underline,this.italics=N.italics,this.background=N.background,this.flash=N.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var j=function(N,X,ce,oe,de,Ce){this.uchar=N||" ",this.penState=new C(X,ce,oe,de,Ce)};j.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(N,X){this.uchar=N,this.penState.copy(X)},setPenState:function(N){this.penState.copy(N)},equals:function(N){return this.uchar===N.uchar&&this.penState.equals(N.penState)},copy:function(N){this.uchar=N.uchar,this.penState.copy(N.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var z=function(){this.chars=[];for(var N=0;N<v;N++)this.chars.push(new j);this.pos=0,this.currPenState=new C};z.prototype={equals:function(N){for(var X=!0,ce=0;ce<v;ce++)if(!this.chars[ce].equals(N.chars[ce])){X=!1;break}return X},copy:function(N){for(var X=0;X<v;X++)this.chars[X].copy(N.chars[X])},isEmpty:function(){for(var N=!0,X=0;X<v;X++)if(!this.chars[X].isEmpty()){N=!1;break}return N},setCursor:function(N){this.pos!==N&&(this.pos=N),this.pos<0?(_.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>v&&(_.log("ERROR","Too large cursor position "+this.pos),this.pos=v)},moveCursor:function(N){var X=this.pos+N;if(N>1)for(var ce=this.pos+1;ce<X+1;ce++)this.chars[ce].setPenState(this.currPenState);this.setCursor(X)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(N){N>=144&&this.backSpace();var X=R(N);this.pos>=v?_.log("ERROR","Cannot insert "+N.toString(16)+" ("+X+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(X,this.currPenState),this.moveCursor(1))},clearFromPos:function(N){var X;for(X=N;X<v;X++)this.chars[X].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var N=[],X=!0,ce=0;ce<v;ce++){var oe=this.chars[ce].uchar;oe!==" "&&(X=!1),N.push(oe)}return X?"":N.join("")},setPenStyles:function(N){this.currPenState.setStyles(N),this.chars[this.pos].setPenState(this.currPenState)}};var $=function(){this.rows=[];for(var N=0;N<y;N++)this.rows.push(new z);this.currRow=14,this.nrRollUpRows=null,this.reset()};$.prototype={reset:function(){for(var N=0;N<y;N++)this.rows[N].clear();this.currRow=14},equals:function(N){for(var X=!0,ce=0;ce<y;ce++)if(!this.rows[ce].equals(N.rows[ce])){X=!1;break}return X},copy:function(N){for(var X=0;X<y;X++)this.rows[X].copy(N.rows[X])},isEmpty:function(){for(var N=!0,X=0;X<y;X++)if(!this.rows[X].isEmpty()){N=!1;break}return N},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(N){this.rows[this.currRow].insertChar(N)},setPen:function(N){this.rows[this.currRow].setPenStyles(N)},moveCursor:function(N){this.rows[this.currRow].moveCursor(N)},setCursor:function(N){_.log("INFO","setCursor: "+N),this.rows[this.currRow].setCursor(N)},setPAC:function(N){_.log("INFO","pacData = "+JSON.stringify(N));var X=N.row-1;this.nrRollUpRows&&X<this.nrRollUpRows-1&&(X=this.nrRollUpRows-1),this.currRow=X;var ce=this.rows[this.currRow];if(N.indent!==null){var oe=N.indent,de=Math.max(oe-1,0);ce.setCursor(N.indent),N.color=ce.chars[de].penState.foreground}var Ce={foreground:N.color,underline:N.underline,italics:N.italics,background:"black",flash:!1};this.setPen(Ce)},setBkgData:function(N){_.log("INFO","bkgData = "+JSON.stringify(N)),this.backSpace(),this.setPen(N),this.insertChar(32)},setRollUpRows:function(N){this.nrRollUpRows=N},rollUp:function(){if(this.nrRollUpRows!==null){_.log("TEXT",this.getDisplayText());var N=this.currRow+1-this.nrRollUpRows,X=this.rows.splice(N,1)[0];X.clear(),this.rows.splice(this.currRow,0,X),_.log("INFO","Rolling up")}else _.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(N){N=N||!1;for(var X=[],ce="",oe=-1,de=0;de<y;de++){var Ce=this.rows[de].getTextString();Ce&&(oe=de+1,N?X.push("Row "+oe+': "'+Ce+'"'):X.push(Ce.trim()))}return X.length>0&&(ce=N?"["+X.join(" | ")+"]":X.join("\n")),ce},getTextAndFormat:function(){return this.rows}};var W=function(N,X){this.chNr=N,this.outputFilter=X,this.mode=null,this.verbose=0,this.displayedMemory=new $,this.nonDisplayedMemory=new $,this.lastOutputScreen=new $,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};W.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(N){this.outputFilter=N},setPAC:function(N){this.writeScreen.setPAC(N)},setBkgData:function(N){this.writeScreen.setBkgData(N)},setMode:function(N){N!==this.mode&&(this.mode=N,_.log("INFO","MODE="+N),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=N)},insertChars:function(N){for(var X=0;X<N.length;X++)this.writeScreen.insertChar(N[X]);var ce=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";_.log("INFO",ce+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(_.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){_.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){_.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){_.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(N){_.log("INFO","RU("+N+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(N)},cc_FON:function(){_.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){_.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){_.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){_.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){_.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){_.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){_.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(_.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var N=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=N,this.writeScreen=this.nonDisplayedMemory,_.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(N){_.log("INFO","TO("+N+") - Tab Offset"),this.writeScreen.moveCursor(N)},cc_MIDROW:function(N){var X={flash:!1};if(X.underline=N%2==1,X.italics=N>=46,X.italics)X.foreground="white";else{var ce=Math.floor(N/2)-16;X.foreground=["white","green","blue","cyan","red","yellow","magenta"][ce]}_.log("INFO","MIDROW: "+JSON.stringify(X)),this.writeScreen.setPen(X)},outputDataUpdate:function(){var N=_.time;N!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(N,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,N,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:N):this.cueStartTime=N,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(N){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,N,this.displayedMemory),this.cueStartTime=N))}};var ue=function(N,X,ce){this.field=N||1,this.outputs=[X,ce],this.channels=[new W(1,X),new W(2,ce)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};ue.prototype={getHandler:function(N){return this.channels[N].getHandler()},setHandler:function(N,X){this.channels[N].setHandler(X)},addData:function(N,X){var ce,oe,de,Ce=!1;this.lastTime=N,_.setTime(N);for(var Je=0;Je<X.length;Je+=2)oe=127&X[Je],de=127&X[Je+1],oe>=16&&oe<=31&&oe===this.lastCmdA&&de===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,_.log("DEBUG","Repeated command ("+I([oe,de])+") is dropped")):oe!==0||de!==0?(_.log("DATA","["+I([X[Je],X[Je+1]])+"] -> ("+I([oe,de])+")"),(ce=this.parseCmd(oe,de))||(ce=this.parseMidrow(oe,de)),ce||(ce=this.parsePAC(oe,de)),ce||(ce=this.parseBackgroundAttributes(oe,de)),ce||(Ce=this.parseChars(oe,de))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(Ce):_.log("WARNING","No channel found yet. TEXT-MODE?")),ce?this.dataCounters.cmd+=2:Ce?this.dataCounters.char+=2:(this.dataCounters.other+=2,_.log("WARNING","Couldn't parse cleaned data "+I([oe,de])+" orig: "+I([X[Je],X[Je+1]])))):this.dataCounters.padding+=2},parseCmd:function(N,X){var ce;if(!((N===20||N===21||N===28||N===29)&&32<=X&&X<=47||(N===23||N===31)&&33<=X&&X<=35))return!1;ce=N===20||N===21||N===23?1:2;var oe=this.channels[ce-1];return N===20||N===21||N===28||N===29?X===32?oe.cc_RCL():X===33?oe.cc_BS():X===34?oe.cc_AOF():X===35?oe.cc_AON():X===36?oe.cc_DER():X===37?oe.cc_RU(2):X===38?oe.cc_RU(3):X===39?oe.cc_RU(4):X===40?oe.cc_FON():X===41?oe.cc_RDC():X===42?oe.cc_TR():X===43?oe.cc_RTD():X===44?oe.cc_EDM():X===45?oe.cc_CR():X===46?oe.cc_ENM():X===47&&oe.cc_EOC():oe.cc_TO(X-32),this.lastCmdA=N,this.lastCmdB=X,this.currChNr=ce,!0},parseMidrow:function(N,X){var ce=null;if((N===17||N===25)&&32<=X&&X<=47){if((ce=N===17?1:2)!==this.currChNr)return _.log("ERROR","Mismatch channel in midrow parsing"),!1;var oe=this.channels[ce-1];return oe.insertChars([32]),oe.cc_MIDROW(X),_.log("DEBUG","MIDROW ("+I([N,X])+")"),this.lastCmdA=N,this.lastCmdB=X,!0}return!1},parsePAC:function(N,X){var ce,oe;if(!((17<=N&&N<=23||25<=N&&N<=31)&&64<=X&&X<=127||(N===16||N===24)&&64<=X&&X<=95))return!1;ce=N<=23?1:2,oe=64<=X&&X<=95?ce===1?D[N]:T[N]:ce===1?m[N]:U[N];var de=this.interpretPAC(oe,X);return this.channels[ce-1].setPAC(de),this.lastCmdA=N,this.lastCmdB=X,this.currChNr=ce,!0},interpretPAC:function(N,X){var ce,oe={color:null,italics:!1,indent:null,underline:!1,row:N};return ce=X>95?X-96:X-64,oe.underline=(1&ce)==1,ce<=13?oe.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(ce/2)]:ce<=15?(oe.italics=!0,oe.color="white"):oe.indent=4*Math.floor((ce-16)/2),oe},parseChars:function(N,X){var ce=null,oe=null,de=null;if(N>=25?(ce=2,de=N-8):(ce=1,de=N),17<=de&&de<=19){var Ce;Ce=de===17?X+80:de===18?X+112:X+144,_.log("INFO","Special char '"+R(Ce)+"' in channel "+ce),oe=[Ce],this.lastCmdA=N,this.lastCmdB=X}else 32<=N&&N<=127&&(oe=X===0?[N]:[N,X],this.lastCmdA=null,this.lastCmdB=null);if(oe){var Je=I(oe);_.log("DEBUG","Char codes =  "+Je.join(","))}return oe},parseBackgroundAttributes:function(N,X){var ce,oe,de;return((N===16||N===24)&&32<=X&&X<=47||(N===23||N===31)&&45<=X&&X<=47)&&(ce={},N===16||N===24?(oe=Math.floor((X-32)/2),ce.background=x[oe],X%2==1&&(ce.background=ce.background+"_semi")):X===45?ce.background="transparent":(ce.foreground="black",X===47&&(ce.underline=!0)),de=N<24?1:2,this.channels[de-1].setBkgData(ce),this.lastCmdA=N,this.lastCmdB=X,!0)},reset:function(){for(var N=0;N<this.channels.length;N++)this.channels[N]&&this.channels[N].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(N){for(var X=0;X<this.channels.length;X++)this.channels[X]&&this.channels[X].cueSplitAtTime(N)}},w.logger=_,w.PenState=C,w.CaptionScreen=$,w.Cea608Parser=ue,w.findCea608Nalus=function(N,X,ce){for(var oe=0,de=X,Ce=[],Je=function(Ie,Ye,mt,xe){if(Ie!==4||Ye<8)return null;var We=mt.getUint8(xe),it=mt.getUint16(xe+1),qt=mt.getUint32(xe+3),Ft=mt.getUint8(xe+7);return We==181&&it==49&&qt==1195456820&&Ft==3};de<X+ce;){if(oe=N.getUint32(de),(31&N.getUint8(de+4))==6)for(var Te=de+5,je=-1;Te<de+4+oe-1;){je=0;for(var nt=255;nt===255;)je+=nt=N.getUint8(Te),Te++;var ct=0;for(nt=255;nt===255;)ct+=nt=N.getUint8(Te),Te++;Je(je,ct,N,Te)&&Ce.push([Te,ct]),Te+=ct}de+=oe+4}return Ce},w.extractCea608DataFromRange=function(N,X){var ce=X[0],oe=[[],[]];ce+=8;var de=31&N.getUint8(ce);ce+=2;for(var Ce=0;Ce<de;Ce++){var Je=N.getUint8(ce),Te=4&Je,je=3&Je;ce++;var nt=N.getUint8(ce);ce++;var ct=N.getUint8(ce);ce++,Te&&(127&nt)+(127&ct)!=0&&(je===0?(oe[0].push(nt),oe[0].push(ct)):je===1&&(oe[1].push(nt),oe[1].push(ct)))}return oe}})(g)},8416:function(b,g,w){var F=w(1139),R=w(5448),y=w(6398),v=w(2032),D=(w(5530),typeof window<"u"&&window||w.g),m=D.dashjs;m||(m=D.dashjs={}),m.MediaPlayer=F.Z,m.FactoryMaker=R.Z,m.Debug=y.Z,m.Version=(0,v.e)()},6398:function(b,g,w){var F=w(5595),R=w(8512),y=w(5448),v=1,D=2,m=3,T=4,U=5;function x(I){I=I||{};var C,j,z,$,W=this.context,ue=(0,F.Z)(W).getInstance(),N=I.settings,X=[];function ce(nt){return nt&&nt.bind?nt.bind(window.console):window.console.log.bind(window.console)}function oe(){for(var nt=arguments.length,ct=new Array(nt),Ie=0;Ie<nt;Ie++)ct[Ie]=arguments[Ie];je.apply(void 0,[v,this].concat(ct))}function de(){for(var nt=arguments.length,ct=new Array(nt),Ie=0;Ie<nt;Ie++)ct[Ie]=arguments[Ie];je.apply(void 0,[D,this].concat(ct))}function Ce(){for(var nt=arguments.length,ct=new Array(nt),Ie=0;Ie<nt;Ie++)ct[Ie]=arguments[Ie];je.apply(void 0,[m,this].concat(ct))}function Je(){for(var nt=arguments.length,ct=new Array(nt),Ie=0;Ie<nt;Ie++)ct[Ie]=arguments[Ie];je.apply(void 0,[T,this].concat(ct))}function Te(){for(var nt=arguments.length,ct=new Array(nt),Ie=0;Ie<nt;Ie++)ct[Ie]=arguments[Ie];je.apply(void 0,[U,this].concat(ct))}function je(nt,ct){var Ie="",Ye=null;j&&(Ye=new Date().getTime(),Ie+="["+(Ye-$)+"]"),z&&ct&&ct.getClassName&&(Ie+="["+ct.getClassName()+"]",ct.getType&&(Ie+="["+ct.getType()+"]")),Ie.length>0&&(Ie+=" ");for(var mt=arguments.length,xe=new Array(mt>2?mt-2:0),We=2;We<mt;We++)xe[We-2]=arguments[We];Array.apply(null,xe).forEach(function(it){Ie+=it+" "}),X[nt]&&N&&N.get().debug.logLevel>=nt&&X[nt](Ie),N&&N.get().debug.dispatchEvent&&ue.trigger(R.Z.LOG,{message:Ie,level:nt})}return C={getLogger:function(nt){return{fatal:oe.bind(nt),error:de.bind(nt),warn:Ce.bind(nt),info:Je.bind(nt),debug:Te.bind(nt)}},setLogTimestampVisible:function(nt){j=nt},setCalleeNameVisible:function(nt){z=nt}},j=!0,z=!0,$=new Date().getTime(),typeof window<"u"&&window.console&&(X[v]=ce(window.console.error),X[D]=ce(window.console.error),X[m]=ce(window.console.warn),X[T]=ce(window.console.info),X[U]=ce(window.console.debug)),C}x.__dashjs_factory_name="Debug";var _=y.Z.getSingletonFactory(x);_.LOG_LEVEL_NONE=0,_.LOG_LEVEL_FATAL=v,_.LOG_LEVEL_ERROR=D,_.LOG_LEVEL_WARNING=m,_.LOG_LEVEL_INFO=T,_.LOG_LEVEL_DEBUG=U,y.Z.updateSingletonFactory(x.__dashjs_factory_name,_),g.Z=_},5595:function(b,g,w){var F=w(5448),R=w(8825);function y(){var D={};function m(U,x,_){var I=-1;return D[U]&&D[U].some(function(C,j){if(C&&C.callback===x&&(!_||_===C.scope))return I=j,!0}),I}var T={on:function(U,x,_){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!U)throw new Error("event type cannot be null or undefined");if(!x||typeof x!="function")throw new Error("listener must be a function: "+x);var C=I.priority||0;if(!(m(U,x,_)>=0)){D[U]=D[U]||[];var j={callback:x,scope:_,priority:C};_&&_.getStreamId&&(j.streamId=_.getStreamId()),_&&_.getType&&(j.mediaType=_.getType()),I&&I.mode&&(j.mode=I.mode);var z=D[U].some(function($,W){if($&&C>$.priority)return D[U].splice(W,0,j),!0});z||D[U].push(j)}},off:function(U,x,_){if(U&&x&&D[U]){var I=m(U,x,_);I<0||(D[U][I]=null)}},trigger:function(U){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(U&&D[U]){if((x=x||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");x.type=U,_.streamId&&(x.streamId=_.streamId),_.mediaType&&(x.mediaType=_.mediaType),D[U].filter(function(I){return!(!I||_.streamId&&I.streamId&&I.streamId!==_.streamId||_.mediaType&&I.mediaType&&I.mediaType!==_.mediaType||_.mode&&I.mode&&I.mode!==_.mode||!I.mode&&_.mode&&_.mode===R.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(I){return I&&I.callback.call(I.scope,x)})}},reset:function(){D={}}};return T}y.__dashjs_factory_name="EventBus";var v=F.Z.getSingletonFactory(y);v.EVENT_PRIORITY_LOW=0,v.EVENT_PRIORITY_HIGH=5e3,F.Z.updateSingletonFactory(y.__dashjs_factory_name,v),g.Z=v},5448:function(b,g){var w=function(){var F,R=[],y={},v={};function D(x,_){for(var I in R){var C=R[I];if(C.context===x&&C.name===_)return C.instance}return null}function m(x,_){return _[x]}function T(x,_,I){x in I&&(I[x]=_)}function U(x,_,I){var C,j=x.__dashjs_factory_name,z=_[j];if(z){var $=z.instance;if(!z.override)return $.apply({context:_,factory:F},I);for(var W in C=x.apply({context:_},I),$=$.apply({context:_,factory:F,parent:C},I))C.hasOwnProperty(W)&&(C[W]=$[W])}else C=x.apply({context:_},I);return C.getClassName=function(){return j},C}return F={extend:function(x,_,I,C){!C[x]&&_&&(C[x]={instance:_,override:I})},getSingletonInstance:D,setSingletonInstance:function(x,_,I){for(var C in R){var j=R[C];if(j.context===x&&j.name===_)return void(R[C].instance=I)}R.push({name:_,context:x,instance:I})},deleteSingletonInstances:function(x){R=R.filter(function(_){return _.context!==x})},getSingletonFactory:function(x){var _=m(x.__dashjs_factory_name,y);return _||(_=function(I){var C;return I===void 0&&(I={}),{getInstance:function(){return C||(C=D(I,x.__dashjs_factory_name)),C||(C=U(x,I,arguments),R.push({name:x.__dashjs_factory_name,context:I,instance:C})),C}}},y[x.__dashjs_factory_name]=_),_},getSingletonFactoryByName:function(x){return m(x,y)},updateSingletonFactory:function(x,_){T(x,_,y)},getClassFactory:function(x){var _=m(x.__dashjs_factory_name,v);return _||(_=function(I){return I===void 0&&(I={}),{create:function(){return U(x,I,arguments)}}},v[x.__dashjs_factory_name]=_),_},getClassFactoryByName:function(x){return m(x,v)},updateClassFactory:function(x,_){T(x,_,v)}},F}();g.Z=w},1264:function(b,g,w){var F=w(5448),R=w(703),y=w(6398),v=w(3393),D=w(7855),m=w(5595),T=w(8512);function U(C){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},U(C)}function x(C,j,z){return j in C?Object.defineProperty(C,j,{value:z,enumerable:!0,configurable:!0,writable:!0}):C[j]=z,C}function _(){var C,j,z=this.context,$=(0,m.Z)(z).getInstance(),W={"streaming.delay.liveDelay":T.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":T.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},ue={debug:{logLevel:y.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:v.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:v.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:v.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:v.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(C={},x(C,D.w.MPD_TYPE,500),x(C,D.w.XLINK_EXPANSION_TYPE,500),x(C,D.w.MEDIA_SEGMENT_TYPE,1e3),x(C,D.w.INIT_SEGMENT_TYPE,1e3),x(C,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),x(C,D.w.INDEX_SEGMENT_TYPE,1e3),x(C,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),x(C,D.w.LICENSE,1e3),x(C,D.w.OTHER_TYPE,1e3),x(C,"lowLatencyReductionFactor",10),C),retryAttempts:(j={},x(j,D.w.MPD_TYPE,3),x(j,D.w.XLINK_EXPANSION_TYPE,1),x(j,D.w.MEDIA_SEGMENT_TYPE,3),x(j,D.w.INIT_SEGMENT_TYPE,3),x(j,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),x(j,D.w.INDEX_SEGMENT_TYPE,3),x(j,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),x(j,D.w.LICENSE,3),x(j,D.w.OTHER_TYPE,3),x(j,"lowLatencyMultiplyFactor",5),j),abr:{movingAverageMethod:v.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:v.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:v.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},N=R.Z.clone(ue);function X(ce,oe,de){for(var Ce in ce)ce.hasOwnProperty(Ce)&&(oe.hasOwnProperty(Ce)?U(ce[Ce])!=="object"||ce[Ce]instanceof Array||ce[Ce]===null?(oe[Ce]=R.Z.clone(ce[Ce]),W[de+Ce]&&$.trigger(W[de+Ce])):X(ce[Ce],oe[Ce],de.slice()+Ce+"."):console.error("Settings parameter "+de+Ce+" is not supported"))}return{get:function(){return N},update:function(ce){U(ce)==="object"&&X(ce,N,"")},reset:function(){N=R.Z.clone(ue)}}}_.__dashjs_factory_name="Settings";var I=F.Z.getSingletonFactory(_);g.Z=I},703:function(b,g,w){var F=w(3875),R=w.n(F),y=w(1067);function v(T){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},v(T)}function D(T,U){for(var x=0;x<U.length;x++){var _=U[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var m=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T)}var U,x;return U=T,x=[{key:"mixin",value:function(_,I,C){var j,z={};if(_)for(var $ in I)I.hasOwnProperty($)&&(j=I[$],$ in _&&(_[$]===j||$ in z&&z[$]===j)||(v(_[$])==="object"&&_[$]!==null?_[$]=T.mixin(_[$],j,C):_[$]=C(j)));return _}},{key:"clone",value:function(_){if(!_||v(_)!=="object")return _;var I;if(_ instanceof Array){I=[];for(var C=0,j=_.length;C<j;++C)C in _&&I.push(T.clone(_[C]))}else I={};return T.mixin(I,_,T.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(_,I){try{if(!I||I.length===0)return _;var C=new URL(_);return I.forEach(function(j){j.key&&j.value&&C.searchParams.set(j.key,j.value)}),C.href}catch(j){return _}}},{key:"parseHttpHeaders",value:function(_){var I={};if(!_)return I;for(var C=_.trim().split("\r\n"),j=0,z=C.length;j<z;j++){var $=C[j],W=$.indexOf(": ");W>0&&(I[$.substring(0,W)]=$.substring(W+2))}return I}},{key:"generateUuid",value:function(){var _=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(I){var C=(_+16*Math.random())%16|0;return _=Math.floor(_/16),(I=="x"?C:3&C|8).toString(16)})}},{key:"generateHashCode",value:function(_){var I=0;if(_.length===0)return I;for(var C=0;C<_.length;C++)I=(I<<5)-I+_.charCodeAt(C),I|=0;return I}},{key:"getRelativeUrl",value:function(_,I){try{var C=new URL(_),j=new URL(I);if(C.protocol=j.protocol,C.origin!==j.origin)return I;var z=R().relative(C.pathname.substr(0,C.pathname.lastIndexOf("/")),j.pathname.substr(0,j.pathname.lastIndexOf("/"))),$=z.length===0?1:0;return z+=j.pathname.substr(j.pathname.lastIndexOf("/")+$,j.pathname.length-1),j.pathname.length<z.length?j.pathname:z}catch(W){return I}}},{key:"parseUserAgent",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var I=_===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,y.UAParser)(I)}catch(C){return{}}}},{key:"stringHasProtocol",value:function(_){return/(http(s?)):\/\//i.test(_)}}],x&&D(U,x),T}();g.Z=m},2032:function(b,g,w){function F(){return"4.7.4"}w.d(g,{e:function(){return F}})},2230:function(b,g){function w(R,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}var F=function(){function R(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R)}var y,v;return y=R,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var x in D)!D.hasOwnProperty(x)||this[x]&&!T||U&&D[x].indexOf("public_")===-1||(this[x]=D[x])}}}])&&w(y.prototype,v),R}();g.Z=F},4351:function(b,g,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function R(m,T){return R=Object.setPrototypeOf||function(U,x){return U.__proto__=x,U},R(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=function(m){(function(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),C&&R(I,C)})(_,m);var T,U,x=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,C=v(T);if(U){var j=v(this).constructor;I=Reflect.construct(C,arguments,j)}else I=C.apply(this,arguments);return y(this,I)});function _(){var I;return function(C,j){if(!(C instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=x.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",I.BUFFERING_COMPLETED="bufferingCompleted",I.BUFFER_CLEARED="bufferCleared",I.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",I.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",I.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",I.CMSD_STATIC_HEADER="cmsdStaticHeader",I.CURRENT_TRACK_CHANGED="currentTrackChanged",I.DATA_UPDATE_COMPLETED="dataUpdateCompleted",I.INBAND_EVENTS="inbandEvents",I.INITIAL_STREAM_SWITCH="initialStreamSwitch",I.INIT_FRAGMENT_LOADED="initFragmentLoaded",I.INIT_FRAGMENT_NEEDED="initFragmentNeeded",I.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",I.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",I.LOADING_COMPLETED="loadingCompleted",I.LOADING_PROGRESS="loadingProgress",I.LOADING_DATA_PROGRESS="loadingDataProgress",I.LOADING_ABANDONED="loadingAborted",I.MANIFEST_UPDATED="manifestUpdated",I.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",I.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",I.QUOTA_EXCEEDED="quotaExceeded",I.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",I.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",I.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",I.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",I.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",I.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",I.SOURCE_BUFFER_ERROR="sourceBufferError",I.STREAMS_COMPOSED="streamsComposed",I.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",I.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",I.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",I.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",I.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",I.URL_RESOLUTION_FAILED="urlResolutionFailed",I.VIDEO_CHUNK_RECEIVED="videoChunkReceived",I.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",I.XLINK_ELEMENT_LOADED="xlinkElementLoaded",I.XLINK_READY="xlinkReady",I.SEEK_TARGET="seekTarget",I.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",I.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",I.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",I.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",I.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",I}return _}(w(8342).Z);g.Z=D},8512:function(b,g,w){function F(U){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},F(U)}function R(U,x){if(!(U instanceof x))throw new TypeError("Cannot call a class as a function")}function y(U,x){return y=Object.setPrototypeOf||function(_,I){return _.__proto__=I,_},y(U,x)}function v(U,x){return!x||F(x)!=="object"&&typeof x!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(U):x}function D(U){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)},D(U)}var m=function(U){(function(j,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(z&&z.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),z&&y(j,z)})(C,U);var x,_,I=(x=C,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(j){return!1}}(),function(){var j,z=D(x);if(_){var $=D(this).constructor;j=Reflect.construct(z,arguments,$)}else j=z.apply(this,arguments);return v(this,j)});function C(){return R(this,C),I.apply(this,arguments)}return C}(w(4351).Z),T=new m;g.Z=T},8342:function(b,g){function w(R,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}var F=function(){function R(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R)}var y,v;return y=R,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var x in D)!D.hasOwnProperty(x)||this[x]&&!T||U&&D[x].indexOf("public_")===-1||(this[x]=D[x])}}}])&&w(y.prototype,v),R}();g.Z=F},9326:function(b,g,w){var F=w(3186),R=w(7855),y=w(5448),v=w(8825),D=w(7387),m=w(1553);function T(U){var x,_,I,C,j,z=(U=U||{}).eventBus,$=U.debug,W=U.urlUtils,ue=U.type,N=U.streamInfo,X=U.segmentsController,ce=U.timelineConverter,oe=U.baseURLController;function de(){return ue}function Ce(){I=null}function Je(Ie,Ye,mt){var xe,We,it=oe.resolve(mt.path),qt={};return it&&Ye!==it.url&&W.isRelative(Ye)?(xe=it.url,We=it.serviceLocation,qt=it.queryParams,Ye&&(xe=W.resolve(Ye,xe))):xe=Ye,!W.isRelative(xe)&&(Ie.url=xe,Ie.serviceLocation=We,Ie.queryParams=qt,!0)}function Te(Ie,Ye){if(Ye==null)return null;var mt=new F.Z,xe=Ye.representation,We=xe.adaptation.period.mpd.manifest.Period_asArray[xe.adaptation.period.index].AdaptationSet_asArray[xe.adaptation.index].Representation_asArray[xe.index].bandwidth,it=Ye.media;return it=(0,D.vi)(it,"Number",Ye.replacementNumber),it=(0,D.vi)(it,"Time",Ye.replacementTime),it=(0,D.vi)(it,"Bandwidth",We),it=(0,D.Aj)(it,xe.id),it=(0,D.eR)(it),mt.mediaType=de(),mt.type=R.w.MEDIA_SEGMENT_TYPE,mt.range=Ye.mediaRange,mt.startTime=Ye.presentationStartTime,mt.mediaStartTime=Ye.mediaStartTime,mt.duration=Ye.duration,mt.timescale=xe.timescale,mt.availabilityStartTime=Ye.availabilityStartTime,mt.availabilityEndTime=Ye.availabilityEndTime,mt.availabilityTimeComplete=xe.availabilityTimeComplete,mt.wallStartTime=Ye.wallStartTime,mt.quality=xe.index,mt.index=Ye.index,mt.mediaInfo=Ie,mt.adaptationIndex=xe.adaptation.index,mt.representationId=xe.id,Je(mt,it,xe)?mt:void 0}function je(Ie,Ye,mt){var xe=null;if(!Ye||!Ye.segmentInfoType)return xe;var We=X.getSegmentByTime(Ye,mt);return We&&(I=We,_.debug("Index for time "+mt+" is "+We.index),xe=Te(Ie,We)),xe}function nt(Ie,Ye,mt){var xe=null,We=X.getSegmentByIndex(Ye,mt,I?I.mediaStartTime:-1);if(We)xe=Te(Ie,We),I=We;else{if(C&&!j)return _.debug(de()+" No segment found at index: "+mt+". Wait for next loop"),null;j=!0}return xe}function ct(){_.debug("Dynamic stream complete"),j=!0}return x={getCurrentIndex:function(){return I?I.index:-1},getInitRequest:function(Ie,Ye){return Ye?function(mt,xe,We){var it=new F.Z,qt=xe.adaptation.period,Ft=qt.start;if(it.mediaType=We,it.type=R.w.INIT_SEGMENT_TYPE,it.range=xe.range,it.availabilityStartTime=ce.calcAvailabilityStartTimeFromPresentationTime(Ft,xe,C),it.availabilityEndTime=ce.calcAvailabilityEndTimeFromPresentationTime(Ft+qt.duration,xe,C),it.quality=xe.index,it.mediaInfo=mt,it.representationId=xe.id,Je(it,xe.initialization,xe))return it.url=(0,D.vi)(it.url,"Bandwidth",xe.bandwidth),it}(Ie,Ye,de()):null},getNextSegmentRequest:function(Ie,Ye){return Ye&&Ye.segmentInfoType?nt(Ie,Ye,I?I.index+1:0):null},getNextSegmentRequestIdempotent:function(Ie,Ye){var mt=I?I.index+1:0,xe=X.getSegmentByIndex(Ye,mt,I?I.mediaStartTime:-1);return xe?Te(Ie,xe):null},getSegmentRequestForTime:je,getStreamId:function(){return N.id},getStreamInfo:function(){return N},getType:de,getValidTimeAheadOfTargetTime:function(Ie,Ye,mt,xe){try{if(isNaN(Ie)||!Ye||!mt)return NaN;if(Ie<0&&(Ie=0),isNaN(xe)&&(xe=.5),je(Ye,mt,Ie))return Ie;if(mt.adaptation.period.start+mt.adaptation.period.duration<Ie)return NaN;for(var We=isFinite(mt.adaptation.period.duration)?mt.adaptation.period.start+mt.adaptation.period.duration:Ie+30,it=Math.min(Ie+xe,We),qt=NaN,Ft=null;it<=We;){var gt=null;if(it<=We&&(gt=je(Ye,mt,it)),gt){qt=it,Ft=gt;break}it+=xe}if(Ft){var St=Ft.startTime+Ft.duration;return Ie>Ft.startTime&&St-Ie>xe?Ie:!isNaN(Ft.startTime)&&Ie<Ft.startTime&&qt>Ft.startTime?Ft.startTime+.001:Math.min(St-xe,qt)}return qt}catch(Re){return NaN}},initialize:function(Ie){C=Ie,j=!1,X.initialize(Ie)},isLastSegmentRequested:function(Ie,Ye){return!Ie||!I?!1:j?!0:!isFinite(Ie.adaptation.period.duration)||I.presentationStartTime+I.duration>Ye?!1:Ie.mediaFinishedInformation&&!isNaN(Ie.mediaFinishedInformation.numberOfSegments)&&!isNaN(I.index)&&I.index>=Ie.mediaFinishedInformation.numberOfSegments-1&&(!C||Ie.segmentInfoType===m.Z.SEGMENT_TEMPLATE||C&&Ie.segmentInfoType===m.Z.SEGMENT_LIST&&Ie.adaptation.period.nextPeriodId)?!0:!!(C&&Ie.adaptation.period.nextPeriodId&&Ie.segmentInfoType===m.Z.SEGMENT_TIMELINE&&Ie.mediaFinishedInformation&&!isNaN(Ie.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&I&&!isNaN(I.mediaStartTime)&&!isNaN(I.duration)&&I.mediaStartTime+I.duration>=Ie.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(Ie,Ye){return Ye&&Ye.segmentInfoType?nt(Ie,Ye,I?I.index:0):null},reset:function(){Ce(),z.off(v.Z.DYNAMIC_TO_STATIC,ct,x)}},_=$.getLogger(x),Ce(),z.on(v.Z.DYNAMIC_TO_STATIC,ct,x),x}T.__dashjs_factory_name="DashHandler",g.Z=y.Z.getClassFactory(T)},1553:function(b,g){function w(R,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}var F=new(function(){function R(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R),this.init()}var y,v;return y=R,(v=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&w(y.prototype,v),R}());g.Z=F},7802:function(b,g,w){var F=w(5448),R=w(1724),y=w(3636),v=w(1736),D=w(5246);function m(U){U=U||{};var x,_,I=this.context,C=U.dashConstants,j=U.type,z=U.segmentBaseController;function $(W){return W?W.segments?_[C.SEGMENT_BASE]:_[W.segmentInfoType]:null}return x={initialize:function(W){_[C.SEGMENT_TIMELINE]=(0,R.Z)(I).create(U,W),_[C.SEGMENT_TEMPLATE]=(0,y.Z)(I).create(U,W),_[C.SEGMENT_LIST]=(0,v.Z)(I).create(U,W),_[C.SEGMENT_BASE]=(0,D.Z)(I).create(U,W)},updateInitData:function(W,ue){return ue?Promise.resolve():z.getSegmentBaseInitSegment({representation:W,mediaType:j})},updateSegmentData:function(W,ue){return ue?Promise.resolve():z.getSegmentList({mimeType:W.mimeType,representation:W,mediaType:j})},getSegmentByIndex:function(W,ue,N){var X=$(W);return X?X.getSegmentByIndex(W,ue,N):null},getSegmentByTime:function(W,ue){var N=$(W);return N?N.getSegmentByTime(W,ue):null},getMediaFinishedInformation:function(W){var ue=$(W);return ue?ue.getMediaFinishedInformation(W):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},_={},x}m.__dashjs_factory_name="SegmentsController";var T=F.Z.getClassFactory(m);g.Z=T},1736:function(b,g,w){var F=w(5448),R=w(3393),y=w(7387);function v(m,T){var U=(m=m||{}).timelineConverter;function x(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(R.Z.MISSING_CONFIG_ERROR)}function _(I,C){if(x(),!I)return null;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,z=j.SegmentURL_asArray.length,$=I&&!isNaN(I.startNumber)?I.startNumber:1,W=Math.max($-1,0),ue=Math.max(C-W,0),N=null;if(ue<z){var X=j.SegmentURL_asArray[ue];(N=(0,y.NF)(U,T,I,C))&&(N.replacementTime=($+C-1)*I.segmentDuration,N.media=X.media?X.media:"",N.mediaRange=X.mediaRange,N.indexRange=X.indexRange)}return N}return{getSegmentByIndex:_,getSegmentByTime:function(I,C){if(x(),!I)return null;var j=I.segmentDuration;if(isNaN(j))return null;var z=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,C);return _(I,Math.floor(z/j))},getMediaFinishedInformation:function(I){var C={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return C;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,z=I&&!isNaN(I.startNumber)?I.startNumber:1,$=Math.max(z-1,0);return C.numberOfSegments=$+j.SegmentURL_asArray.length,C}}}v.__dashjs_factory_name="ListSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},5246:function(b,g,w){var F=w(5448),R=w(3393);function y(D){var m=(D=D||{}).timelineConverter;function T(){if(!m||!m.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(R.Z.MISSING_CONFIG_ERROR)}function U(x,_){if(T(),!x)return null;var I,C=x.segments?x.segments.length:-1;if(_<C&&(I=x.segments[_])&&I.index===_)return I;for(var j=0;j<C;j++)if((I=x.segments[j])&&I.index===_)return I;return null}return{getSegmentByIndex:U,getSegmentByTime:function(x,_){T();var I=function(C,j){if(!C)return-1;var z,$,W,ue,N,X=C.segments,ce=X?X.length:null,oe=-1;if(X&&ce>0){for(N=0;N<ce;N++)if(W=($=X[N]).presentationStartTime,j+(z=(ue=$.duration)/2)>=W&&j-z<W+ue){oe=$.index;break}}return oe}(x,_);return U(x,I)},getMediaFinishedInformation:function(x){var _={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return x&&x.segments&&(_.numberOfSegments=x.segments.length),_}}}y.__dashjs_factory_name="SegmentBaseGetter";var v=F.Z.getClassFactory(y);g.Z=v},7387:function(b,g,w){w.d(g,{Aj:function(){return v},NF:function(){return U},TJ:function(){return x},eR:function(){return y},vi:function(){return D}});var F=w(2011);function R(_,I){for(;_.length<I;)_="0"+_;return _}function y(_){return _&&_.split("$$").join("$")}function v(_,I){if(!I||!_||_.indexOf("$RepresentationID$")===-1)return _;var C=I.toString();return _.split("$RepresentationID$").join(C)}function D(_,I,C){var j,z,$,W,ue,N,X=I.length,ce=2;if(!_)return _;for(;;){if((j=_.indexOf("$"+I))<0||(z=_.indexOf("$",j+X))<0)return _;if(($=_.indexOf("%0",j+X))>j&&$<z)switch(W=_.charAt(z-1),ue=parseInt(_.substring($+ce,z-1),10),W){case"d":case"i":case"u":N=R(C.toString(),ue);break;case"x":N=R(C.toString(16),ue);break;case"X":N=R(C.toString(16),ue).toUpperCase();break;case"o":N=R(C.toString(8),ue);break;default:return _}else N=C;_=_.substring(0,j)+N+_.substring(z+1)}}function m(_,I,C,j,z,$,W,ue){var N,X=new F.Z;return X.representation=_,X.duration=I,X.presentationStartTime=C,X.mediaStartTime=j,X.availabilityStartTime=z.calcAvailabilityStartTimeFromPresentationTime($,_,W),X.availabilityEndTime=z.calcAvailabilityEndTimeFromPresentationTime($+I,_,W),X.wallStartTime=z.calcWallTimeForSegment(X,W),X.replacementNumber=(N=ue,X.representation.startNumber+N),X.index=ue,X}function T(_,I,C,j){var z=I.adaptation.period;if(isFinite(z.duration)&&z.start+z.duration<=C.presentationStartTime)return!1;if(j){if(I.availabilityTimeOffset==="INF")return!0;var $=_.getClientReferenceTime();return C.availabilityStartTime.getTime()<=$&&(!isFinite(C.availabilityEndTime)||C.availabilityEndTime.getTime()>=$)}return!0}function U(_,I,C,j){var z,$,W;z=C.segmentDuration,isNaN(z)&&(z=C.adaptation.period.duration),$=parseFloat((C.adaptation.period.start+j*z).toFixed(5)),W=parseFloat(($+z).toFixed(5));var ue=m(C,z,$,_.calcMediaTimeFromPresentationTime($,C),_,W,I,j);return T(_,C,ue,I)?ue:null}function x(_,I,C,j,z,$,W,ue,N,X){var ce,oe,de=j/$,Ce=z/$;return ce=_.calcPresentationTimeFromMediaTime(de,C),T(_,C,oe=m(C,Ce,ce,de,_,ce+Ce,I,N),I)?(oe.replacementTime=X||j,W=D(W,"Number",oe.replacementNumber),W=D(W,"Time",oe.replacementTime),oe.media=W,oe.mediaRange=ue,oe):null}},3636:function(b,g,w){var F=w(5448),R=w(3393),y=w(7387);function v(m,T){var U=(m=m||{}).timelineConverter;function x(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(R.Z.MISSING_CONFIG_ERROR)}function _(I,C){if(x(),!I)return null;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentTemplate;C=Math.max(C,0);var z=(0,y.NF)(U,T,I,C);if(z){z.replacementTime=Math.round((C-1)*I.segmentDuration*I.timescale,10);var $=j.media;$=(0,y.vi)($,"Number",z.replacementNumber),$=(0,y.vi)($,"Time",z.replacementTime),z.media=$}return z}return{getSegmentByIndex:_,getSegmentByTime:function(I,C){if(x(),!I)return null;var j=I.segmentDuration;if(isNaN(j))return null;var z=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,C);return _(I,Math.floor(z/j))},getMediaFinishedInformation:function(I){var C={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return C;var j=I.segmentDuration;return isNaN(j)?C.numberOfSegments=1:C.numberOfSegments=Math.ceil(I.adaptation.period.duration/j),C}}}v.__dashjs_factory_name="TemplateSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},1724:function(b,g,w){var F=w(5448),R=w(3393),y=w(7387);function v(m,T){var U=(m=m||{}).timelineConverter,x=m.dashMetrics;function _(){if(!U)throw new Error(R.Z.MISSING_CONFIG_ERROR)}function I(j,z){var $,W,ue,N,X,ce,oe,de=j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentTemplate||j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentList,Ce=de.SegmentTimeline,Je=de.SegmentURL_asArray,Te=0,je=-1;oe=j.timescale;var nt=!1;for(ue=0,N=($=Ce.S_asArray).length;ue<N&&!nt;ue++)for(ce=0,(W=$[ue]).hasOwnProperty("r")&&(ce=W.r),W.hasOwnProperty("t")&&(Te=W.t),ce<0&&(ce=C(j,$[ue+1],W,oe,Te/oe)),X=0;X<=ce&&!nt;X++)(nt=z(Te,de,Je,W,oe,++je,ue))&&(j.segmentDuration=W.d/oe),Te+=W.d}function C(j,z,$,W,ue){var N;if(z&&z.hasOwnProperty("t"))N=z.t/W;else try{var X=0;if(isNaN(j.adaptation.period.start)||isNaN(j.adaptation.period.duration)||!isFinite(j.adaptation.period.duration)){var ce=x.getCurrentDVRInfo();X=isNaN(ce.end)?0:ce.end}else X=j.adaptation.period.start+j.adaptation.period.duration;N=U.calcMediaTimeFromPresentationTime(X,j),j.segmentDuration=$.d/W}catch(oe){N=0}return Math.max(Math.ceil((N-ue)/($.d/W))-1,0)}return{getSegmentByIndex:function(j,z,$){if(_(),!j)return null;var W=null,ue=!1;return I(j,function(N,X,ce,oe,de,Ce,Je){if(ue||$<0){var Te=X.media,je=oe.mediaRange;return ce&&(Te=ce[Je].media||"",je=ce[Je].mediaRange),W=(0,y.TJ)(U,T,j,N,oe.d,de,Te,je,Ce,oe.tManifest),!0}return N>=$*de-.5*oe.d&&(ue=!0),!1}),W},getSegmentByTime:function(j,z){if(_(),!j)return null;z===void 0&&(z=null);var $=null,W=U.calcMediaTimeFromPresentationTime(z,j);return I(j,function(ue,N,X,ce,oe,de,Ce){var Je=parseFloat((W*oe).toPrecision(15));if(Je<ue+ce.d&&Je>=ue){var Te=N.media,je=ce.mediaRange;return X&&(Te=X[Ce].media||"",je=X[Ce].mediaRange),$=(0,y.TJ)(U,T,j,ue,ce.d,oe,Te,je,de,ce.tManifest),!0}return!1}),$},getMediaFinishedInformation:function(j){if(!j)return 0;var z,$,W,ue,N,X,ce,oe=(j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentTemplate||j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentList).SegmentTimeline,de=0,Ce=0,Je=0;for(ce=j.timescale,ue=(z=oe.S_asArray).length,W=0;W<ue;W++)for(X=0,($=z[W]).hasOwnProperty("r")&&(X=$.r),$.hasOwnProperty("t")&&(Ce=(de=$.t)/ce),X<0&&(X=C(j,z[W+1],$,ce,Ce)),N=0;N<=X;N++)Je++,Ce=(de+=$.d)/ce;return{numberOfSegments:Je,mediaTimeOfLastSignaledSegment:Ce}}}}v.__dashjs_factory_name="TimelineSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},2011:function(b,g){g.Z=function w(){(function(F,R){if(!(F instanceof R))throw new TypeError("Cannot call a class as a function")})(this,w),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(b,g){g.Z=function w(){(function(F,R){if(!(F instanceof R))throw new TypeError("Cannot call a class as a function")})(this,w),this.schemeIdUri="",this.value=""}},1139:function(b,g,w){w.d(g,{Z:function(){return Gm}});var F=w(452),R=w.n(F),y=w(3393),v=w(1553),D=w(3860),m=w(5595),T=w(8512),U=w(5448),x=w(6398),_=w(8825);function I(){var L,P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He,Oe,Ze,$e,_e,ke,Ae,Ge,Z,le,ae,se=this.context,Q=(0,m.Z)(se).getInstance();function Pe(){pe(),ge=!1,we=0,Ee=0,Ze=0,Z=!1,$e=!0,_e=!1,le=!1,ke=NaN,Oe=NaN,H&&(Q.off(T.Z.DATA_UPDATE_COMPLETED,xt,L),Q.off(T.Z.LOADING_PROGRESS,Lt,L),Q.off(T.Z.MANIFEST_UPDATED,Kt,L),Q.off(T.Z.STREAMS_COMPOSED,ze,L),Q.off(_.Z.PLAYBACK_ENDED,bt,L),Q.off(_.Z.STREAM_INITIALIZING,lt,L),Q.off(_.Z.REPRESENTATION_SWITCH,rt,L),Q.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Wt,L),$t(),H.removeEventListener("canplay",en),H.removeEventListener("canplaythrough",Jt),H.removeEventListener("play",Dn),H.removeEventListener("waiting",Nn),H.removeEventListener("playing",rr),H.removeEventListener("pause",ir),H.removeEventListener("error",Sn),H.removeEventListener("seeking",It),H.removeEventListener("seeked",Xt),H.removeEventListener("timeupdate",Gt),H.removeEventListener("progress",un),H.removeEventListener("ratechange",vn),H.removeEventListener("loadedmetadata",Pn),H.removeEventListener("loadeddata",xn),H.removeEventListener("stalled",On),H.removeEventListener("ended",Fn),H.removeEventListener("volumechange",Gn)),fe=null,H=null,ie=null,me=null}function be(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((Fe(Ve)-ut()).toFixed(5))}function Fe(Ve){var Dt=Ve||ie;return Dt.start+Dt.duration}function Ne(){var Ve=arguments.length>0&&arguments[0]!==void 0&&arguments[0];ie&&H&&H.getElement()?(Ve&&me&&dt(ut()),H.play()):ge=!0}function pe(){ie&&H&&H.pause()}function Me(Ve){var Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(ie&&H&&H.getElement()){var sr=isNaN(ke)?H.getTime():ke;Ve!==sr&&((Ae=fn===!0)||(ke=Ve),P.info("Requesting seek to time: "+Ve+(Ae?" (internal)":"")),me&&Tn&&dt(Ve),H.setCurrentTime(Ve,Dt))}}function Xe(){if(ie&&H&&me){var Ve=B&&B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=ee.getCurrentDVRInfo(Ve);return Dt&&Dt.range?Dt.range.end:0}}function dt(Ve){var Dt=new Date(ne.getClientReferenceTime()),fn=J.getRegularPeriods()[0],Tn=ne.calcPresentationTimeFromWallTime(Dt,fn);we=Tn-Ve}function ut(){return ie&&H?H.getTime():null}function et(){return ie&&H?H.isPaused():null}function ht(){return ie&&H?H.isSeeking():null}function jt(){return ie&&H?H.isStalled():null}function Ht(){return ie&&H?H.getPlaybackRate():null}function kt(){return ie&&H?H.getEnded():null}function Ut(){return me}function An(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!et()&&me&&H.getReadyState()!==0&&!ht()&&!Z){Ve||(Ve=B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO);var Dt=ut(),fn=ot(Dt,Ve),Tn=!isNaN(fn)&&fn!==Dt;Tn&&!ht()&&(jt()||Ge||H.getReadyState()===1)&&(P.debug("UpdateCurrentTime: Seek to actual time: ".concat(fn," from currentTime: ").concat(Dt)),Me(fn,!1,!1))}}function ot(Ve,Dt){var fn=ee.getCurrentDVRInfo(Dt),Tn=fn?fn.range:null;return Tn?Ve>Tn.end?Math.max(Tn.end-we,Tn.start):Ve>0&&Ve+.25<Tn.start&&Math.abs(Ve-Tn.start)<31536e4?_e?Math.max(Tn.end-we,Tn.start):Tn.start:Ve:NaN}function yt(){fe===null&&(fe=setInterval(function(){(function(){if(Q.trigger(T.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:me,time:new Date}),Ut()){var Ve=Date.now();(isNaN(Oe)||Ve>Oe+ae.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(B.addDVRMetric(),et()?function(){var Dt=Date.now();(!He||Dt>He+500)&&(He=Dt,Gt())}():An(),Oe=Ve)}})()},ae.get().streaming.wallclockTimeUpdateInterval))}function $t(){clearInterval(fe),fe=null}function xt(Ve){var Dt=J.convertRepresentationToRepresentationInfo(Ve.currentRepresentation),fn=Dt?Dt.mediaInfo.streamInfo:null;fn!==null&&ie.id===fn.id&&(ie=fn)}function en(){Q.trigger(T.Z.CAN_PLAY)}function Jt(){Q.trigger(T.Z.CAN_PLAY_THROUGH)}function Wt(Ve){Ve.streamId===B.getActiveStreamInfo().id&&(Ge=Ve.state===D.Z.BUFFER_EMPTY,ae.get().streaming.buffer.setStallState&&H.setStallState(Ve.mediaType,Ve.state===D.Z.BUFFER_EMPTY))}function Dn(){P.info("Native video element event: play"),An(),yt(),Q.trigger(T.Z.PLAYBACK_STARTED,{startTime:ut()})}function Nn(){P.info("Native video element event: waiting"),Q.trigger(T.Z.PLAYBACK_WAITING,{playingTime:ut()})}function rr(){P.info("Native video element event: playing"),Ae=!1,Q.trigger(T.Z.PLAYBACK_PLAYING,{playingTime:ut()})}function ir(){P.info("Native video element event: pause"),Q.trigger(T.Z.PLAYBACK_PAUSED,{ended:kt()})}function It(){if(!Ae){var Ve=ut();isNaN(ke)||ke===Ve||(Ve=ke),ke=NaN,P.info("Seeking to: "+Ve),yt(),Q.trigger(T.Z.PLAYBACK_SEEKING,{seekTime:Ve,streamId:ie.id})}}function Xt(){P.info("Native video element event: seeked"),Ae=!1,Q.trigger(T.Z.PLAYBACK_SEEKED)}function Gt(){ie&&Q.trigger(T.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:be(),time:ut(),streamId:ie.id})}function un(){Q.trigger(T.Z.PLAYBACK_PROGRESS,{streamId:ie.id})}function vn(){var Ve=Ht();P.info("Native video element event: ratechange: ",Ve),Q.trigger(T.Z.PLAYBACK_RATE_CHANGED,{playbackRate:Ve})}function Pn(){P.info("Native video element event: loadedmetadata"),Q.trigger(T.Z.PLAYBACK_METADATA_LOADED),yt()}function xn(){P.info("Native video element event: loadeddata"),Q.trigger(T.Z.PLAYBACK_LOADED_DATA)}function Fn(){P.info("Native video element event: ended"),pe(),$t();var Ve=B?B.getActiveStreamInfo():null;Ve&&Q.trigger(T.Z.PLAYBACK_ENDED,{isLast:Ve.isLast})}function Gn(){Q.trigger(T.Z.PLAYBACK_VOLUME_CHANGED)}function bt(Ve){if(fe&&Ve.isLast){P.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Dt=Ve.seekTime?Ve.seekTime:Fe();H.setCurrentTime(Dt),pe(),$t()}}function Sn(Ve){var Dt=Ve.target||Ve.srcElement;Q.trigger(T.Z.PLAYBACK_ERROR,{error:Dt.error})}function En(){me=!1}function Lt(Ve){if(Ve.stream===!1&&_e&&!isNaN(Ve.request.duration)){var Dt=1.2*Ve.request.duration;Dt>we&&(P.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Dt.toFixed(2)),we=Dt,Ee=Dt)}}function On(Ve){Q.trigger(T.Z.PLAYBACK_STALLED,{e:Ve})}function lt(Ve){var Dt;(Dt=Ve.mediaInfo)&&Dt.supplementalProperties&&Dt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Dt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(P.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),_e=!0)}function rt(Ve){var Dt=B.getActiveStreamInfo();Ve&&Dt&&Ve.currentRepresentation&&Ve.streamId&&Ve.streamId===Dt.id&&Ve.mediaType&&(Ve.mediaType===y.Z.VIDEO||Ve.mediaType===y.Z.AUDIO)&&($e=Ve.currentRepresentation.availabilityTimeComplete,(_e=!$e)&&!le&&(le=!0))}function Kt(){Z=!0}function ze(){Z=!1}return L={initialize:function(Ve,Dt){ie=Ve,Dt!==!0&&(H.addEventListener("canplay",en),H.addEventListener("canplaythrough",Jt),H.addEventListener("play",Dn),H.addEventListener("waiting",Nn),H.addEventListener("playing",rr),H.addEventListener("pause",ir),H.addEventListener("error",Sn),H.addEventListener("seeking",It),H.addEventListener("seeked",Xt),H.addEventListener("timeupdate",Gt),H.addEventListener("progress",un),H.addEventListener("ratechange",vn),H.addEventListener("loadedmetadata",Pn),H.addEventListener("loadeddata",xn),H.addEventListener("stalled",On),H.addEventListener("ended",Fn),H.addEventListener("volumechange",Gn),me=ie.manifestInfo.isDynamic,Ge=!1,Ae=!1,Q.on(T.Z.DATA_UPDATE_COMPLETED,xt,L),Q.on(T.Z.LOADING_PROGRESS,Lt,L),Q.on(T.Z.MANIFEST_UPDATED,Kt,L),Q.on(T.Z.STREAMS_COMPOSED,ze,L),Q.on(_.Z.PLAYBACK_ENDED,bt,L,{priority:m.Z.EVENT_PRIORITY_HIGH}),Q.on(_.Z.STREAM_INITIALIZING,lt,L),Q.on(_.Z.REPRESENTATION_SWITCH,rt,L),Q.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Wt,L),Q.on(_.Z.DYNAMIC_TO_STATIC,En,L),ge&&(ge=!1,Ne()))},setConfig:function(Ve){Ve&&(Ve.streamController&&(B=Ve.streamController),Ve.serviceDescriptionController&&(V=Ve.serviceDescriptionController),Ve.dashMetrics&&(ee=Ve.dashMetrics),Ve.adapter&&(J=Ve.adapter),Ve.videoModel&&(H=Ve.videoModel),Ve.timelineConverter&&(ne=Ve.timelineConverter),Ve.settings&&(ae=Ve.settings))},getTimeToStreamEnd:be,getBufferLevel:function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Dt=null;return B.getActiveStreamProcessors().forEach(function(fn){if(!Ve||Ve.length===0||Ve.indexOf(fn.getType())===-1){var Tn=fn.getBufferLevel();Dt=Dt===null?Tn:Math.min(Dt,Tn)}}),Dt},getPlaybackStalled:function(){return Ge},getTime:ut,getLowLatencyModeEnabled:function(){return _e},getInitialCatchupModeActivated:function(){return le},getIsManifestUpdateInProgress:function(){return Z},getPlaybackRate:Ht,getPlayedRanges:function(){return ie&&H?H.getPlayedRanges():null},getEnded:kt,getIsDynamic:Ut,getStreamController:function(){return B},computeAndSetLiveDelay:function(Ve,Dt){var fn,Tn,sr,Zr=!isNaN(Ve)&&isFinite(Ve)?Ve:NaN,Ii=J.getSuggestedPresentationDelay(),zr=V.getServiceDescriptionSettings();return fn=isNaN(ae.get().streaming.delay.liveDelay)?ae.get().streaming.delay.liveDelayFragmentCount===null||isNaN(ae.get().streaming.delay.liveDelayFragmentCount)||isNaN(Zr)?zr&&!isNaN(zr.liveDelay)&&zr.liveDelay>0?zr.liveDelay:ae.get().streaming.delay.useSuggestedPresentationDelay===!0&&Ii!==null&&!isNaN(Ii)&&Ii>0?Ii:isNaN(Zr)?Dt&&!isNaN(Dt.minBufferTime)?4*Dt.minBufferTime:4*ie.manifestInfo.minBufferTime:4*Zr:Zr*ae.get().streaming.delay.liveDelayFragmentCount:ae.get().streaming.delay.liveDelay,(sr=J.getAvailabilityStartTime())!==null&&(Ze=sr),Tn=Dt&&Dt.dvrWindowSize>0?Math.min(fn,Dt.dvrWindowSize):fn,we=Tn,Ee=Tn,Tn},getLiveDelay:function(){return we},getOriginalLiveDelay:function(){return Ee},getCurrentLiveLatency:function(){if(!me||isNaN(Ze))return NaN;var Ve=ut();if(isNaN(Ve)||Ve===0)return 0;var Dt=new Date().getTime()+1e3*ne.getClientTimeOffset();return Math.max(((Dt-Ze-1e3*Ve)/1e3).toFixed(3),0)},play:Ne,isPaused:et,isStalled:jt,pause:pe,isSeeking:ht,getStreamEndTime:Fe,seek:Me,seekToOriginalLive:function(){var Ve=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=Xe();if(Tn!==0){var sr=Tn-(we=Ee);Me(sr,Ve,Dt,fn)}},seekToCurrentLive:function(){var Ve=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=Xe();if(Tn!==0){var sr=Tn-we;Me(sr,Ve,Dt,fn)}},reset:Pe,updateCurrentTime:An,getAvailabilityStartTime:function(){return Ze}},P=(0,x.Z)(se).getInstance().getLogger(L),Pe(),L}I.__dashjs_factory_name="PlaybackController";var C=U.Z.getSingletonFactory(I),j=w(3186),z="loading",$="executed",W="failed";function ue(L){var P,B,V,ee,J=(L=L||{}).eventBus,H=L.events,ne=L.dashMetrics,fe=L.fragmentLoader,we=L.debug,Ee=L.streamInfo,ie=L.type;function me(Z){var le;return!!Z&&(le=!1,V.some(function(ae){if(se=Z,Q=ae,!isNaN(se.index)&&se.startTime===Q.startTime&&se.adaptationIndex===Q.adaptationIndex&&se.type===Q.type||function(Pe,be){return isNaN(Pe.index)&&isNaN(be.index)&&Pe.quality===be.quality}(Z,ae)||function(Pe,be){return Pe.action===j.Z.ACTION_COMPLETE&&Pe.action===be.action}(Z,ae))return le=!0;var se,Q}),le)}function ge(Z){return isNaN(Z.duration)?.25:Math.min(Z.duration/8,.5)}function He(Z){V=V.filter(function(le){var ae=ge(le);return isNaN(le.startTime)||Z!==void 0&&le.startTime>=Z-ae})}function Oe(Z,le){le<=Z+.5||(V=V.filter(function(ae){var se=ge(ae);return isNaN(ae.startTime)||ae.startTime>=le-se||isNaN(ae.duration)||ae.startTime+ae.duration<=Z+se}))}function Ze(Z,le,ae){for(var se=Z.length-1;se>=0;se--){var Q=Z[se],Pe=Q.startTime,be=Pe+Q.duration;if(ae=isNaN(ae)?ge(Q):ae,!isNaN(Pe)&&!isNaN(be)&&le+ae>=Pe&&le-ae<be||isNaN(Pe)&&isNaN(le))return Q}return null}function $e(Z,le){ne.addSchedulingInfo(Z,le),ne.addRequestsQueue(Z.mediaType,ee,V)}function _e(Z){Z.sender===fe&&(ee.splice(ee.indexOf(Z.request),1),Z.response&&!Z.error&&V.push(Z.request),$e(Z.request,Z.error?W:$),J.trigger(H.FRAGMENT_LOADING_COMPLETED,{request:Z.request,response:Z.response,error:Z.error,sender:this},{streamId:Ee.id,mediaType:ie}))}function ke(Z){Z.sender===fe&&J.trigger(H.FRAGMENT_LOADING_PROGRESS,{request:Z.request,response:Z.response,error:Z.error,sender:this},{streamId:Ee.id,mediaType:ie})}function Ae(Z){Z.sender===fe&&J.trigger(H.FRAGMENT_LOADING_ABANDONED,{request:Z.request},{streamId:Ee.id,mediaType:ie})}function Ge(){V=[],ee=[]}return P={getStreamId:function(){return Ee.id},getType:function(){return ie},getRequests:function(Z){var le=Z?Z.state instanceof Array?Z.state:[Z.state]:[],ae=[];return le.forEach(function(se){var Q=function(Pe){var be;switch(Pe){case z:be=ee;break;case $:be=V;break;default:be=[]}return be}(se);ae=ae.concat(function(Pe,be){return be.hasOwnProperty("time")?[Ze(Pe,be.time,be.threshold)]:Pe.filter(function(Fe){for(var Ne in be)if(Ne!=="state"&&be.hasOwnProperty(Ne)&&Fe[Ne]!=be[Ne])return!1;return!0})}(Q,Z))}),ae},isFragmentLoaded:me,isFragmentLoadedOrPending:function(Z){var le,ae=!1,se=0;if(!(ae=me(Z)))for(se=0;se<ee.length;se++)le=ee[se],Z.url===le.url&&Z.startTime===le.startTime&&(ae=!0);return ae},removeExecutedRequestsBeforeTime:He,removeExecutedRequestsAfterTime:function(Z){V=V.filter(function(le){return isNaN(le.startTime)||Z!==void 0&&le.startTime<Z})},syncExecutedRequestsWithBufferedRange:function(Z,le){if(Z&&Z.length!==0){for(var ae=0,se=0,Q=Z.length;se<Q;se++)Oe(ae,Z.start(se)),ae=Z.end(se);le>0&&Oe(ae,le)}else He()},abortRequests:function(){B.debug("abort requests"),fe.abort(),ee=[]},executeRequest:function(Z){Z.action===j.Z.ACTION_DOWNLOAD?($e(Z,z),ee.push(Z),function(le){J.trigger(H.FRAGMENT_LOADING_STARTED,{request:le},{streamId:Ee.id,mediaType:ie}),fe.load(le)}(Z)):B.warn("Unknown request action.")},reset:function(){J.off(H.LOADING_COMPLETED,_e,this),J.off(H.LOADING_DATA_PROGRESS,ke,this),J.off(H.LOADING_ABANDONED,Ae,this),fe&&fe.reset(),Ge()},resetInitialSettings:Ge,addExecutedRequest:function(Z){V.push(Z)}},B=we.getLogger(P),Ge(),J.on(H.LOADING_COMPLETED,_e,P),J.on(H.LOADING_DATA_PROGRESS,ke,P),J.on(H.LOADING_ABANDONED,Ae,P),P}ue.__dashjs_factory_name="FragmentModel";var N=U.Z.getClassFactory(ue);N.FRAGMENT_MODEL_LOADING=z,N.FRAGMENT_MODEL_EXECUTED=$,N.FRAGMENT_MODEL_CANCELED="canceled",N.FRAGMENT_MODEL_FAILED=W,U.Z.updateClassFactory(ue.__dashjs_factory_name,N);var X=N,ce=w(5459);function oe(L){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},oe(L)}function de(L,P){return de=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},de(L,P)}function Ce(L,P){return!P||oe(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Je(L){return Je=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Je(L)}var Te=new(function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&de(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Je(P);if(B){var ne=Je(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Ce(this,J)});function ee(){var J;return function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,J.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,J.SEGMENT_BASE_LOADER_ERROR_CODE=15,J.TIME_SYNC_FAILED_ERROR_CODE=16,J.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,J.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,J.APPEND_ERROR_CODE=20,J.REMOVE_ERROR_CODE=21,J.DATA_UPDATE_FAILED_ERROR_CODE=22,J.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,J.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,J.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,J.DOWNLOAD_ERROR_ID_SIDX_CODE=26,J.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,J.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,J.DOWNLOAD_ERROR_ID_XLINK_CODE=29,J.MANIFEST_ERROR_ID_PARSE_CODE=31,J.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,J.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,J.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,J.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,J.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",J.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",J.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",J.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",J.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",J.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",J.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",J.APPEND_ERROR_MESSAGE="chunk is not defined",J.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",J.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",J.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",J.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",J.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",J.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",J}return ee}(w(2230).Z)),je=w(1264),nt=w(7855);function ct(L){var P,B,V,ee,J,H,ne=this.context,fe=(0,je.Z)(ne).getInstance(),we=L.textController,Ee=L.eventBus,ie=[],me=[],ge=!1,He=L.mediaSource,Oe=null;function Ze(Q){return new Promise(function(Pe){se(function(){ee.changeType&&ee.changeType(Q),Pe()})})}function $e(Q){return ee=we.getTextSourceBuffer(Q),Promise.resolve()}function _e(){if(typeof ee.addEventListener=="function")try{ee.addEventListener("updateend",le,!1),ee.addEventListener("error",ae,!1),ee.addEventListener("abort",ae,!1)}catch(Q){H=setInterval(le,50)}else H=setInterval(le,50)}function ke(Q){return new Promise(function(Pe){ee&&fe.get().streaming.buffer.useAppendWindow?se(function(){try{if(!ee)return void Pe();var be=He.duration,Fe=0;Q&&!isNaN(Q.start)&&!isNaN(Q.duration)&&isFinite(Q.duration)&&(be=Q.start+Q.duration),Q&&!isNaN(Q.start)&&(Fe=Q.start),ee.appendWindowEnd===be&&ee.appendWindowStart===Fe||(ee.appendWindowStart=0,ee.appendWindowEnd=be+.01,ee.appendWindowStart=Math.max(Fe-.1,0),V.debug("Updated append window for ".concat(J.type,". Set start to ").concat(ee.appendWindowStart," and end to ").concat(ee.appendWindowEnd))),Pe()}catch(Ne){V.warn("Failed to set append window"),Pe()}}):Pe()})}function Ae(Q){return new Promise(function(Pe){ee?se(function(){try{ee.timestampOffset===Q||isNaN(Q)||(ee.timestampOffset=Q,V.debug("Set MSE timestamp offset to ".concat(Q))),Pe()}catch(be){Pe()}}):Pe()})}function Ge(){if(!ge&&me.length>0){ge=!0;var Q=me[0];me.splice(0,1);var Pe=function(){ge=!1,me.length>0&&Ge.call(this),Q&&Q.data&&Q.data.segmentType&&Q.data.segmentType!==nt.w.INIT_SEGMENT_TYPE&&delete Q.data.bytes,Q.promise.resolve({chunk:Q.data})};try{Oe=Q.request,Q.data.bytes.byteLength===0?Pe.call(this):(ee.appendBuffer?ee.appendBuffer(Q.data.bytes):ee.append(Q.data.bytes,Q.data),se(Pe.bind(this)))}catch(be){V.fatal('SourceBuffer append failed "'+be+'"'),me.length>0?Ge():ge=!1,delete Q.data.bytes,Q.promise.reject({chunk:Q.data,error:new ce.Z(be.code,be.message)})}}}function Z(){ie.length>0&&(ee.updating||(ie.shift()(),Z()))}function le(){ee.updating||Z()}function ae(Q){var Pe,be,Fe=Q.target||{};Pe=T.Z.SOURCE_BUFFER_ERROR,be={error:Fe,lastRequestAppended:Oe},Ee.trigger(Pe,be,{streamId:J.streamInfo.id,mediaType:B})}function se(Q){ie.push(Q),ee.updating||Z()}return P={getType:function(){return B},getAllBufferRanges:function(){try{return ee.buffered}catch(Q){return V.error("getAllBufferRanges exception: "+Q.message),null}},getBuffer:function(){return ee},append:function(Q){var Pe=this,be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(Fe,Ne){Q?(me.push({data:Q,promise:{resolve:Fe,reject:Ne},request:be}),se(Ge.bind(Pe))):Ne({chunk:Q,error:new ce.Z(Te.APPEND_ERROR_CODE,Te.APPEND_ERROR_MESSAGE)})})},remove:function(Q){return new Promise(function(Pe,be){var Fe=Q.start,Ne=Q.end;Fe>=0&&Ne>Fe?se(function(){try{ee.remove(Fe,Ne),se(function(){Pe({from:Fe,to:Ne,unintended:!1}),Q.resolve&&Q.resolve()})}catch(pe){be({from:Fe,to:Ne,unintended:!1,error:new ce.Z(Te.REMOVE_ERROR_CODE,Te.REMOVE_ERROR_MESSAGE)}),Q.reject&&Q.reject(pe)}}):Pe()})},abort:function(){return new Promise(function(Q){try{me=[],He.readyState==="open"?se(function(){try{ee&&ee.abort(),Q()}catch(Pe){Q()}}):(ee&&ee.setTextTrack&&He.readyState==="ended"&&ee.abort(),Q())}catch(Pe){Q()}})},reset:function(){if(ee){try{ie=[],function(){try{typeof ee.removeEventListener=="function"&&(ee.removeEventListener("updateend",le,!1),ee.removeEventListener("error",ae,!1),ee.removeEventListener("abort",ae,!1)),clearInterval(H)}catch(Q){V.error(Q)}}(),ge=!1,me=[],ee.getClassName&&ee.getClassName()==="TextSourceBuffer"||(V.debug("Removing sourcebuffer from media source"),He.removeSourceBuffer(ee))}catch(Q){}ee=null}Oe=null},updateTimestampOffset:Ae,initializeForStreamSwitch:function(Q,Pe,be){B=(J=Q).type;var Fe=J.codec;(function(pe){ee=pe.getBuffer()})(be),_e();var Ne=[];return Ne.push(new Promise(function(pe){se(function(){var Me=ee.appendWindowStart,Xe=ee.appendWindowEnd;ee&&(ee.abort(),ee.appendWindowStart=Me,ee.appendWindowEnd=Xe),pe()})})),Ne.push(ke(J.streamInfo)),fe.get().streaming.buffer.useChangeTypeForTrackSwitch&&Ne.push(Ze(Fe)),Pe&&Pe.MSETimeOffset!==void 0&&Ne.push(Ae(Pe.MSETimeOffset)),Promise.all(Ne)},initializeForFirstUse:function(Q,Pe,be){B=(J=Pe).type;var Fe=J.codec;try{if(Fe.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return $e(Q);ee=He.addSourceBuffer(Fe),_e();var Ne=[];return Ne.push(ke(J.streamInfo)),be&&be.MSETimeOffset!==void 0&&Ne.push(Ae(be.MSETimeOffset)),Promise.all(Ne)}catch(pe){return J.type==y.Z.TEXT&&!J.isFragmented||Fe.indexOf('codecs="stpp')!==-1||Fe.indexOf('codecs="vtt')!==-1||Fe.indexOf("text/vtt")!==-1?$e(Q):Promise.reject(pe)}},updateAppendWindow:ke,changeType:Ze},V=(0,x.Z)(ne).getInstance().getLogger(P),P}ct.__dashjs_factory_name="SourceBufferSink";var Ie=U.Z.getClassFactory(ct);function Ye(L){var P,B,V,ee=this.context,J=[],H=L;function ne(fe,we){return J=J.filter(function(Ee){return!((isNaN(we)||Ee.start<we)&&(isNaN(fe)||Ee.end>fe))}),Promise.resolve()}return P={getAllBufferRanges:function(){for(var fe=[],we=0;we<J.length;we++){var Ee=J[we];fe.length===0||Ee.start>fe[fe.length-1].end?fe.push({start:Ee.start,end:Ee.end}):fe[fe.length-1].end=Ee.end}var ie={start:function(me){return fe[me].start},end:function(me){return fe[me].end}};return Object.defineProperty(ie,"length",{get:function(){return fe.length}}),ie},append:function(fe){return fe.segmentType!=="InitializationSegment"?(J.push(fe),J.sort(function(we,Ee){return we.start-Ee.start}),V=null):V=fe,B.debug("PreBufferSink appended chunk s: "+fe.start+"; e: "+fe.end),H&&H({chunk:fe}),Promise.resolve()},remove:ne,abort:function(){return Promise.resolve()},discharge:function(fe,we){var Ee=function(ie,me){return J.filter(function(ge){return(isNaN(me)||ge.start<me)&&(isNaN(ie)||ge.end>ie)})}(fe,we);return V&&(Ee.push(V),V=null),ne(fe,we),Ee},reset:function(){J=[],V=null,H=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(fe){fe()},getBuffer:function(){return this}},B=(0,x.Z)(ee).getInstance().getLogger(P),P}Ye.__dashjs_factory_name="PreBufferSink";var mt=U.Z.getClassFactory(Ye);function xe(){var L={};return{save:function(P){var B=P.streamId,V=P.representationId;L[B]=L[B]||{},L[B][V]=P},extract:function(P,B){return L&&L[P]&&L[P][B]?L[P][B]:null},reset:function(){L={}}}}xe.__dashjs_factory_name="InitCache";var We=U.Z.getSingletonFactory(xe),it=.01,qt="BufferController";function Ft(L){L=L||{};var P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He,Oe,Ze,$e,_e,ke,Ae,Ge,Z=this.context,le=(0,m.Z)(Z).getInstance(),ae=L.errHandler,se=L.fragmentModel,Q=L.representationController,Pe=L.adapter,be=L.textController,Fe=L.abrController,Ne=L.playbackController,pe=L.streamInfo,Me=L.type,Xe=L.settings;function dt(rt){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(ze,Ve){H=rt,we&&Kt&&typeof we.discharge=="function"?(Ee=we,et(Kt).then(function(){ze()}).catch(function(Dt){Ve(Dt)})):ze()})}function ut(rt){return Pe.convertRepresentationToRepresentationInfo(Q.getRepresentationForQuality(rt))}function et(rt){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(ze,Ve){_e&&rt?H?(ie=!1,jt(rt,Kt).then(function(Dt){ze(Dt)}).catch(function(Dt){Ve(Dt)})):(ie=!0,ht().then(function(Dt){ze(Dt)}).catch(function(Dt){Ve(Dt)})):ze(null)})}function ht(){var rt=this;return new Promise(function(Kt,ze){var Ve=Fe.getQualityFor(Me,pe.id);we=mt(Z).create(ot.bind(rt)),Pn(ut(Ve)).then(function(){Kt(we)}).catch(function(){ze()})})}function jt(rt,Kt){return new Promise(function(ze,Ve){var Dt=Fe.getQualityFor(Me,pe.id);we=Ie(Z).create({mediaSource:H,textController:be,eventBus:le}),function(fn,Tn,sr){var Zr=ut(sr);return Tn&&Tn[Me]&&(Me===y.Z.VIDEO||Me===y.Z.AUDIO)?we.initializeForStreamSwitch(fn,Zr,Tn[Me]):we.initializeForFirstUse(pe,fn,Zr)}(rt,Kt,Dt).then(function(){return Pn(ut(Dt))}).then(function(){ze(we)}).catch(function(fn){B.fatal("Caught error on create SourceBuffer: "+fn),ae.error(new ce.Z(Te.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Te.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+Me)),Ve(fn)})})}function Ht(rt){Xe.get().streaming.cacheInitSegments&&(B.info("Init fragment finished loading saving to",Me+"'s init cache"),_e.save(rt.chunk)),B.debug("Append Init fragment",Me," with representationId:",rt.chunk.representationId," and quality:",rt.chunk.quality,", data size:",rt.chunk.bytes.byteLength),Ut(rt.chunk)}function kt(rt){Ut(rt.chunk,rt.request)}function Ut(rt){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;we&&(we.append(rt,Kt).then(function(ze){ot(ze)}).catch(function(ze){ot(ze)}),rt.mediaInfo.type===y.Z.VIDEO&&On(T.Z.VIDEO_CHUNK_RECEIVED,{chunk:rt}))}function An(rt){if(rt&&rt.length>0)for(var Kt=0,ze=rt.length;Kt<ze;Kt++)B.debug("Buffered range: "+rt.start(Kt)+" - "+rt.end(Kt)+", currentTime = ",Ne.getTime())}function ot(rt){if(rt.error)return rt.error.code===22&&function(){if($e=!0,J=.8*Sn(),B.warn("Quota exceeded, Critical Buffer: "+J),J>0){var Ve=Math.max(.2*J,1),Dt=J-Ve,fn=Math.min(Xe.get().streaming.buffer.bufferTimeAtTopQuality,.9*Dt),Tn=Math.min(Xe.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Dt),sr={streaming:{buffer:{bufferToKeep:parseFloat(Ve.toFixed(5)),bufferTimeAtTopQuality:parseFloat(fn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Tn.toFixed(5))}}};Xe.update(sr)}}(),void(rt.error.code!==22&&Lt()||(B.warn("Clearing playback buffer to overcome quota exceed situation"),On(T.Z.QUOTA_EXCEEDED,{criticalBufferLevel:J,quotaExceededTime:rt.chunk.start}),Gt(Xt())));if(we&&(Dn(),$e=!1,(He=rt.chunk)&&He.endFragment)){He&&!isNaN(He.index)&&(ne=Math.max(He.index,ne),Nn());var Kt=we.getAllBufferRanges();He.segmentType===nt.w.MEDIA_SEGMENT_TYPE&&(An(Kt),xt(),function(){if(!isNaN(Ge)&&!ie)if(Me===y.Z.AUDIO||Me===y.Z.VIDEO){var Ve=Ne.getTime(),Dt=Wt(Ve,0),fn=Wt(Ge,0);if(Dt&&fn&&Dt.start===fn.start)Ge=NaN;else{var Tn=Q.getCurrentRepresentation().segmentDuration,sr=Wt(Ge,Tn);sr&&(Xe.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Ve-Ge)>Tn?Ge<=sr.end&&Ne.seek(Math.max(Ge,sr.start),!1,!0):Ve<sr.start&&Ne.seek(sr.start,!1,!0))}}else Ge=NaN}());var ze=!1;me&&(me.indexOf(He)>0&&(ze=!0),me=null),He&&!ze&&On(T.Z.BYTES_APPENDED_END_FRAGMENT,{quality:He.quality,startTime:He.start,index:He.index,bufferedRanges:Kt,segmentType:He.segmentType,mediaType:Me})}}function yt(){return new Promise(function(rt,Kt){var ze=$t();if(!ze||ze.length===0)return xt(),void rt();Gt(ze).then(function(){rt()}).catch(function(Ve){Kt(Ve)})})}function $t(rt){var Kt=[],ze=we.getAllBufferRanges();if(!ze||ze.length===0)return Kt;if(!rt&&rt!==0||isNaN(rt))Kt.push({start:ze.start(0),end:ze.end(ze.length-1)+.5});else{var Ve=function(fn,Tn){var sr=Xe.get().streaming.buffer.bufferToKeep,Zr=Tn.start(0);if(fn-Zr>sr){var Ii=Math.max(0,fn-sr),zr=se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:it})[0];if(zr&&(Ii=Math.min(zr.startTime,Ii)),Ii>0)return{start:Zr,end:Ii}}return null}(rt,ze),Dt=function(fn,Tn){var sr=Tn.end(Tn.length-1)+.5,Zr=En(fn),Ii=pe.manifestInfo.duration>=Xe.get().streaming.buffer.longFormContentDurationThreshold?Xe.get().streaming.buffer.bufferTimeAtTopQualityLongForm:Xe.get().streaming.buffer.bufferTimeAtTopQuality,zr=isNaN(Zr)?fn:Math.min(Zr,fn+Ii);if(zr>=Tn.end(Tn.length-1))return null;var io=se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:it})[0];if(io&&(zr=Math.max(io.startTime+io.duration,zr)),Xe.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Zi=0;Zi<Tn.length;Zi++)if(Tn.start(Zi)<=fn&&fn<=Tn.end(Zi)&&Tn.start(Zi)<=zr&&zr<=Tn.end(Zi)){var Bs=zr;zr=Zi+1<Tn.length?Tn.start(Zi+1):Tn.end(Zi)+1,B.debug("Buffered range ["+Tn.start(Zi)+", "+Tn.end(Zi)+"] overlaps with targetTime "+fn+" and range to be pruned ["+Bs+", "+sr+"], using ["+zr+", "+sr+"] instead"+(zr<sr?"":" (no actual pruning)"));break}}return zr<Tn.end(Tn.length-1)?{start:zr,end:sr}:null}(rt,ze);Ve&&Kt.push(Ve),Dt&&Kt.push(Dt)}return Kt}function xt(){(!Ae||Me===y.Z.TEXT&&be.isTextEnabled())&&Dn()}function en(){rr()}function Jt(){rr(),Ge=NaN}function Wt(rt,Kt){if(!we)return null;var ze,Ve,Dt=we.getAllBufferRanges(),fn=0,Tn=0,sr=null,Zr=null,Ii=0,zr=isNaN(Kt)?.15:Kt;if(Dt!=null){for(Ve=0,ze=Dt.length;Ve<ze;Ve++)if(fn=Dt.start(Ve),Tn=Dt.end(Ve),sr===null)Ii=Math.abs(fn-rt),(rt>=fn&&rt<Tn||Ii<=zr)&&(sr=fn,Zr=Tn);else{if(!((Ii=fn-Zr)<=zr))break;Zr=Tn}if(sr!==null)return{start:sr,end:Zr}}return null}function Dn(){if(Ne){var rt=Ne.getTime()||0;ie&&(rt=isNaN(Ge)?0:Ge);var Kt=Xe.get().streaming.gaps.jumpGaps&&!isNaN(Xe.get().streaming.gaps.smallGapLimit)?Xe.get().streaming.gaps.smallGapLimit:NaN;ee=Math.max(function(ze,Ve){var Dt;return Xe.get().streaming.gaps.jumpGaps&&(Ve=Xe.get().streaming.gaps.smallGapLimit),(Dt=Wt(ze,Ve))===null?0:Dt.end-ze}(rt,Kt),0),On(T.Z.BUFFER_LEVEL_UPDATED,{mediaType:Me,bufferLevel:ee}),rr()}}function Nn(){var rt=ne>=fe-1,Kt=Ne.getTimeToStreamEnd(pe)-ee<1e-5;!rt&&!Kt||V||(bt(!0),B.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(pe.id," and type ").concat(Me)))}function rr(){Me!==y.Z.AUDIO&&Me!==y.Z.VIDEO||((!Ne.getLowLatencyModeEnabled()&&ee<Xe.get().streaming.buffer.stallThreshold||ee===0)&&!V?ir(D.Z.BUFFER_EMPTY):(V||ee>=Xe.get().streaming.buffer.stallThreshold||Ne.getLowLatencyModeEnabled()&&ee>0)&&ir(D.Z.BUFFER_LOADED))}function ir(rt){ge===rt||rt===D.Z.BUFFER_EMPTY&&Ne.getTime()===0||Me===y.Z.TEXT&&!be.isTextEnabled()||(ge=rt,On(T.Z.BUFFER_LEVEL_STATE_CHANGED,{state:rt}),On(rt===D.Z.BUFFER_LOADED?T.Z.BUFFER_LOADED:T.Z.BUFFER_EMPTY),B.debug(rt===D.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function It(){we&&Me!==y.Z.TEXT&&(V||Gt(Xt()))}function Xt(){var rt=[],Kt=we.getAllBufferRanges();if(!Kt||Kt.length===0)return rt;var ze=Ne.getTime(),Ve=Math.max(0,ze-Xe.get().streaming.buffer.bufferToKeep),Dt=se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:ze,threshold:it})[0];if(Dt)Ve=Math.min(Dt.startTime,Ve);else if(ze===0&&Ne.getIsDynamic())return[];if(Kt.start(0)<=Ve){for(var fn={start:0,end:Ve},Tn=0;Tn<Kt.length&&Kt.end(Tn)<=Ve;Tn++)fn.end=Kt.end(Tn);fn.start<fn.end&&rt.push(fn)}return rt}function Gt(rt){return new Promise(function(Kt,ze){if(rt&&we&&rt.length!==0){var Ve=[];rt.forEach(function(Dt){Ve.push(function(fn){return new Promise(function(Tn,sr){fn.resolve=Tn,fn.reject=sr,ke.push(fn)})}(Dt))}),Ze||un(),Promise.all(Ve).then(function(){Kt()}).catch(function(Dt){ze(Dt)})}else Kt()})}function un(){try{if(ke.length===0||!we)return B.debug("Nothing to prune, halt pruning"),ke=[],void(Ze=!1);var rt=we.getBuffer();if(!rt||!rt.buffered||rt.buffered.length===0)return B.debug("SourceBuffer is empty (or does not exist), halt pruning"),ke=[],void(Ze=!1);var Kt=ke.shift();B.debug("".concat(Me,": Removing buffer from: ").concat(Kt.start," to ").concat(Kt.end)),Ze=!0,Ne.getTime()<Kt.end&&bt(!1),we.remove(Kt).then(function(ze){vn(ze)}).catch(function(ze){vn(ze)})}catch(ze){Ze=!1}}function vn(rt){B.debug("onRemoved buffer from:",rt.from,"to",rt.to),we&&(An(we.getAllBufferRanges()),ke.length===0&&(Ze=!1,Dn()),rt.unintended&&(B.warn("Detected unintended removal from:",rt.from,"to",rt.to,"setting streamprocessor time to",rt.from),On(T.Z.SEEK_TARGET,{time:rt.from})),Ze?un():(Ae?Ae=!1:Dn(),On(T.Z.BUFFER_CLEARED,{from:rt.from,to:rt.to,unintended:rt.unintended,hasEnoughSpaceToAppend:Lt(),quotaExceeded:$e})))}function Pn(rt){return new Promise(function(Kt){rt&&rt.MSETimeOffset!==void 0&&we&&we.updateTimestampOffset?we.updateTimestampOffset(rt.MSETimeOffset).then(function(){Kt()}).catch(function(){Kt()}):Kt()})}function xn(){return we&&!V?we.updateAppendWindow(pe):Promise.resolve()}function Fn(){++Oe*(Xe.get().streaming.wallclockTimeUpdateInterval/1e3)>=Xe.get().streaming.buffer.bufferPruningInterval&&(Oe=0,It())}function Gn(){rr()}function bt(rt){(V=rt)?On(T.Z.BUFFERING_COMPLETED):fe=Number.POSITIVE_INFINITY}function Sn(){try{var rt,Kt,ze=we.getAllBufferRanges(),Ve=0;if(!ze)return Ve;for(Kt=0,rt=ze.length;Kt<rt;Kt++)Ve+=ze.end(Kt)-ze.start(Kt);return Ve}catch(Dt){return 0}}function En(rt){try{var Kt=rt,ze=we.getAllBufferRanges();if(!ze||ze.length===0)return NaN;for(var Ve=0;Kt===rt&&Ve<ze.length;){var Dt=ze.start(Ve),fn=ze.end(Ve);Kt>=Dt&&Kt<=fn&&(Kt=fn),Ve+=1}return Kt===rt?NaN:Kt}catch(Tn){}}function Lt(){var rt=Sn();return isNaN(rt)||rt<J}function On(rt,Kt){var ze=Kt||{};le.trigger(rt,ze,{streamId:pe.id,mediaType:Me})}function lt(rt,Kt){if(J=Number.POSITIVE_INFINITY,ge=void 0,fe=Number.POSITIVE_INFINITY,ne=0,He=null,V=!1,Ze=!1,$e=!1,ee=0,Oe=0,ke=[],Ge=NaN,ie=!1,we){var ze=we;we=null,rt||Kt||ze.abort().then(function(){ze.reset(Kt),ze=null})}Ae=!1}return P={initialize:function(rt){dt(rt),le.on(T.Z.INIT_FRAGMENT_LOADED,Ht,P),le.on(T.Z.MEDIA_FRAGMENT_LOADED,kt,P),le.on(T.Z.WALLCLOCK_TIME_UPDATED,Fn,P),le.on(_.Z.PLAYBACK_PLAYING,Jt,P),le.on(_.Z.PLAYBACK_PROGRESS,xt,P),le.on(_.Z.PLAYBACK_TIME_UPDATED,xt,P),le.on(_.Z.PLAYBACK_RATE_CHANGED,Gn,P),le.on(_.Z.PLAYBACK_STALLED,en,P)},getStreamId:function(){return pe.id},getType:function(){return Me},getBufferControllerType:function(){return qt},createBufferSink:et,dischargePreBuffer:function(){if(we&&Ee&&typeof Ee.discharge=="function"){var rt=Ee.getAllBufferRanges();if(rt.length>0){for(var Kt="Beginning "+Me+"PreBuffer discharge, adding buffer for:",ze=0;ze<rt.length;ze++)Kt+=" start: "+rt.start(ze)+", end: "+rt.end(ze)+";";B.debug(Kt)}else B.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");me=[];for(var Ve=Ee.discharge(),Dt=null,fn=0;fn<Ve.length;fn++){var Tn=Ve[fn];if(Tn.segmentType!==nt.w.INIT_SEGMENT_TYPE){var sr=_e.extract(Tn.streamId,Tn.representationId);sr&&Dt!==sr&&(me.push(sr),we.append(sr),Dt=sr)}me.push(Tn),we.append(Tn)}Ee.reset(),Ee=null}},getBuffer:function(){return we},getBufferLevel:function(){return ee},getRangeAt:Wt,hasBufferAtTime:function(rt){try{var Kt=we.getAllBufferRanges();if(!Kt||Kt.length===0)return!1;for(var ze=0;ze<Kt.length;){var Ve=Kt.start(ze),Dt=Kt.end(ze);if(rt>=Ve&&rt<=Dt)return!0;ze+=1}return!1}catch(fn){return B.error(fn),!1}},pruneBuffer:It,setMediaSource:dt,getMediaSource:function(){return H},appendInitSegmentFromCache:function(rt){var Kt=_e.extract(pe.id,rt);return!!Kt&&(B.info("Append Init fragment",Me," with representationId:",Kt.representationId," and quality:",Kt.quality,", data size:",Kt.bytes.byteLength),Ut(Kt),!0)},getIsBufferingCompleted:function(){return V},setIsBufferingCompleted:bt,getIsPruningInProgress:function(){return Ze},reset:function(rt,Kt){le.off(T.Z.INIT_FRAGMENT_LOADED,Ht,this),le.off(T.Z.MEDIA_FRAGMENT_LOADED,kt,this),le.off(T.Z.WALLCLOCK_TIME_UPDATED,Fn,this),le.off(_.Z.PLAYBACK_PLAYING,Jt,this),le.off(_.Z.PLAYBACK_PROGRESS,xt,this),le.off(_.Z.PLAYBACK_TIME_UPDATED,xt,this),le.off(_.Z.PLAYBACK_RATE_CHANGED,Gn,this),le.off(_.Z.PLAYBACK_STALLED,en,this),lt(rt,Kt)},prepareForPlaybackSeek:function(){return V&&bt(!1),we.abort()},prepareForReplacementTrackSwitch:function(rt){return new Promise(function(Kt,ze){we.abort().then(function(){return xn()}).then(function(){return Xe.get().streaming.buffer.useChangeTypeForTrackSwitch?we.changeType(rt):Promise.resolve()}).then(function(){return yt()}).then(function(){bt(!1),Kt()}).catch(function(Ve){ze(Ve)})})},prepareForNonReplacementTrackSwitch:function(rt){return new Promise(function(Kt,ze){xn().then(function(){return Xe.get().streaming.buffer.useChangeTypeForTrackSwitch?we.changeType(rt):Promise.resolve()}).then(function(){Kt()}).catch(function(Ve){ze(Ve)})})},prepareForForceReplacementQualitySwitch:function(rt){return new Promise(function(Kt,ze){we.abort().then(function(){return xn()}).then(function(){return yt()}).then(function(){return Pn(rt)}).then(function(){bt(!1),Kt()}).catch(function(Ve){ze(Ve)})})},updateAppendWindow:xn,getAllRangesWithSafetyFactor:$t,getContinuousBufferTimeForTargetTime:En,clearBuffers:Gt,pruneAllSafely:yt,updateBufferTimestampOffset:Pn,setSeekTarget:function(rt){Ge=rt},segmentRequestingCompleted:function(rt){isNaN(rt)||(fe=rt,Nn())}},B=(0,x.Z)(Z).getInstance().getLogger(P),_e=We(Z).getInstance(),lt(),P}Ft.__dashjs_factory_name=qt;var gt=U.Z.getClassFactory(Ft),St="NotFragmentedTextBufferController";function Re(L){L=L||{};var P,B,V,ee,J,H,ne=this.context,fe=(0,m.Z)(ne).getInstance(),we=L.textController,Ee=L.errHandler,ie=L.streamInfo,me=L.type;function ge(Ze){ee=Ze}function He(Ze){var $e,_e;B!==Ze&&(B=Ze)&&($e=T.Z.BUFFERING_COMPLETED,_e={},fe.trigger($e,_e,{streamId:ie.id,mediaType:me}))}function Oe(Ze){Ze.chunk.bytes&&!B&&(H.save(Ze.chunk),J.append(Ze.chunk),He(!0))}return P={initialize:function(Ze){ge(Ze)},getStreamId:function(){return ie.id},getType:function(){return me},getBufferControllerType:function(){return St},createBufferSink:function(Ze){return new Promise(function($e,_e){try{(J=Ie(ne).create({mediaSource:ee,textController:we,eventBus:fe})).initializeForFirstUse(ie,Ze),V||(J.getBuffer()&&typeof J.getBuffer().initialize=="function"&&J.getBuffer().initialize(),V=!0),$e(J)}catch(ke){Ee.error(new ce.Z(Te.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Te.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+me)),_e(ke)}})},dischargePreBuffer:function(){},getBuffer:function(){return J},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:ge,getMediaSource:function(){return ee},appendInitSegmentFromCache:function(Ze){return H.extract(ie.id,Ze)!==null},getIsBufferingCompleted:function(){return B},setIsBufferingCompleted:He,getIsPruningInProgress:function(){return!1},reset:function(Ze){fe.off(T.Z.INIT_FRAGMENT_LOADED,Oe,P),!Ze&&J&&(J.abort(),J.reset(),J=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return B=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},V=!1,ee=null,B=!1,H=We(ne).getInstance(),fe.on(T.Z.INIT_FRAGMENT_LOADED,Oe,P),P}Re.__dashjs_factory_name=St;var re=U.Z.getClassFactory(Re);function Be(L){L=L||{};var P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He=this.context,Oe=(0,m.Z)(He).getInstance(),Ze=L.dashMetrics,$e=L.mediaPlayerModel,_e=L.fragmentModel,ke=L.abrController,Ae=L.playbackController,Ge=L.textController,Z=L.type,le=L.bufferController,ae=L.representationController,se=L.settings;function Q(){me=!0}function Pe(){me=!1}function be(jt){if(!le.getIsBufferingCompleted()){Fe();var Ht=isNaN(jt)?0:jt;J=setTimeout(Ne,Ht)}}function Fe(){J&&(clearTimeout(J),J=null)}function Ne(){try{if(function(){try{return Z===y.Z.TEXT&&!Ge.isTextEnabled()||Ae.isPaused()&&(!Ae.getStreamController().getInitialPlayback()||!Ae.getStreamController().getAutoPlay())&&!se.get().streaming.scheduling.scheduleWhilePaused}catch(kt){return!1}}())return void Fe();if(function(){try{return!!me&&ae.getCurrentRepresentationInfo()&&(isNaN(we)||Ee||(kt=B.id,Ut=ke.getMaxAllowedIndexFor(Z,kt),!(!isNaN(fe)&&fe==Ut||(V.info("Top quality "+Z+" index has changed from "+fe+" to "+Ut),fe=Ut,0)))||function(){var An=ae.getCurrentRepresentationInfo();return!Z||!An||Ze.getCurrentBufferLevel(Z)<pe()}())}catch(An){return!1}var kt,Ut}()){var jt=!1;ge&&(jt=ke.checkPlaybackQuality(Z,B.id)),jt||(Ht=ae.getCurrentRepresentationInfo(),ie||Ht.quality!==we||Ee?(Ee?(V.debug("Switch track for "+Z+", representation id = "+Ht.id),Ee=!1):V.debug("Quality has changed, get init request for representationid = "+Ht.id),Oe.trigger(T.Z.INIT_FRAGMENT_NEEDED,{representationId:Ht.id,sender:P},{streamId:B.id,mediaType:Z}),ge=!1,ie=!1):(V.debug("Media segment needed for ".concat(Z," and stream id ").concat(B.id)),Oe.trigger(T.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:B.id,mediaType:Z}),ge=!0))}else be(Ae.getLowLatencyModeEnabled()?se.get().streaming.scheduling.lowLatencyTimeout:se.get().streaming.scheduling.defaultTimeout)}catch(kt){be(Ae.getLowLatencyModeEnabled()?se.get().streaming.scheduling.lowLatencyTimeout:se.get().streaming.scheduling.defaultTimeout)}var Ht}function pe(){var jt=NaN,Ht=ae.getCurrentRepresentationInfo();return Z&&Ht&&(jt=Z===y.Z.TEXT?function(){try{if(Ge.isTextEnabled()){var kt=ae.getCurrentRepresentationInfo();if(isNaN(kt.fragmentDuration)){var Ut=Ze.getCurrentSchedulingInfo(D.Z.SCHEDULING_INFO);return Ut?Ut.duration:0}return kt.fragmentDuration}return 0}catch(An){return 0}}():Z===y.Z.AUDIO&&H?function(){try{var kt=Ze.getCurrentBufferLevel(y.Z.VIDEO),Ut=ae.getCurrentRepresentationInfo();return isNaN(Ut.fragmentDuration)?kt+1:Math.max(kt+1,Ut.fragmentDuration)}catch(An){return 0}}():function(){try{var kt=ae.getCurrentRepresentationInfo().mediaInfo.streamInfo;return ke.isPlayingAtTopQuality(kt)?kt.manifestInfo.duration>=se.get().streaming.buffer.longFormContentDurationThreshold?se.get().streaming.buffer.bufferTimeAtTopQualityLongForm:se.get().streaming.buffer.bufferTimeAtTopQuality:$e.getStableBufferTime()}catch(Ut){return $e.getStableBufferTime()}}()),jt}function Me(){Xe(!0)}function Xe(jt){if(Ae&&_e){var Ht=_e.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ae.getTime(),threshold:0})[0];Ht&&Ae.getTime()>=Ht.startTime&&((!ne.mediaInfo||Ht.mediaInfo.type===ne.mediaInfo.type&&Ht.mediaInfo.index!==ne.mediaInfo.index)&&jt&&Oe.trigger(T.Z.TRACK_CHANGE_RENDERED,{mediaType:Z,oldMediaInfo:ne.mediaInfo,newMediaInfo:Ht.mediaInfo,streamId:B.id}),Ht.quality===ne.quality&&Ht.adaptationIndex===ne.adaptationIndex||!jt||(V.debug("Quality change rendered for streamId ".concat(B.id," and type ").concat(Z)),Oe.trigger(T.Z.QUALITY_CHANGE_RENDERED,{mediaType:Z,oldQuality:ne.quality,newQuality:Ht.quality,streamId:B.id})),ne={mediaInfo:Ht.mediaInfo,quality:Ht.quality,adaptationIndex:Ht.adaptationIndex})}}function dt(){_e.abortRequests(),Fe()}function ut(){se.get().streaming.scheduling.scheduleWhilePaused||be()}function et(jt){Ze.updatePlayListTraceMetrics({playbackspeed:jt.playbackRate.toString()})}function ht(){ge=!0,ee=0,we=NaN,ne={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},fe=NaN,Ee=!1,ie=!1,me=!0}return P={initialize:function(jt){H=jt,Oe.on(T.Z.URL_RESOLUTION_FAILED,dt,P),Oe.on(_.Z.PLAYBACK_STARTED,ut,P),Oe.on(_.Z.PLAYBACK_RATE_CHANGED,et,P),Oe.on(_.Z.PLAYBACK_TIME_UPDATED,Me,P),Oe.on(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),Oe.on(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Pe,P)},getType:function(){return Z},getStreamId:function(){return B.id},setTimeToLoadDelay:function(jt){ee=jt},getTimeToLoadDelay:function(){return ee},setSwitchTrack:function(jt){Ee=jt},getSwitchTrack:function(){return Ee},startScheduleTimer:be,clearScheduleTimer:Fe,reset:function(){Oe.off(T.Z.URL_RESOLUTION_FAILED,dt,P),Oe.off(_.Z.PLAYBACK_STARTED,ut,P),Oe.off(_.Z.PLAYBACK_RATE_CHANGED,et,P),Oe.off(_.Z.PLAYBACK_TIME_UPDATED,Me,P),Oe.off(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),Oe.off(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Pe,P),Fe(),Xe(!1),ht(),B=null},getBufferTarget:pe,getPlaybackController:function(){return Ae},setCheckPlaybackQuality:function(jt){ge=jt},setInitSegmentRequired:function(jt){ie=jt},setLastInitializedQuality:function(jt){we=jt}},V=(0,x.Z)(He).getInstance().getLogger(P),ht(),B=L.streamInfo,P}Be.__dashjs_factory_name="ScheduleController";var O=U.Z.getClassFactory(Be),M=w(7387);function q(L){var P,B,V,ee,J,H,ne=(L=L||{}).eventBus,fe=L.events,we=L.abrController,Ee=L.dashMetrics,ie=L.playbackController,me=L.timelineConverter,ge=L.type,He=L.streamInfo,Oe=L.dashConstants,Ze=L.segmentsController,$e=L.isDynamic,_e=L.adapter;function ke(){return ge}function Ae(){return V}function Ge(){return H}function Z(){B=null,V=!0,ee=[],J=null}function le(Fe){return new Promise(function(Ne,pe){var Me=Fe.hasInitialization(),Xe=Fe.hasSegments(),dt=[];dt.push(Ze.updateInitData(Fe,Me)),dt.push(Ze.updateSegmentData(Fe,Xe)),Promise.all(dt).then(function(ut){var et;ut[0]&&!ut[0].error&&(Fe=function(ht,jt){return jt&&!jt.error&&jt.representation?jt.representation:ht}(Fe,ut[0])),ut[1]&&!ut[1].error&&(Fe=function(ht,jt){if(jt&&!jt.error){var Ht,kt,Ut,An,ot=jt.segments,yt=[],$t=0;for(Ht=0,kt=ot?ot.length:0;Ht<kt;Ht++)Ut=ot[Ht],(An=(0,M.TJ)(me,$e,ht,Ut.startTime,Ut.duration,Ut.timescale,Ut.media,Ut.mediaRange,$t))&&(yt.push(An),An=null,$t++);return yt.length>0&&(ht.segments=yt),ht}}(Fe,ut[1])),(et=Fe).mediaFinishedInformation=Ze.getMediaFinishedInformation(et),function(ht){if(Ae()){var jt,Ht,kt=Ee.getCurrentManifestUpdate(),Ut=!1;if(kt){for(var An=0;An<kt.representationInfo.length;An++)if((jt=kt.representationInfo[An]).index===ht.index&&jt.mediaType===ke()){Ut=!0;break}Ut||Ee.addManifestUpdateRepresentationInfo(ht,ke())}if(function(){for(var yt=0,$t=ee.length;yt<$t;yt++){var xt=ee[yt].segmentInfoType;if(!ee[yt].hasInitialization()||(xt===Oe.SEGMENT_BASE||xt===Oe.BASE_URL)&&!ee[yt].segments)return!1}return!0}()){we.setPlaybackQuality(ge,He,(Ht=H,ee.indexOf(Ht)));var ot=Ee.getCurrentDVRInfo(ge);ot&&Ee.updateManifestUpdateInfo({latency:ot.range.end-ie.getTime()}),Ee.getCurrentRepresentationSwitch(Ge().adaptation.type)||ae(),Q()}}}(Fe),Ne()}).catch(function(ut){pe(ut)})})}function ae(){(function(){if(!(we&&Ee&&ie&&me))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var Fe=new Date,Ne=Ge(),pe=1e3*ie.getTime();Ne&&Ee.addRepresentationSwitch(Ne.adaptation.type,Fe,pe,Ne.id),ne.trigger(_.Z.REPRESENTATION_SWITCH,{mediaType:ge,streamId:He.id,currentRepresentation:Ne,numberOfRepresentations:ee.length},{streamId:He.id,mediaType:ge})}function se(Fe){return Fe==null||Fe>=ee.length?null:ee[Fe]}function Q(Fe){V=!1,ne.trigger(fe.DATA_UPDATE_COMPLETED,{data:B,currentRepresentation:H,error:Fe},{streamId:He.id,mediaType:ge})}function Pe(Fe){H=Fe,J=_e.convertRepresentationToRepresentationInfo(H)}function be(Fe){if(Fe.newDuration){var Ne=Ge();Ne&&Ne.adaptation.period&&(Ne.adaptation.period.duration=Fe.newDuration)}}return P={getStreamId:function(){return He.id},getType:ke,getData:function(){return B},isUpdating:Ae,updateData:function(Fe,Ne,pe,Me,Xe){return new Promise(function(dt,ut){if(V=!0,ee=Ne,B=Fe,Pe(se(Xe)),pe!==y.Z.VIDEO&&pe!==y.Z.AUDIO&&(pe!==y.Z.TEXT||!Me))return Q(),void dt();for(var et=[],ht=0,jt=ee.length;ht<jt;ht++){var Ht=ee[ht];et.push(le(Ht))}Promise.all(et).then(function(){Pe(se(Xe)),dt()}).catch(function(kt){ut(kt)})})},getCurrentRepresentation:Ge,getCurrentRepresentationInfo:function(){return J},getRepresentationForQuality:se,prepareQualityChange:function(Fe){Pe(se(Fe)),ae()},reset:function(){ne.off(_.Z.MANIFEST_VALIDITY_CHANGED,be,P),Z()}},Z(),ne.on(_.Z.MANIFEST_VALIDITY_CHANGED,be,P),P}q.__dashjs_factory_name="RepresentationController";var K=U.Z.getClassFactory(q),ye=w(3106),he=w(9326),Ke=w(7473),wt=w(2594);function st(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var at=function L(){st(this,L),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};at.INITIAL_PLAYOUT_START_REASON="initial_playout",at.SEEK_START_REASON="seek",at.RESUME_FROM_PAUSE_START_REASON="resume",at.METRICS_COLLECTION_START_REASON="metrics_collection_start";var tt=function L(){st(this,L),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};tt.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",tt.REBUFFERING_REASON="rebuffering",tt.USER_REQUEST_STOP_REASON="user_request",tt.END_OF_PERIOD_STOP_REASON="end_of_period",tt.END_OF_CONTENT_STOP_REASON="end_of_content",tt.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",tt.FAILURE_STOP_REASON="failure";var ft=w(7802);function Et(){return{ntpToUTC:function(L){var P=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(P.getTime()+L).getTime()}}}Et.__dashjs_factory_name="TimeUtils";var Tt=U.Z.getSingletonFactory(Et);function Ct(L){L=L||{};var P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He,Oe,Ze=this.context,$e=(0,m.Z)(Ze).getInstance(),_e=L.streamInfo,ke=L.type,Ae=L.errHandler,Ge=L.mimeType,Z=L.timelineConverter,le=L.adapter,ae=L.manifestModel,se=L.mediaPlayerModel,Q=L.fragmentModel,Pe=L.abrController,be=L.playbackController,Fe=L.mediaController,Ne=L.textController,pe=L.dashMetrics,Me=L.settings,Xe=L.boxParser,dt=L.segmentBlacklistController;function ut(){return _e.id}function et(){return ke}function ht(){return le.getIsTextTrack(fe.getData())}function jt(){J=[],ee=null,He=0,we=!1,Ee=!1,ie=!1,Oe=null}function Ht(lt){return!isNaN(lt)&&!isNaN(_e.duration)&&isFinite(_e.duration)&&lt>=_e.start+_e.duration}function kt(lt){var rt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(lt.sender){if(be.getIsManifestUpdateInProgress())$t();else if((!ht()||Ne.isTextEnabled())&&H&&lt.representationId&&!H.appendInitSegmentFromCache(lt.representationId)){var Kt=fe.getCurrentRepresentation();if(Kt.range===0)return void Ut();var ze=me?me.getInitRequest(ee,Kt):null;ze?Q.executeRequest(ze):rt&&(ne.setInitSegmentRequired(!0),$t())}}}function Ut(lt){var rt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(be.getIsManifestUpdateInProgress()||H.getIsPruningInProgress())$t();else{var Kt=yt();Kt?(we=!1,Ee=!1,An(Kt)):ot(rt)}}function An(lt){isNaN(lt.startTime+lt.duration)||(He=lt.startTime+lt.duration),lt.delayLoadingTime=new Date().getTime()+ne.getTimeToLoadDelay(),ne.setTimeToLoadDelay(0),function(rt){var Kt=rt.url;return rt.range&&(Kt=Kt.concat("_",rt.range)),dt.contains(Kt)}(lt)?(B.warn("Fragment request url ".concat(lt.url," for stream id ").concat(_e.id," and media type ").concat(ke," is on the ignore list and will be skipped")),$t()):(B.debug("Next fragment request url for stream id ".concat(_e.id," and media type ").concat(ke," is ").concat(lt.url)),Q.executeRequest(lt))}function ot(lt){var rt,Kt=fe.getCurrentRepresentation();if(!Me.get().streaming.gaps.enableSeekFix||!we&&be.getTime()!==0||(V?V&&Kt.segmentInfoType===v.Z.SEGMENT_TIMELINE&&(rt=me.getValidTimeAheadOfTargetTime(He,ee,Kt,Me.get().streaming.gaps.threshold)):rt=me.getValidTimeAheadOfTargetTime(He,ee,Kt,Me.get().streaming.gaps.threshold),isNaN(rt)||rt===He)){if(me.isLastSegmentRequested(Kt,He)){var ze=me.getCurrentIndex();return B.debug("Segment requesting for stream ".concat(_e.id," has finished")),$e.trigger(T.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:ze},{streamId:_e.id,mediaType:ke}),H.segmentRequestingCompleted(ze),void ne.clearScheduleTimer()}lt&&$t()}else be.isSeeking()||be.getTime()===0?(B.warn("Adjusting playback time ".concat(rt," because of gap in the manifest. Seeking by ").concat(rt-He)),be.seek(rt,!1,!1)):(B.warn("Adjusting buffering time ".concat(rt," because of gap in the manifest. Adjusting time by ").concat(rt-He)),On(rt),lt&&$t())}function yt(){var lt,rt=xn();if(isNaN(He)||et()===y.Z.TEXT&&!Ne.isTextEnabled())return null;if(me){var Kt=fe&&rt?fe.getRepresentationForQuality(rt.quality):null;lt=we?me.getSegmentRequestForTime(ee,Kt,He):Ee?me.repeatSegmentRequest(ee,Kt):me.getNextSegmentRequest(ee,Kt)}return lt}function $t(){ne.startScheduleTimer(be.getLowLatencyModeEnabled()?Me.get().streaming.scheduling.lowLatencyTimeout:Me.get().streaming.scheduling.defaultTimeout)}function xt(lt){lt.error||H.getIsBufferingCompleted()||H.updateBufferTimestampOffset(lt.currentRepresentation)}function en(lt){pe.addBufferState(ke,lt.state,ne.getBufferTarget()),lt.state!==D.Z.BUFFER_EMPTY||be.isSeeking()||(B.info("Buffer is empty! Stalling!"),pe.pushPlayListTraceMetrics(new Date,tt.REBUFFERING_REASON))}function Jt(lt){Q.syncExecutedRequestsWithBufferedRange(H.getBuffer().getAllBufferRanges(),_e.duration),lt.quotaExceeded&&lt.from>be.getTime()&&On(lt.from),lt.hasEnoughSpaceToAppend&&lt.quotaExceeded&&ne.startScheduleTimer()}function Wt(lt){if(lt&&lt.lastRequestAppended&&lt.lastRequestAppended.url){var rt=lt.lastRequestAppended.url;lt.lastRequestAppended.range&&(rt=rt.concat("_",lt.lastRequestAppended.range)),B.warn("Blacklisting segment with url ".concat(rt)),dt.add(rt)}}function Dn(lt){if(B.debug("Appended bytes for ".concat(lt.mediaType," and stream id ").concat(lt.streamId)),lt.segmentType===nt.w.INIT_SEGMENT_TYPE){var rt=lt.quality;ne.setLastInitializedQuality(rt),B.info("["+ke+"] lastInitializedRepresentationInfo changed to "+lt.quality)}Oe?Nn(Oe):ne.startScheduleTimer(0)}function Nn(lt){var rt=Q.getRequests({state:X.FRAGMENT_MODEL_LOADING});if(rt&&rt.length>0)return B.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(Oe=lt);H.updateBufferTimestampOffset(lt).then(function(){ne.setCheckPlaybackQuality(!1),ee.segmentAlignment||ee.subSegmentAlignment?ne.startScheduleTimer():En(),Oe=null,ie=!1}).catch(function(){Oe=null,ie=!1})}function rr(lt){B.info("onFragmentLoadingAbandoned request: "+lt.request.url+" has been aborted"),be.isSeeking()||ne.getSwitchTrack()||ie||(B.info("onFragmentLoadingAbandoned request: "+lt.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),lt.request&&lt.request.isInitializationRequest()?ne.setInitSegmentRequired(!0):On(lt.request.startTime+lt.request.duration/2),ne.startScheduleTimer(0))}function ir(lt){B.info("OnFragmentLoadingCompleted for stream id "+_e.id+" and media type "+ke+" - Url:",lt.request?lt.request.url:"undefined",lt.request.range?", Range:"+lt.request.range:""),ht()&&ne.startScheduleTimer(0),lt.error&&lt.request.serviceLocation&&function(rt){B.info("Fragment loading completed with an error"),rt&&rt.request&&rt.request.type&&(rt.request.type===nt.w.INIT_SEGMENT_TYPE?kt({representationId:rt.request.representationId,sender:{}},!1):rt.request.type===nt.w.MEDIA_SEGMENT_TYPE&&(On(rt.request.startTime+rt.request.duration/2),Ut({},!1)))}(lt)}function It(){On(be.getTime()),Pn().startScheduleTimer()}function Xt(lt){var rt=lt.currentTrackInfo;if(rt){var Kt=J.find(function(ze){return ze.index===rt.index&&ze.lang===rt.lang});Kt&&vn(Kt).then(function(){H.setIsBufferingCompleted(!1),On(be.getTime()),ne.setInitSegmentRequired(!0),ne.startScheduleTimer()})}}function Gt(lt){On(lt.quotaExceededTime),ne.clearScheduleTimer()}function un(){return H?H.getBuffer():null}function vn(lt){lt===ee||lt&&ee&&lt.type!==ee.type||(ee=lt);var rt=le.getRealAdaptation(_e,ee),Kt=le.getVoRepresentations(ee);if(fe){var ze,Ve=fe.getData(),Dt=Pe.getMaxAllowedIndexFor(ke,_e.id),fn=Pe.getMinAllowedIndexFor(ke,_e.id),Tn=null;return Ve!==null&&Ve.id===rt.id||ke===y.Z.TEXT?ze=Pe.getQualityFor(ke,_e.id):(Tn=Pe.getThroughputHistory().getAverageThroughput(ke,V)||Pe.getInitialBitrateFor(ke,_e.id),ze=Pe.getQualityForBitrate(ee,Tn,_e.id)),fn!==void 0&&ze<fn&&(ze=fn),ze>Dt&&(ze=Dt),fe.updateData(rt,Kt,ke,ee.isFragmented,ze)}return Promise.resolve()}function Pn(){return ne}function xn(lt){var rt;return lt!==void 0?((0,ye.SE)(lt),rt=fe?fe.getRepresentationForQuality(lt):null):rt=fe?fe.getCurrentRepresentation():null,le.convertRepresentationToRepresentationInfo(rt)}function Fn(){return!!H&&H.getIsBufferingCompleted()}function Gn(lt){if(Me.get().streaming.enableManifestTimescaleMismatchFix){var rt=lt.chunk,Kt=rt.bytes,ze=xn(rt.quality),Ve=fe&&ze?fe.getRepresentationForQuality(ze.quality):null;ze&&Ve&&(Ve.timescale=Xe.getMediaTimescaleFromMoov(Kt))}}function bt(lt){var rt=lt.chunk,Kt=rt.bytes,ze=rt.quality,Ve=xn(ze),Dt=fe&&Ve?fe.getRepresentationForQuality(Ve.quality):null;if(Ve&&Dt){var fn;if(Me.get().streaming.parseInbandPrft&&lt.request.type===nt.w.MEDIA_SEGMENT_TYPE){var Tn=function(io,Zi){var Bs=io.getBoxes("prft"),Qu=[];return Bs.forEach(function(Ju){Qu.push(function(Xa,js){var Po="unknown";switch(Xa.flags){case 0:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var yu=1e3*Xa.ntp_timestamp_sec+Xa.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:Po,ntpTimestamp:yu=Tt(Ze).getInstance().ntpToUTC(yu),mediaTime:Xa.media_time/js}}(Ju,Zi))}),Qu}(fn=fn||Xe.parse(Kt),Dt.timescale);Tn&&Tn.length&&$e.trigger(_.Z.INBAND_PRFT,{data:Tn},{streamId:_e.id,mediaType:ke})}var sr=le.getEventsFor(Ve.mediaInfo,null,_e),Zr=le.getEventsFor(Ve,Dt,_e);if(sr&&sr.length>0||Zr&&Zr.length>0){var Ii=Q.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,quality:ze,index:rt.index})[0],zr=function(io,Zi,Bs,Qu){try{for(var Ju={},Xa=[],js=Bs.concat(Qu),Po=0,yu=js.length;Po<yu;Po++)Ju[js[Po].schemeIdUri+"/"+js[Po].value]=js[Po];var Eu=io.getBoxes("emsg");if(!Eu||Eu.length===0)return Xa;for(var ca=io.getBox("sidx"),jc=!ca||isNaN(ca.earliest_presentation_time)||isNaN(ca.timescale)?Zi&&!isNaN(Zi.mediaStartTime)?Zi.mediaStartTime:0:ca.earliest_presentation_time/ca.timescale,Qf=Math.max(jc,0),el=fe.getCurrentRepresentation(),Qa=0,Zc=Eu.length;Qa<Zc;Qa++){var Zs=le.getEvent(Eu[Qa],Ju,Qf,el);Zs&&Xa.push(Zs)}return Xa}catch(Pt){return[]}}(fn=fn||Xe.parse(Kt),Ii,sr,Zr);$e.trigger(T.Z.INBAND_EVENTS,{events:zr},{streamId:_e.id})}}}function Sn(){var lt=be.getTime();Me.get().streaming.buffer.flushBufferAtTrackSwitch&&be.seek(lt+.001,!1,!0),On(lt),H.setSeekTarget(lt),ne.startScheduleTimer()}function En(){var lt=be.getTime(),rt=H.getContinuousBufferTimeForTargetTime(lt);On(isNaN(rt)?lt:rt),ne.startScheduleTimer()}function Lt(lt){lt&&!isNaN(lt.time)&&(On(lt.time),H.setSeekTarget(lt.time))}function On(lt){He=lt,we=!0}return P={initialize:function(lt,rt,Kt){ge=(0,ft.Z)(Ze).create({events:T.Z,eventBus:$e,streamInfo:_e,timelineConverter:Z,dashConstants:v.Z,segmentBaseController:L.segmentBaseController,type:ke}),me=(0,he.Z)(Ze).create({streamInfo:_e,type:ke,timelineConverter:Z,dashMetrics:pe,mediaPlayerModel:se,baseURLController:L.baseURLController,errHandler:Ae,segmentsController:ge,settings:Me,boxParser:Xe,events:T.Z,eventBus:$e,errors:Te,debug:(0,x.Z)(Ze).getInstance(),requestModifier:(0,Ke.Z)(Ze).getInstance(),dashConstants:v.Z,constants:y.Z,urlUtils:(0,wt.Z)(Ze).getInstance()}),V=_e.manifestInfo.isDynamic,me.initialize(V),Pe.registerStreamType(ke,P),fe=K(Ze).create({streamInfo:_e,type:ke,abrController:Pe,dashMetrics:pe,playbackController:be,timelineConverter:Z,dashConstants:v.Z,events:T.Z,eventBus:$e,errors:Te,isDynamic:V,adapter:le,segmentsController:ge}),H=function(ze,Ve){return ze?ze!==y.Z.TEXT||Ve?gt(Ze).create({streamInfo:_e,type:ze,mediaPlayerModel:se,manifestModel:ae,fragmentModel:Q,errHandler:Ae,mediaController:Fe,representationController:fe,adapter:le,textController:Ne,abrController:Pe,playbackController:be,settings:Me}):re(Ze).create({streamInfo:_e,type:ze,mimeType:Ge,fragmentModel:Q,textController:Ne,errHandler:Ae,settings:Me}):(Ae.error(new ce.Z(Te.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Te.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(ke,Kt),H&&H.initialize(lt),(ne=O(Ze).create({streamInfo:_e,type:ke,mimeType:Ge,adapter:le,dashMetrics:pe,mediaPlayerModel:se,fragmentModel:Q,abrController:Pe,playbackController:be,textController:Ne,mediaController:Fe,bufferController:H,representationController:fe,settings:Me})).initialize(rt),He=0,we=!1,Ee=!1},getStreamId:ut,getType:et,isUpdating:function(){return!!fe&&fe.isUpdating()},getBufferController:function(){return H},dischargePreBuffer:function(){H.dischargePreBuffer()},getFragmentModel:function(){return Q},getScheduleController:Pn,getRepresentationController:function(){return fe},getRepresentationInfo:xn,getBufferLevel:function(){return H?H.getBufferLevel():0},isBufferingCompleted:Fn,createBufferSinks:function(lt){var rt=un();return rt?Promise.resolve(rt):H?H.createBufferSink(ee,lt):Promise.resolve(null)},updateStreamInfo:function(lt){return _e=lt,Fn()?Promise.resolve():H.updateAppendWindow()},getStreamInfo:function(){return _e},selectMediaInfo:vn,clearMediaInfoArray:function(){J=[]},addMediaInfo:function(lt){J.indexOf(lt)===-1&&J.push(lt)},prepareTrackSwitch:function(){return new Promise(function(lt){B.debug("Preparing track switch for type ".concat(ke));var rt=ke===y.Z.TEXT||Me.get().streaming.trackSwitchMode[ke]===y.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&be.getTimeToStreamEnd(_e)>Me.get().streaming.buffer.stallThreshold;if(H.getIsBufferingCompleted()&&!rt)return H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){$e.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:_e.id,mediaType:ke})}).catch(function(){$e.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:_e.id,mediaType:ke})}),void lt();ne.clearScheduleTimer(),ne.setSwitchTrack(!0),rt?($e.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ke,streamId:_e.id},{mediaType:ke,streamId:_e.id}),Q.abortRequests(),H.prepareForReplacementTrackSwitch(ee.codec).then(function(){var Kt=xn();return H.updateBufferTimestampOffset(Kt)}).then(function(){Sn(),lt()}).catch(function(){Sn(),lt()})):H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){En(),lt()}).catch(function(){En(),lt()})})},prepareQualityChange:function(lt){Oe&&B.warn("Canceling queued representation switch to ".concat(Oe.quality," for ").concat(ke)),B.debug("Preparing quality switch for type ".concat(ke));var rt=lt.newQuality;ie=!0,ne.clearScheduleTimer(),fe.prepareQualityChange(rt);var Kt=xn(rt);lt.reason&&lt.reason.forceReplace?function(ze){Q.abortRequests(),$e.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ke,streamId:_e.id},{mediaType:ke,streamId:_e.id}),ne.setCheckPlaybackQuality(!1),H.prepareForForceReplacementQualitySwitch(ze).then(function(){Sn(),Oe=null,ie=!1}).catch(function(){Sn(),Oe=null,ie=!1})}(Kt):lt&&lt.reason&&lt.reason.forceAbandon?function(ze){H.updateBufferTimestampOffset(ze).then(function(){Q.abortRequests(),Ee=!0,ne.setCheckPlaybackQuality(!1),ne.startScheduleTimer(),ie=!1,Oe=null}).catch(function(){Oe=null,ie=!1})}(Kt):Me.get().streaming.buffer.fastSwitchEnabled?function(ze){var Ve=be.getTime(),Dt=1.5*(isNaN(ze.fragmentDuration)?1:ze.fragmentDuration),fn=Q.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ve+Dt,threshold:0})[0];if(fn&&!ht()){var Tn=H.getBufferLevel(),sr=Pe.getAbandonmentStateFor(_e.id,ke);fn.quality<ze.quality&&Tn>=Dt&&sr!==D.Z.ABANDON_LOAD?H.updateBufferTimestampOffset(ze).then(function(){Q.abortRequests(),On(Ve+Dt),ne.setCheckPlaybackQuality(!1),ne.startScheduleTimer(),ie=!1}).catch(function(){ie=!1}):Nn(ze)}else Nn(ze)}(Kt):Nn(Kt),pe.pushPlayListTraceMetrics(new Date,tt.REPRESENTATION_SWITCH_STOP_REASON),pe.createPlaylistTraceMetrics(Kt.id,1e3*be.getTime(),be.getPlaybackRate())},getMediaInfo:function(){return ee},getMediaSource:function(){return H.getMediaSource()},setMediaSource:function(lt){return H.setMediaSource(lt,ee)},getBuffer:un,setExplicitBufferingTime:On,finalisePlayList:function(lt,rt){pe.pushPlayListTraceMetrics(lt,rt)},probeNextRequest:function(){var lt=xn(),rt=fe&&lt?fe.getRepresentationForQuality(lt.quality):null;return me.getNextSegmentRequestIdempotent(ee,rt)},prepareInnerPeriodPlaybackSeeking:function(lt){return new Promise(function(rt){if(H.hasBufferAtTime(lt.seekTime))return H.pruneBuffer(),Ht(H.getContinuousBufferTimeForTargetTime(lt.seekTime))&&H.setIsBufferingCompleted(!0),void rt();ne.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){var Kt=H.getAllRangesWithSafetyFactor(lt.seekTime);return H.clearBuffers(Kt)}).then(function(){var Kt=H.getContinuousBufferTimeForTargetTime(lt.seekTime);if(Ht(Kt))H.setIsBufferingCompleted(!0),rt();else{var ze=isNaN(Kt)?lt.seekTime:Kt;On(ze),H.setSeekTarget(ze);var Ve=[];Ve.push(H.updateAppendWindow());var Dt=xn();Ve.push(H.updateBufferTimestampOffset(Dt)),Promise.all(Ve).then(function(){ne.setInitSegmentRequired(!0),ne.setCheckPlaybackQuality(!1),ne.startScheduleTimer(),rt()})}}).catch(function(Kt){B.error(Kt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(lt,rt){try{ne.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){return H.pruneAllSafely()}).then(function(){lt()})}catch(Kt){rt(Kt)}})},reset:function(lt,rt){me&&me.reset(),H&&(H.reset(lt,rt),H=null),ne&&(ne.reset(),ne=null),fe&&(fe.reset(),fe=null),ge&&(ge=null),Pe&&Pe.unRegisterStreamType(ut(),ke),$e.off(T.Z.DATA_UPDATE_COMPLETED,xt,P),$e.off(T.Z.INIT_FRAGMENT_NEEDED,kt,P),$e.off(T.Z.MEDIA_FRAGMENT_NEEDED,Ut,P),$e.off(T.Z.INIT_FRAGMENT_LOADED,Gn,P),$e.off(T.Z.MEDIA_FRAGMENT_LOADED,bt,P),$e.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),$e.off(T.Z.BUFFER_CLEARED,Jt,P),$e.off(T.Z.SEEK_TARGET,Lt,P),$e.off(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),$e.off(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),$e.off(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,It,P),$e.off(T.Z.SET_NON_FRAGMENTED_TEXT,Xt,P),$e.off(T.Z.QUOTA_EXCEEDED,Gt,P),$e.off(T.Z.SOURCE_BUFFER_ERROR,Wt,P),$e.off(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),jt(),ke=null,_e=null}},B=(0,x.Z)(Ze).getInstance().getLogger(P),jt(),$e.on(T.Z.DATA_UPDATE_COMPLETED,xt,P,{priority:m.Z.EVENT_PRIORITY_HIGH}),$e.on(T.Z.INIT_FRAGMENT_NEEDED,kt,P),$e.on(T.Z.MEDIA_FRAGMENT_NEEDED,Ut,P),$e.on(T.Z.INIT_FRAGMENT_LOADED,Gn,P),$e.on(T.Z.MEDIA_FRAGMENT_LOADED,bt,P),$e.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),$e.on(T.Z.BUFFER_CLEARED,Jt,P),$e.on(T.Z.SEEK_TARGET,Lt,P),$e.on(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),$e.on(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),$e.on(T.Z.QUOTA_EXCEEDED,Gt,P),$e.on(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,It,P),$e.on(T.Z.SET_NON_FRAGMENTED_TEXT,Xt,P),$e.on(T.Z.SOURCE_BUFFER_ERROR,Wt,P),$e.on(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),P}Ct.__dashjs_factory_name="StreamProcessor";var hn=U.Z.getClassFactory(Ct),Qt=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},nn=w(9032);function Ot(L,P){if(L){if(typeof L=="string")return Un(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Un(L,P):void 0}}function Un(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function gr(L){L=L||{};var P,B,V=this.context,ee=L.requestModifier,J=L.lowLatencyThroughputModel,H=L.boxParser,ne=(0,je.Z)(V).getInstance();function fe(ie){var me,ge=new Date,He=ie.request,Oe=new Headers;if(He.range&&Oe.append("Range","bytes="+He.range),ie.headers)for(var Ze in ie.headers){var $e=ie.headers[Ze];$e&&Oe.append(Ze,$e)}He.requestStartDate||(He.requestStartDate=ge),ee&&ee.modifyRequestHeader&&ee.modifyRequestHeader({setRequestHeader:function(Z,le){Oe.append(Z,le)}},{url:ie.url}),typeof window.AbortController=="function"&&(me=new AbortController,ie.abortController=me,me.signal.onabort=ie.onabort);var _e={method:ie.method,headers:Oe,credentials:ie.withCredentials?"include":void 0,signal:me?me.signal:void 0},ke=ne.get().streaming.abr.fetchThroughputCalculationMode,Ae=Date.now(),Ge=0;new Promise(function(Z){if(ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J&&(Ge=J.getThroughputCapacityDelayMS(He,1e3*B.getCurrentBufferLevel(He.mediaType))))return setTimeout(Z,Ge);Z()}).then(function(){var Z=Date.now();fetch(ie.url,_e).then(function(le){ie.response||(ie.response={}),ie.response.status=le.status,ie.response.statusText=le.statusText,ie.response.responseURL=le.url,le.ok||ie.onerror();var ae,se="",Q=function(xt,en){var Jt;if(typeof Symbol>"u"||xt[Symbol.iterator]==null){if(Array.isArray(xt)||(Jt=Ot(xt))){Jt&&(xt=Jt);var Wt=0,Dn=function(){};return{s:Dn,n:function(){return Wt>=xt.length?{done:!0}:{done:!1,value:xt[Wt++]}},e:function(It){throw It},f:Dn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Nn,rr=!0,ir=!1;return{s:function(){Jt=xt[Symbol.iterator]()},n:function(){var It=Jt.next();return rr=It.done,It},e:function(It){ir=!0,Nn=It},f:function(){try{rr||Jt.return==null||Jt.return()}finally{if(ir)throw Nn}}}}(le.headers.keys());try{for(Q.s();!(ae=Q.n()).done;){var Pe=ae.value;se+=Pe+": "+le.headers.get(Pe)+"\r\n"}}catch(xt){Q.e(xt)}finally{Q.f()}if(ie.response.responseHeaders=se,!le.body)return le.arrayBuffer().then(function(xt){ie.response.response=xt;var en={loaded:xt.byteLength,total:xt.byteLength,stream:!1};ie.progress(en),ie.onload(),ie.onend()});var be,Fe,Ne,pe,Me=parseInt(le.headers.get("Content-Length"),10),Xe=0,dt=!1,ut=new Uint8Array,et=0;if(ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J){var ht=Z,jt=0,Ht=(Ne=le.body.tee(),pe=2,function(xt){if(Array.isArray(xt))return xt}(Ne)||function(xt,en){if(typeof Symbol<"u"&&Symbol.iterator in Object(xt)){var Jt=[],Wt=!0,Dn=!1,Nn=void 0;try{for(var rr,ir=xt[Symbol.iterator]();!(Wt=(rr=ir.next()).done)&&(Jt.push(rr.value),!en||Jt.length!==en);Wt=!0);}catch(It){Dn=!0,Nn=It}finally{try{Wt||ir.return==null||ir.return()}finally{if(Dn)throw Nn}}return Jt}}(Ne,pe)||Ot(Ne,pe)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),kt=Ht[0],Ut=Ht[1];be=kt.getReader(),Fe=[],be.read().then(function xt(en){var Jt=en.value,Wt=en.done;if(jt=Date.now(),Jt&&Jt.length){var Dn=jt-ht,Nn=Jt.length;Fe.push({chunkDownloadTimeRelativeMS:jt-Z,chunkDownloadDurationMS:Dn,chunkBytes:Nn,kbps:Math.round(8*Nn/(Dn/1e3)),bufferLevel:B.getCurrentBufferLevel(He.mediaType)})}if(Wt){var rr=jt-Z,ir=Fe.reduce(function(It,Xt){return It+Xt.chunkBytes},0);return J.addMeasurement(He,rr,Fe,Ae,Ge,se),void ie.progress({loaded:ir,total:ir,lengthComputable:!0,time:J.getEstimatedDownloadDurationMS(He),stream:!0})}return ht=Date.now(),be.read().then(xt)}),ie.reader=Ut.getReader()}else ie.reader=le.body.getReader();var An=[],ot=[],yt=[],$t=!0;we(ie,function xt(en){var Jt=en.value;if(en.done){if(ut){if(ke!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Wt=null,Dn=null;ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Wt=function(It,Xt){try{var Gt,un;Gt=It.filter(function(Sn,En){return En<It.length-1}),un=Xt.filter(function(Sn,En){return En<Xt.length-1});var vn=[];if(Gt.length>1){for(var Pn=0,xn=0,Fn=0;Fn<Gt.length;Fn++)if(Gt[Fn]&&un[Fn]){var Gn=un[Fn].ts-Gt[Fn].ts;if(Gn>1)vn.push(8*un[Fn].bytes/Gn),xn=0;else{xn===0&&(xn=Gt[Fn].ts,Pn=0);var bt=un[Fn].ts-xn;bt>1?(Pn+=un[Fn].bytes,vn.push(8*Pn/bt),xn=0):Pn+=un[Fn].bytes}}if(vn.length>0)return vn.reduce(function(Sn,En){return Sn+En},0)/vn.length}return null}catch(Sn){return null}}(ot,yt),Wt&&(Dn=8*Xe/Wt)):ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Dn=Ee(An,Xe)),ie.progress({loaded:Xe,total:isNaN(Me)?Xe:Me,lengthComputable:!0,time:Dn,stream:!0})}ie.response.response=ut.buffer}return ie.onload(),void ie.onend()}if(Jt&&Jt.length>0){ut=function(It,Xt){if(It.length===0)return Xt;var Gt=new Uint8Array(It.length+Xt.length);return Gt.set(It),Gt.set(Xt,It.length),Gt}(ut,Jt),Xe+=Jt.length,An.push({ts:Date.now(),bytes:Jt.length}),ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&$t&&H.findLastTopIsoBoxCompleted(["moof"],ut,et).found&&($t=!1,ot.push({ts:performance.now(),bytes:Jt.length}));var Nn=H.findLastTopIsoBoxCompleted(["moov","mdat"],ut,et);if(Nn.found){var rr,ir=Nn.lastCompletedOffset+Nn.size;ke!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||$t||($t=!0,yt.push({ts:performance.now(),bytes:ut.length})),ir===ut.length?(rr=ut,ut=new Uint8Array):(rr=new Uint8Array(ut.subarray(0,ir)),ut=ut.subarray(ir)),ie.progress({data:rr.buffer,lengthComputable:!1,noTrace:!0}),et=0}else et=Nn.lastCompletedOffset,dt||(ie.progress({lengthComputable:!1,noTrace:!0}),dt=!0)}we(ie,xt)})}).catch(function(le){ie.onerror&&ie.onerror(le)})})}function we(ie,me){ie.reader.read().then(me).catch(function(ge){ie.onerror&&ie.response.status===200&&ie.onerror(ge)})}function Ee(ie,me){try{if((ie=ie.filter(function(Oe){return Oe.bytes>me/4/ie.length})).length>1){var ge=0,He=(ie[ie.length-1].ts-ie[0].ts)/ie.length;return ie.forEach(function(Oe,Ze){var $e=ie[Ze+1];if($e){var _e=$e.ts-Oe.ts;ge+=_e<He?_e:0}}),ge}return null}catch(Oe){return null}}return P={load:function(ie){ee&&ee.modifyRequest?(0,Ke.k)(ie,ee).then(function(){return fe(ie)}):fe(ie)},abort:function(ie){if(ie.abortController)ie.abortController.abort();else if(ie.reader)try{ie.reader.cancel(),ie.onabort()}catch(me){}},calculateDownloadedTime:Ee,setup:function(ie){B=ie.dashMetrics}},P}gr.__dashjs_factory_name="FetchLoader";var Or=U.Z.getClassFactory(gr),dr=w(1180);function ei(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Ji=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var P,B;return P=L,(B=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==v.Z.BASE_URL&&this.segmentInfoType!==v.Z.SEGMENT_BASE&&!this.indexRange}}])&&ei(P.prototype,B),L}(),Lr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.period=null,this.index=-1,this.type=null},eo=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};eo.DEFAULT_ID="defaultId";var Ti=eo,Di=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},zi=w(2610),to=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},Si=function L(P,B,V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||P||"",this.dvbPriority=V||1,this.dvbWeight=ee||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};Si.DEFAULT_DVB_PRIORITY=1,Si.DEFAULT_DVB_WEIGHT=1;var Qn=Si,Pu=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},tn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},sn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function an(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var At=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.schemeIdUri=null,this.value=null,this.id=null}var P,B;return P=L,(B=[{key:"init",value:function(V){return V&&(this.schemeIdUri=V.schemeIdUri?V.schemeIdUri:null,this.value=V.value?V.value:null,this.id=V.id?V.id:null,V[v.Z.DVB_URL]&&(this.dvbUrl=V[v.Z.DVB_URL]),V[v.Z.DVB_MIMETYPE]&&(this.dvbMimeType=V[v.Z.DVB_MIMETYPE]),V[v.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=V[v.Z.DVB_FONTFAMILY])),this}}])&&an(P.prototype,B),L}(),Yt=w(3101),Mt=w.n(Yt);function zt(){return{areEqual:function(L,P){return Mt()(L,P)}}}zt.__dashjs_factory_name="ObjectUtils";var mn=U.Z.getSingletonFactory(zt),In=w(7803),Zn=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.queryParams={}},Cn=function L(P,B,V){(function(ee,J){if(!(ee instanceof J))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.ttl=V||NaN,this.queryParams={}};function Rn(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function on(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?Rn(Object(B),!0).forEach(function(V){Bn(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):Rn(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function Bn(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function kn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=er(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(fe){throw fe},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,ne=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var fe=B.next();return H=fe.done,fe},e:function(fe){ne=!0,J=fe},f:function(){try{H||B.return==null||B.return()}finally{if(ne)throw J}}}}function er(L,P){if(L){if(typeof L=="string")return Er(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Er(L,P):void 0}}function Er(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Ur(){var L,P,B,V,ee=this.context,J=(0,wt.Z)(ee).getInstance(),H=Number.isInteger||function(Z){return typeof Z=="number"&&isFinite(Z)&&Math.floor(Z)===Z};function ne(Z,le){if(!Z)throw new Error("adaptation is not defined");if(!le)throw new Error("type is not defined");if(Z.Representation_asArray&&Z.Representation_asArray.length){var ae=Ze(Z.Representation_asArray[0]);if(ae&&ae.length>0&&In.Y.indexOf(ae[0].schemeIdUri)>=0)return le===y.Z.IMAGE}if(Z.ContentComponent_asArray&&Z.ContentComponent_asArray.length>0){if(Z.ContentComponent_asArray.length>1)return le===y.Z.MUXED;if(Z.ContentComponent_asArray[0].contentType===le)return!0}var se=le===y.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(le);if(Z.Representation_asArray&&Z.Representation_asArray.length){var Q=Z.Representation_asArray[0].codecs;if(se.test(Q))return!0}if(Z.hasOwnProperty(v.Z.MIME_TYPE))return se.test(Z.mimeType);if(Z.Representation_asArray){for(var Pe,be=0;be<Z.Representation_asArray.length;be++)if((Pe=Z.Representation_asArray[be]).hasOwnProperty(v.Z.MIME_TYPE))return se.test(Pe.mimeType)}return!1}function fe(Z){if(!Z)throw new Error("adaptation is not defined");if(Z.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||Z.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||Z.hasOwnProperty(v.Z.SEGMENT_LIST)||Z.hasOwnProperty(v.Z.SEGMENT_BASE))return!0;if(Z.Representation_asArray&&Z.Representation_asArray.length>0){var le=Z.Representation_asArray[0];if(le.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||le.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||le.hasOwnProperty(v.Z.SEGMENT_LIST)||le.hasOwnProperty(v.Z.SEGMENT_BASE))return!0}return!1}function we(Z){return ne(Z,y.Z.VIDEO)}function Ee(Z){return ne(Z,y.Z.TEXT)}function ie(Z){return ne(Z,y.Z.IMAGE)}function me(Z){return Z&&Array.isArray(Z.Representation_asArray)&&Z.Representation_asArray.sort(function(le,ae){return le.bandwidth-ae.bandwidth}),Z}function ge(Z,le){return Z&&Z.Period_asArray&&H(le)&&Z.Period_asArray[le]?Z.Period_asArray[le].AdaptationSet_asArray:[]}function He(Z){return Z&&Z.Period_asArray?Z.Period_asArray:[]}function Oe(Z){var le=!1;return Z&&Z.hasOwnProperty("type")&&(le=Z.type===v.Z.DYNAMIC),le}function Ze(Z){return Z&&Z.EssentialProperty_asArray&&Z.EssentialProperty_asArray.length?Z.EssentialProperty_asArray.map(function(le){return{schemeIdUri:le.schemeIdUri,value:le.value}}):null}function $e(Z){if(!Z||!Z.S_asArray)return NaN;var le=Z.S_asArray[0],ae=Z.S_asArray[1];return le.hasOwnProperty("d")?le.d:ae.t-le.t}function _e(Z,le){if(!Z)throw new Error("Period cannot be null or undefined");var ae=Ti.DEFAULT_ID+"_"+le;return Z.hasOwnProperty(v.Z.ID)&&Z.id.length>0&&Z.id!=="__proto__"&&(ae=Z.id),ae}function ke(Z,le,ae){var se,Q=[];if(!Z)return Q;for(se=0;se<Z.length;se++){var Pe=new Pu;if(Pe.timescale=1,Pe.representation=le,!Z[se].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Pe.schemeIdUri=Z[se].schemeIdUri,Z[se].hasOwnProperty(v.Z.TIMESCALE)&&(Pe.timescale=Z[se].timescale),Z[se].hasOwnProperty(v.Z.VALUE)&&(Pe.value=Z[se].value),Q.push(Pe),Pe.period=ae}return Q}function Ae(Z){var le=[],ae=Z.BaseURL_asArray||[Z.baseUri],se=!1;return ae.some(function(Q){if(Q){var Pe=new Qn,be=Q.__text||Q;return J.isRelative(be)&&(se=!0,Z.baseUri&&(be=J.resolve(be,Z.baseUri))),Pe.url=be,Q.hasOwnProperty(v.Z.SERVICE_LOCATION)&&Q.serviceLocation.length?Pe.serviceLocation=Q.serviceLocation:Pe.serviceLocation=be,Q.hasOwnProperty(v.Z.DVB_PRIORITY)&&(Pe.dvbPriority=Q[v.Z.DVB_PRIORITY]),Q.hasOwnProperty(v.Z.DVB_WEIGHT)&&(Pe.dvbWeight=Q[v.Z.DVB_WEIGHT]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)&&(Pe.availabilityTimeOffset=Q[v.Z.AVAILABILITY_TIME_OFFSET]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)&&(Pe.availabilityTimeComplete=Q[v.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),le.push(Pe),se}}),le}function Ge(Z){var le=new sn;return le.serverUrl=Z.__text,Z.hasOwnProperty(v.Z.DEFAULT_SERVICE_LOCATION)&&(le.defaultServiceLocation=Z[v.Z.DEFAULT_SERVICE_LOCATION],le.defaultServiceLocationArray=le.defaultServiceLocation.split(" ")),Z.hasOwnProperty(v.Z.QUERY_BEFORE_START)&&(le.queryBeforeStart=Z[v.Z.QUERY_BEFORE_START].toLowerCase()==="true"),Z.hasOwnProperty(v.Z.CLIENT_REQUIREMENT)&&(le.clientRequirement=Z[v.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),le}return L={getIsTypeOf:ne,getIsText:Ee,getIsFragmented:fe,getProducerReferenceTimesForAdaptation:function(Z){var le=Z&&Z.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)?Z[v.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(Z&&Z.hasOwnProperty(v.Z.REPRESENTATION_ASARRAY)?Z[v.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(se){var Q;se.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)&&le.push.apply(le,function(Pe){if(Array.isArray(Pe))return Er(Pe)}(Q=se[v.Z.PRODUCERREFERENCETIME_ASARRAY])||function(Pe){if(typeof Symbol<"u"&&Symbol.iterator in Object(Pe))return Array.from(Pe)}(Q)||er(Q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var ae=[];return le.forEach(function(se){var Q=new tn;se.hasOwnProperty(v.Z.ID)&&(Q[v.Z.ID]=se[v.Z.ID],se.hasOwnProperty(v.Z.WALL_CLOCK_TIME)&&(Q[v.Z.WALL_CLOCK_TIME]=se[v.Z.WALL_CLOCK_TIME],se.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(Q[v.Z.PRESENTATION_TIME]=se[v.Z.PRESENTATION_TIME],se.hasOwnProperty(v.Z.INBAND)&&(Q[v.Z.INBAND]=se[v.Z.INBAND]!=="false"),se.hasOwnProperty(v.Z.TYPE)&&(Q[v.Z.TYPE]=se[v.Z.TYPE]),ae.push(Q))))}),ae},getLanguageForAdaptation:function(Z){var le="";return Z&&Z.hasOwnProperty(v.Z.LANG)&&(le=Z.lang),le},getViewpointForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.VIEWPOINT_ASARRAY)&&Z[v.Z.VIEWPOINT_ASARRAY].length?Z[v.Z.VIEWPOINT_ASARRAY].map(function(le){return new At().init(le)}):[]},getRolesForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ROLE_ASARRAY)&&Z[v.Z.ROLE_ASARRAY].length?Z[v.Z.ROLE_ASARRAY].map(function(le){return new At().init(le)}):[]},getAccessibilityForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ACCESSIBILITY_ASARRAY)&&Z[v.Z.ACCESSIBILITY_ASARRAY].length?Z[v.Z.ACCESSIBILITY_ASARRAY].map(function(le){return new At().init(le)}):[]},getAudioChannelConfigurationForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new At().init(le)}):[]},getAudioChannelConfigurationForRepresentation:function(Z){return Z&&Z.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new At().init(le)}):[]},getAdaptationForIndex:function(Z,le,ae){var se=ge(le,ae);return se.length>0&&H(Z)?se[Z]:null},getIndexForAdaptation:function(Z,le,ae){if(!Z)return-1;for(var se=ge(le,ae),Q=0;Q<se.length;Q++)if(mn(ee).getInstance().areEqual(se[Q],Z))return Q;return-1},getAdaptationForId:function(Z,le,ae){var se,Q,Pe=ge(le,ae);for(se=0,Q=Pe.length;se<Q;se++)if(Pe[se].hasOwnProperty(v.Z.ID)&&Pe[se].id===Z)return Pe[se];return null},getAdaptationsForType:function(Z,le,ae){var se,Q,Pe=ge(Z,le),be=[];for(se=0,Q=Pe.length;se<Q;se++)ne(Pe[se],ae)&&be.push(me(Pe[se]));return be},getRealPeriods:He,getRealPeriodForIndex:function(Z,le){var ae=He(le);return ae.length>0&&H(Z)?ae[Z]:null},getCodec:function(Z,le,ae){var se=null;if(Z&&Z.Representation_asArray&&Z.Representation_asArray.length>0){var Q=H(le)&&le>=0&&le<Z.Representation_asArray.length?Z.Representation_asArray[le]:Z.Representation_asArray[0];Q&&(se=Q.mimeType+';codecs="'+Q.codecs+'"',ae&&Q.width!==void 0&&(se+=';width="'+Q.width+'";height="'+Q.height+'"'))}return se&&(se=se.replace(/\sprofiles=[^;]*/g,"")),se},getSelectionPriority:function(Z){try{var le=Z&&Z.selectionPriority!==void 0?parseInt(Z.selectionPriority):1;return isNaN(le)?1:le}catch(ae){return 1}},getMimeType:function(Z){return Z&&Z.Representation_asArray&&Z.Representation_asArray.length>0?Z.Representation_asArray[0].mimeType:null},getKID:function(Z){return Z&&Z.hasOwnProperty(v.Z.CENC_DEFAULT_KID)?Z[v.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(Z){if(!Z||!Array.isArray(Z.Label_asArray))return[];for(var le=[],ae=0;ae<Z.Label_asArray.length;ae++)le.push({lang:Z.Label_asArray[ae].lang,text:Z.Label_asArray[ae].__text||Z.Label_asArray[ae]});return le},getContentProtectionData:function(Z){return Z&&Z.hasOwnProperty(v.Z.CONTENTPROTECTION_ASARRAY)&&Z.ContentProtection_asArray.length!==0?Z.ContentProtection_asArray:null},getIsDynamic:Oe,getId:function(Z){return Z&&Z[v.Z.ID]||null},hasProfile:function(Z,le){var ae=!1;return Z&&Z.profiles&&Z.profiles.length>0&&(ae=Z.profiles.indexOf(le)!==-1),ae},getDuration:function(Z){return Z&&Z.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)?Z.mediaPresentationDuration:Z&&Z.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(Z){return Z&&Z.bandwidth?Z.bandwidth:NaN},getManifestUpdatePeriod:function(Z){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ae=NaN;return Z&&Z.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(ae=Z.minimumUpdatePeriod),isNaN(ae)?ae:Math.max(ae-le,1)},getPublishTime:function(Z){return Z&&Z.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(Z[v.Z.PUBLISH_TIME]):null},getRepresentationCount:function(Z){return Z&&Array.isArray(Z.Representation_asArray)?Z.Representation_asArray.length:0},getBitrateListForAdaptation:function(Z){var le=me(Z);return(le&&Array.isArray(le.Representation_asArray)?le.Representation_asArray:[]).map(function(ae){return{bandwidth:ae.bandwidth,width:ae.width||0,height:ae.height||0,scanType:ae.scanType||null,id:ae.id||null}})},getRepresentationFor:function(Z,le){return le&&le.Representation_asArray&&le.Representation_asArray.length>0&&H(Z)?le.Representation_asArray[Z]:null},getRepresentationsForAdaptation:function(Z){var le,ae,se,Q,Pe=[],be=function(ut){if(ut&&ut.period&&H(ut.period.index)){var et=ut.period.mpd.manifest.Period_asArray[ut.period.index];if(et&&et.AdaptationSet_asArray&&H(ut.index))return me(et.AdaptationSet_asArray[ut.index])}}(Z);if(be&&be.Representation_asArray){if(Z&&Z.period&&H(Z.period.index)){var Fe=Ae(Z.period.mpd.manifest);Fe&&(ae=Fe[0])}for(var Ne=0,pe=be.Representation_asArray.length;Ne<pe;++Ne){var Me=be.Representation_asArray[Ne],Xe=new Ji;if(Xe.index=Ne,Xe.adaptation=Z,Me.hasOwnProperty(v.Z.ID)&&(Xe.id=Me.id),Me.hasOwnProperty(v.Z.CODECS)&&(Xe.codecs=Me.codecs),Me.hasOwnProperty(v.Z.MIME_TYPE)&&(Xe.mimeType=Me[v.Z.MIME_TYPE]),Me.hasOwnProperty(v.Z.CODEC_PRIVATE_DATA)&&(Xe.codecPrivateData=Me.codecPrivateData),Me.hasOwnProperty(v.Z.BANDWITH)&&(Xe.bandwidth=Me.bandwidth),Me.hasOwnProperty(v.Z.WIDTH)&&(Xe.width=Me.width),Me.hasOwnProperty(v.Z.HEIGHT)&&(Xe.height=Me.height),Me.hasOwnProperty(v.Z.SCAN_TYPE)&&(Xe.scanType=Me.scanType),Me.hasOwnProperty(v.Z.MAX_PLAYOUT_RATE)&&(Xe.maxPlayoutRate=Me.maxPlayoutRate),Me.hasOwnProperty(v.Z.SEGMENT_BASE)?(le=Me.SegmentBase,Xe.segmentInfoType=v.Z.SEGMENT_BASE):Me.hasOwnProperty(v.Z.SEGMENT_LIST)?(le=Me.SegmentList).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?Xe.segmentInfoType=v.Z.SEGMENT_TIMELINE:Xe.segmentInfoType=v.Z.SEGMENT_LIST:Me.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)?((le=Me.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?Xe.segmentInfoType=v.Z.SEGMENT_TIMELINE:Xe.segmentInfoType=v.Z.SEGMENT_TEMPLATE,le.hasOwnProperty(v.Z.INITIALIZATION_MINUS)&&(Xe.initialization=le.initialization.split("$Bandwidth$").join(Me.bandwidth).split("$RepresentationID$").join(Me.id))):Xe.segmentInfoType=v.Z.BASE_URL,Xe.essentialProperties=Ze(Me),le){if(le.hasOwnProperty(v.Z.INITIALIZATION)){var dt=le.Initialization;dt.hasOwnProperty(v.Z.SOURCE_URL)&&(Xe.initialization=dt.sourceURL),dt.hasOwnProperty(v.Z.RANGE)&&(Xe.range=dt.range)}else Ee(be)&&fe(be)&&be.mimeType&&be.mimeType.indexOf("application/mp4")===-1&&(Xe.range=0);le.hasOwnProperty(v.Z.TIMESCALE)&&(Xe.timescale=le.timescale),le.hasOwnProperty(v.Z.DURATION)?Xe.segmentDuration=le.duration/Xe.timescale:Me.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)&&(le=Me.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)&&(Xe.segmentDuration=$e(le.SegmentTimeline)/Xe.timescale),le.hasOwnProperty(v.Z.MEDIA)&&(Xe.media=le.media),le.hasOwnProperty(v.Z.START_NUMBER)&&(Xe.startNumber=le.startNumber),le.hasOwnProperty(v.Z.INDEX_RANGE)&&(Xe.indexRange=le.indexRange),le.hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(Xe.presentationTimeOffset=le.presentationTimeOffset/Xe.timescale),le.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)?Xe.availabilityTimeOffset=le.availabilityTimeOffset:ae&&ae.availabilityTimeOffset!==void 0&&(Xe.availabilityTimeOffset=ae.availabilityTimeOffset),le.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)?Xe.availabilityTimeComplete=le.availabilityTimeComplete!=="false":ae&&ae.availabilityTimeComplete!==void 0&&(Xe.availabilityTimeComplete=ae.availabilityTimeComplete)}Xe.MSETimeOffset=(Q=(se=Xe).presentationTimeOffset,se.adaptation.period.start-Q),Xe.path=[Z.period.index,Z.index,Ne],Pe.push(Xe)}}return Pe},getAdaptationsForPeriod:function(Z){var le,ae,se,Q=Z&&H(Z.index)?Z.mpd.manifest.Period_asArray[Z.index]:null,Pe=[];if(Q&&Q.AdaptationSet_asArray)for(se=0;se<Q.AdaptationSet_asArray.length;se++)ae=Q.AdaptationSet_asArray[se],le=new Lr,ae.hasOwnProperty(v.Z.ID)&&(le.id=ae.id),le.index=se,le.period=Z,ne(ae,y.Z.MUXED)?le.type=y.Z.MUXED:ne(ae,y.Z.AUDIO)?le.type=y.Z.AUDIO:we(ae)?le.type=y.Z.VIDEO:Ee(ae)?le.type=y.Z.TEXT:ie(ae)?le.type=y.Z.IMAGE:P.warn("Unknown Adaptation stream type"),Pe.push(le);return Pe},getRegularPeriods:function(Z){var le,ae,se=!!Z&&Oe(Z.manifest),Q=[],Pe=null,be=null,Fe=null,Ne=null;for(ae=0,le=Z&&Z.manifest&&Z.manifest.Period_asArray?Z.manifest.Period_asArray.length:0;ae<le;ae++)(be=Z.manifest.Period_asArray[ae]).hasOwnProperty(v.Z.START)?(Ne=new Ti).start=be.start:Pe!==null&&Pe.hasOwnProperty(v.Z.DURATION)&&Fe!==null?(Ne=new Ti).start=parseFloat((Fe.start+Fe.duration).toFixed(5)):ae!==0||se||((Ne=new Ti).start=0),Fe!==null&&isNaN(Fe.duration)&&(Ne!==null?Fe.duration=parseFloat((Ne.start-Fe.start).toFixed(5)):P.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Ne!==null&&(Ne.id=_e(be,ae),Ne.index=ae,Ne.mpd=Z,be.hasOwnProperty(v.Z.DURATION)&&(Ne.duration=be.duration),Fe&&(Fe.nextPeriodId=Ne.id),Q.push(Ne),Pe=be,Fe=Ne),be=null,Ne=null;return Q.length===0||Fe!==null&&isNaN(Fe.duration)&&(Fe.duration=parseFloat((function(pe){(function(){if(!B||!B.hasOwnProperty("error"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var Me,Xe=Oe(pe.mpd.manifest);return pe.mpd.manifest.mediaPresentationDuration?Me=pe.mpd.manifest.mediaPresentationDuration:pe.duration?Me=pe.duration:Xe?Me=Number.POSITIVE_INFINITY:B.error(new ce.Z(Te.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",pe)),Me}(Fe)-Fe.start).toFixed(5))),Q},getMpd:function(Z){var le=new Di;return Z&&(le.manifest=Z,Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)?le.availabilityStartTime=new Date(Z.availabilityStartTime.getTime()):Z.loadedTime&&(le.availabilityStartTime=new Date(Z.loadedTime.getTime())),Z.hasOwnProperty(v.Z.AVAILABILITY_END_TIME)&&(le.availabilityEndTime=new Date(Z.availabilityEndTime.getTime())),Z.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(le.minimumUpdatePeriod=Z.minimumUpdatePeriod),Z.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)&&(le.mediaPresentationDuration=Z.mediaPresentationDuration),Z.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)&&(le.suggestedPresentationDelay=Z.suggestedPresentationDelay),Z.hasOwnProperty(v.Z.TIMESHIFT_BUFFER_DEPTH)&&(le.timeShiftBufferDepth=Z.timeShiftBufferDepth),Z.hasOwnProperty(v.Z.MAX_SEGMENT_DURATION)&&(le.maxSegmentDuration=Z.maxSegmentDuration),Z.hasOwnProperty(v.Z.PUBLISH_TIME)&&(le.publishTime=new Date(Z.publishTime))),le},getEventsForPeriod:function(Z){var le,ae,se=Z&&Z.mpd&&Z.mpd.manifest?Z.mpd.manifest:null,Q=se?se.Period_asArray:null,Pe=Q&&Z&&H(Z.index)?Q[Z.index].EventStream_asArray:null,be=[];if(Pe)for(le=0;le<Pe.length;le++){var Fe=new Pu;if(Fe.period=Z,Fe.timescale=1,!Pe[le].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(Fe.schemeIdUri=Pe[le][y.Z.SCHEME_ID_URI],Pe[le].hasOwnProperty(v.Z.TIMESCALE)&&(Fe.timescale=Pe[le][v.Z.TIMESCALE]),Pe[le].hasOwnProperty(v.Z.VALUE)&&(Fe.value=Pe[le][v.Z.VALUE]),Pe[le].hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(Fe.presentationTimeOffset=Pe[le][v.Z.PRESENTATION_TIME_OFFSET]),ae=0;Pe[le].Event_asArray&&ae<Pe[le].Event_asArray.length;ae++){var Ne=Pe[le].Event_asArray[ae],pe=new to;pe.presentationTime=0,pe.eventStream=Fe,Ne.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(pe.presentationTime=Ne.presentationTime);var Me=Fe.presentationTimeOffset?Fe.presentationTimeOffset/Fe.timescale:0;pe.calculatedPresentationTime=pe.presentationTime/Fe.timescale+Z.start-Me,Ne.hasOwnProperty(v.Z.DURATION)&&(pe.duration=Ne.duration/Fe.timescale),Ne.hasOwnProperty(v.Z.ID)?pe.id=Ne.id:pe.id=null,Ne.Signal&&Ne.Signal.Binary?pe.messageData=V.decodeArray(Ne.Signal.Binary.toString()):pe.messageData=Ne.messageData||Ne.__cdata||Ne.__text,be.push(pe)}}return be},getEssentialPropertiesForAdaptation:function(Z){var le={};if(Z&&Z.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)){var ae,se=kn(Z.EssentialProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(le[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Pe){se.e(Pe)}finally{se.f()}}return le},getEssentialPropertiesAsArrayForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)&&Z.EssentialProperty_asArray.length?Z.EssentialProperty_asArray.map(function(le){return new At().init(le)}):[]},getEssentialPropertiesForRepresentation:Ze,getEventStreamForAdaptationSet:function(Z,le,ae){var se,Q,Pe;return Z&&Z.Period_asArray&&le&&le.period&&H(le.period.index)&&(Q=Z.Period_asArray[le.period.index])&&Q.AdaptationSet_asArray&&H(le.index)&&(Pe=Q.AdaptationSet_asArray[le.index])&&(se=Pe.InbandEventStream_asArray),ke(se,null,ae)},getEventStreamForRepresentation:function(Z,le,ae){var se,Q,Pe,be;return Z&&Z.Period_asArray&&le&&le.adaptation&&le.adaptation.period&&H(le.adaptation.period.index)&&(Q=Z.Period_asArray[le.adaptation.period.index])&&Q.AdaptationSet_asArray&&H(le.adaptation.index)&&(Pe=Q.AdaptationSet_asArray[le.adaptation.index])&&Pe.Representation_asArray&&H(le.index)&&(be=Pe.Representation_asArray[le.index])&&(se=be.InbandEventStream_asArray),ke(se,le,ae)},getUTCTimingSources:function(Z){var le=Oe(Z),ae=!!Z&&Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME),se=Z?Z.UTCTiming_asArray:null,Q=[];return(le||ae)&&se&&se.forEach(function(Pe){var be=new zi.Z;Pe.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(be.schemeIdUri=Pe.schemeIdUri,Pe.hasOwnProperty(v.Z.VALUE)&&(be.value=Pe.value.toString(),Q.push(be)))}),Q},getBaseURLsFromElement:Ae,getRepresentationSortFunction:function(){return function(Z,le){return Z.bandwidth-le.bandwidth}},getContentSteering:function(Z){if(Z&&Z.hasOwnProperty(v.Z.CONTENT_STEERING_AS_ARRAY))return Ge(Z[v.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(Z){return Z&&Z.hasOwnProperty(v.Z.LOCATION_AS_ARRAY)?Z[v.Z.LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,se=le.hasOwnProperty(v.Z.SERVICE_LOCATION)?le[v.Z.SERVICE_LOCATION]:null;return new Zn(ae,se)}):[]},getPatchLocation:function(Z){return Z&&Z.hasOwnProperty(v.Z.PATCH_LOCATION_AS_ARRAY)?Z[v.Z.PATCH_LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,se=le.hasOwnProperty(v.Z.SERVICE_LOCATION)?le[v.Z.SERVICE_LOCATION]:null,Q=le.hasOwnProperty(v.Z.TTL)?1e3*parseFloat(le[v.Z.TTL]):NaN;return new Cn(ae,se,Q)}):[]},getSuggestedPresentationDelay:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)?Z.suggestedPresentationDelay:null},getAvailabilityStartTime:function(Z){return Z&&Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)&&Z.availabilityStartTime!==null?Z.availabilityStartTime.getTime():null},getServiceDescriptions:function(Z){var le=[];if(Z&&Z.hasOwnProperty(v.Z.SERVICE_DESCRIPTION)){var ae,se=kn(Z.ServiceDescription_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value,Pe=null,be=null,Fe=null,Ne=null,pe=null,Me=null,Xe=null;for(var dt in Q)Q.hasOwnProperty(dt)&&(dt===v.Z.ID?Pe=Q[dt]:dt===v.Z.SERVICE_DESCRIPTION_SCOPE?be=Q[dt].schemeIdUri:dt===v.Z.SERVICE_DESCRIPTION_LATENCY?Fe={target:parseInt(Q[dt].target),max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),referenceId:parseInt(Q[dt].referenceId)}:dt===v.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?Ne={max:parseFloat(Q[dt].max),min:parseFloat(Q[dt].min)}:dt===v.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?pe={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target),type:Q[dt].type,maxQualityDifference:parseInt(Q[dt].maxQualityDifference)}:dt===v.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?Me={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target)}:dt===v.Z.CONTENT_STEERING&&(Xe=Ge(Q[dt])));le.push({id:Pe,schemeIdUri:be,latency:Fe,playbackRate:Ne,operatingQuality:pe,operatingBandwidth:Me,contentSteering:Xe})}}catch(ut){se.e(ut)}finally{se.f()}}return le},getSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(v.Z.SEGMENT_ALIGNMENT))&&Z[v.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(v.Z.SUB_SEGMENT_ALIGNMENT))&&Z[v.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(Z){var le={};if(Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,se=kn(Z.SupplementalProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(le[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Pe){se.e(Pe)}finally{se.f()}}return le},getSupplementalPropertiesAsArrayForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&Z.SupplementalProperty_asArray.length?Z.SupplementalProperty_asArray.map(function(le){return new At().init(le)}):[]},getSupplementalPropertiesForRepresentation:function(Z){var le={};if(Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,se=kn(Z.SupplementalProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(le[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Pe){se.e(Pe)}finally{se.f()}}return le},getSupplementalPropertiesAsArrayForRepresentation:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&Z.SupplementalProperty_asArray.length?Z.SupplementalProperty_asArray.map(function(le){return new At().init(le)}):[]},setConfig:function(Z){Z&&(Z.errHandler&&(B=Z.errHandler),Z.BASE64&&(V=Z.BASE64))}},P=(0,x.Z)(ee).getInstance().getLogger(L),L}Ur.__dashjs_factory_name="DashManifestModel";var Vn=U.Z.getSingletonFactory(Ur),rn=w(703);function cn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=function(fe,we){if(fe){if(typeof fe=="string")return bn(fe,we);var Ee=Object.prototype.toString.call(fe).slice(8,-1);return Ee==="Object"&&fe.constructor&&(Ee=fe.constructor.name),Ee==="Map"||Ee==="Set"?Array.from(fe):Ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ee)?bn(fe,we):void 0}}(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(fe){throw fe},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,ne=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var fe=B.next();return H=fe.done,fe},e:function(fe){ne=!0,J=fe},f:function(){try{H||B.return==null||B.return()}finally{if(ne)throw J}}}}function bn(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Jn(){var L,P,B,V,ee,J,H,ne,fe,we,Ee=this.context,ie=(0,m.Z)(Ee).getInstance(),me=(0,je.Z)(Ee).getInstance();function ge(){B={pr:1,nor:null,st:null,sf:null,sid:"".concat(rn.Z.generateUuid()),cid:null},fe={},ne={},we={},Oe()}function He(){Oe()}function Oe(){if(J){var Q=J.getStreamController();if(Q&&typeof Q.getActiveStream=="function"){var Pe=Q.getActiveStream();Pe&&(H=Pe.getProcessors())}}}function Ze(Q,Pe){var be,Fe={},Ne=cn(Pe);try{for(Ne.s();!(be=Ne.n()).done;){var pe=be.value;Q[pe]&&(Fe[pe]=Q[pe])}}catch(Me){Ne.e(Me)}finally{Ne.f()}return Fe}function $e(Q){var Pe=me.get().streaming.cmcd.enabledKeys;return Q.filter(function(be){return Pe.includes(be)})}function _e(Q){try{return Q.type===nt.w.MPD_TYPE?((be=ke()).ot="m",be):Q.type===nt.w.MEDIA_SEGMENT_TYPE?(Pe=Q.mediaType,we.hasOwnProperty(Pe)||(we[Pe]=!1),ne.hasOwnProperty(Pe)||(ne[Pe]=!1),fe.hasOwnProperty(Pe)||(fe[Pe]=!1),function(Fe){var Ne,pe=ke(),Me=function(Ut){try{var An=Ut.quality,ot=Ut.mediaInfo.bitrateList;return parseInt(ot[An].bandwidth/1e3)}catch(yt){return null}}(Fe),Xe=function(Ut){try{return isNaN(Ut.duration)?NaN:Math.round(1e3*Ut.duration)}catch(An){return null}}(Fe),dt=function(Ut){try{return 100*parseInt(V.getThroughputHistory().getSafeAverageThroughput(Ut)/100)}catch(An){return null}}(Fe.mediaType),ut=function(Ut){try{var An=B.pr,ot=ee.getCurrentBufferLevel(Ut);return isNaN(An)||isNaN(ot)?null:100*parseInt(ot/An*10)}catch(yt){return null}}(Fe.mediaType),et=Ae(Fe.mediaType),ht=function(Ut){try{var An=V.getTopBitrateInfoFor(Ut);return Math.round(An.bitrate/1e3)}catch(ot){return null}}(Fe.mediaType),jt=B.pr,Ht=function(Ut){if(H&&H.length!==0){var An,ot=cn(H);try{for(ot.s();!(An=ot.n()).done;){var yt=An.value;if(yt.getType()===Ut)return yt.probeNextRequest()}}catch($t){ot.e($t)}finally{ot.f()}}}(Fe.mediaType);Fe.mediaType===y.Z.VIDEO&&(Ne="v"),Fe.mediaType===y.Z.AUDIO&&(Ne="a"),Fe.mediaType===y.Z.TEXT&&(Ne=Fe.mediaInfo.mimeType==="application/mp4"?"tt":"c");var kt=me.get().streaming.cmcd.rtp;return kt||(kt=function(Ut){try{var An=J.getPlaybackRate();An||(An=1);var ot=Ut.quality,yt=Ut.mediaType,$t=Ut.mediaInfo,xt=Ut.duration;if(!$t)return NaN;var en=Ae(yt);en===0&&(en=500);var Jt=$t.bitrateList[ot].bandwidth*xt/1e3/(en/An/1e3),Wt=me.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(me.get().streaming.cmcd.rtpSafetyFactor)?me.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Jt*Wt/100)+1)}catch(Dn){return NaN}}(Fe)),isNaN(kt)||(pe.rtp=kt),Ht&&(Fe.url!==Ht.url?pe.nor=encodeURIComponent(rn.Z.getRelativeUrl(Fe.url,Ht.url)):Ht.range&&(pe.nrr=Ht.range)),Me&&(pe.br=Me),Ne&&(pe.ot=Ne),isNaN(Xe)||(pe.d=Xe),isNaN(dt)||(pe.mtp=dt),isNaN(ut)||(pe.dl=ut),isNaN(et)||(pe.bl=et),isNaN(ht)||(pe.tb=ht),isNaN(jt)||jt===1||(pe.pr=jt),fe[Fe.mediaType]&&(pe.bs=!0,fe[Fe.mediaType]=!1),!ne[Fe.mediaType]&&we[Fe.mediaType]||(pe.su=!0,ne[Fe.mediaType]=!1,we[Fe.mediaType]=!0),pe}(Q)):Q.type===nt.w.INIT_SEGMENT_TYPE?function(){var Fe=ke();return Fe.ot="i",Fe.su=!0,Fe}():Q.type===nt.w.OTHER_TYPE||Q.type===nt.w.XLINK_EXPANSION_TYPE?function(){var Fe=ke();return Fe.ot="o",Fe}():Q.type===nt.w.LICENSE?function(Fe){var Ne=ke();return Ne.ot="k",Ne}():null}catch(Fe){return null}var Pe,be}function ke(){var Q={},Pe=me.get().streaming.cmcd.cid?me.get().streaming.cmcd.cid:B.cid;return Q.v=1,Q.sid=me.get().streaming.cmcd.sid?me.get().streaming.cmcd.sid:B.sid,Q.sid="".concat(Q.sid),Pe&&(Q.cid="".concat(Pe)),isNaN(B.pr)||B.pr===1||B.pr===null||(Q.pr=B.pr),B.st&&(Q.st=B.st),B.sf&&(Q.sf=B.sf),Q}function Ae(Q){try{var Pe=ee.getCurrentBufferLevel(Q);return isNaN(Pe)?null:100*parseInt(10*Pe)}catch(be){return null}}function Ge(Q){try{B.pr=Q.playbackRate}catch(Pe){}}function Z(Q){try{var Pe=L.getIsDynamic(Q.data)?"l":"v",be=Q.protocol&&Q.protocol==="MSS"?"s":"d";B.st="".concat(Pe),B.sf="".concat(be)}catch(Fe){}}function le(Q){try{Q.state&&Q.mediaType&&Q.state===_.Z.BUFFER_EMPTY&&(fe[Q.mediaType]||(fe[Q.mediaType]=!0),ne[Q.mediaType]||(ne[Q.mediaType]=!0))}catch(Pe){}}function ae(){for(var Q in fe)fe.hasOwnProperty(Q)&&(fe[Q]=!0);for(var Pe in ne)ne.hasOwnProperty(Pe)&&(ne[Pe]=!0)}function se(Q){try{if(!Q)return null;var Pe=Object.keys(Q).sort(function(Ne,pe){return Ne.localeCompare(pe)}),be=Pe.length,Fe=Pe.reduce(function(Ne,pe,Me){return pe==="v"&&Q[pe]===1||(typeof Q[pe]=="string"&&pe!=="ot"&&pe!=="sf"&&pe!=="st"?Ne+="".concat(pe,"=").concat(JSON.stringify(Q[pe])):Ne+="".concat(pe,"=").concat(Q[pe]),Me<be-1&&(Ne+=",")),Ne},"");return(Fe=Fe.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(Ne){return null}}return P={getQueryParameter:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Pe=_e(Q),be=function(Ne){try{var pe=me.get().streaming.cmcd.enabledKeys;return Object.keys(Ne).filter(function(Me){return pe.includes(Me)}).reduce(function(Me,Xe){return Me[Xe]=Ne[Xe],Me},{})}catch(Me){return Ne}}(Pe),Fe=se(be);return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Pe,cmcdString:Fe}),{key:"CMCD",value:Fe}}return null}catch(Ne){return null}},getHeaderParameters:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Pe=_e(Q),be=Ze(Pe,$e(["br","d","ot","tb"])),Fe=Ze(Pe,$e(["bl","dl","mtp","nor","nrr","su"])),Ne=Ze(Pe,$e(["bs","rtp"])),pe=Ze(Pe,$e(["cid","pr","sf","sid","st","v"])),Me={"CMCD-Object":se(be),"CMCD-Request":se(Fe),"CMCD-Status":se(Ne),"CMCD-Session":se(pe)};return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Pe,headers:Me}),Me}return null}catch(Xe){return null}},setConfig:function(Q){Q&&(Q.abrController&&(V=Q.abrController),Q.dashMetrics&&(ee=Q.dashMetrics),Q.playbackController&&(J=Q.playbackController))},reset:function(){ie.off(_.Z.PLAYBACK_RATE_CHANGED,Ge,this),ie.off(_.Z.MANIFEST_LOADED,Z,this),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,P),ie.off(_.Z.PLAYBACK_SEEKED,ae,P),ge()},initialize:function(){ie.on(_.Z.PLAYBACK_RATE_CHANGED,Ge,P),ie.on(_.Z.MANIFEST_LOADED,Z,P),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,P),ie.on(_.Z.PLAYBACK_SEEKED,ae,P),ie.on(_.Z.PERIOD_SWITCH_COMPLETED,He,P)}},L=Vn(Ee).getInstance(),ge(),P}Jn.__dashjs_factory_name="CmcdModel";var ar=U.Z.getSingletonFactory(Jn);function br(L){return br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},br(L)}function kr(L,P){kr=function(ne,fe){return new J(ne,void 0,fe)};var B=no(RegExp),V=RegExp.prototype,ee=new WeakMap;function J(ne,fe,we){var Ee=B.call(this,ne,fe);return ee.set(Ee,we||ee.get(ne)),Ee}function H(ne,fe){var we=ee.get(fe);return Object.keys(we).reduce(function(Ee,ie){return Ee[ie]=ne[we[ie]],Ee},Object.create(null))}return Yi(J,B),J.prototype.exec=function(ne){var fe=V.exec.call(this,ne);return fe&&(fe.groups=H(fe,this)),fe},J.prototype[Symbol.replace]=function(ne,fe){if(typeof fe=="string"){var we=ee.get(this);return V[Symbol.replace].call(this,ne,fe.replace(/\$<([^>]+)>/g,function(ie,me){return"$"+we[me]}))}if(typeof fe=="function"){var Ee=this;return V[Symbol.replace].call(this,ne,function(){var ie=[];return ie.push.apply(ie,arguments),br(ie[ie.length-1])!=="object"&&ie.push(H(ie,Ee)),fe.apply(this,ie)})}return V[Symbol.replace].call(this,ne,fe)},kr.apply(this,arguments)}function Yi(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(P&&P.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),P&&pi(L,P)}function no(L){var P=typeof Map=="function"?new Map:void 0;return no=function(B){if(B===null||(V=B,Function.toString.call(V).indexOf("[native code]")===-1))return B;var V;if(typeof B!="function")throw new TypeError("Super expression must either be null or a function");if(P!==void 0){if(P.has(B))return P.get(B);P.set(B,ee)}function ee(){return Br(B,arguments,yi(this).constructor)}return ee.prototype=Object.create(B.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),pi(ee,B)},no(L)}function Br(L,P,B){return Br=qr()?Reflect.construct:function(V,ee,J){var H=[null];H.push.apply(H,ee);var ne=new(Function.bind.apply(V,H));return J&&pi(ne,J.prototype),ne},Br.apply(null,arguments)}function qr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}function pi(L,P){return pi=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},pi(L,P)}function yi(L){return yi=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},yi(L)}var wo="static",ro="dynamic",ea="cmsd-",Ci=ea+wo,Al=ea+ro,su="stream",Ec=["mb","st","sf","v"],Nf={video:"v",audio:"a",text:"tt",stream:su},si=/^[-0-9]/;function Ms(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){B={},V={}}function ne(ge){ge&&Object.keys(ge).forEach(function(He){Ec.includes(He)||delete ge[He]})}function fe(ge){return!ge||ge.toLowerCase()!=="false"&&(si.test(ge)?parseInt(ge,10):ge.replace(/["]+/g,""))}function we(ge){try{for(var He={},Oe=ge.split(","),Ze=0;Ze<Oe.length;Ze++){var $e=Oe[Ze].split("="),_e=$e[0],ke=fe($e[1]);He[_e]=ke}return He}catch(Ae){P.error("Failed to parse CMSD-Static response header value:",Ae)}}function Ee(ge){try{for(var He={},Oe=ge.split(","),Ze=Oe[Oe.length-1].split(";"),$e=1;$e<Ze.length;$e++){var _e=Ze[$e].split("="),ke=_e[0],Ae=fe(_e[1]);He[ke]=Ae}return He}catch(Ge){return P.error("Failed to parse CMSD-Dynamic response header value:",Ge),[]}}function ie(ge){return Nf[ge]||"o"}function me(ge,He,Oe){var Ze=ge===wo?B:V,$e=Ze[He]||{},_e=Ze[su]||{};return $e[Oe]||_e[Oe]}return L={setConfig:function(){},initialize:function(){},reset:function(){H()},parseResponseHeaders:function(ge,He){for(var Oe=null,Ze=null,$e=ge.split("\r\n"),_e=$e.length-1;_e>=0;_e--){var ke=$e[_e].match(kr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(ke&&ke.groups){var Ae=ke.groups.key.toLowerCase(),Ge=ke.groups.value;switch(Ae){case Ci:Oe=we(Ge),J.trigger(T.Z.CMSD_STATIC_HEADER,Oe);break;case Al:Ze||(Ze=Ee(Ge))}}}var Z=su;return Oe&&Oe.ot?Z=Oe.ot:He&&(Z=ie(He)),ne(B[Z]),ne(V[Z]),Oe&&(B[Z]=Object.assign(B[Z]||{},Oe)),Ze&&(V[Z]=Object.assign(V[Z]||{},Ze)),{static:Oe,dynamic:Ze}},getMaxBitrate:function(ge){var He=ie(ge);return me(ro,He,"mb")||-1},getEstimatedThroughput:function(ge){var He=ie(ge);return me(ro,He,"etp")||null},getResponseDelay:function(ge){var He=ie(ge);return me(ro,He,"rd")||null},getRoundTripTime:function(ge){var He=ie(ge);return me(ro,He,"rtt")||null}},P=(0,x.Z)(ee).getInstance().getLogger(L),H(),L}Ms.__dashjs_factory_name="CmsdModel";var _n=U.Z.getSingletonFactory(Ms);function Xn(){var L,P,B=this.context,V={};function ee(){P=(0,x.Z)(B).getInstance().getLogger(L)}function J(ne){for(var fe={},we=0,Ee=0,ie=0,me=0,ge=ne.length,He=0;He<ge;++He)we+=ne[He].chunkDownloadTimeRelativeMS,Ee+=ne[He].bufferLevel,ie+=ne[He].chunkDownloadTimeRelativeMS*ne[He].bufferLevel,me+=ne[He].chunkDownloadTimeRelativeMS*ne[He].chunkDownloadTimeRelativeMS;return fe.m=(ie-we*Ee/ge)/(me-we*we/ge),fe.b=Ee/ge-fe.m*we/ge,function(Oe){return fe.m*Oe+fe.b}}function H(ne){var fe,we=!0,Ee=ne.reduce(function(ie,me){return ie+me.bufferLevelAtSegmentEnd},0)/ne.length;return ne.forEach(function(ie){Math.abs(ie.bufferLevelAtSegmentEnd/ie.bufferLevelAtSegmentStart)<.95&&(we=!1),ie.bufferLevelAtSegmentEnd/Ee<.8&&(we=!1),fe?fe>ie.bitrate&&(we=!1):fe=ie.bitrate}),we}return L={setup:ee,addMeasurement:function(ne,fe,we,Ee,ie){ne&&ne.mediaType&&!V[ne.mediaType]&&(V[ne.mediaType]=[]);var me=ne.mediaInfo.bitrateList.find(function(ge){return ge.id===ne.representationId});V[ne.mediaType].push({index:ne.index,repId:ne.representationId,mediaType:ne.mediaType,requestTimeMS:Ee,adjustedAvailabilityStartTimeMS:ne.availabilityStartTime.getTime(),segDurationMS:1e3*ne.duration,chunksDurationMS:we.reduce(function(ge,He){return ge+He.chunkDownloadDurationMS},0),segmentBytes:we.reduce(function(ge,He){return ge+He.chunkBytes},0),bitrate:me&&me.bandwidth,bitrateList:ne.mediaInfo.bitrateList,chunkMeasurements:we,fetchDownloadDurationMS:fe,throughputCapacityDelayMS:ie,getEstimatedBufferLevel:J(we.slice(1))}),V[ne.mediaType].length>10&&V[ne.mediaType].shift()},getThroughputCapacityDelayMS:function(ne,fe){var we=V[ne.mediaType]&&V[ne.mediaType].slice(-3);return!we||we.length<3?0:H(we)?fe/4>250?250:fe/4:0},getEstimatedDownloadDurationMS:function(ne){var fe=V[ne.mediaType].slice(-1).pop(),we=V[ne.mediaType].slice(-3),Ee=fe.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;fe.bufferLevelAtSegmentStart=fe.getEstimatedBufferLevel(Ee/2),fe.bufferLevelAtSegmentEnd=fe.getEstimatedBufferLevel(Ee);var ie=H(we),me=ie?.6:.8;if(fe.isBufferStable&&1.05*fe.segDurationMS<fe.fetchDownloadDurationMS)return fe.fetchDownloadDurationMS;if(!ie||fe.segDurationMS<fe.fetchDownloadDurationMS||fe.adjustedAvailabilityStartTimeMS<=fe.requestTimeMS+fe.throughputCapacityDelayMS-fe.segDurationMS)return .8*fe.fetchDownloadDurationMS;for(var ge=fe.requestTimeMS+fe.throughputCapacityDelayMS-fe.adjustedAvailabilityStartTimeMS,He=0,Oe=0,Ze=0,$e=0;$e<fe.chunkMeasurements.length;$e++){var _e=fe.chunkMeasurements[$e];if(ge<Oe+_e.chunkDownloadDurationMS)break;Oe+=_e.chunkDownloadDurationMS,He+=_e.chunkBytes,Ze++}if(ge<0&&P.warn("request time was before adjusted availibitly start time"),He&&Oe&&Ze>.2*fe.chunkMeasurements.length){var ke=He/Oe,Ae=fe.segmentBytes/ke;return fe.fetchDownloadDurationMS<Ae?fe.fetchDownloadDurationMS*me:Ae*me}var Ge=fe.bitrate;return fe.bitrateList.some(function(Z){if(Z.bandwidth>fe.bitrate)return Ge=Z.bandwidth,!0}),Ge===fe.bitrate?fe.fetchDownloadDurationMS*me:me*fe.segmentBytes*8*1e3/Ge}},ee(),L}Xn.__dashjs_factory_name="LowLatencyThroughputModel";var hr=U.Z.getSingletonFactory(Xn),ti=w(5717);function Mr(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Bi(L){L=L||{};var P,B,V,ee,J,H,ne,fe,we,Ee,ie,me=this.context,ge=L.errHandler,He=L.dashMetrics,Oe=L.mediaPlayerModel,Ze=L.requestModifier,$e=L.boxParser,_e=L.errors,ke=L.requestTimeout||0,Ae=(0,m.Z)(me).getInstance(),Ge=(0,je.Z)(me).getInstance();function Z(le,ae){var se,Q=le.request,Pe=[],be=!0,Fe=!0,Ne=new Date,pe=Ne,Me=0,Xe=null,dt=null;if(!Ze||!He||!ge)throw new Error("config object is not correct or missing");var ut,et=function(en){Q.requestStartDate=Ne,Q.requestEndDate=new Date,Q.firstByteDate=Q.firstByteDate||Ne,Q.fileLoaderType=dt;var Jt=se.response?se.response.responseURL:null,Wt=se.response?se.response.status:null,Dn=se.response&&se.response.getAllResponseHeaders?se.response.getAllResponseHeaders():se.response?se.response.responseHeaders:null,Nn=Dn&&Ge.get().streaming.cmsd&&Ge.get().streaming.cmsd.enabled?ne.parseResponseHeaders(Dn,Q.mediaType):null;He.addHttpRequest(Q,Jt,Wt,Dn,en?Pe:null,Nn)},ht=function(en){Fe=!1,et(en),Q.type===nt.w.MPD_TYPE&&(He.addManifestUpdate(Q),Ae.trigger(T.Z.MANIFEST_LOADING_FINISHED,{request:Q}))},jt=function(){if(Xe&&(clearTimeout(Xe),Xe=null),B.indexOf(se)!==-1&&(B.splice(B.indexOf(se),1),Fe))if(ht(!1),ae>0){try{Ge.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&Q.type===nt.w.MEDIA_SEGMENT_TYPE&&Oe.getRetryAttemptsForType(nt.w.MEDIA_SEGMENT_TYPE)===ae&&Ae.trigger(T.Z.ATTEMPT_BACKGROUND_SYNC)}catch(Jt){}ae--;var en={config:le};ee.push(en),en.timeout=setTimeout(function(){ee.indexOf(en)!==-1&&(ee.splice(ee.indexOf(en),1),Z(le,ae))},Oe.getRetryIntervalsForType(Q.type))}else{if(Q.type===nt.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;ge.error(new ce.Z(J[Q.type],Q.url+" is not available",{request:Q,response:se.response})),le.error&&le.error(Q,"error",se.response.statusText,se.response),le.complete&&le.complete(Q,se.response.statusText)}};Q.hasOwnProperty("availabilityTimeComplete")&&Q.availabilityTimeComplete===!1&&window.fetch&&Q.responseType==="arraybuffer"&&Q.type===nt.w.MEDIA_SEGMENT_TYPE?((ut=Or(me).create({requestModifier:Ze,lowLatencyThroughputModel:we,boxParser:$e})).setup({dashMetrics:He}),dt=y.Z.FILE_LOADER_TYPES.FETCH):(ut=(0,nn.Z)(me).create({requestModifier:Ze}),dt=y.Z.FILE_LOADER_TYPES.XHR);var Ht=null,kt=Ze.modifyRequestURL?Ze.modifyRequestURL(Q.url):Q.url;if(Ge.get().streaming.cmcd&&Ge.get().streaming.cmcd.enabled){var Ut=Ge.get().streaming.cmcd.mode;if(Ut===y.Z.CMCD_MODE_QUERY){var An=function(en){try{var Jt=[],Wt=H.getQueryParameter(en);return Wt&&Jt.push(Wt),Jt}catch(Dn){return[]}}(Q);kt=rn.Z.addAditionalQueryParameterToUrl(kt,An)}else Ut===y.Z.CMCD_MODE_HEADER&&(Ht=H.getHeaderParameters(Q))}var ot=fe.getXHRWithCredentialsForType(Q.type);if(Q.queryParams){var yt=Object.keys(Q.queryParams).map(function(en){return{key:en,value:Q.queryParams[en]}});kt=rn.Z.addAditionalQueryParameterToUrl(kt,yt)}Q.url=kt,se={url:kt,method:nt.w.GET,withCredentials:ot,request:Q,onload:function(){se.response.status>=200&&se.response.status<=299&&(ht(!0),le.success&&le.success(se.response.response,se.response.statusText,se.response.responseURL),le.complete&&le.complete(Q,se.response.statusText))},onend:jt,onerror:jt,progress:function(en){var Jt=new Date;be&&(be=!1,(!en.lengthComputable||en.lengthComputable&&en.total!==en.loaded)&&(Q.firstByteDate=Jt)),en.lengthComputable&&(Q.bytesLoaded=en.loaded,Q.bytesTotal=en.total),en.noTrace||(Pe.push({s:pe,d:en.time?en.time:Jt.getTime()-pe.getTime(),b:[en.loaded?en.loaded-Me:0]}),pe=Jt,Me=en.loaded),Xe&&(clearTimeout(Xe),Xe=null),Ge.get().streaming.fragmentRequestProgressTimeout>0&&(Xe=setTimeout(function(){Ee.warn("Abort request "+se.url+" due to progress timeout"),se.response.onabort=null,se.loader.abort(se),jt()},Ge.get().streaming.fragmentRequestProgressTimeout)),le.progress&&en&&le.progress(en)},onabort:function(){et(!0),Xe&&(clearTimeout(Xe),Xe=null),le.abort&&le.abort(Q)},ontimeout:function(en){var Jt;if(en.lengthComputable){var Wt=en.loaded/en.total*100;Jt="Request timeout: loaded: "+en.loaded+", out of: "+en.total+" : "+Wt.toFixed(3)+"% Completed"}else Jt="Request timeout: non-computable download size";Ee.warn(Jt)},loader:ut,timeout:ke,headers:Ht};var $t=new Date().getTime();if(isNaN(Q.delayLoadingTime)||$t>=Q.delayLoadingTime)B.push(se),ut.load(se);else{var xt={httpRequest:se};V.push(xt),xt.delayTimeout=setTimeout(function(){if(V.indexOf(xt)!==-1){V.splice(V.indexOf(xt),1);try{Ne=new Date,pe=Ne,B.push(xt.httpRequest),ut.load(xt.httpRequest)}catch(en){xt.httpRequest.onerror()}}},Q.delayLoadingTime-$t)}}return P={load:function(le){le.request?Z(le,Oe.getRetryAttemptsForType(le.request.type)):le.error&&le.error(le.request,"error")},abort:function(){ee.forEach(function(le){clearTimeout(le.timeout),le.config.request&&le.config.abort&&le.config.abort(le.config.request)}),ee=[],V.forEach(function(le){return clearTimeout(le.delayTimeout)}),V=[],B.forEach(function(le){le.request.type!==nt.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(le.onloadend=le.onerror=le.onprogress=void 0,le.loader.abort(le))}),B=[]}},Ee=(0,x.Z)(me).getInstance().getLogger(P),B=[],V=[],ee=[],H=ar(me).getInstance(),ne=_n(me).getInstance(),we=hr(me).getInstance(),fe=(0,ti.Z)(me).getInstance(),Mr(ie={},nt.w.MPD_TYPE,_e.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Mr(ie,nt.w.XLINK_EXPANSION_TYPE,_e.DOWNLOAD_ERROR_ID_XLINK_CODE),Mr(ie,nt.w.INIT_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Mr(ie,nt.w.MEDIA_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,nt.w.INDEX_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,nt.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,nt.w.OTHER_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),J=ie,P}Bi.__dashjs_factory_name="HTTPLoader";var Xr=U.Z.getClassFactory(Bi);function ta(){var L;function P(){L={}}function B(){P()}return B(),{getLoader:function(V){for(var ee in L)if(L.hasOwnProperty(ee)&&V.startsWith(ee))return L[ee];return Xr},registerLoader:function(V,ee){L[V]=ee},unregisterLoader:function(V){L[V]&&delete L[V]},unregisterAllLoader:P,reset:B}}ta.__dashjs_factory_name="SchemeLoaderFactory";var Pi=U.Z.getSingletonFactory(ta);function ui(L){L=L||{};var P,B,V=this.context;return P=Pi(V).getInstance(),{load:function(ee){if(!B){var J=P.getLoader(ee&&ee.request?ee.request.url:null);B=J(V).create({errHandler:L.errHandler,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,dashMetrics:L.dashMetrics,boxParser:L.boxParser?L.boxParser:null,constants:L.constants?L.constants:null,dashConstants:L.dashConstants?L.dashConstants:null,urlUtils:L.urlUtils?L.urlUtils:null,requestTimeout:isNaN(L.requestTimeout)?0:L.requestTimeout,errors:L.errors})}B.load(ee)},abort:function(){B&&B.abort()}}}ui.__dashjs_factory_name="URLLoader";var Ao=U.Z.getClassFactory(ui);function Wi(L){return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Wi(L)}function Go(L,P){return Go=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Go(L,P)}function na(L,P){return!P||Wi(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function pt(L){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},pt(L)}var ra=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Go(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=pt(P);if(B){var ne=pt(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return na(this,J)});function ee(J){var H;return function(ne,fe){if(!(ne instanceof fe))throw new TypeError("Cannot call a class as a function")}(this,ee),(H=V.call(this,J)).checkForExistenceOnly=!0,H}return ee}(j.Z);function Ds(L){L=L||{};var P,B,V=this.context,ee=L.eventBus,J=L.events,H=L.urlUtils,ne=L.errors,fe=L.streamId;return P={checkForExistence:function(we){var Ee=function(me){ee.trigger(J.CHECK_FOR_EXISTENCE_COMPLETED,{request:we,exists:me})};if(we){var ie=new ra(we.url);B.load({request:ie,success:function(){Ee(!0)},error:function(){Ee(!1)}})}else Ee(!1)},load:function(we){var Ee=function(ie,me){ee.trigger(J.LOADING_COMPLETED,{request:we,response:ie||null,error:me||null,sender:P})};we?B.load({request:we,progress:function(ie){ee.trigger(J.LOADING_PROGRESS,{request:we,stream:ie.stream,streamId:fe}),ie.data&&ee.trigger(J.LOADING_DATA_PROGRESS,{request:we,response:ie.data||null,error:null,sender:P})},success:function(ie){Ee(ie)},error:function(ie,me,ge){Ee(void 0,new ce.Z(ne.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ge,me))},abort:function(ie){ie&&ee.trigger(J.LOADING_ABANDONED,{mediaType:ie.mediaType,request:ie,sender:P})}}):Ee(void 0,new ce.Z(ne.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,ne.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){B&&B.abort()},reset:function(){B&&(B.abort(),B=null)}},B=Ao(V).create({errHandler:L.errHandler,errors:ne,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:H,constants:y.Z,boxParser:L.boxParser,dashConstants:L.dashConstants,requestTimeout:L.settings.get().streaming.fragmentRequestTimeout}),P}Ds.__dashjs_factory_name="FragmentLoader";var pr=U.Z.getClassFactory(Ds);function Io(){return{modifyResponseAsync:function(L){return Promise.resolve(L)}}}Io.__dashjs_factory_name="SegmentResponseModifier";var uu=U.Z.getSingletonFactory(Io);function Il(L){L=L||{};var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=L.errHandler,ne=L.mediaPlayerModel,fe=L.dashMetrics,we=(0,x.Z)(ee).getInstance(),Ee=uu(ee).getInstance(),ie=L.streamInfo;function me(){return ie.id}function ge(){for(var Oe in V)V[Oe].reset();V={}}function He(Oe){if(Oe.sender){var Ze=Oe.request,$e=Oe.response,_e=Ze.isInitializationRequest(),ke=Ze.mediaInfo.streamInfo;if(Oe.error&&(Ze.mediaType===y.Z.AUDIO||Ze.mediaType===y.Z.VIDEO||Ze.mediaType===y.Z.TEXT&&Ze.mediaInfo.isFragmented)&&J.trigger(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:Oe.request.serviceLocation}),$e&&ke){var Ae=function(Ge,Z,le,ae){var se=new Qt;return se.streamId=le,se.mediaInfo=Z.mediaInfo,se.segmentType=Z.type,se.start=Z.startTime,se.duration=Z.duration,se.end=se.start+se.duration,se.bytes=Ge,se.index=Z.index,se.quality=Z.quality,se.representationId=Z.representationId,se.endFragment=ae,se}($e,Ze,ie.id,Oe.type!==T.Z.FRAGMENT_LOADING_PROGRESS);Ee.modifyResponseAsync(Ae).then(function(Ge){J.trigger(_e?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:Ge,request:Ze},{streamId:ke.id,mediaType:Ze.mediaType})}).catch(function(Ge){B.error(Ge),J.trigger(_e?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:Ae,request:Ze},{streamId:ke.id,mediaType:Ze.mediaType})})}else B.warn("No "+Ze.mediaType+" bytes to push or stream is inactive.")}}return P={getStreamId:me,getModel:function(Oe){var Ze=V[Oe];return Ze||(Ze=X(ee).create({streamInfo:ie,type:Oe,dashMetrics:fe,fragmentLoader:pr(ee).create({dashMetrics:fe,mediaPlayerModel:ne,errHandler:H,requestModifier:(0,Ke.Z)(ee).getInstance(),settings:L.settings,boxParser:L.boxParser,eventBus:J,events:T.Z,errors:Te,dashConstants:L.dashConstants,urlUtils:L.urlUtils,streamId:me()}),debug:we,eventBus:J,events:T.Z}),V[Oe]=Ze),Ze},reset:function(){J.off(_.Z.FRAGMENT_LOADING_COMPLETED,He,this),J.off(_.Z.FRAGMENT_LOADING_PROGRESS,He,this),ge()}},B=we.getLogger(P),ge(),J.on(_.Z.FRAGMENT_LOADING_COMPLETED,He,P),J.on(_.Z.FRAGMENT_LOADING_PROGRESS,He,P),P}Il.__dashjs_factory_name="FragmentController";var gs=U.Z.getClassFactory(Il),qa=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},Ou=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function Lu(L){var P,B,V=this.context,ee=L.streamInfo;function J(ne){B.setTrackByIndex(ne)}function H(){B&&B.reset()}return P={getStreamId:function(){return ee.id},initialize:function(){B.addTracks();var ne=B.getTracks();ne&&ne.length>0&&J(0)},provide:function(ne,fe){if(typeof fe=="function"){var we,Ee,ie=B.getCurrentTrack();if(!ie||ie.segmentDuration<=0||ne==null)fe(null);else{(Ee=B.getThumbnailRequestForTime(ne))&&(ie.segmentDuration=Ee.duration),we=ne%ie.segmentDuration;var me=Math.floor(we*ie.tilesHor*ie.tilesVert/ie.segmentDuration),ge=new qa;if(ge.width=Math.floor(ie.widthPerTile),ge.height=Math.floor(ie.heightPerTile),ge.x=Math.floor(me%ie.tilesHor)*ie.widthPerTile,ge.y=Math.floor(me/ie.tilesHor)*ie.heightPerTile,"readThumbnail"in ie)return ie.readThumbnail(ne,function(Oe){ge.url=Oe,fe(ge)});if(Ee)ge.url=Ee.url,ie.segmentDuration=NaN;else{var He=Math.floor(ne/ie.segmentDuration);ge.url=function(Oe,Ze){var $e=Ze+Oe.startNumber,_e=(0,M.vi)(Oe.templateUrl,"Number",$e);return _e=(0,M.vi)(_e,"Time",($e-1)*Oe.segmentDuration*Oe.timescale),_e=(0,M.vi)(_e,"Bandwidth",Oe.bandwidth),(0,M.eR)(_e)}(ie,He)}fe(ge)}}},setTrackByIndex:J,getCurrentTrackIndex:function(){return B.getCurrentTrackIndex()},getBitrateList:function(){var ne=B.getTracks(),fe=0;return ne.map(function(we){var Ee=new Ou;return Ee.mediaType=y.Z.IMAGE,Ee.qualityIndex=fe++,Ee.bitrate=we.bitrate,Ee.width=we.width,Ee.height=we.height,Ee})},reset:H},H(),B=(0,In.Z)(V).create({streamInfo:ee,adapter:L.adapter,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:L.debug,eventBus:L.eventBus,events:L.events,dashConstants:L.dashConstants,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController}),P}Lu.__dashjs_factory_name="ThumbnailController";var ia=U.Z.getClassFactory(Lu),oa=w(7417);function lu(L){var P;L=L||{};var B=[],V=(0,m.Z)(this.context).getInstance(),ee=L.updateEventName,J=L.addBlacklistEventName;function H(ne){B.indexOf(ne)===-1&&(B.push(ne),V.trigger(ee,{entry:ne}))}return P={add:H,contains:function(ne){return!!(B.length&&ne&&ne.length)&&B.indexOf(ne)!==-1},reset:function(){B=[]}},J&&V.on(J,function(ne){H(ne.entry)},P),P}lu.__dashjs_factory_name="BlackListController";var ms=U.Z.getClassFactory(lu),_c=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT,y.Z.MUXED,y.Z.IMAGE];function Nr(L){L=L||{};var P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He,Oe,Ze,$e,_e,ke=this.context,Ae=(0,m.Z)(ke).getInstance(),Ge=(0,wt.Z)(ke).getInstance(),Z=L.manifestModel,le=L.mediaPlayerModel,ae=L.dashMetrics,se=L.manifestUpdater,Q=L.adapter,Pe=L.timelineConverter,be=L.capabilities,Fe=L.errHandler,Ne=L.abrController,pe=L.playbackController,Me=L.eventController,Xe=L.mediaController,dt=L.protectionController,ut=L.textController,et=L.videoModel,ht=L.streamInfo,jt=L.settings;function Ht(bt,Sn){return new Promise(function(En,Lt){Jt(),Ee=!0,Dn();var On=et.getElement(),lt=[];_c.forEach(function(rt){(rt!==y.Z.TEXT||bt)&&(rt!==y.Z.VIDEO||!On||On&&/^VIDEO$/i.test(On.nodeName))&&lt.push(kt(rt,bt))}),Promise.all(lt).then(function(){return rt=Sn,new Promise(function(Kt){var ze={},Ve=V.map(function(Dt){return Dt.createBufferSinks(rt)});Promise.all(Ve).then(function(Dt){Dt.forEach(function(fn){fn&&(ze[fn.getType()]=fn)}),Kt(ze)}).catch(function(){Kt(ze)})});var rt}).then(function(rt){if(Ee=!1,V.length===0){var Kt="No streams to play.";Fe.error(new ce.Z(Te.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Kt,Z.getValue())),B.fatal(Kt)}else Nn();bt&&ut.createTracks(ht),En(rt)}).catch(function(rt){Lt(rt)})})}function kt(bt,Sn){var En,Lt=Q.getAllMediaInfoForType(ht,bt),On=[],lt=null;if(!Lt||Lt.length===0)return B.info("No "+bt+" data."),Promise.resolve();bt===y.Z.VIDEO&&(ne=!0),bt===y.Z.AUDIO&&(fe=!0);for(var rt=0,Kt=Lt.length;rt<Kt;rt++)lt=Lt[rt],bt===y.Z.TEXT&&lt.isEmbedded&&(ut.addEmbeddedTrack(ht,lt),On.push(lt)),Ut(lt)&&Xe.addTrack(lt);if(On.length>0&&(Xe.setInitialMediaSettingsForType(bt,ht),ut.addMediaInfosToBuffer(ht,bt,On)),Lt=Lt.filter(function(Ve){return!Ve.isEmbedded}),Lt.length===0)return Promise.resolve();if(bt===y.Z.IMAGE)return(me=ia(ke).create({streamInfo:ht,adapter:Q,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:Ze,eventBus:Ae,events:T.Z,dashConstants:v.Z,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController})).initialize(),Promise.resolve();Ae.trigger(T.Z.STREAM_INITIALIZING,{streamInfo:ht,mediaInfo:lt}),Xe.setInitialMediaSettingsForType(bt,ht);var ze=function(Ve,Dt){var fn=Ve&&Ve.length>0?Ve[0]:null,Tn=ie.getModel(fn?fn.type:null),sr=fn?fn.type:null,Zr=fn?fn.mimeType:null,Ii=fn?fn.isFragmented:null,zr=hn(ke).create({streamInfo:ht,type:sr,mimeType:Zr,timelineConverter:Pe,adapter:Q,manifestModel:Z,mediaPlayerModel:le,fragmentModel:Tn,dashMetrics:L.dashMetrics,baseURLController:L.baseURLController,segmentBaseController:L.segmentBaseController,abrController:Ne,playbackController:pe,mediaController:Xe,textController:ut,errHandler:Fe,settings:jt,boxParser:Oe,segmentBlacklistController:ge});zr.initialize(Dt,ne,Ii),V.push(zr);for(var io=0;io<Ve.length;io++)zr.addMediaInfo(Ve[io]);return sr===y.Z.TEXT&&ut.addMediaInfosToBuffer(ht,sr,Ve,Tn),zr}(Lt,Sn);return(En=Xe.getCurrentTrackFor(bt,ht.id))?(Ne.updateTopQualityIndex(En),ze.selectMediaInfo(bt===y.Z.TEXT&&En.isEmbedded?Lt[0]:En)):Promise.resolve()}function Ut(bt){var Sn,En=bt?bt.type:null;return En===y.Z.MUXED?(Sn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",B.fatal(Sn),Fe.error(new ce.Z(Te.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Sn,Z.getValue())),!1):!(En!==y.Z.TEXT&&En!==y.Z.IMAGE&&bt.contentProtection&&!be.supportsEncryptedMedia()&&(Fe.error(new ce.Z(Te.CAPABILITY_MEDIAKEYS_ERROR_CODE,Te.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function An(bt){for(var Sn=V?V.length:0,En=0;En<Sn;En++){var Lt=V[En].getFragmentModel();Lt.abortRequests(),Lt.resetInitialSettings(),V[En].reset(!1,bt)}ut&&ut.deactivateStream(ht),V=[],J=!1,H=!1,Fn(!1),yt(!1),Ae.trigger(T.Z.STREAM_DEACTIVATED,{streamInfo:ht})}function ot(bt){An(bt),ee=!1,ne=!1,fe=!1,we={},Ee=!1,$e=!1,_e=[]}function yt(bt){$e=bt}function $t(){return ht?ht.start:NaN}function xt(){return ht?ht.id:null}function en(){return ht}function Jt(){if(!et||!Ne)throw new Error(y.Z.MISSING_CONFIG_ERROR)}function Wt(bt){bt.error&&(Fe.error(bt.error),B.fatal(bt.error.message))}function Dn(){if(Me){var bt=Q.getEventsFor(ht);bt&&bt.length>0&&Me.addInlineEvents(bt,ht.id)}}function Nn(){for(var bt=V.length,Sn=we.audio||we.video?new ce.Z(Te.DATA_UPDATE_FAILED_ERROR_CODE,Te.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,En=0;En<bt;En++)if(V[En].isUpdating()||Ee)return;if(dt){dt.clearMediaInfoArray();for(var Lt=0;Lt<bt&&V[Lt];Lt++){var On=V[Lt].getType(),lt=V[Lt].getMediaInfo();if(On===y.Z.AUDIO||On===y.Z.VIDEO||On===y.Z.TEXT&&lt.isFragmented){var rt=V[Lt].getMediaInfo();rt&&dt.initializeForMedia(rt)}}dt.handleKeySystemFromManifest()}Sn?Fe.error(Sn):ee||(ee=!0,et.waitForReadyState(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){Ae.trigger(T.Z.STREAM_INITIALIZED,{streamInfo:ht})}))}function rr(){var bt=un(),Sn=bt.length;if(Sn!==0){for(var En=0;En<Sn;En++)if(!bt[En].isBufferingCompleted()&&(bt[En].getType()===y.Z.AUDIO||bt[En].getType()===y.Z.VIDEO))return void B.debug("onBufferingCompleted - One streamProcessor has finished but",bt[En].getType(),"one is not buffering completed");B.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),H=!0,Ae.trigger(T.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:ht},{streamInfo:ht})}else B.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ir(bt){we[bt.mediaType]=bt.error,Nn()}function It(bt){Me&&Me.addInbandEvents(bt.events,ht.id)}function Xt(bt){return bt&&bt.type?Gt(bt.type):null}function Gt(bt){return bt?un().filter(function(Sn){return Sn.getType()===bt})[0]:null}function un(){for(var bt,Sn,En=[],Lt=0;Lt<V.length;Lt++)(bt=(Sn=V[Lt]).getType())!==y.Z.AUDIO&&bt!==y.Z.VIDEO&&bt!==y.Z.TEXT||En.push(Sn);return En}function vn(bt,Sn){var En=en(),Lt=Sn.getStreamInfo();if(!Lt||!En)return!0;var On=Q.getAdaptationForType(Lt.index,bt,Lt),lt=Q.getAdaptationForType(En.index,bt,En);return On&&lt?!(!Pn(lt)&&Pn(On)):!On&&!lt}function Pn(bt){return!!bt&&!!(bt.ContentProtection||bt.Representation_asArray&&bt.Representation_asArray.length>0&&bt.Representation_asArray[0].ContentProtection)}function xn(bt,Sn){var En=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!bt||!bt.hasOwnProperty("getStreamInfo"))return!1;var Lt=bt.getStreamInfo(),On=En?En.getStreamInfo():en();if(!Lt||!On)return!1;var lt=Q.getAdaptationForType(Lt.index,Sn,Lt),rt=Q.getAdaptationForType(On.index,Sn,On);if(!lt||!rt)return!lt&&!rt;var Kt=lt&&rt&&lt.mimeType===rt.mimeType,ze=rt.Representation_asArray.map(function(Tn){return Tn.codecs}),Ve=lt.Representation_asArray.map(function(Tn){return Tn.codecs}),Dt=Ve.some(function(Tn){return ze.indexOf(Tn)>-1}),fn=Ve.some(function(Tn){return ze.some(function(sr){return be.codecRootCompatibleWithCodec(sr,Tn)})});return Dt||fn&&Kt}function Fn(bt){He=bt}function Gn(){return He}return P={initialize:function(){Ae.on(T.Z.BUFFERING_COMPLETED,rr,P),Ae.on(T.Z.DATA_UPDATE_COMPLETED,ir,P),Ae.on(T.Z.INBAND_EVENTS,It,P),dt&&(Ae.on(T.Z.KEY_ERROR,Wt,P),Ae.on(T.Z.SERVER_CERTIFICATE_UPDATED,Wt,P),Ae.on(T.Z.LICENSE_REQUEST_COMPLETE,Wt,P),Ae.on(T.Z.KEY_SYSTEM_SELECTED,Wt,P),Ae.on(T.Z.KEY_SESSION_CREATED,Wt,P),Ae.on(T.Z.KEY_STATUSES_CHANGED,Wt,P)),ut.initializeForStream(ht),Ae.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht})},getStreamId:function(){return ht?ht.id:null},activate:function(bt,Sn){return new Promise(function(En,Lt){if(!J)return Gn()?(J=!0,Ae.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),void En(Sn)):void function(On,lt){return Ht(On,lt)}(bt,Sn).then(function(On){J=!0,Ae.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),En(On)}).catch(function(On){Lt(On)});En(Sn)})},deactivate:An,getIsActive:function(){return J},getDuration:function(){return ht?ht.duration:NaN},getStartTime:$t,getId:xt,getStreamInfo:en,getHasAudioTrack:function(){return fe},getHasVideoTrack:function(){return ne},startPreloading:function(bt,Sn){return new Promise(function(En,Lt){Gn()?Lt():(B.info("[startPreloading] Preloading next stream with id ".concat(xt())),Fn(!0),Ht(bt,Sn).then(function(){for(var On=0;On<V.length&&V[On];On++)V[On].setExplicitBufferingTime($t()),V[On].getScheduleController().startScheduleTimer();En()}).catch(function(){Fn(!1),Lt()}))})},initializeForTextWithMediaSource:function(bt){return new Promise(function(Sn,En){kt(y.Z.TEXT,bt).then(function(){return(Lt=Gt(y.Z.TEXT))?Lt.createBufferSinks():Promise.resolve();var Lt}).then(function(){ut.createTracks(ht),Sn()}).catch(function(Lt){En(Lt)})})},getThumbnailController:function(){return me},getBitrateListFor:function(bt){if(Jt(),bt===y.Z.IMAGE)return me?me.getBitrateList():[];var Sn=function(En){for(var Lt=null,On=0;On<V.length;On++)if((Lt=V[On]).getType()===En)return Lt.getMediaInfo();return null}(bt);return Ne.getBitrateList(Sn)},updateData:function(bt){return new Promise(function(Sn){Ee=!0,ht=bt,Me&&Dn();for(var En=[],Lt=0,On=V.length;Lt<On;Lt++){var lt=V[Lt],rt=lt.getMediaInfo();En.push(lt.updateStreamInfo(ht));var Kt=Q.getAllMediaInfoForType(ht,lt.getType());if(Kt=Kt.filter(function(Dt){return!Dt.isEmbedded})){lt.clearMediaInfoArray();for(var ze=0;ze<Kt.length;ze++){var Ve=Kt[ze];lt.addMediaInfo(Kt[ze]),Q.areMediaInfosEqual(rt,Ve)&&(Ne.updateTopQualityIndex(Ve),En.push(lt.selectMediaInfo(Ve)))}}}Promise.all(En).then(function(){for(En=[];_e.length>0;){var Dt=_e.pop(),fn=Dt.newMediaInfo,Tn=Xt(Dt.oldMediaInfo);if(!Tn)return;En.push(Tn.prepareTrackSwitch()),En.push(Tn.selectMediaInfo(fn))}return Promise.all(En)}).then(function(){Ee=!1,Nn(),Ae.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht}),Sn()})})},reset:function(bt){ie&&(ie.reset(),ie=null),Ne&&ht&&Ne.clearDataForStream(ht.id),ge&&(ge.reset(),ge=null),ot(bt),ht=null,Ae.off(T.Z.DATA_UPDATE_COMPLETED,ir,P),Ae.off(T.Z.BUFFERING_COMPLETED,rr,P),Ae.off(T.Z.INBAND_EVENTS,It,P),dt&&(Ae.off(T.Z.KEY_ERROR,Wt,P),Ae.off(T.Z.SERVER_CERTIFICATE_UPDATED,Wt,P),Ae.off(T.Z.LICENSE_REQUEST_COMPLETE,Wt,P),Ae.off(T.Z.KEY_SYSTEM_SELECTED,Wt,P),Ae.off(T.Z.KEY_SESSION_CREATED,Wt,P),Ae.off(T.Z.KEY_STATUSES_CHANGED,Wt,P))},getProcessors:un,setMediaSource:function(bt){return new Promise(function(Sn,En){for(var Lt=[],On=0;On<V.length;)Ut(V[On].getMediaInfo())?(Lt.push(V[On].setMediaSource(bt)),On++):(V[On].reset(),V.splice(On,1));Promise.all(Lt).then(function(){for(var lt=0;lt<V.length;lt++)V[lt].dischargePreBuffer();if(V.length===0){var rt="No streams to play.";Fe.error(new ce.Z(Te.MANIFEST_ERROR_ID_NOSTREAMS_CODE,rt+"nostreams",Z.getValue())),B.fatal(rt)}Sn()}).catch(function(lt){B.error(lt),En(lt)})})},isMediaCodecCompatible:function(bt){var Sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return xn(bt,y.Z.VIDEO,Sn)&&xn(bt,y.Z.AUDIO,Sn)},isProtectionCompatible:function(bt){return!bt||vn(y.Z.VIDEO,bt)&&vn(y.Z.AUDIO,bt)},getPreloaded:Gn,getIsEndedEventSignaled:function(){return $e},setIsEndedEventSignaled:yt,getAdapter:function(){return Q},getHasFinishedBuffering:function(){return H},setPreloaded:Fn,startScheduleControllers:function(){for(var bt=V.length,Sn=0;Sn<bt&&V[Sn];Sn++)V[Sn].getScheduleController().startScheduleTimer()},prepareTrackChange:function(bt){if(J&&ht){H=!1;var Sn=bt.newMediaInfo,En=Z.getValue();Q.setCurrentMediaInfo(ht.id,Sn.type,Sn);var Lt=Xt(Sn);if(Lt){var On=pe.getTime();B.info("Stream -  Process track changed at current time "+On),En.refreshManifestOnSwitchTrack?(_e.push(bt),se.getIsUpdating()||(B.debug("Stream -  Refreshing manifest for switch track"),se.refreshManifest())):Lt.selectMediaInfo(Sn).then(function(){Sn.type!==y.Z.VIDEO&&Sn.type!==y.Z.AUDIO||Ne.updateTopQualityIndex(Sn),Lt.prepareTrackSwitch()})}}},prepareQualityChange:function(bt){var Sn=Gt(bt.mediaType);Sn&&Sn.prepareQualityChange(bt)}},function(){try{Ze=(0,x.Z)(ke).getInstance(),B=Ze.getLogger(P),ot(),Oe=(0,oa.Z)(ke).getInstance(),ge=ms(ke).create({updateEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),ie=gs(ke).create({streamInfo:ht,mediaPlayerModel:le,dashMetrics:ae,errHandler:Fe,settings:jt,boxParser:Oe,dashConstants:v.Z,urlUtils:Ge})}catch(bt){throw bt}}(),P}Nr.__dashjs_factory_name="Stream";var vs=U.Z.getClassFactory(Nr),ys=function L(P){(function(B,V){if(!(B instanceof V))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||null,this.type=nt.w.CONTENT_STEERING_TYPE,this.responseType="json"},Yr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function Tc(){var L,P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He,Oe=this.context,Ze=(0,wt.Z)(Oe).getInstance();function $e(Ne){Z(Ne,"baseUrl")}function _e(Ne){Z(Ne,"location")}function ke(Ne){if(Ne&&Ne.request&&Ne.request.serviceLocation&&Ne.request.requestStartDate&&Ne.request.requestEndDate&&!isNaN(Ne.request.bytesTotal)){var pe=Ne.request.serviceLocation,Me=Ne.request.requestEndDate.getTime()-Ne.request.requestStartDate.getTime();Ge(pe,parseInt(8*Ne.request.bytesTotal/Me*1e3))}}function Ae(Ne){Ne&&Ne.httpRequest&&Ne.httpRequest._serviceLocation&&!isNaN(Ne.throughput)&&Ge(Ne.httpRequest._serviceLocation,1e3*Ne.throughput)}function Ge(Ne,pe){ee[Ne]||(ee[Ne]=[]),ee[Ne].push(pe),ee[Ne].length>4&&ee[Ne].shift()}function Z(Ne,pe){if(Ne&&Ne.request&&Ne.request.serviceLocation){var Me=Ne.request.serviceLocation;V[pe].all.indexOf(Me)===-1&&V[pe].all.push(Me),V[pe].current=Me}}function le(){var Ne=Ee.getValue(),pe=He.getContentSteering(Ne);return pe||(pe=me.getServiceDescriptionSettings().contentSteering),pe}function ae(){return new Promise(function(Ne){try{var pe=le();if(!pe||!pe.serverUrl)return void Ne();var Me=function(dt){var ut=dt.serverUrl;B&&B.reloadUri&&(ut=Ze.isRelative(B.reloadUri)?Ze.resolve(B.reloadUri,dt.serverUrl):B.reloadUri);var et=[],ht=V.baseUrl.all.concat(V.location.all);if(ht.length>0){var jt=ht.map(function(Ut){var An=function(ot){if(!ot||!ee[ot]||ee[ot].length===0)return-1;var yt=ee[ot].reduce(function($t,xt){return $t+xt})/ee[ot].length;return parseInt(yt)}(Ut);return{serviceLocation:Ut,throughput:An}});jt.sort(function(Ut,An){return An.throughput-Ut.throughput});var Ht="",kt="";jt.forEach(function(Ut,An){An!==0&&(Ht="".concat(Ht,","),Ut.throughput>-1&&(kt="".concat(kt,","))),Ht="".concat(Ht).concat(Ut.serviceLocation),Ut.throughput>-1&&(kt="".concat(kt).concat(Ut.throughput))}),et.push({key:"_DASH_pathway",value:'"'.concat(Ht,'"')}),et.push({key:"_DASH_throughput",value:kt})}return ut=rn.Z.addAditionalQueryParameterToUrl(ut,et)}(pe),Xe=new ys(Me);H.load({request:Xe,success:function(dt){(function(ut){ut&&ut[v.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(ut[v.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((B=new Yr).version=ut[v.Z.CONTENT_STEERING_RESPONSE.VERSION],ut[v.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(ut[v.Z.CONTENT_STEERING_RESPONSE.TTL])&&(B.ttl=ut[v.Z.CONTENT_STEERING_RESPONSE.TTL]),ut[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(B.reloadUri=ut[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),ut[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(B.pathwayPriority=ut[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),ut[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(B.pathwayClones=ut[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],B.pathwayClones=B.pathwayClones.filter(function(et){return function(ht){return ht[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&ht[v.Z.CONTENT_STEERING_RESPONSE.ID]&&ht[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&ht[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST]}(et)})),Pe())})(dt),ge.trigger(_.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:B,url:Me}),Ne()},error:function(dt,ut,et,ht){(function(jt,Ht){try{switch(P.warn("Error fetching data from content steering server",jt),Ht.status){case 410:break;case 429:var kt=Ht&&Ht.getResponseHeader?Ht.getResponseHeader("retry-after"):null;kt!==null&&(B||(B={}),B.ttl=parseInt(kt)),Pe();break;default:Pe()}}catch(Ut){P.error(Ut)}})(dt,ht),Ne(dt)},complete:function(){V.baseUrl.all=se(V.baseUrl),V.location.all=se(V.location)}})}catch(dt){Ne(dt)}})}function se(Ne){return Ne.all&&Ne.all.length!==0&&Ne.current?Ne.all.filter(function(pe){return pe===Ne.current}):[]}function Q(Ne){try{var pe=[];return Ne&&Ne.length!==0&&B&&B.pathwayClones&&B.pathwayClones.length!==0&&B.pathwayClones.forEach(function(Me){var Xe=Ne.filter(function(jt){return Me[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===jt.serviceLocation}),dt=null;if(Xe&&Xe.length>0&&(dt=Xe[0]),dt){var ut=new URL(dt.url),et=Me[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST];et=rn.Z.stringHasProtocol(et)?et:"".concat(ut.protocol,"//").concat(et);var ht={synthesizedUrl:"".concat(et).concat(ut.pathname),serviceLocation:Me[v.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:Me[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:dt};pe.push(ht)}}),pe}catch(Me){return P.error(Me),[]}}function Pe(){B&&B.ttl&&!isNaN(B.ttl)&&(J&&clearTimeout(J),J=setTimeout(function(){ae()},1e3*B.ttl))}function be(){J&&clearTimeout(J),J=null}function Fe(){B=null,ee={},V={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},be()}return L={reset:function(){Fe(),ge.off(_.Z.FRAGMENT_LOADING_STARTED,$e,L),ge.off(_.Z.MANIFEST_LOADING_STARTED,_e,L),ge.off(_.Z.MANIFEST_LOADING_FINISHED,ke,L),ge.off(_.Z.THROUGHPUT_MEASUREMENT_STORED,Ae,L)},setConfig:function(Ne){Ne&&(Ne.adapter&&(He=Ne.adapter),Ne.errHandler&&(ne=Ne.errHandler),Ne.dashMetrics&&(fe=Ne.dashMetrics),Ne.mediaPlayerModel&&(we=Ne.mediaPlayerModel),Ne.requestModifier&&(ie=Ne.requestModifier),Ne.manifestModel&&(Ee=Ne.manifestModel),Ne.serviceDescriptionController&&(me=Ne.serviceDescriptionController),Ne.eventBus&&(ge=Ne.eventBus))},loadSteeringData:ae,getCurrentSteeringResponseData:function(){return B},shouldQueryBeforeStart:function(){var Ne=le();return!!Ne&&Ne.queryBeforeStart},getSteeringDataFromManifest:le,stopSteeringRequestTimer:be,getSynthesizedBaseUrlElements:function(Ne){try{return Q(Ne).map(function(pe){var Me=new Qn(pe.synthesizedUrl,pe.serviceLocation);return Me.queryParams=pe.queryParams,Me.dvbPriority=pe.reference.dvbPriority,Me.dvbWeight=pe.reference.dvbWeight,Me.availabilityTimeOffset=pe.reference.availabilityTimeOffset,Me.availabilityTimeComplete=pe.reference.availabilityTimeComplete,Me})}catch(pe){return P.error(pe),[]}},getSynthesizedLocationElements:function(Ne){try{return Q(Ne).map(function(pe){var Me=new Zn(pe.synthesizedUrl,pe.serviceLocation);return Me.queryParams=pe.queryParams,Me})}catch(pe){return P.error(pe),[]}},initialize:function(){H=Ao(Oe).create({errHandler:ne,dashMetrics:fe,mediaPlayerModel:we,requestModifier:ie,errors:Te}),ge.on(_.Z.FRAGMENT_LOADING_STARTED,$e,L),ge.on(_.Z.MANIFEST_LOADING_STARTED,_e,L),ge.on(_.Z.MANIFEST_LOADING_FINISHED,ke,L),ge.on(_.Z.THROUGHPUT_MEASUREMENT_STORED,Ae,L)}},P=(0,x.Z)(Oe).getInstance().getLogger(L),Fe(),L}Tc.__dashjs_factory_name="ContentSteeringController";var Aa=U.Z.getSingletonFactory(Tc);function bl(){var L,P,B,V=this.context,ee=(0,je.Z)(V).getInstance();return L={select:function(J){if(!J||J.length===0)return null;var H=null;return ee.get().streaming.applyContentSteering&&(H=function(ne){var fe=B.getCurrentSteeringResponseData();return fe&&fe.pathwayPriority&&fe.pathwayPriority.length>0?function(){for(var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ie=0,me=null,ge=function(){var He=we[ie],Oe=Ee.findIndex(function(Ze){return Ze.serviceLocation&&Ze.serviceLocation===He});if(Oe!==-1&&!P.contains(Ee[Oe].serviceLocation))return me=Ee[Oe],"break";ie+=1};ie<we.length&&ge()!=="break";);return me}(fe.pathwayPriority,ne):null}(J)),H||(H=function(ne){return ne[0]}(J)),H},setConfig:function(J){J.blacklistController&&(P=J.blacklistController),J.contentSteeringController&&(B=J.contentSteeringController)},reset:function(){P.reset()}},P=ms(V).create({updateEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),B=Aa(V).getInstance(),L}bl.__dashjs_factory_name="LocationSelector";var aa=U.Z.getClassFactory(bl);function Es(){var L,P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He=this.context,Oe=(0,m.Z)(He).getInstance(),Ze=(0,wt.Z)(He).getInstance();function $e(){B=NaN,H=!1,ee=!0,J=!1,_e()}function _e(){V!==null&&(clearTimeout(V),V=null)}function ke(be){_e(),J||(isNaN(be)&&!isNaN(B)&&(be=1e3*B),isNaN(be)||(P.debug("Refresh manifest in "+be+" milliseconds."),V=setTimeout(le,be)))}function Ae(){var be=arguments.length>0&&arguments[0]!==void 0&&arguments[0];H=!0;var Fe=fe.getValue(),Ne=Fe.url,pe=null,Me=Ee.getPatchLocation(Fe),Xe=we.select(Me),dt=null;if(Xe&&!be)Ne=Xe.url,pe=Xe.serviceLocation,dt=Xe.queryParams;else{var ut=Ge(Fe),et=we.select(ut);et&&(Ne=et.url,pe=et.serviceLocation,dt=et.queryParams)}Ze.isRelative(Ne)&&(Ne=Ze.resolve(Ne,Fe.url)),ne.load(Ne,pe,dt)}function Ge(be){var Fe=Ee.getLocation(be),Ne=me.getSynthesizedLocationElements(Fe);return Fe.concat(Ne)}function Z(be){if(be){if(Ee.getIsPatch(be)){var Fe=be;be=fe.getValue();var Ne=Ee.isPatchValid(be,Fe),pe=Ne;if(Ne){var Me=Ee.getPublishTime(be);pe=Ee.applyPatchToManifest(be,Fe);var Xe=Ee.getPublishTime(be);pe=Me.getTime()!=Xe.getTime()}if(!pe)return P.debug("Patch provided is invalid, performing full manifest refresh"),void Ae(!0);be.loadedTime=new Date}}else(be=fe.getValue()).loadedTime=new Date;if(fe.getValue()&&fe.getValue().type===v.Z.DYNAMIC&&be.type===v.Z.STATIC)return Oe.trigger(T.Z.DYNAMIC_TO_STATIC),H=!1,void(J=!0);fe.setValue(be);var dt=new Date,ut=(dt.getTime()-be.loadedTime.getTime())/1e3;1e3*(B=Ee.getManifestUpdatePeriod(be,ut))>2147483647&&(B=2147483647e-3),Oe.trigger(T.Z.MANIFEST_UPDATED,{manifest:be}),P.info("Manifest has been refreshed at "+dt+"["+dt.getTime()/1e3+"] "),ee||ke()}function le(){ee||(H?ke(ge.get().streaming.manifestUpdateRetryInterval):Ae())}function ae(be){be.error?be.error.code===Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ie.error(be.error):Z(be.manifest)}function se(){ee=!1,ke()}function Q(){(ee=!ge.get().streaming.scheduling.scheduleWhilePaused)&&_e()}function Pe(){H=!1}return L={initialize:function(){$e(),Oe.on(T.Z.STREAMS_COMPOSED,Pe,this),Oe.on(_.Z.PLAYBACK_STARTED,se,this),Oe.on(_.Z.PLAYBACK_PAUSED,Q,this),Oe.on(T.Z.INTERNAL_MANIFEST_LOADED,ae,this)},setManifest:function(be){Z(be)},refreshManifest:Ae,getIsUpdating:function(){return H},setConfig:function(be){be&&(be.manifestModel&&(fe=be.manifestModel),be.adapter&&(Ee=be.adapter),be.manifestLoader&&(ne=be.manifestLoader),be.errHandler&&(ie=be.errHandler),be.locationSelector&&(we=be.locationSelector),be.settings&&(ge=be.settings),be.contentSteeringController&&(me=be.contentSteeringController))},reset:function(){Oe.off(_.Z.PLAYBACK_STARTED,se,this),Oe.off(_.Z.PLAYBACK_PAUSED,Q,this),Oe.off(T.Z.STREAMS_COMPOSED,Pe,this),Oe.off(T.Z.INTERNAL_MANIFEST_LOADED,ae,this),$e()}},P=(0,x.Z)(He).getInstance().getLogger(L),we=aa(He).create(),L}Es.__dashjs_factory_name="ManifestUpdater";var Vr=U.Z.getClassFactory(Es);function Ha(){var L,P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He,Oe,Ze=this.context,$e=(0,m.Z)(Ze).getInstance(),_e=(0,wt.Z)(Ze).getInstance();function ke(){ne=[],fe=[],we=null,Ee=null,me=null,ie=NaN,B=!1,V=!1,ge=ee.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Ae(){ee.get().streaming.utcSynchronization.enabled&&!B&&!V&&me&&me.value&&me.schemeIdUri&&!isNaN(ie)&&!isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)&&(Ee&&(Date.now()-Ee)/1e3<30||(ne=[],V=!0,Ge(isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)?2:ee.get().streaming.utcSynchronization.backgroundAttempts)))}function Ge(et){try{if(et<=0)return void dt();var ht=Date.now();J[me.schemeIdUri](me.value,function(jt){var Ht=Date.now(),kt=le(ht,Ht,jt);ne.push(kt),Ge(et-1)},function(){dt()})}catch(jt){dt()}}function Z(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ht=et||0;if(!fe||fe.length===0||ht>=fe.length)ae();else{var jt=fe[ht];if(jt)if(J.hasOwnProperty(jt.schemeIdUri)){var Ht=new Date().getTime();J[jt.schemeIdUri](jt.value,function(kt){var Ut=new Date().getTime(),An=le(Ht,Ut,kt);me=jt,ae(An)},function(){Z(ht+1)})}else Z(ht+1);else ae()}}function le(et,ht,jt){return jt-(ht-(ht-et)/2)}function ae(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,ht=isNaN(et);ht&&ee.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?Me():Xe(ht,et)}function se(et){var ht=Date.parse(et);return isNaN(ht)&&(ht=function(jt){var Ht,kt,Ut=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(jt);return Ht=Date.UTC(parseInt(Ut[1],10),parseInt(Ut[2],10)-1,parseInt(Ut[3],10),parseInt(Ut[4],10),parseInt(Ut[5],10),Ut[6]&&(parseInt(Ut[6],10)||0),Ut[7]&&1e3*parseFloat(Ut[7])||0),Ut[9]&&Ut[10]&&(kt=60*parseInt(Ut[9],10)+parseInt(Ut[10],10),Ht+=(Ut[8]==="+"?-1:1)*kt*60*1e3),new Date(Ht).getTime()}(et)),ht}function Q(et){return Date.parse(et)}function Pe(et){return Date.parse(et)}function be(et,ht,jt){jt()}function Fe(et,ht,jt){var Ht=se(et);isNaN(Ht)?jt():ht(Ht)}function Ne(et,ht,jt,Ht,kt){var Ut,An,ot=!1,yt=new XMLHttpRequest,$t=kt?nt.w.HEAD:nt.w.GET,xt=ht.match(/\S+/g);if(ht=xt.shift(),Ut=function(){ot||(ot=!0,xt.length?Ne(et,xt.join(" "),jt,Ht,kt):Ht())},An=function(){var Jt,Wt;yt.status===200&&(Jt=kt?yt.getResponseHeader("Date"):yt.response,Wt=et(Jt),isNaN(Wt)||(jt(Wt),ot=!0))},_e.isRelative(ht)){var en=Oe.resolve();en&&(ht=_e.resolve(ht,en.url))}yt.open($t,ht),yt.timeout=5e3,yt.onload=An,yt.onloadend=Ut,yt.send()}function pe(et,ht,jt){Ne(Pe,et,ht,jt,!0)}function Me(){var et=H.getLatestMPDRequestHeaderValueByID("Date"),ht=et!==null?new Date(et).getTime():Number.NaN;isNaN(ht)?Xe(!0):Xe(!1,ht-Date.now())}function Xe(et,ht){if(isNaN(ie)||isNaN(ht)||et||function(Ht){try{var kt,Ut=ut(Ht),An=isNaN(ge)?30:ge,ot=isNaN(ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,yt=isNaN(ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,$t=isNaN(ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Ut?(kt=Math.min(An*ot,yt),P.debug("Increasing timeBetweenSyncAttempts to ".concat(kt))):(kt=Math.max(An/ot,$t),P.debug("Decreasing timeBetweenSyncAttempts to ".concat(kt))),ge=kt}catch(xt){}}(ht),!et&&!isNaN(ht)){we=Date.now(),B=!1;var jt=isNaN(ie);ie=ht,jt&&Ae(),P.debug("Completed UTC sync. Setting client - server offset to ".concat(ht))}et&&(me=null,B=!1,He.error(new ce.Z(Te.TIME_SYNC_FAILED_ERROR_CODE,Te.TIME_SYNC_FAILED_ERROR_MESSAGE))),$e.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ht}),$e.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED)}function dt(){if(ne&&ne.length!==0){var et=ne.reduce(function(ht,jt){return ht+jt},0)/ne.length;ut(et)?P.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(P.debug("Completed background UTC sync. Setting client - server offset to ".concat(et)),ie=et,$e.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ie})),V=!1,Ee=Date.now()}}function ut(et){try{if(isNaN(ie))return!0;var ht=ee.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(ee.get().streaming.utcSynchronization.maximumAllowedDrift)?ee.get().streaming.utcSynchronization.maximumAllowedDrift:100;return et>=ie-ht&&et<=ie+ht}catch(jt){return!0}}return L={initialize:function(){ke(),J={"urn:mpeg:dash:utc:http-head:2014":pe,"urn:mpeg:dash:utc:http-xsdate:2014":Ne.bind(null,se),"urn:mpeg:dash:utc:http-iso:2014":Ne.bind(null,Q),"urn:mpeg:dash:utc:direct:2014":Fe,"urn:mpeg:dash:utc:http-head:2012":pe,"urn:mpeg:dash:utc:http-xsdate:2012":Ne.bind(null,se),"urn:mpeg:dash:utc:http-iso:2012":Ne.bind(null,Q),"urn:mpeg:dash:utc:direct:2012":Fe,"urn:mpeg:dash:utc:http-ntp:2014":be,"urn:mpeg:dash:utc:ntp:2014":be,"urn:mpeg:dash:utc:sntp:2014":be}},attemptSync:function(et,ht){fe=et,B||(function(jt){try{if(!jt||!ee.get().streaming.utcSynchronization.enabled)return!1;var Ht=isNaN(ge)?30:ge;return!(we&&Ht&&!isNaN(Ht))||(Date.now()-we)/1e3>=Ht}catch(kt){return!0}}(ht)?(B=!0,Z()):$e.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(et){et&&(et.dashMetrics&&(H=et.dashMetrics),et.baseURLController&&(Oe=et.baseURLController),et.errHandler&&(He=et.errHandler),et.settings&&(ee=et.settings))},reset:function(){ke(),$e.off(T.Z.ATTEMPT_BACKGROUND_SYNC,Ae,L)}},P=(0,x.Z)(Ze).getInstance().getLogger(L),$e.on(T.Z.ATTEMPT_BACKGROUND_SYNC,Ae,L),L}Ha.__dashjs_factory_name="TimeSyncController";var Ka=U.Z.getSingletonFactory(Ha);Ka.HTTP_TIMEOUT_MS=5e3,U.Z.updateSingletonFactory(Ha.__dashjs_factory_name,Ka);var Va=Ka;function xf(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance();return L={attachMediaSource:function(ne){var fe=window.URL.createObjectURL(P);return ne.setSource(fe),V==="managedMediaSource"&&(ne.setDisableRemotePlayback(!0),P.addEventListener("startstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),P.addEventListener("endstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),fe},createMediaSource:function(){var ne="WebKitMediaSource"in window,fe="MediaSource"in window;return"ManagedMediaSource"in window?(P=new ManagedMediaSource,V="managedMediaSource",ee.info("Created ManagedMediaSource")):fe?(P=new MediaSource,V="mediaSource",ee.info("Created MediaSource")):ne&&(P=new WebKitMediaSource,ee.info("Created WebkitMediaSource")),P},detachMediaSource:function(ne){ne.setSource(null)},setConfig:function(ne){ne&&ne.settings&&(B=ne.settings)},setDuration:function ne(fe){P&&P.readyState==="open"&&(fe===null&&isNaN(fe)||P.duration!==fe&&(fe!==1/0||B.get().streaming.buffer.mediaSourceDurationInfinity||(fe=Math.pow(2,32)),function(we){for(var Ee=we.sourceBuffers,ie=0;ie<Ee.length;ie++)if(Ee[ie].updating)return!0;return!1}(P)?setTimeout(ne.bind(null,fe),50):(ee.info("Set MediaSource duration:"+fe),P.duration=fe)))},setSeekable:function(ne,fe){P&&typeof P.setLiveSeekableRange=="function"&&typeof P.clearLiveSeekableRange=="function"&&P.readyState==="open"&&ne>=0&&ne<fe&&(P.clearLiveSeekableRange(),P.setLiveSeekableRange(ne,fe))},signalEndOfStream:function(ne){if(ne&&ne.readyState==="open"){for(var fe=ne.sourceBuffers,we=0;we<fe.length;we++)if(fe[we].updating||fe[we].buffered.length===0)return;ee.info("call to mediaSource endOfStream"),ne.endOfStream()}}},ee=(0,x.Z)(J).getInstance().getLogger(L),L}xf.__dashjs_factory_name="MediaSourceController";var Ch=U.Z.getSingletonFactory(xf);function bo(){var L,P,B,V,ee,J,H,ne,fe,we,Ee,ie="urn:mpeg:dash:event:2012",me="discarded",ge="updated",He="added",Oe=this.context,Ze=(0,m.Z)(Oe).getInstance();function $e(){if(!H||!ne)throw new Error("setConfig function has to be called previously")}function _e(){Ee=!1,B={},V={},ee=null,we=!1,J=Date.now()/1e3}function ke(){try{if(!we){we=!0;var be=ne.getTime(),Fe=be-J;Fe=J>0?Math.max(0,Fe):0,Ae(V,Fe,be),Ae(B,Fe,be),Ge(V),Ge(B),J=be,we=!1}}catch(Ne){we=!1,P.error(Ne)}}function Ae(be,Fe,Ne){try{se(be,function(pe){if(pe!==void 0){var Me=isNaN(pe.duration)?0:pe.duration;pe.calculatedPresentationTime<=Ne&&pe.calculatedPresentationTime+Fe+Me>=Ne?Pe(pe,_.Z.EVENT_MODE_ON_START):(Q(Ne,Me+Fe,pe.calculatedPresentationTime)||function(Xe){try{var dt=Xe.eventStream.period.start+Xe.eventStream.period.duration;return Xe.calculatedPresentationTime>dt}catch(ut){return P.error(ut),!1}}(pe))&&(P.debug("Removing event ".concat(pe.id," from period ").concat(pe.eventStream.period.id," as it is expired or invalid")),function(Xe,dt){try{var ut=dt.eventStream.schemeIdUri,et=dt.eventStream.period.id,ht=dt.eventStream.value,jt=dt.id;Xe[et][ut]=Xe[et][ut].filter(function(Ht){return ht&&Ht.eventStream.value&&Ht.eventStream.value!==ht||Ht.id!==jt}),Xe[et][ut].length===0&&delete Xe[et][ut]}catch(Ht){P.error(Ht)}}(be,pe))}})}catch(pe){P.error(pe)}}function Ge(be){try{for(var Fe in be)be.hasOwnProperty(Fe)&&Object.keys(be[Fe]).length===0&&delete be[Fe]}catch(Ne){P.error(Ne)}}function Z(be,Fe){var Ne=arguments.length>2&&arguments[2]!==void 0&&arguments[2],pe=be.eventStream.schemeIdUri,Me=be.eventStream.value,Xe=be.id,dt=me;Fe[pe]||(Fe[pe]=[]);var ut=Fe[pe].findIndex(function(ht){return(!Me||ht.eventStream.value&&ht.eventStream.value===Me)&&ht.id===Xe});if(ut===-1)Fe[pe].push(be),be.triggeredReceivedEvent=!1,be.triggeredStartEvent=!1,dt=He;else if(Ne){var et=Fe[pe][ut];be.triggeredReceivedEvent=et.triggeredReceivedEvent,be.triggeredStartEvent=et.triggeredStartEvent,Fe[pe][ut]=be,dt=ge}return dt}function le(be){try{if(be.eventStream.value==1){var Fe,Ne=be.calculatedPresentationTime;Fe=be.calculatedPresentationTime==4294967295?NaN:be.calculatedPresentationTime+be.duration,Ze.trigger(_.Z.MANIFEST_VALIDITY_CHANGED,{id:be.id,validUntil:Ne,newDuration:Fe,newManifestValidAfter:NaN},{mode:_.Z.EVENT_MODE_ON_START})}}catch(pe){P.error(pe)}}function ae(be){try{var Fe=ne.getTime();se(be,function(Ne){var pe=Ne.eventStream&&Ne.eventStream.period&&!isNaN(Ne.eventStream.period.duration)?Ne.eventStream.period.duration:NaN,Me=Ne.eventStream&&Ne.eventStream.period&&!isNaN(Ne.eventStream.period.start)?Ne.eventStream.period.start:NaN;if(!isNaN(pe)&&!isNaN(Me)){var Xe=Ne.calculatedPresentationTime;Math.abs(Xe-Fe)<300&&Pe(Ne,_.Z.EVENT_MODE_ON_START)}})}catch(Ne){P.error(Ne)}}function se(be,Fe){try{if(be)for(var Ne=Object.keys(be),pe=0;pe<Ne.length;pe++)for(var Me=be[Ne[pe]],Xe=Object.keys(Me),dt=0;dt<Xe.length;dt++)Me[Xe[dt]].forEach(function(ut){ut!==void 0&&Fe(ut)})}catch(ut){P.error(ut)}}function Q(be,Fe,Ne){try{return be-Fe>Ne}catch(pe){return P.error(pe),!1}}function Pe(be,Fe){try{var Ne=ne.getTime(),pe=be.id;if(Fe===_.Z.EVENT_MODE_ON_RECEIVE&&!be.triggeredReceivedEvent)return P.debug("Received event ".concat(pe)),be.triggeredReceivedEvent=!0,void Ze.trigger(be.eventStream.schemeIdUri,{event:be},{mode:Fe});be.triggeredStartEvent||(be.eventStream.schemeIdUri===ie&&be.eventStream.value==1?be.duration===0&&be.presentationTimeDelta===0||(P.debug("Starting manifest refresh event ".concat(pe," at ").concat(Ne)),function(){try{$e(),H.refreshManifest()}catch(Me){P.error(Me)}}()):be.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&be.eventStream.value==1?(P.debug("Starting callback event ".concat(pe," at ").concat(Ne)),function(Me){try{(0,nn.Z)(Oe).create({}).load({method:"get",url:Me,request:{responseType:"arraybuffer"}})}catch(Xe){P.error(Xe)}}(be.messageData)):(P.debug("Starting event ".concat(pe," from period ").concat(be.eventStream.period.id," at ").concat(Ne)),Ze.trigger(be.eventStream.schemeIdUri,{event:be},{mode:Fe})),be.triggeredStartEvent=!0)}catch(Me){P.error(Me)}}return L={addInlineEvents:function(be,Fe){try{if($e(),B[Fe]||(B[Fe]={}),be)for(var Ne=0;Ne<be.length;Ne++){var pe=be[Ne];if(!Q(ne.getTime(),isNaN(pe.duration)?0:pe.duration,pe.calculatedPresentationTime)){var Me=Z(pe,B[Fe],!0);Me===He?(P.debug("Added inline event with id ".concat(pe.id," from period ").concat(Fe)),Pe(pe,_.Z.EVENT_MODE_ON_RECEIVE)):Me===ge&&P.debug("Updated inline event with id ".concat(pe.id," from period ").concat(Fe))}}}catch(Xe){throw Xe}},addInbandEvents:function(be,Fe){try{$e(),V[Fe]||(V[Fe]={});for(var Ne=0;Ne<be.length;Ne++){var pe=be[Ne];Q(ne.getTime(),isNaN(pe.duration)?0:pe.duration,pe.calculatedPresentationTime)||(Z(pe,V[Fe],!1)===He?(pe.eventStream.schemeIdUri===ie&&le(pe),P.debug("Added inband event with id ".concat(pe.id," from period ").concat(Fe)),Pe(pe,_.Z.EVENT_MODE_ON_RECEIVE)):P.debug("Inband event with scheme_id_uri ".concat(pe.eventStream.schemeIdUri,", value ").concat(pe.eventStream.value,", period id ").concat(Fe," and event id ").concat(pe.id," was ignored because it has been added before.")))}ke()}catch(Me){throw Me}},getInbandEvents:function(){return V},getInlineEvents:function(){return B},start:function(){try{$e(),P.debug("Start Event Controller");var be=fe.get().streaming.eventControllerRefreshDelay;Ee||isNaN(be)||(Ee=!0,ee=setInterval(ke,be))}catch(Fe){throw Fe}},setConfig:function(be){try{if(!be)return;be.manifestUpdater&&(H=be.manifestUpdater),be.playbackController&&(ne=be.playbackController),be.settings&&(fe=be.settings)}catch(Fe){throw Fe}},reset:function(){(function(){try{ee!==null&&Ee&&(clearInterval(ee),ee=null,Ee=!1,function(){try{ae(V),ae(B)}catch(be){P.error(be)}}())}catch(be){throw be}})(),_e()}},P=(0,x.Z)(Oe).getInstance().getLogger(L),_e(),L}bo.__dashjs_factory_name="EventController";var am=U.Z.getSingletonFactory(bo),Oi={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Mf(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function cu(){var L,P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He,Oe,Ze,$e,_e,ke,Ae,Ge,Z,le,ae,se,Q,Pe,be,Fe,Ne,pe,Me,Xe,dt,ut,et,ht,jt,Ht,kt,Ut,An,ot,yt,$t,xt,en,Jt=this.context,Wt=(0,m.Z)(Jt).getInstance();function Dn(){if(!(J&&J.hasOwnProperty("load")&&Ae&&Ae.hasOwnProperty("initialize")&&Ae.hasOwnProperty("reset")&&Ae.hasOwnProperty("getClientTimeOffset")&&H&&ke&&fe&&Me))throw new Error(y.Z.MISSING_CONFIG_ERROR)}function Nn(){if(!ee||!ee.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function rr(){(function(){try{var Pt=ne.getStreamsInfo();if(!Z&&Pt.length===0)throw new Error("There are no periods in the MPD");Z&&Pt.length>0&&fe.updateManifestUpdateInfo({currentTime:Me.getTime(),buffered:pe.getBufferRange(),presentationStartTime:Pt[0].start,clientTimeOffset:Ae.getClientTimeOffset()}),Ge.length>0&&function(Ir){Ir.length!==0?Ge=Ge.filter(function(fr){var ri=Ir.filter(function(Qr){return Qr.id===fr.getId()}).length>0||fr.getId()===Z.getId();return ri||(P.debug("Removing stream ".concat(fr.getId())),fr.reset(!0)),ri}):P.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Pt);for(var yn=[],Hn=0,ur=Pt.length;Hn<ur;Hn++){var Tr=Pt[Hn];yn.push(It(Tr)),fe.addManifestUpdateStreamInfo(Tr)}Promise.all(yn).then(function(){return new Promise(function(Ir,fr){Z?Ir():Xt(Pt,Ir,fr)})}).then(function(){Wt.trigger(T.Z.STREAMS_COMPOSED),Tn()}).catch(function(Ir){throw Ir})}catch(Ir){ke.error(new ce.Z(Te.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Ir.message+" nostreamscomposed",H.getValue())),Fe=!0,Qa()}})()}function ir(){yt=!0}function It(Pt){var yn=jc(Pt.id);return yn?yn.updateData(Pt):(yn=vs(Jt).create({manifestModel:H,mediaPlayerModel:dt,dashMetrics:fe,manifestUpdater:ee,adapter:ne,timelineConverter:Ae,capabilities:B,capabilitiesFilter:V,errHandler:ke,baseURLController:me,segmentBaseController:ge,textController:ae,abrController:Oe,playbackController:Me,eventController:$e,mediaController:Ze,protectionController:le,videoModel:pe,streamInfo:Pt,settings:ot}),Ge.push(yn),yn.initialize(),Promise.resolve())}function Xt(Pt,yn,Hn){try{On();var ur=fe.getCurrentDVRInfo().range;if(ur.end<ur.start){$t&&clearTimeout($t);var Tr=Math.min(1e3*(-1*(ur.end-ur.start)+2),2147483647);return P.debug("Waiting for ".concat(Tr," ms before playback can start")),Wt.trigger(T.Z.AST_IN_FUTURE,{delay:Tr}),void($t=setTimeout(function(){Xt(Pt,yn,Hn)},Tr))}ot.get().streaming.applyProducerReferenceTime&&Xe.calculateProducerReferenceTimeOffsets(Pt);var Ir=Pt[0].manifestInfo;if(ot.get().streaming.applyServiceDescription&&Xe.applyServiceDescription(Ir),ne.getIsDynamic()){var fr=Qu(Pt,Ir);Me.computeAndSetLiveDelay(fr,Ir)}(ot.get().streaming.applyContentSteering&&ie.shouldQueryBeforeStart()?ie.loadSteeringData():Promise.resolve()).then(function(){var ri=H.getValue();ri&&me.update(ri),Gt(),yn()}).catch(function(ri){P.error(ri),Gt(),yn()})}catch(ri){Hn(ri)}}function Gt(){var Pt=function(){var ur;if(ne.getIsDynamic()){var Tr=fe.getCurrentDVRInfo();ur=(Tr&&Tr.range?Tr.range.end:0)-Me.getOriginalLiveDelay();var Ir=Tr?Tr.range:null;if(Ir){if(isNaN(xt)&&xt.toString().indexOf("posix:")===-1){var fr=io(!0);isNaN(fr)||(P.info("Start time from URI parameters: ".concat(fr)),ur=Math.min(ur,fr))}else{P.info("Start time provided by the app: ".concat(xt));var ri=Zi(!0,xt);isNaN(ri)||(ur=Math.min(ur,ri))}var Qr=ot.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;ur=Math.max(ur,Ir.start+Qr)}}else if(ur=Zs()[0].getStreamInfo().start,isNaN(xt)){var Gs=io(!1);isNaN(Gs)||(P.info("Start time from URI parameters: ".concat(Gs)),ur=Math.max(ur,Gs))}else{P.info("Start time provided by the app: ".concat(xt));var qs=Zi(!1,xt);isNaN(qs)||(ur=Math.max(ur,qs))}return ur}(),yn=Lt(Pt),Hn=yn!==null?yn:Ge[0];Wt.trigger(T.Z.INITIAL_STREAM_SWITCH,{startTime:Pt}),un(Hn,null,Pt),Ht||(Ht=setInterval(function(){!Pe&&Me.getTimeToStreamEnd()<=0&&!Me.isSeeking()&&Wt.trigger(T.Z.PLAYBACK_ENDED,{isLast:ca().isLast})},200))}function un(Pt,yn,Hn){try{if(Pe||!Pt||yn===Pt&&Pt.getIsActive())return;Pe=!0,Wt.trigger(T.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:yn?yn.getStreamInfo():null,toStreamInfo:Pt.getStreamInfo()});var ur=!1;Z=Pt,yn&&(ur=Sn(Pt,yn),yn.deactivate(ur)),Hn=isNaN(Hn)?!ur&&yn?Pt.getStreamInfo().start:NaN:Hn,P.info("Switch to stream ".concat(Pt.getId(),". Seektime is ").concat(Hn,", current playback time is ").concat(Me.getTime(),". Seamless period switch is set to ").concat(ur)),Ut=Ut.filter(function(Tr){return Tr.getId()!==Z.getId()}),Me.initialize(ca(),!!yn),pe.getElement()?vn(Hn,ur,!1):Pn(Hn,ur)}catch(Tr){Pe=!1}}function vn(Pt,yn){var Hn,ur=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function Tr(){if(Ne&&Ne.readyState==="open"){P.debug("MediaSource is open!"),window.URL.revokeObjectURL(Hn),Ne.removeEventListener("sourceopen",Tr),Ne.removeEventListener("webkitsourceopen",Tr),zr();var fr=fe.getCurrentDVRInfo();we.setSeekable(fr.range.start,fr.range.end),ur?(isNaN(Pt)||Me.seek(Pt,!0,!0),Z.setMediaSource(Ne).then(function(){Z.initializeForTextWithMediaSource(Ne)})):Pn(Pt,yn)}}function Ir(){Ne.addEventListener("sourceopen",Tr,!1),Ne.addEventListener("webkitsourceopen",Tr,!1),Hn=we.attachMediaSource(pe),P.debug("MediaSource attached to element.  Waiting on open...")}Ne?yn?Pn(Pt,yn):(we.detachMediaSource(pe),Ir()):(Ne=we.createMediaSource(),Ir())}function Pn(Pt,yn){Z.activate(Ne,yn?kt:void 0,Pt).then(function(Hn){if(Hn){var ur=Object.keys(Hn);ur.length>0&&Hn[ur[0]].getBuffer().changeType&&(An=!0),kt=Hn}isNaN(Pt)||(Wt.trigger(T.Z.SEEK_TARGET,{time:Pt},{streamId:Z.getId()}),Me.seek(Pt,!1,!0),Z.startScheduleControllers()),Pe=!1,Wt.trigger(T.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:ca()})})}function xn(Pt){var yn=Lt(Pt.seekTime);yn&&yn!==Z?yn&&yn!==Z&&(Fn(),function(Hn,ur){var Tr=Hn&&!isNaN(Hn.seekTime)?Hn.seekTime:NaN,Ir=Z.getProcessors().map(function(fr){return fr.prepareOuterPeriodPlaybackSeeking(Hn)});Promise.all(Ir).then(function(){un(ur,Z,Tr)}).catch(function(fr){ke.error(fr)})}(Pt,yn)):(Fn(),function(Hn){Z.getProcessors().forEach(function(ur){return ur.prepareInnerPeriodPlaybackSeeking(Hn)}),Po(tt.USER_REQUEST_STOP_REASON)}(Pt)),yu(at.SEEK_START_REASON)}function Fn(){Gn()}function Gn(){Ut&&Ut.length>0&&(Ut.forEach(function(Pt){Pt.deactivate(!0)}),Ut=[])}function bt(Pt){if(Pt.newMediaInfo.streamInfo.id===Z.getId()){if(Gn(),ot.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&Pt.oldMediaInfo&&Pt.oldMediaInfo.codec!==Pt.newMediaInfo.codec){var yn=Me.getTime();return Z.deactivate(!1),void vn(yn,!1,!1)}Z.prepareTrackChange(Pt)}}function Sn(Pt,yn){try{return ot.get().streaming.buffer.reuseExistingSourceBuffers&&(yn.isProtectionCompatible(Pt)||yt)&&(An&&ot.get().streaming.buffer.useChangeTypeForTrackSwitch||yn.isMediaCodecCompatible(Pt,yn))}catch(Hn){return!1}}function En(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Ne&&!Pt.getPreloaded()){var Hn=Sn(Pt,yn);Hn&&Pt.startPreloading(Ne,kt).then(function(){Ut.push(Pt)})}}function Lt(Pt){if(isNaN(Pt))return null;for(var yn=Ge.length,Hn=0;Hn<yn;Hn++){var ur=Ge[Hn];if(Pt<parseFloat((ur.getStartTime()+ur.getDuration()).toFixed(5)))return ur}return null}function On(){try{var Pt=ne.getIsDynamic(),yn=ne.getStreamsInfo()[0].manifestInfo,Hn=Me.getTime(),ur=Ae.calcTimeShiftBufferWindow(Ge,Pt),Tr=Zr();if(ur.start===void 0||ur.end===void 0)return;Tr&&Tr.length!==0?Tr.forEach(function(Ir){fe.addDVRInfo(Ir.getType(),Hn,yn,ur)}):fe.addDVRInfo(y.Z.VIDEO,Hn,yn,ur)}catch(Ir){}}function lt(Pt){if(ht&&Q){var yn=dt.getInitialBufferLevel(),Hn=[y.Z.TEXT];(isNaN(yn)||yn<=Me.getBufferLevel(Hn)||ne.getIsDynamic()&&yn>Me.getLiveDelay())&&(ht=!1,yu(at.INITIAL_PLAYOUT_START_REASON),Me.play())}Pt&&Pt.mediaType&&fe.addBufferLevel(Pt.mediaType,new Date,1e3*Pt.bufferLevel)}function rt(Pt){Pt.streamInfo.id===Z.getId()&&Pt.reason&&Pt.reason.forceReplace&&Gn(),jc(Pt.streamInfo.id).prepareQualityChange(Pt)}function Kt(){if(ne.getIsDynamic()&&Me.getOriginalLiveDelay()!==0&&Z){var Pt=ne.getStreamsInfo();if(Pt.length>0){var yn=Pt[0].manifestInfo,Hn=Qu(Pt,yn);Me.computeAndSetLiveDelay(Hn,yn)}}}function ze(){if(Xa()){var Pt=pe.getPlaybackQuality();Pt&&fe.addDroppedFrames(Pt)}}function Ve(){P.debug("[onPlaybackStarted]"),!ht&&et&&yu(at.RESUME_FROM_PAUSE_START_REASON),ht&&(ht=!1),jt&&(jt=!1,ot.get().streaming.applyContentSteering&&!ie.shouldQueryBeforeStart()&&ie.loadSteeringData()),et=!1}function Dt(Pt){P.debug("[onPlaybackPaused]"),Pt.ended||(et=!0,Po(tt.USER_REQUEST_STOP_REASON))}function fn(Pt){P.debug("Stream with id ".concat(Pt.streamInfo.id," finished buffering"));var yn=Pt.streamInfo.isLast;Ne&&yn?(P.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),we.signalEndOfStream(Ne)):Tn()}function Tn(){if(Z&&Z.getHasFinishedBuffering())for(var Pt=function(){var Tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var Ir=Tr||Z||null;if(Ir){var fr=Ir.getStreamInfo();return Ge.filter(function(ri){var Qr=ri.getStreamInfo();return Qr.start>fr.start&&fr.id!==Qr.id})}}catch(ri){return[]}}(Z),yn=0;yn<Pt.length;){var Hn=Pt[yn],ur=yn===0?Z:Pt[yn-1];!Hn.getPreloaded()&&ur.getHasFinishedBuffering()&&Ne&&En(Hn,ur),yn+=1}}function sr(){Ht&&(clearInterval(Ht),Ht=null)}function Zr(){return Z?Z.getProcessors():[]}function Ii(Pt){if(Z&&!Z.getIsEndedEventSignaled()){Z.setIsEndedEventSignaled(!0);var yn=function(){var Hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ur=Hn||Z||null;if(!ur)return null;for(var Tr=ur.getStreamInfo(),Ir=Tr.start,fr=0,ri=-1,Qr=NaN;fr<Ge.length;){var Gs=Ge[fr].getStreamInfo(),qs=Gs.start-Ir;qs>0&&(isNaN(Qr)||qs<Qr)&&Tr.id!==Gs.id&&(Qr=qs,ri=fr),fr+=1}return ri>=0?Ge[ri]:null}();yn?(P.debug("StreamController onEnded, found next stream with id ".concat(yn.getStreamInfo().id,". Switching from ").concat(Z.getStreamInfo().id," to ").concat(yn.getStreamInfo().id)),un(yn,Z,NaN)):(P.debug("StreamController no next stream found"),Z.setIsEndedEventSignaled(!1)),Po(yn?tt.END_OF_PERIOD_STOP_REASON:tt.END_OF_CONTENT_STOP_REASON)}Pt&&Pt.isLast&&(sr(),ie.stopSteeringRequestTimer())}function zr(Pt){var yn=Pt||ca().manifestInfo.duration;we.setDuration(yn)}function io(Pt){var yn=He.getURIFragmentData();if(!yn||!yn.t)return NaN;var Hn=Zs()[0].getStreamInfo().start;return yn.t=yn.t.split(",")[0],Bs(Pt,yn.t,Hn)}function Zi(Pt,yn){var Hn=0;return Pt||(Hn=Zs()[0].getStreamInfo().start),Bs(Pt,yn,Hn)}function Bs(Pt,yn,Hn){var ur=ne.getRegularPeriods()[0],Tr=yn.toString(),Ir=Tr.indexOf("posix:")!==-1?Tr.substring(6)==="now"?Date.now()/1e3:parseFloat(Tr.substring(6)):NaN;return Pt&&!isNaN(Ir)?Ae.calcPresentationTimeFromWallTime(new Date(1e3*Ir),ur):parseFloat(Tr)+Hn}function Qu(Pt,yn){try{var Hn=NaN;if(yn&&!isNaN(yn.maxFragmentDuration)&&isFinite(yn.maxFragmentDuration))return yn.maxFragmentDuration;if(Pt&&Pt.length===1){var ur=Pt[0],Tr=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT].reduce(function(fr,ri){var Qr=ne.getMediaInfoForType(ur,ri);return Qr&&Qr.isFragmented!==!1&&fr.push(Qr),fr},[]).reduce(function(fr,ri){var Qr=ne.getVoRepresentations(ri);return Qr&&Qr.length>0&&Qr.forEach(function(Gs){Gs&&fr.push(Gs)}),fr},[]).reduce(function(fr,ri){var Qr=ne.convertRepresentationToRepresentationInfo(ri);return Qr&&Qr.fragmentDuration&&!isNaN(Qr.fragmentDuration)&&fr.push(Qr.fragmentDuration),fr},[]);Hn=Math.max.apply(Math,function(fr){if(Array.isArray(fr))return Mf(fr)}(Ir=Tr)||function(fr){if(typeof Symbol<"u"&&Symbol.iterator in Object(fr))return Array.from(fr)}(Ir)||function(fr,ri){if(fr){if(typeof fr=="string")return Mf(fr,ri);var Qr=Object.prototype.toString.call(fr).slice(8,-1);return Qr==="Object"&&fr.constructor&&(Qr=fr.constructor.name),Qr==="Map"||Qr==="Set"?Array.from(fr):Qr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qr)?Mf(fr,ri):void 0}}(Ir)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(Hn)?Hn:NaN}catch(fr){return NaN}var Ir}function Ju(Pt){if(Pt.error)Fe=!0,Qa();else{P.info("Manifest updated... updating data system wide.");var yn=Pt.manifest;ne.updatePeriods(yn);var Hn=ne.getUTCTimingSources();!ne.getIsDynamic()||Hn&&Hn.length!==0||Wt.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Oi.LEVELS.WARNING,event:Oi.EVENTS.NO_UTC_TIMING_ELEMENT});var ur=ne.getIsDynamic()?Hn.concat(ut.getUTCTimingSources()):Hn;V.filterUnsupportedFeatures(yn).then(function(){me.initialize(yn),Ee.attemptSync(ur,ne.getIsDynamic())})}}function Xa(){return!!Z&&Z.getHasVideoTrack()}function js(){return!!Z&&Z.getHasAudioTrack()}function Po(Pt,yn){yn=yn||new Date,Zr().forEach(function(Hn){Hn.finalisePlayList(yn,Pt)}),fe.addPlayList()}function yu(Pt){fe.createPlaylistMetrics(1e3*Me.getTime(),Pt)}function Eu(Pt){if(Pt.error){var yn="";switch(Pt.error.code){case 1:yn="MEDIA_ERR_ABORTED";break;case 2:yn="MEDIA_ERR_NETWORK";break;case 3:yn="MEDIA_ERR_DECODE",en.counts.mediaErrorDecode+=1;break;case 4:yn="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:yn="MEDIA_ERR_ENCRYPTED";break;default:yn="UNKNOWN"}yn==="MEDIA_ERR_DECODE"&&ot.get().errors.recoverAttempts.mediaErrorDecode>=en.counts.mediaErrorDecode?function(){P.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Hn=Me.getTime();Z.deactivate(!1),P.warn("MediaSource has been resetted. Resuming playback from time ".concat(Hn)),vn(Hn,!1,!1)}():(be=!0,Pt.error.message&&(yn+=" ("+Pt.error.message+")"),Pt.error.msExtendedCode&&(yn+=" (0x"+(Pt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),P.fatal("Video Element Error: "+yn),Pt.error&&P.fatal(Pt.error),ke.error(new ce.Z(Pt.error.code,yn)),Qa())}}function ca(){return Z?Z.getStreamInfo():null}function jc(Pt){for(var yn=0,Hn=Ge.length;yn<Hn;yn++)if(Ge[yn].getId()===Pt)return Ge[yn];return null}function Qf(Pt){isNaN(Pt.newDuration)||zr(Pt.newDuration)}function el(){Ge=[],xt=NaN,le=null,Pe=!1,Z=null,be=!1,Fe=!1,ht=!0,jt=!0,et=!1,Q=!0,Ht=null,yt=!1,An=!1,Ut=[],$t=null,en={counts:{mediaErrorDecode:0}}}function Qa(){Dn(),Ee.reset(),Po(be||Fe?tt.FAILURE_STOP_REASON:tt.USER_REQUEST_STOP_REASON);for(var Pt=0,yn=Ge?Ge.length:0;Pt<yn;Pt++)Ge[Pt].reset(be);Wt.off(_.Z.PLAYBACK_TIME_UPDATED,ze,L),Wt.off(_.Z.PLAYBACK_SEEKING,xn,L),Wt.off(_.Z.PLAYBACK_ERROR,Eu,L),Wt.off(_.Z.PLAYBACK_STARTED,Ve,L),Wt.off(_.Z.PLAYBACK_PAUSED,Dt,L),Wt.off(_.Z.PLAYBACK_ENDED,Ii,L),Wt.off(_.Z.METRIC_ADDED,Zc,L),Wt.off(_.Z.MANIFEST_VALIDITY_CHANGED,Qf,L),Wt.off(_.Z.BUFFER_LEVEL_UPDATED,lt,L),Wt.off(_.Z.QUALITY_CHANGE_REQUESTED,rt,L),T.Z.KEY_SESSION_UPDATED&&Wt.off(T.Z.KEY_SESSION_UPDATED,ir,L),Wt.off(T.Z.MANIFEST_UPDATED,Ju,L),Wt.off(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Wt.off(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Wt.off(T.Z.CURRENT_TRACK_CHANGED,bt,L),Wt.off(T.Z.SETTING_UPDATED_LIVE_DELAY,Kt,L),Wt.off(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Kt,L),me.reset(),ee.reset(),$e.reset(),fe.clearAllCurrentMetrics(),H.setValue(null),J.reset(),Ae.reset(),_e.reset(),Ne&&(we.detachMediaSource(pe),Ne=null),pe=null,le&&(le=null,se=null,H.getValue()&&Wt.trigger(T.Z.PROTECTION_DESTROYED,{data:H.getValue().url})),sr(),Wt.trigger(T.Z.STREAM_TEARDOWN_COMPLETE),el()}function Zc(Pt){if(Pt.metric===D.Z.DVR_INFO){var yn=js()?y.Z.AUDIO:y.Z.VIDEO;Pt.mediaType===yn&&we.setSeekable(Pt.value.range.start,Pt.value.range.end)}}function Zs(){return Ge}return L={initialize:function(Pt,yn){Dn(),Q=Pt,se=yn,Ae.initialize(),(ee=Vr(Jt).create()).setConfig({manifestModel:H,adapter:ne,manifestLoader:J,errHandler:ke,settings:ot,contentSteeringController:ie}),ee.initialize(),($e=am(Jt).getInstance()).setConfig({manifestUpdater:ee,playbackController:Me,settings:ot}),$e.start(),Ee.setConfig({dashMetrics:fe,baseURLController:me,errHandler:ke,settings:ot}),Ee.initialize(),we.setConfig({settings:ot}),le&&(Wt.trigger(T.Z.PROTECTION_CREATED,{controller:le}),le.setMediaElement(pe.getElement()),se&&le.setProtectionData(se)),Wt.on(_.Z.PLAYBACK_TIME_UPDATED,ze,L),Wt.on(_.Z.PLAYBACK_SEEKING,xn,L),Wt.on(_.Z.PLAYBACK_ERROR,Eu,L),Wt.on(_.Z.PLAYBACK_STARTED,Ve,L),Wt.on(_.Z.PLAYBACK_PAUSED,Dt,L),Wt.on(_.Z.PLAYBACK_ENDED,Ii,L),Wt.on(_.Z.METRIC_ADDED,Zc,L),Wt.on(_.Z.MANIFEST_VALIDITY_CHANGED,Qf,L),Wt.on(_.Z.BUFFER_LEVEL_UPDATED,lt,L),Wt.on(_.Z.QUALITY_CHANGE_REQUESTED,rt,L),T.Z.KEY_SESSION_UPDATED&&Wt.on(T.Z.KEY_SESSION_UPDATED,ir,L),Wt.on(T.Z.MANIFEST_UPDATED,Ju,L),Wt.on(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Wt.on(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Wt.on(T.Z.CURRENT_TRACK_CHANGED,bt,L),Wt.on(T.Z.SETTING_UPDATED_LIVE_DELAY,Kt,L),Wt.on(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Kt,L)},getActiveStreamInfo:ca,addDVRMetric:On,hasVideoTrack:Xa,hasAudioTrack:js,getStreamById:jc,getStreamForTime:Lt,getTimeRelativeToStreamId:function(Pt,yn){for(var Hn=null,ur=0,Tr=0,Ir=null,fr=0;fr<Ge.length;fr++){if(Tr=(Hn=Ge[fr]).getStartTime(),Ir=Hn.getDuration(),Number.isFinite(Tr)&&(ur=Tr),Hn.getId()===yn)return Pt-ur;Number.isFinite(Ir)&&(ur+=Ir)}return null},load:function(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Dn(),xt=yn,J.load(Pt)},loadWithManifest:function(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Nn(),xt=yn,ee.setManifest(Pt)},getActiveStreamProcessors:Zr,setConfig:function(Pt){Pt&&(Pt.capabilities&&(B=Pt.capabilities),Pt.capabilitiesFilter&&(V=Pt.capabilitiesFilter),Pt.manifestLoader&&(J=Pt.manifestLoader),Pt.manifestModel&&(H=Pt.manifestModel),Pt.mediaPlayerModel&&(dt=Pt.mediaPlayerModel),Pt.customParametersModel&&(ut=Pt.customParametersModel),Pt.protectionController&&(le=Pt.protectionController),Pt.adapter&&(ne=Pt.adapter),Pt.dashMetrics&&(fe=Pt.dashMetrics),Pt.errHandler&&(ke=Pt.errHandler),Pt.timelineConverter&&(Ae=Pt.timelineConverter),Pt.videoModel&&(pe=Pt.videoModel),Pt.playbackController&&(Me=Pt.playbackController),Pt.serviceDescriptionController&&(Xe=Pt.serviceDescriptionController),Pt.contentSteeringController&&(ie=Pt.contentSteeringController),Pt.textController&&(ae=Pt.textController),Pt.abrController&&(Oe=Pt.abrController),Pt.mediaController&&(Ze=Pt.mediaController),Pt.settings&&(ot=Pt.settings),Pt.baseURLController&&(me=Pt.baseURLController),Pt.uriFragmentModel&&(He=Pt.uriFragmentModel),Pt.segmentBaseController&&(ge=Pt.segmentBaseController),Pt.manifestUpdater&&(ee=Pt.manifestUpdater))},setProtectionData:function(Pt){se=Pt,le&&le.setProtectionData(se)},getIsStreamSwitchInProgress:function(){return Pe},switchToVideoElement:function(Pt){Z&&(Me.initialize(ca()),vn(Pt,!1,!0))},getHasMediaOrInitialisationError:function(){return be||Fe},getStreams:Zs,getActiveStream:function(){return Z},getInitialPlayback:function(){return ht},getAutoPlay:function(){return Q},refreshManifest:function(){ee.getIsUpdating()||ee.refreshManifest()},reset:Qa},P=(0,x.Z)(Jt).getInstance().getLogger(L),Ee=Va(Jt).getInstance(),we=Ch(Jt).getInstance(),_e=We(Jt).getInstance(),el(),L}cu.__dashjs_factory_name="StreamController";var qo=U.Z.getSingletonFactory(cu);function fu(){var L,P,B,V,ee,J,H,ne,fe,we,Ee,ie,me=this.context,ge=(0,m.Z)(me).getInstance();function He(){ie.debug("Stopping the gap controller"),ee&&(clearInterval(ee),ee=null),function(){ge.off(T.Z.WALLCLOCK_TIME_UPDATED,ke,this),ge.off(T.Z.INITIAL_STREAM_SWITCH,_e,this),ge.off(T.Z.PLAYBACK_SEEKING,Oe,this),ge.off(T.Z.BUFFER_REPLACEMENT_STARTED,Ze,L),ge.off(T.Z.TRACK_CHANGE_RENDERED,$e,L)}(),ee=null,J=NaN,V=0,we=null,Ee={}}function Oe(){we&&(clearTimeout(we),we=null)}function Ze(se){try{if(se.streamId!==ne.getActiveStreamInfo().id||se.mediaType!==y.Z.VIDEO&&se.mediaType!==y.Z.AUDIO)return;se.streamId===ne.getActiveStreamInfo().id&&(Ee[se.mediaType]=!0)}catch(Q){ie.error(Q)}}function $e(se){se&&se.mediaType&&(Ee[se.mediaType]=!1)}function _e(){ee||function(){try{ee||(ie.debug("Starting the gap controller"),ee=setInterval(function(){Ae()&&ae(H.getTime())},100))}catch(se){}}()}function ke(){if(Ae(B.get().streaming.gaps.enableSeekFix)&&++V>=10){var se=H.getTime();P===se?ae(se,!0):(P=se,J=NaN),V=0}}function Ae(){var se=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!ne.getActiveStream())return!1;var Q=Object.keys(Ee).some(function(be){return Ee[be]}),Pe=!!se&&Ge();return!Q&&B.get().streaming.gaps.jumpGaps&&ne.getActiveStreamProcessors().length>0&&(!H.isSeeking()||Pe)&&!H.isPaused()&&!ne.getIsStreamSwitchInProgress()&&!ne.getHasMediaOrInitialisationError()}function Ge(){var se=ne.getActiveStream(),Q=parseFloat((se.getStartTime()+se.getDuration()).toFixed(5));return H.getTime()+B.get().streaming.gaps.threshold>=Q}function Z(se,Q){try{if(!se||se.length<=1&&Q>0)return NaN;for(var Pe=NaN,be=0;isNaN(Pe)&&be<se.length;){var Fe=be>0?se.end(be-1):0;Q<se.start(be)&&Fe-Q<B.get().streaming.gaps.threshold&&(Pe=be),be+=1}return Pe}catch(Ne){return null}}function le(se,Q){for(var Pe=0,be=se.length;Pe<be;Pe++)if(Q>=se.start(Pe)&&Q<=se.end(Pe))return!0;return!1}function ae(se){var Q,Pe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],be=B.get().streaming.gaps.enableStallFix,Fe=B.get().streaming.gaps.stallSeek,Ne=B.get().streaming.gaps.smallGapLimit,pe=B.get().streaming.gaps.jumpLargeGaps,Me=fe.getBufferRange(),Xe=NaN,dt=!1;if(Q=Z(Me,se),!isNaN(Q)){var ut=Me.start(Q),et=ut-se;et>0&&(et<=Ne||pe)&&(Xe=ut)}var ht=H.getTimeToStreamEnd();if(isNaN(Xe)&&Pe&&isFinite(ht)&&!isNaN(ht)&&ht<Ne&&(Xe=parseFloat(H.getStreamEndTime().toFixed(5)),dt=!0),be&&isNaN(Xe)&&Pe&&isNaN(Q)&&le(Me,se)&&(Fe===0?(ie.warn("Toggle play pause to break stall"),fe.pause(),fe.play()):(ie.warn("Jumping ".concat(Fe,"s to break stall")),Xe=se+Fe)),Xe>0&&J!==Xe&&Xe>se&&!we){var jt=Xe-se;if(dt){var Ht=ne.getStreamForTime(Xe),kt=Ht&&!!Ht.getPreloaded();ie.warn("Jumping to end of stream because of gap from ".concat(se," to ").concat(Xe,". Gap duration: ").concat(jt)),H.seek(Xe,!0,kt)}else{var Ut=H.getIsDynamic(),An=Q>0?Me.end(Q-1):se,ot=Ut?1e3*Math.max(0,jt-.1):0;we=window.setTimeout(function(){H.seek(Xe,!0,!0),ie.warn("Jumping gap occuring in period ".concat(ne.getActiveStream().getStreamId()," starting at ").concat(An," and ending at ").concat(Xe,". Jumping by: ").concat(Xe-An)),we=null},ot)}J=Xe}}return L={reset:He,setConfig:function(se){se&&(se.settings&&(B=se.settings),se.playbackController&&(H=se.playbackController),se.streamController&&(ne=se.streamController),se.videoModel&&(fe=se.videoModel))},initialize:function(){(function(){ge.on(T.Z.WALLCLOCK_TIME_UPDATED,ke,this),ge.on(T.Z.INITIAL_STREAM_SWITCH,_e,this),ge.on(T.Z.PLAYBACK_SEEKING,Oe,this),ge.on(T.Z.BUFFER_REPLACEMENT_STARTED,Ze,L),ge.on(T.Z.TRACK_CHANGE_RENDERED,$e,L)})()}},ie=(0,x.Z)(me).getInstance().getLogger(L),He(),L}fu.__dashjs_factory_name="GapController";var Ps=U.Z.getSingletonFactory(fu);function li(){var L,P,B,V,ee,J,H,ne,fe,we,Ee=this.context,ie=(0,m.Z)(Ee).getInstance();function me(){P=!1;var Ge=rn.Z.parseUserAgent();B=Ge&&Ge.browser&&Ge.browser.name&&Ge.browser.name.toLowerCase()==="safari"}function ge(){P=!1}function He(Ge){if(Ge.streamId===J.getActiveStreamInfo().id&&fe){var Z=H.getLiveDelay();H.getBufferLevel()>Z/2&&(fe=!1)}}function Oe(Ge){Ge.streamId===J.getActiveStreamInfo().id&&(fe=Ge.state===D.Z.BUFFER_EMPTY)}function Ze(){ne.getCatchupModeEnabled()||V.setPlaybackRate(1)}function $e(){H.getIsDynamic()&&ne.getCatchupModeEnabled()&&(ne.getCatchupPlaybackRates().max>0||ne.getCatchupPlaybackRates().min<0)&&!H.isPaused()&&!H.isSeeking()&&function(){try{return!(!H.getTime()>0||P)&&(ke()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(Ge,Z){try{return Math.abs(_e())>0||Ge<Z}catch(le){return!1}}(H.getBufferLevel(),ee.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(_e())>0}catch(Ge){return!1}}())}catch(Ge){return!1}}()&&function(){if(!P&&V){var Ge,Z=V.getPlaybackRate(),le=ne.getCatchupPlaybackRates(),ae=H.getBufferLevel(),se=_e(),Q=ne.getCatchupMaxDrift();if(!isNaN(Q)&&Q>0&&se>Q)we.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),P=!0,H.seekToCurrentLive(!0,!1);else{var Pe=H.getCurrentLiveLatency(),be=H.getLiveDelay();Ge=ke()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(Ne,pe,Me,Xe,dt){var ut;if(dt<Xe){var et=Math.abs(Ne.min),ht=5*(dt-Xe);ut=1-et+2*et/(1+Math.pow(Math.E,-ht)),we.debug("[LoL+ playback control_buffer-based] bufferLevel: "+dt+", newRate: "+ut)}else{if(Math.abs(pe-Me)<=.02*Me)ut=1;else{var jt=pe-Me,Ht=jt<0?Math.abs(Ne.min):Ne.max,kt=5*jt;ut=1-Ht+2*Ht/(1+Math.pow(Math.E,-kt))}we.debug("[LoL+ playback control_latency-based] latency: "+pe+", newRate: "+ut)}return ut}(le,Pe,be,ee.get().streaming.liveCatchup.playbackBufferMin,ae):function(Ne,pe,Me,Xe){if(fe)return 1;var dt=pe-Me,ut=dt<0?Math.abs(Ne.min):Ne.max,et=5*dt,ht=1-ut+2*ut/(1+Math.pow(Math.E,-et));return H.getPlaybackStalled()&&Xe<=Me/2&&dt>0&&(ht=1),ht}(le,Pe,be,ae);var Fe=B?.25:.02/(.5/le.max);Ge&&Math.abs(Z-Ge)>=Fe&&(we.debug("[CatchupController]: Setting playback rate to ".concat(Ge)),V.setPlaybackRate(Ge))}}}()}function _e(){return H.getCurrentLiveLatency()-H.getLiveDelay()}function ke(){var Ge=ee.get().streaming.liveCatchup.playbackBufferMin;return ee.get().streaming.liveCatchup.mode!==y.Z.LIVE_CATCHUP_MODE_LOLP||Ge===null||isNaN(Ge)?y.Z.LIVE_CATCHUP_MODE_DEFAULT:y.Z.LIVE_CATCHUP_MODE_LOLP}function Ae(){ne.getCatchupPlaybackRates(!0)}return L={reset:function(){ie.off(_.Z.BUFFER_LEVEL_UPDATED,He,L),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,L),ie.off(_.Z.PLAYBACK_PROGRESS,$e,L),ie.off(_.Z.PLAYBACK_TIME_UPDATED,$e,L),ie.off(_.Z.PLAYBACK_SEEKED,ge,L),ie.off(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Ze,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ae,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ae,L),ie.off(_.Z.STREAM_INITIALIZED,Ae,L),me(),V.setPlaybackRate(1,!0)},setConfig:function(Ge){Ge&&(Ge.settings&&(ee=Ge.settings),Ge.videoModel&&(V=Ge.videoModel),Ge.streamController&&(J=Ge.streamController),Ge.playbackController&&(H=Ge.playbackController),Ge.mediaPlayerModel&&(ne=Ge.mediaPlayerModel))},initialize:function(){ie.on(_.Z.BUFFER_LEVEL_UPDATED,He,L),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,L),ie.on(_.Z.PLAYBACK_PROGRESS,$e,L),ie.on(_.Z.PLAYBACK_TIME_UPDATED,$e,L),ie.on(_.Z.PLAYBACK_SEEKED,ge,L),ie.on(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Ze,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ae,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ae,L),ie.on(_.Z.STREAM_INITIALIZED,Ae,L),Ae()}},we=(0,x.Z)(Ee).getInstance().getLogger(L),me(),L}li.__dashjs_factory_name="CatchupController";var fo=U.Z.getSingletonFactory(li),ku=[y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],Rh="video",Fu="audio";function Co(){var L,P,B,V,ee,J=this.context;function H(){P={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},B=[]}function ne(fe,we,Ee){try{P[fe][we]=Ee/1e3}catch(ie){V.error(ie)}}return L={getServiceDescriptionSettings:function(){return P},getProducerReferenceTimeOffsets:function(){return B},calculateProducerReferenceTimeOffsets:function(fe){try{var we=[];if(fe&&fe.length>0){var Ee=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT],ie=ee.getAvailabilityStartTime()/1e3;fe.forEach(function(me){var ge=Ee.reduce(function(He,Oe){return He.concat(ee.getAllMediaInfoForType(me,Oe))},[]).reduce(function(He,Oe){return ee.getProducerReferenceTimes(me,Oe).forEach(function(Ze){var $e=ee.getVoRepresentations(Oe);if($e&&$e.length>0&&$e[0].adaptation&&$e[0].segmentInfoType===v.Z.SEGMENT_TEMPLATE){var _e=$e[0],ke=new Date(Ze[v.Z.WALL_CLOCK_TIME]).getTime()/1e3-(Ze[v.Z.PRESENTATION_TIME]/_e[v.Z.TIMESCALE]-_e[v.Z.PRESENTATION_TIME_OFFSET]+me.start),Ae=ie-ke;He.push({id:Ze[v.Z.ID],to:Ae})}}),He},[]);we=we.concat(ge)})}B=we}catch(me){V.error(me),B=[]}},applyServiceDescription:function(fe){if(fe&&fe.serviceDescriptions){var we=fe.serviceDescriptions.filter(function(me){return ku.includes(me.schemeIdUri)}),Ee=fe.serviceDescriptions.filter(function(me){return me.schemeIdUri==null}),ie=we.length>0?we[we.length-1]:Ee[Ee.length-1];ie&&(ie.latency&&ie.latency.target>0&&function(me){var ge;if(me.schemeIdUri,y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,ge=function($e){return{liveDelay:$e.latency.target/1e3,maxDrift:!isNaN($e.latency.max)&&$e.latency.max>$e.latency.target?($e.latency.max-$e.latency.target+500)/1e3:NaN,referenceId:$e.latency.referenceId||NaN}}(me),B.length>0){var He=function($e){var _e,ke=0,Ae=B.filter(function(Ge){return Ge.id===$e.referenceId});return Ae.length===0?(ke=B.length>0?B[0].to:0,_e=B[0].id||NaN):(ke=Ae[0].to||0,_e=Ae[0].id||NaN),{to:ke,id:_e}}(ge),Oe=He.to,Ze=He.id;P.liveDelay=ge.liveDelay-Oe,P.liveCatchup.maxDrift=ge.maxDrift,V.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(Oe," from ProducerReferenceTime element with id ").concat(Ze,".\n                Live Delay: ").concat(ge.liveDelay-Oe,", Live catchup max drift: ").concat(ge.maxDrift,"\n            "))}else P.liveDelay=ge.liveDelay,P.liveCatchup.maxDrift=ge.maxDrift,V.debug("Found latency properties coming from service description: Live Delay: ".concat(ge.liveDelay,", Live catchup max drift: ").concat(ge.maxDrift))}(ie),ie.playbackRate&&function(me){var ge=me.playbackRate.min?Math.round(1e3*(me.playbackRate.min-1))/1e3:NaN,He=me.playbackRate.max?Math.round(1e3*(me.playbackRate.max-1))/1e3:NaN;P.liveCatchup.playbackRate.min=ge,P.liveCatchup.playbackRate.max=He,V.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(ge)),V.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(He))}(ie),ie.operatingQuality,ie.operatingBandwidth&&function(me){if(me&&me.operatingBandwidth&&me.operatingBandwidth.mediaType&&me.operatingBandwidth.mediaType!=="all"){var ge={};ge.minBandwidth=me.operatingBandwidth.min,ge.maxBandwidth=me.operatingBandwidth.max,ge.targetBandwidth=me.operatingBandwidth.target;var He=[];me.operatingBandwidth.mediaType===Rh||me.operatingBandwidth.mediaType===Fu?He.push(me.operatingBandwidth.mediaType):me.operatingBandwidth.mediaType==="any"&&(He.push(Fu),He.push(Rh)),He.forEach(function(Oe){isNaN(ge.minBandwidth)||ne("minBitrate",Oe,ge.minBandwidth),isNaN(ge.maxBandwidth)||ne("maxBitrate",Oe,ge.maxBandwidth),isNaN(ge.targetBandwidth)||ne("initialBitrate",Oe,ge.targetBandwidth)})}}(ie),ie.contentSteering&&function(me){P.contentSteering=me.contentSteering}(ie))}},reset:function(){H()},setConfig:function(fe){fe&&fe.adapter&&(ee=fe.adapter)}},V=(0,x.Z)(J).getInstance().getLogger(L),H(),L}Co.__dashjs_factory_name="ServiceDescriptionController";var Nh=U.Z.getSingletonFactory(Co),vr=w(3973),Ei=w.n(vr),xh=w(3039);function Sc(){var L,P,B,V,ee,J,H,ne,fe=this.context,we=(0,m.Z)(fe).getInstance();function Ee(pe,Me){return pe&&B[Me]&&B[Me][pe]?B[Me][pe].list:[]}function ie(pe,Me){return pe&&B[Me]&&B[Me][pe]?B[Me][pe].current:null}function me(pe){var Me=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(pe&&pe.streamInfo){var Xe=pe.type,dt=pe.streamInfo,ut=dt.id,et=ie(Xe,ut);if(B[ut]&&B[ut][Xe]&&(B[ut][Xe].current=pe,B[ut][Xe].current&&(Xe!==y.Z.TEXT&&!Oe(pe,et)||Xe===y.Z.TEXT&&pe.isFragmented)&&we.trigger(T.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:et,newMediaInfo:pe,switchMode:V.get().streaming.trackSwitchMode[Xe]},{streamId:ut}),!Me)){var ht=$e(pe);if(!ht||!B[ut][Xe].storeLastSettings)return;ht.roles&&(ht.role=ht.roles[0],delete ht.roles),ht.accessibility&&(ht.accessibility=ht.accessibility[0]),ht.audioChannelConfiguration&&(ht.audioChannelConfiguration=ht.audioChannelConfiguration[0]),J[Xe]=ht,ne.setSavedMediaSettings(Xe,ht)}}}function ge(pe,Me){pe&&Me&&(ee[pe]=Me)}function He(pe){return pe?ee[pe]:null}function Oe(pe,Me){if(!pe&&!Me)return!0;if(!pe||!Me)return!1;var Xe=pe.id===Me.id,dt=pe.viewpoint===Me.viewpoint,ut=JSON.stringify(pe.viewpointsWithSchemeIdUri)===JSON.stringify(Me.viewpointsWithSchemeIdUri),et=pe.lang===Me.lang,ht=pe.codec===Me.codec,jt=pe.roles.toString()===Me.roles.toString(),Ht=JSON.stringify(pe.rolesWithSchemeIdUri)===JSON.stringify(Me.rolesWithSchemeIdUri),kt=pe.accessibility.toString()===Me.accessibility.toString(),Ut=JSON.stringify(pe.accessibilitiesWithSchemeIdUri)===JSON.stringify(Me.accessibilitiesWithSchemeIdUri),An=pe.audioChannelConfiguration.toString()===Me.audioChannelConfiguration.toString(),ot=JSON.stringify(pe.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(Me.audioChannelConfigurationsWithSchemeIdUri);return Xe&&ht&&dt&&ut&&et&&jt&&Ht&&kt&&Ut&&An&&ot}function Ze(){B={},J={},ee={audio:null,video:null,text:null}}function $e(pe){var Me={lang:pe.lang,viewpoint:pe.viewpoint,roles:pe.roles,accessibility:pe.accessibility,audioChannelConfiguration:pe.audioChannelConfiguration,codec:pe.codec};return Me.lang||Me.viewpoint||Me.role&&Me.role.length>0||Me.accessibility&&Me.accessibility.length>0||Me.audioChannelConfiguration&&Me.audioChannelConfiguration.length>0?Me:null}function _e(pe,Me,Xe){var dt=[];return pe.forEach(function(ut){Me(Xe,ut)&&dt.push(ut)}),dt.length!==0?dt:pe}function ke(pe,Me){try{return!pe.lang||pe.lang instanceof RegExp?Me.lang.match(pe.lang):Me.lang!==""&&(0,xh.extendedFilter)(Me.lang,Ei()(pe.lang)).length>0}catch(Xe){return!1}}function Ae(pe,Me){return pe.index===void 0||pe.index===null||Me.index===pe.index}function Ge(pe,Me){return!pe.viewpoint||pe.viewpoint===Me.viewpoint}function Z(pe,Me){var Xe=arguments.length>2&&arguments[2]!==void 0&&arguments[2],dt=!pe.role||!!Me.roles.filter(function(ut){return ut===pe.role})[0];return dt||Me.type===y.Z.AUDIO&&Xe}function le(pe,Me){return pe.accessibility?!!Me.accessibility.filter(function(Xe){return Xe===pe.accessibility})[0]:!Me.accessibility.length}function ae(pe,Me){return!pe.audioChannelConfiguration||!!Me.audioChannelConfiguration.filter(function(Xe){return Xe===pe.audioChannelConfiguration})[0]}function se(pe,Me){return!pe.codec||pe.codec===Me.codec}function Q(pe){var Me,Xe=0,dt=[];return pe.forEach(function(ut){(Me=Math.max.apply(Math,ut.bitrateList.map(function(et){return et.bandwidth})))>Xe?(Xe=Me,dt=[ut]):Me===Xe&&dt.push(ut)}),dt}function Pe(pe){var Me,Xe=1/0,dt=[];return pe.forEach(function(ut){var et=ut.bitrateList.reduce(function(ht,jt){var Ht=Math.max(1,jt.width*jt.height);return ht+jt.bandwidth/Ht},0);(Me=et/ut.bitrateList.length)<Xe?(Xe=Me,dt=[ut]):Me===Xe&&dt.push(ut)}),dt}function be(pe){var Me,Xe=0,dt=[];return pe.forEach(function(ut){(Me=ut.representationCount)>Xe?(Xe=Me,dt=[ut]):Me===Xe&&dt.push(ut)}),dt}function Fe(pe,Me){if(pe===y.Z.TEXT)return Me[0];var Xe,dt=V.get().streaming.selectionModeForInitialTrack,ut=H.getCustomInitialTrackSelectionFunction();if(ut&&typeof ut=="function")Xe=ut(Me);else switch(dt){case y.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:Xe=function(et){var ht,jt,Ht=(ht=0,jt=[],et.forEach(function(kt){isNaN(kt.selectionPriority)||(kt.selectionPriority>ht?(ht=kt.selectionPriority,jt=[kt]):kt.selectionPriority===ht&&jt.push(kt))}),jt);return Ht.length>1&&(Ht=Q(Ht)),Ht.length>1&&(Ht=be(Ht)),Ht}(Me);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:Xe=function(et){var ht=Q(et);return ht.length>1&&(ht=be(ht)),ht}(Me);break;case y.Z.TRACK_SELECTION_MODE_FIRST_TRACK:Xe=Ne(Me);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:Xe=function(et){var ht=Pe(et);return ht.length>1&&(ht=Q(ht)),ht}(Me);break;case y.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:Xe=function(et){var ht=be(et);return ht.length>1&&(ht=Q(et)),ht}(Me);break;default:P.warn("Track selection mode ".concat(dt," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),Xe=Ne(Me)}return Xe.length>0?Xe[0]:Me[0]}function Ne(pe){return pe[0]}return L={setInitialMediaSettingsForType:function(pe,Me){var Xe=J[pe]||He(pe),dt=Ee(pe,Me.id),ut=[];Xe||((Xe=ne.getSavedMediaSettings(pe))&&delete Xe.codec,ge(pe,Xe)),dt&&dt.length!==0&&(Xe&&(ut=_e(ut=Array.from(dt),ke,Xe),ut=_e(ut,Ae,Xe),ut=_e(ut,Ge,Xe),pe===y.Z.AUDIO&&J[pe]||(ut=_e(ut,Z,Xe)),ut=_e(ut,le,Xe),ut=_e(ut,ae,Xe),ut=_e(ut,se,Xe)),ut.length===0?me(Fe(pe,dt),!0):ut.length>1?me(Fe(pe,ut)):me(ut[0]))},addTrack:function(pe){if(pe){var Me=pe.type;if((Xe=Me)===y.Z.AUDIO||Xe===y.Z.VIDEO||Xe===y.Z.TEXT||Xe===y.Z.IMAGE){var Xe,dt,ut=pe.streamInfo.id;B[ut]||(B[ut]={audio:{list:[],storeLastSettings:dt=V.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:dt,current:null},text:{list:[],storeLastSettings:dt,current:null},image:{list:[],storeLastSettings:dt,current:null}});for(var et=B[ut][Me].list,ht=0,jt=et.length;ht<jt;++ht)if(Oe(et[ht],pe))return;et.push(pe)}}},getTracksFor:Ee,getCurrentTrackFor:ie,isCurrentTrack:function(pe){if(!pe)return!1;var Me=pe.type,Xe=pe.streamInfo.id;return B[Xe]&&B[Xe][Me]&&Oe(B[Xe][Me].current,pe)},setTrack:me,selectInitialTrack:Fe,setInitialSettings:ge,getInitialSettings:He,getTracksWithHighestBitrate:Q,getTracksWithHighestEfficiency:Pe,getTracksWithWidestRange:be,isTracksEqual:Oe,matchSettings:function(pe,Me){var Xe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var dt=!1;if(pe.lang){if(pe.lang instanceof RegExp)dt=Me.lang.match(pe.lang);else if(Me.lang!==""){var ut=Ei()(pe.lang);ut&&(dt=(0,xh.extendedFilter)(Me.lang,ut).length>0)}}else dt=!0;var et=pe.index===void 0||pe.index===null||Me.index===pe.index,ht=!pe.viewpoint||pe.viewpoint===Me.viewpoint,jt=!pe.role||!!Me.roles.filter(function(Ut){return Ut===pe.role})[0],Ht=!pe.accessibility||!!Me.accessibility.filter(function(Ut){return Ut===pe.accessibility})[0],kt=!pe.audioChannelConfiguration||!!Me.audioChannelConfiguration.filter(function(Ut){return Ut===pe.audioChannelConfiguration})[0];return dt&&et&&ht&&(jt||Me.type===y.Z.AUDIO&&Xe)&&Ht&&kt}catch(Ut){return!1}},matchSettingsLang:ke,matchSettingsIndex:Ae,matchSettingsViewPoint:Ge,matchSettingsRole:Z,matchSettingsAccessibility:le,matchSettingsAudioChannelConfig:ae,saveTextSettingsDisabled:function(){ne.setSavedMediaSettings(y.Z.TEXT,null)},setConfig:function(pe){pe&&(pe.domStorage&&(ne=pe.domStorage),pe.settings&&(V=pe.settings),pe.customParametersModel&&(H=pe.customParametersModel))},reset:Ze},P=(0,x.Z)(fe).getInstance().getLogger(L),Ze(),L}Sc.__dashjs_factory_name="MediaController";var wi=U.Z.getSingletonFactory(Sc);U.Z.updateSingletonFactory(Sc.__dashjs_factory_name,wi);var Uu=wi,Os=NaN,sm=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.data={baseUrls:P||null,selectedIdx:B||Os},this.children=[]};function Df(){var L,P,B,V,ee=this.context,J=mn(ee).getInstance();function H(Ee,ie,me){var ge=ne(me);Ee[ie]?J.areEqual(ge,Ee[ie].data.baseUrls)||(Ee[ie].data.baseUrls=ge,Ee[ie].data.selectedIdx=Os):Ee[ie]=new sm(ge)}function ne(Ee){var ie=B.getBaseURLsFromElement(Ee),me=V.getSynthesizedBaseUrlElements(ie);return me&&me.length>0&&(ie=ie.concat(me)),ie}function fe(Ee,ie){var me=ie||P;Ee(me.data),me.children&&me.children.forEach(function(ge){return fe(Ee,ge)})}function we(){P=new sm}return L={reset:we,update:function(Ee){(function(ie){(function(){if(!B||!B.hasOwnProperty("getBaseURLsFromElement")||!B.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var me=ne(ie);J.areEqual(me,P.data.baseUrls)||(P.data.baseUrls=me,P.data.selectedIdx=Os),ie&&ie.Period_asArray&&ie.Period_asArray.forEach(function(ge,He){H(P.children,He,ge),ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.forEach(function(Oe,Ze){H(P.children[He].children,Ze,Oe),Oe.Representation_asArray&&Oe.Representation_asArray.sort(B.getRepresentationSortFunction()).forEach(function($e,_e){H(P.children[He].children[Ze].children,_e,$e)})})})})(Ee)},getForPath:function(Ee){var ie=P,me=[ie.data];return Ee&&Ee.forEach(function(ge){(ie=ie.children[ge])&&me.push(ie.data)}),me.filter(function(ge){return ge.baseUrls.length})},invalidateSelectedIndexes:function(Ee){fe(function(ie){isNaN(ie.selectedIdx)||Ee===ie.baseUrls[ie.selectedIdx].serviceLocation&&(ie.selectedIdx=Os)})},setConfig:function(Ee){Ee.adapter&&(B=Ee.adapter),Ee.contentSteeringController&&(V=Ee.contentSteeringController)},getBaseUrls:function(Ee){return ne(Ee)}},we(),L}Df.__dashjs_factory_name="BaseURLTreeModel";var Ia=U.Z.getClassFactory(Df);function za(L){var P=(L=L||{}).blacklistController;return{select:function(B){return B&&function(ee){var J,H,ne=0,fe=[],we=0;if((H=ee.sort(function(Ee,ie){var me=Ee.dvbPriority-ie.dvbPriority;return isNaN(me)?0:me}).filter(function(Ee,ie,me){return!ie||me[0].dvbPriority&&Ee.dvbPriority&&me[0].dvbPriority===Ee.dvbPriority})).length)return H.length>1&&(H.forEach(function(Ee){ne+=Ee.dvbWeight,fe.push(ne)}),J=Math.floor(Math.random()*(ne-1)),fe.every(function(Ee,ie){return we=ie,!(J<Ee)})),H[we]}((V=[],B.filter(function(ee){return!P.contains(ee.serviceLocation)||(ee.dvbPriority&&V.push(ee.dvbPriority),!1)}).filter(function(ee){return!V.length||!ee.dvbPriority||V.indexOf(ee.dvbPriority)===-1})));var V}}}za.__dashjs_factory_name="DVBSelector";var ba=U.Z.getClassFactory(za);function Do(L){var P=(L=L||{}).blacklistController;return{select:function(B){var V,ee=0;return B&&B.some(function(J,H){return ee=H,!P.contains(J.serviceLocation)})&&(V=B[ee]),V}}}Do.__dashjs_factory_name="BasicSelector";var um=U.Z.getClassFactory(Do);function Mh(){var L,P,B,V=this.context;function ee(){for(var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ne=0,fe=NaN,we=function(){var ie=J[ne],me=H.findIndex(function(ge){return ge.serviceLocation&&ge.serviceLocation===ie});if(me!==-1&&!B.contains(H[me].serviceLocation))return fe=me,"break";ne+=1};ne<J.length;){var Ee=we();if(Ee==="break")break}return fe}return L={selectBaseUrlIndex:function(J){var H=NaN;if(isNaN(J.selectedIdx)){var ne=P.getSteeringDataFromManifest();ne&&ne.defaultServiceLocationArray.length>0&&(H=ee(ne.defaultServiceLocationArray,J.baseUrls))}var fe=P.getCurrentSteeringResponseData();return J.baseUrls&&J.baseUrls.length&&fe&&fe.pathwayPriority&&fe.pathwayPriority.length&&(H=ee(fe.pathwayPriority,J.baseUrls)),H},setConfig:function(J){J.blacklistController&&(B=J.blacklistController),J.contentSteeringController&&(P=J.contentSteeringController)}},P=Aa(V).getInstance(),L}Mh.__dashjs_factory_name="ContentSteeringSelector";var _E=U.Z.getClassFactory(Mh);function du(){var L,P,B,V,ee,J,H=this.context,ne=(0,m.Z)(H).getInstance(),fe=(0,je.Z)(H).getInstance();function we(){P.reset()}return L={chooseSelector:function(Ee){(0,ye.PS)(Ee,"boolean"),J=Ee?V:B},select:function(Ee){if(Ee){if(fe.get().streaming.applyContentSteering){var ie=ee.selectBaseUrlIndex(Ee);isNaN(ie)||ie===-1||(Ee.selectedIdx=ie)}if(!isNaN(Ee.selectedIdx))return Ee.baseUrls[Ee.selectedIdx];var me=J.select(Ee.baseUrls);return me?(Ee.selectedIdx=Ee.baseUrls.indexOf(me),me):(ne.trigger(T.Z.URL_RESOLUTION_FAILED,{error:new ce.Z(Te.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Te.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(J===B&&we()))}},reset:we,setConfig:function(Ee){Ee.selector&&(J=Ee.selector),Ee.contentSteeringSelector&&(ee=Ee.contentSteeringSelector)}},P=ms(H).create({updateEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),B=um(H).create({blacklistController:P}),V=ba(H).create({blacklistController:P}),(ee=_E(H).create()).setConfig({blacklistController:P}),J=B,L}du.__dashjs_factory_name="BaseURLSelector";var Ls=U.Z.getClassFactory(du);function Cl(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance(),ne=(0,wt.Z)(J).getInstance();function fe(Ee){B.update(Ee),V.chooseSelector(P.getIsDVB(Ee)),H.trigger(_.Z.BASE_URLS_UPDATED,{baseUrls:we(Ee)})}function we(Ee){return B.getBaseUrls(Ee)}return L={reset:function(){B.reset(),V.reset()},initialize:function(Ee){B.setConfig({adapter:P,contentSteeringController:ee}),fe(Ee)},resolve:function(Ee){var ie=B.getForPath(Ee).reduce(function(me,ge){var He=V.select(ge);return He?(ne.isRelative(He.url)?me.url=ne.resolve(He.url,me.url):(me.url=He.url,me.serviceLocation=He.serviceLocation),me.availabilityTimeOffset=He.availabilityTimeOffset,me.availabilityTimeComplete=He.availabilityTimeComplete,me.queryParams=He.queryParams,me):new Qn},new Qn);if(!ne.isRelative(ie.url))return ie},setConfig:function(Ee){Ee.baseURLTreeModel&&(B=Ee.baseURLTreeModel),Ee.baseURLSelector&&(V=Ee.baseURLSelector),Ee.adapter&&(P=Ee.adapter),Ee.contentSteeringController&&(ee=Ee.contentSteeringController)},getBaseUrls:we,update:fe},B=Ia(J).create(),V=Ls(J).create(),H.on(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(Ee){B.invalidateSelectedIndexes(Ee.entry)},L),L}Cl.__dashjs_factory_name="BaseURLController";var TE=U.Z.getClassFactory(Cl);function Dh(L){return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Dh(L)}function Pf(L,P){return Pf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Pf(L,P)}function lm(L,P){return!P||Dh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Of(L){return Of=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Of(L)}var ji=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Pf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Of(P);if(B){var ne=Of(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return lm(this,J)});function ee(J,H){var ne;return function(fe,we){if(!(fe instanceof we))throw new TypeError("Cannot call a class as a function")}(this,ee),(ne=V.call(this)).url=J||null,ne.type=H||null,ne.mediaType=y.Z.STREAM,ne.responseType="",ne}return ee}(j.Z);function cm(L){L=L||{};var P=this.context,B=(0,m.Z)(P).getInstance(),V=Ao(P).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,errors:Te});return{load:function(ee,J,H){var ne=function(we,Ee){J.resolved=!0,J.resolvedContent=we||null,B.trigger(T.Z.XLINK_ELEMENT_LOADED,{element:J,resolveObject:H,error:we||Ee?null:new ce.Z(Te.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Te.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+ee)})};if(ee==="urn:mpeg:dash:resolve-to-zero:2013")ne(null,!0);else{var fe=new ji(ee,nt.w.XLINK_EXPANSION_TYPE);V.load({request:fe,success:function(we){ne(we)},error:function(){ne(null)}})}},reset:function(){V&&(V.abort(),V=null)}}}cm.__dashjs_factory_name="XlinkLoader";var fm=U.Z.getClassFactory(cm),Bu=function(L){(L=L||{}).escapeMode===void 0&&(L.escapeMode=!0),L.attributePrefix===void 0&&(L.attributePrefix="_"),L.arrayAccessForm=L.arrayAccessForm||"none",L.emptyNodeForm=L.emptyNodeForm||"text",L.enableToStringFunc===void 0&&(L.enableToStringFunc=!0),L.arrayAccessFormPaths=L.arrayAccessFormPaths||[],L.skipEmptyTextNodesForObj===void 0&&(L.skipEmptyTextNodesForObj=!0),L.stripWhitespaces===void 0&&(L.stripWhitespaces=!0),L.datetimeAccessFormPaths=L.datetimeAccessFormPaths||[],L.useDoubleQuotes===void 0&&(L.useDoubleQuotes=!1),L.xmlElementsFilter=L.xmlElementsFilter||[],L.jsonPropertiesFilter=L.jsonPropertiesFilter||[],L.keepCData===void 0&&(L.keepCData=!1),L.ignoreRoot===void 0&&(L.ignoreRoot=!1);function P(_e){var ke=_e.localName;return ke==null&&(ke=_e.baseName),ke!=null&&ke!=""||(ke=_e.nodeName),ke}function B(_e){return typeof _e=="string"?_e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):_e}function V(_e,ke,Ae,Ge){for(var Z=0;Z<_e.length;Z++){var le=_e[Z];if(typeof le=="string"){if(le==Ge)break}else if(le instanceof RegExp){if(le.test(Ge))break}else if(typeof le=="function"&&le(ke,Ae,Ge))break}return Z!=_e.length}function ee(_e,ke,Ae){L.arrayAccessForm==="property"&&(_e[ke]instanceof Array?_e[ke+"_asArray"]=_e[ke]:_e[ke+"_asArray"]=[_e[ke]]),!(_e[ke]instanceof Array)&&L.arrayAccessFormPaths.length>0&&V(L.arrayAccessFormPaths,_e,ke,Ae)&&(_e[ke]=[_e[ke]])}function J(_e){var ke=_e.split(/[-T:+Z]/g),Ae=new Date(ke[0],ke[1]-1,ke[2]),Ge=ke[5].split(".");if(Ae.setHours(ke[3],ke[4],Ge[0]),Ge.length>1&&Ae.setMilliseconds(Ge[1]),ke[6]&&ke[7]){var Z=60*ke[6]+Number(ke[7]);Z=0+((/\d\d-\d\d:\d\d$/.test(_e)?"-":"+")=="-"?-1*Z:Z),Ae.setMinutes(Ae.getMinutes()-Z-Ae.getTimezoneOffset())}else _e.indexOf("Z",_e.length-1)!==-1&&(Ae=new Date(Date.UTC(Ae.getFullYear(),Ae.getMonth(),Ae.getDate(),Ae.getHours(),Ae.getMinutes(),Ae.getSeconds(),Ae.getMilliseconds())));return Ae}function H(_e,ke,Ae,Ge){return!(ke==1&&L.xmlElementsFilter.length>0)||V(L.xmlElementsFilter,_e,Ae,Ge)}function ne(_e,ke){if(_e.nodeType==9){for(var Ae=new Object,Ge=_e.childNodes,Z=0;Z<Ge.length;Z++)(ae=Ge[Z]).nodeType==1&&(L.ignoreRoot?Ae=ne(ae):(Ae={})[se=P(ae)]=ne(ae));return Ae}if(_e.nodeType==1){(Ae=new Object).__cnt=0;var le=[];for(Ge=_e.childNodes,Z=0;Z<Ge.length;Z++){var ae,se=P(ae=Ge[Z]);if(ae.nodeType!=8){var Q=ke+"."+se;if(H(Ae,ae.nodeType,se,Q))if(Ae.__cnt++,Ae[se]==null){var Pe=ne(ae,Q);(se!="#text"||/[^\s]/.test(Pe))&&((be={})[se]=Pe,le.push(be)),Ae[se]=Pe,ee(Ae,se,Q)}else{var be;Ae[se]!=null&&(Ae[se]instanceof Array||(Ae[se]=[Ae[se]],ee(Ae,se,Q))),Pe=ne(ae,Q),(se!="#text"||/[^\s]/.test(Pe))&&((be={})[se]=Pe,le.push(be)),Ae[se][Ae[se].length]=Pe}}}Ae.__children=le;for(var Fe=P(_e),Ne=0;Ne<_e.attributes.length;Ne++){var pe=_e.attributes[Ne];Ae.__cnt++;for(var Me=pe.value,Xe=0,dt=L.matchers.length;Xe<dt;Xe++){var ut=L.matchers[Xe];ut.test(pe,Fe)&&(Me=ut.converter(pe.value))}Ae[L.attributePrefix+pe.name]=Me}var et=function(ht){return ht.prefix}(_e);return et!=null&&et!=""&&(Ae.__cnt++,Ae.__prefix=et),Ae["#text"]!=null&&(Ae.__text=Ae["#text"],Ae.__text instanceof Array&&(Ae.__text=Ae.__text.join("\n")),L.stripWhitespaces&&(Ae.__text=Ae.__text.trim()),delete Ae["#text"],L.arrayAccessForm=="property"&&delete Ae["#text_asArray"],Ae.__text=function(ht,jt,Ht){if(L.datetimeAccessFormPaths.length>0){var kt=Ht.split(".#")[0];return V(L.datetimeAccessFormPaths,ht,jt,kt)?J(ht):ht}return ht}(Ae.__text,se,ke+"."+se)),Ae["#cdata-section"]!=null&&(Ae.__cdata=Ae["#cdata-section"],delete Ae["#cdata-section"],L.arrayAccessForm=="property"&&delete Ae["#cdata-section_asArray"]),Ae.__cnt==0&&L.emptyNodeForm=="text"?Ae="":Ae.__cnt==1&&Ae.__text!=null?Ae=Ae.__text:Ae.__cnt!=1||Ae.__cdata==null||L.keepCData?Ae.__cnt>1&&Ae.__text!=null&&L.skipEmptyTextNodesForObj&&(L.stripWhitespaces&&Ae.__text==""||Ae.__text.trim()=="")&&delete Ae.__text:Ae=Ae.__cdata,delete Ae.__cnt,!L.enableToStringFunc||Ae.__text==null&&Ae.__cdata==null||(Ae.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),Ae}if(_e.nodeType==3||_e.nodeType==4)return _e.nodeValue}function fe(_e,ke,Ae,Ge){var Z="<"+(_e!=null&&_e.__prefix!=null?_e.__prefix+":":"")+ke;if(Ae!=null)for(var le=0;le<Ae.length;le++){var ae=Ae[le],se=_e[ae];L.escapeMode&&(se=B(se)),Z+=" "+ae.substr(L.attributePrefix.length)+"=",L.useDoubleQuotes?Z+='"'+se+'"':Z+="'"+se+"'"}return Z+(Ge?"/>":">")}function we(_e,ke){return"</"+(_e.__prefix!=null?_e.__prefix+":":"")+ke+">"}function Ee(_e,ke){return L.arrayAccessForm=="property"&&(Ge="_asArray",(Ae=ke.toString()).indexOf(Ge,Ae.length-Ge.length)!==-1)||ke.toString().indexOf(L.attributePrefix)==0||ke.toString().indexOf("__")==0||_e[ke]instanceof Function;var Ae,Ge}function ie(_e){var ke=0;if(_e instanceof Object)for(var Ae in _e)Ee(_e,Ae)||ke++;return ke}function me(_e,ke,Ae){return L.jsonPropertiesFilter.length==0||Ae==""||V(L.jsonPropertiesFilter,_e,ke,Ae)}function ge(_e){var ke=[];if(_e instanceof Object)for(var Ae in _e)Ae.toString().indexOf("__")==-1&&Ae.toString().indexOf(L.attributePrefix)==0&&ke.push(Ae);return ke}function He(_e){var ke="";return _e instanceof Object?ke+=function(Ae){var Ge="";return Ae.__cdata!=null&&(Ge+="<![CDATA["+Ae.__cdata+"]]>"),Ae.__text!=null&&(L.escapeMode?Ge+=B(Ae.__text):Ge+=Ae.__text),Ge}(_e):_e!=null&&(L.escapeMode?ke+=B(_e):ke+=_e),ke}function Oe(_e,ke){return _e===""?ke:_e+"."+ke}function Ze(_e,ke,Ae,Ge){var Z="";if(_e.length==0)Z+=fe(_e,ke,Ae,!0);else for(var le=0;le<_e.length;le++)Z+=fe(_e[le],ke,ge(_e[le]),!1),Z+=$e(_e[le],Oe(Ge,ke)),Z+=we(_e[le],ke);return Z}function $e(_e,ke){var Ae="";if(ie(_e)>0){for(var Ge in _e)if(!Ee(_e,Ge)&&(ke==""||me(_e,Ge,Oe(ke,Ge)))){var Z=_e[Ge],le=ge(Z);Z==null||Z==null?Ae+=fe(Z,Ge,le,!0):Z instanceof Object?Z instanceof Array?Ae+=Ze(Z,Ge,le,ke):Z instanceof Date?(Ae+=fe(Z,Ge,le,!1),Ae+=Z.toISOString(),Ae+=we(Z,Ge)):ie(Z)>0||Z.__text!=null||Z.__cdata!=null?(Ae+=fe(Z,Ge,le,!1),Ae+=$e(Z,Oe(ke,Ge)),Ae+=we(Z,Ge)):Ae+=fe(Z,Ge,le,!0):(Ae+=fe(Z,Ge,le,!1),Ae+=He(Z),Ae+=we(Z,Ge))}}return Ae+He(_e)}this.parseXmlString=function(_e){var ke;if(_e===void 0)return null;if(window.DOMParser){var Ae=new window.DOMParser;try{(ke=Ae.parseFromString(_e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(ke=null)}catch(Ge){ke=null}}else _e.indexOf("<?")==0&&(_e=_e.substr(_e.indexOf("?>")+2)),(ke=new ActiveXObject("Microsoft.XMLDOM")).async="false",ke.loadXML(_e);return ke},this.asArray=function(_e){return _e===void 0||_e==null?[]:_e instanceof Array?_e:[_e]},this.toXmlDateTime=function(_e){return _e instanceof Date?_e.toISOString():typeof _e=="number"?new Date(_e).toISOString():null},this.asDateTime=function(_e){return typeof _e=="string"?J(_e):_e},this.xml2json=function(_e){return ne(_e)},this.xml_str2json=function(_e){var ke=this.parseXmlString(_e);return ke!=null?this.xml2json(ke):null},this.json2xml_str=function(_e){return $e(_e,"")},this.json2xml=function(_e){var ke=this.json2xml_str(_e);return this.parseXmlString(ke)},this.getVersion=function(){return"1.2.0"}},mo="onLoad";function ju(L){L=L||{};var P,B,V,ee,J,H,ne=this.context,fe=(0,m.Z)(ne).getInstance(),we=(0,wt.Z)(ne).getInstance();function Ee(Oe,Ze,$e){var _e,ke,Ae={};Ae.elements=Oe,Ae.type=Ze,Ae.resolveType=$e,Ae.elements.length===0&&me(Ae);for(var Ge=0;Ge<Ae.elements.length;Ge++)_e=Ae.elements[Ge],ke=we.isHTTPURL(_e.url)?_e.url:_e.originalContent.BaseURL+_e.url,H.load(ke,_e,Ae)}function ie(Oe){var Ze,$e,_e="";if(Ze=Oe.element,$e=Oe.resolveObject,Ze.resolvedContent){var ke=0;Ze.resolvedContent.indexOf("<?xml")===0&&(ke=Ze.resolvedContent.indexOf("?>")+2),_e=Ze.resolvedContent.substr(0,ke)+"<response>"+Ze.resolvedContent.substr(ke)+"</response>",Ze.resolvedContent=J.xml_str2json(_e)}(function(Ae){var Ge;for(Ge=0;Ge<Ae.elements.length;Ge++)if(Ae.elements[Ge].resolved===!1)return!1;return!0})($e)&&me($e)}function me(Oe){var Ze,$e,_e=[];if(function(ke){var Ae,Ge,Z,le,ae,se,Q=[];for(le=ke.elements.length-1;le>=0;le--){if(Ge=(Ae=ke.elements[le]).type+"_asArray",Ae.resolvedContent){if(Ae.resolvedContent)for(ae=0;ae<Ae.resolvedContent[Ge].length;ae++)Z=Ae.resolvedContent[Ge][ae],Q.push(Z)}else delete Ae.originalContent["xlink:actuate"],delete Ae.originalContent["xlink:href"],Q.push(Ae.originalContent);for(Ae.parentElement[Ge].splice(Ae.index,1),se=0;se<Q.length;se++)Ae.parentElement[Ge].splice(Ae.index+se,0,Q[se]);Q=[]}ke.elements.length>0&&V.run(ee)}(Oe),Oe.resolveType==="onActuate"&&fe.trigger(T.Z.XLINK_READY,{manifest:ee}),Oe.resolveType===mo)switch(Oe.type){case v.Z.PERIOD:for(Ze=0;Ze<ee[v.Z.PERIOD+"_asArray"].length;Ze++)($e=ee[v.Z.PERIOD+"_asArray"][Ze]).hasOwnProperty(v.Z.ADAPTATION_SET+"_asArray")&&(_e=_e.concat(ge($e[v.Z.ADAPTATION_SET+"_asArray"],$e,v.Z.ADAPTATION_SET,mo))),$e.hasOwnProperty(v.Z.EVENT_STREAM+"_asArray")&&(_e=_e.concat(ge($e[v.Z.EVENT_STREAM+"_asArray"],$e,v.Z.EVENT_STREAM,mo)));Ee(_e,v.Z.ADAPTATION_SET,mo);break;case v.Z.ADAPTATION_SET:fe.trigger(T.Z.XLINK_READY,{manifest:ee})}}function ge(Oe,Ze,$e,_e){var ke,Ae,Ge,Z=[];for(Ae=Oe.length-1;Ae>=0;Ae--)(ke=Oe[Ae]).hasOwnProperty("xlink:href")&&ke["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&Oe.splice(Ae,1);for(Ae=0;Ae<Oe.length;Ae++)(ke=Oe[Ae]).hasOwnProperty("xlink:href")&&ke.hasOwnProperty("xlink:actuate")&&ke["xlink:actuate"]===_e&&(Ge=He(ke["xlink:href"],Ze,$e,Ae,_e,ke),Z.push(Ge));return Z}function He(Oe,Ze,$e,_e,ke,Ae){return{url:Oe,parentElement:Ze,type:$e,index:_e,resolveType:ke,originalContent:Ae,resolvedContent:null,resolved:!1}}return P={resolveManifestOnLoad:function(Oe){J=new Bu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:B}),(ee=Oe).Period_asArray?Ee(ge(ee.Period_asArray,ee,v.Z.PERIOD,mo),v.Z.PERIOD,mo):fe.trigger(T.Z.XLINK_READY,{manifest:ee})},setMatchers:function(Oe){Oe&&(B=Oe)},setIron:function(Oe){Oe&&(V=Oe)},reset:function(){fe.off(T.Z.XLINK_ELEMENT_LOADED,ie,P),H&&(H.reset(),H=null)}},fe.on(T.Z.XLINK_ELEMENT_LOADED,ie,P),H=fm(ne).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),P}ju.__dashjs_factory_name="XlinkController";var wc=U.Z.getClassFactory(ju);function Zu(L){return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Zu(L)}function Cr(L){function P(ee,J){for(var H in ee)J.hasOwnProperty(H)||(J[H]=ee[H])}function B(ee,J,H){for(var ne=0,fe=ee.length;ne<fe;++ne){var we=ee[ne];if(J[we.name])if(H[we.name]){if(we.merge){var Ee=J[we.name],ie=H[we.name];Zu(Ee)==="object"&&Zu(ie)==="object"?P(Ee,ie):H[we.name]=Ee+ie}}else H[we.name]=J[we.name]}}function V(ee,J){for(var H=0,ne=ee.children.length;H<ne;++H){var fe=ee.children[H],we=J[fe.name+"_asArray"];if(we)for(var Ee=0,ie=we.length;Ee<ie;++Ee){var me=we[Ee];B(ee.properties,J,me),V(fe,me)}}}return{run:function(ee){if(ee===null||Zu(ee)!=="object")return ee;if(ee.Period_asArray&&"period"in L)for(var J=L.period,H=ee.Period_asArray,ne=0,fe=H.length;ne<fe;++ne){var we=H[ne];if(V(J,we),"adaptationset"in L){var Ee=we.AdaptationSet_asArray;if(Ee)for(var ie=L.adaptationset,me=0,ge=Ee.length;me<ge;++me)V(ie,Ee[me])}}return ee}}}Cr.__dashjs_factory_name="ObjectIron";var Gu=U.Z.getClassFactory(Cr);function Ph(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var qu=function(){function L(V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._test=V,this._converter=ee}var P,B;return P=L,(B=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&Ph(P.prototype,B),L}();function Rl(L){return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Rl(L)}function ni(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Ya(L,P){return Ya=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Ya(L,P)}function dm(L,P){return!P||Rl(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ac(L){return Ac=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ac(L)}var hm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Ya(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ac(P);if(B){var ne=Ac(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return dm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var ne,fe=(ni(ne={},v.Z.MPD,[v.Z.ID,v.Z.PROFILES]),ni(ne,v.Z.PERIOD,[v.Z.ID]),ni(ne,v.Z.BASE_URL,[v.Z.SERVICE_LOCATION,v.Z.BYTE_RANGE]),ni(ne,v.Z.SEGMENT_BASE,[v.Z.INDEX_RANGE]),ni(ne,v.Z.INITIALIZATION,[v.Z.RANGE]),ni(ne,v.Z.REPRESENTATION_INDEX,[v.Z.RANGE]),ni(ne,v.Z.SEGMENT_LIST,[v.Z.INDEX_RANGE]),ni(ne,v.Z.BITSTREAM_SWITCHING,[v.Z.RANGE]),ni(ne,v.Z.SEGMENT_URL,[v.Z.MEDIA_RANGE,v.Z.INDEX_RANGE]),ni(ne,v.Z.SEGMENT_TEMPLATE,[v.Z.INDEX_RANGE,v.Z.MEDIA,v.Z.INDEX,v.Z.INITIALIZATION_MINUS,v.Z.BITSTREAM_SWITCHING_MINUS]),ni(ne,v.Z.ASSET_IDENTIFIER,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.EVENT_STREAM,[v.Z.VALUE]),ni(ne,v.Z.ADAPTATION_SET,[v.Z.PROFILES,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.CONTENT_TYPE]),ni(ne,v.Z.FRAME_PACKING,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.AUDIO_CHANNEL_CONFIGURATION,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.CONTENT_PROTECTION,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.ESSENTIAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.SUPPLEMENTAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.INBAND_EVENT_STREAM,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.ACCESSIBILITY,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.ROLE,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.RATING,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.VIEWPOINT,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.CONTENT_COMPONENT,[v.Z.CONTENT_TYPE]),ni(ne,v.Z.REPRESENTATION,[v.Z.ID,v.Z.DEPENDENCY_ID,v.Z.MEDIA_STREAM_STRUCTURE_ID]),ni(ne,v.Z.SUBSET,[v.Z.ID]),ni(ne,v.Z.METRICS,[v.Z.METRICS_MINUS]),ni(ne,v.Z.REPORTING,[v.Z.VALUE,v.Z.ID]),ne);if(fe.hasOwnProperty(H)){var we=fe[H];return we!==void 0&&we.indexOf(J.name)>=0}return!1},function(J){return String(J)})}return ee}(qu);function Oh(L){return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Oh(L)}function Lh(L,P){return Lh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Lh(L,P)}function Lf(L,P){return!P||Oh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ic(L){return Ic=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ic(L)}var pm=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,gm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Lh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ic(P);if(B){var ne=Ic(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Lf(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){for(var H=[v.Z.MIN_BUFFER_TIME,v.Z.MEDIA_PRESENTATION_DURATION,v.Z.MINIMUM_UPDATE_PERIOD,v.Z.TIMESHIFT_BUFFER_DEPTH,v.Z.MAX_SEGMENT_DURATION,v.Z.MAX_SUBSEGMENT_DURATION,v.Z.SUGGESTED_PRESENTATION_DELAY,v.Z.START,y.Z.START_TIME,v.Z.DURATION],ne=H.length,fe=0;fe<ne;fe++)if(J.nodeName===H[fe])return pm.test(J.value);return!1},function(J){var H=pm.exec(J),ne=31536e3*parseFloat(H[3]||0)+2592e3*parseFloat(H[5]||0)+86400*parseFloat(H[7]||0)+3600*parseFloat(H[9]||0)+60*parseFloat(H[11]||0)+parseFloat(H[13]||0);return H[1]!==void 0&&(ne=-ne),ne})}return ee}(qu);function kh(L){return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},kh(L)}function kf(L,P){return kf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},kf(L,P)}function mm(L,P){return!P||kh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ff(L){return Ff=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ff(L)}var Fh=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,vm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&kf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ff(P);if(B){var ne=Ff(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return mm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return Fh.test(J.value)},function(J){var H,ne=Fh.exec(J);if(H=Date.UTC(parseInt(ne[1],10),parseInt(ne[2],10)-1,parseInt(ne[3],10),parseInt(ne[4],10),parseInt(ne[5],10),ne[6]&&parseInt(ne[6],10)||0,ne[7]&&1e3*parseFloat(ne[7])||0),ne[9]&&ne[10]){var fe=60*parseInt(ne[9],10)+parseInt(ne[10],10);H+=(ne[8]==="+"?-1:1)*fe*60*1e3}return new Date(H)})}return ee}(qu);function Hu(L){return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Hu(L)}function Nl(L,P){return Nl=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Nl(L,P)}function SE(L,P){return!P||Hu(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Uf(L){return Uf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Uf(L)}var wE=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,xl=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Nl(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Uf(P);if(B){var ne=Uf(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return SE(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return wE.test(J.value)},function(J){return parseFloat(J)})}return ee}(qu);function Ml(L){return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Ml(L)}function Ku(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function bc(L,P){return bc=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},bc(L,P)}function ym(L,P){return!P||Ml(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Dl(L){return Dl=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Dl(L)}var Em=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&bc(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Dl(P);if(B){var ne=Dl(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return ym(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var ne,fe=(Ku(ne={},v.Z.ADAPTATION_SET,[v.Z.LANG]),Ku(ne,v.Z.REPRESENTATION,[v.Z.LANG]),Ku(ne,v.Z.CONTENT_COMPONENT,[v.Z.LANG]),Ku(ne,v.Z.LABEL,[v.Z.LANG]),Ku(ne,v.Z.GROUP_LABEL,[v.Z.LANG]),ne);if(fe.hasOwnProperty(H)){var we=fe[H];return we!==void 0&&we.indexOf(J.name)>=0}return!1},function(J){return Ei()(J)||String(J)})}return ee}(qu);function Bf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var jf=function(){function L(V){var ee;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V,this._merge=(ee=V)&&ee.length&&ee.charAt(0)===ee.charAt(0).toUpperCase()}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&Bf(P.prototype,B),L}();function Cc(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Vu=function(){function L(V,ee,J){var H=this;(function(ne,fe){if(!(ne instanceof fe))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V||"",this._properties=[],this._children=J||[],Array.isArray(ee)&&ee.forEach(function(ne){H._properties.push(new jf(ne))})}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&Cc(P.prototype,B),L}();function Zf(L){return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Zf(L)}function Uh(L,P){return Uh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Uh(L,P)}function AE(L,P){return!P||Zf(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function zu(L){return zu=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},zu(L)}var IE=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Uh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=zu(P);if(B){var ne=zu(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return AE(this,J)});function ee(){(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.PROFILES,v.Z.WIDTH,v.Z.HEIGHT,v.Z.SAR,v.Z.FRAMERATE,v.Z.AUDIO_SAMPLING_RATE,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.MAXIMUM_SAP_PERIOD,v.Z.START_WITH_SAP,v.Z.MAX_PLAYOUT_RATE,v.Z.CODING_DEPENDENCY,v.Z.SCAN_TYPE,v.Z.FRAME_PACKING,v.Z.AUDIO_CHANNEL_CONFIGURATION,v.Z.CONTENT_PROTECTION,v.Z.ESSENTIAL_PROPERTY,v.Z.ESSENTIAL_PROPERTY+"_asArray",v.Z.SUPPLEMENTAL_PROPERTY,v.Z.INBAND_EVENT_STREAM];return V.call(this,v.Z.ADAPTATION_SET,J,[new Vu(v.Z.REPRESENTATION,J,[new Vu(v.Z.SUB_REPRESENTATION,J)])])}return ee}(Vu);function Hr(L){return Hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Hr(L)}function Gf(L,P){return Gf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Gf(L,P)}function Bh(L,P){return!P||Hr(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function qf(L){return qf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},qf(L)}var bE=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Gf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=qf(P);if(B){var ne=qf(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Bh(this,J)});function ee(){(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.SEGMENT_BASE,v.Z.SEGMENT_TEMPLATE,v.Z.SEGMENT_LIST];return V.call(this,v.Z.PERIOD,J,[new Vu(v.Z.ADAPTATION_SET,J,[new Vu(v.Z.REPRESENTATION,J)])])}return ee}(Vu);function Rc(L){L=L||{};var P,B,V,ee,J,H=this.context,ne=L.debug;return P={parse:function(fe){var we,Ee=window.performance.now();if(!(we=ee.xml_str2json(fe)))throw new Error("parsing the manifest failed");var ie=window.performance.now();we.Patch?((we=we.Patch).add_asArray&&we.add_asArray.forEach(function(ge){return J.run(ge)}),we.replace_asArray&&we.replace_asArray.forEach(function(ge){return J.run(ge)})):(we=we.MPD,J.run(we));var me=window.performance.now();return B.info("Parsing complete: ( xml2json: "+(ie-Ee).toPrecision(3)+"ms, objectiron: "+(me-ie).toPrecision(3)+"ms, total: "+((me-Ee)/1e3).toPrecision(3)+"s)"),we.protocol="DASH",we},getMatchers:function(){return V},getIron:function(){return J}},B=ne.getLogger(P),V=[new gm,new vm,new xl,new Em,new hm],ee=new Bu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:V}),J=Gu(H).create({adaptationset:new IE,period:new bE}),P}Rc.__dashjs_factory_name="DashParser";var _m=U.Z.getClassFactory(Rc);function jh(L){L=L||{};var P,B,V,ee,J,H=this.context,ne=L.debug,fe=L.settings,we=(0,m.Z)(H).getInstance(),Ee=(0,wt.Z)(H).getInstance(),ie=L.mssHandler,me=L.errHandler;function ge(Oe){we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:Oe.manifest})}function He(Oe){var Ze=null;return Oe.indexOf("SmoothStreamingMedia")>-1?(ie&&(Ze=ie.createMssParser(),ie.createMssFragmentProcessor(),ie.registerEvents()),Ze):Oe.indexOf("MPD")>-1||Oe.indexOf("Patch")>-1?_m(H).create({debug:ne}):Ze}return P={load:function(Oe){var Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,$e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,_e=new Date,ke=new ji(Oe,nt.w.MPD_TYPE);Ze&&(ke.serviceLocation=Ze),$e&&(ke.queryParams=$e),ke.requestStartDate||(ke.requestStartDate=_e),we.trigger(T.Z.MANIFEST_LOADING_STARTED,{request:ke}),V.load({request:ke,success:function(Ae,Ge,Z){var le,ae,se;if(ee)if(Z&&Z!==Oe?(ae=Ee.parseBaseUrl(Z),le=Z):(Ee.isRelative(Oe)&&(Oe=Ee.resolve(Oe,window.location.href)),ae=Ee.parseBaseUrl(Oe)),Ge!="No Content")if(J===null&&(J=He(Ae)),J!==null){ee.setMatchers(J.getMatchers()),ee.setIron(J.getIron());try{se=J.parse(Ae)}catch(Pe){return void we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}if(se){if(se.url=le||Oe,se.originalUrl||(se.originalUrl=se.url),fe&&fe.get().streaming.enableManifestDurationMismatchFix&&se.mediaPresentationDuration&&se.Period_asArray.length>1){var Q=se.Period_asArray.reduce(function(Pe,be){return Pe+be.duration},0);!isNaN(Q)&&se.mediaPresentationDuration>Q&&(B.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),se.mediaPresentationDuration=Q)}se.baseUri=ae,se.loadedTime=new Date,ee.resolveManifestOnLoad(se),we.trigger(T.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:Ae})}else we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}else we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))});else we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(Ae,Ge,Z){we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Te.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Te.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(Oe,", ").concat(Z))})}})},reset:function(){we.off(T.Z.XLINK_READY,ge,P),ie&&ie.reset(),ee&&(ee.reset(),ee=null),V&&(V.abort(),V=null)}},B=ne.getLogger(P),we.on(T.Z.XLINK_READY,ge,P),V=Ao(H).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:Ee,constants:y.Z,dashConstants:v.Z,errors:Te,requestTimeout:L.settings.get().streaming.manifestRequestTimeout}),ee=wc(H).create({errHandler:me,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),J=null,P}jh.__dashjs_factory_name="ManifestLoader";var Tm=U.Z.getClassFactory(jh);function Zh(){var L=this.context,P=(0,m.Z)(L).getInstance();return{error:function(B){P.trigger(T.Z.ERROR,{error:B})}}}Zh.__dashjs_factory_name="ErrorHandler";var Pl=U.Z.getSingletonFactory(Zh),Sm=w(1715);function wm(){var L,P,B,V,ee,J,H=this.context,ne=(0,m.Z)(H).getInstance();function fe(we,Ee){if(!Ee||!Ee.Period_asArray||Ee.Period_asArray.length===0)return Promise.resolve();var ie=[];return Ee.Period_asArray.forEach(function(me){ie.push(function(ge,He){return new Promise(function(Oe){if(ge&&ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.length!==0){var Ze=[];ge.AdaptationSet_asArray.forEach(function($e){P.getIsTypeOf($e,He)&&Ze.push(function(_e,ke){return new Promise(function(Ae){if(_e.Representation_asArray&&_e.Representation_asArray.length!==0){var Ge=[],Z=[];_e.Representation_asArray.forEach(function(le,ae){var se=P.getCodec(_e,ae,!1),Q=function(Pe,be,Fe){switch(Pe){case y.Z.VIDEO:return function(Ne,pe){return{codec:pe,width:Ne.width||null,height:Ne.height||null,framerate:Ne.frameRate||null,bitrate:Ne.bandwidth||null}}(be,Fe);case y.Z.AUDIO:return function(Ne,pe){var Me=Ne.audioSamplingRate||null;return{codec:pe,bitrate:Ne.bandwidth||null,samplerate:Me}}(be,Fe);default:return null}}(ke,le,se);Z.push(Q),Ge.push(B.supportsCodec(Q,ke))}),Promise.all(Ge).then(function(le){_e.Representation_asArray=_e.Representation_asArray.filter(function(ae,se){return le[se]||J.debug("[Stream] Codec ".concat(Z[se].codec," not supported ")),le[se]}),Ae()}).catch(function(){Ae()})}else Ae()})}($e,He))}),Promise.all(Ze).then(function(){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function($e){var _e=$e.Representation_asArray&&$e.Representation_asArray.length>0;return _e||(ne.trigger(T.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:$e}),J.warn("AdaptationSet has been removed because of no supported Representation")),_e}),Oe()}).catch(function(){Oe()})}else Oe()})}(me,we))}),Promise.all(ie)}return L={setConfig:function(we){we&&(we.adapter&&(P=we.adapter),we.capabilities&&(B=we.capabilities),we.settings&&(V=we.settings),we.customParametersModel&&(ee=we.customParametersModel))},filterUnsupportedFeatures:function(we){return new Promise(function(Ee){var ie=[];ie.push(fe(y.Z.VIDEO,we)),ie.push(fe(y.Z.AUDIO,we)),Promise.all(ie).then(function(){V.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(me){me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(ge){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function(He){return!He.Representation_asArray||He.Representation_asArray.length===0||(He.Representation_asArray=He.Representation_asArray.filter(function(Oe){var Ze=P.getEssentialPropertiesForRepresentation(Oe);if(Ze&&Ze.length>0)for(var $e=0;$e<Ze.length;){if(!B.supportsEssentialProperty(Ze[$e]))return J.debug("[Stream] EssentialProperty not supported: "+Ze[$e].schemeIdUri),!1;$e+=1}return!0}),He.Representation_asArray&&He.Representation_asArray.length>0)})})}(we),function(me){var ge=ee.getCustomCapabilitiesFilters();ge&&ge.length!==0&&me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(He){He.AdaptationSet_asArray=He.AdaptationSet_asArray.filter(function(Oe){return!Oe.Representation_asArray||Oe.Representation_asArray.length===0||(Oe.Representation_asArray=Oe.Representation_asArray.filter(function(Ze){return!ge.some(function($e){return!$e(Ze)})}),Oe.Representation_asArray&&Oe.Representation_asArray.length>0)})})}(we),Ee()}).catch(function(){Ee()})})}},J=(0,x.Z)(H).getInstance().getLogger(L),L}wm.__dashjs_factory_name="CapabilitiesFilter";var CE=U.Z.getSingletonFactory(wm),RE=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function Am(){var L;return{initialize:function(P){if(L=new RE,!P)return null;var B=P.indexOf("#");if(B!==-1)for(var V=P.substr(B+1).split("&"),ee=0,J=V.length;ee<J;++ee){var H=V[ee],ne=H.indexOf("=");if(ne!==-1){var fe=H.substring(0,ne);L.hasOwnProperty(fe)&&(L[fe]=H.substr(ne+1))}}},getURIFragmentData:function(){return L}}}Am.__dashjs_factory_name="URIFragmentModel";var NE=U.Z.getSingletonFactory(Am);function Im(){var L,P=this.context,B=(0,m.Z)(P).getInstance();return{getValue:function(){return L},setValue:function(V){L=V,V&&B.trigger(T.Z.MANIFEST_LOADED,{data:V})}}}Im.__dashjs_factory_name="ManifestModel";var xE=U.Z.getSingletonFactory(Im),Gh=-.5;function qh(){var L,P,B,V,ee=this.context,J=(0,je.Z)(ee).getInstance();function H(we,Ee){return isNaN(we)?0:we>0?(Ee&&P.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):we<Gh?(Ee&&P.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(Gh,": ").concat(-50,"% playback speed.")),Gh):we}function ne(we,Ee){return isNaN(we)?0:we<0?(Ee&&P.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):we>1?(Ee&&P.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):we}function fe(){var we=J.get().streaming.buffer.stableBufferTime>0?J.get().streaming.buffer.stableBufferTime:J.get().streaming.buffer.fastSwitchEnabled?20:12,Ee=B.getLiveDelay();return!isNaN(Ee)&&Ee>0?Math.min(we,Ee):we}return L={getCatchupMaxDrift:function(){if(!isNaN(J.get().streaming.liveCatchup.maxDrift)&&J.get().streaming.liveCatchup.maxDrift>0)return J.get().streaming.liveCatchup.maxDrift;var we=V.getServiceDescriptionSettings();return we&&we.liveCatchup&&!isNaN(we.liveCatchup.maxDrift)&&we.liveCatchup.maxDrift>0?we.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return J.get().streaming.liveCatchup.enabled!==null?J.get().streaming.liveCatchup.enabled:B.getInitialCatchupModeActivated()},getStableBufferTime:fe,getInitialBufferLevel:function(){var we=J.get().streaming.buffer.initialBufferLevel;return isNaN(we)||we<0?0:Math.min(fe(),we)},getRetryAttemptsForType:function(we){var Ee=isNaN(J.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:J.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryAttempts[we]*Ee:J.get().streaming.retryAttempts[we]},getRetryIntervalsForType:function(we){var Ee=isNaN(J.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:J.get().streaming.retryIntervals.lowLatencyReductionFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryIntervals[we]/Ee:J.get().streaming.retryIntervals[we]},getCatchupPlaybackRates:function(we){var Ee=J.get().streaming.liveCatchup.playbackRate;if(!isNaN(Ee.min)||!isNaN(Ee.max))return{min:H(Ee.min,we),max:ne(Ee.max,we)};var ie=V.getServiceDescriptionSettings();if(ie&&ie.liveCatchup&&(!isNaN(ie.liveCatchup.playbackRate.min)||!isNaN(ie.liveCatchup.playbackRate.max))){var me=ie.liveCatchup.playbackRate;return{min:H(me.min,we),max:ne(me.max,we)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(we,Ee){try{var ie=J.get().streaming.abr[we][Ee];if(!isNaN(ie)&&ie!==-1)return ie;var me=V.getServiceDescriptionSettings();return me&&me[we]&&!isNaN(me[we][Ee])?me[we][Ee]:-1}catch(ge){return-1}},setConfig:function(we){we.playbackController&&(B=we.playbackController),we.serviceDescriptionController&&(V=we.serviceDescriptionController)},reset:function(){}},P=(0,x.Z)(ee).getInstance().getLogger(L),L}qh.__dashjs_factory_name="MediaPlayerModel";var Ol=U.Z.getSingletonFactory(qh),Nc=w(1767);function Hh(L){var P=(L=L||{}).abrController,B=L.switchHistory,V=L.droppedFramesHistory,ee=L.currentRequest,J=L.useBufferOccupancyABR,H=L.useL2AABR,ne=L.useLoLPABR,fe=L.streamProcessor?L.streamProcessor.getScheduleController():null,we=L.streamProcessor?L.streamProcessor.getRepresentationInfo():null,Ee=L.videoModel?L.videoModel:null;function ie(){return we?we.mediaInfo:null}return{getMediaType:function(){var me=ie();return me?me.type:null},getMediaInfo:ie,getDroppedFramesHistory:function(){return V},getCurrentRequest:function(){return ee},getSwitchHistory:function(){return B},getStreamInfo:function(){var me=ie();return me?me.streamInfo:null},getScheduleController:function(){return fe},getAbrController:function(){return P},getRepresentationInfo:function(){return we},useBufferOccupancyABR:function(){return J},useL2AABR:function(){return H},useLoLPABR:function(){return ne},getVideoModel:function(){return Ee}}}Hh.__dashjs_factory_name="RulesContext";var Kh=U.Z.getClassFactory(Hh),sa=w(2068);function Rr(){var L=[],P=[];return{push:function(B){B.newValue===sa.Z.NO_CHANGE&&(B.newValue=B.oldValue),L[B.oldValue]||(L[B.oldValue]={noDrops:0,drops:0,dropSize:0});var V=B.newValue-B.oldValue,ee=V<0?1:0,J=ee?-V:0,H=ee?0:1;if(L[B.oldValue].drops+=ee,L[B.oldValue].dropSize+=J,L[B.oldValue].noDrops+=H,P.push({idx:B.oldValue,noDrop:H,drop:ee,dropSize:J}),P.length>8){var ne=P.shift();L[ne.idx].drops-=ne.drop,L[ne.idx].dropSize-=ne.dropSize,L[ne.idx].noDrops-=ne.noDrop}},getSwitchRequests:function(){return L},reset:function(){L=[],P=[]}}}Rr.__dashjs_factory_name="SwitchRequestHistory";var gi=U.Z.getClassFactory(Rr);function hu(){var L={},P={},B={};return{push:function(V,ee,J){if(ee){L[V]||(L[V]=[],P[V]=0,B[V]=0);var H=J&&J.droppedVideoFrames?J.droppedVideoFrames:0,ne=J&&J.totalVideoFrames?J.totalVideoFrames:0,fe=H-P[V];P[V]=H;var we=ne-B[V];B[V]=ne;var Ee=L[V];isNaN(ee)||(Ee[ee]?(Ee[ee].droppedVideoFrames+=fe,Ee[ee].totalVideoFrames+=we):Ee[ee]={droppedVideoFrames:fe,totalVideoFrames:we})}},getFrameHistory:function(V){return L[V]},clearForStream:function(V){try{delete L[V],delete P[V],delete B[V]}catch(ee){}},reset:function(){L={},P={},B={}}}}hu.__dashjs_factory_name="DroppedFramesHistory";var Vh=U.Z.getClassFactory(hu);function Yu(L){var P,B,V,ee,J,H=this.context,ne=(L=L||{}).settings,fe=(0,m.Z)(H).getInstance();function we(Oe,Ze,$e,_e){var ke=Math.pow(.5,$e/_e.fast);Oe.fastEstimate=(1-ke)*Ze+ke*Oe.fastEstimate;var Ae=Math.pow(.5,$e/_e.slow);Oe.slowEstimate=(1-Ae)*Ze+Ae*Oe.slowEstimate,Oe.totalWeight+=$e}function Ee(Oe,Ze,$e){return ne.get().streaming.abr.movingAverageMethod!==y.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(_e,ke){var Ae=_e?J.throughputHalfLife:J.latencyHalfLife,Ge=_e?V[ke]:ee[ke];if(!Ge||Ge.totalWeight<=0)return NaN;var Z=Ge.fastEstimate/(1-Math.pow(.5,Ge.totalWeight/Ae.fast)),le=Ge.slowEstimate/(1-Math.pow(.5,Ge.totalWeight/Ae.slow));return _e?Math.min(Z,le):Math.max(Z,le)}(Oe,Ze):function(_e,ke,Ae){var Ge=function(le,ae,se){var Q,Pe;if(le?(Q=P[ae],Pe=se?3:4):(Q=B[ae],Pe=4),Q){if(Pe>=Q.length)Pe=Q.length;else if(le)for(var be=1;be<Pe;++be){var Fe=Q[Q.length-be]/Q[Q.length-be-1];if((Fe>=1.3||Fe<=.7692307692307692)&&(Pe+=1)===Q.length)break}}else Pe=0;return Pe}(_e,ke,Ae),Z=(_e?P:B)[ke];return Ge!==0&&Z&&Z.length!==0?(Z=Z.slice(-Ge)).reduce(function(le,ae){return le+ae})/Z.length:NaN}(Oe,Ze,$e)}function ie(Oe,Ze){return Ee(!0,Oe,Ze)}function me(Oe){P[Oe]=P[Oe]||[],B[Oe]=B[Oe]||[],V[Oe]=V[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0},ee[Oe]=ee[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function ge(){P={},B={},V={},ee={}}var He={push:function(Oe,Ze,$e){if(Ze.trace&&Ze.trace.length){var _e,ke=Ze.tresponse.getTime()-Ze.trequest.getTime()||1,Ae=Ze._tfinish.getTime()-Ze.tresponse.getTime()||1,Ge=Ze.trace.reduce(function(se,Q){return se+Q.b[0]},0),Z=0;if((_e=Ze._fileLoaderType&&Ze._fileLoaderType===y.Z.FILE_LOADER_TYPES.FETCH?Ze.trace.reduce(function(se,Q){return se+Q.d},0):$e?Ae:ke+Ae)!==0&&(Z=Math.round(8*Ge/_e)),Ze.cmsd){var le=Ze.cmsd.dynamic&&Ze.cmsd.dynamic.etp?Ze.cmsd.dynamic.etp:null;if(le){var ae=ne.get().streaming.cmsd.abr.etpWeightRatio;ae>0&&ae<=1&&(Z=Z*(1-ae)+le*ae)}}if(me(Oe),function(se,Q,Pe){return se===y.Z.VIDEO?Pe<ne.get().streaming.cacheLoadThresholds[y.Z.VIDEO]:se===y.Z.AUDIO?Pe<ne.get().streaming.cacheLoadThresholds[y.Z.AUDIO]:void 0}(Oe,0,Ae)){if(P[Oe].length>0&&!P[Oe].hasCachedEntries)return;P[Oe].hasCachedEntries=!0}else P[Oe]&&P[Oe].hasCachedEntries&&function(se){delete P[se],delete B[se],delete V[se],delete ee[se],me(se)}(Oe);P[Oe].push(Z),fe.trigger(_.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:Z,mediaType:Oe,httpRequest:Ze}),P[Oe].length>20&&P[Oe].shift(),B[Oe].push(ke),B[Oe].length>20&&B[Oe].shift(),we(V[Oe],Z,.001*Ae,J.throughputHalfLife),we(ee[Oe],ke,1,J.latencyHalfLife)}},getAverageThroughput:ie,getSafeAverageThroughput:function(Oe,Ze){var $e=ie(Oe,Ze);return isNaN($e)||($e*=ne.get().streaming.abr.bandwidthSafetyFactor),$e},getAverageLatency:function(Oe){return Ee(!1,Oe)},reset:ge};return J={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},ge(),He}Yu.__dashjs_factory_name="ThroughputHistory";var bm=U.Z.getClassFactory(Yu);function Hf(){var L,P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He,Oe,Ze,$e,_e,ke,Ae,Ge,Z,le,ae,se,Q,Pe=this.context,be=(0,x.Z)(Pe).getInstance(),Fe=(0,m.Z)(Pe).getInstance();function Ne(){ee={},J={},ne={},H={},ke={},Z={},le={},ae={},we===void 0&&(we=!1),Ae&&Ae.reset(),_e=void 0,Ae=void 0,Ge=void 0,clearTimeout(fe),fe=null}function pe(ot){var yt=ot.request.mediaType,$t=ot.streamId;if(yt&&$t&&H[$t]&&Q.get().streaming.abr.autoSwitchBitrate[yt]){var xt=H[$t][yt];if(xt){var en=Kh(Pe).create({abrController:L,streamProcessor:xt,currentRequest:ot.request,useBufferOccupancyABR:Z[yt],useL2AABR:le[yt],useLoLPABR:ae[yt],videoModel:ge}),Jt=B.shouldAbandonFragment(en,$t);Jt.quality>sa.Z.NO_CHANGE&&xt.getFragmentModel().getRequests({state:X.FRAGMENT_MODEL_LOADING,index:ot.request.index})[0]&&(ne[$t][yt].state=D.Z.ABANDON_LOAD,ke[$t][yt].reset(),ke[$t][yt].push({oldValue:et(yt,$t),newValue:Jt.quality,confidence:1,reason:Jt.reason}),ht(yt,V.getActiveStreamInfo(),Jt.quality,Jt.reason),clearTimeout(fe),fe=setTimeout(function(){ne[$t][yt].state=D.Z.ALLOW_LOAD,fe=null},Q.get().streaming.abandonLoadTimeout))}}}function Me(ot){ot.mediaType===y.Z.VIDEO&&(_e!==void 0&&Ae.push(ot.streamId,_e,ge.getPlaybackQuality()),_e=ot.newQuality)}function Xe(ot){var yt,$t;ot.metric!==D.Z.HTTP_REQUEST||!ot.value||ot.value.type!==nt.w.MEDIA_SEGMENT_TYPE||ot.mediaType!==y.Z.AUDIO&&ot.mediaType!==y.Z.VIDEO||Ge.push(ot.mediaType,ot.value,Q.get().streaming.abr.useDeadTimeLatency),ot.metric!==D.Z.BUFFER_LEVEL||ot.mediaType!==y.Z.AUDIO&&ot.mediaType!==y.Z.VIDEO||(yt=ot.mediaType,$t=.001*ot.value.level,Q.get().streaming.abr.ABRStrategy===y.Z.ABR_STRATEGY_DYNAMIC&&function(xt,en){try{var Jt=He.getStableBufferTime(),Wt=Jt,Dn=.5*Jt,Nn=Z[xt],rr=en>(Nn?Dn:Wt);Z[xt]=rr,rr!==Nn&&(rr?P.info("["+xt+"] switching from throughput to buffer occupancy ABR rule (buffer: "+en.toFixed(3)+")."):P.info("["+xt+"] switching from buffer occupancy to throughput ABR rule (buffer: "+en.toFixed(3)+")."))}catch(ir){P.error(ir)}}(yt,$t))}function dt(ot,yt){try{var $t;return ee[yt]=ee[yt]||{},ee[yt].hasOwnProperty(ot)||(ee[yt][ot]=0),$t=function(xt,en){var Jt=ee[en][xt],Wt=Jt;if(!H[en]||!H[en][xt])return Wt;var Dn=ut(xt,en);Dn!==void 0&&(Wt=Math.max(Jt,Dn));var Nn=function(rr,ir){try{var It=He.getAbrBitrateParameter("maxBitrate",rr);return It>-1?kt(H[ir][rr].getMediaInfo(),It,ir):void 0}catch(Xt){return}}(xt,en);return Nn!==void 0&&(Wt=Math.min(Wt,Nn)),Wt}(ot,yt),$t=function(xt,en,Jt){var Wt=ee[Jt][en],Dn=Q.get().streaming.abr.maxRepresentationRatio[en];return isNaN(Dn)||Dn>=1||Dn<0?xt:Math.min(xt,Math.round(Wt*Dn))}($t,ot,yt),$t=function(xt,en,Jt){if(en!==y.Z.VIDEO||!Q.get().streaming.abr.limitBitrateByPortal||!H[Jt]||!H[Jt][en])return xt;we||An();var Wt=H[Jt][en].getStreamInfo(),Dn=me.getAdaptationForType(Wt.index,en,Wt).Representation_asArray,Nn=xt;if(Ee>0&&ie>0){for(;Nn>0&&Dn[Nn]&&Ee<Dn[Nn].width&&Ee-Dn[Nn-1].width<Dn[Nn].width-Ee;)Nn-=1;for(;Nn<Dn.length-1&&Dn[Nn].width===Dn[Nn+1].width;)Nn+=1}return Nn}($t,ot,yt),Q.get().streaming.cmsd.enabled&&Q.get().streaming.cmsd.abr.applyMb&&($t=function(xt,en,Jt){if(en!=="video")return xt;var Wt=Ze.getMaxBitrate(en);if(Wt<0)return xt;var Dn=Ht(Jt,"audio",et("audio",Jt));Wt-=Dn?Dn.bitrate/1e3:0;var Nn=kt(H[Jt][en].getMediaInfo(),Wt,Jt);return P.debug("Stream ID: "+Jt+" ["+en+"] Apply max bit rate from CMSD: "+Wt),Math.min(xt,Nn)}($t,ot,yt)),$t}catch(xt){return}}function ut(ot,yt){try{return function($t,xt){try{var en=He.getAbrBitrateParameter("minBitrate",$t);if(en>-1){var Jt=H[xt][$t].getMediaInfo(),Wt=Ut(Jt),Dn=kt(Jt,en,xt);return Wt[Dn]&&Dn<Wt.length-1&&Wt[Dn].bitrate<1e3*en&&Dn++,Dn}return}catch(Nn){return}}(ot,yt)}catch($t){return}}function et(ot){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return yt||(yt=V.getActiveStreamInfo().id),ot&&H[yt]&&H[yt][ot]&&yt?(J[yt]=J[yt]||{},J[yt].hasOwnProperty(ot)||(J[yt][ot]=0),J[yt][ot]):0}catch($t){return 0}}function ht(ot,yt,$t){var xt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(yt&&yt.id&&ot){var en=yt.id,Jt=et(ot,en);(0,ye.SE)($t);var Wt=dt(ot,en);$t!==Jt&&$t>=0&&$t<=Wt&&jt(ot,Jt,$t,Wt,xt,en)}}function jt(ot,yt,$t,xt,en,Jt){if(ot&&H[Jt]&&H[Jt][ot]){var Wt=H[Jt][ot].getStreamInfo(),Dn=Wt&&Wt.manifestInfo&&Wt.manifestInfo.isDynamic,Nn=se.getCurrentBufferLevel(ot);P.info("Stream ID: "+Jt+" ["+ot+"] switch from "+yt+" to "+$t+"/"+xt+" (buffer: "+Nn+") "+(en?JSON.stringify(en):".")),J[Jt]=J[Jt]||{},J[Jt][ot]=$t;var rr=Ht(Jt,ot,$t);Fe.trigger(T.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:yt,newQuality:$t,reason:en,streamInfo:Wt,bitrateInfo:rr,maxIdx:xt,mediaType:ot},{streamId:Wt.id,mediaType:ot});var ir=Ge.getAverageThroughput(ot,Dn);isNaN(ir)||$e.setSavedBitrateSettings(ot,ir)}}function Ht(ot,yt,$t){if(yt&&H&&H[ot]&&H[ot][yt]){var xt=Ut(H[ot][yt].getMediaInfo());return xt[$t]?xt[$t]:null}return null}function kt(ot,yt,$t){var xt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,en=ot&&ot.type?H[$t][ot.type].getRepresentationInfo():null;if(Q.get().streaming.abr.useDeadTimeLatency&&xt&&en&&en.fragmentDuration){xt/=1e3;var Jt=en.fragmentDuration;if(xt>Jt)return 0;var Wt=xt/Jt;yt*=1-Wt}for(var Dn=Ut(ot),Nn=Dn.length-1;Nn>=0;Nn--){var rr=Dn[Nn];if(1e3*yt>=rr.bitrate)return Nn}return 0}function Ut(ot){var yt=[];if(!ot||!ot.bitrateList)return yt;for(var $t,xt=ot.bitrateList,en=ot.type,Jt=0,Wt=xt.length;Jt<Wt;Jt++)($t=new Ou).mediaType=en,$t.qualityIndex=Jt,$t.bitrate=xt[Jt].bandwidth,$t.width=xt[Jt].width,$t.height=xt[Jt].height,$t.scanType=xt[Jt].scanType,yt.push($t);return yt}function An(){if(ge){var ot=Q.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;Ee=ge.getClientWidth()*ot,ie=ge.getClientHeight()*ot}}return L={initialize:function(){Ae=Vh(Pe).create(),Ge=bm(Pe).create({settings:Q}),(B=(0,Nc.Z)(Pe).create({dashMetrics:se,customParametersModel:Oe,mediaPlayerModel:He,settings:Q})).initialize(),Fe.on(_.Z.QUALITY_CHANGE_RENDERED,Me,L),Fe.on(_.Z.METRIC_ADDED,Xe,L),Fe.on(T.Z.LOADING_PROGRESS,pe,L)},isPlayingAtTopQuality:function(ot){var yt=ot?ot.id:null,$t=et(y.Z.AUDIO,yt),xt=et(y.Z.VIDEO,yt);return $t===dt(y.Z.AUDIO,yt)&&xt===dt(y.Z.VIDEO,yt)},updateTopQualityIndex:function(ot){var yt=ot.type,$t=ot.streamInfo.id,xt=ot.representationCount-1;return ee[$t]=ee[$t]||{},ee[$t][yt]=xt,xt},clearDataForStream:function(ot){Ae&&Ae.clearForStream(ot),H[ot]&&delete H[ot],ke[ot]&&delete ke[ot],ne[ot]&&delete ne[ot]},getThroughputHistory:function(){return Ge},getBitrateList:Ut,getQualityForBitrate:kt,getTopBitrateInfoFor:function(ot){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(yt||(yt=V.getActiveStreamInfo().id),ot&&H&&H[yt]&&H[yt][ot]){var $t=dt(ot,yt),xt=Ut(H[yt][ot].getMediaInfo());return xt[$t]?xt[$t]:null}return null},getMinAllowedIndexFor:ut,getMaxAllowedIndexFor:dt,getInitialBitrateFor:function(ot,yt){if(function(){if(!$e||!$e.hasOwnProperty("getSavedBitrateSettings"))throw new Error(y.Z.MISSING_CONFIG_ERROR)}(),ot===y.Z.TEXT)return NaN;var $t=$e.getSavedBitrateSettings(ot),xt=He.getAbrBitrateParameter("initialBitrate",ot),en=Q.get().streaming.abr.initialRepresentationRatio[ot];if(xt===-1)if(en>-1){var Jt=H[yt][ot].getStreamInfo(),Wt=me.getAdaptationForType(Jt.index,ot,Jt).Representation_asArray;xt=Array.isArray(Wt)?Wt[Math.max(Math.round(Wt.length*en)-1,0)].bandwidth/1e3:0}else xt=isNaN($t)?ot===y.Z.VIDEO?1e3:100:$t;return xt},getQualityFor:et,getAbandonmentStateFor:function(ot,yt){return ne[ot]&&ne[ot][yt]?ne[ot][yt].state:null},setPlaybackQuality:ht,checkPlaybackQuality:function(ot,yt){try{if(!(ot&&H&&H[yt]&&H[yt][ot]))return!1;if(Ae){var $t=ge.getPlaybackQuality();$t&&Ae.push(yt,_e,$t)}if(!Q.get().streaming.abr.autoSwitchBitrate[ot])return!1;var xt=et(ot,yt),en=Kh(Pe).create({abrController:L,switchHistory:ke[yt][ot],droppedFramesHistory:Ae,streamProcessor:H[yt][ot],currentValue:xt,useBufferOccupancyABR:Z[ot],useL2AABR:le[ot],useLoLPABR:ae[ot],videoModel:ge}),Jt=ut(ot,yt),Wt=dt(ot,yt),Dn=B.getMaxQuality(en),Nn=Dn.quality;return Jt!==void 0&&(Nn>sa.Z.NO_CHANGE?Nn:xt)<Jt&&(Nn=Jt),Nn>Wt&&(Nn=Wt),ke[yt][ot].push({oldValue:xt,newValue:Nn}),Nn>sa.Z.NO_CHANGE&&Nn!==xt&&(ne[yt][ot].state===D.Z.ALLOW_LOAD||Nn<xt)&&(jt(ot,xt,Nn,Wt,Dn.reason,yt),!0)}catch(rr){return!1}},setElementSize:An,setWindowResizeEventCalled:function(ot){we=ot},registerStreamType:function(ot,yt){var $t=yt.getStreamInfo().id;H[$t]||(H[$t]={}),ke[$t]||(ke[$t]={}),ne[$t]||(ne[$t]={}),ke[$t][ot]=gi(Pe).create(),H[$t][ot]=yt,ne[$t][ot]={},ne[$t][ot].state=D.Z.ALLOW_LOAD,function(xt){var en=Q.get().streaming.abr.ABRStrategy;en===y.Z.ABR_STRATEGY_L2A?(Z[xt]=!1,ae[xt]=!1,le[xt]=!0):en===y.Z.ABR_STRATEGY_LoLP?(Z[xt]=!1,ae[xt]=!0,le[xt]=!1):en===y.Z.ABR_STRATEGY_BOLA?(Z[xt]=!0,ae[xt]=!1,le[xt]=!1):en===y.Z.ABR_STRATEGY_THROUGHPUT?(Z[xt]=!1,ae[xt]=!1,le[xt]=!1):en===y.Z.ABR_STRATEGY_DYNAMIC&&(Z[xt]=!(!Z||!Z[xt])&&Z[xt],ae[xt]=!1,le[xt]=!1)}(ot),ot===y.Z.VIDEO&&An()},unRegisterStreamType:function(ot,yt){try{H[ot]&&H[ot][yt]&&delete H[ot][yt],ke[ot]&&ke[ot][yt]&&delete ke[ot][yt],ne[ot]&&ne[ot][yt]&&delete ne[ot][yt]}catch($t){}},setConfig:function(ot){ot&&(ot.streamController&&(V=ot.streamController),ot.domStorage&&($e=ot.domStorage),ot.mediaPlayerModel&&(He=ot.mediaPlayerModel),ot.customParametersModel&&(Oe=ot.customParametersModel),ot.cmsdModel&&(Ze=ot.cmsdModel),ot.dashMetrics&&(se=ot.dashMetrics),ot.adapter&&(me=ot.adapter),ot.videoModel&&(ge=ot.videoModel),ot.settings&&(Q=ot.settings))},reset:function(){Ne(),Fe.off(T.Z.LOADING_PROGRESS,pe,L),Fe.off(_.Z.QUALITY_CHANGE_RENDERED,Me,L),Fe.off(_.Z.METRIC_ADDED,Xe,L),B&&B.reset()}},P=be.getLogger(L),Ne(),L}Hf.__dashjs_factory_name="AbrController";var zh=U.Z.getSingletonFactory(Hf);zh.QUALITY_DEFAULT=0,U.Z.updateSingletonFactory(Hf.__dashjs_factory_name,zh);var Wn=zh,Cm=new Map([[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function xc(){var L,P,B,V,ee,J,H,ne,fe=this.context,we=(0,m.Z)(fe).getInstance(),Ee=[];function ie(){B&&(B.playbackRate=1,B.removeEventListener("canplay",ie))}function me(){return Ee.length>0}function ge(){if(B&&me()&&B.playbackRate===0){var Ae=document.createEvent("Event");Ae.initEvent("waiting",!0,!1),B.dispatchEvent(Ae)}}function He(Ae,Ge){B&&B.addEventListener(Ae,Ge)}function Oe(Ae,Ge){B&&B.removeEventListener(Ae,Ge)}function Ze(){return B?B.readyState:NaN}function $e(){return B?B.buffered:null}function _e(Ae,Ge,Z,le,ae){if(B){for(var se=0;se<B.textTracks.length;se++)if(B.textTracks[se].kind===Ae&&(!Ge||B.textTracks[se].label==Ge)&&B.textTracks[se].language===Z&&B.textTracks[se].isTTML===le&&B.textTracks[se].isEmbedded===ae)return B.textTracks[se]}return null}function ke(Ae,Ge){return Ae===y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Ze()>=Ae?(Ge(),null):function(Z,le){var ae=function se(){Oe(Z,se),le(Z)};return He(Z,ae),{func:ae,event:Z}}(Cm.get(Ae),Ge)}return L={addEventListener:He,addTextTrack:function(Ae,Ge,Z,le,ae){if(!B)return null;var se=_e(Ae,Ge,Z,le,ae);return se||((se=B.addTextTrack(Ae,Ge,Z)).isEmbedded=ae,se.isTTML=le),se},appendChild:function(Ae){B&&(B.appendChild(Ae),Ae.isTTML!==void 0&&(B.textTracks[B.textTracks.length-1].isTTML=Ae.isTTML,B.textTracks[B.textTracks.length-1].isEmbedded=Ae.isEmbedded))},getBufferRange:$e,getClientHeight:function(){return B?B.clientHeight:NaN},getClientWidth:function(){return B?B.clientWidth:NaN},getElement:function(){return B},getEnded:function(){return B?B.ended:null},getPlaybackQuality:function(){if(!B)return null;var Ae="webkitDroppedFrameCount"in B&&"webkitDecodedFrameCount"in B,Ge=null;return"getVideoPlaybackQuality"in B?Ge=B.getVideoPlaybackQuality():Ae&&(Ge={droppedVideoFrames:B.webkitDroppedFrameCount,totalVideoFrames:B.webkitDroppedFrameCount+B.webkitDecodedFrameCount,creationTime:new Date}),Ge},getPlaybackRate:function(){return B?B.playbackRate:null},getPlayedRanges:function(){return B?B.played:null},getReadyState:Ze,getSource:function(){return B?B.src:null},getTTMLRenderingDiv:function(){return J},getTextTrack:_e,getTextTracks:function(){return B?B.textTracks:[]},getTime:function(){return B?isNaN(V)?B.currentTime:V:null},getVideoHeight:function(){return B?B.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(B){var Ae=B.parentNode.host||B.parentNode;return Ae?B.getBoundingClientRect().left-Ae.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(B){var Ae=B.parentNode.host||B.parentNode;return Ae?B.getBoundingClientRect().top-Ae.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return B?B.videoWidth:NaN},getVttRenderingDiv:function(){return H},initialize:function(){we.on(T.Z.PLAYBACK_PLAYING,ge,this)},isPaused:function(){return B?B.paused:null},isSeeking:function(){return B?B.seeking||!isNaN(V):null},isStalled:me,pause:function(){B&&(B.pause(),B.autoplay=!1)},play:function(){if(B){B.autoplay=!0;var Ae=B.play();Ae&&Ae.catch&&typeof Promise<"u"&&Ae.catch(function(Ge){Ge.name==="NotAllowedError"&&we.trigger(T.Z.PLAYBACK_NOT_ALLOWED),P.warn("Caught pending play exception - continuing (".concat(Ge,")"))})}},removeChild:function(Ae){B&&B.removeChild(Ae)},removeEventListener:Oe,reset:function(){clearTimeout(ne),we.off(T.Z.PLAYBACK_PLAYING,ge,this)},setCurrentTime:function(Ae,Ge){B&&(ee&&ee.func&&ee.event&&Oe(ee.event,ee.func),V=Ae,ee=ke(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(B)if(B.currentTime!==V)try{V=Ge?function(Z){var le=$e(),ae=Z,se=9999999999;if(le)for(var Q=0;Q<le.length;Q++){var Pe=le.start(Q),be=le.end(Q),Fe=Math.abs(Pe-Z),Ne=Math.abs(be-Z);if(Z>=Pe&&Z<=be)return Z;Fe<se&&(se=Fe,ae=Pe),Ne<se&&(se=Ne,ae=be)}return ae}(V):V,isNaN(V)||(B.currentTime=V),V=NaN}catch(Z){B.readyState===0&&Z.code===Z.INVALID_STATE_ERR&&(ne=setTimeout(function(){B.currentTime=V,V=NaN},400))}else V=NaN}))},setElement:function(Ae){if(!(Ae==null||Ae&&/^(VIDEO|AUDIO)$/i.test(Ae.nodeName)))throw"element is not video or audio DOM type!";(B=Ae)&&(B.preload="auto")},setPlaybackRate:function(Ae){var Ge=arguments.length>1&&arguments[1]!==void 0&&arguments[1];B&&(!Ge&&B.readyState<=2&&Ae>0?B.addEventListener("canplay",ie):B.playbackRate=Ae)},setSource:function(Ae){B&&(Ae?B.src=Ae:(B.removeAttribute("src"),B.load()))},setStallState:function(Ae,Ge){(function(Z,le){le?function(ae){ae!==null&&B&&!B.seeking&&Ee.indexOf(ae)===-1&&Ee.push(ae)}(Z):function(ae){var se=Ee.indexOf(ae);ae!==null&&se!==-1&&Ee.splice(se,1)}(Z)})(Ae,Ge)},setTTMLRenderingDiv:function(Ae){(J=Ae).style.position="absolute",J.style.display="flex",J.style.overflow="hidden",J.style.pointerEvents="none",J.style.top=0,J.style.left=0},setVttRenderingDiv:function(Ae){H=Ae},waitForReadyState:ke,setDisableRemotePlayback:function(Ae){B&&(B.disableRemotePlayback=Ae)}},P=(0,x.Z)(fe).getInstance().getLogger(L),V=NaN,L}xc.__dashjs_factory_name="VideoModel";var Sr=U.Z.getSingletonFactory(xc),Ll=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],pu="dashjs_?_bitrate",Kr="dashjs_?_settings",Ho="localStorage",Li="lastBitrate",Rm="lastMediaSettings";function Yh(L){L=L||{};var P,B,V,ee=this.context,J=L.settings;function H(Ee){if(V!==void 0)return V;var ie;V=!1;try{typeof window<"u"&&(ie=window[Ee])}catch(me){return B.warn("DOMStorage access denied: "+me.message),V}if(!ie||Ee!==Ho)return V;try{ie.setItem("1","1"),ie.removeItem("1"),V=!0}catch(me){B.warn("DOMStorage is supported, but cannot be used: "+me.message)}return V}function ne(){var Ee=6e5;return Math.round(new Date().getTime()/Ee)*Ee}function fe(Ee,ie){return H(Ee)&&J.get().streaming[ie+"CachingInfo"].enabled}function we(){if(!J)throw new Error(y.Z.MISSING_CONFIG_ERROR)}return P={getSavedBitrateSettings:function(Ee){if(we(),!J.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var ie=NaN;if(fe(Ho,Li)){var me=pu.replace(/\?/,Ee);try{var ge=JSON.parse(localStorage.getItem(me))||{},He=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastBitrateCachingInfo.ttl||!1,Oe=parseFloat(ge.bitrate);isNaN(Oe)||He?He&&localStorage.removeItem(me):(ie=Oe,B.debug("Last saved bitrate for "+Ee+" was "+Oe))}catch(Ze){return null}}return ie},setSavedBitrateSettings:function(Ee,ie){if(fe(Ho,Li)&&ie){var me=pu.replace(/\?/,Ee);try{localStorage.setItem(me,JSON.stringify({bitrate:ie.toFixed(3),timestamp:ne()}))}catch(ge){B.error(ge.message)}}},getSavedMediaSettings:function(Ee){if(we(),!J.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var ie=null;if(fe(Ho,Rm)){var me=Kr.replace(/\?/,Ee);try{var ge=JSON.parse(localStorage.getItem(me))||{},He=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;ie=ge.settings,He&&(localStorage.removeItem(me),ie=null)}catch(Oe){return null}}return ie},setSavedMediaSettings:function(Ee,ie){if(fe(Ho,Rm)){var me=Kr.replace(/\?/,Ee);try{localStorage.setItem(me,JSON.stringify({settings:ie,timestamp:ne()}))}catch(ge){B.error(ge.message)}}}},B=(0,x.Z)(ee).getInstance().getLogger(P),H(Ho)&&Ll.forEach(function(Ee){var ie=localStorage.getItem(Ee.oldKey);if(ie){localStorage.removeItem(Ee.oldKey);try{localStorage.setItem(Ee.newKey,ie)}catch(me){B.error(me.message)}}}),P}Yh.__dashjs_factory_name="DOMStorage";var ME=U.Z.getSingletonFactory(Yh),Nm=w(2032),Wh=w(2011);function Mc(){var L,P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge=this.context;function He(_e,ke,Ae,Ge){var Z=null,le=_e?me.resolve(_e.path):null,ae=Ge||{init:!0,url:le?le.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:ke};P.debug("Start searching for initialization.");var se=$e(ae);ne.load({request:se,success:function(Q){if(ae.bytesLoaded=ae.range.end,!(Z=V.findInitRange(Q)))return ae.range.end=ae.bytesLoaded+ae.bytesToLoad,He(_e,ke,Ae,ae);_e.range=Z,Ae(_e)},error:function(){Ae(_e)}}),P.debug("Perform init search: "+ae.url)}function Oe(_e,ke,Ae,Ge,Z,le){if(Ae&&(Ae.start===void 0||Ae.end===void 0)){var ae=Ae?Ae.toString().split("-"):null;Ae=ae?{start:parseFloat(ae[0]),end:parseFloat(ae[1])}:null}Z=Z||Ze;var se=null,Q=null,Pe=!!Ae,be=_e?me.resolve(_e.path):null,Fe={init:!1,url:be?be.url:void 0,range:Pe?Ae:{start:0,end:1500},searching:!Pe,bytesLoaded:le?le.bytesLoaded:0,bytesToLoad:1500,mediaType:ke},Ne=$e(Fe);ne.load({request:Ne,success:function(pe){var Me=Fe.bytesToLoad,Xe=pe.byteLength;if(Fe.bytesLoaded=Fe.range.end-Fe.range.start,se=V.parse(pe),(Q=se.getBox("sidx"))&&Q.isComplete){var dt,ut,et=Q.references;if(et!=null&&et.length>0&&(dt=et[0].reference_type===1),dt){var ht,jt,Ht,kt;P.debug("Initiate multiple SIDX load."),Fe.range.end=Fe.range.start+Q.size;var Ut=[],An=0,ot=(Q.offset||Fe.range.start)+Q.size,yt=function(xt){xt?(Ut=Ut.concat(xt),++An>=jt&&(Ut.sort(function(en,Jt){return en.startTime-Jt.startTime<0?-1:0}),Z(Ut,_e,Ge))):Z(null,_e,Ge)};for(ht=0,jt=et.length;ht<jt;ht++)Ht=ot,kt=ot+et[ht].referenced_size-1,ot+=et[ht].referenced_size,Oe(_e,ke,{start:Ht,end:kt},Ge,yt,Fe)}else P.debug("Parsing segments from SIDX. representation "+ke+" - id: "+_e.id+" for range : "+Fe.range.start+" - "+Fe.range.end),ut=function(xt,en){for(var Jt,Wt,Dn,Nn,rr=xt.references,ir=rr.length,It=xt.timescale,Xt=xt.earliest_presentation_time,Gt=en.range.start+xt.offset+xt.first_offset+xt.size,un=[],vn=0;vn<ir;vn++)Dn=rr[vn].subsegment_duration,Nn=rr[vn].referenced_size,(Jt=new Wh.Z).duration=Dn,Jt.startTime=Xt,Jt.timescale=It,Wt=Gt+Nn-1,Jt.mediaRange=Gt+"-"+Wt,un.push(Jt),Xt+=Dn,Gt+=Nn;return un}(Q,Fe),Z(ut,_e,Ge)}else{if(Q)Fe.range.start=Q.offset||Fe.range.start,Fe.range.end=Fe.range.start+(Q.size||Me);else{if(Xe<Fe.bytesLoaded)return void Z(null,_e,Ge);var $t=se.getLastBox();$t&&$t.size?(Fe.range.start=$t.offset+$t.size,Fe.range.end=Fe.range.start+Me):Fe.range.end+=Me}Oe(_e,ke,Fe.range,Ge,null,Fe)}},error:function(){Z(null,_e,Ge)}}),P.debug("Perform SIDX load for type ".concat(ke," : ").concat(Fe.url," with range ").concat(Fe.range.start," - ").concat(Fe.range.end))}function Ze(_e,ke,Ae){Ae({segments:_e,representation:ke,error:_e?void 0:new ce.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function $e(_e){if(_e.url){var ke=new j.Z;return ke.setInfo(_e),ke}}return L={setConfig:function(_e){_e.baseURLController&&(me=_e.baseURLController),_e.dashMetrics&&(J=_e.dashMetrics),_e.mediaPlayerModel&&(H=_e.mediaPlayerModel),_e.errHandler&&(B=_e.errHandler),_e.boxParser&&(V=_e.boxParser),_e.debug&&(P=_e.debug.getLogger(L)),_e.requestModifier&&(ee=_e.requestModifier),_e.errors&&(fe=_e.errors),_e.urlUtils&&(ie=_e.urlUtils),_e.constants&&(we=_e.constants),_e.dashConstants&&(Ee=_e.dashConstants)},initialize:function(){ne=Ao(ge).create({errHandler:B,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,boxParser:V,errors:fe,urlUtils:ie,constants:we,dashConstants:Ee})},loadInitialization:function(_e,ke){return new Promise(function(Ae){He(_e,ke,Ae)})},loadSegments:function(_e,ke,Ae){return new Promise(function(Ge){Oe(_e,ke,Ae,Ge)})},reset:function(){ne&&(ne.abort(),ne=null)}}}Mc.__dashjs_factory_name="SegmentBaseLoader";var Wa=U.Z.getSingletonFactory(Mc);function $h(L){var P;L=L||{};var B=new DataView(L.data),V=0;function ee(H,ne){var fe=!0,we=0;if(ne===void 0&&(ne=!1),H.tag>16777215?(B.getUint32(V)!==H.tag&&(fe=!1),we=4):H.tag>65535?(256*B.getUint16(V)+B.getUint8(V+2)!==H.tag&&(fe=!1),we=3):H.tag>255?(B.getUint16(V)!==H.tag&&(fe=!1),we=2):(B.getUint8(V)!==H.tag&&(fe=!1),we=1),!fe&&H.required&&!ne)throw new Error("required tag not found");return fe&&(V+=we),fe}function J(H){var ne=1,fe=128,we=-1,Ee=0,ie=B.getUint8(V),me=0;for(me=0;me<8;me+=1){if((ie&fe)===fe){Ee=H===void 0?ie&~fe:ie,we=me;break}fe>>=1}for(me=0;me<we;me+=1,ne+=1)Ee=Ee<<8|255&B.getUint8(V+ne);return V+=ne,Ee}return P={getPos:function(){return V},setPos:function(H){V=H},consumeTag:ee,consumeTagAndSize:function(H,ne){var fe=ee(H,ne);return fe&&J(),fe},parseTag:function(H){var ne;return ee(H),ne=J(),P[H.parse](ne)},skipOverElement:function(H,ne){var fe,we=ee(H,ne);return we&&(fe=J(),V+=fe),we},getMatroskaCodedNum:J,getMatroskaFloat:function(H){var ne;switch(H){case 4:ne=B.getFloat32(V),V+=4;break;case 8:ne=B.getFloat64(V),V+=8}return ne},getMatroskaUint:function(H){if(H>4)return function(we){for(var Ee=Math.floor(Number.MAX_SAFE_INTEGER/256),ie=0,me=0;me<we;me+=1){if(ie>Ee)throw new Error("Value exceeds safe integer limit");ie*=256;var ge=B.getUint8(V+me);if(ie>Number.MAX_SAFE_INTEGER-ge)throw new Error("Value exceeds safe integer limit");ie+=ge}return V+=we,ie}(H);for(var ne=0,fe=0;fe<H;fe+=1)ne<<=8,ne|=255&B.getUint8(V+fe);return V+=H,ne>>>0},moreData:function(){return V<B.byteLength}}}$h.__dashjs_factory_name="EBMLParser";var Dc=U.Z.getClassFactory($h);function Wu(){var L,P,B,V,ee,J,H,ne,fe,we,Ee=this.context;function ie(me){var ge=new j.Z;return ge.setInfo(me),ge}return L={setConfig:function(me){if(!(me.baseURLController&&me.dashMetrics&&me.mediaPlayerModel&&me.errHandler))throw new Error(y.Z.MISSING_CONFIG_ERROR);we=me.baseURLController,J=me.dashMetrics,H=me.mediaPlayerModel,V=me.errHandler,fe=me.errors,P=me.debug.getLogger(L),ee=me.requestModifier},initialize:function(){ne=Ao(Ee).create({errHandler:V,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,errors:fe})},loadInitialization:function(me,ge){return new Promise(function(He){var Oe=null,Ze=me?we.resolve(me.path):null,$e=me?me.range.split("-"):null,_e={range:{start:$e?parseFloat($e[0]):null,end:$e?parseFloat($e[1]):null},request:Oe,url:Ze?Ze.url:void 0,init:!0,mediaType:ge};P.info("Start loading initialization."),Oe=ie(_e),ne.load({request:Oe,success:function(){He(me)},error:function(){He(me)}}),P.debug("Perform init load: "+_e.url)})},loadSegments:function(me,ge,He){return new Promise(function(Oe){var Ze=null,$e=me?we.resolve(me.path):null,_e=$e?$e.url:void 0;Ze=ie({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Ze,url:_e,init:!1,mediaType:ge}),P.debug("Parsing ebml header"),ne.load({request:Ze,success:function(ke){(function(Ae,Ge,Z,le){if(Ae&&Ae.byteLength!==0){var ae,se,Q,Pe,be=Dc(Ee).create({data:Ae}),Fe=Z?Z.split("-"):null,Ne=null,pe={url:Ge,range:{start:Fe?parseFloat(Fe[0]):null,end:Fe?parseFloat(Fe[1]):null},request:Ne};for(P.debug("Parse EBML header: "+pe.url),be.skipOverElement(B.EBML),be.consumeTag(B.Segment),Q=be.getMatroskaCodedNum(),Q+=be.getPos(),Pe=be.getPos();be.moreData()&&!be.consumeTagAndSize(B.Segment.Info,!0);)if(!(be.skipOverElement(B.Segment.SeekHead,!0)||be.skipOverElement(B.Segment.Tracks,!0)||be.skipOverElement(B.Segment.Cues,!0)||be.skipOverElement(B.Void,!0)))throw new Error("no valid top level element found");for(;ae===void 0;){var Me=be.getMatroskaCodedNum(!0),Xe=be.getMatroskaCodedNum();Me===B.Segment.Info.Duration.tag?ae=be[B.Segment.Info.Duration.parse](Xe):be.setPos(be.getPos()+Xe)}Ne=ie(pe),ne.load({request:Ne,success:function(dt){se=function(ut,et,ht,jt){var Ht,kt,Ut,An,ot,yt,$t,xt;for(Ut=[],ot=0,yt=(kt=function(en){var Jt,Wt,Dn=[],Nn=Dc(Ee).create({data:en});for(Nn.consumeTagAndSize(B.Segment.Cues);Nn.moreData()&&Nn.consumeTagAndSize(B.Segment.Cues.CuePoint,!0);){for((Jt={}).CueTime=Nn.parseTag(B.Segment.Cues.CuePoint.CueTime),Jt.CueTracks=[];Nn.moreData()&&Nn.consumeTag(B.Segment.Cues.CuePoint.CueTrackPositions,!0);){var rr=Nn.getMatroskaCodedNum(),ir=Nn.getPos();if((Wt={}).Track=Nn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Wt.Track===0)throw new Error("Cue track cannot be 0");Wt.ClusterPosition=Nn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),Jt.CueTracks.push(Wt),Nn.setPos(ir+rr)}if(Jt.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Dn.push(Jt)}if(Dn.length===0)throw new Error("mandatory cuepoint not found");return Dn}(ut)).length;ot<yt;ot+=1)An=new Wh.Z,Ht=ot<kt.length-1?kt[ot+1].CueTime-kt[ot].CueTime:jt-kt[ot].CueTime,An.duration=Ht,An.startTime=kt[ot].CueTime,An.timescale=1e3,$t=kt[ot].CueTracks[0].ClusterPosition+et,xt=ot<kt.length-1?kt[ot+1].CueTracks[0].ClusterPosition+et-1:ht-1,An.mediaRange=$t+"-"+xt,Ut.push(An);return P.debug("Parsed cues: "+Ut.length+" cues."),Ut}(dt,Pe,Q,ae),le(se)},error:function(){P.error("Download Error: Cues "+pe.url),le(null)}}),P.debug("Perform cues load: "+pe.url+" bytes="+pe.range.start+"-"+pe.range.end)}else le(null)})(ke,_e,He,function(Ae){Oe({segments:Ae,representation:me,error:Ae?void 0:new ce.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){Oe({representation:me,error:new ce.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){ne&&(ne.abort(),ne=null)}},B={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},L}Wu.__dashjs_factory_name="WebmSegmentBaseLoader";var jr=U.Z.getSingletonFactory(Wu);function Kf(L){L=L||{};var P,B,V,ee=this.context,J=L.eventBus,H=L.events,ne=L.dashMetrics,fe=L.mediaPlayerModel,we=L.errHandler,Ee=L.baseURLController,ie=L.debug,me=L.boxParser,ge=L.requestModifier,He=L.errors;function Oe(Ze){return(Ze?Ze.split("/")[1]:"").toLowerCase()==="webm"}return P={initialize:function(){B.initialize(),V.initialize()},getSegmentBaseInitSegment:function(Ze){return Oe(Ze.representation.mimeType)?V.loadInitialization(Ze.representation,Ze.mediaType):B.loadInitialization(Ze.representation,Ze.mediaType)},getSegmentList:function(Ze){return Oe(Ze.mimeType)?V.loadSegments(Ze.representation,Ze.mediaType,Ze.representation?Ze.representation.indexRange:null):B.loadSegments(Ze.representation,Ze.mediaType,Ze.representation?Ze.representation.indexRange:null)},reset:function(){B.reset(),V.reset()}},B=Wa(ee).getInstance(),V=jr(ee).getInstance(),B.setConfig({baseURLController:Ee,dashMetrics:ne,mediaPlayerModel:fe,errHandler:we,eventBus:J,events:H,errors:He,debug:ie,boxParser:me,requestModifier:ge}),V.setConfig({baseURLController:Ee,dashMetrics:ne,mediaPlayerModel:fe,errHandler:we,eventBus:J,events:H,errors:He,debug:ie,requestModifier:ge}),P}Kf.__dashjs_factory_name="SegmentBaseController";var DE=U.Z.getSingletonFactory(Kf),kl=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Pc=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},Dr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},ks=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function xm(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Fr=function(){function L(V){var ee=this;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.valid=V[0]=="/",this.path=V.split("/").filter(function(J){return J.length!==0}).map(function(J){var H={name:J},ne=J.indexOf("[");if(ne!=-1){H.name=J.substring(0,ne);var fe=J.substring(ne+1,J.length-1);ee.valid=ee.valid&&fe.indexOf("[")==-1;var we=fe.indexOf("=");we!=-1?(H.attribute={name:fe.substring(1,we),value:fe.substring(we+1)},["'",'"'].indexOf(H.attribute.value[0])!=-1&&(H.attribute.value=H.attribute.value.substring(1,H.attribute.value.length-1))):H.position=parseInt(fe,10)-1}return H})}var P,B;return P=L,(B=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(V,ee){for(var J=null,H=V,ne=1,fe="MPD";ne<this.path.length&&H!==null;){J=H;var we=this.path[ne];if(fe=we.name,ne!==this.path.length-1||!fe.startsWith("@")&&fe!=="text()"){var Ee=J[fe+"_asArray"]||[];Ee.length===0&&J[fe]&&Ee.push(J[fe]),we.position?H=Ee[we.position]||null:we.attribute?function(){var ie=we.attribute;H=Ee.filter(function(me){return me[ie.name]==ie.value})[0]||null}():H=Ee[0]||null}ne++}return H===null?null:fe.startsWith("@")?{name:fe.substring(1),leaf:H,target:H}:fe==="text()"?{name:"__text",leaf:H,target:H}:{name:fe,leaf:H,target:ee?J:H}}}])&&xm(P.prototype,B),L}();function yr(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var gu=function(){function L(V,ee,J){(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,L),this.action=V,this.xpath=ee,this.value=J,this.position=null}var P,B;return P=L,(B=[{key:"getMpdTarget",value:function(V){var ee=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(V,ee)}}])&&yr(P.prototype,B),L}();function Ai(){var L,P,B=this.context;return L={getIsPatch:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(V[v.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_PUBLISH_TIME)?new Date(V[v.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(V){return V&&V[v.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(V){return V?(V.__children||[]).map(function(ee){var J=Object.keys(ee)[0];if(J!=="add"&&J!=="remove"&&J!=="replace")return P.warn("Ignoring node of invalid action: ".concat(J)),null;var H=ee[J],ne=H.sel;if(J==="add"&&H.type){if(!H.type.startsWith("@"))return P.warn("Ignoring add action for prefixed namespace declaration: ".concat(H.type,"=").concat(H.__text)),null;ne="".concat(ne,"/").concat(H.type)}var fe=new Fr(ne);if(!fe.isValid())return P.warn("Ignoring action with invalid selector: ".concat(J," - ").concat(ne)),null;var we=null;fe.findsAttribute()||fe.findsTextReplace()?we=H.__text||"":J!=="remove"&&(we=H.__children.reduce(function(ie,me){var ge=Object.keys(me)[0];return ge!=="#text"&&(ie[ge]=ie[ge]||[],ie[ge].push(me[ge])),ie},{}));var Ee=new gu(J,fe,we);return J==="add"&&(Ee.position=H.pos),Ee}).filter(function(ee){return!!ee}):[]}},P=(0,x.Z)(B).getInstance().getLogger(L),L}Ai.__dashjs_factory_name="PatchManifestModel";var Xh=U.Z.getSingletonFactory(Ai);function $u(){var L,P,B,V,ee,J,H,ne=this.context;function fe(ae,se,Q){var Pe,be=P.getAdaptationsForType(V[0].mpd.manifest,ae,se);if(!be||be.length===0)return null;if(be.length>1&&Q){var Fe=ie(Q,se);if(ee[Q.id]&&ee[Q.id][se]){for(var Ne=0,pe=be.length;Ne<pe;Ne++)if(we(ee[Q.id][se],Fe[Ne]))return be[Ne]}for(var Me=0,Xe=be.length;Me<Xe;Me++)if(Pe=be[Me],P.getRolesForAdaptation(Pe).filter(function(dt){return dt.value===v.Z.MAIN})[0])return be[Me]}return be[0]}function we(ae,se){if(!ae||!se)return!1;var Q=ae.id===se.id,Pe=ae.codec===se.codec,be=ae.viewpoint===se.viewpoint,Fe=JSON.stringify(ae.viewpointsWithSchemeIdUri)===JSON.stringify(se.viewpointsWithSchemeIdUri),Ne=ae.lang===se.lang,pe=ae.roles.toString()===se.roles.toString(),Me=JSON.stringify(ae.rolesWithSchemeIdUri)===JSON.stringify(se.rolesWithSchemeIdUri),Xe=ae.accessibility.toString()===se.accessibility.toString(),dt=JSON.stringify(ae.accessibilitiesWithSchemeIdUri)===JSON.stringify(se.accessibilitiesWithSchemeIdUri),ut=ae.audioChannelConfiguration.toString()===se.audioChannelConfiguration.toString(),et=JSON.stringify(ae.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(se.audioChannelConfigurationsWithSchemeIdUri);return Q&&Pe&&be&&Fe&&Ne&&pe&&Me&&Xe&&dt&&ut&&et}function Ee(ae,se,Q,Pe,be,Fe){var Ne,pe,Me,Xe,dt,ut,et=[];if(!Pe||Pe.length===0)return[];var ht=P.getAdaptationsForPeriod(se);for(Xe=0,ut=Pe.length;Xe<ut;Xe++)if(Ne=Pe[Xe],pe=_e(ht[Me=P.getIndexForAdaptation(Ne,ae,Q.index)]),Fe){var jt=pe.accessibility.length;for(dt=0;dt<jt;dt++)if(pe){var Ht=pe.accessibility[dt];if(Ht.indexOf("cea-608:")===0){var kt=Ht.substring(8).split(";");if(kt[0].substring(0,2)==="CC")for(dt=0;dt<kt.length;dt++)pe||(pe=_e.call(this,ht[Me])),ke(pe,kt[dt].substring(0,3),kt[dt].substring(4)),et.push(pe),pe=null;else for(dt=0;dt<kt.length;dt++)pe||(pe=_e.call(this,ht[Me])),ke(pe,"CC"+(dt+1),kt[dt]),et.push(pe),pe=null}else Ht.indexOf("cea-608")===0&&(ke(pe,J.CC1,"eng"),et.push(pe),pe=null)}}else be===J.IMAGE?(pe.type=J.IMAGE,et.push(pe),pe=null):pe&&et.push(pe);return et}function ie(ae,se,Q){var Pe=V,be=Q,Fe=[];if(be)Ge(),Pe=me(be);else{if(!(V.length>0))return Fe;be=V[0].mpd.manifest}var Ne=$e(ae,Pe),pe=P.getAdaptationsForType(be,ae?ae.index:null,se);return Fe=Ee(be,Ne,ae,pe,se),se===J.TEXT&&(pe=P.getAdaptationsForType(be,ae?ae.index:null,J.VIDEO),Fe=Fe.concat(Ee(be,Ne,ae,pe,se,!0))),Fe}function me(ae){var se=ge(ae);return P.getRegularPeriods(se)}function ge(ae){var se=Oe(ae);return P.getMpd(se)}function He(){V=[],ee={}}function Oe(ae){return ae||(V.length>0?V[0].mpd.manifest:null)}function Ze(ae){try{var se=$e(ae.streamInfo,V),Q=P.getAdaptationsForPeriod(se);return ae&&ae.streamInfo&&ae.streamInfo.id!==void 0&&Q?Q[ae.index]:null}catch(Pe){return null}}function $e(ae,se){for(var Q=se.length,Pe=0;Pe<Q;Pe++){var be=se[Pe];if(ae&&ae.id===be.id)return be}return null}function _e(ae){if(!ae)return null;var se,Q,Pe,be,Fe,Ne=new Pc,pe=ae.period.mpd.manifest.Period_asArray[ae.period.index].AdaptationSet_asArray[ae.index];if(Ne.id=ae.id,Ne.index=ae.index,Ne.type=ae.type,Ne.streamInfo=Ae(ae.period),Ne.representationCount=P.getRepresentationCount(pe),Ne.labels=P.getLabelsForAdaptation(pe),Ne.lang=P.getLanguageForAdaptation(pe),Ne.segmentAlignment=P.getSegmentAlignment(pe),Ne.subSegmentAlignment=P.getSubSegmentAlignment(pe),se=P.getViewpointForAdaptation(pe),Ne.viewpoint=se.length?se[0].value:void 0,Ne.viewpointsWithSchemeIdUri=se,Fe=P.getAccessibilityForAdaptation(pe),Ne.accessibility=Fe.map(function(et){var ht=et.value,jt=ht;return et.schemeIdUri&&et.schemeIdUri.search("cea-608")>=0&&H!==void 0&&(jt=ht?"cea-608:"+ht:"cea-608",Ne.embeddedCaptions=!0),jt}),Ne.accessibilitiesWithSchemeIdUri=Fe,Q=P.getAudioChannelConfigurationForAdaptation(pe),Ne.audioChannelConfiguration=Q.map(function(et){return et.value}),Ne.audioChannelConfigurationsWithSchemeIdUri=Q,Ne.audioChannelConfiguration.length===0&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0&&(Pe=P.getAudioChannelConfigurationForRepresentation(pe.Representation_asArray[0]),Ne.audioChannelConfiguration=Pe.map(function(et){return et.value}),Ne.audioChannelConfigurationsWithSchemeIdUri=Pe),be=P.getRolesForAdaptation(pe),Ne.roles=be.map(function(et){return et.value}),Ne.rolesWithSchemeIdUri=be,Ne.codec=P.getCodec(pe),Ne.mimeType=P.getMimeType(pe),Ne.contentProtection=P.getContentProtectionData(pe),Ne.bitrateList=P.getBitrateListForAdaptation(pe),Ne.selectionPriority=P.getSelectionPriority(pe),Ne.contentProtection){var Me=Ne.contentProtection.map(function(et){return P.getKID(et)}).filter(function(et){return et!==null});if(Me.length){var Xe=Me[0];Ne.contentProtection.forEach(function(et){et.keyId=Xe})}}if(Ne.isText=P.getIsText(pe),Ne.supplementalProperties=P.getSupplementalPropertiesForAdaptation(pe),(!Ne.supplementalProperties||Object.keys(Ne.supplementalProperties).length===0)&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0){var dt=pe.Representation_asArray.map(function(et){return P.getSupplementalPropertiesForRepresentation(et)});dt.every(function(et){return JSON.stringify(et)===JSON.stringify(dt[0])})&&(Ne.supplementalProperties=dt[0])}if(Ne.supplementalPropertiesAsArray=P.getSupplementalPropertiesAsArrayForAdaptation(pe),(!Ne.supplementalPropertiesAsArray||Ne.supplementalPropertiesAsArray.length===0)&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0){var ut=pe.Representation_asArray.map(function(et){return P.getSupplementalPropertiesAsArrayForRepresentation(et)});ut.every(function(et){return JSON.stringify(et)===JSON.stringify(ut[0])})&&(Ne.supplementalPropertiesAsArray=ut[0])}return Ne.essentialProperties=P.getEssentialPropertiesForAdaptation(pe),Ne.essentialPropertiesAsArray=P.getEssentialPropertiesAsArrayForAdaptation(pe),Ne.isFragmented=P.getIsFragmented(pe),Ne.isEmbedded=!1,Ne}function ke(ae,se,Q){ae.id=se,ae.index=100+parseInt(se.substring(2,3)),ae.type=J.TEXT,ae.codec="cea-608-in-SEI",ae.isEmbedded=!0,ae.isFragmented=!1;var Pe=Ei()(Q);ae.lang=Pe||Q,ae.roles=["caption"],ae.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function Ae(ae){var se,Q,Pe=new Dr;return Pe.id=ae.id,Pe.index=ae.index,Pe.start=ae.start,Pe.duration=ae.duration,Pe.manifestInfo=(se=ae.mpd,(Q=new ks).dvrWindowSize=se.timeShiftBufferDepth,Q.loadedTime=se.manifest.loadedTime,Q.availableFrom=se.availabilityStartTime,Q.minBufferTime=se.manifest.minBufferTime,Q.maxFragmentDuration=se.maxSegmentDuration,Q.duration=P.getDuration(se.manifest),Q.isDynamic=P.getIsDynamic(se.manifest),Q.serviceDescriptions=P.getServiceDescriptions(se.manifest),Q.protocol=se.manifest.protocol,Q),Pe.isLast=ae.mpd.manifest.Period_asArray.length===1||Math.abs(Pe.start+Pe.duration-Pe.manifestInfo.duration)<1,Pe}function Ge(){if(!J)throw new Error("setConfig function has to be called previously")}function Z(ae){return V.length>0?V[0].mpd.manifest.Period_asArray[ae]:null}function le(ae,se,Q){var Pe,be,Fe,Ne,pe;if(ae){for(Pe=ae.AdaptationSet_asArray,Ne=0;Ne<Pe.length;Ne+=1)for(Fe=Pe[Ne].Representation_asArray,pe=0;pe<Fe.length;pe+=1)if(se===(be=Fe[pe]).id)return Q?pe:be}return null}return L={getBandwidthForRepresentation:function(ae,se){var Q;return(Q=le(Z(se),ae))?Q.bandwidth:null},getIndexForRepresentation:function(ae,se){return function(Q,Pe){var be=le(Q,Pe,!0);return be!==null?be:-1}(Z(se),ae)},getMaxIndexForBufferType:function(ae,se){return function(Q,Pe){var be,Fe,Ne,pe;if(!Q||!Pe)return-1;for(Fe=Q.AdaptationSet_asArray,pe=0;pe<Fe.length;pe+=1)if(Ne=(be=Fe[pe]).Representation_asArray,P.getIsTypeOf(be,Pe))return Ne.length;return-1}(Z(se),ae)},convertRepresentationToRepresentationInfo:function(ae){if(ae){var se=new kl,Q=ae.adaptation.period.mpd.manifest.Period_asArray[ae.adaptation.period.index].AdaptationSet_asArray[ae.adaptation.index],Pe=P.getRepresentationFor(ae.index,Q);return se.id=ae.id,se.quality=ae.index,se.bandwidth=P.getBandwidth(Pe),se.fragmentDuration=ae.segmentDuration||(ae.segments&&ae.segments.length>0?ae.segments[0].duration:NaN),se.MSETimeOffset=ae.MSETimeOffset,se.mediaInfo=_e(ae.adaptation),se}return null},getStreamsInfo:function(ae,se){var Q=[],Pe=V;if(ae&&(Ge(),Pe=me(ae)),Pe.length>0){(!se||se>Pe.length)&&(se=Pe.length);for(var be=0;be<se;be++)Q.push(Ae(Pe[be]))}return Q},getMediaInfoForType:function(ae,se){if(V.length===0||!ae)return null;var Q=$e(ae,V);if(!Q)return null;var Pe=P.getAdaptationsForPeriod(Q),be=fe(ae.index,se,ae);return be?_e(Pe[P.getIndexForAdaptation(be,V[0].mpd.manifest,ae.index)]):null},getAllMediaInfoForType:ie,getAdaptationForType:fe,getRealAdaptation:function(ae,se){var Q,Pe,be=$e(ae,V);return Q=se?se.id:null,V.length>0&&be&&(Pe=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,be.index):P.getAdaptationForIndex(se?se.index:null,V[0].mpd.manifest,be.index)),Pe},getProducerReferenceTimes:function(ae,se){var Q,Pe,be=$e(ae,V);return Q=se?se.id:null,V.length>0&&be&&(Pe=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,be.index):P.getAdaptationForIndex(se?se.index:null,V[0].mpd.manifest,be.index)),Pe?P.getProducerReferenceTimesForAdaptation(Pe):[]},getRealPeriodByIndex:function(ae){return P.getRealPeriodForIndex(ae,V[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(ae){try{return P.getEssentialPropertiesForRepresentation(ae)}catch(se){return[]}},getVoRepresentations:function(ae){var se=Ze(ae);return P.getRepresentationsForAdaptation(se)},getEventsFor:function(ae,se,Q){var Pe=[];if(V.length>0){var be=V[0].mpd.manifest;if(ae instanceof Dr){var Fe=$e(ae,V);Pe=P.getEventsForPeriod(Fe)}else if(ae instanceof Pc){var Ne=$e(Q,V);Pe=P.getEventStreamForAdaptationSet(be,Ze(ae),Ne)}else if(ae instanceof kl){var pe=$e(Q,V);Pe=P.getEventStreamForRepresentation(be,se,pe)}}return Pe},getEvent:function(ae,se,Q,Pe){try{if(!ae||!se||isNaN(Q)||!Pe)return null;var be=ae.scheme_id_uri,Fe=ae.value;if(!se[be+"/"+Fe])return null;var Ne,pe=new to,Me=ae.timescale||1,Xe=Pe.adaptation.period.start,dt=se[be+"/"+Fe],ut=isNaN(Pe.presentationTimeOffset)?isNaN(dt.presentationTimeOffset)?0:dt.presentationTimeOffset:Pe.presentationTimeOffset,et=ae.presentation_time_delta/Me;Ne=ae.version===0?Xe+Q-ut+et:Xe-ut+et;var ht=ae.event_duration/Me,jt=ae.id,Ht=ae.message_data;return pe.eventStream=dt,pe.eventStream.value=Fe,pe.eventStream.timescale=Me,pe.duration=ht,pe.id=jt,pe.calculatedPresentationTime=Ne,pe.messageData=Ht,pe.presentationTimeDelta=et,pe}catch(kt){return null}},getMpd:ge,setConfig:function(ae){ae&&(ae.constants&&(J=ae.constants),ae.cea608parser&&(H=ae.cea608parser),ae.errHandler&&P.setConfig({errHandler:ae.errHandler}),ae.BASE64&&P.setConfig({BASE64:ae.BASE64}))},updatePeriods:function(ae){if(!ae)return null;Ge(),V=me(ae)},getIsTextTrack:function(ae){return P.getIsText(ae)},getUTCTimingSources:function(){var ae=Oe();return P.getUTCTimingSources(ae)},getSuggestedPresentationDelay:function(){var ae=V.length>0?V[0].mpd:null;return P.getSuggestedPresentationDelay(ae)},getAvailabilityStartTime:function(ae){var se=ge(ae);return P.getAvailabilityStartTime(se)},getIsTypeOf:function(ae,se){return P.getIsTypeOf(ae,se)},getIsDynamic:function(ae){var se=Oe(ae);return P.getIsDynamic(se)},getDuration:function(ae){var se=Oe(ae);return P.getDuration(se)},getRegularPeriods:me,getContentSteering:function(ae){return P.getContentSteering(ae)},getLocation:function(ae){return P.getLocation(ae)},getPatchLocation:function(ae){var se=P.getPatchLocation(ae),Q=P.getPublishTime(ae);return se&&se.length!==0&&Q?se.filter(function(Pe){return isNaN(Pe.ttl)||Q.getTime()+Pe.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(ae){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return P.getManifestUpdatePeriod(ae,se)},getPublishTime:function(ae){return P.getPublishTime(ae)},getIsDVB:function(ae){return P.hasProfile(ae,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(ae){return B.getIsPatch(ae)},getBaseURLsFromElement:function(ae){return P.getBaseURLsFromElement(ae)},getRepresentationSortFunction:function(){return P.getRepresentationSortFunction()},getCodec:function(ae,se,Q){return P.getCodec(ae,se,Q)},getPeriodById:function(ae){if(!ae||V.length===0)return null;var se=V.filter(function(Q){return Q.id===ae});return se&&se.length>0?se[0]:null},setCurrentMediaInfo:function(ae,se,Q){ee[ae]=ee[ae]||{},ee[ae][se]=ee[ae][se]||{},ee[ae][se]=Q},isPatchValid:function(ae,se){var Q=P.getId(ae),Pe=B.getMpdId(se),be=P.getPublishTime(ae),Fe=B.getPublishTime(se),Ne=B.getOriginalPublishTime(se);return!!(Q&&Pe&&Q==Pe&&be&&Ne&&be.getTime()==Ne.getTime()&&Fe&&be.getTime()<Fe.getTime())},applyPatchToManifest:function(ae,se){B.getPatchOperations(se).forEach(function(Q){var Pe=Q.getMpdTarget(ae);if(Pe!==null){var be=Pe.name,Fe=Pe.target,Ne=Pe.leaf;if(Q.xpath.findsAttribute()||be==="__text")switch(Q.action){case"add":case"replace":Fe[be]=Q.value;break;case"remove":delete Fe[be]}else{var pe=(Fe[be+"_asArray"]||[]).indexOf(Ne),Me=Q.position==="prepend"||Q.position==="before";if((Q.action==="remove"||Q.action==="replace")&&(delete Fe[be],pe!=-1)){var Xe=Fe[be+"_asArray"];Xe.splice(pe,1),Xe.length>1?Fe[be]=Xe:Xe.length==1?Fe[be]=Xe[0]:delete Fe[be+"_asArray"]}Q.action!=="add"&&Q.action!=="replace"||Object.keys(Q.value).forEach(function(dt){var ut=Q.value[dt],et=Fe[dt+"_asArray"]||[];if(et.length===0&&Fe[dt]&&et.push(Fe[dt]),et.length===0)et=ut;else{var ht=et.length;ht=dt==be&&pe!=-1?pe+(Me?0:1)+(Q.action=="replace"?-1:0):Me?0:et.length,et.splice.apply(et,[ht,0].concat(ut))}Fe[dt+"_asArray"]=et,Fe[dt]=et.length==1?et[0]:et})}}})},areMediaInfosEqual:we,reset:He},P=Vn(ne).getInstance(),B=Xh(ne).getInstance(),He(),L}$u.__dashjs_factory_name="DashAdapter";var Mm=U.Z.getSingletonFactory($u);function Vf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Fl=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L)}var P,B;return P=L,B=[{key:"round10",value:function(V,ee){return function(J,H,ne){return ne===void 0||+ne==0?Math[J](H):(ne=+ne,(H=+H)===null||isNaN(H)||typeof ne!="number"||ne%1!=0?NaN:(H=H.toString().split("e"),+((H=(H=Math[J](+(H[0]+"e"+(H[1]?+H[1]-ne:-ne)))).toString().split("e"))[0]+"e"+(H[1]?+H[1]+ne:ne))))}("round",V,ee)}}],B&&Vf(P,B),L}(),PE=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Dm=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.mt=null,this.to=null,this.lto=null},Pm=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.level=null},zf=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.target=null,this.state=D.Z.BUFFER_EMPTY},Qh=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.range=null,this.manifestInfo=null},Ul=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.droppedFrames=null};function Oc(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var OE=function L(){Oc(this,L),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},Yf=function L(){Oc(this,L),this.id=null,this.index=null,this.start=null,this.duration=null},LE=function L(){Oc(this,L),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},Wr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},Ri=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.loadingRequests=[],this.executedRequests=[]};function mu(L){var P,B,V=(L=L||{}).settings,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){J.trigger(T.Z.METRICS_CHANGED)}function ne(ge){J.trigger(T.Z.METRIC_CHANGED,{mediaType:ge}),H()}function fe(ge,He,Oe){J.trigger(T.Z.METRIC_UPDATED,{mediaType:ge,metric:He,value:Oe}),ne(ge)}function we(ge,He,Oe){J.trigger(T.Z.METRIC_ADDED,{mediaType:ge,metric:He,value:Oe}),ne(ge)}function Ee(ge,He){var Oe=null;return ge&&(B.hasOwnProperty(ge)?Oe=B[ge]:He||(Oe=new PE,B[ge]=Oe)),Oe}function ie(ge,He,Oe){var Ze=Ee(ge);Ze!==null&&(Ze[He].push(Oe),Ze[He].length>V.get().streaming.metrics.maxListDepth&&Ze[He].shift())}function me(ge,He,Oe){ie(ge,He,Oe),we(ge,He,Oe)}return P={clearCurrentMetricsForType:function(ge){delete B[ge],ne(ge)},clearAllCurrentMetrics:function(){B={},H()},getMetricsFor:Ee,addHttpRequest:function ge(He,Oe,Ze,$e,_e,ke,Ae,Ge,Z,le,ae,se,Q,Pe,be,Fe,Ne){var pe=new nt.w;ke!=null&&ke!==$e&&(ge(He,null,Ze,$e,_e,null,null,Ge,Z,null,null,null,Q,null,null,Fe,Ne),pe.actualurl=ke),pe.tcpid=Oe,pe.type=Ze,pe.url=$e,pe.range=Ge,pe.trequest=Z,pe.tresponse=le,pe.responsecode=se,pe.cmsd=Ne,pe._tfinish=ae,pe._stream=He,pe._mediaduration=Q,pe._quality=_e,pe._responseHeaders=Pe,pe._serviceLocation=Ae,pe._fileLoaderType=Fe,be?be.forEach(function(Me){(function(Xe,dt,ut,et){var ht=new nt.O;ht.s=dt,ht.d=ut,ht.b=et,Xe.trace.push(ht),Xe.interval||(Xe.interval=0),Xe.interval+=ut})(pe,Me.s,Me.d,Me.b)}):(delete pe.interval,delete pe.trace),me(He,D.Z.HTTP_REQUEST,pe)},addRepresentationSwitch:function(ge,He,Oe,Ze,$e){var _e=new Dm;_e.t=He,_e.mt=Oe,_e.to=Ze,$e?_e.lto=$e:delete _e.lto,me(ge,D.Z.TRACK_SWITCH,_e)},addBufferLevel:function(ge,He,Oe){var Ze=new Pm;Ze.t=He,Ze.level=Oe,me(ge,D.Z.BUFFER_LEVEL,Ze)},addBufferState:function(ge,He,Oe){var Ze=new zf;Ze.target=Oe,Ze.state=He,me(ge,D.Z.BUFFER_STATE,Ze)},addDVRInfo:function(ge,He,Oe,Ze){var $e=new Qh;$e.time=He,$e.range=Ze,$e.manifestInfo=Oe,me(ge,D.Z.DVR_INFO,$e)},addDroppedFrames:function(ge,He){var Oe=new Ul,Ze=Ee(ge).DroppedFrames;He&&(Oe.time=He.creationTime,Oe.droppedFrames=He.droppedVideoFrames,Ze.length>0&&Ze[Ze.length-1]==Oe||me(ge,D.Z.DROPPED_FRAMES,Oe))},addSchedulingInfo:function(ge,He,Oe,Ze,$e,_e,ke,Ae,Ge){var Z=new Wr;Z.mediaType=ge,Z.t=He,Z.type=Oe,Z.startTime=Ze,Z.availabilityStartTime=$e,Z.duration=_e,Z.quality=ke,Z.range=Ae,Z.state=Ge,me(ge,D.Z.SCHEDULING_INFO,Z)},addRequestsQueue:function(ge,He,Oe){var Ze=new Ri;Ze.loadingRequests=He,Ze.executedRequests=Oe,Ee(ge).RequestsQueue=Ze,we(ge,D.Z.REQUESTS_QUEUE,Ze)},addManifestUpdate:function(ge,He,Oe,Ze,$e,_e,ke,Ae,Ge,Z){var le=new OE;le.mediaType=ge,le.type=He,le.requestTime=Oe,le.fetchTime=Ze,le.availabilityStartTime=$e,le.presentationStartTime=_e,le.clientTimeOffset=ke,le.currentTime=Ae,le.buffered=Ge,le.latency=Z,ie(y.Z.STREAM,D.Z.MANIFEST_UPDATE,le),we(ge,D.Z.MANIFEST_UPDATE,le)},updateManifestUpdateInfo:function(ge,He){if(ge){for(var Oe in He)ge[Oe]=He[Oe];fe(ge.mediaType,D.Z.MANIFEST_UPDATE,ge)}},addManifestUpdateStreamInfo:function(ge,He,Oe,Ze,$e){if(ge){var _e=new Yf;_e.id=He,_e.index=Oe,_e.start=Ze,_e.duration=$e,ge.streamInfo.push(_e),fe(ge.mediaType,D.Z.MANIFEST_UPDATE_STREAM_INFO,ge)}},addManifestUpdateRepresentationInfo:function(ge,He,Oe,Ze,$e,_e,ke,Ae){if(ge&&ge.representationInfo){var Ge=new LE;Ge.id=He,Ge.index=Oe,Ge.streamIndex=Ze,Ge.mediaType=$e,Ge.startNumber=ke,Ge.fragmentInfoType=Ae,Ge.presentationTimeOffset=_e,ge.representationInfo.push(Ge),fe(ge.mediaType,D.Z.MANIFEST_UPDATE_TRACK_INFO,ge)}},addPlayList:function(ge){ge.trace&&Array.isArray(ge.trace)?ge.trace.forEach(function(He){He.hasOwnProperty("subreplevel")&&!He.subreplevel&&delete He.subreplevel}):delete ge.trace,me(y.Z.STREAM,D.Z.PLAY_LIST,ge)},addDVBErrors:function(ge){me(y.Z.STREAM,D.Z.DVB_ERRORS,ge)}},B={},P}mu.__dashjs_factory_name="MetricsModel";var Ca=U.Z.getSingletonFactory(mu);function ua(L){L=L||{};var P,B,V,ee,J=this.context,H=L.metricsModel;function ne(Ee){var ie=H.getMetricsFor(Ee,!0);if(!ie)return null;var me,ge=ie.HttpList,He=null;if(!ge||ge.length<=0)return null;for(me=ge.length-1;me>=0;){if(ge[me].responsecode){He=ge[me];break}me--}return He}function fe(Ee){var ie=H.getMetricsFor(Ee,!0);return ie&&ie.HttpList?ie.HttpList:[]}function we(Ee,ie){if(!Ee)return null;var me=Ee[ie];return me&&me.length!==0?me[me.length-1]:null}return P={getCurrentRepresentationSwitch:function(Ee){return we(H.getMetricsFor(Ee,!0),D.Z.TRACK_SWITCH)},getCurrentBufferState:function(Ee){return we(H.getMetricsFor(Ee,!0),D.Z.BUFFER_STATE)},getCurrentBufferLevel:function(Ee){var ie=we(H.getMetricsFor(Ee,!0),D.Z.BUFFER_LEVEL);return ie?Fl.round10(ie.level/1e3,-3):0},getCurrentHttpRequest:ne,getHttpRequests:fe,getCurrentDroppedFrames:function(){return we(H.getMetricsFor(y.Z.VIDEO,!0),D.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(Ee){return we(H.getMetricsFor(Ee,!0),D.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(Ee){return we(Ee?H.getMetricsFor(Ee,!0):H.getMetricsFor(y.Z.VIDEO,!0)||H.getMetricsFor(y.Z.AUDIO,!0),D.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return we(H.getMetricsFor(y.Z.STREAM),D.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(Ee,ie){if(!ie)return null;var me={},ge=ne(Ee);ge&&(me=rn.Z.parseHttpHeaders(ge._responseHeaders));var He=me[ie.toLowerCase()];return He===void 0?null:He},getLatestMPDRequestHeaderValueByID:function(Ee){if(!Ee)return null;var ie,me,ge,He={};for(ge=(ie=fe(y.Z.STREAM)).length-1;ge>=0;ge--)if((me=ie[ge]).type===nt.w.MPD_TYPE){He=rn.Z.parseHttpHeaders(me._responseHeaders);break}var Oe=He[Ee.toLowerCase()];return Oe===void 0?null:Oe},addRepresentationSwitch:function(Ee,ie,me,ge,He){H.addRepresentationSwitch(Ee,ie,me,ge,He)},addDVRInfo:function(Ee,ie,me,ge){H.addDVRInfo(Ee,ie,me,ge)},updateManifestUpdateInfo:function(Ee){var ie=this.getCurrentManifestUpdate();H.updateManifestUpdateInfo(ie,Ee)},addManifestUpdateStreamInfo:function(Ee){if(Ee){var ie=this.getCurrentManifestUpdate();H.addManifestUpdateStreamInfo(ie,Ee.id,Ee.index,Ee.start,Ee.duration)}},addManifestUpdateRepresentationInfo:function(Ee,ie){if(Ee){var me=this.getCurrentManifestUpdate();H.addManifestUpdateRepresentationInfo(me,Ee.id,Ee.index,Ee.streamIndex,ie,Ee.presentationTimeOffset,Ee.startNumber,Ee.fragmentInfoType)}},addManifestUpdate:function(Ee){H.addManifestUpdate(y.Z.STREAM,Ee.type,Ee.requestStartDate,Ee.requestEndDate)},addHttpRequest:function(Ee,ie,me,ge,He,Oe){H.addHttpRequest(Ee.mediaType,null,Ee.type,Ee.url,Ee.quality,ie,Ee.serviceLocation||null,Ee.range||null,Ee.requestStartDate,Ee.firstByteDate,Ee.requestEndDate,me,Ee.duration,ge,He,Ee.fileLoaderType,Oe)},addSchedulingInfo:function(Ee,ie){H.addSchedulingInfo(Ee.mediaType,new Date,Ee.type,Ee.startTime,Ee.availabilityStartTime,Ee.duration,Ee.quality,Ee.range,ie)},addRequestsQueue:function(Ee,ie,me){H.addRequestsQueue(Ee,ie,me)},addBufferLevel:function(Ee,ie,me){H.addBufferLevel(Ee,ie,me)},addBufferState:function(Ee,ie,me){H.addBufferState(Ee,ie,me)},addDroppedFrames:function(Ee){H.addDroppedFrames(y.Z.VIDEO,Ee)},addPlayList:function(){ee&&(H.addPlayList(ee),ee=null)},addDVBErrors:function(Ee){H.addDVBErrors(Ee)},createPlaylistMetrics:function(Ee,ie){(ee=new at).start=new Date,ee.mstart=Ee,ee.starttype=ie},createPlaylistTraceMetrics:function(Ee,ie,me){B===!0&&(B=!1,(V=new tt).representationid=Ee,V.start=new Date,V.mstart=ie,V.playbackspeed=me!==null?me.toString():null)},updatePlayListTraceMetrics:function(Ee){if(V)for(var ie in V)V[ie]=Ee[ie]},pushPlayListTraceMetrics:function(Ee,ie){if(B===!1&&ee&&V&&V.start){var me=V.start,ge=Ee.getTime()-me.getTime();V.duration=ge,V.stopreason=ie,ee.trace.push(V),B=!0}},clearAllCurrentMetrics:function(){H.clearAllCurrentMetrics()}},H=H||Ca(J).getInstance({settings:L.settings}),B=!0,V=null,ee=null,P}ua.__dashjs_factory_name="DashMetrics";var Fs=U.Z.getSingletonFactory(ua);function _r(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,je.Z)(ee).getInstance();function ne($e){V=$e}function fe($e,_e,ke,Ae){var Ge,Z=_e.adaptation.period.mpd,le=Z.availabilityStartTime;if(Ae)Ge=ke&&Z.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(le.getTime()+1e3*($e+Z.timeShiftBufferDepth)):Z.availabilityEndTime;else if(ke){var ae=_e.availabilityTimeOffset;Ge=new Date(le.getTime()+1e3*($e-ae))}else Ge=le;return Ge}function we($e,_e){return($e.getTime()-_e.mpd.availabilityStartTime.getTime()+1e3*V)/1e3}function Ee($e,_e){return $e+(_e.adaptation.period.start-_e.presentationTimeOffset)}function ie($e){var _e={start:NaN,end:NaN},ke=$e[0].getAdapter().getRegularPeriods()[0],Ae=we(new Date,ke);if(!$e||$e.length===0)return{range:_e,now:Ae};$e.forEach(function(Z){var le=Z.getAdapter(),ae=le.getMediaInfoForType(Z.getStreamInfo(),y.Z.VIDEO)||le.getMediaInfoForType(Z.getStreamInfo(),y.Z.AUDIO),se=le.getVoRepresentations(ae)[0],Q={start:NaN,end:NaN};if(se)if(se.segmentInfoType===v.Z.SEGMENT_TIMELINE)Q=function(be){var Fe,Ne,pe,Me,Xe=be.adaptation.period.mpd.manifest.Period_asArray[be.adaptation.period.index].AdaptationSet_asArray[be.adaptation.index],dt=P.getRepresentationFor(be.index,Xe),ut=dt.SegmentTemplate||dt.SegmentList,et=ut.SegmentTimeline,ht=ut.timescale,jt=et.S_asArray,Ht={start:0,end:0},kt=jt[0].t,Ut=!isNaN(kt),An=Ut?kt:0,ot=0;for(Ut&&(Ht.start=Ee(An/ht,be)),pe=0,Me=jt.length;pe<Me;pe++)Ne=0,(Fe=jt[pe]).hasOwnProperty("r")&&(Ne=Fe.r),ot+=Fe.d*(1+Ne);return Ht.end=Ee((An+ot)/ht,be),Ht}(se);else{var Pe=se.adaptation.period;Q.start=Pe.start,Q.end=Math.max(Ae,Pe.start+Pe.duration)}!isNaN(Q.start)&&(isNaN(_e.start)||_e.start>Q.start)&&(_e.start=Q.start),!isNaN(Q.end)&&(isNaN(_e.end)||_e.end<Q.end)&&(_e.end=Q.end)}),_e.end=Math.min(Ae,_e.end);var Ge=ge($e,_e.end,!0);return _e.end=isNaN(Ge)?_e.end:Ge,_e.start=ke&&ke.mpd&&ke.mpd.timeShiftBufferDepth&&!isNaN(ke.mpd.timeShiftBufferDepth)&&!isNaN(_e.end)?Math.max(_e.end-ke.mpd.timeShiftBufferDepth,_e.start):_e.start,_e.start=ge($e,_e.start),{range:_e,now:Ae}}function me($e,_e){B=$e-_e.end}function ge($e,_e){var ke=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var Ae=0,Ge=!1,Z=NaN;!Ge&&Ae<$e.length;){var le=$e[Ae].getStreamInfo();le.start<=_e&&(!isFinite(le.duration)||le.start+le.duration>=_e)?(Z=_e,Ge=!0):!ke&&le.start>_e&&(isNaN(Z)||le.start<Z)?Z=le.start:ke&&le.start+le.duration<_e&&(isNaN(Z)||le.start+le.duration>Z)&&(Z=le.start+le.duration),Ae+=1}return Z}catch(ae){return _e}}function He($e){$e.offset===void 0||isNaN($e.offset)||ne($e.offset/1e3)}function Oe(){V=0,B=0}function Ze(){J.off(T.Z.UPDATE_TIME_SYNC_OFFSET,He,this),Oe()}return L={initialize:function(){Oe(),J.on(T.Z.UPDATE_TIME_SYNC_OFFSET,He,this)},getClientTimeOffset:function(){return V},setClientTimeOffset:ne,getClientReferenceTime:function(){return Date.now()-1e3*B+1e3*V},calcAvailabilityStartTimeFromPresentationTime:function($e,_e,ke){return fe($e,_e,ke)},calcAvailabilityEndTimeFromPresentationTime:function($e,_e,ke){return fe($e,_e,ke,!0)},calcPresentationTimeFromWallTime:we,calcPresentationTimeFromMediaTime:Ee,calcPeriodRelativeTimeFromMpdRelativeTime:function($e,_e){return _e-$e.adaptation.period.start},calcMediaTimeFromPresentationTime:function($e,_e){return $e-_e.adaptation.period.start+_e.presentationTimeOffset},calcWallTimeForSegment:function($e,_e){var ke,Ae,Ge;return _e&&(ke=$e.representation.adaptation.period.mpd.suggestedPresentationDelay,Ae=$e.presentationStartTime+ke,Ge=new Date($e.availabilityStartTime.getTime()+1e3*Ae)),Ge},calcTimeShiftBufferWindow:function($e,_e){if(!_e)return function(Ae){var Ge={start:NaN,end:NaN},Z=0,le=NaN;return Ae.forEach(function(ae){var se=ae.getStreamInfo();Z+=se.duration,(isNaN(le)||se.start<le)&&(le=se.start)}),Ge.start=le,Ge.end=le+Z,Ge}($e);if(H.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var ke=ie($e);return me(ke.now,ke.range),ke.range}return function(Ae){var Ge={start:NaN,end:NaN};if(!Ae||Ae.length===0)return Ge;var Z=Ae[0].getAdapter().getRegularPeriods()[0],le=we(new Date,Z),ae=Z.mpd.timeShiftBufferDepth,se=isNaN(ae)?0:le-ae;if(Ge.start=ge(Ae,se),Ge.end=!isNaN(Ge.start)&&le<Ge.start?le:ge(Ae,le,!0),!isNaN(ae)&&Ge.end<le-ae&&(Ge.end=NaN),H.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var Q=ie(Ae);if(Q.range.end<Ge.start)return J.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Oi.LEVELS.WARNING,event:Oi.EVENTS.INVALID_DVR_WINDOW}),me(Q.now,Q.range),Q.range}return Ge}($e)},reset:Ze},P=Vn(ee).getInstance(),Ze(),L}_r.__dashjs_factory_name="TimelineConverter";var vu=U.Z.getSingletonFactory(_r),Wf=w(4593),la=w(6934);function $f(L){return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},$f(L)}function $a(L,P){return $a=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},$a(L,P)}function Xf(L,P){return!P||$f(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Xu(L){return Xu=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Xu(L)}var Us=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&$a(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Xu(P);if(B){var ne=Xu(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Xf(this,J)});function ee(){var J;return function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).captionData=null,J.label=null,J.defaultTrack=!1,J.kind=null,J.isFragmented=!1,J.isEmbedded=!1,J.isTTML=null,J}return ee}(Pc),Ro=w(2295);function Lc(){var L=0;function P(ne){for(var fe="",we=0;we<ne.length;++we)fe+=ne[we].uchar;return fe.length-fe.replace(/^\s+/,"").length}function B(ne){return"left: "+3.125*ne.x+"%; top: "+6.66*ne.y1+"%; width: "+(100-3.125*ne.x)+"%; height: "+6.66*Math.max(ne.y2-1-ne.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function V(ne){return ne==="red"?"rgb(255, 0, 0)":ne==="green"?"rgb(0, 255, 0)":ne==="blue"?"rgb(0, 0, 255)":ne==="cyan"?"rgb(0, 255, 255)":ne==="magenta"?"rgb(255, 0, 255)":ne==="yellow"?"rgb(255, 255, 0)":ne==="white"?"rgb(255, 255, 255)":ne==="black"?"rgb(0, 0, 0)":ne}function ee(ne,fe){var we=ne.videoHeight/15;return fe?"font-size: "+we+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(fe.foreground?V(fe.foreground):"rgb(255, 255, 255)")+"; font-style: "+(fe.italics?"italic":"normal")+"; text-decoration: "+(fe.underline?"underline":"none")+"; white-space: pre; background-color: "+(fe.background?V(fe.background):"transparent")+";":"font-size: "+we+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function J(ne){return ne.replace(/^\s+/g,"")}function H(ne){return ne.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(ne,fe,we,Ee){var ie,me,ge=null,He=!1,Oe=-1,Ze={start:fe,end:we,spans:[]},$e="style_cea608_white_black",_e={},ke={},Ae=[];for(ie=0;ie<15;++ie){var Ge=Ee.rows[ie],Z="",le=null;if(Ge.isEmpty()===!1){var ae=P(Ge.chars);ge===null&&(ge={x:ae,y1:ie,y2:ie+1,p:[]}),ae!==Oe&&He&&(ge.p.push(Ze),Ze={start:fe,end:we,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(Ae.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge={x:ae,y1:ie,y2:ie+1,p:[]});for(var se=0;se<Ge.chars.length;++se){var Q=Ge.chars[se],Pe=Q.penState;if(le===null||!Pe.equals(le)){Z.trim().length>0&&(Ze.spans.push({name:$e,line:Z,row:ie}),Z="");var be="style_cea608_"+Pe.foreground+"_"+Pe.background;Pe.underline&&(be+="_underline"),Pe.italics&&(be+="_italics"),ke.hasOwnProperty(be)||(ke[be]=JSON.parse(JSON.stringify(Pe))),le=Pe,$e=be}Z+=Q.uchar}Z.trim().length>0&&Ze.spans.push({name:$e,line:Z,row:ie}),He=!0,Oe=ae}else He=!1,Oe=-1,ge&&(ge.p.push(Ze),Ze={start:fe,end:we,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(Ae.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge=null)}ge&&(ge.p.push(Ze),ge.y2=ie+1,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(Ae.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge=null);var Fe=[];for(ie=0;ie<Ae.length;++ie){var Ne=Ae[ie],pe="sub_cea608_"+L++,Me=document.createElement("div");Me.id=pe;var Xe=B(Ne);Me.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+Xe;var dt=document.createElement("div");dt.className="paragraph bodyStyle",dt.style.cssText=ee(ne);var ut=document.createElement("div");ut.className="cueUniWrapper",ut.style.cssText="unicode-bidi: normal; direction: ltr;";for(var et=0;et<Ne.p.length;++et){var ht=Ne.p[et],jt=0;for(me=0;me<ht.spans.length;++me){var Ht=ht.spans[me];if(Ht.line.length>0){if(me!==0&&jt!=Ht.row){var kt=document.createElement("br");kt.className="lineBreak",ut.appendChild(kt)}var Ut=!1;jt===Ht.row&&(Ut=!0),jt=Ht.row;var An=ke[Ht.name],ot=document.createElement("span");ot.className="spanPadding "+Ht.name+" customSpanColor",ot.style.cssText=ee(ne,An),me!==0&&Ut?me===ht.spans.length-1?ot.textContent=H(Ht.line):ot.textContent=Ht.line:ht.spans.length>1&&me<ht.spans.length-1&&Ht.row===ht.spans[me+1].row?ot.textContent=J(Ht.line):ot.textContent=Ht.line.trim(),ut.appendChild(ot)}}}dt.appendChild(ut),Me.appendChild(dt);var yt={bodyStyle:["%",90]};for(var $t in ke)ke.hasOwnProperty($t)&&(yt[$t]=["%",90]);Fe.push({type:"html",start:fe,end:we,cueHTMLElement:Me,cueID:pe,cellResolution:[32,15],isFromCEA608:!0,fontSize:yt,lineHeight:{},linePadding:{}})}return Fe}}}Lc.__dashjs_factory_name="EmbeddedTextHtmlRender";var Jh=U.Z.getSingletonFactory(Lc);function Om(L){var P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He,Oe,Ze,$e,_e=L.errHandler,ke=L.manifestModel,Ae=L.mediaController,Ge=L.videoModel,Z=L.textTracks,le=L.vttParser,ae=L.vttCustomRenderingParser,se=L.ttmlParser,Q=L.streamInfo,Pe=L.settings,be=this.context,Fe=(0,m.Z)(be).getInstance(),Ne=!1;function pe(){H=null,fe=NaN,we=[],Ee=null,ne=!1,J=[],ee=null}function Me(kt){var Ut=new Us;for(var An in kt)Ut[An]=kt[An];Ut.labels=kt.labels,Ut.defaultTrack=function(ot){var yt=!1;return me.length>1&&ot.isEmbedded?yt=ot.id&&ot.id===y.Z.CC1:me.length===1?ot.id&&typeof ot.id=="string"&&ot.id.substring(0,2)==="CC"&&(yt=!0):me.length===0&&(yt=ot.index===J[0].index),yt}(kt),Ut.isFragmented=kt.isFragmented,Ut.isEmbedded=!!kt.isEmbedded,Ut.isTTML=function(ot){return ot.codec&&ot.codec.search(y.Z.STPP)>=0||ot.mimeType&&ot.mimeType.search(y.Z.TTML)>=0}(kt),Ut.kind=function(ot,yt){var $t=ot.roles&&ot.roles.length>0?yt[ot.roles[0]]:yt.caption;return $t=$t===yt.caption||$t===yt.subtitle?$t:yt.caption}(kt,{subtitle:"subtitles",caption:"captions"}),Z.addTextTrack(Ut)}function Xe(kt){var Ut=kt.chunk;Ut.mediaInfo.embeddedCaptions&&ut(Ut.bytes,Ut)}function dt(kt){ie=kt}function ut(kt,Ut){var An=Ut.mediaInfo,ot=An.type,yt=An.mimeType,$t=An.codec||yt;$t?An.codec.indexOf("application/mp4")!==-1?function(xt,en,Jt){var Wt;if(en.segmentType==="InitializationSegment")ne=!0,fe=V.getMediaTimescaleFromMoov(xt);else{if(!ne)return;(Wt=V.getSamplesInfo(xt).sampleList).length>0&&(Ee=Wt[0].cts-en.start*fe),Jt.search(y.Z.STPP)>=0?function(Dn,Nn,rr){var ir,It;for(ee=ee!==null?ee:jt(rr),ir=0;ir<Nn.length;ir++){var Xt=Nn[ir],Gt=Xt.cts,un=ht(),vn=un+Gt/fe,Pn=vn+Xt.duration/fe;P.buffered.add(vn,Pn);var xn=new DataView(Dn,Xt.offset,Xt.subSizes[0]),Fn=la.Utils.dataViewToString(xn,y.Z.UTF8),Gn=[],bt=Xt.offset+Xt.subSizes[0];for(It=1;It<Xt.subSizes.length;It++){var Sn=new Uint8Array(Dn,bt,Xt.subSizes[It]),En=String.fromCharCode.apply(null,Sn);Gn.push(En),bt+=Xt.subSizes[It]}try{var Lt=ke.getValue().ttmlTimeIsRelative?Gt/fe:0,On=ee.parse(Fn,Lt,Gt/fe,(Gt+Xt.duration)/fe,Gn);Z.addCaptions(ie,un,On)}catch(lt){H.removeExecutedRequestsBeforeTime(),this.remove(),B.error("TTML parser error: "+lt.message)}}}(xt,Wt,Jt):function(Dn,Nn){var rr,ir,It,Xt=[];for(rr=0;rr<Nn.length;rr++){var Gt=Nn[rr];Gt.cts-=Ee;var un=ht()+Gt.cts/fe,vn=un+Gt.duration/fe;P.buffered.add(un,vn);var Pn=Dn.slice(Gt.offset,Gt.offset+Gt.size),xn=la.parseBuffer(Pn);for(ir=0;ir<xn.boxes.length;ir++){var Fn=xn.boxes[ir];if(B.debug("VTT box1: "+Fn.type),Fn.type!=="vtte"&&Fn.type==="vttc"){B.debug("VTT vttc boxes.length = "+Fn.boxes.length);var Gn={styles:{}};for(It=0;It<Fn.boxes.length;It++){var bt=Fn.boxes[It];if(B.debug("VTT box2: "+bt.type),bt.type==="payl")Gn.start=Gt.cts/fe,Gn.end=(Gt.cts+Gt.duration)/fe,Gn.data=bt.cue_text;else if(bt.type==="sttg"&&bt.settings&&bt.settings!=="")try{var Sn=bt.settings.split(" ");Gn.styles=le.getCaptionStyles(Sn)}catch(En){}}Gn&&Gn.data&&(Xt.push(Gn),B.debug("VTT  ".concat(Gn.start," - ").concat(Gn.end," :  ").concat(Gn.data)))}}}Xt.length>0&&Z.addCaptions(ie,0,Xt)}(xt,Wt)}}(kt,Ut,$t):ot===y.Z.VIDEO?function(xt,en){var Jt,Wt;if(en.segmentType===nt.w.INIT_SEGMENT_TYPE)ge===0&&(ge=V.getMediaTimescaleFromMoov(xt));else if(en.segmentType===nt.w.MEDIA_SEGMENT_TYPE){if(ge===0)return void B.warn("CEA-608: No timescale for embeddedTextTrack yet");var Dn=(Wt=V.getSamplesInfo(xt)).lastSequenceNumber,Nn=Math.trunc(en.start),rr=Math.trunc(en.end);if(Ze[0]||Ze[1]||function(){for(var un,vn=0;vn<me.length;vn++){if((un=Z.getTrackIdxForId(me[vn].id))===-1)return void B.warn("CEA-608: data before track is ready.");var Pn=et(un);Ze[vn]=new(R()).Cea608Parser(vn+1,{newCue:Pn},null)}}(),ge){if(function(un,vn,Pn,xn,Fn){return un!==null&&vn!==null&&xn!==null&&Fn!==null&&(vn===un?xn!==Fn:vn!==un+Pn)}(He,Dn,Wt.numSequences,Oe,Nn))for(Jt=0;Jt<Ze.length;Jt++)Ze[Jt]&&Ze[Jt].reset();for(var ir=function(un,vn){if(vn.length===0)return null;for(var Pn={splits:[],fields:[[],[]]},xn=new DataView(un),Fn=0;Fn<vn.length;Fn++)for(var Gn=vn[Fn],bt=R().findCea608Nalus(xn,Gn.offset,Gn.size),Sn=null,En=0,Lt=0;Lt<bt.length;Lt++)for(var On=R().extractCea608DataFromRange(xn,bt[Lt]),lt=0;lt<2;lt++)if(On[lt].length>0){Gn.cts!==Sn?En=0:En+=1;var rt=ht();Pn.fields[lt].push([Gn.cts+rt*ge,On[lt],En]),Sn=Gn.cts}return Pn.fields.forEach(function(Kt){Kt.sort(function(ze,Ve){return ze[0]===Ve[0]?ze[2]-Ve[2]:ze[0]-Ve[0]})}),Pn}(xt,Wt.sampleList),It=0;It<Ze.length;It++){var Xt=ir.fields[It],Gt=Ze[It];if(Gt)for(Jt=0;Jt<Xt.length;Jt++)Gt.addData(Xt[Jt][0]/ge,Xt[Jt][1])}He=Dn,Oe=rr}}}(kt,Ut):function(xt,en,Jt){var Wt,Dn,Nn=new DataView(xt,0,xt.byteLength);Dn=la.Utils.dataViewToString(Nn,y.Z.UTF8);try{Wt=jt(Jt).parse(Dn,0),Z.addCaptions(Z.getCurrentTrackIdx(),0,Wt),P.buffered&&P.buffered.add(en.start,en.end)}catch(rr){_e.error(new ce.Z(Te.TIMED_TEXT_ERROR_ID_PARSE_CODE,Te.TIMED_TEXT_ERROR_MESSAGE_PARSE+rr.message,Dn))}}(kt,Ut,$t):B.error("No text type defined")}function et(kt){return function(Ut,An,ot){var yt;(yt=Ge.getTTMLRenderingDiv()?$e.createHTMLCaptionsFromScreen(Ge.getElement(),Ut,An,ot):[{start:Ut,end:An,data:ot.getDisplayText(),styles:{}}])&&Z.addCaptions(kt,0,yt)}}function ht(){return isNaN(P.timestampOffset)?0:P.timestampOffset}function jt(kt){var Ut;return kt.search(y.Z.VTT)>=0?Ut=Pe.get().streaming.text.webvtt.customRenderingEnabled&&ae?ae:le:(kt.search(y.Z.TTML)>=0||kt.search(y.Z.STPP)>=0)&&(Ut=se),Ut}function Ht(kt){me.forEach(function(Ut){var An=Z.getTrackIdxForId(Ut.id);An>=0&&Z.deleteCuesFromTrackIdx(An,kt.from,kt.to)})}return P={initialize:function(){Ne||(me=[],ie=null,ge=0,Ze=[],He=null,Oe=null,Ne=!0,$e=Jh(be).getInstance(),Fe.on(T.Z.VIDEO_CHUNK_RECEIVED,Xe,P),Fe.on(T.Z.BUFFER_CLEARED,Ht,P))},addMediaInfos:function(kt,Ut,An){if(J=J.concat(Ut),kt===y.Z.TEXT&&Ut[0].isFragmented&&!Ut[0].isEmbedded){H=An,P.buffered=(0,Ro.Z)(be).create(),we=Ae.getTracksFor(y.Z.TEXT,Q.id).filter(function(xt){return xt.isFragmented});for(var ot=Ae.getCurrentTrackFor(y.Z.TEXT,Q.id),yt=0;yt<we.length;yt++)if(we[yt]===ot){dt(yt);break}}for(var $t=0;$t<Ut.length;$t++)Me(Ut[$t])},resetMediaInfos:function(){J=[]},getStreamId:function(){return Q.id},append:ut,abort:function(){},addEmbeddedTrack:function(kt){if(Ne&&kt)if(kt.id===y.Z.CC1||kt.id===y.Z.CC3){for(var Ut=0;Ut<me.length;Ut++)if(me[Ut].id===kt.id)return;me.push(kt)}else B.warn("Embedded track "+kt.id+" not supported!")},resetEmbedded:function(){Fe.off(T.Z.VIDEO_CHUNK_RECEIVED,Xe,P),Fe.off(T.Z.BUFFER_CLEARED,Ht,P),Z&&Z.deleteAllTextTracks(),Ne=!1,me=[],Ze=[null,null],He=null,Oe=null},getConfig:function(){return{fragmentModel:H,fragmentedTracks:we,videoModel:Ge}},setCurrentFragmentedTrackIdx:dt,remove:function(kt,Ut){kt===void 0&&kt===Ut&&(kt=P.buffered.start(0),Ut=P.buffered.end(P.buffered.length-1)),P.buffered.remove(kt,Ut),Z.deleteCuesFromTrackIdx(ie,kt,Ut)},reset:function(){pe(),J=[],V=null}},B=(0,x.Z)(be).getInstance().getLogger(P),V=(0,oa.Z)(be).getInstance(),pe(),P}Om.__dashjs_factory_name="TextSourceBuffer";var ep=U.Z.getClassFactory(Om),kc=w(4403);function Fc(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}var kE=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function Lm(L){var P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He,Oe,Ze,$e,_e,ke,Ae,Ge=this.context,Z=(0,m.Z)(Ge).getInstance(),le=L.videoModel,ae=L.streamInfo,se=L.settings;function Q(It,Xt,Gt,un,vn,Pn){var xn=0,Fn=0;It/Xt>Gt/un?xn=(Fn=Xt)/un*Gt:Fn=(xn=It)/Gt*un;var Gn,bt,Sn=0,En=0;return xn/Fn>vn?(En=Fn,Sn=Fn*vn):(Sn=xn,En=xn/vn),Gn=(It-Sn)/2,bt=(Xt-En)/2,Pn?{x:Gn+.1*Sn,y:bt+.1*En,w:.8*Sn,h:.8*En}:{x:Gn,y:bt,w:Sn,h:En}}function Pe(It,Xt){var Gt=le.getClientWidth(),un=le.getClientHeight(),vn=le.getVideoWidth(),Pn=le.getVideoHeight(),xn=le.getVideoRelativeOffsetTop(),Fn=le.getVideoRelativeOffsetLeft();if(vn!==0&&Pn!==0){var Gn=vn/Pn,bt=!1;It.isFromCEA608&&(Gn=1.1666666666666667,bt=!0);var Sn=Q.call(this,Gt,un,vn,Pn,Gn,bt),En=Sn.w,Lt=Sn.h,On=Sn.x,lt=Sn.y;if(En!=we||Lt!=Ee||On!=ne||lt!=fe||Xt){if(ne=On+Fn,fe=lt+xn,we=En,Ee=Lt,ie){var rt=ie.style;rt&&(rt.left=ne+"px",rt.top=fe+"px",rt.width=we+"px",rt.height=Ee+"px",rt.zIndex=He&&document[He]||Oe?$e:null,Z.trigger(_.Z.CAPTION_CONTAINER_RESIZE))}var Kt=It.activeCues;if(Kt)for(var ze=Kt.length,Ve=0;Ve<ze;++Ve){var Dt=Kt[Ve];Dt.scaleCue(Dt)}}}}function be(It){var Xt,Gt,un,vn,Pn,xn=we,Fn=Ee;if(It.cellResolution){var Gn=[xn/It.cellResolution[0],Fn/It.cellResolution[1]];if(It.linePadding){for(Xt in It.linePadding)if(It.linePadding.hasOwnProperty(Xt)){Gt=(It.linePadding[Xt]*Gn[0]).toString();for(var bt=document.getElementsByClassName("spanPadding"),Sn=0;Sn<bt.length;Sn++)bt[Sn].style.cssText=bt[Sn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt),bt[Sn].style.cssText=bt[Sn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt)}}if(It.fontSize){for(Xt in It.fontSize)if(It.fontSize.hasOwnProperty(Xt)){It.fontSize[Xt][0]==="%"?un=It.fontSize[Xt][1]/100:It.fontSize[Xt][0]==="c"&&(un=It.fontSize[Xt][1]),Gt=(un*Gn[1]).toString(),Pn=Xt!=="defaultFontSize"?document.getElementsByClassName(Xt):document.getElementsByClassName("paragraph");for(var En=0;En<Pn.length;En++)Pn[En].style.cssText=Pn[En].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt)}if(It.lineHeight){for(Xt in It.lineHeight)if(It.lineHeight.hasOwnProperty(Xt)){It.lineHeight[Xt][0]==="%"?vn=It.lineHeight[Xt][1]/100:It.fontSize[Xt][0]==="c"&&(vn=It.lineHeight[Xt][1]),Gt=(vn*Gn[1]).toString(),Pn=document.getElementsByClassName(Xt);for(var Lt=0;Lt<Pn.length;Lt++)Pn[Lt].style.cssText=Pn[Lt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt)}}}}if(It.isd){var On=document.getElementById(It.cueID);On&&ie.removeChild(On),Ne(It)}}function Fe(It,Xt){var Gt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,un=/^#(.*)$/;if(Gt.test(Xt)){var vn=Gt.exec(Xt),Pn=parseInt(vn[4],10)-1;return"data:image/png;base64,"+btoa(It.images[Pn])}if(un.test(Xt)){var xn=un.exec(Xt)[1];return"data:image/png;base64,"+It.embeddedImages[xn]}return Xt}function Ne(It){if(ie){ir.call(this);var Xt=document.createElement("div");ie.appendChild(Xt),Ze=(0,kc.renderHTML)(It.isd,Xt,function(Gt){return Fe(It,Gt)},ie.clientHeight,ie.clientWidth,se.get().streaming.text.imsc.displayForcedOnlyMode,function(Gt){B.info("renderCaption :",Gt)},Ze,se.get().streaming.text.imsc.enableRollUp),Xt.id=It.cueID,Z.trigger(_.Z.CAPTION_RENDERED,{captionDiv:Xt,currentTrackIdx:H})}}function pe(It,Xt){return!!Xt&&Xt.endTime>=It.startTime}function Me(It,Xt){return!!se.get().streaming.text.extendSegmentedCues&&!!function(Gt,un,vn){for(var Pn=0;Pn<vn.length;Pn++){var xn=vn[Pn];if(JSON.stringify(Gt[xn])!==JSON.stringify(un[xn]))return!1}return!0}(Xt,It,kE)&&(Xt.endTime=Math.max(Xt.endTime,It.endTime),!0)}function Xe(It,Xt){Xt&&Xt.forEach(function(Gt){Gt.kind&&Gt.kind==="image"&&(Gt.src=Fe(It,Gt.src)),Xe(It,Gt.contents)})}function dt(It,Xt,Gt){var un=yt(It),vn=se.get().streaming.text.dispatchForManualRendering;if(un&&Array.isArray(Gt)&&Gt.length!==0)for(var Pn=0;Pn<Gt.length;Pn++){var xn=null,Fn=Gt[Pn];un.cellResolution=Fn.cellResolution,un.isFromCEA608=Fn.isFromCEA608,isNaN(Fn.start)||isNaN(Fn.end)||(vn?xn=ut(Fn,Xt):kt(Fn)&&ie?xn=jt(Fn,Xt,un):Fn.data&&(xn=Ht(Fn,Xt,un)));try{if(xn){if(!en(un,xn))if(se.get().streaming.text.webvtt.customRenderingEnabled)un.manualCueList||(un.manualCueList=[]),un.manualCueList.push(xn);else{var Gn=void 0;un.cues&&un.cues.length!==0&&(Gn=un.cues[un.cues.length-1]),pe(xn,Gn)?Me(xn,Gn)||(Gn.isd&&(Gn.onexit=function(){}),un.mode!==y.Z.TEXT_DISABLED&&un.addCue(xn)):un.mode!==y.Z.TEXT_DISABLED&&un.addCue(xn)}var bt=se.get().streaming.buffer.bufferToKeep;Wt(un,0,le.getTime()-bt)}else B.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Sn){throw Dn(un),un.addCue(xn),Sn}}}function ut(It,Xt){var Gt=Ut(It,Xt);return Gt.onenter=function(){kt(It)&&Ae&&Ae.cueID!==Gt.cueID&&ht(Ae),delete Gt.type,Ae=Gt,et(Gt)},Gt.onexit=function(){ht(Gt),Ae=null},Gt}function et(It){Z.trigger(_.Z.CUE_ENTER,It)}function ht(It){Z.trigger(_.Z.CUE_EXIT,{cueID:It.cueID})}function jt(It,Xt,Gt){var un=this,vn=Ut(It,Xt);return ie.style.left=ne+"px",ie.style.top=fe+"px",ie.style.width=we+"px",ie.style.height=Ee+"px",vn.onenter=function(){var Pn=this;Gt.mode===y.Z.TEXT_SHOWING&&(this.isd?(ke?requestAnimationFrame(function(){return Ne(Pn)}):Ne(this),B.debug("Cue enter id:"+this.cueID)):(ie.appendChild(this.cueHTMLElement),be.call(un,this),Z.trigger(_.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:H})))},vn.onexit=function(){if(ie)for(var Pn=ie.childNodes,xn=0;xn<Pn.length;++xn)Pn[xn].id===this.cueID&&(B.debug("Cue exit id:"+Pn[xn].id),ie.removeChild(Pn[xn]),--xn)},vn}function Ht(It,Xt,Gt){var un=Ut(It,Xt);if(un.isActive=!1,It.styles)try{It.styles.align!==void 0&&"align"in un&&(un.align=It.styles.align),It.styles.line!==void 0&&"line"in un&&(un.line=It.styles.line),It.styles.snapToLines!==void 0&&"snapToLines"in un&&(un.snapToLines=It.styles.snapToLines),It.styles.position!==void 0&&"position"in un&&(un.position=It.styles.position),It.styles.size!==void 0&&"size"in un&&(un.size=It.styles.size)}catch(vn){B.error(vn)}return un.onenter=function(){Gt.mode===y.Z.TEXT_SHOWING&&Z.trigger(_.Z.CAPTION_RENDERED,{currentTrackIdx:H})},un}function kt(It){return It.type==="html"}function Ut(It,Xt){return kt(It)?function(Gt,un){var vn=new V(Gt.start+un,Gt.end+un,"");return vn.cueHTMLElement=Gt.cueHTMLElement,vn.isd=Gt.isd,vn.images=Gt.images,vn.embeddedImages=Gt.embeddedImages,vn.cueID=Gt.cueID,vn.scaleCue=be.bind(self),vn.cellResolution=Gt.cellResolution,vn.lineHeight=Gt.lineHeight,vn.linePadding=Gt.linePadding,vn.fontSize=Gt.fontSize,vn.isd&&Xe(vn,vn.isd.contents),vn}(It,Xt):function(Gt,un){var vn=new V(Gt.start-un,Gt.end-un,Gt.data);return vn.cueID="".concat(vn.startTime,"_").concat(vn.endTime),vn}(It,Xt)}function An(It){if(me)for(var Xt=me.childNodes,Gt=0;Gt<Xt.length;++Gt)Xt[Gt].id===It.cueID&&(me.removeChild(Xt[Gt]),--Gt)}function ot(){var It,Xt=[],Gt=function(vn,Pn){var xn;if(typeof Symbol>"u"||vn[Symbol.iterator]==null){if(Array.isArray(vn)||(xn=function(Lt,On){if(Lt){if(typeof Lt=="string")return Fc(Lt,On);var lt=Object.prototype.toString.call(Lt).slice(8,-1);return lt==="Object"&&Lt.constructor&&(lt=Lt.constructor.name),lt==="Map"||lt==="Set"?Array.from(Lt):lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(lt)?Fc(Lt,On):void 0}}(vn))||Pn){xn&&(vn=xn);var Fn=0,Gn=function(){};return{s:Gn,n:function(){return Fn>=vn.length?{done:!0}:{done:!1,value:vn[Fn++]}},e:function(Lt){throw Lt},f:Gn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var bt,Sn=!0,En=!1;return{s:function(){xn=vn[Symbol.iterator]()},n:function(){var Lt=xn.next();return Sn=Lt.done,Lt},e:function(Lt){En=!0,bt=Lt},f:function(){try{Sn||xn.return==null||xn.return()}finally{if(En)throw bt}}}}(le.getTextTracks());try{for(Gt.s();!(It=Gt.n()).done;){var un=It.value;un.manualMode===y.Z.TEXT_SHOWING&&Xt.push(un)}}catch(vn){Gt.e(vn)}finally{Gt.f()}return Xt}function yt(It){return It>=0&&ee[It]?le.getTextTrack(ee[It].kind,ee[It].id,ee[It].lang,ee[It].isTTML,ee[It].isEmbedded):null}function $t(It){var Xt=this;if(It!==H){var Gt=yt(H=It);xt.call(this,Gt),ge&&(clearInterval(ge),ge=null),Gt&&Gt.renderingType==="html"&&(Pe.call(this,Gt,!0),window.ResizeObserver?(_e=new window.ResizeObserver(function(){Pe.call(Xt,Gt,!0)})).observe(le.getElement()):ge=setInterval(Pe.bind(this,Gt),500))}}function xt(It){ir.call(this),It&&It.renderingType==="html"?Nn.call(this):rr.call(this)}function en(It,Xt){if(!It.cues)return!1;for(var Gt=0;Gt<It.cues.length;Gt++)if(It.cues[Gt].startTime===Xt.startTime&&It.cues[Gt].endTime===Xt.endTime)return!0;return!1}function Jt(It,Xt,Gt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!It&&(isNaN(Xt)||(un?It.startTime:It.endTime)>=Xt)&&(isNaN(Gt)||(un?It.endTime:It.startTime)<=Gt)}function Wt(It,Xt,Gt){var un,vn;if(!(Gt<Xt)&&It&&(It.cues||It.manualCueList)){var Pn=It.cues&&It.cues.length>0?"native":"custom",xn=Pn==="native"?It.cues:It.manualCueList;if(!xn||xn.length===0)return;for(var Fn=xn.length-1;Fn>=0;Fn--)!Jt(xn[Fn],Xt,Gt,!0)||(un=xn[Fn],vn=le.getTime(),un.startTime>=vn&&un.endTime<=vn)||(Pn==="native"?It.removeCue(xn[Fn]):(An(xn[Fn]),delete It.manualCueList[Fn]))}}function Dn(It,Xt,Gt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(It&&(It.cues||It.manualCueList)){var vn=It.cues&&It.cues.length>0?"native":"custom",Pn=vn==="native"?It.cues:It.manualCueList;if(!Pn||Pn.length===0)return;for(var xn=Pn.length-1,Fn=xn;Fn>=0;Fn--)Jt(Pn[Fn],Xt,Gt,un)&&(vn==="native"?(Pn[Fn].onexit&&Pn[Fn].onexit(),It.removeCue(Pn[Fn])):(An(Pn[Fn]),delete It.manualCueList[Fn]))}}function Nn(){var It=document.getElementById("native-cue-style");if(!It){(It=document.createElement("style")).id="native-cue-style",document.head.appendChild(It);var Xt=It.sheet,Gt=le.getElement();try{Gt&&(Gt.id?Xt.insertRule("#"+Gt.id+"::cue {background: transparent}",0):Gt.classList.length!==0?Xt.insertRule("."+Gt.className+"::cue {background: transparent}",0):Xt.insertRule("video::cue {background: transparent}",0))}catch(un){B.info(""+un.message)}}}function rr(){var It=document.getElementById("native-cue-style");It&&document.head.removeChild(It)}function ir(){if(ie)for(;ie.firstChild;)ie.removeChild(ie.firstChild)}return P={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(V=window.VTTCue||window.TextTrackCue,ee=[],J=[],H=-1,ne=0,fe=0,we=0,Ee=0,ie=null,me=null,ge=null,Oe=!1,$e=2147483647,Ze=null,ke="requestAnimationFrame"in window,document.fullscreenElement!==void 0?He="fullscreenElement":document.webkitIsFullScreen!==void 0?He="webkitIsFullScreen":document.msFullscreenElement?He="msFullscreenElement":document.mozFullScreen&&(He="mozFullScreen"))},getStreamId:function(){return ae.id},addTextTrack:function(It){ee.push(It)},addCaptions:dt,createTracks:function(){var It=se.get().streaming.text.dispatchForManualRendering;ee.sort(function(On,lt){return On.index-lt.index}),ie=le.getTTMLRenderingDiv(),me=le.getVttRenderingDiv();for(var Xt,Gt,un,vn,Pn,xn,Fn=-1,Gn=0;Gn<ee.length;Gn++){var bt=(Gt=(Xt=ee[Gn]).kind,un=Xt.id!==void 0?Xt.id:Xt.lang,vn=Xt.lang,Pn=Xt.isTTML,xn=Xt.isEmbedded,le.addTextTrack(Gt,un,vn,Pn,xn));J.push(bt),ee[Gn].defaultTrack&&(bt.default=!0,Fn=Gn);var Sn=yt(Gn);Sn&&(Sn.mode=y.Z.TEXT_SHOWING,ie&&(ee[Gn].isTTML||ee[Gn].isEmbedded)?Sn.renderingType="html":Sn.renderingType="default"),dt(Gn,0,ee[Gn].captionData),Z.trigger(_.Z.TEXT_TRACK_ADDED)}if($t.call(this,Fn),Fn>=0){Z.on(_.Z.PLAYBACK_METADATA_LOADED,function On(){var lt=yt(Fn);lt&&lt.renderingType==="html"&&Pe.call(this,lt,!0),Z.off(_.Z.PLAYBACK_METADATA_LOADED,On,this)},this);for(var En=0;En<ee.length;En++){var Lt=yt(En);Lt&&(Lt.mode=En!==Fn||It?y.Z.TEXT_HIDDEN:y.Z.TEXT_SHOWING,Lt.manualMode=En===Fn?y.Z.TEXT_SHOWING:y.Z.TEXT_HIDDEN)}}Z.trigger(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:H,tracks:ee,streamId:ae.id})},getCurrentTrackIdx:function(){return H},setCurrentTrackIdx:$t,getTrackIdxForId:function(It){for(var Xt=-1,Gt=0;Gt<ee.length;Gt++)if(ee[Gt].id===It){Xt=Gt;break}return Xt},getCurrentTrackInfo:function(){return ee[H]},setModeForTrackIdx:function(It,Xt){var Gt=yt(It);Gt&&Gt.mode!==Xt&&(Gt.mode=Xt),Gt&&Gt.manualMode!==Xt&&(Gt.manualMode=Xt)},deleteCuesFromTrackIdx:function(It,Xt,Gt){var un=yt(It);un&&Dn(un,Xt,Gt)},deleteAllTextTracks:function(){for(var It=J?J.length:0,Xt=0;Xt<It;Xt++){var Gt=yt(Xt);Gt&&Dn.call(this,Gt,ae.start,ae.start+ae.duration,!1)}J=[],ee=[],ge&&(clearInterval(ge),ge=null),_e&&le&&(_e.unobserve(le.getElement()),_e=null),H=-1,ir.call(this)},manualCueProcessing:function(It){var Xt=ot();if(Xt&&Xt.length>0){var Gt=Xt[0].manualCueList;Gt&&Gt.length>0&&Gt.forEach(function(un){un.startTime<=It&&un.endTime>=It&&!un.isActive?(un.isActive=!0,se.get().streaming.text.dispatchForManualRendering?et(un):WebVTT.processCues(window,[un],me,un.cueID)):un.isActive&&(un.startTime>It||un.endTime<It)&&(un.isActive=!1,se.get().streaming.text.dispatchForManualRendering?ht(un):An(un))})}},disableManualTracks:function(){var It=ot();if(It&&It.length>0){var Xt=It[0].manualCueList;Xt&&Xt.length>0&&Xt.forEach(function(Gt){if(Gt.isActive){if(Gt.isActive=!1,se.get().streaming.text.dispatchForManualRendering)ht(Gt);else if(me)for(var un=me.childNodes,vn=0;vn<un.length;++vn)un[vn].id===Gt.cueID&&(me.removeChild(un[vn]),--vn)}})}}},B=(0,x.Z)(Ge).getInstance().getLogger(P),P}Lm.__dashjs_factory_name="TextTracks";var km=U.Z.getClassFactory(Lm);function Fm(){var L,P,B,V,ee,J,H=this.context;function ne(ie){var me=ie.split(":"),ge=me.length-1;return ie=60*parseInt(me[ge-1],10)+parseFloat(me[ge]),ge===2&&(ie+=3600*parseInt(me[0],10)),ie}function fe(ie){var me=ie.split(V),ge=me[1].split(J);return ge.shift(),me[1]=ge[0],ge.shift(),{cuePoints:me,styles:we(ge)}}function we(ie){var me={};return ie.forEach(function(ge){if(ge.split(/:/).length>1){var He=ge.split(/:/)[1],Oe=!1;He&&He.search(/%/)!=-1&&(Oe=!0,He=parseInt(He.replace(/%/,""),10)),(ge.match(/align/)||ge.match(/A/))&&(me.align=He),(ge.match(/line/)||ge.match(/L/))&&(me.line=He==="auto"?He:parseInt(He,10),Oe&&(me.snapToLines=!1)),(ge.match(/position/)||ge.match(/P/))&&(me.position=He),(ge.match(/size/)||ge.match(/S/))&&(me.size=He)}}),me}function Ee(ie,me){for(var ge,He=me,Oe="",Ze="";ie[He]!==""&&He<ie.length;)He++;if((ge=He-me)>1)for(var $e=0;$e<ge;$e++){if((Ze=ie[me+$e]).match(V)){Oe="";break}Oe+=Ze,$e!==ge-1&&(Oe+="\n")}else(Ze=ie[me]).match(V)||(Oe=Ze);return Oe}return L={parse:function(ie){var me,ge,He=[];if(!ie)return He;me=(ie=ie.split(B)).length,ge=-1;for(var Oe=0;Oe<me;Oe++){var Ze=ie[Oe];if(Ze.length>0&&Ze!=="WEBVTT"&&Ze.match(V)){var $e=fe(Ze),_e=$e.cuePoints,ke=$e.styles,Ae=Ee(ie,Oe+1),Ge=ne(_e[0].replace(ee,"")),Z=ne(_e[1].replace(ee,""));!isNaN(Ge)&&!isNaN(Z)&&Ge>=ge&&Z>Ge?Ae!==""?(ge=Ge,He.push({start:Ge,end:Z,data:Ae,styles:ke})):P.error("Skipping cue due to empty/malformed cue text"):P.error("Skipping cue due to incorrect cue timing")}}return He},getCaptionStyles:we},P=(0,x.Z)(H).getInstance().getLogger(L),B=/(?:\r\n|\r|\n)/gm,V=/-->/,ee=/(^[\s]+|[\s]+$)/g,J=/\s\b/g,L}Fm.__dashjs_factory_name="VTTParser";var Um=U.Z.getSingletonFactory(Fm);function tp(){var L,P;return L={parse:function(B){var V=[];return P.oncue=function(ee){ee.start=ee.startTime,ee.end=ee.endTime,ee.data=ee.text,ee.styles={align:ee.align,line:ee.line,position:ee.position,size:ee.size},V.push(ee)},P.parse(B),V}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(P=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(B){}}(),L}tp.__dashjs_factory_name="VttCustomRenderingParser";var FE=U.Z.getSingletonFactory(tp);function Bm(){var L,P,B=this.context,V=(0,m.Z)(B).getInstance(),ee=0;return L={parse:function(J,H,ne,fe,we){var Ee,ie,me,ge="",He=[],Oe={},Ze={},$e="",_e="",ke={onOpenTag:function(ae,se,Q){if(Q[" imagetype"]&&!Q[" imageType"]&&(V.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Oi.LEVELS.ERROR,event:Oi.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),Q[" imageType"]=Q[" imagetype"]),se==="image"&&(ae==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||ae==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!Q[" imageType"]||Q[" imageType"].value!=="PNG")return void P.warn("smpte-tt imageType != PNG. Discarded");$e=Q["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){$e&&(Ze[$e]=_e.trim()),_e="",$e=""},onText:function(ae){$e&&(_e+=ae)}};if(!J)throw ge="no ttml data to parse",new Error(ge);Oe.data=J,V.trigger(T.Z.TTML_TO_PARSE,Oe);var Ae=(0,kc.fromXML)(Oe.data,function(ae){ge=ae},ke);V.trigger(T.Z.TTML_PARSED,{ttmlString:Oe.data,ttmlDoc:Ae});var Ge,Z=Ae.getMediaTimeEvents();for(me=0;me<Z.length;me++){var le=(0,kc.generateISD)(Ae,Z[me],function(ae){ge=ae});le.contents.some(function(ae){return ae.contents.length})&&(Ee=Z[me]+H)<(ie=Z[me+1]+H)&&He.push({start:Ee,end:ie,type:"html",cueID:(Ge="cue_TTML_"+ee,ee++,Ge),isd:le,images:we,embeddedImages:Ze})}if(ge!=="")throw P.error(ge),new Error(ge);return He}},P=(0,x.Z)(B).getInstance().getLogger(L),L}Bm.__dashjs_factory_name="TTMLParser";var UE=U.Z.getSingletonFactory(Bm);function np(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function Bl(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?np(Object(B),!0).forEach(function(V){jm(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):np(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function jm(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function rp(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function ip(L){var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,wt.Z)(ee).getInstance(),ne=L.adapter,fe=L.baseURLController;function we(me,ge){var He,Oe,Ze=!1;if(fe.resolve()){var $e=ne.getVoRepresentations(me);$e&&$e.length>0&&(He=fe.resolve($e[0].path).url)}var _e=me.essentialPropertiesAsArray.filter(function(Ae){return Ae.schemeIdUri&&Ae.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME}),ke=me.supplementalPropertiesAsArray.filter(function(Ae){return Ae.schemeIdUri&&Ae.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME});_e.length>0?(Ze=!0,Oe=_e):Oe=ke,Oe.forEach(function(Ae){if(function(ae){return!(!(ae.value&&ae.value==="1"&&ae.dvbUrl&&ae.dvbUrl.length>0&&ae.dvbFontFamily&&ae.dvbFontFamily.length>0&&ae.dvbMimeType)||ae.dvbMimeType!==y.Z.OFF_MIMETYPE&&ae.dvbMimeType!==y.Z.WOFF_MIMETYPE)}(Ae)){var Ge=(Z=Ae.dvbUrl,le=He,H.isPathAbsolute(Z)?Z:H.isRelative(Z)?le?H.resolve(Z,le):H.resolve(Z):Z);V.push({fontFamily:Ae.dvbFontFamily,url:Ge,mimeType:Ae.dvbMimeType,trackId:me.id,streamId:ge,isEssential:Ze,status:"unloaded",fontFace:new FontFace(Ae.dvbFontFamily,"url(".concat(Ge,")"),{display:"swap"})})}var Z,le})}function Ee(me,ge){var He=V[me];V[me]=Bl(Bl({},He),{},{status:ge})}function ie(){V=[]}return P={addFontsFromTracks:function(me,ge){if(me&&Array.isArray(me)&&ge)for(var He=0;He<me.length;He++)we(me[He],ge)},downloadFonts:function(){for(var me=function(He){var Oe=V[He];document.fonts.add(Oe.fontFace),J.trigger(_.Z.DVB_FONT_DOWNLOAD_ADDED,Oe),Oe.fontFace.load().then(function(){Ee(He,"loaded"),J.trigger(_.Z.DVB_FONT_DOWNLOAD_COMPLETE,Oe)},function(Ze){Ee(He,"error"),B.debug("Font download error: ",Ze),J.trigger(_.Z.DVB_FONT_DOWNLOAD_FAILED,Oe)})},ge=0;ge<V.length;ge++)me(ge)},getFonts:function(){return V},getFontsForTrackId:function(me){return V.filter(function(ge){return ge.trackId&&ge.trackId===me})},reset:function(){(function(){var me,ge=function(Ze,$e){var _e;if(typeof Symbol>"u"||Ze[Symbol.iterator]==null){if(Array.isArray(Ze)||(_e=function(ae,se){if(ae){if(typeof ae=="string")return rp(ae,se);var Q=Object.prototype.toString.call(ae).slice(8,-1);return Q==="Object"&&ae.constructor&&(Q=ae.constructor.name),Q==="Map"||Q==="Set"?Array.from(ae):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?rp(ae,se):void 0}}(Ze))||$e){_e&&(Ze=_e);var ke=0,Ae=function(){};return{s:Ae,n:function(){return ke>=Ze.length?{done:!0}:{done:!1,value:Ze[ke++]}},e:function(ae){throw ae},f:Ae}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ge,Z=!0,le=!1;return{s:function(){_e=Ze[Symbol.iterator]()},n:function(){var ae=_e.next();return Z=ae.done,ae},e:function(ae){le=!0,Ge=ae},f:function(){try{Z||_e.return==null||_e.return()}finally{if(le)throw Ge}}}}(V);try{for(ge.s();!(me=ge.n()).done;){var He=me.value,Oe=document.fonts.delete(He.fontFace);B.debug("Removal of fontFamily: ".concat(He.fontFamily," was ").concat(Oe?"successful":"unsuccessful"))}}catch(Ze){ge.e(Ze)}finally{ge.f()}})(),ie()}},B=(0,x.Z)(ee).getInstance().getLogger(P),ie(),P}ip.__dashjs_factory_name="DVBFonts";var BE=U.Z.getClassFactory(ip);function Zm(L){var P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He,Oe=this.context,Ze=L.adapter,$e=L.errHandler,_e=L.manifestModel,ke=L.mediaController,Ae=L.baseURLController,Ge=L.videoModel,Z=L.settings;function le(Me){if(He.error("Could not download ".concat(Me.isEssential?"an essential":"a"," font - fontFamily: ").concat(Me.fontFamily,", url: ").concat(Me.url)),Me.isEssential){var Xe=ee[Me.streamId].getTrackIdxForId(Me.trackId);ee[Me.streamId].setModeForTrackIdx(Xe,y.Z.TEXT_DISABLED)}}function ae(Me){if(He.debug("Successfully downloaded ".concat(Me.isEssential?"an essential":"a"," font - fontFamily: ").concat(Me.fontFamily,", url: ").concat(Me.url)),Me.isEssential){var Xe=ee[Me.streamId].getTrackIdxForId(Me.trackId);Xe===ee[Me.streamId].getCurrentTrackIdx()?ee[Me.streamId].setModeForTrackIdx(Xe,y.Z.TEXT_SHOWING):ee[Me.streamId].setModeForTrackIdx(Xe,y.Z.TEXT_HIDDEN)}}function se(Me){var Xe=Me.tracks,dt=Me.index,ut=Me.streamId;if(Z.get().streaming.text.defaultEnabled===!1&&!be()||me)Fe(ut,-1);else{var et=ke.getCurrentTrackFor(y.Z.TEXT,ut);if(et){var ht={lang:et.lang,role:et.roles[0],index:et.index,codec:et.codec,accessibility:et.accessibility[0]};Xe.some(function(jt,Ht){if(ke.matchSettings(ht,jt))return Fe(ut,Ht),dt=Ht,!0})}we=!1}B[ut].lastEnabledIndex=dt,fe.trigger(_.Z.TEXT_TRACKS_ADDED,{enabled:be(),index:dt,tracks:Xe,streamId:ut}),ie=!0,ge.addFontsFromTracks(Xe,ut),ge.getFonts().forEach(function(jt){if(jt.isEssential){var Ht=ee[jt.streamId].getTrackIdxForId(jt.trackId);ee[jt.streamId].setModeForTrackIdx(Ht,y.Z.TEXT_DISABLED)}}),ge.downloadFonts()}function Q(Me){try{var Xe=Me.streamId;if(!ee[Xe]||isNaN(Me.time))return;ee[Xe].manualCueProcessing(Me.time)}catch(dt){}}function Pe(Me){try{var Xe=Me.streamId;if(!ee[Xe])return;ee[Xe].disableManualTracks()}catch(dt){}}function be(){var Me=!0;return we&&!Ee&&(Me=!1),Me}function Fe(Me,Xe){(we=Xe===-1)&&ke&&ke.saveTextSettingsDisabled();var dt=Ne(Me);if(dt!==Xe&&ee[Me]){ee[Me].disableManualTracks();var ut=ee[Me].getCurrentTrackInfo(),et=ut?Ge.getTextTrack(ut.kind,ut.id,ut.lang,ut.isTTML,ut.isEmbedded):null;et&&et.mode!==y.Z.TEXT_DISABLED&&ee[Me].setModeForTrackIdx(dt,y.Z.TEXT_HIDDEN),ee[Me].setCurrentTrackIdx(Xe),ut=ee[Me].getCurrentTrackInfo();var ht=Z.get().streaming.text.dispatchForManualRendering;ut&&!ht&&ut.mode!==y.Z.TEXT_DISABLED&&ee[Me].setModeForTrackIdx(Xe,y.Z.TEXT_SHOWING),ut&&ut.isFragmented&&!ut.isEmbedded?function(jt,Ht,kt){if(V[jt])for(var Ut=V[jt].getConfig().fragmentedTracks,An=0;An<Ut.length;An++){var ot=Ut[An];if(Ht.lang===ot.lang&&(ot.id?Ht.id===ot.id:Ht.index===ot.index)){var yt=ke.getCurrentTrackFor(y.Z.TEXT,jt);(ot.id?yt.id!==ot.id:yt.index!==ot.index)?(ee[jt].deleteCuesFromTrackIdx(kt),V[jt].setCurrentFragmentedTrackIdx(An)):kt===-1&&fe.trigger(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:jt,mediaType:y.Z.TEXT})}}}(Me,ut,dt):ut&&!ut.isFragmented&&function(jt,Ht){fe.trigger(T.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Ht},{streamId:jt,mediaType:y.Z.TEXT})}(Me,ut),ke.setTrack(ut)}}function Ne(Me){return ee[Me].getCurrentTrackIdx()}function pe(){V={},ee={},B={},we=!0,ie=!1,me=!1}return P={deactivateStream:function(Me){if(Me){var Xe=Me.id;V[Xe]&&V[Xe].resetMediaInfos(),ee[Xe]&&ee[Xe].deleteAllTextTracks()}},initialize:function(){ge=BE(Oe).create({adapter:Ze,baseURLController:Ae}),fe.on(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,se,P),fe.on(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,P),fe.on(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),Z.get().streaming.text.webvtt.customRenderingEnabled&&(fe.on(T.Z.PLAYBACK_TIME_UPDATED,Q,P),fe.on(T.Z.PLAYBACK_SEEKING,Pe,P))},initializeForStream:function(Me){var Xe=Me.id,dt=km(Oe).create({videoModel:Ge,settings:Z,streamInfo:Me});dt.initialize(),ee[Xe]=dt;var ut=ep(Oe).create({errHandler:$e,adapter:Ze,dvbFonts:ge,manifestModel:_e,mediaController:ke,videoModel:Ge,textTracks:dt,vttParser:J,vttCustomRenderingParser:H,ttmlParser:ne,streamInfo:Me,settings:Z});ut.initialize(),V[Xe]=ut,B[Xe]={},B[Xe].lastEnabledIndex=-1},createTracks:function(Me){var Xe=Me.id;ee[Xe]&&ee[Xe].createTracks()},getTextSourceBuffer:function(Me){var Xe=Me.id;if(V&&V[Xe])return V[Xe]},getAllTracksAreDisabled:function(){return we},addEmbeddedTrack:function(Me,Xe){var dt=Me.id;V[dt]&&V[dt].addEmbeddedTrack(Xe)},enableText:function(Me,Xe){return(0,ye.PS)(Xe,"boolean"),be()!==Xe&&(Xe&&Fe(Me,B[Me].lastEnabledIndex),Xe||(B[Me].lastEnabledIndex=Ne(Me),ie?Fe(Me,-1):me=!0)),!0},isTextEnabled:be,setTextTrack:Fe,getCurrentTrackIdx:Ne,enableForcedTextStreaming:function(Me){return(0,ye.PS)(Me,"boolean"),Ee=Me,!0},addMediaInfosToBuffer:function(Me,Xe,dt){var ut=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,et=Me.id;V[et]&&V[et].addMediaInfos(Xe,dt,ut)},reset:function(){ge.reset(),pe(),fe.off(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,se,P),fe.off(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,P),fe.off(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),Z.get().streaming.text.webvtt.customRenderingEnabled&&(fe.off(T.Z.PLAYBACK_TIME_UPDATED,Q,P),fe.off(T.Z.PLAYBACK_SEEKING,Pe,P)),Object.keys(V).forEach(function(Me){V[Me].resetEmbedded(),V[Me].reset()})}},Ee=!1,ie=!1,me=!1,J=Um(Oe).getInstance(),H=FE(Oe).getInstance(),ne=UE(Oe).getInstance(),fe=(0,m.Z)(Oe).getInstance(),He=(0,x.Z)(Oe).getInstance().getLogger(P),pe(),P}Zm.__dashjs_factory_name="TextController";var jE=U.Z.getClassFactory(Zm);function Uc(){var L,P,B,V,ee,J,H,ne,fe,we,Ee,ie,me,ge,He,Oe,Ze,$e,_e,ke,Ae,Ge,Z,le,ae,se,Q,Pe,be,Fe,Ne,pe,Me,Xe,dt,ut,et,ht,jt,Ht="You must first call initialize() and set a source before calling this method",kt="You must first call initialize() and set a valid source and view before calling this method",Ut="You must first call attachView() to set the video element before calling this method",An="You must first call attachSource() with a valid source before calling this method",ot="MediaPlayer not initialized!",yt=this.context,$t=(0,m.Z)(yt).getInstance(),xt=(0,je.Z)(yt).getInstance(),en=(0,x.Z)(yt).getInstance({settings:xt});function Jt(){Gn(null),xn(null),V=null,ge&&(ge.reset(),ge=null),He&&(He.reset(),He=null),ke&&ke.reset(),xt.reset(),Ze&&(Ze.reset(),Ze=null)}function Wt(){return!!B&&!!ut.getElement()}function Dn(){return(0,Nm.e)()}function Nn(){if(!H)throw kt;return Pe.isPaused()}function rr(){if(!H)throw kt;return Pe.getIsDynamic()}function ir(ze){var Ve=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=pe.getCurrentDVRInfo(Ve);if(!Dt)return 0;var fn=Pe.getOriginalLiveDelay(),Tn=Dt.range.start+ze;return Tn>Dt.range.end-fn&&(Tn=Dt.range.end-fn),Tn}function It(ze){if(!H)throw kt;var Ve=Pn().currentTime;if(ze!==void 0)Ve=ae.getTimeRelativeToStreamId(Ve,ze);else if(Pe.getIsDynamic()){var Dt=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,fn=pe.getCurrentDVRInfo(Dt);Ve=fn===null||Ve===0?0:Math.max(0,Ve-fn.range.start)}return Ve}function Xt(){if(!H)throw kt;var ze=Pn().duration;if(Pe.getIsDynamic()){var Ve=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=pe.getCurrentDVRInfo(Ve);ze=Dt?Dt.range.end-Dt.range.start:0}return ze}function Gt(ze){(0,ye.PS)(ze,"boolean"),ne=ze}function un(){ke.restoreDefaultUTCTimingSources()}function vn(){return pe}function Pn(){if(!ut.getElement())throw Ut;return ut.getElement()}function xn(ze){if(!ee)throw ot;ut.setElement(ze),ze&&(On(),function(){if(!He){var Ve=dashjs.MetricsReporting;if(typeof Ve=="function"){var Dt=Ve(yt).create();He=Dt.createMetricsReporting({debug:en,eventBus:$t,mediaElement:Pn(),adapter:$e,dashMetrics:pe,mediaPlayerModel:_e,events:T.Z,constants:y.Z,metricsConstants:D.Z})}}}(),function(){if(!Oe){var Ve=dashjs.MssHandler;typeof Ve=="function"&&(Te.extend(Ve.errors),Oe=Ve(yt).create({eventBus:$t,mediaPlayerModel:_e,dashMetrics:pe,manifestModel:Me,playbackController:Pe,streamController:ae,protectionController:ge,baseURLController:Ge,errHandler:Ae,events:T.Z,constants:y.Z,debug:en,initSegmentType:nt.w.INIT_SEGMENT_TYPE,BASE64:Wf,ISOBoxer:la,settings:xt}))}}(),ae&&ae.switchToVideoElement(fe)),H&&Sn(),Kt(fe)}function Fn(ze){if(!J)throw Ht;var Ve=ae.getActiveStreamInfo();return Ve?me.getTracksFor(ze,Ve.id):[]}function Gn(ze){var Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!ee)throw ot;typeof ze=="string"&&et.initialize(ze),Ve==null&&(Ve=NaN),isNaN(Ve)||(Ve=Math.max(0,Ve)),fe=Ve,B=ze,(J||H)&&Sn(),Wt()&&Kt(fe)}function bt(){if(!J)throw Ht;var ze=ae.getActiveStreamInfo();return ze?ae.getStreamById(ze.id):null}function Sn(){H=!1,J=!1,$e.reset(),ae.reset(),Q.reset(),Ne.reset(),Pe.reset(),be.reset(),Fe.reset(),we.reset(),me.reset(),jt.reset(),ge&&(xt.get().streaming.protection.keepProtectionMediaKeys?ge.stop():(ge.reset(),ge=null,On())),se.reset(),Xe.reset(),dt.reset()}function En(){var ze=Lt();ae||(ae=qo(yt).getInstance()),se||(se=jE(yt).create({errHandler:Ae,manifestModel:Me,adapter:$e,mediaController:me,baseURLController:Ge,videoModel:ut,settings:xt})),le.setConfig({capabilities:Z,customParametersModel:ke,adapter:$e,settings:xt,manifestModel:Me,errHandler:Ae}),ae.setConfig({capabilities:Z,capabilitiesFilter:le,manifestLoader:ze,manifestModel:Me,mediaPlayerModel:_e,customParametersModel:ke,protectionController:ge,textController:se,adapter:$e,dashMetrics:pe,errHandler:Ae,timelineConverter:ie,videoModel:ut,playbackController:Pe,serviceDescriptionController:be,contentSteeringController:Fe,abrController:we,mediaController:me,settings:xt,baseURLController:Ge,uriFragmentModel:et,segmentBaseController:jt}),Q.setConfig({settings:xt,playbackController:Pe,streamController:ae,videoModel:ut,timelineConverter:ie,adapter:$e}),Pe.setConfig({streamController:ae,serviceDescriptionController:be,dashMetrics:pe,adapter:$e,videoModel:ut,timelineConverter:ie,settings:xt}),Ne.setConfig({streamController:ae,playbackController:Pe,mediaPlayerModel:_e,videoModel:ut,settings:xt}),we.setConfig({streamController:ae,domStorage:ht,mediaPlayerModel:_e,customParametersModel:ke,cmsdModel:dt,dashMetrics:pe,adapter:$e,videoModel:ut,settings:xt}),Xe.setConfig({abrController:we,dashMetrics:pe,playbackController:Pe}),dt.setConfig({}),we.initialize(),ae.initialize(ne,V),se.initialize(),Q.initialize(),Ne.initialize(),Xe.initialize(),dt.initialize(),Fe.initialize(),jt.initialize()}function Lt(){return Tm(yt).create({debug:en,errHandler:Ae,dashMetrics:pe,mediaPlayerModel:_e,requestModifier:(0,Ke.Z)(yt).getInstance(),mssHandler:Oe,settings:xt})}function On(){if(ge)return ge;var ze=dashjs.Protection;if(typeof ze=="function"){var Ve=ze(yt).create();return T.Z.extend(ze.events),_.Z.extend(ze.events,{publicOnly:!0}),Te.extend(ze.errors),Z||(Z=(0,Sm.Z)(yt).getInstance()),ge=Ve.createProtectionSystem({debug:en,errHandler:Ae,videoModel:ut,customParametersModel:ke,capabilities:Z,eventBus:$t,events:T.Z,BASE64:Wf,constants:y.Z,cmcdModel:Xe,settings:xt})}return null}function lt(){if(!ee)throw ot;if(Ze)return Ze;var ze=dashjs.OfflineController;if(typeof ze=="function"){T.Z.extend(ze.events),_.Z.extend(ze.events,{publicOnly:!0}),Te.extend(ze.errors);var Ve=Lt(),Dt=Vr(yt).create();return Dt.setConfig({manifestModel:Me,adapter:$e,manifestLoader:Ve,errHandler:Ae,contentSteeringController:Fe}),Ze=ze(yt).create({debug:en,manifestUpdater:Dt,baseURLController:Ge,manifestLoader:Ve,manifestModel:Me,mediaPlayerModel:_e,abrController:we,playbackController:Pe,adapter:$e,errHandler:Ae,dashMetrics:pe,timelineConverter:ie,segmentBaseController:jt,schemeLoaderFactory:Ee,eventBus:$t,events:T.Z,errors:Te,constants:y.Z,settings:xt,dashConstants:v.Z,urlUtils:(0,wt.Z)(yt).getInstance()})}return null}function rt(ze){var Ve=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=pe.getCurrentDVRInfo(Ve);return Dt?ze+(Dt.manifestInfo.availableFrom.getTime()/1e3+Dt.range.start):0}function Kt(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Ze&&Ze.resetRecords(),!J&&B&&(J=!0,P.info("Streaming Initialized"),En(),typeof B=="string"?ae.load(B,ze):ae.loadWithManifest(B,ze)),!H&&Wt()&&(H=!0,P.info("Playback Initialized"))}return L={initialize:function(ze,Ve,Dt){var fn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;Z||(Z=(0,Sm.Z)(yt).getInstance()).setConfig({settings:xt}),Ae||(Ae=Pl(yt).getInstance()),Z.supportsMediaSource()?(ee||(ee=!0,ie=vu(yt).getInstance(),we||(we=Wn(yt).getInstance()).setConfig({settings:xt}),Ee||(Ee=Pi(yt).getInstance()),Pe||(Pe=C(yt).getInstance()),me||(me=Uu(yt).getInstance()),ae||(ae=qo(yt).getInstance()),Q||(Q=Ps(yt).getInstance()),Ne||(Ne=fo(yt).getInstance()),be||(be=Nh(yt).getInstance()),Fe||(Fe=Aa(yt).getInstance()),le||(le=CE(yt).getInstance()),$e=Mm(yt).getInstance(),Me=xE(yt).getInstance(),Xe=ar(yt).getInstance(),dt=_n(yt).getInstance(),pe=Fs(yt).getInstance({settings:xt}),ht=ME(yt).getInstance({settings:xt}),$e.setConfig({constants:y.Z,cea608parser:R(),errHandler:Ae,BASE64:Wf}),Ge||(Ge=TE(yt).create()),Ge.setConfig({adapter:$e,contentSteeringController:Fe}),be.setConfig({adapter:$e}),jt||(jt=DE(yt).getInstance({dashMetrics:pe,mediaPlayerModel:_e,errHandler:Ae,baseURLController:Ge,events:T.Z,eventBus:$t,debug:en,boxParser:(0,oa.Z)(yt).getInstance(),requestModifier:(0,Ke.Z)(yt).getInstance(),errors:Te})),me.setConfig({domStorage:ht,settings:xt,customParametersModel:ke}),_e.setConfig({playbackController:Pe,serviceDescriptionController:be}),Fe.setConfig({adapter:$e,errHandler:Ae,dashMetrics:pe,mediaPlayerModel:_e,manifestModel:Me,serviceDescriptionController:be,eventBus:$t,requestModifier:(0,Ke.Z)(yt).getInstance()}),un(),Gt(Dt===void 0||Dt),lt()),ze&&xn(ze),Ve&&Gn(Ve,fn),P.info("[dash.js "+Dn()+"] MediaPlayer has been initialized")):Ae.error(new ce.Z(Te.CAPABILITY_MEDIASOURCE_ERROR_CODE,Te.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(ze){ze&&(ze.capabilities&&(Z=ze.capabilities),ze.capabilitiesFilter&&(le=ze.capabilitiesFilter),ze.streamController&&(ae=ze.streamController),ze.textController&&(se=ze.textController),ze.gapController&&(Q=ze.gapController),ze.playbackController&&(Pe=ze.playbackController),ze.serviceDescriptionController&&(be=ze.serviceDescriptionController),ze.contentSteeringController&&(Fe=ze.contentSteeringController),ze.catchupController&&(Ne=ze.catchupController),ze.mediaPlayerModel&&(_e=ze.mediaPlayerModel),ze.customParametersModel&&(ke=ze.customParametersModel),ze.abrController&&(we=ze.abrController),ze.schemeLoaderFactory&&(Ee=ze.schemeLoaderFactory),ze.mediaController&&(me=ze.mediaController),ze.settings&&(xt=ze.settings))},on:function(ze,Ve,Dt,fn){$t.on(ze,Ve,Dt,fn)},off:function(ze,Ve,Dt){$t.off(ze,Ve,Dt)},extend:function(ze,Ve,Dt){U.Z.extend(ze,Ve,Dt,yt)},attachView:xn,attachSource:Gn,refreshManifest:function(ze){if(!ee)throw ot;if(!Wt())return ze(null,An);var Ve=this;typeof ze=="function"&&$t.on(T.Z.INTERNAL_MANIFEST_LOADED,function Dt(fn){$t.off(T.Z.INTERNAL_MANIFEST_LOADED,Dt,Ve),fn.error?ze(null,fn.error):ze(fn.manifest)},Ve),ae.refreshManifest()},isReady:Wt,preload:function(){if(!ut.getElement()&&!J){if(!B)throw An;Kt(fe)}},play:function(){if(!H)throw kt;(!ne||Nn()&&H)&&Pe.play(!0)},isPaused:Nn,pause:function(){if(!H)throw kt;Pe.pause()},isSeeking:function(){if(!H)throw kt;return Pe.isSeeking()},isDynamic:rr,getLowLatencyModeEnabled:function(){if(!H)throw kt;return Pe.getLowLatencyModeEnabled()},seek:function(ze){if(!H)throw kt;if((0,ye.PS)(ze,"number"),isNaN(ze))throw y.Z.BAD_ARGUMENT_ERROR;ze<0&&(ze=0);var Ve=Pe.getIsDynamic()?ir(ze):ze,Dt=Pn();!Pe.getIsDynamic()&&Dt.duration&&(Ve=Math.min(Dt.duration,Ve)),Pe.seek(Ve,!1,!1,!0)},seekToOriginalLive:function(){H&&rr()&&Pe.seekToOriginalLive()},setPlaybackRate:function(ze){Pn().playbackRate=ze},getPlaybackRate:function(){return Pn().playbackRate},setMute:function(ze){(0,ye.PS)(ze,"boolean"),Pn().muted=ze},isMuted:function(){return Pn().muted},setVolume:function(ze){if(typeof ze!="number"||isNaN(ze)||ze<0||ze>1)throw y.Z.BAD_ARGUMENT_ERROR;Pn().volume=ze},getVolume:function(){return Pn().volume},time:It,duration:Xt,timeAsUTC:function(){if(!H)throw kt;return It()<0?NaN:rt(It())},durationAsUTC:function(){if(!H)throw kt;return rt(Xt())},getActiveStream:bt,getDVRWindowSize:function(){var ze=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Ve=pe.getCurrentDVRInfo(ze);return Ve?Ve.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:ir,getAvailableBaseUrls:function(){var ze=Me.getValue();return ze?Ge.getBaseUrls(ze):[]},getAvailableLocations:function(){var ze=Me.getValue();if(!ze)return[];var Ve=$e.getLocation(ze),Dt=Fe.getSynthesizedLocationElements(Ve);return Ve.concat(Dt)},getTargetLiveDelay:function(){if(!H)throw kt;return Pe.getOriginalLiveDelay()},convertToTimeCode:function(ze){ze=Math.max(ze,0);var Ve=Math.floor(ze/3600),Dt=Math.floor(ze%3600/60),fn=Math.floor(ze%3600%60);return(Ve===0?"":Ve<10?"0"+Ve.toString()+":":Ve.toString()+":")+(Dt<10?"0"+Dt.toString():Dt.toString())+":"+(fn<10?"0"+fn.toString():fn.toString())},formatUTC:function(ze,Ve,Dt){var fn=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Tn=new Date(1e3*ze),sr=Tn.toLocaleDateString(Ve),Zr=Tn.toLocaleTimeString(Ve,{hour12:Dt});return fn?Zr+" "+sr:Zr},getVersion:Dn,getDebug:function(){return en},getBufferLength:function(ze){var Ve=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT];if(ze)return Ve.indexOf(ze)!==-1?vn().getCurrentBufferLevel(ze)||NaN:(P.warn("getBufferLength requested for invalid type"),NaN);var Dt=Ve.map(function(fn){return Fn(fn).length>0?vn().getCurrentBufferLevel(fn):Number.MAX_VALUE}).reduce(function(fn,Tn){return Math.min(fn,Tn)});return Dt===Number.MAX_VALUE?NaN:Dt},getTTMLRenderingDiv:function(){return ut?ut.getTTMLRenderingDiv():null},getVideoElement:Pn,getSource:function(){if(!B)throw An;return B},updateSource:function(ze){B=ze,ae.load(B)},getCurrentLiveLatency:function(){if(!ee)throw ot;return H?Pe.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(ze){if(!J)throw Ht;return we.getTopBitrateInfoFor(ze)},setAutoPlay:Gt,getAutoPlay:function(){return ne},getDashMetrics:vn,getQualityFor:function(ze){if(!J)throw Ht;if(ze===y.Z.IMAGE){var Ve=bt();if(!Ve)return-1;var Dt=Ve.getThumbnailController();return Dt?Dt.getCurrentTrackIndex():-1}return we.getQualityFor(ze)},setQualityFor:function(ze,Ve){var Dt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!J)throw Ht;if(ze===y.Z.IMAGE){var fn=bt();if(!fn)return;var Tn=fn.getThumbnailController();Tn&&Tn.setTrackByIndex(Ve)}we.setPlaybackQuality(ze,ae.getActiveStreamInfo(),Ve,{forceReplace:Dt})},updatePortalSize:function(){we.setElementSize(),we.setWindowResizeEventCalled(!0)},enableText:function(ze){var Ve=ae.getActiveStreamInfo();return!(!Ve||!se)&&se.enableText(Ve.id,ze)},enableForcedTextStreaming:function(ze){return!(!ae.getActiveStreamInfo()||!se)&&se.enableForcedTextStreaming(ze)},isTextEnabled:function(){var ze=ae.getActiveStreamInfo();return!(!ze||!se)&&se.isTextEnabled(ze)},setTextTrack:function(ze){if(!H)throw kt;var Ve=ae.getActiveStreamInfo();Ve&&se&&se.setTextTrack(Ve.id,ze)},getBitrateInfoListFor:function(ze){if(!J)throw Ht;var Ve=bt();return Ve?Ve.getBitrateListFor(ze):[]},getStreamsFromManifest:function(ze){if(!J)throw Ht;return $e.getStreamsInfo(ze)},getTracksFor:Fn,getTracksForTypeFromManifest:function(ze,Ve,Dt){if(!J)throw Ht;return(Dt=Dt||$e.getStreamsInfo(Ve,1)[0])?$e.getAllMediaInfoForType(Dt,ze,Ve):[]},getCurrentTrackFor:function(ze){if(!J)throw Ht;var Ve=ae.getActiveStreamInfo();return me.getCurrentTrackFor(ze,Ve.id)},setInitialMediaSettingsFor:function(ze,Ve){if(!ee)throw ot;me.setInitialSettings(ze,Ve)},getInitialMediaSettingsFor:function(ze){if(!ee)throw ot;return me.getInitialSettings(ze)},setCurrentTrack:function(ze){var Ve=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!J)throw Ht;me.setTrack(ze,Ve)},addABRCustomRule:function(ze,Ve,Dt){ke.addAbrCustomRule(ze,Ve,Dt)},removeABRCustomRule:function(ze){ke.removeAbrCustomRule(ze)},removeAllABRCustomRule:function(){ke.removeAllAbrCustomRule()},getABRCustomRules:function(){return ke.getAbrCustomRules()},getAverageThroughput:function(ze){var Ve=we.getThroughputHistory(),Dt=Pe.getIsDynamic();return Ve?Ve.getAverageThroughput(ze,Dt):0},retrieveManifest:function(ze,Ve){var Dt=Lt(),fn=this;$t.on(T.Z.INTERNAL_MANIFEST_LOADED,function Tn(sr){sr.error?Ve(null,sr.error):Ve(sr.manifest),$t.off(T.Z.INTERNAL_MANIFEST_LOADED,Tn,fn),Dt.reset()},fn),et.initialize(ze),Dt.load(ze)},addUTCTimingSource:function(ze,Ve){ke.addUTCTimingSource(ze,Ve)},removeUTCTimingSource:function(ze,Ve){ke.removeUTCTimingSource(ze,Ve)},clearDefaultUTCTimingSources:function(){ke.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:un,setXHRWithCredentialsForType:function(ze,Ve){ke.setXHRWithCredentialsForType(ze,Ve)},getXHRWithCredentialsForType:function(ze){return ke.getXHRWithCredentialsForType(ze)},getProtectionController:function(){return On()},attachProtectionController:function(ze){ge=ze},setProtectionData:function(ze){V=ze,ae&&ae.setProtectionData(V)},registerLicenseRequestFilter:function(ze){ke.registerLicenseRequestFilter(ze)},registerLicenseResponseFilter:function(ze){ke.registerLicenseResponseFilter(ze)},unregisterLicenseRequestFilter:function(ze){ke.unregisterLicenseRequestFilter(ze)},unregisterLicenseResponseFilter:function(ze){ke.unregisterLicenseResponseFilter(ze)},registerCustomCapabilitiesFilter:function(ze){ke.registerCustomCapabilitiesFilter(ze)},unregisterCustomCapabilitiesFilter:function(ze){ke.unregisterCustomCapabilitiesFilter(ze)},setCustomInitialTrackSelectionFunction:function(ze){ke.setCustomInitialTrackSelectionFunction(ze)},resetCustomInitialTrackSelectionFunction:function(){ke.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(ze){if(!ut.getElement())throw Ut;ut.setTTMLRenderingDiv(ze)},attachVttRenderingDiv:function(ze){if(!ut.getElement())throw Ut;ut.setVttRenderingDiv(ze)},getCurrentTextTrackIndex:function(){var ze=ae.getActiveStreamInfo();if(ze&&se)return se.getCurrentTrackIdx(ze.id)},provideThumbnail:function(ze,Ve){if(typeof Ve=="function")if(ze<0)Ve(null);else{var Dt=Pe.getIsDynamic()?ir(ze):ze,fn=ae.getStreamForTime(Dt);if(fn!==null){var Tn=fn.getThumbnailController();if(Tn)return Tn.provide(Dt,Ve);Ve(null)}else Ve(null)}},getDashAdapter:function(){return $e},getOfflineController:function(){return lt()},triggerSteeringRequest:function(){if(Fe)return Fe.loadSteeringData()},getCurrentSteeringResponseData:function(){if(Fe)return Fe.getCurrentSteeringResponseData()},getSettings:function(){return xt.get()},updateSettings:function(ze){xt.update(ze)},resetSettings:function(){xt.reset()},reset:Jt,destroy:function(){Jt(),U.Z.deleteSingletonInstances(yt)}},P=en.getLogger(L),ee=!1,H=!1,J=!1,ne=!0,fe=NaN,ge=null,Ze=null,V=null,$e=null,jt=null,T.Z.extend(_.Z),_e=Ol(yt).getInstance(),ke=(0,ti.Z)(yt).getInstance(),ut=Sr(yt).getInstance(),et=NE(yt).getInstance(),L}Uc.__dashjs_factory_name="MediaPlayer";var Bc=U.Z.getClassFactory(Uc);Bc.events=_.Z,Bc.errors=Te,U.Z.updateClassFactory(Uc.__dashjs_factory_name,Bc);var Gm=Bc},8825:function(b,g,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function R(m,T){return R=Object.setPrototypeOf||function(U,x){return U.__proto__=x,U},R(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),C&&R(I,C)})(_,m);var T,U,x=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,C=v(T);if(U){var j=v(this).constructor;I=Reflect.construct(C,arguments,j)}else I=C.apply(this,arguments);return y(this,I)});function _(){var I;return function(C,j){if(!(C instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=x.call(this)).AST_IN_FUTURE="astInFuture",I.BASE_URLS_UPDATED="baseUrlsUpdated",I.BUFFER_EMPTY="bufferStalled",I.BUFFER_LOADED="bufferLoaded",I.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",I.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",I.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",I.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",I.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",I.DYNAMIC_TO_STATIC="dynamicToStatic",I.ERROR="error",I.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",I.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",I.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",I.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",I.LOG="log",I.MANIFEST_LOADING_STARTED="manifestLoadingStarted",I.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",I.MANIFEST_LOADED="manifestLoaded",I.METRICS_CHANGED="metricsChanged",I.METRIC_CHANGED="metricChanged",I.METRIC_ADDED="metricAdded",I.METRIC_UPDATED="metricUpdated",I.PERIOD_SWITCH_STARTED="periodSwitchStarted",I.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",I.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",I.QUALITY_CHANGE_RENDERED="qualityChangeRendered",I.TRACK_CHANGE_RENDERED="trackChangeRendered",I.STREAM_INITIALIZING="streamInitializing",I.STREAM_UPDATED="streamUpdated",I.STREAM_ACTIVATED="streamActivated",I.STREAM_DEACTIVATED="streamDeactivated",I.STREAM_INITIALIZED="streamInitialized",I.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",I.TEXT_TRACKS_ADDED="allTextTracksAdded",I.TEXT_TRACK_ADDED="textTrackAdded",I.CUE_ENTER="cueEnter",I.CUE_EXIT="cueExit",I.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",I.TTML_PARSED="ttmlParsed",I.TTML_TO_PARSE="ttmlToParse",I.CAPTION_RENDERED="captionRendered",I.CAPTION_CONTAINER_RESIZE="captionContainerResize",I.CAN_PLAY="canPlay",I.CAN_PLAY_THROUGH="canPlayThrough",I.PLAYBACK_ENDED="playbackEnded",I.PLAYBACK_ERROR="playbackError",I.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",I.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",I.PLAYBACK_LOADED_DATA="playbackLoadedData",I.PLAYBACK_PAUSED="playbackPaused",I.PLAYBACK_PLAYING="playbackPlaying",I.PLAYBACK_PROGRESS="playbackProgress",I.PLAYBACK_RATE_CHANGED="playbackRateChanged",I.PLAYBACK_SEEKED="playbackSeeked",I.PLAYBACK_SEEKING="playbackSeeking",I.PLAYBACK_STALLED="playbackStalled",I.PLAYBACK_STARTED="playbackStarted",I.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",I.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",I.PLAYBACK_WAITING="playbackWaiting",I.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",I.EVENT_MODE_ON_START="eventModeOnStart",I.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",I.CONFORMANCE_VIOLATION="conformanceViolation",I.REPRESENTATION_SWITCH="representationSwitch",I.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",I.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",I.INBAND_PRFT="inbandPrft",I.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",I.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",I}return _}(w(8342).Z));g.Z=D},3393:function(b,g){function w(R,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}var F=new(function(){function R(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R),this.init()}var y,v;return y=R,(v=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&w(y.prototype,v),R}());g.Z=F},3860:function(b,g){function w(R,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}var F=new(function(){function R(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R),this.init()}var y,v;return y=R,(v=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&w(y.prototype,v),R}());g.Z=F},8080:function(b,g,w){w.d(g,{default:function(){return q}});var F=function K(){(function(ye,he){if(!(ye instanceof he))throw new TypeError("Cannot call a class as a function")})(this,K),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};F.SSL_CONNECTION_FAILED_PREFIX="SSL",F.DNS_RESOLUTION_FAILED="C00",F.HOST_UNREACHABLE="C01",F.CONNECTION_REFUSED="C02",F.CONNECTION_ERROR="C03",F.CORRUPT_MEDIA_ISOBMFF="M00",F.CORRUPT_MEDIA_OTHER="M01",F.BASE_URL_CHANGED="F00",F.BECAME_REPORTER="S00";var R=F,y=w(1180);function v(K){var ye,he,Ke=(K=K||{}).eventBus,wt=K.dashMetrics,st=K.metricsConstants,at=K.events;function tt(Qt){var nn=new R;if(he){for(var Ot in Qt)Qt.hasOwnProperty(Ot)&&(nn[Ot]=Qt[Ot]);nn.mpdurl||(nn.mpdurl=he.originalUrl||he.url),nn.terror||(nn.terror=new Date),wt.addDVBErrors(nn)}}function ft(Qt){Qt.error||(he=Qt.manifest)}function Et(Qt){tt({errorcode:R.BASE_URL_CHANGED,servicelocation:Qt.entry})}function Tt(){tt({errorcode:R.BECAME_REPORTER})}function Ct(Qt){var nn;Qt.metric===st.HTTP_REQUEST&&((nn=Qt.value).responsecode===0||nn.responsecode==null||nn.responsecode>=400||nn.responsecode<100||nn.responsecode>=600)&&tt({errorcode:nn.responsecode||R.CONNECTION_ERROR,url:nn.url,terror:nn.tresponse,servicelocation:nn._serviceLocation})}function hn(Qt){var nn;switch(Qt.error?Qt.error.code:0){case MediaError.MEDIA_ERR_NETWORK:nn=R.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:nn=R.CORRUPT_MEDIA_OTHER;break;default:return}tt({errorcode:nn})}return ye={initialize:function(){Ke.on(at.MANIFEST_UPDATED,ft,ye),Ke.on(at.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Et,ye),Ke.on(at.METRIC_ADDED,Ct,ye),Ke.on(at.METRIC_UPDATED,Ct,ye),Ke.on(at.PLAYBACK_ERROR,hn,ye),Ke.on(y.Z.BECAME_REPORTING_PLAYER,Tt,ye)},reset:function(){Ke.off(at.MANIFEST_UPDATED,ft,ye),Ke.off(at.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Et,ye),Ke.off(at.METRIC_ADDED,Ct,ye),Ke.off(at.METRIC_UPDATED,Ct,ye),Ke.off(at.PLAYBACK_ERROR,hn,ye),Ke.off(y.Z.BECAME_REPORTING_PLAYER,Tt,ye)}}}v.__dashjs_factory_name="DVBErrorsTranslator";var D=dashjs.FactoryMaker.getSingletonFactory(v),m=w(2295);function T(K){K=K||{};var ye,he,Ke=!1,wt=this.context,st=K.mediaElement;return ye={initialize:function(at){at&&at.length&&(at.forEach(function(tt){var ft=tt.starttime,Et=ft+tt.duration;he.add(ft,Et)}),Ke=!!at[0]._useWallClockTime)},reset:function(){he.clear()},isEnabled:function(){var at,tt=he.length;if(!tt)return!0;at=Ke?new Date().getTime()/1e3:st.currentTime;for(var ft=0;ft<tt;ft+=1){var Et=he.start(ft),Tt=he.end(ft);if(Et<=at&&at<Tt)return!0}return!1}},he=(0,m.Z)(wt).create(),ye}T.__dashjs_factory_name="RangeController";var U=dashjs.FactoryMaker.getClassFactory(T);function x(){return{serialise:function K(ye){var he,Ke,wt=[],st=[];for(he in ye)if(ye.hasOwnProperty(he)&&he.indexOf("_")!==0){if((Ke=ye[he])==null&&(Ke=""),Array.isArray(Ke)){if(!Ke.length)continue;st=[],Ke.forEach(function(at){var tt=Object.prototype.toString.call(at).slice(8,-1)!=="Object";st.push(tt?at:K(at))}),Ke=st.map(encodeURIComponent).join(",")}else typeof Ke=="string"?Ke=encodeURIComponent(Ke):Ke instanceof Date?Ke=Ke.toISOString():typeof Ke=="number"&&(Ke=Math.round(Ke));wt.push(he+"="+Ke)}return wt.join("&")}}}x.__dashjs_factory_name="MetricSerialiser";var _=dashjs.FactoryMaker.getSingletonFactory(x);function I(){var K,ye,he,Ke=window.crypto||window.msCrypto,wt=Uint32Array,st=Math.pow(2,8*wt.BYTES_PER_ELEMENT)-1;function at(){Ke&&(K||(K=new wt(10)),Ke.getRandomValues(K),ye=0)}return he={random:function(tt,ft){var Et;return tt||(tt=0),ft||(ft=1),Ke?(ye===K.length&&at(),Et=K[ye]/st,ye+=1):Et=Math.random(),Et*(ft-tt)+tt}},at(),he}I.__dashjs_factory_name="RNG";var C=dashjs.FactoryMaker.getSingletonFactory(I),j=w(5717);function z(K){var ye;K=K||{};var he,Ke,wt,st,at,tt,ft,Et=this.context,Tt=[],Ct=K.metricsConstants;function hn(){st=!1,at=!1,tt=null,ft=null}return ye={report:function(Qt,nn){Array.isArray(nn)||(nn=[nn]),at&&ft.isEnabled()&&nn.forEach(function(Ot){var Un=he.serialise(Ot);Qt!==Ct.DVB_ERRORS&&(Un="metricname=".concat(Qt,"&").concat(Un)),function(gr,Or,dr){var ei=new XMLHttpRequest;ei.withCredentials=Ke.getXHRWithCredentialsForType(Ct.HTTP_REQUEST_DVB_REPORTING_TYPE);var Ji=function(){var Lr=Tt.indexOf(ei);Lr!==-1&&(Tt.splice(Lr,1),!(ei.status>=200&&ei.status<300)&&dr&&dr())};Tt.push(ei);try{ei.open("GET",gr),ei.onloadend=Ji,ei.onerror=Ji,ei.send()}catch(Lr){ei.onerror()}}(Un="".concat(tt,"?").concat(Un),0,function(){at=!1})})},initialize:function(Qt,nn){var Ot;if(ft=nn,!(tt=Qt.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");st||((Ot=Qt.dvbProbability)&&(Ot===1e3||Ot/1e3>=wt.random())&&(at=!0),st=!0)},reset:function(){hn()}},he=_(Et).getInstance(),wt=C(Et).getInstance(),Ke=(0,j.Z)(Et).getInstance(),hn(),ye}z.__dashjs_factory_name="DVBReporting";var $=dashjs.FactoryMaker.getClassFactory(z);function W(K){K=K||{};var ye,he={"urn:dvb:dash:reporting:2014":$},Ke=this.context,wt=K.debug?K.debug.getLogger(ye):{},st=K.metricsConstants,at=K.mediaPlayerModel||{};return{create:function(tt,ft){var Et;try{(Et=he[tt.schemeIdUri](Ke).create({metricsConstants:st,mediaPlayerModel:at})).initialize(tt,ft)}catch(Tt){Et=null,wt.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(tt.schemeIdUri," (").concat(Tt.message,")"))}return Et},register:function(tt,ft){he[tt]=ft},unregister:function(tt){delete he[tt]}}}W.__dashjs_factory_name="ReportingFactory";var ue=dashjs.FactoryMaker.getSingletonFactory(W);function N(K){var ye=[],he=ue(this.context).getInstance(K);return{initialize:function(Ke,wt){Ke.some(function(st){var at=he.create(st,wt);if(at)return ye.push(at),!0})},reset:function(){ye.forEach(function(Ke){return Ke.reset()}),ye=[]},report:function(Ke,wt){ye.forEach(function(st){return st.report(Ke,wt)})}}}N.__dashjs_factory_name="ReportingController";var X=dashjs.FactoryMaker.getClassFactory(N);function ce(){return{reconstructFullMetricName:function(K,ye,he){var Ke=K;return ye&&(Ke+="("+ye,he&&he.length&&(Ke+=","+he),Ke+=")"),Ke},validateN:function(K){if(!K)throw new Error("missing n");if(isNaN(K))throw new Error("n is NaN");if(K<0)throw new Error("n must be positive");return K}}}ce.__dashjs_factory_name="HandlerHelpers";var oe=dashjs.FactoryMaker.getSingletonFactory(ce);function de(K){var ye,he,Ke,wt,st;K=K||{};var at=this.context,tt=oe(at).getInstance(),ft=[],Et=K.metricsConstants;function Tt(){var Ct=function(){try{return Object.keys(ft).map(function(hn){return ft[hn]}).reduce(function(hn,Qt){return hn.level<Qt.level?hn:Qt})}catch(hn){return}}();Ct&&st!==Ct.t&&(st=Ct.t,ye.report(Ke,Ct))}return{initialize:function(Ct,hn,Qt){hn&&(he=tt.validateN(Qt),ye=hn,Ke=tt.reconstructFullMetricName(Ct,Qt),wt=setInterval(Tt,he))},reset:function(){clearInterval(wt),wt=null,he=0,ye=null,st=null},handleNewMetric:function(Ct,hn,Qt){Ct===Et.BUFFER_LEVEL&&(ft[Qt]=hn)}}}de.__dashjs_factory_name="BufferLevelHandler";var Ce=dashjs.FactoryMaker.getClassFactory(de),Je=dashjs.FactoryMaker.getClassFactory(function(K){var ye,he=(K=K||{}).eventBus,Ke=K.metricsConstants;function wt(){he.off(y.Z.METRICS_INITIALISATION_COMPLETE,wt,this),he.trigger(y.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(st,at){at&&(ye=at,he.on(y.Z.METRICS_INITIALISATION_COMPLETE,wt,this))},reset:function(){ye=null},handleNewMetric:function(st,at){st===Ke.DVB_ERRORS&&ye&&ye.report(st,at)}}});function Te(K){var ye,he,Ke,wt,st;K=K||{};var at=[],tt=oe(this.context).getInstance(),ft=K.metricsConstants;function Et(){var Tt=at;Tt.length&&ye&&ye.report(wt,Tt),at=[]}return{initialize:function(Tt,Ct,hn,Qt){Ct&&(he=tt.validateN(hn),ye=Ct,Qt&&Qt.length&&(Ke=Qt),wt=tt.reconstructFullMetricName(Tt,hn,Qt),st=setInterval(Et,he))},reset:function(){clearInterval(st),st=null,he=null,Ke=null,at=[],ye=null},handleNewMetric:function(Tt,Ct){Tt===ft.HTTP_REQUEST&&(Ke&&Ke!==Ct.type||at.push(Ct))}}}Te.__dashjs_factory_name="HttpListHandler";var je=dashjs.FactoryMaker.getClassFactory(Te);function nt(){var K,ye;return{initialize:function(he,Ke){K=he,ye=Ke},reset:function(){ye=null,K=void 0},handleNewMetric:function(he,Ke){he===K&&ye&&ye.report(K,Ke)}}}nt.__dashjs_factory_name="GenericMetricHandler";var ct=dashjs.FactoryMaker.getClassFactory(nt);function Ie(K){var ye,he=(K=K||{}).debug?K.debug.getLogger(ye):{},Ke=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,wt=this.context,st={BufferLevel:Ce,DVBErrors:Je,HttpList:je,PlayList:ct,RepSwitchList:ct,TcpList:ct};return{create:function(at,tt){var ft,Et=at.match(Ke);if(Et){try{(ft=st[Et[1]](wt).create({eventBus:K.eventBus,metricsConstants:K.metricsConstants})).initialize(Et[1],tt,Et[3],Et[5])}catch(Tt){ft=null,he.error("MetricsHandlerFactory: Could not create handler for type ".concat(Et[1]," with args ").concat(Et[3],", ").concat(Et[5]," (").concat(Tt.message,")"))}return ft}},register:function(at,tt){st[at]=tt},unregister:function(at){delete st[at]}}}Ie.__dashjs_factory_name="MetricsHandlerFactory";var Ye=dashjs.FactoryMaker.getSingletonFactory(Ie);function mt(K){K=K||{};var ye,he=[],Ke=this.context,wt=K.eventBus,st=K.events,at=Ye(Ke).getInstance({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants});function tt(ft){he.forEach(function(Et){Et.handleNewMetric(ft.metric,ft.value,ft.mediaType)})}return ye={initialize:function(ft,Et){ft.split(",").forEach(function(Tt,Ct,hn){var Qt;if(Tt.indexOf("(")!==-1&&Tt.indexOf(")")===-1){var nn=hn[Ct+1];nn&&nn.indexOf("(")===-1&&nn.indexOf(")")!==-1&&(Tt+=","+nn,delete hn[Ct+1])}(Qt=at.create(Tt,Et))&&he.push(Qt)}),wt.on(st.METRIC_ADDED,tt,ye),wt.on(st.METRIC_UPDATED,tt,ye)},reset:function(){wt.off(st.METRIC_ADDED,tt,ye),wt.off(st.METRIC_UPDATED,tt,ye),he.forEach(function(ft){return ft.reset()}),he=[]}}}mt.__dashjs_factory_name="MetricsHandlersController";var xe=dashjs.FactoryMaker.getClassFactory(mt);function We(K){var ye,he,Ke;K=K||{};var wt=this.context;function st(){ye&&ye.reset(),he&&he.reset(),Ke&&Ke.reset()}return{initialize:function(at){try{(Ke=U(wt).create({mediaElement:K.mediaElement})).initialize(at.Range),(he=X(wt).create({debug:K.debug,metricsConstants:K.metricsConstants,mediaPlayerModel:K.mediaPlayerModel})).initialize(at.Reporting,Ke),(ye=xe(wt).create({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants,events:K.events})).initialize(at.metrics,he)}catch(tt){throw st(),tt}},reset:st}}We.__dashjs_factory_name="MetricsController";var it=dashjs.FactoryMaker.getClassFactory(We),qt=function K(){(function(ye,he){if(!(ye instanceof he))throw new TypeError("Cannot call a class as a function")})(this,K),this.metrics="",this.Range=[],this.Reporting=[]},Ft=function K(){(function(ye,he){if(!(ye instanceof he))throw new TypeError("Cannot call a class as a function")})(this,K),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},gt=function K(){(function(ye,he){if(!(ye instanceof he))throw new TypeError("Cannot call a class as a function")})(this,K),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function St(K){var ye=(K=K||{}).adapter,he=K.constants;return{getMetrics:function(Ke){var wt=[];return Ke&&Ke.Metrics_asArray&&Ke.Metrics_asArray.forEach(function(st){var at=new qt,tt=ye.getIsDynamic(Ke);st.hasOwnProperty("metrics")&&(at.metrics=st.metrics,st.Range_asArray&&st.Range_asArray.forEach(function(ft){var Et=new Ft;Et.starttime=function(Tt,Ct,hn){var Qt,nn,Ot=0;return Ct?Ot=ye.getAvailabilityStartTime(Tt)/1e3:(Qt=ye.getRegularPeriods(Tt)).length&&(Ot=Qt[0].start),nn=Ot,hn&&hn.hasOwnProperty(he.START_TIME)&&(nn+=hn.starttime),nn}(Ke,tt,ft),ft.hasOwnProperty("duration")?Et.duration=ft.duration:Et.duration=ye.getDuration(Ke),Et._useWallClockTime=tt,at.Range.push(Et)}),st.Reporting_asArray&&(st.Reporting_asArray.forEach(function(ft){var Et=new gt;ft.hasOwnProperty(he.SCHEME_ID_URI)&&(Et.schemeIdUri=ft.schemeIdUri,ft.hasOwnProperty("value")&&(Et.value=ft.value),ft.hasOwnProperty(he.DVB_REPORTING_URL)&&(Et.dvbReportingUrl=ft[he.DVB_REPORTING_URL]),ft.hasOwnProperty(he.DVB_PROBABILITY)&&(Et.dvbProbability=ft[he.DVB_PROBABILITY]),at.Reporting.push(Et))}),wt.push(at)))}),wt}}}St.__dashjs_factory_name="ManifestParsing";var Re=dashjs.FactoryMaker.getSingletonFactory(St);function re(K){var ye;K=K||{};var he={},Ke=this.context,wt=K.eventBus,st=K.events;function at(ft){if(!ft.error){var Et=Object.keys(he);Re(Ke).getInstance({adapter:K.adapter,constants:K.constants}).getMetrics(ft.manifest).forEach(function(Tt){var Ct=JSON.stringify(Tt);if(he.hasOwnProperty(Ct))Et.splice(Ct,1);else try{var hn=it(Ke).create(K);hn.initialize(Tt),he[Ct]=hn}catch(Qt){}}),Et.forEach(function(Tt){he[Tt].reset(),delete he[Tt]}),wt.trigger(y.Z.METRICS_INITIALISATION_COMPLETE)}}function tt(){Object.keys(he).forEach(function(ft){he[ft].reset()}),he={}}return ye={reset:function(){wt.off(st.MANIFEST_UPDATED,at,ye),wt.off(st.STREAM_TEARDOWN_COMPLETE,tt,ye)}},wt.on(st.MANIFEST_UPDATED,at,ye),wt.on(st.STREAM_TEARDOWN_COMPLETE,tt,ye),ye}re.__dashjs_factory_name="MetricsCollectionController";var Be=dashjs.FactoryMaker.getClassFactory(re);function O(){var K=this.context;return{createMetricsReporting:function(ye){return D(K).getInstance({eventBus:ye.eventBus,dashMetrics:ye.dashMetrics,metricsConstants:ye.metricsConstants,events:ye.events}).initialize(),Be(K).create(ye)},getReportingFactory:function(){return ue(K).getInstance()},getMetricsHandlerFactory:function(){return Ye(K).getInstance()}}}O.__dashjs_factory_name="MetricsReporting";var M=dashjs.FactoryMaker.getClassFactory(O);M.events=y.Z,dashjs.FactoryMaker.updateClassFactory(O.__dashjs_factory_name,M);var q=M},1180:function(b,g,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function R(m,T){return R=Object.setPrototypeOf||function(U,x){return U.__proto__=x,U},R(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),C&&R(I,C)})(_,m);var T,U,x=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,C=v(T);if(U){var j=v(this).constructor;I=Reflect.construct(C,arguments,j)}else I=C.apply(this,arguments);return y(this,I)});function _(){var I;return function(C,j){if(!(C instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=x.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",I.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",I.CMCD_DATA_GENERATED="cmcdDataGenerated",I}return _}(w(8342).Z));g.Z=D},5717:function(b,g,w){var F=w(2610),R=w(5448),y=w(1264),v=w(3106),D=w(1767),m=w(3393);function T(){var U,x,_,I,C,j,z,$,W=this.context,ue=(0,y.Z)(W).getInstance();function N(){I=[],C=[],j=[],$=[],z=null,x=[]}function X(Ce,Je){var Te=-1;Ce.some(function(je,nt){if(je===Je)return Te=nt,!0}),Te<0||Ce.splice(Te,1)}function ce(Ce){var Je;for(Je=0;Je<$.length;Je++)if($[Je].rulename===Ce)return Je;return-1}function oe(Ce,Je){de(Ce,Je);var Te=new F.Z;Te.schemeIdUri=Ce,Te.value=Je,x.push(Te)}function de(Ce,Je){(0,v.PS)(Ce,"string"),(0,v.PS)(Je,"string"),x.forEach(function(Te,je){Te.schemeIdUri===Ce&&Te.value===Je&&x.splice(je,1)})}return U={getCustomInitialTrackSelectionFunction:function(){return z},setCustomInitialTrackSelectionFunction:function(Ce){z=Ce},resetCustomInitialTrackSelectionFunction:function(){z=null},getLicenseResponseFilters:function(){return C},getLicenseRequestFilters:function(){return I},getCustomCapabilitiesFilters:function(){return j},registerCustomCapabilitiesFilter:function(Ce){j.push(Ce)},registerLicenseResponseFilter:function(Ce){C.push(Ce)},registerLicenseRequestFilter:function(Ce){I.push(Ce)},unregisterCustomCapabilitiesFilter:function(Ce){X(j,Ce)},unregisterLicenseResponseFilter:function(Ce){X(C,Ce)},unregisterLicenseRequestFilter:function(Ce){X(I,Ce)},addAbrCustomRule:function(Ce,Je,Te){if(typeof Ce!="string"||Ce!==D.Z.ABANDON_FRAGMENT_RULES&&Ce!==D.Z.QUALITY_SWITCH_RULES||typeof Je!="string")throw m.Z.BAD_ARGUMENT_ERROR;var je=ce(Je);je===-1?$.push({type:Ce,rulename:Je,rule:Te}):($[je].type=Ce,$[je].rule=Te)},removeAllAbrCustomRule:function(){$=[]},removeAbrCustomRule:function(Ce){if(Ce){var Je=ce(Ce);Je!==-1&&$.splice(Je,1)}else $=[]},getAbrCustomRules:function(){return $},addUTCTimingSource:oe,removeUTCTimingSource:de,getUTCTimingSources:function(){return x},clearDefaultUTCTimingSources:function(){x=[]},restoreDefaultUTCTimingSources:function(){var Ce=ue.get().streaming.utcSynchronization.defaultTimingSource;oe(Ce.scheme,Ce.value)},setXHRWithCredentialsForType:function Ce(Je,Te){Je?_[Je]=!!Te:Object.keys(_).forEach(function(je){Ce(je,Te)})},getXHRWithCredentialsForType:function(Ce){var Je=_[Ce];return Je===void 0?_.default:Je},setConfig:function(){},reset:function(){N()}},_={default:!1},N(),U}T.__dashjs_factory_name="CustomParametersModel",g.Z=R.Z.getSingletonFactory(T)},9032:function(b,g,w){var F=w(5448),R=w(7473);function y(D){var m=(D=D||{}).requestModifier;function T(U){var x=new Date,_=U.request,I=new XMLHttpRequest;if(I.open(U.method,U.url,!0),_.responseType&&(I.responseType=_.responseType),_.range&&I.setRequestHeader("Range","bytes="+_.range),_.requestStartDate||(_.requestStartDate=x),m&&m.modifyRequestHeader&&(I=m.modifyRequestHeader(I,{url:U.url})),U.headers)for(var C in U.headers){var j=U.headers[C];j&&I.setRequestHeader(C,j)}I.withCredentials=U.withCredentials,I.onload=U.onload,I.onloadend=U.onend,I.onerror=U.onerror,I.onprogress=U.progress,I.onabort=U.onabort,I.ontimeout=U.ontimeout,I.timeout=U.timeout,I.send(),U.response=I}return{load:function(U){m&&m.modifyRequest?(0,R.k)(U,m).then(function(){return T(U)}):T(U)},abort:function(U){var x=U.response;x.onloadend=x.onerror=x.onprogress=void 0,x.abort()}}}y.__dashjs_factory_name="XHRLoader";var v=F.Z.getClassFactory(y);g.Z=v},1737:function(b,g,w){function F(tn,sn){for(var an=0;an<sn.length;an++){var At=sn[an];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),Object.defineProperty(tn,At.key,At)}}w.d(g,{default:function(){return Pu}});var R={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},y=function(){function tn(){(function(At,Yt){if(!(At instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn)}var sn,an;return sn=tn,an=[{key:"findCencContentProtection",value:function(At){for(var Yt=null,Mt=0;Mt<At.length;++Mt){var zt=At[Mt];zt.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||zt.value.toLowerCase()!=="cenc"&&zt.value.toLowerCase()!=="cbcs"||(Yt=zt)}return Yt}},{key:"getPSSHData",value:function(At){var Yt=8,Mt=new DataView(At),zt=Mt.getUint8(Yt);return Yt+=20,zt>0&&(Yt+=4+16*Mt.getUint32(Yt)),Yt+=4,At.slice(Yt)}},{key:"getPSSHForKeySystem",value:function(At,Yt){var Mt=tn.parsePSSHList(Yt);return At&&Mt.hasOwnProperty(At.uuid.toLowerCase())?Mt[At.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(At,Yt){return"pssh"in At?(At.pssh.__text=At.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),Yt.decodeArray(At.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(At){if(At==null)return[];for(var Yt=new DataView(At.buffer||At),Mt={},zt=0;;){var mn,In,Zn=void 0,Cn=zt;if(zt>=Yt.buffer.byteLength)break;if(mn=zt+Yt.getUint32(zt),zt+=4,Yt.getUint32(zt)===1886614376)if(zt+=4,(In=Yt.getUint8(zt))===0||In===1){zt++,zt+=3,Zn="";var Rn=void 0,on=void 0;for(Rn=0;Rn<4;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;for(zt+=4,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;for(zt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;for(zt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;for(zt+=2,Zn+="-",Rn=0;Rn<6;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;zt+=6,zt+=4,Mt[Zn=Zn.toLowerCase()]=Yt.buffer.slice(Cn,mn),zt=mn}else zt=mn;else zt=mn}return Mt}},{key:"getLicenseServerUrlFromMediaInfo",value:function(At,Yt){try{if(!At||At.length===0)return null;for(var Mt=0,zt=null;Mt<At.length&&!zt;){var mn=At[Mt];if(mn&&mn.contentProtection&&mn.contentProtection.length>0){var In=mn.contentProtection.filter(function(er){return er.schemeIdUri&&er.schemeIdUri===Yt});if(In&&In.length>0)for(var Zn=0;Zn<In.length&&!zt;){for(var Cn=In[Zn],Rn=0;Rn<R.attributes.length&&!zt;){for(var on=0,Bn=R.attributes[Rn];on<R.prefixes.length&&!zt;){var kn=R.prefixes[on];Cn[Bn]&&Cn[Bn].__prefix&&Cn[Bn].__prefix===kn&&Cn[Bn].__text&&(zt=Cn[Bn].__text),on+=1}Rn+=1}Zn+=1}}Mt+=1}return zt}catch(er){return null}}}],an&&F(sn,an),tn}(),v=function tn(sn,an){(function(At,Yt){if(!(At instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.contentType=sn,this.robustness=an},D=function tn(sn,an,At,Yt,Mt){(function(zt,mn){if(!(zt instanceof mn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initDataTypes=["cenc"],sn&&sn.length&&(this.audioCapabilities=sn),an&&an.length&&(this.videoCapabilities=an),this.distinctiveIdentifier=At,this.persistentState=Yt,this.sessionTypes=Mt};function m(tn){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},m(tn)}function T(tn,sn){return T=Object.setPrototypeOf||function(an,At){return an.__proto__=At,an},T(tn,sn)}function U(tn,sn){return!sn||m(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function x(tn){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},x(tn)}var _=new(function(tn){(function(Mt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),zt&&T(Mt,zt)})(Yt,tn);var sn,an,At=(sn=Yt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Mt){return!1}}(),function(){var Mt,zt=x(sn);if(an){var mn=x(this).constructor;Mt=Reflect.construct(zt,arguments,mn)}else Mt=zt.apply(this,arguments);return U(this,Mt)});function Yt(){var Mt;return function(zt,mn){if(!(zt instanceof mn))throw new TypeError("Cannot call a class as a function")}(this,Yt),(Mt=At.call(this)).MEDIA_KEYERR_CODE=100,Mt.MEDIA_KEYERR_UNKNOWN_CODE=101,Mt.MEDIA_KEYERR_CLIENT_CODE=102,Mt.MEDIA_KEYERR_SERVICE_CODE=103,Mt.MEDIA_KEYERR_OUTPUT_CODE=104,Mt.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,Mt.MEDIA_KEYERR_DOMAIN_CODE=106,Mt.MEDIA_KEY_MESSAGE_ERROR_CODE=107,Mt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,Mt.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,Mt.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,Mt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,Mt.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,Mt.KEY_SESSION_CREATED_ERROR_CODE=113,Mt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,Mt.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",Mt.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",Mt.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",Mt.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",Mt.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",Mt.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",Mt.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",Mt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",Mt.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",Mt.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",Mt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",Mt.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",Mt.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",Mt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",Mt}return Yt}(w(2230).Z)),I=w(5459),C=function tn(sn,an,At,Yt,Mt,zt,mn,In){(function(Zn,Cn){if(!(Zn instanceof Cn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.method=an,this.responseType=At,this.headers=Yt,this.withCredentials=Mt,this.messageType=zt,this.sessionId=mn,this.data=In},j=function tn(sn,an,At){(function(Yt,Mt){if(!(Yt instanceof Mt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.headers=an,this.data=At},z=w(7855),$=w(703),W=w(3393),ue=w(5448);function N(tn){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},N(tn)}function X(tn){var sn,an,At,Yt,Mt,zt,mn,In,Zn,Cn,Rn,on=(tn=tn||{}).protectionKeyController,Bn=tn.protectionModel,kn=tn.eventBus,er=tn.events,Er=tn.debug,Ur=tn.BASE64,Vn=tn.constants,rn=[],cn=tn.cmcdModel,bn=tn.settings,Jn=tn.customParametersModel;function ar(){if(!(kn&&kn.hasOwnProperty("on")&&on&&on.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function br(_n,Xn){In||Zn?In&&kr():function(hr,ti){if(!Zn){Zn=!0;var Mr,Bi=[];hr=hr.sort(function(Pi,ui){return(Mt&&Mt[Pi.ks.systemString]&&Mt[Pi.ks.systemString].priority>=0?Mt[Pi.ks.systemString].priority:hr.length)-(Mt&&Mt[ui.ks.systemString]&&Mt[ui.ks.systemString].priority>=0?Mt[ui.ks.systemString].priority:hr.length)});for(var Xr=0;Xr<hr.length;Xr++){var ta=wo(hr[Xr]);Bi.push({ks:hr[Xr].ks,configs:[ta],protData:hr[Xr].protData})}Bn.requestKeySystemAccess(Bi).then(function(Pi){var ui=(Mr=Pi.data).mksa&&Mr.mksa.selectedSystemString?Mr.mksa.selectedSystemString:Mr.keySystem.systemString;return an.info("DRM: KeySystem Access Granted for system string ("+ui+")!  Selecting key system..."),Bn.selectKeySystem(Mr)}).then(function(Pi){if(In=Pi,Zn=!1,Bn){kn.trigger(er.KEY_SYSTEM_SELECTED,{data:Mr});var ui=qr(In);ui&&ui.serverCertificate&&ui.serverCertificate.length>0&&Bn.setServerCertificate(Ur.decodeArray(ui.serverCertificate).buffer),kr()}}).catch(function(Pi){In=null,Zn=!1,ti||kn.trigger(er.KEY_SYSTEM_SELECTED,{data:null,error:new I.Z(_.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,_.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Pi.error)})})}}(_n,Xn)}function kr(){for(var _n,Xn=0;Xn<At.length;Xn++)for(_n=0;_n<At[Xn].length;_n++)if(In===At[Xn][_n].ks){Yi(At[Xn][_n]);break}At=[]}function Yi(_n){if(on.isClearKey(In)&&_n.protData&&_n.protData.hasOwnProperty("clearkeys")&&Object.keys(_n.protData.clearkeys).length!==0){var Xn={kids:Object.keys(_n.protData.clearkeys)};_n.initData=new TextEncoder().encode(JSON.stringify(Xn))}_n.sessionId?no(_n):_n.initData!==null&&Br(_n)}function no(_n){ar(),Bn.loadKeySession(_n)}function Br(_n){var Xn=y.getPSSHForKeySystem(In,_n?_n.initData:null);if(Xn){if(function(hr){if(!hr)return!1;try{for(var ti=Bn.getSessions(),Mr=0;Mr<ti.length;Mr++)if(ti[Mr].getKeyId()===hr)return!0;return!1}catch(Bi){return!1}}(_n.keyId)||pi(Xn))return;try{_n.initData=Xn,Bn.createKeySession(_n)}catch(hr){kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+hr.message)})}}else _n&&_n.initData?Bn.createKeySession(_n):kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(In?In.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function qr(_n){if(_n){var Xn=_n.systemString;if(Mt)return Xn in Mt?Mt[Xn]:null}return null}function pi(_n){if(!_n)return!1;try{for(var Xn=Bn.getAllInitData(),hr=0;hr<Xn.length;hr++)if(on.initDataEquals(_n,Xn[hr]))return an.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(ti){return!1}}function yi(_n){ar(),_n?(Bn.setMediaElement(_n),kn.on(er.NEED_KEY,Ms,sn)):_n===null&&(Bn.setMediaElement(_n),kn.off(er.NEED_KEY,Ms,sn))}function wo(_n){var Xn=_n.protData,hr=[],ti=[],Mr=Xn&&Xn.audioRobustness&&Xn.audioRobustness.length>0?Xn.audioRobustness:mn,Bi=Xn&&Xn.videoRobustness&&Xn.videoRobustness.length>0?Xn.videoRobustness:mn,Xr=_n.sessionType,ta=Xn&&Xn.distinctiveIdentifier?Xn.distinctiveIdentifier:"optional",Pi=Xn&&Xn.persistentState?Xn.persistentState:Xr==="temporary"?"optional":"required";return Yt.forEach(function(ui){ui.type===Vn.AUDIO?hr.push(new v(ui.codec,Mr)):ui.type===Vn.VIDEO&&ti.push(new v(ui.codec,Bi))}),new D(hr,ti,ta,Pi,[Xr])}function ro(_n){_n.error?kn.trigger(er.KEY_STATUSES_CHANGED,{data:null,error:_n.error}):an.debug("DRM: key status = "+_n.status)}function ea(_n){an.debug("DRM: onKeyMessage");var Xn=_n.data;kn.trigger(er.KEY_MESSAGE,{data:Xn});var hr=Xn.messageType?Xn.messageType:"license-request",ti=Xn.message,Mr=Xn.sessionToken,Bi=qr(In),Xr=on.getLicenseServerModelInstance(In,Bi,hr),ta={sessionToken:Mr,messageType:hr};if(ti&&ti.byteLength!==0){if(!Xr)return an.debug("DRM: License server request not required for this message (type = "+_n.data.messageType+").  Session ID = "+Mr.getSessionId()),void Ci(ta);if(on.isClearKey(In)){var Pi=on.processClearKeyLicenseRequest(In,Bi,ti);if(Pi&&Pi.keyPairs&&Pi.keyPairs.length>0)return an.debug("DRM: ClearKey license request handled by application!"),Ci(ta),void Bn.updateKeySession(Mr,Pi)}(function(ui,Ao,Wi){var Go=ui.sessionToken,na=ui.messageType?ui.messageType:"license-request",pt={sessionToken:Go,messageType:na},ra=In?In.systemString:null,Ds=function(Nr,vs,ys,Yr,Tc){var Aa=null,bl=Yr.message;if(Nr&&Nr.serverURL){var aa=Nr.serverURL;typeof aa=="string"&&aa!==""?Aa=aa:N(aa)==="object"&&aa.hasOwnProperty(vs)&&(Aa=aa[vs])}else if(Nr&&Nr.laURL&&Nr.laURL!=="")Aa=Nr.laURL;else if(!(Aa=y.getLicenseServerUrlFromMediaInfo(Yt,In.schemeIdURI))&&!on.isClearKey(In)){var Es=y.getPSSHData(ys.initData);(Aa=In.getLicenseServerURLFromInitData(Es))||(Aa=Yr.laURL)}return Aa=Tc.getServerURLFromMessage(Aa,bl,vs)}(Wi,na,Go,ui,Ao);if(Ds){var pr={},Io=!1;Wi&&Ec(pr,Wi.httpRequestHeaders);var uu=ui.message;Ec(pr,In.getRequestHeadersFromMessage(uu)),Object.keys(pr).forEach(function(Nr){Nr.toLowerCase()==="authorization"&&(Io=!0)}),Wi&&typeof Wi.withCredentials=="boolean"&&(Io=Wi.withCredentials);var Il=function(Nr){if(Bn)if(Nr.status>=200&&Nr.status<=299){var vs=$.Z.parseHttpHeaders(Nr.getAllResponseHeaders?Nr.getAllResponseHeaders():null),ys=new j(Nr.responseURL,vs,Nr.response);si(Jn.getLicenseResponseFilters(),ys).then(function(){var Yr=Ao.getLicenseMessage(ys.data,ra,na);Yr!==null?(Ci(pt),Bn.updateKeySession(Go,Yr)):Nf(Nr,pt,ra,na,Ao)})}else Nf(Nr,pt,ra,na,Ao)},gs=function(Nr){Ci(pt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ra+' update, XHR aborted. status is "'+Nr.statusText+'" ('+Nr.status+"), readyState is "+Nr.readyState))},qa=function(Nr){Ci(pt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ra+' update, XHR error. status is "'+Nr.statusText+'" ('+Nr.status+"), readyState is "+Nr.readyState))},Ou=In.getLicenseRequestFromMessage(uu),Lu=Ao.getHTTPMethod(na),ia=Ao.getResponseType(ra,na),oa=Wi&&!isNaN(Wi.httpTimeout)?Wi.httpTimeout:8e3,lu=Go.getSessionId()||null,ms=new C(Ds,Lu,ia,pr,Io,na,lu,Ou),_c=isNaN(bn.get().streaming.retryAttempts[z.w.LICENSE])?3:bn.get().streaming.retryAttempts[z.w.LICENSE];si(Jn.getLicenseRequestFilters(),ms).then(function(){Al(ms,_c,oa,Il,gs,qa)})}else Ci(pt,new I.Z(_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(Xn,Xr,Bi)}else Ci(ta,new I.Z(_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Ci(_n,Xn){kn.trigger(er.LICENSE_REQUEST_COMPLETE,{data:_n,error:Xn})}function Al(_n,Xn,hr,ti,Mr,Bi){var Xr=new XMLHttpRequest;if(bn.get().streaming.cmcd&&bn.get().streaming.cmcd.enabled&&bn.get().streaming.cmcd.mode===W.Z.CMCD_MODE_QUERY){var ta=cn.getQueryParameter({url:_n.url,type:z.w.LICENSE});ta&&(_n.url=$.Z.addAditionalQueryParameterToUrl(_n.url,[ta]))}for(var Pi in Xr.open(_n.method,_n.url,!0),Xr.responseType=_n.responseType,Xr.withCredentials=_n.withCredentials,hr>0&&(Xr.timeout=hr),_n.headers)Xr.setRequestHeader(Pi,_n.headers[Pi]);if(bn.get().streaming.cmcd&&bn.get().streaming.cmcd.enabled&&bn.get().streaming.cmcd.mode===W.Z.CMCD_MODE_HEADER){var ui=cn.getHeaderParameters({url:_n.url,type:z.w.LICENSE});if(ui)for(var Ao in ui){var Wi=ui[Ao];Wi&&Xr.setRequestHeader(Ao,Wi)}}var Go=function(){Xn--;var na=isNaN(bn.get().streaming.retryIntervals[z.w.LICENSE])?1e3:bn.get().streaming.retryIntervals[z.w.LICENSE];Rn=setTimeout(function(){Al(_n,Xn,hr,ti,Mr,Bi)},na)};Xr.onload=function(){Cn=null,this.status>=200&&this.status<=299||Xn<=0?ti(this):(an.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+Xn),Go())},Xr.ontimeout=Xr.onerror=function(){Cn=null,Xn<=0?Bi(this):(an.warn("License request network request failed . Retrying it... Pending retries: "+Xn),Go())},Xr.onabort=function(){Mr(this)},kn.trigger(er.LICENSE_REQUEST_SENDING,{url:_n.url,headers:_n.headers,payload:_n.data,sessionId:_n.sessionId}),Cn=Xr,Xr.send(_n.data)}function su(){Cn&&(Cn.onloadend=Cn.onerror=Cn.onprogress=void 0,Cn.abort(),Cn=null),Rn&&(clearTimeout(Rn),Rn=null)}function Ec(_n,Xn){if(Xn)for(var hr in Xn)_n[hr]=Xn[hr]}function Nf(_n,Xn,hr,ti,Mr){var Bi="NONE",Xr=null;_n.response&&(Bi=Mr.getErrorResponse(_n.response,hr,ti),Xr={serverResponse:_n.response||null,responseCode:_n.status||null,responseText:_n.statusText||null}),Ci(Xn,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+hr+' update, XHR complete. status is "'+_n.statusText+'" ('+_n.status+"), readyState is "+_n.readyState+".  Response is "+Bi,Xr))}function si(_n,Xn){return _n?_n.reduce(function(hr,ti){return hr.then(function(){return ti(Xn)})},Promise.resolve()):Promise.resolve()}function Ms(_n,Xn){if(!bn.get().streaming.protection.ignoreEmeEncryptedEvent){if(an.debug("DRM: onNeedKey"),_n.key.initDataType!=="cenc")return void an.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+_n.key.initDataType);if(Yt.length===0&&(an.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(Xn=Xn===void 0?1:Xn+1)<5))return void rn.push(setTimeout(function(){Ms(_n,Xn)},500));var hr=_n.key.initData;if(ArrayBuffer.isView(hr)&&(hr=hr.buffer),In){var ti=y.getPSSHForKeySystem(In,hr);if(ti&&pi(ti))return}an.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(hr)));var Mr=on.getSupportedKeySystemsFromSegmentPssh(hr,Mt,zt);if(Mr.length===0)return void an.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Bi){At.push(Bi),br(Bi,!1)})(Mr)}}return sn={initializeForMedia:function(_n){if(!_n)throw new Error("mediaInfo can not be null or undefined");ar(),Yt.push(_n)},clearMediaInfoArray:function(){Yt=[]},handleKeySystemFromManifest:function(){if(Yt&&Yt.length!==0){var _n=[];Yt.forEach(function(Xn){var hr=on.getSupportedKeySystemsFromContentProtection(Xn.contentProtection,Mt,zt);hr.length>0&&(_n.length===0&&(_n=hr),At.push(hr))}),_n&&_n.length>0&&br(_n,!0)}},createKeySession:Br,loadKeySession:no,removeKeySession:function(_n){ar(),Bn.removeKeySession(_n)},closeKeySession:function(_n){ar(),Bn.closeKeySession(_n)},setServerCertificate:function(_n){ar(),Bn.setServerCertificate(_n)},setMediaElement:yi,setSessionType:function(_n){zt=_n},setRobustnessLevel:function(_n){mn=_n},setProtectionData:function(_n){Mt=_n,on.setProtectionData(_n)},getSupportedKeySystemsFromContentProtection:function(_n){return ar(),on.getSupportedKeySystemsFromContentProtection(_n,Mt,zt)},getKeySystems:function(){return on?on.getKeySystems():[]},setKeySystems:function(_n){on&&on.setKeySystems(_n)},stop:function(){su(),Bn&&Bn.stop()},reset:function(){kn.off(er.INTERNAL_KEY_MESSAGE,ea,sn),kn.off(er.INTERNAL_KEY_STATUS_CHANGED,ro,sn),ar(),su(),yi(null),In=null,Zn=!1,Bn&&(Bn.reset(),Bn=null),rn.forEach(function(_n){return clearTimeout(_n)}),rn=[],Yt=[],At=[]}},an=Er.getLogger(sn),At=[],Yt=[],zt="temporary",mn="",Cn=null,Rn=null,kn.on(er.INTERNAL_KEY_MESSAGE,ea,sn),kn.on(er.INTERNAL_KEY_STATUS_CHANGED,ro,sn),sn}X.__dashjs_factory_name="ProtectionController";var ce=ue.Z.getClassFactory(X),oe=function tn(sn,an){(function(At,Yt){if(!(At instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keyID=sn,this.key=an};function de(tn,sn){for(var an=0;an<sn.length;an++){var At=sn[an];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),Object.defineProperty(tn,At.key,At)}}var Ce=function(){function tn(At,Yt){if(function(Mt,zt){if(!(Mt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,tn),Yt&&Yt!=="persistent"&&Yt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=At,this.type=Yt}var sn,an;return sn=tn,(an=[{key:"toJWK",value:function(){var At,Yt=this.keyPairs.length,Mt={keys:[]};for(At=0;At<Yt;At++){var zt={kty:"oct",alg:"A128KW",kid:this.keyPairs[At].keyID,k:this.keyPairs[At].key};Mt.keys.push(zt)}this.type&&(Mt.type=this.type);var mn=JSON.stringify(Mt),In=mn.length,Zn=new ArrayBuffer(In),Cn=new Uint8Array(Zn);for(At=0;At<In;At++)Cn[At]=mn.charCodeAt(At);return Zn}}])&&de(sn.prototype,an),tn}();function Je(tn,sn){for(var an=0;an<sn.length;an++){var At=sn[an];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),Object.defineProperty(tn,At.key,At)}}var Te=new(function(){function tn(){(function(At,Yt){if(!(At instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.init()}var sn,an;return sn=tn,(an=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Je(sn.prototype,an),tn}()),je="e2719d58-a985-b3c9-781a-b030af78d30e",nt=Te.CLEARKEY_KEYSTEM_STRING,ct="urn:uuid:"+je;function Ie(tn){var sn=(tn=tn||{}).BASE64;return{uuid:je,schemeIdURI:ct,systemString:nt,getInitData:function(an,At){try{var Yt=y.parseInitDataFromContentProtection(an,sn);if(!Yt&&At){var Mt={kids:[function(zt){try{var mn=zt.replace(/-/g,"");return(mn=btoa(mn.match(/\w{2}/g).map(function(In){return String.fromCharCode(parseInt(In,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(In){return null}}(At["cenc:default_KID"])]};Yt=new TextEncoder().encode(JSON.stringify(Mt))}return Yt}catch(zt){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(an){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(an))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(an,At){var Yt=null;if(an){for(var Mt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(At))),zt=[],mn=0;mn<Mt.kids.length;mn++){var In=Mt.kids[mn],Zn=an.clearkeys&&an.clearkeys.hasOwnProperty(In)?an.clearkeys[In]:null;if(!Zn)throw new Error("DRM: ClearKey keyID ("+In+") is not known!");zt.push(new oe(In,Zn))}Yt=new Ce(zt)}return Yt}}}Ie.__dashjs_factory_name="KeySystemClearKey";var Ye=dashjs.FactoryMaker.getSingletonFactory(Ie),mt="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",xe=Te.CLEARKEY_KEYSTEM_STRING,We="urn:uuid:"+mt;function it(tn){var sn,an=tn.BASE64,At=tn.debug.getLogger(sn);return{uuid:mt,schemeIdURI:We,systemString:xe,getInitData:function(Yt){return y.parseInitDataFromContentProtection(Yt,an)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(Yt){return new Uint8Array(Yt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(Yt,Mt){var zt=null;if(Yt){for(var mn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Mt))),In=[],Zn=0;Zn<mn.kids.length;Zn++){var Cn=mn.kids[Zn],Rn=Yt.clearkeys&&Yt.clearkeys.hasOwnProperty(Cn)?Yt.clearkeys[Cn]:null;if(!Rn)throw new Error("DRM: ClearKey keyID ("+Cn+") is not known!");In.push(new oe(Cn,Rn))}zt=new Ce(In),At.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return zt}}}it.__dashjs_factory_name="KeySystemW3CClearKey";var qt=dashjs.FactoryMaker.getSingletonFactory(it),Ft="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",gt=Te.WIDEVINE_KEYSTEM_STRING,St="urn:uuid:"+Ft;function Re(tn){var sn=(tn=tn||{}).BASE64;return{uuid:Ft,schemeIdURI:St,systemString:gt,getInitData:function(an){return y.parseInitDataFromContentProtection(an,sn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(an){return new Uint8Array(an)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Re.__dashjs_factory_name="KeySystemWidevine";var re=dashjs.FactoryMaker.getSingletonFactory(Re),Be="9a04f079-9840-4286-ab92-e65be0885f95",O=Te.PLAYREADY_KEYSTEM_STRING,M="urn:uuid:"+Be;function q(tn){var sn="utf-16",an=(tn=tn||{}).BASE64,At=tn.settings;function Yt(){if(!an||!an.hasOwnProperty("decodeArray")||!an.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Be,schemeIdURI:M,systemString:O,getInitData:function(Mt){var zt,mn,In,Zn,Cn,Rn=new Uint8Array([112,115,115,104,0,0,0,0]),on=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),Bn=0,kn=null;if(Yt(),!Mt)return null;if("pssh"in Mt)return y.parseInitDataFromContentProtection(Mt,an);if("pro"in Mt)kn=an.decodeArray(Mt.pro.__text);else{if(!("prheader"in Mt))return null;kn=an.decodeArray(Mt.prheader.__text)}return zt=kn.length,mn=4+Rn.length+on.length+4+zt,In=new ArrayBuffer(mn),Zn=new Uint8Array(In),(Cn=new DataView(In)).setUint32(Bn,mn),Bn+=4,Zn.set(Rn,Bn),Bn+=Rn.length,Zn.set(on,Bn),Bn+=on.length,Cn.setUint32(Bn,zt),Bn+=4,Zn.set(kn,Bn),Bn+=zt,Zn.buffer},getRequestHeadersFromMessage:function(Mt){var zt,mn,In={},Zn=new DOMParser;if(At&&At.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Mt&&Mt.byteLength%2==1)return In["Content-Type"]="text/xml; charset=utf-8",In;var Cn=sn==="utf-16"?new Uint16Array(Mt):new Uint8Array(Mt);zt=String.fromCharCode.apply(null,Cn);for(var Rn=(mn=Zn.parseFromString(zt,"application/xml")).getElementsByTagName("name"),on=mn.getElementsByTagName("value"),Bn=0;Bn<Rn.length;Bn++)In[Rn[Bn].childNodes[0].nodeValue]=on[Bn].childNodes[0].nodeValue;return In.hasOwnProperty("Content")&&(In["Content-Type"]=In.Content,delete In.Content),In.hasOwnProperty("Content-Type")||(In["Content-Type"]="text/xml; charset=utf-8"),In},getLicenseRequestFromMessage:function(Mt){var zt=null,mn=new DOMParser;if(At&&At.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Mt&&Mt.byteLength%2==1)return Mt;var In=sn==="utf-16"?new Uint16Array(Mt):new Uint8Array(Mt);Yt();var Zn=String.fromCharCode.apply(null,In),Cn=mn.parseFromString(Zn,"application/xml");if(!Cn.getElementsByTagName("PlayReadyKeyMessage")[0])return Mt;var Rn=Cn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Rn&&(zt=an.decode(Rn)),zt},getLicenseServerURLFromInitData:function(Mt){if(Mt)for(var zt=new DataView(Mt),mn=zt.getUint16(4,!0),In=6,Zn=new DOMParser,Cn=0;Cn<mn;Cn++){var Rn=zt.getUint16(In,!0);In+=2;var on=zt.getUint16(In,!0);if(In+=2,Rn===1){var Bn=Mt.slice(In,In+on),kn=String.fromCharCode.apply(null,new Uint16Array(Bn)),er=Zn.parseFromString(kn,"application/xml");if(er.getElementsByTagName("LA_URL")[0]){var Er=er.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Er)return Er}if(er.getElementsByTagName("LUI_URL")[0]){var Ur=er.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Ur)return Ur}}else In+=on}return null},getCDMData:function(Mt){var zt,mn,In,Zn;if(Yt(),!Mt)return null;for(zt=[],Zn=0;Zn<Mt.length;++Zn)zt.push(Mt.charCodeAt(Zn)),zt.push(0);for(zt=String.fromCharCode.apply(null,zt),zt=an.encode(zt),mn='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",zt),In=[],Zn=0;Zn<mn.length;++Zn)In.push(mn.charCodeAt(Zn)),In.push(0);return new Uint8Array(In).buffer},setPlayReadyMessageFormat:function(Mt){if(Mt!=="utf-8"&&Mt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');sn=Mt}}}q.__dashjs_factory_name="KeySystemPlayReady";var K=dashjs.FactoryMaker.getSingletonFactory(q);function ye(tn){var sn=(tn=tn||{}).BASE64,an={};return an[Te.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(At){return sn.decodeArray(At.license)},getErrorResponse:function(At){return At}},an[Te.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(At){return At},getErrorResponse:function(At){return String.fromCharCode.apply(null,new Uint8Array(At))}},{getServerURLFromMessage:function(At){return At},getHTTPMethod:function(){return"POST"},getResponseType:function(At){return an[At].responseType},getLicenseMessage:function(At,Yt){return function(){if(!sn||!sn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),an[Yt].getLicenseMessage(At)},getErrorResponse:function(At,Yt){return an[Yt].getErrorResponse(At)}}}ye.__dashjs_factory_name="DRMToday";var he=dashjs.FactoryMaker.getSingletonFactory(ye);function Ke(){var tn="http://schemas.xmlsoap.org/soap/envelope/";function sn(Yt){var Mt=String.fromCharCode.apply(null,new Uint8Array(Yt));return decodeURIComponent(escape(Mt))}function an(Yt){if(window.DOMParser){var Mt=sn(Yt),zt=new window.DOMParser().parseFromString(Mt,"text/xml"),mn=zt?zt.getElementsByTagNameNS(tn,"Envelope")[0]:null,In=mn?mn.getElementsByTagNameNS(tn,"Body")[0]:null;if(In&&In.getElementsByTagNameNS(tn,"Fault")[0])return null}return Yt}function At(Yt){var Mt="",zt="",mn="",In=-1,Zn=-1;if(window.DOMParser){var Cn=sn(Yt),Rn=new window.DOMParser().parseFromString(Cn,"text/xml"),on=Rn?Rn.getElementsByTagNameNS(tn,"Envelope")[0]:null,Bn=on?on.getElementsByTagNameNS(tn,"Body")[0]:null,kn=Bn?Bn.getElementsByTagNameNS(tn,"Fault")[0]:null,er=kn?kn.getElementsByTagName("detail")[0]:null,Er=er?er.getElementsByTagName("Exception")[0]:null,Ur=null;if(kn===null)return Cn;Mt=(Ur=kn.getElementsByTagName("faultstring")[0].firstChild)?Ur.nodeValue:null,Er!==null&&(zt=(Ur=Er.getElementsByTagName("StatusCode")[0])?Ur.firstChild.nodeValue:null,In=(mn=(Ur=Er.getElementsByTagName("Message")[0])?Ur.firstChild.nodeValue:null)?mn.lastIndexOf("[")+1:-1,Zn=mn?mn.indexOf("]"):-1,mn=mn?mn.substring(In,Zn):"")}var Vn="code: ".concat(zt,", name: ").concat(Mt);return mn&&(Vn+=", message: ".concat(mn)),Vn}return{getServerURLFromMessage:function(Yt){return Yt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(Yt){return an.call(this,Yt)},getErrorResponse:function(Yt){return At.call(this,Yt)}}}Ke.__dashjs_factory_name="PlayReady";var wt=ue.Z.getSingletonFactory(Ke);function st(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(tn){return tn},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}st.__dashjs_factory_name="Widevine";var at=dashjs.FactoryMaker.getSingletonFactory(st);function tt(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(tn){if(!tn.hasOwnProperty("keys"))return null;for(var sn=[],an=0;an<tn.keys.length;an++){var At=tn.keys[an],Yt=At.kid.replace(/=/g,""),Mt=At.k.replace(/=/g,"");sn.push(new oe(Yt,Mt))}return new Ce(sn)},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}tt.__dashjs_factory_name="ClearKey";var ft=dashjs.FactoryMaker.getSingletonFactory(tt);function Et(){var tn,sn,an,At,Yt,Mt,zt,mn,In=this.context;function Zn(on,Bn){return Bn&&on in Bn?Bn[on]:null}function Cn(on,Bn){return on&&on.sessionId?on.sessionId:Bn&&Bn.sessionId?Bn.sessionId:null}function Rn(on,Bn){return on&&on.sessionType?on.sessionType:Bn}return tn={initialize:function(){var on;At=[],on=K(In).getInstance({BASE64:Yt,settings:Mt}),At.push(on),on=re(In).getInstance({BASE64:Yt}),At.push(on),on=Ye(In).getInstance({BASE64:Yt}),At.push(on),zt=on,on=qt(In).getInstance({BASE64:Yt,debug:sn}),At.push(on),mn=on},setProtectionData:function(on){for(var Bn,kn,er=0;er<At.length;er++){var Er=At[er];Er.hasOwnProperty("init")&&Er.init((Bn=Er.systemString,kn=void 0,kn=null,on&&(kn=Bn in on?on[Bn]:null),kn))}},isClearKey:function(on){return on===zt||on===mn},initDataEquals:function(on,Bn){if(on.byteLength===Bn.byteLength){for(var kn=new Uint8Array(on),er=new Uint8Array(Bn),Er=0;Er<kn.length;Er++)if(kn[Er]!==er[Er])return!1;return!0}return!1},getKeySystems:function(){return At},setKeySystems:function(on){At=on},getKeySystemBySystemString:function(on){for(var Bn=0;Bn<At.length;Bn++)if(At[Bn].systemString===on)return At[Bn];return null},getSupportedKeySystemsFromContentProtection:function(on,Bn,kn){var er,Er,Ur,Vn,rn=[];if(on){var cn=y.findCencContentProtection(on);for(Ur=0;Ur<At.length;++Ur){var bn=Zn((Er=At[Ur]).systemString,Bn);for(Vn=0;Vn<on.length;++Vn)if((er=on[Vn]).schemeIdUri.toLowerCase()===Er.schemeIdURI){var Jn=Er.getInitData(er,cn);rn.push({ks:At[Ur],keyId:er.keyId,initData:Jn,protData:bn,cdmData:Er.getCDMData(bn?bn.cdmData:null),sessionId:Cn(bn,er),sessionType:Rn(bn,kn)})}}}return rn},getSupportedKeySystemsFromSegmentPssh:function(on,Bn,kn){for(var er,Er=[],Ur=y.parsePSSHList(on),Vn=0;Vn<At.length;++Vn){var rn=Zn((er=At[Vn]).systemString,Bn);er.uuid in Ur&&Er.push({ks:er,initData:Ur[er.uuid],protData:rn,cdmData:er.getCDMData(rn?rn.cdmData:null),sessionId:Cn(rn),sessionType:Rn(rn,kn)})}return Er},getLicenseServerModelInstance:function(on,Bn,kn){if(kn==="license-release"||kn==="individualization-request")return null;var er=null;return Bn&&Bn.hasOwnProperty("drmtoday")?er=he(In).getInstance({BASE64:Yt}):on.systemString===Te.WIDEVINE_KEYSTEM_STRING?er=at(In).getInstance():on.systemString===Te.PLAYREADY_KEYSTEM_STRING?er=wt(In).getInstance():on.systemString===Te.CLEARKEY_KEYSTEM_STRING&&(er=ft(In).getInstance()),er},processClearKeyLicenseRequest:function(on,Bn,kn){try{return on.getClearKeysFromProtectionData(Bn,kn)}catch(er){return an.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(on){on&&(on.debug&&(sn=on.debug,an=sn.getLogger(tn)),on.BASE64&&(Yt=on.BASE64),on.settings&&(Mt=on.settings))}},tn}Et.__dashjs_factory_name="ProtectionKeyController";var Tt=dashjs.FactoryMaker.getSingletonFactory(Et);function Ct(tn){return Ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},Ct(tn)}function hn(tn,sn){return hn=Object.setPrototypeOf||function(an,At){return an.__proto__=At,an},hn(tn,sn)}function Qt(tn,sn){return!sn||Ct(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function nn(tn){return nn=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},nn(tn)}var Ot=new(function(tn){(function(Mt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),zt&&hn(Mt,zt)})(Yt,tn);var sn,an,At=(sn=Yt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Mt){return!1}}(),function(){var Mt,zt=nn(sn);if(an){var mn=nn(this).constructor;Mt=Reflect.construct(zt,arguments,mn)}else Mt=zt.apply(this,arguments);return Qt(this,Mt)});function Yt(){var Mt;return function(zt,mn){if(!(zt instanceof mn))throw new TypeError("Cannot call a class as a function")}(this,Yt),(Mt=At.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",Mt.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",Mt.KEY_ADDED="public_keyAdded",Mt.KEY_ERROR="public_keyError",Mt.KEY_MESSAGE="public_keyMessage",Mt.KEY_SESSION_CLOSED="public_keySessionClosed",Mt.KEY_SESSION_CREATED="public_keySessionCreated",Mt.KEY_SESSION_REMOVED="public_keySessionRemoved",Mt.KEY_STATUSES_CHANGED="public_keyStatusesChanged",Mt.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",Mt.KEY_SYSTEM_SELECTED="public_keySystemSelected",Mt.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",Mt.LICENSE_REQUEST_SENDING="public_licenseRequestSending",Mt.NEED_KEY="needkey",Mt.PROTECTION_CREATED="public_protectioncreated",Mt.PROTECTION_DESTROYED="public_protectiondestroyed",Mt.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",Mt.TEARDOWN_COMPLETE="protectionTeardownComplete",Mt.VIDEO_ELEMENT_SELECTED="videoElementSelected",Mt.KEY_SESSION_UPDATED="public_keySessionUpdated",Mt}return Yt}(w(8342).Z)),Un=function tn(sn,an){(function(At,Yt){if(!(At instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initData=sn,this.initDataType=an},gr=function tn(sn,an,At,Yt){(function(Mt,zt){if(!(Mt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.sessionToken=sn,this.message=an,this.defaultURL=At,this.messageType=Yt||"license-request"},Or=function tn(sn,an){(function(At,Yt){if(!(At instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keySystem=sn,this.ksConfiguration=an},dr={};function ei(tn){tn=tn||{};var sn,an,At,Yt,Mt,zt,mn,In,Zn=this.context,Cn=tn.eventBus,Rn=tn.events,on=tn.debug;function Bn(rn,cn,bn,Jn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var ar="Insecure origins are not allowed";return Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:ar}),void Jn({error:ar})}var br=rn[cn].protData&&rn[cn].protData.systemStringPriority?rn[cn].protData.systemStringPriority:null,kr=rn[cn].configs,Yi=rn[cn].ks,no=Yi.systemString;(function(Br,qr){return new Promise(function(pi,yi){kn(Br,qr,0,pi,yi)})})(br||(dr[no]?dr[no]:[no]),kr).then(function(Br){var qr=typeof Br.getConfiguration=="function"?Br.getConfiguration():null,pi=new Or(Yi,qr);pi.mksa=Br,Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{data:pi}),bn({data:pi})}).catch(function(Br){if(cn+1<rn.length)Bn(rn,cn+1,bn,Jn);else{var qr="Key system access denied! ";Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:qr+Br.message}),Jn({error:qr+Br.message})}})}function kn(rn,cn,bn,Jn,ar){var br=rn[bn];an.debug("Requesting key system access for system string ".concat(br)),navigator.requestMediaKeySystemAccess(br,cn).then(function(kr){kr.selectedSystemString=br,Jn(kr)}).catch(function(kr){bn+1<rn.length?kn(rn,cn,bn+1,Jn,ar):ar(kr)})}function er(rn){if(!rn||!rn.session)return Promise.resolve;var cn=rn.session;return cn.removeEventListener("keystatuseschange",rn),cn.removeEventListener("message",rn),cn.close()}function Er(rn){for(var cn=0;cn<zt.length;cn++)if(zt[cn]===rn){zt.splice(cn,1);break}}function Ur(rn){var cn,bn;return rn&&rn.length>0&&(rn[0]&&(typeof rn[0]=="string"?cn=rn[0]:bn=rn[0]),rn[1]&&(typeof rn[1]=="string"?cn=rn[1]:bn=rn[1])),{status:cn,keyId:bn}}function Vn(rn,cn){var bn={session:rn,keyId:cn.keyId,initData:cn.initData,sessionId:cn.sessionId,sessionType:cn.sessionType,handleEvent:function(Jn){switch(Jn.type){case"keystatuseschange":Cn.trigger(Rn.KEY_STATUSES_CHANGED,{data:this}),Jn.target.keyStatuses.forEach(function(){var br=Ur(arguments);br.status==="expired"?Cn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,{error:new I.Z(_.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):Cn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,br)});break;case"message":var ar=ArrayBuffer.isView(Jn.message)?Jn.message.buffer:Jn.message;Cn.trigger(Rn.INTERNAL_KEY_MESSAGE,{data:new gr(this,ar,void 0,Jn.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return rn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return rn.expiration},getKeyStatuses:function(){return rn.keyStatuses},getUsable:function(){var Jn=!1;return rn.keyStatuses.forEach(function(){var ar=Ur(arguments);ar.status==="usable"&&(Jn=!0)}),Jn}};return rn.addEventListener("keystatuseschange",bn),rn.addEventListener("message",bn),rn.closed.then(function(){Er(bn),an.debug("DRM: Session closed.  SessionID = "+bn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CLOSED,{data:bn.getSessionId()})}),zt.push(bn),bn}return sn={getAllInitData:function(){for(var rn=[],cn=0;cn<zt.length;cn++)zt[cn].initData&&rn.push(zt[cn].initData);return rn},getSessions:function(){return zt},requestKeySystemAccess:function(rn){return new Promise(function(cn,bn){Bn(rn,0,cn,bn)})},selectKeySystem:function(rn){return new Promise(function(cn,bn){rn.mksa.createMediaKeys().then(function(Jn){return At=rn.keySystem,Mt=Jn,Yt?Yt.setMediaKeys(Mt):Promise.resolve()}).then(function(){cn(At)}).catch(function(){bn({error:"Error selecting keys system ("+rn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(rn){Yt!==rn&&(Yt&&(Yt.removeEventListener("encrypted",mn),Yt.setMediaKeys&&Yt.setMediaKeys(null)),(Yt=rn)&&(Yt.addEventListener("encrypted",mn),Yt.setMediaKeys&&Mt&&Yt.setMediaKeys(Mt)))},setServerCertificate:function(rn){if(!At||!Mt)throw new Error("Can not set server certificate until you have selected a key system");Mt.setServerCertificate(rn).then(function(){an.info("DRM: License server certificate successfully updated."),Cn.trigger(Rn.SERVER_CERTIFICATE_UPDATED)}).catch(function(cn){Cn.trigger(Rn.SERVER_CERTIFICATE_UPDATED,{error:new I.Z(_.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+cn.name)})})},createKeySession:function(rn){if(!At||!Mt)throw new Error("Can not create sessions until you have selected a key system");var cn=Mt.createSession(rn.sessionType),bn=Vn(cn,rn),Jn=At.systemString===Te.CLEARKEY_KEYSTEM_STRING&&(rn.initData||rn.protData&&rn.protData.clearkeys)?Te.INITIALIZATION_DATA_TYPE_KEYIDS:Te.INITIALIZATION_DATA_TYPE_CENC;cn.generateRequest(Jn,rn.initData).then(function(){an.debug("DRM: Session created.  SessionID = "+bn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:bn})}).catch(function(ar){Er(bn),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+ar.name)})})},updateKeySession:function(rn,cn){var bn=rn.session;In.isClearKey(At)&&(cn=cn.toJWK()),bn.update(cn).then(function(){Cn.trigger(Rn.KEY_SESSION_UPDATED)}).catch(function(Jn){Cn.trigger(Rn.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"Error sending update() message! "+Jn.name,rn)})})},loadKeySession:function(rn){if(!At||!Mt)throw new Error("Can not load sessions until you have selected a key system");for(var cn=rn.sessionId,bn=0;bn<zt.length;bn++)if(cn===zt[bn].sessionId)return void an.warn("DRM: Ignoring session ID because we have already seen it!");var Jn=Mt.createSession(rn.sessionType),ar=Vn(Jn,rn);Jn.load(cn).then(function(br){br?(an.debug("DRM: Session loaded.  SessionID = "+ar.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:ar})):(Er(ar),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+cn+")")}))}).catch(function(br){Er(ar),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+cn+")! "+br.name)})})},removeKeySession:function(rn){rn.session.remove().then(function(){an.debug("DRM: Session removed.  SessionID = "+rn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_REMOVED,{data:rn.getSessionId()})},function(cn){Cn.trigger(Rn.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+rn.getSessionId()+"). "+cn.name})})},closeKeySession:function(rn){er(rn).catch(function(cn){Er(rn),Cn.trigger(Rn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+rn.getSessionId()+") "+cn.name})})},stop:function(){for(var rn,cn=0;cn<zt.length;cn++)(rn=zt[cn]).getUsable()||(er(rn),Er(rn))},reset:function(){var rn,cn=zt.length;cn!==0?function(){for(var bn=function(ar){Er(ar),zt.length===0&&(Yt?(Yt.removeEventListener("encrypted",mn),Yt.setMediaKeys(null).then(function(){Cn.trigger(Rn.TEARDOWN_COMPLETE)})):Cn.trigger(Rn.TEARDOWN_COMPLETE))},Jn=0;Jn<cn;Jn++)(function(ar){er(rn),bn(ar)})(rn=zt[Jn])}():Cn.trigger(Rn.TEARDOWN_COMPLETE)}},an=on.getLogger(sn),At=null,Yt=null,Mt=null,zt=[],In=Tt(Zn).getInstance(),mn={handleEvent:function(rn){if(rn.type==="encrypted"&&rn.initData){var cn=ArrayBuffer.isView(rn.initData)?rn.initData.buffer:rn.initData;Cn.trigger(Rn.NEED_KEY,{key:new Un(cn,rn.initDataType)})}}},sn}dr[Te.PLAYREADY_KEYSTEM_STRING]=[Te.PLAYREADY_KEYSTEM_STRING,Te.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],dr[Te.WIDEVINE_KEYSTEM_STRING]=[Te.WIDEVINE_KEYSTEM_STRING],dr[Te.CLEARKEY_KEYSTEM_STRING]=[Te.CLEARKEY_KEYSTEM_STRING],ei.__dashjs_factory_name="ProtectionModel_21Jan2015";var Ji=dashjs.FactoryMaker.getClassFactory(ei);function Lr(tn){tn=tn||{};var sn,an,At,Yt,Mt,zt,mn,In,Zn,Cn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api;function er(){try{for(var Vn=0;Vn<mn.length;Vn++)Er(mn[Vn]);At&&At.removeEventListener(kn.needkey,In),Rn.trigger(on.TEARDOWN_COMPLETE)}catch(rn){Rn.trigger(on.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+rn.message})}}function Er(Vn){var rn=Vn.session;rn.removeEventListener(kn.error,Vn),rn.removeEventListener(kn.message,Vn),rn.removeEventListener(kn.ready,Vn),rn.removeEventListener(kn.close,Vn);for(var cn=0;cn<mn.length;cn++)if(mn[cn]===Vn){mn.splice(cn,1);break}rn[kn.release]()}function Ur(){var Vn=null,rn=function(){At.removeEventListener("loadedmetadata",Vn),At[kn.setMediaKeys](Mt),Rn.trigger(on.VIDEO_ELEMENT_SELECTED)};At.readyState>=1?rn():(Vn=rn.bind(this),At.addEventListener("loadedmetadata",Vn))}return sn={getAllInitData:function(){for(var Vn=[],rn=0;rn<mn.length;rn++)Vn.push(mn[rn].initData);return Vn},getSessions:function(){return mn},requestKeySystemAccess:function(Vn){return new Promise(function(rn,cn){for(var bn=!1,Jn=0;Jn<Vn.length;Jn++)for(var ar=Vn[Jn].ks.systemString,br=Vn[Jn].configs,kr=null,Yi=null,no=0;no<br.length;no++){var Br=br[no].audioCapabilities,qr=br[no].videoCapabilities;if(Br&&Br.length!==0){kr=[];for(var pi=0;pi<Br.length;pi++)window[kn.MediaKeys].isTypeSupported(ar,Br[pi].contentType)&&kr.push(Br[pi])}if(qr&&qr.length!==0){Yi=[];for(var yi=0;yi<qr.length;yi++)window[kn.MediaKeys].isTypeSupported(ar,qr[yi].contentType)&&Yi.push(qr[yi])}if(!(!kr&&!Yi||kr&&kr.length===0||Yi&&Yi.length===0)){bn=!0;var wo=new D(kr,Yi),ro=Zn.getKeySystemBySystemString(ar),ea=new Or(ro,wo);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:ea}),rn({data:ea});break}}if(!bn){var Ci="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ci}),cn({error:Ci})}})},selectKeySystem:function(Vn){return new Promise(function(rn,cn){try{Mt=Vn.mediaKeys=new window[kn.MediaKeys](Vn.keySystem.systemString),Yt=Vn.keySystem,zt=Vn,At&&Ur(),rn(Yt)}catch(bn){cn({error:"Error selecting keys system ("+Yt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(Vn){At!==Vn&&(At&&At.removeEventListener(kn.needkey,In),(At=Vn)&&(At.addEventListener(kn.needkey,In),Mt&&Ur()))},createKeySession:function(Vn){if(!Yt||!Mt||!zt)throw new Error("Can not create sessions until you have selected a key system");var rn=null;if(zt.ksConfiguration.videoCapabilities&&zt.ksConfiguration.videoCapabilities.length>0&&(rn=zt.ksConfiguration.videoCapabilities[0]),rn===null&&zt.ksConfiguration.audioCapabilities&&zt.ksConfiguration.audioCapabilities.length>0&&(rn=zt.ksConfiguration.audioCapabilities[0]),rn===null)throw new Error("Can not create sessions for unknown content types.");var cn=rn.contentType,bn=Mt.createSession(cn,new Uint8Array(Vn.initData),Vn.cdmData?new Uint8Array(Vn.cdmData):null),Jn=function(ar,br){return{session:ar,keyId:br.keyId,initData:br.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(kr){switch(kr.type){case kn.error:Rn.trigger(on.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"KeyError",this)});break;case kn.message:var Yi=ArrayBuffer.isView(kr.message)?kr.message.buffer:kr.message;Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(this,Yi,kr.destinationURL)});break;case kn.ready:an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED);break;case kn.close:an.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Rn.trigger(on.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(bn,Vn);bn.addEventListener(kn.error,Jn),bn.addEventListener(kn.message,Jn),bn.addEventListener(kn.ready,Jn),bn.addEventListener(kn.close,Jn),mn.push(Jn),an.debug("DRM: Session created.  SessionID = "+Jn.getSessionId()),Rn.trigger(on.KEY_SESSION_CREATED,{data:Jn})},updateKeySession:function(Vn,rn){var cn=Vn.session;Zn.isClearKey(Yt)?cn.update(new Uint8Array(rn.toJWK())):cn.update(new Uint8Array(rn)),Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Er,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:er,reset:er},an=Bn.getLogger(sn),At=null,Yt=null,Mt=null,zt=null,mn=[],Zn=Tt(Cn).getInstance(),In={handleEvent:function(Vn){if(Vn.type===kn.needkey&&Vn.initData){var rn=ArrayBuffer.isView(Vn.initData)?Vn.initData.buffer:Vn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(rn,"cenc")})}}},sn}Lr.__dashjs_factory_name="ProtectionModel_3Feb2014";var eo=dashjs.FactoryMaker.getClassFactory(Lr);function Ti(tn){tn=tn||{};var sn,an,At,Yt,Mt,zt,mn,In,Zn,Cn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api,er=tn.errHandler;function Er(){At&&rn();for(var cn=0;cn<mn.length;cn++)Ur(mn[cn]);Rn.trigger(on.TEARDOWN_COMPLETE)}function Ur(cn){try{At[kn.cancelKeyRequest](Yt.systemString,cn.sessionId)}catch(bn){Rn.trigger(on.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+cn.sessionId+") "+bn.message})}}function Vn(cn,bn){if(bn&&cn){for(var Jn=cn.length,ar=0;ar<Jn;ar++)if(cn[ar].sessionId==bn)return cn[ar];return null}return null}function rn(){At.removeEventListener(kn.keyerror,Zn),At.removeEventListener(kn.needkey,Zn),At.removeEventListener(kn.keymessage,Zn),At.removeEventListener(kn.keyadded,Zn)}return sn={getAllInitData:function(){for(var cn=[],bn=0;bn<zt.length;bn++)cn.push(zt[bn].initData);for(var Jn=0;Jn<mn.length;Jn++)cn.push(mn[Jn].initData);return cn},getSessions:function(){return mn.concat(zt)},requestKeySystemAccess:function(cn){return new Promise(function(bn,Jn){var ar=At;ar||(ar=document.createElement("video"));for(var br=!1,kr=0;kr<cn.length;kr++)for(var Yi=cn[kr].ks.systemString,no=cn[kr].configs,Br=null,qr=0;qr<no.length;qr++){var pi=no[qr].videoCapabilities;if(pi&&pi.length!==0){Br=[];for(var yi=0;yi<pi.length;yi++)ar.canPlayType(pi[yi].contentType,Yi)!==""&&Br.push(pi[yi])}if(Br&&(!Br||Br.length!==0)){br=!0;var wo=new D(null,Br),ro=Mt.getKeySystemBySystemString(Yi),ea=new Or(ro,wo);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:ea}),bn({data:ea});break}}if(!br){var Ci="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ci}),Jn({error:Ci})}})},selectKeySystem:function(cn){return Yt=cn.keySystem,Promise.resolve(Yt)},setMediaElement:function(cn){if(At!==cn){if(At){rn();for(var bn=0;bn<mn.length;bn++)Ur(mn[bn]);mn=[]}(At=cn)&&(At.addEventListener(kn.keyerror,Zn),At.addEventListener(kn.needkey,Zn),At.addEventListener(kn.keymessage,Zn),At.addEventListener(kn.keyadded,Zn),Rn.trigger(on.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(cn){if(!Yt)throw new Error("Can not create sessions until you have selected a key system");if(In||mn.length===0){var bn={sessionId:null,keyId:cn.keyId,initData:cn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return zt.push(bn),At[kn.generateKeyRequest](Yt.systemString,new Uint8Array(cn.initData)),bn}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(cn,bn){var Jn=cn.sessionId;if(Mt.isClearKey(Yt))for(var ar=0;ar<bn.keyPairs.length;ar++)At[kn.addKey](Yt.systemString,bn.keyPairs[ar].key,bn.keyPairs[ar].keyID,Jn);else At[kn.addKey](Yt.systemString,new Uint8Array(bn),new Uint8Array(cn.initData),Jn);Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Ur,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Er,reset:Er},an=Bn.getLogger(sn),At=null,Yt=null,zt=[],mn=[],Mt=Tt(Cn).getInstance(),Zn={handleEvent:function(cn){var bn=null;switch(cn.type){case kn.needkey:var Jn=ArrayBuffer.isView(cn.initData)?cn.initData.buffer:cn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(Jn,"cenc")});break;case kn.keyerror:if((bn=Vn(mn,cn.sessionId))||(bn=Vn(zt,cn.sessionId)),bn){var ar=_.MEDIA_KEYERR_CODE,br="";switch(cn.errorCode.code){case 1:ar=_.MEDIA_KEYERR_UNKNOWN_CODE,br+="MEDIA_KEYERR_UNKNOWN - "+_.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:ar=_.MEDIA_KEYERR_CLIENT_CODE,br+="MEDIA_KEYERR_CLIENT - "+_.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:ar=_.MEDIA_KEYERR_SERVICE_CODE,br+="MEDIA_KEYERR_SERVICE - "+_.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:ar=_.MEDIA_KEYERR_OUTPUT_CODE,br+="MEDIA_KEYERR_OUTPUT - "+_.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:ar=_.MEDIA_KEYERR_HARDWARECHANGE_CODE,br+="MEDIA_KEYERR_HARDWARECHANGE - "+_.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:ar=_.MEDIA_KEYERR_DOMAIN_CODE,br+="MEDIA_KEYERR_DOMAIN - "+_.MEDIA_KEYERR_DOMAIN_MESSAGE}br+="  System Code = "+cn.systemCode,Rn.trigger(on.KEY_ERROR,{error:new I.Z(ar,br,bn)})}else an.error("No session token found for key error");break;case kn.keyadded:(bn=Vn(mn,cn.sessionId))||(bn=Vn(zt,cn.sessionId)),bn?(an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED,{data:bn})):an.debug("No session token found for key added");break;case kn.keymessage:if((In=cn.sessionId!==null&&cn.sessionId!==void 0)?!(bn=Vn(mn,cn.sessionId))&&zt.length>0&&(bn=zt.shift(),mn.push(bn),bn.sessionId=cn.sessionId,Rn.trigger(on.KEY_SESSION_CREATED,{data:bn})):zt.length>0&&(bn=zt.shift(),mn.push(bn),zt.length!==0&&er.error(new I.Z(_.MEDIA_KEY_MESSAGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),bn){var kr=ArrayBuffer.isView(cn.message)?cn.message.buffer:cn.message;bn.keyMessage=kr,Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(bn,kr,cn.defaultURL)})}else an.warn("No session token found for key message")}}},sn}Ti.__dashjs_factory_name="ProtectionModel_01b";var Di=dashjs.FactoryMaker.getClassFactory(Ti),zi=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],to=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Si(){var tn,sn=this.context;function an(At,Yt){for(var Mt=0;Mt<Yt.length;Mt++){var zt=Yt[Mt];if(typeof At[zt[Object.keys(zt)[0]]]=="function")return zt}return null}return tn={createProtectionSystem:function(At){var Yt=null,Mt=Tt(sn).getInstance();Mt.setConfig({debug:At.debug,BASE64:At.BASE64,settings:At.settings}),Mt.initialize();var zt=function(mn){var In=mn.debug,Zn=In.getLogger(tn),Cn=mn.eventBus,Rn=mn.errHandler,on=mn.videoModel?mn.videoModel.getElement():null;return on&&on.onencrypted===void 0||on&&on.mediaKeys===void 0?an(on,to)?(Zn.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),eo(sn).create({debug:In,eventBus:Cn,events:mn.events,api:an(on,to)})):an(on,zi)?(Zn.info("EME detected on this user agent! (ProtectionModel_01b)"),Di(sn).create({debug:In,eventBus:Cn,errHandler:Rn,events:mn.events,api:an(on,zi)})):(Zn.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Zn.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Ji(sn).create({debug:In,eventBus:Cn,events:mn.events}))}(At);return!Yt&&zt&&(Yt=ce(sn).create({protectionModel:zt,protectionKeyController:Mt,eventBus:At.eventBus,debug:At.debug,events:At.events,BASE64:At.BASE64,constants:At.constants,cmcdModel:At.cmcdModel,customParametersModel:At.customParametersModel,settings:At.settings}),At.capabilities.setEncryptedMediaSupported(!0)),Yt}}}Si.__dashjs_factory_name="Protection";var Qn=dashjs.FactoryMaker.getClassFactory(Si);Qn.events=Ot,Qn.errors=_,dashjs.FactoryMaker.updateClassFactory(Si.__dashjs_factory_name,Qn);var Pu=Qn},2068:function(b,g,w){var F=w(5448),R={DEFAULT:.5,STRONG:1,WEAK:0};function y(D,m,T){var U,x;return U=D===void 0?-1:D,x=function(_){var I=R.DEFAULT;return _!==R.DEFAULT&&_!==R.STRONG&&_!==R.WEAK||(I=_),I}(T),{quality:U,reason:m===void 0?null:m,priority:x}}y.__dashjs_factory_name="SwitchRequest";var v=F.Z.getClassFactory(y);v.NO_CHANGE=-1,v.PRIORITY=R,F.Z.updateClassFactory(y.__dashjs_factory_name,v),g.Z=v},1767:function(b,g,w){var F=w(5628),R=w(6535),y=w(7423),v=w(895),D=w(6070),m=w(3112),T=w(1914),U=w(5435),x=w(5448),_=w(2068),I=w(3393),C="qualitySwitchRules",j="abandonFragmentRules";function z(W){W=W||{};var ue,N,X=this.context,ce=W.mediaPlayerModel,oe=W.customParametersModel,de=W.dashMetrics,Ce=W.settings;function Je(je){return je.filter(function(nt){return nt.quality>_.Z.NO_CHANGE})}function Te(je){var nt,ct,Ie,Ye,mt,xe={},We=null;if(je.length!==0){for(xe[_.Z.PRIORITY.STRONG]={quality:_.Z.NO_CHANGE,reason:null},xe[_.Z.PRIORITY.WEAK]={quality:_.Z.NO_CHANGE,reason:null},xe[_.Z.PRIORITY.DEFAULT]={quality:_.Z.NO_CHANGE,reason:null},nt=0,ct=je.length;nt<ct;nt+=1)(Ie=je[nt]).quality!==_.Z.NO_CHANGE&&(xe[Ie.priority].quality===_.Z.NO_CHANGE||xe[Ie.priority].quality>Ie.quality)&&(xe[Ie.priority].quality=Ie.quality,xe[Ie.priority].reason=Ie.reason||null);return xe[_.Z.PRIORITY.WEAK].quality!==_.Z.NO_CHANGE&&(We=xe[_.Z.PRIORITY.WEAK]),xe[_.Z.PRIORITY.DEFAULT].quality!==_.Z.NO_CHANGE&&(We=xe[_.Z.PRIORITY.DEFAULT]),xe[_.Z.PRIORITY.STRONG].quality!==_.Z.NO_CHANGE&&(We=xe[_.Z.PRIORITY.STRONG]),We&&(Ye=We.quality,mt=We.reason),(0,_.Z)(X).create(Ye,mt)}}return{initialize:function(){ue=[],N=[],Ce.get().streaming.abr.useDefaultABRRules&&(Ce.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_L2A?ue.push((0,T.Z)(X).create({dashMetrics:de,settings:Ce})):Ce.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_LoLP?ue.push((0,U.Z)(X).create({dashMetrics:de})):(ue.push((0,m.Z)(X).create({dashMetrics:de,mediaPlayerModel:ce,settings:Ce})),ue.push((0,F.Z)(X).create({dashMetrics:de})),Ce.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&ue.push((0,R.Z)(X).create({dashMetrics:de,settings:Ce})),Ce.get().streaming.abr.additionalAbrRules.switchHistoryRule&&ue.push((0,D.Z)(X).create()),Ce.get().streaming.abr.additionalAbrRules.droppedFramesRule&&ue.push((0,v.Z)(X).create()),Ce.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&N.push((0,y.Z)(X).create({dashMetrics:de,mediaPlayerModel:ce,settings:Ce})))),oe.getAbrCustomRules().forEach(function(je){je.type===C&&ue.push(je.rule(X).create()),je.type===j&&N.push(je.rule(X).create())})},reset:function(){[ue,N].forEach(function(je){je&&je.length&&je.forEach(function(nt){return nt.reset&&nt.reset()})}),ue=[],N=[]},getMaxQuality:function(je){return Te(Je(ue.map(function(nt){return nt.getMaxIndex(je)})))||(0,_.Z)(X).create()},getMinSwitchRequest:Te,shouldAbandonFragment:function(je,nt){var ct=Te(Je(N.map(function(Ie){return Ie.shouldAbandon(je,nt)})));return ct&&(ct.reason.forceAbandon=!0),ct||(0,_.Z)(X).create()},getQualitySwitchRules:function(){return ue}}}z.__dashjs_factory_name="ABRRulesCollection";var $=x.Z.getClassFactory(z);$.QUALITY_SWITCH_RULES=C,$.ABANDON_FRAGMENT_RULES=j,x.Z.updateSingletonFactory(z.__dashjs_factory_name,$),g.Z=$},7423:function(b,g,w){var F=w(2068),R=w(5448),y=w(6398);function v(D){D=D||{};var m,T,U,x,_,I=this.context,C=D.mediaPlayerModel,j=D.dashMetrics,z=D.settings;function $(){U={},x={},_=[]}return m={shouldAbandon:function(W){var ue=(0,F.Z)(I).create(F.Z.NO_CHANGE,{name:v.__dashjs_factory_name});if(!(W&&W.hasOwnProperty("getMediaInfo")&&W.hasOwnProperty("getMediaType")&&W.hasOwnProperty("getCurrentRequest")&&W.hasOwnProperty("getRepresentationInfo")&&W.hasOwnProperty("getAbrController")))return ue;var N,X,ce=W.getMediaInfo(),oe=W.getMediaType(),de=W.getStreamInfo(),Ce=de?de.id:null,Je=W.getCurrentRequest();if(!isNaN(Je.index)){N=oe,X=Je.index,U[N]=U[N]||{},U[N][X]=U[N][X]||{};var Te=C.getStableBufferTime();if(j.getCurrentBufferLevel(oe)>Te)return ue;var je=U[oe][Je.index];if(je===null||Je.firstByteDate===null||x.hasOwnProperty(je.id))return ue;if(je.firstByteTime===void 0&&(_[oe]=[],je.firstByteTime=Je.firstByteDate.getTime(),je.segmentDuration=Je.duration,je.bytesTotal=Je.bytesTotal,je.id=Je.index),je.bytesLoaded=Je.bytesLoaded,je.elapsedTime=new Date().getTime()-je.firstByteTime,je.bytesLoaded>0&&je.elapsedTime>0&&function(it,qt){_[it]=_[it]||[],_[it].push(qt)}(oe,Math.round(8*je.bytesLoaded/je.elapsedTime)),_[oe].length>=z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&je.elapsedTime>z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&je.bytesLoaded<je.bytesTotal){var nt=_[oe].reduce(function(it,qt){return it+qt},0);if(je.measuredBandwidthInKbps=Math.round(nt/_[oe].length),je.estimatedTimeOfDownload=+(8*je.bytesTotal/je.measuredBandwidthInKbps/1e3).toFixed(2),je.estimatedTimeOfDownload<je.segmentDuration*z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||W.getRepresentationInfo().quality===0)return ue;if(!x.hasOwnProperty(je.id)){var ct=W.getAbrController(),Ie=je.bytesTotal-je.bytesLoaded,Ye=ct.getBitrateList(ce),mt=ct.getQualityForBitrate(ce,je.measuredBandwidthInKbps*z.get().streaming.abr.bandwidthSafetyFactor,Ce),xe=ct.getMinAllowedIndexFor(oe,Ce),We=xe!==void 0?Math.max(xe,mt):mt;Ie>je.bytesTotal*Ye[We].bitrate/Ye[ct.getQualityFor(oe,Ce)].bitrate&&(ue.quality=We,ue.reason.throughput=je.measuredBandwidthInKbps,ue.reason.fragmentID=je.id,ue.reason.rule=this.getClassName(),x[je.id]=je,T.debug("["+oe+"] frag id",je.id," is asking to abandon and switch to quality to ",We," measured bandwidth was",je.measuredBandwidthInKbps),delete U[oe][je.id])}}else je.bytesLoaded===je.bytesTotal&&delete U[oe][je.id]}return ue},reset:$},T=(0,y.Z)(I).getInstance().getLogger(m),$(),m}v.__dashjs_factory_name="AbandonRequestsRule",g.Z=R.Z.getClassFactory(v)},3112:function(b,g,w){var F=w(3860),R=w(2068),y=w(5448),v=w(7855),D=w(5595),m=w(8512),T=w(6398),U=w(8825),x=w(3393),_=10;function I(C){C=C||{};var j,z,$,W=this.context,ue=C.dashMetrics,N=C.mediaPlayerModel,X=(0,D.Z)(W).getInstance();function ce(We,it,qt){var Ft=qt.reduce(function(Re,re,Be){return re>qt[Re]?Be:Re},0);if(Ft===0)return null;var gt=Math.max(We,_+2*it.length),St=(qt[Ft]-1)/(gt/_-1);return{gp:St,Vp:_/St}}function oe(We){We.placeholderBuffer=0,We.mostAdvancedSegmentStart=NaN,We.lastSegmentWasReplacement=!1,We.lastSegmentStart=NaN,We.lastSegmentDurationS=NaN,We.lastSegmentRequestTimeMs=NaN,We.lastSegmentFinishTimeMs=NaN}function de(We,it){var qt=N.getStableBufferTime();if(We.stableBufferTime!==qt){var Ft=ce(qt,We.bitrates,We.utilities);if(Ft.Vp!==We.Vp||Ft.gp!==We.gp){var gt=ue.getCurrentBufferLevel(it),St=gt+We.placeholderBuffer;St-=_,St*=Ft.Vp/We.Vp,St+=_,We.stableBufferTime=qt,We.Vp=Ft.Vp,We.gp=Ft.gp,We.placeholderBuffer=Math.max(0,St-gt)}}}function Ce(We,it){return We.Vp*(We.utilities[it]+We.gp)}function Je(We,it){for(var qt=We.bitrates[it],Ft=We.utilities[it],gt=0,St=it-1;St>=0;--St)if(We.utilities[St]<We.utilities[it]){var Re=We.bitrates[St],re=We.utilities[St],Be=We.Vp*(We.gp+(qt*re-Re*Ft)/(qt-Re));gt=Math.max(gt,Be)}return gt}function Te(We){var it=We.mediaType===x.Z.AUDIO?[x.Z.AUDIO]:$;for(var qt in it)$.hasOwnProperty(qt)&&$[qt].state===2&&($[qt].placeholderBuffer=0)}function je(){for(var We in $)if($.hasOwnProperty(We)){var it=$[We];it.state!==0&&(it.state=1,oe(it))}}function nt(We){if(We&&We.chunk&&We.chunk.mediaInfo){var it=$[We.chunk.mediaInfo.type];if(it&&it.state!==0){var qt=We.chunk.start;isNaN(it.mostAdvancedSegmentStart)||qt>it.mostAdvancedSegmentStart?(it.mostAdvancedSegmentStart=qt,it.lastSegmentWasReplacement=!1):it.lastSegmentWasReplacement=!0,it.lastSegmentStart=qt,it.lastSegmentDurationS=We.chunk.duration,it.lastQuality=We.chunk.quality,Ie(it,We.chunk.mediaInfo.type)}}}function ct(We){if(We&&We.metric===F.Z.HTTP_REQUEST&&We.value&&We.value.type===v.w.MEDIA_SEGMENT_TYPE&&We.value.trace&&We.value.trace.length){var it=$[We.mediaType];it&&it.state!==0&&(it.lastSegmentRequestTimeMs=We.value.trequest.getTime(),it.lastSegmentFinishTimeMs=We.value._tfinish.getTime(),Ie(it,We.mediaType))}}function Ie(We,it){if(!isNaN(We.lastSegmentStart)&&!isNaN(We.lastSegmentRequestTimeMs)&&!isNaN(We.placeholderBuffer)){if(We.placeholderBuffer*=.99,!isNaN(We.lastSegmentFinishTimeMs)){var qt=ue.getCurrentBufferLevel(it)+.001*(We.lastSegmentFinishTimeMs-We.lastSegmentRequestTimeMs),Ft=Ce(We,We.lastQuality),gt=Math.max(0,Ft-qt);We.placeholderBuffer=Math.min(gt,We.placeholderBuffer)}We.lastSegmentWasReplacement&&!isNaN(We.lastSegmentDurationS)&&(We.placeholderBuffer+=We.lastSegmentDurationS),We.lastSegmentStart=NaN,We.lastSegmentRequestTimeMs=NaN}}function Ye(We){if(We){var it=$[We.mediaType];it&&it.state!==0&&(it.abrQuality=We.newQuality)}}function mt(We){if(We){var it=$[We.mediaType];if(it&&it.state!==0){var qt,Ft=ue.getCurrentBufferLevel(We.mediaType);qt=it.abrQuality>0?Je(it,it.abrQuality):_;var gt=Math.max(0,qt-Ft);it.placeholderBuffer=Math.min(it.placeholderBuffer,gt)}}}function xe(){$={}}return j={getMaxIndex:function(We){var it=(0,R.Z)(W).create();if(!(We&&We.hasOwnProperty("getMediaInfo")&&We.hasOwnProperty("getMediaType")&&We.hasOwnProperty("getScheduleController")&&We.hasOwnProperty("getStreamInfo")&&We.hasOwnProperty("getAbrController")&&We.hasOwnProperty("useBufferOccupancyABR")))return it;var qt=We.getMediaInfo(),Ft=We.getMediaType(),gt=We.getScheduleController(),St=We.getStreamInfo(),Re=We.getAbrController(),re=Re.getThroughputHistory(),Be=St?St.id:null,O=St&&St.manifestInfo&&St.manifestInfo.isDynamic,M=We.useBufferOccupancyABR();if(it.reason=it.reason||{},!M)return it;gt.setTimeToLoadDelay(0);var q=function(tt){var ft=tt.getMediaType(),Et=$[ft];return Et?Et.state!==0&&de(Et,ft):(Et=function(Tt){var Ct={},hn=Tt.getMediaInfo().bitrateList.map(function(Un){return Un.bandwidth}),Qt=function(Un){return Un.map(function(gr){return Math.log(gr)})}(hn);Qt=Qt.map(function(Un){return Un-Qt[0]+1});var nn=N.getStableBufferTime(),Ot=ce(nn,hn,Qt);return Ot?(Ct.state=1,Ct.bitrates=hn,Ct.utilities=Qt,Ct.stableBufferTime=nn,Ct.Vp=Ot.Vp,Ct.gp=Ot.gp,Ct.lastQuality=0,oe(Ct)):Ct.state=0,Ct}(tt),$[ft]=Et),Et}(We);if(q.state===0)return it;var K,ye=ue.getCurrentBufferLevel(Ft),he=re.getAverageThroughput(Ft,O),Ke=re.getSafeAverageThroughput(Ft,O),wt=re.getAverageLatency(Ft);if(it.reason.state=q.state,it.reason.throughput=he,it.reason.latency=wt,isNaN(he))return it;switch(q.state){case 1:K=Re.getQualityForBitrate(qt,Ke,Be,wt),it.quality=K,it.reason.throughput=Ke,q.placeholderBuffer=Math.max(0,Je(q,K)-ye),q.lastQuality=K,!isNaN(q.lastSegmentDurationS)&&ye>=q.lastSegmentDurationS&&(q.state=2);break;case 2:(function(tt,ft){var Et=Date.now();if(isNaN(tt.lastSegmentFinishTimeMs)){if(!isNaN(tt.lastCallTimeMs)){var Tt=.001*(Et-tt.lastCallTimeMs);tt.placeholderBuffer+=Math.max(0,Tt)}}else{var Ct=.001*(Et-tt.lastSegmentFinishTimeMs);tt.placeholderBuffer+=Math.max(0,Ct)}tt.lastCallTimeMs=Et,tt.lastSegmentStart=NaN,tt.lastSegmentRequestTimeMs=NaN,tt.lastSegmentFinishTimeMs=NaN,de(tt,ft)})(q,Ft),K=function(tt,ft){for(var Et=tt.bitrates.length,Tt=NaN,Ct=NaN,hn=0;hn<Et;++hn){var Qt=(tt.Vp*(tt.utilities[hn]+tt.gp)-ft)/tt.bitrates[hn];(isNaN(Ct)||Qt>=Ct)&&(Ct=Qt,Tt=hn)}return Tt}(q,ye+q.placeholderBuffer);var st=Re.getQualityForBitrate(qt,Ke,Be,wt);K>q.lastQuality&&K>st&&(K=Math.max(st,q.lastQuality));var at=Math.max(0,ye+q.placeholderBuffer-Ce(q,K));at<=q.placeholderBuffer?(q.placeholderBuffer-=at,at=0):(at-=q.placeholderBuffer,q.placeholderBuffer=0,K<Re.getMaxAllowedIndexFor(Ft,Be)?gt.setTimeToLoadDelay(1e3*at):at=0),it.quality=K,it.reason.throughput=he,it.reason.latency=wt,it.reason.bufferLevel=ye,it.reason.placeholderBuffer=q.placeholderBuffer,it.reason.delay=at,q.lastQuality=K;break;default:z.debug("BOLA ABR rule invoked in bad state."),it.quality=Re.getQualityForBitrate(qt,Ke,Be,wt),it.reason.state=q.state,it.reason.throughput=Ke,it.reason.latency=wt,q.state=1,oe(q)}return it},reset:function(){xe(),X.off(U.Z.BUFFER_EMPTY,Te,j),X.off(U.Z.PLAYBACK_SEEKING,je,j),X.off(U.Z.METRIC_ADDED,ct,j),X.off(U.Z.QUALITY_CHANGE_REQUESTED,Ye,j),X.off(U.Z.FRAGMENT_LOADING_ABANDONED,mt,j),X.off(m.Z.MEDIA_FRAGMENT_LOADED,nt,j)}},z=(0,T.Z)(W).getInstance().getLogger(j),xe(),X.on(U.Z.BUFFER_EMPTY,Te,j),X.on(U.Z.PLAYBACK_SEEKING,je,j),X.on(U.Z.METRIC_ADDED,ct,j),X.on(U.Z.QUALITY_CHANGE_REQUESTED,Ye,j),X.on(U.Z.FRAGMENT_LOADING_ABANDONED,mt,j),X.on(m.Z.MEDIA_FRAGMENT_LOADED,nt,j),j}I.__dashjs_factory_name="BolaRule",g.Z=y.Z.getClassFactory(I)},895:function(b,g,w){var F=w(5448),R=w(2068),y=w(6398);function v(){var D,m,T=this.context;return D={getMaxIndex:function(U){var x=(0,R.Z)(T).create();if(!U||!U.hasOwnProperty("getDroppedFramesHistory"))return x;var _=U.getDroppedFramesHistory(),I=U.getStreamInfo().id;if(_){var C=_.getFrameHistory(I);if(!C||C.length===0)return x;for(var j=0,z=0,$=R.Z.NO_CHANGE,W=1;W<C.length;W++)if(C[W]&&(j=C[W].droppedVideoFrames,(z=C[W].totalVideoFrames)>375&&j/z>.15)){$=W-1,m.debug("index: "+$+" Dropped Frames: "+j+" Total Frames: "+z);break}return(0,R.Z)(T).create($,{droppedFrames:j})}return x}},m=(0,y.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="DroppedFramesRule",g.Z=F.Z.getClassFactory(v)},6535:function(b,g,w){var F=w(5595),R=w(8512),y=w(5448),v=w(6398),D=w(2068),m=w(3393),T=w(3860),U=w(8825);function x(_){_=_||{};var I,C,j,z=this.context,$=(0,F.Z)(z).getInstance(),W=_.dashMetrics;function ue(){(j={})[m.Z.VIDEO]={ignoreCount:2},j[m.Z.AUDIO]={ignoreCount:2}}function N(){ue()}function X(ce){isNaN(ce.startTime)||ce.mediaType!==m.Z.AUDIO&&ce.mediaType!==m.Z.VIDEO||j[ce.mediaType].ignoreCount>0&&j[ce.mediaType].ignoreCount--}return I={getMaxIndex:function(ce){var oe=(0,D.Z)(z).create();if(!ce||!ce.hasOwnProperty("getMediaType"))return oe;(function(){if(!W||!W.hasOwnProperty("getCurrentBufferLevel")||!W.hasOwnProperty("getCurrentBufferState"))throw new Error(m.Z.MISSING_CONFIG_ERROR)})();var de=ce.getMediaType(),Ce=W.getCurrentBufferState(de),Je=ce.getRepresentationInfo().fragmentDuration,Te=ce.getStreamInfo(),je=Te?Te.id:null,nt=ce.getScheduleController(),ct=Te&&Te.manifestInfo&&Te.manifestInfo.isDynamic;if(function(Ft,gt){return!Ft&&j[gt].ignoreCount>0}(nt.getPlaybackController().getLowLatencyModeEnabled(),de)||!Je)return oe;if(Ce&&Ce.state===T.Z.BUFFER_EMPTY)C.debug("["+de+"] Switch to index 0; buffer is empty."),oe.quality=0,oe.reason="InsufficientBufferRule: Buffer is empty";else{var Ie=ce.getMediaInfo(),Ye=ce.getAbrController(),mt=Ye.getThroughputHistory(),xe=W.getCurrentBufferLevel(de),We=mt.getAverageThroughput(de,ct),it=mt.getAverageLatency(de),qt=We*(xe/Je)*.5;oe.quality=Ye.getQualityForBitrate(Ie,qt,je,it),oe.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return oe},reset:function(){ue(),$.off(U.Z.PLAYBACK_SEEKING,N,I),$.off(R.Z.BYTES_APPENDED_END_FRAGMENT,X,I)}},C=(0,v.Z)(z).getInstance().getLogger(I),ue(),$.on(U.Z.PLAYBACK_SEEKING,N,I),$.on(R.Z.BYTES_APPENDED_END_FRAGMENT,X,I),I}x.__dashjs_factory_name="InsufficientBufferRule",g.Z=y.Z.getClassFactory(x)},1914:function(b,g,w){var F=w(3860),R=w(2068),y=w(5448),v=w(7855),D=w(5595),m=w(8512),T=w(6398),U=w(3393);function x(_){_=_||{};var I,C,j,z,$=this.context,W=_.dashMetrics,ue=(0,D.Z)($).getInstance();function N(je){je.placeholderBuffer=0,je.mostAdvancedSegmentStart=NaN,je.lastSegmentWasReplacement=!1,je.lastSegmentStart=NaN,je.lastSegmentDurationS=NaN,je.lastSegmentRequestTimeMs=NaN,je.lastSegmentFinishTimeMs=NaN,je.lastSegmentUrl=""}function X(){for(var je in C)if(C.hasOwnProperty(je)){var nt=C[je];nt.state!==0&&(nt.state=1,N(nt))}}function ce(je){if(je&&je.chunk&&je.chunk.mediaInfo){var nt=C[je.chunk.mediaInfo.type],ct=j[je.chunk.mediaInfo.type];if(nt&&nt.state!==0){var Ie=je.chunk.start;isNaN(nt.mostAdvancedSegmentStart)||Ie>nt.mostAdvancedSegmentStart?(nt.mostAdvancedSegmentStart=Ie,nt.lastSegmentWasReplacement=!1):nt.lastSegmentWasReplacement=!0,nt.lastSegmentStart=Ie,nt.lastSegmentDurationS=je.chunk.duration,nt.lastQuality=je.chunk.quality,de(nt,ct)}}}function oe(je){if(je&&je.metric===F.Z.HTTP_REQUEST&&je.value&&je.value.type===v.w.MEDIA_SEGMENT_TYPE&&je.value.trace&&je.value.trace.length){var nt=C[je.mediaType],ct=j[je.mediaType];nt&&nt.state!==0&&(nt.lastSegmentRequestTimeMs=je.value.trequest.getTime(),nt.lastSegmentFinishTimeMs=je.value._tfinish.getTime(),de(nt,ct))}}function de(je,nt){isNaN(je.lastSegmentStart)||isNaN(je.lastSegmentRequestTimeMs)||(nt.segment_request_start_s=.001*je.lastSegmentRequestTimeMs,nt.segment_download_finish_s=.001*je.lastSegmentFinishTimeMs,je.lastSegmentStart=NaN,je.lastSegmentRequestTimeMs=NaN)}function Ce(je){if(je&&je.mediaType){var nt=C[je.mediaType];nt&&nt.state!==0&&(nt.abrQuality=je.newQuality)}}function Je(je,nt){if(je.length!==nt.length)return-1;for(var ct=0,Ie=0;Ie<je.length;Ie++)ct+=je[Ie]*nt[Ie];return ct}function Te(){C={},j={}}return I={getMaxIndex:function(je){var nt,ct=(0,R.Z)($).create(),Ie=Math.pow(4,.99),Ye=Math.max(Math.pow(4,1),Ie*Math.sqrt(4)),mt=je.getMediaInfo(),xe=je.getMediaType(),We=mt.bitrateList.map(function(Ot){return Ot.bandwidth}),it=We.length,qt=je.getScheduleController(),Ft=je.getStreamInfo(),gt=je.getAbrController(),St=gt.getThroughputHistory(),Re=Ft&&Ft.manifestInfo&&Ft.manifestInfo.isDynamic,re=je.useL2AABR(),Be=W.getCurrentBufferLevel(xe,!0),O=St.getSafeAverageThroughput(xe,Re),M=St.getAverageThroughput(xe,Re),q=St.getAverageLatency(xe),K=je.getVideoModel().getPlaybackRate();if(!(je&&je.hasOwnProperty("getMediaInfo")&&je.hasOwnProperty("getMediaType")&&je.hasOwnProperty("getScheduleController")&&je.hasOwnProperty("getStreamInfo")&&je.hasOwnProperty("getAbrController")&&je.hasOwnProperty("useL2AABR"))||(ct.reason=ct.reason||{},!re||xe===U.Z.AUDIO))return ct;qt.setTimeToLoadDelay(0);var ye=function(Ot){var Un=Ot.getMediaType(),gr=C[Un];return gr||(gr=function(Or){var dr={},ei=Or.getMediaInfo(),Ji=ei.bitrateList.map(function(Lr){return Lr.bandwidth/1e3});return dr.state=1,dr.bitrates=Ji,dr.lastQuality=0,function(Lr){Lr&&Lr.type&&(j[Lr.type]={},j[Lr.type].w=[],j[Lr.type].prev_w=[],j[Lr.type].Q=0,j[Lr.type].segment_request_start_s=0,j[Lr.type].segment_download_finish_s=0,j[Lr.type].B_target=1.5)}(ei),N(dr),dr}(Ot),C[Un]=gr),gr}(je);if(ye.state===0)return ct;var he=j[xe];if(!he||(ct.reason.state=ye.state,ct.reason.throughput=M,ct.reason.latency=q,isNaN(M)))return ct;switch(ye.state){case 1:if(nt=gt.getQualityForBitrate(mt,O,Ft.id,q),ct.quality=nt,ct.reason.throughput=O,ye.lastQuality=nt,!isNaN(ye.lastSegmentDurationS)&&Be>=he.B_target){ye.state=2,he.Q=Ie;for(var Ke=0;Ke<it;++Ke)Ke===ye.lastQuality?he.prev_w[Ke]=1:he.prev_w[Ke]=0}break;case 2:var wt=[],st=W.getCurrentHttpRequest(xe).trace.reduce(function(Ot,Un){return Ot+Un.d},0),at=W.getCurrentHttpRequest(xe).trace.reduce(function(Ot,Un){return Ot+Un.b[0]},0),tt=Math.round(8*at/st),ft=W.getCurrentHttpRequest(xe);if(tt<1&&(tt=1),ft.url===ye.lastSegmentUrl||ft.type===v.w.INIT_SEGMENT_TYPE)nt=ye.lastQuality;else{for(var Et=ye.lastSegmentDurationS,Tt=1,Ct=0;Ct<it;++Ct)We[Ct]=We[Ct]/1e3,K*We[Ct]>tt&&(Tt=-1),he.w[Ct]=he.prev_w[Ct]+Tt*(Et/(2*Ye))*((he.Q+Ie)*(K*We[Ct]/tt));he.w=function(Ot){for(var Un=Ot.length,gr=!1,Or=[],dr=0;dr<Un;++dr)Or[dr]=Ot[dr];for(var ei=Ot.sort(function(zi,to){return to-zi}),Ji=0,Lr=0,eo=[],Ti=0;Ti<Un-1;++Ti)if((Lr=((Ji+=ei[Ti])-1)/(Ti+1))>=ei[Ti+1]){gr=!0;break}gr||(Lr=(Ji+ei[Un-1]-1)/Un);for(var Di=0;Di<Un;++Di)eo[Di]=Math.max(Or[Di]-Lr,0);return eo}(he.w);for(var hn=0;hn<it;++hn)wt[hn]=he.w[hn]-he.prev_w[hn],he.prev_w[hn]=he.w[hn];he.Q=Math.max(0,he.Q-Et+Et*K*((Je(We,he.prev_w)+Je(We,wt))/tt));for(var Qt=[],nn=0;nn<it;++nn)Qt[nn]=Math.abs(We[nn]-Je(he.w,We));(nt=Qt.indexOf(Math.min.apply(Math,Qt)))>ye.lastQuality&&We[ye.lastQuality+1]<=tt&&(nt=ye.lastQuality+1),We[nt]>=tt&&(he.Q=2*Math.max(Ie,he.Q)),ye.lastSegmentUrl=ft.url}ct.quality=nt,ct.reason.throughput=M,ct.reason.latency=q,ct.reason.bufferLevel=Be,ye.lastQuality=ct.quality;break;default:z.debug("L2A ABR rule invoked in bad state."),ct.quality=gt.getQualityForBitrate(mt,O,Ft.id,q),ct.reason.state=ye.state,ct.reason.throughput=O,ct.reason.latency=q,ye.state=1,N(ye)}return ct},reset:function(){Te(),ue.off(m.Z.PLAYBACK_SEEKING,X,I),ue.off(m.Z.MEDIA_FRAGMENT_LOADED,ce,I),ue.off(m.Z.METRIC_ADDED,oe,I),ue.off(m.Z.QUALITY_CHANGE_REQUESTED,Ce,I)}},z=(0,T.Z)($).getInstance().getLogger(I),Te(),ue.on(m.Z.PLAYBACK_SEEKING,X,I),ue.on(m.Z.MEDIA_FRAGMENT_LOADED,ce,I),ue.on(m.Z.METRIC_ADDED,oe,I),ue.on(m.Z.QUALITY_CHANGE_REQUESTED,Ce,I),I}x.__dashjs_factory_name="L2ARule",g.Z=y.Z.getClassFactory(x)},6070:function(b,g,w){var F=w(5448),R=w(6398),y=w(2068);function v(){var D,m,T=this.context;return D={getMaxIndex:function(U){for(var x=U?U.getSwitchHistory():null,_=x?x.getSwitchRequests():[],I=0,C=0,j=0,z=(0,y.Z)(T).create(),$=0;$<_.length;$++)if(_[$]!==void 0&&(I+=_[$].drops,C+=_[$].noDrops,j+=_[$].dropSize,I+C>=6&&I/C>.075)){z.quality=$>0&&_[$].drops>0?$-1:$,z.reason={index:z.quality,drops:I,noDrops:C,dropSize:j},m.debug("Switch history rule index: "+z.quality+" samples: "+(I+C)+" drops: "+I);break}return z}},m=(0,R.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="SwitchHistoryRule",g.Z=F.Z.getClassFactory(v)},5628:function(b,g,w){var F=w(5448),R=w(2068),y=w(3393),v=w(3860);function D(m){m=m||{};var T=this.context,U=m.dashMetrics;return{getMaxIndex:function(x){var _=(0,R.Z)(T).create();if(!(x&&x.hasOwnProperty("getMediaInfo")&&x.hasOwnProperty("getMediaType")&&x.hasOwnProperty("useBufferOccupancyABR")&&x.hasOwnProperty("getAbrController")&&x.hasOwnProperty("getScheduleController")))return _;(function(){if(!U||!U.hasOwnProperty("getCurrentBufferState"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var I=x.getMediaInfo(),C=x.getMediaType(),j=U.getCurrentBufferState(C),z=x.getScheduleController(),$=x.getAbrController(),W=x.getStreamInfo(),ue=W?W.id:null,N=W&&W.manifestInfo?W.manifestInfo.isDynamic:null,X=$.getThroughputHistory(),ce=X.getSafeAverageThroughput(C,N),oe=X.getAverageLatency(C),de=x.useBufferOccupancyABR();return isNaN(ce)||!j||de||$.getAbandonmentStateFor(ue,C)!==v.Z.ABANDON_LOAD&&(j.state===v.Z.BUFFER_LOADED||N)&&(_.quality=$.getQualityForBitrate(I,ce,ue,oe),z.setTimeToLoadDelay(0),_.reason={throughput:ce,latency:oe}),_},reset:function(){}}}D.__dashjs_factory_name="ThroughputRule",g.Z=F.Z.getClassFactory(D)},4722:function(b,g,w){var F=w(5448),R=w(6398);function y(){var v,D,m,T,U,x,_,I,C,j=this.context;function z(){m=null,T=1,U=100,x=0,_=null,I=null,C="dynamic_weight_selection"}function $(){var ce=0;if(m)for(var oe=0;oe<m.length;oe++){var de=m[oe];de.state.throughput>ce&&(ce=de.state.throughput)}return ce}function W(ce,oe,de){var Ce=ce.map(function(Je,Te){return de[Te]*Math.pow(Je-oe[Te],2)}).reduce(function(Je,Te){return Je+Te});return(Ce<0?-1:1)*Math.sqrt(Math.abs(Ce))}function ue(ce,oe){return W([ce.state.throughput,ce.state.latency,ce.state.rebuffer,ce.state.switch],[oe.state.throughput,oe.state.latency,oe.state.rebuffer,oe.state.switch],[1,1,1,1])}function N(ce,oe,de){for(var Ce=0;Ce<oe.length;Ce++){var Je=oe[Ce],Te=ue(Je,ce);X(Je,de,Math.exp(-1*Math.pow(Te,2)/(2*Math.pow(.1,2))))}}function X(ce,oe,de){var Ce=ce.state,Je=[.01,.01,.01,.01];Ce.throughput=Ce.throughput+(oe[0]-Ce.throughput)*Je[0]*de,Ce.latency=Ce.latency+(oe[1]-Ce.latency)*Je[1]*de,Ce.rebuffer=Ce.rebuffer+(oe[2]-Ce.rebuffer)*Je[2]*de,Ce.switch=Ce.switch+(oe[3]-Ce.switch)*Je[3]*de}return v={getNextQuality:function(ce,oe,de,Ce,Je,Te,je){var nt=de,ct=Ce,Ie=oe,Ye=function(he){if(!m){m=[];var Ke=he.bitrateList,wt=[];x=Ke[0].bandwidth,Ke.forEach(function(ft){wt.push(ft.bandwidth),ft.bandwidth<x&&(x=ft.bandwidth)}),tt=wt.map(function(ft){return Math.pow(ft,2)}).reduce(function(ft,Et){return ft+Et}),T=Math.sqrt(tt);for(var st=0;st<Ke.length;st++){var at={qualityIndex:st,bitrate:Ke[st].bandwidth,state:{throughput:Ke[st].bandwidth/T,latency:0,rebuffer:0,switch:0}};m.push(at)}I=function(ft){var Et=[],Tt=function(Pu){for(var tn=[],sn=0;sn<Pu;sn++){var an=[Math.random()*$(),Math.random(),Math.random(),Math.random()];tn.push(an)}return tn}(Math.pow(ft.length,2));Et.push(Tt[0]);for(var Ct=[1,1,1,1],hn=1;hn<ft.length;hn++){for(var Qt=null,nn=null,Ot=0;Ot<Tt.length;Ot++){for(var Un=Tt[Ot],gr=null,Or=0;Or<Et.length;Or++){var dr=W(Un,Et[Or],Ct);(gr===null||dr<gr)&&(gr=dr)}(nn===null||gr>nn)&&(Qt=Un,nn=gr)}Et.push(Qt)}for(var ei=null,Ji=null,Lr=0;Lr<Et.length;Lr++){for(var eo=0,Ti=0;Ti<Et.length;Ti++)Lr!==Ti&&(eo+=W(Et[Lr],Et[Ti],Ct));(ei===null||eo>ei)&&(ei=eo,Ji=Lr)}var Di=[];for(Di.push(Et[Ji]),Et.splice(Ji,1);Et.length>0;){for(var zi=null,to=null,Si=0;Si<Et.length;Si++){var Qn=W(Di[0],Et[Si],Ct);(zi===null||Qn<zi)&&(zi=Qn,to=Si)}Di.push(Et[to]),Et.splice(to,1)}return Di}(m)}var tt;return m}(ce),mt=oe/T;mt>1&&(mt=$()),de/=U,D.debug("getNextQuality called throughput:".concat(mt," latency:").concat(de," bufferSize:").concat(Ce," currentQualityIndex:").concat(Te," playbackRate:").concat(Je));var xe=Ye[Te],We=xe.bitrate*je.getSegmentDuration()/Ie,it=Math.max(0,We-ct);if(ct-We<je.getMinBuffer())return D.debug("Buffer is low for bitrate= ".concat(xe.bitrate," downloadTime=").concat(We," currentBuffer=").concat(ct," rebuffer=").concat(it)),function(he,Ke){var wt=0,st=he;if(m)for(var at=0;at<m.length;at++){var tt=m[at];tt.bitrate<he.bitrate&&tt.bitrate>wt&&Ke>tt.bitrate&&(wt=tt.bitrate,st=tt)}return st}(xe,Ie).qualityIndex;switch(C){case"manual_weight_selection":_=[.4,.4,.4,.4];break;case"random_weight_selection":(function(he){_=function(Ke,wt){for(var st=[],at=Math.sqrt(2/Ke),tt=0;tt<4;tt++)st.push(Math.random()*at);return _=st}(he.length)})(Ye);break;default:(function(he,Ke,wt,st,at,tt,ft){_||(_=I[I.length-1]);var Et=he.findWeightVector(Ke,wt,st,at,tt,ft);Et!==null&&Et!==-1&&(_=Et)})(je,Ye,nt,ct,it,Ie,Je)}for(var qt=null,Ft=null,gt=null,St=0;St<Ye.length;St++){var Re=Ye[St],re=Re.state,Be=[re.throughput,re.latency,re.rebuffer,re.switch],O=_.slice(),M=je.getNextBufferWithBitrate(Re.bitrate,ct,Ie),q=M<je.getMinBuffer();q&&D.debug("Buffer is low for bitrate=".concat(Re.bitrate," downloadTime=").concat(We," currentBuffer=").concat(ct," nextBuffer=").concat(M)),(Re.bitrate>oe-1e4||q)&&Re.bitrate!==x&&(O[0]=100);var K=W(Be,[mt,0,0,0],O);(qt===null||K<qt)&&(qt=K,Ft=Re.qualityIndex,gt=Re)}var ye=Math.abs(xe.bitrate-gt.bitrate)/T;return N(xe,Ye,[mt,de,it,ye]),N(gt,Ye,[mt,0,0,ye]),Ft},reset:function(){z()}},D=(0,R.Z)(j).getInstance().getLogger(v),z(),v}y.__dashjs_factory_name="LearningAbrController",g.Z=F.Z.getClassFactory(y)},5317:function(b,g,w){var F=w(5448),R=w(2298);function y(){var v,D,m,T,U;function x(){D=null,m=null,T=null,U=null}function _(C,j,z,$){var W=new R.Z;return W.type=C,W.weights.bitrateReward=j||1,W.weights.bitrateSwitchPenalty=1,W.weights.rebufferPenalty=z||1e3,W.weights.latencyPenalty=[],W.weights.latencyPenalty.push({threshold:1.1,penalty:.05*$}),W.weights.latencyPenalty.push({threshold:1e8,penalty:.1*z}),W.weights.playbackSpeedPenalty=$||200,W}function I(C,j,z,$,W){W.bitrateWSum+=W.weights.bitrateReward*C,W.lastBitrate&&(W.bitrateSwitchWSum+=W.weights.bitrateSwitchPenalty*Math.abs(C-W.lastBitrate)),W.lastBitrate=C,W.rebufferWSum+=W.weights.rebufferPenalty*j;for(var ue=0;ue<W.weights.latencyPenalty.length;ue++){var N=W.weights.latencyPenalty[ue];if(z<=N.threshold){W.latencyWSum+=N.penalty*z;break}}W.playbackSpeedWSum+=W.weights.playbackSpeedPenalty*Math.abs(1-$),W.totalQoe=W.bitrateWSum-W.bitrateSwitchWSum-W.rebufferWSum-W.latencyWSum-W.playbackSpeedWSum}return v={setupPerSegmentQoe:function(C,j,z){D=_("segment",C,j,z),m=C,T=j,U=z},logSegmentMetrics:function(C,j,z,$){D&&I(C,j,z,$,D)},getPerSegmentQoe:function(){return D},calculateSingleUseQoe:function(C,j,z,$){var W=null;return m&&T&&U&&(W=_("segment",m,T,U)),W?(I(C,j,z,$,W),W.totalQoe):0},reset:function(){x()}},x(),v}y.__dashjs_factory_name="LoLpQoeEvaluator",g.Z=F.Z.getClassFactory(y)},5435:function(b,g,w){var F=w(6398),R=w(5448),y=w(4722),v=w(5317),D=w(2068),m=w(3860),T=w(6523),U=w(3393);function x(_){var I,C,j,z,$=(_=_||{}).dashMetrics,W=this.context;return C={getMaxIndex:function(ue){try{var N=(0,D.Z)(W).create(),X=ue.getMediaInfo().type,ce=ue.getAbrController(),oe=ue.getStreamInfo(),de=ce.getQualityFor(X,oe.id),Ce=ue.getMediaInfo(),Je=$.getCurrentBufferState(X),Te=ue.getScheduleController(),je=$.getCurrentBufferLevel(X,!0),nt=oe&&oe.manifestInfo?oe.manifestInfo.isDynamic:null,ct=Te.getPlaybackController(),Ie=ct.getCurrentLiveLatency();if(!ue.useLoLPABR()||X===U.Z.AUDIO)return N;Ie||(Ie=0);var Ye=ct.getPlaybackRate(),mt=ce.getThroughputHistory().getSafeAverageThroughput(X,nt);if(I.debug("Throughput ".concat(Math.round(mt)," kbps")),isNaN(mt)||!Je||ce.getAbandonmentStateFor(oe.id,X)===m.Z.ABANDON_LOAD)return N;for(var xe=Ce.bitrateList,We=ue.getRepresentationInfo().fragmentDuration,it=xe[0].bandwidth/1e3,qt=xe[xe.length-1].bandwidth/1e3,Ft=0;Ft<xe.length;Ft++){var gt=xe[Ft].bandwidth/1e3;gt>qt?qt=gt:gt<it&&(it=gt)}var St=xe[de].bandwidth/1e3,Re=$.getCurrentHttpRequest(X,!0),re=(Re.tresponse.getTime()-Re.trequest.getTime())/1e3,Be=re>We?re-We:0;z.setupPerSegmentQoe(We,qt,it),z.logSegmentMetrics(St,Be,Ie,Ye);var O=(0,T.Z)(W).create({targetLatency:1.5,bufferMin:.3,segmentDuration:We,qoeEvaluator:z});return N.quality=j.getNextQuality(Ce,1e3*mt,Ie,je,Ye,de,O),N.reason={throughput:mt,latency:Ie},N.priority=D.Z.PRIORITY.STRONG,Te.setTimeToLoadDelay(0),N.quality!==de&&I.debug("[TgcLearningRule]["+X+"] requesting switch to index: ",N.quality,"Average throughput",Math.round(mt),"kbps"),N}catch(M){throw M}},reset:function(){j.reset(),z.reset()}},I=(0,F.Z)(W).getInstance().getLogger(C),j=(0,y.Z)(W).create(),z=(0,v.Z)(W).create(),C}x.__dashjs_factory_name="LoLPRule",g.Z=R.Z.getClassFactory(x)},6523:function(b,g,w){var F=w(5448);function R(y){var v,D,m,T,U=y.targetLatency,x=y.bufferMin,_=y.segmentDuration,I=y.qoeEvaluator;function C(){return _}function j(z,$){var W=C();return $>W?z-W:z+W-$}return v={getMinBuffer:function(){return x},getSegmentDuration:C,getNextBufferWithBitrate:function(z,$,W){return j($,z*_/W)},getNextBuffer:j,findWeightVector:function(z,$,W,ue,N,X){var ce=null,oe=null,de=null,Ce=Math.abs($-m);return z.forEach(function(Je){D.forEach(function(Te){Te[0];var je=Te[1],nt=Te[2],ct=(Te[3],Je.bitrate*_/N),Ie=j(W,ct),Ye=(nt===0?10:1/nt)*Math.max(1e-5,ct-Ie),mt=(je===0?10:1/je)*Je.state.latency,xe=I.calculateSingleUseQoe(Je.bitrate,Ye,mt,X);(ce===null||xe>ce)&&function(We,it,qt){return!(We>U+qt)&&it>=x}($,Ie,Ce)&&(ce=xe,oe=Te,de=Je.bitrate)})}),oe===null&&de===null&&(oe=-1),m=$,oe}},D=function z($,W,ue){if(ue===W)return $;for(var N=$.length,X=0;X<N;X++)for(var ce=$.shift(),oe=0;oe<T.length;oe++)$.push(ce.concat(T[oe]));return z($,W,ue+1)}((T=[.2,.4,.6,.8,1]).map(function(z){return[z]}),4,1),m=0,v}R.__dashjs_factory_name="LoLpWeightSelector",g.Z=F.Z.getClassFactory(R)},2298:function(b,g){g.Z=function w(){(function(F,R){if(!(F instanceof R))throw new TypeError("Cannot call a class as a function")})(this,w),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(b,g,w){w.d(g,{Y:function(){return I}});var F=w(3393),R=w(1553),y=w(5448),v=w(2128),D=w(2594),m=w(7387),T=w(7417),U=w(9032),x=w(9326),_=w(7802),I=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function C(j){var z,$,W,ue,N,X,ce,oe,de=this.context,Ce=j.adapter,Je=j.baseURLController,Te=j.streamInfo,je=j.timelineConverter,nt=j.debug,ct=j.eventBus,Ie=j.events,Ye=j.dashConstants,mt=(0,D.Z)(de).getInstance();function xe(it,qt){var Ft=new v.Z;Ft.id=it.id,Ft.bitrate=it.bandwidth,Ft.width=it.width,Ft.height=it.height,Ft.tilesHor=1,Ft.tilesVert=1,it.essentialProperties&&it.essentialProperties.forEach(function(gt){if(I.indexOf(gt.schemeIdUri)>=0&&gt.value){var St=gt.value.split("x");St.length!==2||isNaN(St[0])||isNaN(St[1])||(Ft.tilesHor=parseInt(St[0],10),Ft.tilesVert=parseInt(St[1],10))}}),qt?X.updateSegmentData(it).then(function(gt){(function(St,Re,re){var Be=[],O=function(M,q){var K,ye,he,Ke,wt=[],st=0;for(K=0,ye=M.segments.length;K<ye;K++)he=M.segments[K],(Ke=(0,m.TJ)(je,Ce.getIsDynamic(),q,he.startTime,he.duration,he.timescale,he.media,he.mediaRange,st))&&(wt.push(Ke),Ke=null,st++);return wt}(re,Re);Re.segments=O,St.segmentDuration=Re.segments[0].duration,St.readThumbnail=function(M,q){var K=null;Be.some(function(ye){if(ye.start<=M&&ye.end>M)return K=ye.url,!0}),K?q(K):Re.segments.some(function(ye){if(ye.mediaStartTime<=M&&ye.mediaStartTime+ye.duration>M){var he=Je.resolve(Re.path);return ce.load({method:"get",url:he.url,request:{range:ye.mediaRange,responseType:"arraybuffer"},onload:function(Ke){var wt=oe.getSamplesInfo(Ke.target.response),st=new Blob([Ke.target.response.slice(wt.sampleList[0].offset,wt.sampleList[0].offset+wt.sampleList[0].size)],{type:"image/jpeg"}),at=window.URL.createObjectURL(st);Be.push({start:ye.mediaStartTime,end:ye.mediaStartTime+ye.duration,url:at}),q&&q(at)}}),!0}})}})(Ft,it,gt)}):(Ft.startNumber=it.startNumber,Ft.segmentDuration=it.segmentDuration,Ft.timescale=it.timescale,Ft.templateUrl=function(gt){var St=mt.isRelative(gt.media)?mt.resolve(gt.media,Je.resolve(gt.path).url):gt.media;return St?(0,m.Aj)(St,gt.id):""}(it)),Ft.tilesHor>0&&Ft.tilesVert>0&&(Ft.widthPerTile=Ft.width/Ft.tilesHor,Ft.heightPerTile=Ft.height/Ft.tilesVert,$.push(Ft))}function We(){$=[],ue=-1,N=null}return z={getTracks:function(){return $},addTracks:function(){if(Te&&Ce&&(N=Ce.getMediaInfoForType(Te,F.Z.IMAGE))){var it=Ce.getVoRepresentations(N);it&&it.length>0&&it.forEach(function(qt){(qt.segmentInfoType===R.Z.SEGMENT_TEMPLATE&&qt.segmentDuration>0&&qt.media||qt.segmentInfoType===R.Z.SEGMENT_TIMELINE)&&xe(qt),qt.segmentInfoType===R.Z.SEGMENT_BASE&&xe(qt,!0)}),$.length>0&&$.sort(function(qt,Ft){return qt.bitrate-Ft.bitrate})}},reset:We,setTrackByIndex:function(it){$&&$.length!==0&&(it>=$.length&&(it=$.length-1),ue=it)},getCurrentTrack:function(){return ue<0?null:$[ue]},getCurrentTrackIndex:function(){return ue},getThumbnailRequestForTime:function(it){for(var qt,Ft=Ce.getVoRepresentations(N),gt=0;gt<Ft.length;gt++)if($[ue].id===Ft[gt].id){qt=Ft[gt];break}return W.getSegmentRequestForTime(N,qt,it)}},We(),ce=(0,U.Z)(de).create({}),oe=(0,T.Z)(de).getInstance(),X=(0,_.Z)(de).create({events:Ie,eventBus:ct,streamInfo:Te,timelineConverter:je,dashConstants:Ye,dashMetrics:j.dashMetrics,segmentBaseController:j.segmentBaseController,type:F.Z.IMAGE}),(W=(0,x.Z)(de).create({streamInfo:Te,type:F.Z.IMAGE,timelineConverter:je,segmentsController:X,baseURLController:Je,debug:nt,eventBus:ct,events:Ie,dashConstants:Ye,urlUtils:mt})).initialize(!!Ce&&Ce.getIsDynamic()),z}C.__dashjs_factory_name="ThumbnailTracks",g.Z=y.Z.getClassFactory(C)},7417:function(b,g,w){var F=w(6398),R=w(8260),y=w(5448),v=w(6934),D=w(9597);function m(){var T,U,x=this.context;function _(j){if(!j)return null;j.fileStart===void 0&&(j.fileStart=0);var z=v.parseBuffer(j),$=(0,R.Z)(x).create();return $.setData(z),$}function I(j,z){return j[z+3]>>>0|j[z+2]<<8>>>0|j[z+1]<<16>>>0|j[z]<<24>>>0}function C(j,z){return String.fromCharCode(j[z++])+String.fromCharCode(j[z++])+String.fromCharCode(j[z++])+String.fromCharCode(j[z])}return U={parse:_,findLastTopIsoBoxCompleted:function(j,z,$){if($===void 0&&($=0),!z||$+8>=z.byteLength)return new D.Z(0,!1);for(var W,ue=z instanceof ArrayBuffer?new Uint8Array(z):z,N=0;$<ue.byteLength;){var X=I(ue,$),ce=C(ue,$+4);if(X===0)break;$+X<=ue.byteLength&&(j.indexOf(ce)>=0?W=new D.Z($,!0,X):N=$+X),$+=X}return W||new D.Z(N,!1)},getMediaTimescaleFromMoov:function(j){var z=_(j),$=z?z.getBox("mdhd"):void 0;return $?$.timescale:NaN},getSamplesInfo:function(j){if(!j||j.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var z,$,W,ue,N,X,ce,oe,de,Ce,Je,Te,je,nt,ct,Ie,Ye=_(j),mt=Ye.getBoxes("moof"),xe=Ye.getBoxes("mfhd");ct=Ye.getBoxes("moof").length,nt=xe[xe.length-1].sequence_number,$=0,N=[];var We=-1,it=-1;for(Ce=0;Ce<mt.length;Ce++){var qt=mt[Ce],Ft=qt.getChildBoxes("traf");for(oe=0;oe<Ft.length;oe++){var gt=Ft[oe],St=gt.getChildBox("tfhd"),Re=gt.getChildBox("tfdt");ue=Re.baseMediaDecodeTime;var re=gt.getChildBoxes("trun"),Be=gt.getChildBoxes("subs");for(de=0;de<re.length;de++){var O=re[de];for($=O.sample_count,je=(St.base_data_offset||0)+(O.data_offset||0),ce=0;ce<$;ce++){z=(X=O.samples[ce]).sample_duration!==void 0?X.sample_duration:St.default_sample_duration,W=X.sample_size!==void 0?X.sample_size:St.default_sample_size;var M={dts:ue,cts:ue+(X.sample_composition_time_offset!==void 0?X.sample_composition_time_offset:0),duration:z,offset:qt.offset+je,size:W,subSizes:[W]};if(Be)for(Je=0;Je<Be.length;Je++){var q=Be[Je];if(We<q.entry_count-1&&ce>it&&(We++,it+=q.entries[We].sample_delta),ce==it){M.subSizes=[];var K=q.entries[We];for(Te=0;Te<K.subsample_count;Te++)M.subSizes.push(K.subsamples[Te].subsample_size)}}N.push(M),je+=W,ue+=z}}Ie=ue-Re.baseMediaDecodeTime}}return{sampleList:N,lastSequenceNumber:nt,totalDuration:Ie,numSequences:ct}},findInitRange:function(j){var z=null,$=_(j);if(!$)return z;var W=$.getBox("ftyp"),ue=$.getBox("moov");return T.debug("Searching for initialization."),ue&&ue.isComplete&&(z=(W?W.offset:ue.offset)+"-"+(ue.offset+ue.size-1),T.debug("Found the initialization.  Range: "+z)),z},parsePayload:function(j,z,$){if($===void 0&&($=0),!z||$+8>=z.byteLength)return new D.Z(0,!1);for(var W,ue=z instanceof ArrayBuffer?new Uint8Array(z):z,N=0;$<ue.byteLength;){var X=I(ue,$),ce=C(ue,$+4);if(X===0)break;$+X<=ue.byteLength&&(j.indexOf(ce)>=0?W=new D.Z($,!0,X,ce):N=$+X),$+=X}return W||new D.Z(N,!1)}},T=(0,F.Z)(x).getInstance().getLogger(U),U}m.__dashjs_factory_name="BoxParser",g.Z=y.Z.getSingletonFactory(m)},1715:function(b,g,w){w.d(g,{B:function(){return D}});var F=w(5448),R=w(7803),y=w(3393),v=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function D(){var T="ManagedMediaSource"in window,U="WebKitMediaSource"in window,x="MediaSource"in window;return T||U||x}function m(){var T,U,x;return T={setConfig:function(_){_&&_.settings&&(U=_.settings)},supportsMediaSource:D,supportsEncryptedMedia:function(){return x},supportsCodec:function(_,I){return I!==y.Z.AUDIO&&I!==y.Z.VIDEO?Promise.resolve(!0):function(C,j){return U.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(C.codec&&j===y.Z.AUDIO||j===y.Z.VIDEO&&C.codec&&C.width&&C.height&&C.bitrate&&C.framerate)}(_,I)?function(C,j){return new Promise(function(z){if(C&&C.codec){var $={type:"media-source"};$[j]={},$[j].contentType=C.codec,$[j].width=C.width,$[j].height=C.height,$[j].bitrate=parseInt(C.bitrate),$[j].framerate=parseFloat(C.framerate),navigator.mediaCapabilities.decodingInfo($).then(function(W){z(W.supported)}).catch(function(){z(!1)})}else z(!1)})}(_,I):function(C){return new Promise(function(j){if(C&&C.codec){var z=C.codec;C.width&&C.height&&(z+=';width="'+C.width+'";height="'+C.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(z)||"MediaSource"in window&&MediaSource.isTypeSupported(z)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(z)?j(!0):j(!1)}else j(!1)})}(_)},setEncryptedMediaSupported:function(_){x=_},supportsEssentialProperty:function(_){try{return R.Y.indexOf(_.schemeIdUri)!==-1||y.Z.FONT_DOWNLOAD_DVB_SCHEME===_.schemeIdUri}catch(I){return!0}},codecRootCompatibleWithCodec:function(_,I){for(var C,j=_.split(".")[0],z=I.indexOf(j)===0,$=0;$<v.length;$++)if(v[$].codec===j){C=v[$];break}return C?z||C.compatibleCodecs.some(function(W){return I.indexOf(W)===0}):z}},x=!1,T}m.__dashjs_factory_name="Capabilities",g.Z=F.Z.getSingletonFactory(m)},2295:function(b,g,w){var F=w(5448),R=w(3106);function y(){return{customTimeRangeArray:[],length:0,add:function(v,D){var m;for(m=0;m<this.customTimeRangeArray.length&&v>this.customTimeRangeArray[m].start;m++);for(this.customTimeRangeArray.splice(m,0,{start:v,end:D}),m=0;m<this.customTimeRangeArray.length-1;m++)this.mergeRanges(m,m+1)&&m--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(v,D){for(var m=0;m<this.customTimeRangeArray.length;m++)if(v<=this.customTimeRangeArray[m].start&&D>=this.customTimeRangeArray[m].end)this.customTimeRangeArray.splice(m,1),m--;else{if(v>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end){this.customTimeRangeArray.splice(m+1,0,{start:D,end:this.customTimeRangeArray[m].end}),this.customTimeRangeArray[m].end=v;break}v>this.customTimeRangeArray[m].start&&v<this.customTimeRangeArray[m].end?this.customTimeRangeArray[m].end=v:D>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end&&(this.customTimeRangeArray[m].start=D)}this.length=this.customTimeRangeArray.length},mergeRanges:function(v,D){var m=this.customTimeRangeArray[v],T=this.customTimeRangeArray[D];return m.start<=T.start&&T.start<=m.end&&m.end<=T.end?(m.end=T.end,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&T.end<=m.end?(m.start=T.start,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&m.end<=T.end?(this.customTimeRangeArray.splice(v,1),!0):m.start<=T.start&&T.start<=m.end&&T.end<=m.end&&(this.customTimeRangeArray.splice(D,1),!0)},start:function(v){return(0,R.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].start},end:function(v){return(0,R.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].end}}}y.__dashjs_factory_name="CustomTimeRanges",g.Z=F.Z.getClassFactory(y)},5:function(b,g,w){var F=w(5448);function R(){var y,v=/^[a-z][a-z0-9+\-_.]*:/i,D=/^https?:\/\//i,m=/^https:\/\//i,T=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,U=function(W,ue){try{return new window.URL(W,ue).toString()}catch(N){return W}},x=function(W,ue){var N=_;if(!ue||!j(W))return W;z(W)&&(N=I),$(W)&&(N=C);var X=N(ue),ce=X.charAt(X.length-1)!=="/"&&W.charAt(0)!=="/"?"/":"";return[X,W].join(ce)};function _(W){var ue=W.indexOf("/"),N=W.lastIndexOf("/");return ue!==-1?N===ue+1?W:(W.indexOf("?")!==-1&&(W=W.substring(0,W.indexOf("?"))),W.substring(0,N+1)):""}function I(W){var ue=W.match(T);return ue?ue[1]:""}function C(W){var ue=W.match(v);return ue?ue[0]:""}function j(W){return!v.test(W)}function z(W){return j(W)&&W.charAt(0)==="/"}function $(W){return W.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),y=U}catch(W){}finally{y=y||x}}(),{parseBaseUrl:_,parseOrigin:I,parseScheme:C,isRelative:j,isPathAbsolute:z,isSchemeRelative:$,isHTTPURL:function(W){return D.test(W)},isHTTPS:function(W){return m.test(W)},removeHostname:function(W){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(W)[2].substring(1)},resolve:function(W,ue){return y(W,ue)}}}R.__dashjs_factory_name="DefaultURLUtils",g.Z=F.Z.getSingletonFactory(R)},8260:function(b,g,w){var F=w(2839),R=w(5448);function y(){var v;function D(T){var U=[];if(!T||!v||typeof v.fetchAll!="function")return U;for(var x,_=v.fetchAll(T),I=0,C=_.length;I<C;I++)(x=m(_[I]))&&U.push(x);return U}function m(T){if(!T)return null;var U=new F.Z(T);return T.hasOwnProperty("_incomplete")&&(U.isComplete=!T._incomplete),U}return{getBox:function(T){return T&&v&&v.boxes&&v.boxes.length!==0&&typeof v.fetch=="function"?m(v.fetch(T)):null},getBoxes:D,setData:function(T){v=T},getLastBox:function(){if(!v||!v.boxes||!v.boxes.length)return null;var T=D(v.boxes[v.boxes.length-1].type);return T.length>0?T[T.length-1]:null}}}y.__dashjs_factory_name="IsoFile",g.Z=R.Z.getClassFactory(y)},7473:function(b,g,w){w.d(g,{k:function(){return R}});var F=w(5448);function R(v,D){var m={url:v.url,method:v.method,headers:Object.assign({},v.headers),credentials:v.withCredentials?"include":void 0,range:v.request.range};return Promise.resolve(D.modifyRequest(m)).then(function(){return Object.assign(v,m,{withCredentials:m.credentials==="include"})})}function y(){return{modifyRequest:null,modifyRequestURL:function(v){return v},modifyRequestHeader:function(v,D){return D.url,v}}}y.__dashjs_factory_name="RequestModifier",g.Z=F.Z.getSingletonFactory(y)},3106:function(b,g,w){w.d(g,{PS:function(){return y},SE:function(){return v}});var F=w(3393);function R(D){return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},R(D)}function y(D,m){if(R(D)!==m)throw F.Z.BAD_ARGUMENT_ERROR}function v(D){if(D===null||isNaN(D)||D%1!=0)throw F.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(b,g,w){var F=w(5448),R=w(5);function y(){var D,m=[],T=this.context;function U(x,_,I){var C=function(j){var z;for(z=0;z<m.length;z++)if(m[z].regex.test(j))return m[z].utils;return D}(I||_);return C&&typeof C[x]=="function"?C[x](_,I):D[x](_,I)}return D=(0,R.Z)(T).getInstance(),{registerUrlRegex:function(x,_){m.push({regex:x,utils:_})},parseBaseUrl:function(x){return U("parseBaseUrl",x)},parseOrigin:function(x){return U("parseOrigin",x)},parseScheme:function(x){return U("parseScheme",x)},isRelative:function(x){return U("isRelative",x)},isPathAbsolute:function(x){return U("isPathAbsolute",x)},isSchemeRelative:function(x){return U("isSchemeRelative",x)},isHTTPURL:function(x){return U("isHTTPURL",x)},isHTTPS:function(x){return U("isHTTPS",x)},removeHostname:function(x){return U("removeHostname",x)},resolve:function(x,_){return U("resolve",x,_)}}}y.__dashjs_factory_name="URLUtils";var v=F.Z.getSingletonFactory(y);g.Z=v},5459:function(b,g){g.Z=function w(F,R,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,w),this.code=F||null,this.message=R||null,this.data=y||null}},3186:function(b,g,w){var F=w(7855);function R(v,D){for(var m=0;m<D.length;m++){var T=D[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}var y=function(){function v(T){(function(U,x){if(!(U instanceof x))throw new TypeError("Cannot call a class as a function")})(this,v),this.action=v.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=T||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var D,m;return D=v,(m=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===F.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(T){this.type=T&&T.init?F.w.INIT_SEGMENT_TYPE:F.w.MEDIA_SEGMENT_TYPE,this.url=T&&T.url?T.url:null,this.range=T&&T.range?T.range.start+"-"+T.range.end:null,this.mediaType=T&&T.mediaType?T.mediaType:null}}])&&R(D.prototype,m),v}();y.ACTION_DOWNLOAD="download",y.ACTION_COMPLETE="complete",g.Z=y},2839:function(b,g){function w(R,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}var F=function(){function R(D){if(function(C,j){if(!(C instanceof j))throw new TypeError("Cannot call a class as a function")}(this,R),this.offset=D._offset,this.type=D.type,this.size=D.size,this.boxes=[],D.boxes)for(var m=0;m<D.boxes.length;m++)this.boxes.push(new R(D.boxes[m]));switch(this.isComplete=!0,D.type){case"sidx":if(this.timescale=D.timescale,this.earliest_presentation_time=D.earliest_presentation_time,this.first_offset=D.first_offset,this.references=D.references,D.references){this.references=[];for(var T=0;T<D.references.length;T++){var U={reference_type:D.references[T].reference_type,referenced_size:D.references[T].referenced_size,subsegment_duration:D.references[T].subsegment_duration};this.references.push(U)}}break;case"emsg":this.id=D.id,this.version=D.version===1?1:0,this.value=D.value,this.timescale=D.timescale,this.scheme_id_uri=D.scheme_id_uri,this.presentation_time_delta=D.version===1?D.presentation_time:D.presentation_time_delta,this.event_duration=D.event_duration,this.message_data=D.message_data;break;case"mdhd":this.timescale=D.timescale;break;case"mfhd":this.sequence_number=D.sequence_number;break;case"subs":this.entry_count=D.entry_count,this.entries=D.entries;break;case"tfhd":this.base_data_offset=D.base_data_offset,this.sample_description_index=D.sample_description_index,this.default_sample_duration=D.default_sample_duration,this.default_sample_size=D.default_sample_size,this.default_sample_flags=D.default_sample_flags,this.flags=D.flags;break;case"tfdt":this.version=D.version,this.baseMediaDecodeTime=D.baseMediaDecodeTime,this.flags=D.flags;break;case"trun":if(this.sample_count=D.sample_count,this.first_sample_flags=D.first_sample_flags,this.data_offset=D.data_offset,this.flags=D.flags,this.samples=D.samples,D.samples){this.samples=[];for(var x=0,_=D.samples.length;x<_;x++){var I={sample_size:D.samples[x].sample_size,sample_duration:D.samples[x].sample_duration,sample_composition_time_offset:D.samples[x].sample_composition_time_offset};this.samples.push(I)}}break;case"prft":this.version=D.version,this.reference_track_ID=D.reference_track_ID,this.ntp_timestamp_sec=D.ntp_timestamp_sec,this.ntp_timestamp_frac=D.ntp_timestamp_frac,this.media_time=D.media_time,this.flags=D.flags}}var y,v;return y=R,(v=[{key:"getChildBox",value:function(D){for(var m=0;m<this.boxes.length;m++)if(this.boxes[m].type===D)return this.boxes[m]}},{key:"getChildBoxes",value:function(D){for(var m=[],T=0;T<this.boxes.length;T++)this.boxes[T].type===D&&m.push(this.boxes[T]);return m}}])&&w(y.prototype,v),R}();g.Z=F},9597:function(b,g){g.Z=function w(F,R,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,w),this.lastCompletedOffset=F,this.found=R,this.size=y}},2128:function(b,g){g.Z=function w(){(function(F,R){if(!(F instanceof R))throw new TypeError("Cannot call a class as a function")})(this,w),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(b,g,w){function F(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")}w.d(g,{O:function(){return y},w:function(){return R}});var R=function v(){F(this,v),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},y=function v(){F(this,v),this.s=null,this.d=null,this.b=[]};R.GET="GET",R.HEAD="HEAD",R.MPD_TYPE="MPD",R.XLINK_EXPANSION_TYPE="XLinkExpansion",R.INIT_SEGMENT_TYPE="InitializationSegment",R.INDEX_SEGMENT_TYPE="IndexSegment",R.MEDIA_SEGMENT_TYPE="MediaSegment",R.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",R.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",R.DVB_REPORTING_TYPE="DVBReporting",R.LICENSE="license",R.CONTENT_STEERING_TYPE="ContentSteering",R.OTHER_TYPE="other"},3039:function(b,g){function w(R,y){return function(v,D){for(var m,T,U,x=F(v,"tag"),_=F(D==null?"*":D,"range"),I=[],C=-1;++C<_.length;)if(m=_[C].toLowerCase(),y||m!=="*"){for(T=-1,U=[];++T<x.length;)if(R(x[T].toLowerCase(),m)){if(!y)return x[T];I.push(x[T])}else U.push(x[T]);x=U}return y?I:void 0}}function F(R,y){var v=R&&typeof R=="string"?[R]:R;if(!v||typeof v!="object"||!("length"in v))throw new Error("Invalid "+y+" `"+v+"`, expected non-empty string");return v}g.basicFilter=w(function(R,y){return y==="*"||R===y||R.indexOf(y+"-")>-1},!0),g.extendedFilter=w(function(R,y){var v=R.split("-"),D=y.split("-"),m=0,T=0;if(D[T]!=="*"&&v[m]!==D[T])return!1;for(m++,T++;T<D.length;)if(D[T]!=="*"){if(!v[m])return!1;if(v[m]!==D[T]){if(v[m].length===1)return!1;m++}else m++,T++}else T++;return!0},!0),g.lookup=w(function(R,y){for(var v,D=y;;){if(D==="*"||R===D)return!0;if((v=D.lastIndexOf("-"))<0)return!1;D.charAt(v-2)==="-"&&(v-=2),D=D.slice(0,v)}})},3973:function(b,g,w){b.exports=w(3854)},3854:function(b,g,w){var F=w(2415),R=w(3039),y=w(7778),v=w(5813),D=w(3165),m=w(9460);b.exports=function(z,$){var W,ue=$||{},N=F.parse(String(z||"").toLowerCase(),ue),X=F.stringify(N),ce=-1;if(!X)return X;for(;++ce<y.length;)R.extendedFilter(X,y[ce].from).length&&(_(N,y[ce].from,y[ce].to),X=F.stringify(N));for(ce=-1;++ce<v.length;)I(N,v[ce].from.field,v[ce].from.value)&&C(N,v[ce].to.field,v[ce].to.value);for(X=F.stringify(Object.assign({},N,x)),ce=-1;++ce<D.length;)X===D[ce]&&(_(N,D[ce],D[ce].split("-").slice(0,-1).join("-")),X=F.stringify(Object.assign({},N,x)));if(N.extensions.sort(j),ue.warning)for(W in m)T.call(m[W],N[W])&&ue.warning("Deprecated "+W+" `"+N[W]+"`, expected one of `"+m[W][N[W]].join("`, `")+"`",null,7);return N.script&&(N.script=N.script.charAt(0).toUpperCase()+N.script.slice(1)),N.region&&(N.region=N.region.toUpperCase()),F.stringify(N)};var T={}.hasOwnProperty,U=new Intl.Collator,x={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function _(z,$,W){var ue,N=F.parse($),X=F.parse(W),ce=[];for(ue in N)N[ue]&&N[ue].length&&I(z,ue,N[ue])&&ce.push(ue);for(ue in X)X[ue]&&X[ue].length&&(ce.indexOf(ue)>-1||!z[ue]||!z[ue].length)&&C(z,ue,X[ue])}function I(z,$,W){var ue,N,X,ce,oe=!1;if(W){if(N=ue=z[$],ue&&typeof ue=="object")for(N=[],X=-1;++X<ue.length;)ce=ue[X],W.indexOf(ce)<0?N.push(ce):oe=!0;else ue===W&&(N=null,oe=!0);z[$]=N}return oe}function C(z,$,W){var ue,N,X,ce=z[$];if(ce&&typeof ce=="object")for(ue=[].concat(W),N=-1;++N<ue.length;)X=ue[N],ce.indexOf(X)<0&&ce.push(X);else z[$]=W}function j(z,$){return U.compare(z.singleton,$.singleton)}},2415:function(b,g,w){g.parse=w(6903),g.stringify=w(6713)},6903:function(b,g,w){var F=w(2219),R=w(3516),y=w(395),v=w(858),D=w(8589);b.exports=function T(U,x){var _,I,C,j=x||{},z={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},$=String(U),W=$.toLowerCase(),ue=0;if(U==null)throw new Error("Expected string, got `"+U+"`");if(m.call(D,W))return(j.normalize==null||j.normalize)&&D[W]?T(D[W]):(z[v.indexOf(W)===-1?"irregular":"regular"]=$,z);for(;R(W.charCodeAt(ue))&&ue<9;)ue++;if(ue>1&&ue<9){if(z.language=$.slice(0,ue),ue<4)for(I=0;W.charCodeAt(ue)===45&&R(W.charCodeAt(ue+1))&&R(W.charCodeAt(ue+2))&&R(W.charCodeAt(ue+3))&&!R(W.charCodeAt(ue+4));){if(I>2)return N(ue,3,"Too many extended language subtags, expected at most 3 subtags");z.extendedLanguageSubtags.push($.slice(ue+1,ue+4)),ue+=4,I++}for(W.charCodeAt(ue)===45&&R(W.charCodeAt(ue+1))&&R(W.charCodeAt(ue+2))&&R(W.charCodeAt(ue+3))&&R(W.charCodeAt(ue+4))&&!R(W.charCodeAt(ue+5))&&(z.script=$.slice(ue+1,ue+5),ue+=5),W.charCodeAt(ue)===45&&(R(W.charCodeAt(ue+1))&&R(W.charCodeAt(ue+2))&&!R(W.charCodeAt(ue+3))?(z.region=$.slice(ue+1,ue+3),ue+=3):y(W.charCodeAt(ue+1))&&y(W.charCodeAt(ue+2))&&y(W.charCodeAt(ue+3))&&!y(W.charCodeAt(ue+4))&&(z.region=$.slice(ue+1,ue+4),ue+=4));W.charCodeAt(ue)===45;){for(C=_=ue+1;F(W.charCodeAt(C));){if(C-_>7)return N(C,1,"Too long variant, expected at most 8 characters");C++}if(!(C-_>4||C-_>3&&y(W.charCodeAt(_))))break;z.variants.push($.slice(_,C)),ue=C}for(;W.charCodeAt(ue)===45&&W.charCodeAt(ue+1)!==120&&F(W.charCodeAt(ue+1))&&W.charCodeAt(ue+2)===45&&F(W.charCodeAt(ue+3));){for(C=ue+2,I=0;W.charCodeAt(C)===45&&F(W.charCodeAt(C+1))&&F(W.charCodeAt(C+2));)for(C=(_=C+1)+2,I++;F(W.charCodeAt(C));){if(C-_>7)return N(C,2,"Too long extension, expected at most 8 characters");C++}if(!I)return N(C,4,"Empty extension, extensions must have at least 2 characters of content");z.extensions.push({singleton:$.charAt(ue+1),extensions:$.slice(ue+3,C).split("-")}),ue=C}}else ue=0;if(ue===0&&W.charCodeAt(ue)===120||W.charCodeAt(ue)===45&&W.charCodeAt(ue+1)===120)for(C=ue=ue?ue+2:1;W.charCodeAt(C)===45&&F(W.charCodeAt(C+1));){for(C=_=ue+1;F(W.charCodeAt(C));){if(C-_>7)return N(C,5,"Too long private-use area, expected at most 8 characters");C++}z.privateuse.push($.slice(ue+1,C)),ue=C}return ue!==$.length?N(ue,6,"Found superfluous content after tag"):z;function N(X,ce,oe){return j.warning&&j.warning(oe,ce,X),j.forgiving?z:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var m={}.hasOwnProperty},6713:function(b){b.exports=function(g){var w,F,R,y=g||{},v=[];if(y.irregular||y.regular)return y.irregular||y.regular;if(y.language)for(v=v.concat(y.language,y.extendedLanguageSubtags||[],y.script||[],y.region||[],y.variants||[]),w=y.extensions||[],F=-1;++F<w.length;)(R=w[F]).singleton&&R.extensions&&R.extensions.length&&(v=v.concat(R.singleton,R.extensions));return y.privateuse&&y.privateuse.length&&(v=v.concat("x",y.privateuse)),v.join("-")}},1549:function(b,g,w){var F=w(6693),R=w(2165),y=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=m,g.SlowBuffer=function(O){return+O!=O&&(O=0),m.alloc(+O)},g.INSPECT_MAX_BYTES=50;var v=2147483647;function D(O){if(O>v)throw new RangeError('The value "'+O+'" is invalid for option "size"');var M=new Uint8Array(O);return Object.setPrototypeOf(M,m.prototype),M}function m(O,M,q){if(typeof O=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return x(O)}return T(O,M,q)}function T(O,M,q){if(typeof O=="string")return function(he,Ke){if(typeof Ke=="string"&&Ke!==""||(Ke="utf8"),!m.isEncoding(Ke))throw new TypeError("Unknown encoding: "+Ke);var wt=0|j(he,Ke),st=D(wt),at=st.write(he,Ke);return at!==wt&&(st=st.slice(0,at)),st}(O,M);if(ArrayBuffer.isView(O))return function(he){if(Re(he,Uint8Array)){var Ke=new Uint8Array(he);return I(Ke.buffer,Ke.byteOffset,Ke.byteLength)}return _(he)}(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(Re(O,ArrayBuffer)||O&&Re(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Re(O,SharedArrayBuffer)||O&&Re(O.buffer,SharedArrayBuffer)))return I(O,M,q);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var K=O.valueOf&&O.valueOf();if(K!=null&&K!==O)return m.from(K,M,q);var ye=function(he){if(m.isBuffer(he)){var Ke=0|C(he.length),wt=D(Ke);return wt.length===0||he.copy(wt,0,0,Ke),wt}return he.length!==void 0?typeof he.length!="number"||re(he.length)?D(0):_(he):he.type==="Buffer"&&Array.isArray(he.data)?_(he.data):void 0}(O);if(ye)return ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return m.from(O[Symbol.toPrimitive]("string"),M,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}function U(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function x(O){return U(O),D(O<0?0:0|C(O))}function _(O){for(var M=O.length<0?0:0|C(O.length),q=D(M),K=0;K<M;K+=1)q[K]=255&O[K];return q}function I(O,M,q){if(M<0||O.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<M+(q||0))throw new RangeError('"length" is outside of buffer bounds');var K;return K=M===void 0&&q===void 0?new Uint8Array(O):q===void 0?new Uint8Array(O,M):new Uint8Array(O,M,q),Object.setPrototypeOf(K,m.prototype),K}function C(O){if(O>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|O}function j(O,M){if(m.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||Re(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);var q=O.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&q===0)return 0;for(var ye=!1;;)switch(M){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return Ft(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return gt(O).length;default:if(ye)return K?-1:Ft(O).length;M=(""+M).toLowerCase(),ye=!0}}function z(O,M,q){var K=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0)<=(M>>>=0))return"";for(O||(O="utf8");;)switch(O){case"hex":return ct(this,M,q);case"utf8":case"utf-8":return Je(this,M,q);case"ascii":return je(this,M,q);case"latin1":case"binary":return nt(this,M,q);case"base64":return Ce(this,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,M,q);default:if(K)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),K=!0}}function $(O,M,q){var K=O[M];O[M]=O[q],O[q]=K}function W(O,M,q,K,ye){if(O.length===0)return-1;if(typeof q=="string"?(K=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),re(q=+q)&&(q=ye?0:O.length-1),q<0&&(q=O.length+q),q>=O.length){if(ye)return-1;q=O.length-1}else if(q<0){if(!ye)return-1;q=0}if(typeof M=="string"&&(M=m.from(M,K)),m.isBuffer(M))return M.length===0?-1:ue(O,M,q,K,ye);if(typeof M=="number")return M&=255,typeof Uint8Array.prototype.indexOf=="function"?ye?Uint8Array.prototype.indexOf.call(O,M,q):Uint8Array.prototype.lastIndexOf.call(O,M,q):ue(O,[M],q,K,ye);throw new TypeError("val must be string, number or Buffer")}function ue(O,M,q,K,ye){var he,Ke=1,wt=O.length,st=M.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(O.length<2||M.length<2)return-1;Ke=2,wt/=2,st/=2,q/=2}function at(Tt,Ct){return Ke===1?Tt[Ct]:Tt.readUInt16BE(Ct*Ke)}if(ye){var tt=-1;for(he=q;he<wt;he++)if(at(O,he)===at(M,tt===-1?0:he-tt)){if(tt===-1&&(tt=he),he-tt+1===st)return tt*Ke}else tt!==-1&&(he-=he-tt),tt=-1}else for(q+st>wt&&(q=wt-st),he=q;he>=0;he--){for(var ft=!0,Et=0;Et<st;Et++)if(at(O,he+Et)!==at(M,Et)){ft=!1;break}if(ft)return he}return-1}function N(O,M,q,K){q=Number(q)||0;var ye=O.length-q;K?(K=Number(K))>ye&&(K=ye):K=ye;var he=M.length;K>he/2&&(K=he/2);for(var Ke=0;Ke<K;++Ke){var wt=parseInt(M.substr(2*Ke,2),16);if(re(wt))return Ke;O[q+Ke]=wt}return Ke}function X(O,M,q,K){return St(Ft(M,O.length-q),O,q,K)}function ce(O,M,q,K){return St(function(ye){for(var he=[],Ke=0;Ke<ye.length;++Ke)he.push(255&ye.charCodeAt(Ke));return he}(M),O,q,K)}function oe(O,M,q,K){return St(gt(M),O,q,K)}function de(O,M,q,K){return St(function(ye,he){for(var Ke,wt,st,at=[],tt=0;tt<ye.length&&!((he-=2)<0);++tt)wt=(Ke=ye.charCodeAt(tt))>>8,st=Ke%256,at.push(st),at.push(wt);return at}(M,O.length-q),O,q,K)}function Ce(O,M,q){return M===0&&q===O.length?F.fromByteArray(O):F.fromByteArray(O.slice(M,q))}function Je(O,M,q){q=Math.min(O.length,q);for(var K=[],ye=M;ye<q;){var he,Ke,wt,st,at=O[ye],tt=null,ft=at>239?4:at>223?3:at>191?2:1;if(ye+ft<=q)switch(ft){case 1:at<128&&(tt=at);break;case 2:(192&(he=O[ye+1]))==128&&(st=(31&at)<<6|63&he)>127&&(tt=st);break;case 3:he=O[ye+1],Ke=O[ye+2],(192&he)==128&&(192&Ke)==128&&(st=(15&at)<<12|(63&he)<<6|63&Ke)>2047&&(st<55296||st>57343)&&(tt=st);break;case 4:he=O[ye+1],Ke=O[ye+2],wt=O[ye+3],(192&he)==128&&(192&Ke)==128&&(192&wt)==128&&(st=(15&at)<<18|(63&he)<<12|(63&Ke)<<6|63&wt)>65535&&st<1114112&&(tt=st)}tt===null?(tt=65533,ft=1):tt>65535&&(tt-=65536,K.push(tt>>>10&1023|55296),tt=56320|1023&tt),K.push(tt),ye+=ft}return function(Et){var Tt=Et.length;if(Tt<=Te)return String.fromCharCode.apply(String,Et);for(var Ct="",hn=0;hn<Tt;)Ct+=String.fromCharCode.apply(String,Et.slice(hn,hn+=Te));return Ct}(K)}g.kMaxLength=v,m.TYPED_ARRAY_SUPPORT=function(){try{var O=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(O,M),O.foo()===42}catch(q){return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(O,M,q){return T(O,M,q)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(O,M,q){return function(K,ye,he){return U(K),K<=0?D(K):ye!==void 0?typeof he=="string"?D(K).fill(ye,he):D(K).fill(ye):D(K)}(O,M,q)},m.allocUnsafe=function(O){return x(O)},m.allocUnsafeSlow=function(O){return x(O)},m.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==m.prototype},m.compare=function(O,M){if(Re(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),Re(M,Uint8Array)&&(M=m.from(M,M.offset,M.byteLength)),!m.isBuffer(O)||!m.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===M)return 0;for(var q=O.length,K=M.length,ye=0,he=Math.min(q,K);ye<he;++ye)if(O[ye]!==M[ye]){q=O[ye],K=M[ye];break}return q<K?-1:K<q?1:0},m.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(O,M){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return m.alloc(0);var q;if(M===void 0)for(M=0,q=0;q<O.length;++q)M+=O[q].length;var K=m.allocUnsafe(M),ye=0;for(q=0;q<O.length;++q){var he=O[q];if(Re(he,Uint8Array))ye+he.length>K.length?m.from(he).copy(K,ye):Uint8Array.prototype.set.call(K,he,ye);else{if(!m.isBuffer(he))throw new TypeError('"list" argument must be an Array of Buffers');he.copy(K,ye)}ye+=he.length}return K},m.byteLength=j,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<O;M+=2)$(this,M,M+1);return this},m.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<O;M+=4)$(this,M,M+3),$(this,M+1,M+2);return this},m.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<O;M+=8)$(this,M,M+7),$(this,M+1,M+6),$(this,M+2,M+5),$(this,M+3,M+4);return this},m.prototype.toString=function(){var O=this.length;return O===0?"":arguments.length===0?Je(this,0,O):z.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(O){if(!m.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O||m.compare(this,O)===0},m.prototype.inspect=function(){var O="",M=g.INSPECT_MAX_BYTES;return O=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(O+=" ... "),"<Buffer "+O+">"},y&&(m.prototype[y]=m.prototype.inspect),m.prototype.compare=function(O,M,q,K,ye){if(Re(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),!m.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(M===void 0&&(M=0),q===void 0&&(q=O?O.length:0),K===void 0&&(K=0),ye===void 0&&(ye=this.length),M<0||q>O.length||K<0||ye>this.length)throw new RangeError("out of range index");if(K>=ye&&M>=q)return 0;if(K>=ye)return-1;if(M>=q)return 1;if(this===O)return 0;for(var he=(ye>>>=0)-(K>>>=0),Ke=(q>>>=0)-(M>>>=0),wt=Math.min(he,Ke),st=this.slice(K,ye),at=O.slice(M,q),tt=0;tt<wt;++tt)if(st[tt]!==at[tt]){he=st[tt],Ke=at[tt];break}return he<Ke?-1:Ke<he?1:0},m.prototype.includes=function(O,M,q){return this.indexOf(O,M,q)!==-1},m.prototype.indexOf=function(O,M,q){return W(this,O,M,q,!0)},m.prototype.lastIndexOf=function(O,M,q){return W(this,O,M,q,!1)},m.prototype.write=function(O,M,q,K){if(M===void 0)K="utf8",q=this.length,M=0;else if(q===void 0&&typeof M=="string")K=M,q=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(q)?(q>>>=0,K===void 0&&(K="utf8")):(K=q,q=void 0)}var ye=this.length-M;if((q===void 0||q>ye)&&(q=ye),O.length>0&&(q<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var he=!1;;)switch(K){case"hex":return N(this,O,M,q);case"utf8":case"utf-8":return X(this,O,M,q);case"ascii":case"latin1":case"binary":return ce(this,O,M,q);case"base64":return oe(this,O,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,O,M,q);default:if(he)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),he=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Te=4096;function je(O,M,q){var K="";q=Math.min(O.length,q);for(var ye=M;ye<q;++ye)K+=String.fromCharCode(127&O[ye]);return K}function nt(O,M,q){var K="";q=Math.min(O.length,q);for(var ye=M;ye<q;++ye)K+=String.fromCharCode(O[ye]);return K}function ct(O,M,q){var K=O.length;(!M||M<0)&&(M=0),(!q||q<0||q>K)&&(q=K);for(var ye="",he=M;he<q;++he)ye+=Be[O[he]];return ye}function Ie(O,M,q){for(var K=O.slice(M,q),ye="",he=0;he<K.length-1;he+=2)ye+=String.fromCharCode(K[he]+256*K[he+1]);return ye}function Ye(O,M,q){if(O%1!=0||O<0)throw new RangeError("offset is not uint");if(O+M>q)throw new RangeError("Trying to access beyond buffer length")}function mt(O,M,q,K,ye,he){if(!m.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>ye||M<he)throw new RangeError('"value" argument is out of bounds');if(q+K>O.length)throw new RangeError("Index out of range")}function xe(O,M,q,K,ye,he){if(q+K>O.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function We(O,M,q,K,ye){return M=+M,q>>>=0,ye||xe(O,0,q,4),R.write(O,M,q,K,23,4),q+4}function it(O,M,q,K,ye){return M=+M,q>>>=0,ye||xe(O,0,q,8),R.write(O,M,q,K,52,8),q+8}m.prototype.slice=function(O,M){var q=this.length;(O=~~O)<0?(O+=q)<0&&(O=0):O>q&&(O=q),(M=M===void 0?q:~~M)<0?(M+=q)<0&&(M=0):M>q&&(M=q),M<O&&(M=O);var K=this.subarray(O,M);return Object.setPrototypeOf(K,m.prototype),K},m.prototype.readUintLE=m.prototype.readUIntLE=function(O,M,q){O>>>=0,M>>>=0,q||Ye(O,M,this.length);for(var K=this[O],ye=1,he=0;++he<M&&(ye*=256);)K+=this[O+he]*ye;return K},m.prototype.readUintBE=m.prototype.readUIntBE=function(O,M,q){O>>>=0,M>>>=0,q||Ye(O,M,this.length);for(var K=this[O+--M],ye=1;M>0&&(ye*=256);)K+=this[O+--M]*ye;return K},m.prototype.readUint8=m.prototype.readUInt8=function(O,M){return O>>>=0,M||Ye(O,1,this.length),this[O]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(O,M){return O>>>=0,M||Ye(O,2,this.length),this[O]|this[O+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(O,M){return O>>>=0,M||Ye(O,2,this.length),this[O]<<8|this[O+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(O,M){return O>>>=0,M||Ye(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(O,M){return O>>>=0,M||Ye(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},m.prototype.readIntLE=function(O,M,q){O>>>=0,M>>>=0,q||Ye(O,M,this.length);for(var K=this[O],ye=1,he=0;++he<M&&(ye*=256);)K+=this[O+he]*ye;return K>=(ye*=128)&&(K-=Math.pow(2,8*M)),K},m.prototype.readIntBE=function(O,M,q){O>>>=0,M>>>=0,q||Ye(O,M,this.length);for(var K=M,ye=1,he=this[O+--K];K>0&&(ye*=256);)he+=this[O+--K]*ye;return he>=(ye*=128)&&(he-=Math.pow(2,8*M)),he},m.prototype.readInt8=function(O,M){return O>>>=0,M||Ye(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},m.prototype.readInt16LE=function(O,M){O>>>=0,M||Ye(O,2,this.length);var q=this[O]|this[O+1]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt16BE=function(O,M){O>>>=0,M||Ye(O,2,this.length);var q=this[O+1]|this[O]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt32LE=function(O,M){return O>>>=0,M||Ye(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},m.prototype.readInt32BE=function(O,M){return O>>>=0,M||Ye(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},m.prototype.readFloatLE=function(O,M){return O>>>=0,M||Ye(O,4,this.length),R.read(this,O,!0,23,4)},m.prototype.readFloatBE=function(O,M){return O>>>=0,M||Ye(O,4,this.length),R.read(this,O,!1,23,4)},m.prototype.readDoubleLE=function(O,M){return O>>>=0,M||Ye(O,8,this.length),R.read(this,O,!0,52,8)},m.prototype.readDoubleBE=function(O,M){return O>>>=0,M||Ye(O,8,this.length),R.read(this,O,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||mt(this,O,M,q,Math.pow(2,8*q)-1,0);var ye=1,he=0;for(this[M]=255&O;++he<q&&(ye*=256);)this[M+he]=O/ye&255;return M+q},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||mt(this,O,M,q,Math.pow(2,8*q)-1,0);var ye=q-1,he=1;for(this[M+ye]=255&O;--ye>=0&&(he*=256);)this[M+ye]=O/he&255;return M+q},m.prototype.writeUint8=m.prototype.writeUInt8=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,1,255,0),this[M]=255&O,M+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,2,65535,0),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,2,65535,0),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,4,4294967295,0),this[M+3]=O>>>24,this[M+2]=O>>>16,this[M+1]=O>>>8,this[M]=255&O,M+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,4,4294967295,0),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeIntLE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var ye=Math.pow(2,8*q-1);mt(this,O,M,q,ye-1,-ye)}var he=0,Ke=1,wt=0;for(this[M]=255&O;++he<q&&(Ke*=256);)O<0&&wt===0&&this[M+he-1]!==0&&(wt=1),this[M+he]=(O/Ke>>0)-wt&255;return M+q},m.prototype.writeIntBE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var ye=Math.pow(2,8*q-1);mt(this,O,M,q,ye-1,-ye)}var he=q-1,Ke=1,wt=0;for(this[M+he]=255&O;--he>=0&&(Ke*=256);)O<0&&wt===0&&this[M+he+1]!==0&&(wt=1),this[M+he]=(O/Ke>>0)-wt&255;return M+q},m.prototype.writeInt8=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,1,127,-128),O<0&&(O=255+O+1),this[M]=255&O,M+1},m.prototype.writeInt16LE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,2,32767,-32768),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeInt16BE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,2,32767,-32768),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeInt32LE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,4,2147483647,-2147483648),this[M]=255&O,this[M+1]=O>>>8,this[M+2]=O>>>16,this[M+3]=O>>>24,M+4},m.prototype.writeInt32BE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeFloatLE=function(O,M,q){return We(this,O,M,!0,q)},m.prototype.writeFloatBE=function(O,M,q){return We(this,O,M,!1,q)},m.prototype.writeDoubleLE=function(O,M,q){return it(this,O,M,!0,q)},m.prototype.writeDoubleBE=function(O,M,q){return it(this,O,M,!1,q)},m.prototype.copy=function(O,M,q,K){if(!m.isBuffer(O))throw new TypeError("argument should be a Buffer");if(q||(q=0),K||K===0||(K=this.length),M>=O.length&&(M=O.length),M||(M=0),K>0&&K<q&&(K=q),K===q||O.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),O.length-M<K-q&&(K=O.length-M+q);var ye=K-q;return this===O&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(M,q,K):Uint8Array.prototype.set.call(O,this.subarray(q,K),M),ye},m.prototype.fill=function(O,M,q,K){if(typeof O=="string"){if(typeof M=="string"?(K=M,M=0,q=this.length):typeof q=="string"&&(K=q,q=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!m.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(O.length===1){var ye=O.charCodeAt(0);(K==="utf8"&&ye<128||K==="latin1")&&(O=ye)}}else typeof O=="number"?O&=255:typeof O=="boolean"&&(O=Number(O));if(M<0||this.length<M||this.length<q)throw new RangeError("Out of range index");if(q<=M)return this;var he;if(M>>>=0,q=q===void 0?this.length:q>>>0,O||(O=0),typeof O=="number")for(he=M;he<q;++he)this[he]=O;else{var Ke=m.isBuffer(O)?O:m.from(O,K),wt=Ke.length;if(wt===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(he=0;he<q-M;++he)this[he+M]=Ke[he%wt]}return this};var qt=/[^+/0-9A-Za-z-_]/g;function Ft(O,M){var q;M=M||1/0;for(var K=O.length,ye=null,he=[],Ke=0;Ke<K;++Ke){if((q=O.charCodeAt(Ke))>55295&&q<57344){if(!ye){if(q>56319){(M-=3)>-1&&he.push(239,191,189);continue}if(Ke+1===K){(M-=3)>-1&&he.push(239,191,189);continue}ye=q;continue}if(q<56320){(M-=3)>-1&&he.push(239,191,189),ye=q;continue}q=65536+(ye-55296<<10|q-56320)}else ye&&(M-=3)>-1&&he.push(239,191,189);if(ye=null,q<128){if((M-=1)<0)break;he.push(q)}else if(q<2048){if((M-=2)<0)break;he.push(q>>6|192,63&q|128)}else if(q<65536){if((M-=3)<0)break;he.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;he.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return he}function gt(O){return F.toByteArray(function(M){if((M=(M=M.split("=")[0]).trim().replace(qt,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M}(O))}function St(O,M,q,K){for(var ye=0;ye<K&&!(ye+q>=M.length||ye>=O.length);++ye)M[ye+q]=O[ye];return ye}function Re(O,M){return O instanceof M||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===M.name}function re(O){return O!=O}var Be=function(){for(var O="0123456789abcdef",M=new Array(256),q=0;q<16;++q)for(var K=16*q,ye=0;ye<16;++ye)M[K+ye]=O[q]+O[ye];return M}()},6693:function(b,g){g.byteLength=function(U){var x=m(U),_=x[0],I=x[1];return 3*(_+I)/4-I},g.toByteArray=function(U){var x,_,I=m(U),C=I[0],j=I[1],z=new R(function(ue,N,X){return 3*(N+X)/4-X}(0,C,j)),$=0,W=j>0?C-4:C;for(_=0;_<W;_+=4)x=F[U.charCodeAt(_)]<<18|F[U.charCodeAt(_+1)]<<12|F[U.charCodeAt(_+2)]<<6|F[U.charCodeAt(_+3)],z[$++]=x>>16&255,z[$++]=x>>8&255,z[$++]=255&x;return j===2&&(x=F[U.charCodeAt(_)]<<2|F[U.charCodeAt(_+1)]>>4,z[$++]=255&x),j===1&&(x=F[U.charCodeAt(_)]<<10|F[U.charCodeAt(_+1)]<<4|F[U.charCodeAt(_+2)]>>2,z[$++]=x>>8&255,z[$++]=255&x),z},g.fromByteArray=function(U){for(var x,_=U.length,I=_%3,C=[],j=16383,z=0,$=_-I;z<$;z+=j)C.push(T(U,z,z+j>$?$:z+j));return I===1?(x=U[_-1],C.push(w[x>>2]+w[x<<4&63]+"==")):I===2&&(x=(U[_-2]<<8)+U[_-1],C.push(w[x>>10]+w[x>>4&63]+w[x<<2&63]+"=")),C.join("")};for(var w=[],F=[],R=typeof Uint8Array<"u"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0,D=y.length;v<D;++v)w[v]=y[v],F[y.charCodeAt(v)]=v;function m(U){var x=U.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=U.indexOf("=");return _===-1&&(_=x),[_,_===x?0:4-_%4]}function T(U,x,_){for(var I,C,j=[],z=x;z<_;z+=3)I=(U[z]<<16&16711680)+(U[z+1]<<8&65280)+(255&U[z+2]),j.push(w[(C=I)>>18&63]+w[C>>12&63]+w[C>>6&63]+w[63&C]);return j.join("")}F[45]=62,F[95]=63},2165:function(b,g){g.read=function(w,F,R,y,v){var D,m,T=8*v-y-1,U=(1<<T)-1,x=U>>1,_=-7,I=R?v-1:0,C=R?-1:1,j=w[F+I];for(I+=C,D=j&(1<<-_)-1,j>>=-_,_+=T;_>0;D=256*D+w[F+I],I+=C,_-=8);for(m=D&(1<<-_)-1,D>>=-_,_+=y;_>0;m=256*m+w[F+I],I+=C,_-=8);if(D===0)D=1-x;else{if(D===U)return m?NaN:1/0*(j?-1:1);m+=Math.pow(2,y),D-=x}return(j?-1:1)*m*Math.pow(2,D-y)},g.write=function(w,F,R,y,v,D){var m,T,U,x=8*D-v-1,_=(1<<x)-1,I=_>>1,C=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=y?0:D-1,z=y?1:-1,$=F<0||F===0&&1/F<0?1:0;for(F=Math.abs(F),isNaN(F)||F===1/0?(T=isNaN(F)?1:0,m=_):(m=Math.floor(Math.log(F)/Math.LN2),F*(U=Math.pow(2,-m))<1&&(m--,U*=2),(F+=m+I>=1?C/U:C*Math.pow(2,1-I))*U>=2&&(m++,U/=2),m+I>=_?(T=0,m=_):m+I>=1?(T=(F*U-1)*Math.pow(2,v),m+=I):(T=F*Math.pow(2,I-1)*Math.pow(2,v),m=0));v>=8;w[R+j]=255&T,j+=z,T/=256,v-=8);for(m=m<<v|T,x+=v;x>0;w[R+j]=255&m,j+=z,m/=256,x-=8);w[R+j-z]|=128*$}},6934:function(b,g){var w={parseBuffer:function(y){return new F(y).parse()},addBoxProcessor:function(y,v){typeof y=="string"&&typeof v=="function"&&(R.prototype._boxProcessors[y]=v)},createFile:function(){return new F},createBox:function(y,v,D){var m=R.create(y);return v&&v.append(m,D),m},createFullBox:function(y,v,D){var m=w.createBox(y,v,D);return m.version=0,m.flags=0,m},Utils:{}};w.Utils.dataViewToString=function(y,v){var D=v||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(D).decode(y);var m=[],T=0;if(D==="utf-8")for(;T<y.byteLength;){var U=y.getUint8(T++);U<128||(U<224?(U=(31&U)<<6,U|=63&y.getUint8(T++)):U<240?(U=(15&U)<<12,U|=(63&y.getUint8(T++))<<6,U|=63&y.getUint8(T++)):(U=(7&U)<<18,U|=(63&y.getUint8(T++))<<12,U|=(63&y.getUint8(T++))<<6,U|=63&y.getUint8(T++))),m.push(String.fromCharCode(U))}else for(;T<y.byteLength;)m.push(String.fromCharCode(y.getUint8(T++)));return m.join("")},w.Utils.utf8ToByteArray=function(y){var v,D;if(typeof TextEncoder<"u")v=new TextEncoder().encode(y);else for(v=[],D=0;D<y.length;++D){var m=y.charCodeAt(D);m<128?v.push(m):m<2048?(v.push(192|m>>6),v.push(128|63&m)):m<65536?(v.push(224|m>>12),v.push(128|63&m>>6),v.push(128|63&m)):(v.push(240|m>>18),v.push(128|63&m>>12),v.push(128|63&m>>6),v.push(128|63&m))}return v},w.Utils.appendBox=function(y,v,D){if(v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,D!==-1)if(D!=null){var m,T=-1;if(typeof D=="number")T=D;else{if(typeof D=="string")m=D;else{if(typeof D!="object"||!D.type)return void y.boxes.push(v);m=D.type}for(var U=0;U<y.boxes.length;U++)if(m===y.boxes[U].type){T=U+1;break}}y.boxes.splice(T,0,v)}else y.boxes.push(v)},g.parseBuffer=w.parseBuffer,g.addBoxProcessor=w.addBoxProcessor,g.createFile=w.createFile,g.createBox=w.createBox,g.createFullBox=w.createFullBox,g.Utils=w.Utils,w.Cursor=function(y){this.offset=y===void 0?0:y};var F=function(y){this._cursor=new w.Cursor,this.boxes=[],y&&(this._raw=new DataView(y))};F.prototype.fetch=function(y){var v=this.fetchAll(y,!0);return v.length?v[0]:null},F.prototype.fetchAll=function(y,v){var D=[];return F._sweep.call(this,y,D,v),D},F.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var y=R.parse(this);if(y.type===void 0)break;this.boxes.push(y)}return this},F._sweep=function(y,v,D){for(var m in this.type&&this.type==y&&v.push(this),this.boxes){if(v.length&&D)return;F._sweep.call(this.boxes[m],y,v,D)}},F.prototype.write=function(){var y,v=0;for(y=0;y<this.boxes.length;y++)v+=this.boxes[y].getLength(!1);var D=new Uint8Array(v);for(this._rawo=new DataView(D.buffer),this.bytes=D,this._cursor.offset=0,y=0;y<this.boxes.length;y++)this.boxes[y].write();return D.buffer},F.prototype.append=function(y,v){w.Utils.appendBox(this,y,v)};var R=function(){this._cursor=new w.Cursor};R.parse=function(y){var v=new R;return v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,v._parseBox(),y._cursor.offset=v._raw.byteOffset+v._raw.byteLength,v},R.create=function(y){var v=new R;return v.type=y,v.boxes=[],v},R.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],R.prototype._boxProcessors={},R.prototype._procField=function(y,v,D){this._parsing?this[y]=this._readField(v,D):this._writeField(v,D,this[y])},R.prototype._procFieldArray=function(y,v,D,m){var T;if(this._parsing)for(this[y]=[],T=0;T<v;T++)this[y][T]=this._readField(D,m);else for(T=0;T<this[y].length;T++)this._writeField(D,m,this[y][T])},R.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},R.prototype._procEntries=function(y,v,D){var m;if(this._parsing)for(this[y]=[],m=0;m<v;m++)this[y].push({}),D.call(this,this[y][m]);else for(m=0;m<v;m++)D.call(this,this[y][m])},R.prototype._procSubEntries=function(y,v,D,m){var T;if(this._parsing)for(y[v]=[],T=0;T<D;T++)y[v].push({}),m.call(this,y[v][T]);else for(T=0;T<D;T++)m.call(this,y[v][T])},R.prototype._procEntryField=function(y,v,D,m){this._parsing?y[v]=this._readField(D,m):this._writeField(D,m,y[v])},R.prototype._procSubBoxes=function(y,v){var D;if(this._parsing)for(this[y]=[],D=0;D<v;D++)this[y].push(R.parse(this));else for(D=0;D<v;D++)this._rawo?this[y][D].write():this.size+=this[y][D].getLength()},R.prototype._readField=function(y,v){switch(y){case"uint":return this._readUint(v);case"int":return this._readInt(v);case"template":return this._readTemplate(v);case"string":return v===-1?this._readTerminatedString():this._readString(v);case"data":return this._readData(v);case"utf8":return this._readUTF8String();default:return-1}},R.prototype._readInt=function(y){var v=null,D=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:v=this._raw.getInt8(D);break;case 16:v=this._raw.getInt16(D);break;case 32:v=this._raw.getInt32(D);break;case 64:var m=this._raw.getInt32(D),T=this._raw.getInt32(D+4);v=m*Math.pow(2,32)+T}return this._cursor.offset+=y>>3,v},R.prototype._readUint=function(y){var v,D,m=null,T=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:m=this._raw.getUint8(T);break;case 16:m=this._raw.getUint16(T);break;case 24:m=((v=this._raw.getUint16(T))<<8)+(D=this._raw.getUint8(T+2));break;case 32:m=this._raw.getUint32(T);break;case 64:v=this._raw.getUint32(T),D=this._raw.getUint32(T+4),m=v*Math.pow(2,32)+D}return this._cursor.offset+=y>>3,m},R.prototype._readString=function(y){for(var v="",D=0;D<y;D++){var m=this._readUint(8);v+=String.fromCharCode(m)}return v},R.prototype._readTemplate=function(y){return this._readUint(y/2)+this._readUint(y/2)/Math.pow(2,y/2)},R.prototype._readTerminatedString=function(){for(var y="";this._cursor.offset-this._offset<this._raw.byteLength;){var v=this._readUint(8);if(v===0)break;y+=String.fromCharCode(v)}return y},R.prototype._readData=function(y){var v=y>0?y:this._raw.byteLength-(this._cursor.offset-this._offset);if(v>0){var D=new Uint8Array(this._raw.buffer,this._cursor.offset,v);return this._cursor.offset+=v,D}return null},R.prototype._readUTF8String=function(){var y=this._raw.byteLength-(this._cursor.offset-this._offset),v=null;return y>0&&(v=new DataView(this._raw.buffer,this._cursor.offset,y),this._cursor.offset+=y),v&&w.Utils.dataViewToString(v)},R.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},R.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},R.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(R.parse(this))},R.prototype.append=function(y,v){w.Utils.appendBox(this,y,v)},R.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.size+=this.boxes[y].getLength();return this._data&&this._writeData(this._data),this.size},R.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.boxes[y].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},R.prototype._writeInt=function(y,v){if(this._rawo){var D=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setInt8(D,v);break;case 16:this._rawo.setInt16(D,v);break;case 32:this._rawo.setInt32(D,v);break;case 64:var m=Math.floor(v/Math.pow(2,32)),T=v-m*Math.pow(2,32);this._rawo.setUint32(D,m),this._rawo.setUint32(D+4,T)}this._cursor.offset+=y>>3}else this.size+=y>>3},R.prototype._writeUint=function(y,v){if(this._rawo){var D,m,T=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setUint8(T,v);break;case 16:this._rawo.setUint16(T,v);break;case 24:D=(16776960&v)>>8,m=255&v,this._rawo.setUint16(T,D),this._rawo.setUint8(T+2,m);break;case 32:this._rawo.setUint32(T,v);break;case 64:m=v-(D=Math.floor(v/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(T,D),this._rawo.setUint32(T+4,m)}this._cursor.offset+=y>>3}else this.size+=y>>3},R.prototype._writeString=function(y,v){for(var D=0;D<y;D++)this._writeUint(8,v.charCodeAt(D))},R.prototype._writeTerminatedString=function(y){if(y.length!==0){for(var v=0;v<y.length;v++)this._writeUint(8,y.charCodeAt(v));this._writeUint(8,0)}},R.prototype._writeTemplate=function(y,v){var D=Math.floor(v),m=(v-D)*Math.pow(2,y/2);this._writeUint(y/2,D),this._writeUint(y/2,m)},R.prototype._writeData=function(y){if(y)if(this._rawo){if(y instanceof Array){for(var v=this._cursor.offset-this._rawo.byteOffset,D=0;D<y.length;D++)this._rawo.setInt8(v+D,y[D]);this._cursor.offset+=y.length}y instanceof Uint8Array&&(this._root.bytes.set(y,this._cursor.offset),this._cursor.offset+=y.length)}else this.size+=y.length},R.prototype._writeUTF8String=function(y){var v=w.Utils.utf8ToByteArray(y);if(this._rawo)for(var D=new DataView(this._rawo.buffer,this._cursor.offset,v.length),m=0;m<v.length;m++)D.setUint8(m,v[m]);else this.size+=v.length},R.prototype._writeField=function(y,v,D){switch(y){case"uint":this._writeUint(v,D);break;case"int":this._writeInt(v,D);break;case"template":this._writeTemplate(v,D);break;case"string":v==-1?this._writeTerminatedString(D):this._writeString(v,D);break;case"data":this._writeData(D);break;case"utf8":this._writeUTF8String(D)}},R.prototype._boxProcessors.avc1=R.prototype._boxProcessors.avc2=R.prototype._boxProcessors.avc3=R.prototype._boxProcessors.avc4=R.prototype._boxProcessors.hvc1=R.prototype._boxProcessors.hev1=R.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},R.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_offset",this.version===1?"int":"uint",32)})},R.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},R.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"segment_duration","uint",this.version===1?64:32),this._procEntryField(y,"media_time","int",this.version===1?64:32),this._procEntryField(y,"media_rate_integer","int",16),this._procEntryField(y,"media_rate_fraction","int",16)})},R.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},R.prototype._boxProcessors.free=R.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},R.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},R.prototype._boxProcessors.ftyp=R.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var y=-1;this._parsing&&(y=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",y,"string",4)},R.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},R.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},R.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},R.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},R.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},R.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},R.prototype._boxProcessors.mp4a=R.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},R.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},R.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},R.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},R.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},R.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},R.prototype._boxProcessors.sdtp=function(){this._procFullBox();var y=-1;this._parsing&&(y=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",y,"uint",8)},R.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(y){this._parsing||(y.reference=(1&y.reference_type)<<31,y.reference|=2147483647&y.referenced_size,y.sap=(1&y.starts_with_SAP)<<31,y.sap|=(3&y.SAP_type)<<28,y.sap|=268435455&y.SAP_delta_time),this._procEntryField(y,"reference","uint",32),this._procEntryField(y,"subsegment_duration","uint",32),this._procEntryField(y,"sap","uint",32),this._parsing&&(y.reference_type=y.reference>>31&1,y.referenced_size=2147483647&y.reference,y.starts_with_SAP=y.sap>>31&1,y.SAP_type=y.sap>>28&7,y.SAP_delta_time=268435455&y.sap)})},R.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},R.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(y){this._procEntryField(y,"ranges_count","uint",32),this._procSubEntries(y,"ranges",y.ranges_count,function(v){this._procEntryField(v,"level","uint",8),this._procEntryField(v,"range_size","uint",24)})})},R.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},R.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},R.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_delta","uint",32)})},R.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_delta","uint",32),this._procEntryField(y,"subsample_count","uint",16),this._procSubEntries(y,"subsamples",y.subsample_count,function(v){this._procEntryField(v,"subsample_size","uint",this.version===1?32:16),this._procEntryField(v,"subsample_priority","uint",8),this._procEntryField(v,"discardable","uint",8),this._procEntryField(v,"codec_specific_parameters","uint",32)})})},R.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},R.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},R.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},R.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(y){this._procEntryField(y,"time","uint",this.version===1?64:32),this._procEntryField(y,"moof_offset","uint",this.version===1?64:32),this._procEntryField(y,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(y,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(y,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},R.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},R.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},R.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(y){256&this.flags&&this._procEntryField(y,"sample_duration","uint",32),512&this.flags&&this._procEntryField(y,"sample_size","uint",32),1024&this.flags&&this._procEntryField(y,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(y,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},R.prototype._boxProcessors["url "]=R.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},R.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},R.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},R.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},R.prototype._boxProcessors.vtte=function(){}},5530:function(b,g,w){b.exports=w(6146).polyfill()},6146:function(b,g,w){b.exports=function(){function F(gt){return typeof gt=="function"}var R=Array.isArray?Array.isArray:function(gt){return Object.prototype.toString.call(gt)==="[object Array]"},y=0,v=void 0,D=void 0,m=function(gt,St){j[y]=gt,j[y+1]=St,(y+=2)===2&&(D?D(z):X())},T=typeof window<"u"?window:void 0,U=T||{},x=U.MutationObserver||U.WebKitMutationObserver,_=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",I=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function C(){var gt=setTimeout;return function(){return gt(z,1)}}var j=new Array(1e3);function z(){for(var gt=0;gt<y;gt+=2)(0,j[gt])(j[gt+1]),j[gt]=void 0,j[gt+1]=void 0;y=0}var $,W,ue,N,X=void 0;function ce(gt,St){var Re=this,re=new this.constructor(Ce);re[de]===void 0&&it(re);var Be=Re._state;if(Be){var O=arguments[Be-1];m(function(){return xe(Be,re,O,Re._result)})}else Ye(Re,re,gt,St);return re}function oe(gt){if(gt&&typeof gt=="object"&&gt.constructor===this)return gt;var St=new this(Ce);return je(St,gt),St}X=_?function(){return process.nextTick(z)}:x?(W=0,ue=new x(z),N=document.createTextNode(""),ue.observe(N,{characterData:!0}),function(){N.data=W=++W%2}):I?(($=new MessageChannel).port1.onmessage=z,function(){return $.port2.postMessage(0)}):T===void 0?function(){try{var gt=Function("return this")().require("vertx");return(v=gt.runOnLoop||gt.runOnContext)!==void 0?function(){v(z)}:C()}catch(St){return C()}}():C();var de=Math.random().toString(36).substring(2);function Ce(){}var Je=void 0;function Te(gt,St,Re){St.constructor===gt.constructor&&Re===ce&&St.constructor.resolve===oe?function(re,Be){Be._state===1?ct(re,Be._result):Be._state===2?Ie(re,Be._result):Ye(Be,void 0,function(O){return je(re,O)},function(O){return Ie(re,O)})}(gt,St):Re===void 0?ct(gt,St):F(Re)?function(re,Be,O){m(function(M){var q=!1,K=function(ye,he,Ke,wt){try{ye.call(he,Ke,wt)}catch(st){return st}}(O,Be,function(ye){q||(q=!0,Be!==ye?je(M,ye):ct(M,ye))},function(ye){q||(q=!0,Ie(M,ye))},M._label);!q&&K&&(q=!0,Ie(M,K))},re)}(gt,St,Re):ct(gt,St)}function je(gt,St){if(gt===St)Ie(gt,new TypeError("You cannot resolve a promise with itself"));else if(Be=typeof(re=St),re===null||Be!=="object"&&Be!=="function")ct(gt,St);else{var Re=void 0;try{Re=St.then}catch(O){return void Ie(gt,O)}Te(gt,St,Re)}var re,Be}function nt(gt){gt._onerror&&gt._onerror(gt._result),mt(gt)}function ct(gt,St){gt._state===Je&&(gt._result=St,gt._state=1,gt._subscribers.length!==0&&m(mt,gt))}function Ie(gt,St){gt._state===Je&&(gt._state=2,gt._result=St,m(nt,gt))}function Ye(gt,St,Re,re){var Be=gt._subscribers,O=Be.length;gt._onerror=null,Be[O]=St,Be[O+1]=Re,Be[O+2]=re,O===0&&gt._state&&m(mt,gt)}function mt(gt){var St=gt._subscribers,Re=gt._state;if(St.length!==0){for(var re=void 0,Be=void 0,O=gt._result,M=0;M<St.length;M+=3)re=St[M],Be=St[M+Re],re?xe(Re,re,Be,O):Be(O);gt._subscribers.length=0}}function xe(gt,St,Re,re){var Be=F(Re),O=void 0,M=void 0,q=!0;if(Be){try{O=Re(re)}catch(K){q=!1,M=K}if(St===O)return void Ie(St,new TypeError("A promises callback cannot return that same promise."))}else O=re;St._state!==Je||(Be&&q?je(St,O):q===!1?Ie(St,M):gt===1?ct(St,O):gt===2&&Ie(St,O))}var We=0;function it(gt){gt[de]=We++,gt._state=void 0,gt._result=void 0,gt._subscribers=[]}var qt=function(){function gt(St,Re){this._instanceConstructor=St,this.promise=new St(Ce),this.promise[de]||it(this.promise),R(Re)?(this.length=Re.length,this._remaining=Re.length,this._result=new Array(this.length),this.length===0?ct(this.promise,this._result):(this.length=this.length||0,this._enumerate(Re),this._remaining===0&&ct(this.promise,this._result))):Ie(this.promise,new Error("Array Methods must be provided an Array"))}return gt.prototype._enumerate=function(St){for(var Re=0;this._state===Je&&Re<St.length;Re++)this._eachEntry(St[Re],Re)},gt.prototype._eachEntry=function(St,Re){var re=this._instanceConstructor,Be=re.resolve;if(Be===oe){var O=void 0,M=void 0,q=!1;try{O=St.then}catch(ye){q=!0,M=ye}if(O===ce&&St._state!==Je)this._settledAt(St._state,Re,St._result);else if(typeof O!="function")this._remaining--,this._result[Re]=St;else if(re===Ft){var K=new re(Ce);q?Ie(K,M):Te(K,St,O),this._willSettleAt(K,Re)}else this._willSettleAt(new re(function(ye){return ye(St)}),Re)}else this._willSettleAt(Be(St),Re)},gt.prototype._settledAt=function(St,Re,re){var Be=this.promise;Be._state===Je&&(this._remaining--,St===2?Ie(Be,re):this._result[Re]=re),this._remaining===0&&ct(Be,this._result)},gt.prototype._willSettleAt=function(St,Re){var re=this;Ye(St,void 0,function(Be){return re._settledAt(1,Re,Be)},function(Be){return re._settledAt(2,Re,Be)})},gt}(),Ft=function(){function gt(St){this[de]=We++,this._result=this._state=void 0,this._subscribers=[],Ce!==St&&(typeof St!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof gt?function(Re,re){try{re(function(Be){je(Re,Be)},function(Be){Ie(Re,Be)})}catch(Be){Ie(Re,Be)}}(this,St):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return gt.prototype.catch=function(St){return this.then(null,St)},gt.prototype.finally=function(St){var Re=this,re=Re.constructor;return F(St)?Re.then(function(Be){return re.resolve(St()).then(function(){return Be})},function(Be){return re.resolve(St()).then(function(){throw Be})}):Re.then(St,St)},gt}();return Ft.prototype.then=ce,Ft.all=function(gt){return new qt(this,gt).promise},Ft.race=function(gt){var St=this;return R(gt)?new St(function(Re,re){for(var Be=gt.length,O=0;O<Be;O++)St.resolve(gt[O]).then(Re,re)}):new St(function(Re,re){return re(new TypeError("You must pass an array to race."))})},Ft.resolve=oe,Ft.reject=function(gt){var St=new this(Ce);return Ie(St,gt),St},Ft._setScheduler=function(gt){D=gt},Ft._setAsap=function(gt){m=gt},Ft._asap=m,Ft.polyfill=function(){var gt=void 0;if(w.g!==void 0)gt=w.g;else if(typeof self<"u")gt=self;else try{gt=Function("return this")()}catch(re){throw new Error("polyfill failed because global object is unavailable in this environment")}var St=gt.Promise;if(St){var Re=null;try{Re=Object.prototype.toString.call(St.resolve())}catch(re){}if(Re==="[object Promise]"&&!St.cast)return}gt.Promise=Ft},Ft.Promise=Ft,Ft}()},1159:function(b){var g,w=typeof Reflect=="object"?Reflect:null,F=w&&typeof w.apply=="function"?w.apply:function(z,$,W){return Function.prototype.apply.call(z,$,W)};g=w&&typeof w.ownKeys=="function"?w.ownKeys:Object.getOwnPropertySymbols?function(z){return Object.getOwnPropertyNames(z).concat(Object.getOwnPropertySymbols(z))}:function(z){return Object.getOwnPropertyNames(z)};var R=Number.isNaN||function(z){return z!=z};function y(){y.init.call(this)}b.exports=y,b.exports.once=function(z,$){return new Promise(function(W,ue){function N(ce){z.removeListener($,X),ue(ce)}function X(){typeof z.removeListener=="function"&&z.removeListener("error",N),W([].slice.call(arguments))}j(z,$,X,{once:!0}),$!=="error"&&function(ce,oe,de){typeof ce.on=="function"&&j(ce,"error",oe,{once:!0})}(z,N)})},y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var v=10;function D(z){if(typeof z!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof z)}function m(z){return z._maxListeners===void 0?y.defaultMaxListeners:z._maxListeners}function T(z,$,W,ue){var N,X,ce,oe;if(D(W),(X=z._events)===void 0?(X=z._events=Object.create(null),z._eventsCount=0):(X.newListener!==void 0&&(z.emit("newListener",$,W.listener?W.listener:W),X=z._events),ce=X[$]),ce===void 0)ce=X[$]=W,++z._eventsCount;else if(typeof ce=="function"?ce=X[$]=ue?[W,ce]:[ce,W]:ue?ce.unshift(W):ce.push(W),(N=m(z))>0&&ce.length>N&&!ce.warned){ce.warned=!0;var de=new Error("Possible EventEmitter memory leak detected. "+ce.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");de.name="MaxListenersExceededWarning",de.emitter=z,de.type=$,de.count=ce.length,oe=de,console&&console.warn&&console.warn(oe)}return z}function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(z,$,W){var ue={fired:!1,wrapFn:void 0,target:z,type:$,listener:W},N=U.bind(ue);return N.listener=W,ue.wrapFn=N,N}function _(z,$,W){var ue=z._events;if(ue===void 0)return[];var N=ue[$];return N===void 0?[]:typeof N=="function"?W?[N.listener||N]:[N]:W?function(X){for(var ce=new Array(X.length),oe=0;oe<ce.length;++oe)ce[oe]=X[oe].listener||X[oe];return ce}(N):C(N,N.length)}function I(z){var $=this._events;if($!==void 0){var W=$[z];if(typeof W=="function")return 1;if(W!==void 0)return W.length}return 0}function C(z,$){for(var W=new Array($),ue=0;ue<$;++ue)W[ue]=z[ue];return W}function j(z,$,W,ue){if(typeof z.on=="function")ue.once?z.once($,W):z.on($,W);else{if(typeof z.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof z);z.addEventListener($,function N(X){ue.once&&z.removeEventListener($,N),W(X)})}}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(z){if(typeof z!="number"||z<0||R(z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+z+".");v=z}}),y.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(z){if(typeof z!="number"||z<0||R(z))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+z+".");return this._maxListeners=z,this},y.prototype.getMaxListeners=function(){return m(this)},y.prototype.emit=function(z){for(var $=[],W=1;W<arguments.length;W++)$.push(arguments[W]);var ue=z==="error",N=this._events;if(N!==void 0)ue=ue&&N.error===void 0;else if(!ue)return!1;if(ue){var X;if($.length>0&&(X=$[0]),X instanceof Error)throw X;var ce=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw ce.context=X,ce}var oe=N[z];if(oe===void 0)return!1;if(typeof oe=="function")F(oe,this,$);else{var de=oe.length,Ce=C(oe,de);for(W=0;W<de;++W)F(Ce[W],this,$)}return!0},y.prototype.addListener=function(z,$){return T(this,z,$,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(z,$){return T(this,z,$,!0)},y.prototype.once=function(z,$){return D($),this.on(z,x(this,z,$)),this},y.prototype.prependOnceListener=function(z,$){return D($),this.prependListener(z,x(this,z,$)),this},y.prototype.removeListener=function(z,$){var W,ue,N,X,ce;if(D($),(ue=this._events)===void 0)return this;if((W=ue[z])===void 0)return this;if(W===$||W.listener===$)--this._eventsCount==0?this._events=Object.create(null):(delete ue[z],ue.removeListener&&this.emit("removeListener",z,W.listener||$));else if(typeof W!="function"){for(N=-1,X=W.length-1;X>=0;X--)if(W[X]===$||W[X].listener===$){ce=W[X].listener,N=X;break}if(N<0)return this;N===0?W.shift():function(oe,de){for(;de+1<oe.length;de++)oe[de]=oe[de+1];oe.pop()}(W,N),W.length===1&&(ue[z]=W[0]),ue.removeListener!==void 0&&this.emit("removeListener",z,ce||$)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(z){var $,W,ue;if((W=this._events)===void 0)return this;if(W.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):W[z]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete W[z]),this;if(arguments.length===0){var N,X=Object.keys(W);for(ue=0;ue<X.length;++ue)(N=X[ue])!=="removeListener"&&this.removeAllListeners(N);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof($=W[z])=="function")this.removeListener(z,$);else if($!==void 0)for(ue=$.length-1;ue>=0;ue--)this.removeListener(z,$[ue]);return this},y.prototype.listeners=function(z){return _(this,z,!0)},y.prototype.rawListeners=function(z){return _(this,z,!1)},y.listenerCount=function(z,$){return typeof z.listenerCount=="function"?z.listenerCount($):I.call(z,$)},y.prototype.listenerCount=I,y.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},3101:function(b){var g=Array.isArray,w=Object.keys,F=Object.prototype.hasOwnProperty;b.exports=function R(y,v){if(y===v)return!0;if(y&&v&&typeof y=="object"&&typeof v=="object"){var D,m,T,U=g(y),x=g(v);if(U&&x){if((m=y.length)!=v.length)return!1;for(D=m;D--!=0;)if(!R(y[D],v[D]))return!1;return!0}if(U!=x)return!1;var _=y instanceof Date,I=v instanceof Date;if(_!=I)return!1;if(_&&I)return y.getTime()==v.getTime();var C=y instanceof RegExp,j=v instanceof RegExp;if(C!=j)return!1;if(C&&j)return y.toString()==v.toString();var z=w(y);if((m=z.length)!==w(v).length)return!1;for(D=m;D--!=0;)if(!F.call(v,z[D]))return!1;for(D=m;D--!=0;)if(!R(y[T=z[D]],v[T]))return!1;return!0}return y!=y&&v!=v}},3362:function(b,g,w){(function(F,R,y,v,D){function m(M){if("contents"in M)for(var q=("styleAttrs"in M)?M.styleAttrs[v.byName.ruby.qname]:null,K=M.kind==="span"&&(q==="container"||q==="textContainer"||q==="baseContainer"),ye=M.contents.length-1;ye>=0;ye--)!K||"styleAttrs"in M.contents[ye]&&v.byName.ruby.qname in M.contents[ye].styleAttrs?m(M.contents[ye]):delete M.contents[ye]}function T(M,q,K,ye){var he=ye&&ye.timeContainer==="seq",Ke=0;ye&&(Ke=he&&K?K.end:ye.begin),q.begin=q.explicit_begin?q.explicit_begin+Ke:Ke;var wt=q.begin,st=null;if("sets"in q)for(var at=0;at<q.sets.length;at++)T(M,q.sets[at],st,q),wt=q.timeContainer==="seq"?q.sets[at].end:Math.max(wt,q.sets[at].end),st=q.sets[at];if("contents"in q){if("contents"in q)for(var tt=0;tt<q.contents.length;tt++)T(M,q.contents[tt],st,q),wt=q.timeContainer==="seq"?q.contents[tt].end:Math.max(wt,q.contents[tt].end),st=q.contents[tt]}else wt=he?q.begin:Number.POSITIVE_INFINITY;q.explicit_end!==null&&q.explicit_dur!==null?q.end=Math.min(q.begin+q.explicit_dur,Ke+q.explicit_end):q.explicit_end===null&&q.explicit_dur!==null?q.end=q.begin+q.explicit_dur:q.explicit_end!==null&&q.explicit_dur===null?q.end=Ke+q.explicit_end:q.end=wt,delete q.explicit_begin,delete q.explicit_dur,delete q.explicit_end,M._registerEvent(q)}function U(M){this.node=M}function x(){this.events=[],this.head=new _,this.body=null}function _(){this.styling=new I,this.layout=new z}function I(){this.styles={},this.initials={}}function C(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function j(){this.styleAttrs=null}function z(){this.regions={}}function $(M,q){W.call(this,"image"),this.src=M,this.type=q}function W(M){this.kind=M}function ue(M){this.id=M}function N(M){this.regionID=M}function X(M){this.styleAttrs=M}function ce(M){this.sets=M}function oe(M){this.contents=M}function de(M,q,K){this.explicit_begin=M,this.explicit_end=q,this.explicit_dur=K}function Ce(){W.call(this,"body")}function Je(){W.call(this,"div")}function Te(){W.call(this,"p")}function je(){W.call(this,"span")}function nt(){W.call(this,"span")}function ct(){W.call(this,"br")}function Ie(){}function Ye(){}function mt(M){return M&&"xml:id"in M.attributes&&M.attributes["xml:id"].value||null}function xe(M){return M&&"style"in M.attributes?M.attributes.style.value.split(" "):[]}function We(M,q){var K={};if(M!==null)for(var ye in M.attributes){var he=M.attributes[ye].uri+" "+M.attributes[ye].local,Ke=v.byQName[he];if(Ke!==void 0){var wt=Ke.parse(M.attributes[ye].value);wt!==null?(K[he]=wt,Ke===v.byName.zIndex&&Re(q,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):re(q,"Cannot parse styling attribute "+he+" --> "+M.attributes[ye].value)}}return K}function it(M,q,K){for(var ye in M.attributes)if(M.attributes[ye].uri===q&&M.attributes[ye].local===K)return M.attributes[ye].value;return null}function qt(M,q,K){var ye,he=null;return(ye=/^(\d+(?:\.\d+)?)f$/.exec(K))!==null?q!==null&&(he=parseFloat(ye[1])/q):(ye=/^(\d+(?:\.\d+)?)t$/.exec(K))!==null?M!==null&&(he=parseFloat(ye[1])/M):(ye=/^(\d+(?:\.\d+)?)ms$/.exec(K))!==null?he=parseFloat(ye[1])/1e3:(ye=/^(\d+(?:\.\d+)?)s$/.exec(K))!==null?he=parseFloat(ye[1]):(ye=/^(\d+(?:\.\d+)?)h$/.exec(K))!==null?he=3600*parseFloat(ye[1]):(ye=/^(\d+(?:\.\d+)?)m$/.exec(K))!==null?he=60*parseFloat(ye[1]):(ye=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(K))!==null?he=3600*parseInt(ye[1])+60*parseInt(ye[2])+parseFloat(ye[3]):(ye=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(K))!==null&&q!==null&&(he=3600*parseInt(ye[1])+60*parseInt(ye[2])+parseInt(ye[3])+(ye[4]===null?0:parseInt(ye[4])/q)),he}function Ft(M,q,K){for(;q.styleRefs.length>0;){var ye=q.styleRefs.pop();ye in M.styles?(Ft(M,M.styles[ye],K),St(M.styles[ye].styleAttrs,q.styleAttrs)):re(K,"Non-existant style id referenced")}}function gt(M,q,K,ye){for(var he=q.length-1;he>=0;he--){var Ke=q[he];Ke in M.styles?St(M.styles[Ke].styleAttrs,K):re(ye,"Non-existant style id referenced")}}function St(M,q){for(var K in M)M.hasOwnProperty(K)&&(K in q||(q[K]=M[K]))}function Re(M,q){if(M&&M.warn&&M.warn(q))throw q}function re(M,q){if(M&&M.error&&M.error(q))throw q}function Be(M,q){throw M&&M.fatal&&M.fatal(q),q}function O(M,q){for(var K,ye=0,he=M.length-1;ye<=he;){var Ke=M[K=Math.floor((ye+he)/2)];if(Ke<q)ye=K+1;else{if(!(Ke>q))return{found:!0,index:K};he=K-1}}return{found:!1,index:ye}}F.fromXML=function(M,q,K){var ye=R.parser(!0,{xmlns:!0}),he=[],Ke=[],wt=[],st=0,at=null;ye.onclosetag=function(Ct){if(he[0]instanceof Ie)at.head!==null&&at.head.styling!==null&&gt(at.head.styling,he[0].styleRefs,he[0].styleAttrs,q),delete he[0].styleRefs;else if(he[0]instanceof I)for(var hn in he[0].styles)he[0].styles.hasOwnProperty(hn)&&Ft(he[0],he[0].styles[hn],q);else if(he[0]instanceof Te||he[0]instanceof je){if(he[0].contents.length>1){var Qt,nn=[he[0].contents[0]];for(Qt=1;Qt<he[0].contents.length;Qt++)he[0].contents[Qt]instanceof nt&&nn[nn.length-1]instanceof nt?nn[nn.length-1].text+=he[0].contents[Qt].text:nn.push(he[0].contents[Qt]);he[0].contents=nn}he[0]instanceof je&&he[0].contents.length===1&&he[0].contents[0]instanceof nt&&(he[0].text=he[0].contents[0].text,delete he[0].contents)}else he[0]instanceof U&&(he[0].node.uri===y.ns_tt&&he[0].node.local==="metadata"?st--:st>0&&K&&"onCloseTag"in K&&K.onCloseTag());wt.shift(),Ke.shift(),he.shift()},ye.ontext=function(Ct){if(he[0]!==void 0)if(he[0]instanceof je||he[0]instanceof Te){if(he[0]instanceof je){var hn=he[0].styleAttrs[v.byName.ruby.qname];if(hn==="container"||hn==="textContainer"||hn==="baseContainer")return}var Qt=new nt;Qt.initFromText(at,he[0],Ct,Ke[0],wt[0],q),he[0].contents.push(Qt)}else he[0]instanceof U&&st>0&&K&&"onText"in K&&K.onText(Ct)},ye.onopentag=function(Ct){var hn=Ct.attributes["xml:space"];hn?wt.unshift(hn.value):wt.length===0?wt.unshift("default"):wt.unshift(wt[0]);var Qt=Ct.attributes["xml:lang"];if(Qt?Ke.unshift(Qt.value):Ke.length===0?Ke.unshift(""):Ke.unshift(Ke[0]),Ct.uri===y.ns_tt)if(Ct.local==="tt")at!==null&&Be(q,"Two <tt> elements at ("+this.line+","+this.column+")"),(at=new x).initFromNode(Ct,Ke[0],q),he.unshift(at);else if(Ct.local==="head")he[0]instanceof x||Be(q,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),he.unshift(at.head);else if(Ct.local==="styling")he[0]instanceof _||Be(q,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),he.unshift(at.head.styling);else if(Ct.local==="style"){var nn;he[0]instanceof I?((nn=new C).initFromNode(Ct,q),nn.id?at.head.styling.styles[nn.id]=nn:re(q,"<style> element missing @id attribute"),he.unshift(nn)):he[0]instanceof Ie?((nn=new C).initFromNode(Ct,q),St(nn.styleAttrs,he[0].styleAttrs),he.unshift(nn)):Be(q,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Ct.local==="initial"){var Ot;if(he[0]instanceof I){for(var Un in(Ot=new j).initFromNode(Ct,q),Ot.styleAttrs)Ot.styleAttrs.hasOwnProperty(Un)&&(at.head.styling.initials[Un]=Ot.styleAttrs[Un]);he.unshift(Ot)}else Be(q,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Ct.local==="layout")he[0]instanceof _||Be(q,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),he.unshift(at.head.layout);else if(Ct.local==="region"){he[0]instanceof z||Be(q,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var gr=new Ie;gr.initFromNode(at,Ct,Ke[0],q),!gr.id||gr.id in at.head.layout.regions?re(q,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):at.head.layout.regions[gr.id]=gr,he.unshift(gr)}else if(Ct.local==="body"){he[0]instanceof x||Be(q,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),at.body!==null&&Be(q,"Second <body> element at "+this.line+","+this.column+")");var Or=new Ce;Or.initFromNode(at,Ct,Ke[0],q),at.body=Or,he.unshift(Or)}else if(Ct.local==="div"){he[0]instanceof Je||he[0]instanceof Ce||Be(q,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var dr=new Je;dr.initFromNode(at,he[0],Ct,Ke[0],q);var ei=dr.styleAttrs[v.byName.backgroundImage.qname];ei&&(dr.contents.push(new $(ei)),delete dr.styleAttrs[v.byName.backgroundImage.qname]),he[0].contents.push(dr),he.unshift(dr)}else if(Ct.local==="image"){he[0]instanceof Je||Be(q,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var Ji=new $;Ji.initFromNode(at,he[0],Ct,Ke[0],q),he[0].contents.push(Ji),he.unshift(Ji)}else if(Ct.local==="p"){he[0]instanceof Je||Be(q,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Lr=new Te;Lr.initFromNode(at,he[0],Ct,Ke[0],q),he[0].contents.push(Lr),he.unshift(Lr)}else if(Ct.local==="span"){he[0]instanceof je||he[0]instanceof Te||Be(q,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var eo=new je;eo.initFromNode(at,he[0],Ct,Ke[0],wt[0],q),he[0].contents.push(eo),he.unshift(eo)}else if(Ct.local==="br"){he[0]instanceof je||he[0]instanceof Te||Be(q,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var Ti=new ct;Ti.initFromNode(at,he[0],Ct,Ke[0],q),he[0].contents.push(Ti),he.unshift(Ti)}else if(Ct.local==="set"){he[0]instanceof je||he[0]instanceof Te||he[0]instanceof Je||he[0]instanceof Ce||he[0]instanceof Ie||he[0]instanceof ct||Be(q,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Di=new Ye;Di.initFromNode(at,he[0],Ct,q),he[0].sets.push(Di),he.unshift(Di)}else he.unshift(new U(Ct));else he.unshift(new U(Ct));if(he[0]instanceof U){if(Ct.uri===y.ns_tt&&Ct.local==="metadata")st++;else if(st>0&&K&&"onOpenTag"in K){var zi=[];for(var to in Ct.attributes)zi[Ct.attributes[to].uri+" "+Ct.attributes[to].local]={uri:Ct.attributes[to].uri,local:Ct.attributes[to].local,value:Ct.attributes[to].value};K.onOpenTag(Ct.uri,Ct.local,zi)}}},ye.write(M).close(),delete at.head.styling.styles;var tt=!1;for(var ft in at.head.layout.regions)if(at.head.layout.regions.hasOwnProperty(ft)){tt=!0;break}if(!tt){var Et=Ie.prototype.createDefaultRegion(at.lang);at.head.layout.regions[Et.id]=Et}for(var Tt in at.head.layout.regions)at.head.layout.regions.hasOwnProperty(Tt)&&T(at,at.head.layout.regions[Tt],null,null);return at.body&&T(at,at.body,null,null),at.body&&m(at.body),at},x.prototype.initFromNode=function(M,q,K){var ye=function(st,at){var tt=it(st,y.ns_ttp,"cellResolution"),ft=15,Et=32;if(tt!==null){var Tt=/(\d+) (\d+)/.exec(tt);Tt!==null?(Et=parseInt(Tt[1]),ft=parseInt(Tt[2])):Re(at,"Malformed cellResolution value (using initial value instead)")}return{w:Et,h:ft}}(M,K);this.cellLength={h:new D.ComputedLength(0,1/ye.h),w:new D.ComputedLength(1/ye.w,0)};var he=function(st,at){var tt,ft=it(st,y.ns_ttp,"frameRate"),Et=30;ft!==null&&((tt=/(\d+)/.exec(ft))!==null?Et=parseInt(tt[1]):Re(at,"Malformed frame rate attribute (using initial value instead)"));var Tt=it(st,y.ns_ttp,"frameRateMultiplier"),Ct=1;Tt!==null&&((tt=/(\d+) (\d+)/.exec(Tt))!==null?Ct=parseInt(tt[1])/parseInt(tt[2]):Re(at,"Malformed frame rate multiplier attribute (using initial value instead)"));var hn=Ct*Et,Qt=1,nn=it(st,y.ns_ttp,"tickRate");return nn===null?ft!==null&&(Qt=hn):(tt=/(\d+)/.exec(nn))!==null?Qt=parseInt(tt[1]):Re(at,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:hn,tickRate:Qt}}(M,K);this.effectiveFrameRate=he.effectiveFrameRate,this.tickRate=he.tickRate,this.aspectRatio=function(st,at){var tt=it(st,y.ns_ittp,"aspectRatio");tt===null&&(tt=it(st,y.ns_ttp,"displayAspectRatio"));var ft=null;if(tt!==null){var Et=/(\d+)\s+(\d+)/.exec(tt);if(Et!==null){var Tt=parseInt(Et[1]),Ct=parseInt(Et[2]);Tt!==0&&Ct!==0?ft=Tt/Ct:re(at,"Illegal aspectRatio values (ignoring)")}else re(at,"Malformed aspectRatio attribute (ignoring)")}return ft}(M,K);var Ke=it(M,y.ns_ttp,"timeBase");Ke!==null&&Ke!=="media"&&Be(K,"Unsupported time base");var wt=function(st,at){var tt=it(st,y.ns_tts,"extent");if(tt===null)return null;var ft=tt.split(" ");if(ft.length!==2)return Re(at,"Malformed extent (ignoring)"),null;var Et=D.parseLength(ft[0]),Tt=D.parseLength(ft[1]);return Tt&&Et?{h:Tt,w:Et}:(Re(at,"Malformed extent values (ignoring)"),null)}(M,K);wt===null?this.pxLength={h:null,w:null}:(wt.h.unit==="px"&&wt.w.unit==="px"||Be(K,"Extent on TT must be in px or absent"),this.pxLength={h:new D.ComputedLength(0,1/wt.h.value),w:new D.ComputedLength(1/wt.w.value,0)}),this.dimensions={h:new D.ComputedLength(0,1),w:new D.ComputedLength(1,0)},this.lang=q},x.prototype._registerEvent=function(M){if(!(M.end<=M.begin)){var q=O(this.events,M.begin);if(q.found||this.events.splice(q.index,0,M.begin),M.end!==Number.POSITIVE_INFINITY){var K=O(this.events,M.end);K.found||this.events.splice(K.index,0,M.end)}}},x.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},x.prototype.getMediaTimeEvents=function(){return this.events},C.prototype.initFromNode=function(M,q){this.id=mt(M),this.styleAttrs=We(M,q),this.styleRefs=xe(M)},j.prototype.initFromNode=function(M,q){for(var K in this.styleAttrs={},M.attributes)if(M.attributes[K].uri===y.ns_itts||M.attributes[K].uri===y.ns_ebutts||M.attributes[K].uri===y.ns_tts){var ye=M.attributes[K].uri+" "+M.attributes[K].local;this.styleAttrs[ye]=M.attributes[K].value}},$.prototype.initFromNode=function(M,q,K,ye,he){this.src="src"in K.attributes?K.attributes.src.value:null,this.src||re(he,"Invalid image@src attribute"),this.type="type"in K.attributes?K.attributes.type.value:null,this.type||re(he,"Invalid image@type attribute"),X.prototype.initFromNode.call(this,M,q,K,he),de.prototype.initFromNode.call(this,M,q,K,he),ce.prototype.initFromNode.call(this,M,q,K,he),N.prototype.initFromNode.call(this,M,q,K,he),this.lang=ye},ue.prototype.initFromNode=function(M,q,K,ye){this.id=mt(K)},N.prototype.initFromNode=function(M,q,K,ye){this.regionID=function(he){return he&&"region"in he.attributes?he.attributes.region.value:""}(K)},X.prototype.initFromNode=function(M,q,K,ye){this.styleAttrs=We(K,ye),M.head!==null&&M.head.styling!==null&&gt(M.head.styling,xe(K),this.styleAttrs,ye)},ce.prototype.initFromNode=function(M,q,K,ye){this.sets=[]},oe.prototype.initFromNode=function(M,q,K,ye){this.contents=[]},de.prototype.initFromNode=function(M,q,K,ye){var he=function(Ke,wt,st,at){var tt=null;st&&"begin"in st.attributes&&(tt=qt(Ke.tickRate,Ke.effectiveFrameRate,st.attributes.begin.value))===null&&Re(at,"Malformed begin value "+st.attributes.begin.value+" (using 0)");var ft=null;st&&"dur"in st.attributes&&(ft=qt(Ke.tickRate,Ke.effectiveFrameRate,st.attributes.dur.value))===null&&Re(at,"Malformed dur value "+st.attributes.dur.value+" (ignoring)");var Et=null;return st&&"end"in st.attributes&&(Et=qt(Ke.tickRate,Ke.effectiveFrameRate,st.attributes.end.value))===null&&Re(at,"Malformed end value (ignoring)"),{explicit_begin:tt,explicit_end:Et,explicit_dur:ft}}(M,0,K,ye);this.explicit_begin=he.explicit_begin,this.explicit_end=he.explicit_end,this.explicit_dur=he.explicit_dur,this.timeContainer=function(Ke,wt){var st=Ke&&"timeContainer"in Ke.attributes?Ke.attributes.timeContainer.value:null;return st&&st!=="par"?st==="seq"?"seq":(re(wt,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(K,ye)},Ce.prototype.initFromNode=function(M,q,K,ye){X.prototype.initFromNode.call(this,M,null,q,ye),de.prototype.initFromNode.call(this,M,null,q,ye),ce.prototype.initFromNode.call(this,M,null,q,ye),N.prototype.initFromNode.call(this,M,null,q,ye),oe.prototype.initFromNode.call(this,M,null,q,ye),this.lang=K},Je.prototype.initFromNode=function(M,q,K,ye,he){X.prototype.initFromNode.call(this,M,q,K,he),de.prototype.initFromNode.call(this,M,q,K,he),ce.prototype.initFromNode.call(this,M,q,K,he),N.prototype.initFromNode.call(this,M,q,K,he),oe.prototype.initFromNode.call(this,M,q,K,he),this.lang=ye},Te.prototype.initFromNode=function(M,q,K,ye,he){X.prototype.initFromNode.call(this,M,q,K,he),de.prototype.initFromNode.call(this,M,q,K,he),ce.prototype.initFromNode.call(this,M,q,K,he),N.prototype.initFromNode.call(this,M,q,K,he),oe.prototype.initFromNode.call(this,M,q,K,he),this.lang=ye},je.prototype.initFromNode=function(M,q,K,ye,he,Ke){X.prototype.initFromNode.call(this,M,q,K,Ke),de.prototype.initFromNode.call(this,M,q,K,Ke),ce.prototype.initFromNode.call(this,M,q,K,Ke),N.prototype.initFromNode.call(this,M,q,K,Ke),oe.prototype.initFromNode.call(this,M,q,K,Ke),this.space=he,this.lang=ye},nt.prototype.initFromText=function(M,q,K,ye,he,Ke){de.prototype.initFromNode.call(this,M,q,null,Ke),this.text=K,this.space=he,this.lang=ye},ct.prototype.initFromNode=function(M,q,K,ye,he){N.prototype.initFromNode.call(this,M,q,K,he),de.prototype.initFromNode.call(this,M,q,K,he),this.lang=ye},Ie.prototype.createDefaultRegion=function(M){var q=new Ie;return ue.call(q,""),X.call(q,{}),ce.call(q,[]),de.call(q,0,Number.POSITIVE_INFINITY,null),this.lang=M,q},Ie.prototype.initFromNode=function(M,q,K,ye){ue.prototype.initFromNode.call(this,M,null,q,ye),de.prototype.initFromNode.call(this,M,null,q,ye),ce.prototype.initFromNode.call(this,M,null,q,ye),this.styleAttrs=We(q,ye),this.styleRefs=xe(q),this.lang=K},Ye.prototype.initFromNode=function(M,q,K,ye){de.prototype.initFromNode.call(this,M,q,K,ye);var he=We(K,ye);for(var Ke in this.qname=null,this.value=null,he)if(he.hasOwnProperty(Ke)){if(this.qname){re(ye,"More than one style specified on set");break}this.qname=Ke,this.value=he[Ke]}}})(g,typeof sax>"u"?w(5378):sax,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},506:function(b,g,w){var F=/firefox/i.test(navigator.userAgent);(function(R,y,v){function D(oe,de,Ce,Je){var Te;if(Ce.kind==="region")(Te=document.createElement("div")).style.position="absolute";else if(Ce.kind==="body")Te=document.createElement("div");else if(Ce.kind==="div")Te=document.createElement("div");else if(Ce.kind==="image"){if(Te=document.createElement("img"),oe.imgResolver!==null&&Ce.src!==null){var je=oe.imgResolver(Ce.src,Te);je&&(Te.src=je),Te.height=oe.regionH,Te.width=oe.regionW}}else if(Ce.kind==="p")Te=document.createElement("p");else if(Ce.kind==="span")if(Ce.styleAttrs[v.byName.ruby.qname]==="container")Te=document.createElement("ruby"),oe.ruby=!0;else if(Ce.styleAttrs[v.byName.ruby.qname]==="base")Te=document.createElement("span");else if(Ce.styleAttrs[v.byName.ruby.qname]==="text")Te=document.createElement("rt");else if(Ce.styleAttrs[v.byName.ruby.qname]==="baseContainer")Te=document.createElement("rbc");else if(Ce.styleAttrs[v.byName.ruby.qname]==="textContainer")Te=document.createElement("rtc");else{if(Ce.styleAttrs[v.byName.ruby.qname]==="delimiter")return;Te=document.createElement("span")}else Ce.kind==="br"&&(Te=document.createElement("br"));if(Te){if(Ce.lang&&(Ce.kind!=="region"&&Ce.lang===Je.lang||(Te.lang=Ce.lang)),de.appendChild(Te),Te.style.margin="0",Ce.kind==="region"){var nt=Ce.styleAttrs[v.byName.writingMode.qname];nt==="lrtb"||nt==="lr"?(oe.ipd="lr",oe.bpd="tb"):nt==="rltb"||nt==="rl"?(oe.ipd="rl",oe.bpd="tb"):nt==="tblr"?(oe.ipd="tb",oe.bpd="lr"):nt!=="tbrl"&&nt!=="tb"||(oe.ipd="tb",oe.bpd="rl")}else if(Ce.kind==="p"&&oe.bpd==="tb"){var ct=Ce.styleAttrs[v.byName.direction.qname];oe.ipd=ct==="ltr"?"lr":"rl"}for(var Ie=0;Ie<j.length;Ie++){var Ye=j[Ie],mt=Ce.styleAttrs[Ye.qname];mt!==void 0&&Ye.map!==null&&Ye.map(oe,Te,Ce,mt)}var xe=Te,We=Ce.styleAttrs[v.byName.linePadding.qname];if(We&&!We.isZero()){var it=We.toUsedLength(oe.w,oe.h);if(it>0){var qt=Math.ceil(it)+"px";oe.bpd==="tb"?(xe.style.paddingLeft=qt,xe.style.paddingRight=qt):(xe.style.paddingTop=qt,xe.style.paddingBottom=qt),oe.lp=We}}var Ft=Ce.styleAttrs[v.byName.multiRowAlign.qname];if(Ft&&Ft!=="auto"){var gt=document.createElement("span");gt.style.display="inline-block",gt.style.textAlign=Ft,Te.appendChild(gt),xe=gt,oe.mra=Ft}var St=Ce.styleAttrs[v.byName.rubyReserve.qname];if(St&&St[0]!=="none"&&(oe.rubyReserve=St),Ce.styleAttrs[v.byName.fillLineGap.qname]&&(oe.flg=!0),Ce.kind==="span"&&Ce.text){var Re=Ce.styleAttrs[v.byName.textEmphasis.qname];if(Re&&Re.style!=="none"&&(oe.textEmphasis=!0),v.byName.textCombine.qname in Ce.styleAttrs&&Ce.styleAttrs[v.byName.textCombine.qname]==="all")Te.textContent=Ce.text,Te._isd_element=Ce,Re&&I(oe,Te,0,Re);else for(var re="",Be=0;Be<Ce.text.length;Be++){re+=Ce.text.charAt(Be);var O=Ce.text.charCodeAt(Be);if(O<55296||O>56319||Be===Ce.text.length-1){var M=document.createElement("span");M.textContent=re,Re&&I(oe,M,0,Re),Te.appendChild(M),re="",M._isd_element=Ce}}}if("contents"in Ce)for(var q=0;q<Ce.contents.length;q++)D(oe,xe,Ce.contents[q],Ce);var K=[];if(Ce.kind==="p"&&(_(oe,xe,K,null),oe.rubyReserve&&(function(st,at){for(var tt=0;tt<st.length;tt++){var ft,Et,Tt=document.createElement("ruby"),Ct=document.createElement("span");Ct.textContent="​",Tt.appendChild(Ct);var hn,Qt=at.rubyReserve[1].toUsedLength(at.w,at.h)+"px";at.rubyReserve[0]==="both"||at.rubyReserve[0]==="outside"&&st.length==1?((ft=document.createElement("rtc")).style[ue]=W?"after":"under",ft.textContent="​",ft.style.fontSize=Qt,(Et=document.createElement("rtc")).style[ue]=W?"before":"over",Et.textContent="​",Et.style.fontSize=Qt,Tt.appendChild(ft),Tt.appendChild(Et)):((ft=document.createElement("rtc")).textContent="​",ft.style.fontSize=Qt,hn=at.rubyReserve[0]==="after"||at.rubyReserve[0]==="outside"&&tt>0?W?"after":at.bpd==="tb"||at.bpd==="rl"?"under":"over":W?"before":at.bpd==="tb"||at.bpd==="rl"?"over":"under",ft.style[ue]=hn,Tt.appendChild(ft));for(var nn=null,Ot=0;Ot<st[tt].rbc.length;Ot++)if(st[tt].rbc[Ot].localName==="ruby"){nn=st[tt].rbc[Ot];for(var Un=0;Un<nn.style.length;Un++)Tt.style.setProperty(nn.style.item(Un),nn.style.getPropertyValue(nn.style.item(Un)));break}(nn=nn||st[tt].elements[0].node).parentElement.insertBefore(Tt,nn)}}(K,oe),oe.rubyReserve=null),(oe.ruby||oe.rubyReserve)&&(function(st,at){for(var tt=0;tt<st.length;tt++)for(var ft=0;ft<st[tt].rbc.length;ft++){var Et;st[tt].rbc[ft].style[ue]||(Et=W?tt===0?"before":"after":at.bpd==="tb"||at.bpd==="rl"?tt===0?"over":"under":tt===0?"under":"over",st[tt].rbc[ft].style[ue]=Et)}}(K,oe),oe.ruby=null),oe.textEmphasis&&(function(st,at){for(var tt=0;tt<st.length;tt++)for(var ft=0;ft<st[tt].te.length;ft++){var Et;st[tt].te[ft].style[X]&&st[tt].te[ft].style[X]!=="none"||(Et=at.bpd==="tb"?tt===0?"left over":"left under":at.bpd==="rl"?tt===0?"right under":"left under":tt===0?"left under":"right under",st[tt].te[ft].style[X]=Et)}}(K,oe),oe.textEmphasis=null),oe.mra&&(function(st){for(var at=0;at<st.length-1;at++){var tt=st[at].elements.length;if(tt!==0&&st[at].br===!1){var ft=document.createElement("br"),Et=st[at].elements[tt-1].node;Et.parentElement.insertBefore(ft,Et.nextSibling)}}}(K),oe.mra=null),oe.lp&&(function(st,at,tt){if(st!==null)for(var ft=0;ft<st.length;ft++){var Et=st[ft].elements.length,Tt=Math.ceil(at)+"px",Ct="-"+Math.ceil(at)+"px";if(Et!==0){var hn=st[ft].elements[st[ft].start_elem],Qt=st[ft].elements[st[ft].end_elem];if(hn===Qt){var nn=hn.node.getBoundingClientRect();if(nn.width==0||nn.height==0)continue}tt.ipd==="lr"?(hn.node.style.marginLeft=Ct,hn.node.style.paddingLeft=Tt):tt.ipd==="rl"?(hn.node.style.paddingRight=Tt,hn.node.style.marginRight=Ct):tt.ipd==="tb"&&(hn.node.style.paddingTop=Tt,hn.node.style.marginTop=Ct),tt.ipd==="lr"?(F||(Qt.node.style.marginRight=Ct),Qt.node.style.paddingRight=Tt):tt.ipd==="rl"?(Qt.node.style.paddingLeft=Tt,F||(Qt.node.style.marginLeft=Ct)):tt.ipd==="tb"&&(Qt.node.style.paddingBottom=Tt,Qt.node.style.marginBottom=Ct)}}}(K,oe.lp.toUsedLength(oe.w,oe.h),oe),oe.lp=null),function(st,at){for(var tt=0;tt<st.length;tt++)for(var ft=st[tt],Et=1;Et<ft.elements.length;){var Tt=ft.elements[Et-1],Ct=ft.elements[Et];T(Tt.node,Ct.node,at)?ft.elements.splice(Et,1):Et++}for(var hn,Qt,nn=[],Ot=0;Ot<st.length;Ot++)for(var Un=0;Un<st[Ot].elements.length;Un++)(Qt=m(hn=st[Ot].elements[Un].node,nn,!1))&&(hn.style.backgroundColor=Qt);for(var gr=0;gr<nn.length;gr++)nn[gr].style.backgroundColor=""}(K,oe),oe.flg)){var ye=x(xe.getBoundingClientRect(),oe);(function(st,at,tt,ft,Et){for(var Tt=Math.sign(tt-at),Ct=0;Ct<=st.length;Ct++){var hn,Qt,nn,Ot;if(hn=Ct===0?Math.round(at):Ct===st.length?Math.round(tt):Math.round((st[Ct-1].after+st[Ct].before)/2),Ct>0&&st[Ct-1])for(nn=0;nn<st[Ct-1].elements.length;nn++)Qt=Tt*(hn-(Ot=st[Ct-1].elements[nn]).after)+"px",ft.bpd==="lr"?Ot.node.style.paddingRight=Qt:ft.bpd==="rl"?Ot.node.style.paddingLeft=Qt:ft.bpd==="tb"&&(Ot.node.style.paddingBottom=Qt);if(Ct<st.length)for(nn=0;nn<st[Ct].elements.length;nn++)Qt=Tt*((Ot=st[Ct].elements[nn]).before-hn)+"px",ft.bpd==="lr"?Ot.node.style.paddingLeft=Qt:ft.bpd==="rl"?Ot.node.style.paddingRight=Qt:ft.bpd==="tb"&&(Ot.node.style.paddingTop=Qt)}})(K,ye.before,ye.after,oe),oe.flg=null}if(Ce.kind==="region"&&oe.bpd==="tb"&&oe.enableRollUp&&Ce.contents.length>0&&Ce.styleAttrs[v.byName.displayAlign.qname]==="after"){_(oe,xe,K,null);var he=new U(Ce.id===""?"_":Ce.id,K);if(oe.currentISDState[he.id]=he,oe.previousISDState&&he.id in oe.previousISDState&&oe.previousISDState[he.id].plist.length>0&&he.plist.length>1&&he.plist[he.plist.length-2].text===oe.previousISDState[he.id].plist[oe.previousISDState[he.id].plist.length-1].text){var Ke=Te.firstElementChild,wt=he.plist[he.plist.length-1].after-he.plist[he.plist.length-1].before;Ke.style.bottom="-"+wt+"px",Ke.style.transition="transform 0.4s",Ke.style.position="relative",Ke.style.transform="translateY(-"+wt+"px)"}}}else ce(oe.errorHandler,"Error processing ISD element kind: "+Ce.kind)}function m(oe,de,Ce){return oe.style.backgroundColor?(Ce&&!de.includes(oe)&&de.push(oe),oe.style.backgroundColor):oe.parentElement.nodeName==="SPAN"||oe.parentElement.nodeName==="RUBY"||oe.parentElement.nodeName==="RBC"||oe.parentElement.nodeName==="RTC"||oe.parentElement.nodeName==="RT"?m(oe.parentElement,de,!0):void 0}function T(oe,de,Ce){if(oe.tagName==="SPAN"&&de.tagName==="SPAN"&&oe._isd_element===de._isd_element){if(!oe._isd_element)return ce(Ce.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;oe.textContent+=de.textContent;for(var Je=0;Je<de.style.length;Je++){var Te=de.style[Je];(Te.indexOf("border")>=0||Te.indexOf("padding")>=0||Te.indexOf("margin")>=0)&&(oe.style[Te]=de.style[Te])}return de.parentElement.removeChild(de),!0}return!1}function U(oe,de){this.id=oe,this.plist=de}function x(oe,de){var Ce={before:null,after:null,start:null,end:null};return de.bpd==="tb"?(Ce.before=oe.top,Ce.after=oe.bottom,de.ipd==="lr"?(Ce.start=oe.left,Ce.end=oe.right):(Ce.start=oe.right,Ce.end=oe.left)):de.bpd==="lr"?(Ce.before=oe.left,Ce.after=oe.right,Ce.start=oe.top,Ce.end=oe.bottom):de.bpd==="rl"&&(Ce.before=oe.right,Ce.after=oe.left,Ce.start=oe.top,Ce.end=oe.bottom),Ce}function _(oe,de,Ce,Je){if(de.localName!=="rt"&&de.localName!=="rtc"){var Te,je,nt,ct,Ie=de.style.backgroundColor||Je;if(de.childElementCount===0)if(de.localName==="span"||de.localName==="rb"){var Ye=x(de.getBoundingClientRect(),oe);if(Ce.length!==0&&(Te=Ye.before,je=Ye.after,nt=Ce[Ce.length-1].before,je<(ct=Ce[Ce.length-1].after)&&Te>nt||ct<=je&&nt>=Te)){var mt=Math.sign(Ye.after-Ye.before),xe=Math.sign(Ye.end-Ye.start);mt*(Ye.before-Ce[Ce.length-1].before)<0&&(Ce[Ce.length-1].before=Ye.before),mt*(Ye.after-Ce[Ce.length-1].after)>0&&(Ce[Ce.length-1].after=Ye.after),xe*(Ye.start-Ce[Ce.length-1].start)<0&&(Ce[Ce.length-1].start=Ye.start,Ce[Ce.length-1].start_elem=Ce[Ce.length-1].elements.length),xe*(Ye.end-Ce[Ce.length-1].end)>0&&(Ce[Ce.length-1].end=Ye.end,Ce[Ce.length-1].end_elem=Ce[Ce.length-1].elements.length)}else Ce.push({before:Ye.before,after:Ye.after,start:Ye.start,end:Ye.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});Ce[Ce.length-1].text+=de.textContent,Ce[Ce.length-1].elements.push({node:de,bgcolor:Ie,before:Ye.before,after:Ye.after})}else de.localName==="br"&&Ce.length!==0&&(Ce[Ce.length-1].br=!0);else for(var We=de.firstChild;We;)We.nodeType===Node.ELEMENT_NODE&&(_(oe,We,Ce,Ie),We.localName==="ruby"||We.localName==="rtc"?Ce.length>0&&Ce[Ce.length-1].rbc.push(We):We.localName==="span"&&We.style[N]&&We.style[N]!=="none"&&Ce.length>0&&Ce[Ce.length-1].te.push(We)),We=We.nextSibling}}function I(oe,de,Ce,Je){var Te;Je.style!=="none"&&(Je.style==="auto"?de.style[N]="filled":de.style[N]=Je.style+" "+Je.symbol,(Je.position==="before"||Je.position==="after")&&(Te=oe.bpd==="tb"?Je.position==="before"?"left over":"left under":oe.bpd==="rl"?Je.position==="before"?"right under":"left under":Je.position==="before"?"left under":"right under",de.style[X]=Te))}function C(oe,de){this.qname=oe,this.map=de}R.render=function(oe,de,Ce,Je,Te,je,nt,ct,Ie){var Ye=Je||de.clientHeight,mt=Te||de.clientWidth;if(oe.aspectRatio!==null){var xe=Ye*oe.aspectRatio;xe>mt?Ye=Math.round(mt/oe.aspectRatio):mt=xe}var We=document.createElement("div");We.style.position="relative",We.style.width=mt+"px",We.style.height=Ye+"px",We.style.margin="auto",We.style.top=0,We.style.bottom=0,We.style.left=0,We.style.right=0,We.style.zIndex=0;var it={h:Ye,w:mt,regionH:null,regionW:null,imgResolver:Ce,displayForcedOnlyMode:je||!1,isd:oe,errorHandler:nt,previousISDState:ct,enableRollUp:Ie||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(de.appendChild(We),"contents"in oe)for(var qt=0;qt<oe.contents.length;qt++)D(it,We,oe.contents[qt],oe);return it.currentISDState};for(var j=[new C("http://www.w3.org/ns/ttml#styling backgroundColor",function(oe,de,Ce,Je){Je[3]!==0&&(de.style.backgroundColor="rgba("+Je[0].toString()+","+Je[1].toString()+","+Je[2].toString()+","+(Je[3]/255).toString()+")")}),new C("http://www.w3.org/ns/ttml#styling color",function(oe,de,Ce,Je){de.style.color="rgba("+Je[0].toString()+","+Je[1].toString()+","+Je[2].toString()+","+(Je[3]/255).toString()+")"}),new C("http://www.w3.org/ns/ttml#styling direction",function(oe,de,Ce,Je){de.style.direction=Je}),new C("http://www.w3.org/ns/ttml#styling display",function(oe,de,Ce,Je){}),new C("http://www.w3.org/ns/ttml#styling displayAlign",function(oe,de,Ce,Je){de.style.display="flex",de.style.flexDirection="column",Je==="before"?de.style.justifyContent="flex-start":Je==="center"?de.style.justifyContent="center":Je==="after"&&(de.style.justifyContent="flex-end")}),new C("http://www.w3.org/ns/ttml#styling extent",function(oe,de,Ce,Je){oe.regionH=Je.h.toUsedLength(oe.w,oe.h),oe.regionW=Je.w.toUsedLength(oe.w,oe.h);var Te=0,je=0,nt=Ce.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];nt&&(Te=nt[0].toUsedLength(oe.w,oe.h)+nt[2].toUsedLength(oe.w,oe.h),je=nt[1].toUsedLength(oe.w,oe.h)+nt[3].toUsedLength(oe.w,oe.h)),de.style.height=oe.regionH-Te+"px",de.style.width=oe.regionW-je+"px"}),new C("http://www.w3.org/ns/ttml#styling fontFamily",function(oe,de,Ce,Je){for(var Te=[],je=0;je<Je.length;je++)Je[je]=Je[je].trim(),Je[je]==="monospaceSerif"?(Te.push("Courier New"),Te.push('"Liberation Mono"'),Te.push("Courier"),Te.push("monospace")):Je[je]==="proportionalSansSerif"?(Te.push("Arial"),Te.push("Helvetica"),Te.push('"Liberation Sans"'),Te.push("sans-serif")):Je[je]==="monospace"?Te.push("monospace"):Je[je]==="sansSerif"?Te.push("sans-serif"):Je[je]==="serif"?Te.push("serif"):Je[je]==="monospaceSansSerif"?(Te.push("Consolas"),Te.push("monospace")):Je[je]==="proportionalSerif"?Te.push("serif"):Te.push(Je[je]);if(Te.length>0){for(var nt=[Te[0]],ct=1;ct<Te.length;ct++)nt.indexOf(Te[ct])==-1&&nt.push(Te[ct]);Te=nt}de.style.fontFamily=Te.join(",")}),new C("http://www.w3.org/ns/ttml#styling shear",function(oe,de,Ce,Je){if(Je!==0){var Te=-.9*Je;oe.bpd==="tb"?de.style.transform="skewX("+Te+"deg)":de.style.transform="skewY("+Te+"deg)"}}),new C("http://www.w3.org/ns/ttml#styling fontSize",function(oe,de,Ce,Je){de.style.fontSize=Je.toUsedLength(oe.w,oe.h)+"px"}),new C("http://www.w3.org/ns/ttml#styling fontStyle",function(oe,de,Ce,Je){de.style.fontStyle=Je}),new C("http://www.w3.org/ns/ttml#styling fontWeight",function(oe,de,Ce,Je){de.style.fontWeight=Je}),new C("http://www.w3.org/ns/ttml#styling lineHeight",function(oe,de,Ce,Je){de.style.lineHeight=Je==="normal"?"normal":Je.toUsedLength(oe.w,oe.h)+"px"}),new C("http://www.w3.org/ns/ttml#styling opacity",function(oe,de,Ce,Je){de.style.opacity=Je}),new C("http://www.w3.org/ns/ttml#styling origin",function(oe,de,Ce,Je){de.style.top=Je.h.toUsedLength(oe.w,oe.h)+"px",de.style.left=Je.w.toUsedLength(oe.w,oe.h)+"px"}),new C("http://www.w3.org/ns/ttml#styling overflow",function(oe,de,Ce,Je){de.style.overflow=Je}),new C("http://www.w3.org/ns/ttml#styling padding",function(oe,de,Ce,Je){var Te=[];Te[0]=Je[0].toUsedLength(oe.w,oe.h)+"px",Te[1]=Je[3].toUsedLength(oe.w,oe.h)+"px",Te[2]=Je[2].toUsedLength(oe.w,oe.h)+"px",Te[3]=Je[1].toUsedLength(oe.w,oe.h)+"px",de.style.padding=Te.join(" ")}),new C("http://www.w3.org/ns/ttml#styling position",function(oe,de,Ce,Je){de.style.top=Je.h.toUsedLength(oe.w,oe.h)+"px",de.style.left=Je.w.toUsedLength(oe.w,oe.h)+"px"}),new C("http://www.w3.org/ns/ttml#styling rubyAlign",function(oe,de,Ce,Je){de.style.rubyAlign=Je==="spaceAround"?"space-around":"center"}),new C("http://www.w3.org/ns/ttml#styling rubyPosition",function(oe,de,Ce,Je){var Te;Je!=="before"&&Je!=="after"||(Te=W?Je:oe.bpd==="tb"||oe.bpd==="rl"?Je==="before"?"over":"under":Je==="before"?"under":"over",de.parentElement.style[ue]=Te)}),new C("http://www.w3.org/ns/ttml#styling showBackground",null),new C("http://www.w3.org/ns/ttml#styling textAlign",function(oe,de,Ce,Je){var Te;Te=Je==="start"?oe.ipd==="rl"?"right":"left":Je==="end"?oe.ipd==="rl"?"left":"right":Je,de.style.textAlign=Te}),new C("http://www.w3.org/ns/ttml#styling textDecoration",function(oe,de,Ce,Je){de.style.textDecoration=Je.join(" ").replace("lineThrough","line-through")}),new C("http://www.w3.org/ns/ttml#styling textOutline",function(oe,de,Ce,Je){}),new C("http://www.w3.org/ns/ttml#styling textShadow",function(oe,de,Ce,Je){var Te=Ce.styleAttrs[v.byName.textOutline.qname];if(Je==="none"&&Te==="none")de.style.textShadow="";else{var je=[];if(Te!=="none"){var nt="rgba("+Te.color[0].toString()+","+Te.color[1].toString()+","+Te.color[2].toString()+","+(Te.color[3]/255).toString()+")";je.push("1px 1px 1px "+nt),je.push("-1px 1px 1px "+nt),je.push("1px -1px 1px "+nt),je.push("-1px -1px 1px "+nt)}if(Je!=="none")for(var ct=0;ct<Je.length;ct++)je.push(Je[ct].x_off.toUsedLength(oe.w,oe.h)+"px "+Je[ct].y_off.toUsedLength(oe.w,oe.h)+"px "+Je[ct].b_radius.toUsedLength(oe.w,oe.h)+"px rgba("+Je[ct].color[0].toString()+","+Je[ct].color[1].toString()+","+Je[ct].color[2].toString()+","+(Je[ct].color[3]/255).toString()+")");de.style.textShadow=je.join(",")}}),new C("http://www.w3.org/ns/ttml#styling textCombine",function(oe,de,Ce,Je){de.style.textCombineUpright=Je}),new C("http://www.w3.org/ns/ttml#styling textEmphasis",function(oe,de,Ce,Je){}),new C("http://www.w3.org/ns/ttml#styling unicodeBidi",function(oe,de,Ce,Je){var Te;Te=Je==="bidiOverride"?"bidi-override":Je,de.style.unicodeBidi=Te}),new C("http://www.w3.org/ns/ttml#styling visibility",function(oe,de,Ce,Je){de.style.visibility=Je}),new C("http://www.w3.org/ns/ttml#styling wrapOption",function(oe,de,Ce,Je){Je==="wrap"?Ce.space==="preserve"?de.style.whiteSpace="pre-wrap":de.style.whiteSpace="normal":Ce.space==="preserve"?de.style.whiteSpace="pre":de.style.whiteSpace="noWrap"}),new C("http://www.w3.org/ns/ttml#styling writingMode",function(oe,de,Ce,Je){Je==="lrtb"||Je==="lr"||Je==="rltb"||Je==="rl"?de.style.writingMode="horizontal-tb":Je==="tblr"?de.style.writingMode="vertical-lr":Je!=="tbrl"&&Je!=="tb"||(de.style.writingMode="vertical-rl")}),new C("http://www.w3.org/ns/ttml#styling zIndex",function(oe,de,Ce,Je){de.style.zIndex=Je}),new C("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(oe,de,Ce,Je){oe.displayForcedOnlyMode&&Je===!1&&(de.style.visibility="hidden")})],z={},$=0;$<j.length;$++)z[j[$].qname]=j[$];var W="webkitRubyPosition"in window.getComputedStyle(document.documentElement),ue=W?"webkitRubyPosition":"rubyPosition",N="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",X="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function ce(oe,de){if(oe&&oe.error&&oe.error(de))throw de}})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4080:function(b,g,w){(function(F,R,y,v){F.generateISD=function(C,j,z){var $,W=new x(C),ue={},N={},X=C.head.styling.initials[y.byName.showBackground.qname],ce=C.head.styling.initials[y.byName.backgroundColor.qname];for(var oe in C.head.layout.regions)if(C.head.layout.regions.hasOwnProperty(oe)){var de=C.head.layout.regions[oe],Ce=de.styleAttrs[y.byName.showBackground.qname]||X,Je=de.styleAttrs[y.byName.backgroundColor.qname]||ce;N[de.id]=(Ce==="always"||Ce===void 0)&&Je!==void 0&&!(j<de.begin||j>=de.end)}for(var Te in C.body&&C.body.regionID&&(N[C.body.regionID]=!0),$=C.body!==null?function nt(ct,Ie){if(Ie.contents){var Ye={};for(var mt in Ie)Ie.hasOwnProperty(mt)&&(Ye[mt]=Ie[mt]);return Ye.contents=[],Ie.contents.filter(function(xe){return!(ct<xe.begin||ct>=xe.end)}).forEach(function(xe){var We=nt(ct,xe);We.regionID&&(N[We.regionID]=!0),We!==null&&Ye.contents.push(We)}),Ye}return Ie}(j,C.body):null,N[""]!==void 0&&(N[""]=!0),N)if(N[Te]){var je=m(C,j,C.head.layout.regions[Te],$,null,"",C.head.layout.regions[Te],z,ue);je!==null&&W.contents.push(je.element)}return W};var D=[y.byName.color.qname,y.byName.textCombine.qname,y.byName.textDecoration.qname,y.byName.textEmphasis.qname,y.byName.textOutline.qname,y.byName.textShadow.qname];function m(C,j,z,$,W,ue,N,X,ce){if(j<N.begin||j>=N.end)return null;var oe="regionID"in N&&N.regionID!==""?N.regionID:ue;if(W!==null&&oe!==z.id&&(!("contents"in N)||"contents"in N&&N.contents.length===0||oe!==""))return null;var de=new _(N);if("sets"in N)for(var Ce=0;Ce<N.sets.length;Ce++)j<N.sets[Ce].begin||j>=N.sets[Ce].end||(de.styleAttrs[N.sets[Ce].qname]=N.sets[Ce].value);var Je={};for(var Te in de.styleAttrs)if(de.styleAttrs.hasOwnProperty(Te)&&(Je[Te]=!0,de.kind==="region"&&Te===y.byName.writingMode.qname&&!(y.byName.direction.qname in de.styleAttrs))){var je=de.styleAttrs[Te];je==="lrtb"||je==="lr"?de.styleAttrs[y.byName.direction.qname]="ltr":je!=="rltb"&&je!=="rl"||(de.styleAttrs[y.byName.direction.qname]="rtl")}if(W!==null)for(var nt=0;nt<y.all.length;nt++){var ct=y.all[nt];if(ct.qname===y.byName.textDecoration.qname){var Ie=W.styleAttrs[ct.qname],Ye=de.styleAttrs[ct.qname],mt=[];Ye===void 0?mt=Ie:Ye.indexOf("none")===-1?((Ye.indexOf("noUnderline")===-1&&Ie.indexOf("underline")!==-1||Ye.indexOf("underline")!==-1)&&mt.push("underline"),(Ye.indexOf("noLineThrough")===-1&&Ie.indexOf("lineThrough")!==-1||Ye.indexOf("lineThrough")!==-1)&&mt.push("lineThrough"),(Ye.indexOf("noOverline")===-1&&Ie.indexOf("overline")!==-1||Ye.indexOf("overline")!==-1)&&mt.push("overline")):mt.push("none"),de.styleAttrs[ct.qname]=mt}else if(ct.qname!==y.byName.fontSize.qname||ct.qname in de.styleAttrs||de.kind!=="span"||de.styleAttrs[y.byName.ruby.qname]!=="textContainer")if(ct.qname!==y.byName.fontSize.qname||ct.qname in de.styleAttrs||de.kind!=="span"||de.styleAttrs[y.byName.ruby.qname]!=="text")ct.inherit&&ct.qname in W.styleAttrs&&!(ct.qname in de.styleAttrs)&&(de.styleAttrs[ct.qname]=W.styleAttrs[ct.qname]);else{var xe=W.styleAttrs[y.byName.fontSize.qname];W.styleAttrs[y.byName.ruby.qname]==="textContainer"?de.styleAttrs[ct.qname]=xe:de.styleAttrs[ct.qname]=new v.ComputedLength(.5*xe.rw,.5*xe.rh)}else{var We=W.styleAttrs[y.byName.fontSize.qname];de.styleAttrs[ct.qname]=new v.ComputedLength(.5*We.rw,.5*We.rh)}}for(var it=0;it<y.all.length;it++){var qt=y.all[it];if(!(qt.qname in de.styleAttrs)&&!(qt.qname===y.byName.position.qname&&y.byName.origin.qname in de.styleAttrs||qt.qname===y.byName.origin.qname&&y.byName.position.qname in de.styleAttrs)){var Ft=C.head.styling.initials[qt.qname]||qt.initial;if(Ft!==null&&(de.kind==="region"||qt.inherit===!1&&Ft!==null)){var gt=qt.parse(Ft);gt!==null?(de.styleAttrs[qt.qname]=gt,Je[qt.qname]=!0):I(X,"Invalid initial value for '"+qt.qname+"' on element '"+de.kind)}}}for(var St=0;St<y.all.length;St++){var Re=y.all[St];if(Re.qname in Je&&Re.compute!==null){var re=Re.compute(C,W,de,de.styleAttrs[Re.qname],ce);re!==null?de.styleAttrs[Re.qname]=re:(de.styleAttrs[Re.qname]=Re.compute(C,W,de,Re.parse(Re.initial),ce),I(X,"Style '"+Re.qname+"' on element '"+de.kind+"' cannot be computed"))}}if(de.styleAttrs[y.byName.display.qname]==="none")return null;var Be=null;W===null?Be=$===null?[]:[$]:"contents"in N&&(Be=N.contents);for(var O=0;Be!==null&&O<Be.length;O++){var M=m(C,j,z,$,de,oe,Be[O],X,ce);M!==null&&de.contents.push(M.element)}for(var q in de.styleAttrs)if(de.styleAttrs.hasOwnProperty(q)){var K=!1;if(de.kind==="span"){var ye=de.styleAttrs[y.byName.ruby.qname];(K=(ye==="container"||ye==="textContainer"||ye==="baseContainer")&&D.indexOf(q)!==-1)||(K=ye!=="container"&&q===y.byName.rubyAlign.qname),K||(K=!(ye==="textContainer"||ye==="text")&&q===y.byName.rubyPosition.qname)}if(!K){var he=y.byQName[q];"applies"in he&&(K=he.applies.indexOf(de.kind)===-1)}K&&delete de.styleAttrs[q]}var Ke=de.styleAttrs[y.byName.ruby.qname];if(de.kind==="p"||de.kind==="span"&&(Ke==="textContainer"||Ke==="text")){var wt=[];T(de,wt),function(st){for(var at,tt=0;tt<st.length;)if((at=st[tt]).kind!=="br"&&at.space!=="preserve"){var ft=at.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(ft)&&(tt===0||(Et=st[tt-1]).kind==="br"||/[\r\n\t ]$/.test(Et.text))&&(ft=ft.substring(1)),at.text=ft,ft.length===0?st.splice(tt,1):tt++}else tt++;var Et,Tt;for(tt=0;tt<st.length;tt++)(at=st[tt]).kind!=="br"&&at.space!=="preserve"?/[ ]$/.test(at.text)&&(tt===st.length-1||(Tt=st[tt+1]).kind==="br"||Tt.space==="preserve"&&/^[\r\n]/.test(Tt.text))&&(at.text=at.text.slice(0,-1)):tt++}(wt),U(de)}return de.kind==="div"&&y.byName.backgroundImage.qname in de.styleAttrs||de.kind==="br"||de.kind==="image"||"contents"in de&&de.contents.length>0||de.kind==="span"&&de.text!==null||de.kind==="region"&&de.styleAttrs[y.byName.showBackground.qname]==="always"?{region_id:oe,element:de}:null}function T(C,j){if("contents"in C)for(var z=0;z<C.contents.length;z++){var $=C.contents[z],W=$.styleAttrs[y.byName.ruby.qname];($.kind!=="span"||W!=="textContainer"&&W!=="text")&&("contents"in $?T($,j):($.kind==="span"&&$.text.length!==0||$.kind==="br")&&j.push($))}}function U(C){if(C.kind==="br")return!1;if("text"in C)return C.text.length===0;if("contents"in C){for(var j=C.contents.length;j--;)U(C.contents[j])&&C.contents.splice(j,1);return C.contents.length===0}}function x(C){this.contents=[],this.aspectRatio=C.aspectRatio,this.lang=C.lang}function _(C){for(var j in this.kind=C.kind||"region",this.lang=C.lang,C.id&&(this.id=C.id),this.styleAttrs={},C.styleAttrs)C.styleAttrs.hasOwnProperty(j)&&(this.styleAttrs[j]=C.styleAttrs[j]);"src"in C&&(this.src=C.src),"type"in C&&(this.type=C.type),"text"in C?this.text=C.text:(this.kind==="region"||"contents"in C)&&(this.contents=[]),"space"in C&&(this.space=C.space)}function I(C,j){if(C&&C.error&&C.error(j))throw j}})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4403:function(b,g,w){g.generateISD=w(4080).generateISD,g.fromXML=w(3362).fromXML,g.renderHTML=w(506).render},210:function(b,g){(function(w){w.ns_tt="http://www.w3.org/ns/ttml",w.ns_tts="http://www.w3.org/ns/ttml#styling",w.ns_ttp="http://www.w3.org/ns/ttml#parameter",w.ns_xml="http://www.w3.org/XML/1998/namespace",w.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",w.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",w.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",w.ns_ebutts="urn:ebu:tt:style"})(g)},6811:function(b,g,w){(function(F,R,y){function v(T,U,x,_,I,C,j,z){this.name=U,this.ns=T,this.qname=T+" "+U,this.inherit=I,this.animatable=C,this.initial=x,this.applies=_,this.parse=j,this.compute=z}for(var D in F.all=[new v(R.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,y.parseColor,null),new v(R.ns_tts,"color","white",["span"],!0,!0,y.parseColor,null),new v(R.ns_tts,"direction","ltr",["p","span"],!0,!0,function(T){return T},null),new v(R.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(T){return T},null),new v(R.ns_tts,"displayAlign","before",["region"],!1,!0,function(T){return T},null),new v(R.ns_tts,"extent","auto",["tt","region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var x=y.parseLength(U[0]),_=y.parseLength(U[1]);return _&&x?{h:_,w:x}:null},function(T,U,x,_,I){var C,j;if(_==="auto")C=new y.ComputedLength(0,1);else if((C=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")j=new y.ComputedLength(1,0);else if((j=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:C,w:j}}),new v(R.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(T){for(var U=T.split(","),x=[],_=0;_<U.length;_++)U[_]=U[_].trim(),U[_].charAt(0)!=="'"&&U[_].charAt(0)!=='"'&&U[_]==="default"?x.push("monospaceSerif"):x.push(U[_]);return x},null),new v(R.ns_tts,"shear","0%",["p"],!0,!0,y.parseLength,function(T,U,x,_){return _.unit!=="%"?null:Math.abs(_.value)>100?100*Math.sign(_.value):_.value}),new v(R.ns_tts,"fontSize","1c",["span","p"],!0,!0,y.parseLength,function(T,U,x,_,I){return y.toComputedLength(_.value,_.unit,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,T.cellLength.h,T.pxLength.h)}),new v(R.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(T){return T},null),new v(R.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(T){return T},null),new v(R.ns_tts,"lineHeight","normal",["p"],!0,!0,function(T){return T==="normal"?T:y.parseLength(T)},function(T,U,x,_,I){var C;if(_==="normal")C=_;else if((C=y.toComputedLength(_.value,_.unit,x.styleAttrs[F.byName.fontSize.qname],x.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null)return null;return C}),new v(R.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new v(R.ns_tts,"origin","auto",["region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var x=y.parseLength(U[0]),_=y.parseLength(U[1]);return _&&x?{h:_,w:x}:null},function(T,U,x,_,I){var C,j;if(_==="auto")C=new y.ComputedLength(0,0);else if((C=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")j=new y.ComputedLength(0,0);else if((j=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:C,w:j}}),new v(R.ns_tts,"overflow","hidden",["region"],!1,!0,function(T){return T},null),new v(R.ns_tts,"padding","0px",["region"],!1,!0,function(T){var U=T.split(" ");if(U.length>4)return null;for(var x=[],_=0;_<U.length;_++){var I=y.parseLength(U[_]);if(!I)return null;x.push(I)}return x},function(T,U,x,_,I){var C;if(_.length===1)C=[_[0],_[0],_[0],_[0]];else if(_.length===2)C=[_[0],_[1],_[0],_[1]];else if(_.length===3)C=[_[0],_[1],_[2],_[1]];else{if(_.length!==4)return null;C=[_[0],_[1],_[2],_[3]]}var j=x.styleAttrs[F.byName.writingMode.qname];if(j==="lrtb"||j==="lr")C=[C[0],C[3],C[2],C[1]];else if(j==="rltb"||j==="rl")C=[C[0],C[1],C[2],C[3]];else if(j==="tblr")C=[C[3],C[0],C[1],C[2]];else{if(j!=="tbrl"&&j!=="tb")return null;C=[C[3],C[2],C[1],C[0]]}for(var z=[],$=0;$<C.length;$++)if(C[$].value===0)z[$]=new y.ComputedLength(0,0);else if(z[$]=y.toComputedLength(C[$].value,C[$].unit,x.styleAttrs[F.byName.fontSize.qname],$===0||$===2?x.styleAttrs[F.byName.extent.qname].h:x.styleAttrs[F.byName.extent.qname].w,$===0||$===2?T.cellLength.h:T.cellLength.w,$===0||$===2?T.pxLength.h:T.pxLength.w),z[$]===null)return null;return z}),new v(R.ns_tts,"position","top left",["region"],!1,!0,function(T){return y.parsePosition(T)},function(T,U,x,_){var I,C;return(I=y.toComputedLength(_.v.offset.value,_.v.offset.unit,null,new y.ComputedLength(-x.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-x.styleAttrs[F.byName.extent.qname].h.rh),null,T.pxLength.h))===null?null:(_.v.edge==="bottom"&&(I=new y.ComputedLength(-I.rw-x.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-I.rh-x.styleAttrs[F.byName.extent.qname].h.rh)),C=y.toComputedLength(_.h.offset.value,_.h.offset.unit,null,new y.ComputedLength(T.dimensions.w.rw-x.styleAttrs[F.byName.extent.qname].w.rw,-x.styleAttrs[F.byName.extent.qname].w.rh),null,T.pxLength.w),I===null?null:(_.h.edge==="right"&&(C=new y.ComputedLength(T.dimensions.w.rw-C.rw-x.styleAttrs[F.byName.extent.qname].w.rw,-C.rh-x.styleAttrs[F.byName.extent.qname].w.rh)),{h:I,w:C}))}),new v(R.ns_tts,"ruby","none",["span"],!1,!0,function(T){return T},null),new v(R.ns_tts,"rubyAlign","center",["span"],!0,!0,function(T){return T!=="center"&&T!=="spaceAround"?null:T},null),new v(R.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(T){return T},null),new v(R.ns_tts,"rubyReserve","none",["p"],!0,!0,function(T){var U=T.split(" "),x=[null,null];if(U.length===0||U.length>2||U[0]!=="none"&&U[0]!=="both"&&U[0]!=="after"&&U[0]!=="before"&&U[0]!=="outside")return null;if(x[0]=U[0],U.length===2&&U[0]!=="none"){var _=y.parseLength(U[1]);if(!_)return null;x[1]=_}return x},function(T,U,x,_,I){if(_[0]==="none")return _;var C;return(C=_[1]===null?new y.ComputedLength(.5*x.styleAttrs[F.byName.fontSize.qname].rw,.5*x.styleAttrs[F.byName.fontSize.qname].rh):y.toComputedLength(_[1].value,_[1].unit,x.styleAttrs[F.byName.fontSize.qname],x.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null?null:[_[0],C]}),new v(R.ns_tts,"showBackground","always",["region"],!1,!0,function(T){return T},null),new v(R.ns_tts,"textAlign","start",["p"],!0,!0,function(T){return T},function(T,U,x,_,I){return _==="left"?"start":_==="right"?"end":_}),new v(R.ns_tts,"textCombine","none",["span"],!0,!0,function(T){return T==="none"||T==="all"?T:null},null),new v(R.ns_tts,"textDecoration","none",["span"],!0,!0,function(T){return T.split(" ")},null),new v(R.ns_tts,"textEmphasis","none",["span"],!0,!0,function(T){for(var U=T.split(" "),x={style:null,symbol:null,color:null,position:null},_=0;_<U.length;_++)if(U[_]==="none"||U[_]==="auto")x.style=U[_];else if(U[_]==="filled"||U[_]==="open")x.style=U[_];else if(U[_]==="circle"||U[_]==="dot"||U[_]==="sesame")x.symbol=U[_];else if(U[_]==="current")x.color=U[_];else if(U[_]==="outside"||U[_]==="before"||U[_]==="after")x.position=U[_];else if(x.color=y.parseColor(U[_]),x.color===null)return null;return x.style==null&&x.symbol==null?x.style="auto":(x.symbol=x.symbol||"circle",x.style=x.style||"filled"),x.position=x.position||"outside",x.color=x.color||"current",x},null),new v(R.ns_tts,"textOutline","none",["span"],!0,!0,function(T){if(T==="none")return T;var U={},x=T.split(" ");if(x.length===0||x.length>2)return null;var _=y.parseColor(x[0]);if(U.color=_,_!==null&&x.shift(),x.length!==1)return null;var I=y.parseLength(x[0]);return I?(U.thickness=I,U):null},function(T,U,x,_,I){if(_==="none")return _;var C={};return _.color===null?C.color=x.styleAttrs[F.byName.color.qname]:C.color=_.color,C.thickness=y.toComputedLength(_.thickness.value,_.thickness.unit,x.styleAttrs[F.byName.fontSize.qname],x.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h),C.thickness===null?null:C}),new v(R.ns_tts,"textShadow","none",["span"],!0,!0,y.parseTextShadow,function(T,U,x,_){if(_==="none")return _;for(var I=[],C=0;C<_.length;C++){var j={};if(j.x_off=y.toComputedLength(_[C][0].value,_[C][0].unit,null,x.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.w),j.x_off===null||(j.y_off=y.toComputedLength(_[C][1].value,_[C][1].unit,null,x.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),j.y_off===null))return null;if(_[C][2]===null)j.b_radius=0;else if(j.b_radius=y.toComputedLength(_[C][2].value,_[C][2].unit,null,x.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),j.b_radius===null)return null;_[C][3]===null?j.color=x.styleAttrs[F.byName.color.qname]:j.color=_[C][3],I.push(j)}return I}),new v(R.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(T){return T},null),new v(R.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(T){return T},null),new v(R.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(T){return T},null),new v(R.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(T){return T},null),new v(R.ns_tts,"zIndex","auto",["region"],!1,!0,function(T){var U;return T==="auto"?U=T:(U=parseInt(T),isNaN(U)&&(U=null)),U},null),new v(R.ns_ebutts,"linePadding","0c",["p"],!0,!1,y.parseLength,function(T,U,x,_,I){return y.toComputedLength(_.value,_.unit,null,null,T.cellLength.w,null)}),new v(R.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(T){return T},null),new v(R.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(T){return T},null),new v(R.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(T){return T==="true"},null),new v(R.ns_itts,"fillLineGap","false",["p"],!0,!0,function(T){return T==="true"},null)],F.byQName={},F.all)F.byQName[F.all[D].qname]=F.all[D];for(var m in F.byName={},F.all)F.byName[F.all[m].name]=F.all[m]})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscUtils>"u"?w(5926):imscUtils)},5926:function(b,g){(function(w){var F=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,R=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,y=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,v={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};w.parseColor=function(m){var T,U=null,x=v[m.toLowerCase()];return x!==void 0?U=x:(T=F.exec(m))!==null?U=[parseInt(T[1],16),parseInt(T[2],16),parseInt(T[3],16),T[4]!==void 0?parseInt(T[4],16):255]:(T=R.exec(m))!==null?U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),255]:(T=y.exec(m))!==null&&(U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),parseInt(T[4])]),U};var D=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;w.parseLength=function(m){var T,U=null;return(T=D.exec(m))!==null&&(U={value:parseFloat(T[1]),unit:T[2]}),U},w.parseTextShadow=function(m){for(var T=m.match(/([^\(,\)]|\([^\)]+\))+/g),U=[],x=0;x<T.length;x++){var _=T[x].split(" ");if(_.length===1&&_[0]==="none")return"none";if(_.length>1&&_.length<5){var I=[null,null,null,null],C=w.parseLength(_.shift());if(C===null||(I[0]=C,(C=w.parseLength(_.shift()))===null))return null;if(I[1]=C,_.length===0){U.push(I);continue}if((C=w.parseLength(_[0]))!==null&&(I[2]=C,_.shift()),_.length===0){U.push(I);continue}var j=w.parseColor(_[0]);if(j===null)return null;I[3]=j,U.push(I)}}return U},w.parsePosition=function(m){var T=m.split(" "),U=function($){return $==="center"||$==="left"||$==="top"||$==="bottom"||$==="right"};if(T.length>4)return null;for(var x=0;x<T.length;x++)if(!U(T[x])){var _=w.parseLength(T[x]);if(_===null)return null;T[x]=_}for(var I={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},C=0;C<T.length;){var j=T[C++];if(U(j)){var z={value:0,unit:"%"};T.length!==2&&C<T.length&&!U(T[C])&&(z=T[C++]),j==="right"?(I.h.edge=j,I.h.offset=z):j==="bottom"?(I.v.edge=j,I.v.offset=z):j==="left"?I.h.offset=z:j==="top"&&(I.v.offset=z)}else{if(T.length!==1&&T.length!==2)return null;C===1?I.h.offset=j:I.v.offset=j}}return I},w.ComputedLength=function(m,T){this.rw=m,this.rh=T},w.ComputedLength.prototype.toUsedLength=function(m,T){return m*this.rw+T*this.rh},w.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},w.toComputedLength=function(m,T,U,x,_,I){return T==="%"&&x?new w.ComputedLength(x.rw*m/100,x.rh*m/100):T==="em"&&U?new w.ComputedLength(U.rw*m,U.rh*m):T==="c"&&_?new w.ComputedLength(m*_.rw,m*_.rh):T==="px"&&I?new w.ComputedLength(m*I.rw,m*I.rh):T==="rh"?new w.ComputedLength(0,m/100):T==="rw"?new w.ComputedLength(m/100,0):null}})(g)},3516:function(b){b.exports=function(g){var w=typeof g=="string"?g.charCodeAt(0):g;return w>=97&&w<=122||w>=65&&w<=90}},2219:function(b,g,w){var F=w(3516),R=w(395);b.exports=function(y){return F(y)||R(y)}},395:function(b){b.exports=function(g){var w=typeof g=="string"?g.charCodeAt(0):g;return w>=48&&w<=57}},3875:function(b){function g(R){if(typeof R!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(R))}function w(R,y){for(var v,D="",m=0,T=-1,U=0,x=0;x<=R.length;++x){if(x<R.length)v=R.charCodeAt(x);else{if(v===47)break;v=47}if(v===47){if(!(T===x-1||U===1))if(T!==x-1&&U===2){if(D.length<2||m!==2||D.charCodeAt(D.length-1)!==46||D.charCodeAt(D.length-2)!==46){if(D.length>2){var _=D.lastIndexOf("/");if(_!==D.length-1){_===-1?(D="",m=0):m=(D=D.slice(0,_)).length-1-D.lastIndexOf("/"),T=x,U=0;continue}}else if(D.length===2||D.length===1){D="",m=0,T=x,U=0;continue}}y&&(D.length>0?D+="/..":D="..",m=2)}else D.length>0?D+="/"+R.slice(T+1,x):D=R.slice(T+1,x),m=x-T-1;T=x,U=0}else v===46&&U!==-1?++U:U=-1}return D}var F={resolve:function(){for(var R,y="",v=!1,D=arguments.length-1;D>=-1&&!v;D--){var m;D>=0?m=arguments[D]:(R===void 0&&(R=process.cwd()),m=R),g(m),m.length!==0&&(y=m+"/"+y,v=m.charCodeAt(0)===47)}return y=w(y,!v),v?y.length>0?"/"+y:"/":y.length>0?y:"."},normalize:function(R){if(g(R),R.length===0)return".";var y=R.charCodeAt(0)===47,v=R.charCodeAt(R.length-1)===47;return(R=w(R,!y)).length!==0||y||(R="."),R.length>0&&v&&(R+="/"),y?"/"+R:R},isAbsolute:function(R){return g(R),R.length>0&&R.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var R,y=0;y<arguments.length;++y){var v=arguments[y];g(v),v.length>0&&(R===void 0?R=v:R+="/"+v)}return R===void 0?".":F.normalize(R)},relative:function(R,y){if(g(R),g(y),R===y||(R=F.resolve(R))===(y=F.resolve(y)))return"";for(var v=1;v<R.length&&R.charCodeAt(v)===47;++v);for(var D=R.length,m=D-v,T=1;T<y.length&&y.charCodeAt(T)===47;++T);for(var U=y.length-T,x=m<U?m:U,_=-1,I=0;I<=x;++I){if(I===x){if(U>x){if(y.charCodeAt(T+I)===47)return y.slice(T+I+1);if(I===0)return y.slice(T+I)}else m>x&&(R.charCodeAt(v+I)===47?_=I:I===0&&(_=0));break}var C=R.charCodeAt(v+I);if(C!==y.charCodeAt(T+I))break;C===47&&(_=I)}var j="";for(I=v+_+1;I<=D;++I)I!==D&&R.charCodeAt(I)!==47||(j.length===0?j+="..":j+="/..");return j.length>0?j+y.slice(T+_):(T+=_,y.charCodeAt(T)===47&&++T,y.slice(T))},_makeLong:function(R){return R},dirname:function(R){if(g(R),R.length===0)return".";for(var y=R.charCodeAt(0),v=y===47,D=-1,m=!0,T=R.length-1;T>=1;--T)if((y=R.charCodeAt(T))===47){if(!m){D=T;break}}else m=!1;return D===-1?v?"/":".":v&&D===1?"//":R.slice(0,D)},basename:function(R,y){if(y!==void 0&&typeof y!="string")throw new TypeError('"ext" argument must be a string');g(R);var v,D=0,m=-1,T=!0;if(y!==void 0&&y.length>0&&y.length<=R.length){if(y.length===R.length&&y===R)return"";var U=y.length-1,x=-1;for(v=R.length-1;v>=0;--v){var _=R.charCodeAt(v);if(_===47){if(!T){D=v+1;break}}else x===-1&&(T=!1,x=v+1),U>=0&&(_===y.charCodeAt(U)?--U==-1&&(m=v):(U=-1,m=x))}return D===m?m=x:m===-1&&(m=R.length),R.slice(D,m)}for(v=R.length-1;v>=0;--v)if(R.charCodeAt(v)===47){if(!T){D=v+1;break}}else m===-1&&(T=!1,m=v+1);return m===-1?"":R.slice(D,m)},extname:function(R){g(R);for(var y=-1,v=0,D=-1,m=!0,T=0,U=R.length-1;U>=0;--U){var x=R.charCodeAt(U);if(x!==47)D===-1&&(m=!1,D=U+1),x===46?y===-1?y=U:T!==1&&(T=1):y!==-1&&(T=-1);else if(!m){v=U+1;break}}return y===-1||D===-1||T===0||T===1&&y===D-1&&y===v+1?"":R.slice(y,D)},format:function(R){if(R===null||typeof R!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof R);return function(y,v){var D=v.dir||v.root,m=v.base||(v.name||"")+(v.ext||"");return D?D===v.root?D+m:D+"/"+m:m}(0,R)},parse:function(R){g(R);var y={root:"",dir:"",base:"",ext:"",name:""};if(R.length===0)return y;var v,D=R.charCodeAt(0),m=D===47;m?(y.root="/",v=1):v=0;for(var T=-1,U=0,x=-1,_=!0,I=R.length-1,C=0;I>=v;--I)if((D=R.charCodeAt(I))!==47)x===-1&&(_=!1,x=I+1),D===46?T===-1?T=I:C!==1&&(C=1):T!==-1&&(C=-1);else if(!_){U=I+1;break}return T===-1||x===-1||C===0||C===1&&T===x-1&&T===U+1?x!==-1&&(y.base=y.name=U===0&&m?R.slice(1,x):R.slice(U,x)):(U===0&&m?(y.name=R.slice(1,T),y.base=R.slice(1,x)):(y.name=R.slice(U,T),y.base=R.slice(U,x)),y.ext=R.slice(T,x)),U>0?y.dir=R.slice(0,U-1):m&&(y.dir="/"),y},sep:"/",delimiter:":",win32:null,posix:null};F.posix=F,b.exports=F},8387:function(b,g,w){var F=w(1549),R=F.Buffer;function y(D,m){for(var T in D)m[T]=D[T]}function v(D,m,T){return R(D,m,T)}R.from&&R.alloc&&R.allocUnsafe&&R.allocUnsafeSlow?b.exports=F:(y(F,g),g.Buffer=v),y(R,v),v.from=function(D,m,T){if(typeof D=="number")throw new TypeError("Argument must not be a number");return R(D,m,T)},v.alloc=function(D,m,T){if(typeof D!="number")throw new TypeError("Argument must be a number");var U=R(D);return m!==void 0?typeof T=="string"?U.fill(m,T):U.fill(m):U.fill(0),U},v.allocUnsafe=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return R(D)},v.allocUnsafeSlow=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return F.SlowBuffer(D)}},5378:function(b,g,w){(function(F){F.parser=function(O,M){return new v(O,M)},F.SAXParser=v,F.SAXStream=m,F.createStream=function(O,M){return new m(O,M)},F.MAX_BUFFER_LENGTH=65536;var R,y=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function v(O,M){if(!(this instanceof v))return new v(O,M);var q=this;(function(K){for(var ye=0,he=y.length;ye<he;ye++)K[y[ye]]=""})(q),q.q=q.c="",q.bufferCheckPosition=F.MAX_BUFFER_LENGTH,q.opt=M||{},q.opt.lowercase=q.opt.lowercase||q.opt.lowercasetags,q.looseCase=q.opt.lowercase?"toLowerCase":"toUpperCase",q.tags=[],q.closed=q.closedRoot=q.sawRoot=!1,q.tag=q.error=null,q.strict=!!O,q.noscript=!(!O&&!q.opt.noscript),q.state=Te.BEGIN,q.strictEntities=q.opt.strictEntities,q.ENTITIES=q.strictEntities?Object.create(F.XML_ENTITIES):Object.create(F.ENTITIES),q.attribList=[],q.opt.xmlns&&(q.ns=Object.create(z)),q.trackPosition=q.opt.position!==!1,q.trackPosition&&(q.position=q.line=q.column=0),nt(q,"onready")}F.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(O){function M(){}return M.prototype=O,new M}),Object.keys||(Object.keys=function(O){var M=[];for(var q in O)O.hasOwnProperty(q)&&M.push(q);return M}),v.prototype={end:function(){xe(this)},write:function(O){var M=this;if(this.error)throw this.error;if(M.closed)return mt(M,"Cannot write after close. Assign an onready handler.");if(O===null)return xe(M);typeof O=="object"&&(O=O.toString());for(var q=0,K="";K=Be(O,q++),M.c=K,K;)switch(M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++),M.state){case Te.BEGIN:if(M.state=Te.BEGIN_WHITESPACE,K==="\uFEFF")continue;re(M,K);continue;case Te.BEGIN_WHITESPACE:re(M,K);continue;case Te.TEXT:if(M.sawRoot&&!M.closedRoot){for(var ye=q-1;K&&K!=="<"&&K!=="&";)(K=Be(O,q++))&&M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++);M.textNode+=O.substring(ye,q-1)}K!=="<"||M.sawRoot&&M.closedRoot&&!M.strict?(!oe(T,K)||M.sawRoot&&!M.closedRoot||We(M,"Text data outside of root node."),K==="&"?M.state=Te.TEXT_ENTITY:M.textNode+=K):(M.state=Te.OPEN_WAKA,M.startTagPosition=M.position);continue;case Te.SCRIPT:K==="<"?M.state=Te.SCRIPT_ENDING:M.script+=K;continue;case Te.SCRIPT_ENDING:K==="/"?M.state=Te.CLOSE_TAG:(M.script+="<"+K,M.state=Te.SCRIPT);continue;case Te.OPEN_WAKA:if(K==="!")M.state=Te.SGML_DECL,M.sgmlDecl="";else if(!ce(T,K))if(ce($,K))M.state=Te.OPEN_TAG,M.tagName=K;else if(K==="/")M.state=Te.CLOSE_TAG,M.tagName="";else if(K==="?")M.state=Te.PROC_INST,M.procInstName=M.procInstBody="";else{if(We(M,"Unencoded <"),M.startTagPosition+1<M.position){var he=M.position-M.startTagPosition;K=new Array(he).join(" ")+K}M.textNode+="<"+K,M.state=Te.TEXT}continue;case Te.SGML_DECL:(M.sgmlDecl+K).toUpperCase()==="[CDATA["?(ct(M,"onopencdata"),M.state=Te.CDATA,M.sgmlDecl="",M.cdata=""):M.sgmlDecl+K==="--"?(M.state=Te.COMMENT,M.comment="",M.sgmlDecl=""):(M.sgmlDecl+K).toUpperCase()==="DOCTYPE"?(M.state=Te.DOCTYPE,(M.doctype||M.sawRoot)&&We(M,"Inappropriately located doctype declaration"),M.doctype="",M.sgmlDecl=""):K===">"?(ct(M,"onsgmldeclaration",M.sgmlDecl),M.sgmlDecl="",M.state=Te.TEXT):(ce(_,K)&&(M.state=Te.SGML_DECL_QUOTED),M.sgmlDecl+=K);continue;case Te.SGML_DECL_QUOTED:K===M.q&&(M.state=Te.SGML_DECL,M.q=""),M.sgmlDecl+=K;continue;case Te.DOCTYPE:K===">"?(M.state=Te.TEXT,ct(M,"ondoctype",M.doctype),M.doctype=!0):(M.doctype+=K,K==="["?M.state=Te.DOCTYPE_DTD:ce(_,K)&&(M.state=Te.DOCTYPE_QUOTED,M.q=K));continue;case Te.DOCTYPE_QUOTED:M.doctype+=K,K===M.q&&(M.q="",M.state=Te.DOCTYPE);continue;case Te.DOCTYPE_DTD:M.doctype+=K,K==="]"?M.state=Te.DOCTYPE:ce(_,K)&&(M.state=Te.DOCTYPE_DTD_QUOTED,M.q=K);continue;case Te.DOCTYPE_DTD_QUOTED:M.doctype+=K,K===M.q&&(M.state=Te.DOCTYPE_DTD,M.q="");continue;case Te.COMMENT:K==="-"?M.state=Te.COMMENT_ENDING:M.comment+=K;continue;case Te.COMMENT_ENDING:K==="-"?(M.state=Te.COMMENT_ENDED,M.comment=Ye(M.opt,M.comment),M.comment&&ct(M,"oncomment",M.comment),M.comment=""):(M.comment+="-"+K,M.state=Te.COMMENT);continue;case Te.COMMENT_ENDED:K!==">"?(We(M,"Malformed comment"),M.comment+="--"+K,M.state=Te.COMMENT):M.state=Te.TEXT;continue;case Te.CDATA:K==="]"?M.state=Te.CDATA_ENDING:M.cdata+=K;continue;case Te.CDATA_ENDING:K==="]"?M.state=Te.CDATA_ENDING_2:(M.cdata+="]"+K,M.state=Te.CDATA);continue;case Te.CDATA_ENDING_2:K===">"?(M.cdata&&ct(M,"oncdata",M.cdata),ct(M,"onclosecdata"),M.cdata="",M.state=Te.TEXT):K==="]"?M.cdata+="]":(M.cdata+="]]"+K,M.state=Te.CDATA);continue;case Te.PROC_INST:K==="?"?M.state=Te.PROC_INST_ENDING:ce(T,K)?M.state=Te.PROC_INST_BODY:M.procInstName+=K;continue;case Te.PROC_INST_BODY:if(!M.procInstBody&&ce(T,K))continue;K==="?"?M.state=Te.PROC_INST_ENDING:M.procInstBody+=K;continue;case Te.PROC_INST_ENDING:K===">"?(ct(M,"onprocessinginstruction",{name:M.procInstName,body:M.procInstBody}),M.procInstName=M.procInstBody="",M.state=Te.TEXT):(M.procInstBody+="?"+K,M.state=Te.PROC_INST_BODY);continue;case Te.OPEN_TAG:ce(W,K)?M.tagName+=K:(it(M),K===">"?gt(M):K==="/"?M.state=Te.OPEN_TAG_SLASH:(oe(T,K)&&We(M,"Invalid character in tag name"),M.state=Te.ATTRIB));continue;case Te.OPEN_TAG_SLASH:K===">"?(gt(M,!0),St(M)):(We(M,"Forward-slash in opening tag not followed by >"),M.state=Te.ATTRIB);continue;case Te.ATTRIB:if(ce(T,K))continue;K===">"?gt(M):K==="/"?M.state=Te.OPEN_TAG_SLASH:ce($,K)?(M.attribName=K,M.attribValue="",M.state=Te.ATTRIB_NAME):We(M,"Invalid attribute name");continue;case Te.ATTRIB_NAME:K==="="?M.state=Te.ATTRIB_VALUE:K===">"?(We(M,"Attribute without value"),M.attribValue=M.attribName,Ft(M),gt(M)):ce(T,K)?M.state=Te.ATTRIB_NAME_SAW_WHITE:ce(W,K)?M.attribName+=K:We(M,"Invalid attribute name");continue;case Te.ATTRIB_NAME_SAW_WHITE:if(K==="=")M.state=Te.ATTRIB_VALUE;else{if(ce(T,K))continue;We(M,"Attribute without value"),M.tag.attributes[M.attribName]="",M.attribValue="",ct(M,"onattribute",{name:M.attribName,value:""}),M.attribName="",K===">"?gt(M):ce($,K)?(M.attribName=K,M.state=Te.ATTRIB_NAME):(We(M,"Invalid attribute name"),M.state=Te.ATTRIB)}continue;case Te.ATTRIB_VALUE:if(ce(T,K))continue;ce(_,K)?(M.q=K,M.state=Te.ATTRIB_VALUE_QUOTED):(We(M,"Unquoted attribute value"),M.state=Te.ATTRIB_VALUE_UNQUOTED,M.attribValue=K);continue;case Te.ATTRIB_VALUE_QUOTED:if(K!==M.q){K==="&"?M.state=Te.ATTRIB_VALUE_ENTITY_Q:M.attribValue+=K;continue}Ft(M),M.q="",M.state=Te.ATTRIB_VALUE_CLOSED;continue;case Te.ATTRIB_VALUE_CLOSED:ce(T,K)?M.state=Te.ATTRIB:K===">"?gt(M):K==="/"?M.state=Te.OPEN_TAG_SLASH:ce($,K)?(We(M,"No whitespace between attributes"),M.attribName=K,M.attribValue="",M.state=Te.ATTRIB_NAME):We(M,"Invalid attribute name");continue;case Te.ATTRIB_VALUE_UNQUOTED:if(oe(I,K)){K==="&"?M.state=Te.ATTRIB_VALUE_ENTITY_U:M.attribValue+=K;continue}Ft(M),K===">"?gt(M):M.state=Te.ATTRIB;continue;case Te.CLOSE_TAG:if(M.tagName)K===">"?St(M):ce(W,K)?M.tagName+=K:M.script?(M.script+="</"+M.tagName,M.tagName="",M.state=Te.SCRIPT):(oe(T,K)&&We(M,"Invalid tagname in closing tag"),M.state=Te.CLOSE_TAG_SAW_WHITE);else{if(ce(T,K))continue;oe($,K)?M.script?(M.script+="</"+K,M.state=Te.SCRIPT):We(M,"Invalid tagname in closing tag."):M.tagName=K}continue;case Te.CLOSE_TAG_SAW_WHITE:if(ce(T,K))continue;K===">"?St(M):We(M,"Invalid characters in closing tag");continue;case Te.TEXT_ENTITY:case Te.ATTRIB_VALUE_ENTITY_Q:case Te.ATTRIB_VALUE_ENTITY_U:var Ke,wt;switch(M.state){case Te.TEXT_ENTITY:Ke=Te.TEXT,wt="textNode";break;case Te.ATTRIB_VALUE_ENTITY_Q:Ke=Te.ATTRIB_VALUE_QUOTED,wt="attribValue";break;case Te.ATTRIB_VALUE_ENTITY_U:Ke=Te.ATTRIB_VALUE_UNQUOTED,wt="attribValue"}K===";"?(M[wt]+=Re(M),M.entity="",M.state=Ke):ce(M.entity.length?N:ue,K)?M.entity+=K:(We(M,"Invalid character in entity name"),M[wt]+="&"+M.entity+K,M.entity="",M.state=Ke);continue;default:throw new Error(M,"Unknown state: "+M.state)}return M.position>=M.bufferCheckPosition&&function(st){for(var at=Math.max(F.MAX_BUFFER_LENGTH,10),tt=0,ft=0,Et=y.length;ft<Et;ft++){var Tt=st[y[ft]].length;if(Tt>at)switch(y[ft]){case"textNode":Ie(st);break;case"cdata":ct(st,"oncdata",st.cdata),st.cdata="";break;case"script":ct(st,"onscript",st.script),st.script="";break;default:mt(st,"Max buffer length exceeded: "+y[ft])}tt=Math.max(tt,Tt)}var Ct=F.MAX_BUFFER_LENGTH-tt;st.bufferCheckPosition=Ct+st.position}(M),M},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var O;Ie(O=this),O.cdata!==""&&(ct(O,"oncdata",O.cdata),O.cdata=""),O.script!==""&&(ct(O,"onscript",O.script),O.script="")}};try{R=w(182).Stream}catch(O){R=function(){}}var D=F.EVENTS.filter(function(O){return O!=="error"&&O!=="end"});function m(O,M){if(!(this instanceof m))return new m(O,M);R.apply(this),this._parser=new v(O,M),this.writable=!0,this.readable=!0;var q=this;this._parser.onend=function(){q.emit("end")},this._parser.onerror=function(K){q.emit("error",K),q._parser.error=null},this._decoder=null,D.forEach(function(K){Object.defineProperty(q,"on"+K,{get:function(){return q._parser["on"+K]},set:function(ye){if(!ye)return q.removeAllListeners(K),q._parser["on"+K]=ye,ye;q.on(K,ye)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(R.prototype,{constructor:{value:m}}),m.prototype.write=function(O){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(O)){if(!this._decoder){var M=w(7503).s;this._decoder=new M("utf8")}O=this._decoder.write(O)}return this._parser.write(O.toString()),this.emit("data",O),!0},m.prototype.end=function(O){return O&&O.length&&this.write(O),this._parser.end(),!0},m.prototype.on=function(O,M){var q=this;return q._parser["on"+O]||D.indexOf(O)===-1||(q._parser["on"+O]=function(){var K=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,O),q.emit.apply(q,K)}),R.prototype.on.call(q,O,M)};var T="\r\n	 ",U="0124356789",x="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",_="'\"",I=T+">",C="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/2000/xmlns/",z={xml:C,xmlns:j};T=X(T),U=X(U),x=X(x);var $=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,W=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,ue=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,N=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function X(O){return O.split("").reduce(function(M,q){return M[q]=!0,M},{})}function ce(O,M){return function(q){return Object.prototype.toString.call(q)==="[object RegExp]"}(O)?!!M.match(O):O[M]}function oe(O,M){return!ce(O,M)}_=X(_),I=X(I);var de,Ce,Je,Te=0;for(var je in F.STATE={BEGIN:Te++,BEGIN_WHITESPACE:Te++,TEXT:Te++,TEXT_ENTITY:Te++,OPEN_WAKA:Te++,SGML_DECL:Te++,SGML_DECL_QUOTED:Te++,DOCTYPE:Te++,DOCTYPE_QUOTED:Te++,DOCTYPE_DTD:Te++,DOCTYPE_DTD_QUOTED:Te++,COMMENT_STARTING:Te++,COMMENT:Te++,COMMENT_ENDING:Te++,COMMENT_ENDED:Te++,CDATA:Te++,CDATA_ENDING:Te++,CDATA_ENDING_2:Te++,PROC_INST:Te++,PROC_INST_BODY:Te++,PROC_INST_ENDING:Te++,OPEN_TAG:Te++,OPEN_TAG_SLASH:Te++,ATTRIB:Te++,ATTRIB_NAME:Te++,ATTRIB_NAME_SAW_WHITE:Te++,ATTRIB_VALUE:Te++,ATTRIB_VALUE_QUOTED:Te++,ATTRIB_VALUE_CLOSED:Te++,ATTRIB_VALUE_UNQUOTED:Te++,ATTRIB_VALUE_ENTITY_Q:Te++,ATTRIB_VALUE_ENTITY_U:Te++,CLOSE_TAG:Te++,CLOSE_TAG_SAW_WHITE:Te++,SCRIPT:Te++,SCRIPT_ENDING:Te++},F.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},F.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(F.ENTITIES).forEach(function(O){var M=F.ENTITIES[O],q=typeof M=="number"?String.fromCharCode(M):M;F.ENTITIES[O]=q}),F.STATE)F.STATE[F.STATE[je]]=je;function nt(O,M,q){O[M]&&O[M](q)}function ct(O,M,q){O.textNode&&Ie(O),nt(O,M,q)}function Ie(O){O.textNode=Ye(O.opt,O.textNode),O.textNode&&nt(O,"ontext",O.textNode),O.textNode=""}function Ye(O,M){return O.trim&&(M=M.trim()),O.normalize&&(M=M.replace(/\s+/g," ")),M}function mt(O,M){return Ie(O),O.trackPosition&&(M+="\nLine: "+O.line+"\nColumn: "+O.column+"\nChar: "+O.c),M=new Error(M),O.error=M,nt(O,"onerror",M),O}function xe(O){return O.sawRoot&&!O.closedRoot&&We(O,"Unclosed root tag"),O.state!==Te.BEGIN&&O.state!==Te.BEGIN_WHITESPACE&&O.state!==Te.TEXT&&mt(O,"Unexpected end"),Ie(O),O.c="",O.closed=!0,nt(O,"onend"),v.call(O,O.strict,O.opt),O}function We(O,M){if(typeof O!="object"||!(O instanceof v))throw new Error("bad call to strictFail");O.strict&&mt(O,M)}function it(O){O.strict||(O.tagName=O.tagName[O.looseCase]());var M=O.tags[O.tags.length-1]||O,q=O.tag={name:O.tagName,attributes:{}};O.opt.xmlns&&(q.ns=M.ns),O.attribList.length=0,ct(O,"onopentagstart",q)}function qt(O,M){var q=O.indexOf(":")<0?["",O]:O.split(":"),K=q[0],ye=q[1];return M&&O==="xmlns"&&(K="xmlns",ye=""),{prefix:K,local:ye}}function Ft(O){if(O.strict||(O.attribName=O.attribName[O.looseCase]()),O.attribList.indexOf(O.attribName)!==-1||O.tag.attributes.hasOwnProperty(O.attribName))O.attribName=O.attribValue="";else{if(O.opt.xmlns){var M=qt(O.attribName,!0),q=M.prefix,K=M.local;if(q==="xmlns")if(K==="xml"&&O.attribValue!==C)We(O,"xml: prefix must be bound to "+C+"\nActual: "+O.attribValue);else if(K==="xmlns"&&O.attribValue!==j)We(O,"xmlns: prefix must be bound to "+j+"\nActual: "+O.attribValue);else{var ye=O.tag,he=O.tags[O.tags.length-1]||O;ye.ns===he.ns&&(ye.ns=Object.create(he.ns)),ye.ns[K]=O.attribValue}O.attribList.push([O.attribName,O.attribValue])}else O.tag.attributes[O.attribName]=O.attribValue,ct(O,"onattribute",{name:O.attribName,value:O.attribValue});O.attribName=O.attribValue=""}}function gt(O,M){if(O.opt.xmlns){var q=O.tag,K=qt(O.tagName);q.prefix=K.prefix,q.local=K.local,q.uri=q.ns[K.prefix]||"",q.prefix&&!q.uri&&(We(O,"Unbound namespace prefix: "+JSON.stringify(O.tagName)),q.uri=K.prefix);var ye=O.tags[O.tags.length-1]||O;q.ns&&ye.ns!==q.ns&&Object.keys(q.ns).forEach(function(hn){ct(O,"onopennamespace",{prefix:hn,uri:q.ns[hn]})});for(var he=0,Ke=O.attribList.length;he<Ke;he++){var wt=O.attribList[he],st=wt[0],at=wt[1],tt=qt(st,!0),ft=tt.prefix,Et=tt.local,Tt=ft===""?"":q.ns[ft]||"",Ct={name:st,value:at,prefix:ft,local:Et,uri:Tt};ft&&ft!=="xmlns"&&!Tt&&(We(O,"Unbound namespace prefix: "+JSON.stringify(ft)),Ct.uri=ft),O.tag.attributes[st]=Ct,ct(O,"onattribute",Ct)}O.attribList.length=0}O.tag.isSelfClosing=!!M,O.sawRoot=!0,O.tags.push(O.tag),ct(O,"onopentag",O.tag),M||(O.noscript||O.tagName.toLowerCase()!=="script"?O.state=Te.TEXT:O.state=Te.SCRIPT,O.tag=null,O.tagName=""),O.attribName=O.attribValue="",O.attribList.length=0}function St(O){if(!O.tagName)return We(O,"Weird empty close tag."),O.textNode+="</>",void(O.state=Te.TEXT);if(O.script){if(O.tagName!=="script")return O.script+="</"+O.tagName+">",O.tagName="",void(O.state=Te.SCRIPT);ct(O,"onscript",O.script),O.script=""}var M=O.tags.length,q=O.tagName;O.strict||(q=q[O.looseCase]());for(var K=q;M--&&O.tags[M].name!==K;)We(O,"Unexpected close tag");if(M<0)return We(O,"Unmatched closing tag: "+O.tagName),O.textNode+="</"+O.tagName+">",void(O.state=Te.TEXT);O.tagName=q;for(var ye=O.tags.length;ye-- >M;){var he=O.tag=O.tags.pop();O.tagName=O.tag.name,ct(O,"onclosetag",O.tagName);var Ke={};for(var wt in he.ns)Ke[wt]=he.ns[wt];var st=O.tags[O.tags.length-1]||O;O.opt.xmlns&&he.ns!==st.ns&&Object.keys(he.ns).forEach(function(at){var tt=he.ns[at];ct(O,"onclosenamespace",{prefix:at,uri:tt})})}M===0&&(O.closedRoot=!0),O.tagName=O.attribValue=O.attribName="",O.attribList.length=0,O.state=Te.TEXT}function Re(O){var M,q=O.entity,K=q.toLowerCase(),ye="";return O.ENTITIES[q]?O.ENTITIES[q]:O.ENTITIES[K]?O.ENTITIES[K]:((q=K).charAt(0)==="#"&&(q.charAt(1)==="x"?(q=q.slice(2),ye=(M=parseInt(q,16)).toString(16)):(q=q.slice(1),ye=(M=parseInt(q,10)).toString(10))),q=q.replace(/^0+/,""),ye.toLowerCase()!==q?(We(O,"Invalid character entity"),"&"+O.entity+";"):String.fromCodePoint(M))}function re(O,M){M==="<"?(O.state=Te.OPEN_WAKA,O.startTagPosition=O.position):oe(T,M)&&(We(O,"Non-whitespace before first tag."),O.textNode=M,O.state=Te.TEXT)}function Be(O,M){var q="";return M<O.length&&(q=O.charAt(M)),q}Te=F.STATE,String.fromCodePoint||(de=String.fromCharCode,Ce=Math.floor,Je=function(){var O,M,q=16384,K=[],ye=-1,he=arguments.length;if(!he)return"";for(var Ke="";++ye<he;){var wt=Number(arguments[ye]);if(!isFinite(wt)||wt<0||wt>1114111||Ce(wt)!==wt)throw RangeError("Invalid code point: "+wt);wt<=65535?K.push(wt):(O=55296+((wt-=65536)>>10),M=wt%1024+56320,K.push(O,M)),(ye+1===he||K.length>q)&&(Ke+=de.apply(null,K),K.length=0)}return Ke},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Je,configurable:!0,writable:!0}):String.fromCodePoint=Je)})(g)},182:function(b,g,w){b.exports=R;var F=w(1159).EventEmitter;function R(){F.call(this)}w(1765)(R,F),R.Readable=w(2846),R.Writable=w(8318),R.Duplex=w(6138),R.Transform=w(9798),R.PassThrough=w(5472),R.finished=w(8800),R.pipeline=w(7295),R.Stream=R,R.prototype.pipe=function(y,v){var D=this;function m(j){y.writable&&y.write(j)===!1&&D.pause&&D.pause()}function T(){D.readable&&D.resume&&D.resume()}D.on("data",m),y.on("drain",T),y._isStdio||v&&v.end===!1||(D.on("end",x),D.on("close",_));var U=!1;function x(){U||(U=!0,y.end())}function _(){U||(U=!0,typeof y.destroy=="function"&&y.destroy())}function I(j){if(C(),F.listenerCount(this,"error")===0)throw j}function C(){D.removeListener("data",m),y.removeListener("drain",T),D.removeListener("end",x),D.removeListener("close",_),D.removeListener("error",I),y.removeListener("error",I),D.removeListener("end",C),D.removeListener("close",C),y.removeListener("close",C)}return D.on("error",I),y.on("error",I),D.on("end",C),D.on("close",C),y.on("close",C),y.emit("pipe",D),y}},1765:function(b){typeof Object.create=="function"?b.exports=function(g,w){w&&(g.super_=w,g.prototype=Object.create(w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:b.exports=function(g,w){if(w){g.super_=w;var F=function(){};F.prototype=w.prototype,g.prototype=new F,g.prototype.constructor=g}}},3690:function(b){var g={};function w(R,y,v){v||(v=Error);var D=function(m){var T,U;function x(_,I,C){return m.call(this,function(j,z,$){return typeof y=="string"?y:y(j,z,$)}(_,I,C))||this}return U=m,(T=x).prototype=Object.create(U.prototype),T.prototype.constructor=T,T.__proto__=U,x}(v);D.prototype.name=v.name,D.prototype.code=R,g[R]=D}function F(R,y){if(Array.isArray(R)){var v=R.length;return R=R.map(function(D){return String(D)}),v>2?"one of ".concat(y," ").concat(R.slice(0,v-1).join(", "),", or ")+R[v-1]:v===2?"one of ".concat(y," ").concat(R[0]," or ").concat(R[1]):"of ".concat(y," ").concat(R[0])}return"of ".concat(y," ").concat(String(R))}w("ERR_INVALID_OPT_VALUE",function(R,y){return'The value "'+y+'" is invalid for option "'+R+'"'},TypeError),w("ERR_INVALID_ARG_TYPE",function(R,y,v){var D,m,T,U,x;if(typeof y=="string"&&(m="not ",y.substr(0,m.length)===m)?(D="must not be",y=y.replace(/^not /,"")):D="must be",function(I,C,j){return(j===void 0||j>I.length)&&(j=I.length),I.substring(j-C.length,j)===C}(R," argument"))T="The ".concat(R," ").concat(D," ").concat(F(y,"type"));else{var _=(typeof x!="number"&&(x=0),x+1>(U=R).length||U.indexOf(".",x)===-1?"argument":"property");T='The "'.concat(R,'" ').concat(_," ").concat(D," ").concat(F(y,"type"))}return T+". Received type ".concat(typeof v)},TypeError),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),w("ERR_METHOD_NOT_IMPLEMENTED",function(R){return"The "+R+" method is not implemented"}),w("ERR_STREAM_PREMATURE_CLOSE","Premature close"),w("ERR_STREAM_DESTROYED",function(R){return"Cannot call "+R+" after a stream was destroyed"}),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),w("ERR_STREAM_WRITE_AFTER_END","write after end"),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_UNKNOWN_ENCODING",function(R){return"Unknown encoding: "+R},TypeError),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),b.exports.q=g},6138:function(b,g,w){var F=Object.keys||function(_){var I=[];for(var C in _)I.push(C);return I};b.exports=T;var R=w(2846),y=w(8318);w(1765)(T,R);for(var v=F(y.prototype),D=0;D<v.length;D++){var m=v[D];T.prototype[m]||(T.prototype[m]=y.prototype[m])}function T(_){if(!(this instanceof T))return new T(_);R.call(this,_),y.call(this,_),this.allowHalfOpen=!0,_&&(_.readable===!1&&(this.readable=!1),_.writable===!1&&(this.writable=!1),_.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",U)))}function U(){this._writableState.ended||process.nextTick(x,this)}function x(_){_.end()}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=_,this._writableState.destroyed=_)}})},5472:function(b,g,w){b.exports=R;var F=w(9798);function R(y){if(!(this instanceof R))return new R(y);F.call(this,y)}w(1765)(R,F),R.prototype._transform=function(y,v,D){D(null,y)}},2846:function(b,g,w){var F;b.exports=de,de.ReadableState=oe,w(1159).EventEmitter;var R,y=function(Re,re){return Re.listeners(re).length},v=w(9299),D=w(1549).Buffer,m=w.g.Uint8Array||function(){},T=w(964);R=T&&T.debuglog?T.debuglog("stream"):function(){};var U,x,_,I=w(8393),C=w(6163),j=w(7269).getHighWaterMark,z=w(3690).q,$=z.ERR_INVALID_ARG_TYPE,W=z.ERR_STREAM_PUSH_AFTER_EOF,ue=z.ERR_METHOD_NOT_IMPLEMENTED,N=z.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;w(1765)(de,v);var X=C.errorOrDestroy,ce=["error","close","destroy","pause","resume"];function oe(Re,re,Be){F=F||w(6138),Re=Re||{},typeof Be!="boolean"&&(Be=re instanceof F),this.objectMode=!!Re.objectMode,Be&&(this.objectMode=this.objectMode||!!Re.readableObjectMode),this.highWaterMark=j(this,Re,"readableHighWaterMark",Be),this.buffer=new I,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Re.emitClose!==!1,this.autoDestroy=!!Re.autoDestroy,this.destroyed=!1,this.defaultEncoding=Re.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Re.encoding&&(U||(U=w(7503).s),this.decoder=new U(Re.encoding),this.encoding=Re.encoding)}function de(Re){if(F=F||w(6138),!(this instanceof de))return new de(Re);var re=this instanceof F;this._readableState=new oe(Re,this,re),this.readable=!0,Re&&(typeof Re.read=="function"&&(this._read=Re.read),typeof Re.destroy=="function"&&(this._destroy=Re.destroy)),v.call(this)}function Ce(Re,re,Be,O,M){R("readableAddChunk",re);var q,K=Re._readableState;if(re===null)K.reading=!1,function(ye,he){if(R("onEofChunk"),!he.ended){if(he.decoder){var Ke=he.decoder.end();Ke&&Ke.length&&(he.buffer.push(Ke),he.length+=he.objectMode?1:Ke.length)}he.ended=!0,he.sync?nt(ye):(he.needReadable=!1,he.emittedReadable||(he.emittedReadable=!0,ct(ye)))}}(Re,K);else if(M||(q=function(ye,he){var Ke,wt;return wt=he,D.isBuffer(wt)||wt instanceof m||typeof he=="string"||he===void 0||ye.objectMode||(Ke=new $("chunk",["string","Buffer","Uint8Array"],he)),Ke}(K,re)),q)X(Re,q);else if(K.objectMode||re&&re.length>0)if(typeof re=="string"||K.objectMode||Object.getPrototypeOf(re)===D.prototype||(re=function(ye){return D.from(ye)}(re)),O)K.endEmitted?X(Re,new N):Je(Re,K,re,!0);else if(K.ended)X(Re,new W);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!Be?(re=K.decoder.write(re),K.objectMode||re.length!==0?Je(Re,K,re,!1):Ie(Re,K)):Je(Re,K,re,!1)}else O||(K.reading=!1,Ie(Re,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function Je(Re,re,Be,O){re.flowing&&re.length===0&&!re.sync?(re.awaitDrain=0,Re.emit("data",Be)):(re.length+=re.objectMode?1:Be.length,O?re.buffer.unshift(Be):re.buffer.push(Be),re.needReadable&&nt(Re)),Ie(Re,re)}Object.defineProperty(de.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Re){this._readableState&&(this._readableState.destroyed=Re)}}),de.prototype.destroy=C.destroy,de.prototype._undestroy=C.undestroy,de.prototype._destroy=function(Re,re){re(Re)},de.prototype.push=function(Re,re){var Be,O=this._readableState;return O.objectMode?Be=!0:typeof Re=="string"&&((re=re||O.defaultEncoding)!==O.encoding&&(Re=D.from(Re,re),re=""),Be=!0),Ce(this,Re,re,!1,Be)},de.prototype.unshift=function(Re){return Ce(this,Re,null,!0,!1)},de.prototype.isPaused=function(){return this._readableState.flowing===!1},de.prototype.setEncoding=function(Re){U||(U=w(7503).s);var re=new U(Re);this._readableState.decoder=re,this._readableState.encoding=this._readableState.decoder.encoding;for(var Be=this._readableState.buffer.head,O="";Be!==null;)O+=re.write(Be.data),Be=Be.next;return this._readableState.buffer.clear(),O!==""&&this._readableState.buffer.push(O),this._readableState.length=O.length,this};var Te=1073741824;function je(Re,re){return Re<=0||re.length===0&&re.ended?0:re.objectMode?1:Re!=Re?re.flowing&&re.length?re.buffer.head.data.length:re.length:(Re>re.highWaterMark&&(re.highWaterMark=function(Be){return Be>=Te?Be=Te:(Be--,Be|=Be>>>1,Be|=Be>>>2,Be|=Be>>>4,Be|=Be>>>8,Be|=Be>>>16,Be++),Be}(Re)),Re<=re.length?Re:re.ended?re.length:(re.needReadable=!0,0))}function nt(Re){var re=Re._readableState;R("emitReadable",re.needReadable,re.emittedReadable),re.needReadable=!1,re.emittedReadable||(R("emitReadable",re.flowing),re.emittedReadable=!0,process.nextTick(ct,Re))}function ct(Re){var re=Re._readableState;R("emitReadable_",re.destroyed,re.length,re.ended),re.destroyed||!re.length&&!re.ended||(Re.emit("readable"),re.emittedReadable=!1),re.needReadable=!re.flowing&&!re.ended&&re.length<=re.highWaterMark,it(Re)}function Ie(Re,re){re.readingMore||(re.readingMore=!0,process.nextTick(Ye,Re,re))}function Ye(Re,re){for(;!re.reading&&!re.ended&&(re.length<re.highWaterMark||re.flowing&&re.length===0);){var Be=re.length;if(R("maybeReadMore read 0"),Re.read(0),Be===re.length)break}re.readingMore=!1}function mt(Re){var re=Re._readableState;re.readableListening=Re.listenerCount("readable")>0,re.resumeScheduled&&!re.paused?re.flowing=!0:Re.listenerCount("data")>0&&Re.resume()}function xe(Re){R("readable nexttick read 0"),Re.read(0)}function We(Re,re){R("resume",re.reading),re.reading||Re.read(0),re.resumeScheduled=!1,Re.emit("resume"),it(Re),re.flowing&&!re.reading&&Re.read(0)}function it(Re){var re=Re._readableState;for(R("flow",re.flowing);re.flowing&&Re.read()!==null;);}function qt(Re,re){return re.length===0?null:(re.objectMode?Be=re.buffer.shift():!Re||Re>=re.length?(Be=re.decoder?re.buffer.join(""):re.buffer.length===1?re.buffer.first():re.buffer.concat(re.length),re.buffer.clear()):Be=re.buffer.consume(Re,re.decoder),Be);var Be}function Ft(Re){var re=Re._readableState;R("endReadable",re.endEmitted),re.endEmitted||(re.ended=!0,process.nextTick(gt,re,Re))}function gt(Re,re){if(R("endReadableNT",Re.endEmitted,Re.length),!Re.endEmitted&&Re.length===0&&(Re.endEmitted=!0,re.readable=!1,re.emit("end"),Re.autoDestroy)){var Be=re._writableState;(!Be||Be.autoDestroy&&Be.finished)&&re.destroy()}}function St(Re,re){for(var Be=0,O=Re.length;Be<O;Be++)if(Re[Be]===re)return Be;return-1}de.prototype.read=function(Re){R("read",Re),Re=parseInt(Re,10);var re=this._readableState,Be=Re;if(Re!==0&&(re.emittedReadable=!1),Re===0&&re.needReadable&&((re.highWaterMark!==0?re.length>=re.highWaterMark:re.length>0)||re.ended))return R("read: emitReadable",re.length,re.ended),re.length===0&&re.ended?Ft(this):nt(this),null;if((Re=je(Re,re))===0&&re.ended)return re.length===0&&Ft(this),null;var O,M=re.needReadable;return R("need readable",M),(re.length===0||re.length-Re<re.highWaterMark)&&R("length less than watermark",M=!0),re.ended||re.reading?R("reading or ended",M=!1):M&&(R("do read"),re.reading=!0,re.sync=!0,re.length===0&&(re.needReadable=!0),this._read(re.highWaterMark),re.sync=!1,re.reading||(Re=je(Be,re))),(O=Re>0?qt(Re,re):null)===null?(re.needReadable=re.length<=re.highWaterMark,Re=0):(re.length-=Re,re.awaitDrain=0),re.length===0&&(re.ended||(re.needReadable=!0),Be!==Re&&re.ended&&Ft(this)),O!==null&&this.emit("data",O),O},de.prototype._read=function(Re){X(this,new ue("_read()"))},de.prototype.pipe=function(Re,re){var Be=this,O=this._readableState;switch(O.pipesCount){case 0:O.pipes=Re;break;case 1:O.pipes=[O.pipes,Re];break;default:O.pipes.push(Re)}O.pipesCount+=1,R("pipe count=%d opts=%j",O.pipesCount,re);var M=re&&re.end===!1||Re===process.stdout||Re===process.stderr?at:q;function q(){R("onend"),Re.end()}O.endEmitted?process.nextTick(M):Be.once("end",M),Re.on("unpipe",function tt(ft,Et){R("onunpipe"),ft===Be&&Et&&Et.hasUnpiped===!1&&(Et.hasUnpiped=!0,R("cleanup"),Re.removeListener("close",wt),Re.removeListener("finish",st),Re.removeListener("drain",K),Re.removeListener("error",Ke),Re.removeListener("unpipe",tt),Be.removeListener("end",q),Be.removeListener("end",at),Be.removeListener("data",he),ye=!0,!O.awaitDrain||Re._writableState&&!Re._writableState.needDrain||K())});var K=function(tt){return function(){var ft=tt._readableState;R("pipeOnDrain",ft.awaitDrain),ft.awaitDrain&&ft.awaitDrain--,ft.awaitDrain===0&&y(tt,"data")&&(ft.flowing=!0,it(tt))}}(Be);Re.on("drain",K);var ye=!1;function he(tt){R("ondata");var ft=Re.write(tt);R("dest.write",ft),ft===!1&&((O.pipesCount===1&&O.pipes===Re||O.pipesCount>1&&St(O.pipes,Re)!==-1)&&!ye&&(R("false write response, pause",O.awaitDrain),O.awaitDrain++),Be.pause())}function Ke(tt){R("onerror",tt),at(),Re.removeListener("error",Ke),y(Re,"error")===0&&X(Re,tt)}function wt(){Re.removeListener("finish",st),at()}function st(){R("onfinish"),Re.removeListener("close",wt),at()}function at(){R("unpipe"),Be.unpipe(Re)}return Be.on("data",he),function(tt,ft,Et){if(typeof tt.prependListener=="function")return tt.prependListener(ft,Et);tt._events&&tt._events[ft]?Array.isArray(tt._events[ft])?tt._events[ft].unshift(Et):tt._events[ft]=[Et,tt._events[ft]]:tt.on(ft,Et)}(Re,"error",Ke),Re.once("close",wt),Re.once("finish",st),Re.emit("pipe",Be),O.flowing||(R("pipe resume"),Be.resume()),Re},de.prototype.unpipe=function(Re){var re=this._readableState,Be={hasUnpiped:!1};if(re.pipesCount===0)return this;if(re.pipesCount===1)return Re&&Re!==re.pipes||(Re||(Re=re.pipes),re.pipes=null,re.pipesCount=0,re.flowing=!1,Re&&Re.emit("unpipe",this,Be)),this;if(!Re){var O=re.pipes,M=re.pipesCount;re.pipes=null,re.pipesCount=0,re.flowing=!1;for(var q=0;q<M;q++)O[q].emit("unpipe",this,{hasUnpiped:!1});return this}var K=St(re.pipes,Re);return K===-1||(re.pipes.splice(K,1),re.pipesCount-=1,re.pipesCount===1&&(re.pipes=re.pipes[0]),Re.emit("unpipe",this,Be)),this},de.prototype.on=function(Re,re){var Be=v.prototype.on.call(this,Re,re),O=this._readableState;return Re==="data"?(O.readableListening=this.listenerCount("readable")>0,O.flowing!==!1&&this.resume()):Re==="readable"&&(O.endEmitted||O.readableListening||(O.readableListening=O.needReadable=!0,O.flowing=!1,O.emittedReadable=!1,R("on readable",O.length,O.reading),O.length?nt(this):O.reading||process.nextTick(xe,this))),Be},de.prototype.addListener=de.prototype.on,de.prototype.removeListener=function(Re,re){var Be=v.prototype.removeListener.call(this,Re,re);return Re==="readable"&&process.nextTick(mt,this),Be},de.prototype.removeAllListeners=function(Re){var re=v.prototype.removeAllListeners.apply(this,arguments);return Re!=="readable"&&Re!==void 0||process.nextTick(mt,this),re},de.prototype.resume=function(){var Re=this._readableState;return Re.flowing||(R("resume"),Re.flowing=!Re.readableListening,function(re,Be){Be.resumeScheduled||(Be.resumeScheduled=!0,process.nextTick(We,re,Be))}(this,Re)),Re.paused=!1,this},de.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},de.prototype.wrap=function(Re){var re=this,Be=this._readableState,O=!1;for(var M in Re.on("end",function(){if(R("wrapped end"),Be.decoder&&!Be.ended){var K=Be.decoder.end();K&&K.length&&re.push(K)}re.push(null)}),Re.on("data",function(K){R("wrapped data"),Be.decoder&&(K=Be.decoder.write(K)),Be.objectMode&&K==null||(Be.objectMode||K&&K.length)&&(re.push(K)||(O=!0,Re.pause()))}),Re)this[M]===void 0&&typeof Re[M]=="function"&&(this[M]=function(K){return function(){return Re[K].apply(Re,arguments)}}(M));for(var q=0;q<ce.length;q++)Re.on(ce[q],this.emit.bind(this,ce[q]));return this._read=function(K){R("wrapped _read",K),O&&(O=!1,Re.resume())},this},typeof Symbol=="function"&&(de.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=w(7299)),x(this)}),Object.defineProperty(de.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(de.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(de.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Re){this._readableState&&(this._readableState.flowing=Re)}}),de._fromList=qt,Object.defineProperty(de.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(de.from=function(Re,re){return _===void 0&&(_=w(6233)),_(de,Re,re)})},9798:function(b,g,w){b.exports=U;var F=w(3690).q,R=F.ERR_METHOD_NOT_IMPLEMENTED,y=F.ERR_MULTIPLE_CALLBACK,v=F.ERR_TRANSFORM_ALREADY_TRANSFORMING,D=F.ERR_TRANSFORM_WITH_LENGTH_0,m=w(6138);function T(I,C){var j=this._transformState;j.transforming=!1;var z=j.writecb;if(z===null)return this.emit("error",new y);j.writechunk=null,j.writecb=null,C!=null&&this.push(C),z(I);var $=this._readableState;$.reading=!1,($.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}function U(I){if(!(this instanceof U))return new U(I);m.call(this,I),this._transformState={afterTransform:T.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,I&&(typeof I.transform=="function"&&(this._transform=I.transform),typeof I.flush=="function"&&(this._flush=I.flush)),this.on("prefinish",x)}function x(){var I=this;typeof this._flush!="function"||this._readableState.destroyed?_(this,null,null):this._flush(function(C,j){_(I,C,j)})}function _(I,C,j){if(C)return I.emit("error",C);if(j!=null&&I.push(j),I._writableState.length)throw new D;if(I._transformState.transforming)throw new v;return I.push(null)}w(1765)(U,m),U.prototype.push=function(I,C){return this._transformState.needTransform=!1,m.prototype.push.call(this,I,C)},U.prototype._transform=function(I,C,j){j(new R("_transform()"))},U.prototype._write=function(I,C,j){var z=this._transformState;if(z.writecb=j,z.writechunk=I,z.writeencoding=C,!z.transforming){var $=this._readableState;(z.needTransform||$.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}},U.prototype._read=function(I){var C=this._transformState;C.writechunk===null||C.transforming?C.needTransform=!0:(C.transforming=!0,this._transform(C.writechunk,C.writeencoding,C.afterTransform))},U.prototype._destroy=function(I,C){m.prototype._destroy.call(this,I,function(j){C(j)})}},8318:function(b,g,w){function F(Ie){var Ye=this;this.next=null,this.entry=null,this.finish=function(){(function(mt,xe,We){var it=mt.entry;for(mt.entry=null;it;){var qt=it.callback;xe.pendingcb--,qt(void 0),it=it.next}xe.corkedRequestsFree.next=mt})(Ye,Ie)}}var R;b.exports=de,de.WritableState=oe;var y,v={deprecate:w(7839)},D=w(9299),m=w(1549).Buffer,T=w.g.Uint8Array||function(){},U=w(6163),x=w(7269).getHighWaterMark,_=w(3690).q,I=_.ERR_INVALID_ARG_TYPE,C=_.ERR_METHOD_NOT_IMPLEMENTED,j=_.ERR_MULTIPLE_CALLBACK,z=_.ERR_STREAM_CANNOT_PIPE,$=_.ERR_STREAM_DESTROYED,W=_.ERR_STREAM_NULL_VALUES,ue=_.ERR_STREAM_WRITE_AFTER_END,N=_.ERR_UNKNOWN_ENCODING,X=U.errorOrDestroy;function ce(){}function oe(Ie,Ye,mt){R=R||w(6138),Ie=Ie||{},typeof mt!="boolean"&&(mt=Ye instanceof R),this.objectMode=!!Ie.objectMode,mt&&(this.objectMode=this.objectMode||!!Ie.writableObjectMode),this.highWaterMark=x(this,Ie,"writableHighWaterMark",mt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var xe=Ie.decodeStrings===!1;this.decodeStrings=!xe,this.defaultEncoding=Ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(We){(function(it,qt){var Ft=it._writableState,gt=Ft.sync,St=Ft.writecb;if(typeof St!="function")throw new j;if(function(re){re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0}(Ft),qt)(function(re,Be,O,M,q){--Be.pendingcb,O?(process.nextTick(q,M),process.nextTick(ct,re,Be),re._writableState.errorEmitted=!0,X(re,M)):(q(M),re._writableState.errorEmitted=!0,X(re,M),ct(re,Be))})(it,Ft,gt,qt,St);else{var Re=je(Ft)||it.destroyed;Re||Ft.corked||Ft.bufferProcessing||!Ft.bufferedRequest||Te(it,Ft),gt?process.nextTick(Je,it,Ft,Re,St):Je(it,Ft,Re,St)}})(Ye,We)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ie.emitClose!==!1,this.autoDestroy=!!Ie.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new F(this)}function de(Ie){var Ye=this instanceof(R=R||w(6138));if(!Ye&&!y.call(de,this))return new de(Ie);this._writableState=new oe(Ie,this,Ye),this.writable=!0,Ie&&(typeof Ie.write=="function"&&(this._write=Ie.write),typeof Ie.writev=="function"&&(this._writev=Ie.writev),typeof Ie.destroy=="function"&&(this._destroy=Ie.destroy),typeof Ie.final=="function"&&(this._final=Ie.final)),D.call(this)}function Ce(Ie,Ye,mt,xe,We,it,qt){Ye.writelen=xe,Ye.writecb=qt,Ye.writing=!0,Ye.sync=!0,Ye.destroyed?Ye.onwrite(new $("write")):mt?Ie._writev(We,Ye.onwrite):Ie._write(We,it,Ye.onwrite),Ye.sync=!1}function Je(Ie,Ye,mt,xe){mt||function(We,it){it.length===0&&it.needDrain&&(it.needDrain=!1,We.emit("drain"))}(Ie,Ye),Ye.pendingcb--,xe(),ct(Ie,Ye)}function Te(Ie,Ye){Ye.bufferProcessing=!0;var mt=Ye.bufferedRequest;if(Ie._writev&&mt&&mt.next){var xe=Ye.bufferedRequestCount,We=new Array(xe),it=Ye.corkedRequestsFree;it.entry=mt;for(var qt=0,Ft=!0;mt;)We[qt]=mt,mt.isBuf||(Ft=!1),mt=mt.next,qt+=1;We.allBuffers=Ft,Ce(Ie,Ye,!0,Ye.length,We,"",it.finish),Ye.pendingcb++,Ye.lastBufferedRequest=null,it.next?(Ye.corkedRequestsFree=it.next,it.next=null):Ye.corkedRequestsFree=new F(Ye),Ye.bufferedRequestCount=0}else{for(;mt;){var gt=mt.chunk,St=mt.encoding,Re=mt.callback;if(Ce(Ie,Ye,!1,Ye.objectMode?1:gt.length,gt,St,Re),mt=mt.next,Ye.bufferedRequestCount--,Ye.writing)break}mt===null&&(Ye.lastBufferedRequest=null)}Ye.bufferedRequest=mt,Ye.bufferProcessing=!1}function je(Ie){return Ie.ending&&Ie.length===0&&Ie.bufferedRequest===null&&!Ie.finished&&!Ie.writing}function nt(Ie,Ye){Ie._final(function(mt){Ye.pendingcb--,mt&&X(Ie,mt),Ye.prefinished=!0,Ie.emit("prefinish"),ct(Ie,Ye)})}function ct(Ie,Ye){var mt=je(Ye);if(mt&&(function(We,it){it.prefinished||it.finalCalled||(typeof We._final!="function"||it.destroyed?(it.prefinished=!0,We.emit("prefinish")):(it.pendingcb++,it.finalCalled=!0,process.nextTick(nt,We,it)))}(Ie,Ye),Ye.pendingcb===0&&(Ye.finished=!0,Ie.emit("finish"),Ye.autoDestroy))){var xe=Ie._readableState;(!xe||xe.autoDestroy&&xe.endEmitted)&&Ie.destroy()}return mt}w(1765)(de,D),oe.prototype.getBuffer=function(){for(var Ie=this.bufferedRequest,Ye=[];Ie;)Ye.push(Ie),Ie=Ie.next;return Ye},function(){try{Object.defineProperty(oe.prototype,"buffer",{get:v.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Ie){}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(de,Symbol.hasInstance,{value:function(Ie){return!!y.call(this,Ie)||this===de&&Ie&&Ie._writableState instanceof oe}})):y=function(Ie){return Ie instanceof this},de.prototype.pipe=function(){X(this,new z)},de.prototype.write=function(Ie,Ye,mt){var xe,We=this._writableState,it=!1,qt=!We.objectMode&&(xe=Ie,m.isBuffer(xe)||xe instanceof T);return qt&&!m.isBuffer(Ie)&&(Ie=function(Ft){return m.from(Ft)}(Ie)),typeof Ye=="function"&&(mt=Ye,Ye=null),qt?Ye="buffer":Ye||(Ye=We.defaultEncoding),typeof mt!="function"&&(mt=ce),We.ending?function(Ft,gt){var St=new ue;X(Ft,St),process.nextTick(gt,St)}(this,mt):(qt||function(Ft,gt,St,Re){var re;return St===null?re=new W:typeof St=="string"||gt.objectMode||(re=new I("chunk",["string","Buffer"],St)),!re||(X(Ft,re),process.nextTick(Re,re),!1)}(this,We,Ie,mt))&&(We.pendingcb++,it=function(Ft,gt,St,Re,re,Be){if(!St){var O=function(ye,he,Ke){return ye.objectMode||ye.decodeStrings===!1||typeof he!="string"||(he=m.from(he,Ke)),he}(gt,Re,re);Re!==O&&(St=!0,re="buffer",Re=O)}var M=gt.objectMode?1:Re.length;gt.length+=M;var q=gt.length<gt.highWaterMark;if(q||(gt.needDrain=!0),gt.writing||gt.corked){var K=gt.lastBufferedRequest;gt.lastBufferedRequest={chunk:Re,encoding:re,isBuf:St,callback:Be,next:null},K?K.next=gt.lastBufferedRequest:gt.bufferedRequest=gt.lastBufferedRequest,gt.bufferedRequestCount+=1}else Ce(Ft,gt,!1,M,Re,re,Be);return q}(this,We,qt,Ie,Ye,mt)),it},de.prototype.cork=function(){this._writableState.corked++},de.prototype.uncork=function(){var Ie=this._writableState;Ie.corked&&(Ie.corked--,Ie.writing||Ie.corked||Ie.bufferProcessing||!Ie.bufferedRequest||Te(this,Ie))},de.prototype.setDefaultEncoding=function(Ie){if(typeof Ie=="string"&&(Ie=Ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ie+"").toLowerCase())>-1))throw new N(Ie);return this._writableState.defaultEncoding=Ie,this},Object.defineProperty(de.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(de.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),de.prototype._write=function(Ie,Ye,mt){mt(new C("_write()"))},de.prototype._writev=null,de.prototype.end=function(Ie,Ye,mt){var xe=this._writableState;return typeof Ie=="function"?(mt=Ie,Ie=null,Ye=null):typeof Ye=="function"&&(mt=Ye,Ye=null),Ie!=null&&this.write(Ie,Ye),xe.corked&&(xe.corked=1,this.uncork()),xe.ending||function(We,it,qt){it.ending=!0,ct(We,it),qt&&(it.finished?process.nextTick(qt):We.once("finish",qt)),it.ended=!0,We.writable=!1}(this,xe,mt),this},Object.defineProperty(de.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(de.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ie){this._writableState&&(this._writableState.destroyed=Ie)}}),de.prototype.destroy=U.destroy,de.prototype._undestroy=U.undestroy,de.prototype._destroy=function(Ie,Ye){Ye(Ie)}},7299:function(b,g,w){var F;function R(W,ue,N){return ue in W?Object.defineProperty(W,ue,{value:N,enumerable:!0,configurable:!0,writable:!0}):W[ue]=N,W}var y=w(8800),v=Symbol("lastResolve"),D=Symbol("lastReject"),m=Symbol("error"),T=Symbol("ended"),U=Symbol("lastPromise"),x=Symbol("handlePromise"),_=Symbol("stream");function I(W,ue){return{value:W,done:ue}}function C(W){var ue=W[v];if(ue!==null){var N=W[_].read();N!==null&&(W[U]=null,W[v]=null,W[D]=null,ue(I(N,!1)))}}function j(W){process.nextTick(C,W)}var z=Object.getPrototypeOf(function(){}),$=Object.setPrototypeOf((R(F={get stream(){return this[_]},next:function(){var W=this,ue=this[m];if(ue!==null)return Promise.reject(ue);if(this[T])return Promise.resolve(I(void 0,!0));if(this[_].destroyed)return new Promise(function(oe,de){process.nextTick(function(){W[m]?de(W[m]):oe(I(void 0,!0))})});var N,X=this[U];if(X)N=new Promise(function(oe,de){return function(Ce,Je){oe.then(function(){de[T]?Ce(I(void 0,!0)):de[x](Ce,Je)},Je)}}(X,this));else{var ce=this[_].read();if(ce!==null)return Promise.resolve(I(ce,!1));N=new Promise(this[x])}return this[U]=N,N}},Symbol.asyncIterator,function(){return this}),R(F,"return",function(){var W=this;return new Promise(function(ue,N){W[_].destroy(null,function(X){X?N(X):ue(I(void 0,!0))})})}),F),z);b.exports=function(W){var ue,N=Object.create($,(R(ue={},_,{value:W,writable:!0}),R(ue,v,{value:null,writable:!0}),R(ue,D,{value:null,writable:!0}),R(ue,m,{value:null,writable:!0}),R(ue,T,{value:W._readableState.endEmitted,writable:!0}),R(ue,x,{value:function(X,ce){var oe=N[_].read();oe?(N[U]=null,N[v]=null,N[D]=null,X(I(oe,!1))):(N[v]=X,N[D]=ce)},writable:!0}),ue));return N[U]=null,y(W,function(X){if(X&&X.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ce=N[D];return ce!==null&&(N[U]=null,N[v]=null,N[D]=null,ce(X)),void(N[m]=X)}var oe=N[v];oe!==null&&(N[U]=null,N[v]=null,N[D]=null,oe(I(void 0,!0))),N[T]=!0}),W.on("readable",j.bind(null,N)),N}},8393:function(b,g,w){function F(T,U){var x=Object.keys(T);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(T);U&&(_=_.filter(function(I){return Object.getOwnPropertyDescriptor(T,I).enumerable})),x.push.apply(x,_)}return x}function R(T,U,x){return U in T?Object.defineProperty(T,U,{value:x,enumerable:!0,configurable:!0,writable:!0}):T[U]=x,T}function y(T,U){for(var x=0;x<U.length;x++){var _=U[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var v=w(1549).Buffer,D=w(9862).inspect,m=D&&D.custom||"inspect";b.exports=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T),this.head=null,this.tail=null,this.length=0}var U,x;return U=T,x=[{key:"push",value:function(_){var I={data:_,next:null};this.length>0?this.tail.next=I:this.head=I,this.tail=I,++this.length}},{key:"unshift",value:function(_){var I={data:_,next:this.head};this.length===0&&(this.tail=I),this.head=I,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var I=this.head,C=""+I.data;I=I.next;)C+=_+I.data;return C}},{key:"concat",value:function(_){if(this.length===0)return v.alloc(0);for(var I,C,j,z=v.allocUnsafe(_>>>0),$=this.head,W=0;$;)I=$.data,C=z,j=W,v.prototype.copy.call(I,C,j),W+=$.data.length,$=$.next;return z}},{key:"consume",value:function(_,I){var C;return _<this.head.data.length?(C=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):C=_===this.head.data.length?this.shift():I?this._getString(_):this._getBuffer(_),C}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var I=this.head,C=1,j=I.data;for(_-=j.length;I=I.next;){var z=I.data,$=_>z.length?z.length:_;if($===z.length?j+=z:j+=z.slice(0,_),(_-=$)==0){$===z.length?(++C,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=z.slice($));break}++C}return this.length-=C,j}},{key:"_getBuffer",value:function(_){var I=v.allocUnsafe(_),C=this.head,j=1;for(C.data.copy(I),_-=C.data.length;C=C.next;){var z=C.data,$=_>z.length?z.length:_;if(z.copy(I,I.length-_,0,$),(_-=$)==0){$===z.length?(++j,C.next?this.head=C.next:this.head=this.tail=null):(this.head=C,C.data=z.slice($));break}++j}return this.length-=j,I}},{key:m,value:function(_,I){return D(this,function(C){for(var j=1;j<arguments.length;j++){var z=arguments[j]!=null?arguments[j]:{};j%2?F(Object(z),!0).forEach(function($){R(C,$,z[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(z)):F(Object(z)).forEach(function($){Object.defineProperty(C,$,Object.getOwnPropertyDescriptor(z,$))})}return C}({},I,{depth:0,customInspect:!1}))}}],x&&y(U.prototype,x),T}()},6163:function(b){function g(R,y){F(R,y),w(R)}function w(R){R._writableState&&!R._writableState.emitClose||R._readableState&&!R._readableState.emitClose||R.emit("close")}function F(R,y){R.emit("error",y)}b.exports={destroy:function(R,y){var v=this,D=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return D||m?(y?y(R):R&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(F,this,R)):process.nextTick(F,this,R)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(R||null,function(T){!y&&T?v._writableState?v._writableState.errorEmitted?process.nextTick(w,v):(v._writableState.errorEmitted=!0,process.nextTick(g,v,T)):process.nextTick(g,v,T):y?(process.nextTick(w,v),y(T)):process.nextTick(w,v)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(R,y){var v=R._readableState,D=R._writableState;v&&v.autoDestroy||D&&D.autoDestroy?R.destroy(y):R.emit("error",y)}}},8800:function(b,g,w){var F=w(3690).q.ERR_STREAM_PREMATURE_CLOSE;function R(){}b.exports=function y(v,D,m){if(typeof D=="function")return y(v,null,D);D||(D={}),m=function(ue){var N=!1;return function(){if(!N){N=!0;for(var X=arguments.length,ce=new Array(X),oe=0;oe<X;oe++)ce[oe]=arguments[oe];ue.apply(this,ce)}}}(m||R);var T=D.readable||D.readable!==!1&&v.readable,U=D.writable||D.writable!==!1&&v.writable,x=function(){v.writable||I()},_=v._writableState&&v._writableState.finished,I=function(){U=!1,_=!0,T||m.call(v)},C=v._readableState&&v._readableState.endEmitted,j=function(){T=!1,C=!0,U||m.call(v)},z=function(ue){m.call(v,ue)},$=function(){var ue;return T&&!C?(v._readableState&&v._readableState.ended||(ue=new F),m.call(v,ue)):U&&!_?(v._writableState&&v._writableState.ended||(ue=new F),m.call(v,ue)):void 0},W=function(){v.req.on("finish",I)};return function(ue){return ue.setHeader&&typeof ue.abort=="function"}(v)?(v.on("complete",I),v.on("abort",$),v.req?W():v.on("request",W)):U&&!v._writableState&&(v.on("end",x),v.on("close",x)),v.on("end",j),v.on("finish",I),D.error!==!1&&v.on("error",z),v.on("close",$),function(){v.removeListener("complete",I),v.removeListener("abort",$),v.removeListener("request",W),v.req&&v.req.removeListener("finish",I),v.removeListener("end",x),v.removeListener("close",x),v.removeListener("finish",I),v.removeListener("end",j),v.removeListener("error",z),v.removeListener("close",$)}}},6233:function(b){b.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(b,g,w){var F,R=w(3690).q,y=R.ERR_MISSING_ARGS,v=R.ERR_STREAM_DESTROYED;function D(_){if(_)throw _}function m(_,I,C,j){j=function(W){var ue=!1;return function(){ue||(ue=!0,W.apply(void 0,arguments))}}(j);var z=!1;_.on("close",function(){z=!0}),F===void 0&&(F=w(8800)),F(_,{readable:I,writable:C},function(W){if(W)return j(W);z=!0,j()});var $=!1;return function(W){if(!z&&!$)return $=!0,function(ue){return ue.setHeader&&typeof ue.abort=="function"}(_)?_.abort():typeof _.destroy=="function"?_.destroy():void j(W||new v("pipe"))}}function T(_){_()}function U(_,I){return _.pipe(I)}function x(_){return _.length?typeof _[_.length-1]!="function"?D:_.pop():D}b.exports=function(){for(var _=arguments.length,I=new Array(_),C=0;C<_;C++)I[C]=arguments[C];var j,z=x(I);if(Array.isArray(I[0])&&(I=I[0]),I.length<2)throw new y("streams");var $=I.map(function(W,ue){var N=ue<I.length-1;return m(W,N,ue>0,function(X){j||(j=X),X&&$.forEach(T),N||($.forEach(T),z(j))})});return I.reduce(U)}},7269:function(b,g,w){var F=w(3690).q.ERR_INVALID_OPT_VALUE;b.exports={getHighWaterMark:function(R,y,v,D){var m=function(T,U,x){return T.highWaterMark!=null?T.highWaterMark:U?T[x]:null}(y,D,v);if(m!=null){if(!isFinite(m)||Math.floor(m)!==m||m<0)throw new F(D?v:"highWaterMark",m);return Math.floor(m)}return R.objectMode?16:16384}}},9299:function(b,g,w){b.exports=w(1159).EventEmitter},7503:function(b,g,w){var F=w(8387).Buffer,R=F.isEncoding||function(C){switch((C=""+C)&&C.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function y(C){var j;switch(this.encoding=function(z){var $=function(W){if(!W)return"utf8";for(var ue;;)switch(W){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return W;default:if(ue)return;W=(""+W).toLowerCase(),ue=!0}}(z);if(typeof $!="string"&&(F.isEncoding===R||!R(z)))throw new Error("Unknown encoding: "+z);return $||z}(C),this.encoding){case"utf16le":this.text=m,this.end=T,j=4;break;case"utf8":this.fillLast=D,j=4;break;case"base64":this.text=U,this.end=x,j=3;break;default:return this.write=_,void(this.end=I)}this.lastNeed=0,this.lastTotal=0,this.lastChar=F.allocUnsafe(j)}function v(C){return C<=127?0:C>>5==6?2:C>>4==14?3:C>>3==30?4:C>>6==2?-1:-2}function D(C){var j=this.lastTotal-this.lastNeed,z=function($,W,ue){if((192&W[0])!=128)return $.lastNeed=0,"�";if($.lastNeed>1&&W.length>1){if((192&W[1])!=128)return $.lastNeed=1,"�";if($.lastNeed>2&&W.length>2&&(192&W[2])!=128)return $.lastNeed=2,"�"}}(this,C);return z!==void 0?z:this.lastNeed<=C.length?(C.copy(this.lastChar,j,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(C.copy(this.lastChar,j,0,C.length),void(this.lastNeed-=C.length))}function m(C,j){if((C.length-j)%2==0){var z=C.toString("utf16le",j);if(z){var $=z.charCodeAt(z.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=C[C.length-2],this.lastChar[1]=C[C.length-1],z.slice(0,-1)}return z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=C[C.length-1],C.toString("utf16le",j,C.length-1)}function T(C){var j=C&&C.length?this.write(C):"";if(this.lastNeed){var z=this.lastTotal-this.lastNeed;return j+this.lastChar.toString("utf16le",0,z)}return j}function U(C,j){var z=(C.length-j)%3;return z===0?C.toString("base64",j):(this.lastNeed=3-z,this.lastTotal=3,z===1?this.lastChar[0]=C[C.length-1]:(this.lastChar[0]=C[C.length-2],this.lastChar[1]=C[C.length-1]),C.toString("base64",j,C.length-z))}function x(C){var j=C&&C.length?this.write(C):"";return this.lastNeed?j+this.lastChar.toString("base64",0,3-this.lastNeed):j}function _(C){return C.toString(this.encoding)}function I(C){return C&&C.length?this.write(C):""}g.s=y,y.prototype.write=function(C){if(C.length===0)return"";var j,z;if(this.lastNeed){if((j=this.fillLast(C))===void 0)return"";z=this.lastNeed,this.lastNeed=0}else z=0;return z<C.length?j?j+this.text(C,z):this.text(C,z):j||""},y.prototype.end=function(C){var j=C&&C.length?this.write(C):"";return this.lastNeed?j+"�":j},y.prototype.text=function(C,j){var z=function(W,ue,N){var X=ue.length-1;if(X<N)return 0;var ce=v(ue[X]);return ce>=0?(ce>0&&(W.lastNeed=ce-1),ce):--X<N||ce===-2?0:(ce=v(ue[X]))>=0?(ce>0&&(W.lastNeed=ce-2),ce):--X<N||ce===-2?0:(ce=v(ue[X]))>=0?(ce>0&&(ce===2?ce=0:W.lastNeed=ce-3),ce):0}(this,C,j);if(!this.lastNeed)return C.toString("utf8",j);this.lastTotal=z;var $=C.length-(z-this.lastNeed);return C.copy(this.lastChar,0,$),C.toString("utf8",j,$)},y.prototype.fillLast=function(C){if(this.lastNeed<=C.length)return C.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);C.copy(this.lastChar,this.lastTotal-this.lastNeed,0,C.length),this.lastNeed-=C.length}},1067:function(b,g,w){var F;(function(R,y){var v="function",D="undefined",m="object",T="string",U="major",x="model",_="name",I="type",C="vendor",j="version",z="architecture",$="console",W="mobile",ue="tablet",N="smarttv",X="wearable",ce="embedded",oe="Amazon",de="Apple",Ce="ASUS",Je="BlackBerry",Te="Browser",je="Chrome",nt="Firefox",ct="Google",Ie="Huawei",Ye="LG",mt="Microsoft",xe="Motorola",We="Opera",it="Samsung",qt="Sharp",Ft="Sony",gt="Xiaomi",St="Zebra",Re="Facebook",re="Chromium OS",Be="Mac OS",O=function(ft){for(var Et={},Tt=0;Tt<ft.length;Tt++)Et[ft[Tt].toUpperCase()]=ft[Tt];return Et},M=function(ft,Et){return typeof ft===T&&q(Et).indexOf(q(ft))!==-1},q=function(ft){return ft.toLowerCase()},K=function(ft,Et){if(typeof ft===T)return ft=ft.replace(/^\s\s*/,""),typeof Et===D?ft:ft.substring(0,500)},ye=function(ft,Et){for(var Tt,Ct,hn,Qt,nn,Ot,Un=0;Un<Et.length&&!nn;){var gr=Et[Un],Or=Et[Un+1];for(Tt=Ct=0;Tt<gr.length&&!nn&&gr[Tt];)if(nn=gr[Tt++].exec(ft))for(hn=0;hn<Or.length;hn++)Ot=nn[++Ct],typeof(Qt=Or[hn])===m&&Qt.length>0?Qt.length===2?typeof Qt[1]==v?this[Qt[0]]=Qt[1].call(this,Ot):this[Qt[0]]=Qt[1]:Qt.length===3?typeof Qt[1]!==v||Qt[1].exec&&Qt[1].test?this[Qt[0]]=Ot?Ot.replace(Qt[1],Qt[2]):y:this[Qt[0]]=Ot?Qt[1].call(this,Ot,Qt[2]):y:Qt.length===4&&(this[Qt[0]]=Ot?Qt[3].call(this,Ot.replace(Qt[1],Qt[2])):y):this[Qt]=Ot||y;Un+=2}},he=function(ft,Et){for(var Tt in Et)if(typeof Et[Tt]===m&&Et[Tt].length>0){for(var Ct=0;Ct<Et[Tt].length;Ct++)if(M(Et[Tt][Ct],ft))return Tt==="?"?y:Tt}else if(M(Et[Tt],ft))return Tt==="?"?y:Tt;return ft},Ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},wt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[j,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[j,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,j],[/opios[\/ ]+([\w\.]+)/i],[j,[_,We+" Mini"]],[/\bopr\/([\w\.]+)/i],[j,[_,We]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[j,[_,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[_,j],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[j,[_,"UC"+Te]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[j,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[j,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[j,[_,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[j,[_,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[j,[_,"Smart Lenovo "+Te]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+Te],j],[/\bfocus\/([\w\.]+)/i],[j,[_,nt+" Focus"]],[/\bopt\/([\w\.]+)/i],[j,[_,We+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[j,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[j,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[j,[_,We+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[j,[_,"MIUI "+Te]],[/fxios\/([-\w\.]+)/i],[j,[_,nt]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+Te]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+Te],j],[/samsungbrowser\/([\w\.]+)/i],[j,[_,it+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],j],[/metasr[\/ ]?([\d\.]+)/i],[j,[_,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[_,"Sogou Mobile"],j],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[_,j],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,Re],j],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[_,j],[/\bgsa\/([\w\.]+) .*safari\//i],[j,[_,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[j,[_,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[j,[_,je+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,je+" WebView"],j],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[j,[_,"Android "+Te]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,j],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[j,[_,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[j,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[j,he,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[_,j],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],j],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[j,[_,nt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[_,j],[/(cobalt)\/([\w\.]+)/i],[_,[j,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[z,"amd64"]],[/(ia32(?=;))/i],[[z,q]],[/((?:i[346]|x)86)[;\)]/i],[[z,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[z,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[z,"armhf"]],[/windows (ce|mobile); ppc;/i],[[z,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[z,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[z,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[z,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[x,[C,it],[I,ue]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[x,[C,it],[I,W]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[x,[C,de],[I,W]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[x,[C,de],[I,ue]],[/(macintosh);/i],[x,[C,de]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[x,[C,qt],[I,W]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[x,[C,Ie],[I,ue]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[x,[C,Ie],[I,W]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[x,/_/g," "],[C,gt],[I,W]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[x,/_/g," "],[C,gt],[I,ue]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[x,[C,"OPPO"],[I,W]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[x,[C,"Vivo"],[I,W]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[x,[C,"Realme"],[I,W]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[x,[C,xe],[I,W]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[x,[C,xe],[I,ue]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[x,[C,Ye],[I,ue]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[x,[C,Ye],[I,W]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[x,[C,"Lenovo"],[I,ue]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[x,/_/g," "],[C,"Nokia"],[I,W]],[/(pixel c)\b/i],[x,[C,ct],[I,ue]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[x,[C,ct],[I,W]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[x,[C,Ft],[I,W]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[x,"Xperia Tablet"],[C,Ft],[I,ue]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[x,[C,"OnePlus"],[I,W]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[x,[C,oe],[I,ue]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[x,/(.+)/g,"Fire Phone $1"],[C,oe],[I,W]],[/(playbook);[-\w\),; ]+(rim)/i],[x,C,[I,ue]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[x,[C,Je],[I,W]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[x,[C,Ce],[I,ue]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[x,[C,Ce],[I,W]],[/(nexus 9)/i],[x,[C,"HTC"],[I,ue]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[C,[x,/_/g," "],[I,W]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[x,[C,"Acer"],[I,ue]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[x,[C,"Meizu"],[I,W]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[x,[C,"Ulefone"],[I,W]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[C,x,[I,W]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[C,x,[I,ue]],[/(surface duo)/i],[x,[C,mt],[I,ue]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[x,[C,"Fairphone"],[I,W]],[/(u304aa)/i],[x,[C,"AT&T"],[I,W]],[/\bsie-(\w*)/i],[x,[C,"Siemens"],[I,W]],[/\b(rct\w+) b/i],[x,[C,"RCA"],[I,ue]],[/\b(venue[\d ]{2,7}) b/i],[x,[C,"Dell"],[I,ue]],[/\b(q(?:mv|ta)\w+) b/i],[x,[C,"Verizon"],[I,ue]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[x,[C,"Barnes & Noble"],[I,ue]],[/\b(tm\d{3}\w+) b/i],[x,[C,"NuVision"],[I,ue]],[/\b(k88) b/i],[x,[C,"ZTE"],[I,ue]],[/\b(nx\d{3}j) b/i],[x,[C,"ZTE"],[I,W]],[/\b(gen\d{3}) b.+49h/i],[x,[C,"Swiss"],[I,W]],[/\b(zur\d{3}) b/i],[x,[C,"Swiss"],[I,ue]],[/\b((zeki)?tb.*\b) b/i],[x,[C,"Zeki"],[I,ue]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[C,"Dragon Touch"],x,[I,ue]],[/\b(ns-?\w{0,9}) b/i],[x,[C,"Insignia"],[I,ue]],[/\b((nxa|next)-?\w{0,9}) b/i],[x,[C,"NextBook"],[I,ue]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[C,"Voice"],x,[I,W]],[/\b(lvtel\-)?(v1[12]) b/i],[[C,"LvTel"],x,[I,W]],[/\b(ph-1) /i],[x,[C,"Essential"],[I,W]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[x,[C,"Envizen"],[I,ue]],[/\b(trio[-\w\. ]+) b/i],[x,[C,"MachSpeed"],[I,ue]],[/\btu_(1491) b/i],[x,[C,"Rotor"],[I,ue]],[/(shield[\w ]+) b/i],[x,[C,"Nvidia"],[I,ue]],[/(sprint) (\w+)/i],[C,x,[I,W]],[/(kin\.[onetw]{3})/i],[[x,/\./g," "],[C,mt],[I,W]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[x,[C,St],[I,ue]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[x,[C,St],[I,W]],[/smart-tv.+(samsung)/i],[C,[I,N]],[/hbbtv.+maple;(\d+)/i],[[x,/^/,"SmartTV"],[C,it],[I,N]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[C,Ye],[I,N]],[/(apple) ?tv/i],[C,[x,de+" TV"],[I,N]],[/crkey/i],[[x,je+"cast"],[C,ct],[I,N]],[/droid.+aft(\w+)( bui|\))/i],[x,[C,oe],[I,N]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[x,[C,qt],[I,N]],[/(bravia[\w ]+)( bui|\))/i],[x,[C,Ft],[I,N]],[/(mitv-\w{5}) bui/i],[x,[C,gt],[I,N]],[/Hbbtv.*(technisat) (.*);/i],[C,x,[I,N]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[C,K],[x,K],[I,N]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[I,N]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[C,x,[I,$]],[/droid.+; (shield) bui/i],[x,[C,"Nvidia"],[I,$]],[/(playstation [345portablevi]+)/i],[x,[C,Ft],[I,$]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[x,[C,mt],[I,$]],[/((pebble))app/i],[C,x,[I,X]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[x,[C,de],[I,X]],[/droid.+; (glass) \d/i],[x,[C,ct],[I,X]],[/droid.+; (wt63?0{2,3})\)/i],[x,[C,St],[I,X]],[/(quest( 2| pro)?)/i],[x,[C,Re],[I,X]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[C,[I,ce]],[/(aeobc)\b/i],[x,[C,oe],[I,ce]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[x,[I,W]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[x,[I,ue]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[I,ue]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[I,W]],[/(android[-\w\. ]{0,9});.+buil/i],[x,[C,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[j,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[j,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[_,j],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[j,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,j],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[_,[j,he,Ke]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[j,he,Ke],[_,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[j,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,Be],[j,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[j,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,j],[/\(bb(10);/i],[j,[_,Je]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[j,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[j,[_,nt+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[j,[_,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[j,[_,"watchOS"]],[/crkey\/([\d\.]+)/i],[j,[_,je+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[_,re],j],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,j],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],j],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[_,j]]},st=function(ft,Et){if(typeof ft===m&&(Et=ft,ft=y),!(this instanceof st))return new st(ft,Et).getResult();var Tt=typeof R!==D&&R.navigator?R.navigator:y,Ct=ft||(Tt&&Tt.userAgent?Tt.userAgent:""),hn=Tt&&Tt.userAgentData?Tt.userAgentData:y,Qt=Et?function(Ot,Un){var gr={};for(var Or in Ot)Un[Or]&&Un[Or].length%2==0?gr[Or]=Un[Or].concat(Ot[Or]):gr[Or]=Ot[Or];return gr}(wt,Et):wt,nn=Tt&&Tt.userAgent==Ct;return this.getBrowser=function(){var Ot,Un={};return Un[_]=y,Un[j]=y,ye.call(Un,Ct,Qt.browser),Un[U]=typeof(Ot=Un[j])===T?Ot.replace(/[^\d\.]/g,"").split(".")[0]:y,nn&&Tt&&Tt.brave&&typeof Tt.brave.isBrave==v&&(Un[_]="Brave"),Un},this.getCPU=function(){var Ot={};return Ot[z]=y,ye.call(Ot,Ct,Qt.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[C]=y,Ot[x]=y,Ot[I]=y,ye.call(Ot,Ct,Qt.device),nn&&!Ot[I]&&hn&&hn.mobile&&(Ot[I]=W),nn&&Ot[x]=="Macintosh"&&Tt&&typeof Tt.standalone!==D&&Tt.maxTouchPoints&&Tt.maxTouchPoints>2&&(Ot[x]="iPad",Ot[I]=ue),Ot},this.getEngine=function(){var Ot={};return Ot[_]=y,Ot[j]=y,ye.call(Ot,Ct,Qt.engine),Ot},this.getOS=function(){var Ot={};return Ot[_]=y,Ot[j]=y,ye.call(Ot,Ct,Qt.os),nn&&!Ot[_]&&hn&&hn.platform!="Unknown"&&(Ot[_]=hn.platform.replace(/chrome os/i,re).replace(/macos/i,Be)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(Ot){return Ct=typeof Ot===T&&Ot.length>500?K(Ot,500):Ot,this},this.setUA(Ct),this};st.VERSION="1.0.37",st.BROWSER=O([_,j,U]),st.CPU=O([z]),st.DEVICE=O([x,C,I,$,W,N,ue,X,ce]),st.ENGINE=st.OS=O([_,j]),typeof g!==D?(b.exports&&(g=b.exports=st),g.UAParser=st):w.amdO?(F=(function(){return st}).call(g,w,g,b))===y||(b.exports=F):typeof R!==D&&(R.UAParser=st);var at=typeof R!==D&&(R.jQuery||R.Zepto);if(at&&!at.ua){var tt=new st;at.ua=tt.getResult(),at.ua.get=function(){return tt.getUA()},at.ua.set=function(ft){tt.setUA(ft);var Et=tt.getResult();for(var Tt in Et)at.ua[Tt]=Et[Tt]}}})(typeof window=="object"?window:this)},7839:function(b,g,w){function F(R){try{if(!w.g.localStorage)return!1}catch(v){return!1}var y=w.g.localStorage[R];return y!=null&&String(y).toLowerCase()==="true"}b.exports=function(R,y){if(F("noDeprecation"))return R;var v=!1;return function(){if(!v){if(F("throwDeprecation"))throw new Error(y);F("traceDeprecation")?console.trace(y):console.warn(y),v=!0}return R.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(b){b.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(b){b.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(b){b.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(b){b.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(b){b.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(b){b.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},d={};function p(b){var g=d[b];if(g!==void 0)return g.exports;var w=d[b]={exports:{}};return l[b].call(w.exports,w,w.exports,p),w.exports}p.amdO={},p.n=function(b){var g=b&&b.__esModule?function(){return b.default}:function(){return b};return p.d(g,{a:g}),g},p.d=function(b,g){for(var w in g)p.o(g,w)&&!p.o(b,w)&&Object.defineProperty(b,w,{enumerable:!0,get:g[w]})},p.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(b){if(typeof window=="object")return window}}(),p.o=function(b,g){return Object.prototype.hasOwnProperty.call(b,g)};var S={};return function(){p.d(S,{default:function(){return m}}),p(8416);var b,g=p(1715),w=p(8080),F=p(1737),R=p(1139),y=function(){var T,U="application/dash+xml";function x(I,C,j){if(!I||!/^VIDEO$/i.test(I.nodeName))return null;if(I._dashjs_player)return I._dashjs_player;var z,$=I.id||I.name||"video element";if(!(C=C||[].slice.call(I.querySelectorAll("source")).filter(function(W){return W.type==U})[0])&&I.src)(C=document.createElement("source")).src=I.src;else if(!C&&!I.src)return null;return j=j||{},(z=(0,R.Z)(j).create()).initialize(I,C.src,I.autoplay),T||(T=z.getDebug().getLogger()),T.debug("Converted "+$+" to dash.js player and added content: "+C.src),I._dashjs_player=z,z}function _(I){return/^VIDEO$/i.test(I.nodeName)?I:_(I.parentNode)}return{create:x,createAll:function(I,C){var j=[];I=I||"[data-dashjs-player]";for(var z=(C=C||document).querySelectorAll(I),$=0;$<z.length;$++){var W=x(z[$],null);j.push(W)}for(var ue=C.querySelectorAll('source[type="'+U+'"]'),N=0;N<ue.length;N++){var X=x(_(ue[N]),null);j.push(X)}return j}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?y.createAll():b=window.setInterval(function(){window.dashjs&&(window.clearInterval(b),y.createAll())},500):window.addEventListener("load",function T(){window.removeEventListener("load",T),y.createAll()}));var v=y,D=p(6398);dashjs.Protection=F.default,dashjs.MetricsReporting=w.default,dashjs.MediaPlayerFactory=v,dashjs.Debug=D.Z,dashjs.supportsMediaSource=g.B;var m=dashjs}(),S.default}()})})(R4);var $7=R4.exports;const X7=mb($7);var Au,Gi,xA,MA,gg={};gg.d=(o,i)=>{for(var l in i)gg.o(i,l)&&!gg.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:i[l]})},gg.o=(o,i)=>Object.prototype.hasOwnProperty.call(o,i);var cE={};function Yk(o,i){(i==null||i>o.length)&&(i=o.length);for(var l=0,d=Array(i);l<i;l++)d[l]=o[l];return d}function Xi(o){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{},d=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(l).filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable}))),d.forEach(function(p){var S;S=l[p],p in o?Object.defineProperty(o,p,{value:S,enumerable:!0,configurable:!0,writable:!0}):o[p]=S})}return o}function so(o,i){return i=i!=null?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):function(l,d){var p=Object.keys(l);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(l);p.push.apply(p,S)}return p}(Object(i)).forEach(function(l){Object.defineProperty(o,l,Object.getOwnPropertyDescriptor(i,l))}),o}function Wk(o,i){return function(l){if(Array.isArray(l))return l}(o)||function(l,d){var p,S,b=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(b!=null){var g=[],w=!0,F=!1;try{for(b=b.call(l);!(w=(p=b.next()).done)&&(g.push(p.value),!d||g.length!==d);w=!0);}catch(R){F=!0,S=R}finally{try{w||b.return==null||b.return()}finally{if(F)throw S}}return g}}(o,i)||function(l,d){if(l){if(typeof l=="string")return Yk(l,d);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(p);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Yk(l,d)}}(o,i)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}gg.d(cE,{GP:()=>xA,fZ:()=>J7,vn:()=>MA}),(Au=xA||(xA={})).LOADED="loaded",Au.SEEKING="seeking",Au.SEEKED="seeked",Au.BUFFERING="buffering",Au.BUFFERED="buffered",Au.PLAY="play",Au.PLAYING="playing",Au.PAUSE="pause",Au.ENDED="ended",Au.TIME_UPDATE="timeupdate",(Gi=MA||(MA={})).loadstart="loadstart",Gi.progress="progress",Gi.suspend="suspend",Gi.abort="abort",Gi.error="error",Gi.emptied="emptied",Gi.stalled="stalled",Gi.loadedmetadata="loadedmetadata",Gi.loadeddata="loadeddata",Gi.canplay="canplay",Gi.canplaythrough="canplaythrough",Gi.playing="playing",Gi.waiting="waiting",Gi.seeking="seeking",Gi.seeked="seeked",Gi.ended="ended",Gi.durationchange="durationchange",Gi.timeupdate="timeupdate",Gi.play="play",Gi.pause="pause",Gi.ratechange="ratechange",Gi.resize="resize",Gi.volumechange="volumechange";var Q7={paused:!1,ended:!1,loading:!0,buffering:!1,seeking:!1,initialPlayFired:!1,deferLoadedEvent:!1,deferPlayingEvent:!1,deferSeekedEvent:!1,playRequested:!1},J7=function(o){var i=o.mediaElement,l=o.callback,d=o.allowResumeAfterEnded,p=d!==void 0&&d,S=null,b=function(){typeof S=="number"&&clearTimeout(S)},g=Xi({},Q7),w=function(){return p?g.loading:g.loading||g.ended},F=function(){!g.loading&&g.buffering&&i.playbackRate>0&&(g=so(Xi({},g),{buffering:!1}),l("buffered")),g.loading&&(i.playbackRate===0?g=so(Xi({},g),{deferLoadedEvent:!0}):(g=so(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded")))},R=function(){w()||(g.ended&&(g.ended=!1),g.buffering&&l("buffered"),g=so(Xi({},g),{seeking:!0,buffering:!1}),l("seeking"))},y=function(){if(!w()&&g.seeking){if(i.playbackRate===0){g=so(Xi({},g),{deferSeekedEvent:!0});return}g=so(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")}},v=function(){if(b(),!w()&&!g.seeking){if(i.seeking){R();return}g.buffering||(g=so(Xi({},g),{buffering:!0}),l("buffering"))}},D=function(){if(b(),i.playbackRate===0){g=so(Xi({},g),{deferPlayingEvent:!0});return}(g=so(Xi({},g),{deferPlayingEvent:!1})).loading&&F(),g.initialPlayFired?g.buffering?(g=so(Xi({},g),{buffering:!1}),l("buffered")):g.seeking&&(g=so(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")):(g=so(Xi({},g),{initialPlayFired:!0,paused:!1,playRequested:!1}),l("playing")),g.paused&&g.playRequested&&(g=so(Xi({},g),{paused:!1,playRequested:!1}),l("playing"))},m=function(){return!g.seeking&&!g.buffering&&i.playbackRate===0&&!i.seeking},T=[["canplaythrough",F],["playing",D],["waiting",v],["seeking",R],["seeked",y],["ended",function(){g=so(Xi({},g),{ended:!0,buffering:!1,seeking:!1,loading:!1,paused:!0}),b(),l("ended")}],["timeupdate",function(){w()||(g.buffering&&!i.paused&&(g=so(Xi({},g),{buffering:!1}),l("buffered")),l("timeupdate"))}],["play",function(){!w()&&g.paused&&g.initialPlayFired&&(g=so(Xi({},g),{playRequested:!0}),l("play"))}],["pause",function(){!i.ended&&(g.playRequested||!g.paused)&&((g=so(Xi({},g),{playRequested:!1})).deferLoadedEvent?(g=so(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded"),i.paused&&(g=so(Xi({},g),{paused:!0}),l("pause"))):(g=so(Xi({},g),{paused:!0}),l("pause")))}],["ratechange",function(){b();var U=i.playbackRate>0;g.deferLoadedEvent&&U&&F(),g.deferSeekedEvent&&U&&y(),g.deferPlayingEvent&&U&&D(),!w()&&(m()?S=window.setTimeout(function(){m()&&v()},50):g.buffering&&U&&(g=so(Xi({},g),{buffering:!1}),l("buffered")))}]];return T.forEach(function(U){var x=Wk(U,2),_=x[0],I=x[1];return i.addEventListener(_,I)}),{teardown:function(){b(),T.forEach(function(U){var x=Wk(U,2),_=x[0],I=x[1];return i.removeEventListener(_,I)})}}},Iu=cE.GP;cE.vn;var ez=cE.fZ;const tz={NEAR_END:"nearend"};class N4 extends If{constructor(i){var l;super(),this.options=i,this.hasEmittedNearEnd=!1,this.video=this.options.element,this.video.muted=!!this.options.muted,this.nearEndThreshold=(l=this.options.nearEndThreshold)!=null?l:10,this.setupMediaEventFilter()}createBaseEventPayload(i){return{currentTime:i.currentTime,timeStamp:Date.now()}}setupMediaEventFilter(){this.eventFilter&&(this.eventFilter.teardown(),this.eventFilter=void 0),this.eventFilter=ez({mediaElement:this.options.element,allowResumeAfterEnded:!0,callback:i=>{const l=this.createBaseEventPayload(this.video);switch(i){case Iu.LOADED:{this.emit("loaded",l);break}case Iu.SEEKING:{this.emit("seeking",l);break}case Iu.SEEKED:{this.emit("seeked",l);break}case Iu.BUFFERING:{this.emit("buffering",l);break}case Iu.BUFFERED:{this.emit("buffered",l);break}case Iu.PLAY:{this.emit("play",l);break}case Iu.PLAYING:{this.emit("playing",l);break}case Iu.PAUSE:{this.emit("pause",l);break}case Iu.ENDED:{this.emit("ended",l);break}case Iu.TIME_UPDATE:{const d=this.video.duration-this.video.currentTime;this.hasEmittedNearEnd&&d>this.nearEndThreshold&&(this.hasEmittedNearEnd=!1),!this.hasEmittedNearEnd&&d<=this.nearEndThreshold&&(this.hasEmittedNearEnd=!0,this.emit(tz.NEAR_END,{...l,remainingTime:d})),this.emit("timeupdate",l);break}}}})}destroy(){var i;(i=this.eventFilter)==null||i.teardown()}getStats(){const i=this.options.element.getVideoPlaybackQuality();return{droppedVideoFrames:i.droppedVideoFrames,totalVideoFrames:i.totalVideoFrames}}}class nz extends Error{constructor(i,l){super(i),this.rawError=l}}class rz extends N4{constructor(i){var d,p;super(i),this.name="DashJSEngine",this.player=X7.MediaPlayer().create(),this.options.policyQuery&&this.options.policyQuery.startsWith("?")&&this.player.extend("RequestModifier",function(){return{modifyRequestURL:function(S){return S+i.policyQuery}}},!0);const l={"com.widevine.alpha":{serverURL:(d=this.options)==null?void 0:d.widevineLicenseUrl,httpRequestHeaders:i.customLicenceRequestHeaders,priority:0,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO"}};this.player.updateSettings({streaming:{cacheInitSegments:!0,abr:{initialBitrate:{audio:-1,video:800},minBitrate:{audio:-1,video:1920},autoSwitchBitrate:{audio:!0,video:!0}},protection:{keepProtectionMediaKeys:this.options.keepProtectionData!==!1},buffer:{stableBufferTime:6,bufferTimeAtTopQuality:6,bufferToKeep:6}}}),this.player.initialize(this.options.element,void 0,(p=this.options.autoPlay)!=null?p:!1,void 0),this.options.widevineLicenseUrl&&this.player.setProtectionData(l)}destroy(){this.player.destroy(),super.destroy()}async load(i,l){this.setupMediaEventFilter(),await new Promise((d,p)=>{var S;this.once("loaded",()=>{d()});try{this.player.attachSource(i,Math.max((S=l==null?void 0:l.startTimeSeconds)!=null?S:0,0))}catch(b){p(new nz("UnknownError",b))}})}}var x4={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(o){(function(){var i=typeof window<"u"?window:tu,l={};(function(p,S,b){var g;function w(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var F=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function R(e){e=[typeof globalThis=="object"&&globalThis,e,typeof p=="object"&&p,typeof self=="object"&&self,typeof S=="object"&&S];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var y=R(this);function v(e,t){if(t)e:{var n=y;e=e.split(".");for(var r=0;r<e.length-1;r++){var u=e[r];if(!(u in n))break e;n=n[u]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&F(n,e,{configurable:!0,writable:!0,value:t})}}v("Symbol",function(e){function t(c){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(c||"")+"_"+u++,c)}function n(c,f){this.g=c,F(this,"description",{configurable:!0,writable:!0,value:f})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return t}),v("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=y[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&F(r.prototype,e,{configurable:!0,writable:!0,value:function(){return D(w(this))}})}return e});function D(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:w(e)}}function T(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var U=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},x;if(typeof Object.setPrototypeOf=="function")x=Object.setPrototypeOf;else{var _;e:{var I={a:!0},C={};try{C.__proto__=I,_=C.a;break e}catch(e){}_=!1}x=_?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var j=x;function z(e,t){if(e.prototype=U(t.prototype),e.prototype.constructor=e,j)j(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Ij=t.prototype}function $(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function W(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}$.prototype.s=function(e){this.h=e};function ue(e,t){e.i={Yf:t,jg:!0},e.g=e.m||e.j}$.prototype.return=function(e){this.i={return:e},this.g=this.j};function N(e,t,n){return e.g=n,{value:t}}$.prototype.u=function(e){this.g=e};function X(e){e.g=0}function ce(e,t,n){e.m=t,n!=null&&(e.j=n)}function oe(e,t){e.m=0,e.j=t||0}function de(e,t,n){e.g=t,e.m=n||0}function Ce(e,t){return e.m=t||0,t=e.i.Yf,e.i=null,t}function Je(e){e.A=[e.i],e.m=0,e.j=0}function Te(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.jg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function je(e){this.g=new $,this.h=e}function nt(e,t){W(e.g);var n=e.g.l;return n?ct(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),Ie(e))}function ct(e,t,n,r){try{var u=t.call(e.g.l,n);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.o=!1,u;var c=u.value}catch(f){return e.g.l=null,ue(e.g,f),Ie(e)}return e.g.l=null,r.call(e.g,c),Ie(e)}function Ie(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,ue(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.jg)throw t.Yf;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function Ye(e){this.next=function(t){return W(e.g),e.g.l?t=ct(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=Ie(e)),t},this.throw=function(t){return W(e.g),e.g.l?t=ct(e,e.g.l.throw,t,e.g.s):(ue(e.g,t),t=Ie(e)),t},this.return=function(t){return nt(e,t)},this[Symbol.iterator]=function(){return this}}function mt(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,u){function c(f){f.done?r(f.value):Promise.resolve(f.value).then(t,n).then(c,u)}c(e.next())})}function xe(e){return mt(new Ye(new je(e)))}function We(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}v("Promise",function(e){function t(f){this.h=0,this.i=void 0,this.g=[],this.o=!1;var h=this.j();try{f(h.resolve,h.reject)}catch(E){h.reject(E)}}function n(){this.g=null}function r(f){return f instanceof t?f:new t(function(h){h(f)})}if(e)return e;n.prototype.h=function(f){if(this.g==null){this.g=[];var h=this;this.i(function(){h.l()})}this.g.push(f)};var u=y.setTimeout;n.prototype.i=function(f){u(f,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var h=0;h<f.length;++h){var E=f[h];f[h]=null;try{E()}catch(A){this.j(A)}}}this.g=null},n.prototype.j=function(f){this.i(function(){throw f})},t.prototype.j=function(){function f(A){return function(k){E||(E=!0,A.call(h,k))}}var h=this,E=!1;return{resolve:f(this.F),reject:f(this.l)}},t.prototype.F=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof t)this.H(f);else{e:switch(typeof f){case"object":var h=f!=null;break e;case"function":h=!0;break e;default:h=!1}h?this.C(f):this.m(f)}},t.prototype.C=function(f){var h=void 0;try{h=f.then}catch(E){this.l(E);return}typeof h=="function"?this.I(h,f):this.m(f)},t.prototype.l=function(f){this.s(2,f)},t.prototype.m=function(f){this.s(1,f)},t.prototype.s=function(f,h){if(this.h!=0)throw Error("Cannot settle("+f+", "+h+"): Promise already settled in state"+this.h);this.h=f,this.i=h,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var f=this;u(function(){if(f.B()){var h=y.console;typeof h<"u"&&h.error(f.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var f=y.CustomEvent,h=y.Event,E=y.dispatchEvent;return typeof E>"u"?!0:(typeof f=="function"?f=new f("unhandledrejection",{cancelable:!0}):typeof h=="function"?f=new h("unhandledrejection",{cancelable:!0}):(f=y.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f)),f.promise=this,f.reason=this.i,E(f))},t.prototype.A=function(){if(this.g!=null){for(var f=0;f<this.g.length;++f)c.h(this.g[f]);this.g=null}};var c=new n;return t.prototype.H=function(f){var h=this.j();f.Fd(h.resolve,h.reject)},t.prototype.I=function(f,h){var E=this.j();try{f.call(h,E.resolve,E.reject)}catch(A){E.reject(A)}},t.prototype.then=function(f,h){function E(te,Y){return typeof te=="function"?function(ve){try{A(te(ve))}catch(Le){k(Le)}}:Y}var A,k,G=new t(function(te,Y){A=te,k=Y});return this.Fd(E(f,A),E(h,k)),G},t.prototype.catch=function(f){return this.then(void 0,f)},t.prototype.Fd=function(f,h){function E(){switch(A.h){case 1:f(A.i);break;case 2:h(A.i);break;default:throw Error("Unexpected state: "+A.h)}}var A=this;this.g==null?c.h(E):this.g.push(E),this.o=!0},t.resolve=r,t.reject=function(f){return new t(function(h,E){E(f)})},t.race=function(f){return new t(function(h,E){for(var A=m(f),k=A.next();!k.done;k=A.next())r(k.value).Fd(h,E)})},t.all=function(f){var h=m(f),E=h.next();return E.done?r([]):new t(function(A,k){function G(ve){return function(Le){te[ve]=Le,Y--,Y==0&&A(te)}}var te=[],Y=0;do te.push(void 0),Y++,r(E.value).Fd(G(te.length-1),k),E=h.next();while(!E.done)})},t});function it(e,t){return Object.prototype.hasOwnProperty.call(e,t)}v("WeakMap",function(e){function t(E){if(this.g=(h+=Math.random()+1).toString(),E){E=m(E);for(var A;!(A=E.next()).done;)A=A.value,this.set(A[0],A[1])}}function n(){}function r(E){var A=typeof E;return A==="object"&&E!==null||A==="function"}function u(E){if(!it(E,f)){var A=new n;F(E,f,{value:A})}}function c(E){var A=Object[E];A&&(Object[E]=function(k){return k instanceof n?k:(Object.isExtensible(k)&&u(k),A(k))})}if(function(){if(!e||!Object.seal)return!1;try{var E=Object.seal({}),A=Object.seal({}),k=new e([[E,2],[A,3]]);return k.get(E)!=2||k.get(A)!=3?!1:(k.delete(E),k.set(A,4),!k.has(E)&&k.get(A)==4)}catch(G){return!1}}())return e;var f="$jscomp_hidden_"+Math.random();c("freeze"),c("preventExtensions"),c("seal");var h=0;return t.prototype.set=function(E,A){if(!r(E))throw Error("Invalid WeakMap key");if(u(E),!it(E,f))throw Error("WeakMap key fail: "+E);return E[f][this.g]=A,this},t.prototype.get=function(E){return r(E)&&it(E,f)?E[f][this.g]:void 0},t.prototype.has=function(E){return r(E)&&it(E,f)&&it(E[f],this.g)},t.prototype.delete=function(E){return r(E)&&it(E,f)&&it(E[f],this.g)?delete E[f][this.g]:!1},t}),v("Map",function(e){function t(){var h={};return h.Ab=h.next=h.head=h}function n(h,E){var A=h.g;return D(function(){if(A){for(;A.head!=h.g;)A=A.Ab;for(;A.next!=A.head;)return A=A.next,{done:!1,value:E(A)};A=null}return{done:!0,value:void 0}})}function r(h,E){var A=E&&typeof E;A=="object"||A=="function"?c.has(E)?A=c.get(E):(A=""+ ++f,c.set(E,A)):A="p_"+E;var k=h.h[A];if(k&&it(h.h,A))for(h=0;h<k.length;h++){var G=k[h];if(E!==E&&G.key!==G.key||E===G.key)return{id:A,list:k,index:h,entry:G}}return{id:A,list:k,index:-1,entry:void 0}}function u(h){if(this.h={},this.g=t(),this.size=0,h){h=m(h);for(var E;!(E=h.next()).done;)E=E.value,this.set(E[0],E[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var h=Object.seal({x:4}),E=new e(m([[h,"s"]]));if(E.get(h)!="s"||E.size!=1||E.get({x:4})||E.set({x:4},"t")!=E||E.size!=2)return!1;var A=E.entries(),k=A.next();return k.done||k.value[0]!=h||k.value[1]!="s"?!1:(k=A.next(),!(k.done||k.value[0].x!=4||k.value[1]!="t"||!A.next().done))}catch(G){return!1}}())return e;var c=new WeakMap;u.prototype.set=function(h,E){h=h===0?0:h;var A=r(this,h);return A.list||(A.list=this.h[A.id]=[]),A.entry?A.entry.value=E:(A.entry={next:this.g,Ab:this.g.Ab,head:this.g,key:h,value:E},A.list.push(A.entry),this.g.Ab.next=A.entry,this.g.Ab=A.entry,this.size++),this},u.prototype.delete=function(h){return h=r(this,h),h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.h[h.id],h.entry.Ab.next=h.entry.next,h.entry.next.Ab=h.entry.Ab,h.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this.h={},this.g=this.g.Ab=t(),this.size=0},u.prototype.has=function(h){return!!r(this,h).entry},u.prototype.get=function(h){return(h=r(this,h).entry)&&h.value},u.prototype.entries=function(){return n(this,function(h){return[h.key,h.value]})},u.prototype.keys=function(){return n(this,function(h){return h.key})},u.prototype.values=function(){return n(this,function(h){return h.value})},u.prototype.forEach=function(h,E){for(var A=this.entries(),k;!(k=A.next()).done;)k=k.value,h.call(E,k[1],k[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var f=0;return u}),v("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(m([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var u=r.entries(),c=u.next();return c.done||c.value[0]!=n||c.value[1]!=n?!1:(c=u.next(),c.done||c.value[0]==n||c.value[0].x!=4||c.value[1]!=c.value[0]?!1:u.next().done)}catch(f){return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var u=this;this.g.forEach(function(c){return n.call(r,c,c,u)})},t)});function qt(e,t){e instanceof String&&(e+="");var n=0,r=!1,u={next:function(){if(!r&&n<e.length){var c=n++;return{value:t(c,e[c]),done:!1}}return r=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}v("Array.prototype.keys",function(e){return e||function(){return qt(this,function(t){return t})}});function Ft(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,u=0;u<r;u++){var c=e[u];if(t.call(n,c,u,e))return{gg:u,v:c}}return{gg:-1,v:void 0}}v("Array.prototype.findIndex",function(e){return e||function(t,n){return Ft(this,t,n).gg}}),v("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),v("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var u=r.length;for(n=n||0,0>n&&(n=Math.max(n+u,0));n<u;n++){var c=r[n];if(c===t||Object.is(c,t))return!0}return!1}});function gt(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}v("String.prototype.includes",function(e){return e||function(t,n){return gt(this,t,"includes").indexOf(t,n||0)!==-1}}),v("Array.prototype.find",function(e){return e||function(t,n){return Ft(this,t,n).v}}),v("String.prototype.startsWith",function(e){return e||function(t,n){var r=gt(this,t,"startsWith"),u=r.length,c=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var f=0;f<c&&n<u;)if(r[n++]!=t[f++])return!1;return f>=c}}),v("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),u=new e([n]);return!u.has(n)||u.has(r)?!1:(u.delete(n),u.add(r),!u.has(n)&&u.has(r))}catch(c){return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),v("Array.from",function(e){return e||function(t,n,r){n=n!=null?n:function(h){return h};var u=[],c=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof c=="function"){t=c.call(t);for(var f=0;!(c=t.next()).done;)u.push(n.call(r,c.value,f++))}else for(c=t.length,f=0;f<c;f++)u.push(n.call(r,t[f],f));return u}});var St=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var u in r)it(r,u)&&(e[u]=r[u])}return e};v("Object.assign",function(e){return e||St}),v("Array.prototype.values",function(e){return e||function(){return qt(this,function(t,n){return n})}}),v("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),v("Array.prototype.entries",function(e){return e||function(){return qt(this,function(t,n){return[t,n]})}}),v("String.prototype.repeat",function(e){return e||function(t){var n=gt(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),v("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),v("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),v("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)it(t,r)&&n.push(t[r]);return n}}),v("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),v("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),v("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),v("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)it(t,r)&&n.push([r,t[r]]);return n}});var Re=this||self;function re(e,t){e=e.split(".");var n=Re;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function Be(){}function O(){}function M(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}M.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function q(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new M(2),this.j=new M(5),this.g=0,this.i=128e3,this.l=16e3}K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(q(this.h),q(this.j))};function ye(){}function he(){}function Ke(){}function wt(e){var t=We.apply(1,arguments);ft.has(e)||(ft.add(e),Ke.apply(ye,T(t)))}function st(){}function at(){}function tt(){}var ft=new Set;p.console&&(Ke=function(){return console.warn.apply(console,T(We.apply(0,arguments)))},he=function(){console.error.apply(console,T(We.apply(0,arguments)))});function Et(){this.g={}}g=Et.prototype,g.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},g.get=function(e){return(e=this.g[e])?e.slice():null},g.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},g.forEach=function(e){for(var t in this.g)e(t,this.g[t])},g.size=function(){return Object.keys(this.g).length},g.keys=function(){return Object.keys(this.g)};function Tt(){this.g=new Et}g=Tt.prototype,g.release=function(){this.ib(),this.g=null},g.D=function(e,t,n,r){this.g&&(e=new Ct(e,t,n,r),this.g.push(t,e))},g.na=function(e,t,n,r){function u(f){c.Kb(e,t,u),n(f)}var c=this;this.D(e,t,u,r)},g.Kb=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,u.target!=e||n!=u.listener&&n||(u.Kb(),this.g.remove(t,u))}},g.ib=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,T(e.g[n]));for(e=m(t),t=e.next();!t.done;t=e.next())t.value.Kb();this.g.g={}}},re("shaka.util.EventManager",Tt),Tt.prototype.removeAll=Tt.prototype.ib,Tt.prototype.unlisten=Tt.prototype.Kb,Tt.prototype.listenOnce=Tt.prototype.na,Tt.prototype.listen=Tt.prototype.D,Tt.prototype.release=Tt.prototype.release;function Ct(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=hn(e,r),this.target.addEventListener(t,n,this.g)}Ct.prototype.Kb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function hn(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),Qt(e)?t:t.capture||!1}function Qt(e){var t=nn;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(u){t=!1}nn=t}return t||!1}var nn=void 0;function Ot(e){if(gr.has(e))return gr.get(e);if(p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return gr.set(e,t),t}return p.MediaSource?(t=MediaSource.isTypeSupported(e),gr.set(e,t),t):!1}function Un(){return!!p.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var gr=new Map;function Or(e,t){this.g=e,this.h=t}Or.prototype.toString=function(){return"v"+this.g+"."+this.h};function dr(e,t){var n=new Or(5,0),r=Lr,u=r.g,c=n.h-u.h;(0<(n.g-u.g||c)?r.i:r.h)(r.g,n,e,t)}function ei(e,t,n,r){Ke([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Ji(e,t,n,r){he([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var Lr=null;function eo(){}eo.prototype.extract=function(){},eo.prototype.decode=function(){return[]},eo.prototype.clear=function(){},eo.prototype.getStreams=function(){return[]};function Ti(){}Ti.prototype.init=function(){},Ti.prototype.parse=function(){return[]};function Di(){}function zi(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(to(e)==to(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Qn(e);t=Qn(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function to(e){return e instanceof ArrayBuffer?e:e.buffer}function Si(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Qn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint8Array)}function Pu(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint16Array)}function tn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,DataView)}function sn(e,t,n,r){var u=to(e),c=1;"BYTES_PER_ELEMENT"in r&&(c=r.BYTES_PER_ELEMENT);var f=((e.byteOffset||0)+e.byteLength)/c;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/c,f))),new r(u,e,Math.floor(Math.min(e+Math.max(n,0),f))-e)}re("shaka.util.BufferUtils",Di),Di.toDataView=tn,Di.toUint16=Pu,Di.toUint8=Qn,Di.toArrayBuffer=Si,Di.equal=zi;function an(){}an.prototype.init=function(){},an.prototype.i=function(){},an.prototype.h=function(){},an.prototype.j=function(){},re("shaka.media.IClosedCaptionParser",an);function At(e){this.l=new Ti,(e=Yt[e.toLowerCase()])&&(this.l=e()),this.g=new eo,(e=Mt)&&(this.g=e())}At.prototype.init=function(e){this.l.init(e)},At.prototype.i=function(e){e=this.l.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Qn(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},At.prototype.h=function(){this.g.clear()},At.prototype.j=function(){return this.g.getStreams()},re("shaka.media.ClosedCaptionParser",At),At.findDecoder=function(){return Mt},At.unregisterDecoder=function(){Mt=null},At.registerDecoder=function(e){Mt=e},At.findParser=function(e){return Yt[e]},At.unregisterParser=function(e){delete Yt[e]},At.registerParser=function(e,t){Yt[e]=t};var Yt={},Mt=null;function zt(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function mn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function In(e,t,n){if(n||(n=zt),e.length!=t.length)return!1;t=t.slice();var r={};e=m(e);for(var u=e.next();!u.done;r={ne:r.ne},u=e.next()){if(r.ne=u.value,u=t.findIndex(function(c){return function(f){return n(c.ne,f)}}(r)),u==-1)return!1;t[u]=t[t.length-1],t.pop()}return t.length==0}function Zn(e,t,n){if(n||(n=zt),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Cn(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Br,this.position=null,this.positionAlign=Bn,this.size=0,this.textAlign=kn,this.direction=Vn,this.writingMode=rn,this.lineInterpretation=cn,this.line=null,this.lineHeight="",this.lineAlign=bn,this.displayAlign=Er,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=kr,this.fontStyle=Yi,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Sb:32,rows:15}}function Rn(e,t){return e=new Cn(e,t,""),e.lineBreak=!0,e}Cn.prototype.clone=function(){var e=new Cn(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function on(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Zn(e.nestedCues,t.nestedCues,on))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!Zn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}re("shaka.text.Cue",Cn),Cn.equal=on,Cn.prototype.clone=Cn.prototype.clone;var Bn="auto";Cn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Bn};var kn="center",er={LEFT:"left",RIGHT:"right",CENTER:kn,START:"start",END:"end"};Cn.textAlign=er;var Er="after",Ur={BEFORE:"before",CENTER:"center",AFTER:Er};Cn.displayAlign=Ur;var Vn="ltr";Cn.direction={HORIZONTAL_LEFT_TO_RIGHT:Vn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var rn="horizontal-tb";Cn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:rn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var cn=0;Cn.lineInterpretation={LINE_NUMBER:cn,PERCENTAGE:1};var bn="start",Jn={CENTER:"center",START:bn,END:"end"};Cn.lineAlign=Jn;var ar={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Cn.defaultTextColor=ar;var br={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Cn.defaultTextBackgroundColor=br;var kr=400;Cn.fontWeight={NORMAL:kr,BOLD:700};var Yi="normal",no={NORMAL:Yi,ITALIC:"italic",OBLIQUE:"oblique"};Cn.fontStyle=no,Cn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Br(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qr,this.scroll=pi}re("shaka.text.CueRegion",Br);var qr=1;Br.units={PX:0,PERCENTAGE:qr,LINES:2};var pi="";Br.scrollMode={NONE:pi,UP:"up"};function yi(){}yi.prototype.destroy=function(){};function wo(e,t,n){ea[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ge:t}}function ro(e,t){for(var n=e.toLowerCase().split(";")[0],r=m([Ec,su,Al,Ci]),u=r.next();!u.done;u=r.next())if(u=ea[n+"-"+u.value]){var c=u.ge(),f=c.isSupported(e,t);if(c.destroy(),f)return u.ge}return null}re("shaka.transmuxer.TransmuxerEngine",yi),yi.findTransmuxer=ro,yi.unregisterTransmuxer=function(e,t){delete ea[e.toLowerCase().split(";")[0]+"-"+t]},yi.registerTransmuxer=wo,yi.prototype.destroy=yi.prototype.destroy;var ea={},Ci=1,Al=2,su=3,Ec=4;yi.PluginPriority={FALLBACK:Ci,PREFERRED_SECONDARY:Al,PREFERRED:su,APPLICATION:Ec};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var Nf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function si(e){var t;e instanceof si?(Ms(this,e.kb),this.mc=e.mc,_n(this,e.wb),Xn(this,e.Bc),this.Pa=e.Pa,hr(this,e.g.clone()),this.Wb=e.Wb):e&&(t=String(e).match(Nf))?(Ms(this,t[1]||"",!0),this.mc=ti(t[2]||""),_n(this,t[3]||"",!0),Xn(this,t[4]),this.Pa=ti(t[5]||"",!0),hr(this,t[6]||"",!0),this.Wb=ti(t[7]||"")):this.g=new Wi(null)}g=si.prototype,g.kb="",g.mc="",g.wb="",g.Bc=null,g.Pa="",g.Wb="",g.toString=function(){var e=[],t=this.kb;if(t&&e.push(Mr(t,Xr,!0),":"),t=this.wb){e.push("//");var n=this.mc;n&&e.push(Mr(n,Xr,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Bc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.wb&&t.charAt(0)!="/"&&e.push("/"),e.push(Mr(t,t.charAt(0)=="/"?Pi:ta,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Wb)&&e.push("#",Mr(t,Ao)),e.join("")},g.resolve=function(e){var t=this.clone();t.kb==="data"&&(t=new si);var n=!!e.kb;n?Ms(t,e.kb):n=!!e.mc,n?t.mc=e.mc:n=!!e.wb,n?_n(t,e.wb):n=e.Bc!=null;var r=e.Pa;if(n)Xn(t,e.Bc);else if(n=!!e.Pa){if(r.charAt(0)!="/")if(this.wb&&!this.Pa)r="/"+r;else{var u=t.Pa.lastIndexOf("/");u!=-1&&(r=t.Pa.substr(0,u+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){u=r.lastIndexOf("/",0)==0,r=r.split("/");for(var c=[],f=0;f<r.length;){var h=r[f++];h=="."?u&&f==r.length&&c.push(""):h==".."?((1<c.length||c.length==1&&c[0]!="")&&c.pop(),u&&f==r.length&&c.push("")):(c.push(h),u=!0)}r=c.join("/")}}return n?t.Pa=r:n=e.g.toString()!=="",n?hr(t,e.g.clone()):n=!!e.Wb,n&&(t.Wb=e.Wb),t},g.clone=function(){return new si(this)};function Ms(e,t,n){e.kb=n?ti(t,!0):t,e.kb&&(e.kb=e.kb.replace(/:$/,""))}function _n(e,t,n){e.wb=n?ti(t,!0):t}function Xn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Bc=t}else e.Bc=null}function hr(e,t,n){t instanceof Wi?e.g=t:(n||(t=Mr(t,ui)),e.g=new Wi(t))}function ti(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Mr(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Bi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bi(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Xr=/[#\/\?@]/g,ta=/[#\?:]/g,Pi=/[#\?]/g,ui=/[#\?@]/g,Ao=/#/g;function Wi(e){this.g=e||null}function Go(e){if(!e.Ca&&(e.Ca={},e.Zc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),u=null;if(0<=r){var c=t[n].substring(0,r);u=t[n].substring(r+1)}else c=t[n];c=decodeURIComponent(c.replace(/\+/g," ")),u=u||"",e.add(c,decodeURIComponent(u.replace(/\+/g," ")))}}g=Wi.prototype,g.Ca=null,g.Zc=null;function na(e){return Go(e),e.Zc}g.add=function(e,t){Go(this),this.g=null;var n=this.Ca.hasOwnProperty(e)?this.Ca[e]:null;return n||(this.Ca[e]=n=[]),n.push(t),this.Zc++,this},g.set=function(e,t){return Go(this),this.g=null,this.Ca.hasOwnProperty(e)?this.Ca[e]=[t]:this.add(e,t),this},g.get=function(e){return Go(this),this.Ca[e]||[]},g.toString=function(){if(this.g)return this.g;if(!this.Ca)return"";var e=[],t;for(t in this.Ca)for(var n=encodeURIComponent(t),r=this.Ca[t],u=0;u<r.length;u++){var c=n;r[u]!==""&&(c+="="+encodeURIComponent(r[u])),e.push(c)}return this.g=e.join("&")},g.clone=function(){var e=new Wi;if(e.g=this.g,this.Ca){var t={},n;for(n in this.Ca)t[n]=this.Ca[n].concat();e.Ca=t,e.Zc=this.Zc}return e};function pt(e,t,n){var r=We.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}pt.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},re("shaka.util.Error",pt),pt.Severity={RECOVERABLE:1,CRITICAL:2},pt.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},pt.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function ra(e){this.h=e,this.g=void 0}ra.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Ds(e){this.h=e,this.g=null}Ds.prototype.X=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){p.clearTimeout(r),n=!1},r=p.setTimeout(function(){n&&t.h()},1e3*e),this},Ds.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function pr(e){this.h=e,this.g=null}pr.prototype.kc=function(){return this.stop(),this.h(),this},pr.prototype.X=function(e){var t=this;return this.stop(),this.g=new Ds(function(){t.h()}).X(e),this},pr.prototype.$a=function(e){var t=this;return this.stop(),this.g=new Ds(function(){t.g.X(e),t.h()}).X(e),this},pr.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},re("shaka.util.Timer",pr),pr.prototype.stop=pr.prototype.stop,pr.prototype.tickEvery=pr.prototype.$a,pr.prototype.tickAfter=pr.prototype.X,pr.prototype.tickNow=pr.prototype.kc;function Io(){var e=p.ManagedMediaSource||p.MediaSource;return!!(e&&e.isTypeSupported)}function uu(e){return Tc().canPlayType(e)!=""}function Il(){return!!navigator.userAgent.match(/Edge?\//)}function gs(){return Yr("Xbox One")}function qa(){return Yr("Tizen")}function Ou(){return Yr("Tizen 3")}function Lu(){return Yr("Tizen 2")}function ia(){return Yr("Web0S")}function oa(){return Yr("CrKey")}function lu(){if(!Yr("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function ms(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!qa()&&!Yr("PC=EOS")&&!Yr("PC=APL")&&!Yr("VirginMedia")&&!Yr("SOPOpenBrowser")&&!Nr()&&!Yr("AFT")&&!Yr("WPE")}function _c(){return Yr("PlayStation 5")}function Nr(){return Yr("PlayStation 4")}function vs(){return Yr("Hisense")||Yr("VIDAA")}function ys(){if(!ms())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Yr(e){return(navigator.userAgent||"").includes(e)}function Tc(){return aa||(bl||(bl=new pr(function(){aa=null})),(aa=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(aa=document.createElement("video")),bl.X(1),aa)}function Aa(){var e,t,n,r,u,c,f,h,E,A;return xe(function(k){switch(k.g){case 1:if(e={width:1/0,height:1/0},oa()){p.cast&&cast.__platform__&&cast.__platform__.canDisplayType&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(qa()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch(G){Ke("Tizen: Error detecting screen size, default screen size 1920x1080.")}k.u(2);break}if(gs()){n=new Windows.Media.Protection.ProtectionCapabilities,r=Windows.Media.Protection.ProtectionCapabilityResult,u=null;try{do u=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(u===r.maybe)}catch(G){u=r.notSupported}u===r.probably?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(ia()){try{c=JSON.parse(p.PalmSystem.deviceInfo),e.width=Math.max(1920,c.Hj),e.height=Math.max(1080,c.Gj)}catch(G){Ke("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}k.u(2);break}if(vs()){p.Hisense_Get4KSupportState&&p.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(!Nr()&&!_c()){k.u(2);break}return f=!1,ce(k,8),N(k,p.msdk.device.getDisplayInfo(),10);case 10:h=k.h,f=h.resolution==="4K",de(k,9);break;case 8:return Ce(k),ce(k,11),N(k,p.msdk.device.getDisplayInfoImmediate(),13);case 13:E=k.h,f=E.resolution==="4K",de(k,9);break;case 11:A=Ce(k),Ke("PlayStation: Failed to get the display info:",A);case 9:f?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080);case 2:return k.return(e)}})}var bl=null,aa=null;function Es(){}function Vr(e){if(!e)return"";if(e=Qn(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),p.TextDecoder&&!Nr())return e=new TextDecoder().decode(e),e.includes("�")&&he('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):r=e[n],65535>=r)t+=String.fromCharCode(r);else{r-=65536;var u=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+u)}}return t}function Ha(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new pt(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=tn(e);for(var u=0;u<n;u++)r[u]=e.getUint16(2*u,t);return Ch(r)}function Ka(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=Qn(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Vr(n);if(n[0]==254&&n[1]==255)return Ha(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Ha(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Ha(e,!1);if(n[1]==0&&n[3]==0)return Ha(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Vr(e);throw new pt(2,2,2003)}function Va(e){if(p.TextEncoder&&!Nr()){var t=new TextEncoder;return Si(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Si(t)}function xf(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),u=0;u<e.length;++u)r.setUint16(2*u,e.charCodeAt(u),t);return n}function Ch(e){return am.value()(e)}function bo(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|#(0+)?39|nbsp|lrm|rlm);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||"'"}):e||""}re("shaka.util.StringUtils",Es),Es.resetFromCharCode=function(){am.g=void 0},Es.toUTF16=xf,Es.toUTF8=Va,Es.fromBytesAutoDetect=Ka,Es.fromUTF16=Ha,Es.fromUTF8=Vr;var am=new ra(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch(u){return!1}}for(var t={Db:65536};0<t.Db;t={Db:t.Db},t.Db/=2)if(e(t.Db))return function(n){return function(r){for(var u="",c=0;c<r.length;c+=n.Db)u+=String.fromCharCode.apply(null,r.subarray(c,c+n.Db));return u}}(t);return null});function Oi(){}function Mf(e){return e=Ch(Qn(e)),btoa(e)}function cu(e,t){return t=t==null?!0:t,e=Mf(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function qo(e){e=p.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function fu(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=p.parseInt(e.substr(2*r,2),16);return n}function Ps(e){var t=Qn(e);e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function li(){for(var e=We.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var u=e[r];u instanceof Uint8Array?t.set(u,n):t.set(Qn(u),n),n+=u.byteLength}return t}re("shaka.util.Uint8ArrayUtils",Oi),Oi.concat=li,Oi.toHex=Ps,Oi.fromHex=fu,Oi.fromBase64=qo,Oi.toBase64=cu,Oi.toStandardBase64=Mf;function fo(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new si(e[0]);return t=new si(t[0]),[n.resolve(t).toString()]}t=t.map(function(f){return new si(f)}),n=[],e=m(e);for(var r=e.next();!r.done;r=e.next()){r=new si(r.value);for(var u=m(t),c=u.next();!c.done;c=u.next())n.push(r.resolve(c.value).toString())}return n}function ku(e,t,n){return{keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set}}function Rh(e,t){t=t===void 0?"cenc":t;var n=[],r=[],u=[];e.forEach(function(f,h){var E=h;E.length!=22&&(E=cu(fu(h),!1));var A=f;A.length!=22&&(A=cu(fu(f),!1)),f={kty:"oct",kid:E,k:A},n.push(f),r.push(f.kid),u.push(h)}),e=JSON.stringify({keys:n});var c=JSON.stringify({kids:r});return c=[{initData:Qn(Va(c)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+p.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:c,keyIds:new Set(u)}}function Fu(e,t){if(t.length==1)return t[0];if(e=Co(e,t),e!=null)return e;throw new pt(2,4,4025,t)}function Co(e,t){for(var n=m(xh[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.test(c.trim()))return c.trim()}return e==vr?"":null}function Nh(e,t){var n=[];e=m(xh[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())c=c.value,r.test(c.trim())&&n.push(c.trim())}return n}var vr="text",Ei={fa:"video",S:"audio",ma:vr,ue:"image",Gi:"application"},xh={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/,/^iamf/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Sc(){}function wi(e,t){var n=e;return t&&!du.includes(e)&&(n+='; codecs="'+t+'"'),n}function Uu(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Os(e,t,n){var r=wi(e,t);return t=Uu(e,t),ro(t)?(e=ro(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function sm(e,t,n){var r=[t];return _E.forEach(function(u,c){var f=e[c];c=="codecs"?du.includes(e.mimeType)||r.push('codecs="'+n+'"'):f&&r.push(u+'="'+f+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function Df(e){return e.split(";")[0].split("/")[1]}function Ia(e){var t=Mh(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="dvh1":case e==="dvhe":return"dovi"}return e}function za(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Mh(n.value),t.push(n[0]);return t.sort().join(",")}function ba(e){return e.split(";")[0]}function Do(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function um(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function Mh(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}re("shaka.util.MimeUtils",Sc),Sc.getFullTypeWithAllCodecs=Uu,Sc.getFullType=wi;var _E=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),du=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Ls(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function Cl(e){return ji[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!Mt:!1}Ls.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function TE(e,t,n,r,u){var c,f,h,E,A,k,G;return xe(function(te){if(te.g==1)return N(te,Promise.resolve(),2);if(!e.i||!e.j)return te.return();if(n==null||r==null)return e.i.parseInit(Qn(t)),te.return();for(c=e.B?n:e.s,f={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:c},h=e.i.parseMedia(Qn(t),f,u),E=m(h),A=E.next();!A.done;A=E.next())k=A.value,e.A(k,u||null,f);G=h.filter(function(Y){return Y.startTime>=e.l&&Y.startTime<e.m}),e.j.append(G),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),X(te)})}Ls.prototype.remove=function(e,t){var n=this;return xe(function(r){if(r.g==1)return N(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),X(r)})};function Dh(e,t,n){e.l=t,e.m=n}function Pf(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=m(t.keys()),u=r.next();!u.done;u=r.next())(u=t.get(u.value).filter(function(c){return c.endTime<=n}))&&e.j.append(u)}function lm(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var r=t.next();!r.done;r=t.next())lm(e,r.value,n)}function Of(e,t,n,r,u){var c=n+" "+r,f=new Map;t=m(t);for(var h=t.next();!h.done;h=t.next()){var E=h.value;h=E.stream,E=E.cue,f.has(h)||f.set(h,new Map),f.get(h).has(c)||f.get(h).set(c,[]),lm(e,E,u),E.startTime>=e.l&&E.startTime<e.m&&(f.get(h).get(c).push(E),h==e.C&&e.j.append([E]))}for(u=m(f.keys()),c=u.next();!c.done;c=u.next())for(c=c.value,e.o.has(c)||e.o.set(c,new Map),t=m(f.get(c).keys()),h=t.next();!h.done;h=t.next())h=h.value,E=f.get(c).get(h),e.o.get(c).set(h,E);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}re("shaka.text.TextEngine",Ls),Ls.prototype.destroy=Ls.prototype.destroy,Ls.findParser=function(e){return ji[e]},Ls.unregisterParser=function(e){delete ji[e]},Ls.registerParser=function(e,t){ji[e]=t};var ji={};function cm(e,t){return e.concat(t)}function fm(){}function Bu(e){return e!=null}function mo(){}function ju(e,t){return e=Cr(e),t=Cr(t),e.split("-")[0]==t.split("-")[0]}function wc(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Zu(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Cr(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=ni.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Gu(e,t){return e=Cr(e),t=Cr(t),t==e?4:wc(t,e)?3:Zu(t,e)?2:wc(e,t)?1:0}function Ph(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=ni.get(e)||e}function qu(e){return e.language?Cr(e.language):e.audio&&e.audio.language?Cr(e.audio.language):e.video&&e.video.language?Cr(e.video.language):"und"}function Rl(e,t){e=Cr(e);var n=new Set,r=m(t);for(t=r.next();!t.done;t=r.next())n.add(Cr(t.value));for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,t==e)return t;for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,wc(t,e))return t;for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,Zu(t,e))return t;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,wc(e,t))return t;return null}re("shaka.util.LanguageUtils",mo),mo.findClosestLocale=Rl,mo.getLocaleForVariant=qu,mo.getLocaleForText=function(e){return Cr(e.language||"und")},mo.getBase=Ph,mo.relatedness=Gu,mo.areSiblings=function(e,t){var n=Ph(e),r=Ph(t);return e!=n&&t!=r&&n==r},mo.normalize=Cr,mo.isSiblingOf=Zu,mo.isParentOf=wc,mo.areLanguageCompatible=ju,mo.areLocaleCompatible=function(e,t){return e=Cr(e),t=Cr(t),e==t};var ni=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Ya(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer&&r.buffer.constructor==ArrayBuffer)return r;if(n.has(r))return null;var u=r.constructor==Array;if(r.constructor!=Object&&!u)return null;n.add(r);var c=u?[]:{},f;for(f in r)c[f]=t(r[f]);return u&&(c.length=r.length),c}}var n=new WeakSet;return t(e)}function dm(e){var t={},n;for(n in e)t[n]=e[n];return t}function Ac(){}function hm(e,t,n,r){var u=e.variants;if((t.length||n.length)&&(u=Oh(u,t,n)),r.length){for(t=new Et,n=m(u),u=n.next();!u.done;u=n.next())u=u.value,t.push(String(u.video.width||0),u);var c=[];t.forEach(function(ve,Le){ve=0;var De=[],qe={};Le=m(Le);for(var Se=Le.next();!Se.done;qe={Uc:qe.Uc},Se=Le.next())qe.Uc=Se.value,Se=r.filter(function(Qe){return function(Ue){return Qe.Uc.decodingInfos[0][Ue]}}(qe)).length,Se>ve?(ve=Se,De=[qe.Uc]):Se==ve&&De.push(qe.Uc);c.push.apply(c,T(De))}),u=c}n=new Set,t=new Set;var f=m(u);for(u=f.next();!u.done;u=f.next())u=u.value,u.audio&&n.add(u.audio),u.video&&t.add(u.video);n=Array.from(n).sort(function(ve,Le){return ve.bandwidth-Le.bandwidth});var h=[];for(u=new Map,n=m(n),f=n.next();!f.done;f=n.next()){f=f.value;var E=f.language+(f.channelsCount||0)+(f.audioSamplingRate||0)+f.roles.join(",")+f.label+f.groupId+f.fastSwitching,A=u.get(E)||[];if(A.length){var k=A[A.length-1],G=Ia(k.codecs),te=Ia(f.codecs);G==te&&f.bandwidth>k.bandwidth&&(A.push(f),h.push(f.id))}else A.push(f),h.push(f.id);u.set(E,A)}n=Array.from(t).sort(function(ve,Le){return ve.bandwidth&&Le.bandwidth?ve.bandwidth-Le.bandwidth:ve.width-Le.width}),t=Un();var Y=[];for(u=new Map,n=m(n),f=n.next();!f.done;f=n.next()){if(f=f.value,E=Math.round(f.frameRate||0)+(f.hdr||"")+f.fastSwitching,A=u.get(E)||[],A.length){if(k=A[A.length-1],!t&&(G=Ia(k.codecs),te=Ia(f.codecs),G!==te))continue;f.width>k.width||f.height>k.height?(A.push(f),Y.push(f.id)):f.width==k.width&&f.height==k.height&&(G=Ia(k.codecs),te=Ia(f.codecs),G==te&&f.bandwidth>k.bandwidth&&(A.push(f),Y.push(f.id)))}else A.push(f),Y.push(f.id);u.set(E,A)}e.variants=e.variants.filter(function(ve){var Le=ve.audio;return ve=ve.video,!(Le&&!h.includes(Le.id)||ve&&!Y.includes(ve.id))})}function Oh(e,t,n){var r={};t=m(t);for(var u=t.next();!u.done;r={te:r.te},u=t.next())if(r.te=u.value,u=e.filter(function(c){return function(f){return f.video&&f.video.codecs.startsWith(c.te)}}(r)),u.length){e=u;break}for(r={},n=m(n),t=n.next();!t.done;r={me:r.me},t=n.next())if(r.me=t.value,t=e.filter(function(c){return function(f){return f.audio&&f.audio.codecs.startsWith(c.me)}}(r)),t.length){e=t;break}return e}function Lh(e,t,n){e.variants=e.variants.filter(function(r){return Lf(r,t,n)})}function Lf(e,t,n){function r(h,E,A){return h>=E&&h<=A}var u=e.video;if(u&&u.width&&u.height){var c=u.width,f=u.height;if(f>c&&(f=m([f,c]),c=f.next().value,f=f.next().value),!r(c,t.minWidth,Math.min(t.maxWidth,n.width))||!r(f,t.minHeight,Math.min(t.maxHeight,n.height))||!r(u.width*u.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Ic(e,t,n){var r=!1;e=m(e);for(var u=e.next();!u.done;u=e.next()){u=u.value;var c=u.allowedByApplication;u.allowedByApplication=Lf(u,t,n),c!=u.allowedByApplication&&(r=!0)}return r}function pm(e,t,n){return n=n===void 0?[]:n,xe(function(r){return r.g==1?N(r,gm(e,t,0<t.offlineSessionIds.length,n),2):(SE(t),N(r,Uf(t),0))})}function gm(e,t,n,r){var u,c;return xe(function(f){if(f.g==1)return N(f,Fh(t.variants,n,!1,r),2);u=null,e&&(c=e.g)&&(u=c.keySystem),t.variants=t.variants.filter(function(h){var E=kh(h,u);if(!E){var A=[];h.audio&&A.push(Zf(h.audio)),h.video&&A.push(Zf(h.video))}return E}),X(f)})}function kh(e,t){var n=gs(),r=Yr("Firefox")&&Yr("Android"),u=e.video,c=u&&u.width||0,f=u&&u.height||0;if(n&&u&&(1920<c||1080<f)&&(u.codecs.includes("avc1.")||u.codecs.includes("avc3.")))return!1;if(u){if(n=Nl(u.codecs),u.codecs.includes(",")){if(c=u.codecs.split(","),n=Fu("video",c),n=Nl(n),c=Fu("audio",c),c=Hu(c),f=Os(u.mimeType,c,"audio"),!Ot(f))return!1;n=[n,c].join()}if(c=Os(u.mimeType,n,"video"),!Ot(c))return!1;u.codecs=n}if(u=e.audio,r&&u&&u.encrypted&&u.codecs.toLowerCase().includes("opus"))return!1;if(u){if(r=Hu(u.codecs),n=Os(u.mimeType,r,"audio"),!Ot(n))return!1;u.codecs=r}return e.decodingInfos.some(function(h){return!(!h.supported||t&&(h=h.keySystemAccess)&&h.keySystem!=t)})}function kf(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=JSON.stringify(u),u=e[u],u instanceof Object?(u=kf(u),n.push(r+":"+u)):(u=JSON.stringify(u),n.push(r+":"+u))}return"{"+n.join(",")+"}"}function mm(e,t){var n,r,u,c,f,h,E;return xe(function(A){if(A.g==1){for(n=function(k,G){if(k){var te=Ya(k);return te.supported=k.supported&&G.supported,te.powerEfficient=k.powerEfficient&&G.powerEfficient,te.smooth=k.smooth&&G.smooth,G.keySystemAccess&&!te.keySystemAccess&&(te.keySystemAccess=G.keySystemAccess),te}return G},r=null,u=[],c={},f=m(t),h=f.next();!h.done;c={Gc:c.Gc,Hc:c.Hc},h=f.next())E=h.value,c.Hc=kf(E),c.Gc=Uh,c.Gc[c.Hc]?r=n(r,c.Gc[c.Hc]):u.push(Ff(E).then(function(k){return function(G){var te=null;G=m(G||[]);for(var Y=G.next();!Y.done;Y=G.next())te=n(te,Y.value);te&&(k.Gc[k.Hc]=te,r=n(r,te))}}(c)));return N(A,Promise.all(u),2)}r&&e.decodingInfos.push(r),X(A)})}function Ff(e){var t=[""];e.video&&(t=Do(e.video.contentType).split(","));var n=[""];e.audio&&(n=Do(e.audio.contentType).split(","));var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var c={},f=m(n),h=f.next();!h.done;c={Mb:c.Mb},h=f.next())h=h.value,c.Mb=Ya(e),e.video&&(c.Mb.video.contentType=wi(ba(c.Mb.video.contentType),u)),e.audio&&(c.Mb.audio.contentType=wi(ba(c.Mb.audio.contentType),h)),r.push(new Promise(function(E){return function(A,k){navigator.mediaCapabilities.decodingInfo(E.Mb).then(function(G){A(G)}).catch(k)}}(c)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function Fh(e,t,n,r){var u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe;return xe(function(Ue){switch(Ue.g){case 1:if(e.some(function(vt){return vt.decodingInfos.length}))return Ue.return();u={},c=m(r),f=c.next();case 2:if(f.done){Ue.u(4);break}u.oe=f.value,h=!1,E=m(e),A=E.next();case 5:if(A.done){Ue.u(7);break}k=A.value,G=vm(k,t,n).filter(function(vt){return function(Nt){return Nt=Nt[0],(Nt.keySystemConfiguration&&Nt.keySystemConfiguration.keySystem)===vt.oe}}(u)),te=m(G),Y=te.next();case 8:if(Y.done){Ue.u(10);break}return ve=Y.value,N(Ue,mm(k,ve),9);case 9:Y=te.next(),Ue.u(8);break;case 10:k.decodingInfos.length&&(h=!0),A=E.next(),Ue.u(5);break;case 7:if(h)return Ue.return();u={oe:u.oe},f=c.next(),Ue.u(2);break;case 4:Le=m(e),A=Le.next();case 12:if(A.done){Ue.u(0);break}De=A.value,qe=vm(De,t,n).filter(function(vt){return vt=vt[0],vt=vt.keySystemConfiguration&&vt.keySystemConfiguration.keySystem,!vt||!r.includes(vt)}),Se=m(qe),Y=Se.next();case 15:if(Y.done){A=Le.next(),Ue.u(12);break}return Qe=Y.value,N(Ue,mm(De,Qe),16);case 16:Y=Se.next(),Ue.u(15)}})}function vm(e,t,n){var r=e.audio,u=e.video,c=[],f=[];if(u)for(var h=m(u.fullMimeTypes),E=h.next();!E.done;E=h.next()){E=E.value;var A=Do(E);if(A.includes(",")&&!r){var k=A.split(",");A=Fu("video",k),k=Fu("audio",k),k=Hu(k),k=Os(ba(E),k,"audio"),f.push({contentType:k,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(A=Nl(A),E={contentType:Os(ba(E),A,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||1},u.hdr)switch(u.hdr){case"SDR":E.transferFunction="srgb";break;case"PQ":E.transferFunction="pq";break;case"HLG":E.transferFunction="hlg"}c.push(E)}if(r)for(h=m(r.fullMimeTypes),E=h.next();!E.done;E=h.next())E=E.value,A=Hu(Do(E)),E=Os(ba(E),A,"audio"),f.push({contentType:E,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(h=[],c.length==0&&c.push(null),f.length==0&&f.push(null),c=m(c),E=c.next();!E.done;E=c.next())for(E=E.value,A=m(f),k=A.next();!k.done;k=A.next()){k=k.value;var G={type:n?"file":"media-source"};E&&(G.video=E),k&&(G.audio=k),h.push(G)}if(f=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!f.length)return[h];e=[],n=new Map,f=m(f);for(var te=f.next();!te.done;te=f.next())c=te.value,n.get(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c);for(f=t?"required":"optional",t=t?["persistent-license"]:["temporary"],c=m(n.keys()),E=c.next();!E.done;E=c.next()){for(E=E.value,A=[],k=m(h),G=k.next();!G.done;G=k.next()){G=Object.assign({},G.value);var Y=n.get(E),ve={keySystem:E,initDataType:"cenc",persistentState:f,distinctiveIdentifier:"optional",sessionTypes:t};for(Y=m(Y),te=Y.next();!te.done;te=Y.next()){if(te=te.value,te.initData&&te.initData.length){for(var Le=new Set,De=m(te.initData),qe=De.next();!qe.done;qe=De.next())Le.add(qe.value.initDataType);ve.initDataType=te.initData[0].initDataType}te.distinctiveIdentifierRequired&&(ve.distinctiveIdentifier="required"),te.persistentStateRequired&&(ve.persistentState="required"),te.sessionType&&(ve.sessionTypes=[te.sessionType]),r&&(te.audioRobustness!=""?ve.audio?ve.audio.robustness=ve.audio.robustness||te.audioRobustness:ve.audio={robustness:te.audioRobustness}:ve.audio||(ve.audio={})),u&&(te.videoRobustness!=""?ve.video?ve.video.robustness=ve.video.robustness||te.videoRobustness:ve.video={robustness:te.videoRobustness}:ve.video||(ve.video={}))}G.keySystemConfiguration=ve,A.push(G)}e.push(A)}return e}function Hu(e){return e.toLowerCase()=="flac"?ys()?"fLaC":"flac":e==="Opus"?"opus":e}function Nl(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function SE(e){e.textStreams=e.textStreams.filter(function(t){return t=wi(t.mimeType,t.codecs),Cl(t)})}function Uf(e){var t,n,r,u,c,f,h;return xe(function(E){switch(E.g){case 1:t=[],n=m(e.imageStreams),r=n.next();case 2:if(r.done){E.u(4);break}if(u=r.value,c=u.mimeType,c=="application/mp4"&&u.codecs=="mjpg"&&(c="image/jpg"),zu.has(c)){E.u(5);break}if(f=IE.get(c),!f){zu.set(c,!1),E.u(5);break}return N(E,wE(f),7);case 7:h=E.h,zu.set(c,h);case 5:zu.get(c)&&t.push(u),r=n.next(),E.u(2);break;case 4:e.imageStreams=t,X(E)}})}function wE(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function xl(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,u=n?n.mimeType:null,c=t?t.codecs:null,f=n?n.codecs:null,h=[];f&&h.push(f),c&&h.push(c);var E=[];n&&E.push(n.mimeType),t&&E.push(t.mimeType),E=E[0]||null;var A=[];t&&A.push(t.kind),n&&A.push(n.kind),A=A[0]||null;var k=new Set;if(t)for(var G=m(t.roles),te=G.next();!te.done;te=G.next())k.add(te.value);if(n)for(G=m(n.roles),te=G.next();!te.done;te=G.next())k.add(te.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:A,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:E,audioMimeType:r,videoMimeType:u,codecs:h.join(", "),audioCodec:c,videoCodec:f,primary:e.primary,roles:Array.from(k),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.videoLayout=n.videoLayout||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Ml(e){return{id:e.id,active:!1,type:vr,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Ku(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var u=e.tilesLayout;return r&&(u=r.tilesLayout||u),u&&t!=null&&(t/=Number(u.split("x")[0])),u&&n!=null&&(n/=Number(u.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:u||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function bc(e){return e.__shaka_id||(e.__shaka_id=AE++),e.__shaka_id}function ym(e){var t=Em(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Dl(e){var t=Em(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Em(e){var t=e.language;return{id:bc(e),active:!1,type:"",bandwidth:0,language:Cr(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Bf(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function jf(e){return e.filter(function(t){return Bf(t)})}function Cc(e,t,n,r){var u=e,c=e.filter(function(E){return E.primary});c.length&&(u=c);var f=u.length?u[0].language:"";if(u=u.filter(function(E){return E.language==f}),t){var h=Rl(Cr(t),e.map(function(E){return E.language}));h&&(u=e.filter(function(E){return Cr(E.language)==h}))}if(u=u.filter(function(E){return E.forced==r}),n){if(e=Vu(u,n),e.length)return e}else if(e=u.filter(function(E){return E.roles.length==0}),e.length)return e;return e=u.map(function(E){return E.roles}).reduce(cm,[]),e.length?Vu(u,e[0]):u}function Vu(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Zf(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}re("shaka.util.StreamUtils",Ac),Ac.meetsRestrictions=Lf;var Uh={},AE=0,zu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),IE=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Hr(){var e=this;this.s=null,this.o=!1,this.i=new K,this.F=new Tt,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=[],this.B=1,this.G=!1,this.h=this.l=this.g=this.A=null,this.C=new pr(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.j=null}g=Hr.prototype,g.stop=function(){this.s=null,this.o=!1,this.m=[],this.B=1,this.l=this.A=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.j=null},g.release=function(){this.F.release(),this.C=null},g.init=function(e){this.s=e},g.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio,t=p.screen.height*n,n*=p.screen.width),this.h&&this.g.restrictToElementSize){var r=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio;t=Math.min(t,this.l.clientHeight*r),n=Math.min(n,this.l.clientWidth*r)}var u=this.m.filter(function(A){return!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)});if(u.length||(u=this.m),r=u,e&&u.length!=this.m.length&&(r=this.m.filter(function(A){return!!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)})),e=Bh(this,this.g.restrictions,r,1/0,1/0),t!=1/0||n!=1/0){for(e=qf(e),e=m(e),u=e.next();!u.done;u=e.next())if(u=u.value,u.height>=t&&u.width>=n){t=u.height,n=u.width;break}e=Bh(this,this.g.restrictions,r,t,n)}for(t=this.getBandwidthEstimate(),r.length&&!e.length&&(e=Bh(this,null,r,1/0,1/0),e=[e[0]]),n=e[0]||null,r=0;r<e.length;r++){u=e[r];for(var c=isNaN(this.B)?1:Math.abs(this.B),f=c*u.bandwidth/this.g.bandwidthDowngradeTarget,h={bandwidth:1/0},E=r+1;E<e.length;E++)if(u.bandwidth!=e[E].bandwidth){h=e[E];break}c=c*h.bandwidth/this.g.bandwidthUpgradeTarget,t>=f&&t<=c&&n.bandwidth!=u.bandwidth&&(n=u)}return this.A=Date.now(),n},g.enable=function(){this.o=!0},g.disable=function(){this.o=!1},g.segmentDownloaded=function(e,t,n){this.i.sample(e,t),n&&this.A!=null&&this.o&&Gf(this)},g.trySuggestStreams=function(){this.A!=null&&this.o&&Gf(this)},g.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.j?this.j.getBandwidthEstimate(e):e},g.setVariants=function(e){this.m=e},g.playbackRateChanged=function(e){this.B=e},g.setMediaElement=function(e){var t=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in p&&(this.h=new ResizeObserver(function(){t.C.X(bE)}),this.h.observe(this.l))},g.setCmsdManager=function(e){this.j=e},g.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function Gf(e){if(e.G){if(Date.now()-e.A<1e3*e.g.switchInterval)return}else{var t=e.i;if(!(t.g>=t.i))return;e.G=!0}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function Bh(e,t,n,r,u){if(e.j){var c=e.j.dg();c&&(n=n.filter(function(f){return f.bandwidth&&c?f.bandwidth<=c:!0}))}return t&&(n=n.filter(function(f){return Lf(f,t,{width:u,height:r})})),n.sort(function(f,h){return f.bandwidth-h.bandwidth})}function qf(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,u){return r.width-u.width})}re("shaka.abr.SimpleAbrManager",Hr),Hr.prototype.configure=Hr.prototype.configure,Hr.prototype.setCmsdManager=Hr.prototype.setCmsdManager,Hr.prototype.setMediaElement=Hr.prototype.setMediaElement,Hr.prototype.playbackRateChanged=Hr.prototype.playbackRateChanged,Hr.prototype.setVariants=Hr.prototype.setVariants,Hr.prototype.getBandwidthEstimate=Hr.prototype.getBandwidthEstimate,Hr.prototype.trySuggestStreams=Hr.prototype.trySuggestStreams,Hr.prototype.segmentDownloaded=Hr.prototype.segmentDownloaded,Hr.prototype.disable=Hr.prototype.disable,Hr.prototype.enable=Hr.prototype.enable,Hr.prototype.chooseVariant=Hr.prototype.chooseVariant,Hr.prototype.init=Hr.prototype.init,Hr.prototype.release=Hr.prototype.release,Hr.prototype.stop=Hr.prototype.stop;var bE=1;re("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),re("shaka.config.CodecSwitchingStrategy",{hj:"reload",Og:"smooth"});function Rc(e,t,n,r){for(n=n===void 0?!0:n,r=r===void 0?!1:r,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}Rc.prototype.add=function(e,t,n){return _m(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function _m(e,t,n,r){var u;if(!(u=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(u=e.audio&&t.audio)){u=e.audio;var c=t.audio;u=!!((!u.channelsCount||!c.channelsCount||2<u.channelsCount||2<c.channelsCount)&&u.channelsCount!=c.channelsCount||n&&!jh(u,c)||!Tm(u.roles,c.roles)||r&&u.groupId!==c.groupId)}return!(r=u)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||jh(e,t))&&Tm(e.roles,t.roles))),!r}Rc.prototype.values=function(){return this.g.values()};function jh(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return za(r)}),t=t.codecs.split(",").map(function(r){return za(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Tm(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Zh(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Pl(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}Zh.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Un(),r=e.filter(function(u){return _m(t.i,u,!n,t.g)});return r.length?new Rc(r[0],r,!n,this.g):this.j.create(e)};function Pl(e,t,n,r,u,c,f,h,E,A){this.s=e,this.A=t,this.h=n,this.i=r,this.B=u,this.l=c,this.g=f===void 0?"":f,this.j=h===void 0?"":h,this.m=E===void 0?"reload":E,this.o=A===void 0?!1:A}Pl.prototype.create=function(e){var t=[];t=Sm(e,this.s);var n=e.filter(function(r){return r.primary});return t=t.length?t:n.length?n:e,e=wm(t,this.A),e.length&&(t=e),this.l&&(e=Im(t,this.l),e.length&&(t=e)),this.i&&(e=NE(t,this.i),e.length&&(t=e)),this.h&&(e=Am(t,this.h),e.length&&(t=e)),this.g&&(e=CE(t,this.g),e.length&&(t=e)),this.j&&(e=RE(t,this.j),e.length&&(t=e)),e=xE(t,this.B),e.length&&(t=e),new Rc(t[0],t,!(this.m=="smooth"&&Un()),this.o)};function Sm(e,t){t=Cr(t);var n=Rl(t,e.map(function(r){return qu(r)}));return n?e.filter(function(r){return n==qu(r)}):[]}function wm(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function CE(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function RE(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function Am(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function NE(e,t){return t=="AUTO"&&(t=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function Im(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function xE(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Gh(){this.g=Nc,this.i=new Map().set(Nc,2).set(Ol,1),this.h=0}function qh(e,t,n){e.i.set(Nc,n).set(Ol,t)}var Ol=0,Nc=1;function Hh(e,t){var n=sa();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function Kh(e){var t,n;return xe(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new pt(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),N(r,new Promise(function(u){new pr(u).X(n/1e3)}),2))}e.h*=e.m,X(r)})}function sa(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Rr(){var e,t,n=new Promise(function(r,u){e=r,t=u});return n.resolve=e,n.reject=t,n}Rr.prototype.resolve=function(){},Rr.prototype.reject=function(){};function gi(e,t){this.promise=e,this.i=t,this.g=!1}function hu(e){return new gi(Promise.reject(e),function(){return Promise.resolve()})}function Vh(){var e=Promise.reject(new pt(2,7,7001));return e.catch(function(){}),new gi(e,function(){return Promise.resolve()})}function Yu(e){return new gi(Promise.resolve(e),function(){return Promise.resolve()})}function bm(e){return new gi(e,function(){return e.catch(function(){})})}gi.prototype.abort=function(){return this.g=!0,this.i()};function Hf(e){return new gi(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}gi.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},gi.prototype.va=function(e,t){function n(h){return function(E){if(u.g&&h)c.reject(f);else{var A=h?e:t;A?r=zh(A,E,c):(h?c.resolve:c.reject)(E)}}}function r(){return c.reject(f),u.abort()}var u=this,c=new Rr,f=new pt(2,7,7001);return this.promise.then(n(!0),n(!1)),new gi(c,function(){return r()})};function zh(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(u){return n.reject(u),function(){return Promise.resolve()}}}re("shaka.util.AbortableOperation",gi),gi.prototype.chain=gi.prototype.va,gi.prototype.finally=gi.prototype.finally,gi.all=Hf,gi.prototype.abort=gi.prototype.abort,gi.notAbortable=bm,gi.completed=Yu,gi.aborted=Vh,gi.failed=hu;function Wn(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=p.performance&&p.performance.now?p.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Cm(e){var t=new Wn(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Wn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Wn.prototype.stopImmediatePropagation=function(){this.g=!0},Wn.prototype.stopPropagation=function(){},re("shaka.util.FakeEvent",Wn);var xc={Ii:"abrstatuschanged",Ji:"adaptation",Ki:"buffering",Li:"complete",Mi:"downloadfailed",Ni:"downloadheadersreceived",Oi:"drmsessionupdate",Qi:"emsg",gj:"prft",Error:"error",Ri:"expirationupdated",Si:"firstquartile",Ti:"gapjumped",Wi:"keystatuschanged",Yi:"loaded",Zi:"loading",aj:"manifestparsed",bj:"manifestupdated",cj:"mediaqualitychanged",Metadata:"metadata",dj:"midpoint",ej:"nospatialvideoinfo",fj:"onstatechange",ij:"ratechange",jj:"segmentappended",kj:"sessiondata",lj:"spatialvideoinfo",mj:"stalldetected",nj:"started",oj:"statechanged",pj:"streaming",qj:"textchanged",rj:"texttrackvisibility",sj:"thirdquartile",tj:"timelineregionadded",uj:"timelineregionenter",vj:"timelineregionexit",wj:"trackschanged",yj:"unloading",Aj:"variantchanged"};function Sr(){this.ia=new Et,this.Ud=this}Sr.prototype.addEventListener=function(e,t){this.ia&&this.ia.push(e,t)},Sr.prototype.removeEventListener=function(e,t){this.ia&&this.ia.remove(e,t)},Sr.prototype.dispatchEvent=function(e){if(!this.ia)return!0;var t=this.ia.get(e.type)||[],n=this.ia.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Ud,e.currentTarget=this.Ud;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},Sr.prototype.release=function(){this.ia=null};function Ll(){this.g=[]}function pu(e,t){e.g.push(t.finally(function(){mn(e.g,t)}))}Ll.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Kr(e,t,n,r,u,c){Sr.call(this),this.i=!1,this.m=new Ll,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.A=r||null,this.C=u||null,this.B=c||null,this.o=!1}z(Kr,Sr),g=Kr.prototype,g.Cf=function(e){this.o=e};function Ho(e,t,n,r){n=n||$h;var u=Dc[e];(!u||n>=u.priority)&&(Dc[e]={priority:n,ge:t,bi:r===void 0?!1:r})}g.ei=function(e){this.g.add(e)},g.Bi=function(e){this.g.delete(e)},g.$g=function(){this.g.clear()},g.fi=function(e){this.h.add(e)},g.Ci=function(e){this.h.delete(e)},g.ah=function(){this.h.clear()};function Li(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}g.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Sr.prototype.release.call(this),this.m.destroy()},g.request=function(e,t,n){var r=this,u=new Wh;if(this.i){var c=Promise.reject(new pt(2,7,7001));return c.catch(function(){}),new Mc(c,function(){return Promise.resolve()},u)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ya(t.retryParameters):sa(),t.uris=Ya(t.uris),c=Rm(this,e,t,n);var f=c.va(function(){return Yh(r,e,t,n,new Hh(t.retryParameters,!1),0,null,u)}),h=f.va(function(te){return ME(r,e,te,n)}),E=Date.now(),A=0;c.promise.then(function(){A=Date.now()-E},function(){});var k=0;f.promise.then(function(){k=Date.now()},function(){});var G=h.va(function(te){var Y=Date.now()-k,ve=te.response;return ve.timeMs+=A,ve.timeMs+=Y,te.Ih||!r.l||ve.fromCache||t.method=="HEAD"||e!=Wa||r.l(ve.timeMs,ve.data.byteLength,Nm(n)),r.B&&r.B(e,ve,n),ve},function(te){throw te&&(te.severity=2),te});return c=new Mc(G.promise,function(){return G.abort()},u),pu(this.m,c),c};function Rm(e,t,n,r){function u(h){c=c.va(function(){return n.body&&(n.body=Si(n.body)),h(t,n,r)})}var c=Yu(void 0);e.A&&u(e.A),e=m(e.g);for(var f=e.next();!f.done;f=e.next())u(f.value);return c.va(void 0,function(h){throw h instanceof pt&&h.code==7001?h:new pt(2,1,1006,h)})}function Yh(e,t,n,r,u,c,f,h){e.o&&(n.uris[c]=n.uris[c].replace("http://","https://")),0<c&&e.C&&e.C(t,r,n.uris[c],n.uris[c-1]);var E=new si(n.uris[c]),A=E.kb,k=!1;A||(A=location.protocol,A=A.slice(0,-1),Ms(E,A),n.uris[c]=E.toString()),A=A.toLowerCase();var G=(A=Dc[A])?A.ge:null;if(!G)return hu(new pt(2,1,1e3,E));var te=A.bi,Y=null,ve=null,Le=!1,De=!1,qe;return bm(Kh(u)).va(function(){if(e.i)return Vh();qe=Date.now();var Se=0;n.requestStartTime=Date.now();var Qe=G(n.uris[c],n,t,function(Nt,Vt,Bt){Y&&Y.stop(),ve&&ve.X(vt/1e3),e.l&&t==Wa&&(Se++,n.packetNumber=Se,e.l(Nt,Vt,Nm(r),n),k=!0,h.g=Bt)},function(Nt){e.j&&e.j(Nt,n,t),De=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!te)return Qe;var Ue=n.retryParameters.connectionTimeout;Ue&&(Y=new pr(function(){Le=!0,Qe.abort()}),Y.X(Ue/1e3));var vt=n.retryParameters.stallTimeout;return vt&&(ve=new pr(function(){Le=!0,Qe.abort()})),Qe}).va(function(Se){Y&&Y.stop(),ve&&ve.stop(),Se.timeMs==null&&(Se.timeMs=Date.now()-qe);var Qe={response:Se,Ih:k};return!De&&e.j&&e.j(Se.headers,n,t),Qe},function(Se){if(Y&&Y.stop(),ve&&ve.stop(),e.s){var Qe=null,Ue=0;Se instanceof pt&&(Qe=Se,Se.code==1001&&(Ue=Se.data[1])),e.s(n,Qe,Ue,Le)}if(e.i)return Vh();if(Le&&(Se=new pt(1,1,1003,n.uris[c],t)),Se instanceof pt){if(Se.code==7001)throw Se;if(Se.code==1010)throw f;if(Se.severity==1)return Qe=new Map().set("error",Se),Qe=new Wn("retry",Qe),e.dispatchEvent(Qe),c=(c+1)%n.uris.length,Yh(e,t,n,r,u,c,Se,h)}throw Se})}function ME(e,t,n,r){var u=Yu(void 0),c={};e=m(e.h);for(var f=e.next();!f.done;c={qe:c.qe},f=e.next())c.qe=f.value,u=u.va(function(h){return function(){var E=n.response;return E.data&&(E.data=Si(E.data)),h.qe(t,E,r)}}(c));return u.va(function(){return n},function(h){var E=2;if(h instanceof pt){if(h.code==7001)throw h;E=h.severity}throw new pt(E,1,1007,h)})}function Nm(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.md)return!1}return!0}re("shaka.net.NetworkingEngine",Kr),Kr.prototype.request=Kr.prototype.request,Kr.prototype.destroy=Kr.prototype.destroy,Kr.makeRequest=Li,Kr.defaultRetryParameters=function(){return sa()},Kr.prototype.clearAllResponseFilters=Kr.prototype.ah,Kr.prototype.unregisterResponseFilter=Kr.prototype.Ci,Kr.prototype.registerResponseFilter=Kr.prototype.fi,Kr.prototype.clearAllRequestFilters=Kr.prototype.$g,Kr.prototype.unregisterRequestFilter=Kr.prototype.Bi,Kr.prototype.registerRequestFilter=Kr.prototype.ei,Kr.unregisterScheme=function(e){delete Dc[e]},Kr.registerScheme=Ho,Kr.prototype.setForceHTTPS=Kr.prototype.Cf;function Wh(){this.g=0}Kr.NumBytesRemainingClass=Wh;function Mc(e,t,n){gi.call(this,e,t),this.h=n}z(Mc,gi),Kr.PendingRequest=Mc;var Wa=1;Kr.RequestType={MANIFEST:0,SEGMENT:Wa,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Kr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var $h=3;Kr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:$h};var Dc={};function Wu(e){this.g=!1,this.h=new Rr,this.i=e}Wu.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function jr(e,t){if(e.g)throw t instanceof pt&&t.code==7003?t:new pt(2,7,7003,t)}function Kf(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function DE(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function kl(e){for(var t=new Map,n=m(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Pc(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function Dr(e,t){this.h=tn(e),this.i=t==xm,this.g=0}g=Dr.prototype,g.ka=function(){return this.g<this.h.byteLength},g.wa=function(){return this.g},g.getLength=function(){return this.h.byteLength},g.P=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw ks()}},g.ra=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw ks()}},g.M=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw ks()}},g.sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw ks()}},g.Cc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw ks()}if(2097151<t)throw new pt(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},g.sb=function(e){if(this.g+e>this.h.byteLength)throw ks();var t=Qn(this.h,this.g,e);return this.g+=e,t},g.skip=function(e){if(this.g+e>this.h.byteLength)throw ks();this.g+=e},g.mi=function(e){if(this.g<e)throw ks();this.g-=e},g.seek=function(e){if(0>e||e>this.h.byteLength)throw ks();this.g=e},g.hc=function(){for(var e=this.g;this.ka()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Qn(this.h,e,this.g-e),this.g+=1,Vr(e)};function ks(){return new pt(2,3,3e3)}re("shaka.util.DataViewReader",Dr),Dr.prototype.readTerminatedString=Dr.prototype.hc,Dr.prototype.seek=Dr.prototype.seek,Dr.prototype.rewind=Dr.prototype.mi,Dr.prototype.skip=Dr.prototype.skip,Dr.prototype.readBytes=Dr.prototype.sb,Dr.prototype.readUint64=Dr.prototype.Cc,Dr.prototype.readInt32=Dr.prototype.sg,Dr.prototype.readUint32=Dr.prototype.M,Dr.prototype.readUint16=Dr.prototype.ra,Dr.prototype.readUint8=Dr.prototype.P,Dr.prototype.getLength=Dr.prototype.getLength,Dr.prototype.getPosition=Dr.prototype.wa,Dr.prototype.hasMoreData=Dr.prototype.ka;var xm=1;Dr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:xm};function Fr(){this.i=[],this.h=[],this.g=!1}g=Fr.prototype,g.box=function(e,t){return e=Mm(e),this.i[e]=PE,this.h[e]=t,this},g.O=function(e,t){return e=Mm(e),this.i[e]=Dm,this.h[e]=t,this},g.stop=function(){this.g=!0},g.parse=function(e,t,n){for(e=new Dr(e,0),this.g=!1;e.ka()&&!this.g;)this.Ac(0,e,t,n)},g.Ac=function(e,t,n,r){var u=t.wa();if(r&&u+8>t.getLength())this.g=!0;else{var c=t.M(),f=t.M(),h=Vf(f),E=!1;switch(c){case 0:c=t.getLength()-u;break;case 1:if(r&&t.wa()+8>t.getLength()){this.g=!0;return}c=t.Cc(),E=!0}var A=this.h[f];if(A){var k=null,G=null;if(this.i[f]==Dm){if(r&&t.wa()+4>t.getLength()){this.g=!0;return}G=t.M(),k=G>>>24,G&=16777215}f=u+c,n&&f>t.getLength()&&(f=t.getLength()),r&&f>t.getLength()?this.g=!0:(r=f-t.wa(),t=0<r?t.sb(r):new Uint8Array(0),t=new Dr(t,0),A({name:h,parser:this,partialOkay:n||!1,version:k,flags:G,reader:t,size:c,start:u+e,has64BitSize:E}))}else t.skip(Math.min(u+c-t.wa(),t.getLength()-t.wa()))}};function yr(e){for(var t=Fl(e);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function gu(e){for(var t=Fl(e),n=e.reader.M(),r=0;r<n&&(e.parser.Ac(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function Ai(e){var t=Fl(e);for(e.reader.skip(78);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function Xh(e){var t=Fl(e);e.reader.skip(8);var n=e.reader.ra();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function $u(e){return function(t){e(t.reader.sb(t.reader.getLength()-t.reader.wa()))}}function Mm(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Vf(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Fl(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}re("shaka.util.Mp4Parser",Fr),Fr.headerSize=Fl,Fr.typeToString=Vf,Fr.allData=$u,Fr.audioSampleEntry=Xh,Fr.visualSampleEntry=Ai,Fr.sampleDescription=gu,Fr.children=yr,Fr.prototype.parseNext=Fr.prototype.Ac,Fr.prototype.parse=Fr.prototype.parse,Fr.prototype.stop=Fr.prototype.stop,Fr.prototype.fullBox=Fr.prototype.O,Fr.prototype.box=Fr.prototype.box;var PE=0,Dm=1;function Pm(e){var t=this;this.g=[],this.h=[],this.data=[],new Fr().box("moov",yr).box("moof",yr).O("pssh",function(n){if(!(1<n.version)){var r=Qn(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(Ps(n.reader.sb(16))),0<n.version){r=n.reader.M();for(var u=0;u<r;u++){var c=Ps(n.reader.sb(16));t.h.push(c)}}}}).parse(e)}function zf(e,t,n,r){var u=e.length,c=t.length+16+u;0<r&&(c+=4+16*n.size);var f=new Uint8Array(c),h=tn(f),E=0;if(h.setUint32(E,c),E+=4,h.setUint32(E,1886614376),E+=4,1>r?h.setUint32(E,0):h.setUint32(E,16777216),E+=4,f.set(t,E),E+=t.length,0<r)for(h.setUint32(E,n.size),E+=4,t=m(n),n=t.next();!n.done;n=t.next())n=fu(n.value),f.set(n,E),E+=n.length;return h.setUint32(E,u),f.set(e,E+4),f}function Qh(e,t){return e=Ka(e),Ul(e,t)}function Ul(e,t){return e=OE(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function Oc(e){return kc.has(e)?kc.get(e):""}function OE(e){function t(u,c){c=c===void 0?!1:c;for(var f=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){c=r+2,r=e.indexOf(">",r),c=e.substring(c,r);var h=c.indexOf(u);if(h==-1){var E=u.indexOf(".");0<E&&(h=c.indexOf(u.substring(0,E)))}if(h==-1)throw u=e.substring(0,r).split("\n"),Error("Unexpected close tag\nLine: "+(u.length-1)+"\nColumn: "+(u[u.length-1].length+1)+"\nChar: "+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){h=e.indexOf("]]>",r),h==-1?(f.push(e.substr(r+9)),r=e.length):(f.push(e.substring(r+9,h)),r=h+3);continue}r++;continue}e:{E=c,r++;var A=n(),k={};for(h=[];e.charCodeAt(r)!==62&&e[r];){var G=e.charCodeAt(r);if(64<G&&91>G||96<G&&123>G){G=n();for(var te=e.charCodeAt(r);te&&te!==39&&te!==34&&!(64<te&&91>te||96<te&&123>te)&&te!==62;)r++,te=e.charCodeAt(r);var Y=r+1;if(r=e.indexOf(e[r],Y),Y=e.slice(Y,r),te===39||te===34){if(r===-1){for(E={tagName:A,attributes:k,children:h,parent:null},A=0;A<h.length;A++)typeof h[A]!="string"&&(h[A].parent=E);h=E;break e}}else Y=null,r--;G.startsWith("xmlns:")&&kc.set(Y,G.split(":")[1]),A==="tt"&&G==="xml:space"&&Y==="preserve"&&(E=!0),k[G]=Y}r++}for(e.charCodeAt(r-1)!==47?(r++,h=t(A,E)):r++,E={tagName:A,attributes:k,children:h,parent:null},A=h.length,k=0;k<A;k++)G=h[k],typeof G!="string"?G.parent=E:k==A-1&&G=="\n"&&h.pop();h=E}if(f.push(h),typeof h=="string")break;h.tagName[0]==="?"&&h.children&&(f.push.apply(f,T(h.children)),h.children=[])}else h=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),h=e.slice(h,r+1),c?0<h.length&&f.push(h):(f.length&&h.length==1&&h[0]=="\n"||0<h.trim().length)&&f.push(h),r++;return f}function n(){for(var u=r;"\r\n	>/= ".indexOf(e[r])===-1&&e[r];)r++;return e.slice(u,r)}var r=0;return t("")}function Yf(e){return typeof e=="string"}function LE(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Wr(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function Ri(e){return typeof e=="string"?bo(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:bo(e))}function mu(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Ri(e))&&(e=e.trim()),e):null}function Ca(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var r=e.next();!r.done;r=e.next())Ca(r.value,t,n)}return n}function ua(e,t){return e=Wr(e,t),e.length!=1?null:e[0]}function Fs(e,t,n){return e=Wf(e,t,n),e.length!=1?null:e[0]}function _r(e,t,n,r){r=r===void 0?null:r;var u=null;return e=e.attributes[t],e!=null&&(u=n(e)),u==null?r:u}function vu(e,t,n){return t=Oc(t),e.attributes[t+":"+n]||null}function Wf(e,t,n){t=Oc(t);var r=[];if(e.children){e=m(e.children);for(var u=e.next();!u.done;u=e.next())(u=u.value)&&u.tagName===t+":"+n&&r.push(u)}return r}function la(e,t,n){t=m(t);for(var r=t.next();!r.done;r=t.next())if(r=vu(e,r.value,n))return r;return null}function $f(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function $a(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Xf(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Xu(e){return e=Number(e),e%1===0?e:null}function Us(e){return e=Number(e),e%1===0&&0<e?e:null}function Ro(e){return e=Number(e),e%1===0&&0<=e?e:null}function Lc(e){return e=Number(e),isNaN(e)?null:e}function Jh(e){return e?e.toLowerCase()==="true":!1}function Om(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function ep(e,t,n){t=t===void 0?!0:t,n=n===void 0?!0:n;var r=document.createElement(e.tagName),u;for(u in e.attributes)r.setAttribute(u,e.attributes[u]);if(t&&e.parent&&e.parent.tagName!="?xml"&&ep(e.parent,!0,!1).appendChild(r),n)for(e=m(e.children),t=e.next();!t.done;t=e.next())t=t.value,n=void 0,typeof t=="string"?n=new Text(t):n=ep(t,!1,!0),r.appendChild(n);return r}var kc=new Map([]);function Fc(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.ia=this.da=!1,this.I=0,this.g=null,this.B=new Tt,this.i=new Map,this.A=new Map,this.l=new Rr,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.aa=new Map,this.ea=new Map,this.L=new pr(function(){return V(t)}),this.T=!1,this.N=[],this.Y=!1,this.K=new pr(function(){Ee(t)}),this.l.catch(function(){}),this.j=new Wu(function(){return kE(t)}),this.ba=!1,this.F=this.G=null}g=Fc.prototype,g.destroy=function(){return this.j.destroy()};function kE(e){return xe(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,N(t,H(e),2);case 2:if(!e.m){t.u(3);break}return ce(t,4),N(t,e.m.setMediaKeys(null),6);case 6:de(t,5);break;case 4:Ce(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,X(t)}})}g.configure=function(e){this.h=e,this.K&&this.K.$a(this.h.updateExpirationTime)};function Lm(e,t,n){return e.ia=!0,e.A=new Map,e.T=n,Um(e,t)}function km(e,t,n){e.A=new Map,n=m(n);for(var r=n.next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.T=0<e.A.size,Um(e,t)}function Fm(e,t,n,r,u,c){var f=new Map;return u={audioCapabilities:u,videoCapabilities:c,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},u.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],f.set(t,u),ip(e,f,[])}function Um(e,t){var n,r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se;return xe(function(Qe){if(Qe.g==1){if(n=jE(e))for(r=m(t),u=r.next();!u.done;u=r.next())c=u.value,c.video&&(c.video.drmInfos=[n]),c.audio&&(c.audio.drmInfos=[n]);for(f=t.some(function(Ue){return!!(Ue.video&&Ue.video.drmInfos.length||Ue.audio&&Ue.audio.drmInfos.length)}),f||(h=kl(e.h.servers),ge(t,h)),E=new Set,A=m(t),u=A.next();!u.done;u=A.next())for(k=u.value,G=we(k),te=m(G),Y=te.next();!Y.done;Y=te.next())ve=Y.value,E.add(ve);for(Le=m(E),Y=Le.next();!Y.done;Y=Le.next())De=Y.value,Oe(De,kl(e.h.servers),kl(e.h.advanced||{}),e.h.keySystemsMapping);return N(Qe,Fh(t,e.T,e.ba,e.h.preferredKeySystems),2)}return qe=f||Object.keys(e.h.servers).length,qe?(Se=ip(e,void 0,t),Qe.return(f?Se:Se.catch(function(){}))):(e.da=!0,Qe.return(Promise.resolve()))})}function tp(e){var t;return xe(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return N(n,e.G,3);case 3:return jr(e.j),n.return();case 2:return ce(n,4),e.G=e.m.setMediaKeys(e.s),N(n,e.G,6);case 6:de(n,5);break;case 4:t=Ce(n),e.o(new pt(2,6,6003,t.message));case 5:jr(e.j),X(n)}})}function FE(e,t){return xe(function(n){if(n.g==1)return N(n,tp(e),2);Bl(e,t.initDataType,Qn(t.initData)),X(n)})}g.Vc=function(e){var t=this;return xe(function(n){if(n.g==1)return t.s?(t.m=e,t.B.na(t.m,"play",function(){for(var r=m(t.N),u=r.next();!u.done;u=r.next())P(t,u.value);t.Y=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return H(t)}),t.F=t.g&&t.g.initData.find(function(r){return 0<r.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?N(n,tp(t),2):n.u(2)):(t.B.na(e,"encrypted",function(){t.o(new pt(2,6,6010))}),n.return());np(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(r){return FE(t,r)}),X(n)})};function Bm(e){var t,n,r,u,c;return xe(function(f){switch(f.g){case 1:if(!e.s||!e.g)return f.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){f.u(2);break}return t=Li([e.g.serverCertificateUri],e.h.retryParameters),ce(f,3),n=e.C.zb.request(5,t),N(f,n.promise,5);case 5:r=f.h,e.g.serverCertificate=Qn(r.data),de(f,4);break;case 3:throw u=Ce(f),new pt(2,6,6017,u);case 4:if(e.j.g)return f.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?f.return():(ce(f,6),N(f,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:de(f,0);break;case 6:throw c=Ce(f),new pt(2,6,6004,c.message)}})}function UE(e,t){var n,r,u;return xe(function(c){if(c.g==1)return N(c,Gm(e,t,{initData:null,initDataType:null}),2);if(c.g!=3)return n=c.h,n?(r=[],(u=e.i.get(n))&&(u.ab=new Rr,r.push(u.ab)),r.push(n.remove()),N(c,Promise.all(r),3)):c.return();e.i.delete(n),X(c)})}function np(e){var t,n,r,u,c;return xe(function(f){if(f.g==1)return e.A.size?(e.A.forEach(function(h,E){Gm(e,E,h)}),N(f,e.l,3)):f.u(2);if(f.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&me(e))return f.return(e.l);e.l=new Rr,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=m(n),u=r.next();!u.done;u=r.next())c=u.value,Bl(e,c.initDataType,c.initData);return ie(e)&&e.l.resolve(),f.return(e.l)})}function Bl(e,t,n){if(n.length){var r=e.i.values();r=m(r);for(var u=r.next();!u.done;u=r.next())if(zi(n,u.value.initData)&&e.h.ignoreDuplicateInitData)return;0<e.i.size&&ie(e)&&(e.l.resolve(),e.l=new Rr,e.l.catch(function(){})),L(e,t,n,e.g.sessionType)}}function jm(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function rp(e){return e=e.i.keys(),e=Kf(e,function(t){return t.sessionId}),Array.from(e)}g.Se=function(){var e=this,t=this.i.keys();return t=Kf(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},g.cd=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},g.Kd=function(){return Pc(this.ea)};function ip(e,t,n){var r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe;return xe(function(Se){switch(Se.g){case 1:if(r=new Map,n.length){u=BE(e,n,r),Se.u(2);break}return N(Se,Zm(e,t),3);case 3:u=Se.h;case 2:if(c=u,!c)throw new pt(2,6,6001);for(jr(e.j),ce(Se,4),e.H.clear(),f=c.getConfiguration(),h=f.audioCapabilities||[],E=f.videoCapabilities||[],A=m(h),k=A.next();!k.done;k=A.next())G=k.value,e.H.add(G.contentType.toLowerCase());for(te=m(E),k=te.next();!k.done;k=te.next())Y=k.value,e.H.add(Y.contentType.toLowerCase());if(n.length){var Qe=c.keySystem,Ue=r.get(c.keySystem),vt=[],Nt=[],Vt=[],Bt=[],_t=[],Zt=new Set;He(Ue,vt,Nt,Bt,Vt,_t,Zt);var ln=e.T?"persistent-license":"temporary";for(Qe={keySystem:Qe,encryptionScheme:vt[0],licenseServerUri:Nt[0],distinctiveIdentifierRequired:Ue[0].distinctiveIdentifierRequired,persistentStateRequired:Ue[0].persistentStateRequired,sessionType:Ue[0].sessionType||ln,audioRobustness:Ue[0].audioRobustness||"",videoRobustness:Ue[0].videoRobustness||"",serverCertificate:Bt[0],serverCertificateUri:Vt[0],initData:_t,keyIds:Zt},Ue=m(Ue),vt=Ue.next();!vt.done;vt=Ue.next())vt=vt.value,vt.distinctiveIdentifierRequired&&(Qe.distinctiveIdentifierRequired=vt.distinctiveIdentifierRequired),vt.persistentStateRequired&&(Qe.persistentStateRequired=vt.persistentStateRequired);Ue=Qe}else Ue=c.keySystem,Qe=t.get(c.keySystem),vt=[],Nt=[],Vt=[],Bt=[],_t=[],Zt=new Set,He(Qe.drmInfos,vt,Nt,Bt,Vt,_t,Zt),Ue={keySystem:Ue,encryptionScheme:vt[0],licenseServerUri:Nt[0],distinctiveIdentifierRequired:Qe.distinctiveIdentifier=="required",persistentStateRequired:Qe.persistentState=="required",sessionType:Qe.sessionTypes[0]||"temporary",audioRobustness:(Qe.audioCapabilities?Qe.audioCapabilities[0].robustness:"")||"",videoRobustness:(Qe.videoCapabilities?Qe.videoCapabilities[0].robustness:"")||"",serverCertificate:Bt[0],serverCertificateUri:Vt[0],initData:_t,keyIds:Zt};if(e.g=Ue,!e.g.licenseServerUri)throw new pt(2,6,6012,e.g.keySystem);return N(Se,c.createMediaKeys(),6);case 6:if(ve=Se.h,jr(e.j),e.s=ve,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){Se.u(7);break}return ce(Se,8),N(Se,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(Le=Se.h,Le!="usable")throw new pt(2,6,6018);jr(e.j),de(Se,7,4);break;case 8:throw De=Ce(Se,4),De instanceof pt?De:new pt(2,6,6019,De.message);case 7:return e.da=!0,N(Se,Bm(e),11);case 11:jr(e.j),de(Se,0);break;case 4:throw qe=Ce(Se),jr(e.j,qe),e.g=null,e.H.clear(),qe instanceof pt?qe:new pt(2,6,6002,qe.message)}})}function BE(e,t,n){for(var r=m(t),u=r.next();!u.done;u=r.next()){var c=m(we(u.value));for(u=c.next();!u.done;u=c.next())u=u.value,n.has(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u)}if(n.size==1&&n.has(""))throw new pt(2,6,6e3);for(r={},e=m(e.h.preferredKeySystems),u=e.next();!u.done;r={pe:r.pe},u=e.next())for(r.pe=u.value,c=m(t),u=c.next();!u.done;u=c.next())if(u=u.value.decodingInfos.find(function(A){return function(k){return k.supported&&k.keySystemAccess!=null&&k.keySystemAccess.keySystem==A.pe}}(r)))return u.keySystemAccess;for(e=m([!0,!1]),u=e.next();!u.done;u=e.next())for(r=u.value,c=m(t),u=c.next();!u.done;u=c.next()){var f=m(u.value.decodingInfos);for(u=f.next();!u.done;u=f.next()){var h=u.value;if(h.supported&&h.keySystemAccess){u=n.get(h.keySystemAccess.keySystem);var E=m(u);for(u=E.next();!u.done;u=E.next())if(!!u.value.licenseServerUri==r)return h.keySystemAccess}}}return null}function Zm(e,t){var n,r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De;return xe(function(qe){switch(qe.g){case 1:if(t.size==1&&t.has(""))throw new pt(2,6,6e3);for(r=m(t.values()),u=r.next();!u.done;u=r.next())c=u.value,c.audioCapabilities.length==0&&delete c.audioCapabilities,c.videoCapabilities.length==0&&delete c.videoCapabilities;f=m(e.h.preferredKeySystems),h=f.next();case 2:if(h.done){qe.u(4);break}if(E=h.value,!t.has(E)){qe.u(3);break}return A=t.get(E),ce(qe,6),N(qe,navigator.requestMediaKeySystemAccess(E,[A]),8);case 8:return n=qe.h,qe.return(n);case 6:Ce(qe);case 7:jr(e.j);case 3:h=f.next(),qe.u(2);break;case 4:k=m([!0,!1]),G=k.next();case 9:if(G.done){qe.u(11);break}te=G.value,Y=m(t.keys()),h=Y.next();case 12:if(h.done){G=k.next(),qe.u(9);break}if(ve=h.value,Le=t.get(ve),De=Le.drmInfos.some(function(Se){return!!Se.licenseServerUri}),De!=te){qe.u(13);break}return ce(qe,15),N(qe,navigator.requestMediaKeySystemAccess(ve,[Le]),17);case 17:return n=qe.h,qe.return(n);case 15:Ce(qe);case 16:jr(e.j);case 13:h=Y.next(),qe.u(12);break;case 11:return qe.return(n)}})}function jE(e){return e=kl(e.h.clearKeys),e.size==0?null:Rh(e)}function Uc(e){ie(e)&&e.l.resolve()}function Bc(e,t){new pr(function(){t.loaded=!0,Uc(e)}).X($e)}function Gm(e,t,n){var r,u,c,f,h,E,A;return xe(function(k){switch(k.g){case 1:try{r=e.s.createSession("persistent-license")}catch(G){return u=new pt(2,6,6005,G.message),e.o(u),k.return(Promise.reject(u))}return e.B.D(r,"message",function(G){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(G):P(e,G)}),e.B.D(r,"keystatuseschange",function(G){return B(e,G)}),c={initData:n.initData,initDataType:n.initDataType,loaded:!1,lf:1/0,ab:null,type:"persistent-license"},e.i.set(r,c),ce(k,2),N(k,r.load(t),4);case 4:return f=k.h,jr(e.j),f||(e.i.delete(r),h=e.h.persistentSessionOnlinePlayback?1:2,e.o(new pt(h,6,6013)),c.loaded=!0),Bc(e,c),Uc(e),k.return(r);case 2:E=Ce(k),jr(e.j,E),e.i.delete(r),A=e.h.persistentSessionOnlinePlayback?1:2,e.o(new pt(A,6,6005,E.message)),c.loaded=!0,Uc(e);case 3:return k.return(Promise.resolve())}})}function L(e,t,n,r){try{var u=e.s.createSession(r)}catch(c){e.o(new pt(2,6,6005,c.message));return}e.B.D(u,"message",function(c){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(c):P(e,c)}),e.B.D(u,"keystatuseschange",function(c){return B(e,c)}),e.i.set(u,{initData:n,initDataType:t,loaded:!1,lf:1/0,ab:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(c){t=c,c instanceof pt||(t=new pt(2,6,6016,c)),e.o(t);return}e.h.logLicenseExchange&&cu(n),u.generateRequest(t,n).catch(function(c){if(!e.j.g){e.i.delete(u);var f=c.errorCode;if(f&&f.systemCode){var h=f.systemCode;0>h&&(h+=Math.pow(2,32)),h="0x"+h.toString(16)}e.o(new pt(2,6,6006,c.message,c,h))}})}function P(e,t){var n,r,u,c,f,h,E,A,k,G,te,Y,ve;xe(function(Le){switch(Le.g){case 1:if(n=t.target,e.h.logLicenseExchange&&cu(t.message),r=e.i.get(n),u=e.g.licenseServerUri,c=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&c&&c.individualizationServer&&(u=c.individualizationServer),f=Li([u],e.h.retryParameters),f.body=t.message,f.method="POST",f.licenseRequestType=t.messageType,f.sessionId=n.sessionId,f.drmInfo=e.g,r&&(f.initData=r.initData,f.initDataType=r.initDataType),jm(e.g.keySystem)){var De=Ha(f.body,!0,!0);if(De.includes("PlayReadyKeyMessage")){De=Ul(De,"PlayReadyKeyMessage");var qe=Ca(De,"HttpHeader");qe=m(qe);for(var Se=qe.next();!Se.done;Se=qe.next()){var Qe=Se.value;Se=Ca(Qe,"name")[0],Qe=Ca(Qe,"value")[0],f.headers[Ri(Se)]=Ri(Qe)}De=Ca(De,"Challenge")[0],f.body=qo(Ri(De))}else f.headers["Content-Type"]="text/xml; charset=utf-8"}return h=Date.now(),ce(Le,2),A=e.C.zb.request(2,f),N(Le,A.promise,4);case 4:E=Le.h,de(Le,3);break;case 2:return k=Ce(Le),e.j.g||(G=new pt(2,6,6007,k),e.i.size==1?(e.o(G),r&&r.ab&&r.ab.reject(G)):(r&&r.ab&&r.ab.reject(G),e.i.delete(n),ie(e)&&(e.l.resolve(),e.L.X(.1)))),Le.return();case 3:return e.j.g?Le.return():(e.I+=(Date.now()-h)/1e3,e.h.logLicenseExchange&&cu(E.data),ce(Le,5),N(Le,n.update(E.data),7));case 7:de(Le,6);break;case 5:return te=Ce(Le),Y=new pt(2,6,6008,te.message),e.o(Y),r&&r.ab&&r.ab.reject(Y),Le.return();case 6:if(e.j.g)return Le.return();ve=new Wn("drmsessionupdate"),e.C.onEvent(ve),r&&(r.ab&&r.ab.resolve(),Bc(e,r)),X(Le)}})}function B(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(c,f){if(typeof f=="string"){var h=f;f=c,c=h}if(jm(e.g.keySystem)&&f.byteLength==16&&(Il()||Nr())){h=tn(f);var E=h.getUint32(0,!0),A=h.getUint16(4,!0),k=h.getUint16(6,!0);h.setUint32(0,E,!1),h.setUint16(4,A,!1),h.setUint16(6,k,!1)}c!="status-pending"&&(n.loaded=!0),c=="expired"&&(r=!0),f=Ps(f).slice(0,32),e.aa.set(f,c)});var u=t.expiration-Date.now();(0>u||r&&1e3>u)&&n&&!n.ab&&(e.i.delete(t),t.close().catch(function(){})),ie(e)&&(e.l.resolve(),e.L.X(_e))}function V(e){var t=e.aa,n=e.ea;n.clear(),t.forEach(function(r,u){return n.set(u,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.o(new pt(2,6,6014)),e.C.ee(Pc(n))}function ee(){var e,t,n,r,u,c,f,h;return xe(function(E){return E.g==1?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},r={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},u=[r,n],c=new Map,f=function(A){var k,G,te;return xe(function(Y){switch(Y.g){case 1:if(ce(Y,2),A==="org.w3.clearkey"&&ys())throw Error("Unsupported keySystem");return N(Y,navigator.requestMediaKeySystemAccess(A,u),4);case 4:return k=Y.h,te=(G=k.getConfiguration().sessionTypes)?G.includes("persistent-license"):!1,Ou()&&(te=!1),c.set(A,{persistentState:te}),N(Y,k.createMediaKeys(),5);case 5:de(Y,0);break;case 2:Ce(Y),c.set(A,null),X(Y)}})},h=e.map(function(A){return f(A)}),N(E,Promise.all(h),2)):E.return(Pc(c))})}function J(e){var t;return xe(function(n){if(n.g==1)return t=new Promise(function(r,u){new pr(u).X(Ze)}),ce(n,2),N(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return de(n,0);Ce(n),X(n)})}function H(e){var t;return xe(function(n){return t=Array.from(e.i.entries()),e.i.clear(),N(n,Promise.all(t.map(function(r){r=m(r);var u=r.next().value,c=r.next().value;return xe(function(f){if(f.g==1)return ce(f,2),e.ia||e.A.has(u.sessionId)||c.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?N(f,J(u),5):N(f,u.remove(),5);if(f.g!=2)return de(f,0);Ce(f),X(f)})})),0)})}function ne(e,t){return e.length&&t.length&&e!==t?0<fe(e,t).length:!0}function fe(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.keySystem==c.keySystem){u=new Map;for(var f=m((r.initData||[]).concat(c.initData||[])),h=f.next();!h.done;h=f.next())h=h.value,u.set(h.keyId,h);u=Array.from(u.values()),f=r.keyIds&&c.keyIds?new Set([].concat(T(r.keyIds),T(c.keyIds))):r.keyIds||c.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||c.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||c.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||c.persistentStateRequired,videoRobustness:r.videoRobustness||c.videoRobustness,audioRobustness:r.audioRobustness||c.audioRobustness,serverCertificate:r.serverCertificate||c.serverCertificate,serverCertificateUri:r.serverCertificateUri||c.serverCertificateUri,initData:u,keyIds:f});break}}return n}function we(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Ee(e){e.i.forEach(function(t,n){var r=t.lf,u=n.expiration;isNaN(u)&&(u=1/0),u!=r&&(e.C.onExpirationUpdated(n.sessionId,u),t.lf=u)})}function ie(e){return e=e.i.values(),DE(e,function(t){return t.loaded})}function me(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.aa.get(n.value)!=="usable")return!1;return!0}function ge(e,t){var n=[];for(t.forEach(function(r,u){n.push({keySystem:u,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function He(e,t,n,r,u,c,f){var h=[],E={};e=m(e);for(var A=e.next();!A.done;E={la:E.la},A=e.next()){if(E.la=A.value,t.includes(E.la.encryptionScheme)||t.push(E.la.encryptionScheme),E.la.keySystem=="org.w3.clearkey"&&E.la.licenseServerUri.startsWith("data:application/json;base64,")?h.includes(E.la.licenseServerUri)||h.push(E.la.licenseServerUri):n.includes(E.la.licenseServerUri)||n.push(E.la.licenseServerUri),u.includes(E.la.serverCertificateUri)||u.push(E.la.serverCertificateUri),E.la.serverCertificate&&(r.some(function(te){return function(Y){return zi(Y,te.la.serverCertificate)}}(E))||r.push(E.la.serverCertificate)),E.la.initData){A={};for(var k=m(E.la.initData),G=k.next();!G.done;A={vd:A.vd},G=k.next())A.vd=G.value,c.some(function(te){return function(Y){var ve=te.vd;return Y.keyId&&Y.keyId==ve.keyId?!0:Y.initDataType==ve.initDataType&&zi(Y.initData,ve.initData)}}(A))||c.push(A.vd)}if(E.la.keyIds)for(A=m(E.la.keyIds),k=A.next();!k.done;k=A.next())f.add(k.value)}if(h.length==1)n.push(h[0]);else if(0<h.length){for(t=[],h=m(h),r=h.next();!r.done;r=h.next())r=p.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,T(r.keys));h=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+p.btoa(h))}}function Oe(e,t,n,r){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(u)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[u]&&(e.keySystem=r[u]),p.cast&&p.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Ze=1,$e=5,_e=.5,ke=new ra(function(){return Si(new Uint8Array([0]))});/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Ae(e,t,n){this.h=e,this.i=t,this.g=n}function Ge(e,t){return xe(function(n){return n.g==1?N(n,Z(e,t),2):n.return(le(e,t))})}function Z(e,t){return xe(function(n){if(n.g==1)return N(n,pm(e.g,t,e.h.drm.preferredKeySystems),2);if(!t.variants.some(Bf))throw new pt(2,4,4032);X(n)})}function le(e,t){var n=Ic(t.variants,e.h.restrictions,e.i);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var u=m(t.variants),c=u.next();!c.done;c=u.next())c=c.value,ae(e,r.keySystem,c.video),ae(e,r.keySystem,c.audio);se(e,t)}return n}function ae(e,t,n){if(n){n=m(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=m(r.initData||[]);for(var u=r.next();!u.done;u=r.next())u=u.value,Bl(e.g,u.initDataType,u.initData)}}}function se(e,t){e=e.g?e.g.Kd():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,u=!1,c=new Set,f=new Set;t=m(t.variants);for(var h=t.next();!h.done;h=t.next()){h=h.value;var E=[];h.audio&&E.push(h.audio),h.video&&E.push(h.video),E=m(E);for(var A=E.next();!A.done;A=E.next())if(A=A.value,A.keyIds.size){A=m(A.keyIds);for(var k=A.next();!k.done;k=A.next()){k=k.value;var G=e[n?"00":k];G?Q.includes(G)&&f.add(G):c.add(k)}}h.allowedByApplication?h.allowedByKeySystem&&(r=!0):u=!0}if(!r)throw e={hasAppRestrictions:u,missingKeys:Array.from(c),restrictedKeyStatuses:Array.from(f)},new pt(2,4,4012,e)}var Q=["output-restricted","internal-error"];function Pe(){}function be(e,t){if(t){var n=Fe[t.toLowerCase()];if(n)return n}throw new pt(2,4,4e3,e,t)}re("shaka.media.ManifestParser",Pe),Pe.unregisterParserByMime=function(e){delete Fe[e]},Pe.registerParserByMime=function(e,t){Fe[e]=t},Pe.registerParserByExtension=function(){dr("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Pe.AccessibilityPurpose={zj:"visually impaired",Ui:"hard of hearing"};var Fe={};function Ne(e){function t(){r=!0}function n(A){c.push(A),yr(A)}e=Qn(e);var r=!1,u,c=[],f=[];if(new Fr().box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).O("stsd",function(A){u=A,c.push(A),gu(A)}).O("encv",t).O("enca",t).O("dvav",function(A){f.push({box:A,Xa:1701733238})}).O("dva1",function(A){f.push({box:A,Xa:1701733238})}).O("dvh1",function(A){f.push({box:A,Xa:1701733238})}).O("dvhe",function(A){f.push({box:A,Xa:1701733238})}).O("hev1",function(A){f.push({box:A,Xa:1701733238})}).O("hvc1",function(A){f.push({box:A,Xa:1701733238})}).O("avc1",function(A){f.push({box:A,Xa:1701733238})}).O("avc3",function(A){f.push({box:A,Xa:1701733238})}).O("ac-3",function(A){f.push({box:A,Xa:1701733217})}).O("ec-3",function(A){f.push({box:A,Xa:1701733217})}).O("ac-4",function(A){f.push({box:A,Xa:1701733217})}).O("mp4a",function(A){f.push({box:A,Xa:1701733217})}).parse(e),r)return e;if(f.length==0||!u)throw Ps(e),new pt(2,3,3019);f.reverse();for(var h=m(f),E=h.next();!E.done;E=h.next())E=E.value,e=pe(e,u,E.box,c,E.Xa);return e}function pe(e,t,n,r,u){var c=Xe.value(),f=e.subarray(n.start,n.start+n.size),h=tn(f),E=new Uint8Array(n.size+c.byteLength);for(E.set(f,0),f=tn(E),f.setUint32(4,u),E.set(c,n.size),u=h.getUint32(4),f.setUint32(n.size+16,u),Me(E,0,E.byteLength),u=new Uint8Array(e.byteLength+E.byteLength),n=gs()?n.start:n.start+n.size,c=e.subarray(n),u.set(e.subarray(0,n)),u.set(E,n),u.set(c,n+E.byteLength),e=m(r),r=e.next();!r.done;r=e.next())r=r.value,Me(u,r.start,r.size+E.byteLength);return E=tn(u,t.start),t=Fl(t),e=E.getUint32(t),E.setUint32(t,e+1),u}function Me(e,t,n){e=tn(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var Xe=new ra(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function dt(e,t,n,r,u,c,f){this.$=e,this.Aa=t,this.ja=n,this.ff=r===void 0?null:r,this.timescale=u===void 0?null:u,this.g=c===void 0?null:c,this.aesKey=f===void 0?null:f,this.mimeType=this.codecs=null}dt.prototype.ac=function(){return this.Aa},dt.prototype.Yb=function(){return this.ja},dt.prototype.ed=function(){return this.g};function ut(e,t){return e===t?!0:e&&t?e.ac()==t.ac()&&e.Yb()==t.Yb()&&Zn(e.$().sort(),t.$().sort())&&zi(e.ed(),t.ed()):e==t}re("shaka.media.InitSegmentReference",dt),dt.prototype.getEndByte=dt.prototype.Yb,dt.prototype.getStartByte=dt.prototype.ac;function et(e,t,n,r,u,c,f,h,E,A,k,G,te,Y,ve,Le){for(A=A===void 0?[]:A,Y=Y===void 0?jt:Y,this.startTime=e,this.i=this.endTime=t,this.C=n,this.Aa=r,this.ja=u,this.ca=c,this.timestampOffset=f,this.appendWindowStart=h,this.appendWindowEnd=E,this.g=A,this.tilesLayout=k===void 0?"":k,this.A=G===void 0?null:G,this.h=te===void 0?null:te,this.status=Y,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=ve===void 0?null:ve,this.s=null,this.j=0,this.o=Le===void 0?!1:Le,this.Wd=this.md=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.ng();this.o&&this.g.length&&this.g[this.g.length-1].mg(),this.B=this.mimeType=this.codecs=null}g=et.prototype,g.$=function(){return this.C()},g.getStartTime=function(){return this.startTime},g.mh=function(){return this.endTime},g.ac=function(){return this.Aa},g.Yb=function(){return this.ja},g.Dh=function(){return this.tilesLayout},g.Ch=function(){return this.A},g.bc=function(){return this.status},g.Vh=function(){this.status=Ht},g.ef=function(){this.preload=!0},g.Ph=function(){return this.preload},g.Zd=function(){this.l=!1},g.Mh=function(){return this.l},g.ng=function(){this.md=!0},g.Oh=function(){return this.md},g.mg=function(){this.Wd=!0},g.Nh=function(){return this.Wd},g.lg=function(){this.m=!0},g.Jh=function(){return this.m},g.Eg=function(e){this.s=e},g.Bh=function(){return this.s},g.offset=function(e){this.startTime+=e,this.endTime+=e,this.i+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.i+=e},g.Ff=function(e){this.h==null?he("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},g.yi=function(e){this.B=e},g.ed=function(){return this.B};function ht(e,t){e.ca=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())ht(n.value,t)}re("shaka.media.SegmentReference",et),et.prototype.getSegmentData=et.prototype.ed,et.prototype.setSegmentData=et.prototype.yi,et.prototype.syncAgainst=et.prototype.Ff,et.prototype.offset=et.prototype.offset,et.prototype.getThumbnailSprite=et.prototype.Bh,et.prototype.setThumbnailSprite=et.prototype.Eg,et.prototype.hasByterangeOptimization=et.prototype.Jh,et.prototype.markAsByterangeOptimization=et.prototype.lg,et.prototype.isLastPartial=et.prototype.Nh,et.prototype.markAsLastPartial=et.prototype.mg,et.prototype.isPartial=et.prototype.Oh,et.prototype.markAsPartial=et.prototype.ng,et.prototype.isIndependent=et.prototype.Mh,et.prototype.markAsNonIndependent=et.prototype.Zd,et.prototype.isPreload=et.prototype.Ph,et.prototype.markAsPreload=et.prototype.ef,et.prototype.markAsUnavailable=et.prototype.Vh,et.prototype.getStatus=et.prototype.bc,et.prototype.getTileDuration=et.prototype.Ch,et.prototype.getTilesLayout=et.prototype.Dh,et.prototype.getEndByte=et.prototype.Yb,et.prototype.getStartByte=et.prototype.ac,et.prototype.getEndTime=et.prototype.mh,et.prototype.getStartTime=et.prototype.getStartTime,et.prototype.getUris=et.prototype.$;var jt=0,Ht=1;et.Status={Hi:jt,xj:Ht,$i:2};function kt(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ut(e,t){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function An(e,t){if(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=m(yt(e));for(var r=e.next();!r.done;r=e.next()){var u=r.value;r=u.start,u=u.end,u>t&&(n+=u-Math.max(r,t))}return n}function ot(e,t,n){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)?null:(e=yt(e).findIndex(function(r,u,c){return r.start>t&&(u==0||c[u-1].end-t<=n)}),0<=e?e:null)}function yt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function $t(){}function xt(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function en(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Jt(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function Wt(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=Vr(Qn(e.data,1,n)),u=e.data[2+n],c=e.data.subarray(3+n).indexOf(0);if(c===-1)return null;var f=Vr(Qn(e.data,3+n,c)),h;return r==="-->"?h=Vr(Qn(e.data,4+n+c)):h=Si(e.data.subarray(4+n+c)),t.mimeType=r,t.pictureType=u,t.description=f,t.data=h,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Vr(Qn(e.data,1,r)),e=Vr(Qn(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Vr(Qn(e.data,1,r)),e=Vr(Qn(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Vr(Qn(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Si(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Vr(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Vr(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Si(e.data),t):null}function Dn(e){for(var t=0,n=[];xt(e,t);){var r=Jt(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var u=e.subarray(t),c=Jt(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:c,data:u.subarray(10,10+c)},(c=Wt(u))&&n.push(c),t+=u.size+10}en(e,t)&&(t+=10)}return n}function Nn(e,t){for(var n=t=t===void 0?0:t,r=0;xt(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=Jt(e,t+6),en(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}re("shaka.util.Id3Utils",$t),$t.getID3Data=Nn,$t.getID3Frames=Dn;function rr(e,t){var n=null,r=null,u=null,c=e.M();return t&1&&(u=e.Cc()),t&2&&e.skip(4),t&8&&(n=e.M()),t&16&&(r=e.M()),{trackId:c,Wf:n,fh:r,Bj:u}}function ir(e,t){return t==1?(t=e.M(),e=e.M(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.M()}}function It(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.M(),e.skip(4),e=e.ra(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Xt(e,t,n){var r=e.M(),u=[],c=null;n&1&&(c=e.M()),n&4&&e.skip(4);for(var f=0;f<r;f++){var h={wf:null,sampleSize:null,he:null};n&256&&(h.wf=e.M()),n&512&&(h.sampleSize=e.M()),n&1024&&e.skip(4),n&2048&&(h.he=t==0?e.M():e.sg()),u.push(h)}return{Fj:r,vg:u,eh:c}}function Gt(e,t){t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.M();return t==1?e.skip(8):e.skip(4),e.skip(4),e.skip(8),e.skip(2),e.skip(2),e.skip(2),e.skip(2),e.skip(36),t=e.ra()+e.ra()/16,e=e.ra()+e.ra()/16,{trackId:n,width:t,height:e}}function un(e){return e=e.M(),{Ea:Vf(e)}}function vn(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Pn(e){return(10>e?"0":"")+e}function xn(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=Qn(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Fn(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new Dr(n,0).M(),e.g=8*r,e.i-=r)}function Gn(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Fn(e)}e.h<<=t,e.g-=t}function bt(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Fn(e),n=t-n,0<n?r<<n|bt(e,n):r}function Sn(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Fn(e),t+Sn(e)}function En(e){Gn(e,1+Sn(e))}function Lt(e){var t=Sn(e);return bt(e,t+1)-1}function On(e){return e=Lt(e),1&e?1+e>>>1:-1*(e>>>1)}function lt(e){return bt(e,1)===1}function rt(e){return bt(e,8)}function Kt(e,t){for(var n=8,r=8,u=0;u<t;u++)r!==0&&(r=On(e),r=(n+r+256)%256),n=r===0?n:r}function ze(e){return rt(e),Lt(e),Lt(e)}re("shaka.util.ExpGolomb",xn);function Ve(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}g=Ve.prototype,g.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},g.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Ii(e)),n=e.length-(e.length+t)%188,r=!1,u=t;u<n;u+=188)if(e[u]==71){var c=!!(e[u+1]&64),f=((e[u+1]&31)<<8)+e[u+2];if(1<(e[u+3]&48)>>4){var h=u+5+e[u+4];if(h==u+188)continue}else h=u+4;switch(f){case 0:c&&(h+=e[h]+1),this.G=(e[h+10]&31)<<8|e[h+11];break;case 17:case 8191:break;case this.G:c&&(h+=e[h]+1),c=e,f={audio:-1,video:-1,Sd:-1,audioCodec:"",videoCodec:""};var E=h+3+((c[h+1]&15)<<8|c[h+2])-4;for(h+=12+((c[h+10]&15)<<8|c[h+11]);h<E;){var A=(c[h+1]&31)<<8|c[h+2],k=(c[h+3]&15)<<8|c[h+4];switch(c[h]){case 6:if(0<k)for(var G=h+5,te=k;2<te;){var Y=c[G+1]+2;switch(c[G]){case 5:var ve=Ch(c.subarray(G+2,G+Y));f.audio==-1&&ve==="Opus"?(f.audio=A,f.audioCodec="opus"):f.video==-1&&ve==="AV01"&&(f.video=A,f.videoCodec="av1");break;case 106:f.audio==-1&&(f.audio=A,f.audioCodec="ac3");break;case 122:f.audio==-1&&(f.audio=A,f.audioCodec="ec3");break;case 124:f.audio==-1&&(f.audio=A,f.audioCodec="aac");break;case 127:f.audioCodec=="opus"&&(ve=null,c[G+2]===128&&(ve=c[G+3]),ve!=null&&(this.F={channelCount:ve&15?ve&15:2,Zg:ve,sampleRate:48e3}))}G+=Y,te-=Y}break;case 15:f.audio==-1&&(f.audio=A,f.audioCodec="aac");break;case 17:f.audio==-1&&(f.audio=A,f.audioCodec="aac-loas");break;case 21:f.Sd==-1&&(f.Sd=A);break;case 27:f.video==-1&&(f.video=A,f.videoCodec="avc");break;case 3:case 4:f.audio==-1&&(f.audio=A,f.audioCodec="mp3");break;case 36:f.video==-1&&(f.video=A,f.videoCodec="hvc");break;case 129:f.audio==-1&&(f.audio=A,f.audioCodec="ac3");break;case 132:case 135:f.audio==-1&&(f.audio=A,f.audioCodec="ec3")}h+=k+5}c=f,c.video!=-1&&(this.I=c.video,this.m=c.videoCodec),c.audio!=-1&&(this.B=c.audio,this.A=c.audioCodec),c.Sd!=-1&&(this.C=c.Sd),r&&!this.H&&(r=!1,u=t-188),this.H=!0;break;case this.I:h=e.subarray(h,u+188),c?this.j.push([h]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(h);break;case this.B:h=e.subarray(h,u+188),c?this.i.push([h]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(h);break;case this.C:h=e.subarray(h,u+188),c?this.l.push([h]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(h);break;default:r=!0}}return this};function Dt(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var u=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=u),n.pts=sr(u,e.s),e.s=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=sr(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}g.ai=function(e){return dr("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.qf(e)},g.qf=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var u=e.byteLength,c=1;this.m=="hvc"&&(c=2);for(var f=n||0,h=[],E=-1,A=0,k,G=0;G<u;++G){var te=e[G];if(te){if(2<=f&&te==1){if(t&&!h.length&&E==-1&&(te=G-(3<f?3:f),n&&te!=0&&(te=e.subarray(0,te),t.data=li(t.data,te),t.fullData=li(t.fullData,te))),0<=E?(f=G-((3<f?3:f)+1),h.push({data:e.subarray(E+c,f+1),fullData:e.subarray(E,f+1),type:A,time:r})):t&&!h.length&&(E=G-f,0<E&&(E=e.subarray(0,E),t.data=li(t.data,E),t.fullData=li(t.fullData,E))),G>=u-c)return h;G++,E=G,A=this.m=="hvc"?e[G]>>1&63:e[G]&31}f=0}else f++;G>=u-1&&0<=E&&0<=f&&(k={data:e.subarray(E+c,u),fullData:e.subarray(E,u),type:A,time:r})}return k&&h.push(k),!h.length&&t&&(t.data=li(t.data,e),t.fullData=li(t.fullData,e)),h},g.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=li.apply(Oi,T(n.value)),(n=Dt(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Dn(n.data),dts:n.dts,pts:n.pts});return e},g.Fb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=m(this.i),n=t.next();!n.done;n=t.next()){var r=li.apply(Oi,T(n.value)),u=Dt(this,r);n=this.h.length?this.h[this.h.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!n||n.pts!=u.pts&&n.dts!=u.dts)?(this.h.length&&u.dts<(n.dts||0)&&(e=!0),this.h.push(u)):this.h.length&&(r=u?u.data:r)&&(n=this.h.pop(),n.data=li(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(c,f){var h=(c.pts||0)-(f.pts||0);return(c.dts||0)-(f.dts||0)||h}))}return this.h},g.xc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=m(this.j),r=n.next();!r.done;r=n.next()){var u=li.apply(Oi,T(r.value)),c=Dt(this,u);r=this.g.length?this.g[this.g.length-1]:null,c&&c.pts!=null&&c.dts!=null&&(!r||r.pts!=c.pts&&r.dts!=c.dts)?(this.g.length&&c.dts<(r.dts||0)&&(t=!0),this.g.push(c)):this.g.length&&(u=c?c.data:u)&&(r=this.g.pop(),r.data=li(r.data,u),this.g.push(r))}if(e){var f;for(n=m(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.nalus=this.qf(r,f,void 0),r.nalus.length&&(f=r.nalus[r.nalus.length-1]);this.g=this.g.filter(function(h){return h.nalus.length})}t&&(this.g=this.g.sort(function(h,E){var A=(h.pts||0)-(E.pts||0);return(h.dts||0)-(E.dts||0)||A}))}return e?this.g:(e=this.g,this.g=[],e)},g.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Fb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.xc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},g.bd=function(){return{audio:this.A,video:this.m}},g.Od=function(){for(var e=[],t=m(this.xc()),n=t.next();!n.done;n=t.next())e.push.apply(e,T(n.value.nalus));return e},g.Gh=function(){dr("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.We();return{height:e.height,width:e.width}},g.We=function(){return this.m=="hvc"?Tn(this):fn(this)};function fn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(te){return te.type==7}),!e))return t;e=new xn(e.data);var n=rt(e),r=rt(e),u=rt(e);if(En(e),zr.includes(n)){var c=Lt(e);if(c===3&&Gn(e,1),En(e),En(e),Gn(e,1),lt(e)){c=c!==3?8:12;for(var f=0;f<c;f++)lt(e)&&(6>f?Kt(e,16):Kt(e,64))}}if(En(e),c=Lt(e),c===0)Lt(e);else if(c===1)for(Gn(e,1),En(e),En(e),c=Lt(e),f=0;f<c;f++)En(e);En(e),Gn(e,1),c=Lt(e),f=Lt(e);var h=bt(e,1);h===0&&Gn(e,1),Gn(e,1);var E=0,A=0,k=0,G=0;return lt(e)&&(E=Lt(e),A=Lt(e),k=Lt(e),G=Lt(e)),t.height=String((2-h)*(f+1)*16-2*k-2*G),t.width=String(16*(c+1)-2*E-2*A),t.Ea="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2),t}function Tn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(Ue){return Ue.type==33}),!e))return t;var n=new xn(e.fullData,!0);rt(n),rt(n),bt(n,4);var r=bt(n,3);lt(n);var u=bt(n,2),c=bt(n,1),f=bt(n,5),h=bt(n,32);e=rt(n);for(var E=rt(n),A=rt(n),k=rt(n),G=rt(n),te=rt(n),Y=rt(n),ve=[],Le=[],De=0;De<r;De++)ve.push(lt(n)),Le.push(lt(n));if(0<r)for(De=r;8>De;De++)bt(n,2);for(De=0;De<r;De++)ve[De]&&bt(n,88),Le[De]&&rt(n);Lt(n),r=Lt(n),r==3&&bt(n,1),ve=Lt(n),Le=Lt(n);var qe=De=0,Se=0,Qe=0;return lt(n)&&(De+=Lt(n),qe+=Lt(n),Se+=Lt(n),Qe+=Lt(n)),t.width=String(ve-(De+qe)*(r===1||r===2?2:1)),t.height=String(Le-(Se+Qe)*(r===1?2:1)),n=function(Ue){for(var vt=0,Nt=0;32>Nt;Nt++)vt|=(Ue>>Nt&1)<<31-Nt;return vt>>>0}(h),c=c==1?"H":"L",u="hvc1"+("."+["","A","B","C"][u]+f),u+="."+n.toString(16).toUpperCase(),u+="."+c+Y,te&&(u+="."+te.toString(16).toUpperCase()),G&&(u+="."+G.toString(16).toUpperCase()),k&&(u+="."+k.toString(16).toUpperCase()),A&&(u+="."+A.toString(16).toUpperCase()),E&&(u+="."+E.toString(16).toUpperCase()),e&&(u+="."+e.toString(16).toUpperCase()),t.Ea=u,t}function sr(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Zr(e){return!(0>Ii(e))}function Ii(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}re("shaka.util.TsParser",Ve),Ve.syncOffset=Ii,Ve.probe=Zr,Ve.prototype.getVideoInfo=Ve.prototype.We,Ve.prototype.getVideoResolution=Ve.prototype.Gh,Ve.prototype.getVideoNalus=Ve.prototype.Od,Ve.prototype.getCodecs=Ve.prototype.bd,Ve.prototype.getStartTime=Ve.prototype.getStartTime,Ve.prototype.getVideoData=Ve.prototype.xc,Ve.prototype.getAudioData=Ve.prototype.Fb,Ve.prototype.getMetadata=Ve.prototype.getMetadata,Ve.prototype.parseNalus=Ve.prototype.qf,Ve.prototype.parseAvcNalus=Ve.prototype.ai,Ve.prototype.parse=Ve.prototype.parse,Ve.prototype.clearData=Ve.prototype.clearData,Ve.Timescale=9e4;var zr=[100,110,122,244,44,83,86,118,128,138,139,134];function io(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&Ke("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,dr("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Ke("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(Ke("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Ke(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Zi(e){e.g&&e.i.classList.add("shaka-hidden")}io.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Bs(e,t,n){var r=Qu,u=yu;switch(t.mimeType){case"video/webm":r=Ju;break;case"video/mp4":r=Xa}switch(n){case"DASH":u=Po;break;case"HLS":u=js}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(u))}re("shaka.lcevc.Dec",io),io.prototype.release=io.prototype.release;var Qu=0,Ju=1,Xa=2,js=0,Po=1,yu=-1;function Eu(e,t,n,r){var u=this;this.i=e,this.A=null,this.F=t,this.h={},this.G={},this.qa={},this.g=null,this.ba=!1,this.ta=n||function(){},this.T=r||null,this.j={},this.o=new Tt,this.m={},this.H=null,this.L=new Rr,this.N="",this.da=!1,this.l=ca(this,this.L),this.C=!1,this.I=new Wu(function(){return Qf(u)}),this.B=!1,this.aa="UNKNOWN",this.pa=this.sa=!1,this.ia=new Rr,this.s=!1,this.ea=!0,this.K=this.Y=null}function ca(e,t){if(p.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.o.D(n,"startstreaming",function(){e.ea=!0}),e.o.D(n,"endstreaming",function(){e.ea=!1}),e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=qm(n),e.i.src=e.N,n}return n=new MediaSource,e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=qm(n),e.i.src=e.N,n}function jc(e,t){var n,r,u,c,f,h,E,A,k,G,te;return xe(function(Y){if(Y.g==1)return e.createSegmentIndex?N(Y,e.createSegmentIndex(),2):Y.u(2);if(!e.segmentIndex)return Y.return(!1);if(e.segmentIndex.getNumReferences()==0)return Y.return(!0);for(n=Ei,r=new Set,u=m(e.segmentIndex),c=u.next();!c.done;c=u.next())if(f=c.value,h=f.mimeType||e.mimeType||"",E=f.codecs||e.codecs||"",A=h+":"+E,!r.has(A)){if(r.add(A),t==n.ma){if(k=wi(h,E),!Cl(k))return Y.return(!1)}else if(t==n.fa?E=Nl(E):t==n.S&&(E=Hu(E)),G=sm(e,h,E),te=Uu(h,E),!Ot(G)&&!ro(te))return Y.return(!1)}return Y.return(!0)})}g=Eu.prototype,g.destroy=function(){return this.I.destroy()};function Qf(e){var t,n,r,u,c,f,h,E;return xe(function(A){if(A.g==1){t=[];for(n in e.j)for(r=e.j[n],u=r[0],e.j[n]=r.slice(0,1),u&&t.push(u.p.catch(fm)),c=m(r.slice(1)),f=c.next();!f.done;f=c.next())h=f.value,h.p.reject(new pt(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(E in e.m)t.push(e.m[E].destroy());return N(A,Promise.all(t),2)}e.o&&(e.o.release(),e.o=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.l=null,e.g=null,e.F=null,e.h={},e.m={},e.H=null,e.j={},e.T=null,e.K=null,X(A)})}g.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var u=this,c,f,h,E,A;return xe(function(k){switch(k.g){case 1:return c=Ei,N(k,u.L,2);case 2:u.B=t,u.aa=n,u.sa=r,u.pa=!u.B&&u.aa=="HLS"&&!u.sa,u.K=null,f=m(e.keys()),h=f.next();case 3:if(h.done){k.u(0);break}return E=h.value,A=e.get(E),N(k,el(u,E,A,A.codecs),6);case 6:u.s?(u.j[c.S]=[],u.j[c.fa]=[]):u.j[E]=[],h=f.next(),k.u(3)}})};function el(e,t,n,r){var u,c,f,h,E,A,k,G,te,Y,ve,Le;return xe(function(De){switch(De.g){case 1:return u=Ei,c=Be,f=O,N(De,jc(n,t),2);case 2:if(f.call(c,De.h,"Type negotiation should happen before MediaSourceEngine.init!"),h=wi(n.mimeType,r),t==u.ma){Qa(e,h,e.B,n.external),De.u(0);break}if(E=e.A.forceTransmux,(!Ot(h)||!e.B&&du.includes(h))&&(E=!0),A=Uu(n.mimeType,r),!E){De.u(4);break}if(k=Co(u.S,(r||"").split(",")),G=Co(u.fa,(r||"").split(",")),!k||!G){De.u(5);break}return e.s=!0,N(De,el(e,u.S,n,k),6);case 6:return N(De,el(e,u.fa,n,G),7);case 7:return De.return();case 5:(te=ro(A))&&(Y=te(),e.m[t]=Y,h=Y.convertCodecs(t,A));case 4:ve=h+e.A.addExtraFeaturesToSourceBuffer(h),jr(e.I);try{Le=e.l.addSourceBuffer(ve)}catch(qe){throw new pt(2,3,3015,qe,"The mediaSource_ status was "+e.l.readyState+" expected 'open'")}e.B&&(Le.mode=UB),e.o.D(Le,"error",function(){e.j[t][0].p.reject(new pt(2,3,3014,e.i.error?e.i.error.code:0))}),e.o.D(Le,"updateend",function(){return tl(e,t)}),e.h[t]=Le,e.G[t]=h,e.qa[t]=!!n.drmInfos.length,X(De)}})}g.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function Qa(e,t,n,r){e.g||(e.g=new Ls(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var u=e.g;r=r||e.ba,e=e.aa,t=="application/cea-608"||t=="application/cea-708"?u.i=null:(u.i=(0,ji[t])(),u.i.setSequenceMode?u.i.setSequenceMode(n):dr("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):dr("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.B=r)}function Zc(e){return e.C?!1:e.l?e.l.readyState=="ended":!0}function Zs(e,t){return e.C||!Object.keys(e.h).length?e=null:t==vr?e=e.g.g:(e=Hn(e,t),e=!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function Pt(e,t){return e.C?null:t==vr?e.g.h:kt(Hn(e,t))}function yn(e,t,n){return e.C?0:t==vr?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Hn(e,t),An(e,n))}g.ob=function(){var e={total:this.C?[]:yt(this.i.buffered),audio:this.C?[]:yt(Hn(this,"audio")),video:this.C?[]:yt(Hn(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Hn(e,t){try{return e.h[t].buffered}catch(n){return null}}function ur(e,t,n,r,u,c){var f=null,h=Qn(n);if(du.includes(u))c=Dn(h),c.length&&r&&((t=c.find(function(G){return G.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(f=Math.round(t.data)/1e3),e.ta([{cueTime:r.startTime,data:h,frames:c,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(u.includes("/mp4")&&r&&r.timestampOffset==0&&r.ca&&r.ca.timescale){var E=r.ca.timescale;if(!isNaN(E)){var A=0,k=!1;new Fr().box("moof",yr).box("traf",yr).O("tfdt",function(G){A=ir(G.reader,G.version).baseMediaDecodeTime/E,k=!0,G.parser.stop()}).parse(n,!0),k&&(f=A)}}else u.includes("/mp4")||u.includes("/webm")||!Zr(h)||(e.K?e.K.clearData():e.K=new Ve,h=e.K.parse(h),t=h.getStartTime(t),t!=null&&(f=t),h=h.getMetadata(),h.length&&e.ta(h,c,r?r.endTime:null));return f}function Tr(e,t,n,r,u,c,f,h,E,A){f=f===void 0?!1:f,h=h===void 0?!1:h,E=E===void 0?!1:E,A=A===void 0?!1:A;var k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue;return xe(function(vt){switch(vt.g){case 1:if(k=Ei,t!=k.ma){vt.u(2);break}if(!e.B){vt.u(3);break}return N(vt,e.ia,4);case 4:G=vt.h,e.g.s=G;case 3:return N(vt,TE(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.$()[0]:null),5);case 5:return vt.return();case 2:if(A||!e.s){vt.u(6);break}return N(vt,Tr(e,k.S,n,r,u,c,f,h,E,!0),7);case 7:return N(vt,Tr(e,k.fa,n,r,u,c,f,h,E,!0),8);case 8:return vt.return();case 6:if(!e.h[t])return vt.return();if(te=e.h[t].timestampOffset,Y=e.G[t],e.m[t]&&(Y=e.m[t].getOriginalMimeType()),r&&(ve=ur(e,t,n,r,Y,te),ve!=null&&(Le=r.startTime-ve,De=Math.abs(te-Le),(.001<=De||f||h)&&(!E||0<Le||!te)&&(te=Le,e.pa&&($i(e,t,function(){return Jf(e,t)}),$i(e,t,function(){return ed(e,t,te)}))),qe=t==k.fa||!(k.fa in e.h),e.B&&qe&&e.ia.resolve(te))),c&&t==k.fa&&(e.g||Qa(e,"application/cea-608",e.B,!1),e.H||(Se=Y.split(";",1)[0],e.H=new At(Se)),r?(Qe=e.H.i(n),Qe.length&&Of(e.g,Qe,r.startTime,r.endTime,te)):e.H.init(n)),!e.m[t]){vt.u(9);break}return N(vt,e.m[t].transmux(n,u,r,e.l.duration,t),10);case 10:n=vt.h;case 9:return n=PB(e,n,r?r.startTime:null,t),r&&e.B&&t!=k.ma&&(f||h)&&(Ue=r.startTime,$i(e,t,function(){return Jf(e,t)}),$i(e,t,function(){return ed(e,t,Ue)})),N(vt,$i(e,t,function(){var Nt=n;if(t=="video"&&e.T){var Vt=e.T;Vt.g&&Vt.g.appendBuffer(Nt,"video",Vt.o,-te)}e.h[t].appendBuffer(Nt)}),11);case 11:X(vt)}})}function Ir(e,t){var n=Pt(e,"video")||0;Pf(e.g,t,n)}function fr(e){e.g&&Pf(e.g,"",0)}g.remove=function(e,t,n){var r=this,u;return xe(function(c){return c.g==1?(u=Ei,e==u.ma?N(c,r.g.remove(t,n),0):N(c,$i(r,e,function(){return qs(r,e,t,n)}),4)):r.s?N(c,$i(r,u.S,function(){return qs(r,u.S,t,n)}),0):c.u(0)})};function ri(e,t){var n;return xe(function(r){return r.g==1?(n=Ei,t==n.ma?e.g?N(r,e.g.remove(0,1/0),0):r.return():N(r,$i(e,t,function(){return qs(e,t,0,e.l.duration)}),4)):e.s?N(r,$i(e,n.S,function(){return qs(e,n.S,0,e.l.duration)}),0):r.u(0)})}g.flush=function(e){var t=this,n;return xe(function(r){return r.g==1?(n=Ei,e==n.ma?r.return():N(r,$i(t,e,function(){t.i.currentTime-=.001,tl(t,e)}),2)):t.s?N(r,$i(t,n.S,function(){var u=n.S;t.i.currentTime-=.001,tl(t,u)}),0):r.u(0)})};function Qr(e,t,n,r,u,c,f,h,E){var A,k,G;return xe(function(te){return te.g==1?(A=Ei,t==A.ma?(c||(e.g.s=n),Dh(e.g,r,u),te.return()):(k=[],N(te,kB(e,t,f,h,E),2))):(G=te.h,G||(k.push($i(e,t,function(){return Jf(e,t)})),e.s&&k.push($i(e,A.S,function(){return Jf(e,A.S)}))),c||(k.push($i(e,t,function(){return ed(e,t,n)})),e.s&&k.push($i(e,A.S,function(){return ed(e,A.S,n)}))),k.push($i(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=u,e.h[t].appendWindowStart=r,tl(e,t)})),e.s&&k.push($i(e,A.S,function(){var Y=A.S;e.h[Y].appendWindowStart=0,e.h[Y].appendWindowEnd=u,e.h[Y].appendWindowStart=r,tl(e,Y)})),N(te,Promise.all(k),0))})}function Gs(e,t,n){var r;return xe(function(u){return u.g==1?(r=Ei,t==r.ma?u.return():(t==r.fa&&(e.ia=new Rr),$i(e,t,function(){return Jf(e,t)}),e.s&&$i(e,r.S,function(){return Jf(e,r.S)}),N(u,$i(e,t,function(){return ed(e,t,n)}),2))):e.s?N(u,$i(e,r.S,function(){return ed(e,r.S,n)}),0):u.u(0)})}g.endOfStream=function(e){var t=this;return xe(function(n){return N(n,ZE(t,function(){Zc(t)||t.l.readyState==="closed"||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},g.Za=function(e){var t=this;return xe(function(n){return N(n,ZE(t,function(){if(e<t.l.duration)for(var r in t.h){var u={start:function(){},p:new Rr};t.j[r].unshift(u)}t.l.duration=e,t.Y=e}),0)})},g.getDuration=function(){return this.l.duration};function qs(e,t,n,r){r<=n?tl(e,t):e.h[t].remove(n,r)}function Jf(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,tl(e,t)}function ed(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,tl(e,t)}function tl(e,t){if(!e.C){var n=e.j[t][0];n&&(n.p.resolve(),GE(e,t))}}function $i(e,t,n){return jr(e.I),n={start:n,p:new Rr},e.j[t].push(n),e.j[t].length==1&&$C(e,t),n.p}function ZE(e,t){var n,r,u,c,f,h,E;return xe(function(A){switch(A.g){case 1:jr(e.I),n=[],r={};for(u in e.h)r.Mc=new Rr,c={start:function(k){return function(){return k.Mc.resolve()}}(r),p:r.Mc},e.j[u].push(c),n.push(r.Mc),e.j[u].length==1&&c.start(),r={Mc:r.Mc};return ce(A,2),N(A,Promise.all(n),4);case 4:de(A,3);break;case 2:throw f=Ce(A),f;case 3:return ce(A,5,6),N(A,t(),6);case 6:Je(A);for(h in e.h)GE(e,h);Te(A,0);break;case 5:throw E=Ce(A),new pt(2,3,3015,E,e.i.error||"No error in the media element")}})}function GE(e,t){e.j[t].shift(),$C(e,t)}function $C(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new pt(2,3,3017,t)):n.p.reject(new pt(2,3,3015,r,e.i.error||"No error in the media element")),GE(e,t)}}function PB(e,t,n,r){var u=e.qa[r];return e.A.insertFakeEncryptionInInit&&n==null&&u&&(qa()||gs()||Yr("SOPOpenBrowser"))&&Df(e.G[r])=="mp4"&&(t=Ne(t)),t}function OB(e,t,n,r){return $i(e,t,function(){t!==vr&&(Un()&&(e.m[t]&&(e.m[t].destroy(),delete e.m[t]),r&&(e.m[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),tl(e,t))})}function LB(e,t){var n,r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue,vt,Nt,Vt,Bt,_t;return xe(function(Zt){switch(Zt.g){case 1:n=Ei,e.C=!0,e.s=!1,r=e.i.currentTime,u=e.i.autoplay,c=e.i.paused,e.da&&(e.i.autoplay=!1),oe(Zt,2),e.o.ib(),f=[];for(h in e.m)f.push(e.m[h].destroy());for(E in e.j)for(A=e.j[E],k=A[0],e.j[E]=A.slice(0,1),k&&f.push(k.p.catch(fm)),G=m(A.slice(1)),te=G.next();!te.done;te=G.next())Y=te.value,Y.p.reject(new pt(2,7,7003,void 0));for(ve in e.h){Le=e.h[ve];try{e.l.removeSourceBuffer(Le)}catch(ln){}}return N(Zt,Promise.all(f),4);case 4:return e.m={},e.h={},De=e.l.duration,e.L=new Rr,e.l=ca(e,e.L),N(Zt,e.L,5);case 5:!isNaN(De)&&De?e.l.duration=De:!isNaN(e.Y)&&e.Y&&(e.l.duration=e.Y),qe=new Rr,Se=e.l.sourceBuffers,Qe=t.size,Ue=0,vt=function(){Ue++,Ue===Qe&&(qe.resolve(),e.o.Kb(Se,"addsourcebuffer",vt))},e.o.D(Se,"addsourcebuffer",vt),Nt=m(t.keys()),Vt=Nt.next();case 6:return Vt.done?(e.i.currentTime=r,N(Zt,qe,2)):(Bt=Vt.value,_t=t.get(Bt),N(Zt,el(e,Bt,_t,_t.codecs),9));case 9:e.s?(e.j[n.S]=[],e.j[n.fa]=[]):e.j[Bt]=[],Vt=Nt.next(),Zt.u(6);break;case 2:Je(Zt),e.C=!1,jr(e.I),e.o.na(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=u,c||e.i.play())}),Te(Zt,0)}})}function XC(e,t){return ZE(e,function(){return LB(e,t)})}function kB(e,t,n,r,u){var c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe;return xe(function(Ue){return Ue.g==1?(c=Ei,t==c.ma||(f=za(Do(e.G[t])),h=ba(e.G[t]),A=!1,k=wi(n,r),G=e.A.forceTransmux,(!Ot(k)||!e.B&&du.includes(k))&&(G=!0),G&&(te=Uu(n,r),Y=ro(te))&&(E=Y(),ve=Co(c.S,(r||"").split(",")),Le=Co(c.fa,(r||"").split(",")),ve&&Le?(A=!0,De=Le,t==c.S&&(De=ve),k=E.convertCodecs(t,Uu(n,De))):k=E.convertCodecs(t,te)),qe=za(Do(k)),Se=ba(k),f===qe&&h===Se)?Ue.return(!1):(Qe=!0,(e.s||A&&E&&!e.m[t])&&(Qe=!1),Qe&&e.A.codecSwitchingStrategy==="smooth"&&Un()?N(Ue,OB(e,t,k,E),3):(E&&E.destroy(),N(Ue,XC(e,u),3)))):Ue.return(!0)})}function FB(e,t,n,r){if(t==vr)var u=!1;else{u=za(Do(e.G[t]));var c=ba(e.G[t]),f=wi(n,r),h=e.A.forceTransmux;(!Ot(f)||!e.B&&du.includes(f))&&(h=!0),n=Uu(n,r),h&&(h=ro(n))&&(h=h(),f=h.convertCodecs(t,n),h.destroy()),t=za(Do(f)),f=ba(f),u=u!==t||c!==f}return u?e.A.codecSwitchingStrategy!=="smooth"||!Un()||e.s:!1}var qm=p.URL.createObjectURL,UB="sequence";function tr(e,t,n){this.i=e,this.s=t,this.m=this.j=1/0,this.g=1,this.h=this.l=null,this.A=0,this.F=!0,this.G=0,this.C=n===void 0?!0:n,this.H=0,this.o=!1,this.B=null}g=tr.prototype,g.getDuration=function(){return this.j},g.sh=function(){return this.g},g.Cg=function(e){this.i=e},g.Za=function(e){this.j=e},g.wh=function(){return this.i},g.Ag=function(e){this.A=e},g.Ec=function(e){this.F=e},g.je=function(e){this.m=e},g.Nd=function(){return this.m},g.Bf=function(e){this.s=e},g.lh=function(){return this.s},g.qg=function(e,t){if(e.length!=0){var n=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(r,u){return Math.max(r,u.end-u.start)},this.g),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=(Date.now()+this.A)/1e3-this.h-this.g)}},g.ld=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.A)/1e3;e=m(e);for(var u=e.next();!u.done;u=e.next())u=u.value,r<u.startTime||(t=Math.min(t,u.startTime),n=Math.max(n,u.endTime),this.g=Math.max(this.g,u.endTime-u.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=r-this.h-this.g)}},g.Xd=function(){this.o=!0},g.Qh=function(){return this.o},g.Bg=function(e){this.B=e},g.ph=function(){return this.B},g.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},g.hf=function(e){this.g=Math.max(this.g,e)},g.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},g.R=function(){return this.j==1/0&&!this.F},g.dc=function(){return this.j!=1/0&&!this.F},g.qb=function(){return Math.max(this.G,this.Gb()-this.m)},g.Gg=function(e){this.G=e},g.Gb=function(){return this.R()||this.dc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.g-this.i)+this.H,this.j):this.h?Math.min(this.h,this.j):this.j},g.dd=function(e){var t=Math.max(this.l,this.G);return this.m==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Gb()-this.m+e,this.pb()))},g.$b=function(){return this.dd(0)},g.pb=function(){return Math.max(0,this.Gb()-(this.R()||this.dc()?this.s:0))},g.Kg=function(){return!(this.i==null||this.h!=null&&this.C)},g.zg=function(e){this.H=e},re("shaka.media.PresentationTimeline",tr),tr.prototype.setAvailabilityTimeOffset=tr.prototype.zg,tr.prototype.usingPresentationStartTime=tr.prototype.Kg,tr.prototype.getSeekRangeEnd=tr.prototype.pb,tr.prototype.getSeekRangeStart=tr.prototype.$b,tr.prototype.getSafeSeekRangeStart=tr.prototype.dd,tr.prototype.getSegmentAvailabilityEnd=tr.prototype.Gb,tr.prototype.setUserSeekStart=tr.prototype.Gg,tr.prototype.getSegmentAvailabilityStart=tr.prototype.qb,tr.prototype.isInProgress=tr.prototype.dc,tr.prototype.isLive=tr.prototype.R,tr.prototype.offset=tr.prototype.offset,tr.prototype.notifyMaxSegmentDuration=tr.prototype.hf,tr.prototype.notifyMinSegmentStartTime=tr.prototype.ce,tr.prototype.getInitialProgramDateTime=tr.prototype.ph,tr.prototype.setInitialProgramDateTime=tr.prototype.Bg,tr.prototype.isStartTimeLocked=tr.prototype.Qh,tr.prototype.lockStartTime=tr.prototype.Xd,tr.prototype.notifySegments=tr.prototype.ld,tr.prototype.notifyTimeRange=tr.prototype.qg,tr.prototype.getDelay=tr.prototype.lh,tr.prototype.setDelay=tr.prototype.Bf,tr.prototype.getSegmentAvailabilityDuration=tr.prototype.Nd,tr.prototype.setSegmentAvailabilityDuration=tr.prototype.je,tr.prototype.setStatic=tr.prototype.Ec,tr.prototype.setClockOffset=tr.prototype.Ag,tr.prototype.getPresentationStartTime=tr.prototype.wh,tr.prototype.setDuration=tr.prototype.Za,tr.prototype.setPresentationStartTime=tr.prototype.Cg,tr.prototype.getMaxSegmentDuration=tr.prototype.sh,tr.prototype.getDuration=tr.prototype.getDuration;function QC(e,t,n){this.j=n,this.l=e,this.s=JC(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}QC.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function BB(e,t){e.i=t}function jB(e){this.g=e}function JC(e){if(e.g.paused||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(yt(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function qE(e,t,n,r,u){var c=this;this.A=u,this.g=e,this.B=t,this.s=n,this.l=new Tt,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.o=!1,this.l.D(e,"waiting",function(){return HE(c)}),this.m=new pr(function(){HE(c)}).$a(this.s.gapJumpTimerTime)}qE.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},qE.prototype.mf=function(){this.o=!0,HE(this)};function HE(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,r=JC(n),u=n.g.currentTime,c=Date.now()/1e3;(t.g!=u||t.s!=r)&&(t.m=c,t.g=u,t.s=r,t.h=!1),u=c-t.m,(r=u>=t.A&&r&&!t.h)&&(t.i(t.g,u),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new Wn("stalldetected"))),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=ot(n,t,e.s.gapDetectionThreshold),r==null||r==0&&!e.o||(u=n.start(r),u>=e.B.pb()||.001>u-t||(r!=0&&n.end(r-1),e.g.currentTime=u,t==e.i&&(e.i=u),e.C++,e.A(new Wn("gapjumped")))))}}}function td(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=ZB.value().get(t),n.na(e,t,r))}var ZB=new ra(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function eR(e,t,n,r){var u=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return u.l==null&&(u.l=r()),u.l},this.o=!1,this.h=new Tt,this.i=new iR(e),td(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){nR(u,u.j())})}eR.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function KE(e){return e.o?e.g.currentTime:e.j()}function tR(e,t){0<e.g.readyState?oR(e.i,t):td(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){nR(e,e.j())})}function nR(e,t){.001>Math.abs(e.g.currentTime-t)?rR(e):(e.h.na(e.g,"seeking",function(){rR(e)}),oR(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function rR(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function iR(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new pr(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}iR.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function oR(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.$a(.1)}function aR(e){this.g=e,this.j=!1,this.h=null,this.i=new Tt}g=aR.prototype,g.ve=function(){function e(){t.h==null||t.h==0?t.j=!0:(t.i.na(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;td(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},g.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},g.we=function(e){this.h=this.j?this.h:e},g.Dd=function(){return(this.j?this.g.currentTime:this.h)||0},g.Nf=function(){return 0},g.Mf=function(){return 0},g.pg=function(){};function sR(e,t,n,r,u,c){var f=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=u,this.s=null,this.o=GB(e,n,c),this.j=new qE(e,t.presentationTimeline,n,this.o,c),this.h=new eR(e,function(){e:{var h=f.j;h.j=!0,h.o=!1;var E=KE(f.h);if(h=lR(f,E),.001<Math.abs(h-E)&&(E=Date.now()/1e3,!f.s||f.s<E-1)){f.s=E,tR(f.h,h),h=void 0;break e}f.A(),h=void 0}return h},function(h){var E=f.j;E.g.seeking&&!E.j&&(E.j=!0,E.i=h)},function(){var h=r;return h==null?h=1/0>f.g.getDuration()?f.g.$b():f.g.pb():0>h&&(h=f.g.pb()+h),uR(f,cR(f,h))}),this.m=new pr(function(){if(f.i.readyState!=0&&!f.i.paused){var h=KE(f.h),E=f.g.$b(),A=f.g.pb();3>A-E&&(E=A-3),h<E&&(h=lR(f,h),f.i.currentTime=h)}})}g=sR.prototype,g.ve=function(){this.m.$a(.25)},g.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},g.we=function(e){tR(this.h,e)},g.Dd=function(){var e=KE(this.h);return 0<this.i.readyState&&!this.i.paused?cR(this,e):e},g.Nf=function(){return this.o?this.o.o:0},g.Mf=function(){return this.j.C},g.pg=function(){this.j.mf()};function uR(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function lR(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,u=e.g.$b(),c=e.g.pb(),f=e.g.getDuration();3>c-u&&(u=c-3);var h=e.g.dd(n),E=e.g.dd(r);return n=e.g.dd(n+r),t>=f?uR(e,t):t>c?c:t<u?Ut(e.i.buffered,E)?E:n:t>=h||Ut(e.i.buffered,t)?t:n}function cR(e,t){var n=e.g.$b();return t<n?n:(e=e.g.pb(),t>e?e:t)}function GB(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new QC(new jB(e),t.stallThreshold,n),BB(t,function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}function wr(e){this.g=e,this.m=null,this.j=0,this.o=!1}g=wr.prototype,g.getNumReferences=function(){return this.g.length},g.getNumEvicted=function(){return this.j},g.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},g.Wh=function(){this.o=!0},g.tc=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)},g.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],u=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<u)return n+this.j}return this.g.length&&e<this.g[0].startTime?this.j:null},g.get=function(e){return this.g.length==0?null:(e-=this.j,0>e||e>=this.g.length?null:this.g[e])},g.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},g.ae=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,T(e))}},g.kd=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.g.length==0||r.endTime>n.g[0].startTime)}),this.ae(e),this.La(t)},g.La=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.j+=t-this.g.length}},g.sc=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.j++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new et(e.startTime,t,e.C,e.Aa,e.ja,e.ca,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.A,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.j=e.j,this.g[this.g.length-1]=t)}},g.ke=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new pr(function(){var r=t();r?n.g.push.apply(n.g,T(r)):(n.m.stop(),n.m=null)}),this.m.$a(e))},wr.prototype[Symbol.iterator]=function(){return this.xb(0)},wr.prototype.xb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;r--;var u=this.get(r+1),c=-1;if(u&&0<u.g.length)for(var f=u.g.length-1;0<=f;--f){var h=u.g[f];if(e>=h.startTime&&e<h.endTime){if(!t){for(;f&&!h.l;)f--,h=u.g[f];if(!h.l)return he("No independent partial segment found!"),null}r++,c=f-1;break}}return new Ra(this,r,c,n)};function VE(e,t,n){return e=new et(e,e+t,function(){return n},0,null,null,e,e,e+t),new wr([e])}re("shaka.media.SegmentIndex",wr),wr.forSingleSegment=VE,wr.prototype.getIteratorForTime=wr.prototype.xb,wr.prototype.updateEvery=wr.prototype.ke,wr.prototype.fit=wr.prototype.sc,wr.prototype.evict=wr.prototype.La,wr.prototype.mergeAndEvict=wr.prototype.kd,wr.prototype.offset=wr.prototype.offset,wr.prototype.get=wr.prototype.get,wr.prototype.find=wr.prototype.find,wr.prototype.markImmutable=wr.prototype.Wh,wr.prototype.release=wr.prototype.release,wr.prototype.getNumEvicted=wr.prototype.getNumEvicted,wr.prototype.getNumReferences=wr.prototype.getNumReferences;function Ra(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}Ra.prototype.ie=function(e){this.reverse=e},Ra.prototype.dh=function(){return this.h},Ra.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Ra.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},re("shaka.media.SegmentIterator",Ra),Ra.prototype.next=Ra.prototype.next,Ra.prototype.current=Ra.prototype.current,Ra.prototype.currentPosition=Ra.prototype.dh,Ra.prototype.setReverse=Ra.prototype.ie;function _i(){wr.call(this,[]),this.h=[]}z(_i,wr),g=_i.prototype,g.clone=function(){var e=new _i;return e.h=this.h.slice(),e},g.release=function(){for(var e=m(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},g.tc=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.tc(e)},g.find=function(e){for(var t=0,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.find(e);if(u!=null)return u+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},g.get=function(e){for(var t=0,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.get(e-t);if(u)return u;u=r.getNumReferences(),t+=r.getNumEvicted()+u}return null},g.offset=function(){},g.ae=function(){},g.La=function(){},g.kd=function(){},g.sc=function(){},g.ke=function(){},re("shaka.media.MetaSegmentIndex",_i),_i.prototype.updateEvery=_i.prototype.ke,_i.prototype.fit=_i.prototype.sc,_i.prototype.mergeAndEvict=_i.prototype.kd,_i.prototype.evict=_i.prototype.La,_i.prototype.merge=_i.prototype.ae,_i.prototype.offset=_i.prototype.offset,_i.prototype.get=_i.prototype.get,_i.prototype.find=_i.prototype.find,_i.prototype.forEachTopLevelReference=_i.prototype.tc,_i.prototype.release=_i.prototype.release;function op(e){var t=this;this.g=e,this.h=this.g.Md(),this.i=new pr(function(){t.g.og(.25*t.h)})}op.prototype.release=function(){this.set(this.Xb()),this.i&&(this.i.stop(),this.i=null),this.g=null},op.prototype.set=function(e){if(this.h!=e)e:{if(this.h=e,this.i.stop(),0<=this.h)try{var t=this.h;this.g.Md()!=t&&this.g.Df(t);break e}catch(n){}this.i.$a(.25),this.g.Md()!=0&&this.g.Df(0)}},op.prototype.Xb=function(){return this.g.Xb()};function fR(e){var t=this;this.h=e,this.g=new Set,this.i=new pr(function(){dR(t,!1)}).$a(.25)}fR.prototype.release=function(){this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function dR(e,t){for(var n=m(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function qB(){this.g=null,this.h=[]}function zE(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function HB(e){function t(c){return{timestamp:c.timestamp,state:c.state,duration:c.duration}}for(var n=[],r=m(e.h),u=r.next();!u.done;u=r.next())n.push(t(u.value));return e.g&&n.push(t(e.g)),n}function KB(){this.i=this.h=null,this.g=[]}function YE(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Hm(){this.Ed=this.A=this.B=this.G=this.C=this.s=this.j=this.F=this.m=this.i=this.L=this.N=this.H=this.I=this.K=this.l=this.o=NaN,this.g=new qB,this.h=new KB}function WE(e,t,n){this.m=e,this.h=t,this.l=0,this.j=n,this.g=new Map,this.i=new Map}function VB(e,t){e.j=t,e=m(e.g.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function ap(e,t,n){if(n=n===void 0?!1:n,e.h.segmentIndex&&(t=e.h.segmentIndex.xb(Math.max(t,e.l),!0))){var r=t.next().value;if(n&&(r=t.next().value),r){for(;e.g.size<e.m&&r!=null&&(n=!0,r.preload&&r.ja!=null&&(n=!1),r.bc()==2&&(n=!1),n&&r.ca&&hR(e,r.ca),n&&!e.g.has(r)&&(n=new XE(e.j),mR(n,r,e.h),e.g.set(r,n)),e.l=r.startTime,!(e.h.fastSwitching&&r.md&&r.Wd));)r=t.next().value;$E(e)}}}function hR(e,t){if(e.h.segmentIndex&&!Array.from(e.i.keys()).some(function(r){return ut(r,t)})){var n=new XE(e.j);mR(n,t,e.h),e.i.set(t,n)}}function pR(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&sp(e,n)}function nl(e){pR(e,e.g),pR(e,e.i),e.l=0}WE.prototype.La=function(e,t){t=t===void 0?!1:t;for(var n=m(this.g.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&sp(this,r);t&&$E(this)};function $E(e){for(var t=Array.from(e.g.keys()),n={},r=m(e.i.keys()),u=r.next();!u.done;n={wd:n.wd},u=r.next())n.wd=u.value,t.some(function(c){return function(f){return ut(f.ca,c.wd)}}(n))||sp(e,n.wd)}function gR(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var r=n.pop();r&&sp(e,r)}$E(e)}function zB(e,t){t&&t!==e.h&&(nl(e),e.h=t)}function sp(e,t){var n=e.g;t instanceof dt&&(n=e.i),e=n.get(t),n.delete(t),e&&e.abort()}function XE(e){this.g=e,this.fe=this.Ef=null}function mR(e,t,n){var r=new Uint8Array(0);e.fe=e.g(t,n,function(u){return xe(function(c){if(c.g==1)return 0<r.byteLength?r=li(r,u):r=u,e.Ef?N(c,e.Ef(r),3):c.u(0);r=new Uint8Array(0),X(c)})})}XE.prototype.abort=function(){this.fe&&this.fe.abort()};function QE(e){Sr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new pr(function(){for(var n=t.i(),r=m(t.g),u=r.next();!u.done;u=r.next())u=u.value,u.endTime<n.start&&(t.g.delete(u),u=new Wn("regionremove",new Map([["region",u]])),t.dispatchEvent(u))}).$a(2)}z(QE,Sr),QE.prototype.release=function(){this.g.clear(),this.h.stop(),Sr.prototype.release.call(this)};function Km(e){Sr.call(this),this.g=new Map,this.h=e}z(Km,Sr),Km.prototype.release=function(){this.g.clear(),Sr.prototype.release.call(this)};function YB(e,t){var n=e.g.get(t);return n||(n={nd:[],Uf:null,contentType:t},e.g.set(t,n)),n}function WB(e,t,n){var r=YB(e,t.contentType);$B(e,r),e={ff:t,position:n},r=r.nd,t=r.findIndex(function(u){return u.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}Km.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var r=n.nd,u=r.length-1;0<=u;u--){var c=r[u];if(c.position<=e){r=c.ff;break e}}r=null}if((u=r)&&(u=n.Uf,u=!(u===r||u&&r&&u.bandwidth==r.bandwidth&&u.audioSamplingRate==r.audioSamplingRate&&u.codecs==r.codecs&&u.contentType==r.contentType&&u.frameRate==r.frameRate&&u.height==r.height&&u.mimeType==r.mimeType&&u.channelsCount==r.channelsCount&&u.pixelAspectRatio==r.pixelAspectRatio&&u.width==r.width)),u)e:{if(u=e,c=r.contentType,(c=this.h()[c])&&0<c.length){var f=c[c.length-1].end;if(u>=c[0].start&&u<f){u=!0;break e}}u=!1}u&&(n.Uf=r,JSON.stringify(r),n=new Wn("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function $B(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,u=t.nd;t.nd=u.filter(function(c,f){return!(c.position<=n&&f+1<u.length&&u[f+1].position<=n||c.position>=r)})}else t.nd=[]}function up(e,t,n,r,u){return e=Li(e,r,u),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function vR(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.l=new Wu(function(){return XB(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null}}g=vR.prototype,g.destroy=function(){return this.l.destroy()};function XB(e){var t,n,r,u,c,f,h;return xe(function(E){if(E.g==1){for(t=[],n=m(e.i.values()),r=n.next();!r.done;r=n.next())u=r.value,lp(u),t.push(cp(u));for(c=m(e.o.values()),f=c.next();!f.done;f=c.next())h=f.value,nl(h);return N(E,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.m=null,e.h=null,X(E)})}g.configure=function(e){if(this.h=e,this.I=new Hh({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(nl(t.W),t.W=null),t=m(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,nl(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(vr))&&t.W&&(nl(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(nl(t.W),t.W=null),t=m(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(gR(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(n.W=null)):0<e.segmentPrefetchLimit&&(n.W=JE(this,n.stream));e.disableAudioPrefetch||nj(this)},g.start=function(e){var t=this;return xe(function(n){if(n.g==1)return N(n,tj(t,e||new Map),2);jr(t.l),t.C=!0,X(n)})};function QB(e,t){var n,r,u,c,f,h;xe(function(E){switch(E.g){case 1:return n=Ei,e.H++,r=e.H,ce(E,2),N(E,ri(e.g.V,n.ma),4);case 4:de(E,3);break;case 2:u=Ce(E),e.g&&e.g.onError(u);case 3:c=wi(t.mimeType,t.codecs),Qa(e.g.V,c,e.m.sequenceMode,t.external),f=e.g.V.F,(f.isTextVisible()||e.h.alwaysStreamText)&&e.H==r&&(h=_R(e,t),e.i.set(n.ma,h),_s(e,h,0)),X(E)}})}function JB(e){var t=e.i.get(vr);t&&(lp(t),cp(t).catch(function(){}),e.i.delete(vr)),e.s=null}function yR(e,t){var n=0>e.g.eb(),r=e.i.get("video");r&&r.Z&&r.Z.ie(n),(r=e.i.get("audio"))&&r.Z&&r.Z.ie(n),(r=e.i.get(vr))&&r.Z&&r.Z.ie(n),(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.jc&&(nd(e,t,!1,0,!1),n.jc=r):(t=n.jc)&&(n.jc=null,nd(e,t,!0,0,!1)))}function ER(e,t,n,r,u,c){n=n===void 0?!1:n,r=r===void 0?0:r,u=u===void 0?!1:u,c=c===void 0?!1:c,e.j=t,e.C&&(t.video&&nd(e,t.video,n,r,u,c),t.audio&&nd(e,t.audio,n,r,u,c))}function Vm(e,t){xe(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):N(n,t.createSegmentIndex(),2):n.return();nd(e,t,!0,0,!1),X(n)})}function nd(e,t,n,r,u,c){var f=e.i.get(t.type);f||t.type!=vr?f&&(f.jc&&(t.trickModeVideo?(f.jc=t,t=t.trickModeVideo):f.jc=null),f.stream!=t||u)&&(e.o.has(t)?f.W=e.o.get(t):f.W&&zB(f.W,t),t.type==vr&&(u=wi(t.mimeType,t.codecs),Qa(e.g.V,u,e.m.sequenceMode,t.external)),e.o.has(f.stream)||f.stream.closeSegmentIndex&&f.stream.closeSegmentIndex(),f.stream=t,f.Z=null,f.Of=!!c,n&&(f.Xc?f.le=!0:f.Qa?(f.Lb=!0,f.Id=r,f.le=!0):(lp(f),r_(e,f,!0,r).catch(function(h){e.g&&e.g.onError(h)}))),ej(e,f).catch(function(h){e.g&&e.g.onError(h)})):QB(e,t)}function ej(e,t){var n,r;return xe(function(u){if(u.g==1)return t.Ya?(n=t.stream,r=t.Ya,n.segmentIndex?u.u(2):N(u,n.createSegmentIndex(),2)):u.return();if(t.Ya!=r||t.stream!=n)return u.return();var c=e.g.Ld(),f=Pt(e.g.V,t.type),h=t.stream.segmentIndex.find(t.Oa?t.Oa.endTime:c),E=h==null?null:t.stream.segmentIndex.get(h);h=E&&E.ja?E.ja-E.Aa:null,E&&!h&&(h=(E.endTime-E.getStartTime())*(t.stream.bandwidth||0)/8),h?((E=E.ca)&&(h+=(E.ja?E.ja-E.Aa:null)||0),E=e.g.getBandwidthEstimate(),c=8*h/E<(f||0)-c-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.Ya.h.g>h):c=!1,c&&t.Ya.abort(),X(u)})}g.od=function(){if(this.g)for(var e=this.g.Ld(),t=m(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var u=null;n.Z&&(u=n.Z.current()),(!u||u.startTime>e||u.endTime<e)&&(n.Z=null),u=this.g.V,u.C?u=!1:r==vr?(u=u.g,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=Hn(u,r),u=Ut(u,e)),u||((Pt(this.g.V,r)!=null||n.Qa)&&zm(this,n),n.Ya&&(n.Ya.abort(),n.Ya=null),r===vr&&(r=this.g.V,r.H&&r.H.h()),n.od=!0)}};function zm(e,t){t.Xc||t.Lb||(t.Qa?(t.Lb=!0,t.Id=0):Zs(e.g.V,t.type)==null?t.ub==null&&_s(e,t,0):(lp(t),r_(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function tj(e,t){var n,r,u,c,f,h,E,A,k,G;return xe(function(te){if(te.g==1){if(n=Ei,!e.j)throw new pt(2,5,5006);return r=new Map,u=new Set,e.j.audio&&(r.set(n.S,e.j.audio),u.add(e.j.audio)),e.j.video&&(r.set(n.fa,e.j.video),u.add(e.j.video)),e.s&&(r.set(n.ma,e.s),u.add(e.s)),c=e.g.V,N(te,c.init(r,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(jr(e.l),e.updateDuration(),f=m(r.keys()),h=f.next();!h.done;h=f.next())E=h.value,A=r.get(E),e.i.has(E)||(k=_R(e,A),t.has(A.id)&&(G=t.get(A.id),VB(G,function(Y,ve,Le){return Ym(Y,ve,Le||null,e.h.retryParameters,e.g.zb)}),k.W=G),e.i.set(E,k),_s(e,k,0));X(te)})}function _R(e,t){return{stream:t,type:t.type,Z:null,W:JE(e,t),Oa:null,ec:null,cf:null,af:null,$e:null,jc:null,endOfStream:!1,Qa:!1,ub:null,Lb:!1,Id:0,le:!1,Xc:!1,od:!0,uf:!1,gd:!1,Ya:null}}function JE(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===vr&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===vr&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.h?n:0<e.h.segmentPrefetchLimit?new WE(e.h.segmentPrefetchLimit,t,function(r,u,c){return Ym(r,u,c||null,e.h.retryParameters,e.g.zb)}):null}function nj(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r={},u=m(e.m.variants),c=u.next();!c.done;r={Fa:r.Fa},c=u.next())if(r.Fa=c.value,r.Fa.audio)if(e.o.has(r.Fa.audio)){if(c=e.o.get(r.Fa.audio),gR(c,t),!(0<t&&n.some(function(h){return function(E){return ju(h.Fa.audio.language,E)}}(r)))){var f=e.i.get(r.Fa.audio.type);c!==(f&&f.W)&&nl(c),e.o.delete(r.Fa.audio)}}else 0>=t||!n.some(function(h){return function(E){return ju(h.Fa.audio.language,E)}}(r))||!(c=JE(e,r.Fa.audio))||(r.Fa.audio.segmentIndex||r.Fa.audio.createSegmentIndex(),e.o.set(r.Fa.audio,c))}g.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.V.Za(e):this.g.V.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function rj(e,t){var n,r,u,c,f;return xe(function(h){switch(h.g){case 1:if(jr(e.l),t.Qa||t.ub==null||t.Xc)return h.return();if(t.ub=null,!t.Lb){h.u(2);break}return N(h,r_(e,t,t.le,t.Id),3);case 3:return h.return();case 2:if(t.stream.segmentIndex){h.u(4);break}return n=t.stream,N(h,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.ub||_s(e,t,0),h.return();case 4:ce(h,6),r=ij(e,t),r!=null&&(_s(e,t,r),t.gd=!1),de(h,7);break;case 6:return u=Ce(h),N(h,TR(e,t,u),8);case 8:return h.return();case 7:if(c=Array.from(e.i.values()),!e.C||!c.every(function(E){return E.endOfStream})){h.u(0);break}return N(h,e.g.V.endOfStream(),10);case 10:jr(e.l),f=e.g.V.getDuration(),f!=0&&f<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Za(f),X(h)}})}function ij(e,t){if(t_(t))return Ir(e.g.V,t.stream.originalId||""),null;if(t.type==vr&&fr(e.g.V),!e.g.V.ea&&t.type!=vr)return e.h.updateIntervalSeconds/2;var n=e.g.Ld();if(t.type==="audio")for(var r=m(e.o.keys()),u=r.next();!u.done;u=r.next())u=e.o.get(u.value),u.La(n,!0),ap(u,n);r=t.Oa?t.Oa.endTime:n,u=yn(e.g.V,t.type,n);var c=Math.max(1,Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),f=e.m.presentationTimeline.getDuration()-r,h=Pt(e.g.V,t.type);if(1e-6>f&&h)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(vr))&&t_(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,u>=c)return e.h.updateIntervalSeconds/2;if(u=oj(e,t,n,h),!u)return e.h.updateIntervalSeconds;for(c=1/0,f=Array.from(e.i.values()),f=m(f),h=f.next();!h.done;h=f.next())h=h.value,t_(h)||h.Z&&!h.Z.current()||(c=Math.min(c,h.Oa?h.Oa.endTime:n));return r>=c+e.m.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.Z&&!e.o.has(t.stream)&&(t.W.La(n),ap(t.W,u.startTime)),aj(e,t,n,u).catch(function(){}),null)}function oj(e,t,n,r){if(t.Z)return t.Z.current();if(t.Oa||r)return t.Z=t.stream.segmentIndex.xb(t.Oa?t.Oa.endTime:r,!1,0>e.g.eb()),t.Z&&t.Z.next().value;r=e.h.inaccurateManifestTolerance;var u=Math.max(n-r,0);e=0>e.g.eb();var c=null;return r&&(t.Z=t.stream.segmentIndex.xb(u,!1,e),c=t.Z&&t.Z.next().value),c||(t.Z=t.stream.segmentIndex.xb(n,!1,e),c=t.Z&&t.Z.next().value),c}function aj(e,t,n,r){var u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe;return xe(function(Ue){switch(Ue.g){case 1:if(u=Ei,c=t.stream,f=t.Z,t.Qa=!0,ce(Ue,2),r.bc()==2)throw new pt(1,1,1011);return N(Ue,cj(e,t,r),4);case 4:return jr(e.l),e.A?Ue.return():(h=c.mimeType=="video/mp4"||c.mimeType=="audio/mp4",E=p.ReadableStream,e.h.lowLatencyMode&&E&&h&&(e.m.type!="HLS"||r.m)?(G=new Uint8Array(0),Y=te=!1,Le=function(vt){var Nt,Vt,Bt;return xe(function(_t){switch(_t.g){case 1:if(te||(Y=!0,jr(e.l),e.A))return _t.return();if(ce(_t,2),G=uj(G,vt),Nt=!1,Vt=0,new Fr().box("mdat",function(Zt){Vt=Zt.size+Zt.start,Nt=!0}).parse(G,!1,!0),!Nt){_t.u(4);break}return Bt=G.subarray(0,Vt),G=G.subarray(Vt),N(_t,e_(e,t,n,c,r,Bt,!0),5);case 5:t.W&&t.Z&&ap(t.W,r.startTime,!0);case 4:de(_t,0);break;case 2:ve=Ce(_t),X(_t)}})},N(Ue,n_(e,t,r,Le),9)):(A=n_(e,t,r),N(Ue,A,7)));case 7:return k=Ue.h,jr(e.l),e.A?Ue.return():(jr(e.l),t.Lb?(t.Qa=!1,_s(e,t,0),Ue.return()):N(Ue,e_(e,t,n,c,r,k),6));case 9:if(De=Ue.h,ve)throw ve;if(Y){Ue.u(10);break}return te=!0,jr(e.l),e.A?Ue.return():t.Lb?(t.Qa=!1,_s(e,t,0),Ue.return()):N(Ue,e_(e,t,n,c,r,De),10);case 10:t.W&&t.Z&&ap(t.W,r.startTime,!0);case 6:if(jr(e.l),e.A)return Ue.return();t.Oa=r,f.next(),t.Qa=!1,t.uf=!1,qe=e.g.V.ob(),Se=qe[t.type],JSON.stringify(Se),t.Lb||e.g.mf(r,t.stream),_s(e,t,0),de(Ue,0);break;case 2:if(Qe=Ce(Ue),jr(e.l,Qe),e.A)return Ue.return();if(t.Qa=!1,Qe.code==7001)t.Qa=!1,lp(t),_s(e,t,0),Ue.u(0);else if(t.type==u.ma&&e.h.ignoreTextStreamFailures)e.i.delete(u.ma),Ue.u(0);else if(Qe.code==3017)lj(e,t,Qe),Ue.u(0);else return t.gd=!0,Qe.category==1&&t.W&&sp(t.W,r),Qe.severity=2,N(Ue,TR(e,t,Qe),0)}})}function sj(e,t,n){var r,u,c,f,h;return xe(function(E){if(E.g==1)return r=t,r.cryptoKey?E.u(2):N(E,r.fetchKey(),3);if(u=r.iv,!u)for(u=Qn(new ArrayBuffer(16)),c=r.firstMediaSequenceNumber+n,f=u.byteLength-1;0<=f;f--)u[f]=c&255,c>>=8;return t.blockCipherMode=="CBC"?h={name:"AES-CBC",iv:u}:h={name:"AES-CTR",counter:u,length:64},E.return(p.crypto.subtle.decrypt(h,r.cryptoKey,e))})}function uj(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function lj(e,t,n){if(!Array.from(e.i.values()).some(function(u){return u!=t&&u.uf})){if(0<e.h.maxDisabledTime&&e.g.Jd(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else if(4<r)e.B-=.04;else{t.gd=!0,e.A=!0,e.g.onError(n);return}t.uf=!0}_s(e,t,4)}function cj(e,t,n){var r,u,c,f,h,E,A,k,G,te,Y,ve,Le;return xe(function(De){switch(De.g){case 1:if(r=Ei,u=[],c=Math.max(0,n.appendWindowStart-.1),f=n.appendWindowEnd+.01,h=za(t.stream.codecs),E=ba(t.stream.mimeType),A=n.timestampOffset,A==t.cf&&c==t.af&&f==t.$e&&h==t.bf&&E==t.kg){De.u(2);break}if(k=t.bf&&t.kg&&FB(e.g.V,t.type,E,h),!k){De.u(3);break}if(G=null,t.type===r.fa?G=e.i.get(r.S):t.type===r.S&&(G=e.i.get(r.fa)),!G){De.u(3);break}return N(De,cp(G).catch(function(){}),5);case 5:G.ec=null,zm(e,G);case 3:return te=function(){var qe,Se,Qe;return xe(function(Ue){if(Ue.g==1)return qe=new Map,e.j.audio&&qe.set(r.S,e.j.audio),e.j.video&&qe.set(r.fa,e.j.video),ce(Ue,2),t.af=c,t.$e=f,t.bf=h,t.kg=E,t.cf=A,Se=e.m.sequenceMode||e.m.type=="HLS",N(Ue,Qr(e.g.V,t.type,A,c,f,Se,n.mimeType||t.stream.mimeType,n.codecs||t.stream.codecs,qe),4);if(Ue.g!=2)return de(Ue,0);throw Qe=Ce(Ue),t.af=null,t.$e=null,t.bf=null,t.cf=null,Qe})},N(De,te(),2);case 2:return ut(n.ca,t.ec)||(t.ec=n.ca,n.l&&n.ca&&(Y=n_(e,t,n.ca),ve=function(){var qe,Se,Qe,Ue,vt,Nt,Vt;return xe(function(Bt){switch(Bt.g){case 1:return ce(Bt,2),N(Bt,Y,4);case 4:return qe=Bt.h,jr(e.l),Se=null,Qe=new Map,Ue={projection:null,hfov:null},vt=new Fr,vt.box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(_t){Se=It(_t.reader,_t.version).timescale}).box("hdlr",function(_t){switch(_t=_t.reader,_t.skip(8),_t.hc()){case"soun":Qe.set(r.S,Se);break;case"vide":Qe.set(r.fa,Se)}Se=null}).box("minf",yr).box("stbl",yr).O("stsd",gu).box("encv",Ai).box("avc1",Ai).box("avc3",Ai).box("hev1",Ai).box("hvc1",Ai).box("dvav",Ai).box("dva1",Ai).box("dvh1",Ai).box("dvhe",Ai).box("vexu",yr).box("proj",yr).O("prji",function(_t){_t=_t.reader.hc(),Ue.projection=_t}).box("hfov",function(_t){_t=_t.reader.M()/1e3,Ue.hfov=_t}).parse(qe),hj(e,Ue),Qe.has(t.type)?n.ca.timescale=Qe.get(t.type):Se!=null&&(n.ca.timescale=Se),Nt=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,N(Bt,e.g.Qf(t.type,qe),5);case 5:return N(Bt,Tr(e.g.V,t.type,qe,null,t.stream,Nt),6);case 6:de(Bt,0);break;case 2:throw Vt=Ce(Bt),t.ec=null,Vt}})},e.g.Yh(n.startTime,n.ca),u.push(ve()))),e.m.sequenceMode&&(Le=t.Oa?t.Oa.j:null,n.j!=Le&&u.push(Gs(e.g.V,t.type,n.startTime))),N(De,Promise.all(u),0)}})}function e_(e,t,n,r,u,c,f){f=f===void 0?!1:f;var h,E,A,k,G,te;return xe(function(Y){switch(Y.g){case 1:return h=r.closedCaptions&&0<r.closedCaptions.size,A=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,k=e.h.parsePrftBox&&!e.F,(A||k)&&(E=new Fr),A&&E.O("emsg",function(ve){var Le=r.emsgSchemeIdUris;if(ve.version===0)var De=ve.reader.hc(),qe=ve.reader.hc(),Se=ve.reader.M(),Qe=ve.reader.M(),Ue=ve.reader.M(),vt=ve.reader.M(),Nt=u.startTime+Qe/Se;else Se=ve.reader.M(),Nt=ve.reader.Cc()/Se+u.timestampOffset,Qe=Nt-u.startTime,Ue=ve.reader.M(),vt=ve.reader.M(),De=ve.reader.hc(),qe=ve.reader.hc();ve=ve.reader.sb(ve.reader.getLength()-ve.reader.wa()),(Le&&Le.includes(De)||e.h.dispatchAllEmsgBoxes)&&(De=="urn:mpeg:dash:event:2012"?e.g.Zh():(Le=new Map().set("detail",{startTime:Nt,endTime:Nt+Ue/Se,schemeIdUri:De,value:qe,timescale:Se,presentationTimeDelta:Qe,eventDuration:Ue,id:vt,messageData:ve}),Le=new Wn("emsg",Le),Le.cancelable=!0,e.g.onEvent(Le),Le.defaultPrevented||De!="https://aomedia.org/emsg/ID3"&&De!="https://developer.apple.com/streaming/emsg-id3"||(De=Dn(ve),De.length&&u&&e.g.$h([{cueTime:u.startTime,data:ve,frames:De,dts:u.startTime,pts:u.startTime}],0,u.endTime))))}),k&&E.O("prft",function(ve){if(!e.F&&u.ca.timescale){var Le=ve.reader,De=ve.version;Le.M(),ve=Le.M();var qe=Le.M();ve=1e3*ve+qe/Math.pow(2,32)*1e3,De===0?Le=Le.M():(De=Le.M(),Le=Le.M(),Le=De*Math.pow(2,32)+Le),ve=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+ve).getTime(),Le=new Map().set("detail",{wallClockTime:ve,programStartDate:new Date(ve-Le/u.ca.timescale*1e3)}),Le=new Wn("prft",Le),e.g.onEvent(Le),e.F=!0}}),(A||k)&&E.parse(c),N(Y,fj(e,t,n),2);case 2:return jr(e.l),G=t.od,t.od=!1,te=t.Of,t.Of=!1,N(Y,e.g.Qf(t.type,c),3);case 3:return N(Y,Tr(e.g.V,t.type,c,u,r,h,G,te,f),4);case 4:jr(e.l),X(Y)}})}function fj(e,t,n){var r,u,c,f;return xe(function(h){if(h.g==1)return r=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),u=Zs(e.g.V,t.type),u==null?h.return():(c=n-u,f=c-r,f<=e.h.evictionGoal?h.return():N(h,e.g.V.remove(t.type,u,u+f),2));jr(e.l),X(h)})}function t_(e){return e&&e.type==vr&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function n_(e,t,n,r){var u,c,f,h,E;return xe(function(A){switch(A.g){case 1:if(u=n.ed())return A.return(u);if(c=null,t.W){var k=t.W,G=k.g;n instanceof dt&&(G=k.i),G.has(n)?(k=G.get(n),r&&(k.Ef=r),c=k.fe):c=null}return c||(c=Ym(n,t.stream,r||null,e.h.retryParameters,e.g.zb)),f=0,t.Z&&(f=t.Z.h),t.Ya=c,N(A,c.promise,2);case 2:if(h=A.h,t.Ya=null,E=h.data,!n.aesKey){A.u(3);break}return N(A,sj(E,n.aesKey,f),4);case 4:E=A.h;case 3:return A.return(E)}})}function Ym(e,t,n,r,u){var c=e instanceof et?e:void 0,f=c?1:0;return e=up(e.$(),e.Aa,e.ja,r,n),e.contentType=t.type,u.request(Wa,e,{type:f,stream:t,segment:c})}function r_(e,t,n,r){var u,c;return xe(function(f){if(f.g==1)return t.Lb=!1,t.le=!1,t.Id=0,t.Xc=!0,t.Oa=null,t.ec=null,t.Z=null,t.W&&!e.o.has(t.stream)&&nl(t.W),r?(u=e.g.Ld(),c=e.g.V.getDuration(),N(f,e.g.V.remove(t.type,u+r,c),3)):N(f,ri(e.g.V,t.type),4);if(f.g!=3)return jr(e.l),n?N(f,e.g.V.flush(t.type),3):f.u(3);jr(e.l),t.Xc=!1,t.endOfStream=!1,t.Qa||t.ub||_s(e,t,0),X(f)})}function _s(e,t,n){var r=t.type;(r!=vr||e.i.has(r))&&(t.ub=new Ds(function(){var u;return xe(function(c){if(c.g==1)return ce(c,2),N(c,rj(e,t),4);if(c.g!=2)return de(c,0);u=Ce(c),e.g&&e.g.onError(u),X(c)})}).X(n))}function lp(e){e.ub!=null&&(e.ub.stop(),e.ub=null)}function cp(e){return xe(function(t){return e.Ya?N(t,e.Ya.abort(),0):t.u(0)})}function TR(e,t,n){var r;return xe(function(u){if(u.g==1)return N(u,Kh(e.I),2);jr(e.l),r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.category===1&&0<r&&(n.handled=e.g.Jd(t.stream,r),n.handled&&(n.severity=1)),e.g.onError(n),n.handled||e.h.failureCallback(n),X(u)})}function dj(e){var t,n,r,u,c,f;return xe(function(h){return h.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?h.return(!1):(e.K=t,r=Ei,(u=e.i.get(r.S))&&(u.ec=null,zm(e,u),cp(u).catch(function(){})),(c=e.i.get(r.fa))&&(c.ec=null,zm(e,c),cp(c).catch(function(){})),f=new Map,e.j.audio&&f.set(r.S,e.j.audio),e.j.video&&f.set(r.fa,e.j.video),N(h,XC(e.g.V,f),2))):h.return(!0)})}function hj(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Wn("spatialvideoinfo",n)}else n=new Wn("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function i_(){}function o_(e,t,n,r,u){var c=u in r,f=!0,h;for(h in t){var E=u+"."+h,A=c?r[u]:n[h];c||h in n?t[h]===void 0?A===void 0||c?delete e[h]:e[h]=Ya(A):A.constructor==Object&&t[h]&&t[h].constructor==Object?(e[h]||(e[h]=Ya(A)),E=o_(e[h],t[h],A,r,E),f=f&&E):typeof t[h]!=typeof A||t[h]==null||typeof t[h]!="function"&&t[h].constructor!=A.constructor?(he("Invalid config, wrong type for "+E),f=!1):(typeof n[h]=="function"&&n[h].length!=t[h].length&&Ke("Unexpected number of arguments for "+E),e[h]=t[h]):(he("Invalid config, unrecognized key "+E),f=!1)}return f}function Wm(e,t){for(var n={},r=n,u=0,c=0;u=e.indexOf(".",u),!(0>u);)(u==0||e[u-1]!="\\")&&(c=e.substring(c,u).replace(/\\\./g,"."),r[c]={},r=r[c],c=u+1),u+=1;return r[e.substring(c).replace(/\\\./g,".")]=t,n}function rd(e,t){return e&&t}re("shaka.util.ConfigUtils",i_),i_.convertToConfigObject=Wm,i_.mergeConfigObjects=o_;function Ja(){}function SR(e){return e=Ka(e),new si(e).wb}function fp(e,t,n){function r(h){tn(c).setUint32(f,h.byteLength,!0),f+=4,c.set(Qn(h),f),f+=h.byteLength}if(!n||!n.byteLength)throw new pt(2,6,6015);var u;typeof t=="string"?u=xf(t,!0):u=t,e=Ka(e),e=xf(e,!0);var c=new Uint8Array(12+e.byteLength+u.byteLength+n.byteLength),f=0;return r(e),r(u),r(n),c}function wR(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ka(e).split("skd://").pop(),fp(e,n,t))}function a_(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}re("shaka.util.FairPlayUtils",Ja),Ja.commonFairPlayResponse=function(e,t){if(e===2){try{var n=Vr(t.data)}catch(u){return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(u){}e&&(t.data=Si(qo(n)))}},Ja.expressplayFairPlayRequest=function(e,t){a_(e,t)},Ja.conaxFairPlayRequest=function(e,t){a_(e,t)},Ja.ezdrmFairPlayRequest=function(e,t){a_(e,t)},Ja.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Qn(t.body),e=cu(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Va("spc="+e))},Ja.expressplayInitDataTransform=function(e,t,n){return wR(e,t,n)},Ja.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Ka(e).split("skd://").pop().split("?").shift(),n=p.atob(n);var r=new ArrayBuffer(2*n.length);r=Pu(r);for(var u=0,c=n.length;u<c;u++)r[u]=n.charCodeAt(u);return fp(e,r,t)},Ja.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ka(e).split(";").pop(),fp(e,n,t))},Ja.verimatrixInitDataTransform=function(e,t,n){return wR(e,t,n)},Ja.initDataTransform=fp,Ja.defaultGetContentId=SR,Ja.isFairPlaySupported=function(){var e;return xe(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ce(t,2),N(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(Ce(t),t.return(!1))})};function s_(){}function id(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:sa(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(E,A,k){return p.shakaMediaKeysPolyfill&&A=="skd"&&(A=k.serverCertificate,k=SR(E),E=fp(E,k,A)),E},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:gs(),minHdcpVersion:"",ignoreDuplicateInitData:!Lu()};(gs()||Nr())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;Lu()||Ou()||Yr("Tizen 4")||ia()&&lu()===38||ia()&&lu()===53||ia()&&lu()===68||oa()&&(!oa()||!Yr("Android"))||(navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform&&navigator.platform.toLowerCase().includes("windows"))&&Il()||(n="smooth",r=!0),r={retryParameters:sa(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:$m,manifestPreprocessorTXml:Xm,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Ou()||Lu()||ia()&&lu()===38||Nr()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:$m,manifestPreprocessorTXml:Xm,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var u={retryParameters:sa(),failureCallback:function(E){return rd([E])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,liveSyncPanicMode:!1,liveSyncPanicThreshold:60,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1};(ia()||qa()||oa()||vs())&&(u.stallSkip=0);var c={trackSelectionCallback:function(E){return xe(function(A){return A.return(E)})},downloadSizeCallback:function(E){var A;return xe(function(k){return k.g==1?navigator.storage&&navigator.storage.estimate?N(k,navigator.storage.estimate(),3):k.return(!0):(A=k.h,k.return(A.usage+E<.95*A.quota))})},progressCallback:function(E,A){return rd([E,A])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(E){return rd([E],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(E,A){return rd([E,A])}};var f=!1;(ia()||qa()||oa()||vs()||_c()||Nr()||gs())&&(f=!0);var h={drm:t,manifest:r,streaming:u,mediaSource:n,offline:c,abrFactory:function(){return new Hr},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1,skipPlayDetection:f}};return c.trackSelectionCallback=function(E){return xe(function(A){return A.return(pj(E,h.preferredAudioLanguage,h.preferredVideoHdrLevel))})},h}function Gc(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return o_(e,t,n||id(),r,"")}function pj(e,t,n){var r=n;r=="AUTO"&&(r=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var u=e.filter(function(h){return!(h.type!="variant"||h.hdr&&h.hdr!=r)});n=[];var c=Rl(t,u.map(function(h){return h.language}));c&&(n=u.filter(function(h){return Cr(h.language)==c})),n.length==0&&(n=u.filter(function(h){return h.primary})),n.length==0&&(u.map(function(h){return h.language}),n=u);var f=n.filter(function(h){return h.height&&480>=h.height});for(f.length&&(f.sort(function(h,E){return E.height-h.height}),n=f.filter(function(h){return h.height==f[0].height})),t=[],n.length&&(u=Math.floor(n.length/2),n.sort(function(h,E){return h.bandwidth-E.bandwidth}),t.push(n[u])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=vr&&n.type!="image"||t.push(n);return t}function $m(e){return rd([e],e)}function Xm(e){return rd([e],e)}re("shaka.util.PlayerConfiguration",s_),s_.mergeConfigObjects=Gc,s_.createDefault=id;function rl(e,t,n,r,u){Sr.call(this),this.K=e,this.Y=t,this.bb=u.networkingEngine,this.aa=r,this.m=null,this.Vb=n,this.Ia=0,this.Tb=u.rc,this.A=u.Th,this.Ub=u.Uh,this.g=u.config,this.j=this.B=this.h=null,this.sa=!1,this.C=u.di,this.Ga=!1,this.l=null,this.ea=!1,this.i=this.s=null,this.da=!1,this.I=new Map,this.Ha=!1,this.lb=u.ci,this.ba=new Hm,this.qa=new Rr,this.pa=new Rr,this.L=new Rr,this.F=new Rr,this.F.catch(function(){}),this.N=null,this.o=!1,this.Rb=u.Vg,this.ta=null,this.mb=u.Ug,this.T=!1,this.H=[],this.G=[]}z(rl,Sr);function Qm(e,t,n){(e=t?e.G:e.H)?e.push(n):n()}function gj(e){if(e.G)for(var t=m(e.G),n=t.next();!n.done;n=t.next())n=n.value,n();e.G=null}function AR(e,t){if(e.N=t,e.T=!0,e.H){t=m(e.H);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.H=null}g=rl.prototype,g.getStartTime=function(){return this.aa},g.ad=function(){return this.K},g.Te=function(){return this.h};function mj(e){return e.da=!0,e.i}function vj(e){return e.sa=!0,e.j}function yj(e){return e.Ga=!0,e.C}g.getStats=function(){return this.ba};function Ej(e){return e.ea=!0,e.l}function _j(e){return e.Ha=!0,e.I}g.start=function(){var e=this,t;return xe(function(n){switch(n.g){case 1:return N(n,Promise.resolve(),2);case 2:return ce(n,3),N(n,Tj(e),5);case 5:return e.o?n.return():(e.qa.resolve(),N(n,Sj(e),6));case 6:if(e.o)return n.return();if(e.pa.resolve(),e.m||(e.m=new Pl(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups),hm(e.h,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes)),e.mb){var r=e.g.abrFactory;e.s=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Rb){r=e.h.presentationTimeline.R();var u=jf(e.h.variants);u=e.m.create(u),e.i.configure(e.g.abr),e.i.setVariants(Array.from(u.values())),(u=e.i.chooseVariant(!0))&&(e.ta=u,u.video&&IR(e,u.video,r),u.audio&&IR(e,u.audio,r))}return N(n,void 0,7);case 7:if(e.o)return n.return();e.L.resolve(),de(n,0);break;case 3:throw t=Ce(n),e.F.reject(t),t}})},g.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Sr.prototype.dispatchEvent.call(this,e)},g.onError=function(e){e.severity===2&&(this.F.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Wn("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function u_(e,t){e.dispatchEvent(new Wn("onstatechange",new Map().set("state",t)))}function Tj(e){var t,n,r,u,c;return xe(function(f){if(f.g==1)return u_(e,"manifest-parser"),e.j||(e.B=be(e.K,e.Y),e.j=e.B(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,u_(e,"manifest"),e.h?f.u(2):(n=e,N(f,e.j.start(e.K,e.Ub),3));if(f.g!=2&&(n.h=f.h),r=new Wn("manifestparsed",void 0),e.dispatchEvent(r),e.h.variants.length==0)throw new pt(2,4,4036);wj(e.h),u=Date.now()/1e3,c=u-t,e.ba.F=c,X(f)})}function Sj(e){var t,n,r,u,c;return xe(function(f){switch(f.g){case 1:u_(e,"drm-engine"),e.Ia=Date.now()/1e3,e.l=e.Tb(),e.A.g=e.l,e.l.configure(e.g.drm);var h=e.A;if(t=Ic(e.h.variants,h.h.restrictions,h.i),!t){f.u(2);break}return n=new Wn("trackschanged",void 0),N(f,Promise.resolve(),3);case 3:e.dispatchEvent(n);case 2:return r=jf(e.h.variants),N(f,km(e.l,r,e.h.offlineSessionIds),4);case 4:return N(f,Ge(e.A,e.h),5);case 5:if(u=f.h,!u){f.u(0);break}return c=new Wn("trackschanged",void 0),N(f,Promise.resolve(),7);case 7:e.dispatchEvent(c),X(f)}})}g.configure=function(e,t){e=Wm(e,t),Gc(this.g,e)},g.getConfiguration=function(){return Ya(this.g)};function IR(e,t,n){var r,u,c,f,h;xe(function(E){if(E.g==1)return r=e.g.streaming.segmentPrefetchLimit||2,u=new WE(r,t,function(A,k,G){return Ym(A,k,G||null,e.g.streaming.retryParameters,e.bb)}),e.I.set(t.id,u),N(E,t.createSegmentIndex(),2);c=e.aa||0,(h=(f=t.segmentIndex.xb(c))?f.current():null)||(h=t.segmentIndex.get(0)),h&&(n?h.ca&&hR(u,h.ca):ap(u,h.startTime)),X(E)})}g.Fi=function(){return Promise.race([this.L,this.F])},g.destroy=function(){var e=this,t,n,r;return xe(function(u){switch(u.g){case 1:if(e.o=!0,!e.j||e.sa){u.u(2);break}return N(u,e.j.stop(),2);case 2:if(!e.i||e.da){u.u(4);break}return N(u,e.i.stop(),4);case 4:if(e.C&&!e.Ga&&e.C.release(),!e.l||e.ea){u.u(6);break}return N(u,e.l.destroy(),6);case 6:if(0<e.I.size&&!e.Ha)for(t=m(e.I.values()),n=t.next();!n.done;n=t.next())r=n.value,nl(r);X(u)}})};function wj(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}re("shaka.media.PreloadManager",rl),rl.prototype.destroy=rl.prototype.destroy,rl.prototype.waitForFinish=rl.prototype.Fi;function Jm(e,t){Sr.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{oc:null,nc:od,cc:function(r,u){return qc(n,"enter",r,u)}},{oc:dp,nc:od,cc:function(r,u){return qc(n,"enter",r,u)}},{oc:hp,nc:od,cc:function(r,u){return qc(n,"enter",r,u)}},{oc:od,nc:dp,cc:function(r,u){return qc(n,"exit",r,u)}},{oc:od,nc:hp,cc:function(r,u){return qc(n,"exit",r,u)}},{oc:dp,nc:hp,cc:function(r,u){return qc(n,"skip",r,u)}},{oc:hp,nc:dp,cc:function(r,u){return qc(n,"skip",r,u)}}],this.h=new Tt,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}z(Jm,Sr),Jm.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Sr.prototype.release.call(this)},Jm.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var u=this.g.get(r),c=e<r.startTime?dp:e>r.endTime?hp:od;this.g.set(r,c);for(var f=m(this.m),h=f.next();!h.done;h=f.next())h=h.value,h.oc==u&&h.nc==c&&h.cc(r,t)}}};function qc(e,t,n,r){t=new Wn(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var dp=1,od=2,hp=3;function l_(e,t,n){var r,u,c,f,h,E,A;return xe(function(k){switch(k.g){case 1:var G=new si(e).Pa.split("/").pop().split(".");return r=G.length==1?"":G.pop().toLowerCase(),(u=Aj[r])?k.return(u):(c=0,f=Li([e],n),ce(k,2),f.method="HEAD",N(k,t.request(c,f).promise,4));case 4:h=k.h,u=h.headers["content-type"],de(k,3);break;case 2:if(E=Ce(k),!E||E.code!=1002&&E.code!=1001){k.u(3);break}return f.method="GET",N(k,t.request(c,f).promise,6);case 6:A=k.h,u=A.headers["content-type"];case 3:return k.return(u?u.toLowerCase().split(";").shift():"")}})}var Aj={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function bR(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(f){return bR(f,e)}).join("");var n=[],r=700<=e.fontWeight,u=e.fontStyle=="italic",c=e.textDecoration.includes("underline");return r&&n.push(["b"]),u&&n.push(["i"]),c&&n.push(["u"]),u=e.color,u==""&&t&&(u=t.color),r="",(u=CR(u))&&(r+="."+u),u=e.backgroundColor,u==""&&t&&(u=t.backgroundColor),(t=CR(u))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(f,h){var E=m(h);return h=E.next().value,E=E.next().value,"<"+h+(E===void 0?"":E)+">"+f+"</"+h+">"},e.payload)}function CR(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function c_(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,T(c_(r.nestedCues,r)));else{var u=r.clone();u.nestedCues=[],u.payload=bR(r,t),n.push(u)}return n}function fa(e,t){this.g=null;for(var n=m(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.mode="disabled",r.label==t&&(this.g=r);this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}g=fa.prototype,g.configure=function(){},g.remove=function(e,t){return this.g?(RR(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},g.append=function(e){var t=c_(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];var r={};t=m(t);for(var u=t.next();!u.done;r={qc:r.qc},u=t.next())r.qc=u.value,e.some(function(c){return function(f){return f.startTime==c.qc.startTime&&f.endTime==c.qc.endTime&&f.text==c.qc.payload}}(r))||(u=Ij(r.qc))&&n.push(u);for(e=n.slice().sort(function(c,f){return c.startTime!=f.startTime?c.startTime-f.startTime:c.endTime!=f.endTime?c.endTime-f.startTime:"line"in VTTCue.prototype?n.indexOf(f)-n.indexOf(c):n.indexOf(c)-n.indexOf(f)}),e=m(e),r=e.next();!r.done;r=e.next())this.g.addCue(r.value)},g.destroy=function(){return this.g&&(RR(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},g.isTextVisible=function(){return this.g.mode=="showing"},g.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function Ij(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(n){}return e.textAlign=="center"&&t.align!="center"&&(t.align="middle"),e.writingMode=="vertical-lr"?t.vertical="lr":e.writingMode=="vertical-rl"&&(t.vertical="rl"),e.lineInterpretation==1&&(t.snapToLines=!1),e.line!=null&&(t.line=e.line),e.position!=null&&(t.position=e.position),t}function RR(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=m(Array.from(e.cues)),u=r.next();!u.done;u=r.next())(u=u.value)&&t(u)&&e.removeCue(u);e.mode=n}re("shaka.text.SimpleTextDisplayer",fa),fa.prototype.setTextVisibility=fa.prototype.setTextVisibility,fa.prototype.isTextVisible=fa.prototype.isTextVisible,fa.prototype.destroy=fa.prototype.destroy,fa.prototype.append=fa.prototype.append,fa.prototype.remove=fa.prototype.remove,fa.prototype.configure=fa.prototype.configure;function da(){}g=da.prototype,g.configure=function(){},g.remove=function(){},g.append=function(){},g.destroy=function(){},g.isTextVisible=function(){return!1},g.setTextVisibility=function(){},re("shaka.text.StubTextDisplayer",da),da.prototype.setTextVisibility=da.prototype.setTextVisibility,da.prototype.isTextVisible=da.prototype.isTextVisible,da.prototype.destroy=da.prototype.destroy,da.prototype.append=da.prototype.append,da.prototype.remove=da.prototype.remove,da.prototype.configure=da.prototype.configure;function NR(){}function pp(e){for(;e.firstChild;)e.removeChild(e.firstChild)}re("shaka.util.Dom",NR),NR.removeAllChildren=pp;function ha(e,t,n){var r=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||dr("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new pr(function(){r.A.paused||ad(r)}).$a(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Tt,this.j.D(document,"fullscreenchange",function(){ad(r,!0)}),this.j.D(this.A,"seeking",function(){ad(r,!0)}),this.j.D(this.A,"resize",function(){var u=r.A,c=u.videoWidth;u=u.videoHeight,c&&u?r.l=c/u:r.l=null}),this.o=null,"ResizeObserver"in p&&(this.o=new ResizeObserver(function(){ad(r,!0)}),this.o.observe(this.g)),this.B=new Map}g=ha.prototype,g.configure=function(e){this.C&&this.C.$a(e.captionsUpdatePeriod)},g.append=function(e){var t=[].concat(T(this.h)),n={};e=m(e);for(var r=e.next();!r.done;n={ud:n.ud},r=e.next())n.ud=r.value,t.some(function(u){return function(c){return on(c,u.ud)}}(n))||this.h.push(n.ud);ad(this)},g.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},g.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),ad(this,n>this.h.length),!0},g.isTextVisible=function(){return this.m},g.setTextVisibility=function(e){this.m=e};function bj(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function xR(e,t,n,r,u){var c=!1,f=[],h=[];t=m(t);for(var E=t.next();!E.done;E=t.next()){E=E.value,u.push(E);var A=e.i.get(E),k=E.startTime<=r&&E.endTime>r,G=A?A.Mg:null;A&&(f.push(A.Ce),A.ic&&f.push(A.ic),k||(c=!0,e.i.delete(E),A=null)),k&&(h.push(E),A?bj(e,G)||(c=!0):(Cj(e,E,u),A=e.i.get(E),G=A.Mg,c=!0)),0<E.nestedCues.length&&G&&xR(e,E.nestedCues,G,r,u),u.pop()}if(c){for(r=m(f),u=r.next();!u.done;u=r.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(h.sort(function(te,Y){return te.startTime!=Y.startTime?te.startTime-Y.startTime:te.endTime-Y.endTime}),h=m(h),E=h.next();!E.done;E=h.next())r=e.i.get(E.value),r.ic?(r.ic.contains(n)&&r.ic.removeChild(n),n.appendChild(r.ic),r.ic.appendChild(r.Ce)):n.appendChild(r.Ce)}}function ad(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=m(e.B.values());for(var r=t.next();!r.done;r=t.next())pp(r.value);pp(e.g),e.i.clear(),e.B.clear()}e.m&&xR(e,e.h,e.g,n,[])}}function Cj(e,t,n){var r=1<n.length,u=r?"span":"div";t.lineBreak&&(u="br"),t.rubyTag&&(u=t.rubyTag),r=!r&&0<t.nestedCues.length;var c=document.createElement(u);if(u!="br"&&Nj(e,c,t,n,r),n=null,t.region&&t.region.id){n=t.region,u=e.l===4/3?2.5:1.9;var f=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==qr?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==qr?"%":"px");if(e.B.has(f))n=e.B.get(f);else{var h=document.createElement("span"),E=n.heightUnits==qr?"%":"px",A=n.widthUnits==qr?"%":"px",k=n.viewportAnchorUnits==qr?"%":"px";h.id="shaka-text-region---"+f,h.classList.add("shaka-text-region"),h.style.position="absolute",n.heightUnits===2&&n.widthUnits===2?(h.style.height=5.33*n.height+"%",h.style.width=n.width*u+"%"):(h.style.height=n.height+E,h.style.width=n.width+A),n.viewportAnchorUnits===2?(E=n.viewportAnchorY/75*100,A=n.viewportAnchorX/(e.l===4/3?160:210)*100,E-=n.regionAnchorY*n.height*5.33/100,A-=n.regionAnchorX*n.width*u/100,h.style.top=E+"%",h.style.left=A+"%"):(h.style.top=n.viewportAnchorY-n.regionAnchorY*n.height/100+k,h.style.left=n.viewportAnchorX-n.regionAnchorX*n.width/100+k),h.style.display="flex",h.style.flexDirection="column",h.style.alignItems="center",h.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(f,h),n=h}}u=c,r&&(u=document.createElement("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=t.backgroundColor,u.style.lineHeight="normal",c.appendChild(u)),e.i.set(t,{Ce:c,Mg:u,ic:n})}function Rj(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Bn?n:e==="left"||e==="start"&&t===Vn||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Vn?"line-right":"center"}function Nj(e,t,n,r,u){var c=t.style,f=n.nestedCues.length==0,h=1<r.length;c.whiteSpace="pre-wrap";var E=n.payload.replace(/\s+$/g,function(k){return" ".repeat(k.length)});if(c.webkitTextStrokeColor=n.textStrokeColor,c.webkitTextStrokeWidth=n.textStrokeWidth,c.color=n.color,c.direction=n.direction,c.opacity=n.opacity,c.paddingLeft=f_(n.linePadding,n,e.s),c.paddingRight=f_(n.linePadding,n,e.s),c.textCombineUpright=n.textCombineUpright,c.textShadow=n.textShadow,n.backgroundImage)c.backgroundImage="url('"+n.backgroundImage+"')",c.backgroundRepeat="no-repeat",c.backgroundSize="contain",c.backgroundPosition="center",c.width="100%",c.height="100%";else{if(n.nestedCues.length)var A=t;else A=document.createElement("span"),t.appendChild(A);n.border&&(A.style.border=n.border),!u&&((t=MR(r,function(k){return k.backgroundColor}))?A.style.backgroundColor=t:E&&(A.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=MR(r,function(k){return k.fontFamily}))&&(A.style.fontFamily=t),E&&(A.textContent=E)}h&&!r[r.length-1].isContainer?c.display="inline":(c.display="flex",c.flexDirection="column",c.alignItems="center",c.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),f||(c.margin="0"),c.fontFamily=n.fontFamily,c.fontWeight=n.fontWeight.toString(),c.fontStyle=n.fontStyle,c.letterSpacing=n.letterSpacing,c.fontSize=f_(n.fontSize,n,e.s),r=n.line,r!=null&&(f=n.lineInterpretation,f==cn&&(f=1,h=16,e.l&&1>e.l&&(h=32),r=0>r?100+r/h*100:r/h*100),f==1&&(c.position="absolute",n.writingMode==rn?(c.width="100%",n.lineAlign==bn?c.top=r+"%":n.lineAlign=="end"&&(c.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(c.height="100%",n.lineAlign==bn?c.left=r+"%":n.lineAlign=="end"&&(c.right=100-r+"%")):(c.height="100%",n.lineAlign==bn?c.right=r+"%":n.lineAlign=="end"&&(c.left=100-r+"%")))),c.lineHeight=n.lineHeight,n.position!=null&&(n.writingMode==rn?c.paddingLeft=n.position:c.paddingTop=n.position),e=Rj(n),e=="line-left"?c.cssFloat="left":e=="line-right"&&(c.cssFloat="right"),c.textAlign=n.textAlign,c.textDecoration=n.textDecoration.join(" "),c.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&c.writingMode==n.writingMode||(c.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==rn?c.width=n.size+"%":c.height=n.size+"%")}function f_(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var u=r.value;switch(r.unit){case"%":return u/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*u/t.cellResolution.rows+"px";default:return e}}function MR(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}re("shaka.text.UITextDisplayer",ha),ha.prototype.setTextVisibility=ha.prototype.setTextVisibility,ha.prototype.isTextVisible=ha.prototype.isTextVisible,ha.prototype.remove=ha.prototype.remove,ha.prototype.destroy=ha.prototype.destroy,ha.prototype.append=ha.prototype.append,ha.prototype.configure=ha.prototype.configure;function xj(e,t){function n(c){for(var f=c,h=m(t),E=h.next();!E.done;E=h.next())E=E.value,E.end&&E.start<c&&(f+=E.end-E.start);return c=Math.floor(f/3600),h=Math.floor(f/60%60),E=Math.floor(f%60),f=Math.floor(1e3*f%1e3),(10>c?"0":"")+c+":"+(10>h?"0":"")+h+":"+(10>E?"0":"")+E+"."+(100>f?10>f?"00":"0":"")+f}var r=c_(e);e="WEBVTT\n\n",r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,e+=n(u.startTime)+" --> "+n(u.endTime)+function(c){var f=[];switch(c.textAlign){case"left":f.push("align:left");break;case"right":f.push("align:right");break;case kn:f.push("align:middle");break;case"start":f.push("align:start");break;case"end":f.push("align:end")}switch(c.writingMode){case"vertical-lr":f.push("vertical:lr");break;case"vertical-rl":f.push("vertical:rl")}return f.length?" "+f.join(" "):""}(u)+"\n",e+=u.payload+"\n\n";return e}re("shaka.text.WebVttGenerator",function(){});function DR(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}DR.prototype.configure=function(e){this.g=e};function Mj(e,t,n){try{if(!e.g.enabled)return t;var r=d_(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=tv;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=rv;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=OR;break e}u=void 0}r.ot=u,r.su=!0;var c=ev(r);return h_(t,c)}catch(f){return wt("CMCD_SRC_ERROR","Could not generate src CMCD data.",f),t}}function d_(e){return e.g.sessionId||(e.g.sessionId=p.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function sd(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,d_(e)),n.pr=e.h.eb();var u=n.ot===nv||n.ot===rv;if(e.j&&u&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=Dj(e,n),r)r=kj(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var c=ev(e);c&&(t.uris=t.uris.map(function(f){return h_(f,c)}))}}}function Dj(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,u){return n.includes(u)&&(r[u]=t[u]),r},{}):t}function Pj(e){if(e.type===0)return Fj;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?rv:nv;if(t=="audio")return tv;if(t=="text")return e.mimeType==="application/mp4"?iv:p_}}function Oj(e,t){if(t=e.h.ob()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function PR(e,t){if(t=e.h.ob()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function Lj(e,t){var n=e.h.Hb();if(!n.length)return NaN;e=n[0],n=m(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case nv:return e.videoBandwidth||NaN;case tv:return e.audioBandwidth||NaN;default:return e.bandwidth}}function ev(e){function t(G){return 100*n(G/100)}function n(G){return Math.round(G)}function r(G){return!Number.isNaN(G)&&G!=null&&G!==""&&G!==!1}var u=[],c={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(G){return encodeURIComponent(G)},rtp:t,tb:n},f=Object.keys(e||{}).sort();f=m(f);for(var h=f.next();!h.done;h=f.next()){h=h.value;var E=e[h];if(r(E)&&(h!=="v"||E!==1)&&(h!="pr"||E!==1)){var A=c[h];A&&(E=A(E)),A=typeof E;var k=void 0;k=A==="string"&&h!=="ot"&&h!=="sf"&&h!=="st"?h+"="+JSON.stringify(E):A==="boolean"?h:A==="symbol"?h+"="+E.description:h+"="+E,u.push(k)}}return u.join(",")}function kj(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],u=[{},{},{},{}],c={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=m(t);for(var f=t.next();!f.done;f=t.next())f=f.value,u[c[f]!=null?c[f]:1][f]=e[f];for(e=0;e<u.length;e++)(c=ev(u[e]))&&(n["CMCD-"+r[e]]=c);return n}function h_(e,t){return!t||e.includes("offline:")?e:(e=new si(e),e.g.set("CMCD",t),e.toString())}var OR="m",tv="a",nv="v",rv="av",Fj="i",p_="c",iv="tt";re("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Og:"s",OTHER:"o"});function es(e){this.h=e,this.g=null}g=es.prototype,g.configure=function(e){this.h=e},g.dg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(FR)?1e3*this.g.get(FR):null},g.cg=function(){return this.h.enabled&&this.g&&this.g.has(kR)?1e3*this.g.get(kR):null},g.xh=function(){return this.h.enabled&&this.g&&this.g.has(UR)?this.g.get(UR):null},g.yh=function(){return this.h.enabled&&this.g&&this.g.has(BR)?this.g.get(BR):null},g.getBandwidthEstimate=function(e){var t=this.cg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function LR(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}re("shaka.util.CmsdManager",es),es.prototype.getBandwidthEstimate=es.prototype.getBandwidthEstimate,es.prototype.getRoundTripTime=es.prototype.yh,es.prototype.getResponseDelay=es.prototype.xh,es.prototype.getEstimatedThroughput=es.prototype.cg,es.prototype.getMaxBitrate=es.prototype.dg;var kR="etp",FR="mb",UR="rd",BR="rtt";function jR(){this.g=null,this.h=[]}function g_(e,t){return xe(function(n){if(n.g==1)return e.g?N(n,new Promise(function(r){return e.h.push(r)}),2):n.u(2);e.g=t,X(n)})}jR.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function dn(e,t){Sr.call(this);var n=this;this.l=A_,this.Rd=this.g=null,this.da=!1,this.Vd=new Tt,this.Rb=new Tt,this.m=new Tt,this.ta=new Tt,this.C=this.F=this.B=this.G=null,this.Yd=0,this.Y=new jR,this.ea=this.gf=this.qa=this.i=this.Ga=this.I=this.j=this.lb=this.K=this.rg=this.aa=this.T=this.mb=this.L=this.H=this.bb=null,this.Ia=!1,this.pa=this.o=null,this.nf=1e9,this.$c=[],this.N=NaN,this.h=cd(this),this.ba={width:1/0,height:1/0},this.Pd=new Ae(this.h,this.ba,null),this.s=null,this.sa=new Pl(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount,this.h.preferredVideoHdrLevel,this.h.preferSpatialAudio,this.h.preferredVideoLayout,this.h.preferredAudioLabel,this.h.preferredVideoLabel,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),this.Ha=this.h.preferredTextLanguage,this.Vb=this.h.preferredTextRole,this.Ub=this.h.preferForcedSubs,this.Tb=[],t&&t(this),this.T=$j(this),this.aa=new es(this.h.cmsd),this.G=zR(this),this.G.Cf(this.h.streaming.forceHTTPS),this.A=null,cv&&(this.A=cv(),this.A.configure(this.h.ads)),this.Vd.D(p,"online",function(){T_(n),n.vf()}),this.Td=new pr(function(){return t8(n)}),e&&(dr("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Vc(e,!0))}z(dn,Sr);function ov(e){e.K!=null&&(Zi(e.K),e.K.release(),e.K=null)}function Uj(e,t){if(t.lcevc.enabled){var n=e.Hb();n&&n[0]&&n[0].videoMimeType=="video/mp2t"&&(Il()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||Ke("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),ov(e),e.K==null&&(e.K=new io(e.g,e.rg,t.lcevc),e.F&&(e.F.T=e.K))}else ov(e)}function Jr(e,t){return new Wn(e,t)}g=dn.prototype,g.destroy=function(){var e=this,t;return xe(function(n){switch(n.g){case 1:return e.l==Hs?n.return():(ov(e),t=e.detach(),e.l=Hs,N(n,t,2));case 2:if(e.Vd&&(e.Vd.release(),e.Vd=null),e.Rb&&(e.Rb.release(),e.Rb=null),e.m&&(e.m.release(),e.m=null),e.ta&&(e.ta.release(),e.ta=null),e.pa=null,e.h=null,e.s=null,e.Rd=null,e.T=null,e.aa=null,!e.G){n.u(3);break}return N(n,e.G.destroy(),4);case 4:e.G=null;case 3:e.o&&(e.o.release(),e.o=null),Sr.prototype.release.call(e),X(n)}})};function ud(e,t){e.dispatchEvent(Jr("onstatechange",new Map().set("state",t)))}g.Vc=function(e,t){t=t===void 0?!0:t;var n=this,r,u,c;return xe(function(f){switch(f.g){case 1:if(n.l==Hs)throw new pt(2,7,7e3);if(r=n.g&&n.g==e,!n.g||n.g==e){f.u(2);break}return N(f,n.detach(),2);case 2:return N(f,m_(n,"attach"),4);case 4:if(f.h)return f.return();if(ce(f,5,6),r||(ud(n,"attach"),u=function(){var h=S_(n);h&&hd(n,h)},n.Rb.D(e,"error",u),n.g=e),!t||!Io()||n.F){f.u(6);break}return N(f,v_(n),6);case 6:Je(f),n.Y.release(),Te(f,0);break;case 5:return c=Ce(f),N(f,n.detach(),10);case 10:throw c}})},g.Wg=function(e){this.rg=e},g.detach=function(e){e=e===void 0?!1:e;var t=this;return xe(function(n){if(n.g==1){if(t.l==Hs)throw new pt(2,7,7e3);return N(n,t.lc(!1,e),2)}if(n.g!=3)return N(n,m_(t,"detach"),3);if(n.h)return n.return();try{t.g&&(t.Rb.ib(),t.g=null),ud(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Y.release()}X(n)})};function m_(e,t){var n;return xe(function(r){return r.g==1?(n=++e.Yd,N(r,g_(e.Y,t),2)):n!=e.Yd?(e.Y.release(),r.return(!0)):r.return(!1)})}g.lc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c,f,h,E,A,k,G;return xe(function(te){switch(te.g){case 1:return n.l!=Hs&&(n.l=A_),N(te,m_(n,"unload"),2);case 2:return te.h?te.return():(oe(te,3),n.Ia=!1,ud(n,"unload"),e&&!Io()&&(e=!1),ov(n),r=n.Tb.map(function(Y){return Y()}),n.Tb=[],N(te,Promise.all(r),5));case 5:if(n.dispatchEvent(Jr("unloading")),n.mb&&(n.mb.release(),n.mb=null),n.g&&(n.m.ib(),n.ta.ib()),n.Td.stop(),n.bb&&(n.bb.release(),n.bb=null),!n.I){te.u(6);break}return N(te,n.I.stop(),7);case 7:n.I=null,n.Ga=null;case 6:if(!n.o){te.u(8);break}return N(te,n.o.stop(),8);case 8:if(!n.j){te.u(10);break}return N(te,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.H&&(n.H.release(),n.H=null),n.C&&(n.C.release(),n.C=null),!n.F){te.u(12);break}return N(te,n.F.destroy(),13);case 13:n.F=null;case 12:if(n.A&&!t&&n.A.onAssetUnload(),n.aa&&(n.aa.g=null),n.g&&pp(n.g),!n.g||!n.g.src){te.u(14);break}return N(te,new Promise(function(Y){return new pr(Y).X(.1)}),15);case 15:n.g.removeAttribute("src"),n.g.load();case 14:if(!n.B){te.u(16);break}return N(te,n.B.destroy(),17);case 17:n.B=null;case 16:if(n.qa=null,n.gf=null,n.L=null,n.i){for(u=m(n.i.variants),c=u.next();!c.done;c=u.next())for(f=c.value,h=m([f.audio,f.video]),E=h.next();!E.done;E=h.next())(A=E.value)&&A.segmentIndex&&A.segmentIndex.release();for(k=m(n.i.textStreams),E=k.next();!E.done;E=k.next())G=E.value,G.segmentIndex&&G.segmentIndex.release()}n.i=null,n.s=new Hm,n.kf=null,n.$c=[],n.N=NaN,__(n);case 3:Je(te),n.Y.release(),Te(te,4);break;case 4:if(e&&Io()&&!n.F)return N(te,v_(n),0);te.u(0)}})},g.Ei=function(e){this.ea=e},g.load=function(e,t,n){t=t===void 0?null:t;var r=this,u,c,f,h,E,A,k,G,te,Y,ve,Le,De;return xe(function(qe){switch(qe.g){case 1:if(r.l==Hs)throw new pt(2,7,7e3);return u=null,c="",e instanceof rl?(u=e,c=u.ad()||""):c=e||"",N(qe,g_(r.Y,"load"),2);case 2:if(r.Y.release(),!r.g)throw new pt(2,7,7002);if(!r.qa){qe.u(3);break}return N(qe,r.lc(!1),3);case 3:if(f=++r.Yd,h=function(){return xe(function(Se){if(Se.g==1)return r.Yd==f?Se.u(0):u?N(Se,u.destroy(),3):Se.u(3);throw new pt(2,7,7e3)})},E=function(Se,Qe){return xe(function(Ue){switch(Ue.g){case 1:return oe(Ue,2),N(Ue,g_(r.Y,Qe),4);case 4:return N(Ue,h(),5);case 5:return N(Ue,Se(),6);case 6:return N(Ue,h(),7);case 7:u&&r.h&&(u.g=r.h);case 2:Je(Ue),r.Y.release(),Te(Ue,0)}})},ce(qe,5,6),t==null&&u&&(t=u.getStartTime()),r.ea=t,r.Ia=!1,r.dispatchEvent(Jr("loading")),u){n=u.Y,qe.u(8);break}if(n){qe.u(8);break}return N(qe,E(function(){return xe(function(Se){if(Se.g==1)return N(Se,qR(r,c),2);n=Se.h,X(Se)})},"guessMimeType_"),8);case 8:if(A=!!u,u){AR(u,r),r.s=u.getStats(),qe.u(11);break}return N(qe,ZR(r,c,t,n,!0),12);case 12:if(u=qe.h,!u){r.s=new Hm,qe.u(11);break}return AR(u,r),r.s=u.getStats(),N(qe,E(function(){return u.start()},"preload"),11);case 11:if(k=!u,G=u?u.Vb:Date.now()/1e3,r.s=u?u.getStats():new Hm,r.qa=c,r.gf=n||null,k)return N(qe,E(function(){return xe(function(Se){return N(Se,Gj(r,n),0)})},"initializeSrcEqualsDrmInner_"),24);if(r.F){qe.u(17);break}return N(qe,E(function(){return xe(function(Se){return N(Se,v_(r),0)})},"initializeMediaSourceEngineInner_"),17);case 17:return N(qe,E(function(){return u.qa},"waitForManifest"),19);case 19:return r.h=u.getConfiguration(),r.Pd=u.A,r.Ga=u.B,r.I=vj(u),r.mb=yj(u),r.lb=u.lb,r.i=u.Te(),(te=u.m)&&(r.sa=te),A&&r.g&&r.g.nodeName==="AUDIO"&&(Bj(r),r.configure("manifest.disableVideo",!0)),N(qe,E(function(){return u.pa},"waitForDrm"),20);case 20:return r.B=Ej(u),N(qe,E(function(){return xe(function(Se){return N(Se,r.B.Vc(r.g),0)})},"drmEngine_.attach"),21);case 21:return N(qe,E(function(){return u.L},"waitForChooseInitialVariant"),22);case 22:return!(Y=u.s)||r.pa&&r.pa==Y||(r.o=mj(u),r.pa=u.s,typeof r.o.setMediaElement!="function"&&(dr("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(dr("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(dr("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),ve=_j(u),Le=u.ta,N(qe,E(function(){return xe(function(Se){return N(Se,Zj(r,G,Le,ve),0)})},"loadInner_"),23);case 23:gj(u),qe.u(16);break;case 24:return N(qe,E(function(){return xe(function(Se){return N(Se,qj(r,G,n),0)})},"srcEqualsInner_"),16);case 16:r.dispatchEvent(Jr("loaded"));case 6:if(Je(qe),!u){qe.u(26);break}return N(qe,u.destroy(),26);case 26:Te(qe,0);break;case 5:if(De=Ce(qe),De.code==7e3){qe.u(28);break}return N(qe,r.lc(!1),28);case 28:throw De}})};function Bj(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}g.Ai=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c;return xe(function(f){switch(f.g){case 1:if(r=null,!(n.i&&n.I&&n.Ga&&n.qa)){f.u(2);break}return u=n.g.currentTime,n.R()&&(u=null),c=Date.now()/1e3,N(f,GR(n,n.qa,u,n.gf,c,!0,!1,!1),3);case 3:var h=r=f.h,E=n.I,A=n.Ga;h.h=n.i,h.j=E,h.B=A,h=r,E=n.pa,h.i=n.o,h.s=E,r.m=n.sa,r.start(),n.i=null,n.I=null,n.Ga=null,n.o=null,n.pa=null;case 2:return N(f,n.lc(e,t),4);case 4:return f.return(r)}})},g.preload=function(e,t,n){t=t===void 0?null:t;var r=this,u;return xe(function(c){return c.g==1?N(c,ZR(r,e,t,n),2):((u=c.h)?u.start().catch(function(){}):hd(r,new pt(2,7,7005)),c.return(u))})};function ZR(e,t,n,r,u){u=u===void 0?!1:u;var c,f,h;return xe(function(E){return E.g==1?(c=Date.now()/1e3,r?E.u(2):N(E,qR(e,t),3)):(E.g!=2&&(r=E.h),jj(e,r)?E.return(null):(f=!1,h=!0,u&&(e.o&&e.pa==e.h.abrFactory&&(h=!1),e.g&&e.g.nodeName==="AUDIO"&&(f=!0)),E.return(GR(e,t,n,r||null,c,!u,f,h))))})}function GR(e,t,n,r,u,c,f,h){c=c===void 0?!0:c,f=f===void 0?!1:f,h=h===void 0?!0:h;var E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue,vt,Nt;return xe(function(Vt){return Vt.g==1?(E=null,A=Ya(e.h),f&&(A.manifest.disableVideo=!0),k=function(){return E.T&&E.o?null:E},G=function(){return k()?k().getConfiguration():e.h},te=function(Bt,_t){k()?E.configure(Bt,_t):e.configure(Bt,_t)},e.ba.width!=1/0||e.ba.height!=1/0?Vt.u(2):N(Vt,Aa(),3)):(Vt.g!=2&&(Y=Vt.h,e.ba.width=Y.width,e.ba.height=Y.height),ve=new Ae(A,e.ba,null),Le={networkingEngine:e.G,filter:function(Bt){var _t,Zt;return xe(function(ln){if(ln.g==1)return N(ln,Ge(ve,Bt),2);if(ln.g!=4)return _t=ln.h,_t?(Zt=Jr("trackschanged"),N(ln,Promise.resolve(),4)):ln.u(0);E.dispatchEvent(Zt),X(ln)})},makeTextStreamsForClosedCaptions:function(Bt){return Jj(e,Bt)},onTimelineRegionAdded:function(Bt){var _t=E.C;e:{for(var Zt=m(_t.g),ln=Zt.next();!ln.done;ln=Zt.next())if(ln=ln.value,ln.schemeIdUri==Bt.schemeIdUri&&ln.id==Bt.id&&ln.startTime==Bt.startTime&&ln.endTime==Bt.endTime){Zt=ln;break e}Zt=null}Zt==null&&(_t.g.add(Bt),Bt=new Wn("regionadd",new Map([["region",Bt]])),_t.dispatchEvent(Bt))},onEvent:function(Bt){return E.dispatchEvent(Bt)},onError:function(Bt){return E.onError(Bt)},isLowLatencyMode:function(){return G().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return G().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){te("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&E.T&&e.j.updateDuration()},newDrmInfo:function(Bt){var _t=E.l,Zt=_t?_t.g:null;Zt&&_t.s&&ae(ve,Zt.keySystem,Bt)},onManifestUpdated:function(){var Bt=new Map().set("isLive",e.R());E.dispatchEvent(Jr("manifestupdated",Bt)),Qm(E,!1,function(){e.A&&e.A.onManifestUpdated(e.R())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()}},De=new QE(function(){return e.Ib()}),De.addEventListener("regionadd",function(Bt){var _t=Bt.region;mp(e,"timelineregionadded",_t,E),Qm(E,!1,function(){e.A&&e.A.onDashTimedMetadata(_t)})}),qe=null,A.streaming.observeQualityChanges&&(qe=new Km(function(){return e.ob()}),qe.addEventListener("qualitychange",function(Bt){var _t=Bt.quality;Bt=Bt.position,_t=new Map().set("mediaQuality",{bandwidth:_t.bandwidth,audioSamplingRate:_t.audioSamplingRate,codecs:_t.codecs,contentType:_t.contentType,frameRate:_t.frameRate,height:_t.height,mimeType:_t.mimeType,channelsCount:_t.channelsCount,pixelAspectRatio:_t.pixelAspectRatio,width:_t.width}).set("position",Bt),e.dispatchEvent(Jr("mediaqualitychanged",_t))})),Se=!0,Qe={zb:e.G,onError:function(Bt){return E.onError(Bt)},ee:function(Bt){Qm(E,!0,function(){e:{var _t=Jr("keystatuschanged");e.dispatchEvent(_t);var Zt=Object.keys(Bt);_t=Zt.length==1&&Zt[0]=="00";var ln=!1;if(Zt.length){Zt=m(e.i.variants);for(var pn=Zt.next();!pn.done;pn=Zt.next()){pn=pn.value;var Ln=[];pn.audio&&Ln.push(pn.audio),pn.video&&Ln.push(pn.video),Ln=m(Ln);for(var Mn=Ln.next();!Mn.done;Mn=Ln.next()){var qn=Mn.value;if(Mn=pn.allowedByKeySystem,qn.keyIds.size){pn.allowedByKeySystem=!0,qn=m(qn.keyIds);for(var Yn=qn.next();!Yn.done;Yn=qn.next())Yn=Yn.value,((Yn=Bt[_t?"00":Yn])||e.B.F)&&(pn.allowedByKeySystem=pn.allowedByKeySystem&&!!Yn&&!Q.includes(Yn))}Mn!=pn.allowedByKeySystem&&(ln=!0)}}}if(ln&&(ts(e),!fd(e)))break e;(_t=e.j.j)&&!_t.allowedByKeySystem&&dd(e)}})},onExpirationUpdated:function(Bt,_t){var Zt=Jr("expirationupdated");E.dispatchEvent(Zt),(Zt=E.j)&&Zt.onExpirationUpdated&&Zt.onExpirationUpdated(Bt,_t)},onEvent:function(Bt){E.dispatchEvent(Bt),Bt.type=="drmsessionupdate"&&Se&&(Se=!1,Bt=Date.now()/1e3-E.Ia,(e.s||E.getStats()).j=Bt,e.K&&Zi(e.K))}},Ue=zR(e,k),vt=function(){return e.rc(Qe)},Nt={config:A,Uh:Le,di:De,ci:qe,rc:vt,Th:ve,networkingEngine:Ue,Vg:c,Ug:h},E=new rl(t,r,u,n,Nt),Vt.return(E))})}function qR(e,t){var n,r;return xe(function(u){return u.g==1?(n=e.h.manifest.retryParameters,N(u,l_(t,e.G,n),2)):(r=u.h,r=="application/x-mpegurl"&&ms()&&(r="application/vnd.apple.mpegurl"),u.return(r))})}function jj(e,t){if(!Io())return!0;if(t){if((e.g||Tc()).canPlayType(t)=="")return!1;if(!(Io()&&t in Fe))return!0;if(um(t)){if(e.h.streaming.preferNativeHls)return!0;if(ms()&&(e.h.drm.servers["com.apple.fps"]||e.h.drm.servers["com.apple.fps.1_0"]))return e.h.streaming.useNativeHlsForFairPlay;if(ms())return e.h.streaming.useNativeHlsOnSafari}}return!1}function v_(e){var t,n,r,u,c;return xe(function(f){if(f.g==1)return ud(e,"media-source"),t=e.h.textDisplayFactory,n=t(),n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.kf=t,r=Wj(e.g,n,function(h,E,A){HR(e,h,E,A)},e.K),r.configure(e.h.mediaSource),u=e.h.manifest,c=u.segmentRelativeVttTiming,r.ba=c,N(f,r.L,2);e.F=r,X(f)})}function Zj(e,t,n,r){var u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue,vt,Nt,Vt,Bt;return xe(function(_t){switch(_t.g){case 1:for(ud(e,"load"),u=e.g,e.H=new op({Md:function(){return u.playbackRate},Xb:function(){return u.defaultPlaybackRate},Df:function(Zt){u.playbackRate=Zt},og:function(Zt){u.currentTime+=Zt}}),c=function(){return av(e)},f=function(){return eN(e)},e.m.D(u,"playing",c),e.m.D(u,"pause",c),e.m.D(u,"ended",c),e.m.D(u,"ratechange",f),Uj(e,e.h),e.Ha=e.h.preferredTextLanguage,e.Vb=e.h.preferredTextRole,e.Ub=e.h.preferForcedSubs,w_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.o.init(function(Zt,ln,pn){e.j&&Zt!=e.j.j&&uv(e,Zt,!0,ln===void 0?!1:ln,pn===void 0?0:pn)}),e.o.setMediaElement(u),e.o.setCmsdManager(e.aa),e.j=Xj(e),e.j.configure(e.h.streaming),e.l=Oo,u.textTracks&&e.m.D(u.textTracks,"addtrack",function(Zt){if(Zt.track)switch(Zt=Zt.track,Zt.kind){case"chapters":VR(e,Zt)}}),e.dispatchEvent(Jr("streaming")),h=n,(E=e.j.j)||h||(h=nN(e,!0)),A=[],k=E||h,G=m([k.video,k.audio]),te=G.next();!te.done;te=G.next())(Y=te.value)&&!Y.segmentIndex&&A.push(Y.createSegmentIndex());if(!(0<A.length)){_t.u(2);break}return N(_t,Promise.all(A),2);case 2:if(e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(k),w_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),ve=function(Zt){e.C=zj(e,Zt),e.bb=Yj(e,t),YR(e,u,Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal))},e.h.streaming.startAtSegmentBoundary||ve(e.ea),E){_t.u(4);break}if(!e.h.streaming.startAtSegmentBoundary){_t.u(5);break}return Le=e.i.presentationTimeline,De=e.ea||e.g.currentTime,qe=Le.$b(),Se=Le.pb(),De<qe?De=qe:De>Se&&(De=Se),N(_t,e8(h,De),6);case 6:Qe=_t.h,ve(Qe);case 5:uv(e,h,!0,!1,0);case 4:return e.C.ve(),Ue=e.wc().find(function(Zt){return Zt.active}),Ue||((vt=Cc(e.i.textStreams,e.Ha,e.Vb,e.Ub)[0]||null)&&YE(e.s.h,vt,!0),h&&(vt?(h.audio&&n8(e,h.audio,vt)&&(e.da=!0),e.da&&e.F.F.setTextVisibility(!0),oN(e)):e.da=!1),vt&&(e.h.streaming.alwaysStreamText||e.Ze())&&Vm(e.j,vt)),N(_t,e.j.start(r),7);case 7:e.h.abr.enabled&&(e.o.enable(),aN(e)),ts(e),fd(e),e.i.variants.some(function(Zt){return Zt.primary}),(Nt=e.R())&&(e.h.streaming.liveSync||e.i.serviceDescription||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(Vt=function(){return tN(e)},e.m.D(u,"timeupdate",Vt)):Nt||(Bt=function(){return sv(e)},e.m.D(u,"timeupdate",Bt),sv(e)),e.A&&e.A.onManifestUpdated(Nt),e.Ia=!0,e.m.na(u,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),X(_t)}})}function Gj(e,t){var n,r,u,c;return xe(function(f){return f.g==1?(n=Ei,r=Date.now()/1e3,u=!0,e.B=e.rc({zb:e.G,onError:function(h){hd(e,h)},ee:function(){},onExpirationUpdated:function(){var h=Jr("expirationupdated");e.dispatchEvent(h)},onEvent:function(h){e.dispatchEvent(h),h.type=="drmsessionupdate"&&u&&(u=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.h.drm),c={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?ba(t):"",codecs:t?Do(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.fa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},c.video.fullMimeTypes.add(wi(c.video.mimeType,c.video.codecs)),e.B.ba=!0,N(f,km(e.B,[c],[]),2)):N(f,e.B.Vc(e.g),0)})}function qj(e,t,n){var r,u,c,f,h,E,A,k,G,te;return xe(function(Y){if(Y.g==1)return ud(e,"src-equals"),r=e.g,e.C=new aR(r),u=!1,e.Tb.push(function(){u=!0}),e.ea!=null&&e.C.we(e.ea),e.H=new op({Md:function(){return r.playbackRate},Xb:function(){return r.defaultPlaybackRate},Df:function(ve){r.playbackRate=ve},og:function(ve){r.currentTime+=ve}}),c=e.h.streaming.rebufferingGoal,YR(e,r,c),f=function(){return av(e)},h=function(){return eN(e)},e.m.D(r,"playing",f),e.m.D(r,"pause",f),e.m.D(r,"ended",f),e.m.D(r,"ratechange",h),r.preload!="none"&&e.m.na(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.m.D(r.audioTracks,"addtrack",function(){return ts(e)}),e.m.D(r.audioTracks,"removetrack",function(){return ts(e)}),e.m.D(r.audioTracks,"change",function(){return ts(e)})),r.textTracks&&(e.m.D(r.textTracks,"addtrack",function(ve){if(ve.track)switch(ve=ve.track,ve.kind){case"metadata":Vj(e,ve);break;case"chapters":VR(e,ve);break;default:ts(e)}}),e.m.D(r.textTracks,"removetrack",function(){return ts(e)}),e.m.D(r.textTracks,"change",function(){return ts(e)})),r.src=Mj(e.T,e.qa,n),(qa()||ia())&&r.load(),r.preload!="none"&&!r.autoplay&&um(n)&&ys()&&r.load(),e.l=pa,e.dispatchEvent(Jr("streaming")),E=new Rr,td(r,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ve(),E.resolve()}),td(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var ve;return xe(function(Le){if(Le.g==1)return Hj(e),ve=gp(e),ve.find(function(De){return De.mode!="disabled"})?(0<ve.length&&(e.da=!0),Le.u(2)):N(Le,new Promise(function(De){e.m.na(r.textTracks,"change",De),new pr(De).X(1)}),2);if(u)return Le.return();Kj(e),X(Le)})}),r.error?E.reject(S_(e)):r.preload=="none"&&(Ke('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),E.resolve()),e.m.na(r,"error",function(){E.reject(S_(e))}),N(Y,E,2);(A=e.R())&&(e.h.streaming.liveSync||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(k=function(){return tN(e)},e.m.D(r,"timeupdate",k)):A||(G=function(){return sv(e)},e.m.D(r,"timeupdate",G),sv(e)),e.A&&(e.A.onManifestUpdated(A),A&&(te=e.Ib().end,e.m.D(r,"progress",function(){var ve=e.Ib().end;te!=ve&&(e.A.onManifestUpdated(e.R()),te=ve)}))),e.Ia=!0,X(Y)})}function Hj(e){var t=e.h.preferredAudioLanguage;t!=""&&e.wg(t,e.h.preferredVariantRole)}function Kj(e){var t=e.h.preferredTextLanguage;t!=""&&e.yf(t,e.h.preferredTextRole,e.h.preferForcedSubs)}function Vj(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues)for(var r=m(t.activeCues),u=r.next();!u.done;u=r.next())u=u.value,KR(e,u.startTime,u.endTime,u.type,u.value),e.A&&e.A.onCueMetadataChange(u.value)});var n=new pr(function(){var r=Qj(e);r=m(r);for(var u=r.next();!u.done;u=r.next())u.value.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}function HR(e,t,n,r){t=m(t);for(var u=t.next();!u.done;u=t.next())if(u=u.value,u.data&&u.cueTime&&u.frames){var c=u.cueTime+n,f=r;f&&c>f&&(f=c);for(var h=m(u.frames),E=h.next();!E.done;E=h.next())KR(e,c,f,"org.id3",E.value);e.A&&e.A.onHlsTimedMetadata(u,c)}}function KR(e,t,n,r,u){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",u),e.dispatchEvent(Jr("metadata",t))}function VR(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new pr(function(){t.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}g.hi=function(){for(var e=this.Y;e.g;)e.release()},g.rc=function(e){return new Fc(e)};function zR(e,t){function n(u){t()?t().dispatchEvent(u):e.dispatchEvent(u)}function r(u){t()?Qm(t(),!0,u):u()}return t||(t=function(){return null}),new Kr(function(u,c,f,h){var E=t()?t().i:e.o;E&&E.segmentDownloaded(u,c,f,h)},function(u,c,f){c=new Map().set("headers",u).set("request",c).set("requestType",f),n(Jr("downloadheadersreceived",c)),r(function(){if(e.aa){var h=e.aa;if(h.h.enabled){var E=u["cmsd-static"];if(E)try{var A=new Map,k=E.split(",");for(E=0;E<k.length;E++){var G=k[E].split("=");A.set(G[0],LR(G[1]))}}catch(De){}if(A=u["cmsd-dynamic"]){try{var te=new Map,Y=A.split(";");for(A=1;A<Y.length;A++){var ve=Y[A].split("=");te.set(ve[0],LR(ve[1]))}var Le=te}catch(De){Le=null}Le&&(h.g=Le)}}}})},function(u,c,f,h){u=new Map().set("request",u).set("error",c).set("httpResponseCode",f).set("aborted",h),n(Jr("downloadfailed",u))},function(u,c,f){r(function(){var h=e.T,E=f;if(E=E===void 0?{}:E,h.g.enabled)if(c.method==="HEAD")sd(h,c);else switch(u){case 0:try{if(h.g.enabled){if(E.type){e:{switch(E.type){case 4:var A="d";break e;case 3:case 2:A="h";break e;case 5:A="s";break e}A=void 0}h.m=A}sd(h,c,{ot:OR,su:!h.i})}}catch(Mn){wt("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Mn)}break;case Wa:try{if(h.g.enabled){var k=E.segment;A=0,k&&(A=k.endTime-k.startTime);var G={d:1e3*A,st:h.h.R()?"l":"v"};G.ot=Pj(E);var te=G.ot===nv||G.ot===tv||G.ot===rv||G.ot===iv,Y=E.stream;if(Y){var ve=h.h.eb();if(te&&(G.bl=Oj(h,Y.type),G.ot!==iv)){var Le=PR(h,Y.type);G.dl=ve?Le/Math.abs(ve):Le}if(Y.bandwidth&&(G.br=Y.bandwidth/1e3),Y.segmentIndex&&k){var De=Y.segmentIndex.xb(k.endTime,!0,0>ve);if(De){var qe=De.next().value;if(qe&&qe!=k){if(!Zn(k.$(),qe.$())){var Se=qe.$()[0],Qe=c.uris[0],Ue=new URL(Se),vt=new URL(Qe);if(Ue.origin!==vt.origin)var Nt=Se;else{for(var Vt=Ue.pathname.split("/").slice(1),Bt=vt.pathname.split("/").slice(1,-1);Vt[0]===Bt[0];)Vt.shift(),Bt.shift();for(;Bt.length;)Bt.shift(),Vt.unshift("..");Nt=Vt.join("/")}G.nor=Nt}if((qe.Aa||qe.ja)&&(k.Aa!=qe.Aa||k.ja!=qe.ja)){var _t=qe.Aa+"-";qe.ja&&(_t+=qe.ja),G.nrr=_t}}}var Zt=h.h.eb()||1,ln=PR(h,Y.type)||500,pn=Y.bandwidth,Ln=pn?pn*(k.endTime-k.startTime)/1e3/(ln/Zt/1e3)*h.g.rtpSafetyFactor:NaN;isNaN(Ln)||(G.rtp=Ln)}}te&&G.ot!==iv&&(G.tb=Lj(h,G.ot)/1e3),sd(h,c,G)}}catch(Mn){wt("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Mn)}break;case 2:case 5:case 6:sd(h,c,{ot:"k"});break;case 4:sd(h,c,{ot:"o"})}})},function(u,c,f,h){(u=t()?t().j:e.I)&&u.banLocation&&u.banLocation(h)},function(u,c){u=c.data.byteLength,(c=t()?t().getStats():e.s)&&(c.Ed=isNaN(c.Ed)?u:c.Ed+u)})}function zj(e,t){return new sR(e.g,e.i,e.h.streaming,t,function(){e.bb&&dR(e.bb,!0),e.j&&e.j.od(),e.L&&ld(e)},function(n){return e.dispatchEvent(n)})}function Yj(e,t){t=new Jm(e.mb,e.R()||0<t),t.addEventListener("enter",function(r){mp(e,"timelineregionenter",r.region)}),t.addEventListener("exit",function(r){mp(e,"timelineregionexit",r.region)}),t.addEventListener("skip",function(r){var u=r.region;r.seeking||(mp(e,"timelineregionenter",u),mp(e,"timelineregionexit",u))});var n=new fR(e.g);return n.g.add(t),e.lb&&n.g.add(e.lb),n}function YR(e,t,n){e.L=new Gh,e.L.g=Ol,qh(e.L,n,Math.min(.5,n/2)),__(e),e.m.D(t,"waiting",function(){return ld(e)}),e.m.D(t,"stalled",function(){return ld(e)}),e.m.D(t,"canplaythrough",function(){return ld(e)}),e.m.D(t,"progress",function(){return ld(e)})}function ld(e){switch(e.l){case pa:if(e.g.ended)var t=!0;else{var n=kt(e.g.buffered);t=n!=null&&n>=e.g.duration-1}break;case Oo:e:if(e.g.ended||Zc(e.F))t=!0;else{if(e.i.presentationTimeline.R()){n=e.i.presentationTimeline.Gb();var r=kt(e.g.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=An(e.g.buffered,e.g.currentTime),n=e.L;var u=t,c=n.i.get(n.g);t=n.g,r=u||r>=c?Nc:Ol,n.g=r,(t=t!=r)&&r===Nc&&(n.h=Date.now()),t&&__(e)}function Wj(e,t,n,r){return new Eu(e,t,n,r)}function $j(e){return new DR({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},ob:function(){return e.ob()},getCurrentTime:function(){return e.g?e.g.currentTime:0},eb:function(){return e.eb()},Zb:function(){return e.Zb()},Hb:function(){return e.Hb()},R:function(){return e.R()}},e.h.cmcd)}function Xj(e){return new vR(e.i,{Ld:function(){return e.C?e.C.Dd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},V:e.F,zb:e.G,onError:function(t){return hd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Zh:function(){e.I&&e.I.update&&e.I.update()},mf:function(t,n){var r=t.startTime,u=t.endTime,c=n.type;if(e.C){e.C.pg();var f=Zs(e.F,c);!e.R()&&e.g.paused&&f!=null&&0<f&&e.C.Dd()<f&&e.C.we(f)}ld(e),r=new Map().set("start",r).set("end",u).set("contentType",c),e.dispatchEvent(Jr("segmentappended",r)),e.o&&n.fastSwitching&&t.md&&t.Wd&&e.o.trySuggestStreams()},Yh:function(t,n){(n=n.ff)&&e.lb&&WB(e.lb,n,t)},Qf:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){n=new Pm(Qn(n));var u=0,c=m(n.data);for(t=c.next();!t.done;t=c.next())u+=t.value.length;if(u==0)r=Promise.resolve();else{for(u=new Uint8Array(u),c=0,n=m(n.data),t=n.next();!t.done;t=n.next())t=t.value,u.set(t,c),c+=t.length;Bl(r,"cenc",u),r=r.l}}else r=Promise.resolve();return r},$h:function(t,n,r){HR(e,t,n,r)},Jd:function(t,n){return e.Jd(t,n)}})}g.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Wm(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(dr("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(dr("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&dr("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){dr("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var n=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return n},delete e.mediaSource.sourceBufferExtraFeatures}e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100));var r=Gc(this.h,e,cd(this));return WR(this),r};function WR(e){if(e.Pd=new Ae(e.h,e.ba,e.B),e.I){var t=Ya(e.h.manifest);e.g&&e.g.nodeName==="AUDIO"&&(t.disableVideo=!0),e.I.configure(t)}if(e.B&&e.B.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{e.l!=Hs&&le(e.Pd,e.i)&&ts(e)}catch(c){hd(e,c)}e.o&&fd(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||dd(e)}if(e.G&&e.G.Cf(e.h.streaming.forceHTTPS),e.F)if(e.F.configure(e.h.mediaSource),e.F.ba=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.kf!=t){var n=t();n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!');var r=e.F,u=r.F;r.F=n,u&&(n.setTextVisibility(u.isTextVisible()),u.destroy()),r.g&&(r.g.j=n),e.kf=t,e.j&&(t=e.j,(n=t.i.get(vr))&&nd(t,n.stream,!0,0,!0))}else t=e.F.F,t.configure&&t.configure(e.h.textDisplayer);e.o&&(e.o.configure(e.h.abr),e.h.abr.enabled?e.o.enable():e.o.disable(),aN(e)),e.L&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),qh(e.L,t,Math.min(.5,t/2))),e.i&&w_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.A&&e.A.configure(e.h.ads),e.T&&e.T.configure(e.h.cmcd),e.aa&&e.aa.configure(e.h.cmsd)}g.getConfiguration=function(){var e=cd(this);return Gc(e,this.h,cd(this)),e},g.ag=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.g.currentTime+t,this.Ib().end),e>=t)return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},g.li=function(){for(var e in this.h)delete this.h[e];Gc(this.h,cd(this),cd(this)),WR(this)},g.qh=function(){return this.l},g.Ue=function(){return this.i?this.i.type:null},g.th=function(){return this.g},g.Zb=function(){return this.G},g.ad=function(){return this.qa},g.$f=function(){return this.A?this.A:null},g.R=function(){return this.i?this.i.presentationTimeline.R():this.g&&this.g.src?this.g.duration==1/0:!1},g.dc=function(){return this.i?this.i.presentationTimeline.dc():!1},g.Kh=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0:!1},g.Ib=function(){if(this.i){if(!this.Ia&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.$b(),end:e.pb()}}return this.g&&this.g.src&&(e=this.g.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},g.Hh=function(){this.R()&&(this.g.currentTime=this.Ib().end)},g.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},g.drmInfo=function(){return this.B?this.B.g:null},g.cd=function(){return this.B?this.B.cd():1/0},g.Se=function(){return this.B?this.B.Se():[]},g.Kd=function(){return this.B?this.B.Kd():{}},g.Xe=function(){return this.L?this.L.g==Ol:!1},g.eb=function(){return this.g?this.H?this.H.h:1:0},g.sd=function(e){var t=this;e==0?Ke("A trick play rate of 0 is unsupported!"):(this.ta.ib(),this.g.paused&&this.g.play(),this.H.set(e),this.l==Oo&&(this.o.playbackRateChanged(e),yR(this.j,1<Math.abs(e))),this.R()&&this.ta.D(this.g,"timeupdate",function(){var n=t.g.currentTime,r=t.Ib(),u=t.h.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(r.end)&&t.Wc():Math.floor(n)<=Math.floor(r.start+u)&&t.Wc()}))},g.Wc=function(){var e=this.H.Xb();this.l==pa&&this.H.set(e),this.l==Oo&&(this.H.set(e),this.o.playbackRateChanged(e),yR(this.j,!1)),this.ta.ib()},g.Hb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=m(this.i.variants),u=r.next();!u.done;u=r.next())if(u=u.value,Bf(u)){var c=xl(u);c.active=u==e,c.active||n==1||e==null||u.video!=e.video||u.audio!=e.audio||(c.active=!0),c.active&&n++,t.push(c)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(f){return Dl(f)}):[]},g.wc=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=m(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var u=Ml(r);u.active=r==e,t.push(u)}return t}return this.g&&this.g.src&&this.g.textTracks?gp(this).map(function(c){return ym(c)}):[]},g.oh=function(){var e=this.$c;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Ku(t)})},g.gh=function(e){var t=this,n,r,u,c;return xe(function(f){return f.g==1?t.l!=Oo&&t.l!=pa?f.return(null):(n=t.$c,t.i&&(n=t.i.imageStreams),(r=n.find(function(h){return h.id==e}))?r.segmentIndex?f.u(2):N(f,r.createSegmentIndex(),2):f.return(null)):f.g!=4?(u=[],r.segmentIndex.tc(function(h){var E=$R(h.tilesLayout||r.tilesLayout);if(E){E=E.rows*E.Sb;for(var A=h.i-h.startTime,k=0;k<E;k++)u.push(t.fg(e,h.startTime+A*k/E))}}),N(f,Promise.all(u),4)):(c=f.h,f.return(c.filter(function(h){return h})))})};function $R(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Sb:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}g.fg=function(e,t){var n=this,r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue;return xe(function(vt){return vt.g==1?n.l!=Oo&&n.l!=pa?vt.return(null):(r=n.$c,n.i&&(r=n.i.imageStreams),(u=r.find(function(Nt){return Nt.id==e}))?u.segmentIndex?vt.u(2):N(vt,u.createSegmentIndex(),2):vt.return(null)):(c=u.segmentIndex.find(t),c==null||(f=u.segmentIndex.get(c),h=$R(f.tilesLayout||u.tilesLayout),!h)?vt.return(null):(E=u.width||0,A=u.height||0,k=E/h.Sb,G=A/h.rows,te=h.Sb*h.rows,Y=f.i-f.startTime,ve=f.A||Y/te,Le=f.startTime,qe=De=0,1<te&&(Se=Math.floor((t-f.startTime)/ve),Le=f.startTime+Se*ve,De=Se%h.Sb*k,qe=Math.floor(Se/h.Sb)*G),Qe=!1,(Ue=f.s)&&(Qe=!0,G=Ue.height,De=Ue.positionX,qe=Ue.positionY,k=Ue.width),vt.return({segment:f,imageHeight:A,imageWidth:E,height:G,positionX:De,positionY:qe,startTime:Le,duration:ve,uris:f.$(),width:k,sprite:Qe})))})},g.xg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.s&&(YE(this.s.h,t,!1),Vm(this.j,t),lv(this),this.Ha=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){t=gp(this),t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,bc(n)==e.id?n.mode=this.da?"showing":"hidden":n.mode="disabled";lv(this)}},g.zf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){this.h.abr.enabled&&Ke("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.i.variants.find(function(u){return u.id==e.id});r&&Bf(r)&&(uv(this,r,!1,t,n),this.sa=new Zh(r,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),fd(this))}else if(this.g&&this.g.audioTracks){for(t=Array.from(this.g.audioTracks),t=m(t),n=t.next();!n.done;n=t.next())if(n=n.value,bc(n)==e.id){rN(this,n);break}}},g.ih=function(){return uN(this.Hb())},g.Ah=function(){return uN(this.wc())},g.hh=function(){return Array.from(sN(this.Hb()))},g.zh=function(){return Array.from(sN(this.wc()))},g.wg=function(e,t,n,r){if(n=n===void 0?0:n,r=r===void 0?0:r,this.i&&this.C){this.sa=new Pl(e,t||"",n,"",!1,"","","",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),e=function(f,h){return f.video||h.video?f.video&&h.video?Math.abs((f.video.height||0)-(h.video.height||0))+Math.abs((f.video.width||0)-(h.video.width||0)):1/0:0},t=this.j.j;var u=this.sa.create(this.i.variants);n=null,u=m(u.values());for(var c=u.next();!c.done;c=u.next())c=c.value,(!n||e(n,t)>e(c,t))&&(n=c);n?(e=xl(n),this.zf(e,!0,r)):dd(this)}else this.g&&this.g.audioTracks&&(r=Cc(this.Hb(),e,t||"",!1)[0])&&this.zf(r)},g.yf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Ha=e,this.Vb=t||"",this.Ub=n,(e=Cc(this.i.textStreams,this.Ha,this.Vb,this.Ub)[0]||null)&&e!=this.j.s&&(YE(this.s.h,e,!1),this.h.streaming.alwaysStreamText||this.Ze())&&(Vm(this.j,e),lv(this))):(e=Cc(this.wc(),e,t||"",n)[0])&&this.xg(e)},g.si=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var r=null,u=m(this.i.variants),c=u.next();!c.done;c=u.next())if(c=c.value,c.audio.label==e){r=c;break}r!=null&&(this.sa=new Pl(r.language,"",0,"",!1,"",e,"",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),dd(this,t,n))}else if(this.g&&this.g.audioTracks){for(n=Array.from(this.g.audioTracks),t=null,n=m(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&rN(this,t)}},g.Ze=function(){var e=this.da;return this.F&&this.l==Oo?this.F.F.isTextVisible():this.g&&this.g.src&&this.g.textTracks?gp(this).some(function(t){return t.mode=="showing"}):e},g.bg=function(){return this.g&&this.g.src&&this.g.textTracks?XR(this).map(function(e){return ym(e)}):[]},g.jh=function(e){if(!this.g||!this.g.src||!this.g.textTracks)return[];var t=Cr(e),n=XR(this).filter(function(h){return Cr(h.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=m(n);for(var u=n.next();!u.done;u=n.next())if((u=u.value)&&u.cues){u=m(u.cues);for(var c=u.next();!c.done;c=u.next()){var f=c.value;(c=f.id)&&c!=""||(c=f.startTime+"-"+f.endTime+"-"+f.text),f={id:c,title:f.text,startTime:f.startTime,endTime:f.endTime},r.has(c)||(e.push(f),r.add(c))}}return e};function gp(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function Qj(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="metadata"})}function XR(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="chapters"})}g.Dg=function(e){if(e=!!e,this.da!=e){if(this.da=e,this.l==Oo)this.F.F.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.s||(e=Cc(this.i.textStreams,this.Ha,this.Vb,this.Ub),0<e.length&&(Vm(this.j,e[0]),lv(this))):JB(this.j));else if(this.g&&this.g.src&&this.g.textTracks){var t=gp(this);t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}oN(this)}},g.vh=function(){if(this.C)var e=this.C.Dd();else{if(this.ea==null)return new Date;e=this.ea}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.B||t.i)+e))}return this.g&&this.g.getStartDate?(t=this.g.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},g.eg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.B||e.i))}return this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:e):null},g.Nd=function(){return this.R()&&this.i?this.i.presentationTimeline.Nd():null},g.ob=function(){if(this.l==Oo)return this.F.ob();var e={total:[],audio:[],video:[],text:[]};return this.l==pa&&(e.total=yt(this.g.buffered)),e},g.getStats=function(){if(this.l!=Oo&&this.l!=pa)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,bytesDownloaded:NaN,switchHistory:[],stateHistory:[]};av(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.L=this.C.Mf(),this.s.N=this.C.Nf()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.K=Number(n.droppedVideoFrames),t.I=r,this.s.H=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==Oo){if(n=this.j.j,t=this.j.s,n){r=this.H?this.H.h:1;var u=r*n.bandwidth;t&&t.bandwidth&&(u+=r*t.bandwidth),this.s.B=u}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.R()&&(n=this.eg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.s.G=this.i.presentationTimeline.g),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==pa&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var c=this.s;e=c.o,n=c.l,t=c.B,r=c.I,u=c.K;var f=c.H,h=c.N,E=c.L,A=c.A,k=c.i,G=c.m,te=c.F,Y=c.j,ve=zE(c.g,"playing"),Le=zE(c.g,"paused"),De=zE(c.g,"buffering"),qe=c.s,Se=c.C,Qe=c.G,Ue=c.Ed,vt=HB(c.g),Nt=[];c=m(c.h.g);for(var Vt=c.next();!Vt.done;Vt=c.next())Vt=Vt.value,Nt.push({timestamp:Vt.timestamp,id:Vt.id,type:Vt.type,fromAdaptation:Vt.fromAdaptation,bandwidth:Vt.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:u,corruptedFrames:f,stallsDetected:h,gapsJumped:E,estimatedBandwidth:A,completionPercent:k,loadLatency:G,manifestTimeSeconds:te,drmTimeSeconds:Y,playTime:ve,pauseTime:Le,bufferingTime:De,licenseTime:qe,liveLatency:Se,maxSegmentDuration:Qe,bytesDownloaded:Ue,stateHistory:vt,switchHistory:Nt}},g.Rg=function(e,t,n,r,u,c,f){f=f===void 0?!1:f;var h=this,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe;return xe(function(Ue){switch(Ue.g){case 1:if(h.l!=Oo&&h.l!=pa)throw new pt(1,7,7004);if(n!="subtitles"&&n!="captions"&&Ke("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){Ue.u(2);break}return N(Ue,y_(h,e),3);case 3:r=Ue.h;case 2:if(E=[],h.A&&(E=h.A.getCuePoints()),h.l!=pa){Ue.u(4);break}return f&&(n="forced"),N(Ue,QR(h,e,t,n,r,c||"",E),5);case 5:if(A=Cr(t),k=h.wc(),G=k.find(function(vt){return Cr(vt.language)==A&&vt.label==(c||"")&&vt.kind==n}))return ts(h),Ue.return(G);throw new pt(1,2,2012);case 4:if(te=Ei,Y=h.g.duration,h.i&&(Y=h.i.presentationTimeline.getDuration()),Y==1/0)throw new pt(1,4,4033);if(!E.length){Ue.u(6);break}return N(Ue,E_(h,e,h.G,h.h.streaming.retryParameters),7);case 7:ve=Ue.h,Le=JR(h,ve,r,E),De=new Blob([Le],{type:"text/vtt"}),e=qm(De),r="text/vtt";case 6:if(qe={id:h.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:VE(0,Y,[e]),mimeType:r||"",codecs:u||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:c||null,type:te.ma,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!f,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([wi(r||"",u||"")])},Se=wi(qe.mimeType,qe.codecs),Qe=Cl(Se),!Qe)throw new pt(2,2,2014,r);return h.i.textStreams.push(qe),ts(h),Ue.return(Ml(qe))}})},g.Sg=function(e,t){var n=this,r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se;return xe(function(Qe){switch(Qe.g){case 1:if(n.l!=Oo&&n.l!=pa)throw new pt(1,7,7004);if(t){Qe.u(2);break}return N(Qe,y_(n,e),3);case 3:t=Qe.h;case 2:if(t!="text/vtt")throw new pt(1,2,2017,e);if(r=Ei,u=n.g.duration,n.i&&(u=n.i.presentationTimeline.getDuration()),u==1/0)throw new pt(1,4,4045);return N(Qe,E_(n,e,n.G,n.h.streaming.retryParameters),4);case 4:if(c=Qe.h,f=ji[t],!f)throw new pt(2,2,2014,t);for(h=f(),E={periodStart:0,segmentStart:0,segmentEnd:u,vttOffset:0},A=Qn(c),k=h.parseMedia(A,E,e),G=[],te={},Y=m(k),ve=Y.next();!ve.done;te={Rc:te.Rc,Nb:te.Nb},ve=Y.next())te.Nb=ve.value,te.Rc=null,Le=function(Ue){return function(){return Ue.Rc==null&&(Ue.Rc=fo([e],[Ue.Nb.payload])),Ue.Rc||[]}}(te),De=new et(te.Nb.startTime,te.Nb.endTime,Le,0,null,null,0,0,1/0),te.Nb.payload.includes("#xywh")&&(qe=te.Nb.payload.split("#xywh=")[1].split(","),qe.length===4&&De.Eg({height:parseInt(qe[3],10),positionX:parseInt(qe[0],10),positionY:parseInt(qe[1],10),width:parseInt(qe[2],10)})),G.push(De);return Se={id:n.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(G),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.ue,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([wi(t||"","")])},n.l==pa?n.$c.push(Se):n.i.imageStreams.push(Se),ts(n),Qe.return(Ku(Se))}})},g.Qg=function(e,t,n){var r=this,u,c,f,h;return xe(function(E){switch(E.g){case 1:if(r.l!=Oo&&r.l!=pa)throw new pt(1,7,7004);if(n){E.u(2);break}return N(E,y_(r,e),3);case 3:n=E.h;case 2:return u=[],r.A&&(u=r.A.getCuePoints()),N(E,QR(r,e,t,"chapters",n,"",u),4);case 4:if(c=E.h,f=r.bg(),h=f.find(function(A){return A.language==t}),!h){E.u(5);break}return N(E,new Promise(function(A,k){r.m.na(c,"load",A),r.m.na(c,"error",function(){k(new pt(1,2,2015))})}),6);case 6:return ts(r),E.return(h);case 5:throw new pt(1,2,2012)}})};function y_(e,t){var n;return xe(function(r){switch(r.g){case 1:return ce(r,2),N(r,l_(t,e.G,e.h.streaming.retryParameters),4);case 4:n=r.h,de(r,3);break;case 2:Ce(r);case 3:if(n)return r.return(n);throw new pt(1,2,2011,t)}})}function QR(e,t,n,r,u,c,f){var h,E,A,k;return xe(function(G){if(G.g==1)return u!="text/vtt"||f.length?N(G,E_(e,t,e.G,e.h.streaming.retryParameters),3):G.u(2);G.g!=2&&(h=G.h,E=JR(e,h,u,f),A=new Blob([E],{type:"text/vtt"}),t=qm(A),u="text/vtt"),k=document.createElement("track");var te=e.T,Y=t;try{if(te.g.enabled){var ve=d_(te);ve.ot=p_,ve.su=!0;var Le=ev(ve),De=h_(Y,Le)}else De=Y}catch(qe){wt("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",qe),De=Y}return k.src=De,k.label=c,k.kind=r,k.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(k),G.return(k)})}function E_(e,t,n,r){var u,c,f;return xe(function(h){if(h.g==1){u=Wa,c=Li([t],r),c.method="GET";var E=e.T;try{E.g.enabled&&sd(E,c,{ot:p_,su:!0})}catch(A){wt("CMCD_TEXT_ERROR","Could not generate text CMCD data.",A)}return N(h,n.request(u,c).promise,2)}return f=h.h,h.return(f.data)})}function JR(e,t,n,r){var u=ji[n];if(u)return n=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=Qn(t),t=n.parseMedia(t,e,null),xj(t,r);throw new pt(2,2,2014,n)}g.xi=function(e,t){this.ba.width=e,this.ba.height=t},g.vf=function(e){if(this.l==Oo){var t=this.j;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.A)t=!1;else{for(var n=m(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.gd||r.Qa||r.ub||(r.gd=!1,_s(t,r,e));t=!0}}else t=!1;return t},g.Te=function(){return Ke("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},g.rh=function(){return this.Ga};function cd(e){var t=id();return t.streaming.failureCallback=function(n){if(e.R()){var r=null;n.code==1001||n.code==1002?r=1:n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.vf(r))}},t.textDisplayFactory=function(){if(e.Rd){var n=e.getConfiguration();return new ha(e.g,e.Rd,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new fa(e.g,"Shaka Player TextTrack"):new da},t}g.Hg=function(e){this.Rd=e};function Jj(e,t){for(var n=new Set,r=m(t.textStreams),u=r.next();!u.done;u=r.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||n.add(u.originalId);for(r=m(t.variants),u=r.next();!u.done;u=r.next())if((u=u.value.video)&&u.closedCaptions){for(var c=m(u.closedCaptions.keys()),f=c.next();!f.done;f=c.next())if(f=f.value,!n.has(f)){var h=f.startsWith("CC")?"application/cea-608":"application/cea-708",E=new _i,A=u.closedCaptions.get(f);h={id:e.nf++,originalId:f,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:E,mimeType:h,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:A,originalLanguage:A,label:null,type:vr,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([wi(h,"")])},t.textStreams.push(h),n.add(f)}}}function e8(e,t){var n,r,u,c,f;return xe(function(h){return h.g==1?(n=e.audio,r=e.video,u=function(E,A){var k,G,te;return xe(function(Y){return Y.g==1?E?N(Y,E.createSegmentIndex(),2):Y.return(null):(G=(k=E.segmentIndex.xb(A))?k.next().value:null,G?(te=G.startTime,Y.return(te)):Y.return(null))})},N(h,u(n,t),2)):h.g!=3?(c=h.h,N(h,u(r,t),3)):(f=h.h,f!=null&&c!=null?h.return(Math.max(f,c)):f!=null?h.return(f):c!=null?h.return(c):h.return(t))})}function __(e){var t=e.Xe();if(e.s&&e.L&&e.C){if(e.T){var n=e.T;t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t}av(e)}t=new Map().set("buffering",t),e.dispatchEvent(Jr("buffering",t))}function eN(e){var t=e.g.playbackRate;t!=0&&(e.H&&e.H.set(t),t=Jr("ratechange"),e.dispatchEvent(t))}function av(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==Ol?n="buffering":e.g.paused?n="paused":e.g.ended&&(n="ended");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var u=Date.now()/1e3;t.g.duration=u-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:u,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Jr("statechanged",n)))}}function tN(e){var t=e.g.playbackRate,n=e.R();if(e.h.streaming.vodDynamicPlaybackRate&&!n){var r=e.h.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.ag();u<=e.h.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.sd(r):u==1&&t!==e.H.Xb()&&e.Wc()}if(n&&(u=e.Ib(),Number.isFinite(u.end)&&!(e.g.currentTime<u.start))){if(e.h.streaming.liveSync)var c=e.h.streaming.liveSyncMaxLatency,f=e.h.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(c=e.i.serviceDescription.maxLatency||e.h.streaming.liveSyncMaxLatency,f=e.i.serviceDescription.maxPlaybackRate||e.h.streaming.liveSyncPlaybackRate);if(e.h.streaming.liveSync)var h=e.h.streaming.liveSyncMinLatency,E=e.h.streaming.liveSyncMinPlaybackRate;else e.i&&e.i.serviceDescription&&(h=e.i.serviceDescription.minLatency||e.h.streaming.liveSyncMinLatency,E=e.i.serviceDescription.minPlaybackRate||e.h.streaming.liveSyncMinPlaybackRate);if(n=u.end-e.g.currentTime,r=0,e.l==pa){var A=e.g.buffered;0<A.length&&(r=A.end(A.length-1),r=Math.max(f,r-u.end))}u=e.h.streaming.liveSyncPanicMode,A=1e3*e.h.streaming.liveSyncPanicThreshold;var k=Date.now()-e.L.h;u&&!E&&(E=e.h.streaming.liveSyncMinPlaybackRate),u&&E&&k<=A?t!=E&&e.sd(E):c&&f&&n-r>c?t!=f&&e.sd(f):h&&E&&n-r<h?t!=E&&e.sd(E):t!==e.H.Xb()&&e.Wc()}}function sv(e){if(e.g){var t=!1,n=e.g.currentTime/e.g.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.N)?(e.N=n,t=!0):(n=Math.max(e.N,n),e.N!=n&&(e.N=n,t=!0))),t){var r;e.N==0?r=Jr("started"):e.N==25?r=Jr("firstquartile"):e.N==50?r=Jr("midpoint"):e.N==75?r=Jr("thirdquartile"):e.N==100&&(r=Jr("complete")),r&&e.dispatchEvent(r)}}}function fd(e){try{se(e.Pd,e.i)}catch(n){return hd(e,n),!1}var t=jf(e.i.variants);return t=e.sa.create(t),e.o.setVariants(Array.from(t.values())),!0}function nN(e,t){return t=t===void 0?!1:t,fd(e)?e.o.chooseVariant(t):null}function t8(e){function t(f){var h="";return f.video&&(h+="video:"+f.video.id),f.audio&&(h=h+(h?"&":"")+("audio:"+f.audio.id)),h}for(var n=Date.now()/1e3,r=!1,u=m(e.i.variants),c=u.next();!c.done;c=u.next())c=c.value,0<c.disabledUntilTime&&c.disabledUntilTime<=n&&(c.disabledUntilTime=0,r=!0,""+t(c),void 0);e.i.variants.every(function(f){return f.disabledUntilTime===0})&&e.Td.stop(),r&&dd(e,!0,void 0,!1,!1)}function dd(e,t,n,r,u){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,u=u===void 0?!0:u;var c=nN(e);c&&uv(e,c,u,t,n,r)}function uv(e,t,n,r,u,c){c=c===void 0?!1:c;var f=e.j.j;if(t==f)r&&ER(e.j,t,r,u,!0);else{var h=e.s.h;h.h!=t&&(h.h=t,h.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),ER(e.j,t,r,u,c,n),r=null,f&&(r=xl(f)),t=xl(t),n?(n=new Map().set("oldTrack",r).set("newTrack",t),e.K&&Bs(e.K,t,e.Ue()),n=Jr("adaptation",n),pd(e,n)):iN(e,r,t)}}function rN(e,t){var n=Array.from(e.g.audioTracks).find(function(r){return r.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=Dl(n),t=Dl(t),iN(e,n,t)}function n8(e,t,n){if(e.h.autoShowText==0)return!1;if(e.h.autoShowText==1)return!0;var r=Cr(e.h.preferredTextLanguage);return n=Cr(n.language),e.h.autoShowText==2?ju(n,r):e.h.autoShowText==3?(e=Cr(t.language),ju(n,r)&&!ju(e,n)):(Ke("Invalid autoShowText setting!"),!1)}function ts(e){var t=Jr("trackschanged");pd(e,t)}function iN(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&Bs(e.K,n,e.Ue()),n=Jr("variantchanged",t),pd(e,n)}function lv(e){var t=Jr("textchanged");pd(e,t)}function oN(e){var t=Jr("texttrackvisibility");pd(e,t)}function aN(e){e.h.abr.enabled||T_(e);var t=new Map().set("newStatus",e.h.abr.enabled);pd(e,Jr("abrstatuschanged",t))}function T_(e,t){if(t=t===void 0?!0:t,e.l==Oo){e.Td.stop();for(var n=m(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&fd(e)}}g.Jd=function(e,t){if(!this.h.abr.enabled||this.l===Hs||!navigator.onLine)return!1;if(this.i.variants.some(function(c){return(c=c[e.type])&&c.id!==e.id?e.type=="audio"?e.language===c.language:!0:!1})){for(var n=m(this.i.variants),r=n.next();!r.done;r=n.next()){r=r.value;var u=r[e.type];u&&u.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t)}return this.Td.$a(1),t=this.ob().video.reduce(function(c,f){return c+f.end-f.start},0),dd(this,!0,t,!0,!1),!0}return!1};function hd(e,t){var n,r,u;return xe(function(c){switch(c.g){case 1:if(e.l==Hs)return c.return();if(n=!0,!(e.Ia&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){c.u(2);break}return ce(c,3),N(c,dj(e.j),5);case 5:r=c.h,n=!r,de(c,2);break;case 3:Ce(c),n=!0;case 2:if(!n)return c.return();t.severity===2&&T_(e,!1),u=Jr("error",new Map().set("detail",t)),e.dispatchEvent(u),u.defaultPrevented&&(t.handled=!0),X(c)}})}function mp(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(Jr(t,e))}function S_(e){if(!e.g.error)return null;var t=e.g.error.code;if(t==1)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new pt(2,3,3016,t,n,e.g.error.message)}function w_(e,t,n){0<t&&(e.R()||e.Gg(t)),t=e.getDuration(),n<t&&(e.R()||e.Za(n))}function pd(e,t){xe(function(n){if(n.g==1)return N(n,Promise.resolve(),2);e.l!=Hs&&e.dispatchEvent(t),X(n)})}function sN(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Cr(n.language)):t.add("und");return t}function uN(e){var t=new Map,n=new Map;e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u="und",c=[];r.language&&(u=Cr(r.language)),r.type=="variant"?c=r.audioRoles:c=r.roles,c&&c.length||(c=[""]),t.has(u)||t.set(u,new Set),c=m(c);for(var f=c.next();!f.done;f=c.next())f=f.value,t.get(u).add(f),r.label&&(n.has(u)||n.set(u,new Map),n.get(u).set(f,r.label))}var h=[];return t.forEach(function(E,A){E=m(E);for(var k=E.next();!k.done;k=E.next()){k=k.value;var G=null;n.has(A)&&n.get(A).has(k)&&(G=n.get(A).get(k)),h.push({language:A,role:k,label:G})}}),h}re("shaka.Player",dn),dn.prototype.setVideoContainer=dn.prototype.Hg,dn.prototype.getManifestParserFactory=dn.prototype.rh,dn.prototype.getManifest=dn.prototype.Te,dn.prototype.retryStreaming=dn.prototype.vf,dn.prototype.setMaxHardwareResolution=dn.prototype.xi,dn.prototype.addChaptersTrack=dn.prototype.Qg,dn.prototype.addThumbnailsTrack=dn.prototype.Sg,dn.prototype.addTextTrackAsync=dn.prototype.Rg,dn.prototype.getStats=dn.prototype.getStats,dn.prototype.getBufferedInfo=dn.prototype.ob,dn.prototype.getSegmentAvailabilityDuration=dn.prototype.Nd,dn.prototype.getPresentationStartTimeAsDate=dn.prototype.eg,dn.prototype.getPlayheadTimeAsDate=dn.prototype.vh,dn.prototype.setTextTrackVisibility=dn.prototype.Dg,dn.prototype.getChapters=dn.prototype.jh,dn.prototype.getChaptersTracks=dn.prototype.bg,dn.prototype.isTextTrackVisible=dn.prototype.Ze,dn.prototype.selectVariantsByLabel=dn.prototype.si,dn.prototype.selectTextLanguage=dn.prototype.yf,dn.prototype.selectAudioLanguage=dn.prototype.wg,dn.prototype.getTextLanguages=dn.prototype.zh,dn.prototype.getAudioLanguages=dn.prototype.hh,dn.prototype.getTextLanguagesAndRoles=dn.prototype.Ah,dn.prototype.getAudioLanguagesAndRoles=dn.prototype.ih,dn.prototype.selectVariantTrack=dn.prototype.zf,dn.prototype.selectTextTrack=dn.prototype.xg,dn.prototype.getThumbnails=dn.prototype.fg,dn.prototype.getAllThumbnails=dn.prototype.gh,dn.prototype.getImageTracks=dn.prototype.oh,dn.prototype.getTextTracks=dn.prototype.wc,dn.prototype.getVariantTracks=dn.prototype.Hb,dn.prototype.cancelTrickPlay=dn.prototype.Wc,dn.prototype.trickPlay=dn.prototype.sd,dn.prototype.getPlaybackRate=dn.prototype.eb,dn.prototype.isBuffering=dn.prototype.Xe,dn.prototype.getKeyStatuses=dn.prototype.Kd,dn.prototype.getActiveSessionsMetadata=dn.prototype.Se,dn.prototype.getExpiration=dn.prototype.cd,dn.prototype.drmInfo=dn.prototype.drmInfo,dn.prototype.keySystem=dn.prototype.keySystem,dn.prototype.goToLive=dn.prototype.Hh,dn.prototype.seekRange=dn.prototype.Ib,dn.prototype.isAudioOnly=dn.prototype.Kh,dn.prototype.isInProgress=dn.prototype.dc,dn.prototype.isLive=dn.prototype.R,dn.prototype.getAdManager=dn.prototype.$f,dn.prototype.getAssetUri=dn.prototype.ad,dn.prototype.getNetworkingEngine=dn.prototype.Zb,dn.prototype.getMediaElement=dn.prototype.th,dn.prototype.getManifestType=dn.prototype.Ue,dn.prototype.getLoadMode=dn.prototype.qh,dn.prototype.resetConfiguration=dn.prototype.li,dn.prototype.getBufferFullness=dn.prototype.ag,dn.prototype.getConfiguration=dn.prototype.getConfiguration,dn.prototype.configure=dn.prototype.configure,dn.prototype.releaseAllMutexes=dn.prototype.hi,dn.prototype.preload=dn.prototype.preload,dn.prototype.unloadAndSavePreload=dn.prototype.Ai,dn.prototype.load=dn.prototype.load,dn.prototype.updateStartTime=dn.prototype.Ei,dn.prototype.unload=dn.prototype.lc,dn.prototype.detach=dn.prototype.detach,dn.prototype.attachCanvas=dn.prototype.Wg,dn.prototype.attach=dn.prototype.Vc,dn.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,u,c,f;return xe(function(h){if(h.g==1)return t={},e?N(h,ee(),3):h.u(2);h.g!=2&&(t=h.h);var E={};if(Io())for(var A in Fe)E[A]=!0;A=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var k=A.next();!k.done;k=A.next())k=k.value,E[k]=Io()?!!Fe[k]:uu(k);for(n=E,A='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(T(du)),E={},A=m(A),k=A.next();!k.done;k=A.next()){k=k.value,E[k]=Io()?Cl(k)?!0:Ot(k)||!!ro(k):uu(k);var G=k.split(";")[0];E[G]=E[G]||E[k]}r=E,u={manifest:n,media:r,drm:t},c=I_;for(f in c)u[f]=c[f]();return h.return(u)})},dn.isBrowserSupported=function(){if(p.Promise||Ke("A Promise implementation or polyfill is required"),!(p.Promise&&p.Uint8Array&&Array.prototype.forEach)||Yr("Trident/"))return!1;var e=ys();return e&&9>e||!(p.MediaKeys&&p.navigator&&p.navigator.requestMediaKeySystemAccess&&p.MediaKeySystemAccess&&p.MediaKeySystemAccess.prototype.getConfiguration)?!1:Io()?!0:uu("application/x-mpegurl")},dn.setAdManagerFactory=function(e){cv=e},dn.registerSupportPlugin=function(e,t){I_[e]=t},dn.prototype.destroy=dn.prototype.destroy;var Hs=0,A_=1,Oo=2,pa=3;dn.LoadMode={DESTROYED:Hs,NOT_LOADED:A_,MEDIA_SOURCE:Oo,SRC_EQUALS:pa},dn.version="v4.8.2";var lN=["4","8"];Lr=new function(e){this.g=e,this.i=ei,this.h=Ji}(new Or(Number(lN[0]),Number(lN[1])));var I_={},cv=null;function cN(){this.h=[],this.j=this.i=this.g=0}function lr(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Tt,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}g=lr.prototype,g.getDuration=function(){return this.g.getDuration()},g.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},g.getRemainingTime=function(){return this.h.getRemainingTime()},g.isPaused=function(){return this.i},g.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.h.getAdSkippableState()},g.skip=function(){return this.h.skip()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.resume()},g.getVolume=function(){return this.h.getVolume()},g.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},g.isMuted=function(){return this.h.getVolume()==0},g.isLinear=function(){return this.g.isLinear()},g.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},g.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return this.g.getMediaUrl()},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.g=null},re("shaka.ads.ClientSideAd",lr),lr.prototype.release=lr.prototype.release,lr.prototype.getPodIndex=lr.prototype.getPodIndex,lr.prototype.getTimeOffset=lr.prototype.getTimeOffset,lr.prototype.getMediaUrl=lr.prototype.getMediaUrl,lr.prototype.getAdvertiserName=lr.prototype.getAdvertiserName,lr.prototype.getCreativeAdId=lr.prototype.getCreativeAdId,lr.prototype.getAdId=lr.prototype.getAdId,lr.prototype.getVastMediaWidth=lr.prototype.getVastMediaWidth,lr.prototype.getVastMediaHeight=lr.prototype.getVastMediaHeight,lr.prototype.getVastMediaBitrate=lr.prototype.getVastMediaBitrate,lr.prototype.getDescription=lr.prototype.getDescription,lr.prototype.getTitle=lr.prototype.getTitle,lr.prototype.getPositionInSequence=lr.prototype.getPositionInSequence,lr.prototype.getSequenceLength=lr.prototype.getSequenceLength,lr.prototype.setMuted=lr.prototype.setMuted,lr.prototype.resize=lr.prototype.resize,lr.prototype.isLinear=lr.prototype.isLinear,lr.prototype.isMuted=lr.prototype.isMuted,lr.prototype.setVolume=lr.prototype.setVolume,lr.prototype.getVolume=lr.prototype.getVolume,lr.prototype.play=lr.prototype.play,lr.prototype.pause=lr.prototype.pause,lr.prototype.skip=lr.prototype.skip,lr.prototype.canSkipNow=lr.prototype.canSkipNow,lr.prototype.getTimeUntilSkippable=lr.prototype.getTimeUntilSkippable,lr.prototype.isSkippable=lr.prototype.isSkippable,lr.prototype.isPaused=lr.prototype.isPaused,lr.prototype.getRemainingTime=lr.prototype.getRemainingTime,lr.prototype.getMinSuggestedDuration=lr.prototype.getMinSuggestedDuration,lr.prototype.getDuration=lr.prototype.getDuration;function fv(e,t,n,r,u){var c=this;this.o=e,this.i=t,this.C=!1,this.A=this.s=null,this.F=NaN,this.m=u,this.j=null,this.h=new Tt,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),e=new google.ima.AdDisplayContainer(this.o,this.i),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v4.8.2"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(f){r8(c,f)}),this.h.D(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(f){fN(c,f)}),this.h.D(this.i,"ended",function(){c.l.contentComplete()}),this.h.na(this.i,"play",function(){c.C=!0})}fv.prototype.configure=function(e){this.s=e},fv.prototype.stop=function(){this.g&&this.g.stop(),this.o&&pp(this.o)},fv.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()};function fN(e,t){t.getError(),t=new Map().set("originalEvent",t),e.m(new Wn("ad-error",t)),hv(e,null),e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",[])))}function r8(e,t){if(e.m(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),e.s.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.m(new Wn("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=m(r);for(var u=r.next();!u.done;u=r.next())t.push({start:u.value,end:null});e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",t)))}i8(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,dv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,dv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in p?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,dv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,dv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.C||e.s.skipPlayDetection?e.g.start():e.h.na(e.i,"play",function(){e.C=!0,e.g.start()})}catch(c){hv(e,null)}}function dv(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function i8(e){function t(n,r){n=new Map().set("originalEvent",n),e.m(new Wn(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){fN(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){dN(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){dN(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){hv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){hv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function dN(e,t){var n=t.getAd();n?(e.j=new lr(n,e.g,e.i),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new Wn("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.s.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Ke("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function hv(e,t){e.m(new Wn("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.s.customPlayheadTracker||e.i.ended||e.i.play())}function or(e,t,n,r,u){this.h=e,this.g=u,this.i=t,this.j=n,this.l=r}g=or.prototype,g.getDuration=function(){return this.h.durationInSeconds},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},g.isPaused=function(){return this.g.paused},g.isSkippable=function(){return!!this.h.skipOffset},g.getTimeUntilSkippable=function(){if(!this.h.skipOffset)return this.getRemainingTime();var e=this.getRemainingTime()-this.h.skipOffset;return Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.g.currentTime+=this.getRemainingTime()},g.pause=function(){return this.g.pause()},g.play=function(){return this.g.play()},g.getVolume=function(){return this.g.volume},g.setVolume=function(e){this.g.volume=e},g.isMuted=function(){return this.g.muted},g.isLinear=function(){return this.l},g.resize=function(){},g.setMuted=function(e){this.g.muted=e},g.getSequenceLength=function(){return this.j?this.j:1},g.getPositionInSequence=function(){return this.i?this.i:1},g.getTitle=function(){return this.h.adTitle},g.getDescription=function(){return""},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return 0},g.getVastMediaWidth=function(){return 0},g.getAdId=function(){return this.h.adId},g.getCreativeAdId=function(){return this.h.creativeId},g.getAdvertiserName=function(){return""},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){return 0},g.getPodIndex=function(){return 0},g.release=function(){this.j=this.i=this.g=this.h=null},re("shaka.ads.MediaTailorAd",or),or.prototype.release=or.prototype.release,or.prototype.getPodIndex=or.prototype.getPodIndex,or.prototype.getTimeOffset=or.prototype.getTimeOffset,or.prototype.getMediaUrl=or.prototype.getMediaUrl,or.prototype.getAdvertiserName=or.prototype.getAdvertiserName,or.prototype.getCreativeAdId=or.prototype.getCreativeAdId,or.prototype.getAdId=or.prototype.getAdId,or.prototype.getVastMediaWidth=or.prototype.getVastMediaWidth,or.prototype.getVastMediaHeight=or.prototype.getVastMediaHeight,or.prototype.getVastMediaBitrate=or.prototype.getVastMediaBitrate,or.prototype.getDescription=or.prototype.getDescription,or.prototype.getTitle=or.prototype.getTitle,or.prototype.getPositionInSequence=or.prototype.getPositionInSequence,or.prototype.getSequenceLength=or.prototype.getSequenceLength,or.prototype.setMuted=or.prototype.setMuted,or.prototype.resize=or.prototype.resize,or.prototype.isLinear=or.prototype.isLinear,or.prototype.isMuted=or.prototype.isMuted,or.prototype.setVolume=or.prototype.setVolume,or.prototype.getVolume=or.prototype.getVolume,or.prototype.play=or.prototype.play,or.prototype.pause=or.prototype.pause,or.prototype.skip=or.prototype.skip,or.prototype.canSkipNow=or.prototype.canSkipNow,or.prototype.getTimeUntilSkippable=or.prototype.getTimeUntilSkippable,or.prototype.isSkippable=or.prototype.isSkippable,or.prototype.isPaused=or.prototype.isPaused,or.prototype.getRemainingTime=or.prototype.getRemainingTime,or.prototype.getMinSuggestedDuration=or.prototype.getMinSuggestedDuration,or.prototype.getDuration=or.prototype.getDuration;function vp(e,t,n,r){this.B=e,this.K=t,this.g=n,this.l=null,this.Y=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.h=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.o=new Tt}vp.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Kb(t.target,t.type,t.listener);gd(this),this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},vp.prototype.release=function(){this.stop(),this.o&&this.o.release()},vp.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(a8(this,this.G,this.T),this.T=!1)},vp.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function o8(e,t,n){var r,u,c,f,h,E,A,k,G,te,Y;xe(function(ve){if(ve.g==1)return r=Li([t],sa()),r.method="POST",n&&(u=JSON.stringify(n),r.body=Va(u)),c=e.K.request(7,r),ce(ve,2),N(ve,c.promise,4);if(ve.g!=2){if(f=ve.h,h=Vr(f.data),E=JSON.parse(h),E.manifestUrl&&E.trackingUrl)A=new si(t),k=new si(E.trackingUrl),e.G=A.resolve(k).toString(),G=Date.now()/1e3,te=G-e.Y,e.i(new Wn("ads-loaded",new Map().set("loadTime",te))),Y=new si(E.manifestUrl),e.l.resolve(A.resolve(Y).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return de(ve,0)}if(Ce(ve),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,ve.return();e.l.resolve(e.H),e.l=null,X(ve)})}function a8(e,t,n){var r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe;xe(function(Se){if(Se.g==1)return r=Li([t],sa()),u=e.K.request(7,r),ce(Se,2),N(Se,u.promise,4);if(Se.g!=2){if(c=Se.h,f=[],h=Vr(c.data),E=JSON.parse(h),0<E.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(E.avails)){for(e.j=E.avails,A=m(e.j),k=A.next();!k.done;k=A.next())for(G=k.value,te=m(G.nonLinearAdsList),Y=te.next();!Y.done;Y=te.next())for(ve=Y.value,Le=m(ve.nonLinearAdList),De=Le.next();!De.done;De=Le.next())qe=De.value,s8(e,qe);f=e.getCuePoints(),e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",f)))}}else e.j.length&&e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",f))),gd(e),e.j=[];return n&&(e.I||0<f.length)&&u8(e),de(Se,0)}Ce(Se),X(Se)})}function s8(e,t){var n,r,u,c,f,h,E;xe(function(A){if(A.g==1)return!t.staticResource||(n=hN(t),e.F.get(n))?A.return():(r=Li([t.staticResource],sa()),u=e.K.request(7,r),ce(A,2),e.F.set(n,[]),N(A,u.promise,4));if(A.g!=2)return c=A.h,f=Vr(c.data),h=JSON.parse(f),E=h.apps,e.F.set(n,E),de(A,0);Ce(A),e.F.delete(n),X(A)})}function hN(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function u8(e){gN(e),e.I||(pN(e),e.o.D(e.g,"seeked",function(){pN(e)}),e.o.D(e.g,"ended",function(){gd(e)})),e.o.D(e.g,"timeupdate",function(){gN(e)})}function pN(e){var t=e.g.currentTime;if(t!=0&&e.A==null){for(var n,r,u=m(e.j),c=u.next();!c.done;c=u.next()){c=c.value;for(var f=m(c.ads),h=f.next();!h.done;h=f.next())if(h=h.value,!r)h.startTimeInSeconds<t&&(r=h,n=c);else if(h.startTimeInSeconds<t&&h.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=h,n=c;break}}n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.g.currentTime=n.startTimeInSeconds)}}function gN(e){if(e.g.duration&&(e.h||e.j.length)){var t=e.g.currentTime,n=!1;if(e.h){n=!0;var r=e.C,u=r.startTimeInSeconds+.5*r.durationInSeconds,c=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),ga(e,"firstQuartile")):t>=u&&!e.s.includes("midpoint")?(e.s.push("midpoint"),ga(e,"midpoint")):t>=c&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),ga(e,"thirdQuartile")),r=e.h.getRemainingTime(),u=e.h.getDuration(),0<u&&(0>=r||r>u)&&gd(e)}if(!e.h||!e.h.isLinear()){e:for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!(e.h&&e.h.isLinear()));u=r.next())for(c=0;c<u.ads.length;c++){var f=u.ads[c],h=f.startTimeInSeconds+f.durationInSeconds;if(f.startTimeInSeconds<=t&&h>t){if(e.N.includes(f.adId)){if(e.g.ended)continue;e.g.currentTime=h;break e}gd(e),e.L=u,e.h=new or(f,c+1,u.ads.length,!0,e.g),e.C=f,c===0&&ga(e,"breakStart"),mN(e);break}}if(!e.h){for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!e.h);u=r.next())for(c=0;c<u.nonLinearAdsList.length;c++)if(f=u.nonLinearAdsList[c],f.nonLinearAdList.length){h=u.startTimeInSeconds;var E=e.F.get(hN(f.nonLinearAdList[0]));if(h<=t&&E&&E.length){gd(e),h=e,E=m(E);for(var A=E.next();!A.done;A=E.next())if(A=A.value,A.data.source.length){var k=document.createElement("img");k.src=A.data.source[0].url,k.style.top=(A.placeholder.top||0)+"%",k.style.height=100-(A.placeholder.top||0)+"%",k.style.left=(A.placeholder.left||0)+"%",k.style.maxWidth=100-(A.placeholder.left||0)+"%",k.style.objectFit="contain",k.style.position="absolute",h.B.appendChild(k)}e.L=u,e.h=new or(f,c+1,u.ads.length,!1,e.g),e.C=f,c===0&&ga(e,"breakStart"),mN(e);break}}}n&&!e.h&&(t=e.g.currentTime,e.A&&e.A>t&&(e.g.currentTime=e.A),e.A=null)}}}function gd(e){if(e.h){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId),ga(e,"complete");for(var t=m(e.m),n=t.next();!n.done;n=t.next())n=n.value,e.o.Kb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.h.getPositionInSequence(),n=e.h.getSequenceLength(),t===n&&ga(e,"breakEnd"),e.h=null,e.C=null,e.L=null}}function mN(e){var t=!1;e.g.paused?t=!0:(ga(e,"impression"),ga(e,"start")),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted&&ga(e,"mute")}}),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted||ga(e,"unmute")}}),e.m.push({target:e.g,type:"play",listener:function(){t?(ga(e,"impression"),ga(e,"start"),t=!1):ga(e,"resume")}}),e.m.push({target:e.g,type:"pause",listener:function(){ga(e,"pause")}});for(var n=m(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function ga(e,t){var n=e.C.trackingEvents.find(function(u){return u.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(u){return u.eventType==t})),n){n=m(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=Li([r],sa()),r.method="POST",e.K.request(7,r))}switch(t){case"impression":e.i(new Wn("ad-impression"));break;case"start":e.i(new Wn("ad-started",new Map().set("ad",e.h)));break;case"mute":e.i(new Wn("ad-muted"));break;case"unmute":e.i(new Wn("ad-volume-changed"));break;case"resume":e.i(new Wn("ad-resumed"));break;case"pause":e.i(new Wn("ad-paused"));break;case"firstQuartile":e.i(new Wn("ad-first-quartile"));break;case"midpoint":e.i(new Wn("ad-midpoint"));break;case"thirdQuartile":e.i(new Wn("ad-third-quartile"));break;case"complete":e.i(new Wn("ad-complete")),e.i(new Wn("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active")}}function cr(e,t){this.g=e,this.i=null,this.h=t}g=cr.prototype,g.getDuration=function(){return this.i?this.i.duration:-1},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},g.isPaused=function(){return this.h.paused},g.isSkippable=function(){return this.g.isSkippable()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.h.currentTime+=this.getRemainingTime()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.play()},g.getVolume=function(){return this.h.volume},g.setVolume=function(e){this.h.volume=e},g.isMuted=function(){return this.h.muted},g.isLinear=function(){return!0},g.resize=function(){},g.setMuted=function(e){this.h.muted=e},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.i=this.g=null},re("shaka.ads.ServerSideAd",cr),cr.prototype.release=cr.prototype.release,cr.prototype.getPodIndex=cr.prototype.getPodIndex,cr.prototype.getTimeOffset=cr.prototype.getTimeOffset,cr.prototype.getMediaUrl=cr.prototype.getMediaUrl,cr.prototype.getAdvertiserName=cr.prototype.getAdvertiserName,cr.prototype.getCreativeAdId=cr.prototype.getCreativeAdId,cr.prototype.getAdId=cr.prototype.getAdId,cr.prototype.getVastMediaWidth=cr.prototype.getVastMediaWidth,cr.prototype.getVastMediaHeight=cr.prototype.getVastMediaHeight,cr.prototype.getVastMediaBitrate=cr.prototype.getVastMediaBitrate,cr.prototype.getDescription=cr.prototype.getDescription,cr.prototype.getTitle=cr.prototype.getTitle,cr.prototype.getPositionInSequence=cr.prototype.getPositionInSequence,cr.prototype.getSequenceLength=cr.prototype.getSequenceLength,cr.prototype.setMuted=cr.prototype.setMuted,cr.prototype.resize=cr.prototype.resize,cr.prototype.isLinear=cr.prototype.isLinear,cr.prototype.isMuted=cr.prototype.isMuted,cr.prototype.setVolume=cr.prototype.setVolume,cr.prototype.getVolume=cr.prototype.getVolume,cr.prototype.play=cr.prototype.play,cr.prototype.pause=cr.prototype.pause,cr.prototype.skip=cr.prototype.skip,cr.prototype.canSkipNow=cr.prototype.canSkipNow,cr.prototype.getTimeUntilSkippable=cr.prototype.getTimeUntilSkippable,cr.prototype.isSkippable=cr.prototype.isSkippable,cr.prototype.isPaused=cr.prototype.isPaused,cr.prototype.getRemainingTime=cr.prototype.getRemainingTime,cr.prototype.getMinSuggestedDuration=cr.prototype.getMinSuggestedDuration,cr.prototype.getDuration=cr.prototype.getDuration;function vN(e,t,n,r){var u=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Tt,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Wn("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(c){l8(u,c)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.B.length?u.j.resolve(u.B):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(c){c=c.getAd(),u.m=new cr(c,u.l),u.A&&(u.m.i=u.A),u.i(new Wn("ad-started",new Map().set("ad",u.m))),u.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.s.removeAttribute("ad-active");var c=u.l.currentTime;u.o&&u.o>c&&(u.l.currentTime=u.o,u.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(c){u.A=c.getStreamData().adProgressData,u.m&&(u.m.i=u.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new Wn("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new Wn("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new Wn("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new Wn("ad-complete")),u.i(new Wn("ad-stopped")),u.s.removeAttribute("ad-active"),u.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new Wn("ad-skipped")),u.i(new Wn("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(c){var f=c.getStreamData();c=[],f=m(f.cuepoints);for(var h=f.next();!h.done;h=f.next())h=h.value,c.push({start:h.start,end:h.end});u.C=c,u.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",c)))})}g=vN.prototype,g.configure=function(){},g.stop=function(){this.B="",this.o=null,this.C=[]},g.release=function(){this.stop(),this.h&&this.h.release()},g.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},g.getCuePoints=function(){return this.C};function l8(e,t){e.i(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function $n(){Sr.call(this),this.g=this.h=this.i=null,this.j=new cN,this.m=navigator.language,this.l=null}z($n,Sr),g=$n.prototype,g.setLocale=function(e){this.m=e},g.configure=function(e){this.l=e,this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},g.initClientSide=function(e,t,n){var r=this;if(!p.google||!google.ima||!google.ima.AdsLoader)throw new pt(2,10,1e4);this.i&&this.i.release(),this.i=new fv(e,t,this.m,n,function(u){return b_(r,u)}),this.i.configure(this.l)},g.release=function(){this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Sr.prototype.release.call(this)},g.onAssetUnload=function(){this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Wn("ad-stopped")),this.j=new cN},g.requestClientSideAds=function(e){if(!this.i)throw new pt(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.F=Date.now()/1e3,t.l.requestAds(e)},g.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new pt(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},g.initMediaTailor=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new vp(e,t,n,function(u){return b_(r,u)})},g.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new pt(1,10,10005);var r=this.h;return n=n===void 0?"":n,r.l?e=Promise.reject(new pt(1,10,10004)):(r.l=new Rr,o8(r,e,t),r.H=n||"",r.Y=Date.now()/1e3,e=r.l),e},g.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new pt(1,10,10005);var t=this.h;t.G=e,t.i(new Wn("ads-loaded",new Map().set("loadTime",0)))},g.initServerSide=function(e,t){var n=this;if(!p.google||!google.ima||!google.ima.dai)throw new pt(2,10,10002);this.g&&this.g.release(),this.g=new vN(e,t,this.m,function(r){return b_(n,r)}),this.g.configure(this.l)},g.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new pt(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Ke('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.8.2",n=this.g,n.j?e=Promise.reject(new pt(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Rr,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},g.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new pt(1,10,10003);(e.mpt||e.mpv)&&Ke('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.8.2",this.g.g.replaceAdTagParameters(e)},g.getServerSideCuePoints=function(){return dr("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},g.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},g.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},g.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},g.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},g.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},g.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)};function b_(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.j.h.push(t.loadTime);break;case"ad-started":e.j.g++;break;case"ad-complete":e.j.i++;break;case"ad-skipped":e.j.j++}e.dispatchEvent(t)}re("shaka.ads.AdManager",$n),$n.prototype.onCueMetadataChange=$n.prototype.onCueMetadataChange,$n.prototype.onHlsTimedMetadata=$n.prototype.onHlsTimedMetadata,$n.prototype.onDashTimedMetadata=$n.prototype.onDashTimedMetadata,$n.prototype.onManifestUpdated=$n.prototype.onManifestUpdated,$n.prototype.getStats=$n.prototype.getStats,$n.prototype.getCuePoints=$n.prototype.getCuePoints,$n.prototype.getServerSideCuePoints=$n.prototype.getServerSideCuePoints,$n.prototype.replaceServerSideAdTagParameters=$n.prototype.replaceServerSideAdTagParameters,$n.prototype.requestServerSideStream=$n.prototype.requestServerSideStream,$n.prototype.initServerSide=$n.prototype.initServerSide,$n.prototype.addMediaTailorTrackingUrl=$n.prototype.addMediaTailorTrackingUrl,$n.prototype.requestMediaTailorStream=$n.prototype.requestMediaTailorStream,$n.prototype.initMediaTailor=$n.prototype.initMediaTailor,$n.prototype.updateClientSideAdsRenderingSettings=$n.prototype.updateClientSideAdsRenderingSettings,$n.prototype.requestClientSideAds=$n.prototype.requestClientSideAds,$n.prototype.onAssetUnload=$n.prototype.onAssetUnload,$n.prototype.release=$n.prototype.release,$n.prototype.initClientSide=$n.prototype.initClientSide,$n.prototype.configure=$n.prototype.configure,$n.prototype.setLocale=$n.prototype.setLocale,$n.ADS_LOADED="ads-loaded",$n.AD_STARTED="ad-started",$n.AD_FIRST_QUARTILE="ad-first-quartile",$n.AD_MIDPOINT="ad-midpoint",$n.AD_THIRD_QUARTILE="ad-third-quartile",$n.AD_COMPLETE="ad-complete",$n.AD_STOPPED="ad-stopped",$n.AD_SKIPPED="ad-skipped",$n.AD_VOLUME_CHANGED="ad-volume-changed",$n.AD_MUTED="ad-muted",$n.AD_PAUSED="ad-paused",$n.AD_RESUMED="ad-resumed",$n.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",$n.CUEPOINTS_CHANGED="ad-cue-points-changed",$n.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",$n.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",$n.AD_CLICKED="ad-clicked",$n.AD_PROGRESS="ad-progress",$n.AD_BUFFERING="ad-buffering",$n.AD_IMPRESSION="ad-impression",$n.AD_DURATION_CHANGED="ad-duration-changed",$n.AD_CLOSED="ad-closed",$n.AD_LOADED="ad-loaded",$n.ALL_ADS_COMPLETED="all-ads-completed",$n.AD_LINEAR_CHANGED="ad-linear-changed",$n.AD_METADATA="ad-metadata",$n.AD_RECOVERABLE_ERROR="ad-recoverable-error",$n.AD_ERROR="ad-error",$n.AD_BREAK_READY="ad-break-ready",$n.AD_INTERACTION="ad-interaction",cv=function(){return new $n};function yN(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof Wn){var r={};for(u in n)(t=n[u])&&typeof t=="object"?u=="detail"&&(r[u]=t):u in Event||(r[u]=t);return r}if(n instanceof Error){var u=new Set(["name","message","stack"]);for(r in n)u.add(r);for(t=m(Object.getOwnPropertyNames(n)),r=t.next();!r.done;r=t.next())u.add(r.value);for(t={},u=m(u),r=u.next();!r.done;r=u.next())r=r.value,t[r]=n[r];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(u={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(yt(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,u.start.push(r.start),u.end.push(t);n=u}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function C_(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=c8(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function c8(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var EN="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),f8="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),R_=["loop","playbackRate"],d8=["pause","play"],pv={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},gv={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},N_={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},_N=[["getConfiguration","configure"]],TN=[["isTextTrackVisible","setTextTrackVisibility"]],h8="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),p8=["attach","attachCanvas","detach","load","unload"];function x_(e,t,n,r,u,c,f){var h=this;this.G=e,this.K=f,this.l=new pr(t),this.L=n,this.s=!1,this.A=r,this.F=u,this.N=c,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return M_(h)},this.C=function(E,A){switch(E=C_(A),E.type){case"event":var k=E.targetName,G=Cm(E.event);h.A(k,G);break;case"update":k=E.update;for(G in k){E=h.g[G]||{};for(var te in k[G])E[te]=k[G][te]}h.s&&(h.L(),h.s=!1);break;case"asyncComplete":if(G=E.id,te=E.error,E=h.i[G],delete h.i[G],E)if(te){G=new pt(te.severity,te.category,te.code);for(k in te)G[k]=te[k];E.reject(G)}else E.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,Ep.add(this)}g=x_.prototype,g.destroy=function(){return Ep.delete(this),D_(this),Ts&&wN(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},g.Ua=function(){return this.h},g.tf=function(){return this.I},g.init=function(){if(this.G.length)if(p.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.kc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(Ep),r=n.next();!r.done;r=n.next()){r=r.value;var u=t;r.j=new Rr,r.s=!0,mv(r,u)}},function(t){for(var n=m(Ep),r=n.next();!r.done;r=n.next())r=r.value,vv=t=="available",r.l.kc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),vv&&this.l.X(m8),(e=Ts)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Rr,this.s=!0,mv(this,e)):Ts=null}else p.__onGCastApiAvailable!==AN&&(yv=p.__onGCastApiAvailable||null,p.__onGCastApiAvailable=AN)},g.Af=function(e){this.o=e,this.h&&yp(this,{type:"appData",appData:this.o})},g.cast=function(){var e=this;return xe(function(t){if(!e.m)throw new pt(1,8,8e3);if(!vv)throw new pt(1,8,8001);if(e.h)throw new pt(1,8,8002);return e.j=new Rr,chrome.cast.requestSession(function(n){return mv(e,n)},function(n){return SN(e,n)}),N(t,e.j,0)})};function g8(e){e.h&&chrome.cast.requestSession(function(t){return mv(e,t)},function(t){return SN(e,t)})}g.uc=function(){if(this.h){if(D_(this),Ts){wN(this);try{Ts.stop(function(){},function(){})}catch(e){}Ts=null}M_(this)}},g.get=function(e,t){var n=this;if(e=="video"){if(d8.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(We.apply(0,arguments))))}}else if(e=="player"){if(N_[t]&&!this.get("player","isLive")())return function(){};if(h8.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(We.apply(0,arguments))))};if(p8.includes(t))return function(){return n.ii.apply(n,[e,t].concat(T(We.apply(0,arguments))))};if(pv[t]||gv[t])return function(){return n.g[e][t]}}return this.g[e][t]},g.set=function(e,t,n){this.g[e][t]=n,yp(this,{type:"set",targetName:e,property:t,value:n})};function mv(e,t){var n=e.N();Ts=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),M_(e),yp(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function SN(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new pt(2,8,n,t))}g.ug=function(e,t){yp(this,{type:"call",targetName:e,methodName:t,args:We.apply(2,arguments)})},g.ii=function(e,t){var n=We.apply(2,arguments),r=new Rr,u=this.H.toString();this.H++,this.i[u]=r;try{yp(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:u})}catch(c){r.reject(c)}return r};function wN(e){var t=Ts;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function M_(e){var t=Ts?Ts.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};D_(e)}e.h=t,e.I=t?Ts.receiver.friendlyName:"",e.l.kc()}function D_(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new pt(1,7,7e3))}}function yp(e,t){t=yN(t);var n=Ts;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},st)}catch(r){throw t=new pt(2,8,8005,r),n=new Wn("error",new Map().set("detail",t)),e.A("player",n),e.uc(),t}}var m8=.02,vv=!1,Ts=null,yv=null,Ep=new Set;function AN(e){if(yv?p.__onGCastApiAvailable=yv:delete p.__onGCastApiAvailable,yv=null,e)for(var t=m(Ep),n=t.next();!n.done;n=t.next())n.value.init();typeof p.__onGCastApiAvailable=="function"&&p.__onGCastApiAvailable(e)}function Ni(e,t,n,r){r=r===void 0?!1:r,Sr.call(this);var u=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new x_(n,function(){return CN(u)},function(){return RN(u)},function(c,f){return xN(u,c,f)},function(){return NN(u)},function(){return bN(u)},r),v8(this)}z(Ni,Sr),g=Ni.prototype,g.destroy=function(e){return e&&this.g.uc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Sr.prototype.release.call(this),Promise.all(e)},g.Fh=function(){return this.l},g.uh=function(){return this.s},g.Xg=function(){return this.g.m&&vv},g.Ua=function(){return this.g.Ua()},g.tf=function(){return this.g.tf()},g.cast=function(){var e=this;return xe(function(t){return t.g==1?N(t,e.g.cast(),2):e.h?N(t,e.h.lc(),0):t.return()})},g.Af=function(e){this.g.Af(e)},g.zi=function(){g8(this.g)},g.uc=function(){this.g.uc()},g.Yg=function(e,t){t=t===void 0?!1:t;var n=this;return xe(function(r){if(r.g==1)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.uc(),N(r,n.g.destroy(),2));n.g=null,n.g=new x_(e,function(){return CN(n)},function(){return RN(n)},function(u,c){return xN(n,u,c)},function(){return NN(n)},function(){return bN(n)},t),n.g.init(),X(r)})};function v8(e){e.g.init(),e.m=new Tt;for(var t=m(EN),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(c){e.g.Ua()||(c=Cm(c),e.j.dispatchEvent(c))});for(var r in xc)e.m.D(e.h,xc[r],function(c){e.g.Ua()||e.o.dispatchEvent(c)});e.l={},t={};for(var u in e.i)t.Kc=u,Object.defineProperty(e.l,t.Kc,{configurable:!1,enumerable:!0,get:function(c){return function(){return E8(e,c.Kc)}}(t),set:function(c){return function(f){var h=c.Kc;e.g.Ua()?e.g.set("video",h,f):e.i[h]=f}}(t)}),t={Kc:t.Kc};e.s={},IN(e,function(c){Object.defineProperty(e.s,c,{configurable:!1,enumerable:!0,get:function(){return _8(e,c)}})}),y8(e),e.j=new Sr,e.j.Ud=e.l,e.o=new Sr,e.o.Ud=e.s}function y8(e){var t=new Map;IN(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function IN(e,t){function n(E){return E=="constructor"||typeof r[E]!="function"?!1:!u.has(E)}var r=e.h,u=new Set,c;for(c in r)n(c)&&(u.add(c),t(c,r[c]));for(e=Object.getPrototypeOf(r),c=Object.getPrototypeOf({});e&&e!=c;){for(var f=m(Object.getOwnPropertyNames(e)),h=f.next();!h.done;h=f.next())h=h.value,n(h)&&(u.add(h),t(h,r[h]));e=Object.getPrototypeOf(e)}}function bN(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.ad(),startTime:null};e.i.pause();for(var n=m(R_),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=m(_N),r=n.next();!r.done;r=n.next()){var u=r.value;r=u[1],u=e.h[u[0]](),t.player[r]=u}for(n=m(TN),r=n.next();!r.done;r=n.next())u=r.value,r=u[1],u=e.h[u[0]](),t.playerAfterLoad[r]=u;return t}function CN(e){var t=new Wn("caststatuschanged");e.dispatchEvent(t)}function RN(e){var t=new Wn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function NN(e){for(var t=m(_N),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var u=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var c=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var f;(r=e.g.get("player","getTextTracks")())&&r.length&&(f=r.find(function(A){return A.active}));var h=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var E={};for(n=m(R_),r=n.next();!r.done;r=n.next())r=r.value,E[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var A=m(R_),k=A.next();!k.done;k=A.next())k=k.value,e.i[k]=E[k];for(A=m(TN),k=A.next();!k.done;k=A.next()){var G=k.value;k=G[1],G=e.g.get("player",G[0])(),e.h[k](G)}e.h.Dg(h),f&&e.h.yf(f.language,f.roles,f.forced),e.i.autoplay=c,u&&e.i.play()}},function(A){A=new Map().set("detail",A),A=new Wn("error",A),e.h.dispatchEvent(A)})}function E8(e,t){if(t=="addEventListener")return function(r,u,c){return e.j.addEventListener(r,u,c)};if(t=="removeEventListener")return function(r,u,c){return e.j.removeEventListener(r,u,c)};if(e.g.Ua()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.Ua()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function _8(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,u){return e.o.addEventListener(n,r,u)};if(t=="removeEventListener")return function(n,r,u){return e.o.removeEventListener(n,r,u)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Zb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.$f()};if(t=="setVideoContainer")return function(n){return e.h.Hg(n)};if(e.g.Ua()){if(t=="getManifest"||t=="drmInfo")return function(){return Ke(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return Ke(t+"() does not work while casting!"),Promise.resolve()}}return e.g.Ua()&&Object.keys(e.g.g.video).length==0&&(pv[t]||gv[t])||!e.g.Ua()?e.h[t].bind(e.h):e.g.get("player",t)}function xN(e,t,n){e.g.Ua()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}re("shaka.cast.CastProxy",Ni),Ni.prototype.changeReceiverId=Ni.prototype.Yg,Ni.prototype.forceDisconnect=Ni.prototype.uc,Ni.prototype.suggestDisconnect=Ni.prototype.zi,Ni.prototype.setAppData=Ni.prototype.Af,Ni.prototype.cast=Ni.prototype.cast,Ni.prototype.receiverName=Ni.prototype.tf,Ni.prototype.isCasting=Ni.prototype.Ua,Ni.prototype.canCast=Ni.prototype.Xg,Ni.prototype.getPlayer=Ni.prototype.uh,Ni.prototype.getVideo=Ni.prototype.Fh,Ni.prototype.destroy=Ni.prototype.destroy;function vo(e,t,n,r){Sr.call(this);var u=this;this.g=e,this.h=t,this.j=new Tt,this.H={video:e,player:t},this.C=n||function(){},this.I=r||function(c){return c},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.G=new pr(function(){P_(u)}),T8(this)}z(vo,Sr),g=vo.prototype,g.isConnected=function(){return this.F},g.Lh=function(){return this.o},g.vi=function(e){this.i=e},g.bh=function(){this.i=null},g.wi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},g.ui=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},g.ti=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},g.destroy=function(){var e=this,t,n;return xe(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.H=null,e.C=null,e.F=!1,e.o=!0,e.l=null,e.s=null,Sr.prototype.release.call(e),N(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),X(r)})};function T8(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return MN(e)},t.onSenderDisconnected=function(){return MN(e)},t.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&il(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),il(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(u){return A8(e,u)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return w8(e,u)},t.start(),t=m(EN);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(u){return DN(e,"video",u)});for(var r in xc)e.j.D(e.h,xc[r],function(u){return DN(e,"player",u)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,md(e)}),e.j.D(e.g,"playing",function(){e.o=!1,md(e)}),e.j.D(e.g,"pause",function(){md(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,md(e)}),e.j.D(e.g,"ended",function(){new pr(function(){e.g&&e.g.ended&&(e.o=!0,md(e))}).X(b8)})}function MN(e){e.m=0,e.A=!0,e.F=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,md(e)}function md(e){var t;xe(function(n){if(n.g==1)return N(n,Promise.resolve(),2);if(!e.h)return n.return();t=new Wn("caststatuschanged"),e.dispatchEvent(t),PN(e)||ol(e),X(n)})}function S8(e,t,n){var r,u,c,f,h,E,A,k,G,te;xe(function(Y){switch(Y.g){case 1:for(r in t.player)u=t.player[r],e.h[r](u);return e.C(n),c=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ce(Y,5),N(Y,e.h.load(t.manifest,t.startTime),7)):N(Y,Promise.resolve(),3);case 7:de(Y,3);break;case 5:return f=Ce(Y),h=new Map().set("detail",f),E=new Wn("error",h),e.h&&e.h.dispatchEvent(E),Y.return();case 3:if(!e.h)return Y.return();for(A in t.video)k=t.video[A],e.g[A]=k;for(G in t.playerAfterLoad)te=t.playerAfterLoad[G],e.h[G](te);e.g.autoplay=c,t.manifest&&(e.g.play(),ol(e)),X(Y)}})}function DN(e,t,n){e.h&&(P_(e),il(e,{type:"event",targetName:t,event:n},e.l))}function P_(e){e.G.X(I8);for(var t={video:{},player:{}},n=m(f8),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.R())for(var u in N_)e.m%N_[u]==0&&(t.player[u]=e.h[u]());for(var c in pv)e.m%pv[c]==0&&(t.player[c]=e.h[c]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),il(e,{type:"update",update:t},e.l);for(var f in gv)e.m%gv[f]==0&&(t={player:{}},t.player[f]=e.h[f](),il(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),PN(e)}function PN(e){return e.A&&(e.g.duration||e.h.R())?(O_(e),e.A=!1,!0):!1}function O_(e,t){var n={contentId:e.h.ad(),streamType:e.h.R()?"LIVE":"BUFFERED",contentType:""};e.h.R()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),ol(e,t===void 0?0:t,n)}function w8(e,t){var n=C_(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,S8(e,n.initState,n.appData),P_(e);break;case"appData":e.C(n.appData);break;case"set":var r=n.targetName,u=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){t.setSystemVolumeLevel(n);break}else if(u=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][u]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,u=n.methodName,r=="player"&&u=="load"&&(e.m=0,e.B=!1);var c=n.id,f=t.senderId;t=e.H[r],n=t[u].apply(t,n.args),r=="player"&&u=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return ON(e,f,c,null)},function(h){return ON(e,f,c,h)})}}function A8(e,t){var n=C_(t.data);switch(n.type){case"PLAY":e.g.play(),ol(e);break;case"PAUSE":e.g.pause(),ol(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),ol(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),ol(e));break;case"STOP":e.h.lc().then(function(){e.h&&ol(e)});break;case"GET_STATUS":O_(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var u=e.g.volume,c=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),u==e.g.volume&&c==e.g.muted||ol(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,u=e.I(t.contentId),c=n.autoplay||!0,e.C(t.customData),c&&(e.g.autoplay=!0),e.h.load(u,r).then(function(){e.h&&O_(e)}).catch(function(f){var h="LOAD_FAILED";f.category==7&&f.code==7e3&&(h="LOAD_CANCELLED"),il(e,{requestId:Number(n.requestId),type:h},e.s)});break;default:il(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function ON(e,t,n,r){e.h&&il(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function il(e,t,n,r){e.F&&(e=yN(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function ol(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?C8:e.h.Xe()?N8:e.g.paused?x8:R8,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),il(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}re("shaka.cast.CastReceiver",vo),vo.prototype.destroy=vo.prototype.destroy,vo.prototype.setContentArtist=vo.prototype.ti,vo.prototype.setContentImage=vo.prototype.ui,vo.prototype.setContentTitle=vo.prototype.wi,vo.prototype.clearContentMetadata=vo.prototype.bh,vo.prototype.setContentMetadata=vo.prototype.vi,vo.prototype.isIdle=vo.prototype.Lh,vo.prototype.isConnected=vo.prototype.isConnected;var I8=.5,b8=5,C8="IDLE",R8="PLAYING",N8="BUFFERING",x8="PAUSED";function LN(e,t,n,r,u){if(r>=u)return null;for(var c=-1,f=-1,h=0;h<n.length;h++)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){c=h;break}for(h=n.length-1;0<=h;h--)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){f=h;break}if(c===-1||f===-1)return null;for(var E=h=!1,A="white",k="black",G=L_(r,u,h,E,A,k);c<=f;c++){for(var te=n[c],Y=-1,ve=-1,Le=0;Le<te.length;Le++)if(te[Le]!=null&&te[Le].g.trim()!==""){Y=Le;break}for(Le=te.length-1;0<=Le;Le--)if(te[Le]!=null&&te[Le].g.trim()!==""){ve=Le;break}if(Y===-1||ve===-1)te=kN(r,u),e.nestedCues.push(te);else{for(;Y<=ve;Y++)if(Le=te[Y]){var De=Le.l,qe=Le.i,Se=Le.j,Qe=Le.h;(De!=h||qe!=E||Se!=A||Qe!=k)&&(G.payload&&e.nestedCues.push(G),G=L_(r,u,De,qe,Se,Qe),h=De,E=qe,A=Se,k=Qe),G.payload+=Le.g}else G.payload+=" ";G.payload&&e.nestedCues.push(G),c!==f&&(G=kN(r,u),e.nestedCues.push(G)),G=L_(r,u,h,E,A,k)}}return e.nestedCues.length?{cue:e,stream:t}:null}function L_(e,t,n,r,u,c){return e=new Cn(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=u,e.backgroundColor=c,e}function kN(e,t){return e=new Cn(e,t,""),e.lineBreak=!0,e}function FN(e,t,n,r,u){this.g=e,this.l=t,this.i=n,this.h=r,this.j=u}function k_(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",_p(this)}function Ev(e,t,n){var r="CC"+((e.A<<1|e.s)+1),u=new Cn(t,n,"");u.lineInterpretation=1;var c=O8.get(e.g);return c&&(u.line=c),LN(u,r,e.i,t,n)}function _p(e){al(e,0,15),e.g=1}function vd(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case Tp:r=GN.has(n)?GN.get(n):String.fromCharCode(n);break;case BN:r=M8.get(n);break;case jN:e.i[e.g].pop(),r=D8.get(n);break;case ZN:e.i[e.g].pop(),r=P8.get(n)}r&&e.i[e.g].push(new FN(r,e.m,e.j,e.o,e.l))}}function UN(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(c){return c});else for(var u=0;u<r;u++)e.i[t+u]=e.i[n+u].map(function(c){return c})}function al(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var Tp=0,BN=1,jN=2,ZN=3,GN=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),M8=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),D8=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),P8=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),O8=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function _v(e,t){this.h=KN,this.o=new k_(e,t),this.i=new k_(e,t),this.g=this.j=new k_(e,t),this.l=0,this.m=null}function F_(e,t,n){e.g=e.i;var r=e.g,u=null;return e.h!==Tv&&e.h!==Sp&&(u=Ev(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,al(n,0,15),n=e.j,n.g=0<n.h?n.h:0,al(n,0,15),r.g=15),e.h=Tv,r.h=t,u}function qN(e){e.h=L8,e.g=e.j,e.g.h=0}function HN(e){wt("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=Sp}var KN=0,L8=1,Tv=3,Sp=4,k8="black green blue cyan red yellow magenta black".split(" "),VN="white green blue cyan red yellow magenta white_italics".split(" ");function zN(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=B8,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",U_(this)}function U_(e){e.i=[];for(var t=0;16>t;t++)e.i.push(B_())}function B_(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Hc(e,t){YN(e)&&(e.i[e.h][e.g]=new FN(t,e.C,e.A,e.s,e.B),e.g++)}function YN(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}zN.prototype.isVisible=function(){return this.l};function Kc(e,t,n){var r=new Cn(e.j,t,"");r.textAlign=e.F===F8?"left":e.F===U8?"right":kn;var u=r.region;switch(e.I&&(u.id+="svc"+e.I),u.id+="win"+e.N,u.height=e.o,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.H,u.viewportAnchorY=e.L,u.viewportAnchorUnits=e.K?qr:2,e.G){case j8:u.regionAnchorX=0,u.regionAnchorY=0;break;case Z8:u.regionAnchorX=50,u.regionAnchorY=0;break;case G8:u.regionAnchorX=100,u.regionAnchorY=0;break;case q8:u.regionAnchorX=0,u.regionAnchorY=50;break;case H8:u.regionAnchorX=50,u.regionAnchorY=50;break;case K8:u.regionAnchorX=100,u.regionAnchorY=50;break;case V8:u.regionAnchorX=0,u.regionAnchorY=100;break;case z8:u.regionAnchorX=50,u.regionAnchorY=100;break;case Y8:u.regionAnchorX=100,u.regionAnchorY=100}return(n=LN(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}var F8=0,U8=1,B8=2,j8=0,Z8=1,G8=2,q8=3,H8=4,K8=5,V8=6,z8=7,Y8=8;function W8(){this.i=[],this.h=null,this.g=0}function $8(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Sv(e.h)),e.h=null,e.g=0))}function Sv(e){this.g=0,this.h=e}Sv.prototype.ka=function(){return this.g<this.h.length},Sv.prototype.wa=function(){return this.g};function oo(e){if(!e.ka())throw new pt(2,2,3e3);return e.h[e.g++]}Sv.prototype.skip=function(e){if(this.g+e>this.h.length)throw new pt(2,2,3e3);this.g+=e};function X8(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Q8(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=oo(t).value,t=null,n=m(wp(e,n));for(var u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Kc(u,r,e.i)),U_(u);return t}if(n===137)for(t=oo(t).value,t=m(wp(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(n===138){for(n=oo(t).value,t=null,n=m(wp(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Kc(u,r,e.i)),u.l=!1;return t}if(n===139){for(n=oo(t).value,t=null,n=m(wp(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()?t=Kc(u,r,e.i):u.j=r,u.l=!u.l;return t}if(n===140)return t=oo(t).value,WN(e,t,r);if(n===143)return r=WN(e,255,r),$N(e),r;if(n===144)t.skip(1),r=oo(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=oo(t).value,n=oo(t).value,t.skip(1),e.g&&(t=XN((n&48)>>4,(n&12)>>2,n&3),e.g.B=XN((r&48)>>4,(r&12)>>2,r&3),e.g.s=t);else if(n===146)r=oo(t).value,t=oo(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=oo(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,u=e.h[n]!==null,!u){var c=new zN(n,e.i);c.j=r,e.h[n]=c}r=oo(t).value,c=oo(t).value;var f=oo(t).value,h=oo(t).value,E=oo(t).value;t=oo(t).value,u&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(r&32),t.L=c&127,t.H=f,t.G=(h&240)>>4,t.K=0<(c&128),t.o=(h&15)+1,t.m=(E&63)+1,e.g=e.h[n]}}}return null}function wp(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function WN(e,t,n){var r=null;t=m(wp(e,t));for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=e.h[u];c.isVisible()&&(r=Kc(c,n,e.i)),e.h[u]=null}return r}function $N(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function XN(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],J8[e<<2|t<<1|n]}var QN=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),J8="black blue green cyan red magenta yellow white".split(" ");function yd(){this.h=[],this.g=[],this.i=new W8,this.l=0,this.m=new Map([["CC1",new _v(0,0)],["CC2",new _v(0,1)],["CC3",new _v(1,0)],["CC4",new _v(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,j_(this)}yd.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,j_(this),e=m(this.j.values());for(var t=e.next();!t.done;t=e.next())$N(t.value)};function j_(e){e.o=0,e.s=0;for(var t=m(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=KN,n.g=n.j,n.m=null,_p(n.i),_p(n.j),_p(n.o);e.B=!0}yd.prototype.extract=function(e,t){if(this.B){for(var n=m(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new Dr(e,0),!(8>e.getLength())&&e.P()===181&&e.ra()===49&&e.M()===1195456820&&e.P()===3&&(n=e.P(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var u=e.P(),c=(u&4)>>2,f=e.P(),h=e.P();c&&(u&=3,u===0||u===1?this.h.push({pts:t,type:u,cb:f,vb:h,order:this.h.length}):(this.g.push({pts:t,type:u,value:f,order:this.g.length}),this.g.push({pts:t,type:2,value:h,order:this.g.length})))}},yd.prototype.decode=function(){function e(u,c){return u.pts-c.pts||u.order-c.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),r=n.next();!r.done;r=n.next())(r=e6(this,r.value))&&t.push(r);for(n=m(this.g),r=n.next();!r.done;r=n.next())$8(this.i,r.value);for(n=m(this.i.i),r=n.next();!r.done;r=n.next())r=t6(this,r.value),t.push.apply(t,T(r));return this.i.i=[],this.h=[],this.g=[],t};function e6(e,t){var n=t.type;if((t.cb&112)===16){var r=t.cb>>3&1;n===0?e.o=r:e.s=r}if(r="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(r),t.cb===255&&t.vb===255||!t.cb&&!t.vb||!JN(t.cb)||!JN(t.vb))return 45<=++e.l&&j_(e),null;if(e.l=0,t.cb&=127,t.vb&=127,!t.cb&&!t.vb)return null;if(e.A.add(r),e=null,(t.cb&112)===16)e:{if(r=t.cb,e=t.vb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1];var u=(e&30)>>1;r="white";var c=!1;7>u?r=VN[u]:u===7&&(c=!0),e=(e&1)===1,n.h!==Sp&&(u=n.g,n.h===Tv&&t!==u.g&&(n=1+t-u.h,UN(u,n,1+u.g-u.h,u.h),al(u,0,n-1),al(u,t+1,15-t)),u.g=t,u.m=e,u.j=c,u.l=r,u.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",vd(n.g,Tp,32),r=!1,t=VN[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",!(r&7)&&(t=k8[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)vd(n.g,BN,e);else if((r&246)===18&&(e&224)===32)vd(n.g,r&1?ZN:jN,e);else if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.vb){case 32:qN(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=F_(n,2,e);break;case 38:r=F_(n,3,e);break;case 39:r=F_(n,4,e);break;case 40:vd(n.g,Tp,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:_p(n.o),HN(n);break;case 43:HN(n);break;case 44:t=n.i,r=null,n.h!==Sp&&(r=Ev(t,n.l,e)),al(t,0,15);break;case 45:t=n.g,n.h!==Tv?r=null:(r=Ev(t,n.l,e),c=t.g-t.h+1,UN(t,c-1,c,t.h),al(t,0,c-1),al(t,t.g,15-t.g),n.l=e);break;case 46:al(n.j,0,15);break;case 47:t=null,n.h!==Sp&&(t=Ev(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,qN(n),n.l=e,r=t}e=r;break e}e=null}else r=t.vb,vd(n.g,Tp,t.cb),vd(n.g,Tp,r);return e}function t6(e,t){var n=[];try{for(;t.ka();){var r=oo(t).value,u=(r&224)>>5,c=r&31;if(u===7&&c!=0&&(u=oo(t).value&63),u!=0){e.A.add("svc"+u),e.j.has(u)||e.j.set(u,new X8(u));for(var f=e.j.get(u),h=t.wa();t.wa()-h<c;){u=t;var E=oo(u),A=E.value,k=E.pts;if(A===16){var G=oo(u);A=A<<16|G.value}if(0<=A&&31>=A){var te=k;if(f.g){var Y=f.g;switch(u=null,A){case 8:!YN(Y)||0>=Y.g&&0>=Y.h||(0>=Y.g?(Y.g=Y.m-1,Y.h--):Y.g--,Y.i[Y.h][Y.g]=null);break;case 13:if(Y.isVisible()&&(u=Kc(Y,te,f.i)),Y.h+1>=Y.o){te=Y;for(var ve=0,Le=1;16>Le;Le++,ve++)te.i[ve]=te.i[Le];for(Le=0;1>Le;Le++,ve++)te.i[ve]=B_()}else Y.h++;Y.g=0;break;case 14:Y.isVisible()&&(u=Kc(Y,te,f.i)),Y.i[Y.h]=B_(),Y.g=0;break;case 12:Y.isVisible()&&(u=Kc(Y,te,f.i)),U_(Y),te=Y,te.h=0,te.g=0}var De=u}else De=null}else if(128<=A&&159>=A)De=Q8(f,u,A,k);else{if(4096<=A&&4127>=A)te=A&255,8<=te&&15>=te?u.skip(1):16<=te&&23>=te?u.skip(2):24<=te&&31>=te&&u.skip(3);else if(4224<=A&&4255>=A)te=A&255,128<=te&&135>=te?u.skip(4):136<=te&&143>=te&&u.skip(5);else if(32<=A&&127>=A)u=A,f.g&&(u===127?Hc(f.g,"♪"):Hc(f.g,String.fromCharCode(u)));else if(160<=A&&255>=A)f.g&&Hc(f.g,String.fromCharCode(A));else if(4128<=A&&4223>=A){if(u=A&255,f.g)if(QN.has(u)){var qe=QN.get(u);Hc(f.g,qe)}else Hc(f.g,"_")}else 4256<=A&&4351>=A&&f.g&&((A&255)!=160?Hc(f.g,"_"):Hc(f.g,"[CC]"));De=null}(u=De)&&n.push(u)}}}}catch(Se){if(Se instanceof pt&&Se.code===3e3)wt("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Se}return n}function JN(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}yd.prototype.getStreams=function(){return Array.from(this.A)},re("shaka.cea.CeaDecoder",yd),Mt=function(){return new yd};function ex(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(T(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var u=0;e[r]==255;)u+=255,r++;u+=e[r++],n==4&&t.push(e.subarray(r,r+u)),r+=u}return t}function wv(){this.j=new Map,this.i=this.h=0,this.g=Z_}wv.prototype.init=function(e){function t(c){c=c.name,c in Av&&(n.g=Av[c])}var n=this,r=[],u=[];if(new Fr().box("moov",yr).box("mvex",yr).O("trex",function(c){var f=c.reader;f.skip(4),f.skip(4),c=f.M(),f=f.M(),n.h=c,n.i=f}).box("trak",yr).O("tkhd",function(c){c=Gt(c.reader,c.version),r.push(c.trackId)}).box("mdia",yr).O("mdhd",function(c){c=It(c.reader,c.version),u.push(c.timescale)}).box("minf",yr).box("stbl",yr).O("stsd",gu).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvav",t).box("dva1",t).box("dvh1",t).box("dvhe",t).box("encv",Ai).box("sinf",yr).box("frma",function(c){c=un(c.reader).Ea,c in Av&&(n.g=Av[c])}).parse(e,!0),!r.length||!u.length||r.length!=u.length)throw new pt(2,2,2010);this.g==Z_&&Ke("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(c,f){n.j.set(c,u[f])})},wv.prototype.parse=function(e){var t=this;if(this.g==Z_)return[];var n=[],r=this.h,u=this.i,c=0,f=[],h=null,E=9e4;return new Fr().box("moof",function(A){c=A.start,f=[],yr(A)}).box("traf",yr).O("trun",function(A){A=Xt(A.reader,A.version,A.flags),f.push(A)}).O("tfhd",function(A){A=rr(A.reader,A.flags),r=A.Wf||t.h,u=A.fh||t.i,A=A.trackId,t.j.has(A)&&(E=t.j.get(A))}).O("tfdt",function(A){h=ir(A.reader,A.version).baseMediaDecodeTime}).box("mdat",function(A){if(h===null)throw Ke("Unable to find base media decode time for CEA captions!"),new pt(2,2,2010);n6(t,A.reader,h,E,r,u,c-A.start-8,f,n)}).parse(e,!1),n};function n6(e,t,n,r,u,c,f,h,E){var A=0,k=c,G=h.map(function(ve){return ve.vg});for(G=[].concat.apply([],T(G)),G.length&&(k=G[0].sampleSize||c),t.skip(f+h[0].eh);t.ka();){f=t.M();var te=t.P(),Y=null;switch(Y=!1,h=1,e.g){case Ap:Y=te&31,Y=Y==6;break;case Ip:h=2,t.skip(1),Y=te>>1&63,Y=Y==39||Y==40;break;default:return}if(Y)for(te=0,A<G.length&&(te=G[A].he||0),te=(n+te)/r,h=m(ex(t.sb(f-h))),Y=h.next();!Y.done;Y=h.next())E.push({packet:Y.value,pts:te});else try{t.skip(f-h)}catch(ve){break}k-=f+4,k==0&&(n=A<G.length?n+(G[A].wf||u):n+u,A++,A<G.length?k=G[A].sampleSize||c:k=c)}}re("shaka.cea.Mp4CeaParser",wv);var Z_=0,Ap=1,Ip=2,Av={avc1:Ap,avc3:Ap,hev1:Ip,hvc1:Ip,dvav:Ap,dva1:Ap,dvh1:Ip,dvhe:Ip};Yt["video/mp4"]=function(){return new wv};function Iv(){this.g=null}Iv.prototype.init=function(){},Iv.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Ve;var t=[];if(e=Qn(e),!Zr(e))return t;e=this.g.parse(e);var n=e.bd(),r=e.Od();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var u=m(ex(r.data)),c=u.next();!c.done;c=u.next())t.push({packet:c.value,pts:r.time});return t},re("shaka.cea.TsCeaParser",Iv),Yt["video/mp2t"]=function(){return new Iv};function tx(e,t,n){var r=s6(e),u=null;e=[];var c=[],f=null,h=new Set(r.map(function(A){return A.keyId}));h.delete(null);var E="cenc";if(1<h.size)throw new pt(2,4,4010);if(!t){if(c=r.filter(function(A){return A.Dc=="urn:mpeg:dash:sea:2012"}),1<c.length)throw new pt(2,4,4050);c.length&&(f=l6(c[0])),(c=r.find(function(A){return A.Dc=="urn:mpeg:dash:mp4protection:2011"}))&&c.encryptionScheme&&(E=c.encryptionScheme),c=r.filter(function(A){return A.Dc=="urn:mpeg:dash:mp4protection:2011"?(u=A.init||u,!1):A.Dc!="urn:mpeg:dash:sea:2012"}),c.length&&(e=a6(u,E,c,n,h),e.length==0&&(e=[ku("",E,u)]))}if(r.length&&!f&&(t||!c.length))for(e=[],t=m(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(ku(n,E,u));if(h=Array.from(h)[0]||null)for(E=m(e),t=E.next();!t.done;t=E.next())for(t=m(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=h;return{Vf:h,Cj:u,drmInfos:e,xe:f,Zf:!0}}function r6(e,t,n,r){var u=tx(e,n,r);if(t.Zf)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=u.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=u.drmInfos),t.Zf=!1;else if(0<u.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(c){return u.drmInfos.some(function(f){return f.keySystem==c.keySystem})}),t.drmInfos.length==0))throw new pt(2,4,4008);return u.Vf||t.Vf}function i6(e){var t=0,n=tn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function o6(e){e=m(Ca(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=m(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return Ri(n)}return""}function bv(e){var t=Fs(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ri(t))?t:(e=Fs(e.node,"urn:microsoft:playready","pro"),!e||!Ri(e)||(e=Ri(e),e=qo(e),e=i6(e).filter(function(n){return n.type===c6})[0],!e)?"":(e=Ha(e.value,!0),(e=Ul(e,"WRMHEADER"))?o6(e):""))}function a6(e,t,n,r,u){var c=[];n=m(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var h=r[f.Dc];if(h){var E;if((E=Fs(f.node,"urn:microsoft:playready","pro"))&&Ri(E)){E=Ri(E),E=qo(E);var A=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);E=[{initData:zf(E,A,new Set,0),initDataType:"cenc",keyId:f.keyId}]}else E=null;if(A=null,f.Dc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(A=u,A.size==0)A=null;else{var k=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),G=new Uint8Array([]);A=[{initData:zf(G,k,A,1),initDataType:"cenc",keyId:f.keyId}]}E=ku(h,t,f.init||e||E||A),(h=f6.get(h))&&(E.licenseServerUri=h(f)),c.push(E)}}return c}function s6(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=u6(n.value))&&t.push(n);return t}function u6(e){var t=e.attributes.schemeIdUri,n=vu(e,"urn:mpeg:cenc:2013","default_KID"),r=Wf(e,"urn:mpeg:cenc:2013","pssh").map(mu),u=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new pt(2,4,4009);var c=[];try{c=r.map(function(f){return{initDataType:"cenc",initData:qo(f),keyId:null}})}catch(f){throw new pt(2,4,4007)}return{node:e,Dc:t,keyId:n,init:0<c.length?c:null,encryptionScheme:u}}function l6(e){if(!p.crypto||!p.crypto.subtle)throw Ke("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new pt(2,4,4042);var t=Fs(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new pt(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new pt(2,4,4051);if(t=Fs(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new pt(2,4,4051);if(e=t.attributes.IV,t=bo(t.attributes.keyUriTemplate),!e||!t)throw new pt(2,4,4051);if(e=fu(e.substr(2)),e.byteLength!=16)throw new pt(2,4,4048);return{Rh:t,iv:e}}var c6=1,f6=new Map().set("com.widevine.alpha",function(e){var t=Fs(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ri(t))?t:(e=Fs(e.node,"urn:microsoft","laurl"))&&bo(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",bv).set("com.microsoft.playready.recommendation",bv).set("com.microsoft.playready.software",bv).set("com.microsoft.playready.hardware",bv).set("org.w3.clearkey",function(e){var t=Fs(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ri(t))?t:(e=Fs(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Ri(e))?e:""});function Cv(e,t,n,r,u,c){var f={RepresentationID:t,Number:n,SubNumber:r,Bandwidth:u,Time:c};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(h,E,A,k){if(h=="$$")return"$";var G=f[E];if(G==null)return h;switch(E=="RepresentationID"&&A&&(A=void 0),E=="Time"&&typeof G!="bigint"&&(.2<=Math.abs(G-Math.round(G))&&Ke("Calculated $Time$ values must be close to integers"),G=Math.round(G)),k){case void 0:case"d":case"i":case"u":h=G.toString();break;case"o":h=G.toString(8);break;case"x":h=G.toString(16);break;case"X":h=G.toString(16).toUpperCase();break;default:h=G.toString()}return A=p.parseInt(A,10)||1,Array(Math.max(0,A-h.length)+1).join("0")+h})}function nx(e,t){var n=_u(e,t,"timescale"),r=1;n&&(r=Us(n)||1),n=_u(e,t,"duration"),(n=Us(n||""))&&(n/=r);var u=_u(e,t,"startNumber"),c=Number(_u(e,t,"presentationTimeOffset"))||0,f=Ro(u||"");(u==null||f==null)&&(f=1);var h=Rv(e,t,"SegmentTimeline");if(t=null,h){t=r,e=e.ha.duration||1/0,u=f,h=Wr(h,"S");for(var E=[],A=-c,k=0;k<h.length;++k){var G=h[k],te=h[k+1],Y=_r(G,"t",Ro),ve=_r(G,"d",Ro),Le=_r(G,"r",Xu);if(G=_r(G,"k",Xu)||0,Y!=null&&(Y-=c),!ve)break;if(Y=Y!=null?Y:A,Le=Le||0,0>Le)if(te){if(te=_r(te,"t",Ro),te==null)break;if(Y>=te)break;Le=Math.ceil((te-Y)/ve)-1}else{if(e==1/0)break;if(Y/t>=e)break;Le=Math.ceil((e*t-Y)/ve)-1}for(0<E.length&&Y!=A&&(E[E.length-1].end=Y/t),te=0;te<=Le;++te)A=Y+ve,E.push({start:Y/t,end:A/t,Kf:Y,rb:G,ri:E.length+u}),Y=A}t=E}return{timescale:r,Da:n,rd:f,Bb:c/r||0,Jf:c,timeline:t}}function rx(e,t){return[t(e.J),t(e.ua),t(e.za)].filter(Bu)}function _u(e,t,n){t=rx(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function Rv(e,t,n){t=rx(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=ua(r.value,n));r=t.next());return e}function d6(e,t,n,r,u,c){for(var f=vu(e,"http://www.w3.org/1999/xlink","href"),h=vu(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",E=m(Object.keys(e.attributes)),A=E.next();!A.done;A=E.next()){A=A.value;var k=A.split(":"),G=Oc("http://www.w3.org/1999/xlink");k[0]==G&&delete e.attributes[A]}if(5<=c)return hu(new pt(2,4,4028));if(h!="onLoad")return hu(new pt(2,4,4027));var te=fo([r],[f]);return u.request(0,Li(te,t)).va(function(Y){if(Y=Qh(Y.data,e.tagName),!Y)return hu(new pt(2,4,4001,f));for(e.children=[];Y.children.length;){var ve=Y.children.shift();ve.tagName&&(ve.parent=e),e.children.push(ve)}ve=m(Object.keys(Y.attributes));for(var Le=ve.next();!Le.done;Le=ve.next())Le=Le.value,e.attributes[Le]=Y.attributes[Le];return Nv(e,t,n,te[0],u,c+1)})}function Nv(e,t,n,r,u,c){if(c=c===void 0?0:c,vu(e,"http://www.w3.org/1999/xlink","href")){var f=d6(e,t,n,r,u,c);return n&&(f=f.va(void 0,function(){return Nv(e,t,n,r,u,c)})),f}f=[];for(var h={},E=m(LE(e)),A=E.next();!A.done;h={pc:h.pc},A=E.next())h.pc=A.value,vu(h.pc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(k){return function(G){return G!==k.pc}}(h)):h.pc.tagName!="SegmentTimeline"&&f.push(Nv(h.pc,t,n,r,u,c));return Hf(f).va(function(){return e})}function h6(e,t,n,r,u,c,f){var h,E=new Fr().O("sidx",function(A){h=p6(t,r,u,c,f,n,A)});if(e&&E.parse(e),h)return h;throw new pt(2,3,3004)}function p6(e,t,n,r,u,c,f){var h=[];f.reader.skip(4);var E=f.reader.M();if(E==0)throw new pt(2,3,3005);if(f.version==0)var A=f.reader.M(),k=f.reader.M();else A=f.reader.Cc(),k=f.reader.Cc();f.reader.skip(2);var G=f.reader.ra();for(e=e+f.size+k,k=0;k<G;k++){var te=f.reader.M(),Y=(te&2147483648)>>>31;te&=2147483647;var ve=f.reader.M();if(f.reader.skip(4),Y==1)throw new pt(2,3,3006);h.push(new et(A/E+n,(A+ve)/E+n,function(){return c},e,e+te-1,t,n,r,u)),A+=ve,e+=te}return f.parser.stop(),h}function jl(e){this.h=tn(e),this.g=new Dr(this.h,0)}jl.prototype.ka=function(){return this.g.ka()};function sl(e){var t=ix(e);if(7<t.length)throw new pt(2,3,3002);var n=0;t=m(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=ix(e);e:{r=m(g6);for(var u=r.next();!u.done;u=r.next())if(zi(t,new Uint8Array(u.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.wa();else{if(t.length==8&&t[1]&224)throw new pt(2,3,3001);for(u=r=0;u<t.length;u++){var c=t[u];r=u==0?c&(1<<8-t.length)-1:256*r+c}t=r}return t=e.g.wa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.wa(),r=tn(e.h,e.g.wa(),t),e.g.skip(t),new m6(n,r)}function ix(e){var t=e.g.wa(),n=e.g.P();if(n==0)throw new pt(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Qn(e.h,t,n)}var g6=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function m6(e,t){this.id=e,this.g=t}function G_(e){if(8<e.g.byteLength)throw new pt(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new pt(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function v6(e,t,n,r,u,c,f,h,E){function A(){return u}var k=[];e=new jl(e.g);for(var G=null,te=null;e.ka();){var Y=sl(e);if(Y.id==187){var ve=y6(Y);ve&&(Y=n*ve.Di,ve=t+ve.gi,G!=null&&k.push(new et(G+f,Y+f,A,te,ve-1,c,f,h,E)),G=Y,te=ve)}}return G!=null&&k.push(new et(G+f,r+f,A,te,null,c,f,h,E)),k}function y6(e){var t=new jl(e.g);if(e=sl(t),e.id!=179)throw new pt(2,3,3013);if(e=G_(e),t=sl(t),t.id!=183)throw new pt(2,3,3012);t=new jl(t.g);for(var n=0;t.ka();){var r=sl(t);if(r.id==241){n=G_(r);break}}return{Di:e,gi:n}}function ox(e,t,n){if(t=Rv(e,t,"Initialization"),!t)return null;var r=e.J.nb(),u=t.attributes.sourceURL;u&&(r=fo(r,[bo(u)])),u=0;var c=null;return(t=_r(t,"range",Xf))&&(u=t.start,c=t.end),n=new dt(function(){return r},u,c,lx(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function E6(e,t,n){var r=Number(_u(e,Ed,"presentationTimeOffset"))||0,u=_u(e,Ed,"timescale"),c=1;u&&(c=Us(u)||1);var f=r/c||0,h=ox(e,Ed,n);_6(e,h);var E=dm(e);return{vc:function(){var A=Rv(E,Ed,"RepresentationIndex"),k=E.J.nb();return A&&(A=bo(A.attributes.sourceURL))&&(k=fo(k,[A])),A=sx(E),ax(E,t,h,k,A.start,A.end,f)}}}function ax(e,t,n,r,u,c,f){var h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue,vt,Nt,Vt,Bt;return xe(function(_t){if(_t.g==1)return h=e.presentationTimeline,E=!e.Eb||!e.ha.Ye,A=e.ha.start,k=e.ha.duration,G=e.J.mimeType.split("/")[1],te=t,Y=null,ve=[te(r,u,c,!1),G=="webm"?te(n.$(),n.Aa,n.ja,!0):null],te=null,N(_t,Promise.all(ve),2);if(Le=_t.h,De=Le[0],qe=Le[1]||null,Se=null,Qe=A-f,Ue=A,vt=k?A+k:1/0,G=="mp4")var Zt=h6(De,u,r,n,Qe,Ue,vt);else{if(Zt=new jl(qe),sl(Zt).id!=440786851)throw new pt(2,3,3008);var ln=sl(Zt);if(ln.id!=408125543)throw new pt(2,3,3009);Zt=ln.g.byteOffset,ln=new jl(ln.g);for(var pn=null;ln.ka();){var Ln=sl(ln);if(Ln.id==357149030){pn=Ln;break}}if(!pn)throw new pt(2,3,3010);for(pn=new jl(pn.g),Ln=1e6,ln=null;pn.ka();){var Mn=sl(pn);if(Mn.id==2807729)Ln=G_(Mn);else if(Mn.id==17545)if(Mn.g.byteLength==4)ln=Mn.g.getFloat32(0);else if(Mn.g.byteLength==8)ln=Mn.g.getFloat64(0);else throw new pt(2,3,3003)}if(ln==null)throw new pt(2,3,3011);if(pn=Ln/1e9,ln*=pn,Ln=sl(new jl(De)),Ln.id!=475249515)throw new pt(2,3,3007);Zt=v6(Ln,Zt,pn,ln,r,n,Qe,Ue,vt)}for(Se=Zt,Nt=m(Se),Vt=Nt.next();!Vt.done;Vt=Nt.next())Bt=Vt.value,Bt.codecs=e.J.codecs,Bt.mimeType=e.J.mimeType;return h.ld(Se),Y=new wr(Se),E&&Y.sc(Ue,vt,!0),_t.return(Y)})}function Ed(e){return e.pd}function sx(e){var t=Rv(e,Ed,"RepresentationIndex");return e=_u(e,Ed,"indexRange"),e=Xf(e||""),t&&(e=_r(t,"range",Xf,e)),e}function _6(e,t){if(ux(e,t),!sx(e))throw new pt(2,4,4002)}function ux(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=vr&&n!="mp4"&&n!="webm")throw new pt(2,4,4006);if(n=="webm"&&!t)throw new pt(2,4,4005)}function lx(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.de,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function T6(e,t,n){var r=ox(e,cx,n),u=S6(e);if(!u.Da&&!u.timeline&&1<u.yc.length)throw new pt(2,4,4002);if(!u.Da&&!e.ha.duration&&!u.timeline&&u.yc.length==1)throw new pt(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new pt(2,4,4002);var c=null,f=null;e.za.id&&e.J.id&&(f=t[e.za.id+","+e.J.id])&&(c=f.segmentIndex);var h=w6(e.ha.start,e.ha.duration,e.J.nb,u,r,n,e.J.mimeType,e.J.codecs);return t=!c,c?c.kd(h,e.presentationTimeline.qb()):c=new wr(h),e.presentationTimeline.ld(h),e.Eb&&e.ha.Ye||c.sc(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),f&&(f.segmentIndex=c),{vc:function(){return c&&c.getNumReferences()!=0||c.ae(h),Promise.resolve(c)}}}function cx(e){return e.Jb}function S6(e){var t=A6(e);e=nx(e,cx);var n=e.rd;n==0&&(n=1);var r=0;return e.Da?r=e.Da*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{Da:e.Da,startTime:r,rd:n,Bb:e.Bb,timeline:e.timeline,yc:t}}function w6(e,t,n,r,u,c,f,h){var E=r.yc.length;r.timeline&&r.timeline.length!=r.yc.length&&(E=Math.min(r.timeline.length,r.yc.length));for(var A=e-r.Bb,k=t?e+t:1/0,G=[],te=r.startTime,Y={},ve=0;ve<E;Y={Sc:Y.Sc,Oc:Y.Oc},ve++){Y.Oc=r.yc[ve];var Le=te;te=void 0,te=r.Da!=null?Le+r.Da:r.timeline?r.timeline[ve].end:Le+t,Y.Sc=null,Le=new et(e+Le,e+te,function(De){return function(){return De.Sc==null&&(De.Sc=fo(n(),[De.Oc.Xh])),De.Sc}}(Y),Y.Oc.start,Y.Oc.end,u,A,e,k,[],"",null,null,jt,c),Le.codecs=h,Le.mimeType=f,G.push(Le)}return G}function A6(e){return[e.J.Jb,e.ua.Jb,e.za.Jb].filter(Bu).map(function(t){return Wr(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.ig&&(e.ig=!0);var n=bo(t.attributes.media);return t=_r(t,"mediaRange",Xf,{start:0,end:null}),{Xh:n,start:t.start,end:t.end}})}function I6(e,t,n,r,u,c,f,h){var E=N6(e,f),A=b6(e);C6(A);var k=dm(e);if(A.hd)return ux(e,E),{vc:function(){var Le=Cv(A.hd,k.J.id,null,null,k.bandwidth||null,null);return Le=fo(k.J.nb(),[Le]),ax(k,t,E,Le,0,null,A.Bb)}};if(A.Da)return r||e.ua.contentType==="image"||(e.presentationTimeline.hf(A.Da),e.presentationTimeline.ce(e.ha.start)),{vc:function(){return R6(k,A,u,E,c,f,h)}};var G=null;r=r=null,e.za.id&&e.J.id&&(r=e.za.id+","+e.J.id,r=n[r])&&(G=r.segmentIndex);var te=e.ha.start,Y=e.ha.duration?te+e.ha.duration:1/0,ve=!(e.Eb&&e.ha.Ye);return G?(n=G,fx(n,A,te,Y,ve,E),n.La(e.presentationTimeline.qb())):G=new Mv(A,e.J.id,e.bandwidth,e.J.nb,te,Y,E,ve,f,e.J.xf),A.timeline&&e.ua.contentType!=="image"&&e.presentationTimeline.qg(A.timeline,te),r&&e.Eb&&(r.segmentIndex=G),{vc:function(){return G instanceof Mv&&G.getNumReferences()==0&&fx(G,A,te,Y,ve,E),Promise.resolve(G)}}}function xv(e){return e.qd}function b6(e){var t=nx(e,xv),n=_u(e,xv,"media"),r=_u(e,xv,"index");return{Da:t.Da,timescale:t.timescale,rd:t.rd,Bb:t.Bb,Jf:t.Jf,timeline:t.timeline,zc:n&&bo(n),hd:r,mimeType:e.J.mimeType,codecs:e.J.codecs}}function C6(e){var t=e.hd?1:0;if(t+=e.timeline?1:0,t+=e.Da?1:0,t==0)throw new pt(2,4,4002);if(t!=1&&(e.hd&&(e.timeline=null),e.Da=null),!e.hd&&!e.zc)throw new pt(2,4,4002)}function R6(e,t,n,r,u,c,f){function h(ln){var pn=(ln-Le)*ve,Ln=pn+t.Bb,Mn=pn+G;pn=Mn+ve;var qn=Math.min(pn,A());return Mn=new et(Mn,qn,function(){var Yn=Ln*De;return"BigInt"in p&&Yn>Number.MAX_SAFE_INTEGER&&(Yn=BigInt(Ln)*BigInt(De)),Yn=Cv(qe,Qe,ln,null,Se,Yn),fo(Ue(),[Yn])},0,null,r,vt,G,A(),[],"",null,null,jt,c),Mn.codecs=e.J.codecs,Mn.mimeType=e.J.mimeType,Mn.i=pn,Mn}function E(){var ln=[Math.max(k.qb(),G),Math.min(k.Gb(),A())].map(function(pn){return pn-G});return ln=[Math.ceil(ln[0]/ve),Math.ceil(ln[1]/ve)-1],e.J.Qb&&ln[1]++,ln.map(function(pn){return pn+Le})}function A(){var ln=te!=null&&u[te]||Y;return ln?G+ln:1/0}var k=e.presentationTimeline,G=e.ha.start,te=e.za.id,Y=e.ha.duration,ve=t.Da,Le=t.rd,De=t.timescale,qe=t.zc,Se=e.bandwidth||null,Qe=e.J.id,Ue=e.J.nb,vt=G-t.Bb,Nt=E();n=e.Eb?Math.max(Nt[0],Nt[1]-n+1):Nt[0],f=f||Nt[1],Nt=[];for(var Vt=n;Vt<=f;++Vt){var Bt=h(Vt);Nt.push(Bt)}var _t=new wr(Nt);if(Nt=k.Gb()<A(),Vt=k.R(),Nt||Vt){var Zt=Math.max(n,f+1);_t.ke(ve,function(){var ln=k.qb();_t.La(ln);var pn=m(E());pn.next(),pn=pn.next().value;for(var Ln=[];Zt<=pn;){var Mn=h(Zt);Ln.push(Mn),Zt++}return ln>A()&&!Ln.length?null:Ln})}return Promise.resolve(_t)}function N6(e,t){var n=_u(e,xv,"initialization");if(!n)return null;n=bo(n);var r=e.J.id,u=e.bandwidth||null,c=e.J.nb;return t=new dt(function(){var f=Cv(n,r,null,null,u,null);return fo(c(),[f])},0,null,lx(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function Mv(e,t,n,r,u,c,f,h,E,A){wr.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=r,this.i=u,this.l=c,this.s=f,this.A=E,this.G=A,h&&dx(this)}z(Mv,wr),g=Mv.prototype,g.getNumReferences=function(){return this.h?this.h.timeline.length:0},g.release=function(){wr.prototype.release.call(this),this.h=null},g.La=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.i<=e;r+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.j+=t,this.getNumReferences()===0&&this.release())}};function fx(e,t,n,r,u,c){if(x6(e,c),e.h){n=e.h.timeline,e.h.zc=t.zc;var f=n[n.length-1];t=t.timeline.filter(function(h){return h.start>=f.end}),0<t.length&&e.h.timeline.push.apply(e.h.timeline,T(t)),e.l!==r&&(e.l=r)}else e.h=t,e.i=n,e.l=r;u&&dx(e)}function x6(e,t){if(e.s!==t){e.s=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&ht(n,t)}}function dx(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.La(e.i)}}g.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var t=this.h.timeline;if(e<this.i||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var u=t[r],c=u.start+this.i;if(u=r<n?t[r+1].start+this.i:this.l===1/0?u.end+this.i:this.l,e>=c&&e<u)return r+this.j}return null},g.get=function(e){var t=this;if(e-=this.j,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=this.h.zc,u=this.h.timeline[e],c=u.ri,f=this.h.Jf+u.Kf;n=this.i-this.h.Bb;var h=this.i+u.end,E=h;e===this.getNumReferences()-1&&this.l!==1/0&&(E=this.l);for(var A=this.h.codecs,k=this.h.mimeType,G=[],te=(u.end-u.start)/u.rb,Y={},ve=0;ve<u.rb;Y={Tc:Y.Tc,se:Y.se},ve++){var Le=u.start+te*ve,De=Le+te;Y.se=ve+1,Y.Tc=null,Le=new et(this.i+Le,this.i+De,function(qe){return function(){return t.h?(qe.Tc==null&&(qe.Tc=hx(t.h.zc,t.F,c,t.B,f,qe.se,t.C)),qe.Tc):[]}}(Y),0,null,this.s,n,this.i,this.l,[],"",null,null,jt,this.A),Le.codecs=A,Le.mimeType=k,this.G==0?0<ve&&Le.Zd():ve%this.G!=0&&Le.Zd(),G.push(Le)}n=new et(this.i+u.start,E,function(){return 0<u.rb?[]:hx(r,t.F,c,t.B,f,null,t.C)},0,null,this.s,n,this.i,this.l,G,"",null,null,jt,this.A,0<u.rb),n.codecs=A,n.mimeType=k,n.i=h,this.g[e]=n}return n};function hx(e,t,n,r,u,c,f){return e=Cv(e,t,n,c,r||null,u),fo(f(),[e]).map(function(h){return h.toString()})}function _d(e){this.o=null,this.A=e,this.G=new Ll,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}_d.prototype.configure=function(e){this.o=e},_d.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},_d.prototype.setManifestType=function(e){this.s=e};function bp(e,t){var n,r,u,c,f,h,E;return xe(function(A){if(A.g==1)return n=fo(e.i,[M6(e,t)]),r=Li(n,e.o.retryParameters),u=e.A.networkingEngine.request(8,r),pu(e.G,u),ce(A,2),N(A,u.promise,4);if(A.g!=2)return c=A.h,f=Vr(c.data),h=JSON.parse(f),h.VERSION==1&&D6(e,h,c.uri),de(A,0);if((E=Ce(A))&&E.code==7001)return A.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new pr(function(){bp(e,t)}),e.g.X(e.C),X(A)})}function M6(e,t){if(!e.m.length)return t;t=new si(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),u=t.g;return e.s=="DASH"?(u.add("_DASH_pathway",n),u.add("_DASH_throughput",String(r))):e.s=="HLS"&&(u.add("_HLS_pathway",n),u.add("_HLS_throughput",String(r))),na(u)&&hr(t,u),t.toString()}function D6(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new pr(function(){bp(e,r)}),(n=t.TTL)&&(e.C=n),e.g.X(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function Td(e,t,n,r){var u=e.l.get(t);u||(u=new Map),u.set(n,r),e.l.set(t,u)}_d.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Cp(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],u={},c=m(e.m),f=c.next();!f.done;u={Pb:u.Pb},f=c.next())if(u.Pb=f.value,f=t.get(u.Pb))r.push({rf:u.Pb,location:f});else if(f=e.F.find(function(E){return function(A){return A.Vi==E.Pb}}(u))){var h=t.get(f["BASE-ID"]);h&&(f["URI-REPLACEMENT"].Ng?(h=new si(h),_n(h,f["URI-REPLACEMENT"].Ng),r.push({rf:u.Pb,location:h.toString()})):r.push({rf:u.Pb,location:h}))}for(u=Date.now(),c=m(e.j.keys()),f=c.next();!f.done;f=c.next())f=f.value,h=e.j.get(f),u>h&&e.j.delete(f);if(r=r.filter(function(E){for(var A=m(e.j.keys()),k=A.next();!k.done;k=A.next())if(k.value.includes(new si(E.location).wb))return!1;return!0}),r.length&&(e.B=r[0].rf),r=r.map(function(E){return E.location}),!r.length&&e.h)for(u=m(e.h.split(",")),f=u.next();!f.done;f=u.next())(c=t.get(f.value))&&(e.B=e.h,r.push(c));if(!r.length)for(t=m(t.values()),u=t.next();!u.done;u=t.next())r.push(u.value);return n?r:fo(e.i,r)}function Ko(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.o=this.m=!1,this.s=new Set}g=Ko.prototype,g.release=function(){for(var e=m(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},g.Eh=function(){return this.j},g.Ve=function(){return this.l.slice()},g.nh=function(){return this.i};function px(e,t){var n=[],r=[],u=[],c=[];e=m(e);for(var f=e.next();!f.done;f=e.next()){var h=f.value;f=new Map(h.audioStreams.map(function(G){return[V_(G),G]}));var E=new Map(h.videoStreams.map(function(G){return[K_(G),G]})),A=new Map(h.textStreams.map(function(G){return[Mp(G),G]}));if(h=new Map(h.imageStreams.map(function(G){return[Dp(G),G]})),t){var k=_x(vr);A.set(Mp(k),k),k=_x("image"),h.set(Dp(k),k)}n.push(f),r.push(E),u.push(A),c.push(h)}return{Pf:n,Lg:r,Ig:u,hg:c}}g.Sf=function(e,t){var n=this,r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue,vt,Nt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn;return xe(function(Yn){if(Yn.g==1){if(r=Ei,!t&&e.length==1)return u=px(e,!1),c=u.Pf,f=u.Lg,h=u.Ig,E=u.hg,n.h=Array.from(c[0].values()),n.g=Array.from(f[0].values()),n.l=Array.from(h[0].values()),n.i=Array.from(E[0].values()),Yn.u(2);for(A=-1,k=0;k<e.length;k++)G=e[k],n.s.has(G.id)||(n.s.add(G.id),A==-1&&(A=k));return A==-1?Yn.return():(te=px(e,!0),Y=te.Pf,ve=te.Lg,Le=te.Ig,De=te.hg,N(Yn,Promise.all([Zl(n,n.h,Y,A,Rp,Sd),Zl(n,n.g,ve,A,Rp,Sd),Zl(n,n.l,Le,A,Rp,Sd),Zl(n,n.i,De,A,Rp,Sd)]),2))}if(qe=0,Se=[],n.g.length&&n.h.length)for(Bt=m(n.h),_t=Bt.next();!_t.done;_t=Bt.next())for(Zt=_t.value,ln=m(n.g),pn=ln.next();!pn.done;pn=ln.next())Ln=pn.value,Mn=fe(Zt.drmInfos,Ln.drmInfos),Zt.drmInfos.length&&Ln.drmInfos.length&&!Mn.length||(qn=qe++,Se.push({id:qn,language:Zt.language,disabledUntilTime:0,primary:Zt.primary,audio:Zt,video:Ln,bandwidth:(Zt.bandwidth||0)+(Ln.bandwidth||0),drmInfos:Mn,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(Qe=n.g.length?n.g:n.h,Ue=m(Qe),vt=Ue.next();!vt.done;vt=Ue.next())Nt=vt.value,Vt=qe++,Se.push({id:Vt,language:Nt.language,disabledUntilTime:0,primary:Nt.primary,audio:Nt.type==r.S?Nt:null,video:Nt.type==r.fa?Nt:null,bandwidth:Nt.bandwidth||0,drmInfos:Nt.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});n.j=Se,X(Yn)})};function gx(e){var t,n,r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue,vt,Nt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn;return xe(function(qn){switch(qn.g){case 1:if(t=Ei,e.length==1)return qn.return(e[0]);for(n=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.S}).map(function(Kn){return[V_(Kn),Kn]}))}),r=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.fa}).map(function(Kn){return[K_(Kn),Kn]}))}),u=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ma}).map(function(Kn){return[Mp(Kn),Kn]}))}),c=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ue}).map(function(Kn){return[Dp(Kn),Kn]}))}),f=m(u),h=f.next();!h.done;h=f.next())E=h.value,A=Ex(t.ma),E.set(Mp(A),A);for(k=m(c),G=k.next();!G.done;G=k.next())te=G.value,Y=Ex(t.ue),te.set(Dp(Y),Y);return ve=new Ko,N(qn,Zl(ve,[],n,0,Dv,Pv),2);case 2:return Le=qn.h,N(qn,Zl(ve,[],r,0,Dv,Pv),3);case 3:return De=qn.h,N(qn,Zl(ve,[],u,0,Dv,Pv),4);case 4:return qe=qn.h,N(qn,Zl(ve,[],c,0,Dv,Pv),5);case 5:if(Se=qn.h,Qe=0,De.length&&Le.length)for(Bt=m(Le),_t=Bt.next();!_t.done;_t=Bt.next())for(Zt=_t.value,ln=m(De),pn=ln.next();!pn.done;pn=ln.next())Ln=pn.value,Mn=Qe++,Ln.variantIds.push(Mn),Zt.variantIds.push(Mn);else for(Ue=De.concat(Le),vt=m(Ue),Nt=vt.next();!Nt.done;Nt=vt.next())Vt=Nt.value,Vt.variantIds=[Qe++];return qn.return(De.concat(Le).concat(qe).concat(Se))}})}function Zl(e,t,n,r,u,c){var f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue,vt,Nt,Vt;return xe(function(Bt){switch(Bt.g){case 1:for(f=[],h=0;h<r;h++)f.push(new Set);for(E=r;E<n.length;E++)f.push(new Set(n[E].values()));A=m(t),k=A.next();case 2:if(k.done){Bt.u(4);break}return G=k.value,N(Bt,P6(e,G,n,r,c,f),5);case 5:if(te=Bt.h,!te)throw new pt(2,4,4037);k=A.next(),Bt.u(2);break;case 4:for(Y=m(f),ve=Y.next();!ve.done;ve=Y.next())for(Le=ve.value,De=m(Le),qe=De.next();!qe.done;qe=De.next())Se=qe.value,(Qe=O6(e,Se,n,u,c,f))&&t.push(Qe);for(Ue=m(f),ve=Ue.next();!ve.done;ve=Ue.next())for(vt=ve.value,Nt={},Vt=m(vt),qe=Vt.next();!qe.done;Nt={Bd:Nt.Bd},qe=Vt.next())if(Nt.Bd=qe.value,!H_(Nt.Bd)&&t.some(function(_t){return function(Zt){return q_(e,_t.Bd,Zt)}}(Nt)))throw new pt(2,4,4037);return Bt.return(t)}})}function P6(e,t,n,r,u,c){return xe(function(f){return f.g==1?(yx(e,n,t),t.matchedStreams?t.segmentIndex?N(f,mx(t,r),2):f.u(2):f.return(!1)):(vx(t,r,u,c),f.return(!0))})}function mx(e,t){var n,r,u,c,f,h,E;return xe(function(A){if(A.g==1){for(n=[],r=e.matchedStreams,u=m(r),c=u.next();!c.done;c=u.next())f=c.value,n.push(f.createSegmentIndex()),f.trickModeVideo&&!f.trickModeVideo.segmentIndex&&n.push(f.trickModeVideo.createSegmentIndex());return N(A,Promise.all(n),2)}if(e.segmentIndex instanceof _i)for(h=t;h<r.length;h++)E=r[h],E.segmentIndex&&e.segmentIndex.h.push(E.segmentIndex);X(A)})}function O6(e,t,n,r,u,c){if(H_(t))return null;var f=r(t);return yx(e,n,f),f.createSegmentIndex&&(f.createSegmentIndex=function(){return xe(function(h){return f.segmentIndex?h.u(0):(f.segmentIndex=new _i,N(h,mx(f,0),0))})}),!f.matchedStreams||!f.matchedStreams.length?null:(vx(f,0,u,c),f)}function vx(e,t,n,r){for(var u=e.matchedStreams;t<u.length;t++){var c=u[t];n(e,c);var f=!0;if(e.type=="audio"&&Gu(e.language,c.language)==0&&(f=!1),f&&(r[t].delete(c),c.fullMimeTypes))for(c=m(c.fullMimeTypes.values()),f=c.next();!f.done;f=c.next())e.fullMimeTypes.add(f.value)}}function Rp(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=m(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Dv(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Sd(e,t){function n(f,h){f||(f=[]),h=m(h);for(var E=h.next();!E.done;E=h.next())E=E.value,f.includes(E)||f.push(E);return f}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=m(t.keyIds),u=r.next();!u.done;u=r.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),r=fe(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new pt(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=m(t.closedCaptions),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.closedCaptions.set(u,c)}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Rp(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Sd(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Sd(e.trickModeVideo,t)}function Pv(e,t){var n=e.roles;n||(n=[]);for(var r=m(t.roles),u=r.next();!u.done;u=r.next())u=u.value,n.includes(u)||n.push(u);for(e.roles=n,n=m(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,T(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function yx(e,t,n){var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){if(u=L6(e,u.value,n),!u)return;r.push(u)}n.matchedStreams=r}function L6(e,t,n){var r={audio:V_,video:K_,text:Mp,image:Dp}[n.type],u=null,c=r(n);if(t.has(c))u=t.get(c);else{c={audio:function(A,k){return q_(e,A,k)},video:function(A,k){return q_(e,A,k)},text:k6,image:F6}[n.type];for(var f={audio:U6,video:B6,text:j6,image:Z6}[n.type],h=m(t.values()),E=h.next();!E.done;E=h.next())E=E.value,!c(n,E)||n.fastSwitching!=E.fastSwitching||u&&!f(n,u,E)||(u=E)}return e.o&&!H_(u)&&t.delete(r(u)),u}function Np(e,t){function n(r){if(!z_.has(r)){var u=Ia(r);z_.set(r,u)}return z_.get(r)}return e.mimeType!=t.mimeType?!1:n(e.codecs)==n(t.codecs)}g.yg=function(e){this.m=e},g.Fg=function(e){this.o=e};function q_(e,t,n){return!(!Np(t,n)&&!e.m||t.drmInfos&&!ne(t.drmInfos,n.drmInfos))}function k6(e,t){return t.language?!(e.forced!==t.forced||Gu(e.language,t.language)==0||t.kind!=e.kind):!0}function F6(){return!0}function U6(e,t,n){var r=Np(e,t),u=Np(e,n);if(r&&!u)return!1;if(!r&&u||(r=Gu(e.language,t.language),u=Gu(e.language,n.language),u>r))return!0;if(u<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}return e.roles.length?(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length?!0:u.length<r.length?!1:n.roles.length<t.roles.length):!n.roles.length&&t.roles.length?!0:n.roles.length&&!t.roles.length?!1:!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=xp(e.channelsCount,t.channelsCount,n.channelsCount),r==Ks?!0:r==ul?!1:(r=xp(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==Ks?!0:r==ul?!1:!!(e.bandwidth&&Tx(e.bandwidth,t.bandwidth,n.bandwidth)==Ks)))}function B6(e,t,n){var r=Np(e,t),u=Np(e,n);if(r&&!u)return!1;if(!r&&u||(r=xp(e.width*e.height,t.width*t.height,n.width*n.height),r==Ks))return!0;if(r==ul)return!1;if(e.frameRate){if(r=xp(e.frameRate,t.frameRate,n.frameRate),r==Ks)return!0;if(r==ul)return!1}return!!(e.bandwidth&&Tx(e.bandwidth,t.bandwidth,n.bandwidth)==Ks)}function j6(e,t,n){var r=Gu(e.language,t.language),u=Gu(e.language,n.language);if(u>r)return!0;if(u<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length)return!0;if(u.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function Z6(e,t,n){return xp(e.width*e.height,t.width*t.height,n.width*n.height)==Ks}function Ex(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function _x(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function xp(e,t,n){if(t==e&&e!=n)return ul;if(n==e&&e!=t)return Ks;if(t>e){if(n<=e||n-e<t-e)return Ks;if(n-e>t-e)return ul}else{if(n>e)return ul;if(e-n<e-t)return Ks;if(e-n>e-t)return ul}return Sx}function Tx(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Ks:t<e?ul:Sx}function H_(e){switch(e.type){case vr:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function K_(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function V_(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Mp(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Dp(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}re("shaka.util.PeriodCombiner",Ko),Ko.prototype.setUseStreamOnce=Ko.prototype.Fg,Ko.prototype.setAllowMultiTypeVariants=Ko.prototype.yg,Ko.prototype.combinePeriods=Ko.prototype.Sf,Ko.prototype.getImageStreams=Ko.prototype.nh,Ko.prototype.getTextStreams=Ko.prototype.Ve,Ko.prototype.getVariants=Ko.prototype.Eh;var Ks=1,Sx=0,ul=-1,z_=new Map;function G6(e,t){var n=new DOMParser,r=q6.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(u){return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function wx(e,t){try{var n=Ka(e);return G6(n,t)}catch(r){return null}}var q6=new ra(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Ov(){var e=this;this.i=this.g=null,this.o=[],this.j=null,this.I=1,this.m={},this.L={},this.l=new Ko,this.G=0,this.H=new M(5),this.A=new pr(function(){$6(e)}),this.F=new Ll,this.B=null,this.K=[],this.C=1/0,this.s=!1,this.h=null}g=Ov.prototype,g.configure=function(e){var t=this.i&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.j&&this.j.presentationTimeline.R()&&this.A.kc(),this.h&&this.h.configure(this.g),this.l&&(this.l.yg(this.g.dash.multiTypeVariantsAllowed&&Un()),this.l.Fg(this.g.dash.useStreamOnceInPeriodFlattening))},g.start=function(e,t){var n=this,r;return xe(function(u){if(u.g==1)return n.s=t.isLowLatencyMode(),n.o=[e],n.i=t,N(u,Y_(n),2);if(r=u.h,n.i&&W_(n,r),!n.i)throw new pt(2,7,7001);return u.return(n.j)})},g.stop=function(){for(var e=m(Object.values(this.m)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.l&&this.l.release(),this.g=this.i=null,this.o=[],this.j=null,this.m={},this.l=null,this.A!=null&&(this.A.stop(),this.A=null),this.h&&this.h.destroy(),this.F.destroy()},g.update=function(){var e=this,t;return xe(function(n){if(n.g==1)return ce(n,2),N(n,Y_(e),4);if(n.g!=2)return de(n,0);if(t=Ce(n),!e.i||!t)return n.return();e.i.onError(t),X(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(e){if(this.j&&this.j.presentationTimeline.R()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.j.presentationTimeline.Gb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.G=t.endTime-e,W_(this,0))}}},g.banLocation=function(e){this.h&&this.h.banLocation(e)};function Y_(e){var t,n,r,u,c,f,h;return xe(function(E){return E.g==1?(t=e.o,1<e.o.length&&e.h&&(n=Cp(e.h,"Location",!0),n.length&&(t=n)),r=Li(t,e.g.retryParameters),u=Date.now(),N(E,X_(e,r,0,{type:4}),2)):E.g!=3?(c=E.h,e.i?(c.uri&&c.uri!=c.originalUri&&!e.o.includes(c.uri)&&e.o.unshift(c.uri),N(E,H6(e,c.data,c.uri),3)):E.return(0)):(f=Date.now(),h=(f-u)/1e3,e.H.sample(1,h),E.return(h))})}function H6(e,t,n){var r,u,c,f,h,E,A,k,G,te;return xe(function(Y){if(Y.g==1){if(r=t,u=e.g.dash.manifestPreprocessor,c=$m,u!=c){if(dr("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),f=wx(r,"MPD"),!f)throw new pt(2,4,4001,n);u(f),r=Va(f.outerHTML)}if(h=Qh(r,"MPD"),!h)throw new pt(2,4,4001,n);return E=e.g.dash.manifestPreprocessorTXml,A=Xm,E!=A&&E(h),e.g.dash.disableXlinkProcessing?Y.return(Ax(e,h,n)):(k=e.g.dash.xlinkFailGracefully,G=Nv(h,e.g.retryParameters,k,n,e.i.networkingEngine),pu(e.F,G),N(Y,G.promise,2))}return te=Y.h,Y.return(Ax(e,te,n))})}function Ax(e,t,n){var r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue,vt,Nt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,xr,di,ki,ci,mi,Gr,ho,Fo,ai,zs,$c,Xc,Md,ll,Ys,cl,Vl,Dd,Pd,my,Od,Yp,vy;return xe(function(Ss){switch(Ss.g){case 1:for(e.h&&e.h.l.clear(),r=[n],u=[],c=new Map,f=Wr(t,"Location"),h=m(f),E=h.next();!E.done;E=h.next())A=E.value,k=A.attributes.serviceLocation,(G=mu(A))&&(te=fo(r,[G])[0],k&&(e.h?Td(e.h,"Location",k,te):c.set(k,te)),u.push(te));if(e.h?(Y=Cp(e.h,"Location",!0),0<Y.length&&(r=e.o=Y)):u.length&&(r=e.o=u),ve=Promise.resolve(),(Le=ua(t,"ContentSteering"))&&e.i)for(De=Le.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=De):(e.h=new _d(e.i),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=De,(qe=mu(Le))&&(_r(Le,"queryBeforeStart",Jh,!1)?ve=bp(e.h,qe):bp(e.h,qe))),Se=m(c.keys()),Qe=Se.next();!Qe.done;Qe=Se.next())Ue=Qe.value,vt=c.get(Ue),Td(e.h,"Location",Ue,vt);if(Nt=Wr(t,"BaseURL"),Bt=!1,e.h)for(_t=m(Nt),Zt=_t.next();!Zt.done;Zt=_t.next())ln=Zt.value,pn=ln.attributes.serviceLocation,Ln=mu(ln),pn&&Ln&&(Td(e.h,"BaseURL",pn,Ln),Bt=!0);if(Bt&&e.h||(Mn=Nt.map(mu),Vt=fo(r,Mn)),qn=function(){return e.h&&Bt?Cp(e.h,"BaseURL"):Vt||[]},Yn=0,Nt&&Nt.length&&(Yn=_r(Nt[0],"availabilityTimeOffset",Lc)||0),Kn=e.g.dash.ignoreMinBufferTime,xr=0,Kn||(xr=_r(t,"minBufferTime",$a)||0),e.G=_r(t,"minimumUpdatePeriod",$a,-1),di=_r(t,"availabilityStartTime",$f),ki=_r(t,"timeShiftBufferDepth",$a),ci=e.g.dash.ignoreSuggestedPresentationDelay,mi=null,ci||(mi=_r(t,"suggestedPresentationDelay",$a)),Gr=e.g.dash.ignoreMaxSegmentDuration,ho=null,Gr||(ho=_r(t,"maxSegmentDuration",$a)),Fo=t.attributes.type||"static",e.j)for(ai=e.j.presentationTimeline,zs=m(Object.values(e.m)),$c=zs.next();!$c.done;$c=zs.next())Xc=$c.value,Xc.segmentIndex&&Xc.segmentIndex.La(ai.qb());else Md=e.g.defaultPresentationDelay||1.5*xr,ll=mi!=null?mi:Md,ai=new tr(di,ll,e.g.dash.autoCorrectDrift);return ai.Ec(Fo=="static"),ai.R()&&!isNaN(e.g.availabilityWindowOverride)&&(ki=e.g.availabilityWindowOverride),ki==null&&(ki=1/0),ai.je(ki),Ys=t.attributes.profiles||"",cl={Eb:Fo!="static",presentationTimeline:ai,za:null,ha:null,ua:null,J:null,bandwidth:0,ig:!1,Qb:Yn,profiles:Ys.split(",")},Vl=V6(e,cl,qn,t),Dd=Vl.duration,Pd=Vl.periods,Fo!="static"&&Vl.Xf||ai.Za(Dd||1/0),e.C&&!e.s&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.s=e.i.isLowLatencyMode()),e.s?ai.zg(e.C):e.C&&Ke("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),ai.hf(ho||1),N(Ss,e.l.Sf(Pd,cl.Eb),2);case 2:return N(Ss,ve,3);case 3:if(e.s&&(xr=0,my=mi!=null?mi:e.g.defaultPresentationDelay,ai.Bf(my)),e.j){e.j.variants=e.l.j,Od=e.l.Ve(),0<Od.length&&(e.j.textStreams=Od),e.j.imageStreams=e.l.i,e.i.filter(e.j),Ss.u(4);break}if(e.j={presentationTimeline:ai,variants:e.l.j,textStreams:e.l.Ve(),imageStreams:e.l.i,offlineSessionIds:[],minBufferTime:xr||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:K6(t)},!ai.Kg()){Ss.u(5);break}return Yp=Wr(t,"UTCTiming"),N(Ss,e5(e,qn,Yp),6);case 6:if(vy=Ss.h,!e.i)return Ss.return();ai.Ag(vy);case 5:ai.Xd();case 4:e.i.makeTextStreamsForClosedCaptions(e.j),X(Ss)}})}function K6(e){var t=ua(e,"ServiceDescription");return t?(e=ua(t,"Latency"),t=ua(t,"PlaybackRate"),e&&e.attributes.max||t?{maxLatency:e&&e.attributes.max?parseInt(e.attributes.max,10)/1e3:null,maxPlaybackRate:t?parseFloat(t.attributes.max):null,minLatency:e&&e.attributes.min?parseInt(e.attributes.min,10)/1e3:null,minPlaybackRate:t?parseFloat(t.attributes.min):null}:null):null}function V6(e,t,n,r){var u=_r(r,"mediaPresentationDuration",$a),c=[],f=0;r=Wr(r,"Period");for(var h=0;h<r.length;h++){var E=r[h],A=r[h+1],k=_r(E,"start",$a,f),G=E.attributes.id,te=_r(E,"duration",$a),Y=null;if(A){var ve=_r(A,"start",$a);ve!=null&&(Y=ve-k)}else u!=null&&(Y=u-k);if(Y==null&&(Y=te),!(e.B!==null&&G!==null&&k!==null&&k<e.B)||e.K.includes(G)||h+1==r.length){if(k!==null&&(e.B===null||k>e.B)&&(e.B=k),f=z6(e,t,n,{start:k,duration:Y,node:E,Ye:Y==null||!A}),c.push(f),t.za.id&&Y&&(e.L[t.za.id]=Y),Y==null){f=null;break}f=k+Y}}return e.K=c.map(function(Le){return Le.id}),u!=null?{periods:c,duration:u,Xf:!1}:{periods:c,duration:f,Xf:!0}}function z6(e,t,n,r){t.za=$_(e,r.node,null,n),t.ha=r,t.za.Qb=t.Qb,t.za.id||(t.za.id="__shaka_period_"+r.start);var u=Wr(r.node,"EventStream");n=t.presentationTimeline.qb(),u=m(u);for(var c=u.next();!c.done;c=u.next())t5(e,r.start,r.duration,c.value,n);if(n=Wr(r.node,"AdaptationSet").map(function(k){return Y6(e,t,k)}).filter(Bu),t.Eb){for(r=[],u=m(n),c=u.next();!c.done;c=u.next()){c=m(c.value.ki);for(var f=c.next();!f.done;f=c.next())r.push(f.value)}if(r.length!=new Set(r).size)throw new pt(2,4,4018)}for(r=n.filter(function(k){return!k.If}),n=n.filter(function(k){return k.If}),n=m(n),u=n.next();!u.done;u=n.next()){u=u.value,c=u.If.split(" "),f=m(r);for(var h=f.next();!h.done;h=f.next()){var E=h.value;if(c.includes(E.id)){h={},E=m(E.streams);for(var A=E.next();!A.done;h={Cd:h.Cd},A=E.next())h.Cd=A.value,h.Cd.trickModeVideo=u.streams.find(function(k){return function(G){return Ia(k.Cd.codecs)==Ia(G.codecs)}}(h))}}}if(n=Lv(e.g.disableAudio,r,"audio"),u=Lv(e.g.disableVideo,r,"video"),c=Lv(e.g.disableText,r,vr),r=Lv(e.g.disableThumbnails,r,"image"),u.length===0&&n.length===0)throw new pt(2,4,4004);return{id:t.za.id,audioStreams:n,videoStreams:u,textStreams:c,imageStreams:r}}function Lv(e,t,n){return e||!t.length?[]:t.reduce(function(r,u){return u.contentType!=n||r.push.apply(r,T(u.streams)),r},[])}function Y6(e,t,n){function r(_t){switch(_t){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ua=$_(e,n,t.za,null);var u=!1,c=Wr(n,"Role"),f=c.map(function(_t){return _t.attributes.value}).filter(Bu),h=void 0,E=t.ua.contentType==vr;E&&(h="subtitle"),c=m(c);for(var A=c.next();!A.done;A=c.next()){A=A.value;var k=A.attributes.schemeIdUri;if(k==null||k=="urn:mpeg:dash:role:2011")switch(A=A.attributes.value,A){case"main":u=!0;break;case"caption":case"subtitle":h=A}}var G;k=Wr(n,"EssentialProperty"),c=null;var te=!1;A=!1,k=m(k);for(var Y=k.next();!Y.done;Y=k.next()){Y=Y.value;var ve=Y.attributes.schemeIdUri;ve=="http://dashif.org/guidelines/trickmode"?c=Y.attributes.value:ve=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?G=r(parseInt(Y.attributes.value,10)):ve!="urn:mpeg:mpegB:cicp:ColourPrimaries"&&ve!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(ve=="urn:mpeg:dash:ssr:2023"?te=!0:A=!0)}var Le=null;for(k=Wr(n,"SupplementalProperty"),k=m(k),Y=k.next();!Y.done;Y=k.next())Y=Y.value,ve=Y.attributes.schemeIdUri,ve=="http://dashif.org/guidelines/last-segment-number"?Le=parseInt(Y.attributes.value,10)-1:ve=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(G=r(parseInt(Y.attributes.value,10)));k=Wr(n,"Accessibility");var De=new Map,qe;for(k=m(k),Y=k.next();!Y.done;Y=k.next())if(ve=Y.value,Y=ve.attributes.schemeIdUri,ve=ve.attributes.value,Y=="urn:scte:dash:cc:cea-608:2015")if(Y=1,ve!=null){ve=ve.split(";");for(var Se=m(ve),Qe=Se.next();!Qe.done;Qe=Se.next()){var Ue=Qe.value,vt=Qe=void 0;Ue.includes("=")?(Ue=Ue.split("="),Qe=Ue[0].startsWith("CC")?Ue[0]:"CC"+Ue[0],vt=Ue[1]||"und"):(Qe="CC"+Y,ve.length==2?Y+=2:Y++,vt=Ue),De.set(Qe,Cr(vt))}}else De.set("CC1","und");else if(Y=="urn:scte:dash:cc:cea-708:2015")if(Y=1,ve!=null)for(ve=m(ve.split(";")),Qe=ve.next();!Qe.done;Qe=ve.next())Qe=Qe.value,Ue=Se=void 0,Qe.includes("=")?(Qe=Qe.split("="),Se="svc"+Qe[0],Ue=Qe[1].split(",")[0].split(":").pop()):(Se="svc"+Y,Y++,Ue=Qe),De.set(Se,Cr(Ue));else De.set("svc1","und");else Y=="urn:mpeg:dash:role:2011"?ve!=null&&(f.push(ve),ve=="captions"&&(h="caption")):Y=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(ve=="1"?qe="visually impaired":ve=="2"&&(qe="hard of hearing"));if(A)return null;A=Wr(n,"ContentProtection");var Nt=tx(A,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),Vt=Cr(t.ua.language||"und"),Bt=n.attributes.label;if((A=Wr(n,"Label"))&&A.length&&(A=Ri(A[0]))&&(Bt=A),A=Wr(n,"Representation"),n=A.map(function(_t){return(_t=W6(e,t,Nt,h,Vt,Bt,u,f,De,_t,qe,Le))&&(_t.hdr=_t.hdr||G,_t.fastSwitching=te),_t}).filter(function(_t){return!!_t}),n.length==0){if(c=t.ua.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||E||c)return null;throw new pt(2,4,4003)}if(!t.ua.contentType||t.ua.contentType=="application")for(t.ua.contentType=bx(n[0].mimeType,n[0].codecs),E=m(n),Y=E.next();!Y.done;Y=E.next())Y.value.type=t.ua.contentType;for(E=t.ua.id||"__fake__"+e.I++,k=m(n),Y=k.next();!Y.done;Y=k.next()){for(Y=Y.value,ve=m(Nt.drmInfos),Se=ve.next();!Se.done;Se=ve.next())Se=Se.value,Se.keyIds=Se.keyIds&&Y.keyIds?new Set([].concat(T(Se.keyIds),T(Y.keyIds))):Se.keyIds||Y.keyIds;e.g.dash.enableAudioGroups&&(Y.groupId=E)}return A=A.map(function(_t){return _t.attributes.id}).filter(Bu),{id:E,contentType:t.ua.contentType,language:Vt,Dj:u,streams:n,drmInfos:Nt.drmInfos,If:c,ki:A}}function W6(e,t,n,r,u,c,f,h,E,A,k,G){if(t.J=$_(e,A,t.ua,null),e.C=Math.min(e.C,t.J.Qb),!J6(t.J))return null;var te=t.ha.start;t.bandwidth=_r(A,"bandwidth",Us)||0;var Y=t.J.contentType,ve=Y==vr||Y=="application";Y=Y=="image";try{var Le=void 0;if(n.xe){var De=t.J.nb,qe=fo(De(),[n.xe.Rh]),Se=Li(qe,e.g.retryParameters);Le={bitsKey:128,blockCipherMode:"CBC",iv:n.xe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var _t,Zt,ln;return xe(function(pn){if(pn.g==1)return N(pn,X_(e,Se,6),2);if(pn.g!=3){if(_t=pn.h,!_t.data||_t.data.byteLength!=16)throw new pt(2,4,4049);return Zt={name:"AES-CBC"},ln=Le,N(pn,p.crypto.subtle.importKey("raw",_t.data,Zt,!0,["decrypt"]),3)}ln.cryptoKey=pn.h,Le.fetchKey=void 0,X(pn)})}}}if(De=function(_t,Zt,ln,pn){return n5(e,_t,Zt,ln,pn)},t.J.pd)var Qe=E6(t,De,Le);else if(t.J.Jb)Qe=T6(t,e.m,Le);else if(t.J.qd)Qe=I6(t,De,e.m,!!e.j,e.g.dash.initialSegmentLimit,e.L,Le,G);else{var Ue=t.ha.duration||0,vt=t.J.nb;Qe={vc:function(){var _t=VE(te,Ue,vt());return _t.tc(function(Zt){Zt.mimeType=t.J.mimeType,Zt.codecs=t.J.codecs}),Promise.resolve(_t)}}}}catch(_t){if((ve||Y)&&_t.code==4002)return null;throw _t}G=Wr(A,"ContentProtection"),G=r6(G,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),G=new Set(G?[G]:[]),De=!1,Wr(A,"SupplementalProperty").some(function(_t){return _t.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&_t.attributes.value=="JOC"})&&(De=!0),qe=!1,ve&&(qe=h.includes("forced_subtitle")||h.includes("forced-subtitle"));var Nt;if(Y&&((A=Wr(A,"EssentialProperty").find(function(_t){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(_t.attributes.schemeIdUri)}))&&(Nt=A.attributes.value),!Nt))return null;var Vt;A=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(A.includes("hvc1.2.4.L153.B0")||A.includes("hev1.2.4.L153.B0"))&&(Vt="PQ"),ve=t.J.id?t.za.id+","+t.J.id:"";var Bt=ve&&e.m[ve]?e.m[ve]:{id:e.I++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Bt.segmentIndex&&(Bt.segmentIndex.release(),Bt.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:A,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:G,language:u,originalLanguage:t.ua.language,label:c,type:t.ua.contentType,primary:f,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:h,forced:qe,channelsCount:t.J.de,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:De,closedCaptions:E,hdr:Vt,videoLayout:void 0,tilesLayout:Nt,accessibilityPurpose:k,external:!1,fastSwitching:!1,fullMimeTypes:new Set([wi(t.J.mimeType,t.J.codecs)])};return Bt.createSegmentIndex=function(){var _t;return xe(function(Zt){if(Zt.g==1)return Bt.segmentIndex?Zt.u(0):(_t=Bt,N(Zt,Qe.vc(),3));_t.segmentIndex=Zt.h,X(Zt)})},ve&&t.Eb&&!e.m[ve]&&(e.m[ve]=Bt),Bt}function $6(e){var t,n;xe(function(r){switch(r.g){case 1:return t=0,ce(r,2),N(r,Y_(e),4);case 4:t=r.h,de(r,3);break;case 2:if(n=Ce(r),e.i){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),r.return();n.severity=1,e.i.onError(n)}case 3:if(!e.i)return r.return();e.i.onManifestUpdated(),W_(e,t),X(r)}})}function W_(e,t){if(!(0>e.G)){var n=e.G;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.A.X(Math.max(n-t,q(e.H)))}}function $_(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,de:null,audioSamplingRate:null,Qb:0,xf:0},r=r||n.nb;var u=t.attributes.id,c=Wr(t,"BaseURL"),f,h=!1;if(e.h)for(var E=m(c),A=E.next();!A.done;A=E.next()){var k=A.value;A=k.attributes.serviceLocation,k=mu(k),A&&k&&(Td(e.h,u,A,k),h=!0)}h&&e.h||(f=c.map(mu)),E=t.attributes.contentType||n.contentType,A=t.attributes.mimeType||n.mimeType,k=t.attributes.codecs||n.codecs;var G=_r(t,"frameRate",Om)||n.frameRate,te=t.attributes.sar||n.pixelAspectRatio,Y=X6(Wr(t,"InbandEventStream"),n.emsgSchemeIdUris),ve=Wr(t,"AudioChannelConfiguration");ve=Q6(ve)||n.de;var Le=_r(t,"audioSamplingRate",Ro)||n.audioSamplingRate;E||(E=bx(A,k));var De=ua(t,"SegmentBase"),qe=ua(t,"SegmentTemplate"),Se=De&&_r(De,"availabilityTimeOffset",Lc)||0,Qe=qe&&_r(qe,"availabilityTimeOffset",Lc)||0,Ue=c&&c.length&&_r(c[0],"availabilityTimeOffset",Lc)||0;return Se=n.Qb+Ue+Se+Qe,Qe=null,(Ue=ua(t,"SegmentSequenceProperties"))&&(Ue=ua(Ue,"SAP"))&&(Qe=_r(Ue,"cadence",Xu)),{nb:function(){return fo(r(),c.length?e.h&&h?Cp(e.h,u):f||[]:[])},pd:De||n.pd,Jb:ua(t,"SegmentList")||n.Jb,qd:qe||n.qd,width:_r(t,"width",Ro)||n.width,height:_r(t,"height",Ro)||n.height,contentType:E,mimeType:A,codecs:k,frameRate:G,pixelAspectRatio:te,emsgSchemeIdUris:Y,id:u,language:t.attributes.lang,de:ve,audioSamplingRate:Le,Qb:Se,xf:Qe||n.xf}}function X6(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function Q6(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function J6(e){var t=e.pd?1:0;return t+=e.Jb?1:0,t+=e.qd?1:0,t==0?e.contentType==vr||e.contentType=="application":(t!=1&&(e.pd&&(e.Jb=null),e.qd=null),!0)}function Ix(e,t,n,r){var u,c,f,h,E,A,k;return xe(function(G){if(G.g==1)return u=[bo(n)],c=fo(t(),u),f=Li(c,e.g.retryParameters),f.method=r,h=e.i.networkingEngine.request(4,f),pu(e.F,h),N(G,h.promise,2);if(E=G.h,r=="HEAD"){if(!E.headers||!E.headers.date)return G.return(0);A=E.headers.date}else A=Vr(E.data);return k=Date.parse(A),isNaN(k)?G.return(0):G.return(k-Date.now())})}function e5(e,t,n){var r,u,c,f,h,E,A,k;return xe(function(G){switch(G.g){case 1:r=n.map(function(te){return{scheme:te.attributes.schemeIdUri,value:te.attributes.value}}),u=e.g.dash.clockSyncUri,!r.length&&u&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),c=m(r),f=c.next();case 2:if(f.done){G.u(4);break}switch(h=f.value,ce(G,5),E=h.scheme,A=h.value,E){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return G.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return G.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return k=Date.parse(A),G.return(isNaN(k)?0:k-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Ke("NTP UTCTiming scheme is not supported");break;default:Ke("Unrecognized scheme in UTCTiming element",E)}G.u(9);break;case 7:return N(G,Ix(e,t,A,"HEAD"),10);case 10:return G.return(G.h);case 8:return N(G,Ix(e,t,A,"GET"),11);case 11:return G.return(G.h);case 9:de(G,3);break;case 5:Ce(G);case 3:f=c.next(),G.u(2);break;case 4:return Ke("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),G.return(0)}})}function t5(e,t,n,r,u){var c=r.attributes.schemeIdUri||"",f=r.attributes.value||"",h=_r(r,"timescale",Ro)||1;r=m(Wr(r,"Event"));for(var E=r.next();!E.done;E=r.next()){E=E.value;var A=_r(E,"presentationTime",Ro)||0,k=_r(E,"duration",Ro)||0;A=A/h+t,k=A+k/h,n!=null&&(A=Math.min(A,t+n),k=Math.min(k,t+n)),k<u||(E={schemeIdUri:c,value:f,startTime:A,endTime:k,id:E.attributes.id||"",eventElement:ep(E),eventNode:E},e.i.onTimelineRegionAdded(E))}}function n5(e,t,n,r,u){var c,f,h,E;return xe(function(A){return A.g==1?(c=Wa,f=u?0:1,h=up(t,n,r,e.g.retryParameters),N(A,X_(e,h,c,{type:f}),2)):(E=A.h,A.return(E.data))})}function bx(e,t){return t=wi(e,t),Cl(t)?vr:e.split("/")[0]}function X_(e,t,n,r){return t=e.i.networkingEngine.request(n,t,r),pu(e.F,t),t.promise}re("shaka.dash.DashParser",Ov),Fe["application/dash+xml"]=function(){return new Ov},Fe["video/vnd.mpeg.dash.mpd"]=function(){return new Ov};function kv(){}re("shaka.dependencies",kv),kv.has=function(e){return Q_.has(e)},kv.add=function(e,t){if(!Rx[e])throw Error(e+" is not supported");e==Cx?dr("mux.js","mux.js is no longer used in Shaka Player."):Q_.set(e,function(){return t})};var Cx="muxjs",Rx={Ej:Cx,ISOBoxer:"ISOBoxer"};kv.Allowed=Rx;var Q_=new Map([["ISOBoxer",function(){return p.ISOBoxer}]]);function Nx(e,t,n){this.type=e,this.g=t,this.segments=n||null}function xx(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}xx.prototype.toString=function(e){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function Mx(e){var t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return e.toString(t)}function Pp(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function zn(e,t,n){return(e=Pp(e,t))?e.value:n||null}function ii(e,t){if(e=Pp(e,t),!e)throw new pt(2,4,4023,t);return e.value}function Dx(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.rb=n}function Px(e,t){this.name=e,this.value=t}function Vs(e,t){return e.filter(function(n){return n.name==t})}function Ox(e,t){return e.filter(function(n){return ii(n,"TYPE")==t})}function No(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function wd(e,t,n){return n=n===void 0?0:n,(e=No(e,t))?Number(e.value):n}function Gl(e,t,n){return t?Lx(e,[t],n):[]}function Lx(e,t,n){if(!t.length)return[];t=fo(e,t),e=[],t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=e,c=u.push,f=r.value;if((r=n)&&r.size){f=String(f).replace(/%7B/g,"{").replace(/%7D/g,"}");var h=f.match(/{\$\w*}/g);if(h){h=m(h);for(var E=h.next();!E.done;E=h.next()){E=E.value;var A=E.slice(2,E.length-1),k=r.get(A);if(k)f=f.replace(E,k);else throw new pt(2,4,4039,A)}}r=f}else r=f;c.call(u,r)}return e}function Vc(e){this.h=e||"",this.g=0}function Ad(e){ql(e,/[ \t]+/gm)}function ql(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function zc(e){return e.g==e.h.length?null:(e=ql(e,/[^ \t\n]*/gm))?e[0]:null}function r5(){this.g=0}function J_(e,t){t=Vr(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new pt(2,4,4015);t=0;for(var r=!0,u=m(n),c=u.next();!c.done;c=u.next())if(c=c.value,/^#(?!EXT)/m.test(c)||r)r=!1;else if(c=eT(e,c),--e.g,kx.includes(c.name)){t=1;break}else c.name=="EXT-X-STREAM-INF"&&(r=!0);for(u=[],r=!0,c=0;c<n.length;c++){var f=n[c],h=n[c+1];if(/^#(?!EXT)/m.test(f)||r)r=!1;else{if(f=eT(e,f),i5.includes(f.name)){if(t!=1)throw new pt(2,4,4017);f=n.splice(c,n.length-c),n=[],r=[],c=[],h=null,f=m(f);for(var E=f.next();!E.done;E=f.next())E=E.value,/^(#EXT)/.test(E)?(E=eT(e,E),kx.includes(E.name)?u.push(E):E.name=="EXT-X-MAP"?h=E:E.name=="EXT-X-PART"?c.push(E):E.name=="EXT-X-PRELOAD-HINT"?zn(E,"TYPE")=="PART"?c.push(E):zn(E,"TYPE")=="MAP"&&(E.name="EXT-X-MAP",h=E):r.push(E)):/^#(?!EXT)/m.test(E)||(E=E.trim(),h&&r.push(h),n.push(new Dx(E,r,c)),r=[],c=[]);return c.length&&(h&&r.push(h),n.push(new Dx("",r,c))),new Nx(t,u,n)}u.push(f),f.name=="EXT-X-STREAM-INF"&&(f.attributes.push(new Px("URI",h)),r=!0)}}return new Nx(t,u)}function eT(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new pt(2,4,4016,t);t=n[1];var r=n[2];n=[];var u;if(r){r=new Vc(r);var c;(c=ql(r,/^([^,=]+)(?:,|$)/g))&&(u=c[1]);for(var f=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;c=ql(r,f);)n.push(new Px(c[1],c[2]||c[3])),Ad(r)}return new xx(e,t,n,u)}var kx="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),i5="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Fx(){}function Ux(e){try{var t=tT(e);return Yu({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return hu(n)}}function tT(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new pt(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new pt(2,1,1004,e);var n=t[0];e=p.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var u;return r?u=qo(e):u=Va(e),{data:u,contentType:n}}re("shaka.net.DataUriPlugin",Fx),Fx.parse=Ux,Ho("data",Ux);function Bx(e){var t=ba(e),n=t.split("/")[0];return e=Do(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Lf:null}}function o5(e,t){function n(Se){return r(Se.name)}function r(Se){switch(Se=Se.toLowerCase(),Se){case"avc1":case"avc3":c.push(Se+".42E01E"),h=!0;break;case"hev1":case"hvc1":c.push(Se+".1.6.L93.90"),h=!0;break;case"dvh1":case"dvhe":c.push(Se+".05.04"),h=!0;break;case"vp09":c.push(Se+".00.10.08"),h=!0;break;case"av01":c.push(Se+".0.01M.08"),h=!0;break;case"mp4a":u.push("mp4a.40.2"),f=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":u.push(Se),f=!0}}var u=[],c=[],f=!1,h=!1,E=null,A=null,k=null,G=null,te=null,Y=null,ve;if(new Fr().box("moov",yr).box("trak",yr).O("tkhd",function(Se){Se=Gt(Se.reader,Se.version),A=String(Se.height),k=String(Se.width)}).box("mdia",yr).O("mdhd",function(Se){E=It(Se.reader,Se.version).language}).box("minf",yr).box("stbl",yr).O("stsd",gu).box("mp4a",function(Se){var Qe=Se.reader;Qe.skip(6),Qe.skip(2),Qe.skip(8);var Ue=Qe.ra();Qe.skip(2),Qe.skip(2),Qe.skip(2),Qe=Qe.ra()+Qe.ra()/65536,G=Ue,te=Qe,Se.reader.ka()?yr(Se):n(Se)}).box("esds",function(Se){Se=Se.reader;for(var Qe="mp4a",Ue,vt;Se.ka();){Ue=Se.P();for(var Nt=Se.P();Nt&128;)Nt=Se.P();if(Ue==3)Se.ra(),Nt=Se.P(),Nt&128&&Se.ra(),Nt&64&&Se.skip(Se.P()),Nt&32&&Se.ra();else if(Ue==4)vt=Se.P(),Se.skip(12);else if(Ue==5)break}vt&&(Qe+="."+vn(vt),Ue==5&&Se.ka()&&(Ue=Se.P(),vt=(Ue&248)>>3,vt===31&&Se.ka()&&(vt=32+((Ue&7)<<3)+((Se.P()&224)>>5)),Qe+="."+vt)),u.push(Qe),f=!0}).box("ac-3",n).box("ec-3",n).box("opus",n).box("Opus",n).box("fLaC",n).box("avc1",function(Se){ve=Se.name,Ai(Se)}).box("avc3",function(Se){ve=Se.name,Ai(Se)}).box("hev1",function(Se){ve=Se.name,Ai(Se)}).box("hvc1",function(Se){ve=Se.name,Ai(Se)}).box("dva1",function(Se){ve=Se.name,Ai(Se)}).box("dvav",function(Se){ve=Se.name,Ai(Se)}).box("dvh1",function(Se){ve=Se.name,Ai(Se)}).box("dvhe",function(Se){ve=Se.name,Ai(Se)}).box("vp09",function(Se){ve=Se.name,Ai(Se)}).box("av01",function(Se){ve=Se.name,Ai(Se)}).box("avcC",function(Se){var Qe=ve||"";switch(ve){case"dvav":Qe="avc3";break;case"dva1":Qe="avc1"}Se=Se.reader,Se.skip(1),Se=Qe+"."+vn(Se.P())+vn(Se.P())+vn(Se.P()),c.push(Se),h=!0}).box("hvcC",function(Se){var Qe=ve||"";switch(ve){case"dvh1":Qe="hvc1";break;case"dvhe":Qe="hev1"}var Ue=Se.reader;Ue.skip(1),Se=Ue.P();var vt=["","A","B","C"][Se>>6],Nt=Se&31,Vt=Ue.M(),Bt=(Se&32)>>5?"H":"L";Se=[Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P()],Ue=Ue.P();for(var _t=0,Zt=0;32>Zt&&(_t|=Vt&1,Zt!=31);Zt++)_t<<=1,Vt>>=1;for(Qe=Qe+("."+vt+Nt)+("."+vn(_t,!0)),Qe+="."+Bt+Ue,vt="",Nt=Se.length;Nt--;)((Bt=Se[Nt])||vt)&&(vt="."+Bt.toString(16).toUpperCase()+vt);Qe+=vt,c.push(Qe),h=!0}).box("dvcC",function(Se){var Qe=ve||"";switch(ve){case"hvc1":Qe="dvh1";break;case"hev1":Qe="dvhe";break;case"avc1":Qe="dva1";break;case"avc3":Qe="dvav"}var Ue=Se.reader;Ue.skip(2),Se=Ue.P(),Ue=Ue.P(),c.push(Qe+"."+Pn(Se>>1&127)+"."+Pn(Se<<5&32|Ue>>3&31)),h=!0}).O("vpcC",function(Se){var Qe=ve||"",Ue=Se.reader;Se=Ue.P();var vt=Ue.P();Ue=Ue.P()>>4&15,c.push(Qe+"."+Pn(Se)+"."+Pn(vt)+"."+Pn(Ue)),h=!0}).box("av1C",function(Se){var Qe=ve||"",Ue=Se.reader;Ue.skip(1),Se=Ue.P(),Ue=Ue.P();var vt=Se>>>5,Nt=(Ue&64)>>6;c.push(Qe+"."+vt+"."+Pn(Se&31)+(Ue>>>7?"H":"M")+"."+Pn(vt===2&&Nt?(Ue&32)>>5?12:10:Nt?10:8)+"."+((Ue&16)>>4)+"."+((Ue&8)>>3)+((Ue&4)>>2)+(Ue&3)+"."+Pn(1)+"."+Pn(1)+"."+Pn(1)+".0"),h=!0}).box("enca",Xh).box("encv",Ai).box("sinf",yr).box("frma",function(Se){Se=un(Se.reader).Ea,r(Se)}).box("colr",function(Se){Se=Se.reader;var Qe=null,Ue=Se.sb(4),vt=String.fromCharCode(Ue[0]);if(vt+=String.fromCharCode(Ue[1]),vt+=String.fromCharCode(Ue[2]),vt+=String.fromCharCode(Ue[3]),vt==="nclx")switch(Se.ra(),Ue=Se.ra(),Se.ra(),Ue){case 1:case 6:case 13:case 14:case 15:Qe="SDR";break;case 16:Qe="PQ";break;case 18:Qe="HLG"}Y=Qe}).parse(e||t,!0),!u.length&&!c.length)return null;var Le=f&&!h,De=new Map;if(h){var qe=new At("video/mp4");for(e&&qe.init(e),qe.i(t),e=m(qe.j()),t=e.next();!t.done;t=e.next())t=t.value,De.set(t,t);qe.h()}return{type:Le?"audio":"video",mimeType:Le?"audio/mp4":"video/mp4",codecs:jx(u.concat(c)).join(", "),language:E,height:A,width:k,channelCount:G,sampleRate:te,closedCaptions:De,Lf:Y}}function jx(e){var t=new Set,n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u=za(r);t.has(u)||(n.push(r),t.add(u))}return t=Nh("audio",n),r=Nh("video",n),e=Nh(vr,n),r=a5(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function a5(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvh1.")||n.startsWith("dvhe.")});return t?Ot('video/mp4; codecs="'+t+"\"'")?[t]:e.filter(function(n){return n!=t}):e}function s5(e){var t=null;return new Fr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",gu).box("encv",Ai).box("enca",Xh).box("sinf",yr).box("schi",yr).O("tenc",function(n){n=n.reader,n.P(),n.P(),n.P(),n.P(),t=Ps(n.sb(16))}).parse(e,!0),t}function Fv(){var e=this;this.g=this.i=null,this.A=1,this.o=new Map,this.H=new Map,this.K=new Map,this.K.set("video",new Map),this.K.set("audio",new Map),this.K.set(vr,new Map),this.K.set("image",new Map),this.Ia=new Set,this.h=new Map,this.l=null,this.aa="",this.Ga=new r5,this.I=-1,this.T=1/0,this.ea=this.mb=!1,this.s=new pr(function(){R5(e)}),this.qa=Gv,this.C=null,this.Ha=0,this.m=1/0,this.ta=this.sa=this.L=0,this.N=new Ll,this.F=new Map,this.G=new Map,this.Y=new Map,this.ba=new Map,this.da=new Map,this.ia=new Map,this.pa=new Map,this.lb=this.B=!1,this.bb=new M(5),this.j=null}g=Fv.prototype,g.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},g.start=function(e,t){var n=this,r;return xe(function(u){return u.g==1?(n.i=t,n.B=t.isLowLatencyMode(),N(u,lT(n,[e]),2)):u.g!=3?(r=u.h,n.aa=r.uri,N(u,c5(n,r.data,e),3)):u.return(n.C)})},g.stop=function(){this.s&&(this.s.stop(),this.s=null);var e=[];return this.N&&(e.push(this.N.destroy()),this.N=null),this.g=this.i=null,this.Ia.clear(),this.C=null,this.h.clear(),this.H.clear(),this.G.clear(),this.o.clear(),this.Y.clear(),this.ba.clear(),this.da.clear(),this.ia.clear(),this.pa.clear(),this.j&&this.j.destroy(),Promise.all(e)},g.update=function(){var e=this,t,n,r,u,c,f,h,E,A;return xe(function(k){if(k.g==1){if(!Na(e))return k.return();for(t=[],n=Array.from(e.h.values()),e.m=1/0,r=n.filter(function(G){return G.stream.segmentIndex}),u=m(r),c=u.next();!c.done;c=u.next())f=c.value,t.push(u5(e,f));return N(k,Promise.all(t),2)}Xx(e,r.map(function(G){return G.stream})),h=r.some(function(G){return G.fd==0}),r.length&&!h&&(E=N5,jv(e,E.Pg),A=r.map(function(G){return G.yb}),e.l.Za(Math.min.apply(Math,T(A))),e.i.updateDuration()),h&&rT(e),X(k)})};function nT(e,t){return Na(e)?e.K.get(t.type):t.$d}function u5(e,t){var n,r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue,vt,Nt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn;return xe(function(qn){if(qn.g==1){for(n=[],r=m(t.$()),u=r.next();!u.done;u=r.next())c=u.value,f=new si(c),h=f.g,t.Gd&&(0<=t.gb&&h.add("_HLS_msn",String(t.gb)),0<=t.hb&&h.add("_HLS_part",String(t.hb))),t.Hd&&h.add("_HLS_skip","YES"),na(h)&&hr(f,h),n.push(f.toString());return N(qn,lT(e,n,!0),2)}if(qn.g!=3){if(E=qn.h,!t.stream.segmentIndex)return qn.return();if(A=J_(e.Ga,E.data),A.type!=1)throw new pt(2,4,4017);return k=E.uri,k==E.originalUri||t.$().includes(k)||t.tg.push(k),G=Vs(A.g,"EXT-X-DEFINE"),te=Hx(e,G,k),Y=t.stream,ve=nT(e,t),N(qn,tM(e,A,Y.mimeType,t.$,te),3)}Le=qn.h,De=Le.keyIds,qe=Le.drmInfos,Se=function(Yn,Kn){return Yn.size===Kn.size&&[].concat(T(Yn)).every(function(xr){return Kn.has(xr)})},Se(Y.keyIds,De)||(Y.keyIds=De,Y.drmInfos=qe,e.i.newDrmInfo(Y)),Qe=oM(e,A,Y,ve,te,t.$,t.type),Ue=Qe.segments,(vt=Qe.bandwidth)&&(Y.bandwidth=vt),Y.segmentIndex.kd(Ue,e.l.qb()),Ue.length&&(Nt=wd(A.g,"EXT-X-MEDIA-SEQUENCE",0),Bt=(Vt=No(A.g,"EXT-X-SKIP"))?Number(zn(Vt,"SKIPPED-SEGMENTS")):0,_t=Jx(Nt,Ue),Zt=_t.gb,ln=_t.hb,t.gb=Zt+Bt,t.hb=ln,pn=ve.get(Nt),Y.segmentIndex.La(pn)),Ln=Ue[0],t.fc=Ln.startTime,Mn=Ue[Ue.length-1],t.yb=Mn.endTime,No(A.g,"EXT-X-ENDLIST")&&(t.fd=!0),oT(e,A),X(qn)})}g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(e){this.j&&this.j.banLocation(e)};function Zx(e,t){for(var n=e.I==-1,r=m(t),u=r.next();!u.done;u=r.next()){u=u.value;var c=u.stream.segmentIndex,f=nT(e,u);if(c=c.g[0]||null){f=m(f);for(var h=f.next();!h.done;h=f.next()){h=m(h.value);var E=h.next().value;if(h.next().value==c.startTime){n&&(e.I=Math.max(e.I,E)),u.De=E;break}}}}if(!(0>e.I))for(t=m(t),u=t.next();!u.done;u=t.next())n=u.value,Bv(e,n.type)&&(r=n.stream.segmentIndex)&&(u=e.I-n.De,0<u&&(r.g.splice(0,u),r=r.g[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),Gx(e,n,r)))}function l5(e,t){if(e.T==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value.stream.segmentIndex.g[0]||null;r!=null&&r.h!=null&&(e.T=Math.min(e.T,r.h))}}if(t=e.T,t!=1/0){for(r=m(e.h.values()),n=r.next();!n.done;n=r.next())if(n=n.value,!Bv(e,n.type)){var u=n.stream.segmentIndex;if(u!=null){var c=u.g[0]||null;if(c.h==null)he("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.$(),"Expect AV sync issues!");else for(Gx(e,n,c.h-t-c.startTime),n=m(u),u=n.next();!u.done;u=n.next())u.value.Ff(t)}}}}function Gx(e,t,n){t.fc+=n,t.yb+=n,e=nT(e,t);for(var r=m(e),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.set(u,c+n)}t.$()}function c5(e,t,n){var r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue,vt,Nt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,xr,di,ki,ci,mi;return xe(function(Gr){switch(Gr.g){case 1:return r=J_(e.Ga,t),u=Vs(r.g,"EXT-X-DEFINE"),c=[],f=[],h=[],E=function(){return[n]},r.type==1?N(Gr,qx(e,r,E),7):(f5(e,u),A=Vs(r.g,"EXT-X-MEDIA"),k=Vs(r.g,"EXT-X-STREAM-INF"),G=Vs(r.g,"EXT-X-IMAGE-STREAM-INF"),te=Vs(r.g,"EXT-X-I-FRAME-STREAM-INF"),Y=Vs(r.g,"EXT-X-SESSION-KEY"),ve=Vs(r.g,"EXT-X-SESSION-DATA"),Le=Vs(r.g,"EXT-X-CONTENT-STEERING"),h5(e,ve),N(Gr,p5(e,Le),4));case 4:return d5(e,k),T5(e,A),N(Gr,y5(e,k,Y,A,E,e.o),5);case 5:return c=Gr.h,f=g5(e,A),N(Gr,m5(e,G,te),6);case 6:h=Gr.h,Gr.u(3);break;case 7:return De=Gr.h,qe=De.type,Se=De.mimeType,Qe=De.codecs,Ue=De.language,vt=De.height,Nt=De.width,Vt=De.channelCount,Bt=De.sampleRate,_t=De.closedCaptions,Zt=De.Lf,N(Gr,Qx(e,e.A++,r,E,n,Qe,qe,Ue,!0,"Media Playlist",Vt,_t,null,!1,Bt,!1,Se),8);case 8:ln=Gr.h,e.h.set(n,ln),qe=="video"&&aM(ln.stream,Nt,vt,null,Zt,null),c.push({id:0,language:Cr(Ue||"und"),disabledUntilTime:0,primary:!0,audio:qe=="audio"?ln.stream:null,video:qe=="video"?ln.stream:null,bandwidth:ln.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new pt(2,7,7001);if(e.l=new tr(null,0),e.l.Ec(!0),r.type==1&&(Na(e)&&(rM(e,r),pn=e.m,e.s.X(pn)),Ln=Array.from(e.h.values()),iT(e,Ln),rT(e)),e.C={presentationTimeline:e.l,variants:c,textStreams:f,imageStreams:h,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},e.ea||!e.g.hls.disableCodecGuessing){Gr.u(9);break}for(Mn=[],qn=m(e.C.variants),Yn=qn.next();!Yn.done;Yn=qn.next())Kn=Yn.value,Kn.audio&&Kn.audio.codecs===""&&Mn.push(Kn.audio.createSegmentIndex()),Kn.video&&Kn.video.codecs===""&&Mn.push(Kn.video.createSegmentIndex());return N(Gr,Promise.all(Mn),9);case 9:if(e.i.makeTextStreamsForClosedCaptions(e.C),c.length==1){for(xr=[],di=c[0],ki=m([di.video,di.audio]),ci=ki.next();!ci.done;ci=ki.next())(mi=ci.value)&&!mi.segmentIndex&&xr.push(mi.createSegmentIndex());if(0<xr.length)return N(Gr,Promise.all(xr),0)}Gr.u(0)}})}function qx(e,t,n){var r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue;return xe(function(vt){switch(vt.g){case 1:if(r=Bx(e.g.hls.mediaPlaylistFullMimeType),!t.segments.length)return vt.return(r);if(u=Math.trunc((t.segments.length-1)/2),c=t.segments[u],f=Gl(n(),t.segments[0].h),h=f[0],E=new si(h),A=E.Pa.split(".").pop(),k=uM[A])return vt.return(Bx(k));if(G=Wa,te=null,Y=aT(e,t,c.g,n),e.Y.clear(),!Y){vt.u(2);break}return ve=up(Y.$(),Y.ac(),Y.Yb(),e.g.retryParameters),N(vt,Hl(e,ve,G,{type:0}),3);case 3:Le=vt.h,te=Le.data;case 2:return De=Li(f,e.g.retryParameters),N(vt,Hl(e,De,G,{type:1}),4);case 4:if(qe=vt.h,(Se=qe.headers["content-type"])&&(Se=Se.split(";")[0].toLowerCase()),A=="ts"||Se=="video/mp2t"){var Nt=qe.data,Vt=Qn(Nt);Vt=new Ve().parse(Vt);var Bt=Vt.bd();Vt=Vt.We();var _t=[],Zt=!1,ln=!1;switch(Bt.audio){case"aac":case"aac-loas":_t.push("mp4a.40.2"),Zt=!0;break;case"mp3":_t.push("mp4a.40.34"),Zt=!0;break;case"ac3":_t.push("ac-3"),Zt=!0;break;case"ec3":_t.push("ec-3"),Zt=!0;break;case"opus":_t.push("opus"),Zt=!0}switch(Bt.video){case"avc":Vt.Ea?_t.push(Vt.Ea):_t.push("avc1.42E01E"),ln=!0;break;case"hvc":Vt.Ea?_t.push(Vt.Ea):_t.push("hvc1.1.6.L93.90"),ln=!0;break;case"av1":_t.push("av01.0.01M.08"),ln=!0}if(_t.length){if(Bt=Zt&&!ln,Zt=new Map,ln){ln=new At("video/mp2t"),ln.i(Nt),Nt=m(ln.j());for(var pn=Nt.next();!pn.done;pn=Nt.next())pn=pn.value,Zt.set(pn,pn);ln.h()}Vt={type:Bt?"audio":"video",mimeType:"video/mp2t",codecs:_t.join(", "),language:null,height:Vt.height,width:Vt.width,channelCount:null,sampleRate:null,closedCaptions:Zt,Lf:null}}else Vt=null;if(Qe=Vt)return vt.return(Qe)}else if((A=="mp4"||A=="cmfv"||A=="m4s"||Se=="video/mp4"||Se=="audio/mp4"||Se=="video/iso.segment")&&(Ue=o5(te,qe.data)))return vt.return(Ue);return vt.return(r)}})}function rT(e){if(Na(e)){if(e.qa==qv){for(var t,n=t=1/0,r=m(e.h.values()),u=r.next();!u.done;u=r.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&(t=Math.min(t,u.yb),n=Math.min(n,u.fc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.s),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.je(t)}}else e.l.Za($x(e));if(!e.l.o)for(t=m(e.h.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.Bg(n.h);e.l.Xd()}function f5(e,t){var n=new si(e.aa).g;t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=zn(u,"NAME");var c=zn(u,"VALUE");u=zn(u,"QUERYPARAM"),r&&c&&(e.o.has(r)||e.o.set(r,c)),u&&(r=n.get(u)[0])&&!e.o.has(r)&&e.o.set(u,r)}}function Hx(e,t,n){n=new si(n).g;var r=new Map;t=m(t);for(var u=t.next();!u.done;u=t.next()){var c=u.value,f=zn(c,"NAME"),h=zn(c,"VALUE");u=zn(c,"QUERYPARAM"),c=zn(c,"IMPORT"),f&&h&&(r.has(f)||r.set(f,h)),u&&(f=n.get(u)[0])&&!r.has(f)&&r.set(u,f),c&&(u=e.o.get(c))&&r.set(c,u)}return r}function d5(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"AUDIO");n=zn(r,"VIDEO");var c=zn(r,"SUBTITLES");if(r=Kx(e,r),c){var f=Co(vr,r);e.G.set(c,f),mn(r,f)}u&&(c=Co("audio",r),c||(c=e.g.hls.defaultAudioCodec),e.G.set(u,c)),n&&(u=Co("video",r),u||(u=e.g.hls.defaultVideoCodec),e.G.set(n,u))}}function h5(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"DATA-ID");n=zn(r,"URI");var c=zn(r,"LANGUAGE");r=zn(r,"VALUE"),u=new Map().set("id",u),n&&u.set("uri",Gl([e.aa],n,e.o)[0]),c&&u.set("language",c),r&&u.set("value",r),n=new Wn("sessiondata",u),e.i&&e.i.onEvent(n)}}function p5(e,t){var n,r,u,c,f,h;return xe(function(E){if(!e.i||!e.g)return E.return();for(r=m(t),u=r.next();!u.done;u=r.next())if(c=u.value,f=zn(c,"PATHWAY-ID"),h=zn(c,"SERVER-URI"),f&&h){e.j=new _d(e.i),e.j.configure(e.g),e.j.i=[e.aa],e.j.setManifestType("HLS"),e.j.h=f,n=bp(e.j,h);break}return N(E,n,0)})}function g5(e,t){var n=Ox(t,"SUBTITLES");t=n.map(function(f){if(e.g.disableText)return null;try{return Wx(e,[f],new Map).stream}catch(h){if(e.g.hls.ignoreTextStreamFailures)return null;throw h}}),n=m(n);for(var r=n.next();!r.done;r=n.next()){var u=ii(r.value,"GROUP-ID");if((r=e.G.get(u))&&(u=e.H.get(u))){u=m(u);for(var c=u.next();!c.done;c=u.next())c=c.value,c.stream.codecs=r,c.stream.mimeType=sT(vr,r)||uT(vr),Id(c.stream)}}return t.filter(function(f){return f})}function Id(e){e.fullMimeTypes=new Set([wi(e.mimeType,e.codecs)])}function m5(e,t,n){var r,u;return xe(function(c){return c.g==1?(r=t.map(function(f){var h,E;return xe(function(A){if(A.g==1)return e.g.disableThumbnails?A.return(null):(ce(A,2),N(A,S5(e,f),4));if(A.g!=2)return h=A.h,A.return(h.stream);if(E=Ce(A),e.g.hls.ignoreImageStreamFailures)return A.return(null);throw E})}).concat(n.map(function(f){if(e.g.disableThumbnails)return null;try{var h=ii(f,"URI"),E=zn(f,"CODECS")||"";if(e.h.has(h))var A=e.h.get(h);else{var k=zn(f,"LANGUAGE"),G=zn(f,"NAME"),te=zn(f,"CHARACTERISTICS"),Y=Uv(e,e.A++,[h],E,"image",k,!1,G,null,null,te,!1,null,!1),ve=zn(f,"RESOLUTION"),Le=m(ve?ve.split("x"):[null,null]),De=Le.next().value,qe=Le.next().value;Y.stream.width=Number(De)||void 0,Y.stream.height=Number(qe)||void 0;var Se=zn(f,"BANDWIDTH");Se&&(Y.stream.bandwidth=Number(Se)),e.h.set(h,Y),A=Y}return f=A,f.stream.codecs!=="mjpg"?null:f.stream}catch(Qe){if(e.g.hls.ignoreImageStreamFailures)return null;throw Qe}})),N(c,Promise.all(r),2)):(u=c.h,c.return(u.filter(function(f){return f})))})}function v5(e,t,n){t=t.filter(function(h){var E=zn(h,"URI")||"";return zn(h,"TYPE")!="SUBTITLES"&&E!=""});var r={};t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=Mx(u);r[c]?r[c].push(u):r[c]=[u]}for(var f in r)Wx(e,r[f],n)}function y5(e,t,n,r,u,c){var f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue,vt,Nt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,xr,di,ki;return xe(function(ci){switch(ci.g){case 1:if(f=[],h=new Set,!(0<n.length)){ci.u(2);break}E=m(n),A=E.next();case 3:if(A.done){ci.u(2);break}if(k=A.value,G=ii(k,"METHOD"),te=zn(k,"KEYFORMAT")||"identity",Y=null,G=="NONE"||Zv(G)){ci.u(4);break}if(te!="identity"){Y=(ve=cM[te])?ve(k,""):null,ci.u(6);break}return N(ci,sM(e,k,"",u,null,c),8);case 8:Y=ci.h;case 6:if(Y){if(Y.keyIds)for(Le=m(Y.keyIds),De=Le.next();!De.done;De=Le.next())qe=De.value,h.add(qe);f.push(Y)}case 4:A=E.next(),ci.u(3);break;case 2:for(Se={},Qe=m(t),Ue=Qe.next();!Ue.done;Ue=Qe.next())vt=Ue.value,Nt=Mx(vt),Se[Nt]?Se[Nt].push(vt):Se[Nt]=[vt];Vt=[];for(Bt in Se)_t=Se[Bt],Zt=_t[0],ln=zn(Zt,"FRAME-RATE"),pn=Number(zn(Zt,"AVERAGE-BANDWIDTH"))||Number(ii(Zt,"BANDWIDTH")),Ln=zn(Zt,"RESOLUTION"),Mn=m(Ln?Ln.split("x"):[null,null]),qn=Mn.next().value,Yn=Mn.next().value,Kn=zn(Zt,"VIDEO-RANGE"),(xr=zn(Zt,"REQ-VIDEO-LAYOUT"))&&xr.includes(",")&&(di=xr.split(",").filter(function(mi){return mi=="CH-STEREO"||mi=="CH-MONO"}),xr=di[0]),xr=xr||"CH-MONO",ki=E5(e,_t,r,pn),Vt.push.apply(Vt,T(_5(e,ki.audio,ki.video,pn,qn,Yn,ln,Kn,xr,f,h)));return ci.return(Vt.filter(function(mi){return mi!=null}))}})}function E5(e,t,n,r){for(var u={audio:[],video:[]},c=new Map,f=[],h=!1,E=!1,A=m(t),k=A.next();!k.done;k=A.next()){var G=k.value;k=zn(G,"AUDIO");var te=zn(G,"VIDEO"),Y=k||te;Y&&(f.includes(Y)||f.push(Y),(G=zn(G,"PATHWAY-ID"))&&c.set(Y,G),k?h=!0:te&&(E=!0))}f.length&&n.length&&(A=n.filter(function(De){return f.includes(ii(De,"GROUP-ID"))}),v5(e,A,c)),A=(c=f.sort().join(","))&&e.H.has(c)?e.H.get(c):[],h?u.audio.push.apply(u.audio,T(A)):E&&u.video.push.apply(u.video,T(A)),k=!1;var ve=t.map(function(De){return ii(De,"URI")});if(E=u.audio.find(function(De){return De&&De.$().find(function(qe){return ve.includes(qe)})}),h=Kx(e,t[0]),te=Co("video",h),(Y=Co("audio",h))&&!te?(E="audio",k=0<u.audio.length):!u.audio.length&&!u.video.length&&Y&&te?(E="video",h=[[te,Y].join()]):u.audio.length&&E?(E="audio",k=!0):E=u.video.length&&!u.audio.length?"audio":"video",!k){var Le=G=Y=te=k=null;!A.length&&(n=n.find(function(De){var qe=zn(De,"URI")||"",Se=zn(De,"TYPE");return De=ii(De,"GROUP-ID"),Se!="SUBTITLES"&&qe==""&&f.includes(De)}))&&(k=zn(n,"LANGUAGE"),te=zn(n,"NAME"),Y=Vx(n),Yx(n),G=zn(n,"CHARACTERISTICS"),Le=zx(n)),e=w5(e,t,h,E,k,te,Y,G,Le),c&&(e.stream.groupId=c),A.length||(e.stream.bandwidth=r),u[e.stream.type]=[e]}return u}function Kx(e,t){var n=zn(t,"CODECS")||"";return t=zn(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(r){return r.split("/")[0]}),e.push.apply(e,T(t))),jx(e)}function Vx(e){return(e=zn(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function zx(e){return(e=zn(e,"SAMPLE-RATE"))?parseInt(e,10):null}function Yx(e){return(e=zn(e,"CHANNELS"))?e.includes("/JOC"):!1}function _5(e,t,n,r,u,c,f,h,E,A,k){for(var G=m(n),te=G.next();!te.done;te=G.next())aM(te.value.stream,u,c,f,h,E);for(u=e.g.disableAudio,(!t.length||u)&&(t=[null]),u=e.g.disableVideo,(!n.length||u)&&(n=[null]),u=[],t=m(t),c=t.next();!c.done;c=t.next())for(c=c.value,f=m(n),h=f.next();!h.done;h=f.next()){var Y=h.value;(h=c?c.stream:null)&&(h.drmInfos=A,h.keyIds=k),(E=Y?Y.stream:null)&&(E.drmInfos=A,E.keyIds=k),G=c?c.stream.drmInfos:null,te=Y?Y.stream.drmInfos:null,Y=Y?Y.$().sort().join(","):"";var ve=c?c.$().sort().join(","):"";Y=Y+" - "+ve,h&&E&&!ne(G,te)||e.Ia.has(Y)||(h={id:e.A++,language:h?h.language:"und",disabledUntilTime:0,primary:!!h&&h.primary||!!E&&E.primary,audio:h,video:E,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(h),e.Ia.add(Y))}return u}function T5(e,t){t=Ox(t,"CLOSED-CAPTIONS"),t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"LANGUAGE");n=Cr(u||"und"),u||(u=zn(r,"NAME"))&&(n=u),u=ii(r,"GROUP-ID"),r=ii(r,"INSTREAM-ID").replace("SERVICE","svc"),e.F.get(u)||e.F.set(u,new Map),e.F.get(u).set(r,n)}}function Wx(e,t,n){for(var r=[],u=[],c=new Map,f=m(t),h=f.next();!h.done;h=f.next()){var E=h.value;h=ii(E,"URI"),E=ii(E,"GROUP-ID"),r.push(h),u.push(E),c.set(E,h)}if(f=u.sort().join(","),h=t[0],t="",E=ii(h,"TYPE").toLowerCase(),E=="subtitles"&&(E=vr),E==vr)t=zn(h,"CODECS")||"";else{u=m(u);for(var A=u.next();!A.done;A=u.next())if(A=A.value,e.G.has(A)){t=e.G.get(A);break}}if(u=r.sort().join(","),e.h.has(u))return e.h.get(u);if(A=e.A++,e.j){c=m(c);for(var k=c.next();!k.done;k=c.next()){var G=m(k.value);k=G.next().value,G=G.next().value,(k=n.get(k))&&Td(e.j,A,k,G)}}n=zn(h,"LANGUAGE"),c=zn(h,"NAME"),k=zn(h,"DEFAULT")=="YES",G=E=="audio"?Vx(h):null;var te=E=="audio"?Yx(h):!1,Y=zn(h,"CHARACTERISTICS"),ve=zn(h,"FORCED")=="YES";return h=E=="audio"?zx(h):null,r=Uv(e,A,r,t,E,n,k,c,G,null,Y,ve,h,te),r.stream&&(r.stream.groupId=f),e.H.has(f)?e.H.get(f).push(r):e.H.set(f,[r]),e.h.set(u,r),r}function S5(e,t){var n,r,u,c,f,h,E,A,k,G;return xe(function(te){return te.g==1?(n=ii(t,"URI"),r=zn(t,"CODECS","jpeg")||"",e.h.has(n)?te.return(e.h.get(n)):(u=zn(t,"LANGUAGE"),c=zn(t,"NAME"),f=zn(t,"CHARACTERISTICS"),h=Uv(e,e.A++,[n],r,"image",u,!1,c,null,null,f,!1,null,!1),(E=zn(t,"RESOLUTION"))?N(te,h.stream.createSegmentIndex(),3):te.u(2))):(te.g!=2&&(A=h.stream.segmentIndex.get(0),k=A.tilesLayout)&&(h.stream.width=Number(E.split("x")[0])*Number(k.split("x")[0]),h.stream.height=Number(E.split("x")[1])*Number(k.split("x")[1])),(G=zn(t,"BANDWIDTH"))&&(h.stream.bandwidth=Number(G)),e.h.set(n,h),te.return(h))})}function w5(e,t,n,r,u,c,f,h,E){for(var A=e.A++,k=[],G=m(t),te=G.next();!te.done;te=G.next()){var Y=te.value;te=ii(Y,"URI"),Y=zn(Y,"PATHWAY-ID"),e.j&&Y&&Td(e.j,A,Y,te),k.push(te)}if(G=k.sort().join(","),e.h.has(G))return e.h.get(G);e:{if(t=zn(t[0],"CLOSED-CAPTIONS"),r=="video"){if(t&&t!="NONE"){t=e.F.get(t);break e}if(!t&&e.F.size)for(t=m(e.F.keys()).next();!t.done;){t=e.F.get(t.value);break e}}t=null}return n=Fu(r,n),r=Uv(e,A,k,n,r,u,!1,c,f,t,h,!1,E,!1),e.h.set(G,r),r}function Uv(e,t,n,r,u,c,f,h,E,A,k,G,te,Y){function ve(vt){var Nt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,xr,di,ki,ci,mi;return xe(function(Gr){switch(Gr.g){case 1:return Nt=Se.$(),N(Gr,lT(e,Se.$(),!0),2);case 2:if(Vt=Gr.h,vt.aborted)return Gr.return();if(Bt=Vt.uri,Bt==Vt.originalUri||Nt.includes(Bt)||qe.push(Bt),_t=J_(e.Ga,Vt.data),Zt=void 0,e.ea||!e.g.hls.disableCodecGuessing){Gr.u(3);break}return N(Gr,qx(e,_t,Le),4);case 4:ln=Gr.h,Zt=ln.mimeType,r=ln.codecs;case 3:return pn=Na(e),N(Gr,Qx(e,0,_t,Le,Bt,r,u,c,f,h,E,A,k,G,te,Y,Zt),5);case 5:if(Ln=Gr.h,vt.aborted)return Gr.return();if(Mn=Ln.stream,Na(e)&&!pn&&rM(e,_t),Se.fc=Ln.fc,Se.yb=Ln.yb,Se.Hd=Ln.Hd,Se.Gd=Ln.Gd,Se.fd=Ln.fd,Se.$d=Ln.$d,Se.gb=Ln.gb,Se.hb=Ln.hb,Se.df=!0,De.segmentIndex=Mn.segmentIndex,De.encrypted=Mn.encrypted,De.drmInfos=Mn.drmInfos,De.keyIds=Mn.keyIds,De.mimeType=Mn.mimeType,De.bandwidth=De.bandwidth||Mn.bandwidth,De.codecs=De.codecs||Mn.codecs,Id(De),De.drmInfos.length&&e.i.newDrmInfo(De),qn=Ei,u==qn.fa||u==qn.S)for(Yn=m(e.h.values()),Kn=Yn.next();!Kn.done;Kn=Yn.next())xr=Kn.value,xr.df||xr.type!=u||(xr.stream.mimeType=Mn.mimeType,Id(xr.stream));u==qn.ma&&(di=Mn.segmentIndex.get(0))&&di.ca&&(De.mimeType="application/mp4",Id(De)),A5(e)&&(e.mb?iT(e,[Se]):(e.mb=!0,ki=Array.from(e.h.values()),ci=ki.filter(function(ho){return ho.stream.segmentIndex}),iT(e,ci),rT(e),mi=e.m,0<mi&&e.s.X(mi))),X(Gr)}})}function Le(){return e.j&&1<n.length?Cp(e.j,t):qe.concat(Lx([e.aa],n,e.o))}var De=eM(e,r,u,c,f,h,E,A,k,G,te,Y),qe=[],Se={stream:De,type:u,tg:qe,$:Le,fc:0,yb:0,$d:new Map,Hd:!1,Gd:!1,fd:!1,De:-1,gb:-1,hb:-1,df:!1},Qe=null,Ue=new AbortController;return De.createSegmentIndex=function(){return Qe||(Ue=new AbortController,Qe=new Promise(function(vt){vt(ve(Ue.signal))}))},De.closeSegmentIndex=function(){Qe&&!De.segmentIndex&&Ue.abort(),De.segmentIndex&&(De.segmentIndex.release(),De.segmentIndex=null),Qe=null},Se}function $x(e){var t=1/0;e=m(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.yb));return t}function Xx(e,t){var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.tc(function(u){n.push(u)});e.l.ld(n)}function iT(e,t){if(!Na(e))for(var n=$x(e),r=m(t),u=r.next();!u.done;u=r.next())u.value.stream.segmentIndex.sc(0,n);Xx(e,t.map(function(c){return c.stream})),e.g.hls.ignoreManifestProgramDateTime?Zx(e,t):(l5(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&Zx(e,t))}function Bv(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function A5(e){if(!e.C)return!1;var t=[],n=[];e=m(e.C.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(u){return u.segmentIndex})||0<n.length&&!n.some(function(u){return u.segmentIndex}))}function Qx(e,t,n,r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De){var qe,Se,Qe,Ue,vt,Nt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,xr,di,ki,ci,mi,Gr;return xe(function(ho){switch(ho.g){case 1:if(n.type!=1)throw new pt(2,4,4017);qe=Vs(n.g,"EXT-X-DEFINE"),Se=Hx(e,qe,u);var Fo=No(n.g,"EXT-X-PLAYLIST-TYPE"),ai=No(n.g,"EXT-X-ENDLIST");if(ai=Fo&&Fo.value=="VOD"||ai,Fo=Fo&&Fo.value=="EVENT"&&!ai,Fo=!ai&&!Fo,ai?jv(e,Gv):Fo?jv(e,qv):jv(e,fM),Na(e)&&oT(e,n),De){ho.u(2);break}return N(ho,C5(e,f,c,n,Se,r),3);case 3:De=ho.h;case 2:return N(ho,tM(e,n,De,r,Se),4);case 4:if(Qe=ho.h,Ue=Qe.drmInfos,vt=Qe.keyIds,Nt=Qe.encrypted,Vt=Qe.Tg,Nt&&!Ue.length&&!Vt)throw new pt(2,4,4026);return Bt=eM(e,c,f,h,E,A,k,G,te,Y,ve,Le),Bt.encrypted=Nt,Bt.drmInfos=Ue,Bt.keyIds=vt,Bt.mimeType=De,Id(Bt),_t=Na(e)?e.K.get(f):new Map,Zt=oM(e,n,Bt,_t,Se,r,f),ln=Zt.segments,(pn=Zt.bandwidth)&&(Bt.bandwidth=pn),Na(e)&&oT(e,n),Ln=ln[0].startTime,Mn=ln[ln.length-1],qn=Mn.endTime,Yn=new wr(ln),Bt.segmentIndex=Yn,xr=(Kn=No(n.g,"EXT-X-SERVER-CONTROL"))?Pp(Kn,"CAN-SKIP-UNTIL")!=null:!1,di=Kn?Pp(Kn,"CAN-BLOCK-RELOAD")!=null:!1,ki=wd(n.g,"EXT-X-MEDIA-SEQUENCE",0),ci=Jx(ki,ln),mi=ci.gb,Gr=ci.hb,ho.return({stream:Bt,type:f,tg:[],$:r,fc:Ln,yb:qn,Hd:xr,Gd:di,fd:!1,De:-1,gb:mi,hb:Gr,$d:_t,df:!1})}})}function Jx(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{gb:e,hb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].preload||(e++,n=0),{gb:e,hb:n}):(e++,t.m&&(n=0),{gb:e,hb:n})}function eM(e,t,n,r,u,c,f,h,E,A,k,G){var te=sT(n,t)||uT(n),Y=[];if(E){E=m(E.split(","));for(var ve=E.next();!ve.done;ve=E.next())Y.push(ve.value)}return E=void 0,ve=null,n==vr?E=Y.includes("public.accessibility.transcribes-spoken-dialog")&&Y.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":Y.includes("public.accessibility.describes-video")&&(ve="visually impaired"),Y.length||E!=="subtitle"||Y.push("subtitle"),e={id:e.A++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:te,codecs:t,kind:n==vr?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Cr(r||"und"),originalLanguage:r,label:c,type:n,primary:u,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:Y,forced:A,channelsCount:f,audioSamplingRate:k,spatialAudio:G,closedCaptions:h,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:ve,external:!1,fastSwitching:!1,fullMimeTypes:new Set},Id(e),e}function tM(e,t,n,r,u){var c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue,vt,Nt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn;return xe(function(Kn){switch(Kn.g){case 1:if(c=new Map,t.segments){for(f=m(t.segments),h=f.next();!h.done;h=f.next())if(E=h.value,A=Vs(E.g,"EXT-X-KEY"),k=null,A.length)for(k=aT(e,t,E.g,r,u),G=m(A),te=G.next();!te.done;te=G.next())Y=te.value,c.set(Y,k)}Le=ve=!1,De=[],qe=new Set,Se=m(c),Qe=Se.next();case 2:if(Qe.done){Kn.u(4);break}if(Ue=Qe.value,vt=m(Ue),Nt=vt.next().value,Vt=vt.next().value,Bt=Nt,_t=Vt,Zt=ii(Bt,"METHOD"),Zt=="NONE"){Kn.u(3);break}if(ve=!0,ln=zn(Bt,"KEYFORMAT")||"identity",pn=null,Zv(Zt)){Le=!0,Kn.u(3);break}if(ln!="identity"){pn=(Ln=cM[ln])?Ln(Bt,n):null,Kn.u(6);break}return N(Kn,sM(e,Bt,n,r,_t,u),8);case 8:pn=Kn.h;case 6:if(pn){if(pn.keyIds)for(Mn=m(pn.keyIds),qn=Mn.next();!qn.done;qn=Mn.next())Yn=qn.value,qe.add(Yn);De.push(pn)}case 3:Qe=Se.next(),Kn.u(2);break;case 4:return Kn.return({drmInfos:De,keyIds:qe,encrypted:ve,Tg:Le})}})}function nM(e,t,n,r,u){if(!p.crypto||!p.crypto.subtle)throw Ke("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new pt(2,4,4042);var c=0,f=zn(t,"IV","");if(f){var h=fu(f.substr(2));if(h.byteLength!=16)throw new pt(2,4,4048)}else c=wd(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+c,!e.ba.has(n)){var E={bitsKey:128,blockCipherMode:"CBC",iv:h,firstMediaSequenceNumber:c};switch(ii(t,"METHOD")){case"AES-256":E.bitsKey=256;break;case"AES-256-CTR":E.bitsKey=256,E.blockCipherMode="CTR"}E.fetchKey=function(){var A,k,G,te,Y,ve,Le;return xe(function(De){if(De.g==1)return A=Gl(r(),ii(t,"URI"),u),k=A.sort().join(""),e.da.has(k)||(G=Li(A,e.g.retryParameters),te=Hl(e,G,6),e.da.set(k,te)),N(De,e.da.get(k),2);if(De.g!=3){if(Y=De.h,!Y.data||Y.data.byteLength!=E.bitsKey/8)throw new pt(2,4,4049);return ve={name:E.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:E.bitsKey},Le=E,N(De,p.crypto.subtle.importKey("raw",Y.data,ve,!0,["decrypt"]),3)}Le.cryptoKey=De.h,E.fetchKey=void 0,X(De)})},e.ba.set(n,E)}return e.ba.get(n)}function oT(e,t){var n=1/0,r=t.segments;if(r.length)for(var u=r.length-1;0<=u;){var c=No(r[u].g,"EXTINF");if(c){n=Number(c.value.split(",")[0]);break}u--}if(r=No(t.g,"EXT-X-TARGETDURATION"),!r)throw new pt(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(u=No(t.g,"EXT-X-PART-INF"))&&(e.L=Number(ii(u,"PART-TARGET"))),t=No(t.g,"EXT-X-SERVER-CONTROL"),e.B&&e.L?(e.m=e.lb?5*e.L<=n?Math.min(e.L,e.m):Math.min(n,e.m):Math.min(e.L,e.m),e.ta=t?Number(ii(t,"PART-HOLD-BACK")):0):(e.m=Math.min(n,e.m),n=t?Pp(t,"HOLD-BACK"):null,e.sa=n?Number(n.value):0),e.Ha=Math.max(r,e.Ha)}function rM(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.ta)t=e.ta;else if(e.sa)t=e.sa;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.Ha*n}e.l.Cg(0),e.l.Bf(t),e.l.Ec(!1)}function aT(e,t,n,r,u){var c=No(n,"EXT-X-MAP");if(!c)return null;var f=ii(c,"URI"),h=Gl(r(),f,u);if(f=[h.toString(),zn(c,"BYTERANGE","")].join("-"),!e.Y.has(f)){var E=void 0,A=null;n=m(n);for(var k=n.next();!k.done;k=n.next())k=k.value,k.name=="EXT-X-KEY"?Zv(ii(k,"METHOD"))&&k.id<c.id&&(E=nM(e,k,t,r,u)):k.name=="EXT-X-BYTERANGE"&&k.id<c.id&&(A=k);t=I5(h,c,A,E),e.Y.set(f,t)}return e.Y.get(f)}function I5(e,t,n,r){var u=0,c=null;return t=zn(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(u=t.split("@"),c=Number(u[0]),u=Number(u[1]),c=u+c-1,r&&(n=c+1-u,n%16&&(c+=16-n%16))),new dt(function(){return e},u,c,null,null,null,r)}function b5(e,t,n,r,u,c,f,h,E){var A=r.g,k=No(A,"EXTINF"),G=0,te=0,Y=null;r.rb.length&&!e.B&&Ke("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var ve=null;if(!e.g.hls.ignoreManifestProgramDateTime){var Le=No(A,"EXT-X-PROGRAM-DATE-TIME");Le&&Le.value&&(ve=$f(Le.value))}var De=jt;if(No(A,"EXT-X-GAP")&&(De=2),!k){if(r.rb.length==0)throw new pt(2,4,4024,"EXTINF");if(!e.B)return null}var qe=[];Le=!1;var Se=null,Qe=!1,Ue=!1;if(e.B&&r.rb.length){G=(f.mimeType=="video/mp4"||f.mimeType=="audio/mp4")&&p.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var vt=ve,Nt={},Vt=0;Vt<r.rb.length;Nt={Qc:Nt.Qc,yd:Nt.yd},Vt++){var Bt=r.rb[Vt],_t=Vt==0?n:qe[qe.length-1],Zt=Vt==0?u:_t.endTime,ln=Number(zn(Bt,"DURATION"))||e.L;if(ln){var pn=Zt+ln,Ln=0,Mn=null;if(Bt.name=="EXT-X-PRELOAD-HINT"?(Ln=(Ln=zn(Bt,"BYTERANGE-START"))?Number(Ln):0,(_t=zn(Bt,"BYTERANGE-LENGTH"))?Mn=Ln+Number(_t)-1:Ln&&(Mn=Number.MAX_SAFE_INTEGER)):(Ln=zn(Bt,"BYTERANGE"),Mn=m(iM(_t,Ln)),Ln=Mn.next().value,Mn=Mn.next().value),Nt.yd=zn(Bt,"URI"),Nt.yd){_t=jt,zn(Bt,"GAP")=="YES"&&(_t=2,Qe=!0),Nt.Qc=null;var qn=function(Kn){return function(){return Kn.Qc==null&&(Kn.Qc=Gl(h(),Kn.yd,c)),Kn.Qc}}(Nt);G&&0<=Ln&&Mn!=null&&(Se=qn,Le=!0),Zt=new et(Zt,pn,qn,Ln,Mn,t,0,0,1/0,[],"",null,vt,_t,E),Bt.name=="EXT-X-PRELOAD-HINT"&&(Zt.ef(),Ue=!0),zn(Bt,"INDEPENDENT")!="YES"&&0<Vt&&Zt.Zd(),qe.push(Zt),vt&&(vt+=ln)}}}}if(k){if(k=Number(k.value.split(",")[0]),k==0)return null;G=u+k}else if(qe.length)G=qe[qe.length-1].endTime;else return null;Le&&(Qe||qe[0].Aa!=0?(Le=!1,Se=null):qe=[]),(k=No(A,"EXT-X-BYTERANGE"))?(Y=m(iM(n,k.value)),te=Y.next().value,Y=Y.next().value):qe.length&&(te=qe[0].Aa,Y=qe[qe.length-1].ja),n="",k=null,f.type=="image"&&(n="1x1",f=No(A,"EXT-X-TILES"))&&(n=ii(f,"LAYOUT"),(f=zn(f,"DURATION"))&&(k=Number(f)));var Yn=null;return t=new et(u,G,function(){return Se?Se():(Yn==null&&(Yn=Gl(h(),r.h,c)),Yn||[])},te,Y,t,0,0,1/0,qe,n,k,ve,De,E,0<qe.length&&!!r.h),Le&&(e.lb=!0,t.lg(),Ue&&t.ef()),t}function iM(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.ja+1,r=n+t-1),[n,r]}function oM(e,t,n,r,u,c,f){var h=t.segments,E=void 0,A=wd(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),k=wd(t.g,"EXT-X-MEDIA-SEQUENCE",0),G=No(t.g,"EXT-X-SKIP"),te=G?Number(zn(G,"SKIPPED-SEGMENTS")):0,Y=k+te,ve=0;Na(e)&&r.has(Y)&&(ve=r.get(Y)),ve===0&&e.qa==qv&&0<r.size&&!r.has(Y)&&(ve=e.l.qb());var Le=[],De=null;G=[];for(var qe=0;qe<h.length;qe++){var Se=h[qe],Qe=qe==0?ve:De.endTime;Y=k+te+qe,No(Se.g,"EXT-X-DISCONTINUITY")&&A++;for(var Ue=m(Se.g),vt=Ue.next();!vt.done;vt=Ue.next())vt=vt.value,vt.name=="EXT-X-KEY"&&(Zv(ii(vt,"METHOD"))?E=nM(e,vt,t,c,u):E=void 0);r.set(Y,Qe),Ue=aT(e,t,Se.g,c,u),!e.B&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.B=e.i.isLowLatencyMode()),(Qe=b5(e,Ue,De,Se,Qe,u,n,c,E))&&((De=wd(Se.g,"EXT-X-BITRATE"))?G.push({bitrate:De,duration:Qe.endTime-Qe.startTime}):G.length&&(De=G.pop(),De.duration+=Qe.endTime-Qe.startTime,G.push(De)),De=Qe,Qe.j=A,Bv(e,f)&&e.I!=null&&Y<e.I||Le.push(Qe))}if(t=void 0,G.length&&(t=G.reduce(function(Nt,Vt){return Nt+Vt.duration},0),t=Math.round(G.reduce(function(Nt,Vt){return Nt+Vt.bitrate*Vt.duration},0)/t*1e3)),G=Le.some(function(Nt){return Nt.h!=null})){for(n={},r=0;r<Le.length;n={Jc:n.Jc,Ic:n.Ic,td:n.td,Cb:n.Cb,Fc:n.Fc},r++)if(n.Cb=Le[r],n.Cb.h==null)for(n.Ic=0,n.Jc=r,u=function(Nt){return function(){var Vt=Le[Nt.Jc];if(Vt){if(Vt.h!=null)return Vt.h+Nt.Ic;Nt.Ic-=Vt.endTime-Vt.startTime,Nt.Jc+=1}return null}}(n),n.Fc=0,n.td=r,c=function(Nt){return function(){var Vt=Le[Nt.td];if(Vt){if(Vt!=Nt.Cb&&(Nt.Fc+=Vt.endTime-Vt.startTime),Vt.h!=null)return Vt.h+Nt.Fc;--Nt.td}return null}}(n);n.Cb.h==null;)n.Cb.h=c(),n.Cb.h==null&&(n.Cb.h=u())}if(G)for(n=m(Le),r=n.next();!r.done;r=n.next())for(u=r.value,r=u.h,u=m(u.g),c=u.next();!c.done;c=u.next())c=c.value,c.h=r,r+=c.endTime-c.startTime;if(n=e.T,G&&n!=1/0&&!Bv(e,f))for(e=m(Le),r=e.next();!r.done;r=e.next())r.value.Ff(n);return{segments:Le,bandwidth:t}}function sT(e,t){if(e==vr){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function uT(e){return e==vr?"text/vtt":lM[e].mp4}function C5(e,t,n,r,u,c){var f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se;return xe(function(Qe){switch(Qe.g){case 1:return f=Wa,h=Math.trunc((r.segments.length-1)/2),E=Gl(c(),r.segments[h].h,u),A=new si(E[0]),k=A.Pa.split(".").pop(),G=lM[t],(te=G[k])||(te=uM[k])||(te=sT(t,n))?Qe.return(te):(ve=1,Le=Li(E,e.g.retryParameters),ce(Qe,2),Le.method="HEAD",N(Qe,Hl(e,Le,f,{type:ve}),4));case 4:De=Qe.h,Y=De.headers["content-type"],de(Qe,3);break;case 2:if(qe=Ce(Qe),!qe||qe.code!=1002&&qe.code!=1001){Qe.u(3);break}return Le.method="GET",N(Qe,Hl(e,Le,f,{type:ve}),6);case 6:Se=Qe.h,Y=Se.headers["content-type"];case 3:return Y?Qe.return(Y.split(";")[0]):Qe.return(uT(t))}})}function aM(e,t,n,r,u,c){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=u||void 0,e.videoLayout=c||void 0)}function lT(e,t,n){return Hl(e,Li(t,e.g.retryParameters),0,{type:n?2:3})}function R5(e){var t,n,r,u,c,f;xe(function(h){switch(h.g){case 1:return e.i?(ce(h,2),t=Date.now(),N(h,e.update(),4)):h.return();case 4:n=Date.now(),Na(e)&&(r=(n-t)/1e3,e.bb.sample(1,r),u=e.m,c=Math.max(0,u-q(e.bb)),e.s.X(c)),de(h,3);break;case 2:if(f=Ce(h),!e.i)return h.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(f),h.return();f.severity=1,e.i.onError(f),e.s.X(.1);case 3:if(!e.i)return h.return();e.i.onManifestUpdated(),X(h)}})}function Na(e){return e.qa!=Gv}function jv(e,t){e.qa=t,e.l&&e.l.Ec(!Na(e)),Na(e)||e.s.stop()}function Hl(e,t,n,r){if(!e.N)throw new pt(2,7,7001);return t=e.i.networkingEngine.request(n,t,r),pu(e.N,t),t.promise}function Zv(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function sM(e,t,n,r,u,c){var f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue;return xe(function(vt){switch(vt.g){case 1:if(n=="video/mp2t")throw new pt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new pt(2,4,4041);if(f=ii(t,"METHOD"),h=["SAMPLE-AES","SAMPLE-AES-CTR"],!h.includes(f))return vt.return(null);if(E=Gl(r(),ii(t,"URI"),c),E[0].startsWith("data:text/plain;base64,")){A=Ps(qo(E[0].split("data:text/plain;base64,").pop())),vt.u(2);break}return k=E.sort().join(""),e.ia.has(k)||(G=Li(E,e.g.retryParameters),te=Hl(e,G,6),e.ia.set(k,te)),N(vt,e.ia.get(k),3);case 3:Y=vt.h,A=Ps(Y.data);case 2:if(ve="00000000000000000000000000000000",!u){vt.u(4);break}if(e.pa.has(u)){Le=e.pa.get(u),vt.u(5);break}return De=up(u.$(),u.ac(),u.Yb(),e.g.retryParameters),qe=Wa,N(vt,Hl(e,De,qe,{type:0}),6);case 6:Se=vt.h,Le=s5(Se.data),e.pa.set(u,Le);case 5:Le&&(ve=Le);case 4:return Qe=new Map,Qe.set(ve,A),Ue="cenc",f=="SAMPLE-AES"&&(Ue="cbcs"),vt.return(Rh(Qe,Ue))}})}re("shaka.hls.HlsParser",Fv);var uM={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},lM={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},cM={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new pt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new pt(2,4,4041);return e=ii(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?(t="cenc",e=="SAMPLE-AES"&&(t="cbcs"),ku("com.apple.fps",t,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])):null},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=ii(e,"URI"),t=tT(t),t=Qn(t.data),n=ku("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=zn(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=ii(e,"URI"),e=tT(e),e=Qn(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=zf(e,t,new Set,0),ku("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},Gv="VOD",fM="EVENT",qv="LIVE",N5={Pg:Gv,Pi:fM,Xi:qv};Fe["application/x-mpegurl"]=function(){return new Fv},Fe["application/vnd.apple.mpegurl"]=function(){return new Fv};function x5(e){var t=0,n=tn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function Hv(e){if(e=dM(e))e:{e=m(Ca(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=ua(t.value,"LA_URL")){e=Ri(t);break e}e=""}else e="";return e}function dM(e){return e=qo(Ri(e)),e=x5(e).filter(function(t){return t.type===M5})[0],e?(e=Ha(e.value,!0),(e=Ul(e,"WRMHEADER"))?e:null):null}var M5=1,D5=new Map().set("com.microsoft.playready",Hv).set("com.microsoft.playready.recommendation",Hv).set("com.microsoft.playready.software",Hv).set("com.microsoft.playready.hardware",Hv);function bd(e){if(!mM){mM=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);Kv=mr("ftyp",t,r,t,n),t=mr("dref",q5),cT=mr("dinf",t)}this.g=e}function Cd(e){for(var t=[],n=m(e.g),r=n.next();!r.done;r=n.next()){var u=t,c=u.push,f=r.value;r=mr;var h=f.id+1,E=f.stream.width||0,A=f.stream.height||0;f.type=="audio"&&(A=E=0);var k=f.duration*f.timescale,G=Math.floor(k/(Kl+1));switch(k=Math.floor(k%(Kl+1)),h=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(h,4)),[0,0,0,0],T(oi(G,4)),T(oi(k,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],T(oi(E,2)),[0,0],T(oi(A,2)),[0,0])),h=mr("tkhd",h),E=mr,G=f.duration*f.timescale,A=Math.floor(G/(Kl+1)),G=Math.floor(G%(Kl+1)),k=f.stream.language,k=k.charCodeAt(0)-96<<10|k.charCodeAt(1)-96<<5|k.charCodeAt(2)-96,A=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(f.timescale,4)),T(oi(A,4)),T(oi(G,4)),T(oi(k,2)),[0,0])),A=mr("mdhd",A),G=f,k=new Uint8Array([]),G.type){case"video":k=O5;break;case"audio":k=L5}G=mr("hdlr",k);e:{switch(f.type){case"video":f=mr("minf",mr("vmhd",j5),cT,hM(f));break e;case"audio":f=mr("minf",mr("smhd",Z5),cT,hM(f));break e}f=new Uint8Array([])}f=E("mdia",A,G,f),r=r("trak",h,f),c.call(u,r)}for(t=li.apply(Oi,T(t)),c=e.g[0],n=mr,r=c.duration*c.timescale,u=Math.floor(r/(Kl+1)),r=Math.floor(r%(Kl+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(c.timescale,4)),T(oi(u,4)),T(oi(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=mr("mvhd",u),r=[],e=m(e.g),E=e.next();!E.done;E=e.next())f=r,h=f.push,E=new Uint8Array([0,0,0,0].concat(T(oi(E.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),E=mr("trex",E),h.call(f,E);if(e=li.apply(Oi,T(r)),e=mr("mvex",e),r=[],c.encrypted){for(c=m(c.stream.drmInfos),f=c.next();!f.done;f=c.next())if(f=f.value,f.initData)for(f=m(f.initData),h=f.next();!h.done;h=f.next())r.push(h.value.initData);c=li.apply(Oi,T(r))}else c=new Uint8Array([]);return e=n("moov",u,t,e,c),t=new Uint8Array(Kv.byteLength+e.byteLength),t.set(Kv),t.set(e,Kv.byteLength),t}function hM(e){var t=mr,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.oa.byteLength)var u=mr("avcC",e.oa);else{u=mr;for(var c=7,f=[],h=[],E=0,A=0,k=0,G=0;G<e.Sa.length;G++){var te=gM(e.Sa[G]);switch(te[0]&31){case 7:f.push(te),c+=te.length+2;break;case 8:h.push(te),c+=te.length+2}}for(0<f.length&&(E=f[0][1],k=f[0][2],A=f[0][3]),c=new Uint8Array(c),G=0,c[G++]=1,c[G++]=E,c[G++]=k,c[G++]=A,c[G++]=255,c[G++]=224|f.length,E=0;E<f.length;E++)c[G++]=(f[E].length&65280)>>8,c[G++]=f[E].length&255,c.set(f[E],G),G+=f[E].length;for(c[G++]=h.length,f=0;f<h.length;f++)c[G++]=(h[f].length&65280)>>8,c[G++]=h[f].length&255,c.set(h[f],G),G+=h[f].length;u=u("avcC",c)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(n,2)),T(oi(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",h=pM(e),f=new Uint8Array([]),e.encrypted&&(f=Rd(e),r="encv"),n=mr(r,n,u,h,f)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,u=e.stream.height||0,n=new Uint8Array([]),0<e.oa.byteLength&&(n=mr("hvcC",e.oa)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(r,2)),T(oi(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",h=pM(e),f=new Uint8Array([]),e.encrypted&&(f=Rd(e),u="encv"),n=mr(u,r,n,h,f));break;case"audio":e.codecs.includes("mp3")?e=mr(".mp3",Op(e)):e.codecs.includes("ac-3")?(n=mr("dac3",e.ga),r="ac-3",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=mr(r,Op(e),n,u)):e.codecs.includes("ec-3")?(n=mr("dec3",e.ga),r="ec-3",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=mr(r,Op(e),n,u)):e.codecs.includes("opus")?(n=mr("dOps",e.ga),r="Opus",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=mr(r,Op(e),n,u)):(0<e.ga.byteLength?n=mr("esds",e.ga):(n=mr,r=e.id+1,u=e.stream.channelsCount||2,f=e.stream.audioSamplingRate||44100,E=Fu("audio",e.codecs.split(",")),A={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},h=A[f],(E==="mp4a.40.5"||E==="mp4a.40.29")&&(h=A[2*f]),f=parseInt(E.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(T(oi(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,f<<3|h>>>1,h<<7|u<<3,6,1,2])),n=n("esds",r)),r="mp4a",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=mr(r,Op(e),n,u)),n=e}return e=mr("stsd",G5,n),t("stbl",e,mr("stts",k5),mr("stsc",F5),mr("stsz",B5),mr("stco",U5))}function pM(e){if(!e.xa&&!e.ya)return new Uint8Array([]);var t=e.ya;return e=new Uint8Array([].concat(T(oi(e.xa,4)),T(oi(t,4)))),mr("pasp",e)}function Op(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(T(oi(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Rd(e){for(var t=mr,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,u=0;u<n.length;u+=1)r|=n.charCodeAt(u)<<8*(n.length-u-1);n=new Uint8Array([].concat(T(oi(r,4)))),n=mr("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=mr("schm",r),u=mr;var c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.stream.drmInfos);for(var f=e.next();!f.done;f=e.next())if((f=f.value)&&f.keyIds&&f.keyIds.size){f=m(f.keyIds);for(var h=f.next();!h.done;h=f.next())c=gM(h.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),c=mr("tenc",e,c),t("sinf",n,r,u("schi",c))}function Lp(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,u=r.apply,c=mr,f=new Uint8Array([0,0,0,0].concat(T(oi(n.data?n.data.jb:0,4))));f=mr("mfhd",f);var h,E=n.data?n.data.Ra:[],A=new Uint8Array(4+E.length);for(h=0;h<E.length;h++){var k=E[h].flags;A[h+4]=k.Ka<<4|k.Na<<2|k.Ma}E=mr("sdtp",A);var G=E.length+92;A=mr,h=new Uint8Array([0,0,0,58].concat(T(oi(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=mr("tfhd",h),k=n.data?n.data.baseMediaDecodeTime:0;var te=Math.floor(k%(Kl+1));k=new Uint8Array([1,0,0,0].concat(T(oi(Math.floor(k/(Kl+1)),4)),T(oi(te,4)))),k=mr("tfdt",k);var Y=G;G=n.data?n.data.Ra:[],te=G.length;var ve=12+16*te,Le=new Uint8Array(ve);for(Y+=8+ve,Le.set([n.type==="video"?1:0,0,15,1].concat(T(oi(te,4)),T(oi(Y,4))),0),Y=0;Y<te;Y++){var De=G[Y];ve=oi(De.duration,4);var qe=oi(De.size,4),Se=De.flags;De=oi(De.Ta,4),Le.set([].concat(T(ve),T(qe),[Se.Va<<2|Se.Ka,Se.Na<<6|Se.Ma<<4|Se.Wa,Se.Ja&61440,Se.Ja&15],T(De)),12+16*Y)}G=mr("trun",Le),E=A("traf",h,k,G,E),c=c("moof",f,E),u.call(r,t,[c,P5(n)])}return li.apply(Oi,T(t))}function P5(e){return e=(e.data?e.data.Ra:[]).map(function(t){return t.data}),e=li.apply(Oi,T(e)),mr("mdat",e)}function oi(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function gM(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function mr(e){var t=We.apply(1,arguments),n=vM[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],vM[e]=n);for(var r=8,u=t.length-1;0<=u;u--)r+=t[u].byteLength;for(u=new Uint8Array(r),u[0]=r>>24&255,u[1]=r>>16&255,u[2]=r>>8&255,u[3]=r&255,u.set(n,4),n=0,r=8;n<t.length;n++)u.set(t[n],r),r+=t[n].byteLength;return u}var mM=!1,Kl=Math.pow(2,32)-1,vM={},O5=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),L5=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),k5=new Uint8Array([0,0,0,0,0,0,0,0]),F5=new Uint8Array([0,0,0,0,0,0,0,0]),U5=new Uint8Array([0,0,0,0,0,0,0,0]),B5=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),j5=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Z5=new Uint8Array([0,0,0,0,0,0,0,0]),G5=new Uint8Array([0,0,0,0,0,0,0,1]),Kv=new Uint8Array([]),q5=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),cT=new Uint8Array([]);function fT(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new M(5),this.o=new pr(function(){H5(e)}),this.A=new Ll,this.m=new Map}g=fT.prototype,g.configure=function(e){this.g=e},g.start=function(e,t){var n=this;return xe(function(r){if(r.g==1)return n.l=[e],n.h=t,N(r,dT(n),2);if(!n.h)throw new pt(2,7,7001);return r.return(n.j)})};function H5(e){var t;xe(function(n){switch(n.g){case 1:return ce(n,2),N(n,dT(e),4);case 4:de(n,3);break;case 2:t=Ce(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();X(n)}})}g.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},g.update=function(){var e=this,t;return xe(function(n){if(n.g==1)return ce(n,2),N(n,dT(e),4);if(n.g!=2)return de(n,0);if(t=Ce(n),!e.h||!t)return n.return();e.h.onError(t),X(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(){};function dT(e){var t,n,r,u,c,f,h;return xe(function(E){if(E.g==1)return t=Li(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),u=n.request(0,t,{type:5}),pu(e.A,u),N(E,u.promise,2);if(c=E.h,!e.h)return E.return();c.uri&&!e.l.includes(c.uri)&&e.l.unshift(c.uri);var A=c.uri,k=c.data,G=e.g.mss.manifestPreprocessor;if(G!=$m){if(dr("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),k=wx(k,"SmoothStreamingMedia"),!k)throw new pt(2,4,4046,A);G(k),k=Va(k.outerHTML)}var te=Qh(k,"SmoothStreamingMedia");if(!te)throw new pt(2,4,4046,A);if(A=e.g.mss.manifestPreprocessorTXml,A!=Xm&&A(te),e.i||(e.i=new tr(null,0)),A=_r(te,"IsLive",Jh,!1))throw new pt(2,4,4047);e.i.Ec(!A),G=_r(te,"TimeScale",Ro,1e7),k=_r(te,"DVRWindowLength",Ro),A&&(k===0||isNaN(k))&&(k=1/0);var Y=_r(te,"CanSeek",Jh,!1);k===0&&Y&&(k=1/0),Y=null,k&&0<k&&(Y=k/G),A&&!isNaN(e.g.availabilityWindowOverride)&&(Y=e.g.availabilityWindowOverride),Y==null&&(Y=1/0),e.i.je(Y),k=_r(te,"Duration",Ro,1/0),A||e.i.Za(k/G),A={variants:[],textStreams:[],timescale:G,duration:k/G},Y=Wr(te,"Protection");var ve;for(G=e.g.mss.keySystemsBySystemId,k=[],Y=m(Y),ve=Y.next();!ve.done;ve=Y.next())k=k.concat(Wr(ve.value,"ProtectionHeader"));if(k.length){for(Y=[],ve=0;ve<k.length;ve++){var Le=k[ve],De=Le.attributes.SystemID.toLowerCase(),qe=G[De];if(qe){var Se=dM(Le);if(Se)e:{Se=m(Ca(Se,"DATA"));for(var Qe=Se.next();!Qe.done;Qe=Se.next())if(Qe=ua(Qe.value,"KID")){Se=qo(Ri(Qe)),Se=new Uint8Array([Se[3],Se[2],Se[1],Se[0],Se[5],Se[4],Se[7],Se[6]].concat(T(Se.slice(8)))),Se=Ps(Se);break e}Se=null}else Se=null;Qe=qo(Ri(Le)),De=fu(De.replace(/-/g,"")),De=[{initData:zf(Qe,De,new Set,0),initDataType:"cenc",keyId:Se}],De=ku(qe,"cenc",De),Se&&De.keyIds.add(Se),(qe=D5.get(qe))&&(De.licenseServerUri=qe(Le)),Y.push(De)}}G=Y}else G=[];for(ve=G,Y=[],G=[],k=[],te=Wr(te,"StreamIndex"),te=m(te),Le=te.next();!Le.done;Le=te.next()){Le=Le.value,qe=Wr(Le,"QualityLevel"),De=A.timescale,Se=A.duration,Qe=Wr(Le,"c");for(var Ue=[],vt=0,Nt=0;Nt<Qe.length;++Nt){var Vt=Qe[Nt],Bt=Qe[Nt+1],_t=_r(Vt,"t",Ro),Zt=_r(Vt,"d",Ro);if(Vt=_r(Vt,"r",Xu),!Zt)break;if(_t=_t!=null?_t:vt,Vt=Vt||0,0>Vt)if(Bt){if(Bt=_r(Bt,"t",Ro),Bt==null)break;if(_t>=Bt)break;Vt=Math.ceil((Bt-_t)/Zt)-1}else{if(Se==1/0)break;if(_t/De>=Se)break;Vt=Math.ceil((Se*De-_t)/Zt)-1}for(Bt=0;Bt<=Vt;++Bt)vt=_t+Zt,Ue.push({start:_t/De,end:vt/De,Kf:_t}),_t=vt}for(De=Ue,qe=m(qe),Se=qe.next();!Se.done;Se=qe.next())(Se=K5(e,Le,Se.value,De,ve,A))&&(Se.type!="audio"||e.g.disableAudio?Se.type!="video"||e.g.disableVideo?Se.type!=vr||e.g.disableText||k.push(Se):G.push(Se):Y.push(Se))}for(te=[],Y=m(0<Y.length?Y:[null]),ve=Y.next();!ve.done;ve=Y.next())for(ve=ve.value,Le=m(0<G.length?G:[null]),Se=Le.next();!Se.done;Se=Le.next())qe=te,De=qe.push,Se=Se.value,Qe=0,ve&&ve.bandwidth&&0<ve.bandwidth&&(Qe+=ve.bandwidth),Se&&Se.bandwidth&&0<Se.bandwidth&&(Qe+=Se.bandwidth),Se={id:e.s++,language:ve?ve.language:"und",disabledUntilTime:0,primary:!!ve&&ve.primary||!!Se&&Se.primary,audio:ve,video:Se,bandwidth:Qe,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},De.call(qe,Se);A.variants=te,A.textStreams=k,e.j?(e.j.variants=A.variants,e.j.textStreams=A.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:A.variants,textStreams:A.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Xd()),Promise.resolve(),f=Date.now(),h=(f-r)/1e3,e.B.sample(1,h),X(E)})}function K5(e,t,n,r,u,c){var f=t.attributes.Type;if(f!=="audio"&&f!=="video"&&f!=="text")return Ke("Ignoring unrecognized type:",f),null;var h=t.attributes.Language,E=e.s++,A=_r(n,"Bitrate",Us),k=_r(n,"MaxWidth",Us),G=_r(n,"MaxHeight",Us),te=_r(n,"Channels",Us),Y=_r(n,"SamplingRate",Us),ve=c.duration;r.length&&(ve=r[r.length-1].end-r[0].start);var Le=e.i.getDuration();e.i.Za(Math.min(ve,Le));var De={id:E,originalId:t.attributes.Name||String(E),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:A||0,width:k||void 0,height:G||void 0,kind:"",encrypted:0<u.length,drmInfos:u,keyIds:new Set,language:Cr(h||"und"),originalLanguage:h,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:te,audioSamplingRate:Y,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:ve,timescale:c.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((u=t.attributes.Subtype)&&((u=X5[u])&&De.roles.push(u),u==="main"&&(De.primary=!0)),u=n.attributes.FourCC,(u===null||u==="")&&(u=t.attributes.FourCC),!u){if(f==="audio")u="AAC";else if(f==="video")return Ke('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!$5.includes(u.toUpperCase()))return Ke("Codec not supported:",u),null;switch(n=V5(n,f,u,De),De.mssPrivateData.codecPrivateData=n,f){case"audio":if(!n)return Ke("Quality unsupported without CodecPrivateData",f),null;De.type="audio",De.mimeType="mss/audio/mp4",De.codecs=z5(u,n);break;case"video":if(!n)return Ke("Quality unsupported without CodecPrivateData",f),null;De.type="video",De.mimeType="mss/video/mp4",De.codecs=Y5(n);break;case"text":De.type=vr,De.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(De.codecs="stpp")}return De.fullMimeTypes.add(wi(De.mimeType,De.codecs)),De.createSegmentIndex=function(){if(De.segmentIndex)return Promise.resolve();if(e.m.has(De.id))var qe=e.m.get(De.id);else qe=[],De.type=="video"&&(qe=De.mssPrivateData.codecPrivateData.split("00000001").slice(1)),qe={id:De.id,type:De.type,codecs:De.codecs,encrypted:De.encrypted,timescale:De.mssPrivateData.timescale,duration:De.mssPrivateData.duration,Sa:qe,ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:null,stream:De},qe=Cd(new bd([qe])),e.m.set(De.id,qe);return qe=W5(e,new dt(function(){return[]},0,null,null,void 0,qe),De,t,r),De.segmentIndex=new wr(qe),Promise.resolve()},De.closeSegmentIndex=function(){De.segmentIndex&&(De.segmentIndex.release(),De.segmentIndex=null)},De}function V5(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=u[e],n==="AACH"?(n=new Uint8Array(4),e=u[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function z5(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function Y5(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function W5(e,t,n,r,u){var c=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[];var f={};u=m(u);for(var h=u.next();!h.done;f={Pc:f.Pc},h=u.next())f.Pc=h.value,r.push(new et(f.Pc.start,f.Pc.end,function(E){return function(){return fo(e.l,[c.replace("{start time}",String(E.Pc.Kf))])}}(f),0,null,t,0,0,n.mssPrivateData.duration));return r}re("shaka.mss.MssParser",fT);var $5="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),X5={CAPT:"main",SUBT:"alternate",DESC:"main"};Fe["application/vnd.ms-sstr+xml"]=function(){return new fT};function yM(e,t,n,r,u,c){if(200<=n&&299>=n&&n!=202)return{uri:u||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};u=null;try{u=Ka(t)}catch(f){}throw new pt(n==401||n==403?2:1,1,1001,r,n,u,e,c)}function hT(){}function Vv(e,t,n,r,u){var c=new nZ;kl(t.headers).forEach(function(A,k){c.append(k,A)});var f=new eZ,h={Rf:!1,Jg:!1};if(e=Q5(e,n,{body:t.body||void 0,headers:c,method:t.method,signal:f.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},h,r,u,t.streamDataCallback),e=new gi(e,function(){return h.Rf=!0,f.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var E=new pr(function(){h.Jg=!0,f.abort()});E.X(t/1e3),e.finally(function(){E.stop()})}return e}function Q5(e,t,n,r,u,c,f){var h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe;return xe(function(Ue){switch(Ue.g){case 1:return h=J5,E=tZ,te=G=0,Y=Date.now(),ce(Ue,2),N(Ue,h(e,n),4);case 4:if(A=Ue.h,c(EM(A.headers)),n.method=="HEAD"){Ue.u(5);break}return ve=A.clone().body.getReader(),De=(Le=A.headers.get("Content-Length"))?parseInt(Le,10):0,qe=function(vt){function Nt(){var Vt,Bt;return xe(function(_t){switch(_t.g){case 1:return ce(_t,2),N(_t,ve.read(),4);case 4:Vt=_t.h,de(_t,3);break;case 2:return Ce(_t),_t.return();case 3:if(Vt.done){_t.u(5);break}if(G+=Vt.value.byteLength,!f){_t.u(5);break}return N(_t,f(Vt.value),5);case 5:Bt=Date.now(),(100<Bt-Y||Vt.done)&&(u(Bt-Y,G-te,De-G),te=G,Y=Bt),Vt.done?vt.close():(vt.enqueue(Vt.value),Nt()),X(_t)}})}Nt()},new E({start:qe}),N(Ue,A.arrayBuffer(),6);case 6:k=Ue.h;case 5:de(Ue,3);break;case 2:throw Se=Ce(Ue),r.Rf?new pt(1,1,7001,e,t):r.Jg?new pt(1,1,1003,e,t):new pt(1,1,1002,e,Se,t);case 3:return Qe=EM(A.headers),Ue.return(yM(Qe,k,A.status,e,A.url,t))}})}function EM(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function _M(){if(p.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(p.Response){if(!new Response("").body)return!1}else return!1;return!(!p.fetch||!p.AbortController)}re("shaka.net.HttpFetchPlugin",hT),hT.isSupported=_M,hT.parse=Vv;var J5=p.fetch,eZ=p.AbortController,tZ=p.ReadableStream,nZ=p.Headers;_M()&&(Ho("http",Vv,2,!0),Ho("https",Vv,2,!0),Ho("blob",Vv,2,!0));function TM(){}function zv(e,t,n,r,u){var c=new rZ,f=Date.now(),h=0,E=new Promise(function(A,k){c.open(t.method,e,!0),c.responseType="arraybuffer",c.timeout=t.retryParameters.timeout,c.withCredentials=t.allowCrossSiteCredentials,c.onabort=function(){k(new pt(1,1,7001,e,n))};var G=!1;c.onreadystatechange=function(){if(c.readyState==2&&!G){var Y=SM(c);u(Y),G=!0}},c.onload=function(){var Y=SM(c),ve=c.response;try{var Le=yM(Y,ve,c.status,e,c.responseURL,n);A(Le)}catch(De){k(De)}},c.onerror=function(Y){k(new pt(1,1,1002,e,Y,n))},c.ontimeout=function(){k(new pt(1,1,1003,e,n))},c.onprogress=function(Y){var ve=Date.now();(100<ve-f||Y.lengthComputable&&Y.loaded==Y.total)&&(r(ve-f,Y.loaded-h,Y.total-Y.loaded),h=Y.loaded,f=ve)};for(var te in t.headers)c.setRequestHeader(te.toLowerCase(),t.headers[te]);c.send(t.body)});return new gi(E,function(){return c.abort(),Promise.resolve()})}function SM(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}re("shaka.net.HttpXHRPlugin",TM),TM.parse=zv;var rZ=p.XMLHttpRequest;Ho("http",zv,1,!0),Ho("https",zv,1,!0),Ho("blob",zv,1,!0);function wM(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function pT(e){return e.$().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Aa+":"+e.ja}function iZ(e,t){return up(e.g.$(),e.g.Aa,e.g.ja,t.streaming.retryParameters)}function AM(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function IM(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}AM.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function bM(e){var t=this;this.o=e,this.j=new Map,this.i=new Wu(function(){return gT(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new AM}bM.prototype.destroy=function(){return this.i.destroy()};function oZ(e,t,n){e.m=t,e.l=n}function gT(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function aZ(e,t,n,r,u,c){jr(e.i);var f=(e.j.get(t)||Promise.resolve()).then(function(){var h,E,A,k,G,te,Y;return xe(function(ve){if(ve.g==1)return N(ve,uZ(e,n),2);if(h=ve.h,e.i.g)throw new pt(2,9,7001);if(u)for(k in E=Qn(h),A=new Pm(E),A.data)G=Number(k),te=A.data[G],Y=A.g[G],e.l(te,Y);e.g.close(r,h.byteLength);var Le=e.g;return e.m(Le.i==0?0:Le.j/Le.i,e.g.h),ve.return(c(h))})});e.j.set(t,f)}function sZ(e){return xe(function(t){return t.g==1?N(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function uZ(e,t){var n,r,u,c;return xe(function(f){return f.g==1?(n=Wa,r=e.o.request(n,t),u=function(){return r.abort()},e.h.push(u),N(f,r.promise,2)):(c=f.h,mn(e.h,u),f.return(c.data))})}function Yv(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Rr,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Yv.prototype.abort=function(){var e=this;return xe(function(t){if(t.g==1){try{e.i.abort()}catch(n){}return ce(t,2),N(t,e.g,4)}if(t.g!=2)return de(t,0);Ce(t),X(t)})};function mT(e,t){return new Promise(function(n,r){var u=e.h.openCursor();u.onerror=r,u.onsuccess=function(){var c;return xe(function(f){if(f.g==1)return u.result==null?(n(),f.return()):(c=u.result,N(f,t(c.key,c.value,c),2));c.continue(),X(f)})}})}Yv.prototype.store=function(){return this.h},Yv.prototype.promise=function(){return this.g};function vT(e){this.h=e,this.g=[]}vT.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Yc(e,t){return Wv(e,t,"readwrite")}function Wv(e,t,n){n=e.h.transaction([t],n);var r=new Yv(n,t);return e.g.push(r),r.promise().then(function(){mn(e.g,r)},function(){mn(e.g,r)}),r}function Wc(e,t,n){this.h=new vT(e),this.i=t,this.g=n}g=Wc.prototype,g.destroy=function(){return this.h.destroy()},g.hasFixedKeySpace=function(){return!0},g.addSegments=function(){return CM(this.i)},g.removeSegments=function(e,t){return RM(this,this.i,e,t)},g.getSegments=function(e){var t=this,n;return xe(function(r){return r.g==1?N(r,NM(t,t.i,e),2):(n=r.h,r.return(n.map(function(u){return t.Tf(u)})))})},g.addManifests=function(){return CM(this.g)},g.updateManifest=function(){return Promise.reject(new pt(2,9,9016,"Cannot modify values in "+this.g))};function lZ(e,t,n){e=Yc(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}g.updateManifestExpiration=function(e,t){var n=Yc(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=t,r.put(u,e))},n.promise()},g.removeManifests=function(e,t){return RM(this,this.g,e,t)},g.getManifests=function(e){var t=this,n;return xe(function(r){return r.g==1?N(r,NM(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(u){return t.Yc(u)}))))})},g.getAllManifests=function(){var e=this,t,n;return xe(function(r){return r.g==1?(t=Wv(e.h,e.g,"readonly"),n=new Map,N(r,mT(t,function(u,c){var f;return xe(function(h){if(h.g==1)return N(h,e.Yc(c),2);f=h.h,n.set(u,f),X(h)})}),2)):r.g!=3?N(r,t.promise(),3):r.return(n)})},g.Tf=function(e){return e},g.Yc=function(e){return Promise.resolve(e)};function CM(e){return Promise.reject(new pt(2,9,9011,"Cannot add new value to "+e))}g.add=function(e,t){var n=this,r,u,c,f,h,E,A;return xe(function(k){if(k.g==1){for(r=Yc(n.h,e),u=r.store(),c=[],f={},h=m(t),E=h.next();!E.done;f={zd:f.zd},E=h.next())A=E.value,f.zd=u.add(A),f.zd.onsuccess=function(G){return function(){c.push(G.zd.result)}}(f);return N(k,r.promise(),2)}return k.return(c)})};function RM(e,t,n,r){e=Yc(e.h,t),t=e.store();var u={};n=m(n);for(var c=n.next();!c.done;u={xd:u.xd},c=n.next())u.xd=c.value,t.delete(u.xd).onsuccess=function(f){return function(){return r(f.xd)}}(u);return e.promise()}function NM(e,t,n){var r,u,c,f,h,E,A;return xe(function(k){if(k.g==1){for(r=Wv(e.h,t,"readonly"),u=r.store(),c={},f=[],h={},E=m(n),A=E.next();!A.done;h={Nc:h.Nc,Lc:h.Lc},A=E.next())h.Lc=A.value,h.Nc=u.get(h.Lc),h.Nc.onsuccess=function(G){return function(){G.Nc.result==null&&f.push(G.Lc),c[G.Lc]=G.Nc.result}}(h);return N(k,r.promise(),2)}if(f.length)throw new pt(2,9,9012,"Could not find values for "+f);return k.return(n.map(function(G){return c[G]}))})}function kp(e){this.g=new vT(e)}kp.prototype.destroy=function(){return this.g.destroy()},kp.prototype.getAll=function(){var e=this,t,n;return xe(function(r){return r.g==1?(t=Wv(e.g,"session-ids","readonly"),n=[],N(r,mT(t,function(u,c){n.push(c)}),2)):r.g!=3?N(r,t.promise(),3):r.return(n)})},kp.prototype.add=function(e){var t=Yc(this.g,"session-ids"),n=t.store();e=m(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},kp.prototype.remove=function(e){var t=this,n;return xe(function(r){return r.g==1?(n=Yc(t.g,"session-ids"),N(r,mT(n,function(u,c,f){e.includes(c.sessionId)&&f.delete()}),2)):N(r,n.promise(),0)})};function Vo(){this.g=new Map}Vo.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Vo.prototype.init=function(){var e=this;Fp.forEach(function(u,c){(u=u())&&e.g.set(c,u)});for(var t=[],n=m(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function xM(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){u.hasFixedKeySpace()||t||(t={path:{fb:r,Ba:c},Ba:u})})}),t)return t;throw new pt(2,9,9013,"Could not find a cell that supports add-operations")}function cZ(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){t({fb:r,Ba:c},u)})})}function $v(e,t,n){if(e=e.g.get(t),!e)throw new pt(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new pt(2,9,9013,"Could not find cell with name "+n);return t}function fZ(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function dZ(e){var t=Array.from(e.g.keys());if(!t.length)throw new pt(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function hZ(e){var t,n,r;return xe(function(u){return u.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=Fp,r.forEach(function(c){(c=c())&&t.push(c)})),N(u,Promise.all(t.map(function(c){return c.erase()})),2)):n?u.u(0):N(u,Promise.all(t.map(function(c){return c.destroy()})),0)})}function MM(e,t){Fp.set(e,t)}re("shaka.offline.StorageMuxer",Vo),Vo.unregister=function(e){Fp.delete(e)},Vo.register=MM,Vo.prototype.destroy=Vo.prototype.destroy;var Fp=new Map;function Up(){Wc.apply(this,arguments)}z(Up,Wc),Up.prototype.updateManifestExpiration=function(e,t){var n=this,r,u,c;return xe(function(f){return r=Yc(n.h,n.g),u=r.store(),c=new Rr,u.get(e).onsuccess=function(h){(h=h.target.result)?(h.expiration=t,u.put(h),c.resolve()):c.reject(new pt(2,9,9012,"Could not find values for "+e))},N(f,Promise.all([r.promise(),c]),0)})},Up.prototype.Yc=function(e){var t,n,r,u,c,f;return xe(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime,c=pZ(e.periods[n],u),t.push(c);return N(h,gx(t),2)}return f=h.h,h.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:f,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function pZ(e,t){mZ(e);for(var n=m(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(u){return gZ(u,e.startTime,t)})}function gZ(e,t,n){var r=e.initSegmentUri?DM(e.initSegmentUri):null,u=t+e.presentationTimeOffset,c=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(f){var h=DM(f.uri);return{startTime:t+f.startTime,endTime:t+f.endTime,dataKey:h,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:c,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Up.prototype.Tf=function(e){return{data:e.data}};function DM(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new pt(2,9,9004,"Could not parse uri "+e)}function mZ(e){var t=e.streams.filter(function(h){return h.contentType=="audio"});if(e=e.streams.filter(function(h){return h.contentType=="video"}),!t.every(function(h){return h.variantIds})||!e.every(function(h){return h.variantIds})){for(var n=m(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=m(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){var u=n++,c=m(e);for(r=c.next();!r.done;r=c.next())r.value.variantIds.push(u)}if(!e.length&&t.length)for(u=n++,c=m(t),r=c.next();!r.done;r=c.next())r.value.variantIds.push(u);if(e.length&&t.length)for(t=m(t),r=t.next();!r.done;r=t.next())for(r=r.value,u=m(e),c=u.next();!c.done;c=u.next()){c=c.value;var f=n++;r.variantIds.push(f),c.variantIds.push(f)}}}function Xv(){Wc.apply(this,arguments)}z(Xv,Wc),Xv.prototype.Yc=function(e){var t,n,r,u,c,f;return xe(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime;for(var E=e.periods[n],A=[],k=m(E.streams),G=k.next();!G.done;G=k.next())G=G.value,G.variantIds.length!=0&&A.push(vZ(G,E.startTime,E.startTime+u));c=A,t.push(c)}return N(h,gx(t),2)}return f=h.h,h.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:f,sequenceMode:!1})})};function vZ(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function yT(){Wc.apply(this,arguments)}z(yT,Wc),g=yT.prototype,g.hasFixedKeySpace=function(){return!1},g.addSegments=function(e){return this.add(this.i,e)},g.addManifests=function(e){return this.add(this.g,e)},g.updateManifest=function(e,t){return lZ(this,e,t)},g.Yc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function PM(){this.m=this.j=this.i=this.h=this.g=this.l=null}g=PM.prototype,g.init=function(){var e=this,t=new Rr,n=!1,r=new pr(function(){n=!0,t.reject(new pt(2,9,9017))});r.X(5);var u=p.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!n){var c=u.result;e.l=c;var f=c.objectStoreNames;f=f.contains("manifest")&&f.contains("segment")?new Up(c,"segment","manifest"):null,e.g=f,f=c.objectStoreNames,f=f.contains("manifest-v2")&&f.contains("segment-v2")?new Xv(c,"segment-v2","manifest-v2"):null,e.h=f,f=c.objectStoreNames,f=f.contains("manifest-v3")&&f.contains("segment-v3")?new Xv(c,"segment-v3","manifest-v3"):null,e.i=f,f=c.objectStoreNames,f=f.contains("manifest-v5")&&f.contains("segment-v5")?new yT(c,"segment-v5","manifest-v5"):null,e.j=f,c=c.objectStoreNames.contains("session-ids")?new kp(c):null,e.m=c,r.stop(),t.resolve()}},u.onupgradeneeded=function(){for(var c=u.result,f=m(["segment-v5","manifest-v5","session-ids"]),h=f.next();!h.done;h=f.next())h=h.value,c.objectStoreNames.contains(h)||c.createObjectStore(h,{autoIncrement:!0})},u.onerror=function(c){n||(t.reject(new pt(2,9,9001,u.error)),r.stop(),c.preventDefault())},t},g.destroy=function(){var e=this;return xe(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return N(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return N(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return N(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return N(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return N(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),X(t)}})},g.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},g.getEmeSessionCell=function(){return this.m},g.erase=function(){var e=this;return xe(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return N(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return N(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return N(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return N(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),N(t,yZ(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,N(t,e.init(),0)}})};function yZ(){var e=new Rr,t=p.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new pt(2,9,9001,t.error)),n.preventDefault()},e}MM("idb",function(){return oa()||gs()||!p.indexedDB?null:new PM});function Tu(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}Tu.prototype.fb=function(){return this.i},Tu.prototype.Ba=function(){return this.h},Tu.prototype.key=function(){return this.l},Tu.prototype.toString=function(){return this.j};function ET(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new Tu(t,n,r,Number(e[4])):null}function OM(e,t){this.h=e,this.g=t}function LM(e,t){var n=new tr(null,0);n.Za(t.duration);var r=t.streams.filter(function(A){return A.type=="audio"}),u=t.streams.filter(function(A){return A.type=="video"});r=EZ(e,r,u,n),u=t.streams.filter(function(A){return A.type==vr}).map(function(A){return Qv(e,A,n)});var c=t.streams.filter(function(A){return A.type=="image"}).map(function(A){return Qv(e,A,n)}),f=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var h=m(r.values()),E=h.next();!E.done;E=h.next())E=E.value,E.audio&&E.audio.encrypted&&(E.audio.drmInfos=f),E.video&&E.video.encrypted&&(E.video.drmInfos=f);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:u,imageStreams:c,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function EZ(e,t,n,r){for(var u=new Set,c=m(t),f=c.next();!f.done;f=c.next()){var h=m(f.value.variantIds);for(f=h.next();!f.done;f=h.next())u.add(f.value)}for(c=m(n),f=c.next();!f.done;f=c.next())for(h=m(f.value.variantIds),f=h.next();!f.done;f=h.next())u.add(f.value);for(c=new Map,u=m(u),f=u.next();!f.done;f=u.next())f=f.value,c.set(f,{id:f,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),u=t.next();!u.done;u=t.next())for(u=u.value,f=Qv(e,u,r),h=m(u.variantIds),u=h.next();!u.done;u=h.next())u=c.get(u.value),u.language=f.language,u.primary=u.primary||f.primary,u.audio=f;for(n=m(n),t=n.next();!t.done;t=n.next())for(u=t.value,t=Qv(e,u,r),f=m(u.variantIds),u=f.next();!u.done;u=f.next())u=c.get(u.value),u.primary=u.primary||t.primary,u.video=t;return c}function Qv(e,t,n){var r=t.segments.map(function(u){return _Z(e,u,t)});return n.ld(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([wi(t.mimeType,t.codecs)])}}function _Z(e,t,n){var r=new Tu("segment",e.h,e.g,t.dataKey);return e=new et(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?TZ(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function TZ(e,t){var n=new Tu("segment",e.h,e.g,t);return new dt(function(){return[n.toString()]},0,null)}function kM(){this.g=null}g=kM.prototype,g.configure=function(){},g.start=function(e,t){var n=this,r,u,c,f,h,E,A;return xe(function(k){switch(k.g){case 1:if(r=ET(e),n.g=r,r==null||r.g!="manifest")throw new pt(2,1,9004,e);return u=new Vo,oe(k,2),N(k,u.init(),4);case 4:return N(k,$v(u,r.fb(),r.Ba()),5);case 5:return c=k.h,N(k,c.getManifests([r.key()]),6);case 6:return f=k.h,h=f[0],E=new OM(r.fb(),r.Ba()),A=LM(E,h),t.makeTextStreamsForClosedCaptions(A),k.return(A);case 2:return Je(k),N(k,u.destroy(),7);case 7:Te(k,0)}})},g.stop=function(){return Promise.resolve()},g.update=function(){},g.onExpirationUpdated=function(e,t){var n=this,r,u,c,f,h,E,A;return xe(function(k){switch(k.g){case 1:return r=n.g,u=new Vo,ce(k,2,3),N(k,u.init(),5);case 5:return N(k,$v(u,r.fb(),r.Ba()),6);case 6:return c=k.h,N(k,c.getManifests([r.key()]),7);case 7:if(f=k.h,h=f[0],E=h.sessionIds.includes(e),A=h.expiration==null||h.expiration>t,!E||!A){k.u(3);break}return N(k,c.updateManifestExpiration(r.key(),t),3);case 3:return Je(k),N(k,u.destroy(),10);case 10:Te(k,0);break;case 2:Ce(k),k.u(3)}})},g.onInitialVariantChosen=function(){},g.banLocation=function(){},Fe["application/x-offline-manifest"]=function(){return new kM};function FM(){}function UM(e){var t=ET(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Yu(e)):e=t&&t.g=="segment"?SZ(t.key(),t):hu(new pt(2,1,9004,e)),e}function SZ(e,t){var n=new Vo;return Yu(void 0).va(function(){return n.init()}).va(function(){return $v(n,t.fb(),t.Ba())}).va(function(r){return r.getSegments([t.key()])}).va(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}re("shaka.offline.OfflineScheme",FM),FM.plugin=UM,Ho("offline",UM);function BM(e,t,n){var r,u,c,f,h,E;return xe(function(A){switch(A.g){case 1:r=[];for(var k=[],G=m(n),te=G.next();!te.done;te=G.next()){te=te.value;for(var Y=!1,ve=m(k),Le=ve.next();!Le.done;Le=ve.next())if(Le=Le.value,AZ(Le.info,te)){Le.sessionIds.push(te.sessionId),Y=!0;break}Y||k.push({info:te,sessionIds:[te.sessionId]})}u=m(k),c=u.next();case 2:if(c.done){A.u(4);break}return f=c.value,h=wZ(e,t,f),N(A,h,5);case 5:E=A.h,r=r.concat(E),c=u.next(),A.u(2);break;case 4:return A.return(r)}})}function wZ(e,t,n){var r,u;return xe(function(c){switch(c.g){case 1:return r=new Fc({zb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ce(c,2),r.configure(e),N(c,Fm(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:de(c,3);break;case 2:return Ce(c),N(c,r.destroy(),5);case 5:return c.return([]);case 3:return u=[],N(c,Promise.all(n.sessionIds.map(function(f){return xe(function(h){if(h.g==1)return ce(h,2),N(h,UE(r,f),4);if(h.g!=2)return u.push(f),de(h,0);Ce(h),X(h)})})),6);case 6:return N(c,r.destroy(),7);case 7:return c.return(u)}})}function AZ(e,t){function n(r,u){return r.robustness==u.robustness&&r.contentType==u.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&In(e.audioCapabilities,t.audioCapabilities,n)&&In(e.videoCapabilities,t.videoCapabilities,n)}function IZ(e,t,n){var r=t.presentationTimeline.getDuration();return t=jM(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function _T(e,t){var n=LM(new OM(e.fb(),e.Ba()),t),r=t.appMetadata||{};return n=jM(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function jM(e){var t=[],n=jf(e.variants);n=m(n);for(var r=n.next();!r.done;r=n.next())t.push(xl(r.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Ml(n.value));return t}function bZ(){this.g={}}function CZ(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var u=n.bandwidth||393216,c=r.bandwidth||t.bandwidth-u;0>=c&&(c=t.bandwidth),e.g[n.id]=u,e.g[r.id]=c}}function RZ(e,t){e.g[t.id]=t.bandwidth||2048}function ZM(e,t){return e=e.g[t],e==null&&(e=0),e}function ao(e){var t=this;if(e&&e.constructor!=dn)throw new pt(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.Zb()):(this.h=id(),this.g=new Kr),this.i=[],this.j=[];var n=!e;this.l=new Wu(function(){var r,u,c,f,h;return xe(function(E){switch(E.g){case 1:return N(E,Promise.all(t.j.map(function(A){return gT(A)})),2);case 2:for(r=function(){},u=[],c=m(t.i),f=c.next();!f.done;f=c.next())h=f.value,u.push(h.then(r,r));return N(E,Promise.all(u),3);case 3:if(!n){E.u(4);break}return N(E,t.g.destroy(),4);case 4:t.h=null,t.g=null,X(E)}})})}function TT(){if(Io())e:{for(var e=m(Fp.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}g=ao.prototype,g.destroy=function(){return this.l.destroy()},g.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Wm(e,t)),Gc(this.h,e)},g.getConfiguration=function(){var e=id();return Gc(e,this.h,id()),e},g.Zb=function(){return this.g},g.store=function(e,t,n){var r=this,u=this.getConfiguration(),c=new bM(this.g);return this.j.push(c),t=NZ(this,e,t||{},function(){var f;return xe(function(h){return h.g==1?n?h.u(2):N(h,l_(e,r.g,u.manifest.retryParameters),3):(h.g!=2&&(n=h.h),f=be(e,n||null),h.return(f()))})},u,c),t=new gi(t,function(){return gT(c)}),t.finally(function(){mn(r.j,c)}),GZ(this,t)};function NZ(e,t,n,r,u,c){var f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe;return xe(function(Ue){switch(Ue.g){case 1:return Jv(),h=f=null,E=new Vo,G=k=A=null,ce(Ue,2,3),N(Ue,r(),5);case 5:return f=Ue.h,N(Ue,UZ(e,t,f,u),6);case 6:if(te=Ue.h,yo(e),Y=!te.presentationTimeline.R()&&!te.presentationTimeline.dc(),!Y)throw new pt(2,9,9005,t);return N(Ue,e.rc(te,function(vt){G=G||vt},u),7);case 7:if(h=Ue.h,yo(e),G)throw G;return N(Ue,MZ(te,h,u),8);case 8:return N(Ue,E.init(),9);case 9:return yo(e),N(Ue,xM(E),10);case 10:return A=Ue.h,yo(e),ve=DZ(h,te,t,n,u,c),Le=ve.Sh,De=ve.Hf,N(Ue,A.Ba.addManifests([Le]),11);case 11:if(qe=Ue.h,yo(e),k=qe[0],yo(e),G)throw G;return N(Ue,xZ(e,De,k,Le,c,u,A.Ba,te,h),12);case 12:return yo(e),KM(te,Le,h,u),N(Ue,A.Ba.updateManifest(k,Le),13);case 13:return yo(e),Se=new Tu("manifest",A.path.fb,A.path.Ba,k),Ue.return(_T(Se,Le));case 3:return Je(Ue),N(Ue,E.destroy(),14);case 14:if(!f){Ue.u(15);break}return N(Ue,f.stop(),15);case 15:if(!h){Ue.u(17);break}return N(Ue,h.destroy(),17);case 17:Te(Ue,0);break;case 2:if(Qe=Ce(Ue),k==null){Ue.u(19);break}return N(Ue,GM(k),19);case 19:throw G||Qe}})}function xZ(e,t,n,r,u,c,f,h,E){var A,k,G,te,Y,ve,Le,De,qe,Se;return xe(function(Qe){switch(Qe.g){case 1:if(A={},k=0,G=function(Ue,vt){var Nt,Vt,Bt,_t,Zt,ln,pn;return xe(function(Ln){if(Ln.g==1){for(Nt={},Vt=m(Ue),Bt=Vt.next();!Bt.done;Nt={Ob:Nt.Ob},Bt=Vt.next())Nt.Ob=Bt.value,_t=iZ(Nt.Ob,c),Zt=Nt.Ob.i,ln=Nt.Ob.h,pn=function(Mn){return function(qn){var Yn,Kn,xr;return xe(function(di){if(di.g==1)return N(di,f.addSegments([{data:qn}]),2);Yn=di.h,yo(e),Kn=Mn.Ob.g,xr=pT(Kn),A[xr]=Yn[0],k+=qn.byteLength,X(di)})}}(Nt),aZ(u,Nt.Ob.groupId,_t,Zt,ln,pn);return N(Ln,sZ(u),2)}return vt?(yo(e),KM(h,r,E,c),N(Ln,f.updateManifest(n,r),0)):Ln.u(0)})},te=!1,ce(Qe,2),!ST(h)||!te||HM(h)){Qe.u(4);break}return N(Qe,G(t.filter(function(Ue){return Ue.h}),!0),5);case 5:return yo(e),t=t.filter(function(Ue){return!Ue.h}),Y=A,ve=k,A={},k=0,N(Qe,qM(f,n,r,Y,ve,function(){return yo(e)}),6);case 6:yo(e);case 4:if(te){Qe.u(7);break}return N(Qe,G(t,!1),8);case 8:return yo(e),Le=A,De=k,A={},k=0,N(Qe,qM(f,n,r,Le,De,function(){return yo(e)}),9);case 9:yo(e);case 7:de(Qe,0);break;case 2:return qe=Ce(Qe),Se=Object.values(A),N(Qe,f.removeSegments(Se,function(){}),10);case 10:throw qe}})}function GM(e){var t,n,r,u;return xe(function(c){switch(c.g){case 1:return t=new Vo,N(c,t.init(),2);case 2:return N(c,xM(t),3);case 3:return n=c.h,r=new Tu("manifest",n.path.fb,n.path.Ba,e),N(c,t.destroy(),4);case 4:return u=new ao,N(c,u.remove(r.toString()),0)}})}function qM(e,t,n,r,u,c){var f,h,E,A,k,G,te,Y,ve,Le,De;return xe(function(qe){switch(qe.g){case 1:for(f=!1,ce(qe,2),h=!0,E=m(n.streams),A=E.next();!A.done;A=E.next())for(k=A.value,G=m(k.segments),te=G.next();!te.done;te=G.next())Y=te.value,ve=Y.pendingSegmentRefId?r[Y.pendingSegmentRefId]:null,ve!=null&&(Y.dataKey=ve,Y.pendingSegmentRefId=void 0),ve=Y.pendingInitSegmentRefId?r[Y.pendingInitSegmentRefId]:null,ve!=null&&(Y.initSegmentKey=ve,Y.pendingInitSegmentRefId=void 0),Y.pendingSegmentRefId&&(h=!1),Y.pendingInitSegmentRefId&&(h=!1);return n.size+=u,h&&(n.isIncomplete=!1),N(qe,e.updateManifest(t,n),4);case 4:f=!0,c(),de(qe,0);break;case 2:return Le=Ce(qe),N(qe,GM(t),5);case 5:if(f){qe.u(6);break}return De=Object.values(r),N(qe,e.removeSegments(De,function(){}),6);case 6:throw Le}})}function MZ(e,t,n){var r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe,Ue,vt,Nt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn;return xe(function(qn){switch(qn.g){case 1:return r={width:1/0,height:1/0},Lh(e,n.restrictions,r),N(qn,gm(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(u=[],c=n.preferredDecodingAttributes,f=n.preferredVideoCodecs,h=n.preferredAudioCodecs,hm(e,f,h,c),E=m(e.variants),A=E.next();!A.done;A=E.next())k=A.value,u.push(xl(k));for(G=m(e.textStreams),te=G.next();!te.done;te=G.next())Y=te.value,u.push(Ml(Y));for(ve=m(e.imageStreams),Le=ve.next();!Le.done;Le=ve.next())De=Le.value,u.push(Ku(De));return N(qn,n.offline.trackSelectionCallback(u),3);case 3:for(qe=qn.h,Se=e.presentationTimeline.getDuration(),Qe=0,Ue=m(qe),vt=Ue.next();!vt.done;vt=Ue.next())Nt=vt.value,Vt=Nt.bandwidth*Se/8,Qe+=Vt;return ce(qn,4),N(qn,n.offline.downloadSizeCallback(Qe),6);case 6:if(Bt=qn.h,!Bt)throw new pt(2,9,9014);de(qn,5);break;case 4:throw _t=Ce(qn),_t instanceof pt?_t:new pt(2,9,9015);case 5:for(Zt=new Set,ln=new Set,pn=new Set,Ln=m(qe),vt=Ln.next();!vt.done;vt=Ln.next())Mn=vt.value,Mn.type=="variant"&&Zt.add(Mn.id),Mn.type=="text"&&ln.add(Mn.id),Mn.type=="image"&&pn.add(Mn.id);e.variants=e.variants.filter(function(Yn){return Zt.has(Yn.id)}),e.textStreams=e.textStreams.filter(function(Yn){return ln.has(Yn.id)}),e.imageStreams=e.imageStreams.filter(function(Yn){return pn.has(Yn.id)}),KZ(e),X(qn)}})}function DZ(e,t,n,r,u,c){var f=IZ(n,t,r),h=u.offline.progressCallback;oZ(c,function(Y,ve){f.size=ve,h(f,Y)},function(Y,ve){E&&u.offline.usePersistentLicense&&A==ve&&Bl(e,"cenc",Y)});var E=ST(t)&&!HM(t),A=null;E&&(A=VZ.get(e.g.keySystem));for(var k=new bZ,G=m(t.textStreams),te=G.next();!te.done;te=G.next())k.g[te.value.id]=52;for(G=m(t.imageStreams),te=G.next();!te.done;te=G.next())RZ(k,te.value);for(te=m(t.variants),G=te.next();!G.done;G=te.next())CZ(k,G.value);return k=BZ(c,k,t,u),c=k.streams,k=k.Hf,te=e.g,G=u.offline.usePersistentLicense,te&&G&&(te.initData=[]),{Sh:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.cd(),streams:c,sessionIds:G?rp(e):[],drmInfo:te,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Hf:k}}function ST(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function HM(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function KM(e,t,n,r){if(t.expiration=n.cd(),n=rp(n),t.sessionIds=r.offline.usePersistentLicense?n:[],ST(e)&&r.offline.usePersistentLicense&&!n.length)throw new pt(2,9,9007)}g.remove=function(e){return wT(this,PZ(this,e))};function PZ(e,t){var n,r,u,c,f,h;return xe(function(E){switch(E.g){case 1:if(Jv(),n=ET(t),n==null||n.g!="manifest")throw new pt(2,9,9004,t);return r=n,u=new Vo,oe(E,2),N(E,u.init(),4);case 4:return N(E,$v(u,r.fb(),r.Ba()),5);case 5:return c=E.h,N(E,c.getManifests([r.key()]),6);case 6:return f=E.h,h=f[0],N(E,Promise.all([OZ(e,h,u),LZ(c,r,h)]),2);case 2:return Je(E),N(E,u.destroy(),8);case 8:Te(E,0)}})}function VM(e,t){for(var n=[],r=m(e.streams),u=r.next();!u.done;u=r.next())u=u.value,t&&u.type=="video"?n.push({contentType:wi(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):t||u.type!="audio"||n.push({contentType:wi(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return n}function OZ(e,t,n){return xe(function(r){return N(r,HZ(e.g,e.h.drm,n,t),0)})}function LZ(e,t,n){function r(){}var u=qZ(n);return _T(t,n),Promise.all([e.removeSegments(u,r),e.removeManifests([t.key()],r)])}g.ji=function(){return wT(this,kZ(this))};function kZ(e){var t,n,r,u,c,f,h,E,A,k;return xe(function(G){switch(G.g){case 1:return Jv(),t=e.g,n=e.h.drm,r=new Vo,u=!1,oe(G,2),N(G,r.init(),4);case 4:c=[],fZ(r,function(te){return c.push(te)}),f=m(c),h=f.next();case 5:if(h.done){G.u(2);break}return E=h.value,N(G,E.getAll(),8);case 8:return A=G.h,N(G,BM(n,t,A),9);case 9:return k=G.h,N(G,E.remove(k),10);case 10:k.length!=A.length&&(u=!0),h=f.next(),G.u(5);break;case 2:return Je(G),N(G,r.destroy(),11);case 11:Te(G,3);break;case 3:return G.return(!u)}})}g.list=function(){return wT(this,FZ())};function FZ(){var e,t,n;return xe(function(r){switch(r.g){case 1:return Jv(),e=[],t=new Vo,oe(r,2),N(r,t.init(),4);case 4:return n=Promise.resolve(),cZ(t,function(u,c){n=n.then(function(){var f;return xe(function(h){if(h.g==1)return N(h,c.getAllManifests(),2);f=h.h,f.forEach(function(E,A){E=_T(new Tu("manifest",u.fb,u.Ba,A),E),e.push(E)}),X(h)})})}),N(r,n,2);case 2:return Je(r),N(r,t.destroy(),6);case 6:Te(r,3);break;case 3:return r.return(e)}})}function UZ(e,t,n,r){var u,c,f,h,E;return xe(function(A){if(A.g==1)return u=null,c=e.g,f={networkingEngine:c,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(k){u=k},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate}},n.configure(r.manifest),yo(e),N(A,n.start(t,f),2);if(A.g!=3)return h=A.h,yo(e),E=zM(h),N(A,Promise.all(Kf(E,function(k){return k.createSegmentIndex()})),3);if(yo(e),u)throw u;return A.return(h)})}g.rc=function(e,t,n){var r=this,u;return xe(function(c){return c.g==1?(u=new Fc({zb:r.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),u.configure(n.drm),N(c,Lm(u,e.variants,n.offline.usePersistentLicense),2)):c.g!=3?N(c,np(u),3):c.return(u)})};function BZ(e,t,n,r){var u=new Map,c=zM(n),f=new Map;c=m(c);for(var h=c.next();!h.done;h=c.next()){h=h.value;var E=jZ(e,t,n,h,r,u);f.set(h.id,E)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&f.get(t.audio.id).variantIds.push(t.id),t.video&&f.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(f.values()),Hf:Array.from(u.values())}}function jZ(e,t,n,r,u,c){var f={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},h=u.offline.numberOfParallelDownloads,E=0;return ZZ(r,n.presentationTimeline.qb(),function(A){var k=pT(A),G=void 0;if(!c.has(k)){var te=A.endTime-A.startTime;te=ZM(t,r.id)*te,te=IM(e.g,te),c.set(k,new wM(A,te,E,!1))}A.ca&&(G=pT(A.ca),c.has(G)||(te=.5*ZM(t,r.id),te=IM(e.g,te),c.set(G,new wM(A.ca,te,E,!0)))),f.segments.push({pendingInitSegmentRefId:G,initSegmentKey:G?0:null,startTime:A.startTime,endTime:A.endTime,appendWindowStart:A.appendWindowStart,appendWindowEnd:A.appendWindowEnd,timestampOffset:A.timestampOffset,tilesLayout:A.tilesLayout,pendingSegmentRefId:k,dataKey:0,mimeType:A.mimeType,codecs:A.codecs}),E=(E+1)%h}),f}function ZZ(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function yo(e){if(e.l.g)throw new pt(2,9,7001)}function Jv(){if(!TT())throw new pt(2,9,9e3)}function wT(e,t){return xe(function(n){return n.g==1?(e.i.push(t),oe(n,2),N(n,t,4)):n.g!=2?n.return(n.h):(Je(n),mn(e.i,t),Te(n,0))})}function GZ(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){mn(e.i,n)})}function qZ(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function HZ(e,t,n,r){var u,c,f;return xe(function(h){return h.g==1?r.drmInfo?(u=dZ(n),c=r.sessionIds.map(function(E){return{sessionId:E,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:VM(r,!1),videoCapabilities:VM(r,!0)}}),N(h,BM(t,e,c),2)):h.return():h.g!=3?(f=h.h,N(h,u.remove(f),3)):N(h,u.add(c.filter(function(E){return!f.includes(E.sessionId)})),0)})}function zM(e){for(var t=new Set,n=m(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=m(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=m(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function KZ(e){e.variants.map(function(c){return c.video});var t=new Set(e.variants.map(function(c){return c.audio}));e=e.textStreams;for(var n=m(t),r=n.next();!r.done;r=n.next()){r=m(t);for(var u=r.next();!u.done;u=r.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),r=n.next();!r.done;r=n.next());}re("shaka.offline.Storage",ao),ao.deleteAll=function(){var e;return xe(function(t){return t.g==1?(e=new Vo,oe(t,2),N(t,hZ(e),2)):t.g!=5?(Je(t),N(t,e.destroy(),5)):Te(t,0)})},ao.prototype.list=ao.prototype.list,ao.prototype.removeEmeSessions=ao.prototype.ji,ao.prototype.remove=ao.prototype.remove,ao.prototype.store=ao.prototype.store,ao.prototype.getNetworkingEngine=ao.prototype.Zb,ao.prototype.getConfiguration=ao.prototype.getConfiguration,ao.prototype.configure=ao.prototype.configure,ao.prototype.destroy=ao.prototype.destroy,ao.support=TT;var VZ=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");I_.offline=TT;function Eo(){}function zo(e,t){for(e={priority:t||0,callback:e},t=0;t<Bp.length;t++)if(Bp[t].priority<e.priority){Bp.splice(t,0,e);return}Bp.push(e)}re("shaka.polyfill",Eo),Eo.register=zo,Eo.installAll=function(){for(var e=m(Bp),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Ke("Error installing polyfill!",n)}}};var Bp=[];function jp(){this.g=new ey}function YM(){p.AbortController||(p.AbortController=jp,p.AbortSignal=ey)}jp.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Wn("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},y.Object.defineProperties(jp.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Eo.AbortController=jp,jp.install=YM;function ey(){Sr.call(this),this.h=!1,this.g=void 0,this.onabort=null}z(ey,Sr),y.Object.defineProperties(ey.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),zo(YM);function WM(){}function $M(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=m(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())zZ(t.value)}function zZ(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}Eo.Aria=WM,WM.install=$M,zo($M);function XM(){}function QM(){pP()}Eo.EncryptionScheme=XM,XM.install=QM,zo(QM,-2);function JM(){}function eD(){if(p.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Nd),document.addEventListener("webkitfullscreenerror",Nd),document.addEventListener("mozfullscreenchange",Nd),document.addEventListener("mozfullscreenerror",Nd),document.addEventListener("MSFullscreenChange",Nd),document.addEventListener("MSFullscreenError",Nd)}}function Nd(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}Eo.Fullscreen=JM,JM.install=eD,zo(eD);function Zp(){}function tD(){var e=!0;(ms()||_c()||Nr()||ia()||qa()||oa()||Yr("PC=EOS")||vs())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),nD=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=YZ)}function YZ(e){var t,n,r,u,c,f,h,E,A,k,G,te,Y,ve,Le,De,qe,Se,Qe;return xe(function(Ue){switch(Ue.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return Ue.return(t);if(n=e.video,r=e.audio,e.type=="media-source"){if(!Io())return Ue.return(t);if(n){if(oa())if(p.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var vt=n.contentType;if(n.width&&n.height&&(vt+="; width="+n.width+"; height="+n.height),n.framerate&&(vt+="; framerate="+n.framerate),n.transferFunction==="pq"&&(vt+="; eotf=smpte2084"),vt in ny)var Nt=ny[vt];else Nt=cast.__platform__.canDisplayType(vt),ny[vt]=Nt;u=Nt}else u=Ot(n.contentType);else qa()?(c=n.contentType,n.width&&n.height&&(c+="; width="+n.width,c+="; height="+n.height),n.framerate&&(c+="; framerate="+n.framerate),n.bitrate&&(c+="; bitrate="+n.bitrate),u=Ot(c)):u=Ot(n.contentType);if(!u)return Ue.return(t)}if(r&&(oa()&&r.spatialRendering?(h=r.contentType+"; spatialRendering=true",f=Ot(h)):f=Ot(r.contentType),!f))return Ue.return(t)}else if(e.type=="file"){if(n&&(E=n.contentType,A=uu(E),!A)||r&&(k=r.contentType,G=uu(k),!G))return Ue.return(t)}else return Ue.return(t);if(!e.keySystemConfiguration)return t.supported=!0,Ue.return(Promise.resolve(t));if(te=e.keySystemConfiguration,Y=[],ve=[],te.audio&&(Le={robustness:te.audio.robustness||"",contentType:e.audio.contentType},qa()&&e.audio.contentType.includes('codecs="ac-3"')&&(Le={robustness:Le.robustness,contentType:'audio/mp4; codecs="ec-3"'}),te.audio.encryptionScheme&&(Le={robustness:Le.robustness,contentType:Le.contentType,encryptionScheme:te.audio.encryptionScheme}),Y.push(Le)),te.video&&(De={robustness:te.video.robustness||"",contentType:e.video.contentType},te.video.encryptionScheme&&(De={robustness:De.robustness,contentType:De.contentType,encryptionScheme:te.video.encryptionScheme}),ve.push(De)),qe={initDataTypes:[te.initDataType],distinctiveIdentifier:te.distinctiveIdentifier,persistentState:te.persistentState,sessionTypes:te.sessionTypes},Y.length&&(qe.audioCapabilities=Y),ve.length&&(qe.videoCapabilities=ve),Se=(e.video?e.video.contentType:"")+"#"+(e.audio?e.audio.contentType:"")+"#"+e.keySystemConfiguration.keySystem,ce(Ue,3),Se in ty){Qe=ty[Se],Ue.u(5);break}return N(Ue,navigator.requestMediaKeySystemAccess(te.keySystem,[qe]),6);case 6:Qe=Ue.h,ty[Se]=Qe;case 5:de(Ue,4);break;case 3:Ce(Ue);case 4:Qe&&(t.supported=!0,t.keySystemAccess=Qe);case 2:return Ue.return(t)}})}Eo.MediaCapabilities=Zp,Zp.install=tD;var nD=null;Zp.originalMcap=nD;var ty={};Zp.memoizedMediaKeySystemAccessRequests_=ty;var ny={};Zp.memoizedCanDisplayTypeRequests_=ny,zo(tD,-1);function rD(){}function iD(){var e=ys();(p.MediaSource||p.ManagedMediaSource)&&(e?10>=e?p.MediaSource=null:12>=e?(oD(),WZ()):15>=e&&oD():(Lu()||Ou()||Yr("Tizen 4"))&&XZ()),(p.MediaSource||p.ManagedMediaSource)&&$Z(),p.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&QZ()}function oD(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,We.apply(0,arguments));return t.abort=function(){},t}}function WZ(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function $Z(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Df(n)!="mp2t"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return Df(n)!="mp2t"&&t(n)}}}function XZ(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return za(n)!="opus"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return za(n)!="opus"&&t(n)}}}function QZ(){var e=MediaSource.isTypeSupported;ia()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(f){return f.startsWith("codecs=")});if(0>r)return e(t);var u=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),c=u.findIndex(function(f){return f.startsWith("vp09")});return 0<=c&&(u[c]="vp9",n[r]='codecs="'+u.join(",")+'"',t=n.join("; ")),e(t)})}Eo.MediaSource=rD,rD.install=iD,zo(iD);function aD(){}function sD(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?JZ():p.orientation!=null&&eG())}function JZ(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function eG(){function e(){switch(p.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new ry;screen.orientation=t,e(),p.addEventListener("orientationchange",function(){e();var n=new Wn("change");t.dispatchEvent(n)})}Eo.Orientation=aD,aD.install=sD;function ry(){Sr.call(this),this.type="",this.angle=0}z(ry,Sr),ry.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},ry.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},zo(sD);function AT(){}var IT,bT,CT,RT,NT,xT;function tG(e,t){try{var n=new iy(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function nG(e){var t=this.mediaKeys;return t&&t!=e&&uD(t,null),delete this.mediaKeys,(this.mediaKeys=e)?uD(e,this):Promise.resolve()}function rG(e){if(e=Qn(e.initData),tn(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ha(e.subarray(4),!0),e=Va(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Si(e),this.dispatchEvent(t)}Eo.PatchedMediaKeysApple=AT,AT.uninstall=function(){IT&&(IT=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",bT),HTMLMediaElement.prototype.setMediaKeys=CT,p.MediaKeys=RT,p.MediaKeySystemAccess=NT,navigator.requestMediaKeySystemAccess=xT,bT=xT=CT=NT=RT=null,p.shakaMediaKeysPolyfill=!1)},AT.install=function(e){p.HTMLVideoElement&&p.WebKitMediaKeys&&(e!==void 0&&e&&(IT=!0,bT=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),CT=HTMLMediaElement.prototype.setMediaKeys,RT=p.MediaKeys,NT=p.MediaKeySystemAccess,xT=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=nG,p.MediaKeys=Gp,p.MediaKeySystemAccess=iy,navigator.requestMediaKeySystemAccess=tG,p.shakaMediaKeysPolyfill=!0)};function iy(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,u=!1;if(n.audioCapabilities)for(var c=m(n.audioCapabilities),f=c.next();!f.done;f=c.next())f=f.value,f.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,f.contentType.split(";")[0])&&(t.audioCapabilities.push(f),u=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),f=n.next();!f.done;f=n.next())c=f.value,c.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.videoCapabilities.push(c),u=!0));r||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=u?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}iy.prototype.createMediaKeys=function(){var e=new Gp(this.keySystem);return Promise.resolve(e)},iy.prototype.getConfiguration=function(){return this.g};function Gp(e){this.h=new WebKitMediaKeys(e),this.g=new Tt}Gp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new MT(this.h)},Gp.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function uD(e,t){if(e.g.ib(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",rG);try{return td(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}Gp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function MT(e){Sr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Tt,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new lD}z(MT,Sr),g=MT.prototype,g.generateRequest=function(e,t){var n=this;this.h=new Rr;try{var r=this.l.createSession("video/mp4",Qn(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(u){n.h&&(n.h.resolve(),n.h=null),u=new Map().set("messageType",n.keyStatuses.bc()==null?"license-request":"license-renewal").set("message",Si(u.message)),u=new Wn("message",u),n.dispatchEvent(u)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(oy(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=n.i.error,n.h!=null)n.h.reject(u),n.h=null;else if(n.g!=null)n.g.reject(u),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:oy(n,"output-not-allowed");break;default:oy(n,"internal-error")}}),oy(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},g.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},g.update=function(e){this.g=new Rr;try{this.i.update(Qn(e))}catch(t){this.g.reject(t)}return this.g},g.close=function(){try{this.i.close(),this.closed.resolve(),this.j.ib()}catch(e){this.closed.reject(e)}return this.closed},g.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function oy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}function lD(){this.size=0,this.g=void 0}g=lD.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,ke.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=ke.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};function cD(){}function fD(){!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=iG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=oG,p.MediaKeys=ay,p.MediaKeySystemAccess=DT,p.shakaMediaKeysPolyfill=!0)}function iG(){return Promise.reject(Error("The key system specified is not supported."))}function oG(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Eo.PatchedMediaKeysNop=cD,cD.install=fD;function ay(){throw new TypeError("Illegal constructor.")}ay.prototype.createSession=function(){},ay.prototype.setServerCertificate=function(){},ay.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function DT(){throw this.keySystem="",new TypeError("Illegal constructor.")}DT.prototype.getConfiguration=function(){},DT.prototype.createMediaKeys=function(){},zo(fD,-10);function dD(){}function hD(){if(!(!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)FT="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=aG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=sG,p.MediaKeys=qp,p.MediaKeySystemAccess=sy,p.shakaMediaKeysPolyfill=!0}}function PT(e){var t=FT;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function aG(e,t){try{var n=new sy(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function sG(e){var t=this.mediaKeys;return t&&t!=e&&pD(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&pD(e,this),Promise.resolve()}Eo.PatchedMediaKeysWebkit=dD,dD.install=hD;function sy(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),t=m(t);for(var c=t.next();!c.done;c=t.next()){c=c.value;var f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:c.initDataTypes,sessionTypes:["temporary"],label:c.label},h=!1;if(c.audioCapabilities)for(var E=m(c.audioCapabilities),A=E.next();!A.done;A=E.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType.split(";")[0],this.g)&&(f.audioCapabilities.push(A),r=!0));if(c.videoCapabilities)for(E=m(c.videoCapabilities),A=E.next();!A.done;A=E.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType,this.g)&&(f.videoCapabilities.push(A),r=!0));if(h||(r=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),c.persistentState=="required"&&(n?(f.persistentState="required",f.sessionTypes=["persistent-license"]):r=!1),r){this.h=f;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}sy.prototype.createMediaKeys=function(){var e=new qp(this.g);return Promise.resolve(e)},sy.prototype.getConfiguration=function(){return this.h};function qp(e){this.l=e,this.h=null,this.g=new Tt,this.i=[],this.j=new Map}function pD(e,t){e.h=t,e.g.ib();var n=FT;t&&(e.g.D(t,n+"needkey",function(r){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=Si(r.initData),e.h.dispatchEvent(u)}),e.g.D(t,n+"keymessage",function(r){var u=OT(e,r.sessionId);u&&(r=new Map().set("messageType",u.keyStatuses.bc()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new Wn("message",r),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=OT(e,r.sessionId))&&(uy(r,"usable"),r.g&&r.g.resolve(),r.g=null)}),e.g.D(t,n+"keyerror",function(r){var u=OT(e,r.sessionId);if(u){var c=Error("EME v0.1b key error"),f=r.errorCode;f.systemCode=r.systemCode,c.errorCode=f,!r.sessionId&&u.h?(r.systemCode==45&&(c.message="Unsupported session type."),u.h.reject(c),u.h=null):r.sessionId&&u.g?(u.g.reject(c),u.g=null):(c=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?uy(u,"output-restricted"):c==1?uy(u,"expired"):uy(u,"internal-error"))}}))}qp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new LT(t,this.l,e),this.i.push(e),e},qp.prototype.setServerCertificate=function(){return Promise.resolve(!1)},qp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function OT(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function LT(e,t,n){Sr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new mD}z(LT,Sr);function gD(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=Qn(Va("LOAD_SESSION|"+n));else{var u=Va("PERSISTENT|");r=li(u,t)}else r=Qn(t)}catch(f){return Promise.reject(f)}e.h=new Rr;var c=PT("generateKeyRequest");try{e.j[c](e.i,r)}catch(f){if(f.name!="InvalidStateError")return e.h=null,Promise.reject(f);new pr(function(){try{e.j[c](e.i,r)}catch(h){e.h.reject(h),e.h=null}}).X(.01)}return e.h}function kT(e,t,n){if(e.g)e.g.then(function(){return kT(e,t,n)}).catch(function(){return kT(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=Vr(n),u=JSON.parse(r);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=qo(u.keys[0].k),u=qo(u.keys[0].kid)}else r=Qn(n),u=null;var c=PT("addKey");try{e.j[c](e.i,r,u,e.sessionId)}catch(f){e.g.reject(f),e.g=null}}}function uy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}g=LT.prototype,g.generateRequest=function(e,t){return gD(this,t,null)},g.load=function(e){return this.l=="persistent-license"?gD(this,null,e):Promise.reject(Error("Not a persistent session."))},g.update=function(e){var t=new Rr;return kT(this,t,e),t},g.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=PT("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},g.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function mD(){this.size=0,this.g=void 0}g=mD.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,ke.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=ke.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};var FT="";zo(hD);function vD(){}function yD(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=lG,Object.defineProperty(e,"disablePictureInPicture",{get:fG,set:dG,enumerable:!0,configurable:!0}),document.exitPictureInPicture=cG,document.addEventListener("webkitpresentationmodechanged",uG,!0))}}function uG(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function lG(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function cG(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function fG(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function dG(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Eo.PiPWebkit=vD,vD.install=yD,zo(yD);function ED(){}function _D(){p.crypto&&("randomUUID"in p.crypto||(p.crypto.randomUUID=hG))}function hG(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Eo.RandomUUID=ED,ED.install=_D,zo(_D);function TD(){}function SD(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:pG})}function pG(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Eo.Symbol=TD,TD.install=SD,zo(SD);function wD(){}function AD(){if(p.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Eo.VideoPlayPromise=wD,wD.install=AD,zo(AD);function ID(){}function bD(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||ia()&&lu()===38)&&(e.getVideoPlaybackQuality=gG)}}function gG(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Eo.VideoPlaybackQuality=ID,ID.install=bD,zo(bD);function CD(){}function RD(){if(!p.VTTCue&&p.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=UT;else if(t==6)e=mG;else{try{var n=!!UT(1,2,"")}catch(r){n=!1}n&&(e=UT)}e&&(p.VTTCue=function(r,u,c){return e(r,u,c)})}}function UT(e,t,n){return new p.TextTrackCue(e,t,n)}function mG(e,t,n){return new p.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Eo.VTTCue=CD,CD.install=RD,zo(RD);function xa(){}xa.prototype.parseInit=function(){},xa.prototype.setSequenceMode=function(){},xa.prototype.setManifestType=function(){},xa.prototype.parseMedia=function(e,t){var n=null,r=[];e=Vr(e).split(/\r?\n/),e=m(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=vG.exec(u))){var c=yG.exec(u[1]);c=60*parseInt(c[1],10)+parseFloat(c[2].replace(",",".")),u=new Cn(c,t.segmentEnd?t.segmentEnd:c+2,u[2]),n&&(n.endTime=c,r.push(n)),n=u}return n&&r.push(n),r},re("shaka.text.LrcTextParser",xa),xa.prototype.parseMedia=xa.prototype.parseMedia,xa.prototype.setManifestType=xa.prototype.setManifestType,xa.prototype.setSequenceMode=xa.prototype.setSequenceMode,xa.prototype.parseInit=xa.prototype.parseInit;var vG=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,yG=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;ji["application/x-subtitle-lrc"]=function(){return new xa};function ma(){}ma.prototype.parseInit=function(){},ma.prototype.setSequenceMode=function(){},ma.prototype.setManifestType=function(){},ma.prototype.parseMedia=function(e,t,n){var r=Vr(e);if(e=[],r=="")return e;var u=Ul(r,"tt");if(!u)throw new pt(2,2,2005,"Failed to parse TTML.");if(r=Ca(u,"body")[0],!r)return[];var c=la(u,Hp,"frameRate"),f=la(u,Hp,"subFrameRate"),h=la(u,Hp,"frameRateMultiplier"),E=la(u,Hp,"tickRate"),A=la(u,Hp,"cellResolution"),k=u.attributes["xml:space"]||"default",G=la(u,fy,"extent");if(k!="default"&&k!="preserve")throw new pt(2,2,2005,"Invalid xml:space value: "+k);k=k=="default",c=new TG(c,f,h,E),A=A&&(A=/^(\d+) (\d+)$/.exec(A))?{Sb:parseInt(A[1],10),rows:parseInt(A[2],10)}:null,f=(f=Ca(u,"metadata")[0])?f.children:[],h=Ca(u,"style"),u=Ca(u,"region"),E=[];for(var te=m(u),Y=te.next();!Y.done;Y=te.next()){var ve=Y.value;Y=new Br;var Le=ve.attributes["xml:id"];if(Le){Y.id=Le;var De=null;G&&(De=GT.exec(G)||qT.exec(G)),Le=De?Number(De[1]):null,De=De?Number(De[2]):null;var qe,Se=ly(ve,h,"extent");if(Se){var Qe=(qe=GT.exec(Se))||qT.exec(Se);Qe!=null&&(Y.width=Number(Qe[1]),Y.height=Number(Qe[2]),qe||(Le!=null&&(Y.width=100*Y.width/Le),De!=null&&(Y.height=100*Y.height/De)),Y.widthUnits=qe||Le!=null?qr:0,Y.heightUnits=qe||De!=null?qr:0)}(ve=ly(ve,h,"origin"))&&(Qe=(qe=GT.exec(ve))||qT.exec(ve),Qe!=null&&(Y.viewportAnchorX=Number(Qe[1]),Y.viewportAnchorY=Number(Qe[2]),qe?Se||(Y.width=100-Y.viewportAnchorX,Y.widthUnits=qr,Y.height=100-Y.viewportAnchorY,Y.heightUnits=qr):(De!=null&&(Y.viewportAnchorY=100*Y.viewportAnchorY/De),Le!=null&&(Y.viewportAnchorX=100*Y.viewportAnchorX/Le)),Y.viewportAnchorUnits=qe||Le!=null?qr:0))}else Y=null;Y&&E.push(Y)}if(Wr(r,"p").length)throw new pt(2,2,2001,"<p> can only be inside <div> in TTML");for(G=m(Wr(r,"div")),te=G.next();!te.done;te=G.next())if(Wr(te.value,"span").length)throw new pt(2,2,2001,"<span> can only be inside <p> in TTML");return(t=ND(r,t,c,f,h,u,E,k,A,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function ND(e,t,n,r,u,c,f,h,E,A,k,G){var te=A;if(Yf(e)){if(!k)return null;var Y={tagName:"span",children:[Ri(e)],attributes:{},parent:null}}else Y=e;for(var ve=null,Le=m(BD),De=Le.next();!De.done&&!(ve=cy(Y,"backgroundImage",r,"#",De.value)[0]);De=Le.next());Le=null;var qe=la(Y,BD,"backgroundImage");if(G&&qe&&!qe.startsWith("#")&&(De=new si(G),qe=new si(qe),(De=De.resolve(qe).toString())&&(Le=De)),(e.tagName=="p"||ve||Le)&&(k=!0),e=k,De=(Y.attributes["xml:space"]||(h?"default":"preserve"))=="default",qe=Y.children.every(Yf),h=[],!qe)for(var Se=m(Y.children),Qe=Se.next();!Qe.done;Qe=Se.next())(Qe=ND(Qe.value,t,n,r,u,c,f,De,E,Y,k,G))&&h.push(Qe);if(r=A!=null,G=Ri(Y),G=Y.children.length&&G&&/\S/.test(G),Qe=Y.attributes.begin||Y.attributes.end||Y.attributes.dur,!(Qe||G||Y.tagName=="br"||h.length!=0||r&&!De))return null;for(Se=DD(Y,n),G=Se.start,Se=Se.end;te&&te.tagName&&te.tagName!="tt";)Se=_G(te,n,G,Se),G=Se.start,Se=Se.end,te=te.parent;if(G==null&&(G=0),G+=t.periodStart,Se=Se==null?1/0:Se+t.periodStart,G=Math.max(G,t.segmentStart),Se=Math.min(Se,t.segmentEnd),!Qe&&0<h.length)for(G=1/0,Se=0,t=m(h),n=t.next();!n.done;n=t.next())n=n.value,G=Math.min(G,n.startTime),Se=Math.max(Se,n.endTime);if(Y.tagName=="br")return u=new Cn(G,Se,""),u.lineBreak=!0,u;if(t="",qe&&(t=bo(Ri(Y)||""),De&&(t=t.replace(/\s+/g," "))),t=new Cn(G,Se,t),t.nestedCues=h,k||(t.isContainer=!0),E&&(t.cellResolution=E),E=cy(Y,"region",c,"")[0],Y.attributes.region&&E&&E.attributes["xml:id"]){var Ue=E.attributes["xml:id"];t.region=f.filter(function(vt){return vt.id==Ue})[0]}return f=E,A&&r&&!Y.attributes.region&&!Y.attributes.style&&(f=cy(A,"region",c,"")[0]),EG(t,Y,f,ve,Le,u,e,h.length==0),t}function EG(e,t,n,r,u,c,f,h){if(f=f||h,_o(t,n,c,"direction",f)=="rtl"&&(e.direction="rtl"),h=_o(t,n,c,"writingMode",f),h=="tb"||h=="tblr"?e.writingMode="vertical-lr":h=="tbrl"?e.writingMode="vertical-rl":h=="rltb"||h=="rl"?e.direction="rtl":h&&(e.direction=Vn),(h=_o(t,n,c,"textAlign",!0))?(e.positionAlign=AG[h],e.lineAlign=wG[h],e.textAlign=er[h.toUpperCase()]):e.textAlign=kn,(h=_o(t,n,c,"displayAlign",!0))&&(e.displayAlign=Ur[h.toUpperCase()]),(h=_o(t,n,c,"color",f))&&(e.color=h),(h=_o(t,n,c,"backgroundColor",f))&&(e.backgroundColor=h),(h=_o(t,n,c,"border",f))&&(e.border=h),h=_o(t,n,c,"fontFamily",f))switch(h){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=h}switch((h=_o(t,n,c,"fontWeight",f))&&h=="bold"&&(e.fontWeight=700),h=_o(t,n,c,"wrapOption",f),e.wrapLine=!(h&&h=="noWrap"),(h=_o(t,n,c,"lineHeight",f))&&h.match(xd)&&(e.lineHeight=h),(h=_o(t,n,c,"fontSize",f))&&(h.match(xd)||h.match(SG))&&(e.fontSize=h),(h=_o(t,n,c,"fontStyle",f))&&(e.fontStyle=no[h.toUpperCase()]),r?(u=r.attributes.imageType||r.attributes.imagetype,h=r.attributes.encoding,r=Ri(r).trim(),u=="PNG"&&h=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):u&&(e.backgroundImage=u),(r=_o(t,n,c,"textOutline",f))&&(r=r.split(" "),r[0].match(xd)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(xd)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=_o(t,n,c,"letterSpacing",f))&&r.match(xd)&&(e.letterSpacing=r),(r=_o(t,n,c,"linePadding",f))&&r.match(xd)&&(e.linePadding=r),(r=_o(t,n,c,"opacity",f))&&(e.opacity=parseFloat(r)),(r=ly(n,c,"textDecoration"))&&xD(e,r),(r=BT(t,c,"textDecoration"))&&xD(e,r),(r=_o(t,n,c,"textCombine",f))&&(e.textCombineUpright=r),_o(t,n,c,"ruby",f)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function xD(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&mn(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&mn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&mn(e.textDecoration,"overline")}}function _o(e,t,n,r,u){return u=u===void 0?!0:u,(e=BT(e,n,r))?e:u?ly(t,n,r):null}function ly(e,t,n){if(!e)return null;var r=la(e,fy,n);return r||MD(e,t,n)}function BT(e,t,n){var r=la(e,fy,n);return r||MD(e,t,n)}function MD(e,t,n){e=cy(e,"style",t,"");for(var r=null,u=0;u<e.length;u++){var c=vu(e[u],"urn:ebu:tt:style",n);c||(c=la(e[u],fy,n)),c||(c=BT(e[u],t,n)),c&&(r=c)}return r}function cy(e,t,n,r,u){var c=[];if(!e||1>n.length)return c;var f=e;for(e=null;!e&&!(e=u?vu(f,u,t):f.attributes[t])&&(f=f.parent,f););if(t=e){for(t=m(t.split(" ")),u=t.next();!u.done;u=t.next())for(u=u.value,e=m(n),f=e.next();!f.done;f=e.next())if(f=f.value,r+f.attributes["xml:id"]==u){c.push(f);break}}return c}function _G(e,t,n,r){return e=DD(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function DD(e,t){var n=jT(e.attributes.begin,t),r=jT(e.attributes.end,t);return e=jT(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function jT(e,t){var n=null;if(PD.test(e)){e=PD.exec(e),n=Number(e[1]);var r=Number(e[2]),u=Number(e[3]),c=Number(e[4]);c+=(Number(e[5])||0)/t.h,u+=c/t.frameRate,n=u+60*r+3600*n}else if(OD.test(e))n=ZT(OD,e);else if(LD.test(e))n=ZT(LD,e);else if(kD.test(e))e=kD.exec(e),n=Number(e[1])/t.frameRate;else if(FD.test(e))e=FD.exec(e),n=Number(e[1])/t.g;else if(UD.test(e))n=ZT(UD,e);else if(e)throw new pt(2,2,2001,"Could not parse cue time range in TTML");return n}function ZT(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}re("shaka.text.TtmlTextParser",ma),ma.prototype.parseMedia=ma.prototype.parseMedia,ma.prototype.setManifestType=ma.prototype.setManifestType,ma.prototype.setSequenceMode=ma.prototype.setSequenceMode,ma.prototype.parseInit=ma.prototype.parseInit;function TG(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var GT=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,SG=/^(\d{1,2}(?:\.\d+)?|100)%$/,xd=/^(\d+px|\d+em|\d*\.?\d+c)$/,qT=/^(\d+)px (\d+)px$/,PD=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,OD=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,LD=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,kD=/^(\d*(?:\.\d*)?)f$/,FD=/^(\d*(?:\.\d*)?)t$/,UD=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),wG={left:bn,center:"center",right:"end",start:bn,end:"end"},AG={left:"line-left",center:"center",right:"line-right"},Hp=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],fy=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],BD=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];ji["application/ttml+xml"]=function(){return new ma};function Lo(){this.g=new ma}Lo.prototype.parseInit=function(e){var t=!1;if(new Fr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",gu).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new pt(2,2,2007)},Lo.prototype.setSequenceMode=function(){},Lo.prototype.setManifestType=function(){},Lo.prototype.parseMedia=function(e,t,n){var r=this,u=!1,c=[];if(new Fr().box("mdat",$u(function(f){u=!0,c=c.concat(r.g.parseMedia(f,t,n))})).parse(e,!1),!u)throw new pt(2,2,2007);return c},re("shaka.text.Mp4TtmlParser",Lo),Lo.prototype.parseMedia=Lo.prototype.parseMedia,Lo.prototype.setManifestType=Lo.prototype.setManifestType,Lo.prototype.setSequenceMode=Lo.prototype.setSequenceMode,Lo.prototype.parseInit=Lo.prototype.parseInit,ji['application/mp4; codecs="stpp"']=function(){return new Lo},ji['application/mp4; codecs="stpp.ttml"']=function(){return new Lo},ji['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Lo},ji['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Lo};function ko(){this.h=!1,this.g="UNKNOWN"}ko.prototype.parseInit=function(){},ko.prototype.setSequenceMode=function(e){this.h=e},ko.prototype.setManifestType=function(e){this.g=e},ko.prototype.parseMedia=function(e,t){e=Vr(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new pt(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new pt(2,2,2e3);if(e=dy(new Vc(e[1])),e==null)throw new pt(2,2,2e3);e=t.periodStart+Number(r[1])/9e4-e}else e=t.segmentStart;t=[],r=m(n[0].split("\n"));for(var u=r.next();!u.done;u=r.next())if(u=u.value,/^Region:/.test(u)){u=new Vc(u);var c=new Br;zc(u),Ad(u);for(var f=zc(u);f;){var h=c,E=f;(f=/^id=(.*)$/.exec(E))?h.id=f[1]:(f=/^width=(\d{1,2}|100)%$/.exec(E))?h.width=Number(f[1]):(f=/^lines=(\d+)$/.exec(E))?(h.height=Number(f[1]),h.heightUnits=2):(f=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.regionAnchorX=Number(f[1]),h.regionAnchorY=Number(f[2])):(f=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.viewportAnchorX=Number(f[1]),h.viewportAnchorY=Number(f[2])):/^scroll=up$/.exec(E)&&(h.scroll="up"),Ad(u),f=zc(u)}t.push(c)}for(r=new Map,jD(r),u=[],n=m(n.slice(1)),c=n.next();!c.done;c=n.next()){if(c=c.value.split("\n"),(c.length!=1||c[0])&&!/^NOTE($|[ \t])/.test(c[0])&&c[0]=="STYLE"){for(h=[],f=-1,E=1;E<c.length;E++)c[E].includes("::cue")&&(h.push([]),f=h.length-1),f!=-1&&(h[f].push(c[E]),c[E].includes("}")&&(f=-1));for(h=m(h),f=h.next();!f.done;f=h.next()){var A=f.value;f="global",(E=A[0].match(/\((.*)\)/))&&(f=E.pop()),E=A.slice(1,-1),A[0].includes("}")&&(A=/\{(.*?)\}/.exec(A[0]))&&(E=A[1].split(";")),(A=r.get(f))||(A=new Cn(0,0,""));for(var k=!1,G=0;G<E.length;G++){var te=/^\s*([^:]+):\s*(.*)/.exec(E[G]);if(te){var Y=te[2].trim().replace(";","");switch(te[1].trim()){case"background-color":case"background":k=!0,A.backgroundColor=Y;break;case"color":k=!0,A.color=Y;break;case"font-family":k=!0,A.fontFamily=Y;break;case"font-size":k=!0,A.fontSize=Y;break;case"font-weight":(700<=parseInt(Y,10)||Y=="bold")&&(k=!0,A.fontWeight=700);break;case"font-style":switch(Y){case"normal":k=!0,A.fontStyle=Yi;break;case"italic":k=!0,A.fontStyle="italic";break;case"oblique":k=!0,A.fontStyle="oblique"}break;case"opacity":k=!0,A.opacity=parseFloat(Y);break;case"text-combine-upright":k=!0,A.textCombineUpright=Y;break;case"text-shadow":k=!0,A.textShadow=Y;break;case"white-space":k=!0,A.wrapLine=Y!="noWrap"}}}k&&r.set(f,A)}}if(k=e,c.length==1&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||c[0]=="STYLE"||c[0]=="REGION")c=null;else if(h=null,c[0].includes("-->")||(h=c[0],c.splice(0,1)),f=new Vc(c[0]),E=dy(f),G=ql(f,/[ \t]+--\x3e[ \t]+/g),A=dy(f),E==null||G==null||A==null)Ke("Failed to parse VTT time code. Cue skipped:",h,c),c=null;else{for(E+=k,A+=k,c=c.slice(1).join("\n").trim(),r.has("global")?(k=r.get("global").clone(),k.startTime=E,k.endTime=A,k.payload=""):k=new Cn(E,A,""),Ad(f),E=zc(f);E;)qD(k,E,t),Ad(f),E=zc(f);ZD(c,k,r),h!=null&&(k.id=h),c=k}c&&u.push(c)}return u};function jD(e){for(var t=m(Object.entries(ar)),n=t.next();!n.done;n=t.next()){var r=m(n.value);n=r.next().value,r=r.next().value;var u=new Cn(0,0,"");u.color=r,e.set("."+n,u)}for(t=m(Object.entries(br)),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,u=new Cn(0,0,""),u.backgroundColor=r,e.set("."+n,u)}function ZD(e,t,n){if(e.includes("<")){n.size===0&&jD(n);var r=e;e=[];for(var u=-1,c=0;c<r.length;c++)r[c]==="<"?u=c+1:r[c]===">"&&0<u&&(u=r.substr(u,c-u),u.match(HD)&&e.push(u),u=-1);for(e=m(e),c=e.next();!c.done;c=e.next())c=c.value,r=r.replace("<"+c+">",'<div time="'+c+'">'),r+="</div>";e=r;e:{c=e,u=[];var f=-1;e="",r=!1;for(var h=0;h<c.length;h++)if(c[h]==="/"){var E=c.indexOf(">",h);if(E===-1){e=c;break e}if((E=c.substring(h+1,E))&&E=="v"){r=!0;var A=null;if(u.length&&(A=u[u.length-1]),A){if(A===E)e+="/"+E+">";else{if(!A.startsWith("v")){e+=c[h];continue}e+="/"+A+">"}h+=E.length+1}else e+=c[h]}else e+=c[h]}else c[h]==="<"?(f=h+1,c[f]!="v"&&(f=-1)):c[h]===">"&&0<f&&(u.push(c.substr(f,h-f)),f=-1),e+=c[h];for(c=m(u),u=c.next();!u.done;u=c.next())u=u.value,f=u.replace(" ",".voice-"),e=e.replace("<"+u+">","<"+f+">"),e=e.replace("</"+u+">","</"+f+">"),r||(e+="</"+f+">")}e=IG(e);try{var k=Ul("<span>"+e+"</span>","span")}catch(G){}if(k)if(k=k.children,k.length!=1||k[0].tagName)for(k=m(k),e=k.next();!e.done;e=k.next())GD(e.value,t,n);else t.payload=bo(e);else t.payload=bo(e)}else t.payload=bo(e)}function IG(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||""}):e||""}function Kp(e,t){return e&&0<e.length?e:t}function GD(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Br,r.position=null,r.size=0,e.tagName)for(var u=m(e.tagName.split(/(?=[ .])+/g)),c=u.next();!c.done;c=u.next()){var f=c=c.value;if(f.startsWith(".voice-")){var h=f.split("-").pop();f='v[voice="'+h+'"]',n.has(f)||(f="v[voice="+h+"]")}switch(n.has(f)&&(f=n.get(f))&&(r.backgroundColor=Kp(f.backgroundColor,r.backgroundColor),r.color=Kp(f.color,r.color),r.fontFamily=Kp(f.fontFamily,r.fontFamily),r.fontSize=Kp(f.fontSize,r.fontSize),r.textShadow=Kp(f.textShadow,r.textShadow),r.fontWeight=f.fontWeight,r.fontStyle=f.fontStyle,r.opacity=f.opacity,r.rubyTag=f.rubyTag,r.textCombineUpright=f.textCombineUpright,r.wrapLine=f.wrapLine),c){case"br":r=Rn(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":(c=e.attributes.color)&&(r.color=c);break;case"div":if(c=e.attributes.time,!c)break;(c=dy(new Vc(c)))&&(r.startTime=c);break;case"ruby":case"rp":case"rt":r.rubyTag=c}}if(u=e.children,Yf(e)||u.length==1&&Yf(u[0]))for(n=Ri(e).split("\n"),e=!0,n=m(n),u=n.next();!u.done;u=n.next())u=u.value,e||(e=Rn(r.startTime,r.endTime),t.nestedCues.push(e)),0<u.length&&(e=r.clone(),e.payload=bo(u),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=m(u),e=t.next();!e.done;e=t.next())GD(e.value,r,n)}function qD(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=kn:e.textAlign=er[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Bn)):(r=/^region:(.*)$/.exec(t))?(t=bG(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=cn,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()]))}function bG(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function dy(e){if(e=ql(e,HD),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}re("shaka.text.VttTextParser",ko),ko.prototype.parseMedia=ko.prototype.parseMedia,ko.prototype.setManifestType=ko.prototype.setManifestType,ko.prototype.setSequenceMode=ko.prototype.setSequenceMode,ko.prototype.parseInit=ko.prototype.parseInit;var HD=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;ji["text/vtt"]=function(){return new ko},ji['text/vtt; codecs="vtt"']=function(){return new ko},ji['text/vtt; codecs="wvtt"']=function(){return new ko};function Ma(){this.g=null}Ma.prototype.parseInit=function(e){var t=this,n=!1;if(new Fr().box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(r){r=It(r.reader,r.version),t.g=r.timescale}).box("minf",yr).box("stbl",yr).O("stsd",gu).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new pt(2,2,2008);if(!n)throw new pt(2,2,2008)},Ma.prototype.setSequenceMode=function(){},Ma.prototype.setManifestType=function(){},Ma.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new pt(2,2,2008);var n=0,r=[],u,c=[],f=!1,h=!1,E=!1,A=null;if(new Fr().box("moof",yr).box("traf",yr).O("tfdt",function(Qe){f=!0,n=ir(Qe.reader,Qe.version).baseMediaDecodeTime}).O("tfhd",function(Qe){A=rr(Qe.reader,Qe.flags).Wf}).O("trun",function(Qe){h=!0,r=Xt(Qe.reader,Qe.version,Qe.flags).vg}).box("mdat",$u(function(Qe){E=!0,u=Qe})).parse(e,!1),!E&&!f&&!h)throw new pt(2,2,2008);e=n;for(var k=new Dr(u,0),G=m(r),te=G.next();!te.done;te=G.next()){te=te.value;var Y=te.wf||A,ve=te.he?n+te.he:e;e=ve+(Y||0);var Le=0;do{var De=k.M();Le+=De;var qe=k.M(),Se=null;Vf(qe)=="vttc"?8<De&&(Se=k.sb(De-8)):k.skip(De-8),Y&&Se&&(De=CG(Se,t.periodStart+ve/this.g,t.periodStart+e/this.g),c.push(De))}while(te.sampleSize&&Le<te.sampleSize)}return c.filter(Bu)};function CG(e,t,n){var r,u,c;return new Fr().box("payl",$u(function(f){r=Vr(f)})).box("iden",$u(function(f){u=Vr(f)})).box("sttg",$u(function(f){c=Vr(f)})).parse(e),r?RG(r,u,c,t,n):null}function RG(e,t,n,r,u){if(r=new Cn(r,u,""),ZD(e,r,new Map),t&&(r.id=t),n)for(e=new Vc(n),t=zc(e);t;)qD(r,t,[]),Ad(e),t=zc(e);return r}re("shaka.text.Mp4VttParser",Ma),Ma.prototype.parseMedia=Ma.prototype.parseMedia,Ma.prototype.setManifestType=Ma.prototype.setManifestType,Ma.prototype.setSequenceMode=Ma.prototype.setSequenceMode,Ma.prototype.parseInit=Ma.prototype.parseInit,ji['application/mp4; codecs="wvtt"']=function(){return new Ma};function Da(){}Da.prototype.parseInit=function(){},Da.prototype.setSequenceMode=function(){},Da.prototype.setManifestType=function(){},Da.prototype.parseMedia=function(e){var t=Vr(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var r=new Vc(n[0]),u=KD(r),c=ql(r,/,/g);if(r=KD(r),u==null||c==null||r==null)throw new pt(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Cn(u,r,n.slice(1).join("\n").trim()))}return e};function KD(e){if(e=ql(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}re("shaka.text.SbvTextParser",Da),Da.prototype.parseMedia=Da.prototype.parseMedia,Da.prototype.setManifestType=Da.prototype.setManifestType,Da.prototype.setSequenceMode=Da.prototype.setSequenceMode,Da.prototype.parseInit=Da.prototype.parseInit,ji["text/x-subviewer"]=function(){return new Da};function va(){this.g=new ko}va.prototype.parseInit=function(){},va.prototype.setSequenceMode=function(){},va.prototype.setManifestType=function(){},va.prototype.parseMedia=function(e,t,n){return e=Vr(e),e=VD(e),e=Qn(Va(e)),this.g.parseMedia(e,t,n)};function VD(e){var t="WEBVTT\n\n";if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=m(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}re("shaka.text.SrtTextParser",va),va.srt2webvtt=VD,va.prototype.parseMedia=va.prototype.parseMedia,va.prototype.setManifestType=va.prototype.setManifestType,va.prototype.setSequenceMode=va.prototype.setSequenceMode,va.prototype.parseInit=va.prototype.parseInit,ji["text/srt"]=function(){return new va};function Pa(){}Pa.prototype.parseInit=function(){},Pa.prototype.setSequenceMode=function(){},Pa.prototype.setManifestType=function(){},Pa.prototype.parseMedia=function(e){var t="",n="";e=Vr(e).split(/\r?\n\s*\r?\n/),e=m(e);for(var r=e.next();!r.done;r=e.next()){var u=xG.exec(r.value);u&&(r=u[1],u=u[2],r=="V4 Styles"||r=="V4+ Styles"?t=u:r=="Events"&&(n=u))}e=[],r=null,t=m(t.split(/\r?\n/));for(var c=t.next();!c.done;c=t.next())if(u=c.value,!/^\s*;/.test(u)&&(c=WD.exec(u))){if(u=c[1].trim(),c=c[2].trim(),u=="Format")r=c.split(hy);else if(u=="Style"){u=c.split(hy),c={};for(var f=0;f<r.length&&f<u.length;f++)c[r[f]]=u[f];e.push(c)}}for(r=[],t=null,u={},n=m(n.split(/\r?\n/)),c=n.next();!c.done;u={re:u.re},c=n.next())if(c=c.value,!/^\s*;/.test(c)&&(f=WD.exec(c))){if(c=f[1].trim(),f=f[2].trim(),c=="Format")t=f.split(hy);else if(c=="Dialogue"){f=f.split(hy),c={};for(var h=0;h<t.length&&h<f.length;h++)c[t[h]]=f[h];h=YD(c.Start);var E=YD(c.End);f=new Cn(h,E,f.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),u.re=c.Style,(c=e.find(function(A){return function(k){return k.Name==A.re}}(u)))&&NG(f,c),r.push(f)}}return r};function NG(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=zD(n))&&(e.color=n),(n=t.BackColour)&&(n=zD(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Er,e.textAlign="start";break;case 2:e.displayAlign=Er,e.textAlign=kn;break;case 3:e.displayAlign=Er,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=kn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=kn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function zD(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function YD(e){return e=MG.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}re("shaka.text.SsaTextParser",Pa),Pa.prototype.parseMedia=Pa.prototype.parseMedia,Pa.prototype.setManifestType=Pa.prototype.setManifestType,Pa.prototype.setSequenceMode=Pa.prototype.setSequenceMode,Pa.prototype.parseInit=Pa.prototype.parseInit;var xG=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,WD=/^\s*([^:]+):\s*(.*)/,hy=/\s*,\s*/,MG=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;ji["text/x-ssa"]=function(){return new Pa};function $D(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,U:e}:null}function XD(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var u=((e[t+2]&192)>>>6)+1,c=(e[t+2]&1)<<2;return c|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:c,Ea:"mp4a.40."+u}}function QD(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function DG(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function Oa(e){this.i=e,this.h=0,this.g=new Map}g=Oa.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Do(t)||"mp4a.40.2")+'"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){for(var u=Qn(e),c=Nn(u),f=c.length;f<u.length&&!QD(u,f);f++);if(e=1e3*n.endTime,c=Dn(c),c.length&&n&&(n=c.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=n.data),n=XD(u,f),!n)return Promise.reject(new pt(2,3,3018));for(t.audioSamplingRate=n.sampleRate,t.channelsCount=n.channelCount,c=[];f<u.length;){var h=$D(u,f);if(!h)return Promise.reject(new pt(2,3,3018));var E=h.Qd+h.U;f+E<=u.length&&c.push({data:u.subarray(f+h.Qd,f+E),size:h.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),f+=E}return u=n.sampleRate,e=Math.floor(e*u/1e3),r={id:t.id,type:"audio",codecs:n.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:c},stream:t},e=new bd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Cd(e),this.g.set(t.id,r)),t=Lp(e),this.h++,t=li(r,t),Promise.resolve(t)},re("shaka.transmuxer.AacTransmuxer",Oa),Oa.prototype.transmux=Oa.prototype.transmux,Oa.prototype.getOriginalMimeType=Oa.prototype.getOriginalMimeType,Oa.prototype.convertCodecs=Oa.prototype.convertCodecs,Oa.prototype.isSupported=Oa.prototype.isSupported,Oa.prototype.destroy=Oa.prototype.destroy,wo("audio/aac",function(){return new Oa("audio/aac")},Ci);function JD(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,u=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+u>e.length)return null;var c=e[t+6]>>5,f=0;c===2?f+=2:(c&1&&c!==1&&(f+=2),c&4&&(f+=2)),f=(e[t+6]<<8|e[t+7])>>12-f&1;var h=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|h>>2,(h&3)<<6|c<<3|f<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][c]+f,ga:e,U:u}}function PG(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var u,c;0<r;){c=e[t];var f=Math.min(r,8),h=8-f;u=4278190080>>>24+h<<h,u=(c&u)>>h,n=n?n<<f|u:u,t+=1,r-=f}if(16>n)return!0}return!1}function ns(e){this.i=e,this.h=0,this.g=new Map}g=ns.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){e=Qn(e);for(var u=Nn(e),c=u.length;c<e.length&&!PG(e,c);c++);var f=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=JD(e,c);if(!E)return Promise.reject(new pt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(f*n/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new bd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Cd(e),this.g.set(t.id,r)),t=Lp(e),this.h++,t=li(r,t),Promise.resolve(t)},re("shaka.transmuxer.Ac3Transmuxer",ns),ns.prototype.transmux=ns.prototype.transmux,ns.prototype.getOriginalMimeType=ns.prototype.getOriginalMimeType,ns.prototype.convertCodecs=ns.prototype.convertCodecs,ns.prototype.isSupported=ns.prototype.isSupported,ns.prototype.destroy=ns.prototype.destroy,wo("audio/ac3",function(){return new ns("audio/ac3")},Ci);function eP(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new xn(e.subarray(t+2));Gn(n,2),Gn(n,3);var r=bt(n,11)+1<<1,u=bt(n,2);if(u==3){u=bt(n,2),u=[24e3,22060,16e3][u];var c=3}else u=[48e3,44100,32e3][u],c=bt(n,2);var f=bt(n,3),h=bt(n,1);return n=bt(n,5),t+r>e.byteLength?null:(e=Math.floor(r*u/(16*[1,2,3,6][c])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|n<<1|0,0|f<<1|h<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][f]+h,ga:e,U:r})}function rs(e){this.i=e,this.h=0,this.g=new Map}g=rs.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){e=Qn(e);for(var u=Nn(e),c=u.length;c<e.length&&(e[c]<<8|e[c+1]<<0)!==2935;c++);var f=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=eP(e,c);if(!E)return Promise.reject(new pt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(f*n/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new bd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Cd(e),this.g.set(t.id,r)),t=Lp(e),this.h++,t=li(r,t),Promise.resolve(t)},re("shaka.transmuxer.Ec3Transmuxer",rs),rs.prototype.transmux=rs.prototype.transmux,rs.prototype.getOriginalMimeType=rs.prototype.getOriginalMimeType,rs.prototype.convertCodecs=rs.prototype.convertCodecs,rs.prototype.isSupported=rs.prototype.isSupported,rs.prototype.destroy=rs.prototype.destroy,wo("audio/ec3",function(){return new rs("audio/ec3")},Ci);function OG(e){if(!e.length)return null;var t=e.find(function(Le){return Le.type==7});if(e=e.find(function(Le){return Le.type==8}),!t||!e)return null;var n=new xn(t.data),r=rt(n);if(rt(n),rt(n),En(n),kG.includes(r)&&(r=Lt(n),r===3&&Gn(n,1),En(n),En(n),Gn(n,1),lt(n))){r=r!==3?8:12;for(var u=0;u<r;u++)lt(n)&&(6>u?Kt(n,16):Kt(n,64))}if(En(n),r=Lt(n),r===0)Lt(n);else if(r===1)for(Gn(n,1),En(n),En(n),r=Lt(n),u=0;u<r;u++)En(n);En(n),Gn(n,1);var c=Lt(n),f=Lt(n),h=bt(n,1);h===0&&Gn(n,1),Gn(n,1);var E=0,A=0,k=0,G=0;if(lt(n)&&(E=Lt(n),A=Lt(n),k=Lt(n),G=Lt(n)),u=r=1,lt(n)&&lt(n)){var te=rt(n),Y=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ve=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<te&&16>=te?(r=Y[te-1],u=ve[te-1]):te===255&&(r=bt(n,16),u=bt(n,16))}return n=(2-h)*(f+1)*16-2*k-2*G,c=16*(c+1)-2*E-2*A,E=[],t=t.fullData,E.push(t.byteLength>>>8&255),E.push(t.byteLength&255),E=E.concat.apply(E,T(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,T(e)),e=new Uint8Array([1,E[3],E[4],E[5],255,225].concat(E,[1],t)),{height:n,width:c,oa:e,xa:r,ya:u}}function LG(e){var t=!1,n=[],r=e.find(function(E){return E.type==7}),u=!1;e=m(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;var f=!1;switch(c.type){case 1:f=u=!0;var h=c.data;r&&4<h.length&&(h=ze(new xn(h)),h===2||h===4||h===7||h===9)&&(t=!0);break;case 5:t=f=u=!0;break;case 6:f=!0;break;case 7:f=!0;break;case 8:f=!0;break;case 9:u=f=!0;break;case 12:f=!0;break;default:f=!1}u&&f&&(f=c.fullData.byteLength,h=new Uint8Array(4),h[0]=f>>24&255,h[1]=f>>16&255,h[2]=f>>8&255,h[3]=f&255,n.push(h),n.push(c.fullData))}return n.length?{data:li.apply(Oi,T(n)),jd:t}:null}var kG=[100,110,122,244,44,83,86,118,128,138,139,134];function FG(e){if(!e.length)return null;var t=e.find(function(f){return f.type==32}),n=e.find(function(f){return f.type==33}),r=e.find(function(f){return f.type==34});if(!t||!n||!r)return null;var u=UG(t.fullData);e=BG(n.fullData);var c=jG(r.fullData);return t=ZG(t.fullData,n.fullData,r.fullData,{jf:u.jf,Gf:u.Gf,Qe:e.Qe,Re:e.Re,Ke:e.Ke,Pe:e.Pe,Le:e.Le,Me:e.Me,Ne:e.Ne,Oe:e.Oe,Ee:e.Ee,Fe:e.Fe,Ge:e.Ge,He:e.He,Ie:e.Ie,Je:e.Je,Be:e.Be,be:e.be,Ae:e.Ae,ze:e.ze,ye:e.ye,pf:c.pf}),{height:e.height,width:e.width,oa:t,xa:e.pi,ya:e.oi}}function UG(e){var t=new xn(e,!0);return rt(t),rt(t),bt(t,4),bt(t,2),bt(t,6),e=bt(t,3),t=lt(t),{jf:e+1,Gf:t}}function BG(e){e=new xn(e,!0),rt(e),rt(e);var t=0,n=0,r=0,u=0;bt(e,4);var c=bt(e,3);lt(e);for(var f=bt(e,2),h=bt(e,1),E=bt(e,5),A=rt(e),k=rt(e),G=rt(e),te=rt(e),Y=rt(e),ve=rt(e),Le=rt(e),De=rt(e),qe=rt(e),Se=rt(e),Qe=rt(e),Ue=[],vt=[],Nt=0;Nt<c;Nt++)Ue.push(lt(e)),vt.push(lt(e));if(0<c)for(Nt=c;8>Nt;Nt++)bt(e,2);for(Nt=0;Nt<c;Nt++)Ue[Nt]&&bt(e,88),vt[Nt]&&rt(e);Lt(e),Ue=Lt(e),Ue==3&&bt(e,1),vt=Lt(e),Nt=Lt(e),lt(e)&&(t+=Lt(e),n+=Lt(e),r+=Lt(e),u+=Lt(e));var Vt=Lt(e),Bt=Lt(e),_t=Lt(e);if(lt(e))for(var Zt=0;Zt<=c;Zt++)Lt(e),Lt(e),Lt(e);else Lt(e),Lt(e),Lt(e);if(Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),lt(e)&&lt(e))for(Zt=0;4>Zt;Zt++)for(var ln=0;ln<(Zt===3?2:6);ln++)if(lt(e)){var pn=Math.min(64,1<<4+(Zt<<1));1<Zt&&On(e);for(var Ln=0;Ln<pn;Ln++)On(e)}else Lt(e);for(lt(e),lt(e),lt(e)&&(rt(e),Lt(e),Lt(e),lt(e)),Zt=Lt(e),pn=ln=0;pn<Zt;pn++)if(Ln=!1,pn!==0&&(Ln=lt(e)),Ln){pn===Zt&&Lt(e),lt(e),Lt(e);for(var Mn=Ln=0;Mn<=ln;Mn++){var qn=lt(e),Yn=!1;qn||(Yn=lt(e)),(qn||Yn)&&Ln++}ln=Ln}else{for(Mn=Lt(e),Ln=Lt(e),ln=Mn+Ln,qn=0;qn<Mn;qn++)Lt(e),lt(e);for(Mn=0;Mn<Ln;Mn++)Lt(e),lt(e)}if(lt(e))for(Zt=Lt(e),ln=0;ln<Zt;ln++){for(pn=0;pn<_t+4;pn++)bt(e,1);bt(e,1)}if(Zt=_t=1,ln=0,lt(e),lt(e),lt(e)){if(lt(e)&&(pn=rt(e),Ln=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Mn=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<pn&&16>=pn?(_t=Ln[pn-1],Zt=Mn[pn-1]):pn===255&&(_t=bt(e,16),Zt=bt(e,16))),lt(e)&&lt(e),lt(e)&&(bt(e,3),lt(e),lt(e)&&(rt(e),rt(e),rt(e))),lt(e)&&(Lt(e),Lt(e)),lt(e),lt(e),lt(e),(pn=lt(e))&&(Lt(e),Lt(e),Lt(e),Lt(e)),lt(e)&&(bt(e,32),bt(e,32),lt(e)&&Lt(e),lt(e)))for(Mn=!1,pn=lt(e),Ln=lt(e),(pn||Ln)&&((Mn=lt(e))&&(rt(e),bt(e,5),lt(e),bt(e,5)),bt(e,4),bt(e,4),Mn&&bt(e,4),bt(e,5),bt(e,5),bt(e,5)),qn=0;qn<=c;qn++){var Kn=!0;Yn=1,lt(e)||(Kn=lt(e));var xr=!1;if(Kn?Lt(e):xr=lt(e),xr||(Yn=Lt(e)+1),pn){for(Kn=0;Kn<Yn;Kn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));lt(e)}if(Ln){for(Kn=0;Kn<Yn;Kn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));lt(e)}}lt(e)&&(lt(e),lt(e),lt(e),ln=Lt(e),Lt(e),Lt(e),Lt(e),Lt(e))}return{Ke:Qe,Qe:f,Re:h,Pe:E,Le:A,Me:k,Ne:G,Oe:te,Ee:Y,Fe:ve,Ge:Le,He:De,Ie:qe,Je:Se,be:ln,Be:0,Ae:Ue,ze:Vt,ye:Bt,width:vt-(t+n)*(Ue===1||Ue===2?2:1),height:Nt-(r+u)*(Ue===1?2:1),pi:_t,oi:Zt}}function jG(e){var t=new xn(e,!0);rt(t),rt(t),Lt(t),Lt(t),lt(t),lt(t),bt(t,3),lt(t),lt(t),Lt(t),Lt(t),On(t),lt(t),lt(t),lt(t)&&Lt(t),On(t),On(t),lt(t),lt(t),lt(t),lt(t),e=lt(t),t=lt(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{pf:n}}function ZG(e,t,n,r){var u=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return u[0]=1,u[1]=(r.Qe&3)<<6|(r.Re?1:0)<<5|r.Pe&31,u[2]=r.Le,u[3]=r.Me,u[4]=r.Ne,u[5]=r.Oe,u[6]=r.Ee,u[7]=r.Fe,u[8]=r.Ge,u[9]=r.He,u[10]=r.Ie,u[11]=r.Je,u[12]=r.Ke,u[13]=240|(r.be&3840)>>8,u[14]=r.be&255,u[15]=252|r.pf&3,u[16]=252|r.Ae&3,u[17]=248|r.ze&7,u[18]=248|r.ye&7,u[19]=0,u[20]=0,u[21]=(r.Be&3)<<6|(r.jf&7)<<3|(r.Gf?1:0)<<2|3,u[22]=3,u[23]=160,u[24]=0,u[25]=1,u[26]=(e.byteLength&65280)>>8,u[27]=(e.byteLength&255)>>0,u.set(e,28),u[23+(5+e.byteLength)]=161,u[e.byteLength+29]=0,u[e.byteLength+30]=1,u[e.byteLength+31]=(t.byteLength&65280)>>8,u[e.byteLength+32]=(t.byteLength&255)>>0,u.set(t,e.byteLength+33),u[23+(e.byteLength+10+t.byteLength)]=162,u[e.byteLength+10+t.byteLength+24]=0,u[e.byteLength+10+t.byteLength+25]=1,u[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,u[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,u.set(n,e.byteLength+10+t.byteLength+28),u}function py(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(n!==1&&u!==0&&u!==15&&c!==3){var f=e[t+3]>>6;u=1e3*GG[14*(n===3?3-r:r===3?3:4)+u-1],c=qG[3*(n===3?0:n===2?1:2)+c],n=HG[n][r];var h=KG[r],E=Math.floor(n*u/c+(e[t+2]>>1&1))*h,A=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(A=A?parseInt(A[1],10):0)&&87>=A&&r===2&&224e3<=u&&f===0&&(e[t+3]|=128),{sampleRate:c,channelCount:f===3?1:2,U:E,ni:8*n*h}}return null}function tP(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function nP(e,t){if(t+1<e.length&&tP(e,t)){var n=py(e,t),r=4;return n&&n.U&&(r=n.U),t+=r,t===e.length||t+1<e.length&&tP(e,t)}return!1}var GG=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],qG=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],HG=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],KG=[0,1,1,4];function is(e){this.i=e,this.h=0,this.g=new Map}g=is.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){n=Qn(e);for(var u=Nn(n).length;u<n.length&&!nP(n,u);u++);var c;for(e=[];u<n.length;){var f=py(n,u);if(!f)return Promise.reject(new pt(2,3,3018));c||(c=f),u+f.U<=n.length&&e.push({data:n.subarray(u,u+f.U),size:f.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),u+=f.U}return c?(n=9e4*c.ni/c.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:c.sampleRate,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:n,Ra:e},stream:t},c=new bd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Cd(c),this.g.set(t.id,r)),t=Lp(c),this.h++,t=li(r,t),Promise.resolve(t)):Promise.reject(new pt(2,3,3018))},re("shaka.transmuxer.Mp3Transmuxer",is),is.prototype.transmux=is.prototype.transmux,is.prototype.getOriginalMimeType=is.prototype.getOriginalMimeType,is.prototype.convertCodecs=is.prototype.convertCodecs,is.prototype.isSupported=is.prototype.isSupported,is.prototype.destroy=is.prototype.destroy,wo("audio/mpeg",function(){return new is("audio/mpeg")},Ci);function os(e){this.h=e,this.g=null}g=os.prototype,g.destroy=function(){},g.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Do(e).split(","),n=Co("audio",t);return t=Co("video",t),!n||t||Ia(n)!="mp3"?!1:Ot(this.convertCodecs("audio",e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n,r,u){if(this.g?this.g.clearData():this.g=new Ve,e=Qn(e),e=this.g.parse(e),e.bd().audio!="mp3"||u!="audio")return Promise.reject(new pt(2,3,3018));for(u=new Uint8Array([]),e=m(e.Fb()),t=e.next();!t.done;t=e.next())if(t=t.value.data)for(n=0;n<t.length;)(r=py(t,n))?(n+r.U<=t.length&&(u=li(u,t.subarray(n,n+r.U))),n+=r.U):n++;return Promise.resolve(u)},re("shaka.transmuxer.MpegTsTransmuxer",os),os.prototype.transmux=os.prototype.transmux,os.prototype.getOriginalMimeType=os.prototype.getOriginalMimeType,os.prototype.convertCodecs=os.prototype.convertCodecs,os.prototype.isSupported=os.prototype.isSupported,os.prototype.destroy=os.prototype.destroy,wo("video/mp2t",function(){return new os("video/mp2t")},Al);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function La(e){this.h=e,(this.g=Q_.get("ISOBoxer")())&&VG(this)}function VG(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==zG[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}g=La.prototype,g.destroy=function(){},g.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.replace("mss/","")},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n){if(!n)return Promise.resolve(Qn(e));if(!t.mssPrivateData)return Promise.reject(new pt(2,3,3020));try{var r,u=this.g.parseBuffer(e),c=u.fetch("tfhd");c.track_ID=t.id+1;var f=u.fetch("tfdt"),h=u.fetch("traf");f===null&&(f=this.g.createFullBox("tfdt",h,c),f.version=1,f.flags=0,f.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var E=u.fetch("trun"),A=u.fetch("tfxd");A&&A._parent.boxes.splice(A._parent.boxes.indexOf(A),1);var k=u.fetch("tfrf");k&&k._parent.boxes.splice(k._parent.boxes.indexOf(k),1);var G=u.fetch("sepiff");if(G!==null){G.type="senc",G.usertype=void 0;var te=u.fetch("saio");if(te===null){te=this.g.createFullBox("saio",h),te.version=0,te.flags=0,te.entry_count=1,te.offset=[0];var Y=this.g.createFullBox("saiz",h);if(Y.version=0,Y.flags=0,Y.sample_count=G.sample_count,Y.default_sample_info_size=0,Y.sample_info_size=[],G.flags&2)for(r=0;r<G.sample_count;r+=1)Y.sample_info_size[r]=10+6*G.entry[r].NumberOfEntries;else Y.default_sample_info_size=8}}c.flags&=16777214,c.flags|=131072,E.flags|=1;var ve=u.fetch("moof");E.data_offset=ve.getLength()+8;var Le=u.fetch("saio");Le!==null&&(Le.offset[0]=rP(ve,"traf")+rP(h,"senc")+16);var De=Qn(u.write());return Promise.resolve(De)}catch(qe){return qe instanceof pt?Promise.reject(qe):Promise.reject(new pt(2,3,3022))}};function rP(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}re("shaka.transmuxer.MssTransmuxer",La),La.prototype.transmux=La.prototype.transmux,La.prototype.getOriginalMimeType=La.prototype.getOriginalMimeType,La.prototype.convertCodecs=La.prototype.convertCodecs,La.prototype.isSupported=La.prototype.isSupported,La.prototype.destroy=La.prototype.destroy;var zG=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);wo("mss/audio/mp4",function(){return new La("mss/audio/mp4")},Ci),wo("mss/video/mp4",function(){return new La("mss/video/mp4")},Ci);function as(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}g=as.prototype,g.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},g.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Do(n).split(",");return n=Co("audio",r),r=Co("video",r),n&&(n=Ia(n),!YG.includes(n))||r&&(n=Ia(r),!WG.includes(n))?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Do(t).replace("mp4a.40.34","mp3").split(",").map(this.kh).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},g.kh=function(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}return e},g.getOriginalMimeType=function(){return this.l},g.transmux=function(e,t,n,r,u){var c=Qn(e);if(u=="audio"&&!Zr(c)){for(var f=Nn(c),h=f.length;h<c.length;h++)if(nP(c,h))return Promise.reject(new pt(2,3,3018));for(h=f.length;h<c.length;h++)if(QD(c,h))return this.h||(this.h=new Oa("audio/aac")),this.h.transmux(e,t,n,r,u);return Promise.reject(new pt(2,3,3018))}this.j?this.j.clearData():this.j=new Ve;var E=this.j.parse(c),A=[],k=E.bd();try{var G=null;if(u=="video"){switch(k.video){case"avc":var te=[],Y=null,ve=[],Le=E.xc();if(!Le.length)throw new pt(2,3,3023);for(var De=0;De<Le.length;De++){var qe=Le[De],Se=qe.nalus;ve.push.apply(ve,T(Se));var Qe=LG(Se);if(Qe){Y==null&&(Y=qe.dts);var Ue=void 0;Ue=De+1<Le.length?(Le[De+1].dts||0)-(qe.dts||0):1<Le.length?(qe.dts||0)-(Le[De-1].dts||0):9e4*(n.endTime-n.startTime),te.push({data:Qe.data,size:Qe.data.byteLength,duration:Ue,Ta:Math.round((qe.pts||0)-(qe.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:Qe.jd?2:1,Wa:Qe.jd?0:1}})}}var vt=OG(ve);if(!vt||Y==null)throw new pt(2,3,3018);t.height=vt.height,t.width=vt.width,G={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Sa:[],ga:new Uint8Array([]),oa:vt.oa,xa:vt.xa,ya:vt.ya,data:{jb:this.g,baseMediaDecodeTime:Y,Ra:te},stream:t};break;case"hvc":var Nt=[],Vt=null,Bt=[],_t=E.xc();if(!_t.length)throw new pt(2,3,3023);for(var Zt=0;Zt<_t.length;Zt++){var ln=_t[Zt],pn=ln.nalus;Bt.push.apply(Bt,T(pn));for(var Ln=!1,Mn=[],qn=!1,Yn=m(pn),Kn=Yn.next();!Kn.done;Kn=Yn.next()){var xr=Kn.value;switch(xr.type){case 1:case 0:var di=qn=!0;break;case 19:case 20:case 21:Ln=di=qn=!0;break;case 32:di=!0;break;case 33:di=!0;break;case 34:di=!0;break;case 35:qn=di=!0;break;case 39:case 40:di=!0;break;default:di=!1}if(qn&&di){var ki=xr.fullData.byteLength,ci=new Uint8Array(4);ci[0]=ki>>24&255,ci[1]=ki>>16&255,ci[2]=ki>>8&255,ci[3]=ki&255,Mn.push(ci),Mn.push(xr.fullData)}}var mi=Mn.length?{data:li.apply(Oi,T(Mn)),jd:Ln}:null;if(mi){Vt==null&&ln.dts!=null&&(Vt=ln.dts);var Gr=void 0;Gr=Zt+1<_t.length?(_t[Zt+1].dts||0)-(ln.dts||0):1<_t.length?(ln.dts||0)-(_t[Zt-1].dts||0):9e4*(n.endTime-n.startTime),Nt.push({data:mi.data,size:mi.data.byteLength,duration:Gr,Ta:Math.round((ln.pts||0)-(ln.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:mi.jd?2:1,Wa:mi.jd?0:1}})}}var ho=FG(Bt);if(!ho||Vt==null)throw new pt(2,3,3018);t.height=ho.height,t.width=ho.width,G={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Sa:[],ga:new Uint8Array([]),oa:ho.oa,xa:ho.xa,ya:ho.ya,data:{jb:this.g,baseMediaDecodeTime:Vt,Ra:Nt},stream:t}}G&&(A.push(G),G=null)}if(u=="audio"){switch(k.audio){case"aac":for(var Fo=[],ai,zs=null,$c=m(E.Fb()),Xc=$c.next();!Xc.done;Xc=$c.next()){var Md=Xc.value,ll=Md.data;if(ll){var Ys=0;if(ai=XD(ll,Ys),!ai)throw new pt(2,3,3018);for(t.audioSamplingRate=ai.sampleRate,t.channelsCount=ai.channelCount,zs==null&&Md.pts!==null&&(zs=Md.pts);Ys<ll.length;){var cl=$D(ll,Ys);if(cl){var Vl=cl.Qd+cl.U;Ys+Vl<=ll.length&&Fo.push({data:ll.subarray(Ys+cl.Qd,Ys+Vl),size:cl.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Ys+=Vl}else Ys++}}}if(!ai||zs==null){if(!E.xc().length)throw new pt(2,3,3018);zs=9e4*n.startTime;var Dd=Co("audio",t.codecs.split(","));if(!Dd||!t.channelsCount||!t.audioSamplingRate)throw new pt(2,3,3018);ai={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,Ea:Dd};var Pd=DG(Dd,t.channelsCount);if(!Pd)throw new pt(2,3,3018);for(var my=zs+9e4*(n.endTime-n.startTime),Od=zs;Od<my;)Fo.push({data:Pd,size:Pd.byteLength,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Od+=1024/ai.sampleRate*9e4}var Yp=ai.sampleRate,vy=zs/9e4*Yp;G={id:t.id,type:"audio",codecs:ai.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Yp,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:vy,Ra:Fo},stream:t};break;case"ac3":for(var Ss=[],yy=0,KT=new Uint8Array([]),Ey=null,gP=m(E.Fb()),VT=gP.next();!VT.done;VT=gP.next()){var zT=VT.value,YT=zT.data;Ey==null&&zT.pts!==null&&(Ey=zT.pts);for(var Ld=0;Ld<YT.length;){var zl=JD(YT,Ld);zl?(t.audioSamplingRate=zl.sampleRate,t.channelsCount=zl.channelCount,yy=zl.sampleRate,KT=zl.ga,Ss.push({data:YT.subarray(Ld,Ld+zl.U),size:zl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Ld+=zl.U):Ld++}}if(yy==0||KT.byteLength==0||Ey==null)throw new pt(2,3,3018);var QG=Ey/9e4*yy;G={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:yy,duration:r,Sa:[],ga:KT,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:QG,Ra:Ss},stream:t};break;case"ec3":for(var mP=[],_y=0,WT=new Uint8Array([]),Ty=null,vP=m(E.Fb()),$T=vP.next();!$T.done;$T=vP.next()){var XT=$T.value,QT=XT.data;Ty==null&&XT.pts!==null&&(Ty=XT.pts);for(var kd=0;kd<QT.length;){var Yl=eP(QT,kd);Yl?(t.audioSamplingRate=Yl.sampleRate,t.channelsCount=Yl.channelCount,_y=Yl.sampleRate,WT=Yl.ga,mP.push({data:QT.subarray(kd,kd+Yl.U),size:Yl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),kd+=Yl.U):kd++}}if(_y==0||WT.byteLength==0||Ty==null)throw new pt(2,3,3018);var JG=Ty/9e4*_y;G={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:_y,duration:r,Sa:[],ga:WT,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:JG,Ra:mP},stream:t};break;case"mp3":for(var yP=[],Sy,wy=null,EP=m(E.Fb()),JT=EP.next();!JT.done;JT=EP.next()){var e1=JT.value,Wp=e1.data;if(Wp){wy==null&&e1.pts!==null&&(wy=e1.pts);for(var Qc=0;Qc<Wp.length;){var Fd=py(Wp,Qc);Fd?(Sy||(Sy=Fd),Qc+Fd.U<=Wp.length&&yP.push({data:Wp.subarray(Qc,Qc+Fd.U),size:Fd.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Qc+=Fd.U):Qc++}}}if(!Sy||wy==null)throw new pt(2,3,3018);var _P=Sy.sampleRate,eq=wy/9e4*_P;G={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:_P,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:eq,Ra:yP},stream:t};break;case"opus":var TP=[],Ay=null,Su=E.F;if(!Su)throw new pt(2,3,3018);var Uo=[];switch(Su.Zg){case 1:case 2:Uo=[0];break;case 0:Uo=[255,1,1,0,1];break;case 128:Uo=[255,2,0,0,1];break;case 3:Uo=[1,2,1,0,2,1];break;case 4:Uo=[1,2,2,0,1,2,3];break;case 5:Uo=[1,3,2,0,4,1,2,3];break;case 6:Uo=[1,4,2,0,4,1,2,3,5];break;case 7:Uo=[1,4,2,0,4,1,2,3,5,6];break;case 8:Uo=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Uo=[1,1,2,0,1];break;case 131:Uo=[1,1,3,0,1,2];break;case 132:Uo=[1,1,4,0,1,2,3];break;case 133:Uo=[1,1,5,0,1,2,3,4];break;case 134:Uo=[1,1,6,0,1,2,3,4,5];break;case 135:Uo=[1,1,7,0,1,2,3,4,5,6];break;case 136:Uo=[1,1,8,0,1,2,3,4,5,6,7]}for(var SP=new Uint8Array([0,Su.channelCount,0,0,Su.sampleRate>>>24&255,Su.sampleRate>>>17&255,Su.sampleRate>>>8&255,Su.sampleRate>>>0&255,0,0].concat(T(Uo))),wP=Su.sampleRate,AP=m(E.Fb()),t1=AP.next();!t1.done;t1=AP.next()){var n1=t1.value,Ud=n1.data;Ay==null&&n1.pts!==null&&(Ay=n1.pts);for(var $p=0;$p<Ud.length;){for(var tq=(Ud[$p+1]&16)!==0,nq=(Ud[$p+1]&8)!==0,fl=$p+2,Iy=0;Ud[fl]===255;)Iy+=255,fl+=1;Iy+=Ud[fl],fl+=1,fl+=tq?2:0,fl+=nq?2:0;var IP=Ud.slice(fl,fl+Iy);TP.push({data:IP,size:IP.byteLength,duration:960,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),$p=fl+Iy}}if(SP.byteLength==0||Ay==null)throw new pt(2,3,3018);t.audioSamplingRate=Su.sampleRate,t.channelsCount=Su.channelCount;var rq=Ay/9e4*wP;G={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:wP,duration:r,Sa:[],ga:SP,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:rq,Ra:TP},stream:t}}G&&(A.push(G),G=null)}}catch(i1){return i1&&i1.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(i1)}if(!A.length)return Promise.reject(new pt(2,3,3018));var bP=new bd(A);if(this.i.has(t.id))var r1=this.i.get(t.id);else r1=Cd(bP),this.i.set(t.id,r1);var iq=Lp(bP);this.g++;var oq=li(r1,iq);return Promise.resolve(oq)},re("shaka.transmuxer.TsTransmuxer",as),as.prototype.transmux=as.prototype.transmux,as.prototype.getOriginalMimeType=as.prototype.getOriginalMimeType,as.prototype.convertCodecs=as.prototype.convertCodecs,as.prototype.isSupported=as.prototype.isSupported,as.prototype.destroy=as.prototype.destroy;var YG=["aac","ac-3","ec-3","mp3","opus"],WG=["avc","hevc"];wo("video/mp2t",function(){return new as("video/mp2t")},su);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function iP(){}var Vp;function oP(){Vp?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Vp=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=$G):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function $G(e,t){var n=this,r;return xe(function(u){return u.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),N(u,Vp.call(n,e,t),2)):(r=u.h,hP(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Vp,u.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=aP,u.return(aP.call(n,e,t))))})}function aP(e,t){var n=this,r,u,c,f,h,E,A,k,G,te;return xe(function(Y){if(Y.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=dP(e),u=[],c=m(t),f=c.next();!f.done;f=c.next())h=f.value,E=sP(h.videoCapabilities,r),A=sP(h.audioCapabilities,r),h.videoCapabilities&&h.videoCapabilities.length&&!E.length||h.audioCapabilities&&h.audioCapabilities.length&&!A.length||(k=Object.assign({},h),k.videoCapabilities=E,k.audioCapabilities=A,u.push(k));if(!u.length)throw G=Error("Unsupported keySystem or supportedConfigurations."),G.name="NotSupportedError",G.code=DOMException.NOT_SUPPORTED_ERR,G;return N(Y,Vp.call(n,e,u),2)}return te=Y.h,Y.return(new gy(te,r))})}function sP(e,t){return e&&e.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==t})}re("EmeEncryptionSchemePolyfill",iP),iP.install=oP;function uP(){}var zp;function lP(){zp?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(zp=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=XG):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function XG(e){var t=this,n,r,u;return xe(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),N(c,zp.call(t,e),2);case 2:if(n=c.h,!e.keySystemConfiguration)return c.return(n);if((r=n.keySystemAccess)&&hP(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=zp,c.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=cP,r){c.u(3);break}return u=n,N(c,fP(e),4);case 4:return u.keySystemAccess=c.h,c.return(n);case 3:return c.return(cP.call(t,e))}})}function cP(e){var t=this,n,r,u,c,f,h,E,A;return xe(function(k){switch(k.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(r=e.keySystemConfiguration,u=r.keySystem,c=r.audio&&r.audio.encryptionScheme,f=r.video&&r.video.encryptionScheme,n=dP(u),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},c&&c!=n||f&&f!=n)?k.return(h):N(k,zp.call(t,e),2);case 2:if(E=k.h,E.keySystemAccess){E.keySystemAccess=new gy(E.keySystemAccess,n),k.u(3);break}if(!e.keySystemConfiguration){k.u(3);break}return A=E,N(k,fP(e),5);case 5:A.keySystemAccess=k.h;case 3:return k.return(E)}})}function fP(e){var t,n;return xe(function(r){if(r.g==1){var u=e.keySystemConfiguration,c=[],f=[];return u.audio&&c.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType}),u.video&&f.push({robustness:u.video.robustness||"",contentType:e.video.contentType}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},c.length&&(u.audioCapabilities=c),f.length&&(u.videoCapabilities=f),t=u,N(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}re("McEncryptionSchemePolyfill",uP),uP.install=lP;function gy(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}gy.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},gy.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function dP(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function hP(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function HT(){}function pP(){oP(),lP()}re("EncryptionSchemePolyfills",HT),HT.install=pP,typeof b<"u"&&b.exports&&(b.exports=HT)}).call(l,i,i,void 0);for(var d in l.shaka)o[d]=l.shaka[d]})()})(x4);const Hy=mb(x4),of=class of{static async setup_stream(i,l,d){if(this.licenseUrl=l,this.customDrmHeaders=d,!i.mediaKeys)try{const p=await this.get_media_keys(i);if(p){await i.setMediaKeys(p.mediaKey);const S=p.mediaKey.createSession();this.on_handle_license_messageEvent=async b=>{await this.handle_license_messageEvent(p.mediaKey,S,b)},this.on_handle_encrypted_event=async b=>{await this.handle_encrypted_event(p,S,b)},S.addEventListener("message",this.on_handle_license_messageEvent),i.addEventListener("encrypted",this.on_handle_encrypted_event)}}catch(p){console.error("### DRMManager.setupStream error:",p)}}static async create_mediaKey_sessions(i){for(let l=0;l<i;l++){const p=await(await navigator.requestMediaKeySystemAccess("com.widevine.alpha",this.DRM_CONFIG)).createMediaKeys();this.mediaKey_pool.push({id:this.mediaKey_pool.length+1,mediaKey:p,htmlMediaElement:null,isInitialized:!1})}}static async release_mediaKeys(i){const l=this.mediaKey_pool.find(d=>d.htmlMediaElement===i);this.mediaKey_pool.length>0&&l&&(await i.setMediaKeys(null),l.htmlMediaElement=null,l.isInitialized=!1)}static get is_prepared(){return this.mediaKey_pool.length>1}static get_mediaKey_id(i){const l=this.mediaKey_pool.find(d=>d.mediaKey===i);return l?l.id:null}static async get_media_keys(i){let l=this.mediaKey_pool.find(d=>d.htmlMediaElement===i);if(l)return l;if((this.mediaKey_pool.length<=0||this.mediaKey_pool.every(d=>d.htmlMediaElement))&&await this.create_mediaKey_sessions(1),l=this.mediaKey_pool.find(d=>!d.htmlMediaElement),l)return l.htmlMediaElement=i,l;throw new Error("No media keys available")}static async handle_license_messageEvent(i,l,d){try{const p=d.message.byteLength;console.log(p,"byteLength");let S;p===2?S=p.toString():S="".concat(this.get_mediaKey_id(i),"-").concat(p);let b;this.license_cache.has(S)?(console.log("using cached licence"),b=this.license_cache.get(S)):(b=await(await fetch(this.licenseUrl,{method:"POST",body:d.message,headers:{"Content-Type":"application/octet-stream",...this.customDrmHeaders}})).arrayBuffer(),b?this.license_cache.set(S,b):console.error("License response is null")),b?await l.update(b):console.error("License not found in cache and could not be fetched")}catch(p){console.error("Error during license acquisition: ".concat(p))}}static async handle_encrypted_event(i,l,d){if(d.initDataType&&d.initData)try{if(!i.isInitialized){i.isInitialized=!0;const p=this.mediaKey_pool.findIndex(S=>S.id===i.id);p!==-1&&(this.mediaKey_pool[p]=i),await l.generateRequest(d.initDataType,d.initData)}}catch(p){console.error("Failed to generate a license request: ".concat(p))}else console.error("Encrypted event is missing initData or initDataType")}};of.licenseUrl="",of.customDrmHeaders={},of.license_cache=new Map,of.mediaKey_pool=[],of.DRM_CONFIG=[{keySystem:"com.widevine.alpha",initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"'},{contentType:'video/mp4; codecs="avc1.64001f"'},{contentType:'video/mp4; codecs="avc1.64001e"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}],sessionTypes:["temporary"],persistentState:"optional",distinctiveIdentifier:"optional"}];let rb=of;class iz extends N4{constructor(i){var l;super(i),this.name="ShakaEngine",this.addPolicyToRequests=(d,p)=>{switch(d){case Hy.net.NetworkingEngine.RequestType.MANIFEST:case Hy.net.NetworkingEngine.RequestType.SEGMENT:if(!this.options.policyQuery||!this.options.policyQuery.startsWith("?"))break;p.uris[0]+=this.options.policyQuery;break;case Hy.net.NetworkingEngine.RequestType.LICENSE:if(!this.options.customLicenceRequestHeaders)break;Object.entries(this.options.customLicenceRequestHeaders).forEach(([S,b])=>{p.headers[S]=b});break}},this.addPolicyToRequests=this.addPolicyToRequests.bind(this),this.player=new Hy.Player,this.options.widevineLicenseUrl&&this.player.configure({drm:{servers:{"com.widevine.alpha":this.options.keepProtectionData===!1?this.options.widevineLicenseUrl:" "}},streaming:{bufferingGoal:120,rebufferingGoal:60,bufferBehind:0}}),(l=this.player.getNetworkingEngine())==null||l.registerRequestFilter(this.addPolicyToRequests)}destroy(){this.player&&this.player.destroy(),super.destroy()}async load(i){var l;if(this.player&&i){if(this.options.widevineLicenseUrl&&this.options.keepProtectionData!==!1)try{await this.player.unload(),await rb.setup_stream(this.options.element,this.options.widevineLicenseUrl,(l=this.options.customLicenceRequestHeaders)!=null?l:{})}catch(d){console.log(d)}await this.player.attach(this.options.element),await this.player.load(i,void 0)}}}class oz extends If{constructor(i){super(),this.options=i,this.options.preferredTech==="shaka"?this.engine=new iz(i):this.engine=new rz(i),this.engine.onAny(this.propagateEvent.bind(this))}get playerEngine(){return this.engine}get videoElement(){return this.engine.video}propagateEvent(i,l){this.emit(i,l)}destroy(){this.engine.destroy()}get stats(){return this.engine.getStats()}async load(i,l){this.currentSource=i,await this.engine.load(i,l)}}class az extends If{constructor(i){var l;super(),this.options=i,this._eventsEmitted=!1,this.eventClock=i.eventClock,this.containerElement=i.containerElement,this.videoElement=document.createElement("video"),(l=document.querySelector("video"))==null||l.remove(),this.containerElement.appendChild(this.videoElement),this.player=new oz({autoPlay:!1,...i.playerOptions,element:this.videoElement})}get currentSource(){var i;return(i=this.player)==null?void 0:i.currentSource}get currentCamera(){return this._currentCamera}get stats(){var i;return(i=this.player)==null?void 0:i.engine.getStats()}logPlayerStuff(){console.log("Bitrate",this.player.engine.video.getVideoPlaybackQuality()),console.log("Time",this.player.engine.video.currentTime),console.log("Paused",this.player.engine.video.paused)}propagateEvent(i,l){this.emit(i,l)}async load(i,l,d){return this.eventClock.loading=!0,new Promise((p,S)=>{try{if(this.eventClock.playerSyncer.disconnectMedia(),!this.player)throw new Error("Found no ImagienPlayer to use :( ");this._eventsEmitted||(this.player.onAny(this.propagateEvent.bind(this)),this._eventsEmitted=!0),this.player.load(l,d).then(()=>{this.player.once("playing",()=>{this._currentCamera=i,this.eventClock.playerSyncer.connectMediaElement(this.videoElement,((d==null?void 0:d.eventOffset)||0)-((d==null?void 0:d.reelOffset)||0))}),this.eventClock.loading=!1;const b=((d==null?void 0:d.eventOffset)||0)-((d==null?void 0:d.reelOffset)||0),g=this.eventClock.getExpectedPositionInSeconds()-b;Math.sign(g)<0?setTimeout(()=>{this.videoElement.play(),p()},Math.abs(g)*1e3):(this.videoElement.currentTime=g,this.videoElement.play(),p())})}catch(b){console.error(b),S(b)}})}async requestFullscreen(){await this.containerElement.requestFullscreen()}async exitFullscreen(){await document.exitFullscreen()}destroy(){super.destroy(),this.player.destroy()}}var ag=function(o){return o&&o.Math===Math&&o},Za=ag(typeof globalThis=="object"&&globalThis)||ag(typeof window=="object"&&window)||ag(typeof self=="object"&&self)||ag(typeof tu=="object"&&tu)||ag(typeof tu=="object"&&tu)||function(){return this}()||Function("return this")(),RC={},ps=function(o){try{return!!o()}catch(i){return!0}},sz=ps,vc=!sz(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),uz=ps,NC=!uz(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")}),lz=NC,Ky=Function.prototype.call,wl=lz?Ky.bind(Ky):function(){return Ky.apply(Ky,arguments)},M4={},D4={}.propertyIsEnumerable,P4=Object.getOwnPropertyDescriptor,cz=P4&&!D4.call({1:2},1);M4.f=cz?function(i){var l=P4(this,i);return!!l&&l.enumerable}:D4;var O4=function(o,i){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:i}},L4=NC,k4=Function.prototype,ib=k4.call,fz=L4&&k4.bind.bind(ib,ib),wa=L4?fz:function(o){return function(){return ib.apply(o,arguments)}},F4=wa,dz=F4({}.toString),hz=F4("".slice),fE=function(o){return hz(dz(o),8,-1)},pz=wa,gz=ps,mz=fE,DA=Object,vz=pz("".split),yz=gz(function(){return!DA("z").propertyIsEnumerable(0)})?function(o){return mz(o)==="String"?vz(o,""):DA(o)}:DA,dE=function(o){return o==null},Ez=dE,_z=TypeError,rm=function(o){if(Ez(o))throw new _z("Can't call method on "+o);return o},Tz=yz,Sz=rm,hE=function(o){return Tz(Sz(o))},PA=typeof document=="object"&&document.all,Ga=typeof PA>"u"&&PA!==void 0?function(o){return typeof o=="function"||o===PA}:function(o){return typeof o=="function"},wz=Ga,bh=function(o){return typeof o=="object"?o!==null:wz(o)},OA=Za,Az=Ga,Iz=function(o){return Az(o)?o:void 0},xC=function(o,i){return arguments.length<2?Iz(OA[o]):OA[o]&&OA[o][i]},bz=wa,U4=bz({}.isPrototypeOf),Cz=typeof navigator<"u"&&String(navigator.userAgent)||"",B4=Za,LA=Cz,$k=B4.process,Xk=B4.Deno,Qk=$k&&$k.versions||Xk&&Xk.version,Jk=Qk&&Qk.v8,eu,L0;Jk&&(eu=Jk.split("."),L0=eu[0]>0&&eu[0]<4?1:+(eu[0]+eu[1]));!L0&&LA&&(eu=LA.match(/Edge\/(\d+)/),(!eu||eu[1]>=74)&&(eu=LA.match(/Chrome\/(\d+)/),eu&&(L0=+eu[1])));var Rz=L0,eF=Rz,Nz=ps,xz=Za,Mz=xz.String,j4=!!Object.getOwnPropertySymbols&&!Nz(function(){var o=Symbol("symbol detection");return!Mz(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&eF&&eF<41}),Dz=j4,Z4=Dz&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Pz=xC,Oz=Ga,Lz=U4,kz=Z4,Fz=Object,G4=kz?function(o){return typeof o=="symbol"}:function(o){var i=Pz("Symbol");return Oz(i)&&Lz(i.prototype,Fz(o))},Uz=String,Bz=function(o){try{return Uz(o)}catch(i){return"Object"}},jz=Ga,Zz=Bz,Gz=TypeError,qz=function(o){if(jz(o))return o;throw new Gz(Zz(o)+" is not a function")},Hz=qz,Kz=dE,MC=function(o,i){var l=o[i];return Kz(l)?void 0:Hz(l)},kA=wl,FA=Ga,UA=bh,Vz=TypeError,zz=function(o,i){var l,d;if(i==="string"&&FA(l=o.toString)&&!UA(d=kA(l,o))||FA(l=o.valueOf)&&!UA(d=kA(l,o))||i!=="string"&&FA(l=o.toString)&&!UA(d=kA(l,o)))return d;throw new Vz("Can't convert object to primitive value")},q4={exports:{}},tF=Za,Yz=Object.defineProperty,DC=function(o,i){try{Yz(tF,o,{value:i,configurable:!0,writable:!0})}catch(l){tF[o]=i}return i},Wz=Za,$z=DC,nF="__core-js_shared__",rF=q4.exports=Wz[nF]||$z(nF,{});(rF.versions||(rF.versions=[])).push({version:"3.37.1",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var PC=q4.exports,iF=PC,OC=function(o,i){return iF[o]||(iF[o]=i||{})},Xz=rm,Qz=Object,H4=function(o){return Qz(Xz(o))},Jz=wa,eY=H4,tY=Jz({}.hasOwnProperty),yc=Object.hasOwn||function(i,l){return tY(eY(i),l)},nY=wa,rY=0,iY=Math.random(),oY=nY(1 .toString),K4=function(o){return"Symbol("+(o===void 0?"":o)+")_"+oY(++rY+iY,36)},aY=Za,sY=OC,oF=yc,uY=K4,lY=j4,cY=Z4,rh=aY.Symbol,BA=sY("wks"),fY=cY?rh.for||rh:rh&&rh.withoutSetter||uY,Cf=function(o){return oF(BA,o)||(BA[o]=lY&&oF(rh,o)?rh[o]:fY("Symbol."+o)),BA[o]},dY=wl,aF=bh,sF=G4,hY=MC,pY=zz,gY=Cf,mY=TypeError,vY=gY("toPrimitive"),yY=function(o,i){if(!aF(o)||sF(o))return o;var l=hY(o,vY),d;if(l){if(i===void 0&&(i="default"),d=dY(l,o,i),!aF(d)||sF(d))return d;throw new mY("Can't convert object to primitive value")}return i===void 0&&(i="number"),pY(o,i)},EY=yY,_Y=G4,V4=function(o){var i=EY(o,"string");return _Y(i)?i:i+""},TY=Za,uF=bh,ob=TY.document,SY=uF(ob)&&uF(ob.createElement),z4=function(o){return SY?ob.createElement(o):{}},wY=vc,AY=ps,IY=z4,Y4=!wY&&!AY(function(){return Object.defineProperty(IY("div"),"a",{get:function(){return 7}}).a!==7}),bY=vc,CY=wl,RY=M4,NY=O4,xY=hE,MY=V4,DY=yc,PY=Y4,lF=Object.getOwnPropertyDescriptor;RC.f=bY?lF:function(i,l){if(i=xY(i),l=MY(l),PY)try{return lF(i,l)}catch(d){}if(DY(i,l))return NY(!CY(RY.f,i,l),i[l])};var im={},OY=vc,LY=ps,W4=OY&&LY(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),kY=bh,FY=String,UY=TypeError,Rf=function(o){if(kY(o))return o;throw new UY(FY(o)+" is not an object")},BY=vc,jY=Y4,ZY=W4,Vy=Rf,cF=V4,GY=TypeError,jA=Object.defineProperty,qY=Object.getOwnPropertyDescriptor,ZA="enumerable",GA="configurable",qA="writable";im.f=BY?ZY?function(i,l,d){if(Vy(i),l=cF(l),Vy(d),typeof i=="function"&&l==="prototype"&&"value"in d&&qA in d&&!d[qA]){var p=qY(i,l);p&&p[qA]&&(i[l]=d.value,d={configurable:GA in d?d[GA]:p[GA],enumerable:ZA in d?d[ZA]:p[ZA],writable:!1})}return jA(i,l,d)}:jA:function(i,l,d){if(Vy(i),l=cF(l),Vy(d),jY)try{return jA(i,l,d)}catch(p){}if("get"in d||"set"in d)throw new GY("Accessors not supported");return"value"in d&&(i[l]=d.value),i};var HY=vc,KY=im,VY=O4,LC=HY?function(o,i,l){return KY.f(o,i,VY(1,l))}:function(o,i,l){return o[i]=l,o},$4={exports:{}},ab=vc,zY=yc,X4=Function.prototype,YY=ab&&Object.getOwnPropertyDescriptor,kC=zY(X4,"name"),WY=kC&&(function(){}).name==="something",$Y=kC&&(!ab||ab&&YY(X4,"name").configurable),XY={EXISTS:kC,PROPER:WY,CONFIGURABLE:$Y},QY=wa,JY=Ga,sb=PC,eW=QY(Function.toString);JY(sb.inspectSource)||(sb.inspectSource=function(o){return eW(o)});var tW=sb.inspectSource,nW=Za,rW=Ga,fF=nW.WeakMap,iW=rW(fF)&&/native code/.test(String(fF)),oW=OC,aW=K4,dF=oW("keys"),Q4=function(o){return dF[o]||(dF[o]=aW(o))},FC={},sW=iW,J4=Za,uW=bh,lW=LC,HA=yc,KA=PC,cW=Q4,fW=FC,hF="Object already initialized",ub=J4.TypeError,dW=J4.WeakMap,k0,Kg,F0,hW=function(o){return F0(o)?Kg(o):k0(o,{})},pW=function(o){return function(i){var l;if(!uW(i)||(l=Kg(i)).type!==o)throw new ub("Incompatible receiver, "+o+" required");return l}};if(sW||KA.state){var bu=KA.state||(KA.state=new dW);bu.get=bu.get,bu.has=bu.has,bu.set=bu.set,k0=function(o,i){if(bu.has(o))throw new ub(hF);return i.facade=o,bu.set(o,i),i},Kg=function(o){return bu.get(o)||{}},F0=function(o){return bu.has(o)}}else{var jd=cW("state");fW[jd]=!0,k0=function(o,i){if(HA(o,jd))throw new ub(hF);return i.facade=o,lW(o,jd,i),i},Kg=function(o){return HA(o,jd)?o[jd]:{}},F0=function(o){return HA(o,jd)}}var eB={set:k0,get:Kg,has:F0,enforce:hW,getterFor:pW},UC=wa,gW=ps,mW=Ga,zy=yc,lb=vc,vW=XY.CONFIGURABLE,yW=tW,tB=eB,EW=tB.enforce,_W=tB.get,pF=String,a0=Object.defineProperty,TW=UC("".slice),SW=UC("".replace),wW=UC([].join),AW=lb&&!gW(function(){return a0(function(){},"length",{value:8}).length!==8}),IW=String(String).split("String"),bW=$4.exports=function(o,i,l){TW(pF(i),0,7)==="Symbol("&&(i="["+SW(pF(i),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),l&&l.getter&&(i="get "+i),l&&l.setter&&(i="set "+i),(!zy(o,"name")||vW&&o.name!==i)&&(lb?a0(o,"name",{value:i,configurable:!0}):o.name=i),AW&&l&&zy(l,"arity")&&o.length!==l.arity&&a0(o,"length",{value:l.arity});try{l&&zy(l,"constructor")&&l.constructor?lb&&a0(o,"prototype",{writable:!1}):o.prototype&&(o.prototype=void 0)}catch(p){}var d=EW(o);return zy(d,"source")||(d.source=wW(IW,typeof i=="string"?i:"")),o};Function.prototype.toString=bW(function(){return mW(this)&&_W(this).source||yW(this)},"toString");var CW=$4.exports,RW=Ga,NW=im,xW=CW,MW=DC,nB=function(o,i,l,d){d||(d={});var p=d.enumerable,S=d.name!==void 0?d.name:i;if(RW(l)&&xW(l,S,d),d.global)p?o[i]=l:MW(i,l);else{try{d.unsafe?o[i]&&(p=!0):delete o[i]}catch(b){}p?o[i]=l:NW.f(o,i,{value:l,enumerable:!1,configurable:!d.nonConfigurable,writable:!d.nonWritable})}return o},rB={},DW=Math.ceil,PW=Math.floor,OW=Math.trunc||function(i){var l=+i;return(l>0?PW:DW)(l)},LW=OW,pE=function(o){var i=+o;return i!==i||i===0?0:LW(i)},kW=pE,FW=Math.max,UW=Math.min,BW=function(o,i){var l=kW(o);return l<0?FW(l+i,0):UW(l,i)},jW=pE,ZW=Math.min,iB=function(o){var i=jW(o);return i>0?ZW(i,9007199254740991):0},GW=iB,qW=function(o){return GW(o.length)},HW=hE,KW=BW,VW=qW,gF=function(o){return function(i,l,d){var p=HW(i),S=VW(p);if(S===0)return!o&&-1;var b=KW(d,S),g;if(o&&l!==l){for(;S>b;)if(g=p[b++],g!==g)return!0}else for(;S>b;b++)if((o||b in p)&&p[b]===l)return o||b||0;return!o&&-1}},zW={includes:gF(!0),indexOf:gF(!1)},YW=wa,VA=yc,WW=hE,$W=zW.indexOf,XW=FC,mF=YW([].push),oB=function(o,i){var l=WW(o),d=0,p=[],S;for(S in l)!VA(XW,S)&&VA(l,S)&&mF(p,S);for(;i.length>d;)VA(l,S=i[d++])&&(~$W(p,S)||mF(p,S));return p},BC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],QW=oB,JW=BC,e$=JW.concat("length","prototype");rB.f=Object.getOwnPropertyNames||function(i){return QW(i,e$)};var aB={};aB.f=Object.getOwnPropertySymbols;var t$=xC,n$=wa,r$=rB,i$=aB,o$=Rf,a$=n$([].concat),s$=t$("Reflect","ownKeys")||function(i){var l=r$.f(o$(i)),d=i$.f;return d?a$(l,d(i)):l},vF=yc,u$=s$,l$=RC,c$=im,f$=function(o,i,l){for(var d=u$(i),p=c$.f,S=l$.f,b=0;b<d.length;b++){var g=d[b];!vF(o,g)&&!(l&&vF(l,g))&&p(o,g,S(i,g))}},d$=ps,h$=Ga,p$=/#|\.prototype\./,om=function(o,i){var l=m$[g$(o)];return l===y$?!0:l===v$?!1:h$(i)?d$(i):!!i},g$=om.normalize=function(o){return String(o).replace(p$,".").toLowerCase()},m$=om.data={},v$=om.NATIVE="N",y$=om.POLYFILL="P",E$=om,Yy=Za,_$=RC.f,T$=LC,S$=nB,w$=DC,A$=f$,I$=E$,sB=function(o,i){var l=o.target,d=o.global,p=o.stat,S,b,g,w,F,R;if(d?b=Yy:p?b=Yy[l]||w$(l,{}):b=Yy[l]&&Yy[l].prototype,b)for(g in i){if(F=i[g],o.dontCallGetSet?(R=_$(b,g),w=R&&R.value):w=b[g],S=I$(d?g:l+(p?".":"#")+g,o.forced),!S&&w!==void 0){if(typeof F==typeof w)continue;A$(F,w)}(o.sham||w&&w.sham)&&T$(F,"sham",!0),S$(b,g,F,o)}},b$=bh,C$=fE,R$=Cf,N$=R$("match"),x$=function(o){var i;return b$(o)&&((i=o[N$])!==void 0?!!i:C$(o)==="RegExp")},M$=Cf,D$=M$("toStringTag"),uB={};uB[D$]="z";var P$=String(uB)==="[object z]",O$=P$,L$=Ga,s0=fE,k$=Cf,F$=k$("toStringTag"),U$=Object,B$=s0(function(){return arguments}())==="Arguments",j$=function(o,i){try{return o[i]}catch(l){}},Z$=O$?s0:function(o){var i,l,d;return o===void 0?"Undefined":o===null?"Null":typeof(l=j$(i=U$(o),F$))=="string"?l:B$?s0(i):(d=s0(i))==="Object"&&L$(i.callee)?"Arguments":d},G$=Z$,q$=String,gE=function(o){if(G$(o)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return q$(o)},H$=Rf,lB=function(){var o=H$(this),i="";return o.hasIndices&&(i+="d"),o.global&&(i+="g"),o.ignoreCase&&(i+="i"),o.multiline&&(i+="m"),o.dotAll&&(i+="s"),o.unicode&&(i+="u"),o.unicodeSets&&(i+="v"),o.sticky&&(i+="y"),i},K$=wl,V$=yc,z$=U4,Y$=lB,yF=RegExp.prototype,W$=function(o){var i=o.flags;return i===void 0&&!("flags"in yF)&&!V$(o,"flags")&&z$(yF,o)?K$(Y$,o):i},jC=wa,$$=H4,X$=Math.floor,zA=jC("".charAt),Q$=jC("".replace),YA=jC("".slice),J$=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,eX=/\$([$&'`]|\d{1,2})/g,cB=function(o,i,l,d,p,S){var b=l+o.length,g=d.length,w=eX;return p!==void 0&&(p=$$(p),w=J$),Q$(S,w,function(F,R){var y;switch(zA(R,0)){case"$":return"$";case"&":return o;case"`":return YA(i,0,l);case"'":return YA(i,b);case"<":y=p[YA(R,1,-1)];break;default:var v=+R;if(v===0)return F;if(v>g){var D=X$(v/10);return D===0?F:D<=g?d[D-1]===void 0?zA(R,1):d[D-1]+zA(R,1):F}y=d[v-1]}return y===void 0?"":y})},tX=sB,nX=wl,ZC=wa,EF=rm,rX=Ga,iX=dE,oX=x$,sg=gE,aX=MC,sX=W$,uX=cB,lX=Cf,cX=lX("replace"),fX=TypeError,WA=ZC("".indexOf);ZC("".replace);var _F=ZC("".slice),dX=Math.max;tX({target:"String",proto:!0},{replaceAll:function(i,l){var d=EF(this),p,S,b,g,w,F,R,y,v,D=0,m=0,T="";if(!iX(i)){if(p=oX(i),p&&(S=sg(EF(sX(i))),!~WA(S,"g")))throw new fX("`.replaceAll` does not allow non-global regexes");if(b=aX(i,cX),b)return nX(b,i,d,l)}for(g=sg(d),w=sg(i),F=rX(l),F||(l=sg(l)),R=w.length,y=dX(1,R),D=WA(g,w);D!==-1;)v=F?sg(l(w,D,g)):uX(w,g,D,[],void 0,l),T+=_F(g,m,D)+v,m=D+R,D=D+y>g.length?-1:WA(g,w,D+y);return m<g.length&&(T+=_F(g,m)),T}});var GC=ps,hX=Za,qC=hX.RegExp,HC=GC(function(){var o=qC("a","y");return o.lastIndex=2,o.exec("abcd")!==null}),pX=HC||GC(function(){return!qC("a","y").sticky}),gX=HC||GC(function(){var o=qC("^r","gy");return o.lastIndex=2,o.exec("str")!==null}),mX={BROKEN_CARET:gX,MISSED_STICKY:pX,UNSUPPORTED_Y:HC},fB={},vX=oB,yX=BC,EX=Object.keys||function(i){return vX(i,yX)},_X=vc,TX=W4,SX=im,wX=Rf,AX=hE,IX=EX;fB.f=_X&&!TX?Object.defineProperties:function(i,l){wX(i);for(var d=AX(l),p=IX(l),S=p.length,b=0,g;S>b;)SX.f(i,g=p[b++],d[g]);return i};var bX=xC,CX=bX("document","documentElement"),RX=Rf,NX=fB,TF=BC,xX=FC,MX=CX,DX=z4,PX=Q4,SF=">",wF="<",cb="prototype",fb="script",dB=PX("IE_PROTO"),$A=function(){},hB=function(o){return wF+fb+SF+o+wF+"/"+fb+SF},AF=function(o){o.write(hB("")),o.close();var i=o.parentWindow.Object;return o=null,i},OX=function(){var o=DX("iframe"),i="java"+fb+":",l;return o.style.display="none",MX.appendChild(o),o.src=String(i),l=o.contentWindow.document,l.open(),l.write(hB("document.F=Object")),l.close(),l.F},Wy,u0=function(){try{Wy=new ActiveXObject("htmlfile")}catch(i){}u0=typeof document<"u"?document.domain&&Wy?AF(Wy):OX():AF(Wy);for(var o=TF.length;o--;)delete u0[cb][TF[o]];return u0()};xX[dB]=!0;var LX=Object.create||function(i,l){var d;return i!==null?($A[cb]=RX(i),d=new $A,$A[cb]=null,d[dB]=i):d=u0(),l===void 0?d:NX.f(d,l)},kX=ps,FX=Za,UX=FX.RegExp,BX=kX(function(){var o=UX(".","s");return!(o.dotAll&&o.test("\n")&&o.flags==="s")}),jX=ps,ZX=Za,GX=ZX.RegExp,qX=jX(function(){var o=GX("(?<a>b)","g");return o.exec("b").groups.a!=="b"||"b".replace(o,"$<a>c")!=="bc"}),ih=wl,mE=wa,HX=gE,KX=lB,VX=mX,zX=OC,YX=LX,WX=eB.get,$X=BX,XX=qX,QX=zX("native-string-replace",String.prototype.replace),U0=RegExp.prototype.exec,db=U0,JX=mE("".charAt),eQ=mE("".indexOf),tQ=mE("".replace),XA=mE("".slice),hb=function(){var o=/a/,i=/b*/g;return ih(U0,o,"a"),ih(U0,i,"a"),o.lastIndex!==0||i.lastIndex!==0}(),pB=VX.BROKEN_CARET,pb=/()??/.exec("")[1]!==void 0,nQ=hb||pb||pB||$X||XX;nQ&&(db=function(i){var l=this,d=WX(l),p=HX(i),S=d.raw,b,g,w,F,R,y,v;if(S)return S.lastIndex=l.lastIndex,b=ih(db,S,p),l.lastIndex=S.lastIndex,b;var D=d.groups,m=pB&&l.sticky,T=ih(KX,l),U=l.source,x=0,_=p;if(m&&(T=tQ(T,"y",""),eQ(T,"g")===-1&&(T+="g"),_=XA(p,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&JX(p,l.lastIndex-1)!=="\n")&&(U="(?: "+U+")",_=" "+_,x++),g=new RegExp("^(?:"+U+")",T)),pb&&(g=new RegExp("^"+U+"$(?!\\s)",T)),hb&&(w=l.lastIndex),F=ih(U0,m?g:l,_),m?F?(F.input=XA(F.input,x),F[0]=XA(F[0],x),F.index=l.lastIndex,l.lastIndex+=F[0].length):l.lastIndex=0:hb&&F&&(l.lastIndex=l.global?F.index+F[0].length:w),pb&&F&&F.length>1&&ih(QX,F[0],g,function(){for(R=1;R<arguments.length-2;R++)arguments[R]===void 0&&(F[R]=void 0)}),F&&D)for(F.groups=y=YX(null),R=0;R<D.length;R++)v=D[R],y[v[0]]=F[v[1]];return F});var KC=db,rQ=sB,IF=KC;rQ({target:"RegExp",proto:!0,forced:/./.exec!==IF},{exec:IF});var iQ=NC,gB=Function.prototype,bF=gB.apply,CF=gB.call,oQ=typeof Reflect=="object"&&Reflect.apply||(iQ?CF.bind(bF):function(){return CF.apply(bF,arguments)}),RF=wl,NF=nB,aQ=KC,xF=ps,mB=Cf,sQ=LC,uQ=mB("species"),QA=RegExp.prototype,lQ=function(o,i,l,d){var p=mB(o),S=!xF(function(){var F={};return F[p]=function(){return 7},""[o](F)!==7}),b=S&&!xF(function(){var F=!1,R=/a/;return o==="split"&&(R={},R.constructor={},R.constructor[uQ]=function(){return R},R.flags="",R[p]=/./[p]),R.exec=function(){return F=!0,null},R[p](""),!F});if(!S||!b||l){var g=/./[p],w=i(p,""[o],function(F,R,y,v,D){var m=R.exec;return m===aQ||m===QA.exec?S&&!D?{done:!0,value:RF(g,R,y,v)}:{done:!0,value:RF(F,y,R,v)}:{done:!1}});NF(String.prototype,o,w[0]),NF(QA,p,w[1])}d&&sQ(QA[p],"sham",!0)},VC=wa,cQ=pE,fQ=gE,dQ=rm,hQ=VC("".charAt),MF=VC("".charCodeAt),pQ=VC("".slice),DF=function(o){return function(i,l){var d=fQ(dQ(i)),p=cQ(l),S=d.length,b,g;return p<0||p>=S?o?"":void 0:(b=MF(d,p),b<55296||b>56319||p+1===S||(g=MF(d,p+1))<56320||g>57343?o?hQ(d,p):b:o?pQ(d,p,p+2):(b-55296<<10)+(g-56320)+65536)}},gQ={codeAt:DF(!1),charAt:DF(!0)},mQ=gQ.charAt,vQ=function(o,i,l){return i+(l?mQ(o,i).length:1)},PF=wl,yQ=Rf,EQ=Ga,_Q=fE,TQ=KC,SQ=TypeError,wQ=function(o,i){var l=o.exec;if(EQ(l)){var d=PF(l,o,i);return d!==null&&yQ(d),d}if(_Q(o)==="RegExp")return PF(TQ,o,i);throw new SQ("RegExp#exec called on incompatible receiver")},AQ=oQ,OF=wl,vE=wa,IQ=lQ,bQ=ps,CQ=Rf,RQ=Ga,NQ=dE,xQ=pE,MQ=iB,Zd=gE,DQ=rm,PQ=vQ,OQ=MC,LQ=cB,kQ=wQ,FQ=Cf,gb=FQ("replace"),UQ=Math.max,BQ=Math.min,jQ=vE([].concat),JA=vE([].push),LF=vE("".indexOf),kF=vE("".slice),ZQ=function(o){return o===void 0?o:String(o)},GQ=function(){return"a".replace(/./,"$0")==="$0"}(),FF=function(){return/./[gb]?/./[gb]("a","$0")==="":!1}(),qQ=!bQ(function(){var o=/./;return o.exec=function(){var i=[];return i.groups={a:"7"},i},"".replace(o,"$<a>")!=="7"});IQ("replace",function(o,i,l){var d=FF?"$":"$0";return[function(S,b){var g=DQ(this),w=NQ(S)?void 0:OQ(S,gb);return w?OF(w,S,g,b):OF(i,Zd(g),S,b)},function(p,S){var b=CQ(this),g=Zd(p);if(typeof S=="string"&&LF(S,d)===-1&&LF(S,"$<")===-1){var w=l(i,b,g,S);if(w.done)return w.value}var F=RQ(S);F||(S=Zd(S));var R=b.global,y;R&&(y=b.unicode,b.lastIndex=0);for(var v=[],D;D=kQ(b,g),!(D===null||(JA(v,D),!R));){var m=Zd(D[0]);m===""&&(b.lastIndex=PQ(g,MQ(b.lastIndex),y))}for(var T="",U=0,x=0;x<v.length;x++){D=v[x];for(var _=Zd(D[0]),I=UQ(BQ(xQ(D.index),g.length),0),C=[],j,z=1;z<D.length;z++)JA(C,ZQ(D[z]));var $=D.groups;if(F){var W=jQ([_],C,I,g);$!==void 0&&JA(W,$),j=Zd(AQ(S,void 0,W))}else j=LQ(_,g,I,C,$,S);I>=U&&(T+=kF(g,U,I)+j,U=I+_.length)}return T+kF(g,U)}]},!qQ||!GQ||FF);var HQ=Za,KQ=wa,VQ=function(o,i){return KQ(HQ[o].prototype[i])},zQ=VQ;zQ("String","replaceAll");function zC(){const o=Du(),i=Ih(),[l]=C4();return gn.useCallback(async(d,p)=>{var g;if(!l||!o)return;const S=(g=i==null?void 0:i.distributionUrl)!=null?g:"";let b=l.cameraURLTemplate;if(b=b.replace("{{baseURL}}",S),b=b.replace("{{folderName}}/",p.camera.folderName?p.camera.folderName+"/":""),b=b.replaceAll("{{assetName}}",p.camera.assetName||""),b!==d.currentSource&&i)return await d.load(p,b,{startTimeSeconds:o.getExpectedPositionInSeconds()-vi(p.camera.span.time,i.frameRate),eventOffset:vi(p.camera.span.time,i.frameRate),reelOffset:vi(p.camera.reelOffset,i.frameRate)})},[o,l,i])}function YQ(){const o=zC();return gn.useCallback(async(i,l)=>await o(i,l).then(),[o])}function WQ(){const o=Du(),i=bf(),l=A4();gn.useEffect(()=>{if(!o||!i||!l)return;const d=({command:p,reference:S,start:b})=>{o.pausePlayStream(p,S,b)};return i.on("pausePlayStream",d),()=>{i.off("pausePlayStream",d)}},[o,i,l])}function $Q(o){const i=Du(),l=Ih(),d=bf(),p=YQ(),S=zC();gn.useEffect(()=>{if(!d||!l||!i||!o)return;let b,g=[void 0,-1];const w=()=>{const T=i.getExpectedPositionInSeconds()<=0?0:i.getExpectedPositionInSeconds();return bC(l,T)[0]},F=T=>{g[0]=S(o,T),g[1]=T.index},R=T=>{if(g[0]&&g[1]===T.index){g[0].then(()=>{}),g=[void 0,-1];return}try{p(o,T)}catch(U){console.error("failed to play stream",U)}},y=()=>{const T=w();T&&F(T)},v=()=>{const T=w();T&&R(T)},D=({index:T})=>{var x;const U=(x=tb(T,l))!=null?x:eb(T,l,i);U&&F(U)},m=({index:T})=>{var x;const U=(x=tb(T,l))!=null?x:eb(T,l,i);U&&(F(U),b=setTimeout(()=>{R(U)},1900))};return d.on("cast",m),i.on("prepareStart",y),i.on("start",v),i.isLive?(i.preparePlayback(),v()):i.isInPrepare?y():console.log("HÄÄRRR"),()=>{d.off("prepareCast",D),d.off("cast",m),i.off("prepareStart",y),i.off("start",v),clearTimeout(b)}},[d,l,i,o,p,S])}function XQ(o){const i=nm();gn.useEffect(()=>{if(!o||!i)return;const l=()=>{o.currentCamera&&i.updatePlaying(o.currentCamera)};return o.on("playing",l),()=>{o.off("playing",l)}},[o,i])}function QQ(o){const i=nm(),l=Du(),d=Ih(),p=bf(),S=zC();gn.useEffect(()=>{if(!d||!l||!o||!i)return;const b=({remainingTime:g})=>{const w=E4(d,l.getExpectedPositionInSeconds(),g,o.currentCamera);if(w){p==null||p.emitCast(w.index);try{const F=S(o,w);i.once("ended",()=>{F.then(()=>{})})}catch(F){console.error("failed to load stream",F)}}else i.once("ended",()=>{i.endEvent()})};return i.on("nearEnd",b),()=>{i.off("nearEnd",b)}},[d,l,o,S,i])}function JQ(o,i,l){const d=z7(),p=Du(),[S,b]=gn.useState(null);return gn.useEffect(()=>{const g=document.querySelector(o);if(g==null||!p||!l)return;const w=new az({containerElement:g,playerOptions:{autoPlay:!1,widevineLicenseUrl:i,policyQuery:l,preferredTech:"dashjs",customLicenceRequestHeaders:{"Api-version":"v1",Session:d}},eventClock:p});return b(w),()=>{w.destroy()}},[d,o,i,l,p]),S}function eJ(o){const i=Du(),l=bf(),d=Ih(),p=nm(),[S,b]=gn.useState(),[g,w]=gn.useState();return gn.useEffect(()=>{if(!d||!i||!o||!l||!p)return;const F=({index:y})=>{var v;w((v=tb(y,d))!=null?v:eb(y,d,i)),b(o.currentCamera)},R=()=>{const y=o.currentCamera;(y==null?void 0:y.camera.transition)==="mapAndClosing"&&(w(E4(d,i.getExpectedPositionInSeconds(),2,y)),b(y))};return l.on("cast",F),p.on("transition",R),()=>{l.off("cast",F),p.off("transition",R)}},[d,i,o,l,p]),[S,g]}function vB({x:o,y:i,mapScale:l}){const[d,p]=gn.useState(0),[S,b]=gn.useState(0),[g,w]=gn.useState(0),[F,R]=gn.useState(0),[y,v]=gn.useState(0);return gn.useEffect(()=>{const D=window.innerWidth,m=window.innerHeight,T=D/12,U=m/12;R(m/2-m*.05),v(D/m),p(o*T),b(i*U),w(T*l)},[o,i,l]),{scaledX:d,scaledY:S,size:g,baseY:F,aspectRatio:y}}const tJ="_container_1rjti_1",nJ="_fadeIn_1rjti_1",rJ="_content_1rjti_15",iJ="_end_1rjti_33",oJ="_scrollWrapper_1rjti_41",aJ="_scrollContainer_1rjti_55",sJ="_poster_1rjti_93",Gd={container:tJ,fadeIn:nJ,content:rJ,end:iJ,scrollWrapper:oJ,scrollContainer:aJ,poster:sJ},uJ="_logoutWrapper_1fqns_1",lJ={logoutWrapper:uJ},yB=()=>{const o=()=>{const i=new Event("logout");document.dispatchEvent(i)};return Rt.jsx("div",{className:lJ.logoutWrapper,children:Rt.jsx(Tl,{onClick:o,focusKey:"LOGOUT",selfFocus:!0,children:"Logout"})})};var cJ=Object.defineProperty,B0=Object.getOwnPropertySymbols,EB=Object.prototype.hasOwnProperty,_B=Object.prototype.propertyIsEnumerable,UF=(o,i,l)=>i in o?cJ(o,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[i]=l,Vg=(o,i)=>{for(var l in i||(i={}))EB.call(i,l)&&UF(o,l,i[l]);if(B0)for(var l of B0(i))_B.call(i,l)&&UF(o,l,i[l]);return o},YC=(o,i)=>{var l={};for(var d in o)EB.call(o,d)&&i.indexOf(d)<0&&(l[d]=o[d]);if(o!=null&&B0)for(var d of B0(o))i.indexOf(d)<0&&_B.call(o,d)&&(l[d]=o[d]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var _f;(o=>{const i=class{constructor(w,F,R,y){if(this.version=w,this.errorCorrectionLevel=F,this.modules=[],this.isFunction=[],w<i.MIN_VERSION||w>i.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let v=[];for(let m=0;m<this.size;m++)v.push(!1);for(let m=0;m<this.size;m++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const D=this.addEccAndInterleave(R);if(this.drawCodewords(D),y==-1){let m=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const U=this.getPenaltyScore();U<m&&(y=T,m=U),this.applyMask(T)}}S(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(w,F){const R=o.QrSegment.makeSegments(w);return i.encodeSegments(R,F)}static encodeBinary(w,F){const R=o.QrSegment.makeBytes(w);return i.encodeSegments([R],F)}static encodeSegments(w,F,R=1,y=40,v=-1,D=!0){if(!(i.MIN_VERSION<=R&&R<=y&&y<=i.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let m,T;for(m=R;;m++){const I=i.getNumDataCodewords(m,F)*8,C=g.getTotalBits(w,m);if(C<=I){T=C;break}if(m>=y)throw new RangeError("Data too long")}for(const I of[i.Ecc.MEDIUM,i.Ecc.QUARTILE,i.Ecc.HIGH])D&&T<=i.getNumDataCodewords(m,I)*8&&(F=I);let U=[];for(const I of w){d(I.mode.modeBits,4,U),d(I.numChars,I.mode.numCharCountBits(m),U);for(const C of I.getData())U.push(C)}S(U.length==T);const x=i.getNumDataCodewords(m,F)*8;S(U.length<=x),d(0,Math.min(4,x-U.length),U),d(0,(8-U.length%8)%8,U),S(U.length%8==0);for(let I=236;U.length<x;I^=253)d(I,8,U);let _=[];for(;_.length*8<U.length;)_.push(0);return U.forEach((I,C)=>_[C>>>3]|=I<<7-(C&7)),new i(m,F,_,v)}getModule(w,F){return 0<=w&&w<this.size&&0<=F&&F<this.size&&this.modules[F][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let R=0;R<this.size;R++)this.setFunctionModule(6,R,R%2==0),this.setFunctionModule(R,6,R%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),F=w.length;for(let R=0;R<F;R++)for(let y=0;y<F;y++)R==0&&y==0||R==0&&y==F-1||R==F-1&&y==0||this.drawAlignmentPattern(w[R],w[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const F=this.errorCorrectionLevel.formatBits<<3|w;let R=F;for(let v=0;v<10;v++)R=R<<1^(R>>>9)*1335;const y=(F<<10|R)^21522;S(y>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,p(y,v));this.setFunctionModule(8,7,p(y,6)),this.setFunctionModule(8,8,p(y,7)),this.setFunctionModule(7,8,p(y,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,p(y,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,p(y,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,p(y,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let R=0;R<12;R++)w=w<<1^(w>>>11)*7973;const F=this.version<<12|w;S(F>>>18==0);for(let R=0;R<18;R++){const y=p(F,R),v=this.size-11+R%3,D=Math.floor(R/3);this.setFunctionModule(v,D,y),this.setFunctionModule(D,v,y)}}drawFinderPattern(w,F){for(let R=-4;R<=4;R++)for(let y=-4;y<=4;y++){const v=Math.max(Math.abs(y),Math.abs(R)),D=w+y,m=F+R;0<=D&&D<this.size&&0<=m&&m<this.size&&this.setFunctionModule(D,m,v!=2&&v!=4)}}drawAlignmentPattern(w,F){for(let R=-2;R<=2;R++)for(let y=-2;y<=2;y++)this.setFunctionModule(w+y,F+R,Math.max(Math.abs(y),Math.abs(R))!=1)}setFunctionModule(w,F,R){this.modules[F][w]=R,this.isFunction[F][w]=!0}addEccAndInterleave(w){const F=this.version,R=this.errorCorrectionLevel;if(w.length!=i.getNumDataCodewords(F,R))throw new RangeError("Invalid argument");const y=i.NUM_ERROR_CORRECTION_BLOCKS[R.ordinal][F],v=i.ECC_CODEWORDS_PER_BLOCK[R.ordinal][F],D=Math.floor(i.getNumRawDataModules(F)/8),m=y-D%y,T=Math.floor(D/y);let U=[];const x=i.reedSolomonComputeDivisor(v);for(let I=0,C=0;I<y;I++){let j=w.slice(C,C+T-v+(I<m?0:1));C+=j.length;const z=i.reedSolomonComputeRemainder(j,x);I<m&&j.push(0),U.push(j.concat(z))}let _=[];for(let I=0;I<U[0].length;I++)U.forEach((C,j)=>{(I!=T-v||j>=m)&&_.push(C[I])});return S(_.length==D),_}drawCodewords(w){if(w.length!=Math.floor(i.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let F=0;for(let R=this.size-1;R>=1;R-=2){R==6&&(R=5);for(let y=0;y<this.size;y++)for(let v=0;v<2;v++){const D=R-v,T=(R+1&2)==0?this.size-1-y:y;!this.isFunction[T][D]&&F<w.length*8&&(this.modules[T][D]=p(w[F>>>3],7-(F&7)),F++)}}S(F==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let F=0;F<this.size;F++)for(let R=0;R<this.size;R++){let y;switch(w){case 0:y=(R+F)%2==0;break;case 1:y=F%2==0;break;case 2:y=R%3==0;break;case 3:y=(R+F)%3==0;break;case 4:y=(Math.floor(R/3)+Math.floor(F/2))%2==0;break;case 5:y=R*F%2+R*F%3==0;break;case 6:y=(R*F%2+R*F%3)%2==0;break;case 7:y=((R+F)%2+R*F%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[F][R]&&y&&(this.modules[F][R]=!this.modules[F][R])}}getPenaltyScore(){let w=0;for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[v][U]==D?(m++,m==5?w+=i.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),D||(w+=this.finderPenaltyCountPatterns(T)*i.PENALTY_N3),D=this.modules[v][U],m=1);w+=this.finderPenaltyTerminateAndCount(D,m,T)*i.PENALTY_N3}for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[U][v]==D?(m++,m==5?w+=i.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),D||(w+=this.finderPenaltyCountPatterns(T)*i.PENALTY_N3),D=this.modules[U][v],m=1);w+=this.finderPenaltyTerminateAndCount(D,m,T)*i.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let D=0;D<this.size-1;D++){const m=this.modules[v][D];m==this.modules[v][D+1]&&m==this.modules[v+1][D]&&m==this.modules[v+1][D+1]&&(w+=i.PENALTY_N2)}let F=0;for(const v of this.modules)F=v.reduce((D,m)=>D+(m?1:0),F);const R=this.size*this.size,y=Math.ceil(Math.abs(F*20-R*10)/R)-1;return S(0<=y&&y<=9),w+=y*i.PENALTY_N4,S(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,F=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let R=[6];for(let y=this.size-7;R.length<w;y-=F)R.splice(1,0,y);return R}}static getNumRawDataModules(w){if(w<i.MIN_VERSION||w>i.MAX_VERSION)throw new RangeError("Version number out of range");let F=(16*w+128)*w+64;if(w>=2){const R=Math.floor(w/7)+2;F-=(25*R-10)*R-55,w>=7&&(F-=36)}return S(208<=F&&F<=29648),F}static getNumDataCodewords(w,F){return Math.floor(i.getNumRawDataModules(w)/8)-i.ECC_CODEWORDS_PER_BLOCK[F.ordinal][w]*i.NUM_ERROR_CORRECTION_BLOCKS[F.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let F=[];for(let y=0;y<w-1;y++)F.push(0);F.push(1);let R=1;for(let y=0;y<w;y++){for(let v=0;v<F.length;v++)F[v]=i.reedSolomonMultiply(F[v],R),v+1<F.length&&(F[v]^=F[v+1]);R=i.reedSolomonMultiply(R,2)}return F}static reedSolomonComputeRemainder(w,F){let R=F.map(y=>0);for(const y of w){const v=y^R.shift();R.push(0),F.forEach((D,m)=>R[m]^=i.reedSolomonMultiply(D,v))}return R}static reedSolomonMultiply(w,F){if(w>>>8||F>>>8)throw new RangeError("Byte out of range");let R=0;for(let y=7;y>=0;y--)R=R<<1^(R>>>7)*285,R^=(F>>>y&1)*w;return S(R>>>8==0),R}finderPenaltyCountPatterns(w){const F=w[1];S(F<=this.size*3);const R=F>0&&w[2]==F&&w[3]==F*3&&w[4]==F&&w[5]==F;return(R&&w[0]>=F*4&&w[6]>=F?1:0)+(R&&w[6]>=F*4&&w[0]>=F?1:0)}finderPenaltyTerminateAndCount(w,F,R){return w&&(this.finderPenaltyAddHistory(F,R),F=0),F+=this.size,this.finderPenaltyAddHistory(F,R),this.finderPenaltyCountPatterns(R)}finderPenaltyAddHistory(w,F){F[0]==0&&(w+=this.size),F.pop(),F.unshift(w)}};let l=i;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],o.QrCode=l;function d(w,F,R){if(F<0||F>31||w>>>F)throw new RangeError("Value out of range");for(let y=F-1;y>=0;y--)R.push(w>>>y&1)}function p(w,F){return(w>>>F&1)!=0}function S(w){if(!w)throw new Error("Assertion error")}const b=class{constructor(w,F,R){if(this.mode=w,this.numChars=F,this.bitData=R,F<0)throw new RangeError("Invalid argument");this.bitData=R.slice()}static makeBytes(w){let F=[];for(const R of w)d(R,8,F);return new b(b.Mode.BYTE,w.length,F)}static makeNumeric(w){if(!b.isNumeric(w))throw new RangeError("String contains non-numeric characters");let F=[];for(let R=0;R<w.length;){const y=Math.min(w.length-R,3);d(parseInt(w.substr(R,y),10),y*3+1,F),R+=y}return new b(b.Mode.NUMERIC,w.length,F)}static makeAlphanumeric(w){if(!b.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let F=[],R;for(R=0;R+2<=w.length;R+=2){let y=b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(R))*45;y+=b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(R+1)),d(y,11,F)}return R<w.length&&d(b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(R)),6,F),new b(b.Mode.ALPHANUMERIC,w.length,F)}static makeSegments(w){return w==""?[]:b.isNumeric(w)?[b.makeNumeric(w)]:b.isAlphanumeric(w)?[b.makeAlphanumeric(w)]:[b.makeBytes(b.toUtf8ByteArray(w))]}static makeEci(w){let F=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)d(w,8,F);else if(w<16384)d(2,2,F),d(w,14,F);else if(w<1e6)d(6,3,F),d(w,21,F);else throw new RangeError("ECI assignment value out of range");return new b(b.Mode.ECI,0,F)}static isNumeric(w){return b.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return b.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,F){let R=0;for(const y of w){const v=y.mode.numCharCountBits(F);if(y.numChars>=1<<v)return 1/0;R+=4+v+y.bitData.length}return R}static toUtf8ByteArray(w){w=encodeURI(w);let F=[];for(let R=0;R<w.length;R++)w.charAt(R)!="%"?F.push(w.charCodeAt(R)):(F.push(parseInt(w.substr(R+1,2),16)),R+=2);return F}};let g=b;g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",o.QrSegment=g})(_f||(_f={}));(o=>{(i=>{const l=class{constructor(p,S){this.ordinal=p,this.formatBits=S}};let d=l;d.LOW=new l(0,1),d.MEDIUM=new l(1,0),d.QUARTILE=new l(2,3),d.HIGH=new l(3,2),i.Ecc=d})(o.QrCode||(o.QrCode={}))})(_f||(_f={}));(o=>{(i=>{const l=class{constructor(p,S){this.modeBits=p,this.numBitsCharCount=S}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};let d=l;d.NUMERIC=new l(1,[10,12,14]),d.ALPHANUMERIC=new l(2,[9,11,13]),d.BYTE=new l(4,[8,16,16]),d.KANJI=new l(8,[8,10,12]),d.ECI=new l(7,[0,0,0]),i.Mode=d})(o.QrSegment||(o.QrSegment={}))})(_f||(_f={}));var oh=_f;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var TB={L:oh.QrCode.Ecc.LOW,M:oh.QrCode.Ecc.MEDIUM,Q:oh.QrCode.Ecc.QUARTILE,H:oh.QrCode.Ecc.HIGH},SB=128,wB="L",AB="#FFFFFF",IB="#000000",bB=!1,WC=4,fJ=.1;function CB(o,i=0){const l=[];return o.forEach(function(d,p){let S=null;d.forEach(function(b,g){if(!b&&S!==null){l.push("M".concat(S+i," ").concat(p+i,"h").concat(g-S,"v1H").concat(S+i,"z")),S=null;return}if(g===d.length-1){if(!b)return;S===null?l.push("M".concat(g+i,",").concat(p+i," h1v1H").concat(g+i,"z")):l.push("M".concat(S+i,",").concat(p+i," h").concat(g+1-S,"v1H").concat(S+i,"z"));return}b&&S===null&&(S=g)})}),l.join("")}function RB(o,i){return o.slice().map((l,d)=>d<i.y||d>=i.y+i.h?l:l.map((p,S)=>S<i.x||S>=i.x+i.w?p:!1))}function NB(o,i,l,d){if(d==null)return null;const p=l?WC:0,S=o.length+p*2,b=Math.floor(i*fJ),g=S/i,w=(d.width||b)*g,F=(d.height||b)*g,R=d.x==null?o.length/2-w/2:d.x*g,y=d.y==null?o.length/2-F/2:d.y*g;let v=null;if(d.excavate){let D=Math.floor(R),m=Math.floor(y),T=Math.ceil(w+R-D),U=Math.ceil(F+y-m);v={x:D,y:m,w:T,h:U}}return{x:R,y,h:F,w,excavation:v}}var dJ=function(){try{new Path2D().addPath(new Path2D)}catch(o){return!1}return!0}();function hJ(o){const i=o,{value:l,size:d=SB,level:p=wB,bgColor:S=AB,fgColor:b=IB,includeMargin:g=bB,style:w,imageSettings:F}=i,R=YC(i,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),y=F==null?void 0:F.src,v=$o.useRef(null),D=$o.useRef(null),[m,T]=$o.useState(!1);$o.useEffect(()=>{if(v.current!=null){const _=v.current,I=_.getContext("2d");if(!I)return;let C=oh.QrCode.encodeText(l,TB[p]).getModules();const j=g?WC:0,z=C.length+j*2,$=NB(C,d,g,F),W=D.current,ue=$!=null&&W!==null&&W.complete&&W.naturalHeight!==0&&W.naturalWidth!==0;ue&&$.excavation!=null&&(C=RB(C,$.excavation));const N=window.devicePixelRatio||1;_.height=_.width=d*N;const X=d/z*N;I.scale(X,X),I.fillStyle=S,I.fillRect(0,0,z,z),I.fillStyle=b,dJ?I.fill(new Path2D(CB(C,j))):C.forEach(function(ce,oe){ce.forEach(function(de,Ce){de&&I.fillRect(Ce+j,oe+j,1,1)})}),ue&&I.drawImage(W,$.x+j,$.y+j,$.w,$.h)}}),$o.useEffect(()=>{T(!1)},[y]);const U=Vg({height:d,width:d},w);let x=null;return y!=null&&(x=$o.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{T(!0)},ref:D})),$o.createElement($o.Fragment,null,$o.createElement("canvas",Vg({style:U,height:d,width:d,ref:v},R)),x)}function pJ(o){const i=o,{value:l,size:d=SB,level:p=wB,bgColor:S=AB,fgColor:b=IB,includeMargin:g=bB,imageSettings:w}=i,F=YC(i,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let R=oh.QrCode.encodeText(l,TB[p]).getModules();const y=g?WC:0,v=R.length+y*2,D=NB(R,d,g,w);let m=null;w!=null&&D!=null&&(D.excavation!=null&&(R=RB(R,D.excavation)),m=$o.createElement("image",{xlinkHref:w.src,height:D.h,width:D.w,x:D.x+y,y:D.y+y,preserveAspectRatio:"none"}));const T=CB(R,y);return $o.createElement("svg",Vg({height:d,width:d,viewBox:"0 0 ".concat(v," ").concat(v)},F),$o.createElement("path",{fill:S,d:"M0,0 h".concat(v,"v").concat(v,"H0z"),shapeRendering:"crispEdges"}),$o.createElement("path",{fill:b,d:T,shapeRendering:"crispEdges"}),m)}var yE=o=>{const i=o,{renderAs:l}=i,d=YC(i,["renderAs"]);return l==="svg"?$o.createElement(pJ,Vg({},d)):$o.createElement(hJ,Vg({},d))};function gJ({selfFocus:o,focusKey:i,src:l,showQr:d,qrUrl:p,...S}){const{ref:b,focused:g,focusSelf:w}=ou.useFocusable({onEnterPress:()=>{S.onClick()},focusKey:i});return gn.useEffect(()=>{o&&w()},[w,o]),Rt.jsx("button",{...S,ref:b,className:"".concat(S.className||""," ").concat(g?nb.posterFocused:""),id:"rail_".concat(i),children:d?Rt.jsx(yE,{className:nb.qrCode,bgColor:"white",fgColor:"black",value:p,size:720}):Rt.jsx("img",{src:l})})}const xB=()=>{const[o,i]=gn.useState(0);return gn.useEffect(()=>{const l=p=>{i(p.keyCode)},d=()=>{i(0)};return document.addEventListener("keydown",l),document.addEventListener("keyup",d),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",d)}},[]),o};function BF({canceled:o}){const i=w4(),[l,d]=gn.useState(null),[p,S]=gn.useState(0),b=xB();function g(){var w;return(i==null?void 0:i.postScreen.offersCollection.items.length)>2&&((w=document.getElementById("rail_".concat(ou.getCurrentFocusKey())))==null?void 0:w.offsetLeft)-13||0}return gn.useEffect(()=>{b!==0&&d(null),S(g())},[b]),Rt.jsx("div",{className:Gd.container,children:Rt.jsxs("div",{className:Gd.content,children:[o?Rt.jsx("h1",{className:Gd.end,children:"Oh no! This event has been canceled."}):Rt.jsxs(Rt.Fragment,{children:[Rt.jsx("h1",{children:i==null?void 0:i.postScreen.title}),Rt.jsx("p",{className:"body-text",style:{opacity:.5},children:i==null?void 0:i.postScreen.body})]}),Rt.jsx(yB,{}),Rt.jsx("div",{className:Gd.scrollWrapper,children:Rt.jsx("div",{className:Gd.scrollContainer,style:{left:-(p||0)},children:i&&i.postScreen.offersCollection.items.map((w,F)=>Rt.jsx(gJ,{className:Gd.poster,onClick:()=>{"".concat(F)!==ou.getCurrentFocusKey()?(ou.setFocus("".concat(F)),S(g())):d(F)},src:w.image.url,focusKey:"".concat(F),selfFocus:F===0,showQr:F===l,qrUrl:w.link},F))})})]})})}const mJ="_transitionWrapper_jyngr_1",vJ="_active_jyngr_17",yJ="_transition_jyngr_1",EJ="_fadeOut_jyngr_1",_J="_hidden_jyngr_57",TJ="_visible_jyngr_67",SJ="_videoTitle_jyngr_77",wJ="_fadeIn_jyngr_1",ug={transitionWrapper:mJ,active:vJ,transition:yJ,fadeOut:EJ,hidden:_J,visible:TJ,videoTitle:SJ,fadeIn:wJ},AJ="_placeContainer_ywyae_1",IJ="_place_ywyae_1",bJ="_background_ywyae_45",CJ="_activePlace_ywyae_57",RJ="_fadeOut_ywyae_1",NJ="_normalPlace_ywyae_79",xJ="_selectedPlace_ywyae_99",MJ="_fadeIn_ywyae_1",DJ="_pulseEffect_ywyae_1",PJ="_title_ywyae_153",Jc={placeContainer:AJ,place:IJ,background:bJ,activePlace:CJ,fadeOut:RJ,normalPlace:NJ,selectedPlace:xJ,fadeIn:MJ,pulseEffect:DJ,title:PJ};var Is=(o=>(o.ACTIVE_PLACE="ActivePlace",o.SELECTED_PLACE="SelectedPlace",o.NORMAL_PLACE="NormalPlace",o))(Is||{});const OJ=({place:o,mapPlacesLength:i})=>{const l=vB({x:o.mapPosition.x,y:o.mapPosition.y,mapScale:o.mapScale}),d=gn.useMemo(()=>{switch(o.placeType){case Is.ACTIVE_PLACE:return Jc.activePlace;case Is.SELECTED_PLACE:return Jc.selectedPlace;case Is.NORMAL_PLACE:default:return Jc.normalPlace}},[o]);return Rt.jsx("div",{className:Jc.placeContainer,children:Rt.jsxs("div",{className:"".concat(Jc.place," ").concat(d),style:{width:l.size,height:l.size,left:"calc(50% + ".concat(i>1?l.scaledX:0,"px)"),top:"calc(50% + ".concat(i>1?l.scaledY:0,"px)"),transform:"translate(-50%, -50%)"},children:[Rt.jsx("div",{className:Jc.background}),(o.placeType===Is.ACTIVE_PLACE||o.placeType===Is.SELECTED_PLACE)&&Rt.jsx("div",{className:"subheader-light ".concat(Jc.title),children:o.title})]})})},LJ="_followContainer_1h8ds_1",kJ="_follow_1h8ds_1",FJ="_selectedFollow_1h8ds_35",UJ="_pulseEffect_1h8ds_1",BJ="_notSelectedFollow_1h8ds_79",jJ="_iconContainer_1h8ds_97",ZJ="_labelContainer_1h8ds_131",qd={followContainer:LJ,follow:kJ,selectedFollow:FJ,pulseEffect:UJ,notSelectedFollow:BJ,iconContainer:jJ,labelContainer:ZJ},GJ="_label_svzic_1",qJ={label:GJ},HJ=({content:o,classNames:i=""})=>Rt.jsx("div",{className:"".concat(qJ.label," ").concat(i," label"),children:o}),KJ=({style:o})=>Rt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 32 32",fill:"none",style:o,children:Rt.jsx("path",{d:"M24 19L16 11L8 19",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),EE=({classNames:o,styles:i,color:l,stroke:d,size:p=192})=>Rt.jsxs("svg",{className:o,style:i,xmlns:"http://www.w3.org/2000/svg",width:p,height:p,viewBox:"0 0 192 192",fill:"none",children:[Rt.jsx("path",{d:"M96 176C140.183 176 176 140.183 176 96C176 51.8172 140.183 16 96 16C51.8172 16 16 51.8172 16 96C16 140.183 51.8172 176 96 176Z",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M96 64V108",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("circle",{cx:"96",cy:"128",r:"8",fill:l||"white"})]}),VJ=({classNames:o,styles:i,color:l,stroke:d})=>Rt.jsxs("svg",{className:o,style:i,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[Rt.jsx("path",{d:"M11.1475 18.5801L152.567 160",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("circle",{cx:"96",cy:"160",r:"4",fill:"white"}),Rt.jsx("path",{d:"M180.853 75.1472C169.71 64.0041 156.481 55.165 141.922 49.1344C127.363 43.1039 111.758 40 95.9998 40C83.9607 40 72.0117 41.8116 60.55 45.3557M11.147 75.1472C20.7929 65.5013 32.0017 57.5818 44.2834 51.716",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),Rt.jsx("path",{d:"M152.569 103.431C145.14 96.0028 136.321 90.11 126.615 86.0896C116.909 82.0693 106.506 80 96.0002 80C95.7328 80 95.4656 80.0013 95.1984 80.004M39.4316 103.431C46.8603 96.0028 55.6795 90.11 65.3855 86.0896C68.6182 84.7506 71.9282 83.628 75.2936 82.7262",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),Rt.jsx("path",{d:"M124.294 131.725C120.58 128.011 116.17 125.065 111.317 123.055C106.464 121.044 101.263 120.01 96.0099 120.01C90.757 120.01 85.5555 121.044 80.7025 123.055C75.8495 125.065 71.4399 128.011 67.7256 131.726",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"})]}),zJ=()=>Rt.jsxs("svg",{width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Rt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M149.333 96L120 125.333L106.667 112",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),YJ=()=>Rt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",children:[Rt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M144 96L112 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M112 96L144 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),WJ=()=>Rt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[Rt.jsx("path",{d:"M2 12V44L16 36L32 44L46 36V4L32 12L16 4L2 12Z",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M16 4V36",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),Rt.jsx("path",{d:"M32 12V44",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),$J=()=>Rt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 300 150",children:Rt.jsx("path",{fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:"300 385",strokeDashoffset:"0",d:"M275 75c0 31-27 50-50 50-58 0-92-100-150-100-28 0-50 22-50 50s23 50 50 50c58 0 92-100 150-100 24 0 50 19 50 50Z",children:Rt.jsx("animate",{attributeName:"stroke-dashoffset",calcMode:"spline",dur:"2",values:"685;-685",keySplines:"0 0 1 1",repeatCount:"indefinite"})})}),XJ=({follow:o})=>{var p,S,b,g;const i=vB({x:(S=(p=o.mapPosition)==null?void 0:p.x)!=null?S:0,y:(g=(b=o.mapPosition)==null?void 0:b.y)!=null?g:0,mapScale:.6}),[l,d]=gn.useState(0);return gn.useEffect(()=>{function w(F,R,y){return-Math.atan2((F.x-R.x)*y,F.y-R.y)*(180/Math.PI)}o.mapPosition&&d(w(o.mapPositions[0],o.mapPositions[o.mapPositions.length-1],i.aspectRatio))},[o.mapPosition,o.mapPositions,i]),Rt.jsxs("div",{className:qd.followContainer,style:{width:i.size,height:i.size,left:"calc(50% + ".concat(i.scaledX,"px)"),top:"calc(50% - ".concat(i.scaledY,"px)")},children:[Rt.jsx("div",{className:"".concat(qd.follow," ").concat(o.isSelectedFollow?qd.selectedFollow:qd.notSelectedFollow," ").concat(qd.iconContainer),children:Rt.jsx(KJ,{style:{transform:"rotate(".concat(l,"deg)")}})}),o.isSelectedFollow&&Rt.jsx(HJ,{classNames:qd.labelContainer,content:o.title})]})},QJ=({fromCamera:o,toCamera:i})=>{const l=Ih(),d=Du(),p=4200,S=p+3950,b=1900,[g,w]=gn.useState([]),[F,R]=gn.useState([]),[y,v]=gn.useState(!1),[D,m]=gn.useState(!1),[T,U]=gn.useState(""),x=gn.useRef([]),_=gn.useMemo(()=>{function ue(N,X){const ce=N.jumpSpots.map(je=>je.camera.span),de=ce.map(je=>je.time).map(je=>vi(je,X.frameRate)),Ce=Math.min(...de),Je=ce.map(je=>vi(je.time,X.frameRate)+vi(je.duration,X.frameRate)),Te=Math.max(...Je);return{start:Ce,end:Te}}return l==null?void 0:l.places.filter(N=>N.jumpSpots.length>0).map((N,X)=>({...N,span:ue(N,l),placeType:Is.NORMAL_PLACE,placeIndex:X}))},[l]),I=gn.useMemo(()=>(l==null?void 0:l.follows.map(ue=>({...ue,isSelectedFollow:!1})))||[],[l]),C=gn.useCallback((ue,N)=>{const X=vi(ue.camera.span.time,N.frameRate)+2;return(_==null?void 0:_.filter(ce=>ce.span.start<=X&&X<=ce.span.end))||[]},[_]),j=gn.useCallback(ue=>{const N=ue.mapPositions[0]||{x:0,y:0};if(l&&d){const X=d.getExpectedPositionInSeconds()-vi(ue.camera.span.time,l.frameRate),ce=vi(ue.camera.span.duration,l.frameRate);let oe=Math.floor(X*4/ce);return X===ce&&(oe-=1),ue.mapPositions[oe]||N}return N},[d,l]),z=gn.useCallback((ue,N)=>{const X=vi(ue.camera.span.time,N.frameRate)+2;return I.filter(ce=>vi(ce.camera.span.time,N.frameRate)<=X&&X<=vi(ce.camera.span.time,N.frameRate)+vi(ce.camera.span.duration,N.frameRate)).map(ce=>({...ce,mapPosition:j(ce)}))},[I,j]),$=gn.useCallback(ue=>_==null?void 0:_.find(N=>N.jumpSpots.some(X=>X.camera.assetName===ue.camera.assetName)),[_]),W=(ue,N)=>N.jumpSpots.some(X=>X.camera.assetName===ue.camera.assetName);return gn.useEffect(()=>{if(!_||!o||!i||!l||o.camera.assetName===i.camera.assetName)return;const ue=x.current;let N=[],X=[],ce=[],oe=[];if(U(i.placeTitle?i.placeTitle:i.title),o.type===rf.JUMPSPOT&&i.type===rf.JUMPSPOT&&o.placeIndex===i.placeIndex)m(!1),v(!0);else{switch(m(!0),o.type){case rf.JUMPSPOT:X=z(i,l),N=C(o,l).map(je=>W(o,je)?{...je,placeType:Is.ACTIVE_PLACE}:je);break;case rf.FOLLOW:N=C(o,l),X=z(o,l).map(je=>({...je,isSelectedFollow:o.camera.assetName===je.camera.assetName}));break}switch(w(N),R(X),i.type){case rf.JUMPSPOT:oe=z(o,l);const je=N.find(ct=>W(i,ct));if(je)ce=N.map(ct=>({...ct,placeType:ct.placeIndex===je.placeIndex?Is.SELECTED_PLACE:Is.NORMAL_PLACE}));else{const ct=$(i);ct&&(ct.placeType=Is.SELECTED_PLACE,ce=[...N.map(Ie=>({...Ie,placeType:Is.NORMAL_PLACE})),ct])}break;case rf.FOLLOW:ce=C(o,l),oe=z(o,l);const nt=X.find(ct=>ct.camera.assetName===i.camera.assetName);if(nt)oe=X.map(ct=>({...ct,isSelectedFollow:ct.camera.assetName===nt.camera.assetName}));else{const ct=I.find(Ie=>Ie.camera.assetName===i.camera.assetName);if(ct){const Ie={...ct,isSelectedFollow:!0,mapPosition:j(ct)};oe=[...X.map(Ye=>({...Ye,isSelectedFollow:!1})),Ie]}}break}}const de=setTimeout(()=>{R(oe)},b);ue.push(de);const Ce=setTimeout(()=>{w(ce)},b);ue.push(Ce);const Je=setTimeout(()=>{m(!1),v(!0)},p);ue.push(Je);const Te=setTimeout(()=>{v(!1)},S);return ue.push(Te),()=>{ue.forEach(je=>{clearTimeout(je)}),x.current=[]}},[o,i,_,I,z,$,l,C,j,S]),Rt.jsxs("div",{className:"".concat(ug.transitionWrapper," ").concat(D?ug.active:""),children:[D&&Rt.jsxs("div",{className:"".concat(ug.transition," ").concat(ug.visible),children:[g.map((ue,N)=>Rt.jsx(OJ,{place:ue,mapPlacesLength:g.length},"place-".concat(N.toString()))),F.filter(ue=>ue.camera.assetName===(o==null?void 0:o.camera.assetName)||ue.camera.assetName===(i==null?void 0:i.camera.assetName)).map((ue,N)=>Rt.jsx(XJ,{follow:ue},"follow-".concat(N.toString())))]}),y&&Rt.jsx("h1",{className:ug.videoTitle,style:{textShadow:"2px 2px 4px black"},children:T})]})},JJ="_playerPage_s22qw_1",eee="_playerContainer_s22qw_13",tee="_fadeIn_s22qw_1",jF={playerPage:JJ,playerContainer:eee,fadeIn:tee},nee="_attention_1xh5o_1",ree="_ripple1_1xh5o_1",iee="_ripple2_1xh5o_1",oee="_thirdRipple_1xh5o_81",aee="_ripple3_1xh5o_1",see="_iconWrapper_1xh5o_105",eI={attention:nee,ripple1:ree,ripple2:iee,thirdRipple:oee,ripple3:aee,iconWrapper:see},uee=()=>{const o=nm(),[i,l]=gn.useState(!1),d=5e3;if(gn.useEffect(()=>{if(!o)return;let p;const S=()=>{l(!0),p=setTimeout(()=>{l(!1)},d)};return o.on("attention",S),()=>{o.off("attention",S),clearTimeout(p)}},[o]),!!i)return Rt.jsxs("div",{className:eI.attention,children:[Rt.jsx("span",{className:eI.iconWrapper,children:Rt.jsx(WJ,{})}),Rt.jsx("span",{className:eI.thirdRipple})]})},lee="_container_1l3tn_1",cee="_qrCode_1l3tn_25",fee="_text_1l3tn_35",tI={container:lee,qrCode:cee,text:fee},dee=({url:o})=>Rt.jsxs("div",{className:tI.container,children:[Rt.jsx("p",{className:"body-text ".concat(tI.text),style:{opacity:.75},children:"Scan the QR code with the app."}),Rt.jsx(yE,{className:tI.qrCode,bgColor:"white",fgColor:"black",value:o,size:500})]}),hee="_warningContainer_1qam6_1",pee={warningContainer:hee},MB=()=>Rt.jsxs("div",{className:pee.warningContainer,children:[Rt.jsx(EE,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),Rt.jsx("p",{className:"label",children:"Finish setup on your mobile or tablet. "})]}),gee="_messageContainer_ftasf_3",mee="_message_ftasf_3",ZF={messageContainer:gee,message:mee},vee=({message:o})=>Rt.jsx("div",{className:ZF.messageContainer,children:Rt.jsx("div",{className:"".concat(ZF.message," subheader-light"),children:o})});function yee(){const[o,i,l]=C4(),d=JQ("#playerContainer",i,l),[p,S]=gn.useState(),b=CC();gn.useEffect(()=>{const R=b==null?void 0:b.find(y=>y.deviceId===Eh);S(R)},[b]);const g=!!(b!=null&&b.find(R=>R.deviceId!==Eh));$Q(d),XQ(d),QQ(d);const[w,F]=eJ(d);return WQ(),Rt.jsxs("div",{className:jF.playerPage,children:[Rt.jsxs("div",{id:"playerContainer",className:jF.playerContainer,children:[Rt.jsx(uee,{}),(p==null?void 0:p.stateInfo.state)==="showQrCode"&&Rt.jsx(dee,{url:"".concat(TC,":").concat(p.deviceId)}),Rt.jsx(QJ,{fromCamera:w,toCamera:F})]}),!g&&Rt.jsx(vee,{message:Rt.jsx(MB,{})})]})}const Eee="_gradientBackground_b6nct_1",_ee="_container_b6nct_15",Tee="_fadeIn_b6nct_1",See="_connectedTV_b6nct_45",wee="_disconnectedTV_b6nct_47",Aee="_popIn_b6nct_1",Iee="_iconContainer_b6nct_105",bee="_connectedText_b6nct_121",Hd={gradientBackground:Eee,container:_ee,fadeIn:Tee,connectedTV:See,disconnectedTV:wee,popIn:Aee,iconContainer:Iee,connectedText:bee},GF=({isDisconnected:o})=>Rt.jsx("div",{className:Hd.gradientBackground,children:Rt.jsxs("div",{className:Hd.container,children:[Rt.jsx("div",{className:o?Hd.disconnectedTV:Hd.connectedTV,children:Rt.jsx("div",{className:Hd.iconContainer,children:o?Rt.jsx(YJ,{}):Rt.jsx(zJ,{})})}),Rt.jsx("h1",{className:Hd.connectedText,children:o?"TV disconnected":"TV connected"})]})}),Cee="_hidden_zykq7_1",Ree={hidden:Cee},Nee="_gradientBackground_xgf3g_1",xee="_container_xgf3g_15",Mee="_imageWrapper_xgf3g_41",Dee="_listText_xgf3g_55",Pee="_boldText_xgf3g_55",Oee="_image_xgf3g_41",Lee="_glow_xgf3g_85",kee="_dividerWrapper_xgf3g_113",Fee="_divider_xgf3g_113",Uee="_buttonsWrapper_xgf3g_137",Bee="_testButton_xgf3g_149",jee="_demoButton_xgf3g_157",Zee="_title_xgf3g_165",Gee="_countdownWrapper_xgf3g_185",qee="_startDate_xgf3g_207",Hee="_timeSectionContainer_xgf3g_223",Kee="_timeSection_xgf3g_223",Vee="_timerNumber_xgf3g_249",zee="_timerColon_xgf3g_265",Yee="_countdownTitle_xgf3g_281",Wee="_label_xgf3g_297",$ee="_logos_xgf3g_311",Xee="_showStartedLabel_xgf3g_337",Qee="_backWrapper_xgf3g_345",Jee="_warning_xgf3g_373",ete="_fadeIn_xgf3g_1",fi={gradientBackground:Nee,container:xee,imageWrapper:Mee,listText:Dee,boldText:Pee,image:Oee,glow:Lee,dividerWrapper:kee,divider:Fee,buttonsWrapper:Uee,testButton:Bee,demoButton:jee,title:Zee,countdownWrapper:Gee,startDate:qee,timeSectionContainer:Hee,timeSection:Kee,timerNumber:Vee,timerColon:zee,countdownTitle:Yee,label:Wee,logos:$ee,showStartedLabel:Xee,backWrapper:Qee,warning:Jee,fadeIn:ete},tte="_errorContainer_1vpqa_1",nte={errorContainer:tte},rte=({errorIcon:o,errorMessage:i,errorName:l})=>Rt.jsxs("div",{className:nte.errorContainer,children:[o&&Rt.jsx("div",{children:o}),Rt.jsx("span",{className:"body-text",children:"".concat(l&&"".concat(l,".")," ").concat(i)})]}),ite="_gradientBackground_1pfse_1",ote="_container_1pfse_19",ate="_qrCode_1pfse_33",nI={gradientBackground:ite,container:ote,qrCode:ate},ste=({url:o})=>Rt.jsxs("div",{className:"".concat(nI.gradientBackground," ").concat(nI.container),children:[Rt.jsx(yE,{className:nI.qrCode,bgColor:"white",fgColor:"black",value:o,size:500}),Rt.jsx("p",{className:"body-text",children:"Scan the QR code with the app."})]});function ute(o){if(!o)return"";const i=new Date(o),d=["January","February","March","April","May","June","July","August","September","October","November","December"][i.getMonth()],p=i.getDate();let S=i.getHours();const b=i.getMinutes().toString().padStart(2,"0"),g=S>=12?"PM":"AM";return S=S%12||12,"".concat(d," ").concat(p,", ").concat(S,":").concat(b," ").concat(g)}const lte=({timeToLive:o,isLive:i,backToShow:l})=>{const d=W7(),p=Du(),S=w4(),b=A4(),g=bf(),w=CC(),[F,R]=gn.useState(),[y,v]=gn.useState("00:00:00:00"),[D,m]=gn.useState(!1),T=gn.useRef(null),U=5;gn.useEffect(()=>{const $=w==null?void 0:w.filter(ue=>ue.deviceId!==Eh);m(!!($!=null&&$.length));const W=w==null?void 0:w.find(ue=>ue.deviceId===Eh);R(W)},[w]);let x;($=>{$.BEFORE="before",$.MIDDLE="middle",$.END="end"})(x||(x={}));const _=$=>{if(p&&g){let W=new Date(p.serverNow());switch($){case"end":W=new Date(p.demoEndtime);break;case"middle":W.setMinutes(W.getMinutes()-22);break;default:case"before":W.setSeconds(W.getSeconds()+U);break}g.sendGroupCommand({command:"play",value:{senderID:P0(),startDate:W.toISOString()}}),p.updateStartTime(W,!0)}};gn.useEffect(()=>{if(o&&o>0){const $=X=>{const ce=Date.parse(X.toString())-Date.parse(new Date().toString()),oe=Math.floor(ce/1e3%60),de=Math.floor(ce/1e3/60%60),Ce=Math.floor(ce/1e3/60/60%24),Je=Math.floor(ce/1e3/60/60/24);return{total:ce,days:Je,hours:Ce,minutes:de,seconds:oe}},W=X=>{const{total:ce,days:oe,hours:de,minutes:Ce,seconds:Je}=$(X);ce>=0&&v((oe>9?oe:"0"+oe)+":"+(de>9?de:"0"+de)+":"+(Ce>9?Ce:"0"+Ce)+":"+(Je>9?Je:"0"+Je))};(X=>{T.current&&clearInterval(T.current),W(X);const ce=setInterval(()=>{W(X)},1e3);T.current=ce})((X=>{const ce=new Date;return ce.setSeconds(ce.getSeconds()+Math.floor(X/1e3)),ce})(o))}},[o]);const[I,C,j,z]=y.split(":");if(F&&F.stateInfo.state==="showQrCode"){const $="".concat(TC,":").concat(F.deviceId);return Rt.jsx(ste,{url:$})}return Rt.jsxs("div",{className:fi.container,children:[b&&!i&&Rt.jsx("div",{className:fi.buttonsWrapper,children:Rt.jsx(Tl,{onClick:()=>{_("before")},children:"Demo"})}),Rt.jsx(yB,{}),d.map(($,W)=>Rt.jsx(rte,{errorMessage:$.toString},"".concat($.name,"-error-").concat(W.toString()))),Rt.jsxs("div",{className:fi.imageWrapper,children:[Rt.jsx("div",{className:fi.glow}),Rt.jsx("img",{className:fi.image,src:"".concat(S==null?void 0:S.preScreen.backgroundLandscape.url)})]}),Rt.jsxs("div",{className:fi.countdownWrapper,children:[Rt.jsx("div",{className:fi.title,children:S==null?void 0:S.preScreen.showTitle}),Rt.jsx("div",{className:fi.startDate,children:ute(p==null?void 0:p.adjustedStartTime).toUpperCase()}),Rt.jsx("div",{className:fi.dividerWrapper,children:Rt.jsx("div",{className:fi.divider})}),!i&&Rt.jsxs(Rt.Fragment,{children:[Rt.jsx("div",{className:fi.countdownTitle,children:"Starts in"}),Rt.jsxs("div",{className:fi.timeSectionContainer,children:[Rt.jsxs("div",{className:fi.timeSection,children:[Rt.jsx("div",{className:fi.timerNumber,children:I}),Rt.jsx("div",{className:fi.label,children:"days"})]}),Rt.jsx("div",{className:fi.timerColon,children:":"}),Rt.jsxs("div",{className:fi.timeSection,children:[Rt.jsx("div",{className:fi.timerNumber,children:C}),Rt.jsx("div",{className:fi.label,children:"hours"})]}),Rt.jsx("div",{className:fi.timerColon,children:":"}),Rt.jsxs("div",{className:fi.timeSection,children:[Rt.jsx("div",{className:fi.timerNumber,children:j}),Rt.jsx("div",{className:fi.label,children:"mins"})]}),Rt.jsx("div",{className:fi.timerColon,children:":"}),Rt.jsxs("div",{className:fi.timeSection,children:[Rt.jsx("div",{className:fi.timerNumber,children:z}),Rt.jsx("div",{className:fi.label,children:"secs"})]})]})]}),i&&Rt.jsxs(Rt.Fragment,{children:[Rt.jsx("h1",{className:fi.showStartedLabel,children:"The show has started"}),Rt.jsx("div",{className:fi.backWrapper,children:Rt.jsx(Tl,{onClick:()=>{l()},children:"Back to show"})})]})]}),Rt.jsx("div",{className:fi.warning,children:!D&&RV==="new"&&Rt.jsx(MB,{})})]})},cte="_wrapper_e3u2c_1",fte="_container_e3u2c_21",dte="_menu_e3u2c_49",hte="_qrCodeContainer_e3u2c_61",pte="_qrCode_e3u2c_61",gte="_listContainer_e3u2c_89",mte="_list_e3u2c_89",vte="_listItemContainer_e3u2c_123",yte="_listNumber_e3u2c_133",Ete="_listText_e3u2c_161",_te="_listBold_e3u2c_179",Tte="_circleRightCorner_e3u2c_187",Ste="_circleLeftCorner_e3u2c_211",wte="_circleCenter_e3u2c_233",Ate="_errorMessage_e3u2c_257",Ite="_fadeIn_e3u2c_1",uo={wrapper:cte,container:fte,menu:dte,qrCodeContainer:hte,qrCode:pte,listContainer:gte,list:mte,listItemContainer:vte,listNumber:yte,listText:Ete,listBold:_te,circleRightCorner:Tte,circleLeftCorner:Ste,circleCenter:wte,errorMessage:Ate,fadeIn:Ite},bte="_container_9btbm_1",Cte={container:bte};function Rte(){return Rt.jsx("div",{className:Cte.container,children:Rt.jsx($J,{})})}const Nte=({url:o,setKeyboardSetup:i})=>{const l=I4(),d=b4(),p=b=>{if(b.name===Ea.NEGOTIATE)switch(b.code){case 400:b.title=l("ticket-entry","error.toManyDevices.title"),b.message=l("ticket-entry","error.toManyDevices.body");break;case 401:b.title=l("ticket-entry","error.invalidCode.title"),b.message=l("ticket-entry","error.invalidCode.body");break;case 403:b.title=l("ticket-entry","error.codeNoLongerValid.title"),b.message=l("ticket-entry","error.codeNoLongerValid.body");break;case 404:b.title="Not Found",b.message="Ticket was not found";break}else if(b.name===Ea.CONTENTFUL)switch(b.code){case 400:b.message="Could not fetch contentful environment"}return b.message};return localStorage.getItem("ticketCode")&&!d.length?Rt.jsx(Rte,{}):Rt.jsxs("div",{className:uo.wrapper,children:[Rt.jsx(Tl,{className:uo.menu,onClick:()=>{i(!0)},selfFocus:!0,focusKey:"MENU",children:"Menu"}),Rt.jsx("div",{className:uo.circleRightCorner}),Rt.jsx("div",{className:uo.circleLeftCorner}),Rt.jsx("div",{className:uo.circleCenter}),Rt.jsxs("div",{className:uo.container,children:[Rt.jsxs("div",{className:"".concat(uo.listContainer," body-text"),children:[Rt.jsx("h1",{children:"Connect your TV"}),Rt.jsxs("div",{className:uo.list,children:[Rt.jsxs("span",{className:uo.listItemContainer,children:[Rt.jsx("span",{className:uo.listNumber,children:"1"}),Rt.jsxs("span",{className:uo.listText,children:["Download the ",Rt.jsx("span",{className:uo.listBold,children:"Imagien Parallel"})," ","app on your mobile or tablet."]})]}),Rt.jsxs("span",{className:uo.listItemContainer,children:[Rt.jsx("span",{className:uo.listNumber,children:"2"}),Rt.jsx("span",{className:uo.listText,children:"Enter the ticket code from your confirmation email."})]}),Rt.jsxs("span",{className:uo.listItemContainer,children:[Rt.jsx("span",{className:uo.listNumber,children:"3"}),Rt.jsx("span",{className:uo.listText,children:"Scan the QR code with the app."})]})]})]}),Rt.jsx("div",{className:uo.qrCodeContainer,children:Rt.jsx("div",{className:uo.qrCode,children:Rt.jsx(yE,{bgColor:"white",fgColor:"black",value:o!=null?o:"",size:512})})})]}),Rt.jsx("div",{className:uo.errorMessage,children:d.map((b,g)=>Rt.jsxs("h3",{children:[Rt.jsx(EE,{color:"red",size:54}),p(b)]},"".concat(b.name,"-error-").concat(g.toString())))})]})};function xte(){switch(uE()){case fc.TIZEN:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:10009,KEY_MEDIA_STOP:413};case fc.WEBOS:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:461,KEY_MEDIA_STOP:413};case fc.WEB:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83};default:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83}}}const ef=xte(),Mte="_popupWrapper_5nup5_1",Dte="_popup_5nup5_1",Pte="_controls_5nup5_59",rI={popupWrapper:Mte,popup:Dte,controls:Pte},DB=async(o,i=!1)=>{const l=uE();o!=null&&o.connected&&i&&await o.destroy(),i&&localStorage.removeItem("ticketCode"),setTimeout(()=>{switch(l){case fc.TIZEN:i?location.reload():window.tizen.application.getCurrentApplication().exit();break;case fc.WEBOS:i?location.reload():window.close();break;default:location.reload();break}},1e3)};function Ote({close:o,shouldLogout:i}){const l=bf(),d=async()=>{await DB(l,i)};function p(S){Promise.resolve(1).then(()=>{["POPUP_CONFIRM","POPUP_CANCEL"].includes(ou.getCurrentFocusKey())||ou.setFocus(S)})}return Rt.jsx("div",{className:rI.popupWrapper,children:Rt.jsxs("div",{className:rI.popup,children:[Rt.jsxs("h3",{children:["Would you like to ",i?"logout":"exit app","?"]}),Rt.jsxs("div",{className:rI.controls,children:[Rt.jsx(Tl,{onClick:o,selfFocus:!0,onBlur:()=>{p("POPUP_CANCEL")},focusKey:"POPUP_CANCEL",children:"Cancel"}),Rt.jsx(Tl,{onClick:d,focusKey:"POPUP_CONFIRM",onBlur:()=>{p("POPUP_CONFIRM")},children:"Confirm"})]})]})})}const Lte="_popupWrapper_5qjl5_1",kte="_popup_5qjl5_1",qF={popupWrapper:Lte,popup:kte};function Fte(){const[o,i]=gn.useState(!1);return Rt.jsx("div",{className:qF.popupWrapper,children:Rt.jsxs("div",{className:qF.popup,children:[Rt.jsx(VJ,{styles:{width:"96px",height:"96px"}}),Rt.jsx("h3",{children:"No Internet connection"}),Rt.jsx("span",{children:"Check your connection and try again."}),Rt.jsx(Tl,{onClick:()=>{i(!0),setTimeout(()=>{i(!1)},2e3)},selfFocus:!0,children:o?"Loading...":"Try Again"})]})})}const Ute="_warningContainer_1q3xx_1",Bte={warningContainer:Ute},jte=()=>Rt.jsxs("div",{className:Bte.warningContainer,children:[Rt.jsx(EE,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),Rt.jsx("p",{className:"label",children:"Unsupported key pressed "})]});function Zte({goBackFromLive:o,showLobby:i,currentFocus:l}){const d=xB(),p=Du(),[S,b]=gn.useState(),[g,w]=gn.useState(!1),[F,R]=gn.useState(!1),y=gn.useRef(),v=()=>{b(void 0),w(!1),Promise.resolve(1).then(()=>{ou.setFocus(l!=null?l:"LOGOUT")})};gn.useEffect(()=>(window.addEventListener("offline",()=>{b("network")}),window.addEventListener("online",()=>{v(),location.reload()}),document.addEventListener("logout",()=>{w(!0),b("exit")}),()=>{window.removeEventListener("online",()=>{}),window.removeEventListener("offline",()=>{}),document.removeEventListener("logout",()=>{})}),[]),gn.useEffect(()=>{d===ef.KEY_BACK?p!=null&&p.isLive&&!i?o():b("exit"):[ef.KEY_UP,ef.KEY_DOWN,ef.KEY_LEFT,ef.KEY_RIGHT,ef.KEY_OK,ef.KEY_BACK,0,1536,1537,65].includes(d)||((d>89||d<45)&&(R(!0),clearTimeout(y.current)),y.current=setTimeout(()=>{R(!1)},3e3))},[d]);function D(){switch(S){case"exit":return Rt.jsx(Ote,{close:v,shouldLogout:g});case"network":return Rt.jsx(Fte,{});default:return}}return Rt.jsxs(Rt.Fragment,{children:[D(),F&&Rt.jsx(jte,{})]})}const Gte="_wrapper_1hcg4_1",qte="_container_1hcg4_13",Hte="_errorInput_1hcg4_31",Kte="_errorMessage_1hcg4_39",Vte="_errorMessageContainer_1hcg4_61",zte="_circleRightCorner_1hcg4_75",Yte="_circleLeftCorner_1hcg4_99",Wte="_circleCenter_1hcg4_121",$te="_back_1hcg4_159",$l={wrapper:Gte,container:qte,errorInput:Hte,errorMessage:Kte,errorMessageContainer:Vte,circleRightCorner:zte,circleLeftCorner:Yte,circleCenter:Wte,back:$te},Xte="_inputWrapper_1ufan_1",Qte="_symbol_1ufan_15",HF={inputWrapper:Xte,symbol:Qte},Jte=({value:o})=>Rt.jsx("div",{className:HF.inputWrapper,children:(o+" ".repeat(9-o.length)).split("").map((i,l)=>Rt.jsx("div",{className:HF.symbol,children:i},l))}),ene="_keyboardWrapper_18oyi_1",tne="_button_18oyi_17",iI={keyboardWrapper:ene,button:tne,delete:"_delete_18oyi_35"},nne=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M","Delete"]],rne=({handleKeyPress:o})=>{function i(l){l.keyCode<91&&l.keyCode>47&&(o(l.key.toString().toUpperCase()),ou.setFocus(l.key.toString().toUpperCase()))}return gn.useEffect(()=>(document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}),[]),Rt.jsx("div",{className:iI.keyboardWrapper,children:nne.map((l,d)=>Rt.jsx("div",{children:l.map((p,S)=>Rt.jsx(Tl,{className:"".concat(iI.button," ").concat(p==="Delete"?iI.delete:""),focusKey:p,selfFocus:!d&&!S,onClick:()=>{ou.setFocus(p),o(p)},children:p},p))},"keyboard_line_".concat(d)))})},ine=({ticketCode:o,handleTicketCodeEntry:i,setKeyboardSetup:l})=>{const[d,p]=gn.useState(o!=null?o:""),S=I4(),b=b4(),g=gn.useRef(o!=null?o:"");gn.useEffect(()=>{g.current.length===9&&i(d)},[i,d]);function w(){const y=new Event("clearPreConnectErrors");document.dispatchEvent(y)}const F=y=>{if(y.name===Ea.NEGOTIATE)switch(y.code){case 400:y.title=S("ticket-entry","error.toManyDevices.title"),y.message=S("ticket-entry","error.toManyDevices.body");break;case 401:y.title=S("ticket-entry","error.invalidCode.title"),y.message=S("ticket-entry","error.invalidCode.body");break;case 403:y.title=S("ticket-entry","error.codeNoLongerValid.title"),y.message=S("ticket-entry","error.codeNoLongerValid.body");break;case 404:y.title="Not Found",y.message="Ticket was not found";break}else if(y.name===Ea.CONTENTFUL)switch(y.code){case 400:y.message="Could not fetch contentful environment"}return y.message};function R(y){y==="Delete"?(w(),g.current=g.current.slice(0,-1),p(g.current)):g.current.length<9&&(g.current=g.current+y,p(g.current))}return Rt.jsxs("div",{className:$l.wrapper,children:[Rt.jsx("div",{className:$l.circleRightCorner}),Rt.jsx("div",{className:$l.circleLeftCorner}),Rt.jsx("div",{className:$l.circleCenter}),Rt.jsxs("div",{className:$l.container,children:[Rt.jsx("h1",{children:S("ticket-entry","enterCode.title")}),Rt.jsx(Jte,{value:d}),Rt.jsx("div",{className:$l.errorMessageContainer,children:b.map((y,v)=>Rt.jsxs("h3",{className:$l.errorMessage,children:[Rt.jsx(EE,{color:"red",size:54}),F(y)]},"".concat(y.name,"-error-").concat(v.toString())))}),Rt.jsx(rne,{handleKeyPress:R})]}),Rt.jsx(Tl,{onClick:()=>{w(),i(""),l(!1)},className:$l.back,focusKey:"BACK",children:"Back"})]})};function one({handleTicketCodeEntry:o}){const i=Du(),l=nm(),d=V7(),p=bf(),S=CC(),[b,g]=gn.useState(!1),[w,F]=gn.useState(!1),[R,y]=gn.useState(!1),[v,D]=gn.useState(),[m,T]=gn.useState(!1),[U,x]=gn.useState(!1),[_,I]=gn.useState(!1),[C,j]=gn.useState(!1),[z,$]=gn.useState(!1),[W,ue]=gn.useState(!1),[N,X]=gn.useState(""),[ce,oe]=gn.useState(),[de,Ce]=gn.useState(),Je="".concat(TC,":").concat(Eh);gn.useEffect(()=>{N&&o(N)},[N]),gn.useEffect(()=>{if(S){const nt=S.find(ct=>ct.deviceId===Eh);nt||(I(!0),setTimeout(()=>{DB(p,!0).then(()=>{}).catch(()=>{})},1500)),oe(nt||S[0])}},[S]),gn.useEffect(()=>{Ce(ce==null?void 0:ce.stateInfo.state)},[ce]),gn.useEffect(()=>{if(!i)return;const nt=()=>{i.adjustedEndTime&&i.adjustedEndTime<Date.now()?F(!0):i.adjustedStartTime&&(F(!1),D(i.adjustedStartTime-Date.now()))};return i.on("startTimeUpdated",nt),()=>{i.off("startTimeUpdated",nt)}},[i]),gn.useEffect(()=>{if(!l)return;const nt=()=>{F(!0)};return l.on("eventEnded",nt),()=>{l.off("eventEnded",nt)}},[l]),gn.useEffect(()=>{if(!p)return;const nt=()=>{y(!0)};return p.on("eventCanceled",nt),()=>{p.off("eventCanceled",nt)}},[p]),gn.useEffect(()=>{if(!m)return;const nt=setTimeout(()=>{x(!0),T(!1)},1500);return()=>{clearTimeout(nt)}},[m]),gn.useEffect(()=>{if(v)if(v>0){g(!1);const nt=setTimeout(()=>{g(!0)},v);return()=>{clearTimeout(nt)}}else g(!0)},[v]),gn.useEffect(()=>{de==="hostTv"?(j(!0),T(!0)):d===QI.CONNECTED_STATE&&T(!0)},[de,d]);let Te;const je=!C&&!de?W?"Q":"MENU":"LOGOUT";return R?Te=Rt.jsx(BF,{canceled:!0}):w?Te=Rt.jsx(BF,{}):Te=Rt.jsxs(Rt.Fragment,{children:[!C&&!de&&!W&&Rt.jsx(Nte,{url:Je,setKeyboardSetup:ue}),!C&&!de&&W&&Rt.jsx(ine,{ticketCode:N,handleTicketCodeEntry:X,setKeyboardSetup:ue}),m&&!U&&Rt.jsx(GF,{}),C&&U&&!_&&Rt.jsxs("div",{children:[Rt.jsx("div",{className:b?"":Ree.hidden,children:Rt.jsx(yee,{})}),(!b||z)&&Rt.jsx(lte,{timeToLive:v,isLive:b,backToShow:()=>{$(!1)}})]})]}),Rt.jsxs(Rt.Fragment,{children:[Te,_&&Rt.jsx(GF,{isDisconnected:!0}),Rt.jsx(Zte,{goBackFromLive:()=>{$(!0)},showLobby:z,currentFocus:je})]})}ou.init({debug:!1,shouldUseNativeEvents:!0});function ane(){const o=localStorage.getItem("ticketCode"),[i,l]=gn.useState(o!=null?o:"");return Rt.jsx("div",{className:LV.pageContainer,children:Rt.jsx(G7,{baseUrl:CV,preferredProfile:"dash-drm",contentfulAccessToken:NV,contentfulSpaceId:xV,ticketCodeProp:i,children:Rt.jsx(one,{handleTicketCodeEntry:l})})})}oI.createRoot(document.getElementById("root")).render(Rt.jsx(ane,{}));export{sne as __vite_legacy_guard};
